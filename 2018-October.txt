From m@rongiu@luigi @ending from gm@il@com  Mon Oct  1 08:44:01 2018
From: m@rongiu@luigi @ending from gm@il@com (Luigi Marongiu)
Date: Mon, 1 Oct 2018 08:44:01 +0200
Subject: [R] Boxplot with linear (not categorical) x-axis
In-Reply-To: <CAF8bMca1M3FP5MF8hxtYH+NM7L0GMxGfZk2W9jz7DLTO6b2zyg@mail.gmail.com>
References: <CAMk+s2Qn+5KyzZYCE_1OqmCBqXn9Jg0FCGmogqGt=KkK0aTUaw@mail.gmail.com>
 <CAF8bMca1M3FP5MF8hxtYH+NM7L0GMxGfZk2W9jz7DLTO6b2zyg@mail.gmail.com>
Message-ID: <CAMk+s2SGuc4jPWwn6t9PXJ9+6aWkW43-qcB3xMB73AM-i7SKHw@mail.gmail.com>

Thank you.
On Fri, Sep 28, 2018 at 5:34 PM William Dunlap <wdunlap at tibco.com> wrote:
>
> Use the 'at' argument to boxplot.  E.g.,
>
> > x <- rep(c(2,4,8,16), c(5,10,20,30))
> > y <- seq_along(x)
> > par(mfrow=c(2,1))
> > boxplot(y~x, at=unique(x))
> > boxplot(y~x)
>
>
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
>
> On Fri, Sep 28, 2018 at 3:05 AM, Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
>>
>> Dear all,
>> I am using boxplot to draw some data. Would be possible to have the
>> X-axis linear (as in a scatter plot) instead of the standard
>> categorical axis?
>> The data I have is subdivided into three groups at the numerical
>> values 1, 3, 5; boxplot treats these as categorical values; in fact, I
>> can write my own labels simply by using the values 1, 2, 3 for the
>> position of the labels as in the example.
>> Thank you,
>>
>> >>>>
>> # generate data.frames
>> A = c(70, 22, 4, 21, 29, 35, 24, 20, 9, 21,
>>       22, 12, 20, 21, 13, 18, 15, 3, 9, 23,
>>       6, 5, 2, 24, 25, 21, 16, 0, 4, 1)
>> B = c(17, 21, 70, 6, 23, 10, 8, 5, 22, 5,
>>       21, 5, 19, 9, 23, 24, 11, 13, 7, 15,
>>       25, 9, 13, 14, 11, 9, 12, 0, 5, 9)
>> C = c(17, 8, 30, 22, 11, 32, 33, 8, 160, 11,
>>       35, 7, 36, 15, 11, 25, 16, 6, 38, 19,
>>       35, 30, 12, 27, 22, 32, 47, 39, 31, 26)
>> X = rep(c(1, 3, 5),30*3)
>> dfA <- data.frame(X, c(A, B, C))
>> names(dfA) <- c("X", "Y")
>> par(mfrow=c(2,1))
>> boxplot(dfA$Y ~ dfA$X,
>>         ylim=c(0, 80),
>>         col="green",
>>         ylab="Y-values",
>>         xlab="X-values",
>>         main="usual X labels"
>> )
>> boxplot(dfA$Y ~ dfA$X,
>>         ylim=c(0, 80),
>>         col="green",
>>         ylab="Y-values",
>>         xlab="X-values",
>>         main="custom X labels",
>>         xaxt="n"
>> )
>> x.lab = c("A", "B", "C")
>> x.pos = c(1, 2, 3)
>> axis(side=1, at=x.pos,
>>      lab=x.lab, cex.axis=1)
>>
>> --
>> Best regards,
>> Luigi
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>


-- 
Best regards,
Luigi


From oy@tein@@oren@en@1985 @ending from gm@il@com  Mon Oct  1 08:15:06 2018
From: oy@tein@@oren@en@1985 @ending from gm@il@com (=?UTF-8?B?w5h5c3RlaW4gU8O4cmVuc2Vu?=)
Date: Mon, 1 Oct 2018 08:15:06 +0200
Subject: [R] Why do two different calls to mgcv::gamm give different
 p-values?
Message-ID: <CAEWpFgchTan5_nOs=F07DhQpZAd+GDcG3AUKNtxC4QGbEcm9bQ@mail.gmail.com>

I have longitudinal data where a response y_{ij} has been measured
repeatedly for i=1,...,n individuals, j=1,...,m times for each individual.
Let x_{ij} be the age of individual i at her/his jth measurement. I wish to
see how the response varies with age, and have reason to believe that a
nonlinear fit is needed. I hence wish to model the relationship using an
additive mixed model of the form y_{ij} = f(x_{ij}) + b_{i} +
\epsilon_{ij}, where f() is some smooth function to be estimated, b_{i}
\sim N(0, \sigma_{b}^{2}) is the random effect for individual i,
\epsilon_{ij} \sim N(0, \sigma^{2}) is the residual.

Reading the documentation to the mgcv package, I see that such models can
be set up by calling the mgcv::gamm two different ways. One way shown to
set up such a model is with the call
b1 <- gamm(y ~ s(x), random = list(id =~ 1)),
where id is an indicator of the specific individual. In this way, the
random effect is specified in a list. The other way is to set up the random
effect with a smooth of the re:
b2 <- gamm(y ~ s(x) + s(id, bs = "re")).

As far as I can understand, these two setups should create the same
underlying model matrices. However, when running them on my data, the
p-values for the smooth terms, as well as their estimated degrees of
freedom, are different.

Below is a reproducible example on simulated data, which show that these
two types of specifying the models give different p-values and estimated
degrees of freedom. On my real data, these differences are sometimes even
more exaggerated.

My question is: Are not these two calls to gamm suppose to estimate the
same model, or have I misunderstood?

Here is a reproducible example:

library(mgcv)
set.seed(100)
n_sim <- 100
df <- data.frame(
  model1_pval = numeric(n_sim),
  model1_edf = numeric(n_sim),
  model2_pval = numeric(n_sim),
  model2_edf = numeric(n_sim)
)

# Number of observations
n <- 500
# Number of groups
ng <- 100

for(i in 1:n_sim){
  # Draw the fixed effect covariate
  x <- rnorm(n)
  # Set up the group
  id <- rep(1:ng, n/ng)
  # Draw the random effect
  z <- rnorm(ng)
  # Draw the response
  y <- 0.1 * x + 0.2 * x^3 + z[id] + rnorm(n)

  # Fit the two different models
  b1 <- gamm(y ~ s(x, k = 5), random = list(id =~ 1))
  b2 <- gamm(y ~ s(x, k = 5) + s(id, bs = "re"))

  df[i, "model1_pval"] <- anova(b1$gam)$s.pv
  df[i, "model1_edf"] <- anova(b1$gam)$edf
  df[i, "model2_pval"] <- anova(b2$gam)$s.pv[[1]]
  df[i, "model2_edf"] <- anova(b2$gam)$edf[[1]]
}

# Differences between model 1 and model 2 p values
mean(df$model1_pval)
#> [1] 6.790546e-21
mean(df$model2_pval)
#> [1] 3.090694e-14
max(abs(df$model1_pval - df$model2_pval))
#> [1] 2.770545e-12

# Differences between model1 and model 2 estimated degrees of freedom
mean(df$model1_edf)
#> [1] 3.829992
mean(df$model2_edf)
#> [1] 3.731438
max(abs(df$model1_edf - df$model2_edf))
#> [1] 0.6320281


Thanks in advance,
?ystein S?rensen

	[[alternative HTML version deleted]]


From r@nj@nm@no167 @ending from gm@il@com  Mon Oct  1 11:24:43 2018
From: r@nj@nm@no167 @ending from gm@il@com (Manoranjan Muthusamy)
Date: Mon, 1 Oct 2018 10:24:43 +0100
Subject: [R] R - Reading a horizontally arranged csv file,
 replacing values and saving again
Message-ID: <CANqyHbTC9JF4JQRKOu2YeiL43V3VpTWCA4-tnXpXDYack0d94g@mail.gmail.com>

I have a horizontally arranged CSV file
<https://www.dropbox.com/s/0ukyuifvpq1olqk/samplefile.csv?dl=0> (
samplefile.csv) with headers are in the first column. Also, each row has a
different number of columns. I want to read this CSV file, replace one of
the cell value and save again as a CSV file with the same format as the
original file with exactly same number of columns and rows. It sounds like
a simple task, but I am struggling to find a way. I tried to do this with
the help of this
<https://stackoverflow.com/questions/17288197/reading-a-csv-file-organized-horizontally>
 and this
<https://stackoverflow.com/questions/20308621/how-do-i-write-a-csv-file-in-r-where-my-input-is-written-to-the-file-as-row>
posts,
but still, I can't get the output the way I want. Can somebody help me here?

My attempt using the answer in this post
<https://stackoverflow.com/questions/17288197/reading-a-csv-file-organized-horizontally>
to
read the CSV file (samplefile.csv) gives me the following output where
headers are kinda messed up and empty cells are replaced with NA values
which is not what I want

aaa <- read.tcsv("samplefile.csv")
aaa

     Header.1 Header.2..units. Header.3..units. Header.3..units..11
Some text           0.0625                0             2648962
<NA>           0.0625             1200             6647473        <NA>
          0.0625             1380                  14        <NA>
     0.2500             1500                  15        <NA>
0.6250             1620                 NA6        <NA>
1.3125             1740                 NA7        <NA>
2.4375             1860                 NA8        <NA>
3.5625             1980                 NA9        <NA>
4.6250             2100                 NA10       <NA>
5.0000             2220                 NA11       <NA>
5.0000             2340                 NA12       <NA>
4.6250             2460                 NA13       <NA>
3.5625             2580                 NA14       <NA>
2.4375             2700                 NA15       <NA>
1.3125             2820                 NA16       <NA>
0.6250             2940                 NA17       <NA>
0.2500             3060                 NA18       <NA>
0.0625             3180                 NA19       <NA>
0.0000             3300                 NA20       <NA>
0.0000            18000                 NA

Also, I am not sure how to go back to original format when I save the file
again after a modification (for example after replacing a cell value)

I tried saving the file again by using t (transpose) as given below

write.csv(t(aaa), file ="samplefile_e.csv", row.names=T)

but still, there are following issues in the saved file

   1. messed up headers
   2. empty cells are replaced with NA
   3. when I open the file in a text editor all the values are shown as
   characters

Thanks,
Mano

	[[alternative HTML version deleted]]


From wdunl@p @ending from tibco@com  Mon Oct  1 17:56:36 2018
From: wdunl@p @ending from tibco@com (William Dunlap)
Date: Mon, 1 Oct 2018 08:56:36 -0700
Subject: [R] R - Reading a horizontally arranged csv file,
 replacing values and saving again
In-Reply-To: <CANqyHbTC9JF4JQRKOu2YeiL43V3VpTWCA4-tnXpXDYack0d94g@mail.gmail.com>
References: <CANqyHbTC9JF4JQRKOu2YeiL43V3VpTWCA4-tnXpXDYack0d94g@mail.gmail.com>
Message-ID: <CAF8bMcZ3gid0Zb0_e7eTG67XeH7tj0eZw5Hh79m0v=v44gLDcg@mail.gmail.com>

Read the help file for write.table
   ?write.table
and look at the descriptions of its arguments.
  > df <- data.frame(Text=c("Abe","Ben",NA,"David"), Age=c(19, NA, 12, 10))
  > write.table(file=stdout(), t(df), sep=",")
  "V1","V2","V3","V4"
  "Text","Abe","Ben",NA,"David"
  "Age","19",NA,"12","10"
  > write.table(file=stdout(), t(df), quote=FALSE, na="", sep=",")
  V1,V2,V3,V4
  Text,Abe,Ben,,David
  Age,19,,12,10




Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Mon, Oct 1, 2018 at 2:24 AM, Manoranjan Muthusamy <
ranjanmano167 at gmail.com> wrote:

> I have a horizontally arranged CSV file
> <https://www.dropbox.com/s/0ukyuifvpq1olqk/samplefile.csv?dl=0> (
> samplefile.csv) with headers are in the first column. Also, each row has a
> different number of columns. I want to read this CSV file, replace one of
> the cell value and save again as a CSV file with the same format as the
> original file with exactly same number of columns and rows. It sounds like
> a simple task, but I am struggling to find a way. I tried to do this with
> the help of this
> <https://stackoverflow.com/questions/17288197/reading-a-
> csv-file-organized-horizontally>
>  and this
> <https://stackoverflow.com/questions/20308621/how-do-i-
> write-a-csv-file-in-r-where-my-input-is-written-to-the-file-as-row>
> posts,
> but still, I can't get the output the way I want. Can somebody help me
> here?
>
> My attempt using the answer in this post
> <https://stackoverflow.com/questions/17288197/reading-a-
> csv-file-organized-horizontally>
> to
> read the CSV file (samplefile.csv) gives me the following output where
> headers are kinda messed up and empty cells are replaced with NA values
> which is not what I want
>
> aaa <- read.tcsv("samplefile.csv")
> aaa
>
>      Header.1 Header.2..units. Header.3..units. Header.3..units..11
> Some text           0.0625                0             2648962
> <NA>           0.0625             1200             6647473        <NA>
>           0.0625             1380                  14        <NA>
>      0.2500             1500                  15        <NA>
> 0.6250             1620                 NA6        <NA>
> 1.3125             1740                 NA7        <NA>
> 2.4375             1860                 NA8        <NA>
> 3.5625             1980                 NA9        <NA>
> 4.6250             2100                 NA10       <NA>
> 5.0000             2220                 NA11       <NA>
> 5.0000             2340                 NA12       <NA>
> 4.6250             2460                 NA13       <NA>
> 3.5625             2580                 NA14       <NA>
> 2.4375             2700                 NA15       <NA>
> 1.3125             2820                 NA16       <NA>
> 0.6250             2940                 NA17       <NA>
> 0.2500             3060                 NA18       <NA>
> 0.0625             3180                 NA19       <NA>
> 0.0000             3300                 NA20       <NA>
> 0.0000            18000                 NA
>
> Also, I am not sure how to go back to original format when I save the file
> again after a modification (for example after replacing a cell value)
>
> I tried saving the file again by using t (transpose) as given below
>
> write.csv(t(aaa), file ="samplefile_e.csv", row.names=T)
>
> but still, there are following issues in the saved file
>
>    1. messed up headers
>    2. empty cells are replaced with NA
>    3. when I open the file in a text editor all the values are shown as
>    characters
>
> Thanks,
> Mano
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From prof@@mit@mitt@l @ending from gm@il@com  Mon Oct  1 18:31:21 2018
From: prof@@mit@mitt@l @ending from gm@il@com (Amit Mittal)
Date: Mon, 1 Oct 2018 16:31:21 +0000
Subject: [R] R - Reading a horizontally arranged csv file,
 replacing values and saving again
In-Reply-To: <CAF8bMcZ3gid0Zb0_e7eTG67XeH7tj0eZw5Hh79m0v=v44gLDcg@mail.gmail.com>
References: <CANqyHbTC9JF4JQRKOu2YeiL43V3VpTWCA4-tnXpXDYack0d94g@mail.gmail.com>,
 <CAF8bMcZ3gid0Zb0_e7eTG67XeH7tj0eZw5Hh79m0v=v44gLDcg@mail.gmail.com>
Message-ID: <DM6PR01MB4107C1394F1A2CA7DC279D00FCEF0@DM6PR01MB4107.prod.exchangelabs.com>

You can just transpose in xl and read the regular form. Also use na.omit(data) and is.na() to replace na with 0  or remove rows with na data items

------------
Amit Mittal
PhD in Finance and Accounting (tbd)
IIM Lucknow
http://ssrn.com/author=2665511
*Top 10%, downloaded author since July 2017
------------
Sent from my Outlook for Android
https://aka.ms/ghei36

________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of William Dunlap via R-help <r-help at r-project.org>
Sent: Monday, October 1, 2018 9:26:36 PM
To: Manoranjan Muthusamy
Cc: r-help at r-project.org
Subject: Re: [R] R - Reading a horizontally arranged csv file, replacing values and saving again

Read the help file for write.table
   ?write.table
and look at the descriptions of its arguments.
  > df <- data.frame(Text=c("Abe","Ben",NA,"David"), Age=c(19, NA, 12, 10))
  > write.table(file=stdout(), t(df), sep=",")
  "V1","V2","V3","V4"
  "Text","Abe","Ben",NA,"David"
  "Age","19",NA,"12","10"
  > write.table(file=stdout(), t(df), quote=FALSE, na="", sep=",")
  V1,V2,V3,V4
  Text,Abe,Ben,,David
  Age,19,,12,10




Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Mon, Oct 1, 2018 at 2:24 AM, Manoranjan Muthusamy <
ranjanmano167 at gmail.com> wrote:

> I have a horizontally arranged CSV file
> <https://www.dropbox.com/s/0ukyuifvpq1olqk/samplefile.csv?dl=0> (
> samplefile.csv) with headers are in the first column. Also, each row has a
> different number of columns. I want to read this CSV file, replace one of
> the cell value and save again as a CSV file with the same format as the
> original file with exactly same number of columns and rows. It sounds like
> a simple task, but I am struggling to find a way. I tried to do this with
> the help of this
> <https://stackoverflow.com/questions/17288197/reading-a-
> csv-file-organized-horizontally>
>  and this
> <https://stackoverflow.com/questions/20308621/how-do-i-
> write-a-csv-file-in-r-where-my-input-is-written-to-the-file-as-row>
> posts,
> but still, I can't get the output the way I want. Can somebody help me
> here?
>
> My attempt using the answer in this post
> <https://stackoverflow.com/questions/17288197/reading-a-
> csv-file-organized-horizontally>
> to
> read the CSV file (samplefile.csv) gives me the following output where
> headers are kinda messed up and empty cells are replaced with NA values
> which is not what I want
>
> aaa <- read.tcsv("samplefile.csv")
> aaa
>
>      Header.1 Header.2..units. Header.3..units. Header.3..units..11
> Some text           0.0625                0             2648962
> <NA>           0.0625             1200             6647473        <NA>
>           0.0625             1380                  14        <NA>
>      0.2500             1500                  15        <NA>
> 0.6250             1620                 NA6        <NA>
> 1.3125             1740                 NA7        <NA>
> 2.4375             1860                 NA8        <NA>
> 3.5625             1980                 NA9        <NA>
> 4.6250             2100                 NA10       <NA>
> 5.0000             2220                 NA11       <NA>
> 5.0000             2340                 NA12       <NA>
> 4.6250             2460                 NA13       <NA>
> 3.5625             2580                 NA14       <NA>
> 2.4375             2700                 NA15       <NA>
> 1.3125             2820                 NA16       <NA>
> 0.6250             2940                 NA17       <NA>
> 0.2500             3060                 NA18       <NA>
> 0.0625             3180                 NA19       <NA>
> 0.0000             3300                 NA20       <NA>
> 0.0000            18000                 NA
>
> Also, I am not sure how to go back to original format when I save the file
> again after a modification (for example after replacing a cell value)
>
> I tried saving the file again by using t (transpose) as given below
>
> write.csv(t(aaa), file ="samplefile_e.csv", row.names=T)
>
> but still, there are following issues in the saved file
>
>    1. messed up headers
>    2. empty cells are replaced with NA
>    3. when I open the file in a text editor all the values are shown as
>    characters
>
> Thanks,
> Mano
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From reichm@nj @ending from @bcglob@l@net  Mon Oct  1 23:42:33 2018
From: reichm@nj @ending from @bcglob@l@net (Jeff Reichman)
Date: Mon, 1 Oct 2018 16:42:33 -0500
Subject: [R] arulesSequences Package
Message-ID: <000601d459cf$aa37e840$fea7b8c0$@sbcglobal.net>

R-Help Forum

For anyone who has used the "arulesSequences" Package how do I start with
raw data (*.csv file) and convert into a sequence object to run the cSPADE
function.  The package example use zaki dataset which has already been
converted.  When I state raw data how should I structure my csv file?

A web example  or RPubs link?

Jeff Reichman


From reichm@nj @ending from @bcglob@l@net  Mon Oct  1 23:47:33 2018
From: reichm@nj @ending from @bcglob@l@net (Jeff Reichman)
Date: Mon, 1 Oct 2018 16:47:33 -0500
Subject: [R] arulesSequences Package
Message-ID: <000701d459d0$5cfc1140$16f433c0$@sbcglobal.net>

R-Help Forum

For anyone who has used the "arulesSequences" Package how do I start with
raw data (*.csv file) and convert into a sequence object to run the cSPADE
function.  The package example use zaki dataset which has already been
converted.  When I state raw data how should I structure my csv file?

A web example  or RPubs link?

For example 
Seq_1	{E,B}, {C}, {T}
Seq_2 	(E,M}, {C}, {B,E,V,T}
Seq_3 	{E},{C},{T}

Jeff Reichman


From r@hep@rd @ending from @ppl-eco@y@@com  Tue Oct  2 00:03:06 2018
From: r@hep@rd @ending from @ppl-eco@y@@com (Rich Shepard)
Date: Mon, 1 Oct 2018 15:03:06 -0700 (PDT)
Subject: [R] Installing packages in bulk
Message-ID: <alpine.LNX.2.20.1810011457060.18720@salmo.appl-ecosys.com>

   For a new installation of R-3.5.1 I want to install all packages on
another host. I prepared a file, R-libraries.R, which contains
install.packages('BH, ...') for the entire list.

   When I source() this file on the new host and select a CRAN mirror I see
the message, "Warning message:
package 'BH,covr, <etc>
[...truncated]

   Do I need a space after each comma or is there something else wrong with
my syntax?

Rich


From bgunter@4567 @ending from gm@il@com  Tue Oct  2 00:22:02 2018
From: bgunter@4567 @ending from gm@il@com (Bert Gunter)
Date: Mon, 1 Oct 2018 15:22:02 -0700
Subject: [R] Installing packages in bulk
In-Reply-To: <alpine.LNX.2.20.1810011457060.18720@salmo.appl-ecosys.com>
References: <alpine.LNX.2.20.1810011457060.18720@salmo.appl-ecosys.com>
Message-ID: <CAGxFJbSYqT4y34KZcs0zjoRgXN5uFnv97M=+w2DUAU=oLWD7mA@mail.gmail.com>

Your syntax is wrong.

pkgs

character ***vector*** of the names of packages

See the example at the end of ?install.packages.

"a","b", "c"  is **not** a vector
c("a", "b", "c")  **is** a vector.

-- Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Oct 1, 2018 at 3:04 PM Rich Shepard <rshepard at appl-ecosys.com>
wrote:

>    For a new installation of R-3.5.1 I want to install all packages on
> another host. I prepared a file, R-libraries.R, which contains
> install.packages('BH, ...') for the entire list.
>
>    When I source() this file on the new host and select a CRAN mirror I see
> the message, "Warning message:
> package 'BH,covr, <etc>
> [...truncated]
>
>    Do I need a space after each comma or is there something else wrong with
> my syntax?
>
> Rich
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From e@@wiek @ending from gm@il@com  Tue Oct  2 00:32:33 2018
From: e@@wiek @ending from gm@il@com (Ek Esawi)
Date: Mon, 1 Oct 2018 18:32:33 -0400
Subject: [R] From for loop to lappy?
Message-ID: <CA+ZkTxsTWPrEe88f70yevZBqBV5C17G+sxeoxth_VF1Ka_vGuA@mail.gmail.com>

Hi All?

I am using Tabulizer to extract tables from PDF files. Tabulizer
creates a list of matrices for each set of tables in each document.
My code, below, works well. Then i thought i would use lapply instead
of for loop since it is a little faster and more compact,
but i kept getting an error message below.

Any help is greatly appreciated

EK

install.packages("tabulizer")
installed.packages("stringr")
library(stringi)
library(tabulizer)
path = "C:/Users/name/Documents/TextMining/"
file.names <- dir(path, pattern =".PDF")

for(i in 1:length(file.names)){
  print(file.names[i])
  A[[i]] <- extract_tables(file.names[i])
}


lapply(file.names, function(i) A[[i]] <- extract_tables(file.names[i]))

 Error in normalizePath(path.expand(path), winslash, mustWork) :
  path[1]="NA": The system cannot find the file specified


From m@cqueen1 @ending from llnl@gov  Tue Oct  2 00:39:31 2018
From: m@cqueen1 @ending from llnl@gov (MacQueen, Don)
Date: Mon, 1 Oct 2018 22:39:31 +0000
Subject: [R] From for loop to lappy?
In-Reply-To: <CA+ZkTxsTWPrEe88f70yevZBqBV5C17G+sxeoxth_VF1Ka_vGuA@mail.gmail.com>
References: <CA+ZkTxsTWPrEe88f70yevZBqBV5C17G+sxeoxth_VF1Ka_vGuA@mail.gmail.com>
Message-ID: <C8AEE11E-17D2-4E01-BE92-41EE734B855B@llnl.gov>

Try

A <- lapply(file.names, function(fn) extract_tables(fn)


--
Don MacQueen
Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062
Lab cell 925-724-7509
 
 

?On 10/1/18, 3:32 PM, "R-help on behalf of Ek Esawi" <r-help-bounces at r-project.org on behalf of esawiek at gmail.com> wrote:

    Hi All?
    
    I am using Tabulizer to extract tables from PDF files. Tabulizer
    creates a list of matrices for each set of tables in each document.
    My code, below, works well. Then i thought i would use lapply instead
    of for loop since it is a little faster and more compact,
    but i kept getting an error message below.
    
    Any help is greatly appreciated
    
    EK
    
    install.packages("tabulizer")
    installed.packages("stringr")
    library(stringi)
    library(tabulizer)
    path = "C:/Users/name/Documents/TextMining/"
    file.names <- dir(path, pattern =".PDF")
    
    for(i in 1:length(file.names)){
      print(file.names[i])
      A[[i]] <- extract_tables(file.names[i])
    }
    
    
    lapply(file.names, function(i) A[[i]] <- extract_tables(file.names[i]))
    
     Error in normalizePath(path.expand(path), winslash, mustWork) :
      path[1]="NA": The system cannot find the file specified
    
    ______________________________________________
    R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    https://stat.ethz.ch/mailman/listinfo/r-help
    PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    and provide commented, minimal, self-contained, reproducible code.
    


From e@@wiek @ending from gm@il@com  Tue Oct  2 01:02:29 2018
From: e@@wiek @ending from gm@il@com (Ek Esawi)
Date: Mon, 1 Oct 2018 19:02:29 -0400
Subject: [R] From for loop to lappy?
In-Reply-To: <C8AEE11E-17D2-4E01-BE92-41EE734B855B@llnl.gov>
References: <CA+ZkTxsTWPrEe88f70yevZBqBV5C17G+sxeoxth_VF1Ka_vGuA@mail.gmail.com>
 <C8AEE11E-17D2-4E01-BE92-41EE734B855B@llnl.gov>
Message-ID: <CA+ZkTxudw15YonuGPovhfGQ6giRsch2pXpZArnGzTdH1cfmhKQ@mail.gmail.com>

Thank you Don. It works
EK
On Mon, Oct 1, 2018 at 6:39 PM MacQueen, Don <macqueen1 at llnl.gov> wrote:
>
> Try
>
> A <- lapply(file.names, function(fn) extract_tables(fn)
>
>
> --
> Don MacQueen
> Lawrence Livermore National Laboratory
> 7000 East Ave., L-627
> Livermore, CA 94550
> 925-423-1062
> Lab cell 925-724-7509
>
>
>
> ?On 10/1/18, 3:32 PM, "R-help on behalf of Ek Esawi" <r-help-bounces at r-project.org on behalf of esawiek at gmail.com> wrote:
>
>     Hi All?
>
>     I am using Tabulizer to extract tables from PDF files. Tabulizer
>     creates a list of matrices for each set of tables in each document.
>     My code, below, works well. Then i thought i would use lapply instead
>     of for loop since it is a little faster and more compact,
>     but i kept getting an error message below.
>
>     Any help is greatly appreciated
>
>     EK
>
>     install.packages("tabulizer")
>     installed.packages("stringr")
>     library(stringi)
>     library(tabulizer)
>     path = "C:/Users/name/Documents/TextMining/"
>     file.names <- dir(path, pattern =".PDF")
>
>     for(i in 1:length(file.names)){
>       print(file.names[i])
>       A[[i]] <- extract_tables(file.names[i])
>     }
>
>
>     lapply(file.names, function(i) A[[i]] <- extract_tables(file.names[i]))
>
>      Error in normalizePath(path.expand(path), winslash, mustWork) :
>       path[1]="NA": The system cannot find the file specified
>
>     ______________________________________________
>     R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>     https://stat.ethz.ch/mailman/listinfo/r-help
>     PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>     and provide commented, minimal, self-contained, reproducible code.
>
>


From r@hep@rd @ending from @ppl-eco@y@@com  Tue Oct  2 01:04:51 2018
From: r@hep@rd @ending from @ppl-eco@y@@com (Rich Shepard)
Date: Mon, 1 Oct 2018 16:04:51 -0700 (PDT)
Subject: [R] Installing packages in bulk
In-Reply-To: <CAGxFJbSYqT4y34KZcs0zjoRgXN5uFnv97M=+w2DUAU=oLWD7mA@mail.gmail.com>
References: <alpine.LNX.2.20.1810011457060.18720@salmo.appl-ecosys.com>
 <CAGxFJbSYqT4y34KZcs0zjoRgXN5uFnv97M=+w2DUAU=oLWD7mA@mail.gmail.com>
Message-ID: <alpine.LNX.2.20.1810011604250.18720@salmo.appl-ecosys.com>

On Mon, 1 Oct 2018, Bert Gunter wrote:

> Your syntax is wrong.
> See the example at the end of ?install.packages.

Bert,

   Thank you.

Rich


From reichm@nj @ending from @bcglob@l@net  Tue Oct  2 02:02:33 2018
From: reichm@nj @ending from @bcglob@l@net (Jeff Reichman)
Date: Mon, 1 Oct 2018 19:02:33 -0500
Subject: [R] arulesSequences Package
In-Reply-To: <000701d459d0$5cfc1140$16f433c0$@sbcglobal.net>
References: <000701d459d0$5cfc1140$16f433c0$@sbcglobal.net>
Message-ID: <000f01d459e3$3906c420$ab144c60$@sbcglobal.net>

I Was able to figure out how to create my object using the "read_baskets"
function but when I run the "cspade" function I receive the following error
(running in RStudio)
...
4 -> 1 2 -> 1 -> 1 -- 1 1 
3 -> 1 2 -> 1 -> 1 -- 1 1 
3 4 -> 1 2 -> 1 -> 1 -- 1 1 
3 4 -> 1 -> 1 -> 1 -- 1 1 
 NA MB [2.4s]
reading sequences ...Error in file(con, "r") : cannot open the connection
In addition: Warning message:
In file(con, "r") :
  cannot open file
'C:\Users\reichmanj\Documents\R\R-3.5.1\library\arulesSequences\misc\cspade1
f8c30bb5148.out': No such file or directory
> 
> cspade> as(s1, "data.frame")
Error in .class1(object) : object 's1' not found

But if I run in R (alone) it works just fine.  Any idea why I can' t seem to
run in RStudio or what I might have to do in RStudio?

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Jeff Reichman
Sent: Monday, October 1, 2018 4:48 PM
To: r-help at r-project.org
Subject: [R] arulesSequences Package

R-Help Forum

For anyone who has used the "arulesSequences" Package how do I start with
raw data (*.csv file) and convert into a sequence object to run the cSPADE
function.  The package example use zaki dataset which has already been
converted.  When I state raw data how should I structure my csv file?

A web example  or RPubs link?

For example 
Seq_1	{E,B}, {C}, {T}
Seq_2 	(E,M}, {C}, {B,E,V,T}
Seq_3 	{E},{C},{T}

Jeff Reichman

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @ending from gm@il@com  Tue Oct  2 02:19:41 2018
From: bgunter@4567 @ending from gm@il@com (Bert Gunter)
Date: Mon, 1 Oct 2018 17:19:41 -0700
Subject: [R] arulesSequences Package
In-Reply-To: <000f01d459e3$3906c420$ab144c60$@sbcglobal.net>
References: <000701d459d0$5cfc1140$16f433c0$@sbcglobal.net>
 <000f01d459e3$3906c420$ab144c60$@sbcglobal.net>
Message-ID: <CAGxFJbQ=tCLxuDJTHXwUJS46DXQhcwGmVZOaO8G4d7EjBaQYEA@mail.gmail.com>

"But if I run in R (alone) it works just fine.  Any idea why I can' t seem
to
run in RStudio or what I might have to do in RStudio?"

This is the R-Help list; RStudio is a totally separate software product,
Any questions you have on RStudio software should be directed to their
site,not here.

Cheers,
Bert



Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Oct 1, 2018 at 5:03 PM Jeff Reichman <reichmanj at sbcglobal.net>
wrote:

> I Was able to figure out how to create my object using the "read_baskets"
> function but when I run the "cspade" function I receive the following error
> (running in RStudio)
> ...
> 4 -> 1 2 -> 1 -> 1 -- 1 1
> 3 -> 1 2 -> 1 -> 1 -- 1 1
> 3 4 -> 1 2 -> 1 -> 1 -- 1 1
> 3 4 -> 1 -> 1 -> 1 -- 1 1
>  NA MB [2.4s]
> reading sequences ...Error in file(con, "r") : cannot open the connection
> In addition: Warning message:
> In file(con, "r") :
>   cannot open file
>
> 'C:\Users\reichmanj\Documents\R\R-3.5.1\library\arulesSequences\misc\cspade1
> f8c30bb5148.out': No such file or directory
> >
> > cspade> as(s1, "data.frame")
> Error in .class1(object) : object 's1' not found
>
> But if I run in R (alone) it works just fine.  Any idea why I can' t seem
> to
> run in RStudio or what I might have to do in RStudio?
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Jeff Reichman
> Sent: Monday, October 1, 2018 4:48 PM
> To: r-help at r-project.org
> Subject: [R] arulesSequences Package
>
> R-Help Forum
>
> For anyone who has used the "arulesSequences" Package how do I start with
> raw data (*.csv file) and convert into a sequence object to run the cSPADE
> function.  The package example use zaki dataset which has already been
> converted.  When I state raw data how should I structure my csv file?
>
> A web example  or RPubs link?
>
> For example
> Seq_1   {E,B}, {C}, {T}
> Seq_2   (E,M}, {C}, {B,E,V,T}
> Seq_3   {E},{C},{T}
>
> Jeff Reichman
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From wdunl@p @ending from tibco@com  Tue Oct  2 02:45:48 2018
From: wdunl@p @ending from tibco@com (William Dunlap)
Date: Mon, 1 Oct 2018 17:45:48 -0700
Subject: [R] arulesSequences Package
In-Reply-To: <000f01d459e3$3906c420$ab144c60$@sbcglobal.net>
References: <000701d459d0$5cfc1140$16f433c0$@sbcglobal.net>
 <000f01d459e3$3906c420$ab144c60$@sbcglobal.net>
Message-ID: <CAF8bMca5Q5ua4hjkYh_PGrfh0jQTWe6ZLoFpLZM2URFjOwxF_w@mail.gmail.com>

Warning message:t
In file(con, "r") :
  cannot open file
'C:\Users\reichmanj\Documents\R\R-3.5.1\library\arulesSequences\misc\cspade1

f8c30bb5148.out': No such file or directory

It is hard to say what you did wrong when we only see R's output and not
what you typed to provoke the error.  However, this file it is trying to
read looks like something that tempfile() would have made if the tempdir()
function were messed up or if you gave an inappropriate directory name as
the tmpdir argument to arulesSequences::cspade.  You should not generally
give the tmpdir argument to cspade, as the default, tempdir(), should
work.  Did you supply it?  What does tempdir() return in the case that this
fails?

As an added complications, cspade redefines the system2 function if
.Platfom$OS.type is
"windows" and .Platform$GUI is "RGui".
    ## workaround
    if (.Platform$OS  == "windows" &&
        .Platform$GUI == "Rgui")
        system2 <- function(command, args = character(), stdout = "", ...) {
            if (is.character(stdout) && nzchar(stdout)) {
                args   <- c(args, ">", stdout)
                stdout <- NULL
            }
            args <- c("/c", shQuote(command), args)
            command <- Sys.getenv("COMSPEC")
            ## bail out
            if (!nzchar(command))
                stop("environment variable 'COMSPEC' not set")
            base::system2(command, args = args, stdout = stdout, ...)
        }

RStudio redefines .Platform$RGui to be "RStudio" so this redefinition does
not happen.  The author or maintainer of the package might be able to
straighten this part out.


Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Mon, Oct 1, 2018 at 5:02 PM, Jeff Reichman <reichmanj at sbcglobal.net>
wrote:

> I Was able to figure out how to create my object using the "read_baskets"
> function but when I run the "cspade" function I receive the following error
> (running in RStudio)
> ...
> 4 -> 1 2 -> 1 -> 1 -- 1 1
> 3 -> 1 2 -> 1 -> 1 -- 1 1
> 3 4 -> 1 2 -> 1 -> 1 -- 1 1
> 3 4 -> 1 -> 1 -> 1 -- 1 1
>  NA MB [2.4s]
> reading sequences ...Error in file(con, "r") : cannot open the connection
> In addition: Warning message:
> In file(con, "r") :
>   cannot open file
> 'C:\Users\reichmanj\Documents\R\R-3.5.1\library\
> arulesSequences\misc\cspade1
> f8c30bb5148.out': No such file or directory
> >
> > cspade> as(s1, "data.frame")
> Error in .class1(object) : object 's1' not found
>
> But if I run in R (alone) it works just fine.  Any idea why I can' t seem
> to
> run in RStudio or what I might have to do in RStudio?
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Jeff Reichman
> Sent: Monday, October 1, 2018 4:48 PM
> To: r-help at r-project.org
> Subject: [R] arulesSequences Package
>
> R-Help Forum
>
> For anyone who has used the "arulesSequences" Package how do I start with
> raw data (*.csv file) and convert into a sequence object to run the cSPADE
> function.  The package example use zaki dataset which has already been
> converted.  When I state raw data how should I structure my csv file?
>
> A web example  or RPubs link?
>
> For example
> Seq_1   {E,B}, {C}, {T}
> Seq_2   (E,M}, {C}, {B,E,V,T}
> Seq_3   {E},{C},{T}
>
> Jeff Reichman
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @deel@@u@f @ending from gm@il@com  Tue Oct  2 09:29:46 2018
From: @deel@@u@f @ending from gm@il@com (Adeela Munawar)
Date: Tue, 2 Oct 2018 12:29:46 +0500
Subject: [R] confiidence limits in Binom package
Message-ID: <CABGg3O4rh4h9P_vLOpD+vxuW75XeEBCbBSpFrn2pj=jNZ3DEJg@mail.gmail.com>

Dear List,

I am using your package binom in R version 3.4.4 but i have to display
lower and upper confidence limts in binom.confint and binom.length function
but unable to dispaly them. Could you suggest any improvement?
for example,
Binom<-binom.length(p=0.01, n=40, conf.level = 0.95, method = "all")
Output:
print(Binom)
          method         n       p          length
1  agresti-coull      40    0.01     0.13136905
2     asymptotic     40    0.01     0.03458699
3          bayes        40    0.01    0.06453984
4        cloglog        40    0.01    0.09751737
5          exact         40    0.01    0.10443801
6          logit           40    0.01    0.11075339
7         probit          40    0.01    0.10233802
8        profile          40    0.01    0.08961691
9            lrt             40    0.01    0.06806841
10     prop.test       40    0.01    0.12318140
11        wilson         40    0.01    0.10159667
Regards,
Adeela Munawar
Lecturer Statistics

	[[alternative HTML version deleted]]


From @imon@wood @ending from b@th@edu  Tue Oct  2 14:26:46 2018
From: @imon@wood @ending from b@th@edu (Simon Wood)
Date: Tue, 2 Oct 2018 14:26:46 +0200
Subject: [R] Why do two different calls to mgcv::gamm give different
 p-values?
In-Reply-To: <CAEWpFgchTan5_nOs=F07DhQpZAd+GDcG3AUKNtxC4QGbEcm9bQ@mail.gmail.com>
References: <CAEWpFgchTan5_nOs=F07DhQpZAd+GDcG3AUKNtxC4QGbEcm9bQ@mail.gmail.com>
Message-ID: <649ac7fe-39e4-1282-b305-d59451139a16@bath.edu>

Dear ?ystein,

In your code 'id' is set up to be numeric. In your first gamm call it 
gets coerced to a factor (since nothing else would make sense). In? your 
second gamm call it is simply treated as numeric, since that could makes 
sense. To make the two models equivalent you just need to substitute:

id <- as.factor(rep(1:ng, n/ng))

into your loop.

best,
Simon

On 01/10/18 08:15, ?ystein S?rensen wrote:
> I have longitudinal data where a response y_{ij} has been measured
> repeatedly for i=1,...,n individuals, j=1,...,m times for each individual.
> Let x_{ij} be the age of individual i at her/his jth measurement. I wish to
> see how the response varies with age, and have reason to believe that a
> nonlinear fit is needed. I hence wish to model the relationship using an
> additive mixed model of the form y_{ij} = f(x_{ij}) + b_{i} +
> \epsilon_{ij}, where f() is some smooth function to be estimated, b_{i}
> \sim N(0, \sigma_{b}^{2}) is the random effect for individual i,
> \epsilon_{ij} \sim N(0, \sigma^{2}) is the residual.
>
> Reading the documentation to the mgcv package, I see that such models can
> be set up by calling the mgcv::gamm two different ways. One way shown to
> set up such a model is with the call
> b1 <- gamm(y ~ s(x), random = list(id =~ 1)),
> where id is an indicator of the specific individual. In this way, the
> random effect is specified in a list. The other way is to set up the random
> effect with a smooth of the re:
> b2 <- gamm(y ~ s(x) + s(id, bs = "re")).
>
> As far as I can understand, these two setups should create the same
> underlying model matrices. However, when running them on my data, the
> p-values for the smooth terms, as well as their estimated degrees of
> freedom, are different.
>
> Below is a reproducible example on simulated data, which show that these
> two types of specifying the models give different p-values and estimated
> degrees of freedom. On my real data, these differences are sometimes even
> more exaggerated.
>
> My question is: Are not these two calls to gamm suppose to estimate the
> same model, or have I misunderstood?
>
> Here is a reproducible example:
>
> library(mgcv)
> set.seed(100)
> n_sim <- 100
> df <- data.frame(
>    model1_pval = numeric(n_sim),
>    model1_edf = numeric(n_sim),
>    model2_pval = numeric(n_sim),
>    model2_edf = numeric(n_sim)
> )
>
> # Number of observations
> n <- 500
> # Number of groups
> ng <- 100
>
> for(i in 1:n_sim){
>    # Draw the fixed effect covariate
>    x <- rnorm(n)
>    # Set up the group
>    id <- rep(1:ng, n/ng)
>    # Draw the random effect
>    z <- rnorm(ng)
>    # Draw the response
>    y <- 0.1 * x + 0.2 * x^3 + z[id] + rnorm(n)
>
>    # Fit the two different models
>    b1 <- gamm(y ~ s(x, k = 5), random = list(id =~ 1))
>    b2 <- gamm(y ~ s(x, k = 5) + s(id, bs = "re"))
>
>    df[i, "model1_pval"] <- anova(b1$gam)$s.pv
>    df[i, "model1_edf"] <- anova(b1$gam)$edf
>    df[i, "model2_pval"] <- anova(b2$gam)$s.pv[[1]]
>    df[i, "model2_edf"] <- anova(b2$gam)$edf[[1]]
> }
>
> # Differences between model 1 and model 2 p values
> mean(df$model1_pval)
> #> [1] 6.790546e-21
> mean(df$model2_pval)
> #> [1] 3.090694e-14
> max(abs(df$model1_pval - df$model2_pval))
> #> [1] 2.770545e-12
>
> # Differences between model1 and model 2 estimated degrees of freedom
> mean(df$model1_edf)
> #> [1] 3.829992
> mean(df$model2_edf)
> #> [1] 3.731438
> max(abs(df$model1_edf - df$model2_edf))
> #> [1] 0.6320281
>
>
> Thanks in advance,
> ?ystein S?rensen
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From m@rc_grt @ending from y@hoo@fr  Tue Oct  2 15:30:11 2018
From: m@rc_grt @ending from y@hoo@fr (Marc Girondot)
Date: Tue, 2 Oct 2018 15:30:11 +0200
Subject: [R] Strange result for strptime with %p
Message-ID: <76133d2f-20f0-707a-cdd2-73941115cf1d@yahoo.fr>

Dear members... are these results normal ?

For the first one, no problem. I expected this:

 > strptime("05/01/18 01:00:00 AM", format = ("%m/%d/%y %I:%M:%S %p"), 
tz="Asia/Jayapura")
[1] "2018-05-01 01:00:00 WIT"

For this one, it is ok also:

 > strptime("05/01/18 01:00:00 AM", format = ("%m/%d/%y %I:%M:%S %p"), 
tz="Asia/Jayapura")-1
[1] "2018-05-01 00:59:59 WIT"

But how to explain this ???

 > strptime("05/01/18 00:59:59 AM", format = ("%m/%d/%y %I:%M:%S %p"), 
tz="Asia/Jayapura")
[1] NA

Thanks for your advices
Marc
______________________

R 3.5.1 on MacOS 10.14

 > version
 ?????????????? _
platform?????? x86_64-apple-darwin15.6.0
arch?????????? x86_64
os???????????? darwin15.6.0
system???????? x86_64, darwin15.6.0
status
major????????? 3
minor????????? 5.1
year?????????? 2018
month????????? 07
day??????????? 02
svn rev??????? 74947
language?????? R
version.string R version 3.5.1 (2018-07-02)
nickname?????? Feather Spray


From petr@pik@l @ending from prechez@@cz  Tue Oct  2 15:39:55 2018
From: petr@pik@l @ending from prechez@@cz (PIKAL Petr)
Date: Tue, 2 Oct 2018 13:39:55 +0000
Subject: [R] Strange result for strptime with %p
In-Reply-To: <76133d2f-20f0-707a-cdd2-73941115cf1d@yahoo.fr>
References: <76133d2f-20f0-707a-cdd2-73941115cf1d@yahoo.fr>
Message-ID: <6d12217076d942f292efe0ddc191f7a3@SRVEXCHCM1301.precheza.cz>

Hi

Maybe it is connected to
%I
Hours as decimal number (01?12).

Your input has hour as 00

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Marc Girondot via
> R-help
> Sent: Tuesday, October 2, 2018 3:30 PM
> To: R-help Mailing List <r-help at r-project.org>
> Subject: [R] Strange result for strptime with %p
>
> Dear members... are these results normal ?
>
> For the first one, no problem. I expected this:
>
>  > strptime("05/01/18 01:00:00 AM", format = ("%m/%d/%y %I:%M:%S %p"),
> tz="Asia/Jayapura")
> [1] "2018-05-01 01:00:00 WIT"
>
> For this one, it is ok also:
>
>  > strptime("05/01/18 01:00:00 AM", format = ("%m/%d/%y %I:%M:%S %p"),
> tz="Asia/Jayapura")-1
> [1] "2018-05-01 00:59:59 WIT"
>
> But how to explain this ???
>
>  > strptime("05/01/18 00:59:59 AM", format = ("%m/%d/%y %I:%M:%S %p"),
> tz="Asia/Jayapura")
> [1] NA
>
> Thanks for your advices
> Marc
> ______________________
>
> R 3.5.1 on MacOS 10.14
>
>  > version
>                 _
> platform       x86_64-apple-darwin15.6.0
> arch           x86_64
> os             darwin15.6.0
> system         x86_64, darwin15.6.0
> status
> major          3
> minor          5.1
> year           2018
> month          07
> day            02
> svn rev        74947
> language       R
> version.string R version 3.5.1 (2018-07-02)
> nickname       Feather Spray
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information about processing and protection of business partner?s personal data are available on website: https://www.precheza.cz/en/personal-data-protection-principles/
D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any documents attached to it may be confidential and are subject to the legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/


From high@t@t @ending from high@t@t@com  Tue Oct  2 16:13:52 2018
From: high@t@t @ending from high@t@t@com (Highland Statistics Ltd)
Date: Tue, 2 Oct 2018 16:13:52 +0200
Subject: [R] Book: Spatial,
 Temporal and Spatial-Temporal Ecological Data Analysis with
 R-INLA. Volume II: GAM and Zero-Inflated Models
Message-ID: <41d874ff-70b9-2602-b30e-1c95d7d1be7d@highstat.com>

We are pleased to announce the following book:

Spatial, Temporal and Spatial-Temporal Ecological Data Analysis with 
R-INLA. Volume II: GAM and Zero-Inflated Models
Authors: Zuur and Ieno

Book website: www.highstat.com
Paperback or EBook can be order (exclusively) from www.highstat.com
TOC: http://highstat.com/Books/BGS/SpatialTempVII/TOC_SpatTempII_Online.pdf

Summary: In Volume II we apply zero-inflated models and generalised 
additive (mixed-effects) models to spatial and spatial-temporal data. 
Data and all R code is available.


Outline:

In Chapter 18 we will explain how to deal with zero-inflated data. We 
introduce so-called zero-inflated Poisson (ZIP) models, zero-inflated 
negative binomial (ZINB) models, zero-altered Poisson (ZAP) models and 
zero-altered negative binomial (ZINB) models.

In Chapter 19 we extend the ZIP, ZINB, ZAP and ZANB models with spatial 
correlation. Both these chapters use a skate data set from South 
America. In the appendix accompanying Chapter 19 we also explain how to 
manipulate maps and create spatial polygons (e.g. for coastlines).

In Chapter 20 we revisit a data set with which we have been battling 
since 2006. It is about begging behaviour of owl nestlings. In Zuur 
(2009a) we applied linear mixed-effects models on it, and in Zuur et al. 
(2012a) we analysed it with a zero-inflated GLMM. Thanks to R-INLA we 
finally cracked this data set and apply a zero-inflated GAMM.

In Chapter 21 we analyse sandeel count data. This work came out of a 
consultancy project that we carried out for Wageningen Marine Research 
(The Netherlands) in 2017. Although the setup of the experiment is 
simple (approximately 400 sites sampled once per year, for 4 years), 
analysing these data and writing this chapter took about 30 days. This 
should give you an idea about the complexity of the statistical tools 
(zero-inflated GAMMs + spatial-temporal correlation) that we discuss in 
this book.

Chapter 22 is about zero-inflated bird densities sampled in the Labrador 
Sea, located between the Labrador Peninsula (Eastern Canada) and 
Greenland. This chapter is about the analysis of zero-inflated 
continuous data with spatial correlation. A zero-altered gamma model 
with spatial correlation is used.

In Chapter 23 we analyse coral reef data sampled around an island. A lot 
of misery comes together in this chapter: smoothers, zero-inflation and 
spatial dependency that should not cross land as benthic species that 
live in a coral reef do not walk over land! We will discuss barrier 
models (Bakka et al. 2018) which ensure that spatial correlation seeps 
around a barrier (in this case an island).

Up to Chapter 23 all data sets analysed were geostatistical data and not 
areal or lattice data. The reason for this is that most ecological data 
is geostatistical. In Chapter 24 we analyse aggregated tornado data in 
102 counties in Illinois. This is areal data. We will use various CAR 
models (e.g. iCAR, BYM, BYM2) for zero-inflated spatial and 
spatial-temporal correlated data.


-- 

Dr. Alain F. Zuur
Highland Statistics Ltd.
9 St Clair Wynd
AB41 6DZ Newburgh, UK
Email: highstat at highstat.com
URL:   www.highstat.com

And:
NIOZ Royal Netherlands Institute for Sea Research,
Department of Coastal Systems, and Utrecht University,
P.O. Box 59, 1790 AB Den Burg,
Texel, The Netherlands



Author of:
1. Beginner's Guide to Spatial, Temporal and Spatial-Temporal Ecological Data Analysis with R-INLA. (2017).
2. Beginner's Guide to Zero-Inflated Models with R (2016).
3. Beginner's Guide to Data Exploration and Visualisation with R (2015).
4. Beginner's Guide to GAMM with R (2014).
5. Beginner's Guide to GLM and GLMM with R (2013).
6. Beginner's Guide to GAM with R (2012).
7. Zero Inflated Models and GLMM with R (2012).
8. A Beginner's Guide to R (2009).
9. Mixed effects models and extensions in ecology with R (2009).
10. Analysing Ecological Data (2007).


	[[alternative HTML version deleted]]


From pd@lgd @ending from gm@il@com  Tue Oct  2 16:14:59 2018
From: pd@lgd @ending from gm@il@com (peter dalgaard)
Date: Tue, 2 Oct 2018 16:14:59 +0200
Subject: [R] Strange result for strptime with %p
In-Reply-To: <6d12217076d942f292efe0ddc191f7a3@SRVEXCHCM1301.precheza.cz>
References: <76133d2f-20f0-707a-cdd2-73941115cf1d@yahoo.fr>
 <6d12217076d942f292efe0ddc191f7a3@SRVEXCHCM1301.precheza.cz>
Message-ID: <8629DDDB-3AB7-44FF-80A3-805F46D39398@gmail.com>

Nice catch, Petr:

> strptime("05/01/18 00:59:59 AM", format = ("%m/%d/%y %I:%M:%S %p"), tz="Asia/Jayapura")
[1] NA
> strptime("05/01/18 12:59:59 AM", format = ("%m/%d/%y %I:%M:%S %p"), tz="Asia/Jayapura")
[1] "2018-05-01 00:59:59 WIT"

-pd

> On 2 Oct 2018, at 15:39 , PIKAL Petr <petr.pikal at precheza.cz> wrote:
> 
> Hi
> 
> Maybe it is connected to
> %I
> Hours as decimal number (01?12).
> 
> Your input has hour as 00
> 
> Cheers
> Petr
> 
>> -----Original Message-----
>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Marc Girondot via
>> R-help
>> Sent: Tuesday, October 2, 2018 3:30 PM
>> To: R-help Mailing List <r-help at r-project.org>
>> Subject: [R] Strange result for strptime with %p
>> 
>> Dear members... are these results normal ?
>> 
>> For the first one, no problem. I expected this:
>> 
>>> strptime("05/01/18 01:00:00 AM", format = ("%m/%d/%y %I:%M:%S %p"),
>> tz="Asia/Jayapura")
>> [1] "2018-05-01 01:00:00 WIT"
>> 
>> For this one, it is ok also:
>> 
>>> strptime("05/01/18 01:00:00 AM", format = ("%m/%d/%y %I:%M:%S %p"),
>> tz="Asia/Jayapura")-1
>> [1] "2018-05-01 00:59:59 WIT"
>> 
>> But how to explain this ???
>> 
>>> strptime("05/01/18 00:59:59 AM", format = ("%m/%d/%y %I:%M:%S %p"),
>> tz="Asia/Jayapura")
>> [1] NA
>> 
>> Thanks for your advices
>> Marc
>> ______________________
>> 
>> R 3.5.1 on MacOS 10.14
>> 
>>> version
>>                _
>> platform       x86_64-apple-darwin15.6.0
>> arch           x86_64
>> os             darwin15.6.0
>> system         x86_64, darwin15.6.0
>> status
>> major          3
>> minor          5.1
>> year           2018
>> month          07
>> day            02
>> svn rev        74947
>> language       R
>> version.string R version 3.5.1 (2018-07-02)
>> nickname       Feather Spray
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information about processing and protection of business partner?s personal data are available on website: https://www.precheza.cz/en/personal-data-protection-principles/
> D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any documents attached to it may be confidential and are subject to the legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From petr@pik@l @ending from prechez@@cz  Tue Oct  2 16:20:04 2018
From: petr@pik@l @ending from prechez@@cz (PIKAL Petr)
Date: Tue, 2 Oct 2018 14:20:04 +0000
Subject: [R] Strange result for strptime with %p
In-Reply-To: <8629DDDB-3AB7-44FF-80A3-805F46D39398@gmail.com>
References: <76133d2f-20f0-707a-cdd2-73941115cf1d@yahoo.fr>
 <6d12217076d942f292efe0ddc191f7a3@SRVEXCHCM1301.precheza.cz>
 <8629DDDB-3AB7-44FF-80A3-805F46D39398@gmail.com>
Message-ID: <960fcbf028d248fa9262b4e73e90f06b@SRVEXCHCM1301.precheza.cz>

Hi

Credit belongs to documentation. I picked it from it.

Cheers
Petr

> -----Original Message-----
> From: peter dalgaard <pdalgd at gmail.com>
> Sent: Tuesday, October 2, 2018 4:15 PM
> To: PIKAL Petr <petr.pikal at precheza.cz>
> Cc: Marc Girondot <marc_grt at yahoo.fr>; r-help mailing list <r-help at r-
> project.org>
> Subject: Re: [R] Strange result for strptime with %p
>
> Nice catch, Petr:
>
> > strptime("05/01/18 00:59:59 AM", format = ("%m/%d/%y %I:%M:%S %p"),
> > tz="Asia/Jayapura")
> [1] NA
> > strptime("05/01/18 12:59:59 AM", format = ("%m/%d/%y %I:%M:%S %p"),
> > tz="Asia/Jayapura")
> [1] "2018-05-01 00:59:59 WIT"
>
> -pd
>
> > On 2 Oct 2018, at 15:39 , PIKAL Petr <petr.pikal at precheza.cz> wrote:
> >
> > Hi
> >
> > Maybe it is connected to
> > %I
> > Hours as decimal number (01?12).
> >
> > Your input has hour as 00
> >
> > Cheers
> > Petr
> >
> >> -----Original Message-----
> >> From: R-help <r-help-bounces at r-project.org> On Behalf Of Marc
> >> Girondot via R-help
> >> Sent: Tuesday, October 2, 2018 3:30 PM
> >> To: R-help Mailing List <r-help at r-project.org>
> >> Subject: [R] Strange result for strptime with %p
> >>
> >> Dear members... are these results normal ?
> >>
> >> For the first one, no problem. I expected this:
> >>
> >>> strptime("05/01/18 01:00:00 AM", format = ("%m/%d/%y %I:%M:%S %p"),
> >> tz="Asia/Jayapura")
> >> [1] "2018-05-01 01:00:00 WIT"
> >>
> >> For this one, it is ok also:
> >>
> >>> strptime("05/01/18 01:00:00 AM", format = ("%m/%d/%y %I:%M:%S %p"),
> >> tz="Asia/Jayapura")-1
> >> [1] "2018-05-01 00:59:59 WIT"
> >>
> >> But how to explain this ???
> >>
> >>> strptime("05/01/18 00:59:59 AM", format = ("%m/%d/%y %I:%M:%S %p"),
> >> tz="Asia/Jayapura")
> >> [1] NA
> >>
> >> Thanks for your advices
> >> Marc
> >> ______________________
> >>
> >> R 3.5.1 on MacOS 10.14
> >>
> >>> version
> >>                _
> >> platform       x86_64-apple-darwin15.6.0
> >> arch           x86_64
> >> os             darwin15.6.0
> >> system         x86_64, darwin15.6.0
> >> status
> >> major          3
> >> minor          5.1
> >> year           2018
> >> month          07
> >> day            02
> >> svn rev        74947
> >> language       R
> >> version.string R version 3.5.1 (2018-07-02)
> >> nickname       Feather Spray
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> > Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj?
> > obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na:
> > https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information
> > about processing and protection of business partner?s personal data
> > are available on website:
> > https://www.precheza.cz/en/personal-data-protection-principles/
> > D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou
> > d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en?
> > odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any
> > documents attached to it may be confidential and are subject to the
> > legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> --
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School Solbjerg Plads 3, 2000
> Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>
>
>
>
>
>
>
>

Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information about processing and protection of business partner?s personal data are available on website: https://www.precheza.cz/en/personal-data-protection-principles/
D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any documents attached to it may be confidential and are subject to the legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/


From ruipb@rr@d@@ @ending from @@po@pt  Tue Oct  2 17:22:02 2018
From: ruipb@rr@d@@ @ending from @@po@pt (Rui Barradas)
Date: Tue, 2 Oct 2018 16:22:02 +0100
Subject: [R] Strange result for strptime with %p
In-Reply-To: <960fcbf028d248fa9262b4e73e90f06b@SRVEXCHCM1301.precheza.cz>
References: <76133d2f-20f0-707a-cdd2-73941115cf1d@yahoo.fr>
 <6d12217076d942f292efe0ddc191f7a3@SRVEXCHCM1301.precheza.cz>
 <8629DDDB-3AB7-44FF-80A3-805F46D39398@gmail.com>
 <960fcbf028d248fa9262b4e73e90f06b@SRVEXCHCM1301.precheza.cz>
Message-ID: <0a8d8fa6-0248-d7aa-2afe-065ba7f8d4ec@sapo.pt>

Hello,

Or %H, it also works.

strptime("05/01/18 00:59:59 AM", format = ("%m/%d/%y %H:%M:%S %p"), 
tz="Asia/Jayapura")
#[1] "2018-05-01 00:59:59 WIT"


Hope this helps,

Rui Barradas

?s 15:20 de 02/10/2018, PIKAL Petr escreveu:
> Hi
> 
> Credit belongs to documentation. I picked it from it.
> 
> Cheers
> Petr
> 
>> -----Original Message-----
>> From: peter dalgaard <pdalgd at gmail.com>
>> Sent: Tuesday, October 2, 2018 4:15 PM
>> To: PIKAL Petr <petr.pikal at precheza.cz>
>> Cc: Marc Girondot <marc_grt at yahoo.fr>; r-help mailing list <r-help at r-
>> project.org>
>> Subject: Re: [R] Strange result for strptime with %p
>>
>> Nice catch, Petr:
>>
>>> strptime("05/01/18 00:59:59 AM", format = ("%m/%d/%y %I:%M:%S %p"),
>>> tz="Asia/Jayapura")
>> [1] NA
>>> strptime("05/01/18 12:59:59 AM", format = ("%m/%d/%y %I:%M:%S %p"),
>>> tz="Asia/Jayapura")
>> [1] "2018-05-01 00:59:59 WIT"
>>
>> -pd
>>
>>> On 2 Oct 2018, at 15:39 , PIKAL Petr <petr.pikal at precheza.cz> wrote:
>>>
>>> Hi
>>>
>>> Maybe it is connected to
>>> %I
>>> Hours as decimal number (01?12).
>>>
>>> Your input has hour as 00
>>>
>>> Cheers
>>> Petr
>>>
>>>> -----Original Message-----
>>>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Marc
>>>> Girondot via R-help
>>>> Sent: Tuesday, October 2, 2018 3:30 PM
>>>> To: R-help Mailing List <r-help at r-project.org>
>>>> Subject: [R] Strange result for strptime with %p
>>>>
>>>> Dear members... are these results normal ?
>>>>
>>>> For the first one, no problem. I expected this:
>>>>
>>>>> strptime("05/01/18 01:00:00 AM", format = ("%m/%d/%y %I:%M:%S %p"),
>>>> tz="Asia/Jayapura")
>>>> [1] "2018-05-01 01:00:00 WIT"
>>>>
>>>> For this one, it is ok also:
>>>>
>>>>> strptime("05/01/18 01:00:00 AM", format = ("%m/%d/%y %I:%M:%S %p"),
>>>> tz="Asia/Jayapura")-1
>>>> [1] "2018-05-01 00:59:59 WIT"
>>>>
>>>> But how to explain this ???
>>>>
>>>>> strptime("05/01/18 00:59:59 AM", format = ("%m/%d/%y %I:%M:%S %p"),
>>>> tz="Asia/Jayapura")
>>>> [1] NA
>>>>
>>>> Thanks for your advices
>>>> Marc
>>>> ______________________
>>>>
>>>> R 3.5.1 on MacOS 10.14
>>>>
>>>>> version
>>>>                 _
>>>> platform       x86_64-apple-darwin15.6.0
>>>> arch           x86_64
>>>> os             darwin15.6.0
>>>> system         x86_64, darwin15.6.0
>>>> status
>>>> major          3
>>>> minor          5.1
>>>> year           2018
>>>> month          07
>>>> day            02
>>>> svn rev        74947
>>>> language       R
>>>> version.string R version 3.5.1 (2018-07-02)
>>>> nickname       Feather Spray
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>> Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj?
>>> obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na:
>>> https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information
>>> about processing and protection of business partner?s personal data
>>> are available on website:
>>> https://www.precheza.cz/en/personal-data-protection-principles/
>>> D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou
>>> d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en?
>>> odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any
>>> documents attached to it may be confidential and are subject to the
>>> legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>> --
>> Peter Dalgaard, Professor,
>> Center for Statistics, Copenhagen Business School Solbjerg Plads 3, 2000
>> Frederiksberg, Denmark
>> Phone: (+45)38153501
>> Office: A 4.23
>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>>
>>
>>
>>
>>
>>
>>
>>
> 
> Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information about processing and protection of business partner?s personal data are available on website: https://www.precheza.cz/en/personal-data-protection-principles/
> D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any documents attached to it may be confidential and are subject to the legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From jdnewmil @ending from dcn@d@vi@@c@@u@  Tue Oct  2 17:55:35 2018
From: jdnewmil @ending from dcn@d@vi@@c@@u@ (Jeff Newmiller)
Date: Tue, 02 Oct 2018 08:55:35 -0700
Subject: [R] Strange result for strptime with %p
In-Reply-To: <0a8d8fa6-0248-d7aa-2afe-065ba7f8d4ec@sapo.pt>
References: <76133d2f-20f0-707a-cdd2-73941115cf1d@yahoo.fr>
 <6d12217076d942f292efe0ddc191f7a3@SRVEXCHCM1301.precheza.cz>
 <8629DDDB-3AB7-44FF-80A3-805F46D39398@gmail.com>
 <960fcbf028d248fa9262b4e73e90f06b@SRVEXCHCM1301.precheza.cz>
 <0a8d8fa6-0248-d7aa-2afe-065ba7f8d4ec@sapo.pt>
Message-ID: <977DBE46-CB88-461B-9280-0589B56B5D33@dcn.davis.ca.us>

... except that the %p is ignored or generates an error (implementation-dependent) if you use %H, so this may only address a few of the values you are processing and then only on some platforms.

On October 2, 2018 8:22:02 AM PDT, Rui Barradas <ruipbarradas at sapo.pt> wrote:
>Hello,
>
>Or %H, it also works.
>
>strptime("05/01/18 00:59:59 AM", format = ("%m/%d/%y %H:%M:%S %p"), 
>tz="Asia/Jayapura")
>#[1] "2018-05-01 00:59:59 WIT"
>
>
>Hope this helps,
>
>Rui Barradas
>
>?s 15:20 de 02/10/2018, PIKAL Petr escreveu:
>> Hi
>> 
>> Credit belongs to documentation. I picked it from it.
>> 
>> Cheers
>> Petr
>> 
>>> -----Original Message-----
>>> From: peter dalgaard <pdalgd at gmail.com>
>>> Sent: Tuesday, October 2, 2018 4:15 PM
>>> To: PIKAL Petr <petr.pikal at precheza.cz>
>>> Cc: Marc Girondot <marc_grt at yahoo.fr>; r-help mailing list
><r-help at r-
>>> project.org>
>>> Subject: Re: [R] Strange result for strptime with %p
>>>
>>> Nice catch, Petr:
>>>
>>>> strptime("05/01/18 00:59:59 AM", format = ("%m/%d/%y %I:%M:%S %p"),
>>>> tz="Asia/Jayapura")
>>> [1] NA
>>>> strptime("05/01/18 12:59:59 AM", format = ("%m/%d/%y %I:%M:%S %p"),
>>>> tz="Asia/Jayapura")
>>> [1] "2018-05-01 00:59:59 WIT"
>>>
>>> -pd
>>>
>>>> On 2 Oct 2018, at 15:39 , PIKAL Petr <petr.pikal at precheza.cz>
>wrote:
>>>>
>>>> Hi
>>>>
>>>> Maybe it is connected to
>>>> %I
>>>> Hours as decimal number (01?12).
>>>>
>>>> Your input has hour as 00
>>>>
>>>> Cheers
>>>> Petr
>>>>
>>>>> -----Original Message-----
>>>>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Marc
>>>>> Girondot via R-help
>>>>> Sent: Tuesday, October 2, 2018 3:30 PM
>>>>> To: R-help Mailing List <r-help at r-project.org>
>>>>> Subject: [R] Strange result for strptime with %p
>>>>>
>>>>> Dear members... are these results normal ?
>>>>>
>>>>> For the first one, no problem. I expected this:
>>>>>
>>>>>> strptime("05/01/18 01:00:00 AM", format = ("%m/%d/%y %I:%M:%S
>%p"),
>>>>> tz="Asia/Jayapura")
>>>>> [1] "2018-05-01 01:00:00 WIT"
>>>>>
>>>>> For this one, it is ok also:
>>>>>
>>>>>> strptime("05/01/18 01:00:00 AM", format = ("%m/%d/%y %I:%M:%S
>%p"),
>>>>> tz="Asia/Jayapura")-1
>>>>> [1] "2018-05-01 00:59:59 WIT"
>>>>>
>>>>> But how to explain this ???
>>>>>
>>>>>> strptime("05/01/18 00:59:59 AM", format = ("%m/%d/%y %I:%M:%S
>%p"),
>>>>> tz="Asia/Jayapura")
>>>>> [1] NA
>>>>>
>>>>> Thanks for your advices
>>>>> Marc
>>>>> ______________________
>>>>>
>>>>> R 3.5.1 on MacOS 10.14
>>>>>
>>>>>> version
>>>>>                 _
>>>>> platform       x86_64-apple-darwin15.6.0
>>>>> arch           x86_64
>>>>> os             darwin15.6.0
>>>>> system         x86_64, darwin15.6.0
>>>>> status
>>>>> major          3
>>>>> minor          5.1
>>>>> year           2018
>>>>> month          07
>>>>> day            02
>>>>> svn rev        74947
>>>>> language       R
>>>>> version.string R version 3.5.1 (2018-07-02)
>>>>> nickname       Feather Spray
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide
>>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>> Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj?
>>>> obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na:
>>>> https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ |
>Information
>>>> about processing and protection of business partner?s personal data
>>>> are available on website:
>>>> https://www.precheza.cz/en/personal-data-protection-principles/
>>>> D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou
>>>> d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en?
>>>> odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and
>any
>>>> documents attached to it may be confidential and are subject to the
>>>> legally binding disclaimer:
>https://www.precheza.cz/en/01-disclaimer/
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>> --
>>> Peter Dalgaard, Professor,
>>> Center for Statistics, Copenhagen Business School Solbjerg Plads 3,
>2000
>>> Frederiksberg, Denmark
>>> Phone: (+45)38153501
>>> Office: A 4.23
>>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>> 
>> Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj?
>obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na:
>https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information
>about processing and protection of business partner?s personal data are
>available on website:
>https://www.precheza.cz/en/personal-data-protection-principles/
>> D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou
>d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en?
>odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any
>documents attached to it may be confidential and are subject to the
>legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From oy@tein@@oren@en@1985 @ending from gm@il@com  Tue Oct  2 14:48:52 2018
From: oy@tein@@oren@en@1985 @ending from gm@il@com (=?UTF-8?B?w5h5c3RlaW4gU8O4cmVuc2Vu?=)
Date: Tue, 2 Oct 2018 14:48:52 +0200
Subject: [R] Why do two different calls to mgcv::gamm give different
 p-values?
In-Reply-To: <649ac7fe-39e4-1282-b305-d59451139a16@bath.edu>
References: <CAEWpFgchTan5_nOs=F07DhQpZAd+GDcG3AUKNtxC4QGbEcm9bQ@mail.gmail.com>
 <649ac7fe-39e4-1282-b305-d59451139a16@bath.edu>
Message-ID: <CAEWpFgdhSf_KFd5A3jau7z+OuNgrVfszOc_hLyAnVJXHBtRocA@mail.gmail.com>

Thanks a lot, Simon. That was a silly mistake on my part. After correcting,
there is still a slight difference between the p-values, but this is so
small that I guess it is just numerics.

Best,
?ystein

On Tue, Oct 2, 2018 at 2:26 PM Simon Wood <simon.wood at bath.edu> wrote:

> Dear ?ystein,
>
> In your code 'id' is set up to be numeric. In your first gamm call it
> gets coerced to a factor (since nothing else would make sense). In  your
> second gamm call it is simply treated as numeric, since that could makes
> sense. To make the two models equivalent you just need to substitute:
>
> id <- as.factor(rep(1:ng, n/ng))
>
> into your loop.
>
> best,
> Simon
>
> On 01/10/18 08:15, ?ystein S?rensen wrote:
> > I have longitudinal data where a response y_{ij} has been measured
> > repeatedly for i=1,...,n individuals, j=1,...,m times for each
> individual.
> > Let x_{ij} be the age of individual i at her/his jth measurement. I wish
> to
> > see how the response varies with age, and have reason to believe that a
> > nonlinear fit is needed. I hence wish to model the relationship using an
> > additive mixed model of the form y_{ij} = f(x_{ij}) + b_{i} +
> > \epsilon_{ij}, where f() is some smooth function to be estimated, b_{i}
> > \sim N(0, \sigma_{b}^{2}) is the random effect for individual i,
> > \epsilon_{ij} \sim N(0, \sigma^{2}) is the residual.
> >
> > Reading the documentation to the mgcv package, I see that such models can
> > be set up by calling the mgcv::gamm two different ways. One way shown to
> > set up such a model is with the call
> > b1 <- gamm(y ~ s(x), random = list(id =~ 1)),
> > where id is an indicator of the specific individual. In this way, the
> > random effect is specified in a list. The other way is to set up the
> random
> > effect with a smooth of the re:
> > b2 <- gamm(y ~ s(x) + s(id, bs = "re")).
> >
> > As far as I can understand, these two setups should create the same
> > underlying model matrices. However, when running them on my data, the
> > p-values for the smooth terms, as well as their estimated degrees of
> > freedom, are different.
> >
> > Below is a reproducible example on simulated data, which show that these
> > two types of specifying the models give different p-values and estimated
> > degrees of freedom. On my real data, these differences are sometimes even
> > more exaggerated.
> >
> > My question is: Are not these two calls to gamm suppose to estimate the
> > same model, or have I misunderstood?
> >
> > Here is a reproducible example:
> >
> > library(mgcv)
> > set.seed(100)
> > n_sim <- 100
> > df <- data.frame(
> >    model1_pval = numeric(n_sim),
> >    model1_edf = numeric(n_sim),
> >    model2_pval = numeric(n_sim),
> >    model2_edf = numeric(n_sim)
> > )
> >
> > # Number of observations
> > n <- 500
> > # Number of groups
> > ng <- 100
> >
> > for(i in 1:n_sim){
> >    # Draw the fixed effect covariate
> >    x <- rnorm(n)
> >    # Set up the group
> >    id <- rep(1:ng, n/ng)
> >    # Draw the random effect
> >    z <- rnorm(ng)
> >    # Draw the response
> >    y <- 0.1 * x + 0.2 * x^3 + z[id] + rnorm(n)
> >
> >    # Fit the two different models
> >    b1 <- gamm(y ~ s(x, k = 5), random = list(id =~ 1))
> >    b2 <- gamm(y ~ s(x, k = 5) + s(id, bs = "re"))
> >
> >    df[i, "model1_pval"] <- anova(b1$gam)$s.pv
> >    df[i, "model1_edf"] <- anova(b1$gam)$edf
> >    df[i, "model2_pval"] <- anova(b2$gam)$s.pv[[1]]
> >    df[i, "model2_edf"] <- anova(b2$gam)$edf[[1]]
> > }
> >
> > # Differences between model 1 and model 2 p values
> > mean(df$model1_pval)
> > #> [1] 6.790546e-21
> > mean(df$model2_pval)
> > #> [1] 3.090694e-14
> > max(abs(df$model1_pval - df$model2_pval))
> > #> [1] 2.770545e-12
> >
> > # Differences between model1 and model 2 estimated degrees of freedom
> > mean(df$model1_edf)
> > #> [1] 3.829992
> > mean(df$model2_edf)
> > #> [1] 3.731438
> > max(abs(df$model1_edf - df$model2_edf))
> > #> [1] 0.6320281
> >
> >
> > Thanks in advance,
> > ?ystein S?rensen
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
>

	[[alternative HTML version deleted]]


From icwpieter@ @ending from gm@il@com  Tue Oct  2 16:33:40 2018
From: icwpieter@ @ending from gm@il@com (Ivy Pieters)
Date: Tue, 2 Oct 2018 16:33:40 +0200
Subject: [R] Sp-package overlay
Message-ID: <918BE55E-111A-4A84-BAD3-D18EA16DACDD@gmail.com>

Hey there, 

For my internship I have to work with R. I am working with R for the first
time and I don't know much. 
Somehow I don't manage to find the answer to my question in google. I think
I don't search with the right words, or maybe I just don't understand
enough. Anyways, I hope someone here can help me out. 

I have 2 datasets: 

a SpatialPolygonDataFrame, this dataset is called "field" (these are
different fields of arable land) 
and a SpatialPointsDataFrame, this dataset is called "odk" (these are
different soil samples taken in each field) 

The field data set consists of 8 polygons and they have a slot with coords 

The odk data set consists of 537 features (soil samples), these features
belong to the polygons but they are all mixed. This dataset also has a slot
with coords 

They are both projected in the same coordinate system. 

Now I would like to create a new dataset with a table with the features of
odk that belong to polygon 1 and a separate table for the features that
belong to polygon 2 etc. The best is if they also get into the
spatialpointsdataframe format. 

I really don't know how to do this. I hope someone here can help me out. I
hope that I gave enough information for anyone to help me else let me know
if I have to tell something more about my datasets. 

Thank you already a lot in advance, 

Hope to hear from anyone soon, 

Kind regards, 

Ivy


From @tyen @ending from ntu@edu@tw  Tue Oct  2 18:25:43 2018
From: @tyen @ending from ntu@edu@tw (Steven Yen)
Date: Wed, 3 Oct 2018 00:25:43 +0800
Subject: [R] Polygon
Message-ID: <fcc9c821-50bf-7c7a-4e8f-e4859f7deb78@ntu.edu.tw>

Can someone help me with polygon. The following codes are self-runnable 
and mark a shaded area under the standard normal curve in the x-range 
(-3,-1).
Is there a way to also mark the area in (1,3), at the same time.
That is, I want shaded areas in both tails. Thank you...

===
# Create data for the area to shade
cord.x <- c(-3,seq(-3,-1,0.01),-1)
cord.y <- c(0,dnorm(seq(-3,-1,0.01)),0)

# Make a curve
curve(dnorm(x,0,1), xlim=c(-3,3), main='Standard Normal')

# Add the shaded area.
polygon(cord.x,cord.y,col='skyblue')

-- 
styen at ntu.edu.tw (S.T. Yen)


	[[alternative HTML version deleted]]


From ruipb@rr@d@@ @ending from @@po@pt  Tue Oct  2 18:51:35 2018
From: ruipb@rr@d@@ @ending from @@po@pt (Rui Barradas)
Date: Tue, 2 Oct 2018 17:51:35 +0100
Subject: [R] Polygon
In-Reply-To: <fcc9c821-50bf-7c7a-4e8f-e4859f7deb78@ntu.edu.tw>
References: <fcc9c821-50bf-7c7a-4e8f-e4859f7deb78@ntu.edu.tw>
Message-ID: <0d7bc6e1-2d8e-f3f9-d685-2c1e5a001a20@sapo.pt>

Hello,

Continue with


polygon(-rev(cord.x), rev(cord.y), col = 'skyblue')


Hope this helps,

Rui Barradas

?s 17:25 de 02/10/2018, Steven Yen escreveu:
> Can someone help me with polygon. The following codes are self-runnable
> and mark a shaded area under the standard normal curve in the x-range
> (-3,-1).
> Is there a way to also mark the area in (1,3), at the same time.
> That is, I want shaded areas in both tails. Thank you...
> 
> ===
> # Create data for the area to shade
> cord.x <- c(-3,seq(-3,-1,0.01),-1)
> cord.y <- c(0,dnorm(seq(-3,-1,0.01)),0)
> 
> # Make a curve
> curve(dnorm(x,0,1), xlim=c(-3,3), main='Standard Normal')
> 
> # Add the shaded area.
> polygon(cord.x,cord.y,col='skyblue')
>


From @k@h@y_e4 @ending from hotm@il@com  Tue Oct  2 18:55:31 2018
From: @k@h@y_e4 @ending from hotm@il@com (akshay kulkarni)
Date: Tue, 2 Oct 2018 16:55:31 +0000
Subject: [R] inconsistency in progress bar......
Message-ID: <SL2P216MB0091C7C425F547AB6EF00E48C8E80@SL2P216MB0091.KORP216.PROD.OUTLOOK.COM>

dear members,
                            I am using the function "pbmclapply" in the pbmcapply package to track the progress of mclapply function in my own function.

For some run of pbmclapply function, the progress bar stopped at  92% and 88%., but nevertheless continued to the next piece of the code. I encountered about 4 to 5 instances of this happenstance....but the main function in which pbmclapply was used completed succesfully...

Is this a cause for concern? Should I recheck my code?

very many thanks for your time and effort...
yours sincerely,
AKSHAY M KULKARNI

	[[alternative HTML version deleted]]


From dwin@emiu@ @ending from comc@@t@net  Tue Oct  2 19:11:17 2018
From: dwin@emiu@ @ending from comc@@t@net (David Winsemius)
Date: Tue, 2 Oct 2018 10:11:17 -0700
Subject: [R] Strange result for strptime with %p
In-Reply-To: <76133d2f-20f0-707a-cdd2-73941115cf1d@yahoo.fr>
References: <76133d2f-20f0-707a-cdd2-73941115cf1d@yahoo.fr>
Message-ID: <EED62BB4-4C4C-44D2-A162-B1C6A583F6B1@comcast.net>


> On Oct 2, 2018, at 6:30 AM, Marc Girondot via R-help <r-help at r-project.org> wrote:
> 
> Dear members... are these results normal ?
> 
> For the first one, no problem. I expected this:
> 
> > strptime("05/01/18 01:00:00 AM", format = ("%m/%d/%y %I:%M:%S %p"), tz="Asia/Jayapura")
> [1] "2018-05-01 01:00:00 WIT"
> 
> For this one, it is ok also:
> 
> > strptime("05/01/18 01:00:00 AM", format = ("%m/%d/%y %I:%M:%S %p"), tz="Asia/Jayapura")-1
> [1] "2018-05-01 00:59:59 WIT"
> 
> But how to explain this ???
> 
> > strptime("05/01/18 00:59:59 AM", format = ("%m/%d/%y %I:%M:%S %p"), tz="Asia/Jayapura")
> [1] NA

I'm afraid this is "as documented":

%I
Hours as decimal number (01?12).

I see no reason not to use "%H"

-- 
David.
> 
> Thanks for your advices
> Marc
> ______________________
> 
> R 3.5.1 on MacOS 10.14
> 
> > version
>                _
> platform       x86_64-apple-darwin15.6.0
> arch           x86_64
> os             darwin15.6.0
> system         x86_64, darwin15.6.0
> status
> major          3
> minor          5.1
> year           2018
> month          07
> day            02
> svn rev        74947
> language       R
> version.string R version 3.5.1 (2018-07-02)
> nickname       Feather Spray
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

David Winsemius
Alameda, CA, USA

'Any technology distinguishable from magic is insufficiently advanced.'   -Gehm's Corollary to Clarke's Third Law


From btupper @ending from bigelow@org  Tue Oct  2 22:41:11 2018
From: btupper @ending from bigelow@org (Ben Tupper)
Date: Tue, 2 Oct 2018 16:41:11 -0400
Subject: [R] Sp-package overlay
In-Reply-To: <918BE55E-111A-4A84-BAD3-D18EA16DACDD@gmail.com>
References: <918BE55E-111A-4A84-BAD3-D18EA16DACDD@gmail.com>
Message-ID: <BFC0F8A6-51E7-4F35-8546-88D3271B5E42@bigelow.org>

Hi,

I'm pretty sure that what you ask is likely not too hard to do.  On the other hand, I think you will do well to consider the following...

1. Join the mailing list; the folks there will know better what you are trying to do - see

https://stat.ethz.ch/mailman/listinfo/r-sig-geo <https://stat.ethz.ch/mailman/listinfo/r-sig-geo>


2. Switch from the sf package to the sf package if you can - see  

https://cran.r-project.org/web/packages/sf/


3. Come up to speed with geospatial data handling in R starting here 

https://geocompr.robinlovelace.net/index.html


Cheers,
Ben


> On Oct 2, 2018, at 10:33 AM, Ivy Pieters <icwpieters at gmail.com> wrote:
> 
> Hey there, 
> 
> For my internship I have to work with R. I am working with R for the first
> time and I don't know much. 
> Somehow I don't manage to find the answer to my question in google. I think
> I don't search with the right words, or maybe I just don't understand
> enough. Anyways, I hope someone here can help me out. 
> 
> I have 2 datasets: 
> 
> a SpatialPolygonDataFrame, this dataset is called "field" (these are
> different fields of arable land) 
> and a SpatialPointsDataFrame, this dataset is called "odk" (these are
> different soil samples taken in each field) 
> 
> The field data set consists of 8 polygons and they have a slot with coords 
> 
> The odk data set consists of 537 features (soil samples), these features
> belong to the polygons but they are all mixed. This dataset also has a slot
> with coords 
> 
> They are both projected in the same coordinate system. 
> 
> Now I would like to create a new dataset with a table with the features of
> odk that belong to polygon 1 and a separate table for the features that
> belong to polygon 2 etc. The best is if they also get into the
> spatialpointsdataframe format. 
> 
> I really don't know how to do this. I hope someone here can help me out. I
> hope that I gave enough information for anyone to help me else let me know
> if I have to tell something more about my datasets. 
> 
> Thank you already a lot in advance, 
> 
> Hope to hear from anyone soon, 
> 
> Kind regards, 
> 
> Ivy
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

Ben Tupper
Bigelow Laboratory for Ocean Sciences
60 Bigelow Drive, P.O. Box 380
East Boothbay, Maine 04544
http://www.bigelow.org

Ecological Forecasting: https://eco.bigelow.org/






	[[alternative HTML version deleted]]


From dwin@emiu@ @ending from comc@@t@net  Wed Oct  3 01:23:44 2018
From: dwin@emiu@ @ending from comc@@t@net (David Winsemius)
Date: Tue, 2 Oct 2018 16:23:44 -0700
Subject: [R] Strange result for strptime with %p
In-Reply-To: <EED62BB4-4C4C-44D2-A162-B1C6A583F6B1@comcast.net>
References: <76133d2f-20f0-707a-cdd2-73941115cf1d@yahoo.fr>
 <EED62BB4-4C4C-44D2-A162-B1C6A583F6B1@comcast.net>
Message-ID: <7734993C-175E-4D5F-BDD5-1AB4582DD1D2@comcast.net>


> On Oct 2, 2018, at 10:11 AM, David Winsemius <dwinsemius at comcast.net> wrote:
> 
> 
>> On Oct 2, 2018, at 6:30 AM, Marc Girondot via R-help <r-help at r-project.org> wrote:
>> 
>> Dear members... are these results normal ?
>> 
>> For the first one, no problem. I expected this:
>> 
>>> strptime("05/01/18 01:00:00 AM", format = ("%m/%d/%y %I:%M:%S %p"), tz="Asia/Jayapura")
>> [1] "2018-05-01 01:00:00 WIT"
>> 
>> For this one, it is ok also:
>> 
>>> strptime("05/01/18 01:00:00 AM", format = ("%m/%d/%y %I:%M:%S %p"), tz="Asia/Jayapura")-1
>> [1] "2018-05-01 00:59:59 WIT"
>> 
>> But how to explain this ???
>> 
>>> strptime("05/01/18 00:59:59 AM", format = ("%m/%d/%y %I:%M:%S %p"), tz="Asia/Jayapura")
>> [1] NA
> 
> I'm afraid this is "as documented":
> 
> %I
> Hours as decimal number (01?12).
> 
> I see no reason not to use "%H"

If you need to use %I and %p then you may need to pre-process with sub(" 00", " 12", object_name)

 strptime("05/01/18 12:59:59 AM", format = ("%m/%d/%y %I:%M:%S %p"), tz="Asia/Jayapura")
[1] "2018-05-01 00:59:59 WIT"


> 
> -- 
> David.
>> 
>> Thanks for your advices
>> Marc
>> ______________________
>> 
>> R 3.5.1 on MacOS 10.14
>> 
>>> version
>>               _
>> platform       x86_64-apple-darwin15.6.0
>> arch           x86_64
>> os             darwin15.6.0
>> system         x86_64, darwin15.6.0
>> status
>> major          3
>> minor          5.1
>> year           2018
>> month          07
>> day            02
>> svn rev        74947
>> language       R
>> version.string R version 3.5.1 (2018-07-02)
>> nickname       Feather Spray
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> David Winsemius
> Alameda, CA, USA
> 
> 'Any technology distinguishable from magic is insufficiently advanced.'   -Gehm's Corollary to Clarke's Third Law
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

David Winsemius
Alameda, CA, USA

'Any technology distinguishable from magic is insufficiently advanced.'   -Gehm's Corollary to Clarke's Third Law


From @tyen @ending from ntu@edu@tw  Wed Oct  3 02:50:48 2018
From: @tyen @ending from ntu@edu@tw (Steven Yen)
Date: Wed, 3 Oct 2018 08:50:48 +0800
Subject: [R] Polygon
In-Reply-To: <0d7bc6e1-2d8e-f3f9-d685-2c1e5a001a20@sapo.pt>
References: <fcc9c821-50bf-7c7a-4e8f-e4859f7deb78@ntu.edu.tw>
 <0d7bc6e1-2d8e-f3f9-d685-2c1e5a001a20@sapo.pt>
Message-ID: <9ac5812e-5539-9d6a-6396-a2ec225f257b@ntu.edu.tw>

Great. Thanks! It did wonders.
1. Is there a way to suppress the obvious tick stops (-3,-2,-1,0,1,2,3) 
and mark only the ticks -1.96 and 1.96.
2. Better yet, to draw vertical lines at x = -1.96 and x = 1.96.
Thanks.
Steven

On 10/3/2018 12:51 AM, Rui Barradas wrote:
> Hello,
>
> Continue with
>
>
> polygon(-rev(cord.x), rev(cord.y), col = 'skyblue')
>
>
> Hope this helps,
>
> Rui Barradas
>
> ?s 17:25 de 02/10/2018, Steven Yen escreveu:
>> Can someone help me with polygon. The following codes are self-runnable
>> and mark a shaded area under the standard normal curve in the x-range
>> (-3,-1).
>> Is there a way to also mark the area in (1,3), at the same time.
>> That is, I want shaded areas in both tails. Thank you...
>>
>> ===
>> # Create data for the area to shade
>> cord.x <- c(-3,seq(-3,-1,0.01),-1)
>> cord.y <- c(0,dnorm(seq(-3,-1,0.01)),0)
>>
>> # Make a curve
>> curve(dnorm(x,0,1), xlim=c(-3,3), main='Standard Normal')
>>
>> # Add the shaded area.
>> polygon(cord.x,cord.y,col='skyblue')
>>
>

-- 
styen at ntu.edu.tw (S.T. Yen)


	[[alternative HTML version deleted]]


From dwin@emiu@ @ending from comc@@t@net  Wed Oct  3 03:39:22 2018
From: dwin@emiu@ @ending from comc@@t@net (David Winsemius)
Date: Tue, 2 Oct 2018 18:39:22 -0700
Subject: [R] Polygon
In-Reply-To: <9ac5812e-5539-9d6a-6396-a2ec225f257b@ntu.edu.tw>
References: <fcc9c821-50bf-7c7a-4e8f-e4859f7deb78@ntu.edu.tw>
 <0d7bc6e1-2d8e-f3f9-d685-2c1e5a001a20@sapo.pt>
 <9ac5812e-5539-9d6a-6396-a2ec225f257b@ntu.edu.tw>
Message-ID: <EFF7563D-00B0-4DB8-BC1B-5B0A7FBBE113@comcast.net>


> On Oct 2, 2018, at 5:50 PM, Steven Yen <styen at ntu.edu.tw> wrote:
> 
> Great. Thanks! It did wonders.
> 1. Is there a way to suppress the obvious tick stops (-3,-2,-1,0,1,2,3) 
> and mark only the ticks -1.96 and 1.96.
> 2. Better yet, to draw vertical lines at x = -1.96 and x = 1.96.
> Thanks.

Read ?plot.default

Then add xaxt="n" to the arguments to curve, ... and afterwards:

axis( 1, at=c(-1.96, 1.96),lab=c(-1.96, 1.96) )
abline( v= c(-1.96, 1.96) )

--
> Steven
> 
> On 10/3/2018 12:51 AM, Rui Barradas wrote:
>> Hello,
>> 
>> Continue with
>> 
>> 
>> polygon(-rev(cord.x), rev(cord.y), col = 'skyblue')
>> 
>> 
>> Hope this helps,
>> 
>> Rui Barradas
>> 
>> ?s 17:25 de 02/10/2018, Steven Yen escreveu:
>>> Can someone help me with polygon. The following codes are self-runnable
>>> and mark a shaded area under the standard normal curve in the x-range
>>> (-3,-1).
>>> Is there a way to also mark the area in (1,3), at the same time.
>>> That is, I want shaded areas in both tails. Thank you...
>>> 
>>> ===
>>> # Create data for the area to shade
>>> cord.x <- c(-3,seq(-3,-1,0.01),-1)
>>> cord.y <- c(0,dnorm(seq(-3,-1,0.01)),0)
>>> 
>>> # Make a curve
>>> curve(dnorm(x,0,1), xlim=c(-3,3), main='Standard Normal')
>>> 
>>> # Add the shaded area.
>>> polygon(cord.x,cord.y,col='skyblue')
>>> 
>> 
> 
> -- 
> styen at ntu.edu.tw (S.T. Yen)
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

David Winsemius
Alameda, CA, USA

'Any technology distinguishable from magic is insufficiently advanced.'   -Gehm's Corollary to Clarke's Third Law


From @tyen @ending from ntu@edu@tw  Wed Oct  3 03:50:07 2018
From: @tyen @ending from ntu@edu@tw (Steven Yen)
Date: Wed, 3 Oct 2018 09:50:07 +0800
Subject: [R] Polygon
In-Reply-To: <EFF7563D-00B0-4DB8-BC1B-5B0A7FBBE113@comcast.net>
References: <fcc9c821-50bf-7c7a-4e8f-e4859f7deb78@ntu.edu.tw>
 <0d7bc6e1-2d8e-f3f9-d685-2c1e5a001a20@sapo.pt>
 <9ac5812e-5539-9d6a-6396-a2ec225f257b@ntu.edu.tw>
 <EFF7563D-00B0-4DB8-BC1B-5B0A7FBBE113@comcast.net>
Message-ID: <3898bda2-5073-8dd4-266b-4751d5d00c6c@ntu.edu.tw>

Thanks!!! It did wonders.
Steven

On 10/3/2018 9:39 AM, David Winsemius wrote:
>> On Oct 2, 2018, at 5:50 PM, Steven Yen <styen at ntu.edu.tw> wrote:
>>
>> Great. Thanks! It did wonders.
>> 1. Is there a way to suppress the obvious tick stops (-3,-2,-1,0,1,2,3)
>> and mark only the ticks -1.96 and 1.96.
>> 2. Better yet, to draw vertical lines at x = -1.96 and x = 1.96.
>> Thanks.
> Read ?plot.default
>
> Then add xaxt="n" to the arguments to curve, ... and afterwards:
>
> axis( 1, at=c(-1.96, 1.96),lab=c(-1.96, 1.96) )
> abline( v= c(-1.96, 1.96) )
>
> --
>> Steven
>>
>> On 10/3/2018 12:51 AM, Rui Barradas wrote:
>>> Hello,
>>>
>>> Continue with
>>>
>>>
>>> polygon(-rev(cord.x), rev(cord.y), col = 'skyblue')
>>>
>>>
>>> Hope this helps,
>>>
>>> Rui Barradas
>>>
>>> ?s 17:25 de 02/10/2018, Steven Yen escreveu:
>>>> Can someone help me with polygon. The following codes are self-runnable
>>>> and mark a shaded area under the standard normal curve in the x-range
>>>> (-3,-1).
>>>> Is there a way to also mark the area in (1,3), at the same time.
>>>> That is, I want shaded areas in both tails. Thank you...
>>>>
>>>> ===
>>>> # Create data for the area to shade
>>>> cord.x <- c(-3,seq(-3,-1,0.01),-1)
>>>> cord.y <- c(0,dnorm(seq(-3,-1,0.01)),0)
>>>>
>>>> # Make a curve
>>>> curve(dnorm(x,0,1), xlim=c(-3,3), main='Standard Normal')
>>>>
>>>> # Add the shaded area.
>>>> polygon(cord.x,cord.y,col='skyblue')
>>>>
>> -- 
>> styen at ntu.edu.tw (S.T. Yen)
>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> David Winsemius
> Alameda, CA, USA
>
> 'Any technology distinguishable from magic is insufficiently advanced.'   -Gehm's Corollary to Clarke's Third Law
>
>
>
>
>
>

-- 
styen at ntu.edu.tw (S.T. Yen)


	[[alternative HTML version deleted]]


From r@nj@nm@no167 @ending from gm@il@com  Wed Oct  3 12:05:18 2018
From: r@nj@nm@no167 @ending from gm@il@com (Manoranjan Muthusamy)
Date: Wed, 3 Oct 2018 11:05:18 +0100
Subject: [R] R - Reading a horizontally arranged csv file,
 replacing values and saving again
In-Reply-To: <CAF8bMcZ3gid0Zb0_e7eTG67XeH7tj0eZw5Hh79m0v=v44gLDcg@mail.gmail.com>
References: <CANqyHbTC9JF4JQRKOu2YeiL43V3VpTWCA4-tnXpXDYack0d94g@mail.gmail.com>
 <CAF8bMcZ3gid0Zb0_e7eTG67XeH7tj0eZw5Hh79m0v=v44gLDcg@mail.gmail.com>
Message-ID: <CANqyHbS5OupmnRi47fON7krzxMYiYy1o+pLeD2D+3zb9+QQ15w@mail.gmail.com>

Thanks for the short but informative answer, Bill. But still, each row has
four columns..right? Although the *NA* is replaced by a blank cell,
because of the extra comma it still is a four column row. Is there any way
to avoid/remove the extra comma when NA is replaced which will make it a
three column row?



On Mon, Oct 1, 2018 at 4:56 PM William Dunlap <wdunlap at tibco.com> wrote:

> Read the help file for write.table
>    ?write.table
> and look at the descriptions of its arguments.
>   > df <- data.frame(Text=c("Abe","Ben",NA,"David"), Age=c(19, NA, 12, 10))
>   > write.table(file=stdout(), t(df), sep=",")
>   "V1","V2","V3","V4"
>   "Text","Abe","Ben",NA,"David"
>   "Age","19",NA,"12","10"
>   > write.table(file=stdout(), t(df), quote=FALSE, na="", sep=",")
>   V1,V2,V3,V4
>   Text,Abe,Ben,,David
>   Age,19,,12,10
>
>
>
>
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
>
> On Mon, Oct 1, 2018 at 2:24 AM, Manoranjan Muthusamy <
> ranjanmano167 at gmail.com> wrote:
>
>> I have a horizontally arranged CSV file
>> <https://www.dropbox.com/s/0ukyuifvpq1olqk/samplefile.csv?dl=0> (
>> samplefile.csv) with headers are in the first column. Also, each row has a
>> different number of columns. I want to read this CSV file, replace one of
>> the cell value and save again as a CSV file with the same format as the
>> original file with exactly same number of columns and rows. It sounds like
>> a simple task, but I am struggling to find a way. I tried to do this with
>> the help of this
>> <
>> https://stackoverflow.com/questions/17288197/reading-a-csv-file-organized-horizontally
>> >
>>  and this
>> <
>> https://stackoverflow.com/questions/20308621/how-do-i-write-a-csv-file-in-r-where-my-input-is-written-to-the-file-as-row
>> >
>> posts,
>> but still, I can't get the output the way I want. Can somebody help me
>> here?
>>
>> My attempt using the answer in this post
>> <
>> https://stackoverflow.com/questions/17288197/reading-a-csv-file-organized-horizontally
>> >
>> to
>> read the CSV file (samplefile.csv) gives me the following output where
>> headers are kinda messed up and empty cells are replaced with NA values
>> which is not what I want
>>
>> aaa <- read.tcsv("samplefile.csv")
>> aaa
>>
>>      Header.1 Header.2..units. Header.3..units. Header.3..units..11
>> Some text           0.0625                0             2648962
>> <NA>           0.0625             1200             6647473        <NA>
>>           0.0625             1380                  14        <NA>
>>      0.2500             1500                  15        <NA>
>> 0.6250             1620                 NA6        <NA>
>> 1.3125             1740                 NA7        <NA>
>> 2.4375             1860                 NA8        <NA>
>> 3.5625             1980                 NA9        <NA>
>> 4.6250             2100                 NA10       <NA>
>> 5.0000             2220                 NA11       <NA>
>> 5.0000             2340                 NA12       <NA>
>> 4.6250             2460                 NA13       <NA>
>> 3.5625             2580                 NA14       <NA>
>> 2.4375             2700                 NA15       <NA>
>> 1.3125             2820                 NA16       <NA>
>> 0.6250             2940                 NA17       <NA>
>> 0.2500             3060                 NA18       <NA>
>> 0.0625             3180                 NA19       <NA>
>> 0.0000             3300                 NA20       <NA>
>> 0.0000            18000                 NA
>>
>> Also, I am not sure how to go back to original format when I save the file
>> again after a modification (for example after replacing a cell value)
>>
>> I tried saving the file again by using t (transpose) as given below
>>
>> write.csv(t(aaa), file ="samplefile_e.csv", row.names=T)
>>
>> but still, there are following issues in the saved file
>>
>>    1. messed up headers
>>    2. empty cells are replaced with NA
>>    3. when I open the file in a text editor all the values are shown as
>>    characters
>>
>> Thanks,
>> Mano
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>

	[[alternative HTML version deleted]]


From ruipb@rr@d@@ @ending from @@po@pt  Wed Oct  3 12:37:41 2018
From: ruipb@rr@d@@ @ending from @@po@pt (Rui Barradas)
Date: Wed, 3 Oct 2018 11:37:41 +0100
Subject: [R] Polygon
In-Reply-To: <3898bda2-5073-8dd4-266b-4751d5d00c6c@ntu.edu.tw>
References: <fcc9c821-50bf-7c7a-4e8f-e4859f7deb78@ntu.edu.tw>
 <0d7bc6e1-2d8e-f3f9-d685-2c1e5a001a20@sapo.pt>
 <9ac5812e-5539-9d6a-6396-a2ec225f257b@ntu.edu.tw>
 <EFF7563D-00B0-4DB8-BC1B-5B0A7FBBE113@comcast.net>
 <3898bda2-5073-8dd4-266b-4751d5d00c6c@ntu.edu.tw>
Message-ID: <e38d6173-60ec-a74f-858e-b1974a81cd22@sapo.pt>

Hello,

If you change cord.x and cord.y to


cord.x <- c(-3, seq(-3, -1.96, 0.01), -1.96)
cord.y <- c(0, dnorm(seq(-3, -1.96, 0.01)), 0)


then you will not need the call to abline.

Hope this helps,

Rui Barradas

?s 02:50 de 03/10/2018, Steven Yen escreveu:
> Thanks!!! It did wonders.
> Steven
> 
> On 10/3/2018 9:39 AM, David Winsemius wrote:
>>> On Oct 2, 2018, at 5:50 PM, Steven Yen<styen at ntu.edu.tw>  wrote:
>>>
>>> Great. Thanks! It did wonders.
>>> 1. Is there a way to suppress the obvious tick stops (-3,-2,-1,0,1,2,3)
>>> and mark only the ticks -1.96 and 1.96.
>>> 2. Better yet, to draw vertical lines at x = -1.96 and x = 1.96.
>>> Thanks.
>> Read ?plot.default
>>
>> Then add xaxt="n" to the arguments to curve, ... and afterwards:
>>
>> axis( 1, at=c(-1.96, 1.96),lab=c(-1.96, 1.96) )
>> abline( v= c(-1.96, 1.96) )
>>
>> --
>>> Steven
>>>
>>> On 10/3/2018 12:51 AM, Rui Barradas wrote:
>>>> Hello,
>>>>
>>>> Continue with
>>>>
>>>>
>>>> polygon(-rev(cord.x), rev(cord.y), col = 'skyblue')
>>>>
>>>>
>>>> Hope this helps,
>>>>
>>>> Rui Barradas
>>>>
>>>> ?s 17:25 de 02/10/2018, Steven Yen escreveu:
>>>>> Can someone help me with polygon. The following codes are self-runnable
>>>>> and mark a shaded area under the standard normal curve in the x-range
>>>>> (-3,-1).
>>>>> Is there a way to also mark the area in (1,3), at the same time.
>>>>> That is, I want shaded areas in both tails. Thank you...
>>>>>
>>>>> ===
>>>>> # Create data for the area to shade
>>>>> cord.x <- c(-3,seq(-3,-1,0.01),-1)
>>>>> cord.y <- c(0,dnorm(seq(-3,-1,0.01)),0)
>>>>>
>>>>> # Make a curve
>>>>> curve(dnorm(x,0,1), xlim=c(-3,3), main='Standard Normal')
>>>>>
>>>>> # Add the shaded area.
>>>>> polygon(cord.x,cord.y,col='skyblue')
>>>>>
>>> -- 
>>> styen at ntu.edu.tw  (S.T. Yen)
>>>
>>>
>>> 	[[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org  mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guidehttp://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> David Winsemius
>> Alameda, CA, USA
>>
>> 'Any technology distinguishable from magic is insufficiently advanced.'   -Gehm's Corollary to Clarke's Third Law
>>
>>
>>
>>
>>
>>
> 
> -- 
> styen at ntu.edu.tw  (S.T. Yen)
>


From m@cqueen1 @ending from llnl@gov  Wed Oct  3 18:48:43 2018
From: m@cqueen1 @ending from llnl@gov (MacQueen, Don)
Date: Wed, 3 Oct 2018 16:48:43 +0000
Subject: [R] Sp-package overlay
In-Reply-To: <BFC0F8A6-51E7-4F35-8546-88D3271B5E42@bigelow.org>
References: <918BE55E-111A-4A84-BAD3-D18EA16DACDD@gmail.com>
 <BFC0F8A6-51E7-4F35-8546-88D3271B5E42@bigelow.org>
Message-ID: <F5BD06C7-E742-4FB6-97A7-6BA9EACE8520@llnl.gov>

In addition, the function you want is
  sp::over
or its equivalent in sf

--
Don MacQueen
Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062
Lab cell 925-724-7509
 
 

?On 10/2/18, 1:41 PM, "R-help on behalf of Ben Tupper" <r-help-bounces at r-project.org on behalf of btupper at bigelow.org> wrote:

    Hi,
    
    I'm pretty sure that what you ask is likely not too hard to do.  On the other hand, I think you will do well to consider the following...
    
    1. Join the mailing list; the folks there will know better what you are trying to do - see
    
    https://stat.ethz.ch/mailman/listinfo/r-sig-geo <https://stat.ethz.ch/mailman/listinfo/r-sig-geo>
    
    
    2. Switch from the sf package to the sf package if you can - see  
    
    https://cran.r-project.org/web/packages/sf/
    
    
    3. Come up to speed with geospatial data handling in R starting here 
    
    https://geocompr.robinlovelace.net/index.html
    
    
    Cheers,
    Ben
    
    
    > On Oct 2, 2018, at 10:33 AM, Ivy Pieters <icwpieters at gmail.com> wrote:
    > 
    > Hey there, 
    > 
    > For my internship I have to work with R. I am working with R for the first
    > time and I don't know much. 
    > Somehow I don't manage to find the answer to my question in google. I think
    > I don't search with the right words, or maybe I just don't understand
    > enough. Anyways, I hope someone here can help me out. 
    > 
    > I have 2 datasets: 
    > 
    > a SpatialPolygonDataFrame, this dataset is called "field" (these are
    > different fields of arable land) 
    > and a SpatialPointsDataFrame, this dataset is called "odk" (these are
    > different soil samples taken in each field) 
    > 
    > The field data set consists of 8 polygons and they have a slot with coords 
    > 
    > The odk data set consists of 537 features (soil samples), these features
    > belong to the polygons but they are all mixed. This dataset also has a slot
    > with coords 
    > 
    > They are both projected in the same coordinate system. 
    > 
    > Now I would like to create a new dataset with a table with the features of
    > odk that belong to polygon 1 and a separate table for the features that
    > belong to polygon 2 etc. The best is if they also get into the
    > spatialpointsdataframe format. 
    > 
    > I really don't know how to do this. I hope someone here can help me out. I
    > hope that I gave enough information for anyone to help me else let me know
    > if I have to tell something more about my datasets. 
    > 
    > Thank you already a lot in advance, 
    > 
    > Hope to hear from anyone soon, 
    > 
    > Kind regards, 
    > 
    > Ivy
    > 
    > ______________________________________________
    > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    > https://stat.ethz.ch/mailman/listinfo/r-help
    > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    > and provide commented, minimal, self-contained, reproducible code.
    > 
    
    Ben Tupper
    Bigelow Laboratory for Ocean Sciences
    60 Bigelow Drive, P.O. Box 380
    East Boothbay, Maine 04544
    http://www.bigelow.org
    
    Ecological Forecasting: https://eco.bigelow.org/
    
    
    
    
    
    
    	[[alternative HTML version deleted]]
    
    ______________________________________________
    R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    https://stat.ethz.ch/mailman/listinfo/r-help
    PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    and provide commented, minimal, self-contained, reproducible code.
    


From wdunl@p @ending from tibco@com  Wed Oct  3 18:51:36 2018
From: wdunl@p @ending from tibco@com (William Dunlap)
Date: Wed, 3 Oct 2018 09:51:36 -0700
Subject: [R] R - Reading a horizontally arranged csv file,
 replacing values and saving again
In-Reply-To: <CANqyHbS5OupmnRi47fON7krzxMYiYy1o+pLeD2D+3zb9+QQ15w@mail.gmail.com>
References: <CANqyHbTC9JF4JQRKOu2YeiL43V3VpTWCA4-tnXpXDYack0d94g@mail.gmail.com>
 <CAF8bMcZ3gid0Zb0_e7eTG67XeH7tj0eZw5Hh79m0v=v44gLDcg@mail.gmail.com>
 <CANqyHbS5OupmnRi47fON7krzxMYiYy1o+pLeD2D+3zb9+QQ15w@mail.gmail.com>
Message-ID: <CAF8bMcYBJgUc3Tu_1WAeUE-SN6HKQv26fGfnzj6NSu_kU-JUdg@mail.gmail.com>

Using read.table to read data with a variable number of entries per row is
probably a mistake - data.frames (which read.table returns) are not meant
for this sort of data.  You want to store the data in R as a list with
names.  E.g.,

readYourFormat <- function(connection) {
    # connection is a file name or connection object referring
    # to text of the form
    # Header A,Some text
    # Header B,<number>,<number>,<number>
    # Header C,<number>
    # Header D,<number>,<number>,<number>,<number>
    lines <- readLines(connection)
    lines <- lines[ nchar(lines)>0 ] # omit empty lines
    fields <- strsplit(lines, ",") # split lines by commas into fields
    headers <- vapply(fields, function(x)x[1], FUN.VALUE="") # first entry
is header
    names(fields) <- headers
    contents <- lapply(fields, function(x)x[-1]) # remaining entries are
contents
    contents[-1] <- lapply(contents[-1], as.numeric) # convert all but
first line's entries to numeric
    contents
}

After reading the data and fiddling with it (but keeping it a named list),
you can write it out in a similar format with

writeYourFormat <- function (data, connection = stdout())
{
    stopifnot(is.list(data), !is.null(names(data)))
    cat(file = connection, sep = "\n", paste(sep = ",", names(data),
        vapply(data, paste, collapse = ",", FUN.VALUE = "")))
}


Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Wed, Oct 3, 2018 at 3:05 AM, Manoranjan Muthusamy <
ranjanmano167 at gmail.com> wrote:

> Thanks for the short but informative answer, Bill. But still, each row has
> four columns..right? Although the *NA* is replaced by a blank cell,
> because of the extra comma it still is a four column row. Is there any way
> to avoid/remove the extra comma when NA is replaced which will make it a
> three column row?
>
>
>
> On Mon, Oct 1, 2018 at 4:56 PM William Dunlap <wdunlap at tibco.com> wrote:
>
>> Read the help file for write.table
>>    ?write.table
>> and look at the descriptions of its arguments.
>>   > df <- data.frame(Text=c("Abe","Ben",NA,"David"), Age=c(19, NA, 12,
>> 10))
>>   > write.table(file=stdout(), t(df), sep=",")
>>   "V1","V2","V3","V4"
>>   "Text","Abe","Ben",NA,"David"
>>   "Age","19",NA,"12","10"
>>   > write.table(file=stdout(), t(df), quote=FALSE, na="", sep=",")
>>   V1,V2,V3,V4
>>   Text,Abe,Ben,,David
>>   Age,19,,12,10
>>
>>
>>
>>
>> Bill Dunlap
>> TIBCO Software
>> wdunlap tibco.com
>>
>> On Mon, Oct 1, 2018 at 2:24 AM, Manoranjan Muthusamy <
>> ranjanmano167 at gmail.com> wrote:
>>
>>> I have a horizontally arranged CSV file
>>> <https://www.dropbox.com/s/0ukyuifvpq1olqk/samplefile.csv?dl=0> (
>>> samplefile.csv) with headers are in the first column. Also, each row has
>>> a
>>> different number of columns. I want to read this CSV file, replace one of
>>> the cell value and save again as a CSV file with the same format as the
>>> original file with exactly same number of columns and rows. It sounds
>>> like
>>> a simple task, but I am struggling to find a way. I tried to do this with
>>> the help of this
>>> <https://stackoverflow.com/questions/17288197/reading-a-
>>> csv-file-organized-horizontally>
>>>  and this
>>> <https://stackoverflow.com/questions/20308621/how-do-i-
>>> write-a-csv-file-in-r-where-my-input-is-written-to-the-file-as-row>
>>> posts,
>>> but still, I can't get the output the way I want. Can somebody help me
>>> here?
>>>
>>> My attempt using the answer in this post
>>> <https://stackoverflow.com/questions/17288197/reading-a-
>>> csv-file-organized-horizontally>
>>> to
>>> read the CSV file (samplefile.csv) gives me the following output where
>>> headers are kinda messed up and empty cells are replaced with NA values
>>> which is not what I want
>>>
>>> aaa <- read.tcsv("samplefile.csv")
>>> aaa
>>>
>>>      Header.1 Header.2..units. Header.3..units. Header.3..units..11
>>> Some text           0.0625                0             2648962
>>> <NA>           0.0625             1200             6647473        <NA>
>>>           0.0625             1380                  14        <NA>
>>>      0.2500             1500                  15        <NA>
>>> 0.6250             1620                 NA6        <NA>
>>> 1.3125             1740                 NA7        <NA>
>>> 2.4375             1860                 NA8        <NA>
>>> 3.5625             1980                 NA9        <NA>
>>> 4.6250             2100                 NA10       <NA>
>>> 5.0000             2220                 NA11       <NA>
>>> 5.0000             2340                 NA12       <NA>
>>> 4.6250             2460                 NA13       <NA>
>>> 3.5625             2580                 NA14       <NA>
>>> 2.4375             2700                 NA15       <NA>
>>> 1.3125             2820                 NA16       <NA>
>>> 0.6250             2940                 NA17       <NA>
>>> 0.2500             3060                 NA18       <NA>
>>> 0.0625             3180                 NA19       <NA>
>>> 0.0000             3300                 NA20       <NA>
>>> 0.0000            18000                 NA
>>>
>>> Also, I am not sure how to go back to original format when I save the
>>> file
>>> again after a modification (for example after replacing a cell value)
>>>
>>> I tried saving the file again by using t (transpose) as given below
>>>
>>> write.csv(t(aaa), file ="samplefile_e.csv", row.names=T)
>>>
>>> but still, there are following issues in the saved file
>>>
>>>    1. messed up headers
>>>    2. empty cells are replaced with NA
>>>    3. when I open the file in a text editor all the values are shown as
>>>    characters
>>>
>>> Thanks,
>>> Mano
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/
>>> posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>>

	[[alternative HTML version deleted]]


From @hmed@ti@80 @ending from gm@il@com  Wed Oct  3 19:30:56 2018
From: @hmed@ti@80 @ending from gm@il@com (Ahmed Attia)
Date: Wed, 3 Oct 2018 14:30:56 -0300
Subject: [R] Maximum number of iterations (maxit) does not work in
 hydroPSO-modFit-optimr in r
Message-ID: <CAG6S0Ompz6ur0WWfCiv2DQOh-GvbQv=UBp2J4cXxBQY62o4x5A@mail.gmail.com>

The argument maxit used in libraries optimr, hydroPSO, and FME to
control the maximal number of iterations to be performed does not work
at ALL!!

This needs to be fixed...



mysamp <- function(n, m, s, lwr, upr, nnorm) {
  samp <- rnorm(nnorm, m, s)
  samp <- samp[samp >= lwr & samp <= upr]
  if (length(samp) >= n) {
    return(sample(samp, n))
  }
  stop(simpleError("Not enough values to sample from. Try increasing nnorm."))
}

x <- mysamp(1000,0.8117648,0.1281839,0,1,1000000)
y <- mysamp(1000,0.7530346,0.1865946,0,1,1000000)

n <- length(x)
xgroup <- c('a','b')
ygroup <- c('c','d')

for (i in c(2:n)){
  xgroup[i] <-  c('b')
  ygroup[i] <-  c('d')
}

dataset <- data.frame(x = x, y = y, xgroup = as.factor(xgroup),
                      ygroup = as.factor(ygroup))
dataset$ObsNo <- 1:n
dataset <- dataset[order(dataset$x,decreasing=F),]

xopt <- c(dataset$x[1],0.95)    #Initial critical x,y values


my.function <- function(xopt){
  for (i in c(1:n)){
    dataset$xgroup[i] <- if(dataset$x[i] < xopt[1]) 'a' else 'b'
    dataset$ygroup[i] <- if(dataset$y[i] < xopt[2]) 'c' else 'd'
    dataset$q.i[i] <- with(dataset, ifelse
                           (dataset$xgroup[i]=='a' &
dataset$ygroup[i]=='d', 1, 0))
    dataset$q.ii[i] <- with(dataset, ifelse
                            (dataset$xgroup[i]=='b' &
dataset$ygroup[i]=='d', 1, 0))
    dataset$q.iii[i] <- with(dataset, ifelse
                             (dataset$xgroup[i]=='b' &
dataset$ygroup[i]=='c', 1, 0))
    dataset$q.iv[i] <- with(dataset, ifelse
                            (dataset$xgroup[i]=='a' &
dataset$ygroup[i]=='c', 1, 0))

    dataset$q.err[i] <- sum(dataset$q.i[i] + dataset$q.iii[i])
  }
  min.qerr <- sum(dataset$q.err)
  q.I <- sum(dataset$q.i)
  q.II <- sum(dataset$q.ii)
  q.III <- sum(dataset$q.iii)
  q.IV <- sum(dataset$q.iv)
  q.Iandq.III <- sum(dataset$q.err)
  print(c(q.I,
          q.II,
          q.III,
          q.IV,
          q.Iandq.III))
  return(min.qerr)
}

my.function(xopt)

#-------Algorithm

xmin=c(0,0.60)
xmax=c(0.95,0.95)

res= hydroPSO(par=xopt,my.function,method="spso2011",
              lower=xmin,upper=xmax,control=list(maxit=3))


res= modFit(my.function,p=xopt,method="Pseudo",
            lower=xmin,upper=xmax,control=list(numiter=3))

res= optimr(par=xopt,my.function,method="L-BFGS-B",
            lower=xmin,upper=xmax,control=list(maxit=3,trace=T))

#Only the hjkb form dfoptim that has argument maxfeval and it works.

res=hjkb(par=xopt,my.function,
         lower=xmin,upper=xmax,control=list(maxfeval=3,tol=2^-10,info=T))






Ahmed Attia, Ph.D.
Agronomist & Crop Modeler


From profjcn@@h @ending from gm@il@com  Wed Oct  3 19:45:05 2018
From: profjcn@@h @ending from gm@il@com (ProfJCNash)
Date: Wed, 3 Oct 2018 13:45:05 -0400
Subject: [R] Maximum number of iterations (maxit) does not work in
 hydroPSO-modFit-optimr in r
In-Reply-To: <CAG6S0Ompz6ur0WWfCiv2DQOh-GvbQv=UBp2J4cXxBQY62o4x5A@mail.gmail.com>
References: <CAG6S0Ompz6ur0WWfCiv2DQOh-GvbQv=UBp2J4cXxBQY62o4x5A@mail.gmail.com>
Message-ID: <88baed98-8dbc-a2b0-d393-e1f3ffc4ab95@gmail.com>

As the author of optimx (there is a new version just up), I can say that
maxit only "works" if the underlying solver is set up to use it.

You seem to be mistaken, however, in this case, as the following example
shows.

> library(optimx)
> library(adagio)
> sessionInfo()
R version 3.5.1 (2018-07-02)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Linux Mint 18.3

Matrix products: default
BLAS: /usr/lib/openblas-base/libblas.so.3
LAPACK: /usr/lib/libopenblasp-r0.2.18.so

locale:
 [1] LC_CTYPE=en_CA.UTF-8       LC_NUMERIC=C
LC_TIME=en_CA.UTF-8
 [4] LC_COLLATE=en_CA.UTF-8     LC_MONETARY=en_CA.UTF-8
LC_MESSAGES=en_CA.UTF-8
 [7] LC_PAPER=en_CA.UTF-8       LC_NAME=C                  LC_ADDRESS=C

[10] LC_TELEPHONE=C             LC_MEASUREMENT=en_CA.UTF-8
LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] adagio_0.7.1     optimx_2018-7.10

loaded via a namespace (and not attached):
[1] compiler_3.5.1    tools_3.5.1       numDeriv_2016.8-1
> test <- optimr(c(-1.2, 1), fn=fnRosenbrock, method="L-BFGS-B",
control=list(maxit=2, trace=2))
Parameter scaling:[1] 1 1
N = 2, M = 5 machine precision = 2.22045e-16
This problem is unconstrained.
final  value 4.120516
stopped after 3 iterations

So it seems to have worked, albeit one iteration later than specified
(the test is not always immediate).

Note optimr() is just a wrapper. There may be improvements that could be
made to use maxit and similar controls. Note that the code is in plain R
and optimr() was written in a way that allows it to be maintained. The
most difficult problem -- which may be related to the OP's complaint in
some cases -- is translating maxit to whatever is used by the solver,
then copying back the relevant information about number of iterations.

John Nash


On 2018-10-03 01:30 PM, Ahmed Attia wrote:
> The argument maxit used in libraries optimr, hydroPSO, and FME to
> control the maximal number of iterations to be performed does not work
> at ALL!!
> 
> This needs to be fixed...
> 
> 
> 
> mysamp <- function(n, m, s, lwr, upr, nnorm) {
>   samp <- rnorm(nnorm, m, s)
>   samp <- samp[samp >= lwr & samp <= upr]
>   if (length(samp) >= n) {
>     return(sample(samp, n))
>   }
>   stop(simpleError("Not enough values to sample from. Try increasing nnorm."))
> }
> 
> x <- mysamp(1000,0.8117648,0.1281839,0,1,1000000)
> y <- mysamp(1000,0.7530346,0.1865946,0,1,1000000)
> 
> n <- length(x)
> xgroup <- c('a','b')
> ygroup <- c('c','d')
> 
> for (i in c(2:n)){
>   xgroup[i] <-  c('b')
>   ygroup[i] <-  c('d')
> }
> 
> dataset <- data.frame(x = x, y = y, xgroup = as.factor(xgroup),
>                       ygroup = as.factor(ygroup))
> dataset$ObsNo <- 1:n
> dataset <- dataset[order(dataset$x,decreasing=F),]
> 
> xopt <- c(dataset$x[1],0.95)    #Initial critical x,y values
> 
> 
> my.function <- function(xopt){
>   for (i in c(1:n)){
>     dataset$xgroup[i] <- if(dataset$x[i] < xopt[1]) 'a' else 'b'
>     dataset$ygroup[i] <- if(dataset$y[i] < xopt[2]) 'c' else 'd'
>     dataset$q.i[i] <- with(dataset, ifelse
>                            (dataset$xgroup[i]=='a' &
> dataset$ygroup[i]=='d', 1, 0))
>     dataset$q.ii[i] <- with(dataset, ifelse
>                             (dataset$xgroup[i]=='b' &
> dataset$ygroup[i]=='d', 1, 0))
>     dataset$q.iii[i] <- with(dataset, ifelse
>                              (dataset$xgroup[i]=='b' &
> dataset$ygroup[i]=='c', 1, 0))
>     dataset$q.iv[i] <- with(dataset, ifelse
>                             (dataset$xgroup[i]=='a' &
> dataset$ygroup[i]=='c', 1, 0))
> 
>     dataset$q.err[i] <- sum(dataset$q.i[i] + dataset$q.iii[i])
>   }
>   min.qerr <- sum(dataset$q.err)
>   q.I <- sum(dataset$q.i)
>   q.II <- sum(dataset$q.ii)
>   q.III <- sum(dataset$q.iii)
>   q.IV <- sum(dataset$q.iv)
>   q.Iandq.III <- sum(dataset$q.err)
>   print(c(q.I,
>           q.II,
>           q.III,
>           q.IV,
>           q.Iandq.III))
>   return(min.qerr)
> }
> 
> my.function(xopt)
> 
> #-------Algorithm
> 
> xmin=c(0,0.60)
> xmax=c(0.95,0.95)
> 
> res= hydroPSO(par=xopt,my.function,method="spso2011",
>               lower=xmin,upper=xmax,control=list(maxit=3))
> 
> 
> res= modFit(my.function,p=xopt,method="Pseudo",
>             lower=xmin,upper=xmax,control=list(numiter=3))
> 
> res= optimr(par=xopt,my.function,method="L-BFGS-B",
>             lower=xmin,upper=xmax,control=list(maxit=3,trace=T))
> 
> #Only the hjkb form dfoptim that has argument maxfeval and it works.
> 
> res=hjkb(par=xopt,my.function,
>          lower=xmin,upper=xmax,control=list(maxfeval=3,tol=2^-10,info=T))
> 
> 
> 
> 
> 
> 
> Ahmed Attia, Ph.D.
> Agronomist & Crop Modeler
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From d@vid@mi @ending from micro@oft@com  Wed Oct  3 20:11:54 2018
From: d@vid@mi @ending from micro@oft@com (David Smith (CDA))
Date: Wed, 3 Oct 2018 18:11:54 +0000
Subject: [R] Revolutions blog: September 2018 roundup
Message-ID: <DM5PR2101MB1048FC7A8F516E4E2E9E4E27C8E90@DM5PR2101MB1048.namprd21.prod.outlook.com>

Since 2008, Microsoft staff and guests have written about R at the Revolutions
blog (http://blog.revolutionanalytics.com) and every month I post a summary of
articles from the previous month of particular interest to readers of r-help.

In case you missed them, here are some articles related to R from the
month of September:

R code by Barry Rowlingson to replicate an XKCD comic about curve fitting:
http://blog.revolutionanalytics.com/2018/09/curve-fitting.html

The rayshader package creates 3-D relief maps in R with perspective, shadows,
and depth of field: http://blog.revolutionanalytics.com/2018/09/raytracer.html

The R Developer's Guide to Azure, with links to documentation for Azure cloud
services integrating R: http://blog.revolutionanalytics.com/2018/09/index.html

A review of many commercial applications of R presented at EARL London 2018:
http://blog.revolutionanalytics.com/2018/09/earl-london-2018.html

Roundup of AI, Machine Learning and Data Science news from September 2018:
http://blog.revolutionanalytics.com/2018/09/ai-roundup-september-2018.html

A Shiny app using the Custom Vision API to identify pictures (or not) of hotdogs:
http://blog.revolutionanalytics.com/2018/09/not-hotdog-a-shiny-app-using-the-custom-vision-api.html

Two academic articles use survey techniques to estimate casualties from
Hurricane Maria in Puerto Rico:
http://blog.revolutionanalytics.com/2018/09/mortality-in-puerto-rico.html

Yihui Xie describes the benefits of RMarkdown documents in response to criticism
of Jupyter Notebooks:
http://blog.revolutionanalytics.com/2018/09/notebooks-literate-programming.html

A video demonstrates the use of R and Python in Azure HDinsight:
http://blog.revolutionanalytics.com/2018/09/r-python-azure-hdinsight.html

Similarity analyses in R used to identify candidate authors for an anonymous
op-ed in the New York Times:
http://blog.revolutionanalytics.com/2018/09/anonymous-nyt-op-ed.html

A review of the book "SQL Server 2017 Machine Learning Services with R":
http://blog.revolutionanalytics.com/2018/09/sql-server-2017-book-review.html

And some general interest stories (not necessarily related to R):

* Inspiring radio from a young pilot's eventful first solo flight:
  http://blog.revolutionanalytics.com/2018/09/because-its-friday-fly-strong.html

* Various techniques used by media to project the track of Hurricane Florence:
  http://blog.revolutionanalytics.com/2018/09/because-its-friday-hurricane-trackers.html

* A 26-year timelapse of stars orbiting the galactic center:
  http://blog.revolutionanalytics.com/2018/09/stars-in-motion.html

As always, thanks for the comments and please keep sending suggestions to me at
davidsmi at microsoft.com or via Twitter (I'm @revodavid).

Cheers,
# David

-- 
David M Smith <davidsmi at microsoft.com>
Developer Advocate, Microsoft Cloud & Enterprise 
Tel: +1 (312) 9205766 (Chicago IL, USA)
Twitter: @revodavid | Blog: ?http://blog.revolutionanalytics.com


From kyd@viddoyle @ending from gm@il@com  Thu Oct  4 01:03:31 2018
From: kyd@viddoyle @ending from gm@il@com (David Doyle)
Date: Wed, 3 Oct 2018 18:03:31 -0500
Subject: [R] Logic operators...more than one??
Message-ID: <CACftpvrJwyV6451gFrZsGZKQoXbn3iA8P=7fuKs8FgOdLxJCXw@mail.gmail.com>

I'm sure this is a simple question but I'm not sure where to find the
answer.

I want to remove some of the data.  For example when my Location column is
MW-09, MW-10, or MW-11.

It works fine if I ONLY list ONE of the locations as in:

SampledWells <- MyData[ MyData$Location != "MW-09", ]

But if I try to do more than one (as shown below), I don't get an error but
I also don't get my SampledWells
SampledWells <- MyData[ MyData$Location != "MW-09", "MW-10", ]

Thoughts??

Thank you for your time
David

	[[alternative HTML version deleted]]


From m@rc_@chw@rtz @ending from me@com  Thu Oct  4 01:06:48 2018
From: m@rc_@chw@rtz @ending from me@com (Marc Schwartz)
Date: Wed, 03 Oct 2018 19:06:48 -0400
Subject: [R] Logic operators...more than one??
In-Reply-To: <CACftpvrJwyV6451gFrZsGZKQoXbn3iA8P=7fuKs8FgOdLxJCXw@mail.gmail.com>
References: <CACftpvrJwyV6451gFrZsGZKQoXbn3iA8P=7fuKs8FgOdLxJCXw@mail.gmail.com>
Message-ID: <75E7FA17-8DF9-4705-8BC5-68BDC50F307C@me.com>


> On Oct 3, 2018, at 7:03 PM, David Doyle <kydaviddoyle at gmail.com> wrote:
> 
> I'm sure this is a simple question but I'm not sure where to find the
> answer.
> 
> I want to remove some of the data.  For example when my Location column is
> MW-09, MW-10, or MW-11.
> 
> It works fine if I ONLY list ONE of the locations as in:
> 
> SampledWells <- MyData[ MyData$Location != "MW-09", ]
> 
> But if I try to do more than one (as shown below), I don't get an error but
> I also don't get my SampledWells
> SampledWells <- MyData[ MyData$Location != "MW-09", "MW-10", ]
> 
> Thoughts??
> 
> Thank you for your time
> David


Hi,

See ?"%in%"

Then:

  SampledWells <- MyData[ !MyData$Location %in% c("MW-09", "MW-10"), ]

Note the '!' operator that precedes the expression to negate the logical.

Regards,

Marc Schwartz


	[[alternative HTML version deleted]]


From drjimlemon @ending from gm@il@com  Thu Oct  4 01:04:37 2018
From: drjimlemon @ending from gm@il@com (Jim Lemon)
Date: Thu, 4 Oct 2018 09:04:37 +1000
Subject: [R] Logic operators...more than one??
In-Reply-To: <CACftpvrJwyV6451gFrZsGZKQoXbn3iA8P=7fuKs8FgOdLxJCXw@mail.gmail.com>
References: <CACftpvrJwyV6451gFrZsGZKQoXbn3iA8P=7fuKs8FgOdLxJCXw@mail.gmail.com>
Message-ID: <CA+8X3fV_4LB02iMFeWd=NxTZr3QhvRG1MSrCyBZ9LDkEBSB64w@mail.gmail.com>

Hi David,
I think you want this:

SampledWells <- MyData[!( MyData$Location %in% c("MW-09", "MW-10")), ]

Jim

On Thu, Oct 4, 2018 at 9:02 AM David Doyle <kydaviddoyle at gmail.com> wrote:
>
> I'm sure this is a simple question but I'm not sure where to find the
> answer.
>
> I want to remove some of the data.  For example when my Location column is
> MW-09, MW-10, or MW-11.
>
> It works fine if I ONLY list ONE of the locations as in:
>
> SampledWells <- MyData[ MyData$Location != "MW-09", ]
>
> But if I try to do more than one (as shown below), I don't get an error but
> I also don't get my SampledWells
> SampledWells <- MyData[ MyData$Location != "MW-09", "MW-10", ]
>
> Thoughts??
>
> Thank you for your time
> David
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @ending from gm@il@com  Thu Oct  4 01:20:48 2018
From: bgunter@4567 @ending from gm@il@com (Bert Gunter)
Date: Wed, 3 Oct 2018 16:20:48 -0700
Subject: [R] Logic operators...more than one??
In-Reply-To: <CACftpvrJwyV6451gFrZsGZKQoXbn3iA8P=7fuKs8FgOdLxJCXw@mail.gmail.com>
References: <CACftpvrJwyV6451gFrZsGZKQoXbn3iA8P=7fuKs8FgOdLxJCXw@mail.gmail.com>
Message-ID: <CAGxFJbT3Nh9Wa-_Wp5_vyMvtySq9Y0zu7Y033NAgYRT-SPJCVQ@mail.gmail.com>

Inline.
-- Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Oct 3, 2018 at 4:02 PM David Doyle <kydaviddoyle at gmail.com> wrote:

> I'm sure this is a simple question but I'm not sure where to find the
> answer.
>

Good R tutorials abound on the internet. One resource is:
https://www.rstudio.com/online-learning/#r-programming

but there are tons more if you search.

>
> I want to remove some of the data.  For example when my Location column is
> MW-09, MW-10, or MW-11.
>
> It works fine if I ONLY list ONE of the locations as in:
>
> SampledWells <- MyData[ MyData$Location != "MW-09", ]
>
> But if I try to do more than one (as shown below), I don't get an error but
> I also don't get my SampledWells
> SampledWells <- MyData[ MyData$Location != "MW-09", "MW-10", ]
>
> Thoughts??
>

?"%in%"

as in:

SampledWells <- MyData[ MyData$Location %in% c( "MW-09", "MW-10", "MW-11"),
]





> Thank you for your time
> David
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jlup@dh @ending from gm@il@com  Thu Oct  4 07:18:29 2018
From: jlup@dh @ending from gm@il@com (Jiblal Upadhya)
Date: Thu, 4 Oct 2018 00:18:29 -0500
Subject: [R] Help to find ksl data set
Message-ID: <CAO-R1n7H_g9L9u+h2_4Xobn+3Kbi56+ax9r4jpC0PObww5ejOw@mail.gmail.com>

Hi,

I  need help in finding the ksl data set mention in the deal package in the
paper attached. I searched in the UCI Machine learning repository, but
couldn?t find.
Please help,

Thanks,
Jiblal

-------------- next part --------------
A non-text attachment was scrubbed...
Name: deal.pdf
Type: application/pdf
Size: 1537224 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20181004/d54a131e/attachment-0001.pdf>

From dwin@emiu@ @ending from comc@@t@net  Thu Oct  4 08:48:13 2018
From: dwin@emiu@ @ending from comc@@t@net (David Winsemius)
Date: Wed, 3 Oct 2018 23:48:13 -0700
Subject: [R] Help to find ksl data set
In-Reply-To: <CAO-R1n7H_g9L9u+h2_4Xobn+3Kbi56+ax9r4jpC0PObww5ejOw@mail.gmail.com>
References: <CAO-R1n7H_g9L9u+h2_4Xobn+3Kbi56+ax9r4jpC0PObww5ejOw@mail.gmail.com>
Message-ID: <502A4C72-9E0C-49A2-9D6D-739A70053B45@comcast.net>


> On Oct 3, 2018, at 10:18 PM, Jiblal Upadhya <jlupadh at gmail.com> wrote:
> 
> Hi,
> 
> I  need help in finding the ksl data set mention in the deal package in the
> paper attached. I searched in the UCI Machine learning repository, but
> couldn?t find.

The paper makes me think it is in the archived package (last updated in 2013)

https://cran.r-project.org/src/contrib/Archive/deal/deal_1.2-37.tar.gz


> Please help,
> 
> Thanks,
> Jiblal
> <deal.pdf>______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

David Winsemius
Alameda, CA, USA

'Any technology distinguishable from magic is insufficiently advanced.'   -Gehm's Corollary to Clarke's Third Law


From hugomh @ending from gmx@fr  Thu Oct  4 12:09:01 2018
From: hugomh @ending from gmx@fr (hmh)
Date: Thu, 4 Oct 2018 10:09:01 +0000
Subject: [R] Bug : Autocorrelation in sample drawn from stats::rnorm
In-Reply-To: <a218224b-fdbd-2736-8cf9-6894c4a3adbd@gmx.fr>
References: <a218224b-fdbd-2736-8cf9-6894c4a3adbd@gmx.fr>
Message-ID: <a92bbb3c-35a2-049c-a18a-afcf78e689c4@gmx.fr>

Hi,


I just noticed the following bug:

When we draw a random sample using the function stats::rnorm, there 
should be not auto-correlation in the sample. But their is some 
auto-correlation _when the sample that is drawn is small_.

I describe the problem using two functions:

DistributionAutocorrelation_Unexpected which as the wrong behavior : 
_when drawing some small samples using rnorm, there is generally a 
strong negative auto-correlation in the sample_.

and

DistributionAutocorrelation_Expected which illustrate the expected behavior



*Unexpected : *

DistributionAutocorrelation_Unexpected = function(SampleSize){
 ? Cor = NULL
 ? for(repetition in 1:1e5){
 ??? X = rnorm(SampleSize)
 ??? Cor[repetition] = cor(X[-1],X[-length(X)])
 ? }
 ? return(Cor)
}

par(mfrow=c(3,3))
for(SampleSize_ in c(4,5,6,7,8,10,15,20,50)){
hist(DistributionAutocorrelation_Unexpected(SampleSize_),col='grey',main=paste0('SampleSize=',SampleSize_)) 
; abline(v=0,col=2)
}

output:


*Expected**:*

DistributionAutocorrelation_Expected = function(SampleSize){
 ? Cor = NULL
 ? for(repetition in 1:1e5){
 ??? X = rnorm(SampleSize)
*??? Cor[repetition] = cor(sample(X[-1]),sample(X[-length(X)]))*
 ? }
 ? return(Cor)
}

par(mfrow=c(3,3))
for(SampleSize_ in c(4,5,6,7,8,10,15,20,50)){
hist(DistributionAutocorrelation_Expected(SampleSize_),col='grey',main=paste0('SampleSize=',SampleSize_)) 
; abline(v=0,col=2)
}




Some more information you might need:


packageDescription("stats")
Package: stats
Version: 3.5.1
Priority: base
Title: The R Stats Package
Author: R Core Team and contributors worldwide
Maintainer: R Core Team <R-core at r-project.org>
Description: R statistical functions.
License: Part of R 3.5.1
Imports: utils, grDevices, graphics
Suggests: MASS, Matrix, SuppDists, methods, stats4
NeedsCompilation: yes
Built: R 3.5.1; x86_64-pc-linux-gnu; 2018-07-03 02:12:37 UTC; unix

Thanks for correcting that.

fill free to ask any further information you would need.

cheers,

hugo


-- 
- no title specified

Hugo Math?-Hubert

ATER

Laboratoire Interdisciplinaire des Environnements Continentaux (LIEC)

UMR 7360 CNRS - ?B?t IBISE

Universit? de Lorraine ?- ?UFR SciFA

8, Rue du G?n?ral Delestraint

F-57070 METZ

+33(0)9 77 21 66 66
- - - - - - - - - - - - - - - - - -
Les r?flexions naissent dans les doutes et meurent dans les certitudes. 
Les doutes sont donc un signe de force et les certitudes un signe de 
faiblesse. La plupart des gens sont pourtant certains du contraire.
- - - - - - - - - - - - - - - - - -
Thoughts appear from doubts and die in convictions. Therefore, doubts 
are an indication of strength and convictions an indication of weakness. 
Yet, most people believe the opposite.


From j@n@@nn@ert @ending from u@ntwerpen@be  Thu Oct  4 13:23:59 2018
From: j@n@@nn@ert @ending from u@ntwerpen@be (Annaert Jan)
Date: Thu, 4 Oct 2018 11:23:59 +0000
Subject: [R] Bug : Autocorrelation in sample drawn from stats::rnorm
In-Reply-To: <a92bbb3c-35a2-049c-a18a-afcf78e689c4@gmx.fr>
References: <a218224b-fdbd-2736-8cf9-6894c4a3adbd@gmx.fr>
 <a92bbb3c-35a2-049c-a18a-afcf78e689c4@gmx.fr>
Message-ID: <5795765504f44ce7928655d3ef2037f5@uantwerpen.be>


Did you take into account that the sample serial correlation coefficient has a bias of approximately -1/T (with T the sample size)? Its variance is approximately 1/T.
Jan Annaert



-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of hmh
Sent: donderdag 4 oktober 2018 12:09
To: R <r-help at r-project.org>
Subject: [R] Bug : Autocorrelation in sample drawn from stats::rnorm

Hi,


I just noticed the following bug:

When we draw a random sample using the function stats::rnorm, there should be not auto-correlation in the sample. But their is some auto-correlation _when the sample that is drawn is small_.

I describe the problem using two functions:

DistributionAutocorrelation_Unexpected which as the wrong behavior : 
_when drawing some small samples using rnorm, there is generally a strong negative auto-correlation in the sample_.

and

DistributionAutocorrelation_Expected which illustrate the expected behavior



*Unexpected : *

DistributionAutocorrelation_Unexpected = function(SampleSize){
 ? Cor = NULL
 ? for(repetition in 1:1e5){
 ??? X = rnorm(SampleSize)
 ??? Cor[repetition] = cor(X[-1],X[-length(X)])
 ? }
 ? return(Cor)
}

par(mfrow=c(3,3))
for(SampleSize_ in c(4,5,6,7,8,10,15,20,50)){
hist(DistributionAutocorrelation_Unexpected(SampleSize_),col='grey',main=paste0('SampleSize=',SampleSize_))
; abline(v=0,col=2)
}

output:


*Expected**:*

DistributionAutocorrelation_Expected = function(SampleSize){
 ? Cor = NULL
 ? for(repetition in 1:1e5){
 ??? X = rnorm(SampleSize)
*??? Cor[repetition] = cor(sample(X[-1]),sample(X[-length(X)]))*
 ? }
 ? return(Cor)
}

par(mfrow=c(3,3))
for(SampleSize_ in c(4,5,6,7,8,10,15,20,50)){
hist(DistributionAutocorrelation_Expected(SampleSize_),col='grey',main=paste0('SampleSize=',SampleSize_))
; abline(v=0,col=2)
}




Some more information you might need:


packageDescription("stats")
Package: stats
Version: 3.5.1
Priority: base
Title: The R Stats Package
Author: R Core Team and contributors worldwide
Maintainer: R Core Team <R-core at r-project.org>
Description: R statistical functions.
License: Part of R 3.5.1
Imports: utils, grDevices, graphics
Suggests: MASS, Matrix, SuppDists, methods, stats4
NeedsCompilation: yes
Built: R 3.5.1; x86_64-pc-linux-gnu; 2018-07-03 02:12:37 UTC; unix

Thanks for correcting that.

fill free to ask any further information you would need.

cheers,

hugo


-- 
- no title specified

Hugo Math?-Hubert

ATER

Laboratoire Interdisciplinaire des Environnements Continentaux (LIEC)

UMR 7360 CNRS - ?B?t IBISE

Universit? de Lorraine ?- ?UFR SciFA

8, Rue du G?n?ral Delestraint

F-57070 METZ

+33(0)9 77 21 66 66
- - - - - - - - - - - - - - - - - -
Les r?flexions naissent dans les doutes et meurent dans les certitudes. 
Les doutes sont donc un signe de force et les certitudes un signe de 
faiblesse. La plupart des gens sont pourtant certains du contraire.
- - - - - - - - - - - - - - - - - -
Thoughts appear from doubts and die in convictions. Therefore, doubts 
are an indication of strength and convictions an indication of weakness. 
Yet, most people believe the opposite.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

From r@nj@nm@no167 @ending from gm@il@com  Thu Oct  4 18:03:59 2018
From: r@nj@nm@no167 @ending from gm@il@com (Manoranjan Muthusamy)
Date: Thu, 4 Oct 2018 17:03:59 +0100
Subject: [R] R - Reading a horizontally arranged csv file,
 replacing values and saving again
In-Reply-To: <CAF8bMcYBJgUc3Tu_1WAeUE-SN6HKQv26fGfnzj6NSu_kU-JUdg@mail.gmail.com>
References: <CANqyHbTC9JF4JQRKOu2YeiL43V3VpTWCA4-tnXpXDYack0d94g@mail.gmail.com>
 <CAF8bMcZ3gid0Zb0_e7eTG67XeH7tj0eZw5Hh79m0v=v44gLDcg@mail.gmail.com>
 <CANqyHbS5OupmnRi47fON7krzxMYiYy1o+pLeD2D+3zb9+QQ15w@mail.gmail.com>
 <CAF8bMcYBJgUc3Tu_1WAeUE-SN6HKQv26fGfnzj6NSu_kU-JUdg@mail.gmail.com>
Message-ID: <CANqyHbQzqNC7ynb9brMFB+b_vAg6+6D6SMgAgSJn_y-hHC4gQA@mail.gmail.com>

That's exactly what I was looking for. Never used readLines before which is
why I was struggling.  Many thanks. I asked the same question in Stack
Overflow as well. But no answers yet. I will post the link to your answer.
Thanks again.

On Wed, Oct 3, 2018 at 5:51 PM William Dunlap <wdunlap at tibco.com> wrote:

> Using read.table to read data with a variable number of entries per row is
> probably a mistake - data.frames (which read.table returns) are not meant
> for this sort of data.  You want to store the data in R as a list with
> names.  E.g.,
>
> readYourFormat <- function(connection) {
>     # connection is a file name or connection object referring
>     # to text of the form
>     # Header A,Some text
>     # Header B,<number>,<number>,<number>
>     # Header C,<number>
>     # Header D,<number>,<number>,<number>,<number>
>     lines <- readLines(connection)
>     lines <- lines[ nchar(lines)>0 ] # omit empty lines
>     fields <- strsplit(lines, ",") # split lines by commas into fields
>     headers <- vapply(fields, function(x)x[1], FUN.VALUE="") # first entry
> is header
>     names(fields) <- headers
>     contents <- lapply(fields, function(x)x[-1]) # remaining entries are
> contents
>     contents[-1] <- lapply(contents[-1], as.numeric) # convert all but
> first line's entries to numeric
>     contents
> }
>
> After reading the data and fiddling with it (but keeping it a named list),
> you can write it out in a similar format with
>
> writeYourFormat <- function (data, connection = stdout())
> {
>     stopifnot(is.list(data), !is.null(names(data)))
>     cat(file = connection, sep = "\n", paste(sep = ",", names(data),
>         vapply(data, paste, collapse = ",", FUN.VALUE = "")))
> }
>
>
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
>
> On Wed, Oct 3, 2018 at 3:05 AM, Manoranjan Muthusamy <
> ranjanmano167 at gmail.com> wrote:
>
>> Thanks for the short but informative answer, Bill. But still, each row
>> has four columns..right? Although the *NA* is replaced by a blank cell,
>> because of the extra comma it still is a four column row. Is there any way
>> to avoid/remove the extra comma when NA is replaced which will make it a
>> three column row?
>>
>>
>>
>> On Mon, Oct 1, 2018 at 4:56 PM William Dunlap <wdunlap at tibco.com> wrote:
>>
>>> Read the help file for write.table
>>>    ?write.table
>>> and look at the descriptions of its arguments.
>>>   > df <- data.frame(Text=c("Abe","Ben",NA,"David"), Age=c(19, NA, 12,
>>> 10))
>>>   > write.table(file=stdout(), t(df), sep=",")
>>>   "V1","V2","V3","V4"
>>>   "Text","Abe","Ben",NA,"David"
>>>   "Age","19",NA,"12","10"
>>>   > write.table(file=stdout(), t(df), quote=FALSE, na="", sep=",")
>>>   V1,V2,V3,V4
>>>   Text,Abe,Ben,,David
>>>   Age,19,,12,10
>>>
>>>
>>>
>>>
>>> Bill Dunlap
>>> TIBCO Software
>>> wdunlap tibco.com
>>>
>>> On Mon, Oct 1, 2018 at 2:24 AM, Manoranjan Muthusamy <
>>> ranjanmano167 at gmail.com> wrote:
>>>
>>>> I have a horizontally arranged CSV file
>>>> <https://www.dropbox.com/s/0ukyuifvpq1olqk/samplefile.csv?dl=0> (
>>>> samplefile.csv) with headers are in the first column. Also, each row
>>>> has a
>>>> different number of columns. I want to read this CSV file, replace one
>>>> of
>>>> the cell value and save again as a CSV file with the same format as the
>>>> original file with exactly same number of columns and rows. It sounds
>>>> like
>>>> a simple task, but I am struggling to find a way. I tried to do this
>>>> with
>>>> the help of this
>>>> <
>>>> https://stackoverflow.com/questions/17288197/reading-a-csv-file-organized-horizontally
>>>> >
>>>>  and this
>>>> <
>>>> https://stackoverflow.com/questions/20308621/how-do-i-write-a-csv-file-in-r-where-my-input-is-written-to-the-file-as-row
>>>> >
>>>> posts,
>>>> but still, I can't get the output the way I want. Can somebody help me
>>>> here?
>>>>
>>>> My attempt using the answer in this post
>>>> <
>>>> https://stackoverflow.com/questions/17288197/reading-a-csv-file-organized-horizontally
>>>> >
>>>> to
>>>> read the CSV file (samplefile.csv) gives me the following output where
>>>> headers are kinda messed up and empty cells are replaced with NA values
>>>> which is not what I want
>>>>
>>>> aaa <- read.tcsv("samplefile.csv")
>>>> aaa
>>>>
>>>>      Header.1 Header.2..units. Header.3..units. Header.3..units..11
>>>> Some text           0.0625                0             2648962
>>>> <NA>           0.0625             1200             6647473        <NA>
>>>>           0.0625             1380                  14        <NA>
>>>>      0.2500             1500                  15        <NA>
>>>> 0.6250             1620                 NA6        <NA>
>>>> 1.3125             1740                 NA7        <NA>
>>>> 2.4375             1860                 NA8        <NA>
>>>> 3.5625             1980                 NA9        <NA>
>>>> 4.6250             2100                 NA10       <NA>
>>>> 5.0000             2220                 NA11       <NA>
>>>> 5.0000             2340                 NA12       <NA>
>>>> 4.6250             2460                 NA13       <NA>
>>>> 3.5625             2580                 NA14       <NA>
>>>> 2.4375             2700                 NA15       <NA>
>>>> 1.3125             2820                 NA16       <NA>
>>>> 0.6250             2940                 NA17       <NA>
>>>> 0.2500             3060                 NA18       <NA>
>>>> 0.0625             3180                 NA19       <NA>
>>>> 0.0000             3300                 NA20       <NA>
>>>> 0.0000            18000                 NA
>>>>
>>>> Also, I am not sure how to go back to original format when I save the
>>>> file
>>>> again after a modification (for example after replacing a cell value)
>>>>
>>>> I tried saving the file again by using t (transpose) as given below
>>>>
>>>> write.csv(t(aaa), file ="samplefile_e.csv", row.names=T)
>>>>
>>>> but still, there are following issues in the saved file
>>>>
>>>>    1. messed up headers
>>>>    2. empty cells are replaced with NA
>>>>    3. when I open the file in a text editor all the values are shown as
>>>>    characters
>>>>
>>>> Thanks,
>>>> Mano
>>>>
>>>>         [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>
>>>
>

	[[alternative HTML version deleted]]


From @uy@n@cy @ending from gm@il@com  Thu Oct  4 19:06:39 2018
From: @uy@n@cy @ending from gm@il@com (Nancy S)
Date: Thu, 4 Oct 2018 13:06:39 -0400
Subject: [R] savehistory()
Message-ID: <CAHqCQvib9_d9Czkugz3z6iWStE5BwtLbSjpSUniiW=pyggPSBw@mail.gmail.com>

Hi,

I just  start to learn R, but I have problem to use "savehistory()"

When I run, it pops out "Error in .External2(C_savehistory, file) :
  'savehistory' is not currently implemented". I searched a little bit
online, but I still cannot figure out how to fix that.

thanks,
Suy

	[[alternative HTML version deleted]]


From @@r@h@go@lee @ending from gm@il@com  Thu Oct  4 19:23:07 2018
From: @@r@h@go@lee @ending from gm@il@com (Sarah Goslee)
Date: Thu, 4 Oct 2018 13:23:07 -0400
Subject: [R] savehistory()
In-Reply-To: <CAHqCQvib9_d9Czkugz3z6iWStE5BwtLbSjpSUniiW=pyggPSBw@mail.gmail.com>
References: <CAHqCQvib9_d9Czkugz3z6iWStE5BwtLbSjpSUniiW=pyggPSBw@mail.gmail.com>
Message-ID: <CAM_vjunHf8e+2eO8UNZt08rRJwPMHF7pe3jEHR1j8bXONDsK5g@mail.gmail.com>

Hi Suy,

It is very important to specify what OS and version of R you're using.

But I'm going to make a wild guess that you're using Mac, and that you
didn't read the documentation for savehistory() carefully.

"R.app, the console on macOS, has a separate and largely incompatible
history mechanism, which by default uses a file .Rapp.history and saves up
to 250 entries. These functions are not currently implemented there."

https://www.rdocumentation.org/packages/utils/versions/3.5.1/topics/savehistory
or
?savehistory

If my wild guess is wrong, then you'll need, at a minimum, to provide the
output of
sessionInfo()
for anyone to be able to help you.

Sarah

On Thu, Oct 4, 2018 at 1:11 PM Nancy S <suy.nacy at gmail.com> wrote:

> Hi,
>
> I just  start to learn R, but I have problem to use "savehistory()"
>
> When I run, it pops out "Error in .External2(C_savehistory, file) :
>   'savehistory' is not currently implemented". I searched a little bit
> online, but I still cannot figure out how to fix that.
>
> thanks,
> Suy
>
-- 
Sarah Goslee
http://www.functionaldiversity.org <http://www.functionaldiversity.org>

	[[alternative HTML version deleted]]


From ycding @ending from coh@org  Thu Oct  4 20:06:43 2018
From: ycding @ending from coh@org (Ding, Yuan Chun)
Date: Thu, 4 Oct 2018 18:06:43 +0000
Subject: [R] heatmap.2, adding a legend at bottom
Message-ID: <A86C6438FB909A409DDEF926277952B61102221A@PPWEXCH2KX14.coh.org>

Hi All,

I generated the attached heatmap using the following  R code and attached testfile.

I tried to move the legend to the bottom, Can anyone help me?  I have play for 3 hours and can not resolve the problem.

Thank  you,

Ding


----------------------------------------------------------------------------
png("heatmaps_test2.png",   # create PNG for the heat map
    width = 5*300,        # 5 x 300 pixels
    height = 5*300,
    res = 300,            # 300 pixels per inch
    pointsize = 8  # smaller font size
)

# lmat = rbind(c(0,0,4),c(3,1,2),c(0,0,5))
# #1.      RowSideColors;2.Heatmap;3.Row tree;4.Column tree;5.Color key
# lwid = c(0.8,0.15,7) # lwid controls the column width
# lhei = c(0.1,5.5,1) #lhei controls the row height


my_palette2 <- colorRampPalette(c("blue", "cyan4", "red"))(n = 299)
col_breaks = c(seq(-1.5,-1.1,length=100), # for bllue
               seq(-1.099,1.099,length=100),  # for green
               seq(1.1,1.5,length=100)) # for red
cols <- c("red", "black", "blue")
heatmap.2(as.matrix(testfile), key=T,
          #lmat=lmat, lwid=lwid, lhei=lhei,
          symkey=FALSE,#keysize=1, key.par =list(cex=0.25),
          key.xlab="Heatmap color key",
          key.title =" ",
          RowSideColors= cols[as.numeric(as.factor(allinfo.blood$Group))],
          density.info="none",  # turns off density plot inside color legend
          trace="none",         # turns off trace lines inside the heat map
          col=my_palette2, # use color palette defined earlier
          breaks=col_breaks,
          cexRow=1.4,
          labCol=" ", # default to colnames(x)
          #labRow=" ",
          #margins =c(12,9),
          #Colv="NA", # only draw a row dendrogram
          hclust=function(x) hclust(x,method="complete"),
          distfun=function(x) as.dist((1-cor(t(x)))/2)
          ) # using pearson correlation as distance
groups = levels(as.factor(allinfo.blood$Group))
legend(0.2,0.1, groups, col=cols, pch=15, ncol = 3, cex=1)
dev.off()

------------------------------------------------------------
-SECURITY/CONFIDENTIALITY WARNING-  

This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to receive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)
------------------------------------------------------------

-------------- next part --------------
A non-text attachment was scrubbed...
Name: heatmaps_test2.png
Type: image/png
Size: 37145 bytes
Desc: heatmaps_test2.png
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20181004/aa61a1d4/attachment.png>

From ycding @ending from coh@org  Thu Oct  4 20:18:33 2018
From: ycding @ending from coh@org (Ding, Yuan Chun)
Date: Thu, 4 Oct 2018 18:18:33 +0000
Subject: [R] heatmap.2, adding a legend at bottom
In-Reply-To: <A86C6438FB909A409DDEF926277952B61102221A@PPWEXCH2KX14.coh.org>
References: <A86C6438FB909A409DDEF926277952B61102221A@PPWEXCH2KX14.coh.org>
Message-ID: <A86C6438FB909A409DDEF926277952B611022246@PPWEXCH2KX14.coh.org>


Hi All,

I generated the attached heatmap using the following  R code and attached testfile.

I tried to move the legend to the bottom, Can anyone help me?  I have played for 3 hours and can not resolve the problem.

I realized that in the last email, I forgot to include the "Group" variable for legend. I added to the R code below.

Thank  you,

Ding


----------------------------------------------------------------------------
png("heatmaps_test2.png",   # create PNG for the heat map
    width = 5*300,        # 5 x 300 pixels
    height = 5*300,
    res = 300,            # 300 pixels per inch
    pointsize = 8  # smaller font size
)

# lmat = rbind(c(0,0,4),c(3,1,2),c(0,0,5))
# #1.      RowSideColors;2.Heatmap;3.Row tree;4.Column tree;5.Color key
# lwid = c(0.8,0.15,7) # lwid controls the column width # lhei = c(0.1,5.5,1) #lhei controls the row height


my_palette2 <- colorRampPalette(c("blue", "cyan4", "red"))(n = 299) col_breaks = c(seq(-1.5,-1.1,length=100), # for bllue
               seq(-1.099,1.099,length=100),  # for green
               seq(1.1,1.5,length=100)) # for red cols <- c("red", "black", "blue") heatmap.2(as.matrix(testfile), key=T,
          #lmat=lmat, lwid=lwid, lhei=lhei,
          symkey=FALSE,#keysize=1, key.par =list(cex=0.25),
          key.xlab="Heatmap color key",
          key.title =" ",
          RowSideColors= cols[as.numeric(as.factor(allinfo.blood$Group))],
          density.info="none",  # turns off density plot inside color legend
          trace="none",         # turns off trace lines inside the heat map
          col=my_palette2, # use color palette defined earlier
          breaks=col_breaks,
          cexRow=1.4,
          labCol=" ", # default to colnames(x)
          #labRow=" ",
          #margins =c(12,9),
          #Colv="NA", # only draw a row dendrogram
          hclust=function(x) hclust(x,method="complete"),
          distfun=function(x) as.dist((1-cor(t(x)))/2)
          ) # using pearson correlation as distance

Group <-c("Blood: Vector", "Blood: Vector", "Blood: E2", "Blood: E2",    
"Blood: E2+BP3",  "Blood: E2+BP3",  "Blood: Vector",  "Blood: Vector",
"Blood: E2", "Blood: E2", "Blood: E2+BP3",  "Blood: E2+BP3")

 groups = levels(as.factor(Group))
legend(0.2,0.1, groups, col=cols, pch=15, ncol = 3, cex=1)
dev.off()



------------------------------------------------------------
-SECURITY/CONFIDENTIALITY WARNING-  

This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to receive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)
------------------------------------------------------------

-------------- next part --------------
A non-text attachment was scrubbed...
Name: heatmaps_test2.png
Type: image/png
Size: 37145 bytes
Desc: heatmaps_test2.png
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20181004/14cbf315/attachment.png>

From dc@rl@on @ending from t@mu@edu  Thu Oct  4 21:08:53 2018
From: dc@rl@on @ending from t@mu@edu (David L Carlson)
Date: Thu, 4 Oct 2018 19:08:53 +0000
Subject: [R] heatmap.2, adding a legend at bottom
In-Reply-To: <A86C6438FB909A409DDEF926277952B611022246@PPWEXCH2KX14.coh.org>
References: <A86C6438FB909A409DDEF926277952B61102221A@PPWEXCH2KX14.coh.org>
 <A86C6438FB909A409DDEF926277952B611022246@PPWEXCH2KX14.coh.org>
Message-ID: <835b9ffdd4394972b9bc8c3eef6c05cc@tamu.edu>

It will take a bit of trial and error. Use this example as a guide. You will probably have to set the y coordinate to a negative value and include xpd=TRUE:

> data(mtcars)
> x  <- as.matrix(mtcars)
> heatmap.2(x)
> legend(.5, -.1, "Legend", xpd=TRUE)

----------------------------------------
David L Carlson
Department of Anthropology
Texas A&M University
College Station, TX 77843-4352

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Ding, Yuan Chun
Sent: Thursday, October 4, 2018 1:19 PM
To: r-help at r-project.org
Subject: Re: [R] heatmap.2, adding a legend at bottom


Hi All,

I generated the attached heatmap using the following  R code and attached testfile.

I tried to move the legend to the bottom, Can anyone help me?  I have played for 3 hours and can not resolve the problem.

I realized that in the last email, I forgot to include the "Group" variable for legend. I added to the R code below.

Thank  you,

Ding


----------------------------------------------------------------------------
png("heatmaps_test2.png",   # create PNG for the heat map
    width = 5*300,        # 5 x 300 pixels
    height = 5*300,
    res = 300,            # 300 pixels per inch
    pointsize = 8  # smaller font size
)

# lmat = rbind(c(0,0,4),c(3,1,2),c(0,0,5))
# #1.      RowSideColors;2.Heatmap;3.Row tree;4.Column tree;5.Color key
# lwid = c(0.8,0.15,7) # lwid controls the column width # lhei = c(0.1,5.5,1) #lhei controls the row height


my_palette2 <- colorRampPalette(c("blue", "cyan4", "red"))(n = 299) col_breaks = c(seq(-1.5,-1.1,length=100), # for bllue
               seq(-1.099,1.099,length=100),  # for green
               seq(1.1,1.5,length=100)) # for red cols <- c("red", "black", "blue") heatmap.2(as.matrix(testfile), key=T,
          #lmat=lmat, lwid=lwid, lhei=lhei,
          symkey=FALSE,#keysize=1, key.par =list(cex=0.25),
          key.xlab="Heatmap color key",
          key.title =" ",
          RowSideColors= cols[as.numeric(as.factor(allinfo.blood$Group))],
          density.info="none",  # turns off density plot inside color legend
          trace="none",         # turns off trace lines inside the heat map
          col=my_palette2, # use color palette defined earlier
          breaks=col_breaks,
          cexRow=1.4,
          labCol=" ", # default to colnames(x)
          #labRow=" ",
          #margins =c(12,9),
          #Colv="NA", # only draw a row dendrogram
          hclust=function(x) hclust(x,method="complete"),
          distfun=function(x) as.dist((1-cor(t(x)))/2)
          ) # using pearson correlation as distance

Group <-c("Blood: Vector", "Blood: Vector", "Blood: E2", "Blood: E2",    
"Blood: E2+BP3",  "Blood: E2+BP3",  "Blood: Vector",  "Blood: Vector",
"Blood: E2", "Blood: E2", "Blood: E2+BP3",  "Blood: E2+BP3")

 groups = levels(as.factor(Group))
legend(0.2,0.1, groups, col=cols, pch=15, ncol = 3, cex=1)
dev.off()



------------------------------------------------------------
-SECURITY/CONFIDENTIALITY WARNING-  

This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to receive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)


From ycding @ending from coh@org  Thu Oct  4 21:18:06 2018
From: ycding @ending from coh@org (Ding, Yuan Chun)
Date: Thu, 4 Oct 2018 19:18:06 +0000
Subject: [R] heatmap.2, adding a legend at bottom
In-Reply-To: <835b9ffdd4394972b9bc8c3eef6c05cc@tamu.edu>
References: <A86C6438FB909A409DDEF926277952B61102221A@PPWEXCH2KX14.coh.org>
 <A86C6438FB909A409DDEF926277952B611022246@PPWEXCH2KX14.coh.org>
 <835b9ffdd4394972b9bc8c3eef6c05cc@tamu.edu>
Message-ID: <A86C6438FB909A409DDEF926277952B6110222B8@PPWEXCH2KX14.coh.org>

Hi David,

Thank you so much!!  Problem resolved. xpd=TRUE does the trick to put a legend outside.

Ding

-----Original Message-----
From: David L Carlson [mailto:dcarlson at tamu.edu] 
Sent: Thursday, October 04, 2018 12:09 PM
To: Ding, Yuan Chun; r-help at r-project.org
Subject: RE: heatmap.2, adding a legend at bottom

It will take a bit of trial and error. Use this example as a guide. You will probably have to set the y coordinate to a negative value and include xpd=TRUE:

> data(mtcars)
> x  <- as.matrix(mtcars)
> heatmap.2(x)
> legend(.5, -.1, "Legend", xpd=TRUE)

----------------------------------------
David L Carlson
Department of Anthropology
Texas A&M University
College Station, TX 77843-4352

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Ding, Yuan Chun
Sent: Thursday, October 4, 2018 1:19 PM
To: r-help at r-project.org
Subject: Re: [R] heatmap.2, adding a legend at bottom


Hi All,

I generated the attached heatmap using the following  R code and attached testfile.

I tried to move the legend to the bottom, Can anyone help me?  I have played for 3 hours and can not resolve the problem.

I realized that in the last email, I forgot to include the "Group" variable for legend. I added to the R code below.

Thank  you,

Ding


----------------------------------------------------------------------------
png("heatmaps_test2.png",   # create PNG for the heat map
    width = 5*300,        # 5 x 300 pixels
    height = 5*300,
    res = 300,            # 300 pixels per inch
    pointsize = 8  # smaller font size
)

# lmat = rbind(c(0,0,4),c(3,1,2),c(0,0,5))
# #1.      RowSideColors;2.Heatmap;3.Row tree;4.Column tree;5.Color key
# lwid = c(0.8,0.15,7) # lwid controls the column width # lhei = c(0.1,5.5,1) #lhei controls the row height


my_palette2 <- colorRampPalette(c("blue", "cyan4", "red"))(n = 299) col_breaks = c(seq(-1.5,-1.1,length=100), # for bllue
               seq(-1.099,1.099,length=100),  # for green
               seq(1.1,1.5,length=100)) # for red cols <- c("red", "black", "blue") heatmap.2(as.matrix(testfile), key=T,
          #lmat=lmat, lwid=lwid, lhei=lhei,
          symkey=FALSE,#keysize=1, key.par =list(cex=0.25),
          key.xlab="Heatmap color key",
          key.title =" ",
          RowSideColors= cols[as.numeric(as.factor(allinfo.blood$Group))],
          density.info="none",  # turns off density plot inside color legend
          trace="none",         # turns off trace lines inside the heat map
          col=my_palette2, # use color palette defined earlier
          breaks=col_breaks,
          cexRow=1.4,
          labCol=" ", # default to colnames(x)
          #labRow=" ",
          #margins =c(12,9),
          #Colv="NA", # only draw a row dendrogram
          hclust=function(x) hclust(x,method="complete"),
          distfun=function(x) as.dist((1-cor(t(x)))/2)
          ) # using pearson correlation as distance

Group <-c("Blood: Vector", "Blood: Vector", "Blood: E2", "Blood: E2",    
"Blood: E2+BP3",  "Blood: E2+BP3",  "Blood: Vector",  "Blood: Vector",
"Blood: E2", "Blood: E2", "Blood: E2+BP3",  "Blood: E2+BP3")

 groups = levels(as.factor(Group))
legend(0.2,0.1, groups, col=cols, pch=15, ncol = 3, cex=1)
dev.off()



------------------------------------------------------------
-SECURITY/CONFIDENTIALITY WARNING-  

This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to receive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)


From ollyoxenfree1997 @ending from y@hoo@c@  Fri Oct  5 01:52:06 2018
From: ollyoxenfree1997 @ending from y@hoo@c@ (William Bell)
Date: Thu, 4 Oct 2018 23:52:06 +0000 (UTC)
Subject: [R] 
 Bug : Autocorrelation in sample drawn from stats::rnorm (hmh)
References: <1607055752.4873464.1538697126419.ref@mail.yahoo.com>
Message-ID: <1607055752.4873464.1538697126419@mail.yahoo.com>

Hi Hugo,
I've been able to replicate your bug, including for other distributions (runif, rexp, rgamma, etc) which shouldn't be surprising since they're probably all drawing from the same pseudo-random number generator. ?Interestingly, it does not seem to depend on the choice of seed, I am not sure why that is the case.
I'll point out first of all that the R-devel mailing list is perhaps better suited for this query, I'm fairly sure we're supposed to direct bug reports, etc there.
It is possible this is a known quantity but is tolerated, I could think of many reasons why that might be the case, not least of which being that as far as I know, the vast majority of Monte Carlo methods involve >>40 trials (which seems to be enough for the effect to disappear), with the possible exception of procedures for testing the power of statistical tests on small samples?
There might be more to be said, but I thought I'd just add what I could from playing around with it a little bit.
For anyone who wishes to give it a try, I suggest this implementation of the autocorrelation tester which is about 80 times faster:
DistributionAutocorrelation_new <- function(SampleSize)????{
? ? Cor <- replicate(1e5, function() {X <- rnorm(SampleSize)? ? return(cor(X[-1], X[-length(X)]))})? ? return(Cor)}
I have the same Stats package version installed.
- (Thomas) William BellHons BSc Candidate (Biology and Mathematics)BA Candidate (Philosophy)McMaster University
# Hi,#?#?# I just noticed the following bug:# ??# ? When we draw a random sample using the function stats::rnorm, there?# should be not auto-correlation in the sample. But their is some?# auto-correlation _when the sample that is drawn is small_.#?# I describe the problem using two functions:# ??# ? DistributionAutocorrelation_Unexpected which as the wrong behavior :?# ? _when drawing some small samples using rnorm, there is generally a?# strong negative auto-correlation in the sample_.#?# and#?# DistributionAutocorrelation_Expected which illustrate the expected behavior#?#?#?# *Unexpected : *# ??# ? DistributionAutocorrelation_Unexpected = function(SampleSize){# ? ? Cor = NULL# ? ? for(repetition in 1:1e5){# ? ? ? X = rnorm(SampleSize)# ? ? ? Cor[repetition] = cor(X[-1],X[-length(X)])# ? ? }# ? ? return(Cor)# ? }#?# par(mfrow=c(3,3))# for(SampleSize_ in c(4,5,6,7,8,10,15,20,50)){# ? hist(DistributionAutocorrelation_Unexpected(SampleSize_),col='grey',main=paste0('SampleSize=',SampleSize_))?# ? ; abline(v=0,col=2)# }#?# output:# ??# ??# ? *Expected**:*# ??# ? DistributionAutocorrelation_Expected = function(SampleSize){# ? ? Cor = NULL# ? ? for(repetition in 1:1e5){# ? ? ? X = rnorm(SampleSize)# ? ? ? * ? ?Cor[repetition] = cor(sample(X[-1]),sample(X[-length(X)]))*# ? ? }# ? ? return(Cor)# ? }#?# par(mfrow=c(3,3))# for(SampleSize_ in c(4,5,6,7,8,10,15,20,50)){# ? hist(DistributionAutocorrelation_Expected(SampleSize_),col='grey',main=paste0('SampleSize=',SampleSize_))?# ? ; abline(v=0,col=2)# }#?#?#?#?# Some more information you might need:# ??# ??# ? packageDescription("stats")# Package: stats# Version: 3.5.1# Priority: base# Title: The R Stats Package# Author: R Core Team and contributors worldwide# Maintainer: R Core Team <R-core at r-project.org># ? Description: R statistical functions.# License: Part of R 3.5.1# Imports: utils, grDevices, graphics# Suggests: MASS, Matrix, SuppDists, methods, stats4# NeedsCompilation: yes# Built: R 3.5.1; x86_64-pc-linux-gnu; 2018-07-03 02:12:37 UTC; unix#?# Thanks for correcting that.#?# fill free to ask any further information you would need.#?# cheers,#?# hugo#?#?# --?# ? - no title specified#?# Hugo Math?-Hubert#?# ATER#?# Laboratoire Interdisciplinaire des Environnements Continentaux (LIEC)#?# UMR 7360 CNRS - ?B?t IBISE#?# Universit? de Lorraine ?- ?UFR SciFA#?# 8, Rue du G?n?ral Delestraint#?# F-57070 METZ#?# +33(0)9 77 21 66 66# - - - - - - - - - - - - - - - - - -# ? Les r?flexions naissent dans les doutes et meurent dans les certitudes.?# Les doutes sont donc un signe de force et les certitudes un signe de?# faiblesse. La plupart des gens sont pourtant certains du contraire.# - - - - - - - - - - - - - - - - - -# ? Thoughts appear from doubts and die in convictions. Therefore, doubts?# are an indication of strength and convictions an indication of weakness.?# Yet, most people believe the opposite.
	[[alternative HTML version deleted]]


From l@h@ndke @ending from tu-br@un@chweig@de  Fri Oct  5 07:09:57 2018
From: l@h@ndke @ending from tu-br@un@chweig@de (Lisa Handke)
Date: Fri, 5 Oct 2018 07:09:57 +0200
Subject: [R] Help plotting recurrence matrix
Message-ID: <008401d45c69$ac18e0a0$044aa1e0$@tu-braunschweig.de>

Hi everyone,

 

I am trying to plot a recurrence matrix (package: nonlinearTseries).

 

This is my command, which gives the plot as found in the attached image
(example 1):

 

Team1 <- read.delim("Team1.txt", header =TRUE)

Team1_plot <- rqa(time.series = Team1$Kat5, embedding.dim = 1, time.lag = 1,

                radius = 0.1,lmin =2, vmin =2, distanceToBorder = 2, save.RM
= TRUE,

                do.plot = FALSE )

 

RP <- Team1_plot$recurrence.matrix

image (RP)

 

My first problem

 

1.	I cannot change the labeling of the axis limits

 

While this command helps rotate the datapoints WITHIN the plot as desired
(example 2):

 

image(t(RP[,ncol(RP):1])) # rotate matrix by 90? and plot

 

the labeling of the axes is still wrong (the y-axis still starts with 223).
Adding parameters such as ylim or ymax has not helped.

 

2.	I am trying to convert it into a colour-coded image. I have
categories ranging from numbers 1 to 5 (as well as random unique larger
numbers referring to nonrecurrent values). With some help, I have managed to
assign my numeric values in my data to colours using this function:

 

RP2 <- as.matrix(RP)*1

TS <- Team1$Kat5

for (i in seq(1,dim(RP2)[1])) {

  for (j in seq(1,dim(RP2)[1])) {

    if (RP2[i,j] == 1 & TS[i] < 6) { # test if recurrence is present in RP
AND corresponding value in the time-series is < 6, in which case that
Recurrent is coded according to the value in the time series

      RP2[i,j] <- TS[i]

    } else if (RP2[i,j] == 1 & TS[i] < 6) { # if the above is not the case,
test if recurrence is present in RP AND corresponding value in the
time-series is > 5, in which case that recurrence is deleted from the RP

      RP2[i,j] <- 0

    }

  }

}

 

image.scale(RP2, zlim=c(1,5),col= c("yellow", "red", "blue", "green",
"orange")

 

My problem is that the image I receive from doing this (see attachment) is
scaled from 0 to 1 and I seem to be incapable of understanding why this is
and how to change it. Once again, I have tried using y and x lim as well as
max functions, but have not managed to attain any results.

 

I realize these are amateur questions but I have been struggling with this
for quite some time and would really appreciate any help I can get.

 

Thanks and best regards,

Lisa

 


From hugomh @ending from gmx@fr  Fri Oct  5 09:45:10 2018
From: hugomh @ending from gmx@fr (hmh)
Date: Fri, 5 Oct 2018 09:45:10 +0200
Subject: [R] 
 Bug : Autocorrelation in sample drawn from stats::rnorm (hmh)
In-Reply-To: <1607055752.4873464.1538697126419@mail.yahoo.com>
References: <1607055752.4873464.1538697126419.ref@mail.yahoo.com>
 <1607055752.4873464.1538697126419@mail.yahoo.com>
Message-ID: <f5169c3a-cd6b-1ba4-9701-4119f4123db3@gmx.fr>

Hi,

Thanks William for this fast answer, and sorry for sending the 1st mail 
to r-help instead to r-devel.


I noticed that bug while I was simulating many small random walks using 
c(0,cumsum(rnorm(10))). Then the negative auto-correlation was inducing 
a muchsmaller space visited by the random walks than expected if there 
would be no auto-correlation in the samples.


The code I provided and you optimized was only provided to illustrated 
and investigate that bug.


It is really worrying that most of the R distributions are affected by 
this bug !!!!

What I did should have been one of the first check done for _*each*_ 
distributions by the developers of these functions !


And if as you suggested this is a "tolerated" _error_ of the algorithm, 
I do think this is a bad choice, but any way, this should have been 
mentioned in the documentations of the functions !!


cheers,

hugo


On 05/10/2018 01:52, William Bell wrote:
> Hi Hugo,
>
> I've been able to replicate your bug, including for other 
> distributions (runif, rexp, rgamma, etc) which shouldn't be surprising 
> since they're probably all drawing from the same pseudo-random number 
> generator. ?Interestingly, it does not seem to depend on the choice of 
> seed, I am not sure why that is the case.
>
> I'll point out first of all that the R-devel mailing list is perhaps 
> better suited for this query, I'm fairly sure we're supposed to direct 
> bug reports, etc there.
>
> It is possible this is a known quantity but is tolerated, I could 
> think of many reasons why that might be the case, not least of which 
> being that as far as I know, the vast majority of Monte Carlo methods 
> involve >>40 trials (which seems to be enough for the effect to 
> disappear), with the possible exception of procedures for testing the 
> power of statistical tests on small samples?
>
> There might be more to be said, but I thought I'd just add what I 
> could from playing around with it a little bit.
>
> For anyone who wishes to give it a try, I suggest this implementation 
> of the autocorrelation tester which is about 80 times faster:
>
> DistributionAutocorrelation_new <- function(SampleSize)????{
> ? ? Cor <- replicate(1e5, function() {X <- rnorm(SampleSize)
> ? ? return(cor(X[-1], X[-length(X)]))})
> ? ? return(Cor)
> }
>
> I have the same Stats package version installed.
>
> - (Thomas) William Bell
> Hons BSc Candidate (Biology and Mathematics)
> BA Candidate (Philosophy)
> McMaster University
>
> # Hi,
> #
> #
> # I just noticed the following bug:
> #
> # ? When we draw a random sample using the function stats::rnorm, there
> # should be not auto-correlation in the sample. But their is some
> # auto-correlation _when the sample that is drawn is small_.
> #
> # I describe the problem using two functions:
> #
> # ? DistributionAutocorrelation_Unexpected which as the wrong behavior :
> # ? _when drawing some small samples using rnorm, there is generally a
> # strong negative auto-correlation in the sample_.
> #
> # and
> #
> # DistributionAutocorrelation_Expected which illustrate the expected 
> behavior
> #
> #
> #
> # *Unexpected : *
> #
> # ? DistributionAutocorrelation_Unexpected = function(SampleSize){
> # ? ? Cor = NULL
> # ? ? for(repetition in 1:1e5){
> # ? ? ? X = rnorm(SampleSize)
> # ? ? ? Cor[repetition] = cor(X[-1],X[-length(X)])
> # ? ? }
> # ? ? return(Cor)
> # ? }
> #
> # par(mfrow=c(3,3))
> # for(SampleSize_ in c(4,5,6,7,8,10,15,20,50)){
> # 
> hist(DistributionAutocorrelation_Unexpected(SampleSize_),col='grey',main=paste0('SampleSize=',SampleSize_)) 
>
> # ? ; abline(v=0,col=2)
> # }
> #
> # output:
> #
> #
> # ? *Expected**:*
> #
> # ? DistributionAutocorrelation_Expected = function(SampleSize){
> # ? ? Cor = NULL
> # ? ? for(repetition in 1:1e5){
> # ? ? ? X = rnorm(SampleSize)
> # ? ? ? * ? ?Cor[repetition] = cor(sample(X[-1]),sample(X[-length(X)]))*
> # ? ? }
> # ? ? return(Cor)
> # ? }
> #
> # par(mfrow=c(3,3))
> # for(SampleSize_ in c(4,5,6,7,8,10,15,20,50)){
> # 
> hist(DistributionAutocorrelation_Expected(SampleSize_),col='grey',main=paste0('SampleSize=',SampleSize_)) 
>
> # ? ; abline(v=0,col=2)
> # }
> #
> #
> #
> #
> # Some more information you might need:
> #
> #
> # ? packageDescription("stats")
> # Package: stats
> # Version: 3.5.1
> # Priority: base
> # Title: The R Stats Package
> # Author: R Core Team and contributors worldwide
> # Maintainer: R Core Team <R-core at r-project.org>
> # ? Description: R statistical functions.
> # License: Part of R 3.5.1
> # Imports: utils, grDevices, graphics
> # Suggests: MASS, Matrix, SuppDists, methods, stats4
> # NeedsCompilation: yes
> # Built: R 3.5.1; x86_64-pc-linux-gnu; 2018-07-03 02:12:37 UTC; unix
> #
> # Thanks for correcting that.
> #
> # fill free to ask any further information you would need.
> #
> # cheers,
> #
> # hugo
> #
> #
> # --
> # ? - no title specified
> #
> # Hugo Math?-Hubert
> #
> # ATER
> #
> # Laboratoire Interdisciplinaire des Environnements Continentaux (LIEC)
> #
> # UMR 7360 CNRS - ?B?t IBISE
> #
> # Universit? de Lorraine ?- ?UFR SciFA
> #
> # 8, Rue du G?n?ral Delestraint
> #
> # F-57070 METZ
> #
> # +33(0)9 77 21 66 66
> # - - - - - - - - - - - - - - - - - -
> # ? Les r?flexions naissent dans les doutes et meurent dans les 
> certitudes.
> # Les doutes sont donc un signe de force et les certitudes un signe de
> # faiblesse. La plupart des gens sont pourtant certains du contraire.
> # - - - - - - - - - - - - - - - - - -
> # ? Thoughts appear from doubts and die in convictions. Therefore, doubts
> # are an indication of strength and convictions an indication of 
> weakness.
> # Yet, most people believe the opposite.

-- 
- no title specified

Hugo Math?-Hubert

ATER

Laboratoire Interdisciplinaire des Environnements Continentaux (LIEC)

UMR 7360 CNRS - ?B?t IBISE

Universit? de Lorraine ?- ?UFR SciFA

8, Rue du G?n?ral Delestraint

F-57070 METZ

+33(0)9 77 21 66 66
- - - - - - - - - - - - - - - - - -
Les r?flexions naissent dans les doutes et meurent dans les certitudes. 
Les doutes sont donc un signe de force et les certitudes un signe de 
faiblesse. La plupart des gens sont pourtant certains du contraire.
- - - - - - - - - - - - - - - - - -
Thoughts appear from doubts and die in convictions. Therefore, doubts 
are an indication of strength and convictions an indication of weakness. 
Yet, most people believe the opposite.


	[[alternative HTML version deleted]]


From j@n@@nn@ert @ending from u@ntwerpen@be  Fri Oct  5 09:58:15 2018
From: j@n@@nn@ert @ending from u@ntwerpen@be (Annaert Jan)
Date: Fri, 5 Oct 2018 07:58:15 +0000
Subject: [R] 
 Bug : Autocorrelation in sample drawn from stats::rnorm (hmh)
In-Reply-To: <f5169c3a-cd6b-1ba4-9701-4119f4123db3@gmx.fr>
References: <1607055752.4873464.1538697126419.ref@mail.yahoo.com>
 <1607055752.4873464.1538697126419@mail.yahoo.com>
 <f5169c3a-cd6b-1ba4-9701-4119f4123db3@gmx.fr>
Message-ID: <61E0376C-8813-4678-B4AF-12D57017624C@ua.ac.be>

On 05/10/2018, 09:45, "R-help on behalf of hmh" <r-help-bounces at r-project.org on behalf of hugomh at gmx.fr> wrote:

    Hi,
    
    Thanks William for this fast answer, and sorry for sending the 1st mail 
    to r-help instead to r-devel.
    
    
    I noticed that bug while I was simulating many small random walks using 
    c(0,cumsum(rnorm(10))). Then the negative auto-correlation was inducing 
    a muchsmaller space visited by the random walks than expected if there 
    would be no auto-correlation in the samples.
    
    
    The code I provided and you optimized was only provided to illustrated 
    and investigate that bug.
    
    
    It is really worrying that most of the R distributions are affected by 
    this bug !!!!
    
    What I did should have been one of the first check done for _*each*_ 
    distributions by the developers of these functions !
    
    
    And if as you suggested this is a "tolerated" _error_ of the algorithm, 
    I do think this is a bad choice, but any way, this should have been 
    mentioned in the documentations of the functions !!
    
    
    cheers,
    
    hugo
 
This is not a bug. You have simply rediscovered the finite-sample bias in the sample autocorrelation coefficient, known at least since
Kendall, M. G. (1954). Note on bias in the estimation of autocorrelation. Biometrika, 41(3-4), 403-404. 

The bias is approximately -1/T, with T sample size, which explains why it seems to disappear in the larger sample sizes you consider.

Jan


From hugomh @ending from gmx@fr  Fri Oct  5 10:36:58 2018
From: hugomh @ending from gmx@fr (hmh)
Date: Fri, 5 Oct 2018 10:36:58 +0200
Subject: [R] 
 Bug : Autocorrelation in sample drawn from stats::rnorm (hmh)
In-Reply-To: <ABD057D3-5E10-44B4-B4DD-0FB04D475B52@ua.ac.be>
References: <1607055752.4873464.1538697126419.ref@mail.yahoo.com>
 <1607055752.4873464.1538697126419@mail.yahoo.com>
 <f5169c3a-cd6b-1ba4-9701-4119f4123db3@gmx.fr>
 <61E0376C-8813-4678-B4AF-12D57017624C@ua.ac.be>
 <aa15aaef-d56c-e44a-e618-61c69e9b36a7@gmx.fr>
 <ABD057D3-5E10-44B4-B4DD-0FB04D475B52@ua.ac.be>
Message-ID: <5154ab19-d82c-ca24-676f-7eaeb03196f0@gmx.fr>

On 05/10/2018 10:28, Annaert Jan wrote:
> you discard any time series structure;
But that is PRECISELY what a call a bug:
There should not be any "time series structure" in the output or rnorm, 
runif and so on but there is one.

rnorm(N,0,1)
should give on average the same output as
sample(rnorm(N,0,1))

Which is not the case. rnorm(N,0,1) should draw INDEPENDENT samples i.e. 
without time series structure !


-- 
- no title specified

Hugo Math?-Hubert

ATER

Laboratoire Interdisciplinaire des Environnements Continentaux (LIEC)

UMR 7360 CNRS - ?B?t IBISE

Universit? de Lorraine ?- ?UFR SciFA

8, Rue du G?n?ral Delestraint

F-57070 METZ

+33(0)9 77 21 66 66
- - - - - - - - - - - - - - - - - -
Les r?flexions naissent dans les doutes et meurent dans les certitudes. 
Les doutes sont donc un signe de force et les certitudes un signe de 
faiblesse. La plupart des gens sont pourtant certains du contraire.
- - - - - - - - - - - - - - - - - -
Thoughts appear from doubts and die in convictions. Therefore, doubts 
are an indication of strength and convictions an indication of weakness. 
Yet, most people believe the opposite.


	[[alternative HTML version deleted]]


From Anne@Ch@tton @ending from hcuge@ch  Fri Oct  5 10:45:51 2018
From: Anne@Ch@tton @ending from hcuge@ch (CHATTON Anne)
Date: Fri, 5 Oct 2018 08:45:51 +0000
Subject: [R] Strange paradox
Message-ID: <a12441c953ba4d5ab8a21c3693e84533@wexchprod08.huge.ad.hcuge.ch>

Hello,

I am currently analysed two nested models using the same sample. Both the simpler model (Model 1 ~ x1 + x2) and the more complex model (Model 2 ~ x1 + x2 + x3 + x4) yield the same adjusted R-square. Yet the p-value associated with the deviance statistic is highly significant (p=0.0047), suggesting that the confounders (x3 and x4) account for the prediction of the dependent variable.

Does anyone have an explanation of this strange paradox?

Thank you for any suggestion.

Anne


From p@uljohn32 @ending from gm@il@com  Fri Oct  5 10:46:50 2018
From: p@uljohn32 @ending from gm@il@com (Paul Johnson)
Date: Fri, 5 Oct 2018 03:46:50 -0500
Subject: [R] 
 Problems to obtain standardized betas in multiply-imputed data
In-Reply-To: <1b906c9b735b4d428ae528ef6609f74e@wexchprod08.huge.ad.hcuge.ch>
References: <1b906c9b735b4d428ae528ef6609f74e@wexchprod08.huge.ad.hcuge.ch>
Message-ID: <CAErODj877awdC5W66cBegG9xLn43_Y-EeOy+bw6+FOFTp09EuQ@mail.gmail.com>

Greetings.
I would adjust approach  to calculate standardized estimates for each
imputed set. Then summarize them . The way you are doing it here implies
that standardization concept applies to model list, which seems doubtful.
The empirical std. dev. of the variables differs among imputed data sets,
after all.

I suppose I mean to say lm.beta is not intended to receive a list of
regressions. Put standardization in the with() work done on each imputed
set. I suspect it is as easy as putting lm.beta in there. If there is
trouble, I have a standardize function in the rockchalk package. Unlike
lm.beta, it actually standardizes variables and runs regression. lm.beta
resales coefficients instead.

Paul Johnson
University of Kansas

On Wed, Sep 26, 2018, 5:03 AM CHATTON Anne via R-help <r-help at r-project.org>
wrote:

> Dear all,
>
> I am having problems in obtaining standardized betas on a multiply-imputed
> data set. Here are the codes I used :
> imp = mice(data, 5, maxit=10, seed=42, print=FALSE)
> FitImp <- with(imp,lm(y ~ x1 + x2 + x3))
> Up to here everything is fine. But when I ask for the standardized
> coefficients of the multiply-imputed regressions using this command :
> sdBeta <- lm.beta(FitImp)
> I get the following error message:
> Error in b * sx : argument non num?rique pour un op?rateur binaire
>
> Can anyone help me with this please?
>
> Anne
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From deep@y@n@@@rk@r @ending from gm@il@com  Fri Oct  5 11:16:47 2018
From: deep@y@n@@@rk@r @ending from gm@il@com (Deepayan Sarkar)
Date: Fri, 5 Oct 2018 14:46:47 +0530
Subject: [R] 
 Bug : Autocorrelation in sample drawn from stats::rnorm (hmh)
In-Reply-To: <5154ab19-d82c-ca24-676f-7eaeb03196f0@gmx.fr>
References: <1607055752.4873464.1538697126419.ref@mail.yahoo.com>
 <1607055752.4873464.1538697126419@mail.yahoo.com>
 <f5169c3a-cd6b-1ba4-9701-4119f4123db3@gmx.fr>
 <61E0376C-8813-4678-B4AF-12D57017624C@ua.ac.be>
 <aa15aaef-d56c-e44a-e618-61c69e9b36a7@gmx.fr>
 <ABD057D3-5E10-44B4-B4DD-0FB04D475B52@ua.ac.be>
 <5154ab19-d82c-ca24-676f-7eaeb03196f0@gmx.fr>
Message-ID: <CADfFDC49X87yVfjVjBer3prLnuy5SaP-U+ekxiyHhBaY_RKvUw@mail.gmail.com>

On Fri, Oct 5, 2018 at 2:07 PM hmh <hugomh at gmx.fr> wrote:
>
> On 05/10/2018 10:28, Annaert Jan wrote:
> > you discard any time series structure;
> But that is PRECISELY what a call a bug:
> There should not be any "time series structure" in the output or rnorm,
> runif and so on but there is one.
>
> rnorm(N,0,1)
> should give on average the same output as
> sample(rnorm(N,0,1))

Agreed, but that is not what your code is testing. You seem to think
that something much more specific should be true; namely,

X[1:10] ~ iid normal, then

cor(X[1:9], X[2:10])

and

cor(sample(X[-1]), sample(X[-10]))

should have the same distribution. This is not at all obvious, and in
fact not true.

Please check the reference you have been pointed to. Here is a related
article in the same volume:

https://www.jstor.org/stable/2332719

-Deepayan


> Which is not the case. rnorm(N,0,1) should draw INDEPENDENT samples i.e.
> without time series structure !
>
>
> --
> - no title specified
>
> Hugo Math?-Hubert
>
> ATER
>
> Laboratoire Interdisciplinaire des Environnements Continentaux (LIEC)
>
> UMR 7360 CNRS -  B?t IBISE
>
> Universit? de Lorraine  -  UFR SciFA
>
> 8, Rue du G?n?ral Delestraint
>
> F-57070 METZ
>
> +33(0)9 77 21 66 66
> - - - - - - - - - - - - - - - - - -
> Les r?flexions naissent dans les doutes et meurent dans les certitudes.
> Les doutes sont donc un signe de force et les certitudes un signe de
> faiblesse. La plupart des gens sont pourtant certains du contraire.
> - - - - - - - - - - - - - - - - - -
> Thoughts appear from doubts and die in convictions. Therefore, doubts
> are an indication of strength and convictions an indication of weakness.
> Yet, most people believe the opposite.
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From hugomh @ending from gmx@fr  Fri Oct  5 11:32:36 2018
From: hugomh @ending from gmx@fr (hmh)
Date: Fri, 5 Oct 2018 11:32:36 +0200
Subject: [R] 
 Bug : Autocorrelation in sample drawn from stats::rnorm (hmh)
In-Reply-To: <CADfFDC49X87yVfjVjBer3prLnuy5SaP-U+ekxiyHhBaY_RKvUw@mail.gmail.com>
References: <1607055752.4873464.1538697126419.ref@mail.yahoo.com>
 <1607055752.4873464.1538697126419@mail.yahoo.com>
 <f5169c3a-cd6b-1ba4-9701-4119f4123db3@gmx.fr>
 <61E0376C-8813-4678-B4AF-12D57017624C@ua.ac.be>
 <aa15aaef-d56c-e44a-e618-61c69e9b36a7@gmx.fr>
 <ABD057D3-5E10-44B4-B4DD-0FB04D475B52@ua.ac.be>
 <5154ab19-d82c-ca24-676f-7eaeb03196f0@gmx.fr>
 <CADfFDC49X87yVfjVjBer3prLnuy5SaP-U+ekxiyHhBaY_RKvUw@mail.gmail.com>
Message-ID: <50bfae14-5049-222b-bb30-0a985710a4ef@gmx.fr>

I got it !


thanks and sorry for annoying you with that.


have a nice day,

hugo


On 05/10/2018 11:16, Deepayan Sarkar wrote:
> On Fri, Oct 5, 2018 at 2:07 PM hmh <hugomh at gmx.fr> wrote:
>> On 05/10/2018 10:28, Annaert Jan wrote:
>>> you discard any time series structure;
>> But that is PRECISELY what a call a bug:
>> There should not be any "time series structure" in the output or rnorm,
>> runif and so on but there is one.
>>
>> rnorm(N,0,1)
>> should give on average the same output as
>> sample(rnorm(N,0,1))
> Agreed, but that is not what your code is testing. You seem to think
> that something much more specific should be true; namely,
>
> X[1:10] ~ iid normal, then
>
> cor(X[1:9], X[2:10])
>
> and
>
> cor(sample(X[-1]), sample(X[-10]))
>
> should have the same distribution. This is not at all obvious, and in
> fact not true.
>
> Please check the reference you have been pointed to. Here is a related
> article in the same volume:
>
> https://www.jstor.org/stable/2332719
>
> -Deepayan
>
>
>> Which is not the case. rnorm(N,0,1) should draw INDEPENDENT samples i.e.
>> without time series structure !
>>
>>
>> --
>> - no title specified
>>
>> Hugo Math?-Hubert
>>
>> ATER
>>
>> Laboratoire Interdisciplinaire des Environnements Continentaux (LIEC)
>>
>> UMR 7360 CNRS -  B?t IBISE
>>
>> Universit? de Lorraine  -  UFR SciFA
>>
>> 8, Rue du G?n?ral Delestraint
>>
>> F-57070 METZ
>>
>> +33(0)9 77 21 66 66
>> - - - - - - - - - - - - - - - - - -
>> Les r?flexions naissent dans les doutes et meurent dans les certitudes.
>> Les doutes sont donc un signe de force et les certitudes un signe de
>> faiblesse. La plupart des gens sont pourtant certains du contraire.
>> - - - - - - - - - - - - - - - - - -
>> Thoughts appear from doubts and die in convictions. Therefore, doubts
>> are an indication of strength and convictions an indication of weakness.
>> Yet, most people believe the opposite.
>>
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.

-- 
- no title specified

Hugo Math?-Hubert

ATER

Laboratoire Interdisciplinaire des Environnements Continentaux (LIEC)

UMR 7360 CNRS - ?B?t IBISE

Universit? de Lorraine ?- ?UFR SciFA

8, Rue du G?n?ral Delestraint

F-57070 METZ

+33(0)9 77 21 66 66
- - - - - - - - - - - - - - - - - -
Les r?flexions naissent dans les doutes et meurent dans les certitudes. 
Les doutes sont donc un signe de force et les certitudes un signe de 
faiblesse. La plupart des gens sont pourtant certains du contraire.
- - - - - - - - - - - - - - - - - -
Thoughts appear from doubts and die in convictions. Therefore, doubts 
are an indication of strength and convictions an indication of weakness. 
Yet, most people believe the opposite.


	[[alternative HTML version deleted]]


From hugomh @ending from gmx@fr  Fri Oct  5 10:11:53 2018
From: hugomh @ending from gmx@fr (hmh)
Date: Fri, 5 Oct 2018 10:11:53 +0200
Subject: [R] 
 Bug : Autocorrelation in sample drawn from stats::rnorm (hmh)
In-Reply-To: <61E0376C-8813-4678-B4AF-12D57017624C@ua.ac.be>
References: <1607055752.4873464.1538697126419.ref@mail.yahoo.com>
 <1607055752.4873464.1538697126419@mail.yahoo.com>
 <f5169c3a-cd6b-1ba4-9701-4119f4123db3@gmx.fr>
 <61E0376C-8813-4678-B4AF-12D57017624C@ua.ac.be>
Message-ID: <aa15aaef-d56c-e44a-e618-61c69e9b36a7@gmx.fr>

Nope.


This IS a bug:

_*The negative auto-correlation mostly disappear when I randomize small 
samples using the R function '*__*sample*__*'.*_


Please check thoroughly the code of the 1st mail I sent, there should be 
no difference between the two R functions I wrote to illustrate the bug.

The two functions that should produce the same output if there would be 
no bug are 'DistributionAutocorrelation_Unexpected' and 
'DistributionAutocorrelation_Expected'.

_/Please take the time to compare there output!!/_

The finite-sample bias in the sample autocorrelation coefficient you 
mention should affect them in the same manner. This bias is not the only 
phenomenon at work, *_there is ALSO as BUG !_*


Thanks


The first mail I sent is below :

_ _ _

Hi,


I just noticed the following bug:

When we draw a random sample using the function stats::rnorm, there 
should be not auto-correlation in the sample. But their is some 
auto-correlation _when the sample that is drawn is small_.

I describe the problem using two functions:

DistributionAutocorrelation_Unexpected which as the wrong behavior : 
_when drawing some small samples using rnorm, there is generally a 
strong negative auto-correlation in the sample_.

and

DistributionAutocorrelation_Expected which illustrate the expected behavior



*Unexpected : *

DistributionAutocorrelation_Unexpected = function(SampleSize){
 ? Cor = NULL
 ? for(repetition in 1:1e5){
 ??? X = rnorm(SampleSize)
 ??? Cor[repetition] = cor(X[-1],X[-length(X)])
 ? }
 ? return(Cor)
}

par(mfrow=c(3,3))
for(SampleSize_ in c(4,5,6,7,8,10,15,20,50)){
hist(DistributionAutocorrelation_Unexpected(SampleSize_),col='grey',main=paste0('SampleSize=',SampleSize_)) 
; abline(v=0,col=2)
}

output:


*Expected**:*

DistributionAutocorrelation_Expected = function(SampleSize){
 ? Cor = NULL
 ? for(repetition in 1:1e5){
 ??? X = rnorm(SampleSize)
*??? Cor[repetition] = cor(sample(X[-1]),sample(X[-length(X)]))*
 ? }
 ? return(Cor)
}

par(mfrow=c(3,3))
for(SampleSize_ in c(4,5,6,7,8,10,15,20,50)){
hist(DistributionAutocorrelation_Expected(SampleSize_),col='grey',main=paste0('SampleSize=',SampleSize_)) 
; abline(v=0,col=2)
}




Some more information you might need:


packageDescription("stats")
Package: stats
Version: 3.5.1
Priority: base
Title: The R Stats Package
Author: R Core Team and contributors worldwide
Maintainer: R Core Team <R-core at r-project.org>
Description: R statistical functions.
License: Part of R 3.5.1
Imports: utils, grDevices, graphics
Suggests: MASS, Matrix, SuppDists, methods, stats4
NeedsCompilation: yes
Built: R 3.5.1; x86_64-pc-linux-gnu; 2018-07-03 02:12:37 UTC; unix

Thanks for correcting that.

fill free to ask any further information you would need.

cheers,

hugo






On 05/10/2018 09:58, Annaert Jan wrote:
> On 05/10/2018, 09:45, "R-help on behalf of hmh" <r-help-bounces at r-project.org on behalf of hugomh at gmx.fr> wrote:
>
>      Hi,
>      
>      Thanks William for this fast answer, and sorry for sending the 1st mail
>      to r-help instead to r-devel.
>      
>      
>      I noticed that bug while I was simulating many small random walks using
>      c(0,cumsum(rnorm(10))). Then the negative auto-correlation was inducing
>      a muchsmaller space visited by the random walks than expected if there
>      would be no auto-correlation in the samples.
>      
>      
>      The code I provided and you optimized was only provided to illustrated
>      and investigate that bug.
>      
>      
>      It is really worrying that most of the R distributions are affected by
>      this bug !!!!
>      
>      What I did should have been one of the first check done for _*each*_
>      distributions by the developers of these functions !
>      
>      
>      And if as you suggested this is a "tolerated" _error_ of the algorithm,
>      I do think this is a bad choice, but any way, this should have been
>      mentioned in the documentations of the functions !!
>      
>      
>      cheers,
>      
>      hugo
>   
> This is not a bug. You have simply rediscovered the finite-sample bias in the sample autocorrelation coefficient, known at least since
> Kendall, M. G. (1954). Note on bias in the estimation of autocorrelation. Biometrika, 41(3-4), 403-404.
>
> The bias is approximately -1/T, with T sample size, which explains why it seems to disappear in the larger sample sizes you consider.
>
> Jan
>

-- 
- no title specified

Hugo Math?-Hubert

ATER

Laboratoire Interdisciplinaire des Environnements Continentaux (LIEC)

UMR 7360 CNRS - ?B?t IBISE

Universit? de Lorraine ?- ?UFR SciFA

8, Rue du G?n?ral Delestraint

F-57070 METZ

+33(0)9 77 21 66 66
- - - - - - - - - - - - - - - - - -
Les r?flexions naissent dans les doutes et meurent dans les certitudes. 
Les doutes sont donc un signe de force et les certitudes un signe de 
faiblesse. La plupart des gens sont pourtant certains du contraire.
- - - - - - - - - - - - - - - - - -
Thoughts appear from doubts and die in convictions. Therefore, doubts 
are an indication of strength and convictions an indication of weakness. 
Yet, most people believe the opposite.


From j@n@@nn@ert @ending from u@ntwerpen@be  Fri Oct  5 10:28:05 2018
From: j@n@@nn@ert @ending from u@ntwerpen@be (Annaert Jan)
Date: Fri, 5 Oct 2018 08:28:05 +0000
Subject: [R] 
 Bug : Autocorrelation in sample drawn from stats::rnorm (hmh)
In-Reply-To: <aa15aaef-d56c-e44a-e618-61c69e9b36a7@gmx.fr>
References: <1607055752.4873464.1538697126419.ref@mail.yahoo.com>
 <1607055752.4873464.1538697126419@mail.yahoo.com>
 <f5169c3a-cd6b-1ba4-9701-4119f4123db3@gmx.fr>
 <61E0376C-8813-4678-B4AF-12D57017624C@ua.ac.be>
 <aa15aaef-d56c-e44a-e618-61c69e9b36a7@gmx.fr>
Message-ID: <ABD057D3-5E10-44B4-B4DD-0FB04D475B52@ua.ac.be>



> Nope.

> This IS a bug:
> The negative auto-correlation mostly disappear when I randomize small samples using the R function 'sample'.

> Please check thoroughly the code of the 1st mail I sent, there should be no difference between the two R functions I wrote to illustrate the bug.
> The two functions that should produce the same output if there would be no bug are 'DistributionAutocorrelation_Unexpected' and  'DistributionAutocorrelation_Expected'.
>Please take the time to compare there output!!
>The finite-sample bias in the sample autocorrelation coefficient you mention should affect them in the same manner. This bias is not the only phenomenon at work, there is ALSO as BUG !

I disagree. Take a look at your code:
Cor[repetition] = cor(sample(X[-1]),sample(X[-length(X)]))

By sampling the two series in the correlation function, you discard any time series structure; you are no longer estimating a serial correlation coefficient, but just a correlation (which in this case is unbiased).
Try out the following:

Xs <- sample(X)
Cor[repetition] = cor(Xs[-1]),(Xs[-length(Xs)]))

The bias should reappear.

Jan


-------------- next part --------------
A non-text attachment was scrubbed...
Name: cclhgmpcmhoinmca.png
Type: image/png
Size: 76147 bytes
Desc: cclhgmpcmhoinmca.png
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20181005/1c25e7f4/attachment.png>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: adeokhkijhbomjkp.png
Type: image/png
Size: 75264 bytes
Desc: adeokhkijhbomjkp.png
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20181005/1c25e7f4/attachment-0001.png>

From bgunter@4567 @ending from gm@il@com  Fri Oct  5 16:42:55 2018
From: bgunter@4567 @ending from gm@il@com (Bert Gunter)
Date: Fri, 5 Oct 2018 07:42:55 -0700
Subject: [R] Strange paradox
In-Reply-To: <a12441c953ba4d5ab8a21c3693e84533@wexchprod08.huge.ad.hcuge.ch>
References: <a12441c953ba4d5ab8a21c3693e84533@wexchprod08.huge.ad.hcuge.ch>
Message-ID: <CAGxFJbTmejAyai3f9+g5pD-1W6EtWcHQh=CD2SUvzEfGOKoyJA@mail.gmail.com>

This list is about R programming. Statistics questions, which this is, are
generally off topic here. Try posting on a statistics list like
stats.stackexchange.com instead.

Cheers,
Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Oct 5, 2018 at 1:48 AM CHATTON Anne via R-help <r-help at r-project.org>
wrote:

> Hello,
>
> I am currently analysed two nested models using the same sample. Both the
> simpler model (Model 1 ~ x1 + x2) and the more complex model (Model 2 ~ x1
> + x2 + x3 + x4) yield the same adjusted R-square. Yet the p-value
> associated with the deviance statistic is highly significant (p=0.0047),
> suggesting that the confounders (x3 and x4) account for the prediction of
> the dependent variable.
>
> Does anyone have an explanation of this strange paradox?
>
> Thank you for any suggestion.
>
> Anne
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From icwpieter@ @ending from gm@il@com  Fri Oct  5 16:30:05 2018
From: icwpieter@ @ending from gm@il@com (Ivy Pieters)
Date: Fri, 5 Oct 2018 16:30:05 +0200
Subject: [R] How can I create a loop for this? Please help me
Message-ID: <04758020-16E3-4E1D-B4A2-1005B9315732@gmail.com>

Hey there,
I am very much a newbie in the R world. I have to work with R for my internship. I really hope that someone can help me out here, since it costs me ages to run and adjust the same script over and over again. 

I have a SpatialPointsDataFrame table (sent2field2 at data) that I would like to split into different SpatialPointsDataFrame tables. The first table needs to consist out of [1:13] columns, the second table needs to consist of [,c(1,14:25)] the third needs to consist of [,c(1,26:37)]. The name of the tables need to be Sent2Field2_1, Sent2Field2_2, Sent2Field2_3, etc etc? So only 1,2,3,4 etc need to change within the name. This loop needs to go on until there are no columns left anymore in the dataset. Then the next step needs to add coordinates to the table (see script below). The name of the tables need to be Sent2F2_1, Sent2F2_2, Sent2F2_3, etc etc? So only 1,2,3,4 etc need to change within the name. The last step projects the table with the added coordinates into a SpatialPointsDataFrame. See the script below: (up to now I am adjusting the names manually and running it time after time, i am getting crazy, but I really don?t know how to make a loop) For now the separate steps are working fine. I really hope someone can help me out. Looking forward to anyones reply. Thank you already in advance. 

#field2
Sent2Field2_1<-Sent2Field2 at data[,1:13]
Sent2F2_1<-cbind(CoordsSent2_F2,Sent2Field2_1)
coordinates(Sent2F2_1) <- ~long+lat

Sent2Field2_2<-Sent2Field2 at data[,c(1,14:25)]
Sent2F2_2<-cbind(CoordsSent2_F2,Sent2Field2_2)
coordinates(Sent2F2_2) <- ~long+lat

Sent2Field2_3<-Sent2Field2 at data[,c(1,26:37)]
Sent2F2_3<-cbind(CoordsSent2_F2,Sent2Field2_3)
coordinates(Sent2F2_3) <- ~long+lat

Sent2Field2_4<-Sent2Field2 at data[,c(1,38:49)]
Sent2F2_4<-cbind(CoordsSent2_F2,Sent2Field2_4)
coordinates(Sent2F2_4) <- ~long+lat

Sent2Field2_5<-Sent2Field2 at data[,c(1,50:61)]
Sent2F2_5<-cbind(CoordsSent2_F2,Sent2Field2_5)
coordinates(Sent2F2_5) <- ~long+lat

etc 
etc




	[[alternative HTML version deleted]]


From bgunter@4567 @ending from gm@il@com  Fri Oct  5 17:42:24 2018
From: bgunter@4567 @ending from gm@il@com (Bert Gunter)
Date: Fri, 5 Oct 2018 08:42:24 -0700
Subject: [R] How can I create a loop for this? Please help me
In-Reply-To: <04758020-16E3-4E1D-B4A2-1005B9315732@gmail.com>
References: <04758020-16E3-4E1D-B4A2-1005B9315732@gmail.com>
Message-ID: <CAGxFJbSpA8VhUS8syBQe2FYLw+e+LoaMCPFGoasVVVd+Kdf3+g@mail.gmail.com>

Two things:

1. As your query is about spatial data, you may do better posting (in plain
text, **not** html, which often gets mangled on these plain text lists) on
the r-sig-geo  list.

2. These lists can help, but do not replace, your obligation to do your own
homework. There are many good R tutorials on the web that you can look to
for help. Some recommendations, by no means all that you may wish to check,
can be found here:

https://www.rstudio.com/online-learning/#r-programming

There are also both tutorials and "Vignettes" (the latter in the packages
themselves) specifically for spatial data analysis and visualization.
Searching on "R tutorial spatial data" brought up several.

Cheers,
Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Oct 5, 2018 at 8:12 AM Ivy Pieters <icwpieters at gmail.com> wrote:

> Hey there,
> I am very much a newbie in the R world. I have to work with R for my
> internship. I really hope that someone can help me out here, since it costs
> me ages to run and adjust the same script over and over again.
>
> I have a SpatialPointsDataFrame table (sent2field2 at data) that I would
> like to split into different SpatialPointsDataFrame tables. The first table
> needs to consist out of [1:13] columns, the second table needs to consist
> of [,c(1,14:25)] the third needs to consist of [,c(1,26:37)]. The name of
> the tables need to be Sent2Field2_1, Sent2Field2_2, Sent2Field2_3, etc etc?
> So only 1,2,3,4 etc need to change within the name. This loop needs to go
> on until there are no columns left anymore in the dataset. Then the next
> step needs to add coordinates to the table (see script below). The name of
> the tables need to be Sent2F2_1, Sent2F2_2, Sent2F2_3, etc etc? So only
> 1,2,3,4 etc need to change within the name. The last step projects the
> table with the added coordinates into a SpatialPointsDataFrame. See the
> script below: (up to now I am adjusting the names manually and running it
> time after time, i am getting crazy, but I really don?t know how to make a
> loop) For now the separate steps are working fine. I really hope someone
> can help me out. Looking forward to anyones reply. Thank you already in
> advance.
>
> #field2
> Sent2Field2_1<-Sent2Field2 at data[,1:13]
> Sent2F2_1<-cbind(CoordsSent2_F2,Sent2Field2_1)
> coordinates(Sent2F2_1) <- ~long+lat
>
> Sent2Field2_2<-Sent2Field2 at data[,c(1,14:25)]
> Sent2F2_2<-cbind(CoordsSent2_F2,Sent2Field2_2)
> coordinates(Sent2F2_2) <- ~long+lat
>
> Sent2Field2_3<-Sent2Field2 at data[,c(1,26:37)]
> Sent2F2_3<-cbind(CoordsSent2_F2,Sent2Field2_3)
> coordinates(Sent2F2_3) <- ~long+lat
>
> Sent2Field2_4<-Sent2Field2 at data[,c(1,38:49)]
> Sent2F2_4<-cbind(CoordsSent2_F2,Sent2Field2_4)
> coordinates(Sent2F2_4) <- ~long+lat
>
> Sent2Field2_5<-Sent2Field2 at data[,c(1,50:61)]
> Sent2F2_5<-cbind(CoordsSent2_F2,Sent2Field2_5)
> coordinates(Sent2F2_5) <- ~long+lat
>
> etc
> etc
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From m@cqueen1 @ending from llnl@gov  Fri Oct  5 20:34:18 2018
From: m@cqueen1 @ending from llnl@gov (MacQueen, Don)
Date: Fri, 5 Oct 2018 18:34:18 +0000
Subject: [R] How can I create a loop for this? Please help me
In-Reply-To: <04758020-16E3-4E1D-B4A2-1005B9315732@gmail.com>
References: <04758020-16E3-4E1D-B4A2-1005B9315732@gmail.com>
Message-ID: <72C001B2-ECC7-42DA-BD99-559F5C70091F@llnl.gov>

Bert (in his separate email) is right about learning the basics, and using R-sig-geo. You're kind of jumping right into the deep end! None the less, here's an example that should help.

For one thing, you're being more complicated than necessary. SpatialPointsDataFrame objects can, much of the time, be treated just like regular data frames. You don't need to extract the @data slot and operate on it.


## example with simple fake data
## for the example, I've decided on groups of three columns
## and 5 rows

set.seed(11198905)

## first, the coordinates and the single column that will be included every time.
sdf <- data.frame(long=runif(5, -121, -120),
                  lat=runif(5, 33, 34),
                  nm=letters[1:5])

## construct a set of data with 9 columns (3 sets of 3)
tmp <- matrix( round(runif(45, 10,20)), nrow=5)
colnames(tmp) <- paste0('v',1:9)
sdf <- cbind(sdf, tmp)

## make it into a SpatialPointsDataFrame
library(sp)
coordinates(sdf) <- c('long','lat')
plot(sdf)

## manually:
##   split into three separate SpatialPointsDataFrames, each with three data columns
s1 <- sdf[,c(1,2:4)]
s2 <- sdf[,c(1,5:7)]
s3 <- sdf[,c(1,8:10)]

## to use a loop, have to calculate which columns are needed each time through the loop
## (showing intermediate steps in more detail than truly necessary)

for (ic in 1:3) {

  ## calculate the column numbers
  col1 <- ic*3-1
  coln <- col1+2
  
  cat('iteration',ic,' selecting columns 1 and',col1,'through',coln,'\n')
  sic <- sdf[, c(1, col1:coln)]

  ## calculate the name of the new SpatialPointsDataFrame
  nmi <- paste0('sd',ic)
  cat('      assigning to ',nmi,'\n')

  ## write the current columns to .GlobalEnv
  assign( nmi, sic)

}

## now compare s1 with sd1, s2 with sd2, etc.
## they should be the same

## using assign() in this way is often recommended against. An alternative, which might be better depending on what you need to do with them, would be to save them as elements of a list object.

--
Don MacQueen
Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062
Lab cell 925-724-7509
 
 

?On 10/5/18, 7:30 AM, "R-help on behalf of Ivy Pieters" <r-help-bounces at r-project.org on behalf of icwpieters at gmail.com> wrote:

    Hey there,
    I am very much a newbie in the R world. I have to work with R for my internship. I really hope that someone can help me out here, since it costs me ages to run and adjust the same script over and over again. 
    
    I have a SpatialPointsDataFrame table (sent2field2 at data) that I would like to split into different SpatialPointsDataFrame tables. The first table needs to consist out of [1:13] columns, the second table needs to consist of [,c(1,14:25)] the third needs to consist of [,c(1,26:37)]. The name of the tables need to be Sent2Field2_1, Sent2Field2_2, Sent2Field2_3, etc etc? So only 1,2,3,4 etc need to change within the name. This loop needs to go on until there are no columns left anymore in the dataset. Then the next step needs to add coordinates to the table (see script below). The name of the tables need to be Sent2F2_1, Sent2F2_2, Sent2F2_3, etc etc? So only 1,2,3,4 etc need to change within the name. The last step projects the table with the added coordinates into a SpatialPointsDataFrame. See the script below: (up to now I am adjusting the names manually and running it time after time, i am getting crazy, but I really don?t know how to make a loop) For now the separate steps are working fine. I really hope someone can help me out. Looking forward to anyones reply. Thank you already in advance. 
    
    #field2
    Sent2Field2_1<-Sent2Field2 at data[,1:13]
    Sent2F2_1<-cbind(CoordsSent2_F2,Sent2Field2_1)
    coordinates(Sent2F2_1) <- ~long+lat
    
    Sent2Field2_2<-Sent2Field2 at data[,c(1,14:25)]
    Sent2F2_2<-cbind(CoordsSent2_F2,Sent2Field2_2)
    coordinates(Sent2F2_2) <- ~long+lat
    
    Sent2Field2_3<-Sent2Field2 at data[,c(1,26:37)]
    Sent2F2_3<-cbind(CoordsSent2_F2,Sent2Field2_3)
    coordinates(Sent2F2_3) <- ~long+lat
    
    Sent2Field2_4<-Sent2Field2 at data[,c(1,38:49)]
    Sent2F2_4<-cbind(CoordsSent2_F2,Sent2Field2_4)
    coordinates(Sent2F2_4) <- ~long+lat
    
    Sent2Field2_5<-Sent2Field2 at data[,c(1,50:61)]
    Sent2F2_5<-cbind(CoordsSent2_F2,Sent2Field2_5)
    coordinates(Sent2F2_5) <- ~long+lat
    
    etc 
    etc
    
    
    
    
    	[[alternative HTML version deleted]]
    
    ______________________________________________
    R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    https://stat.ethz.ch/mailman/listinfo/r-help
    PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    and provide commented, minimal, self-contained, reproducible code.
    



From jdnewmil @ending from dcn@d@vi@@c@@u@  Fri Oct  5 20:03:57 2018
From: jdnewmil @ending from dcn@d@vi@@c@@u@ (Jeff Newmiller)
Date: Fri, 05 Oct 2018 11:03:57 -0700
Subject: [R] How can I create a loop for this? Please help me
In-Reply-To: <CAGxFJbSpA8VhUS8syBQe2FYLw+e+LoaMCPFGoasVVVd+Kdf3+g@mail.gmail.com>
References: <04758020-16E3-4E1D-B4A2-1005B9315732@gmail.com>
 <CAGxFJbSpA8VhUS8syBQe2FYLw+e+LoaMCPFGoasVVVd+Kdf3+g@mail.gmail.com>
Message-ID: <326AC638-6522-4C85-A791-71C331A04D0E@dcn.davis.ca.us>

In addition to using plain text format when you post, please try to create a complete minimal example [1][2][3] that sets up a representative set of the variables you are using because the behavior of functions can change depending on what kind of data you are working with. For instance, so you have reason to believe that the number of columns will always divide out with no remainder? Why don't you split this data up before you create the one large SpatialPointsDataFrame? It is highly unusual to have multiple columns with the same names in any one data frame (it looks like you think two of each block of 12 columns will be named long and lat, but they all come from one source data frame).

[1] http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example

[2] http://adv-r.had.co.nz/Reproducibility.html

[3] https://cran.r-project.org/web/packages/reprex/index.html (read the vignette)

On October 5, 2018 8:42:24 AM PDT, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>Two things:
>
>1. As your query is about spatial data, you may do better posting (in
>plain
>text, **not** html, which often gets mangled on these plain text lists)
>on
>the r-sig-geo  list.
>
>2. These lists can help, but do not replace, your obligation to do your
>own
>homework. There are many good R tutorials on the web that you can look
>to
>for help. Some recommendations, by no means all that you may wish to
>check,
>can be found here:
>
>https://www.rstudio.com/online-learning/#r-programming
>
>There are also both tutorials and "Vignettes" (the latter in the
>packages
>themselves) specifically for spatial data analysis and visualization.
>Searching on "R tutorial spatial data" brought up several.
>
>Cheers,
>Bert
>
>Bert Gunter
>
>"The trouble with having an open mind is that people keep coming along
>and
>sticking things into it."
>-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
>On Fri, Oct 5, 2018 at 8:12 AM Ivy Pieters <icwpieters at gmail.com>
>wrote:
>
>> Hey there,
>> I am very much a newbie in the R world. I have to work with R for my
>> internship. I really hope that someone can help me out here, since it
>costs
>> me ages to run and adjust the same script over and over again.
>>
>> I have a SpatialPointsDataFrame table (sent2field2 at data) that I would
>> like to split into different SpatialPointsDataFrame tables. The first
>table
>> needs to consist out of [1:13] columns, the second table needs to
>consist
>> of [,c(1,14:25)] the third needs to consist of [,c(1,26:37)]. The
>name of
>> the tables need to be Sent2Field2_1, Sent2Field2_2, Sent2Field2_3,
>etc etc?
>> So only 1,2,3,4 etc need to change within the name. This loop needs
>to go
>> on until there are no columns left anymore in the dataset. Then the
>next
>> step needs to add coordinates to the table (see script below). The
>name of
>> the tables need to be Sent2F2_1, Sent2F2_2, Sent2F2_3, etc etc? So
>only
>> 1,2,3,4 etc need to change within the name. The last step projects
>the
>> table with the added coordinates into a SpatialPointsDataFrame. See
>the
>> script below: (up to now I am adjusting the names manually and
>running it
>> time after time, i am getting crazy, but I really don?t know how to
>make a
>> loop) For now the separate steps are working fine. I really hope
>someone
>> can help me out. Looking forward to anyones reply. Thank you already
>in
>> advance.
>>
>> #field2
>> Sent2Field2_1<-Sent2Field2 at data[,1:13]
>> Sent2F2_1<-cbind(CoordsSent2_F2,Sent2Field2_1)
>> coordinates(Sent2F2_1) <- ~long+lat
>>
>> Sent2Field2_2<-Sent2Field2 at data[,c(1,14:25)]
>> Sent2F2_2<-cbind(CoordsSent2_F2,Sent2Field2_2)
>> coordinates(Sent2F2_2) <- ~long+lat
>>
>> Sent2Field2_3<-Sent2Field2 at data[,c(1,26:37)]
>> Sent2F2_3<-cbind(CoordsSent2_F2,Sent2Field2_3)
>> coordinates(Sent2F2_3) <- ~long+lat
>>
>> Sent2Field2_4<-Sent2Field2 at data[,c(1,38:49)]
>> Sent2F2_4<-cbind(CoordsSent2_F2,Sent2Field2_4)
>> coordinates(Sent2F2_4) <- ~long+lat
>>
>> Sent2Field2_5<-Sent2Field2 at data[,c(1,50:61)]
>> Sent2F2_5<-cbind(CoordsSent2_F2,Sent2Field2_5)
>> coordinates(Sent2F2_5) <- ~long+lat
>>
>> etc
>> etc
>>
>>
>>
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From @lk@uffm @ending from f@@tm@il@fm  Sat Oct  6 02:08:49 2018
From: @lk@uffm @ending from f@@tm@il@fm (Albrecht Kauffmann)
Date: Sat, 06 Oct 2018 02:08:49 +0200
Subject: [R] How can I create a loop for this? Please help me
In-Reply-To: <04758020-16E3-4E1D-B4A2-1005B9315732@gmail.com>
References: <04758020-16E3-4E1D-B4A2-1005B9315732@gmail.com>
Message-ID: <1538784529.3648590.1532484736.5206D620@webmail.messagingengine.com>

Hi Ivy,

try this:

k <- 0
i  <- 1
while((k*12+13) <= ncol(Sent2Field2 at data) {
    i <- k+1
    n <- paste("Sent2Field2",i, sep="_")
    assign(n, Sent2Field2 at data[,c(1,k*12+c(2:13))])
    k <- k+1
}

Best, 
Albrecht

-- 
  Albrecht Kauffmann
  alkauffm at fastmail.fm

Am Fr, 5. Okt 2018, um 16:30, schrieb Ivy Pieters:
> Hey there,
> I am very much a newbie in the R world. I have to work with R for my 
> internship. I really hope that someone can help me out here, since it 
> costs me ages to run and adjust the same script over and over again. 
> 
> I have a SpatialPointsDataFrame table (sent2field2 at data) that I would 
> like to split into different SpatialPointsDataFrame tables. The first 
> table needs to consist out of [1:13] columns, the second table needs to 
> consist of [,c(1,14:25)] the third needs to consist of [,c(1,26:37)]. 
> The name of the tables need to be Sent2Field2_1, Sent2Field2_2, 
> Sent2Field2_3, etc etc? So only 1,2,3,4 etc need to change within the 
> name. This loop needs to go on until there are no columns left anymore 
> in the dataset. Then the next step needs to add coordinates to the table 
> (see script below). The name of the tables need to be Sent2F2_1, 
> Sent2F2_2, Sent2F2_3, etc etc? So only 1,2,3,4 etc need to change within 
> the name. The last step projects the table with the added coordinates 
> into a SpatialPointsDataFrame. See the script below: (up to now I am 
> adjusting the names manually and running it time after time, i am 
> getting crazy, but I really don?t know how to make a loop) For now the 
> separate steps are working fine. I really hope someone can help me out. 
> Looking forward to anyones reply. Thank you already in advance. 
> 
> #field2
> Sent2Field2_1<-Sent2Field2 at data[,1:13]
> Sent2F2_1<-cbind(CoordsSent2_F2,Sent2Field2_1)
> coordinates(Sent2F2_1) <- ~long+lat
> 
> Sent2Field2_2<-Sent2Field2 at data[,c(1,14:25)]
> Sent2F2_2<-cbind(CoordsSent2_F2,Sent2Field2_2)
> coordinates(Sent2F2_2) <- ~long+lat
> 
> Sent2Field2_3<-Sent2Field2 at data[,c(1,26:37)]
> Sent2F2_3<-cbind(CoordsSent2_F2,Sent2Field2_3)
> coordinates(Sent2F2_3) <- ~long+lat
> 
> Sent2Field2_4<-Sent2Field2 at data[,c(1,38:49)]
> Sent2F2_4<-cbind(CoordsSent2_F2,Sent2Field2_4)
> coordinates(Sent2F2_4) <- ~long+lat
> 
> Sent2Field2_5<-Sent2Field2 at data[,c(1,50:61)]
> Sent2F2_5<-cbind(CoordsSent2_F2,Sent2Field2_5)
> coordinates(Sent2F2_5) <- ~long+lat
> 
> etc 
> etc
> 
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @uy@n@cy @ending from gm@il@com  Sat Oct  6 04:38:10 2018
From: @uy@n@cy @ending from gm@il@com (Nancy S)
Date: Fri, 5 Oct 2018 22:38:10 -0400
Subject: [R] savehistory()
In-Reply-To: <CAM_vjunHf8e+2eO8UNZt08rRJwPMHF7pe3jEHR1j8bXONDsK5g@mail.gmail.com>
References: <CAHqCQvib9_d9Czkugz3z6iWStE5BwtLbSjpSUniiW=pyggPSBw@mail.gmail.com>
 <CAM_vjunHf8e+2eO8UNZt08rRJwPMHF7pe3jEHR1j8bXONDsK5g@mail.gmail.com>
Message-ID: <CAHqCQvjCZ5hXJnsp8sF=HSCAfoc_8TKJB1rcVox6arBtt2ax3g@mail.gmail.com>

Hi Sarah,

Thank you for pointing out this. I am using Mac.

Suy

On Thu, Oct 4, 2018 at 1:23 PM Sarah Goslee <sarah.goslee at gmail.com> wrote:

> Hi Suy,
>
> It is very important to specify what OS and version of R you're using.
>
> But I'm going to make a wild guess that you're using Mac, and that you
> didn't read the documentation for savehistory() carefully.
>
> "R.app, the console on macOS, has a separate and largely incompatible
> history mechanism, which by default uses a file .Rapp.history and saves
> up to 250 entries. These functions are not currently implemented there."
>
>
> https://www.rdocumentation.org/packages/utils/versions/3.5.1/topics/savehistory
> or
> ?savehistory
>
> If my wild guess is wrong, then you'll need, at a minimum, to provide the
> output of
> sessionInfo()
> for anyone to be able to help you.
>
> Sarah
>
> On Thu, Oct 4, 2018 at 1:11 PM Nancy S <suy.nacy at gmail.com> wrote:
>
>> Hi,
>>
>> I just  start to learn R, but I have problem to use "savehistory()"
>>
>> When I run, it pops out "Error in .External2(C_savehistory, file) :
>>   'savehistory' is not currently implemented". I searched a little bit
>> online, but I still cannot figure out how to fix that.
>>
>> thanks,
>> Suy
>>
> --
> Sarah Goslee
> http://www.functionaldiversity.org <http://www.functionaldiversity.org>
>

	[[alternative HTML version deleted]]


From @ubh@mitr@@p@tr@ @ending from gm@il@com  Sat Oct  6 09:29:25 2018
From: @ubh@mitr@@p@tr@ @ending from gm@il@com (Subhamitra Patra)
Date: Sat, 6 Oct 2018 12:59:25 +0530
Subject: [R] Requesting for help on the problem of "subscript out of bounds"
Message-ID: <CAOFE=kP+YbecTTHOj1rVFDecU_+iaZLgPX4UcGXWXZBca_TtHQ@mail.gmail.com>

Hello friends,

I am very new in this R world. But, still doing some programming by
learning. While running one code, I found the problem of "subscript out of
bounds". Please suggest me how to overcome this problem? For your
reference, I am uploading my code here.

The function

approx_entropy(ts, edim =2, r = 0.2*sd(ts), elag = 1)

library(pracma)

N<-nrow(mat)
r<-matrix(0, nrow = N, ncol = 1)for (i in 1:N){
     r[i]<-approx_entropy(mat[i,], edim = 2, r = 0.2*sd(mat[i,]), elag = 1)}

After running this code, I am getting the error of

*"subscript out of bounds"*

Please help me for which I shall be always grateful to you.

Thanks in advance.



-- 
*Best Regards,*
*Subhamitra Patra*
*Phd. Research Scholar*
*Department of Humanities and Social Sciences*
*Indian Institute of Technology, Kharagpur*
*INDIA*

	[[alternative HTML version deleted]]


From drjimlemon @ending from gm@il@com  Sat Oct  6 10:51:56 2018
From: drjimlemon @ending from gm@il@com (Jim Lemon)
Date: Sat, 6 Oct 2018 18:51:56 +1000
Subject: [R] 
 Requesting for help on the problem of "subscript out of bounds"
In-Reply-To: <CAOFE=kP+YbecTTHOj1rVFDecU_+iaZLgPX4UcGXWXZBca_TtHQ@mail.gmail.com>
References: <CAOFE=kP+YbecTTHOj1rVFDecU_+iaZLgPX4UcGXWXZBca_TtHQ@mail.gmail.com>
Message-ID: <CA+8X3fW6X1fgAY0PKzS00oOz=9LHUDdx-cQeFctMq8izcYT8qQ@mail.gmail.com>

Hi Subhamitra,
Where I think the error arises is in the line:

 N<-nrow(mat)

Since we don't know what "mat" is, we don't know what nrow(mat) will
return. If "mat" is not a matrix or data frame, it is likely to be
NULL. Try this:

print(N)

after defining it and see what it is.

Jim

On Sat, Oct 6, 2018 at 5:51 PM Subhamitra Patra
<subhamitra.patra at gmail.com> wrote:
>
> Hello friends,
>
> I am very new in this R world. But, still doing some programming by
> learning. While running one code, I found the problem of "subscript out of
> bounds". Please suggest me how to overcome this problem? For your
> reference, I am uploading my code here.
>
> The function
>
> approx_entropy(ts, edim =2, r = 0.2*sd(ts), elag = 1)
>
> library(pracma)
>
> N<-nrow(mat)
> r<-matrix(0, nrow = N, ncol = 1)for (i in 1:N){
>      r[i]<-approx_entropy(mat[i,], edim = 2, r = 0.2*sd(mat[i,]), elag = 1)}
>
> After running this code, I am getting the error of
>
> *"subscript out of bounds"*
>
> Please help me for which I shall be always grateful to you.
>
> Thanks in advance.
>
>
>
> --
> *Best Regards,*
> *Subhamitra Patra*
> *Phd. Research Scholar*
> *Department of Humanities and Social Sciences*
> *Indian Institute of Technology, Kharagpur*
> *INDIA*
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @ubh@mitr@@p@tr@ @ending from gm@il@com  Sat Oct  6 11:14:27 2018
From: @ubh@mitr@@p@tr@ @ending from gm@il@com (Subhamitra Patra)
Date: Sat, 6 Oct 2018 14:44:27 +0530
Subject: [R] 
 Requesting for help on the problem of "subscript out of bounds"
In-Reply-To: <CA+8X3fW6X1fgAY0PKzS00oOz=9LHUDdx-cQeFctMq8izcYT8qQ@mail.gmail.com>
References: <CAOFE=kP+YbecTTHOj1rVFDecU_+iaZLgPX4UcGXWXZBca_TtHQ@mail.gmail.com>
 <CA+8X3fW6X1fgAY0PKzS00oOz=9LHUDdx-cQeFctMq8izcYT8qQ@mail.gmail.com>
Message-ID: <CAOFE=kPs+jH=6iBeqx=OJ1jZMrOCz8O3ZPWmnd2ty29_1MbsyA@mail.gmail.com>

Hello Sir,

I tried by defining mat, but still facing the same problem.

Hence, mat represents the time series. This time, I defined it as ts and
tried, but still having the same problem.

In particular, the problem is coming in the following line
*for (i in 1:N){*
*+     r[i]<-approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]), elag =
1) *

where i is unable to synchronize with the no. of rows i.e. rows and thus I
am getting the error of

*Error in `[<-`(`*tmp*`, i, , value = ts[i:(N - m + i)]) :   subscript out
of bounds*

For your reference, I am providing my full code with an explanation as
follows.

The function

approx_entropy(ts, edim = 2, r = 0.2*sd(ts), elag = 1)

from the package,pracma I am calculating the approximate entropy of time
series.ts

I have a matrix of time series (one series per row i.e. 51 rows and 1
column)  and I would estimate the approximate entropy for each of the rows,
storing the results in a vector. So, I have written a code

library(pracma)

N<-nrow(ts)
r<-matrix(0, nrow = N, ncol = 1)for (i in 1:N){
     r[i]<-approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]), elag = 1)}

* After calculating for 1 series, I need to calculate the same things for
the multiple series by changing the dimension of the ncol.*

Please help me in this regard.

Thanks in advance.

On Sat, Oct 6, 2018 at 2:22 PM Jim Lemon <drjimlemon at gmail.com> wrote:

> Hi Subhamitra,
> Where I think the error arises is in the line:
>
>  N<-nrow(mat)
>
> Since we don't know what "mat" is, we don't know what nrow(mat) will
> return. If "mat" is not a matrix or data frame, it is likely to be
> NULL. Try this:
>
> print(N)
>
> after defining it and see what it is.
>
> Jim
>
> On Sat, Oct 6, 2018 at 5:51 PM Subhamitra Patra
> <subhamitra.patra at gmail.com> wrote:
> >
> > Hello friends,
> >
> > I am very new in this R world. But, still doing some programming by
> > learning. While running one code, I found the problem of "subscript out
> of
> > bounds". Please suggest me how to overcome this problem? For your
> > reference, I am uploading my code here.
> >
> > The function
> >
> > approx_entropy(ts, edim =2, r = 0.2*sd(ts), elag = 1)
> >
> > library(pracma)
> >
> > N<-nrow(mat)
> > r<-matrix(0, nrow = N, ncol = 1)for (i in 1:N){
> >      r[i]<-approx_entropy(mat[i,], edim = 2, r = 0.2*sd(mat[i,]), elag =
> 1)}
> >
> > After running this code, I am getting the error of
> >
> > *"subscript out of bounds"*
> >
> > Please help me for which I shall be always grateful to you.
> >
> > Thanks in advance.
> >
> >
> >
> > --
> > *Best Regards,*
> > *Subhamitra Patra*
> > *Phd. Research Scholar*
> > *Department of Humanities and Social Sciences*
> > *Indian Institute of Technology, Kharagpur*
> > *INDIA*
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>


-- 
*Best Regards,*
*Subhamitra Patra*
*Phd. Research Scholar*
*Department of Humanities and Social Sciences*
*Indian Institute of Technology, Kharagpur*
*INDIA*

	[[alternative HTML version deleted]]


From ruipb@rr@d@@ @ending from @@po@pt  Sat Oct  6 11:18:28 2018
From: ruipb@rr@d@@ @ending from @@po@pt (ruipbarradas)
Date: Sat, 06 Oct 2018 10:18:28 +0100
Subject: [R] 
 Requesting for help on the problem of "subscript out of bounds"
Message-ID: <s00fgd43bpmvp8d126tra105.1538817508046@email.android.com>

Hello,
Instead of nrow try all uppercase:
N <- NROW (ts)

Hope this helps,
Rui Barradas?



Enviado a partir do meu smartphone Samsung Galaxy.-------- Mensagem original --------De: Subhamitra Patra <subhamitra.patra at gmail.com> Data: 06/10/2018  10:14  (GMT+00:00) Para: drjimlemon at gmail.com Cc: r-help at r-project.org Assunto: Re: [R] 
  Requesting for help on the problem of "subscript out of bounds" 
Hello Sir,

I tried by defining mat, but still facing the same problem.

Hence, mat represents the time series. This time, I defined it as ts and
tried, but still having the same problem.

In particular, the problem is coming in the following line
*for (i in 1:N){*
*+???? r[i]<-approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]), elag =
1) *

where i is unable to synchronize with the no. of rows i.e. rows and thus I
am getting the error of

*Error in `[<-`(`*tmp*`, i, , value = ts[i:(N - m + i)]) :?? subscript out
of bounds*

For your reference, I am providing my full code with an explanation as
follows.

The function

approx_entropy(ts, edim = 2, r = 0.2*sd(ts), elag = 1)

from the package,pracma I am calculating the approximate entropy of time
series.ts

I have a matrix of time series (one series per row i.e. 51 rows and 1
column)? and I would estimate the approximate entropy for each of the rows,
storing the results in a vector. So, I have written a code

library(pracma)

N<-nrow(ts)
r<-matrix(0, nrow = N, ncol = 1)for (i in 1:N){
???? r[i]<-approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]), elag = 1)}

* After calculating for 1 series, I need to calculate the same things for
the multiple series by changing the dimension of the ncol.*

Please help me in this regard.

Thanks in advance.

On Sat, Oct 6, 2018 at 2:22 PM Jim Lemon <drjimlemon at gmail.com> wrote:

> Hi Subhamitra,
> Where I think the error arises is in the line:
>
>? N<-nrow(mat)
>
> Since we don't know what "mat" is, we don't know what nrow(mat) will
> return. If "mat" is not a matrix or data frame, it is likely to be
> NULL. Try this:
>
> print(N)
>
> after defining it and see what it is.
>
> Jim
>
> On Sat, Oct 6, 2018 at 5:51 PM Subhamitra Patra
> <subhamitra.patra at gmail.com> wrote:
> >
> > Hello friends,
> >
> > I am very new in this R world. But, still doing some programming by
> > learning. While running one code, I found the problem of "subscript out
> of
> > bounds". Please suggest me how to overcome this problem? For your
> > reference, I am uploading my code here.
> >
> > The function
> >
> > approx_entropy(ts, edim =2, r = 0.2*sd(ts), elag = 1)
> >
> > library(pracma)
> >
> > N<-nrow(mat)
> > r<-matrix(0, nrow = N, ncol = 1)for (i in 1:N){
> >????? r[i]<-approx_entropy(mat[i,], edim = 2, r = 0.2*sd(mat[i,]), elag =
> 1)}
> >
> > After running this code, I am getting the error of
> >
> > *"subscript out of bounds"*
> >
> > Please help me for which I shall be always grateful to you.
> >
> > Thanks in advance.
> >
> >
> >
> > --
> > *Best Regards,*
> > *Subhamitra Patra*
> > *Phd. Research Scholar*
> > *Department of Humanities and Social Sciences*
> > *Indian Institute of Technology, Kharagpur*
> > *INDIA*
> >
> >???????? [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>


-- 
*Best Regards,*
*Subhamitra Patra*
*Phd. Research Scholar*
*Department of Humanities and Social Sciences*
*Indian Institute of Technology, Kharagpur*
*INDIA*

	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From drjimlemon @ending from gm@il@com  Sat Oct  6 11:15:56 2018
From: drjimlemon @ending from gm@il@com (Jim Lemon)
Date: Sat, 6 Oct 2018 19:15:56 +1000
Subject: [R] 
 Requesting for help on the problem of "subscript out of bounds"
In-Reply-To: <CAOFE=kPs+jH=6iBeqx=OJ1jZMrOCz8O3ZPWmnd2ty29_1MbsyA@mail.gmail.com>
References: <CAOFE=kP+YbecTTHOj1rVFDecU_+iaZLgPX4UcGXWXZBca_TtHQ@mail.gmail.com>
 <CA+8X3fW6X1fgAY0PKzS00oOz=9LHUDdx-cQeFctMq8izcYT8qQ@mail.gmail.com>
 <CAOFE=kPs+jH=6iBeqx=OJ1jZMrOCz8O3ZPWmnd2ty29_1MbsyA@mail.gmail.com>
Message-ID: <CA+8X3fVVDgAEeCY2p0bRgFFd8+Rfa3Atg-QgFhDrB=KDTm8t9w@mail.gmail.com>

What I would do next is to insert a line to see where it goes wrong:

for (i in 1:N){
     cat("i =",i,"\n")
     r[i]<-approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]), elag = 1)
}

The last i that is printed (which may be the first) will reveal what
caused the error I hope.

Jim

On Sat, Oct 6, 2018 at 7:12 PM Subhamitra Patra
<subhamitra.patra at gmail.com> wrote:
>
> Hello Sir,
>
> I tried by defining mat, but still facing the same problem.
>
> Hence, mat represents the time series. This time, I defined it as ts and tried, but still having the same problem.
>
> In particular, the problem is coming in the following line
> for (i in 1:N){
> +     r[i]<-approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]), elag = 1)
>
> where i is unable to synchronize with the no. of rows i.e. rows and thus I am getting the error of
>
> Error in `[<-`(`*tmp*`, i, , value = ts[i:(N - m + i)]) :
>   subscript out of bounds
>
> For your reference, I am providing my full code with an explanation as follows.
>
> The function
>
> approx_entropy(ts, edim = 2, r = 0.2*sd(ts), elag = 1)
>
> from the package,pracma I am calculating the approximate entropy of time series.ts
>
> I have a matrix of time series (one series per row i.e. 51 rows and 1 column)  and I would estimate the approximate entropy for each of the rows, storing the results in a vector. So, I have written a code
>
> library(pracma)
>
> N<-nrow(ts)
> r<-matrix(0, nrow = N, ncol = 1)
> for (i in 1:N){
>      r[i]<-approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]), elag = 1)
> }
>
>  After calculating for 1 series, I need to calculate the same things for the multiple series by changing the dimension of the ncol.
>
> Please help me in this regard.
>
> Thanks in advance.
>
> On Sat, Oct 6, 2018 at 2:22 PM Jim Lemon <drjimlemon at gmail.com> wrote:
>>
>> Hi Subhamitra,
>> Where I think the error arises is in the line:
>>
>>  N<-nrow(mat)
>>
>> Since we don't know what "mat" is, we don't know what nrow(mat) will
>> return. If "mat" is not a matrix or data frame, it is likely to be
>> NULL. Try this:
>>
>> print(N)
>>
>> after defining it and see what it is.
>>
>> Jim
>>
>> On Sat, Oct 6, 2018 at 5:51 PM Subhamitra Patra
>> <subhamitra.patra at gmail.com> wrote:
>> >
>> > Hello friends,
>> >
>> > I am very new in this R world. But, still doing some programming by
>> > learning. While running one code, I found the problem of "subscript out of
>> > bounds". Please suggest me how to overcome this problem? For your
>> > reference, I am uploading my code here.
>> >
>> > The function
>> >
>> > approx_entropy(ts, edim =2, r = 0.2*sd(ts), elag = 1)
>> >
>> > library(pracma)
>> >
>> > N<-nrow(mat)
>> > r<-matrix(0, nrow = N, ncol = 1)for (i in 1:N){
>> >      r[i]<-approx_entropy(mat[i,], edim = 2, r = 0.2*sd(mat[i,]), elag = 1)}
>> >
>> > After running this code, I am getting the error of
>> >
>> > *"subscript out of bounds"*
>> >
>> > Please help me for which I shall be always grateful to you.
>> >
>> > Thanks in advance.
>> >
>> >
>> >
>> > --
>> > *Best Regards,*
>> > *Subhamitra Patra*
>> > *Phd. Research Scholar*
>> > *Department of Humanities and Social Sciences*
>> > *Indian Institute of Technology, Kharagpur*
>> > *INDIA*
>> >
>> >         [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>
>
>
> --
> Best Regards,
> Subhamitra Patra
> Phd. Research Scholar
> Department of Humanities and Social Sciences
> Indian Institute of Technology, Kharagpur
> INDIA


From @ubh@mitr@@p@tr@ @ending from gm@il@com  Sat Oct  6 11:34:57 2018
From: @ubh@mitr@@p@tr@ @ending from gm@il@com (Subhamitra Patra)
Date: Sat, 6 Oct 2018 15:04:57 +0530
Subject: [R] 
 Requesting for help on the problem of "subscript out of bounds"
In-Reply-To: <s00fgd43bpmvp8d126tra105.1538817508046@email.android.com>
References: <s00fgd43bpmvp8d126tra105.1538817508046@email.android.com>
Message-ID: <CAOFE=kN4opv9-pp0QnN76UqHymr1ROoX9_P9fE=-M+j=x2qGQw@mail.gmail.com>

I am extremely sorry to say that both the suggestions did not work.

I did not understand the suggestion of Prof. Lemon. So, Sir, Can you please
clarify me your suggestion?

 I tried the suggestion of Ruipbarradas. It does not work.

Please help me out for which I shall be always grateful to you.

Thanks in advance.

On Sat, Oct 6, 2018 at 2:48 PM ruipbarradas <ruipbarradas at sapo.pt> wrote:

> Hello,
>
> Instead of nrow try all uppercase:
>
> N <- NROW (ts)
>
>
> Hope this helps,
>
> Rui Barradas
>
>
>
>
> Enviado a partir do meu smartphone Samsung Galaxy.
> -------- Mensagem original --------
> De: Subhamitra Patra <subhamitra.patra at gmail.com>
> Data: 06/10/2018 10:14 (GMT+00:00)
> Para: drjimlemon at gmail.com
> Cc: r-help at r-project.org
> Assunto: Re: [R] Requesting for help on the problem of "subscript out of
> bounds"
>
> Hello Sir,
>
> I tried by defining mat, but still facing the same problem.
>
> Hence, mat represents the time series. This time, I defined it as ts and
> tried, but still having the same problem.
>
> In particular, the problem is coming in the following line
> *for (i in 1:N){*
> *+     r[i]<-approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]), elag =
> 1) *
>
> where i is unable to synchronize with the no. of rows i.e. rows and thus I
> am getting the error of
>
> *Error in `[<-`(`*tmp*`, i, , value = ts[i:(N - m + i)]) :   subscript out
> of bounds*
>
> For your reference, I am providing my full code with an explanation as
> follows.
>
> The function
>
> approx_entropy(ts, edim = 2, r = 0.2*sd(ts), elag = 1)
>
> from the package,pracma I am calculating the approximate entropy of time
> series.ts
>
> I have a matrix of time series (one series per row i.e. 51 rows and 1
> column)  and I would estimate the approximate entropy for each of the rows,
> storing the results in a vector. So, I have written a code
>
> library(pracma)
>
> N<-nrow(ts)
> r<-matrix(0, nrow = N, ncol = 1)for (i in 1:N){
>      r[i]<-approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]), elag = 1)}
>
> * After calculating for 1 series, I need to calculate the same things for
> the multiple series by changing the dimension of the ncol.*
>
> Please help me in this regard.
>
> Thanks in advance.
>
> On Sat, Oct 6, 2018 at 2:22 PM Jim Lemon <drjimlemon at gmail.com> wrote:
>
> > Hi Subhamitra,
> > Where I think the error arises is in the line:
> >
> >  N<-nrow(mat)
> >
> > Since we don't know what "mat" is, we don't know what nrow(mat) will
> > return. If "mat" is not a matrix or data frame, it is likely to be
> > NULL. Try this:
> >
> > print(N)
> >
> > after defining it and see what it is.
> >
> > Jim
> >
> > On Sat, Oct 6, 2018 at 5:51 PM Subhamitra Patra
> > <subhamitra.patra at gmail.com> wrote:
> > >
> > > Hello friends,
> > >
> > > I am very new in this R world. But, still doing some programming by
> > > learning. While running one code, I found the problem of "subscript out
> > of
> > > bounds". Please suggest me how to overcome this problem? For your
> > > reference, I am uploading my code here.
> > >
> > > The function
> > >
> > > approx_entropy(ts, edim =2, r = 0.2*sd(ts), elag = 1)
> > >
> > > library(pracma)
> > >
> > > N<-nrow(mat)
> > > r<-matrix(0, nrow = N, ncol = 1)for (i in 1:N){
> > >      r[i]<-approx_entropy(mat[i,], edim = 2, r = 0.2*sd(mat[i,]), elag
> =
> > 1)}
> > >
> > > After running this code, I am getting the error of
> > >
> > > *"subscript out of bounds"*
> > >
> > > Please help me for which I shall be always grateful to you.
> > >
> > > Thanks in advance.
> > >
> > >
> > >
> > > --
> > > *Best Regards,*
> > > *Subhamitra Patra*
> > > *Phd. Research Scholar*
> > > *Department of Humanities and Social Sciences*
> > > *Indian Institute of Technology, Kharagpur*
> > > *INDIA*
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> >
>
>
> --
> *Best Regards,*
> *Subhamitra Patra*
> *Phd. Research Scholar*
> *Department of Humanities and Social Sciences*
> *Indian Institute of Technology, Kharagpur*
> *INDIA*
>
> [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
*Best Regards,*
*Subhamitra Patra*
*Phd. Research Scholar*
*Department of Humanities and Social Sciences*
*Indian Institute of Technology, Kharagpur*
*INDIA*

	[[alternative HTML version deleted]]


From drjimlemon @ending from gm@il@com  Sat Oct  6 12:12:44 2018
From: drjimlemon @ending from gm@il@com (Jim Lemon)
Date: Sat, 6 Oct 2018 20:12:44 +1000
Subject: [R] 
 Requesting for help on the problem of "subscript out of bounds"
In-Reply-To: <CAOFE=kN4opv9-pp0QnN76UqHymr1ROoX9_P9fE=-M+j=x2qGQw@mail.gmail.com>
References: <s00fgd43bpmvp8d126tra105.1538817508046@email.android.com>
 <CAOFE=kN4opv9-pp0QnN76UqHymr1ROoX9_P9fE=-M+j=x2qGQw@mail.gmail.com>
Message-ID: <CA+8X3fXz38j39wnvK7wzvwhnfpzJ1yP1d0jxVNtjc-z3u9KuDg@mail.gmail.com>

The idea of using:

cat("i =",i,"\n")

is to display the value of i each time the loop executes. Displaying i
_before_ the error occurs tells us what value of i is causing the
problem. Because the error is occurring when you try to index ts,
perhaps adding:

cat(dim(ts),"\n")
for(i in 1:N) {
...

_before_ the loop starts will tell you what the dimensions of ts are.
It way well be a list that you have to use a different syntax for
indexing. An even more complete description of ts can be had like
this:

str(ts)

Unfortunately I am about to log out and get some sleep so I will not
be able to continue answering until some time tomorrow.

Jim
On Sat, Oct 6, 2018 at 7:32 PM Subhamitra Patra
<subhamitra.patra at gmail.com> wrote:
>
> I am extremely sorry to say that both the suggestions did not work.
>
> I did not understand the suggestion of Prof. Lemon. So, Sir, Can you please clarify me your suggestion?
>
>  I tried the suggestion of Ruipbarradas. It does not work.
>
>
> Please help me out for which I shall be always grateful to you.
>
> Thanks in advance.
>
> On Sat, Oct 6, 2018 at 2:48 PM ruipbarradas <ruipbarradas at sapo.pt> wrote:
>>
>> Hello,
>>
>> Instead of nrow try all uppercase:
>>
>> N <- NROW (ts)
>>
>>
>> Hope this helps,
>>
>> Rui Barradas
>>
>>
>>
>>
>> Enviado a partir do meu smartphone Samsung Galaxy.
>> -------- Mensagem original --------
>> De: Subhamitra Patra <subhamitra.patra at gmail.com>
>> Data: 06/10/2018 10:14 (GMT+00:00)
>> Para: drjimlemon at gmail.com
>> Cc: r-help at r-project.org
>> Assunto: Re: [R] Requesting for help on the problem of "subscript out of bounds"
>>
>> Hello Sir,
>>
>> I tried by defining mat, but still facing the same problem.
>>
>> Hence, mat represents the time series. This time, I defined it as ts and
>> tried, but still having the same problem.
>>
>> In particular, the problem is coming in the following line
>> *for (i in 1:N){*
>> *+     r[i]<-approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]), elag =
>> 1) *
>>
>> where i is unable to synchronize with the no. of rows i.e. rows and thus I
>> am getting the error of
>>
>> *Error in `[<-`(`*tmp*`, i, , value = ts[i:(N - m + i)]) :   subscript out
>> of bounds*
>>
>> For your reference, I am providing my full code with an explanation as
>> follows.
>>
>> The function
>>
>> approx_entropy(ts, edim = 2, r = 0.2*sd(ts), elag = 1)
>>
>> from the package,pracma I am calculating the approximate entropy of time
>> series.ts
>>
>> I have a matrix of time series (one series per row i.e. 51 rows and 1
>> column)  and I would estimate the approximate entropy for each of the rows,
>> storing the results in a vector. So, I have written a code
>>
>> library(pracma)
>>
>> N<-nrow(ts)
>> r<-matrix(0, nrow = N, ncol = 1)for (i in 1:N){
>>      r[i]<-approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]), elag = 1)}
>>
>> * After calculating for 1 series, I need to calculate the same things for
>> the multiple series by changing the dimension of the ncol.*
>>
>> Please help me in this regard.
>>
>> Thanks in advance.
>>
>> On Sat, Oct 6, 2018 at 2:22 PM Jim Lemon <drjimlemon at gmail.com> wrote:
>>
>> > Hi Subhamitra,
>> > Where I think the error arises is in the line:
>> >
>> >  N<-nrow(mat)
>> >
>> > Since we don't know what "mat" is, we don't know what nrow(mat) will
>> > return. If "mat" is not a matrix or data frame, it is likely to be
>> > NULL. Try this:
>> >
>> > print(N)
>> >
>> > after defining it and see what it is.
>> >
>> > Jim
>> >
>> > On Sat, Oct 6, 2018 at 5:51 PM Subhamitra Patra
>> > <subhamitra.patra at gmail.com> wrote:
>> > >
>> > > Hello friends,
>> > >
>> > > I am very new in this R world. But, still doing some programming by
>> > > learning. While running one code, I found the problem of "subscript out
>> > of
>> > > bounds". Please suggest me how to overcome this problem? For your
>> > > reference, I am uploading my code here.
>> > >
>> > > The function
>> > >
>> > > approx_entropy(ts, edim =2, r = 0.2*sd(ts), elag = 1)
>> > >
>> > > library(pracma)
>> > >
>> > > N<-nrow(mat)
>> > > r<-matrix(0, nrow = N, ncol = 1)for (i in 1:N){
>> > >      r[i]<-approx_entropy(mat[i,], edim = 2, r = 0.2*sd(mat[i,]), elag =
>> > 1)}
>> > >
>> > > After running this code, I am getting the error of
>> > >
>> > > *"subscript out of bounds"*
>> > >
>> > > Please help me for which I shall be always grateful to you.
>> > >
>> > > Thanks in advance.
>> > >
>> > >
>> > >
>> > > --
>> > > *Best Regards,*
>> > > *Subhamitra Patra*
>> > > *Phd. Research Scholar*
>> > > *Department of Humanities and Social Sciences*
>> > > *Indian Institute of Technology, Kharagpur*
>> > > *INDIA*
>> > >
>> > >         [[alternative HTML version deleted]]
>> > >
>> > > ______________________________________________
>> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > > https://stat.ethz.ch/mailman/listinfo/r-help
>> > > PLEASE do read the posting guide
>> > http://www.R-project.org/posting-guide.html
>> > > and provide commented, minimal, self-contained, reproducible code.
>> >
>>
>>
>> --
>> *Best Regards,*
>> *Subhamitra Patra*
>> *Phd. Research Scholar*
>> *Department of Humanities and Social Sciences*
>> *Indian Institute of Technology, Kharagpur*
>> *INDIA*
>>
>> [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>
>
> --
> Best Regards,
> Subhamitra Patra
> Phd. Research Scholar
> Department of Humanities and Social Sciences
> Indian Institute of Technology, Kharagpur
> INDIA


From ruipb@rr@d@@ @ending from @@po@pt  Sat Oct  6 13:28:09 2018
From: ruipb@rr@d@@ @ending from @@po@pt (Rui Barradas)
Date: Sat, 6 Oct 2018 12:28:09 +0100
Subject: [R] 
 Requesting for help on the problem of "subscript out of bounds"
In-Reply-To: <CAOFE=kN4opv9-pp0QnN76UqHymr1ROoX9_P9fE=-M+j=x2qGQw@mail.gmail.com>
References: <s00fgd43bpmvp8d126tra105.1538817508046@email.android.com>
 <CAOFE=kN4opv9-pp0QnN76UqHymr1ROoX9_P9fE=-M+j=x2qGQw@mail.gmail.com>
Message-ID: <8a802382-6dfd-feca-503a-eb65710aa7b3@sapo.pt>

Hello,

I suggested NROW (all uppercase) because it works even if its argument, 
in your case ts, has only one dimension, nrow needs 2-dim objects.

I have now noticed that you are indexing ts as if it has two dimensions, 
and that r is created with function matrix() but then you index it with 
just one dimension.


r[i] <- approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]), elag = 1)


Shouldn't it be ts[i] or r[i, ] ?

Hope this helps,

Rui Barradas

?s 10:34 de 06/10/2018, Subhamitra Patra escreveu:
> I am extremely sorry to say that both the suggestions did not work.
> 
> I did not understand the suggestion of Prof. Lemon. So, Sir, Can you 
> please clarify me your suggestion?
> 
> 
>        ?I tried the suggestion of Ruipbarradas. It does not work.
> 
> 
> Please help me out for which I shall be always grateful to you.
> 
> Thanks in advance.
> 
> On Sat, Oct 6, 2018 at 2:48 PM ruipbarradas <ruipbarradas at sapo.pt 
> <mailto:ruipbarradas at sapo.pt>> wrote:
> 
>     Hello,
> 
>     Instead of nrow try all uppercase:
> 
>     N <- NROW (ts)
> 
> 
>     Hope this helps,
> 
>     Rui Barradas
> 
> 
> 
> 
>     Enviado a partir do meu smartphone Samsung Galaxy.
>     -------- Mensagem original --------
>     De: Subhamitra Patra <subhamitra.patra at gmail.com
>     <mailto:subhamitra.patra at gmail.com>>
>     Data: 06/10/2018 10:14 (GMT+00:00)
>     Para: drjimlemon at gmail.com <mailto:drjimlemon at gmail.com>
>     Cc: r-help at r-project.org <mailto:r-help at r-project.org>
>     Assunto: Re: [R] Requesting for help on the problem of "subscript
>     out of bounds"
> 
>     Hello Sir,
> 
>     I tried by defining mat, but still facing the same problem.
> 
>     Hence, mat represents the time series. This time, I defined it as ts and
>     tried, but still having the same problem.
> 
>     In particular, the problem is coming in the following line
>     *for (i in 1:N){*
>     *+???? r[i]<-approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]), elag =
>     1) *
> 
>     where i is unable to synchronize with the no. of rows i.e. rows and
>     thus I
>     am getting the error of
> 
>     *Error in `[<-`(`*tmp*`, i, , value = ts[i:(N - m + i)]) :  
>     subscript out
>     of bounds*
> 
>     For your reference, I am providing my full code with an explanation as
>     follows.
> 
>     The function
> 
>     approx_entropy(ts, edim = 2, r = 0.2*sd(ts), elag = 1)
> 
>     from the package,pracma I am calculating the approximate entropy of time
>     series.ts
> 
>     I have a matrix of time series (one series per row i.e. 51 rows and 1
>     column)? and I would estimate the approximate entropy for each of
>     the rows,
>     storing the results in a vector. So, I have written a code
> 
>     library(pracma)
> 
>     N<-nrow(ts)
>     r<-matrix(0, nrow = N, ncol = 1)for (i in 1:N){
>      ???? r[i]<-approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]),
>     elag = 1)}
> 
>     * After calculating for 1 series, I need to calculate the same
>     things for
>     the multiple series by changing the dimension of the ncol.*
> 
>     Please help me in this regard.
> 
>     Thanks in advance.
> 
>     On Sat, Oct 6, 2018 at 2:22 PM Jim Lemon <drjimlemon at gmail.com
>     <mailto:drjimlemon at gmail.com>> wrote:
> 
>      > Hi Subhamitra,
>      > Where I think the error arises is in the line:
>      >
>      >? N<-nrow(mat)
>      >
>      > Since we don't know what "mat" is, we don't know what nrow(mat) will
>      > return. If "mat" is not a matrix or data frame, it is likely to be
>      > NULL. Try this:
>      >
>      > print(N)
>      >
>      > after defining it and see what it is.
>      >
>      > Jim
>      >
>      > On Sat, Oct 6, 2018 at 5:51 PM Subhamitra Patra
>      > <subhamitra.patra at gmail.com <mailto:subhamitra.patra at gmail.com>>
>     wrote:
>      > >
>      > > Hello friends,
>      > >
>      > > I am very new in this R world. But, still doing some programming by
>      > > learning. While running one code, I found the problem of
>     "subscript out
>      > of
>      > > bounds". Please suggest me how to overcome this problem? For your
>      > > reference, I am uploading my code here.
>      > >
>      > > The function
>      > >
>      > > approx_entropy(ts, edim =2, r = 0.2*sd(ts), elag = 1)
>      > >
>      > > library(pracma)
>      > >
>      > > N<-nrow(mat)
>      > > r<-matrix(0, nrow = N, ncol = 1)for (i in 1:N){
>      > >????? r[i]<-approx_entropy(mat[i,], edim = 2, r =
>     0.2*sd(mat[i,]), elag =
>      > 1)}
>      > >
>      > > After running this code, I am getting the error of
>      > >
>      > > *"subscript out of bounds"*
>      > >
>      > > Please help me for which I shall be always grateful to you.
>      > >
>      > > Thanks in advance.
>      > >
>      > >
>      > >
>      > > --
>      > > *Best Regards,*
>      > > *Subhamitra Patra*
>      > > *Phd. Research Scholar*
>      > > *Department of Humanities and Social Sciences*
>      > > *Indian Institute of Technology, Kharagpur*
>      > > *INDIA*
>      > >
>      > >???????? [[alternative HTML version deleted]]
>      > >
>      > > ______________________________________________
>      > > R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>     -- To UNSUBSCRIBE and more, see
>      > > https://stat.ethz.ch/mailman/listinfo/r-help
>      > > PLEASE do read the posting guide
>      > http://www.R-project.org/posting-guide.html
>      > > and provide commented, minimal, self-contained, reproducible code.
>      >
> 
> 
>     -- 
>     *Best Regards,*
>     *Subhamitra Patra*
>     *Phd. Research Scholar*
>     *Department of Humanities and Social Sciences*
>     *Indian Institute of Technology, Kharagpur*
>     *INDIA*
> 
>     [[alternative HTML version deleted]]
> 
>     ______________________________________________
>     R-help at r-project.org <mailto:R-help at r-project.org> mailing list --
>     To UNSUBSCRIBE and more, see
>     https://stat.ethz.ch/mailman/listinfo/r-help
>     PLEASE do read the posting guide
>     http://www.R-project.org/posting-guide.html
>     and provide commented, minimal, self-contained, reproducible code.
> 
> 
> 
> -- 
> *Best Regards,*
> *Subhamitra Patra*
> *Phd. Research Scholar*
> *Department of Humanities and Social Sciences*
> *Indian Institute of Technology, Kharagpur*
> *INDIA*


From olivier_giv@ud@n @ending from hotm@il@com  Sat Oct  6 13:48:44 2018
From: olivier_giv@ud@n @ending from hotm@il@com (Olivier GIVAUDAN)
Date: Sat, 6 Oct 2018 11:48:44 +0000
Subject: [R] Genuine relative paths with R
Message-ID: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>

Dear R users,

I would like to work with genuine relative paths in R for obvious reasons: if I move all my scripts related to some project as a whole to another location of my computer or someone else's computer, if want my scripts to continue to run seamlessly.

What I mean by "genuine" is that it should not be necessary to hardcode one single absolute path (making the code obviously not "portable" - to another place - anymore).

For the time being, I found the following related posts, unfortunately never conclusive or even somewhat off-topic:
https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html

So I found 2 workarounds, more or less satisfactory:


  1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.
  2.  Or create an R project file with RStudio and use the package "here" to get the absolute path of the R project file and put all the R scripts related to this project in the R project directory, as often recommended.

But I am really wondering why R doesn't have (please tell me if I'm wrong) this basic feature as many other languages have it (batch, shell, C, LaTeX, SAS with macro-variables, etc.)?
Do you know whether the language will have this kind of function in a near future? What are the obstacles / what is the reasoning for not having it already?

Do you know other workarounds?

Best regards,

Olivier

	[[alternative HTML version deleted]]


From i@t@z@hn @ending from gm@il@com  Sat Oct  6 14:56:34 2018
From: i@t@z@hn @ending from gm@il@com (Ista Zahn)
Date: Sat, 6 Oct 2018 08:56:34 -0400
Subject: [R] Genuine relative paths with R
In-Reply-To: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
Message-ID: <CA+vqiLGxq1_LPgOqNVWC+=e9deTzMCwgJx0G6X26kF-1vWZc5Q@mail.gmail.com>

Hi Oliver,

Interesting question. Can you describe your motivation in a little
more detail? That is, why do you what this feature? I ask because to
my way of thinking you have to know the path to the script in order to
call it in the first place. If calling from R, is

setwd("/path/to/dir")
source("file.R")

really so much worse than

source("path/to/dir/file.R")

?  If it is worse, why?

Similarly if calling from a shell, is

cd /path/to/dir
Rscript file.R

really so much worse than

Rscript /path/to/dir/file.R

? Again, if is worse, why?

Best,
Ista
On Sat, Oct 6, 2018 at 8:25 AM Olivier GIVAUDAN
<olivier_givaudan at hotmail.com> wrote:
>
> Dear R users,
>
> I would like to work with genuine relative paths in R for obvious reasons: if I move all my scripts related to some project as a whole to another location of my computer or someone else's computer, if want my scripts to continue to run seamlessly.
>
> What I mean by "genuine" is that it should not be necessary to hardcode one single absolute path (making the code obviously not "portable" - to another place - anymore).
>
> For the time being, I found the following related posts, unfortunately never conclusive or even somewhat off-topic:
> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
>
> So I found 2 workarounds, more or less satisfactory:
>
>
>   1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.
>   2.  Or create an R project file with RStudio and use the package "here" to get the absolute path of the R project file and put all the R scripts related to this project in the R project directory, as often recommended.
>
> But I am really wondering why R doesn't have (please tell me if I'm wrong) this basic feature as many other languages have it (batch, shell, C, LaTeX, SAS with macro-variables, etc.)?
> Do you know whether the language will have this kind of function in a near future? What are the obstacles / what is the reasoning for not having it already?
>
> Do you know other workarounds?
>
> Best regards,
>
> Olivier
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @ubh@mitr@@p@tr@ @ending from gm@il@com  Sat Oct  6 16:45:45 2018
From: @ubh@mitr@@p@tr@ @ending from gm@il@com (Subhamitra Patra)
Date: Sat, 6 Oct 2018 20:15:45 +0530
Subject: [R] 
 Requesting for help on the problem of "subscript out of bounds"
In-Reply-To: <8a802382-6dfd-feca-503a-eb65710aa7b3@sapo.pt>
References: <s00fgd43bpmvp8d126tra105.1538817508046@email.android.com>
 <CAOFE=kN4opv9-pp0QnN76UqHymr1ROoX9_P9fE=-M+j=x2qGQw@mail.gmail.com>
 <8a802382-6dfd-feca-503a-eb65710aa7b3@sapo.pt>
Message-ID: <CAOFE=kNz-za=i44_XuqQYtQyvdswvWmUYjAV+48sb6ZSSwgRBA@mail.gmail.com>

Yes, I tried as per your suggestion, but not getting any results. I think,
there is some dimension mismatch in the data matrix and result matrix.

I have to compute the particular model yearly for each series.

Please help.

Thanks in advance.


On Sat, Oct 6, 2018 at 4:58 PM Rui Barradas <ruipbarradas at sapo.pt> wrote:

> Hello,
>
> I suggested NROW (all uppercase) because it works even if its argument,
> in your case ts, has only one dimension, nrow needs 2-dim objects.
>
> I have now noticed that you are indexing ts as if it has two dimensions,
> and that r is created with function matrix() but then you index it with
> just one dimension.
>
>
> r[i] <- approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]), elag = 1)
>
>
> Shouldn't it be ts[i] or r[i, ] ?
>
> Hope this helps,
>
> Rui Barradas
>
> ?s 10:34 de 06/10/2018, Subhamitra Patra escreveu:
> > I am extremely sorry to say that both the suggestions did not work.
> >
> > I did not understand the suggestion of Prof. Lemon. So, Sir, Can you
> > please clarify me your suggestion?
> >
> >
> >         I tried the suggestion of Ruipbarradas. It does not work.
> >
> >
> > Please help me out for which I shall be always grateful to you.
> >
> > Thanks in advance.
> >
> > On Sat, Oct 6, 2018 at 2:48 PM ruipbarradas <ruipbarradas at sapo.pt
> > <mailto:ruipbarradas at sapo.pt>> wrote:
> >
> >     Hello,
> >
> >     Instead of nrow try all uppercase:
> >
> >     N <- NROW (ts)
> >
> >
> >     Hope this helps,
> >
> >     Rui Barradas
> >
> >
> >
> >
> >     Enviado a partir do meu smartphone Samsung Galaxy.
> >     -------- Mensagem original --------
> >     De: Subhamitra Patra <subhamitra.patra at gmail.com
> >     <mailto:subhamitra.patra at gmail.com>>
> >     Data: 06/10/2018 10:14 (GMT+00:00)
> >     Para: drjimlemon at gmail.com <mailto:drjimlemon at gmail.com>
> >     Cc: r-help at r-project.org <mailto:r-help at r-project.org>
> >     Assunto: Re: [R] Requesting for help on the problem of "subscript
> >     out of bounds"
> >
> >     Hello Sir,
> >
> >     I tried by defining mat, but still facing the same problem.
> >
> >     Hence, mat represents the time series. This time, I defined it as ts
> and
> >     tried, but still having the same problem.
> >
> >     In particular, the problem is coming in the following line
> >     *for (i in 1:N){*
> >     *+     r[i]<-approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]),
> elag =
> >     1) *
> >
> >     where i is unable to synchronize with the no. of rows i.e. rows and
> >     thus I
> >     am getting the error of
> >
> >     *Error in `[<-`(`*tmp*`, i, , value = ts[i:(N - m + i)]) :
> >     subscript out
> >     of bounds*
> >
> >     For your reference, I am providing my full code with an explanation
> as
> >     follows.
> >
> >     The function
> >
> >     approx_entropy(ts, edim = 2, r = 0.2*sd(ts), elag = 1)
> >
> >     from the package,pracma I am calculating the approximate entropy of
> time
> >     series.ts
> >
> >     I have a matrix of time series (one series per row i.e. 51 rows and 1
> >     column)  and I would estimate the approximate entropy for each of
> >     the rows,
> >     storing the results in a vector. So, I have written a code
> >
> >     library(pracma)
> >
> >     N<-nrow(ts)
> >     r<-matrix(0, nrow = N, ncol = 1)for (i in 1:N){
> >           r[i]<-approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]),
> >     elag = 1)}
> >
> >     * After calculating for 1 series, I need to calculate the same
> >     things for
> >     the multiple series by changing the dimension of the ncol.*
> >
> >     Please help me in this regard.
> >
> >     Thanks in advance.
> >
> >     On Sat, Oct 6, 2018 at 2:22 PM Jim Lemon <drjimlemon at gmail.com
> >     <mailto:drjimlemon at gmail.com>> wrote:
> >
> >      > Hi Subhamitra,
> >      > Where I think the error arises is in the line:
> >      >
> >      >  N<-nrow(mat)
> >      >
> >      > Since we don't know what "mat" is, we don't know what nrow(mat)
> will
> >      > return. If "mat" is not a matrix or data frame, it is likely to be
> >      > NULL. Try this:
> >      >
> >      > print(N)
> >      >
> >      > after defining it and see what it is.
> >      >
> >      > Jim
> >      >
> >      > On Sat, Oct 6, 2018 at 5:51 PM Subhamitra Patra
> >      > <subhamitra.patra at gmail.com <mailto:subhamitra.patra at gmail.com>>
> >     wrote:
> >      > >
> >      > > Hello friends,
> >      > >
> >      > > I am very new in this R world. But, still doing some
> programming by
> >      > > learning. While running one code, I found the problem of
> >     "subscript out
> >      > of
> >      > > bounds". Please suggest me how to overcome this problem? For
> your
> >      > > reference, I am uploading my code here.
> >      > >
> >      > > The function
> >      > >
> >      > > approx_entropy(ts, edim =2, r = 0.2*sd(ts), elag = 1)
> >      > >
> >      > > library(pracma)
> >      > >
> >      > > N<-nrow(mat)
> >      > > r<-matrix(0, nrow = N, ncol = 1)for (i in 1:N){
> >      > >      r[i]<-approx_entropy(mat[i,], edim = 2, r =
> >     0.2*sd(mat[i,]), elag =
> >      > 1)}
> >      > >
> >      > > After running this code, I am getting the error of
> >      > >
> >      > > *"subscript out of bounds"*
> >      > >
> >      > > Please help me for which I shall be always grateful to you.
> >      > >
> >      > > Thanks in advance.
> >      > >
> >      > >
> >      > >
> >      > > --
> >      > > *Best Regards,*
> >      > > *Subhamitra Patra*
> >      > > *Phd. Research Scholar*
> >      > > *Department of Humanities and Social Sciences*
> >      > > *Indian Institute of Technology, Kharagpur*
> >      > > *INDIA*
> >      > >
> >      > >         [[alternative HTML version deleted]]
> >      > >
> >      > > ______________________________________________
> >      > > R-help at r-project.org <mailto:R-help at r-project.org> mailing list
> >     -- To UNSUBSCRIBE and more, see
> >      > > https://stat.ethz.ch/mailman/listinfo/r-help
> >      > > PLEASE do read the posting guide
> >      > http://www.R-project.org/posting-guide.html
> >      > > and provide commented, minimal, self-contained, reproducible
> code.
> >      >
> >
> >
> >     --
> >     *Best Regards,*
> >     *Subhamitra Patra*
> >     *Phd. Research Scholar*
> >     *Department of Humanities and Social Sciences*
> >     *Indian Institute of Technology, Kharagpur*
> >     *INDIA*
> >
> >     [[alternative HTML version deleted]]
> >
> >     ______________________________________________
> >     R-help at r-project.org <mailto:R-help at r-project.org> mailing list --
> >     To UNSUBSCRIBE and more, see
> >     https://stat.ethz.ch/mailman/listinfo/r-help
> >     PLEASE do read the posting guide
> >     http://www.R-project.org/posting-guide.html
> >     and provide commented, minimal, self-contained, reproducible code.
> >
> >
> >
> > --
> > *Best Regards,*
> > *Subhamitra Patra*
> > *Phd. Research Scholar*
> > *Department of Humanities and Social Sciences*
> > *Indian Institute of Technology, Kharagpur*
> > *INDIA*
>


-- 
*Best Regards,*
*Subhamitra Patra*
*Phd. Research Scholar*
*Department of Humanities and Social Sciences*
*Indian Institute of Technology, Kharagpur*
*INDIA*

	[[alternative HTML version deleted]]


From friendly @ending from yorku@c@  Sat Oct  6 18:14:31 2018
From: friendly @ending from yorku@c@ (Michael Friendly)
Date: Sat, 6 Oct 2018 12:14:31 -0400
Subject: [R] Strange paradox
In-Reply-To: <a12441c953ba4d5ab8a21c3693e84533@wexchprod08.huge.ad.hcuge.ch>
References: <a12441c953ba4d5ab8a21c3693e84533@wexchprod08.huge.ad.hcuge.ch>
Message-ID: <7da313ad-5d6a-31ce-9760-7f973a740559@yorku.ca>

Yes-- there's no paradox; the adjusted R^2 and deviance are looking 
at/testing different things.

Also you don't say *what* deviance you are looking at, but
your interpretation of the deviance is probably wrong.
A significant test for
anova(model2, model1)
says that x3 & x4 add significantly to prediction, over and above x1, x2

On 10/5/2018 4:45 AM, CHATTON Anne via R-help wrote:
> Hello,
> 
> I am currently analysed two nested models using the same sample. Both the simpler model (Model 1 ~ x1 + x2) and the more complex model (Model 2 ~ x1 + x2 + x3 + x4) yield the same adjusted R-square. Yet the p-value associated with the deviance statistic is highly significant (p=0.0047), suggesting that the confounders (x3 and x4) account for the prediction of the dependent variable.
> 
> Does anyone have an explanation of this strange paradox?
> 
> Thank you for any suggestion.
> 
> Anne
> 


-- 
Michael Friendly     Email: friendly AT yorku DOT ca
Professor, Psychology Dept. & Chair, ASA Statistical Graphics Section
York University      Voice: 416 736-2100 x66249 Fax: 416 736-5814
4700 Keele Street    Web:   http://www.datavis.ca
Toronto, ONT  M3J 1P3 CANADA


From i@t@z@hn @ending from gm@il@com  Sat Oct  6 18:40:38 2018
From: i@t@z@hn @ending from gm@il@com (Ista Zahn)
Date: Sat, 6 Oct 2018 12:40:38 -0400
Subject: [R] Genuine relative paths with R
In-Reply-To: <VI1PR0202MB3357776AA39CD2305C0FA141F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <CA+vqiLGxq1_LPgOqNVWC+=e9deTzMCwgJx0G6X26kF-1vWZc5Q@mail.gmail.com>
 <VI1PR0202MB3357776AA39CD2305C0FA141F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
Message-ID: <CA+vqiLFoxUe=4-KLN7ebcTwRoR95R0cSJfSKcDV=dungdT6hjg@mail.gmail.com>

Hi Olivier,

Sorry for misspelling your name! Please see inline below.

On Sat, Oct 6, 2018 at 9:58 AM Olivier GIVAUDAN
<olivier_givaudan at hotmail.com> wrote:
>
> Hi Ista,
>
> Thank you for your reply.
>
> My motivation is described at the 3rd line of my initial message:
> "if I move all my scripts related to some project as a whole to another location of my computer or someone else's computer, if want my scripts to continue to run seamlessly."
>
> The main point is simply to avoid any hardcoded path in my R scripts, as you wrote in your examples.

My claim is that you cannot avoid hardcoding paths. Even if the
feature you requested existed, you would still have to do e.g.,

source("/path/to/dir/file.R")

That is just as much hard-coded as the (only slightly more verbose)

cd("/path/to/dir")
source("file.R")

So, I'm afraid I still don't get it. What is it that you actually want
to do that you currently cannot?

Best,
Ista
>
> BTW I don't use R with command line, only within RStudio or with the default GUI.
>
> Best regards,
>
> Olivier (and not Oliver )
> ________________________________
> De : Ista Zahn <istazahn at gmail.com>
> Envoy? : samedi 6 octobre 2018 12:56
> ? : olivier_givaudan at hotmail.com
> Cc : r-help at r-project.org
> Objet : Re: [R] Genuine relative paths with R
>
> Hi Oliver,
>
> Interesting question. Can you describe your motivation in a little
> more detail? That is, why do you what this feature? I ask because to
> my way of thinking you have to know the path to the script in order to
> call it in the first place. If calling from R, is
>
> setwd("/path/to/dir")
> source("file.R")
>
> really so much worse than
>
> source("path/to/dir/file.R")
>
> ?  If it is worse, why?
>
> Similarly if calling from a shell, is
>
> cd /path/to/dir
> Rscript file.R
>
> really so much worse than
>
> Rscript /path/to/dir/file.R
>
> ? Again, if is worse, why?
>
> Best,
> Ista
> On Sat, Oct 6, 2018 at 8:25 AM Olivier GIVAUDAN
> <olivier_givaudan at hotmail.com> wrote:
> >
> > Dear R users,
> >
> > I would like to work with genuine relative paths in R for obvious reasons: if I move all my scripts related to some project as a whole to another location of my computer or someone else's computer, if want my scripts to continue to run seamlessly.
> >
> > What I mean by "genuine" is that it should not be necessary to hardcode one single absolute path (making the code obviously not "portable" - to another place - anymore).
> >
> > For the time being, I found the following related posts, unfortunately never conclusive or even somewhat off-topic:
> > https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
> > https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
> > http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
> >
> > So I found 2 workarounds, more or less satisfactory:
> >
> >
> >   1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.
> >   2.  Or create an R project file with RStudio and use the package "here" to get the absolute path of the R project file and put all the R scripts related to this project in the R project directory, as often recommended.
> >
> > But I am really wondering why R doesn't have (please tell me if I'm wrong) this basic feature as many other languages have it (batch, shell, C, LaTeX, SAS with macro-variables, etc.)?
> > Do you know whether the language will have this kind of function in a near future? What are the obstacles / what is the reasoning for not having it already?
> >
> > Do you know other workarounds?
> >
> > Best regards,
> >
> > Olivier
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.


From i@t@z@hn @ending from gm@il@com  Sat Oct  6 18:42:59 2018
From: i@t@z@hn @ending from gm@il@com (Ista Zahn)
Date: Sat, 6 Oct 2018 12:42:59 -0400
Subject: [R] Genuine relative paths with R
In-Reply-To: <CA+vqiLFoxUe=4-KLN7ebcTwRoR95R0cSJfSKcDV=dungdT6hjg@mail.gmail.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <CA+vqiLGxq1_LPgOqNVWC+=e9deTzMCwgJx0G6X26kF-1vWZc5Q@mail.gmail.com>
 <VI1PR0202MB3357776AA39CD2305C0FA141F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <CA+vqiLFoxUe=4-KLN7ebcTwRoR95R0cSJfSKcDV=dungdT6hjg@mail.gmail.com>
Message-ID: <CA+vqiLGK40mSB1nQyyevU6mHz7PXD+X3B+j7q6oOoKPUuyp2Lw@mail.gmail.com>

On Sat, Oct 6, 2018 at 12:40 PM Ista Zahn <istazahn at gmail.com> wrote:
>
> Hi Olivier,
>
> Sorry for misspelling your name! Please see inline below.
>
> On Sat, Oct 6, 2018 at 9:58 AM Olivier GIVAUDAN
> <olivier_givaudan at hotmail.com> wrote:
> >
> > Hi Ista,
> >
> > Thank you for your reply.
> >
> > My motivation is described at the 3rd line of my initial message:
> > "if I move all my scripts related to some project as a whole to another location of my computer or someone else's computer, if want my scripts to continue to run seamlessly."
> >
> > The main point is simply to avoid any hardcoded path in my R scripts, as you wrote in your examples.
>
> My claim is that you cannot avoid hardcoding paths. Even if the
> feature you requested existed, you would still have to do e.g.,
>
> source("/path/to/dir/file.R")
>
> That is just as much hard-coded as the (only slightly more verbose)
>
> cd("/path/to/dir")
> source("file.R")
>
> So, I'm afraid I still don't get it. What is it that you actually want
> to do that you currently cannot?

I should have added that my assumption is that you will call

setwd("/path/to/dir")
source("file.R")

interactively, not that you will hard-code this in your script.

Best,
Ista
>
> Best,
> Ista
> >
> > BTW I don't use R with command line, only within RStudio or with the default GUI.
> >
> > Best regards,
> >
> > Olivier (and not Oliver )
> > ________________________________
> > De : Ista Zahn <istazahn at gmail.com>
> > Envoy? : samedi 6 octobre 2018 12:56
> > ? : olivier_givaudan at hotmail.com
> > Cc : r-help at r-project.org
> > Objet : Re: [R] Genuine relative paths with R
> >
> > Hi Oliver,
> >
> > Interesting question. Can you describe your motivation in a little
> > more detail? That is, why do you what this feature? I ask because to
> > my way of thinking you have to know the path to the script in order to
> > call it in the first place. If calling from R, is
> >
> > setwd("/path/to/dir")
> > source("file.R")
> >
> > really so much worse than
> >
> > source("path/to/dir/file.R")
> >
> > ?  If it is worse, why?
> >
> > Similarly if calling from a shell, is
> >
> > cd /path/to/dir
> > Rscript file.R
> >
> > really so much worse than
> >
> > Rscript /path/to/dir/file.R
> >
> > ? Again, if is worse, why?
> >
> > Best,
> > Ista
> > On Sat, Oct 6, 2018 at 8:25 AM Olivier GIVAUDAN
> > <olivier_givaudan at hotmail.com> wrote:
> > >
> > > Dear R users,
> > >
> > > I would like to work with genuine relative paths in R for obvious reasons: if I move all my scripts related to some project as a whole to another location of my computer or someone else's computer, if want my scripts to continue to run seamlessly.
> > >
> > > What I mean by "genuine" is that it should not be necessary to hardcode one single absolute path (making the code obviously not "portable" - to another place - anymore).
> > >
> > > For the time being, I found the following related posts, unfortunately never conclusive or even somewhat off-topic:
> > > https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
> > > https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
> > > http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
> > >
> > > So I found 2 workarounds, more or less satisfactory:
> > >
> > >
> > >   1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.
> > >   2.  Or create an R project file with RStudio and use the package "here" to get the absolute path of the R project file and put all the R scripts related to this project in the R project directory, as often recommended.
> > >
> > > But I am really wondering why R doesn't have (please tell me if I'm wrong) this basic feature as many other languages have it (batch, shell, C, LaTeX, SAS with macro-variables, etc.)?
> > > Do you know whether the language will have this kind of function in a near future? What are the obstacles / what is the reasoning for not having it already?
> > >
> > > Do you know other workarounds?
> > >
> > > Best regards,
> > >
> > > Olivier
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.


From ruipb@rr@d@@ @ending from @@po@pt  Sat Oct  6 19:16:09 2018
From: ruipb@rr@d@@ @ending from @@po@pt (Rui Barradas)
Date: Sat, 6 Oct 2018 18:16:09 +0100
Subject: [R] 
 Requesting for help on the problem of "subscript out of bounds"
In-Reply-To: <CAOFE=kNz-za=i44_XuqQYtQyvdswvWmUYjAV+48sb6ZSSwgRBA@mail.gmail.com>
References: <s00fgd43bpmvp8d126tra105.1538817508046@email.android.com>
 <CAOFE=kN4opv9-pp0QnN76UqHymr1ROoX9_P9fE=-M+j=x2qGQw@mail.gmail.com>
 <8a802382-6dfd-feca-503a-eb65710aa7b3@sapo.pt>
 <CAOFE=kNz-za=i44_XuqQYtQyvdswvWmUYjAV+48sb6ZSSwgRBA@mail.gmail.com>
Message-ID: <16c267c6-fa89-7105-9203-3e6000124aa5@sapo.pt>

Hello,

Can you post the output of

dput(head(ts, 20))    # paste the output of this in a mail
dim(ts)               # and this


Rui Barradas

?s 15:45 de 06/10/2018, Subhamitra Patra escreveu:
> Yes, I tried as per your suggestion, but not getting any results. I 
> think, there is some dimension mismatch in the data matrix and result 
> matrix.
> 
> I have to compute the particular model yearly for each series.
> 
> Please help.
> 
> Thanks in advance.
> 
> 
> On Sat, Oct 6, 2018 at 4:58 PM Rui Barradas <ruipbarradas at sapo.pt 
> <mailto:ruipbarradas at sapo.pt>> wrote:
> 
>     Hello,
> 
>     I suggested NROW (all uppercase) because it works even if its argument,
>     in your case ts, has only one dimension, nrow needs 2-dim objects.
> 
>     I have now noticed that you are indexing ts as if it has two
>     dimensions,
>     and that r is created with function matrix() but then you index it with
>     just one dimension.
> 
> 
>     r[i] <- approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]), elag = 1)
> 
> 
>     Shouldn't it be ts[i] or r[i, ] ?
> 
>     Hope this helps,
> 
>     Rui Barradas
> 
>     ?s 10:34 de 06/10/2018, Subhamitra Patra escreveu:
>      > I am extremely sorry to say that both the suggestions did not work.
>      >
>      > I did not understand the suggestion of Prof. Lemon. So, Sir, Can you
>      > please clarify me your suggestion?
>      >
>      >
>      >? ? ? ? ?I tried the suggestion of Ruipbarradas. It does not work.
>      >
>      >
>      > Please help me out for which I shall be always grateful to you.
>      >
>      > Thanks in advance.
>      >
>      > On Sat, Oct 6, 2018 at 2:48 PM ruipbarradas <ruipbarradas at sapo.pt
>     <mailto:ruipbarradas at sapo.pt>
>      > <mailto:ruipbarradas at sapo.pt <mailto:ruipbarradas at sapo.pt>>> wrote:
>      >
>      >? ? ?Hello,
>      >
>      >? ? ?Instead of nrow try all uppercase:
>      >
>      >? ? ?N <- NROW (ts)
>      >
>      >
>      >? ? ?Hope this helps,
>      >
>      >? ? ?Rui Barradas
>      >
>      >
>      >
>      >
>      >? ? ?Enviado a partir do meu smartphone Samsung Galaxy.
>      >? ? ?-------- Mensagem original --------
>      >? ? ?De: Subhamitra Patra <subhamitra.patra at gmail.com
>     <mailto:subhamitra.patra at gmail.com>
>      >? ? ?<mailto:subhamitra.patra at gmail.com
>     <mailto:subhamitra.patra at gmail.com>>>
>      >? ? ?Data: 06/10/2018 10:14 (GMT+00:00)
>      >? ? ?Para: drjimlemon at gmail.com <mailto:drjimlemon at gmail.com>
>     <mailto:drjimlemon at gmail.com <mailto:drjimlemon at gmail.com>>
>      >? ? ?Cc: r-help at r-project.org <mailto:r-help at r-project.org>
>     <mailto:r-help at r-project.org <mailto:r-help at r-project.org>>
>      >? ? ?Assunto: Re: [R] Requesting for help on the problem of "subscript
>      >? ? ?out of bounds"
>      >
>      >? ? ?Hello Sir,
>      >
>      >? ? ?I tried by defining mat, but still facing the same problem.
>      >
>      >? ? ?Hence, mat represents the time series. This time, I defined
>     it as ts and
>      >? ? ?tried, but still having the same problem.
>      >
>      >? ? ?In particular, the problem is coming in the following line
>      >? ? ?*for (i in 1:N){*
>      >? ? ?*+???? r[i]<-approx_entropy(ts[i,], edim = 2, r =
>     0.2*sd(ts[i,]), elag =
>      >? ? ?1) *
>      >
>      >? ? ?where i is unable to synchronize with the no. of rows i.e.
>     rows and
>      >? ? ?thus I
>      >? ? ?am getting the error of
>      >
>      >? ? ?*Error in `[<-`(`*tmp*`, i, , value = ts[i:(N - m + i)]) :
>      >? ? ?subscript out
>      >? ? ?of bounds*
>      >
>      >? ? ?For your reference, I am providing my full code with an
>     explanation as
>      >? ? ?follows.
>      >
>      >? ? ?The function
>      >
>      >? ? ?approx_entropy(ts, edim = 2, r = 0.2*sd(ts), elag = 1)
>      >
>      >? ? ?from the package,pracma I am calculating the approximate
>     entropy of time
>      >? ? ?series.ts
>      >
>      >? ? ?I have a matrix of time series (one series per row i.e. 51
>     rows and 1
>      >? ? ?column)? and I would estimate the approximate entropy for each of
>      >? ? ?the rows,
>      >? ? ?storing the results in a vector. So, I have written a code
>      >
>      >? ? ?library(pracma)
>      >
>      >? ? ?N<-nrow(ts)
>      >? ? ?r<-matrix(0, nrow = N, ncol = 1)for (i in 1:N){
>      >? ? ? ???? r[i]<-approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]),
>      >? ? ?elag = 1)}
>      >
>      >? ? ?* After calculating for 1 series, I need to calculate the same
>      >? ? ?things for
>      >? ? ?the multiple series by changing the dimension of the ncol.*
>      >
>      >? ? ?Please help me in this regard.
>      >
>      >? ? ?Thanks in advance.
>      >
>      >? ? ?On Sat, Oct 6, 2018 at 2:22 PM Jim Lemon
>     <drjimlemon at gmail.com <mailto:drjimlemon at gmail.com>
>      >? ? ?<mailto:drjimlemon at gmail.com <mailto:drjimlemon at gmail.com>>>
>     wrote:
>      >
>      >? ? ? > Hi Subhamitra,
>      >? ? ? > Where I think the error arises is in the line:
>      >? ? ? >
>      >? ? ? >? N<-nrow(mat)
>      >? ? ? >
>      >? ? ? > Since we don't know what "mat" is, we don't know what
>     nrow(mat) will
>      >? ? ? > return. If "mat" is not a matrix or data frame, it is
>     likely to be
>      >? ? ? > NULL. Try this:
>      >? ? ? >
>      >? ? ? > print(N)
>      >? ? ? >
>      >? ? ? > after defining it and see what it is.
>      >? ? ? >
>      >? ? ? > Jim
>      >? ? ? >
>      >? ? ? > On Sat, Oct 6, 2018 at 5:51 PM Subhamitra Patra
>      >? ? ? > <subhamitra.patra at gmail.com
>     <mailto:subhamitra.patra at gmail.com>
>     <mailto:subhamitra.patra at gmail.com <mailto:subhamitra.patra at gmail.com>>>
>      >? ? ?wrote:
>      >? ? ? > >
>      >? ? ? > > Hello friends,
>      >? ? ? > >
>      >? ? ? > > I am very new in this R world. But, still doing some
>     programming by
>      >? ? ? > > learning. While running one code, I found the problem of
>      >? ? ?"subscript out
>      >? ? ? > of
>      >? ? ? > > bounds". Please suggest me how to overcome this problem?
>     For your
>      >? ? ? > > reference, I am uploading my code here.
>      >? ? ? > >
>      >? ? ? > > The function
>      >? ? ? > >
>      >? ? ? > > approx_entropy(ts, edim =2, r = 0.2*sd(ts), elag = 1)
>      >? ? ? > >
>      >? ? ? > > library(pracma)
>      >? ? ? > >
>      >? ? ? > > N<-nrow(mat)
>      >? ? ? > > r<-matrix(0, nrow = N, ncol = 1)for (i in 1:N){
>      >? ? ? > >????? r[i]<-approx_entropy(mat[i,], edim = 2, r =
>      >? ? ?0.2*sd(mat[i,]), elag =
>      >? ? ? > 1)}
>      >? ? ? > >
>      >? ? ? > > After running this code, I am getting the error of
>      >? ? ? > >
>      >? ? ? > > *"subscript out of bounds"*
>      >? ? ? > >
>      >? ? ? > > Please help me for which I shall be always grateful to you.
>      >? ? ? > >
>      >? ? ? > > Thanks in advance.
>      >? ? ? > >
>      >? ? ? > >
>      >? ? ? > >
>      >? ? ? > > --
>      >? ? ? > > *Best Regards,*
>      >? ? ? > > *Subhamitra Patra*
>      >? ? ? > > *Phd. Research Scholar*
>      >? ? ? > > *Department of Humanities and Social Sciences*
>      >? ? ? > > *Indian Institute of Technology, Kharagpur*
>      >? ? ? > > *INDIA*
>      >? ? ? > >
>      >? ? ? > >???????? [[alternative HTML version deleted]]
>      >? ? ? > >
>      >? ? ? > > ______________________________________________
>      >? ? ? > > R-help at r-project.org <mailto:R-help at r-project.org>
>     <mailto:R-help at r-project.org <mailto:R-help at r-project.org>> mailing list
>      >? ? ?-- To UNSUBSCRIBE and more, see
>      >? ? ? > > https://stat.ethz.ch/mailman/listinfo/r-help
>      >? ? ? > > PLEASE do read the posting guide
>      >? ? ? > http://www.R-project.org/posting-guide.html
>      >? ? ? > > and provide commented, minimal, self-contained,
>     reproducible code.
>      >? ? ? >
>      >
>      >
>      >? ? ?--
>      >? ? ?*Best Regards,*
>      >? ? ?*Subhamitra Patra*
>      >? ? ?*Phd. Research Scholar*
>      >? ? ?*Department of Humanities and Social Sciences*
>      >? ? ?*Indian Institute of Technology, Kharagpur*
>      >? ? ?*INDIA*
>      >
>      >? ? ?[[alternative HTML version deleted]]
>      >
>      >? ? ?______________________________________________
>      > R-help at r-project.org <mailto:R-help at r-project.org>
>     <mailto:R-help at r-project.org <mailto:R-help at r-project.org>> mailing
>     list --
>      >? ? ?To UNSUBSCRIBE and more, see
>      > https://stat.ethz.ch/mailman/listinfo/r-help
>      >? ? ?PLEASE do read the posting guide
>      > http://www.R-project.org/posting-guide.html
>      >? ? ?and provide commented, minimal, self-contained, reproducible
>     code.
>      >
>      >
>      >
>      > --
>      > *Best Regards,*
>      > *Subhamitra Patra*
>      > *Phd. Research Scholar*
>      > *Department of Humanities and Social Sciences*
>      > *Indian Institute of Technology, Kharagpur*
>      > *INDIA*
> 
> 
> 
> -- 
> *Best Regards,*
> *Subhamitra Patra*
> *Phd. Research Scholar*
> *Department of Humanities and Social Sciences*
> *Indian Institute of Technology, Kharagpur*
> *INDIA*


From jdnewmil @ending from dcn@d@vi@@c@@u@  Sat Oct  6 21:31:29 2018
From: jdnewmil @ending from dcn@d@vi@@c@@u@ (Jeff Newmiller)
Date: Sat, 06 Oct 2018 12:31:29 -0700
Subject: [R] Genuine relative paths with R
In-Reply-To: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
Message-ID: <EF096B6D-D167-402E-A1BB-9310D60E6F64@dcn.davis.ca.us>

I stopped using hardcoded absolute paths inside R scripts years ago, and I suspect that is fairly common practice. That is, I almost never enter a path starting with "/" or "c:/" in an R script.

The key concession you have to make is to start your R session in your working directory using OS-specific mechanisms, and then reference your code and data relative to that directory. RStudio project files offer one mechanism for doing this; using CD from the OS command line is another, and using the file-browser double-click mechanism on .RData files is another (though I prefer to avoid that these days due to potential global environment contamination).

Perhaps you can be more specific about what facilities you are expecting to find. You should also mention what OS you typically use and how you normally start R.

On October 6, 2018 4:48:44 AM PDT, Olivier GIVAUDAN <olivier_givaudan at hotmail.com> wrote:
>Dear R users,
>
>I would like to work with genuine relative paths in R for obvious
>reasons: if I move all my scripts related to some project as a whole to
>another location of my computer or someone else's computer, if want my
>scripts to continue to run seamlessly.
>
>What I mean by "genuine" is that it should not be necessary to hardcode
>one single absolute path (making the code obviously not "portable" - to
>another place - anymore).
>
>For the time being, I found the following related posts, unfortunately
>never conclusive or even somewhat off-topic:
>https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
>https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
>http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
>
>So I found 2 workarounds, more or less satisfactory:
>
>
>1.  Either create a variable "ScriptPath" in the first lines of each of
>my R scripts and run a batch (or shell, etc.) to replace every single
>occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R
>script]" in all the R scripts located in the folder (and possibly
>subfolders) of the batch file.
>2.  Or create an R project file with RStudio and use the package "here"
>to get the absolute path of the R project file and put all the R
>scripts related to this project in the R project directory, as often
>recommended.
>
>But I am really wondering why R doesn't have (please tell me if I'm
>wrong) this basic feature as many other languages have it (batch,
>shell, C, LaTeX, SAS with macro-variables, etc.)?
>Do you know whether the language will have this kind of function in a
>near future? What are the obstacles / what is the reasoning for not
>having it already?
>
>Do you know other workarounds?
>
>Best regards,
>
>Olivier
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From jdnewmil @ending from dcn@d@vi@@c@@u@  Sat Oct  6 23:19:32 2018
From: jdnewmil @ending from dcn@d@vi@@c@@u@ (Jeff Newmiller)
Date: Sat, 06 Oct 2018 14:19:32 -0700
Subject: [R] Genuine relative paths with R
In-Reply-To: <VI1PR0202MB335744735A6AAD8240B2EC32F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <EF096B6D-D167-402E-A1BB-9310D60E6F64@dcn.davis.ca.us>
 <VI1PR0202MB335744735A6AAD8240B2EC32F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
Message-ID: <E55D1CDB-7F3A-4BD5-959B-937A01C2BDE4@dcn.davis.ca.us>

Please use reply-all to keep the conversation on the mailing list.

I found no enlightenment in your response to Ista. 

a) I have many years of experience in a variety of operating systems and languages, and there are a variety of approaches taken to handle self-configuration. R is not special in having to cede some responsibility to the OS if you want portability. I have no problems making my R code work unchanged on various platforms (and in multiple directories on the same machine of needed) simply by making all my path references local.

b) If you want to communicate to us about what mechanisms you cannot find in R, you are going to have to use more specific words than "this function". Ista already mentioned setwd, which works perfectly fine with relative paths, and the (optional) file.path function can construct paths without even assuming that "/" is the separator. Regardless of language I find that changing the working directory as the script runs makes for brittle code... simply using paths relative to the working directory avoids the risk of leaving the current directory changed if the processing fails.

c) Note that R does not provide elaborate support for sharing directories full of scripts containing functions... if you want to build complex code you should be building packages and using the R CMD check facility to prepare your code for use in other environments.

d) Some wild guesses at what you might find useful: ?Startup, littler package, ?commandArgs.

On October 6, 2018 1:43:34 PM PDT, Olivier GIVAUDAN <olivier_givaudan at hotmail.com> wrote:
>Hi Jeff,
>
>Thanks for sharing your workaround.
>
>I guess my last answer to Ista answers your question as well.
>
>To me this function (an equivalent of 'cd', say) should be
>platform-independent.
>
>Best regards,
>
>Olivier
>________________________________
>De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>Envoy? : samedi 6 octobre 2018 19:31
>? : r-help at r-project.org; Olivier GIVAUDAN; r-help at r-project.org
>Objet : Re: [R] Genuine relative paths with R
>
>I stopped using hardcoded absolute paths inside R scripts years ago,
>and I suspect that is fairly common practice. That is, I almost never
>enter a path starting with "/" or "c:/" in an R script.
>
>The key concession you have to make is to start your R session in your
>working directory using OS-specific mechanisms, and then reference your
>code and data relative to that directory. RStudio project files offer
>one mechanism for doing this; using CD from the OS command line is
>another, and using the file-browser double-click mechanism on .RData
>files is another (though I prefer to avoid that these days due to
>potential global environment contamination).
>
>Perhaps you can be more specific about what facilities you are
>expecting to find. You should also mention what OS you typically use
>and how you normally start R.
>
>On October 6, 2018 4:48:44 AM PDT, Olivier GIVAUDAN
><olivier_givaudan at hotmail.com> wrote:
>>Dear R users,
>>
>>I would like to work with genuine relative paths in R for obvious
>>reasons: if I move all my scripts related to some project as a whole
>to
>>another location of my computer or someone else's computer, if want my
>>scripts to continue to run seamlessly.
>>
>>What I mean by "genuine" is that it should not be necessary to
>hardcode
>>one single absolute path (making the code obviously not "portable" -
>to
>>another place - anymore).
>>
>>For the time being, I found the following related posts, unfortunately
>>never conclusive or even somewhat off-topic:
>>https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
>>https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
>>http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
>>
>>So I found 2 workarounds, more or less satisfactory:
>>
>>
>>1.  Either create a variable "ScriptPath" in the first lines of each
>of
>>my R scripts and run a batch (or shell, etc.) to replace every single
>>occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the
>R
>>script]" in all the R scripts located in the folder (and possibly
>>subfolders) of the batch file.
>>2.  Or create an R project file with RStudio and use the package
>"here"
>>to get the absolute path of the R project file and put all the R
>>scripts related to this project in the R project directory, as often
>>recommended.
>>
>>But I am really wondering why R doesn't have (please tell me if I'm
>>wrong) this basic feature as many other languages have it (batch,
>>shell, C, LaTeX, SAS with macro-variables, etc.)?
>>Do you know whether the language will have this kind of function in a
>>near future? What are the obstacles / what is the reasoning for not
>>having it already?
>>
>>Do you know other workarounds?
>>
>>Best regards,
>>
>>Olivier
>>
>>       [[alternative HTML version deleted]]
>>
>>______________________________________________
>>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>https://stat.ethz.ch/mailman/listinfo/r-help
>>PLEASE do read the posting guide
>>http://www.R-project.org/posting-guide.html
>>and provide commented, minimal, self-contained, reproducible code.
>
>--
>Sent from my phone. Please excuse my brevity.

-- 
Sent from my phone. Please excuse my brevity.


From olivier_giv@ud@n @ending from hotm@il@com  Sat Oct  6 23:35:36 2018
From: olivier_giv@ud@n @ending from hotm@il@com (Olivier GIVAUDAN)
Date: Sat, 6 Oct 2018 21:35:36 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <CA+vqiLFoxUe=4-KLN7ebcTwRoR95R0cSJfSKcDV=dungdT6hjg@mail.gmail.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <CA+vqiLGxq1_LPgOqNVWC+=e9deTzMCwgJx0G6X26kF-1vWZc5Q@mail.gmail.com>
 <VI1PR0202MB3357776AA39CD2305C0FA141F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <CA+vqiLFoxUe=4-KLN7ebcTwRoR95R0cSJfSKcDV=dungdT6hjg@mail.gmail.com>
Message-ID: <VI1PR0202MB3357C8AE14B2202164F23229F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>

Hi Ista,

No worry :)

"/path/to/dir" is what I call hardcoded path.
And I do want to work with relative paths in code, not interacticely.

I (but not only I actually!) need genuine relative paths especially for inputting or outputting files in a location "close" (e.g. parent or child folder) to where the R script is located.

I'm looking for the equivalent of the function cd in batch / shell, for instance, or __DIR__ in PHP, or %sysget(SAS_EXECFILEPATH) in SAS, etc.

Is it clearer now?

Best regards,

Olivier

________________________________
De : Ista Zahn <istazahn at gmail.com>
Envoy? : samedi 6 octobre 2018 16:40
? : olivier_givaudan at hotmail.com; r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

Hi Olivier,

Sorry for misspelling your name! Please see inline below.

On Sat, Oct 6, 2018 at 9:58 AM Olivier GIVAUDAN
<olivier_givaudan at hotmail.com> wrote:
>
> Hi Ista,
>
> Thank you for your reply.
>
> My motivation is described at the 3rd line of my initial message:
> "if I move all my scripts related to some project as a whole to another location of my computer or someone else's computer, if want my scripts to continue to run seamlessly."
>
> The main point is simply to avoid any hardcoded path in my R scripts, as you wrote in your examples.

My claim is that you cannot avoid hardcoding paths. Even if the
feature you requested existed, you would still have to do e.g.,

source("/path/to/dir/file.R")

That is just as much hard-coded as the (only slightly more verbose)

cd("/path/to/dir")
source("file.R")

So, I'm afraid I still don't get it. What is it that you actually want
to do that you currently cannot?

Best,
Ista
>
> BTW I don't use R with command line, only within RStudio or with the default GUI.
>
> Best regards,
>
> Olivier (and not Oliver )
> ________________________________
> De : Ista Zahn <istazahn at gmail.com>
> Envoy? : samedi 6 octobre 2018 12:56
> ? : olivier_givaudan at hotmail.com
> Cc : r-help at r-project.org
> Objet : Re: [R] Genuine relative paths with R
>
> Hi Oliver,
>
> Interesting question. Can you describe your motivation in a little
> more detail? That is, why do you what this feature? I ask because to
> my way of thinking you have to know the path to the script in order to
> call it in the first place. If calling from R, is
>
> setwd("/path/to/dir")
> source("file.R")
>
> really so much worse than
>
> source("path/to/dir/file.R")
>
> ?  If it is worse, why?
>
> Similarly if calling from a shell, is
>
> cd /path/to/dir
> Rscript file.R
>
> really so much worse than
>
> Rscript /path/to/dir/file.R
>
> ? Again, if is worse, why?
>
> Best,
> Ista
> On Sat, Oct 6, 2018 at 8:25 AM Olivier GIVAUDAN
> <olivier_givaudan at hotmail.com> wrote:
> >
> > Dear R users,
> >
> > I would like to work with genuine relative paths in R for obvious reasons: if I move all my scripts related to some project as a whole to another location of my computer or someone else's computer, if want my scripts to continue to run seamlessly.
> >
> > What I mean by "genuine" is that it should not be necessary to hardcode one single absolute path (making the code obviously not "portable" - to another place - anymore).
> >
> > For the time being, I found the following related posts, unfortunately never conclusive or even somewhat off-topic:
> > https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
> > https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
> > http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
> >
> > So I found 2 workarounds, more or less satisfactory:
> >
> >
> >   1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.
> >   2.  Or create an R project file with RStudio and use the package "here" to get the absolute path of the R project file and put all the R scripts related to this project in the R project directory, as often recommended.
> >
> > But I am really wondering why R doesn't have (please tell me if I'm wrong) this basic feature as many other languages have it (batch, shell, C, LaTeX, SAS with macro-variables, etc.)?
> > Do you know whether the language will have this kind of function in a near future? What are the obstacles / what is the reasoning for not having it already?
> >
> > Do you know other workarounds?
> >
> > Best regards,
> >
> > Olivier
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From olivier_giv@ud@n @ending from hotm@il@com  Sat Oct  6 23:36:21 2018
From: olivier_giv@ud@n @ending from hotm@il@com (Olivier GIVAUDAN)
Date: Sat, 6 Oct 2018 21:36:21 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <EF096B6D-D167-402E-A1BB-9310D60E6F64@dcn.davis.ca.us>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <EF096B6D-D167-402E-A1BB-9310D60E6F64@dcn.davis.ca.us>
Message-ID: <VI1PR0202MB33571A964A191D165B3BF422F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>

Hi Jeff,

Thanks for sharing your workaround.

I guess my last answer to Ista answers your question as well.

To me this function (an equivalent of 'cd', say) should be platform-independent.

Best regards,

Olivier

________________________________
De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
Envoy? : samedi 6 octobre 2018 19:31
? : r-help at r-project.org; Olivier GIVAUDAN; r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

I stopped using hardcoded absolute paths inside R scripts years ago, and I suspect that is fairly common practice. That is, I almost never enter a path starting with "/" or "c:/" in an R script.

The key concession you have to make is to start your R session in your working directory using OS-specific mechanisms, and then reference your code and data relative to that directory. RStudio project files offer one mechanism for doing this; using CD from the OS command line is another, and using the file-browser double-click mechanism on .RData files is another (though I prefer to avoid that these days due to potential global environment contamination).

Perhaps you can be more specific about what facilities you are expecting to find. You should also mention what OS you typically use and how you normally start R.

On October 6, 2018 4:48:44 AM PDT, Olivier GIVAUDAN <olivier_givaudan at hotmail.com> wrote:
>Dear R users,
>
>I would like to work with genuine relative paths in R for obvious
>reasons: if I move all my scripts related to some project as a whole to
>another location of my computer or someone else's computer, if want my
>scripts to continue to run seamlessly.
>
>What I mean by "genuine" is that it should not be necessary to hardcode
>one single absolute path (making the code obviously not "portable" - to
>another place - anymore).
>
>For the time being, I found the following related posts, unfortunately
>never conclusive or even somewhat off-topic:
>https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
>https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
>http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
>
>So I found 2 workarounds, more or less satisfactory:
>
>
>1.  Either create a variable "ScriptPath" in the first lines of each of
>my R scripts and run a batch (or shell, etc.) to replace every single
>occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R
>script]" in all the R scripts located in the folder (and possibly
>subfolders) of the batch file.
>2.  Or create an R project file with RStudio and use the package "here"
>to get the absolute path of the R project file and put all the R
>scripts related to this project in the R project directory, as often
>recommended.
>
>But I am really wondering why R doesn't have (please tell me if I'm
>wrong) this basic feature as many other languages have it (batch,
>shell, C, LaTeX, SAS with macro-variables, etc.)?
>Do you know whether the language will have this kind of function in a
>near future? What are the obstacles / what is the reasoning for not
>having it already?
>
>Do you know other workarounds?
>
>Best regards,
>
>Olivier
>
>       [[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

--
Sent from my phone. Please excuse my brevity.

	[[alternative HTML version deleted]]


From @ubh@mitr@@p@tr@ @ending from gm@il@com  Sun Oct  7 12:03:54 2018
From: @ubh@mitr@@p@tr@ @ending from gm@il@com (Subhamitra Patra)
Date: Sun, 7 Oct 2018 15:33:54 +0530
Subject: [R] 
 Requesting for help on the problem of "subscript out of bounds"
In-Reply-To: <CA+8X3fXBGSkQX1jdu_AeSQPv-sGTcPusfKzJ5LBbjwoXwGUSEA@mail.gmail.com>
References: <s00fgd43bpmvp8d126tra105.1538817508046@email.android.com>
 <CAOFE=kN4opv9-pp0QnN76UqHymr1ROoX9_P9fE=-M+j=x2qGQw@mail.gmail.com>
 <8a802382-6dfd-feca-503a-eb65710aa7b3@sapo.pt>
 <CAOFE=kNz-za=i44_XuqQYtQyvdswvWmUYjAV+48sb6ZSSwgRBA@mail.gmail.com>
 <16c267c6-fa89-7105-9203-3e6000124aa5@sapo.pt>
 <CAOFE=kNhLWKPy47e86dcXVsetCVQAQA=2hGDqX-Os3aOVLOtoA@mail.gmail.com>
 <CA+8X3fXBGSkQX1jdu_AeSQPv-sGTcPusfKzJ5LBbjwoXwGUSEA@mail.gmail.com>
Message-ID: <CAOFE=kOy847c_eT2nBtT_4530ObGDkuCVmzJOUwze7n+cLnbsQ@mail.gmail.com>

Thanks a lot, Sir. I'll check them out.

But, I have 1 more query that in which package   "b" and "l" functions are
available?

Can you please educate me about the usage of "b" and "I" in my code.

For your reference,

I am writing my code here again.

N<-ncol(ts)
> r<-matrix(0, ncol = N, nrow = 1)
> for (i in 1:N){
       r[i]<-approx_entropy(ts[,i], edim = 2, r = 0.2*sd(ts[,i]), elag = 1)
}
plot (r)

Here how to add "b" and "l" function?

Please help me.

Thanks in advance.

On Sun, Oct 7, 2018 at 3:19 PM Jim Lemon <drjimlemon at gmail.com> wrote:

> plot(r) will give you a set of points with the values of r on the y
> axis and 1:N on the x axis. If you want to add more series, look at
> "points" or "lines". Also look at the options "b" and "l" for plot if
> you want points and lines or just lines respectively.
>
> Jim
>
> On Sun, Oct 7, 2018 at 6:03 PM Subhamitra Patra
> <subhamitra.patra at gmail.com> wrote:
> >
> > Hello friends,
> >
> > Finally, I became able to compute APEn values for each series.
> >
> > Actually, there was a small mistake in the code for the arguments of row
> and columns. Now, after rectifying my mistakes as well as by taking the
> suggestions from Rui Barradas and Jim, It became possible. Therefore, I
> would like to say thanks to both of you.
> >
> > One small help (if possible) that I want to plot that particular APEn
> values for each series.
> > Only, I will write the code "plot (r)" or any other code is there?
> >
> > Please help.
> >
> > Thanks in advance.
>


-- 
*Best Regards,*
*Subhamitra Patra*
*Phd. Research Scholar*
*Department of Humanities and Social Sciences*
*Indian Institute of Technology, Kharagpur*
*INDIA*

	[[alternative HTML version deleted]]


From @ubh@mitr@@p@tr@ @ending from gm@il@com  Sun Oct  7 13:29:01 2018
From: @ubh@mitr@@p@tr@ @ending from gm@il@com (Subhamitra Patra)
Date: Sun, 7 Oct 2018 16:59:01 +0530
Subject: [R] 
 Requesting for help on the problem of "subscript out of bounds"
In-Reply-To: <CAOFE=kOy847c_eT2nBtT_4530ObGDkuCVmzJOUwze7n+cLnbsQ@mail.gmail.com>
References: <s00fgd43bpmvp8d126tra105.1538817508046@email.android.com>
 <CAOFE=kN4opv9-pp0QnN76UqHymr1ROoX9_P9fE=-M+j=x2qGQw@mail.gmail.com>
 <8a802382-6dfd-feca-503a-eb65710aa7b3@sapo.pt>
 <CAOFE=kNz-za=i44_XuqQYtQyvdswvWmUYjAV+48sb6ZSSwgRBA@mail.gmail.com>
 <16c267c6-fa89-7105-9203-3e6000124aa5@sapo.pt>
 <CAOFE=kNhLWKPy47e86dcXVsetCVQAQA=2hGDqX-Os3aOVLOtoA@mail.gmail.com>
 <CA+8X3fXBGSkQX1jdu_AeSQPv-sGTcPusfKzJ5LBbjwoXwGUSEA@mail.gmail.com>
 <CAOFE=kOy847c_eT2nBtT_4530ObGDkuCVmzJOUwze7n+cLnbsQ@mail.gmail.com>
Message-ID: <CAOFE=kOBRY++O=hfV0MhRKHcAGYOOJXB4AkfGhrc9FHHFgz6ZA@mail.gmail.com>

Dear Friends,

Further, I want to compute the APEn values for the multiple files in a
folder. In particular, along with the loop for the columns in one data file
(through the code that I mentioned above), I have to write a loop for the
multiple files (having same dimensions) in a folder.

But, I am not getting a proper idea for writing the double loop (i.e. one
for the multiple columns of one excel sheet and other for the multiple
excel sheets of a folder).

Please help me in this regard.

Thanks in advance.

On Sun, Oct 7, 2018 at 3:33 PM Subhamitra Patra <subhamitra.patra at gmail.com>
wrote:

> Thanks a lot, Sir. I'll check them out.
>
> But, I have 1 more query that in which package   "b" and "l" functions
> are available?
>
> Can you please educate me about the usage of "b" and "I" in my code.
>
> For your reference,
>
> I am writing my code here again.
>
> N<-ncol(ts)
> > r<-matrix(0, ncol = N, nrow = 1)
> > for (i in 1:N){
>        r[i]<-approx_entropy(ts[,i], edim = 2, r = 0.2*sd(ts[,i]), elag = 1)
> }
> plot (r)
>
> Here how to add "b" and "l" function?
>
> Please help me.
>
> Thanks in advance.
>
> On Sun, Oct 7, 2018 at 3:19 PM Jim Lemon <drjimlemon at gmail.com> wrote:
>
>> plot(r) will give you a set of points with the values of r on the y
>> axis and 1:N on the x axis. If you want to add more series, look at
>> "points" or "lines". Also look at the options "b" and "l" for plot if
>> you want points and lines or just lines respectively.
>>
>> Jim
>>
>> On Sun, Oct 7, 2018 at 6:03 PM Subhamitra Patra
>> <subhamitra.patra at gmail.com> wrote:
>> >
>> > Hello friends,
>> >
>> > Finally, I became able to compute APEn values for each series.
>> >
>> > Actually, there was a small mistake in the code for the arguments of
>> row and columns. Now, after rectifying my mistakes as well as by taking the
>> suggestions from Rui Barradas and Jim, It became possible. Therefore, I
>> would like to say thanks to both of you.
>> >
>> > One small help (if possible) that I want to plot that particular APEn
>> values for each series.
>> > Only, I will write the code "plot (r)" or any other code is there?
>> >
>> > Please help.
>> >
>> > Thanks in advance.
>>
>
>
> --
> *Best Regards,*
> *Subhamitra Patra*
> *Phd. Research Scholar*
> *Department of Humanities and Social Sciences*
> *Indian Institute of Technology, Kharagpur*
> *INDIA*
>


-- 
*Best Regards,*
*Subhamitra Patra*
*Phd. Research Scholar*
*Department of Humanities and Social Sciences*
*Indian Institute of Technology, Kharagpur*
*INDIA*

	[[alternative HTML version deleted]]


From i@t@z@hn @ending from gm@il@com  Sun Oct  7 14:37:10 2018
From: i@t@z@hn @ending from gm@il@com (Ista Zahn)
Date: Sun, 7 Oct 2018 08:37:10 -0400
Subject: [R] Genuine relative paths with R
In-Reply-To: <VI1PR0202MB3357C6E7C9CBE5E33D9546A9F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <CA+vqiLGxq1_LPgOqNVWC+=e9deTzMCwgJx0G6X26kF-1vWZc5Q@mail.gmail.com>
 <VI1PR0202MB3357776AA39CD2305C0FA141F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <CA+vqiLFoxUe=4-KLN7ebcTwRoR95R0cSJfSKcDV=dungdT6hjg@mail.gmail.com>
 <VI1PR0202MB3357C6E7C9CBE5E33D9546A9F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
Message-ID: <CA+vqiLFqRHpp-WR2g1Eg6J_KV15nNqABunWFE0CSsftgAm9xWQ@mail.gmail.com>

Hi Olivier,

Please keep the list copied so others can join our discussion.
On Sat, Oct 6, 2018 at 4:39 PM Olivier GIVAUDAN
<olivier_givaudan at hotmail.com> wrote:
>
> Hi Ista,
>
> No worry :)
>
> "/path/to/dir" is what I call hardcoded path.

Yes, we share the same definition :-)

> And I do want to work with relative paths in code, not interacticely.

Yes, using relative paths in code is a good idea. We agree about this also!

>
> I (but not only I actually!) need genuine relative paths especially for inputting or outputting files in a location "close" (e.g. parent or child folder) to where the R script is located.

You still have not explained why!

>
> I'm looking for the equivalent of the function cd in batch / shell, for instance, or __DIR__ in PHP, or %sysget(SAS_EXECFILEPATH) in SAS, etc.
>
> Is it clearer now?

I'm not confused about what you are asking for. I'm only asking for
more details about why you think you need it. Again, my claim is that
all this feature would do is allow the user of the script to
interactively call it with e.g.,

Rscript /path/to/dir/file.R

instead of

cd /path/to/dir/file.R
Rscript file.R

Note that I assume that only relative paths are used in the scripts.
The path is specified by the user when running the script, and this
cannot be avoided. Thus some "auto setwd to the source file directory"
would serve only as a minor convenience that enables my first from
above as opposed to my second form. Is this the benefit you are hoping
for, or is there some other reason you want this feature?

Note that when calling from R you can already to

source("/path/to/dir/file.R", chdir = TRUE)

Best,
Ista

>
> Best regards,
>
> Olivier
>
> ________________________________
> De : Ista Zahn <istazahn at gmail.com>
> Envoy? : samedi 6 octobre 2018 16:40
> ? : olivier_givaudan at hotmail.com; r-help at r-project.org
> Objet : Re: [R] Genuine relative paths with R
>
> Hi Olivier,
>
> Sorry for misspelling your name! Please see inline below.
>
> On Sat, Oct 6, 2018 at 9:58 AM Olivier GIVAUDAN
> <olivier_givaudan at hotmail.com> wrote:
> >
> > Hi Ista,
> >
> > Thank you for your reply.
> >
> > My motivation is described at the 3rd line of my initial message:
> > "if I move all my scripts related to some project as a whole to another location of my computer or someone else's computer, if want my scripts to continue to run seamlessly."
> >
> > The main point is simply to avoid any hardcoded path in my R scripts, as you wrote in your examples.
>
> My claim is that you cannot avoid hardcoding paths. Even if the
> feature you requested existed, you would still have to do e.g.,
>
> source("/path/to/dir/file.R")
>
> That is just as much hard-coded as the (only slightly more verbose)
>
> cd("/path/to/dir")
> source("file.R")
>
> So, I'm afraid I still don't get it. What is it that you actually want
> to do that you currently cannot?
>
> Best,
> Ista
> >
> > BTW I don't use R with command line, only within RStudio or with the default GUI.
> >
> > Best regards,
> >
> > Olivier (and not Oliver )
> > ________________________________
> > De : Ista Zahn <istazahn at gmail.com>
> > Envoy? : samedi 6 octobre 2018 12:56
> > ? : olivier_givaudan at hotmail.com
> > Cc : r-help at r-project.org
> > Objet : Re: [R] Genuine relative paths with R
> >
> > Hi Oliver,
> >
> > Interesting question. Can you describe your motivation in a little
> > more detail? That is, why do you what this feature? I ask because to
> > my way of thinking you have to know the path to the script in order to
> > call it in the first place. If calling from R, is
> >
> > setwd("/path/to/dir")
> > source("file.R")
> >
> > really so much worse than
> >
> > source("path/to/dir/file.R")
> >
> > ?  If it is worse, why?
> >
> > Similarly if calling from a shell, is
> >
> > cd /path/to/dir
> > Rscript file.R
> >
> > really so much worse than
> >
> > Rscript /path/to/dir/file.R
> >
> > ? Again, if is worse, why?
> >
> > Best,
> > Ista
> > On Sat, Oct 6, 2018 at 8:25 AM Olivier GIVAUDAN
> > <olivier_givaudan at hotmail.com> wrote:
> > >
> > > Dear R users,
> > >
> > > I would like to work with genuine relative paths in R for obvious reasons: if I move all my scripts related to some project as a whole to another location of my computer or someone else's computer, if want my scripts to continue to run seamlessly.
> > >
> > > What I mean by "genuine" is that it should not be necessary to hardcode one single absolute path (making the code obviously not "portable" - to another place - anymore).
> > >
> > > For the time being, I found the following related posts, unfortunately never conclusive or even somewhat off-topic:
> > > https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
> > > https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
> > > http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
> > >
> > > So I found 2 workarounds, more or less satisfactory:
> > >
> > >
> > >   1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.
> > >   2.  Or create an R project file with RStudio and use the package "here" to get the absolute path of the R project file and put all the R scripts related to this project in the R project directory, as often recommended.
> > >
> > > But I am really wondering why R doesn't have (please tell me if I'm wrong) this basic feature as many other languages have it (batch, shell, C, LaTeX, SAS with macro-variables, etc.)?
> > > Do you know whether the language will have this kind of function in a near future? What are the obstacles / what is the reasoning for not having it already?
> > >
> > > Do you know other workarounds?
> > >
> > > Best regards,
> > >
> > > Olivier
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.


From li@t@ @ending from dewey@myzen@co@uk  Sun Oct  7 14:46:47 2018
From: li@t@ @ending from dewey@myzen@co@uk (Michael Dewey)
Date: Sun, 7 Oct 2018 13:46:47 +0100
Subject: [R] 
 Requesting for help on the problem of "subscript out of bounds"
In-Reply-To: <CAOFE=kOy847c_eT2nBtT_4530ObGDkuCVmzJOUwze7n+cLnbsQ@mail.gmail.com>
References: <s00fgd43bpmvp8d126tra105.1538817508046@email.android.com>
 <CAOFE=kN4opv9-pp0QnN76UqHymr1ROoX9_P9fE=-M+j=x2qGQw@mail.gmail.com>
 <8a802382-6dfd-feca-503a-eb65710aa7b3@sapo.pt>
 <CAOFE=kNz-za=i44_XuqQYtQyvdswvWmUYjAV+48sb6ZSSwgRBA@mail.gmail.com>
 <16c267c6-fa89-7105-9203-3e6000124aa5@sapo.pt>
 <CAOFE=kNhLWKPy47e86dcXVsetCVQAQA=2hGDqX-Os3aOVLOtoA@mail.gmail.com>
 <CA+8X3fXBGSkQX1jdu_AeSQPv-sGTcPusfKzJ5LBbjwoXwGUSEA@mail.gmail.com>
 <CAOFE=kOy847c_eT2nBtT_4530ObGDkuCVmzJOUwze7n+cLnbsQ@mail.gmail.com>
Message-ID: <fc20ac89-6201-04f6-a3db-7fb16f2f05f9@dewey.myzen.co.uk>

If you look at the documentation for plot() you will see a type 
parameter which can take a number of values including plot = "l" to get 
lines, and so on.

On 07/10/2018 11:03, Subhamitra Patra wrote:
> Thanks a lot, Sir. I'll check them out.
> 
> But, I have 1 more query that in which package   "b" and "l" functions are
> available?
> 
> Can you please educate me about the usage of "b" and "I" in my code.
> 
> For your reference,
> 
> I am writing my code here again.
> 
> N<-ncol(ts)
>> r<-matrix(0, ncol = N, nrow = 1)
>> for (i in 1:N){
>         r[i]<-approx_entropy(ts[,i], edim = 2, r = 0.2*sd(ts[,i]), elag = 1)
> }
> plot (r)
> 
> Here how to add "b" and "l" function?
> 
> Please help me.
> 
> Thanks in advance.
> 
> On Sun, Oct 7, 2018 at 3:19 PM Jim Lemon <drjimlemon at gmail.com> wrote:
> 
>> plot(r) will give you a set of points with the values of r on the y
>> axis and 1:N on the x axis. If you want to add more series, look at
>> "points" or "lines". Also look at the options "b" and "l" for plot if
>> you want points and lines or just lines respectively.
>>
>> Jim
>>
>> On Sun, Oct 7, 2018 at 6:03 PM Subhamitra Patra
>> <subhamitra.patra at gmail.com> wrote:
>>>
>>> Hello friends,
>>>
>>> Finally, I became able to compute APEn values for each series.
>>>
>>> Actually, there was a small mistake in the code for the arguments of row
>> and columns. Now, after rectifying my mistakes as well as by taking the
>> suggestions from Rui Barradas and Jim, It became possible. Therefore, I
>> would like to say thanks to both of you.
>>>
>>> One small help (if possible) that I want to plot that particular APEn
>> values for each series.
>>> Only, I will write the code "plot (r)" or any other code is there?
>>>
>>> Please help.
>>>
>>> Thanks in advance.
>>
> 
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From @ubh@mitr@@p@tr@ @ending from gm@il@com  Sun Oct  7 15:29:28 2018
From: @ubh@mitr@@p@tr@ @ending from gm@il@com (Subhamitra Patra)
Date: Sun, 7 Oct 2018 18:59:28 +0530
Subject: [R] 
 Requesting for help on the problem of "subscript out of bounds"
In-Reply-To: <fc20ac89-6201-04f6-a3db-7fb16f2f05f9@dewey.myzen.co.uk>
References: <s00fgd43bpmvp8d126tra105.1538817508046@email.android.com>
 <CAOFE=kN4opv9-pp0QnN76UqHymr1ROoX9_P9fE=-M+j=x2qGQw@mail.gmail.com>
 <8a802382-6dfd-feca-503a-eb65710aa7b3@sapo.pt>
 <CAOFE=kNz-za=i44_XuqQYtQyvdswvWmUYjAV+48sb6ZSSwgRBA@mail.gmail.com>
 <16c267c6-fa89-7105-9203-3e6000124aa5@sapo.pt>
 <CAOFE=kNhLWKPy47e86dcXVsetCVQAQA=2hGDqX-Os3aOVLOtoA@mail.gmail.com>
 <CA+8X3fXBGSkQX1jdu_AeSQPv-sGTcPusfKzJ5LBbjwoXwGUSEA@mail.gmail.com>
 <CAOFE=kOy847c_eT2nBtT_4530ObGDkuCVmzJOUwze7n+cLnbsQ@mail.gmail.com>
 <fc20ac89-6201-04f6-a3db-7fb16f2f05f9@dewey.myzen.co.uk>
Message-ID: <CAOFE=kNNfc2vpAYwXEf1XNrD7eWr9_-y1nEmqYSK_eDqbEEjNw@mail.gmail.com>

Thanks a lot.

On Sun, Oct 7, 2018 at 6:16 PM Michael Dewey <lists at dewey.myzen.co.uk>
wrote:

> If you look at the documentation for plot() you will see a type
> parameter which can take a number of values including plot = "l" to get
> lines, and so on.
>
> On 07/10/2018 11:03, Subhamitra Patra wrote:
> > Thanks a lot, Sir. I'll check them out.
> >
> > But, I have 1 more query that in which package   "b" and "l" functions
> are
> > available?
> >
> > Can you please educate me about the usage of "b" and "I" in my code.
> >
> > For your reference,
> >
> > I am writing my code here again.
> >
> > N<-ncol(ts)
> >> r<-matrix(0, ncol = N, nrow = 1)
> >> for (i in 1:N){
> >         r[i]<-approx_entropy(ts[,i], edim = 2, r = 0.2*sd(ts[,i]), elag
> = 1)
> > }
> > plot (r)
> >
> > Here how to add "b" and "l" function?
> >
> > Please help me.
> >
> > Thanks in advance.
> >
> > On Sun, Oct 7, 2018 at 3:19 PM Jim Lemon <drjimlemon at gmail.com> wrote:
> >
> >> plot(r) will give you a set of points with the values of r on the y
> >> axis and 1:N on the x axis. If you want to add more series, look at
> >> "points" or "lines". Also look at the options "b" and "l" for plot if
> >> you want points and lines or just lines respectively.
> >>
> >> Jim
> >>
> >> On Sun, Oct 7, 2018 at 6:03 PM Subhamitra Patra
> >> <subhamitra.patra at gmail.com> wrote:
> >>>
> >>> Hello friends,
> >>>
> >>> Finally, I became able to compute APEn values for each series.
> >>>
> >>> Actually, there was a small mistake in the code for the arguments of
> row
> >> and columns. Now, after rectifying my mistakes as well as by taking the
> >> suggestions from Rui Barradas and Jim, It became possible. Therefore, I
> >> would like to say thanks to both of you.
> >>>
> >>> One small help (if possible) that I want to plot that particular APEn
> >> values for each series.
> >>> Only, I will write the code "plot (r)" or any other code is there?
> >>>
> >>> Please help.
> >>>
> >>> Thanks in advance.
> >>
> >
> >
>
> --
> Michael
> http://www.dewey.myzen.co.uk/home.html
>


-- 
*Best Regards,*
*Subhamitra Patra*
*Phd. Research Scholar*
*Department of Humanities and Social Sciences*
*Indian Institute of Technology, Kharagpur*
*INDIA*

	[[alternative HTML version deleted]]


From miluji@b @ending from gm@il@com  Sun Oct  7 19:58:31 2018
From: miluji@b @ending from gm@il@com (Miluji Sb)
Date: Sun, 7 Oct 2018 19:58:31 +0200
Subject: [R] Smoothing by group - Panel data - exponential/loess
Message-ID: <CAMLwc7M8ktB0ennwkaErfrfmkYpanxmy9TVD1WZ_hrg8+dAtBA@mail.gmail.com>

Dear all,

I have panel data for a series (g) for three time periods. The variable is
likely autocorrelated. I would like to generate a new variable using
exponential/loess smoothing by group (gid).

For time series, I could have done something like this;

smoothdf <- data.frame(
  x = 1:n,
  y = as.vector(smooth(dat$g)),
  method = "smooth()"
)

But confused about the panel data setting. Apologies if this a stat
question along with an R query. Any help will be greatly appreciated.

### data
structure(list(gid = c(1L, 1L, 1L, 2L, 2L, 2L, 3L, 3L, 3L, 4L,
4L, 4L, 5L, 5L, 5L, 6L, 6L, 6L, 7L, 7L, 7L, 8L, 8L, 8L, 9L, 9L,
9L), year = c(2030L, 2050L, 2100L, 2030L, 2050L, 2100L, 2030L,
2050L, 2100L, 2030L, 2050L, 2100L, 2030L, 2050L, 2100L, 2030L,
2050L, 2100L, 2030L, 2050L, 2100L, 2030L, 2050L, 2100L, 2030L,
2050L, 2100L), g = c(9.24e-05, 0.0001133, 6.3e-05, 7.72e-10,
1.41e-09, 4.68e-09, 0.0001736, 0.0002286, 0.0001541, 1.87e-15,
3.76e-15, 8.52e-15, 0.0001822, 0.0002391, 0.0001348, 3.69e-06,
8.11e-06, 8.63e-06, 3.41e-06, 7.32e-06, 7.18e-06, 8.47e-07, 1.83e-06,
1.84e-06, 1.13e-06, 2.37e-06, 2.15e-06)), class = "data.frame", row.names =
c(NA,
-27L))


Sincerely,

Milu

	[[alternative HTML version deleted]]


From bgunter@4567 @ending from gm@il@com  Sun Oct  7 22:42:56 2018
From: bgunter@4567 @ending from gm@il@com (Bert Gunter)
Date: Sun, 7 Oct 2018 13:42:56 -0700
Subject: [R] Smoothing by group - Panel data - exponential/loess
In-Reply-To: <CAMLwc7M8ktB0ennwkaErfrfmkYpanxmy9TVD1WZ_hrg8+dAtBA@mail.gmail.com>
References: <CAMLwc7M8ktB0ennwkaErfrfmkYpanxmy9TVD1WZ_hrg8+dAtBA@mail.gmail.com>
Message-ID: <CAGxFJbQXSP_WQ0z1+ooB_ZiVeMiz_rCTzWy6qC6=zPt-qxV94w@mail.gmail.com>

1. This doesn't make much sense:

smoothdf <- data.frame(
  x = 1:n,
  y = as.vector(smooth(dat$g)),
  method = "smooth()"
)

What do you think the "method" invocation does (data.frame has no "method"
argument)?

2. Show us what you have tried -- it depends on what graphics system you
use. In lattice and ggplot2, for example, it's pretty basic. In base
graphics, see ?scatter.smooth, for example -- it would have to be called
for each separate group, of course. See e.g. ?tapply and friends for
processig by separate groups. I'd also suggest that you spend time with a
basic R tutorial or two, where this sort of thing is usually covered.

3. Numerous packages also do this: searching on "plot smooth curves by
groups" on rseek.org brought up lots of stuff.

Cheers,
Bert





Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sun, Oct 7, 2018 at 10:59 AM Miluji Sb <milujisb at gmail.com> wrote:

> Dear all,
>
> I have panel data for a series (g) for three time periods. The variable is
> likely autocorrelated. I would like to generate a new variable using
> exponential/loess smoothing by group (gid).
>
> For time series, I could have done something like this;
>
> smoothdf <- data.frame(
>   x = 1:n,
>   y = as.vector(smooth(dat$g)),
>   method = "smooth()"
> )
>
> But confused about the panel data setting. Apologies if this a stat
> question along with an R query. Any help will be greatly appreciated.
>
> ### data
> structure(list(gid = c(1L, 1L, 1L, 2L, 2L, 2L, 3L, 3L, 3L, 4L,
> 4L, 4L, 5L, 5L, 5L, 6L, 6L, 6L, 7L, 7L, 7L, 8L, 8L, 8L, 9L, 9L,
> 9L), year = c(2030L, 2050L, 2100L, 2030L, 2050L, 2100L, 2030L,
> 2050L, 2100L, 2030L, 2050L, 2100L, 2030L, 2050L, 2100L, 2030L,
> 2050L, 2100L, 2030L, 2050L, 2100L, 2030L, 2050L, 2100L, 2030L,
> 2050L, 2100L), g = c(9.24e-05, 0.0001133, 6.3e-05, 7.72e-10,
> 1.41e-09, 4.68e-09, 0.0001736, 0.0002286, 0.0001541, 1.87e-15,
> 3.76e-15, 8.52e-15, 0.0001822, 0.0002391, 0.0001348, 3.69e-06,
> 8.11e-06, 8.63e-06, 3.41e-06, 7.32e-06, 7.18e-06, 8.47e-07, 1.83e-06,
> 1.84e-06, 1.13e-06, 2.37e-06, 2.15e-06)), class = "data.frame", row.names =
> c(NA,
> -27L))
>
>
> Sincerely,
>
> Milu
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewmil @ending from dcn@d@vi@@c@@u@  Sun Oct  7 22:48:06 2018
From: jdnewmil @ending from dcn@d@vi@@c@@u@ (Jeff Newmiller)
Date: Sun, 7 Oct 2018 13:48:06 -0700 (PDT)
Subject: [R] Genuine relative paths with R
In-Reply-To: <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <EF096B6D-D167-402E-A1BB-9310D60E6F64@dcn.davis.ca.us>
 <VI1PR0202MB33571A964A191D165B3BF422F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <292ca297-27e3-162b-e525-fabc4bb4554c@kogentum.hu>
 <VI1PR0202MB3357E9066FF1527BAC014784F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <dbde4f15-caa6-dc62-3a10-e804cc81671a@kogentum.hu>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
Message-ID: <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>

On Sun, 7 Oct 2018, Olivier GIVAUDAN wrote:

> Hello Denes,
> 
> > Yes, the path to the "root" folder of your project. You seem to have a?
> really esoteric context if you want to run an R script without knowing?
> its path in the file system.
> 
> I don't have any esoteric context: I'm just looking for the most generic, automatic and reproducible solution.
> Of course you always know where an R script is located, nevertheless it doesn't imply you want to manually write its path in this
> R script. The issue is to have to hardcode an absolute path: I don't want that.
> 
> >?Because it is extremely rare that someone - who uses R for what it is?
> worth and in a manner how R is supposed to be used - actually needs such?
> a function.
>

> First, the fact that it is rare doesn't mean this need is not legitimate 
> and relevant: it is needed to make R projects fully movable (i.e. 
> wherever you want). Second why a vast majority of languages does have 
> this feature and not R? Why is it useful in these languages and not in 
> R?

The R interpreter does not make assumptions about where the code it is 
running came from. You might be running it by using the source() function, 
or by using the Rscript program, or by R CMD BATCH, or using eval() on 
code you pasted together in an R function, or as byte-compiled code loaded 
from an RData file. That is, there is not always a file in a particular 
directory even involved in the executing code.

You also keep referring to "this feature" being in many languages, though 
you seem to be mistaken about most of them... in fact, they, too, know NOT 
where the script is but where the current directory is ($PWD is the same 
as getwd()) or where the compilation occurred (__FILE__ in C relates to 
the source code directory that is usually not where the executable is 
located and may not even exist on the computer it is running on).

I have already pointed out that the solution is to let the OS set the 
current directory. If you want the user to have access to R independent of 
your code, the easiest way to leave them in Rgui after your code is done 
is to use save.image() to create a "myApp.RData" file which can be 
double-clicked [1]. The double-clicking action by default (as defined by 
the installation of R) causes the operating system to set the current 
directory to the one containing the file you double-clicked on and then 
executes the Rgui program.

If you don't want the user to interact with your session, you can use the 
Rscript executable (also mentioned briefly at the bottom of [1]). In both 
cases, the user has (unknowingly) set the current directory before running 
your code, and there is no need to encode where the script is or was 
inside the script.

You can also create a windows shortcut to invoke Rscript yourself by 
bootstrapping the RData file and invoking the 
R.utils::createWindowsShortcut() [2] function.

However, by far the best approach is to teach your users to fish... if you 
give them an RStudio project directory they can double-click on the .Rproj 
file to set the current directory and enter the world of R.

[1] https://www.r-bloggers.com/look-ma-no-typing-autorunning-code-on-r-startup/
[2] https://cran.r-project.org/web/packages/R.utils/R.utils.pdf

End comment.

> Best regards,
> 
> Olivier
> 
> _________________________________________________________________________________________________________________________________
> De : D?nes T?th <toth.denes at kogentum.hu>
> Envoy? : samedi 6 octobre 2018 23:36
> ? : Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
> Objet : Re: [R] Genuine relative paths with R ?
> Hi Olivier,
> 
> 
> On 10/07/2018 01:13 AM, Olivier GIVAUDAN wrote:
> > Hi Denes,
> >
> > Thank you for the possibility you shared: unfortunately it still uses
> > one hardcoded absolute path which I want to avoid.
> 
> Yes, the path to the "root" folder of your project. You seem to have a
> really esoteric context if you want to run an R script without knowing
> its path in the file system.
> 
> >
> > I just think that the solutions suggested are too complicated for my
> > simple need.
> >
> > The root cause being that R doesn't seem to have the Windows batch
> > equivalent of cd, or bash equivalent of $PWD, or PHP equivalent of __DIR__.
> > Hence the workarounds we are discussing.
> >
> > And finally we go back to my initial question: if such a function
> > doesn't exist in R, what are the reasons?
> 
> Because it is extremely rare that someone - who uses R for what it is
> worth and in a manner how R is supposed to be used - actually needs such
> a function.
> 
> Best,
> Denes
> 
> 
> 
> >
> > Best regards,
> >
> > Olivier
> > ------------------------------------------------------------------------
> > *De :* D?nes T?th <toth.denes at kogentum.hu>
> > *Envoy? :* samedi 6 octobre 2018 23:05
> > *?:* Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
> > *Objet :* Re: [R] Genuine relative paths with R
> > Hi Olivier,
> >
> > I really think that Ista and Jeff gave you plenty of useful options how
> > you can avoid using absolute paths.
> >
> > One more possibility: you can use `source()` with the chdir = TRUE
> > argument (see ?source). If you have a master script which sources other
> > files which are located in a fixed hierarchy relative to the location of
> > the master script, the only time when you have to use an absolute path
> > is when you source your master script, e.g.:
> > source("/my/path/to/master.R", chdir = TRUE)
> >
> > Inside the master script, you can then source the other scripts by
> > relative paths, define your 'data' folders relative to the master script
> > and let the other scripts use those data paths, etc.
> >
> > Best,
> > Denes
> >
> >
> > On 10/06/2018 11:36 PM, Olivier GIVAUDAN wrote:
> >> Hi Jeff,
> >>
> >> Thanks for sharing your workaround.
> >>
> >> I guess my last answer to Ista answers your question as well.
> >>
> >> To me this function (an equivalent of 'cd', say) should be platform-independent.
> >>
> >> Best regards,
> >>
> >> Olivier
> >>
> >> ________________________________
> >> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> >> Envoy??? : samedi 6 octobre 2018 19:31
> >> ??? : r-help at r-project.org; Olivier GIVAUDAN; r-help at r-project.org
> >> Objet : Re: [R] Genuine relative paths with R
> >>
> >> I stopped using hardcoded absolute paths inside R scripts years ago, and I suspect that is fairly common practice. That is, I
> almost never enter a path starting with "/" or "c:/" in an R script.
> >>
> >> The key concession you have to make is to start your R session in your working directory using OS-specific mechanisms, and
> then reference your code and data relative to that directory. RStudio project files offer one mechanism for doing this; using CD
> from? the OS command line is another, and using the file-browser
> > double-click mechanism on .RData files is another (though I prefer to
> > avoid that these days due to potential global environment contamination).
> >>
> >> Perhaps you can be more specific about what facilities you are expecting to find. You should also mention what OS you
> typically use and how you normally start R.
> >>
> >> On October 6, 2018 4:48:44 AM PDT, Olivier GIVAUDAN <olivier_givaudan at hotmail.com> wrote:
> >>> Dear R users,
> >>>
> >>> I would like to work with genuine relative paths in R for obvious
> >>> reasons: if I move all my scripts related to some project as a whole to
> >>> another location of my computer or someone else's computer, if want my
> >>> scripts to continue to run seamlessly.
> >>>
> >>> What I mean by "genuine" is that it should not be necessary to hardcode
> >>> one single absolute path (making the code obviously not "portable" - to
> >>> another place - anymore).
> >>>
> >>> For the time being, I found the following related posts, unfortunately
> >>> never conclusive or even somewhat off-topic:
> >>> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
> >>> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
> >>> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
> >>>
> >>> So I found 2 workarounds, more or less satisfactory:
> >>>
> >>>
> >>> 1.? Either create a variable "ScriptPath" in the first lines of each of
> >>> my R scripts and run a batch (or shell, etc.) to replace every single
> >>> occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R
> >>> script]" in all the R scripts located in the folder (and possibly
> >>> subfolders) of the batch file.
> >>> 2.? Or create an R project file with RStudio and use the package "here"
> >>> to get the absolute path of the R project file and put all the R
> >>> scripts related to this project in the R project directory, as often
> >>> recommended.
> >>>
> >>> But I am really wondering why R doesn't have (please tell me if I'm
> >>> wrong) this basic feature as many other languages have it (batch,
> >>> shell, C, LaTeX, SAS with macro-variables, etc.)?
> >>> Do you know whether the language will have this kind of function in a
> >>> near future? What are the obstacles / what is the reasoning for not
> >>> having it already?
> >>>
> >>> Do you know other workarounds?
> >>>
> >>> Best regards,
> >>>
> >>> Olivier
> >>>
> >>>??????? [[alternative HTML version deleted]]
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide
> >>> http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >>
> >> --
> >> Sent from my phone. Please excuse my brevity.
> >>
> >>??????? [[alternative HTML version deleted]]
> >>
> >>
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >>
> 
>

---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                       Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
---------------------------------------------------------------------------

From jlup@dh @ending from gm@il@com  Mon Oct  8 08:48:34 2018
From: jlup@dh @ending from gm@il@com (Jiblal Upadhya)
Date: Mon, 8 Oct 2018 01:48:34 -0500
Subject: [R] Help to find ksl data set
In-Reply-To: <502A4C72-9E0C-49A2-9D6D-739A70053B45@comcast.net>
References: <CAO-R1n7H_g9L9u+h2_4Xobn+3Kbi56+ax9r4jpC0PObww5ejOw@mail.gmail.com>
 <502A4C72-9E0C-49A2-9D6D-739A70053B45@comcast.net>
Message-ID: <CAO-R1n6Xy8CRjS4FxFBbAj-aeg5LZVkth7m_AsBxMqM45LUEFA@mail.gmail.com>

Thanks, I'll check it out.

On Thu, Oct 4, 2018 at 1:48 AM David Winsemius <dwinsemius at comcast.net>
wrote:

>
> > On Oct 3, 2018, at 10:18 PM, Jiblal Upadhya <jlupadh at gmail.com> wrote:
> >
> > Hi,
> >
> > I  need help in finding the ksl data set mention in the deal package in
> the
> > paper attached. I searched in the UCI Machine learning repository, but
> > couldn?t find.
>
> The paper makes me think it is in the archived package (last updated in
> 2013)
>
> https://cran.r-project.org/src/contrib/Archive/deal/deal_1.2-37.tar.gz
>
>
> > Please help,
> >
> > Thanks,
> > Jiblal
> > <deal.pdf>______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> David Winsemius
> Alameda, CA, USA
>
> 'Any technology distinguishable from magic is insufficiently advanced.'
>  -Gehm's Corollary to Clarke's Third Law
>
>
>
>
>
>

	[[alternative HTML version deleted]]


From Anne@Ch@tton @ending from hcuge@ch  Mon Oct  8 09:19:34 2018
From: Anne@Ch@tton @ending from hcuge@ch (CHATTON Anne)
Date: Mon, 8 Oct 2018 07:19:34 +0000
Subject: [R] Strange paradox
Message-ID: <4302226810d84d2f874d762443eb7d11@wexchprod08.huge.ad.hcuge.ch>

Dear all,
Thank you for your remarks.
The data under analysis were multiply-imputed using Mice.
To compare the nested models, I used the following R codes by van Buuren:
pool.compare (Model2, Model1, method = c("wald"), data = NULL)
As far as I know the Wald statistic tests the null hypothesis that the extra parameters are all zero. But I might be wrong...

-----Message d'origine-----
De?: CHATTON Anne 
Envoy??: vendredi, 5 octobre 2018 10:46
??: 'r-help at r-project.org' <r-help at r-project.org>
Objet?: Strange paradox

Hello,

I am currently analysed two nested models using the same sample. Both the simpler model (Model 1 ~ x1 + x2) and the more complex model (Model 2 ~ x1 + x2 + x3 + x4) yield the same adjusted R-square. Yet the p-value associated with the deviance statistic is highly significant (p=0.0047), suggesting that the confounders (x3 and x4) account for the prediction of the dependent variable.

Does anyone have an explanation of this strange paradox?

Thank you for any suggestion.

Anne


From br@n@chri @ending from gm@il@com  Mon Oct  8 09:22:30 2018
From: br@n@chri @ending from gm@il@com (Christian =?ISO-8859-1?Q?Brandst=E4tter?=)
Date: Mon, 08 Oct 2018 09:22:30 +0200
Subject: [R] Plot in real unit (1:1)
In-Reply-To: <CA+8X3fUGK9FiKdGVudST=Ly-hLiudVWg1MYO_tRjewBLAA6JzA@mail.gmail.com>
References: <145846eef400f1de031e4c020702276d253bf22b.camel@gmail.com>
 <CA+8X3fXfxy6OrQawPBkJNZfjsHZ2+7w3JnAS9-7ocNsRGbH1qA@mail.gmail.com>
 <CA+8X3fUGK9FiKdGVudST=Ly-hLiudVWg1MYO_tRjewBLAA6JzA@mail.gmail.com>
Message-ID: <a0319513f459fae8ffdadb47352d1cbabc91b04a.camel@gmail.com>

Dar Jim, 
late, but it works now perfectly. I made a little function for
autoscaling elevation data. 
https://stackoverflow.com/questions/50606797/plot-in-real-units-mm/52696705#52696705The
 (paper-)printer typically also autoscales, which needs to be
deactivated.  
Example for a plot with scale  in y and x direction: 
in2mm<-25.4

mx = 1000 # Scale X # input unit m
my = 2000 # Scale Y # input unit m

pdf("test_size.pdf",width=210/in2mm,height=297/in2mm,paper="special")
par(mar= c(5.1,4.1,4.1,1.1))
pin <- par("pin") # returns plotheight and -width

yvalue <- sort(sample(1:1000,200))
xvalue <- sort(sample(1:500,200))

xplus <- diff(range(c(0,pin[1]*in2mm)))*(mx/1000)/2
yplus <- diff(range(c(0,pin[2]*in2mm)))*(my/1000)/2

plot(xvalue,yvalue,#asp=mx/my,
     type="n", xaxs="i", yaxs="i",
     xlim=c(mean(xvalue)-xplus,mean(xvalue)+xplus),
     ylim=c(mean(yvalue)-yplus,mean(yvalue)+yplus),
     ylab="vertical [m]",xlab="horizontal [m]")

lines(xvalue,yvalue,type="l",col="black")

legend(x="topleft",horiz=TRUE,
       legend=c(paste0("Mx: 1:",mx),paste0("My: 1:",my),
                paste0("Vertical Exaggeration:
1:",mx/my)),x.intersp=0,bty="n")

dev.off()
On Thu, 2018-06-07 at 14:13 +1000, Jim Lemon wrote:
> Hi Christian,Well, it almost worked. I suspect that the postscript
> device adds somepadding to account for the printable area, so with a
> bit ofexperimentation, The following example seems to do what you
> want. WhenI printed the resulting file from the GIMP, the box and
> diamond werethe correct dimensions.
> postscript("test.ps",paper="a4",horizontal=FALSE)par(mai=c(1.713,0,1.
> 713,0),xaxs="i",yaxs="i")plot(0,type="n",xlim=c(0,190),ylim=c(0,190),
> xlab="",axes=FALSE)segments(c(0,95),c(95,0),c(190,95),c(95,190))segme
> nts(c(45,95,145,95),c(95,145,95,45),
> c(95,145,95,45),c(145,95,45,95))box()dev.off()
> Jim
> On Thu, Jun 7, 2018 at 8:16 AM, Jim Lemon <drjimlemon at gmail.com>
> wrote:Hi Christian,When I have to do something like this, I usually
> write it inPostscript using this:
> /def mm 2.8346 mul
> that converts a dimension in mm to points (1/72 inch). However,
> thiswon't work in R. It may be possible to set up the device like
> this:
> postscript("myfile.ps",paper="a4")par(mar=c(0,0,0,0))# generate a
> blank plotplot(0,type="n",xlim=c(0,210),ylim=c(0,297),axes=FALSE)#
> display lines, etc. in mm with 0,0 at the bottom leftdev.off()
> The resulting file should be printable. Warning, I don't have time
> totest this right now.
> Jim
> 
> 
> On Thu, Jun 7, 2018 at 12:00 AM, Christian Brandst?tter<
> bran.chri at gmail.com> wrote:Dear List,
> Is it possible to plot in R in "real" units? I would like to draw
> aplot on A4 paper, where 1 plot unit would be a mm in reality.
> Issomething like that possible? I would also like to be able to scale
> theplot in x and y direction.Background: For a project I would have
> to draw around 65 fast sketchesof elevation courves.
> Copied from here, due to no answer: 
> https://stackoverflow.com/questions/50606797/plot-in-real-units-mm
> Thank you!
> ______________________________________________R-help at r-project.org
> mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-helpPLEASE do read the
> posting guide http://www.R-project.org/posting-guide.htmland provide
> commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From E@Vettor@zzi @ending from uke@de  Mon Oct  8 13:30:43 2018
From: E@Vettor@zzi @ending from uke@de (Eik Vettorazzi)
Date: Mon, 8 Oct 2018 13:30:43 +0200
Subject: [R] Genuine relative paths with R
In-Reply-To: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
Message-ID: <60714a3e-2ef5-5563-7dcc-eb4965f966d4@uke.de>

Dear Olivier,
you may find the rprojroot package useful, see
https://github.com/r-lib/rprojroot

and a discussion

https://gist.github.com/jennybc/362f52446fe1ebc4c49f#file-2014-10-12_stop-working-directory-insanity-md

Cheers

Am 06.10.2018 um 13:48 schrieb Olivier GIVAUDAN:
> Dear R users,
> 
> I would like to work with genuine relative paths in R for obvious reasons: if I move all my scripts related to some project as a whole to another location of my computer or someone else's computer, if want my scripts to continue to run seamlessly.
> 
> What I mean by "genuine" is that it should not be necessary to hardcode one single absolute path (making the code obviously not "portable" - to another place - anymore).
> 
> For the time being, I found the following related posts, unfortunately never conclusive or even somewhat off-topic:
> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
> 
> So I found 2 workarounds, more or less satisfactory:
> 
> 
>    1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.
>    2.  Or create an R project file with RStudio and use the package "here" to get the absolute path of the R project file and put all the R scripts related to this project in the R project directory, as often recommended.
> 
> But I am really wondering why R doesn't have (please tell me if I'm wrong) this basic feature as many other languages have it (batch, shell, C, LaTeX, SAS with macro-variables, etc.)?
> Do you know whether the language will have this kind of function in a near future? What are the obstacles / what is the reasoning for not having it already?
> 
> Do you know other workarounds?
> 
> Best regards,
> 
> Olivier
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

-- 
Eik Vettorazzi

Department of Medical Biometry and Epidemiology
University Medical Center Hamburg-Eppendorf

Martinistrasse 52
building W 34
20246 Hamburg

Phone: +49 (0) 40 7410 - 58243
Fax:   +49 (0) 40 7410 - 57790
Web: www.uke.de/imbe
--

_____________________________________________________________________

Universit?tsklinikum Hamburg-Eppendorf; K?rperschaft des ?ffentlichen Rechts; Gerichtsstand: Hamburg | www.uke.de
Vorstandsmitglieder: Prof. Dr. Burkhard G?ke (Vorsitzender), Prof. Dr. Dr. Uwe Koch-Gromus, Joachim Pr?l?, Martina Saurin (komm.)
_____________________________________________________________________

SAVE PAPER - THINK BEFORE PRINTING

From belind@hbl @ending from gm@il@com  Mon Oct  8 11:14:41 2018
From: belind@hbl @ending from gm@il@com (Belinda Hum Bei Lin)
Date: Mon, 8 Oct 2018 11:14:41 +0200
Subject: [R] Error in nlsModel
Message-ID: <CAGf4fj0GwzivGHz_Q=BpjPY5J2p7NqBPFiSBeA1q0tEUPPq0Ng@mail.gmail.com>

Hello,

It is my first time using R studio and I am facing the error of
"Error in nlsModel(formula, mf, start, wts) :
  singular gradient matrix at initial parameter estimates"
when I try to run my script. From what I read online, I understand that the
error might be due to the parameters. However, I do not know how to choose
the right set of parameters. Is there anyone who could advice me on how to
do this?

Below are my script details:
rm(list=ls()) #remove ALL objects
cat("\014") # clear console window prior to new run
Sys.setenv(LANG = "en") #Let's keep stuff in English
Sys.setlocale("LC_ALL","English")

##########
#import necessary packages
#########

##To install the packages use the function install.packages. Installing is
done once.
#install.packages("ggplot2")
#install.packages("minpack.lm")
#install.packages("nlstools")

##Activate the packages. This needs to be done everytime before running the
script.
require(ggplot2)
require(minpack.lm)
require(nlstools)



#########
#define the Weibull function
#########
Weibull<-function(tet1, tet2,x){
  1-exp(-exp(tet1+tet2*log10(x)))
}

#########
##define the inverse of the Weibull function. put in effect and get
concentration as output
#########
iWeibull<-function(tet1,tet2,x){
  10^((log(-log(1-x))-tet1)/tet2)
}


#########
#define the Logit function
#########
Logit<-function(tet1, tet2,x){
  1/(1+exp(-tet1-tet2*log10(x)))
}

#########
##define the inverse of the Logit function
#########
iLogit<-function(tet1,tet2,x){
  10^(-(log(1/x-1)+tet1)/tet2)
}

#########
#define the Probit function
#########
Probit<-function(tet1, tet2, x){
  pnorm(tet1+tet2*(log10(x)))
}

#########
##define the inverse of the Probit function
#########
iProbit<-function(tet1,tet2,x){
  10^((qnorm(x)-tet1)/tet2)
}

#########
# Establish data to fit
# data given here are the data for Diuron from the example datasets
#
# Of course one could also import an external datafile via e.g.
# read.table, read.csv functions

### example to choose a file for import with the read.csv function, where
"," is seperating the columns,
# header=TURE tells R that the first row contains the titles of the
columns, and
# stringsAsFactors = FALSE specify that the characters should not be
converted to factors. For more info run ?read.csv
effectdata<-read.csv(file.choose(),sep=",",stringsAsFactors = FALSE,header
= TRUE)
?read.csv
###

#########
conc<-c(0,
        0,
        0,
        0,
        0,
        0,
        0.000135696,
        0.000135696,
        0.000135696,
        0.000152971,
        0.000152971,
        0.000152971,
        0.000172445,
        0.000172445,
        0.000172445,
        0.000194398,
        0.000194398,
        0.000194398,
        0.000219146,
        0.000219146,
        0.000219146,
        0.000247044,
        0.000247044,
        0.000247044
)

effect<-c(5.342014355,
          13.46249176,
          -9.249022885,
          -6.666486351,
          1.00292152,
          -3.891918402,
          12.63136345,
          -2.372582186,
          8.601073479,
          1.309926638,
          0.772728968,
          -7.01067202,
          30.65306236,
          28.10819667,
          17.94875421,
          73.00440617,
          71.33593917,
          62.23994217,
          99.18897648,
          99.05982514,
          99.2325145,
          100.2402872,
          100.1276669,
          100.1501468
)

#build input dataframe
effectdata<-data.frame(conc,effect)

#plot the data just to get a first glance of the data
ggplot()+
  geom_point(data=effectdata,aes(x=conc,y=effect), size = 5)+
  scale_x_log10("conc")


#delete controls
effectdata_without_controls<-subset(effectdata,effectdata$conc>0)


#save controls in a seperate dataframe called effectdata_control, which
will be added to the ggplot in the end.
#since you can't have 0 on a logscale we will give the controls a very very
low concentration 0.00001 (not 100% correct, but will not be seen in the
final plot)
effectdata_controls<-subset(effectdata,effectdata$conc==0)
effectdata_controls$conc<-effectdata_controls$conc+0.0001



########
#fit data (without controls) using ordinary least squares
#ordinary least squares is a method for estimating unknown parameters in
statistics. The aim of the method is to minimize
#the difference between the observed responses and the responses predicted
by the approximation of the data.
#nlsLM is from the minpack.lm package
#nls=non-linear lest squares
########
nlsLM_result_Weibull<-nlsLM(effect~Weibull(tet1,tet2,conc),
data=effectdata_without_controls, start=list(tet1=1,tet2=1))
nlsLM_result_Logit<-nlsLM(effect~Logit(tet1,tet2,conc),
data=effectdata_without_controls, start=list(tet1=1,tet2=1))
nlsLM_result_Probit<-nlsLM(effect~Probit(tet1,tet2,conc),
data=effectdata_without_controls, start=list(tet1=1,tet2=1))

Thanks a bunch!

Best Regards,
Belinda
Belinda *Hum* Bei Lin (Ms)
National University of Singapore
(e): belindahbl at gmail.com
(c): +6581136079
<+65%208113%206079>

	[[alternative HTML version deleted]]


From petr@pik@l @ending from prechez@@cz  Mon Oct  8 16:26:48 2018
From: petr@pik@l @ending from prechez@@cz (PIKAL Petr)
Date: Mon, 8 Oct 2018 14:26:48 +0000
Subject: [R] 
 Problems to obtain standardized betas in multiply-imputed data
In-Reply-To: <8a90fb4b3e05452da62e81e3424bc3a0@wexchprod08.huge.ad.hcuge.ch>
References: <1b906c9b735b4d428ae528ef6609f74e@wexchprod08.huge.ad.hcuge.ch>
 <976b75bcc4d34a839b60b7a588d01542@SRVEXCHCM1301.precheza.cz>
 <8a90fb4b3e05452da62e81e3424bc3a0@wexchprod08.huge.ad.hcuge.ch>
Message-ID: <4fadca9b8eeb4572adf2ca7a7044f957@SRVEXCHCM1301.precheza.cz>

Hi

as I wrote I am not an expert in multiple imputation and others are probably more capable to give you an answer so please keep your emails coppied to the list.

The error message is straightforward and clear - object has to be of class lm

My wild guess is that you must not use the whole object "imp" but only the imputed data.frame. It is probably time for you to read documentation to mice package. It seems to me, that you can get data frame from mice object by function

?complete

and use that filled data frame for your lm model and lm.beta. But I may be completely wrong, I do not have any experience with mice.

Cheers
Petr

> -----Original Message-----
> From: CHATTON Anne <Anne.Chatton at hcuge.ch>
> Sent: Monday, October 8, 2018 12:52 PM
> To: PIKAL Petr <petr.pikal at precheza.cz>
> Subject: RE: Problems to obtain standardized betas in multiply-imputed data
>
> Hi Petr,
> I apologize for the late reply and thank you very much for your judicious
> remarks.
> As you appropriately say, I also suspect that 'FitImp' is not an lm object. But the
> question of how to obtain these standardized values in the context of multiple
> imputations still remains.
> As requested, I am sending you herewith the output of the 'str' functions:
>
> imp = mice(Data, method = "norm.predict", m=5, seed=100, print=FALSE)
> FitImp <- with(imp,lm(y ~ x1 + x2 + x3))
> sdBeta <- lm.beta(FitImp)
> Error in lm.beta(FitImp) : object has to be of class lm
>
> > str(Data)
> 'data.frame':   996 obs. of  4 variables:
>  $ x3: num  18 18 18 18 18 19 19 19 19 20 ...
>  $ x2: num  12 27 20 55 31 24 43 31 25 43 ...
>  $ x1: num  NA NA NA NA NA NA NA NA NA NA ...
>  $ y : num  NA NA NA NA NA NA NA NA NA NA ...
>  - attr(*, "variable.labels")= Named chr
>   ..- attr(*, "names")= chr
>  - attr(*, "codepage")= int 65001
>
> > str(imp)
> List of 21
>  $ data           :'data.frame':        996 obs. of  4 variables:
>   ..$ x3: num [1:996] 18 18 18 18 18 19 19 19 19 20 ...
>   ..$ x2: num [1:996] 12 27 20 55 31 24 43 31 25 43 ...
>   ..$ x1: num [1:996] NA NA NA NA NA NA NA NA NA NA ...
>   ..$ y : num [1:996] NA NA NA NA NA NA NA NA NA NA ...
>   ..- attr(*, "variable.labels")= Named chr(0)
>   .. ..- attr(*, "names")= chr(0)
>   ..- attr(*, "codepage")= int 65001
>  $ imp            :List of 4
>   ..$ x3:'data.frame':  2 obs. of  5 variables:
>   .. ..$ 1: num [1:2] 26.6 33.9
>   .. ..$ 2: num [1:2] 26.6 33.9
>   .. ..$ 3: num [1:2] 26.6 33.9
>   .. ..$ 4: num [1:2] 26.6 33.9
>   .. ..$ 5: num [1:2] 26.6 33.9
>   ..$ x2:'data.frame':  2 obs. of  5 variables:
>   .. ..$ 1: num [1:2] 34.2 33.1
>   .. ..$ 2: num [1:2] 34.4 32.6
>   .. ..$ 3: num [1:2] 34 32.9
>   .. ..$ 4: num [1:2] 34.1 33.2
>   .. ..$ 5: num [1:2] 34.5 34.3
>   ..$ x1:'data.frame':  245 obs. of  5 variables:
>   .. ..$ 1: num [1:245] 6.39 12.97 9.9 25.32 14.5 ...
>   .. ..$ 2: num [1:245] 6.07 12.81 9.79 25.51 14.7 ...
>   .. ..$ 3: num [1:245] 6.39 12.79 9.54 25.41 14.63 ...
>   .. ..$ 4: num [1:245] 5.95 12.82 9.85 25.78 14.69 ...
>   .. ..$ 5: num [1:245] 5.83 13.01 9.76 25.49 14.7 ...
>   ..$ y :'data.frame':  244 obs. of  5 variables:
>   .. ..$ 1: num [1:244] 56.2 71.6 64.4 100.6 75.6 ...
>   .. ..$ 2: num [1:244] 55.9 71.5 64.3 100.8 75.8 ...
>   .. ..$ 3: num [1:244] 56.2 71.5 64.1 100.7 75.7 ...
>   .. ..$ 4: num [1:244] 55.8 71.5 64.4 101 75.7 ...
>   .. ..$ 5: num [1:244] 55.7 71.7 64.3 100.7 75.8 ...
>  $ m              : num 5
>  $ where          : logi [1:996, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
>   ..- attr(*, "dimnames")=List of 2
>   .. ..$ : chr [1:996] "1" "2" "3" "4" ...
>   .. ..$ : chr [1:4] "x3" "x2" "x1" "y"
>  $ blocks         :List of 4
>   ..$ x3: chr "x3"
>   ..$ x2: chr "x2"
>   ..$ x1: chr "x1"
>   ..$ y : chr "y"
>   ..- attr(*, "calltype")= Named chr [1:4] "type" "type" "type" "type"
>   .. ..- attr(*, "names")= chr [1:4] "x3" "x2" "x1" "y"
>  $ call           : language mice(data = Data, m = 5, method = "norm.predict",
> printFlag = FALSE, seed = 100)
>  $ nmis           : Named int [1:4] 2 2 245 244
>   ..- attr(*, "names")= chr [1:4] "x3" "x2" "x1" "y"
>  $ method         : Named chr [1:4] "norm.predict" "norm.predict"
> "norm.predict" "norm.predict"
>   ..- attr(*, "names")= chr [1:4] "x3" "x2" "x1" "y"
>  $ predictorMatrix: num [1:4, 1:4] 0 1 1 1 1 0 1 1 1 1 ...
>   ..- attr(*, "dimnames")=List of 2
>   .. ..$ : chr [1:4] "x3" "x2" "x1" "y"
>   .. ..$ : chr [1:4] "x3" "x2" "x1" "y"
>  $ visitSequence  : chr [1:4] "x3" "x2" "x1" "y"
>  $ formulas       :List of 4
>   ..$ x3:Class 'formula'  language x3 ~ 0 + x2 + x1 + y
>   .. .. ..- attr(*, ".Environment")=<environment: 0x000000000f0139c8>
>   ..$ x2:Class 'formula'  language x2 ~ 0 + x3 + x1 + y
>   .. .. ..- attr(*, ".Environment")=<environment: 0x000000000f0139c8>
>   ..$ x1:Class 'formula'  language x1 ~ 0 + x3 + x2 + y
>   .. .. ..- attr(*, ".Environment")=<environment: 0x000000000f0139c8>
>   ..$ y :Class 'formula'  language y ~ 0 + x3 + x2 + x1
>   .. .. ..- attr(*, ".Environment")=<environment: 0x000000000f0139c8>
>  $ post           : Named chr [1:4] "" "" "" ""
>   ..- attr(*, "names")= chr [1:4] "x3" "x2" "x1" "y"
>  $ blots          :List of 4
>   ..$ x3: list()
>   ..$ x2: list()
>   ..$ x1: list()
>   ..$ y : list()
>  $ seed           : num 100
>  $ iteration      : num 5
>  $ lastSeedValue  : int [1:626] 403 593 2082529872 -1076659723 770353271 -
> 83917670 1999705384 1490542154 -151817264 1924404941 ...
>  $ chainMean      : num [1:4, 1:5, 1:5] 31 32.6 15.2 73.1 30.4 ...
>   ..- attr(*, "dimnames")=List of 3
>   .. ..$ : chr [1:4] "x3" "x2" "x1" "y"
>   .. ..$ : chr [1:5] "1" "2" "3" "4" ...
>   .. ..$ : chr [1:5] "Chain 1" "Chain 2" "Chain 3" "Chain 4" ...
>  $ chainVar       : num [1:4, 1:5, 1:5] 19.621 0.105 80.049 116.363 20.278 ...
>   ..- attr(*, "dimnames")=List of 3
>   .. ..$ : chr [1:4] "x3" "x2" "x1" "y"
>   .. ..$ : chr [1:5] "1" "2" "3" "4" ...
>   .. ..$ : chr [1:5] "Chain 1" "Chain 2" "Chain 3" "Chain 4" ...
>  $ loggedEvents   : NULL
>  $ version        :Classes 'package_version', 'numeric_version'  hidden list of 1
>   ..$ : int [1:3] 3 3 0
>  $ date           : Date[1:1], format: "2018-10-08"
>  - attr(*, "class")= chr "mids"
>
> > str(FitImp)
> List of 4
>  $ call    : language with.mids(data = imp, expr = lm(y ~ x1 + x2 + x3))
>  $ call1   : language mice(data = Data, m = 5, method = "norm.predict",
> printFlag = FALSE, seed = 100)
>  $ nmis    : Named int [1:4] 2 2 245 244
>   ..- attr(*, "names")= chr [1:4] "x3" "x2" "x1" "y"
>  $ analyses:List of 5
>   ..$ :List of 12
>   .. ..$ coefficients : Named num [1:4] 44.917 0.957 0.611 -0.121
>   .. .. ..- attr(*, "names")= chr [1:4] "(Intercept)" "x1" "x2" "x3"
>   .. ..$ residuals    : Named num [1:996] 4.14e-12 -7.53e-13 -7.10e-14 2.89e-14
> 1.33e-14 ...
>   .. .. ..- attr(*, "names")= chr [1:996] "1" "2" "3" "4" ...
>   .. ..$ effects      : Named num [1:996] -2.34e+03 4.44e+02 1.94e+02 -4.41e+01
> -1.07e-13 ...
>   .. .. ..- attr(*, "names")= chr [1:996] "(Intercept)" "x1" "x2" "x3" ...
>   .. ..$ rank         : int 4
>   .. ..$ fitted.values: Named num [1:996] 56.2 71.6 64.4 100.6 75.6 ...
>   .. .. ..- attr(*, "names")= chr [1:996] "1" "2" "3" "4" ...
>   .. ..$ assign       : int [1:4] 0 1 2 3
>   .. ..$ qr           :List of 5
>   .. .. ..$ qr   : num [1:996, 1:4] -31.5595 0.0317 0.0317 0.0317 0.0317 ...
>   .. .. .. ..- attr(*, "dimnames")=List of 2
>   .. .. .. .. ..$ : chr [1:996] "1" "2" "3" "4" ...
>   .. .. .. .. ..$ : chr [1:4] "(Intercept)" "x1" "x2" "x3"
>   .. .. .. ..- attr(*, "assign")= int [1:4] 0 1 2 3
>   .. .. ..$ qraux: num [1:4] 1.03 1 1.03 1.04
>   .. .. ..$ pivot: int [1:4] 1 2 3 4
>   .. .. ..$ tol  : num 1e-07
>   .. .. ..$ rank : int 4
>   .. .. ..- attr(*, "class")= chr "qr"
>   .. ..$ df.residual  : int 992
>   .. ..$ xlevels      : Named list()
>   .. ..$ call         : language lm(formula = y ~ x1 + x2 + x3)
>   .. ..$ terms        :Classes 'terms', 'formula'  language y ~ x1 + x2 + x3
>   .. .. .. ..- attr(*, "variables")= language list(y, x1, x2, x3)
>   .. .. .. ..- attr(*, "factors")= int [1:4, 1:3] 0 1 0 0 0 0 1 0 0 0 ...
>   .. .. .. .. ..- attr(*, "dimnames")=List of 2
>   .. .. .. .. .. ..$ : chr [1:4] "y" "x1" "x2" "x3"
>   .. .. .. .. .. ..$ : chr [1:3] "x1" "x2" "x3"
>   .. .. .. ..- attr(*, "term.labels")= chr [1:3] "x1" "x2" "x3"
>   .. .. .. ..- attr(*, "order")= int [1:3] 1 1 1
>   .. .. .. ..- attr(*, "intercept")= int 1
>   .. .. .. ..- attr(*, "response")= int 1
>   .. .. .. ..- attr(*, ".Environment")=<environment: 0x000000000eeefd48>
>   .. .. .. ..- attr(*, "predvars")= language list(y, x1, x2, x3)
>   .. .. .. ..- attr(*, "dataClasses")= Named chr [1:4] "numeric" "numeric"
> "numeric" "numeric"
>   .. .. .. .. ..- attr(*, "names")= chr [1:4] "y" "x1" "x2" "x3"
>   .. ..$ model        :'data.frame':    996 obs. of  4 variables:
>   .. .. ..$ y : num [1:996] 56.2 71.6 64.4 100.6 75.6 ...
>   .. .. ..$ x1: num [1:996] 6.39 12.97 9.9 25.32 14.5 ...
>   .. .. ..$ x2: num [1:996] 12 27 20 55 31 24 43 31 25 43 ...
>   .. .. ..$ x3: num [1:996] 18 18 18 18 18 19 19 19 19 20 ...
>   .. .. ..- attr(*, "terms")=Classes 'terms', 'formula'  language y ~ x1 + x2 + x3
>   .. .. .. .. ..- attr(*, "variables")= language list(y, x1, x2, x3)
>   .. .. .. .. ..- attr(*, "factors")= int [1:4, 1:3] 0 1 0 0 0 0 1 0 0 0 ...
>   .. .. .. .. .. ..- attr(*, "dimnames")=List of 2
>   .. .. .. .. .. .. ..$ : chr [1:4] "y" "x1" "x2" "x3"
>   .. .. .. .. .. .. ..$ : chr [1:3] "x1" "x2" "x3"
>   .. .. .. .. ..- attr(*, "term.labels")= chr [1:3] "x1" "x2" "x3"
>   .. .. .. .. ..- attr(*, "order")= int [1:3] 1 1 1
>   .. .. .. .. ..- attr(*, "intercept")= int 1
>   .. .. .. .. ..- attr(*, "response")= int 1
>   .. .. .. .. ..- attr(*, ".Environment")=<environment: 0x000000000eeefd48>
>   .. .. .. .. ..- attr(*, "predvars")= language list(y, x1, x2, x3)
>   .. .. .. .. ..- attr(*, "dataClasses")= Named chr [1:4] "numeric" "numeric"
> "numeric" "numeric"
>   .. .. .. .. .. ..- attr(*, "names")= chr [1:4] "y" "x1" "x2" "x3"
>   .. ..- attr(*, "class")= chr "lm"
>   ..$ :List of 12
>   .. ..$ coefficients : Named num [1:4] 44.917 0.957 0.611 -0.121
>   .. .. ..- attr(*, "names")= chr [1:4] "(Intercept)" "x1" "x2" "x3"
>   .. ..$ residuals    : Named num [1:996] 4.59e-12 -9.08e-15 -9.95e-14 -3.33e-14
> -1.88e-14 ...
>   .. .. ..- attr(*, "names")= chr [1:996] "1" "2" "3" "4" ...
>   .. ..$ effects      : Named num [1:996] -2.34e+03 4.44e+02 1.94e+02 -4.41e+01
> -1.51e-13 ...
>   .. .. ..- attr(*, "names")= chr [1:996] "(Intercept)" "x1" "x2" "x3" ...
>   .. ..$ rank         : int 4
>   .. ..$ fitted.values: Named num [1:996] 55.9 71.5 64.3 100.8 75.8 ...
>   .. .. ..- attr(*, "names")= chr [1:996] "1" "2" "3" "4" ...
>   .. ..$ assign       : int [1:4] 0 1 2 3
>   .. ..$ qr           :List of 5
>   .. .. ..$ qr   : num [1:996, 1:4] -31.5595 0.0317 0.0317 0.0317 0.0317 ...
>   .. .. .. ..- attr(*, "dimnames")=List of 2
>   .. .. .. .. ..$ : chr [1:996] "1" "2" "3" "4" ...
>   .. .. .. .. ..$ : chr [1:4] "(Intercept)" "x1" "x2" "x3"
>   .. .. .. ..- attr(*, "assign")= int [1:4] 0 1 2 3
>   .. .. ..$ qraux: num [1:4] 1.03 1 1.03 1.04
>   .. .. ..$ pivot: int [1:4] 1 2 3 4
>   .. .. ..$ tol  : num 1e-07
>   .. .. ..$ rank : int 4
>   .. .. ..- attr(*, "class")= chr "qr"
>   .. ..$ df.residual  : int 992
>   .. ..$ xlevels      : Named list()
>   .. ..$ call         : language lm(formula = y ~ x1 + x2 + x3)
>   .. ..$ terms        :Classes 'terms', 'formula'  language y ~ x1 + x2 + x3
>   .. .. .. ..- attr(*, "variables")= language list(y, x1, x2, x3)
>   .. .. .. ..- attr(*, "factors")= int [1:4, 1:3] 0 1 0 0 0 0 1 0 0 0 ...
>   .. .. .. .. ..- attr(*, "dimnames")=List of 2
>   .. .. .. .. .. ..$ : chr [1:4] "y" "x1" "x2" "x3"
>   .. .. .. .. .. ..$ : chr [1:3] "x1" "x2" "x3"
>   .. .. .. ..- attr(*, "term.labels")= chr [1:3] "x1" "x2" "x3"
>   .. .. .. ..- attr(*, "order")= int [1:3] 1 1 1
>   .. .. .. ..- attr(*, "intercept")= int 1
>   .. .. .. ..- attr(*, "response")= int 1
>   .. .. .. ..- attr(*, ".Environment")=<environment: 0x000000000ee25f90>
>   .. .. .. ..- attr(*, "predvars")= language list(y, x1, x2, x3)
>   .. .. .. ..- attr(*, "dataClasses")= Named chr [1:4] "numeric" "numeric"
> "numeric" "numeric"
>   .. .. .. .. ..- attr(*, "names")= chr [1:4] "y" "x1" "x2" "x3"
>   .. ..$ model        :'data.frame':    996 obs. of  4 variables:
>   .. .. ..$ y : num [1:996] 55.9 71.5 64.3 100.8 75.8 ...
>   .. .. ..$ x1: num [1:996] 6.07 12.81 9.79 25.51 14.7 ...
>   .. .. ..$ x2: num [1:996] 12 27 20 55 31 24 43 31 25 43 ...
>   .. .. ..$ x3: num [1:996] 18 18 18 18 18 19 19 19 19 20 ...
>   .. .. ..- attr(*, "terms")=Classes 'terms', 'formula'  language y ~ x1 + x2 + x3
>   .. .. .. .. ..- attr(*, "variables")= language list(y, x1, x2, x3)
>   .. .. .. .. ..- attr(*, "factors")= int [1:4, 1:3] 0 1 0 0 0 0 1 0 0 0 ...
>   .. .. .. .. .. ..- attr(*, "dimnames")=List of 2
>   .. .. .. .. .. .. ..$ : chr [1:4] "y" "x1" "x2" "x3"
>   .. .. .. .. .. .. ..$ : chr [1:3] "x1" "x2" "x3"
>   .. .. .. .. ..- attr(*, "term.labels")= chr [1:3] "x1" "x2" "x3"
>   .. .. .. .. ..- attr(*, "order")= int [1:3] 1 1 1
>   .. .. .. .. ..- attr(*, "intercept")= int 1
>   .. .. .. .. ..- attr(*, "response")= int 1
>   .. .. .. .. ..- attr(*, ".Environment")=<environment: 0x000000000ee25f90>
>   .. .. .. .. ..- attr(*, "predvars")= language list(y, x1, x2, x3)
>   .. .. .. .. ..- attr(*, "dataClasses")= Named chr [1:4] "numeric" "numeric"
> "numeric" "numeric"
>   .. .. .. .. .. ..- attr(*, "names")= chr [1:4] "y" "x1" "x2" "x3"
>   .. ..- attr(*, "class")= chr "lm"
>   ..$ :List of 12
>   .. ..$ coefficients : Named num [1:4] 44.917 0.957 0.611 -0.121
>   .. .. ..- attr(*, "names")= chr [1:4] "(Intercept)" "x1" "x2" "x3"
>   .. ..$ residuals    : Named num [1:996] 3.54e-12 -9.01e-14 -6.32e-14 1.80e-14
> 1.59e-14 ...
>   .. .. ..- attr(*, "names")= chr [1:996] "1" "2" "3" "4" ...
>   .. ..$ effects      : Named num [1:996] -2.34e+03 4.44e+02 1.94e+02 -4.41e+01
> -8.79e-14 ...
>   .. .. ..- attr(*, "names")= chr [1:996] "(Intercept)" "x1" "x2" "x3" ...
>   .. ..$ rank         : int 4
>   .. ..$ fitted.values: Named num [1:996] 56.2 71.5 64.1 100.7 75.7 ...
>   .. .. ..- attr(*, "names")= chr [1:996] "1" "2" "3" "4" ...
>   .. ..$ assign       : int [1:4] 0 1 2 3
>   .. ..$ qr           :List of 5
>   .. .. ..$ qr   : num [1:996, 1:4] -31.5595 0.0317 0.0317 0.0317 0.0317 ...
>   .. .. .. ..- attr(*, "dimnames")=List of 2
>   .. .. .. .. ..$ : chr [1:996] "1" "2" "3" "4" ...
>   .. .. .. .. ..$ : chr [1:4] "(Intercept)" "x1" "x2" "x3"
>   .. .. .. ..- attr(*, "assign")= int [1:4] 0 1 2 3
>   .. .. ..$ qraux: num [1:4] 1.03 1 1.03 1.04
>   .. .. ..$ pivot: int [1:4] 1 2 3 4
>   .. .. ..$ tol  : num 1e-07
>   .. .. ..$ rank : int 4
>   .. .. ..- attr(*, "class")= chr "qr"
>   .. ..$ df.residual  : int 992
>   .. ..$ xlevels      : Named list()
>   .. ..$ call         : language lm(formula = y ~ x1 + x2 + x3)
>   .. ..$ terms        :Classes 'terms', 'formula'  language y ~ x1 + x2 + x3
>   .. .. .. ..- attr(*, "variables")= language list(y, x1, x2, x3)
>   .. .. .. ..- attr(*, "factors")= int [1:4, 1:3] 0 1 0 0 0 0 1 0 0 0 ...
>   .. .. .. .. ..- attr(*, "dimnames")=List of 2
>   .. .. .. .. .. ..$ : chr [1:4] "y" "x1" "x2" "x3"
>   .. .. .. .. .. ..$ : chr [1:3] "x1" "x2" "x3"
>   .. .. .. ..- attr(*, "term.labels")= chr [1:3] "x1" "x2" "x3"
>   .. .. .. ..- attr(*, "order")= int [1:3] 1 1 1
>   .. .. .. ..- attr(*, "intercept")= int 1
>   .. .. .. ..- attr(*, "response")= int 1
>   .. .. .. ..- attr(*, ".Environment")=<environment: 0x000000000c2916d0>
>   .. .. .. ..- attr(*, "predvars")= language list(y, x1, x2, x3)
>   .. .. .. ..- attr(*, "dataClasses")= Named chr [1:4] "numeric" "numeric"
> "numeric" "numeric"
>   .. .. .. .. ..- attr(*, "names")= chr [1:4] "y" "x1" "x2" "x3"
>   .. ..$ model        :'data.frame':    996 obs. of  4 variables:
>   .. .. ..$ y : num [1:996] 56.2 71.5 64.1 100.7 75.7 ...
>   .. .. ..$ x1: num [1:996] 6.39 12.79 9.54 25.41 14.63 ...
>   .. .. ..$ x2: num [1:996] 12 27 20 55 31 24 43 31 25 43 ...
>   .. .. ..$ x3: num [1:996] 18 18 18 18 18 19 19 19 19 20 ...
>   .. .. ..- attr(*, "terms")=Classes 'terms', 'formula'  language y ~ x1 + x2 + x3
>   .. .. .. .. ..- attr(*, "variables")= language list(y, x1, x2, x3)
>   .. .. .. .. ..- attr(*, "factors")= int [1:4, 1:3] 0 1 0 0 0 0 1 0 0 0 ...
>   .. .. .. .. .. ..- attr(*, "dimnames")=List of 2
>   .. .. .. .. .. .. ..$ : chr [1:4] "y" "x1" "x2" "x3"
>   .. .. .. .. .. .. ..$ : chr [1:3] "x1" "x2" "x3"
>   .. .. .. .. ..- attr(*, "term.labels")= chr [1:3] "x1" "x2" "x3"
>   .. .. .. .. ..- attr(*, "order")= int [1:3] 1 1 1
>   .. .. .. .. ..- attr(*, "intercept")= int 1
>   .. .. .. .. ..- attr(*, "response")= int 1
>   .. .. .. .. ..- attr(*, ".Environment")=<environment: 0x000000000c2916d0>
>   .. .. .. .. ..- attr(*, "predvars")= language list(y, x1, x2, x3)
>   .. .. .. .. ..- attr(*, "dataClasses")= Named chr [1:4] "numeric" "numeric"
> "numeric" "numeric"
>   .. .. .. .. .. ..- attr(*, "names")= chr [1:4] "y" "x1" "x2" "x3"
>   .. ..- attr(*, "class")= chr "lm"
>   ..$ :List of 12
>   .. ..$ coefficients : Named num [1:4] 44.917 0.957 0.611 -0.121
>   .. .. ..- attr(*, "names")= chr [1:4] "(Intercept)" "x1" "x2" "x3"
>   .. ..$ residuals    : Named num [1:996] 4.33e-12 1.59e-12 -4.68e-13 7.83e-14
> 2.85e-15 ...
>   .. .. ..- attr(*, "names")= chr [1:996] "1" "2" "3" "4" ...
>   .. ..$ effects      : Named num [1:996] -2.34e+03 4.44e+02 1.94e+02 -4.41e+01
> -1.27e-13 ...
>   .. .. ..- attr(*, "names")= chr [1:996] "(Intercept)" "x1" "x2" "x3" ...
>   .. ..$ rank         : int 4
>   .. ..$ fitted.values: Named num [1:996] 55.8 71.5 64.4 101 75.7 ...
>   .. .. ..- attr(*, "names")= chr [1:996] "1" "2" "3" "4" ...
>   .. ..$ assign       : int [1:4] 0 1 2 3
>   .. ..$ qr           :List of 5
>   .. .. ..$ qr   : num [1:996, 1:4] -31.5595 0.0317 0.0317 0.0317 0.0317 ...
>   .. .. .. ..- attr(*, "dimnames")=List of 2
>   .. .. .. .. ..$ : chr [1:996] "1" "2" "3" "4" ...
>   .. .. .. .. ..$ : chr [1:4] "(Intercept)" "x1" "x2" "x3"
>   .. .. .. ..- attr(*, "assign")= int [1:4] 0 1 2 3
>   .. .. ..$ qraux: num [1:4] 1.03 1 1.03 1.04
>   .. .. ..$ pivot: int [1:4] 1 2 3 4
>   .. .. ..$ tol  : num 1e-07
>   .. .. ..$ rank : int 4
>   .. .. ..- attr(*, "class")= chr "qr"
>   .. ..$ df.residual  : int 992
>   .. ..$ xlevels      : Named list()
>   .. ..$ call         : language lm(formula = y ~ x1 + x2 + x3)
>   .. ..$ terms        :Classes 'terms', 'formula'  language y ~ x1 + x2 + x3
>   .. .. .. ..- attr(*, "variables")= language list(y, x1, x2, x3)
>   .. .. .. ..- attr(*, "factors")= int [1:4, 1:3] 0 1 0 0 0 0 1 0 0 0 ...
>   .. .. .. .. ..- attr(*, "dimnames")=List of 2
>   .. .. .. .. .. ..$ : chr [1:4] "y" "x1" "x2" "x3"
>   .. .. .. .. .. ..$ : chr [1:3] "x1" "x2" "x3"
>   .. .. .. ..- attr(*, "term.labels")= chr [1:3] "x1" "x2" "x3"
>   .. .. .. ..- attr(*, "order")= int [1:3] 1 1 1
>   .. .. .. ..- attr(*, "intercept")= int 1
>   .. .. .. ..- attr(*, "response")= int 1
>   .. .. .. ..- attr(*, ".Environment")=<environment: 0x000000000e870a48>
>   .. .. .. ..- attr(*, "predvars")= language list(y, x1, x2, x3)
>   .. .. .. ..- attr(*, "dataClasses")= Named chr [1:4] "numeric" "numeric"
> "numeric" "numeric"
>   .. .. .. .. ..- attr(*, "names")= chr [1:4] "y" "x1" "x2" "x3"
>   .. ..$ model        :'data.frame':    996 obs. of  4 variables:
>   .. .. ..$ y : num [1:996] 55.8 71.5 64.4 101 75.7 ...
>   .. .. ..$ x1: num [1:996] 5.95 12.82 9.85 25.78 14.69 ...
>   .. .. ..$ x2: num [1:996] 12 27 20 55 31 24 43 31 25 43 ...
>   .. .. ..$ x3: num [1:996] 18 18 18 18 18 19 19 19 19 20 ...
>   .. .. ..- attr(*, "terms")=Classes 'terms', 'formula'  language y ~ x1 + x2 + x3
>   .. .. .. .. ..- attr(*, "variables")= language list(y, x1, x2, x3)
>   .. .. .. .. ..- attr(*, "factors")= int [1:4, 1:3] 0 1 0 0 0 0 1 0 0 0 ...
>   .. .. .. .. .. ..- attr(*, "dimnames")=List of 2
>   .. .. .. .. .. .. ..$ : chr [1:4] "y" "x1" "x2" "x3"
>   .. .. .. .. .. .. ..$ : chr [1:3] "x1" "x2" "x3"
>   .. .. .. .. ..- attr(*, "term.labels")= chr [1:3] "x1" "x2" "x3"
>   .. .. .. .. ..- attr(*, "order")= int [1:3] 1 1 1
>   .. .. .. .. ..- attr(*, "intercept")= int 1
>   .. .. .. .. ..- attr(*, "response")= int 1
>   .. .. .. .. ..- attr(*, ".Environment")=<environment: 0x000000000e870a48>
>   .. .. .. .. ..- attr(*, "predvars")= language list(y, x1, x2, x3)
>   .. .. .. .. ..- attr(*, "dataClasses")= Named chr [1:4] "numeric" "numeric"
> "numeric" "numeric"
>   .. .. .. .. .. ..- attr(*, "names")= chr [1:4] "y" "x1" "x2" "x3"
>   .. ..- attr(*, "class")= chr "lm"
>   ..$ :List of 12
>   .. ..$ coefficients : Named num [1:4] 44.917 0.957 0.611 -0.121
>   .. .. ..- attr(*, "names")= chr [1:4] "(Intercept)" "x1" "x2" "x3"
>   .. ..$ residuals    : Named num [1:996] 4.78e-12 2.82e-12 -2.51e-13 -1.75e-16
> 6.59e-15 ...
>   .. .. ..- attr(*, "names")= chr [1:996] "1" "2" "3" "4" ...
>   .. ..$ effects      : Named num [1:996] -2.34e+03 4.44e+02 1.94e+02 -4.41e+01
> -1.35e-13 ...
>   .. .. ..- attr(*, "names")= chr [1:996] "(Intercept)" "x1" "x2" "x3" ...
>   .. ..$ rank         : int 4
>   .. ..$ fitted.values: Named num [1:996] 55.7 71.7 64.3 100.7 75.8 ...
>   .. .. ..- attr(*, "names")= chr [1:996] "1" "2" "3" "4" ...
>   .. ..$ assign       : int [1:4] 0 1 2 3
>   .. ..$ qr           :List of 5
>   .. .. ..$ qr   : num [1:996, 1:4] -31.5595 0.0317 0.0317 0.0317 0.0317 ...
>   .. .. .. ..- attr(*, "dimnames")=List of 2
>   .. .. .. .. ..$ : chr [1:996] "1" "2" "3" "4" ...
>   .. .. .. .. ..$ : chr [1:4] "(Intercept)" "x1" "x2" "x3"
>   .. .. .. ..- attr(*, "assign")= int [1:4] 0 1 2 3
>   .. .. ..$ qraux: num [1:4] 1.03 1 1.03 1.04
>   .. .. ..$ pivot: int [1:4] 1 2 3 4
>   .. .. ..$ tol  : num 1e-07
>   .. .. ..$ rank : int 4
>   .. .. ..- attr(*, "class")= chr "qr"
>   .. ..$ df.residual  : int 992
>   .. ..$ xlevels      : Named list()
>   .. ..$ call         : language lm(formula = y ~ x1 + x2 + x3)
>   .. ..$ terms        :Classes 'terms', 'formula'  language y ~ x1 + x2 + x3
>   .. .. .. ..- attr(*, "variables")= language list(y, x1, x2, x3)
>   .. .. .. ..- attr(*, "factors")= int [1:4, 1:3] 0 1 0 0 0 0 1 0 0 0 ...
>   .. .. .. .. ..- attr(*, "dimnames")=List of 2
>   .. .. .. .. .. ..$ : chr [1:4] "y" "x1" "x2" "x3"
>   .. .. .. .. .. ..$ : chr [1:3] "x1" "x2" "x3"
>   .. .. .. ..- attr(*, "term.labels")= chr [1:3] "x1" "x2" "x3"
>   .. .. .. ..- attr(*, "order")= int [1:3] 1 1 1
>   .. .. .. ..- attr(*, "intercept")= int 1
>   .. .. .. ..- attr(*, "response")= int 1
>   .. .. .. ..- attr(*, ".Environment")=<environment: 0x000000000c5b6b88>
>   .. .. .. ..- attr(*, "predvars")= language list(y, x1, x2, x3)
>   .. .. .. ..- attr(*, "dataClasses")= Named chr [1:4] "numeric" "numeric"
> "numeric" "numeric"
>   .. .. .. .. ..- attr(*, "names")= chr [1:4] "y" "x1" "x2" "x3"
>   .. ..$ model        :'data.frame':    996 obs. of  4 variables:
>   .. .. ..$ y : num [1:996] 55.7 71.7 64.3 100.7 75.8 ...
>   .. .. ..$ x1: num [1:996] 5.83 13.01 9.76 25.49 14.7 ...
>   .. .. ..$ x2: num [1:996] 12 27 20 55 31 24 43 31 25 43 ...
>   .. .. ..$ x3: num [1:996] 18 18 18 18 18 19 19 19 19 20 ...
>   .. .. ..- attr(*, "terms")=Classes 'terms', 'formula'  language y ~ x1 + x2 + x3
>   .. .. .. .. ..- attr(*, "variables")= language list(y, x1, x2, x3)
>   .. .. .. .. ..- attr(*, "factors")= int [1:4, 1:3] 0 1 0 0 0 0 1 0 0 0 ...
>   .. .. .. .. .. ..- attr(*, "dimnames")=List of 2
>   .. .. .. .. .. .. ..$ : chr [1:4] "y" "x1" "x2" "x3"
>   .. .. .. .. .. .. ..$ : chr [1:3] "x1" "x2" "x3"
>   .. .. .. .. ..- attr(*, "term.labels")= chr [1:3] "x1" "x2" "x3"
>   .. .. .. .. ..- attr(*, "order")= int [1:3] 1 1 1
>   .. .. .. .. ..- attr(*, "intercept")= int 1
>   .. .. .. .. ..- attr(*, "response")= int 1
>   .. .. .. .. ..- attr(*, ".Environment")=<environment: 0x000000000c5b6b88>
>   .. .. .. .. ..- attr(*, "predvars")= language list(y, x1, x2, x3)
>   .. .. .. .. ..- attr(*, "dataClasses")= Named chr [1:4] "numeric" "numeric"
> "numeric" "numeric"
>   .. .. .. .. .. ..- attr(*, "names")= chr [1:4] "y" "x1" "x2" "x3"
>   .. ..- attr(*, "class")= chr "lm"
>  - attr(*, "class")= chr [1:2] "mira" "matrix"
>
> Thank you,
>
> Anne
>
> -----Message d'origine-----
> De : PIKAL Petr [mailto:petr.pikal at precheza.cz]
> Envoy? : jeudi, 27 septembre 2018 09:20
> ? : CHATTON Anne <Anne.Chatton at hcuge.ch>
> Objet : RE: Problems to obtain standardized betas in multiply-imputed data
>
> Hi
>
> I am not an expert in multiple imputation but from mice help page the
> resulting object is not a simple data frame. lm does not complain but maybe
> FitImp is not "standard" lm object.
>
> Without detailed info about used objects it is difficult to tell what is reason for
> error.
>
> You should send us result (or part) of
>
> str(data)
> str(imp)
> str(FitImp)
>
> to get better answer.
>
> Cheers
> Petr
>
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of CHATTON Anne
> > via R-help
> > Sent: Wednesday, September 26, 2018 10:43 AM
> > To: r-help at r-project.org
> > Subject: [R] Problems to obtain standardized betas in multiply-imputed
> > data
> >
> > Dear all,
> >
> > I am having problems in obtaining standardized betas on a
> > multiply-imputed data set. Here are the codes I used :
> > imp = mice(data, 5, maxit=10, seed=42, print=FALSE)
> > FitImp <-  with(imp,lm(y ~ x1 + x2 + x3)) Up to here everything is fine. But
> when
> > I ask for the standardized coefficients of the multiply-imputed
> > regressions using this command :
> > sdBeta <- lm.beta(FitImp)
> > I get the following error message:
> > Error in b * sx : argument non num?rique pour un op?rateur binaire
> >
> > Can anyone help me with this please?
> >
> > Anne
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch
> partner? PRECHEZA a.s. jsou zve?ejn?ny na: https://www.precheza.cz/zasady-
> ochrany-osobnich-udaju/ | Information about processing and protection of
> business partner?s personal data are available on website:
> https://www.precheza.cz/en/personal-data-protection-principles/
> D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn?
> a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti:
> https://www.precheza.cz/01-dovetek/ | This email and any documents
> attached to it may be confidential and are subject to the legally binding
> disclaimer: https://www.precheza.cz/en/01-disclaimer/

Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information about processing and protection of business partner?s personal data are available on website: https://www.precheza.cz/en/personal-data-protection-principles/
D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any documents attached to it may be confidential and are subject to the legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/


From petr@pik@l @ending from prechez@@cz  Mon Oct  8 16:46:48 2018
From: petr@pik@l @ending from prechez@@cz (PIKAL Petr)
Date: Mon, 8 Oct 2018 14:46:48 +0000
Subject: [R] Error in nlsModel
In-Reply-To: <CAGf4fj0GwzivGHz_Q=BpjPY5J2p7NqBPFiSBeA1q0tEUPPq0Ng@mail.gmail.com>
References: <CAGf4fj0GwzivGHz_Q=BpjPY5J2p7NqBPFiSBeA1q0tEUPPq0Ng@mail.gmail.com>
Message-ID: <30fdda659c934b1cb0059af4915b73ce@SRVEXCHCM1301.precheza.cz>

Hi

I do not want to dig too deep into your code so only 2 comments.

1.Try to plot your defined functions with starting parameters and with defined concentration

something like

plot(conc, Weibull(1,1, conc))

2.Try to use conc with different units, something like

conc1 <- conc*1000

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Belinda Hum Bei Lin
> Sent: Monday, October 8, 2018 11:15 AM
> To: r-help at r-project.org
> Subject: [R] Error in nlsModel
>
> Hello,
>
> It is my first time using R studio and I am facing the error of
> "Error in nlsModel(formula, mf, start, wts) :
>   singular gradient matrix at initial parameter estimates"
> when I try to run my script. From what I read online, I understand that the
> error might be due to the parameters. However, I do not know how to choose
> the right set of parameters. Is there anyone who could advice me on how to
> do this?
>
> Below are my script details:
> rm(list=ls()) #remove ALL objects
> cat("\014") # clear console window prior to new run
> Sys.setenv(LANG = "en") #Let's keep stuff in English
> Sys.setlocale("LC_ALL","English")
>
> ##########
> #import necessary packages
> #########
>
> ##To install the packages use the function install.packages. Installing is
> done once.
> #install.packages("ggplot2")
> #install.packages("minpack.lm")
> #install.packages("nlstools")
>
> ##Activate the packages. This needs to be done everytime before running the
> script.
> require(ggplot2)
> require(minpack.lm)
> require(nlstools)
>
>
>
> #########
> #define the Weibull function
> #########
> Weibull<-function(tet1, tet2,x){
>   1-exp(-exp(tet1+tet2*log10(x)))
> }
>
> #########
> ##define the inverse of the Weibull function. put in effect and get
> concentration as output
> #########
> iWeibull<-function(tet1,tet2,x){
>   10^((log(-log(1-x))-tet1)/tet2)
> }
>
>
> #########
> #define the Logit function
> #########
> Logit<-function(tet1, tet2,x){
>   1/(1+exp(-tet1-tet2*log10(x)))
> }
>
> #########
> ##define the inverse of the Logit function
> #########
> iLogit<-function(tet1,tet2,x){
>   10^(-(log(1/x-1)+tet1)/tet2)
> }
>
> #########
> #define the Probit function
> #########
> Probit<-function(tet1, tet2, x){
>   pnorm(tet1+tet2*(log10(x)))
> }
>
> #########
> ##define the inverse of the Probit function
> #########
> iProbit<-function(tet1,tet2,x){
>   10^((qnorm(x)-tet1)/tet2)
> }
>
> #########
> # Establish data to fit
> # data given here are the data for Diuron from the example datasets
> #
> # Of course one could also import an external datafile via e.g.
> # read.table, read.csv functions
>
> ### example to choose a file for import with the read.csv function, where
> "," is seperating the columns,
> # header=TURE tells R that the first row contains the titles of the
> columns, and
> # stringsAsFactors = FALSE specify that the characters should not be
> converted to factors. For more info run ?read.csv
> effectdata<-read.csv(file.choose(),sep=",",stringsAsFactors = FALSE,header
> = TRUE)
> ?read.csv
> ###
>
> #########
> conc<-c(0,
>         0,
>         0,
>         0,
>         0,
>         0,
>         0.000135696,
>         0.000135696,
>         0.000135696,
>         0.000152971,
>         0.000152971,
>         0.000152971,
>         0.000172445,
>         0.000172445,
>         0.000172445,
>         0.000194398,
>         0.000194398,
>         0.000194398,
>         0.000219146,
>         0.000219146,
>         0.000219146,
>         0.000247044,
>         0.000247044,
>         0.000247044
> )
>
> effect<-c(5.342014355,
>           13.46249176,
>           -9.249022885,
>           -6.666486351,
>           1.00292152,
>           -3.891918402,
>           12.63136345,
>           -2.372582186,
>           8.601073479,
>           1.309926638,
>           0.772728968,
>           -7.01067202,
>           30.65306236,
>           28.10819667,
>           17.94875421,
>           73.00440617,
>           71.33593917,
>           62.23994217,
>           99.18897648,
>           99.05982514,
>           99.2325145,
>           100.2402872,
>           100.1276669,
>           100.1501468
> )
>
> #build input dataframe
> effectdata<-data.frame(conc,effect)
>
> #plot the data just to get a first glance of the data
> ggplot()+
>   geom_point(data=effectdata,aes(x=conc,y=effect), size = 5)+
>   scale_x_log10("conc")
>
>
> #delete controls
> effectdata_without_controls<-subset(effectdata,effectdata$conc>0)
>
>
> #save controls in a seperate dataframe called effectdata_control, which
> will be added to the ggplot in the end.
> #since you can't have 0 on a logscale we will give the controls a very very
> low concentration 0.00001 (not 100% correct, but will not be seen in the
> final plot)
> effectdata_controls<-subset(effectdata,effectdata$conc==0)
> effectdata_controls$conc<-effectdata_controls$conc+0.0001
>
>
>
> ########
> #fit data (without controls) using ordinary least squares
> #ordinary least squares is a method for estimating unknown parameters in
> statistics. The aim of the method is to minimize
> #the difference between the observed responses and the responses predicted
> by the approximation of the data.
> #nlsLM is from the minpack.lm package
> #nls=non-linear lest squares
> ########
> nlsLM_result_Weibull<-nlsLM(effect~Weibull(tet1,tet2,conc),
> data=effectdata_without_controls, start=list(tet1=1,tet2=1))
> nlsLM_result_Logit<-nlsLM(effect~Logit(tet1,tet2,conc),
> data=effectdata_without_controls, start=list(tet1=1,tet2=1))
> nlsLM_result_Probit<-nlsLM(effect~Probit(tet1,tet2,conc),
> data=effectdata_without_controls, start=list(tet1=1,tet2=1))
>
> Thanks a bunch!
>
> Best Regards,
> Belinda
> Belinda *Hum* Bei Lin (Ms)
> National University of Singapore
> (e): belindahbl at gmail.com
> (c): +6581136079
> <+65%208113%206079>
>
> [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information about processing and protection of business partner?s personal data are available on website: https://www.precheza.cz/en/personal-data-protection-principles/
D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any documents attached to it may be confidential and are subject to the legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/


From m@cqueen1 @ending from llnl@gov  Mon Oct  8 18:04:47 2018
From: m@cqueen1 @ending from llnl@gov (MacQueen, Don)
Date: Mon, 8 Oct 2018 16:04:47 +0000
Subject: [R] Genuine relative paths with R
Message-ID: <7976D00C-2713-4B28-AD19-6788184DCF16@llnl.gov>

A few facts (and some opinions):


First fact:

  R understands relative paths (as do the other languages you mentioned) (you have misunderstood R if you think it doesn't)

Second fact:

  R interprets relative paths as being relative to its current working directory

Third fact:

  To find out R's current working directory type:   getwd() at the R prompt

Fourth fact:

   There are various ways to set R's working directory, depending on how you are running R. Once R is running, you can if necessary use setwd() at the R prompt, and this is platform-independent (but it should rarely be necessary).



The easiest way to set the working directory, in my opinion, is by starting R from a linux or Mac command shell (bash, tcsh, etc) environment. You start R by typing "R" at the shell prompt and R's working directory is inherited from the current working directory of the shell.

If you are using a GUI (i.e., you started R by double-clicking on some icon), look for menu commands to set the working directory. Check the documentation for the GUI to find out other ways to set the working directory for that GUI.

No additional packages are necessary in order to manage R's working directory simply and effectively.

Yes, you can move all the scripts related to some project as a whole to some other location and have them run seamlessly using relative paths. Hopefully it is clear by now that all that is needed is to set R's working directory to the project's main directory.

-Don

--
Don MacQueen
Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062
Lab cell 925-724-7509
 
 

?On 10/6/18, 4:48 AM, "R-help on behalf of Olivier GIVAUDAN" <r-help-bounces at r-project.org on behalf of olivier_givaudan at hotmail.com> wrote:

    Dear R users,
    
    I would like to work with genuine relative paths in R for obvious reasons: if I move all my scripts related to some project as a whole to another location of my computer or someone else's computer, if want my scripts to continue to run seamlessly.
    
    What I mean by "genuine" is that it should not be necessary to hardcode one single absolute path (making the code obviously not "portable" - to another place - anymore).
    
    For the time being, I found the following related posts, unfortunately never conclusive or even somewhat off-topic:
    https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
    https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
    http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
    
    So I found 2 workarounds, more or less satisfactory:
    
    
      1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.
      2.  Or create an R project file with RStudio and use the package "here" to get the absolute path of the R project file and put all the R scripts related to this project in the R project directory, as often recommended.
    
    But I am really wondering why R doesn't have (please tell me if I'm wrong) this basic feature as many other languages have it (batch, shell, C, LaTeX, SAS with macro-variables, etc.)?
    Do you know whether the language will have this kind of function in a near future? What are the obstacles / what is the reasoning for not having it already?
    
    Do you know other workarounds?
    
    Best regards,
    
    Olivier
    
    	[[alternative HTML version deleted]]
    
    ______________________________________________
    R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    https://stat.ethz.ch/mailman/listinfo/r-help
    PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    and provide commented, minimal, self-contained, reproducible code.
    


From profjcn@@h @ending from gm@il@com  Mon Oct  8 23:31:40 2018
From: profjcn@@h @ending from gm@il@com (ProfJCNash)
Date: Mon, 8 Oct 2018 17:31:40 -0400
Subject: [R] Error in nlsModel
In-Reply-To: <CAGf4fj0GwzivGHz_Q=BpjPY5J2p7NqBPFiSBeA1q0tEUPPq0Ng@mail.gmail.com>
References: <CAGf4fj0GwzivGHz_Q=BpjPY5J2p7NqBPFiSBeA1q0tEUPPq0Ng@mail.gmail.com>
Message-ID: <ce380959-ba03-ba7e-3dad-3199c86cdf10@gmail.com>

I'm not the author of nlsModel, so would prefer not to tinker with it.

But "singular gradient" is a VERY common problem with nls() that is used
by nlsModel as I understand it. The issue is actually a singular
Jacobian matrix resulting from a rather weak approximation of the
derivatives (a simple forward approximation as far as I can determine,
and using a fairly large step (1e-7), though a choice I'd probably make
too for this approach.

Duncan Murdoch and I wrote nlsr to do analytic derivatives where
possible. If you can use that (i.e., extract the modeling part of
nlsModel and call nlxb() from nlsr directly), I suspect you will have
better luck. If you still get singularity, it likely means that you
really have parameters that are some combination of each other.

JN

On 2018-10-08 05:14 AM, Belinda Hum Bei Lin wrote:
> Hello,
> 
> It is my first time using R studio and I am facing the error of
> "Error in nlsModel(formula, mf, start, wts) :
>   singular gradient matrix at initial parameter estimates"
> when I try to run my script. From what I read online, I understand that the
> error might be due to the parameters. However, I do not know how to choose
> the right set of parameters. Is there anyone who could advice me on how to
> do this?
> 
> Below are my script details:
> rm(list=ls()) #remove ALL objects
> cat("\014") # clear console window prior to new run
> Sys.setenv(LANG = "en") #Let's keep stuff in English
> Sys.setlocale("LC_ALL","English")
> 
> ##########
> #import necessary packages
> #########
> 
> ##To install the packages use the function install.packages. Installing is
> done once.
> #install.packages("ggplot2")
> #install.packages("minpack.lm")
> #install.packages("nlstools")
> 
> ##Activate the packages. This needs to be done everytime before running the
> script.
> require(ggplot2)
> require(minpack.lm)
> require(nlstools)
> 
> 
> 
> #########
> #define the Weibull function
> #########
> Weibull<-function(tet1, tet2,x){
>   1-exp(-exp(tet1+tet2*log10(x)))
> }
> 
> #########
> ##define the inverse of the Weibull function. put in effect and get
> concentration as output
> #########
> iWeibull<-function(tet1,tet2,x){
>   10^((log(-log(1-x))-tet1)/tet2)
> }
> 
> 
> #########
> #define the Logit function
> #########
> Logit<-function(tet1, tet2,x){
>   1/(1+exp(-tet1-tet2*log10(x)))
> }
> 
> #########
> ##define the inverse of the Logit function
> #########
> iLogit<-function(tet1,tet2,x){
>   10^(-(log(1/x-1)+tet1)/tet2)
> }
> 
> #########
> #define the Probit function
> #########
> Probit<-function(tet1, tet2, x){
>   pnorm(tet1+tet2*(log10(x)))
> }
> 
> #########
> ##define the inverse of the Probit function
> #########
> iProbit<-function(tet1,tet2,x){
>   10^((qnorm(x)-tet1)/tet2)
> }
> 
> #########
> # Establish data to fit
> # data given here are the data for Diuron from the example datasets
> #
> # Of course one could also import an external datafile via e.g.
> # read.table, read.csv functions
> 
> ### example to choose a file for import with the read.csv function, where
> "," is seperating the columns,
> # header=TURE tells R that the first row contains the titles of the
> columns, and
> # stringsAsFactors = FALSE specify that the characters should not be
> converted to factors. For more info run ?read.csv
> effectdata<-read.csv(file.choose(),sep=",",stringsAsFactors = FALSE,header
> = TRUE)
> ?read.csv
> ###
> 
> #########
> conc<-c(0,
>         0,
>         0,
>         0,
>         0,
>         0,
>         0.000135696,
>         0.000135696,
>         0.000135696,
>         0.000152971,
>         0.000152971,
>         0.000152971,
>         0.000172445,
>         0.000172445,
>         0.000172445,
>         0.000194398,
>         0.000194398,
>         0.000194398,
>         0.000219146,
>         0.000219146,
>         0.000219146,
>         0.000247044,
>         0.000247044,
>         0.000247044
> )
> 
> effect<-c(5.342014355,
>           13.46249176,
>           -9.249022885,
>           -6.666486351,
>           1.00292152,
>           -3.891918402,
>           12.63136345,
>           -2.372582186,
>           8.601073479,
>           1.309926638,
>           0.772728968,
>           -7.01067202,
>           30.65306236,
>           28.10819667,
>           17.94875421,
>           73.00440617,
>           71.33593917,
>           62.23994217,
>           99.18897648,
>           99.05982514,
>           99.2325145,
>           100.2402872,
>           100.1276669,
>           100.1501468
> )
> 
> #build input dataframe
> effectdata<-data.frame(conc,effect)
> 
> #plot the data just to get a first glance of the data
> ggplot()+
>   geom_point(data=effectdata,aes(x=conc,y=effect), size = 5)+
>   scale_x_log10("conc")
> 
> 
> #delete controls
> effectdata_without_controls<-subset(effectdata,effectdata$conc>0)
> 
> 
> #save controls in a seperate dataframe called effectdata_control, which
> will be added to the ggplot in the end.
> #since you can't have 0 on a logscale we will give the controls a very very
> low concentration 0.00001 (not 100% correct, but will not be seen in the
> final plot)
> effectdata_controls<-subset(effectdata,effectdata$conc==0)
> effectdata_controls$conc<-effectdata_controls$conc+0.0001
> 
> 
> 
> ########
> #fit data (without controls) using ordinary least squares
> #ordinary least squares is a method for estimating unknown parameters in
> statistics. The aim of the method is to minimize
> #the difference between the observed responses and the responses predicted
> by the approximation of the data.
> #nlsLM is from the minpack.lm package
> #nls=non-linear lest squares
> ########
> nlsLM_result_Weibull<-nlsLM(effect~Weibull(tet1,tet2,conc),
> data=effectdata_without_controls, start=list(tet1=1,tet2=1))
> nlsLM_result_Logit<-nlsLM(effect~Logit(tet1,tet2,conc),
> data=effectdata_without_controls, start=list(tet1=1,tet2=1))
> nlsLM_result_Probit<-nlsLM(effect~Probit(tet1,tet2,conc),
> data=effectdata_without_controls, start=list(tet1=1,tet2=1))
> 
> Thanks a bunch!
> 
> Best Regards,
> Belinda
> Belinda *Hum* Bei Lin (Ms)
> National University of Singapore
> (e): belindahbl at gmail.com
> (c): +6581136079
> <+65%208113%206079>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From wdunl@p @ending from tibco@com  Tue Oct  9 00:21:04 2018
From: wdunl@p @ending from tibco@com (William Dunlap)
Date: Mon, 8 Oct 2018 15:21:04 -0700
Subject: [R] Error in nlsModel
In-Reply-To: <CAGf4fj0GwzivGHz_Q=BpjPY5J2p7NqBPFiSBeA1q0tEUPPq0Ng@mail.gmail.com>
References: <CAGf4fj0GwzivGHz_Q=BpjPY5J2p7NqBPFiSBeA1q0tEUPPq0Ng@mail.gmail.com>
Message-ID: <CAF8bMcZXcN5KNHq-WuKaSePWfrTJEkESz2u+dCawGc-5BHwewA@mail.gmail.com>

  Weibull<-function(tet1, tet2,x){
    1-exp(-exp(tet1+tet2*log10(x)))
  }
  range(effectdata_without_controls$conc)
  # 0.000135696 0.000247044
  range(effectdata_without_controls$effect)
  # [1]  -7.010672 100.240287
  nls(effect ~ Weibull(tet1, tet2, conc))

Your Weibull function has a range of [0,1) but you are using it to model
an effect with range c. -7 to 100.  Is this an appropriate model?




Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Mon, Oct 8, 2018 at 2:14 AM, Belinda Hum Bei Lin <belindahbl at gmail.com>
wrote:

> Hello,
>
> It is my first time using R studio and I am facing the error of
> "Error in nlsModel(formula, mf, start, wts) :
>   singular gradient matrix at initial parameter estimates"
> when I try to run my script. From what I read online, I understand that the
> error might be due to the parameters. However, I do not know how to choose
> the right set of parameters. Is there anyone who could advice me on how to
> do this?
>
> Below are my script details:
> rm(list=ls()) #remove ALL objects
> cat("\014") # clear console window prior to new run
> Sys.setenv(LANG = "en") #Let's keep stuff in English
> Sys.setlocale("LC_ALL","English")
>
> ##########
> #import necessary packages
> #########
>
> ##To install the packages use the function install.packages. Installing is
> done once.
> #install.packages("ggplot2")
> #install.packages("minpack.lm")
> #install.packages("nlstools")
>
> ##Activate the packages. This needs to be done everytime before running the
> script.
> require(ggplot2)
> require(minpack.lm)
> require(nlstools)
>
>
>
> #########
> #define the Weibull function
> #########
> Weibull<-function(tet1, tet2,x){
>   1-exp(-exp(tet1+tet2*log10(x)))
> }
>
> #########
> ##define the inverse of the Weibull function. put in effect and get
> concentration as output
> #########
> iWeibull<-function(tet1,tet2,x){
>   10^((log(-log(1-x))-tet1)/tet2)
> }
>
>
> #########
> #define the Logit function
> #########
> Logit<-function(tet1, tet2,x){
>   1/(1+exp(-tet1-tet2*log10(x)))
> }
>
> #########
> ##define the inverse of the Logit function
> #########
> iLogit<-function(tet1,tet2,x){
>   10^(-(log(1/x-1)+tet1)/tet2)
> }
>
> #########
> #define the Probit function
> #########
> Probit<-function(tet1, tet2, x){
>   pnorm(tet1+tet2*(log10(x)))
> }
>
> #########
> ##define the inverse of the Probit function
> #########
> iProbit<-function(tet1,tet2,x){
>   10^((qnorm(x)-tet1)/tet2)
> }
>
> #########
> # Establish data to fit
> # data given here are the data for Diuron from the example datasets
> #
> # Of course one could also import an external datafile via e.g.
> # read.table, read.csv functions
>
> ### example to choose a file for import with the read.csv function, where
> "," is seperating the columns,
> # header=TURE tells R that the first row contains the titles of the
> columns, and
> # stringsAsFactors = FALSE specify that the characters should not be
> converted to factors. For more info run ?read.csv
> effectdata<-read.csv(file.choose(),sep=",",stringsAsFactors = FALSE,header
> = TRUE)
> ?read.csv
> ###
>
> #########
> conc<-c(0,
>         0,
>         0,
>         0,
>         0,
>         0,
>         0.000135696,
>         0.000135696,
>         0.000135696,
>         0.000152971,
>         0.000152971,
>         0.000152971,
>         0.000172445,
>         0.000172445,
>         0.000172445,
>         0.000194398,
>         0.000194398,
>         0.000194398,
>         0.000219146,
>         0.000219146,
>         0.000219146,
>         0.000247044,
>         0.000247044,
>         0.000247044
> )
>
> effect<-c(5.342014355,
>           13.46249176,
>           -9.249022885,
>           -6.666486351,
>           1.00292152,
>           -3.891918402,
>           12.63136345,
>           -2.372582186,
>           8.601073479,
>           1.309926638,
>           0.772728968,
>           -7.01067202,
>           30.65306236,
>           28.10819667,
>           17.94875421,
>           73.00440617,
>           71.33593917,
>           62.23994217,
>           99.18897648,
>           99.05982514,
>           99.2325145,
>           100.2402872,
>           100.1276669,
>           100.1501468
> )
>
> #build input dataframe
> effectdata<-data.frame(conc,effect)
>
> #plot the data just to get a first glance of the data
> ggplot()+
>   geom_point(data=effectdata,aes(x=conc,y=effect), size = 5)+
>   scale_x_log10("conc")
>
>
> #delete controls
> effectdata_without_controls<-subset(effectdata,effectdata$conc>0)
>
>
> #save controls in a seperate dataframe called effectdata_control, which
> will be added to the ggplot in the end.
> #since you can't have 0 on a logscale we will give the controls a very very
> low concentration 0.00001 (not 100% correct, but will not be seen in the
> final plot)
> effectdata_controls<-subset(effectdata,effectdata$conc==0)
> effectdata_controls$conc<-effectdata_controls$conc+0.0001
>
>
>
> ########
> #fit data (without controls) using ordinary least squares
> #ordinary least squares is a method for estimating unknown parameters in
> statistics. The aim of the method is to minimize
> #the difference between the observed responses and the responses predicted
> by the approximation of the data.
> #nlsLM is from the minpack.lm package
> #nls=non-linear lest squares
> ########
> nlsLM_result_Weibull<-nlsLM(effect~Weibull(tet1,tet2,conc),
> data=effectdata_without_controls, start=list(tet1=1,tet2=1))
> nlsLM_result_Logit<-nlsLM(effect~Logit(tet1,tet2,conc),
> data=effectdata_without_controls, start=list(tet1=1,tet2=1))
> nlsLM_result_Probit<-nlsLM(effect~Probit(tet1,tet2,conc),
> data=effectdata_without_controls, start=list(tet1=1,tet2=1))
>
> Thanks a bunch!
>
> Best Regards,
> Belinda
> Belinda *Hum* Bei Lin (Ms)
> National University of Singapore
> (e): belindahbl at gmail.com
> (c): +6581136079
> <+65%208113%206079>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From e@@wiek @ending from gm@il@com  Tue Oct  9 15:44:21 2018
From: e@@wiek @ending from gm@il@com (Ek Esawi)
Date: Tue, 9 Oct 2018 09:44:21 -0400
Subject: [R] Reorder file names read by list.files function
Message-ID: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>

Hi All--

I used base R list.file function to read files from a directory. The
file names are months (April, August, etc). That's the system reads
them in alphabetical order., but i want to reordered them in calendar
order (January, February, ...December).. I thought i might be able to
do it via RegEx or possibly gtools package, I am wondering if there is
an easier way.

Thanks--EK

Example
path = "C:/Users/name/Downloads/MyFiles"
file.names <- dir(path, pattern =".PDF")

Example output
Output:
"February.PDF"  "January.PDF" "March.PDF"
Desired output
"January.PDF"  "February.PDF" "March.PDF"


From petr@pik@l @ending from prechez@@cz  Tue Oct  9 16:07:52 2018
From: petr@pik@l @ending from prechez@@cz (PIKAL Petr)
Date: Tue, 9 Oct 2018 14:07:52 +0000
Subject: [R] Reorder file names read by list.files function
In-Reply-To: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
References: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
Message-ID: <cdc15c6ec9a1464b830f72e5c01092c0@SRVEXCHCM1301.precheza.cz>

Hi

You could use brute force approach. Just print out "file.names" and estimate ordering vector.
In czech locale it is

oo <- c(6, 11, 1, 4, 5, 2, 3, 10, 12, 9, 7, 8)

In english locale it is different :-)

After that
file.names[oo]

should give you correct order of file names

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Ek Esawi
> Sent: Tuesday, October 9, 2018 3:44 PM
> To: r-help at r-project.org
> Subject: [R] Reorder file names read by list.files function
>
> Hi All--
>
> I used base R list.file function to read files from a directory. The file names are
> months (April, August, etc). That's the system reads them in alphabetical order.,
> but i want to reordered them in calendar order (January, February,
> ...December).. I thought i might be able to do it via RegEx or possibly gtools
> package, I am wondering if there is an easier way.
>
> Thanks--EK
>
> Example
> path = "C:/Users/name/Downloads/MyFiles"
> file.names <- dir(path, pattern =".PDF")
>
> Example output
> Output:
> "February.PDF"  "January.PDF" "March.PDF"
> Desired output
> "January.PDF"  "February.PDF" "March.PDF"
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information about processing and protection of business partner?s personal data are available on website: https://www.precheza.cz/en/personal-data-protection-principles/
D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any documents attached to it may be confidential and are subject to the legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/


From ruipb@rr@d@@ @ending from @@po@pt  Tue Oct  9 16:09:39 2018
From: ruipb@rr@d@@ @ending from @@po@pt (Rui Barradas)
Date: Tue, 9 Oct 2018 15:09:39 +0100
Subject: [R] Reorder file names read by list.files function
In-Reply-To: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
References: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
Message-ID: <391b9b99-17cf-fd1d-461d-e91dd7e8ab4c@sapo.pt>

Hello,

You can use the built in variable month.name to get the calendar order 
and match it with your file names.


i <- match(sub("\\.PDF", "", file.names), month.name)
file.names[i]
#[1] "January.PDF"  "February.PDF" "March.PDF"


Hope this helps,

Rui Barradas


?s 14:44 de 09/10/2018, Ek Esawi escreveu:
> Hi All--
> 
> I used base R list.file function to read files from a directory. The
> file names are months (April, August, etc). That's the system reads
> them in alphabetical order., but i want to reordered them in calendar
> order (January, February, ...December).. I thought i might be able to
> do it via RegEx or possibly gtools package, I am wondering if there is
> an easier way.
> 
> Thanks--EK
> 
> Example
> path = "C:/Users/name/Downloads/MyFiles"
> file.names <- dir(path, pattern =".PDF")
> 
> Example output
> Output:
> "February.PDF"  "January.PDF" "March.PDF"
> Desired output
> "January.PDF"  "February.PDF" "March.PDF"
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From m@rc@c@p@v@nni @ending from googlem@il@com  Tue Oct  9 14:24:05 2018
From: m@rc@c@p@v@nni @ending from googlem@il@com (Marc Capavanni)
Date: Tue, 9 Oct 2018 13:24:05 +0100
Subject: [R] Can I safely use an installed R folder in a portable manner?
Message-ID: <CANccLkyi1W7iMnyur60v0s85CL3EwgdLhJNNFpASRVgWxaRigQ@mail.gmail.com>

Hi there,

I'm currently using R on Windows as part of a piece of software and when
I'm providing it to users I have an application that runs the R
installation file with an INF file containing the following settings as to
not disrupt existing installs of R on their system.

[Setup]
Lang=en
Dir=.\R_Install\
Group=R
NoIcons=1
SetupType=user32
Components=main,i386
Tasks=
[R]
MDISDI=MDI
HelpStyle=HTML

The aim using this INF file is that the install should not touch the
registry, or add any icons/shortcuts anywhere.

This R install does not need to do much aside from provide the R
executables (particularly rscript.exe) for use, so I don't need it to be on
the PATH, for it to handle R files being double clicked by the user, etc.

However, I've recently found that taking the installed R folder and using
it on another PC without running the installer *seems* to work just fine
(at least for my use case of simply accessible the executables). This would
make "installing"/"uninstalling" easier as it would simply be a case of
copying the folder, and later on deleting it.

I was wondering if there is anything I'm missing here that would make this
not feasible.

Can I safely use an installed R folder, as a base for copying it to other
PCs in a portable manner?

Thanks,
Marc

	[[alternative HTML version deleted]]


From j@zh@o @ending from ye@h@net  Tue Oct  9 16:53:17 2018
From: j@zh@o @ending from ye@h@net (Jinsong Zhao)
Date: Tue, 9 Oct 2018 22:53:17 +0800 (CST)
Subject: [R] how to pass arguments to panel.cor in pairs()
Message-ID: <612e821a.3104.1665951614f.Coremail.jszhao@yeah.net>

Hi there,

Here is the panel.cor function from ?pairs:

     panel.cor <- function(x, y, digits = 2, prefix = "", cex.cor, ...)
     {
         usr <- par("usr"); on.exit(par(usr))
         par(usr = c(0, 1, 0, 1))
         r <- abs(cor(x, y))
         txt <- format(c(r, 0.123456789), digits = digits)[1]
         txt <- paste0(prefix, txt)
         if(missing(cex.cor)) cex.cor <- 0.8/strwidth(txt)
         text(0.5, 0.5, txt, cex = cex.cor * r)
     }

in the following code, pairs use the panel.cor defined above:

     pairs(USJudgeRatings, lower.panel = panel.smooth, upper.panel = panel.cor,
           gap=0, row1attop=FALSE)

I try to change prefix = "" to prefix = "r = ", something like:

     pairs(USJudgeRatings, lower.panel = panel.smooth, upper.panel = panel.cor, prefix = "r = ",
           gap=0, row1attop=FALSE)

I got lots of warnings.

How to change prefix to something else, but not change the defined panel.cor? Thanks!

Best,
Jinsong

	[[alternative HTML version deleted]]


From murdoch@dunc@n @ending from gm@il@com  Tue Oct  9 17:22:24 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Tue, 9 Oct 2018 11:22:24 -0400
Subject: [R] how to pass arguments to panel.cor in pairs()
In-Reply-To: <612e821a.3104.1665951614f.Coremail.jszhao@yeah.net>
References: <612e821a.3104.1665951614f.Coremail.jszhao@yeah.net>
Message-ID: <cd53a455-141e-7555-d171-2db91cdd78dd@gmail.com>

On 09/10/2018 10:53 AM, Jinsong Zhao wrote:
> Hi there,
> 
> Here is the panel.cor function from ?pairs:
> 
>       panel.cor <- function(x, y, digits = 2, prefix = "", cex.cor, ...)
>       {
>           usr <- par("usr"); on.exit(par(usr))
>           par(usr = c(0, 1, 0, 1))
>           r <- abs(cor(x, y))
>           txt <- format(c(r, 0.123456789), digits = digits)[1]
>           txt <- paste0(prefix, txt)
>           if(missing(cex.cor)) cex.cor <- 0.8/strwidth(txt)
>           text(0.5, 0.5, txt, cex = cex.cor * r)
>       }
> 
> in the following code, pairs use the panel.cor defined above:
> 
>       pairs(USJudgeRatings, lower.panel = panel.smooth, upper.panel = panel.cor,
>             gap=0, row1attop=FALSE)
> 
> I try to change prefix = "" to prefix = "r = ", something like:
> 
>       pairs(USJudgeRatings, lower.panel = panel.smooth, upper.panel = panel.cor, prefix = "r = ",
>             gap=0, row1attop=FALSE)
> 
> I got lots of warnings.
> 
> How to change prefix to something else, but not change the defined panel.cor? Thanks!

Since panel.cor is not a base function, just a function defined in the 
example, you could just modify it.

If you want the regular one sometimes and a custom one other times,
you could make your own panel function:

   panel.cor2 <- function(...) panel.cor(..., prefix = "r = ")

Then use


   pairs(USJudgeRatings, lower.panel = panel.smooth, upper.panel = 
panel.cor2, gap=0, row1attop=FALSE)

Duncan Murdoch


From jdnewmil @ending from dcn@d@vi@@c@@u@  Tue Oct  9 17:29:56 2018
From: jdnewmil @ending from dcn@d@vi@@c@@u@ (Jeff Newmiller)
Date: Tue, 09 Oct 2018 08:29:56 -0700
Subject: [R] Reorder file names read by list.files function
In-Reply-To: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
References: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
Message-ID: <14B8D3CD-0D7C-48BF-A34E-3C45D448A961@dcn.davis.ca.us>

Instead of changing the order in which you read the files, perhaps your analysis will work if you sort the data after you read it in. This may require that you add the month names as a column in the data frames, or you may already have dates in the data that you could sort by.

One idea:

fnames <- paste0( month.name, ".PDF" )
resultdf <- do.call( rbind, lapply(fnames, function(fn) { read.csv( file.path( "datadir", fn ), as.is=TRUE ) } )

but that only works if there are exactly 12 files. If there could be fewer, perhaps:

fnames <- list.files( "datadir" )
sfnames <- fnames[ match( sub("\\.PDF", "", fnames ), month.name ) ]


On October 9, 2018 6:44:21 AM PDT, Ek Esawi <esawiek at gmail.com> wrote:
>Hi All--
>
>I used base R list.file function to read files from a directory. The
>file names are months (April, August, etc). That's the system reads
>them in alphabetical order., but i want to reordered them in calendar
>order (January, February, ...December).. I thought i might be able to
>do it via RegEx or possibly gtools package, I am wondering if there is
>an easier way.
>
>Thanks--EK
>
>Example
>path = "C:/Users/name/Downloads/MyFiles"
>file.names <- dir(path, pattern =".PDF")
>
>Example output
>Output:
>"February.PDF"  "January.PDF" "March.PDF"
>Desired output
>"January.PDF"  "February.PDF" "March.PDF"
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From jdnewmil @ending from dcn@d@vi@@c@@u@  Tue Oct  9 17:29:56 2018
From: jdnewmil @ending from dcn@d@vi@@c@@u@ (Jeff Newmiller)
Date: Tue, 09 Oct 2018 08:29:56 -0700
Subject: [R] Reorder file names read by list.files function
In-Reply-To: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
References: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
Message-ID: <221314A3-19DD-41D2-9802-8BA9C031DE6A@dcn.davis.ca.us>

Instead of changing the order in which you read the files, perhaps your analysis will work if you sort the data after you read it in. This may require that you add the month names as a column in the data frames, or you may already have dates in the data that you could sort by.

One idea:

fnames <- paste0( month.name, ".PDF" )
resultdf <- do.call( rbind, lapply(fnames, function(fn) { read.csv( file.path( "datadir", fn ), as.is=TRUE ) } )

but that only works if there are exactly 12 files. If there could be fewer, perhaps:

fnames <- list.files( "datadir" )
sfnames <- fnames[ match( sub("\\.PDF", "", fnames ), month.name ) ]


On October 9, 2018 6:44:21 AM PDT, Ek Esawi <esawiek at gmail.com> wrote:
>Hi All--
>
>I used base R list.file function to read files from a directory. The
>file names are months (April, August, etc). That's the system reads
>them in alphabetical order., but i want to reordered them in calendar
>order (January, February, ...December).. I thought i might be able to
>do it via RegEx or possibly gtools package, I am wondering if there is
>an easier way.
>
>Thanks--EK
>
>Example
>path = "C:/Users/name/Downloads/MyFiles"
>file.names <- dir(path, pattern =".PDF")
>
>Example output
>Output:
>"February.PDF"  "January.PDF" "March.PDF"
>Desired output
>"January.PDF"  "February.PDF" "March.PDF"
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From @tyen @ending from ntu@edu@tw  Tue Oct  9 18:17:28 2018
From: @tyen @ending from ntu@edu@tw (Steven Yen)
Date: Wed, 10 Oct 2018 00:17:28 +0800
Subject: [R] Graphing output
Message-ID: <4663accd-7495-bc0f-2b15-fc6f6371e5e5@ntu.edu.tw>

Is it possible to release the file destination after sending it to a pdf 
file?
Below, line 3 send the graph to a pdf file.
I like to release the devise so that I can see result produced by line 
for on the console (screen). Thanks.

x<-1:10
pdf("test1.pdf") # pdf {grDevices}
boxplot(x) # This goes to pdf file
boxplot(x) # Like this to go to console

-- 
styen at ntu.edu.tw  (S.T. Yen)


	[[alternative HTML version deleted]]


From wdunl@p @ending from tibco@com  Tue Oct  9 18:19:43 2018
From: wdunl@p @ending from tibco@com (William Dunlap)
Date: Tue, 9 Oct 2018 09:19:43 -0700
Subject: [R] Graphing output
In-Reply-To: <4663accd-7495-bc0f-2b15-fc6f6371e5e5@ntu.edu.tw>
References: <4663accd-7495-bc0f-2b15-fc6f6371e5e5@ntu.edu.tw>
Message-ID: <CAF8bMcbhfpjfr6b6jUh=nQqxsLof0D0LtZxVnJj+T2bwf0c1qw@mail.gmail.com>

Look at dev.off() or possibly dev.set().

Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Tue, Oct 9, 2018 at 9:17 AM, Steven Yen <styen at ntu.edu.tw> wrote:

> Is it possible to release the file destination after sending it to a pdf
> file?
> Below, line 3 send the graph to a pdf file.
> I like to release the devise so that I can see result produced by line
> for on the console (screen). Thanks.
>
> x<-1:10
> pdf("test1.pdf") # pdf {grDevices}
> boxplot(x) # This goes to pdf file
> boxplot(x) # Like this to go to console
>
> --
> styen at ntu.edu.tw  (S.T. Yen)
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From rlderick@on @ending from gm@il@com  Tue Oct  9 19:14:54 2018
From: rlderick@on @ending from gm@il@com (Ryan Derickson)
Date: Tue, 9 Oct 2018 13:14:54 -0400
Subject: [R] Rounding behavior
Message-ID: <CALSCBYoOYa8qzhRCpj8-CYsDKCVu280PvoNvrpoDfKw0TSwQNg@mail.gmail.com>

Hello,

Apologies if this is a simple misunderstanding.

round((.575*100),0) gives 57
round(57.5,0) gives 58

Why?

Ryan Derickson
University of Cincinnati

On Tue, Oct 9, 2018, 10:08 AM PIKAL Petr <petr.pikal at precheza.cz> wrote:

> Hi
>
> You could use brute force approach. Just print out "file.names" and
> estimate ordering vector.
> In czech locale it is
>
> oo <- c(6, 11, 1, 4, 5, 2, 3, 10, 12, 9, 7, 8)
>
> In english locale it is different :-)
>
> After that
> file.names[oo]
>
> should give you correct order of file names
>
> Cheers
> Petr
>
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of Ek Esawi
> > Sent: Tuesday, October 9, 2018 3:44 PM
> > To: r-help at r-project.org
> > Subject: [R] Reorder file names read by list.files function
> >
> > Hi All--
> >
> > I used base R list.file function to read files from a directory. The
> file names are
> > months (April, August, etc). That's the system reads them in
> alphabetical order.,
> > but i want to reordered them in calendar order (January, February,
> > ...December).. I thought i might be able to do it via RegEx or possibly
> gtools
> > package, I am wondering if there is an easier way.
> >
> > Thanks--EK
> >
> > Example
> > path = "C:/Users/name/Downloads/MyFiles"
> > file.names <- dir(path, pattern =".PDF")
> >
> > Example output
> > Output:
> > "February.PDF"  "January.PDF" "March.PDF"
> > Desired output
> > "January.PDF"  "February.PDF" "March.PDF"
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch
> partner? PRECHEZA a.s. jsou zve?ejn?ny na:
> https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information
> about processing and protection of business partner?s personal data are
> available on website:
> https://www.precheza.cz/en/personal-data-protection-principles/
> D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou
> d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en?
> odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any
> documents attached to it may be confidential and are subject to the legally
> binding disclaimer: https://www.precheza.cz/en/01-disclaimer/
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From rmh @ending from temple@edu  Tue Oct  9 19:33:55 2018
From: rmh @ending from temple@edu (Richard M. Heiberger)
Date: Tue, 9 Oct 2018 13:33:55 -0400
Subject: [R] Rounding behavior
In-Reply-To: <CALSCBYoOYa8qzhRCpj8-CYsDKCVu280PvoNvrpoDfKw0TSwQNg@mail.gmail.com>
References: <CALSCBYoOYa8qzhRCpj8-CYsDKCVu280PvoNvrpoDfKw0TSwQNg@mail.gmail.com>
Message-ID: <CAGx1TMAfwCrqP7qe8H17ArQU88KGg7jKuW=Hp679c0Aoq68DKw@mail.gmail.com>

FAQ 7.31
Open this file in your favorite text editor on your computer
system.file("../../doc/FAQ")

57.5 comes out even in binary, and .575 does not.

> print(.575*100, digits=17)
[1] 57.499999999999993
## The fraction is less than .5, hence it gets rounded down to 57
> print(57.5, digits=17)
[1] 57.5
## the fraction is exactly .5, hence gets rounded to the nearest even number 58
l

On Tue, Oct 9, 2018 at 1:14 PM, Ryan Derickson <rlderickson at gmail.com> wrote:
> Hello,
>
> Apologies if this is a simple misunderstanding.
>
> round((.575*100),0) gives 57
> round(57.5,0) gives 58
>
> Why?
>
> Ryan Derickson
> University of Cincinnati
>
> On Tue, Oct 9, 2018, 10:08 AM PIKAL Petr <petr.pikal at precheza.cz> wrote:
>
>> Hi
>>
>> You could use brute force approach. Just print out "file.names" and
>> estimate ordering vector.
>> In czech locale it is
>>
>> oo <- c(6, 11, 1, 4, 5, 2, 3, 10, 12, 9, 7, 8)
>>
>> In english locale it is different :-)
>>
>> After that
>> file.names[oo]
>>
>> should give you correct order of file names
>>
>> Cheers
>> Petr
>>
>> > -----Original Message-----
>> > From: R-help <r-help-bounces at r-project.org> On Behalf Of Ek Esawi
>> > Sent: Tuesday, October 9, 2018 3:44 PM
>> > To: r-help at r-project.org
>> > Subject: [R] Reorder file names read by list.files function
>> >
>> > Hi All--
>> >
>> > I used base R list.file function to read files from a directory. The
>> file names are
>> > months (April, August, etc). That's the system reads them in
>> alphabetical order.,
>> > but i want to reordered them in calendar order (January, February,
>> > ...December).. I thought i might be able to do it via RegEx or possibly
>> gtools
>> > package, I am wondering if there is an easier way.
>> >
>> > Thanks--EK
>> >
>> > Example
>> > path = "C:/Users/name/Downloads/MyFiles"
>> > file.names <- dir(path, pattern =".PDF")
>> >
>> > Example output
>> > Output:
>> > "February.PDF"  "January.PDF" "March.PDF"
>> > Desired output
>> > "January.PDF"  "February.PDF" "March.PDF"
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>> Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch
>> partner? PRECHEZA a.s. jsou zve?ejn?ny na:
>> https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information
>> about processing and protection of business partner?s personal data are
>> available on website:
>> https://www.precheza.cz/en/personal-data-protection-principles/
>> D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou
>> d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en?
>> odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any
>> documents attached to it may be confidential and are subject to the legally
>> binding disclaimer: https://www.precheza.cz/en/01-disclaimer/
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jdnewmil @ending from dcn@d@vi@@c@@u@  Tue Oct  9 19:47:24 2018
From: jdnewmil @ending from dcn@d@vi@@c@@u@ (Jeff Newmiller)
Date: Tue, 09 Oct 2018 10:47:24 -0700
Subject: [R] Rounding behavior
In-Reply-To: <CALSCBYoOYa8qzhRCpj8-CYsDKCVu280PvoNvrpoDfKw0TSwQNg@mail.gmail.com>
References: <CALSCBYoOYa8qzhRCpj8-CYsDKCVu280PvoNvrpoDfKw0TSwQNg@mail.gmail.com>
Message-ID: <452CEA75-F7E1-4BDD-9CB0-95E738232011@dcn.davis.ca.us>

Floating point numbers are approximations in base 2, so any fractions not representing such numbers may round off in unexpected directions.

sprintf( "%22.20f", 0.5 )
sprintf( "%22.20f", 0.575 )

See R FAQ 7.31.

On October 9, 2018 10:14:54 AM PDT, Ryan Derickson <rlderickson at gmail.com> wrote:
>Hello,
>
>Apologies if this is a simple misunderstanding.
>
>round((.575*100),0) gives 57
>round(57.5,0) gives 58
>
>Why?
>
>Ryan Derickson
>University of Cincinnati
>
>On Tue, Oct 9, 2018, 10:08 AM PIKAL Petr <petr.pikal at precheza.cz>
>wrote:
>
>> Hi
>>
>> You could use brute force approach. Just print out "file.names" and
>> estimate ordering vector.
>> In czech locale it is
>>
>> oo <- c(6, 11, 1, 4, 5, 2, 3, 10, 12, 9, 7, 8)
>>
>> In english locale it is different :-)
>>
>> After that
>> file.names[oo]
>>
>> should give you correct order of file names
>>
>> Cheers
>> Petr
>>
>> > -----Original Message-----
>> > From: R-help <r-help-bounces at r-project.org> On Behalf Of Ek Esawi
>> > Sent: Tuesday, October 9, 2018 3:44 PM
>> > To: r-help at r-project.org
>> > Subject: [R] Reorder file names read by list.files function
>> >
>> > Hi All--
>> >
>> > I used base R list.file function to read files from a directory.
>The
>> file names are
>> > months (April, August, etc). That's the system reads them in
>> alphabetical order.,
>> > but i want to reordered them in calendar order (January, February,
>> > ...December).. I thought i might be able to do it via RegEx or
>possibly
>> gtools
>> > package, I am wondering if there is an easier way.
>> >
>> > Thanks--EK
>> >
>> > Example
>> > path = "C:/Users/name/Downloads/MyFiles"
>> > file.names <- dir(path, pattern =".PDF")
>> >
>> > Example output
>> > Output:
>> > "February.PDF"  "January.PDF" "March.PDF"
>> > Desired output
>> > "January.PDF"  "February.PDF" "March.PDF"
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>> Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj?
>obchodn?ch
>> partner? PRECHEZA a.s. jsou zve?ejn?ny na:
>> https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information
>> about processing and protection of business partner?s personal data
>are
>> available on website:
>> https://www.precheza.cz/en/personal-data-protection-principles/
>> D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou
>> d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en?
>> odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and
>any
>> documents attached to it may be confidential and are subject to the
>legally
>> binding disclaimer: https://www.precheza.cz/en/01-disclaimer/
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From benoit@v@ill@nt @ending from no-log@org  Tue Oct  9 20:00:04 2018
From: benoit@v@ill@nt @ending from no-log@org (Benoit Vaillant)
Date: Tue, 9 Oct 2018 20:00:04 +0200
Subject: [R] Rounding behavior
In-Reply-To: <CALSCBYoOYa8qzhRCpj8-CYsDKCVu280PvoNvrpoDfKw0TSwQNg@mail.gmail.com>
References: <CALSCBYoOYa8qzhRCpj8-CYsDKCVu280PvoNvrpoDfKw0TSwQNg@mail.gmail.com>
Message-ID: <20181009180004.wesdxscuayglpmby@auroras.fr>

Hello,

On Tue, Oct 09, 2018 at 01:14:54PM -0400, Ryan Derickson wrote:
> Apologies if this is a simple misunderstanding.

See for example:
https://cran.r-project.org/doc/FAQ/R-FAQ.html#Why-doesn_0027t-R-think-these-numbers-are-equal_003f

> round((.575*100),0) gives 57
> round(57.5,0) gives 58
> 
> Why?

Not R related at all.

$ python
Python 2.7.13 (default, Sep 26 2018, 18:42:22)
[GCC 6.3.0 20170516] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> round((.575*100),0)
57.0
>>> round(57.5,0)
58.0

Same "issue". :)

You'll need to dig into how numbers are floating numbers are
represented in a finite set.

Cheers,

-- 
Beno?t Vaillant

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 866 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20181009/0b862d59/attachment.sig>

From rlderick@on @ending from gm@il@com  Tue Oct  9 20:43:45 2018
From: rlderick@on @ending from gm@il@com (Ryan Derickson)
Date: Tue, 9 Oct 2018 14:43:45 -0400
Subject: [R] Rounding behavior
In-Reply-To: <20181009180004.wesdxscuayglpmby@auroras.fr>
References: <CALSCBYoOYa8qzhRCpj8-CYsDKCVu280PvoNvrpoDfKw0TSwQNg@mail.gmail.com>
 <20181009180004.wesdxscuayglpmby@auroras.fr>
Message-ID: <CALSCBYp09TnaHRUPt0S99=d75UdLtg8xXYbTZzhidjuzCBPrPQ@mail.gmail.com>

I thought it might be a floating issue but didn't see the connection.
Thanks everyone.

On Tue, Oct 9, 2018, 2:00 PM Benoit Vaillant <benoit.vaillant at no-log.org>
wrote:

> Hello,
>
> On Tue, Oct 09, 2018 at 01:14:54PM -0400, Ryan Derickson wrote:
> > Apologies if this is a simple misunderstanding.
>
> See for example:
>
> https://cran.r-project.org/doc/FAQ/R-FAQ.html#Why-doesn_0027t-R-think-these-numbers-are-equal_003f
>
> > round((.575*100),0) gives 57
> > round(57.5,0) gives 58
> >
> > Why?
>
> Not R related at all.
>
> $ python
> Python 2.7.13 (default, Sep 26 2018, 18:42:22)
> [GCC 6.3.0 20170516] on linux2
> Type "help", "copyright", "credits" or "license" for more information.
> >>> round((.575*100),0)
> 57.0
> >>> round(57.5,0)
> 58.0
>
> Same "issue". :)
>
> You'll need to dig into how numbers are floating numbers are
> represented in a finite set.
>
> Cheers,
>
> --
> Beno?t Vaillant
>

	[[alternative HTML version deleted]]


From @bfriedm@n @ending from ur@inu@@edu  Tue Oct  9 20:00:12 2018
From: @bfriedm@n @ending from ur@inu@@edu (Friedman, Abigail)
Date: Tue, 9 Oct 2018 18:00:12 +0000
Subject: [R] Creating a data frame
Message-ID: <BN6PR22MB03402442F1CB307485018D7EC8E70@BN6PR22MB0340.namprd22.prod.outlook.com>

I keep getting error messages when running my data frame code and I cannot figure out what I am doing wrong.


	[[alternative HTML version deleted]]


From ruipb@rr@d@@ @ending from @@po@pt  Tue Oct  9 21:54:11 2018
From: ruipb@rr@d@@ @ending from @@po@pt (Rui Barradas)
Date: Tue, 9 Oct 2018 20:54:11 +0100
Subject: [R] Creating a data frame
In-Reply-To: <BN6PR22MB03402442F1CB307485018D7EC8E70@BN6PR22MB0340.namprd22.prod.outlook.com>
References: <BN6PR22MB03402442F1CB307485018D7EC8E70@BN6PR22MB0340.namprd22.prod.outlook.com>
Message-ID: <cb6fcf0b-f01b-2165-4cea-24cdb21e4267@sapo.pt>

Hello,

Well, you must post the said code (and data), how can we help you 
without seeing it?

In order to post data, post the output of dput(df) in your mail. Or, if 
it is too big with the output of dput(head(df, 20)). (df is the name of 
your dataset.)

Also, don't post in html, please, see the note at the bottom of this and 
all R-help e-mails.

Rui Barradas

?s 19:00 de 09/10/2018, Friedman, Abigail escreveu:
> I keep getting error messages when running my data frame code and I cannot figure out what I am doing wrong.
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From n@th@n@f@p@r@on@ @ending from gm@il@com  Tue Oct  9 21:46:03 2018
From: n@th@n@f@p@r@on@ @ending from gm@il@com (Nathan Parsons)
Date: Tue, 9 Oct 2018 12:46:03 -0700
Subject: [R] Creating a data frame
In-Reply-To: <BN6PR22MB03402442F1CB307485018D7EC8E70@BN6PR22MB0340.namprd22.prod.outlook.com>
References: <BN6PR22MB03402442F1CB307485018D7EC8E70@BN6PR22MB0340.namprd22.prod.outlook.com>
Message-ID: <8f8d9852-bcde-44d6-8bfa-b330ba02adc5@Spark>

Please post both the code you are using and the error, Abigail.

Nate
On Oct 9, 2018, 11:59 AM -0700, Friedman, Abigail <abfriedman at ursinus.edu>, wrote:
> I keep getting error messages when running my data frame code and I cannot figure out what I am doing wrong.
>
>
> [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From e@@wiek @ending from gm@il@com  Tue Oct  9 22:38:42 2018
From: e@@wiek @ending from gm@il@com (Ek Esawi)
Date: Tue, 9 Oct 2018 16:38:42 -0400
Subject: [R] Reorder file names read by list.files function
In-Reply-To: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
References: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
Message-ID: <CA+ZkTxuHUZGfpq=FioOo6bZGE=MGOCHxex0Y1ssWjhAsrT2kXw@mail.gmail.com>

Hi again,

I worked with RUi's idea of using the match function with month.name.
I got numerical values for months then i sorted and pasted the PDF
file extension. It gave me the file order i wanted, but now statements
8,9,&10 don't work and i kept getting an error which is listed below.
The dilemma is if i add full.names=TRUE in statement 6 then statements
9 and 10 don't produce what they did earlier. If i put
full.names=FALSE, then i am back to square 1.
Any idea is greatly appreciated.:

The code

1. nstall.packages("tabulizer")
2. installed.packages("stringr")
3. library(stringr)
4. library(tabulizer)
5. path = "C:/Users/namei/Documents/TextMining/S2017"
6. file.names <- dir(path, pattern =".PDF",full.names = TRUE)
7. file.names <- str_remove(file.names,"\\s[0-9][0-9]")
8. FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
9. FNs1 <- paste0(month.name[FNs],".","PDF")
10 A <- lapply(FNs1, function(i) extract_tables(i))

Output and the error message.

path = "C:/Users/eesawi/Documents/TextMining/S2017"
> file.names <- dir(path, pattern =".PDF",full.names = TRUE)
> file.names <- str_remove(file.names,"\\s[0-9][0-9]")
> FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
> FNs1 <- paste0(month.name[FNs],".","PDF")
> A <- lapply(FNs1, function(i) extract_tables(i))
 Show Traceback

 Error in normalizePath(path.expand(path), winslash, mustWork) :
  path[1]=".PDF": The system cannot find the file specified
On Tue, Oct 9, 2018 at 9:44 AM Ek Esawi <esawiek at gmail.com> wrote:
>
> Hi All--
>
> I used base R list.file function to read files from a directory. The
> file names are months (April, August, etc). That's the system reads
> them in alphabetical order., but i want to reordered them in calendar
> order (January, February, ...December).. I thought i might be able to
> do it via RegEx or possibly gtools package, I am wondering if there is
> an easier way.
>
> Thanks--EK
>
> Example
> path = "C:/Users/name/Downloads/MyFiles"
> file.names <- dir(path, pattern =".PDF")
>
> Example output
> Output:
> "February.PDF"  "January.PDF" "March.PDF"
> Desired output
> "January.PDF"  "February.PDF" "March.PDF"


From ruipb@rr@d@@ @ending from @@po@pt  Tue Oct  9 22:44:39 2018
From: ruipb@rr@d@@ @ending from @@po@pt (Rui Barradas)
Date: Tue, 9 Oct 2018 21:44:39 +0100
Subject: [R] Reorder file names read by list.files function
In-Reply-To: <CA+ZkTxuHUZGfpq=FioOo6bZGE=MGOCHxex0Y1ssWjhAsrT2kXw@mail.gmail.com>
References: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
 <CA+ZkTxuHUZGfpq=FioOo6bZGE=MGOCHxex0Y1ssWjhAsrT2kXw@mail.gmail.com>
Message-ID: <8c9034c0-5d40-3d6d-bd7d-97da8acab5ed@sapo.pt>

Hello,

I would do something along the lines of

# work in the directory where the files are located
old_dir <- setwd(path)
file.names <- list.files(pattern = "\\.PDF")

[...]

# When you are done reset your wd
setwd(old_dir)


Hope this helps,

Rui Barradas

?s 21:38 de 09/10/2018, Ek Esawi escreveu:
> Hi again,
> 
> I worked with RUi's idea of using the match function with month.name.
> I got numerical values for months then i sorted and pasted the PDF
> file extension. It gave me the file order i wanted, but now statements
> 8,9,&10 don't work and i kept getting an error which is listed below.
> The dilemma is if i add full.names=TRUE in statement 6 then statements
> 9 and 10 don't produce what they did earlier. If i put
> full.names=FALSE, then i am back to square 1.
> Any idea is greatly appreciated.:
> 
> The code
> 
> 1. nstall.packages("tabulizer")
> 2. installed.packages("stringr")
> 3. library(stringr)
> 4. library(tabulizer)
> 5. path = "C:/Users/namei/Documents/TextMining/S2017"
> 6. file.names <- dir(path, pattern =".PDF",full.names = TRUE)
> 7. file.names <- str_remove(file.names,"\\s[0-9][0-9]")
> 8. FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
> 9. FNs1 <- paste0(month.name[FNs],".","PDF")
> 10 A <- lapply(FNs1, function(i) extract_tables(i))
> 
> Output and the error message.
> 
> path = "C:/Users/eesawi/Documents/TextMining/S2017"
>> file.names <- dir(path, pattern =".PDF",full.names = TRUE)
>> file.names <- str_remove(file.names,"\\s[0-9][0-9]")
>> FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
>> FNs1 <- paste0(month.name[FNs],".","PDF")
>> A <- lapply(FNs1, function(i) extract_tables(i))
>   Show Traceback
> 
>   Error in normalizePath(path.expand(path), winslash, mustWork) :
>    path[1]=".PDF": The system cannot find the file specified
> On Tue, Oct 9, 2018 at 9:44 AM Ek Esawi <esawiek at gmail.com> wrote:
>>
>> Hi All--
>>
>> I used base R list.file function to read files from a directory. The
>> file names are months (April, August, etc). That's the system reads
>> them in alphabetical order., but i want to reordered them in calendar
>> order (January, February, ...December).. I thought i might be able to
>> do it via RegEx or possibly gtools package, I am wondering if there is
>> an easier way.
>>
>> Thanks--EK
>>
>> Example
>> path = "C:/Users/name/Downloads/MyFiles"
>> file.names <- dir(path, pattern =".PDF")
>>
>> Example output
>> Output:
>> "February.PDF"  "January.PDF" "March.PDF"
>> Desired output
>> "January.PDF"  "February.PDF" "March.PDF"
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From wdunl@p @ending from tibco@com  Tue Oct  9 22:47:31 2018
From: wdunl@p @ending from tibco@com (William Dunlap)
Date: Tue, 9 Oct 2018 13:47:31 -0700
Subject: [R] Reorder file names read by list.files function
In-Reply-To: <CA+ZkTxuHUZGfpq=FioOo6bZGE=MGOCHxex0Y1ssWjhAsrT2kXw@mail.gmail.com>
References: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
 <CA+ZkTxuHUZGfpq=FioOo6bZGE=MGOCHxex0Y1ssWjhAsrT2kXw@mail.gmail.com>
Message-ID: <CAF8bMcZEx5=NCSj9_t6ztYaXW3ywUAFuja8d6aqid3A8aeojJg@mail.gmail.com>

Use basename(filename) to remove the lead parts of the full path to the
file.  E.g., replace
   FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
with (the untested)
    FNs <- sort(match(sub("\\.PDF", "", basename(file.names)), month.name))

Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Tue, Oct 9, 2018 at 1:38 PM, Ek Esawi <esawiek at gmail.com> wrote:

> Hi again,
>
> I worked with RUi's idea of using the match function with month.name.
> I got numerical values for months then i sorted and pasted the PDF
> file extension. It gave me the file order i wanted, but now statements
> 8,9,&10 don't work and i kept getting an error which is listed below.
> The dilemma is if i add full.names=TRUE in statement 6 then statements
> 9 and 10 don't produce what they did earlier. If i put
> full.names=FALSE, then i am back to square 1.
> Any idea is greatly appreciated.:
>
> The code
>
> 1. nstall.packages("tabulizer")
> 2. installed.packages("stringr")
> 3. library(stringr)
> 4. library(tabulizer)
> 5. path = "C:/Users/namei/Documents/TextMining/S2017"
> 6. file.names <- dir(path, pattern =".PDF",full.names = TRUE)
> 7. file.names <- str_remove(file.names,"\\s[0-9][0-9]")
> 8. FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
> 9. FNs1 <- paste0(month.name[FNs],".","PDF")
> 10 A <- lapply(FNs1, function(i) extract_tables(i))
>
> Output and the error message.
>
> path = "C:/Users/eesawi/Documents/TextMining/S2017"
> > file.names <- dir(path, pattern =".PDF",full.names = TRUE)
> > file.names <- str_remove(file.names,"\\s[0-9][0-9]")
> > FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
> > FNs1 <- paste0(month.name[FNs],".","PDF")
> > A <- lapply(FNs1, function(i) extract_tables(i))
>  Show Traceback
>
>  Error in normalizePath(path.expand(path), winslash, mustWork) :
>   path[1]=".PDF": The system cannot find the file specified
> On Tue, Oct 9, 2018 at 9:44 AM Ek Esawi <esawiek at gmail.com> wrote:
> >
> > Hi All--
> >
> > I used base R list.file function to read files from a directory. The
> > file names are months (April, August, etc). That's the system reads
> > them in alphabetical order., but i want to reordered them in calendar
> > order (January, February, ...December).. I thought i might be able to
> > do it via RegEx or possibly gtools package, I am wondering if there is
> > an easier way.
> >
> > Thanks--EK
> >
> > Example
> > path = "C:/Users/name/Downloads/MyFiles"
> > file.names <- dir(path, pattern =".PDF")
> >
> > Example output
> > Output:
> > "February.PDF"  "January.PDF" "March.PDF"
> > Desired output
> > "January.PDF"  "February.PDF" "March.PDF"
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From e@@wiek @ending from gm@il@com  Tue Oct  9 22:50:18 2018
From: e@@wiek @ending from gm@il@com (Ek Esawi)
Date: Tue, 9 Oct 2018 16:50:18 -0400
Subject: [R] Reorder file names read by list.files function
In-Reply-To: <221314A3-19DD-41D2-9802-8BA9C031DE6A@dcn.davis.ca.us>
References: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
 <221314A3-19DD-41D2-9802-8BA9C031DE6A@dcn.davis.ca.us>
Message-ID: <CA+ZkTxvNmsEM+5U5ZqyRdBY4usNSD6CwpC7QUVErvV_1-b-uZA@mail.gmail.com>

Thank you Jeff. It is an excellent idea and i might try it out if
nothing works out. And i  don't have 12 files on each sub directory;

EK
On Tue, Oct 9, 2018 at 11:30 AM Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>
> Instead of changing the order in which you read the files, perhaps your analysis will work if you sort the data after you read it in. This may require that you add the month names as a column in the data frames, or you may already have dates in the data that you could sort by.
>
> One idea:
>
> fnames <- paste0( month.name, ".PDF" )
> resultdf <- do.call( rbind, lapply(fnames, function(fn) { read.csv( file.path( "datadir", fn ), as.is=TRUE ) } )
>
> but that only works if there are exactly 12 files. If there could be fewer, perhaps:
>
> fnames <- list.files( "datadir" )
> sfnames <- fnames[ match( sub("\\.PDF", "", fnames ), month.name ) ]
>
>
> On October 9, 2018 6:44:21 AM PDT, Ek Esawi <esawiek at gmail.com> wrote:
> >Hi All--
> >
> >I used base R list.file function to read files from a directory. The
> >file names are months (April, August, etc). That's the system reads
> >them in alphabetical order., but i want to reordered them in calendar
> >order (January, February, ...December).. I thought i might be able to
> >do it via RegEx or possibly gtools package, I am wondering if there is
> >an easier way.
> >
> >Thanks--EK
> >
> >Example
> >path = "C:/Users/name/Downloads/MyFiles"
> >file.names <- dir(path, pattern =".PDF")
> >
> >Example output
> >Output:
> >"February.PDF"  "January.PDF" "March.PDF"
> >Desired output
> >"January.PDF"  "February.PDF" "March.PDF"
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my phone. Please excuse my brevity.


From drjimlemon @ending from gm@il@com  Tue Oct  9 23:13:40 2018
From: drjimlemon @ending from gm@il@com (Jim Lemon)
Date: Wed, 10 Oct 2018 08:13:40 +1100
Subject: [R] 
 Can I safely use an installed R folder in a portable manner?
In-Reply-To: <CANccLkyi1W7iMnyur60v0s85CL3EwgdLhJNNFpASRVgWxaRigQ@mail.gmail.com>
References: <CANccLkyi1W7iMnyur60v0s85CL3EwgdLhJNNFpASRVgWxaRigQ@mail.gmail.com>
Message-ID: <CA+8X3fX+HtM7_rfnffypyyY8t8eHRySeDg_u92tvTAjB=bONSw@mail.gmail.com>

Hi Marc,
I do this quite often with Tcl-Tk. All you have to do is make sure
that the PATH contains the correct location for the R executable if
you don't specify it within your program.

Jim
On Wed, Oct 10, 2018 at 1:58 AM Marc Capavanni via R-help
<r-help at r-project.org> wrote:
>
> Hi there,
>
> I'm currently using R on Windows as part of a piece of software and when
> I'm providing it to users I have an application that runs the R
> installation file with an INF file containing the following settings as to
> not disrupt existing installs of R on their system.
>
> [Setup]
> Lang=en
> Dir=.\R_Install\
> Group=R
> NoIcons=1
> SetupType=user32
> Components=main,i386
> Tasks=
> [R]
> MDISDI=MDI
> HelpStyle=HTML
>
> The aim using this INF file is that the install should not touch the
> registry, or add any icons/shortcuts anywhere.
>
> This R install does not need to do much aside from provide the R
> executables (particularly rscript.exe) for use, so I don't need it to be on
> the PATH, for it to handle R files being double clicked by the user, etc.
>
> However, I've recently found that taking the installed R folder and using
> it on another PC without running the installer *seems* to work just fine
> (at least for my use case of simply accessible the executables). This would
> make "installing"/"uninstalling" easier as it would simply be a case of
> copying the folder, and later on deleting it.
>
> I was wondering if there is anything I'm missing here that would make this
> not feasible.
>
> Can I safely use an installed R folder, as a base for copying it to other
> PCs in a portable manner?
>
> Thanks,
> Marc
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jdnewmil @ending from dcn@d@vi@@c@@u@  Tue Oct  9 23:35:00 2018
From: jdnewmil @ending from dcn@d@vi@@c@@u@ (Jeff Newmiller)
Date: Tue, 09 Oct 2018 14:35:00 -0700
Subject: [R] 
 Can I safely use an installed R folder in a portable manner?
In-Reply-To: <CA+8X3fX+HtM7_rfnffypyyY8t8eHRySeDg_u92tvTAjB=bONSw@mail.gmail.com>
References: <CANccLkyi1W7iMnyur60v0s85CL3EwgdLhJNNFpASRVgWxaRigQ@mail.gmail.com>
 <CA+8X3fX+HtM7_rfnffypyyY8t8eHRySeDg_u92tvTAjB=bONSw@mail.gmail.com>
Message-ID: <F7B83799-D6E6-4D36-B0B3-39A6D2412B8E@dcn.davis.ca.us>

If you don't want to disturb the existing install of R then you might want to take some effort to bring your library with you and avoid letting your copy of R mess with the default user library. Packrat may help with this?

On October 9, 2018 2:13:40 PM PDT, Jim Lemon <drjimlemon at gmail.com> wrote:
>Hi Marc,
>I do this quite often with Tcl-Tk. All you have to do is make sure
>that the PATH contains the correct location for the R executable if
>you don't specify it within your program.
>
>Jim
>On Wed, Oct 10, 2018 at 1:58 AM Marc Capavanni via R-help
><r-help at r-project.org> wrote:
>>
>> Hi there,
>>
>> I'm currently using R on Windows as part of a piece of software and
>when
>> I'm providing it to users I have an application that runs the R
>> installation file with an INF file containing the following settings
>as to
>> not disrupt existing installs of R on their system.
>>
>> [Setup]
>> Lang=en
>> Dir=.\R_Install\
>> Group=R
>> NoIcons=1
>> SetupType=user32
>> Components=main,i386
>> Tasks=
>> [R]
>> MDISDI=MDI
>> HelpStyle=HTML
>>
>> The aim using this INF file is that the install should not touch the
>> registry, or add any icons/shortcuts anywhere.
>>
>> This R install does not need to do much aside from provide the R
>> executables (particularly rscript.exe) for use, so I don't need it to
>be on
>> the PATH, for it to handle R files being double clicked by the user,
>etc.
>>
>> However, I've recently found that taking the installed R folder and
>using
>> it on another PC without running the installer *seems* to work just
>fine
>> (at least for my use case of simply accessible the executables). This
>would
>> make "installing"/"uninstalling" easier as it would simply be a case
>of
>> copying the folder, and later on deleting it.
>>
>> I was wondering if there is anything I'm missing here that would make
>this
>> not feasible.
>>
>> Can I safely use an installed R folder, as a base for copying it to
>other
>> PCs in a portable manner?
>>
>> Thanks,
>> Marc
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From mcc3qb @ending from virgini@@edu  Wed Oct 10 00:04:22 2018
From: mcc3qb @ending from virgini@@edu (matthew campbell)
Date: Tue, 9 Oct 2018 18:04:22 -0400
Subject: [R] Defining Variables from a Matrix for 10-Fold Cross Validation
Message-ID: <CAGKPD0EP9=sLtdB5VF9iF5UyPFzRwwkdq4HSVS+aUFBfD=ymLQ@mail.gmail.com>

Good afternoon,

I am trying to run a 10-fold CV, using a matrix as my data set.
Essentially, I want "y" to be the first column of the matrix, and my "x" to
be all remaining columns (2-257). I've posted some of the code I used
below, and the data set (called "zip.train") is in the "ElemStatLearn"
package. The error message is highlighted in red, and the corresponding
section of code is bolded. (I am not concerned with the warning message,
just the error message).

The issue I am experiencing is the error message below the code: I haven't
come across that specific message before, and am not exactly sure how to
interpret its meaning. What exactly is this error message trying to tell
me?  Any suggestions or insights are appreciated!

Thank you all,

Matthew Campbell


> library (ElemStatLearn)
> library(kknn)
> data(zip.train)
> train=zip.train[which(zip.train[,1] %in% c(2,3)),]
> test=zip.test[which(zip.test[,1] %in% c(2,3)),]
> nfold = 10
> infold = sample(rep(1:10, length.out = (x)))
Warning message:
In rep(1:10, length.out = (x)) :
  first element used of 'length.out' argument
>
*> mydata = data.frame(x = train[ , c(2,257)] , y = train[ , 1])*
>
> K = 20
> errorMatrix = matrix(NA, K, 10)
>
> for (l in nfold)
+ {
+   for (k in 1:20)
+   {
+     knn.fit = kknn(y ~ x, train = mydata[infold != l, ], test =
mydata[infold == l, ], k = k)
+     errorMatrix[k, l] = mean((knn.fit$fitted.values - mydata$y[infold ==
l])^2)
+   }
+ }
Error in model.frame.default(formula, data = train) :
  variable lengths differ (found for 'x')

	[[alternative HTML version deleted]]


From dwin@emiu@ @ending from comc@@t@net  Wed Oct 10 00:34:15 2018
From: dwin@emiu@ @ending from comc@@t@net (David Winsemius)
Date: Tue, 9 Oct 2018 15:34:15 -0700
Subject: [R] 
 Defining Variables from a Matrix for 10-Fold Cross Validation
In-Reply-To: <CAGKPD0EP9=sLtdB5VF9iF5UyPFzRwwkdq4HSVS+aUFBfD=ymLQ@mail.gmail.com>
References: <CAGKPD0EP9=sLtdB5VF9iF5UyPFzRwwkdq4HSVS+aUFBfD=ymLQ@mail.gmail.com>
Message-ID: <85DC895F-BEA2-4E47-ACC1-49A5C350B2D8@comcast.net>


> On Oct 9, 2018, at 3:04 PM, matthew campbell <mcc3qb at virginia.edu> wrote:
> 
> Good afternoon,
> 
> I am trying to run a 10-fold CV, using a matrix as my data set.
> Essentially, I want "y" to be the first column of the matrix, and my "x" to
> be all remaining columns (2-257). I've posted some of the code I used
> below, and the data set (called "zip.train") is in the "ElemStatLearn"
> package. The error message is highlighted in red, and the corresponding
> section of code is bolded. (I am not concerned with the warning message,
> just the error message).
> 
> The issue I am experiencing is the error message below the code: I haven't
> come across that specific message before, and am not exactly sure how to
> interpret its meaning. What exactly is this error message trying to tell
> me?  Any suggestions or insights are appreciated!
> 
> Thank you all,
> 
> Matthew Campbell
> 
> 
>> library (ElemStatLearn)
>> library(kknn)
>> data(zip.train)
>> train=zip.train[which(zip.train[,1] %in% c(2,3)),]
>> test=zip.test[which(zip.test[,1] %in% c(2,3)),]
>> nfold = 10
>> infold = sample(rep(1:10, length.out = (x)))

I don't see a definition for x.

> Warning message:
> In rep(1:10, length.out = (x)) :
>  first element used of 'length.out' argument

But apparently it las a length greater than 1 and your are getting a sample whose length is specified by the first element of x.


>> 
> *> mydata = data.frame(x = train[ , c(2,257)] , y = train[ , 1])*
>> 
>> K = 20
>> errorMatrix = matrix(NA, K, 10)
>> 
>> for (l in nfold)
> + {
> +   for (k in 1:20)
> +   {
> +     knn.fit = kknn(y ~ x, train = mydata[infold != l, ], test =
> mydata[infold == l, ], k = k)
> +     errorMatrix[k, l] = mean((knn.fit$fitted.values - mydata$y[infold ==
> l])^2)
> +   }
> + }
> Error in model.frame.default(formula, data = train) :
>  variable lengths differ (found for 'x')

So the warning above is probably a great clue to the source of this error.

Morale of the tale: Always read the warnings, even if your code proceeds.

> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

David Winsemius
Alameda, CA, USA

"The whole problem with the world is that fools and fanatics are always so certain of themselves, and wiser people so full of doubts." - Bertrand Russell


From j@zh@o @ending from ye@h@net  Wed Oct 10 02:40:16 2018
From: j@zh@o @ending from ye@h@net (Jinsong Zhao)
Date: Wed, 10 Oct 2018 08:40:16 +0800
Subject: [R] how to pass arguments to panel.cor in pairs()
In-Reply-To: <cd53a455-141e-7555-d171-2db91cdd78dd@gmail.com>
References: <612e821a.3104.1665951614f.Coremail.jszhao@yeah.net>
 <cd53a455-141e-7555-d171-2db91cdd78dd@gmail.com>
Message-ID: <fd159d42-d99d-2513-38eb-a94b88d74b43@yeah.net>

On 2018/10/9 23:22, Duncan Murdoch wrote:
> On 09/10/2018 10:53 AM, Jinsong Zhao wrote:
>> Hi there,
>>
>> Here is the panel.cor function from ?pairs:
>>
>> ????? panel.cor <- function(x, y, digits = 2, prefix = "", cex.cor, ...)
>> ????? {
>> ????????? usr <- par("usr"); on.exit(par(usr))
>> ????????? par(usr = c(0, 1, 0, 1))
>> ????????? r <- abs(cor(x, y))
>> ????????? txt <- format(c(r, 0.123456789), digits = digits)[1]
>> ????????? txt <- paste0(prefix, txt)
>> ????????? if(missing(cex.cor)) cex.cor <- 0.8/strwidth(txt)
>> ????????? text(0.5, 0.5, txt, cex = cex.cor * r)
>> ????? }
>>
>> in the following code, pairs use the panel.cor defined above:
>>
>> ????? pairs(USJudgeRatings, lower.panel = panel.smooth, upper.panel = 
>> panel.cor,
>> ??????????? gap=0, row1attop=FALSE)
>>
>> I try to change prefix = "" to prefix = "r = ", something like:
>>
>> ????? pairs(USJudgeRatings, lower.panel = panel.smooth, upper.panel = 
>> panel.cor, prefix = "r = ",
>> ??????????? gap=0, row1attop=FALSE)
>>
>> I got lots of warnings.
>>
>> How to change prefix to something else, but not change the defined 
>> panel.cor? Thanks!
> 
> Since panel.cor is not a base function, just a function defined in the 
> example, you could just modify it.
> 
> If you want the regular one sometimes and a custom one other times,
> you could make your own panel function:
> 
>  ? panel.cor2 <- function(...) panel.cor(..., prefix = "r = ")
> 
> Then use
> 
> 
>  ? pairs(USJudgeRatings, lower.panel = panel.smooth, upper.panel = 
> panel.cor2, gap=0, row1attop=FALSE)
> 

That is what I want to know. Thanks a lot.

Best,
Jinsong


From m@@ternh@ttt @ending from gm@il@com  Wed Oct 10 01:47:06 2018
From: m@@ternh@ttt @ending from gm@il@com (Thanh Tran)
Date: Wed, 10 Oct 2018 08:47:06 +0900
Subject: [R] ANOVA in R
Message-ID: <CAHjanSAzyPQ8ANKLEUxzSpy0iESD+eikSFgsOo6oU+ytV8-5mg@mail.gmail.com>

Hi eveyone,
I'm studying about variance (ANOVA) in R and have some questions to share.
I read an article investigating the effect of factors (temperature, Asphalt
content, Air voids, and sample thickness) on the hardness of asphalt
concrete in the tensile test (abbreviated as Kic). Each condition was
repeated four times (4 samples). In the paper, the authors used MINITAB to
analyze Anova. The authors use "adjusted sums of squares" calculate the
p-value I try to use ANOVA in R to analyze this data and get the result as
shown in Figure 4. The results are different from the results in the
article. Some papers say that in R, the default for ANOVA analysis is to
use "sequential sums of squares" to calculate the p-value.
So please help the following two questions: 1 / Introduction to code in R
for anova analysis uses "adjusted sums of squares". The main part of the
command in R / myself is as follows: > Tem = as.factor (temperature) > Ac =
as.factor (AC) > Av = as.factor (AV) > Thick = as.factor (Thickness) >
Twoway = lm (KIC ~ Tem + Ac + Av + Thick + Stamp + Ac + Stamp + Av + Stamp
+ Thick + Ac * Av + Ac * Thick + Av * Thick) > anova (twoway) 2/ When to
use "sequential sums of squares" and when to use "adjusted sums of
squares". Some papers recommend using the "oa.design
<https://www.youtube.com/redirect?q=http%3A%2F%2Foa.design%2F&redir_token=AaSAPDY-5UAsoHxN6BdwfyIJ7R98MTUzOTIxNDg2OUAxNTM5MTI4NDY5&event=comments>"
function in R to check for "orthogonal" designs. If not, use "adjusted sums
of squares". I am still vague about this command, so look forward to
everyone's suggestion. If you could answer all two of my questions, I would
be most grateful. Ps: I have added a CSV file and the paper for practicing
R. http://www.mediafire.com/file/e5oe54p2c2wd4bc/Saha+research.csv
http://www.mediafire.com/file/39jlf9h539y9mdz/Homothetic+behaviour+investigation+on+fracture+toughness+of+asphalt+mixtures+using+semicircular+bending+test.pdf

	[[alternative HTML version deleted]]


From em@il2mrn@ @ending from gm@il@com  Wed Oct 10 02:41:14 2018
From: em@il2mrn@ @ending from gm@il@com (A DNA RNA)
Date: Tue, 9 Oct 2018 20:41:14 -0400
Subject: [R] cluster samples using self organizing map in R
Message-ID: <CAOQGvC6abdJ=vcT0iW+ngHiPdYmWET4GCn389YnVQMnjODvr=g@mail.gmail.com>

Dear All,

Who can I use Self Organizing Map (SOM) results to cluster samples? I have
tried following but this gives me only the clustering of grids, while I
want to cluster (150) samples:

library(kohonen)
iris.sc <- scale(iris[, 1:4])
iris.som <- som(iris.sc, grid=somgrid(xdim = 3, ydim=3, topo="hexagonal"),
               rlen=100, alpha=c(0.05,0.01))
##hierarchical clustering
groups <- 3
iris.hc <- cutree(hclust(dist(iris.som$codes[[1]])), groups)
iris.hc
#V1 V2 V3 V4 V5 V6 V7 V8 V9
#1  1  2  1  1  2  3  3  2


Can anyone help me with this please?
--
Tina

	[[alternative HTML version deleted]]


From p@uljohn32 @ending from gm@il@com  Wed Oct 10 11:37:46 2018
From: p@uljohn32 @ending from gm@il@com (Paul Johnson)
Date: Wed, 10 Oct 2018 04:37:46 -0500
Subject: [R] ANOVA in R
In-Reply-To: <CAHjanSAzyPQ8ANKLEUxzSpy0iESD+eikSFgsOo6oU+ytV8-5mg@mail.gmail.com>
References: <CAHjanSAzyPQ8ANKLEUxzSpy0iESD+eikSFgsOo6oU+ytV8-5mg@mail.gmail.com>
Message-ID: <CAErODj8u9hLpW_x1D2YZvsXDMoNJ=czX5SvBd2ZzQwfsnWT5CA@mail.gmail.com>

We cannot read your message. Should post pure text, not html. Hm, my phone
now may post html, must try to stop. Your R code not legible. It seems to
be output? Lines all run together. I tried find articles you mention, but
"not found" resulted.

You should use aov() for fitting, then get post hoc comparisons.

In car package, Anova function will help. I may teach Anova soon, we'll see
if I have better answer then.

Paul Johnson
University of Kansas

On Wed, Oct 10, 2018, 1:14 AM Thanh Tran <masternhattt at gmail.com> wrote:

> Hi eveyone,
> I'm studying about variance (ANOVA) in R and have some questions to share.
> I read an article investigating the effect of factors (temperature, Asphalt
> content, Air voids, and sample thickness) on the hardness of asphalt
> concrete in the tensile test (abbreviated as Kic). Each condition was
> repeated four times (4 samples). In the paper, the authors used MINITAB to
> analyze Anova. The authors use "adjusted sums of squares" calculate the
> p-value I try to use ANOVA in R to analyze this data and get the result as
> shown in Figure 4. The results are different from the results in the
> article. Some papers say that in R, the default for ANOVA analysis is to
> use "sequential sums of squares" to calculate the p-value.
> So please help the following two questions: 1 / Introduction to code in R
> for anova analysis uses "adjusted sums of squares". The main part of the
> command in R / myself is as follows: > Tem = as.factor (temperature) > Ac =
> as.factor (AC) > Av = as.factor (AV) > Thick = as.factor (Thickness) >
> Twoway = lm (KIC ~ Tem + Ac + Av + Thick + Stamp + Ac + Stamp + Av + Stamp
> + Thick + Ac * Av + Ac * Thick + Av * Thick) > anova (twoway) 2/ When to
> use "sequential sums of squares" and when to use "adjusted sums of
> squares". Some papers recommend using the "oa.design
> <
> https://www.youtube.com/redirect?q=http%3A%2F%2Foa.design%2F&redir_token=AaSAPDY-5UAsoHxN6BdwfyIJ7R98MTUzOTIxNDg2OUAxNTM5MTI4NDY5&event=comments
> >"
> function in R to check for "orthogonal" designs. If not, use "adjusted sums
> of squares". I am still vague about this command, so look forward to
> everyone's suggestion. If you could answer all two of my questions, I would
> be most grateful. Ps: I have added a CSV file and the paper for practicing
> R. http://www.mediafire.com/file/e5oe54p2c2wd4bc/Saha+research.csv
>
> http://www.mediafire.com/file/39jlf9h539y9mdz/Homothetic+behaviour+investigation+on+fracture+toughness+of+asphalt+mixtures+using+semicircular+bending+test.pdf
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @ubh@mitr@@p@tr@ @ending from gm@il@com  Wed Oct 10 13:07:06 2018
From: @ubh@mitr@@p@tr@ @ending from gm@il@com (Subhamitra Patra)
Date: Wed, 10 Oct 2018 16:37:06 +0530
Subject: [R] [R studio] Plotting line chart for the obtained entropy values
Message-ID: <CAOFE=kPiyQt6Gi+SMMXBFiNS2OC1j1Oqqvd2K5u4edXGpCi8bA@mail.gmail.com>

Hello friends,

I have obtained the approximate entropy values for the multiple series.
But, after that, I am unable to draw a line chart for the obtained
approximate entropy values. Please help me to draw a line chart for the
obtained entropy values. For your reference, I am writing my code here so
that it will be easier to suggest the code for the plotting of line chart.

     N<-nrow(ts)
r<-matrix(0, nrow = N, ncol = 1)
for (i in 1:N){
     r[i]<-approx_entropy(ts[,i], edim = 2, r = 0.2*sd(ts[,i]), elag = 1)
}


Hence, I need to plot the obtained entropy values that stored in r folder.

A great help will be highly appreciated.

Thanks in advance.

-- 
*Best Regards,*
*Subhamitra Patra*
*Phd. Research Scholar*
*Department of Humanities and Social Sciences*
*Indian Institute of Technology, Kharagpur*
*INDIA*

	[[alternative HTML version deleted]]


From olivier_giv@ud@n @ending from hotm@il@com  Wed Oct 10 15:53:00 2018
From: olivier_giv@ud@n @ending from hotm@il@com (Olivier GIVAUDAN)
Date: Wed, 10 Oct 2018 13:53:00 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <CAP01uR=FnwBZ=_iet5q0_tZQS4WZ0MjiiY_-kFr_KL9GFwL=ww@mail.gmail.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <CAP01uR=FnwBZ=_iet5q0_tZQS4WZ0MjiiY_-kFr_KL9GFwL=ww@mail.gmail.com>
Message-ID: <VI1PR0202MB335744BC531D2F410931FEBFF5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>

Hi Gabor,
?

  1.  By definition the relative path (I'm excluding the absolute path solution for obvious reasons) depends on the current working directory: What if my R script is not located along this current working directory? It won't work.?
  2.  What should I write as an option in this .Rprofile file? An absolute path to the project's root? Plus I don't want the users to choose their working directory: this technicality should be kept hidden from them and be automatic.?

Best regards,?
?
Olivier
________________________________
De : Gabor Grothendieck <ggrothendieck at gmail.com>
Envoy? : samedi 6 octobre 2018 23:33
? : olivier_givaudan at hotmail.com; r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

1. Assuming you are starting the script from within R, if you want to
keep all the files used by the script together with the script itself
then just source the script using the absolute or relative path to the
script using source(..., chdir = TRUE) as shown below and the script
will run in the directory containing the script. We used an absoluate
path below but a relative path will work too.  In either case the
script itself will not need to use absolute paths and it is portable
to other machines.

  source("/path/to/script.R", chdir = TRUE)

If your script is on your PATH then this would work:

  source(Sys.which("script.R"), chdir = TRUE)

2. Another approach is to define an R option, say root, using the R
options() function to define the root directory of your project.  You
can have a different R option for each project.  Place the options()
statements to set these R options for your various projects in your
.Rprofile, say, and in the script use:

    root <- getOption("root", ".")

to cause it to retrieve the value of the R option root if it is
defined and use the current directory otherwise.  Use a different name
for each project. If the user does not define the R option root it
will be up to them to change directory first.  Again there will be no
use of absolute paths in the script itself and it is portable to other
machines.

What is particularly convenient about this is that it documents where
all the projects are on the  machine right in the .Rproject file so
one always knows where they are.

On Sat, Oct 6, 2018 at 8:25 AM Olivier GIVAUDAN
<olivier_givaudan at hotmail.com> wrote:
>> Dear R users,
>
> I would like to work with genuine relative paths in R for obvious reasons: if I move all my scripts related to some project as a whole to another location of my computer or someone else's computer, if want my scripts to continue to run seamlessly.
>
> What I mean by "genuine" is that it should not be necessary to hardcode one single absolute path (making the code obviously not "portable" - to another place - anymore).
>
> For the time being, I found the following related posts, unfortunately never conclusive or even somewhat off-topic:
> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
>
> So I found 2 workarounds, more or less satisfactory:
>
>
>   1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.
>   2.  Or create an R project file with RStudio and use the package "here" to get the absolute path of the R project file and put all the R scripts related to this project in the R project directory, as often recommended.
>
> But I am really wondering why R doesn't have (please tell me if I'm wrong) this basic feature as many other languages have it (batch, shell, C, LaTeX, SAS with macro-variables, etc.)?
> Do you know whether the language will have this kind of function in a near future? What are the obstacles / what is the reasoning for not having it already?
>
> Do you know other workarounds?
>
> Best regards,
>
> Olivier
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



--
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com

	[[alternative HTML version deleted]]


From petr@pik@l @ending from prechez@@cz  Wed Oct 10 16:12:30 2018
From: petr@pik@l @ending from prechez@@cz (PIKAL Petr)
Date: Wed, 10 Oct 2018 14:12:30 +0000
Subject: [R] 
 [R studio] Plotting line chart for the obtained entropy values
In-Reply-To: <CAOFE=kPiyQt6Gi+SMMXBFiNS2OC1j1Oqqvd2K5u4edXGpCi8bA@mail.gmail.com>
References: <CAOFE=kPiyQt6Gi+SMMXBFiNS2OC1j1Oqqvd2K5u4edXGpCi8bA@mail.gmail.com>
Message-ID: <217370f8b0f949f391f0c8e8e8e2633e@SRVEXCHCM1301.precheza.cz>

Hi

see in line

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Subhamitra Patra
> Sent: Wednesday, October 10, 2018 1:07 PM
> To: r-help at r-project.org
> Subject: [R] [R studio] Plotting line chart for the obtained entropy values
>
> Hello friends,
>
> I have obtained the approximate entropy values for the multiple series.
> But, after that, I am unable to draw a line chart for the obtained
> approximate entropy values. Please help me to draw a line chart for the
> obtained entropy values. For your reference, I am writing my code here so
> that it will be easier to suggest the code for the plotting of line chart.
>
>      N<-nrow(ts)
> r<-matrix(0, nrow = N, ncol = 1)
> for (i in 1:N){
>      r[i]<-approx_entropy(ts[,i], edim = 2, r = 0.2*sd(ts[,i]), elag = 1)
> }

I may be completely wrong but does not

plot(r, type="l")

produce line graph?

Cheers
Petr

>
>
> Hence, I need to plot the obtained entropy values that stored in r folder.
>
> A great help will be highly appreciated.
>
> Thanks in advance.
>
> --
> *Best Regards,*
> *Subhamitra Patra*
> *Phd. Research Scholar*
> *Department of Humanities and Social Sciences*
> *Indian Institute of Technology, Kharagpur*
> *INDIA*
>
> [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information about processing and protection of business partner?s personal data are available on website: https://www.precheza.cz/en/personal-data-protection-principles/
D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any documents attached to it may be confidential and are subject to the legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/


From olivier_giv@ud@n @ending from hotm@il@com  Wed Oct 10 16:37:13 2018
From: olivier_giv@ud@n @ending from hotm@il@com (Olivier GIVAUDAN)
Date: Wed, 10 Oct 2018 14:37:13 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <EF096B6D-D167-402E-A1BB-9310D60E6F64@dcn.davis.ca.us>
 <VI1PR0202MB33571A964A191D165B3BF422F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <292ca297-27e3-162b-e525-fabc4bb4554c@kogentum.hu>
 <VI1PR0202MB3357E9066FF1527BAC014784F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <dbde4f15-caa6-dc62-3a10-e804cc81671a@kogentum.hu>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
Message-ID: <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>

Hi Jeff,
?
> That is, there is not always a file in a particular directory even involved in the executing code.??
?
True. I'm only asking in the case where some R code is run from an R file. This function 'MyOwnPath()' (say) should only work (i.e. return a useful result) in this case.?
?
> The R interpreter does not make assumptions about where the code it is running came from.?
?
That's precisely the reproach I have in case the code comes from a file.?
?
> You also keep referring to "this feature" being in many languages, though you seem to be mistaken about most of them...?
?
'Most of them' is largely exaggerated (plus I corrected myself): I only mixed between the 'cd' variable / command in Windows and Linux shells (you would certainly agree it's a bit vicious).?
?
> $PWD is the same as getwd()?
?
Wrong. As I already said, if I create an R script located somewhere on my computer with the only line 'getwd()' and run this script, I won't get the directory of this R script, contrary to a shell file with the only line '$PWD'.?
?
> __FILE__ in C relates to the source code directory that is usually not where the executable is ?located and may not even exist on the computer it is running on?
?
Yes, and? What is the issue here? So '__FILE__' does the job. Invoking '__FILE__' in a .C file (I never said in its related executable) will return the absolute path of this C source file.?
'__DIR__' in PHP also does the job. No to forget the good old VBA (Excel in this case) 'ActiveWorkbook.Path'.?

Thank you for the 2 references you provided.
However it seems that some manual settings are still required to be able to use Rscript.
But I like the solution of the .RData file: I simply created an empty .RData file at the root of my project and by double-clicking on this file (as you said), the R GUI opens and 'getwd()' returns the path of this .RData file. It seems to be a good alternative to .Rproj file to be opened with RStudio.
?
> However, by far the best approach is to teach your users to fish... if you give them an RStudio project directory they can double-click on the .Rproj ?file to set the current directory and enter the world of R.??
?
Yes, using an .Rproj file to be opened with RStudio also seems to me to be a reasonable solution (the one I chose until now), although it is still a workaround and requires RStudio.?
Actually in this case, the package 'here'? I previously mentioned is useless to get the current working directory of the project as 'When a project is opened within RStudio the following actions are taken: [...] The current working directory is set to the project directory.', as stated on this page: https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects.
So 'getwd()' returns exactly the same as 'here()' does.

Best regards,?
?
Olivier

________________________________
De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
Envoy? : dimanche 7 octobre 2018 20:48
? : Olivier GIVAUDAN
Cc : D?nes T?th; r-help at r-project.org
Objet : RE: [R] Genuine relative paths with R

On Sun, 7 Oct 2018, Olivier GIVAUDAN wrote:

> Hello Denes,
>
> > Yes, the path to the "root" folder of your project. You seem to have a
> really esoteric context if you want to run an R script without knowing
> its path in the file system.
>
> I don't have any esoteric context: I'm just looking for the most generic, automatic and reproducible solution.
> Of course you always know where an R script is located, nevertheless it doesn't imply you want to manually write its path in this
> R script. The issue is to have to hardcode an absolute path: I don't want that.
>
> > Because it is extremely rare that someone - who uses R for what it is
> worth and in a manner how R is supposed to be used - actually needs such
> a function.
>

> First, the fact that it is rare doesn't mean this need is not legitimate
> and relevant: it is needed to make R projects fully movable (i.e.
> wherever you want). Second why a vast majority of languages does have
> this feature and not R? Why is it useful in these languages and not in
> R?

The R interpreter does not make assumptions about where the code it is
running came from. You might be running it by using the source() function,
or by using the Rscript program, or by R CMD BATCH, or using eval() on
code you pasted together in an R function, or as byte-compiled code loaded
from an RData file. That is, there is not always a file in a particular
directory even involved in the executing code.

You also keep referring to "this feature" being in many languages, though
you seem to be mistaken about most of them... in fact, they, too, know NOT
where the script is but where the current directory is ($PWD is the same
as getwd()) or where the compilation occurred (__FILE__ in C relates to
the source code directory that is usually not where the executable is
located and may not even exist on the computer it is running on).

I have already pointed out that the solution is to let the OS set the
current directory. If you want the user to have access to R independent of
your code, the easiest way to leave them in Rgui after your code is done
is to use save.image() to create a "myApp.RData" file which can be
double-clicked [1]. The double-clicking action by default (as defined by
the installation of R) causes the operating system to set the current
directory to the one containing the file you double-clicked on and then
executes the Rgui program.

If you don't want the user to interact with your session, you can use the
Rscript executable (also mentioned briefly at the bottom of [1]). In both
cases, the user has (unknowingly) set the current directory before running
your code, and there is no need to encode where the script is or was
inside the script.

You can also create a windows shortcut to invoke Rscript yourself by
bootstrapping the RData file and invoking the
R.utils::createWindowsShortcut() [2] function.

However, by far the best approach is to teach your users to fish... if you
give them an RStudio project directory they can double-click on the .Rproj
file to set the current directory and enter the world of R.

[1] https://www.r-bloggers.com/look-ma-no-typing-autorunning-code-on-r-startup/
[2] https://cran.r-project.org/web/packages/R.utils/R.utils.pdf

End comment.

> Best regards,
>
> Olivier
>
> _________________________________________________________________________________________________________________________________
> De : D?nes T?th <toth.denes at kogentum.hu>
> Envoy? : samedi 6 octobre 2018 23:36
> ? : Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
> Objet : Re: [R] Genuine relative paths with R
> Hi Olivier,
>
>
> On 10/07/2018 01:13 AM, Olivier GIVAUDAN wrote:
> > Hi Denes,
> >
> > Thank you for the possibility you shared: unfortunately it still uses
> > one hardcoded absolute path which I want to avoid.
>
> Yes, the path to the "root" folder of your project. You seem to have a
> really esoteric context if you want to run an R script without knowing
> its path in the file system.
>
> >
> > I just think that the solutions suggested are too complicated for my
> > simple need.
> >
> > The root cause being that R doesn't seem to have the Windows batch
> > equivalent of cd, or bash equivalent of $PWD, or PHP equivalent of __DIR__.
> > Hence the workarounds we are discussing.
> >
> > And finally we go back to my initial question: if such a function
> > doesn't exist in R, what are the reasons?
>
> Because it is extremely rare that someone - who uses R for what it is
> worth and in a manner how R is supposed to be used - actually needs such
> a function.
>
> Best,
> Denes
>
>
>
> >
> > Best regards,
> >
> > Olivier
> > ------------------------------------------------------------------------
> > *De :* D?nes T?th <toth.denes at kogentum.hu>
> > *Envoy? :* samedi 6 octobre 2018 23:05
> > *?:* Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
> > *Objet :* Re: [R] Genuine relative paths with R
> > Hi Olivier,
> >
> > I really think that Ista and Jeff gave you plenty of useful options how
> > you can avoid using absolute paths.
> >
> > One more possibility: you can use `source()` with the chdir = TRUE
> > argument (see ?source). If you have a master script which sources other
> > files which are located in a fixed hierarchy relative to the location of
> > the master script, the only time when you have to use an absolute path
> > is when you source your master script, e.g.:
> > source("/my/path/to/master.R", chdir = TRUE)
> >
> > Inside the master script, you can then source the other scripts by
> > relative paths, define your 'data' folders relative to the master script
> > and let the other scripts use those data paths, etc.
> >
> > Best,
> > Denes
> >
> >
> > On 10/06/2018 11:36 PM, Olivier GIVAUDAN wrote:
> >> Hi Jeff,
> >>
> >> Thanks for sharing your workaround.
> >>
> >> I guess my last answer to Ista answers your question as well.
> >>
> >> To me this function (an equivalent of 'cd', say) should be platform-independent.
> >>
> >> Best regards,
> >>
> >> Olivier
> >>
> >> ________________________________
> >> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> >> Envoy??? : samedi 6 octobre 2018 19:31
> >> ??? : r-help at r-project.org; Olivier GIVAUDAN; r-help at r-project.org
> >> Objet : Re: [R] Genuine relative paths with R
> >>
> >> I stopped using hardcoded absolute paths inside R scripts years ago, and I suspect that is fairly common practice. That is, I
> almost never enter a path starting with "/" or "c:/" in an R script.
> >>
> >> The key concession you have to make is to start your R session in your working directory using OS-specific mechanisms, and
> then reference your code and data relative to that directory. RStudio project files offer one mechanism for doing this; using CD
> from  the OS command line is another, and using the file-browser
> > double-click mechanism on .RData files is another (though I prefer to
> > avoid that these days due to potential global environment contamination).
> >>
> >> Perhaps you can be more specific about what facilities you are expecting to find. You should also mention what OS you
> typically use and how you normally start R.
> >>
> >> On October 6, 2018 4:48:44 AM PDT, Olivier GIVAUDAN <olivier_givaudan at hotmail.com> wrote:
> >>> Dear R users,
> >>>
> >>> I would like to work with genuine relative paths in R for obvious
> >>> reasons: if I move all my scripts related to some project as a whole to
> >>> another location of my computer or someone else's computer, if want my
> >>> scripts to continue to run seamlessly.
> >>>
> >>> What I mean by "genuine" is that it should not be necessary to hardcode
> >>> one single absolute path (making the code obviously not "portable" - to
> >>> another place - anymore).
> >>>
> >>> For the time being, I found the following related posts, unfortunately
> >>> never conclusive or even somewhat off-topic:
> >>> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
> >>> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
> >>> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
> >>>
> >>> So I found 2 workarounds, more or less satisfactory:
> >>>
> >>>
> >>> 1.  Either create a variable "ScriptPath" in the first lines of each of
> >>> my R scripts and run a batch (or shell, etc.) to replace every single
> >>> occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R
> >>> script]" in all the R scripts located in the folder (and possibly
> >>> subfolders) of the batch file.
> >>> 2.  Or create an R project file with RStudio and use the package "here"
> >>> to get the absolute path of the R project file and put all the R
> >>> scripts related to this project in the R project directory, as often
> >>> recommended.
> >>>
> >>> But I am really wondering why R doesn't have (please tell me if I'm
> >>> wrong) this basic feature as many other languages have it (batch,
> >>> shell, C, LaTeX, SAS with macro-variables, etc.)?
> >>> Do you know whether the language will have this kind of function in a
> >>> near future? What are the obstacles / what is the reasoning for not
> >>> having it already?
> >>>
> >>> Do you know other workarounds?
> >>>
> >>> Best regards,
> >>>
> >>> Olivier
> >>>
> >>>        [[alternative HTML version deleted]]
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide
> >>> http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >>
> >> --
> >> Sent from my phone. Please excuse my brevity.
> >>
> >>        [[alternative HTML version deleted]]
> >>
> >>
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >>
>
>

---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                       Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
---------------------------------------------------------------------------

	[[alternative HTML version deleted]]


From bgunter@4567 @ending from gm@il@com  Wed Oct 10 16:43:37 2018
From: bgunter@4567 @ending from gm@il@com (Bert Gunter)
Date: Wed, 10 Oct 2018 07:43:37 -0700
Subject: [R] cluster samples using self organizing map in R
In-Reply-To: <CAOQGvC6abdJ=vcT0iW+ngHiPdYmWET4GCn389YnVQMnjODvr=g@mail.gmail.com>
References: <CAOQGvC6abdJ=vcT0iW+ngHiPdYmWET4GCn389YnVQMnjODvr=g@mail.gmail.com>
Message-ID: <CAGxFJbQk5tVauVY+yA=ig_fObfcyzGRt8zDtt+_Ecd3XBPbB2Q@mail.gmail.com>

Search!

the rseek.org site gives many hits for "self organizing maps", including
the som package among others.

-- Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Oct 9, 2018 at 11:14 PM A DNA RNA <email2mrna at gmail.com> wrote:

> Dear All,
>
> Who can I use Self Organizing Map (SOM) results to cluster samples? I have
> tried following but this gives me only the clustering of grids, while I
> want to cluster (150) samples:
>
> library(kohonen)
> iris.sc <- scale(iris[, 1:4])
> iris.som <- som(iris.sc, grid=somgrid(xdim = 3, ydim=3, topo="hexagonal"),
>                rlen=100, alpha=c(0.05,0.01))
> ##hierarchical clustering
> groups <- 3
> iris.hc <- cutree(hclust(dist(iris.som$codes[[1]])), groups)
> iris.hc
> #V1 V2 V3 V4 V5 V6 V7 V8 V9
> #1  1  2  1  1  2  3  3  2
>
>
> Can anyone help me with this please?
> --
> Tina
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @ending from gm@il@com  Wed Oct 10 16:51:32 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Wed, 10 Oct 2018 10:51:32 -0400
Subject: [R] Genuine relative paths with R
In-Reply-To: <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <EF096B6D-D167-402E-A1BB-9310D60E6F64@dcn.davis.ca.us>
 <VI1PR0202MB33571A964A191D165B3BF422F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <292ca297-27e3-162b-e525-fabc4bb4554c@kogentum.hu>
 <VI1PR0202MB3357E9066FF1527BAC014784F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <dbde4f15-caa6-dc62-3a10-e804cc81671a@kogentum.hu>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
Message-ID: <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>

On 10/10/2018 10:37 AM, Olivier GIVAUDAN wrote:
> Hi Jeff,
> ?
>> That is, there is not always a file in a particular directory even involved in the executing code.??
> ?
> True. I'm only asking in the case where some R code is run from an R file. This function 'MyOwnPath()' (say) should only work (i.e. return a useful result) in this case.?
> ?
>> The R interpreter does not make assumptions about where the code it is running came from.?
> ?
> That's precisely the reproach I have in case the code comes from a file.?
> ?
>> You also keep referring to "this feature" being in many languages, though you seem to be mistaken about most of them...?
> ?
> 'Most of them' is largely exaggerated (plus I corrected myself): I only mixed between the 'cd' variable / command in Windows and Linux shells (you would certainly agree it's a bit vicious).?
> ?
>> $PWD is the same as getwd()?
> ?
> Wrong. As I already said, if I create an R script located somewhere on my computer with the only line 'getwd()' and run this script, I won't get the directory of this R script, contrary to a shell file with the only line '$PWD'.?

What system are you talking about?  On Unix-alikes, you'd need an "echo" 
ahead of that, and it would print the user's working directory, not the 
working directory of the script.

Duncan Murdoch

> ?
>> __FILE__ in C relates to the source code directory that is usually not where the executable is ?located and may not even exist on the computer it is running on?
> ?
> Yes, and? What is the issue here? So '__FILE__' does the job. Invoking '__FILE__' in a .C file (I never said in its related executable) will return the absolute path of this C source file.?
> '__DIR__' in PHP also does the job. No to forget the good old VBA (Excel in this case) 'ActiveWorkbook.Path'.?
> 
> Thank you for the 2 references you provided.
> However it seems that some manual settings are still required to be able to use Rscript.
> But I like the solution of the .RData file: I simply created an empty .RData file at the root of my project and by double-clicking on this file (as you said), the R GUI opens and 'getwd()' returns the path of this .RData file. It seems to be a good alternative to .Rproj file to be opened with RStudio.
> ?
>> However, by far the best approach is to teach your users to fish... if you give them an RStudio project directory they can double-click on the .Rproj ?file to set the current directory and enter the world of R.??
> ?
> Yes, using an .Rproj file to be opened with RStudio also seems to me to be a reasonable solution (the one I chose until now), although it is still a workaround and requires RStudio.?
> Actually in this case, the package 'here'? I previously mentioned is useless to get the current working directory of the project as 'When a project is opened within RStudio the following actions are taken: [...] The current working directory is set to the project directory.', as stated on this page: https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects.
> So 'getwd()' returns exactly the same as 'here()' does.
> 
> Best regards,?
> ?
> Olivier
> 
> ________________________________
> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> Envoy? : dimanche 7 octobre 2018 20:48
> ? : Olivier GIVAUDAN
> Cc : D?nes T?th; r-help at r-project.org
> Objet : RE: [R] Genuine relative paths with R
> 
> On Sun, 7 Oct 2018, Olivier GIVAUDAN wrote:
> 
>> Hello Denes,
>>
>>> Yes, the path to the "root" folder of your project. You seem to have a
>> really esoteric context if you want to run an R script without knowing
>> its path in the file system.
>>
>> I don't have any esoteric context: I'm just looking for the most generic, automatic and reproducible solution.
>> Of course you always know where an R script is located, nevertheless it doesn't imply you want to manually write its path in this
>> R script. The issue is to have to hardcode an absolute path: I don't want that.
>>
>>> Because it is extremely rare that someone - who uses R for what it is
>> worth and in a manner how R is supposed to be used - actually needs such
>> a function.
>>
> 
>> First, the fact that it is rare doesn't mean this need is not legitimate
>> and relevant: it is needed to make R projects fully movable (i.e.
>> wherever you want). Second why a vast majority of languages does have
>> this feature and not R? Why is it useful in these languages and not in
>> R?
> 
> The R interpreter does not make assumptions about where the code it is
> running came from. You might be running it by using the source() function,
> or by using the Rscript program, or by R CMD BATCH, or using eval() on
> code you pasted together in an R function, or as byte-compiled code loaded
> from an RData file. That is, there is not always a file in a particular
> directory even involved in the executing code.
> 
> You also keep referring to "this feature" being in many languages, though
> you seem to be mistaken about most of them... in fact, they, too, know NOT
> where the script is but where the current directory is ($PWD is the same
> as getwd()) or where the compilation occurred (__FILE__ in C relates to
> the source code directory that is usually not where the executable is
> located and may not even exist on the computer it is running on).
> 
> I have already pointed out that the solution is to let the OS set the
> current directory. If you want the user to have access to R independent of
> your code, the easiest way to leave them in Rgui after your code is done
> is to use save.image() to create a "myApp.RData" file which can be
> double-clicked [1]. The double-clicking action by default (as defined by
> the installation of R) causes the operating system to set the current
> directory to the one containing the file you double-clicked on and then
> executes the Rgui program.
> 
> If you don't want the user to interact with your session, you can use the
> Rscript executable (also mentioned briefly at the bottom of [1]). In both
> cases, the user has (unknowingly) set the current directory before running
> your code, and there is no need to encode where the script is or was
> inside the script.
> 
> You can also create a windows shortcut to invoke Rscript yourself by
> bootstrapping the RData file and invoking the
> R.utils::createWindowsShortcut() [2] function.
> 
> However, by far the best approach is to teach your users to fish... if you
> give them an RStudio project directory they can double-click on the .Rproj
> file to set the current directory and enter the world of R.
> 
> [1] https://www.r-bloggers.com/look-ma-no-typing-autorunning-code-on-r-startup/
> [2] https://cran.r-project.org/web/packages/R.utils/R.utils.pdf
> 
> End comment.
> 
>> Best regards,
>>
>> Olivier
>>
>> _________________________________________________________________________________________________________________________________
>> De : D?nes T?th <toth.denes at kogentum.hu>
>> Envoy? : samedi 6 octobre 2018 23:36
>> ? : Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
>> Objet : Re: [R] Genuine relative paths with R
>> Hi Olivier,
>>
>>
>> On 10/07/2018 01:13 AM, Olivier GIVAUDAN wrote:
>>> Hi Denes,
>>>
>>> Thank you for the possibility you shared: unfortunately it still uses
>>> one hardcoded absolute path which I want to avoid.
>>
>> Yes, the path to the "root" folder of your project. You seem to have a
>> really esoteric context if you want to run an R script without knowing
>> its path in the file system.
>>
>>>
>>> I just think that the solutions suggested are too complicated for my
>>> simple need.
>>>
>>> The root cause being that R doesn't seem to have the Windows batch
>>> equivalent of cd, or bash equivalent of $PWD, or PHP equivalent of __DIR__.
>>> Hence the workarounds we are discussing.
>>>
>>> And finally we go back to my initial question: if such a function
>>> doesn't exist in R, what are the reasons?
>>
>> Because it is extremely rare that someone - who uses R for what it is
>> worth and in a manner how R is supposed to be used - actually needs such
>> a function.
>>
>> Best,
>> Denes
>>
>>
>>
>>>
>>> Best regards,
>>>
>>> Olivier
>>> ------------------------------------------------------------------------
>>> *De :* D?nes T?th <toth.denes at kogentum.hu>
>>> *Envoy? :* samedi 6 octobre 2018 23:05
>>> *?:* Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
>>> *Objet :* Re: [R] Genuine relative paths with R
>>> Hi Olivier,
>>>
>>> I really think that Ista and Jeff gave you plenty of useful options how
>>> you can avoid using absolute paths.
>>>
>>> One more possibility: you can use `source()` with the chdir = TRUE
>>> argument (see ?source). If you have a master script which sources other
>>> files which are located in a fixed hierarchy relative to the location of
>>> the master script, the only time when you have to use an absolute path
>>> is when you source your master script, e.g.:
>>> source("/my/path/to/master.R", chdir = TRUE)
>>>
>>> Inside the master script, you can then source the other scripts by
>>> relative paths, define your 'data' folders relative to the master script
>>> and let the other scripts use those data paths, etc.
>>>
>>> Best,
>>> Denes
>>>
>>>
>>> On 10/06/2018 11:36 PM, Olivier GIVAUDAN wrote:
>>>> Hi Jeff,
>>>>
>>>> Thanks for sharing your workaround.
>>>>
>>>> I guess my last answer to Ista answers your question as well.
>>>>
>>>> To me this function (an equivalent of 'cd', say) should be platform-independent.
>>>>
>>>> Best regards,
>>>>
>>>> Olivier
>>>>
>>>> ________________________________
>>>> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>>>> Envoy??? : samedi 6 octobre 2018 19:31
>>>> ??? : r-help at r-project.org; Olivier GIVAUDAN; r-help at r-project.org
>>>> Objet : Re: [R] Genuine relative paths with R
>>>>
>>>> I stopped using hardcoded absolute paths inside R scripts years ago, and I suspect that is fairly common practice. That is, I
>> almost never enter a path starting with "/" or "c:/" in an R script.
>>>>
>>>> The key concession you have to make is to start your R session in your working directory using OS-specific mechanisms, and
>> then reference your code and data relative to that directory. RStudio project files offer one mechanism for doing this; using CD
>> from  the OS command line is another, and using the file-browser
>>> double-click mechanism on .RData files is another (though I prefer to
>>> avoid that these days due to potential global environment contamination).
>>>>
>>>> Perhaps you can be more specific about what facilities you are expecting to find. You should also mention what OS you
>> typically use and how you normally start R.
>>>>
>>>> On October 6, 2018 4:48:44 AM PDT, Olivier GIVAUDAN <olivier_givaudan at hotmail.com> wrote:
>>>>> Dear R users,
>>>>>
>>>>> I would like to work with genuine relative paths in R for obvious
>>>>> reasons: if I move all my scripts related to some project as a whole to
>>>>> another location of my computer or someone else's computer, if want my
>>>>> scripts to continue to run seamlessly.
>>>>>
>>>>> What I mean by "genuine" is that it should not be necessary to hardcode
>>>>> one single absolute path (making the code obviously not "portable" - to
>>>>> another place - anymore).
>>>>>
>>>>> For the time being, I found the following related posts, unfortunately
>>>>> never conclusive or even somewhat off-topic:
>>>>> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
>>>>> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
>>>>> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
>>>>>
>>>>> So I found 2 workarounds, more or less satisfactory:
>>>>>
>>>>>
>>>>> 1.  Either create a variable "ScriptPath" in the first lines of each of
>>>>> my R scripts and run a batch (or shell, etc.) to replace every single
>>>>> occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R
>>>>> script]" in all the R scripts located in the folder (and possibly
>>>>> subfolders) of the batch file.
>>>>> 2.  Or create an R project file with RStudio and use the package "here"
>>>>> to get the absolute path of the R project file and put all the R
>>>>> scripts related to this project in the R project directory, as often
>>>>> recommended.
>>>>>
>>>>> But I am really wondering why R doesn't have (please tell me if I'm
>>>>> wrong) this basic feature as many other languages have it (batch,
>>>>> shell, C, LaTeX, SAS with macro-variables, etc.)?
>>>>> Do you know whether the language will have this kind of function in a
>>>>> near future? What are the obstacles / what is the reasoning for not
>>>>> having it already?
>>>>>
>>>>> Do you know other workarounds?
>>>>>
>>>>> Best regards,
>>>>>
>>>>> Olivier
>>>>>
>>>>>         [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide
>>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>> --
>>>> Sent from my phone. Please excuse my brevity.
>>>>
>>>>         [[alternative HTML version deleted]]
>>>>
>>>>
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>
>>
> 
> ---------------------------------------------------------------------------
> Jeff Newmiller                        The     .....       .....  Go Live...
> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
>                                         Live:   OO#.. Dead: OO#..  Playing
> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
> /Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
> ---------------------------------------------------------------------------
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From olivier_giv@ud@n @ending from hotm@il@com  Wed Oct 10 16:57:25 2018
From: olivier_giv@ud@n @ending from hotm@il@com (Olivier GIVAUDAN)
Date: Wed, 10 Oct 2018 14:57:25 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <60714a3e-2ef5-5563-7dcc-eb4965f966d4@uke.de>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <60714a3e-2ef5-5563-7dcc-eb4965f966d4@uke.de>
Message-ID: <VI1PR0202MB3357ECAFF18BC7D7DD83E11FF5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>

Dear Eik,

Thank you for your message.

Yes, I already got to know this package and this discussion (while I found the 'here' package). But thanks.

Best regards,

Olivier
________________________________
De : Eik Vettorazzi <E.Vettorazzi at uke.de>
Envoy? : lundi 8 octobre 2018 11:30
? : Olivier GIVAUDAN; r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

Dear Olivier,
you may find the rprojroot package useful, see
https://github.com/r-lib/rprojroot

and a discussion

https://gist.github.com/jennybc/362f52446fe1ebc4c49f#file-2014-10-12_stop-working-directory-insanity-md

Cheers

Am 06.10.2018 um 13:48 schrieb Olivier GIVAUDAN:
> Dear R users,
>
> I would like to work with genuine relative paths in R for obvious reasons: if I move all my scripts related to some project as a whole to another location of my computer or someone else's computer, if want my scripts to continue to run seamlessly.
>
> What I mean by "genuine" is that it should not be necessary to hardcode one single absolute path (making the code obviously not "portable" - to another place - anymore).
>
> For the time being, I found the following related posts, unfortunately never conclusive or even somewhat off-topic:
> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
>
> So I found 2 workarounds, more or less satisfactory:
>
>
>    1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.
>    2.  Or create an R project file with RStudio and use the package "here" to get the absolute path of the R project file and put all the R scripts related to this project in the R project directory, as often recommended.
>
> But I am really wondering why R doesn't have (please tell me if I'm wrong) this basic feature as many other languages have it (batch, shell, C, LaTeX, SAS with macro-variables, etc.)?
> Do you know whether the language will have this kind of function in a near future? What are the obstacles / what is the reasoning for not having it already?
>
> Do you know other workarounds?
>
> Best regards,
>
> Olivier
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

--
Eik Vettorazzi

Department of Medical Biometry and Epidemiology
University Medical Center Hamburg-Eppendorf

Martinistrasse 52
building W 34
20246 Hamburg

Phone: +49 (0) 40 7410 - 58243
Fax:   +49 (0) 40 7410 - 57790
Web: www.uke.de/imbe<http://www.uke.de/imbe>
--

_____________________________________________________________________

Universit?tsklinikum Hamburg-Eppendorf; K?rperschaft des ?ffentlichen Rechts; Gerichtsstand: Hamburg | www.uke.de
Vorstandsmitglieder: Prof. Dr. Burkhard G?ke (Vorsitzender), Prof. Dr. Dr. Uwe Koch-Gromus, Joachim Pr?l?, Martina Saurin (komm.)
_____________________________________________________________________

SAVE PAPER - THINK BEFORE PRINTING

	[[alternative HTML version deleted]]


From olivier_giv@ud@n @ending from hotm@il@com  Wed Oct 10 17:12:49 2018
From: olivier_giv@ud@n @ending from hotm@il@com (Olivier GIVAUDAN)
Date: Wed, 10 Oct 2018 15:12:49 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <7976D00C-2713-4B28-AD19-6788184DCF16@llnl.gov>
References: <7976D00C-2713-4B28-AD19-6788184DCF16@llnl.gov>
Message-ID: <VI1PR0202MB3357092207090935EA1E5EB0F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>

Hi Don,

Thanks for your message.

> First fact:
?
>  R understands relative paths (as do the other languages you mentioned) (you have misunderstood R if you think it doesn't)?

I never said R doesn't understand relative paths (which software doesn't...). I simply said it is not straightforward to use relative paths in R as the function 'MyOwnPath()' returning the path of the R file where this function is written and run doesn't exist; therefore workarounds more or less "clean" are necessary. Precisely changing (automatically, not manually of course) the current working directory to the location where a given R file (.R) is located is not straightforward.

> Second fact:?
?
> R interprets relative paths as being relative to its current working directory

Yep.

> Third fact:
?
> To find out R's current working directory type:   getwd() at the R prompt

Yep.

> The easiest way to set the working directory, in my opinion, is by starting R from a linux or Mac command shell (bash, tcsh, etc) environment. You start R by typing "R" at the shell prompt and R's working directory is inherited from the current working directory of the shell.

Yes, I found a similar but more user-friendly (in my opinion) way via .Rproj (with RStudio) and .RData (with R GUI).

> No additional packages are necessary in order to manage R's working directory simply and effectively.

Exactly!

Best regards,

Olivier
________________________________
De : MacQueen, Don <macqueen1 at llnl.gov>
Envoy? : lundi 8 octobre 2018 16:04
? : Olivier GIVAUDAN; r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

A few facts (and some opinions):


First fact:

  R understands relative paths (as do the other languages you mentioned) (you have misunderstood R if you think it doesn't)

Second fact:

  R interprets relative paths as being relative to its current working directory

Third fact:

  To find out R's current working directory type:   getwd() at the R prompt

Fourth fact:

   There are various ways to set R's working directory, depending on how you are running R. Once R is running, you can if necessary use setwd() at the R prompt, and this is platform-independent (but it should rarely be necessary).



The easiest way to set the working directory, in my opinion, is by starting R from a linux or Mac command shell (bash, tcsh, etc) environment. You start R by typing "R" at the shell prompt and R's working directory is inherited from the current working directory of the shell.

If you are using a GUI (i.e., you started R by double-clicking on some icon), look for menu commands to set the working directory. Check the documentation for the GUI to find out other ways to set the working directory for that GUI.

No additional packages are necessary in order to manage R's working directory simply and effectively.

Yes, you can move all the scripts related to some project as a whole to some other location and have them run seamlessly using relative paths. Hopefully it is clear by now that all that is needed is to set R's working directory to the project's main directory.

-Don

--
Don MacQueen
Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062
Lab cell 925-724-7509



?On 10/6/18, 4:48 AM, "R-help on behalf of Olivier GIVAUDAN" <r-help-bounces at r-project.org on behalf of olivier_givaudan at hotmail.com> wrote:

    Dear R users,

    I would like to work with genuine relative paths in R for obvious reasons: if I move all my scripts related to some project as a whole to another location of my computer or someone else's computer, if want my scripts to continue to run seamlessly.

    What I mean by "genuine" is that it should not be necessary to hardcode one single absolute path (making the code obviously not "portable" - to another place - anymore).

    For the time being, I found the following related posts, unfortunately never conclusive or even somewhat off-topic:
    https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
    https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
    http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html

    So I found 2 workarounds, more or less satisfactory:


      1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.
      2.  Or create an R project file with RStudio and use the package "here" to get the absolute path of the R project file and put all the R scripts related to this project in the R project directory, as often recommended.

    But I am really wondering why R doesn't have (please tell me if I'm wrong) this basic feature as many other languages have it (batch, shell, C, LaTeX, SAS with macro-variables, etc.)?
    Do you know whether the language will have this kind of function in a near future? What are the obstacles / what is the reasoning for not having it already?

    Do you know other workarounds?

    Best regards,

    Olivier

         [[alternative HTML version deleted]]

    ______________________________________________
    R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    https://stat.ethz.ch/mailman/listinfo/r-help
    PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    and provide commented, minimal, self-contained, reproducible code.



	[[alternative HTML version deleted]]


From olivier_giv@ud@n @ending from hotm@il@com  Wed Oct 10 17:18:07 2018
From: olivier_giv@ud@n @ending from hotm@il@com (Olivier GIVAUDAN)
Date: Wed, 10 Oct 2018 15:18:07 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <EF096B6D-D167-402E-A1BB-9310D60E6F64@dcn.davis.ca.us>
 <VI1PR0202MB33571A964A191D165B3BF422F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <292ca297-27e3-162b-e525-fabc4bb4554c@kogentum.hu>
 <VI1PR0202MB3357E9066FF1527BAC014784F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <dbde4f15-caa6-dc62-3a10-e804cc81671a@kogentum.hu>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
Message-ID: <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>

Hi Duncan,

Yes, if you need to display the content of $PWD you obviously need to type 'echo' before this variable.

It prints the user's working directory if run from a terminal but if run from a bash file it prints the working directory of the script.
At least for me (I am running on the last version of Ubuntu)...

Best regards,

Olivier
________________________________
De : Duncan Murdoch <murdoch.duncan at gmail.com>
Envoy? : mercredi 10 octobre 2018 14:51
? : Olivier GIVAUDAN; Jeff Newmiller
Cc : r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

On 10/10/2018 10:37 AM, Olivier GIVAUDAN wrote:
> Hi Jeff,
> ?
>> That is, there is not always a file in a particular directory even involved in the executing code.??
> ?
> True. I'm only asking in the case where some R code is run from an R file. This function 'MyOwnPath()' (say) should only work (i.e. return a useful result) in this case.?
> ?
>> The R interpreter does not make assumptions about where the code it is running came from.?
> ?
> That's precisely the reproach I have in case the code comes from a file.?
> ?
>> You also keep referring to "this feature" being in many languages, though you seem to be mistaken about most of them...?
> ?
> 'Most of them' is largely exaggerated (plus I corrected myself): I only mixed between the 'cd' variable / command in Windows and Linux shells (you would certainly agree it's a bit vicious).?
> ?
>> $PWD is the same as getwd()?
> ?
> Wrong. As I already said, if I create an R script located somewhere on my computer with the only line 'getwd()' and run this script, I won't get the directory of this R script, contrary to a shell file with the only line '$PWD'.?

What system are you talking about?  On Unix-alikes, you'd need an "echo"
ahead of that, and it would print the user's working directory, not the
working directory of the script.

Duncan Murdoch

> ?
>> __FILE__ in C relates to the source code directory that is usually not where the executable is ?located and may not even exist on the computer it is running on?
> ?
> Yes, and? What is the issue here? So '__FILE__' does the job. Invoking '__FILE__' in a .C file (I never said in its related executable) will return the absolute path of this C source file.?
> '__DIR__' in PHP also does the job. No to forget the good old VBA (Excel in this case) 'ActiveWorkbook.Path'.?
>
> Thank you for the 2 references you provided.
> However it seems that some manual settings are still required to be able to use Rscript.
> But I like the solution of the .RData file: I simply created an empty .RData file at the root of my project and by double-clicking on this file (as you said), the R GUI opens and 'getwd()' returns the path of this .RData file. It seems to be a good alternative to .Rproj file to be opened with RStudio.
> ?
>> However, by far the best approach is to teach your users to fish... if you give them an RStudio project directory they can double-click on the .Rproj ?file to set the current directory and enter the world of R.??
> ?
> Yes, using an .Rproj file to be opened with RStudio also seems to me to be a reasonable solution (the one I chose until now), although it is still a workaround and requires RStudio.?
> Actually in this case, the package 'here'? I previously mentioned is useless to get the current working directory of the project as 'When a project is opened within RStudio the following actions are taken: [...] The current working directory is set to the project directory.', as stated on this page: https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects.
> So 'getwd()' returns exactly the same as 'here()' does.
>
> Best regards,?
> ?
> Olivier
>
> ________________________________
> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> Envoy? : dimanche 7 octobre 2018 20:48
> ? : Olivier GIVAUDAN
> Cc : D?nes T?th; r-help at r-project.org
> Objet : RE: [R] Genuine relative paths with R
>
> On Sun, 7 Oct 2018, Olivier GIVAUDAN wrote:
>
>> Hello Denes,
>>
>>> Yes, the path to the "root" folder of your project. You seem to have a
>> really esoteric context if you want to run an R script without knowing
>> its path in the file system.
>>
>> I don't have any esoteric context: I'm just looking for the most generic, automatic and reproducible solution.
>> Of course you always know where an R script is located, nevertheless it doesn't imply you want to manually write its path in this
>> R script. The issue is to have to hardcode an absolute path: I don't want that.
>>
>>> Because it is extremely rare that someone - who uses R for what it is
>> worth and in a manner how R is supposed to be used - actually needs such
>> a function.
>>
>
>> First, the fact that it is rare doesn't mean this need is not legitimate
>> and relevant: it is needed to make R projects fully movable (i.e.
>> wherever you want). Second why a vast majority of languages does have
>> this feature and not R? Why is it useful in these languages and not in
>> R?
>
> The R interpreter does not make assumptions about where the code it is
> running came from. You might be running it by using the source() function,
> or by using the Rscript program, or by R CMD BATCH, or using eval() on
> code you pasted together in an R function, or as byte-compiled code loaded
> from an RData file. That is, there is not always a file in a particular
> directory even involved in the executing code.
>
> You also keep referring to "this feature" being in many languages, though
> you seem to be mistaken about most of them... in fact, they, too, know NOT
> where the script is but where the current directory is ($PWD is the same
> as getwd()) or where the compilation occurred (__FILE__ in C relates to
> the source code directory that is usually not where the executable is
> located and may not even exist on the computer it is running on).
>
> I have already pointed out that the solution is to let the OS set the
> current directory. If you want the user to have access to R independent of
> your code, the easiest way to leave them in Rgui after your code is done
> is to use save.image() to create a "myApp.RData" file which can be
> double-clicked [1]. The double-clicking action by default (as defined by
> the installation of R) causes the operating system to set the current
> directory to the one containing the file you double-clicked on and then
> executes the Rgui program.
>
> If you don't want the user to interact with your session, you can use the
> Rscript executable (also mentioned briefly at the bottom of [1]). In both
> cases, the user has (unknowingly) set the current directory before running
> your code, and there is no need to encode where the script is or was
> inside the script.
>
> You can also create a windows shortcut to invoke Rscript yourself by
> bootstrapping the RData file and invoking the
> R.utils::createWindowsShortcut() [2] function.
>
> However, by far the best approach is to teach your users to fish... if you
> give them an RStudio project directory they can double-click on the .Rproj
> file to set the current directory and enter the world of R.
>
> [1] https://www.r-bloggers.com/look-ma-no-typing-autorunning-code-on-r-startup/
> [2] https://cran.r-project.org/web/packages/R.utils/R.utils.pdf
>
> End comment.
>
>> Best regards,
>>
>> Olivier
>>
>> _________________________________________________________________________________________________________________________________
>> De : D?nes T?th <toth.denes at kogentum.hu>
>> Envoy? : samedi 6 octobre 2018 23:36
>> ? : Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
>> Objet : Re: [R] Genuine relative paths with R
>> Hi Olivier,
>>
>>
>> On 10/07/2018 01:13 AM, Olivier GIVAUDAN wrote:
>>> Hi Denes,
>>>
>>> Thank you for the possibility you shared: unfortunately it still uses
>>> one hardcoded absolute path which I want to avoid.
>>
>> Yes, the path to the "root" folder of your project. You seem to have a
>> really esoteric context if you want to run an R script without knowing
>> its path in the file system.
>>
>>>
>>> I just think that the solutions suggested are too complicated for my
>>> simple need.
>>>
>>> The root cause being that R doesn't seem to have the Windows batch
>>> equivalent of cd, or bash equivalent of $PWD, or PHP equivalent of __DIR__.
>>> Hence the workarounds we are discussing.
>>>
>>> And finally we go back to my initial question: if such a function
>>> doesn't exist in R, what are the reasons?
>>
>> Because it is extremely rare that someone - who uses R for what it is
>> worth and in a manner how R is supposed to be used - actually needs such
>> a function.
>>
>> Best,
>> Denes
>>
>>
>>
>>>
>>> Best regards,
>>>
>>> Olivier
>>> ------------------------------------------------------------------------
>>> *De :* D?nes T?th <toth.denes at kogentum.hu>
>>> *Envoy? :* samedi 6 octobre 2018 23:05
>>> *?:* Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
>>> *Objet :* Re: [R] Genuine relative paths with R
>>> Hi Olivier,
>>>
>>> I really think that Ista and Jeff gave you plenty of useful options how
>>> you can avoid using absolute paths.
>>>
>>> One more possibility: you can use `source()` with the chdir = TRUE
>>> argument (see ?source). If you have a master script which sources other
>>> files which are located in a fixed hierarchy relative to the location of
>>> the master script, the only time when you have to use an absolute path
>>> is when you source your master script, e.g.:
>>> source("/my/path/to/master.R", chdir = TRUE)
>>>
>>> Inside the master script, you can then source the other scripts by
>>> relative paths, define your 'data' folders relative to the master script
>>> and let the other scripts use those data paths, etc.
>>>
>>> Best,
>>> Denes
>>>
>>>
>>> On 10/06/2018 11:36 PM, Olivier GIVAUDAN wrote:
>>>> Hi Jeff,
>>>>
>>>> Thanks for sharing your workaround.
>>>>
>>>> I guess my last answer to Ista answers your question as well.
>>>>
>>>> To me this function (an equivalent of 'cd', say) should be platform-independent.
>>>>
>>>> Best regards,
>>>>
>>>> Olivier
>>>>
>>>> ________________________________
>>>> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>>>> Envoy??? : samedi 6 octobre 2018 19:31
>>>> ??? : r-help at r-project.org; Olivier GIVAUDAN; r-help at r-project.org
>>>> Objet : Re: [R] Genuine relative paths with R
>>>>
>>>> I stopped using hardcoded absolute paths inside R scripts years ago, and I suspect that is fairly common practice. That is, I
>> almost never enter a path starting with "/" or "c:/" in an R script.
>>>>
>>>> The key concession you have to make is to start your R session in your working directory using OS-specific mechanisms, and
>> then reference your code and data relative to that directory. RStudio project files offer one mechanism for doing this; using CD
>> from  the OS command line is another, and using the file-browser
>>> double-click mechanism on .RData files is another (though I prefer to
>>> avoid that these days due to potential global environment contamination).
>>>>
>>>> Perhaps you can be more specific about what facilities you are expecting to find. You should also mention what OS you
>> typically use and how you normally start R.
>>>>
>>>> On October 6, 2018 4:48:44 AM PDT, Olivier GIVAUDAN <olivier_givaudan at hotmail.com> wrote:
>>>>> Dear R users,
>>>>>
>>>>> I would like to work with genuine relative paths in R for obvious
>>>>> reasons: if I move all my scripts related to some project as a whole to
>>>>> another location of my computer or someone else's computer, if want my
>>>>> scripts to continue to run seamlessly.
>>>>>
>>>>> What I mean by "genuine" is that it should not be necessary to hardcode
>>>>> one single absolute path (making the code obviously not "portable" - to
>>>>> another place - anymore).
>>>>>
>>>>> For the time being, I found the following related posts, unfortunately
>>>>> never conclusive or even somewhat off-topic:
>>>>> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
>>>>> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
>>>>> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
>>>>>
>>>>> So I found 2 workarounds, more or less satisfactory:
>>>>>
>>>>>
>>>>> 1.  Either create a variable "ScriptPath" in the first lines of each of
>>>>> my R scripts and run a batch (or shell, etc.) to replace every single
>>>>> occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R
>>>>> script]" in all the R scripts located in the folder (and possibly
>>>>> subfolders) of the batch file.
>>>>> 2.  Or create an R project file with RStudio and use the package "here"
>>>>> to get the absolute path of the R project file and put all the R
>>>>> scripts related to this project in the R project directory, as often
>>>>> recommended.
>>>>>
>>>>> But I am really wondering why R doesn't have (please tell me if I'm
>>>>> wrong) this basic feature as many other languages have it (batch,
>>>>> shell, C, LaTeX, SAS with macro-variables, etc.)?
>>>>> Do you know whether the language will have this kind of function in a
>>>>> near future? What are the obstacles / what is the reasoning for not
>>>>> having it already?
>>>>>
>>>>> Do you know other workarounds?
>>>>>
>>>>> Best regards,
>>>>>
>>>>> Olivier
>>>>>
>>>>>         [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide
>>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>> --
>>>> Sent from my phone. Please excuse my brevity.
>>>>
>>>>         [[alternative HTML version deleted]]
>>>>
>>>>
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>
>>
>
> ---------------------------------------------------------------------------
> Jeff Newmiller                        The     .....       .....  Go Live...
> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
>                                         Live:   OO#.. Dead: OO#..  Playing
> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
> /Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
> ---------------------------------------------------------------------------
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


	[[alternative HTML version deleted]]


From murdoch@dunc@n @ending from gm@il@com  Wed Oct 10 17:20:31 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Wed, 10 Oct 2018 11:20:31 -0400
Subject: [R] Genuine relative paths with R
In-Reply-To: <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <EF096B6D-D167-402E-A1BB-9310D60E6F64@dcn.davis.ca.us>
 <VI1PR0202MB33571A964A191D165B3BF422F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <292ca297-27e3-162b-e525-fabc4bb4554c@kogentum.hu>
 <VI1PR0202MB3357E9066FF1527BAC014784F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <dbde4f15-caa6-dc62-3a10-e804cc81671a@kogentum.hu>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
Message-ID: <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>

On 10/10/2018 11:18 AM, Olivier GIVAUDAN wrote:
> Hi Duncan,
> 
> Yes, if you need to display the content of $PWD you obviously need to 
> type 'echo' before this variable.
> 
> It prints the user's working directory if run from a terminal but if run 
> from a bash file it prints the working directory of the script.
> At least for me (I am running on the last version of Ubuntu)...

Not for me.  Always prints the user's working directory.

Duncan Murdoch


> 
> Best regards,
> 
> Olivier
> ------------------------------------------------------------------------
> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Envoy? :* mercredi 10 octobre 2018 14:51
> *? :* Olivier GIVAUDAN; Jeff Newmiller
> *Cc?:* r-help at r-project.org
> *Objet :* Re: [R] Genuine relative paths with R
> On 10/10/2018 10:37 AM, Olivier GIVAUDAN wrote:
>> Hi Jeff,
>> ?
>>> That is, there is not always a file in a particular directory even involved in the executing code.??
>> ?
>> True. I'm only asking in the case where some R code is run from an R file. This function 'MyOwnPath()' (say) should only work (i.e. return a useful result) in this case.?
>> ?
>>> The R interpreter does not make assumptions about where the code it is running came from.?
>> ?
>> That's precisely the reproach I have in case the code comes from a file.?
>> ?
>>> You also keep referring to "this feature" being in many languages, though you seem to be mistaken about most of them...?
>> ?
>> 'Most of them' is largely exaggerated (plus I corrected myself): I only mixed between the 'cd' variable / command in Windows and Linux shells (you would certainly agree it's a bit vicious).?
>> ?
>>> $PWD is the same as getwd()?
>> ?
>> Wrong. As I already said, if I create an R script located somewhere on my computer with the only line 'getwd()' and run this script, I won't get the directory of this R script, contrary to a shell file with the only line '$PWD'.?
> 
> What system are you talking about?? On Unix-alikes, you'd need an "echo"
> ahead of that, and it would print the user's working directory, not the
> working directory of the script.
> 
> Duncan Murdoch
> 
>> ?
>>> __FILE__ in C relates to the source code directory that is usually not where the executable is ?located and may not even exist on the computer it is running on?
>> ?
>> Yes, and? What is the issue here? So '__FILE__' does the job. Invoking '__FILE__' in a .C file (I never said in its related executable) will return the absolute path of this C source file.?
>> '__DIR__' in PHP also does the job. No to forget the good old VBA (Excel in this case) 'ActiveWorkbook.Path'.?
>> 
>> Thank you for the 2 references you provided.
>> However it seems that some manual settings are still required to be able to use Rscript.
>> But I like the solution of the .RData file: I simply created an empty .RData file at the root of my project and by double-clicking on this file (as you said), the R GUI opens and 'getwd()' returns the path of this .RData file. It seems to be a good alternative  to .Rproj file to be opened with RStudio.
>> ?
>>> However, by far the best approach is to teach your users to fish... if you give them an RStudio project directory they can double-click on the .Rproj ?file to set the current directory and enter the world of R.??
>> ?
>> Yes, using an .Rproj file to be opened with RStudio also seems to me to be a reasonable solution (the one I chose until now), although it is still a workaround and requires RStudio.?
>> Actually in this case, the package 'here'? I previously mentioned is useless to get the current working directory of the project as 'When a project is opened within RStudio the following actions are taken: [...] The current working directory is set to the  project directory.', as stated on this page: 
> https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects.
>> So 'getwd()' returns exactly the same as 'here()' does.
>> 
>> Best regards,?
>> ?
>> Olivier
>> 
>> ________________________________
>> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>> Envoy? : dimanche 7 octobre 2018 20:48
>> ? : Olivier GIVAUDAN
>> Cc : D?nes T?th; r-help at r-project.org
>> Objet : RE: [R] Genuine relative paths with R
>> 
>> On Sun, 7 Oct 2018, Olivier GIVAUDAN wrote:
>> 
>>> Hello Denes,
>>>
>>>> Yes, the path to the "root" folder of your project. You seem to have a
>>> really esoteric context if you want to run an R script without knowing
>>> its path in the file system.
>>>
>>> I don't have any esoteric context: I'm just looking for the most generic, automatic and reproducible solution.
>>> Of course you always know where an R script is located, nevertheless it doesn't imply you want to manually write its path in this
>>> R script. The issue is to have to hardcode an absolute path: I don't want that.
>>>
>>>> Because it is extremely rare that someone - who uses R for what it is
>>> worth and in a manner how R is supposed to be used - actually needs such
>>> a function.
>>>
>> 
>>> First, the fact that it is rare doesn't mean this need is not legitimate
>>> and relevant: it is needed to make R projects fully movable (i.e.
>>> wherever you want). Second why a vast majority of languages does have
>>> this feature and not R? Why is it useful in these languages and not in
>>> R?
>> 
>> The R interpreter does not make assumptions about where the code it is
>> running came from. You might be running it by using the source() function,
>> or by using the Rscript program, or by R CMD BATCH, or using eval() on
>> code you pasted together in an R function, or as byte-compiled code loaded
>> from an RData file. That is, there is not always a file in a particular
>> directory even involved in the executing code.
>> 
>> You also keep referring to "this feature" being in many languages, though
>> you seem to be mistaken about most of them... in fact, they, too, know NOT
>> where the script is but where the current directory is ($PWD is the same
>> as getwd()) or where the compilation occurred (__FILE__ in C relates to
>> the source code directory that is usually not where the executable is
>> located and may not even exist on the computer it is running on).
>> 
>> I have already pointed out that the solution is to let the OS set the
>> current directory. If you want the user to have access to R independent of
>> your code, the easiest way to leave them in Rgui after your code is done
>> is to use save.image() to create a "myApp.RData" file which can be
>> double-clicked [1]. The double-clicking action by default (as defined by
>> the installation of R) causes the operating system to set the current
>> directory to the one containing the file you double-clicked on and then
>> executes the Rgui program.
>> 
>> If you don't want the user to interact with your session, you can use the
>> Rscript executable (also mentioned briefly at the bottom of [1]). In both
>> cases, the user has (unknowingly) set the current directory before running
>> your code, and there is no need to encode where the script is or was
>> inside the script.
>> 
>> You can also create a windows shortcut to invoke Rscript yourself by
>> bootstrapping the RData file and invoking the
>> R.utils::createWindowsShortcut() [2] function.
>> 
>> However, by far the best approach is to teach your users to fish... if you
>> give them an RStudio project directory they can double-click on the .Rproj
>> file to set the current directory and enter the world of R.
>> 
>> [1] https://www.r-bloggers.com/look-ma-no-typing-autorunning-code-on-r-startup/
>> [2] https://cran.r-project.org/web/packages/R.utils/R.utils.pdf
>> 
>> End comment.
>> 
>>> Best regards,
>>>
>>> Olivier
>>>
>>> _________________________________________________________________________________________________________________________________
>>> De : D?nes T?th <toth.denes at kogentum.hu>
>>> Envoy? : samedi 6 octobre 2018 23:36
>>> ? : Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
>>> Objet : Re: [R] Genuine relative paths with R
>>> Hi Olivier,
>>>
>>>
>>> On 10/07/2018 01:13 AM, Olivier GIVAUDAN wrote:
>>>> Hi Denes,
>>>>
>>>> Thank you for the possibility you shared: unfortunately it still uses
>>>> one hardcoded absolute path which I want to avoid.
>>>
>>> Yes, the path to the "root" folder of your project. You seem to have a
>>> really esoteric context if you want to run an R script without knowing
>>> its path in the file system.
>>>
>>>>
>>>> I just think that the solutions suggested are too complicated for my
>>>> simple need.
>>>>
>>>> The root cause being that R doesn't seem to have the Windows batch
>>>> equivalent of cd, or bash equivalent of $PWD, or PHP equivalent of __DIR__.
>>>> Hence the workarounds we are discussing.
>>>>
>>>> And finally we go back to my initial question: if such a function
>>>> doesn't exist in R, what are the reasons?
>>>
>>> Because it is extremely rare that someone - who uses R for what it is
>>> worth and in a manner how R is supposed to be used - actually needs such
>>> a function.
>>>
>>> Best,
>>> Denes
>>>
>>>
>>>
>>>>
>>>> Best regards,
>>>>
>>>> Olivier
>>>> ------------------------------------------------------------------------
>>>> *De :* D?nes T?th <toth.denes at kogentum.hu>
>>>> *Envoy? :* samedi 6 octobre 2018 23:05
>>>> *?:* Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>> Hi Olivier,
>>>>
>>>> I really think that Ista and Jeff gave you plenty of useful options how
>>>> you can avoid using absolute paths.
>>>>
>>>> One more possibility: you can use `source()` with the chdir = TRUE
>>>> argument (see ?source). If you have a master script which sources other
>>>> files which are located in a fixed hierarchy relative to the location of
>>>> the master script, the only time when you have to use an absolute path
>>>> is when you source your master script, e.g.:
>>>> source("/my/path/to/master.R", chdir = TRUE)
>>>>
>>>> Inside the master script, you can then source the other scripts by
>>>> relative paths, define your 'data' folders relative to the master script
>>>> and let the other scripts use those data paths, etc.
>>>>
>>>> Best,
>>>> Denes
>>>>
>>>>
>>>> On 10/06/2018 11:36 PM, Olivier GIVAUDAN wrote:
>>>>> Hi Jeff,
>>>>>
>>>>> Thanks for sharing your workaround.
>>>>>
>>>>> I guess my last answer to Ista answers your question as well.
>>>>>
>>>>> To me this function (an equivalent of 'cd', say) should be platform-independent.
>>>>>
>>>>> Best regards,
>>>>>
>>>>> Olivier
>>>>>
>>>>> ________________________________
>>>>> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>>>>> Envoy??? : samedi 6 octobre 2018 19:31
>>>>> ??? : r-help at r-project.org; Olivier GIVAUDAN; r-help at r-project.org
>>>>> Objet : Re: [R] Genuine relative paths with R
>>>>>
>>>>> I stopped using hardcoded absolute paths inside R scripts years ago, and I suspect that is fairly common practice. That is, I
>>> almost never enter a path starting with "/" or "c:/" in an R script.
>>>>>
>>>>> The key concession you have to make is to start your R session in your working directory using OS-specific mechanisms, and
>>> then reference your code and data relative to that directory. RStudio project files offer one mechanism for doing this; using CD
>>> from? the OS command line is another, and using the file-browser
>>>> double-click mechanism on .RData files is another (though I prefer to
>>>> avoid that these days due to potential global environment contamination).
>>>>>
>>>>> Perhaps you can be more specific about what facilities you are expecting to find. You should also mention what OS you
>>> typically use and how you normally start R.
>>>>>
>>>>> On October 6, 2018 4:48:44 AM PDT, Olivier GIVAUDAN <olivier_givaudan at hotmail.com> wrote:
>>>>>> Dear R users,
>>>>>>
>>>>>> I would like to work with genuine relative paths in R for obvious
>>>>>> reasons: if I move all my scripts related to some project as a whole to
>>>>>> another location of my computer or someone else's computer, if want my
>>>>>> scripts to continue to run seamlessly.
>>>>>>
>>>>>> What I mean by "genuine" is that it should not be necessary to hardcode
>>>>>> one single absolute path (making the code obviously not "portable" - to
>>>>>> another place - anymore).
>>>>>>
>>>>>> For the time being, I found the following related posts, unfortunately
>>>>>> never conclusive or even somewhat off-topic:
>>>>>> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
>>>>>> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
>>>>>> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
>>>>>>
>>>>>> So I found 2 workarounds, more or less satisfactory:
>>>>>>
>>>>>>
>>>>>> 1.? Either create a variable "ScriptPath" in the first lines of each of
>>>>>> my R scripts and run a batch (or shell, etc.) to replace every single
>>>>>> occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R
>>>>>> script]" in all the R scripts located in the folder (and possibly
>>>>>> subfolders) of the batch file.
>>>>>> 2.? Or create an R project file with RStudio and use the package "here"
>>>>>> to get the absolute path of the R project file and put all the R
>>>>>> scripts related to this project in the R project directory, as often
>>>>>> recommended.
>>>>>>
>>>>>> But I am really wondering why R doesn't have (please tell me if I'm
>>>>>> wrong) this basic feature as many other languages have it (batch,
>>>>>> shell, C, LaTeX, SAS with macro-variables, etc.)?
>>>>>> Do you know whether the language will have this kind of function in a
>>>>>> near future? What are the obstacles / what is the reasoning for not
>>>>>> having it already?
>>>>>>
>>>>>> Do you know other workarounds?
>>>>>>
>>>>>> Best regards,
>>>>>>
>>>>>> Olivier
>>>>>>
>>>>>>???????? [[alternative HTML version deleted]]
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>> PLEASE do read the posting guide
>>>>>> http://www.R-project.org/posting-guide.html
>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>
>>>>> --
>>>>> Sent from my phone. Please excuse my brevity.
>>>>>
>>>>>???????? [[alternative HTML version deleted]]
>>>>>
>>>>>
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>
>>>
>>>
>> 
>> ---------------------------------------------------------------------------
>> Jeff Newmiller??????????????????????? The???? .....?????? .....? Go Live...
>> DCN:<jdnewmil at dcn.davis.ca.us>??????? Basics: ##.#.?????? ##.#.? Live Go...
>>???????????????????????????????????????? Live:?? OO#.. Dead: OO#..? Playing
>> Research Engineer (Solar/Batteries??????????? O.O#.?????? #.O#.? with
>> /Software/Embedded Controllers)?????????????? .OO#.?????? .OO#.? rocks...1k
>> ---------------------------------------------------------------------------
>> 
>>??????? [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>> 
>


From murdoch@dunc@n @ending from gm@il@com  Wed Oct 10 17:21:44 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Wed, 10 Oct 2018 11:21:44 -0400
Subject: [R] Genuine relative paths with R
In-Reply-To: <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <EF096B6D-D167-402E-A1BB-9310D60E6F64@dcn.davis.ca.us>
 <VI1PR0202MB33571A964A191D165B3BF422F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <292ca297-27e3-162b-e525-fabc4bb4554c@kogentum.hu>
 <VI1PR0202MB3357E9066FF1527BAC014784F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <dbde4f15-caa6-dc62-3a10-e804cc81671a@kogentum.hu>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
Message-ID: <a14ecc19-f7ff-45a8-c931-c215111b9d29@gmail.com>

On 10/10/2018 11:20 AM, Duncan Murdoch wrote:
> On 10/10/2018 11:18 AM, Olivier GIVAUDAN wrote:
>> Hi Duncan,
>>
>> Yes, if you need to display the content of $PWD you obviously need to
>> type 'echo' before this variable.
>>
>> It prints the user's working directory if run from a terminal but if run
>> from a bash file it prints the working directory of the script.
>> At least for me (I am running on the last version of Ubuntu)...
> 
> Not for me.  Always prints the user's working directory.

... unless some earlier lines in the script changed it, of course.

Duncan Murdoch

> 
> Duncan Murdoch
> 
> 
>>
>> Best regards,
>>
>> Olivier
>> ------------------------------------------------------------------------
>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>> *Envoy? :* mercredi 10 octobre 2018 14:51
>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>> *Cc?:* r-help at r-project.org
>> *Objet :* Re: [R] Genuine relative paths with R
>> On 10/10/2018 10:37 AM, Olivier GIVAUDAN wrote:
>>> Hi Jeff,
>>> ?
>>>> That is, there is not always a file in a particular directory even involved in the executing code.??
>>> ?
>>> True. I'm only asking in the case where some R code is run from an R file. This function 'MyOwnPath()' (say) should only work (i.e. return a useful result) in this case.?
>>> ?
>>>> The R interpreter does not make assumptions about where the code it is running came from.?
>>> ?
>>> That's precisely the reproach I have in case the code comes from a file.?
>>> ?
>>>> You also keep referring to "this feature" being in many languages, though you seem to be mistaken about most of them...?
>>> ?
>>> 'Most of them' is largely exaggerated (plus I corrected myself): I only mixed between the 'cd' variable / command in Windows and Linux shells (you would certainly agree it's a bit vicious).?
>>> ?
>>>> $PWD is the same as getwd()?
>>> ?
>>> Wrong. As I already said, if I create an R script located somewhere on my computer with the only line 'getwd()' and run this script, I won't get the directory of this R script, contrary to a shell file with the only line '$PWD'.?
>>
>> What system are you talking about?? On Unix-alikes, you'd need an "echo"
>> ahead of that, and it would print the user's working directory, not the
>> working directory of the script.
>>
>> Duncan Murdoch
>>
>>> ?
>>>> __FILE__ in C relates to the source code directory that is usually not where the executable is ?located and may not even exist on the computer it is running on?
>>> ?
>>> Yes, and? What is the issue here? So '__FILE__' does the job. Invoking '__FILE__' in a .C file (I never said in its related executable) will return the absolute path of this C source file.?
>>> '__DIR__' in PHP also does the job. No to forget the good old VBA (Excel in this case) 'ActiveWorkbook.Path'.?
>>>
>>> Thank you for the 2 references you provided.
>>> However it seems that some manual settings are still required to be able to use Rscript.
>>> But I like the solution of the .RData file: I simply created an empty .RData file at the root of my project and by double-clicking on this file (as you said), the R GUI opens and 'getwd()' returns the path of this .RData file. It seems to be a good alternative  to .Rproj file to be opened with RStudio.
>>> ?
>>>> However, by far the best approach is to teach your users to fish... if you give them an RStudio project directory they can double-click on the .Rproj ?file to set the current directory and enter the world of R.??
>>> ?
>>> Yes, using an .Rproj file to be opened with RStudio also seems to me to be a reasonable solution (the one I chose until now), although it is still a workaround and requires RStudio.?
>>> Actually in this case, the package 'here'? I previously mentioned is useless to get the current working directory of the project as 'When a project is opened within RStudio the following actions are taken: [...] The current working directory is set to the  project directory.', as stated on this page:
>> https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects.
>>> So 'getwd()' returns exactly the same as 'here()' does.
>>>
>>> Best regards,?
>>> ?
>>> Olivier
>>>
>>> ________________________________
>>> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>>> Envoy? : dimanche 7 octobre 2018 20:48
>>> ? : Olivier GIVAUDAN
>>> Cc : D?nes T?th; r-help at r-project.org
>>> Objet : RE: [R] Genuine relative paths with R
>>>
>>> On Sun, 7 Oct 2018, Olivier GIVAUDAN wrote:
>>>
>>>> Hello Denes,
>>>>
>>>>> Yes, the path to the "root" folder of your project. You seem to have a
>>>> really esoteric context if you want to run an R script without knowing
>>>> its path in the file system.
>>>>
>>>> I don't have any esoteric context: I'm just looking for the most generic, automatic and reproducible solution.
>>>> Of course you always know where an R script is located, nevertheless it doesn't imply you want to manually write its path in this
>>>> R script. The issue is to have to hardcode an absolute path: I don't want that.
>>>>
>>>>> Because it is extremely rare that someone - who uses R for what it is
>>>> worth and in a manner how R is supposed to be used - actually needs such
>>>> a function.
>>>>
>>>
>>>> First, the fact that it is rare doesn't mean this need is not legitimate
>>>> and relevant: it is needed to make R projects fully movable (i.e.
>>>> wherever you want). Second why a vast majority of languages does have
>>>> this feature and not R? Why is it useful in these languages and not in
>>>> R?
>>>
>>> The R interpreter does not make assumptions about where the code it is
>>> running came from. You might be running it by using the source() function,
>>> or by using the Rscript program, or by R CMD BATCH, or using eval() on
>>> code you pasted together in an R function, or as byte-compiled code loaded
>>> from an RData file. That is, there is not always a file in a particular
>>> directory even involved in the executing code.
>>>
>>> You also keep referring to "this feature" being in many languages, though
>>> you seem to be mistaken about most of them... in fact, they, too, know NOT
>>> where the script is but where the current directory is ($PWD is the same
>>> as getwd()) or where the compilation occurred (__FILE__ in C relates to
>>> the source code directory that is usually not where the executable is
>>> located and may not even exist on the computer it is running on).
>>>
>>> I have already pointed out that the solution is to let the OS set the
>>> current directory. If you want the user to have access to R independent of
>>> your code, the easiest way to leave them in Rgui after your code is done
>>> is to use save.image() to create a "myApp.RData" file which can be
>>> double-clicked [1]. The double-clicking action by default (as defined by
>>> the installation of R) causes the operating system to set the current
>>> directory to the one containing the file you double-clicked on and then
>>> executes the Rgui program.
>>>
>>> If you don't want the user to interact with your session, you can use the
>>> Rscript executable (also mentioned briefly at the bottom of [1]). In both
>>> cases, the user has (unknowingly) set the current directory before running
>>> your code, and there is no need to encode where the script is or was
>>> inside the script.
>>>
>>> You can also create a windows shortcut to invoke Rscript yourself by
>>> bootstrapping the RData file and invoking the
>>> R.utils::createWindowsShortcut() [2] function.
>>>
>>> However, by far the best approach is to teach your users to fish... if you
>>> give them an RStudio project directory they can double-click on the .Rproj
>>> file to set the current directory and enter the world of R.
>>>
>>> [1] https://www.r-bloggers.com/look-ma-no-typing-autorunning-code-on-r-startup/
>>> [2] https://cran.r-project.org/web/packages/R.utils/R.utils.pdf
>>>
>>> End comment.
>>>
>>>> Best regards,
>>>>
>>>> Olivier
>>>>
>>>> _________________________________________________________________________________________________________________________________
>>>> De : D?nes T?th <toth.denes at kogentum.hu>
>>>> Envoy? : samedi 6 octobre 2018 23:36
>>>> ? : Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
>>>> Objet : Re: [R] Genuine relative paths with R
>>>> Hi Olivier,
>>>>
>>>>
>>>> On 10/07/2018 01:13 AM, Olivier GIVAUDAN wrote:
>>>>> Hi Denes,
>>>>>
>>>>> Thank you for the possibility you shared: unfortunately it still uses
>>>>> one hardcoded absolute path which I want to avoid.
>>>>
>>>> Yes, the path to the "root" folder of your project. You seem to have a
>>>> really esoteric context if you want to run an R script without knowing
>>>> its path in the file system.
>>>>
>>>>>
>>>>> I just think that the solutions suggested are too complicated for my
>>>>> simple need.
>>>>>
>>>>> The root cause being that R doesn't seem to have the Windows batch
>>>>> equivalent of cd, or bash equivalent of $PWD, or PHP equivalent of __DIR__.
>>>>> Hence the workarounds we are discussing.
>>>>>
>>>>> And finally we go back to my initial question: if such a function
>>>>> doesn't exist in R, what are the reasons?
>>>>
>>>> Because it is extremely rare that someone - who uses R for what it is
>>>> worth and in a manner how R is supposed to be used - actually needs such
>>>> a function.
>>>>
>>>> Best,
>>>> Denes
>>>>
>>>>
>>>>
>>>>>
>>>>> Best regards,
>>>>>
>>>>> Olivier
>>>>> ------------------------------------------------------------------------
>>>>> *De :* D?nes T?th <toth.denes at kogentum.hu>
>>>>> *Envoy? :* samedi 6 octobre 2018 23:05
>>>>> *?:* Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
>>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>>> Hi Olivier,
>>>>>
>>>>> I really think that Ista and Jeff gave you plenty of useful options how
>>>>> you can avoid using absolute paths.
>>>>>
>>>>> One more possibility: you can use `source()` with the chdir = TRUE
>>>>> argument (see ?source). If you have a master script which sources other
>>>>> files which are located in a fixed hierarchy relative to the location of
>>>>> the master script, the only time when you have to use an absolute path
>>>>> is when you source your master script, e.g.:
>>>>> source("/my/path/to/master.R", chdir = TRUE)
>>>>>
>>>>> Inside the master script, you can then source the other scripts by
>>>>> relative paths, define your 'data' folders relative to the master script
>>>>> and let the other scripts use those data paths, etc.
>>>>>
>>>>> Best,
>>>>> Denes
>>>>>
>>>>>
>>>>> On 10/06/2018 11:36 PM, Olivier GIVAUDAN wrote:
>>>>>> Hi Jeff,
>>>>>>
>>>>>> Thanks for sharing your workaround.
>>>>>>
>>>>>> I guess my last answer to Ista answers your question as well.
>>>>>>
>>>>>> To me this function (an equivalent of 'cd', say) should be platform-independent.
>>>>>>
>>>>>> Best regards,
>>>>>>
>>>>>> Olivier
>>>>>>
>>>>>> ________________________________
>>>>>> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>>>>>> Envoy??? : samedi 6 octobre 2018 19:31
>>>>>> ??? : r-help at r-project.org; Olivier GIVAUDAN; r-help at r-project.org
>>>>>> Objet : Re: [R] Genuine relative paths with R
>>>>>>
>>>>>> I stopped using hardcoded absolute paths inside R scripts years ago, and I suspect that is fairly common practice. That is, I
>>>> almost never enter a path starting with "/" or "c:/" in an R script.
>>>>>>
>>>>>> The key concession you have to make is to start your R session in your working directory using OS-specific mechanisms, and
>>>> then reference your code and data relative to that directory. RStudio project files offer one mechanism for doing this; using CD
>>>> from? the OS command line is another, and using the file-browser
>>>>> double-click mechanism on .RData files is another (though I prefer to
>>>>> avoid that these days due to potential global environment contamination).
>>>>>>
>>>>>> Perhaps you can be more specific about what facilities you are expecting to find. You should also mention what OS you
>>>> typically use and how you normally start R.
>>>>>>
>>>>>> On October 6, 2018 4:48:44 AM PDT, Olivier GIVAUDAN <olivier_givaudan at hotmail.com> wrote:
>>>>>>> Dear R users,
>>>>>>>
>>>>>>> I would like to work with genuine relative paths in R for obvious
>>>>>>> reasons: if I move all my scripts related to some project as a whole to
>>>>>>> another location of my computer or someone else's computer, if want my
>>>>>>> scripts to continue to run seamlessly.
>>>>>>>
>>>>>>> What I mean by "genuine" is that it should not be necessary to hardcode
>>>>>>> one single absolute path (making the code obviously not "portable" - to
>>>>>>> another place - anymore).
>>>>>>>
>>>>>>> For the time being, I found the following related posts, unfortunately
>>>>>>> never conclusive or even somewhat off-topic:
>>>>>>> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
>>>>>>> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
>>>>>>> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
>>>>>>>
>>>>>>> So I found 2 workarounds, more or less satisfactory:
>>>>>>>
>>>>>>>
>>>>>>> 1.? Either create a variable "ScriptPath" in the first lines of each of
>>>>>>> my R scripts and run a batch (or shell, etc.) to replace every single
>>>>>>> occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R
>>>>>>> script]" in all the R scripts located in the folder (and possibly
>>>>>>> subfolders) of the batch file.
>>>>>>> 2.? Or create an R project file with RStudio and use the package "here"
>>>>>>> to get the absolute path of the R project file and put all the R
>>>>>>> scripts related to this project in the R project directory, as often
>>>>>>> recommended.
>>>>>>>
>>>>>>> But I am really wondering why R doesn't have (please tell me if I'm
>>>>>>> wrong) this basic feature as many other languages have it (batch,
>>>>>>> shell, C, LaTeX, SAS with macro-variables, etc.)?
>>>>>>> Do you know whether the language will have this kind of function in a
>>>>>>> near future? What are the obstacles / what is the reasoning for not
>>>>>>> having it already?
>>>>>>>
>>>>>>> Do you know other workarounds?
>>>>>>>
>>>>>>> Best regards,
>>>>>>>
>>>>>>> Olivier
>>>>>>>
>>>>>>>  ???????? [[alternative HTML version deleted]]
>>>>>>>
>>>>>>> ______________________________________________
>>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>> PLEASE do read the posting guide
>>>>>>> http://www.R-project.org/posting-guide.html
>>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>
>>>>>> --
>>>>>> Sent from my phone. Please excuse my brevity.
>>>>>>
>>>>>>  ???????? [[alternative HTML version deleted]]
>>>>>>
>>>>>>
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------------
>>> Jeff Newmiller??????????????????????? The???? .....?????? .....? Go Live...
>>> DCN:<jdnewmil at dcn.davis.ca.us>??????? Basics: ##.#.?????? ##.#.? Live Go...
>>>  ???????????????????????????????????????? Live:?? OO#.. Dead: OO#..? Playing
>>> Research Engineer (Solar/Batteries??????????? O.O#.?????? #.O#.? with
>>> /Software/Embedded Controllers)?????????????? .OO#.?????? .OO#.? rocks...1k
>>> ---------------------------------------------------------------------------
>>>
>>>  ??????? [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>


From wdunl@p @ending from tibco@com  Wed Oct 10 17:25:26 2018
From: wdunl@p @ending from tibco@com (William Dunlap)
Date: Wed, 10 Oct 2018 08:25:26 -0700
Subject: [R] Genuine relative paths with R
In-Reply-To: <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <EF096B6D-D167-402E-A1BB-9310D60E6F64@dcn.davis.ca.us>
 <VI1PR0202MB33571A964A191D165B3BF422F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <292ca297-27e3-162b-e525-fabc4bb4554c@kogentum.hu>
 <VI1PR0202MB3357E9066FF1527BAC014784F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <dbde4f15-caa6-dc62-3a10-e804cc81671a@kogentum.hu>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
Message-ID: <CAF8bMcY-nF22Z0jOavfTKu7rc2L55x++N2XTUUjMe3+=b3FFhw@mail.gmail.com>

I am curious about why it is desirable for a script to know where in the
file system it is.  Is it because you have a set of scripts invoking each
other?  If so, the best route it to convert the scripts into functions and
put them into a package.  Functions do know which package they live in and
they "prefer" to call other functions in their own package (or other
packages which they have declared).

Or is there some other reason?


Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Wed, Oct 10, 2018 at 8:18 AM, Olivier GIVAUDAN <
olivier_givaudan at hotmail.com> wrote:

> Hi Duncan,
>
> Yes, if you need to display the content of $PWD you obviously need to type
> 'echo' before this variable.
>
> It prints the user's working directory if run from a terminal but if run
> from a bash file it prints the working directory of the script.
> At least for me (I am running on the last version of Ubuntu)...
>
> Best regards,
>
> Olivier
> ________________________________
> De : Duncan Murdoch <murdoch.duncan at gmail.com>
> Envoy? : mercredi 10 octobre 2018 14:51
> ? : Olivier GIVAUDAN; Jeff Newmiller
> Cc : r-help at r-project.org
> Objet : Re: [R] Genuine relative paths with R
>
> On 10/10/2018 10:37 AM, Olivier GIVAUDAN wrote:
> > Hi Jeff,
> > ?
> >> That is, there is not always a file in a particular directory even
> involved in the executing code.??
> > ?
> > True. I'm only asking in the case where some R code is run from an R
> file. This function 'MyOwnPath()' (say) should only work (i.e. return a
> useful result) in this case.?
> > ?
> >> The R interpreter does not make assumptions about where the code it is
> running came from.?
> > ?
> > That's precisely the reproach I have in case the code comes from a file.?
> > ?
> >> You also keep referring to "this feature" being in many languages,
> though you seem to be mistaken about most of them...?
> > ?
> > 'Most of them' is largely exaggerated (plus I corrected myself): I only
> mixed between the 'cd' variable / command in Windows and Linux shells (you
> would certainly agree it's a bit vicious).?
> > ?
> >> $PWD is the same as getwd()?
> > ?
> > Wrong. As I already said, if I create an R script located somewhere on
> my computer with the only line 'getwd()' and run this script, I won't get
> the directory of this R script, contrary to a shell file with the only line
> '$PWD'.?
>
> What system are you talking about?  On Unix-alikes, you'd need an "echo"
> ahead of that, and it would print the user's working directory, not the
> working directory of the script.
>
> Duncan Murdoch
>
> > ?
> >> __FILE__ in C relates to the source code directory that is usually not
> where the executable is ?located and may not even exist on the computer it
> is running on?
> > ?
> > Yes, and? What is the issue here? So '__FILE__' does the job. Invoking
> '__FILE__' in a .C file (I never said in its related executable) will
> return the absolute path of this C source file.?
> > '__DIR__' in PHP also does the job. No to forget the good old VBA (Excel
> in this case) 'ActiveWorkbook.Path'.?
> >
> > Thank you for the 2 references you provided.
> > However it seems that some manual settings are still required to be able
> to use Rscript.
> > But I like the solution of the .RData file: I simply created an empty
> .RData file at the root of my project and by double-clicking on this file
> (as you said), the R GUI opens and 'getwd()' returns the path of this
> .RData file. It seems to be a good alternative to .Rproj file to be opened
> with RStudio.
> > ?
> >> However, by far the best approach is to teach your users to fish... if
> you give them an RStudio project directory they can double-click on the
> .Rproj ?file to set the current directory and enter the world of R.??
> > ?
> > Yes, using an .Rproj file to be opened with RStudio also seems to me to
> be a reasonable solution (the one I chose until now), although it is still
> a workaround and requires RStudio.?
> > Actually in this case, the package 'here'? I previously mentioned is
> useless to get the current working directory of the project as 'When a
> project is opened within RStudio the following actions are taken: [...] The
> current working directory is set to the project directory.', as stated on
> this page: https://support.rstudio.com/hc/en-us/articles/200526207-
> Using-Projects.
> > So 'getwd()' returns exactly the same as 'here()' does.
> >
> > Best regards,?
> > ?
> > Olivier
> >
> > ________________________________
> > De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> > Envoy? : dimanche 7 octobre 2018 20:48
> > ? : Olivier GIVAUDAN
> > Cc : D?nes T?th; r-help at r-project.org
> > Objet : RE: [R] Genuine relative paths with R
> >
> > On Sun, 7 Oct 2018, Olivier GIVAUDAN wrote:
> >
> >> Hello Denes,
> >>
> >>> Yes, the path to the "root" folder of your project. You seem to have a
> >> really esoteric context if you want to run an R script without knowing
> >> its path in the file system.
> >>
> >> I don't have any esoteric context: I'm just looking for the most
> generic, automatic and reproducible solution.
> >> Of course you always know where an R script is located, nevertheless it
> doesn't imply you want to manually write its path in this
> >> R script. The issue is to have to hardcode an absolute path: I don't
> want that.
> >>
> >>> Because it is extremely rare that someone - who uses R for what it is
> >> worth and in a manner how R is supposed to be used - actually needs such
> >> a function.
> >>
> >
> >> First, the fact that it is rare doesn't mean this need is not legitimate
> >> and relevant: it is needed to make R projects fully movable (i.e.
> >> wherever you want). Second why a vast majority of languages does have
> >> this feature and not R? Why is it useful in these languages and not in
> >> R?
> >
> > The R interpreter does not make assumptions about where the code it is
> > running came from. You might be running it by using the source()
> function,
> > or by using the Rscript program, or by R CMD BATCH, or using eval() on
> > code you pasted together in an R function, or as byte-compiled code
> loaded
> > from an RData file. That is, there is not always a file in a particular
> > directory even involved in the executing code.
> >
> > You also keep referring to "this feature" being in many languages, though
> > you seem to be mistaken about most of them... in fact, they, too, know
> NOT
> > where the script is but where the current directory is ($PWD is the same
> > as getwd()) or where the compilation occurred (__FILE__ in C relates to
> > the source code directory that is usually not where the executable is
> > located and may not even exist on the computer it is running on).
> >
> > I have already pointed out that the solution is to let the OS set the
> > current directory. If you want the user to have access to R independent
> of
> > your code, the easiest way to leave them in Rgui after your code is done
> > is to use save.image() to create a "myApp.RData" file which can be
> > double-clicked [1]. The double-clicking action by default (as defined by
> > the installation of R) causes the operating system to set the current
> > directory to the one containing the file you double-clicked on and then
> > executes the Rgui program.
> >
> > If you don't want the user to interact with your session, you can use the
> > Rscript executable (also mentioned briefly at the bottom of [1]). In both
> > cases, the user has (unknowingly) set the current directory before
> running
> > your code, and there is no need to encode where the script is or was
> > inside the script.
> >
> > You can also create a windows shortcut to invoke Rscript yourself by
> > bootstrapping the RData file and invoking the
> > R.utils::createWindowsShortcut() [2] function.
> >
> > However, by far the best approach is to teach your users to fish... if
> you
> > give them an RStudio project directory they can double-click on the
> .Rproj
> > file to set the current directory and enter the world of R.
> >
> > [1] https://www.r-bloggers.com/look-ma-no-typing-autorunning-
> code-on-r-startup/
> > [2] https://cran.r-project.org/web/packages/R.utils/R.utils.pdf
> >
> > End comment.
> >
> >> Best regards,
> >>
> >> Olivier
> >>
> >> ____________________________________________________________
> _____________________________________________________________________
> >> De : D?nes T?th <toth.denes at kogentum.hu>
> >> Envoy? : samedi 6 octobre 2018 23:36
> >> ? : Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
> >> Objet : Re: [R] Genuine relative paths with R
> >> Hi Olivier,
> >>
> >>
> >> On 10/07/2018 01:13 AM, Olivier GIVAUDAN wrote:
> >>> Hi Denes,
> >>>
> >>> Thank you for the possibility you shared: unfortunately it still uses
> >>> one hardcoded absolute path which I want to avoid.
> >>
> >> Yes, the path to the "root" folder of your project. You seem to have a
> >> really esoteric context if you want to run an R script without knowing
> >> its path in the file system.
> >>
> >>>
> >>> I just think that the solutions suggested are too complicated for my
> >>> simple need.
> >>>
> >>> The root cause being that R doesn't seem to have the Windows batch
> >>> equivalent of cd, or bash equivalent of $PWD, or PHP equivalent of
> __DIR__.
> >>> Hence the workarounds we are discussing.
> >>>
> >>> And finally we go back to my initial question: if such a function
> >>> doesn't exist in R, what are the reasons?
> >>
> >> Because it is extremely rare that someone - who uses R for what it is
> >> worth and in a manner how R is supposed to be used - actually needs such
> >> a function.
> >>
> >> Best,
> >> Denes
> >>
> >>
> >>
> >>>
> >>> Best regards,
> >>>
> >>> Olivier
> >>> ------------------------------------------------------------
> ------------
> >>> *De :* D?nes T?th <toth.denes at kogentum.hu>
> >>> *Envoy? :* samedi 6 octobre 2018 23:05
> >>> *?:* Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
> >>> *Objet :* Re: [R] Genuine relative paths with R
> >>> Hi Olivier,
> >>>
> >>> I really think that Ista and Jeff gave you plenty of useful options how
> >>> you can avoid using absolute paths.
> >>>
> >>> One more possibility: you can use `source()` with the chdir = TRUE
> >>> argument (see ?source). If you have a master script which sources other
> >>> files which are located in a fixed hierarchy relative to the location
> of
> >>> the master script, the only time when you have to use an absolute path
> >>> is when you source your master script, e.g.:
> >>> source("/my/path/to/master.R", chdir = TRUE)
> >>>
> >>> Inside the master script, you can then source the other scripts by
> >>> relative paths, define your 'data' folders relative to the master
> script
> >>> and let the other scripts use those data paths, etc.
> >>>
> >>> Best,
> >>> Denes
> >>>
> >>>
> >>> On 10/06/2018 11:36 PM, Olivier GIVAUDAN wrote:
> >>>> Hi Jeff,
> >>>>
> >>>> Thanks for sharing your workaround.
> >>>>
> >>>> I guess my last answer to Ista answers your question as well.
> >>>>
> >>>> To me this function (an equivalent of 'cd', say) should be
> platform-independent.
> >>>>
> >>>> Best regards,
> >>>>
> >>>> Olivier
> >>>>
> >>>> ________________________________
> >>>> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> >>>> Envoy??? : samedi 6 octobre 2018 19:31
> >>>> ??? : r-help at r-project.org; Olivier GIVAUDAN; r-help at r-project.org
> >>>> Objet : Re: [R] Genuine relative paths with R
> >>>>
> >>>> I stopped using hardcoded absolute paths inside R scripts years ago,
> and I suspect that is fairly common practice. That is, I
> >> almost never enter a path starting with "/" or "c:/" in an R script.
> >>>>
> >>>> The key concession you have to make is to start your R session in
> your working directory using OS-specific mechanisms, and
> >> then reference your code and data relative to that directory. RStudio
> project files offer one mechanism for doing this; using CD
> >> from  the OS command line is another, and using the file-browser
> >>> double-click mechanism on .RData files is another (though I prefer to
> >>> avoid that these days due to potential global environment
> contamination).
> >>>>
> >>>> Perhaps you can be more specific about what facilities you are
> expecting to find. You should also mention what OS you
> >> typically use and how you normally start R.
> >>>>
> >>>> On October 6, 2018 4:48:44 AM PDT, Olivier GIVAUDAN <
> olivier_givaudan at hotmail.com> wrote:
> >>>>> Dear R users,
> >>>>>
> >>>>> I would like to work with genuine relative paths in R for obvious
> >>>>> reasons: if I move all my scripts related to some project as a whole
> to
> >>>>> another location of my computer or someone else's computer, if want
> my
> >>>>> scripts to continue to run seamlessly.
> >>>>>
> >>>>> What I mean by "genuine" is that it should not be necessary to
> hardcode
> >>>>> one single absolute path (making the code obviously not "portable" -
> to
> >>>>> another place - anymore).
> >>>>>
> >>>>> For the time being, I found the following related posts,
> unfortunately
> >>>>> never conclusive or even somewhat off-topic:
> >>>>> https://stackoverflow.com/questions/1815606/rscript-
> determine-path-of-the-executing-script
> >>>>> https://stackoverflow.com/questions/47044068/get-the-
> path-of-current-script/47045368
> >>>>> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-
> path-td2719676.html
> >>>>>
> >>>>> So I found 2 workarounds, more or less satisfactory:
> >>>>>
> >>>>>
> >>>>> 1.  Either create a variable "ScriptPath" in the first lines of each
> of
> >>>>> my R scripts and run a batch (or shell, etc.) to replace every single
> >>>>> occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of
> the R
> >>>>> script]" in all the R scripts located in the folder (and possibly
> >>>>> subfolders) of the batch file.
> >>>>> 2.  Or create an R project file with RStudio and use the package
> "here"
> >>>>> to get the absolute path of the R project file and put all the R
> >>>>> scripts related to this project in the R project directory, as often
> >>>>> recommended.
> >>>>>
> >>>>> But I am really wondering why R doesn't have (please tell me if I'm
> >>>>> wrong) this basic feature as many other languages have it (batch,
> >>>>> shell, C, LaTeX, SAS with macro-variables, etc.)?
> >>>>> Do you know whether the language will have this kind of function in a
> >>>>> near future? What are the obstacles / what is the reasoning for not
> >>>>> having it already?
> >>>>>
> >>>>> Do you know other workarounds?
> >>>>>
> >>>>> Best regards,
> >>>>>
> >>>>> Olivier
> >>>>>
> >>>>>         [[alternative HTML version deleted]]
> >>>>>
> >>>>> ______________________________________________
> >>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>>> PLEASE do read the posting guide
> >>>>> http://www.R-project.org/posting-guide.html
> >>>>> and provide commented, minimal, self-contained, reproducible code.
> >>>>
> >>>> --
> >>>> Sent from my phone. Please excuse my brevity.
> >>>>
> >>>>         [[alternative HTML version deleted]]
> >>>>
> >>>>
> >>>>
> >>>> ______________________________________________
> >>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> >>>> and provide commented, minimal, self-contained, reproducible code.
> >>>>
> >>
> >>
> >
> > ------------------------------------------------------------
> ---------------
> > Jeff Newmiller                        The     .....       .....  Go
> Live...
> > DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live
> Go...
> >                                         Live:   OO#.. Dead: OO#..
> Playing
> > Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
> > /Software/Embedded Controllers)               .OO#.       .OO#.
> rocks...1k
> > ------------------------------------------------------------
> ---------------
> >
> >        [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From luke-tierney @ending from uiow@@edu  Wed Oct 10 17:48:22 2018
From: luke-tierney @ending from uiow@@edu (Tierney, Luke)
Date: Wed, 10 Oct 2018 15:48:22 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <VI1PR0202MB3357ECAFF18BC7D7DD83E11FF5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <60714a3e-2ef5-5563-7dcc-eb4965f966d4@uke.de>
 <VI1PR0202MB3357ECAFF18BC7D7DD83E11FF5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
Message-ID: <alpine.DEB.2.21.1810101044310.3154@luke-Latitude-7480>

If you are always running your main script as 'Rscript myscript.R'
then your file argument will appear as '--file=myscript.R' in
commandArgs(). So you can use something like

scriptFile <- function()
{
     pat <- "^--file="
     args <- commandArgs()
     file <- args[grepl(pat, args, args)]
     normalizePath(sub(pat, "", file))
}

Then scriptFile() will give you something to work with.

Best,

luke



On Wed, 10 Oct 2018, Olivier GIVAUDAN wrote:

> Dear Eik,
>
> Thank you for your message.
>
> Yes, I already got to know this package and this discussion (while I found the 'here' package). But thanks.
>
> Best regards,
>
> Olivier
> ________________________________
> De : Eik Vettorazzi <E.Vettorazzi at uke.de>
> Envoy??? : lundi 8 octobre 2018 11:30
> ??? : Olivier GIVAUDAN; r-help at r-project.org
> Objet : Re: [R] Genuine relative paths with R
>
> Dear Olivier,
> you may find the rprojroot package useful, see
> https://github.com/r-lib/rprojroot
>
> and a discussion
>
> https://gist.github.com/jennybc/362f52446fe1ebc4c49f#file-2014-10-12_stop-working-directory-insanity-md
>
> Cheers
>
> Am 06.10.2018 um 13:48 schrieb Olivier GIVAUDAN:
>> Dear R users,
>>
>> I would like to work with genuine relative paths in R for obvious reasons: if I move all my scripts related to some project as a whole to another location of my computer or someone else's computer, if want my scripts to continue to run seamlessly.
>>
>> What I mean by "genuine" is that it should not be necessary to hardcode one single absolute path (making the code obviously not "portable" - to another place - anymore).
>>
>> For the time being, I found the following related posts, unfortunately never conclusive or even somewhat off-topic:
>> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
>> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
>> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
>>
>> So I found 2 workarounds, more or less satisfactory:
>>
>>
>>    1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.
>>    2.  Or create an R project file with RStudio and use the package "here" to get the absolute path of the R project file and put all the R scripts related to this project in the R project directory, as often recommended.
>>
>> But I am really wondering why R doesn't have (please tell me if I'm wrong) this basic feature as many other languages have it (batch, shell, C, LaTeX, SAS with macro-variables, etc.)?
>> Do you know whether the language will have this kind of function in a near future? What are the obstacles / what is the reasoning for not having it already?
>>
>> Do you know other workarounds?
>>
>> Best regards,
>>
>> Olivier
>>
>>        [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
> --
> Eik Vettorazzi
>
> Department of Medical Biometry and Epidemiology
> University Medical Center Hamburg-Eppendorf
>
> Martinistrasse 52
> building W 34
> 20246 Hamburg
>
> Phone: +49 (0) 40 7410 - 58243
> Fax:   +49 (0) 40 7410 - 57790
> Web: www.uke.de/imbe<http://www.uke.de/imbe>
> --
>
> _____________________________________________________________________
>
> Universit???tsklinikum Hamburg-Eppendorf; K???rperschaft des ???ffentlichen Rechts; Gerichtsstand: Hamburg | www.uke.de
> Vorstandsmitglieder: Prof. Dr. Burkhard G???ke (Vorsitzender), Prof. Dr. Dr. Uwe Koch-Gromus, Joachim Pr???l???, Martina Saurin (komm.)
> _____________________________________________________________________
>
> SAVE PAPER - THINK BEFORE PRINTING
>
> 	[[alternative HTML version deleted]]
>
>

-- 
Luke Tierney
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:   luke-tierney at uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu


From @@r@h@go@lee @ending from gm@il@com  Wed Oct 10 18:14:29 2018
From: @@r@h@go@lee @ending from gm@il@com (Sarah Goslee)
Date: Wed, 10 Oct 2018 12:14:29 -0400
Subject: [R] cluster samples using self organizing map in R
In-Reply-To: <CAOQGvC6abdJ=vcT0iW+ngHiPdYmWET4GCn389YnVQMnjODvr=g@mail.gmail.com>
References: <CAOQGvC6abdJ=vcT0iW+ngHiPdYmWET4GCn389YnVQMnjODvr=g@mail.gmail.com>
Message-ID: <CAM_vju=e5BGcxdrt3K5a9EGC8TYYpkfxzQigtKp_OzWxuPkSdw@mail.gmail.com>

Hi Tina,

What's wrong with what you did?

The output object of som() contains the classification of each sample.

You probably do need to read more about self-organizing maps, since
you specified you wanted the samples classified into nine groups, and
that's unlikely to be your actual intent.

I have no idea what you thought your hierarchical clustering step was
supposed to do, either.

Here's one way to get 3 groups instead of 9:

library(kohonen)
iris.sc <- scale(iris[, 1:4])
iris.som <- som(iris.sc, grid=somgrid(xdim = 1, ydim=3,
topo="rectangular"), rlen=100, alpha=c(0.05,0.01))

table(iris.som$unit.classif, iris$Species)
plot(iris.som)

Sarah

On Wed, Oct 10, 2018 at 2:14 AM A DNA RNA <email2mrna at gmail.com> wrote:
>
> Dear All,
>
> Who can I use Self Organizing Map (SOM) results to cluster samples? I have
> tried following but this gives me only the clustering of grids, while I
> want to cluster (150) samples:
>
> library(kohonen)
> iris.sc <- scale(iris[, 1:4])
> iris.som <- som(iris.sc, grid=somgrid(xdim = 3, ydim=3, topo="hexagonal"),
>                rlen=100, alpha=c(0.05,0.01))
> ##hierarchical clustering
> groups <- 3
> iris.hc <- cutree(hclust(dist(iris.som$codes[[1]])), groups)
> iris.hc
> #V1 V2 V3 V4 V5 V6 V7 V8 V9
> #1  1  2  1  1  2  3  3  2
>
>
> Can anyone help me with this please?
> --
> Tina


-- 
Sarah Goslee
http://www.functionaldiversity.org


From le@lie@rutkow@ki @ending from gm@il@com  Wed Oct 10 21:42:35 2018
From: le@lie@rutkow@ki @ending from gm@il@com (Leslie Rutkowski)
Date: Wed, 10 Oct 2018 15:42:35 -0400
Subject: [R] Code "tags"
Message-ID: <CAA0F9kW1SyLe_PnYnSoeVWcdRJswX7MF1YxrxrG7Vgngn_S=Ww@mail.gmail.com>

Hi all,

I'm trying to get organized about my R programming and I'm looking for a
way to "tag" snippets of handy code that I go back to time and again. At
the moment, I just plop .R files into a folder and rely on the file name to
guide me. In desperation, I've taken to saving the same chunk as multiple
.R files with different "tags" (e.g. "Loops with titles.R" = "CLT
example.R").

Any tips would be appreciated.

Thanks,
Leslie

	[[alternative HTML version deleted]]


From olivier_giv@ud@n @ending from hotm@il@com  Wed Oct 10 21:51:19 2018
From: olivier_giv@ud@n @ending from hotm@il@com (Olivier GIVAUDAN)
Date: Wed, 10 Oct 2018 19:51:19 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <EF096B6D-D167-402E-A1BB-9310D60E6F64@dcn.davis.ca.us>
 <VI1PR0202MB33571A964A191D165B3BF422F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <292ca297-27e3-162b-e525-fabc4bb4554c@kogentum.hu>
 <VI1PR0202MB3357E9066FF1527BAC014784F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <dbde4f15-caa6-dc62-3a10-e804cc81671a@kogentum.hu>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
Message-ID: <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>

Well, no idea...

I just created a file 'TestPWD', made it executable, inserted in it these lines and moved the file in various places:

#!/bin/bash

echo $PWD
read -p ""
________________________________
De : Duncan Murdoch <murdoch.duncan at gmail.com>
Envoy? : mercredi 10 octobre 2018 15:20
? : Olivier GIVAUDAN; Jeff Newmiller
Cc : r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

On 10/10/2018 11:18 AM, Olivier GIVAUDAN wrote:
> Hi Duncan,
>
> Yes, if you need to display the content of $PWD you obviously need to
> type 'echo' before this variable.
>
> It prints the user's working directory if run from a terminal but if run
> from a bash file it prints the working directory of the script.
> At least for me (I am running on the last version of Ubuntu)...

Not for me.  Always prints the user's working directory.

Duncan Murdoch


>
> Best regards,
>
> Olivier
> ------------------------------------------------------------------------
> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Envoy? :* mercredi 10 octobre 2018 14:51
> *? :* Olivier GIVAUDAN; Jeff Newmiller
> *Cc :* r-help at r-project.org
> *Objet :* Re: [R] Genuine relative paths with R
> On 10/10/2018 10:37 AM, Olivier GIVAUDAN wrote:
>> Hi Jeff,
>> ?
>>> That is, there is not always a file in a particular directory even involved in the executing code.??
>> ?
>> True. I'm only asking in the case where some R code is run from an R file. This function 'MyOwnPath()' (say) should only work (i.e. return a useful result) in this case.?
>> ?
>>> The R interpreter does not make assumptions about where the code it is running came from.?
>> ?
>> That's precisely the reproach I have in case the code comes from a file.?
>> ?
>>> You also keep referring to "this feature" being in many languages, though you seem to be mistaken about most of them...?
>> ?
>> 'Most of them' is largely exaggerated (plus I corrected myself): I only mixed between the 'cd' variable / command in Windows and Linux shells (you would certainly agree it's a bit vicious).?
>> ?
>>> $PWD is the same as getwd()?
>> ?
>> Wrong. As I already said, if I create an R script located somewhere on my computer with the only line 'getwd()' and run this script, I won't get the directory of this R script, contrary to a shell file with the only line '$PWD'.?
>
> What system are you talking about?  On Unix-alikes, you'd need an "echo"
> ahead of that, and it would print the user's working directory, not the
> working directory of the script.
>
> Duncan Murdoch
>
>> ?
>>> __FILE__ in C relates to the source code directory that is usually not where the executable is ?located and may not even exist on the computer it is running on?
>> ?
>> Yes, and? What is the issue here? So '__FILE__' does the job. Invoking '__FILE__' in a .C file (I never said in its related executable) will return the absolute path of this C source file.?
>> '__DIR__' in PHP also does the job. No to forget the good old VBA (Excel in this case) 'ActiveWorkbook.Path'.?
>>
>> Thank you for the 2 references you provided.
>> However it seems that some manual settings are still required to be able to use Rscript.
>> But I like the solution of the .RData file: I simply created an empty .RData file at the root of my project and by double-clicking on this file (as you said), the R GUI opens and 'getwd()' returns the path of this .RData file. It seems to be a good alternative  to .Rproj file to be opened with RStudio.
>> ?
>>> However, by far the best approach is to teach your users to fish... if you give them an RStudio project directory they can double-click on the .Rproj ?file to set the current directory and enter the world of R.??
>> ?
>> Yes, using an .Rproj file to be opened with RStudio also seems to me to be a reasonable solution (the one I chose until now), although it is still a workaround and requires RStudio.?
>> Actually in this case, the package 'here'? I previously mentioned is useless to get the current working directory of the project as 'When a project is opened within RStudio the following actions are taken: [...] The current working directory is set to the  project directory.', as stated on this page:
> https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects.
>> So 'getwd()' returns exactly the same as 'here()' does.
>>
>> Best regards,?
>> ?
>> Olivier
>>
>> ________________________________
>> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>> Envoy? : dimanche 7 octobre 2018 20:48
>> ? : Olivier GIVAUDAN
>> Cc : D?nes T?th; r-help at r-project.org
>> Objet : RE: [R] Genuine relative paths with R
>>
>> On Sun, 7 Oct 2018, Olivier GIVAUDAN wrote:
>>
>>> Hello Denes,
>>>
>>>> Yes, the path to the "root" folder of your project. You seem to have a
>>> really esoteric context if you want to run an R script without knowing
>>> its path in the file system.
>>>
>>> I don't have any esoteric context: I'm just looking for the most generic, automatic and reproducible solution.
>>> Of course you always know where an R script is located, nevertheless it doesn't imply you want to manually write its path in this
>>> R script. The issue is to have to hardcode an absolute path: I don't want that.
>>>
>>>> Because it is extremely rare that someone - who uses R for what it is
>>> worth and in a manner how R is supposed to be used - actually needs such
>>> a function.
>>>
>>
>>> First, the fact that it is rare doesn't mean this need is not legitimate
>>> and relevant: it is needed to make R projects fully movable (i.e.
>>> wherever you want). Second why a vast majority of languages does have
>>> this feature and not R? Why is it useful in these languages and not in
>>> R?
>>
>> The R interpreter does not make assumptions about where the code it is
>> running came from. You might be running it by using the source() function,
>> or by using the Rscript program, or by R CMD BATCH, or using eval() on
>> code you pasted together in an R function, or as byte-compiled code loaded
>> from an RData file. That is, there is not always a file in a particular
>> directory even involved in the executing code.
>>
>> You also keep referring to "this feature" being in many languages, though
>> you seem to be mistaken about most of them... in fact, they, too, know NOT
>> where the script is but where the current directory is ($PWD is the same
>> as getwd()) or where the compilation occurred (__FILE__ in C relates to
>> the source code directory that is usually not where the executable is
>> located and may not even exist on the computer it is running on).
>>
>> I have already pointed out that the solution is to let the OS set the
>> current directory. If you want the user to have access to R independent of
>> your code, the easiest way to leave them in Rgui after your code is done
>> is to use save.image() to create a "myApp.RData" file which can be
>> double-clicked [1]. The double-clicking action by default (as defined by
>> the installation of R) causes the operating system to set the current
>> directory to the one containing the file you double-clicked on and then
>> executes the Rgui program.
>>
>> If you don't want the user to interact with your session, you can use the
>> Rscript executable (also mentioned briefly at the bottom of [1]). In both
>> cases, the user has (unknowingly) set the current directory before running
>> your code, and there is no need to encode where the script is or was
>> inside the script.
>>
>> You can also create a windows shortcut to invoke Rscript yourself by
>> bootstrapping the RData file and invoking the
>> R.utils::createWindowsShortcut() [2] function.
>>
>> However, by far the best approach is to teach your users to fish... if you
>> give them an RStudio project directory they can double-click on the .Rproj
>> file to set the current directory and enter the world of R.
>>
>> [1] https://www.r-bloggers.com/look-ma-no-typing-autorunning-code-on-r-startup/
>> [2] https://cran.r-project.org/web/packages/R.utils/R.utils.pdf
>>
>> End comment.
>>
>>> Best regards,
>>>
>>> Olivier
>>>
>>> _________________________________________________________________________________________________________________________________
>>> De : D?nes T?th <toth.denes at kogentum.hu>
>>> Envoy? : samedi 6 octobre 2018 23:36
>>> ? : Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
>>> Objet : Re: [R] Genuine relative paths with R
>>> Hi Olivier,
>>>
>>>
>>> On 10/07/2018 01:13 AM, Olivier GIVAUDAN wrote:
>>>> Hi Denes,
>>>>
>>>> Thank you for the possibility you shared: unfortunately it still uses
>>>> one hardcoded absolute path which I want to avoid.
>>>
>>> Yes, the path to the "root" folder of your project. You seem to have a
>>> really esoteric context if you want to run an R script without knowing
>>> its path in the file system.
>>>
>>>>
>>>> I just think that the solutions suggested are too complicated for my
>>>> simple need.
>>>>
>>>> The root cause being that R doesn't seem to have the Windows batch
>>>> equivalent of cd, or bash equivalent of $PWD, or PHP equivalent of __DIR__.
>>>> Hence the workarounds we are discussing.
>>>>
>>>> And finally we go back to my initial question: if such a function
>>>> doesn't exist in R, what are the reasons?
>>>
>>> Because it is extremely rare that someone - who uses R for what it is
>>> worth and in a manner how R is supposed to be used - actually needs such
>>> a function.
>>>
>>> Best,
>>> Denes
>>>
>>>
>>>
>>>>
>>>> Best regards,
>>>>
>>>> Olivier
>>>> ------------------------------------------------------------------------
>>>> *De :* D?nes T?th <toth.denes at kogentum.hu>
>>>> *Envoy? :* samedi 6 octobre 2018 23:05
>>>> *?:* Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>> Hi Olivier,
>>>>
>>>> I really think that Ista and Jeff gave you plenty of useful options how
>>>> you can avoid using absolute paths.
>>>>
>>>> One more possibility: you can use `source()` with the chdir = TRUE
>>>> argument (see ?source). If you have a master script which sources other
>>>> files which are located in a fixed hierarchy relative to the location of
>>>> the master script, the only time when you have to use an absolute path
>>>> is when you source your master script, e.g.:
>>>> source("/my/path/to/master.R", chdir = TRUE)
>>>>
>>>> Inside the master script, you can then source the other scripts by
>>>> relative paths, define your 'data' folders relative to the master script
>>>> and let the other scripts use those data paths, etc.
>>>>
>>>> Best,
>>>> Denes
>>>>
>>>>
>>>> On 10/06/2018 11:36 PM, Olivier GIVAUDAN wrote:
>>>>> Hi Jeff,
>>>>>
>>>>> Thanks for sharing your workaround.
>>>>>
>>>>> I guess my last answer to Ista answers your question as well.
>>>>>
>>>>> To me this function (an equivalent of 'cd', say) should be platform-independent.
>>>>>
>>>>> Best regards,
>>>>>
>>>>> Olivier
>>>>>
>>>>> ________________________________
>>>>> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>>>>> Envoy??? : samedi 6 octobre 2018 19:31
>>>>> ??? : r-help at r-project.org; Olivier GIVAUDAN; r-help at r-project.org
>>>>> Objet : Re: [R] Genuine relative paths with R
>>>>>
>>>>> I stopped using hardcoded absolute paths inside R scripts years ago, and I suspect that is fairly common practice. That is, I
>>> almost never enter a path starting with "/" or "c:/" in an R script.
>>>>>
>>>>> The key concession you have to make is to start your R session in your working directory using OS-specific mechanisms, and
>>> then reference your code and data relative to that directory. RStudio project files offer one mechanism for doing this; using CD
>>> from  the OS command line is another, and using the file-browser
>>>> double-click mechanism on .RData files is another (though I prefer to
>>>> avoid that these days due to potential global environment contamination).
>>>>>
>>>>> Perhaps you can be more specific about what facilities you are expecting to find. You should also mention what OS you
>>> typically use and how you normally start R.
>>>>>
>>>>> On October 6, 2018 4:48:44 AM PDT, Olivier GIVAUDAN <olivier_givaudan at hotmail.com> wrote:
>>>>>> Dear R users,
>>>>>>
>>>>>> I would like to work with genuine relative paths in R for obvious
>>>>>> reasons: if I move all my scripts related to some project as a whole to
>>>>>> another location of my computer or someone else's computer, if want my
>>>>>> scripts to continue to run seamlessly.
>>>>>>
>>>>>> What I mean by "genuine" is that it should not be necessary to hardcode
>>>>>> one single absolute path (making the code obviously not "portable" - to
>>>>>> another place - anymore).
>>>>>>
>>>>>> For the time being, I found the following related posts, unfortunately
>>>>>> never conclusive or even somewhat off-topic:
>>>>>> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
>>>>>> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
>>>>>> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
>>>>>>
>>>>>> So I found 2 workarounds, more or less satisfactory:
>>>>>>
>>>>>>
>>>>>> 1.  Either create a variable "ScriptPath" in the first lines of each of
>>>>>> my R scripts and run a batch (or shell, etc.) to replace every single
>>>>>> occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R
>>>>>> script]" in all the R scripts located in the folder (and possibly
>>>>>> subfolders) of the batch file.
>>>>>> 2.  Or create an R project file with RStudio and use the package "here"
>>>>>> to get the absolute path of the R project file and put all the R
>>>>>> scripts related to this project in the R project directory, as often
>>>>>> recommended.
>>>>>>
>>>>>> But I am really wondering why R doesn't have (please tell me if I'm
>>>>>> wrong) this basic feature as many other languages have it (batch,
>>>>>> shell, C, LaTeX, SAS with macro-variables, etc.)?
>>>>>> Do you know whether the language will have this kind of function in a
>>>>>> near future? What are the obstacles / what is the reasoning for not
>>>>>> having it already?
>>>>>>
>>>>>> Do you know other workarounds?
>>>>>>
>>>>>> Best regards,
>>>>>>
>>>>>> Olivier
>>>>>>
>>>>>>         [[alternative HTML version deleted]]
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>> PLEASE do read the posting guide
>>>>>> http://www.R-project.org/posting-guide.html
>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>
>>>>> --
>>>>> Sent from my phone. Please excuse my brevity.
>>>>>
>>>>>         [[alternative HTML version deleted]]
>>>>>
>>>>>
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>
>>>
>>>
>>
>> ---------------------------------------------------------------------------
>> Jeff Newmiller                        The     .....       .....  Go Live...
>> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
>>                                         Live:   OO#.. Dead: OO#..  Playing
>> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
>> /Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
>> ---------------------------------------------------------------------------
>>
>>        [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>


	[[alternative HTML version deleted]]


From olivier_giv@ud@n @ending from hotm@il@com  Wed Oct 10 21:55:33 2018
From: olivier_giv@ud@n @ending from hotm@il@com (Olivier GIVAUDAN)
Date: Wed, 10 Oct 2018 19:55:33 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <CAF8bMcY-nF22Z0jOavfTKu7rc2L55x++N2XTUUjMe3+=b3FFhw@mail.gmail.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <EF096B6D-D167-402E-A1BB-9310D60E6F64@dcn.davis.ca.us>
 <VI1PR0202MB33571A964A191D165B3BF422F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <292ca297-27e3-162b-e525-fabc4bb4554c@kogentum.hu>
 <VI1PR0202MB3357E9066FF1527BAC014784F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <dbde4f15-caa6-dc62-3a10-e804cc81671a@kogentum.hu>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <CAF8bMcY-nF22Z0jOavfTKu7rc2L55x++N2XTUUjMe3+=b3FFhw@mail.gmail.com>
Message-ID: <DB3PR0202MB3355EA3AA237D8ECD4A1271BF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>

To be able to change easily, cleanly and automatically the working directory and thus to work with relative paths in the close neighbourhood of your R files.
________________________________
De : William Dunlap <wdunlap at tibco.com>
Envoy? : mercredi 10 octobre 2018 15:25
? : Olivier GIVAUDAN
Cc : Duncan Murdoch; Jeff Newmiller; r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

I am curious about why it is desirable for a script to know where in the file system it is.  Is it because you have a set of scripts invoking each other?  If so, the best route it to convert the scripts into functions and put them into a package.  Functions do know which package they live in and they "prefer" to call other functions in their own package (or other packages which they have declared).

Or is there some other reason?


Bill Dunlap
TIBCO Software
wdunlap tibco.com<http://tibco.com>

On Wed, Oct 10, 2018 at 8:18 AM, Olivier GIVAUDAN <olivier_givaudan at hotmail.com<mailto:olivier_givaudan at hotmail.com>> wrote:
Hi Duncan,

Yes, if you need to display the content of $PWD you obviously need to type 'echo' before this variable.

It prints the user's working directory if run from a terminal but if run from a bash file it prints the working directory of the script.
At least for me (I am running on the last version of Ubuntu)...

Best regards,

Olivier
________________________________
De : Duncan Murdoch <murdoch.duncan at gmail.com<mailto:murdoch.duncan at gmail.com>>
Envoy? : mercredi 10 octobre 2018 14:51
? : Olivier GIVAUDAN; Jeff Newmiller
Cc : r-help at r-project.org<mailto:r-help at r-project.org>
Objet : Re: [R] Genuine relative paths with R

On 10/10/2018 10:37 AM, Olivier GIVAUDAN wrote:
> Hi Jeff,
> ?
>> That is, there is not always a file in a particular directory even involved in the executing code.??
> ?
> True. I'm only asking in the case where some R code is run from an R file. This function 'MyOwnPath()' (say) should only work (i.e. return a useful result) in this case.?
> ?
>> The R interpreter does not make assumptions about where the code it is running came from.?
> ?
> That's precisely the reproach I have in case the code comes from a file.?
> ?
>> You also keep referring to "this feature" being in many languages, though you seem to be mistaken about most of them...?
> ?
> 'Most of them' is largely exaggerated (plus I corrected myself): I only mixed between the 'cd' variable / command in Windows and Linux shells (you would certainly agree it's a bit vicious).?
> ?
>> $PWD is the same as getwd()?
> ?
> Wrong. As I already said, if I create an R script located somewhere on my computer with the only line 'getwd()' and run this script, I won't get the directory of this R script, contrary to a shell file with the only line '$PWD'.?

What system are you talking about?  On Unix-alikes, you'd need an "echo"
ahead of that, and it would print the user's working directory, not the
working directory of the script.

Duncan Murdoch

> ?
>> __FILE__ in C relates to the source code directory that is usually not where the executable is ?located and may not even exist on the computer it is running on?
> ?
> Yes, and? What is the issue here? So '__FILE__' does the job. Invoking '__FILE__' in a .C file (I never said in its related executable) will return the absolute path of this C source file.?
> '__DIR__' in PHP also does the job. No to forget the good old VBA (Excel in this case) 'ActiveWorkbook.Path'.?
>
> Thank you for the 2 references you provided.
> However it seems that some manual settings are still required to be able to use Rscript.
> But I like the solution of the .RData file: I simply created an empty .RData file at the root of my project and by double-clicking on this file (as you said), the R GUI opens and 'getwd()' returns the path of this .RData file. It seems to be a good alternative to .Rproj file to be opened with RStudio.
> ?
>> However, by far the best approach is to teach your users to fish... if you give them an RStudio project directory they can double-click on the .Rproj ?file to set the current directory and enter the world of R.??
> ?
> Yes, using an .Rproj file to be opened with RStudio also seems to me to be a reasonable solution (the one I chose until now), although it is still a workaround and requires RStudio.?
> Actually in this case, the package 'here'? I previously mentioned is useless to get the current working directory of the project as 'When a project is opened within RStudio the following actions are taken: [...] The current working directory is set to the project directory.', as stated on this page: https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects.
> So 'getwd()' returns exactly the same as 'here()' does.
>
> Best regards,?
> ?
> Olivier
>
> ________________________________
> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us<mailto:jdnewmil at dcn.davis.ca.us>>
> Envoy? : dimanche 7 octobre 2018 20:48
> ? : Olivier GIVAUDAN
> Cc : D?nes T?th; r-help at r-project.org<mailto:r-help at r-project.org>
> Objet : RE: [R] Genuine relative paths with R
>
> On Sun, 7 Oct 2018, Olivier GIVAUDAN wrote:
>
>> Hello Denes,
>>
>>> Yes, the path to the "root" folder of your project. You seem to have a
>> really esoteric context if you want to run an R script without knowing
>> its path in the file system.
>>
>> I don't have any esoteric context: I'm just looking for the most generic, automatic and reproducible solution.
>> Of course you always know where an R script is located, nevertheless it doesn't imply you want to manually write its path in this
>> R script. The issue is to have to hardcode an absolute path: I don't want that.
>>
>>> Because it is extremely rare that someone - who uses R for what it is
>> worth and in a manner how R is supposed to be used - actually needs such
>> a function.
>>
>
>> First, the fact that it is rare doesn't mean this need is not legitimate
>> and relevant: it is needed to make R projects fully movable (i.e.
>> wherever you want). Second why a vast majority of languages does have
>> this feature and not R? Why is it useful in these languages and not in
>> R?
>
> The R interpreter does not make assumptions about where the code it is
> running came from. You might be running it by using the source() function,
> or by using the Rscript program, or by R CMD BATCH, or using eval() on
> code you pasted together in an R function, or as byte-compiled code loaded
> from an RData file. That is, there is not always a file in a particular
> directory even involved in the executing code.
>
> You also keep referring to "this feature" being in many languages, though
> you seem to be mistaken about most of them... in fact, they, too, know NOT
> where the script is but where the current directory is ($PWD is the same
> as getwd()) or where the compilation occurred (__FILE__ in C relates to
> the source code directory that is usually not where the executable is
> located and may not even exist on the computer it is running on).
>
> I have already pointed out that the solution is to let the OS set the
> current directory. If you want the user to have access to R independent of
> your code, the easiest way to leave them in Rgui after your code is done
> is to use save.image() to create a "myApp.RData" file which can be
> double-clicked [1]. The double-clicking action by default (as defined by
> the installation of R) causes the operating system to set the current
> directory to the one containing the file you double-clicked on and then
> executes the Rgui program.
>
> If you don't want the user to interact with your session, you can use the
> Rscript executable (also mentioned briefly at the bottom of [1]). In both
> cases, the user has (unknowingly) set the current directory before running
> your code, and there is no need to encode where the script is or was
> inside the script.
>
> You can also create a windows shortcut to invoke Rscript yourself by
> bootstrapping the RData file and invoking the
> R.utils::createWindowsShortcut() [2] function.
>
> However, by far the best approach is to teach your users to fish... if you
> give them an RStudio project directory they can double-click on the .Rproj
> file to set the current directory and enter the world of R.
>
> [1] https://www.r-bloggers.com/look-ma-no-typing-autorunning-code-on-r-startup/
> [2] https://cran.r-project.org/web/packages/R.utils/R.utils.pdf
>
> End comment.
>
>> Best regards,
>>
>> Olivier
>>
>> _________________________________________________________________________________________________________________________________
>> De : D?nes T?th <toth.denes at kogentum.hu<mailto:toth.denes at kogentum.hu>>
>> Envoy? : samedi 6 octobre 2018 23:36
>> ? : Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org<mailto:r-help at r-project.org>
>> Objet : Re: [R] Genuine relative paths with R
>> Hi Olivier,
>>
>>
>> On 10/07/2018 01:13 AM, Olivier GIVAUDAN wrote:
>>> Hi Denes,
>>>
>>> Thank you for the possibility you shared: unfortunately it still uses
>>> one hardcoded absolute path which I want to avoid.
>>
>> Yes, the path to the "root" folder of your project. You seem to have a
>> really esoteric context if you want to run an R script without knowing
>> its path in the file system.
>>
>>>
>>> I just think that the solutions suggested are too complicated for my
>>> simple need.
>>>
>>> The root cause being that R doesn't seem to have the Windows batch
>>> equivalent of cd, or bash equivalent of $PWD, or PHP equivalent of __DIR__.
>>> Hence the workarounds we are discussing.
>>>
>>> And finally we go back to my initial question: if such a function
>>> doesn't exist in R, what are the reasons?
>>
>> Because it is extremely rare that someone - who uses R for what it is
>> worth and in a manner how R is supposed to be used - actually needs such
>> a function.
>>
>> Best,
>> Denes
>>
>>
>>
>>>
>>> Best regards,
>>>
>>> Olivier
>>> ------------------------------------------------------------------------
>>> *De :* D?nes T?th <toth.denes at kogentum.hu<mailto:toth.denes at kogentum.hu>>
>>> *Envoy? :* samedi 6 octobre 2018 23:05
>>> *?:* Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org<mailto:r-help at r-project.org>
>>> *Objet :* Re: [R] Genuine relative paths with R
>>> Hi Olivier,
>>>
>>> I really think that Ista and Jeff gave you plenty of useful options how
>>> you can avoid using absolute paths.
>>>
>>> One more possibility: you can use `source()` with the chdir = TRUE
>>> argument (see ?source). If you have a master script which sources other
>>> files which are located in a fixed hierarchy relative to the location of
>>> the master script, the only time when you have to use an absolute path
>>> is when you source your master script, e.g.:
>>> source("/my/path/to/master.R", chdir = TRUE)
>>>
>>> Inside the master script, you can then source the other scripts by
>>> relative paths, define your 'data' folders relative to the master script
>>> and let the other scripts use those data paths, etc.
>>>
>>> Best,
>>> Denes
>>>
>>>
>>> On 10/06/2018 11:36 PM, Olivier GIVAUDAN wrote:
>>>> Hi Jeff,
>>>>
>>>> Thanks for sharing your workaround.
>>>>
>>>> I guess my last answer to Ista answers your question as well.
>>>>
>>>> To me this function (an equivalent of 'cd', say) should be platform-independent.
>>>>
>>>> Best regards,
>>>>
>>>> Olivier
>>>>
>>>> ________________________________
>>>> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us<mailto:jdnewmil at dcn.davis.ca.us>>
>>>> Envoy??? : samedi 6 octobre 2018 19:31
>>>> ??? : r-help at r-project.org<mailto:r-help at r-project.org>; Olivier GIVAUDAN; r-help at r-project.org<mailto:r-help at r-project.org>
>>>> Objet : Re: [R] Genuine relative paths with R
>>>>
>>>> I stopped using hardcoded absolute paths inside R scripts years ago, and I suspect that is fairly common practice. That is, I
>> almost never enter a path starting with "/" or "c:/" in an R script.
>>>>
>>>> The key concession you have to make is to start your R session in your working directory using OS-specific mechanisms, and
>> then reference your code and data relative to that directory. RStudio project files offer one mechanism for doing this; using CD
>> from  the OS command line is another, and using the file-browser
>>> double-click mechanism on .RData files is another (though I prefer to
>>> avoid that these days due to potential global environment contamination).
>>>>
>>>> Perhaps you can be more specific about what facilities you are expecting to find. You should also mention what OS you
>> typically use and how you normally start R.
>>>>
>>>> On October 6, 2018 4:48:44 AM PDT, Olivier GIVAUDAN <olivier_givaudan at hotmail.com<mailto:olivier_givaudan at hotmail.com>> wrote:
>>>>> Dear R users,
>>>>>
>>>>> I would like to work with genuine relative paths in R for obvious
>>>>> reasons: if I move all my scripts related to some project as a whole to
>>>>> another location of my computer or someone else's computer, if want my
>>>>> scripts to continue to run seamlessly.
>>>>>
>>>>> What I mean by "genuine" is that it should not be necessary to hardcode
>>>>> one single absolute path (making the code obviously not "portable" - to
>>>>> another place - anymore).
>>>>>
>>>>> For the time being, I found the following related posts, unfortunately
>>>>> never conclusive or even somewhat off-topic:
>>>>> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
>>>>> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
>>>>> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
>>>>>
>>>>> So I found 2 workarounds, more or less satisfactory:
>>>>>
>>>>>
>>>>> 1.  Either create a variable "ScriptPath" in the first lines of each of
>>>>> my R scripts and run a batch (or shell, etc.) to replace every single
>>>>> occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R
>>>>> script]" in all the R scripts located in the folder (and possibly
>>>>> subfolders) of the batch file.
>>>>> 2.  Or create an R project file with RStudio and use the package "here"
>>>>> to get the absolute path of the R project file and put all the R
>>>>> scripts related to this project in the R project directory, as often
>>>>> recommended.
>>>>>
>>>>> But I am really wondering why R doesn't have (please tell me if I'm
>>>>> wrong) this basic feature as many other languages have it (batch,
>>>>> shell, C, LaTeX, SAS with macro-variables, etc.)?
>>>>> Do you know whether the language will have this kind of function in a
>>>>> near future? What are the obstacles / what is the reasoning for not
>>>>> having it already?
>>>>>
>>>>> Do you know other workarounds?
>>>>>
>>>>> Best regards,
>>>>>
>>>>> Olivier
>>>>>
>>>>>         [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide
>>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>> --
>>>> Sent from my phone. Please excuse my brevity.
>>>>
>>>>         [[alternative HTML version deleted]]
>>>>
>>>>
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>
>>
>
> ---------------------------------------------------------------------------
> Jeff Newmiller                        The     .....       .....  Go Live...
> DCN:<jdnewmil at dcn.davis.ca.us<mailto:jdnewmil at dcn.davis.ca.us>>        Basics: ##.#.       ##.#.  Live Go...
>                                         Live:   OO#.. Dead: OO#..  Playing
> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
> /Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
> ---------------------------------------------------------------------------
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From olivier_giv@ud@n @ending from hotm@il@com  Wed Oct 10 22:13:09 2018
From: olivier_giv@ud@n @ending from hotm@il@com (Olivier GIVAUDAN)
Date: Wed, 10 Oct 2018 20:13:09 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <alpine.DEB.2.21.1810101044310.3154@luke-Latitude-7480>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <60714a3e-2ef5-5563-7dcc-eb4965f966d4@uke.de>
 <VI1PR0202MB3357ECAFF18BC7D7DD83E11FF5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <alpine.DEB.2.21.1810101044310.3154@luke-Latitude-7480>
Message-ID: <DB3PR0202MB3355857E994DE5163D17B600F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>

Thank you, Luke.

Unfortunately I don't use Rscript (it is not allowed to run shell scripts on my professional computer).

Best regards,

Olivier
________________________________
De : Tierney, Luke <luke-tierney at uiowa.edu>
Envoy? : mercredi 10 octobre 2018 15:48
? : Olivier GIVAUDAN
Cc : Eik Vettorazzi; r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

If you are always running your main script as 'Rscript myscript.R'
then your file argument will appear as '--file=myscript.R' in
commandArgs(). So you can use something like

scriptFile <- function()
{
     pat <- "^--file="
     args <- commandArgs()
     file <- args[grepl(pat, args, args)]
     normalizePath(sub(pat, "", file))
}

Then scriptFile() will give you something to work with.

Best,

luke



On Wed, 10 Oct 2018, Olivier GIVAUDAN wrote:

> Dear Eik,
>
> Thank you for your message.
>
> Yes, I already got to know this package and this discussion (while I found the 'here' package). But thanks.
>
> Best regards,
>
> Olivier
> ________________________________
> De : Eik Vettorazzi <E.Vettorazzi at uke.de>
> Envoy??? : lundi 8 octobre 2018 11:30
> ??? : Olivier GIVAUDAN; r-help at r-project.org
> Objet : Re: [R] Genuine relative paths with R
>
> Dear Olivier,
> you may find the rprojroot package useful, see
> https://github.com/r-lib/rprojroot
>
> and a discussion
>
> https://gist.github.com/jennybc/362f52446fe1ebc4c49f#file-2014-10-12_stop-working-directory-insanity-md
>
> Cheers
>
> Am 06.10.2018 um 13:48 schrieb Olivier GIVAUDAN:
>> Dear R users,
>>
>> I would like to work with genuine relative paths in R for obvious reasons: if I move all my scripts related to some project as a whole to another location of my computer or someone else's computer, if want my scripts to continue to run seamlessly.
>>
>> What I mean by "genuine" is that it should not be necessary to hardcode one single absolute path (making the code obviously not "portable" - to another place - anymore).
>>
>> For the time being, I found the following related posts, unfortunately never conclusive or even somewhat off-topic:
>> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
>> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
>> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
>>
>> So I found 2 workarounds, more or less satisfactory:
>>
>>
>>    1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.
>>    2.  Or create an R project file with RStudio and use the package "here" to get the absolute path of the R project file and put all the R scripts related to this project in the R project directory, as often recommended.
>>
>> But I am really wondering why R doesn't have (please tell me if I'm wrong) this basic feature as many other languages have it (batch, shell, C, LaTeX, SAS with macro-variables, etc.)?
>> Do you know whether the language will have this kind of function in a near future? What are the obstacles / what is the reasoning for not having it already?
>>
>> Do you know other workarounds?
>>
>> Best regards,
>>
>> Olivier
>>
>>        [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
> --
> Eik Vettorazzi
>
> Department of Medical Biometry and Epidemiology
> University Medical Center Hamburg-Eppendorf
>
> Martinistrasse 52
> building W 34
> 20246 Hamburg
>
> Phone: +49 (0) 40 7410 - 58243
> Fax:   +49 (0) 40 7410 - 57790
> Web: www.uke.de/imbe<http://www.uke.de/imbe>
> --
>
> _____________________________________________________________________
>
> Universit???tsklinikum Hamburg-Eppendorf; K???rperschaft des ???ffentlichen Rechts; Gerichtsstand: Hamburg | www.uke.de
> Vorstandsmitglieder: Prof. Dr. Burkhard G???ke (Vorsitzender), Prof. Dr. Dr. Uwe Koch-Gromus, Joachim Pr???l???, Martina Saurin (komm.)
> _____________________________________________________________________
>
> SAVE PAPER - THINK BEFORE PRINTING
>
>        [[alternative HTML version deleted]]
>
>

--
Luke Tierney
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:   luke-tierney at uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu

	[[alternative HTML version deleted]]


From bgunter@4567 @ending from gm@il@com  Wed Oct 10 22:15:12 2018
From: bgunter@4567 @ending from gm@il@com (Bert Gunter)
Date: Wed, 10 Oct 2018 13:15:12 -0700
Subject: [R] Code "tags"
In-Reply-To: <CAA0F9kW1SyLe_PnYnSoeVWcdRJswX7MF1YxrxrG7Vgngn_S=Ww@mail.gmail.com>
References: <CAA0F9kW1SyLe_PnYnSoeVWcdRJswX7MF1YxrxrG7Vgngn_S=Ww@mail.gmail.com>
Message-ID: <CAGxFJbT0p+=F_NRmswV03bo9YWgUdqTaqyB7qUhWcnNNY_CW1A@mail.gmail.com>

"get organized around R programming" is rather vague.  Nor do I know what
you mean by "tagging" code snippets.

A standard answer would be to write your "code" as documented functions in
a package (e.g. "LeslieMisc"). RStudio -- a wholly separate software
product -- has various tools to that may also be relevant. RMarkdown allows
you to write documents in which you embed executable R code, which is
useful for producing "vignettes" to illustrate how code works. Roxygen is
useful for producing package docs with a minimum of pain. Any of these --
and others, like just producing inline comments -- may be useful.

-- Bert



On Wed, Oct 10, 2018 at 12:43 PM Leslie Rutkowski <
leslie.rutkowski at gmail.com> wrote:

> Hi all,
>
> I'm trying to get organized about my R programming and I'm looking for a
> way to "tag" snippets of handy code that I go back to time and again. At
> the moment, I just plop .R files into a folder and rely on the file name to
> guide me. In desperation, I've taken to saving the same chunk as multiple
> .R files with different "tags" (e.g. "Loops with titles.R" = "CLT
> example.R").
>
> Any tips would be appreciated.
>
> Thanks,
> Leslie
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @ending from gm@il@com  Wed Oct 10 22:17:49 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Wed, 10 Oct 2018 16:17:49 -0400
Subject: [R] Genuine relative paths with R
In-Reply-To: <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <EF096B6D-D167-402E-A1BB-9310D60E6F64@dcn.davis.ca.us>
 <VI1PR0202MB33571A964A191D165B3BF422F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <292ca297-27e3-162b-e525-fabc4bb4554c@kogentum.hu>
 <VI1PR0202MB3357E9066FF1527BAC014784F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <dbde4f15-caa6-dc62-3a10-e804cc81671a@kogentum.hu>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
Message-ID: <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>

On 10/10/2018 3:51 PM, Olivier GIVAUDAN wrote:
> Well, no idea...
> 
> I just created a file 'TestPWD', made it executable, inserted in it 
> these lines and moved the file in various places:
> 
> #!/bin/bash
> 
> echo $PWD
> read -p ""

When I execute that, it prints my working directory.  Doesn't matter 
where the TestPWD file is.  If I put it in directory "foo", and change 
to foo's parent, then

   foo/TestPWD

prints the name of the parent directory, not the foo directory.  If I 
then add foo to the PATH, and run

   TestPWD

I get the same thing.  I find it unbelievable that you are seeing 
anything different from that on a Unix-alike.

Duncan Muroch


> ------------------------------------------------------------------------
> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Envoy? :* mercredi 10 octobre 2018 15:20
> *? :* Olivier GIVAUDAN; Jeff Newmiller
> *Cc?:* r-help at r-project.org
> *Objet :* Re: [R] Genuine relative paths with R
> On 10/10/2018 11:18 AM, Olivier GIVAUDAN wrote:
>> Hi Duncan,
>> 
>> Yes, if you need to display the content of $PWD you obviously need to 
>> type 'echo' before this variable.
>> 
>> It prints the user's working directory if run from a terminal but if run 
>> from a bash file it prints the working directory of the script.
>> At least for me (I am running on the last version of Ubuntu)...
> 
> Not for me.? Always prints the user's working directory.
> 
> Duncan Murdoch
> 
> 
>> 
>> Best regards,
>> 
>> Olivier
>> ------------------------------------------------------------------------
>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>> *Envoy? :* mercredi 10 octobre 2018 14:51
>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>> *Cc?:* r-help at r-project.org
>> *Objet :* Re: [R] Genuine relative paths with R
>> On 10/10/2018 10:37 AM, Olivier GIVAUDAN wrote:
>>> Hi Jeff,
>>> ?
>>>> That is, there is not always a file in a particular directory even involved in the executing code.??
>>> ?
>>> True. I'm only asking in the case where some R code is run from an R file. This function 'MyOwnPath()' (say) should only work (i.e. return a useful result) in this case.?
>>> ?
>>>> The R interpreter does not make assumptions about where the code it is running came from.?
>>> ?
>>> That's precisely the reproach I have in case the code comes from a file.?
>>> ?
>>>> You also keep referring to "this feature" being in many languages, though you seem to be mistaken about most of them...?
>>> ?
>>> 'Most of them' is largely exaggerated (plus I corrected myself): I only mixed between the 'cd' variable / command in Windows and Linux shells (you would certainly agree it's a bit vicious).?
>>> ?
>>>> $PWD is the same as getwd()?
>>> ?
>>> Wrong. As I already said, if I create an R script located somewhere on my computer with the only line 'getwd()' and run this script, I won't get the directory of this R script, contrary to a shell file with the only line '$PWD'.?
>> 
>> What system are you talking about?? On Unix-alikes, you'd need an "echo"
>> ahead of that, and it would print the user's working directory, not the
>> working directory of the script.
>> 
>> Duncan Murdoch
>> 
>>> ?
>>>> __FILE__ in C relates to the source code directory that is usually not where the executable is ?located and may not even exist on the computer it is running on?
>>> ?
>>> Yes, and? What is the issue here? So '__FILE__' does the job. Invoking '__FILE__' in a .C file (I never said in its related executable) will return the absolute path of this C source file.?
>>> '__DIR__' in PHP also does the job. No to forget the good old VBA (Excel in this case) 'ActiveWorkbook.Path'.?
>>> 
>>> Thank you for the 2 references you provided.
>>> However it seems that some manual settings are still required to be able to use Rscript.
>>> But I like the solution of the .RData file: I simply created an empty .RData file at the root of my project and by double-clicking on this file (as you said), the R GUI opens and 'getwd()' returns the path of this .RData file. It seems to be a good alternative to .Rproj file to be opened with RStudio.
>>> ?
>>>> However, by far the best approach is to teach your users to fish... if you give them an RStudio project directory they can double-click on the .Rproj ?file to set the current directory and enter the world of R.??
>>> ?
>>> Yes, using an .Rproj file to be opened with RStudio also seems to me to be a reasonable solution (the one I chose until now), although it is still a workaround and requires RStudio.?
>>> Actually in this case, the package 'here'? I previously mentioned is useless to get the current working directory of the project as 'When a project is opened within RStudio the following actions are taken: [...] The current working directory is set to the project directory.', as stated on this page:
>> https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects.
>>> So 'getwd()' returns exactly the same as 'here()' does.
>>> 
>>> Best regards,?
>>> ?
>>> Olivier
>>> 
>>> ________________________________
>>> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>>> Envoy? : dimanche 7 octobre 2018 20:48
>>> ? : Olivier GIVAUDAN
>>> Cc : D?nes T?th; r-help at r-project.org
>>> Objet : RE: [R] Genuine relative paths with R
>>> 
>>> On Sun, 7 Oct 2018, Olivier GIVAUDAN wrote:
>>> 
>>>> Hello Denes,
>>>>
>>>>> Yes, the path to the "root" folder of your project. You seem to have a
>>>> really esoteric context if you want to run an R script without knowing
>>>> its path in the file system.
>>>>
>>>> I don't have any esoteric context: I'm just looking for the most generic, automatic and reproducible solution.
>>>> Of course you always know where an R script is located, nevertheless it doesn't imply you want to manually write its path in this
>>>> R script. The issue is to have to hardcode an absolute path: I don't want that.
>>>>
>>>>> Because it is extremely rare that someone - who uses R for what it is
>>>> worth and in a manner how R is supposed to be used - actually needs such
>>>> a function.
>>>>
>>> 
>>>> First, the fact that it is rare doesn't mean this need is not legitimate
>>>> and relevant: it is needed to make R projects fully movable (i.e.
>>>> wherever you want). Second why a vast majority of languages does have
>>>> this feature and not R? Why is it useful in these languages and not in
>>>> R?
>>> 
>>> The R interpreter does not make assumptions about where the code it is
>>> running came from. You might be running it by using the source() function,
>>> or by using the Rscript program, or by R CMD BATCH, or using eval() on
>>> code you pasted together in an R function, or as byte-compiled code loaded
>>> from an RData file. That is, there is not always a file in a particular
>>> directory even involved in the executing code.
>>> 
>>> You also keep referring to "this feature" being in many languages, though
>>> you seem to be mistaken about most of them... in fact, they, too, know NOT
>>> where the script is but where the current directory is ($PWD is the same
>>> as getwd()) or where the compilation occurred (__FILE__ in C relates to
>>> the source code directory that is usually not where the executable is
>>> located and may not even exist on the computer it is running on).
>>> 
>>> I have already pointed out that the solution is to let the OS set the
>>> current directory. If you want the user to have access to R independent of
>>> your code, the easiest way to leave them in Rgui after your code is done
>>> is to use save.image() to create a "myApp.RData" file which can be
>>> double-clicked [1]. The double-clicking action by default (as defined by
>>> the installation of R) causes the operating system to set the current
>>> directory to the one containing the file you double-clicked on and then
>>> executes the Rgui program.
>>> 
>>> If you don't want the user to interact with your session, you can use the
>>> Rscript executable (also mentioned briefly at the bottom of [1]). In both
>>> cases, the user has (unknowingly) set the current directory before running
>>> your code, and there is no need to encode where the script is or was
>>> inside the script.
>>> 
>>> You can also create a windows shortcut to invoke Rscript yourself by
>>> bootstrapping the RData file and invoking the
>>> R.utils::createWindowsShortcut() [2] function.
>>> 
>>> However, by far the best approach is to teach your users to fish... if you
>>> give them an RStudio project directory they can double-click on the .Rproj
>>> file to set the current directory and enter the world of R.
>>> 
>>> [1] https://www.r-bloggers.com/look-ma-no-typing-autorunning-code-on-r-startup/
>>> [2] https://cran.r-project.org/web/packages/R.utils/R.utils.pdf
>>> 
>>> End comment.
>>> 
>>>> Best regards,
>>>>
>>>> Olivier
>>>>
>>>> _________________________________________________________________________________________________________________________________
>>>> De : D?nes T?th <toth.denes at kogentum.hu>
>>>> Envoy? : samedi 6 octobre 2018 23:36
>>>> ? : Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
>>>> Objet : Re: [R] Genuine relative paths with R
>>>> Hi Olivier,
>>>>
>>>>
>>>> On 10/07/2018 01:13 AM, Olivier GIVAUDAN wrote:
>>>>> Hi Denes,
>>>>>
>>>>> Thank you for the possibility you shared: unfortunately it still uses
>>>>> one hardcoded absolute path which I want to avoid.
>>>>
>>>> Yes, the path to the "root" folder of your project. You seem to have a
>>>> really esoteric context if you want to run an R script without knowing
>>>> its path in the file system.
>>>>
>>>>>
>>>>> I just think that the solutions suggested are too complicated for my
>>>>> simple need.
>>>>>
>>>>> The root cause being that R doesn't seem to have the Windows batch
>>>>> equivalent of cd, or bash equivalent of $PWD, or PHP equivalent of __DIR__.
>>>>> Hence the workarounds we are discussing.
>>>>>
>>>>> And finally we go back to my initial question: if such a function
>>>>> doesn't exist in R, what are the reasons?
>>>>
>>>> Because it is extremely rare that someone - who uses R for what it is
>>>> worth and in a manner how R is supposed to be used - actually needs such
>>>> a function.
>>>>
>>>> Best,
>>>> Denes
>>>>
>>>>
>>>>
>>>>>
>>>>> Best regards,
>>>>>
>>>>> Olivier
>>>>> ------------------------------------------------------------------------
>>>>> *De :* D?nes T?th <toth.denes at kogentum.hu>
>>>>> *Envoy? :* samedi 6 octobre 2018 23:05
>>>>> *?:* Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
>>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>>> Hi Olivier,
>>>>>
>>>>> I really think that Ista and Jeff gave you plenty of useful options how
>>>>> you can avoid using absolute paths.
>>>>>
>>>>> One more possibility: you can use `source()` with the chdir = TRUE
>>>>> argument (see ?source). If you have a master script which sources other
>>>>> files which are located in a fixed hierarchy relative to the location of
>>>>> the master script, the only time when you have to use an absolute path
>>>>> is when you source your master script, e.g.:
>>>>> source("/my/path/to/master.R", chdir = TRUE)
>>>>>
>>>>> Inside the master script, you can then source the other scripts by
>>>>> relative paths, define your 'data' folders relative to the master script
>>>>> and let the other scripts use those data paths, etc.
>>>>>
>>>>> Best,
>>>>> Denes
>>>>>
>>>>>
>>>>> On 10/06/2018 11:36 PM, Olivier GIVAUDAN wrote:
>>>>>> Hi Jeff,
>>>>>>
>>>>>> Thanks for sharing your workaround.
>>>>>>
>>>>>> I guess my last answer to Ista answers your question as well.
>>>>>>
>>>>>> To me this function (an equivalent of 'cd', say) should be platform-independent.
>>>>>>
>>>>>> Best regards,
>>>>>>
>>>>>> Olivier
>>>>>>
>>>>>> ________________________________
>>>>>> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>>>>>> Envoy??? : samedi 6 octobre 2018 19:31
>>>>>> ??? : r-help at r-project.org; Olivier GIVAUDAN; r-help at r-project.org
>>>>>> Objet : Re: [R] Genuine relative paths with R
>>>>>>
>>>>>> I stopped using hardcoded absolute paths inside R scripts years ago, and I suspect that is fairly common practice. That is, I
>>>> almost never enter a path starting with "/" or "c:/" in an R script.
>>>>>>
>>>>>> The key concession you have to make is to start your R session in your working directory using OS-specific mechanisms, and
>>>> then reference your code and data relative to that directory. RStudio project files offer one mechanism for doing this; using CD
>>>> from? the OS command line is another, and using the file-browser
>>>>> double-click mechanism on .RData files is another (though I prefer to
>>>>> avoid that these days due to potential global environment contamination).
>>>>>>
>>>>>> Perhaps you can be more specific about what facilities you are expecting to find. You should also mention what OS you
>>>> typically use and how you normally start R.
>>>>>>
>>>>>> On October 6, 2018 4:48:44 AM PDT, Olivier GIVAUDAN <olivier_givaudan at hotmail.com> wrote:
>>>>>>> Dear R users,
>>>>>>>
>>>>>>> I would like to work with genuine relative paths in R for obvious
>>>>>>> reasons: if I move all my scripts related to some project as a whole to
>>>>>>> another location of my computer or someone else's computer, if want my
>>>>>>> scripts to continue to run seamlessly.
>>>>>>>
>>>>>>> What I mean by "genuine" is that it should not be necessary to hardcode
>>>>>>> one single absolute path (making the code obviously not "portable" - to
>>>>>>> another place - anymore).
>>>>>>>
>>>>>>> For the time being, I found the following related posts, unfortunately
>>>>>>> never conclusive or even somewhat off-topic:
>>>>>>> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
>>>>>>> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
>>>>>>> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
>>>>>>>
>>>>>>> So I found 2 workarounds, more or less satisfactory:
>>>>>>>
>>>>>>>
>>>>>>> 1.? Either create a variable "ScriptPath" in the first lines of each of
>>>>>>> my R scripts and run a batch (or shell, etc.) to replace every single
>>>>>>> occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R
>>>>>>> script]" in all the R scripts located in the folder (and possibly
>>>>>>> subfolders) of the batch file.
>>>>>>> 2.? Or create an R project file with RStudio and use the package "here"
>>>>>>> to get the absolute path of the R project file and put all the R
>>>>>>> scripts related to this project in the R project directory, as often
>>>>>>> recommended.
>>>>>>>
>>>>>>> But I am really wondering why R doesn't have (please tell me if I'm
>>>>>>> wrong) this basic feature as many other languages have it (batch,
>>>>>>> shell, C, LaTeX, SAS with macro-variables, etc.)?
>>>>>>> Do you know whether the language will have this kind of function in a
>>>>>>> near future? What are the obstacles / what is the reasoning for not
>>>>>>> having it already?
>>>>>>>
>>>>>>> Do you know other workarounds?
>>>>>>>
>>>>>>> Best regards,
>>>>>>>
>>>>>>> Olivier
>>>>>>>
>>>>>>>???????? [[alternative HTML version deleted]]
>>>>>>>
>>>>>>> ______________________________________________
>>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>> PLEASE do read the posting guide
>>>>>>> http://www.R-project.org/posting-guide.html
>>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>
>>>>>> --
>>>>>> Sent from my phone. Please excuse my brevity.
>>>>>>
>>>>>>???????? [[alternative HTML version deleted]]
>>>>>>
>>>>>>
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>
>>>>
>>>>
>>> 
>>> ---------------------------------------------------------------------------
>>> Jeff Newmiller??????????????????????? The???? .....?????? .....? Go Live...
>>> DCN:<jdnewmil at dcn.davis.ca.us>??????? Basics: ##.#.?????? ##.#.? Live Go...
>>>???????????????????????????????????????? Live:?? OO#.. Dead: OO#..? Playing
>>> Research Engineer (Solar/Batteries??????????? O.O#.?????? #.O#.? with
>>> /Software/Embedded Controllers)?????????????? .OO#.?????? .OO#.? rocks...1k
>>> ---------------------------------------------------------------------------
>>> 
>>>??????? [[alternative HTML version deleted]]
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>> 
>> 
>


From bgunter@4567 @ending from gm@il@com  Wed Oct 10 22:37:33 2018
From: bgunter@4567 @ending from gm@il@com (Bert Gunter)
Date: Wed, 10 Oct 2018 13:37:33 -0700
Subject: [R] Genuine relative paths with R
In-Reply-To: <VI1PR0202MB335744BC531D2F410931FEBFF5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <CAP01uR=FnwBZ=_iet5q0_tZQS4WZ0MjiiY_-kFr_KL9GFwL=ww@mail.gmail.com>
 <VI1PR0202MB335744BC531D2F410931FEBFF5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
Message-ID: <CAGxFJbSFz4iwMazvZvVP3JnSVmiAdkhdoLhcrwW2Mz76tZpjNQ@mail.gmail.com>

I haven't followed this discussion closely, so this may be offbase, but in
response to your point 2., note that you can set the working directory via
setwd() in your .Rprofile file. Of course, users can always determine the
working directory via invoking the getwd() function, so I'm not sure what
you mean here. However, as I said, if my comments are useless, please
ignore and do not waste time responding.

Cheers,
Bert



On Wed, Oct 10, 2018 at 6:53 AM Olivier GIVAUDAN <
olivier_givaudan at hotmail.com> wrote:

> Hi Gabor,
> ?
>
>   1.  By definition the relative path (I'm excluding the absolute path
> solution for obvious reasons) depends on the current working directory:
> What if my R script is not located along this current working directory? It
> won't work.?
>   2.  What should I write as an option in this .Rprofile file? An absolute
> path to the project's root? Plus I don't want the users to choose their
> working directory: this technicality should be kept hidden from them and be
> automatic.?
>
> Best regards,?
> ?
> Olivier
> ________________________________
> De : Gabor Grothendieck <ggrothendieck at gmail.com>
> Envoy? : samedi 6 octobre 2018 23:33
> ? : olivier_givaudan at hotmail.com; r-help at r-project.org
> Objet : Re: [R] Genuine relative paths with R
>
> 1. Assuming you are starting the script from within R, if you want to
> keep all the files used by the script together with the script itself
> then just source the script using the absolute or relative path to the
> script using source(..., chdir = TRUE) as shown below and the script
> will run in the directory containing the script. We used an absoluate
> path below but a relative path will work too.  In either case the
> script itself will not need to use absolute paths and it is portable
> to other machines.
>
>   source("/path/to/script.R", chdir = TRUE)
>
> If your script is on your PATH then this would work:
>
>   source(Sys.which("script.R"), chdir = TRUE)
>
> 2. Another approach is to define an R option, say root, using the R
> options() function to define the root directory of your project.  You
> can have a different R option for each project.  Place the options()
> statements to set these R options for your various projects in your
> .Rprofile, say, and in the script use:
>
>     root <- getOption("root", ".")
>
> to cause it to retrieve the value of the R option root if it is
> defined and use the current directory otherwise.  Use a different name
> for each project. If the user does not define the R option root it
> will be up to them to change directory first.  Again there will be no
> use of absolute paths in the script itself and it is portable to other
> machines.
>
> What is particularly convenient about this is that it documents where
> all the projects are on the  machine right in the .Rproject file so
> one always knows where they are.
>
> On Sat, Oct 6, 2018 at 8:25 AM Olivier GIVAUDAN
> <olivier_givaudan at hotmail.com> wrote:
> >> Dear R users,
> >
> > I would like to work with genuine relative paths in R for obvious
> reasons: if I move all my scripts related to some project as a whole to
> another location of my computer or someone else's computer, if want my
> scripts to continue to run seamlessly.
> >
> > What I mean by "genuine" is that it should not be necessary to hardcode
> one single absolute path (making the code obviously not "portable" - to
> another place - anymore).
> >
> > For the time being, I found the following related posts, unfortunately
> never conclusive or even somewhat off-topic:
> >
> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
> >
> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
> >
> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
> >
> > So I found 2 workarounds, more or less satisfactory:
> >
> >
> >   1.  Either create a variable "ScriptPath" in the first lines of each
> of my R scripts and run a batch (or shell, etc.) to replace every single
> occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R
> script]" in all the R scripts located in the folder (and possibly
> subfolders) of the batch file.
> >   2.  Or create an R project file with RStudio and use the package
> "here" to get the absolute path of the R project file and put all the R
> scripts related to this project in the R project directory, as often
> recommended.
> >
> > But I am really wondering why R doesn't have (please tell me if I'm
> wrong) this basic feature as many other languages have it (batch, shell, C,
> LaTeX, SAS with macro-variables, etc.)?
> > Do you know whether the language will have this kind of function in a
> near future? What are the obstacles / what is the reasoning for not having
> it already?
> >
> > Do you know other workarounds?
> >
> > Best regards,
> >
> > Olivier
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
>
>
> --
> Statistics & Software Consulting
> GKX Group, GKX Associates Inc.
> tel: 1-877-GKX-GROUP
> email: ggrothendieck at gmail.com
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From olivier_giv@ud@n @ending from hotm@il@com  Wed Oct 10 22:42:27 2018
From: olivier_giv@ud@n @ending from hotm@il@com (Olivier GIVAUDAN)
Date: Wed, 10 Oct 2018 20:42:27 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <EF096B6D-D167-402E-A1BB-9310D60E6F64@dcn.davis.ca.us>
 <VI1PR0202MB33571A964A191D165B3BF422F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <292ca297-27e3-162b-e525-fabc4bb4554c@kogentum.hu>
 <VI1PR0202MB3357E9066FF1527BAC014784F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <dbde4f15-caa6-dc62-3a10-e804cc81671a@kogentum.hu>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>,
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
Message-ID: <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>

Why are you not simply double-clicking on 'TestPWD' and choosing to execute the file (don't add anything)?
Are you executing the file from a terminal?
________________________________
De : Duncan Murdoch <murdoch.duncan at gmail.com>
Envoy? : mercredi 10 octobre 2018 20:17
? : Olivier GIVAUDAN; Jeff Newmiller
Cc : r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

On 10/10/2018 3:51 PM, Olivier GIVAUDAN wrote:
> Well, no idea...
>
> I just created a file 'TestPWD', made it executable, inserted in it
> these lines and moved the file in various places:
>
> #!/bin/bash
>
> echo $PWD
> read -p ""

When I execute that, it prints my working directory.  Doesn't matter
where the TestPWD file is.  If I put it in directory "foo", and change
to foo's parent, then

   foo/TestPWD

prints the name of the parent directory, not the foo directory.  If I
then add foo to the PATH, and run

   TestPWD

I get the same thing.  I find it unbelievable that you are seeing
anything different from that on a Unix-alike.

Duncan Muroch


> ------------------------------------------------------------------------
> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Envoy? :* mercredi 10 octobre 2018 15:20
> *? :* Olivier GIVAUDAN; Jeff Newmiller
> *Cc :* r-help at r-project.org
> *Objet :* Re: [R] Genuine relative paths with R
> On 10/10/2018 11:18 AM, Olivier GIVAUDAN wrote:
>> Hi Duncan,
>>
>> Yes, if you need to display the content of $PWD you obviously need to
>> type 'echo' before this variable.
>>
>> It prints the user's working directory if run from a terminal but if run
>> from a bash file it prints the working directory of the script.
>> At least for me (I am running on the last version of Ubuntu)...
>
> Not for me.  Always prints the user's working directory.
>
> Duncan Murdoch
>
>
>>
>> Best regards,
>>
>> Olivier
>> ------------------------------------------------------------------------
>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>> *Envoy? :* mercredi 10 octobre 2018 14:51
>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>> *Cc :* r-help at r-project.org
>> *Objet :* Re: [R] Genuine relative paths with R
>> On 10/10/2018 10:37 AM, Olivier GIVAUDAN wrote:
>>> Hi Jeff,
>>> ?
>>>> That is, there is not always a file in a particular directory even involved in the executing code.??
>>> ?
>>> True. I'm only asking in the case where some R code is run from an R file. This function 'MyOwnPath()' (say) should only work (i.e. return a useful result) in this case.?
>>> ?
>>>> The R interpreter does not make assumptions about where the code it is running came from.?
>>> ?
>>> That's precisely the reproach I have in case the code comes from a file.?
>>> ?
>>>> You also keep referring to "this feature" being in many languages, though you seem to be mistaken about most of them...?
>>> ?
>>> 'Most of them' is largely exaggerated (plus I corrected myself): I only mixed between the 'cd' variable / command in Windows and Linux shells (you would certainly agree it's a bit vicious).?
>>> ?
>>>> $PWD is the same as getwd()?
>>> ?
>>> Wrong. As I already said, if I create an R script located somewhere on my computer with the only line 'getwd()' and run this script, I won't get the directory of this R script, contrary to a shell file with the only line '$PWD'.?
>>
>> What system are you talking about?  On Unix-alikes, you'd need an "echo"
>> ahead of that, and it would print the user's working directory, not the
>> working directory of the script.
>>
>> Duncan Murdoch
>>
>>> ?
>>>> __FILE__ in C relates to the source code directory that is usually not where the executable is ?located and may not even exist on the computer it is running on?
>>> ?
>>> Yes, and? What is the issue here? So '__FILE__' does the job. Invoking '__FILE__' in a .C file (I never said in its related executable) will return the absolute path of this C source file.?
>>> '__DIR__' in PHP also does the job. No to forget the good old VBA (Excel in this case) 'ActiveWorkbook.Path'.?
>>>
>>> Thank you for the 2 references you provided.
>>> However it seems that some manual settings are still required to be able to use Rscript.
>>> But I like the solution of the .RData file: I simply created an empty .RData file at the root of my project and by double-clicking on this file (as you said), the R GUI opens and 'getwd()' returns the path of this .RData file. It seems to be a good alternative to .Rproj file to be opened with RStudio.
>>> ?
>>>> However, by far the best approach is to teach your users to fish... if you give them an RStudio project directory they can double-click on the .Rproj ?file to set the current directory and enter the world of R.??
>>> ?
>>> Yes, using an .Rproj file to be opened with RStudio also seems to me to be a reasonable solution (the one I chose until now), although it is still a workaround and requires RStudio.?
>>> Actually in this case, the package 'here'? I previously mentioned is useless to get the current working directory of the project as 'When a project is opened within RStudio the following actions are taken: [...] The current working directory is set to the project directory.', as stated on this page:
>> https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects.
>>> So 'getwd()' returns exactly the same as 'here()' does.
>>>
>>> Best regards,?
>>> ?
>>> Olivier
>>>
>>> ________________________________
>>> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>>> Envoy? : dimanche 7 octobre 2018 20:48
>>> ? : Olivier GIVAUDAN
>>> Cc : D?nes T?th; r-help at r-project.org
>>> Objet : RE: [R] Genuine relative paths with R
>>>
>>> On Sun, 7 Oct 2018, Olivier GIVAUDAN wrote:
>>>
>>>> Hello Denes,
>>>>
>>>>> Yes, the path to the "root" folder of your project. You seem to have a
>>>> really esoteric context if you want to run an R script without knowing
>>>> its path in the file system.
>>>>
>>>> I don't have any esoteric context: I'm just looking for the most generic, automatic and reproducible solution.
>>>> Of course you always know where an R script is located, nevertheless it doesn't imply you want to manually write its path in this
>>>> R script. The issue is to have to hardcode an absolute path: I don't want that.
>>>>
>>>>> Because it is extremely rare that someone - who uses R for what it is
>>>> worth and in a manner how R is supposed to be used - actually needs such
>>>> a function.
>>>>
>>>
>>>> First, the fact that it is rare doesn't mean this need is not legitimate
>>>> and relevant: it is needed to make R projects fully movable (i.e.
>>>> wherever you want). Second why a vast majority of languages does have
>>>> this feature and not R? Why is it useful in these languages and not in
>>>> R?
>>>
>>> The R interpreter does not make assumptions about where the code it is
>>> running came from. You might be running it by using the source() function,
>>> or by using the Rscript program, or by R CMD BATCH, or using eval() on
>>> code you pasted together in an R function, or as byte-compiled code loaded
>>> from an RData file. That is, there is not always a file in a particular
>>> directory even involved in the executing code.
>>>
>>> You also keep referring to "this feature" being in many languages, though
>>> you seem to be mistaken about most of them... in fact, they, too, know NOT
>>> where the script is but where the current directory is ($PWD is the same
>>> as getwd()) or where the compilation occurred (__FILE__ in C relates to
>>> the source code directory that is usually not where the executable is
>>> located and may not even exist on the computer it is running on).
>>>
>>> I have already pointed out that the solution is to let the OS set the
>>> current directory. If you want the user to have access to R independent of
>>> your code, the easiest way to leave them in Rgui after your code is done
>>> is to use save.image() to create a "myApp.RData" file which can be
>>> double-clicked [1]. The double-clicking action by default (as defined by
>>> the installation of R) causes the operating system to set the current
>>> directory to the one containing the file you double-clicked on and then
>>> executes the Rgui program.
>>>
>>> If you don't want the user to interact with your session, you can use the
>>> Rscript executable (also mentioned briefly at the bottom of [1]). In both
>>> cases, the user has (unknowingly) set the current directory before running
>>> your code, and there is no need to encode where the script is or was
>>> inside the script.
>>>
>>> You can also create a windows shortcut to invoke Rscript yourself by
>>> bootstrapping the RData file and invoking the
>>> R.utils::createWindowsShortcut() [2] function.
>>>
>>> However, by far the best approach is to teach your users to fish... if you
>>> give them an RStudio project directory they can double-click on the .Rproj
>>> file to set the current directory and enter the world of R.
>>>
>>> [1] https://www.r-bloggers.com/look-ma-no-typing-autorunning-code-on-r-startup/
>>> [2] https://cran.r-project.org/web/packages/R.utils/R.utils.pdf
>>>
>>> End comment.
>>>
>>>> Best regards,
>>>>
>>>> Olivier
>>>>
>>>> _________________________________________________________________________________________________________________________________
>>>> De : D?nes T?th <toth.denes at kogentum.hu>
>>>> Envoy? : samedi 6 octobre 2018 23:36
>>>> ? : Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
>>>> Objet : Re: [R] Genuine relative paths with R
>>>> Hi Olivier,
>>>>
>>>>
>>>> On 10/07/2018 01:13 AM, Olivier GIVAUDAN wrote:
>>>>> Hi Denes,
>>>>>
>>>>> Thank you for the possibility you shared: unfortunately it still uses
>>>>> one hardcoded absolute path which I want to avoid.
>>>>
>>>> Yes, the path to the "root" folder of your project. You seem to have a
>>>> really esoteric context if you want to run an R script without knowing
>>>> its path in the file system.
>>>>
>>>>>
>>>>> I just think that the solutions suggested are too complicated for my
>>>>> simple need.
>>>>>
>>>>> The root cause being that R doesn't seem to have the Windows batch
>>>>> equivalent of cd, or bash equivalent of $PWD, or PHP equivalent of __DIR__.
>>>>> Hence the workarounds we are discussing.
>>>>>
>>>>> And finally we go back to my initial question: if such a function
>>>>> doesn't exist in R, what are the reasons?
>>>>
>>>> Because it is extremely rare that someone - who uses R for what it is
>>>> worth and in a manner how R is supposed to be used - actually needs such
>>>> a function.
>>>>
>>>> Best,
>>>> Denes
>>>>
>>>>
>>>>
>>>>>
>>>>> Best regards,
>>>>>
>>>>> Olivier
>>>>> ------------------------------------------------------------------------
>>>>> *De :* D?nes T?th <toth.denes at kogentum.hu>
>>>>> *Envoy? :* samedi 6 octobre 2018 23:05
>>>>> *?:* Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
>>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>>> Hi Olivier,
>>>>>
>>>>> I really think that Ista and Jeff gave you plenty of useful options how
>>>>> you can avoid using absolute paths.
>>>>>
>>>>> One more possibility: you can use `source()` with the chdir = TRUE
>>>>> argument (see ?source). If you have a master script which sources other
>>>>> files which are located in a fixed hierarchy relative to the location of
>>>>> the master script, the only time when you have to use an absolute path
>>>>> is when you source your master script, e.g.:
>>>>> source("/my/path/to/master.R", chdir = TRUE)
>>>>>
>>>>> Inside the master script, you can then source the other scripts by
>>>>> relative paths, define your 'data' folders relative to the master script
>>>>> and let the other scripts use those data paths, etc.
>>>>>
>>>>> Best,
>>>>> Denes
>>>>>
>>>>>
>>>>> On 10/06/2018 11:36 PM, Olivier GIVAUDAN wrote:
>>>>>> Hi Jeff,
>>>>>>
>>>>>> Thanks for sharing your workaround.
>>>>>>
>>>>>> I guess my last answer to Ista answers your question as well.
>>>>>>
>>>>>> To me this function (an equivalent of 'cd', say) should be platform-independent.
>>>>>>
>>>>>> Best regards,
>>>>>>
>>>>>> Olivier
>>>>>>
>>>>>> ________________________________
>>>>>> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>>>>>> Envoy??? : samedi 6 octobre 2018 19:31
>>>>>> ??? : r-help at r-project.org; Olivier GIVAUDAN; r-help at r-project.org
>>>>>> Objet : Re: [R] Genuine relative paths with R
>>>>>>
>>>>>> I stopped using hardcoded absolute paths inside R scripts years ago, and I suspect that is fairly common practice. That is, I
>>>> almost never enter a path starting with "/" or "c:/" in an R script.
>>>>>>
>>>>>> The key concession you have to make is to start your R session in your working directory using OS-specific mechanisms, and
>>>> then reference your code and data relative to that directory. RStudio project files offer one mechanism for doing this; using CD
>>>> from  the OS command line is another, and using the file-browser
>>>>> double-click mechanism on .RData files is another (though I prefer to
>>>>> avoid that these days due to potential global environment contamination).
>>>>>>
>>>>>> Perhaps you can be more specific about what facilities you are expecting to find. You should also mention what OS you
>>>> typically use and how you normally start R.
>>>>>>
>>>>>> On October 6, 2018 4:48:44 AM PDT, Olivier GIVAUDAN <olivier_givaudan at hotmail.com> wrote:
>>>>>>> Dear R users,
>>>>>>>
>>>>>>> I would like to work with genuine relative paths in R for obvious
>>>>>>> reasons: if I move all my scripts related to some project as a whole to
>>>>>>> another location of my computer or someone else's computer, if want my
>>>>>>> scripts to continue to run seamlessly.
>>>>>>>
>>>>>>> What I mean by "genuine" is that it should not be necessary to hardcode
>>>>>>> one single absolute path (making the code obviously not "portable" - to
>>>>>>> another place - anymore).
>>>>>>>
>>>>>>> For the time being, I found the following related posts, unfortunately
>>>>>>> never conclusive or even somewhat off-topic:
>>>>>>> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
>>>>>>> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
>>>>>>> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
>>>>>>>
>>>>>>> So I found 2 workarounds, more or less satisfactory:
>>>>>>>
>>>>>>>
>>>>>>> 1.  Either create a variable "ScriptPath" in the first lines of each of
>>>>>>> my R scripts and run a batch (or shell, etc.) to replace every single
>>>>>>> occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R
>>>>>>> script]" in all the R scripts located in the folder (and possibly
>>>>>>> subfolders) of the batch file.
>>>>>>> 2.  Or create an R project file with RStudio and use the package "here"
>>>>>>> to get the absolute path of the R project file and put all the R
>>>>>>> scripts related to this project in the R project directory, as often
>>>>>>> recommended.
>>>>>>>
>>>>>>> But I am really wondering why R doesn't have (please tell me if I'm
>>>>>>> wrong) this basic feature as many other languages have it (batch,
>>>>>>> shell, C, LaTeX, SAS with macro-variables, etc.)?
>>>>>>> Do you know whether the language will have this kind of function in a
>>>>>>> near future? What are the obstacles / what is the reasoning for not
>>>>>>> having it already?
>>>>>>>
>>>>>>> Do you know other workarounds?
>>>>>>>
>>>>>>> Best regards,
>>>>>>>
>>>>>>> Olivier
>>>>>>>
>>>>>>>         [[alternative HTML version deleted]]
>>>>>>>
>>>>>>> ______________________________________________
>>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>> PLEASE do read the posting guide
>>>>>>> http://www.R-project.org/posting-guide.html
>>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>
>>>>>> --
>>>>>> Sent from my phone. Please excuse my brevity.
>>>>>>
>>>>>>         [[alternative HTML version deleted]]
>>>>>>
>>>>>>
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------------
>>> Jeff Newmiller                        The     .....       .....  Go Live...
>>> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
>>>                                         Live:   OO#.. Dead: OO#..  Playing
>>> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
>>> /Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
>>> ---------------------------------------------------------------------------
>>>
>>>        [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>


	[[alternative HTML version deleted]]


From murdoch@dunc@n @ending from gm@il@com  Wed Oct 10 22:54:30 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Wed, 10 Oct 2018 16:54:30 -0400
Subject: [R] Genuine relative paths with R
In-Reply-To: <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <292ca297-27e3-162b-e525-fabc4bb4554c@kogentum.hu>
 <VI1PR0202MB3357E9066FF1527BAC014784F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <dbde4f15-caa6-dc62-3a10-e804cc81671a@kogentum.hu>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
Message-ID: <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>

On 10/10/2018 4:42 PM, Olivier GIVAUDAN wrote:
> Why are you not simply double-clicking on 'TestPWD' and choosing to 
> execute the file (don't add anything)?
> Are you executing the file from a terminal?

Yes, I was executing the file from my terminal.  Otherwise I really have 
no idea what the "current directory" is in the Finder.   (I'm on a Mac. 
I just tried the click method; it printed my home directory, not the 
directory of the script.)

I don't know the name of your visual front end, but you are displaying 
the working directory that it sets when you click on TestPWD.  That will 
be different from the working directory that your user sees in the Terminal.

You can see what I saw if you run TestPWD from the Terminal.  It will 
print the current working directory, not the one where TestPWD happens 
to live.

If you want to do the same sort of thing in R, you could set up a script 
that calls R, and execute that in the way you executed TestPWD.  But in 
another message you said you aren't allowed to do that, so I think your 
best solution is the one offered by Bill Dunlap:  organize your files as 
an R package.  If you name your package "Olivier", then you can find all 
the files in it under the directory returned by

   system.file(".", package = "Olivier")

The package system is designed for R code, but you can put arbitrary 
files into a package:  just store them under the "inst" directory in 
your source.  When the package is installed, those files will be moved 
up one level, i.e.

Olivier/inst/foo

will become

   system.file("foo", package = "Olivier")

Duncan Murdoch


From le@lie@rutkow@ki @ending from gm@il@com  Wed Oct 10 22:53:41 2018
From: le@lie@rutkow@ki @ending from gm@il@com (Leslie Rutkowski)
Date: Wed, 10 Oct 2018 16:53:41 -0400
Subject: [R] Code "tags"
In-Reply-To: <CAGxFJbT0p+=F_NRmswV03bo9YWgUdqTaqyB7qUhWcnNNY_CW1A@mail.gmail.com>
References: <CAA0F9kW1SyLe_PnYnSoeVWcdRJswX7MF1YxrxrG7Vgngn_S=Ww@mail.gmail.com>
 <CAGxFJbT0p+=F_NRmswV03bo9YWgUdqTaqyB7qUhWcnNNY_CW1A@mail.gmail.com>
Message-ID: <CAA0F9kUEvK3Y-dx3jSRqEnPw3CK=4HygJXPwhev+bw2NqztPrg@mail.gmail.com>

"tags" are a way to label things digitally so that they are easier to find
later - Twitter uses these, as one example.

I found a nice solution: GitHubGist with an interface via Lepton, if anyone
else would like to avoid rummaging through old code to find something (a
function, an example, whatever). Organization looks pretty detailed and
relatively user friendly, with labels for languages and tags. You can also
make your "gists" public or private.

Leslie



On Wed, Oct 10, 2018 at 4:15 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> "get organized around R programming" is rather vague.  Nor do I know what
> you mean by "tagging" code snippets.
>
> A standard answer would be to write your "code" as documented functions in
> a package (e.g. "LeslieMisc"). RStudio -- a wholly separate software
> product -- has various tools to that may also be relevant. RMarkdown allows
> you to write documents in which you embed executable R code, which is
> useful for producing "vignettes" to illustrate how code works. Roxygen is
> useful for producing package docs with a minimum of pain. Any of these --
> and others, like just producing inline comments -- may be useful.
>
> -- Bert
>
>
>
> On Wed, Oct 10, 2018 at 12:43 PM Leslie Rutkowski <
> leslie.rutkowski at gmail.com> wrote:
>
>> Hi all,
>>
>> I'm trying to get organized about my R programming and I'm looking for a
>> way to "tag" snippets of handy code that I go back to time and again. At
>> the moment, I just plop .R files into a folder and rely on the file name
>> to
>> guide me. In desperation, I've taken to saving the same chunk as multiple
>> .R files with different "tags" (e.g. "Loops with titles.R" = "CLT
>> example.R").
>>
>> Any tips would be appreciated.
>>
>> Thanks,
>> Leslie
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From olivier_giv@ud@n @ending from hotm@il@com  Wed Oct 10 23:03:30 2018
From: olivier_giv@ud@n @ending from hotm@il@com (Olivier GIVAUDAN)
Date: Wed, 10 Oct 2018 21:03:30 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <EF096B6D-D167-402E-A1BB-9310D60E6F64@dcn.davis.ca.us>
 <VI1PR0202MB33571A964A191D165B3BF422F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <292ca297-27e3-162b-e525-fabc4bb4554c@kogentum.hu>
 <VI1PR0202MB3357E9066FF1527BAC014784F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <dbde4f15-caa6-dc62-3a10-e804cc81671a@kogentum.hu>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>,
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>,
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
Message-ID: <DB3PR0202MB33554654F5276A0D53C13A0DF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>

Actually there is a difference between:

  1.  Directly executing the file by the user by double clicking on the "physical" file (you can only do that from the directory where the file is located), without going through any terminal, and
  2.  Executing this file "remotely" by calling it through a terminal for instance.

________________________________
De : R-help <r-help-bounces at r-project.org> de la part de Olivier GIVAUDAN <olivier_givaudan at hotmail.com>
Envoy? : mercredi 10 octobre 2018 20:42
? : Duncan Murdoch; Jeff Newmiller
Cc : r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

Why are you not simply double-clicking on 'TestPWD' and choosing to execute the file (don't add anything)?
Are you executing the file from a terminal?
________________________________
De : Duncan Murdoch <murdoch.duncan at gmail.com>
Envoy? : mercredi 10 octobre 2018 20:17
? : Olivier GIVAUDAN; Jeff Newmiller
Cc : r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

On 10/10/2018 3:51 PM, Olivier GIVAUDAN wrote:
> Well, no idea...
>
> I just created a file 'TestPWD', made it executable, inserted in it
> these lines and moved the file in various places:
>
> #!/bin/bash
>
> echo $PWD
> read -p ""

When I execute that, it prints my working directory.  Doesn't matter
where the TestPWD file is.  If I put it in directory "foo", and change
to foo's parent, then

   foo/TestPWD

prints the name of the parent directory, not the foo directory.  If I
then add foo to the PATH, and run

   TestPWD

I get the same thing.  I find it unbelievable that you are seeing
anything different from that on a Unix-alike.

Duncan Muroch


> ------------------------------------------------------------------------
> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Envoy? :* mercredi 10 octobre 2018 15:20
> *? :* Olivier GIVAUDAN; Jeff Newmiller
> *Cc :* r-help at r-project.org
> *Objet :* Re: [R] Genuine relative paths with R
> On 10/10/2018 11:18 AM, Olivier GIVAUDAN wrote:
>> Hi Duncan,
>>
>> Yes, if you need to display the content of $PWD you obviously need to
>> type 'echo' before this variable.
>>
>> It prints the user's working directory if run from a terminal but if run
>> from a bash file it prints the working directory of the script.
>> At least for me (I am running on the last version of Ubuntu)...
>
> Not for me.  Always prints the user's working directory.
>
> Duncan Murdoch
>
>
>>
>> Best regards,
>>
>> Olivier
>> ------------------------------------------------------------------------
>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>> *Envoy? :* mercredi 10 octobre 2018 14:51
>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>> *Cc :* r-help at r-project.org
>> *Objet :* Re: [R] Genuine relative paths with R
>> On 10/10/2018 10:37 AM, Olivier GIVAUDAN wrote:
>>> Hi Jeff,
>>> ?
>>>> That is, there is not always a file in a particular directory even involved in the executing code.??
>>> ?
>>> True. I'm only asking in the case where some R code is run from an R file. This function 'MyOwnPath()' (say) should only work (i.e. return a useful result) in this case.?
>>> ?
>>>> The R interpreter does not make assumptions about where the code it is running came from.?
>>> ?
>>> That's precisely the reproach I have in case the code comes from a file.?
>>> ?
>>>> You also keep referring to "this feature" being in many languages, though you seem to be mistaken about most of them...?
>>> ?
>>> 'Most of them' is largely exaggerated (plus I corrected myself): I only mixed between the 'cd' variable / command in Windows and Linux shells (you would certainly agree it's a bit vicious).?
>>> ?
>>>> $PWD is the same as getwd()?
>>> ?
>>> Wrong. As I already said, if I create an R script located somewhere on my computer with the only line 'getwd()' and run this script, I won't get the directory of this R script, contrary to a shell file with the only line '$PWD'.?
>>
>> What system are you talking about?  On Unix-alikes, you'd need an "echo"
>> ahead of that, and it would print the user's working directory, not the
>> working directory of the script.
>>
>> Duncan Murdoch
>>
>>> ?
>>>> __FILE__ in C relates to the source code directory that is usually not where the executable is ?located and may not even exist on the computer it is running on?
>>> ?
>>> Yes, and? What is the issue here? So '__FILE__' does the job. Invoking '__FILE__' in a .C file (I never said in its related executable) will return the absolute path of this C source file.?
>>> '__DIR__' in PHP also does the job. No to forget the good old VBA (Excel in this case) 'ActiveWorkbook.Path'.?
>>>
>>> Thank you for the 2 references you provided.
>>> However it seems that some manual settings are still required to be able to use Rscript.
>>> But I like the solution of the .RData file: I simply created an empty .RData file at the root of my project and by double-clicking on this file (as you said), the R GUI opens and 'getwd()' returns the path of this .RData file. It seems to be a good alternative to .Rproj file to be opened with RStudio.
>>> ?
>>>> However, by far the best approach is to teach your users to fish... if you give them an RStudio project directory they can double-click on the .Rproj ?file to set the current directory and enter the world of R.??
>>> ?
>>> Yes, using an .Rproj file to be opened with RStudio also seems to me to be a reasonable solution (the one I chose until now), although it is still a workaround and requires RStudio.?
>>> Actually in this case, the package 'here'? I previously mentioned is useless to get the current working directory of the project as 'When a project is opened within RStudio the following actions are taken: [...] The current working directory is set to the project directory.', as stated on this page:
>> https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects.
>>> So 'getwd()' returns exactly the same as 'here()' does.
>>>
>>> Best regards,?
>>> ?
>>> Olivier
>>>
>>> ________________________________
>>> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>>> Envoy? : dimanche 7 octobre 2018 20:48
>>> ? : Olivier GIVAUDAN
>>> Cc : D?nes T?th; r-help at r-project.org
>>> Objet : RE: [R] Genuine relative paths with R
>>>
>>> On Sun, 7 Oct 2018, Olivier GIVAUDAN wrote:
>>>
>>>> Hello Denes,
>>>>
>>>>> Yes, the path to the "root" folder of your project. You seem to have a
>>>> really esoteric context if you want to run an R script without knowing
>>>> its path in the file system.
>>>>
>>>> I don't have any esoteric context: I'm just looking for the most generic, automatic and reproducible solution.
>>>> Of course you always know where an R script is located, nevertheless it doesn't imply you want to manually write its path in this
>>>> R script. The issue is to have to hardcode an absolute path: I don't want that.
>>>>
>>>>> Because it is extremely rare that someone - who uses R for what it is
>>>> worth and in a manner how R is supposed to be used - actually needs such
>>>> a function.
>>>>
>>>
>>>> First, the fact that it is rare doesn't mean this need is not legitimate
>>>> and relevant: it is needed to make R projects fully movable (i.e.
>>>> wherever you want). Second why a vast majority of languages does have
>>>> this feature and not R? Why is it useful in these languages and not in
>>>> R?
>>>
>>> The R interpreter does not make assumptions about where the code it is
>>> running came from. You might be running it by using the source() function,
>>> or by using the Rscript program, or by R CMD BATCH, or using eval() on
>>> code you pasted together in an R function, or as byte-compiled code loaded
>>> from an RData file. That is, there is not always a file in a particular
>>> directory even involved in the executing code.
>>>
>>> You also keep referring to "this feature" being in many languages, though
>>> you seem to be mistaken about most of them... in fact, they, too, know NOT
>>> where the script is but where the current directory is ($PWD is the same
>>> as getwd()) or where the compilation occurred (__FILE__ in C relates to
>>> the source code directory that is usually not where the executable is
>>> located and may not even exist on the computer it is running on).
>>>
>>> I have already pointed out that the solution is to let the OS set the
>>> current directory. If you want the user to have access to R independent of
>>> your code, the easiest way to leave them in Rgui after your code is done
>>> is to use save.image() to create a "myApp.RData" file which can be
>>> double-clicked [1]. The double-clicking action by default (as defined by
>>> the installation of R) causes the operating system to set the current
>>> directory to the one containing the file you double-clicked on and then
>>> executes the Rgui program.
>>>
>>> If you don't want the user to interact with your session, you can use the
>>> Rscript executable (also mentioned briefly at the bottom of [1]). In both
>>> cases, the user has (unknowingly) set the current directory before running
>>> your code, and there is no need to encode where the script is or was
>>> inside the script.
>>>
>>> You can also create a windows shortcut to invoke Rscript yourself by
>>> bootstrapping the RData file and invoking the
>>> R.utils::createWindowsShortcut() [2] function.
>>>
>>> However, by far the best approach is to teach your users to fish... if you
>>> give them an RStudio project directory they can double-click on the .Rproj
>>> file to set the current directory and enter the world of R.
>>>
>>> [1] https://www.r-bloggers.com/look-ma-no-typing-autorunning-code-on-r-startup/
>>> [2] https://cran.r-project.org/web/packages/R.utils/R.utils.pdf
>>>
>>> End comment.
>>>
>>>> Best regards,
>>>>
>>>> Olivier
>>>>
>>>> _________________________________________________________________________________________________________________________________
>>>> De : D?nes T?th <toth.denes at kogentum.hu>
>>>> Envoy? : samedi 6 octobre 2018 23:36
>>>> ? : Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
>>>> Objet : Re: [R] Genuine relative paths with R
>>>> Hi Olivier,
>>>>
>>>>
>>>> On 10/07/2018 01:13 AM, Olivier GIVAUDAN wrote:
>>>>> Hi Denes,
>>>>>
>>>>> Thank you for the possibility you shared: unfortunately it still uses
>>>>> one hardcoded absolute path which I want to avoid.
>>>>
>>>> Yes, the path to the "root" folder of your project. You seem to have a
>>>> really esoteric context if you want to run an R script without knowing
>>>> its path in the file system.
>>>>
>>>>>
>>>>> I just think that the solutions suggested are too complicated for my
>>>>> simple need.
>>>>>
>>>>> The root cause being that R doesn't seem to have the Windows batch
>>>>> equivalent of cd, or bash equivalent of $PWD, or PHP equivalent of __DIR__.
>>>>> Hence the workarounds we are discussing.
>>>>>
>>>>> And finally we go back to my initial question: if such a function
>>>>> doesn't exist in R, what are the reasons?
>>>>
>>>> Because it is extremely rare that someone - who uses R for what it is
>>>> worth and in a manner how R is supposed to be used - actually needs such
>>>> a function.
>>>>
>>>> Best,
>>>> Denes
>>>>
>>>>
>>>>
>>>>>
>>>>> Best regards,
>>>>>
>>>>> Olivier
>>>>> ------------------------------------------------------------------------
>>>>> *De :* D?nes T?th <toth.denes at kogentum.hu>
>>>>> *Envoy? :* samedi 6 octobre 2018 23:05
>>>>> *?:* Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
>>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>>> Hi Olivier,
>>>>>
>>>>> I really think that Ista and Jeff gave you plenty of useful options how
>>>>> you can avoid using absolute paths.
>>>>>
>>>>> One more possibility: you can use `source()` with the chdir = TRUE
>>>>> argument (see ?source). If you have a master script which sources other
>>>>> files which are located in a fixed hierarchy relative to the location of
>>>>> the master script, the only time when you have to use an absolute path
>>>>> is when you source your master script, e.g.:
>>>>> source("/my/path/to/master.R", chdir = TRUE)
>>>>>
>>>>> Inside the master script, you can then source the other scripts by
>>>>> relative paths, define your 'data' folders relative to the master script
>>>>> and let the other scripts use those data paths, etc.
>>>>>
>>>>> Best,
>>>>> Denes
>>>>>
>>>>>
>>>>> On 10/06/2018 11:36 PM, Olivier GIVAUDAN wrote:
>>>>>> Hi Jeff,
>>>>>>
>>>>>> Thanks for sharing your workaround.
>>>>>>
>>>>>> I guess my last answer to Ista answers your question as well.
>>>>>>
>>>>>> To me this function (an equivalent of 'cd', say) should be platform-independent.
>>>>>>
>>>>>> Best regards,
>>>>>>
>>>>>> Olivier
>>>>>>
>>>>>> ________________________________
>>>>>> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>>>>>> Envoy??? : samedi 6 octobre 2018 19:31
>>>>>> ??? : r-help at r-project.org; Olivier GIVAUDAN; r-help at r-project.org
>>>>>> Objet : Re: [R] Genuine relative paths with R
>>>>>>
>>>>>> I stopped using hardcoded absolute paths inside R scripts years ago, and I suspect that is fairly common practice. That is, I
>>>> almost never enter a path starting with "/" or "c:/" in an R script.
>>>>>>
>>>>>> The key concession you have to make is to start your R session in your working directory using OS-specific mechanisms, and
>>>> then reference your code and data relative to that directory. RStudio project files offer one mechanism for doing this; using CD
>>>> from  the OS command line is another, and using the file-browser
>>>>> double-click mechanism on .RData files is another (though I prefer to
>>>>> avoid that these days due to potential global environment contamination).
>>>>>>
>>>>>> Perhaps you can be more specific about what facilities you are expecting to find. You should also mention what OS you
>>>> typically use and how you normally start R.
>>>>>>
>>>>>> On October 6, 2018 4:48:44 AM PDT, Olivier GIVAUDAN <olivier_givaudan at hotmail.com> wrote:
>>>>>>> Dear R users,
>>>>>>>
>>>>>>> I would like to work with genuine relative paths in R for obvious
>>>>>>> reasons: if I move all my scripts related to some project as a whole to
>>>>>>> another location of my computer or someone else's computer, if want my
>>>>>>> scripts to continue to run seamlessly.
>>>>>>>
>>>>>>> What I mean by "genuine" is that it should not be necessary to hardcode
>>>>>>> one single absolute path (making the code obviously not "portable" - to
>>>>>>> another place - anymore).
>>>>>>>
>>>>>>> For the time being, I found the following related posts, unfortunately
>>>>>>> never conclusive or even somewhat off-topic:
>>>>>>> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
>>>>>>> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
>>>>>>> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
>>>>>>>
>>>>>>> So I found 2 workarounds, more or less satisfactory:
>>>>>>>
>>>>>>>
>>>>>>> 1.  Either create a variable "ScriptPath" in the first lines of each of
>>>>>>> my R scripts and run a batch (or shell, etc.) to replace every single
>>>>>>> occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R
>>>>>>> script]" in all the R scripts located in the folder (and possibly
>>>>>>> subfolders) of the batch file.
>>>>>>> 2.  Or create an R project file with RStudio and use the package "here"
>>>>>>> to get the absolute path of the R project file and put all the R
>>>>>>> scripts related to this project in the R project directory, as often
>>>>>>> recommended.
>>>>>>>
>>>>>>> But I am really wondering why R doesn't have (please tell me if I'm
>>>>>>> wrong) this basic feature as many other languages have it (batch,
>>>>>>> shell, C, LaTeX, SAS with macro-variables, etc.)?
>>>>>>> Do you know whether the language will have this kind of function in a
>>>>>>> near future? What are the obstacles / what is the reasoning for not
>>>>>>> having it already?
>>>>>>>
>>>>>>> Do you know other workarounds?
>>>>>>>
>>>>>>> Best regards,
>>>>>>>
>>>>>>> Olivier
>>>>>>>
>>>>>>>         [[alternative HTML version deleted]]
>>>>>>>
>>>>>>> ______________________________________________
>>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>> PLEASE do read the posting guide
>>>>>>> http://www.R-project.org/posting-guide.html
>>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>
>>>>>> --
>>>>>> Sent from my phone. Please excuse my brevity.
>>>>>>
>>>>>>         [[alternative HTML version deleted]]
>>>>>>
>>>>>>
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------------
>>> Jeff Newmiller                        The     .....       .....  Go Live...
>>> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
>>>                                         Live:   OO#.. Dead: OO#..  Playing
>>> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
>>> /Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
>>> ---------------------------------------------------------------------------
>>>
>>>        [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>


        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From drjimlemon @ending from gm@il@com  Wed Oct 10 23:21:13 2018
From: drjimlemon @ending from gm@il@com (Jim Lemon)
Date: Thu, 11 Oct 2018 08:21:13 +1100
Subject: [R] Code "tags"
In-Reply-To: <CAA0F9kW1SyLe_PnYnSoeVWcdRJswX7MF1YxrxrG7Vgngn_S=Ww@mail.gmail.com>
References: <CAA0F9kW1SyLe_PnYnSoeVWcdRJswX7MF1YxrxrG7Vgngn_S=Ww@mail.gmail.com>
Message-ID: <CA+8X3fVS_dNjQiDYgdfJ6tQ=HYwD4NZjY9TONznmOinjQMF5XQ@mail.gmail.com>

Hi Leslie,
Keeping track of any sort of text (or music or pictures) can be
challenging when the number of files becomes large. One way to
organize a large collection is to categorize it in some way that makes
sense to you. Say you create a directory structure:

R_code__________________________________________________
            |                      |                            |
               |                         |
data_input         output_listing        desc_stats           plots
           R objects
   |          |               |             |
                                   |              |
CSV    Excel       text        HTML
              saving   combining

Within categories like that, your filenames might be sufficient to
identify the one you want.

Jim


From olivier_giv@ud@n @ending from hotm@il@com  Wed Oct 10 23:31:17 2018
From: olivier_giv@ud@n @ending from hotm@il@com (Olivier GIVAUDAN)
Date: Wed, 10 Oct 2018 21:31:17 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <292ca297-27e3-162b-e525-fabc4bb4554c@kogentum.hu>
 <VI1PR0202MB3357E9066FF1527BAC014784F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <dbde4f15-caa6-dc62-3a10-e804cc81671a@kogentum.hu>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>,
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
Message-ID: <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>

I do not want to use the terminal, just double clicks (i.e. the simplest, automatic, non-manual way, without having to write a line / command).
Therefore everything should happen outside any terminal. The user won't use a terminal.

I don't have a Mac and I'm not familiar with this OS, sorry.
But I'm really surprised the click method gives different results than on Linux and Windows.
I know the click method worked both on Linux (Ubuntu latest version) and Windows (10).

Yes, I executed my file from a terminal and got obviously the same result as you (that's reassuring).

Come on guys, creating a package... It's like using a hammer to kill a fly...
________________________________
De : Duncan Murdoch <murdoch.duncan at gmail.com>
Envoy? : mercredi 10 octobre 2018 20:54
? : Olivier GIVAUDAN; Jeff Newmiller
Cc : r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

On 10/10/2018 4:42 PM, Olivier GIVAUDAN wrote:
> Why are you not simply double-clicking on 'TestPWD' and choosing to
> execute the file (don't add anything)?
> Are you executing the file from a terminal?

Yes, I was executing the file from my terminal.  Otherwise I really have
no idea what the "current directory" is in the Finder.   (I'm on a Mac.
I just tried the click method; it printed my home directory, not the
directory of the script.)

I don't know the name of your visual front end, but you are displaying
the working directory that it sets when you click on TestPWD.  That will
be different from the working directory that your user sees in the Terminal.

You can see what I saw if you run TestPWD from the Terminal.  It will
print the current working directory, not the one where TestPWD happens
to live.

If you want to do the same sort of thing in R, you could set up a script
that calls R, and execute that in the way you executed TestPWD.  But in
another message you said you aren't allowed to do that, so I think your
best solution is the one offered by Bill Dunlap:  organize your files as
an R package.  If you name your package "Olivier", then you can find all
the files in it under the directory returned by

   system.file(".", package = "Olivier")

The package system is designed for R code, but you can put arbitrary
files into a package:  just store them under the "inst" directory in
your source.  When the package is installed, those files will be moved
up one level, i.e.

Olivier/inst/foo

will become

   system.file("foo", package = "Olivier")

Duncan Murdoch

	[[alternative HTML version deleted]]


From murdoch@dunc@n @ending from gm@il@com  Wed Oct 10 23:39:10 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Wed, 10 Oct 2018 17:39:10 -0400
Subject: [R] Genuine relative paths with R
In-Reply-To: <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <VI1PR0202MB3357E9066FF1527BAC014784F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <dbde4f15-caa6-dc62-3a10-e804cc81671a@kogentum.hu>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
Message-ID: <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>

On 10/10/2018 5:31 PM, Olivier GIVAUDAN wrote:
> I do not want to use the terminal, just double clicks (i.e. the 
> simplest, automatic, non-manual way, without having to write a line / 
> command).
> Therefore everything should happen outside any terminal. The user won't 
> use a terminal.
> 
> I don't have a Mac and I'm not familiar with this OS, sorry.
> But I'm really surprised the click method gives different results than 
> on Linux and Windows.
> I know the click method worked both on Linux (Ubuntu latest version) and 
> Windows (10).
> 
> Yes, I executed my file from a terminal and got obviously the same 
> result as you (that's reassuring).
> 
> Come on guys, creating a package... It's like using a hammer to kill a 
> fly...

It's a simple operation to create a package in RStudio.  Not quite a 
single click, but just a few.

In plain R, it's just a little more work using package.skeleton().

Really, if you are distributing R code, you should do it in the standard 
way, not invent your own.

Duncan Murdoch

> ------------------------------------------------------------------------
> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Envoy? :* mercredi 10 octobre 2018 20:54
> *? :* Olivier GIVAUDAN; Jeff Newmiller
> *Cc?:* r-help at r-project.org
> *Objet :* Re: [R] Genuine relative paths with R
> On 10/10/2018 4:42 PM, Olivier GIVAUDAN wrote:
>> Why are you not simply double-clicking on 'TestPWD' and choosing to 
>> execute the file (don't add anything)?
>> Are you executing the file from a terminal?
> 
> Yes, I was executing the file from my terminal.? Otherwise I really have
> no idea what the "current directory" is in the Finder.?? (I'm on a Mac.
> I just tried the click method; it printed my home directory, not the
> directory of the script.)
> 
> I don't know the name of your visual front end, but you are displaying
> the working directory that it sets when you click on TestPWD.? That will
> be different from the working directory that your user sees in the Terminal.
> 
> You can see what I saw if you run TestPWD from the Terminal.? It will
> print the current working directory, not the one where TestPWD happens
> to live.
> 
> If you want to do the same sort of thing in R, you could set up a script
> that calls R, and execute that in the way you executed TestPWD.? But in
> another message you said you aren't allowed to do that, so I think your
> best solution is the one offered by Bill Dunlap:? organize your files as
> an R package.? If you name your package "Olivier", then you can find all
> the files in it under the directory returned by
> 
>  ?? system.file(".", package = "Olivier")
> 
> The package system is designed for R code, but you can put arbitrary
> files into a package:? just store them under the "inst" directory in
> your source.? When the package is installed, those files will be moved
> up one level, i.e.
> 
> Olivier/inst/foo
> 
> will become
> 
>  ?? system.file("foo", package = "Olivier")
> 
> Duncan Murdoch


From olivier_giv@ud@n @ending from hotm@il@com  Wed Oct 10 23:45:56 2018
From: olivier_giv@ud@n @ending from hotm@il@com (Olivier GIVAUDAN)
Date: Wed, 10 Oct 2018 21:45:56 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <VI1PR0202MB3357E9066FF1527BAC014784F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <dbde4f15-caa6-dc62-3a10-e804cc81671a@kogentum.hu>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>,
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
Message-ID: <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>

I'm not sure I'm "inventing my own way" of distributing R code... And I distribute it to a very limited audience.
Anyway, why not "inventing a new way" if it's more efficient than the standard one (I'm talking now in theory)?
________________________________
De : Duncan Murdoch <murdoch.duncan at gmail.com>
Envoy? : mercredi 10 octobre 2018 21:39
? : Olivier GIVAUDAN; Jeff Newmiller
Cc : r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

On 10/10/2018 5:31 PM, Olivier GIVAUDAN wrote:
> I do not want to use the terminal, just double clicks (i.e. the
> simplest, automatic, non-manual way, without having to write a line /
> command).
> Therefore everything should happen outside any terminal. The user won't
> use a terminal.
>
> I don't have a Mac and I'm not familiar with this OS, sorry.
> But I'm really surprised the click method gives different results than

> I know the click method worked both on Linux (Ubuntu latest version) and

>
> Yes, I executed my file from a terminal and got obviously the same
> result as you (that's reassuring).
>
> Come on guys, creating a package... It's like using a hammer to kill a
> fly...

It's a simple operation to create a package in RStudio.  Not quite a
single click, but just a few.

In plain R, it's just a little more work using package.skeleton().

Really, if you are distributing R code, you should do it in the standard
way, not invent your own.

Duncan Murdoch

> ------------------------------------------------------------------------
> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Envoy? :* mercredi 10 octobre 2018 20:54
> *? :* Olivier GIVAUDAN; Jeff Newmiller
> *Cc :* r-help at r-project.org
> *Objet :* Re: [R] Genuine relative paths with R
> On 10/10/2018 4:42 PM, Olivier GIVAUDAN wrote:
>> Why are you not simply double-clicking on 'TestPWD' and choosing to
>> execute the file (don't add anything)?
>> Are you executing the file from a terminal?
>
> Yes, I was executing the file from my terminal.  Otherwise I really have
> no idea what the "current directory" is in the Finder.   (I'm on a Mac.
> I just tried the click method; it printed my home directory, not the
> directory of the script.)
>
> I don't know the name of your visual front end, but you are displaying
> the working directory that it sets when you click on TestPWD.  That will
> be different from the working directory that your user sees in the Terminal.
>
> You can see what I saw if you run TestPWD from the Terminal.  It will
> print the current working directory, not the one where TestPWD happens
> to live.
>
> If you want to do the same sort of thing in R, you could set up a script
> that calls R, and execute that in the way you executed TestPWD.  But in
> another message you said you aren't allowed to do that, so I think your
> best solution is the one offered by Bill Dunlap:  organize your files as
> an R package.  If you name your package "Olivier", then you can find all
> the files in it under the directory returned by
>
>     system.file(".", package = "Olivier")
>
> The package system is designed for R code, but you can put arbitrary
> files into a package:  just store them under the "inst" directory in
> your source.  When the package is installed, those files will be moved
> up one level, i.e.
>
> Olivier/inst/foo
>
> will become
>
>     system.file("foo", package = "Olivier")
>
> Duncan Murdoch


	[[alternative HTML version deleted]]


From drjimlemon @ending from gm@il@com  Thu Oct 11 00:02:48 2018
From: drjimlemon @ending from gm@il@com (Jim Lemon)
Date: Thu, 11 Oct 2018 09:02:48 +1100
Subject: [R] ANOVA in R
In-Reply-To: <CAHjanSAzyPQ8ANKLEUxzSpy0iESD+eikSFgsOo6oU+ytV8-5mg@mail.gmail.com>
References: <CAHjanSAzyPQ8ANKLEUxzSpy0iESD+eikSFgsOo6oU+ytV8-5mg@mail.gmail.com>
Message-ID: <CA+8X3fXEm20OjTfL5F-5eSa+PJJHRjcjBCEm8g6rie1eYU63+A@mail.gmail.com>

Hi Tranh,
I'm not sure why you are converting your variables to factors, and I
think the model you want is:

lm(KIC~temperature+AC+AV+Thickness+temperature:AC+
 temperature:AV+temperature:thickness+AC:AV+
 AC:thickness+AV:thickness,SR)

Note the colons (:) rather than asterisks (*) for the interactions.

Jim
On Wed, Oct 10, 2018 at 5:14 PM Thanh Tran <masternhattt at gmail.com> wrote:
>
> Hi eveyone,
> I'm studying about variance (ANOVA) in R and have some questions to share.
> I read an article investigating the effect of factors (temperature, Asphalt
> content, Air voids, and sample thickness) on the hardness of asphalt
> concrete in the tensile test (abbreviated as Kic). Each condition was
> repeated four times (4 samples). In the paper, the authors used MINITAB to
> analyze Anova. The authors use "adjusted sums of squares" calculate the
> p-value I try to use ANOVA in R to analyze this data and get the result as
> shown in Figure 4. The results are different from the results in the
> article. Some papers say that in R, the default for ANOVA analysis is to
> use "sequential sums of squares" to calculate the p-value.
> So please help the following two questions: 1 / Introduction to code in R
> for anova analysis uses "adjusted sums of squares". The main part of the
> command in R / myself is as follows: > Tem = as.factor (temperature) > Ac =
> as.factor (AC) > Av = as.factor (AV) > Thick = as.factor (Thickness) >
> Twoway = lm (KIC ~ Tem + Ac + Av + Thick + Stamp + Ac + Stamp + Av + Stamp
> + Thick + Ac * Av + Ac * Thick + Av * Thick) > anova (twoway) 2/ When to
> use "sequential sums of squares" and when to use "adjusted sums of
> squares". Some papers recommend using the "oa.design
> <https://www.youtube.com/redirect?q=http%3A%2F%2Foa.design%2F&redir_token=AaSAPDY-5UAsoHxN6BdwfyIJ7R98MTUzOTIxNDg2OUAxNTM5MTI4NDY5&event=comments>"
> function in R to check for "orthogonal" designs. If not, use "adjusted sums
> of squares". I am still vague about this command, so look forward to
> everyone's suggestion. If you could answer all two of my questions, I would
> be most grateful. Ps: I have added a CSV file and the paper for practicing
> R. http://www.mediafire.com/file/e5oe54p2c2wd4bc/Saha+research.csv
> http://www.mediafire.com/file/39jlf9h539y9mdz/Homothetic+behaviour+investigation+on+fracture+toughness+of+asphalt+mixtures+using+semicircular+bending+test.pdf
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From murdoch@dunc@n @ending from gm@il@com  Thu Oct 11 00:07:29 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Wed, 10 Oct 2018 18:07:29 -0400
Subject: [R] Genuine relative paths with R
In-Reply-To: <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
Message-ID: <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>

On 10/10/2018 5:45 PM, Olivier GIVAUDAN wrote:
> I'm not sure I'm "inventing my own way" of distributing R code... And I 
> distribute it to a very limited audience.

Nothing says a package has to go on CRAN.  You can distribute them 
privately to a small audience.

> Anyway, why not "inventing a new way" if it's more efficient than the 
> standard one (I'm talking now in theory)?

If you know as much about R as the people who wrote it, then you can 
almost certainly invent better ways to do many of the things it does.  R 
Core was constrained by trying to maintain back compatibility, and that 
means some of their solutions aren't perfect.

But if you don't know it that well, chances are you'll make mistakes 
when you invent your own way of doing it.  For example, you might think 
that all front ends set the working directory to the directory of the 
program they are running, because the ones you've tried do it that way.
But they don't.

Duncan Murdoch

> ------------------------------------------------------------------------
> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Envoy? :* mercredi 10 octobre 2018 21:39
> *? :* Olivier GIVAUDAN; Jeff Newmiller
> *Cc?:* r-help at r-project.org
> *Objet :* Re: [R] Genuine relative paths with R
> On 10/10/2018 5:31 PM, Olivier GIVAUDAN wrote:
>> I do not want to use the terminal, just double clicks (i.e. the 
>> simplest, automatic, non-manual way, without having to write a line / 
>> command).
>> Therefore everything should happen outside any terminal. The user won't 
>> use a terminal.
>> 
>> I don't have a Mac and I'm not familiar with this OS, sorry.
>> But I'm really surprised the click method gives different results than 
>> on Linux and Windows.
>> I know the click method worked both on Linux (Ubuntu latest version) and 
>> Windows (10).
>> 
>> Yes, I executed my file from a terminal and got obviously the same 
>> result as you (that's reassuring).
>> 
>> Come on guys, creating a package... It's like using a hammer to kill a 
>> fly...
> 
> It's a simple operation to create a package in RStudio.? Not quite a
> single click, but just a few.
> 
> In plain R, it's just a little more work using package.skeleton().
> 
> Really, if you are distributing R code, you should do it in the standard
> way, not invent your own.
> 
> Duncan Murdoch
> 
>> ------------------------------------------------------------------------
>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>> *Envoy? :* mercredi 10 octobre 2018 20:54
>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>> *Cc?:* r-help at r-project.org
>> *Objet :* Re: [R] Genuine relative paths with R
>> On 10/10/2018 4:42 PM, Olivier GIVAUDAN wrote:
>>> Why are you not simply double-clicking on 'TestPWD' and choosing to 
>>> execute the file (don't add anything)?
>>> Are you executing the file from a terminal?
>> 
>> Yes, I was executing the file from my terminal.? Otherwise I really have
>> no idea what the "current directory" is in the Finder.?? (I'm on a Mac.
>> I just tried the click method; it printed my home directory, not the
>> directory of the script.)
>> 
>> I don't know the name of your visual front end, but you are displaying
>> the working directory that it sets when you click on TestPWD.? That will
>> be different from the working directory that your user sees in the Terminal.
>> 
>> You can see what I saw if you run TestPWD from the Terminal.? It will
>> print the current working directory, not the one where TestPWD happens
>> to live.
>> 
>> If you want to do the same sort of thing in R, you could set up a script
>> that calls R, and execute that in the way you executed TestPWD.? But in
>> another message you said you aren't allowed to do that, so I think your
>> best solution is the one offered by Bill Dunlap:? organize your files as
>> an R package.? If you name your package "Olivier", then you can find all
>> the files in it under the directory returned by
>> 
>>? ?? system.file(".", package = "Olivier")
>> 
>> The package system is designed for R code, but you can put arbitrary
>> files into a package:? just store them under the "inst" directory in
>> your source.? When the package is installed, those files will be moved
>> up one level, i.e.
>> 
>> Olivier/inst/foo
>> 
>> will become
>> 
>>? ?? system.file("foo", package = "Olivier")
>> 
>> Duncan Murdoch
>


From olivier_giv@ud@n @ending from hotm@il@com  Thu Oct 11 00:17:07 2018
From: olivier_giv@ud@n @ending from hotm@il@com (Olivier GIVAUDAN)
Date: Wed, 10 Oct 2018 22:17:07 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>,
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
Message-ID: <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>

> Nothing says a package has to go on CRAN.  You can distribute them privately to a small audience.

Yes, I agree in theory. But this solution still violates my own proportionality principle.

> If you know as much about R as the people who wrote it

I didn't claim that (that's was a quite general / theoretical statement, not necessarily and only applicable to R).

> For example, you might think that all front ends set the working directory to the directory of the program they are running, because the ones you've tried do it that way. But they don't.

It runs that way at least on Windows with RStudio and R GUI and I know the recipients of my R code work on Windows with at least one of these 2 GUIs. So the workaround I finally found satisfies my current needs.
________________________________
De : Duncan Murdoch <murdoch.duncan at gmail.com>
Envoy? : mercredi 10 octobre 2018 22:07
? : Olivier GIVAUDAN; Jeff Newmiller
Cc : r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

On 10/10/2018 5:45 PM, Olivier GIVAUDAN wrote:
> I'm not sure I'm "inventing my own way" of distributing R code... And I
> distribute it to a very limited audience.

Nothing says a package has to go on CRAN.  You can distribute them
privately to a small audience.

> Anyway, why not "inventing a new way" if it's more efficient than the
> standard one (I'm talking now in theory)?

If you know as much about R as the people who wrote it, then you can
almost certainly invent better ways to do many of the things it does.  R
Core was constrained by trying to maintain back compatibility, and that
means some of their solutions aren't perfect.

But if you don't know it that well, chances are you'll make mistakes
when you invent your own way of doing it.  For example, you might think
that all front ends set the working directory to the directory of the
program they are running, because the ones you've tried do it that way.
But they don't.

Duncan Murdoch

> ------------------------------------------------------------------------
> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Envoy? :* mercredi 10 octobre 2018 21:39
> *? :* Olivier GIVAUDAN; Jeff Newmiller
> *Cc :* r-help at r-project.org
> *Objet :* Re: [R] Genuine relative paths with R
> On 10/10/2018 5:31 PM, Olivier GIVAUDAN wrote:
>> I do not want to use the terminal, just double clicks (i.e. the
>> simplest, automatic, non-manual way, without having to write a line /
>> command).
>> Therefore everything should happen outside any terminal. The user won't
>> use a terminal.
>>
>> I don't have a Mac and I'm not familiar with this OS, sorry.
>> But I'm really surprised the click method gives different results than

>> I know the click method worked both on Linux (Ubuntu latest version) and

>>
>> Yes, I executed my file from a terminal and got obviously the same
>> result as you (that's reassuring).
>>
>> Come on guys, creating a package... It's like using a hammer to kill a
>> fly...
>
> It's a simple operation to create a package in RStudio.  Not quite a
> single click, but just a few.
>
> In plain R, it's just a little more work using package.skeleton().
>
> Really, if you are distributing R code, you should do it in the standard
> way, not invent your own.
>
> Duncan Murdoch
>
>> ------------------------------------------------------------------------
>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>> *Envoy? :* mercredi 10 octobre 2018 20:54
>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>> *Cc :* r-help at r-project.org
>> *Objet :* Re: [R] Genuine relative paths with R
>> On 10/10/2018 4:42 PM, Olivier GIVAUDAN wrote:
>>> Why are you not simply double-clicking on 'TestPWD' and choosing to
>>> execute the file (don't add anything)?
>>> Are you executing the file from a terminal?
>>
>> Yes, I was executing the file from my terminal.  Otherwise I really have
>> no idea what the "current directory" is in the Finder.   (I'm on a Mac.
>> I just tried the click method; it printed my home directory, not the
>> directory of the script.)
>>
>> I don't know the name of your visual front end, but you are displaying
>> the working directory that it sets when you click on TestPWD.  That will
>> be different from the working directory that your user sees in the Terminal.
>>
>> You can see what I saw if you run TestPWD from the Terminal.  It will
>> print the current working directory, not the one where TestPWD happens
>> to live.
>>
>> If you want to do the same sort of thing in R, you could set up a script
>> that calls R, and execute that in the way you executed TestPWD.  But in
>> another message you said you aren't allowed to do that, so I think your
>> best solution is the one offered by Bill Dunlap:  organize your files as
>> an R package.  If you name your package "Olivier", then you can find all
>> the files in it under the directory returned by
>>
>>     system.file(".", package = "Olivier")
>>
>> The package system is designed for R code, but you can put arbitrary
>> files into a package:  just store them under the "inst" directory in
>> your source.  When the package is installed, those files will be moved
>> up one level, i.e.
>>
>> Olivier/inst/foo
>>
>> will become
>>
>>     system.file("foo", package = "Olivier")
>>
>> Duncan Murdoch
>


	[[alternative HTML version deleted]]


From drjimlemon @ending from gm@il@com  Thu Oct 11 00:25:17 2018
From: drjimlemon @ending from gm@il@com (Jim Lemon)
Date: Thu, 11 Oct 2018 09:25:17 +1100
Subject: [R] ANOVA in R
In-Reply-To: <CA+8X3fXEm20OjTfL5F-5eSa+PJJHRjcjBCEm8g6rie1eYU63+A@mail.gmail.com>
References: <CAHjanSAzyPQ8ANKLEUxzSpy0iESD+eikSFgsOo6oU+ytV8-5mg@mail.gmail.com>
 <CA+8X3fXEm20OjTfL5F-5eSa+PJJHRjcjBCEm8g6rie1eYU63+A@mail.gmail.com>
Message-ID: <CA+8X3fXcPTV0YA7kWjtFfvZq9O4=Sxcf_AaP_u6244_7VSyuPg@mail.gmail.com>

Hi again,
Two things, I named the data frame SR as shown in the model.
The other is for those who may wish to answer the OP. The mediafire
website is loaded with intrusive ads and perhaps malware.

Jim
On Thu, Oct 11, 2018 at 9:02 AM Jim Lemon <drjimlemon at gmail.com> wrote:
>
> Hi Tranh,
> I'm not sure why you are converting your variables to factors, and I
> think the model you want is:
>
> lm(KIC~temperature+AC+AV+Thickness+temperature:AC+
>  temperature:AV+temperature:thickness+AC:AV+
>  AC:thickness+AV:thickness,SR)
>
> Note the colons (:) rather than asterisks (*) for the interactions.
>
> Jim
> On Wed, Oct 10, 2018 at 5:14 PM Thanh Tran <masternhattt at gmail.com> wrote:
> >
> > Hi eveyone,
> > I'm studying about variance (ANOVA) in R and have some questions to share.
> > I read an article investigating the effect of factors (temperature, Asphalt
> > content, Air voids, and sample thickness) on the hardness of asphalt
> > concrete in the tensile test (abbreviated as Kic). Each condition was
> > repeated four times (4 samples). In the paper, the authors used MINITAB to
> > analyze Anova. The authors use "adjusted sums of squares" calculate the
> > p-value I try to use ANOVA in R to analyze this data and get the result as
> > shown in Figure 4. The results are different from the results in the
> > article. Some papers say that in R, the default for ANOVA analysis is to
> > use "sequential sums of squares" to calculate the p-value.
> > So please help the following two questions: 1 / Introduction to code in R
> > for anova analysis uses "adjusted sums of squares". The main part of the
> > command in R / myself is as follows: > Tem = as.factor (temperature) > Ac =
> > as.factor (AC) > Av = as.factor (AV) > Thick = as.factor (Thickness) >
> > Twoway = lm (KIC ~ Tem + Ac + Av + Thick + Stamp + Ac + Stamp + Av + Stamp
> > + Thick + Ac * Av + Ac * Thick + Av * Thick) > anova (twoway) 2/ When to
> > use "sequential sums of squares" and when to use "adjusted sums of
> > squares". Some papers recommend using the "oa.design
> > <https://www.youtube.com/redirect?q=http%3A%2F%2Foa.design%2F&redir_token=AaSAPDY-5UAsoHxN6BdwfyIJ7R98MTUzOTIxNDg2OUAxNTM5MTI4NDY5&event=comments>"
> > function in R to check for "orthogonal" designs. If not, use "adjusted sums
> > of squares". I am still vague about this command, so look forward to
> > everyone's suggestion. If you could answer all two of my questions, I would
> > be most grateful. Ps: I have added a CSV file and the paper for practicing
> > R. http://www.mediafire.com/file/e5oe54p2c2wd4bc/Saha+research.csv
> > http://www.mediafire.com/file/39jlf9h539y9mdz/Homothetic+behaviour+investigation+on+fracture+toughness+of+asphalt+mixtures+using+semicircular+bending+test.pdf
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.


From murdoch@dunc@n @ending from gm@il@com  Thu Oct 11 00:31:44 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Wed, 10 Oct 2018 18:31:44 -0400
Subject: [R] Genuine relative paths with R
In-Reply-To: <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
 <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
Message-ID: <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>

On 10/10/2018 6:17 PM, Olivier GIVAUDAN wrote:
>> Nothing says a package has to go on CRAN.? You can distribute 
> themprivately to a small audience.
> 
> Yes, I agree in theory. But this solution still violates my own 
> proportionality principle.

Again, you seem to think making a package is a big deal.  Maybe that was 
true 10 years ago (though I wrote and tested a package in a 45 minute 
presentation at UseR 2008), but now it's very easy.

But you're free to decide not to do it:  just please don't repeat false 
claims about R (like the ones about paths that started this long thread).

> 
>> If you know as much about R as the people who wrote it
> 
> I didn't claim that (that's was a quite general / theoretical statement, 
> not necessarily and only applicable to R).

I didn't say you made that claim.  I was answering your question about 
why inventing your own way is not a good idea.  It might be a good idea, 
if you know the system very, very well.  Otherwise, it's probably better 
to work the standard way.

Duncan Murdoch

> 
>> For example, you might thinkthat all front ends set the working 
> directory to the directory of theprogram they are running, because the 
> ones you've tried do it that way. But they don't.
> 
> It runs that way at least on Windows with RStudio and R GUI and I know 
> the recipients of my R code work on Windows with at least one of these 2 
> GUIs. So the workaround I finally found satisfies my current needs
> ------------------------------------------------------------------------
> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Envoy? :* mercredi 10 octobre 2018 22:07
> *? :* Olivier GIVAUDAN; Jeff Newmiller
> *Cc?:* r-help at r-project.org
> *Objet :* Re: [R] Genuine relative paths with R
> On 10/10/2018 5:45 PM, Olivier GIVAUDAN wrote:
>> I'm not sure I'm "inventing my own way" of distributing R code... And I 
>> distribute it to a very limited audience.
> 
> Nothing says a package has to go on CRAN.? You can distribute them
> privately to a small audience.
> 
>> Anyway, why not "inventing a new way" if it's more efficient than the 
>> standard one (I'm talking now in theory)?
> 
> If you know as much about R as the people who wrote it, then you can
> almost certainly invent better ways to do many of the things it does.? R
> Core was constrained by trying to maintain back compatibility, and that
> means some of their solutions aren't perfect.
> 
> But if you don't know it that well, chances are you'll make mistakes
> when you invent your own way of doing it.? For example, you might think
> that all front ends set the working directory to the directory of the
> program they are running, because the ones you've tried do it that way.
> But they don't.
> 
> Duncan Murdoch
> 
>> ------------------------------------------------------------------------
>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>> *Envoy? :* mercredi 10 octobre 2018 21:39
>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>> *Cc?:* r-help at r-project.org
>> *Objet :* Re: [R] Genuine relative paths with R
>> On 10/10/2018 5:31 PM, Olivier GIVAUDAN wrote:
>>> I do not want to use the terminal, just double clicks (i.e. the 
>>> simplest, automatic, non-manual way, without having to write a line / 
>>> command).
>>> Therefore everything should happen outside any terminal. The user won't 
>>> use a terminal.
>>> 
>>> I don't have a Mac and I'm not familiar with this OS, sorry.
>>> But I'm really surprised the click method gives different results than 
>>> on Linux and Windows.
>>> I know the click method worked both on Linux (Ubuntu latest version) and 
>>> Windows (10).
>>> 
>>> Yes, I executed my file from a terminal and got obviously the same 
>>> result as you (that's reassuring).
>>> 
>>> Come on guys, creating a package... It's like using a hammer to kill a 
>>> fly...
>> 
>> It's a simple operation to create a package in RStudio.? Not quite a
>> single click, but just a few.
>> 
>> In plain R, it's just a little more work using package.skeleton().
>> 
>> Really, if you are distributing R code, you should do it in the standard
>> way, not invent your own.
>> 
>> Duncan Murdoch
>> 
>>> ------------------------------------------------------------------------
>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>> *Envoy? :* mercredi 10 octobre 2018 20:54
>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>> *Cc?:* r-help at r-project.org
>>> *Objet :* Re: [R] Genuine relative paths with R
>>> On 10/10/2018 4:42 PM, Olivier GIVAUDAN wrote:
>>>> Why are you not simply double-clicking on 'TestPWD' and choosing to 
>>>> execute the file (don't add anything)?
>>>> Are you executing the file from a terminal?
>>> 
>>> Yes, I was executing the file from my terminal.? Otherwise I really have
>>> no idea what the "current directory" is in the Finder.?? (I'm on a Mac.
>>> I just tried the click method; it printed my home directory, not the
>>> directory of the script.)
>>> 
>>> I don't know the name of your visual front end, but you are displaying
>>> the working directory that it sets when you click on TestPWD.? That will
>>> be different from the working directory that your user sees in the Terminal.
>>> 
>>> You can see what I saw if you run TestPWD from the Terminal.? It will
>>> print the current working directory, not the one where TestPWD happens
>>> to live.
>>> 
>>> If you want to do the same sort of thing in R, you could set up a script
>>> that calls R, and execute that in the way you executed TestPWD.? But in
>>> another message you said you aren't allowed to do that, so I think your
>>> best solution is the one offered by Bill Dunlap:? organize your files as
>>> an R package.? If you name your package "Olivier", then you can find all
>>> the files in it under the directory returned by
>>> 
>>>? ?? system.file(".", package = "Olivier")
>>> 
>>> The package system is designed for R code, but you can put arbitrary
>>> files into a package:? just store them under the "inst" directory in
>>> your source.? When the package is installed, those files will be moved
>>> up one level, i.e.
>>> 
>>> Olivier/inst/foo
>>> 
>>> will become
>>> 
>>>? ?? system.file("foo", package = "Olivier")
>>> 
>>> Duncan Murdoch
>> 
>


From olivier_giv@ud@n @ending from hotm@il@com  Thu Oct 11 00:52:25 2018
From: olivier_giv@ud@n @ending from hotm@il@com (Olivier GIVAUDAN)
Date: Wed, 10 Oct 2018 22:52:25 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
 <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>,
 <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>
Message-ID: <DB3PR0202MB3355AC9A5807D00F591E3B55F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>

> Again, you seem to think making a package is a big deal.

Perhaps not a big deal (I believe you, I didn't write an R package yet), but not as straightforward as having a function within an R file returning its own path.

> But you're free to decide not to do it:  just please don't repeat false claims about R (like the ones about paths that started this long thread).

Which false claims?
________________________________
De : Duncan Murdoch <murdoch.duncan at gmail.com>
Envoy? : mercredi 10 octobre 2018 22:31
? : Olivier GIVAUDAN; Jeff Newmiller
Cc : r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

On 10/10/2018 6:17 PM, Olivier GIVAUDAN wrote:
>> Nothing says a package has to go on CRAN.  You can distribute
> themprivately to a small audience.
>
> Yes, I agree in theory. But this solution still violates my own
> proportionality principle.

Again, you seem to think making a package is a big deal.  Maybe that was
true 10 years ago (though I wrote and tested a package in a 45 minute
presentation at UseR 2008), but now it's very easy.

But you're free to decide not to do it:  just please don't repeat false
claims about R (like the ones about paths that started this long thread).

>
>> If you know as much about R as the people who wrote it
>
> I didn't claim that (that's was a quite general / theoretical statement,
> not necessarily and only applicable to R).

I didn't say you made that claim.  I was answering your question about
why inventing your own way is not a good idea.  It might be a good idea,
if you know the system very, very well.  Otherwise, it's probably better
to work the standard way.

Duncan Murdoch

>
>> For example, you might thinkthat all front ends set the working
> directory to the directory of theprogram they are running, because the
> ones you've tried do it that way. But they don't.
>


> GUIs. So the workaround I finally found satisfies my current needs
> ------------------------------------------------------------------------
> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Envoy? :* mercredi 10 octobre 2018 22:07
> *? :* Olivier GIVAUDAN; Jeff Newmiller
> *Cc :* r-help at r-project.org
> *Objet :* Re: [R] Genuine relative paths with R
> On 10/10/2018 5:45 PM, Olivier GIVAUDAN wrote:
>> I'm not sure I'm "inventing my own way" of distributing R code... And I
>> distribute it to a very limited audience.
>
> Nothing says a package has to go on CRAN.  You can distribute them
> privately to a small audience.
>
>> Anyway, why not "inventing a new way" if it's more efficient than the
>> standard one (I'm talking now in theory)?
>
> If you know as much about R as the people who wrote it, then you can
> almost certainly invent better ways to do many of the things it does.  R
> Core was constrained by trying to maintain back compatibility, and that
> means some of their solutions aren't perfect.
>
> But if you don't know it that well, chances are you'll make mistakes
> when you invent your own way of doing it.  For example, you might think
> that all front ends set the working directory to the directory of the
> program they are running, because the ones you've tried do it that way.
> But they don't.
>
> Duncan Murdoch
>
>> ------------------------------------------------------------------------
>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>> *Envoy? :* mercredi 10 octobre 2018 21:39
>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>> *Cc :* r-help at r-project.org
>> *Objet :* Re: [R] Genuine relative paths with R
>> On 10/10/2018 5:31 PM, Olivier GIVAUDAN wrote:
>>> I do not want to use the terminal, just double clicks (i.e. the
>>> simplest, automatic, non-manual way, without having to write a line /
>>> command).
>>> Therefore everything should happen outside any terminal. The user won't
>>> use a terminal.
>>>
>>> I don't have a Mac and I'm not familiar with this OS, sorry.
>>> But I'm really surprised the click method gives different results than

>>> I know the click method worked both on Linux (Ubuntu latest version) and

>>>
>>> Yes, I executed my file from a terminal and got obviously the same
>>> result as you (that's reassuring).
>>>
>>> Come on guys, creating a package... It's like using a hammer to kill a
>>> fly...
>>
>> It's a simple operation to create a package in RStudio.  Not quite a
>> single click, but just a few.
>>
>> In plain R, it's just a little more work using package.skeleton().
>>
>> Really, if you are distributing R code, you should do it in the standard
>> way, not invent your own.
>>
>> Duncan Murdoch
>>
>>> ------------------------------------------------------------------------
>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>> *Envoy? :* mercredi 10 octobre 2018 20:54
>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>> *Cc :* r-help at r-project.org
>>> *Objet :* Re: [R] Genuine relative paths with R
>>> On 10/10/2018 4:42 PM, Olivier GIVAUDAN wrote:
>>>> Why are you not simply double-clicking on 'TestPWD' and choosing to
>>>> execute the file (don't add anything)?
>>>> Are you executing the file from a terminal?
>>>
>>> Yes, I was executing the file from my terminal.  Otherwise I really have
>>> no idea what the "current directory" is in the Finder.   (I'm on a Mac.
>>> I just tried the click method; it printed my home directory, not the
>>> directory of the script.)
>>>
>>> I don't know the name of your visual front end, but you are displaying
>>> the working directory that it sets when you click on TestPWD.  That will
>>> be different from the working directory that your user sees in the Terminal.
>>>
>>> You can see what I saw if you run TestPWD from the Terminal.  It will
>>> print the current working directory, not the one where TestPWD happens
>>> to live.
>>>
>>> If you want to do the same sort of thing in R, you could set up a script
>>> that calls R, and execute that in the way you executed TestPWD.  But in
>>> another message you said you aren't allowed to do that, so I think your
>>> best solution is the one offered by Bill Dunlap:  organize your files as
>>> an R package.  If you name your package "Olivier", then you can find all
>>> the files in it under the directory returned by
>>>
>>>     system.file(".", package = "Olivier")
>>>
>>> The package system is designed for R code, but you can put arbitrary
>>> files into a package:  just store them under the "inst" directory in
>>> your source.  When the package is installed, those files will be moved
>>> up one level, i.e.
>>>
>>> Olivier/inst/foo
>>>
>>> will become
>>>
>>>     system.file("foo", package = "Olivier")
>>>
>>> Duncan Murdoch
>>
>


	[[alternative HTML version deleted]]


From murdoch@dunc@n @ending from gm@il@com  Thu Oct 11 00:59:53 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Wed, 10 Oct 2018 18:59:53 -0400
Subject: [R] Genuine relative paths with R
In-Reply-To: <DB3PR0202MB3355AC9A5807D00F591E3B55F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
 <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>
 <DB3PR0202MB3355AC9A5807D00F591E3B55F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
Message-ID: <ac573e54-dde3-397e-601f-2130b5c27676@gmail.com>

On 10/10/2018 6:52 PM, Olivier GIVAUDAN wrote:
>>  Again, you seem to think making a package is a big deal.
> 
> Perhaps not a big deal (I believe you, I didn't write an R package yet), 
> but not as straightforward as having a function within an R file 
> returning its own path.
> 
>> But you're free to decide not to do it:? just please don't repeat 
> falseclaims about R (like the ones about paths that started this long 
> thread).
> 
> Which false claims?

"But I am really wondering why R doesn't have (please tell me if I'm 
wrong) this basic feature as many other languages have it (batch, shell, 
C, LaTeX, SAS with macro-variables, etc.)?"

Duncan Murdoch

> ------------------------------------------------------------------------
> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Envoy? :* mercredi 10 octobre 2018 22:31
> *? :* Olivier GIVAUDAN; Jeff Newmiller
> *Cc?:* r-help at r-project.org
> *Objet :* Re: [R] Genuine relative paths with R
> On 10/10/2018 6:17 PM, Olivier GIVAUDAN wrote:
>>> Nothing says a package has to go on CRAN.? You can distribute 
>> themprivately to a small audience.
>> 
>> Yes, I agree in theory. But this solution still violates my own 
>> proportionality principle.
> 
> Again, you seem to think making a package is a big deal.? Maybe that was
> true 10 years ago (though I wrote and tested a package in a 45 minute
> presentation at UseR 2008), but now it's very easy.
> 
> But you're free to decide not to do it:? just please don't repeat false
> claims about R (like the ones about paths that started this long thread).
> 
>> 
>>> If you know as much about R as the people who wrote it
>> 
>> I didn't claim that (that's was a quite general / theoretical statement, 
>> not necessarily and only applicable to R).
> 
> I didn't say you made that claim.? I was answering your question about
> why inventing your own way is not a good idea.? It might be a good idea,
> if you know the system very, very well.? Otherwise, it's probably better
> to work the standard way.
> 
> Duncan Murdoch
> 
>> 
>>> For example, you might thinkthat all front ends set the working 
>> directory to the directory of theprogram they are running, because the 
>> ones you've tried do it that way. But they don't.
>> 
>> It runs that way at least on Windows with RStudio and R GUI and I know 
>> the recipients of my R code work on Windows with at least one of these 2 
>> GUIs. So the workaround I finally found satisfies my current needs
>> ------------------------------------------------------------------------
>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>> *Envoy? :* mercredi 10 octobre 2018 22:07
>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>> *Cc?:* r-help at r-project.org
>> *Objet :* Re: [R] Genuine relative paths with R
>> On 10/10/2018 5:45 PM, Olivier GIVAUDAN wrote:
>>> I'm not sure I'm "inventing my own way" of distributing R code... And I 
>>> distribute it to a very limited audience.
>> 
>> Nothing says a package has to go on CRAN.? You can distribute them
>> privately to a small audience.
>> 
>>> Anyway, why not "inventing a new way" if it's more efficient than the 
>>> standard one (I'm talking now in theory)?
>> 
>> If you know as much about R as the people who wrote it, then you can
>> almost certainly invent better ways to do many of the things it does.? R
>> Core was constrained by trying to maintain back compatibility, and that
>> means some of their solutions aren't perfect.
>> 
>> But if you don't know it that well, chances are you'll make mistakes
>> when you invent your own way of doing it.? For example, you might think
>> that all front ends set the working directory to the directory of the
>> program they are running, because the ones you've tried do it that way.
>> But they don't.
>> 
>> Duncan Murdoch
>> 
>>> ------------------------------------------------------------------------
>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>> *Envoy? :* mercredi 10 octobre 2018 21:39
>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>> *Cc?:* r-help at r-project.org
>>> *Objet :* Re: [R] Genuine relative paths with R
>>> On 10/10/2018 5:31 PM, Olivier GIVAUDAN wrote:
>>>> I do not want to use the terminal, just double clicks (i.e. the 
>>>> simplest, automatic, non-manual way, without having to write a line / 
>>>> command).
>>>> Therefore everything should happen outside any terminal. The user won't 
>>>> use a terminal.
>>>> 
>>>> I don't have a Mac and I'm not familiar with this OS, sorry.
>>>> But I'm really surprised the click method gives different results than 
>>>> on Linux and Windows.
>>>> I know the click method worked both on Linux (Ubuntu latest version) and 
>>>> Windows (10).
>>>> 
>>>> Yes, I executed my file from a terminal and got obviously the same 
>>>> result as you (that's reassuring).
>>>> 
>>>> Come on guys, creating a package... It's like using a hammer to kill a 
>>>> fly...
>>> 
>>> It's a simple operation to create a package in RStudio.? Not quite a
>>> single click, but just a few.
>>> 
>>> In plain R, it's just a little more work using package.skeleton().
>>> 
>>> Really, if you are distributing R code, you should do it in the standard
>>> way, not invent your own.
>>> 
>>> Duncan Murdoch
>>> 
>>>> ------------------------------------------------------------------------
>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>> *Envoy? :* mercredi 10 octobre 2018 20:54
>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>> *Cc?:* r-help at r-project.org
>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>> On 10/10/2018 4:42 PM, Olivier GIVAUDAN wrote:
>>>>> Why are you not simply double-clicking on 'TestPWD' and choosing to 
>>>>> execute the file (don't add anything)?
>>>>> Are you executing the file from a terminal?
>>>> 
>>>> Yes, I was executing the file from my terminal.? Otherwise I really have
>>>> no idea what the "current directory" is in the Finder.?? (I'm on a Mac.
>>>> I just tried the click method; it printed my home directory, not the
>>>> directory of the script.)
>>>> 
>>>> I don't know the name of your visual front end, but you are displaying
>>>> the working directory that it sets when you click on TestPWD.? That will
>>>> be different from the working directory that your user sees in the Terminal.
>>>> 
>>>> You can see what I saw if you run TestPWD from the Terminal.? It will
>>>> print the current working directory, not the one where TestPWD happens
>>>> to live.
>>>> 
>>>> If you want to do the same sort of thing in R, you could set up a script
>>>> that calls R, and execute that in the way you executed TestPWD.? But in
>>>> another message you said you aren't allowed to do that, so I think your
>>>> best solution is the one offered by Bill Dunlap:? organize your files as
>>>> an R package.? If you name your package "Olivier", then you can find all
>>>> the files in it under the directory returned by
>>>> 
>>>>? ?? system.file(".", package = "Olivier")
>>>> 
>>>> The package system is designed for R code, but you can put arbitrary
>>>> files into a package:? just store them under the "inst" directory in
>>>> your source.? When the package is installed, those files will be moved
>>>> up one level, i.e.
>>>> 
>>>> Olivier/inst/foo
>>>> 
>>>> will become
>>>> 
>>>>? ?? system.file("foo", package = "Olivier")
>>>> 
>>>> Duncan Murdoch
>>> 
>> 
>


From olivier_giv@ud@n @ending from hotm@il@com  Thu Oct 11 01:11:14 2018
From: olivier_giv@ud@n @ending from hotm@il@com (Olivier GIVAUDAN)
Date: Wed, 10 Oct 2018 23:11:14 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <ac573e54-dde3-397e-601f-2130b5c27676@gmail.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
 <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>
 <DB3PR0202MB3355AC9A5807D00F591E3B55F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>,
 <ac573e54-dde3-397e-601f-2130b5c27676@gmail.com>
Message-ID: <DB3PR0202MB33559193F379157F44AD4AB0F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>

It is not wrong to claim that R currently doesn't have a function returning the path of the R file where this same function was invoked.

'getwd()' is indeed not equivalent to VBA 'Application.ThisWorkbook.Path' or C macro '__FILE__' or SAS %sysget(SAS_EXECFILENAME), etc.
________________________________
De : Duncan Murdoch <murdoch.duncan at gmail.com>
Envoy? : mercredi 10 octobre 2018 22:59
? : Olivier GIVAUDAN; Jeff Newmiller
Cc : r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

On 10/10/2018 6:52 PM, Olivier GIVAUDAN wrote:
>>  Again, you seem to think making a package is a big deal.
>
> Perhaps not a big deal (I believe you, I didn't write an R package yet),
> but not as straightforward as having a function within an R file
> returning its own path.
>
>> But you're free to decide not to do it:  just please don't repeat
> falseclaims about R (like the ones about paths that started this long
> thread).
>
> Which false claims?

"But I am really wondering why R doesn't have (please tell me if I'm
wrong) this basic feature as many other languages have it (batch, shell,
C, LaTeX, SAS with macro-variables, etc.)?"

Duncan Murdoch

> ------------------------------------------------------------------------
> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Envoy? :* mercredi 10 octobre 2018 22:31
> *? :* Olivier GIVAUDAN; Jeff Newmiller
> *Cc :* r-help at r-project.org
> *Objet :* Re: [R] Genuine relative paths with R
> On 10/10/2018 6:17 PM, Olivier GIVAUDAN wrote:
>>> Nothing says a package has to go on CRAN.  You can distribute
>> themprivately to a small audience.
>>
>> Yes, I agree in theory. But this solution still violates my own
>> proportionality principle.
>
> Again, you seem to think making a package is a big deal.  Maybe that was
> true 10 years ago (though I wrote and tested a package in a 45 minute
> presentation at UseR 2008), but now it's very easy.
>
> But you're free to decide not to do it:  just please don't repeat false
> claims about R (like the ones about paths that started this long thread).
>
>>
>>> If you know as much about R as the people who wrote it
>>
>> I didn't claim that (that's was a quite general / theoretical statement,
>> not necessarily and only applicable to R).
>
> I didn't say you made that claim.  I was answering your question about
> why inventing your own way is not a good idea.  It might be a good idea,
> if you know the system very, very well.  Otherwise, it's probably better
> to work the standard way.
>
> Duncan Murdoch
>
>>
>>> For example, you might thinkthat all front ends set the working
>> directory to the directory of theprogram they are running, because the
>> ones you've tried do it that way. But they don't.
>>


>> GUIs. So the workaround I finally found satisfies my current needs
>> ------------------------------------------------------------------------
>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>> *Envoy? :* mercredi 10 octobre 2018 22:07
>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>> *Cc :* r-help at r-project.org
>> *Objet :* Re: [R] Genuine relative paths with R
>> On 10/10/2018 5:45 PM, Olivier GIVAUDAN wrote:
>>> I'm not sure I'm "inventing my own way" of distributing R code... And I
>>> distribute it to a very limited audience.
>>
>> Nothing says a package has to go on CRAN.  You can distribute them
>> privately to a small audience.
>>
>>> Anyway, why not "inventing a new way" if it's more efficient than the
>>> standard one (I'm talking now in theory)?
>>
>> If you know as much about R as the people who wrote it, then you can
>> almost certainly invent better ways to do many of the things it does.  R
>> Core was constrained by trying to maintain back compatibility, and that
>> means some of their solutions aren't perfect.
>>
>> But if you don't know it that well, chances are you'll make mistakes
>> when you invent your own way of doing it.  For example, you might think
>> that all front ends set the working directory to the directory of the
>> program they are running, because the ones you've tried do it that way.
>> But they don't.
>>
>> Duncan Murdoch
>>
>>> ------------------------------------------------------------------------
>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>> *Envoy? :* mercredi 10 octobre 2018 21:39
>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>> *Cc :* r-help at r-project.org
>>> *Objet :* Re: [R] Genuine relative paths with R
>>> On 10/10/2018 5:31 PM, Olivier GIVAUDAN wrote:
>>>> I do not want to use the terminal, just double clicks (i.e. the
>>>> simplest, automatic, non-manual way, without having to write a line /
>>>> command).
>>>> Therefore everything should happen outside any terminal. The user won't
>>>> use a terminal.
>>>>
>>>> I don't have a Mac and I'm not familiar with this OS, sorry.
>>>> But I'm really surprised the click method gives different results than

>>>> I know the click method worked both on Linux (Ubuntu latest version) and

>>>>
>>>> Yes, I executed my file from a terminal and got obviously the same
>>>> result as you (that's reassuring).
>>>>
>>>> Come on guys, creating a package... It's like using a hammer to kill a
>>>> fly...
>>>
>>> It's a simple operation to create a package in RStudio.  Not quite a
>>> single click, but just a few.
>>>
>>> In plain R, it's just a little more work using package.skeleton().
>>>
>>> Really, if you are distributing R code, you should do it in the standard
>>> way, not invent your own.
>>>
>>> Duncan Murdoch
>>>
>>>> ------------------------------------------------------------------------
>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>> *Envoy? :* mercredi 10 octobre 2018 20:54
>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>> *Cc :* r-help at r-project.org
>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>> On 10/10/2018 4:42 PM, Olivier GIVAUDAN wrote:
>>>>> Why are you not simply double-clicking on 'TestPWD' and choosing to
>>>>> execute the file (don't add anything)?
>>>>> Are you executing the file from a terminal?
>>>>
>>>> Yes, I was executing the file from my terminal.  Otherwise I really have
>>>> no idea what the "current directory" is in the Finder.   (I'm on a Mac.
>>>> I just tried the click method; it printed my home directory, not the
>>>> directory of the script.)
>>>>
>>>> I don't know the name of your visual front end, but you are displaying
>>>> the working directory that it sets when you click on TestPWD.  That will
>>>> be different from the working directory that your user sees in the Terminal.
>>>>
>>>> You can see what I saw if you run TestPWD from the Terminal.  It will
>>>> print the current working directory, not the one where TestPWD happens
>>>> to live.
>>>>
>>>> If you want to do the same sort of thing in R, you could set up a script
>>>> that calls R, and execute that in the way you executed TestPWD.  But in
>>>> another message you said you aren't allowed to do that, so I think your
>>>> best solution is the one offered by Bill Dunlap:  organize your files as
>>>> an R package.  If you name your package "Olivier", then you can find all
>>>> the files in it under the directory returned by
>>>>
>>>>     system.file(".", package = "Olivier")
>>>>
>>>> The package system is designed for R code, but you can put arbitrary
>>>> files into a package:  just store them under the "inst" directory in
>>>> your source.  When the package is installed, those files will be moved
>>>> up one level, i.e.
>>>>
>>>> Olivier/inst/foo
>>>>
>>>> will become
>>>>
>>>>     system.file("foo", package = "Olivier")
>>>>
>>>> Duncan Murdoch
>>>
>>
>


	[[alternative HTML version deleted]]


From e@@wiek @ending from gm@il@com  Thu Oct 11 01:23:06 2018
From: e@@wiek @ending from gm@il@com (Ek Esawi)
Date: Wed, 10 Oct 2018 19:23:06 -0400
Subject: [R] Reorder file names read by list.files function
In-Reply-To: <CAF8bMcZEx5=NCSj9_t6ztYaXW3ywUAFuja8d6aqid3A8aeojJg@mail.gmail.com>
References: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
 <CA+ZkTxuHUZGfpq=FioOo6bZGE=MGOCHxex0Y1ssWjhAsrT2kXw@mail.gmail.com>
 <CAF8bMcZEx5=NCSj9_t6ztYaXW3ywUAFuja8d6aqid3A8aeojJg@mail.gmail.com>
Message-ID: <CA+ZkTxsk9Ctqv3ZEW=F76dGLqpcD6ZbrpRakDzfDjQY6eO10RA@mail.gmail.com>

Thank you Bill and RUI. I use month.name with sort and basename, as
suggested by Bill. i got the sorted numerical values, then i use
month.name to get proper ordered month names. The problem is that i
have to paste to the names the extension PDF giving me the correct
ordered file names, but then i get the same error message which
suggest that the code is not reading the files properly

I have not tried RUI's yet, but i will if nothing else works out.

Thanks again--EK

had to strip off file.names from the extension PDF, but when i paste
the month.name with .PDF to get the correct file names, i am getting
the same error.
On Tue, Oct 9, 2018 at 4:47 PM William Dunlap <wdunlap at tibco.com> wrote:
>
> Use basename(filename) to remove the lead parts of the full path to the file.  E.g., replace
>    FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
> with (the untested)
>     FNs <- sort(match(sub("\\.PDF", "", basename(file.names)), month.name))
>
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
>
> On Tue, Oct 9, 2018 at 1:38 PM, Ek Esawi <esawiek at gmail.com> wrote:
>>
>> Hi again,
>>
>> I worked with RUi's idea of using the match function with month.name.
>> I got numerical values for months then i sorted and pasted the PDF
>> file extension. It gave me the file order i wanted, but now statements
>> 8,9,&10 don't work and i kept getting an error which is listed below.
>> The dilemma is if i add full.names=TRUE in statement 6 then statements
>> 9 and 10 don't produce what they did earlier. If i put
>> full.names=FALSE, then i am back to square 1.
>> Any idea is greatly appreciated.:
>>
>> The code
>>
>> 1. nstall.packages("tabulizer")
>> 2. installed.packages("stringr")
>> 3. library(stringr)
>> 4. library(tabulizer)
>> 5. path = "C:/Users/namei/Documents/TextMining/S2017"
>> 6. file.names <- dir(path, pattern =".PDF",full.names = TRUE)
>> 7. file.names <- str_remove(file.names,"\\s[0-9][0-9]")
>> 8. FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
>> 9. FNs1 <- paste0(month.name[FNs],".","PDF")
>> 10 A <- lapply(FNs1, function(i) extract_tables(i))
>>
>> Output and the error message.
>>
>> path = "C:/Users/eesawi/Documents/TextMining/S2017"
>> > file.names <- dir(path, pattern =".PDF",full.names = TRUE)
>> > file.names <- str_remove(file.names,"\\s[0-9][0-9]")
>> > FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
>> > FNs1 <- paste0(month.name[FNs],".","PDF")
>> > A <- lapply(FNs1, function(i) extract_tables(i))
>>  Show Traceback
>>
>>  Error in normalizePath(path.expand(path), winslash, mustWork) :
>>   path[1]=".PDF": The system cannot find the file specified
>> On Tue, Oct 9, 2018 at 9:44 AM Ek Esawi <esawiek at gmail.com> wrote:
>> >
>> > Hi All--
>> >
>> > I used base R list.file function to read files from a directory. The
>> > file names are months (April, August, etc). That's the system reads
>> > them in alphabetical order., but i want to reordered them in calendar
>> > order (January, February, ...December).. I thought i might be able to
>> > do it via RegEx or possibly gtools package, I am wondering if there is
>> > an easier way.
>> >
>> > Thanks--EK
>> >
>> > Example
>> > path = "C:/Users/name/Downloads/MyFiles"
>> > file.names <- dir(path, pattern =".PDF")
>> >
>> > Example output
>> > Output:
>> > "February.PDF"  "January.PDF" "March.PDF"
>> > Desired output
>> > "January.PDF"  "February.PDF" "March.PDF"
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>


From d@kot@judo @ending from m@c@com  Thu Oct 11 01:29:39 2018
From: d@kot@judo @ending from m@c@com (Peter Claussen)
Date: Wed, 10 Oct 2018 18:29:39 -0500
Subject: [R] Genuine relative paths with R
In-Reply-To: <DB3PR0202MB33559193F379157F44AD4AB0F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
 <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>
 <DB3PR0202MB3355AC9A5807D00F591E3B55F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <ac573e54-dde3-397e-601f-2130b5c27676@gmail.com>
 <DB3PR0202MB33559193F379157F44AD4AB0F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
Message-ID: <42363BAD-7D85-4A57-B35A-0CCBA2EC1FD2@mac.com>

If I?m following all this correctly, it seems your criticism is that R doesn?t provide a run-time function that is equivalent to a compile-time macro. You do realize that __FILE__ is not part of the C programming language - it?s a predefined variable recognized by the cpp - the C preprocessor program. Similarly, SAS_EXECFILENAME is a predefined variable that can be recognized by the SAS macro processor, but has no meaning in the SAS language itself.

So, to go back to your original post:
> 1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.


This is what a macro processor does. Are you asking for a macro language in R?

Cheers

> On Oct 10, 2018, at 6:11 PM, Olivier GIVAUDAN <olivier_givaudan at hotmail.com> wrote:
> 
> It is not wrong to claim that R currently doesn't have a function returning the path of the R file where this same function was invoked.
> 
> 'getwd()' is indeed not equivalent to VBA 'Application.ThisWorkbook.Path' or C macro '__FILE__' or SAS %sysget(SAS_EXECFILENAME), etc.


	[[alternative HTML version deleted]]


From murdoch@dunc@n @ending from gm@il@com  Thu Oct 11 01:51:06 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Wed, 10 Oct 2018 19:51:06 -0400
Subject: [R] Genuine relative paths with R
In-Reply-To: <DB3PR0202MB33559193F379157F44AD4AB0F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
 <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>
 <DB3PR0202MB3355AC9A5807D00F591E3B55F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <ac573e54-dde3-397e-601f-2130b5c27676@gmail.com>
 <DB3PR0202MB33559193F379157F44AD4AB0F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
Message-ID: <f96e0c64-0e77-47f8-dbc1-5b49313ebb39@gmail.com>

On 10/10/2018 7:11 PM, Olivier GIVAUDAN wrote:
> It is not wrong to claim that R currently doesn't have a function 
> returning the path of the R file where this same function was invoked.

But it does.  I didn't realize that's what you were asking for.  This 
has nothing to do with your subject line.

If you source a file from somewhere, then each of the functions it 
creates is marked with its source location.  So you can put this in a file:

foo <- function () 1

filename <- normalizePath(getSrcFilename(foo, full.names=TRUE))

(You need the normalizePath() call because all that will be saved is the 
path that was used.  If it was a relative path, that's what you get 
before you normalize it.  You don't really need the foo function; you 
could put an anonymous function into the getSrcFilename call.  It's just 
usually easier to include a function that already exists.)

When you source() that file, filename will get the name of the file it 
came from.

This is a lot like __FILE__ in C.  One difference is that it is usually 
turned off when the function is being loaded into a package, but you can 
optionally turn it on.

You can also find out what line foo starts on, using

fooline <- getSrcLocation(foo)

This is a lot like __LINE__ in C.

Duncan Murdoch


> 
> 'getwd()' is indeed not equivalent to VBA 
> 'Application.ThisWorkbook.Path' or C macro '__FILE__' or SAS 
> %sysget(SAS_EXECFILENAME), etc.
> ------------------------------------------------------------------------
> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Envoy? :* mercredi 10 octobre 2018 22:59
> *? :* Olivier GIVAUDAN; Jeff Newmiller
> *Cc?:* r-help at r-project.org
> *Objet :* Re: [R] Genuine relative paths with R
> On 10/10/2018 6:52 PM, Olivier GIVAUDAN wrote:
>>>? Again, you seem to think making a package is a big deal.
>> 
>> Perhaps not a big deal (I believe you, I didn't write an R package yet), 
>> but not as straightforward as having a function within an R file 
>> returning its own path.
>> 
>>> But you're free to decide not to do it:? just please don't repeat 
>> falseclaims about R (like the ones about paths that started this long 
>> thread).
>> 
>> Which false claims?
> 
> "But I am really wondering why R doesn't have (please tell me if I'm
> wrong) this basic feature as many other languages have it (batch, shell,
> C, LaTeX, SAS with macro-variables, etc.)?"
> 
> Duncan Murdoch
> 
>> ------------------------------------------------------------------------
>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>> *Envoy? :* mercredi 10 octobre 2018 22:31
>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>> *Cc?:* r-help at r-project.org
>> *Objet :* Re: [R] Genuine relative paths with R
>> On 10/10/2018 6:17 PM, Olivier GIVAUDAN wrote:
>>>> Nothing says a package has to go on CRAN.? You can distribute 
>>> themprivately to a small audience.
>>> 
>>> Yes, I agree in theory. But this solution still violates my own 
>>> proportionality principle.
>> 
>> Again, you seem to think making a package is a big deal.? Maybe that was
>> true 10 years ago (though I wrote and tested a package in a 45 minute
>> presentation at UseR 2008), but now it's very easy.
>> 
>> But you're free to decide not to do it:? just please don't repeat false
>> claims about R (like the ones about paths that started this long thread).
>> 
>>> 
>>>> If you know as much about R as the people who wrote it
>>> 
>>> I didn't claim that (that's was a quite general / theoretical statement, 
>>> not necessarily and only applicable to R).
>> 
>> I didn't say you made that claim.? I was answering your question about
>> why inventing your own way is not a good idea.? It might be a good idea,
>> if you know the system very, very well.? Otherwise, it's probably better
>> to work the standard way.
>> 
>> Duncan Murdoch
>> 
>>> 
>>>> For example, you might thinkthat all front ends set the working 
>>> directory to the directory of theprogram they are running, because the 
>>> ones you've tried do it that way. But they don't.
>>> 
>>> It runs that way at least on Windows with RStudio and R GUI and I know 
>>> the recipients of my R code work on Windows with at least one of these 2 
>>> GUIs. So the workaround I finally found satisfies my current needs
>>> ------------------------------------------------------------------------
>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>> *Envoy? :* mercredi 10 octobre 2018 22:07
>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>> *Cc?:* r-help at r-project.org
>>> *Objet :* Re: [R] Genuine relative paths with R
>>> On 10/10/2018 5:45 PM, Olivier GIVAUDAN wrote:
>>>> I'm not sure I'm "inventing my own way" of distributing R code... And I 
>>>> distribute it to a very limited audience.
>>> 
>>> Nothing says a package has to go on CRAN.? You can distribute them
>>> privately to a small audience.
>>> 
>>>> Anyway, why not "inventing a new way" if it's more efficient than the 
>>>> standard one (I'm talking now in theory)?
>>> 
>>> If you know as much about R as the people who wrote it, then you can
>>> almost certainly invent better ways to do many of the things it does.? R
>>> Core was constrained by trying to maintain back compatibility, and that
>>> means some of their solutions aren't perfect.
>>> 
>>> But if you don't know it that well, chances are you'll make mistakes
>>> when you invent your own way of doing it.? For example, you might think
>>> that all front ends set the working directory to the directory of the
>>> program they are running, because the ones you've tried do it that way.
>>> But they don't.
>>> 
>>> Duncan Murdoch
>>> 
>>>> ------------------------------------------------------------------------
>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>> *Envoy? :* mercredi 10 octobre 2018 21:39
>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>> *Cc?:* r-help at r-project.org
>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>> On 10/10/2018 5:31 PM, Olivier GIVAUDAN wrote:
>>>>> I do not want to use the terminal, just double clicks (i.e. the 
>>>>> simplest, automatic, non-manual way, without having to write a line / 
>>>>> command).
>>>>> Therefore everything should happen outside any terminal. The user won't 
>>>>> use a terminal.
>>>>> 
>>>>> I don't have a Mac and I'm not familiar with this OS, sorry.
>>>>> But I'm really surprised the click method gives different results than 
>>>>> on Linux and Windows.
>>>>> I know the click method worked both on Linux (Ubuntu latest version) and 
>>>>> Windows (10).
>>>>> 
>>>>> Yes, I executed my file from a terminal and got obviously the same 
>>>>> result as you (that's reassuring).
>>>>> 
>>>>> Come on guys, creating a package... It's like using a hammer to kill a 
>>>>> fly...
>>>> 
>>>> It's a simple operation to create a package in RStudio.? Not quite a
>>>> single click, but just a few.
>>>> 
>>>> In plain R, it's just a little more work using package.skeleton().
>>>> 
>>>> Really, if you are distributing R code, you should do it in the standard
>>>> way, not invent your own.
>>>> 
>>>> Duncan Murdoch
>>>> 
>>>>> ------------------------------------------------------------------------
>>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>>> *Envoy? :* mercredi 10 octobre 2018 20:54
>>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>>> *Cc?:* r-help at r-project.org
>>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>>> On 10/10/2018 4:42 PM, Olivier GIVAUDAN wrote:
>>>>>> Why are you not simply double-clicking on 'TestPWD' and choosing to 
>>>>>> execute the file (don't add anything)?
>>>>>> Are you executing the file from a terminal?
>>>>> 
>>>>> Yes, I was executing the file from my terminal.? Otherwise I really have
>>>>> no idea what the "current directory" is in the Finder.?? (I'm on a Mac.
>>>>> I just tried the click method; it printed my home directory, not the
>>>>> directory of the script.)
>>>>> 
>>>>> I don't know the name of your visual front end, but you are displaying
>>>>> the working directory that it sets when you click on TestPWD.? That will
>>>>> be different from the working directory that your user sees in the Terminal.
>>>>> 
>>>>> You can see what I saw if you run TestPWD from the Terminal.? It will
>>>>> print the current working directory, not the one where TestPWD happens
>>>>> to live.
>>>>> 
>>>>> If you want to do the same sort of thing in R, you could set up a script
>>>>> that calls R, and execute that in the way you executed TestPWD.? But in
>>>>> another message you said you aren't allowed to do that, so I think your
>>>>> best solution is the one offered by Bill Dunlap:? organize your files as
>>>>> an R package.? If you name your package "Olivier", then you can find all
>>>>> the files in it under the directory returned by
>>>>> 
>>>>>? ?? system.file(".", package = "Olivier")
>>>>> 
>>>>> The package system is designed for R code, but you can put arbitrary
>>>>> files into a package:? just store them under the "inst" directory in
>>>>> your source.? When the package is installed, those files will be moved
>>>>> up one level, i.e.
>>>>> 
>>>>> Olivier/inst/foo
>>>>> 
>>>>> will become
>>>>> 
>>>>>? ?? system.file("foo", package = "Olivier")
>>>>> 
>>>>> Duncan Murdoch
>>>> 
>>> 
>> 
>


From olivier_giv@ud@n @ending from hotm@il@com  Thu Oct 11 01:53:41 2018
From: olivier_giv@ud@n @ending from hotm@il@com (Olivier GIVAUDAN)
Date: Wed, 10 Oct 2018 23:53:41 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <42363BAD-7D85-4A57-B35A-0CCBA2EC1FD2@mac.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
 <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>
 <DB3PR0202MB3355AC9A5807D00F591E3B55F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <ac573e54-dde3-397e-601f-2130b5c27676@gmail.com>
 <DB3PR0202MB33559193F379157F44AD4AB0F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>,
 <42363BAD-7D85-4A57-B35A-0CCBA2EC1FD2@mac.com>
Message-ID: <VI1PR0202MB3357AC579BC0B0D7C4C66BC2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>

Yes, I am aware that both '__FILE__' and 'SAS_EXECFILENAME' are macro variables. I don't know how the VBA 'Application.ThisWorkbook.Path' VBA or PHP '__DIR__' (or '__FILE__') work.

And yes, indeed, until now I didn't even realise that this simple find-and-replace solution of "mine" is actually the basic job of a preprocessor when it expands macro variables, thank you!

A macro language in R, yes, I think it would be useful, at least for this function. If nothing simpler is available, of course...
________________________________
De : Peter Claussen <dakotajudo at mac.com>
Envoy? : mercredi 10 octobre 2018 23:29
? : Olivier GIVAUDAN
Cc : Duncan Murdoch; Jeff Newmiller; r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

If I?m following all this correctly, it seems your criticism is that R doesn?t provide a run-time function that is equivalent to a compile-time macro. You do realize that __FILE__ is not part of the C programming language - it?s a predefined variable recognized by the cpp - the C preprocessor program. Similarly, SAS_EXECFILENAME is a predefined variable that can be recognized by the SAS macro processor, but has no meaning in the SAS language itself.

So, to go back to your original post:
1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.

This is what a macro processor does. Are you asking for a macro language in R?

Cheers

On Oct 10, 2018, at 6:11 PM, Olivier GIVAUDAN <olivier_givaudan at hotmail.com<mailto:olivier_givaudan at hotmail.com>> wrote:

It is not wrong to claim that R currently doesn't have a function returning the path of the R file where this same function was invoked.

'getwd()' is indeed not equivalent to VBA 'Application.ThisWorkbook.Path' or C macro '__FILE__' or SAS %sysget(SAS_EXECFILENAME), etc.


	[[alternative HTML version deleted]]


From murdoch@dunc@n @ending from gm@il@com  Thu Oct 11 01:53:45 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Wed, 10 Oct 2018 19:53:45 -0400
Subject: [R] Reorder file names read by list.files function
In-Reply-To: <CA+ZkTxsk9Ctqv3ZEW=F76dGLqpcD6ZbrpRakDzfDjQY6eO10RA@mail.gmail.com>
References: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
 <CA+ZkTxuHUZGfpq=FioOo6bZGE=MGOCHxex0Y1ssWjhAsrT2kXw@mail.gmail.com>
 <CAF8bMcZEx5=NCSj9_t6ztYaXW3ywUAFuja8d6aqid3A8aeojJg@mail.gmail.com>
 <CA+ZkTxsk9Ctqv3ZEW=F76dGLqpcD6ZbrpRakDzfDjQY6eO10RA@mail.gmail.com>
Message-ID: <8dfaf876-0fd9-f2d6-665c-a4636a1d3d66@gmail.com>

On 10/10/2018 7:23 PM, Ek Esawi wrote:
> Thank you Bill and RUI. I use month.name with sort and basename, as
> suggested by Bill. i got the sorted numerical values, then i use
> month.name to get proper ordered month names. The problem is that i
> have to paste to the names the extension PDF giving me the correct
> ordered file names, but then i get the same error message which
> suggest that the code is not reading the files properly

You shouldn't need to do any pasting.  Extract the months, use the 
order() function to find their proper order, then apply that vector to 
the original vector of filenames.

Duncan Murdoch

> 
> I have not tried RUI's yet, but i will if nothing else works out.
> 
> Thanks again--EK
> 
> had to strip off file.names from the extension PDF, but when i paste
> the month.name with .PDF to get the correct file names, i am getting
> the same error.
> On Tue, Oct 9, 2018 at 4:47 PM William Dunlap <wdunlap at tibco.com> wrote:
>>
>> Use basename(filename) to remove the lead parts of the full path to the file.  E.g., replace
>>     FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
>> with (the untested)
>>      FNs <- sort(match(sub("\\.PDF", "", basename(file.names)), month.name))
>>
>> Bill Dunlap
>> TIBCO Software
>> wdunlap tibco.com
>>
>> On Tue, Oct 9, 2018 at 1:38 PM, Ek Esawi <esawiek at gmail.com> wrote:
>>>
>>> Hi again,
>>>
>>> I worked with RUi's idea of using the match function with month.name.
>>> I got numerical values for months then i sorted and pasted the PDF
>>> file extension. It gave me the file order i wanted, but now statements
>>> 8,9,&10 don't work and i kept getting an error which is listed below.
>>> The dilemma is if i add full.names=TRUE in statement 6 then statements
>>> 9 and 10 don't produce what they did earlier. If i put
>>> full.names=FALSE, then i am back to square 1.
>>> Any idea is greatly appreciated.:
>>>
>>> The code
>>>
>>> 1. nstall.packages("tabulizer")
>>> 2. installed.packages("stringr")
>>> 3. library(stringr)
>>> 4. library(tabulizer)
>>> 5. path = "C:/Users/namei/Documents/TextMining/S2017"
>>> 6. file.names <- dir(path, pattern =".PDF",full.names = TRUE)
>>> 7. file.names <- str_remove(file.names,"\\s[0-9][0-9]")
>>> 8. FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
>>> 9. FNs1 <- paste0(month.name[FNs],".","PDF")
>>> 10 A <- lapply(FNs1, function(i) extract_tables(i))
>>>
>>> Output and the error message.
>>>
>>> path = "C:/Users/eesawi/Documents/TextMining/S2017"
>>>> file.names <- dir(path, pattern =".PDF",full.names = TRUE)
>>>> file.names <- str_remove(file.names,"\\s[0-9][0-9]")
>>>> FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
>>>> FNs1 <- paste0(month.name[FNs],".","PDF")
>>>> A <- lapply(FNs1, function(i) extract_tables(i))
>>>   Show Traceback
>>>
>>>   Error in normalizePath(path.expand(path), winslash, mustWork) :
>>>    path[1]=".PDF": The system cannot find the file specified
>>> On Tue, Oct 9, 2018 at 9:44 AM Ek Esawi <esawiek at gmail.com> wrote:
>>>>
>>>> Hi All--
>>>>
>>>> I used base R list.file function to read files from a directory. The
>>>> file names are months (April, August, etc). That's the system reads
>>>> them in alphabetical order., but i want to reordered them in calendar
>>>> order (January, February, ...December).. I thought i might be able to
>>>> do it via RegEx or possibly gtools package, I am wondering if there is
>>>> an easier way.
>>>>
>>>> Thanks--EK
>>>>
>>>> Example
>>>> path = "C:/Users/name/Downloads/MyFiles"
>>>> file.names <- dir(path, pattern =".PDF")
>>>>
>>>> Example output
>>>> Output:
>>>> "February.PDF"  "January.PDF" "March.PDF"
>>>> Desired output
>>>> "January.PDF"  "February.PDF" "March.PDF"
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>>
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From wdunl@p @ending from tibco@com  Thu Oct 11 02:05:21 2018
From: wdunl@p @ending from tibco@com (William Dunlap)
Date: Wed, 10 Oct 2018 17:05:21 -0700
Subject: [R] Reorder file names read by list.files function
In-Reply-To: <CA+ZkTxsk9Ctqv3ZEW=F76dGLqpcD6ZbrpRakDzfDjQY6eO10RA@mail.gmail.com>
References: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
 <CA+ZkTxuHUZGfpq=FioOo6bZGE=MGOCHxex0Y1ssWjhAsrT2kXw@mail.gmail.com>
 <CAF8bMcZEx5=NCSj9_t6ztYaXW3ywUAFuja8d6aqid3A8aeojJg@mail.gmail.com>
 <CA+ZkTxsk9Ctqv3ZEW=F76dGLqpcD6ZbrpRakDzfDjQY6eO10RA@mail.gmail.com>
Message-ID: <CAF8bMcaCk7Y2QotVQp19otgH07KTiYJvt+_G732wCnttOHMr9g@mail.gmail.com>

You can paste the directory names, dir.names(files), back on, with
file.path(), after you do the sorting.  A better idiom is to use order()
instead of sort() and usng order's output to subscript file.names.  E.g.,
the following sorts by year and month number.

> file.names <- c("C:/tmp/June_2018.PDF", "C:/tmp/May_2018.PDF",
"C:/tmp/October_2016.PDF")
> bfile.names <- sub("\\..*$", "", basename(file.names))
> bfile.names
[1] "June_2018"    "May_2018"     "October_2016"
> month <- sub("^([[:alpha:]]+)_.*$", "\\1", bfile.names)
> month
[1] "June"    "May"     "October"
> month.names
Error: object 'month.names' not found
> month.names <-
c("January","February","March","April","May","June","July","August","September","October","November","December")
> month.number <- match(month, month.names)
> month.number
[1]  6  5 10
> file.names[ order(year, month.number) ]
[1] "C:/tmp/October_2016.PDF" "C:/tmp/May_2018.PDF"
 "C:/tmp/June_2018.PDF"




Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Wed, Oct 10, 2018 at 4:23 PM, Ek Esawi <esawiek at gmail.com> wrote:

> Thank you Bill and RUI. I use month.name with sort and basename, as
> suggested by Bill. i got the sorted numerical values, then i use
> month.name to get proper ordered month names. The problem is that i
> have to paste to the names the extension PDF giving me the correct
> ordered file names, but then i get the same error message which
> suggest that the code is not reading the files properly
>
> I have not tried RUI's yet, but i will if nothing else works out.
>
> Thanks again--EK
>
> had to strip off file.names from the extension PDF, but when i paste
> the month.name with .PDF to get the correct file names, i am getting
> the same error.
> On Tue, Oct 9, 2018 at 4:47 PM William Dunlap <wdunlap at tibco.com> wrote:
> >
> > Use basename(filename) to remove the lead parts of the full path to the
> file.  E.g., replace
> >    FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
> > with (the untested)
> >     FNs <- sort(match(sub("\\.PDF", "", basename(file.names)),
> month.name))
> >
> > Bill Dunlap
> > TIBCO Software
> > wdunlap tibco.com
> >
> > On Tue, Oct 9, 2018 at 1:38 PM, Ek Esawi <esawiek at gmail.com> wrote:
> >>
> >> Hi again,
> >>
> >> I worked with RUi's idea of using the match function with month.name.
> >> I got numerical values for months then i sorted and pasted the PDF
> >> file extension. It gave me the file order i wanted, but now statements
> >> 8,9,&10 don't work and i kept getting an error which is listed below.
> >> The dilemma is if i add full.names=TRUE in statement 6 then statements
> >> 9 and 10 don't produce what they did earlier. If i put
> >> full.names=FALSE, then i am back to square 1.
> >> Any idea is greatly appreciated.:
> >>
> >> The code
> >>
> >> 1. nstall.packages("tabulizer")
> >> 2. installed.packages("stringr")
> >> 3. library(stringr)
> >> 4. library(tabulizer)
> >> 5. path = "C:/Users/namei/Documents/TextMining/S2017"
> >> 6. file.names <- dir(path, pattern =".PDF",full.names = TRUE)
> >> 7. file.names <- str_remove(file.names,"\\s[0-9][0-9]")
> >> 8. FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
> >> 9. FNs1 <- paste0(month.name[FNs],".","PDF")
> >> 10 A <- lapply(FNs1, function(i) extract_tables(i))
> >>
> >> Output and the error message.
> >>
> >> path = "C:/Users/eesawi/Documents/TextMining/S2017"
> >> > file.names <- dir(path, pattern =".PDF",full.names = TRUE)
> >> > file.names <- str_remove(file.names,"\\s[0-9][0-9]")
> >> > FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
> >> > FNs1 <- paste0(month.name[FNs],".","PDF")
> >> > A <- lapply(FNs1, function(i) extract_tables(i))
> >>  Show Traceback
> >>
> >>  Error in normalizePath(path.expand(path), winslash, mustWork) :
> >>   path[1]=".PDF": The system cannot find the file specified
> >> On Tue, Oct 9, 2018 at 9:44 AM Ek Esawi <esawiek at gmail.com> wrote:
> >> >
> >> > Hi All--
> >> >
> >> > I used base R list.file function to read files from a directory. The
> >> > file names are months (April, August, etc). That's the system reads
> >> > them in alphabetical order., but i want to reordered them in calendar
> >> > order (January, February, ...December).. I thought i might be able to
> >> > do it via RegEx or possibly gtools package, I am wondering if there is
> >> > an easier way.
> >> >
> >> > Thanks--EK
> >> >
> >> > Example
> >> > path = "C:/Users/name/Downloads/MyFiles"
> >> > file.names <- dir(path, pattern =".PDF")
> >> >
> >> > Example output
> >> > Output:
> >> > "February.PDF"  "January.PDF" "March.PDF"
> >> > Desired output
> >> > "January.PDF"  "February.PDF" "March.PDF"
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >
> >
>

	[[alternative HTML version deleted]]


From olivier_giv@ud@n @ending from hotm@il@com  Thu Oct 11 02:08:08 2018
From: olivier_giv@ud@n @ending from hotm@il@com (Olivier GIVAUDAN)
Date: Thu, 11 Oct 2018 00:08:08 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <f96e0c64-0e77-47f8-dbc1-5b49313ebb39@gmail.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
 <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>
 <DB3PR0202MB3355AC9A5807D00F591E3B55F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <ac573e54-dde3-397e-601f-2130b5c27676@gmail.com>
 <DB3PR0202MB33559193F379157F44AD4AB0F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>,
 <f96e0c64-0e77-47f8-dbc1-5b49313ebb39@gmail.com>
Message-ID: <VI1PR0202MB3357AF40A744B10736F640A3F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>

I think Gabor (at least) already suggested this solution. But the problem is: how do you source this file containing this 'foo' function without writing its absolute path?

It's a kind of initialisation issue.

> a function returning the path of the R file where this same function was invoked.
>> I didn't realize that's what you were asking for. This has nothing to do with your subject line.

It's just a trick to work with relative paths without having to write any hardcoded (by definition) absolute path beforehand.
________________________________
De : Duncan Murdoch <murdoch.duncan at gmail.com>
Envoy? : mercredi 10 octobre 2018 23:51
? : Olivier GIVAUDAN; Jeff Newmiller
Cc : r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

On 10/10/2018 7:11 PM, Olivier GIVAUDAN wrote:
> It is not wrong to claim that R currently doesn't have a function
> returning the path of the R file where this same function was invoked.

But it does.  I didn't realize that's what you were asking for.  This
has nothing to do with your subject line.

If you source a file from somewhere, then each of the functions it
creates is marked with its source location.  So you can put this in a file:

foo <- function () 1

filename <- normalizePath(getSrcFilename(foo, full.names=TRUE))

(You need the normalizePath() call because all that will be saved is the
path that was used.  If it was a relative path, that's what you get
before you normalize it.  You don't really need the foo function; you
could put an anonymous function into the getSrcFilename call.  It's just
usually easier to include a function that already exists.)

When you source() that file, filename will get the name of the file it
came from.

This is a lot like __FILE__ in C.  One difference is that it is usually
turned off when the function is being loaded into a package, but you can
optionally turn it on.

You can also find out what line foo starts on, using

fooline <- getSrcLocation(foo)

This is a lot like __LINE__ in C.

Duncan Murdoch


>
> 'getwd()' is indeed not equivalent to VBA
> 'Application.ThisWorkbook.Path' or C macro '__FILE__' or SAS
> %sysget(SAS_EXECFILENAME), etc.
> ------------------------------------------------------------------------
> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Envoy? :* mercredi 10 octobre 2018 22:59
> *? :* Olivier GIVAUDAN; Jeff Newmiller
> *Cc :* r-help at r-project.org
> *Objet :* Re: [R] Genuine relative paths with R
> On 10/10/2018 6:52 PM, Olivier GIVAUDAN wrote:
>>>  Again, you seem to think making a package is a big deal.
>>
>> Perhaps not a big deal (I believe you, I didn't write an R package yet),
>> but not as straightforward as having a function within an R file
>> returning its own path.
>>
>>> But you're free to decide not to do it:  just please don't repeat
>> falseclaims about R (like the ones about paths that started this long
>> thread).
>>
>> Which false claims?
>
> "But I am really wondering why R doesn't have (please tell me if I'm
> wrong) this basic feature as many other languages have it (batch, shell,
> C, LaTeX, SAS with macro-variables, etc.)?"
>
> Duncan Murdoch
>
>> ------------------------------------------------------------------------
>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>> *Envoy? :* mercredi 10 octobre 2018 22:31
>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>> *Cc :* r-help at r-project.org
>> *Objet :* Re: [R] Genuine relative paths with R
>> On 10/10/2018 6:17 PM, Olivier GIVAUDAN wrote:
>>>> Nothing says a package has to go on CRAN.  You can distribute
>>> themprivately to a small audience.
>>>
>>> Yes, I agree in theory. But this solution still violates my own
>>> proportionality principle.
>>
>> Again, you seem to think making a package is a big deal.  Maybe that was
>> true 10 years ago (though I wrote and tested a package in a 45 minute
>> presentation at UseR 2008), but now it's very easy.
>>
>> But you're free to decide not to do it:  just please don't repeat false
>> claims about R (like the ones about paths that started this long thread).
>>
>>>
>>>> If you know as much about R as the people who wrote it
>>>
>>> I didn't claim that (that's was a quite general / theoretical statement,
>>> not necessarily and only applicable to R).
>>
>> I didn't say you made that claim.  I was answering your question about
>> why inventing your own way is not a good idea.  It might be a good idea,
>> if you know the system very, very well.  Otherwise, it's probably better
>> to work the standard way.
>>
>> Duncan Murdoch
>>
>>>
>>>> For example, you might thinkthat all front ends set the working
>>> directory to the directory of theprogram they are running, because the
>>> ones you've tried do it that way. But they don't.
>>>


>>> GUIs. So the workaround I finally found satisfies my current needs
>>> ------------------------------------------------------------------------
>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>> *Envoy? :* mercredi 10 octobre 2018 22:07
>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>> *Cc :* r-help at r-project.org
>>> *Objet :* Re: [R] Genuine relative paths with R
>>> On 10/10/2018 5:45 PM, Olivier GIVAUDAN wrote:
>>>> I'm not sure I'm "inventing my own way" of distributing R code... And I
>>>> distribute it to a very limited audience.
>>>
>>> Nothing says a package has to go on CRAN.  You can distribute them
>>> privately to a small audience.
>>>
>>>> Anyway, why not "inventing a new way" if it's more efficient than the
>>>> standard one (I'm talking now in theory)?
>>>
>>> If you know as much about R as the people who wrote it, then you can
>>> almost certainly invent better ways to do many of the things it does.  R
>>> Core was constrained by trying to maintain back compatibility, and that
>>> means some of their solutions aren't perfect.
>>>
>>> But if you don't know it that well, chances are you'll make mistakes
>>> when you invent your own way of doing it.  For example, you might think
>>> that all front ends set the working directory to the directory of the
>>> program they are running, because the ones you've tried do it that way.
>>> But they don't.
>>>
>>> Duncan Murdoch
>>>
>>>> ------------------------------------------------------------------------
>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>> *Envoy? :* mercredi 10 octobre 2018 21:39
>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>> *Cc :* r-help at r-project.org
>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>> On 10/10/2018 5:31 PM, Olivier GIVAUDAN wrote:
>>>>> I do not want to use the terminal, just double clicks (i.e. the
>>>>> simplest, automatic, non-manual way, without having to write a line /
>>>>> command).
>>>>> Therefore everything should happen outside any terminal. The user won't
>>>>> use a terminal.
>>>>>
>>>>> I don't have a Mac and I'm not familiar with this OS, sorry.
>>>>> But I'm really surprised the click method gives different results than

>>>>> I know the click method worked both on Linux (Ubuntu latest version) and

>>>>>
>>>>> Yes, I executed my file from a terminal and got obviously the same
>>>>> result as you (that's reassuring).
>>>>>
>>>>> Come on guys, creating a package... It's like using a hammer to kill a
>>>>> fly...
>>>>
>>>> It's a simple operation to create a package in RStudio.  Not quite a
>>>> single click, but just a few.
>>>>
>>>> In plain R, it's just a little more work using package.skeleton().
>>>>
>>>> Really, if you are distributing R code, you should do it in the standard
>>>> way, not invent your own.
>>>>
>>>> Duncan Murdoch
>>>>
>>>>> ------------------------------------------------------------------------
>>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>>> *Envoy? :* mercredi 10 octobre 2018 20:54
>>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>>> *Cc :* r-help at r-project.org
>>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>>> On 10/10/2018 4:42 PM, Olivier GIVAUDAN wrote:
>>>>>> Why are you not simply double-clicking on 'TestPWD' and choosing to
>>>>>> execute the file (don't add anything)?
>>>>>> Are you executing the file from a terminal?
>>>>>
>>>>> Yes, I was executing the file from my terminal.  Otherwise I really have
>>>>> no idea what the "current directory" is in the Finder.   (I'm on a Mac.
>>>>> I just tried the click method; it printed my home directory, not the
>>>>> directory of the script.)
>>>>>
>>>>> I don't know the name of your visual front end, but you are displaying
>>>>> the working directory that it sets when you click on TestPWD.  That will
>>>>> be different from the working directory that your user sees in the Terminal.
>>>>>
>>>>> You can see what I saw if you run TestPWD from the Terminal.  It will
>>>>> print the current working directory, not the one where TestPWD happens
>>>>> to live.
>>>>>
>>>>> If you want to do the same sort of thing in R, you could set up a script
>>>>> that calls R, and execute that in the way you executed TestPWD.  But in
>>>>> another message you said you aren't allowed to do that, so I think your
>>>>> best solution is the one offered by Bill Dunlap:  organize your files as
>>>>> an R package.  If you name your package "Olivier", then you can find all
>>>>> the files in it under the directory returned by
>>>>>
>>>>>     system.file(".", package = "Olivier")
>>>>>
>>>>> The package system is designed for R code, but you can put arbitrary
>>>>> files into a package:  just store them under the "inst" directory in
>>>>> your source.  When the package is installed, those files will be moved
>>>>> up one level, i.e.
>>>>>
>>>>> Olivier/inst/foo
>>>>>
>>>>> will become
>>>>>
>>>>>     system.file("foo", package = "Olivier")
>>>>>
>>>>> Duncan Murdoch
>>>>
>>>
>>
>


	[[alternative HTML version deleted]]


From zp@imp@o @ending from gm@il@com  Thu Oct 11 05:37:06 2018
From: zp@imp@o @ending from gm@il@com (Zach Simpson)
Date: Thu, 11 Oct 2018 16:37:06 +1300
Subject: [R] 
 Defining Variables from a Matrix for 10-Fold Cross Validation
Message-ID: <CAJByKzqdJMBEx5hFTSfZSQof=3uKt=U=nSWPbTNDCPFQKDRPeQ@mail.gmail.com>

Hey Matthew,

In addition to what's been mentioned, you may want to look at the
'caret' package, as it provides a nice system for whatever flavor of
cross-validation you're after *and* has a built-in method for `kknn`:

http://topepo.github.io/caret/available-models.html

Hope this helps,
Zach Simpson

On October 9, 2018 15:34:15 -0700, David Winsemius
<dwinsemius at comcast.net> wrote:
> Message: 26
> Date: Tue, 9 Oct 2018 15:34:15 -0700
> From: David Winsemius <dwinsemius at comcast.net>
> To: matthew campbell <mcc3qb at virginia.edu>
> Cc: R-help at r-project.org
> Subject: Re: [R]  Defining Variables from a Matrix for 10-Fold Cross
>         Validation
> Message-ID: <85DC895F-BEA2-4E47-ACC1-49A5C350B2D8 at comcast.net>
> Content-Type: text/plain; charset="us-ascii"
>
>
> > On Oct 9, 2018, at 3:04 PM, matthew campbell <mcc3qb at virginia.edu> wrote:
> >
> > Good afternoon,
> >
> > I am trying to run a 10-fold CV, using a matrix as my data set.
> > Essentially, I want "y" to be the first column of the matrix, and my "x" to
> > be all remaining columns (2-257). I've posted some of the code I used
> > below, and the data set (called "zip.train") is in the "ElemStatLearn"
> > package. The error message is highlighted in red, and the corresponding
> > section of code is bolded. (I am not concerned with the warning message,
> > just the error message).
> >
> > The issue I am experiencing is the error message below the code: I haven't
> > come across that specific message before, and am not exactly sure how to
> > interpret its meaning. What exactly is this error message trying to tell
> > me?  Any suggestions or insights are appreciated!
> >
> > Thank you all,
> >
> > Matthew Campbell
> >
> >
> >> library (ElemStatLearn)
> >> library(kknn)
> >> data(zip.train)
> >> train=zip.train[which(zip.train[,1] %in% c(2,3)),]
> >> test=zip.test[which(zip.test[,1] %in% c(2,3)),]
> >> nfold = 10
> >> infold = sample(rep(1:10, length.out = (x)))
>
> I don't see a definition for x.
>
> > Warning message:
> > In rep(1:10, length.out = (x)) :
> >  first element used of 'length.out' argument
>
> But apparently it las a length greater than 1 and your are getting a sample whose length is specified by the first element of x.
>
>
> >>
> > *> mydata = data.frame(x = train[ , c(2,257)] , y = train[ , 1])*
> >>
> >> K = 20
> >> errorMatrix = matrix(NA, K, 10)
> >>
> >> for (l in nfold)
> > + {
> > +   for (k in 1:20)
> > +   {
> > +     knn.fit = kknn(y ~ x, train = mydata[infold != l, ], test =
> > mydata[infold == l, ], k = k)
> > +     errorMatrix[k, l] = mean((knn.fit$fitted.values - mydata$y[infold ==
> > l])^2)
> > +   }
> > + }
> > Error in model.frame.default(formula, data = train) :
> >  variable lengths differ (found for 'x')
>
> So the warning above is probably a great clue to the source of this error.
>
> Morale of the tale: Always read the warnings, even if your code proceeds.
>
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> David Winsemius
> Alameda, CA, USA
>
> "The whole problem with the world is that fools and fanatics are always so certain of themselves, and wiser people so full of doubts." - Bertrand Russell


From m@rc_grt @ending from y@hoo@fr  Thu Oct 11 06:15:26 2018
From: m@rc_grt @ending from y@hoo@fr (Marc Girondot)
Date: Thu, 11 Oct 2018 06:15:26 +0200
Subject: [R] Set attributes for object known by name
Message-ID: <355e3f06-5fee-1e67-3c53-5fedb720aa2f@yahoo.fr>

Hello everybody,

Has someone the solution to set attribute when variable is known by name ?

Thanks a lot

Marc

Let see this exemple:

# The variable name is stored as characters.

varname <- "myvarname"
assign(x = varname, data.frame(A=1:5, B=2:6))
attributes(myvarname)

$names
[1] "A" "B"
$class
[1] "data.frame"
$row.names
[1] 1 2 3 4 5

# perfect

attributes(get(varname))

# It works also

$names
[1] "A" "B"
$class
[1] "data.frame"

$row.names
[1] 1 2 3 4 5

attributes(myvarname)$NewAtt <- "MyAtt"

# It works

attributes(get(varname))$NewAtt2 <- "MyAtt2"
Error in attributes(get(varname))$NewAtt2 <- "MyAtt2" :
 ? impossible de trouver la fonction "get<-"

# Error...


From peter@l@ngfelder @ending from gm@il@com  Thu Oct 11 06:30:40 2018
From: peter@l@ngfelder @ending from gm@il@com (Peter Langfelder)
Date: Wed, 10 Oct 2018 21:30:40 -0700
Subject: [R] Set attributes for object known by name
In-Reply-To: <355e3f06-5fee-1e67-3c53-5fedb720aa2f@yahoo.fr>
References: <355e3f06-5fee-1e67-3c53-5fedb720aa2f@yahoo.fr>
Message-ID: <CA+hbrhU9yRApfv9bHEGr2Z5JCTjoqtaf6TBfxuEUvrZxoWohNQ@mail.gmail.com>

I would try something like

x = get(myvarname)
attr(x, "foo") = "bar"
assign(varname, x)

HTH,

Peter

On Wed, Oct 10, 2018 at 9:15 PM Marc Girondot via R-help <
r-help at r-project.org> wrote:

> Hello everybody,
>
> Has someone the solution to set attribute when variable is known by name ?
>
> Thanks a lot
>
> Marc
>
> Let see this exemple:
>
> # The variable name is stored as characters.
>
> varname <- "myvarname"
> assign(x = varname, data.frame(A=1:5, B=2:6))
> attributes(myvarname)
>
> $names
> [1] "A" "B"
> $class
> [1] "data.frame"
> $row.names
> [1] 1 2 3 4 5
>
> # perfect
>
> attributes(get(varname))
>
> # It works also
>
> $names
> [1] "A" "B"
> $class
> [1] "data.frame"
>
> $row.names
> [1] 1 2 3 4 5
>
> attributes(myvarname)$NewAtt <- "MyAtt"
>
> # It works
>
> attributes(get(varname))$NewAtt2 <- "MyAtt2"
> Error in attributes(get(varname))$NewAtt2 <- "MyAtt2" :
>    impossible de trouver la fonction "get<-"
>
> # Error...
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ruipb@rr@d@@ @ending from @@po@pt  Thu Oct 11 06:37:15 2018
From: ruipb@rr@d@@ @ending from @@po@pt (Rui Barradas)
Date: Thu, 11 Oct 2018 05:37:15 +0100
Subject: [R] Reorder file names read by list.files function
In-Reply-To: <CAF8bMcaCk7Y2QotVQp19otgH07KTiYJvt+_G732wCnttOHMr9g@mail.gmail.com>
References: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
 <CA+ZkTxuHUZGfpq=FioOo6bZGE=MGOCHxex0Y1ssWjhAsrT2kXw@mail.gmail.com>
 <CAF8bMcZEx5=NCSj9_t6ztYaXW3ywUAFuja8d6aqid3A8aeojJg@mail.gmail.com>
 <CA+ZkTxsk9Ctqv3ZEW=F76dGLqpcD6ZbrpRakDzfDjQY6eO10RA@mail.gmail.com>
 <CAF8bMcaCk7Y2QotVQp19otgH07KTiYJvt+_G732wCnttOHMr9g@mail.gmail.com>
Message-ID: <9414d01a-4126-6f01-c08a-c7edb290a6e9@sapo.pt>

Hello,


 > month.names
Erro: objeto 'month.names' n?o encontrado
 > month.name
  [1] "January"   "February"  "March"     "April"     "May"       "June" 

  [7] "July"      "August"    "September" "October"   "November"  "December"


Hope this helps,

Rui Barradas

?s 01:05 de 11/10/2018, William Dunlap via R-help escreveu:
> You can paste the directory names, dir.names(files), back on, with
> file.path(), after you do the sorting.  A better idiom is to use order()
> instead of sort() and usng order's output to subscript file.names.  E.g.,
> the following sorts by year and month number.
> 
>> file.names <- c("C:/tmp/June_2018.PDF", "C:/tmp/May_2018.PDF",
> "C:/tmp/October_2016.PDF")
>> bfile.names <- sub("\\..*$", "", basename(file.names))
>> bfile.names
> [1] "June_2018"    "May_2018"     "October_2016"
>> month <- sub("^([[:alpha:]]+)_.*$", "\\1", bfile.names)
>> month
> [1] "June"    "May"     "October"
>> month.names
> Error: object 'month.names' not found
>> month.names <-
> c("January","February","March","April","May","June","July","August","September","October","November","December")
>> month.number <- match(month, month.names)
>> month.number
> [1]  6  5 10
>> file.names[ order(year, month.number) ]
> [1] "C:/tmp/October_2016.PDF" "C:/tmp/May_2018.PDF"
>   "C:/tmp/June_2018.PDF"
> 
> 
> 
> 
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
> 
> On Wed, Oct 10, 2018 at 4:23 PM, Ek Esawi <esawiek at gmail.com> wrote:
> 
>> Thank you Bill and RUI. I use month.name with sort and basename, as
>> suggested by Bill. i got the sorted numerical values, then i use
>> month.name to get proper ordered month names. The problem is that i
>> have to paste to the names the extension PDF giving me the correct
>> ordered file names, but then i get the same error message which
>> suggest that the code is not reading the files properly
>>
>> I have not tried RUI's yet, but i will if nothing else works out.
>>
>> Thanks again--EK
>>
>> had to strip off file.names from the extension PDF, but when i paste
>> the month.name with .PDF to get the correct file names, i am getting
>> the same error.
>> On Tue, Oct 9, 2018 at 4:47 PM William Dunlap <wdunlap at tibco.com> wrote:
>>>
>>> Use basename(filename) to remove the lead parts of the full path to the
>> file.  E.g., replace
>>>     FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
>>> with (the untested)
>>>      FNs <- sort(match(sub("\\.PDF", "", basename(file.names)),
>> month.name))
>>>
>>> Bill Dunlap
>>> TIBCO Software
>>> wdunlap tibco.com
>>>
>>> On Tue, Oct 9, 2018 at 1:38 PM, Ek Esawi <esawiek at gmail.com> wrote:
>>>>
>>>> Hi again,
>>>>
>>>> I worked with RUi's idea of using the match function with month.name.
>>>> I got numerical values for months then i sorted and pasted the PDF
>>>> file extension. It gave me the file order i wanted, but now statements
>>>> 8,9,&10 don't work and i kept getting an error which is listed below.
>>>> The dilemma is if i add full.names=TRUE in statement 6 then statements
>>>> 9 and 10 don't produce what they did earlier. If i put
>>>> full.names=FALSE, then i am back to square 1.
>>>> Any idea is greatly appreciated.:
>>>>
>>>> The code
>>>>
>>>> 1. nstall.packages("tabulizer")
>>>> 2. installed.packages("stringr")
>>>> 3. library(stringr)
>>>> 4. library(tabulizer)
>>>> 5. path = "C:/Users/namei/Documents/TextMining/S2017"
>>>> 6. file.names <- dir(path, pattern =".PDF",full.names = TRUE)
>>>> 7. file.names <- str_remove(file.names,"\\s[0-9][0-9]")
>>>> 8. FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
>>>> 9. FNs1 <- paste0(month.name[FNs],".","PDF")
>>>> 10 A <- lapply(FNs1, function(i) extract_tables(i))
>>>>
>>>> Output and the error message.
>>>>
>>>> path = "C:/Users/eesawi/Documents/TextMining/S2017"
>>>>> file.names <- dir(path, pattern =".PDF",full.names = TRUE)
>>>>> file.names <- str_remove(file.names,"\\s[0-9][0-9]")
>>>>> FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
>>>>> FNs1 <- paste0(month.name[FNs],".","PDF")
>>>>> A <- lapply(FNs1, function(i) extract_tables(i))
>>>>   Show Traceback
>>>>
>>>>   Error in normalizePath(path.expand(path), winslash, mustWork) :
>>>>    path[1]=".PDF": The system cannot find the file specified
>>>> On Tue, Oct 9, 2018 at 9:44 AM Ek Esawi <esawiek at gmail.com> wrote:
>>>>>
>>>>> Hi All--
>>>>>
>>>>> I used base R list.file function to read files from a directory. The
>>>>> file names are months (April, August, etc). That's the system reads
>>>>> them in alphabetical order., but i want to reordered them in calendar
>>>>> order (January, February, ...December).. I thought i might be able to
>>>>> do it via RegEx or possibly gtools package, I am wondering if there is
>>>>> an easier way.
>>>>>
>>>>> Thanks--EK
>>>>>
>>>>> Example
>>>>> path = "C:/Users/name/Downloads/MyFiles"
>>>>> file.names <- dir(path, pattern =".PDF")
>>>>>
>>>>> Example output
>>>>> Output:
>>>>> "February.PDF"  "January.PDF" "March.PDF"
>>>>> Desired output
>>>>> "January.PDF"  "February.PDF" "March.PDF"
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/
>> posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>>
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From peter@l@ngfelder @ending from gm@il@com  Thu Oct 11 06:48:05 2018
From: peter@l@ngfelder @ending from gm@il@com (Peter Langfelder)
Date: Wed, 10 Oct 2018 21:48:05 -0700
Subject: [R] Set attributes for object known by name
In-Reply-To: <CA+hbrhU9yRApfv9bHEGr2Z5JCTjoqtaf6TBfxuEUvrZxoWohNQ@mail.gmail.com>
References: <355e3f06-5fee-1e67-3c53-5fedb720aa2f@yahoo.fr>
 <CA+hbrhU9yRApfv9bHEGr2Z5JCTjoqtaf6TBfxuEUvrZxoWohNQ@mail.gmail.com>
Message-ID: <CA+hbrhWpyApQWDUsQLeMWQ8oZaVggTYJ68u1194fQPKtBScpug@mail.gmail.com>

oops, I think the right code would be

x = get(varname)
attr(x, "foo") = "bar"
assign(varname, x)

On Wed, Oct 10, 2018 at 9:30 PM Peter Langfelder <peter.langfelder at gmail.com>
wrote:

> I would try something like
>
> x = get(myvarname)
> attr(x, "foo") = "bar"
> assign(varname, x)
>
> HTH,
>
> Peter
>
> On Wed, Oct 10, 2018 at 9:15 PM Marc Girondot via R-help <
> r-help at r-project.org> wrote:
>
>> Hello everybody,
>>
>> Has someone the solution to set attribute when variable is known by name ?
>>
>> Thanks a lot
>>
>> Marc
>>
>> Let see this exemple:
>>
>> # The variable name is stored as characters.
>>
>> varname <- "myvarname"
>> assign(x = varname, data.frame(A=1:5, B=2:6))
>> attributes(myvarname)
>>
>> $names
>> [1] "A" "B"
>> $class
>> [1] "data.frame"
>> $row.names
>> [1] 1 2 3 4 5
>>
>> # perfect
>>
>> attributes(get(varname))
>>
>> # It works also
>>
>> $names
>> [1] "A" "B"
>> $class
>> [1] "data.frame"
>>
>> $row.names
>> [1] 1 2 3 4 5
>>
>> attributes(myvarname)$NewAtt <- "MyAtt"
>>
>> # It works
>>
>> attributes(get(varname))$NewAtt2 <- "MyAtt2"
>> Error in attributes(get(varname))$NewAtt2 <- "MyAtt2" :
>>    impossible de trouver la fonction "get<-"
>>
>> # Error...
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From bgunter@4567 @ending from gm@il@com  Thu Oct 11 07:58:15 2018
From: bgunter@4567 @ending from gm@il@com (Bert Gunter)
Date: Wed, 10 Oct 2018 22:58:15 -0700
Subject: [R] Set attributes for object known by name
In-Reply-To: <CA+hbrhWpyApQWDUsQLeMWQ8oZaVggTYJ68u1194fQPKtBScpug@mail.gmail.com>
References: <355e3f06-5fee-1e67-3c53-5fedb720aa2f@yahoo.fr>
 <CA+hbrhU9yRApfv9bHEGr2Z5JCTjoqtaf6TBfxuEUvrZxoWohNQ@mail.gmail.com>
 <CA+hbrhWpyApQWDUsQLeMWQ8oZaVggTYJ68u1194fQPKtBScpug@mail.gmail.com>
Message-ID: <CAGxFJbQ6G6YrTaVy3S6coucZd+=uf5S9JGuYTS2P7AYR=yAnAA@mail.gmail.com>

Well, it can be done without a temporary variable, but I'm not sure you
would want to.
Anyway...

## simplified example
> a <- 1
> vname <- "a"
> eval(substitute(attr(x,"b") <- "hi", list( x = as.name(vname))))
> a
[1] 1
attr(,"b")
[1] "hi"


Cheers,
Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Oct 10, 2018 at 9:48 PM Peter Langfelder <peter.langfelder at gmail.com>
wrote:

> oops, I think the right code would be
>
> x = get(varname)
> attr(x, "foo") = "bar"
> assign(varname, x)
>
> On Wed, Oct 10, 2018 at 9:30 PM Peter Langfelder <
> peter.langfelder at gmail.com>
> wrote:
>
> > I would try something like
> >
> > x = get(myvarname)
> > attr(x, "foo") = "bar"
> > assign(varname, x)
> >
> > HTH,
> >
> > Peter
> >
> > On Wed, Oct 10, 2018 at 9:15 PM Marc Girondot via R-help <
> > r-help at r-project.org> wrote:
> >
> >> Hello everybody,
> >>
> >> Has someone the solution to set attribute when variable is known by
> name ?
> >>
> >> Thanks a lot
> >>
> >> Marc
> >>
> >> Let see this exemple:
> >>
> >> # The variable name is stored as characters.
> >>
> >> varname <- "myvarname"
> >> assign(x = varname, data.frame(A=1:5, B=2:6))
> >> attributes(myvarname)
> >>
> >> $names
> >> [1] "A" "B"
> >> $class
> >> [1] "data.frame"
> >> $row.names
> >> [1] 1 2 3 4 5
> >>
> >> # perfect
> >>
> >> attributes(get(varname))
> >>
> >> # It works also
> >>
> >> $names
> >> [1] "A" "B"
> >> $class
> >> [1] "data.frame"
> >>
> >> $row.names
> >> [1] 1 2 3 4 5
> >>
> >> attributes(myvarname)$NewAtt <- "MyAtt"
> >>
> >> # It works
> >>
> >> attributes(get(varname))$NewAtt2 <- "MyAtt2"
> >> Error in attributes(get(varname))$NewAtt2 <- "MyAtt2" :
> >>    impossible de trouver la fonction "get<-"
> >>
> >> # Error...
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >>
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From K@th@rin@@Frit@ch @ending from nnl@co@uk  Thu Oct 11 10:22:16 2018
From: K@th@rin@@Frit@ch @ending from nnl@co@uk (Fritsch, Katharina (NNL))
Date: Thu, 11 Oct 2018 08:22:16 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <VI1PR0202MB3357AC579BC0B0D7C4C66BC2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
 <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>
 <DB3PR0202MB3355AC9A5807D00F591E3B55F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <ac573e54-dde3-397e-601f-2130b5c27676@gmail.com>
 <DB3PR0202MB33559193F379157F44AD4AB0F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>,
 <42363BAD-7D85-4A57-B35A-0CCBA2EC1FD2@mac.com>
 <VI1PR0202MB3357AC579BC0B0D7C4C66BC2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
Message-ID: <1B674C66F0DD4343BA5DD0C025217F9F028BFDE5@CSSPWD2PRAP1147.SSA-Intra.net>

Hiya,
I have lost track of half the discussion so forgive me if that suggestion has been made before, but would it be suitable to wrap your code in a shiny app and disseminate it this way?
Kind regards,
Katharina.

--

Dr Katharina Fritsch B.Sc. M.Sc. MRSC
Chemical Modeller, Chemical and Process Modelling


E.
katharina.fritsch at nnl.co.uk
T.
+44 (0)1925 289387
@uknnl

National Nuclear Laboratory Limited, 5th Floor, Chadwick House,
Birchwood Park, Warrington, WA3 6AE, UK

www.nnl.co.uk

-----Original Message-----
From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Olivier GIVAUDAN
Sent: 11 October 2018 00:54
To: Peter Claussen
Cc: r-help at r-project.org
Subject: Re: [R] Genuine relative paths with R

Yes, I am aware that both '__FILE__' and 'SAS_EXECFILENAME' are macro variables. I don't know how the VBA 'Application.ThisWorkbook.Path' VBA or PHP '__DIR__' (or '__FILE__') work.

And yes, indeed, until now I didn't even realise that this simple find-and-replace solution of "mine" is actually the basic job of a preprocessor when it expands macro variables, thank you!

A macro language in R, yes, I think it would be useful, at least for this function. If nothing simpler is available, of course...
________________________________
De : Peter Claussen <dakotajudo at mac.com> Envoy  : mercredi 10 octobre 2018 23:29   : Olivier GIVAUDAN Cc : Duncan Murdoch; Jeff Newmiller; r-help at r-project.org Objet : Re: [R] Genuine relative paths with R

If I m following all this correctly, it seems your criticism is that R doesn t provide a run-time function that is equivalent to a compile-time macro. You do realize that __FILE__ is not part of the C programming language - it s a predefined variable recognized by the cpp - the C preprocessor program. Similarly, SAS_EXECFILENAME is a predefined variable that can be recognized by the SAS macro processor, but has no meaning in the SAS language itself.

So, to go back to your original post:
1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.

This is what a macro processor does. Are you asking for a macro language in R?

Cheers

On Oct 10, 2018, at 6:11 PM, Olivier GIVAUDAN <olivier_givaudan at hotmail.com<mailto:olivier_givaudan at hotmail.com>> wrote:

It is not wrong to claim that R currently doesn't have a function returning the path of the R file where this same function was invoked.

'getwd()' is indeed not equivalent to VBA 'Application.ThisWorkbook.Path' or C macro '__FILE__' or SAS %sysget(SAS_EXECFILENAME), etc.


        [[alternative HTML version deleted]]


This e-mail is from National Nuclear Laboratory Limited ("NNL"). This e-mail and any attachments are intended for the addressee and may also be legally privileged. If you are not the intended recipient please do not print, re-transmit, store or act in reliance on it or any attachments. Instead, please e-mail it back to the sender and then immediately permanently delete it.

National Nuclear Laboratory Limited (Company number 3857752) Registered in England and Wales. Registered office: Chadwick House, Warrington Road, Birchwood Park, Warrington, WA3 6AE.

From @pencer@gr@ve@ @ending from effectivedefen@e@org  Thu Oct 11 11:07:47 2018
From: @pencer@gr@ve@ @ending from effectivedefen@e@org (Spencer Graves)
Date: Thu, 11 Oct 2018 04:07:47 -0500
Subject: [R] RMarkdown vignettes v. Jupyter notebooks?
Message-ID: <056b9d58-70ef-b0bc-a195-b1b8c5377a60@effectivedefense.org>

Hello:


 ????? What are the differences between Jupyter notebooks and RMarkdown 
vignettes?


 ????? I'm trying to do real time monitoring of the broadcast quality of 
a radio station, and it seems to me that it may be easier to do that in 
Python than in R.[1]? This led me to a recent post to 
"python-list at python.org" that mentioned "Jupyter, Mathematica, and the 
Future of the Research Paper"[2] by Paul Romer, who won the 2018 Nobel 
Memorial Prize in Economics only a few days ago.? In brief, this article 
suggests that Jupyter notebooks may replace publication in refereed 
scientific journals as the primary vehicle for sharing scientific 
research, because they make it so easy for readers to follow both the 
scientific and computational logic and test their own modifications.


 ????? A "Jupyter Notebook Tutorial: The Definitive Guide"[3] suggested 
I first install Anaconda Navigator.? I got version 1.9.2 of that.? It 
opens with options for eight different "applications" including 
JupyterLab 0.34.9, Jupyter Notebook 5.6.0, Spyder 3.3.1 (an IDE for 
Python), and RStudio 1.1.456.


 ????? This leads to several questions:


 ??? ??????? 1.? In general, what experiences have people had with 
Jupyter Notebooks, Anaconda Navigator, and RMarkdown vignettes in 
RStudio, and the similarities and differences?? Do you know any 
references that discuss this?


 ??? ??????? 2.? More specifically, does it make sense to try to use 
RStudio from within Anaconda Navigator, or is one better off using 
RStudio as a separate, stand alone application -- or should one even 
abandon RStudio and run R instead from within a Jupyter Notebook? [I'm 
new to this topic, so it's possible that this question doesn't even make 
sense.]


 ????? Thanks,
 ????? Spencer Graves


[1] If you have ideas for how best to do real time monitoring of 
broadcast quality of a radio station, I'd love to hear them.? I need 
software that will do that, preferably something that's free, open 
source.? The commercial software I've seen for this is not adequate for 
my purposes, so I'm trying to write my own.? I have a sample script in 
Python that will read a live stream from a radio tuner and output a 
*.wav of whatever length I want, and I wrote Python eight years ago for 
a similar real time application.? I'd prefer to use R, but I don't know 
how to get started.


[2] 2018-04-13: 
"https://paulromer.net/jupyter-mathematica-and-the-future-of-the-research-paper". 
This further cites a similar article in The Atlantic from 2018-04-05: 
"www.theatlantic.com/science/archive/2018/04/the-scientific-paper-is-obsolete/556676".


From murdoch@dunc@n @ending from gm@il@com  Thu Oct 11 11:27:49 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Thu, 11 Oct 2018 05:27:49 -0400
Subject: [R] Genuine relative paths with R
In-Reply-To: <VI1PR0202MB3357AF40A744B10736F640A3F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
 <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>
 <DB3PR0202MB3355AC9A5807D00F591E3B55F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <ac573e54-dde3-397e-601f-2130b5c27676@gmail.com>
 <DB3PR0202MB33559193F379157F44AD4AB0F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <f96e0c64-0e77-47f8-dbc1-5b49313ebb39@gmail.com>
 <VI1PR0202MB3357AF40A744B10736F640A3F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
Message-ID: <cbc49c08-3a5d-7510-98e3-8e53a680f47a@gmail.com>

On 10/10/2018 8:08 PM, Olivier GIVAUDAN wrote:
> I think Gabor (at least) already suggested this solution. But the 
> problem is: how do you source this file containing this 'foo' function 
> without writing its absolute path?

You only need its relative path to source it.

Duncan Murdoch
> 
> It's a kind of initialisation issue.
> 
>  > a function returning the path of the R file where this same function 
> was invoked.
>  >> I didn't realize that's what you were asking for. This has nothing 
> to do with your subject line.
> 
> It's just a trick to work with relative paths without having to write 
> any hardcoded (by definition) absolute path beforehand.
> ------------------------------------------------------------------------
> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Envoy? :* mercredi 10 octobre 2018 23:51
> *? :* Olivier GIVAUDAN; Jeff Newmiller
> *Cc?:* r-help at r-project.org
> *Objet :* Re: [R] Genuine relative paths with R
> On 10/10/2018 7:11 PM, Olivier GIVAUDAN wrote:
>> It is not wrong to claim that R currently doesn't have a function 
>> returning the path of the R file where this same function was invoked.
> 
> But it does.? I didn't realize that's what you were asking for.? This
> has nothing to do with your subject line.
> 
> If you source a file from somewhere, then each of the functions it
> creates is marked with its source location.? So you can put this in a file:
> 
> foo <- function () 1
> 
> filename <- normalizePath(getSrcFilename(foo, full.names=TRUE))
> 
> (You need the normalizePath() call because all that will be saved is the
> path that was used.? If it was a relative path, that's what you get
> before you normalize it.? You don't really need the foo function; you
> could put an anonymous function into the getSrcFilename call.? It's just
> usually easier to include a function that already exists.)
> 
> When you source() that file, filename will get the name of the file it
> came from.
> 
> This is a lot like __FILE__ in C.? One difference is that it is usually
> turned off when the function is being loaded into a package, but you can
> optionally turn it on.
> 
> You can also find out what line foo starts on, using
> 
> fooline <- getSrcLocation(foo)
> 
> This is a lot like __LINE__ in C.
> 
> Duncan Murdoch
> 
> 
>> 
>> 'getwd()' is indeed not equivalent to VBA 
>> 'Application.ThisWorkbook.Path' or C macro '__FILE__' or SAS 
>> %sysget(SAS_EXECFILENAME), etc.
>> ------------------------------------------------------------------------
>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>> *Envoy? :* mercredi 10 octobre 2018 22:59
>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>> *Cc?:* r-help at r-project.org
>> *Objet :* Re: [R] Genuine relative paths with R
>> On 10/10/2018 6:52 PM, Olivier GIVAUDAN wrote:
>>>>? Again, you seem to think making a package is a big deal.
>>> 
>>> Perhaps not a big deal (I believe you, I didn't write an R package yet), 
>>> but not as straightforward as having a function within an R file 
>>> returning its own path.
>>> 
>>>> But you're free to decide not to do it:? just please don't repeat 
>>> falseclaims about R (like the ones about paths that started this long 
>>> thread).
>>> 
>>> Which false claims?
>> 
>> "But I am really wondering why R doesn't have (please tell me if I'm
>> wrong) this basic feature as many other languages have it (batch, shell,
>> C, LaTeX, SAS with macro-variables, etc.)?"
>> 
>> Duncan Murdoch
>> 
>>> ------------------------------------------------------------------------
>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>> *Envoy? :* mercredi 10 octobre 2018 22:31
>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>> *Cc?:* r-help at r-project.org
>>> *Objet :* Re: [R] Genuine relative paths with R
>>> On 10/10/2018 6:17 PM, Olivier GIVAUDAN wrote:
>>>>> Nothing says a package has to go on CRAN.? You can distribute 
>>>> themprivately to a small audience.
>>>> 
>>>> Yes, I agree in theory. But this solution still violates my own 
>>>> proportionality principle.
>>> 
>>> Again, you seem to think making a package is a big deal.? Maybe that was
>>> true 10 years ago (though I wrote and tested a package in a 45 minute
>>> presentation at UseR 2008), but now it's very easy.
>>> 
>>> But you're free to decide not to do it:? just please don't repeat false
>>> claims about R (like the ones about paths that started this long thread).
>>> 
>>>> 
>>>>> If you know as much about R as the people who wrote it
>>>> 
>>>> I didn't claim that (that's was a quite general / theoretical statement, 
>>>> not necessarily and only applicable to R).
>>> 
>>> I didn't say you made that claim.? I was answering your question about
>>> why inventing your own way is not a good idea.? It might be a good idea,
>>> if you know the system very, very well.? Otherwise, it's probably better
>>> to work the standard way.
>>> 
>>> Duncan Murdoch
>>> 
>>>> 
>>>>> For example, you might thinkthat all front ends set the working 
>>>> directory to the directory of theprogram they are running, because the 
>>>> ones you've tried do it that way. But they don't.
>>>> 
>>>> It runs that way at least on Windows with RStudio and R GUI and I know 
>>>> the recipients of my R code work on Windows with at least one of these 2 
>>>> GUIs. So the workaround I finally found satisfies my current needs
>>>> ------------------------------------------------------------------------
>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>> *Envoy? :* mercredi 10 octobre 2018 22:07
>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>> *Cc?:* r-help at r-project.org
>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>> On 10/10/2018 5:45 PM, Olivier GIVAUDAN wrote:
>>>>> I'm not sure I'm "inventing my own way" of distributing R code... And I 
>>>>> distribute it to a very limited audience.
>>>> 
>>>> Nothing says a package has to go on CRAN.? You can distribute them
>>>> privately to a small audience.
>>>> 
>>>>> Anyway, why not "inventing a new way" if it's more efficient than the 
>>>>> standard one (I'm talking now in theory)?
>>>> 
>>>> If you know as much about R as the people who wrote it, then you can
>>>> almost certainly invent better ways to do many of the things it does.? R
>>>> Core was constrained by trying to maintain back compatibility, and that
>>>> means some of their solutions aren't perfect.
>>>> 
>>>> But if you don't know it that well, chances are you'll make mistakes
>>>> when you invent your own way of doing it.? For example, you might think
>>>> that all front ends set the working directory to the directory of the
>>>> program they are running, because the ones you've tried do it that way.
>>>> But they don't.
>>>> 
>>>> Duncan Murdoch
>>>> 
>>>>> ------------------------------------------------------------------------
>>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>>> *Envoy? :* mercredi 10 octobre 2018 21:39
>>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>>> *Cc?:* r-help at r-project.org
>>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>>> On 10/10/2018 5:31 PM, Olivier GIVAUDAN wrote:
>>>>>> I do not want to use the terminal, just double clicks (i.e. the 
>>>>>> simplest, automatic, non-manual way, without having to write a line / 
>>>>>> command).
>>>>>> Therefore everything should happen outside any terminal. The user won't 
>>>>>> use a terminal.
>>>>>> 
>>>>>> I don't have a Mac and I'm not familiar with this OS, sorry.
>>>>>> But I'm really surprised the click method gives different results than 
>>>>>> on Linux and Windows.
>>>>>> I know the click method worked both on Linux (Ubuntu latest version) and 
>>>>>> Windows (10).
>>>>>> 
>>>>>> Yes, I executed my file from a terminal and got obviously the same 
>>>>>> result as you (that's reassuring).
>>>>>> 
>>>>>> Come on guys, creating a package... It's like using a hammer to kill a 
>>>>>> fly...
>>>>> 
>>>>> It's a simple operation to create a package in RStudio.? Not quite a
>>>>> single click, but just a few.
>>>>> 
>>>>> In plain R, it's just a little more work using package.skeleton().
>>>>> 
>>>>> Really, if you are distributing R code, you should do it in the standard
>>>>> way, not invent your own.
>>>>> 
>>>>> Duncan Murdoch
>>>>> 
>>>>>> ------------------------------------------------------------------------
>>>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>>>> *Envoy? :* mercredi 10 octobre 2018 20:54
>>>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>>>> *Cc?:* r-help at r-project.org
>>>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>>>> On 10/10/2018 4:42 PM, Olivier GIVAUDAN wrote:
>>>>>>> Why are you not simply double-clicking on 'TestPWD' and choosing to 
>>>>>>> execute the file (don't add anything)?
>>>>>>> Are you executing the file from a terminal?
>>>>>> 
>>>>>> Yes, I was executing the file from my terminal.? Otherwise I really have
>>>>>> no idea what the "current directory" is in the Finder.?? (I'm on a Mac.
>>>>>> I just tried the click method; it printed my home directory, not the
>>>>>> directory of the script.)
>>>>>> 
>>>>>> I don't know the name of your visual front end, but you are displaying
>>>>>> the working directory that it sets when you click on TestPWD.? That will
>>>>>> be different from the working directory that your user sees in the Terminal.
>>>>>> 
>>>>>> You can see what I saw if you run TestPWD from the Terminal.? It will
>>>>>> print the current working directory, not the one where TestPWD happens
>>>>>> to live.
>>>>>> 
>>>>>> If you want to do the same sort of thing in R, you could set up a script
>>>>>> that calls R, and execute that in the way you executed TestPWD.? But in
>>>>>> another message you said you aren't allowed to do that, so I think your
>>>>>> best solution is the one offered by Bill Dunlap:? organize your files as
>>>>>> an R package.? If you name your package "Olivier", then you can find all
>>>>>> the files in it under the directory returned by
>>>>>> 
>>>>>>? ?? system.file(".", package = "Olivier")
>>>>>> 
>>>>>> The package system is designed for R code, but you can put arbitrary
>>>>>> files into a package:? just store them under the "inst" directory in
>>>>>> your source.? When the package is installed, those files will be moved
>>>>>> up one level, i.e.
>>>>>> 
>>>>>> Olivier/inst/foo
>>>>>> 
>>>>>> will become
>>>>>> 
>>>>>>? ?? system.file("foo", package = "Olivier")
>>>>>> 
>>>>>> Duncan Murdoch
>>>>> 
>>>> 
>>> 
>> 
>


From i@t@z@hn @ending from gm@il@com  Thu Oct 11 13:18:13 2018
From: i@t@z@hn @ending from gm@il@com (Ista Zahn)
Date: Thu, 11 Oct 2018 07:18:13 -0400
Subject: [R] RMarkdown vignettes v. Jupyter notebooks?
In-Reply-To: <056b9d58-70ef-b0bc-a195-b1b8c5377a60@effectivedefense.org>
References: <056b9d58-70ef-b0bc-a195-b1b8c5377a60@effectivedefense.org>
Message-ID: <CA+vqiLFRhHi+jm4JNwwEd+MOMG-Agzk7p_duKoku8G-CgTBNuQ@mail.gmail.com>

Hi Spencer,

On Thu, Oct 11, 2018 at 5:08 AM Spencer Graves
<spencer.graves at effectivedefense.org> wrote:
>
> Hello:
>
>
>        What are the differences between Jupyter notebooks and RMarkdown
> vignettes?

Here are some of the main differences I'm aware of:

Rmarkdown files include code and prose. The results produced by the
code do not appear in the Rmarkdown file; instead, the file must be
processed and typeset to produce a .pdf or .html (etc.) file that
includes those results. Jupyter notebooks dispense with with
processing step: output is displayed directly in the notebook. That
is, a notebook includes code, prose, and results, while an Rmarkdown
file includes only code and prose.

Rmarkdown allows control over the inclusion of code and results, and
over how the results are displayed via header arguments. There is no
such thing in Jupyter notebooks. Controlling the precise appearance of
a document produced by Jupyter is much more difficult. Going farther,
one can even say that Jupyter notebooks are designed primarily to be
read as Jupyter notebooks; exporting to other formats is kind of an
afterthought. In contrast, Rmarkdown is designed to produce the final
readable result in another format (.html or .pdf typically).

Rmarkdown is based on markdown, a human readable markup language,
Jupyter notebooks are based on JSON, a data interchange format common
on the web. This means that Rmarkdown files can be easily edited using
any text editor you like. The same is not true of Jupyter notebooks.
While you can of course edit the JSON directly, the format is designed
to be written and read by a computer; editing it yourself is not easy.

Rmarkdown is specific to R (I guess there is some basic support in
knitr for other languages, but in my experience it never worked well)
while Jupyter notebooks are language agnostic and "kernels" exist for
a large number of programming languages. However, each Jupyter
notebook can use only one kernel; you can't easily have R and Python
code in the same notebook.

Jupyter notebooks typically run in your browser where the actual text
editing features are somewhat limited. Rmarkdown is typically run in
an editor such as Emacs or Rstudio where editing and project support
is much better and greater customization may be possible. You can work
indirectly with Jupyter notebooks in Emacs
(https://github.com/millejoh/emacs-ipython-notebook) and perhaps other
editors as well; this goes some way toward escaping the tyranny of the
browser but is more fragile and difficult to get working compared to
Rmarkdown.

Because Jupyter uses a web-based client-server model, it is easy to
provide live interactive notebooks on your website (see e.g.,
https://github.com/jupyterhub/binderhub). As far as I know this is not
currently possible with Rmarkdown.

>
>
>        I'm trying to do real time monitoring of the broadcast quality of
> a radio station, and it seems to me that it may be easier to do that in
> Python than in R.[1]  This led me to a recent post to
> "python-list at python.org" that mentioned "Jupyter, Mathematica, and the
> Future of the Research Paper"[2] by Paul Romer, who won the 2018 Nobel
> Memorial Prize in Economics only a few days ago.  In brief, this article
> suggests that Jupyter notebooks may replace publication in refereed
> scientific journals as the primary vehicle for sharing scientific
> research, because they make it so easy for readers to follow both the
> scientific and computational logic and test their own modifications.
>
>
>        A "Jupyter Notebook Tutorial: The Definitive Guide"[3] suggested
> I first install Anaconda Navigator.  I got version 1.9.2 of that.  It
> opens with options for eight different "applications" including
> JupyterLab 0.34.9, Jupyter Notebook 5.6.0, Spyder 3.3.1 (an IDE for
> Python), and RStudio 1.1.456.
>
>
>        This leads to several questions:
>
>
>              1.  In general, what experiences have people had with
> Jupyter Notebooks, Anaconda Navigator, and RMarkdown vignettes in
> RStudio, and the similarities and differences?  Do you know any
> references that discuss this?

I've used both extensively, and noted the differences I've discovered above.

>
>
>              2.  More specifically, does it make sense to try to use
> RStudio from within Anaconda Navigator, or is one better off using
> RStudio as a separate, stand alone application -- or should one even
> abandon RStudio and run R instead from within a Jupyter Notebook? [I'm
> new to this topic, so it's possible that this question doesn't even make
> sense.]

The only advantage I can think of to using Rstudio via Anaconda is
that you could use conda environments to maintain different versions
or R and/or R packages for different projects.

You'll have to weigh the pros and cons to decide whether to switch
from Rstudio to Jupyter notebooks. Depending on what you want to do
there are both advantages and disadvantages, as discussed above.

Finally, I have to give a plug for a couple of related tools that I
find very useful.

Emacs org-mode https://orgmode.org/ gives you the best of both worlds:
notebooks unconstrained by the browser that can include code in
multiple languages, header arguments, excellent export support, etc.
It is superior to both Jupyter and Rmarkdown, except that support only
exists in Emacs.

Jupytext (https://github.com/mwouts/jupytext) is another way to have
it all, by allowing you to edit in markdown or Rmarkdown, and
auto-generating a notebook and possibly other formats for you. I've
only recently started experimenting with it, but so far I like it a
lot.

Best,
Ista
>
>
>        Thanks,
>        Spencer Graves
>
>
> [1] If you have ideas for how best to do real time monitoring of
> broadcast quality of a radio station, I'd love to hear them.  I need
> software that will do that, preferably something that's free, open
> source.  The commercial software I've seen for this is not adequate for
> my purposes, so I'm trying to write my own.  I have a sample script in
> Python that will read a live stream from a radio tuner and output a
> *.wav of whatever length I want, and I wrote Python eight years ago for
> a similar real time application.  I'd prefer to use R, but I don't know
> how to get started.
>
>
> [2] 2018-04-13:
> "https://paulromer.net/jupyter-mathematica-and-the-future-of-the-research-paper".
> This further cites a similar article in The Atlantic from 2018-04-05:
> "www.theatlantic.com/science/archive/2018/04/the-scientific-paper-is-obsolete/556676".
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From e@@wiek @ending from gm@il@com  Thu Oct 11 13:32:43 2018
From: e@@wiek @ending from gm@il@com (Ek Esawi)
Date: Thu, 11 Oct 2018 07:32:43 -0400
Subject: [R] Reorder file names read by list.files function
In-Reply-To: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
References: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
Message-ID: <CA+ZkTxvzBWbdcb7rZkMccZpLOEYMUqU4hoMputBDobkmdSxX4A@mail.gmail.com>

Thank you all. Bill's original idea worked well. I did not realize
that i had to paste the full dir name to the correctly ordered file.
Once that was done it did work well. I will try REUI's idea  and i
think Jeff's idea of rearranging the output after extracting the
tables might work and i will try it and see.

Thank you all.

EK
On Tue, Oct 9, 2018 at 9:44 AM Ek Esawi <esawiek at gmail.com> wrote:
>
> Hi All--
>
> I used base R list.file function to read files from a directory. The
> file names are months (April, August, etc). That's the system reads
> them in alphabetical order., but i want to reordered them in calendar
> order (January, February, ...December).. I thought i might be able to
> do it via RegEx or possibly gtools package, I am wondering if there is
> an easier way.
>
> Thanks--EK
>
> Example
> path = "C:/Users/name/Downloads/MyFiles"
> file.names <- dir(path, pattern =".PDF")
>
> Example output
> Output:
> "February.PDF"  "January.PDF" "March.PDF"
> Desired output
> "January.PDF"  "February.PDF" "March.PDF"


From murdoch@dunc@n @ending from gm@il@com  Thu Oct 11 14:36:20 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Thu, 11 Oct 2018 08:36:20 -0400
Subject: [R] RMarkdown vignettes v. Jupyter notebooks?
In-Reply-To: <CA+vqiLFRhHi+jm4JNwwEd+MOMG-Agzk7p_duKoku8G-CgTBNuQ@mail.gmail.com>
References: <056b9d58-70ef-b0bc-a195-b1b8c5377a60@effectivedefense.org>
 <CA+vqiLFRhHi+jm4JNwwEd+MOMG-Agzk7p_duKoku8G-CgTBNuQ@mail.gmail.com>
Message-ID: <248ead90-e4d2-a0da-49b3-93afa850c0b3@gmail.com>

On 11/10/2018 7:18 AM, Ista Zahn wrote:
> Hi Spencer,
> 
> On Thu, Oct 11, 2018 at 5:08 AM Spencer Graves
> <spencer.graves at effectivedefense.org> wrote:
>>
>> Hello:
>>
>>
>>         What are the differences between Jupyter notebooks and RMarkdown
>> vignettes?
> 
> Here are some of the main differences I'm aware of:
> 
> Rmarkdown files include code and prose. The results produced by the
> code do not appear in the Rmarkdown file; instead, the file must be
> processed and typeset to produce a .pdf or .html (etc.) file that
> includes those results. Jupyter notebooks dispense with with
> processing step: output is displayed directly in the notebook. That
> is, a notebook includes code, prose, and results, while an Rmarkdown
> file includes only code and prose.

RStudio can display the output mixed in with the text in the editor.

> 
> Rmarkdown allows control over the inclusion of code and results, and
> over how the results are displayed via header arguments. There is no
> such thing in Jupyter notebooks. Controlling the precise appearance of
> a document produced by Jupyter is much more difficult. Going farther,
> one can even say that Jupyter notebooks are designed primarily to be
> read as Jupyter notebooks; exporting to other formats is kind of an
> afterthought. In contrast, Rmarkdown is designed to produce the final
> readable result in another format (.html or .pdf typically).
> 
> Rmarkdown is based on markdown, a human readable markup language,
> Jupyter notebooks are based on JSON, a data interchange format common
> on the web. This means that Rmarkdown files can be easily edited using
> any text editor you like. The same is not true of Jupyter notebooks.
> While you can of course edit the JSON directly, the format is designed
> to be written and read by a computer; editing it yourself is not easy.
> 
> Rmarkdown is specific to R (I guess there is some basic support in
> knitr for other languages, but in my experience it never worked well)
> while Jupyter notebooks are language agnostic and "kernels" exist for
> a large number of programming languages. However, each Jupyter
> notebook can use only one kernel; you can't easily have R and Python
> code in the same notebook.
> 
> Jupyter notebooks typically run in your browser where the actual text
> editing features are somewhat limited. Rmarkdown is typically run in
> an editor such as Emacs or Rstudio where editing and project support
> is much better and greater customization may be possible. You can work
> indirectly with Jupyter notebooks in Emacs
> (https://github.com/millejoh/emacs-ipython-notebook) and perhaps other
> editors as well; this goes some way toward escaping the tyranny of the
> browser but is more fragile and difficult to get working compared to
> Rmarkdown.
> 
> Because Jupyter uses a web-based client-server model, it is easy to
> provide live interactive notebooks on your website (see e.g.,
> https://github.com/jupyterhub/binderhub). As far as I know this is not
> currently possible with Rmarkdown.

There are ways to put Shiny apps into Rmarkdown documents; see 
<https://beta.rstudioconnect.com/content/2671/Combining-Shiny-R-Markdown.html>. 
  Other than my two notes above, your comments about Rmarkdown seem 
right on the mark.

Duncan Murdoch

> 
>>
>>
>>         I'm trying to do real time monitoring of the broadcast quality of
>> a radio station, and it seems to me that it may be easier to do that in
>> Python than in R.[1]  This led me to a recent post to
>> "python-list at python.org" that mentioned "Jupyter, Mathematica, and the
>> Future of the Research Paper"[2] by Paul Romer, who won the 2018 Nobel
>> Memorial Prize in Economics only a few days ago.  In brief, this article
>> suggests that Jupyter notebooks may replace publication in refereed
>> scientific journals as the primary vehicle for sharing scientific
>> research, because they make it so easy for readers to follow both the
>> scientific and computational logic and test their own modifications.
>>
>>
>>         A "Jupyter Notebook Tutorial: The Definitive Guide"[3] suggested
>> I first install Anaconda Navigator.  I got version 1.9.2 of that.  It
>> opens with options for eight different "applications" including
>> JupyterLab 0.34.9, Jupyter Notebook 5.6.0, Spyder 3.3.1 (an IDE for
>> Python), and RStudio 1.1.456.
>>
>>
>>         This leads to several questions:
>>
>>
>>               1.  In general, what experiences have people had with
>> Jupyter Notebooks, Anaconda Navigator, and RMarkdown vignettes in
>> RStudio, and the similarities and differences?  Do you know any
>> references that discuss this?
> 
> I've used both extensively, and noted the differences I've discovered above.
> 
>>
>>
>>               2.  More specifically, does it make sense to try to use
>> RStudio from within Anaconda Navigator, or is one better off using
>> RStudio as a separate, stand alone application -- or should one even
>> abandon RStudio and run R instead from within a Jupyter Notebook? [I'm
>> new to this topic, so it's possible that this question doesn't even make
>> sense.]
> 
> The only advantage I can think of to using Rstudio via Anaconda is
> that you could use conda environments to maintain different versions
> or R and/or R packages for different projects.
> 
> You'll have to weigh the pros and cons to decide whether to switch
> from Rstudio to Jupyter notebooks. Depending on what you want to do
> there are both advantages and disadvantages, as discussed above.
> 
> Finally, I have to give a plug for a couple of related tools that I
> find very useful.
> 
> Emacs org-mode https://orgmode.org/ gives you the best of both worlds:
> notebooks unconstrained by the browser that can include code in
> multiple languages, header arguments, excellent export support, etc.
> It is superior to both Jupyter and Rmarkdown, except that support only
> exists in Emacs.
> 
> Jupytext (https://github.com/mwouts/jupytext) is another way to have
> it all, by allowing you to edit in markdown or Rmarkdown, and
> auto-generating a notebook and possibly other formats for you. I've
> only recently started experimenting with it, but so far I like it a
> lot.
> 
> Best,
> Ista
>>
>>
>>         Thanks,
>>         Spencer Graves
>>
>>
>> [1] If you have ideas for how best to do real time monitoring of
>> broadcast quality of a radio station, I'd love to hear them.  I need
>> software that will do that, preferably something that's free, open
>> source.  The commercial software I've seen for this is not adequate for
>> my purposes, so I'm trying to write my own.  I have a sample script in
>> Python that will read a live stream from a radio tuner and output a
>> *.wav of whatever length I want, and I wrote Python eight years ago for
>> a similar real time application.  I'd prefer to use R, but I don't know
>> how to get started.
>>
>>
>> [2] 2018-04-13:
>> "https://paulromer.net/jupyter-mathematica-and-the-future-of-the-research-paper".
>> This further cites a similar article in The Atlantic from 2018-04-05:
>> "www.theatlantic.com/science/archive/2018/04/the-scientific-paper-is-obsolete/556676".
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From h@wickh@m @ending from gm@il@com  Thu Oct 11 14:43:00 2018
From: h@wickh@m @ending from gm@il@com (Hadley Wickham)
Date: Thu, 11 Oct 2018 07:43:00 -0500
Subject: [R] RMarkdown vignettes v. Jupyter notebooks?
In-Reply-To: <056b9d58-70ef-b0bc-a195-b1b8c5377a60@effectivedefense.org>
References: <056b9d58-70ef-b0bc-a195-b1b8c5377a60@effectivedefense.org>
Message-ID: <CABdHhvF7c=mvE5Tp3PtJyy2tQDytmGtEtFc6x4FzUOQ+fpmhzA@mail.gmail.com>

I'd highly recommend Yihui's extensive write up:
https://yihui.name/en/2018/09/notebook-war/

Hadley
On Thu, Oct 11, 2018 at 4:08 AM Spencer Graves
<spencer.graves at effectivedefense.org> wrote:
>
> Hello:
>
>
>        What are the differences between Jupyter notebooks and RMarkdown
> vignettes?
>
>
>        I'm trying to do real time monitoring of the broadcast quality of
> a radio station, and it seems to me that it may be easier to do that in
> Python than in R.[1]  This led me to a recent post to
> "python-list at python.org" that mentioned "Jupyter, Mathematica, and the
> Future of the Research Paper"[2] by Paul Romer, who won the 2018 Nobel
> Memorial Prize in Economics only a few days ago.  In brief, this article
> suggests that Jupyter notebooks may replace publication in refereed
> scientific journals as the primary vehicle for sharing scientific
> research, because they make it so easy for readers to follow both the
> scientific and computational logic and test their own modifications.
>
>
>        A "Jupyter Notebook Tutorial: The Definitive Guide"[3] suggested
> I first install Anaconda Navigator.  I got version 1.9.2 of that.  It
> opens with options for eight different "applications" including
> JupyterLab 0.34.9, Jupyter Notebook 5.6.0, Spyder 3.3.1 (an IDE for
> Python), and RStudio 1.1.456.
>
>
>        This leads to several questions:
>
>
>              1.  In general, what experiences have people had with
> Jupyter Notebooks, Anaconda Navigator, and RMarkdown vignettes in
> RStudio, and the similarities and differences?  Do you know any
> references that discuss this?
>
>
>              2.  More specifically, does it make sense to try to use
> RStudio from within Anaconda Navigator, or is one better off using
> RStudio as a separate, stand alone application -- or should one even
> abandon RStudio and run R instead from within a Jupyter Notebook? [I'm
> new to this topic, so it's possible that this question doesn't even make
> sense.]
>
>
>        Thanks,
>        Spencer Graves
>
>
> [1] If you have ideas for how best to do real time monitoring of
> broadcast quality of a radio station, I'd love to hear them.  I need
> software that will do that, preferably something that's free, open
> source.  The commercial software I've seen for this is not adequate for
> my purposes, so I'm trying to write my own.  I have a sample script in
> Python that will read a live stream from a radio tuner and output a
> *.wav of whatever length I want, and I wrote Python eight years ago for
> a similar real time application.  I'd prefer to use R, but I don't know
> how to get started.
>
>
> [2] 2018-04-13:
> "https://paulromer.net/jupyter-mathematica-and-the-future-of-the-research-paper".
> This further cites a similar article in The Atlantic from 2018-04-05:
> "www.theatlantic.com/science/archive/2018/04/the-scientific-paper-is-obsolete/556676".
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
http://hadley.nz


From i@t@z@hn @ending from gm@il@com  Thu Oct 11 14:53:29 2018
From: i@t@z@hn @ending from gm@il@com (Ista Zahn)
Date: Thu, 11 Oct 2018 08:53:29 -0400
Subject: [R] RMarkdown vignettes v. Jupyter notebooks?
In-Reply-To: <248ead90-e4d2-a0da-49b3-93afa850c0b3@gmail.com>
References: <056b9d58-70ef-b0bc-a195-b1b8c5377a60@effectivedefense.org>
 <CA+vqiLFRhHi+jm4JNwwEd+MOMG-Agzk7p_duKoku8G-CgTBNuQ@mail.gmail.com>
 <248ead90-e4d2-a0da-49b3-93afa850c0b3@gmail.com>
Message-ID: <CA+vqiLH=U6r7z9ZJ9VSrENMP4pDNYLu05OKcOZe44OWwH9rpwQ@mail.gmail.com>

On Thu, Oct 11, 2018 at 8:36 AM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> On 11/10/2018 7:18 AM, Ista Zahn wrote:
> > Hi Spencer,
> >
> > On Thu, Oct 11, 2018 at 5:08 AM Spencer Graves
> > <spencer.graves at effectivedefense.org> wrote:
> >>
> >> Hello:
> >>
> >>
> >>         What are the differences between Jupyter notebooks and RMarkdown
> >> vignettes?
> >
> > Here are some of the main differences I'm aware of:
> >
> > Rmarkdown files include code and prose. The results produced by the
> > code do not appear in the Rmarkdown file; instead, the file must be
> > processed and typeset to produce a .pdf or .html (etc.) file that
> > includes those results. Jupyter notebooks dispense with with
> > processing step: output is displayed directly in the notebook. That
> > is, a notebook includes code, prose, and results, while an Rmarkdown
> > file includes only code and prose.
>
> RStudio can display the output mixed in with the text in the editor.

True, but the _file_ does not include the output. Thus it functions
more as a preview, and will not be visible to you if I email you a
.Rmd file. On the other hand, .ipynb files really do contain the
output; if I email one to you and you open it in Jupyter you will see
the output as well.

--Ista

>
> >
> > Rmarkdown allows control over the inclusion of code and results, and
> > over how the results are displayed via header arguments. There is no
> > such thing in Jupyter notebooks. Controlling the precise appearance of
> > a document produced by Jupyter is much more difficult. Going farther,
> > one can even say that Jupyter notebooks are designed primarily to be
> > read as Jupyter notebooks; exporting to other formats is kind of an
> > afterthought. In contrast, Rmarkdown is designed to produce the final
> > readable result in another format (.html or .pdf typically).
> >
> > Rmarkdown is based on markdown, a human readable markup language,
> > Jupyter notebooks are based on JSON, a data interchange format common
> > on the web. This means that Rmarkdown files can be easily edited using
> > any text editor you like. The same is not true of Jupyter notebooks.
> > While you can of course edit the JSON directly, the format is designed
> > to be written and read by a computer; editing it yourself is not easy.
> >
> > Rmarkdown is specific to R (I guess there is some basic support in
> > knitr for other languages, but in my experience it never worked well)
> > while Jupyter notebooks are language agnostic and "kernels" exist for
> > a large number of programming languages. However, each Jupyter
> > notebook can use only one kernel; you can't easily have R and Python
> > code in the same notebook.
> >
> > Jupyter notebooks typically run in your browser where the actual text
> > editing features are somewhat limited. Rmarkdown is typically run in
> > an editor such as Emacs or Rstudio where editing and project support
> > is much better and greater customization may be possible. You can work
> > indirectly with Jupyter notebooks in Emacs
> > (https://github.com/millejoh/emacs-ipython-notebook) and perhaps other
> > editors as well; this goes some way toward escaping the tyranny of the
> > browser but is more fragile and difficult to get working compared to
> > Rmarkdown.
> >
> > Because Jupyter uses a web-based client-server model, it is easy to
> > provide live interactive notebooks on your website (see e.g.,
> > https://github.com/jupyterhub/binderhub). As far as I know this is not
> > currently possible with Rmarkdown.
>
> There are ways to put Shiny apps into Rmarkdown documents; see
> <https://beta.rstudioconnect.com/content/2671/Combining-Shiny-R-Markdown.html>.
>   Other than my two notes above, your comments about Rmarkdown seem
> right on the mark.
>
> Duncan Murdoch
>
> >
> >>
> >>
> >>         I'm trying to do real time monitoring of the broadcast quality of
> >> a radio station, and it seems to me that it may be easier to do that in
> >> Python than in R.[1]  This led me to a recent post to
> >> "python-list at python.org" that mentioned "Jupyter, Mathematica, and the
> >> Future of the Research Paper"[2] by Paul Romer, who won the 2018 Nobel
> >> Memorial Prize in Economics only a few days ago.  In brief, this article
> >> suggests that Jupyter notebooks may replace publication in refereed
> >> scientific journals as the primary vehicle for sharing scientific
> >> research, because they make it so easy for readers to follow both the
> >> scientific and computational logic and test their own modifications.
> >>
> >>
> >>         A "Jupyter Notebook Tutorial: The Definitive Guide"[3] suggested
> >> I first install Anaconda Navigator.  I got version 1.9.2 of that.  It
> >> opens with options for eight different "applications" including
> >> JupyterLab 0.34.9, Jupyter Notebook 5.6.0, Spyder 3.3.1 (an IDE for
> >> Python), and RStudio 1.1.456.
> >>
> >>
> >>         This leads to several questions:
> >>
> >>
> >>               1.  In general, what experiences have people had with
> >> Jupyter Notebooks, Anaconda Navigator, and RMarkdown vignettes in
> >> RStudio, and the similarities and differences?  Do you know any
> >> references that discuss this?
> >
> > I've used both extensively, and noted the differences I've discovered above.
> >
> >>
> >>
> >>               2.  More specifically, does it make sense to try to use
> >> RStudio from within Anaconda Navigator, or is one better off using
> >> RStudio as a separate, stand alone application -- or should one even
> >> abandon RStudio and run R instead from within a Jupyter Notebook? [I'm
> >> new to this topic, so it's possible that this question doesn't even make
> >> sense.]
> >
> > The only advantage I can think of to using Rstudio via Anaconda is
> > that you could use conda environments to maintain different versions
> > or R and/or R packages for different projects.
> >
> > You'll have to weigh the pros and cons to decide whether to switch
> > from Rstudio to Jupyter notebooks. Depending on what you want to do
> > there are both advantages and disadvantages, as discussed above.
> >
> > Finally, I have to give a plug for a couple of related tools that I
> > find very useful.
> >
> > Emacs org-mode https://orgmode.org/ gives you the best of both worlds:
> > notebooks unconstrained by the browser that can include code in
> > multiple languages, header arguments, excellent export support, etc.
> > It is superior to both Jupyter and Rmarkdown, except that support only
> > exists in Emacs.
> >
> > Jupytext (https://github.com/mwouts/jupytext) is another way to have
> > it all, by allowing you to edit in markdown or Rmarkdown, and
> > auto-generating a notebook and possibly other formats for you. I've
> > only recently started experimenting with it, but so far I like it a
> > lot.
> >
> > Best,
> > Ista
> >>
> >>
> >>         Thanks,
> >>         Spencer Graves
> >>
> >>
> >> [1] If you have ideas for how best to do real time monitoring of
> >> broadcast quality of a radio station, I'd love to hear them.  I need
> >> software that will do that, preferably something that's free, open
> >> source.  The commercial software I've seen for this is not adequate for
> >> my purposes, so I'm trying to write my own.  I have a sample script in
> >> Python that will read a live stream from a radio tuner and output a
> >> *.wav of whatever length I want, and I wrote Python eight years ago for
> >> a similar real time application.  I'd prefer to use R, but I don't know
> >> how to get started.
> >>
> >>
> >> [2] 2018-04-13:
> >> "https://paulromer.net/jupyter-mathematica-and-the-future-of-the-research-paper".
> >> This further cites a similar article in The Atlantic from 2018-04-05:
> >> "www.theatlantic.com/science/archive/2018/04/the-scientific-paper-is-obsolete/556676".
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>


From friendly @ending from yorku@c@  Thu Oct 11 15:08:08 2018
From: friendly @ending from yorku@c@ (Michael Friendly)
Date: Thu, 11 Oct 2018 09:08:08 -0400
Subject: [R] Genuine relative paths with R
In-Reply-To: <VI1PR0202MB3357AF40A744B10736F640A3F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
 <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>
 <DB3PR0202MB3355AC9A5807D00F591E3B55F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <ac573e54-dde3-397e-601f-2130b5c27676@gmail.com>
 <DB3PR0202MB33559193F379157F44AD4AB0F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <f96e0c64-0e77-47f8-dbc1-5b49313ebb39@gmail.com>
 <VI1PR0202MB3357AF40A744B10736F640A3F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
Message-ID: <12da61c6-8c19-7af2-c57b-6cc5fc929481@yorku.ca>

Olivier:

Readers of R-Help generally are patient and try to be helpful. Numerous 
solutions to your initial query were proposed, but for some reason you
either reject them or take the discussion down some different rabbit 
hole of claims about R vs. other software environments, to which kind
people reply and you then rebut. ENOUGH ALREADY.  This thread has been
going on for nearly a week. Choose something that
works for you, have a cup of tea, go for a run, get a life.
Please do not bother to reply.

-Michael

On 10/10/2018 8:08 PM, Olivier GIVAUDAN wrote:
> I think Gabor (at least) already suggested this solution. But the problem is: how do you source this file containing this 'foo' function without writing its absolute path?
> 
> It's a kind of initialisation issue.
> 
>> a function returning the path of the R file where this same function was invoked.
>>> I didn't realize that's what you were asking for. This has nothing to do with your subject line.
> 
> It's just a trick to work with relative paths without having to write any hardcoded (by definition) absolute path beforehand.
> ________________________________
> De : Duncan Murdoch <murdoch.duncan at gmail.com>
> Envoy? : mercredi 10 octobre 2018 23:51
> ? : Olivier GIVAUDAN; Jeff Newmiller
> Cc : r-help at r-project.org
> Objet : Re: [R] Genuine relative paths with R
> 
> On 10/10/2018 7:11 PM, Olivier GIVAUDAN wrote:
>> It is not wrong to claim that R currently doesn't have a function
>> returning the path of the R file where this same function was invoked.
> 
> But it does.  I didn't realize that's what you were asking for.  This
> has nothing to do with your subject line.
> 
> If you source a file from somewhere, then each of the functions it
> creates is marked with its source location.  So you can put this in a file:
> 
> foo <- function () 1
> 
> filename <- normalizePath(getSrcFilename(foo, full.names=TRUE))
> 
> (You need the normalizePath() call because all that will be saved is the
> path that was used.  If it was a relative path, that's what you get
> before you normalize it.  You don't really need the foo function; you
> could put an anonymous function into the getSrcFilename call.  It's just
> usually easier to include a function that already exists.)
> 
> When you source() that file, filename will get the name of the file it
> came from.
> 
> This is a lot like __FILE__ in C.  One difference is that it is usually
> turned off when the function is being loaded into a package, but you can
> optionally turn it on.
> 
> You can also find out what line foo starts on, using
> 
> fooline <- getSrcLocation(foo)
> 
> This is a lot like __LINE__ in C.
> 
> Duncan Murdoch
> 
> 
>>
>> 'getwd()' is indeed not equivalent to VBA
>> 'Application.ThisWorkbook.Path' or C macro '__FILE__' or SAS
>> %sysget(SAS_EXECFILENAME), etc.
>> ------------------------------------------------------------------------
>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>> *Envoy? :* mercredi 10 octobre 2018 22:59
>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>> *Cc :* r-help at r-project.org
>> *Objet :* Re: [R] Genuine relative paths with R
>> On 10/10/2018 6:52 PM, Olivier GIVAUDAN wrote:
>>>>   Again, you seem to think making a package is a big deal.
>>>
>>> Perhaps not a big deal (I believe you, I didn't write an R package yet),
>>> but not as straightforward as having a function within an R file
>>> returning its own path.
>>>
>>>> But you're free to decide not to do it:  just please don't repeat
>>> falseclaims about R (like the ones about paths that started this long
>>> thread).
>>>
>>> Which false claims?
>>
>> "But I am really wondering why R doesn't have (please tell me if I'm
>> wrong) this basic feature as many other languages have it (batch, shell,
>> C, LaTeX, SAS with macro-variables, etc.)?"
>>
>> Duncan Murdoch
>>
>>> ------------------------------------------------------------------------
>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>> *Envoy? :* mercredi 10 octobre 2018 22:31
>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>> *Cc :* r-help at r-project.org
>>> *Objet :* Re: [R] Genuine relative paths with R
>>> On 10/10/2018 6:17 PM, Olivier GIVAUDAN wrote:
>>>>> Nothing says a package has to go on CRAN.  You can distribute
>>>> themprivately to a small audience.
>>>>
>>>> Yes, I agree in theory. But this solution still violates my own
>>>> proportionality principle.
>>>
>>> Again, you seem to think making a package is a big deal.  Maybe that was
>>> true 10 years ago (though I wrote and tested a package in a 45 minute
>>> presentation at UseR 2008), but now it's very easy.
>>>
>>> But you're free to decide not to do it:  just please don't repeat false
>>> claims about R (like the ones about paths that started this long thread).
>>>
>>>>
>>>>> If you know as much about R as the people who wrote it
>>>>
>>>> I didn't claim that (that's was a quite general / theoretical statement,
>>>> not necessarily and only applicable to R).
>>>
>>> I didn't say you made that claim.  I was answering your question about
>>> why inventing your own way is not a good idea.  It might be a good idea,
>>> if you know the system very, very well.  Otherwise, it's probably better
>>> to work the standard way.
>>>
>>> Duncan Murdoch
>>>
>>>>
>>>>> For example, you might thinkthat all front ends set the working
>>>> directory to the directory of theprogram they are running, because the
>>>> ones you've tried do it that way. But they don't.
>>>>
> 
> 
>>>> GUIs. So the workaround I finally found satisfies my current needs
>>>> ------------------------------------------------------------------------
>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>> *Envoy? :* mercredi 10 octobre 2018 22:07
>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>> *Cc :* r-help at r-project.org
>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>> On 10/10/2018 5:45 PM, Olivier GIVAUDAN wrote:
>>>>> I'm not sure I'm "inventing my own way" of distributing R code... And I
>>>>> distribute it to a very limited audience.
>>>>
>>>> Nothing says a package has to go on CRAN.  You can distribute them
>>>> privately to a small audience.
>>>>
>>>>> Anyway, why not "inventing a new way" if it's more efficient than the
>>>>> standard one (I'm talking now in theory)?
>>>>
>>>> If you know as much about R as the people who wrote it, then you can
>>>> almost certainly invent better ways to do many of the things it does.  R
>>>> Core was constrained by trying to maintain back compatibility, and that
>>>> means some of their solutions aren't perfect.
>>>>
>>>> But if you don't know it that well, chances are you'll make mistakes
>>>> when you invent your own way of doing it.  For example, you might think
>>>> that all front ends set the working directory to the directory of the
>>>> program they are running, because the ones you've tried do it that way.
>>>> But they don't.
>>>>
>>>> Duncan Murdoch
>>>>
>>>>> ------------------------------------------------------------------------
>>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>>> *Envoy? :* mercredi 10 octobre 2018 21:39
>>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>>> *Cc :* r-help at r-project.org
>>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>>> On 10/10/2018 5:31 PM, Olivier GIVAUDAN wrote:
>>>>>> I do not want to use the terminal, just double clicks (i.e. the
>>>>>> simplest, automatic, non-manual way, without having to write a line /
>>>>>> command).
>>>>>> Therefore everything should happen outside any terminal. The user won't
>>>>>> use a terminal.
>>>>>>
>>>>>> I don't have a Mac and I'm not familiar with this OS, sorry.
>>>>>> But I'm really surprised the click method gives different results than
> 
>>>>>> I know the click method worked both on Linux (Ubuntu latest version) and
> 
>>>>>>
>>>>>> Yes, I executed my file from a terminal and got obviously the same
>>>>>> result as you (that's reassuring).
>>>>>>
>>>>>> Come on guys, creating a package... It's like using a hammer to kill a
>>>>>> fly...
>>>>>
>>>>> It's a simple operation to create a package in RStudio.  Not quite a
>>>>> single click, but just a few.
>>>>>
>>>>> In plain R, it's just a little more work using package.skeleton().
>>>>>
>>>>> Really, if you are distributing R code, you should do it in the standard
>>>>> way, not invent your own.
>>>>>
>>>>> Duncan Murdoch
>>>>>
>>>>>> ------------------------------------------------------------------------
>>>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>>>> *Envoy? :* mercredi 10 octobre 2018 20:54
>>>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>>>> *Cc :* r-help at r-project.org
>>>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>>>> On 10/10/2018 4:42 PM, Olivier GIVAUDAN wrote:
>>>>>>> Why are you not simply double-clicking on 'TestPWD' and choosing to
>>>>>>> execute the file (don't add anything)?
>>>>>>> Are you executing the file from a terminal?
>>>>>>
>>>>>> Yes, I was executing the file from my terminal.  Otherwise I really have
>>>>>> no idea what the "current directory" is in the Finder.   (I'm on a Mac.
>>>>>> I just tried the click method; it printed my home directory, not the
>>>>>> directory of the script.)
>>>>>>
>>>>>> I don't know the name of your visual front end, but you are displaying
>>>>>> the working directory that it sets when you click on TestPWD.  That will
>>>>>> be different from the working directory that your user sees in the Terminal.
>>>>>>
>>>>>> You can see what I saw if you run TestPWD from the Terminal.  It will
>>>>>> print the current working directory, not the one where TestPWD happens
>>>>>> to live.
>>>>>>
>>>>>> If you want to do the same sort of thing in R, you could set up a script
>>>>>> that calls R, and execute that in the way you executed TestPWD.  But in
>>>>>> another message you said you aren't allowed to do that, so I think your
>>>>>> best solution is the one offered by Bill Dunlap:  organize your files as
>>>>>> an R package.  If you name your package "Olivier", then you can find all
>>>>>> the files in it under the directory returned by
>>>>>>
>>>>>>      system.file(".", package = "Olivier")
>>>>>>
>>>>>> The package system is designed for R code, but you can put arbitrary
>>>>>> files into a package:  just store them under the "inst" directory in
>>>>>> your source.  When the package is installed, those files will be moved
>>>>>> up one level, i.e.
>>>>>>
>>>>>> Olivier/inst/foo
>>>>>>
>>>>>> will become
>>>>>>
>>>>>>      system.file("foo", package = "Olivier")
>>>>>>
>>>>>> Duncan Murdoch
>>>>>
>>>>
>>>
>>
> 
> 
> 	[[alternative HTML version deleted]]
> 
> 
>


From jdnewmil @ending from dcn@d@vi@@c@@u@  Thu Oct 11 16:03:10 2018
From: jdnewmil @ending from dcn@d@vi@@c@@u@ (Jeff Newmiller)
Date: Thu, 11 Oct 2018 07:03:10 -0700
Subject: [R] RMarkdown vignettes v. Jupyter notebooks?
In-Reply-To: <CA+vqiLH=U6r7z9ZJ9VSrENMP4pDNYLu05OKcOZe44OWwH9rpwQ@mail.gmail.com>
References: <056b9d58-70ef-b0bc-a195-b1b8c5377a60@effectivedefense.org>
 <CA+vqiLFRhHi+jm4JNwwEd+MOMG-Agzk7p_duKoku8G-CgTBNuQ@mail.gmail.com>
 <248ead90-e4d2-a0da-49b3-93afa850c0b3@gmail.com>
 <CA+vqiLH=U6r7z9ZJ9VSrENMP4pDNYLu05OKcOZe44OWwH9rpwQ@mail.gmail.com>
Message-ID: <92A266C1-82B9-4D40-B571-251DF6A4A2EB@dcn.davis.ca.us>

Ista, you do not seem to be aware of the 
.nb.html format, which is way easier to share with a non-uswr than an ipynb file yet allows the same in-progress kinds of results to be shared and the source can be extracted easily using a web browser (no server needed).

There is some controversy about this whole notebook approach [1] but I think deciding whether it is right for your purposes is highly subjective.

FWIW It took me years to figure out how to even open a Jupyter notebook, so the idea that they should be the gold standard for sharing results seems absurd to me.

[1] https://yihui.name/en/2018/09/notebook-war/

On October 11, 2018 5:53:29 AM PDT, Ista Zahn <istazahn at gmail.com> wrote:
>On Thu, Oct 11, 2018 at 8:36 AM Duncan Murdoch
><murdoch.duncan at gmail.com> wrote:
>>
>> On 11/10/2018 7:18 AM, Ista Zahn wrote:
>> > Hi Spencer,
>> >
>> > On Thu, Oct 11, 2018 at 5:08 AM Spencer Graves
>> > <spencer.graves at effectivedefense.org> wrote:
>> >>
>> >> Hello:
>> >>
>> >>
>> >>         What are the differences between Jupyter notebooks and
>RMarkdown
>> >> vignettes?
>> >
>> > Here are some of the main differences I'm aware of:
>> >
>> > Rmarkdown files include code and prose. The results produced by the
>> > code do not appear in the Rmarkdown file; instead, the file must be
>> > processed and typeset to produce a .pdf or .html (etc.) file that
>> > includes those results. Jupyter notebooks dispense with with
>> > processing step: output is displayed directly in the notebook. That
>> > is, a notebook includes code, prose, and results, while an
>Rmarkdown
>> > file includes only code and prose.
>>
>> RStudio can display the output mixed in with the text in the editor.
>
>True, but the _file_ does not include the output. Thus it functions
>more as a preview, and will not be visible to you if I email you a
>.Rmd file. On the other hand, .ipynb files really do contain the
>output; if I email one to you and you open it in Jupyter you will see
>the output as well.
>
>--Ista
>
>>
>> >
>> > Rmarkdown allows control over the inclusion of code and results,
>and
>> > over how the results are displayed via header arguments. There is
>no
>> > such thing in Jupyter notebooks. Controlling the precise appearance
>of
>> > a document produced by Jupyter is much more difficult. Going
>farther,
>> > one can even say that Jupyter notebooks are designed primarily to
>be
>> > read as Jupyter notebooks; exporting to other formats is kind of an
>> > afterthought. In contrast, Rmarkdown is designed to produce the
>final
>> > readable result in another format (.html or .pdf typically).
>> >
>> > Rmarkdown is based on markdown, a human readable markup language,
>> > Jupyter notebooks are based on JSON, a data interchange format
>common
>> > on the web. This means that Rmarkdown files can be easily edited
>using
>> > any text editor you like. The same is not true of Jupyter
>notebooks.
>> > While you can of course edit the JSON directly, the format is
>designed
>> > to be written and read by a computer; editing it yourself is not
>easy.
>> >
>> > Rmarkdown is specific to R (I guess there is some basic support in
>> > knitr for other languages, but in my experience it never worked
>well)
>> > while Jupyter notebooks are language agnostic and "kernels" exist
>for
>> > a large number of programming languages. However, each Jupyter
>> > notebook can use only one kernel; you can't easily have R and
>Python
>> > code in the same notebook.
>> >
>> > Jupyter notebooks typically run in your browser where the actual
>text
>> > editing features are somewhat limited. Rmarkdown is typically run
>in
>> > an editor such as Emacs or Rstudio where editing and project
>support
>> > is much better and greater customization may be possible. You can
>work
>> > indirectly with Jupyter notebooks in Emacs
>> > (https://github.com/millejoh/emacs-ipython-notebook) and perhaps
>other
>> > editors as well; this goes some way toward escaping the tyranny of
>the
>> > browser but is more fragile and difficult to get working compared
>to
>> > Rmarkdown.
>> >
>> > Because Jupyter uses a web-based client-server model, it is easy to
>> > provide live interactive notebooks on your website (see e.g.,
>> > https://github.com/jupyterhub/binderhub). As far as I know this is
>not
>> > currently possible with Rmarkdown.
>>
>> There are ways to put Shiny apps into Rmarkdown documents; see
>>
><https://beta.rstudioconnect.com/content/2671/Combining-Shiny-R-Markdown.html>.
>>   Other than my two notes above, your comments about Rmarkdown seem
>> right on the mark.
>>
>> Duncan Murdoch
>>
>> >
>> >>
>> >>
>> >>         I'm trying to do real time monitoring of the broadcast
>quality of
>> >> a radio station, and it seems to me that it may be easier to do
>that in
>> >> Python than in R.[1]  This led me to a recent post to
>> >> "python-list at python.org" that mentioned "Jupyter, Mathematica, and
>the
>> >> Future of the Research Paper"[2] by Paul Romer, who won the 2018
>Nobel
>> >> Memorial Prize in Economics only a few days ago.  In brief, this
>article
>> >> suggests that Jupyter notebooks may replace publication in
>refereed
>> >> scientific journals as the primary vehicle for sharing scientific
>> >> research, because they make it so easy for readers to follow both
>the
>> >> scientific and computational logic and test their own
>modifications.
>> >>
>> >>
>> >>         A "Jupyter Notebook Tutorial: The Definitive Guide"[3]
>suggested
>> >> I first install Anaconda Navigator.  I got version 1.9.2 of that. 
>It
>> >> opens with options for eight different "applications" including
>> >> JupyterLab 0.34.9, Jupyter Notebook 5.6.0, Spyder 3.3.1 (an IDE
>for
>> >> Python), and RStudio 1.1.456.
>> >>
>> >>
>> >>         This leads to several questions:
>> >>
>> >>
>> >>               1.  In general, what experiences have people had
>with
>> >> Jupyter Notebooks, Anaconda Navigator, and RMarkdown vignettes in
>> >> RStudio, and the similarities and differences?  Do you know any
>> >> references that discuss this?
>> >
>> > I've used both extensively, and noted the differences I've
>discovered above.
>> >
>> >>
>> >>
>> >>               2.  More specifically, does it make sense to try to
>use
>> >> RStudio from within Anaconda Navigator, or is one better off using
>> >> RStudio as a separate, stand alone application -- or should one
>even
>> >> abandon RStudio and run R instead from within a Jupyter Notebook?
>[I'm
>> >> new to this topic, so it's possible that this question doesn't
>even make
>> >> sense.]
>> >
>> > The only advantage I can think of to using Rstudio via Anaconda is
>> > that you could use conda environments to maintain different
>versions
>> > or R and/or R packages for different projects.
>> >
>> > You'll have to weigh the pros and cons to decide whether to switch
>> > from Rstudio to Jupyter notebooks. Depending on what you want to do
>> > there are both advantages and disadvantages, as discussed above.
>> >
>> > Finally, I have to give a plug for a couple of related tools that I
>> > find very useful.
>> >
>> > Emacs org-mode https://orgmode.org/ gives you the best of both
>worlds:
>> > notebooks unconstrained by the browser that can include code in
>> > multiple languages, header arguments, excellent export support,
>etc.
>> > It is superior to both Jupyter and Rmarkdown, except that support
>only
>> > exists in Emacs.
>> >
>> > Jupytext (https://github.com/mwouts/jupytext) is another way to
>have
>> > it all, by allowing you to edit in markdown or Rmarkdown, and
>> > auto-generating a notebook and possibly other formats for you. I've
>> > only recently started experimenting with it, but so far I like it a
>> > lot.
>> >
>> > Best,
>> > Ista
>> >>
>> >>
>> >>         Thanks,
>> >>         Spencer Graves
>> >>
>> >>
>> >> [1] If you have ideas for how best to do real time monitoring of
>> >> broadcast quality of a radio station, I'd love to hear them.  I
>need
>> >> software that will do that, preferably something that's free, open
>> >> source.  The commercial software I've seen for this is not
>adequate for
>> >> my purposes, so I'm trying to write my own.  I have a sample
>script in
>> >> Python that will read a live stream from a radio tuner and output
>a
>> >> *.wav of whatever length I want, and I wrote Python eight years
>ago for
>> >> a similar real time application.  I'd prefer to use R, but I don't
>know
>> >> how to get started.
>> >>
>> >>
>> >> [2] 2018-04-13:
>> >>
>"https://paulromer.net/jupyter-mathematica-and-the-future-of-the-research-paper".
>> >> This further cites a similar article in The Atlantic from
>2018-04-05:
>> >>
>"www.theatlantic.com/science/archive/2018/04/the-scientific-paper-is-obsolete/556676".
>> >>
>> >> ______________________________________________
>> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> >> https://stat.ethz.ch/mailman/listinfo/r-help
>> >> PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>> >> and provide commented, minimal, self-contained, reproducible code.
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>> >
>>
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From i@t@z@hn @ending from gm@il@com  Thu Oct 11 16:11:44 2018
From: i@t@z@hn @ending from gm@il@com (Ista Zahn)
Date: Thu, 11 Oct 2018 10:11:44 -0400
Subject: [R] RMarkdown vignettes v. Jupyter notebooks?
In-Reply-To: <92A266C1-82B9-4D40-B571-251DF6A4A2EB@dcn.davis.ca.us>
References: <056b9d58-70ef-b0bc-a195-b1b8c5377a60@effectivedefense.org>
 <CA+vqiLFRhHi+jm4JNwwEd+MOMG-Agzk7p_duKoku8G-CgTBNuQ@mail.gmail.com>
 <248ead90-e4d2-a0da-49b3-93afa850c0b3@gmail.com>
 <CA+vqiLH=U6r7z9ZJ9VSrENMP4pDNYLu05OKcOZe44OWwH9rpwQ@mail.gmail.com>
 <92A266C1-82B9-4D40-B571-251DF6A4A2EB@dcn.davis.ca.us>
Message-ID: <CA+vqiLEOo+cMFggu1mvVFWB0cxPygQg+KSUHKBu7v4W=cGktig@mail.gmail.com>

On Thu, Oct 11, 2018 at 10:03 AM Jeff Newmiller
<jdnewmil at dcn.davis.ca.us> wrote:
>
> Ista, you do not seem to be aware of the
> .nb.html format, which is way easier to share with a non-uswr than an ipynb file yet allows the same in-progress kinds of results to be shared and the source can be extracted easily using a web browser (no server needed).

Yes, I am aware that notebooks can be exported / converted to other
formats, including .html and .pdf. My point is about emphasis:
Rmarkdown gives you header arguments and other tools that allow you a
great deal of control over how the final .html or .pdf file looks. The
system seems designed to produce .html or .pdf as the final output
format. Jupyter notebooks on the other hand seem primarily designed to
be viewed as Jupyter notebooks: they don't give you a log of tools for
controlling how the converted / exported notebook appears. That's not
so say there is not conversion / export possible of course...

--Ista

>
> There is some controversy about this whole notebook approach [1] but I think deciding whether it is right for your purposes is highly subjective.
>
> FWIW It took me years to figure out how to even open a Jupyter notebook, so the idea that they should be the gold standard for sharing results seems absurd to me.
>
> [1] https://yihui.name/en/2018/09/notebook-war/
>
> On October 11, 2018 5:53:29 AM PDT, Ista Zahn <istazahn at gmail.com> wrote:
> >On Thu, Oct 11, 2018 at 8:36 AM Duncan Murdoch
> ><murdoch.duncan at gmail.com> wrote:
> >>
> >> On 11/10/2018 7:18 AM, Ista Zahn wrote:
> >> > Hi Spencer,
> >> >
> >> > On Thu, Oct 11, 2018 at 5:08 AM Spencer Graves
> >> > <spencer.graves at effectivedefense.org> wrote:
> >> >>
> >> >> Hello:
> >> >>
> >> >>
> >> >>         What are the differences between Jupyter notebooks and
> >RMarkdown
> >> >> vignettes?
> >> >
> >> > Here are some of the main differences I'm aware of:
> >> >
> >> > Rmarkdown files include code and prose. The results produced by the
> >> > code do not appear in the Rmarkdown file; instead, the file must be
> >> > processed and typeset to produce a .pdf or .html (etc.) file that
> >> > includes those results. Jupyter notebooks dispense with with
> >> > processing step: output is displayed directly in the notebook. That
> >> > is, a notebook includes code, prose, and results, while an
> >Rmarkdown
> >> > file includes only code and prose.
> >>
> >> RStudio can display the output mixed in with the text in the editor.
> >
> >True, but the _file_ does not include the output. Thus it functions
> >more as a preview, and will not be visible to you if I email you a
> >.Rmd file. On the other hand, .ipynb files really do contain the
> >output; if I email one to you and you open it in Jupyter you will see
> >the output as well.
> >
> >--Ista
> >
> >>
> >> >
> >> > Rmarkdown allows control over the inclusion of code and results,
> >and
> >> > over how the results are displayed via header arguments. There is
> >no
> >> > such thing in Jupyter notebooks. Controlling the precise appearance
> >of
> >> > a document produced by Jupyter is much more difficult. Going
> >farther,
> >> > one can even say that Jupyter notebooks are designed primarily to
> >be
> >> > read as Jupyter notebooks; exporting to other formats is kind of an
> >> > afterthought. In contrast, Rmarkdown is designed to produce the
> >final
> >> > readable result in another format (.html or .pdf typically).
> >> >
> >> > Rmarkdown is based on markdown, a human readable markup language,
> >> > Jupyter notebooks are based on JSON, a data interchange format
> >common
> >> > on the web. This means that Rmarkdown files can be easily edited
> >using
> >> > any text editor you like. The same is not true of Jupyter
> >notebooks.
> >> > While you can of course edit the JSON directly, the format is
> >designed
> >> > to be written and read by a computer; editing it yourself is not
> >easy.
> >> >
> >> > Rmarkdown is specific to R (I guess there is some basic support in
> >> > knitr for other languages, but in my experience it never worked
> >well)
> >> > while Jupyter notebooks are language agnostic and "kernels" exist
> >for
> >> > a large number of programming languages. However, each Jupyter
> >> > notebook can use only one kernel; you can't easily have R and
> >Python
> >> > code in the same notebook.
> >> >
> >> > Jupyter notebooks typically run in your browser where the actual
> >text
> >> > editing features are somewhat limited. Rmarkdown is typically run
> >in
> >> > an editor such as Emacs or Rstudio where editing and project
> >support
> >> > is much better and greater customization may be possible. You can
> >work
> >> > indirectly with Jupyter notebooks in Emacs
> >> > (https://github.com/millejoh/emacs-ipython-notebook) and perhaps
> >other
> >> > editors as well; this goes some way toward escaping the tyranny of
> >the
> >> > browser but is more fragile and difficult to get working compared
> >to
> >> > Rmarkdown.
> >> >
> >> > Because Jupyter uses a web-based client-server model, it is easy to
> >> > provide live interactive notebooks on your website (see e.g.,
> >> > https://github.com/jupyterhub/binderhub). As far as I know this is
> >not
> >> > currently possible with Rmarkdown.
> >>
> >> There are ways to put Shiny apps into Rmarkdown documents; see
> >>
> ><https://beta.rstudioconnect.com/content/2671/Combining-Shiny-R-Markdown.html>.
> >>   Other than my two notes above, your comments about Rmarkdown seem
> >> right on the mark.
> >>
> >> Duncan Murdoch
> >>
> >> >
> >> >>
> >> >>
> >> >>         I'm trying to do real time monitoring of the broadcast
> >quality of
> >> >> a radio station, and it seems to me that it may be easier to do
> >that in
> >> >> Python than in R.[1]  This led me to a recent post to
> >> >> "python-list at python.org" that mentioned "Jupyter, Mathematica, and
> >the
> >> >> Future of the Research Paper"[2] by Paul Romer, who won the 2018
> >Nobel
> >> >> Memorial Prize in Economics only a few days ago.  In brief, this
> >article
> >> >> suggests that Jupyter notebooks may replace publication in
> >refereed
> >> >> scientific journals as the primary vehicle for sharing scientific
> >> >> research, because they make it so easy for readers to follow both
> >the
> >> >> scientific and computational logic and test their own
> >modifications.
> >> >>
> >> >>
> >> >>         A "Jupyter Notebook Tutorial: The Definitive Guide"[3]
> >suggested
> >> >> I first install Anaconda Navigator.  I got version 1.9.2 of that.
> >It
> >> >> opens with options for eight different "applications" including
> >> >> JupyterLab 0.34.9, Jupyter Notebook 5.6.0, Spyder 3.3.1 (an IDE
> >for
> >> >> Python), and RStudio 1.1.456.
> >> >>
> >> >>
> >> >>         This leads to several questions:
> >> >>
> >> >>
> >> >>               1.  In general, what experiences have people had
> >with
> >> >> Jupyter Notebooks, Anaconda Navigator, and RMarkdown vignettes in
> >> >> RStudio, and the similarities and differences?  Do you know any
> >> >> references that discuss this?
> >> >
> >> > I've used both extensively, and noted the differences I've
> >discovered above.
> >> >
> >> >>
> >> >>
> >> >>               2.  More specifically, does it make sense to try to
> >use
> >> >> RStudio from within Anaconda Navigator, or is one better off using
> >> >> RStudio as a separate, stand alone application -- or should one
> >even
> >> >> abandon RStudio and run R instead from within a Jupyter Notebook?
> >[I'm
> >> >> new to this topic, so it's possible that this question doesn't
> >even make
> >> >> sense.]
> >> >
> >> > The only advantage I can think of to using Rstudio via Anaconda is
> >> > that you could use conda environments to maintain different
> >versions
> >> > or R and/or R packages for different projects.
> >> >
> >> > You'll have to weigh the pros and cons to decide whether to switch
> >> > from Rstudio to Jupyter notebooks. Depending on what you want to do
> >> > there are both advantages and disadvantages, as discussed above.
> >> >
> >> > Finally, I have to give a plug for a couple of related tools that I
> >> > find very useful.
> >> >
> >> > Emacs org-mode https://orgmode.org/ gives you the best of both
> >worlds:
> >> > notebooks unconstrained by the browser that can include code in
> >> > multiple languages, header arguments, excellent export support,
> >etc.
> >> > It is superior to both Jupyter and Rmarkdown, except that support
> >only
> >> > exists in Emacs.
> >> >
> >> > Jupytext (https://github.com/mwouts/jupytext) is another way to
> >have
> >> > it all, by allowing you to edit in markdown or Rmarkdown, and
> >> > auto-generating a notebook and possibly other formats for you. I've
> >> > only recently started experimenting with it, but so far I like it a
> >> > lot.
> >> >
> >> > Best,
> >> > Ista
> >> >>
> >> >>
> >> >>         Thanks,
> >> >>         Spencer Graves
> >> >>
> >> >>
> >> >> [1] If you have ideas for how best to do real time monitoring of
> >> >> broadcast quality of a radio station, I'd love to hear them.  I
> >need
> >> >> software that will do that, preferably something that's free, open
> >> >> source.  The commercial software I've seen for this is not
> >adequate for
> >> >> my purposes, so I'm trying to write my own.  I have a sample
> >script in
> >> >> Python that will read a live stream from a radio tuner and output
> >a
> >> >> *.wav of whatever length I want, and I wrote Python eight years
> >ago for
> >> >> a similar real time application.  I'd prefer to use R, but I don't
> >know
> >> >> how to get started.
> >> >>
> >> >>
> >> >> [2] 2018-04-13:
> >> >>
> >"https://paulromer.net/jupyter-mathematica-and-the-future-of-the-research-paper".
> >> >> This further cites a similar article in The Atlantic from
> >2018-04-05:
> >> >>
> >"www.theatlantic.com/science/archive/2018/04/the-scientific-paper-is-obsolete/556676".
> >> >>
> >> >> ______________________________________________
> >> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> >> PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >> >> and provide commented, minimal, self-contained, reproducible code.
> >> >
> >> > ______________________________________________
> >> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> > https://stat.ethz.ch/mailman/listinfo/r-help
> >> > PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >> > and provide commented, minimal, self-contained, reproducible code.
> >> >
> >>
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my phone. Please excuse my brevity.


From xie @ending from yihui@n@me  Thu Oct 11 16:15:08 2018
From: xie @ending from yihui@n@me (Yihui Xie)
Date: Thu, 11 Oct 2018 09:15:08 -0500
Subject: [R] RMarkdown vignettes v. Jupyter notebooks?
In-Reply-To: <CA+vqiLFRhHi+jm4JNwwEd+MOMG-Agzk7p_duKoku8G-CgTBNuQ@mail.gmail.com>
References: <056b9d58-70ef-b0bc-a195-b1b8c5377a60@effectivedefense.org>
 <CA+vqiLFRhHi+jm4JNwwEd+MOMG-Agzk7p_duKoku8G-CgTBNuQ@mail.gmail.com>
Message-ID: <CANROs4fFzcT+G+h8M11X=ydRY8Pno0hKTJdRhrg_Ejta0pLojg@mail.gmail.com>

I just have one comment on the multi-language support in R Markdown
(inline below):

On Thu, Oct 11, 2018 at 6:19 AM Ista Zahn <istazahn at gmail.com> wrote:
>
> Hi Spencer,
>
> On Thu, Oct 11, 2018 at 5:08 AM Spencer Graves
> <spencer.graves at effectivedefense.org> wrote:
> >
> > Hello:
> >
> >
> >        What are the differences between Jupyter notebooks and RMarkdown
> > vignettes?
>
> Here are some of the main differences I'm aware of:
>
> Rmarkdown files include code and prose. The results produced by the
> code do not appear in the Rmarkdown file; instead, the file must be
> processed and typeset to produce a .pdf or .html (etc.) file that
> includes those results. Jupyter notebooks dispense with with
> processing step: output is displayed directly in the notebook. That
> is, a notebook includes code, prose, and results, while an Rmarkdown
> file includes only code and prose.
>
> Rmarkdown allows control over the inclusion of code and results, and
> over how the results are displayed via header arguments. There is no
> such thing in Jupyter notebooks. Controlling the precise appearance of
> a document produced by Jupyter is much more difficult. Going farther,
> one can even say that Jupyter notebooks are designed primarily to be
> read as Jupyter notebooks; exporting to other formats is kind of an
> afterthought. In contrast, Rmarkdown is designed to produce the final
> readable result in another format (.html or .pdf typically).
>
> Rmarkdown is based on markdown, a human readable markup language,
> Jupyter notebooks are based on JSON, a data interchange format common
> on the web. This means that Rmarkdown files can be easily edited using
> any text editor you like. The same is not true of Jupyter notebooks.
> While you can of course edit the JSON directly, the format is designed
> to be written and read by a computer; editing it yourself is not easy.
>
> Rmarkdown is specific to R (I guess there is some basic support in
> knitr for other languages, but in my experience it never worked well)
> while Jupyter notebooks are language agnostic and "kernels" exist for
> a large number of programming languages. However, each Jupyter
> notebook can use only one kernel; you can't easily have R and Python
> code in the same notebook.

You might want to at least update your impression about the Python
support in R Markdown now :) Last year, with the release of the
reticulate package, the support for Python has been substantially
enhanced in both R Markdown
(https://bookdown.org/yihui/rmarkdown/language-engines.html) and
RStudio (https://blog.rstudio.com/2018/10/09/rstudio-1-2-preview-reticulated-python/).
You can easily have both R and Python code in the same R Markdown
document, and the two worlds can freely talk to each other.

> Jupyter notebooks typically run in your browser where the actual text
> editing features are somewhat limited. Rmarkdown is typically run in
> an editor such as Emacs or Rstudio where editing and project support
> is much better and greater customization may be possible. You can work
> indirectly with Jupyter notebooks in Emacs
> (https://github.com/millejoh/emacs-ipython-notebook) and perhaps other
> editors as well; this goes some way toward escaping the tyranny of the
> browser but is more fragile and difficult to get working compared to
> Rmarkdown.
>
> Because Jupyter uses a web-based client-server model, it is easy to
> provide live interactive notebooks on your website (see e.g.,
> https://github.com/jupyterhub/binderhub). As far as I know this is not
> currently possible with Rmarkdown.
>
> >
> >
> >        I'm trying to do real time monitoring of the broadcast quality of
> > a radio station, and it seems to me that it may be easier to do that in
> > Python than in R.[1]  This led me to a recent post to
> > "python-list at python.org" that mentioned "Jupyter, Mathematica, and the
> > Future of the Research Paper"[2] by Paul Romer, who won the 2018 Nobel
> > Memorial Prize in Economics only a few days ago.  In brief, this article
> > suggests that Jupyter notebooks may replace publication in refereed
> > scientific journals as the primary vehicle for sharing scientific
> > research, because they make it so easy for readers to follow both the
> > scientific and computational logic and test their own modifications.
> >
> >
> >        A "Jupyter Notebook Tutorial: The Definitive Guide"[3] suggested
> > I first install Anaconda Navigator.  I got version 1.9.2 of that.  It
> > opens with options for eight different "applications" including
> > JupyterLab 0.34.9, Jupyter Notebook 5.6.0, Spyder 3.3.1 (an IDE for
> > Python), and RStudio 1.1.456.
> >
> >
> >        This leads to several questions:
> >
> >
> >              1.  In general, what experiences have people had with
> > Jupyter Notebooks, Anaconda Navigator, and RMarkdown vignettes in
> > RStudio, and the similarities and differences?  Do you know any
> > references that discuss this?
>
> I've used both extensively, and noted the differences I've discovered above.
>
> >
> >
> >              2.  More specifically, does it make sense to try to use
> > RStudio from within Anaconda Navigator, or is one better off using
> > RStudio as a separate, stand alone application -- or should one even
> > abandon RStudio and run R instead from within a Jupyter Notebook? [I'm
> > new to this topic, so it's possible that this question doesn't even make
> > sense.]
>
> The only advantage I can think of to using Rstudio via Anaconda is
> that you could use conda environments to maintain different versions
> or R and/or R packages for different projects.
>
> You'll have to weigh the pros and cons to decide whether to switch
> from Rstudio to Jupyter notebooks. Depending on what you want to do
> there are both advantages and disadvantages, as discussed above.
>
> Finally, I have to give a plug for a couple of related tools that I
> find very useful.
>
> Emacs org-mode https://orgmode.org/ gives you the best of both worlds:
> notebooks unconstrained by the browser that can include code in
> multiple languages, header arguments, excellent export support, etc.
> It is superior to both Jupyter and Rmarkdown, except that support only
> exists in Emacs.
>
> Jupytext (https://github.com/mwouts/jupytext) is another way to have
> it all, by allowing you to edit in markdown or Rmarkdown, and
> auto-generating a notebook and possibly other formats for you. I've
> only recently started experimenting with it, but so far I like it a
> lot.
>
> Best,
> Ista
> >
> >
> >        Thanks,
> >        Spencer Graves
> >
> >
> > [1] If you have ideas for how best to do real time monitoring of
> > broadcast quality of a radio station, I'd love to hear them.  I need
> > software that will do that, preferably something that's free, open
> > source.  The commercial software I've seen for this is not adequate for
> > my purposes, so I'm trying to write my own.  I have a sample script in
> > Python that will read a live stream from a radio tuner and output a
> > *.wav of whatever length I want, and I wrote Python eight years ago for
> > a similar real time application.  I'd prefer to use R, but I don't know
> > how to get started.
> >
> >
> > [2] 2018-04-13:
> > "https://paulromer.net/jupyter-mathematica-and-the-future-of-the-research-paper".
> > This further cites a similar article in The Atlantic from 2018-04-05:
> > "www.theatlantic.com/science/archive/2018/04/the-scientific-paper-is-obsolete/556676".


From i@t@z@hn @ending from gm@il@com  Thu Oct 11 16:19:36 2018
From: i@t@z@hn @ending from gm@il@com (Ista Zahn)
Date: Thu, 11 Oct 2018 10:19:36 -0400
Subject: [R] RMarkdown vignettes v. Jupyter notebooks?
In-Reply-To: <CANROs4fFzcT+G+h8M11X=ydRY8Pno0hKTJdRhrg_Ejta0pLojg@mail.gmail.com>
References: <056b9d58-70ef-b0bc-a195-b1b8c5377a60@effectivedefense.org>
 <CA+vqiLFRhHi+jm4JNwwEd+MOMG-Agzk7p_duKoku8G-CgTBNuQ@mail.gmail.com>
 <CANROs4fFzcT+G+h8M11X=ydRY8Pno0hKTJdRhrg_Ejta0pLojg@mail.gmail.com>
Message-ID: <CA+vqiLH49R-F8BGFOjHS2mGko8CjJXJxHV1Hbx6KxwTca982CA@mail.gmail.com>

On Thu, Oct 11, 2018 at 10:15 AM Yihui Xie <xie at yihui.name> wrote:
>
> I just have one comment on the multi-language support in R Markdown
> (inline below):
>
> On Thu, Oct 11, 2018 at 6:19 AM Ista Zahn <istazahn at gmail.com> wrote:
> >
> > Hi Spencer,
> >
> > On Thu, Oct 11, 2018 at 5:08 AM Spencer Graves
> > <spencer.graves at effectivedefense.org> wrote:
> > >
> > > Hello:
> > >
> > >
> > >        What are the differences between Jupyter notebooks and RMarkdown
> > > vignettes?
> >
> > Here are some of the main differences I'm aware of:
> >

<snip>

> > Rmarkdown is specific to R (I guess there is some basic support in
> > knitr for other languages, but in my experience it never worked well)
> > while Jupyter notebooks are language agnostic and "kernels" exist for
> > a large number of programming languages. However, each Jupyter
> > notebook can use only one kernel; you can't easily have R and Python
> > code in the same notebook.
>
> You might want to at least update your impression about the Python
> support in R Markdown now :) Last year, with the release of the
> reticulate package, the support for Python has been substantially
> enhanced in both R Markdown
> (https://bookdown.org/yihui/rmarkdown/language-engines.html) and
> RStudio (https://blog.rstudio.com/2018/10/09/rstudio-1-2-preview-reticulated-python/).
> You can easily have both R and Python code in the same R Markdown
> document, and the two worlds can freely talk to each other.

Yes, I did miss that development, thank you for that! I haven't spent
much time with it yet, but that looks really great.

--Ista
>
> > Jupyter notebooks typically run in your browser where the actual text
> > editing features are somewhat limited. Rmarkdown is typically run in
> > an editor such as Emacs or Rstudio where editing and project support
> > is much better and greater customization may be possible. You can work
> > indirectly with Jupyter notebooks in Emacs
> > (https://github.com/millejoh/emacs-ipython-notebook) and perhaps other
> > editors as well; this goes some way toward escaping the tyranny of the
> > browser but is more fragile and difficult to get working compared to
> > Rmarkdown.
> >
> > Because Jupyter uses a web-based client-server model, it is easy to
> > provide live interactive notebooks on your website (see e.g.,
> > https://github.com/jupyterhub/binderhub). As far as I know this is not
> > currently possible with Rmarkdown.
> >
> > >
> > >
> > >        I'm trying to do real time monitoring of the broadcast quality of
> > > a radio station, and it seems to me that it may be easier to do that in
> > > Python than in R.[1]  This led me to a recent post to
> > > "python-list at python.org" that mentioned "Jupyter, Mathematica, and the
> > > Future of the Research Paper"[2] by Paul Romer, who won the 2018 Nobel
> > > Memorial Prize in Economics only a few days ago.  In brief, this article
> > > suggests that Jupyter notebooks may replace publication in refereed
> > > scientific journals as the primary vehicle for sharing scientific
> > > research, because they make it so easy for readers to follow both the
> > > scientific and computational logic and test their own modifications.
> > >
> > >
> > >        A "Jupyter Notebook Tutorial: The Definitive Guide"[3] suggested
> > > I first install Anaconda Navigator.  I got version 1.9.2 of that.  It
> > > opens with options for eight different "applications" including
> > > JupyterLab 0.34.9, Jupyter Notebook 5.6.0, Spyder 3.3.1 (an IDE for
> > > Python), and RStudio 1.1.456.
> > >
> > >
> > >        This leads to several questions:
> > >
> > >
> > >              1.  In general, what experiences have people had with
> > > Jupyter Notebooks, Anaconda Navigator, and RMarkdown vignettes in
> > > RStudio, and the similarities and differences?  Do you know any
> > > references that discuss this?
> >
> > I've used both extensively, and noted the differences I've discovered above.
> >
> > >
> > >
> > >              2.  More specifically, does it make sense to try to use
> > > RStudio from within Anaconda Navigator, or is one better off using
> > > RStudio as a separate, stand alone application -- or should one even
> > > abandon RStudio and run R instead from within a Jupyter Notebook? [I'm
> > > new to this topic, so it's possible that this question doesn't even make
> > > sense.]
> >
> > The only advantage I can think of to using Rstudio via Anaconda is
> > that you could use conda environments to maintain different versions
> > or R and/or R packages for different projects.
> >
> > You'll have to weigh the pros and cons to decide whether to switch
> > from Rstudio to Jupyter notebooks. Depending on what you want to do
> > there are both advantages and disadvantages, as discussed above.
> >
> > Finally, I have to give a plug for a couple of related tools that I
> > find very useful.
> >
> > Emacs org-mode https://orgmode.org/ gives you the best of both worlds:
> > notebooks unconstrained by the browser that can include code in
> > multiple languages, header arguments, excellent export support, etc.
> > It is superior to both Jupyter and Rmarkdown, except that support only
> > exists in Emacs.
> >
> > Jupytext (https://github.com/mwouts/jupytext) is another way to have
> > it all, by allowing you to edit in markdown or Rmarkdown, and
> > auto-generating a notebook and possibly other formats for you. I've
> > only recently started experimenting with it, but so far I like it a
> > lot.
> >
> > Best,
> > Ista
> > >
> > >
> > >        Thanks,
> > >        Spencer Graves
> > >
> > >
> > > [1] If you have ideas for how best to do real time monitoring of
> > > broadcast quality of a radio station, I'd love to hear them.  I need
> > > software that will do that, preferably something that's free, open
> > > source.  The commercial software I've seen for this is not adequate for
> > > my purposes, so I'm trying to write my own.  I have a sample script in
> > > Python that will read a live stream from a radio tuner and output a
> > > *.wav of whatever length I want, and I wrote Python eight years ago for
> > > a similar real time application.  I'd prefer to use R, but I don't know
> > > how to get started.
> > >
> > >
> > > [2] 2018-04-13:
> > > "https://paulromer.net/jupyter-mathematica-and-the-future-of-the-research-paper".
> > > This further cites a similar article in The Atlantic from 2018-04-05:
> > > "www.theatlantic.com/science/archive/2018/04/the-scientific-paper-is-obsolete/556676".


From xie @ending from yihui@n@me  Thu Oct 11 16:22:41 2018
From: xie @ending from yihui@n@me (Yihui Xie)
Date: Thu, 11 Oct 2018 09:22:41 -0500
Subject: [R] RMarkdown vignettes v. Jupyter notebooks?
In-Reply-To: <CA+vqiLEOo+cMFggu1mvVFWB0cxPygQg+KSUHKBu7v4W=cGktig@mail.gmail.com>
References: <056b9d58-70ef-b0bc-a195-b1b8c5377a60@effectivedefense.org>
 <CA+vqiLFRhHi+jm4JNwwEd+MOMG-Agzk7p_duKoku8G-CgTBNuQ@mail.gmail.com>
 <248ead90-e4d2-a0da-49b3-93afa850c0b3@gmail.com>
 <CA+vqiLH=U6r7z9ZJ9VSrENMP4pDNYLu05OKcOZe44OWwH9rpwQ@mail.gmail.com>
 <92A266C1-82B9-4D40-B571-251DF6A4A2EB@dcn.davis.ca.us>
 <CA+vqiLEOo+cMFggu1mvVFWB0cxPygQg+KSUHKBu7v4W=cGktig@mail.gmail.com>
Message-ID: <CANROs4eUZJWM2uxwPvwm00-8-ocozq82zyEqyFAtfKCHF0XWoA@mail.gmail.com>

In case Jeff's point was not clear enough: the *.nb.html file is very
similar to *.ipynb and it is very different with other output formats
that R Markdown generates. A .nb.html file is generated alongside .Rmd
when you preview an R Markdown notebook, and it contains both the R
Markdown source document and its output (in a single file). See
Section 3.2.2 of the R Markdown book for more info:
https://bookdown.org/yihui/rmarkdown/notebook.html

But I think you are correct that R Markdown and Jupyter have different emphasis.

Regards,
Yihui
--
https://yihui.name

On Thu, Oct 11, 2018 at 9:14 AM Ista Zahn <istazahn at gmail.com> wrote:
>
> On Thu, Oct 11, 2018 at 10:03 AM Jeff Newmiller
> <jdnewmil at dcn.davis.ca.us> wrote:
> >
> > Ista, you do not seem to be aware of the
> > .nb.html format, which is way easier to share with a non-uswr than an ipynb file yet allows the same in-progress kinds of results to be shared and the source can be extracted easily using a web browser (no server needed).
>
> Yes, I am aware that notebooks can be exported / converted to other
> formats, including .html and .pdf. My point is about emphasis:
> Rmarkdown gives you header arguments and other tools that allow you a
> great deal of control over how the final .html or .pdf file looks. The
> system seems designed to produce .html or .pdf as the final output
> format. Jupyter notebooks on the other hand seem primarily designed to
> be viewed as Jupyter notebooks: they don't give you a log of tools for
> controlling how the converted / exported notebook appears. That's not
> so say there is not conversion / export possible of course...
>
> --Ista
>
> >
> > There is some controversy about this whole notebook approach [1] but I think deciding whether it is right for your purposes is highly subjective.
> >
> > FWIW It took me years to figure out how to even open a Jupyter notebook, so the idea that they should be the gold standard for sharing results seems absurd to me.
> >
> > [1] https://yihui.name/en/2018/09/notebook-war/
> >
> > On October 11, 2018 5:53:29 AM PDT, Ista Zahn <istazahn at gmail.com> wrote:
> > >On Thu, Oct 11, 2018 at 8:36 AM Duncan Murdoch
> > ><murdoch.duncan at gmail.com> wrote:
> > >>
> > >> On 11/10/2018 7:18 AM, Ista Zahn wrote:
> > >> > Hi Spencer,
> > >> >
> > >> > On Thu, Oct 11, 2018 at 5:08 AM Spencer Graves
> > >> > <spencer.graves at effectivedefense.org> wrote:
> > >> >>
> > >> >> Hello:
> > >> >>
> > >> >>
> > >> >>         What are the differences between Jupyter notebooks and
> > >RMarkdown
> > >> >> vignettes?
> > >> >
> > >> > Here are some of the main differences I'm aware of:
> > >> >
> > >> > Rmarkdown files include code and prose. The results produced by the
> > >> > code do not appear in the Rmarkdown file; instead, the file must be
> > >> > processed and typeset to produce a .pdf or .html (etc.) file that
> > >> > includes those results. Jupyter notebooks dispense with with
> > >> > processing step: output is displayed directly in the notebook. That
> > >> > is, a notebook includes code, prose, and results, while an
> > >Rmarkdown
> > >> > file includes only code and prose.
> > >>
> > >> RStudio can display the output mixed in with the text in the editor.
> > >
> > >True, but the _file_ does not include the output. Thus it functions
> > >more as a preview, and will not be visible to you if I email you a
> > >.Rmd file. On the other hand, .ipynb files really do contain the
> > >output; if I email one to you and you open it in Jupyter you will see
> > >the output as well.
> > >
> > >--Ista
> > >
> > >>
> > >> >
> > >> > Rmarkdown allows control over the inclusion of code and results,
> > >and
> > >> > over how the results are displayed via header arguments. There is
> > >no
> > >> > such thing in Jupyter notebooks. Controlling the precise appearance
> > >of
> > >> > a document produced by Jupyter is much more difficult. Going
> > >farther,
> > >> > one can even say that Jupyter notebooks are designed primarily to
> > >be
> > >> > read as Jupyter notebooks; exporting to other formats is kind of an
> > >> > afterthought. In contrast, Rmarkdown is designed to produce the
> > >final
> > >> > readable result in another format (.html or .pdf typically).
> > >> >
> > >> > Rmarkdown is based on markdown, a human readable markup language,
> > >> > Jupyter notebooks are based on JSON, a data interchange format
> > >common
> > >> > on the web. This means that Rmarkdown files can be easily edited
> > >using
> > >> > any text editor you like. The same is not true of Jupyter
> > >notebooks.
> > >> > While you can of course edit the JSON directly, the format is
> > >designed
> > >> > to be written and read by a computer; editing it yourself is not
> > >easy.
> > >> >
> > >> > Rmarkdown is specific to R (I guess there is some basic support in
> > >> > knitr for other languages, but in my experience it never worked
> > >well)
> > >> > while Jupyter notebooks are language agnostic and "kernels" exist
> > >for
> > >> > a large number of programming languages. However, each Jupyter
> > >> > notebook can use only one kernel; you can't easily have R and
> > >Python
> > >> > code in the same notebook.
> > >> >
> > >> > Jupyter notebooks typically run in your browser where the actual
> > >text
> > >> > editing features are somewhat limited. Rmarkdown is typically run
> > >in
> > >> > an editor such as Emacs or Rstudio where editing and project
> > >support
> > >> > is much better and greater customization may be possible. You can
> > >work
> > >> > indirectly with Jupyter notebooks in Emacs
> > >> > (https://github.com/millejoh/emacs-ipython-notebook) and perhaps
> > >other
> > >> > editors as well; this goes some way toward escaping the tyranny of
> > >the
> > >> > browser but is more fragile and difficult to get working compared
> > >to
> > >> > Rmarkdown.
> > >> >
> > >> > Because Jupyter uses a web-based client-server model, it is easy to
> > >> > provide live interactive notebooks on your website (see e.g.,
> > >> > https://github.com/jupyterhub/binderhub). As far as I know this is
> > >not
> > >> > currently possible with Rmarkdown.
> > >>
> > >> There are ways to put Shiny apps into Rmarkdown documents; see
> > >>
> > ><https://beta.rstudioconnect.com/content/2671/Combining-Shiny-R-Markdown.html>.
> > >>   Other than my two notes above, your comments about Rmarkdown seem
> > >> right on the mark.
> > >>
> > >> Duncan Murdoch
> > >>
> > >> >
> > >> >>
> > >> >>
> > >> >>         I'm trying to do real time monitoring of the broadcast
> > >quality of
> > >> >> a radio station, and it seems to me that it may be easier to do
> > >that in
> > >> >> Python than in R.[1]  This led me to a recent post to
> > >> >> "python-list at python.org" that mentioned "Jupyter, Mathematica, and
> > >the
> > >> >> Future of the Research Paper"[2] by Paul Romer, who won the 2018
> > >Nobel
> > >> >> Memorial Prize in Economics only a few days ago.  In brief, this
> > >article
> > >> >> suggests that Jupyter notebooks may replace publication in
> > >refereed
> > >> >> scientific journals as the primary vehicle for sharing scientific
> > >> >> research, because they make it so easy for readers to follow both
> > >the
> > >> >> scientific and computational logic and test their own
> > >modifications.
> > >> >>
> > >> >>
> > >> >>         A "Jupyter Notebook Tutorial: The Definitive Guide"[3]
> > >suggested
> > >> >> I first install Anaconda Navigator.  I got version 1.9.2 of that.
> > >It
> > >> >> opens with options for eight different "applications" including
> > >> >> JupyterLab 0.34.9, Jupyter Notebook 5.6.0, Spyder 3.3.1 (an IDE
> > >for
> > >> >> Python), and RStudio 1.1.456.
> > >> >>
> > >> >>
> > >> >>         This leads to several questions:
> > >> >>
> > >> >>
> > >> >>               1.  In general, what experiences have people had
> > >with
> > >> >> Jupyter Notebooks, Anaconda Navigator, and RMarkdown vignettes in
> > >> >> RStudio, and the similarities and differences?  Do you know any
> > >> >> references that discuss this?
> > >> >
> > >> > I've used both extensively, and noted the differences I've
> > >discovered above.
> > >> >
> > >> >>
> > >> >>
> > >> >>               2.  More specifically, does it make sense to try to
> > >use
> > >> >> RStudio from within Anaconda Navigator, or is one better off using
> > >> >> RStudio as a separate, stand alone application -- or should one
> > >even
> > >> >> abandon RStudio and run R instead from within a Jupyter Notebook?
> > >[I'm
> > >> >> new to this topic, so it's possible that this question doesn't
> > >even make
> > >> >> sense.]
> > >> >
> > >> > The only advantage I can think of to using Rstudio via Anaconda is
> > >> > that you could use conda environments to maintain different
> > >versions
> > >> > or R and/or R packages for different projects.
> > >> >
> > >> > You'll have to weigh the pros and cons to decide whether to switch
> > >> > from Rstudio to Jupyter notebooks. Depending on what you want to do
> > >> > there are both advantages and disadvantages, as discussed above.
> > >> >
> > >> > Finally, I have to give a plug for a couple of related tools that I
> > >> > find very useful.
> > >> >
> > >> > Emacs org-mode https://orgmode.org/ gives you the best of both
> > >worlds:
> > >> > notebooks unconstrained by the browser that can include code in
> > >> > multiple languages, header arguments, excellent export support,
> > >etc.
> > >> > It is superior to both Jupyter and Rmarkdown, except that support
> > >only
> > >> > exists in Emacs.
> > >> >
> > >> > Jupytext (https://github.com/mwouts/jupytext) is another way to
> > >have
> > >> > it all, by allowing you to edit in markdown or Rmarkdown, and
> > >> > auto-generating a notebook and possibly other formats for you. I've
> > >> > only recently started experimenting with it, but so far I like it a
> > >> > lot.
> > >> >
> > >> > Best,
> > >> > Ista
> > >> >>
> > >> >>
> > >> >>         Thanks,
> > >> >>         Spencer Graves
> > >> >>
> > >> >>
> > >> >> [1] If you have ideas for how best to do real time monitoring of
> > >> >> broadcast quality of a radio station, I'd love to hear them.  I
> > >need
> > >> >> software that will do that, preferably something that's free, open
> > >> >> source.  The commercial software I've seen for this is not
> > >adequate for
> > >> >> my purposes, so I'm trying to write my own.  I have a sample
> > >script in
> > >> >> Python that will read a live stream from a radio tuner and output
> > >a
> > >> >> *.wav of whatever length I want, and I wrote Python eight years
> > >ago for
> > >> >> a similar real time application.  I'd prefer to use R, but I don't
> > >know
> > >> >> how to get started.
> > >> >>
> > >> >>
> > >> >> [2] 2018-04-13:
> > >> >>
> > >"https://paulromer.net/jupyter-mathematica-and-the-future-of-the-research-paper".
> > >> >> This further cites a similar article in The Atlantic from
> > >2018-04-05:
> > >> >>
> > >"www.theatlantic.com/science/archive/2018/04/the-scientific-paper-is-obsolete/556676".
> > >> >>
> > >> >> ______________________________________________
> > >> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >> >> https://stat.ethz.ch/mailman/listinfo/r-help
> > >> >> PLEASE do read the posting guide
> > >http://www.R-project.org/posting-guide.html
> > >> >> and provide commented, minimal, self-contained, reproducible code.
> > >> >
> > >> > ______________________________________________
> > >> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >> > https://stat.ethz.ch/mailman/listinfo/r-help
> > >> > PLEASE do read the posting guide
> > >http://www.R-project.org/posting-guide.html
> > >> > and provide commented, minimal, self-contained, reproducible code.
> > >> >
> > >>
> > >
> > >______________________________________________
> > >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >https://stat.ethz.ch/mailman/listinfo/r-help
> > >PLEASE do read the posting guide
> > >http://www.R-project.org/posting-guide.html
> > >and provide commented, minimal, self-contained, reproducible code.
> >
> > --
> > Sent from my phone. Please excuse my brevity.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From i@t@z@hn @ending from gm@il@com  Thu Oct 11 16:39:42 2018
From: i@t@z@hn @ending from gm@il@com (Ista Zahn)
Date: Thu, 11 Oct 2018 10:39:42 -0400
Subject: [R] RMarkdown vignettes v. Jupyter notebooks?
In-Reply-To: <CANROs4eUZJWM2uxwPvwm00-8-ocozq82zyEqyFAtfKCHF0XWoA@mail.gmail.com>
References: <056b9d58-70ef-b0bc-a195-b1b8c5377a60@effectivedefense.org>
 <CA+vqiLFRhHi+jm4JNwwEd+MOMG-Agzk7p_duKoku8G-CgTBNuQ@mail.gmail.com>
 <248ead90-e4d2-a0da-49b3-93afa850c0b3@gmail.com>
 <CA+vqiLH=U6r7z9ZJ9VSrENMP4pDNYLu05OKcOZe44OWwH9rpwQ@mail.gmail.com>
 <92A266C1-82B9-4D40-B571-251DF6A4A2EB@dcn.davis.ca.us>
 <CA+vqiLEOo+cMFggu1mvVFWB0cxPygQg+KSUHKBu7v4W=cGktig@mail.gmail.com>
 <CANROs4eUZJWM2uxwPvwm00-8-ocozq82zyEqyFAtfKCHF0XWoA@mail.gmail.com>
Message-ID: <CA+vqiLFT_vSYcJSid5NUjyrr52iGteQ_7k6O9msR0Yi6FeU=gQ@mail.gmail.com>

On Thu, Oct 11, 2018 at 10:23 AM Yihui Xie <xie at yihui.name> wrote:
>
> In case Jeff's point was not clear enough: the *.nb.html file is very
> similar to *.ipynb and it is very different with other output formats
> that R Markdown generates. A .nb.html file is generated alongside .Rmd
> when you preview an R Markdown notebook, and it contains both the R
> Markdown source document and its output (in a single file). See
> Section 3.2.2 of the R Markdown book for more info:
> https://bookdown.org/yihui/rmarkdown/notebook.html

Thank you Yihui, you have once again rescued me from a state of
ignorance. Much appreciated.

--Ista

>
> But I think you are correct that R Markdown and Jupyter have different emphasis.
>
> Regards,
> Yihui
> --
> https://yihui.name
>
> On Thu, Oct 11, 2018 at 9:14 AM Ista Zahn <istazahn at gmail.com> wrote:
> >
> > On Thu, Oct 11, 2018 at 10:03 AM Jeff Newmiller
> > <jdnewmil at dcn.davis.ca.us> wrote:
> > >
> > > Ista, you do not seem to be aware of the
> > > .nb.html format, which is way easier to share with a non-uswr than an ipynb file yet allows the same in-progress kinds of results to be shared and the source can be extracted easily using a web browser (no server needed).
> >
> > Yes, I am aware that notebooks can be exported / converted to other
> > formats, including .html and .pdf. My point is about emphasis:
> > Rmarkdown gives you header arguments and other tools that allow you a
> > great deal of control over how the final .html or .pdf file looks. The
> > system seems designed to produce .html or .pdf as the final output
> > format. Jupyter notebooks on the other hand seem primarily designed to
> > be viewed as Jupyter notebooks: they don't give you a log of tools for
> > controlling how the converted / exported notebook appears. That's not
> > so say there is not conversion / export possible of course...
> >
> > --Ista
> >
> > >
> > > There is some controversy about this whole notebook approach [1] but I think deciding whether it is right for your purposes is highly subjective.
> > >
> > > FWIW It took me years to figure out how to even open a Jupyter notebook, so the idea that they should be the gold standard for sharing results seems absurd to me.
> > >
> > > [1] https://yihui.name/en/2018/09/notebook-war/
> > >
> > > On October 11, 2018 5:53:29 AM PDT, Ista Zahn <istazahn at gmail.com> wrote:
> > > >On Thu, Oct 11, 2018 at 8:36 AM Duncan Murdoch
> > > ><murdoch.duncan at gmail.com> wrote:
> > > >>
> > > >> On 11/10/2018 7:18 AM, Ista Zahn wrote:
> > > >> > Hi Spencer,
> > > >> >
> > > >> > On Thu, Oct 11, 2018 at 5:08 AM Spencer Graves
> > > >> > <spencer.graves at effectivedefense.org> wrote:
> > > >> >>
> > > >> >> Hello:
> > > >> >>
> > > >> >>
> > > >> >>         What are the differences between Jupyter notebooks and
> > > >RMarkdown
> > > >> >> vignettes?
> > > >> >
> > > >> > Here are some of the main differences I'm aware of:
> > > >> >
> > > >> > Rmarkdown files include code and prose. The results produced by the
> > > >> > code do not appear in the Rmarkdown file; instead, the file must be
> > > >> > processed and typeset to produce a .pdf or .html (etc.) file that
> > > >> > includes those results. Jupyter notebooks dispense with with
> > > >> > processing step: output is displayed directly in the notebook. That
> > > >> > is, a notebook includes code, prose, and results, while an
> > > >Rmarkdown
> > > >> > file includes only code and prose.
> > > >>
> > > >> RStudio can display the output mixed in with the text in the editor.
> > > >
> > > >True, but the _file_ does not include the output. Thus it functions
> > > >more as a preview, and will not be visible to you if I email you a
> > > >.Rmd file. On the other hand, .ipynb files really do contain the
> > > >output; if I email one to you and you open it in Jupyter you will see
> > > >the output as well.
> > > >
> > > >--Ista
> > > >
> > > >>
> > > >> >
> > > >> > Rmarkdown allows control over the inclusion of code and results,
> > > >and
> > > >> > over how the results are displayed via header arguments. There is
> > > >no
> > > >> > such thing in Jupyter notebooks. Controlling the precise appearance
> > > >of
> > > >> > a document produced by Jupyter is much more difficult. Going
> > > >farther,
> > > >> > one can even say that Jupyter notebooks are designed primarily to
> > > >be
> > > >> > read as Jupyter notebooks; exporting to other formats is kind of an
> > > >> > afterthought. In contrast, Rmarkdown is designed to produce the
> > > >final
> > > >> > readable result in another format (.html or .pdf typically).
> > > >> >
> > > >> > Rmarkdown is based on markdown, a human readable markup language,
> > > >> > Jupyter notebooks are based on JSON, a data interchange format
> > > >common
> > > >> > on the web. This means that Rmarkdown files can be easily edited
> > > >using
> > > >> > any text editor you like. The same is not true of Jupyter
> > > >notebooks.
> > > >> > While you can of course edit the JSON directly, the format is
> > > >designed
> > > >> > to be written and read by a computer; editing it yourself is not
> > > >easy.
> > > >> >
> > > >> > Rmarkdown is specific to R (I guess there is some basic support in
> > > >> > knitr for other languages, but in my experience it never worked
> > > >well)
> > > >> > while Jupyter notebooks are language agnostic and "kernels" exist
> > > >for
> > > >> > a large number of programming languages. However, each Jupyter
> > > >> > notebook can use only one kernel; you can't easily have R and
> > > >Python
> > > >> > code in the same notebook.
> > > >> >
> > > >> > Jupyter notebooks typically run in your browser where the actual
> > > >text
> > > >> > editing features are somewhat limited. Rmarkdown is typically run
> > > >in
> > > >> > an editor such as Emacs or Rstudio where editing and project
> > > >support
> > > >> > is much better and greater customization may be possible. You can
> > > >work
> > > >> > indirectly with Jupyter notebooks in Emacs
> > > >> > (https://github.com/millejoh/emacs-ipython-notebook) and perhaps
> > > >other
> > > >> > editors as well; this goes some way toward escaping the tyranny of
> > > >the
> > > >> > browser but is more fragile and difficult to get working compared
> > > >to
> > > >> > Rmarkdown.
> > > >> >
> > > >> > Because Jupyter uses a web-based client-server model, it is easy to
> > > >> > provide live interactive notebooks on your website (see e.g.,
> > > >> > https://github.com/jupyterhub/binderhub). As far as I know this is
> > > >not
> > > >> > currently possible with Rmarkdown.
> > > >>
> > > >> There are ways to put Shiny apps into Rmarkdown documents; see
> > > >>
> > > ><https://beta.rstudioconnect.com/content/2671/Combining-Shiny-R-Markdown.html>.
> > > >>   Other than my two notes above, your comments about Rmarkdown seem
> > > >> right on the mark.
> > > >>
> > > >> Duncan Murdoch
> > > >>
> > > >> >
> > > >> >>
> > > >> >>
> > > >> >>         I'm trying to do real time monitoring of the broadcast
> > > >quality of
> > > >> >> a radio station, and it seems to me that it may be easier to do
> > > >that in
> > > >> >> Python than in R.[1]  This led me to a recent post to
> > > >> >> "python-list at python.org" that mentioned "Jupyter, Mathematica, and
> > > >the
> > > >> >> Future of the Research Paper"[2] by Paul Romer, who won the 2018
> > > >Nobel
> > > >> >> Memorial Prize in Economics only a few days ago.  In brief, this
> > > >article
> > > >> >> suggests that Jupyter notebooks may replace publication in
> > > >refereed
> > > >> >> scientific journals as the primary vehicle for sharing scientific
> > > >> >> research, because they make it so easy for readers to follow both
> > > >the
> > > >> >> scientific and computational logic and test their own
> > > >modifications.
> > > >> >>
> > > >> >>
> > > >> >>         A "Jupyter Notebook Tutorial: The Definitive Guide"[3]
> > > >suggested
> > > >> >> I first install Anaconda Navigator.  I got version 1.9.2 of that.
> > > >It
> > > >> >> opens with options for eight different "applications" including
> > > >> >> JupyterLab 0.34.9, Jupyter Notebook 5.6.0, Spyder 3.3.1 (an IDE
> > > >for
> > > >> >> Python), and RStudio 1.1.456.
> > > >> >>
> > > >> >>
> > > >> >>         This leads to several questions:
> > > >> >>
> > > >> >>
> > > >> >>               1.  In general, what experiences have people had
> > > >with
> > > >> >> Jupyter Notebooks, Anaconda Navigator, and RMarkdown vignettes in
> > > >> >> RStudio, and the similarities and differences?  Do you know any
> > > >> >> references that discuss this?
> > > >> >
> > > >> > I've used both extensively, and noted the differences I've
> > > >discovered above.
> > > >> >
> > > >> >>
> > > >> >>
> > > >> >>               2.  More specifically, does it make sense to try to
> > > >use
> > > >> >> RStudio from within Anaconda Navigator, or is one better off using
> > > >> >> RStudio as a separate, stand alone application -- or should one
> > > >even
> > > >> >> abandon RStudio and run R instead from within a Jupyter Notebook?
> > > >[I'm
> > > >> >> new to this topic, so it's possible that this question doesn't
> > > >even make
> > > >> >> sense.]
> > > >> >
> > > >> > The only advantage I can think of to using Rstudio via Anaconda is
> > > >> > that you could use conda environments to maintain different
> > > >versions
> > > >> > or R and/or R packages for different projects.
> > > >> >
> > > >> > You'll have to weigh the pros and cons to decide whether to switch
> > > >> > from Rstudio to Jupyter notebooks. Depending on what you want to do
> > > >> > there are both advantages and disadvantages, as discussed above.
> > > >> >
> > > >> > Finally, I have to give a plug for a couple of related tools that I
> > > >> > find very useful.
> > > >> >
> > > >> > Emacs org-mode https://orgmode.org/ gives you the best of both
> > > >worlds:
> > > >> > notebooks unconstrained by the browser that can include code in
> > > >> > multiple languages, header arguments, excellent export support,
> > > >etc.
> > > >> > It is superior to both Jupyter and Rmarkdown, except that support
> > > >only
> > > >> > exists in Emacs.
> > > >> >
> > > >> > Jupytext (https://github.com/mwouts/jupytext) is another way to
> > > >have
> > > >> > it all, by allowing you to edit in markdown or Rmarkdown, and
> > > >> > auto-generating a notebook and possibly other formats for you. I've
> > > >> > only recently started experimenting with it, but so far I like it a
> > > >> > lot.
> > > >> >
> > > >> > Best,
> > > >> > Ista
> > > >> >>
> > > >> >>
> > > >> >>         Thanks,
> > > >> >>         Spencer Graves
> > > >> >>
> > > >> >>
> > > >> >> [1] If you have ideas for how best to do real time monitoring of
> > > >> >> broadcast quality of a radio station, I'd love to hear them.  I
> > > >need
> > > >> >> software that will do that, preferably something that's free, open
> > > >> >> source.  The commercial software I've seen for this is not
> > > >adequate for
> > > >> >> my purposes, so I'm trying to write my own.  I have a sample
> > > >script in
> > > >> >> Python that will read a live stream from a radio tuner and output
> > > >a
> > > >> >> *.wav of whatever length I want, and I wrote Python eight years
> > > >ago for
> > > >> >> a similar real time application.  I'd prefer to use R, but I don't
> > > >know
> > > >> >> how to get started.
> > > >> >>
> > > >> >>
> > > >> >> [2] 2018-04-13:
> > > >> >>
> > > >"https://paulromer.net/jupyter-mathematica-and-the-future-of-the-research-paper".
> > > >> >> This further cites a similar article in The Atlantic from
> > > >2018-04-05:
> > > >> >>
> > > >"www.theatlantic.com/science/archive/2018/04/the-scientific-paper-is-obsolete/556676".
> > > >> >>
> > > >> >> ______________________________________________
> > > >> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > >> >> https://stat.ethz.ch/mailman/listinfo/r-help
> > > >> >> PLEASE do read the posting guide
> > > >http://www.R-project.org/posting-guide.html
> > > >> >> and provide commented, minimal, self-contained, reproducible code.
> > > >> >
> > > >> > ______________________________________________
> > > >> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > >> > https://stat.ethz.ch/mailman/listinfo/r-help
> > > >> > PLEASE do read the posting guide
> > > >http://www.R-project.org/posting-guide.html
> > > >> > and provide commented, minimal, self-contained, reproducible code.
> > > >> >
> > > >>
> > > >
> > > >______________________________________________
> > > >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > >https://stat.ethz.ch/mailman/listinfo/r-help
> > > >PLEASE do read the posting guide
> > > >http://www.R-project.org/posting-guide.html
> > > >and provide commented, minimal, self-contained, reproducible code.
> > >
> > > --
> > > Sent from my phone. Please excuse my brevity.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.


From r@hep@rd @ending from @ppl-eco@y@@com  Thu Oct 11 17:40:50 2018
From: r@hep@rd @ending from @ppl-eco@y@@com (Rich Shepard)
Date: Thu, 11 Oct 2018 08:40:50 -0700 (PDT)
Subject: [R] Package updates for new versions
Message-ID: <alpine.LNX.2.20.1810110833340.14179@salmo.appl-ecosys.com>

   This is a question to better my understanding of the relationship between
core R versions and packages that work with them. It's not a complaint or
criticism.

   Installed here is R-3.5.1. There are two packages that allow integration
of R and GRASS that are not yet available for 3.5.1: rpy2 and spgrass7.

   Appreciating that package maintainers have day jobs that take priority
over volunteer package maintenance, I ask only for thoughts on when copies
of those two packages _might_ be available for 3.5.1.

Regards,

Rich


From m@rc_@chw@rtz @ending from me@com  Thu Oct 11 17:56:16 2018
From: m@rc_@chw@rtz @ending from me@com (Marc Schwartz)
Date: Thu, 11 Oct 2018 11:56:16 -0400
Subject: [R] Package updates for new versions
In-Reply-To: <alpine.LNX.2.20.1810110833340.14179@salmo.appl-ecosys.com>
References: <alpine.LNX.2.20.1810110833340.14179@salmo.appl-ecosys.com>
Message-ID: <D2513358-6AC7-4A92-8C5C-18FA18788CBC@me.com>

> On Oct 11, 2018, at 11:40 AM, Rich Shepard <rshepard at appl-ecosys.com> wrote:
> 
>  This is a question to better my understanding of the relationship between
> core R versions and packages that work with them. It's not a complaint or
> criticism.
> 
>  Installed here is R-3.5.1. There are two packages that allow integration
> of R and GRASS that are not yet available for 3.5.1: rpy2 and spgrass7.
> 
>  Appreciating that package maintainers have day jobs that take priority
> over volunteer package maintenance, I ask only for thoughts on when copies
> of those two packages _might_ be available for 3.5.1.
> 
> Regards,
> 
> Rich


Rich,

Your best bet is to directly contact the package maintainers, as they would be the definitive source for timeline information on package updates.

They ultimately control that workflow for third party packages, whether on CRAN or otherwise, and can give you some idea of current status and plans.

Regards,

Marc Schwartz


From r@hep@rd @ending from @ppl-eco@y@@com  Thu Oct 11 18:15:59 2018
From: r@hep@rd @ending from @ppl-eco@y@@com (Rich Shepard)
Date: Thu, 11 Oct 2018 09:15:59 -0700 (PDT)
Subject: [R] Package updates for new versions
In-Reply-To: <D2513358-6AC7-4A92-8C5C-18FA18788CBC@me.com>
References: <alpine.LNX.2.20.1810110833340.14179@salmo.appl-ecosys.com>
 <D2513358-6AC7-4A92-8C5C-18FA18788CBC@me.com>
Message-ID: <alpine.LNX.2.20.1810110915050.14179@salmo.appl-ecosys.com>

On Thu, 11 Oct 2018, Marc Schwartz wrote:

> Your best bet is to directly contact the package maintainers, as they
> would be the definitive source for timeline information on package
> updates.

Marc,

   Thank you, I will contact them. Being unfamiliar with standard practice I
asked first.

Best regards,

Rich


From prof@@mit@mitt@l @ending from gm@il@com  Thu Oct 11 18:42:20 2018
From: prof@@mit@mitt@l @ending from gm@il@com (Amit Mittal)
Date: Thu, 11 Oct 2018 22:12:20 +0530
Subject: [R] Package updates for new versions
In-Reply-To: <alpine.LNX.2.20.1810110833340.14179@salmo.appl-ecosys.com>
References: <alpine.LNX.2.20.1810110833340.14179@salmo.appl-ecosys.com>
Message-ID: <CAP8zaQBzdCyU=Wut9Cxj0c+4B=ovWfoasXSSx_dZ_VdJ0donYA@mail.gmail.com>

You can contact them as Marc suggested by opening an account at bit
(bitbucket/Atlassian) or git (github) Most prefer strongly to have a
primary at git before going to Atlassian other code checkers so you can
discover the package team there esp if any future development is in the
pipes.

Don't worry about it you dont have to be a founder or developer to have an
account there :)

BR

On Thu, Oct 11, 2018 at 9:11 PM Rich Shepard <rshepard at appl-ecosys.com>
wrote:

>    This is a question to better my understanding of the relationship
> between
> core R versions and packages that work with them. It's not a complaint or
> criticism.
>
>    Installed here is R-3.5.1. There are two packages that allow integration
> of R and GRASS that are not yet available for 3.5.1: rpy2 and spgrass7.
>
>    Appreciating that package maintainers have day jobs that take priority
> over volunteer package maintenance, I ask only for thoughts on when copies
> of those two packages _might_ be available for 3.5.1.
>
> Regards,
>
> Rich
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
-- 

______________________________

Amit Mittal
Pursuing Ph.D. in Finance and Accounting
Indian Institute of Management, Lucknow
Visit my SSRN author page:
http://ssrn.com/author=2665511
* Top 10% Downloaded Author on SSRN
Mob: +91 7525023664

This message has been sent from a mobile device. I may contact you again.

_________________

	[[alternative HTML version deleted]]


From bgunter@4567 @ending from gm@il@com  Thu Oct 11 18:56:14 2018
From: bgunter@4567 @ending from gm@il@com (Bert Gunter)
Date: Thu, 11 Oct 2018 09:56:14 -0700
Subject: [R] Package updates for new versions
In-Reply-To: <CAP8zaQBzdCyU=Wut9Cxj0c+4B=ovWfoasXSSx_dZ_VdJ0donYA@mail.gmail.com>
References: <alpine.LNX.2.20.1810110833340.14179@salmo.appl-ecosys.com>
 <CAP8zaQBzdCyU=Wut9Cxj0c+4B=ovWfoasXSSx_dZ_VdJ0donYA@mail.gmail.com>
Message-ID: <CAGxFJbSp-+8V=CY9=SsUW-aEb6dgkn2pP0Kf74b0MpVUk1z0KQ@mail.gmail.com>

?maintainer

in R accesses the package description file to provide maintainer info. No
need to fool around with git or other software development repositories.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Thu, Oct 11, 2018 at 9:44 AM Amit Mittal <prof.amit.mittal at gmail.com>
wrote:

> You can contact them as Marc suggested by opening an account at bit
> (bitbucket/Atlassian) or git (github) Most prefer strongly to have a
> primary at git before going to Atlassian other code checkers so you can
> discover the package team there esp if any future development is in the
> pipes.
>
> Don't worry about it you dont have to be a founder or developer to have an
> account there :)
>
> BR
>
> On Thu, Oct 11, 2018 at 9:11 PM Rich Shepard <rshepard at appl-ecosys.com>
> wrote:
>
> >    This is a question to better my understanding of the relationship
> > between
> > core R versions and packages that work with them. It's not a complaint or
> > criticism.
> >
> >    Installed here is R-3.5.1. There are two packages that allow
> integration
> > of R and GRASS that are not yet available for 3.5.1: rpy2 and spgrass7.
> >
> >    Appreciating that package maintainers have day jobs that take priority
> > over volunteer package maintenance, I ask only for thoughts on when
> copies
> > of those two packages _might_ be available for 3.5.1.
> >
> > Regards,
> >
> > Rich
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
> --
>
> ______________________________
>
> Amit Mittal
> Pursuing Ph.D. in Finance and Accounting
> Indian Institute of Management, Lucknow
> Visit my SSRN author page:
> http://ssrn.com/author=2665511
> * Top 10% Downloaded Author on SSRN
> Mob: +91 7525023664
>
> This message has been sent from a mobile device. I may contact you again.
>
> _________________
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From prof@@mit@mitt@l @ending from gm@il@com  Thu Oct 11 18:59:49 2018
From: prof@@mit@mitt@l @ending from gm@il@com (Amit Mittal)
Date: Thu, 11 Oct 2018 22:29:49 +0530
Subject: [R] Package updates for new versions
In-Reply-To: <CAGxFJbSp-+8V=CY9=SsUW-aEb6dgkn2pP0Kf74b0MpVUk1z0KQ@mail.gmail.com>
References: <alpine.LNX.2.20.1810110833340.14179@salmo.appl-ecosys.com>
 <CAP8zaQBzdCyU=Wut9Cxj0c+4B=ovWfoasXSSx_dZ_VdJ0donYA@mail.gmail.com>
 <CAGxFJbSp-+8V=CY9=SsUW-aEb6dgkn2pP0Kf74b0MpVUk1z0KQ@mail.gmail.com>
Message-ID: <CAP8zaQBPqyt4itYL1N1+AYbFr9XO2QX3LXNPpH5DbMQ_H3obiQ@mail.gmail.com>

Most developers like to be unavailable on email without genuine queries,
one or the other we tell you to come thru git

On Thu 11 Oct, 2018, 22:26 Bert Gunter, <bgunter.4567 at gmail.com> wrote:

> ?maintainer
>
> in R accesses the package description file to provide maintainer info. No
> need to fool around with git or other software development repositories.
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Thu, Oct 11, 2018 at 9:44 AM Amit Mittal <prof.amit.mittal at gmail.com>
> wrote:
>
>> You can contact them as Marc suggested by opening an account at bit
>> (bitbucket/Atlassian) or git (github) Most prefer strongly to have a
>> primary at git before going to Atlassian other code checkers so you can
>> discover the package team there esp if any future development is in the
>> pipes.
>>
>> Don't worry about it you dont have to be a founder or developer to have an
>> account there :)
>>
>> BR
>>
>> On Thu, Oct 11, 2018 at 9:11 PM Rich Shepard <rshepard at appl-ecosys.com>
>> wrote:
>>
>> >    This is a question to better my understanding of the relationship
>> > between
>> > core R versions and packages that work with them. It's not a complaint
>> or
>> > criticism.
>> >
>> >    Installed here is R-3.5.1. There are two packages that allow
>> integration
>> > of R and GRASS that are not yet available for 3.5.1: rpy2 and spgrass7.
>> >
>> >    Appreciating that package maintainers have day jobs that take
>> priority
>> > over volunteer package maintenance, I ask only for thoughts on when
>> copies
>> > of those two packages _might_ be available for 3.5.1.
>> >
>> > Regards,
>> >
>> > Rich
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>> > http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>> >
>> --
>>
>> ______________________________
>>
>> Amit Mittal
>> Pursuing Ph.D. in Finance and Accounting
>> Indian Institute of Management, Lucknow
>> Visit my SSRN author page:
>> http://ssrn.com/author=2665511
>> * Top 10% Downloaded Author on SSRN
>> Mob: +91 7525023664
>>
>> This message has been sent from a mobile device. I may contact you again.
>>
>> _________________
>>
>>         [[alternative HTML version deleted]]
>
>
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> --

______________________________

Amit Mittal
Pursuing Ph.D. in Finance and Accounting
Indian Institute of Management, Lucknow
Visit my SSRN author page:
http://ssrn.com/author=2665511
* Top 10% Downloaded Author on SSRN
Mob: +91 7525023664

This message has been sent from a mobile device. I may contact you again.

_________________

	[[alternative HTML version deleted]]


From r@hep@rd @ending from @ppl-eco@y@@com  Thu Oct 11 19:11:58 2018
From: r@hep@rd @ending from @ppl-eco@y@@com (Rich Shepard)
Date: Thu, 11 Oct 2018 10:11:58 -0700 (PDT)
Subject: [R] Package updates for new versions
In-Reply-To: <CAP8zaQBzdCyU=Wut9Cxj0c+4B=ovWfoasXSSx_dZ_VdJ0donYA@mail.gmail.com>
References: <alpine.LNX.2.20.1810110833340.14179@salmo.appl-ecosys.com>
 <CAP8zaQBzdCyU=Wut9Cxj0c+4B=ovWfoasXSSx_dZ_VdJ0donYA@mail.gmail.com>
Message-ID: <alpine.LNX.2.20.1810111011250.14179@salmo.appl-ecosys.com>

On Thu, 11 Oct 2018, Amit Mittal wrote:

> You can contact them as Marc suggested by opening an account at bit
> (bitbucket/Atlassian) or git (github) Most prefer strongly to have a
> primary at git before going to Atlassian other code checkers so you can
> discover the package team there esp if any future development is in the
> pipes.

   Thanks, Amit.

Rich


From r@hep@rd @ending from @ppl-eco@y@@com  Thu Oct 11 19:13:51 2018
From: r@hep@rd @ending from @ppl-eco@y@@com (Rich Shepard)
Date: Thu, 11 Oct 2018 10:13:51 -0700 (PDT)
Subject: [R] Package updates for new versions
In-Reply-To: <CAGxFJbSp-+8V=CY9=SsUW-aEb6dgkn2pP0Kf74b0MpVUk1z0KQ@mail.gmail.com>
References: <alpine.LNX.2.20.1810110833340.14179@salmo.appl-ecosys.com>
 <CAP8zaQBzdCyU=Wut9Cxj0c+4B=ovWfoasXSSx_dZ_VdJ0donYA@mail.gmail.com>
 <CAGxFJbSp-+8V=CY9=SsUW-aEb6dgkn2pP0Kf74b0MpVUk1z0KQ@mail.gmail.com>
Message-ID: <alpine.LNX.2.20.1810111012120.14179@salmo.appl-ecosys.com>

On Thu, 11 Oct 2018, Bert Gunter wrote:

> ?maintainer

Bert,

   I found maintainer names from the package entry in the local CRAN repo. I
suspect that the above does not work well with non-installed packages. Am I
wrong?

Regards,

Rich


From jdnewmil @ending from dcn@d@vi@@c@@u@  Thu Oct 11 19:41:27 2018
From: jdnewmil @ending from dcn@d@vi@@c@@u@ (Jeff Newmiller)
Date: Thu, 11 Oct 2018 10:41:27 -0700
Subject: [R] Package updates for new versions
In-Reply-To: <CAP8zaQBPqyt4itYL1N1+AYbFr9XO2QX3LXNPpH5DbMQ_H3obiQ@mail.gmail.com>
References: <alpine.LNX.2.20.1810110833340.14179@salmo.appl-ecosys.com>
 <CAP8zaQBzdCyU=Wut9Cxj0c+4B=ovWfoasXSSx_dZ_VdJ0donYA@mail.gmail.com>
 <CAGxFJbSp-+8V=CY9=SsUW-aEb6dgkn2pP0Kf74b0MpVUk1z0KQ@mail.gmail.com>
 <CAP8zaQBPqyt4itYL1N1+AYbFr9XO2QX3LXNPpH5DbMQ_H3obiQ@mail.gmail.com>
Message-ID: <00944FC7-BEB7-49DA-A093-04E072733FC7@dcn.davis.ca.us>

I recommend reading the DESCRIPTION file or the CRAN web page for the package if it is on n CRAN, e.g. [1]. While every package on CRAN is supposed to have an email for contact, many developers do prefer alternate communication approaches. Github is NOT used universally though.

[1] https://cran.r-project.org/web/packages/spgrass6/index.html

On October 11, 2018 9:59:49 AM PDT, Amit Mittal <prof.amit.mittal at gmail.com> wrote:
>Most developers like to be unavailable on email without genuine
>queries,
>one or the other we tell you to come thru git
>
>On Thu 11 Oct, 2018, 22:26 Bert Gunter, <bgunter.4567 at gmail.com> wrote:
>
>> ?maintainer
>>
>> in R accesses the package description file to provide maintainer
>info. No
>> need to fool around with git or other software development
>repositories.
>>
>> Bert Gunter
>>
>> "The trouble with having an open mind is that people keep coming
>along and
>> sticking things into it."
>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>
>>
>> On Thu, Oct 11, 2018 at 9:44 AM Amit Mittal
><prof.amit.mittal at gmail.com>
>> wrote:
>>
>>> You can contact them as Marc suggested by opening an account at bit
>>> (bitbucket/Atlassian) or git (github) Most prefer strongly to have a
>>> primary at git before going to Atlassian other code checkers so you
>can
>>> discover the package team there esp if any future development is in
>the
>>> pipes.
>>>
>>> Don't worry about it you dont have to be a founder or developer to
>have an
>>> account there :)
>>>
>>> BR
>>>
>>> On Thu, Oct 11, 2018 at 9:11 PM Rich Shepard
><rshepard at appl-ecosys.com>
>>> wrote:
>>>
>>> >    This is a question to better my understanding of the
>relationship
>>> > between
>>> > core R versions and packages that work with them. It's not a
>complaint
>>> or
>>> > criticism.
>>> >
>>> >    Installed here is R-3.5.1. There are two packages that allow
>>> integration
>>> > of R and GRASS that are not yet available for 3.5.1: rpy2 and
>spgrass7.
>>> >
>>> >    Appreciating that package maintainers have day jobs that take
>>> priority
>>> > over volunteer package maintenance, I ask only for thoughts on
>when
>>> copies
>>> > of those two packages _might_ be available for 3.5.1.
>>> >
>>> > Regards,
>>> >
>>> > Rich
>>> >
>>> > ______________________________________________
>>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> > https://stat.ethz.ch/mailman/listinfo/r-help
>>> > PLEASE do read the posting guide
>>> > http://www.R-project.org/posting-guide.html
>>> > and provide commented, minimal, self-contained, reproducible code.
>>> >
>>> --
>>>
>>> ______________________________
>>>
>>> Amit Mittal
>>> Pursuing Ph.D. in Finance and Accounting
>>> Indian Institute of Management, Lucknow
>>> Visit my SSRN author page:
>>> http://ssrn.com/author=2665511
>>> * Top 10% Downloaded Author on SSRN
>>> Mob: +91 7525023664
>>>
>>> This message has been sent from a mobile device. I may contact you
>again.
>>>
>>> _________________
>>>
>>>         [[alternative HTML version deleted]]
>>
>>
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>> --
>
>______________________________
>
>Amit Mittal
>Pursuing Ph.D. in Finance and Accounting
>Indian Institute of Management, Lucknow
>Visit my SSRN author page:
>http://ssrn.com/author=2665511
>* Top 10% Downloaded Author on SSRN
>Mob: +91 7525023664
>
>This message has been sent from a mobile device. I may contact you
>again.
>
>_________________
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From wdunl@p @ending from tibco@com  Thu Oct 11 20:08:42 2018
From: wdunl@p @ending from tibco@com (William Dunlap)
Date: Thu, 11 Oct 2018 11:08:42 -0700
Subject: [R] Package updates for new versions
In-Reply-To: <00944FC7-BEB7-49DA-A093-04E072733FC7@dcn.davis.ca.us>
References: <alpine.LNX.2.20.1810110833340.14179@salmo.appl-ecosys.com>
 <CAP8zaQBzdCyU=Wut9Cxj0c+4B=ovWfoasXSSx_dZ_VdJ0donYA@mail.gmail.com>
 <CAGxFJbSp-+8V=CY9=SsUW-aEb6dgkn2pP0Kf74b0MpVUk1z0KQ@mail.gmail.com>
 <CAP8zaQBPqyt4itYL1N1+AYbFr9XO2QX3LXNPpH5DbMQ_H3obiQ@mail.gmail.com>
 <00944FC7-BEB7-49DA-A093-04E072733FC7@dcn.davis.ca.us>
Message-ID: <CAF8bMcY3A87zFj6+MBSXVWWLG+VWVSuMPuW9A1Lv1=AoTVJ-aQ@mail.gmail.com>

bug.report(package="thePackage")
will look through the DESCRIPTION file to figure out a good way to report
concerns about a package.

Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Thu, Oct 11, 2018 at 10:41 AM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> I recommend reading the DESCRIPTION file or the CRAN web page for the
> package if it is on n CRAN, e.g. [1]. While every package on CRAN is
> supposed to have an email for contact, many developers do prefer alternate
> communication approaches. Github is NOT used universally though.
>
> [1] https://cran.r-project.org/web/packages/spgrass6/index.html
>
> On October 11, 2018 9:59:49 AM PDT, Amit Mittal <
> prof.amit.mittal at gmail.com> wrote:
> >Most developers like to be unavailable on email without genuine
> >queries,
> >one or the other we tell you to come thru git
> >
> >On Thu 11 Oct, 2018, 22:26 Bert Gunter, <bgunter.4567 at gmail.com> wrote:
> >
> >> ?maintainer
> >>
> >> in R accesses the package description file to provide maintainer
> >info. No
> >> need to fool around with git or other software development
> >repositories.
> >>
> >> Bert Gunter
> >>
> >> "The trouble with having an open mind is that people keep coming
> >along and
> >> sticking things into it."
> >> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> >>
> >>
> >> On Thu, Oct 11, 2018 at 9:44 AM Amit Mittal
> ><prof.amit.mittal at gmail.com>
> >> wrote:
> >>
> >>> You can contact them as Marc suggested by opening an account at bit
> >>> (bitbucket/Atlassian) or git (github) Most prefer strongly to have a
> >>> primary at git before going to Atlassian other code checkers so you
> >can
> >>> discover the package team there esp if any future development is in
> >the
> >>> pipes.
> >>>
> >>> Don't worry about it you dont have to be a founder or developer to
> >have an
> >>> account there :)
> >>>
> >>> BR
> >>>
> >>> On Thu, Oct 11, 2018 at 9:11 PM Rich Shepard
> ><rshepard at appl-ecosys.com>
> >>> wrote:
> >>>
> >>> >    This is a question to better my understanding of the
> >relationship
> >>> > between
> >>> > core R versions and packages that work with them. It's not a
> >complaint
> >>> or
> >>> > criticism.
> >>> >
> >>> >    Installed here is R-3.5.1. There are two packages that allow
> >>> integration
> >>> > of R and GRASS that are not yet available for 3.5.1: rpy2 and
> >spgrass7.
> >>> >
> >>> >    Appreciating that package maintainers have day jobs that take
> >>> priority
> >>> > over volunteer package maintenance, I ask only for thoughts on
> >when
> >>> copies
> >>> > of those two packages _might_ be available for 3.5.1.
> >>> >
> >>> > Regards,
> >>> >
> >>> > Rich
> >>> >
> >>> > ______________________________________________
> >>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> > https://stat.ethz.ch/mailman/listinfo/r-help
> >>> > PLEASE do read the posting guide
> >>> > http://www.R-project.org/posting-guide.html
> >>> > and provide commented, minimal, self-contained, reproducible code.
> >>> >
> >>> --
> >>>
> >>> ______________________________
> >>>
> >>> Amit Mittal
> >>> Pursuing Ph.D. in Finance and Accounting
> >>> Indian Institute of Management, Lucknow
> >>> Visit my SSRN author page:
> >>> http://ssrn.com/author=2665511
> >>> * Top 10% Downloaded Author on SSRN
> >>> Mob: +91 7525023664
> >>>
> >>> This message has been sent from a mobile device. I may contact you
> >again.
> >>>
> >>> _________________
> >>>
> >>>         [[alternative HTML version deleted]]
> >>
> >>
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide
> >>> http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >>>
> >> --
> >
> >______________________________
> >
> >Amit Mittal
> >Pursuing Ph.D. in Finance and Accounting
> >Indian Institute of Management, Lucknow
> >Visit my SSRN author page:
> >http://ssrn.com/author=2665511
> >* Top 10% Downloaded Author on SSRN
> >Mob: +91 7525023664
> >
> >This message has been sent from a mobile device. I may contact you
> >again.
> >
> >_________________
> >
> >       [[alternative HTML version deleted]]
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my phone. Please excuse my brevity.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ro@lin@ump @ending from gm@il@com  Fri Oct 12 00:12:09 2018
From: ro@lin@ump @ending from gm@il@com (roslinazairimah zakaria)
Date: Fri, 12 Oct 2018 06:12:09 +0800
Subject: [R] Finding unique terms
Message-ID: <CANTvJZKf7V4qxr87RsEvQc=nV3mpG+tmvy+8yC2tfjFdonaHFw@mail.gmail.com>

Dear r-users,

I have this data:

structure(list(STUDENT_ID = structure(c(1L, 1L, 1L, 1L, 1L, 1L,
2L, 2L, 2L, 2L, 2L), .Label = c("AA15285", "AA15286"), class = "factor"),
    COURSE_CODE = structure(c(1L, 2L, 5L, 6L, 7L, 8L, 2L, 3L,
    4L, 5L, 6L), .Label = c("BAA1113", "BAA1322", "BAA2113",
    "BAA2513", "BAA2713", "BAA2921", "BAA4273", "BAA4513"), class =
"factor"),
    PO1M = c(155.7, 48.9, 83.2, NA, NA, NA, 48.05, 68.4, 41.65,
    82.35, NA), PO1T = c(180, 70, 100, NA, NA, NA, 70, 100, 60,
    100, NA), PO2M = c(NA, NA, NA, 37, NA, NA, NA, NA, NA, NA,
    41), PO2T = c(NA, NA, NA, 50, NA, NA, NA, NA, NA, NA, 50),
    X = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), X.1 = c(NA,
    NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names = c("STUDENT_ID",
"COURSE_CODE", "PO1M", "PO1T", "PO2M", "PO2T", "X", "X.1"), class =
"data.frame", row.names = c(NA,
-11L))

I want to combine the same Student ID and add up all the values for PO1M,
PO1T,...,PO2T obtained by the same ID.

How do I do that?
Thank you for any help given.

-- 
*Roslinazairimah Zakaria*
*Tel: +609-5492370; Fax. No.+609-5492766*

*Email: roslinazairimah at ump.edu.my <roslinazairimah at ump.edu.my>;
roslinaump at gmail.com <roslinaump at gmail.com>*
Faculty of Industrial Sciences & Technology
University Malaysia Pahang
Lebuhraya Tun Razak, 26300 Gambang, Pahang, Malaysia

	[[alternative HTML version deleted]]


From toth@dene@ @ending from kogentum@hu  Fri Oct 12 00:29:06 2018
From: toth@dene@ @ending from kogentum@hu (=?UTF-8?B?RMOpbmVzIFTDs3Ro?=)
Date: Fri, 12 Oct 2018 00:29:06 +0200
Subject: [R] Finding unique terms
In-Reply-To: <CANTvJZKf7V4qxr87RsEvQc=nV3mpG+tmvy+8yC2tfjFdonaHFw@mail.gmail.com>
References: <CANTvJZKf7V4qxr87RsEvQc=nV3mpG+tmvy+8yC2tfjFdonaHFw@mail.gmail.com>
Message-ID: <6a70a2f0-b2df-73a8-bf08-20ef2059dc49@kogentum.hu>



On 10/12/2018 12:12 AM, roslinazairimah zakaria wrote:
> Dear r-users,
> 
> I have this data:
> 
> structure(list(STUDENT_ID = structure(c(1L, 1L, 1L, 1L, 1L, 1L,
> 2L, 2L, 2L, 2L, 2L), .Label = c("AA15285", "AA15286"), class = "factor"),
>      COURSE_CODE = structure(c(1L, 2L, 5L, 6L, 7L, 8L, 2L, 3L,
>      4L, 5L, 6L), .Label = c("BAA1113", "BAA1322", "BAA2113",
>      "BAA2513", "BAA2713", "BAA2921", "BAA4273", "BAA4513"), class =
> "factor"),
>      PO1M = c(155.7, 48.9, 83.2, NA, NA, NA, 48.05, 68.4, 41.65,
>      82.35, NA), PO1T = c(180, 70, 100, NA, NA, NA, 70, 100, 60,
>      100, NA), PO2M = c(NA, NA, NA, 37, NA, NA, NA, NA, NA, NA,
>      41), PO2T = c(NA, NA, NA, 50, NA, NA, NA, NA, NA, NA, 50),
>      X = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), X.1 = c(NA,
>      NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names = c("STUDENT_ID",
> "COURSE_CODE", "PO1M", "PO1T", "PO2M", "PO2T", "X", "X.1"), class =
> "data.frame", row.names = c(NA,
> -11L))
> 
> I want to combine the same Student ID and add up all the values for PO1M,
> PO1T,...,PO2T obtained by the same ID.

dat <- structure(list(STUDENT_ID = structure(c(1L, 1L, 1L, 1L, 1L, 1L,
2L, 2L, 2L, 2L, 2L), .Label = c("AA15285", "AA15286"), class = "factor"),
     COURSE_CODE = structure(c(1L, 2L, 5L, 6L, 7L, 8L, 2L, 3L,
     4L, 5L, 6L), .Label = c("BAA1113", "BAA1322", "BAA2113",
     "BAA2513", "BAA2713", "BAA2921", "BAA4273", "BAA4513"), class =
"factor"),
     PO1M = c(155.7, 48.9, 83.2, NA, NA, NA, 48.05, 68.4, 41.65,
     82.35, NA), PO1T = c(180, 70, 100, NA, NA, NA, 70, 100, 60,
     100, NA), PO2M = c(NA, NA, NA, 37, NA, NA, NA, NA, NA, NA,
     41), PO2T = c(NA, NA, NA, 50, NA, NA, NA, NA, NA, NA, 50),
     X = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), X.1 = c(NA,
     NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names = c("STUDENT_ID",
"COURSE_CODE", "PO1M", "PO1T", "PO2M", "PO2T", "X", "X.1"), class =
"data.frame", row.names = c(NA,
-11L))

# I assume you would like to add up the values with na.rm = TRUE
meanFn <- function(x) mean(x, na.rm = TRUE)

# see ?aggregate
aggregate(dat[, c("PO1M", "PO1T", "PO2M")],
           by = dat["STUDENT_ID"],
           FUN = meanFn)

# if you have largish or large data
library(data.table)
dat2 <- as.data.table(dat)
dat2[, lapply(.SD, meanFn),
      by = STUDENT_ID,
      .SDcols = c("PO1M", "PO1T", "PO2M")]


Regards,
Denes


> 
> How do I do that?
> Thank you for any help given.
>


From ro@lin@ump @ending from gm@il@com  Fri Oct 12 00:56:23 2018
From: ro@lin@ump @ending from gm@il@com (roslinazairimah zakaria)
Date: Fri, 12 Oct 2018 06:56:23 +0800
Subject: [R] Finding unique terms
In-Reply-To: <6a70a2f0-b2df-73a8-bf08-20ef2059dc49@kogentum.hu>
References: <CANTvJZKf7V4qxr87RsEvQc=nV3mpG+tmvy+8yC2tfjFdonaHFw@mail.gmail.com>
 <6a70a2f0-b2df-73a8-bf08-20ef2059dc49@kogentum.hu>
Message-ID: <CANTvJZJ44mM8c6UHebXdipvvy=4JcrnE_GEZLtRxnXrV4TtHvA@mail.gmail.com>

Hi Denes,

It works perfectly as I want!

Thanks a lot.

On Fri, Oct 12, 2018 at 6:29 AM D?nes T?th <toth.denes at kogentum.hu> wrote:

>
>
> On 10/12/2018 12:12 AM, roslinazairimah zakaria wrote:
> > Dear r-users,
> >
> > I have this data:
> >
> > structure(list(STUDENT_ID = structure(c(1L, 1L, 1L, 1L, 1L, 1L,
> > 2L, 2L, 2L, 2L, 2L), .Label = c("AA15285", "AA15286"), class = "factor"),
> >      COURSE_CODE = structure(c(1L, 2L, 5L, 6L, 7L, 8L, 2L, 3L,
> >      4L, 5L, 6L), .Label = c("BAA1113", "BAA1322", "BAA2113",
> >      "BAA2513", "BAA2713", "BAA2921", "BAA4273", "BAA4513"), class =
> > "factor"),
> >      PO1M = c(155.7, 48.9, 83.2, NA, NA, NA, 48.05, 68.4, 41.65,
> >      82.35, NA), PO1T = c(180, 70, 100, NA, NA, NA, 70, 100, 60,
> >      100, NA), PO2M = c(NA, NA, NA, 37, NA, NA, NA, NA, NA, NA,
> >      41), PO2T = c(NA, NA, NA, 50, NA, NA, NA, NA, NA, NA, 50),
> >      X = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), X.1 = c(NA,
> >      NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names = c("STUDENT_ID",
> > "COURSE_CODE", "PO1M", "PO1T", "PO2M", "PO2T", "X", "X.1"), class =
> > "data.frame", row.names = c(NA,
> > -11L))
> >
> > I want to combine the same Student ID and add up all the values for PO1M,
> > PO1T,...,PO2T obtained by the same ID.
>
> dat <- structure(list(STUDENT_ID = structure(c(1L, 1L, 1L, 1L, 1L, 1L,
> 2L, 2L, 2L, 2L, 2L), .Label = c("AA15285", "AA15286"), class = "factor"),
>      COURSE_CODE = structure(c(1L, 2L, 5L, 6L, 7L, 8L, 2L, 3L,
>      4L, 5L, 6L), .Label = c("BAA1113", "BAA1322", "BAA2113",
>      "BAA2513", "BAA2713", "BAA2921", "BAA4273", "BAA4513"), class =
> "factor"),
>      PO1M = c(155.7, 48.9, 83.2, NA, NA, NA, 48.05, 68.4, 41.65,
>      82.35, NA), PO1T = c(180, 70, 100, NA, NA, NA, 70, 100, 60,
>      100, NA), PO2M = c(NA, NA, NA, 37, NA, NA, NA, NA, NA, NA,
>      41), PO2T = c(NA, NA, NA, 50, NA, NA, NA, NA, NA, NA, 50),
>      X = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), X.1 = c(NA,
>      NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names = c("STUDENT_ID",
> "COURSE_CODE", "PO1M", "PO1T", "PO2M", "PO2T", "X", "X.1"), class =
> "data.frame", row.names = c(NA,
> -11L))
>
> # I assume you would like to add up the values with na.rm = TRUE
> meanFn <- function(x) mean(x, na.rm = TRUE)
>
> # see ?aggregate
> aggregate(dat[, c("PO1M", "PO1T", "PO2M")],
>            by = dat["STUDENT_ID"],
>            FUN = meanFn)
>
> # if you have largish or large data
> library(data.table)
> dat2 <- as.data.table(dat)
> dat2[, lapply(.SD, meanFn),
>       by = STUDENT_ID,
>       .SDcols = c("PO1M", "PO1T", "PO2M")]
>
>
> Regards,
> Denes
>
>
> >
> > How do I do that?
> > Thank you for any help given.
> >
>


-- 
*Roslinazairimah Zakaria*
*Tel: +609-5492370; Fax. No.+609-5492766*

*Email: roslinazairimah at ump.edu.my <roslinazairimah at ump.edu.my>;
roslinaump at gmail.com <roslinaump at gmail.com>*
Faculty of Industrial Sciences & Technology
University Malaysia Pahang
Lebuhraya Tun Razak, 26300 Gambang, Pahang, Malaysia

	[[alternative HTML version deleted]]


From jdnewmil @ending from dcn@d@vi@@c@@u@  Fri Oct 12 04:36:51 2018
From: jdnewmil @ending from dcn@d@vi@@c@@u@ (Jeff Newmiller)
Date: Thu, 11 Oct 2018 19:36:51 -0700
Subject: [R] Finding unique terms
In-Reply-To: <CANTvJZJ44mM8c6UHebXdipvvy=4JcrnE_GEZLtRxnXrV4TtHvA@mail.gmail.com>
References: <CANTvJZKf7V4qxr87RsEvQc=nV3mpG+tmvy+8yC2tfjFdonaHFw@mail.gmail.com>
 <6a70a2f0-b2df-73a8-bf08-20ef2059dc49@kogentum.hu>
 <CANTvJZJ44mM8c6UHebXdipvvy=4JcrnE_GEZLtRxnXrV4TtHvA@mail.gmail.com>
Message-ID: <8194FCE8-B018-466D-8C05-B7927A180B98@dcn.davis.ca.us>

You said "add up"... so you did not mean to say that? Denes computed the mean...

On October 11, 2018 3:56:23 PM PDT, roslinazairimah zakaria <roslinaump at gmail.com> wrote:
>Hi Denes,
>
>It works perfectly as I want!
>
>Thanks a lot.
>
>On Fri, Oct 12, 2018 at 6:29 AM D?nes T?th <toth.denes at kogentum.hu>
>wrote:
>
>>
>>
>> On 10/12/2018 12:12 AM, roslinazairimah zakaria wrote:
>> > Dear r-users,
>> >
>> > I have this data:
>> >
>> > structure(list(STUDENT_ID = structure(c(1L, 1L, 1L, 1L, 1L, 1L,
>> > 2L, 2L, 2L, 2L, 2L), .Label = c("AA15285", "AA15286"), class =
>"factor"),
>> >      COURSE_CODE = structure(c(1L, 2L, 5L, 6L, 7L, 8L, 2L, 3L,
>> >      4L, 5L, 6L), .Label = c("BAA1113", "BAA1322", "BAA2113",
>> >      "BAA2513", "BAA2713", "BAA2921", "BAA4273", "BAA4513"), class
>=
>> > "factor"),
>> >      PO1M = c(155.7, 48.9, 83.2, NA, NA, NA, 48.05, 68.4, 41.65,
>> >      82.35, NA), PO1T = c(180, 70, 100, NA, NA, NA, 70, 100, 60,
>> >      100, NA), PO2M = c(NA, NA, NA, 37, NA, NA, NA, NA, NA, NA,
>> >      41), PO2T = c(NA, NA, NA, 50, NA, NA, NA, NA, NA, NA, 50),
>> >      X = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), X.1 = c(NA,
>> >      NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names =
>c("STUDENT_ID",
>> > "COURSE_CODE", "PO1M", "PO1T", "PO2M", "PO2T", "X", "X.1"), class =
>> > "data.frame", row.names = c(NA,
>> > -11L))
>> >
>> > I want to combine the same Student ID and add up all the values for
>PO1M,
>> > PO1T,...,PO2T obtained by the same ID.
>>
>> dat <- structure(list(STUDENT_ID = structure(c(1L, 1L, 1L, 1L, 1L,
>1L,
>> 2L, 2L, 2L, 2L, 2L), .Label = c("AA15285", "AA15286"), class =
>"factor"),
>>      COURSE_CODE = structure(c(1L, 2L, 5L, 6L, 7L, 8L, 2L, 3L,
>>      4L, 5L, 6L), .Label = c("BAA1113", "BAA1322", "BAA2113",
>>      "BAA2513", "BAA2713", "BAA2921", "BAA4273", "BAA4513"), class =
>> "factor"),
>>      PO1M = c(155.7, 48.9, 83.2, NA, NA, NA, 48.05, 68.4, 41.65,
>>      82.35, NA), PO1T = c(180, 70, 100, NA, NA, NA, 70, 100, 60,
>>      100, NA), PO2M = c(NA, NA, NA, 37, NA, NA, NA, NA, NA, NA,
>>      41), PO2T = c(NA, NA, NA, 50, NA, NA, NA, NA, NA, NA, 50),
>>      X = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), X.1 = c(NA,
>>      NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names =
>c("STUDENT_ID",
>> "COURSE_CODE", "PO1M", "PO1T", "PO2M", "PO2T", "X", "X.1"), class =
>> "data.frame", row.names = c(NA,
>> -11L))
>>
>> # I assume you would like to add up the values with na.rm = TRUE
>> meanFn <- function(x) mean(x, na.rm = TRUE)
>>
>> # see ?aggregate
>> aggregate(dat[, c("PO1M", "PO1T", "PO2M")],
>>            by = dat["STUDENT_ID"],
>>            FUN = meanFn)
>>
>> # if you have largish or large data
>> library(data.table)
>> dat2 <- as.data.table(dat)
>> dat2[, lapply(.SD, meanFn),
>>       by = STUDENT_ID,
>>       .SDcols = c("PO1M", "PO1T", "PO2M")]
>>
>>
>> Regards,
>> Denes
>>
>>
>> >
>> > How do I do that?
>> > Thank you for any help given.
>> >
>>

-- 
Sent from my phone. Please excuse my brevity.


From drjimlemon @ending from gm@il@com  Fri Oct 12 05:37:09 2018
From: drjimlemon @ending from gm@il@com (Jim Lemon)
Date: Fri, 12 Oct 2018 14:37:09 +1100
Subject: [R] Finding unique terms
In-Reply-To: <8194FCE8-B018-466D-8C05-B7927A180B98@dcn.davis.ca.us>
References: <CANTvJZKf7V4qxr87RsEvQc=nV3mpG+tmvy+8yC2tfjFdonaHFw@mail.gmail.com>
 <6a70a2f0-b2df-73a8-bf08-20ef2059dc49@kogentum.hu>
 <CANTvJZJ44mM8c6UHebXdipvvy=4JcrnE_GEZLtRxnXrV4TtHvA@mail.gmail.com>
 <8194FCE8-B018-466D-8C05-B7927A180B98@dcn.davis.ca.us>
Message-ID: <CA+8X3fVgbHGB7ZWPs4OsaYFN-Q3nY_i0AmT7Pz1nk1-kDxOpHg@mail.gmail.com>

Yes, I thought that as well and had worked out this but didn't send it:

add_Pscores<-function(x) {
return(sum(unlist(x),na.rm=TRUE))
}
by(rzdf[,c("PO1M", "PO1T", "PO2M", "PO2T")],rzdf$STUDENT_ID,FUN=add_Pscores)
rzdf$STUDENT_ID: AA15285
[1] 724.8
------------------------------------------------------------
rzdf$STUDENT_ID: AA15286
[1] 661.45

Jim
On Fri, Oct 12, 2018 at 1:37 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>
> You said "add up"... so you did not mean to say that? Denes computed the mean...
>
> On October 11, 2018 3:56:23 PM PDT, roslinazairimah zakaria <roslinaump at gmail.com> wrote:
> >Hi Denes,
> >
> >It works perfectly as I want!


From chocold12 @ending from gm@il@com  Fri Oct 12 05:59:11 2018
From: chocold12 @ending from gm@il@com (lily li)
Date: Fri, 12 Oct 2018 11:59:11 +0800
Subject: [R] how to exclude certain keywords in strings
Message-ID: <CAN5afy_vgsm4xPpQO+kUGxsx2TbTL+6NwzDXyEcghBc2dA3C-g@mail.gmail.com>

Hi R users,

I don't know how to extract certain words in strings. For example, if I
have strings like the formats "StationName1_temp.csv",
"StationName2_temp.csv", etc. How to get strings like these "StationName1",
"StationName2", etc? That is to say, I want to exclude the keywords
"_temp.csv", but I could not find a clue online. Thanks for your help.

	[[alternative HTML version deleted]]


From chocold12 @ending from gm@il@com  Fri Oct 12 06:03:40 2018
From: chocold12 @ending from gm@il@com (lily li)
Date: Fri, 12 Oct 2018 12:03:40 +0800
Subject: [R] how to exclude certain keywords in strings
In-Reply-To: <CAN5afy_vgsm4xPpQO+kUGxsx2TbTL+6NwzDXyEcghBc2dA3C-g@mail.gmail.com>
References: <CAN5afy_vgsm4xPpQO+kUGxsx2TbTL+6NwzDXyEcghBc2dA3C-g@mail.gmail.com>
Message-ID: <CAN5afy8aNQu=Wg7bBMeVd4osC_QDhUzZ+mpyv9iXZj3d-LkU_Q@mail.gmail.com>

I just figured this out, which seems to be a simple question. I just used
gsub("_temp.csv","","StationName1_temp.csv").



> Hi R users,
>
> I don't know how to extract certain words in strings. For example, if I
> have strings like the formats "StationName1_temp.csv",
> "StationName2_temp.csv", etc. How to get strings like these "StationName1",
> "StationName2", etc? That is to say, I want to exclude the keywords
> "_temp.csv", but I could not find a clue online. Thanks for your help.
>

	[[alternative HTML version deleted]]


From jdnewmil @ending from dcn@d@vi@@c@@u@  Fri Oct 12 07:26:01 2018
From: jdnewmil @ending from dcn@d@vi@@c@@u@ (Jeff Newmiller)
Date: Thu, 11 Oct 2018 22:26:01 -0700
Subject: [R] how to exclude certain keywords in strings
In-Reply-To: <CAN5afy_vgsm4xPpQO+kUGxsx2TbTL+6NwzDXyEcghBc2dA3C-g@mail.gmail.com>
References: <CAN5afy_vgsm4xPpQO+kUGxsx2TbTL+6NwzDXyEcghBc2dA3C-g@mail.gmail.com>
Message-ID: <48B3FD3A-F8D3-428C-921A-06CF70BCA10D@dcn.davis.ca.us>

I cannot imagine you looked very hard... this kind of question pops up all the time on this mailing list. Read the help fur the sub() function... you want to search for something and replace it with an empty string ("").

You should also know by now to post plain text on this mailing list.

On October 11, 2018 8:59:11 PM PDT, lily li <chocold12 at gmail.com> wrote:
>Hi R users,
>
>I don't know how to extract certain words in strings. For example, if I
>have strings like the formats "StationName1_temp.csv",
>"StationName2_temp.csv", etc. How to get strings like these
>"StationName1",
>"StationName2", etc? That is to say, I want to exclude the keywords
>"_temp.csv", but I could not find a clue online. Thanks for your help.
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From toth@dene@ @ending from kogentum@hu  Fri Oct 12 08:58:15 2018
From: toth@dene@ @ending from kogentum@hu (=?UTF-8?B?RMOpbmVzIFTDs3Ro?=)
Date: Fri, 12 Oct 2018 08:58:15 +0200
Subject: [R] Finding unique terms
In-Reply-To: <8194FCE8-B018-466D-8C05-B7927A180B98@dcn.davis.ca.us>
References: <CANTvJZKf7V4qxr87RsEvQc=nV3mpG+tmvy+8yC2tfjFdonaHFw@mail.gmail.com>
 <6a70a2f0-b2df-73a8-bf08-20ef2059dc49@kogentum.hu>
 <CANTvJZJ44mM8c6UHebXdipvvy=4JcrnE_GEZLtRxnXrV4TtHvA@mail.gmail.com>
 <8194FCE8-B018-466D-8C05-B7927A180B98@dcn.davis.ca.us>
Message-ID: <4d607934-c087-9799-65cb-86b29b52a4eb@kogentum.hu>



On 10/12/2018 04:36 AM, Jeff Newmiller wrote:
> You said "add up"... so you did not mean to say that? Denes computed the mean...

Nice catch, Jeff. Of course I wanted to use 'sum' instead of 'mean'.


> 
> On October 11, 2018 3:56:23 PM PDT, roslinazairimah zakaria <roslinaump at gmail.com> wrote:
>> Hi Denes,
>>
>> It works perfectly as I want!
>>
>> Thanks a lot.
>>
>> On Fri, Oct 12, 2018 at 6:29 AM D?nes T?th <toth.denes at kogentum.hu>
>> wrote:
>>
>>>
>>>
>>> On 10/12/2018 12:12 AM, roslinazairimah zakaria wrote:
>>>> Dear r-users,
>>>>
>>>> I have this data:
>>>>
>>>> structure(list(STUDENT_ID = structure(c(1L, 1L, 1L, 1L, 1L, 1L,
>>>> 2L, 2L, 2L, 2L, 2L), .Label = c("AA15285", "AA15286"), class =
>> "factor"),
>>>>       COURSE_CODE = structure(c(1L, 2L, 5L, 6L, 7L, 8L, 2L, 3L,
>>>>       4L, 5L, 6L), .Label = c("BAA1113", "BAA1322", "BAA2113",
>>>>       "BAA2513", "BAA2713", "BAA2921", "BAA4273", "BAA4513"), class
>> =
>>>> "factor"),
>>>>       PO1M = c(155.7, 48.9, 83.2, NA, NA, NA, 48.05, 68.4, 41.65,
>>>>       82.35, NA), PO1T = c(180, 70, 100, NA, NA, NA, 70, 100, 60,
>>>>       100, NA), PO2M = c(NA, NA, NA, 37, NA, NA, NA, NA, NA, NA,
>>>>       41), PO2T = c(NA, NA, NA, 50, NA, NA, NA, NA, NA, NA, 50),
>>>>       X = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), X.1 = c(NA,
>>>>       NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names =
>> c("STUDENT_ID",
>>>> "COURSE_CODE", "PO1M", "PO1T", "PO2M", "PO2T", "X", "X.1"), class =
>>>> "data.frame", row.names = c(NA,
>>>> -11L))
>>>>
>>>> I want to combine the same Student ID and add up all the values for
>> PO1M,
>>>> PO1T,...,PO2T obtained by the same ID.
>>>
>>> dat <- structure(list(STUDENT_ID = structure(c(1L, 1L, 1L, 1L, 1L,
>> 1L,
>>> 2L, 2L, 2L, 2L, 2L), .Label = c("AA15285", "AA15286"), class =
>> "factor"),
>>>       COURSE_CODE = structure(c(1L, 2L, 5L, 6L, 7L, 8L, 2L, 3L,
>>>       4L, 5L, 6L), .Label = c("BAA1113", "BAA1322", "BAA2113",
>>>       "BAA2513", "BAA2713", "BAA2921", "BAA4273", "BAA4513"), class =
>>> "factor"),
>>>       PO1M = c(155.7, 48.9, 83.2, NA, NA, NA, 48.05, 68.4, 41.65,
>>>       82.35, NA), PO1T = c(180, 70, 100, NA, NA, NA, 70, 100, 60,
>>>       100, NA), PO2M = c(NA, NA, NA, 37, NA, NA, NA, NA, NA, NA,
>>>       41), PO2T = c(NA, NA, NA, 50, NA, NA, NA, NA, NA, NA, 50),
>>>       X = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), X.1 = c(NA,
>>>       NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names =
>> c("STUDENT_ID",
>>> "COURSE_CODE", "PO1M", "PO1T", "PO2M", "PO2T", "X", "X.1"), class =
>>> "data.frame", row.names = c(NA,
>>> -11L))
>>>
>>> # I assume you would like to add up the values with na.rm = TRUE
>>> meanFn <- function(x) mean(x, na.rm = TRUE)
>>>
>>> # see ?aggregate
>>> aggregate(dat[, c("PO1M", "PO1T", "PO2M")],
>>>             by = dat["STUDENT_ID"],
>>>             FUN = meanFn)
>>>
>>> # if you have largish or large data
>>> library(data.table)
>>> dat2 <- as.data.table(dat)
>>> dat2[, lapply(.SD, meanFn),
>>>        by = STUDENT_ID,
>>>        .SDcols = c("PO1M", "PO1T", "PO2M")]
>>>
>>>
>>> Regards,
>>> Denes
>>>
>>>
>>>>
>>>> How do I do that?
>>>> Thank you for any help given.
>>>>
>>>
>


From toth@dene@ @ending from kogentum@hu  Fri Oct 12 09:03:32 2018
From: toth@dene@ @ending from kogentum@hu (=?UTF-8?B?VMOzdGggRMOpbmVz?=)
Date: Fri, 12 Oct 2018 09:03:32 +0200
Subject: [R] Finding unique terms
In-Reply-To: <4d607934-c087-9799-65cb-86b29b52a4eb@kogentum.hu>
References: <CANTvJZKf7V4qxr87RsEvQc=nV3mpG+tmvy+8yC2tfjFdonaHFw@mail.gmail.com>
 <6a70a2f0-b2df-73a8-bf08-20ef2059dc49@kogentum.hu>
 <CANTvJZJ44mM8c6UHebXdipvvy=4JcrnE_GEZLtRxnXrV4TtHvA@mail.gmail.com>
 <8194FCE8-B018-466D-8C05-B7927A180B98@dcn.davis.ca.us>
 <4d607934-c087-9799-65cb-86b29b52a4eb@kogentum.hu>
Message-ID: <3ba324df-6c05-e59c-09cc-a02e5a3614a2@kogentum.hu>



On 10/12/2018 08:58 AM, D?nes T?th wrote:
> 
> 
> On 10/12/2018 04:36 AM, Jeff Newmiller wrote:
>> You said "add up"... so you did not mean to say that? Denes computed 
>> the mean...
> 
> Nice catch, Jeff. Of course I wanted to use 'sum' instead of 'mean'.

Oh, and one more note: If you have NAs in your columns, 'sum' is rarely 
the aggregate statistic that you are after. Probably this is why my 
subconscious statistician suggested 'mean'.

> 
> 
>>
>> On October 11, 2018 3:56:23 PM PDT, roslinazairimah zakaria 
>> <roslinaump at gmail.com> wrote:
>>> Hi Denes,
>>>
>>> It works perfectly as I want!
>>>
>>> Thanks a lot.
>>>
>>> On Fri, Oct 12, 2018 at 6:29 AM D?nes T?th <toth.denes at kogentum.hu>
>>> wrote:
>>>
>>>>
>>>>
>>>> On 10/12/2018 12:12 AM, roslinazairimah zakaria wrote:
>>>>> Dear r-users,
>>>>>
>>>>> I have this data:
>>>>>
>>>>> structure(list(STUDENT_ID = structure(c(1L, 1L, 1L, 1L, 1L, 1L,
>>>>> 2L, 2L, 2L, 2L, 2L), .Label = c("AA15285", "AA15286"), class =
>>> "factor"),
>>>>>       COURSE_CODE = structure(c(1L, 2L, 5L, 6L, 7L, 8L, 2L, 3L,
>>>>>       4L, 5L, 6L), .Label = c("BAA1113", "BAA1322", "BAA2113",
>>>>>       "BAA2513", "BAA2713", "BAA2921", "BAA4273", "BAA4513"), class
>>> =
>>>>> "factor"),
>>>>>       PO1M = c(155.7, 48.9, 83.2, NA, NA, NA, 48.05, 68.4, 41.65,
>>>>>       82.35, NA), PO1T = c(180, 70, 100, NA, NA, NA, 70, 100, 60,
>>>>>       100, NA), PO2M = c(NA, NA, NA, 37, NA, NA, NA, NA, NA, NA,
>>>>>       41), PO2T = c(NA, NA, NA, 50, NA, NA, NA, NA, NA, NA, 50),
>>>>>       X = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), X.1 = c(NA,
>>>>>       NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names =
>>> c("STUDENT_ID",
>>>>> "COURSE_CODE", "PO1M", "PO1T", "PO2M", "PO2T", "X", "X.1"), class =
>>>>> "data.frame", row.names = c(NA,
>>>>> -11L))
>>>>>
>>>>> I want to combine the same Student ID and add up all the values for
>>> PO1M,
>>>>> PO1T,...,PO2T obtained by the same ID.
>>>>
>>>> dat <- structure(list(STUDENT_ID = structure(c(1L, 1L, 1L, 1L, 1L,
>>> 1L,
>>>> 2L, 2L, 2L, 2L, 2L), .Label = c("AA15285", "AA15286"), class =
>>> "factor"),
>>>>       COURSE_CODE = structure(c(1L, 2L, 5L, 6L, 7L, 8L, 2L, 3L,
>>>>       4L, 5L, 6L), .Label = c("BAA1113", "BAA1322", "BAA2113",
>>>>       "BAA2513", "BAA2713", "BAA2921", "BAA4273", "BAA4513"), class =
>>>> "factor"),
>>>>       PO1M = c(155.7, 48.9, 83.2, NA, NA, NA, 48.05, 68.4, 41.65,
>>>>       82.35, NA), PO1T = c(180, 70, 100, NA, NA, NA, 70, 100, 60,
>>>>       100, NA), PO2M = c(NA, NA, NA, 37, NA, NA, NA, NA, NA, NA,
>>>>       41), PO2T = c(NA, NA, NA, 50, NA, NA, NA, NA, NA, NA, 50),
>>>>       X = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), X.1 = c(NA,
>>>>       NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names =
>>> c("STUDENT_ID",
>>>> "COURSE_CODE", "PO1M", "PO1T", "PO2M", "PO2T", "X", "X.1"), class =
>>>> "data.frame", row.names = c(NA,
>>>> -11L))
>>>>
>>>> # I assume you would like to add up the values with na.rm = TRUE
>>>> meanFn <- function(x) mean(x, na.rm = TRUE)
>>>>
>>>> # see ?aggregate
>>>> aggregate(dat[, c("PO1M", "PO1T", "PO2M")],
>>>>             by = dat["STUDENT_ID"],
>>>>             FUN = meanFn)
>>>>
>>>> # if you have largish or large data
>>>> library(data.table)
>>>> dat2 <- as.data.table(dat)
>>>> dat2[, lapply(.SD, meanFn),
>>>>        by = STUDENT_ID,
>>>>        .SDcols = c("PO1M", "PO1T", "PO2M")]
>>>>
>>>>
>>>> Regards,
>>>> Denes
>>>>
>>>>
>>>>>
>>>>> How do I do that?
>>>>> Thank you for any help given.
>>>>>
>>>>
>>

-- 
Dr. T?th D?nes ?gyvezet?
Kogentum Kft.
Tel.: 06-30-2583723
Web: www.kogentum.hu


From @lexnerdy @ending from hotm@il@com  Fri Oct 12 10:31:44 2018
From: @lexnerdy @ending from hotm@il@com (Alexander Nervedi)
Date: Fri, 12 Oct 2018 08:31:44 +0000
Subject: [R] install issue with survey package?
Message-ID: <BM1PR01MB2577DED744E7A949873985B8BBE20@BM1PR01MB2577.INDPRD01.PROD.OUTLOOK.COM>

Have been trying to run a few packages with dependency on the survey package (e.g. twang) and have run into trouble that I am not sure how to resolve. Any help would be appreciated, the code (and error messages) are below:

--- R log begins ---
> install.packages("survey")
Installing package into ?D:/Users/Al Nerdi/Documents/R/win-library/3.5?
(as ?lib? is unspecified)

  There is a binary version available but the source version is later:
       binary source needs_compilation
survey 3.33-2   3.34             FALSE

installing the source package ?survey?

trying URL 'https://cran.rstudio.com/src/contrib/survey_3.34.tar.gz'
Content type 'application/x-gzip' length 1476949 bytes (1.4 MB)
downloaded 1.4 MB

Warning: invalid package 'D:\Users\Al'
Warning: invalid package 'Nerdi\AppData\Local\Temp\RtmpU3AmrY/downloaded_packages/survey_3.34.tar.gz'
Error: ERROR: no packages specified
In R CMD INSTALL
Warning in install.packages :
  installation of package ?survey? had non-zero exit status

The downloaded source packages are in
?D:\Users\Al Nerdi\AppData\Local\Temp\RtmpU3AmrY\downloaded_packages?

> install.packages("twang")
Installing package into ?D:/Users/Al Nerdi/Documents/R/win-library/3.5?
(as ?lib? is unspecified)
also installing the dependencies ?gbm?, ?survey?


  There is a binary version available but the source version is later:
       binary source needs_compilation
survey 3.33-2   3.34             FALSE

trying URL 'https://cran.rstudio.com/bin/windows/contrib/3.5/gbm_2.1.4.zip'
Content type 'application/zip' length 1094087 bytes (1.0 MB)
downloaded 1.0 MB

trying URL 'https://cran.rstudio.com/bin/windows/contrib/3.5/twang_1.5.zip'
Content type 'application/zip' length 1516991 bytes (1.4 MB)
downloaded 1.4 MB

package ?gbm? successfully unpacked and MD5 sums checked
package ?twang? successfully unpacked and MD5 sums checked

The downloaded binary packages are in
D:\Users\Al Nerdi\AppData\Local\Temp\RtmpU3AmrY\downloaded_packages
installing the source package ?survey?

trying URL 'https://cran.rstudio.com/src/contrib/survey_3.34.tar.gz'
Content type 'application/x-gzip' length 1476949 bytes (1.4 MB)
downloaded 1.4 MB

Warning: invalid package 'D:\Users\Al'
Warning: invalid package 'Nerdi\AppData\Local\Temp\RtmpU3AmrY/downloaded_packages/survey_3.34.tar.gz'
Error: ERROR: no packages specified
In R CMD INSTALL
Warning in install.packages :
  installation of package ?survey? had non-zero exit status

The downloaded source packages are in
?D:\Users\Al Nerdi\AppData\Local\Temp\RtmpU3AmrY\downloaded_packages?
> library(twang)
Loading required package: gbm
Loaded gbm 2.1.4
Error: package ?survey? required by ?twang? could not be found

> R.Version()
$`platform`
[1] "x86_64-w64-mingw32"

$arch
[1] "x86_64"

$os
[1] "mingw32"

$system
[1] "x86_64, mingw32"

$status
[1] ""

$major
[1] "3"

$minor
[1] "5.1"

$year
[1] "2018"

$month
[1] "07"

$day
[1] "02"

$`svn rev`
[1] "74947"

$language
[1] "R"

$version.string
[1] "R version 3.5.1 (2018-07-02)"

$nickname
[1] "Feather Spray"

--- R log ends ---

I am not sure how to address this. Any suggestions will be great!

Grazie,

Al Nerdi

	[[alternative HTML version deleted]]


From ruipb@rr@d@@ @ending from @@po@pt  Fri Oct 12 12:28:22 2018
From: ruipb@rr@d@@ @ending from @@po@pt (Rui Barradas)
Date: Fri, 12 Oct 2018 11:28:22 +0100
Subject: [R] how to exclude certain keywords in strings
In-Reply-To: <CAN5afy8aNQu=Wg7bBMeVd4osC_QDhUzZ+mpyv9iXZj3d-LkU_Q@mail.gmail.com>
References: <CAN5afy_vgsm4xPpQO+kUGxsx2TbTL+6NwzDXyEcghBc2dA3C-g@mail.gmail.com>
 <CAN5afy8aNQu=Wg7bBMeVd4osC_QDhUzZ+mpyv9iXZj3d-LkU_Q@mail.gmail.com>
Message-ID: <a22bec9b-ef43-9192-0419-508f2fa46894@sapo.pt>

Hello,

If you want to remove everything from the last underscore to the end of 
the string, this regex is better.
Note that you don't need gsub, 'g' is to replace all matches.

x <- c("StationName1_temp.csv", "Station_Name1_temp.csv", 
"StationName2_temp.csv")

sub("_[^_]*$", "", x)
#[1] "StationName1"  "Station_Name1" "StationName2"


Hope this helps,

Rui Barradas

?s 05:03 de 12/10/2018, lily li escreveu:
> I just figured this out, which seems to be a simple question. I just used
> gsub("_temp.csv","","StationName1_temp.csv").
> 
> 
> 
>> Hi R users,
>>
>> I don't know how to extract certain words in strings. For example, if I
>> have strings like the formats "StationName1_temp.csv",
>> "StationName2_temp.csv", etc. How to get strings like these "StationName1",
>> "StationName2", etc? That is to say, I want to exclude the keywords
>> "_temp.csv", but I could not find a clue online. Thanks for your help.
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From li@t@ @ending from dewey@myzen@co@uk  Fri Oct 12 13:33:15 2018
From: li@t@ @ending from dewey@myzen@co@uk (Michael Dewey)
Date: Fri, 12 Oct 2018 12:33:15 +0100
Subject: [R] install issue with survey package?
In-Reply-To: <BM1PR01MB2577DED744E7A949873985B8BBE20@BM1PR01MB2577.INDPRD01.PROD.OUTLOOK.COM>
References: <BM1PR01MB2577DED744E7A949873985B8BBE20@BM1PR01MB2577.INDPRD01.PROD.OUTLOOK.COM>
Message-ID: <0d6b2449-6547-4332-8405-c24a20f1f079@dewey.myzen.co.uk>

Dear Al

It looks like the problem may be the embedded space in Al Nerdi

What happens if you manually download the tar.gz file, put it somewhere 
convenient and then from the commend line run

R CMD INSTALL survey_3.34.tar.gz

You will need to make sure R is on your path first

Michael

On 12/10/2018 09:31, Alexander Nervedi wrote:
> Have been trying to run a few packages with dependency on the survey package (e.g. twang) and have run into trouble that I am not sure how to resolve. Any help would be appreciated, the code (and error messages) are below:
> 
> --- R log begins ---
>> install.packages("survey")
> Installing package into ?D:/Users/Al Nerdi/Documents/R/win-library/3.5?
> (as ?lib? is unspecified)
> 
>    There is a binary version available but the source version is later:
>         binary source needs_compilation
> survey 3.33-2   3.34             FALSE
> 
> installing the source package ?survey?
> 
> trying URL 'https://cran.rstudio.com/src/contrib/survey_3.34.tar.gz'
> Content type 'application/x-gzip' length 1476949 bytes (1.4 MB)
> downloaded 1.4 MB
> 
> Warning: invalid package 'D:\Users\Al'
> Warning: invalid package 'Nerdi\AppData\Local\Temp\RtmpU3AmrY/downloaded_packages/survey_3.34.tar.gz'
> Error: ERROR: no packages specified
> In R CMD INSTALL
> Warning in install.packages :
>    installation of package ?survey? had non-zero exit status
> 
> The downloaded source packages are in
> ?D:\Users\Al Nerdi\AppData\Local\Temp\RtmpU3AmrY\downloaded_packages?
> 
>> install.packages("twang")
> Installing package into ?D:/Users/Al Nerdi/Documents/R/win-library/3.5?
> (as ?lib? is unspecified)
> also installing the dependencies ?gbm?, ?survey?
> 
> 
>    There is a binary version available but the source version is later:
>         binary source needs_compilation
> survey 3.33-2   3.34             FALSE
> 
> trying URL 'https://cran.rstudio.com/bin/windows/contrib/3.5/gbm_2.1.4.zip'
> Content type 'application/zip' length 1094087 bytes (1.0 MB)
> downloaded 1.0 MB
> 
> trying URL 'https://cran.rstudio.com/bin/windows/contrib/3.5/twang_1.5.zip'
> Content type 'application/zip' length 1516991 bytes (1.4 MB)
> downloaded 1.4 MB
> 
> package ?gbm? successfully unpacked and MD5 sums checked
> package ?twang? successfully unpacked and MD5 sums checked
> 
> The downloaded binary packages are in
> D:\Users\Al Nerdi\AppData\Local\Temp\RtmpU3AmrY\downloaded_packages
> installing the source package ?survey?
> 
> trying URL 'https://cran.rstudio.com/src/contrib/survey_3.34.tar.gz'
> Content type 'application/x-gzip' length 1476949 bytes (1.4 MB)
> downloaded 1.4 MB
> 
> Warning: invalid package 'D:\Users\Al'
> Warning: invalid package 'Nerdi\AppData\Local\Temp\RtmpU3AmrY/downloaded_packages/survey_3.34.tar.gz'
> Error: ERROR: no packages specified
> In R CMD INSTALL
> Warning in install.packages :
>    installation of package ?survey? had non-zero exit status
> 
> The downloaded source packages are in
> ?D:\Users\Al Nerdi\AppData\Local\Temp\RtmpU3AmrY\downloaded_packages?
>> library(twang)
> Loading required package: gbm
> Loaded gbm 2.1.4
> Error: package ?survey? required by ?twang? could not be found
> 
>> R.Version()
> $`platform`
> [1] "x86_64-w64-mingw32"
> 
> $arch
> [1] "x86_64"
> 
> $os
> [1] "mingw32"
> 
> $system
> [1] "x86_64, mingw32"
> 
> $status
> [1] ""
> 
> $major
> [1] "3"
> 
> $minor
> [1] "5.1"
> 
> $year
> [1] "2018"
> 
> $month
> [1] "07"
> 
> $day
> [1] "02"
> 
> $`svn rev`
> [1] "74947"
> 
> $language
> [1] "R"
> 
> $version.string
> [1] "R version 3.5.1 (2018-07-02)"
> 
> $nickname
> [1] "Feather Spray"
> 
> --- R log ends ---
> 
> I am not sure how to address this. Any suggestions will be great!
> 
> Grazie,
> 
> Al Nerdi
> 
> 	[[alternative HTML version deleted]]
> 
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From r@hep@rd @ending from @ppl-eco@y@@com  Fri Oct 12 16:06:44 2018
From: r@hep@rd @ending from @ppl-eco@y@@com (Rich Shepard)
Date: Fri, 12 Oct 2018 07:06:44 -0700 (PDT)
Subject: [R] Package updates for new versions
In-Reply-To: <44725a49-5b0d-e990-bc7a-5c5a020ebb3e@gmail.com>
References: <alpine.LNX.2.20.1810110833340.14179@salmo.appl-ecosys.com>
 <44725a49-5b0d-e990-bc7a-5c5a020ebb3e@gmail.com>
Message-ID: <alpine.LNX.2.20.1810120705250.4941@salmo.appl-ecosys.com>

On Fri, 12 Oct 2018, Micha Silver wrote:

> Just to clarify, I believe that rpy2 is a *python* package.

Micha,

   So I learned yesterday.

Thanks very much,

Rich


From federico@c@lboli @ending from kuleuven@be  Fri Oct 12 17:00:11 2018
From: federico@c@lboli @ending from kuleuven@be (Federico Calboli)
Date: Fri, 12 Oct 2018 15:00:11 +0000
Subject: [R] keeping github packages up to date
Message-ID: <FE0C85C4-7749-4545-8A91-3C8B1DAD0A0B@kuleuven.be>

Hi all,

more and more people (sadly) are putting stuff on github, with either no CRAN upload or an package.  So I am stuck with using devtools and install_github.

I know how to keep stuff from CRAN updated ? how do I do the same for github stuff?

Cheers

F


--
Federico Calboli
LBEG - Laboratory of Biodiversity and Evolutionary Genomics
Charles Deberiotstraat 32 box 2439
3000 Leuven
+32 16 32 87 67






From jdnewmil @ending from dcn@d@vi@@c@@u@  Fri Oct 12 17:32:35 2018
From: jdnewmil @ending from dcn@d@vi@@c@@u@ (Jeff Newmiller)
Date: Fri, 12 Oct 2018 08:32:35 -0700
Subject: [R] keeping github packages up to date
In-Reply-To: <FE0C85C4-7749-4545-8A91-3C8B1DAD0A0B@kuleuven.be>
References: <FE0C85C4-7749-4545-8A91-3C8B1DAD0A0B@kuleuven.be>
Message-ID: <99CDC2BA-A667-4D4A-A046-7A81160DA277@dcn.davis.ca.us>

Reinstall the updated versions however you originally did. The "obstacles" imposed by CRAN that cause package developers to forgo sharing there came about to confirm documentation, cross-platform compatibility and dependencies. With no referee enforcing such care in the environments you are pulling from, you cannot expect automated dependency management to work. You are riding a mustang in the Wild West... so have fun while it lasts... eventually bit-rot will break your library unless you freeze it (use packrat and keep old versions of R?).

On October 12, 2018 8:00:11 AM PDT, Federico Calboli <federico.calboli at kuleuven.be> wrote:
>Hi all,
>
>more and more people (sadly) are putting stuff on github, with either
>no CRAN upload or an package.  So I am stuck with using devtools and
>install_github.
>
>I know how to keep stuff from CRAN updated ? how do I do the same for
>github stuff?
>
>Cheers
>
>F
>
>
>--
>Federico Calboli
>LBEG - Laboratory of Biodiversity and Evolutionary Genomics
>Charles Deberiotstraat 32 box 2439
>3000 Leuven
>+32 16 32 87 67
>
>
>
>
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From prof@@mit@mitt@l @ending from gm@il@com  Fri Oct 12 18:00:49 2018
From: prof@@mit@mitt@l @ending from gm@il@com (Amit Mittal)
Date: Fri, 12 Oct 2018 21:30:49 +0530
Subject: [R] keeping github packages up to date
In-Reply-To: <99CDC2BA-A667-4D4A-A046-7A81160DA277@dcn.davis.ca.us>
References: <FE0C85C4-7749-4545-8A91-3C8B1DAD0A0B@kuleuven.be>
 <99CDC2BA-A667-4D4A-A046-7A81160DA277@dcn.davis.ca.us>
Message-ID: <CAP8zaQA5Na_SMCq2kub+wNe+HVwE28YEFQxwJse_nZQr_SdFjA@mail.gmail.com>

I'd just check with a strip script checking for updates with devtools,
maybe every week and maybe when a mail pops from the git team, if
subscribed (pretty powerful about merges into the final software )

BR

On Fri 12 Oct, 2018, 21:03 Jeff Newmiller, <jdnewmil at dcn.davis.ca.us> wrote:

> Reinstall the updated versions however you originally did. The "obstacles"
> imposed by CRAN that cause package developers to forgo sharing there came
> about to confirm documentation, cross-platform compatibility and
> dependencies. With no referee enforcing such care in the environments you
> are pulling from, you cannot expect automated dependency management to
> work. You are riding a mustang in the Wild West... so have fun while it
> lasts... eventually bit-rot will break your library unless you freeze it
> (use packrat and keep old versions of R?).
>
> On October 12, 2018 8:00:11 AM PDT, Federico Calboli <
> federico.calboli at kuleuven.be> wrote:
> >Hi all,
> >
> >more and more people (sadly) are putting stuff on github, with either
> >no CRAN upload or an package.  So I am stuck with using devtools and
> >install_github.
> >
> >I know how to keep stuff from CRAN updated ? how do I do the same for
> >github stuff?
> >
> >Cheers
> >
> >F
> >
> >
> >--
> >Federico Calboli
> >LBEG - Laboratory of Biodiversity and Evolutionary Genomics
> >Charles Deberiotstraat 32
> <https://maps.google.com/?q=Charles+Deberiotstraat+32&entry=gmail&source=g>
> box 2439
> >3000 Leuven
> >+32 16 32 87 67
> >
> >
> >
> >
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my phone. Please excuse my brevity.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
-- 

______________________________

Amit Mittal
Pursuing Ph.D. in Finance and Accounting
Indian Institute of Management, Lucknow
Visit my SSRN author page:
http://ssrn.com/author=2665511
* Top 10% Downloaded Author on SSRN
Mob: +91 7525023664

This message has been sent from a mobile device. I may contact you again.

_________________

	[[alternative HTML version deleted]]


From jlup@dh @ending from gm@il@com  Fri Oct 12 18:41:03 2018
From: jlup@dh @ending from gm@il@com (Jiblal Upadhya)
Date: Fri, 12 Oct 2018 11:41:03 -0500
Subject: [R] Help in jointprior(kslf.nw)
Message-ID: <CAO-R1n6LF1+74MhNDVrHr2=S5RqcrYeDd-Mjzk8AwUR4sKnUiw@mail.gmail.com>

Dear All,

I tried to implement following code, but its giving error as
"Error in array(1:TD, dim = Dim) : 'dims' cannot be of length 0"

Code for ksl dataset in deal package
kslfs <- ksl[c(1:300),c(1,2,4,5,6,7,8)]
head(kslfs)
kslfs[,c(1:7)] <- lapply(kslfs[,c(1:7)], as.factor)
indx <- sapply(kslfs, is.factor)
kslfs[indx] <- lapply(kslfs[indx], function(x) as.numeric(as.character(x)))
kslfs.nw <- network(kslfs)
kslfs.prior <- jointprior(kslfs.nw)

I look on the stack overflow and its saying it doesn't run for only
continuous variables. Anyone has updated information to correct this.

Any help will be highly appreciated.
Thanks,

-Jiblal

	[[alternative HTML version deleted]]


From @lexnerdy @ending from hotm@il@com  Fri Oct 12 18:46:09 2018
From: @lexnerdy @ending from hotm@il@com (Alexander Nervedi)
Date: Fri, 12 Oct 2018 16:46:09 +0000
Subject: [R] install issue with survey package?
In-Reply-To: <0d6b2449-6547-4332-8405-c24a20f1f079@dewey.myzen.co.uk>
References: <BM1PR01MB2577DED744E7A949873985B8BBE20@BM1PR01MB2577.INDPRD01.PROD.OUTLOOK.COM>,
 <0d6b2449-6547-4332-8405-c24a20f1f079@dewey.myzen.co.uk>
Message-ID: <BM1PR01MB2577B588FE7592F8CC696E4EBBE20@BM1PR01MB2577.INDPRD01.PROD.OUTLOOK.COM>

Hi Michael,

I think you are spot on. Haven't resolved the issue yet. Here is what i get:

> utils:::menuInstallLocal()
* installing *source* package 'survey' ...
** package 'survey' successfully unpacked and MD5 sums checked
** R
** data
** inst
** preparing package for lazy loading
** help
*** installing help indices
** building package indices
** installing vignettes
** testing if installed package can be loaded
*** arch - i386
Fatal error: cannot open file 'D:\Users\Al': No such file or directory

*** arch - x64
Fatal error: cannot open file 'D:\Users\Al': No such file or directory

ERROR: loading failed for 'i386', 'x64'
* removing 'D:/Users/Al Nerdi/Documents/R/win-library/3.3/survey'
Warning messages:
1: running command '"C:/PROGRA~1/R/R-33~1.1/bin/i386/R" CMD INSTALL -l "D:\Users\Al Nerdi\Documents\R\win-library\3.3" "D:/downloads/survey_3.34.tar.gz"' had status 1
2: In install.packages(files[tarballs], .libPaths()[1L], repos = NULL,  :
  installation of package ?D:/downloads/survey_3.34.tar.gz? had non-zero exit status
>

I think i might have to reinstall R in the root directly (rather than under program files) so that there are no spaces in path names.

Thanks for the pointer,

best wishes,
Alnerdi

________________________________
From: Michael Dewey <lists at dewey.myzen.co.uk>
Sent: Friday, October 12, 2018 4:33 AM
To: Alexander Nervedi; r-help at R-project.org
Subject: Re: [R] install issue with survey package?

Dear Al

It looks like the problem may be the embedded space in Al Nerdi

What happens if you manually download the tar.gz file, put it somewhere
convenient and then from the commend line run

R CMD INSTALL survey_3.34.tar.gz

You will need to make sure R is on your path first

Michael

On 12/10/2018 09:31, Alexander Nervedi wrote:
> Have been trying to run a few packages with dependency on the survey package (e.g. twang) and have run into trouble that I am not sure how to resolve. Any help would be appreciated, the code (and error messages) are below:
>
> --- R log begins ---
>> install.packages("survey")
> Installing package into ?D:/Users/Al Nerdi/Documents/R/win-library/3.5?
> (as ?lib? is unspecified)
>
>    There is a binary version available but the source version is later:
>         binary source needs_compilation
> survey 3.33-2   3.34             FALSE
>
> installing the source package ?survey?
>
> trying URL 'https://cran.rstudio.com/src/contrib/survey_3.34.tar.gz'
> Content type 'application/x-gzip' length 1476949 bytes (1.4 MB)
> downloaded 1.4 MB
>
> Warning: invalid package 'D:\Users\Al'
> Warning: invalid package 'Nerdi\AppData\Local\Temp\RtmpU3AmrY/downloaded_packages/survey_3.34.tar.gz'
> Error: ERROR: no packages specified
> In R CMD INSTALL
> Warning in install.packages :
>    installation of package ?survey? had non-zero exit status
>
> The downloaded source packages are in
> ?D:\Users\Al Nerdi\AppData\Local\Temp\RtmpU3AmrY\downloaded_packages?
>
>> install.packages("twang")
> Installing package into ?D:/Users/Al Nerdi/Documents/R/win-library/3.5?
> (as ?lib? is unspecified)
> also installing the dependencies ?gbm?, ?survey?
>
>
>    There is a binary version available but the source version is later:
>         binary source needs_compilation
> survey 3.33-2   3.34             FALSE
>
> trying URL 'https://cran.rstudio.com/bin/windows/contrib/3.5/gbm_2.1.4.zip'
> Content type 'application/zip' length 1094087 bytes (1.0 MB)
> downloaded 1.0 MB
>
> trying URL 'https://cran.rstudio.com/bin/windows/contrib/3.5/twang_1.5.zip'
> Content type 'application/zip' length 1516991 bytes (1.4 MB)
> downloaded 1.4 MB
>
> package ?gbm? successfully unpacked and MD5 sums checked
> package ?twang? successfully unpacked and MD5 sums checked
>
> The downloaded binary packages are in
> D:\Users\Al Nerdi\AppData\Local\Temp\RtmpU3AmrY\downloaded_packages
> installing the source package ?survey?
>
> trying URL 'https://cran.rstudio.com/src/contrib/survey_3.34.tar.gz'
> Content type 'application/x-gzip' length 1476949 bytes (1.4 MB)
> downloaded 1.4 MB
>
> Warning: invalid package 'D:\Users\Al'
> Warning: invalid package 'Nerdi\AppData\Local\Temp\RtmpU3AmrY/downloaded_packages/survey_3.34.tar.gz'
> Error: ERROR: no packages specified
> In R CMD INSTALL
> Warning in install.packages :
>    installation of package ?survey? had non-zero exit status
>
> The downloaded source packages are in
> ?D:\Users\Al Nerdi\AppData\Local\Temp\RtmpU3AmrY\downloaded_packages?
>> library(twang)
> Loading required package: gbm
> Loaded gbm 2.1.4
> Error: package ?survey? required by ?twang? could not be found
>
>> R.Version()
> $`platform`
> [1] "x86_64-w64-mingw32"
>
> $arch
> [1] "x86_64"
>
> $os
> [1] "mingw32"
>
> $system
> [1] "x86_64, mingw32"
>
> $status
> [1] ""
>
> $major
> [1] "3"
>
> $minor
> [1] "5.1"
>
> $year
> [1] "2018"
>
> $month
> [1] "07"
>
> $day
> [1] "02"
>
> $`svn rev`
> [1] "74947"
>
> $language
> [1] "R"
>
> $version.string
> [1] "R version 3.5.1 (2018-07-02)"
>
> $nickname
> [1] "Feather Spray"
>
> --- R log ends ---
>
> I am not sure how to address this. Any suggestions will be great!
>
> Grazie,
>
> Al Nerdi
>
>        [[alternative HTML version deleted]]
>
>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

--
Michael
http://www.dewey.myzen.co.uk/home.html

	[[alternative HTML version deleted]]


From jdnewmil @ending from dcn@d@vi@@c@@u@  Fri Oct 12 21:50:03 2018
From: jdnewmil @ending from dcn@d@vi@@c@@u@ (Jeff Newmiller)
Date: Fri, 12 Oct 2018 12:50:03 -0700
Subject: [R] install issue with survey package?
In-Reply-To: <BM1PR01MB2577B588FE7592F8CC696E4EBBE20@BM1PR01MB2577.INDPRD01.PROD.OUTLOOK.COM>
References: <BM1PR01MB2577DED744E7A949873985B8BBE20@BM1PR01MB2577.INDPRD01.PROD.OUTLOOK.COM>,
 <0d6b2449-6547-4332-8405-c24a20f1f079@dewey.myzen.co.uk>
 <BM1PR01MB2577B588FE7592F8CC696E4EBBE20@BM1PR01MB2577.INDPRD01.PROD.OUTLOOK.COM>
Message-ID: <8392951B-1BFE-4575-B2DB-B71C359993C3@dcn.davis.ca.us>

I think that would be a mistake, since R itself works just fine there. Your error has to do with the location of your default user library, not the software or its base library.

If you set R_LIBS_USER to a directory without spaces you should be fine. I suspect you can use the 8.3 directory notation visible when you use DIR/x at the CMD command line to even refer to the default library location in your Documents directory if you want.

On October 12, 2018 9:46:09 AM PDT, Alexander Nervedi <alexnerdy at hotmail.com> wrote:
>Hi Michael,
>
>I think you are spot on. Haven't resolved the issue yet. Here is what i
>get:
>
>> utils:::menuInstallLocal()
>* installing *source* package 'survey' ...
>** package 'survey' successfully unpacked and MD5 sums checked
>** R
>** data
>** inst
>** preparing package for lazy loading
>** help
>*** installing help indices
>** building package indices
>** installing vignettes
>** testing if installed package can be loaded
>*** arch - i386
>Fatal error: cannot open file 'D:\Users\Al': No such file or directory
>
>*** arch - x64
>Fatal error: cannot open file 'D:\Users\Al': No such file or directory
>
>ERROR: loading failed for 'i386', 'x64'
>* removing 'D:/Users/Al Nerdi/Documents/R/win-library/3.3/survey'
>Warning messages:
>1: running command '"C:/PROGRA~1/R/R-33~1.1/bin/i386/R" CMD INSTALL -l
>"D:\Users\Al Nerdi\Documents\R\win-library\3.3"
>"D:/downloads/survey_3.34.tar.gz"' had status 1
>2: In install.packages(files[tarballs], .libPaths()[1L], repos = NULL, 
>:
>installation of package ?D:/downloads/survey_3.34.tar.gz? had non-zero
>exit status
>>
>
>I think i might have to reinstall R in the root directly (rather than
>under program files) so that there are no spaces in path names.
>
>Thanks for the pointer,
>
>best wishes,
>Alnerdi
>
>________________________________
>From: Michael Dewey <lists at dewey.myzen.co.uk>
>Sent: Friday, October 12, 2018 4:33 AM
>To: Alexander Nervedi; r-help at R-project.org
>Subject: Re: [R] install issue with survey package?
>
>Dear Al
>
>It looks like the problem may be the embedded space in Al Nerdi
>
>What happens if you manually download the tar.gz file, put it somewhere
>convenient and then from the commend line run
>
>R CMD INSTALL survey_3.34.tar.gz
>
>You will need to make sure R is on your path first
>
>Michael
>
>On 12/10/2018 09:31, Alexander Nervedi wrote:
>> Have been trying to run a few packages with dependency on the survey
>package (e.g. twang) and have run into trouble that I am not sure how
>to resolve. Any help would be appreciated, the code (and error
>messages) are below:
>>
>> --- R log begins ---
>>> install.packages("survey")
>> Installing package into ?D:/Users/Al
>Nerdi/Documents/R/win-library/3.5?
>> (as ?lib? is unspecified)
>>
>>    There is a binary version available but the source version is
>later:
>>         binary source needs_compilation
>> survey 3.33-2   3.34             FALSE
>>
>> installing the source package ?survey?
>>
>> trying URL 'https://cran.rstudio.com/src/contrib/survey_3.34.tar.gz'
>> Content type 'application/x-gzip' length 1476949 bytes (1.4 MB)
>> downloaded 1.4 MB
>>
>> Warning: invalid package 'D:\Users\Al'
>> Warning: invalid package
>'Nerdi\AppData\Local\Temp\RtmpU3AmrY/downloaded_packages/survey_3.34.tar.gz'
>> Error: ERROR: no packages specified
>> In R CMD INSTALL
>> Warning in install.packages :
>>    installation of package ?survey? had non-zero exit status
>>
>> The downloaded source packages are in
>> ?D:\Users\Al Nerdi\AppData\Local\Temp\RtmpU3AmrY\downloaded_packages?
>>
>>> install.packages("twang")
>> Installing package into ?D:/Users/Al
>Nerdi/Documents/R/win-library/3.5?
>> (as ?lib? is unspecified)
>> also installing the dependencies ?gbm?, ?survey?
>>
>>
>>    There is a binary version available but the source version is
>later:
>>         binary source needs_compilation
>> survey 3.33-2   3.34             FALSE
>>
>> trying URL
>'https://cran.rstudio.com/bin/windows/contrib/3.5/gbm_2.1.4.zip'
>> Content type 'application/zip' length 1094087 bytes (1.0 MB)
>> downloaded 1.0 MB
>>
>> trying URL
>'https://cran.rstudio.com/bin/windows/contrib/3.5/twang_1.5.zip'
>> Content type 'application/zip' length 1516991 bytes (1.4 MB)
>> downloaded 1.4 MB
>>
>> package ?gbm? successfully unpacked and MD5 sums checked
>> package ?twang? successfully unpacked and MD5 sums checked
>>
>> The downloaded binary packages are in
>> D:\Users\Al Nerdi\AppData\Local\Temp\RtmpU3AmrY\downloaded_packages
>> installing the source package ?survey?
>>
>> trying URL 'https://cran.rstudio.com/src/contrib/survey_3.34.tar.gz'
>> Content type 'application/x-gzip' length 1476949 bytes (1.4 MB)
>> downloaded 1.4 MB
>>
>> Warning: invalid package 'D:\Users\Al'
>> Warning: invalid package
>'Nerdi\AppData\Local\Temp\RtmpU3AmrY/downloaded_packages/survey_3.34.tar.gz'
>> Error: ERROR: no packages specified
>> In R CMD INSTALL
>> Warning in install.packages :
>>    installation of package ?survey? had non-zero exit status
>>
>> The downloaded source packages are in
>> ?D:\Users\Al Nerdi\AppData\Local\Temp\RtmpU3AmrY\downloaded_packages?
>>> library(twang)
>> Loading required package: gbm
>> Loaded gbm 2.1.4
>> Error: package ?survey? required by ?twang? could not be found
>>
>>> R.Version()
>> $`platform`
>> [1] "x86_64-w64-mingw32"
>>
>> $arch
>> [1] "x86_64"
>>
>> $os
>> [1] "mingw32"
>>
>> $system
>> [1] "x86_64, mingw32"
>>
>> $status
>> [1] ""
>>
>> $major
>> [1] "3"
>>
>> $minor
>> [1] "5.1"
>>
>> $year
>> [1] "2018"
>>
>> $month
>> [1] "07"
>>
>> $day
>> [1] "02"
>>
>> $`svn rev`
>> [1] "74947"
>>
>> $language
>> [1] "R"
>>
>> $version.string
>> [1] "R version 3.5.1 (2018-07-02)"
>>
>> $nickname
>> [1] "Feather Spray"
>>
>> --- R log ends ---
>>
>> I am not sure how to address this. Any suggestions will be great!
>>
>> Grazie,
>>
>> Al Nerdi
>>
>>        [[alternative HTML version deleted]]
>>
>>
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>--
>Michael
>http://www.dewey.myzen.co.uk/home.html
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From wdunl@p @ending from tibco@com  Sat Oct 13 00:32:00 2018
From: wdunl@p @ending from tibco@com (William Dunlap)
Date: Fri, 12 Oct 2018 15:32:00 -0700
Subject: [R] readBin with connection of unknown compression type
Message-ID: <CAF8bMcbufYt1FRWF=rFGm9AKjgU=0g4ahF0QLhdoL+bhYSD2Og@mail.gmail.com>

I would like to use readBin to read parts of a compressed binary file whose
compression type is not known (e.g, a *.RData file, which may be compressed
with gz, xz, or bz compression or not compressed at all).

If I use
    con <- file("theFile", "r")
to create the connection then the compression type is detected;
summary(con)$class will give the compression type (or "file" if no
compression type is recognized).

However, I cannot use that connection in readBin because uncompressed data
that con will produce is considered text, not binary.  E.g. with the files
produced with the code in the postscript I get

> con <- file(df["bz", "binaryFile"], "r")
> dput(summary(con))
list(description =
"C:\\Users\\wdunlap\\AppData\\Local\\Temp\\RtmpAlyXT6\\file472c73e710cd/
binary.bz",
    class = "bzfile", mode = "r", text = "text", opened = "opened",
    `can read` = "yes", `can write` = "no")
> readBin(con, what="raw", n=8)
Error in readBin(con, what = "raw", n = 8) :
  can only read from a binary connection

I can read compressed text files with scan(file(.., "r")) and I don't have
to tell it what sort of compression was used:
> con <- file(df["bz", "textFile"], "r")
> scan(con, what="integer", n=4)
Read 4 items
[1] "2" "3" "5" "7"

I can read binary files with unknown compression by saving the class of the
connection returned by file("r"), mapping that to one of file, bzfile,
xzfile, or gzfile, and reopening the compressed file with "rb".  E.g.,

myBinaryFile <- function(filename) {
    con <- file(filename, "r")
    class <- summary(con)$class
    close(con)
    # rely on class of a connection also being the name of a connection
creator
    con <- getFunction(class)(filename, "rb")
    con
}
> lapply(bn(df$binaryFile), FUN=function(f) { con <- myBinaryFile(f) ;
on.exit(close(con)) ; tryCatch(readBin(con, what="raw",n=12),
error=function(e)conditionMessage(e))})
$`binary.gz`
 [1] 02 00 00 00 03 00 00 00 05 00 00 00

$binary.bz
 [1] 02 00 00 00 03 00 00 00 05 00 00 00

$binary.xz
 [1] 02 00 00 00 03 00 00 00 05 00 00 00

$binary.uncompressed
 [1] 02 00 00 00 03 00 00 00 05 00 00 00

Is this repeated opening of the file required to read binary files of
unknown compression type, or did I miss a way to make readBin() with just
one call to a connection-creating function?

Bill Dunlap
TIBCO Software
wdunlap tibco.com

Code to produce compressed binary and text files:
    tdata <- as.integer(c(2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41,
43, 47, 53,
        59, 61, 67, 71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127,
131, 137))
    dir.create(tdir <- tempfile())
    bn <- function(filename) structure(filename, names=basename(filename))
    df <- data.frame(conMaker = I(list(gz = gzfile, bz = bzfile, xz =
xzfile, uncompressed = file)))
    df$binaryFile <- vapply(rownames(df), FUN.VALUE=NA_character_,
FUN=function(nm) {
        con <- df[[nm, "conMaker"]]( file <- file.path(tdir, paste(sep=".",
"binary", nm)), "wb")
        on.exit(close(con))
        writeBin(tdata, con)
        file
    })
    df$textFile <- vapply(rownames(df), FUN.VALUE=NA_character_,
FUN=function(nm) {
        con <- df[[nm, "conMaker"]]( file <- file.path(tdir, paste(sep=".",
"text", nm)), "wt")
        on.exit(close(con))
        cat(tdata, sep="\n", file=con)
        file
    })

	[[alternative HTML version deleted]]


From federico@c@lboli @ending from kuleuven@be  Sat Oct 13 12:13:29 2018
From: federico@c@lboli @ending from kuleuven@be (Federico Calboli)
Date: Sat, 13 Oct 2018 10:13:29 +0000
Subject: [R] keeping github packages up to date
In-Reply-To: <99CDC2BA-A667-4D4A-A046-7A81160DA277@dcn.davis.ca.us>
References: <FE0C85C4-7749-4545-8A91-3C8B1DAD0A0B@kuleuven.be>
 <99CDC2BA-A667-4D4A-A046-7A81160DA277@dcn.davis.ca.us>
Message-ID: <63812025-B272-40D5-B209-E63C5C5CEE64@kuleuven.be>

On 12 Oct 2018, at 17:32, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
> 
> Reinstall the updated versions however you originally did. The "obstacles" imposed by CRAN that cause package developers to forgo sharing there came about to confirm documentation, cross-platform compatibility and dependencies. With no referee enforcing such care in the environments you are pulling from, you cannot expect automated dependency management to work. You are riding a mustang in the Wild West... so have fun while it lasts... eventually bit-rot will break your library unless you freeze it (use packrat and keep old versions of R?).

I agree on all accounts ? there is a thread here someplace where I expressed my displeasure at the fact people publish papers making a big deal of the fact they have github packages when it is obvious this is just a quick and dirty approach that creates as many issues (in terms of software management) that it might fix (in terms of whatever the code does). 

Unfortunately some developers only release on github, or do not submit a new version to CRAN with all the bugfixes they put on github.  An unintended consequence of devtools.    

Cheers

F



> 
> On October 12, 2018 8:00:11 AM PDT, Federico Calboli <federico.calboli at kuleuven.be> wrote:
>> Hi all,
>> 
>> more and more people (sadly) are putting stuff on github, with either
>> no CRAN upload or an package.  So I am stuck with using devtools and
>> install_github.
>> 
>> I know how to keep stuff from CRAN updated ? how do I do the same for
>> github stuff?
>> 
>> Cheers
>> 
>> F
>> 
>> 
>> --
>> Federico Calboli
>> LBEG - Laboratory of Biodiversity and Evolutionary Genomics
>> Charles Deberiotstraat 32 box 2439
>> 3000 Leuven
>> +32 16 32 87 67
>> 
>> 
>> 
>> 
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> -- 
> Sent from my phone. Please excuse my brevity.

--
Federico Calboli
LBEG - Laboratory of Biodiversity and Evolutionary Genomics
Charles Deberiotstraat 32 box 2439
3000 Leuven
+32 16 32 87 67






From mikorym @ending from protonm@il@com  Sat Oct 13 22:16:46 2018
From: mikorym @ending from protonm@il@com (mikorym)
Date: Sat, 13 Oct 2018 20:16:46 +0000
Subject: [R] Wavelet Package for Time Series
Message-ID: <JTfbinwIBd5z6_pmJwVN6JZC0xnUFqcYlGGd6Js_6CFcSxSv4hXsOt0leTep-Q3YUBc3_RRZs1JJTmkUFT7withYOPntbbr52Zjh7TH-wuA=@protonmail.com>

Hi R-help

Are there any R users that can tell me which of the wavelet packages are the "best" to use? By this I mean ones that are being maintained, or e.g., work well with ggplot2 or otherwise have specific advantages to use.

I have seen for example that WaveThresh has an accompanying book.

In terms of being up to date, however, it seems like python may be a better option. Although, sometimes more recent does not mean better.

My first use case would be to model time series data.

Thanks you in advance,
Phillip


From bgunter@4567 @ending from gm@il@com  Sat Oct 13 22:52:33 2018
From: bgunter@4567 @ending from gm@il@com (Bert Gunter)
Date: Sat, 13 Oct 2018 13:52:33 -0700
Subject: [R] Wavelet Package for Time Series
In-Reply-To: <JTfbinwIBd5z6_pmJwVN6JZC0xnUFqcYlGGd6Js_6CFcSxSv4hXsOt0leTep-Q3YUBc3_RRZs1JJTmkUFT7withYOPntbbr52Zjh7TH-wuA=@protonmail.com>
References: <JTfbinwIBd5z6_pmJwVN6JZC0xnUFqcYlGGd6Js_6CFcSxSv4hXsOt0leTep-Q3YUBc3_RRZs1JJTmkUFT7withYOPntbbr52Zjh7TH-wuA=@protonmail.com>
Message-ID: <CAGxFJbTCd=V7vNiyj2rK6Z=MhozJvPUg5kd9HRaEqB_imAT8Gw@mail.gmail.com>

I cannot provide any specific info, but as a matter of policy, packages on
CRAN *must* meet their required maintenance standards (compatibility with
current R version, run on different OS's, etc.)  or they are removed from
CRAN. This is not necessarily so for packages on other repos, e.g. github.

Cheers,
Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sat, Oct 13, 2018 at 1:17 PM mikorym via R-help <r-help at r-project.org>
wrote:

> Hi R-help
>
> Are there any R users that can tell me which of the wavelet packages are
> the "best" to use? By this I mean ones that are being maintained, or e.g.,
> work well with ggplot2 or otherwise have specific advantages to use.
>
> I have seen for example that WaveThresh has an accompanying book.
>
> In terms of being up to date, however, it seems like python may be a
> better option. Although, sometimes more recent does not mean better.
>
> My first use case would be to model time series data.
>
> Thanks you in advance,
> Phillip
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewmil @ending from dcn@d@vi@@c@@u@  Sun Oct 14 02:26:46 2018
From: jdnewmil @ending from dcn@d@vi@@c@@u@ (Jeff Newmiller)
Date: Sat, 13 Oct 2018 17:26:46 -0700
Subject: [R] Wavelet Package for Time Series
In-Reply-To: <JTfbinwIBd5z6_pmJwVN6JZC0xnUFqcYlGGd6Js_6CFcSxSv4hXsOt0leTep-Q3YUBc3_RRZs1JJTmkUFT7withYOPntbbr52Zjh7TH-wuA=@protonmail.com>
References: <JTfbinwIBd5z6_pmJwVN6JZC0xnUFqcYlGGd6Js_6CFcSxSv4hXsOt0leTep-Q3YUBc3_RRZs1JJTmkUFT7withYOPntbbr52Zjh7TH-wuA=@protonmail.com>
Message-ID: <E75C348F-3850-4A0A-981A-40BA6A20262A@dcn.davis.ca.us>

Any question about "best" implies an optimization function that will almost certainly vary depending on what you are interested in... please avoid asking such questions.

You probably ought to peruse the CRAN time series Task View [1] and try out some options.

[1] https://cran.r-project.org/web/views/TimeSeries.html

On October 13, 2018 1:16:46 PM PDT, mikorym via R-help <r-help at r-project.org> wrote:
>Hi R-help
>
>Are there any R users that can tell me which of the wavelet packages
>are the "best" to use? By this I mean ones that are being maintained,
>or e.g., work well with ggplot2 or otherwise have specific advantages
>to use.
>
>I have seen for example that WaveThresh has an accompanying book.
>
>In terms of being up to date, however, it seems like python may be a
>better option. Although, sometimes more recent does not mean better.
>
>My first use case would be to model time series data.
>
>Thanks you in advance,
>Phillip
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From r@turner @ending from @uckl@nd@@c@nz  Sun Oct 14 22:11:45 2018
From: r@turner @ending from @uckl@nd@@c@nz (Rolf Turner)
Date: Mon, 15 Oct 2018 09:11:45 +1300
Subject: [R] [FORGED] Re:  Wavelet Package for Time Series
In-Reply-To: <E75C348F-3850-4A0A-981A-40BA6A20262A@dcn.davis.ca.us>
References: <JTfbinwIBd5z6_pmJwVN6JZC0xnUFqcYlGGd6Js_6CFcSxSv4hXsOt0leTep-Q3YUBc3_RRZs1JJTmkUFT7withYOPntbbr52Zjh7TH-wuA=@protonmail.com>
 <E75C348F-3850-4A0A-981A-40BA6A20262A@dcn.davis.ca.us>
Message-ID: <41a767b5-c149-309c-72fd-ecd118392ce7@auckland.ac.nz>


On 10/14/2018 01:26 PM, Jeff Newmiller wrote:

> Any question about "best" implies an optimization function that will
> almost certainly vary depending on what you are interested in ...
> please avoid asking such questions.

Fortune nomination.

cheers,

Rolf

-- 
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From reichm@nj @ending from @bcglob@l@net  Mon Oct 15 03:45:17 2018
From: reichm@nj @ending from @bcglob@l@net (Jeff Reichman)
Date: Sun, 14 Oct 2018 20:45:17 -0500
Subject: [R] Scientific Notation
Message-ID: <000001d46428$bb960eb0$32c22c10$@sbcglobal.net>

R Forum

Is there a way to tell R to not import numbers as scientific notation
(read.csv).  So that 1619052826499 will not be imported as 1.619053e+12.

Jeff Reichman


From dc@rl@on @ending from t@mu@edu  Mon Oct 15 03:58:05 2018
From: dc@rl@on @ending from t@mu@edu (David L Carlson)
Date: Mon, 15 Oct 2018 01:58:05 +0000
Subject: [R] Scientific Notation
In-Reply-To: <000001d46428$bb960eb0$32c22c10$@sbcglobal.net>
References: <000001d46428$bb960eb0$32c22c10$@sbcglobal.net>
Message-ID: <00e75708579e40c78b70fd274d0266df@tamu.edu>

You probably need to read up on the scipen= argument in ?options. What is displayed at the console is not what is stored:


> x <- 1619052826499
> print(x)
[1] 1.619053e+12
> dput(x)
1619052826499
> options(scipen=10)
> print(x)
[1] 1619052826499

-------------------------

David L Carlson

Anthropology Department

Texas A&M University

________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of Jeff Reichman <reichmanj at sbcglobal.net>
Sent: Sunday, October 14, 2018 8:45:17 PM
To: r-help at r-project.org
Subject: [R] Scientific Notation

R Forum

Is there a way to tell R to not import numbers as scientific notation
(read.csv).  So that 1619052826499 will not be imported as 1.619053e+12.

Jeff Reichman

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From reichm@nj @ending from @bcglob@l@net  Mon Oct 15 04:13:01 2018
From: reichm@nj @ending from @bcglob@l@net (Jeff Reichman)
Date: Sun, 14 Oct 2018 21:13:01 -0500
Subject: [R] limit bar graph output
Message-ID: <000301d4642c$9a4181f0$cec485d0$@sbcglobal.net>

R-Help Forum

I'm using the following code to reorder (from highest to lowest) my miRNA
counts.  But there are 500 plus and I only need the first (say) 15-20.  How
do I limit ggplot to only the first 20 miRNA counts

ggplot(data = corr.m, aes(x = reorder(miRNA, -value), y = value, fill =
variable)) + 
  geom_bar(stat = "identity")

Jeff


From jdnewmil @ending from dcn@d@vi@@c@@u@  Mon Oct 15 04:16:16 2018
From: jdnewmil @ending from dcn@d@vi@@c@@u@ (Jeff Newmiller)
Date: Sun, 14 Oct 2018 19:16:16 -0700
Subject: [R] Scientific Notation
In-Reply-To: <00e75708579e40c78b70fd274d0266df@tamu.edu>
References: <000001d46428$bb960eb0$32c22c10$@sbcglobal.net>
 <00e75708579e40c78b70fd274d0266df@tamu.edu>
Message-ID: <B016E5AD-5ADA-476B-A9E5-0BCB58A78D52@dcn.davis.ca.us>

While the OP should study up on what numeric values are, context may determine that a different storage mode be used. For example, if the values are intrinsically integers and meet the appropriate magnitude requirements, importing as integer may make sense. Or, if these are identifiers like serial numbers it may make sense to import as character data. To implement those constraints, read up on the colClasses argument to read.csv.

If these values really are intended for computation, the OP needs to differentiate how R prints values by default from how R can be made to export character representations of that internal data. In short, don't get picky about scientific notation until you export the data from R, because floating point data are ALWAYS in scientific notation (base 2) internally.

On October 14, 2018 6:58:05 PM PDT, David L Carlson <dcarlson at tamu.edu> wrote:
>You probably need to read up on the scipen= argument in ?options. What
>is displayed at the console is not what is stored:
>
>
>> x <- 1619052826499
>> print(x)
>[1] 1.619053e+12
>> dput(x)
>1619052826499
>> options(scipen=10)
>> print(x)
>[1] 1619052826499
>
>-------------------------
>
>David L Carlson
>
>Anthropology Department
>
>Texas A&M University
>
>________________________________
>From: R-help <r-help-bounces at r-project.org> on behalf of Jeff Reichman
><reichmanj at sbcglobal.net>
>Sent: Sunday, October 14, 2018 8:45:17 PM
>To: r-help at r-project.org
>Subject: [R] Scientific Notation
>
>R Forum
>
>Is there a way to tell R to not import numbers as scientific notation
>(read.csv).  So that 1619052826499 will not be imported as
>1.619053e+12.
>
>Jeff Reichman
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From reichm@nj @ending from @bcglob@l@net  Mon Oct 15 04:19:34 2018
From: reichm@nj @ending from @bcglob@l@net (Jeff Reichman)
Date: Sun, 14 Oct 2018 21:19:34 -0500
Subject: [R] Scientific Notation
In-Reply-To: <00e75708579e40c78b70fd274d0266df@tamu.edu>
References: <000001d46428$bb960eb0$32c22c10$@sbcglobal.net>
 <00e75708579e40c78b70fd274d0266df@tamu.edu>
Message-ID: <000401d4642d$84712320$8d536960$@sbcglobal.net>

Mr. Carlson

 

Well that was easy enough. Thank you.  

Options -
https://stat.ethz.ch/R-manual/R-devel/library/base/html/options.html

 

Jeff

 

From: David L Carlson <dcarlson at tamu.edu> 
Sent: Sunday, October 14, 2018 8:58 PM
To: r-help at r-project.org; reichmanj at sbcglobal.net
Subject: Re: [R] Scientific Notation

 

You probably need to read up on the scipen= argument in ?options. What is
displayed at the console is not what is stored:

 

> x <- 1619052826499

> print(x)

[1] 1.619053e+12

> dput(x)

1619052826499

> options(scipen=10)

> print(x)

[1] 1619052826499

 

------------------------- 

David L Carlson

Anthropology Department

Texas A&M University

  _____  

From: R-help <r-help-bounces at r-project.org
<mailto:r-help-bounces at r-project.org> > on behalf of Jeff Reichman
<reichmanj at sbcglobalnet>
Sent: Sunday, October 14, 2018 8:45:17 PM
To: r-help at r-project.org <mailto:r-help at r-project.org> 
Subject: [R] Scientific Notation 

 

R Forum

Is there a way to tell R to not import numbers as scientific notation
(read.csv).  So that 1619052826499 will not be imported as 1.619053e+12.

Jeff Reichman

______________________________________________
R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To
UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From bgunter@4567 @ending from gm@il@com  Mon Oct 15 05:51:29 2018
From: bgunter@4567 @ending from gm@il@com (Bert Gunter)
Date: Sun, 14 Oct 2018 20:51:29 -0700
Subject: [R] limit bar graph output
In-Reply-To: <000301d4642c$9a4181f0$cec485d0$@sbcglobal.net>
References: <000301d4642c$9a4181f0$cec485d0$@sbcglobal.net>
Message-ID: <CAGxFJbTZWWKbR6=RUMsC4kqnwyny9AfPyeX_mvn7ydkMHf=psQ@mail.gmail.com>

If I understand correctly, just subset your sorted data.

e.g. :

x <- runif(50)
##  50 unsorted values

sort(x, dec = TRUE)[1:10]
## the 10 biggest


-- Bert



Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sun, Oct 14, 2018 at 7:13 PM Jeff Reichman <reichmanj at sbcglobal.net>
wrote:

> R-Help Forum
>
> I'm using the following code to reorder (from highest to lowest) my miRNA
> counts.  But there are 500 plus and I only need the first (say) 15-20.  How
> do I limit ggplot to only the first 20 miRNA counts
>
> ggplot(data = corr.m, aes(x = reorder(miRNA, -value), y = value, fill =
> variable)) +
>   geom_bar(stat = "identity")
>
> Jeff
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewmil @ending from dcn@d@vi@@c@@u@  Mon Oct 15 07:50:35 2018
From: jdnewmil @ending from dcn@d@vi@@c@@u@ (Jeff Newmiller)
Date: Sun, 14 Oct 2018 22:50:35 -0700
Subject: [R] limit bar graph output
In-Reply-To: <CAGxFJbTZWWKbR6=RUMsC4kqnwyny9AfPyeX_mvn7ydkMHf=psQ@mail.gmail.com>
References: <000301d4642c$9a4181f0$cec485d0$@sbcglobal.net>
 <CAGxFJbTZWWKbR6=RUMsC4kqnwyny9AfPyeX_mvn7ydkMHf=psQ@mail.gmail.com>
Message-ID: <C9A24E9F-90A8-4CD7-A40A-2E19D7C3FC44@dcn.davis.ca.us>

A reproducible example would help here (you cannot assume we know what type "miRNA" is) but guessing from the use of "reorder" I suspect it is a factor. In which case after you subset you will need to use the droplevels function to remove the unused levels, and then plot that prepared data.

On October 14, 2018 8:51:29 PM PDT, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>If I understand correctly, just subset your sorted data.
>
>e.g. :
>
>x <- runif(50)
>##  50 unsorted values
>
>sort(x, dec = TRUE)[1:10]
>## the 10 biggest
>
>
>-- Bert
>
>
>
>Bert Gunter
>
>"The trouble with having an open mind is that people keep coming along
>and
>sticking things into it."
>-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
>On Sun, Oct 14, 2018 at 7:13 PM Jeff Reichman <reichmanj at sbcglobal.net>
>wrote:
>
>> R-Help Forum
>>
>> I'm using the following code to reorder (from highest to lowest) my
>miRNA
>> counts.  But there are 500 plus and I only need the first (say)
>15-20.  How
>> do I limit ggplot to only the first 20 miRNA counts
>>
>> ggplot(data = corr.m, aes(x = reorder(miRNA, -value), y = value, fill
>=
>> variable)) +
>>   geom_bar(stat = "identity")
>>
>> Jeff
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From jfox @ending from mcm@@ter@c@  Mon Oct 15 21:34:35 2018
From: jfox @ending from mcm@@ter@c@ (Fox, John)
Date: Mon, 15 Oct 2018 19:34:35 +0000
Subject: [R] new edition of An R Companion to Applied Regression
Message-ID: <ACD1644AA6C67E4FBD0C350625508EC8368F0B93@FHSDB2D11-2.csu.mcmaster.ca>

Dear r-help list members,

Sandy Weisberg and I would like to announce a new (third) edition of our book An R Companion to Applied Regression, which has recently been published by Sage Publications. The book provides a broad introduction to R in the general context of applied regression analysis, including linear models, generalized linear models, and, new to the third edition, mixed-effects models.

The R Companion is associated with two widely used CRAN packages, the car and effects packages. In anticipation of the new edition of the R Companion we contributed substantially revised versions of these packages to CRAN: version 3.0-x of the car package and version 4.0-x of the effects package.

More information about the book, including a variety of on-line resources (chapter R scripts, on-line appendices, etc.), is available at <https://tinyurl.com/carbook>.

Best,
 John

-----------------------------------------------------------------
John Fox
Professor Emeritus
McMaster University
Hamilton, Ontario, Canada
Web: https://socialsciences.mcmaster.ca/jfox/


From reichm@nj @ending from @bcglob@l@net  Mon Oct 15 23:28:11 2018
From: reichm@nj @ending from @bcglob@l@net (Jeff Reichman)
Date: Mon, 15 Oct 2018 16:28:11 -0500
Subject: [R] limit bar graph output
In-Reply-To: <CAGxFJbTZWWKbR6=RUMsC4kqnwyny9AfPyeX_mvn7ydkMHf=psQ@mail.gmail.com>
References: <000301d4642c$9a4181f0$cec485d0$@sbcglobal.net>
 <CAGxFJbTZWWKbR6=RUMsC4kqnwyny9AfPyeX_mvn7ydkMHf=psQ@mail.gmail.com>
Message-ID: <001f01d464cd$f987d910$ec978b30$@sbcglobal.net>

Bert 

Jeff

 

I just resorted and took the top 30 and then reordered again in the geom_bar function ? below

 

ggplot(data=st.cnt)+

  geom_bar(aes(x=reorder(CourseName, -n), y=n),fill = "dark blue", stat="identity")+

  theme(axis.text.x = element_text(angle = 60, hjust = 1))

 

Jeff

 

From: Bert Gunter <bgunter.4567 at gmail.com> 
Sent: Sunday, October 14, 2018 10:51 PM
To: reichmanj at sbcglobal.net
Cc: R-help <r-help at r-project.org>
Subject: Re: [R] limit bar graph output

 

If I understand correctly, just subset your sorted data.

 

e.g. :

 

x <- runif(50)

##  50 unsorted values

 

sort(x, dec = TRUE)[1:10]  

## the 10 biggest

 

 

-- Bert

 

 




Bert Gunter

"The trouble with having an open mind is that people keep coming along and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

 

 

On Sun, Oct 14, 2018 at 7:13 PM Jeff Reichman <reichmanj at sbcglobal.net <mailto:reichmanj at sbcglobal.net> > wrote:

R-Help Forum

I'm using the following code to reorder (from highest to lowest) my miRNA
counts.  But there are 500 plus and I only need the first (say) 15-20.  How
do I limit ggplot to only the first 20 miRNA counts

ggplot(data = corr.m, aes(x = reorder(miRNA, -value), y = value, fill =
variable)) + 
  geom_bar(stat = "identity")

Jeff

______________________________________________
R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From yhbrent @ending from y@hoo@com  Tue Oct 16 00:40:20 2018
From: yhbrent @ending from y@hoo@com (Brent)
Date: Mon, 15 Oct 2018 22:40:20 +0000 (UTC)
Subject: [R] RTools and previous Cygwin installation--conflict?
References: <1035735313.10407463.1539643220464.ref@mail.yahoo.com>
Message-ID: <1035735313.10407463.1539643220464@mail.yahoo.com>

I sent a query on this subject over 4 years ago.
    https://www.mail-archive.com/r-help at r-project.org/msg212269.html

I used to use Duncan Murdoch's suggestion to install only cygwin 32 bit and then put RTools first in my Windows path, so that its versions of cygwin commands would get pick up first.
    https://www.mail-archive.com/r-help at r-project.org/msg212281.html

That approach, however, fails as of RTools 3.5, since RTools switched from cygwin commands to msys2.
    https://cran.r-project.org/bin/windows/Rtools/Rtools.txt
The mysys commands are incompatible with cygwin; you will get strange errors in cygwin if it tries to use msys2 commands.

This forced me to reconsider this problem, and I think that I came up with a much better approach that I want to share for the benefit of others.

Gabor Grothendieck had already suggested using a DOS batch file to temporarily alter the PATH env var "to R and to Rtools only when R is being used in order to avoid conflicts"
    https://www.mail-archive.com/r-help at r-project.org/msg212275.html

My solution is similar, except that instead of doing this in a DOS batch file, I do it as the first action within R itself.

In particular, I edited R .Rprofile file so that its
    .First
function calls a new function
    add_RTools_toPATH()

That function is:
    # Modifies the PATH environmental variable to have the path to the RTools bin directory as its first element.
    # This change only affects the current R session (and any processes it spawns?); it does not permanently alter the Windows system env var.
    add_RTools_toPATH = function() {
        # get the existing PATH env var's value:
        pathEnvVar = Sys.getenv("PATH")
        
        # check that it does not already have an Rtools element:
        if (grepl("Rtools", pathEnvVar, fixed = TRUE)) {
            stop("Your existing Windows PATH env var (printed below) already contains the substring \"Rtools\", which is unexpected:", "\n", pathEnvVar)
        }
        
        # add C:\Rtools\bin to the front of PATH:
        pathNew = paste( "C:\\Rtools\\bin", Sys.getenv("PATH"), sep = ";" )
        Sys.setenv(PATH = pathNew)
    }


This new solution allows me to use whatever version of cygwin I want (e.g. 64 bit) with no worries about collision as before.  It also lets me exactly control the PATH for my R sessions.

Here are some background links if you do not fully understand the above:
    https://stat.ethz.ch/R-manual/R-devel/library/base/html/Startup.html
    https://stat.ethz.ch/R-manual/R-devel/library/base/html/Sys.setenv.html
    https://stackoverflow.com/questions/24622725/how-to-set-path-on-windows-through-r-shell-command


From rb@er @ending from @t@u@edu  Tue Oct 16 03:32:17 2018
From: rb@er @ending from @t@u@edu (Robert Baer)
Date: Mon, 15 Oct 2018 20:32:17 -0500
Subject: [R] Finding unique terms
In-Reply-To: <CANTvJZKf7V4qxr87RsEvQc=nV3mpG+tmvy+8yC2tfjFdonaHFw@mail.gmail.com>
References: <CANTvJZKf7V4qxr87RsEvQc=nV3mpG+tmvy+8yC2tfjFdonaHFw@mail.gmail.com>
Message-ID: <ac548e31-0550-c5f5-f5b0-31b10ef91510@atsu.edu>


> Dear r-users,
>
> I have this data:
>
> structure(list(STUDENT_ID = structure(c(1L, 1L, 1L, 1L, 1L, 1L,
> 2L, 2L, 2L, 2L, 2L), .Label = c("AA15285", "AA15286"), class = "factor"),
>      COURSE_CODE = structure(c(1L, 2L, 5L, 6L, 7L, 8L, 2L, 3L,
>      4L, 5L, 6L), .Label = c("BAA1113", "BAA1322", "BAA2113",
>      "BAA2513", "BAA2713", "BAA2921", "BAA4273", "BAA4513"), class =
> "factor"),
>      PO1M = c(155.7, 48.9, 83.2, NA, NA, NA, 48.05, 68.4, 41.65,
>      82.35, NA), PO1T = c(180, 70, 100, NA, NA, NA, 70, 100, 60,
>      100, NA), PO2M = c(NA, NA, NA, 37, NA, NA, NA, NA, NA, NA,
>      41), PO2T = c(NA, NA, NA, 50, NA, NA, NA, NA, NA, NA, 50),
>      X = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), X.1 = c(NA,
>      NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names = c("STUDENT_ID",
> "COURSE_CODE", "PO1M", "PO1T", "PO2M", "PO2T", "X", "X.1"), class =
> "data.frame", row.names = c(NA,
> -11L))
>
> I want to combine the same Student ID and add up all the values for PO1M,
> PO1T,...,PO2T obtained by the same ID.
>
> How do I do that?
> Thank you for any help given

# load data

# Enter dataframe by hand
dat <- structure(list(STUDENT_ID = structure(c(1L, 1L, 1L, 1L, 1L, 1L,
2L, 2L, 2L, 2L, 2L), .Label = c("AA15285", "AA15286"), class = "factor"),
 ??? COURSE_CODE = structure(c(1L, 2L, 5L, 6L, 7L, 8L, 2L, 3L,
 ??? 4L, 5L, 6L), .Label = c("BAA1113", "BAA1322", "BAA2113",
 ??? "BAA2513", "BAA2713", "BAA2921", "BAA4273", "BAA4513"), class =
"factor"),
 ??? PO1M = c(155.7, 48.9, 83.2, NA, NA, NA, 48.05, 68.4, 41.65,
 ??? 82.35, NA), PO1T = c(180, 70, 100, NA, NA, NA, 70, 100, 60,
 ??? 100, NA), PO2M = c(NA, NA, NA, 37, NA, NA, NA, NA, NA, NA,
 ??? 41), PO2T = c(NA, NA, NA, 50, NA, NA, NA, NA, NA, NA, 50),
 ??? X = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), X.1 = c(NA,
 ??? NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names = c("STUDENT_ID",
"COURSE_CODE", "PO1M", "PO1T", "PO2M", "PO2T", "X", "X.1"), class =
"data.frame", row.names = c(NA,
-11L))

# Create sums by student ID

library(dplyr)
dat %>%
 ? group_by(STUDENT_ID) %>%
 ? summarize(sum.PO1M = sum(PO1M, na.rm = TRUE),
 ??????????? sum.PO1T = sum(PO1M, na.rm = TRUE),
 ??????????? sum.PO2M = sum(PO1M, na.rm = TRUE),
 ??????????? sum.PO2T = sum(PO1M, na.rm = TRUE))


From rb@er @ending from @t@u@edu  Tue Oct 16 03:41:12 2018
From: rb@er @ending from @t@u@edu (Robert Baer)
Date: Mon, 15 Oct 2018 20:41:12 -0500
Subject: [R] Finding unique terms
In-Reply-To: <CANTvJZKf7V4qxr87RsEvQc=nV3mpG+tmvy+8yC2tfjFdonaHFw@mail.gmail.com>
References: <CANTvJZKf7V4qxr87RsEvQc=nV3mpG+tmvy+8yC2tfjFdonaHFw@mail.gmail.com>
Message-ID: <3a5ca77c-289b-7e92-7f0c-bef1e567cf68@atsu.edu>



On 10/11/2018 5:12 PM, roslinazairimah zakaria wrote:
> Dear r-users,
>
> I have this data:
>
> structure(list(STUDENT_ID = structure(c(1L, 1L, 1L, 1L, 1L, 1L,
> 2L, 2L, 2L, 2L, 2L), .Label = c("AA15285", "AA15286"), class = "factor"),
>      COURSE_CODE = structure(c(1L, 2L, 5L, 6L, 7L, 8L, 2L, 3L,
>      4L, 5L, 6L), .Label = c("BAA1113", "BAA1322", "BAA2113",
>      "BAA2513", "BAA2713", "BAA2921", "BAA4273", "BAA4513"), class =
> "factor"),
>      PO1M = c(155.7, 48.9, 83.2, NA, NA, NA, 48.05, 68.4, 41.65,
>      82.35, NA), PO1T = c(180, 70, 100, NA, NA, NA, 70, 100, 60,
>      100, NA), PO2M = c(NA, NA, NA, 37, NA, NA, NA, NA, NA, NA,
>      41), PO2T = c(NA, NA, NA, 50, NA, NA, NA, NA, NA, NA, 50),
>      X = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), X.1 = c(NA,
>      NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names = c("STUDENT_ID",
> "COURSE_CODE", "PO1M", "PO1T", "PO2M", "PO2T", "X", "X.1"), class =
> "data.frame", row.names = c(NA,
> -11L))
>
> I want to combine the same Student ID and add up all the values for PO1M,
> PO1T,...,PO2T obtained by the same ID.
>
> How do I do that?
> Thank you for any help given.
>
oops!? Forgot to clean up after my cut and paste. Solution with dplyr 
looks like this:
# Create sums by student ID
library(dplyr)
dat %>%
 ? group_by(STUDENT_ID) %>%
 ? summarize(sum.PO1M = sum(PO1M, na.rm = TRUE),
 ??????????? sum.PO1T = sum(PO1T, na.rm = TRUE),
 ??????????? sum.PO2M = sum(PO2M, na.rm = TRUE),
 ??????????? sum.PO2T = sum(PO2T, na.rm = TRUE))


From n@th@n@f@p@r@on@ @ending from gm@il@com  Tue Oct 16 04:55:59 2018
From: n@th@n@f@p@r@on@ @ending from gm@il@com (Nathan Parsons)
Date: Mon, 15 Oct 2018 19:55:59 -0700
Subject: [R] Unlisting a nested dataset
Message-ID: <e20d1ef6-fb3d-4a9d-a774-0f4276e5b17b@Spark>

I?m attempting to do some content analysis on a few million tweets, but I can?t seem to get them cleaned correctly.

I?m trying to replicate the process outlined here:?https://stackoverflow.com/questions/46734501/opposite-of-unnest-tokens

My code:

tweets %>%
?unnest_tokens(word, text, token = 'tweets') %>%
?filter(!word %in% stop_words$word) %>%
?nest(word) %>%
?mutate(text = map(data, unlist),
? ? ? ? ???text = map_chr(text, paste, collapse = " ")) -> tweets

Unfortunately, I keep getting:

?Error in mutate_impl(.data, dots) :
?Evaluation error: cannot coerce type 'closure' to vector of type 'character?.

What am I doing wrong?

Here?s what the dataset looks like:

> glimpse(tweets)
Observations: 389,253
Variables: 12
$ status_id "x1047841705729306624", "x1046966595610927105", "x104709...
$ created_at "2018-10-04T13:31:45Z", "2018-10-02T03:34:22Z", "2018-10...
$ text "Technique is everything with olympic lifts ! @ Body By ...
$ lat 43.68359, 40.28412, 37.77066, 40.43139, 31.16889, 33.937...
$ lng -70.32841, -83.07859, -122.43598, -79.98069, -100.07689,...
$ county_name "Cumberland County", "Delaware County", "San Francisco C...
$ fips 23005, 39041, 6075, 42003, 48095, 6037, 6037, 55073, 482...
$ state_name "Maine", "Ohio", "California", "Pennsylvania", "Texas", ...
$ state_abb "ME", "OH", "CA", "PA", "TX", "CA", "CA", "WI", "TX", "A...
$ urban_level "Medium Metro", "Large Fringe Metro", "Large Central Met...
$ urban_code 3, 2, 1, 1, 6, 1, 1, 4, 1, 3, 2, 2, 1, 3, 6, 1, 1, 2, 3,...
$ population 277308, 184029, 830781, 1160433, 4160, 9509611, 9509611,...

--

Nate Parsons
Pronouns: He, Him, His
Graduate Teaching Assistant
Department of Sociology
Portland State University
Portland, Oregon

503-725-9025
503-725-3957 FAX

	[[alternative HTML version deleted]]


From bgunter@4567 @ending from gm@il@com  Tue Oct 16 05:04:10 2018
From: bgunter@4567 @ending from gm@il@com (Bert Gunter)
Date: Mon, 15 Oct 2018 20:04:10 -0700
Subject: [R] Finding unique terms
In-Reply-To: <3a5ca77c-289b-7e92-7f0c-bef1e567cf68@atsu.edu>
References: <CANTvJZKf7V4qxr87RsEvQc=nV3mpG+tmvy+8yC2tfjFdonaHFw@mail.gmail.com>
 <3a5ca77c-289b-7e92-7f0c-bef1e567cf68@atsu.edu>
Message-ID: <CAGxFJbRtVqY_pM+V8ywrFkwJqSszNnBNh=4sE7nV-rY0xpEVMQ@mail.gmail.com>

Here is a base R solution:
"dat" is the data frame as in Robert's solution.

> aggregate(dat[,3:6], by= dat[1], FUN = sum, na.rm = TRUE)
  STUDENT_ID   PO1M PO1T PO2M PO2T
1    AA15285 287.80  350   37   50
2    AA15286 240.45  330   41   50

Cheers,
Bert



Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Oct 15, 2018 at 6:42 PM Robert Baer <rbaer at atsu.edu> wrote:

>
>
> On 10/11/2018 5:12 PM, roslinazairimah zakaria wrote:
> > Dear r-users,
> >
> > I have this data:
> >
> > structure(list(STUDENT_ID = structure(c(1L, 1L, 1L, 1L, 1L, 1L,
> > 2L, 2L, 2L, 2L, 2L), .Label = c("AA15285", "AA15286"), class = "factor"),
> >      COURSE_CODE = structure(c(1L, 2L, 5L, 6L, 7L, 8L, 2L, 3L,
> >      4L, 5L, 6L), .Label = c("BAA1113", "BAA1322", "BAA2113",
> >      "BAA2513", "BAA2713", "BAA2921", "BAA4273", "BAA4513"), class =
> > "factor"),
> >      PO1M = c(155.7, 48.9, 83.2, NA, NA, NA, 48.05, 68.4, 41.65,
> >      82.35, NA), PO1T = c(180, 70, 100, NA, NA, NA, 70, 100, 60,
> >      100, NA), PO2M = c(NA, NA, NA, 37, NA, NA, NA, NA, NA, NA,
> >      41), PO2T = c(NA, NA, NA, 50, NA, NA, NA, NA, NA, NA, 50),
> >      X = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), X.1 = c(NA,
> >      NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names = c("STUDENT_ID",
> > "COURSE_CODE", "PO1M", "PO1T", "PO2M", "PO2T", "X", "X.1"), class =
> > "data.frame", row.names = c(NA,
> > -11L))
> >
> > I want to combine the same Student ID and add up all the values for PO1M,
> > PO1T,...,PO2T obtained by the same ID.
> >
> > How do I do that?
> > Thank you for any help given.
> >
> oops!  Forgot to clean up after my cut and paste. Solution with dplyr
> looks like this:
> # Create sums by student ID
> library(dplyr)
> dat %>%
>    group_by(STUDENT_ID) %>%
>    summarize(sum.PO1M = sum(PO1M, na.rm = TRUE),
>              sum.PO1T = sum(PO1T, na.rm = TRUE),
>              sum.PO2M = sum(PO2M, na.rm = TRUE),
>              sum.PO2T = sum(PO2T, na.rm = TRUE))
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @k@h@y_e4 @ending from hotm@il@com  Tue Oct 16 10:27:14 2018
From: @k@h@y_e4 @ending from hotm@il@com (akshay kulkarni)
Date: Tue, 16 Oct 2018 08:27:14 +0000
Subject: [R] inconsistency in pbmclapply...
Message-ID: <SL2P216MB0091CBFD1E02AD33EEEAE501C8FE0@SL2P216MB0091.KORP216.PROD.OUTLOOK.COM>

dear members,
                             I am using parallel processing with pbmclapply. below is the code. LYG1[[1]] got from pbmclapply is not the same as LYG1[[1]] got from direct application of auto.arima. what may be wrong?

              debug at <tmp>#20: LYG1 <- pbmclapply(LYGH, FUN = auto.arima, mc.cores = detectCores())
Browse[2]>
  |=========================================                   |  68%, ETA 00:21
debug at <tmp>#21: LYG2 <- pbmclapply(LYGH, FUN = ets, mc.cores = detectCores())
Browse[2]> LYG1[[1]]
[1] "Error in ts(x) : 'ts' object must have one or more observations\n"
attr(,"class")
[1] "try-error"
attr(,"condition")
<simpleError in ts(x): 'ts' object must have one or more observations>
Warning message:
In pbmclapply(LYGH, FUN = auto.arima, mc.cores = detectCores()) :
  scheduled cores encountered errors in user code
Browse[2]> LYGH[[1]]
 [1] 0.700000000 0.400000000 0.300000000 0.150000000 0.250000000 0.950000000
 [7] 1.000000000 0.300000000 0.650000000 0.200000000 0.600000000 0.100000000
[13] 0.001412873 1.550000000 0.150000000 0.300000000 0.450000000 0.350000000
[19] 0.150000000 2.350000000 0.250000000 0.100000000 3.700000000 3.950000000
[25] 3.050000000 0.900000000 0.400000000 1.050000000 1.100000000 1.950000000
[31] 2.000000000 0.650000000 0.700000000 0.250000000 5.250000000 0.800000000
[37] 0.001412873
Browse[2]> auto.arima(LYGH[[1]])
Series: LYGH[[1]]
ARIMA(0,1,0)

sigma^2 estimated as 2.303:  log likelihood=-66.1
AIC=134.2   AICc=134.31   BIC=135.78

very many thanks for your time and effort.....
yours sincerely,
AKSHAY M KULKARNI

	[[alternative HTML version deleted]]


From petr@pik@l @ending from prechez@@cz  Tue Oct 16 10:36:27 2018
From: petr@pik@l @ending from prechez@@cz (PIKAL Petr)
Date: Tue, 16 Oct 2018 08:36:27 +0000
Subject: [R] regexp mystery
Message-ID: <d92354b2dbce431189273a2ba75652de@SRVEXCHCM1301.precheza.cz>

Dear all

I have text file with lines like this.

> dput(x[9])
"PYedehYev:  300 s                    Z?va~?: 2.160 kg"
> dput(x[11])
"et odYezko: 3                     \fas odYezku:   15 s"

I am able to extract some numbers but others give me headache.

gsub("^.*[^:] (\\d+.\\d+).*$", "\\1", x[9])
works for 300

gsub("^.*[:] (\\d+.\\d+).*$", "\\1", x[9])
works for 2.160

gsub("^.*: (\\d+).*$", "\\1", x[11])
works for 3

but only after many attempts I found that
gsub("^.*[^:] (\\d+).*$", "\\1", x[11])
works for 15

Can somebody explain my why for line 11 second item requires almost equvalent regular expression as first item in line 9 and why just

gsub("^.*[:] (\\d+).*$", "\\1", x[11])

does not produce 15 but 3???

Cheers
Petr

Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information about processing and protection of business partner?s personal data are available on website: https://www.precheza.cz/en/personal-data-protection-principles/
D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any documents attached to it may be confidential and are subject to the legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/


From @k@h@y_e4 @ending from hotm@il@com  Tue Oct 16 10:51:50 2018
From: @k@h@y_e4 @ending from hotm@il@com (akshay kulkarni)
Date: Tue, 16 Oct 2018 08:51:50 +0000
Subject: [R] Fw: inconsistency in pbmclapply...
In-Reply-To: <SL2P216MB0091CBFD1E02AD33EEEAE501C8FE0@SL2P216MB0091.KORP216.PROD.OUTLOOK.COM>
References: <SL2P216MB0091CBFD1E02AD33EEEAE501C8FE0@SL2P216MB0091.KORP216.PROD.OUTLOOK.COM>
Message-ID: <SL2P216MB00917F6691FBFAB687D2071FC8FE0@SL2P216MB0091.KORP216.PROD.OUTLOOK.COM>


dear members,
                         however, "ts must have more than one observation" error is only found for the first entry of LYG1 ( LYG1[[20]], LYG1[[200]], LYG1[[1000]]..etc are all well defined....!
________________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of akshay kulkarni <akshay_e4 at hotmail.com>
Sent: Tuesday, October 16, 2018 1:57 PM
To: R help Mailing  list
Subject: [R] inconsistency in pbmclapply...

dear members,
                             I am using parallel processing with pbmclapply. below is the code. LYG1[[1]] got from pbmclapply is not the same as LYG1[[1]] got from direct application of auto.arima. what may be wrong?

              debug at <tmp>#20: LYG1 <- pbmclapply(LYGH, FUN = auto.arima, mc.cores = detectCores())
Browse[2]>
  |=========================================                   |  68%, ETA 00:21
debug at <tmp>#21: LYG2 <- pbmclapply(LYGH, FUN = ets, mc.cores = detectCores())
Browse[2]> LYG1[[1]]
[1] "Error in ts(x) : 'ts' object must have one or more observations\n"
attr(,"class")
[1] "try-error"
attr(,"condition")
<simpleError in ts(x): 'ts' object must have one or more observations>
Warning message:
In pbmclapply(LYGH, FUN = auto.arima, mc.cores = detectCores()) :
  scheduled cores encountered errors in user code
Browse[2]> LYGH[[1]]
 [1] 0.700000000 0.400000000 0.300000000 0.150000000 0.250000000 0.950000000
 [7] 1.000000000 0.300000000 0.650000000 0.200000000 0.600000000 0.100000000
[13] 0.001412873 1.550000000 0.150000000 0.300000000 0.450000000 0.350000000
[19] 0.150000000 2.350000000 0.250000000 0.100000000 3.700000000 3.950000000
[25] 3.050000000 0.900000000 0.400000000 1.050000000 1.100000000 1.950000000
[31] 2.000000000 0.650000000 0.700000000 0.250000000 5.250000000 0.800000000
[37] 0.001412873
Browse[2]> auto.arima(LYGH[[1]])
Series: LYGH[[1]]
ARIMA(0,1,0)

sigma^2 estimated as 2.303:  log likelihood=-66.1
AIC=134.2   AICc=134.31   BIC=135.78

very many thanks for your time and effort.....
yours sincerely,
AKSHAY M KULKARNI

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From krylov@r00t @ending from gm@il@com  Tue Oct 16 11:08:00 2018
From: krylov@r00t @ending from gm@il@com (Ivan Krylov)
Date: Tue, 16 Oct 2018 12:08:00 +0300
Subject: [R] regexp mystery
In-Reply-To: <d92354b2dbce431189273a2ba75652de@SRVEXCHCM1301.precheza.cz>
References: <d92354b2dbce431189273a2ba75652de@SRVEXCHCM1301.precheza.cz>
Message-ID: <20181016120801.7afdd6e2@Tarkus>

On Tue, 16 Oct 2018 08:36:27 +0000
PIKAL Petr <petr.pikal at precheza.cz> wrote:

> > dput(x[11])  
> "et odYezko: 3                     \fas odYezku:   15 s"

> gsub("^.*: (\\d+).*$", "\\1", x[11])
> works for 3

This regular expression only matches one space between the colon and
the number, but you have more than one of them before "15".

> gsub("^.*[^:] (\\d+).*$", "\\1", x[11])
> works for 15

Match succeeds because a space is not a colon:

 ^.* matches "et odYezko: 3                     \fas odYezku:  "
 [^:] matches space " "
 space " " matches another space " "
 finally, (\\d+) matches "15"
 and .*$ matches " s"

If you need just the numbers, you might have more success by extracting
matches directly with gregexpr and regmatches:

(
	function(s) regmatches(
		s,
		gregexpr("\\d+(\\.\\d+)?", s)
	)
)("et odYezko: 3                     \fas odYezku:   15 s")

[[1]]
[1] "3"  "15"

(I'm creating an anonymous function and evaluating it immediately
because I need to pass the same string to both gregexpr and regmatches.)

If you need to capture numbers appearing in a specific context, a
better regular expression suiting your needs might be

":\\s*(\\d+(?:\\.\\d+)?)"

(A colon, followed by optional whitespace, followed by a number to
capture, consisting of decimals followed by optional, non-captured dot
followed by decimals)

but I couldn't find a way to extract captures from repeated match by
using vanilla R pattern matching (it's either regexec which returns
captures for the first match or gregexpr which returns all matches but
without the captures). If you can load the stringr package, it's very
easy, though:

str_match_all(
	c(
		"PYedehYev:  300 s              Z?va~?: 2.160 kg",
		"et odYezko: 3               \fas odYezku:   15 s"
	),
	":\\s*(\\d+(?:\\.\\d+)?)"
)
[[1]]
     [,1]      [,2]   
[1,] ":  300"  "300"  
[2,] ": 2.160" "2.160"

[[2]]
     [,1]     [,2]
[1,] ": 3"    "3" 
[2,] ":   15" "15"

Column 2 of each list item contains the requested captures.

-- 
Best regards,
Ivan


From petr@pik@l @ending from prechez@@cz  Tue Oct 16 11:23:54 2018
From: petr@pik@l @ending from prechez@@cz (PIKAL Petr)
Date: Tue, 16 Oct 2018 09:23:54 +0000
Subject: [R] regexp mystery
In-Reply-To: <20181016120801.7afdd6e2@Tarkus>
References: <d92354b2dbce431189273a2ba75652de@SRVEXCHCM1301.precheza.cz>
 <20181016120801.7afdd6e2@Tarkus>
Message-ID: <7faadb5336b8491490ecf5a0a4cae979@SRVEXCHCM1301.precheza.cz>

Hi

Thanks a lot for your insightful answer. I will need to study it in detail, gregexpr and regexpr seems to be quite handy for what I need.

Cheers
Petr

> -----Original Message-----
> From: Ivan Krylov <krylov.r00t at gmail.com>
> Sent: Tuesday, October 16, 2018 11:08 AM
> To: PIKAL Petr <petr.pikal at precheza.cz>
> Cc: r-help at r-project.org
> Subject: Re: [R] regexp mystery
>
> On Tue, 16 Oct 2018 08:36:27 +0000
> PIKAL Petr <petr.pikal at precheza.cz> wrote:
>
> > > dput(x[11])
> > "et odYezko: 3                     \fas odYezku:   15 s"
>
> > gsub("^.*: (\\d+).*$", "\\1", x[11])
> > works for 3
>
> This regular expression only matches one space between the colon and the
> number, but you have more than one of them before "15".
>
> > gsub("^.*[^:] (\\d+).*$", "\\1", x[11]) works for 15
>
> Match succeeds because a space is not a colon:
>
>  ^.* matches "et odYezko: 3                     \fas odYezku:  "
>  [^:] matches space " "
>  space " " matches another space " "
>  finally, (\\d+) matches "15"
>  and .*$ matches " s"
>
> If you need just the numbers, you might have more success by extracting
> matches directly with gregexpr and regmatches:
>
> (
> function(s) regmatches(
> s,
> gregexpr("\\d+(\\.\\d+)?", s)
> )
> )("et odYezko: 3                     \fas odYezku:   15 s")
>
> [[1]]
> [1] "3"  "15"
>
> (I'm creating an anonymous function and evaluating it immediately because I
> need to pass the same string to both gregexpr and regmatches.)
>
> If you need to capture numbers appearing in a specific context, a better regular
> expression suiting your needs might be
>
> ":\\s*(\\d+(?:\\.\\d+)?)"
>
> (A colon, followed by optional whitespace, followed by a number to capture,
> consisting of decimals followed by optional, non-captured dot followed by
> decimals)
>
> but I couldn't find a way to extract captures from repeated match by using
> vanilla R pattern matching (it's either regexec which returns captures for the
> first match or gregexpr which returns all matches but without the captures). If
> you can load the stringr package, it's very easy, though:
>
> str_match_all(
> c(
> "PYedehYev:  300 s              Z?va~?: 2.160 kg",
> "et odYezko: 3               \fas odYezku:   15 s"
> ),
> ":\\s*(\\d+(?:\\.\\d+)?)"
> )
> [[1]]
>      [,1]      [,2]
> [1,] ":  300"  "300"
> [2,] ": 2.160" "2.160"
>
> [[2]]
>      [,1]     [,2]
> [1,] ": 3"    "3"
> [2,] ":   15" "15"
>
> Column 2 of each list item contains the requested captures.
>
> --
> Best regards,
> Ivan
Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information about processing and protection of business partner?s personal data are available on website: https://www.precheza.cz/en/personal-data-protection-principles/
D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any documents attached to it may be confidential and are subject to the legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/


From ro@lin@ump @ending from gm@il@com  Tue Oct 16 13:58:52 2018
From: ro@lin@ump @ending from gm@il@com (roslinazairimah zakaria)
Date: Tue, 16 Oct 2018 19:58:52 +0800
Subject: [R] Finding unique terms
In-Reply-To: <8194FCE8-B018-466D-8C05-B7927A180B98@dcn.davis.ca.us>
References: <CANTvJZKf7V4qxr87RsEvQc=nV3mpG+tmvy+8yC2tfjFdonaHFw@mail.gmail.com>
 <6a70a2f0-b2df-73a8-bf08-20ef2059dc49@kogentum.hu>
 <CANTvJZJ44mM8c6UHebXdipvvy=4JcrnE_GEZLtRxnXrV4TtHvA@mail.gmail.com>
 <8194FCE8-B018-466D-8C05-B7927A180B98@dcn.davis.ca.us>
Message-ID: <CANTvJZLxTQEGJnVnMwGmfL2AE7scDXHND=9_e=_=N+g9hRPBUA@mail.gmail.com>

Yes you are right, I want the sum. I wll change the formula accordingly.

On Fri, Oct 12, 2018 at 10:36 AM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> You said "add up"... so you did not mean to say that? Denes computed the
> mean...
>
> On October 11, 2018 3:56:23 PM PDT, roslinazairimah zakaria <
> roslinaump at gmail.com> wrote:
> >Hi Denes,
> >
> >It works perfectly as I want!
> >
> >Thanks a lot.
> >
> >On Fri, Oct 12, 2018 at 6:29 AM D?nes T?th <toth.denes at kogentum.hu>
> >wrote:
> >
> >>
> >>
> >> On 10/12/2018 12:12 AM, roslinazairimah zakaria wrote:
> >> > Dear r-users,
> >> >
> >> > I have this data:
> >> >
> >> > structure(list(STUDENT_ID = structure(c(1L, 1L, 1L, 1L, 1L, 1L,
> >> > 2L, 2L, 2L, 2L, 2L), .Label = c("AA15285", "AA15286"), class =
> >"factor"),
> >> >      COURSE_CODE = structure(c(1L, 2L, 5L, 6L, 7L, 8L, 2L, 3L,
> >> >      4L, 5L, 6L), .Label = c("BAA1113", "BAA1322", "BAA2113",
> >> >      "BAA2513", "BAA2713", "BAA2921", "BAA4273", "BAA4513"), class
> >=
> >> > "factor"),
> >> >      PO1M = c(155.7, 48.9, 83.2, NA, NA, NA, 48.05, 68.4, 41.65,
> >> >      82.35, NA), PO1T = c(180, 70, 100, NA, NA, NA, 70, 100, 60,
> >> >      100, NA), PO2M = c(NA, NA, NA, 37, NA, NA, NA, NA, NA, NA,
> >> >      41), PO2T = c(NA, NA, NA, 50, NA, NA, NA, NA, NA, NA, 50),
> >> >      X = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), X.1 = c(NA,
> >> >      NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names =
> >c("STUDENT_ID",
> >> > "COURSE_CODE", "PO1M", "PO1T", "PO2M", "PO2T", "X", "X.1"), class =
> >> > "data.frame", row.names = c(NA,
> >> > -11L))
> >> >
> >> > I want to combine the same Student ID and add up all the values for
> >PO1M,
> >> > PO1T,...,PO2T obtained by the same ID.
> >>
> >> dat <- structure(list(STUDENT_ID = structure(c(1L, 1L, 1L, 1L, 1L,
> >1L,
> >> 2L, 2L, 2L, 2L, 2L), .Label = c("AA15285", "AA15286"), class =
> >"factor"),
> >>      COURSE_CODE = structure(c(1L, 2L, 5L, 6L, 7L, 8L, 2L, 3L,
> >>      4L, 5L, 6L), .Label = c("BAA1113", "BAA1322", "BAA2113",
> >>      "BAA2513", "BAA2713", "BAA2921", "BAA4273", "BAA4513"), class =
> >> "factor"),
> >>      PO1M = c(155.7, 48.9, 83.2, NA, NA, NA, 48.05, 68.4, 41.65,
> >>      82.35, NA), PO1T = c(180, 70, 100, NA, NA, NA, 70, 100, 60,
> >>      100, NA), PO2M = c(NA, NA, NA, 37, NA, NA, NA, NA, NA, NA,
> >>      41), PO2T = c(NA, NA, NA, 50, NA, NA, NA, NA, NA, NA, 50),
> >>      X = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), X.1 = c(NA,
> >>      NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names =
> >c("STUDENT_ID",
> >> "COURSE_CODE", "PO1M", "PO1T", "PO2M", "PO2T", "X", "X.1"), class =
> >> "data.frame", row.names = c(NA,
> >> -11L))
> >>
> >> # I assume you would like to add up the values with na.rm = TRUE
> >> meanFn <- function(x) mean(x, na.rm = TRUE)
> >>
> >> # see ?aggregate
> >> aggregate(dat[, c("PO1M", "PO1T", "PO2M")],
> >>            by = dat["STUDENT_ID"],
> >>            FUN = meanFn)
> >>
> >> # if you have largish or large data
> >> library(data.table)
> >> dat2 <- as.data.table(dat)
> >> dat2[, lapply(.SD, meanFn),
> >>       by = STUDENT_ID,
> >>       .SDcols = c("PO1M", "PO1T", "PO2M")]
> >>
> >>
> >> Regards,
> >> Denes
> >>
> >>
> >> >
> >> > How do I do that?
> >> > Thank you for any help given.
> >> >
> >>
>
> --
> Sent from my phone. Please excuse my brevity.
>


-- 
*Roslinazairimah Zakaria*
*Tel: +609-5492370; Fax. No.+609-5492766*

*Email: roslinazairimah at ump.edu.my <roslinazairimah at ump.edu.my>;
roslinaump at gmail.com <roslinaump at gmail.com>*
Faculty of Industrial Sciences & Technology
University Malaysia Pahang
Lebuhraya Tun Razak, 26300 Gambang, Pahang, Malaysia

	[[alternative HTML version deleted]]


From peter@@@lzm@nu@er @ending from gm@il@com  Tue Oct 16 16:22:44 2018
From: peter@@@lzm@nu@er @ending from gm@il@com (peter salzman)
Date: Tue, 16 Oct 2018 10:22:44 -0400
Subject: [R] year and week to date - before 1/1 and after 12/31
Message-ID: <CAHdotinT-X5+huK05prObMuDSPHgBtRBe2ERdVr57bz1A5o06w@mail.gmail.com>

hi,

to turn year and week into the date one can do the following:

as.Date('2018 05 Sun', "%Y %W %a")

however, when we want the Sunday (1st day of week) of the 1st week of 2018
we get NA because 1/1/2018 was on Monday

as.Date('2018 00 Mon',format="%Y %U %a")
## 2018-01-01
as.Date('2018 00 Sun',format="%Y %U %a")
## NA

btw the same goes for last week
as.Date('2017 53 Sun',format="%Y %U %a")
## 2017-12-31
as.Date('2017 53 Mon',format="%Y %U %a")
## NA

So my question is :
how do i get
from "2018 00 Sun" to 2018-12-31
and
from "2017 53 Mon" to 2018-01-01

i realize i can loop over days of week and do some if/then statements,
but is there a built in function?

thank you
peter





-- 
Peter Salzman, PhD
Department of Biostatistics and Computational Biology
University of Rochester

	[[alternative HTML version deleted]]


From @k@h@y_e4 @ending from hotm@il@com  Tue Oct 16 15:09:02 2018
From: @k@h@y_e4 @ending from hotm@il@com (akshay kulkarni)
Date: Tue, 16 Oct 2018 13:09:02 +0000
Subject: [R] Fw: inconsistency in pbmclapply...
In-Reply-To: <SL2P216MB00917F6691FBFAB687D2071FC8FE0@SL2P216MB0091.KORP216.PROD.OUTLOOK.COM>
References: <SL2P216MB0091CBFD1E02AD33EEEAE501C8FE0@SL2P216MB0091.KORP216.PROD.OUTLOOK.COM>,
 <SL2P216MB00917F6691FBFAB687D2071FC8FE0@SL2P216MB0091.KORP216.PROD.OUTLOOK.COM>
Message-ID: <SL2P216MB00917A205738DF0F6C4E6DADC8FE0@SL2P216MB0091.KORP216.PROD.OUTLOOK.COM>

dear members,
                             I am attaching the object LYGH as used in my expression with pbmclapply so that you can recreate the expression:

LYG1 <- pbmclapply(LYGH, FUN = auto.arima, mc.cores = detectCores()

very many thanks for your help and time.....
yours sincerely,
AKSHAY M KULKARNI
________________________________
From: akshay kulkarni <akshay_e4 at hotmail.com>
Sent: Tuesday, October 16, 2018 2:21 PM
To: R help Mailing list
Subject: Fw: inconsistency in pbmclapply...


dear members,
                         however, "ts must have more than one observation" error is only found for the first entry of LYG1 ( LYG1[[20]], LYG1[[200]], [[elided Hotmail spam]]
________________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of akshay kulkarni <akshay_e4 at hotmail.com>
Sent: Tuesday, October 16, 2018 1:57 PM
To: R help Mailing  list
Subject: [R] inconsistency in pbmclapply...

dear members,
                             I am using parallel processing with pbmclapply. below is the code. LYG1[[1]] got from pbmclapply is not the same as LYG1[[1]] got from direct application of auto.arima. what may be wrong?

              debug at <tmp>#20: LYG1 <- pbmclapply(LYGH, FUN = auto.arima, mc.cores = detectCores())
Browse[2]>
  |=========================================                   |  68%, ETA 00:21
debug at <tmp>#21: LYG2 <- pbmclapply(LYGH, FUN = ets, mc.cores = detectCores())
Browse[2]> LYG1[[1]]
[1] "Error in ts(x) : 'ts' object must have one or more observations\n"
attr(,"class")
[1] "try-error"
attr(,"condition")
<simpleError in ts(x): 'ts' object must have one or more observations>
Warning message:
In pbmclapply(LYGH, FUN = auto.arima, mc.cores = detectCores()) :
  scheduled cores encountered errors in user code
Browse[2]> LYGH[[1]]
 [1] 0.700000000 0.400000000 0.300000000 0.150000000 0.250000000 0.950000000
 [7] 1.000000000 0.300000000 0.650000000 0.200000000 0.600000000 0.100000000
[13] 0.001412873 1.550000000 0.150000000 0.300000000 0.450000000 0.350000000
[19] 0.150000000 2.350000000 0.250000000 0.100000000 3.700000000 3.950000000
[25] 3.050000000 0.900000000 0.400000000 1.050000000 1.100000000 1.950000000
[31] 2.000000000 0.650000000 0.700000000 0.250000000 5.250000000 0.800000000
[37] 0.001412873
Browse[2]> auto.arima(LYGH[[1]])
Series: LYGH[[1]]
ARIMA(0,1,0)

sigma^2 estimated as 2.303:  log likelihood=-66.1
AIC=134.2   AICc=134.31   BIC=135.78

very many thanks for your time and effort.....
yours sincerely,
AKSHAY M KULKARNI

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

From peter@@@lzm@nu@er @ending from gm@il@com  Tue Oct 16 17:11:12 2018
From: peter@@@lzm@nu@er @ending from gm@il@com (peter salzman)
Date: Tue, 16 Oct 2018 11:11:12 -0400
Subject: [R] year and week to date - before 1/1 and after 12/31
In-Reply-To: <CAHdotinT-X5+huK05prObMuDSPHgBtRBe2ERdVr57bz1A5o06w@mail.gmail.com>
References: <CAHdotinT-X5+huK05prObMuDSPHgBtRBe2ERdVr57bz1A5o06w@mail.gmail.com>
Message-ID: <CAHdotimPAJwM5-HJyafESW-OvP4bOxKAxLGTG5ecdq1WDzHeAw@mail.gmail.com>

it is simpler than i thought

first day of given week is the last day minus 6days

in other words:
d1 = as.Date('2018 00 Sat',format="%Y %U %a") - 6
d2 = as.Date('2018 00 Sun',format="%Y %U %a")
are the same as long both are not NA

therefore to get the one that is not NA one can do

max( c(d1,d2), na.rm=TRUE )

maybe there is some other trick

best,
peter






On Tue, Oct 16, 2018 at 10:22 AM peter salzman <peter.salzmanuser at gmail.com>
wrote:

> hi,
>
> to turn year and week into the date one can do the following:
>
> as.Date('2018 05 Sun', "%Y %W %a")
>
> however, when we want the Sunday (1st day of week) of the 1st week of 2018
> we get NA because 1/1/2018 was on Monday
>
> as.Date('2018 00 Mon',format="%Y %U %a")
> ## 2018-01-01
> as.Date('2018 00 Sun',format="%Y %U %a")
> ## NA
>
> btw the same goes for last week
> as.Date('2017 53 Sun',format="%Y %U %a")
> ## 2017-12-31
> as.Date('2017 53 Mon',format="%Y %U %a")
> ## NA
>
> So my question is :
> how do i get
> from "2018 00 Sun" to 2018-12-31
> and
> from "2017 53 Mon" to 2018-01-01
>
> i realize i can loop over days of week and do some if/then statements,
> but is there a built in function?
>
> thank you
> peter
>
>
>
>
>
> --
> Peter Salzman, PhD
> Department of Biostatistics and Computational Biology
> University of Rochester
>


-- 
Peter Salzman, PhD
Department of Biostatistics and Computational Biology
University of Rochester

	[[alternative HTML version deleted]]


From bgunter@4567 @ending from gm@il@com  Tue Oct 16 17:21:23 2018
From: bgunter@4567 @ending from gm@il@com (Bert Gunter)
Date: Tue, 16 Oct 2018 08:21:23 -0700
Subject: [R] Fw: inconsistency in pbmclapply...
In-Reply-To: <SL2P216MB00917A205738DF0F6C4E6DADC8FE0@SL2P216MB0091.KORP216.PROD.OUTLOOK.COM>
References: <SL2P216MB0091CBFD1E02AD33EEEAE501C8FE0@SL2P216MB0091.KORP216.PROD.OUTLOOK.COM>
 <SL2P216MB00917F6691FBFAB687D2071FC8FE0@SL2P216MB0091.KORP216.PROD.OUTLOOK.COM>
 <SL2P216MB00917A205738DF0F6C4E6DADC8FE0@SL2P216MB0091.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAGxFJbQjO8-SBgJx7zSmKUKW=m6rxa_6gR8uAD+=7Rys0xQaFQ@mail.gmail.com>

As I think you hve been told before, most attachments don't make it through
the mail server. Use ?dput instead to include data.

Also, post in plain text, not html.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Oct 16, 2018 at 8:03 AM akshay kulkarni <akshay_e4 at hotmail.com>
wrote:

> dear members,
>                              I am attaching the object LYGH as used in my
> expression with pbmclapply so that you can recreate the expression:
>
> LYG1 <- pbmclapply(LYGH, FUN = auto.arima, mc.cores = detectCores()
>
> very many thanks for your help and time.....
> yours sincerely,
> AKSHAY M KULKARNI
> ________________________________
> From: akshay kulkarni <akshay_e4 at hotmail.com>
> Sent: Tuesday, October 16, 2018 2:21 PM
> To: R help Mailing list
> Subject: Fw: inconsistency in pbmclapply...
>
>
> dear members,
>                          however, "ts must have more than one observation"
> error is only found for the first entry of LYG1 ( LYG1[[20]], LYG1[[200]],
> [[elided Hotmail spam]]
> ________________________________________
> From: R-help <r-help-bounces at r-project.org> on behalf of akshay kulkarni <
> akshay_e4 at hotmail.com>
> Sent: Tuesday, October 16, 2018 1:57 PM
> To: R help Mailing  list
> Subject: [R] inconsistency in pbmclapply...
>
> dear members,
>                              I am using parallel processing with
> pbmclapply. below is the code. LYG1[[1]] got from pbmclapply is not the
> same as LYG1[[1]] got from direct application of auto.arima. what may be
> wrong?
>
>               debug at <tmp>#20: LYG1 <- pbmclapply(LYGH, FUN =
> auto.arima, mc.cores = detectCores())
> Browse[2]>
>   |=========================================                   |  68%, ETA
> 00:21
> debug at <tmp>#21: LYG2 <- pbmclapply(LYGH, FUN = ets, mc.cores =
> detectCores())
> Browse[2]> LYG1[[1]]
> [1] "Error in ts(x) : 'ts' object must have one or more observations\n"
> attr(,"class")
> [1] "try-error"
> attr(,"condition")
> <simpleError in ts(x): 'ts' object must have one or more observations>
> Warning message:
> In pbmclapply(LYGH, FUN = auto.arima, mc.cores = detectCores()) :
>   scheduled cores encountered errors in user code
> Browse[2]> LYGH[[1]]
>  [1] 0.700000000 0.400000000 0.300000000 0.150000000 0.250000000
> 0.950000000
>  [7] 1.000000000 0.300000000 0.650000000 0.200000000 0.600000000
> 0.100000000
> [13] 0.001412873 1.550000000 0.150000000 0.300000000 0.450000000
> 0.350000000
> [19] 0.150000000 2.350000000 0.250000000 0.100000000 3.700000000
> 3.950000000
> [25] 3.050000000 0.900000000 0.400000000 1.050000000 1.100000000
> 1.950000000
> [31] 2.000000000 0.650000000 0.700000000 0.250000000 5.250000000
> 0.800000000
> [37] 0.001412873
> Browse[2]> auto.arima(LYGH[[1]])
> Series: LYGH[[1]]
> ARIMA(0,1,0)
>
> sigma^2 estimated as 2.303:  log likelihood=-66.1
> AIC=134.2   AICc=134.31   BIC=135.78
>
> very many thanks for your time and effort.....
> yours sincerely,
> AKSHAY M KULKARNI
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @lfredo@cortell@nicol@u @ending from gm@il@com  Tue Oct 16 16:55:39 2018
From: @lfredo@cortell@nicol@u @ending from gm@il@com (Alfredo Cortell)
Date: Tue, 16 Oct 2018 16:55:39 +0200
Subject: [R] DNAbin
Message-ID: <CAPxhGmiOQRLcxC+URoncL_wDJ_m_LgjFYDfNxpKU0paD6d+2mg@mail.gmail.com>

Hola, buenos dias.

Escribo porque me gustar?a saber si puedo convertir un data frame que
consiste en variables (indicadas por columnas) y en filas (el n?mero de
personas que tienen cada variable en determinada hora del dia.) en un tipo
de objeto DNAbin para poder calcular la divergencia de Tajima. He estado
d?ndole vueltas, y no encuentro la forma de convertirlo

Muchas gracias,



V1 V2 V3 V4 V5 V6 V7
1 0 0 0 0 0 0
4 0 0 1 0 0 0
18 0 0 3 1 0 0
20 0 0 155 1 0 0
50 0 0 200 1 0 0
120 0 0 200 1 0 0
456 0 0 200 1 0 0

	[[alternative HTML version deleted]]


From Scott@A@Ne@lin @ending from tuck@d@rtmouth@edu  Tue Oct 16 18:33:34 2018
From: Scott@A@Ne@lin @ending from tuck@d@rtmouth@edu (Neslin, Scott A.)
Date: Tue, 16 Oct 2018 16:33:34 +0000
Subject: [R] GLM Model Summary
Message-ID: <af3ff2ce935e471c9356281d9945fcd5@tuck.dartmouth.edu>

R-Help:

We are working with your GLM R package.  The Summary(Model) now gets printed by the program as one object and we want to put the coefficient columns into Excel.  We took an initial stab at this by counting the number of characters occupied by each column.  But we have now learned that the number of characters in a column depends on the length of the variable names, so is not a constant number (e.g., 54 characters to a line).

We therefore ask, is it possible for us to get the Summary(Model) column by column, i.e., a separate object for each column?  That way we could assemble an Excel table easily rather than having to count the number of characters.

Is this possible for us to do by ourselves?  Or could you modify the package in some way?

We appreciate your attention.  Thank you!

Scott Neslin
Prasad Vana

Dartmouth College

	[[alternative HTML version deleted]]


From murdoch@dunc@n @ending from gm@il@com  Tue Oct 16 18:52:53 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Tue, 16 Oct 2018 12:52:53 -0400
Subject: [R] GLM Model Summary
In-Reply-To: <af3ff2ce935e471c9356281d9945fcd5@tuck.dartmouth.edu>
References: <af3ff2ce935e471c9356281d9945fcd5@tuck.dartmouth.edu>
Message-ID: <08dd5842-c39d-90ff-90b4-095db1ae452b@gmail.com>

On 16/10/2018 12:33 PM, Neslin, Scott A. wrote:
> R-Help:
> 
> We are working with your GLM R package.  The Summary(Model) now gets printed by the program as one object and we want to put the coefficient columns into Excel.  We took an initial stab at this by counting the number of characters occupied by each column.  But we have now learned that the number of characters in a column depends on the length of the variable names, so is not a constant number (e.g., 54 characters to a line).

There is no GLM R package as far as I know.  There's a glm() function in 
the stats package.  Is that what you meant?

What would probably be best is if you showed us a simple example of what 
you are doing, and then referred to the results from that when saying 
what you want to extract.

Duncan Murdoch

> 
> We therefore ask, is it possible for us to get the Summary(Model) column by column, i.e., a separate object for each column?  That way we could assemble an Excel table easily rather than having to count the number of characters.
> 
> Is this possible for us to do by ourselves?  Or could you modify the package in some way?
> 
> We appreciate your attention.  Thank you!
> 
> Scott Neslin
> Prasad Vana
> 
> Dartmouth College
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From peter@l@ngfelder @ending from gm@il@com  Tue Oct 16 18:54:37 2018
From: peter@l@ngfelder @ending from gm@il@com (Peter Langfelder)
Date: Tue, 16 Oct 2018 09:54:37 -0700
Subject: [R] GLM Model Summary
In-Reply-To: <af3ff2ce935e471c9356281d9945fcd5@tuck.dartmouth.edu>
References: <af3ff2ce935e471c9356281d9945fcd5@tuck.dartmouth.edu>
Message-ID: <CA+hbrhWQZWq5Rvop4GWVKTA2uRzHsdptk0i4B2wKoxvS22RQmw@mail.gmail.com>

The coefficients are best obtained as summary(Model)$coefficients.
This is a matrix can than be saved as a csv file and opened in excel
or other spreadsheet software.

HTH,

Peter
On Tue, Oct 16, 2018 at 9:44 AM Neslin, Scott A.
<Scott.A.Neslin at tuck.dartmouth.edu> wrote:
>
> R-Help:
>
> We are working with your GLM R package.  The Summary(Model) now gets printed by the program as one object and we want to put the coefficient columns into Excel.  We took an initial stab at this by counting the number of characters occupied by each column.  But we have now learned that the number of characters in a column depends on the length of the variable names, so is not a constant number (e.g., 54 characters to a line).
>
> We therefore ask, is it possible for us to get the Summary(Model) column by column, i.e., a separate object for each column?  That way we could assemble an Excel table easily rather than having to count the number of characters.
>
> Is this possible for us to do by ourselves?  Or could you modify the package in some way?
>
> We appreciate your attention.  Thank you!
>
> Scott Neslin
> Prasad Vana
>
> Dartmouth College
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From prof@@mit@mitt@l @ending from gm@il@com  Tue Oct 16 19:02:18 2018
From: prof@@mit@mitt@l @ending from gm@il@com (Amit Mittal)
Date: Tue, 16 Oct 2018 22:32:18 +0530
Subject: [R] GLM Model Summary
In-Reply-To: <08dd5842-c39d-90ff-90b4-095db1ae452b@gmail.com>
References: <af3ff2ce935e471c9356281d9945fcd5@tuck.dartmouth.edu>
 <08dd5842-c39d-90ff-90b4-095db1ae452b@gmail.com>
Message-ID: <CAP8zaQAP=ihP7b0HzNc2aC=QhJ2dioTWLGfpk7keG95XJ=J7cg@mail.gmail.com>

You can just use

'slotNames(modelname)
This will return sub objects for which names can be extracted

Eg

slotNames(modelname)
[1] "mfit" "model"
names(modelname at mfit)
names(modelname at model)
Will return all objects within the model including coed car R cover vcov as
applicable and you can store per choice

However within the column they will still be text

BR

On Tue 16 Oct, 2018, 10:23 PM Duncan Murdoch, <murdoch.duncan at gmail.com>
wrote:

> On 16/10/2018 12:33 PM, Neslin, Scott A. wrote:
> > R-Help:
> >
> > We are working with your GLM R package.  The Summary(Model) now gets
> printed by the program as one object and we want to put the coefficient
> columns into Excel.  We took an initial stab at this by counting the number
> of characters occupied by each column.  But we have now learned that the
> number of characters in a column depends on the length of the variable
> names, so is not a constant number (e.g., 54 characters to a line).
>
> There is no GLM R package as far as I know.  There's a glm() function in
> the stats package.  Is that what you meant?
>
> What would probably be best is if you showed us a simple example of what
> you are doing, and then referred to the results from that when saying
> what you want to extract.
>
> Duncan Murdoch
>
> >
> > We therefore ask, is it possible for us to get the Summary(Model) column
> by column, i.e., a separate object for each column?  That way we could
> assemble an Excel table easily rather than having to count the number of
> characters.
> >
> > Is this possible for us to do by ourselves?  Or could you modify the
> package in some way?
> >
> > We appreciate your attention.  Thank you!
> >
> > Scott Neslin
> > Prasad Vana
> >
> > Dartmouth College
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
-- 

______________________________

Amit Mittal
Pursuing Ph.D. in Finance and Accounting
Indian Institute of Management, Lucknow
Visit my SSRN author page:
http://ssrn.com/author=2665511
* Top 10% Downloaded Author on SSRN
Mob: +91 7525023664

This message has been sent from a mobile device. I may contact you again.

_________________

	[[alternative HTML version deleted]]


From m@rc_@chw@rtz @ending from me@com  Tue Oct 16 19:17:20 2018
From: m@rc_@chw@rtz @ending from me@com (Marc Schwartz)
Date: Tue, 16 Oct 2018 13:17:20 -0400
Subject: [R] GLM Model Summary
In-Reply-To: <af3ff2ce935e471c9356281d9945fcd5@tuck.dartmouth.edu>
References: <af3ff2ce935e471c9356281d9945fcd5@tuck.dartmouth.edu>
Message-ID: <3DAFBCD1-B635-4A45-B7EE-89C56E806177@me.com>



> On Oct 16, 2018, at 12:33 PM, Neslin, Scott A. <Scott.A.Neslin at tuck.dartmouth.edu> wrote:
> 
> R-Help:
> 
> We are working with your GLM R package.  The Summary(Model) now gets printed by the program as one object and we want to put the coefficient columns into Excel.  We took an initial stab at this by counting the number of characters occupied by each column.  But we have now learned that the number of characters in a column depends on the length of the variable names, so is not a constant number (e.g., 54 characters to a line).
> 
> We therefore ask, is it possible for us to get the Summary(Model) column by column, i.e., a separate object for each column?  That way we could assemble an Excel table easily rather than having to count the number of characters.
> 
> Is this possible for us to do by ourselves?  Or could you modify the package in some way?
> 
> We appreciate your attention.  Thank you!
> 
> Scott Neslin
> Prasad Vana
> 
> Dartmouth College


Hi,

Presuming that you are talking about the glm() function, as there is no GLM package as far as I can see, R model objects have a structure that can be viewed using the str() function. The help for this function can be viewed using:

   ?str

You can then use:

  str(summary(YourModelObject))

That will give you some insights into the model object components and that same str() function is valuable for investigating other objects as well.

That being said, R's model objects typically have 'extractor' functions to make it easy to obtain commonly used components of the model object, which can be complicated.

The R manual "An Introduction to R", has a section on some of these:

    https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Generic-functions-for-extracting-model-information <https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Generic-functions-for-extracting-model-information>

Thus, for example, using:

  coef(summary(YourModelObject))

will return the matrix of coefficients and related parameters from the summary model object.

Once you have that matrix object, you can write it out to a CSV file using ?write.csv, where the CSV file can then be opened with or imported into Excel.

So the steps might be along the lines of:

  my.coef <- coef(summary(YourModelObject))

  write.csv(my.coef, file = "MyCoefficients.csv")


The R Data Import/Export manual:

  https://cran.r-project.org/doc/manuals/r-release/R-data.html <https://cran.r-project.org/doc/manuals/r-release/R-data.html>

has some insights into pathways for getting data to and from R, including some packages that can directly write Excel files. You may wish to review that manual as well.

Regards,

Marc Schwartz



	[[alternative HTML version deleted]]


From jdnewmil @ending from dcn@d@vi@@c@@u@  Tue Oct 16 19:22:10 2018
From: jdnewmil @ending from dcn@d@vi@@c@@u@ (Jeff Newmiller)
Date: Tue, 16 Oct 2018 10:22:10 -0700
Subject: [R] year and week to date - before 1/1 and after 12/31
In-Reply-To: <CAHdotimPAJwM5-HJyafESW-OvP4bOxKAxLGTG5ecdq1WDzHeAw@mail.gmail.com>
References: <CAHdotinT-X5+huK05prObMuDSPHgBtRBe2ERdVr57bz1A5o06w@mail.gmail.com>
 <CAHdotimPAJwM5-HJyafESW-OvP4bOxKAxLGTG5ecdq1WDzHeAw@mail.gmail.com>
Message-ID: <338ACAD3-127C-49AD-943F-9DD5BBDE2421@dcn.davis.ca.us>

If the date in your character representation does not exist then there is no requirement for a POSIX function to give any reliable answer... including NA. Using 00 as the week number won't always work.

The first week/weekday combination that is guaranteed to exist by POSIX is 1/1 (first Monday). If the corresponding mon/mday is 1/1 then no days exist in week zero for that year and the first Sunday is 6 days more than the mday of the first Monday, else the mday of the first Sunday is one day less than the mday of the first Monday.

You should if at all possible repair the computations that are creating the invalid string dates you mention.

On October 16, 2018 8:11:12 AM PDT, peter salzman <peter.salzmanuser at gmail.com> wrote:
>it is simpler than i thought
>
>first day of given week is the last day minus 6days
>
>in other words:
>d1 = as.Date('2018 00 Sat',format="%Y %U %a") - 6
>d2 = as.Date('2018 00 Sun',format="%Y %U %a")
>are the same as long both are not NA
>
>therefore to get the one that is not NA one can do
>
>max( c(d1,d2), na.rm=TRUE )
>
>maybe there is some other trick
>
>best,
>peter
>
>
>
>
>
>
>On Tue, Oct 16, 2018 at 10:22 AM peter salzman
><peter.salzmanuser at gmail.com>
>wrote:
>
>> hi,
>>
>> to turn year and week into the date one can do the following:
>>
>> as.Date('2018 05 Sun', "%Y %W %a")
>>
>> however, when we want the Sunday (1st day of week) of the 1st week of
>2018
>> we get NA because 1/1/2018 was on Monday
>>
>> as.Date('2018 00 Mon',format="%Y %U %a")
>> ## 2018-01-01
>> as.Date('2018 00 Sun',format="%Y %U %a")
>> ## NA
>>
>> btw the same goes for last week
>> as.Date('2017 53 Sun',format="%Y %U %a")
>> ## 2017-12-31
>> as.Date('2017 53 Mon',format="%Y %U %a")
>> ## NA
>>
>> So my question is :
>> how do i get
>> from "2018 00 Sun" to 2018-12-31
>> and
>> from "2017 53 Mon" to 2018-01-01
>>
>> i realize i can loop over days of week and do some if/then
>statements,
>> but is there a built in function?
>>
>> thank you
>> peter
>>
>>
>>
>>
>>
>> --
>> Peter Salzman, PhD
>> Department of Biostatistics and Computational Biology
>> University of Rochester
>>

-- 
Sent from my phone. Please excuse my brevity.


From dwin@emiu@ @ending from comc@@t@net  Tue Oct 16 19:24:20 2018
From: dwin@emiu@ @ending from comc@@t@net (David Winsemius)
Date: Tue, 16 Oct 2018 10:24:20 -0700
Subject: [R] DNAbin
In-Reply-To: <CAPxhGmiOQRLcxC+URoncL_wDJ_m_LgjFYDfNxpKU0paD6d+2mg@mail.gmail.com>
References: <CAPxhGmiOQRLcxC+URoncL_wDJ_m_LgjFYDfNxpKU0paD6d+2mg@mail.gmail.com>
Message-ID: <50F38BC9-4543-4058-B8E5-FCC378D4B6F7@comcast.net>


> On Oct 16, 2018, at 7:55 AM, Alfredo Cortell <alfredo.cortell.nicolau at gmail.com> wrote:
> 
> Hola, buenos dias.
> 
> Escribo porque me gustar?a saber si puedo convertir un data frame que
> consiste en variables (indicadas por columnas) y en filas (el n?mero de
> personas que tienen cada variable en determinada hora del dia.) en un tipo
> de objeto DNAbin para poder calcular la divergencia de Tajima. He estado
> d?ndole vueltas, y no encuentro la forma de convertirlo
> 
> Muchas gracias,

Rhelp is an English language mailing list, but I think there was (? still is) a Spanish language R mailing list.
> 
> 
> 
> V1 V2 V3 V4 V5 V6 V7
> 1 0 0 0 0 0 0
> 4 0 0 1 0 0 0
> 18 0 0 3 1 0 0
> 20 0 0 155 1 0 0
> 50 0 0 200 1 0 0
> 120 0 0 200 1 0 0
> 456 0 0 200 1 0 0
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

David Winsemius
Alameda, CA, USA

"The whole problem with the world is that fools and fanatics are always so certain of themselves, and wiser people so full of doubts." - Bertrand Russell


From @lfredo@cortell@nicol@u @ending from gm@il@com  Tue Oct 16 19:55:49 2018
From: @lfredo@cortell@nicol@u @ending from gm@il@com (Alfredo Cortell)
Date: Tue, 16 Oct 2018 19:55:49 +0200
Subject: [R] DNAbin
Message-ID: <CAPxhGmh=eh477ZAMEFAPgEK1b62bV=QQzKGicE7eKRRJ6Z5PJA@mail.gmail.com>

Dear all,

Is it possible to convert a data frame with variables (columns) and the
number of persons for each variable at a given time at the day (rows) to
DNAbin object type, so that I can calculate Tajima's divergence? I've been
trying, but I just can't find the way.

Thank you very much,


V1 V2 V3 V4 V5 V6 V7
1 0 0 0 0 0 0
4 0 0 1 0 0 0
18 0 0 3 1 0 0
20 0 0 155 1 0 0
50 0 0 200 1 0 0
120 0 0 200 1 0 0
456 0 0 200 1 0 0

	[[alternative HTML version deleted]]


From jdnewmil @ending from dcn@d@vi@@c@@u@  Tue Oct 16 20:11:42 2018
From: jdnewmil @ending from dcn@d@vi@@c@@u@ (Jeff Newmiller)
Date: Tue, 16 Oct 2018 11:11:42 -0700
Subject: [R] year and week to date - before 1/1 and after 12/31
In-Reply-To: <338ACAD3-127C-49AD-943F-9DD5BBDE2421@dcn.davis.ca.us>
References: <CAHdotinT-X5+huK05prObMuDSPHgBtRBe2ERdVr57bz1A5o06w@mail.gmail.com>
 <CAHdotimPAJwM5-HJyafESW-OvP4bOxKAxLGTG5ecdq1WDzHeAw@mail.gmail.com>
 <338ACAD3-127C-49AD-943F-9DD5BBDE2421@dcn.davis.ca.us>
Message-ID: <294CB480-26E8-454C-9C31-B78396CB5BCA@dcn.davis.ca.us>

Er, my mistake, you are using %U not %W... but now I am really confused, because the first Sunday is trivial with %U/%u.

Can you clarify what your actual upstream input is? Is it an invalid date string as you say below, or is it year number?

On October 16, 2018 10:22:10 AM PDT, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>If the date in your character representation does not exist then there
>is no requirement for a POSIX function to give any reliable answer...
>including NA. Using 00 as the week number won't always work.
>
>The first week/weekday combination that is guaranteed to exist by POSIX
>is 1/1 (first Monday). If the corresponding mon/mday is 1/1 then no
>days exist in week zero for that year and the first Sunday is 6 days
>more than the mday of the first Monday, else the mday of the first
>Sunday is one day less than the mday of the first Monday.
>
>You should if at all possible repair the computations that are creating
>the invalid string dates you mention.
>
>On October 16, 2018 8:11:12 AM PDT, peter salzman
><peter.salzmanuser at gmail.com> wrote:
>>it is simpler than i thought
>>
>>first day of given week is the last day minus 6days
>>
>>in other words:
>>d1 = as.Date('2018 00 Sat',format="%Y %U %a") - 6
>>d2 = as.Date('2018 00 Sun',format="%Y %U %a")
>>are the same as long both are not NA
>>
>>therefore to get the one that is not NA one can do
>>
>>max( c(d1,d2), na.rm=TRUE )
>>
>>maybe there is some other trick
>>
>>best,
>>peter
>>
>>
>>
>>
>>
>>
>>On Tue, Oct 16, 2018 at 10:22 AM peter salzman
>><peter.salzmanuser at gmail.com>
>>wrote:
>>
>>> hi,
>>>
>>> to turn year and week into the date one can do the following:
>>>
>>> as.Date('2018 05 Sun', "%Y %W %a")
>>>
>>> however, when we want the Sunday (1st day of week) of the 1st week
>of
>>2018
>>> we get NA because 1/1/2018 was on Monday
>>>
>>> as.Date('2018 00 Mon',format="%Y %U %a")
>>> ## 2018-01-01
>>> as.Date('2018 00 Sun',format="%Y %U %a")
>>> ## NA
>>>
>>> btw the same goes for last week
>>> as.Date('2017 53 Sun',format="%Y %U %a")
>>> ## 2017-12-31
>>> as.Date('2017 53 Mon',format="%Y %U %a")
>>> ## NA
>>>
>>> So my question is :
>>> how do i get
>>> from "2018 00 Sun" to 2018-12-31
>>> and
>>> from "2017 53 Mon" to 2018-01-01
>>>
>>> i realize i can loop over days of week and do some if/then
>>statements,
>>> but is there a built in function?
>>>
>>> thank you
>>> peter
>>>
>>>
>>>
>>>
>>>
>>> --
>>> Peter Salzman, PhD
>>> Department of Biostatistics and Computational Biology
>>> University of Rochester
>>>

-- 
Sent from my phone. Please excuse my brevity.


From i@t@z@hn @ending from gm@il@com  Tue Oct 16 21:35:34 2018
From: i@t@z@hn @ending from gm@il@com (Ista Zahn)
Date: Tue, 16 Oct 2018 15:35:34 -0400
Subject: [R] Unlisting a nested dataset
In-Reply-To: <e20d1ef6-fb3d-4a9d-a774-0f4276e5b17b@Spark>
References: <e20d1ef6-fb3d-4a9d-a774-0f4276e5b17b@Spark>
Message-ID: <CA+vqiLHrGc=HSH5qZ_ynx5GtNjyLn15JdjRbWWeD2kwMF4o9nQ@mail.gmail.com>

Hi Nate,

You've made it pretty difficult to answer your question. Please see
https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example
and follow some of the suggestions you find there to make it easier on
those who want to help you.

Best,
Ista
On Mon, Oct 15, 2018 at 10:56 PM Nathan Parsons
<nathan.f.parsons at gmail.com> wrote:
>
> I?m attempting to do some content analysis on a few million tweets, but I can?t seem to get them cleaned correctly.
>
> I?m trying to replicate the process outlined here: https://stackoverflow.com/questions/46734501/opposite-of-unnest-tokens
>
> My code:
>
> tweets %>%
> unnest_tokens(word, text, token = 'tweets') %>%
> filter(!word %in% stop_words$word) %>%
> nest(word) %>%
> mutate(text = map(data, unlist),
>          text = map_chr(text, paste, collapse = " ")) -> tweets
>
> Unfortunately, I keep getting:
>
> Error in mutate_impl(.data, dots) :
> Evaluation error: cannot coerce type 'closure' to vector of type 'character?.
>
> What am I doing wrong?
>
> Here?s what the dataset looks like:
>
> > glimpse(tweets)
> Observations: 389,253
> Variables: 12
> $ status_id "x1047841705729306624", "x1046966595610927105", "x104709...
> $ created_at "2018-10-04T13:31:45Z", "2018-10-02T03:34:22Z", "2018-10...
> $ text "Technique is everything with olympic lifts ! @ Body By ...
> $ lat 43.68359, 40.28412, 37.77066, 40.43139, 31.16889, 33.937...
> $ lng -70.32841, -83.07859, -122.43598, -79.98069, -100.07689,...
> $ county_name "Cumberland County", "Delaware County", "San Francisco C...
> $ fips 23005, 39041, 6075, 42003, 48095, 6037, 6037, 55073, 482...
> $ state_name "Maine", "Ohio", "California", "Pennsylvania", "Texas", ...
> $ state_abb "ME", "OH", "CA", "PA", "TX", "CA", "CA", "WI", "TX", "A...
> $ urban_level "Medium Metro", "Large Fringe Metro", "Large Central Met...
> $ urban_code 3, 2, 1, 1, 6, 1, 1, 4, 1, 3, 2, 2, 1, 3, 6, 1, 1, 2, 3,...
> $ population 277308, 184029, 830781, 1160433, 4160, 9509611, 9509611,...
>
> --
>
> Nate Parsons
> Pronouns: He, Him, His
> Graduate Teaching Assistant
> Department of Sociology
> Portland State University
> Portland, Oregon
>
> 503-725-9025
> 503-725-3957 FAX
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From n@th@n@f@p@r@on@ @ending from gm@il@com  Tue Oct 16 21:50:20 2018
From: n@th@n@f@p@r@on@ @ending from gm@il@com (Nathan Parsons)
Date: Tue, 16 Oct 2018 12:50:20 -0700
Subject: [R] Unlisting a nested dataset
In-Reply-To: <CA+vqiLHrGc=HSH5qZ_ynx5GtNjyLn15JdjRbWWeD2kwMF4o9nQ@mail.gmail.com>
References: <e20d1ef6-fb3d-4a9d-a774-0f4276e5b17b@Spark>
 <CA+vqiLHrGc=HSH5qZ_ynx5GtNjyLn15JdjRbWWeD2kwMF4o9nQ@mail.gmail.com>
Message-ID: <5959e388-f694-4474-8790-ed416ce91ba7@Spark>

Ista - I provided data, code, and the error being returned as per reproducible r protocol. I did not include packages, however. unnest_tokens is from the TidyText package, map/map_chr are from purrr, and everything else is from tidyverse(dplyr/tidyr/etc.)

Not sure what else I can provide to make this more clear.

--

Nate Parsons
Pronouns: He, Him, His
Graduate Teaching Assistant
Department of Sociology
Portland State University
Portland, Oregon

503-725-9025
503-725-3957 FAX
On Oct 16, 2018, 12:35 PM -0700, Ista Zahn <istazahn at gmail.com>, wrote:
> Hi Nate,
>
> You've made it pretty difficult to answer your question. Please see
> https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example
> and follow some of the suggestions you find there to make it easier on
> those who want to help you.
>
> Best,
> Ista
> On Mon, Oct 15, 2018 at 10:56 PM Nathan Parsons
> <nathan.f.parsons at gmail.com> wrote:
> >
> > I?m attempting to do some content analysis on a few million tweets, but I can?t seem to get them cleaned correctly.
> >
> > I?m trying to replicate the process outlined here: https://stackoverflow.com/questions/46734501/opposite-of-unnest-tokens
> >
> > My code:
> >
> > tweets %>%
> > unnest_tokens(word, text, token = 'tweets') %>%
> > filter(!word %in% stop_words$word) %>%
> > nest(word) %>%
> > mutate(text = map(data, unlist),
> > text = map_chr(text, paste, collapse = " ")) -> tweets
> >
> > Unfortunately, I keep getting:
> >
> > Error in mutate_impl(.data, dots) :
> > Evaluation error: cannot coerce type 'closure' to vector of type 'character?.
> >
> > What am I doing wrong?
> >
> > Here?s what the dataset looks like:
> >
> > > glimpse(tweets)
> > Observations: 389,253
> > Variables: 12
> > $ status_id "x1047841705729306624", "x1046966595610927105", "x104709...
> > $ created_at "2018-10-04T13:31:45Z", "2018-10-02T03:34:22Z", "2018-10...
> > $ text "Technique is everything with olympic lifts ! @ Body By ...
> > $ lat 43.68359, 40.28412, 37.77066, 40.43139, 31.16889, 33.937...
> > $ lng -70.32841, -83.07859, -122.43598, -79.98069, -100.07689,...
> > $ county_name "Cumberland County", "Delaware County", "San Francisco C...
> > $ fips 23005, 39041, 6075, 42003, 48095, 6037, 6037, 55073, 482...
> > $ state_name "Maine", "Ohio", "California", "Pennsylvania", "Texas", ...
> > $ state_abb "ME", "OH", "CA", "PA", "TX", "CA", "CA", "WI", "TX", "A...
> > $ urban_level "Medium Metro", "Large Fringe Metro", "Large Central Met...
> > $ urban_code 3, 2, 1, 1, 6, 1, 1, 4, 1, 3, 2, 2, 1, 3, 6, 1, 1, 2, 3,...
> > $ population 277308, 184029, 830781, 1160433, 4160, 9509611, 9509611,...
> >
> > --
> >
> > Nate Parsons
> > Pronouns: He, Him, His
> > Graduate Teaching Assistant
> > Department of Sociology
> > Portland State University
> > Portland, Oregon
> >
> > 503-725-9025
> > 503-725-3957 FAX
> >
> > [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From jdnewmil @ending from dcn@d@vi@@c@@u@  Tue Oct 16 23:02:46 2018
From: jdnewmil @ending from dcn@d@vi@@c@@u@ (Jeff Newmiller)
Date: Tue, 16 Oct 2018 14:02:46 -0700
Subject: [R] Unlisting a nested dataset
In-Reply-To: <5959e388-f694-4474-8790-ed416ce91ba7@Spark>
References: <e20d1ef6-fb3d-4a9d-a774-0f4276e5b17b@Spark>
 <CA+vqiLHrGc=HSH5qZ_ynx5GtNjyLn15JdjRbWWeD2kwMF4o9nQ@mail.gmail.com>
 <5959e388-f694-4474-8790-ed416ce91ba7@Spark>
Message-ID: <AED49DDA-0081-47D9-920E-3A5CBFEB184F@dcn.davis.ca.us>

> >Not sure what else I can provide to make this more clear.

You can address this deficiency of awareness by using the reprex package to generate the example+errors you are concerned about. Combined with the use of dput described in the link Ista provided (or use of example data from your declared packages), you will know before you hit the send button that we should be able to reproduce your error even without knowing anything about your field of interest or having your directory structure/files.

The last impediment will be your sending email in HTML format... Gmail DOES have a plain text option, and this makes a difference because with HTML what you see is almost never what we see.

On October 16, 2018 12:50:20 PM PDT, Nathan Parsons <nathan.f.parsons at gmail.com> wrote:
>Ista - I provided data, code, and the error being returned as per
>reproducible r protocol. I did not include packages, however.
>unnest_tokens is from the TidyText package, map/map_chr are from purrr,
>and everything else is from tidyverse(dplyr/tidyr/etc.)
>
>Not sure what else I can provide to make this more clear.
>
>--
>
>Nate Parsons
>Pronouns: He, Him, His
>Graduate Teaching Assistant
>Department of Sociology
>Portland State University
>Portland, Oregon
>
>503-725-9025
>503-725-3957 FAX
>On Oct 16, 2018, 12:35 PM -0700, Ista Zahn <istazahn at gmail.com>, wrote:
>> Hi Nate,
>>
>> You've made it pretty difficult to answer your question. Please see
>>
>https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example
>> and follow some of the suggestions you find there to make it easier
>on
>> those who want to help you.
>>
>> Best,
>> Ista
>> On Mon, Oct 15, 2018 at 10:56 PM Nathan Parsons
>> <nathan.f.parsons at gmail.com> wrote:
>> >
>> > I?m attempting to do some content analysis on a few million tweets,
>but I can?t seem to get them cleaned correctly.
>> >
>> > I?m trying to replicate the process outlined here:
>https://stackoverflow.com/questions/46734501/opposite-of-unnest-tokens
>> >
>> > My code:
>> >
>> > tweets %>%
>> > unnest_tokens(word, text, token = 'tweets') %>%
>> > filter(!word %in% stop_words$word) %>%
>> > nest(word) %>%
>> > mutate(text = map(data, unlist),
>> > text = map_chr(text, paste, collapse = " ")) -> tweets
>> >
>> > Unfortunately, I keep getting:
>> >
>> > Error in mutate_impl(.data, dots) :
>> > Evaluation error: cannot coerce type 'closure' to vector of type
>'character?.
>> >
>> > What am I doing wrong?
>> >
>> > Here?s what the dataset looks like:
>> >
>> > > glimpse(tweets)
>> > Observations: 389,253
>> > Variables: 12
>> > $ status_id "x1047841705729306624", "x1046966595610927105",
>"x104709...
>> > $ created_at "2018-10-04T13:31:45Z", "2018-10-02T03:34:22Z",
>"2018-10...
>> > $ text "Technique is everything with olympic lifts ! @ Body By ...
>> > $ lat 43.68359, 40.28412, 37.77066, 40.43139, 31.16889, 33.937...
>> > $ lng -70.32841, -83.07859, -122.43598, -79.98069, -100.07689,...
>> > $ county_name "Cumberland County", "Delaware County", "San
>Francisco C...
>> > $ fips 23005, 39041, 6075, 42003, 48095, 6037, 6037, 55073, 482...
>> > $ state_name "Maine", "Ohio", "California", "Pennsylvania",
>"Texas", ...
>> > $ state_abb "ME", "OH", "CA", "PA", "TX", "CA", "CA", "WI", "TX",
>"A...
>> > $ urban_level "Medium Metro", "Large Fringe Metro", "Large Central
>Met...
>> > $ urban_code 3, 2, 1, 1, 6, 1, 1, 4, 1, 3, 2, 2, 1, 3, 6, 1, 1, 2,
>3,...
>> > $ population 277308, 184029, 830781, 1160433, 4160, 9509611,
>9509611,...
>> >
>> > --
>> >
>> > Nate Parsons
>> > Pronouns: He, Him, His
>> > Graduate Teaching Assistant
>> > Department of Sociology
>> > Portland State University
>> > Portland, Oregon
>> >
>> > 503-725-9025
>> > 503-725-3957 FAX
>> >
>> > [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From peter@@@lzm@nu@er @ending from gm@il@com  Tue Oct 16 23:08:52 2018
From: peter@@@lzm@nu@er @ending from gm@il@com (peter salzman)
Date: Tue, 16 Oct 2018 17:08:52 -0400
Subject: [R] year and week to date - before 1/1 and after 12/31
In-Reply-To: <294CB480-26E8-454C-9C31-B78396CB5BCA@dcn.davis.ca.us>
References: <CAHdotinT-X5+huK05prObMuDSPHgBtRBe2ERdVr57bz1A5o06w@mail.gmail.com>
 <CAHdotimPAJwM5-HJyafESW-OvP4bOxKAxLGTG5ecdq1WDzHeAw@mail.gmail.com>
 <338ACAD3-127C-49AD-943F-9DD5BBDE2421@dcn.davis.ca.us>
 <294CB480-26E8-454C-9C31-B78396CB5BCA@dcn.davis.ca.us>
Message-ID: <CAHdotik1nvTtZ0Q_9xUMnr+i69o6fNnNNddt8n3=kW=40Oz6RQ@mail.gmail.com>

hi,

thanks for replying,

it has taken some time to understand

i have year+week and i need to find the 1st day and the last day of that
week
i can decide when week starts

for example these 3 examples:
df <- data.frame(id = 1:3, year = c(2018, 2018, 2018), week=c(0,1,52))

## now run for all 3 rows:
for (kk in 1:3) {
  print(df[kk,])
  print('## version 1')
  print(as.Date(paste(df$year[kk],df$week[kk],'Sun',sep=' '), format = "%Y
%U %a")       )
  print(as.Date(paste(df$year[kk],df$week[kk],'Mon',sep=' '), format = "%Y
%U %a")       )
  print(as.Date(paste(df$year[kk],df$week[kk],'Tue',sep=' '), format = "%Y
%U %a")       )
  print(as.Date(paste(df$year[kk],df$week[kk],'Wed',sep=' '), format = "%Y
%U %a")       )
  print(as.Date(paste(df$year[kk],df$week[kk],'Thu',sep=' '), format = "%Y
%U %a")       )
  print(as.Date(paste(df$year[kk],df$week[kk],'Fri',sep=' '), format = "%Y
%U %a")       )
  print(as.Date(paste(df$year[kk],df$week[kk],'Sat',sep=' '), format = "%Y
%U %a")       )

  print('## version 2')
  print(as.Date(paste(df$year[kk],df$week[kk],'7',sep=' '), format = "%Y %U
%u")        )
  print(as.Date(paste(df$year[kk],df$week[kk],'1',sep=' '), format = "%Y %U
%u")         )
  print(as.Date(paste(df$year[kk],df$week[kk],'2',sep=' '), format = "%Y %U
%u")         )
  print(as.Date(paste(df$year[kk],df$week[kk],'3',sep=' '), format = "%Y %U
%u")         )
  print(as.Date(paste(df$year[kk],df$week[kk],'4',sep=' '), format = "%Y %U
%u")         )
  print(as.Date(paste(df$year[kk],df$week[kk],'5',sep=' '), format = "%Y %U
%u")         )
  print(as.Date(paste(df$year[kk],df$week[kk],'6',sep=' '), format = "%Y %U
%u")         )
}

for week 0 we get NA for Sunday because it was Dec 31, 2017
similarly for week 52 we get NA for Tue,Wed, ... because these are in
January of 2019

my hope was to write
as.Date(paste(year,week,1), format "%Y %month %weekday")
as.Date(paste(year,week,7), format "%Y %month %weekday")
and get the first and last day of the given week even at the beginning and
end of year
for example
as.Date("2018 0 Sun","%Y %U %a")   = '2017-12-31'

i hope this makes sense.

thanks for replying
peter










On Tue, Oct 16, 2018 at 2:11 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> Er, my mistake, you are using %U not %W... but now I am really confused,
> because the first Sunday is trivial with %U/%u.
>
> Can you clarify what your actual upstream input is? Is it an invalid date
> string as you say below, or is it year number?
>
> On October 16, 2018 10:22:10 AM PDT, Jeff Newmiller <
> jdnewmil at dcn.davis.ca.us> wrote:
> >If the date in your character representation does not exist then there
> >is no requirement for a POSIX function to give any reliable answer...
> >including NA. Using 00 as the week number won't always work.
> >
> >The first week/weekday combination that is guaranteed to exist by POSIX
> >is 1/1 (first Monday). If the corresponding mon/mday is 1/1 then no
> >days exist in week zero for that year and the first Sunday is 6 days
> >more than the mday of the first Monday, else the mday of the first
> >Sunday is one day less than the mday of the first Monday.
> >
> >You should if at all possible repair the computations that are creating
> >the invalid string dates you mention.
> >
> >On October 16, 2018 8:11:12 AM PDT, peter salzman
> ><peter.salzmanuser at gmail.com> wrote:
> >>it is simpler than i thought
> >>
> >>first day of given week is the last day minus 6days
> >>
> >>in other words:
> >>d1 = as.Date('2018 00 Sat',format="%Y %U %a") - 6
> >>d2 = as.Date('2018 00 Sun',format="%Y %U %a")
> >>are the same as long both are not NA
> >>
> >>therefore to get the one that is not NA one can do
> >>
> >>max( c(d1,d2), na.rm=TRUE )
> >>
> >>maybe there is some other trick
> >>
> >>best,
> >>peter
> >>
> >>
> >>
> >>
> >>
> >>
> >>On Tue, Oct 16, 2018 at 10:22 AM peter salzman
> >><peter.salzmanuser at gmail.com>
> >>wrote:
> >>
> >>> hi,
> >>>
> >>> to turn year and week into the date one can do the following:
> >>>
> >>> as.Date('2018 05 Sun', "%Y %W %a")
> >>>
> >>> however, when we want the Sunday (1st day of week) of the 1st week
> >of
> >>2018
> >>> we get NA because 1/1/2018 was on Monday
> >>>
> >>> as.Date('2018 00 Mon',format="%Y %U %a")
> >>> ## 2018-01-01
> >>> as.Date('2018 00 Sun',format="%Y %U %a")
> >>> ## NA
> >>>
> >>> btw the same goes for last week
> >>> as.Date('2017 53 Sun',format="%Y %U %a")
> >>> ## 2017-12-31
> >>> as.Date('2017 53 Mon',format="%Y %U %a")
> >>> ## NA
> >>>
> >>> So my question is :
> >>> how do i get
> >>> from "2018 00 Sun" to 2018-12-31
> >>> and
> >>> from "2017 53 Mon" to 2018-01-01
> >>>
> >>> i realize i can loop over days of week and do some if/then
> >>statements,
> >>> but is there a built in function?
> >>>
> >>> thank you
> >>> peter
> >>>
> >>>
> >>>
> >>>
> >>>
> >>> --
> >>> Peter Salzman, PhD
> >>> Department of Biostatistics and Computational Biology
> >>> University of Rochester
> >>>
>
> --
> Sent from my phone. Please excuse my brevity.
>


-- 
Peter Salzman, PhD
BMS
Greater Boston Area, MA

	[[alternative HTML version deleted]]


From n@th@n@f@p@r@on@ @ending from gm@il@com  Tue Oct 16 23:39:30 2018
From: n@th@n@f@p@r@on@ @ending from gm@il@com (Nathan Parsons)
Date: Tue, 16 Oct 2018 14:39:30 -0700
Subject: [R] Matching multiple search criteria (Unlisting a nested dataset,
 take 2)
Message-ID: <CANdqJqdP2bDdVNc=8R7jeXYU94p_=3BNmwrt11zwh7OdOaEfZA@mail.gmail.com>

Thanks all for your patience. Here?s a second go that is perhaps more
explicative of what it is I am trying to accomplish (and hopefully in plain
text form)...


I?m using the following packages: tidyverse, purrr, tidytext


I have a number of tweets in the following form:


th <- structure(list(status_id = c("x1047841705729306624",
"x1046966595610927105",

"x1047094786610552832", "x1046988542818308097", "x1046934493553221632",

"x1047227442899775488"), created_at = c("2018-10-04T13:31:45Z",

"2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",

"2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z"), text = c("Technique is
everything with olympic lifts ! @ Body By John https://t.co/UsfR6DafZt",

"@Subtronics just went back and rewatched ur FBlice with ur CDJs and let me
tell you man. You are the fucking messiah",

"@ic4rus1 Opportunistic means short-game. As in getting drunk now vs. not
being hung over tomorrow vs. not fucking up your life ten years later.",

"I tend to think about my dreams before I sleep.", "@MichaelAvenatti
@SenatorCollins So, if your client was in her 20s, attending parties with
teenagers, doesn't that make her at the least immature as hell, or at the
worst, a pedophile and a person contributing to the delinquency of minors?",

"i wish i could take credit for this"), lat = c(43.6835853, 40.284123,

37.7706565, 40.431389, 31.1688935, 33.9376735), lng = c(-70.3284118,

-83.078589, -122.4359785, -79.9806895, -100.0768885, -118.130426

), county_name = c("Cumberland County", "Delaware County", "San Francisco
County",

"Allegheny County", "Concho County", "Los Angeles County"), fips = c(23005L,

39041L, 6075L, 42003L, 48095L, 6037L), state_name = c("Maine",

"Ohio", "California", "Pennsylvania", "Texas", "California"),

state_abb = c("ME", "OH", "CA", "PA", "TX", "CA"), urban_level = c("Medium
Metro",

"Large Fringe Metro", "Large Central Metro", "Large Central Metro",

"NonCore (Nonmetro)", "Large Central Metro"), urban_code = c(3L,

2L, 1L, 1L, 6L, 1L), population = c(277308L, 184029L, 830781L,

1160433L, 4160L, 9509611L)), class = c("data.table", "data.frame"

), row.names = c(NA, -6L), .internal.selfref = )


I also have a number of search terms in the following form:


st <- structure(list(terms = c("me abused depressed", "me hurt depressed",

"feel hopeless depressed", "feel alone depressed", "i feel helpless",

"i feel worthless")), row.names = c(NA, -6L), class = c("tbl_df",

"tbl", "data.frame?))


I am trying to isolate the tweets that contain all of the words in each of
the search terms, i.e ?me? ?abused? and ?depressed? from the first example
search term, but they do not have to be in order or even next to one
another.


I am familiar with the dplyr suite of tools and have been attempting to
generate some sort of ?filter()? to do this. I am not very familiar with
purrr, but there may be a solution using the map function? I have also
explored the tidytext ?unnest_tokens? function which transforms the ?th?
data in the following way:


> tidytext::unnest_tokens(th, word, text, token = "tweets") -> tt

> head(tt)

status_id created_at lat lng

1: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841

2: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841

3: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841

4: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841

5: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841

6: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841

county_name fips state_name state_abb urban_level urban_code

1: Cumberland County 23005 Maine ME Medium Metro 3

2: Cumberland County 23005 Maine ME Medium Metro 3

3: Cumberland County 23005 Maine ME Medium Metro 3

4: Cumberland County 23005 Maine ME Medium Metro 3

5: Cumberland County 23005 Maine ME Medium Metro 3

6: Cumberland County 23005 Maine ME Medium Metro 3

population word

1: 277308 technique

2: 277308 is

3: 277308 everything

4: 277308 with

5: 277308 olympic

6: 277308 lifts


but once I have unnested the tokens, I am unable to recombine them back
into tweets.


Ideally the end result would append a new column to the ?th? data that
would flag a tweet that contained all of the search words for any of the
search terms; so the work flow would look like

1) look for all search words for one search term in a tweet

2) if all of the search words in the search term are found, create a flag
(mutate(flag = 1) or some such)

3) do this for all of the tweets

4) move on the next search term and repeat


Again, my thanks for your patience.


--


Nate Parsons

Pronouns: He, Him, His

Graduate Teaching Assistant

Department of Sociology

Portland State University

Portland, Oregon


503-725-9025

503-725-3957 FAX

	[[alternative HTML version deleted]]


From n@th@n@f@p@r@on@ @ending from gm@il@com  Tue Oct 16 23:46:59 2018
From: n@th@n@f@p@r@on@ @ending from gm@il@com (Nathan Parsons)
Date: Tue, 16 Oct 2018 14:46:59 -0700
Subject: [R] 
 Matching multiple search criteria (Unlisting a nested dataset,
 take 2)
In-Reply-To: <CANdqJqdP2bDdVNc=8R7jeXYU94p_=3BNmwrt11zwh7OdOaEfZA@mail.gmail.com>
References: <CANdqJqdP2bDdVNc=8R7jeXYU94p_=3BNmwrt11zwh7OdOaEfZA@mail.gmail.com>
Message-ID: <CANdqJqfCZU96s3XtVWwDYgmmh4LOJe-3896xxO4Ye4aMGaoDWg@mail.gmail.com>

Argh! Here are those two example datasets as data frames (not tibbles).
Sorry again. This apparently is just not my day.


th <- structure(list(status_id = c("x1047841705729306624",
"x1046966595610927105",

"x1047094786610552832", "x1046988542818308097", "x1046934493553221632",

"x1047227442899775488"), created_at = c("2018-10-04T13:31:45Z",

"2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",

"2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z"), text = c("Technique is
everything with olympic lifts ! @ Body By John https://t.co/UsfR6DafZt",

"@Subtronics just went back and rewatched ur FBlice with ur CDJs and let me
tell you man. You are the fucking messiah",

"@ic4rus1 Opportunistic means short-game. As in getting drunk now vs. not
being hung over tomorrow vs. not fucking up your life ten years later.",

"I tend to think about my dreams before I sleep.", "@MichaelAvenatti
@SenatorCollins So,  if your client was in her 20s, attending parties with
teenagers, doesn't that make her at the least immature as hell, or at the
worst, a pedophile and a person contributing to the delinquency of minors?",


"i wish i could take credit for this"), lat = c(43.6835853, 40.284123,

37.7706565, 40.431389, 31.1688935, 33.9376735), lng = c(-70.3284118,

-83.078589, -122.4359785, -79.9806895, -100.0768885, -118.130426

), county_name = c("Cumberland County", "Delaware County", "San Francisco
County",

"Allegheny County", "Concho County", "Los Angeles County"), fips = c(23005L,


39041L, 6075L, 42003L, 48095L, 6037L), state_name = c("Maine",

"Ohio", "California", "Pennsylvania", "Texas", "California"),

    state_abb = c("ME", "OH", "CA", "PA", "TX", "CA"), urban_level =
c("Medium Metro",

    "Large Fringe Metro", "Large Central Metro", "Large Central Metro",

    "NonCore (Nonmetro)", "Large Central Metro"), urban_code = c(3L,

    2L, 1L, 1L, 6L, 1L), population = c(277308L, 184029L, 830781L,

    1160433L, 4160L, 9509611L)), class = "data.frame", row.names = c(NA,

-6L))


st <- structure(list(terms = c("me abused depressed", "me hurt depressed",

"feel hopeless depressed", "feel alone depressed", "i feel helpless",

"i feel worthless")), row.names = c(NA, -6L), class = c("tbl_df",

"tbl", "data.frame"))

On Tue, Oct 16, 2018 at 2:39 PM Nathan Parsons <nathan.f.parsons at gmail.com>
wrote:

> Thanks all for your patience. Here?s a second go that is perhaps more
> explicative of what it is I am trying to accomplish (and hopefully in plain
> text form)...
>
>
> I?m using the following packages: tidyverse, purrr, tidytext
>
>
> I have a number of tweets in the following form:
>
>
> th <- structure(list(status_id = c("x1047841705729306624",
> "x1046966595610927105",
>
> "x1047094786610552832", "x1046988542818308097", "x1046934493553221632",
>
> "x1047227442899775488"), created_at = c("2018-10-04T13:31:45Z",
>
> "2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",
>
> "2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z"), text = c("Technique is
> everything with olympic lifts ! @ Body By John https://t.co/UsfR6DafZt",
>
> "@Subtronics just went back and rewatched ur FBlice with ur CDJs and let
> me tell you man. You are the fucking messiah",
>
> "@ic4rus1 Opportunistic means short-game. As in getting drunk now vs. not
> being hung over tomorrow vs. not fucking up your life ten years later.",
>
> "I tend to think about my dreams before I sleep.", "@MichaelAvenatti
> @SenatorCollins So, if your client was in her 20s, attending parties with
> teenagers, doesn't that make her at the least immature as hell, or at the
> worst, a pedophile and a person contributing to the delinquency of minors?",
>
> "i wish i could take credit for this"), lat = c(43.6835853, 40.284123,
>
> 37.7706565, 40.431389, 31.1688935, 33.9376735), lng = c(-70.3284118,
>
> -83.078589, -122.4359785, -79.9806895, -100.0768885, -118.130426
>
> ), county_name = c("Cumberland County", "Delaware County", "San Francisco
> County",
>
> "Allegheny County", "Concho County", "Los Angeles County"), fips =
> c(23005L,
>
> 39041L, 6075L, 42003L, 48095L, 6037L), state_name = c("Maine",
>
> "Ohio", "California", "Pennsylvania", "Texas", "California"),
>
> state_abb = c("ME", "OH", "CA", "PA", "TX", "CA"), urban_level = c("Medium
> Metro",
>
> "Large Fringe Metro", "Large Central Metro", "Large Central Metro",
>
> "NonCore (Nonmetro)", "Large Central Metro"), urban_code = c(3L,
>
> 2L, 1L, 1L, 6L, 1L), population = c(277308L, 184029L, 830781L,
>
> 1160433L, 4160L, 9509611L)), class = c("data.table", "data.frame"
>
> ), row.names = c(NA, -6L), .internal.selfref = )
>
>
> I also have a number of search terms in the following form:
>
>
> st <- structure(list(terms = c("me abused depressed", "me hurt depressed",
>
> "feel hopeless depressed", "feel alone depressed", "i feel helpless",
>
> "i feel worthless")), row.names = c(NA, -6L), class = c("tbl_df",
>
> "tbl", "data.frame?))
>
>
> I am trying to isolate the tweets that contain all of the words in each of
> the search terms, i.e ?me? ?abused? and ?depressed? from the first example
> search term, but they do not have to be in order or even next to one
> another.
>
>
> I am familiar with the dplyr suite of tools and have been attempting to
> generate some sort of ?filter()? to do this. I am not very familiar with
> purrr, but there may be a solution using the map function? I have also
> explored the tidytext ?unnest_tokens? function which transforms the ?th?
> data in the following way:
>
>
> > tidytext::unnest_tokens(th, word, text, token = "tweets") -> tt
>
> > head(tt)
>
> status_id created_at lat lng
>
> 1: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>
> 2: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>
> 3: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>
> 4: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>
> 5: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>
> 6: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>
> county_name fips state_name state_abb urban_level urban_code
>
> 1: Cumberland County 23005 Maine ME Medium Metro 3
>
> 2: Cumberland County 23005 Maine ME Medium Metro 3
>
> 3: Cumberland County 23005 Maine ME Medium Metro 3
>
> 4: Cumberland County 23005 Maine ME Medium Metro 3
>
> 5: Cumberland County 23005 Maine ME Medium Metro 3
>
> 6: Cumberland County 23005 Maine ME Medium Metro 3
>
> population word
>
> 1: 277308 technique
>
> 2: 277308 is
>
> 3: 277308 everything
>
> 4: 277308 with
>
> 5: 277308 olympic
>
> 6: 277308 lifts
>
>
> but once I have unnested the tokens, I am unable to recombine them back
> into tweets.
>
>
> Ideally the end result would append a new column to the ?th? data that
> would flag a tweet that contained all of the search words for any of the
> search terms; so the work flow would look like
>
> 1) look for all search words for one search term in a tweet
>
> 2) if all of the search words in the search term are found, create a flag
> (mutate(flag = 1) or some such)
>
> 3) do this for all of the tweets
>
> 4) move on the next search term and repeat
>
>
> Again, my thanks for your patience.
>
>
> --
>
>
> Nate Parsons
>
> Pronouns: He, Him, His
>
> Graduate Teaching Assistant
>
> Department of Sociology
>
> Portland State University
>
> Portland, Oregon
>
>
> 503-725-9025
>
> 503-725-3957 FAX
>

	[[alternative HTML version deleted]]


From bgunter@4567 @ending from gm@il@com  Wed Oct 17 00:03:13 2018
From: bgunter@4567 @ending from gm@il@com (Bert Gunter)
Date: Tue, 16 Oct 2018 15:03:13 -0700
Subject: [R] 
 Matching multiple search criteria (Unlisting a nested dataset,
 take 2)
In-Reply-To: <CANdqJqfCZU96s3XtVWwDYgmmh4LOJe-3896xxO4Ye4aMGaoDWg@mail.gmail.com>
References: <CANdqJqdP2bDdVNc=8R7jeXYU94p_=3BNmwrt11zwh7OdOaEfZA@mail.gmail.com>
 <CANdqJqfCZU96s3XtVWwDYgmmh4LOJe-3896xxO4Ye4aMGaoDWg@mail.gmail.com>
Message-ID: <CAGxFJbQmPf=vqRU0iLgEBGyTtUXL_GX8Kd3Bgdq796QhpQxUXA@mail.gmail.com>

The problem wasn't the data tibbles. You posted in html -- which you were
explictly warned against -- and that corrupted your text (e.g. some quotes
became "smart quotes", which cannot be properly cut and pasted into R).

Bert


On Tue, Oct 16, 2018 at 2:47 PM Nathan Parsons <nathan.f.parsons at gmail.com>
wrote:

> Argh! Here are those two example datasets as data frames (not tibbles).
> Sorry again. This apparently is just not my day.
>
>
> th <- structure(list(status_id = c("x1047841705729306624",
> "x1046966595610927105",
>
> "x1047094786610552832", "x1046988542818308097", "x1046934493553221632",
>
> "x1047227442899775488"), created_at = c("2018-10-04T13:31:45Z",
>
> "2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",
>
> "2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z"), text = c("Technique is
> everything with olympic lifts ! @ Body By John https://t.co/UsfR6DafZt",
>
> "@Subtronics just went back and rewatched ur FBlice with ur CDJs and let me
> tell you man. You are the fucking messiah",
>
> "@ic4rus1 Opportunistic means short-game. As in getting drunk now vs. not
> being hung over tomorrow vs. not fucking up your life ten years later.",
>
> "I tend to think about my dreams before I sleep.", "@MichaelAvenatti
> @SenatorCollins So,  if your client was in her 20s, attending parties with
> teenagers, doesn't that make her at the least immature as hell, or at the
> worst, a pedophile and a person contributing to the delinquency of
> minors?",
>
>
> "i wish i could take credit for this"), lat = c(43.6835853, 40.284123,
>
> 37.7706565, 40.431389, 31.1688935, 33.9376735), lng = c(-70.3284118,
>
> -83.078589, -122.4359785, -79.9806895, -100.0768885, -118.130426
>
> ), county_name = c("Cumberland County", "Delaware County", "San Francisco
> County",
>
> "Allegheny County", "Concho County", "Los Angeles County"), fips =
> c(23005L,
>
>
> 39041L, 6075L, 42003L, 48095L, 6037L), state_name = c("Maine",
>
> "Ohio", "California", "Pennsylvania", "Texas", "California"),
>
>     state_abb = c("ME", "OH", "CA", "PA", "TX", "CA"), urban_level =
> c("Medium Metro",
>
>     "Large Fringe Metro", "Large Central Metro", "Large Central Metro",
>
>     "NonCore (Nonmetro)", "Large Central Metro"), urban_code = c(3L,
>
>     2L, 1L, 1L, 6L, 1L), population = c(277308L, 184029L, 830781L,
>
>     1160433L, 4160L, 9509611L)), class = "data.frame", row.names = c(NA,
>
> -6L))
>
>
> st <- structure(list(terms = c("me abused depressed", "me hurt depressed",
>
> "feel hopeless depressed", "feel alone depressed", "i feel helpless",
>
> "i feel worthless")), row.names = c(NA, -6L), class = c("tbl_df",
>
> "tbl", "data.frame"))
>
> On Tue, Oct 16, 2018 at 2:39 PM Nathan Parsons <nathan.f.parsons at gmail.com
> >
> wrote:
>
> > Thanks all for your patience. Here?s a second go that is perhaps more
> > explicative of what it is I am trying to accomplish (and hopefully in
> plain
> > text form)...
> >
> >
> > I?m using the following packages: tidyverse, purrr, tidytext
> >
> >
> > I have a number of tweets in the following form:
> >
> >
> > th <- structure(list(status_id = c("x1047841705729306624",
> > "x1046966595610927105",
> >
> > "x1047094786610552832", "x1046988542818308097", "x1046934493553221632",
> >
> > "x1047227442899775488"), created_at = c("2018-10-04T13:31:45Z",
> >
> > "2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",
> >
> > "2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z"), text = c("Technique is
> > everything with olympic lifts ! @ Body By John https://t.co/UsfR6DafZt",
> >
> > "@Subtronics just went back and rewatched ur FBlice with ur CDJs and let
> > me tell you man. You are the fucking messiah",
> >
> > "@ic4rus1 Opportunistic means short-game. As in getting drunk now vs. not
> > being hung over tomorrow vs. not fucking up your life ten years later.",
> >
> > "I tend to think about my dreams before I sleep.", "@MichaelAvenatti
> > @SenatorCollins So, if your client was in her 20s, attending parties with
> > teenagers, doesn't that make her at the least immature as hell, or at the
> > worst, a pedophile and a person contributing to the delinquency of
> minors?",
> >
> > "i wish i could take credit for this"), lat = c(43.6835853, 40.284123,
> >
> > 37.7706565, 40.431389, 31.1688935, 33.9376735), lng = c(-70.3284118,
> >
> > -83.078589, -122.4359785, -79.9806895, -100.0768885, -118.130426
> >
> > ), county_name = c("Cumberland County", "Delaware County", "San Francisco
> > County",
> >
> > "Allegheny County", "Concho County", "Los Angeles County"), fips =
> > c(23005L,
> >
> > 39041L, 6075L, 42003L, 48095L, 6037L), state_name = c("Maine",
> >
> > "Ohio", "California", "Pennsylvania", "Texas", "California"),
> >
> > state_abb = c("ME", "OH", "CA", "PA", "TX", "CA"), urban_level =
> c("Medium
> > Metro",
> >
> > "Large Fringe Metro", "Large Central Metro", "Large Central Metro",
> >
> > "NonCore (Nonmetro)", "Large Central Metro"), urban_code = c(3L,
> >
> > 2L, 1L, 1L, 6L, 1L), population = c(277308L, 184029L, 830781L,
> >
> > 1160433L, 4160L, 9509611L)), class = c("data.table", "data.frame"
> >
> > ), row.names = c(NA, -6L), .internal.selfref = )
> >
> >
> > I also have a number of search terms in the following form:
> >
> >
> > st <- structure(list(terms = c("me abused depressed", "me hurt
> depressed",
> >
> > "feel hopeless depressed", "feel alone depressed", "i feel helpless",
> >
> > "i feel worthless")), row.names = c(NA, -6L), class = c("tbl_df",
> >
> > "tbl", "data.frame?))
> >
> >
> > I am trying to isolate the tweets that contain all of the words in each
> of
> > the search terms, i.e ?me? ?abused? and ?depressed? from the first
> example
> > search term, but they do not have to be in order or even next to one
> > another.
> >
> >
> > I am familiar with the dplyr suite of tools and have been attempting to
> > generate some sort of ?filter()? to do this. I am not very familiar with
> > purrr, but there may be a solution using the map function? I have also
> > explored the tidytext ?unnest_tokens? function which transforms the ?th?
> > data in the following way:
> >
> >
> > > tidytext::unnest_tokens(th, word, text, token = "tweets") -> tt
> >
> > > head(tt)
> >
> > status_id created_at lat lng
> >
> > 1: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
> >
> > 2: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
> >
> > 3: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
> >
> > 4: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
> >
> > 5: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
> >
> > 6: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
> >
> > county_name fips state_name state_abb urban_level urban_code
> >
> > 1: Cumberland County 23005 Maine ME Medium Metro 3
> >
> > 2: Cumberland County 23005 Maine ME Medium Metro 3
> >
> > 3: Cumberland County 23005 Maine ME Medium Metro 3
> >
> > 4: Cumberland County 23005 Maine ME Medium Metro 3
> >
> > 5: Cumberland County 23005 Maine ME Medium Metro 3
> >
> > 6: Cumberland County 23005 Maine ME Medium Metro 3
> >
> > population word
> >
> > 1: 277308 technique
> >
> > 2: 277308 is
> >
> > 3: 277308 everything
> >
> > 4: 277308 with
> >
> > 5: 277308 olympic
> >
> > 6: 277308 lifts
> >
> >
> > but once I have unnested the tokens, I am unable to recombine them back
> > into tweets.
> >
> >
> > Ideally the end result would append a new column to the ?th? data that
> > would flag a tweet that contained all of the search words for any of the
> > search terms; so the work flow would look like
> >
> > 1) look for all search words for one search term in a tweet
> >
> > 2) if all of the search words in the search term are found, create a flag
> > (mutate(flag = 1) or some such)
> >
> > 3) do this for all of the tweets
> >
> > 4) move on the next search term and repeat
> >
> >
> > Again, my thanks for your patience.
> >
> >
> > --
> >
> >
> > Nate Parsons
> >
> > Pronouns: He, Him, His
> >
> > Graduate Teaching Assistant
> >
> > Department of Sociology
> >
> > Portland State University
> >
> > Portland, Oregon
> >
> >
> > 503-725-9025
> >
> > 503-725-3957 FAX
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @ending from gm@il@com  Wed Oct 17 04:20:02 2018
From: bgunter@4567 @ending from gm@il@com (Bert Gunter)
Date: Tue, 16 Oct 2018 19:20:02 -0700
Subject: [R] 
 Matching multiple search criteria (Unlisting a nested dataset,
 take 2)
In-Reply-To: <CAGxFJbQmPf=vqRU0iLgEBGyTtUXL_GX8Kd3Bgdq796QhpQxUXA@mail.gmail.com>
References: <CANdqJqdP2bDdVNc=8R7jeXYU94p_=3BNmwrt11zwh7OdOaEfZA@mail.gmail.com>
 <CANdqJqfCZU96s3XtVWwDYgmmh4LOJe-3896xxO4Ye4aMGaoDWg@mail.gmail.com>
 <CAGxFJbQmPf=vqRU0iLgEBGyTtUXL_GX8Kd3Bgdq796QhpQxUXA@mail.gmail.com>
Message-ID: <CAGxFJbRFJjwWjMWSLJMDVtwqWwNd0K36rHLyJiL63nmwVGZBZQ@mail.gmail.com>

OK, as no one else has offered a solution, I'll take a whack at it.

Caveats: This is a brute force attempt using R's basic regular expression
engine. It is inelegant and barely tested, so likely to be at best
incomplete and buggy, and at worst, incorrect. But maybe Nathan or someone
else on the list can fix it up. So if (when) it breaks, complain on the
list to give someone (almost certainly not me) the opportunity.

The basic idea is that the tweets are just character strings and the search
phrases are just character vectors all of whose elements must match
"appropriately" -- i.e. they must match whole words -- in the character
strings. So my desired output from the code is a list indexed by the search
phrases, each of whose components if a logical vector of length the number
of tweets each of whose elements = TRUE iff all the words in the search
phrase match somewhere in the tweet.

Here's the code(using the data Nathan provided):

> words <- sapply(st[[1]],strsplit,split = " +" )
## convert the phrases to a list of character vectors of the words
## Result:
> words
$`me abused depressed`
[1] "me"        "abused"    "depressed"

$`me hurt depressed`
[1] "me"        "hurt"      "depressed"

$`feel hopeless depressed`
[1] "feel"      "hopeless"  "depressed"

$`feel alone depressed`
[1] "feel"      "alone"     "depressed"

$`i feel helpless`
[1] "i"        "feel"     "helpless"

$`i feel worthless`
[1] "i"         "feel"      "worthless"

> expand.words <-  function(z)lapply(z,function(x)paste0(c("^ *"," ","
"),x, c(" "," "," *$")))
## function to create regexes for words when they are at the beginning,
middle, or end of tweets

> wordregex <- lapply(words,expand.words)
##Result
## too lengthy to include
##
> tweets <- th$text
##extract the tweets
> findin <- function(x,y)
   ## x is a vector of regex patterns
   ## y is a character vector
   ## value = vector,vec, with length(vec) == length(y) and vec[i] == TRUE
iff any of x matches y[i]
{ apply(sapply(x,function(z)grepl(z,y)), 1,any)
}

## add a matching "tweet" to the tweet vector:
> tweets <- c(tweets," i xxxx worthless yxxc ght feel")

> ans <-
lapply(wordregex,function(z)apply(sapply(z,function(x)findin(x,tweets)), 1,
all))
## Result:
> ans
$`me abused depressed`
[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE

$`me hurt depressed`
[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE

$`feel hopeless depressed`
[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE

$`feel alone depressed`
[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE

$`i feel helpless`
[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE

$`i feel worthless`
[1] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE

## None of the tweets match any of the phrases except for the last tweet
that I added.

## Note: you need to add capabilities to handle upper and lower case. See,
e.g. ?casefold

Cheers,
Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Oct 16, 2018 at 3:03 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> The problem wasn't the data tibbles. You posted in html -- which you were
> explictly warned against -- and that corrupted your text (e.g. some quotes
> became "smart quotes", which cannot be properly cut and pasted into R).
>
> Bert
>
>
> On Tue, Oct 16, 2018 at 2:47 PM Nathan Parsons <nathan.f.parsons at gmail.com>
> wrote:
>
>> Argh! Here are those two example datasets as data frames (not tibbles).
>> Sorry again. This apparently is just not my day.
>>
>>
>> th <- structure(list(status_id = c("x1047841705729306624",
>> "x1046966595610927105",
>>
>> "x1047094786610552832", "x1046988542818308097", "x1046934493553221632",
>>
>> "x1047227442899775488"), created_at = c("2018-10-04T13:31:45Z",
>>
>> "2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",
>>
>> "2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z"), text = c("Technique is
>> everything with olympic lifts ! @ Body By John https://t.co/UsfR6DafZt",
>>
>> "@Subtronics just went back and rewatched ur FBlice with ur CDJs and let
>> me
>> tell you man. You are the fucking messiah",
>>
>> "@ic4rus1 Opportunistic means short-game. As in getting drunk now vs. not
>> being hung over tomorrow vs. not fucking up your life ten years later.",
>>
>> "I tend to think about my dreams before I sleep.", "@MichaelAvenatti
>> @SenatorCollins So,  if your client was in her 20s, attending parties with
>> teenagers, doesn't that make her at the least immature as hell, or at the
>> worst, a pedophile and a person contributing to the delinquency of
>> minors?",
>>
>>
>> "i wish i could take credit for this"), lat = c(43.6835853, 40.284123,
>>
>> 37.7706565, 40.431389, 31.1688935, 33.9376735), lng = c(-70.3284118,
>>
>> -83.078589, -122.4359785, -79.9806895, -100.0768885, -118.130426
>>
>> ), county_name = c("Cumberland County", "Delaware County", "San Francisco
>> County",
>>
>> "Allegheny County", "Concho County", "Los Angeles County"), fips =
>> c(23005L,
>>
>>
>> 39041L, 6075L, 42003L, 48095L, 6037L), state_name = c("Maine",
>>
>> "Ohio", "California", "Pennsylvania", "Texas", "California"),
>>
>>     state_abb = c("ME", "OH", "CA", "PA", "TX", "CA"), urban_level =
>> c("Medium Metro",
>>
>>     "Large Fringe Metro", "Large Central Metro", "Large Central Metro",
>>
>>     "NonCore (Nonmetro)", "Large Central Metro"), urban_code = c(3L,
>>
>>     2L, 1L, 1L, 6L, 1L), population = c(277308L, 184029L, 830781L,
>>
>>     1160433L, 4160L, 9509611L)), class = "data.frame", row.names = c(NA,
>>
>> -6L))
>>
>>
>> st <- structure(list(terms = c("me abused depressed", "me hurt depressed",
>>
>> "feel hopeless depressed", "feel alone depressed", "i feel helpless",
>>
>> "i feel worthless")), row.names = c(NA, -6L), class = c("tbl_df",
>>
>> "tbl", "data.frame"))
>>
>> On Tue, Oct 16, 2018 at 2:39 PM Nathan Parsons <
>> nathan.f.parsons at gmail.com>
>> wrote:
>>
>> > Thanks all for your patience. Here?s a second go that is perhaps more
>> > explicative of what it is I am trying to accomplish (and hopefully in
>> plain
>> > text form)...
>> >
>> >
>> > I?m using the following packages: tidyverse, purrr, tidytext
>> >
>> >
>> > I have a number of tweets in the following form:
>> >
>> >
>> > th <- structure(list(status_id = c("x1047841705729306624",
>> > "x1046966595610927105",
>> >
>> > "x1047094786610552832", "x1046988542818308097", "x1046934493553221632",
>> >
>> > "x1047227442899775488"), created_at = c("2018-10-04T13:31:45Z",
>> >
>> > "2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",
>> >
>> > "2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z"), text = c("Technique is
>> > everything with olympic lifts ! @ Body By John https://t.co/UsfR6DafZt
>> ",
>> >
>> > "@Subtronics just went back and rewatched ur FBlice with ur CDJs and let
>> > me tell you man. You are the fucking messiah",
>> >
>> > "@ic4rus1 Opportunistic means short-game. As in getting drunk now vs.
>> not
>> > being hung over tomorrow vs. not fucking up your life ten years later.",
>> >
>> > "I tend to think about my dreams before I sleep.", "@MichaelAvenatti
>> > @SenatorCollins So, if your client was in her 20s, attending parties
>> with
>> > teenagers, doesn't that make her at the least immature as hell, or at
>> the
>> > worst, a pedophile and a person contributing to the delinquency of
>> minors?",
>> >
>> > "i wish i could take credit for this"), lat = c(43.6835853, 40.284123,
>> >
>> > 37.7706565, 40.431389, 31.1688935, 33.9376735), lng = c(-70.3284118,
>> >
>> > -83.078589, -122.4359785, -79.9806895, -100.0768885, -118.130426
>> >
>> > ), county_name = c("Cumberland County", "Delaware County", "San
>> Francisco
>> > County",
>> >
>> > "Allegheny County", "Concho County", "Los Angeles County"), fips =
>> > c(23005L,
>> >
>> > 39041L, 6075L, 42003L, 48095L, 6037L), state_name = c("Maine",
>> >
>> > "Ohio", "California", "Pennsylvania", "Texas", "California"),
>> >
>> > state_abb = c("ME", "OH", "CA", "PA", "TX", "CA"), urban_level =
>> c("Medium
>> > Metro",
>> >
>> > "Large Fringe Metro", "Large Central Metro", "Large Central Metro",
>> >
>> > "NonCore (Nonmetro)", "Large Central Metro"), urban_code = c(3L,
>> >
>> > 2L, 1L, 1L, 6L, 1L), population = c(277308L, 184029L, 830781L,
>> >
>> > 1160433L, 4160L, 9509611L)), class = c("data.table", "data.frame"
>> >
>> > ), row.names = c(NA, -6L), .internal.selfref = )
>> >
>> >
>> > I also have a number of search terms in the following form:
>> >
>> >
>> > st <- structure(list(terms = c("me abused depressed", "me hurt
>> depressed",
>> >
>> > "feel hopeless depressed", "feel alone depressed", "i feel helpless",
>> >
>> > "i feel worthless")), row.names = c(NA, -6L), class = c("tbl_df",
>> >
>> > "tbl", "data.frame?))
>> >
>> >
>> > I am trying to isolate the tweets that contain all of the words in each
>> of
>> > the search terms, i.e ?me? ?abused? and ?depressed? from the first
>> example
>> > search term, but they do not have to be in order or even next to one
>> > another.
>> >
>> >
>> > I am familiar with the dplyr suite of tools and have been attempting to
>> > generate some sort of ?filter()? to do this. I am not very familiar with
>> > purrr, but there may be a solution using the map function? I have also
>> > explored the tidytext ?unnest_tokens? function which transforms the ?th?
>> > data in the following way:
>> >
>> >
>> > > tidytext::unnest_tokens(th, word, text, token = "tweets") -> tt
>> >
>> > > head(tt)
>> >
>> > status_id created_at lat lng
>> >
>> > 1: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>> >
>> > 2: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>> >
>> > 3: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>> >
>> > 4: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>> >
>> > 5: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>> >
>> > 6: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>> >
>> > county_name fips state_name state_abb urban_level urban_code
>> >
>> > 1: Cumberland County 23005 Maine ME Medium Metro 3
>> >
>> > 2: Cumberland County 23005 Maine ME Medium Metro 3
>> >
>> > 3: Cumberland County 23005 Maine ME Medium Metro 3
>> >
>> > 4: Cumberland County 23005 Maine ME Medium Metro 3
>> >
>> > 5: Cumberland County 23005 Maine ME Medium Metro 3
>> >
>> > 6: Cumberland County 23005 Maine ME Medium Metro 3
>> >
>> > population word
>> >
>> > 1: 277308 technique
>> >
>> > 2: 277308 is
>> >
>> > 3: 277308 everything
>> >
>> > 4: 277308 with
>> >
>> > 5: 277308 olympic
>> >
>> > 6: 277308 lifts
>> >
>> >
>> > but once I have unnested the tokens, I am unable to recombine them back
>> > into tweets.
>> >
>> >
>> > Ideally the end result would append a new column to the ?th? data that
>> > would flag a tweet that contained all of the search words for any of the
>> > search terms; so the work flow would look like
>> >
>> > 1) look for all search words for one search term in a tweet
>> >
>> > 2) if all of the search words in the search term are found, create a
>> flag
>> > (mutate(flag = 1) or some such)
>> >
>> > 3) do this for all of the tweets
>> >
>> > 4) move on the next search term and repeat
>> >
>> >
>> > Again, my thanks for your patience.
>> >
>> >
>> > --
>> >
>> >
>> > Nate Parsons
>> >
>> > Pronouns: He, Him, His
>> >
>> > Graduate Teaching Assistant
>> >
>> > Department of Sociology
>> >
>> > Portland State University
>> >
>> > Portland, Oregon
>> >
>> >
>> > 503-725-9025
>> >
>> > 503-725-3957 FAX
>> >
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From mxnilmx @ending from gm@il@com  Wed Oct 17 16:07:20 2018
From: mxnilmx @ending from gm@il@com (Nielson Pasqualotto)
Date: Wed, 17 Oct 2018 11:07:20 -0300
Subject: [R] Random selection of points in SpatialPointsDataFrame with
 distance constraint
Message-ID: <CAPAP8wZgKKcgXT2Kq3ztsa=Trh+FM8Hpvw+C-5q84=HE6hZihA@mail.gmail.com>

I'm trying to select points randomly (without replacement) from a
SpatialPointsDataFrame (input object) with a minimum distance of 3,000
meters between them. I want to get random 50% of all points and create a
vector object with lines index as result. I tried to use sample() function
but I still did not realised how to set the geographical constraint. I'll
appreciate any help.

> input
class       : SpatialPointsDataFrame
features    : 205
extent      : 203294.5, 259880.6, 7600123, 7668676  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=utm +zone=23 +south +ellps=GRS80 +units=m +no_defs
variables   : 3
names       :     Sites, Long_X,   Lat_Y
min values  : CPF - 050, 203295, 7600120
max values  : JES - S94, 259881, 7668680

> head(input)
  Sites Long_X   Lat_Y1 CPF - 050 235441 76171502 CPF - 052 234106
76157403 CPF - 054 232683 76142804 CPF - 056 233863 76144205 CPF - 058
234012 76128906 CPF - 062 236929 7612850

rdm_input <- sample(x= nrow(input), size=(0.5*205), replace= FALSE)[1]
167 189 79 80 126 129 144 100 4 109 170 72 123 73 132 93 169 5 134 176
196 158 152 183 23 136 180[28] 130 12 142 179 11 13 66 22 2 96 29 54
137 120 171 184 36 113 3 81 115  30 85 61 162 98 102[55] 103 181 90
133 56 174 76 201 150 197 14 86 118 121 28 97 160 178 1 186 141 163
172 32 65 168 74[82] 114 182 128 131 67 70 165 187 185 69 17 194 16
154 119 192 156 106  25 101 198 105 108 151 125 190 10[109] 84 38 51
161 40 94 45 19 145 75 42 122 117 49 87


MSc. Nielson Pasqualotto
Doutorando pelo Programa de P?s-Gradua??o em Ecologia Aplicada
(ESALQ/CENA/USP)
Bi?logo e Mestre em Ci?ncias pela Universidade de S?o Paulo (USP).
Laborat?rio de Ecologia e Conserva??o (LAEC).
Av. Bandeirantes, 3900. Bairro Monte Alegre, Ribeir?o Preto, S?o Paulo,
Brasil.

	[[alternative HTML version deleted]]


From n@th@n@f@p@r@on@ @ending from gm@il@com  Wed Oct 17 18:19:53 2018
From: n@th@n@f@p@r@on@ @ending from gm@il@com (Nathan Parsons)
Date: Wed, 17 Oct 2018 09:19:53 -0700
Subject: [R] 
 Matching multiple search criteria (Unlisting a nested dataset,
 take 2)
In-Reply-To: <CAGxFJbRFJjwWjMWSLJMDVtwqWwNd0K36rHLyJiL63nmwVGZBZQ@mail.gmail.com>
References: <CANdqJqdP2bDdVNc=8R7jeXYU94p_=3BNmwrt11zwh7OdOaEfZA@mail.gmail.com>
 <CANdqJqfCZU96s3XtVWwDYgmmh4LOJe-3896xxO4Ye4aMGaoDWg@mail.gmail.com>
 <CAGxFJbQmPf=vqRU0iLgEBGyTtUXL_GX8Kd3Bgdq796QhpQxUXA@mail.gmail.com>
 <CAGxFJbRFJjwWjMWSLJMDVtwqWwNd0K36rHLyJiL63nmwVGZBZQ@mail.gmail.com>
Message-ID: <4e06312a-10f4-4524-a82f-9f7618e435fb@Spark>

I do not have your command of base r, Bert. That is a herculean effort! Here?s what I spent my night putting together:

## Create search terms
## dput(st)
st <- structure(list(word1 = c("technique", "me", "me", "feel", "feel"
), word2 = c("olympic", "abused", "hurt", "hopeless", "alone"
), word3 = c("lifts", "depressed", "depressed", "depressed",
"depressed")), class = c("tbl_df", "tbl", "data.frame"), row.names = c(NA,
-5L))

## Create tweets
## dput(th)
th <- structure(list(status_id = c("x1047841705729306624", "x1046966595610927105",
"x1047094786610552832", "x1046988542818308097", "x1046934493553221632",
"x1047227442899775488", "x1048126008941981696", "x1047798782673543173",
"x1048269727582355457", "x1048092408544677890"), created_at = c("2018-10-04T13:31:45Z",
"2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",
"2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z", "2018-10-05T08:21:28Z",
"2018-10-04T10:41:11Z", "2018-10-05T17:52:33Z", "2018-10-05T06:07:57Z"
), text = c("technique is everything with olympic lifts ! @ body by john ",
"@subtronics just went back and rewatched ur fblice with ur cdjs and let me tell you man. you are the fucking messiah",
"@ic4rus1 opportunistic means short-game. as in getting drunk now vs. not being hung over tomorrow vs. not fucking up your life ten years later.",
"i tend to think about my dreams before i sleep.", "@michaelavenatti @senatorcollins so if your client was in her 20s attending parties with teenagers doesnt that make her at the least immature as hell or at the worst a pedophile and a person contributing to the delinquency of minors?",
"i wish i could take credit for this", "i woulda never imagined. #lakeshow ",
"@philipbloom @blackmagic_news its ok phil! i feel your pain! ",
"sunday ill have a booth in katy at the real craft wives of katy fest @nolabelbrewco cmon yall!everything is better when you top it with tias!order today we ship to all 50 ",
"dolly is so baddd"), lat = c(43.6835853, 40.284123, 37.7706565,
40.431389, 31.1688935, 33.9376735, 34.0207895, 44.900818, 29.7926,
32.364145), lng = c(-70.3284118, -83.078589, -122.4359785, -79.9806895,
-100.0768885, -118.130426, -118.4119065, -89.5694915, -95.8224,
-86.2447285), county_name = c("Cumberland County", "Delaware County",
"San Francisco County", "Allegheny County", "Concho County",
"Los Angeles County", "Los Angeles County", "Marathon County",
"Harris County", "Montgomery County"), fips = c(23005L, 39041L,
6075L, 42003L, 48095L, 6037L, 6037L, 55073L, 48201L, 1101L),
state_name = c("Maine", "Ohio", "California", "Pennsylvania",
"Texas", "California", "California", "Wisconsin", "Texas",
"Alabama"), state_abb = c("ME", "OH", "CA", "PA", "TX", "CA",
"CA", "WI", "TX", "AL"), urban_level = c("Medium Metro",
"Large Fringe Metro", "Large Central Metro", "Large Central Metro",
"NonCore (Nonmetro)", "Large Central Metro", "Large Central Metro",
"Small Metro", "Large Central Metro", "Medium Metro"), urban_code = c(3L,
2L, 1L, 1L, 6L, 1L, 1L, 4L, 1L, 3L), population = c(277308L,
184029L, 830781L, 1160433L, 4160L, 9509611L, 9509611L, 127612L,
4233913L, 211037L), linenumber = 1:10), row.names = c(NA,
10L), class = "data.frame")

## Clean tweets - basically just remove everything we don?t need from the text including punctuation and urls
th %>%
mutate(linenumber = row_number(),
text = str_remove_all(text, "[^\x01-\x7F]"),
text = str_remove_all(text, "\n"),
text = str_remove_all(text, ","),
text = str_remove_all(text, "'"),
text = str_remove_all(text, "&"),
text = str_remove_all(text, "<"),
text = str_remove_all(text, ">"),
text = str_remove_all(text, "http[s]?://[[:alnum:].\\/]+"),
text = tolower(text)) -> th

## Create search function that looks for each search term in the provided string, evaluates if all three search terms have been found, and returns a logical
srchr <- function(df) {
str_detect(df, "olympic") -> a
str_detect(df, "technique") -> b
str_detect(df, "lifts") -> c
ifelse(a == TRUE & b == TRUE & c == TRUE, TRUE, FALSE)
}

## Evaluate tweets for presence of search term
th %>%
mutate(flag = map_chr(text, srchr)) -> th_flagged

As far as I can tell, this works. I have to manually enter each set of search terms into the function, which is not ideal. Also, this only generates a True/False for each tweet based on one search term - I end up with an evaluatory column for each search term that I would then have to collapse together somehow. I?m sure there?s a more elegant solution.

--

Nate Parsons
Pronouns: He, Him, His
Graduate Teaching Assistant
Department of Sociology
Portland State University
Portland, Oregon

503-725-9025
503-725-3957 FAX
On Oct 16, 2018, 7:20 PM -0700, Bert Gunter <bgunter.4567 at gmail.com>, wrote:
> OK, as no one else has offered a solution, I'll take a whack at it.
>
> Caveats: This is a brute force attempt using R's basic regular expression engine. It is inelegant and barely tested, so likely to be at best incomplete and buggy, and at worst, incorrect. But maybe Nathan or someone else on the list can fix it up. So if (when) it breaks, complain on the list to give someone (almost certainly not me) the opportunity.
>
> The basic idea is that the tweets are just character strings and the search phrases are just character vectors all of whose elements must match "appropriately" -- i.e. they must match whole words -- in the character strings. So my desired output from the code is a list indexed by the search phrases, each of whose components if a logical vector of length the number of tweets each of whose elements = TRUE iff all the words in the search phrase match somewhere in the tweet.
>
> Here's the code(using the data Nathan provided):
>
> > words <- sapply(st[[1]],strsplit,split = " +" )
> ## convert the phrases to a list of character vectors of the words
> ## Result:
> > words
> $`me abused depressed`
> [1] "me"??????? "abused"??? "depressed"
>
> $`me hurt depressed`
> [1] "me"??????? "hurt"????? "depressed"
>
> $`feel hopeless depressed`
> [1] "feel"????? "hopeless"? "depressed"
>
> $`feel alone depressed`
> [1] "feel"????? "alone"???? "depressed"
>
> $`i feel helpless`
> [1] "i"??????? "feel"???? "helpless"
>
> $`i feel worthless`
> [1] "i"???????? "feel"????? "worthless"
>
> > expand.words <-? function(z)lapply(z,function(x)paste0(c("^ *"," "," "),x, c(" "," "," *$")))
> ## function to create regexes for words when they are at the beginning, middle, or end of tweets
>
> > wordregex <- lapply(words,expand.words)
> ##Result
> ## too lengthy to include
> ##
> > tweets <- th$text
> ##extract the tweets
> > findin <- function(x,y)
> ?? ## x is a vector of regex patterns
> ?? ## y is a character vector
> ?? ## value = vector,vec, with length(vec) == length(y) and vec[i] == TRUE iff any of x matches y[i]
> { apply(sapply(x,function(z)grepl(z,y)), 1,any)
> }
>
> ## add a matching "tweet" to the tweet vector:
> > tweets <- c(tweets," i xxxx worthless yxxc ght feel")
>
> > ans <- lapply(wordregex,function(z)apply(sapply(z,function(x)findin(x,tweets)), 1, all))
> ## Result:
> > ans
> $`me abused depressed`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>
> $`me hurt depressed`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>
> $`feel hopeless depressed`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>
> $`feel alone depressed`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>
> $`i feel helpless`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>
> $`i feel worthless`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE? TRUE
>
> ## None of the tweets match any of the phrases except for the last tweet that I added.
>
> ## Note: you need to add capabilities to handle upper and lower case. See, e.g. ?casefold
>
> Cheers,
> Bert
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> > On Tue, Oct 16, 2018 at 3:03 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
> > > The problem wasn't the data tibbles. You posted in html -- which you were explictly warned against -- and that corrupted your text (e.g. some quotes became "smart quotes", which cannot be properly cut and pasted into R).
> > >
> > > Bert
> > >
> > >
> > > > On Tue, Oct 16, 2018 at 2:47 PM Nathan Parsons <nathan.f.parsons at gmail.com> wrote:
> > > > > Argh! Here are those two example datasets as data frames (not tibbles).
> > > > > Sorry again. This apparently is just not my day.
> > > > >
> > > > >
> > > > > th <- structure(list(status_id = c("x1047841705729306624",
> > > > > "x1046966595610927105",
> > > > >
> > > > > "x1047094786610552832", "x1046988542818308097", "x1046934493553221632",
> > > > >
> > > > > "x1047227442899775488"), created_at = c("2018-10-04T13:31:45Z",
> > > > >
> > > > > "2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",
> > > > >
> > > > > "2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z"), text = c("Technique is
> > > > > everything with olympic lifts ! @ Body By John https://t.co/UsfR6DafZt",
> > > > >
> > > > > "@Subtronics just went back and rewatched ur FBlice with ur CDJs and let me
> > > > > tell you man. You are the fucking messiah",
> > > > >
> > > > > "@ic4rus1 Opportunistic means short-game. As in getting drunk now vs. not
> > > > > being hung over tomorrow vs. not fucking up your life ten years later.",
> > > > >
> > > > > "I tend to think about my dreams before I sleep.", "@MichaelAvenatti
> > > > > @SenatorCollins So,? if your client was in her 20s, attending parties with
> > > > > teenagers, doesn't that make her at the least immature as hell, or at the
> > > > > worst, a pedophile and a person contributing to the delinquency of minors?",
> > > > >
> > > > >
> > > > > "i wish i could take credit for this"), lat = c(43.6835853, 40.284123,
> > > > >
> > > > > 37.7706565, 40.431389, 31.1688935, 33.9376735), lng = c(-70.3284118,
> > > > >
> > > > > -83.078589, -122.4359785, -79.9806895, -100.0768885, -118.130426
> > > > >
> > > > > ), county_name = c("Cumberland County", "Delaware County", "San Francisco
> > > > > County",
> > > > >
> > > > > "Allegheny County", "Concho County", "Los Angeles County"), fips = c(23005L,
> > > > >
> > > > >
> > > > > 39041L, 6075L, 42003L, 48095L, 6037L), state_name = c("Maine",
> > > > >
> > > > > "Ohio", "California", "Pennsylvania", "Texas", "California"),
> > > > >
> > > > > ? ? state_abb = c("ME", "OH", "CA", "PA", "TX", "CA"), urban_level =
> > > > > c("Medium Metro",
> > > > >
> > > > > ? ? "Large Fringe Metro", "Large Central Metro", "Large Central Metro",
> > > > >
> > > > > ? ? "NonCore (Nonmetro)", "Large Central Metro"), urban_code = c(3L,
> > > > >
> > > > > ? ? 2L, 1L, 1L, 6L, 1L), population = c(277308L, 184029L, 830781L,
> > > > >
> > > > > ? ? 1160433L, 4160L, 9509611L)), class = "data.frame", row.names = c(NA,
> > > > >
> > > > > -6L))
> > > > >
> > > > >
> > > > > st <- structure(list(terms = c("me abused depressed", "me hurt depressed",
> > > > >
> > > > > "feel hopeless depressed", "feel alone depressed", "i feel helpless",
> > > > >
> > > > > "i feel worthless")), row.names = c(NA, -6L), class = c("tbl_df",
> > > > >
> > > > > "tbl", "data.frame"))
> > > > >
> > > > > On Tue, Oct 16, 2018 at 2:39 PM Nathan Parsons <nathan.f.parsons at gmail.com>
> > > > > wrote:
> > > > >
> > > > > > Thanks all for your patience. Here?s a second go that is perhaps more
> > > > > > explicative of what it is I am trying to accomplish (and hopefully in plain
> > > > > > text form)...
> > > > > >
> > > > > >
> > > > > > I?m using the following packages: tidyverse, purrr, tidytext
> > > > > >
> > > > > >
> > > > > > I have a number of tweets in the following form:
> > > > > >
> > > > > >
> > > > > > th <- structure(list(status_id = c("x1047841705729306624",
> > > > > > "x1046966595610927105",
> > > > > >
> > > > > > "x1047094786610552832", "x1046988542818308097", "x1046934493553221632",
> > > > > >
> > > > > > "x1047227442899775488"), created_at = c("2018-10-04T13:31:45Z",
> > > > > >
> > > > > > "2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",
> > > > > >
> > > > > > "2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z"), text = c("Technique is
> > > > > > everything with olympic lifts ! @ Body By John https://t.co/UsfR6DafZt",
> > > > > >
> > > > > > "@Subtronics just went back and rewatched ur FBlice with ur CDJs and let
> > > > > > me tell you man. You are the fucking messiah",
> > > > > >
> > > > > > "@ic4rus1 Opportunistic means short-game. As in getting drunk now vs. not
> > > > > > being hung over tomorrow vs. not fucking up your life ten years later.",
> > > > > >
> > > > > > "I tend to think about my dreams before I sleep.", "@MichaelAvenatti
> > > > > > @SenatorCollins So, if your client was in her 20s, attending parties with
> > > > > > teenagers, doesn't that make her at the least immature as hell, or at the
> > > > > > worst, a pedophile and a person contributing to the delinquency of minors?",
> > > > > >
> > > > > > "i wish i could take credit for this"), lat = c(43.6835853, 40.284123,
> > > > > >
> > > > > > 37.7706565, 40.431389, 31.1688935, 33.9376735), lng = c(-70.3284118,
> > > > > >
> > > > > > -83.078589, -122.4359785, -79.9806895, -100.0768885, -118.130426
> > > > > >
> > > > > > ), county_name = c("Cumberland County", "Delaware County", "San Francisco
> > > > > > County",
> > > > > >
> > > > > > "Allegheny County", "Concho County", "Los Angeles County"), fips =
> > > > > > c(23005L,
> > > > > >
> > > > > > 39041L, 6075L, 42003L, 48095L, 6037L), state_name = c("Maine",
> > > > > >
> > > > > > "Ohio", "California", "Pennsylvania", "Texas", "California"),
> > > > > >
> > > > > > state_abb = c("ME", "OH", "CA", "PA", "TX", "CA"), urban_level = c("Medium
> > > > > > Metro",
> > > > > >
> > > > > > "Large Fringe Metro", "Large Central Metro", "Large Central Metro",
> > > > > >
> > > > > > "NonCore (Nonmetro)", "Large Central Metro"), urban_code = c(3L,
> > > > > >
> > > > > > 2L, 1L, 1L, 6L, 1L), population = c(277308L, 184029L, 830781L,
> > > > > >
> > > > > > 1160433L, 4160L, 9509611L)), class = c("data.table", "data.frame"
> > > > > >
> > > > > > ), row.names = c(NA, -6L), .internal.selfref = )
> > > > > >
> > > > > >
> > > > > > I also have a number of search terms in the following form:
> > > > > >
> > > > > >
> > > > > > st <- structure(list(terms = c("me abused depressed", "me hurt depressed",
> > > > > >
> > > > > > "feel hopeless depressed", "feel alone depressed", "i feel helpless",
> > > > > >
> > > > > > "i feel worthless")), row.names = c(NA, -6L), class = c("tbl_df",
> > > > > >
> > > > > > "tbl", "data.frame?))
> > > > > >
> > > > > >
> > > > > > I am trying to isolate the tweets that contain all of the words in each of
> > > > > > the search terms, i.e ?me? ?abused? and ?depressed? from the first example
> > > > > > search term, but they do not have to be in order or even next to one
> > > > > > another.
> > > > > >
> > > > > >
> > > > > > I am familiar with the dplyr suite of tools and have been attempting to
> > > > > > generate some sort of ?filter()? to do this. I am not very familiar with
> > > > > > purrr, but there may be a solution using the map function? I have also
> > > > > > explored the tidytext ?unnest_tokens? function which transforms the ?th?
> > > > > > data in the following way:
> > > > > >
> > > > > >
> > > > > > > tidytext::unnest_tokens(th, word, text, token = "tweets") -> tt
> > > > > >
> > > > > > > head(tt)
> > > > > >
> > > > > > status_id created_at lat lng
> > > > > >
> > > > > > 1: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
> > > > > >
> > > > > > 2: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
> > > > > >
> > > > > > 3: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
> > > > > >
> > > > > > 4: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
> > > > > >
> > > > > > 5: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
> > > > > >
> > > > > > 6: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
> > > > > >
> > > > > > county_name fips state_name state_abb urban_level urban_code
> > > > > >
> > > > > > 1: Cumberland County 23005 Maine ME Medium Metro 3
> > > > > >
> > > > > > 2: Cumberland County 23005 Maine ME Medium Metro 3
> > > > > >
> > > > > > 3: Cumberland County 23005 Maine ME Medium Metro 3
> > > > > >
> > > > > > 4: Cumberland County 23005 Maine ME Medium Metro 3
> > > > > >
> > > > > > 5: Cumberland County 23005 Maine ME Medium Metro 3
> > > > > >
> > > > > > 6: Cumberland County 23005 Maine ME Medium Metro 3
> > > > > >
> > > > > > population word
> > > > > >
> > > > > > 1: 277308 technique
> > > > > >
> > > > > > 2: 277308 is
> > > > > >
> > > > > > 3: 277308 everything
> > > > > >
> > > > > > 4: 277308 with
> > > > > >
> > > > > > 5: 277308 olympic
> > > > > >
> > > > > > 6: 277308 lifts
> > > > > >
> > > > > >
> > > > > > but once I have unnested the tokens, I am unable to recombine them back
> > > > > > into tweets.
> > > > > >
> > > > > >
> > > > > > Ideally the end result would append a new column to the ?th? data that
> > > > > > would flag a tweet that contained all of the search words for any of the
> > > > > > search terms; so the work flow would look like
> > > > > >
> > > > > > 1) look for all search words for one search term in a tweet
> > > > > >
> > > > > > 2) if all of the search words in the search term are found, create a flag
> > > > > > (mutate(flag = 1) or some such)
> > > > > >
> > > > > > 3) do this for all of the tweets
> > > > > >
> > > > > > 4) move on the next search term and repeat
> > > > > >
> > > > > >
> > > > > > Again, my thanks for your patience.
> > > > > >
> > > > > >
> > > > > > --
> > > > > >
> > > > > >
> > > > > > Nate Parsons
> > > > > >
> > > > > > Pronouns: He, Him, His
> > > > > >
> > > > > > Graduate Teaching Assistant
> > > > > >
> > > > > > Department of Sociology
> > > > > >
> > > > > > Portland State University
> > > > > >
> > > > > > Portland, Oregon
> > > > > >
> > > > > >
> > > > > > 503-725-9025
> > > > > >
> > > > > > 503-725-3957 FAX
> > > > > >
> > > > >
> > > > > ? ? ? ? [[alternative HTML version deleted]]
> > > > >
> > > > > ______________________________________________
> > > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > > > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > > > > and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From pwijer@tne @ending from gm@il@com  Wed Oct 17 21:48:25 2018
From: pwijer@tne @ending from gm@il@com (Peter Wijeratne)
Date: Wed, 17 Oct 2018 20:48:25 +0100
Subject: [R] Simulating data with nested random effects
Message-ID: <CAHsQySsziSS5whA_jVgk61J0wy9=v+m-3usLKMYNFdw43DPM3w@mail.gmail.com>

Hello,

I would like to simulate nested data, where my mixed effects model fitted
to real data has the form:

y ~ time + (1 | site/subject)

I then take the hyper-parameters from this model to simulate fake data,
using this function:

create_fake <- function(J,K,L,HP,t){

                                                              # J :
number of sites

                                                    # K : number of
subjects / site

                                          # L : number of years# HP:
hyperparameters from fit, y ~ time + (1 | site/subject)# t: fractional
effectiveness of treatment
time <- rep(seq(0,2,length=L), J*K)
subject <- rep(1:(J*K), each=L)
site <- sample(rep (1:J, K))
site1 <- factor(site[subject])
treatment <- sample(rep (0:1, J*K/2))
treatment1 <- treatment[subject]
# time coefficient
g.0.true <- as.numeric( HP['g.0.true'] )

                                                          # treatment
coefficient
g.1.true <- -as.numeric(t)*g.0.true
                                           # intercept
mu.a.true <- as.numeric( HP['mu.a.true'] )

                                                          # fixed
effects
b.true <- (g.0.true + g.1.true*treatment)

                                                          # random
effects
sigma.y.true <- as.numeric( HP['sigma.y.true'] ) # residual std dev
sigma.a.true <- as.numeric( HP['sigma.a.true'] ) # site std dev
sigma.a0.true <- as.numeric( HP['sigma.a0.true'] ) # site:person std
dev
a0.true <- rnorm(J*K, 0, sigma.a0.true)
a.true <- rnorm(J*K, mu.a.true + a0.true, sigma.a.true)
y <- rnorm(J*K*L, a.true[subject] + b.true[subject]*time,
sigma.y.true)
return(data.frame( y, time, subject, treatment1, site1 ))

I then fit models of the form:

y ~ time + time:treatment1 + (1 | site1/subject)

To the fake data. However, this approach can (but not always) produce a
'site' standard deviation approximately a factor of 10 less than in the
real data.

My question is - is my simulation function correct?

	[[alternative HTML version deleted]]


From bgunter@4567 @ending from gm@il@com  Thu Oct 18 04:22:03 2018
From: bgunter@4567 @ending from gm@il@com (Bert Gunter)
Date: Wed, 17 Oct 2018 19:22:03 -0700
Subject: [R] Simulating data with nested random effects
In-Reply-To: <CAHsQySsziSS5whA_jVgk61J0wy9=v+m-3usLKMYNFdw43DPM3w@mail.gmail.com>
References: <CAHsQySsziSS5whA_jVgk61J0wy9=v+m-3usLKMYNFdw43DPM3w@mail.gmail.com>
Message-ID: <CAGxFJbSpRu2fifbZXMXJzRkXUNW9J=K8y6s+y2kghjj8uiH+qQ@mail.gmail.com>

This would almost certainly fit better on the r-sig-mixed-models
list,rather than here. You are more likely to get authoritative responses
about this specialized statistical topic there.

Also -- these are **plain text** mailing lists. Please do not post in html.

Cheers,
Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Oct 17, 2018 at 5:45 PM Peter Wijeratne <pwijeratne at gmail.com>
wrote:

> Hello,
>
> I would like to simulate nested data, where my mixed effects model fitted
> to real data has the form:
>
> y ~ time + (1 | site/subject)
>
> I then take the hyper-parameters from this model to simulate fake data,
> using this function:
>
> create_fake <- function(J,K,L,HP,t){
>
>                                                               # J :
> number of sites
>
>                                                     # K : number of
> subjects / site
>
>                                           # L : number of years# HP:
> hyperparameters from fit, y ~ time + (1 | site/subject)# t: fractional
> effectiveness of treatment
> time <- rep(seq(0,2,length=L), J*K)
> subject <- rep(1:(J*K), each=L)
> site <- sample(rep (1:J, K))
> site1 <- factor(site[subject])
> treatment <- sample(rep (0:1, J*K/2))
> treatment1 <- treatment[subject]
> # time coefficient
> g.0.true <- as.numeric( HP['g.0.true'] )
>
>                                                           # treatment
> coefficient
> g.1.true <- -as.numeric(t)*g.0.true
>                                            # intercept
> mu.a.true <- as.numeric( HP['mu.a.true'] )
>
>                                                           # fixed
> effects
> b.true <- (g.0.true + g.1.true*treatment)
>
>                                                           # random
> effects
> sigma.y.true <- as.numeric( HP['sigma.y.true'] ) # residual std dev
> sigma.a.true <- as.numeric( HP['sigma.a.true'] ) # site std dev
> sigma.a0.true <- as.numeric( HP['sigma.a0.true'] ) # site:person std
> dev
> a0.true <- rnorm(J*K, 0, sigma.a0.true)
> a.true <- rnorm(J*K, mu.a.true + a0.true, sigma.a.true)
> y <- rnorm(J*K*L, a.true[subject] + b.true[subject]*time,
> sigma.y.true)
> return(data.frame( y, time, subject, treatment1, site1 ))
>
> I then fit models of the form:
>
> y ~ time + time:treatment1 + (1 | site1/subject)
>
> To the fake data. However, this approach can (but not always) produce a
> 'site' standard deviation approximately a factor of 10 less than in the
> real data.
>
> My question is - is my simulation function correct?
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @ending from gm@il@com  Thu Oct 18 04:50:49 2018
From: bgunter@4567 @ending from gm@il@com (Bert Gunter)
Date: Wed, 17 Oct 2018 19:50:49 -0700
Subject: [R] 
 Matching multiple search criteria (Unlisting a nested dataset,
 take 2)
In-Reply-To: <4e06312a-10f4-4524-a82f-9f7618e435fb@Spark>
References: <CANdqJqdP2bDdVNc=8R7jeXYU94p_=3BNmwrt11zwh7OdOaEfZA@mail.gmail.com>
 <CANdqJqfCZU96s3XtVWwDYgmmh4LOJe-3896xxO4Ye4aMGaoDWg@mail.gmail.com>
 <CAGxFJbQmPf=vqRU0iLgEBGyTtUXL_GX8Kd3Bgdq796QhpQxUXA@mail.gmail.com>
 <CAGxFJbRFJjwWjMWSLJMDVtwqWwNd0K36rHLyJiL63nmwVGZBZQ@mail.gmail.com>
 <4e06312a-10f4-4524-a82f-9f7618e435fb@Spark>
Message-ID: <CAGxFJbQabThuSjOgWaa4QT1Da3EhfjQ9W=0dNKRDtVknije5BQ@mail.gmail.com>

If you wish to use R, you need to at least understand its basic data
structures and functionality. Expecting that mimickry of code in special
packages will suffice is, I believe, an illusion. If you haven't already
done so, you should go through a basic R tutorial or two (there are many on
the web; some recommendations, by no means necessarily "the best",  can be
found here:
https://www.rstudio.com/online-learning/#r-programming).

Having said that, I realized that my previous "solution" using regular
expressions was more complicated than it needed to be and somewhat foolish
( so much for all my "expertise"). A simpler and better approach is simply
to break up both the tweet texts and your search phrases into vectors of
their "words" (i.e. character strings surrounded by spaces) using
strplit(), and then using R's built-in matching capabilities with %in%.
This is quite straightforward, pretty robust (no regex's to wrestle with),
and does not require "herculean efforts" to understand. The only wrinkle is
some bookkeeping with the "apply" family of functions. These are, as you
may know, the functional programming way of handling iteration (loops), but
they are what I would consider part of "basic" R functionality and worth
spending the time to learn about.

Herewith my better, simpler proposal, using your example data as before:

getwords <- function(x)strsplit(tolower(x),split = " +")
## split text into a vector of lower-cased "words"

phrasewords <- structure(getwords(st$terms), names = st$terms)
## named list of your search word vectors

tweets <- getwords(c(th$text, " i xxxx worthless yxxc ght feel"))
## the tweets + one additional that should match the last phrase

ans <- lapply(phrasewords, function(x) apply(sapply(tweets,function(y)x
%in% y), 2, all))
## a list indexed by the search phrases,
## with each component a vector of logicals with vec[i] == TRUE iff
## the ith tweet contains all the words in the search phrase

> ans
$`me abused depressed`
[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE

$`me hurt depressed`
[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE

$`feel hopeless depressed`
[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE

$`feel alone depressed`
[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE

$`i feel helpless`
[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE

$`i feel worthless`
[1] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE

-- Bert

On Wed, Oct 17, 2018 at 9:20 AM Nathan Parsons <nathan.f.parsons at gmail.com>
wrote:

> I do not have your command of base r, Bert. That is a herculean effort!
> Here?s what I spent my night putting together:
>
> ## Create search terms
> ## dput(st)
> st <- structure(list(word1 = c("technique", "me", "me", "feel", "feel"
> ), word2 = c("olympic", "abused", "hurt", "hopeless", "alone"
> ), word3 = c("lifts", "depressed", "depressed", "depressed",
> "depressed")), class = c("tbl_df", "tbl", "data.frame"), row.names = c(NA,
> -5L))
>
> ## Create tweets
> ## dput(th)
> th <- structure(list(status_id = c("x1047841705729306624",
> "x1046966595610927105",
> "x1047094786610552832", "x1046988542818308097", "x1046934493553221632",
> "x1047227442899775488", "x1048126008941981696", "x1047798782673543173",
> "x1048269727582355457", "x1048092408544677890"), created_at =
> c("2018-10-04T13:31:45Z",
> "2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",
> "2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z", "2018-10-05T08:21:28Z",
> "2018-10-04T10:41:11Z", "2018-10-05T17:52:33Z", "2018-10-05T06:07:57Z"
> ), text = c("technique is everything with olympic lifts ! @ body by john ",
> "@subtronics just went back and rewatched ur fblice with ur cdjs and let
> me tell you man. you are the fucking messiah",
> "@ic4rus1 opportunistic means short-game. as in getting drunk now vs. not
> being hung over tomorrow vs. not fucking up your life ten years later.",
> "i tend to think about my dreams before i sleep.", "@michaelavenatti
> @senatorcollins so if your client was in her 20s attending parties with
> teenagers doesnt that make her at the least immature as hell or at the
> worst a pedophile and a person contributing to the delinquency of minors?",
> "i wish i could take credit for this", "i woulda never imagined. #lakeshow
> ",
> "@philipbloom @blackmagic_news its ok phil! i feel your pain! ",
> "sunday ill have a booth in katy at the real craft wives of katy fest
> @nolabelbrewco cmon yall!everything is better when you top it with
> tias!order today we ship to all 50 ",
> "dolly is so baddd"), lat = c(43.6835853, 40.284123, 37.7706565,
> 40.431389, 31.1688935, 33.9376735, 34.0207895, 44.900818, 29.7926,
> 32.364145), lng = c(-70.3284118, -83.078589, -122.4359785, -79.9806895,
> -100.0768885, -118.130426, -118.4119065, -89.5694915, -95.8224,
> -86.2447285), county_name = c("Cumberland County", "Delaware County",
> "San Francisco County", "Allegheny County", "Concho County",
> "Los Angeles County", "Los Angeles County", "Marathon County",
> "Harris County", "Montgomery County"), fips = c(23005L, 39041L,
> 6075L, 42003L, 48095L, 6037L, 6037L, 55073L, 48201L, 1101L),
> state_name = c("Maine", "Ohio", "California", "Pennsylvania",
> "Texas", "California", "California", "Wisconsin", "Texas",
> "Alabama"), state_abb = c("ME", "OH", "CA", "PA", "TX", "CA",
> "CA", "WI", "TX", "AL"), urban_level = c("Medium Metro",
> "Large Fringe Metro", "Large Central Metro", "Large Central Metro",
> "NonCore (Nonmetro)", "Large Central Metro", "Large Central Metro",
> "Small Metro", "Large Central Metro", "Medium Metro"), urban_code = c(3L,
> 2L, 1L, 1L, 6L, 1L, 1L, 4L, 1L, 3L), population = c(277308L,
> 184029L, 830781L, 1160433L, 4160L, 9509611L, 9509611L, 127612L,
> 4233913L, 211037L), linenumber = 1:10), row.names = c(NA,
> 10L), class = "data.frame")
>
> ## Clean tweets - basically just remove everything we don?t need from the
> text including punctuation and urls
> th %>%
> mutate(linenumber = row_number(),
> text = str_remove_all(text, "[^\x01-\x7F]"),
> text = str_remove_all(text, "\n"),
> text = str_remove_all(text, ","),
> text = str_remove_all(text, "'"),
> text = str_remove_all(text, "&"),
> text = str_remove_all(text, "<"),
> text = str_remove_all(text, ">"),
> text = str_remove_all(text, "http[s]?://[[:alnum:].\\/]+"),
> text = tolower(text)) -> th
>
> ## Create search function that looks for each search term in the provided
> string, evaluates if all three search terms have been found, and returns a
> logical
> srchr <- function(df) {
> str_detect(df, "olympic") -> a
> str_detect(df, "technique") -> b
> str_detect(df, "lifts") -> c
> ifelse(a == TRUE & b == TRUE & c == TRUE, TRUE, FALSE)
> }
>
> ## Evaluate tweets for presence of search term
> th %>%
> mutate(flag = map_chr(text, srchr)) -> th_flagged
>
> As far as I can tell, this works. I have to manually enter each set of
> search terms into the function, which is not ideal. Also, this only
> generates a True/False for each tweet based on one search term - I end up
> with an evaluatory column for each search term that I would then have to
> collapse together somehow. I?m sure there?s a more elegant solution.
>
> --
>
> Nate Parsons
> Pronouns: He, Him, His
> Graduate Teaching Assistant
> Department of Sociology
> Portland State University
> Portland, Oregon
>
> 503-725-9025
> 503-725-3957 FAX
> On Oct 16, 2018, 7:20 PM -0700, Bert Gunter <bgunter.4567 at gmail.com>,
> wrote:
>
> OK, as no one else has offered a solution, I'll take a whack at it.
>
> Caveats: This is a brute force attempt using R's basic regular expression
> engine. It is inelegant and barely tested, so likely to be at best
> incomplete and buggy, and at worst, incorrect. But maybe Nathan or someone
> else on the list can fix it up. So if (when) it breaks, complain on the
> list to give someone (almost certainly not me) the opportunity.
>
> The basic idea is that the tweets are just character strings and the
> search phrases are just character vectors all of whose elements must match
> "appropriately" -- i.e. they must match whole words -- in the character
> strings. So my desired output from the code is a list indexed by the search
> phrases, each of whose components if a logical vector of length the number
> of tweets each of whose elements = TRUE iff all the words in the search
> phrase match somewhere in the tweet.
>
> Here's the code(using the data Nathan provided):
>
> > words <- sapply(st[[1]],strsplit,split = " +" )
> ## convert the phrases to a list of character vectors of the words
> ## Result:
> > words
> $`me abused depressed`
> [1] "me"        "abused"    "depressed"
>
> $`me hurt depressed`
> [1] "me"        "hurt"      "depressed"
>
> $`feel hopeless depressed`
> [1] "feel"      "hopeless"  "depressed"
>
> $`feel alone depressed`
> [1] "feel"      "alone"     "depressed"
>
> $`i feel helpless`
> [1] "i"        "feel"     "helpless"
>
> $`i feel worthless`
> [1] "i"         "feel"      "worthless"
>
> > expand.words <-  function(z)lapply(z,function(x)paste0(c("^ *"," ","
> "),x, c(" "," "," *$")))
> ## function to create regexes for words when they are at the beginning,
> middle, or end of tweets
>
> > wordregex <- lapply(words,expand.words)
> ##Result
> ## too lengthy to include
> ##
> > tweets <- th$text
> ##extract the tweets
> > findin <- function(x,y)
>    ## x is a vector of regex patterns
>    ## y is a character vector
>    ## value = vector,vec, with length(vec) == length(y) and vec[i] == TRUE
> iff any of x matches y[i]
> { apply(sapply(x,function(z)grepl(z,y)), 1,any)
> }
>
> ## add a matching "tweet" to the tweet vector:
> > tweets <- c(tweets," i xxxx worthless yxxc ght feel")
>
> > ans <-
> lapply(wordregex,function(z)apply(sapply(z,function(x)findin(x,tweets)), 1,
> all))
> ## Result:
> > ans
> $`me abused depressed`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>
> $`me hurt depressed`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>
> $`feel hopeless depressed`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>
> $`feel alone depressed`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>
> $`i feel helpless`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>
> $`i feel worthless`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE
>
> ## None of the tweets match any of the phrases except for the last tweet
> that I added.
>
> ## Note: you need to add capabilities to handle upper and lower case. See,
> e.g. ?casefold
>
> Cheers,
> Bert
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Tue, Oct 16, 2018 at 3:03 PM Bert Gunter <bgunter.4567 at gmail.com>
> wrote:
>
>> The problem wasn't the data tibbles. You posted in html -- which you were
>> explictly warned against -- and that corrupted your text (e.g. some quotes
>> became "smart quotes", which cannot be properly cut and pasted into R).
>>
>> Bert
>>
>>
>> On Tue, Oct 16, 2018 at 2:47 PM Nathan Parsons <
>> nathan.f.parsons at gmail.com> wrote:
>>
>>> Argh! Here are those two example datasets as data frames (not tibbles).
>>> Sorry again. This apparently is just not my day.
>>>
>>>
>>> th <- structure(list(status_id = c("x1047841705729306624",
>>> "x1046966595610927105",
>>>
>>> "x1047094786610552832", "x1046988542818308097", "x1046934493553221632",
>>>
>>> "x1047227442899775488"), created_at = c("2018-10-04T13:31:45Z",
>>>
>>> "2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",
>>>
>>> "2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z"), text = c("Technique is
>>> everything with olympic lifts ! @ Body By John https://t.co/UsfR6DafZt",
>>>
>>> "@Subtronics just went back and rewatched ur FBlice with ur CDJs and let
>>> me
>>> tell you man. You are the fucking messiah",
>>>
>>> "@ic4rus1 Opportunistic means short-game. As in getting drunk now vs. not
>>> being hung over tomorrow vs. not fucking up your life ten years later.",
>>>
>>> "I tend to think about my dreams before I sleep.", "@MichaelAvenatti
>>> @SenatorCollins So,  if your client was in her 20s, attending parties
>>> with
>>> teenagers, doesn't that make her at the least immature as hell, or at the
>>> worst, a pedophile and a person contributing to the delinquency of
>>> minors?",
>>>
>>>
>>> "i wish i could take credit for this"), lat = c(43.6835853, 40.284123,
>>>
>>> 37.7706565, 40.431389, 31.1688935, 33.9376735), lng = c(-70.3284118,
>>>
>>> -83.078589, -122.4359785, -79.9806895, -100.0768885, -118.130426
>>>
>>> ), county_name = c("Cumberland County", "Delaware County", "San Francisco
>>> County",
>>>
>>> "Allegheny County", "Concho County", "Los Angeles County"), fips =
>>> c(23005L,
>>>
>>>
>>> 39041L, 6075L, 42003L, 48095L, 6037L), state_name = c("Maine",
>>>
>>> "Ohio", "California", "Pennsylvania", "Texas", "California"),
>>>
>>>     state_abb = c("ME", "OH", "CA", "PA", "TX", "CA"), urban_level =
>>> c("Medium Metro",
>>>
>>>     "Large Fringe Metro", "Large Central Metro", "Large Central Metro",
>>>
>>>     "NonCore (Nonmetro)", "Large Central Metro"), urban_code = c(3L,
>>>
>>>     2L, 1L, 1L, 6L, 1L), population = c(277308L, 184029L, 830781L,
>>>
>>>     1160433L, 4160L, 9509611L)), class = "data.frame", row.names = c(NA,
>>>
>>> -6L))
>>>
>>>
>>> st <- structure(list(terms = c("me abused depressed", "me hurt
>>> depressed",
>>>
>>> "feel hopeless depressed", "feel alone depressed", "i feel helpless",
>>>
>>> "i feel worthless")), row.names = c(NA, -6L), class = c("tbl_df",
>>>
>>> "tbl", "data.frame"))
>>>
>>> On Tue, Oct 16, 2018 at 2:39 PM Nathan Parsons <
>>> nathan.f.parsons at gmail.com>
>>> wrote:
>>>
>>> > Thanks all for your patience. Here?s a second go that is perhaps more
>>> > explicative of what it is I am trying to accomplish (and hopefully in
>>> plain
>>> > text form)...
>>> >
>>> >
>>> > I?m using the following packages: tidyverse, purrr, tidytext
>>> >
>>> >
>>> > I have a number of tweets in the following form:
>>> >
>>> >
>>> > th <- structure(list(status_id = c("x1047841705729306624",
>>> > "x1046966595610927105",
>>> >
>>> > "x1047094786610552832", "x1046988542818308097", "x1046934493553221632",
>>> >
>>> > "x1047227442899775488"), created_at = c("2018-10-04T13:31:45Z",
>>> >
>>> > "2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",
>>> >
>>> > "2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z"), text = c("Technique is
>>> > everything with olympic lifts ! @ Body By John https://t.co/UsfR6DafZt
>>> ",
>>> >
>>> > "@Subtronics just went back and rewatched ur FBlice with ur CDJs and
>>> let
>>> > me tell you man. You are the fucking messiah",
>>> >
>>> > "@ic4rus1 Opportunistic means short-game. As in getting drunk now vs.
>>> not
>>> > being hung over tomorrow vs. not fucking up your life ten years
>>> later.",
>>> >
>>> > "I tend to think about my dreams before I sleep.", "@MichaelAvenatti
>>> > @SenatorCollins So, if your client was in her 20s, attending parties
>>> with
>>> > teenagers, doesn't that make her at the least immature as hell, or at
>>> the
>>> > worst, a pedophile and a person contributing to the delinquency of
>>> minors?",
>>> >
>>> > "i wish i could take credit for this"), lat = c(43.6835853, 40.284123,
>>> >
>>> > 37.7706565, 40.431389, 31.1688935, 33.9376735), lng = c(-70.3284118,
>>> >
>>> > -83.078589, -122.4359785, -79.9806895, -100.0768885, -118.130426
>>> >
>>> > ), county_name = c("Cumberland County", "Delaware County", "San
>>> Francisco
>>> > County",
>>> >
>>> > "Allegheny County", "Concho County", "Los Angeles County"), fips =
>>> > c(23005L,
>>> >
>>> > 39041L, 6075L, 42003L, 48095L, 6037L), state_name = c("Maine",
>>> >
>>> > "Ohio", "California", "Pennsylvania", "Texas", "California"),
>>> >
>>> > state_abb = c("ME", "OH", "CA", "PA", "TX", "CA"), urban_level =
>>> c("Medium
>>> > Metro",
>>> >
>>> > "Large Fringe Metro", "Large Central Metro", "Large Central Metro",
>>> >
>>> > "NonCore (Nonmetro)", "Large Central Metro"), urban_code = c(3L,
>>> >
>>> > 2L, 1L, 1L, 6L, 1L), population = c(277308L, 184029L, 830781L,
>>> >
>>> > 1160433L, 4160L, 9509611L)), class = c("data.table", "data.frame"
>>> >
>>> > ), row.names = c(NA, -6L), .internal.selfref = )
>>> >
>>> >
>>> > I also have a number of search terms in the following form:
>>> >
>>> >
>>> > st <- structure(list(terms = c("me abused depressed", "me hurt
>>> depressed",
>>> >
>>> > "feel hopeless depressed", "feel alone depressed", "i feel helpless",
>>> >
>>> > "i feel worthless")), row.names = c(NA, -6L), class = c("tbl_df",
>>> >
>>> > "tbl", "data.frame?))
>>> >
>>> >
>>> > I am trying to isolate the tweets that contain all of the words in
>>> each of
>>> > the search terms, i.e ?me? ?abused? and ?depressed? from the first
>>> example
>>> > search term, but they do not have to be in order or even next to one
>>> > another.
>>> >
>>> >
>>> > I am familiar with the dplyr suite of tools and have been attempting to
>>> > generate some sort of ?filter()? to do this. I am not very familiar
>>> with
>>> > purrr, but there may be a solution using the map function? I have also
>>> > explored the tidytext ?unnest_tokens? function which transforms the
>>> ?th?
>>> > data in the following way:
>>> >
>>> >
>>> > > tidytext::unnest_tokens(th, word, text, token = "tweets") -> tt
>>> >
>>> > > head(tt)
>>> >
>>> > status_id created_at lat lng
>>> >
>>> > 1: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>> >
>>> > 2: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>> >
>>> > 3: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>> >
>>> > 4: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>> >
>>> > 5: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>> >
>>> > 6: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>> >
>>> > county_name fips state_name state_abb urban_level urban_code
>>> >
>>> > 1: Cumberland County 23005 Maine ME Medium Metro 3
>>> >
>>> > 2: Cumberland County 23005 Maine ME Medium Metro 3
>>> >
>>> > 3: Cumberland County 23005 Maine ME Medium Metro 3
>>> >
>>> > 4: Cumberland County 23005 Maine ME Medium Metro 3
>>> >
>>> > 5: Cumberland County 23005 Maine ME Medium Metro 3
>>> >
>>> > 6: Cumberland County 23005 Maine ME Medium Metro 3
>>> >
>>> > population word
>>> >
>>> > 1: 277308 technique
>>> >
>>> > 2: 277308 is
>>> >
>>> > 3: 277308 everything
>>> >
>>> > 4: 277308 with
>>> >
>>> > 5: 277308 olympic
>>> >
>>> > 6: 277308 lifts
>>> >
>>> >
>>> > but once I have unnested the tokens, I am unable to recombine them back
>>> > into tweets.
>>> >
>>> >
>>> > Ideally the end result would append a new column to the ?th? data that
>>> > would flag a tweet that contained all of the search words for any of
>>> the
>>> > search terms; so the work flow would look like
>>> >
>>> > 1) look for all search words for one search term in a tweet
>>> >
>>> > 2) if all of the search words in the search term are found, create a
>>> flag
>>> > (mutate(flag = 1) or some such)
>>> >
>>> > 3) do this for all of the tweets
>>> >
>>> > 4) move on the next search term and repeat
>>> >
>>> >
>>> > Again, my thanks for your patience.
>>> >
>>> >
>>> > --
>>> >
>>> >
>>> > Nate Parsons
>>> >
>>> > Pronouns: He, Him, His
>>> >
>>> > Graduate Teaching Assistant
>>> >
>>> > Department of Sociology
>>> >
>>> > Portland State University
>>> >
>>> > Portland, Oregon
>>> >
>>> >
>>> > 503-725-9025
>>> >
>>> > 503-725-3957 FAX
>>> >
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>

	[[alternative HTML version deleted]]


From jdnewmil @ending from dcn@d@vi@@c@@u@  Thu Oct 18 05:19:01 2018
From: jdnewmil @ending from dcn@d@vi@@c@@u@ (Jeff Newmiller)
Date: Wed, 17 Oct 2018 20:19:01 -0700 (PDT)
Subject: [R] year and week to date - before 1/1 and after 12/31
In-Reply-To: <CAHdotik1nvTtZ0Q_9xUMnr+i69o6fNnNNddt8n3=kW=40Oz6RQ@mail.gmail.com>
References: <CAHdotinT-X5+huK05prObMuDSPHgBtRBe2ERdVr57bz1A5o06w@mail.gmail.com>
 <CAHdotimPAJwM5-HJyafESW-OvP4bOxKAxLGTG5ecdq1WDzHeAw@mail.gmail.com>
 <338ACAD3-127C-49AD-943F-9DD5BBDE2421@dcn.davis.ca.us>
 <294CB480-26E8-454C-9C31-B78396CB5BCA@dcn.davis.ca.us>
 <CAHdotik1nvTtZ0Q_9xUMnr+i69o6fNnNNddt8n3=kW=40Oz6RQ@mail.gmail.com>
Message-ID: <alpine.BSF.2.00.1810172015100.64488@pedal.dcn.davis.ca.us>

You cannot obtain a predictable result by sending invalid time 
representation data to strptime... you have to work with valid time 
representations.
See sample approach below:

############################
weekEnds <- function( DF ) {
    d1_1 <- as.Date( sprintf( "%04d 1 1"
                            , DF[[ "Y" ]]
                            )
                   , format = "%Y %U %u"
                   )
    d52_7 <- as.Date( sprintf( "%04d 52 7"
                             , DF[[ "Y" ]]
                             )
                    , format = "%Y %U %u"
                    )
    week <- as.difftime( 7, units = "days" )
    day <- as.difftime( 1, units = "days" )
    d <- as.Date( sprintf( "%04d %d 1"
                         , DF[[ "Y" ]]
                         , DF[[ "wn" ]]
                         )
                , format = "%Y %U %u"
                )
    before <- 0 == DF[[ "wn" ]]
    after <- 53 == DF[[ "wn" ]]
    d[ before ] <- d1_1[ before ] - week
    d[ after ] <- d52_7[ after ] + day
    DF[[ "weekBegin" ]] <- d
    DF[[ "weekEnd" ]] <- d + week
    DF
}

tst <- expand.grid( Y = 2000:2028
                   , wn = c( 0, 1, 53 )
                   )

result <- weekEnds( tst )
set.seed( 42 )
result[ sample( nrow( result ), 5 ), ]
#>       Y wn  weekBegin    weekEnd
#> 80 2021 53 2021-12-27 2022-01-03
#> 81 2022 53 2022-12-26 2023-01-02
#> 25 2024  0 2024-01-01 2024-01-08
#> 70 2011 53 2011-12-26 2012-01-02
#> 54 2024  1 2024-01-08 2024-01-15
sum( is.na( result$weekBegin ) )
#> [1] 0
############################

On Tue, 16 Oct 2018, peter salzman wrote:

> hi,
> thanks for replying,
> 
> it has taken some time to understand
> 
> i have year+week and i need to find the 1st day and the last day of that week
> i can decide when week starts
> 
> for example these 3 examples:
> df <- data.frame(id = 1:3, year = c(2018, 2018, 2018), week=c(0,1,52))
> 
> ## now run for all 3 rows:
> for (kk in 1:3) {
> ? print(df[kk,])
> ? print('## version 1')
> ? print(as.Date(paste(df$year[kk],df$week[kk],'Sun',sep=' '), format = "%Y %U %a")? ? ? ?)?
> ? print(as.Date(paste(df$year[kk],df$week[kk],'Mon',sep=' '), format = "%Y %U %a")? ? ? ?)?
> ? print(as.Date(paste(df$year[kk],df$week[kk],'Tue',sep=' '), format = "%Y %U %a")? ? ? ?)?
> ? print(as.Date(paste(df$year[kk],df$week[kk],'Wed',sep=' '), format = "%Y %U %a")? ? ? ?)?
> ? print(as.Date(paste(df$year[kk],df$week[kk],'Thu',sep=' '), format = "%Y %U %a")? ? ? ?)?
> ? print(as.Date(paste(df$year[kk],df$week[kk],'Fri',sep=' '), format = "%Y %U %a")? ? ? ?)?
> ? print(as.Date(paste(df$year[kk],df$week[kk],'Sat',sep=' '), format = "%Y %U %a")? ? ? ?)
> ??
> ? print('## version 2')
> ? print(as.Date(paste(df$year[kk],df$week[kk],'7',sep=' '), format = "%Y %U %u")? ? ? ? )?
> ? print(as.Date(paste(df$year[kk],df$week[kk],'1',sep=' '), format = "%Y %U %u")? ? ? ? ?)?
> ? print(as.Date(paste(df$year[kk],df$week[kk],'2',sep=' '), format = "%Y %U %u")? ? ? ? ?)?
> ? print(as.Date(paste(df$year[kk],df$week[kk],'3',sep=' '), format = "%Y %U %u")? ? ? ? ?)?
> ? print(as.Date(paste(df$year[kk],df$week[kk],'4',sep=' '), format = "%Y %U %u")? ? ? ? ?)?
> ? print(as.Date(paste(df$year[kk],df$week[kk],'5',sep=' '), format = "%Y %U %u")? ? ? ? ?)?
> ? print(as.Date(paste(df$year[kk],df$week[kk],'6',sep=' '), format = "%Y %U %u")? ? ? ? ?)
> }
> 
> for week 0 we get NA for Sunday because it was Dec 31, 2017
> similarly for week 52 we get NA for Tue,Wed, ... because these are in January of 2019
> 
> my hope was to write?
> as.Date(paste(year,week,1), format "%Y %month %weekday")
> as.Date(paste(year,week,7), format "%Y %month %weekday")
> and get the first and last day of the given week even at the beginning and end of year
> for example
> as.Date("2018 0 Sun","%Y %U %a")? ?= '2017-12-31'
> 
> i hope this makes sense.
> 
> thanks for replying
> peter
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> On Tue, Oct 16, 2018 at 2:11 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>       Er, my mistake, you are using %U not %W... but now I am really confused, because the first Sunday is trivial with %U/%u.
>
>       Can you clarify what your actual upstream input is? Is it an invalid date string as you say below, or is it year number?
>
>       On October 16, 2018 10:22:10 AM PDT, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>       >If the date in your character representation does not exist then there
>       >is no requirement for a POSIX function to give any reliable answer...
>       >including NA. Using 00 as the week number won't always work.
>       >
>       >The first week/weekday combination that is guaranteed to exist by POSIX
>       >is 1/1 (first Monday). If the corresponding mon/mday is 1/1 then no
>       >days exist in week zero for that year and the first Sunday is 6 days
>       >more than the mday of the first Monday, else the mday of the first
>       >Sunday is one day less than the mday of the first Monday.
>       >
>       >You should if at all possible repair the computations that are creating
>       >the invalid string dates you mention.
>       >
>       >On October 16, 2018 8:11:12 AM PDT, peter salzman
>       ><peter.salzmanuser at gmail.com> wrote:
>       >>it is simpler than i thought
>       >>
>       >>first day of given week is the last day minus 6days
>       >>
>       >>in other words:
>       >>d1 = as.Date('2018 00 Sat',format="%Y %U %a") - 6
>       >>d2 = as.Date('2018 00 Sun',format="%Y %U %a")
>       >>are the same as long both are not NA
>       >>
>       >>therefore to get the one that is not NA one can do
>       >>
>       >>max( c(d1,d2), na.rm=TRUE )
>       >>
>       >>maybe there is some other trick
>       >>
>       >>best,
>       >>peter
>       >>
>       >>
>       >>
>       >>
>       >>
>       >>
>       >>On Tue, Oct 16, 2018 at 10:22 AM peter salzman
>       >><peter.salzmanuser at gmail.com>
>       >>wrote:
>       >>
>       >>> hi,
>       >>>
>       >>> to turn year and week into the date one can do the following:
>       >>>
>       >>> as.Date('2018 05 Sun', "%Y %W %a")
>       >>>
>       >>> however, when we want the Sunday (1st day of week) of the 1st week
>       >of
>       >>2018
>       >>> we get NA because 1/1/2018 was on Monday
>       >>>
>       >>> as.Date('2018 00 Mon',format="%Y %U %a")
>       >>> ## 2018-01-01
>       >>> as.Date('2018 00 Sun',format="%Y %U %a")
>       >>> ## NA
>       >>>
>       >>> btw the same goes for last week
>       >>> as.Date('2017 53 Sun',format="%Y %U %a")
>       >>> ## 2017-12-31
>       >>> as.Date('2017 53 Mon',format="%Y %U %a")
>       >>> ## NA
>       >>>
>       >>> So my question is :
>       >>> how do i get
>       >>> from "2018 00 Sun" to 2018-12-31
>       >>> and
>       >>> from "2017 53 Mon" to 2018-01-01
>       >>>
>       >>> i realize i can loop over days of week and do some if/then
>       >>statements,
>       >>> but is there a built in function?
>       >>>
>       >>> thank you
>       >>> peter
>       >>>
>       >>>
>       >>>
>       >>>
>       >>>
>       >>> --
>       >>> Peter Salzman, PhD
>       >>> Department of Biostatistics and Computational Biology
>       >>> University of Rochester
>       >>>
>
>       --
>       Sent from my phone. Please excuse my brevity.
> 
> 
> 
> --
> Peter Salzman, PhD
> BMS
> Greater Boston Area, MA
> 
>

---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                       Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
---------------------------------------------------------------------------

From jun@y@n @ending from uconn@edu  Thu Oct 18 11:50:25 2018
From: jun@y@n @ending from uconn@edu (Yan, Jun)
Date: Thu, 18 Oct 2018 09:50:25 +0000
Subject: [R] 
 Seeking nomination for the Statistical Computing and Graphics Award
In-Reply-To: <BL0PR05MB46271C19AF334BD2D354F709F0310@BL0PR05MB4627.namprd05.prod.outlook.com>
References: <BL0PR05MB46271C19AF334BD2D354F709F0310@BL0PR05MB4627.namprd05.prod.outlook.com>
Message-ID: <BL0PR05MB462759B4DFA6268B255D4BB0F0F80@BL0PR05MB4627.namprd05.prod.outlook.com>

This is a reminder that the deadline is about 4 weeks ahead. We'd appreciate your spreading the word or nominating a candidate.


Best regards.

Jun Yan

________________________________
From: Yan, Jun
Sent: Tuesday, August 21, 2018 6:39:46 AM
To: r-help at R-project.org
Subject: Seeking nomination for the Statistical Computing and Graphics Award

(apologies for cross posting)

The Statistical Computing and Graphics Award of the ASA Sections of Statistical Computing and Statistical Graphics recognizes an individual or team for innovation in computing, software, or graphics that has had a great impact on statistical practice or research. The past awardees include Bill Cleveland (2016) and Robert Gentleman and Ross Ihaka (2010). The prize carries with it a cash award of $5,000 plus an allowance of up to $1,000 for travel to the next Joint Statistical Meetings (JSM) where the award will be presented.

Qualifications
The prize-winning contribution will have had significant and lasting impacts on statistical computing, software or graphics.

The Awards Committee depends on the American Statistical Association membership to submit nominations. Committee members will review the nominations and make the final determination of who, if any, should receive the award. The award may not be given to a sitting member of the Awards Committee or a sitting member of the Executive Committee of the Section of Statistical Computing or the Section of Statistical Graphics.

Nomination and Award Dates
Nominations are due by November 15, 2018 for an award to be presented at the JSM in the following year. Nominations should be submitted as a complete packet, consisting of:
- a nomination letter, no longer than four pages, addressing points in the selection criteria
- nominee's curriculum vita(e)
- a minimum of 3 (and no more than 4) supporting letters, each no longer than two pages

Selection Process
The Awards Committee will consist of the Chairs and Past Chairs of the Sections on Statistical Computing and Statistical Graphics. The selection process will be handled by the Awards Chair of the Statistical Computing Section and the Statistical Graphics Section. Nominations and questions are to be sent to the e-mail address below.

Jun Yan
Professor
University of Connecticut
jun.yan at uconn.edu






	[[alternative HTML version deleted]]


From @k@h@y_e4 @ending from hotm@il@com  Thu Oct 18 13:52:32 2018
From: @k@h@y_e4 @ending from hotm@il@com (akshay kulkarni)
Date: Thu, 18 Oct 2018 11:52:32 +0000
Subject: [R] inconsistency in pbmclapply/mclapply....
Message-ID: <SL2P216MB00911634D4B58B7696801FC5C8F80@SL2P216MB0091.KORP216.PROD.OUTLOOK.COM>

dear members,
                              I am using pbmclapply in pbmcapply package, to do parallel processing in my R function. Below is the line that is malfunctioning:

> LYG1b <- pbmclapply(lygh171, FUN = auto.arima, mc.cores = detectCores())

auto.arima is a function from the "forecast" package. The length of lygh171 is 2435.

NOW:

> LYG1b[[1]]
[1] "Error in ts(x) : 'ts' object must have one or more observations\n"
attr(,"class")
[1] "try-error"
attr(,"condition")
<simpleError in ts(x): 'ts' object must have one or more observations>

AND:

> auto.arima(lygh171[[1]])
Series: lygh171[[1]]
ARIMA(0,1,0)

sigma^2 estimated as 2.303:  log likelihood=-66.1
AIC=134.2   AICc=134.31   BIC=135.78

AND:

> LYG1ba <- pbmclapply(lygh171[1:9], FUN = auto.arima, mc.cores = detectCores())

> LYG1ba[[1]]
Series: X[[i]]
ARIMA(0,1,0)

sigma^2 estimated as 2.303:  log likelihood=-66.1
AIC=134.2   AICc=134.31   BIC=135.78

Why is LYG1b[[1]] not welldefined  but  LYG1ba[[1]] is eventhough the function(auto.arima) is the same in both cases? And why is the direct application of auto.arima on lygh171[[1]] successful, but not when auto.arima is iterated through pbmclapply on lygh171?
 here is the output of dput:
lygh171[1:9] <-  list(c(0.699999999999999, 0.399999999999999, 0.300000000000001,
0.149999999999999, 0.25, 0.949999999999999, 1, 0.300000000000001,
0.65, 0.199999999999999, 0.6, 0.0999999999999996, 0.00141287284144427,
1.55, 0.15, 0.300000000000001, 0.449999999999999, 0.350000000000001,
0.149999999999999, 2.35, 0.25, 0.100000000000001, 3.7, 3.95,
3.05, 0.899999999999999, 0.399999999999999, 1.05, 1.1, 1.95,
2, 0.649999999999999, 0.699999999999999, 0.25, 5.25, 0.800000000000001,
0.00141287284144427), c(0, 0.199999999999999, 1.3, 2, 1.9, 1.6
), c(0.699999999999999, 0.399999999999999, 0.300000000000001,
0.149999999999999, 0.25, 1, 0.300000000000001, 0.65, 0.199999999999999,
0.0999999999999996, 0.300000000000001, 0.15, 0.25, 0.15, 0.300000000000001,
0.449999999999999, 0.800000000000001, 0.25, 0.350000000000001,
0.149999999999999, 2.35, 0.25, 0.100000000000001, 3.7, 3.95,
3.05, 0.899999999999999, 0.399999999999999, 1.05, 1.1, 1.95,
2, 0.649999999999999, 0.699999999999999, 0.25, 5.25, 0.800000000000001,
0.699999999999999, 0.449999999999999, 0.800000000000001, 0.800000000000001
), c(0.0500000000000007, 0.25, 0.100000000000001, 1.25, 1, 0.65,
0.65, 0.9, 0.4, 0.0500000000000007, 0.0500000000000007, 0.450000000000001,
1.2, 0.5, 0.15, 0.35, 0.0500000000000007, 0.300000000000001,
1.1, 0.0999999999999996, 0.950000000000001, 0.25, 0.75, 0.199999999999999,
0.5, 0.5, 0.25, 2, 0.699999999999999, 2.75, 1.65, 0.149999999999999,
0.200000000000003, 2, 1.25, 4.3, 0.600000000000001, 0.75, 0.549999999999997,
0.5, 3.6, 4.1, 0.899999999999999, 0.100000000000001, 1, 0.25,
0.100000000000001, 0.399999999999999, 0.149999999999999, 1.7,
0.949999999999999, 0.150000000000002), c(0.0500000000000007,
0.25, 0.15, 0.0999999999999996, 0.5, 0.15, 0.600000000000001,
1, 0.149999999999999, 0.600000000000001, 3.05, 0.100000000000001,
0.199999999999999, 1.3), c(0.5, 0.5, 0.0999999999999996, 1.2,
3.75, 1.9), c(0.000770416024653313, 0.550000000000001, 1.2, 3
), 1, 0.25)

very many thanks for your time and effort....
yours sincerely,

AKSHAY M KULKARNI

	[[alternative HTML version deleted]]


From ggrothendieck @ending from gm@il@com  Thu Oct 18 14:26:12 2018
From: ggrothendieck @ending from gm@il@com (Gabor Grothendieck)
Date: Thu, 18 Oct 2018 08:26:12 -0400
Subject: [R] year and week to date - before 1/1 and after 12/31
In-Reply-To: <CAHdotinT-X5+huK05prObMuDSPHgBtRBe2ERdVr57bz1A5o06w@mail.gmail.com>
References: <CAHdotinT-X5+huK05prObMuDSPHgBtRBe2ERdVr57bz1A5o06w@mail.gmail.com>
Message-ID: <CAP01uRntEoB39uaKWz9Vv4+wLZj18=dqJ62VNog-t3-XReACpg@mail.gmail.com>

Replace the week in the date with week 2, say -- a week in which
nothing will go wrong and then add or subtract the appropriate number
of weeks.

  d <- c('2016 00 Sun', '2017 53 Sun', '2017 53 Mon') # test data

  as.Date(sub(" .. ", "02", d), "%Y %U %a") +
     7 * (as.numeric(sub(".... (..) ...", "\\1", d)) - 2)
  ## [1] "2015-12-27" "2017-12-31" "2018-01-01"

On Tue, Oct 16, 2018 at 10:23 AM peter salzman
<peter.salzmanuser at gmail.com> wrote:
>
> hi,
>
> to turn year and week into the date one can do the following:
>
> as.Date('2018 05 Sun', "%Y %W %a")
>
> however, when we want the Sunday (1st day of week) of the 1st week of 2018
> we get NA because 1/1/2018 was on Monday
>
> as.Date('2018 00 Mon',format="%Y %U %a")
> ## 2018-01-01
> as.Date('2018 00 Sun',format="%Y %U %a")
> ## NA
>
> btw the same goes for last week
> as.Date('2017 53 Sun',format="%Y %U %a")
> ## 2017-12-31
> as.Date('2017 53 Mon',format="%Y %U %a")
> ## NA
>
> So my question is :
> how do i get
> from "2018 00 Sun" to 2018-12-31
> and
> from "2017 53 Mon" to 2018-01-01
>
> i realize i can loop over days of week and do some if/then statements,
> but is there a built in function?
>
> thank you
> peter
>
>
>
>
>
> --
> Peter Salzman, PhD
> Department of Biostatistics and Computational Biology
> University of Rochester
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com


From peter@@@lzm@nu@er @ending from gm@il@com  Thu Oct 18 15:19:25 2018
From: peter@@@lzm@nu@er @ending from gm@il@com (peter salzman)
Date: Thu, 18 Oct 2018 09:19:25 -0400
Subject: [R] year and week to date - before 1/1 and after 12/31
In-Reply-To: <alpine.BSF.2.00.1810172015100.64488@pedal.dcn.davis.ca.us>
References: <CAHdotinT-X5+huK05prObMuDSPHgBtRBe2ERdVr57bz1A5o06w@mail.gmail.com>
 <CAHdotimPAJwM5-HJyafESW-OvP4bOxKAxLGTG5ecdq1WDzHeAw@mail.gmail.com>
 <338ACAD3-127C-49AD-943F-9DD5BBDE2421@dcn.davis.ca.us>
 <294CB480-26E8-454C-9C31-B78396CB5BCA@dcn.davis.ca.us>
 <CAHdotik1nvTtZ0Q_9xUMnr+i69o6fNnNNddt8n3=kW=40Oz6RQ@mail.gmail.com>
 <alpine.BSF.2.00.1810172015100.64488@pedal.dcn.davis.ca.us>
Message-ID: <CAHdotinLeyA3vSrivkKhumY=Jo-EipQe2pnHqFZ3VhZz1V7ycw@mail.gmail.com>

thanks Jeff and Gabor,
appreciate you spending time on this,

you both use similar ideas - add/subtract days/weeks from a day that exists

combining all i learned i would go with something like this:

## step 1) find 1st sunday of year Y
d11 <- as.Date( sprintf( "%04d 1 1"
                            , DF[[ "Y" ]]
                            )
                   , format = "%Y %U %u"
                   )
## btw note that when Jan 1 is on sunday then d11 will be Jan 8th
## step 2) for start of week just add the number of weeks that is needed
start <- d11 + (w-1)*week
## step 3) for end of week add number of weeks and subtract 1 day
start <- d11 + w*week - day

thanks
peter






On Wed, Oct 17, 2018 at 11:15 PM Jeff Newmiller
<jdnewmil at dcn.davis.ca.us> wrote:
>
> You cannot obtain a predictable result by sending invalid time
> representation data to strptime... you have to work with valid time
> representations.
> See sample approach below:
>
> ############################
> weekEnds <- function( DF ) {
>     d1_1 <- as.Date( sprintf( "%04d 1 1"
>                             , DF[[ "Y" ]]
>                             )
>                    , format = "%Y %U %u"
>                    )
>     d52_7 <- as.Date( sprintf( "%04d 52 7"
>                              , DF[[ "Y" ]]
>                              )
>                     , format = "%Y %U %u"
>                     )
>     week <- as.difftime( 7, units = "days" )
>     day <- as.difftime( 1, units = "days" )
>     d <- as.Date( sprintf( "%04d %d 1"
>                          , DF[[ "Y" ]]
>                          , DF[[ "wn" ]]
>                          )
>                 , format = "%Y %U %u"
>                 )
>     before <- 0 == DF[[ "wn" ]]
>     after <- 53 == DF[[ "wn" ]]
>     d[ before ] <- d1_1[ before ] - week
>     d[ after ] <- d52_7[ after ] + day
>     DF[[ "weekBegin" ]] <- d
>     DF[[ "weekEnd" ]] <- d + week
>     DF
> }
>
> tst <- expand.grid( Y = 2000:2028
>                    , wn = c( 0, 1, 53 )
>                    )
>
> result <- weekEnds( tst )
> set.seed( 42 )
> result[ sample( nrow( result ), 5 ), ]
> #>       Y wn  weekBegin    weekEnd
> #> 80 2021 53 2021-12-27 2022-01-03
> #> 81 2022 53 2022-12-26 2023-01-02
> #> 25 2024  0 2024-01-01 2024-01-08
> #> 70 2011 53 2011-12-26 2012-01-02
> #> 54 2024  1 2024-01-08 2024-01-15
> sum( is.na( result$weekBegin ) )
> #> [1] 0
> ############################
>
> On Tue, 16 Oct 2018, peter salzman wrote:
>
> > hi,
> > thanks for replying,
> >
> > it has taken some time to understand
> >
> > i have year+week and i need to find the 1st day and the last day of that week
> > i can decide when week starts
> >
> > for example these 3 examples:
> > df <- data.frame(id = 1:3, year = c(2018, 2018, 2018), week=c(0,1,52))
> >
> > ## now run for all 3 rows:
> > for (kk in 1:3) {
> >   print(df[kk,])
> >   print('## version 1')
> >   print(as.Date(paste(df$year[kk],df$week[kk],'Sun',sep=' '), format = "%Y %U %a")       )
> >   print(as.Date(paste(df$year[kk],df$week[kk],'Mon',sep=' '), format = "%Y %U %a")       )
> >   print(as.Date(paste(df$year[kk],df$week[kk],'Tue',sep=' '), format = "%Y %U %a")       )
> >   print(as.Date(paste(df$year[kk],df$week[kk],'Wed',sep=' '), format = "%Y %U %a")       )
> >   print(as.Date(paste(df$year[kk],df$week[kk],'Thu',sep=' '), format = "%Y %U %a")       )
> >   print(as.Date(paste(df$year[kk],df$week[kk],'Fri',sep=' '), format = "%Y %U %a")       )
> >   print(as.Date(paste(df$year[kk],df$week[kk],'Sat',sep=' '), format = "%Y %U %a")       )
> >
> >   print('## version 2')
> >   print(as.Date(paste(df$year[kk],df$week[kk],'7',sep=' '), format = "%Y %U %u")        )
> >   print(as.Date(paste(df$year[kk],df$week[kk],'1',sep=' '), format = "%Y %U %u")         )
> >   print(as.Date(paste(df$year[kk],df$week[kk],'2',sep=' '), format = "%Y %U %u")         )
> >   print(as.Date(paste(df$year[kk],df$week[kk],'3',sep=' '), format = "%Y %U %u")         )
> >   print(as.Date(paste(df$year[kk],df$week[kk],'4',sep=' '), format = "%Y %U %u")         )
> >   print(as.Date(paste(df$year[kk],df$week[kk],'5',sep=' '), format = "%Y %U %u")         )
> >   print(as.Date(paste(df$year[kk],df$week[kk],'6',sep=' '), format = "%Y %U %u")         )
> > }
> >
> > for week 0 we get NA for Sunday because it was Dec 31, 2017
> > similarly for week 52 we get NA for Tue,Wed, ... because these are in January of 2019
> >
> > my hope was to write
> > as.Date(paste(year,week,1), format "%Y %month %weekday")
> > as.Date(paste(year,week,7), format "%Y %month %weekday")
> > and get the first and last day of the given week even at the beginning and end of year
> > for example
> > as.Date("2018 0 Sun","%Y %U %a")   = '2017-12-31'
> >
> > i hope this makes sense.
> >
> > thanks for replying
> > peter
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> > On Tue, Oct 16, 2018 at 2:11 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
> >       Er, my mistake, you are using %U not %W... but now I am really confused, because the first Sunday is trivial with %U/%u.
> >
> >       Can you clarify what your actual upstream input is? Is it an invalid date string as you say below, or is it year number?
> >
> >       On October 16, 2018 10:22:10 AM PDT, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
> >       >If the date in your character representation does not exist then there
> >       >is no requirement for a POSIX function to give any reliable answer...
> >       >including NA. Using 00 as the week number won't always work.
> >       >
> >       >The first week/weekday combination that is guaranteed to exist by POSIX
> >       >is 1/1 (first Monday). If the corresponding mon/mday is 1/1 then no
> >       >days exist in week zero for that year and the first Sunday is 6 days
> >       >more than the mday of the first Monday, else the mday of the first
> >       >Sunday is one day less than the mday of the first Monday.
> >       >
> >       >You should if at all possible repair the computations that are creating
> >       >the invalid string dates you mention.
> >       >
> >       >On October 16, 2018 8:11:12 AM PDT, peter salzman
> >       ><peter.salzmanuser at gmail.com> wrote:
> >       >>it is simpler than i thought
> >       >>
> >       >>first day of given week is the last day minus 6days
> >       >>
> >       >>in other words:
> >       >>d1 = as.Date('2018 00 Sat',format="%Y %U %a") - 6
> >       >>d2 = as.Date('2018 00 Sun',format="%Y %U %a")
> >       >>are the same as long both are not NA
> >       >>
> >       >>therefore to get the one that is not NA one can do
> >       >>
> >       >>max( c(d1,d2), na.rm=TRUE )
> >       >>
> >       >>maybe there is some other trick
> >       >>
> >       >>best,
> >       >>peter
> >       >>
> >       >>
> >       >>
> >       >>
> >       >>
> >       >>
> >       >>On Tue, Oct 16, 2018 at 10:22 AM peter salzman
> >       >><peter.salzmanuser at gmail.com>
> >       >>wrote:
> >       >>
> >       >>> hi,
> >       >>>
> >       >>> to turn year and week into the date one can do the following:
> >       >>>
> >       >>> as.Date('2018 05 Sun', "%Y %W %a")
> >       >>>
> >       >>> however, when we want the Sunday (1st day of week) of the 1st week
> >       >of
> >       >>2018
> >       >>> we get NA because 1/1/2018 was on Monday
> >       >>>
> >       >>> as.Date('2018 00 Mon',format="%Y %U %a")
> >       >>> ## 2018-01-01
> >       >>> as.Date('2018 00 Sun',format="%Y %U %a")
> >       >>> ## NA
> >       >>>
> >       >>> btw the same goes for last week
> >       >>> as.Date('2017 53 Sun',format="%Y %U %a")
> >       >>> ## 2017-12-31
> >       >>> as.Date('2017 53 Mon',format="%Y %U %a")
> >       >>> ## NA
> >       >>>
> >       >>> So my question is :
> >       >>> how do i get
> >       >>> from "2018 00 Sun" to 2018-12-31
> >       >>> and
> >       >>> from "2017 53 Mon" to 2018-01-01
> >       >>>
> >       >>> i realize i can loop over days of week and do some if/then
> >       >>statements,
> >       >>> but is there a built in function?
> >       >>>
> >       >>> thank you
> >       >>> peter
> >       >>>
> >       >>>
> >       >>>
> >       >>>
> >       >>>
> >       >>> --
> >       >>> Peter Salzman, PhD
> >       >>> Department of Biostatistics and Computational Biology
> >       >>> University of Rochester
> >       >>>
> >
> >       --
> >       Sent from my phone. Please excuse my brevity.
> >
> >
> >
> > --
> > Peter Salzman, PhD
> > BMS
> > Greater Boston Area, MA
> >
> >
>
> ---------------------------------------------------------------------------
> Jeff Newmiller                        The     .....       .....  Go Live...
> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
>                                        Live:   OO#.. Dead: OO#..  Playing
> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
> /Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
> ---------------------------------------------------------------------------



-- 
Peter Salzman, PhD
BMS
Greater Boston Area, MA


From bgunter@4567 @ending from gm@il@com  Fri Oct 19 04:04:47 2018
From: bgunter@4567 @ending from gm@il@com (Bert Gunter)
Date: Thu, 18 Oct 2018 19:04:47 -0700
Subject: [R] 
 Matching multiple search criteria (Unlisting a nested dataset,
 take 2)
In-Reply-To: <CAGxFJbQabThuSjOgWaa4QT1Da3EhfjQ9W=0dNKRDtVknije5BQ@mail.gmail.com>
References: <CANdqJqdP2bDdVNc=8R7jeXYU94p_=3BNmwrt11zwh7OdOaEfZA@mail.gmail.com>
 <CANdqJqfCZU96s3XtVWwDYgmmh4LOJe-3896xxO4Ye4aMGaoDWg@mail.gmail.com>
 <CAGxFJbQmPf=vqRU0iLgEBGyTtUXL_GX8Kd3Bgdq796QhpQxUXA@mail.gmail.com>
 <CAGxFJbRFJjwWjMWSLJMDVtwqWwNd0K36rHLyJiL63nmwVGZBZQ@mail.gmail.com>
 <4e06312a-10f4-4524-a82f-9f7618e435fb@Spark>
 <CAGxFJbQabThuSjOgWaa4QT1Da3EhfjQ9W=0dNKRDtVknije5BQ@mail.gmail.com>
Message-ID: <CAGxFJbQzGOdb5-coFEV=U4hhwGYQA+9xU2OjLVfYMTYQ6HWWOA@mail.gmail.com>

All (especially Nathan): **Please feel free to ignore this post without
response.** It just represents a bit of OCD-ness on my part that may or may
not be of interest to anyone else.

Purpose of this post: To give an alternative considerably simpler and
considerably faster solution to the problem than those which I offered
previously. It may or may not be what the OP asked for, but the improvement
exercise was instructive to me . Notation as previously in this thread.

New solution:

getwords <-
function(x)strsplit(gsub("(^[[:space:]]+)|([[:space:]]+)$)","",tolower(x)),split
= " +")
## split lower-cased text into a vector of "words"
## I made this a bit fancier to handle some "corner" cases, but the
previous simpler version may well suffice.

'%allin%' <- function(x, table)prod(match(x,table, nomatch = 0L)) > 0L
## a convenience function/operator that improves efficiency.

## lists of  search word vectors as before
phrasewords <- getwords(st$terms)
tweets <- getwords(c(th$text, " i xxxx worthless yxxc ght feel")) ## the
tweets + one additional

## simpler approach just using indexing for the bookkeeping that nested
_apply
## loops previously were used for
ans <- expand.grid(phrases = seq_along(phrasewords),tweets =
seq_along(tweets), Result = FALSE)
ans$Result <- apply(ind,1,function(r)phrasewords[[r[1]]] %allin%
tweets[[r[2]]])

## ans is a data frame in which the first column indexes phrases and the
second tweets
## The ith row of ans$Result == TRUE iff all the words in the phrase
indexed by the ith row of the
##  phrase column are contained in the tweet indexed by that row's tweet
column.

This was way faster than my previous offerings.

Note also that just the matching phrases and tweets can be extracted as
usual by:

> ans[ans[,3],]
   phrases tweets Result
42       6      7   TRUE
## all the words in the 6th search phrase appeared in the 7th tweet.

** I promise to natter on about this no longer! **

Cheers,
Bert


On Wed, Oct 17, 2018 at 7:50 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:

>
> If you wish to use R, you need to at least understand its basic data
> structures and functionality. Expecting that mimickry of code in special
> packages will suffice is, I believe, an illusion. If you haven't already
> done so, you should go through a basic R tutorial or two (there are many on
> the web; some recommendations, by no means necessarily "the best",  can be
> found here:
> https://www.rstudio.com/online-learning/#r-programming).
>
> Having said that, I realized that my previous "solution" using regular
> expressions was more complicated than it needed to be and somewhat foolish
> ( so much for all my "expertise"). A simpler and better approach is simply
> to break up both the tweet texts and your search phrases into vectors of
> their "words" (i.e. character strings surrounded by spaces) using
> strplit(), and then using R's built-in matching capabilities with %in%.
> This is quite straightforward, pretty robust (no regex's to wrestle with),
> and does not require "herculean efforts" to understand. The only wrinkle is
> some bookkeeping with the "apply" family of functions. These are, as you
> may know, the functional programming way of handling iteration (loops), but
> they are what I would consider part of "basic" R functionality and worth
> spending the time to learn about.
>
> Herewith my better, simpler proposal, using your example data as before:
>
> getwords <- function(x)strsplit(tolower(x),split = " +")
> ## split text into a vector of lower-cased "words"
>
> phrasewords <- structure(getwords(st$terms), names = st$terms)
> ## named list of your search word vectors
>
> tweets <- getwords(c(th$text, " i xxxx worthless yxxc ght feel"))
> ## the tweets + one additional that should match the last phrase
>
> ans <- lapply(phrasewords, function(x) apply(sapply(tweets,function(y)x
> %in% y), 2, all))
> ## a list indexed by the search phrases,
> ## with each component a vector of logicals with vec[i] == TRUE iff
> ## the ith tweet contains all the words in the search phrase
>
> > ans
> $`me abused depressed`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>
> $`me hurt depressed`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>
> $`feel hopeless depressed`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>
> $`feel alone depressed`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>
> $`i feel helpless`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>
> $`i feel worthless`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE
>
> -- Bert
>
> On Wed, Oct 17, 2018 at 9:20 AM Nathan Parsons <nathan.f.parsons at gmail.com>
> wrote:
>
>> I do not have your command of base r, Bert. That is a herculean effort!
>> Here?s what I spent my night putting together:
>>
>> ## Create search terms
>> ## dput(st)
>> st <- structure(list(word1 = c("technique", "me", "me", "feel", "feel"
>> ), word2 = c("olympic", "abused", "hurt", "hopeless", "alone"
>> ), word3 = c("lifts", "depressed", "depressed", "depressed",
>> "depressed")), class = c("tbl_df", "tbl", "data.frame"), row.names = c(NA,
>> -5L))
>>
>> ## Create tweets
>> ## dput(th)
>> th <- structure(list(status_id = c("x1047841705729306624",
>> "x1046966595610927105",
>> "x1047094786610552832", "x1046988542818308097", "x1046934493553221632",
>> "x1047227442899775488", "x1048126008941981696", "x1047798782673543173",
>> "x1048269727582355457", "x1048092408544677890"), created_at =
>> c("2018-10-04T13:31:45Z",
>> "2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",
>> "2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z", "2018-10-05T08:21:28Z",
>> "2018-10-04T10:41:11Z", "2018-10-05T17:52:33Z", "2018-10-05T06:07:57Z"
>> ), text = c("technique is everything with olympic lifts ! @ body by john
>> ",
>> "@subtronics just went back and rewatched ur fblice with ur cdjs and let
>> me tell you man. you are the fucking messiah",
>> "@ic4rus1 opportunistic means short-game. as in getting drunk now vs. not
>> being hung over tomorrow vs. not fucking up your life ten years later.",
>> "i tend to think about my dreams before i sleep.", "@michaelavenatti
>> @senatorcollins so if your client was in her 20s attending parties with
>> teenagers doesnt that make her at the least immature as hell or at the
>> worst a pedophile and a person contributing to the delinquency of minors?",
>> "i wish i could take credit for this", "i woulda never imagined.
>> #lakeshow ",
>> "@philipbloom @blackmagic_news its ok phil! i feel your pain! ",
>> "sunday ill have a booth in katy at the real craft wives of katy fest
>> @nolabelbrewco cmon yall!everything is better when you top it with
>> tias!order today we ship to all 50 ",
>> "dolly is so baddd"), lat = c(43.6835853, 40.284123, 37.7706565,
>> 40.431389, 31.1688935, 33.9376735, 34.0207895, 44.900818, 29.7926,
>> 32.364145), lng = c(-70.3284118, -83.078589, -122.4359785, -79.9806895,
>> -100.0768885, -118.130426, -118.4119065, -89.5694915, -95.8224,
>> -86.2447285), county_name = c("Cumberland County", "Delaware County",
>> "San Francisco County", "Allegheny County", "Concho County",
>> "Los Angeles County", "Los Angeles County", "Marathon County",
>> "Harris County", "Montgomery County"), fips = c(23005L, 39041L,
>> 6075L, 42003L, 48095L, 6037L, 6037L, 55073L, 48201L, 1101L),
>> state_name = c("Maine", "Ohio", "California", "Pennsylvania",
>> "Texas", "California", "California", "Wisconsin", "Texas",
>> "Alabama"), state_abb = c("ME", "OH", "CA", "PA", "TX", "CA",
>> "CA", "WI", "TX", "AL"), urban_level = c("Medium Metro",
>> "Large Fringe Metro", "Large Central Metro", "Large Central Metro",
>> "NonCore (Nonmetro)", "Large Central Metro", "Large Central Metro",
>> "Small Metro", "Large Central Metro", "Medium Metro"), urban_code = c(3L,
>> 2L, 1L, 1L, 6L, 1L, 1L, 4L, 1L, 3L), population = c(277308L,
>> 184029L, 830781L, 1160433L, 4160L, 9509611L, 9509611L, 127612L,
>> 4233913L, 211037L), linenumber = 1:10), row.names = c(NA,
>> 10L), class = "data.frame")
>>
>> ## Clean tweets - basically just remove everything we don?t need from the
>> text including punctuation and urls
>> th %>%
>> mutate(linenumber = row_number(),
>> text = str_remove_all(text, "[^\x01-\x7F]"),
>> text = str_remove_all(text, "\n"),
>> text = str_remove_all(text, ","),
>> text = str_remove_all(text, "'"),
>> text = str_remove_all(text, "&"),
>> text = str_remove_all(text, "<"),
>> text = str_remove_all(text, ">"),
>> text = str_remove_all(text, "http[s]?://[[:alnum:].\\/]+"),
>> text = tolower(text)) -> th
>>
>> ## Create search function that looks for each search term in the provided
>> string, evaluates if all three search terms have been found, and returns a
>> logical
>> srchr <- function(df) {
>> str_detect(df, "olympic") -> a
>> str_detect(df, "technique") -> b
>> str_detect(df, "lifts") -> c
>> ifelse(a == TRUE & b == TRUE & c == TRUE, TRUE, FALSE)
>> }
>>
>> ## Evaluate tweets for presence of search term
>> th %>%
>> mutate(flag = map_chr(text, srchr)) -> th_flagged
>>
>> As far as I can tell, this works. I have to manually enter each set of
>> search terms into the function, which is not ideal. Also, this only
>> generates a True/False for each tweet based on one search term - I end up
>> with an evaluatory column for each search term that I would then have to
>> collapse together somehow. I?m sure there?s a more elegant solution.
>>
>> --
>>
>> Nate Parsons
>> Pronouns: He, Him, His
>> Graduate Teaching Assistant
>> Department of Sociology
>> Portland State University
>> Portland, Oregon
>>
>> 503-725-9025
>> 503-725-3957 FAX
>> On Oct 16, 2018, 7:20 PM -0700, Bert Gunter <bgunter.4567 at gmail.com>,
>> wrote:
>>
>> OK, as no one else has offered a solution, I'll take a whack at it.
>>
>> Caveats: This is a brute force attempt using R's basic regular expression
>> engine. It is inelegant and barely tested, so likely to be at best
>> incomplete and buggy, and at worst, incorrect. But maybe Nathan or someone
>> else on the list can fix it up. So if (when) it breaks, complain on the
>> list to give someone (almost certainly not me) the opportunity.
>>
>> The basic idea is that the tweets are just character strings and the
>> search phrases are just character vectors all of whose elements must match
>> "appropriately" -- i.e. they must match whole words -- in the character
>> strings. So my desired output from the code is a list indexed by the search
>> phrases, each of whose components if a logical vector of length the number
>> of tweets each of whose elements = TRUE iff all the words in the search
>> phrase match somewhere in the tweet.
>>
>> Here's the code(using the data Nathan provided):
>>
>> > words <- sapply(st[[1]],strsplit,split = " +" )
>> ## convert the phrases to a list of character vectors of the words
>> ## Result:
>> > words
>> $`me abused depressed`
>> [1] "me"        "abused"    "depressed"
>>
>> $`me hurt depressed`
>> [1] "me"        "hurt"      "depressed"
>>
>> $`feel hopeless depressed`
>> [1] "feel"      "hopeless"  "depressed"
>>
>> $`feel alone depressed`
>> [1] "feel"      "alone"     "depressed"
>>
>> $`i feel helpless`
>> [1] "i"        "feel"     "helpless"
>>
>> $`i feel worthless`
>> [1] "i"         "feel"      "worthless"
>>
>> > expand.words <-  function(z)lapply(z,function(x)paste0(c("^ *"," ","
>> "),x, c(" "," "," *$")))
>> ## function to create regexes for words when they are at the beginning,
>> middle, or end of tweets
>>
>> > wordregex <- lapply(words,expand.words)
>> ##Result
>> ## too lengthy to include
>> ##
>> > tweets <- th$text
>> ##extract the tweets
>> > findin <- function(x,y)
>>    ## x is a vector of regex patterns
>>    ## y is a character vector
>>    ## value = vector,vec, with length(vec) == length(y) and vec[i] ==
>> TRUE iff any of x matches y[i]
>> { apply(sapply(x,function(z)grepl(z,y)), 1,any)
>> }
>>
>> ## add a matching "tweet" to the tweet vector:
>> > tweets <- c(tweets," i xxxx worthless yxxc ght feel")
>>
>> > ans <-
>> lapply(wordregex,function(z)apply(sapply(z,function(x)findin(x,tweets)), 1,
>> all))
>> ## Result:
>> > ans
>> $`me abused depressed`
>> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>>
>> $`me hurt depressed`
>> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>>
>> $`feel hopeless depressed`
>> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>>
>> $`feel alone depressed`
>> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>>
>> $`i feel helpless`
>> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>>
>> $`i feel worthless`
>> [1] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE
>>
>> ## None of the tweets match any of the phrases except for the last tweet
>> that I added.
>>
>> ## Note: you need to add capabilities to handle upper and lower case.
>> See, e.g. ?casefold
>>
>> Cheers,
>> Bert
>>
>> Bert Gunter
>>
>> "The trouble with having an open mind is that people keep coming along
>> and sticking things into it."
>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>
>>
>> On Tue, Oct 16, 2018 at 3:03 PM Bert Gunter <bgunter.4567 at gmail.com>
>> wrote:
>>
>>> The problem wasn't the data tibbles. You posted in html -- which you
>>> were explictly warned against -- and that corrupted your text (e.g. some
>>> quotes became "smart quotes", which cannot be properly cut and pasted into
>>> R).
>>>
>>> Bert
>>>
>>>
>>> On Tue, Oct 16, 2018 at 2:47 PM Nathan Parsons <
>>> nathan.f.parsons at gmail.com> wrote:
>>>
>>>> Argh! Here are those two example datasets as data frames (not tibbles).
>>>> Sorry again. This apparently is just not my day.
>>>>
>>>>
>>>> th <- structure(list(status_id = c("x1047841705729306624",
>>>> "x1046966595610927105",
>>>>
>>>> "x1047094786610552832", "x1046988542818308097", "x1046934493553221632",
>>>>
>>>> "x1047227442899775488"), created_at = c("2018-10-04T13:31:45Z",
>>>>
>>>> "2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",
>>>>
>>>> "2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z"), text = c("Technique is
>>>> everything with olympic lifts ! @ Body By John https://t.co/UsfR6DafZt
>>>> ",
>>>>
>>>> "@Subtronics just went back and rewatched ur FBlice with ur CDJs and
>>>> let me
>>>> tell you man. You are the fucking messiah",
>>>>
>>>> "@ic4rus1 Opportunistic means short-game. As in getting drunk now vs.
>>>> not
>>>> being hung over tomorrow vs. not fucking up your life ten years later.",
>>>>
>>>> "I tend to think about my dreams before I sleep.", "@MichaelAvenatti
>>>> @SenatorCollins So,  if your client was in her 20s, attending parties
>>>> with
>>>> teenagers, doesn't that make her at the least immature as hell, or at
>>>> the
>>>> worst, a pedophile and a person contributing to the delinquency of
>>>> minors?",
>>>>
>>>>
>>>> "i wish i could take credit for this"), lat = c(43.6835853, 40.284123,
>>>>
>>>> 37.7706565, 40.431389, 31.1688935, 33.9376735), lng = c(-70.3284118,
>>>>
>>>> -83.078589, -122.4359785, -79.9806895, -100.0768885, -118.130426
>>>>
>>>> ), county_name = c("Cumberland County", "Delaware County", "San
>>>> Francisco
>>>> County",
>>>>
>>>> "Allegheny County", "Concho County", "Los Angeles County"), fips =
>>>> c(23005L,
>>>>
>>>>
>>>> 39041L, 6075L, 42003L, 48095L, 6037L), state_name = c("Maine",
>>>>
>>>> "Ohio", "California", "Pennsylvania", "Texas", "California"),
>>>>
>>>>     state_abb = c("ME", "OH", "CA", "PA", "TX", "CA"), urban_level =
>>>> c("Medium Metro",
>>>>
>>>>     "Large Fringe Metro", "Large Central Metro", "Large Central Metro",
>>>>
>>>>     "NonCore (Nonmetro)", "Large Central Metro"), urban_code = c(3L,
>>>>
>>>>     2L, 1L, 1L, 6L, 1L), population = c(277308L, 184029L, 830781L,
>>>>
>>>>     1160433L, 4160L, 9509611L)), class = "data.frame", row.names = c(NA,
>>>>
>>>> -6L))
>>>>
>>>>
>>>> st <- structure(list(terms = c("me abused depressed", "me hurt
>>>> depressed",
>>>>
>>>> "feel hopeless depressed", "feel alone depressed", "i feel helpless",
>>>>
>>>> "i feel worthless")), row.names = c(NA, -6L), class = c("tbl_df",
>>>>
>>>> "tbl", "data.frame"))
>>>>
>>>> On Tue, Oct 16, 2018 at 2:39 PM Nathan Parsons <
>>>> nathan.f.parsons at gmail.com>
>>>> wrote:
>>>>
>>>> > Thanks all for your patience. Here?s a second go that is perhaps more
>>>> > explicative of what it is I am trying to accomplish (and hopefully in
>>>> plain
>>>> > text form)...
>>>> >
>>>> >
>>>> > I?m using the following packages: tidyverse, purrr, tidytext
>>>> >
>>>> >
>>>> > I have a number of tweets in the following form:
>>>> >
>>>> >
>>>> > th <- structure(list(status_id = c("x1047841705729306624",
>>>> > "x1046966595610927105",
>>>> >
>>>> > "x1047094786610552832", "x1046988542818308097",
>>>> "x1046934493553221632",
>>>> >
>>>> > "x1047227442899775488"), created_at = c("2018-10-04T13:31:45Z",
>>>> >
>>>> > "2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z",
>>>> "2018-10-02T05:01:35Z",
>>>> >
>>>> > "2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z"), text = c("Technique
>>>> is
>>>> > everything with olympic lifts ! @ Body By John
>>>> https://t.co/UsfR6DafZt",
>>>> >
>>>> > "@Subtronics just went back and rewatched ur FBlice with ur CDJs and
>>>> let
>>>> > me tell you man. You are the fucking messiah",
>>>> >
>>>> > "@ic4rus1 Opportunistic means short-game. As in getting drunk now vs.
>>>> not
>>>> > being hung over tomorrow vs. not fucking up your life ten years
>>>> later.",
>>>> >
>>>> > "I tend to think about my dreams before I sleep.", "@MichaelAvenatti
>>>> > @SenatorCollins So, if your client was in her 20s, attending parties
>>>> with
>>>> > teenagers, doesn't that make her at the least immature as hell, or at
>>>> the
>>>> > worst, a pedophile and a person contributing to the delinquency of
>>>> minors?",
>>>> >
>>>> > "i wish i could take credit for this"), lat = c(43.6835853, 40.284123,
>>>> >
>>>> > 37.7706565, 40.431389, 31.1688935, 33.9376735), lng = c(-70.3284118,
>>>> >
>>>> > -83.078589, -122.4359785, -79.9806895, -100.0768885, -118.130426
>>>> >
>>>> > ), county_name = c("Cumberland County", "Delaware County", "San
>>>> Francisco
>>>> > County",
>>>> >
>>>> > "Allegheny County", "Concho County", "Los Angeles County"), fips =
>>>> > c(23005L,
>>>> >
>>>> > 39041L, 6075L, 42003L, 48095L, 6037L), state_name = c("Maine",
>>>> >
>>>> > "Ohio", "California", "Pennsylvania", "Texas", "California"),
>>>> >
>>>> > state_abb = c("ME", "OH", "CA", "PA", "TX", "CA"), urban_level =
>>>> c("Medium
>>>> > Metro",
>>>> >
>>>> > "Large Fringe Metro", "Large Central Metro", "Large Central Metro",
>>>> >
>>>> > "NonCore (Nonmetro)", "Large Central Metro"), urban_code = c(3L,
>>>> >
>>>> > 2L, 1L, 1L, 6L, 1L), population = c(277308L, 184029L, 830781L,
>>>> >
>>>> > 1160433L, 4160L, 9509611L)), class = c("data.table", "data.frame"
>>>> >
>>>> > ), row.names = c(NA, -6L), .internal.selfref = )
>>>> >
>>>> >
>>>> > I also have a number of search terms in the following form:
>>>> >
>>>> >
>>>> > st <- structure(list(terms = c("me abused depressed", "me hurt
>>>> depressed",
>>>> >
>>>> > "feel hopeless depressed", "feel alone depressed", "i feel helpless",
>>>> >
>>>> > "i feel worthless")), row.names = c(NA, -6L), class = c("tbl_df",
>>>> >
>>>> > "tbl", "data.frame?))
>>>> >
>>>> >
>>>> > I am trying to isolate the tweets that contain all of the words in
>>>> each of
>>>> > the search terms, i.e ?me? ?abused? and ?depressed? from the first
>>>> example
>>>> > search term, but they do not have to be in order or even next to one
>>>> > another.
>>>> >
>>>> >
>>>> > I am familiar with the dplyr suite of tools and have been attempting
>>>> to
>>>> > generate some sort of ?filter()? to do this. I am not very familiar
>>>> with
>>>> > purrr, but there may be a solution using the map function? I have also
>>>> > explored the tidytext ?unnest_tokens? function which transforms the
>>>> ?th?
>>>> > data in the following way:
>>>> >
>>>> >
>>>> > > tidytext::unnest_tokens(th, word, text, token = "tweets") -> tt
>>>> >
>>>> > > head(tt)
>>>> >
>>>> > status_id created_at lat lng
>>>> >
>>>> > 1: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>>> >
>>>> > 2: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>>> >
>>>> > 3: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>>> >
>>>> > 4: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>>> >
>>>> > 5: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>>> >
>>>> > 6: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>>> >
>>>> > county_name fips state_name state_abb urban_level urban_code
>>>> >
>>>> > 1: Cumberland County 23005 Maine ME Medium Metro 3
>>>> >
>>>> > 2: Cumberland County 23005 Maine ME Medium Metro 3
>>>> >
>>>> > 3: Cumberland County 23005 Maine ME Medium Metro 3
>>>> >
>>>> > 4: Cumberland County 23005 Maine ME Medium Metro 3
>>>> >
>>>> > 5: Cumberland County 23005 Maine ME Medium Metro 3
>>>> >
>>>> > 6: Cumberland County 23005 Maine ME Medium Metro 3
>>>> >
>>>> > population word
>>>> >
>>>> > 1: 277308 technique
>>>> >
>>>> > 2: 277308 is
>>>> >
>>>> > 3: 277308 everything
>>>> >
>>>> > 4: 277308 with
>>>> >
>>>> > 5: 277308 olympic
>>>> >
>>>> > 6: 277308 lifts
>>>> >
>>>> >
>>>> > but once I have unnested the tokens, I am unable to recombine them
>>>> back
>>>> > into tweets.
>>>> >
>>>> >
>>>> > Ideally the end result would append a new column to the ?th? data that
>>>> > would flag a tweet that contained all of the search words for any of
>>>> the
>>>> > search terms; so the work flow would look like
>>>> >
>>>> > 1) look for all search words for one search term in a tweet
>>>> >
>>>> > 2) if all of the search words in the search term are found, create a
>>>> flag
>>>> > (mutate(flag = 1) or some such)
>>>> >
>>>> > 3) do this for all of the tweets
>>>> >
>>>> > 4) move on the next search term and repeat
>>>> >
>>>> >
>>>> > Again, my thanks for your patience.
>>>> >
>>>> >
>>>> > --
>>>> >
>>>> >
>>>> > Nate Parsons
>>>> >
>>>> > Pronouns: He, Him, His
>>>> >
>>>> > Graduate Teaching Assistant
>>>> >
>>>> > Department of Sociology
>>>> >
>>>> > Portland State University
>>>> >
>>>> > Portland, Oregon
>>>> >
>>>> >
>>>> > 503-725-9025
>>>> >
>>>> > 503-725-3957 FAX
>>>> >
>>>>
>>>>         [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>

	[[alternative HTML version deleted]]


From bgunter@4567 @ending from gm@il@com  Fri Oct 19 04:34:51 2018
From: bgunter@4567 @ending from gm@il@com (Bert Gunter)
Date: Thu, 18 Oct 2018 19:34:51 -0700
Subject: [R] 
 Matching multiple search criteria (Unlisting a nested dataset,
 take 2)
In-Reply-To: <CAGxFJbQzGOdb5-coFEV=U4hhwGYQA+9xU2OjLVfYMTYQ6HWWOA@mail.gmail.com>
References: <CANdqJqdP2bDdVNc=8R7jeXYU94p_=3BNmwrt11zwh7OdOaEfZA@mail.gmail.com>
 <CANdqJqfCZU96s3XtVWwDYgmmh4LOJe-3896xxO4Ye4aMGaoDWg@mail.gmail.com>
 <CAGxFJbQmPf=vqRU0iLgEBGyTtUXL_GX8Kd3Bgdq796QhpQxUXA@mail.gmail.com>
 <CAGxFJbRFJjwWjMWSLJMDVtwqWwNd0K36rHLyJiL63nmwVGZBZQ@mail.gmail.com>
 <4e06312a-10f4-4524-a82f-9f7618e435fb@Spark>
 <CAGxFJbQabThuSjOgWaa4QT1Da3EhfjQ9W=0dNKRDtVknije5BQ@mail.gmail.com>
 <CAGxFJbQzGOdb5-coFEV=U4hhwGYQA+9xU2OjLVfYMTYQ6HWWOA@mail.gmail.com>
Message-ID: <CAGxFJbQLnsZQW9XBLnU=zD5aRu-NeDpioCL9QNE-wDACbJ6tmA@mail.gmail.com>

Sorry. Typo.  The last line should be:

ans$Result <- apply(ans,1,function(r)phrasewords[[r[1]]] %allin%
tweets[[r[2]]])

-- Bert



On Thu, Oct 18, 2018 at 7:04 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> All (especially Nathan): **Please feel free to ignore this post without
> response.** It just represents a bit of OCD-ness on my part that may or may
> not be of interest to anyone else.
>
> Purpose of this post: To give an alternative considerably simpler and
> considerably faster solution to the problem than those which I offered
> previously. It may or may not be what the OP asked for, but the improvement
> exercise was instructive to me . Notation as previously in this thread.
>
> New solution:
>
> getwords <-
> function(x)strsplit(gsub("(^[[:space:]]+)|([[:space:]]+)$)","",tolower(x)),split
> = " +")
> ## split lower-cased text into a vector of "words"
> ## I made this a bit fancier to handle some "corner" cases, but the
> previous simpler version may well suffice.
>
> '%allin%' <- function(x, table)prod(match(x,table, nomatch = 0L)) > 0L
> ## a convenience function/operator that improves efficiency.
>
> ## lists of  search word vectors as before
> phrasewords <- getwords(st$terms)
> tweets <- getwords(c(th$text, " i xxxx worthless yxxc ght feel")) ## the
> tweets + one additional
>
> ## simpler approach just using indexing for the bookkeeping that nested
> _apply
> ## loops previously were used for
> ans <- expand.grid(phrases = seq_along(phrasewords),tweets =
> seq_along(tweets), Result = FALSE)
> ans$Result <- apply(ind,1,function(r)phrasewords[[r[1]]] %allin%
> tweets[[r[2]]])
>
> ## ans is a data frame in which the first column indexes phrases and the
> second tweets
> ## The ith row of ans$Result == TRUE iff all the words in the phrase
> indexed by the ith row of the
> ##  phrase column are contained in the tweet indexed by that row's tweet
> column.
>
> This was way faster than my previous offerings.
>
> Note also that just the matching phrases and tweets can be extracted as
> usual by:
>
> > ans[ans[,3],]
>    phrases tweets Result
> 42       6      7   TRUE
> ## all the words in the 6th search phrase appeared in the 7th tweet.
>
> ** I promise to natter on about this no longer! **
>
> Cheers,
> Bert
>
>
> On Wed, Oct 17, 2018 at 7:50 PM Bert Gunter <bgunter.4567 at gmail.com>
> wrote:
>
>>
>> If you wish to use R, you need to at least understand its basic data
>> structures and functionality. Expecting that mimickry of code in special
>> packages will suffice is, I believe, an illusion. If you haven't already
>> done so, you should go through a basic R tutorial or two (there are many on
>> the web; some recommendations, by no means necessarily "the best",  can be
>> found here:
>> https://www.rstudio.com/online-learning/#r-programming).
>>
>> Having said that, I realized that my previous "solution" using regular
>> expressions was more complicated than it needed to be and somewhat foolish
>> ( so much for all my "expertise"). A simpler and better approach is simply
>> to break up both the tweet texts and your search phrases into vectors of
>> their "words" (i.e. character strings surrounded by spaces) using
>> strplit(), and then using R's built-in matching capabilities with %in%.
>> This is quite straightforward, pretty robust (no regex's to wrestle with),
>> and does not require "herculean efforts" to understand. The only wrinkle is
>> some bookkeeping with the "apply" family of functions. These are, as you
>> may know, the functional programming way of handling iteration (loops), but
>> they are what I would consider part of "basic" R functionality and worth
>> spending the time to learn about.
>>
>> Herewith my better, simpler proposal, using your example data as before:
>>
>> getwords <- function(x)strsplit(tolower(x),split = " +")
>> ## split text into a vector of lower-cased "words"
>>
>> phrasewords <- structure(getwords(st$terms), names = st$terms)
>> ## named list of your search word vectors
>>
>> tweets <- getwords(c(th$text, " i xxxx worthless yxxc ght feel"))
>> ## the tweets + one additional that should match the last phrase
>>
>> ans <- lapply(phrasewords, function(x) apply(sapply(tweets,function(y)x
>> %in% y), 2, all))
>> ## a list indexed by the search phrases,
>> ## with each component a vector of logicals with vec[i] == TRUE iff
>> ## the ith tweet contains all the words in the search phrase
>>
>> > ans
>> $`me abused depressed`
>> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>>
>> $`me hurt depressed`
>> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>>
>> $`feel hopeless depressed`
>> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>>
>> $`feel alone depressed`
>> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>>
>> $`i feel helpless`
>> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>>
>> $`i feel worthless`
>> [1] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE
>>
>> -- Bert
>>
>> On Wed, Oct 17, 2018 at 9:20 AM Nathan Parsons <
>> nathan.f.parsons at gmail.com> wrote:
>>
>>> I do not have your command of base r, Bert. That is a herculean effort!
>>> Here?s what I spent my night putting together:
>>>
>>> ## Create search terms
>>> ## dput(st)
>>> st <- structure(list(word1 = c("technique", "me", "me", "feel", "feel"
>>> ), word2 = c("olympic", "abused", "hurt", "hopeless", "alone"
>>> ), word3 = c("lifts", "depressed", "depressed", "depressed",
>>> "depressed")), class = c("tbl_df", "tbl", "data.frame"), row.names =
>>> c(NA,
>>> -5L))
>>>
>>> ## Create tweets
>>> ## dput(th)
>>> th <- structure(list(status_id = c("x1047841705729306624",
>>> "x1046966595610927105",
>>> "x1047094786610552832", "x1046988542818308097", "x1046934493553221632",
>>> "x1047227442899775488", "x1048126008941981696", "x1047798782673543173",
>>> "x1048269727582355457", "x1048092408544677890"), created_at =
>>> c("2018-10-04T13:31:45Z",
>>> "2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",
>>> "2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z", "2018-10-05T08:21:28Z",
>>> "2018-10-04T10:41:11Z", "2018-10-05T17:52:33Z", "2018-10-05T06:07:57Z"
>>> ), text = c("technique is everything with olympic lifts ! @ body by john
>>> ",
>>> "@subtronics just went back and rewatched ur fblice with ur cdjs and let
>>> me tell you man. you are the fucking messiah",
>>> "@ic4rus1 opportunistic means short-game. as in getting drunk now vs.
>>> not being hung over tomorrow vs. not fucking up your life ten years later.",
>>> "i tend to think about my dreams before i sleep.", "@michaelavenatti
>>> @senatorcollins so if your client was in her 20s attending parties with
>>> teenagers doesnt that make her at the least immature as hell or at the
>>> worst a pedophile and a person contributing to the delinquency of minors?",
>>> "i wish i could take credit for this", "i woulda never imagined.
>>> #lakeshow ",
>>> "@philipbloom @blackmagic_news its ok phil! i feel your pain! ",
>>> "sunday ill have a booth in katy at the real craft wives of katy fest
>>> @nolabelbrewco cmon yall!everything is better when you top it with
>>> tias!order today we ship to all 50 ",
>>> "dolly is so baddd"), lat = c(43.6835853, 40.284123, 37.7706565,
>>> 40.431389, 31.1688935, 33.9376735, 34.0207895, 44.900818, 29.7926,
>>> 32.364145), lng = c(-70.3284118, -83.078589, -122.4359785, -79.9806895,
>>> -100.0768885, -118.130426, -118.4119065, -89.5694915, -95.8224,
>>> -86.2447285), county_name = c("Cumberland County", "Delaware County",
>>> "San Francisco County", "Allegheny County", "Concho County",
>>> "Los Angeles County", "Los Angeles County", "Marathon County",
>>> "Harris County", "Montgomery County"), fips = c(23005L, 39041L,
>>> 6075L, 42003L, 48095L, 6037L, 6037L, 55073L, 48201L, 1101L),
>>> state_name = c("Maine", "Ohio", "California", "Pennsylvania",
>>> "Texas", "California", "California", "Wisconsin", "Texas",
>>> "Alabama"), state_abb = c("ME", "OH", "CA", "PA", "TX", "CA",
>>> "CA", "WI", "TX", "AL"), urban_level = c("Medium Metro",
>>> "Large Fringe Metro", "Large Central Metro", "Large Central Metro",
>>> "NonCore (Nonmetro)", "Large Central Metro", "Large Central Metro",
>>> "Small Metro", "Large Central Metro", "Medium Metro"), urban_code = c(3L,
>>> 2L, 1L, 1L, 6L, 1L, 1L, 4L, 1L, 3L), population = c(277308L,
>>> 184029L, 830781L, 1160433L, 4160L, 9509611L, 9509611L, 127612L,
>>> 4233913L, 211037L), linenumber = 1:10), row.names = c(NA,
>>> 10L), class = "data.frame")
>>>
>>> ## Clean tweets - basically just remove everything we don?t need from
>>> the text including punctuation and urls
>>> th %>%
>>> mutate(linenumber = row_number(),
>>> text = str_remove_all(text, "[^\x01-\x7F]"),
>>> text = str_remove_all(text, "\n"),
>>> text = str_remove_all(text, ","),
>>> text = str_remove_all(text, "'"),
>>> text = str_remove_all(text, "&"),
>>> text = str_remove_all(text, "<"),
>>> text = str_remove_all(text, ">"),
>>> text = str_remove_all(text, "http[s]?://[[:alnum:].\\/]+"),
>>> text = tolower(text)) -> th
>>>
>>> ## Create search function that looks for each search term in the
>>> provided string, evaluates if all three search terms have been found, and
>>> returns a logical
>>> srchr <- function(df) {
>>> str_detect(df, "olympic") -> a
>>> str_detect(df, "technique") -> b
>>> str_detect(df, "lifts") -> c
>>> ifelse(a == TRUE & b == TRUE & c == TRUE, TRUE, FALSE)
>>> }
>>>
>>> ## Evaluate tweets for presence of search term
>>> th %>%
>>> mutate(flag = map_chr(text, srchr)) -> th_flagged
>>>
>>> As far as I can tell, this works. I have to manually enter each set of
>>> search terms into the function, which is not ideal. Also, this only
>>> generates a True/False for each tweet based on one search term - I end up
>>> with an evaluatory column for each search term that I would then have to
>>> collapse together somehow. I?m sure there?s a more elegant solution.
>>>
>>> --
>>>
>>> Nate Parsons
>>> Pronouns: He, Him, His
>>> Graduate Teaching Assistant
>>> Department of Sociology
>>> Portland State University
>>> Portland, Oregon
>>>
>>> 503-725-9025
>>> 503-725-3957 FAX
>>> On Oct 16, 2018, 7:20 PM -0700, Bert Gunter <bgunter.4567 at gmail.com>,
>>> wrote:
>>>
>>> OK, as no one else has offered a solution, I'll take a whack at it.
>>>
>>> Caveats: This is a brute force attempt using R's basic regular
>>> expression engine. It is inelegant and barely tested, so likely to be at
>>> best incomplete and buggy, and at worst, incorrect. But maybe Nathan or
>>> someone else on the list can fix it up. So if (when) it breaks, complain on
>>> the list to give someone (almost certainly not me) the opportunity.
>>>
>>> The basic idea is that the tweets are just character strings and the
>>> search phrases are just character vectors all of whose elements must match
>>> "appropriately" -- i.e. they must match whole words -- in the character
>>> strings. So my desired output from the code is a list indexed by the search
>>> phrases, each of whose components if a logical vector of length the number
>>> of tweets each of whose elements = TRUE iff all the words in the search
>>> phrase match somewhere in the tweet.
>>>
>>> Here's the code(using the data Nathan provided):
>>>
>>> > words <- sapply(st[[1]],strsplit,split = " +" )
>>> ## convert the phrases to a list of character vectors of the words
>>> ## Result:
>>> > words
>>> $`me abused depressed`
>>> [1] "me"        "abused"    "depressed"
>>>
>>> $`me hurt depressed`
>>> [1] "me"        "hurt"      "depressed"
>>>
>>> $`feel hopeless depressed`
>>> [1] "feel"      "hopeless"  "depressed"
>>>
>>> $`feel alone depressed`
>>> [1] "feel"      "alone"     "depressed"
>>>
>>> $`i feel helpless`
>>> [1] "i"        "feel"     "helpless"
>>>
>>> $`i feel worthless`
>>> [1] "i"         "feel"      "worthless"
>>>
>>> > expand.words <-  function(z)lapply(z,function(x)paste0(c("^ *"," ","
>>> "),x, c(" "," "," *$")))
>>> ## function to create regexes for words when they are at the beginning,
>>> middle, or end of tweets
>>>
>>> > wordregex <- lapply(words,expand.words)
>>> ##Result
>>> ## too lengthy to include
>>> ##
>>> > tweets <- th$text
>>> ##extract the tweets
>>> > findin <- function(x,y)
>>>    ## x is a vector of regex patterns
>>>    ## y is a character vector
>>>    ## value = vector,vec, with length(vec) == length(y) and vec[i] ==
>>> TRUE iff any of x matches y[i]
>>> { apply(sapply(x,function(z)grepl(z,y)), 1,any)
>>> }
>>>
>>> ## add a matching "tweet" to the tweet vector:
>>> > tweets <- c(tweets," i xxxx worthless yxxc ght feel")
>>>
>>> > ans <-
>>> lapply(wordregex,function(z)apply(sapply(z,function(x)findin(x,tweets)), 1,
>>> all))
>>> ## Result:
>>> > ans
>>> $`me abused depressed`
>>> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>>>
>>> $`me hurt depressed`
>>> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>>>
>>> $`feel hopeless depressed`
>>> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>>>
>>> $`feel alone depressed`
>>> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>>>
>>> $`i feel helpless`
>>> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>>>
>>> $`i feel worthless`
>>> [1] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE
>>>
>>> ## None of the tweets match any of the phrases except for the last tweet
>>> that I added.
>>>
>>> ## Note: you need to add capabilities to handle upper and lower case.
>>> See, e.g. ?casefold
>>>
>>> Cheers,
>>> Bert
>>>
>>> Bert Gunter
>>>
>>> "The trouble with having an open mind is that people keep coming along
>>> and sticking things into it."
>>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>>
>>>
>>> On Tue, Oct 16, 2018 at 3:03 PM Bert Gunter <bgunter.4567 at gmail.com>
>>> wrote:
>>>
>>>> The problem wasn't the data tibbles. You posted in html -- which you
>>>> were explictly warned against -- and that corrupted your text (e.g. some
>>>> quotes became "smart quotes", which cannot be properly cut and pasted into
>>>> R).
>>>>
>>>> Bert
>>>>
>>>>
>>>> On Tue, Oct 16, 2018 at 2:47 PM Nathan Parsons <
>>>> nathan.f.parsons at gmail.com> wrote:
>>>>
>>>>> Argh! Here are those two example datasets as data frames (not tibbles).
>>>>> Sorry again. This apparently is just not my day.
>>>>>
>>>>>
>>>>> th <- structure(list(status_id = c("x1047841705729306624",
>>>>> "x1046966595610927105",
>>>>>
>>>>> "x1047094786610552832", "x1046988542818308097", "x1046934493553221632",
>>>>>
>>>>> "x1047227442899775488"), created_at = c("2018-10-04T13:31:45Z",
>>>>>
>>>>> "2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",
>>>>>
>>>>> "2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z"), text = c("Technique is
>>>>> everything with olympic lifts ! @ Body By John https://t.co/UsfR6DafZt
>>>>> ",
>>>>>
>>>>> "@Subtronics just went back and rewatched ur FBlice with ur CDJs and
>>>>> let me
>>>>> tell you man. You are the fucking messiah",
>>>>>
>>>>> "@ic4rus1 Opportunistic means short-game. As in getting drunk now vs.
>>>>> not
>>>>> being hung over tomorrow vs. not fucking up your life ten years
>>>>> later.",
>>>>>
>>>>> "I tend to think about my dreams before I sleep.", "@MichaelAvenatti
>>>>> @SenatorCollins So,  if your client was in her 20s, attending parties
>>>>> with
>>>>> teenagers, doesn't that make her at the least immature as hell, or at
>>>>> the
>>>>> worst, a pedophile and a person contributing to the delinquency of
>>>>> minors?",
>>>>>
>>>>>
>>>>> "i wish i could take credit for this"), lat = c(43.6835853, 40.284123,
>>>>>
>>>>> 37.7706565, 40.431389, 31.1688935, 33.9376735), lng = c(-70.3284118,
>>>>>
>>>>> -83.078589, -122.4359785, -79.9806895, -100.0768885, -118.130426
>>>>>
>>>>> ), county_name = c("Cumberland County", "Delaware County", "San
>>>>> Francisco
>>>>> County",
>>>>>
>>>>> "Allegheny County", "Concho County", "Los Angeles County"), fips =
>>>>> c(23005L,
>>>>>
>>>>>
>>>>> 39041L, 6075L, 42003L, 48095L, 6037L), state_name = c("Maine",
>>>>>
>>>>> "Ohio", "California", "Pennsylvania", "Texas", "California"),
>>>>>
>>>>>     state_abb = c("ME", "OH", "CA", "PA", "TX", "CA"), urban_level =
>>>>> c("Medium Metro",
>>>>>
>>>>>     "Large Fringe Metro", "Large Central Metro", "Large Central Metro",
>>>>>
>>>>>     "NonCore (Nonmetro)", "Large Central Metro"), urban_code = c(3L,
>>>>>
>>>>>     2L, 1L, 1L, 6L, 1L), population = c(277308L, 184029L, 830781L,
>>>>>
>>>>>     1160433L, 4160L, 9509611L)), class = "data.frame", row.names =
>>>>> c(NA,
>>>>>
>>>>> -6L))
>>>>>
>>>>>
>>>>> st <- structure(list(terms = c("me abused depressed", "me hurt
>>>>> depressed",
>>>>>
>>>>> "feel hopeless depressed", "feel alone depressed", "i feel helpless",
>>>>>
>>>>> "i feel worthless")), row.names = c(NA, -6L), class = c("tbl_df",
>>>>>
>>>>> "tbl", "data.frame"))
>>>>>
>>>>> On Tue, Oct 16, 2018 at 2:39 PM Nathan Parsons <
>>>>> nathan.f.parsons at gmail.com>
>>>>> wrote:
>>>>>
>>>>> > Thanks all for your patience. Here?s a second go that is perhaps more
>>>>> > explicative of what it is I am trying to accomplish (and hopefully
>>>>> in plain
>>>>> > text form)...
>>>>> >
>>>>> >
>>>>> > I?m using the following packages: tidyverse, purrr, tidytext
>>>>> >
>>>>> >
>>>>> > I have a number of tweets in the following form:
>>>>> >
>>>>> >
>>>>> > th <- structure(list(status_id = c("x1047841705729306624",
>>>>> > "x1046966595610927105",
>>>>> >
>>>>> > "x1047094786610552832", "x1046988542818308097",
>>>>> "x1046934493553221632",
>>>>> >
>>>>> > "x1047227442899775488"), created_at = c("2018-10-04T13:31:45Z",
>>>>> >
>>>>> > "2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z",
>>>>> "2018-10-02T05:01:35Z",
>>>>> >
>>>>> > "2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z"), text = c("Technique
>>>>> is
>>>>> > everything with olympic lifts ! @ Body By John
>>>>> https://t.co/UsfR6DafZt",
>>>>> >
>>>>> > "@Subtronics just went back and rewatched ur FBlice with ur CDJs and
>>>>> let
>>>>> > me tell you man. You are the fucking messiah",
>>>>> >
>>>>> > "@ic4rus1 Opportunistic means short-game. As in getting drunk now
>>>>> vs. not
>>>>> > being hung over tomorrow vs. not fucking up your life ten years
>>>>> later.",
>>>>> >
>>>>> > "I tend to think about my dreams before I sleep.", "@MichaelAvenatti
>>>>> > @SenatorCollins So, if your client was in her 20s, attending parties
>>>>> with
>>>>> > teenagers, doesn't that make her at the least immature as hell, or
>>>>> at the
>>>>> > worst, a pedophile and a person contributing to the delinquency of
>>>>> minors?",
>>>>> >
>>>>> > "i wish i could take credit for this"), lat = c(43.6835853,
>>>>> 40.284123,
>>>>> >
>>>>> > 37.7706565, 40.431389, 31.1688935, 33.9376735), lng = c(-70.3284118,
>>>>> >
>>>>> > -83.078589, -122.4359785, -79.9806895, -100.0768885, -118.130426
>>>>> >
>>>>> > ), county_name = c("Cumberland County", "Delaware County", "San
>>>>> Francisco
>>>>> > County",
>>>>> >
>>>>> > "Allegheny County", "Concho County", "Los Angeles County"), fips =
>>>>> > c(23005L,
>>>>> >
>>>>> > 39041L, 6075L, 42003L, 48095L, 6037L), state_name = c("Maine",
>>>>> >
>>>>> > "Ohio", "California", "Pennsylvania", "Texas", "California"),
>>>>> >
>>>>> > state_abb = c("ME", "OH", "CA", "PA", "TX", "CA"), urban_level =
>>>>> c("Medium
>>>>> > Metro",
>>>>> >
>>>>> > "Large Fringe Metro", "Large Central Metro", "Large Central Metro",
>>>>> >
>>>>> > "NonCore (Nonmetro)", "Large Central Metro"), urban_code = c(3L,
>>>>> >
>>>>> > 2L, 1L, 1L, 6L, 1L), population = c(277308L, 184029L, 830781L,
>>>>> >
>>>>> > 1160433L, 4160L, 9509611L)), class = c("data.table", "data.frame"
>>>>> >
>>>>> > ), row.names = c(NA, -6L), .internal.selfref = )
>>>>> >
>>>>> >
>>>>> > I also have a number of search terms in the following form:
>>>>> >
>>>>> >
>>>>> > st <- structure(list(terms = c("me abused depressed", "me hurt
>>>>> depressed",
>>>>> >
>>>>> > "feel hopeless depressed", "feel alone depressed", "i feel helpless",
>>>>> >
>>>>> > "i feel worthless")), row.names = c(NA, -6L), class = c("tbl_df",
>>>>> >
>>>>> > "tbl", "data.frame?))
>>>>> >
>>>>> >
>>>>> > I am trying to isolate the tweets that contain all of the words in
>>>>> each of
>>>>> > the search terms, i.e ?me? ?abused? and ?depressed? from the first
>>>>> example
>>>>> > search term, but they do not have to be in order or even next to one
>>>>> > another.
>>>>> >
>>>>> >
>>>>> > I am familiar with the dplyr suite of tools and have been attempting
>>>>> to
>>>>> > generate some sort of ?filter()? to do this. I am not very familiar
>>>>> with
>>>>> > purrr, but there may be a solution using the map function? I have
>>>>> also
>>>>> > explored the tidytext ?unnest_tokens? function which transforms the
>>>>> ?th?
>>>>> > data in the following way:
>>>>> >
>>>>> >
>>>>> > > tidytext::unnest_tokens(th, word, text, token = "tweets") -> tt
>>>>> >
>>>>> > > head(tt)
>>>>> >
>>>>> > status_id created_at lat lng
>>>>> >
>>>>> > 1: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>>>> >
>>>>> > 2: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>>>> >
>>>>> > 3: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>>>> >
>>>>> > 4: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>>>> >
>>>>> > 5: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>>>> >
>>>>> > 6: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>>>> >
>>>>> > county_name fips state_name state_abb urban_level urban_code
>>>>> >
>>>>> > 1: Cumberland County 23005 Maine ME Medium Metro 3
>>>>> >
>>>>> > 2: Cumberland County 23005 Maine ME Medium Metro 3
>>>>> >
>>>>> > 3: Cumberland County 23005 Maine ME Medium Metro 3
>>>>> >
>>>>> > 4: Cumberland County 23005 Maine ME Medium Metro 3
>>>>> >
>>>>> > 5: Cumberland County 23005 Maine ME Medium Metro 3
>>>>> >
>>>>> > 6: Cumberland County 23005 Maine ME Medium Metro 3
>>>>> >
>>>>> > population word
>>>>> >
>>>>> > 1: 277308 technique
>>>>> >
>>>>> > 2: 277308 is
>>>>> >
>>>>> > 3: 277308 everything
>>>>> >
>>>>> > 4: 277308 with
>>>>> >
>>>>> > 5: 277308 olympic
>>>>> >
>>>>> > 6: 277308 lifts
>>>>> >
>>>>> >
>>>>> > but once I have unnested the tokens, I am unable to recombine them
>>>>> back
>>>>> > into tweets.
>>>>> >
>>>>> >
>>>>> > Ideally the end result would append a new column to the ?th? data
>>>>> that
>>>>> > would flag a tweet that contained all of the search words for any of
>>>>> the
>>>>> > search terms; so the work flow would look like
>>>>> >
>>>>> > 1) look for all search words for one search term in a tweet
>>>>> >
>>>>> > 2) if all of the search words in the search term are found, create a
>>>>> flag
>>>>> > (mutate(flag = 1) or some such)
>>>>> >
>>>>> > 3) do this for all of the tweets
>>>>> >
>>>>> > 4) move on the next search term and repeat
>>>>> >
>>>>> >
>>>>> > Again, my thanks for your patience.
>>>>> >
>>>>> >
>>>>> > --
>>>>> >
>>>>> >
>>>>> > Nate Parsons
>>>>> >
>>>>> > Pronouns: He, Him, His
>>>>> >
>>>>> > Graduate Teaching Assistant
>>>>> >
>>>>> > Department of Sociology
>>>>> >
>>>>> > Portland State University
>>>>> >
>>>>> > Portland, Oregon
>>>>> >
>>>>> >
>>>>> > 503-725-9025
>>>>> >
>>>>> > 503-725-3957 FAX
>>>>> >
>>>>>
>>>>>         [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide
>>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>
>>>>

	[[alternative HTML version deleted]]


From n@re@h_gurbux@ni @ending from hotm@il@com  Fri Oct 19 06:11:54 2018
From: n@re@h_gurbux@ni @ending from hotm@il@com (Naresh Gurbuxani)
Date: Fri, 19 Oct 2018 04:11:54 +0000
Subject: [R] Project in emacs + ess
Message-ID: <CY1PR18MB05499B79AB37D7B65C34ED89FAF90@CY1PR18MB0549.namprd18.prod.outlook.com>

I have switched from RStudio to emacs.  In emacs, how can I create a project like in RStudio?


Within the project directory, I would like to create different directories for code, data, results, figures, documents, etc.  In RStudio project, relative references work well.  For example, an Sweave document in document directory can use command source('code/mycode.R').  In emacs, this does not work "out of the box".  In document folder, the command needs to be source('../code/mycode.R').  This is minor effort, but a better method must exist.


Thanks,

Naresh

	[[alternative HTML version deleted]]


From bgunter@4567 @ending from gm@il@com  Fri Oct 19 06:45:33 2018
From: bgunter@4567 @ending from gm@il@com (Bert Gunter)
Date: Thu, 18 Oct 2018 21:45:33 -0700
Subject: [R] Project in emacs + ess
In-Reply-To: <CY1PR18MB05499B79AB37D7B65C34ED89FAF90@CY1PR18MB0549.namprd18.prod.outlook.com>
References: <CY1PR18MB05499B79AB37D7B65C34ED89FAF90@CY1PR18MB0549.namprd18.prod.outlook.com>
Message-ID: <CAGxFJbQP3Y48ZgPtmpVvXa85a=UxSKhDZ1EbrOHjyDm+AWd7Sw@mail.gmail.com>

Wrong list. This list is about R programming. You should address this to an
emacs support list. Better yet, to an ess list . Here's one place you might
start:

https://www.r-bloggers.com/using-r-with-emacs-and-ess/

Other resources can be found by a web search on "R ess"  .

Cheers,
Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Thu, Oct 18, 2018 at 9:12 PM Naresh Gurbuxani <
naresh_gurbuxani at hotmail.com> wrote:

> I have switched from RStudio to emacs.  In emacs, how can I create a
> project like in RStudio?
>
>
> Within the project directory, I would like to create different directories
> for code, data, results, figures, documents, etc.  In RStudio project,
> relative references work well.  For example, an Sweave document in document
> directory can use command source('code/mycode.R').  In emacs, this does not
> work "out of the box".  In document folder, the command needs to be
> source('../code/mycode.R').  This is minor effort, but a better method must
> exist.
>
>
> Thanks,
>
> Naresh
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From olivier_giv@ud@n @ending from hotm@il@com  Fri Oct 19 07:26:13 2018
From: olivier_giv@ud@n @ending from hotm@il@com (Olivier GIVAUDAN)
Date: Fri, 19 Oct 2018 05:26:13 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <1B674C66F0DD4343BA5DD0C025217F9F028BFDE5@CSSPWD2PRAP1147.SSA-Intra.net>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
 <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>
 <DB3PR0202MB3355AC9A5807D00F591E3B55F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <ac573e54-dde3-397e-601f-2130b5c27676@gmail.com>
 <DB3PR0202MB33559193F379157F44AD4AB0F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>,
 <42363BAD-7D85-4A57-B35A-0CCBA2EC1FD2@mac.com>
 <VI1PR0202MB3357AC579BC0B0D7C4C66BC2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <1B674C66F0DD4343BA5DD0C025217F9F028BFDE5@CSSPWD2PRAP1147.SSA-Intra.net>
Message-ID: <VI1PR0202MB33574BF249C24C25DC8D2C0AF5F90@VI1PR0202MB3357.eurprd02.prod.outlook.com>

Hi Katharina,

Apologies for the late reply.

Thank you for your proposal which was not made yet.

That's actually a Shiny app which I am working on. The problem is that the data are confidential: except when I share the R codes and data (via a marvelous secured SharePoint system...), the data should stay local.

When looking at [1], it seems inevitable that the data are published to a third-party server, which I want to avoid.

But I will look into it more closely, esp. whether it is possible to segregate the sharing of R codes / Shiny app (to the server, no problem) and data (only local).

Best regards,

Olivier

?[1] https://shiny.rstudio.com/articles/deployment-local.html
________________________________
De : Fritsch, Katharina (NNL) <Katharina.Fritsch at nnl.co.uk>
Envoy? : jeudi 11 octobre 2018 08:22
? : Olivier GIVAUDAN; Peter Claussen
Cc : r-help at r-project.org
Objet : RE: [R] Genuine relative paths with R

Hiya,
I have lost track of half the discussion so forgive me if that suggestion has been made before, but would it be suitable to wrap your code in a shiny app and disseminate it this way?
Kind regards,
Katharina.

--

Dr Katharina Fritsch B.Sc. M.Sc. MRSC
Chemical Modeller, Chemical and Process Modelling


E.
katharina.fritsch at nnl.co.uk
T.
+44 (0)1925 289387
@uknnl

National Nuclear Laboratory Limited, 5th Floor, Chadwick House,
Birchwood Park, Warrington, WA3 6AE, UK

www.nnl.co.uk<http://www.nnl.co.uk>

-----Original Message-----
From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Olivier GIVAUDAN
Sent: 11 October 2018 00:54
To: Peter Claussen
Cc: r-help at r-project.org
Subject: Re: [R] Genuine relative paths with R

Yes, I am aware that both '__FILE__' and 'SAS_EXECFILENAME' are macro variables. I don't know how the VBA 'Application.ThisWorkbook.Path' VBA or PHP '__DIR__' (or '__FILE__') work.

And yes, indeed, until now I didn't even realise that this simple find-and-replace solution of "mine" is actually the basic job of a preprocessor when it expands macro variables, thank you!

A macro language in R, yes, I think it would be useful, at least for this function. If nothing simpler is available, of course...
________________________________
De : Peter Claussen <dakotajudo at mac.com> Envoy  : mercredi 10 octobre 2018 23:29   : Olivier GIVAUDAN Cc : Duncan Murdoch; Jeff Newmiller; r-help at r-project.org Objet : Re: [R] Genuine relative paths with R

If I m following all this correctly, it seems your criticism is that R doesn t provide a run-time function that is equivalent to a compile-time macro. You do realize that __FILE__ is not part of the C programming language - it s a predefined variable recognized by the cpp - the C preprocessor program. Similarly, SAS_EXECFILENAME is a predefined variable that can be recognized by the SAS macro processor, but has no meaning in the SAS language itself.

So, to go back to your original post:
1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.

This is what a macro processor does. Are you asking for a macro language in R?

Cheers

On Oct 10, 2018, at 6:11 PM, Olivier GIVAUDAN <olivier_givaudan at hotmail.com<mailto:olivier_givaudan at hotmail.com>> wrote:

It is not wrong to claim that R currently doesn't have a function returning the path of the R file where this same function was invoked.

'getwd()' is indeed not equivalent to VBA 'Application.ThisWorkbook.Path' or C macro '__FILE__' or SAS %sysget(SAS_EXECFILENAME), etc.


        [[alternative HTML version deleted]]


This e-mail is from National Nuclear Laboratory Limited ("NNL"). This e-mail and any attachments are intended for the addressee and may also be legally privileged. If you are not the intended recipient please do not print, re-transmit, store or act in reliance on it or any attachments. Instead, please e-mail it back to the sender and then immediately permanently delete it.

National Nuclear Laboratory Limited (Company number 3857752) Registered in England and Wales. Registered office: Chadwick House, Warrington Road, Birchwood Park, Warrington, WA3 6AE.

	[[alternative HTML version deleted]]


From olivier_giv@ud@n @ending from hotm@il@com  Fri Oct 19 07:27:16 2018
From: olivier_giv@ud@n @ending from hotm@il@com (Olivier GIVAUDAN)
Date: Fri, 19 Oct 2018 05:27:16 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <cbc49c08-3a5d-7510-98e3-8e53a680f47a@gmail.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
 <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>
 <DB3PR0202MB3355AC9A5807D00F591E3B55F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <ac573e54-dde3-397e-601f-2130b5c27676@gmail.com>
 <DB3PR0202MB33559193F379157F44AD4AB0F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <f96e0c64-0e77-47f8-dbc1-5b49313ebb39@gmail.com>
 <VI1PR0202MB3357AF40A744B10736F640A3F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <cbc49c08-3a5d-7510-98e3-8e53a680f47a@gmail.com>
Message-ID: <VI1PR0202MB3357D8143CE4980A5FEDA33FF5F90@VI1PR0202MB3357.eurprd02.prod.outlook.com>

OK, but the usual question remains: how to set the working directory automatically / dynamically?
________________________________
De : Duncan Murdoch <murdoch.duncan at gmail.com>
Envoy? : jeudi 11 octobre 2018 09:27
? : Olivier GIVAUDAN; Jeff Newmiller
Cc : r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

On 10/10/2018 8:08 PM, Olivier GIVAUDAN wrote:
> I think Gabor (at least) already suggested this solution. But the
> problem is: how do you source this file containing this 'foo' function
> without writing its absolute path?

You only need its relative path to source it.

Duncan Murdoch
>
> It's a kind of initialisation issue.
>
>  > a function returning the path of the R file where this same function
> was invoked.
>  >> I didn't realize that's what you were asking for. This has nothing
> to do with your subject line.
>
> It's just a trick to work with relative paths without having to write
> any hardcoded (by definition) absolute path beforehand.
> ------------------------------------------------------------------------
> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Envoy? :* mercredi 10 octobre 2018 23:51
> *? :* Olivier GIVAUDAN; Jeff Newmiller
> *Cc :* r-help at r-project.org
> *Objet :* Re: [R] Genuine relative paths with R
> On 10/10/2018 7:11 PM, Olivier GIVAUDAN wrote:
>> It is not wrong to claim that R currently doesn't have a function
>> returning the path of the R file where this same function was invoked.
>
> But it does.  I didn't realize that's what you were asking for.  This
> has nothing to do with your subject line.
>
> If you source a file from somewhere, then each of the functions it
> creates is marked with its source location.  So you can put this in a file:
>
> foo <- function () 1
>
> filename <- normalizePath(getSrcFilename(foo, full.names=TRUE))
>
> (You need the normalizePath() call because all that will be saved is the
> path that was used.  If it was a relative path, that's what you get
> before you normalize it.  You don't really need the foo function; you
> could put an anonymous function into the getSrcFilename call.  It's just
> usually easier to include a function that already exists.)
>
> When you source() that file, filename will get the name of the file it
> came from.
>
> This is a lot like __FILE__ in C.  One difference is that it is usually
> turned off when the function is being loaded into a package, but you can
> optionally turn it on.
>
> You can also find out what line foo starts on, using
>
> fooline <- getSrcLocation(foo)
>
> This is a lot like __LINE__ in C.
>
> Duncan Murdoch
>
>
>>
>> 'getwd()' is indeed not equivalent to VBA
>> 'Application.ThisWorkbook.Path' or C macro '__FILE__' or SAS
>> %sysget(SAS_EXECFILENAME), etc.
>> ------------------------------------------------------------------------
>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>> *Envoy? :* mercredi 10 octobre 2018 22:59
>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>> *Cc :* r-help at r-project.org
>> *Objet :* Re: [R] Genuine relative paths with R
>> On 10/10/2018 6:52 PM, Olivier GIVAUDAN wrote:
>>>>  Again, you seem to think making a package is a big deal.
>>>
>>> Perhaps not a big deal (I believe you, I didn't write an R package yet),
>>> but not as straightforward as having a function within an R file
>>> returning its own path.
>>>
>>>> But you're free to decide not to do it:  just please don't repeat
>>> falseclaims about R (like the ones about paths that started this long
>>> thread).
>>>
>>> Which false claims?
>>
>> "But I am really wondering why R doesn't have (please tell me if I'm
>> wrong) this basic feature as many other languages have it (batch, shell,
>> C, LaTeX, SAS with macro-variables, etc.)?"
>>
>> Duncan Murdoch
>>
>>> ------------------------------------------------------------------------
>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>> *Envoy? :* mercredi 10 octobre 2018 22:31
>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>> *Cc :* r-help at r-project.org
>>> *Objet :* Re: [R] Genuine relative paths with R
>>> On 10/10/2018 6:17 PM, Olivier GIVAUDAN wrote:
>>>>> Nothing says a package has to go on CRAN.  You can distribute
>>>> themprivately to a small audience.
>>>>
>>>> Yes, I agree in theory. But this solution still violates my own
>>>> proportionality principle.
>>>
>>> Again, you seem to think making a package is a big deal.  Maybe that was
>>> true 10 years ago (though I wrote and tested a package in a 45 minute
>>> presentation at UseR 2008), but now it's very easy.
>>>
>>> But you're free to decide not to do it:  just please don't repeat false
>>> claims about R (like the ones about paths that started this long thread).
>>>
>>>>
>>>>> If you know as much about R as the people who wrote it
>>>>
>>>> I didn't claim that (that's was a quite general / theoretical statement,
>>>> not necessarily and only applicable to R).
>>>
>>> I didn't say you made that claim.  I was answering your question about
>>> why inventing your own way is not a good idea.  It might be a good idea,
>>> if you know the system very, very well.  Otherwise, it's probably better
>>> to work the standard way.
>>>
>>> Duncan Murdoch
>>>
>>>>
>>>>> For example, you might thinkthat all front ends set the working
>>>> directory to the directory of theprogram they are running, because the
>>>> ones you've tried do it that way. But they don't.
>>>>


 2
>>>> GUIs. So the workaround I finally found satisfies my current needs
>>>> ------------------------------------------------------------------------
>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>> *Envoy? :* mercredi 10 octobre 2018 22:07
>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>> *Cc :* r-help at r-project.org
>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>> On 10/10/2018 5:45 PM, Olivier GIVAUDAN wrote:
>>>>> I'm not sure I'm "inventing my own way" of distributing R code... And I
>>>>> distribute it to a very limited audience.
>>>>
>>>> Nothing says a package has to go on CRAN.  You can distribute them
>>>> privately to a small audience.
>>>>
>>>>> Anyway, why not "inventing a new way" if it's more efficient than the
>>>>> standard one (I'm talking now in theory)?
>>>>
>>>> If you know as much about R as the people who wrote it, then you can
>>>> almost certainly invent better ways to do many of the things it does.  R
>>>> Core was constrained by trying to maintain back compatibility, and that
>>>> means some of their solutions aren't perfect.
>>>>
>>>> But if you don't know it that well, chances are you'll make mistakes
>>>> when you invent your own way of doing it.  For example, you might think
>>>> that all front ends set the working directory to the directory of the
>>>> program they are running, because the ones you've tried do it that way.
>>>> But they don't.
>>>>
>>>> Duncan Murdoch
>>>>
>>>>> ------------------------------------------------------------------------
>>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>>> *Envoy? :* mercredi 10 octobre 2018 21:39
>>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>>> *Cc :* r-help at r-project.org
>>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>>> On 10/10/2018 5:31 PM, Olivier GIVAUDAN wrote:
>>>>>> I do not want to use the terminal, just double clicks (i.e. the
>>>>>> simplest, automatic, non-manual way, without having to write a line /
>>>>>> command).
>>>>>> Therefore everything should happen outside any terminal. The user won't
>>>>>> use a terminal.
>>>>>>
>>>>>> I don't have a Mac and I'm not familiar with this OS, sorry.
>>>>>> But I'm really surprised the click method gives different results than

>>>>>> I know the click method worked both on Linux (Ubuntu latest version) and

>>>>>>
>>>>>> Yes, I executed my file from a terminal and got obviously the same
>>>>>> result as you (that's reassuring).
>>>>>>
>>>>>> Come on guys, creating a package... It's like using a hammer to kill a
>>>>>> fly...
>>>>>
>>>>> It's a simple operation to create a package in RStudio.  Not quite a
>>>>> single click, but just a few.
>>>>>
>>>>> In plain R, it's just a little more work using package.skeleton().
>>>>>
>>>>> Really, if you are distributing R code, you should do it in the standard
>>>>> way, not invent your own.
>>>>>
>>>>> Duncan Murdoch
>>>>>
>>>>>> ------------------------------------------------------------------------
>>>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>>>> *Envoy? :* mercredi 10 octobre 2018 20:54
>>>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>>>> *Cc :* r-help at r-project.org
>>>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>>>> On 10/10/2018 4:42 PM, Olivier GIVAUDAN wrote:
>>>>>>> Why are you not simply double-clicking on 'TestPWD' and choosing to
>>>>>>> execute the file (don't add anything)?
>>>>>>> Are you executing the file from a terminal?
>>>>>>
>>>>>> Yes, I was executing the file from my terminal.  Otherwise I really have
>>>>>> no idea what the "current directory" is in the Finder.   (I'm on a Mac.
>>>>>> I just tried the click method; it printed my home directory, not the
>>>>>> directory of the script.)
>>>>>>
>>>>>> I don't know the name of your visual front end, but you are displaying
>>>>>> the working directory that it sets when you click on TestPWD.  That will
>>>>>> be different from the working directory that your user sees in the Terminal.
>>>>>>
>>>>>> You can see what I saw if you run TestPWD from the Terminal.  It will
>>>>>> print the current working directory, not the one where TestPWD happens
>>>>>> to live.
>>>>>>
>>>>>> If you want to do the same sort of thing in R, you could set up a script
>>>>>> that calls R, and execute that in the way you executed TestPWD.  But in
>>>>>> another message you said you aren't allowed to do that, so I think your
>>>>>> best solution is the one offered by Bill Dunlap:  organize your files as
>>>>>> an R package.  If you name your package "Olivier", then you can find all
>>>>>> the files in it under the directory returned by
>>>>>>
>>>>>>     system.file(".", package = "Olivier")
>>>>>>
>>>>>> The package system is designed for R code, but you can put arbitrary
>>>>>> files into a package:  just store them under the "inst" directory in
>>>>>> your source.  When the package is installed, those files will be moved
>>>>>> up one level, i.e.
>>>>>>
>>>>>> Olivier/inst/foo
>>>>>>
>>>>>> will become
>>>>>>
>>>>>>     system.file("foo", package = "Olivier")
>>>>>>
>>>>>> Duncan Murdoch
>>>>>
>>>>
>>>
>>
>


	[[alternative HTML version deleted]]


From olivier_giv@ud@n @ending from hotm@il@com  Fri Oct 19 07:46:43 2018
From: olivier_giv@ud@n @ending from hotm@il@com (Olivier GIVAUDAN)
Date: Fri, 19 Oct 2018 05:46:43 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <12da61c6-8c19-7af2-c57b-6cc5fc929481@yorku.ca>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
 <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>
 <DB3PR0202MB3355AC9A5807D00F591E3B55F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <ac573e54-dde3-397e-601f-2130b5c27676@gmail.com>
 <DB3PR0202MB33559193F379157F44AD4AB0F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <f96e0c64-0e77-47f8-dbc1-5b49313ebb39@gmail.com>
 <VI1PR0202MB3357AF40A744B10736F640A3F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <12da61c6-8c19-7af2-c57b-6cc5fc929481@yorku.ca>
Message-ID: <VI1PR0202MB335785D06EAD0DD198B118E6F5F90@VI1PR0202MB3357.eurprd02.prod.outlook.com>

Hi Michael,

Apologies for the late reply.

I am very grateful to all the R users who generously spent time on my problem and suggested operational solutions.

It seems you didn't follow carefully this thread (which I can understand of course) as 2 operational solutions were already suggested and successfully implemented from my side.

So, to summarise:


  1.  The most universal (i.e. it works on Windows and Linux, grateful if someone on Mac could check) solution, when working with the graphical shell system of an OS, is to create a Rproject file at the root of the project and open it with RStudio: the working directory will be automatically set to the location where this Rproject file is;
  2.  Only on Windows (at first sight): Create an empty .RData (with a proper basename) at the root of the project and open it (it should be by default associated to / opened by the default R GUI): the working directory will be automatically set to the location where this instrumental / dummy RData file is.

I didn't invest more time to look more thoroughly into the other solution suggested by Peter Claussen on macro language.

Again thanks to all of you and special thanks to Jeff Newmiller for his patience and for having shared this "trick" with .RData file.

Best regards,

Olivier
________________________________
De : Michael Friendly <friendly at yorku.ca>
Envoy? : jeudi 11 octobre 2018 13:08
? : Olivier GIVAUDAN; Duncan Murdoch; Jeff Newmiller
Cc : r-help at r-project.org
Objet : Re: Genuine relative paths with R

Olivier:

Readers of R-Help generally are patient and try to be helpful. Numerous
solutions to your initial query were proposed, but for some reason you
either reject them or take the discussion down some different rabbit
hole of claims about R vs. other software environments, to which kind
people reply and you then rebut. ENOUGH ALREADY.  This thread has been
going on for nearly a week. Choose something that
works for you, have a cup of tea, go for a run, get a life.
Please do not bother to reply.

-Michael

On 10/10/2018 8:08 PM, Olivier GIVAUDAN wrote:
> I think Gabor (at least) already suggested this solution. But the problem is: how do you source this file containing this 'foo' function without writing its absolute path?
>
> It's a kind of initialisation issue.
>
>> a function returning the path of the R file where this same function was invoked.
>>> I didn't realize that's what you were asking for. This has nothing to do with your subject line.
>
> It's just a trick to work with relative paths without having to write any hardcoded (by definition) absolute path beforehand.
> ________________________________
> De : Duncan Murdoch <murdoch.duncan at gmail.com>
> Envoy? : mercredi 10 octobre 2018 23:51
> ? : Olivier GIVAUDAN; Jeff Newmiller
> Cc : r-help at r-project.org
> Objet : Re: [R] Genuine relative paths with R
>
> On 10/10/2018 7:11 PM, Olivier GIVAUDAN wrote:
>> It is not wrong to claim that R currently doesn't have a function
>> returning the path of the R file where this same function was invoked.
>
> But it does.  I didn't realize that's what you were asking for.  This
> has nothing to do with your subject line.
>
> If you source a file from somewhere, then each of the functions it
> creates is marked with its source location.  So you can put this in a file:
>
> foo <- function () 1
>
> filename <- normalizePath(getSrcFilename(foo, full.names=TRUE))
>
> (You need the normalizePath() call because all that will be saved is the
> path that was used.  If it was a relative path, that's what you get
> before you normalize it.  You don't really need the foo function; you
> could put an anonymous function into the getSrcFilename call.  It's just
> usually easier to include a function that already exists.)
>
> When you source() that file, filename will get the name of the file it
> came from.
>
> This is a lot like __FILE__ in C.  One difference is that it is usually
> turned off when the function is being loaded into a package, but you can
> optionally turn it on.
>
> You can also find out what line foo starts on, using
>
> fooline <- getSrcLocation(foo)
>
> This is a lot like __LINE__ in C.
>
> Duncan Murdoch
>
>
>>
>> 'getwd()' is indeed not equivalent to VBA
>> 'Application.ThisWorkbook.Path' or C macro '__FILE__' or SAS
>> %sysget(SAS_EXECFILENAME), etc.
>> ------------------------------------------------------------------------
>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>> *Envoy? :* mercredi 10 octobre 2018 22:59
>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>> *Cc :* r-help at r-project.org
>> *Objet :* Re: [R] Genuine relative paths with R
>> On 10/10/2018 6:52 PM, Olivier GIVAUDAN wrote:
>>>>   Again, you seem to think making a package is a big deal.
>>>
>>> Perhaps not a big deal (I believe you, I didn't write an R package yet),
>>> but not as straightforward as having a function within an R file
>>> returning its own path.
>>>
>>>> But you're free to decide not to do it:  just please don't repeat
>>> falseclaims about R (like the ones about paths that started this long
>>> thread).
>>>
>>> Which false claims?
>>
>> "But I am really wondering why R doesn't have (please tell me if I'm
>> wrong) this basic feature as many other languages have it (batch, shell,
>> C, LaTeX, SAS with macro-variables, etc.)?"
>>
>> Duncan Murdoch
>>
>>> ------------------------------------------------------------------------
>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>> *Envoy? :* mercredi 10 octobre 2018 22:31
>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>> *Cc :* r-help at r-project.org
>>> *Objet :* Re: [R] Genuine relative paths with R
>>> On 10/10/2018 6:17 PM, Olivier GIVAUDAN wrote:
>>>>> Nothing says a package has to go on CRAN.  You can distribute
>>>> themprivately to a small audience.
>>>>
>>>> Yes, I agree in theory. But this solution still violates my own
>>>> proportionality principle.
>>>
>>> Again, you seem to think making a package is a big deal.  Maybe that was
>>> true 10 years ago (though I wrote and tested a package in a 45 minute
>>> presentation at UseR 2008), but now it's very easy.
>>>
>>> But you're free to decide not to do it:  just please don't repeat false
>>> claims about R (like the ones about paths that started this long thread).
>>>
>>>>
>>>>> If you know as much about R as the people who wrote it
>>>>
>>>> I didn't claim that (that's was a quite general / theoretical statement,
>>>> not necessarily and only applicable to R).
>>>
>>> I didn't say you made that claim.  I was answering your question about
>>> why inventing your own way is not a good idea.  It might be a good idea,
>>> if you know the system very, very well.  Otherwise, it's probably better
>>> to work the standard way.
>>>
>>> Duncan Murdoch
>>>
>>>>
>>>>> For example, you might thinkthat all front ends set the working
>>>> directory to the directory of theprogram they are running, because the
>>>> ones you've tried do it that way. But they don't.
>>>>
>
>
>>>> GUIs. So the workaround I finally found satisfies my current needs
>>>> ------------------------------------------------------------------------
>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>> *Envoy? :* mercredi 10 octobre 2018 22:07
>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>> *Cc :* r-help at r-project.org
>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>> On 10/10/2018 5:45 PM, Olivier GIVAUDAN wrote:
>>>>> I'm not sure I'm "inventing my own way" of distributing R code... And I
>>>>> distribute it to a very limited audience.
>>>>
>>>> Nothing says a package has to go on CRAN.  You can distribute them
>>>> privately to a small audience.
>>>>
>>>>> Anyway, why not "inventing a new way" if it's more efficient than the
>>>>> standard one (I'm talking now in theory)?
>>>>
>>>> If you know as much about R as the people who wrote it, then you can
>>>> almost certainly invent better ways to do many of the things it does.  R
>>>> Core was constrained by trying to maintain back compatibility, and that
>>>> means some of their solutions aren't perfect.
>>>>
>>>> But if you don't know it that well, chances are you'll make mistakes
>>>> when you invent your own way of doing it.  For example, you might think
>>>> that all front ends set the working directory to the directory of the
>>>> program they are running, because the ones you've tried do it that way.
>>>> But they don't.
>>>>
>>>> Duncan Murdoch
>>>>
>>>>> ------------------------------------------------------------------------
>>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>>> *Envoy? :* mercredi 10 octobre 2018 21:39
>>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>>> *Cc :* r-help at r-project.org
>>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>>> On 10/10/2018 5:31 PM, Olivier GIVAUDAN wrote:
>>>>>> I do not want to use the terminal, just double clicks (i.e. the
>>>>>> simplest, automatic, non-manual way, without having to write a line /
>>>>>> command).
>>>>>> Therefore everything should happen outside any terminal. The user won't
>>>>>> use a terminal.
>>>>>>
>>>>>> I don't have a Mac and I'm not familiar with this OS, sorry.
>>>>>> But I'm really surprised the click method gives different results than
>
>>>>>> I know the click method worked both on Linux (Ubuntu latest version) and
>
>>>>>>
>>>>>> Yes, I executed my file from a terminal and got obviously the same
>>>>>> result as you (that's reassuring).
>>>>>>
>>>>>> Come on guys, creating a package... It's like using a hammer to kill a
>>>>>> fly...
>>>>>
>>>>> It's a simple operation to create a package in RStudio.  Not quite a
>>>>> single click, but just a few.
>>>>>
>>>>> In plain R, it's just a little more work using package.skeleton().
>>>>>
>>>>> Really, if you are distributing R code, you should do it in the standard
>>>>> way, not invent your own.
>>>>>
>>>>> Duncan Murdoch
>>>>>
>>>>>> ------------------------------------------------------------------------
>>>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>>>> *Envoy? :* mercredi 10 octobre 2018 20:54
>>>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>>>> *Cc :* r-help at r-project.org
>>>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>>>> On 10/10/2018 4:42 PM, Olivier GIVAUDAN wrote:
>>>>>>> Why are you not simply double-clicking on 'TestPWD' and choosing to
>>>>>>> execute the file (don't add anything)?
>>>>>>> Are you executing the file from a terminal?
>>>>>>
>>>>>> Yes, I was executing the file from my terminal.  Otherwise I really have
>>>>>> no idea what the "current directory" is in the Finder.   (I'm on a Mac.
>>>>>> I just tried the click method; it printed my home directory, not the
>>>>>> directory of the script.)
>>>>>>
>>>>>> I don't know the name of your visual front end, but you are displaying
>>>>>> the working directory that it sets when you click on TestPWD.  That will
>>>>>> be different from the working directory that your user sees in the Terminal.
>>>>>>
>>>>>> You can see what I saw if you run TestPWD from the Terminal.  It will
>>>>>> print the current working directory, not the one where TestPWD happens
>>>>>> to live.
>>>>>>
>>>>>> If you want to do the same sort of thing in R, you could set up a script
>>>>>> that calls R, and execute that in the way you executed TestPWD.  But in
>>>>>> another message you said you aren't allowed to do that, so I think your
>>>>>> best solution is the one offered by Bill Dunlap:  organize your files as
>>>>>> an R package.  If you name your package "Olivier", then you can find all
>>>>>> the files in it under the directory returned by
>>>>>>
>>>>>>      system.file(".", package = "Olivier")
>>>>>>
>>>>>> The package system is designed for R code, but you can put arbitrary
>>>>>> files into a package:  just store them under the "inst" directory in
>>>>>> your source.  When the package is installed, those files will be moved
>>>>>> up one level, i.e.
>>>>>>
>>>>>> Olivier/inst/foo
>>>>>>
>>>>>> will become
>>>>>>
>>>>>>      system.file("foo", package = "Olivier")
>>>>>>
>>>>>> Duncan Murdoch
>>>>>
>>>>
>>>
>>
>
>
>        [[alternative HTML version deleted]]
>
>
>


	[[alternative HTML version deleted]]


From olivier_giv@ud@n @ending from hotm@il@com  Fri Oct 19 07:48:18 2018
From: olivier_giv@ud@n @ending from hotm@il@com (Olivier GIVAUDAN)
Date: Fri, 19 Oct 2018 05:48:18 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <VI1PR0202MB335785D06EAD0DD198B118E6F5F90@VI1PR0202MB3357.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
 <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>
 <DB3PR0202MB3355AC9A5807D00F591E3B55F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <ac573e54-dde3-397e-601f-2130b5c27676@gmail.com>
 <DB3PR0202MB33559193F379157F44AD4AB0F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <f96e0c64-0e77-47f8-dbc1-5b49313ebb39@gmail.com>
 <VI1PR0202MB3357AF40A744B10736F640A3F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <12da61c6-8c19-7af2-c57b-6cc5fc929481@yorku.ca>,
 <VI1PR0202MB335785D06EAD0DD198B118E6F5F90@VI1PR0202MB3357.eurprd02.prod.outlook.com>
Message-ID: <VI1PR0202MB3357F2C493FDEB7C950DDAD6F5F90@VI1PR0202MB3357.eurprd02.prod.outlook.com>

Sorry, I forgot:

The only regret I have is the title of this thread which is somehow misleading: a more correct one would be "How to set automatically / dynamically the working directory in R?"
________________________________
De : Olivier GIVAUDAN <olivier_givaudan at hotmail.com>
Envoy? : vendredi 19 octobre 2018 05:46
? : Michael Friendly; Duncan Murdoch; Jeff Newmiller
Cc : r-help at r-project.org
Objet : RE: Genuine relative paths with R

Hi Michael,

Apologies for the late reply.

I am very grateful to all the R users who generously spent time on my problem and suggested operational solutions.

It seems you didn't follow carefully this thread (which I can understand of course) as 2 operational solutions were already suggested and successfully implemented from my side.

So, to summarise:


  1.  The most universal (i.e. it works on Windows and Linux, grateful if someone on Mac could check) solution, when working with the graphical shell system of an OS, is to create a Rproject file at the root of the project and open it with RStudio: the working directory will be automatically set to the location where this Rproject file is;
  2.  Only on Windows (at first sight): Create an empty .RData (with a proper basename) at the root of the project and open it (it should be by default associated to / opened by the default R GUI): the working directory will be automatically set to the location where this instrumental / dummy RData file is.

I didn't invest more time to look more thoroughly into the other solution suggested by Peter Claussen on macro language.

Again thanks to all of you and special thanks to Jeff Newmiller for his patience and for having shared this "trick" with .RData file.

Best regards,

Olivier
________________________________
De : Michael Friendly <friendly at yorku.ca>
Envoy? : jeudi 11 octobre 2018 13:08
? : Olivier GIVAUDAN; Duncan Murdoch; Jeff Newmiller
Cc : r-help at r-project.org
Objet : Re: Genuine relative paths with R

Olivier:

Readers of R-Help generally are patient and try to be helpful. Numerous
solutions to your initial query were proposed, but for some reason you
either reject them or take the discussion down some different rabbit
hole of claims about R vs. other software environments, to which kind
people reply and you then rebut. ENOUGH ALREADY.  This thread has been
going on for nearly a week. Choose something that
works for you, have a cup of tea, go for a run, get a life.
Please do not bother to reply.

-Michael

On 10/10/2018 8:08 PM, Olivier GIVAUDAN wrote:
> I think Gabor (at least) already suggested this solution. But the problem is: how do you source this file containing this 'foo' function without writing its absolute path?
>
> It's a kind of initialisation issue.
>
>> a function returning the path of the R file where this same function was invoked.
>>> I didn't realize that's what you were asking for. This has nothing to do with your subject line.
>
> It's just a trick to work with relative paths without having to write any hardcoded (by definition) absolute path beforehand.
> ________________________________
> De : Duncan Murdoch <murdoch.duncan at gmail.com>
> Envoy? : mercredi 10 octobre 2018 23:51
> ? : Olivier GIVAUDAN; Jeff Newmiller
> Cc : r-help at r-project.org
> Objet : Re: [R] Genuine relative paths with R
>
> On 10/10/2018 7:11 PM, Olivier GIVAUDAN wrote:
>> It is not wrong to claim that R currently doesn't have a function
>> returning the path of the R file where this same function was invoked.
>
> But it does.  I didn't realize that's what you were asking for.  This
> has nothing to do with your subject line.
>
> If you source a file from somewhere, then each of the functions it
> creates is marked with its source location.  So you can put this in a file:
>
> foo <- function () 1
>
> filename <- normalizePath(getSrcFilename(foo, full.names=TRUE))
>
> (You need the normalizePath() call because all that will be saved is the
> path that was used.  If it was a relative path, that's what you get
> before you normalize it.  You don't really need the foo function; you
> could put an anonymous function into the getSrcFilename call.  It's just
> usually easier to include a function that already exists.)
>
> When you source() that file, filename will get the name of the file it
> came from.
>
> This is a lot like __FILE__ in C.  One difference is that it is usually
> turned off when the function is being loaded into a package, but you can
> optionally turn it on.
>
> You can also find out what line foo starts on, using
>
> fooline <- getSrcLocation(foo)
>
> This is a lot like __LINE__ in C.
>
> Duncan Murdoch
>
>
>>
>> 'getwd()' is indeed not equivalent to VBA
>> 'Application.ThisWorkbook.Path' or C macro '__FILE__' or SAS
>> %sysget(SAS_EXECFILENAME), etc.
>> ------------------------------------------------------------------------
>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>> *Envoy? :* mercredi 10 octobre 2018 22:59
>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>> *Cc :* r-help at r-project.org
>> *Objet :* Re: [R] Genuine relative paths with R
>> On 10/10/2018 6:52 PM, Olivier GIVAUDAN wrote:
>>>>   Again, you seem to think making a package is a big deal.
>>>
>>> Perhaps not a big deal (I believe you, I didn't write an R package yet),
>>> but not as straightforward as having a function within an R file
>>> returning its own path.
>>>
>>>> But you're free to decide not to do it:  just please don't repeat
>>> falseclaims about R (like the ones about paths that started this long
>>> thread).
>>>
>>> Which false claims?
>>
>> "But I am really wondering why R doesn't have (please tell me if I'm
>> wrong) this basic feature as many other languages have it (batch, shell,
>> C, LaTeX, SAS with macro-variables, etc.)?"
>>
>> Duncan Murdoch
>>
>>> ------------------------------------------------------------------------
>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>> *Envoy? :* mercredi 10 octobre 2018 22:31
>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>> *Cc :* r-help at r-project.org
>>> *Objet :* Re: [R] Genuine relative paths with R
>>> On 10/10/2018 6:17 PM, Olivier GIVAUDAN wrote:
>>>>> Nothing says a package has to go on CRAN.  You can distribute
>>>> themprivately to a small audience.
>>>>
>>>> Yes, I agree in theory. But this solution still violates my own
>>>> proportionality principle.
>>>
>>> Again, you seem to think making a package is a big deal.  Maybe that was
>>> true 10 years ago (though I wrote and tested a package in a 45 minute
>>> presentation at UseR 2008), but now it's very easy.
>>>
>>> But you're free to decide not to do it:  just please don't repeat false
>>> claims about R (like the ones about paths that started this long thread).
>>>
>>>>
>>>>> If you know as much about R as the people who wrote it
>>>>
>>>> I didn't claim that (that's was a quite general / theoretical statement,
>>>> not necessarily and only applicable to R).
>>>
>>> I didn't say you made that claim.  I was answering your question about
>>> why inventing your own way is not a good idea.  It might be a good idea,
>>> if you know the system very, very well.  Otherwise, it's probably better
>>> to work the standard way.
>>>
>>> Duncan Murdoch
>>>
>>>>
>>>>> For example, you might thinkthat all front ends set the working
>>>> directory to the directory of theprogram they are running, because the
>>>> ones you've tried do it that way. But they don't.
>>>>
>
>
>>>> GUIs. So the workaround I finally found satisfies my current needs
>>>> ------------------------------------------------------------------------
>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>> *Envoy? :* mercredi 10 octobre 2018 22:07
>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>> *Cc :* r-help at r-project.org
>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>> On 10/10/2018 5:45 PM, Olivier GIVAUDAN wrote:
>>>>> I'm not sure I'm "inventing my own way" of distributing R code... And I
>>>>> distribute it to a very limited audience.
>>>>
>>>> Nothing says a package has to go on CRAN.  You can distribute them
>>>> privately to a small audience.
>>>>
>>>>> Anyway, why not "inventing a new way" if it's more efficient than the
>>>>> standard one (I'm talking now in theory)?
>>>>
>>>> If you know as much about R as the people who wrote it, then you can
>>>> almost certainly invent better ways to do many of the things it does.  R
>>>> Core was constrained by trying to maintain back compatibility, and that
>>>> means some of their solutions aren't perfect.
>>>>
>>>> But if you don't know it that well, chances are you'll make mistakes
>>>> when you invent your own way of doing it.  For example, you might think
>>>> that all front ends set the working directory to the directory of the
>>>> program they are running, because the ones you've tried do it that way.
>>>> But they don't.
>>>>
>>>> Duncan Murdoch
>>>>
>>>>> ------------------------------------------------------------------------
>>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>>> *Envoy? :* mercredi 10 octobre 2018 21:39
>>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>>> *Cc :* r-help at r-project.org
>>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>>> On 10/10/2018 5:31 PM, Olivier GIVAUDAN wrote:
>>>>>> I do not want to use the terminal, just double clicks (i.e. the
>>>>>> simplest, automatic, non-manual way, without having to write a line /
>>>>>> command).
>>>>>> Therefore everything should happen outside any terminal. The user won't
>>>>>> use a terminal.
>>>>>>
>>>>>> I don't have a Mac and I'm not familiar with this OS, sorry.
>>>>>> But I'm really surprised the click method gives different results than
>
>>>>>> I know the click method worked both on Linux (Ubuntu latest version) and
>
>>>>>>
>>>>>> Yes, I executed my file from a terminal and got obviously the same
>>>>>> result as you (that's reassuring).
>>>>>>
>>>>>> Come on guys, creating a package... It's like using a hammer to kill a
>>>>>> fly...
>>>>>
>>>>> It's a simple operation to create a package in RStudio.  Not quite a
>>>>> single click, but just a few.
>>>>>
>>>>> In plain R, it's just a little more work using package.skeleton().
>>>>>
>>>>> Really, if you are distributing R code, you should do it in the standard
>>>>> way, not invent your own.
>>>>>
>>>>> Duncan Murdoch
>>>>>
>>>>>> ------------------------------------------------------------------------
>>>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>>>> *Envoy? :* mercredi 10 octobre 2018 20:54
>>>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>>>> *Cc :* r-help at r-project.org
>>>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>>>> On 10/10/2018 4:42 PM, Olivier GIVAUDAN wrote:
>>>>>>> Why are you not simply double-clicking on 'TestPWD' and choosing to
>>>>>>> execute the file (don't add anything)?
>>>>>>> Are you executing the file from a terminal?
>>>>>>
>>>>>> Yes, I was executing the file from my terminal.  Otherwise I really have
>>>>>> no idea what the "current directory" is in the Finder.   (I'm on a Mac.
>>>>>> I just tried the click method; it printed my home directory, not the
>>>>>> directory of the script.)
>>>>>>
>>>>>> I don't know the name of your visual front end, but you are displaying
>>>>>> the working directory that it sets when you click on TestPWD.  That will
>>>>>> be different from the working directory that your user sees in the Terminal.
>>>>>>
>>>>>> You can see what I saw if you run TestPWD from the Terminal.  It will
>>>>>> print the current working directory, not the one where TestPWD happens
>>>>>> to live.
>>>>>>
>>>>>> If you want to do the same sort of thing in R, you could set up a script
>>>>>> that calls R, and execute that in the way you executed TestPWD.  But in
>>>>>> another message you said you aren't allowed to do that, so I think your
>>>>>> best solution is the one offered by Bill Dunlap:  organize your files as
>>>>>> an R package.  If you name your package "Olivier", then you can find all
>>>>>> the files in it under the directory returned by
>>>>>>
>>>>>>      system.file(".", package = "Olivier")
>>>>>>
>>>>>> The package system is designed for R code, but you can put arbitrary
>>>>>> files into a package:  just store them under the "inst" directory in
>>>>>> your source.  When the package is installed, those files will be moved
>>>>>> up one level, i.e.
>>>>>>
>>>>>> Olivier/inst/foo
>>>>>>
>>>>>> will become
>>>>>>
>>>>>>      system.file("foo", package = "Olivier")
>>>>>>
>>>>>> Duncan Murdoch
>>>>>
>>>>
>>>
>>
>
>
>        [[alternative HTML version deleted]]
>
>
>


	[[alternative HTML version deleted]]


From m@echler @ending from @t@t@m@th@ethz@ch  Fri Oct 19 08:57:14 2018
From: m@echler @ending from @t@t@m@th@ethz@ch (Martin Maechler)
Date: Fri, 19 Oct 2018 08:57:14 +0200
Subject: [R] Project in emacs + ess
In-Reply-To: <CAGxFJbQP3Y48ZgPtmpVvXa85a=UxSKhDZ1EbrOHjyDm+AWd7Sw@mail.gmail.com>
References: <CY1PR18MB05499B79AB37D7B65C34ED89FAF90@CY1PR18MB0549.namprd18.prod.outlook.com>
 <CAGxFJbQP3Y48ZgPtmpVvXa85a=UxSKhDZ1EbrOHjyDm+AWd7Sw@mail.gmail.com>
Message-ID: <23497.32842.663076.941173@stat.math.ethz.ch>

>>>>> Bert Gunter 
>>>>>     on Thu, 18 Oct 2018 21:45:33 -0700 writes:

    > Wrong list. This list is about R programming. You should
    > address this to an emacs support list. Better yet, to an
    > ess list . Here's one place you might start:

    > https://www.r-bloggers.com/using-r-with-emacs-and-ess/

    > Other resources can be found by a web search on "R ess" .

Indeed, for completeness :

- The ESS website is at https://ess.r-project.org/

- There's an ESS dedicated mailing list "just parallel to" R-help:
  https://stat.ethz.ch/mailman/listinfo/ess-help

- We are currently beta testing a new release of ESS, "18.10",
  which *does* contain some project support.
  Prerelease tar/zip balls available from
  https://stat.ethz.ch/ESS/downloads/ess/Prerelease/
  
- ESS is developed on github now, and issues are tracked here:
  https://github.com/emacs-ess/ESS/issues/

Last but not least :
     Welcome to the world of Emacs and ESS !

--
Martin Maechler
ETH Zurich  (and ESS core team)


    > Cheers, Bert
    > Bert Gunter

    > "The trouble with having an open mind is that people keep
    > coming along and sticking things into it."  -- Opus (aka
    > Berkeley Breathed in his "Bloom County" comic strip )


    > On Thu, Oct 18, 2018 at 9:12 PM Naresh Gurbuxani <
    > naresh_gurbuxani at hotmail.com> wrote:

    >> I have switched from RStudio to emacs.  In emacs, how can
    >> I create a project like in RStudio?
    >> 
    >> 
    >> Within the project directory, I would like to create
    >> different directories for code, data, results, figures,
    >> documents, etc.  In RStudio project, relative references
    >> work well.  For example, an Sweave document in document
    >> directory can use command source('code/mycode.R').  In
    >> emacs, this does not work "out of the box".  In document
    >> folder, the command needs to be
    >> source('../code/mycode.R').  This is minor effort, but a
    >> better method must exist.
    >> 
    >> 
    >> Thanks,
    >> 
    >> Naresh
    >> 
    >> [[alternative HTML version deleted]]
    >> 
    >> ______________________________________________
    >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and
    >> more, see https://stat.ethz.ch/mailman/listinfo/r-help
    >> PLEASE do read the posting guide
    >> http://www.R-project.org/posting-guide.html and provide
    >> commented, minimal, self-contained, reproducible code.
    >> 

    > 	[[alternative HTML version deleted]]

    > ______________________________________________
    > R-help at r-project.org mailing list -- To UNSUBSCRIBE and
    > more, see https://stat.ethz.ch/mailman/listinfo/r-help
    > PLEASE do read the posting guide
    > http://www.R-project.org/posting-guide.html and provide
    > commented, minimal, self-contained, reproducible code.


From K@th@rin@@Frit@ch @ending from nnl@co@uk  Fri Oct 19 10:08:45 2018
From: K@th@rin@@Frit@ch @ending from nnl@co@uk (Fritsch, Katharina (NNL))
Date: Fri, 19 Oct 2018 08:08:45 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <VI1PR0202MB33574BF249C24C25DC8D2C0AF5F90@VI1PR0202MB3357.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
 <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>
 <DB3PR0202MB3355AC9A5807D00F591E3B55F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <ac573e54-dde3-397e-601f-2130b5c27676@gmail.com>
 <DB3PR0202MB33559193F379157F44AD4AB0F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>,
 <42363BAD-7D85-4A57-B35A-0CCBA2EC1FD2@mac.com>
 <VI1PR0202MB3357AC579BC0B0D7C4C66BC2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <1B674C66F0DD4343BA5DD0C025217F9F028BFDE5@CSSPWD2PRAP1147.SSA-Intra.net>
 <VI1PR0202MB33574BF249C24C25DC8D2C0AF5F90@VI1PR0202MB3357.eurprd02.prod.outlook.com>
Message-ID: <1B674C66F0DD4343BA5DD0C025217F9F028CBD53@CSSPWD2PRAP1147.SSA-Intra.net>

Hello Olivier,
You can definitely use Shiny Server to share data and apps on a server you (or the people who asked you to share the data) own and which is only accessible from specified networks. I?ve personally contributed R code to exactly such a project that involved confidential data.
Kind regards,
Katharina.

--

Dr Katharina Fritsch B.Sc. M.Sc. MRSC
Chemical Modeller, Chemical and Process Modelling


E.
katharina.fritsch at nnl.co.uk
T.
+44 (0)1925 289387
@uknnl

National Nuclear Laboratory Limited, 5th Floor, Chadwick House,
Birchwood Park, Warrington, WA3 6AE, UK

www.nnl.co.uk

From: Olivier GIVAUDAN [mailto:olivier_givaudan at hotmail.com]
Sent: 19 October 2018 06:26
To: Fritsch, Katharina (NNL); Peter Claussen
Cc: r-help at r-project.org
Subject: RE: [R] Genuine relative paths with R

Hi Katharina,

Apologies for the late reply.

Thank you for your proposal which was not made yet.

That's actually a Shiny app which I am working on. The problem is that the data are confidential: except when I share the R codes and data (via a marvelous secured SharePoint system...), the data should stay local.

When looking at [1], it seems inevitable that the data are published to a third-party server, which I want to avoid.

But I will look into it more closely, esp. whether it is possible to segregate the sharing of R codes / Shiny app (to the server, no problem) and data (only local).

Best regards,

Olivier

?[1] BLOCKEDshiny[.]rstudio[.]com/articles/deployment-local[.]htmlBLOCKED
________________________________________
De : Fritsch, Katharina (NNL) <Katharina.Fritsch at nnl.co.uk>
Envoy? : jeudi 11 octobre 2018 08:22
? : Olivier GIVAUDAN; Peter Claussen
Cc : r-help at r-project.org
Objet : RE: [R] Genuine relative paths with R

Hiya,
I have lost track of half the discussion so forgive me if that suggestion has been made before, but would it be suitable to wrap your code in a shiny app and disseminate it this way?
Kind regards,
Katharina.

--

Dr Katharina Fritsch B.Sc. M.Sc. MRSC
Chemical Modeller, Chemical and Process Modelling


E.
katharina.fritsch at nnl.co.uk
T.
+44 (0)1925 289387
@uknnl

National Nuclear Laboratory Limited, 5th Floor, Chadwick House,
Birchwood Park, Warrington, WA3 6AE, UK

BLOCKEDnnl[.]co[.]ukBLOCKED

-----Original Message-----
From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Olivier GIVAUDAN
Sent: 11 October 2018 00:54
To: Peter Claussen
Cc: r-help at r-project.org
Subject: Re: [R] Genuine relative paths with R

Yes, I am aware that both '__FILE__' and 'SAS_EXECFILENAME' are macro variables. I don't know how the VBA 'Application.ThisWorkbook.Path' VBA or PHP '__DIR__' (or '__FILE__') work.

And yes, indeed, until now I didn't even realise that this simple find-and-replace solution of "mine" is actually the basic job of a preprocessor when it expands macro variables, thank you!

A macro language in R, yes, I think it would be useful, at least for this function. If nothing simpler is available, of course...
________________________________
De : Peter Claussen <dakotajudo at mac.com> Envoy  : mercredi 10 octobre 2018 23:29   : Olivier GIVAUDAN Cc : Duncan Murdoch; Jeff Newmiller; r-help at r-project.org Objet : Re: [R] Genuine relative paths with R

If I m following all this correctly, it seems your criticism is that R doesn t provide a run-time function that is equivalent to a compile-time macro. You do realize that __FILE__ is not part of the C programming language - it s a predefined variable recognized by the cpp - the C preprocessor program. Similarly, SAS_EXECFILENAME is a predefined variable that can be recognized by the SAS macro processor, but has no meaning in the SAS language itself.

So, to go back to your original post:
1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.

This is what a macro processor does. Are you asking for a macro language in R?

Cheers

On Oct 10, 2018, at 6:11 PM, Olivier GIVAUDAN <olivier_givaudan at hotmail.com<mailto:olivier_givaudan at hotmail.com>> wrote:

It is not wrong to claim that R currently doesn't have a function returning the path of the R file where this same function was invoked.

'getwd()' is indeed not equivalent to VBA 'Application.ThisWorkbook.Path' or C macro '__FILE__' or SAS %sysget(SAS_EXECFILENAME), etc.


        [[alternative HTML version deleted]]


This e-mail is from National Nuclear Laboratory Limited ("NNL"). This e-mail and any attachments are intended for the addressee and may also be legally privileged. If you are not the intended recipient please do not print, re-transmit, store or act in reliance on it or any attachments. Instead, please e-mail it back to the sender and then immediately permanently delete it.

National Nuclear Laboratory Limited (Company number 3857752) Registered in England and Wales. Registered office: Chadwick House, Warrington Road, Birchwood Park, Warrington, WA3 6AE.

*****************************************************************************
This message was received by the Cloud Security Email Gateway

and was checked for Viruses and SPAM by the Cloud Security Email Management Service.
Please forward any suspicious or unwanted emails to "Spam Helpdesk"
*****************************************************************************

This e-mail is from National Nuclear Laboratory Limited ("NNL"). This e-mail and any attachments are intended for the addressee and may also be legally privileged. If you are not the intended recipient please do not print, re-transmit, store or act in reliance on it or any attachments. Instead, please e-mail it back to the sender and then immediately permanently delete it.

National Nuclear Laboratory Limited (Company number 3857752) Registered in England and Wales. Registered office: Chadwick House, Warrington Road, Birchwood Park, Warrington, WA3 6AE.

From ericjberger @ending from gm@il@com  Fri Oct 19 12:12:38 2018
From: ericjberger @ending from gm@il@com (Eric Berger)
Date: Fri, 19 Oct 2018 13:12:38 +0300
Subject: [R] Project in emacs + ess
In-Reply-To: <23497.32842.663076.941173@stat.math.ethz.ch>
References: <CY1PR18MB05499B79AB37D7B65C34ED89FAF90@CY1PR18MB0549.namprd18.prod.outlook.com>
 <CAGxFJbQP3Y48ZgPtmpVvXa85a=UxSKhDZ1EbrOHjyDm+AWd7Sw@mail.gmail.com>
 <23497.32842.663076.941173@stat.math.ethz.ch>
Message-ID: <CAGgJW74ZzfWoPENQDAbxSA_LHxtigT+h+fj65VMBtEStCFNGDQ@mail.gmail.com>

Not exactly sure what you are looking for but here is my workflow which may
give you another perspective
1. my OS is linux
2. I edit my files in emacs (with ESS pulled in)
3. I use make (and Makefile) to compile .o's and .so's from .cpp where
necessary (i.e. I use Rcpp etc)
    (and also to build server.R and ui.R from smaller .R's for my shiny app)
4. I kick off RStudio in what you would call the "project" directory and
use source() commands as appropriate
    (For a given project I would generally have a small script that I
source as the first command in RStudio.)

This gives me the power of the various components
    linux - make, git, shell scripts, etc
    emacs - great editor
    RStudio - for debugging, testing etc

I definitely do not claim my workflow is optimal and am certainly open -
and curious - to understand your proposed workflow.

Regards,
Eric


On Fri, Oct 19, 2018 at 9:57 AM Martin Maechler <maechler at stat.math.ethz.ch>
wrote:

> >>>>> Bert Gunter
> >>>>>     on Thu, 18 Oct 2018 21:45:33 -0700 writes:
>
>     > Wrong list. This list is about R programming. You should
>     > address this to an emacs support list. Better yet, to an
>     > ess list . Here's one place you might start:
>
>     > https://www.r-bloggers.com/using-r-with-emacs-and-ess/
>
>     > Other resources can be found by a web search on "R ess" .
>
> Indeed, for completeness :
>
> - The ESS website is at https://ess.r-project.org/
>
> - There's an ESS dedicated mailing list "just parallel to" R-help:
>   https://stat.ethz.ch/mailman/listinfo/ess-help
>
> - We are currently beta testing a new release of ESS, "18.10",
>   which *does* contain some project support.
>   Prerelease tar/zip balls available from
>   https://stat.ethz.ch/ESS/downloads/ess/Prerelease/
>
> - ESS is developed on github now, and issues are tracked here:
>   https://github.com/emacs-ess/ESS/issues/
>
> Last but not least :
>      Welcome to the world of Emacs and ESS !
>
> --
> Martin Maechler
> ETH Zurich  (and ESS core team)
>
>
>     > Cheers, Bert
>     > Bert Gunter
>
>     > "The trouble with having an open mind is that people keep
>     > coming along and sticking things into it."  -- Opus (aka
>     > Berkeley Breathed in his "Bloom County" comic strip )
>
>
>     > On Thu, Oct 18, 2018 at 9:12 PM Naresh Gurbuxani <
>     > naresh_gurbuxani at hotmail.com> wrote:
>
>     >> I have switched from RStudio to emacs.  In emacs, how can
>     >> I create a project like in RStudio?
>     >>
>     >>
>     >> Within the project directory, I would like to create
>     >> different directories for code, data, results, figures,
>     >> documents, etc.  In RStudio project, relative references
>     >> work well.  For example, an Sweave document in document
>     >> directory can use command source('code/mycode.R').  In
>     >> emacs, this does not work "out of the box".  In document
>     >> folder, the command needs to be
>     >> source('../code/mycode.R').  This is minor effort, but a
>     >> better method must exist.
>     >>
>     >>
>     >> Thanks,
>     >>
>     >> Naresh
>     >>
>     >> [[alternative HTML version deleted]]
>     >>
>     >> ______________________________________________
>     >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and
>     >> more, see https://stat.ethz.ch/mailman/listinfo/r-help
>     >> PLEASE do read the posting guide
>     >> http://www.R-project.org/posting-guide.html and provide
>     >> commented, minimal, self-contained, reproducible code.
>     >>
>
>     >   [[alternative HTML version deleted]]
>
>     > ______________________________________________
>     > R-help at r-project.org mailing list -- To UNSUBSCRIBE and
>     > more, see https://stat.ethz.ch/mailman/listinfo/r-help
>     > PLEASE do read the posting guide
>     > http://www.R-project.org/posting-guide.html and provide
>     > commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From olivier_giv@ud@n @ending from hotm@il@com  Fri Oct 19 12:51:10 2018
From: olivier_giv@ud@n @ending from hotm@il@com (Olivier GIVAUDAN)
Date: Fri, 19 Oct 2018 10:51:10 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <1B674C66F0DD4343BA5DD0C025217F9F028CBD53@CSSPWD2PRAP1147.SSA-Intra.net>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
 <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>
 <DB3PR0202MB3355AC9A5807D00F591E3B55F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <ac573e54-dde3-397e-601f-2130b5c27676@gmail.com>
 <DB3PR0202MB33559193F379157F44AD4AB0F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>,
 <42363BAD-7D85-4A57-B35A-0CCBA2EC1FD2@mac.com>
 <VI1PR0202MB3357AC579BC0B0D7C4C66BC2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <1B674C66F0DD4343BA5DD0C025217F9F028BFDE5@CSSPWD2PRAP1147.SSA-Intra.net>
 <VI1PR0202MB33574BF249C24C25DC8D2C0AF5F90@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <1B674C66F0DD4343BA5DD0C025217F9F028CBD53@CSSPWD2PRAP1147.SSA-Intra.net>
Message-ID: <VI1PR0202MB3357E47013E0E70AC32B6B02F5F90@VI1PR0202MB3357.eurprd02.prod.outlook.com>

Hello Katharina,
?
Indeed, I forgot this solution to have your own server, probably because in my organisation this is not an option, yet.?
?
I'm pushing for that in our organisation for months now but there is quite some resistance and heavy processes around that, and ultimately I'm not deciding on that unfortunately...?
?
That would be for me the ideal solution.?
?
Best regards,?
?
Olivier
________________________________
De : Fritsch, Katharina (NNL) <Katharina.Fritsch at nnl.co.uk>
Envoy? : vendredi 19 octobre 2018 08:08
? : Olivier GIVAUDAN
Cc : r-help at r-project.org
Objet : RE: [R] Genuine relative paths with R

Hello Olivier,
You can definitely use Shiny Server to share data and apps on a server you (or the people who asked you to share the data) own and which is only accessible from specified networks. I?ve personally contributed R code to exactly such a project that involved confidential data.
Kind regards,
Katharina.

--

Dr Katharina Fritsch B.Sc. M.Sc. MRSC
Chemical Modeller, Chemical and Process Modelling


E.
katharina.fritsch at nnl.co.uk
T.
+44 (0)1925 289387
@uknnl

National Nuclear Laboratory Limited, 5th Floor, Chadwick House,
Birchwood Park, Warrington, WA3 6AE, UK

www.nnl.co.uk<http://www.nnl.co.uk>

From: Olivier GIVAUDAN [mailto:olivier_givaudan at hotmail.com]
Sent: 19 October 2018 06:26
To: Fritsch, Katharina (NNL); Peter Claussen
Cc: r-help at r-project.org
Subject: RE: [R] Genuine relative paths with R

Hi Katharina,

Apologies for the late reply.

Thank you for your proposal which was not made yet.

That's actually a Shiny app which I am working on. The problem is that the data are confidential: except when I share the R codes and data (via a marvelous secured SharePoint system...), the data should stay local.

When looking at [1], it seems inevitable that the data are published to a third-party server, which I want to avoid.

But I will look into it more closely, esp. whether it is possible to segregate the sharing of R codes / Shiny app (to the server, no problem) and data (only local).

Best regards,

Olivier

?[1] BLOCKEDshiny[.]rstudio[.]com/articles/deployment-local[.]htmlBLOCKED
________________________________________
De : Fritsch, Katharina (NNL) <Katharina.Fritsch at nnl.co.uk>
Envoy? : jeudi 11 octobre 2018 08:22
? : Olivier GIVAUDAN; Peter Claussen
Cc : r-help at r-project.org
Objet : RE: [R] Genuine relative paths with R

Hiya,
I have lost track of half the discussion so forgive me if that suggestion has been made before, but would it be suitable to wrap your code in a shiny app and disseminate it this way?
Kind regards,
Katharina.

--

Dr Katharina Fritsch B.Sc. M.Sc. MRSC
Chemical Modeller, Chemical and Process Modelling


E.
katharina.fritsch at nnl.co.uk
T.
+44 (0)1925 289387
@uknnl

National Nuclear Laboratory Limited, 5th Floor, Chadwick House,
Birchwood Park, Warrington, WA3 6AE, UK

BLOCKEDnnl[.]co[.]ukBLOCKED

-----Original Message-----
From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Olivier GIVAUDAN
Sent: 11 October 2018 00:54
To: Peter Claussen
Cc: r-help at r-project.org
Subject: Re: [R] Genuine relative paths with R

Yes, I am aware that both '__FILE__' and 'SAS_EXECFILENAME' are macro variables. I don't know how the VBA 'Application.ThisWorkbook.Path' VBA or PHP '__DIR__' (or '__FILE__') work.

And yes, indeed, until now I didn't even realise that this simple find-and-replace solution of "mine" is actually the basic job of a preprocessor when it expands macro variables, thank you!

A macro language in R, yes, I think it would be useful, at least for this function. If nothing simpler is available, of course...
________________________________
De : Peter Claussen <dakotajudo at mac.com> Envoy  : mercredi 10 octobre 2018 23:29   : Olivier GIVAUDAN Cc : Duncan Murdoch; Jeff Newmiller; r-help at r-project.org Objet : Re: [R] Genuine relative paths with R

If I m following all this correctly, it seems your criticism is that R doesn t provide a run-time function that is equivalent to a compile-time macro. You do realize that __FILE__ is not part of the C programming language - it s a predefined variable recognized by the cpp - the C preprocessor program. Similarly, SAS_EXECFILENAME is a predefined variable that can be recognized by the SAS macro processor, but has no meaning in the SAS language itself.

So, to go back to your original post:
1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.

This is what a macro processor does. Are you asking for a macro language in R?

Cheers

On Oct 10, 2018, at 6:11 PM, Olivier GIVAUDAN <olivier_givaudan at hotmail.com<mailto:olivier_givaudan at hotmail.com>> wrote:

It is not wrong to claim that R currently doesn't have a function returning the path of the R file where this same function was invoked.

'getwd()' is indeed not equivalent to VBA 'Application.ThisWorkbook.Path' or C macro '__FILE__' or SAS %sysget(SAS_EXECFILENAME), etc.


        [[alternative HTML version deleted]]


This e-mail is from National Nuclear Laboratory Limited ("NNL"). This e-mail and any attachments are intended for the addressee and may also be legally privileged. If you are not the intended recipient please do not print, re-transmit, store or act in reliance on it or any attachments. Instead, please e-mail it back to the sender and then immediately permanently delete it.

National Nuclear Laboratory Limited (Company number 3857752) Registered in England and Wales. Registered office: Chadwick House, Warrington Road, Birchwood Park, Warrington, WA3 6AE.

*****************************************************************************
This message was received by the Cloud Security Email Gateway

and was checked for Viruses and SPAM by the Cloud Security Email Management Service.
Please forward any suspicious or unwanted emails to "Spam Helpdesk"
*****************************************************************************

This e-mail is from National Nuclear Laboratory Limited ("NNL"). This e-mail and any attachments are intended for the addressee and may also be legally privileged. If you are not the intended recipient please do not print, re-transmit, store or act in reliance on it or any attachments. Instead, please e-mail it back to the sender and then immediately permanently delete it.

National Nuclear Laboratory Limited (Company number 3857752) Registered in England and Wales. Registered office: Chadwick House, Warrington Road, Birchwood Park, Warrington, WA3 6AE.

	[[alternative HTML version deleted]]


From i@t@z@hn @ending from gm@il@com  Fri Oct 19 15:00:54 2018
From: i@t@z@hn @ending from gm@il@com (Ista Zahn)
Date: Fri, 19 Oct 2018 09:00:54 -0400
Subject: [R] 
 Matching multiple search criteria (Unlisting a nested dataset,
 take 2)
In-Reply-To: <CANdqJqdP2bDdVNc=8R7jeXYU94p_=3BNmwrt11zwh7OdOaEfZA@mail.gmail.com>
References: <CANdqJqdP2bDdVNc=8R7jeXYU94p_=3BNmwrt11zwh7OdOaEfZA@mail.gmail.com>
Message-ID: <CA+vqiLFXRo8-0_XR5v73Ad0KE+eKx7=P1NPsCdPWkwNX94tASw@mail.gmail.com>

Here is another approach, just for fun:

library(tidyverse)
library(tokenizers)

anyall <- function(x, # a character vector
                   terms # a list of character vectors
                   ){
    any(map_lgl(terms, function(term) {
        all(term %in% x)
    }))
}

mutate(th,
       flag = map_lgl(tokenize_tweets(text),
                      anyall,
                      terms = tokenize_words(st$terms)))

Best,
Ista
On Tue, Oct 16, 2018 at 5:39 PM Nathan Parsons
<nathan.f.parsons at gmail.com> wrote:
>
> Thanks all for your patience. Here?s a second go that is perhaps more
> explicative of what it is I am trying to accomplish (and hopefully in plain
> text form)...
>
>
> I?m using the following packages: tidyverse, purrr, tidytext
>
>
> I have a number of tweets in the following form:
>
>
> th <- structure(list(status_id = c("x1047841705729306624",
> "x1046966595610927105",
>
> "x1047094786610552832", "x1046988542818308097", "x1046934493553221632",
>
> "x1047227442899775488"), created_at = c("2018-10-04T13:31:45Z",
>
> "2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",
>
> "2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z"), text = c("Technique is
> everything with olympic lifts ! @ Body By John https://t.co/UsfR6DafZt",
>
> "@Subtronics just went back and rewatched ur FBlice with ur CDJs and let me
> tell you man. You are the fucking messiah",
>
> "@ic4rus1 Opportunistic means short-game. As in getting drunk now vs. not
> being hung over tomorrow vs. not fucking up your life ten years later.",
>
> "I tend to think about my dreams before I sleep.", "@MichaelAvenatti
> @SenatorCollins So, if your client was in her 20s, attending parties with
> teenagers, doesn't that make her at the least immature as hell, or at the
> worst, a pedophile and a person contributing to the delinquency of minors?",
>
> "i wish i could take credit for this"), lat = c(43.6835853, 40.284123,
>
> 37.7706565, 40.431389, 31.1688935, 33.9376735), lng = c(-70.3284118,
>
> -83.078589, -122.4359785, -79.9806895, -100.0768885, -118.130426
>
> ), county_name = c("Cumberland County", "Delaware County", "San Francisco
> County",
>
> "Allegheny County", "Concho County", "Los Angeles County"), fips = c(23005L,
>
> 39041L, 6075L, 42003L, 48095L, 6037L), state_name = c("Maine",
>
> "Ohio", "California", "Pennsylvania", "Texas", "California"),
>
> state_abb = c("ME", "OH", "CA", "PA", "TX", "CA"), urban_level = c("Medium
> Metro",
>
> "Large Fringe Metro", "Large Central Metro", "Large Central Metro",
>
> "NonCore (Nonmetro)", "Large Central Metro"), urban_code = c(3L,
>
> 2L, 1L, 1L, 6L, 1L), population = c(277308L, 184029L, 830781L,
>
> 1160433L, 4160L, 9509611L)), class = c("data.table", "data.frame"
>
> ), row.names = c(NA, -6L), .internal.selfref = )
>
>
> I also have a number of search terms in the following form:
>
>
> st <- structure(list(terms = c("me abused depressed", "me hurt depressed",
>
> "feel hopeless depressed", "feel alone depressed", "i feel helpless",
>
> "i feel worthless")), row.names = c(NA, -6L), class = c("tbl_df",
>
> "tbl", "data.frame?))
>
>
> I am trying to isolate the tweets that contain all of the words in each of
> the search terms, i.e ?me? ?abused? and ?depressed? from the first example
> search term, but they do not have to be in order or even next to one
> another.
>
>
> I am familiar with the dplyr suite of tools and have been attempting to
> generate some sort of ?filter()? to do this. I am not very familiar with
> purrr, but there may be a solution using the map function? I have also
> explored the tidytext ?unnest_tokens? function which transforms the ?th?
> data in the following way:
>
>
> > tidytext::unnest_tokens(th, word, text, token = "tweets") -> tt
>
> > head(tt)
>
> status_id created_at lat lng
>
> 1: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>
> 2: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>
> 3: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>
> 4: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>
> 5: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>
> 6: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>
> county_name fips state_name state_abb urban_level urban_code
>
> 1: Cumberland County 23005 Maine ME Medium Metro 3
>
> 2: Cumberland County 23005 Maine ME Medium Metro 3
>
> 3: Cumberland County 23005 Maine ME Medium Metro 3
>
> 4: Cumberland County 23005 Maine ME Medium Metro 3
>
> 5: Cumberland County 23005 Maine ME Medium Metro 3
>
> 6: Cumberland County 23005 Maine ME Medium Metro 3
>
> population word
>
> 1: 277308 technique
>
> 2: 277308 is
>
> 3: 277308 everything
>
> 4: 277308 with
>
> 5: 277308 olympic
>
> 6: 277308 lifts
>
>
> but once I have unnested the tokens, I am unable to recombine them back
> into tweets.
>
>
> Ideally the end result would append a new column to the ?th? data that
> would flag a tweet that contained all of the search words for any of the
> search terms; so the work flow would look like
>
> 1) look for all search words for one search term in a tweet
>
> 2) if all of the search words in the search term are found, create a flag
> (mutate(flag = 1) or some such)
>
> 3) do this for all of the tweets
>
> 4) move on the next search term and repeat
>
>
> Again, my thanks for your patience.
>
>
> --
>
>
> Nate Parsons
>
> Pronouns: He, Him, His
>
> Graduate Teaching Assistant
>
> Department of Sociology
>
> Portland State University
>
> Portland, Oregon
>
>
> 503-725-9025
>
> 503-725-3957 FAX
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From infojomy @ending from gm@il@com  Fri Oct 19 15:48:18 2018
From: infojomy @ending from gm@il@com (Jomy Jose)
Date: Fri, 19 Oct 2018 19:18:18 +0530
Subject: [R] Importing SAS datasets into R efficiently
Message-ID: <CADGufDGv8Os=svtvchTqutRbBM1XEYipBXsKNbVHpO3JA1iqCA@mail.gmail.com>

Hi

Is there an efficient way to import SAS datasets into R,presently while
using haven package it takes long time...Is there a smart work around this ?

Thanks in advance
Jose

	[[alternative HTML version deleted]]


From bgunter@4567 @ending from gm@il@com  Fri Oct 19 16:41:31 2018
From: bgunter@4567 @ending from gm@il@com (Bert Gunter)
Date: Fri, 19 Oct 2018 07:41:31 -0700
Subject: [R] Importing SAS datasets into R efficiently
In-Reply-To: <CADGufDGv8Os=svtvchTqutRbBM1XEYipBXsKNbVHpO3JA1iqCA@mail.gmail.com>
References: <CADGufDGv8Os=svtvchTqutRbBM1XEYipBXsKNbVHpO3JA1iqCA@mail.gmail.com>
Message-ID: <CAGxFJbSLgHjsqsx+hJwfsnaFF3K3y_z72k0hOY7RX71g=uf30Q@mail.gmail.com>

Have you looked at the "foreign" package?

-- Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Oct 19, 2018 at 6:48 AM Jomy Jose <infojomy at gmail.com> wrote:

> Hi
>
> Is there an efficient way to import SAS datasets into R,presently while
> using haven package it takes long time...Is there a smart work around this
> ?
>
> Thanks in advance
> Jose
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From m@rc_@chw@rtz @ending from me@com  Fri Oct 19 17:05:52 2018
From: m@rc_@chw@rtz @ending from me@com (Marc Schwartz)
Date: Fri, 19 Oct 2018 11:05:52 -0400
Subject: [R] Importing SAS datasets into R efficiently
In-Reply-To: <CAGxFJbSLgHjsqsx+hJwfsnaFF3K3y_z72k0hOY7RX71g=uf30Q@mail.gmail.com>
References: <CADGufDGv8Os=svtvchTqutRbBM1XEYipBXsKNbVHpO3JA1iqCA@mail.gmail.com>
 <CAGxFJbSLgHjsqsx+hJwfsnaFF3K3y_z72k0hOY7RX71g=uf30Q@mail.gmail.com>
Message-ID: <0ABFA6F0-78EB-4115-B1CC-7FF670B0CE6C@me.com>

Hi,

'foreign' will only read SAS XPT files, not the proprietary BDAT files, which I presume is the case here.

I don't use 'haven', but it looks like the key functions are written in C/C++, which should be relatively efficient.

If you are having specific issues with particular files,  because they are rather large, and/or have some kind of complex structure, you might want to communicate directly with the haven maintainers to see if there are some performance bottlenecks that perhaps they can resolve.

The only other option, to my knowledge, to directly read BDAT files in R, is the sas7bdat package on CRAN:

  https://cran.r-project.org/web/packages/sas7bdat/ <https://cran.r-project.org/web/packages/sas7bdat/>

However, it looks like it has not been updated in several years, so not sure of status.

Another alternative, if you have access to SAS, is to export the BDAT datasets(s) to CSV files in SAS, and them import them into R, using read.csv().

Regards,

Marc Schwartz


> On Oct 19, 2018, at 10:41 AM, Bert Gunter <bgunter.4567 at gmail.com> wrote:
> 
> Have you looked at the "foreign" package?
> 
> -- Bert
> 
> Bert Gunter
> 
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> 
> 
> On Fri, Oct 19, 2018 at 6:48 AM Jomy Jose <infojomy at gmail.com> wrote:
> 
>> Hi
>> 
>> Is there an efficient way to import SAS datasets into R,presently while
>> using haven package it takes long time...Is there a smart work around this
>> ?
>> 
>> Thanks in advance
>> Jose


	[[alternative HTML version deleted]]


From kevin@thorpe @ending from utoronto@c@  Fri Oct 19 18:32:26 2018
From: kevin@thorpe @ending from utoronto@c@ (Kevin Thorpe)
Date: Fri, 19 Oct 2018 16:32:26 +0000
Subject: [R] Importing SAS datasets into R efficiently
In-Reply-To: <YTXPR01MB03510F5A301A22F45EB5DF3A95F90@YTXPR01MB0351.CANPRD01.PROD.OUTLOOK.COM>
References: <CADGufDGv8Os=svtvchTqutRbBM1XEYipBXsKNbVHpO3JA1iqCA@mail.gmail.com>
 <CAGxFJbSLgHjsqsx+hJwfsnaFF3K3y_z72k0hOY7RX71g=uf30Q@mail.gmail.com>,
 <0ABFA6F0-78EB-4115-B1CC-7FF670B0CE6C@me.com>,
 <YTXPR01MB03510F5A301A22F45EB5DF3A95F90@YTXPR01MB0351.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <YTXPR01MB035115F64F29CFA03EBB3C5395F90@YTXPR01MB0351.CANPRD01.PROD.OUTLOOK.COM>

For some reason, the mailing list got dropped from my reply below.


  
 
--
 Kevin E. Thorpe
 Head of Biostatistics,? Applied Health Research Centre (AHRC)
 Li Ka Shing Knowledge Institute of St. Michael's
 Assistant Professor, Dalla Lana School of Public Health
 University of Toronto
 email: kevin.thorpe at utoronto.ca? Tel: 416.864.5776? Fax: 416.864.3016
 
     



From: Kevin Thorpe
Sent: Friday, October 19, 2018 12:30 PM
To: Bert Gunter; Marc Schwartz
Subject: Re: [R] Importing SAS datasets into R efficiently
? 

Related to Marc's suggestion, if you have SAS on the same computer as R, try the sas.get function in the Hmisc package.

I know it doesn't help you, but I have not had speed issues with haven.

Kevin
? 
?
--
?Kevin E. Thorpe
?Head of Biostatistics,? Applied Health Research Centre (AHRC)
?Li Ka Shing Knowledge Institute of St. Michael's
?Assistant Professor, Dalla Lana School of Public Health
?University of Toronto
?email: kevin.thorpe at utoronto.ca? Tel: 416.864.5776? Fax: 416.864.3016
?
???? 



From: R-help <r-help-bounces at r-project.org> on behalf of Marc Schwartz via R-help <r-help at r-project.org>
Sent: Friday, October 19, 2018 11:05 AM
To: Bert Gunter
Cc: R-help
Subject: Re: [R] Importing SAS datasets into R efficiently
? 

Hi,

'foreign' will only read SAS XPT files, not the proprietary BDAT files, which I presume is the case here.

I don't use 'haven', but it looks like the key functions are written in C/C++, which should be relatively efficient.

If you are having specific issues with particular files,? because they are rather large, and/or have some kind of complex structure, you might want to communicate directly with the haven maintainers to see if there are some performance bottlenecks that perhaps?  they can resolve.

The only other option, to my knowledge, to directly read BDAT files in R, is the sas7bdat package on CRAN:

? https://cran.r-project.org/web/packages/sas7bdat/ <https://cran.r-project.org/web/packages/sas7bdat/>


CRAN - Package sas7bdat
cran.r-project.org
sas7bdat: SAS Database Reader (experimental) Read SAS files in the sas7bdat data format.


CRAN - Package sas7bdat
cran.r-project.org
sas7bdat: SAS Database Reader (experimental) Read SAS files in the sas7bdat data format.

However, it looks like it has not been updated in several years, so not sure of status.

Another alternative, if you have access to SAS, is to export the BDAT datasets(s) to CSV files in SAS, and them import them into R, using read.csv().

Regards,

Marc Schwartz


> On Oct 19, 2018, at 10:41 AM, Bert Gunter <bgunter.4567 at gmail.com> wrote:
> 
> Have you looked at the "foreign" package?
> 
> -- Bert
> 
> Bert Gunter
> 
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> 
> 
> On Fri, Oct 19, 2018 at 6:48 AM Jomy Jose <infojomy at gmail.com> wrote:
> 
>> Hi
>> 
>> Is there an efficient way to import SAS datasets into R,presently while
>> using haven package it takes long time...Is there a smart work around this
>> ?
>> 
>> Thanks in advance
>> Jose


??????? [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide?  http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.
???     

From DSmith @ending from mednet@ucl@@edu  Fri Oct 19 23:57:50 2018
From: DSmith @ending from mednet@ucl@@edu (Smith, Desmond)
Date: Fri, 19 Oct 2018 21:57:50 +0000
Subject: [R] Fixed effects in negative binomial mixed model mgcv::gam
Message-ID: <5B892337-D798-4071-B86B-CF01D98BEEEE@contoso.com>

I am using gam from the mgcv package to analyze a dataset with 24 entries :

ran  f1     f2   y
1   3000    5   545
1   3000    10  1045
1   10000   5   536
1   10000   10  770
2   3000    5   842
2   3000    10  2042
2   10000   5   615
2   10000   10  1361
3   3000    5   328
3   3000    10  1028
3   10000   5   262
3   10000   10  722
4   3000    5   349
4   3000    10  665
4   10000   5   255
4   10000   10  470
5   3000    5   680
5   3000    10  1510
5   10000   5   499
5   10000   10  1422
6   3000    5   628
6   3000    10  2062
6   10000   5   499
6   10000   10  2158

The data has two fixed effects (f1 and f2) and one random effect (ran). The dependent data is y. Because the dependent data y represents counts and is overdispersed, I am using a negative binomial model.

The gam model and its summary output is as follows:

library(mgcv)
summary(gam(y ~ f1 * f2 + s(ran, bs = "re"), data = df2, family = nb, method = "REML"))

Family: Negative Binomial(27.376)
Link function: log

Formula:
y ~ f1 * f2 + s(ran, bs = "re")

Parametric coefficients:
              Estimate Std. Error z value Pr(>|z|)
(Intercept)  5.500e+00  3.137e-01  17.533  < 2e-16 ***
f1          -3.421e-05  3.619e-05  -0.945    0.345
f2           1.760e-01  3.355e-02   5.247 1.55e-07 ***
f1:f2        2.665e-07  4.554e-06   0.059    0.953
---
Signif. codes:  0 ?***? 0.001 ?**? 0.01 ?*? 0.05 ?.? 0.1 ? ? 1

Approximate significance of smooth terms:
         edf Ref.df Chi.sq p-value
s(ran) 4.726      5  85.66  <2e-16 ***
---
Signif. codes:  0 ?***? 0.001 ?**? 0.01 ?*? 0.05 ?.? 0.1 ? ? 1

R-sq.(adj) =  0.866   Deviance explained = 93.6%
-REML = 185.96  Scale est. = 1         n = 24

The Wald test from summary gives very high significance for f2 (P = 1.55e-07). However, when I test the significance of f2 by comparing two different models using anova, I get dramatically different results:

anova(gam(y ~ f1 * f2 + s(ran, bs = "re"), data = df2, family = nb, method = "ML"),
gam(y ~ f1 + s(ran, bs = "re"), data = df2, family = nb, method = "ML"),
test="Chisq")

Analysis of Deviance Table

Model 1: y ~ f1 * f2 + s(ran, bs = "re")
Model 2: y ~ f1 + s(ran, bs = "re")
  Resid. Df Resid. Dev      Df Deviance Pr(>Chi)
1    14.843     18.340
2    16.652     21.529 -1.8091   -3.188   0.1752

f2 is no longer significant. The models were changed from REML to ML, as recommended for evaluation of fixed effects.

If the interaction is preserved, f2 still remains insignificant using anova:

anova(gam(y ~ f1 + f2 + f1:f2 + s(ran, bs = "re"), data = df2, family = nb, method = "ML"),
gam(y ~ f1 + f1:f2 + s(ran, bs = "re"), data = df2, family = nb, method = "ML"),
test="Chisq")
Analysis of Deviance Table

Model 1: y ~ f1 + f2 + f1:f2 + s(ran, bs = "re")
Model 2: y ~ f1 + f1:f2 + s(ran, bs = "re")
  Resid. Df Resid. Dev       Df Deviance Pr(>Chi)
1    14.843     18.340
2    15.645     19.194 -0.80159 -0.85391   0.2855

I would be very grateful for advice on which of these approaches is most appropriate. Many thanks!

________________________________

UCLA HEALTH SCIENCES IMPORTANT WARNING: This email (and any attachments) is only intended for the use of the person or entity to which it is addressed, and may contain information that is privileged and confidential. You, the recipient, are obligated to maintain it in a safe, secure and confidential manner. Unauthorized redisclosure or failure to maintain confidentiality may subject you to federal and state penalties. If you are not the intended recipient, please immediately notify us by return email, and delete this message from your computer.

	[[alternative HTML version deleted]]


From y@@@@_m@lik@ @ending from y@hoo@fr  Sat Oct 20 14:45:13 2018
From: y@@@@_m@lik@ @ending from y@hoo@fr (malika yassa)
Date: Sat, 20 Oct 2018 12:45:13 +0000 (UTC)
Subject: [R] (no subject)
References: <1576907437.20119739.1540039513212.ref@mail.yahoo.com>
Message-ID: <1576907437.20119739.1540039513212@mail.yahoo.com>

hellowplease,do you help mei have this matrixm<-matrix(( 1:12, nrow = 3 )

I want to delete the diagonal values of this matrix
can anyone do thisthinks 


	[[alternative HTML version deleted]]


From y@@@@_m@lik@ @ending from y@hoo@fr  Sat Oct 20 15:04:01 2018
From: y@@@@_m@lik@ @ending from y@hoo@fr (malika yassa)
Date: Sat, 20 Oct 2018 13:04:01 +0000 (UTC)
Subject: [R] (no subject)
References: <946067094.20140946.1540040641893.ref@mail.yahoo.com>
Message-ID: <946067094.20140946.1540040641893@mail.yahoo.com>

hello
please you help mei have this functionx<-rnorm(10,0,1)f<-fuction(u,x)? {exp((x-u)}I want to calculate the integral of this function for each value of x{for(i in 1:lenght(x)
integrate(f,lower=1,upper=4) 

}but I can not find the vector of resulatwhere is the errorthinks

	[[alternative HTML version deleted]]


From jeremieju@te @ending from gm@il@com  Sat Oct 20 15:21:50 2018
From: jeremieju@te @ending from gm@il@com (Jeremie Juste)
Date: Sat, 20 Oct 2018 15:21:50 +0200
Subject: [R] (no subject)
In-Reply-To: <1576907437.20119739.1540039513212@mail.yahoo.com> (malika yassa
 via R-help's message of "Sat, 20 Oct 2018 12:45:13 +0000 (UTC)")
References: <1576907437.20119739.1540039513212.ref@mail.yahoo.com>
 <1576907437.20119739.1540039513212@mail.yahoo.com>
Message-ID: <87o9bo3g9d.fsf@gmail.com>

malika yassa via R-help <r-help at r-project.org> writes:

Hello,

Can you specify what you mean by deleting exactly?
Do you want to have zero in the diagonal or do you want to extract the
non-diagonal part?

Besides your matrix is not a square matrix. Do you really want to
extract the non-diagonal part of a non square matrix?


Best regards,

Jeremie






> hellowplease,do you help mei have this matrixm<-matrix(( 1:12, nrow = 3 )
>
> I want to delete the diagonal values of this matrix
> can anyone do thisthinks 
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jeremieju@te @ending from gm@il@com  Sat Oct 20 17:48:39 2018
From: jeremieju@te @ending from gm@il@com (Jeremie Juste)
Date: Sat, 20 Oct 2018 17:48:39 +0200
Subject: [R] (no subject)
In-Reply-To: <1253569924.20198431.1540046871532@mail.yahoo.com> (malika
 yassa's message of "Sat, 20 Oct 2018 14:47:51 +0000 (UTC)")
References: <1576907437.20119739.1540039513212.ref@mail.yahoo.com>
 <1576907437.20119739.1540039513212@mail.yahoo.com>
 <87o9bo3g9d.fsf@gmail.com>
 <1253569924.20198431.1540046871532@mail.yahoo.com>
Message-ID: <87d0s439go.fsf@gmail.com>



Hello,

Be sure to include the mailing list,<r-help at r-project.org> when you
reply. In this way to improve your chances of obtaining a good answer
and everyone benefits. 


May be something like this ?

aa <- matrix(1:9,3,3)
matrix(as.numeric(aa)[!as.numeric(aa) %in% diag(aa)],2,3)

     [,1] [,2] [,3]
[1,]    2    4    7
[2,]    3    6    8

Hope it helps,

Jeremie

malika yassa <yassa_malika at yahoo.fr> writes:

>  hellow
> yes i want to extract the non-diagonal part 
> for exampl
> i have this matrix? [,1] [,2] [,3]
> [1,]??? 1??? 4??? 7
> [2,]??? 2??? 5??? 8
> [3,]??? 3??? 6??? 9the result 
>
> ? [,1] [,2] [,3]
> [1,]??? 2??? 4??? 7
> [2,]??? 3??? 6??? 8
>
>     Le samedi 20 octobre 2018 ? 15:21:53 UTC+2, Jeremie Juste <jeremiejuste at gmail.com> a ?crit :  
>
>  malika yassa via R-help <r-help at r-project.org> writes:
>
> Hello,
>
> Can you specify what you mean by deleting exactly?
> Do you want to have zero in the diagonal or do you want to extract the
> non-diagonal part?
>
> Besides your matrix is not a square matrix. Do you really want to
> extract the non-diagonal part of a non square matrix?
>
> Best regards,
>
> Jeremie
>
>> hellowplease,do you help mei have this matrixm<-matrix(( 1:12, nrow = 3 )
>>
>> I want to delete the diagonal values of this matrix
>> can anyone do thisthinks 
>>
>> ??? [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @ending from gm@il@com  Sat Oct 20 19:12:13 2018
From: bgunter@4567 @ending from gm@il@com (Bert Gunter)
Date: Sat, 20 Oct 2018 10:12:13 -0700
Subject: [R] (no subject)
In-Reply-To: <87d0s439go.fsf@gmail.com>
References: <1576907437.20119739.1540039513212.ref@mail.yahoo.com>
 <1576907437.20119739.1540039513212@mail.yahoo.com> <87o9bo3g9d.fsf@gmail.com>
 <1253569924.20198431.1540046871532@mail.yahoo.com> <87d0s439go.fsf@gmail.com>
Message-ID: <CAGxFJbTq7JWcWtnY+nAhCqsmCQm6qmP4ERrbTRzReBhowTAbBA@mail.gmail.com>

Jeremie's suggestion of course will fail if some of the off-diagonal
elements are the same as those on the diagonals.

The request doesn't make a lot of sense to me, but if "m" is the matrix,

 m[row(z) != col(z)]

reliably extracts the vector of non-diagonal entries, which can then be
dimensioned as desired.
Or upper.tri() and lower.tri() can be used to separately extract the upper
and lower triangle entries via logical indexing.

Cheers,
Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sat, Oct 20, 2018 at 8:48 AM Jeremie Juste <jeremiejuste at gmail.com>
wrote:

>
>
> Hello,
>
> Be sure to include the mailing list,<r-help at r-project.org> when you
> reply. In this way to improve your chances of obtaining a good answer
> and everyone benefits.
>
>
> May be something like this ?
>
> aa <- matrix(1:9,3,3)
> matrix(as.numeric(aa)[!as.numeric(aa) %in% diag(aa)],2,3)
>
>      [,1] [,2] [,3]
> [1,]    2    4    7
> [2,]    3    6    8
>
> Hope it helps,
>
> Jeremie
>
> malika yassa <yassa_malika at yahoo.fr> writes:
>
> >  hellow
> > yes i want to extract the non-diagonal part
> > for exampl
> > i have this matrix  [,1] [,2] [,3]
> > [1,]    1    4    7
> > [2,]    2    5    8
> > [3,]    3    6    9the result
> >
> >   [,1] [,2] [,3]
> > [1,]    2    4    7
> > [2,]    3    6    8
> >
> >     Le samedi 20 octobre 2018 ? 15:21:53 UTC+2, Jeremie Juste <
> jeremiejuste at gmail.com> a ?crit :
> >
> >  malika yassa via R-help <r-help at r-project.org> writes:
> >
> > Hello,
> >
> > Can you specify what you mean by deleting exactly?
> > Do you want to have zero in the diagonal or do you want to extract the
> > non-diagonal part?
> >
> > Besides your matrix is not a square matrix. Do you really want to
> > extract the non-diagonal part of a non square matrix?
> >
> > Best regards,
> >
> > Jeremie
> >
> >> hellowplease,do you help mei have this matrixm<-matrix(( 1:12, nrow = 3
> )
> >>
> >> I want to delete the diagonal values of this matrix
> >> can anyone do thisthinks
> >>
> >>     [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From meen@m@u @ending from y@hoo@com  Sat Oct 20 20:06:27 2018
From: meen@m@u @ending from y@hoo@com (MEENA SUBRAMANIAN)
Date: Sat, 20 Oct 2018 18:06:27 +0000 (UTC)
Subject: [R] Need to understand how to troubleshoot below error
References: <2093278728.661318.1540058787846.ref@mail.yahoo.com>
Message-ID: <2093278728.661318.1540058787846@mail.yahoo.com>

Hi?
Im unable to write or save my R studio files?
Below error is thrown when the same code works for others
Error in file(file, ifelse(append, "a", "w")) :?? cannot open the connectionIn addition: Warning message:In file(file, ifelse(append, "a", "w")) :? cannot open file 'housedatacomplete.csv': No such file or directory

Meena?
	[[alternative HTML version deleted]]


From jholtm@n @ending from gm@il@com  Sun Oct 21 00:08:28 2018
From: jholtm@n @ending from gm@il@com (jim holtman)
Date: Sat, 20 Oct 2018 15:08:28 -0700
Subject: [R] Need to understand how to troubleshoot below error
In-Reply-To: <2093278728.661318.1540058787846@mail.yahoo.com>
References: <2093278728.661318.1540058787846.ref@mail.yahoo.com>
 <2093278728.661318.1540058787846@mail.yahoo.com>
Message-ID: <CAAxdm-7AGDBz1NSzJfjnpMSP71p9UzwPqMmZ=KEhPRu+ED00Xw@mail.gmail.com>

Can you show the code that was being executed at the time.  Have you
verified that the path to the file is correct for the directory that you
are using?  Have you validated that you have the correct permissions in the
directory to create the file?  Show the complete path length that you were
using and then follow that path to make sure that there is a directory
there that you can write into.

Jim Holtman
*Data Munger Guru*


*What is the problem that you are trying to solve?Tell me what you want to
do, not how you want to do it.*


On Sat, Oct 20, 2018 at 1:19 PM MEENA SUBRAMANIAN via R-help <
r-help at r-project.org> wrote:

> Hi
> Im unable to write or save my R studio files
> Below error is thrown when the same code works for others
> Error in file(file, ifelse(append, "a", "w")) :   cannot open the
> connectionIn addition: Warning message:In file(file, ifelse(append, "a",
> "w")) :  cannot open file 'housedatacomplete.csv': No such file or directory
>
> Meena
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewmil @ending from dcn@d@vi@@c@@u@  Sun Oct 21 01:19:47 2018
From: jdnewmil @ending from dcn@d@vi@@c@@u@ (Jeff Newmiller)
Date: Sat, 20 Oct 2018 16:19:47 -0700
Subject: [R] Need to understand how to troubleshoot below error
In-Reply-To: <CAAxdm-7AGDBz1NSzJfjnpMSP71p9UzwPqMmZ=KEhPRu+ED00Xw@mail.gmail.com>
References: <2093278728.661318.1540058787846.ref@mail.yahoo.com>
 <2093278728.661318.1540058787846@mail.yahoo.com>
 <CAAxdm-7AGDBz1NSzJfjnpMSP71p9UzwPqMmZ=KEhPRu+ED00Xw@mail.gmail.com>
Message-ID: <C0200CD8-02D6-4ABD-A160-FDAA3BD6EA17@dcn.davis.ca.us>

When you specify a filename such as 'housedatacomplete.csv' which has no directory path information, the file is assumed to be in the "current directory" which you can identify using the status notation at the top of the RStudio console window or using the R getwd() function. Note that we may guess something about what may be wrong if you provide that information in your request here, but it is more likely that you will need to use the operating system to investigate permissions which are really off-topic here. Your best bet will be to find a local computer tech or sysadmin to help you solve your mystery, since there can be many special configurations we on the mailing list won't know about.

One note: since you are using RStudio, be sure to create a Project directory/file and do your work with a project open. That way most problems with permissions and working in the wrong directory should usually be avoided. If you cannot create a project then you definitely need local help.

On October 20, 2018 3:08:28 PM PDT, jim holtman <jholtman at gmail.com> wrote:
>Can you show the code that was being executed at the time.  Have you
>verified that the path to the file is correct for the directory that
>you
>are using?  Have you validated that you have the correct permissions in
>the
>directory to create the file?  Show the complete path length that you
>were
>using and then follow that path to make sure that there is a directory
>there that you can write into.
>
>Jim Holtman
>*Data Munger Guru*
>
>
>*What is the problem that you are trying to solve?Tell me what you want
>to
>do, not how you want to do it.*
>
>
>On Sat, Oct 20, 2018 at 1:19 PM MEENA SUBRAMANIAN via R-help <
>r-help at r-project.org> wrote:
>
>> Hi
>> Im unable to write or save my R studio files
>> Below error is thrown when the same code works for others
>> Error in file(file, ifelse(append, "a", "w")) :   cannot open the
>> connectionIn addition: Warning message:In file(file, ifelse(append,
>"a",
>> "w")) :  cannot open file 'housedatacomplete.csv': No such file or
>directory
>>
>> Meena
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From j@y@@hreer@m@n @ending from berkeley@edu  Sun Oct 21 03:08:04 2018
From: j@y@@hreer@m@n @ending from berkeley@edu (Jayashree Raman)
Date: Sat, 20 Oct 2018 18:08:04 -0700
Subject: [R] fixef.plm: Extract the Fixed Effects
Message-ID: <CACH37SFRvGPNtp2G7QuvJx5ki+YFtyf+8zk0R9Dm7_LCNp9Q1w@mail.gmail.com>

Hello,

I am trying to predict using a fixed effects model on an unbalanced
panel. I tried using the code in the example but the fitted values I
get are very different from the fitted values using observed value -
residual. I am giving my code  snippet here:

train_data <- na.omit(read.csv(file="usersessions-with-char-sec-train-subset-100.csv",
header=TRUE, row.names = NULL, sep="|"))

panel.data.train <- plm.data(train_data, index = c("session_start","userid"))

mdl_fe <-plm(session_length~age+session_length_mvavg, data =
panel.data.train, model = "within")

##Summaries
summary(mdl_fe)
fixefs <- fixef(mdl_fe)[index(mdl_fe, which = "userid")]
fit_hand <- fixefs + mdl_fe$coefficients[1] * panel.data.train$age +
mdl_fe$coefficients[2] * panel.data.train$session_length_mvavg
fitval <- panel.data.train$session_length-mdl_fe$residuals

Also when I tried the prediction function from the prediction package,
I get the following error:
Error in crossprod(beta, t(X)) : non-conformable arguments

Any help is appreciated.

Thanks!
Jayashree


From ir@fuch@ @ending from gm@il@com  Sun Oct 21 05:12:01 2018
From: ir@fuch@ @ending from gm@il@com (Fuchs Ira)
Date: Sat, 20 Oct 2018 23:12:01 -0400
Subject: [R] studio server on High SIerra
Message-ID: <2A362557-2CE9-4BD4-AD0D-5B83ED16AC82@gmail.com>

Can I run Rstudio Server on OSX 10.13 (High Sierra). If so, can someone
please point me to install directions? I found an old post that talks about
using homebrew but I can't find the rstudio-server brew to install.


From bgunter@4567 @ending from gm@il@com  Sun Oct 21 06:01:47 2018
From: bgunter@4567 @ending from gm@il@com (Bert Gunter)
Date: Sat, 20 Oct 2018 21:01:47 -0700
Subject: [R] studio server on High SIerra
In-Reply-To: <2A362557-2CE9-4BD4-AD0D-5B83ED16AC82@gmail.com>
References: <2A362557-2CE9-4BD4-AD0D-5B83ED16AC82@gmail.com>
Message-ID: <CAGxFJbRzJzmx5jfjSks2ysmO2GJ3+eAcu3OKA759Y0DfGRNNJA@mail.gmail.com>

RStudio is a separate product from R. Post on the RStudio site, not R-help.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sat, Oct 20, 2018 at 8:12 PM Fuchs Ira <irafuchs at gmail.com> wrote:

> Can I run Rstudio Server on OSX 10.13 (High Sierra). If so, can someone
> please point me to install directions? I found an old post that talks about
> using homebrew but I can't find the rstudio-server brew to install.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewmil @ending from dcn@d@vi@@c@@u@  Sun Oct 21 06:20:15 2018
From: jdnewmil @ending from dcn@d@vi@@c@@u@ (Jeff Newmiller)
Date: Sat, 20 Oct 2018 21:20:15 -0700
Subject: [R] studio server on High SIerra
In-Reply-To: <CAGxFJbRzJzmx5jfjSks2ysmO2GJ3+eAcu3OKA759Y0DfGRNNJA@mail.gmail.com>
References: <2A362557-2CE9-4BD4-AD0D-5B83ED16AC82@gmail.com>
 <CAGxFJbRzJzmx5jfjSks2ysmO2GJ3+eAcu3OKA759Y0DfGRNNJA@mail.gmail.com>
Message-ID: <C1EC7268-2BD9-4951-8B19-F7A8CEBBA429@dcn.davis.ca.us>

There may be certain advantages to installing R via homebrew, but I wouldn't know... I don't use Mac OS. I suspect your easiest route would be to install via the method recommended on CRAN [1], and if you need more help getting R working then there is the R-sig-mac mailing list [2] for OS specific questions.

RStudio requires that you install R first, but as Bert points out this is not the support area for RStudio. The appropriate topics for this mailing list are described in the Posting Guide [3]. Note for future reference that when you send your email formatted as HTML what we see is a garbled version of what you sent, so in the future look for the plain-text setting in your email program when sending email to this list.

[1] https://cran.r-project.org/bin/macosx/
[2] https://stat.ethz.ch/mailman/listinfo/r-sig-mac
[3] See footer of this or any email from the list.

On October 20, 2018 9:01:47 PM PDT, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>RStudio is a separate product from R. Post on the RStudio site, not
>R-help.
>
>Bert Gunter
>
>"The trouble with having an open mind is that people keep coming along
>and
>sticking things into it."
>-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
>On Sat, Oct 20, 2018 at 8:12 PM Fuchs Ira <irafuchs at gmail.com> wrote:
>
>> Can I run Rstudio Server on OSX 10.13 (High Sierra). If so, can
>someone
>> please point me to install directions? I found an old post that talks
>about
>> using homebrew but I can't find the rstudio-server brew to install.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From jdnewmil @ending from dcn@d@vi@@c@@u@  Sun Oct 21 06:38:25 2018
From: jdnewmil @ending from dcn@d@vi@@c@@u@ (Jeff Newmiller)
Date: Sat, 20 Oct 2018 21:38:25 -0700
Subject: [R] Need to understand how to troubleshoot below error
In-Reply-To: <764671844.772135.1540092611866@mail.yahoo.com>
References: <2093278728.661318.1540058787846.ref@mail.yahoo.com>
 <2093278728.661318.1540058787846@mail.yahoo.com>
 <CAAxdm-7AGDBz1NSzJfjnpMSP71p9UzwPqMmZ=KEhPRu+ED00Xw@mail.gmail.com>
 <C0200CD8-02D6-4ABD-A160-FDAA3BD6EA17@dcn.davis.ca.us>
 <764671844.772135.1540092611866@mail.yahoo.com>
Message-ID: <594418AC-6E2B-4F74-B784-B3F13402BEDE@dcn.davis.ca.us>

This looks like a case where some local tech assistance from someone familiar with Windows permissions settings would be appropriate. You may have erroneously installed R using "As Administrator" privileges, which can not only make it difficult to do anything useful but it can be difficult to completely reverse the permissions damage that has already been done. I suggest you remove R completely and in addition remove the user library directory located at C:\\Users\\Vidyut\\Documents\\R or  C:\\Users\\Vidyut\\R. This may require working in As Administrator mode to succeed, which is why some local tech support might be advisable, particularly if my diagnosis is wrong.

Once R is completely eradicated you should be able to install R as a normal user and give permission to install only when prompted, and avoid using As Administrator mode in the future.


On October 20, 2018 8:30:11 PM PDT, MEENA SUBRAMANIAN <meenamsu at yahoo.com> wrote:
> Hi Jeff,
>im a new learner to R an I am trying to execute the below and my files
>get created except for the last function write.csv(housedata, file
>="housedatacomplete.csv")write where my new file housedatacomplete.csv
>does not get created and no write command works for me. Also I am
>unable to save any files.
>
>
>
>setwd("C:\\Users\\Vidyut\\Desktop\\I2R")
>
>
>
>getwd()
>
>
>
>housesalesdata<-read.csv("housesalesdata.csv")
>
>
>
>housefeaturesdata<-read.csv("housefeaturesdata.csv")
>
>
>
>housedata<-merge(housesalesdata,housefeaturesdata,by="ID")
>
>
>
>write.csv(housedata, file ="housedatacomplete.csv")
>
>
>
>Thanks?
>
>Meena?
>
>
>
>On ?Sunday?, ?21? ?October? ?2018? ?04?:?49?:?49? ?AM? ?IST, Jeff
>Newmiller <jdnewmil at dcn.davis.ca.us> wrote:  
> 
>When you specify a filename such as 'housedatacomplete.csv' which has
>no directory path information, the file is assumed to be in the
>"current directory" which you can identify using the status notation at
>the top of the RStudio console window or using the R getwd() function.
>Note that we may guess something about what may be wrong if you provide
>that information in your request here, but it is more likely that you
>will need to use the operating system to investigate permissions which
>are really off-topic here. Your best bet will be to find a local
>computer tech or sysadmin to help you solve your mystery, since there
>can be many special configurations we on the mailing list won't know
>about.
>
>One note: since you are using RStudio, be sure to create a Project
>directory/file and do your work with a project open. That way most
>problems with permissions and working in the wrong directory should
>usually be avoided. If you cannot create a project then you definitely
>need local help.
>
>On October 20, 2018 3:08:28 PM PDT, jim holtman <jholtman at gmail.com>
>wrote:
>>Can you show the code that was being executed at the time.? Have you
>>verified that the path to the file is correct for the directory that
>>you
>>are using?? Have you validated that you have the correct permissions
>in
>>the
>>directory to create the file?? Show the complete path length that you
>>were
>>using and then follow that path to make sure that there is a directory
>>there that you can write into.
>>
>>Jim Holtman
>>*Data Munger Guru*
>>
>>
>>*What is the problem that you are trying to solve?Tell me what you
>want
>>to
>>do, not how you want to do it.*
>>
>>
>>On Sat, Oct 20, 2018 at 1:19 PM MEENA SUBRAMANIAN via R-help <
>>r-help at r-project.org> wrote:
>>
>>> Hi
>>> Im unable to write or save my R studio files
>>> Below error is thrown when the same code works for others
>>> Error in file(file, ifelse(append, "a", "w")) :? cannot open the
>>> connectionIn addition: Warning message:In file(file, ifelse(append,
>>"a",
>>> "w")) :? cannot open file 'housedatacomplete.csv': No such file or
>>directory
>>>
>>> Meena
>>>? ? ? ? [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>>??? [[alternative HTML version deleted]]
>>
>>______________________________________________
>>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>https://stat.ethz.ch/mailman/listinfo/r-help
>>PLEASE do read the posting guide
>>http://www.R-project.org/posting-guide.html
>>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From meen@m@u @ending from y@hoo@com  Sun Oct 21 05:30:11 2018
From: meen@m@u @ending from y@hoo@com (MEENA SUBRAMANIAN)
Date: Sun, 21 Oct 2018 03:30:11 +0000 (UTC)
Subject: [R] Need to understand how to troubleshoot below error
In-Reply-To: <C0200CD8-02D6-4ABD-A160-FDAA3BD6EA17@dcn.davis.ca.us>
References: <2093278728.661318.1540058787846.ref@mail.yahoo.com>
 <2093278728.661318.1540058787846@mail.yahoo.com>
 <CAAxdm-7AGDBz1NSzJfjnpMSP71p9UzwPqMmZ=KEhPRu+ED00Xw@mail.gmail.com>
 <C0200CD8-02D6-4ABD-A160-FDAA3BD6EA17@dcn.davis.ca.us>
Message-ID: <764671844.772135.1540092611866@mail.yahoo.com>

 Hi Jeff,
im a new learner to R an I am trying to execute the below and my files get created except for the last function write.csv(housedata, file ="housedatacomplete.csv")write where my new file housedatacomplete.csv does not get created and no write command works for me. Also I am unable to save any files.



setwd("C:\\Users\\Vidyut\\Desktop\\I2R")



getwd()



housesalesdata<-read.csv("housesalesdata.csv")



housefeaturesdata<-read.csv("housefeaturesdata.csv")



housedata<-merge(housesalesdata,housefeaturesdata,by="ID")



write.csv(housedata, file ="housedatacomplete.csv")



Thanks?

Meena?



    On ?Sunday?, ?21? ?October? ?2018? ?04?:?49?:?49? ?AM? ?IST, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:  
 
 When you specify a filename such as 'housedatacomplete.csv' which has no directory path information, the file is assumed to be in the "current directory" which you can identify using the status notation at the top of the RStudio console window or using the R getwd() function. Note that we may guess something about what may be wrong if you provide that information in your request here, but it is more likely that you will need to use the operating system to investigate permissions which are really off-topic here. Your best bet will be to find a local computer tech or sysadmin to help you solve your mystery, since there can be many special configurations we on the mailing list won't know about.

One note: since you are using RStudio, be sure to create a Project directory/file and do your work with a project open. That way most problems with permissions and working in the wrong directory should usually be avoided. If you cannot create a project then you definitely need local help.

On October 20, 2018 3:08:28 PM PDT, jim holtman <jholtman at gmail.com> wrote:
>Can you show the code that was being executed at the time.? Have you
>verified that the path to the file is correct for the directory that
>you
>are using?? Have you validated that you have the correct permissions in
>the
>directory to create the file?? Show the complete path length that you
>were
>using and then follow that path to make sure that there is a directory
>there that you can write into.
>
>Jim Holtman
>*Data Munger Guru*
>
>
>*What is the problem that you are trying to solve?Tell me what you want
>to
>do, not how you want to do it.*
>
>
>On Sat, Oct 20, 2018 at 1:19 PM MEENA SUBRAMANIAN via R-help <
>r-help at r-project.org> wrote:
>
>> Hi
>> Im unable to write or save my R studio files
>> Below error is thrown when the same code works for others
>> Error in file(file, ifelse(append, "a", "w")) :? cannot open the
>> connectionIn addition: Warning message:In file(file, ifelse(append,
>"a",
>> "w")) :? cannot open file 'housedatacomplete.csv': No such file or
>directory
>>
>> Meena
>>? ? ? ? [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>??? [[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.  
	[[alternative HTML version deleted]]


From y@@@@_m@lik@ @ending from y@hoo@fr  Sun Oct 21 14:02:37 2018
From: y@@@@_m@lik@ @ending from y@hoo@fr (malika yassa)
Date: Sun, 21 Oct 2018 12:02:37 +0000 (UTC)
Subject: [R] integral of the fuction for each value
References: <1889549226.20566287.1540123357840.ref@mail.yahoo.com>
Message-ID: <1889549226.20566287.1540123357840@mail.yahoo.com>

hello
please you help me i have this functionx<-rnorm(10,0,1)f<-fuction(u,x)? {exp((x-u)}I want to calculate the integral of this function for each value of x{for(i in 1:lenght(x)integrate(f,lower=1,upper=4) 
thinks

	[[alternative HTML version deleted]]


From tobby @ending from htu@@t  Sun Oct 21 14:23:07 2018
From: tobby @ending from htu@@t (Tobias Fellinger)
Date: Sun, 21 Oct 2018 14:23:07 +0200
Subject: [R] integral of the fuction for each value
In-Reply-To: <1889549226.20566287.1540123357840@mail.yahoo.com>
References: <1889549226.20566287.1540123357840.ref@mail.yahoo.com>
 <1889549226.20566287.1540123357840@mail.yahoo.com>
Message-ID: <93eab8721bafd28c855a2eb7a71f63069144893d.camel@htu.at>

Hi, 

I'm not entirely sure what you want to calculate. 

If you want to integrate by u in the interval from 0 to 4 for every value
of x I would suggest something like this:

x <- rnorm(10,0,1)
f <- function(u,x){
  exp((x-u))
}

sapply(x, function(i){
  integrate(f,lower=1,upper=4, x=i)$value
})

You can just pass additional arguments to f to integrate, integrate always
integrates by the first argument of the function passed as its first
argument, see the help entry of integrate for more details.

Best Regards, Tobias

On Sun, 2018-10-21 at 12:02 +0000, malika yassa via R-help wrote:
> hello
> please you help me i have this functionx<-rnorm(10,0,1)f<-fuction(u,x)  {exp((x-u)}I want to calculate the integral of this function for each value of x{for(i in 1:lenght(x)integrate(f,lower=1,upper=4) 
> thinks
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From m@rc_grt @ending from y@hoo@fr  Sun Oct 21 15:56:28 2018
From: m@rc_grt @ending from y@hoo@fr (Marc Girondot)
Date: Sun, 21 Oct 2018 15:56:28 +0200
Subject: [R] studio server on High SIerra
In-Reply-To: <2A362557-2CE9-4BD4-AD0D-5B83ED16AC82@gmail.com>
References: <2A362557-2CE9-4BD4-AD0D-5B83ED16AC82@gmail.com>
Message-ID: <6d6adf32-2308-53e8-3bd6-b381879f2e14@yahoo.fr>

I post long time ago a post on my blog about this:
https://max2.ese.u-psud.fr/epc/conservation/Girondot/Publications/Blog_r/Entrees/2014/8/3_Install_RStudio_server_on_Marverick_MacOSX.html

You could try using this base.

Marc

Le 21/10/2018 ? 05:12, Fuchs Ira a ?crit?:
> Can I run Rstudio Server on OSX 10.13 (High Sierra). If so, can someone
> please point me to install directions? I found an old post that talks about
> using homebrew but I can't find the rstudio-server brew to install.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From @tyen @ending from ntu@edu@tw  Sun Oct 21 20:46:34 2018
From: @tyen @ending from ntu@edu@tw (Steven Yen)
Date: Mon, 22 Oct 2018 02:46:34 +0800
Subject: [R] Polygon
In-Reply-To: <1f52a554-7c22-1127-471b-217da7f473a2@ntu.edu.tw>
References: <fcc9c821-50bf-7c7a-4e8f-e4859f7deb78@ntu.edu.tw>
 <0d7bc6e1-2d8e-f3f9-d685-2c1e5a001a20@sapo.pt>
 <9ac5812e-5539-9d6a-6396-a2ec225f257b@ntu.edu.tw>
 <EFF7563D-00B0-4DB8-BC1B-5B0A7FBBE113@comcast.net>
 <1f52a554-7c22-1127-471b-217da7f473a2@ntu.edu.tw>
Message-ID: <37254746-470b-6d9c-dd6c-73cdd58c58c2@ntu.edu.tw>

David, Rui, and All:
Greetings.
1. I need a helping hand with the polygon statement below so that I can 
have the area under the curve highlighted, between (z1,z2).
2. Is it possible to label the X-axis with in two scale, in the current 
z-scale and another, say x = (z+5)*2?
Thank you.

z1<- -1
z2<-? 2
curve(dnorm(x,0,1),xlim=c(-4,4),main="Standard 
Normal",xaxt="n",frame=F,xlab="z")
jj<-seq(z1,z2,0.01)
cord.x<-c(jj)
cord.y<-c(dnorm(jj))
#polygon(cord.x,cord.y,col="skyblue")
axis(1,at=c(-5,z1,0,z2,5),lab=c(-5,z1,0,z2,5))
abline(v=c(z1,z2))

-- 
styen at ntu.edu.tw (S.T. Yen)


	[[alternative HTML version deleted]]


From dc@rl@on @ending from t@mu@edu  Sun Oct 21 22:24:24 2018
From: dc@rl@on @ending from t@mu@edu (David L Carlson)
Date: Sun, 21 Oct 2018 20:24:24 +0000
Subject: [R] Polygon
In-Reply-To: <37254746-470b-6d9c-dd6c-73cdd58c58c2@ntu.edu.tw>
References: <fcc9c821-50bf-7c7a-4e8f-e4859f7deb78@ntu.edu.tw>
 <0d7bc6e1-2d8e-f3f9-d685-2c1e5a001a20@sapo.pt>
 <9ac5812e-5539-9d6a-6396-a2ec225f257b@ntu.edu.tw>
 <EFF7563D-00B0-4DB8-BC1B-5B0A7FBBE113@comcast.net>
 <1f52a554-7c22-1127-471b-217da7f473a2@ntu.edu.tw>
 <37254746-470b-6d9c-dd6c-73cdd58c58c2@ntu.edu.tw>
Message-ID: <7c430404eb934af893b6e930257dd9f1@tamu.edu>

I think this does what you want.

z1<- -1
z2<-  2
oldp <- par(mgp=c(3, .5, 0))
curve(dnorm(x,0,1), xlim=c(-5, 5),main="Standard Normal",
    xaxt="n", frame=F, xlab="")
jj<-seq(z1,z2,0.01)
cord.x<- jj
cord.y<- dnorm(jj)
polygon(c(-1, cord.x, 2), c(0, cord.y, 0), col="skyblue")
axis(1,at=c(-5,z1,0,z2,5),lab=c(-5,z1,0,z2,5))
abline(v=c(z1,z2))
axis(1, at=c(-5, z1, 0, z2, 5), lab=(c(-5,z1,0,z2,5) + 5)*2, line=2)
par(oldp)

When you assign a vector to an object, you do not need to use c(), e.g. cord.x <- jj. I expanded xlim= since you were labeling the axis at -5, and 5, but only drawing the plot from -4 to 4.

To get the polygon to work, you need to add points to the baseline at at either end.

The line= argument in axis() lets you put an axis line into the margin of the plot. I used the mgp= argument in par() to close the space between the tickmarks and their values.
--------------------------------------
David L. Carlson
Department of Anthropology
Texas A&M University

-----Original Message-----
From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Steven Yen
Sent: Sunday, October 21, 2018 1:47 PM
To: David Winsemius <dwinsemius at comcast.net>
Cc: r-help at r-project.org
Subject: Re: [R] Polygon

David, Rui, and All:
Greetings.
1. I need a helping hand with the polygon statement below so that I can 
have the area under the curve highlighted, between (z1,z2).
2. Is it possible to label the X-axis with in two scale, in the current 
z-scale and another, say x = (z+5)*2?
Thank you.

z1<- -1
z2<-? 2
curve(dnorm(x,0,1),xlim=c(-4,4),main="Standard 
Normal",xaxt="n",frame=F,xlab="z")
jj<-seq(z1,z2,0.01)
cord.x<-c(jj)
cord.y<-c(dnorm(jj))
#polygon(cord.x,cord.y,col="skyblue")
axis(1,at=c(-5,z1,0,z2,5),lab=c(-5,z1,0,z2,5))
abline(v=c(z1,z2))

-- 
styen at ntu.edu.tw (S.T. Yen)


	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

From gkr@emer @ending from bgc-jen@@mpg@de  Mon Oct 22 09:26:14 2018
From: gkr@emer @ending from bgc-jen@@mpg@de (Guido Kraemer)
Date: Mon, 22 Oct 2018 09:26:14 +0200
Subject: [R] object 'nativeRoutines' not found
In-Reply-To: <76b118ab-4235-f0fd-4499-eb56aa7ab8bc@bgc-jena.mpg.de>
References: <76b118ab-4235-f0fd-4499-eb56aa7ab8bc@bgc-jena.mpg.de>
Message-ID: <d86a94ab-085b-f28f-71f3-6a4046fd681e@bgc-jena.mpg.de>

FYI, the problem just fixed itself.

On 9/24/18 3:43 PM, Guido Kraemer wrote:
> Hi all,
>
> Since a couple of days travis-ci fails for my package coRanking with 
> "R: devel".
> The error message is:
>
> Error in nativeRoutines[[lib]] <- routines :
> object 'nativeRoutines' not found
>
> "R: release" and "R: oldrel" work fine. Did some R internals change or 
> is the "R: devel" on travis currently broken?
>
> I also sent the package to winbuilder and it works fine with R-devel
>
> You can find the travis build here:
>
> https://travis-ci.org/gdkrmr/coRanking/jobs/428661435
>
> Best Regards,
>
> Guido
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Guido Kraemer
Max Planck Institute for Biogeochemistry Jena
Department for Biogeochemical Integration
Hans-Kn?ll-Str. 10
07745 Jena
Germany

phone: +49 3641 576293
e-mail: gkraemer at bgc-jena.mpg.de


From petr@pik@l @ending from prechez@@cz  Mon Oct 22 11:34:06 2018
From: petr@pik@l @ending from prechez@@cz (PIKAL Petr)
Date: Mon, 22 Oct 2018 09:34:06 +0000
Subject: [R] (no subject)
In-Reply-To: <946067094.20140946.1540040641893@mail.yahoo.com>
References: <946067094.20140946.1540040641893.ref@mail.yahoo.com>
 <946067094.20140946.1540040641893@mail.yahoo.com>
Message-ID: <eb53082636be4c1da1a4c5d39acc9592@SRVEXCHCM1301.precheza.cz>

Hi

first of all few comments

Does your email client have subject line? If yes please use it, if not, change the client.
Please do not post in HTML, such emails have big chance to be scrambled.

# this gives you 10 random numbers
x<-rnorm(10,0,1)

f<-fuction(u,x)  {exp(x- u)}
# you probably ment
f<-function(u,x)  {exp(x- u)}

for(i in 1:lenght(x) integrate(f,lower=1,upper=4)
# you probably ment
for(i in 1:length(x)) integrate(f,lower=1,upper=4)
......................^^...^
but this gives you an error
> for(i in 1:length(x)) integrate(f,lower=1,upper=4)
Error in f(x, ...) : argument "x" is missing, with no default

The error message comes from your f function as you did not defined u

If you changed your f function somehow
f<-function(x, u=2)  {exp(x - u)}
for(i in 1:length(x)) integrate(f,lower=1,upper=4)
the error is gone but so do results.

You need either print your results explicitly or to assign them to some object.

But if you printed your results you would find that you get same repeated result length(x) times.
> for(i in 1:length(x)) print(integrate(f,lower=1,upper=4))
7.021177 with absolute error < 7.8e-14
7.021177 with absolute error < 7.8e-14
7.021177 with absolute error < 7.8e-14
7.021177 with absolute error < 7.8e-14
7.021177 with absolute error < 7.8e-14

AFAIK, integrate computes area below curve defined by function f between lower and upper and it has nothing to do with your x definition.

So you should reconsider what do you want to achieve and if you have some time you should read some introduction document(s) to understand how R operates with objects. R Intro should be good starting point.

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of malika yassa via R-
> help
> Sent: Saturday, October 20, 2018 3:04 PM
> To: r-help at r-project.org
> Subject: [R] (no subject)
>
> hello
> please you help mei have this functionx<-rnorm(10,0,1)f<-fuction(u,x)  {exp((x-
> u)}I want to calculate the integral of this function for each value of x{for(i in
> 1:lenght(x)
> integrate(f,lower=1,upper=4)
>
> }but I can not find the vector of resulatwhere is the errorthinks
>
> [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information about processing and protection of business partner?s personal data are available on website: https://www.precheza.cz/en/personal-data-protection-principles/
D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any documents attached to it may be confidential and are subject to the legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/


From m@rc@c@p@v@nni @ending from googlem@il@com  Mon Oct 22 15:30:22 2018
From: m@rc@c@p@v@nni @ending from googlem@il@com (Marc Capavanni)
Date: Mon, 22 Oct 2018 14:30:22 +0100
Subject: [R] Cannot use R on Windows when installed to an external drive
 with a space in the path
Message-ID: <CANccLkyWSaKnrb9gczt62WqR9WVpAT5eXbJhkKRk_gRUcQhzxw@mail.gmail.com>

Hi all,

I'm considering filing this as a bug report but wanted to make sure first
that I'm not doing something wrong.

A piece of software which I develop installs R as part of its dependencies.
This normally works perfectly fine. However we noticed a bug when
installing to external drives on a path that includes a space, RScript.exe
and R.exe will not work.

E:\Program Files (x86)\R-3-3-3\bin>Rscript.exe
'E:\Program' is not recognized as an internal or external command,
operable program or batch file.

As you can see I'm in the directory itself, and simply calling the
executable without entering a path.

Similarly, if I do enter the full path with quote marks, I get the same
issue.

E:\>"E:\Program Files (x86)\R-3-3-3\bin\Rscript.exe"
'E:\Program' is not recognized as an internal or external command,
operable program or batch file.

At this stage I'm thinking it's either an R bug or a Windows bug, but I can
run the following just fine.

E:\Program Files (x86)\HelloWorldProj\bin>HelloWorldProj.exe
Hello, world!

I've tested this with two variables.

 A - Using the R installer OR Simply copying the binaries
 B - Writing to E:\R-3-3-3 OR Writing to E:\Program Files (x86)\R-3-3-3

A does not affect the outcome in any way, however R only works when B uses
the path without spaces.

I searched elsewhere on the internet for the same and interestingly it was
another R install with this issue. I believe the commenters here were
erroneously attributing it to the user.

https://stackoverflow.com/questions/43510438/how-to-run-an-executable-that-contains-a-space-in-path-from-command-line-on-wind

Any thoughts? I'm open to a sensible workaround, and if it is a bug I'm
happy to raise it.

Thanks,
Marc

	[[alternative HTML version deleted]]


From dc@rl@on @ending from t@mu@edu  Mon Oct 22 15:34:23 2018
From: dc@rl@on @ending from t@mu@edu (David L Carlson)
Date: Mon, 22 Oct 2018 13:34:23 +0000
Subject: [R] Polygon
In-Reply-To: <1f26f7c9-34a5-628d-e30f-a9eca5202407@ntu.edu.tw>
References: <fcc9c821-50bf-7c7a-4e8f-e4859f7deb78@ntu.edu.tw>
 <0d7bc6e1-2d8e-f3f9-d685-2c1e5a001a20@sapo.pt>
 <9ac5812e-5539-9d6a-6396-a2ec225f257b@ntu.edu.tw>
 <EFF7563D-00B0-4DB8-BC1B-5B0A7FBBE113@comcast.net>
 <1f52a554-7c22-1127-471b-217da7f473a2@ntu.edu.tw>
 <37254746-470b-6d9c-dd6c-73cdd58c58c2@ntu.edu.tw>
 <7c430404eb934af893b6e930257dd9f1@tamu.edu>
 <1f26f7c9-34a5-628d-e30f-a9eca5202407@ntu.edu.tw>
Message-ID: <a52c389bd60b4bb3b7238147e1679c4a@tamu.edu>

Yes, par(oldp) resets the parameter to its original value.

The simplest way to get the area in this case would be to use pnorm():

> pnorm(2) - pnorm(-1)
[1] 0.8185946

If you have an arbitrary polygon, you can use polyarea() in the pracma package:

> library(pracma)
> polyarea(rev(c(-1, cord.x, 2)), rev(c(0, cord.y, 0)))
[1] 0.8185917

The second differs slightly from the first because it is an approximation based on 101 points (the default for the curve() function). The polyarea() function wants the polygon to be defined counter-clockwise so we use rev() to reverse the coordinates. Without this you will get a negative area, but you can always use abs() to fix that:

> polyarea(c(-1, cord.x, 2), c(0, cord.y, 0))
[1] -0.8185917
> abs(polyarea(c(-1, cord.x, 2), c(0, cord.y, 0)))
[1] 0.8185917

One more point. Don?t use abbreviations for TRUE and FALSE (e.g. frame=F). FALSE cannot be redefined, but F can be. If you used a variable called F in earlier code, it could change the behavior of curve():

> curve(dnorm(x,0,1), xlim=c(-5, 5), frame=F)
> FALSE <- 1
Error in FALSE <- 1 : invalid (do_set) left-hand side to assignment
> F <- 1
> curve(dnorm(x,0,1), xlim=c(-5, 5), frame=F)

----------------------------------------
David L Carlson
Department of Anthropology
Texas A&M University
College Station, TX 77843-4352



From: Steven Yen <styen at ntu.edu.tw> 
Sent: Sunday, October 21, 2018 9:54 PM
To: David L Carlson <dcarlson at tamu.edu>
Subject: Re: [R] Polygon

Thank you David. This is great!!
I can follow all you do, except one. What does the last statement do: par(oldp). I would think that it reset the parameters, needed only if there is a next job.

I am a little embarrassed to push this further, but let me see if I can bounce another thing out of this.

Is it possible to have a "call-out", somehow indicating that the probability associated witht he shaded area is, say, 0.45. Is this possible? Am I asking too much of R? Fine if not. Thanks again!!!
On 10/22/2018 4:24 AM, David L Carlson wrote:
I think this does what you want.

z1<- -1
z2<-  2
oldp <- par(mgp=c(3, .5, 0))
curve(dnorm(x,0,1), xlim=c(-5, 5),main="Standard Normal",
    xaxt="n", frame=F, xlab="")
jj<-seq(z1,z2,0.01)
cord.x<- jj
cord.y<- dnorm(jj)
polygon(c(-1, cord.x, 2), c(0, cord.y, 0), col="skyblue")
axis(1,at=c(-5,z1,0,z2,5),lab=c(-5,z1,0,z2,5))
abline(v=c(z1,z2))
axis(1, at=c(-5, z1, 0, z2, 5), lab=(c(-5,z1,0,z2,5) + 5)*2, line=2)
par(oldp)

When you assign a vector to an object, you do not need to use c(), e.g. cord.x <- jj. I expanded xlim= since you were labeling the axis at -5, and 5, but only drawing the plot from -4 to 4.

To get the polygon to work, you need to add points to the baseline at at either end.

The line= argument in axis() lets you put an axis line into the margin of the plot. I used the mgp= argument in par() to close the space between the tickmarks and their values.
--------------------------------------
David L. Carlson
Department of Anthropology
Texas A&M University

-----Original Message-----
From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Steven Yen
Sent: Sunday, October 21, 2018 1:47 PM
To: David Winsemius mailto:dwinsemius at comcast.net
Cc: mailto:r-help at r-project.org
Subject: Re: [R] Polygon

David, Rui, and All:
Greetings.
1. I need a helping hand with the polygon statement below so that I can 
have the area under the curve highlighted, between (z1,z2).
2. Is it possible to label the X-axis with in two scale, in the current 
z-scale and another, say x = (z+5)*2?
Thank you.

z1<- -1
z2<-? 2
curve(dnorm(x,0,1),xlim=c(-4,4),main="Standard 
Normal",xaxt="n",frame=F,xlab="z")
jj<-seq(z1,z2,0.01)
cord.x<-c(jj)
cord.y<-c(dnorm(jj))
#polygon(cord.x,cord.y,col="skyblue")
axis(1,at=c(-5,z1,0,z2,5),lab=c(-5,z1,0,z2,5))
abline(v=c(z1,z2))



-- 
mailto:styen at ntu.edu.tw (S.T. Yen)

From m@rc@c@p@v@nni @ending from googlem@il@com  Mon Oct 22 15:34:22 2018
From: m@rc@c@p@v@nni @ending from googlem@il@com (Marc Capavanni)
Date: Mon, 22 Oct 2018 14:34:22 +0100
Subject: [R] Cannot use R on Windows when installed to an external drive
 with a space in the path
In-Reply-To: <CANccLkyWSaKnrb9gczt62WqR9WVpAT5eXbJhkKRk_gRUcQhzxw@mail.gmail.com>
References: <CANccLkyWSaKnrb9gczt62WqR9WVpAT5eXbJhkKRk_gRUcQhzxw@mail.gmail.com>
Message-ID: <CANccLkzjC97K=U8Ahqng_dVL3efwjw7480vbu4P=yvrGdytWNw@mail.gmail.com>

Hi all,

This is my second time posting this, I accidentally sent the first email
without the proper subject header. Hopefully this won't create any noise
and a moderator can dismiss the first one.

I'm considering filing this as a bug report but wanted to make sure first
that I'm not doing something wrong.

A piece of software which I develop installs R as part of its dependencies.
This normally works perfectly fine. However we noticed a bug when
installing to external drives on a path that includes a space, RScript.exe
and R.exe will not work.

E:\Program Files (x86)\R-3-3-3\bin>Rscript.exe
'E:\Program' is not recognized as an internal or external command,
operable program or batch file.

As you can see I'm in the directory itself, and simply calling the
executable without entering a path.

Similarly, if I do enter the full path with quote marks, I get the same
issue.

E:\>"E:\Program Files (x86)\R-3-3-3\bin\Rscript.exe"
'E:\Program' is not recognized as an internal or external command,
operable program or batch file.

At this stage I'm thinking it's either an R bug or a Windows bug, but I can
run the following just fine.

E:\Program Files (x86)\HelloWorldProj\bin>HelloWorldProj.exe
Hello, world!

I've tested this with two variables.

 A - Using the R installer OR Simply copying the binaries
 B - Writing to E:\R-3-3-3 OR Writing to E:\Program Files (x86)\R-3-3-3

A does not affect the outcome in any way, however R only works when B uses
the path without spaces.

I searched elsewhere on the internet for the same and interestingly it was
another R install with this issue. I believe the commenters here were
erroneously attributing it to the user.

https://stackoverflow.com/questions/43510438/how-to-run-an-executable-that-contains-a-space-in-path-from-command-line-on-wind

Any thoughts? I'm open to a sensible workaround, and if it is a bug I'm
happy to raise it.

Thanks,
Marc

	[[alternative HTML version deleted]]


From tom@@@k@liber@ @ending from gm@il@com  Mon Oct 22 15:47:36 2018
From: tom@@@k@liber@ @ending from gm@il@com (Tomas Kalibera)
Date: Mon, 22 Oct 2018 15:47:36 +0200
Subject: [R] Cannot use R on Windows when installed to an external drive
 with a space in the path
In-Reply-To: <CANccLkzjC97K=U8Ahqng_dVL3efwjw7480vbu4P=yvrGdytWNw@mail.gmail.com>
References: <CANccLkyWSaKnrb9gczt62WqR9WVpAT5eXbJhkKRk_gRUcQhzxw@mail.gmail.com>
 <CANccLkzjC97K=U8Ahqng_dVL3efwjw7480vbu4P=yvrGdytWNw@mail.gmail.com>
Message-ID: <f09e6b9d-4073-6aac-1a16-35e821f672cf@gmail.com>

Dear Marc,

this is probably because short file names are disabled on that external 
drive. R needs short file names to be enabled on the drive where it is 
installed - please check/follow according to Microsoft documentation on 
turning on Short File Names (SFN, aka 8.3 names, 8dot3 names).

Best,
Tomas

On 10/22/2018 03:34 PM, Marc Capavanni via R-help wrote:
> Hi all,
>
> This is my second time posting this, I accidentally sent the first email
> without the proper subject header. Hopefully this won't create any noise
> and a moderator can dismiss the first one.
>
> I'm considering filing this as a bug report but wanted to make sure first
> that I'm not doing something wrong.
>
> A piece of software which I develop installs R as part of its dependencies.
> This normally works perfectly fine. However we noticed a bug when
> installing to external drives on a path that includes a space, RScript.exe
> and R.exe will not work.
>
> E:\Program Files (x86)\R-3-3-3\bin>Rscript.exe
> 'E:\Program' is not recognized as an internal or external command,
> operable program or batch file.
>
> As you can see I'm in the directory itself, and simply calling the
> executable without entering a path.
>
> Similarly, if I do enter the full path with quote marks, I get the same
> issue.
>
> E:\>"E:\Program Files (x86)\R-3-3-3\bin\Rscript.exe"
> 'E:\Program' is not recognized as an internal or external command,
> operable program or batch file.
>
> At this stage I'm thinking it's either an R bug or a Windows bug, but I can
> run the following just fine.
>
> E:\Program Files (x86)\HelloWorldProj\bin>HelloWorldProj.exe
> Hello, world!
>
> I've tested this with two variables.
>
>   A - Using the R installer OR Simply copying the binaries
>   B - Writing to E:\R-3-3-3 OR Writing to E:\Program Files (x86)\R-3-3-3
>
> A does not affect the outcome in any way, however R only works when B uses
> the path without spaces.
>
> I searched elsewhere on the internet for the same and interestingly it was
> another R install with this issue. I believe the commenters here were
> erroneously attributing it to the user.
>
> https://stackoverflow.com/questions/43510438/how-to-run-an-executable-that-contains-a-space-in-path-from-command-line-on-wind
>
> Any thoughts? I'm open to a sensible workaround, and if it is a bug I'm
> happy to raise it.
>
> Thanks,
> Marc
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From robertob@kker @ending from gm@il@com  Mon Oct 22 16:03:54 2018
From: robertob@kker @ending from gm@il@com (P. Roberto Bakker)
Date: Mon, 22 Oct 2018 16:03:54 +0200
Subject: [R] Different stack barplots - same color legends
Message-ID: <CAKDq9_N16xaeL4O2j=v2bVuMb=tuHfu0Ao+yuLQcEq6B-ngq1A@mail.gmail.com>

Hi,

I want to make barplots from different questions (columns) in one
data.frame.
Each question has the same 5 likert items.
Now the problem: in some questions all items are answered; in other less.
>From the syntax below I get nice stack barplots - *but the legend colors do
not* refer to the same likert-item, which I understand - the colors go in
sequence along the table.
Question: how can I write a syntax that each likert-item has the same
legend color?
Thank you in advance,

Roberto

SYNTAX:
counts19 <- table(teamq[,19])
counts20 <- table(teamq[,20])
barplot(as.matrix(counts19), horiz = T,
        col=c("yellow","sandybrown","orange", "darkolivegreen","green"),
legend=T)
barplot(as.matrix(counts20), horiz = T,
        col=c("yellow","sandybrown","orange", "darkolivegreen","green"),
legend=T)

	[[alternative HTML version deleted]]


From rhelp @ending from krueger-f@mily@de  Mon Oct 22 16:37:42 2018
From: rhelp @ending from krueger-f@mily@de (Knut Krueger)
Date: Mon, 22 Oct 2018 16:37:42 +0200
Subject: [R] match() question or needle haystack problem for a data.frame
Message-ID: <cac83a2c-2edd-e0e9-8b54-96afd48d401d@krueger-family.de>


Hi to all

I would like to reduce the "Mydata" to rows, only if Mydata$Data1 are in 
needles



needles =c(14390, 14391, 14392, 14427, 14428, 14429, 14430, 14431, 
14432, 14433, 14434, 14435, 14436, 14437, 14439, 14440, 14441, 15195, 
15196, 15197, 15198, 15199, 15200, 15201, 15202, 15203, 15204, 15205, 
15206, 15207, 15208, 15209, 17615, 17616, 17617, 17618, 17619, 17620, 
17621, 17622, 17623, 17624, 17625, 17626, 17627, 17628, 17629, 17630, 
17631, 17679, 17680, 17681, 17682, 17683, 17823, 17824, 17825, 17826, 
17827, 17828, 17829, 17830, 17831, 17862, 17863, 17864, 17865, 17866, 
17867, 17868, 17869, 17870, 17871, 17872, 17873, 17874, 17875, 17876, 
17877, 17878, 17879, 17880, 17881, 17882, 17883, 19255, 19256, 19257, 
19258, 21289, 21290, 21291, 21292, 22890, 22891, 22892, 22893, 22894, 
22895, 22896, 22897, 22898, 22899, 22900, 22901, 22902, 40428, 40429, 
40430, 40431, 40432, 40433, 40434, 40435, 40436, 40437)

Haystack =c(14390, 14391, 14392, 14427, 14428, 14429, 14430, 14431, 
14432, 14433, 14434, 14435, 14436, 14437, 14439, 14440, 14441, 15187, 
15188, 15195, 15196, 15197, 15198, 15199, 15200, 15201, 15202, 15203, 
15204, 15205, 15206, 15207, 15208, 15209, 16717, 16718, 17615, 17616, 
17617, 17618, 17619, 17620, 17621, 17622, 17623, 17624, 17625, 17626, 
17627, 17628, 17629, 17630, 17631, 17679, 17680, 17681, 17682, 17683, 
17817, 17818, 17823, 17824, 17825, 17826, 17827, 17828, 17829, 17830, 
17831, 17862, 17863, 17864, 17865, 17866, 17867, 17868, 17869, 17870, 
17871, 17872, 17873, 17874, 17875, 17876, 17877, 17878, 17879, 17880, 
17881, 17882, 17883, 17886, 19255, 19256, 19257, 19258, 21289, 21290, 
21291, 21292, 22890, 22891, 22892, 22893, 22894, 22895, 22896, 22897, 
22898, 22899, 22900, 22901, 22902, 40428, 40429, 40430, 40431, 40432, 
40433, 40434, 40435, 40436, 40437, 40710, 40711, 49127, 49128, 52768)

Mydata =data.frame (DATA1=Haystack, Data2=c(1:length(Haystack)))



match(Mydata$DATA1, needles, nomatch=NA) does find all data which are in 
needle - the others are set to the nomatch value.

But I don not find out how to reduce the data.frame  -  maybe match() is 
not helpful for that.

Kind regards Knut


From bgunter@4567 @ending from gm@il@com  Mon Oct 22 16:47:46 2018
From: bgunter@4567 @ending from gm@il@com (Bert Gunter)
Date: Mon, 22 Oct 2018 07:47:46 -0700
Subject: [R] 
 match() question or needle haystack problem for a data.frame
In-Reply-To: <cac83a2c-2edd-e0e9-8b54-96afd48d401d@krueger-family.de>
References: <cac83a2c-2edd-e0e9-8b54-96afd48d401d@krueger-family.de>
Message-ID: <CAGxFJbQrCaH6jLzMU60dx-U7m3oNT-zt1FhUOmcaOb-8njrp2w@mail.gmail.com>

Re-read ?match and note the examples for %in%

-- Bert
Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Oct 22, 2018 at 7:38 AM Knut Krueger <rhelp at krueger-family.de>
wrote:

>
> Hi to all
>
> I would like to reduce the "Mydata" to rows, only if Mydata$Data1 are in
> needles
>
>
>
> needles =c(14390, 14391, 14392, 14427, 14428, 14429, 14430, 14431,
> 14432, 14433, 14434, 14435, 14436, 14437, 14439, 14440, 14441, 15195,
> 15196, 15197, 15198, 15199, 15200, 15201, 15202, 15203, 15204, 15205,
> 15206, 15207, 15208, 15209, 17615, 17616, 17617, 17618, 17619, 17620,
> 17621, 17622, 17623, 17624, 17625, 17626, 17627, 17628, 17629, 17630,
> 17631, 17679, 17680, 17681, 17682, 17683, 17823, 17824, 17825, 17826,
> 17827, 17828, 17829, 17830, 17831, 17862, 17863, 17864, 17865, 17866,
> 17867, 17868, 17869, 17870, 17871, 17872, 17873, 17874, 17875, 17876,
> 17877, 17878, 17879, 17880, 17881, 17882, 17883, 19255, 19256, 19257,
> 19258, 21289, 21290, 21291, 21292, 22890, 22891, 22892, 22893, 22894,
> 22895, 22896, 22897, 22898, 22899, 22900, 22901, 22902, 40428, 40429,
> 40430, 40431, 40432, 40433, 40434, 40435, 40436, 40437)
>
> Haystack =c(14390, 14391, 14392, 14427, 14428, 14429, 14430, 14431,
> 14432, 14433, 14434, 14435, 14436, 14437, 14439, 14440, 14441, 15187,
> 15188, 15195, 15196, 15197, 15198, 15199, 15200, 15201, 15202, 15203,
> 15204, 15205, 15206, 15207, 15208, 15209, 16717, 16718, 17615, 17616,
> 17617, 17618, 17619, 17620, 17621, 17622, 17623, 17624, 17625, 17626,
> 17627, 17628, 17629, 17630, 17631, 17679, 17680, 17681, 17682, 17683,
> 17817, 17818, 17823, 17824, 17825, 17826, 17827, 17828, 17829, 17830,
> 17831, 17862, 17863, 17864, 17865, 17866, 17867, 17868, 17869, 17870,
> 17871, 17872, 17873, 17874, 17875, 17876, 17877, 17878, 17879, 17880,
> 17881, 17882, 17883, 17886, 19255, 19256, 19257, 19258, 21289, 21290,
> 21291, 21292, 22890, 22891, 22892, 22893, 22894, 22895, 22896, 22897,
> 22898, 22899, 22900, 22901, 22902, 40428, 40429, 40430, 40431, 40432,
> 40433, 40434, 40435, 40436, 40437, 40710, 40711, 49127, 49128, 52768)
>
> Mydata =data.frame (DATA1=Haystack, Data2=c(1:length(Haystack)))
>
>
>
> match(Mydata$DATA1, needles, nomatch=NA) does find all data which are in
> needle - the others are set to the nomatch value.
>
> But I don not find out how to reduce the data.frame  -  maybe match() is
> not helpful for that.
>
> Kind regards Knut
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From m@rc@c@p@v@nni @ending from googlem@il@com  Mon Oct 22 16:57:34 2018
From: m@rc@c@p@v@nni @ending from googlem@il@com (Marc Capavanni)
Date: Mon, 22 Oct 2018 15:57:34 +0100
Subject: [R] Cannot use R on Windows when installed to an external drive
 with a space in the path
In-Reply-To: <243008a7-a47d-7d5e-b003-7ef32202374c@gmail.com>
References: <CANccLkyWSaKnrb9gczt62WqR9WVpAT5eXbJhkKRk_gRUcQhzxw@mail.gmail.com>
 <CANccLkzjC97K=U8Ahqng_dVL3efwjw7480vbu4P=yvrGdytWNw@mail.gmail.com>
 <f09e6b9d-4073-6aac-1a16-35e821f672cf@gmail.com>
 <CANccLkxVNQJYt2rcbz4re3fUw8ET7NTbcvz6rxPjTgomaEQH5g@mail.gmail.com>
 <243008a7-a47d-7d5e-b003-7ef32202374c@gmail.com>
Message-ID: <CANccLkwE4UsTKcF5G-9EWZmeabiBYf2wp31M_WhsBF-aaJbREQ@mail.gmail.com>

Hi Tomas,

You're likely right, I didn't restart, unplug/replug the hard drive, or
even close CMD, so I can give that a go. Thanks for your insight.

In any case I think I'll go with the solution of using 3.5.1 as it seems to
solve the issue, and would mean I wouldn't have to modify hard drive or
registry settings on my user's PCs.

Many thanks,
Marc

P.S. I accidentally didn't include the r-help address, I'll bring it back
in in case others might find this useful.

On Mon, 22 Oct 2018 at 15:47, Tomas Kalibera <tomas.kalibera at gmail.com>
wrote:

> Hi Marc,
>
> this seems to me that the directory where R is installed still does not
> have a short name. I don't remember the details, but maybe you have to
> reboot or something for them to be generated, windows docs should say. It
> would be good to ensure that the short name exists, e.g. using "dir /x" or
> just from inside R, checking R home. R internally uses the short name when
> possible, because it is not completely robust against space in file name.
>
> I've fixed some most obvious places in R recently (already in R 3.5), but
> maybe not all and certainly packages may break with spaces in R home
> directory name and some will definitely break. So it is unsafe to use R
> without SFN, even though it may start and many packages may work fine in
> 3.5.
>
> Best
> Tomas
>
>
> On 10/22/2018 04:40 PM, Marc Capavanni wrote:
>
> Hi Tomas,
>
> Thanks for your input. I tried to enabled those settings but the issue
> persists.
>
>     E:\Program Files (x86)\R-3.3.3\bin>fsutil 8dot3name query E:
>     The volume state is: 0 (8dot3 name creation is enabled).
>     The registry state is: 2 (Per volume setting - the default).
>
>     Based on the above settings, 8dot3 name creation is enabled on E:
>
>     E:\Program Files (x86)\R-3.3.3\bin>Rscript.exe
>     'E:\Program' is not recognized as an internal or external command,
>     operable program or batch file.
>
> However I did try the latest version of R (3.5.1 as of writing) and it
> works following the same steps in which 3.3.3 does not. I've verified this
> on a few machines and different external devices, so it seems like this has
> been remedied in the past few months.
>
> Thanks,
> Marc
>
> On Mon, 22 Oct 2018 at 14:47, Tomas Kalibera <tomas.kalibera at gmail.com>
> wrote:
>
>> Dear Marc,
>>
>> this is probably because short file names are disabled on that external
>> drive. R needs short file names to be enabled on the drive where it is
>> installed - please check/follow according to Microsoft documentation on
>> turning on Short File Names (SFN, aka 8.3 names, 8dot3 names).
>>
>> Best,
>> Tomas
>>
>> On 10/22/2018 03:34 PM, Marc Capavanni via R-help wrote:
>> > Hi all,
>> >
>> > This is my second time posting this, I accidentally sent the first email
>> > without the proper subject header. Hopefully this won't create any noise
>> > and a moderator can dismiss the first one.
>> >
>> > I'm considering filing this as a bug report but wanted to make sure
>> first
>> > that I'm not doing something wrong.
>> >
>> > A piece of software which I develop installs R as part of its
>> dependencies.
>> > This normally works perfectly fine. However we noticed a bug when
>> > installing to external drives on a path that includes a space,
>> RScript.exe
>> > and R.exe will not work.
>> >
>> > E:\Program Files (x86)\R-3-3-3\bin>Rscript.exe
>> > 'E:\Program' is not recognized as an internal or external command,
>> > operable program or batch file.
>> >
>> > As you can see I'm in the directory itself, and simply calling the
>> > executable without entering a path.
>> >
>> > Similarly, if I do enter the full path with quote marks, I get the same
>> > issue.
>> >
>> > E:\>"E:\Program Files (x86)\R-3-3-3\bin\Rscript.exe"
>> > 'E:\Program' is not recognized as an internal or external command,
>> > operable program or batch file.
>> >
>> > At this stage I'm thinking it's either an R bug or a Windows bug, but I
>> can
>> > run the following just fine.
>> >
>> > E:\Program Files (x86)\HelloWorldProj\bin>HelloWorldProj.exe
>> > Hello, world!
>> >
>> > I've tested this with two variables.
>> >
>> >   A - Using the R installer OR Simply copying the binaries
>> >   B - Writing to E:\R-3-3-3 OR Writing to E:\Program Files (x86)\R-3-3-3
>> >
>> > A does not affect the outcome in any way, however R only works when B
>> uses
>> > the path without spaces.
>> >
>> > I searched elsewhere on the internet for the same and interestingly it
>> was
>> > another R install with this issue. I believe the commenters here were
>> > erroneously attributing it to the user.
>> >
>> >
>> https://stackoverflow.com/questions/43510438/how-to-run-an-executable-that-contains-a-space-in-path-from-command-line-on-wind
>> >
>> > Any thoughts? I'm open to a sensible workaround, and if it is a bug I'm
>> > happy to raise it.
>> >
>> > Thanks,
>> > Marc
>> >
>> >       [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>>
>>
>>
>

	[[alternative HTML version deleted]]


From ericjberger @ending from gm@il@com  Mon Oct 22 17:01:17 2018
From: ericjberger @ending from gm@il@com (Eric Berger)
Date: Mon, 22 Oct 2018 18:01:17 +0300
Subject: [R] 
 match() question or needle haystack problem for a data.frame
In-Reply-To: <CAGxFJbQrCaH6jLzMU60dx-U7m3oNT-zt1FhUOmcaOb-8njrp2w@mail.gmail.com>
References: <cac83a2c-2edd-e0e9-8b54-96afd48d401d@krueger-family.de>
 <CAGxFJbQrCaH6jLzMU60dx-U7m3oNT-zt1FhUOmcaOb-8njrp2w@mail.gmail.com>
Message-ID: <CAGgJW74Tebw5CNDGVSf32bF7cMwkM3z=qi++8-SUPFYOHynYGQ@mail.gmail.com>

Hi Knut,
You are almost done.

> v <- match(Mydata$DATA1, needles, nomatch=NA)
> found <- Mydata[ !is.na(v), ]
> missing <- Mdata[ is.na(v), ]

HTH,
Eric


On Mon, Oct 22, 2018 at 5:51 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> Re-read ?match and note the examples for %in%
>
> -- Bert
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Mon, Oct 22, 2018 at 7:38 AM Knut Krueger <rhelp at krueger-family.de>
> wrote:
>
> >
> > Hi to all
> >
> > I would like to reduce the "Mydata" to rows, only if Mydata$Data1 are in
> > needles
> >
> >
> >
> > needles =c(14390, 14391, 14392, 14427, 14428, 14429, 14430, 14431,
> > 14432, 14433, 14434, 14435, 14436, 14437, 14439, 14440, 14441, 15195,
> > 15196, 15197, 15198, 15199, 15200, 15201, 15202, 15203, 15204, 15205,
> > 15206, 15207, 15208, 15209, 17615, 17616, 17617, 17618, 17619, 17620,
> > 17621, 17622, 17623, 17624, 17625, 17626, 17627, 17628, 17629, 17630,
> > 17631, 17679, 17680, 17681, 17682, 17683, 17823, 17824, 17825, 17826,
> > 17827, 17828, 17829, 17830, 17831, 17862, 17863, 17864, 17865, 17866,
> > 17867, 17868, 17869, 17870, 17871, 17872, 17873, 17874, 17875, 17876,
> > 17877, 17878, 17879, 17880, 17881, 17882, 17883, 19255, 19256, 19257,
> > 19258, 21289, 21290, 21291, 21292, 22890, 22891, 22892, 22893, 22894,
> > 22895, 22896, 22897, 22898, 22899, 22900, 22901, 22902, 40428, 40429,
> > 40430, 40431, 40432, 40433, 40434, 40435, 40436, 40437)
> >
> > Haystack =c(14390, 14391, 14392, 14427, 14428, 14429, 14430, 14431,
> > 14432, 14433, 14434, 14435, 14436, 14437, 14439, 14440, 14441, 15187,
> > 15188, 15195, 15196, 15197, 15198, 15199, 15200, 15201, 15202, 15203,
> > 15204, 15205, 15206, 15207, 15208, 15209, 16717, 16718, 17615, 17616,
> > 17617, 17618, 17619, 17620, 17621, 17622, 17623, 17624, 17625, 17626,
> > 17627, 17628, 17629, 17630, 17631, 17679, 17680, 17681, 17682, 17683,
> > 17817, 17818, 17823, 17824, 17825, 17826, 17827, 17828, 17829, 17830,
> > 17831, 17862, 17863, 17864, 17865, 17866, 17867, 17868, 17869, 17870,
> > 17871, 17872, 17873, 17874, 17875, 17876, 17877, 17878, 17879, 17880,
> > 17881, 17882, 17883, 17886, 19255, 19256, 19257, 19258, 21289, 21290,
> > 21291, 21292, 22890, 22891, 22892, 22893, 22894, 22895, 22896, 22897,
> > 22898, 22899, 22900, 22901, 22902, 40428, 40429, 40430, 40431, 40432,
> > 40433, 40434, 40435, 40436, 40437, 40710, 40711, 49127, 49128, 52768)
> >
> > Mydata =data.frame (DATA1=Haystack, Data2=c(1:length(Haystack)))
> >
> >
> >
> > match(Mydata$DATA1, needles, nomatch=NA) does find all data which are in
> > needle - the others are set to the nomatch value.
> >
> > But I don not find out how to reduce the data.frame  -  maybe match() is
> > not helpful for that.
> >
> > Kind regards Knut
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From dc@rl@on @ending from t@mu@edu  Mon Oct 22 17:13:40 2018
From: dc@rl@on @ending from t@mu@edu (David L Carlson)
Date: Mon, 22 Oct 2018 15:13:40 +0000
Subject: [R] Different stack barplots - same color legends
In-Reply-To: <CAKDq9_N16xaeL4O2j=v2bVuMb=tuHfu0Ao+yuLQcEq6B-ngq1A@mail.gmail.com>
References: <CAKDq9_N16xaeL4O2j=v2bVuMb=tuHfu0Ao+yuLQcEq6B-ngq1A@mail.gmail.com>
Message-ID: <af9001d319ac4992b0bfc5526150f03b@tamu.edu>

Your example is not reproducible since you did not give us some sample data. I suspect that your data frame consists of columns that represent questions and rows that represent individuals who answered the questions. First create a simple example:

set.seed(42)
teamq <- data.frame(V1=sample(c(1, 2, 4, 5), 25, replace = TRUE),
     V2=sample(c(1, 2, 3, 4, 5), 25, replace=TRUE), 
     V3=sample(c(2, 3, 4, 5), 25, replace=TRUE))

Notice that this data frame ONLY contains questions (and only 3 questions). Here are 2 ways to get what you want. The first one stacks the data:

teamq.stack <- stack(teamq)
str(teamq.stack)
counts <- table(teamq.stack)
str(counts)

The second one converts each column to a factor with levels 1 - 5:

teamq2 <- data.frame(lapply(teamq, factor, levels=1:5))
str(teamq2)
counts <- sapply(teamq2, table)
str(counts)

Now make the plots:

cols <- c("yellow","sandybrown","orange", "darkolivegreen","green")
barplot(counts[, 1], horiz=TRUE, col=cols, legend=TRUE)
barplot(counts[, 2], horiz=TRUE, col=cols, legend=TRUE)
barplot(counts[, 3], horiz=TRUE, col=cols, legend=TRUE)

You will need to adjust the xlim= argument so that the legend does not print on top of the bars.

----------------------------------------
David L Carlson
Department of Anthropology
Texas A&M University
College Station, TX 77843-4352


-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of P. Roberto Bakker
Sent: Monday, October 22, 2018 9:04 AM
To: R mailing list <r-help at r-project.org>
Subject: [R] Different stack barplots - same color legends

Hi,

I want to make barplots from different questions (columns) in one
data.frame.
Each question has the same 5 likert items.
Now the problem: in some questions all items are answered; in other less.
>From the syntax below I get nice stack barplots - *but the legend colors do
not* refer to the same likert-item, which I understand - the colors go in
sequence along the table.
Question: how can I write a syntax that each likert-item has the same
legend color?
Thank you in advance,

Roberto

SYNTAX:
counts19 <- table(teamq[,19])
counts20 <- table(teamq[,20])
barplot(as.matrix(counts19), horiz = T,
        col=c("yellow","sandybrown","orange", "darkolivegreen","green"),
legend=T)
barplot(as.matrix(counts20), horiz = T,
        col=c("yellow","sandybrown","orange", "darkolivegreen","green"),
legend=T)

	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From rhelp @ending from krueger-f@mily@de  Mon Oct 22 17:18:35 2018
From: rhelp @ending from krueger-f@mily@de (Knut Krueger)
Date: Mon, 22 Oct 2018 17:18:35 +0200
Subject: [R] 
 match() question or needle haystack problem for a data.frame
In-Reply-To: <CAGgJW74Tebw5CNDGVSf32bF7cMwkM3z=qi++8-SUPFYOHynYGQ@mail.gmail.com>
References: <cac83a2c-2edd-e0e9-8b54-96afd48d401d@krueger-family.de>
 <CAGxFJbQrCaH6jLzMU60dx-U7m3oNT-zt1FhUOmcaOb-8njrp2w@mail.gmail.com>
 <CAGgJW74Tebw5CNDGVSf32bF7cMwkM3z=qi++8-SUPFYOHynYGQ@mail.gmail.com>
Message-ID: <6ebcd80a-1786-34bb-d852-d05bfa24c9bc@krueger-family.de>

Am 22.10.18 um 17:01 schrieb Eric Berger:
> v <- match(Mydata$DATA1, needles, nomatch=NA)
>  > found <- Mydata[ !is.na <http://is.na>(v), ]
>  > missing <- Mdata[ is.na <http://is.na>(v), ]

Thank you it is working, additionally as Bert suggested, it seems that

Mydata[Mydata$DATA1 %in% needles,]

is doing the same.

Kind Regards Knut


From bgunter@4567 @ending from gm@il@com  Mon Oct 22 18:02:35 2018
From: bgunter@4567 @ending from gm@il@com (Bert Gunter)
Date: Mon, 22 Oct 2018 09:02:35 -0700
Subject: [R] 
 match() question or needle haystack problem for a data.frame
In-Reply-To: <6ebcd80a-1786-34bb-d852-d05bfa24c9bc@krueger-family.de>
References: <cac83a2c-2edd-e0e9-8b54-96afd48d401d@krueger-family.de>
 <CAGxFJbQrCaH6jLzMU60dx-U7m3oNT-zt1FhUOmcaOb-8njrp2w@mail.gmail.com>
 <CAGgJW74Tebw5CNDGVSf32bF7cMwkM3z=qi++8-SUPFYOHynYGQ@mail.gmail.com>
 <6ebcd80a-1786-34bb-d852-d05bfa24c9bc@krueger-family.de>
Message-ID: <CAGxFJbS7vgQQK8t-X_z==on+jzYtDMmroCv3hPM6HWyU0Uq7Jw@mail.gmail.com>

I suggest you spend a bit of time with an R tutorial or two and, in
particular learn about "logical indexing," as this basic R construct seems
to be mysterious to you.

Cheers,
Bert




On Mon, Oct 22, 2018 at 8:22 AM Knut Krueger <rhelp at krueger-family.de>
wrote:

> Am 22.10.18 um 17:01 schrieb Eric Berger:
> > v <- match(Mydata$DATA1, needles, nomatch=NA)
> >  > found <- Mydata[ !is.na <http://is.na>(v), ]
> >  > missing <- Mdata[ is.na <http://is.na>(v), ]
>
> Thank you it is working, additionally as Bert suggested, it seems that
>
> Mydata[Mydata$DATA1 %in% needles,]
>
> is doing the same.
>
> Kind Regards Knut
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From j@m@xuel @ending from gm@il@com  Mon Oct 22 14:27:09 2018
From: j@m@xuel @ending from gm@il@com (Joel Maxuel)
Date: Mon, 22 Oct 2018 09:27:09 -0300
Subject: [R] Transformations in Tidyverse (renaming and ordering columns)
Message-ID: <CA+O61snvxz8-Ph5RWuSbzaS47aTf__+XFb=bOT2YviHt8isASg@mail.gmail.com>

Hello all,

I am slowly picking away at a factsheet that will include several result
sets from a single tibble (there is a column identifying the section title)
and would like to have that value in the top left corner of each resulting
table.  When using the `spread` function, I see that any remaining columns
not identified by `key` nor `value` will be placed to the far left.

Like the example below, I would like the column label Fiscal be renamed to
the data value "A", so the top-left of the result is "A".  However, if I
try to progmatically set the column name, I run into issues:


library(knitr)
library(tidyverse)
library(tibble)
library(dplyr)
library(magrittr)

testset <- as_tibble(tribble(~Section, ~Observation, ~Order, ~Fiscal,
~Value,
                             "A", "One", 1, "2016-17", 419,
                             "A", "One", 1, "2017-18", 499,
                             "A", "One", 1, "2018-19", 463,
                             "A", "Two", 2, "2016-17", 391,
                             "A", "Two", 2, "2017-18", 445,
                             "A", "Two", 2, "2018-19", 423,
                             "A", "Three", 3, "2016-17", 348,
                             "A", "Three", 3, "2017-18", 353,
                             "A", "Three", 3, "2018-19", 357))
sectionA <- as_tibble(filter(testset, Section == "A")) # Mind you for this
example, does very little
spread(select(sectionA, Observation, "A" = Fiscal, Value), key=Observation,
value=Value) # Works, with reservations
spread(select(sectionA, Observation, slice(sectionA,1) %>%
magrittr::extract2("Section") = Fiscal, Value), key=Observation,
value=Value) # Produces error:
# Error: unexpected '=' in "spread(select(sectionA, Observation,
slice(sectionA,1) %>% magrittr::extract2("Section") ="


I presume my premise is very wrong.

Also, I am curious how to sort columns (and rows) with extra columns
(/rows) not meant for display.  In this case, the columns One, Two, and
Three (in real life won't be linguistic representations of numbers), are
out of order - however I do have the Order column to fix that (if I knew
how to include it for sorting purposes, without displaying it).  A few
hints here would help.  (Perhaps there is column/row hiding in kableExtra -
which I will be using later on?)

--
Cheers,
Joel Maxuel

	[[alternative HTML version deleted]]


From krylov@r00t @ending from gm@il@com  Mon Oct 22 19:15:30 2018
From: krylov@r00t @ending from gm@il@com (Ivan Krylov)
Date: Mon, 22 Oct 2018 20:15:30 +0300
Subject: [R] Cannot use R on Windows when installed to an external drive
 with a space in the path
In-Reply-To: <CANccLkyWSaKnrb9gczt62WqR9WVpAT5eXbJhkKRk_gRUcQhzxw@mail.gmail.com>
References: <CANccLkyWSaKnrb9gczt62WqR9WVpAT5eXbJhkKRk_gRUcQhzxw@mail.gmail.com>
Message-ID: <20181022201530.47d185b8@Tarkus>

This is a bin\R.exe + bin\Rscript.exe bug.

On Windows, where the system call to create a process only takes one
command line string instead of an array of command line parameters[0]
(and the C runtimes usually call CommandLineToArgvW[1] behind the
scenes to get an array back), execv() does nothing to prepare a
properly-quoted command line and just concatenates its arguments[2].
Moreover, Windows version of execv() is effectively undocumented[3],
nor there is any information about the suggested replacement[4].
(You can call it a Windows bug instead.)

Short file names are not a guaranteed solution, because they may
not be available at all on some filesystems[5] (which is how this
error has been encountered). In the general case, "argument quoting
hell"[6] is unavoidable on Windows, but the code from [2] implements
the proper conversion from an array of strings to a single quoted
command line, ready to be parsed by the launched process.

char* getRHOME(int m) in src/gnuwin32/rhome.c tries to return a short
path (assuming it won't contain spaces). This is used by rcmdfn() from
src/gnuwin32/front-ends/rcmdfn.c to system() a command line built with
no quoting, causing the error. rcmdfn() is called from
src/gnuwin32/front-ends/R.c, which seems to contain the entry point for
R\R-3.3.3\bin\R.exe.

Fortunately, in src/unix/Rscript.c the whole mess seems to be avoided by
having it directly include rterm.c and then call AppMain() on Windows,
passing the command line parameter array. Same goes for
src/gnuwin32/front-ends/graphappmain.c. The corresponding executables
reside in the architecture-specific subdirectory of ...\bin\.

So if you run Rgui.exe, Rterm.exe or Rscript.exe from
R-3.3.3\bin\i386 instead of R-3.3.3\bin, no extra cmd.exe processes
should be spawned and the badly-formed system() should be avoided.

-- 
Best regards,
Ivan

[0]
https://docs.microsoft.com/en-us/windows/desktop/api/processthreadsapi/nf-processthreadsapi-createprocessa

That's probably for historical reasons, because Win32 API wanted to
stay mostly source-compatible with Win16 API, and Win16 API may have
evolved from DOS system calls, where the command line was, indeed, a
single string pointer.

[1]
https://docs.microsoft.com/en-us/windows/desktop/api/shellapi/nf-shellapi-commandlinetoargvw

[2]
https://blogs.msdn.microsoft.com/twistylittlepassagesallalike/2011/04/23/everyone-quotes-command-line-arguments-the-wrong-way/

[3]
https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2012/ms235416(v=vs.110)

[4]
https://docs.microsoft.com/en-us/cpp/c-runtime-library/exec-wexec-functions?view=vs-2017

[5] https://blogs.msdn.microsoft.com/oldnewthing/20181004-00/?p=99895

[6] quoted from Rscript.c


From dc@rl@on @ending from t@mu@edu  Mon Oct 22 19:19:37 2018
From: dc@rl@on @ending from t@mu@edu (David L Carlson)
Date: Mon, 22 Oct 2018 17:19:37 +0000
Subject: [R] Polygon
In-Reply-To: <c9c5e4e7-ba81-c239-7cc8-1494e3bc9be4@ntu.edu.tw>
References: <fcc9c821-50bf-7c7a-4e8f-e4859f7deb78@ntu.edu.tw>
 <0d7bc6e1-2d8e-f3f9-d685-2c1e5a001a20@sapo.pt>
 <9ac5812e-5539-9d6a-6396-a2ec225f257b@ntu.edu.tw>
 <EFF7563D-00B0-4DB8-BC1B-5B0A7FBBE113@comcast.net>
 <1f52a554-7c22-1127-471b-217da7f473a2@ntu.edu.tw>
 <37254746-470b-6d9c-dd6c-73cdd58c58c2@ntu.edu.tw>
 <7c430404eb934af893b6e930257dd9f1@tamu.edu>
 <1f26f7c9-34a5-628d-e30f-a9eca5202407@ntu.edu.tw>
 <a52c389bd60b4bb3b7238147e1679c4a@tamu.edu>
 <c9c5e4e7-ba81-c239-7cc8-1494e3bc9be4@ntu.edu.tw>
Message-ID: <444e0737c46644a4834faaffa37eda41@tamu.edu>

Putting it all together:

z1<- -1
z2<-  2
oldp <- par(mgp=c(3, .5, 0))
curve(dnorm(x,0,1), xlim=c(-5, 5),main="Standard Normal",
    xaxt="n", frame=F, xlab="")
jj<-seq(z1,z2,0.01)
cord.x<- jj
cord.y<- dnorm(jj)
polygon(c(-1, cord.x, 2), c(0, cord.y, 0), col="skyblue")
axis(1,at=c(-5,z1,0,z2,5),lab=c(-5,z1,0,z2,5))
abline(v=c(z1,z2))
axis(1, at=c(-5, z1, 0, z2, 5), lab=(c(-5,z1,0,z2,5) + 5)*2, line=2)
segments(.5, .1, 3, .2, lwd=2)
lbl <- paste0("Area = ", round(pnorm(2) - pnorm(-1), 4))
text(3, .2, lbl, pos=4, offset=.25)
par(oldp)


----------------------------------------
David L Carlson
Department of Anthropology
Texas A&M University
College Station, TX 77843-4352





From: Steven Yen <styen at ntu.edu.tw> 
Sent: Monday, October 22, 2018 11:53 AM
To: David L Carlson <dcarlson at tamu.edu>
Subject: Re: [R] Polygon

Thanks David. I do know what to do with pnorm.
By call-out I was hoping to get indication/annotation of probability like the attached.
Maybe I am asking too much of the data, as I suspect R is not meant to do that.
I appreciate your help. I am just trying to make these graphs for stat teaching without graphic software like correl draw.
On 10/22/2018 9:34 PM, David L Carlson wrote:
Yes, par(oldp) resets the parameter to its original value.

The simplest way to get the area in this case would be to use pnorm():

pnorm(2) - pnorm(-1)
[1] 0.8185946

If you have an arbitrary polygon, you can use polyarea() in the pracma package:

library(pracma)
polyarea(rev(c(-1, cord.x, 2)), rev(c(0, cord.y, 0)))
[1] 0.8185917

The second differs slightly from the first because it is an approximation based on 101 points (the default for the curve() function). The polyarea() function wants the polygon to be defined counter-clockwise so we use rev() to reverse the coordinates. Without this you will get a negative area, but you can always use abs() to fix that:

polyarea(c(-1, cord.x, 2), c(0, cord.y, 0))
[1] -0.8185917
abs(polyarea(c(-1, cord.x, 2), c(0, cord.y, 0)))
[1] 0.8185917

One more point. Don?t use abbreviations for TRUE and FALSE (e.g. frame=F). FALSE cannot be redefined, but F can be. If you used a variable called F in earlier code, it could change the behavior of curve():

curve(dnorm(x,0,1), xlim=c(-5, 5), frame=F)
FALSE <- 1
Error in FALSE <- 1 : invalid (do_set) left-hand side to assignment
F <- 1
curve(dnorm(x,0,1), xlim=c(-5, 5), frame=F)

----------------------------------------
David L Carlson
Department of Anthropology
Texas A&M University
College Station, TX 77843-4352



From: Steven Yen mailto:styen at ntu.edu.tw 
Sent: Sunday, October 21, 2018 9:54 PM
To: David L Carlson mailto:dcarlson at tamu.edu
Subject: Re: [R] Polygon

Thank you David. This is great!!
I can follow all you do, except one. What does the last statement do: par(oldp). I would think that it reset the parameters, needed only if there is a next job.

I am a little embarrassed to push this further, but let me see if I can bounce another thing out of this.

Is it possible to have a "call-out", somehow indicating that the probability associated witht he shaded area is, say, 0.45. Is this possible? Am I asking too much of R? Fine if not. Thanks again!!!
On 10/22/2018 4:24 AM, David L Carlson wrote:
I think this does what you want.

z1<- -1
z2<-  2
oldp <- par(mgp=c(3, .5, 0))
curve(dnorm(x,0,1), xlim=c(-5, 5),main="Standard Normal",
    xaxt="n", frame=F, xlab="")
jj<-seq(z1,z2,0.01)
cord.x<- jj
cord.y<- dnorm(jj)
polygon(c(-1, cord.x, 2), c(0, cord.y, 0), col="skyblue")
axis(1,at=c(-5,z1,0,z2,5),lab=c(-5,z1,0,z2,5))
abline(v=c(z1,z2))
axis(1, at=c(-5, z1, 0, z2, 5), lab=(c(-5,z1,0,z2,5) + 5)*2, line=2)
par(oldp)

When you assign a vector to an object, you do not need to use c(), e.g. cord.x <- jj. I expanded xlim= since you were labeling the axis at -5, and 5, but only drawing the plot from -4 to 4.

To get the polygon to work, you need to add points to the baseline at at either end.

The line= argument in axis() lets you put an axis line into the margin of the plot. I used the mgp= argument in par() to close the space between the tickmarks and their values.
--------------------------------------
David L. Carlson
Department of Anthropology
Texas A&M University

-----Original Message-----
From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Steven Yen
Sent: Sunday, October 21, 2018 1:47 PM
To: David Winsemius mailto:dwinsemius at comcast.net
Cc: mailto:r-help at r-project.org
Subject: Re: [R] Polygon

David, Rui, and All:
Greetings.
1. I need a helping hand with the polygon statement below so that I can 
have the area under the curve highlighted, between (z1,z2).
2. Is it possible to label the X-axis with in two scale, in the current 
z-scale and another, say x = (z+5)*2?
Thank you.

z1<- -1
z2<-? 2
curve(dnorm(x,0,1),xlim=c(-4,4),main="Standard 
Normal",xaxt="n",frame=F,xlab="z")
jj<-seq(z1,z2,0.01)
cord.x<-c(jj)
cord.y<-c(dnorm(jj))
#polygon(cord.x,cord.y,col="skyblue")
axis(1,at=c(-5,z1,0,z2,5),lab=c(-5,z1,0,z2,5))
abline(v=c(z1,z2))





-- 
mailto:styen at ntu.edu.tw (S.T. Yen)

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Plot.png
Type: image/png
Size: 8028 bytes
Desc: Plot.png
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20181022/89fd1580/attachment.png>

From robertob@kker @ending from gm@il@com  Mon Oct 22 19:30:24 2018
From: robertob@kker @ending from gm@il@com (P. Roberto Bakker)
Date: Mon, 22 Oct 2018 19:30:24 +0200
Subject: [R] Different stack barplots - same color legends
In-Reply-To: <af9001d319ac4992b0bfc5526150f03b@tamu.edu>
References: <CAKDq9_N16xaeL4O2j=v2bVuMb=tuHfu0Ao+yuLQcEq6B-ngq1A@mail.gmail.com>
 <af9001d319ac4992b0bfc5526150f03b@tamu.edu>
Message-ID: <CAKDq9_P8hQEHWFH=c_86bG81fU0GS+EUCOmtZ9gJa_7kY-2uhA@mail.gmail.com>

Dear David,

Thank you for you quite response.
My apologies for not giving some sample data - this is due to AVG.
*But this minisample should not be a problem (all in Dutch)*:
 teamq
# A tibble: 4 x 2
  `Ik volg bijscholing om mijn opleiders-kwaliteiten op peil te houden`

  <chr>

1 de situatie in hoge mate van toepassing is voor u of uw
supervisorengroep
2 de situatie in zeer hoge mate van toepassing is voor u of uw
supervisorengroep
3 de situatie in zeer hoge mate van toepassing is voor u of uw
supervisorengroep
4 de situatie in geringe mate van toepassing is voor u of uw
supervisorengroep
  `Ik weet precies wat de ?modernisering van de opleiding? inhoudt`

  <chr>

1 de situatie in hoge mate van toepassing is voor u of uw
supervisorengroep
2 de situatie in zeer hoge mate van toepassing is voor u of uw
supervisorengroep
3 de situatie in zeer hoge mate van toepassing is voor u of uw
supervisorengroep
4 de situatie in geringe mate van toepassing is voor u of uw
supervisorengroep

As you see the likert items are in words, and I should change them in
nummeric - Am I correct?

*To do this, I tried (see further below):*
plyr rename() ; I receive the message it should be a factor or character
dplyr recode() ; same message
mapvalues() ; it should be atomic, so I used as.atomic(teamq) but then I
receive the nummers a strings.

*The syntaxes*
require(plyr)
example2 <- revalue(teamq,
                    c("de situatie in zeer geringe mate van toepassing is
voor u of uw supervisorengroep"= "1",
                        "de situatie in geringe mate van toepassing is voor
u of uw supervisorengroep"= "2",
                        "de situatie enigszins van toepassing is voor u of
uw supervisorengroep"= "3",
                        "de situatie in hoge mate van toepassing is voor u
of uw supervisorengroep"= "4",
                        "de situatie in zeer hoge mate van toepassing is
voor u of uw supervisorengroep"= "5"))

require(dplyr)
example2 <- recode(teamq,
                    c("de situatie in zeer geringe mate van toepassing is
voor u of uw supervisorengroep"= "1",
                      "de situatie in geringe mate van toepassing is voor u
of uw supervisorengroep"= "2",
                      "de situatie enigszins van toepassing is voor u of uw
supervisorengroep"= "3",
                      "de situatie in hoge mate van toepassing is voor u of
uw supervisorengroep"= "4",
                      "de situatie in zeer hoge mate van toepassing is voor
u of uw supervisorengroep"= "5"))

mapvalues(as.matrix(teamq), from = c("de situatie in zeer geringe mate van
toepassing is voor u of uw supervisorengroep",
                        "de situatie in geringe mate van toepassing is voor
u of uw supervisorengroep",
                        "de situatie enigszins van toepassing is voor u of
uw supervisorengroep",
                        "de situatie in hoge mate van toepassing is voor u
of uw supervisorengroep",
                        "de situatie in zeer hoge mate van toepassing is
voor u of uw supervisorengroep"),
          to = c(1,2,3,4,5))

What should I do?
Thank you in advance, Roberto

Op ma 22 okt. 2018 om 17:13 schreef David L Carlson <dcarlson at tamu.edu>:

> Your example is not reproducible since you did not give us some sample
> data. I suspect that your data frame consists of columns that represent
> questions and rows that represent individuals who answered the questions.
> First create a simple example:
>
> set.seed(42)
> teamq <- data.frame(V1=sample(c(1, 2, 4, 5), 25, replace = TRUE),
>      V2=sample(c(1, 2, 3, 4, 5), 25, replace=TRUE),
>      V3=sample(c(2, 3, 4, 5), 25, replace=TRUE))
>
> Notice that this data frame ONLY contains questions (and only 3
> questions). Here are 2 ways to get what you want. The first one stacks the
> data:
>
> teamq.stack <- stack(teamq)
> str(teamq.stack)
> counts <- table(teamq.stack)
> str(counts)
>
> The second one converts each column to a factor with levels 1 - 5:
>
> teamq2 <- data.frame(lapply(teamq, factor, levels=1:5))
> str(teamq2)
> counts <- sapply(teamq2, table)
> str(counts)
>
> Now make the plots:
>
> cols <- c("yellow","sandybrown","orange", "darkolivegreen","green")
> barplot(counts[, 1], horiz=TRUE, col=cols, legend=TRUE)
> barplot(counts[, 2], horiz=TRUE, col=cols, legend=TRUE)
> barplot(counts[, 3], horiz=TRUE, col=cols, legend=TRUE)
>
> You will need to adjust the xlim= argument so that the legend does not
> print on top of the bars.
>
> ----------------------------------------
> David L Carlson
> Department of Anthropology
> Texas A&M University
> College Station, TX 77843-4352
>
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of P. Roberto Bakker
> Sent: Monday, October 22, 2018 9:04 AM
> To: R mailing list <r-help at r-project.org>
> Subject: [R] Different stack barplots - same color legends
>
> Hi,
>
> I want to make barplots from different questions (columns) in one
> data.frame.
> Each question has the same 5 likert items.
> Now the problem: in some questions all items are answered; in other less.
> From the syntax below I get nice stack barplots - *but the legend colors do
> not* refer to the same likert-item, which I understand - the colors go in
> sequence along the table.
> Question: how can I write a syntax that each likert-item has the same
> legend color?
> Thank you in advance,
>
> Roberto
>
> SYNTAX:
> counts19 <- table(teamq[,19])
> counts20 <- table(teamq[,20])
> barplot(as.matrix(counts19), horiz = T,
>         col=c("yellow","sandybrown","orange", "darkolivegreen","green"),
> legend=T)
> barplot(as.matrix(counts20), horiz = T,
>         col=c("yellow","sandybrown","orange", "darkolivegreen","green"),
> legend=T)
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From rhelp @ending from krueger-f@mily@de  Mon Oct 22 19:33:48 2018
From: rhelp @ending from krueger-f@mily@de (Knut Krueger)
Date: Mon, 22 Oct 2018 19:33:48 +0200
Subject: [R] 
 match() question or needle haystack problem for a data.frame
In-Reply-To: <CAGxFJbS7vgQQK8t-X_z==on+jzYtDMmroCv3hPM6HWyU0Uq7Jw@mail.gmail.com>
References: <cac83a2c-2edd-e0e9-8b54-96afd48d401d@krueger-family.de>
 <CAGxFJbQrCaH6jLzMU60dx-U7m3oNT-zt1FhUOmcaOb-8njrp2w@mail.gmail.com>
 <CAGgJW74Tebw5CNDGVSf32bF7cMwkM3z=qi++8-SUPFYOHynYGQ@mail.gmail.com>
 <6ebcd80a-1786-34bb-d852-d05bfa24c9bc@krueger-family.de>
 <CAGxFJbS7vgQQK8t-X_z==on+jzYtDMmroCv3hPM6HWyU0Uq7Jw@mail.gmail.com>
Message-ID: <5991590c-ad47-bbbc-a187-702133e6cbf8@krueger-family.de>

Am 22.10.18 um 18:02 schrieb Bert Gunter:
> I suggest you spend a bit of time with an R tutorial or two and, in 
> particular learn about "logical indexing," as this basic R construct 
> seems to be mysterious to you.

Hi Bert,

especially the "match" help area is a little bit confusing.

And additional using a couple of programming languages with different 
logical operators and different syntax is misleading me sometimes to the 
wrong direction...

So the logic operations itself are not mysterious ;-)  but the 
translation to R.
And thank's a lot to give me the keyword to find for what I am was 
looking for: logical indexing.

I can not count the sites where I was looking to solve my problem .. 
with the wrong keywords ... :-)

Kind Regards Knut


From rmh @ending from temple@edu  Mon Oct 22 20:10:02 2018
From: rmh @ending from temple@edu (Richard M. Heiberger)
Date: Mon, 22 Oct 2018 14:10:02 -0400
Subject: [R] Different stack barplots - same color legends
In-Reply-To: <CAKDq9_P8hQEHWFH=c_86bG81fU0GS+EUCOmtZ9gJa_7kY-2uhA@mail.gmail.com>
References: <CAKDq9_N16xaeL4O2j=v2bVuMb=tuHfu0Ao+yuLQcEq6B-ngq1A@mail.gmail.com>
 <af9001d319ac4992b0bfc5526150f03b@tamu.edu>
 <CAKDq9_P8hQEHWFH=c_86bG81fU0GS+EUCOmtZ9gJa_7kY-2uhA@mail.gmail.com>
Message-ID: <CAGx1TMAYybconxY7ZVVJcdiYW6+WOjr_D+=GHOA=Xxv2AWRCqQ@mail.gmail.com>

Try the likert function in
install.packages("HH) ## if necessary
library(HH)

Then using David Carlson's example teamq
likert(teamq)

Your example in the 1:30PM (Eastern Daylight Time) doesn't work.
Error in revalue(teamq, c(`de situatie in zeer geringe mate van
toepassing is\nvoor u of uw supervisorengroep` = "1",  :
  x is not a factor or a character vector.

There are many examples in
?likert

Rich


On Mon, Oct 22, 2018 at 1:30 PM, P. Roberto Bakker
<robertobakker at gmail.com> wrote:
> Dear David,
>
> Thank you for you quite response.
> My apologies for not giving some sample data - this is due to AVG.
> *But this minisample should not be a problem (all in Dutch)*:
>  teamq
> # A tibble: 4 x 2
>   `Ik volg bijscholing om mijn opleiders-kwaliteiten op peil te houden`
>
>   <chr>
>
> 1 de situatie in hoge mate van toepassing is voor u of uw
> supervisorengroep
> 2 de situatie in zeer hoge mate van toepassing is voor u of uw
> supervisorengroep
> 3 de situatie in zeer hoge mate van toepassing is voor u of uw
> supervisorengroep
> 4 de situatie in geringe mate van toepassing is voor u of uw
> supervisorengroep
>   `Ik weet precies wat de ?modernisering van de opleiding? inhoudt`
>
>   <chr>
>
> 1 de situatie in hoge mate van toepassing is voor u of uw
> supervisorengroep
> 2 de situatie in zeer hoge mate van toepassing is voor u of uw
> supervisorengroep
> 3 de situatie in zeer hoge mate van toepassing is voor u of uw
> supervisorengroep
> 4 de situatie in geringe mate van toepassing is voor u of uw
> supervisorengroep
>
> As you see the likert items are in words, and I should change them in
> nummeric - Am I correct?
>
> *To do this, I tried (see further below):*
> plyr rename() ; I receive the message it should be a factor or character
> dplyr recode() ; same message
> mapvalues() ; it should be atomic, so I used as.atomic(teamq) but then I
> receive the nummers a strings.
>
> *The syntaxes*
> require(plyr)
> example2 <- revalue(teamq,
>                     c("de situatie in zeer geringe mate van toepassing is
> voor u of uw supervisorengroep"= "1",
>                         "de situatie in geringe mate van toepassing is voor
> u of uw supervisorengroep"= "2",
>                         "de situatie enigszins van toepassing is voor u of
> uw supervisorengroep"= "3",
>                         "de situatie in hoge mate van toepassing is voor u
> of uw supervisorengroep"= "4",
>                         "de situatie in zeer hoge mate van toepassing is
> voor u of uw supervisorengroep"= "5"))
>
> require(dplyr)
> example2 <- recode(teamq,
>                     c("de situatie in zeer geringe mate van toepassing is
> voor u of uw supervisorengroep"= "1",
>                       "de situatie in geringe mate van toepassing is voor u
> of uw supervisorengroep"= "2",
>                       "de situatie enigszins van toepassing is voor u of uw
> supervisorengroep"= "3",
>                       "de situatie in hoge mate van toepassing is voor u of
> uw supervisorengroep"= "4",
>                       "de situatie in zeer hoge mate van toepassing is voor
> u of uw supervisorengroep"= "5"))
>
> mapvalues(as.matrix(teamq), from = c("de situatie in zeer geringe mate van
> toepassing is voor u of uw supervisorengroep",
>                         "de situatie in geringe mate van toepassing is voor
> u of uw supervisorengroep",
>                         "de situatie enigszins van toepassing is voor u of
> uw supervisorengroep",
>                         "de situatie in hoge mate van toepassing is voor u
> of uw supervisorengroep",
>                         "de situatie in zeer hoge mate van toepassing is
> voor u of uw supervisorengroep"),
>           to = c(1,2,3,4,5))
>
> What should I do?
> Thank you in advance, Roberto
>
> Op ma 22 okt. 2018 om 17:13 schreef David L Carlson <dcarlson at tamu.edu>:
>
>> Your example is not reproducible since you did not give us some sample
>> data. I suspect that your data frame consists of columns that represent
>> questions and rows that represent individuals who answered the questions.
>> First create a simple example:
>>
>> set.seed(42)
>> teamq <- data.frame(V1=sample(c(1, 2, 4, 5), 25, replace = TRUE),
>>      V2=sample(c(1, 2, 3, 4, 5), 25, replace=TRUE),
>>      V3=sample(c(2, 3, 4, 5), 25, replace=TRUE))
>>
>> Notice that this data frame ONLY contains questions (and only 3
>> questions). Here are 2 ways to get what you want. The first one stacks the
>> data:
>>
>> teamq.stack <- stack(teamq)
>> str(teamq.stack)
>> counts <- table(teamq.stack)
>> str(counts)
>>
>> The second one converts each column to a factor with levels 1 - 5:
>>
>> teamq2 <- data.frame(lapply(teamq, factor, levels=1:5))
>> str(teamq2)
>> counts <- sapply(teamq2, table)
>> str(counts)
>>
>> Now make the plots:
>>
>> cols <- c("yellow","sandybrown","orange", "darkolivegreen","green")
>> barplot(counts[, 1], horiz=TRUE, col=cols, legend=TRUE)
>> barplot(counts[, 2], horiz=TRUE, col=cols, legend=TRUE)
>> barplot(counts[, 3], horiz=TRUE, col=cols, legend=TRUE)
>>
>> You will need to adjust the xlim= argument so that the legend does not
>> print on top of the bars.
>>
>> ----------------------------------------
>> David L Carlson
>> Department of Anthropology
>> Texas A&M University
>> College Station, TX 77843-4352
>>
>>
>> -----Original Message-----
>> From: R-help <r-help-bounces at r-project.org> On Behalf Of P. Roberto Bakker
>> Sent: Monday, October 22, 2018 9:04 AM
>> To: R mailing list <r-help at r-project.org>
>> Subject: [R] Different stack barplots - same color legends
>>
>> Hi,
>>
>> I want to make barplots from different questions (columns) in one
>> data.frame.
>> Each question has the same 5 likert items.
>> Now the problem: in some questions all items are answered; in other less.
>> From the syntax below I get nice stack barplots - *but the legend colors do
>> not* refer to the same likert-item, which I understand - the colors go in
>> sequence along the table.
>> Question: how can I write a syntax that each likert-item has the same
>> legend color?
>> Thank you in advance,
>>
>> Roberto
>>
>> SYNTAX:
>> counts19 <- table(teamq[,19])
>> counts20 <- table(teamq[,20])
>> barplot(as.matrix(counts19), horiz = T,
>>         col=c("yellow","sandybrown","orange", "darkolivegreen","green"),
>> legend=T)
>> barplot(as.matrix(counts20), horiz = T,
>>         col=c("yellow","sandybrown","orange", "darkolivegreen","green"),
>> legend=T)
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jdnewmil @ending from dcn@d@vi@@c@@u@  Mon Oct 22 21:55:30 2018
From: jdnewmil @ending from dcn@d@vi@@c@@u@ (Jeff Newmiller)
Date: Mon, 22 Oct 2018 12:55:30 -0700 (PDT)
Subject: [R] 
 Transformations in Tidyverse (renaming and ordering columns)
In-Reply-To: <CA+O61snvxz8-Ph5RWuSbzaS47aTf__+XFb=bOT2YviHt8isASg@mail.gmail.com>
References: <CA+O61snvxz8-Ph5RWuSbzaS47aTf__+XFb=bOT2YviHt8isASg@mail.gmail.com>
Message-ID: <alpine.BSF.2.00.1810221214590.4367@pedal.dcn.davis.ca.us>

IMO your question is flawed in that it does not present a desired output.

One thought that occurs to me is that perhaps you should stop treating 
everything like a nail and use some different tools, like nest and a for 
loop:

############################
library(knitr)
library(tibble)
library(dplyr)
#>
#> Attaching package: 'dplyr'
#> The following objects are masked from 'package:stats':
#>
#>     filter, lag
#> The following objects are masked from 'package:base':
#>
#>     intersect, setdiff, setequal, union
library(tidyr)

testset <- as_tibble(tribble(~Section, ~Observation, ~Order, ~Fiscal, ~Value,
                              "A", "One", 1, "2016-17", 419,
                              "A", "One", 1, "2017-18", 499,
                              "A", "One", 1, "2018-19", 463,
                              "A", "Two", 2, "2016-17", 391,
                              "A", "Two", 2, "2017-18", 445,
                              "A", "Two", 2, "2018-19", 423,
                              "A", "Three", 3, "2016-17", 348,
                              "A", "Three", 3, "2017-18", 353,
                              "A", "Three", 3, "2018-19", 357,
                              "B", "One", 1, "2016-17", 418,
                              "B", "One", 1, "2017-18", 498,
                              "B", "One", 1, "2018-19", 462,
                              "B", "Two", 2, "2016-17", 390,
                              "B", "Two", 2, "2017-18", 444,
                              "B", "Two", 2, "2018-19", 422,
                              "B", "Three", 3, "2016-17", 347,
                              "B", "Three", 3, "2017-18", 352,
                              "B", "Three", 3, "2018-19", 356
                              ))

sections <- (   testset
             %>% select( -Order )
             %>% spread( Observation, Value )
             %>% nest( -Section )
             )
# look at one of the sub-tables
sections[[ "data" ]][[1]]
#> # A tibble: 3 x 4
#>   Fiscal    One Three   Two
#>   <chr>   <dbl> <dbl> <dbl>
#> 1 2016-17   419   348   391
#> 2 2017-18   499   353   445
#> 3 2018-19   463   357   423

# print out the tables with captions
for ( rw in seq.int( nrow( sections ) ) ) {
     print( knitr::kable( sections[[ "data" ]][ rw ]
                        , caption = paste( "Section"
                                         , sections[[ "Section" ]][ rw ] )
                        , format = "pandoc"
                        )
          )
}
#>
#> Section A
#>
#> Fiscal     One   Three   Two
#> --------  ----  ------  ----
#> 2016-17    419     348   391
#> 2017-18    499     353   445
#> 2018-19    463     357   423
#>
#>
#> Section B
#>
#> Fiscal     One   Three   Two
#> --------  ----  ------  ----
#> 2016-17    418     347   390
#> 2017-18    498     352   444
#> 2018-19    462     356   422
#>
############################

On Mon, 22 Oct 2018, Joel Maxuel wrote:

> Hello all,
>
> I am slowly picking away at a factsheet that will include several result
> sets from a single tibble (there is a column identifying the section title)
> and would like to have that value in the top left corner of each resulting
> table.  When using the `spread` function, I see that any remaining columns
> not identified by `key` nor `value` will be placed to the far left.
>
> Like the example below, I would like the column label Fiscal be renamed to
> the data value "A", so the top-left of the result is "A".  However, if I
> try to progmatically set the column name, I run into issues:
>
>
> library(knitr)
> library(tidyverse)
> library(tibble)
> library(dplyr)
> library(magrittr)
>
> testset <- as_tibble(tribble(~Section, ~Observation, ~Order, ~Fiscal,
> ~Value,
>                             "A", "One", 1, "2016-17", 419,
>                             "A", "One", 1, "2017-18", 499,
>                             "A", "One", 1, "2018-19", 463,
>                             "A", "Two", 2, "2016-17", 391,
>                             "A", "Two", 2, "2017-18", 445,
>                             "A", "Two", 2, "2018-19", 423,
>                             "A", "Three", 3, "2016-17", 348,
>                             "A", "Three", 3, "2017-18", 353,
>                             "A", "Three", 3, "2018-19", 357))
> sectionA <- as_tibble(filter(testset, Section == "A")) # Mind you for this
> example, does very little
> spread(select(sectionA, Observation, "A" = Fiscal, Value), key=Observation,
> value=Value) # Works, with reservations
> spread(select(sectionA, Observation, slice(sectionA,1) %>%
> magrittr::extract2("Section") = Fiscal, Value), key=Observation,
> value=Value) # Produces error:
> # Error: unexpected '=' in "spread(select(sectionA, Observation,
> slice(sectionA,1) %>% magrittr::extract2("Section") ="
>
>
> I presume my premise is very wrong.
>
> Also, I am curious how to sort columns (and rows) with extra columns
> (/rows) not meant for display.  In this case, the columns One, Two, and
> Three (in real life won't be linguistic representations of numbers), are
> out of order - however I do have the Order column to fix that (if I knew
> how to include it for sorting purposes, without displaying it).  A few
> hints here would help.  (Perhaps there is column/row hiding in kableExtra -
> which I will be using later on?)
>
> --
> Cheers,
> Joel Maxuel
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                       Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k


From j@m@xuel @ending from gm@il@com  Mon Oct 22 22:57:55 2018
From: j@m@xuel @ending from gm@il@com (Joel Maxuel)
Date: Mon, 22 Oct 2018 17:57:55 -0300
Subject: [R] 
 Transformations in Tidyverse (renaming and ordering columns)
In-Reply-To: <alpine.BSF.2.00.1810221214590.4367@pedal.dcn.davis.ca.us>
References: <CA+O61snvxz8-Ph5RWuSbzaS47aTf__+XFb=bOT2YviHt8isASg@mail.gmail.com>
 <alpine.BSF.2.00.1810221214590.4367@pedal.dcn.davis.ca.us>
Message-ID: <CA+O61s=XqesQTTH4Z2BancMG7NbZoVsmymVGFbsfjEOe3YpZ2w@mail.gmail.com>

Hi Jeff,

Thanks for the input, however it does not seem we are on the same
wavelength.  Maybe I should have distilled my example down even further to
solidify context, although given what I was trying to accomplish I believe
it is all in context.

At this point I am not concerned about presenting multiple sections
(agreed, looping will be important) - my emphasis right now is to present
just one piece in a manner that makes sense.  As a result, I am finding
that using `spread` to convert the flat data into a "crosstab" does not.

The flat data has (IMO - at least the wider version I have locally) all the
info needed to allow a sort to be enforced, and any miscellaneous data for
that section, without having to customize each section individually (in
essence, allow for looping).  With regard to sorting, in the past hour or
so I have tried the `seq` parameter (after changing `key` to the `Order`
column) in `spread`, as well as the `arrange` function after `spread` but
neither are helpful.

I have considered a leading character in the headings to force a sort, with
something to trim it from the final output, but I am not fond of that
solution.  Also, having the section heading outside the table to me feels
like a waste of space.  With 13 proposed sections in the end (120 to 140
observations), having that all in only two pages may already be a challenge.

--
Cheers,
Joel Maxuel

	[[alternative HTML version deleted]]


From jdnewmil @ending from dcn@d@vi@@c@@u@  Mon Oct 22 23:17:57 2018
From: jdnewmil @ending from dcn@d@vi@@c@@u@ (Jeff Newmiller)
Date: Mon, 22 Oct 2018 14:17:57 -0700
Subject: [R] 
 Transformations in Tidyverse (renaming and ordering columns)
In-Reply-To: <CA+O61s=XqesQTTH4Z2BancMG7NbZoVsmymVGFbsfjEOe3YpZ2w@mail.gmail.com>
References: <CA+O61snvxz8-Ph5RWuSbzaS47aTf__+XFb=bOT2YviHt8isASg@mail.gmail.com>
 <alpine.BSF.2.00.1810221214590.4367@pedal.dcn.davis.ca.us>
 <CA+O61s=XqesQTTH4Z2BancMG7NbZoVsmymVGFbsfjEOe3YpZ2w@mail.gmail.com>
Message-ID: <27506B46-D7F6-463E-A706-1E37677EF90F@dcn.davis.ca.us>

If you are willing to work in the context of LaTeX output then perhaps you will find the "tables" package useful. However, while you think you have communicated clearly enough regarding what you want to accomplish, I do not, so either someone else will intuit what you want or you will create a mock-up of what you want your output to look like to remove the guesswork.

On October 22, 2018 1:57:55 PM PDT, Joel Maxuel <j.maxuel at gmail.com> wrote:
>Hi Jeff,
>
>Thanks for the input, however it does not seem we are on the same
>wavelength.  Maybe I should have distilled my example down even further
>to
>solidify context, although given what I was trying to accomplish I
>believe
>it is all in context.
>
>At this point I am not concerned about presenting multiple sections
>(agreed, looping will be important) - my emphasis right now is to
>present
>just one piece in a manner that makes sense.  As a result, I am finding
>that using `spread` to convert the flat data into a "crosstab" does
>not.
>
>The flat data has (IMO - at least the wider version I have locally) all
>the
>info needed to allow a sort to be enforced, and any miscellaneous data
>for
>that section, without having to customize each section individually (in
>essence, allow for looping).  With regard to sorting, in the past hour
>or
>so I have tried the `seq` parameter (after changing `key` to the
>`Order`
>column) in `spread`, as well as the `arrange` function after `spread`
>but
>neither are helpful.
>
>I have considered a leading character in the headings to force a sort,
>with
>something to trim it from the final output, but I am not fond of that
>solution.  Also, having the section heading outside the table to me
>feels
>like a waste of space.  With 13 proposed sections in the end (120 to
>140
>observations), having that all in only two pages may already be a
>challenge.
>
>--
>Cheers,
>Joel Maxuel

-- 
Sent from my phone. Please excuse my brevity.


From j@m@xuel @ending from gm@il@com  Tue Oct 23 01:55:01 2018
From: j@m@xuel @ending from gm@il@com (Joel Maxuel)
Date: Mon, 22 Oct 2018 20:55:01 -0300
Subject: [R] 
 Transformations in Tidyverse (renaming and ordering columns)
In-Reply-To: <27506B46-D7F6-463E-A706-1E37677EF90F@dcn.davis.ca.us>
References: <CA+O61snvxz8-Ph5RWuSbzaS47aTf__+XFb=bOT2YviHt8isASg@mail.gmail.com>
 <alpine.BSF.2.00.1810221214590.4367@pedal.dcn.davis.ca.us>
 <CA+O61s=XqesQTTH4Z2BancMG7NbZoVsmymVGFbsfjEOe3YpZ2w@mail.gmail.com>
 <27506B46-D7F6-463E-A706-1E37677EF90F@dcn.davis.ca.us>
Message-ID: <CA+O61smfme2OuARz7LB7jdMmUQBkR1TqL+P3jTXXjxF-jH5AQA@mail.gmail.com>

For clarity sake.  More show (with example closer to reality), less tell.
:^)

## Current:

> library(knitr)
> library(tidyverse)
?? Conflicts
?????????????????????????????????????????????????????????????????????
tidyverse_conflicts() ??
x dplyr::filter() masks stats::filter()
x dplyr::lag()    masks stats::lag()
> library(tibble)
> library(dplyr)
>
> testset <- as_tibble(tribble(~SN, ~Section, ~Order, ~Observation, ~Seq,
~Label, ~Value,
+                              2, "For Reporting Quarter", 1, "One", 1,
"Western", 163,
+                              2, "For Reporting Quarter", 1, "One", 2,
"Northern", 105,
+                              2, "For Reporting Quarter", 1, "One", 3,
"Eastern", 121,
+                              2, "For Reporting Quarter", 1, "One", 4,
"Southern", 74,
+                              2, "For Reporting Quarter", 2, "Two", 1,
"Western", 147,
+                              2, "For Reporting Quarter", 2, "Two", 2,
"Northern", 100,
+                              2, "For Reporting Quarter", 2, "Two", 3,
"Eastern", 106,
+                              2, "For Reporting Quarter", 2, "Two", 4,
"Southern", 70,
+                              2, "For Reporting Quarter", 3, "Three", 1,
"Western", 119,
+                              2, "For Reporting Quarter", 3, "Three", 2,
"Northern", 82,
+                              2, "For Reporting Quarter", 3, "Three", 3,
"Eastern", 90,
+                              2, "For Reporting Quarter", 3, "Three", 4,
"Southern", 65))
> testset %>% select(Observation, Label, Value) %>% spread(key=Observation,
value=Value)
# A tibble: 4 x 4
  Label      One Three   Two
  <chr>    <dbl> <dbl> <dbl>
1 Eastern    121    90   106
2 Northern   105    82   100
3 Southern    74    65    70
4 Western    163   119   147
>

## Intended:

# A tibble: 4 x 4
  For Reporting Quarter     One   Two Three
  <chr>                          <dbl> <dbl> <dbl>
1 Western                       163   147   119
2 Northern                       105   100    82
3 Eastern                        121   106    90
4 Southern                       74     70     65
>

##

Unfortunately I don't know how to get there from here.  Section, Order and
Seq are there to assist with getting the data to the right output
programmatically, however I don't know how to make use of them.

Hope this helps.

--
Cheers,
Joel Maxuel


On Mon, Oct 22, 2018 at 6:18 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> If you are willing to work in the context of LaTeX output then perhaps you
> will find the "tables" package useful. However, while you think you have
> communicated clearly enough regarding what you want to accomplish, I do
> not, so either someone else will intuit what you want or you will create a
> mock-up of what you want your output to look like to remove the guesswork.
>
>

	[[alternative HTML version deleted]]


From bgunter@4567 @ending from gm@il@com  Tue Oct 23 03:31:06 2018
From: bgunter@4567 @ending from gm@il@com (Bert Gunter)
Date: Mon, 22 Oct 2018 18:31:06 -0700
Subject: [R] 
 Transformations in Tidyverse (renaming and ordering columns)
In-Reply-To: <CA+O61smfme2OuARz7LB7jdMmUQBkR1TqL+P3jTXXjxF-jH5AQA@mail.gmail.com>
References: <CA+O61snvxz8-Ph5RWuSbzaS47aTf__+XFb=bOT2YviHt8isASg@mail.gmail.com>
 <alpine.BSF.2.00.1810221214590.4367@pedal.dcn.davis.ca.us>
 <CA+O61s=XqesQTTH4Z2BancMG7NbZoVsmymVGFbsfjEOe3YpZ2w@mail.gmail.com>
 <27506B46-D7F6-463E-A706-1E37677EF90F@dcn.davis.ca.us>
 <CA+O61smfme2OuARz7LB7jdMmUQBkR1TqL+P3jTXXjxF-jH5AQA@mail.gmail.com>
Message-ID: <CAGxFJbRMmX6kXQAZ-5GrERYiiLkELxBo3pCPz+Q+hrP6r-8j7g@mail.gmail.com>

For clarity's sake:

** Stop posting in HTML.**


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Oct 22, 2018 at 4:55 PM Joel Maxuel <j.maxuel at gmail.com> wrote:

> For clarity sake.  More show (with example closer to reality), less tell.
> :^)
>
> ## Current:
>
> > library(knitr)
> > library(tidyverse)
> ?? Conflicts
> ?????????????????????????????????????????????????????????????????????
> tidyverse_conflicts() ??
> x dplyr::filter() masks stats::filter()
> x dplyr::lag()    masks stats::lag()
> > library(tibble)
> > library(dplyr)
> >
> > testset <- as_tibble(tribble(~SN, ~Section, ~Order, ~Observation, ~Seq,
> ~Label, ~Value,
> +                              2, "For Reporting Quarter", 1, "One", 1,
> "Western", 163,
> +                              2, "For Reporting Quarter", 1, "One", 2,
> "Northern", 105,
> +                              2, "For Reporting Quarter", 1, "One", 3,
> "Eastern", 121,
> +                              2, "For Reporting Quarter", 1, "One", 4,
> "Southern", 74,
> +                              2, "For Reporting Quarter", 2, "Two", 1,
> "Western", 147,
> +                              2, "For Reporting Quarter", 2, "Two", 2,
> "Northern", 100,
> +                              2, "For Reporting Quarter", 2, "Two", 3,
> "Eastern", 106,
> +                              2, "For Reporting Quarter", 2, "Two", 4,
> "Southern", 70,
> +                              2, "For Reporting Quarter", 3, "Three", 1,
> "Western", 119,
> +                              2, "For Reporting Quarter", 3, "Three", 2,
> "Northern", 82,
> +                              2, "For Reporting Quarter", 3, "Three", 3,
> "Eastern", 90,
> +                              2, "For Reporting Quarter", 3, "Three", 4,
> "Southern", 65))
> > testset %>% select(Observation, Label, Value) %>% spread(key=Observation,
> value=Value)
> # A tibble: 4 x 4
>   Label      One Three   Two
>   <chr>    <dbl> <dbl> <dbl>
> 1 Eastern    121    90   106
> 2 Northern   105    82   100
> 3 Southern    74    65    70
> 4 Western    163   119   147
> >
>
> ## Intended:
>
> # A tibble: 4 x 4
>   For Reporting Quarter     One   Two Three
>   <chr>                          <dbl> <dbl> <dbl>
> 1 Western                       163   147   119
> 2 Northern                       105   100    82
> 3 Eastern                        121   106    90
> 4 Southern                       74     70     65
> >
>
> ##
>
> Unfortunately I don't know how to get there from here.  Section, Order and
> Seq are there to assist with getting the data to the right output
> programmatically, however I don't know how to make use of them.
>
> Hope this helps.
>
> --
> Cheers,
> Joel Maxuel
>
>
> On Mon, Oct 22, 2018 at 6:18 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> wrote:
>
> > If you are willing to work in the context of LaTeX output then perhaps
> you
> > will find the "tables" package useful. However, while you think you have
> > communicated clearly enough regarding what you want to accomplish, I do
> > not, so either someone else will intuit what you want or you will create
> a
> > mock-up of what you want your output to look like to remove the
> guesswork.
> >
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From john@l@ing @ending from gm@il@com  Tue Oct 23 03:47:50 2018
From: john@l@ing @ending from gm@il@com (John Laing)
Date: Mon, 22 Oct 2018 21:47:50 -0400
Subject: [R] 
 Transformations in Tidyverse (renaming and ordering columns)
In-Reply-To: <CA+O61smfme2OuARz7LB7jdMmUQBkR1TqL+P3jTXXjxF-jH5AQA@mail.gmail.com>
References: <CA+O61snvxz8-Ph5RWuSbzaS47aTf__+XFb=bOT2YviHt8isASg@mail.gmail.com>
 <alpine.BSF.2.00.1810221214590.4367@pedal.dcn.davis.ca.us>
 <CA+O61s=XqesQTTH4Z2BancMG7NbZoVsmymVGFbsfjEOe3YpZ2w@mail.gmail.com>
 <27506B46-D7F6-463E-A706-1E37677EF90F@dcn.davis.ca.us>
 <CA+O61smfme2OuARz7LB7jdMmUQBkR1TqL+P3jTXXjxF-jH5AQA@mail.gmail.com>
Message-ID: <CAA3Wa=spwURbFqBDWU_kdSRzgJRHC+p5dPFioqxYyu7SWyQr5A@mail.gmail.com>

I don't know much about the Tidyverse, but more generally the way to
represent ordered categorical data is with a factor. This seems to work:

> testset$Observation <- factor(testset$Observation, levels=c("One", "Two",
"Three"))
> testset$Label <- factor(testset$Label, levels=c("Western", "Northern",
"Eastern", "Southern"))
> testset %>% select(Observation, Label, Value) %>% spread(key=Observation,
value=Value)
# A tibble: 4 x 4
  Label      One   Two Three
  <fct>    <dbl> <dbl> <dbl>
1 Western    163   147   119
2 Northern   105   100    82
3 Eastern    121   106    90
4 Southern    74    70    65


JL

On Mon, Oct 22, 2018 at 7:55 PM Joel Maxuel <j.maxuel at gmail.com> wrote:

> For clarity sake.  More show (with example closer to reality), less tell.
> :^)
>
> ## Current:
>
> > library(knitr)
> > library(tidyverse)
> ?? Conflicts
> ?????????????????????????????????????????????????????????????????????
> tidyverse_conflicts() ??
> x dplyr::filter() masks stats::filter()
> x dplyr::lag()    masks stats::lag()
> > library(tibble)
> > library(dplyr)
> >
> > testset <- as_tibble(tribble(~SN, ~Section, ~Order, ~Observation, ~Seq,
> ~Label, ~Value,
> +                              2, "For Reporting Quarter", 1, "One", 1,
> "Western", 163,
> +                              2, "For Reporting Quarter", 1, "One", 2,
> "Northern", 105,
> +                              2, "For Reporting Quarter", 1, "One", 3,
> "Eastern", 121,
> +                              2, "For Reporting Quarter", 1, "One", 4,
> "Southern", 74,
> +                              2, "For Reporting Quarter", 2, "Two", 1,
> "Western", 147,
> +                              2, "For Reporting Quarter", 2, "Two", 2,
> "Northern", 100,
> +                              2, "For Reporting Quarter", 2, "Two", 3,
> "Eastern", 106,
> +                              2, "For Reporting Quarter", 2, "Two", 4,
> "Southern", 70,
> +                              2, "For Reporting Quarter", 3, "Three", 1,
> "Western", 119,
> +                              2, "For Reporting Quarter", 3, "Three", 2,
> "Northern", 82,
> +                              2, "For Reporting Quarter", 3, "Three", 3,
> "Eastern", 90,
> +                              2, "For Reporting Quarter", 3, "Three", 4,
> "Southern", 65))
> > testset %>% select(Observation, Label, Value) %>% spread(key=Observation,
> value=Value)
> # A tibble: 4 x 4
>   Label      One Three   Two
>   <chr>    <dbl> <dbl> <dbl>
> 1 Eastern    121    90   106
> 2 Northern   105    82   100
> 3 Southern    74    65    70
> 4 Western    163   119   147
> >
>
> ## Intended:
>
> # A tibble: 4 x 4
>   For Reporting Quarter     One   Two Three
>   <chr>                          <dbl> <dbl> <dbl>
> 1 Western                       163   147   119
> 2 Northern                       105   100    82
> 3 Eastern                        121   106    90
> 4 Southern                       74     70     65
> >
>
> ##
>
> Unfortunately I don't know how to get there from here.  Section, Order and
> Seq are there to assist with getting the data to the right output
> programmatically, however I don't know how to make use of them.
>
> Hope this helps.
>
> --
> Cheers,
> Joel Maxuel
>
>
> On Mon, Oct 22, 2018 at 6:18 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> wrote:
>
> > If you are willing to work in the context of LaTeX output then perhaps
> you
> > will find the "tables" package useful. However, while you think you have
> > communicated clearly enough regarding what you want to accomplish, I do
> > not, so either someone else will intuit what you want or you will create
> a
> > mock-up of what you want your output to look like to remove the
> guesswork.
> >
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From mi@ojpm @ending from gm@il@com  Tue Oct 23 05:15:37 2018
From: mi@ojpm @ending from gm@il@com (John)
Date: Tue, 23 Oct 2018 11:15:37 +0800
Subject: [R] SVAR: error message
Message-ID: <CABcx46CqaJBcMz7-UX_qOvLOmnbw8qjQ21zUpfCaUfUZ+QyxcQ@mail.gmail.com>

Hi,

  I have a bi-variate VAR model and would like to convert it to SVAR but
get an error message. Could someone pinpoint anything wrong and correct my
code? Thanks,

John


amat <- matrix(c(NA, 0, NA, NA), nrow = 2, ncol = 2, byrow = TRUE)
df1<-data.frame(x=c(1,4,5,6,7,8,9,3,5,3), y=c(4,7,1,2,3,9,3,4,5,7))
var1<-VAR(df1, type = "const", ic="BIC")
svar2<-SVAR(x = var1, estmethod = "scoring", Amat = amat, Bmat = diag(2),
            max.iter = 100, conv.crit = 0.1e-6, maxls = 1000)

> amat <- matrix(c(NA, 0, NA, NA), nrow = 2, ncol = 2, byrow = TRUE)
> df1<-data.frame(x=c(1,4,5,6,7,8,9,3,5,3), y=c(4,7,1,2,3,9,3,4,5,7))
> var1<-VAR(df1, type = "const", ic="BIC")
> svar2<-SVAR(x = var1, estmethod = "scoring", Amat = amat, Bmat = diag(2),
+             max.iter = 100, conv.crit = 0.1e-6, maxls = 1000)
Error in `[<-`(`*tmp*`, pos[i], i, value = 1) : subscript out of bounds

	[[alternative HTML version deleted]]


From @nuj@goy@l @ending from gm@il@com  Tue Oct 23 07:40:47 2018
From: @nuj@goy@l @ending from gm@il@com (Anuj Goyal)
Date: Mon, 22 Oct 2018 22:40:47 -0700
Subject: [R] quantmod::chart_Series() how to simplify x-axis labels?
Message-ID: <CAHuEqf=SRpb-D5Ou8SQTcuGDXz1JUkzxzKVqjQ-OrgeknWCE=A@mail.gmail.com>

Is there a way to easily simplify the x-axis labels for
quantmod::chart_Series()

https://stackoverflow.com/questions/52910667/quantmodchart-series-how-to-simplify-x-axis-labels

	[[alternative HTML version deleted]]


From tom@@@k@liber@ @ending from gm@il@com  Tue Oct 23 10:43:12 2018
From: tom@@@k@liber@ @ending from gm@il@com (Tomas Kalibera)
Date: Tue, 23 Oct 2018 10:43:12 +0200
Subject: [R] Cannot use R on Windows when installed to an external drive
 with a space in the path
In-Reply-To: <20181022201530.47d185b8@Tarkus>
References: <CANccLkyWSaKnrb9gczt62WqR9WVpAT5eXbJhkKRk_gRUcQhzxw@mail.gmail.com>
 <20181022201530.47d185b8@Tarkus>
Message-ID: <fadd7e57-5fcd-beef-7a2e-061ee0316b32@gmail.com>


On 10/22/2018 07:15 PM, Ivan Krylov wrote:
> This is a bin\R.exe + bin\Rscript.exe bug.
Please note this has been fixed in later versions of R, quoting has been 
added. If you can find some corner case in which the current quoting 
(R-devel) is incorrect on Windows, in the front-ends or anywhere else, 
please send a bug report with a reproducible example.

But please keep in mind my comment that some packages will not be 
working with space in the name of R home directory. Some packages will 
not build from source. CRAN has been checking for the most obvious cause 
of this (certain use of include directives in make files), but it is 
still not safe to use R on file systems without SFN.

Best,
Tomas
>
> On Windows, where the system call to create a process only takes one
> command line string instead of an array of command line parameters[0]
> (and the C runtimes usually call CommandLineToArgvW[1] behind the
> scenes to get an array back), execv() does nothing to prepare a
> properly-quoted command line and just concatenates its arguments[2].
> Moreover, Windows version of execv() is effectively undocumented[3],
> nor there is any information about the suggested replacement[4].
> (You can call it a Windows bug instead.)
>
> Short file names are not a guaranteed solution, because they may
> not be available at all on some filesystems[5] (which is how this
> error has been encountered). In the general case, "argument quoting
> hell"[6] is unavoidable on Windows, but the code from [2] implements
> the proper conversion from an array of strings to a single quoted
> command line, ready to be parsed by the launched process.
>
> char* getRHOME(int m) in src/gnuwin32/rhome.c tries to return a short
> path (assuming it won't contain spaces). This is used by rcmdfn() from
> src/gnuwin32/front-ends/rcmdfn.c to system() a command line built with
> no quoting, causing the error. rcmdfn() is called from
> src/gnuwin32/front-ends/R.c, which seems to contain the entry point for
> R\R-3.3.3\bin\R.exe.
>
> Fortunately, in src/unix/Rscript.c the whole mess seems to be avoided by
> having it directly include rterm.c and then call AppMain() on Windows,
> passing the command line parameter array. Same goes for
> src/gnuwin32/front-ends/graphappmain.c. The corresponding executables
> reside in the architecture-specific subdirectory of ...\bin\.
>
> So if you run Rgui.exe, Rterm.exe or Rscript.exe from
> R-3.3.3\bin\i386 instead of R-3.3.3\bin, no extra cmd.exe processes
> should be spawned and the badly-formed system() should be avoided.
>


From h@medh@@eli @ending from gm@il@com  Tue Oct 23 11:04:53 2018
From: h@medh@@eli @ending from gm@il@com (Hamed Ha)
Date: Tue, 23 Oct 2018 10:04:53 +0100
Subject: [R] Ignoring the domain of RV in punif()
Message-ID: <CAAC89xevX32DXu1tXjou-rrAa4QymrEQQjvP6Z0jOnZSDwpsOg@mail.gmail.com>

Hi All,

I recently discovered an interesting issue with the punif() function.  Let
X~Uiform[a,b] then the CDF is defined by F(x)=(x-a)/(b-a) for (a<= x<= b).
The important fact here is the domain of the random variable X. Having said
that, R returns CDF for any value in the real domain.

I understand that one can justify this by extending the domain of X and
assigning zero probabilities to the values outside the domain. However,
theoretically, it is not true to return a value for the CDF outside the
domain. Then I propose a patch to R function punif() to return an error in
this situations.

Example:
> punif(10^10)
[1] 1


Regards,
Hamed.

	[[alternative HTML version deleted]]


From ericjberger @ending from gm@il@com  Tue Oct 23 11:21:16 2018
From: ericjberger @ending from gm@il@com (Eric Berger)
Date: Tue, 23 Oct 2018 12:21:16 +0300
Subject: [R] Ignoring the domain of RV in punif()
In-Reply-To: <CAAC89xevX32DXu1tXjou-rrAa4QymrEQQjvP6Z0jOnZSDwpsOg@mail.gmail.com>
References: <CAAC89xevX32DXu1tXjou-rrAa4QymrEQQjvP6Z0jOnZSDwpsOg@mail.gmail.com>
Message-ID: <CAGgJW74aBVxM5JQuYsxQ5WbSFiG1TX3L+3L7KuKsOeci-_EGSg@mail.gmail.com>

Hi Hamed,
I disagree with your criticism.
For a random variable X
X: D - - - > R
its CDF F is defined by
F: R - - - > [0,1]
F(z) = Prob(X <= z)

The fact that you wrote a convenient formula for the CDF
F(z) = (z-a)/(b-a)  a <= z <= b
in a particular range for z is your decision, and as you noted this formula
will give the wrong value for z outside the interval [a,b].
But the problem lies in your formula, not the definition of the CDF which
would be, in your case:

F(z) = 0 if z <= a
       = (z-a)/(b-a)   if a <= z <= b
       = 1 if 1 <= z

HTH,
Eric




On Tue, Oct 23, 2018 at 12:05 PM Hamed Ha <hamedhaseli at gmail.com> wrote:

> Hi All,
>
> I recently discovered an interesting issue with the punif() function.  Let
> X~Uiform[a,b] then the CDF is defined by F(x)=(x-a)/(b-a) for (a<= x<= b).
> The important fact here is the domain of the random variable X. Having said
> that, R returns CDF for any value in the real domain.
>
> I understand that one can justify this by extending the domain of X and
> assigning zero probabilities to the values outside the domain. However,
> theoretically, it is not true to return a value for the CDF outside the
> domain. Then I propose a patch to R function punif() to return an error in
> this situations.
>
> Example:
> > punif(10^10)
> [1] 1
>
>
> Regards,
> Hamed.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From h@medh@@eli @ending from gm@il@com  Tue Oct 23 11:35:16 2018
From: h@medh@@eli @ending from gm@il@com (Hamed Ha)
Date: Tue, 23 Oct 2018 10:35:16 +0100
Subject: [R] Ignoring the domain of RV in punif()
In-Reply-To: <CAGgJW74aBVxM5JQuYsxQ5WbSFiG1TX3L+3L7KuKsOeci-_EGSg@mail.gmail.com>
References: <CAAC89xevX32DXu1tXjou-rrAa4QymrEQQjvP6Z0jOnZSDwpsOg@mail.gmail.com>
 <CAGgJW74aBVxM5JQuYsxQ5WbSFiG1TX3L+3L7KuKsOeci-_EGSg@mail.gmail.com>
Message-ID: <CAAC89xcYNAhVKM-kBUZYiWrC=JHnAtK9GNftvsvWi-mS2uQ7TQ@mail.gmail.com>

Hi Eric,

Thank you for your reply.

I should say that your justification makes sense to me.  However, I am in
doubt that CDF defines by the Pr(x <= X) for all X? that is the domain of
RV is totally ignored in the definition.

It makes a conflict between the formula and the theoretical definition.

Please see page 115 in
https://books.google.co.uk/books?id=FEE8D1tRl30C&printsec=frontcover&dq=statistical+distribution&hl=en&sa=X&ved=0ahUKEwjp3PGZmJzeAhUQqxoKHV7OBJgQ6AEIKTAA#v=onepage&q=uniform&f=false
The


Thanks.
Hamed.



On Tue, 23 Oct 2018 at 10:21, Eric Berger <ericjberger at gmail.com> wrote:

> Hi Hamed,
> I disagree with your criticism.
> For a random variable X
> X: D - - - > R
> its CDF F is defined by
> F: R - - - > [0,1]
> F(z) = Prob(X <= z)
>
> The fact that you wrote a convenient formula for the CDF
> F(z) = (z-a)/(b-a)  a <= z <= b
> in a particular range for z is your decision, and as you noted this
> formula will give the wrong value for z outside the interval [a,b].
> But the problem lies in your formula, not the definition of the CDF which
> would be, in your case:
>
> F(z) = 0 if z <= a
>        = (z-a)/(b-a)   if a <= z <= b
>        = 1 if 1 <= z
>
> HTH,
> Eric
>
>
>
>
> On Tue, Oct 23, 2018 at 12:05 PM Hamed Ha <hamedhaseli at gmail.com> wrote:
>
>> Hi All,
>>
>> I recently discovered an interesting issue with the punif() function.  Let
>> X~Uiform[a,b] then the CDF is defined by F(x)=(x-a)/(b-a) for (a<= x<= b).
>> The important fact here is the domain of the random variable X. Having
>> said
>> that, R returns CDF for any value in the real domain.
>>
>> I understand that one can justify this by extending the domain of X and
>> assigning zero probabilities to the values outside the domain. However,
>> theoretically, it is not true to return a value for the CDF outside the
>> domain. Then I propose a patch to R function punif() to return an error in
>> this situations.
>>
>> Example:
>> > punif(10^10)
>> [1] 1
>>
>>
>> Regards,
>> Hamed.
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From ericjberger @ending from gm@il@com  Tue Oct 23 11:42:02 2018
From: ericjberger @ending from gm@il@com (Eric Berger)
Date: Tue, 23 Oct 2018 12:42:02 +0300
Subject: [R] Ignoring the domain of RV in punif()
In-Reply-To: <CAAC89xcYNAhVKM-kBUZYiWrC=JHnAtK9GNftvsvWi-mS2uQ7TQ@mail.gmail.com>
References: <CAAC89xevX32DXu1tXjou-rrAa4QymrEQQjvP6Z0jOnZSDwpsOg@mail.gmail.com>
 <CAGgJW74aBVxM5JQuYsxQ5WbSFiG1TX3L+3L7KuKsOeci-_EGSg@mail.gmail.com>
 <CAAC89xcYNAhVKM-kBUZYiWrC=JHnAtK9GNftvsvWi-mS2uQ7TQ@mail.gmail.com>
Message-ID: <CAGgJW74aQvvOAjgqit+79+5zQ-sa2DWC3Ay94mhPa+yPxZ201g@mail.gmail.com>

Hi Hamed,
That reference is sloppy. Try looking at
https://en.wikipedia.org/wiki/Cumulative_distribution_function
and in particular the first example which deals with a Unif[0,1] r.v.

Best,
Eric


On Tue, Oct 23, 2018 at 12:35 PM Hamed Ha <hamedhaseli at gmail.com> wrote:

> Hi Eric,
>
> Thank you for your reply.
>
> I should say that your justification makes sense to me.  However, I am in
> doubt that CDF defines by the Pr(x <= X) for all X? that is the domain of
> RV is totally ignored in the definition.
>
> It makes a conflict between the formula and the theoretical definition.
>
> Please see page 115 in
>
> https://books.google.co.uk/books?id=FEE8D1tRl30C&printsec=frontcover&dq=statistical+distribution&hl=en&sa=X&ved=0ahUKEwjp3PGZmJzeAhUQqxoKHV7OBJgQ6AEIKTAA#v=onepage&q=uniform&f=false
> The
>
>
> Thanks.
> Hamed.
>
>
>
> On Tue, 23 Oct 2018 at 10:21, Eric Berger <ericjberger at gmail.com> wrote:
>
>> Hi Hamed,
>> I disagree with your criticism.
>> For a random variable X
>> X: D - - - > R
>> its CDF F is defined by
>> F: R - - - > [0,1]
>> F(z) = Prob(X <= z)
>>
>> The fact that you wrote a convenient formula for the CDF
>> F(z) = (z-a)/(b-a)  a <= z <= b
>> in a particular range for z is your decision, and as you noted this
>> formula will give the wrong value for z outside the interval [a,b].
>> But the problem lies in your formula, not the definition of the CDF which
>> would be, in your case:
>>
>> F(z) = 0 if z <= a
>>        = (z-a)/(b-a)   if a <= z <= b
>>        = 1 if 1 <= z
>>
>> HTH,
>> Eric
>>
>>
>>
>>
>> On Tue, Oct 23, 2018 at 12:05 PM Hamed Ha <hamedhaseli at gmail.com> wrote:
>>
>>> Hi All,
>>>
>>> I recently discovered an interesting issue with the punif() function.
>>> Let
>>> X~Uiform[a,b] then the CDF is defined by F(x)=(x-a)/(b-a) for (a<= x<=
>>> b).
>>> The important fact here is the domain of the random variable X. Having
>>> said
>>> that, R returns CDF for any value in the real domain.
>>>
>>> I understand that one can justify this by extending the domain of X and
>>> assigning zero probabilities to the values outside the domain. However,
>>> theoretically, it is not true to return a value for the CDF outside the
>>> domain. Then I propose a patch to R function punif() to return an error
>>> in
>>> this situations.
>>>
>>> Example:
>>> > punif(10^10)
>>> [1] 1
>>>
>>>
>>> Regards,
>>> Hamed.
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>

	[[alternative HTML version deleted]]


From h@medh@@eli @ending from gm@il@com  Tue Oct 23 11:54:56 2018
From: h@medh@@eli @ending from gm@il@com (Hamed Ha)
Date: Tue, 23 Oct 2018 10:54:56 +0100
Subject: [R] Ignoring the domain of RV in punif()
In-Reply-To: <CAGgJW74aQvvOAjgqit+79+5zQ-sa2DWC3Ay94mhPa+yPxZ201g@mail.gmail.com>
References: <CAAC89xevX32DXu1tXjou-rrAa4QymrEQQjvP6Z0jOnZSDwpsOg@mail.gmail.com>
 <CAGgJW74aBVxM5JQuYsxQ5WbSFiG1TX3L+3L7KuKsOeci-_EGSg@mail.gmail.com>
 <CAAC89xcYNAhVKM-kBUZYiWrC=JHnAtK9GNftvsvWi-mS2uQ7TQ@mail.gmail.com>
 <CAGgJW74aQvvOAjgqit+79+5zQ-sa2DWC3Ay94mhPa+yPxZ201g@mail.gmail.com>
Message-ID: <CAAC89xdxsaYhb0gFqM0hJhFHtjyJVegqLhWt4V8we0DocKH0eQ@mail.gmail.com>

Yes, now it makes more sense.

Okay, I think that I am convinced and we can close this ticket.

Thanks Eric.
Regards,
Hamed.






On Tue, 23 Oct 2018 at 10:42, Eric Berger <ericjberger at gmail.com> wrote:

> Hi Hamed,
> That reference is sloppy. Try looking at
> https://en.wikipedia.org/wiki/Cumulative_distribution_function
> and in particular the first example which deals with a Unif[0,1] r.v.
>
> Best,
> Eric
>
>
> On Tue, Oct 23, 2018 at 12:35 PM Hamed Ha <hamedhaseli at gmail.com> wrote:
>
>> Hi Eric,
>>
>> Thank you for your reply.
>>
>> I should say that your justification makes sense to me.  However, I am in
>> doubt that CDF defines by the Pr(x <= X) for all X? that is the domain of
>> RV is totally ignored in the definition.
>>
>> It makes a conflict between the formula and the theoretical definition.
>>
>> Please see page 115 in
>>
>> https://books.google.co.uk/books?id=FEE8D1tRl30C&printsec=frontcover&dq=statistical+distribution&hl=en&sa=X&ved=0ahUKEwjp3PGZmJzeAhUQqxoKHV7OBJgQ6AEIKTAA#v=onepage&q=uniform&f=false
>> The
>>
>>
>> Thanks.
>> Hamed.
>>
>>
>>
>> On Tue, 23 Oct 2018 at 10:21, Eric Berger <ericjberger at gmail.com> wrote:
>>
>>> Hi Hamed,
>>> I disagree with your criticism.
>>> For a random variable X
>>> X: D - - - > R
>>> its CDF F is defined by
>>> F: R - - - > [0,1]
>>> F(z) = Prob(X <= z)
>>>
>>> The fact that you wrote a convenient formula for the CDF
>>> F(z) = (z-a)/(b-a)  a <= z <= b
>>> in a particular range for z is your decision, and as you noted this
>>> formula will give the wrong value for z outside the interval [a,b].
>>> But the problem lies in your formula, not the definition of the CDF
>>> which would be, in your case:
>>>
>>> F(z) = 0 if z <= a
>>>        = (z-a)/(b-a)   if a <= z <= b
>>>        = 1 if 1 <= z
>>>
>>> HTH,
>>> Eric
>>>
>>>
>>>
>>>
>>> On Tue, Oct 23, 2018 at 12:05 PM Hamed Ha <hamedhaseli at gmail.com> wrote:
>>>
>>>> Hi All,
>>>>
>>>> I recently discovered an interesting issue with the punif() function.
>>>> Let
>>>> X~Uiform[a,b] then the CDF is defined by F(x)=(x-a)/(b-a) for (a<= x<=
>>>> b).
>>>> The important fact here is the domain of the random variable X. Having
>>>> said
>>>> that, R returns CDF for any value in the real domain.
>>>>
>>>> I understand that one can justify this by extending the domain of X and
>>>> assigning zero probabilities to the values outside the domain. However,
>>>> theoretically, it is not true to return a value for the CDF outside the
>>>> domain. Then I propose a patch to R function punif() to return an error
>>>> in
>>>> this situations.
>>>>
>>>> Example:
>>>> > punif(10^10)
>>>> [1] 1
>>>>
>>>>
>>>> Regards,
>>>> Hamed.
>>>>
>>>>         [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>

	[[alternative HTML version deleted]]


From j@m@xuel @ending from gm@il@com  Tue Oct 23 12:12:11 2018
From: j@m@xuel @ending from gm@il@com (Joel Maxuel)
Date: Tue, 23 Oct 2018 07:12:11 -0300
Subject: [R] 
 Transformations in Tidyverse (renaming and ordering columns)
In-Reply-To: <CAA3Wa=spwURbFqBDWU_kdSRzgJRHC+p5dPFioqxYyu7SWyQr5A@mail.gmail.com>
References: <CA+O61snvxz8-Ph5RWuSbzaS47aTf__+XFb=bOT2YviHt8isASg@mail.gmail.com>
 <alpine.BSF.2.00.1810221214590.4367@pedal.dcn.davis.ca.us>
 <CA+O61s=XqesQTTH4Z2BancMG7NbZoVsmymVGFbsfjEOe3YpZ2w@mail.gmail.com>
 <27506B46-D7F6-463E-A706-1E37677EF90F@dcn.davis.ca.us>
 <CA+O61smfme2OuARz7LB7jdMmUQBkR1TqL+P3jTXXjxF-jH5AQA@mail.gmail.com>
 <CAA3Wa=spwURbFqBDWU_kdSRzgJRHC+p5dPFioqxYyu7SWyQr5A@mail.gmail.com>
Message-ID: <CA+O61s=X1hvApydac1p5HJwWLG=Ump3Y=ccc-oh6jheB7R5UAw@mail.gmail.com>

I am impressed.  Upon playing with factor, I took it a step further to
commonize (and this could very well be simpified):

>
> testset$Observation <- factor(testset$Order, levels=testset$Order,
labels=testset$Observation)
> testset$Label <- factor(testset$Seq, levels=testset$Seq,
labels=testset$Label)
>
>     testset %>% select(Observation, Label, Value) %>%
spread(key=Observation, value=Value)
# A tibble: 4 x 4
  Label      One   Two Three
  <fct>    <dbl> <dbl> <dbl>
1 Western    163   147   119
2 Northern   105   100    82
3 Eastern    121   106    90
4 Southern    74    70    65
>

All I see left now is to replace "Label" heading value with the appropriate
testset$Section value provided for the situation.  In this case...

# A tibble: 4 x 4
  For Reporting Quarter      One   Two Three
  <fct>                               <dbl> <dbl> <dbl>
...

FWIW, before sending this I cleared all formatting and dismissed the
formatting toolbar (been doing only the latter before) in the Gmail client,
which I presume will finally strip HTML from the message.

--
Cheers,
Joel Maxuel

On Mon, Oct 22, 2018 at 10:48 PM John Laing <john.laing at gmail.com> wrote:

> I don't know much about the Tidyverse, but more generally the way to
> represent ordered categorical data is with a factor. This seems to work:
>
> > testset$Observation <- factor(testset$Observation, levels=c("One",
> "Two", "Three"))
> > testset$Label <- factor(testset$Label, levels=c("Western", "Northern",
> "Eastern", "Southern"))
> > testset %>% select(Observation, Label, Value) %>%
> spread(key=Observation, value=Value)
> # A tibble: 4 x 4
>   Label      One   Two Three
>   <fct>    <dbl> <dbl> <dbl>
> 1 Western    163   147   119
> 2 Northern   105   100    82
> 3 Eastern    121   106    90
> 4 Southern    74    70    65
>
>>
>>

	[[alternative HTML version deleted]]


From ted@h@rding @ending from wl@ndre@@net  Tue Oct 23 12:41:12 2018
From: ted@h@rding @ending from wl@ndre@@net (Ted Harding)
Date: Tue, 23 Oct 2018 11:41:12 +0100
Subject: [R] Ignoring the domain of RV in punif()
In-Reply-To: <CAAC89xdxsaYhb0gFqM0hJhFHtjyJVegqLhWt4V8we0DocKH0eQ@mail.gmail.com>
References: <CAAC89xevX32DXu1tXjou-rrAa4QymrEQQjvP6Z0jOnZSDwpsOg@mail.gmail.com>
 <CAGgJW74aBVxM5JQuYsxQ5WbSFiG1TX3L+3L7KuKsOeci-_EGSg@mail.gmail.com>
 <CAAC89xcYNAhVKM-kBUZYiWrC=JHnAtK9GNftvsvWi-mS2uQ7TQ@mail.gmail.com>
 <CAGgJW74aQvvOAjgqit+79+5zQ-sa2DWC3Ay94mhPa+yPxZ201g@mail.gmail.com>
 <CAAC89xdxsaYhb0gFqM0hJhFHtjyJVegqLhWt4V8we0DocKH0eQ@mail.gmail.com>
Message-ID: <1540291272.3880.44.camel@deb2.fort.knox.uk>

Before the ticket finally enters the waste bin, I think it is
necessary to explicitly explain what is meant by the "domain"
of a random variable. This is not (though in special cases
could be) the space of possible values of the random variable.

Definition of (real-valued) Random Variable (RV):
Let Z be a probability space, i.e. a set {z} of entities z
on which a probability distribution is defined. The entities z
do not need to be numeric. A real-valued RV X is a function
X:Z --> R defined on Z such that, for any z in Z, X(z) is a
real number. The set Z, in tthis context, is (by definitipon)
the *domain* of X, i.e. the space on which X is defined.
It may or may not be (and usually is not) the same as the set
of possible values of X.

Then. given any real value x0, the CDF of X at x- is Prob[X <= X0].
The distribution function of X does not define the domain of X.

As a simple exam[ple: Suppose Q is a cube of side A, consisting of
points z=(u,v,w) with 0 <= u,v,w <= A. Z is the probability space
of points z with a uniform distribution of position within Q.
Define the random variable X:Q --> [0,1] as
  X(u,v,w) = x/A
Then X is uniformly distributed on [0,1], the domain of X is Q.
Then for x <= 0 _Prob[X <= x] = 0, for 0 <= x <= 1 Prob(X >=x] = x,
for x >= 1 Prob(X <= x] = 1. These define the CDF. The set of poaaible
values of X is 1-dimensional, and is not the same as the domain of X,
which is 3-dimensional.

Hopiong this helps!
Ted.

On Tue, 2018-10-23 at 10:54 +0100, Hamed Ha wrote:
> Yes, now it makes more sense.
> 
> Okay, I think that I am convinced and we can close this ticket.
> 
> Thanks Eric.
> Regards,
> Hamed.
> 
> On Tue, 23 Oct 2018 at 10:42, Eric Berger <ericjberger at gmail.com> wrote:
> 
> > Hi Hamed,
> > That reference is sloppy. Try looking at
> > https://en.wikipedia.org/wiki/Cumulative_distribution_function
> > and in particular the first example which deals with a Unif[0,1] r.v.
> >
> > Best,
> > Eric
> >
> >
> > On Tue, Oct 23, 2018 at 12:35 PM Hamed Ha <hamedhaseli at gmail.com> wrote:
> >
> >> Hi Eric,
> >>
> >> Thank you for your reply.
> >>
> >> I should say that your justification makes sense to me.  However, I am in
> >> doubt that CDF defines by the Pr(x <= X) for all X? that is the domain of
> >> RV is totally ignored in the definition.
> >>
> >> It makes a conflict between the formula and the theoretical definition.
> >>
> >> Please see page 115 in
> >>
> >> https://books.google.co.uk/books?id=FEE8D1tRl30C&printsec=frontcover&dq=statistical+distribution&hl=en&sa=X&ved=0ahUKEwjp3PGZmJzeAhUQqxoKHV7OBJgQ6AEIKTAA#v=onepage&q=uniform&f=false
> >> The
> >>
> >>
> >> Thanks.
> >> Hamed.
> >>
> >>
> >>
> >> On Tue, 23 Oct 2018 at 10:21, Eric Berger <ericjberger at gmail.com> wrote:
> >>
> >>> Hi Hamed,
> >>> I disagree with your criticism.
> >>> For a random variable X
> >>> X: D - - - > R
> >>> its CDF F is defined by
> >>> F: R - - - > [0,1]
> >>> F(z) = Prob(X <= z)
> >>>
> >>> The fact that you wrote a convenient formula for the CDF
> >>> F(z) = (z-a)/(b-a)  a <= z <= b
> >>> in a particular range for z is your decision, and as you noted this
> >>> formula will give the wrong value for z outside the interval [a,b].
> >>> But the problem lies in your formula, not the definition of the CDF
> >>> which would be, in your case:
> >>>
> >>> F(z) = 0 if z <= a
> >>>        = (z-a)/(b-a)   if a <= z <= b
> >>>        = 1 if 1 <= z
> >>>
> >>> HTH,
> >>> Eric
> >>>
> >>>
> >>>
> >>>
> >>> On Tue, Oct 23, 2018 at 12:05 PM Hamed Ha <hamedhaseli at gmail.com> wrote:
> >>>
> >>>> Hi All,
> >>>>
> >>>> I recently discovered an interesting issue with the punif() function.
> >>>> Let
> >>>> X~Uiform[a,b] then the CDF is defined by F(x)=(x-a)/(b-a) for (a<= x<=
> >>>> b).
> >>>> The important fact here is the domain of the random variable X. Having
> >>>> said
> >>>> that, R returns CDF for any value in the real domain.
> >>>>
> >>>> I understand that one can justify this by extending the domain of X and
> >>>> assigning zero probabilities to the values outside the domain. However,
> >>>> theoretically, it is not true to return a value for the CDF outside the
> >>>> domain. Then I propose a patch to R function punif() to return an error
> >>>> in
> >>>> this situations.
> >>>>
> >>>> Example:
> >>>> > punif(10^10)
> >>>> [1] 1
> >>>>
> >>>>
> >>>> Regards,
> >>>> Hamed.
> >>>>
> >>>>         [[alternative HTML version deleted]]
> >>>>
> >>>> ______________________________________________
> >>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>> PLEASE do read the posting guide
> >>>> http://www.R-project.org/posting-guide.html
> >>>> and provide commented, minimal, self-contained, reproducible code.
> >>>>
> >>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ted@h@rding @ending from wl@ndre@@net  Tue Oct 23 12:52:19 2018
From: ted@h@rding @ending from wl@ndre@@net (Ted Harding)
Date: Tue, 23 Oct 2018 11:52:19 +0100
Subject: [R] Ignoring the domain of RV in punif()
In-Reply-To: <1540291272.3880.44.camel@deb2.fort.knox.uk>
References: <CAAC89xevX32DXu1tXjou-rrAa4QymrEQQjvP6Z0jOnZSDwpsOg@mail.gmail.com>
 <CAGgJW74aBVxM5JQuYsxQ5WbSFiG1TX3L+3L7KuKsOeci-_EGSg@mail.gmail.com>
 <CAAC89xcYNAhVKM-kBUZYiWrC=JHnAtK9GNftvsvWi-mS2uQ7TQ@mail.gmail.com>
 <CAGgJW74aQvvOAjgqit+79+5zQ-sa2DWC3Ay94mhPa+yPxZ201g@mail.gmail.com>
 <CAAC89xdxsaYhb0gFqM0hJhFHtjyJVegqLhWt4V8we0DocKH0eQ@mail.gmail.com>
 <1540291272.3880.44.camel@deb2.fort.knox.uk>
Message-ID: <1540291939.3880.50.camel@deb2.fort.knox.uk>

Sorry -- stupid typos in my definition below!
See at ===*** below.

On Tue, 2018-10-23 at 11:41 +0100, Ted Harding wrote:
Before the ticket finally enters the waste bin, I think it is
necessary to explicitly explain what is meant by the "domain"
of a random variable. This is not (though in special cases
could be) the space of possible values of the random variable.

Definition of (real-valued) Random Variable (RV):
Let Z be a probability space, i.e. a set {z} of entities z
on which a probability distribution is defined. The entities z
do not need to be numeric. A real-valued RV X is a function
X:Z --> R defined on Z such that, for any z in Z, X(z) is a
real number. The set Z, in tthis context, is (by definitipon)
the *domain* of X, i.e. the space on which X is defined.
It may or may not be (and usually is not) the same as the set
of possible values of X.

Then. given any real value x0, the CDF of X at x- is Prob[X <= X0].
The distribution function of X does not define the domain of X.

As a simple exam[ple: Suppose Q is a cube of side A, consisting of
points z=(u,v,w) with 0 <= u,v,w <= A. Z is the probability space
of points z with a uniform distribution of position within Q.
Define the random variable X:Q --> [0,1] as
===***
  X[u,v,w) = x/A

Wrong! That should  have been:

  X[u,v,w) = w/A
===***
Then X is uniformly distributed on [0,1], the domain of X is Q.
Then for x <= 0 _Prob[X <= x] = 0, for 0 <= x <= 1 Prob(X >=x] = x,
for x >= 1 Prob(X <= x] = 1. These define the CDF. The set of poaaible
values of X is 1-dimensional, and is not the same as the domain of X,
which is 3-dimensional.

Hopiong this helps!
Ted.

On Tue, 2018-10-23 at 10:54 +0100, Hamed Ha wrote:
> > Yes, now it makes more sense.
> > 
> > Okay, I think that I am convinced and we can close this ticket.
> > 
> > Thanks Eric.
> > Regards,
> > Hamed.
> > 
> > On Tue, 23 Oct 2018 at 10:42, Eric Berger <ericjberger at gmail.com> wrote:
> > 
> > > Hi Hamed,
> > > That reference is sloppy. Try looking at
> > > https://en.wikipedia.org/wiki/Cumulative_distribution_function
> > > and in particular the first example which deals with a Unif[0,1] r.v.
> > >
> > > Best,
> > > Eric
> > >
> > >
> > > On Tue, Oct 23, 2018 at 12:35 PM Hamed Ha <hamedhaseli at gmail.com> wrote:
> > >
> > >> Hi Eric,
> > >>
> > >> Thank you for your reply.
> > >>
> > >> I should say that your justification makes sense to me.  However, I am in
> > >> doubt that CDF defines by the Pr(x <= X) for all X? that is the domain of
> > >> RV is totally ignored in the definition.
> > >>
> > >> It makes a conflict between the formula and the theoretical definition.
> > >>
> > >> Please see page 115 in
> > >>
> > >> https://books.google.co.uk/books?id=FEE8D1tRl30C&printsec=frontcover&dq=statistical+distribution&hl=en&sa=X&ved=0ahUKEwjp3PGZmJzeAhUQqxoKHV7OBJgQ6AEIKTAA#v=onepage&q=uniform&f=false
> > >> The
> > >>
> > >>
> > >> Thanks.
> > >> Hamed.
> > >>
> > >>
> > >>
> > >> On Tue, 23 Oct 2018 at 10:21, Eric Berger <ericjberger at gmail.com> wrote:
> > >>
> > >>> Hi Hamed,
> > >>> I disagree with your criticism.
> > >>> For a random variable X
> > >>> X: D - - - > R
> > >>> its CDF F is defined by
> > >>> F: R - - - > [0,1]
> > >>> F(z) = Prob(X <= z)
> > >>>
> > >>> The fact that you wrote a convenient formula for the CDF
> > >>> F(z) = (z-a)/(b-a)  a <= z <= b
> > >>> in a particular range for z is your decision, and as you noted this
> > >>> formula will give the wrong value for z outside the interval [a,b].
> > >>> But the problem lies in your formula, not the definition of the CDF
> > >>> which would be, in your case:
> > >>>
> > >>> F(z) = 0 if z <= a
> > >>>        = (z-a)/(b-a)   if a <= z <= b
> > >>>        = 1 if 1 <= z
> > >>>
> > >>> HTH,
> > >>> Eric
> > >>>
> > >>>
> > >>>
> > >>>
> > >>> On Tue, Oct 23, 2018 at 12:05 PM Hamed Ha <hamedhaseli at gmail.com> wrote:
> > >>>
> > >>>> Hi All,
> > >>>>
> > >>>> I recently discovered an interesting issue with the punif() function.
> > >>>> Let
> > >>>> X~Uiform[a,b] then the CDF is defined by F(x)=(x-a)/(b-a) for (a<= x<=
> > >>>> b).
> > >>>> The important fact here is the domain of the random variable X. Having
> > >>>> said
> > >>>> that, R returns CDF for any value in the real domain.
> > >>>>
> > >>>> I understand that one can justify this by extending the domain of X and
> > >>>> assigning zero probabilities to the values outside the domain. However,
> > >>>> theoretically, it is not true to return a value for the CDF outside the
> > >>>> domain. Then I propose a patch to R function punif() to return an error
> > >>>> in
> > >>>> this situations.
> > >>>>
> > >>>> Example:
> > >>>> > punif(10^10)
> > >>>> [1] 1
> > >>>>
> > >>>>
> > >>>> Regards,
> > >>>> Hamed.
> > >>>>
> > >>>>         [[alternative HTML version deleted]]
> > >>>>
> > >>>> ______________________________________________
> > >>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >>>> https://stat.ethz.ch/mailman/listinfo/r-help
> > >>>> PLEASE do read the posting guide
> > >>>> http://www.R-project.org/posting-guide.html
> > >>>> and provide commented, minimal, self-contained, reproducible code.
> > >>>>
> > >>>
> > 
> > 	[[alternative HTML version deleted]]
> > 
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From h@medh@@eli @ending from gm@il@com  Tue Oct 23 13:06:51 2018
From: h@medh@@eli @ending from gm@il@com (Hamed Ha)
Date: Tue, 23 Oct 2018 12:06:51 +0100
Subject: [R] Ignoring the domain of RV in punif()
In-Reply-To: <1540291939.3880.50.camel@deb2.fort.knox.uk>
References: <CAAC89xevX32DXu1tXjou-rrAa4QymrEQQjvP6Z0jOnZSDwpsOg@mail.gmail.com>
 <CAGgJW74aBVxM5JQuYsxQ5WbSFiG1TX3L+3L7KuKsOeci-_EGSg@mail.gmail.com>
 <CAAC89xcYNAhVKM-kBUZYiWrC=JHnAtK9GNftvsvWi-mS2uQ7TQ@mail.gmail.com>
 <CAGgJW74aQvvOAjgqit+79+5zQ-sa2DWC3Ay94mhPa+yPxZ201g@mail.gmail.com>
 <CAAC89xdxsaYhb0gFqM0hJhFHtjyJVegqLhWt4V8we0DocKH0eQ@mail.gmail.com>
 <1540291272.3880.44.camel@deb2.fort.knox.uk>
 <1540291939.3880.50.camel@deb2.fort.knox.uk>
Message-ID: <CAAC89xdu5JengdW+i=bGcNhBzfNd46FicXrDBbySVFmAcGtECA@mail.gmail.com>

Hi Ted,

Thanks for the explanation.

I am convinced at least more than average by Eric and your answer. But
still have some shadows of confusion that is definitely because I have
forgotten some fundamentals in probabilities.

In your cube example, the cumulative probability of reaching a point
outside the cube (u or v or w  > A) is 1 however, the bigger cube does not
exists (because the Q is the reference space). Other words, I feel that we
extend the space to accommodate any cube of any size! Looks a bit weird to
me!


Hamed.

On Tue, 23 Oct 2018 at 11:52, Ted Harding <ted.harding at wlandres.net> wrote:

> Sorry -- stupid typos in my definition below!
> See at ===*** below.
>
> On Tue, 2018-10-23 at 11:41 +0100, Ted Harding wrote:
> Before the ticket finally enters the waste bin, I think it is
> necessary to explicitly explain what is meant by the "domain"
> of a random variable. This is not (though in special cases
> could be) the space of possible values of the random variable.
>
> Definition of (real-valued) Random Variable (RV):
> Let Z be a probability space, i.e. a set {z} of entities z
> on which a probability distribution is defined. The entities z
> do not need to be numeric. A real-valued RV X is a function
> X:Z --> R defined on Z such that, for any z in Z, X(z) is a
> real number. The set Z, in tthis context, is (by definitipon)
> the *domain* of X, i.e. the space on which X is defined.
> It may or may not be (and usually is not) the same as the set
> of possible values of X.
>
> Then. given any real value x0, the CDF of X at x- is Prob[X <= X0].
> The distribution function of X does not define the domain of X.
>
> As a simple exam[ple: Suppose Q is a cube of side A, consisting of
> points z=(u,v,w) with 0 <= u,v,w <= A. Z is the probability space
> of points z with a uniform distribution of position within Q.
> Define the random variable X:Q --> [0,1] as
> ===***
>   X[u,v,w) = x/A
>
> Wrong! That should  have been:
>
>   X[u,v,w) = w/A
> ===***
> Then X is uniformly distributed on [0,1], the domain of X is Q.
> Then for x <= 0 _Prob[X <= x] = 0, for 0 <= x <= 1 Prob(X >=x] = x,
> for x >= 1 Prob(X <= x] = 1. These define the CDF. The set of poaaible
> values of X is 1-dimensional, and is not the same as the domain of X,
> which is 3-dimensional.
>
> Hopiong this helps!
> Ted.
>
> On Tue, 2018-10-23 at 10:54 +0100, Hamed Ha wrote:
> > > Yes, now it makes more sense.
> > >
> > > Okay, I think that I am convinced and we can close this ticket.
> > >
> > > Thanks Eric.
> > > Regards,
> > > Hamed.
> > >
> > > On Tue, 23 Oct 2018 at 10:42, Eric Berger <ericjberger at gmail.com>
> wrote:
> > >
> > > > Hi Hamed,
> > > > That reference is sloppy. Try looking at
> > > > https://en.wikipedia.org/wiki/Cumulative_distribution_function
> > > > and in particular the first example which deals with a Unif[0,1] r.v.
> > > >
> > > > Best,
> > > > Eric
> > > >
> > > >
> > > > On Tue, Oct 23, 2018 at 12:35 PM Hamed Ha <hamedhaseli at gmail.com>
> wrote:
> > > >
> > > >> Hi Eric,
> > > >>
> > > >> Thank you for your reply.
> > > >>
> > > >> I should say that your justification makes sense to me.  However, I
> am in
> > > >> doubt that CDF defines by the Pr(x <= X) for all X? that is the
> domain of
> > > >> RV is totally ignored in the definition.
> > > >>
> > > >> It makes a conflict between the formula and the theoretical
> definition.
> > > >>
> > > >> Please see page 115 in
> > > >>
> > > >>
> https://books.google.co.uk/books?id=FEE8D1tRl30C&printsec=frontcover&dq=statistical+distribution&hl=en&sa=X&ved=0ahUKEwjp3PGZmJzeAhUQqxoKHV7OBJgQ6AEIKTAA#v=onepage&q=uniform&f=false
> > > >> The
> > > >>
> > > >>
> > > >> Thanks.
> > > >> Hamed.
> > > >>
> > > >>
> > > >>
> > > >> On Tue, 23 Oct 2018 at 10:21, Eric Berger <ericjberger at gmail.com>
> wrote:
> > > >>
> > > >>> Hi Hamed,
> > > >>> I disagree with your criticism.
> > > >>> For a random variable X
> > > >>> X: D - - - > R
> > > >>> its CDF F is defined by
> > > >>> F: R - - - > [0,1]
> > > >>> F(z) = Prob(X <= z)
> > > >>>
> > > >>> The fact that you wrote a convenient formula for the CDF
> > > >>> F(z) = (z-a)/(b-a)  a <= z <= b
> > > >>> in a particular range for z is your decision, and as you noted this
> > > >>> formula will give the wrong value for z outside the interval [a,b].
> > > >>> But the problem lies in your formula, not the definition of the CDF
> > > >>> which would be, in your case:
> > > >>>
> > > >>> F(z) = 0 if z <= a
> > > >>>        = (z-a)/(b-a)   if a <= z <= b
> > > >>>        = 1 if 1 <= z
> > > >>>
> > > >>> HTH,
> > > >>> Eric
> > > >>>
> > > >>>
> > > >>>
> > > >>>
> > > >>> On Tue, Oct 23, 2018 at 12:05 PM Hamed Ha <hamedhaseli at gmail.com>
> wrote:
> > > >>>
> > > >>>> Hi All,
> > > >>>>
> > > >>>> I recently discovered an interesting issue with the punif()
> function.
> > > >>>> Let
> > > >>>> X~Uiform[a,b] then the CDF is defined by F(x)=(x-a)/(b-a) for
> (a<= x<=
> > > >>>> b).
> > > >>>> The important fact here is the domain of the random variable X.
> Having
> > > >>>> said
> > > >>>> that, R returns CDF for any value in the real domain.
> > > >>>>
> > > >>>> I understand that one can justify this by extending the domain of
> X and
> > > >>>> assigning zero probabilities to the values outside the domain.
> However,
> > > >>>> theoretically, it is not true to return a value for the CDF
> outside the
> > > >>>> domain. Then I propose a patch to R function punif() to return an
> error
> > > >>>> in
> > > >>>> this situations.
> > > >>>>
> > > >>>> Example:
> > > >>>> > punif(10^10)
> > > >>>> [1] 1
> > > >>>>
> > > >>>>
> > > >>>> Regards,
> > > >>>> Hamed.
> > > >>>>
> > > >>>>         [[alternative HTML version deleted]]
> > > >>>>
> > > >>>> ______________________________________________
> > > >>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > >>>> https://stat.ethz.ch/mailman/listinfo/r-help
> > > >>>> PLEASE do read the posting guide
> > > >>>> http://www.R-project.org/posting-guide.html
> > > >>>> and provide commented, minimal, self-contained, reproducible code.
> > > >>>>
> > > >>>
> > >
> > >     [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
>

	[[alternative HTML version deleted]]


From ted@h@rding @ending from wl@ndre@@net  Tue Oct 23 13:37:35 2018
From: ted@h@rding @ending from wl@ndre@@net (Ted Harding)
Date: Tue, 23 Oct 2018 12:37:35 +0100
Subject: [R] Ignoring the domain of RV in punif()
In-Reply-To: <CAAC89xdu5JengdW+i=bGcNhBzfNd46FicXrDBbySVFmAcGtECA@mail.gmail.com>
References: <CAAC89xevX32DXu1tXjou-rrAa4QymrEQQjvP6Z0jOnZSDwpsOg@mail.gmail.com>
 <CAGgJW74aBVxM5JQuYsxQ5WbSFiG1TX3L+3L7KuKsOeci-_EGSg@mail.gmail.com>
 <CAAC89xcYNAhVKM-kBUZYiWrC=JHnAtK9GNftvsvWi-mS2uQ7TQ@mail.gmail.com>
 <CAGgJW74aQvvOAjgqit+79+5zQ-sa2DWC3Ay94mhPa+yPxZ201g@mail.gmail.com>
 <CAAC89xdxsaYhb0gFqM0hJhFHtjyJVegqLhWt4V8we0DocKH0eQ@mail.gmail.com>
 <1540291272.3880.44.camel@deb2.fort.knox.uk>
 <1540291939.3880.50.camel@deb2.fort.knox.uk>
 <CAAC89xdu5JengdW+i=bGcNhBzfNd46FicXrDBbySVFmAcGtECA@mail.gmail.com>
Message-ID: <1540294655.3880.72.camel@deb2.fort.knox.uk>

Well, as a final (I hope!) clarification: It is not the case that
"the bigger cube does not exists (because the Q is the reference
space)". It does exist! Simply, the probability of the random point
being in the bigger cube, and NOT in the cube Q, is 0.

Hence "the cumulative probability of reaching a point outside the
cube (u or v or w  > A) is 1" is badly phrased. The "cumulative
probability" is not the probability of *reaching* a point, but of
being (in the case of a real random variable) less than or equal
to the given value. If Prob[X <= x1] = 1, then Prob[X > x1] = 0.
Hence if x0 is the minimum value such that Prob[X <= x0] = 1,
then X "can reach" x0. But for any x1 > x0, Prob[x0 < X <= x1] = 0.
Therefore, since X cannot be greater than x0, X *cannot reach* x1!

Best wishes,
Ted.

On Tue, 2018-10-23 at 12:06 +0100, Hamed Ha wrote:
> Hi Ted,
> 
> Thanks for the explanation.
> 
> I am convinced at least more than average by Eric and your answer. But
> still have some shadows of confusion that is definitely because I have
> forgotten some fundamentals in probabilities.
> 
> In your cube example, the cumulative probability of reaching a point
> outside the cube (u or v or w  > A) is 1 however, the bigger cube does not
> exists (because the Q is the reference space). Other words, I feel that we
> extend the space to accommodate any cube of any size! Looks a bit weird to
> me!
> 
> 
> Hamed.
> 
> On Tue, 23 Oct 2018 at 11:52, Ted Harding <ted.harding at wlandres.net> wrote:
> 
> > Sorry -- stupid typos in my definition below!
> > See at ===*** below.
> >
> > On Tue, 2018-10-23 at 11:41 +0100, Ted Harding wrote:
> > Before the ticket finally enters the waste bin, I think it is
> > necessary to explicitly explain what is meant by the "domain"
> > of a random variable. This is not (though in special cases
> > could be) the space of possible values of the random variable.
> >
> > Definition of (real-valued) Random Variable (RV):
> > Let Z be a probability space, i.e. a set {z} of entities z
> > on which a probability distribution is defined. The entities z
> > do not need to be numeric. A real-valued RV X is a function
> > X:Z --> R defined on Z such that, for any z in Z, X(z) is a
> > real number. The set Z, in tthis context, is (by definitipon)
> > the *domain* of X, i.e. the space on which X is defined.
> > It may or may not be (and usually is not) the same as the set
> > of possible values of X.
> >
> > Then. given any real value x0, the CDF of X at x- is Prob[X <= X0].
> > The distribution function of X does not define the domain of X.
> >
> > As a simple exam[ple: Suppose Q is a cube of side A, consisting of
> > points z=(u,v,w) with 0 <= u,v,w <= A. Z is the probability space
> > of points z with a uniform distribution of position within Q.
> > Define the random variable X:Q --> [0,1] as
> > ===***
> >   X[u,v,w) = x/A
> >
> > Wrong! That should  have been:
> >
> >   X[u,v,w) = w/A
> > ===***
> > Then X is uniformly distributed on [0,1], the domain of X is Q.
> > Then for x <= 0 _Prob[X <= x] = 0, for 0 <= x <= 1 Prob(X >=x] = x,
> > for x >= 1 Prob(X <= x] = 1. These define the CDF. The set of poaaible
> > values of X is 1-dimensional, and is not the same as the domain of X,
> > which is 3-dimensional.
> >
> > Hopiong this helps!
> > Ted.
> >
> > On Tue, 2018-10-23 at 10:54 +0100, Hamed Ha wrote:
> > > > Yes, now it makes more sense.
> > > >
> > > > Okay, I think that I am convinced and we can close this ticket.
> > > >
> > > > Thanks Eric.
> > > > Regards,
> > > > Hamed.
> > > >
> > > > On Tue, 23 Oct 2018 at 10:42, Eric Berger <ericjberger at gmail.com>
> > wrote:
> > > >
> > > > > Hi Hamed,
> > > > > That reference is sloppy. Try looking at
> > > > > https://en.wikipedia.org/wiki/Cumulative_distribution_function
> > > > > and in particular the first example which deals with a Unif[0,1] r.v.
> > > > >
> > > > > Best,
> > > > > Eric
> > > > >
> > > > >
> > > > > On Tue, Oct 23, 2018 at 12:35 PM Hamed Ha <hamedhaseli at gmail.com>
> > wrote:
> > > > >
> > > > >> Hi Eric,
> > > > >>
> > > > >> Thank you for your reply.
> > > > >>
> > > > >> I should say that your justification makes sense to me.  However, I
> > am in
> > > > >> doubt that CDF defines by the Pr(x <= X) for all X? that is the
> > domain of
> > > > >> RV is totally ignored in the definition.
> > > > >>
> > > > >> It makes a conflict between the formula and the theoretical
> > definition.
> > > > >>
> > > > >> Please see page 115 in
> > > > >>
> > > > >>
> > https://books.google.co.uk/books?id=FEE8D1tRl30C&printsec=frontcover&dq=statistical+distribution&hl=en&sa=X&ved=0ahUKEwjp3PGZmJzeAhUQqxoKHV7OBJgQ6AEIKTAA#v=onepage&q=uniform&f=false
> > > > >> The
> > > > >>
> > > > >>
> > > > >> Thanks.
> > > > >> Hamed.
> > > > >>
> > > > >>
> > > > >>
> > > > >> On Tue, 23 Oct 2018 at 10:21, Eric Berger <ericjberger at gmail.com>
> > wrote:
> > > > >>
> > > > >>> Hi Hamed,
> > > > >>> I disagree with your criticism.
> > > > >>> For a random variable X
> > > > >>> X: D - - - > R
> > > > >>> its CDF F is defined by
> > > > >>> F: R - - - > [0,1]
> > > > >>> F(z) = Prob(X <= z)
> > > > >>>
> > > > >>> The fact that you wrote a convenient formula for the CDF
> > > > >>> F(z) = (z-a)/(b-a)  a <= z <= b
> > > > >>> in a particular range for z is your decision, and as you noted this
> > > > >>> formula will give the wrong value for z outside the interval [a,b].
> > > > >>> But the problem lies in your formula, not the definition of the CDF
> > > > >>> which would be, in your case:
> > > > >>>
> > > > >>> F(z) = 0 if z <= a
> > > > >>>        = (z-a)/(b-a)   if a <= z <= b
> > > > >>>        = 1 if 1 <= z
> > > > >>>
> > > > >>> HTH,
> > > > >>> Eric
> > > > >>>
> > > > >>>
> > > > >>>
> > > > >>>
> > > > >>> On Tue, Oct 23, 2018 at 12:05 PM Hamed Ha <hamedhaseli at gmail.com>
> > wrote:
> > > > >>>
> > > > >>>> Hi All,
> > > > >>>>
> > > > >>>> I recently discovered an interesting issue with the punif()
> > function.
> > > > >>>> Let
> > > > >>>> X~Uiform[a,b] then the CDF is defined by F(x)=(x-a)/(b-a) for
> > (a<= x<=
> > > > >>>> b).
> > > > >>>> The important fact here is the domain of the random variable X.
> > Having
> > > > >>>> said
> > > > >>>> that, R returns CDF for any value in the real domain.
> > > > >>>>
> > > > >>>> I understand that one can justify this by extending the domain of
> > X and
> > > > >>>> assigning zero probabilities to the values outside the domain.
> > However,
> > > > >>>> theoretically, it is not true to return a value for the CDF
> > outside the
> > > > >>>> domain. Then I propose a patch to R function punif() to return an
> > error
> > > > >>>> in
> > > > >>>> this situations.
> > > > >>>>
> > > > >>>> Example:
> > > > >>>> > punif(10^10)
> > > > >>>> [1] 1
> > > > >>>>
> > > > >>>>
> > > > >>>> Regards,
> > > > >>>> Hamed.
> > > > >>>>
> > > > >>>>         [[alternative HTML version deleted]]
> > > > >>>>
> > > > >>>> ______________________________________________
> > > > >>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > > >>>> https://stat.ethz.ch/mailman/listinfo/r-help
> > > > >>>> PLEASE do read the posting guide
> > > > >>>> http://www.R-project.org/posting-guide.html
> > > > >>>> and provide commented, minimal, self-contained, reproducible code.
> > > > >>>>
> > > > >>>
> > > >
> > > >     [[alternative HTML version deleted]]
> > > >
> > > > ______________________________________________
> > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > > > and provide commented, minimal, self-contained, reproducible code.
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> >
> >
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From wdunl@p @ending from tibco@com  Tue Oct 23 22:14:30 2018
From: wdunl@p @ending from tibco@com (William Dunlap)
Date: Tue, 23 Oct 2018 13:14:30 -0700
Subject: [R] SVAR: error message
In-Reply-To: <CABcx46CqaJBcMz7-UX_qOvLOmnbw8qjQ21zUpfCaUfUZ+QyxcQ@mail.gmail.com>
References: <CABcx46CqaJBcMz7-UX_qOvLOmnbw8qjQ21zUpfCaUfUZ+QyxcQ@mail.gmail.com>
Message-ID: <CAF8bMcY5CyzUC3ei3ryp1=QLtVSvHhw5sd541BJb2DdyZTYoaA@mail.gmail.com>

The immediate problem is in svartype=="AB-model" part of SVAR:

            pos <- which(is.na(rb))
            cols <- length(pos)
            Rb <- matrix(0, nrow = Ksq, ncol = cols)
            for (i in 1:cols) Rb[pos[i], i] <- 1

Your Bmat has no NA's, so cols is 0.  Then 1:cols is c(1,0), causing
an error in the for loop when it tries to reference column 1 of a 0-column
matrix.  The code should use seq_len(cols) instead of 1:cols (or give
an error telling the user that Bmat should contain some NA's).

This is the sort of question one should send to the maintainer of the
package
that SVAR is in:
>  maintainer("vars")
[1] "Bernhard Pfaff <bernhard at pfaffikus.de>"



Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Mon, Oct 22, 2018 at 8:15 PM, John <miaojpm at gmail.com> wrote:

> Hi,
>
>   I have a bi-variate VAR model and would like to convert it to SVAR but
> get an error message. Could someone pinpoint anything wrong and correct my
> code? Thanks,
>
> John
>
>
> amat <- matrix(c(NA, 0, NA, NA), nrow = 2, ncol = 2, byrow = TRUE)
> df1<-data.frame(x=c(1,4,5,6,7,8,9,3,5,3), y=c(4,7,1,2,3,9,3,4,5,7))
> var1<-VAR(df1, type = "const", ic="BIC")
> svar2<-SVAR(x = var1, estmethod = "scoring", Amat = amat, Bmat = diag(2),
>             max.iter = 100, conv.crit = 0.1e-6, maxls = 1000)
>
> > amat <- matrix(c(NA, 0, NA, NA), nrow = 2, ncol = 2, byrow = TRUE)
> > df1<-data.frame(x=c(1,4,5,6,7,8,9,3,5,3), y=c(4,7,1,2,3,9,3,4,5,7))
> > var1<-VAR(df1, type = "const", ic="BIC")
> > svar2<-SVAR(x = var1, estmethod = "scoring", Amat = amat, Bmat = diag(2),
> +             max.iter = 100, conv.crit = 0.1e-6, maxls = 1000)
> Error in `[<-`(`*tmp*`, pos[i], i, value = 1) : subscript out of bounds
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From mi@ojpm @ending from gm@il@com  Wed Oct 24 02:55:17 2018
From: mi@ojpm @ending from gm@il@com (John)
Date: Wed, 24 Oct 2018 08:55:17 +0800
Subject: [R] SVAR: error message
In-Reply-To: <CAF8bMcY5CyzUC3ei3ryp1=QLtVSvHhw5sd541BJb2DdyZTYoaA@mail.gmail.com>
References: <CABcx46CqaJBcMz7-UX_qOvLOmnbw8qjQ21zUpfCaUfUZ+QyxcQ@mail.gmail.com>
 <CAF8bMcY5CyzUC3ei3ryp1=QLtVSvHhw5sd541BJb2DdyZTYoaA@mail.gmail.com>
Message-ID: <CABcx46DA02CEn9EA8Wps8a=4t_6+QCT1fB-SRvZ7aHFj6kFeNQ@mail.gmail.com>

If it is an A model, then should I just set B = NULL or skip the entry B?
William Dunlap <wdunlap at tibco.com> ? 2018?10?24? ?? ??4:14???

> The immediate problem is in svartype=="AB-model" part of SVAR:
>
>             pos <- which(is.na(rb))
>             cols <- length(pos)
>             Rb <- matrix(0, nrow = Ksq, ncol = cols)
>             for (i in 1:cols) Rb[pos[i], i] <- 1
>
> Your Bmat has no NA's, so cols is 0.  Then 1:cols is c(1,0), causing
> an error in the for loop when it tries to reference column 1 of a 0-column
> matrix.  The code should use seq_len(cols) instead of 1:cols (or give
> an error telling the user that Bmat should contain some NA's).
>
> This is the sort of question one should send to the maintainer of the
> package
> that SVAR is in:
> >  maintainer("vars")
> [1] "Bernhard Pfaff <bernhard at pfaffikus.de>"
>
>
>
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
>
> On Mon, Oct 22, 2018 at 8:15 PM, John <miaojpm at gmail.com> wrote:
>
>> Hi,
>>
>>   I have a bi-variate VAR model and would like to convert it to SVAR but
>> get an error message. Could someone pinpoint anything wrong and correct my
>> code? Thanks,
>>
>> John
>>
>>
>> amat <- matrix(c(NA, 0, NA, NA), nrow = 2, ncol = 2, byrow = TRUE)
>> df1<-data.frame(x=c(1,4,5,6,7,8,9,3,5,3), y=c(4,7,1,2,3,9,3,4,5,7))
>> var1<-VAR(df1, type = "const", ic="BIC")
>> svar2<-SVAR(x = var1, estmethod = "scoring", Amat = amat, Bmat = diag(2),
>>             max.iter = 100, conv.crit = 0.1e-6, maxls = 1000)
>>
>> > amat <- matrix(c(NA, 0, NA, NA), nrow = 2, ncol = 2, byrow = TRUE)
>> > df1<-data.frame(x=c(1,4,5,6,7,8,9,3,5,3), y=c(4,7,1,2,3,9,3,4,5,7))
>> > var1<-VAR(df1, type = "const", ic="BIC")
>> > svar2<-SVAR(x = var1, estmethod = "scoring", Amat = amat, Bmat =
>> diag(2),
>> +             max.iter = 100, conv.crit = 0.1e-6, maxls = 1000)
>> Error in `[<-`(`*tmp*`, pos[i], i, value = 1) : subscript out of bounds
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>

	[[alternative HTML version deleted]]


From prof@@mit@mitt@l @ending from gm@il@com  Wed Oct 24 06:11:50 2018
From: prof@@mit@mitt@l @ending from gm@il@com (Amit Mittal)
Date: Wed, 24 Oct 2018 04:11:50 +0000
Subject: [R] SVAR: error message
In-Reply-To: <CABcx46DA02CEn9EA8Wps8a=4t_6+QCT1fB-SRvZ7aHFj6kFeNQ@mail.gmail.com>
References: <CABcx46CqaJBcMz7-UX_qOvLOmnbw8qjQ21zUpfCaUfUZ+QyxcQ@mail.gmail.com>
 <CAF8bMcY5CyzUC3ei3ryp1=QLtVSvHhw5sd541BJb2DdyZTYoaA@mail.gmail.com>,
 <CABcx46DA02CEn9EA8Wps8a=4t_6+QCT1fB-SRvZ7aHFj6kFeNQ@mail.gmail.com>
Message-ID: <DM6PR01MB4107E0229E147E08C9F01D0AFCF60@DM6PR01MB4107.prod.exchangelabs.com>

I had no problem using svar ()

I think you should try the code examples in the var package PDF by the authors, the research has since been quoted successfully

------------
Amit Mittal
PhD in Finance and Accounting (tbd)
IIM Lucknow
http://ssrn.com/author=2665511
*Top 10%, downloaded author since July 2017
------------
Sent from my Outlook for Android
https://aka.ms/ghei36

________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of John <miaojpm at gmail.com>
Sent: Wednesday, October 24, 2018 6:25:17 AM
To: William Dunlap
Cc: r-help; bernhard at pfaffikus.de
Subject: Re: [R] SVAR: error message

If it is an A model, then should I just set B = NULL or skip the entry B?
William Dunlap <wdunlap at tibco.com> $B1w(B 2018$BG/(B10$B7n(B24$BF|(B $B=5;0(B $B>e8a(B4:14$BUmF;!'(B

> The immediate problem is in svartype=="AB-model" part of SVAR:
>
>             pos <- which(is.na(rb))
>             cols <- length(pos)
>             Rb <- matrix(0, nrow = Ksq, ncol = cols)
>             for (i in 1:cols) Rb[pos[i], i] <- 1
>
> Your Bmat has no NA's, so cols is 0.  Then 1:cols is c(1,0), causing
> an error in the for loop when it tries to reference column 1 of a 0-column
> matrix.  The code should use seq_len(cols) instead of 1:cols (or give
> an error telling the user that Bmat should contain some NA's).
>
> This is the sort of question one should send to the maintainer of the
> package
> that SVAR is in:
> >  maintainer("vars")
> [1] "Bernhard Pfaff <bernhard at pfaffikus.de>"
>
>
>
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
>
> On Mon, Oct 22, 2018 at 8:15 PM, John <miaojpm at gmail.com> wrote:
>
>> Hi,
>>
>>   I have a bi-variate VAR model and would like to convert it to SVAR but
>> get an error message. Could someone pinpoint anything wrong and correct my
>> code? Thanks,
>>
>> John
>>
>>
>> amat <- matrix(c(NA, 0, NA, NA), nrow = 2, ncol = 2, byrow = TRUE)
>> df1<-data.frame(x=c(1,4,5,6,7,8,9,3,5,3), y=c(4,7,1,2,3,9,3,4,5,7))
>> var1<-VAR(df1, type = "const", ic="BIC")
>> svar2<-SVAR(x = var1, estmethod = "scoring", Amat = amat, Bmat = diag(2),
>>             max.iter = 100, conv.crit = 0.1e-6, maxls = 1000)
>>
>> > amat <- matrix(c(NA, 0, NA, NA), nrow = 2, ncol = 2, byrow = TRUE)
>> > df1<-data.frame(x=c(1,4,5,6,7,8,9,3,5,3), y=c(4,7,1,2,3,9,3,4,5,7))
>> > var1<-VAR(df1, type = "const", ic="BIC")
>> > svar2<-SVAR(x = var1, estmethod = "scoring", Amat = amat, Bmat =
>> diag(2),
>> +             max.iter = 100, conv.crit = 0.1e-6, maxls = 1000)
>> Error in `[<-`(`*tmp*`, pos[i], i, value = 1) : subscript out of bounds
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From y@@@@_m@lik@ @ending from y@hoo@fr  Wed Oct 24 15:39:44 2018
From: y@@@@_m@lik@ @ending from y@hoo@fr (malika yassa)
Date: Wed, 24 Oct 2018 13:39:44 +0000 (UTC)
Subject: [R] calculate the  integral
References: <2115470251.23732799.1540388384753.ref@mail.yahoo.com>
Message-ID: <2115470251.23732799.1540388384753@mail.yahoo.com>

helloplease can anyone help me, I find it difficult to calculate this integrali have this programmx<-rnorm(10,0,1)y<-rexp(10,2)z<-exp(10,3)s<-vector()for (? j in 1:10)s[j]<-x[j+1]+x[j]s1[i]<-s[j]/2f<-function(y,u){exp(y-u)}sapply(x, function(i){
?z[j] integrate(f,lower=s1[j],upper=,s1[j+1] x=i)$value
for each value of x I will have a vectori can't calculate thisthank you in advance








	[[alternative HTML version deleted]]


From y@@@@_m@lik@ @ending from y@hoo@fr  Wed Oct 24 16:05:55 2018
From: y@@@@_m@lik@ @ending from y@hoo@fr (malika yassa)
Date: Wed, 24 Oct 2018 14:05:55 +0000 (UTC)
Subject: [R] calculate the integral
References: <1133720482.4507340.1540389955378.ref@mail.yahoo.com>
Message-ID: <1133720482.4507340.1540389955378@mail.yahoo.com>

helloplease can anyone help me, I find it difficult to calculate this integrali have this programmx<-rnorm(10,0,1)y<-rexp(10,2)z<-exp(10,3)s<-vector()for (? j in 1:10)s[j]<-x[j+1]+x[j]s1[i]<-s[j]/2f<-function(y,u){exp(y-u)}sapply(x, function(i){
?z[j] integrate(f,lower=s1[j],upper=,s1[j+1] x=i)$value
for each value of x I will have a vectori can't calculate thisthank you in advance
	[[alternative HTML version deleted]]


From bgunter@4567 @ending from gm@il@com  Wed Oct 24 16:39:13 2018
From: bgunter@4567 @ending from gm@il@com (Bert Gunter)
Date: Wed, 24 Oct 2018 07:39:13 -0700
Subject: [R] calculate the integral
In-Reply-To: <2115470251.23732799.1540388384753@mail.yahoo.com>
References: <2115470251.23732799.1540388384753.ref@mail.yahoo.com>
 <2115470251.23732799.1540388384753@mail.yahoo.com>
Message-ID: <CAGxFJbRXpKosCDSLJhfem5qDVdXCPwayAK_53mBHeG+=xNj8LA@mail.gmail.com>

Is this homework? This list has a no homework policy.

Also, please stop posting in html.

Bert Gunter


On Wed, Oct 24, 2018 at 6:40 AM malika yassa via R-help <
r-help at r-project.org> wrote:

> helloplease can anyone help me, I find it difficult to calculate this
> integrali have this
> programmx<-rnorm(10,0,1)y<-rexp(10,2)z<-exp(10,3)s<-vector()for (  j in
> 1:10)s[j]<-x[j+1]+x[j]s1[i]<-s[j]/2f<-function(y,u){exp(y-u)}sapply(x,
> function(i){
>  z[j] integrate(f,lower=s1[j],upper=,s1[j+1] x=i)$value
> for each value of x I will have a vectori can't calculate thisthank you in
> advance
>
>
>
>
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @erenbkt@ @ending from gm@il@com  Wed Oct 24 16:15:55 2018
From: @erenbkt@ @ending from gm@il@com (Aerenbkts bkts)
Date: Wed, 24 Oct 2018 16:15:55 +0200
Subject: [R] R Linux Memory Limit error for calculating dissimilarity matrix
 with Gower distance
Message-ID: <CAHxtjzBPUrXP=ygfasAHa2VrfOK-aSdYTn_hX69dVt3GCgjQFg@mail.gmail.com>

Hi all,


I am trying to cluster data file with 50K rows and 10 columns with R. Since
data contains mixed data types (nominal, continuous etc.) I am using gower
distance to create a dissimilarity matrix. But while I was creating the
matrix, I got Error: cannot allocate vector of size 4.1 Gb error. I am
using 64 bit 16 GB RAM.

1-My question is how to use all my memory for R (memory.limit does not work
for linux)?
2-Can I chunk dissimilarty matrix while I am creting it with ;

gower_dist <- daisy(i_cluster_ready,metric = "gower")

3-Can daisy function directly write to ROM to avoid error of RAM usace?


I have tried ff and bigmemory packages. Bigmemory does not work with
mixed data. and I could not figure ff function out.


Thanks for your help


Kind regards

	[[alternative HTML version deleted]]


From hugh_cre@n @ending from URMC@Roche@ter@edu  Wed Oct 24 23:35:55 2018
From: hugh_cre@n @ending from URMC@Roche@ter@edu (Crean, Hugh)
Date: Wed, 24 Oct 2018 21:35:55 +0000
Subject: [R] metafor all list elements must be square matrices
Message-ID: <1870c360ffa245b8a3fed40008605b49@exmbxsdc06.urmc-sh.rochester.edu>

This may be a very simple fix, but I am struggling to reproduce Becker's (1988) imputation of control group effect sizes for single group trials.  For some reason that I cannot figure out, I am getting an "All list elements in 'V' must be square matrices".  Below is my V matrix, which I believe is square:

Study1

Study2

Study3

Study4

Study5

Study6

Study7

Study8

0.118

0

0

0

0

0.010465

0.010465

0.010465

0

0.121

0

0

0

0.010465

0.010465

0.010465

0

0

0.404

0

0

0.010465

0.010465

0.010465

0

0

0

0.146

0

0.010465

0.010465

0.010465

0

0

0

0

0.09

0.010465

0.010465

0.010465

0.010465

0.010465

0.010465

0.010465

0.010465

0.104465

0.010465

0.010465

0.010465

0.010465

0.010465

0.010465

0.010465

0.010465

0.085465

0.010465

0.010465

0.010465

0.010465

0.010465

0.010465

0.010465

0.010465

0.069465


I get the error running as a multivariate rma.  If I run as a simple rma, I get a non-positive sampling variances error message (but the correlations are all at least between 0 and 1).

Any help is greatly appreciated.

Hugh

Hugh F. Crean, Ph.D.
Assistant Professor of Clinical Nursing
2W.156 Helen Wood Hall
School of Nursing
University of Rochester
601 Elmwood Avenue
Rochester, New York  14620

(585) 276-5575



	[[alternative HTML version deleted]]


From l@ngchen @ending from u@bmc@edu  Thu Oct 25 01:39:49 2018
From: l@ngchen @ending from u@bmc@edu (Chen, Lang)
Date: Wed, 24 Oct 2018 23:39:49 +0000
Subject: [R] Random Forest prediction all NA
Message-ID: <754E446826FC164A9FFE0BAC514400D24DFA742B@MSGHM5A13.ad.hs.uab.edu>

Dear R user,
I try randomForest and had an issue for the prediction. The training and test data from two separate csv file. However I end with all NA or prediction.

Y is the continuouse variable, X variables are factors, continuous variables, variables with numeric 0/1 indication Y/N (not coverted to factor),  and calendar year.
> haq.pred<-predict(x.rfc, x.2)
> summary(haq.pred)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's
     NA      NA      NA     NaN      NA      NA  437990
R version 3.5.1 (2018-07-02)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1
randomForest_4.6-14.




Lang Chen
Center for Education & Research on Therapeutics of Musculoskeletal Disorders (CERTS)
Clinical Immunology and Rheumatology
Dept. of Medicine
Universtiy of Alabama at Birmingham
Mail: 1720 Second Ave. South
FOT 802C,
Birmingham AL 35294
510 20th St S
FOT 802C,
Birmingham AL 35294
205-975-7473 (O)


	[[alternative HTML version deleted]]


From li@t@ @ending from dewey@myzen@co@uk  Thu Oct 25 10:33:01 2018
From: li@t@ @ending from dewey@myzen@co@uk (Michael Dewey)
Date: Thu, 25 Oct 2018 09:33:01 +0100
Subject: [R] metafor all list elements must be square matrices
In-Reply-To: <1870c360ffa245b8a3fed40008605b49@exmbxsdc06.urmc-sh.rochester.edu>
References: <1870c360ffa245b8a3fed40008605b49@exmbxsdc06.urmc-sh.rochester.edu>
Message-ID: <e5d3608c-b402-f7c4-e326-ec4a782e4e4f@dewey.myzen.co.uk>

Dear Hugh

1 - Your post is unreadable because you posted in HTML so it will be 
very difficult for anyone to see your V

2 - there is a separate mailing list for meta-analysis in R where you 
may get more helpful responses as it is monitored by authors of most of 
the main packages. Please see 
https://stat.ethz.ch/mailman/listinfo/r-sig-meta-analysis// and remember 
to register first.

Michael


On 24/10/2018 22:35, Crean, Hugh wrote:
> This may be a very simple fix, but I am struggling to reproduce Becker's (1988) imputation of control group effect sizes for single group trials.  For some reason that I cannot figure out, I am getting an "All list elements in 'V' must be square matrices".  Below is my V matrix, which I believe is square:
> 
> Study1
> 
> Study2
> 
> Study3
> 
> Study4
> 
> Study5
> 
> Study6
> 
> Study7
> 
> Study8
> 
> 0.118
> 
> 0
> 
> 0
> 
> 0
> 
> 0
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0
> 
> 0.121
> 
> 0
> 
> 0
> 
> 0
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0
> 
> 0
> 
> 0.404
> 
> 0
> 
> 0
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0
> 
> 0
> 
> 0
> 
> 0.146
> 
> 0
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0
> 
> 0
> 
> 0
> 
> 0
> 
> 0.09
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.104465
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.085465
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.069465
> 
> 
> I get the error running as a multivariate rma.  If I run as a simple rma, I get a non-positive sampling variances error message (but the correlations are all at least between 0 and 1).
> 
> Any help is greatly appreciated.
> 
> Hugh
> 
> Hugh F. Crean, Ph.D.
> Assistant Professor of Clinical Nursing
> 2W.156 Helen Wood Hall
> School of Nursing
> University of Rochester
> 601 Elmwood Avenue
> Rochester, New York  14620
> 
> (585) 276-5575
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From ch@l@bi@el@he @ending from y@hoo@de  Thu Oct 25 11:24:07 2018
From: ch@l@bi@el@he @ending from y@hoo@de (Elahe chalabi)
Date: Thu, 25 Oct 2018 09:24:07 +0000 (UTC)
Subject: [R] findAssocs Heatmap in R
References: <1982117970.24489449.1540459447586.ref@mail.yahoo.com>
Message-ID: <1982117970.24489449.1540459447586@mail.yahoo.com>

Hi all,


I have a document term matrix and I would like to have a heatmap (geom_tile) for 20 most associated words to a specific word in it. Here is my dtm:


?corpus=Corpus(VectorSource(data$Message))
?corpus=tm_map(corpus,tolower)
corpus=tm_map(corpus,removePunctuation)
corpus=tm_map(corpus,removeWords,c(stopwords("english")))
corpus=tm_map(corpus,stemDocument,"english")
frequencies=DocumentTermMatrix(corpus)
frequencies=removeSparseTerms(frequencies,0.995)
frequencies
<<DocumentTermMatrix (documents: 16630, terms: 399)>>
Non-/sparse entries: 118557/6516813
Sparsity? ? ? ? ? ?: 98%
Maximal term length: 43
Weighting? ? ? ? ? : term frequency (tf)

and the word I'm looking for the 20 most associated words in dtm for it:

word=c("problem")
corr <- c(0.7, 0.75, 0.1)
my_assocs <- findAssocs(frequencies, word,corr)

my problem is in ggplot line containing only 20 most associated words. How should I bring these to ggplot?

Thanks for any help.
Elahe


From rhelp @ending from krueger-f@mily@de  Thu Oct 25 16:06:52 2018
From: rhelp @ending from krueger-f@mily@de (Knut Krueger)
Date: Thu, 25 Oct 2018 16:06:52 +0200
Subject: [R] "logical indexing,
 " [was] match() question or needle haystack problem for a data.frame
In-Reply-To: <CAGxFJbS7vgQQK8t-X_z==on+jzYtDMmroCv3hPM6HWyU0Uq7Jw@mail.gmail.com>
References: <cac83a2c-2edd-e0e9-8b54-96afd48d401d@krueger-family.de>
 <CAGxFJbQrCaH6jLzMU60dx-U7m3oNT-zt1FhUOmcaOb-8njrp2w@mail.gmail.com>
 <CAGgJW74Tebw5CNDGVSf32bF7cMwkM3z=qi++8-SUPFYOHynYGQ@mail.gmail.com>
 <6ebcd80a-1786-34bb-d852-d05bfa24c9bc@krueger-family.de>
 <CAGxFJbS7vgQQK8t-X_z==on+jzYtDMmroCv3hPM6HWyU0Uq7Jw@mail.gmail.com>
Message-ID: <35998e7b-b02b-9993-5b61-fb20978a39f4@krueger-family.de>

Hi Bert,
another question for indexing
1. is there a good manual  for indexing

2.  is it possible to get !%in%
f.e
x =data.frame("A"=c(1:5),"C"=c("A","B","C","D","E"))
y =data.frame("B"=c(1,3,5))
test = x[x$A %in% y$B,]
test = x[x$A %in% y$B,]

test
A C
1 1 A
3 3 C
5 5 E


means: the result where I am looking for is:
test
A C
2 2 B
4 4 D

no problem with a loop but in a short way I do not find a solution

Kind Regards Knut


From pd@lgd @ending from gm@il@com  Thu Oct 25 16:13:54 2018
From: pd@lgd @ending from gm@il@com (peter dalgaard)
Date: Thu, 25 Oct 2018 16:13:54 +0200
Subject: [R] "logical indexing,
 " [was] match() question or needle haystack problem for a data.frame
In-Reply-To: <35998e7b-b02b-9993-5b61-fb20978a39f4@krueger-family.de>
References: <cac83a2c-2edd-e0e9-8b54-96afd48d401d@krueger-family.de>
 <CAGxFJbQrCaH6jLzMU60dx-U7m3oNT-zt1FhUOmcaOb-8njrp2w@mail.gmail.com>
 <CAGgJW74Tebw5CNDGVSf32bF7cMwkM3z=qi++8-SUPFYOHynYGQ@mail.gmail.com>
 <6ebcd80a-1786-34bb-d852-d05bfa24c9bc@krueger-family.de>
 <CAGxFJbS7vgQQK8t-X_z==on+jzYtDMmroCv3hPM6HWyU0Uq7Jw@mail.gmail.com>
 <35998e7b-b02b-9993-5b61-fb20978a39f4@krueger-family.de>
Message-ID: <410772ED-27FA-427D-BA16-83205608EDE2@gmail.com>



> On 25 Oct 2018, at 16:06 , Knut Krueger <rhelp at krueger-family.de> wrote:
> 
> Hi Bert,
> another question for indexing
> 1. is there a good manual  for indexing

?Extract is at least authoritative....

> 
> 2.  is it possible to get !%in%
> f.e


Yes: x[!(x$A %in% y$B),]

-pd

> x =data.frame("A"=c(1:5),"C"=c("A","B","C","D","E"))
> y =data.frame("B"=c(1,3,5))
> test = x[x$A %in% y$B,]
> test = x[x$A %in% y$B,]
> 
> test
> A C
> 1 1 A
> 3 3 C
> 5 5 E
> 
> 
> means: the result where I am looking for is:
> test
> A C
> 2 2 B
> 4 4 D
> 
> no problem with a loop but in a short way I do not find a solution
> 
> Kind Regards Knut
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From ruipb@rr@d@@ @ending from @@po@pt  Thu Oct 25 16:17:44 2018
From: ruipb@rr@d@@ @ending from @@po@pt (Rui Barradas)
Date: Thu, 25 Oct 2018 15:17:44 +0100
Subject: [R] "logical indexing,
 " [was] match() question or needle haystack problem for a data.frame
In-Reply-To: <35998e7b-b02b-9993-5b61-fb20978a39f4@krueger-family.de>
References: <cac83a2c-2edd-e0e9-8b54-96afd48d401d@krueger-family.de>
 <CAGxFJbQrCaH6jLzMU60dx-U7m3oNT-zt1FhUOmcaOb-8njrp2w@mail.gmail.com>
 <CAGgJW74Tebw5CNDGVSf32bF7cMwkM3z=qi++8-SUPFYOHynYGQ@mail.gmail.com>
 <6ebcd80a-1786-34bb-d852-d05bfa24c9bc@krueger-family.de>
 <CAGxFJbS7vgQQK8t-X_z==on+jzYtDMmroCv3hPM6HWyU0Uq7Jw@mail.gmail.com>
 <35998e7b-b02b-9993-5b61-fb20978a39f4@krueger-family.de>
Message-ID: <788781d6-a803-4cf6-b551-387881c268f9@sapo.pt>

Hello,

2. x[!x$A %in% y$B, ]

1.
An Introduction to R, file R-into.pdf in your docs folder.
http://www.cookbook-r.com/Basics/Indexing_into_a_data_structure/


Hope this helps,

Rui Barradas

?s 15:06 de 25/10/2018, Knut Krueger escreveu:
> Hi Bert,
> another question for indexing
> 1. is there a good manual? for indexing
> 
> 2.? is it possible to get !%in%
> f.e
> x =data.frame("A"=c(1:5),"C"=c("A","B","C","D","E"))
> y =data.frame("B"=c(1,3,5))
> test = x[x$A %in% y$B,]
> test = x[x$A %in% y$B,]
> 
> test
> A C
> 1 1 A
> 3 3 C
> 5 5 E
> 
> 
> means: the result where I am looking for is:
> test
> A C
> 2 2 B
> 4 4 D
> 
> no problem with a loop but in a short way I do not find a solution
> 
> Kind Regards Knut
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From e@@wiek @ending from gm@il@com  Fri Oct 26 03:04:09 2018
From: e@@wiek @ending from gm@il@com (Ek Esawi)
Date: Thu, 25 Oct 2018 21:04:09 -0400
Subject: [R] remove text from nested list
Message-ID: <CA+ZkTxtwyZ+jJq+NRGWq_gE-tL1GVojTWxxej69z1r+NTEzk0w@mail.gmail.com>

Hi All?

I have a list that contains multiple sub-lists and each sub-list
contains multiple  sub(sub-lists), each of the sub(sub-lists) is made
up of matrices of text. I want to replace some of the text in some
parts in the matrices on the list. I tried gsub and stringr,
str_remove, but nothing seems to work

I tried:

lapply(mylist, function(x) lapply(x, function(y)
gsub("[0-9][0-9]/[0-9[0-9].*com","",y)))
lapply(mylist, function(x) str_remove(x,"[0-9][0-9]/[0-9[0-9].*com"))

Any help is greatly apprercaited.



mylist?this is just an example

[[1]]
[[1]][[1]]
[[1]][[1]][[1]]
[,1]  [,2]  [,3]  [,4] [,5]
[1,] "12/30 12/30"  "ABABABABABAB"  "8.00"
[2,] "01/02 01/02"  "AAAAAAAAAAAA?.   ?99"
[3,] "01/02 01/02"  "CACACACACACC? "55.97"

[[1]][[1]][[2]]
[,1]  [,2]
[1,] "12/30 12/30" "DDDDDDDDDDDDDDD? ?29"
[2,] "12/30 12/30"  :GGGGGGGGGGGGGGG? ?333?

[[1]][[2]]
[[1]][[2]][[1]]
[,1]  [,2]  [,3] [,4]  [,5]
[1,]  "01/02 01/02" "ThankYou" ?23?
[2,] "01/02 01/02"  "Standard data"  "251"


From peter@l@ngfelder @ending from gm@il@com  Fri Oct 26 03:18:02 2018
From: peter@l@ngfelder @ending from gm@il@com (Peter Langfelder)
Date: Thu, 25 Oct 2018 18:18:02 -0700
Subject: [R] remove text from nested list
In-Reply-To: <CA+ZkTxtwyZ+jJq+NRGWq_gE-tL1GVojTWxxej69z1r+NTEzk0w@mail.gmail.com>
References: <CA+ZkTxtwyZ+jJq+NRGWq_gE-tL1GVojTWxxej69z1r+NTEzk0w@mail.gmail.com>
Message-ID: <CA+hbrhX=783+cEPper7kP7kgnAohOgDAHeJOgcxVmEuNfFVHKA@mail.gmail.com>

You should be more specific about what you want to replace and with
what. The pattern you use, namely "[0-9][0-9]/[0-9[0-9].*com", does
not (AFAICS) match any of the strings in your data, so don't be
surprised that your commands do not change anything.

If you have a correct pattern and replacement and all lists have depth
3, using something like

lapply(mylist, lapply, lapply, function(y) gsub(pattern, replacement, y))

should work. If your list has a variable depth, I would use a
recursive function, something like

recursiveGSub = function(x, pattern, replacement)
{
  if (is.atomic(x)) gsub(pattern, replacement, x) else lapply(x,
recursiveGSub, pattern, replacement)
}

Example:

lst = list("a001", list("b001", list("c001", "d001")))

lst
recursiveGSub(lst, "00", "")


HTH,

Peter
On Thu, Oct 25, 2018 at 6:04 PM Ek Esawi <esawiek at gmail.com> wrote:
>
> Hi All?
>
> I have a list that contains multiple sub-lists and each sub-list
> contains multiple  sub(sub-lists), each of the sub(sub-lists) is made
> up of matrices of text. I want to replace some of the text in some
> parts in the matrices on the list. I tried gsub and stringr,
> str_remove, but nothing seems to work
>
> I tried:
>
> lapply(mylist, function(x) lapply(x, function(y)
> gsub("[0-9][0-9]/[0-9[0-9].*com","",y)))
> lapply(mylist, function(x) str_remove(x,"[0-9][0-9]/[0-9[0-9].*com"))
>
> Any help is greatly apprercaited.
>
>
>
> mylist?this is just an example
>
> [[1]]
> [[1]][[1]]
> [[1]][[1]][[1]]
> [,1]  [,2]  [,3]  [,4] [,5]
> [1,] "12/30 12/30"  "ABABABABABAB"  "8.00"
> [2,] "01/02 01/02"  "AAAAAAAAAAAA?.   ?99"
> [3,] "01/02 01/02"  "CACACACACACC? "55.97"
>
> [[1]][[1]][[2]]
> [,1]  [,2]
> [1,] "12/30 12/30" "DDDDDDDDDDDDDDD? ?29"
> [2,] "12/30 12/30"  :GGGGGGGGGGGGGGG? ?333?
>
> [[1]][[2]]
> [[1]][[2]][[1]]
> [,1]  [,2]  [,3] [,4]  [,5]
> [1,]  "01/02 01/02" "ThankYou" ?23?
> [2,] "01/02 01/02"  "Standard data"  "251"
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @ending from gm@il@com  Fri Oct 26 03:33:56 2018
From: bgunter@4567 @ending from gm@il@com (Bert Gunter)
Date: Thu, 25 Oct 2018 18:33:56 -0700
Subject: [R] remove text from nested list
In-Reply-To: <CA+ZkTxtwyZ+jJq+NRGWq_gE-tL1GVojTWxxej69z1r+NTEzk0w@mail.gmail.com>
References: <CA+ZkTxtwyZ+jJq+NRGWq_gE-tL1GVojTWxxej69z1r+NTEzk0w@mail.gmail.com>
Message-ID: <CAGxFJbQi=djaHxP_cDHnSMjBHdugZpqy2UaoqYzWRG5z0oMvqw@mail.gmail.com>

1. Please learn how to use dput() to provide examples to responders.
There's not much we can do with a text printout (at least without some work
that I don't care to do).

2. Do you know what mylist[[c(1,2,1)]] means? If not, read ?(Extract) and
note in particular:
"[[ can be applied recursively to lists, so that if the single index i is a
vector of length p, alist[[i]] is equivalent to alist[[i1]]...[[ip]] providing
all but the final indexing results in a list."

As your intent is unclear -- no reproducible example showing the desired
result -- I would suggest just using list indexing to access the matrices
you wish to change. But maybe this does not satisfy your vague request.

Also, something seems screwy in the example you showed: For example, the
[[1]][[2]][[1]] component indicates a 2 x 5 matrix, but I see only 3
columns of text. Am I missing something?

Cheers,
Bert



On Thu, Oct 25, 2018 at 6:04 PM Ek Esawi <esawiek at gmail.com> wrote:

> Hi All?
>
> I have a list that contains multiple sub-lists and each sub-list
> contains multiple  sub(sub-lists), each of the sub(sub-lists) is made
> up of matrices of text. I want to replace some of the text in some
> parts in the matrices on the list. I tried gsub and stringr,
> str_remove, but nothing seems to work
>
> I tried:
>
> lapply(mylist, function(x) lapply(x, function(y)
> gsub("[0-9][0-9]/[0-9[0-9].*com","",y)))
> lapply(mylist, function(x) str_remove(x,"[0-9][0-9]/[0-9[0-9].*com"))
>
> Any help is greatly apprercaited.
>
>
>
> mylist?this is just an example
>
> [[1]]
> [[1]][[1]]
> [[1]][[1]][[1]]
> [,1]  [,2]  [,3]  [,4] [,5]
> [1,] "12/30 12/30"  "ABABABABABAB"  "8.00"
> [2,] "01/02 01/02"  "AAAAAAAAAAAA?.   ?99"
> [3,] "01/02 01/02"  "CACACACACACC? "55.97"
>
> [[1]][[1]][[2]]
> [,1]  [,2]
> [1,] "12/30 12/30" "DDDDDDDDDDDDDDD? ?29"
> [2,] "12/30 12/30"  :GGGGGGGGGGGGGGG? ?333?
>
> [[1]][[2]]
> [[1]][[2]][[1]]
> [,1]  [,2]  [,3] [,4]  [,5]
> [1,]  "01/02 01/02" "ThankYou" ?23?
> [2,] "01/02 01/02"  "Standard data"  "251"
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From wdunl@p @ending from tibco@com  Fri Oct 26 05:10:44 2018
From: wdunl@p @ending from tibco@com (William Dunlap)
Date: Thu, 25 Oct 2018 20:10:44 -0700
Subject: [R] remove text from nested list
In-Reply-To: <CA+ZkTxtwyZ+jJq+NRGWq_gE-tL1GVojTWxxej69z1r+NTEzk0w@mail.gmail.com>
References: <CA+ZkTxtwyZ+jJq+NRGWq_gE-tL1GVojTWxxej69z1r+NTEzk0w@mail.gmail.com>
Message-ID: <CAF8bMcZsadc-rhdVqU1sBGQOjztCswU7fzASRRnkrPw+pO9dxA@mail.gmail.com>

If your matrices are at various depths in the list, try rapply().  E.g.,

>  L <- list( A = list( a1 = matrix(c("AAA","AB", "AAB","AC"),2,2),
a2=c("AAx")), list(B = c("AAb1AAA","AAb2")))
> str(L)
List of 2
 $ A:List of 2
  ..$ a1: chr [1:2, 1:2] "AAA" "AB" "AAB" "AC"
  ..$ a2: chr "AAx"
 $  :List of 1
  ..$ B: chr [1:2] "AAb1AAA" "AAb2"
> str(rapply(L, function(x)gsub("A+", "-", x), how="replace"))
List of 2
 $ A:List of 2
  ..$ a1: chr [1:2, 1:2] "-" "-B" "-B" "-C"
  ..$ a2: chr "-x"
 $  :List of 1
  ..$ B: chr [1:2] "-b1-" "-b2"
> # only apply f to matrices in the list:
> str(rapply(L, function(x)gsub("A+", "-", x), classes="matrix",
how="replace"))
List of 2
 $ A:List of 2
  ..$ a1: chr [1:2, 1:2] "-" "-B" "-B" "-C"
  ..$ a2: chr "AAx"
 $  :List of 1
  ..$ B: chr [1:2] "AAb1AAA" "AAb2"


Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Thu, Oct 25, 2018 at 6:04 PM, Ek Esawi <esawiek at gmail.com> wrote:

> Hi All?
>
> I have a list that contains multiple sub-lists and each sub-list
> contains multiple  sub(sub-lists), each of the sub(sub-lists) is made
> up of matrices of text. I want to replace some of the text in some
> parts in the matrices on the list. I tried gsub and stringr,
> str_remove, but nothing seems to work
>
> I tried:
>
> lapply(mylist, function(x) lapply(x, function(y)
> gsub("[0-9][0-9]/[0-9[0-9].*com","",y)))
> lapply(mylist, function(x) str_remove(x,"[0-9][0-9]/[0-9[0-9].*com"))
>
> Any help is greatly apprercaited.
>
>
>
> mylist?this is just an example
>
> [[1]]
> [[1]][[1]]
> [[1]][[1]][[1]]
> [,1]  [,2]  [,3]  [,4] [,5]
> [1,] "12/30 12/30"  "ABABABABABAB"  "8.00"
> [2,] "01/02 01/02"  "AAAAAAAAAAAA?.   ?99"
> [3,] "01/02 01/02"  "CACACACACACC? "55.97"
>
> [[1]][[1]][[2]]
> [,1]  [,2]
> [1,] "12/30 12/30" "DDDDDDDDDDDDDDD? ?29"
> [2,] "12/30 12/30"  :GGGGGGGGGGGGGGG? ?333?
>
> [[1]][[2]]
> [[1]][[2]][[1]]
> [,1]  [,2]  [,3] [,4]  [,5]
> [1,]  "01/02 01/02" "ThankYou" ?23?
> [2,] "01/02 01/02"  "Standard data"  "251"
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From e@@wiek @ending from gm@il@com  Fri Oct 26 05:24:00 2018
From: e@@wiek @ending from gm@il@com (Ek Esawi)
Date: Thu, 25 Oct 2018 23:24:00 -0400
Subject: [R] remove text from nested list
In-Reply-To: <CAGxFJbQi=djaHxP_cDHnSMjBHdugZpqy2UaoqYzWRG5z0oMvqw@mail.gmail.com>
References: <CA+ZkTxtwyZ+jJq+NRGWq_gE-tL1GVojTWxxej69z1r+NTEzk0w@mail.gmail.com>
 <CAGxFJbQi=djaHxP_cDHnSMjBHdugZpqy2UaoqYzWRG5z0oMvqw@mail.gmail.com>
Message-ID: <CA+ZkTxs=Q6-FEKQQa2o-8WCG4Q9z1huexW=d56ZWzWLmkuVkfg@mail.gmail.com>

Thank you Bert and Peter. My apology for posting poor code. I cannot
create a reproducible example of my data, but i hope the list indices
as shown below helps you understand my question.. My regex pattern on
my previous post works correctly because i tested it on a few sublists
and it worked, but did not work for the all lists.
I tend to think a set of lapply and one apply function will work, but
not sure how to do that.

i tried, but obviously i don't understand nested apply functions.

> lapply(mylsit, function(x) gsub(pattern,"",x))
> lapply(mylist, function(x) lapply (x, function(y)  gsub(mypattern,"",y)))
> lappqaly(mylist, function(x) lapply (x, function(y) apply(y,2,gsub(mypattern,"",y))))


[[1]]

[[1]][[1]]
[[1]][[1]][[1]]
[[1]][[1]][[2]]
[[1]][[1]][[3]]

[[1]][[2]]
[[1]][[2]][[1]]
[[1]][[2]][[2]]

[[1]][[3]]
[[1]][[3]][[1]]
[[1]][[3]][[2]]

[[1]][[4]]
[[1]][[4]][[1]]
[[1]][[4]][[2]]
[[1]][[4]][[3]]
[[1]][[4]][[4]]
[[1]][[4]][[5]]

[[1]][[5]]
[[1]][[5]][[1]]
[[1]][[5]][[2]]
[[1]][[5]][[3]]
[[1]][[5]][[4]]

[[1]][[6]]
[[1]][[6]][[1]]
[[1]][[6]][[2]]
[[1]][[6]][[3]]

[[1]][[7]]
[[1]][[7]][[1]]
[[1]][[7]][[2]]
[[1]][[7]][[3]]

[[1]][[8]]
[[1]][[8]][[1]]
[[1]][[8]][[3]]
On Thu, Oct 25, 2018 at 9:34 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>
> 1. Please learn how to use dput() to provide examples to responders. There's not much we can do with a text printout (at least without some work that I don't care to do).
>
> 2. Do you know what mylist[[c(1,2,1)]] means? If not, read ?(Extract) and note in particular:
> "[[ can be applied recursively to lists, so that if the single index i is a vector of length p, alist[[i]] is equivalent to alist[[i1]]...[[ip]] providing all but the final indexing results in a list."
>
> As your intent is unclear -- no reproducible example showing the desired result -- I would suggest just using list indexing to access the matrices you wish to change. But maybe this does not satisfy your vague request.
>
> Also, something seems screwy in the example you showed: For example, the [[1]][[2]][[1]] component indicates a 2 x 5 matrix, but I see only 3 columns of text. Am I missing something?
>
> Cheers,
> Bert
>
>
>
> On Thu, Oct 25, 2018 at 6:04 PM Ek Esawi <esawiek at gmail.com> wrote:
>>
>> Hi All?
>>
>> I have a list that contains multiple sub-lists and each sub-list
>> contains multiple  sub(sub-lists), each of the sub(sub-lists) is made
>> up of matrices of text. I want to replace some of the text in some
>> parts in the matrices on the list. I tried gsub and stringr,
>> str_remove, but nothing seems to work
>>
>> I tried:
>>
>> lapply(mylist, function(x) lapply(x, function(y)
>> gsub("[0-9][0-9]/[0-9[0-9].*com","",y)))
>> lapply(mylist, function(x) str_remove(x,"[0-9][0-9]/[0-9[0-9].*com"))
>>
>> Any help is greatly apprercaited.
>>
>>
>>
>> mylist?this is just an example
>>
>> [[1]]
>> [[1]][[1]]
>> [[1]][[1]][[1]]
>> [,1]  [,2]  [,3]  [,4] [,5]
>> [1,] "12/30 12/30"  "ABABABABABAB"  "8.00"
>> [2,] "01/02 01/02"  "AAAAAAAAAAAA?.   ?99"
>> [3,] "01/02 01/02"  "CACACACACACC? "55.97"
>>
>> [[1]][[1]][[2]]
>> [,1]  [,2]
>> [1,] "12/30 12/30" "DDDDDDDDDDDDDDD? ?29"
>> [2,] "12/30 12/30"  :GGGGGGGGGGGGGGG? ?333?
>>
>> [[1]][[2]]
>> [[1]][[2]][[1]]
>> [,1]  [,2]  [,3] [,4]  [,5]
>> [1,]  "01/02 01/02" "ThankYou" ?23?
>> [2,] "01/02 01/02"  "Standard data"  "251"
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From rhelp @ending from krueger-f@mily@de  Fri Oct 26 08:28:34 2018
From: rhelp @ending from krueger-f@mily@de (Knut Krueger)
Date: Fri, 26 Oct 2018 08:28:34 +0200
Subject: [R] "logical indexing,
 " [was] match() question or needle haystack problem for a data.frame
In-Reply-To: <410772ED-27FA-427D-BA16-83205608EDE2@gmail.com>
References: <cac83a2c-2edd-e0e9-8b54-96afd48d401d@krueger-family.de>
 <CAGxFJbQrCaH6jLzMU60dx-U7m3oNT-zt1FhUOmcaOb-8njrp2w@mail.gmail.com>
 <CAGgJW74Tebw5CNDGVSf32bF7cMwkM3z=qi++8-SUPFYOHynYGQ@mail.gmail.com>
 <6ebcd80a-1786-34bb-d852-d05bfa24c9bc@krueger-family.de>
 <CAGxFJbS7vgQQK8t-X_z==on+jzYtDMmroCv3hPM6HWyU0Uq7Jw@mail.gmail.com>
 <35998e7b-b02b-9993-5b61-fb20978a39f4@krueger-family.de>
 <410772ED-27FA-427D-BA16-83205608EDE2@gmail.com>
Message-ID: <3ae8b56c-b807-3491-9671-55b5e07c4230@krueger-family.de>

Am 25.10.18 um 16:13 schrieb peter dalgaard:
> 
>
> Yes: x[!(x$A %in% y$B),]

Ok thats in my opinion a little workaround
why?:

There is an
= and !=
< and >


means the opposite is available between terms.

why is there f.e no %!in%, %notin%  or !%in%

This would be more intuitive.

Kind regards Knut


From jfox @ending from mcm@@ter@c@  Fri Oct 26 14:25:48 2018
From: jfox @ending from mcm@@ter@c@ (Fox, John)
Date: Fri, 26 Oct 2018 12:25:48 +0000
Subject: [R] "logical indexing,
 " [was] match() question or needle haystack problem for a data.frame
In-Reply-To: <8584_1540535329_w9Q6Smb5025558_3ae8b56c-b807-3491-9671-55b5e07c4230@krueger-family.de>
References: <cac83a2c-2edd-e0e9-8b54-96afd48d401d@krueger-family.de>
 <CAGxFJbQrCaH6jLzMU60dx-U7m3oNT-zt1FhUOmcaOb-8njrp2w@mail.gmail.com>
 <CAGgJW74Tebw5CNDGVSf32bF7cMwkM3z=qi++8-SUPFYOHynYGQ@mail.gmail.com>
 <6ebcd80a-1786-34bb-d852-d05bfa24c9bc@krueger-family.de>
 <CAGxFJbS7vgQQK8t-X_z==on+jzYtDMmroCv3hPM6HWyU0Uq7Jw@mail.gmail.com>
 <35998e7b-b02b-9993-5b61-fb20978a39f4@krueger-family.de>
 <410772ED-27FA-427D-BA16-83205608EDE2@gmail.com>
 <8584_1540535329_w9Q6Smb5025558_3ae8b56c-b807-3491-9671-55b5e07c4230@krueger-family.de>
Message-ID: <ACD1644AA6C67E4FBD0C350625508EC83690FEF8@FHSDB2D11-2.csu.mcmaster.ca>

Dear Knut,

> -----Original Message-----
> From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Knut
> Krueger
> Sent: Friday, October 26, 2018 2:29 AM
> To: r-help mailing list <r-help at r-project.org>
> Subject: Re: [R] "logical indexing, " [was] match() question or needle haystack
> problem for a data.frame
> 
> Am 25.10.18 um 16:13 schrieb peter dalgaard:
> >
> >
> > Yes: x[!(x$A %in% y$B),]
> 
> Ok thats in my opinion a little workaround

Not a work-around but a solution. That is, one can't expect to find an existing function for every problem.

> why?:
> 
> There is an
> = and !=

Actually == and !=

> < and >
> 
> 
> means the opposite is available between terms.
> 
> why is there f.e no %!in%, %notin%  or !%in%
> 
> This would be more intuitive.

If you feel strongly about this, it's not hard to supply it:

> `%!in%` <- function(x, y) !(x %in% y)
> (1:4) %in% (2*1:4)
[1] FALSE  TRUE FALSE  TRUE
> (1:4) %!in% (2*1:4)
[1]  TRUE FALSE  TRUE FALSE

Best,
 John

-----------------------------------------------------------------
John Fox
Professor Emeritus
McMaster University
Hamilton, Ontario, Canada
Web: https://socialsciences.mcmaster.ca/jfox/


> 
> Kind regards Knut
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @erenbkt@ @ending from gm@il@com  Fri Oct 26 15:07:16 2018
From: @erenbkt@ @ending from gm@il@com (Aerenbkts bkts)
Date: Fri, 26 Oct 2018 15:07:16 +0200
Subject: [R] Calculating just a single row of dissimilarity/distance matrix
Message-ID: <CAHxtjzA_h3oBPZPdMX20ROK1Qy1xjgriqXMF4UvXLN=Q0Hk6Kg@mail.gmail.com>

I have a data-frame with 30k rows and 10 features. I would like to
calculate distance matrix like below;

gower_dist <- daisy(data-frame, metric = "gower"),


This function returns whole dissimilarity matrix. I want to get just
the first row.
(Just distances of the first element in data-frame). How can I do it?
Do you have an idea?


Regards

	[[alternative HTML version deleted]]


From ericjberger @ending from gm@il@com  Fri Oct 26 15:42:15 2018
From: ericjberger @ending from gm@il@com (Eric Berger)
Date: Fri, 26 Oct 2018 16:42:15 +0300
Subject: [R] 
 Calculating just a single row of dissimilarity/distance matrix
In-Reply-To: <CAHxtjzA_h3oBPZPdMX20ROK1Qy1xjgriqXMF4UvXLN=Q0Hk6Kg@mail.gmail.com>
References: <CAHxtjzA_h3oBPZPdMX20ROK1Qy1xjgriqXMF4UvXLN=Q0Hk6Kg@mail.gmail.com>
Message-ID: <CAGgJW76bxtFUrgJ1NoDu1e2npxxKuQG9izuPP9n-S6dONTGOXw@mail.gmail.com>

> first_row_dist <- as.numeric(gower_dist)[1:(attr(gower_dist,"Size")-1)]

will give you the distances of the first row from the subsequent rows.

HTH,
Eric





On Fri, Oct 26, 2018 at 4:07 PM Aerenbkts bkts <aerenbkts at gmail.com> wrote:

> I have a data-frame with 30k rows and 10 features. I would like to
> calculate distance matrix like below;
>
> gower_dist <- daisy(data-frame, metric = "gower"),
>
>
> This function returns whole dissimilarity matrix. I want to get just
> the first row.
> (Just distances of the first element in data-frame). How can I do it?
> Do you have an idea?
>
>
> Regards
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From r@hep@rd @ending from @ppl-eco@y@@com  Fri Oct 26 18:30:22 2018
From: r@hep@rd @ending from @ppl-eco@y@@com (Rich Shepard)
Date: Fri, 26 Oct 2018 09:30:22 -0700 (PDT)
Subject: [R] source() fails in same directory as script: cannot find file
Message-ID: <alpine.LNX.2.20.1810260918310.16776@salmo.appl-ecosys.com>

   I'm not seeing my error even after reading ?source and a couple of web
fora threads. Running R-3.5.1 on Slackware-14.2.

   The scripts/ directory has the file 'input-summarize.R' with these lines:

sites <- read.table('../data/stations.dat', header=T, sep=',', stringsAsFactors=T)
sink('../analyses/location-summaries.txt')
print(summary(sites)
sink(NULL)

hg_conc <- read.table('../data/concentrations.dat', header=T, sep=',', stringsAsFactors=T)
hg_conc$sampdate <- as.Date(as.character(hg_conc$sampdate))
sink('../analyses/concentration-summaries.txt')
print(summary(hg_conc)
sink(NULL)

   Sourcing the script within the same directory (confirmed using getwd())
fails with this error message:

> source('input-summarize.R')
Error in file(filename, "r", encoding = encoding) :
   cannot open the connection
In addition: Warning message:
In file(filename, "r", encoding = encoding) :
   cannot open file 'input-summarize.R': No such file or directory

   I've used this same syntax to source scripts within the past month and
would like to understand this error so I can fix it now and avoid it in the
future.

TIA,

Rich


From i@t@z@hn @ending from gm@il@com  Fri Oct 26 20:06:13 2018
From: i@t@z@hn @ending from gm@il@com (Ista Zahn)
Date: Fri, 26 Oct 2018 14:06:13 -0400
Subject: [R] 
 source() fails in same directory as script: cannot find file
In-Reply-To: <alpine.LNX.2.20.1810260918310.16776@salmo.appl-ecosys.com>
References: <alpine.LNX.2.20.1810260918310.16776@salmo.appl-ecosys.com>
Message-ID: <CA+vqiLHK4bPZLWpCi6R1WcGEnS32FeQAEiqR6Z8gge7hEVR31A@mail.gmail.com>

Hi Rich,

I'm confused. It seems the error is that the file can't be found; if
so, what does it matter what is in the file?

As far as I can see you are either not in the directory you think you
are, or b) the file is not named what you think it is.

Best,
Ista
On Fri, Oct 26, 2018 at 12:30 PM Rich Shepard <rshepard at appl-ecosys.com> wrote:
>
>    I'm not seeing my error even after reading ?source and a couple of web
> fora threads. Running R-3.5.1 on Slackware-14.2.
>
>    The scripts/ directory has the file 'input-summarize.R' with these lines:
>
> sites <- read.table('../data/stations.dat', header=T, sep=',', stringsAsFactors=T)
> sink('../analyses/location-summaries.txt')
> print(summary(sites)
> sink(NULL)
>
> hg_conc <- read.table('../data/concentrations.dat', header=T, sep=',', stringsAsFactors=T)
> hg_conc$sampdate <- as.Date(as.character(hg_conc$sampdate))
> sink('../analyses/concentration-summaries.txt')
> print(summary(hg_conc)
> sink(NULL)
>
>    Sourcing the script within the same directory (confirmed using getwd())
> fails with this error message:
>
> > source('input-summarize.R')
> Error in file(filename, "r", encoding = encoding) :
>    cannot open the connection
> In addition: Warning message:
> In file(filename, "r", encoding = encoding) :
>    cannot open file 'input-summarize.R': No such file or directory
>
>    I've used this same syntax to source scripts within the past month and
> would like to understand this error so I can fix it now and avoid it in the
> future.
>
> TIA,
>
> Rich
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From r@hep@rd @ending from @ppl-eco@y@@com  Fri Oct 26 20:11:16 2018
From: r@hep@rd @ending from @ppl-eco@y@@com (Rich Shepard)
Date: Fri, 26 Oct 2018 11:11:16 -0700 (PDT)
Subject: [R] 
 source() fails in same directory as script: cannot find file
In-Reply-To: <CA+vqiLHK4bPZLWpCi6R1WcGEnS32FeQAEiqR6Z8gge7hEVR31A@mail.gmail.com>
References: <alpine.LNX.2.20.1810260918310.16776@salmo.appl-ecosys.com>
 <CA+vqiLHK4bPZLWpCi6R1WcGEnS32FeQAEiqR6Z8gge7hEVR31A@mail.gmail.com>
Message-ID: <alpine.LNX.2.20.1810261107540.16776@salmo.appl-ecosys.com>

On Fri, 26 Oct 2018, Ista Zahn wrote:

> I'm confused. It seems the error is that the file can't be found; if
> so, what does it matter what is in the file?

Ista,

   Beats me.

> As far as I can see you are either not in the directory you think you
> are, or b) the file is not named what you think it is.

   Yes, the error seems that R cannot find the file, but it's in the same
directory and the file does exist:

> getwd()
[1] "/home/rshepard/documents/white-papers/geochemistry/willamette-river-mercury/scripts"

~/documents/white-papers/geochemistry/willamette-river-mercury/scripts]$ ls input-summerize.R
input-summerize.R

   So, R is running in the scripts/ directory and the script is there, too.

   This is why I asked for help as the error makes no sense to me.

Regards,

Rich


From i@t@z@hn @ending from gm@il@com  Fri Oct 26 20:54:12 2018
From: i@t@z@hn @ending from gm@il@com (Ista Zahn)
Date: Fri, 26 Oct 2018 14:54:12 -0400
Subject: [R] 
 source() fails in same directory as script: cannot find file
In-Reply-To: <alpine.LNX.2.20.1810261107540.16776@salmo.appl-ecosys.com>
References: <alpine.LNX.2.20.1810260918310.16776@salmo.appl-ecosys.com>
 <CA+vqiLHK4bPZLWpCi6R1WcGEnS32FeQAEiqR6Z8gge7hEVR31A@mail.gmail.com>
 <alpine.LNX.2.20.1810261107540.16776@salmo.appl-ecosys.com>
Message-ID: <CA+vqiLGaSF8qb+Cuq7yo120MHHNK19WELODqm5ZxrLi+5j0BOA@mail.gmail.com>

On Fri, Oct 26, 2018 at 2:16 PM Rich Shepard <rshepard at appl-ecosys.com> wrote:
>
> On Fri, 26 Oct 2018, Ista Zahn wrote:
>
> > I'm confused. It seems the error is that the file can't be found; if
> > so, what does it matter what is in the file?
>
> Ista,
>
>    Beats me.
>
> > As far as I can see you are either not in the directory you think you
> > are, or b) the file is not named what you think it is.
>
>    Yes, the error seems that R cannot find the file, but it's in the same
> directory and the file does exist:
>
> > getwd()
> [1] "/home/rshepard/documents/white-papers/geochemistry/willamette-river-mercury/scripts"
>
> ~/documents/white-papers/geochemistry/willamette-river-mercury/scripts]$ ls input-summerize.R
> input-summerize.R
>
>    So, R is running in the scripts/ directory and the script is there, too.

No, the script is _not_ there. Compare your code:

> source('input-summarize.R')

to the contents of the directory:

> input-summerize.R

The moral of the story is, use tab-completion or copy/paste.

Best,
Ista

>
>    This is why I asked for help as the error makes no sense to me.
>
> Regards,
>
> Rich
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From rhelp @ending from eoo@@dd@@nl  Fri Oct 26 21:30:51 2018
From: rhelp @ending from eoo@@dd@@nl (Jan van der Laan)
Date: Fri, 26 Oct 2018 21:30:51 +0200
Subject: [R] 
 Calculating just a single row of dissimilarity/distance matrix
In-Reply-To: <CAHxtjzA_h3oBPZPdMX20ROK1Qy1xjgriqXMF4UvXLN=Q0Hk6Kg@mail.gmail.com>
References: <CAHxtjzA_h3oBPZPdMX20ROK1Qy1xjgriqXMF4UvXLN=Q0Hk6Kg@mail.gmail.com>
Message-ID: <a824c37f-a9d4-cc4b-2ea4-d51be254e59b@eoos.dds.nl>


Using another implementation of the gower distance:


library(gower)

gower_dist(iris[1,], iris)


HTH,

Jan



On 26-10-18 15:07, Aerenbkts bkts wrote:
> I have a data-frame with 30k rows and 10 features. I would like to
> calculate distance matrix like below;
>
> gower_dist <- daisy(data-frame, metric = "gower"),
>
>
> This function returns whole dissimilarity matrix. I want to get just
> the first row.
> (Just distances of the first element in data-frame). How can I do it?
> Do you have an idea?
>
>
> Regards
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From r@hep@rd @ending from @ppl-eco@y@@com  Fri Oct 26 21:46:22 2018
From: r@hep@rd @ending from @ppl-eco@y@@com (Rich Shepard)
Date: Fri, 26 Oct 2018 12:46:22 -0700 (PDT)
Subject: [R] 
 source() fails in same directory as script: cannot find file [FIXED]
In-Reply-To: <CA+vqiLGaSF8qb+Cuq7yo120MHHNK19WELODqm5ZxrLi+5j0BOA@mail.gmail.com>
References: <alpine.LNX.2.20.1810260918310.16776@salmo.appl-ecosys.com>
 <CA+vqiLHK4bPZLWpCi6R1WcGEnS32FeQAEiqR6Z8gge7hEVR31A@mail.gmail.com>
 <alpine.LNX.2.20.1810261107540.16776@salmo.appl-ecosys.com>
 <CA+vqiLGaSF8qb+Cuq7yo120MHHNK19WELODqm5ZxrLi+5j0BOA@mail.gmail.com>
Message-ID: <alpine.LNX.2.20.1810261244490.16776@salmo.appl-ecosys.com>

On Fri, 26 Oct 2018, Ista Zahn wrote:

> No, the script is _not_ there. Compare your code:
>
>> source('input-summarize.R')
>
> to the contents of the directory:
>
>> input-summerize.R

> The moral of the story is, use tab-completion or copy/paste.

Ista,

   Thanks for catching the typo that I kept misssing. I mis-named the script
and didn't see that on the emacs buffer frame.

Best regards,

Rich


From jeremieju@te @ending from gm@il@com  Fri Oct 26 22:11:19 2018
From: jeremieju@te @ending from gm@il@com (Jeremie Juste)
Date: Fri, 26 Oct 2018 22:11:19 +0200
Subject: [R] 
 source() fails in same directory as script: cannot find file
In-Reply-To: <alpine.LNX.2.20.1810261107540.16776@salmo.appl-ecosys.com> (Rich
 Shepard's message of "Fri, 26 Oct 2018 11:11:16 -0700 (PDT)")
References: <alpine.LNX.2.20.1810260918310.16776@salmo.appl-ecosys.com>
 <CA+vqiLHK4bPZLWpCi6R1WcGEnS32FeQAEiqR6Z8gge7hEVR31A@mail.gmail.com>
 <alpine.LNX.2.20.1810261107540.16776@salmo.appl-ecosys.com>
Message-ID: <877ei41na0.fsf@gmail.com>

Hello,

I suspect the error is in the file input-summerize.R.

I creating a new file input-summerize2.R with only print("hello") for
instance and check if 

> setwd("~/documents/white-papers/geochemistry/willamette-river-mercury/scripts")
> source("input-summerize2.R")

works

Hope it helps,

Jeremie


Rich Shepard <rshepard at appl-ecosys.com> writes:

> On Fri, 26 Oct 2018, Ista Zahn wrote:
>
>> I'm confused. It seems the error is that the file can't be found; if
>> so, what does it matter what is in the file?
>
> Ista,
>
>   Beats me.
>
>> As far as I can see you are either not in the directory you think you
>> are, or b) the file is not named what you think it is.
>
>   Yes, the error seems that R cannot find the file, but it's in the same
> directory and the file does exist:
>
>> getwd()
> [1] "/home/rshepard/documents/white-papers/geochemistry/willamette-river-mercury/scripts"
>
> ~/documents/white-papers/geochemistry/willamette-river-mercury/scripts]$ ls input-summerize.R
> input-summerize.R
>
>   So, R is running in the scripts/ directory and the script is there, too.
>
>   This is why I asked for help as the error makes no sense to me.
>
> Regards,
>
> Rich
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From monicq15 @ending from y@hoo@com  Fri Oct 26 19:27:19 2018
From: monicq15 @ending from y@hoo@com (=?UTF-8?Q?m=C3=B3nica_queijeiro?=)
Date: Fri, 26 Oct 2018 17:27:19 +0000 (UTC)
Subject: [R] Question for help
References: <1190357765.17769949.1540574839876.ref@mail.yahoo.com>
Message-ID: <1190357765.17769949.1540574839876@mail.yahoo.com>

How do I interpret p and q in the corARMA correlation structure?
I understand that p is the autoregessive order and q is the moving average, but I don't know how to interpret what does it means when it is (2,3) or (2,2) for example. Can anyone give me a simple explanation?
	[[alternative HTML version deleted]]


From jdnewmil @ending from dcn@d@vi@@c@@u@  Sat Oct 27 04:42:02 2018
From: jdnewmil @ending from dcn@d@vi@@c@@u@ (Jeff Newmiller)
Date: Fri, 26 Oct 2018 19:42:02 -0700
Subject: [R] 
 source() fails in same directory as script: cannot find file
In-Reply-To: <877ei41na0.fsf@gmail.com>
References: <alpine.LNX.2.20.1810260918310.16776@salmo.appl-ecosys.com>
 <CA+vqiLHK4bPZLWpCi6R1WcGEnS32FeQAEiqR6Z8gge7hEVR31A@mail.gmail.com>
 <alpine.LNX.2.20.1810261107540.16776@salmo.appl-ecosys.com>
 <877ei41na0.fsf@gmail.com>
Message-ID: <53C2F2EC-F606-4C1A-861C-5691234DD607@dcn.davis.ca.us>

I haven't seen mention of what OS or filesystem types are involved, but it superficially looks like it might be one of those cases where the filesystem is case-sensitive... check that all your directory and file names are capitalized correctly.

On October 26, 2018 1:11:19 PM PDT, Jeremie Juste <jeremiejuste at gmail.com> wrote:
>Hello,
>
>I suspect the error is in the file input-summerize.R.
>
>I creating a new file input-summerize2.R with only print("hello") for
>instance and check if 
>
>>
>setwd("~/documents/white-papers/geochemistry/willamette-river-mercury/scripts")
>> source("input-summerize2.R")
>
>works
>
>Hope it helps,
>
>Jeremie
>
>
>Rich Shepard <rshepard at appl-ecosys.com> writes:
>
>> On Fri, 26 Oct 2018, Ista Zahn wrote:
>>
>>> I'm confused. It seems the error is that the file can't be found; if
>>> so, what does it matter what is in the file?
>>
>> Ista,
>>
>>   Beats me.
>>
>>> As far as I can see you are either not in the directory you think
>you
>>> are, or b) the file is not named what you think it is.
>>
>>   Yes, the error seems that R cannot find the file, but it's in the
>same
>> directory and the file does exist:
>>
>>> getwd()
>> [1]
>"/home/rshepard/documents/white-papers/geochemistry/willamette-river-mercury/scripts"
>>
>>
>~/documents/white-papers/geochemistry/willamette-river-mercury/scripts]$
>ls input-summerize.R
>> input-summerize.R
>>
>>   So, R is running in the scripts/ directory and the script is there,
>too.
>>
>>   This is why I asked for help as the error makes no sense to me.
>>
>> Regards,
>>
>> Rich
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From i@t@z@hn @ending from gm@il@com  Sat Oct 27 15:35:15 2018
From: i@t@z@hn @ending from gm@il@com (Ista Zahn)
Date: Sat, 27 Oct 2018 09:35:15 -0400
Subject: [R] 
 source() fails in same directory as script: cannot find file
In-Reply-To: <53C2F2EC-F606-4C1A-861C-5691234DD607@dcn.davis.ca.us>
References: <alpine.LNX.2.20.1810260918310.16776@salmo.appl-ecosys.com>
 <CA+vqiLHK4bPZLWpCi6R1WcGEnS32FeQAEiqR6Z8gge7hEVR31A@mail.gmail.com>
 <alpine.LNX.2.20.1810261107540.16776@salmo.appl-ecosys.com>
 <877ei41na0.fsf@gmail.com>
 <53C2F2EC-F606-4C1A-861C-5691234DD607@dcn.davis.ca.us>
Message-ID: <CA+vqiLHuGJmLTUc_MhFJCPiH0G2F97WL52yw_M-keVsK8Waxcg@mail.gmail.com>

On Fri, Oct 26, 2018 at 10:42 PM Jeff Newmiller
<jdnewmil at dcn.davis.ca.us> wrote:
>
> I haven't seen mention of what OS or filesystem types are involved, but it superficially looks like it might be one of those cases where the filesystem is case-sensitive... check that all your directory and file names are capitalized correctly.

Just out of curiosity -- are my messages to r-help not going through?
I correctly diagnosed the problem as a simple typo in my message on
Oct 26 at 2:54 PM, but then the discussion just continued as if that
never happened.

>
> On October 26, 2018 1:11:19 PM PDT, Jeremie Juste <jeremiejuste at gmail.com> wrote:
> >Hello,
> >
> >I suspect the error is in the file input-summerize.R.
> >
> >I creating a new file input-summerize2.R with only print("hello") for
> >instance and check if
> >
> >>
> >setwd("~/documents/white-papers/geochemistry/willamette-river-mercury/scripts")
> >> source("input-summerize2.R")
> >
> >works
> >
> >Hope it helps,
> >
> >Jeremie
> >
> >
> >Rich Shepard <rshepard at appl-ecosys.com> writes:
> >
> >> On Fri, 26 Oct 2018, Ista Zahn wrote:
> >>
> >>> I'm confused. It seems the error is that the file can't be found; if
> >>> so, what does it matter what is in the file?
> >>
> >> Ista,
> >>
> >>   Beats me.
> >>
> >>> As far as I can see you are either not in the directory you think
> >you
> >>> are, or b) the file is not named what you think it is.
> >>
> >>   Yes, the error seems that R cannot find the file, but it's in the
> >same
> >> directory and the file does exist:
> >>
> >>> getwd()
> >> [1]
> >"/home/rshepard/documents/white-papers/geochemistry/willamette-river-mercury/scripts"
> >>
> >>
> >~/documents/white-papers/geochemistry/willamette-river-mercury/scripts]$
> >ls input-summerize.R
> >> input-summerize.R
> >>
> >>   So, R is running in the scripts/ directory and the script is there,
> >too.
> >>
> >>   This is why I asked for help as the error makes no sense to me.
> >>
> >> Regards,
> >>
> >> Rich
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my phone. Please excuse my brevity.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @ending from gm@il@com  Sat Oct 27 16:18:54 2018
From: bgunter@4567 @ending from gm@il@com (Bert Gunter)
Date: Sat, 27 Oct 2018 07:18:54 -0700
Subject: [R] 
 source() fails in same directory as script: cannot find file
In-Reply-To: <CA+vqiLHuGJmLTUc_MhFJCPiH0G2F97WL52yw_M-keVsK8Waxcg@mail.gmail.com>
References: <alpine.LNX.2.20.1810260918310.16776@salmo.appl-ecosys.com>
 <CA+vqiLHK4bPZLWpCi6R1WcGEnS32FeQAEiqR6Z8gge7hEVR31A@mail.gmail.com>
 <alpine.LNX.2.20.1810261107540.16776@salmo.appl-ecosys.com>
 <877ei41na0.fsf@gmail.com>
 <53C2F2EC-F606-4C1A-861C-5691234DD607@dcn.davis.ca.us>
 <CA+vqiLHuGJmLTUc_MhFJCPiH0G2F97WL52yw_M-keVsK8Waxcg@mail.gmail.com>
Message-ID: <CAGxFJbS=KpfEVWb9vTdA+0pf2ZyfQcP7AvxwpH+77TJpxzvV7A@mail.gmail.com>

Your messages got through fine (to me, anyway). I suspect people are just
failing to read through the threads.

-- Bert

On Sat, Oct 27, 2018 at 6:35 AM Ista Zahn <istazahn at gmail.com> wrote:

> On Fri, Oct 26, 2018 at 10:42 PM Jeff Newmiller
> <jdnewmil at dcn.davis.ca.us> wrote:
> >
> > I haven't seen mention of what OS or filesystem types are involved, but
> it superficially looks like it might be one of those cases where the
> filesystem is case-sensitive... check that all your directory and file
> names are capitalized correctly.
>
> Just out of curiosity -- are my messages to r-help not going through?
> I correctly diagnosed the problem as a simple typo in my message on
> Oct 26 at 2:54 PM, but then the discussion just continued as if that
> never happened.
>
> >
> > On October 26, 2018 1:11:19 PM PDT, Jeremie Juste <
> jeremiejuste at gmail.com> wrote:
> > >Hello,
> > >
> > >I suspect the error is in the file input-summerize.R.
> > >
> > >I creating a new file input-summerize2.R with only print("hello") for
> > >instance and check if
> > >
> > >>
> >
> >setwd("~/documents/white-papers/geochemistry/willamette-river-mercury/scripts")
> > >> source("input-summerize2.R")
> > >
> > >works
> > >
> > >Hope it helps,
> > >
> > >Jeremie
> > >
> > >
> > >Rich Shepard <rshepard at appl-ecosys.com> writes:
> > >
> > >> On Fri, 26 Oct 2018, Ista Zahn wrote:
> > >>
> > >>> I'm confused. It seems the error is that the file can't be found; if
> > >>> so, what does it matter what is in the file?
> > >>
> > >> Ista,
> > >>
> > >>   Beats me.
> > >>
> > >>> As far as I can see you are either not in the directory you think
> > >you
> > >>> are, or b) the file is not named what you think it is.
> > >>
> > >>   Yes, the error seems that R cannot find the file, but it's in the
> > >same
> > >> directory and the file does exist:
> > >>
> > >>> getwd()
> > >> [1]
> >
> >"/home/rshepard/documents/white-papers/geochemistry/willamette-river-mercury/scripts"
> > >>
> > >>
> > >~/documents/white-papers/geochemistry/willamette-river-mercury/scripts]$
> > >ls input-summerize.R
> > >> input-summerize.R
> > >>
> > >>   So, R is running in the scripts/ directory and the script is there,
> > >too.
> > >>
> > >>   This is why I asked for help as the error makes no sense to me.
> > >>
> > >> Regards,
> > >>
> > >> Rich
> > >>
> > >> ______________________________________________
> > >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >> https://stat.ethz.ch/mailman/listinfo/r-help
> > >> PLEASE do read the posting guide
> > >http://www.R-project.org/posting-guide.html
> > >> and provide commented, minimal, self-contained, reproducible code.
> > >
> > >______________________________________________
> > >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >https://stat.ethz.ch/mailman/listinfo/r-help
> > >PLEASE do read the posting guide
> > >http://www.R-project.org/posting-guide.html
> > >and provide commented, minimal, self-contained, reproducible code.
> >
> > --
> > Sent from my phone. Please excuse my brevity.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From r@hep@rd @ending from @ppl-eco@y@@com  Sat Oct 27 16:37:59 2018
From: r@hep@rd @ending from @ppl-eco@y@@com (Rich Shepard)
Date: Sat, 27 Oct 2018 07:37:59 -0700 (PDT)
Subject: [R] 
 source() fails in same directory as script: cannot find file
In-Reply-To: <CA+vqiLHuGJmLTUc_MhFJCPiH0G2F97WL52yw_M-keVsK8Waxcg@mail.gmail.com>
References: <alpine.LNX.2.20.1810260918310.16776@salmo.appl-ecosys.com>
 <CA+vqiLHK4bPZLWpCi6R1WcGEnS32FeQAEiqR6Z8gge7hEVR31A@mail.gmail.com>
 <alpine.LNX.2.20.1810261107540.16776@salmo.appl-ecosys.com>
 <877ei41na0.fsf@gmail.com>
 <53C2F2EC-F606-4C1A-861C-5691234DD607@dcn.davis.ca.us>
 <CA+vqiLHuGJmLTUc_MhFJCPiH0G2F97WL52yw_M-keVsK8Waxcg@mail.gmail.com>
Message-ID: <alpine.LNX.2.20.1810270736340.11686@salmo.appl-ecosys.com>

On Sat, 27 Oct 2018, Ista Zahn wrote:

> Just out of curiosity -- are my messages to r-help not going through? I
> correctly diagnosed the problem as a simple typo in my message on Oct 26
> at 2:54 PM, but then the discussion just continued as if that never
> happened.

   I responded to you and Jeff (his off the list), and saw my response to you
yesterday.

   Since you found the typo I keep missing, and I fixed it, I deleted the
thread here.

Rich


From r@hep@rd @ending from @ppl-eco@y@@com  Sat Oct 27 16:44:14 2018
From: r@hep@rd @ending from @ppl-eco@y@@com (Rich Shepard)
Date: Sat, 27 Oct 2018 07:44:14 -0700 (PDT)
Subject: [R] 
 source() fails in same directory as script: cannot find file
In-Reply-To: <alpine.LNX.2.20.1810270736340.11686@salmo.appl-ecosys.com>
References: <alpine.LNX.2.20.1810260918310.16776@salmo.appl-ecosys.com>
 <CA+vqiLHK4bPZLWpCi6R1WcGEnS32FeQAEiqR6Z8gge7hEVR31A@mail.gmail.com>
 <alpine.LNX.2.20.1810261107540.16776@salmo.appl-ecosys.com>
 <877ei41na0.fsf@gmail.com>
 <53C2F2EC-F606-4C1A-861C-5691234DD607@dcn.davis.ca.us>
 <CA+vqiLHuGJmLTUc_MhFJCPiH0G2F97WL52yw_M-keVsK8Waxcg@mail.gmail.com>
 <alpine.LNX.2.20.1810270736340.11686@salmo.appl-ecosys.com>
Message-ID: <alpine.LNX.2.20.1810270743390.11686@salmo.appl-ecosys.com>

On Sat, 27 Oct 2018, Rich Shepard wrote:

> thread here.

   'Here' meaning on alpine on my workstation, not on the mail list.

Rich


From rhelp @ending from eoo@@dd@@nl  Sat Oct 27 22:17:32 2018
From: rhelp @ending from eoo@@dd@@nl (Jan van der Laan)
Date: Sat, 27 Oct 2018 22:17:32 +0200
Subject: [R] 
 Calculating just a single row of dissimilarity/distance matrix
In-Reply-To: <CAHxtjzCUKLsCPqu5zzjEKPG0wy+kFr8EMhGdXkss5GJcd=_VbA@mail.gmail.com>
References: <CAHxtjzA_h3oBPZPdMX20ROK1Qy1xjgriqXMF4UvXLN=Q0Hk6Kg@mail.gmail.com>
 <a824c37f-a9d4-cc4b-2ea4-d51be254e59b@eoos.dds.nl>
 <CAHxtjzCUKLsCPqu5zzjEKPG0wy+kFr8EMhGdXkss5GJcd=_VbA@mail.gmail.com>
Message-ID: <6b6b0e50-9d79-49a6-d882-1ad7a83024a4@eoos.dds.nl>

Please respond to the list; there are more people answering there.


As explained in the documentation gower_dist performes a pairwise 
comparison of the two arguments recycling the shortest one if needed, so 
indeed gower_dist(iris[1:5, ], iris) doesn't do what you want.

Possible solutions are:

tmp <- split(iris[1:150, ], seq_len(150))

sapply(gower_dist, iris)


and:


library(dplyr)

library(tidyr)

pairs <- expand.grid(x = 1:5, y = 1:nrow(iris))
pairs$dist <- gower_dist(iris[pairs$x, ], iris[pairs$y, ])
pairs %>% spread(y, dist)

Don't know which one is faster. And there are probably various other 
solutions too.

--
Jan





On 27-10-18 18:04, Aerenbkts bkts wrote:
> Dear Jan
>
> Thanks for your help. Actually it works for the first element. But I 
> tried to calculate distance values for the first N rows. For example;
>
> gower_dist(iris[1:5,], iris) // gower distance for the first 5 rows. 
> but it did not work. Do you have any suggestion about it?
>
>
>
> On Fri, 26 Oct 2018 at 21:31, Jan van der Laan <rhelp at eoos.dds.nl 
> <mailto:rhelp at eoos.dds.nl>> wrote:
>
>
>     Using another implementation of the gower distance:
>
>
>     library(gower)
>
>     gower_dist(iris[1,], iris)
>
>
>     HTH,
>
>     Jan
>
>
>
>     On 26-10-18 15:07, Aerenbkts bkts wrote:
>     > I have a data-frame with 30k rows and 10 features. I would like to
>     > calculate distance matrix like below;
>     >
>     > gower_dist <- daisy(data-frame, metric = "gower"),
>     >
>     >
>     > This function returns whole dissimilarity matrix. I want to get just
>     > the first row.
>     > (Just distances of the first element in data-frame). How can I
>     do it?
>     > Do you have an idea?
>     >
>     >
>     > Regards
>     >
>     >? ? ? ?[[alternative HTML version deleted]]
>     >
>     > ______________________________________________
>     > R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>     -- To UNSUBSCRIBE and more, see
>     > https://stat.ethz.ch/mailman/listinfo/r-help
>     > PLEASE do read the posting guide
>     http://www.R-project.org/posting-guide.html
>     > and provide commented, minimal, self-contained, reproducible code.
>
>     ______________________________________________
>     R-help at r-project.org <mailto:R-help at r-project.org> mailing list --
>     To UNSUBSCRIBE and more, see
>     https://stat.ethz.ch/mailman/listinfo/r-help
>     PLEASE do read the posting guide
>     http://www.R-project.org/posting-guide.html
>     and provide commented, minimal, self-contained, reproducible code.
>


From murdoch@dunc@n @ending from gm@il@com  Sat Oct 27 22:38:40 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Sat, 27 Oct 2018 16:38:40 -0400
Subject: [R] 
 source() fails in same directory as script: cannot find file
In-Reply-To: <CA+vqiLHuGJmLTUc_MhFJCPiH0G2F97WL52yw_M-keVsK8Waxcg@mail.gmail.com>
References: <alpine.LNX.2.20.1810260918310.16776@salmo.appl-ecosys.com>
 <CA+vqiLHK4bPZLWpCi6R1WcGEnS32FeQAEiqR6Z8gge7hEVR31A@mail.gmail.com>
 <alpine.LNX.2.20.1810261107540.16776@salmo.appl-ecosys.com>
 <877ei41na0.fsf@gmail.com>
 <53C2F2EC-F606-4C1A-861C-5691234DD607@dcn.davis.ca.us>
 <CA+vqiLHuGJmLTUc_MhFJCPiH0G2F97WL52yw_M-keVsK8Waxcg@mail.gmail.com>
Message-ID: <169fba10-e720-7b22-1110-0ccd7f67be1a@gmail.com>

On 27/10/2018 9:35 AM, Ista Zahn wrote:
> On Fri, Oct 26, 2018 at 10:42 PM Jeff Newmiller
> <jdnewmil at dcn.davis.ca.us> wrote:
>>
>> I haven't seen mention of what OS or filesystem types are involved, but it superficially looks like it might be one of those cases where the filesystem is case-sensitive... check that all your directory and file names are capitalized correctly.
> 
> Just out of curiosity -- are my messages to r-help not going through?
> I correctly diagnosed the problem as a simple typo in my message on
> Oct 26 at 2:54 PM, but then the discussion just continued as if that
> never happened.

I saw it.  I don't know why others didn't....

Duncan Murdoch

> 
>>
>> On October 26, 2018 1:11:19 PM PDT, Jeremie Juste <jeremiejuste at gmail.com> wrote:
>>> Hello,
>>>
>>> I suspect the error is in the file input-summerize.R.
>>>
>>> I creating a new file input-summerize2.R with only print("hello") for
>>> instance and check if
>>>
>>>>
>>> setwd("~/documents/white-papers/geochemistry/willamette-river-mercury/scripts")
>>>> source("input-summerize2.R")
>>>
>>> works
>>>
>>> Hope it helps,
>>>
>>> Jeremie
>>>
>>>
>>> Rich Shepard <rshepard at appl-ecosys.com> writes:
>>>
>>>> On Fri, 26 Oct 2018, Ista Zahn wrote:
>>>>
>>>>> I'm confused. It seems the error is that the file can't be found; if
>>>>> so, what does it matter what is in the file?
>>>>
>>>> Ista,
>>>>
>>>>    Beats me.
>>>>
>>>>> As far as I can see you are either not in the directory you think
>>> you
>>>>> are, or b) the file is not named what you think it is.
>>>>
>>>>    Yes, the error seems that R cannot find the file, but it's in the
>>> same
>>>> directory and the file does exist:
>>>>
>>>>> getwd()
>>>> [1]
>>> "/home/rshepard/documents/white-papers/geochemistry/willamette-river-mercury/scripts"
>>>>
>>>>
>>> ~/documents/white-papers/geochemistry/willamette-river-mercury/scripts]$
>>> ls input-summerize.R
>>>> input-summerize.R
>>>>
>>>>    So, R is running in the scripts/ directory and the script is there,
>>> too.
>>>>
>>>>    This is why I asked for help as the error makes no sense to me.
>>>>
>>>> Regards,
>>>>
>>>> Rich
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>> --
>> Sent from my phone. Please excuse my brevity.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From jdnewmil @ending from dcn@d@vi@@c@@u@  Sat Oct 27 22:57:37 2018
From: jdnewmil @ending from dcn@d@vi@@c@@u@ (Jeff Newmiller)
Date: Sat, 27 Oct 2018 13:57:37 -0700
Subject: [R] 
 source() fails in same directory as script: cannot find file
In-Reply-To: <169fba10-e720-7b22-1110-0ccd7f67be1a@gmail.com>
References: <alpine.LNX.2.20.1810260918310.16776@salmo.appl-ecosys.com>
 <CA+vqiLHK4bPZLWpCi6R1WcGEnS32FeQAEiqR6Z8gge7hEVR31A@mail.gmail.com>
 <alpine.LNX.2.20.1810261107540.16776@salmo.appl-ecosys.com>
 <877ei41na0.fsf@gmail.com>
 <53C2F2EC-F606-4C1A-861C-5691234DD607@dcn.davis.ca.us>
 <CA+vqiLHuGJmLTUc_MhFJCPiH0G2F97WL52yw_M-keVsK8Waxcg@mail.gmail.com>
 <169fba10-e720-7b22-1110-0ccd7f67be1a@gmail.com>
Message-ID: <ACC8128E-878D-4A14-B1E8-62BF86D735BF@dcn.davis.ca.us>

FWIW the diagnosis of misspelling appeared, ah, miraculous as the OP appeared consistent in using the incorrect spelling and the diagnosis was not confirmed by the OP.

On October 27, 2018 1:38:40 PM PDT, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>On 27/10/2018 9:35 AM, Ista Zahn wrote:
>> On Fri, Oct 26, 2018 at 10:42 PM Jeff Newmiller
>> <jdnewmil at dcn.davis.ca.us> wrote:
>>>
>>> I haven't seen mention of what OS or filesystem types are involved,
>but it superficially looks like it might be one of those cases where
>the filesystem is case-sensitive... check that all your directory and
>file names are capitalized correctly.
>> 
>> Just out of curiosity -- are my messages to r-help not going through?
>> I correctly diagnosed the problem as a simple typo in my message on
>> Oct 26 at 2:54 PM, but then the discussion just continued as if that
>> never happened.
>
>I saw it.  I don't know why others didn't....
>
>Duncan Murdoch
>
>> 
>>>
>>> On October 26, 2018 1:11:19 PM PDT, Jeremie Juste
><jeremiejuste at gmail.com> wrote:
>>>> Hello,
>>>>
>>>> I suspect the error is in the file input-summerize.R.
>>>>
>>>> I creating a new file input-summerize2.R with only print("hello")
>for
>>>> instance and check if
>>>>
>>>>>
>>>>
>setwd("~/documents/white-papers/geochemistry/willamette-river-mercury/scripts")
>>>>> source("input-summerize2.R")
>>>>
>>>> works
>>>>
>>>> Hope it helps,
>>>>
>>>> Jeremie
>>>>
>>>>
>>>> Rich Shepard <rshepard at appl-ecosys.com> writes:
>>>>
>>>>> On Fri, 26 Oct 2018, Ista Zahn wrote:
>>>>>
>>>>>> I'm confused. It seems the error is that the file can't be found;
>if
>>>>>> so, what does it matter what is in the file?
>>>>>
>>>>> Ista,
>>>>>
>>>>>    Beats me.
>>>>>
>>>>>> As far as I can see you are either not in the directory you think
>>>> you
>>>>>> are, or b) the file is not named what you think it is.
>>>>>
>>>>>    Yes, the error seems that R cannot find the file, but it's in
>the
>>>> same
>>>>> directory and the file does exist:
>>>>>
>>>>>> getwd()
>>>>> [1]
>>>>
>"/home/rshepard/documents/white-papers/geochemistry/willamette-river-mercury/scripts"
>>>>>
>>>>>
>>>>
>~/documents/white-papers/geochemistry/willamette-river-mercury/scripts]$
>>>> ls input-summerize.R
>>>>> input-summerize.R
>>>>>
>>>>>    So, R is running in the scripts/ directory and the script is
>there,
>>>> too.
>>>>>
>>>>>    This is why I asked for help as the error makes no sense to me.
>>>>>
>>>>> Regards,
>>>>>
>>>>> Rich
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>> --
>>> Sent from my phone. Please excuse my brevity.
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>> 

-- 
Sent from my phone. Please excuse my brevity.


From r@hep@rd @ending from @ppl-eco@y@@com  Sat Oct 27 23:05:58 2018
From: r@hep@rd @ending from @ppl-eco@y@@com (Rich Shepard)
Date: Sat, 27 Oct 2018 14:05:58 -0700 (PDT)
Subject: [R] 
 source() fails in same directory as script: cannot find file
In-Reply-To: <ACC8128E-878D-4A14-B1E8-62BF86D735BF@dcn.davis.ca.us>
References: <alpine.LNX.2.20.1810260918310.16776@salmo.appl-ecosys.com>
 <CA+vqiLHK4bPZLWpCi6R1WcGEnS32FeQAEiqR6Z8gge7hEVR31A@mail.gmail.com>
 <alpine.LNX.2.20.1810261107540.16776@salmo.appl-ecosys.com>
 <877ei41na0.fsf@gmail.com>
 <53C2F2EC-F606-4C1A-861C-5691234DD607@dcn.davis.ca.us>
 <CA+vqiLHuGJmLTUc_MhFJCPiH0G2F97WL52yw_M-keVsK8Waxcg@mail.gmail.com>
 <169fba10-e720-7b22-1110-0ccd7f67be1a@gmail.com>
 <ACC8128E-878D-4A14-B1E8-62BF86D735BF@dcn.davis.ca.us>
Message-ID: <alpine.LNX.2.20.1810271404400.11686@salmo.appl-ecosys.com>

On Sat, 27 Oct 2018, Jeff Newmiller wrote:

> FWIW the diagnosis of misspelling appeared, ah, miraculous as the OP
> appeared consistent in using the incorrect spelling and the diagnosis was
> not confirmed by the OP.

>From rshepard at appl-ecosys.com Fri Oct 26 12:46:22 2018
Date: Fri, 26 Oct 2018 12:46:22 -0700 (PDT)
From: Rich Shepard <rshepard at appl-ecosys.com>
To: r-help at r-project.org
Subject: Re: [R] source() fails in same directory as script: cannot find file [FIXED]

On Fri, 26 Oct 2018, Ista Zahn wrote:

> No, the script is _not_ there. Compare your code:
>
>> source('input-summarize.R')
>
> to the contents of the directory:
>
>> input-summerize.R

> The moral of the story is, use tab-completion or copy/paste.

Ista,

    Thanks for catching the typo that I kept misssing. I mis-named the script
and didn't see that on the emacs buffer frame.

Best regards,

Rich


From i@t@z@hn @ending from gm@il@com  Sat Oct 27 23:48:06 2018
From: i@t@z@hn @ending from gm@il@com (Ista Zahn)
Date: Sat, 27 Oct 2018 17:48:06 -0400
Subject: [R] 
 source() fails in same directory as script: cannot find file
In-Reply-To: <ACC8128E-878D-4A14-B1E8-62BF86D735BF@dcn.davis.ca.us>
References: <alpine.LNX.2.20.1810260918310.16776@salmo.appl-ecosys.com>
 <CA+vqiLHK4bPZLWpCi6R1WcGEnS32FeQAEiqR6Z8gge7hEVR31A@mail.gmail.com>
 <alpine.LNX.2.20.1810261107540.16776@salmo.appl-ecosys.com>
 <877ei41na0.fsf@gmail.com>
 <53C2F2EC-F606-4C1A-861C-5691234DD607@dcn.davis.ca.us>
 <CA+vqiLHuGJmLTUc_MhFJCPiH0G2F97WL52yw_M-keVsK8Waxcg@mail.gmail.com>
 <169fba10-e720-7b22-1110-0ccd7f67be1a@gmail.com>
 <ACC8128E-878D-4A14-B1E8-62BF86D735BF@dcn.davis.ca.us>
Message-ID: <CA+vqiLEZDQy6QMfDxUSCW-rgQcx1fn6N68jwype+bpfRZYycZw@mail.gmail.com>

On Sat, Oct 27, 2018 at 4:57 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>
> FWIW the diagnosis of misspelling appeared, ah, miraculous as the OP appeared consistent in using the incorrect spelling and the diagnosis was not confirmed by the OP.

I am of course happy to be seen as Miracle Worker, but I assure you I
solved the mystery without recourse to any information beyond what was
publicly posted on the r-help mailing list.

--Ista

>
> On October 27, 2018 1:38:40 PM PDT, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> >On 27/10/2018 9:35 AM, Ista Zahn wrote:
> >> On Fri, Oct 26, 2018 at 10:42 PM Jeff Newmiller
> >> <jdnewmil at dcn.davis.ca.us> wrote:
> >>>
> >>> I haven't seen mention of what OS or filesystem types are involved,
> >but it superficially looks like it might be one of those cases where
> >the filesystem is case-sensitive... check that all your directory and
> >file names are capitalized correctly.
> >>
> >> Just out of curiosity -- are my messages to r-help not going through?
> >> I correctly diagnosed the problem as a simple typo in my message on
> >> Oct 26 at 2:54 PM, but then the discussion just continued as if that
> >> never happened.
> >
> >I saw it.  I don't know why others didn't....
> >
> >Duncan Murdoch
> >
> >>
> >>>
> >>> On October 26, 2018 1:11:19 PM PDT, Jeremie Juste
> ><jeremiejuste at gmail.com> wrote:
> >>>> Hello,
> >>>>
> >>>> I suspect the error is in the file input-summerize.R.
> >>>>
> >>>> I creating a new file input-summerize2.R with only print("hello")
> >for
> >>>> instance and check if
> >>>>
> >>>>>
> >>>>
> >setwd("~/documents/white-papers/geochemistry/willamette-river-mercury/scripts")
> >>>>> source("input-summerize2.R")
> >>>>
> >>>> works
> >>>>
> >>>> Hope it helps,
> >>>>
> >>>> Jeremie
> >>>>
> >>>>
> >>>> Rich Shepard <rshepard at appl-ecosys.com> writes:
> >>>>
> >>>>> On Fri, 26 Oct 2018, Ista Zahn wrote:
> >>>>>
> >>>>>> I'm confused. It seems the error is that the file can't be found;
> >if
> >>>>>> so, what does it matter what is in the file?
> >>>>>
> >>>>> Ista,
> >>>>>
> >>>>>    Beats me.
> >>>>>
> >>>>>> As far as I can see you are either not in the directory you think
> >>>> you
> >>>>>> are, or b) the file is not named what you think it is.
> >>>>>
> >>>>>    Yes, the error seems that R cannot find the file, but it's in
> >the
> >>>> same
> >>>>> directory and the file does exist:
> >>>>>
> >>>>>> getwd()
> >>>>> [1]
> >>>>
> >"/home/rshepard/documents/white-papers/geochemistry/willamette-river-mercury/scripts"
> >>>>>
> >>>>>
> >>>>
> >~/documents/white-papers/geochemistry/willamette-river-mercury/scripts]$
> >>>> ls input-summerize.R
> >>>>> input-summerize.R
> >>>>>
> >>>>>    So, R is running in the scripts/ directory and the script is
> >there,
> >>>> too.
> >>>>>
> >>>>>    This is why I asked for help as the error makes no sense to me.
> >>>>>
> >>>>> Regards,
> >>>>>
> >>>>> Rich
> >>>>>
> >>>>> ______________________________________________
> >>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>>> PLEASE do read the posting guide
> >>>> http://www.R-project.org/posting-guide.html
> >>>>> and provide commented, minimal, self-contained, reproducible code.
> >>>>
> >>>> ______________________________________________
> >>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>> PLEASE do read the posting guide
> >>>> http://www.R-project.org/posting-guide.html
> >>>> and provide commented, minimal, self-contained, reproducible code.
> >>>
> >>> --
> >>> Sent from my phone. Please excuse my brevity.
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >>
>
> --
> Sent from my phone. Please excuse my brevity.


From @erenbkt@ @ending from gm@il@com  Sun Oct 28 15:01:44 2018
From: @erenbkt@ @ending from gm@il@com (Aerenbkts bkts)
Date: Sun, 28 Oct 2018 15:01:44 +0100
Subject: [R] Handling bid dist object
Message-ID: <CAHxtjzAczEzmz7pXxSpe51EBKaTc+-rVcYFNWHC4vx9REQehxA@mail.gmail.com>

I have a distance/dissimilarity matrix (30K rows 30K columns) that is
calculated in a loop and stored in ROM.

I would like to do clustering over the matrix.

I import and cluster it as below;

Mydata<-read.csv("Mydata.csv")
Mydata<-as.dist(Mydata)
Results<-hclust(Mydata)


But when I convert the matrix to dist object, I get RAM limitation error.
How can I handle it. Can I run hclust algorithm in a loop/chunking?

	[[alternative HTML version deleted]]


From dwin@emiu@ @ending from comc@@t@net  Sun Oct 28 17:58:28 2018
From: dwin@emiu@ @ending from comc@@t@net (David Winsemius)
Date: Sun, 28 Oct 2018 09:58:28 -0700
Subject: [R] "logical indexing,
 " [was] match() question or needle haystack problem for a data.frame
In-Reply-To: <3ae8b56c-b807-3491-9671-55b5e07c4230@krueger-family.de>
References: <cac83a2c-2edd-e0e9-8b54-96afd48d401d@krueger-family.de>
 <CAGxFJbQrCaH6jLzMU60dx-U7m3oNT-zt1FhUOmcaOb-8njrp2w@mail.gmail.com>
 <CAGgJW74Tebw5CNDGVSf32bF7cMwkM3z=qi++8-SUPFYOHynYGQ@mail.gmail.com>
 <6ebcd80a-1786-34bb-d852-d05bfa24c9bc@krueger-family.de>
 <CAGxFJbS7vgQQK8t-X_z==on+jzYtDMmroCv3hPM6HWyU0Uq7Jw@mail.gmail.com>
 <35998e7b-b02b-9993-5b61-fb20978a39f4@krueger-family.de>
 <410772ED-27FA-427D-BA16-83205608EDE2@gmail.com>
 <3ae8b56c-b807-3491-9671-55b5e07c4230@krueger-family.de>
Message-ID: <0D78E2FA-C3B3-4CB8-B794-FBC71AFC47F5@comcast.net>



> On Oct 25, 2018, at 11:28 PM, Knut Krueger <rhelp at krueger-family.de> wrote:
> 
> Am 25.10.18 um 16:13 schrieb peter dalgaard:
>> 
>> Yes: x[!(x$A %in% y$B),]
> 
> Ok thats in my opinion a little workaround
> why?:
> 
> There is an
> = and !=
> < and >
> 
> 
> means the opposite is available between terms.
> 
> why is there f.e no %!in%, %notin%  or !%in%
> 
> This would be more intuitive.

This illustrates a failure to read the obvious help page completely. The "Examples" section includes a definition of "%w/o%" which is exactly what was desired.

-- 
David.
> 
> Kind regards Knut
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @nowb@ll0916 @ending from 163@com  Sun Oct 28 16:16:32 2018
From: @nowb@ll0916 @ending from 163@com (snowball0916)
Date: Sun, 28 Oct 2018 23:16:32 +0800
Subject: [R] date and time data on x axis
Message-ID: <2018102823163020889853@163.com>

Hi, guys
How do you guys deal with the date and time data on x axis?
I have some trouble with it. Could you help with this?

=============
Sample Data
=============
The sample data look like this:

20181028_10:00:00 600 
20181028_10:00:01 500 
20181028_10:00:02 450 
20181028_10:00:03 660
......

=============
My Code
=============

library(lubridate)
mydata <- read.table("e:/R_study/graph_test2.txt")
xdata <- ymd_hms(mydata$V1)
ydata <- mydata$V2
plot(xdata, ydata, type="o")


=============
Questions:
=============

1. Why my x axis does not show me the correct date time like ""2018-10-28 10:00:00 UTC" ?
2. If my data is very huge(like data in every second and the data has the whole day , even the whole month), how can I display the x axis in a neat and clean way?

Thanks very much.
 



	[[alternative HTML version deleted]]


From ruipb@rr@d@@ @ending from @@po@pt  Sun Oct 28 19:53:49 2018
From: ruipb@rr@d@@ @ending from @@po@pt (Rui Barradas)
Date: Sun, 28 Oct 2018 18:53:49 +0000
Subject: [R] date and time data on x axis
In-Reply-To: <2018102823163020889853@163.com>
References: <2018102823163020889853@163.com>
Message-ID: <793bce3a-a029-f235-96f6-64cc47891136@sapo.pt>

Hello,

Maybe you could get some inspiration in the following code.


op <- par(mar = c(4, 0, 0, 0) + par("mar"))

plot(xdata, ydata, type = "o", xaxt = "n")
axis.POSIXct(1, xdata, at = xdata, labels = xdata, las = 2)

par(op)


The important part is the call axis.POSIXct, argument las = 2 and the 
call to par is to make sure that the labels are visible.


Hope this helps,

Rui Barradas


?s 15:16 de 28/10/2018, snowball0916 escreveu:
> Hi, guys
> How do you guys deal with the date and time data on x axis?
> I have some trouble with it. Could you help with this?
> 
> =============
> Sample Data
> =============
> The sample data look like this:
> 
> 20181028_10:00:00 600
> 20181028_10:00:01 500
> 20181028_10:00:02 450
> 20181028_10:00:03 660
> ......
> 
> =============
> My Code
> =============
> 
> library(lubridate)
> mydata <- read.table("e:/R_study/graph_test2.txt")
> xdata <- ymd_hms(mydata$V1)
> ydata <- mydata$V2
> plot(xdata, ydata, type="o")
> 
> 
> =============
> Questions:
> =============
> 
> 1. Why my x axis does not show me the correct date time like ""2018-10-28 10:00:00 UTC" ?
> 2. If my data is very huge(like data in every second and the data has the whole day , even the whole month), how can I display the x axis in a neat and clean way?
> 
> Thanks very much.
>   
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From jholtm@n @ending from gm@il@com  Sun Oct 28 22:53:28 2018
From: jholtm@n @ending from gm@il@com (jim holtman)
Date: Sun, 28 Oct 2018 14:53:28 -0700
Subject: [R] date and time data on x axis
In-Reply-To: <2018102823163020889853@163.com>
References: <2018102823163020889853@163.com>
Message-ID: <CAAxdm-6Wc2007b=6FR0geAXWhJnODPXjfhsgOwLmRe+rRBjM9Q@mail.gmail.com>

You need to specify what the format of the date will be.  I am using
ggplot for the plot:


    library(lubridate)
    library(tidyverse)
    mydata <- read.table(text = "time value
    20181028_10:00:00 600
    20181028_10:00:01 500
    20181028_10:00:02 450
    20181028_10:00:03 660", header = TRUE, as.is = TRUE)

    mydata <- mutate(mydata,
                     time = ymd_hms(time)
    )

    ggplot(mydata, aes(time, value)) +
      geom_point() +
      scale_x_datetime(date_labels = "%m/%d %H:%M:%S"
      ) +
      theme(axis.text.x = element_text(angle = 25, vjust = 1.0, hjust = 1.0))

Jim Holtman
Data Munger Guru

What is the problem that you are trying to solve?
Tell me what you want to do, not how you want to do it.

Jim Holtman
Data Munger Guru

What is the problem that you are trying to solve?
Tell me what you want to do, not how you want to do it.


On Sun, Oct 28, 2018 at 11:23 AM snowball0916 <snowball0916 at 163.com> wrote:
>
> Hi, guys
> How do you guys deal with the date and time data on x axis?
> I have some trouble with it. Could you help with this?
>
> =============
> Sample Data
> =============
> The sample data look like this:
>
> 20181028_10:00:00 600
> 20181028_10:00:01 500
> 20181028_10:00:02 450
> 20181028_10:00:03 660
> ......
>
> =============
> My Code
> =============
>
> library(lubridate)
> mydata <- read.table("e:/R_study/graph_test2.txt")
> xdata <- ymd_hms(mydata$V1)
> ydata <- mydata$V2
> plot(xdata, ydata, type="o")
>
>
> =============
> Questions:
> =============
>
> 1. Why my x axis does not show me the correct date time like ""2018-10-28 10:00:00 UTC" ?
> 2. If my data is very huge(like data in every second and the data has the whole day , even the whole month), how can I display the x axis in a neat and clean way?
>
> Thanks very much.
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bl@cki@h952 @ending from gm@il@com  Sun Oct 28 21:26:27 2018
From: bl@cki@h952 @ending from gm@il@com (Black Yellow)
Date: Sun, 28 Oct 2018 15:26:27 -0500
Subject: [R] Gamma Simulation from Exponential Distribution: find sample
 size given power and sig.Level
Message-ID: <CAM_JVUGuj2QZt0EUmi-jzDSL3mp5KpBn=U4JvNHwmc2tsic_Uw@mail.gmail.com>

I built my function to simulate two gamma distributions X and Y based on the
sum of i.i.d exponential distributions. Assume my code is correct about this
simulation, I am interested in finding an equal sample size n for X and Y
such that n can be determined given 90% power and 5% significance level.

My thought process is that I create a sequence of n's value and use a for
loop to reiterate each n value in the sequence along with an "if" statement
saying that if given the n value, 95% of the time when I replicate the
process, the probability that I reject the null hypothesis given the
alternative is true is 90%.

The problem I am facing is that n value is always the maximum within my
n_seq. I am doubting there must be something wrong when I generate my two
Gamma distributions.

Any input is appreciated.

    set.seed(3701)
    n_seq = seq(from = 1, to = 200, by = 1)
    Z.list = numeric(reps)
    var.list = numeric(reps)

    gamma.sim = function(n, mu){
      for(j in 1:5e5){
          u.list = runif(n = n)
          x.list = -mu*log(1-u.list)
          Z.list[j] = sum(x.list)
      }
      return(Z.list)
    }


    # Generate n generations for X.gamma and Y.gamma
    gen_p_vals <- function(n = reps){
      p_vec <- numeric(reps)
      for(ii in 1:reps){
        x <- gamma.sim(n = 79, mu = 1)
        y <- gamma.sim(n = 80, mu = 1)
        t_stat_numerator <- mean(x) - mean(y) - 0 # Test Statistic under
null hypothesis
        s_p <- sqrt(sum((x-mean(x))^2) + sum((y-mean(y))^2)) /
(sqrt(2*reps-2))
        t_stat <- t_stat_numerator /(s_p*(sqrt((1/reps)+(1/reps))))
        p_vec[ii] <- 2* pt(-abs(t_stat), 2*reps-2)
      }
      return(p_vec)
    }
    power_pvals <- gen_p_vals(n = 10)
    mean(power_pvals < 0.05)

    for(j in 2:100){
      power_pvals = gen_p_vals(n = n_seq[j])
      if (mean(power_pvals < 0.05) == 0.90){
        print(j)
      }
    }

	[[alternative HTML version deleted]]


From @nowb@ll0916 @ending from 163@com  Mon Oct 29 15:03:47 2018
From: @nowb@ll0916 @ending from 163@com (snowball0916)
Date: Mon, 29 Oct 2018 22:03:47 +0800
Subject: [R] date and time data on x axis
References: <2018102823163020889853@163.com>, 
 <793bce3a-a029-f235-96f6-64cc47891136@sapo.pt>
Message-ID: <2018102922034545652561@163.com>

Hi, Rui
Thanks for your code, even though I'm not fully understand it.
And I am new to R, could you kindly help me with
-1). what's the nested usage stand for?
op <- par(mar = c(4, 0, 0, 0) + par("mar"))

-2). how can I get the axis.POSIXct usage or help?
I use help(axis) and help(POSIXct) and not found the actual use.

Thanks very much.






 
From: Rui Barradas
Date: 2018-10-29 02:53
To: snowball0916; r-help
Subject: Re: [R] date and time data on x axis
Hello,
 
Maybe you could get some inspiration in the following code.
 
 
op <- par(mar = c(4, 0, 0, 0) + par("mar"))
 
plot(xdata, ydata, type = "o", xaxt = "n")
axis.POSIXct(1, xdata, at = xdata, labels = xdata, las = 2)
 
par(op)
 
 
The important part is the call axis.POSIXct, argument las = 2 and the 
call to par is to make sure that the labels are visible.
 
 
Hope this helps,
 
Rui Barradas
 
 
?s 15:16 de 28/10/2018, snowball0916 escreveu:
> Hi, guys
> How do you guys deal with the date and time data on x axis?
> I have some trouble with it. Could you help with this?
> 
> =============
> Sample Data
> =============
> The sample data look like this:
> 
> 20181028_10:00:00 600
> 20181028_10:00:01 500
> 20181028_10:00:02 450
> 20181028_10:00:03 660
> ......
> 
> =============
> My Code
> =============
> 
> library(lubridate)
> mydata <- read.table("e:/R_study/graph_test2.txt")
> xdata <- ymd_hms(mydata$V1)
> ydata <- mydata$V2
> plot(xdata, ydata, type="o")
> 
> 
> =============
> Questions:
> =============
> 
> 1. Why my x axis does not show me the correct date time like ""2018-10-28 10:00:00 UTC" ?
> 2. If my data is very huge(like data in every second and the data has the whole day , even the whole month), how can I display the x axis in a neat and clean way?
> 
> Thanks very much.
>   
> 
> 
> 
> [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

	[[alternative HTML version deleted]]


From @nowb@ll0916 @ending from 163@com  Mon Oct 29 15:10:53 2018
From: @nowb@ll0916 @ending from 163@com (snowball0916)
Date: Mon, 29 Oct 2018 22:10:53 +0800
Subject: [R] date and time data on x axis
References: <2018102823163020889853@163.com>, 
 <CAAxdm-6Wc2007b=6FR0geAXWhJnODPXjfhsgOwLmRe+rRBjM9Q@mail.gmail.com>
Message-ID: <2018102922105253138463@163.com>

Hi, Jim
Thanks very much, I will need to study your code, though.
Will large volume of data will affect the x axis display?
Thanks again. 
 


 
From: jim holtman
Date: 2018-10-29 05:53
To: snowball0916
CC: R mailing list
Subject: Re: [R] date and time data on x axis
You need to specify what the format of the date will be.  I am using
ggplot for the plot:
 
 
    library(lubridate)
    library(tidyverse)
    mydata <- read.table(text = "time value
    20181028_10:00:00 600
    20181028_10:00:01 500
    20181028_10:00:02 450
    20181028_10:00:03 660", header = TRUE, as.is = TRUE)
 
    mydata <- mutate(mydata,
                     time = ymd_hms(time)
    )
 
    ggplot(mydata, aes(time, value)) +
      geom_point() +
      scale_x_datetime(date_labels = "%m/%d %H:%M:%S"
      ) +
      theme(axis.text.x = element_text(angle = 25, vjust = 1.0, hjust = 1.0))
 
Jim Holtman
Data Munger Guru
 
What is the problem that you are trying to solve?
Tell me what you want to do, not how you want to do it.
 
Jim Holtman
Data Munger Guru
 
What is the problem that you are trying to solve?
Tell me what you want to do, not how you want to do it.
 
 
On Sun, Oct 28, 2018 at 11:23 AM snowball0916 <snowball0916 at 163.com> wrote:
>
> Hi, guys
> How do you guys deal with the date and time data on x axis?
> I have some trouble with it. Could you help with this?
>
> =============
> Sample Data
> =============
> The sample data look like this:
>
> 20181028_10:00:00 600
> 20181028_10:00:01 500
> 20181028_10:00:02 450
> 20181028_10:00:03 660
> ......
>
> =============
> My Code
> =============
>
> library(lubridate)
> mydata <- read.table("e:/R_study/graph_test2.txt")
> xdata <- ymd_hms(mydata$V1)
> ydata <- mydata$V2
> plot(xdata, ydata, type="o")
>
>
> =============
> Questions:
> =============
>
> 1. Why my x axis does not show me the correct date time like ""2018-10-28 10:00:00 UTC" ?
> 2. If my data is very huge(like data in every second and the data has the whole day , even the whole month), how can I display the x axis in a neat and clean way?
>
> Thanks very much.
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From m@cqueen1 @ending from llnl@gov  Mon Oct 29 17:01:12 2018
From: m@cqueen1 @ending from llnl@gov (MacQueen, Don)
Date: Mon, 29 Oct 2018 16:01:12 +0000
Subject: [R] date and time data on x axis
In-Reply-To: <2018102823163020889853@163.com>
References: <2018102823163020889853@163.com>
Message-ID: <676F6E37-0980-4540-B5C1-8F25A7DB1E3C@llnl.gov>

Here's an example of 24 hours of data at one second intervals.

npts <- 24*60*60

df <- data.frame(
                 tm = seq( Sys.time(), by='1 sec', length=npts),
                 yd = round(runif(npts),2)
                 )

head(df)

with(df, plot(tm,yd))

The x axis appears to me to be displayed in a neat and clean way. I don't understand what the problem is.
(The data itself is illegible, but that's a different problem.)

The default axis may not be what you want, but it is neat and clean. To choose the axis tick marks and labels yourself, use axis() or axis.POSIXct, as Rui mentioned.  help(axis.POSIXct) provides examples of actual use.

I prefer to do as much as possible with base R, so look at this example:

> as.POSIXct( '20181028_10:00:00' , format='%Y%m%d_%H:%M:%S')
[1] "2018-10-28 10:00:00 PDT"

Therefore 
  xdata <- as.POSIXct(mydata$V1, format='%Y%m%d_%H:%M:%S')
is perfectly adequate (the lubridate package is not essential here)


par() is the function that sets graphical parameters. There are many graphical parameters.
"mar" is the parameter that specifies the sizes of the plot margins  ( see ?par )

This expression
   op <- par(mar = c(4, 0, 0, 0) + par("mar"))
is a way to modify the values of the "mar" parameter.

Type the following commands
   par('mar')
   par()$mar        ## an alternative
   c(4,0,0,0) + par('mar')
   par(mar = c(4, 0, 0, 0) + par("mar"))
   par('mar')        ## to see that the margins have been changed

--
Don MacQueen
Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062
Lab cell 925-724-7509
 
 

?On 10/28/18, 8:16 AM, "R-help on behalf of snowball0916" <r-help-bounces at r-project.org on behalf of snowball0916 at 163.com> wrote:

    Hi, guys
    How do you guys deal with the date and time data on x axis?
    I have some trouble with it. Could you help with this?
    
    =============
    Sample Data
    =============
    The sample data look like this:
    
    20181028_10:00:00 600 
    20181028_10:00:01 500 
    20181028_10:00:02 450 
    20181028_10:00:03 660
    ......
    
    =============
    My Code
    =============
    
    library(lubridate)
    mydata <- read.table("e:/R_study/graph_test2.txt")
    xdata <- ymd_hms(mydata$V1)
    ydata <- mydata$V2
    plot(xdata, ydata, type="o")
    
    
    =============
    Questions:
    =============
    
    1. Why my x axis does not show me the correct date time like ""2018-10-28 10:00:00 UTC" ?
    2. If my data is very huge(like data in every second and the data has the whole day , even the whole month), how can I display the x axis in a neat and clean way?
    
    Thanks very much.
     
    
    
    
    	[[alternative HTML version deleted]]
    
    ______________________________________________
    R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    https://stat.ethz.ch/mailman/listinfo/r-help
    PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    and provide commented, minimal, self-contained, reproducible code.
    


From m@cqueen1 @ending from llnl@gov  Mon Oct 29 17:13:01 2018
From: m@cqueen1 @ending from llnl@gov (MacQueen, Don)
Date: Mon, 29 Oct 2018 16:13:01 +0000
Subject: [R] "logical indexing,
 " [was] match() question or needle haystack problem for a data.frame
In-Reply-To: <3ae8b56c-b807-3491-9671-55b5e07c4230@krueger-family.de>
References: <cac83a2c-2edd-e0e9-8b54-96afd48d401d@krueger-family.de>
 <CAGxFJbQrCaH6jLzMU60dx-U7m3oNT-zt1FhUOmcaOb-8njrp2w@mail.gmail.com>
 <CAGgJW74Tebw5CNDGVSf32bF7cMwkM3z=qi++8-SUPFYOHynYGQ@mail.gmail.com>
 <6ebcd80a-1786-34bb-d852-d05bfa24c9bc@krueger-family.de>
 <CAGxFJbS7vgQQK8t-X_z==on+jzYtDMmroCv3hPM6HWyU0Uq7Jw@mail.gmail.com>
 <35998e7b-b02b-9993-5b61-fb20978a39f4@krueger-family.de>
 <410772ED-27FA-427D-BA16-83205608EDE2@gmail.com>
 <3ae8b56c-b807-3491-9671-55b5e07c4230@krueger-family.de>
Message-ID: <94B05554-53FA-468A-A38D-7D0F926F27DE@llnl.gov>

Wrong comparisons, I think.

The opposite of
  A & B
is 
  !(A & B)

There is no single operator that can replace the "&" in A & B that gives the "opposite"

-Don

--
Don MacQueen
Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062
Lab cell 925-724-7509
 
 

?On 10/25/18, 11:28 PM, "R-help on behalf of Knut Krueger" <r-help-bounces at r-project.org on behalf of rhelp at krueger-family.de> wrote:

    Am 25.10.18 um 16:13 schrieb peter dalgaard:
    > 
    >
    > Yes: x[!(x$A %in% y$B),]
    
    Ok thats in my opinion a little workaround
    why?:
    
    There is an
    = and !=
    < and >
    
    
    means the opposite is available between terms.
    
    why is there f.e no %!in%, %notin%  or !%in%
    
    This would be more intuitive.
    
    Kind regards Knut
    
    ______________________________________________
    R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    https://stat.ethz.ch/mailman/listinfo/r-help
    PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    and provide commented, minimal, self-contained, reproducible code.
    


From ruipb@rr@d@@ @ending from @@po@pt  Mon Oct 29 17:38:27 2018
From: ruipb@rr@d@@ @ending from @@po@pt (Rui Barradas)
Date: Mon, 29 Oct 2018 16:38:27 +0000
Subject: [R] date and time data on x axis
In-Reply-To: <2018102922034545652561@163.com>
References: <2018102823163020889853@163.com>
 <793bce3a-a029-f235-96f6-64cc47891136@sapo.pt>
 <2018102922034545652561@163.com>
Message-ID: <2e9fa5b3-6b8c-5df5-83f7-034c2c856be8@sapo.pt>

Hello,

Inline.

?s 14:03 de 29/10/2018, snowball0916 escreveu:
> Hi, Rui
> Thanks for your code, even though I'm not fully understand it.
> And I am new to R, could you kindly help me with
> -1). what's the nested usage stand for?
> op <- par(mar = c(4, 0, 0, 0) + par("mar"))

See the help for ?par. You have

mar
A numerical vector of the form c(bottom, left, top, right) which gives 
the number of lines of margin to be specified on the four sides of the 
plot. The default is c(5, 4, 4, 2) + 0.1.


So par("mar") returns c(5.1, 4.1, 4.1, 2.1)
In order to see the x axis labels, that are longer than normal, I have 
added 4 to the bottom only, c(4, 0, 0, 0) + default_value.
And par() returns the previous values of the graphices parameters, so 
save them in op (old param) and restore the defaults when done plotting.

> 
> -2). how can I get the axis.POSIXct usage or help?
> I use help(axis)and help(POSIXct)and not found the actual use.

It's ?axis.POSIXct or help('axis.POSIXct'). You want the S3 method for 
objects of class "POSIXct".

Hope this helps,

Rui Barradas

> 
> Thanks very much.
> 
> 
> 
> 
> ------------------------------------------------------------------------
> 
>     *From:* Rui Barradas <mailto:ruipbarradas at sapo.pt>
>     *Date:*?2018-10-29?02:53
>     *To:* snowball0916 <mailto:snowball0916 at 163.com>; r-help
>     <mailto:r-help at r-project.org>
>     *Subject:*?Re: [R] date and time data on x axis
>     Hello,
>     Maybe you could get some inspiration in the following code.
>     op <- par(mar = c(4, 0, 0, 0) + par("mar"))
>     plot(xdata, ydata, type = "o", xaxt = "n")
>     axis.POSIXct(1, xdata, at = xdata, labels = xdata, las = 2)
>     par(op)
>     The important part is the call axis.POSIXct, argument las = 2 and the
>     call to par is to make sure that the labels are visible.
>     Hope this helps,
>     Rui Barradas
>     ?s 15:16 de 28/10/2018, snowball0916 escreveu:
>      > Hi, guys
>      > How do you guys deal with the date and time data on x axis?
>      > I have some trouble with it. Could you help with this?
>      >
>      > =============
>      > Sample Data
>      > =============
>      > The sample data look like this:
>      >
>      > 20181028_10:00:00 600
>      > 20181028_10:00:01 500
>      > 20181028_10:00:02 450
>      > 20181028_10:00:03 660
>      > ......
>      >
>      > =============
>      > My Code
>      > =============
>      >
>      > library(lubridate)
>      > mydata <- read.table("e:/R_study/graph_test2.txt")
>      > xdata <- ymd_hms(mydata$V1)
>      > ydata <- mydata$V2
>      > plot(xdata, ydata, type="o")
>      >
>      >
>      > =============
>      > Questions:
>      > =============
>      >
>      > 1. Why my x axis does not show me the correct date time like
>     ""2018-10-28 10:00:00 UTC" ?
>      > 2. If my data is very huge(like data in every second and the data
>     has the whole day , even the whole month), how can I display the x
>     axis in a neat and clean way?
>      >
>      > Thanks very much.
>      >
>      >
>      >
>      >
>      > [[alternative HTML version deleted]]
>      >
>      > ______________________________________________
>      > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>      > https://stat.ethz.ch/mailman/listinfo/r-help
>      > PLEASE do read the posting guide
>     http://www.R-project.org/posting-guide.html
>      > and provide commented, minimal, self-contained, reproducible code.
>      >
>


From m@cqueen1 @ending from llnl@gov  Mon Oct 29 21:00:04 2018
From: m@cqueen1 @ending from llnl@gov (MacQueen, Don)
Date: Mon, 29 Oct 2018 20:00:04 +0000
Subject: [R] Gamma Simulation from Exponential Distribution: find sample
 size given power and sig.Level
In-Reply-To: <CAM_JVUGuj2QZt0EUmi-jzDSL3mp5KpBn=U4JvNHwmc2tsic_Uw@mail.gmail.com>
References: <CAM_JVUGuj2QZt0EUmi-jzDSL3mp5KpBn=U4JvNHwmc2tsic_Uw@mail.gmail.com>
Message-ID: <538EF24C-2096-4E43-9108-E3DAE526633B@llnl.gov>

If this is homework, then r-help has a no homework policy. I'm assuming that if it is homework then the focus is on statistical concepts, not on R programming.

It looks like your gen_p_vals function should be defined as

    gen_p_vals <- function(reps = n)

instead of n = reps.

Why not just use the rgamma() function to simulate your gamma distributions?
Why not just use the t.test() function do calculate the t test?
But if you really want to calculate the t test manually, use the var() function in the denominator, instead of that x-mean(x) business.
It's unnecessary to use return().
Initializing Z.list outside the gamma.sim function does no good.
Are you using the variable "n" for different purposes in different places? If so, it's confusing.

Although it didn't appear to cause problems this time, sending html formatted email to r-help is generally not a good idea.

(and real names are preferred)

-Don

--
Don MacQueen
Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062
Lab cell 925-724-7509
 
 

?On 10/28/18, 1:26 PM, "R-help on behalf of Black Yellow" <r-help-bounces at r-project.org on behalf of blackish952 at gmail.com> wrote:

    I built my function to simulate two gamma distributions X and Y based on the
    sum of i.i.d exponential distributions. Assume my code is correct about this
    simulation, I am interested in finding an equal sample size n for X and Y
    such that n can be determined given 90% power and 5% significance level.
    
    My thought process is that I create a sequence of n's value and use a for
    loop to reiterate each n value in the sequence along with an "if" statement
    saying that if given the n value, 95% of the time when I replicate the
    process, the probability that I reject the null hypothesis given the
    alternative is true is 90%.
    
    The problem I am facing is that n value is always the maximum within my
    n_seq. I am doubting there must be something wrong when I generate my two
    Gamma distributions.
    
    Any input is appreciated.
    
        set.seed(3701)
        n_seq = seq(from = 1, to = 200, by = 1)
        Z.list = numeric(reps)
        var.list = numeric(reps)
    
        gamma.sim = function(n, mu){
          for(j in 1:5e5){
              u.list = runif(n = n)
              x.list = -mu*log(1-u.list)
              Z.list[j] = sum(x.list)
          }
          return(Z.list)
        }
    
    
        # Generate n generations for X.gamma and Y.gamma
        gen_p_vals <- function(n = reps){
          p_vec <- numeric(reps)
          for(ii in 1:reps){
            x <- gamma.sim(n = 79, mu = 1)
            y <- gamma.sim(n = 80, mu = 1)
            t_stat_numerator <- mean(x) - mean(y) - 0 # Test Statistic under
    null hypothesis
            s_p <- sqrt(sum((x-mean(x))^2) + sum((y-mean(y))^2)) /
    (sqrt(2*reps-2))
            t_stat <- t_stat_numerator /(s_p*(sqrt((1/reps)+(1/reps))))
            p_vec[ii] <- 2* pt(-abs(t_stat), 2*reps-2)
          }
          return(p_vec)
        }
        power_pvals <- gen_p_vals(n = 10)
        mean(power_pvals < 0.05)
    
        for(j in 2:100){
          power_pvals = gen_p_vals(n = n_seq[j])
          if (mean(power_pvals < 0.05) == 0.90){
            print(j)
          }
        }
    
    	[[alternative HTML version deleted]]
    
    ______________________________________________
    R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    https://stat.ethz.ch/mailman/listinfo/r-help
    PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    and provide commented, minimal, self-contained, reproducible code.
    


From v@rin@@ch@ @ending from y@hoo@fr  Mon Oct 29 21:46:32 2018
From: v@rin@@ch@ @ending from y@hoo@fr (varin sacha)
Date: Mon, 29 Oct 2018 20:46:32 +0000 (UTC)
Subject: [R] MSE Cross-validation with factor interactions terms MARS
 regression
References: <96346275.28234122.1540845992354.ref@mail.yahoo.com>
Message-ID: <96346275.28234122.1540845992354@mail.yahoo.com>


Dear R-experts,
I am having trouble while doing crossvalidation with a MARS regression including an interaction term between a factor variable (education) and 1 continuous variable (age). How could I solve my problem ?

Here below my reproducible example.

#######

install.packages("ISLR")

library(ISLR)

install.packages("earth")

library(earth)

a<-as.factor(Wage$education)

# Create a list to store the results

lst<-list()

# This statement does the repetitions (looping)

for(i in 1?:200) {

n=dim(Wage)[1]

p=0.667

sam=sample(1?:n,floor(p*n),replace=FALSE)

Training =Wage [sam,]

Testing = Wage [-sam,]

mars5<-earth(wage~age+education+year+age*a, data=Wage)

ypred=predict(mars5,newdata=Testing)

y=Testing$wage

y=Wage[-sam,]$wage

MSE = mean(y-ypred)^2

MSE

lst[i]<-MSE

}

mean(unlist(lst))

summary(mars5)

#######


From bgunter@4567 @ending from gm@il@com  Mon Oct 29 22:07:11 2018
From: bgunter@4567 @ending from gm@il@com (Bert Gunter)
Date: Mon, 29 Oct 2018 14:07:11 -0700
Subject: [R] MSE Cross-validation with factor interactions terms MARS
 regression
In-Reply-To: <96346275.28234122.1540845992354@mail.yahoo.com>
References: <96346275.28234122.1540845992354.ref@mail.yahoo.com>
 <96346275.28234122.1540845992354@mail.yahoo.com>
Message-ID: <CAGxFJbQ6wKnSFOopdS=8yyL_fvwi4eTY_sOuqz=KPAn7HRMffg@mail.gmail.com>

I did no analysis of your code or thought process, but noticed that you had
the following two successive lines in your code:


y=Testing$wage

y=Wage[-sam,]$wage

This obviously makes no sense, so maybe you should fix this first and then
proceed.

-- Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Oct 29, 2018 at 1:46 PM varin sacha via R-help <r-help at r-project.org>
wrote:

>
> Dear R-experts,
> I am having trouble while doing crossvalidation with a MARS regression
> including an interaction term between a factor variable (education) and 1
> continuous variable (age). How could I solve my problem ?
>
> Here below my reproducible example.
>
> #######
>
> install.packages("ISLR")
>
> library(ISLR)
>
> install.packages("earth")
>
> library(earth)
>
> a<-as.factor(Wage$education)
>
> # Create a list to store the results
>
> lst<-list()
>
> # This statement does the repetitions (looping)
>
> for(i in 1 :200) {
>
> n=dim(Wage)[1]
>
> p=0.667
>
> sam=sample(1 :n,floor(p*n),replace=FALSE)
>
> Training =Wage [sam,]
>
> Testing = Wage [-sam,]
>
> mars5<-earth(wage~age+education+year+age*a, data=Wage)
>
> ypred=predict(mars5,newdata=Testing)
>
> y=Testing$wage
>
> y=Wage[-sam,]$wage
>
> MSE = mean(y-ypred)^2
>
> MSE
>
> lst[i]<-MSE
>
> }
>
> mean(unlist(lst))
>
> summary(mars5)
>
> #######
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From v@rin@@ch@ @ending from y@hoo@fr  Mon Oct 29 23:50:15 2018
From: v@rin@@ch@ @ending from y@hoo@fr (varin sacha)
Date: Mon, 29 Oct 2018 22:50:15 +0000 (UTC)
Subject: [R] MSE Cross-validation with factor interactions terms MARS
 regression
In-Reply-To: <CAGxFJbQ6wKnSFOopdS=8yyL_fvwi4eTY_sOuqz=KPAn7HRMffg@mail.gmail.com>
References: <96346275.28234122.1540845992354.ref@mail.yahoo.com>
 <96346275.28234122.1540845992354@mail.yahoo.com>
 <CAGxFJbQ6wKnSFOopdS=8yyL_fvwi4eTY_sOuqz=KPAn7HRMffg@mail.gmail.com>
Message-ID: <2140295663.8388898.1540853415169@mail.yahoo.com>

Hi Bert,

Many thanks, I have fixed it but it still don't work... . 
Best,






Le lundi 29 octobre 2018 ? 22:07:26 UTC+1, Bert Gunter <bgunter.4567 at gmail.com> a ?crit : 





I did no analysis of your code or thought process, but noticed that you had the following two successive lines in your code:


y=Testing$wage

y=Wage[-sam,]$wage

This obviously makes no sense, so maybe you should fix this first and then proceed.

-- Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Oct 29, 2018 at 1:46 PM varin sacha via R-help <r-help at r-project.org> wrote:
> 
> Dear R-experts,
> I am having trouble while doing crossvalidation with a MARS regression including an interaction term between a factor variable (education) and 1 continuous variable (age). How could I solve my problem ?
> 
> Here below my reproducible example.
> 
> #######
> 
> install.packages("ISLR")
> 
> library(ISLR)
> 
> install.packages("earth")
> 
> library(earth)
> 
> a<-as.factor(Wage$education)
> 
> # Create a list to store the results
> 
> lst<-list()
> 
> # This statement does the repetitions (looping)
> 
> for(i in 1?:200) {
> 
> n=dim(Wage)[1]
> 
> p=0.667
> 
> sam=sample(1?:n,floor(p*n),replace=FALSE)
> 
> Training =Wage [sam,]
> 
> Testing = Wage [-sam,]
> 
> mars5<-earth(wage~age+education+year+age*a, data=Wage)
> 
> ypred=predict(mars5,newdata=Testing)
> 
> y=Testing$wage
> 
> y=Wage[-sam,]$wage
> 
> MSE = mean(y-ypred)^2
> 
> MSE
> 
> lst[i]<-MSE
> 
> }
> 
> mean(unlist(lst))
> 
> summary(mars5)
> 
> #######
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 


From pd@lgd @ending from gm@il@com  Tue Oct 30 00:30:06 2018
From: pd@lgd @ending from gm@il@com (peter dalgaard)
Date: Tue, 30 Oct 2018 00:30:06 +0100
Subject: [R] MSE Cross-validation with factor interactions terms MARS
 regression
In-Reply-To: <2140295663.8388898.1540853415169@mail.yahoo.com>
References: <96346275.28234122.1540845992354.ref@mail.yahoo.com>
 <96346275.28234122.1540845992354@mail.yahoo.com>
 <CAGxFJbQ6wKnSFOopdS=8yyL_fvwi4eTY_sOuqz=KPAn7HRMffg@mail.gmail.com>
 <2140295663.8388898.1540853415169@mail.yahoo.com>
Message-ID: <D4C000F2-239D-4066-96FE-37358C1EBE27@gmail.com>

The two lines did the same thing, so little wonder...

More likely, the culprit is that a is assigned in the global environment, and then used in a prediction on a subset.

Also, 

- you are defining Training, but as far as I can tell, you're not using it. Not likely to be an issue in itself, but wouldn't you want to fit on the Training set and evaluate on the Testing? 

- your model de facto contains both education as a numeric predictor and as.factor(education) as well as the interaction term age:as.factor(education). Does that make sense modelling-wise??

-pd

> On 29 Oct 2018, at 23:50 , varin sacha via R-help <r-help at r-project.org> wrote:
> 
> Hi Bert,
> 
> Many thanks, I have fixed it but it still don't work... . 
> Best,
> 
> 
> 
> 
> 
> 
> Le lundi 29 octobre 2018 ? 22:07:26 UTC+1, Bert Gunter <bgunter.4567 at gmail.com> a ?crit : 
> 
> 
> 
> 
> 
> I did no analysis of your code or thought process, but noticed that you had the following two successive lines in your code:
> 
> 
> y=Testing$wage
> 
> y=Wage[-sam,]$wage
> 
> This obviously makes no sense, so maybe you should fix this first and then proceed.
> 
> -- Bert
> 
> 
> Bert Gunter
> 
> "The trouble with having an open mind is that people keep coming along and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> 
> 
> On Mon, Oct 29, 2018 at 1:46 PM varin sacha via R-help <r-help at r-project.org> wrote:
>> 
>> Dear R-experts,
>> I am having trouble while doing crossvalidation with a MARS regression including an interaction term between a factor variable (education) and 1 continuous variable (age). How could I solve my problem ?
>> 
>> Here below my reproducible example.
>> 
>> #######
>> 
>> install.packages("ISLR")
>> 
>> library(ISLR)
>> 
>> install.packages("earth")
>> 
>> library(earth)
>> 
>> a<-as.factor(Wage$education)
>> 
>> # Create a list to store the results
>> 
>> lst<-list()
>> 
>> # This statement does the repetitions (looping)
>> 
>> for(i in 1 :200) {
>> 
>> n=dim(Wage)[1]
>> 
>> p=0.667
>> 
>> sam=sample(1 :n,floor(p*n),replace=FALSE)
>> 
>> Training =Wage [sam,]
>> 
>> Testing = Wage [-sam,]
>> 
>> mars5<-earth(wage~age+education+year+age*a, data=Wage)
>> 
>> ypred=predict(mars5,newdata=Testing)
>> 
>> y=Testing$wage
>> 
>> y=Wage[-sam,]$wage
>> 
>> MSE = mean(y-ypred)^2
>> 
>> MSE
>> 
>> lst[i]<-MSE
>> 
>> }
>> 
>> mean(unlist(lst))
>> 
>> summary(mars5)
>> 
>> #######
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From m@rc_grt @ending from y@hoo@fr  Tue Oct 30 16:06:13 2018
From: m@rc_grt @ending from y@hoo@fr (Marc Girondot)
Date: Tue, 30 Oct 2018 16:06:13 +0100
Subject: [R] Should package be reinstalled when exterbal library is changed
Message-ID: <cc48043b-b29c-b8d4-99d2-fc400ee99581@yahoo.fr>

Dear R-experts,

Some packages need external libraries to be installed. For example ncdf4 
needs netcdf library or flextable need pandoc.

When there is new version of external library, should the R package be 
installed again to use the new external version, or do the package finds 
itself the new version? Perhaps the answer is "It depends on the 
package", and so how to know if it requires new compilation or not ?

Thanks

Marc


From ericjberger @ending from gm@il@com  Tue Oct 30 19:17:02 2018
From: ericjberger @ending from gm@il@com (Eric Berger)
Date: Tue, 30 Oct 2018 20:17:02 +0200
Subject: [R] 
 Should package be reinstalled when exterbal library is changed
In-Reply-To: <cc48043b-b29c-b8d4-99d2-fc400ee99581@yahoo.fr>
References: <cc48043b-b29c-b8d4-99d2-fc400ee99581@yahoo.fr>
Message-ID: <CAGgJW77hFbV5Cd09zLrRqbiSt01wXD=6FOarT1qBpYuJ-360pw@mail.gmail.com>

Hi Marc,
Normally updating external libraries would not require re-installing an R
package that uses it.
The R package will be able to "find" the new one, because the updated
library would be in the same place (sort of) as the previous library.
On a linux system this is handled by system soft links such as foo.so -->
foo.so.1 changes to foo.so --> foo.so.2
when a version '2' of the foo shared object (the .so.2) is now available to
replace version 1.
On Windows systems a .DLL corresponds to the linux .so.

While you won't need to re-install an R package you will need to start a
new R session.

At a more advanced level you actually can explicitly tell R which .so (or
.dll) files to pull in via the function dyn.load()
See ?dyn.load for details.

HTH,
Eric





On Tue, Oct 30, 2018 at 5:06 PM Marc Girondot via R-help <
r-help at r-project.org> wrote:

> Dear R-experts,
>
> Some packages need external libraries to be installed. For example ncdf4
> needs netcdf library or flextable need pandoc.
>
> When there is new version of external library, should the R package be
> installed again to use the new external version, or do the package finds
> itself the new version? Perhaps the answer is "It depends on the
> package", and so how to know if it requires new compilation or not ?
>
> Thanks
>
> Marc
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @nowb@ll0916 @ending from 163@com  Tue Oct 30 19:25:00 2018
From: @nowb@ll0916 @ending from 163@com (snowball0916)
Date: Wed, 31 Oct 2018 02:25:00 +0800
Subject: [R] date and time data on x axis
References: <2018102823163020889853@163.com>, 
 <793bce3a-a029-f235-96f6-64cc47891136@sapo.pt>, 
 <2018102922034545652561@163.com>, 
 <2e9fa5b3-6b8c-5df5-83f7-034c2c856be8@sapo.pt>
Message-ID: <20181031022454974691124@163.com>

Hi, Rui
Thank you . I will try later.
Thanks again.

 
 


 
From: Rui Barradas
Date: 2018-10-30 00:38
To: snowball0916; r-help
Subject: Re: [R] date and time data on x axis
Hello,
 
Inline.
 
?s 14:03 de 29/10/2018, snowball0916 escreveu:
> Hi, Rui
> Thanks for your code, even though I'm not fully understand it.
> And I am new to R, could you kindly help me with
> -1). what's the nested usage stand for?
> op <- par(mar = c(4, 0, 0, 0) + par("mar"))
 
See the help for ?par. You have
 
mar
A numerical vector of the form c(bottom, left, top, right) which gives 
the number of lines of margin to be specified on the four sides of the 
plot. The default is c(5, 4, 4, 2) + 0.1.
 
 
So par("mar") returns c(5.1, 4.1, 4.1, 2.1)
In order to see the x axis labels, that are longer than normal, I have 
added 4 to the bottom only, c(4, 0, 0, 0) + default_value.
And par() returns the previous values of the graphices parameters, so 
save them in op (old param) and restore the defaults when done plotting.
 
> 
> -2). how can I get the axis.POSIXct usage or help?
> I use help(axis)and help(POSIXct)and not found the actual use.
 
It's ?axis.POSIXct or help('axis.POSIXct'). You want the S3 method for 
objects of class "POSIXct".
 
Hope this helps,
 
Rui Barradas
 
> 
> Thanks very much.
> 
> 
> 
> 
> ------------------------------------------------------------------------
> 
>     *From:* Rui Barradas <mailto:ruipbarradas at sapo.pt>
>     *Date:* 2018-10-29 02:53
>     *To:* snowball0916 <mailto:snowball0916 at 163.com>; r-help
>     <mailto:r-help at r-project.org>
>     *Subject:* Re: [R] date and time data on x axis
>     Hello,
>     Maybe you could get some inspiration in the following code.
>     op <- par(mar = c(4, 0, 0, 0) + par("mar"))
>     plot(xdata, ydata, type = "o", xaxt = "n")
>     axis.POSIXct(1, xdata, at = xdata, labels = xdata, las = 2)
>     par(op)
>     The important part is the call axis.POSIXct, argument las = 2 and the
>     call to par is to make sure that the labels are visible.
>     Hope this helps,
>     Rui Barradas
>     ?s 15:16 de 28/10/2018, snowball0916 escreveu:
>      > Hi, guys
>      > How do you guys deal with the date and time data on x axis?
>      > I have some trouble with it. Could you help with this?
>      >
>      > =============
>      > Sample Data
>      > =============
>      > The sample data look like this:
>      >
>      > 20181028_10:00:00 600
>      > 20181028_10:00:01 500
>      > 20181028_10:00:02 450
>      > 20181028_10:00:03 660
>      > ......
>      >
>      > =============
>      > My Code
>      > =============
>      >
>      > library(lubridate)
>      > mydata <- read.table("e:/R_study/graph_test2.txt")
>      > xdata <- ymd_hms(mydata$V1)
>      > ydata <- mydata$V2
>      > plot(xdata, ydata, type="o")
>      >
>      >
>      > =============
>      > Questions:
>      > =============
>      >
>      > 1. Why my x axis does not show me the correct date time like
>     ""2018-10-28 10:00:00 UTC" ?
>      > 2. If my data is very huge(like data in every second and the data
>     has the whole day , even the whole month), how can I display the x
>     axis in a neat and clean way?
>      >
>      > Thanks very much.
>      >
>      >
>      >
>      >
>      > [[alternative HTML version deleted]]
>      >
>      > ______________________________________________
>      > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>      > https://stat.ethz.ch/mailman/listinfo/r-help
>      > PLEASE do read the posting guide
>     http://www.R-project.org/posting-guide.html
>      > and provide commented, minimal, self-contained, reproducible code.
>      >
> 

	[[alternative HTML version deleted]]


From @nowb@ll0916 @ending from 163@com  Tue Oct 30 19:25:50 2018
From: @nowb@ll0916 @ending from 163@com (snowball0916)
Date: Wed, 31 Oct 2018 02:25:50 +0800
Subject: [R] date and time data on x axis
References: <2018102823163020889853@163.com>, 
 <676F6E37-0980-4540-B5C1-8F25A7DB1E3C@llnl.gov>
Message-ID: <20181031022549805854125@163.com>

Hi, Don
I got it, I will try and study .
Thanks very much. 
 


 
From: MacQueen, Don
Date: 2018-10-30 00:01
To: snowball0916; r-help
Subject: Re: [R] date and time data on x axis
Here's an example of 24 hours of data at one second intervals.
 
npts <- 24*60*60
 
df <- data.frame(
                 tm = seq( Sys.time(), by='1 sec', length=npts),
                 yd = round(runif(npts),2)
                 )
 
head(df)
 
with(df, plot(tm,yd))
 
The x axis appears to me to be displayed in a neat and clean way. I don't understand what the problem is.
(The data itself is illegible, but that's a different problem.)
 
The default axis may not be what you want, but it is neat and clean. To choose the axis tick marks and labels yourself, use axis() or axis.POSIXct, as Rui mentioned.  help(axis.POSIXct) provides examples of actual use.
 
I prefer to do as much as possible with base R, so look at this example:
 
> as.POSIXct( '20181028_10:00:00' , format='%Y%m%d_%H:%M:%S')
[1] "2018-10-28 10:00:00 PDT"
 
Therefore 
  xdata <- as.POSIXct(mydata$V1, format='%Y%m%d_%H:%M:%S')
is perfectly adequate (the lubridate package is not essential here)
 
 
par() is the function that sets graphical parameters. There are many graphical parameters.
"mar" is the parameter that specifies the sizes of the plot margins  ( see ?par )
 
This expression
   op <- par(mar = c(4, 0, 0, 0) + par("mar"))
is a way to modify the values of the "mar" parameter.
 
Type the following commands
   par('mar')
   par()$mar        ## an alternative
   c(4,0,0,0) + par('mar')
   par(mar = c(4, 0, 0, 0) + par("mar"))
   par('mar')        ## to see that the margins have been changed
 
--
Don MacQueen
Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062
Lab cell 925-724-7509
 
?On 10/28/18, 8:16 AM, "R-help on behalf of snowball0916" <r-help-bounces at r-project.org on behalf of snowball0916 at 163.com> wrote:
 
    Hi, guys
    How do you guys deal with the date and time data on x axis?
    I have some trouble with it. Could you help with this?
    
    =============
    Sample Data
    =============
    The sample data look like this:
    
    20181028_10:00:00 600 
    20181028_10:00:01 500 
    20181028_10:00:02 450 
    20181028_10:00:03 660
    ......
    
    =============
    My Code
    =============
    
    library(lubridate)
    mydata <- read.table("e:/R_study/graph_test2.txt")
    xdata <- ymd_hms(mydata$V1)
    ydata <- mydata$V2
    plot(xdata, ydata, type="o")
    
    
    =============
    Questions:
    =============
    
    1. Why my x axis does not show me the correct date time like ""2018-10-28 10:00:00 UTC" ?
    2. If my data is very huge(like data in every second and the data has the whole day , even the whole month), how can I display the x axis in a neat and clean way?
    
    Thanks very much.
     
    
    
    
    [[alternative HTML version deleted]]
    
    ______________________________________________
    R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    https://stat.ethz.ch/mailman/listinfo/r-help
    PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    and provide commented, minimal, self-contained, reproducible code.
    
 

	[[alternative HTML version deleted]]


From john@bullock @ending from northwe@tern@edu  Tue Oct 30 19:34:25 2018
From: john@bullock @ending from northwe@tern@edu (John G. Bullock)
Date: Tue, 30 Oct 2018 13:34:25 -0500
Subject: [R] grid.grab(): strange behavior of "wrap" argument when working
 with lattice output
Message-ID: <2365dfd1-5222-bad1-43e9-ea740d4a0b26@northwestern.edu>


grid.grab() captures all of the current viewports and stores them as a 
grob. In theory, and often in practice, you can use grid.grab() to store 
an image now for drawing later on. But I have noticed some odd behavior 
of grid.grab() when working with lattice output. It is all related to 
the wrap argument:

1. When wrap = TRUE, the saved grob should produce a drawing faithful to 
the original viewports. But sometimes it doesn't.
 ??? 2. wrap = FALSE is supposed to produce less faithful output if it 
differs at all, but sometimes its output is more faithful.
 ??? 3. Even when using wrap = TRUE, grid.grab() warns me to use wrap = 
TRUE.

Here is a minimal example to illustrate all of these behaviors:

library(grid)
 ??? library(lattice)
 ??? xyplot(1:5 ~ 1:5)
trellis.focus()
 ??? panel.abline(h = 3)
 ??? panel.abline(h = 5)
myGrob <- grid.grab(wrap = TRUE)

At this point, I receive a warning --

 ?? ?? In grabDL(warn, wrap, ...) :
 ? ? ? ? one of more grobs overwritten (grab WILL not be faithful; try 
'wrap = TRUE')

-- which is strange, given that I specified wrap = TRUE.

I proceed by running grid.draw(myGrob). According to Paul Murrell (R 
Graphics, 2nd ed., page 239), using grid.grab(wrap = TRUE) is 
"guaranteed to replicate the original output." But it doesn't. 
Specifically, the top horizontal line (from panel.abline(h = 5)) isn't 
reproduced.

Matters get stranger when I consider the following code:

 ??? xyplot(1:5 ~ 1:5)
 ??? trellis.focus()
 ??? panel.abline(h = 3)
panel.abline(h = 5)
 ??? myGrob <- grid.grab(wrap = FALSE)
grid.draw(myGrob)

These commands are the same as in the previous example, except that this 
time, wrap = FALSE. But this time, grid.draw() does faithfully reproduce 
the captured viewports. So the behavior is the opposite of what I 
expect: when wrap = FALSE, grid.draw() faithfully reproduces the 
captured viewports, but when wrap = TRUE, it doesn't.

I've run these examples in R 3.3.2 and 3.5.1. (Session info from 3.3.2 
is appended.) The result is the same in both cases. Are these bugs, or 
am I overlooking something?

Thank you,
John Bullock


 > sessionInfo()
R version 3.3.2 (2016-10-31)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 17134)

locale:
[1] LC_COLLATE=English_United States.1252 LC_CTYPE=English_United 
States.1252??? LC_MONETARY=English_United States.1252 LC_NUMERIC=C
[5] LC_TIME=English_United States.1252

attached base packages:
[1] grid????? stats???? graphics? grDevices utils???? datasets methods base

other attached packages:
[1] lattice_0.20-34 RevoUtilsMath_10.0.0

loaded via a namespace (and not attached):
[1] RevoUtils_10.0.2




	[[alternative HTML version deleted]]


From @eb@@tien@bihorel @ending from cognigencorp@com  Tue Oct 30 20:56:42 2018
From: @eb@@tien@bihorel @ending from cognigencorp@com (Sebastien Bihorel)
Date: Tue, 30 Oct 2018 15:56:42 -0400 (EDT)
Subject: [R] Question about function scope
Message-ID: <1171707593.1413980.1540929402577.JavaMail.zimbra@cognigencorp.com>

Hi,

>From the R user manual, I have a basic understanding of the scope of function evaluation but have a harder time understanding how to mess with environments.

My problem can be summarized by the code shown at the bottom:
- the foo function performs some steps including the assignment of default values to 3 objects: x, y, z
- at some point, I would like to call either the bar1 or bar2 function based upon the value of the c argument of the foo function. These functions assign different values to the x, y, z variables.
- then foo should move on and do other cool stuff

Based upon default R scoping, the x, y, and z variables inside the bar1 and bar2 functions are not in the same environment as the x, y, and z variables created inside the foo function.

Can I modify the scope of evaluation of bar1 and bar2 so that x, y, and z created inside the foo function are modified?

PS: 
- I know about "<<-" but, in my real code (which I cannot share, sorry), foo is already called within other functions and x, y, and z variables do not exist in the top-level environment and are not returned by foo. So "<<-" does not work (per manual: " Only when <<- has been used in a function that was returned as the value of another function will the special behavior described here occur. ")
- In my real example, I have a few dozens of variables to transform in bar1 and bar2 so exporting a list bundling all the transform values then dispatching them in foo does not seem practical
- currently, my best solution is to save the inner part of bar1 and bar2 in separate scripts and sourcing them in foo (that does not seem elegant...)
- also, I know that, theoretically, I could put the content of bar1 and bar2 directly in foo, but as the number of cases handled by foo grows, the code will become way too long and hardly manageable.

Thanks for your help


######################################

bar1 <- function(){
  x <- 1
  y <- 1
  z <- 1
  cat(sprintf('bar1: x=%d, y=%d, z=%d\n', x, y, z))
}

bar2 <- function(){
  x <- 2
  y <- 2
  z <- 2
  cat(sprintf('bar2: x=%d, y=%d, z=%d\n', x, y, z))
}

foo <- function(a=1, b=2, c=0){

  # some setup code
  dummy <- a + b
  x <- y <- z <- 0

  # here is my scope problem
  if (c==1) bar1()
  if (c==2) bar2()

  # some more code
  cat(sprintf('foo: x=%d, y=%d, z=%d\n', x, y, z))
  
}

foo(c=0)
foo(c=1)
foo(c=2)


From murdoch@dunc@n @ending from gm@il@com  Tue Oct 30 21:13:05 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Tue, 30 Oct 2018 16:13:05 -0400
Subject: [R] Question about function scope
In-Reply-To: <1171707593.1413980.1540929402577.JavaMail.zimbra@cognigencorp.com>
References: <1171707593.1413980.1540929402577.JavaMail.zimbra@cognigencorp.com>
Message-ID: <6ae82453-0895-6385-a46b-88881b554b97@gmail.com>

On 30/10/2018 3:56 PM, Sebastien Bihorel wrote:
> Hi,
> 
>  From the R user manual, I have a basic understanding of the scope of function evaluation but have a harder time understanding how to mess with environments.
> 
> My problem can be summarized by the code shown at the bottom:
> - the foo function performs some steps including the assignment of default values to 3 objects: x, y, z
> - at some point, I would like to call either the bar1 or bar2 function based upon the value of the c argument of the foo function. These functions assign different values to the x, y, z variables.
> - then foo should move on and do other cool stuff
> 
> Based upon default R scoping, the x, y, and z variables inside the bar1 and bar2 functions are not in the same environment as the x, y, and z variables created inside the foo function.
> 
> Can I modify the scope of evaluation of bar1 and bar2 so that x, y, and z created inside the foo function are modified?
> 
> PS:
> - I know about "<<-" but, in my real code (which I cannot share, sorry), foo is already called within other functions and x, y, and z variables do not exist in the top-level environment and are not returned by foo. So "<<-" does not work (per manual: " Only when <<- has been used in a function that was returned as the value of another function will the special behavior described here occur. ")

I haven't looked up that quote, but it is likely describing a situation 
that isn't relevant to you.  For you, the important part is that bar1 
and bar2 must be created within foo.  They don't need to be returned 
from it.

So my edit below of your code should do what you want.

foo <- function(a=1, b=2, c=0){

   bar1 <- function(){
     x <<- 1
     y <<- 1
     z <<- 1
     cat(sprintf('bar1: x=%d, y=%d, z=%d\n', x, y, z))
   }

   bar2 <- function(){
     x <<- 2
     y <<- 2
     z <<- 2
     cat(sprintf('bar2: x=%d, y=%d, z=%d\n', x, y, z))
   }

   # some setup code
   dummy <- a + b
   x <- y <- z <- 0

   # here is my scope problem
   if (c==1) bar1()
   if (c==2) bar2()

   # some more code
   cat(sprintf('foo: x=%d, y=%d, z=%d\n', x, y, z))

}

foo(c=0)
foo(c=1)
foo(c=2)

I get this output:

 > foo(c=0)
foo: x=0, y=0, z=0
 > foo(c=1)
bar1: x=1, y=1, z=1
foo: x=1, y=1, z=1
 > foo(c=2)
bar2: x=2, y=2, z=2
foo: x=2, y=2, z=2

Duncan Murdoch


From ericjberger @ending from gm@il@com  Tue Oct 30 21:17:30 2018
From: ericjberger @ending from gm@il@com (Eric Berger)
Date: Tue, 30 Oct 2018 22:17:30 +0200
Subject: [R] Question about function scope
In-Reply-To: <6ae82453-0895-6385-a46b-88881b554b97@gmail.com>
References: <1171707593.1413980.1540929402577.JavaMail.zimbra@cognigencorp.com>
 <6ae82453-0895-6385-a46b-88881b554b97@gmail.com>
Message-ID: <CAGgJW75DHZtLGwW-zF33j9yHM5-A5whZp=6LRA70jCrQAmwXYw@mail.gmail.com>

Hi Sebastien,
I like Duncan's response. An alternative approach is to pass around
environments, as in the following:

bar1 <- function(e) {
  e$x <- e$y <- e$z <- 1
  cat(sprintf('bar1: x=%d, y=%d, z=%d\n', e$x, e$y, e$z))
}
bar2 <- function(e) {
  e$x <- e$y <- e$z <- 2
  cat(sprintf('bar2: x=%d, y=%d, z=%d\n', e$x, e$y, e$z))
}

foo <- function(a=1, b=2, c=0, e){
    # some setup code
  dummy <- a + b
  e$x <- e$y <- e$z <- 0

  # here is my scope problem
  if (c==1) bar1(e)
  if (c==2) bar2(e)

  # some more code
  cat(sprintf('foo: x=%d, y=%d, z=%d\n', e$x, e$y, e$z))
}

e <- new.env()
e$x <- NA
e$y <- NA
e$z <- NA

foo(c=0,e=e)
foo(c=1,e=e)
foo(c=2,e=e)


HTH,
Eric

On Tue, Oct 30, 2018 at 10:13 PM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 30/10/2018 3:56 PM, Sebastien Bihorel wrote:
> > Hi,
> >
> >  From the R user manual, I have a basic understanding of the scope of
> function evaluation but have a harder time understanding how to mess with
> environments.
> >
> > My problem can be summarized by the code shown at the bottom:
> > - the foo function performs some steps including the assignment of
> default values to 3 objects: x, y, z
> > - at some point, I would like to call either the bar1 or bar2 function
> based upon the value of the c argument of the foo function. These functions
> assign different values to the x, y, z variables.
> > - then foo should move on and do other cool stuff
> >
> > Based upon default R scoping, the x, y, and z variables inside the bar1
> and bar2 functions are not in the same environment as the x, y, and z
> variables created inside the foo function.
> >
> > Can I modify the scope of evaluation of bar1 and bar2 so that x, y, and
> z created inside the foo function are modified?
> >
> > PS:
> > - I know about "<<-" but, in my real code (which I cannot share, sorry),
> foo is already called within other functions and x, y, and z variables do
> not exist in the top-level environment and are not returned by foo. So
> "<<-" does not work (per manual: " Only when <<- has been used in a
> function that was returned as the value of another function will the
> special behavior described here occur. ")
>
> I haven't looked up that quote, but it is likely describing a situation
> that isn't relevant to you.  For you, the important part is that bar1
> and bar2 must be created within foo.  They don't need to be returned
> from it.
>
> So my edit below of your code should do what you want.
>
> foo <- function(a=1, b=2, c=0){
>
>    bar1 <- function(){
>      x <<- 1
>      y <<- 1
>      z <<- 1
>      cat(sprintf('bar1: x=%d, y=%d, z=%d\n', x, y, z))
>    }
>
>    bar2 <- function(){
>      x <<- 2
>      y <<- 2
>      z <<- 2
>      cat(sprintf('bar2: x=%d, y=%d, z=%d\n', x, y, z))
>    }
>
>    # some setup code
>    dummy <- a + b
>    x <- y <- z <- 0
>
>    # here is my scope problem
>    if (c==1) bar1()
>    if (c==2) bar2()
>
>    # some more code
>    cat(sprintf('foo: x=%d, y=%d, z=%d\n', x, y, z))
>
> }
>
> foo(c=0)
> foo(c=1)
> foo(c=2)
>
> I get this output:
>
>  > foo(c=0)
> foo: x=0, y=0, z=0
>  > foo(c=1)
> bar1: x=1, y=1, z=1
> foo: x=1, y=1, z=1
>  > foo(c=2)
> bar2: x=2, y=2, z=2
> foo: x=2, y=2, z=2
>
> Duncan Murdoch
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @eb@@tien@bihorel @ending from cognigencorp@com  Tue Oct 30 21:18:33 2018
From: @eb@@tien@bihorel @ending from cognigencorp@com (Sebastien Bihorel)
Date: Tue, 30 Oct 2018 16:18:33 -0400 (EDT)
Subject: [R] Question about function scope
In-Reply-To: <6ae82453-0895-6385-a46b-88881b554b97@gmail.com>
References: <1171707593.1413980.1540929402577.JavaMail.zimbra@cognigencorp.com>
 <6ae82453-0895-6385-a46b-88881b554b97@gmail.com>
Message-ID: <129171335.1415203.1540930713880.JavaMail.zimbra@cognigencorp.com>

Thanks Duncan for your quick reply.

Ideally, I would want bar1 and bar2 to be independent functions, because they are huge in actuality and, as the actual foo function grows, I may end up with 10 different bar# functions. So I would like to separate them from foo as much as possible.


----- Original Message -----
From: "Duncan Murdoch" <murdoch.duncan at gmail.com>
To: "Sebastien Bihorel" <sebastien.bihorel at cognigencorp.com>, r-help at r-project.org
Sent: Tuesday, October 30, 2018 4:13:05 PM
Subject: Re: [R] Question about function scope

On 30/10/2018 3:56 PM, Sebastien Bihorel wrote:
> Hi,
> 
>  From the R user manual, I have a basic understanding of the scope of function evaluation but have a harder time understanding how to mess with environments.
> 
> My problem can be summarized by the code shown at the bottom:
> - the foo function performs some steps including the assignment of default values to 3 objects: x, y, z
> - at some point, I would like to call either the bar1 or bar2 function based upon the value of the c argument of the foo function. These functions assign different values to the x, y, z variables.
> - then foo should move on and do other cool stuff
> 
> Based upon default R scoping, the x, y, and z variables inside the bar1 and bar2 functions are not in the same environment as the x, y, and z variables created inside the foo function.
> 
> Can I modify the scope of evaluation of bar1 and bar2 so that x, y, and z created inside the foo function are modified?
> 
> PS:
> - I know about "<<-" but, in my real code (which I cannot share, sorry), foo is already called within other functions and x, y, and z variables do not exist in the top-level environment and are not returned by foo. So "<<-" does not work (per manual: " Only when <<- has been used in a function that was returned as the value of another function will the special behavior described here occur. ")

I haven't looked up that quote, but it is likely describing a situation 
that isn't relevant to you.  For you, the important part is that bar1 
and bar2 must be created within foo.  They don't need to be returned 
from it.

So my edit below of your code should do what you want.

foo <- function(a=1, b=2, c=0){

   bar1 <- function(){
     x <<- 1
     y <<- 1
     z <<- 1
     cat(sprintf('bar1: x=%d, y=%d, z=%d\n', x, y, z))
   }

   bar2 <- function(){
     x <<- 2
     y <<- 2
     z <<- 2
     cat(sprintf('bar2: x=%d, y=%d, z=%d\n', x, y, z))
   }

   # some setup code
   dummy <- a + b
   x <- y <- z <- 0

   # here is my scope problem
   if (c==1) bar1()
   if (c==2) bar2()

   # some more code
   cat(sprintf('foo: x=%d, y=%d, z=%d\n', x, y, z))

}

foo(c=0)
foo(c=1)
foo(c=2)

I get this output:

 > foo(c=0)
foo: x=0, y=0, z=0
 > foo(c=1)
bar1: x=1, y=1, z=1
foo: x=1, y=1, z=1
 > foo(c=2)
bar2: x=2, y=2, z=2
foo: x=2, y=2, z=2

Duncan Murdoch


From murdoch@dunc@n @ending from gm@il@com  Tue Oct 30 21:18:51 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Tue, 30 Oct 2018 16:18:51 -0400
Subject: [R] Question about function scope
In-Reply-To: <1171707593.1413980.1540929402577.JavaMail.zimbra@cognigencorp.com>
References: <1171707593.1413980.1540929402577.JavaMail.zimbra@cognigencorp.com>
Message-ID: <7445db9d-fd28-b59d-59b9-5f0821594b0e@gmail.com>

Here's another modification to your code that also works.  It's a lot 
uglier, but will allow bar1 and bar2 to be used in multiple functions, 
not just foo.

bar1 <- function(env){
   env$x <- 1
   env$y <- 1
   env$z <- 1
   with(env, cat(sprintf('bar1: x=%d, y=%d, z=%d\n', x, y, z)))
}

bar2 <- function(env){
   env$x <- 2
   env$y <- 2
   env$z <- 2
   with(env, cat(sprintf('bar2: x=%d, y=%d, z=%d\n', x, y, z)))
}

foo <- function(a=1, b=2, c=0){

   # some setup code
   dummy <- a + b
   x <- y <- z <- 0

   # here is my scope problem
   if (c==1) bar1(environment())
   if (c==2) bar2(environment())

   # some more code
   cat(sprintf('foo: x=%d, y=%d, z=%d\n', x, y, z))

}

foo(c=0)
foo(c=1)
foo(c=2)

Duncan Murdoch


From @eb@@tien@bihorel @ending from cognigencorp@com  Tue Oct 30 21:23:46 2018
From: @eb@@tien@bihorel @ending from cognigencorp@com (Sebastien Bihorel)
Date: Tue, 30 Oct 2018 16:23:46 -0400 (EDT)
Subject: [R] Question about function scope
In-Reply-To: <7445db9d-fd28-b59d-59b9-5f0821594b0e@gmail.com>
References: <1171707593.1413980.1540929402577.JavaMail.zimbra@cognigencorp.com>
 <7445db9d-fd28-b59d-59b9-5f0821594b0e@gmail.com>
Message-ID: <1138191837.1415439.1540931026667.JavaMail.zimbra@cognigencorp.com>


That's cool! I think this solution would fit better with what my intended setup.

Thanks a lot


----- Original Message -----
From: "Duncan Murdoch" <murdoch.duncan at gmail.com>
To: "Sebastien Bihorel" <sebastien.bihorel at cognigencorp.com>, r-help at r-project.org
Sent: Tuesday, October 30, 2018 4:18:51 PM
Subject: Re: [R] Question about function scope

Here's another modification to your code that also works.  It's a lot 
uglier, but will allow bar1 and bar2 to be used in multiple functions, 
not just foo.

bar1 <- function(env){
   env$x <- 1
   env$y <- 1
   env$z <- 1
   with(env, cat(sprintf('bar1: x=%d, y=%d, z=%d\n', x, y, z)))
}

bar2 <- function(env){
   env$x <- 2
   env$y <- 2
   env$z <- 2
   with(env, cat(sprintf('bar2: x=%d, y=%d, z=%d\n', x, y, z)))
}

foo <- function(a=1, b=2, c=0){

   # some setup code
   dummy <- a + b
   x <- y <- z <- 0

   # here is my scope problem
   if (c==1) bar1(environment())
   if (c==2) bar2(environment())

   # some more code
   cat(sprintf('foo: x=%d, y=%d, z=%d\n', x, y, z))

}

foo(c=0)
foo(c=1)
foo(c=2)

Duncan Murdoch


From @eb@@tien@bihorel @ending from cognigencorp@com  Tue Oct 30 21:25:12 2018
From: @eb@@tien@bihorel @ending from cognigencorp@com (Sebastien Bihorel)
Date: Tue, 30 Oct 2018 16:25:12 -0400 (EDT)
Subject: [R] Question about function scope
In-Reply-To: <CAGgJW75DHZtLGwW-zF33j9yHM5-A5whZp=6LRA70jCrQAmwXYw@mail.gmail.com>
References: <1171707593.1413980.1540929402577.JavaMail.zimbra@cognigencorp.com>
 <6ae82453-0895-6385-a46b-88881b554b97@gmail.com>
 <CAGgJW75DHZtLGwW-zF33j9yHM5-A5whZp=6LRA70jCrQAmwXYw@mail.gmail.com>
Message-ID: <1912075849.1415599.1540931112406.JavaMail.zimbra@cognigencorp.com>


Thanks a lot Eric, 

I think you are on the same page as Duncan (at least with his 2nd option). I will definitively explore this. 


From: "Eric Berger" <ericjberger at gmail.com> 
To: "Duncan Murdoch" <murdoch.duncan at gmail.com> 
Cc: "Sebastien Bihorel" <sebastien.bihorel at cognigencorp.com>, "R mailing list" <r-help at r-project.org> 
Sent: Tuesday, October 30, 2018 4:17:30 PM 
Subject: Re: [R] Question about function scope 

Hi Sebastien, 
I like Duncan's response. An alternative approach is to pass around environments, as in the following: 

bar1 <- function(e) { 
e$x <- e$y <- e$z <- 1 
cat(sprintf('bar1: x=%d, y=%d, z=%d\n', e$x, e$y, e$z)) 
} 
bar2 <- function(e) { 
e$x <- e$y <- e$z <- 2 
cat(sprintf('bar2: x=%d, y=%d, z=%d\n', e$x, e$y, e$z)) 
} 

foo <- function(a=1, b=2, c=0, e){ 
# some setup code 
dummy <- a + b 
e$x <- e$y <- e$z <- 0 
# here is my scope problem 
if (c==1) bar1(e) 
if (c==2) bar2(e) 
# some more code 
cat(sprintf('foo: x=%d, y=%d, z=%d\n', e$x, e$y, e$z)) 
} 

e <- new.env() 
e$x <- NA 
e$y <- NA 
e$z <- NA 

foo(c=0,e=e) 
foo(c=1,e=e) 
foo(c=2,e=e) 


HTH, 
Eric 

On Tue, Oct 30, 2018 at 10:13 PM Duncan Murdoch < [ mailto:murdoch.duncan at gmail.com | murdoch.duncan at gmail.com ] > wrote: 


On 30/10/2018 3:56 PM, Sebastien Bihorel wrote: 
> Hi, 
> 
> From the R user manual, I have a basic understanding of the scope of function evaluation but have a harder time understanding how to mess with environments. 
> 
> My problem can be summarized by the code shown at the bottom: 
> - the foo function performs some steps including the assignment of default values to 3 objects: x, y, z 
> - at some point, I would like to call either the bar1 or bar2 function based upon the value of the c argument of the foo function. These functions assign different values to the x, y, z variables. 
> - then foo should move on and do other cool stuff 
> 
> Based upon default R scoping, the x, y, and z variables inside the bar1 and bar2 functions are not in the same environment as the x, y, and z variables created inside the foo function. 
> 
> Can I modify the scope of evaluation of bar1 and bar2 so that x, y, and z created inside the foo function are modified? 
> 
> PS: 
> - I know about "<<-" but, in my real code (which I cannot share, sorry), foo is already called within other functions and x, y, and z variables do not exist in the top-level environment and are not returned by foo. So "<<-" does not work (per manual: " Only when <<- has been used in a function that was returned as the value of another function will the special behavior described here occur. ") 

I haven't looked up that quote, but it is likely describing a situation 
that isn't relevant to you. For you, the important part is that bar1 
and bar2 must be created within foo. They don't need to be returned 
from it. 

So my edit below of your code should do what you want. 

foo <- function(a=1, b=2, c=0){ 

bar1 <- function(){ 
x <<- 1 
y <<- 1 
z <<- 1 
cat(sprintf('bar1: x=%d, y=%d, z=%d\n', x, y, z)) 
} 

bar2 <- function(){ 
x <<- 2 
y <<- 2 
z <<- 2 
cat(sprintf('bar2: x=%d, y=%d, z=%d\n', x, y, z)) 
} 

# some setup code 
dummy <- a + b 
x <- y <- z <- 0 

# here is my scope problem 
if (c==1) bar1() 
if (c==2) bar2() 

# some more code 
cat(sprintf('foo: x=%d, y=%d, z=%d\n', x, y, z)) 

} 

foo(c=0) 
foo(c=1) 
foo(c=2) 

I get this output: 

> foo(c=0) 
foo: x=0, y=0, z=0 
> foo(c=1) 
bar1: x=1, y=1, z=1 
foo: x=1, y=1, z=1 
> foo(c=2) 
bar2: x=2, y=2, z=2 
foo: x=2, y=2, z=2 

Duncan Murdoch 

______________________________________________ 
[ mailto:R-help at r-project.org | R-help at r-project.org ] mailing list -- To UNSUBSCRIBE and more, see 
[ https://stat.ethz.ch/mailman/listinfo/r-help | https://stat.ethz.ch/mailman/listinfo/r-help ] 
PLEASE do read the posting guide [ http://www.r-project.org/posting-guide.html | http://www.R-project.org/posting-guide.html ] 
and provide commented, minimal, self-contained, reproducible code. 





	[[alternative HTML version deleted]]


From v@rin@@ch@ @ending from y@hoo@fr  Tue Oct 30 21:38:11 2018
From: v@rin@@ch@ @ending from y@hoo@fr (varin sacha)
Date: Tue, 30 Oct 2018 20:38:11 +0000 (UTC)
Subject: [R] MSE Cross-validation with factor interactions terms MARS
 regression
In-Reply-To: <D4C000F2-239D-4066-96FE-37358C1EBE27@gmail.com>
References: <96346275.28234122.1540845992354.ref@mail.yahoo.com>
 <96346275.28234122.1540845992354@mail.yahoo.com>
 <CAGxFJbQ6wKnSFOopdS=8yyL_fvwi4eTY_sOuqz=KPAn7HRMffg@mail.gmail.com>
 <2140295663.8388898.1540853415169@mail.yahoo.com>
 <D4C000F2-239D-4066-96FE-37358C1EBE27@gmail.com>
Message-ID: <1679471886.29293338.1540931891533@mail.yahoo.com>

Dear Prof. Dalgaard,

I really thank you lots for your comments and responses. It perfectly works ! 
Many thanks.





Le mardi 30 octobre 2018 ? 00:30:11 UTC+1, peter dalgaard <pdalgd at gmail.com> a ?crit : 





The two lines did the same thing, so little wonder...

More likely, the culprit is that a is assigned in the global environment, and then used in a prediction on a subset.

Also, 

- you are defining Training, but as far as I can tell, you're not using it. Not likely to be an issue in itself, but wouldn't you want to fit on the Training set and evaluate on the Testing? 

- your model de facto contains both education as a numeric predictor and as.factor(education) as well as the interaction term age:as.factor(education). Does that make sense modelling-wise??

-pd

> On 29 Oct 2018, at 23:50 , varin sacha via R-help <r-help at r-project.org> wrote:
> 
> Hi Bert,
> 
> Many thanks, I have fixed it but it still don't work... . 
> Best,
> 
> 
> 
> 
> 
> 
> Le lundi 29 octobre 2018 ? 22:07:26 UTC+1, Bert Gunter <bgunter.4567 at gmail.com> a ?crit : 
> 
> 
> 
> 
> 
> I did no analysis of your code or thought process, but noticed that you had the following two successive lines in your code:
> 
> 
> y=Testing$wage
> 
> y=Wage[-sam,]$wage
> 
> This obviously makes no sense, so maybe you should fix this first and then proceed.
> 
> -- Bert
> 
> 
> Bert Gunter
> 
> "The trouble with having an open mind is that people keep coming along and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> 
> 
> On Mon, Oct 29, 2018 at 1:46 PM varin sacha via R-help <r-help at r-project.org> wrote:
>> 
>> Dear R-experts,
>> I am having trouble while doing crossvalidation with a MARS regression including an interaction term between a factor variable (education) and 1 continuous variable (age). How could I solve my problem ?
>> 
>> Here below my reproducible example.
>> 
>> #######
>> 
>> install.packages("ISLR")
>> 
>> library(ISLR)
>> 
>> install.packages("earth")
>> 
>> library(earth)
>> 
>> a<-as.factor(Wage$education)
>> 
>> # Create a list to store the results
>> 
>> lst<-list()
>> 
>> # This statement does the repetitions (looping)
>> 
>> for(i in 1 :200) {
>> 
>> n=dim(Wage)[1]
>> 
>> p=0.667
>> 
>> sam=sample(1 :n,floor(p*n),replace=FALSE)
>> 
>> Training =Wage [sam,]
>> 
>> Testing = Wage [-sam,]
>> 
>> mars5<-earth(wage~age+education+year+age*a, data=Wage)
>> 
>> ypred=predict(mars5,newdata=Testing)
>> 
>> y=Testing$wage
>> 
>> y=Wage[-sam,]$wage
>> 
>> MSE = mean(y-ypred)^2
>> 
>> MSE
>> 
>> lst[i]<-MSE
>> 
>> }
>> 
>> mean(unlist(lst))
>> 
>> summary(mars5)
>> 
>> #######
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.

>> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk? Priv: PDalgd at gmail.com


From murdoch@dunc@n @ending from gm@il@com  Tue Oct 30 21:47:32 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Tue, 30 Oct 2018 16:47:32 -0400
Subject: [R] Question about function scope
In-Reply-To: <129171335.1415203.1540930713880.JavaMail.zimbra@cognigencorp.com>
References: <1171707593.1413980.1540929402577.JavaMail.zimbra@cognigencorp.com>
 <6ae82453-0895-6385-a46b-88881b554b97@gmail.com>
 <129171335.1415203.1540930713880.JavaMail.zimbra@cognigencorp.com>
Message-ID: <85e22772-770a-705a-b0b6-6a113cae5a37@gmail.com>

On 30/10/2018 4:18 PM, Sebastien Bihorel wrote:
> Thanks Duncan for your quick reply.
> 
> Ideally, I would want bar1 and bar2 to be independent functions, because they are huge in actuality and, as the actual foo function grows, I may end up with 10 different bar# functions. So I would like to separate them from foo as much as possible.

If that's the case, then I think the second solution (passing around 
environments) is a really bad idea.  Functions should not have side 
effects because it makes them harder to understand.  Modifying local 
variables in some other function is a really dangerous side effect, 
especially if both functions are big, because they are already hard to 
understand.

If you really have more callers for bar1() than just foo(), it is even 
worse.

So I'd suggest having bar1 and bar2 return the new values in a list, and 
in foo(), explicitly extract the values you want from the list.  Then if 
in the future you decide that bar1 should also return a 4th value w, or 
you want to rename x to something more meaningful, you don't need to 
check your other foo functions to see if x and w are used in the same 
way in them.  They'll just ignore w if it isn't relevant to them.  Your 
foo() code becomes something like this:

   x <- y <- z <- 0

   # here is my scope problem
   result <- list(x = x, y = y, z = z) # c == 0 case
   if (c==1) result <- bar1()
   if (c==2) result <- bar2()
   x <- result[["x"]]
   y <- result[["y"]]
   z <- result[["z"]]

Duncan Murdoch


> 
> 
> ----- Original Message -----
> From: "Duncan Murdoch" <murdoch.duncan at gmail.com>
> To: "Sebastien Bihorel" <sebastien.bihorel at cognigencorp.com>, r-help at r-project.org
> Sent: Tuesday, October 30, 2018 4:13:05 PM
> Subject: Re: [R] Question about function scope
> 
> On 30/10/2018 3:56 PM, Sebastien Bihorel wrote:
>> Hi,
>>
>>   From the R user manual, I have a basic understanding of the scope of function evaluation but have a harder time understanding how to mess with environments.
>>
>> My problem can be summarized by the code shown at the bottom:
>> - the foo function performs some steps including the assignment of default values to 3 objects: x, y, z
>> - at some point, I would like to call either the bar1 or bar2 function based upon the value of the c argument of the foo function. These functions assign different values to the x, y, z variables.
>> - then foo should move on and do other cool stuff
>>
>> Based upon default R scoping, the x, y, and z variables inside the bar1 and bar2 functions are not in the same environment as the x, y, and z variables created inside the foo function.
>>
>> Can I modify the scope of evaluation of bar1 and bar2 so that x, y, and z created inside the foo function are modified?
>>
>> PS:
>> - I know about "<<-" but, in my real code (which I cannot share, sorry), foo is already called within other functions and x, y, and z variables do not exist in the top-level environment and are not returned by foo. So "<<-" does not work (per manual: " Only when <<- has been used in a function that was returned as the value of another function will the special behavior described here occur. ")
> 
> I haven't looked up that quote, but it is likely describing a situation
> that isn't relevant to you.  For you, the important part is that bar1
> and bar2 must be created within foo.  They don't need to be returned
> from it.
> 
> So my edit below of your code should do what you want.
> 
> foo <- function(a=1, b=2, c=0){
> 
>     bar1 <- function(){
>       x <<- 1
>       y <<- 1
>       z <<- 1
>       cat(sprintf('bar1: x=%d, y=%d, z=%d\n', x, y, z))
>     }
> 
>     bar2 <- function(){
>       x <<- 2
>       y <<- 2
>       z <<- 2
>       cat(sprintf('bar2: x=%d, y=%d, z=%d\n', x, y, z))
>     }
> 
>     # some setup code
>     dummy <- a + b
>     x <- y <- z <- 0
> 
>     # here is my scope problem
>     if (c==1) bar1()
>     if (c==2) bar2()
> 
>     # some more code
>     cat(sprintf('foo: x=%d, y=%d, z=%d\n', x, y, z))
> 
> }
> 
> foo(c=0)
> foo(c=1)
> foo(c=2)
> 
> I get this output:
> 
>   > foo(c=0)
> foo: x=0, y=0, z=0
>   > foo(c=1)
> bar1: x=1, y=1, z=1
> foo: x=1, y=1, z=1
>   > foo(c=2)
> bar2: x=2, y=2, z=2
> foo: x=2, y=2, z=2
> 
> Duncan Murdoch
>


From p@ul @ending from @t@t@@uckl@nd@@c@nz  Wed Oct 31 01:33:55 2018
From: p@ul @ending from @t@t@@uckl@nd@@c@nz (Paul Murrell)
Date: Wed, 31 Oct 2018 13:33:55 +1300
Subject: [R] 
 [FORGED] grid.grab(): strange behavior of "wrap" argument when
 working with lattice output
In-Reply-To: <2365dfd1-5222-bad1-43e9-ea740d4a0b26@northwestern.edu>
References: <2365dfd1-5222-bad1-43e9-ea740d4a0b26@northwestern.edu>
Message-ID: <99ec8b49-2a00-368e-144c-6ad7e7e00619@stat.auckland.ac.nz>

Hi

Mostly these are bugs.

One source of confusion:  wrap=FALSE is NOT doing better than wrap=TRUE, 
which you can see if you start a new page before drawing the grabbed 
grob ...

xyplot(1:5 ~ 1:5)
trellis.focus()
panel.abline(h = 3)
panel.abline(h = 5)
myGrob <- grid.grab(wrap = FALSE)
## start new page, otherwise just drawing over the top
grid.newpage()
grid.draw(myGrob)

But you are correct that wrap=TRUE is underperforming.  The problem is 
that your code is producing two grobs with the same name (and 
grid.grab() gets upset because you cannot create a gTree with two grobs 
with the same name).

Here is a workaround (make sure that each grob has a different name) ...

xyplot(1:5 ~ 1:5)
trellis.focus()
panel.abline(h = 3)
panel.abline(h = 5, identifier="abline2")
myGrob <- grid.grab()

grid.grab(wrap=TRUE) does not fix the problem because it does not wrap 
grobs.  For a more permanent solution, I have added a 'wrap.grobs' 
argument to grid.grab() (in r-devel), so that you can now do this 
(wrap.grobs=TRUE implicitly sets wrap=TRUE) ...

xyplot(1:5 ~ 1:5)
trellis.focus()
panel.abline(h = 3)
panel.abline(h = 5)
myGrob <- grid.grab(wrap.grobs = TRUE)

I have also fixed grid.grab() so that it does not complain about grobs 
with the same name if you have set wrap.grobs=TRUE.

Thanks for the report.  I hope this fixes the problems for you.

Paul

On 31/10/18 7:34 AM, John G. Bullock wrote:
> 
> grid.grab() captures all of the current viewports and stores them as a
> grob. In theory, and often in practice, you can use grid.grab() to store
> an image now for drawing later on. But I have noticed some odd behavior
> of grid.grab() when working with lattice output. It is all related to
> the wrap argument:
> 
> 1. When wrap = TRUE, the saved grob should produce a drawing faithful to
> the original viewports. But sometimes it doesn't.
>   ??? 2. wrap = FALSE is supposed to produce less faithful output if it
> differs at all, but sometimes its output is more faithful.
>   ??? 3. Even when using wrap = TRUE, grid.grab() warns me to use wrap =
> TRUE.
> 
> Here is a minimal example to illustrate all of these behaviors:
> 
> library(grid)
>   ??? library(lattice)
>   ??? xyplot(1:5 ~ 1:5)
> trellis.focus()
>   ??? panel.abline(h = 3)
>   ??? panel.abline(h = 5)
> myGrob <- grid.grab(wrap = TRUE)
> 
> At this point, I receive a warning --
> 
>   ?? ?? In grabDL(warn, wrap, ...) :
>   ? ? ? ? one of more grobs overwritten (grab WILL not be faithful; try
> 'wrap = TRUE')
> 
> -- which is strange, given that I specified wrap = TRUE.
> 
> I proceed by running grid.draw(myGrob). According to Paul Murrell (R
> Graphics, 2nd ed., page 239), using grid.grab(wrap = TRUE) is
> "guaranteed to replicate the original output." But it doesn't.
> Specifically, the top horizontal line (from panel.abline(h = 5)) isn't
> reproduced.
> 
> Matters get stranger when I consider the following code:
> 
>   ??? xyplot(1:5 ~ 1:5)
>   ??? trellis.focus()
>   ??? panel.abline(h = 3)
> panel.abline(h = 5)
>   ??? myGrob <- grid.grab(wrap = FALSE)
> grid.draw(myGrob)
> 
> These commands are the same as in the previous example, except that this
> time, wrap = FALSE. But this time, grid.draw() does faithfully reproduce
> the captured viewports. So the behavior is the opposite of what I
> expect: when wrap = FALSE, grid.draw() faithfully reproduces the
> captured viewports, but when wrap = TRUE, it doesn't.
> 
> I've run these examples in R 3.3.2 and 3.5.1. (Session info from 3.3.2
> is appended.) The result is the same in both cases. Are these bugs, or
> am I overlooking something?
> 
> Thank you,
> John Bullock
> 
> 
>   > sessionInfo()
> R version 3.3.2 (2016-10-31)
> Platform: x86_64-w64-mingw32/x64 (64-bit)
> Running under: Windows 10 x64 (build 17134)
> 
> locale:
> [1] LC_COLLATE=English_United States.1252 LC_CTYPE=English_United
> States.1252??? LC_MONETARY=English_United States.1252 LC_NUMERIC=C
> [5] LC_TIME=English_United States.1252
> 
> attached base packages:
> [1] grid????? stats???? graphics? grDevices utils???? datasets methods base
> 
> other attached packages:
> [1] lattice_0.20-34 RevoUtilsMath_10.0.0
> 
> loaded via a namespace (and not attached):
> [1] RevoUtils_10.0.2
> 
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

-- 
Dr Paul Murrell
Department of Statistics
The University of Auckland
Private Bag 92019
Auckland
New Zealand
64 9 3737599 x85392
paul at stat.auckland.ac.nz
http://www.stat.auckland.ac.nz/~paul/


From nfultz @ending from gm@il@com  Wed Oct 31 02:28:53 2018
From: nfultz @ending from gm@il@com (Neal Fultz)
Date: Tue, 30 Oct 2018 18:28:53 -0700
Subject: [R] Question about function scope
In-Reply-To: <85e22772-770a-705a-b0b6-6a113cae5a37@gmail.com>
References: <1171707593.1413980.1540929402577.JavaMail.zimbra@cognigencorp.com>
 <6ae82453-0895-6385-a46b-88881b554b97@gmail.com>
 <129171335.1415203.1540930713880.JavaMail.zimbra@cognigencorp.com>
 <85e22772-770a-705a-b0b6-6a113cae5a37@gmail.com>
Message-ID: <CAL9B2vc6oD6ZsGp0_ABA2rGywkzSqnW6gW7kv66wm3QcBazNng@mail.gmail.com>

I'm going to n-th Duncan's recommendations to try to keep your functions
small and try not to mess with environments.

... So I'm ashamed that I wrote the following - I apologize in advance.

But as an intellectual exercise, we can cannibalize the code for `dynGet`
and create a `dynSet` function which mirrors it:

---

dynSet <- function (x, value, ifnotfound = stop(gettextf("%s not found",
sQuote(x)),
                               domain = NA), minframe = 1L, inherits =
FALSE)
{
  n <- sys.nframe()
  myObj <- structure(list(.b = as.raw(7)), foo = 47L)
  while (n > minframe) {
    n <- n - 1L
    env <- sys.frame(n)
    r <- get0(x, envir = env, inherits = inherits, ifnotfound = myObj)
    if (!identical(r, myObj)) {
      assign(x, value, envir = env)
      return(NULL)
    }
  }
  ifnotfound
}

### Note that in bar1 / bar2, you can't use x,y,z - dynSet will match the
local variable instead of the calling frame.

bar1 <- function(){
  x1 <- 1
  y1 <- 1
  z1 <- 1
  cat(sprintf('bar1: x=%d, y=%d, z=%d\n', x1, y1, z1))
  dynSet("x", x1)
  dynSet("y", y1)
  dynSet("z", z1)

}

bar2 <- function(){
  x2 <- 2
  y2 <- 2
  z2 <- 2
  cat(sprintf('bar2: x=%d, y=%d, z=%d\n', x2, y2, z2))
  dynSet("x", x2)
  dynSet("y", y2)
  dynSet("z", z2)

}

foo <- function(a=1, b=2, c=0){

  # some setup code
  dummy <- a + b
  x <- y <- z <- 0

  # here is my scope problem
  if (c==1) bar1()
  if (c==2) bar2()

  # some more code
  cat(sprintf('foo: x=%d, y=%d, z=%d\n', x, y, z))

}

foo(c=0)
foo(c=1)
foo(c=2)




---

Please don't actually do this though.

I think the most educational part of this is the dynGet/dynSet function
itself - if you understand the various functions it uses, you can do pretty
much anything in R.


But again, you shouldn't.





On Tue, Oct 30, 2018 at 1:51 PM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 30/10/2018 4:18 PM, Sebastien Bihorel wrote:
> > Thanks Duncan for your quick reply.
> >
> > Ideally, I would want bar1 and bar2 to be independent functions, because
> they are huge in actuality and, as the actual foo function grows, I may end
> up with 10 different bar# functions. So I would like to separate them from
> foo as much as possible.
>
> If that's the case, then I think the second solution (passing around
> environments) is a really bad idea.  Functions should not have side
> effects because it makes them harder to understand.  Modifying local
> variables in some other function is a really dangerous side effect,
> especially if both functions are big, because they are already hard to
> understand.
>
> If you really have more callers for bar1() than just foo(), it is even
> worse.
>
> So I'd suggest having bar1 and bar2 return the new values in a list, and
> in foo(), explicitly extract the values you want from the list.  Then if
> in the future you decide that bar1 should also return a 4th value w, or
> you want to rename x to something more meaningful, you don't need to
> check your other foo functions to see if x and w are used in the same
> way in them.  They'll just ignore w if it isn't relevant to them.  Your
> foo() code becomes something like this:
>
>    x <- y <- z <- 0
>
>    # here is my scope problem
>    result <- list(x = x, y = y, z = z) # c == 0 case
>    if (c==1) result <- bar1()
>    if (c==2) result <- bar2()
>    x <- result[["x"]]
>    y <- result[["y"]]
>    z <- result[["z"]]
>
> Duncan Murdoch
>
>
> >
> >
> > ----- Original Message -----
> > From: "Duncan Murdoch" <murdoch.duncan at gmail.com>
> > To: "Sebastien Bihorel" <sebastien.bihorel at cognigencorp.com>,
> r-help at r-project.org
> > Sent: Tuesday, October 30, 2018 4:13:05 PM
> > Subject: Re: [R] Question about function scope
> >
> > On 30/10/2018 3:56 PM, Sebastien Bihorel wrote:
> >> Hi,
> >>
> >>   From the R user manual, I have a basic understanding of the scope of
> function evaluation but have a harder time understanding how to mess with
> environments.
> >>
> >> My problem can be summarized by the code shown at the bottom:
> >> - the foo function performs some steps including the assignment of
> default values to 3 objects: x, y, z
> >> - at some point, I would like to call either the bar1 or bar2 function
> based upon the value of the c argument of the foo function. These functions
> assign different values to the x, y, z variables.
> >> - then foo should move on and do other cool stuff
> >>
> >> Based upon default R scoping, the x, y, and z variables inside the bar1
> and bar2 functions are not in the same environment as the x, y, and z
> variables created inside the foo function.
> >>
> >> Can I modify the scope of evaluation of bar1 and bar2 so that x, y, and
> z created inside the foo function are modified?
> >>
> >> PS:
> >> - I know about "<<-" but, in my real code (which I cannot share,
> sorry), foo is already called within other functions and x, y, and z
> variables do not exist in the top-level environment and are not returned by
> foo. So "<<-" does not work (per manual: " Only when <<- has been used in a
> function that was returned as the value of another function will the
> special behavior described here occur. ")
> >
> > I haven't looked up that quote, but it is likely describing a situation
> > that isn't relevant to you.  For you, the important part is that bar1
> > and bar2 must be created within foo.  They don't need to be returned
> > from it.
> >
> > So my edit below of your code should do what you want.
> >
> > foo <- function(a=1, b=2, c=0){
> >
> >     bar1 <- function(){
> >       x <<- 1
> >       y <<- 1
> >       z <<- 1
> >       cat(sprintf('bar1: x=%d, y=%d, z=%d\n', x, y, z))
> >     }
> >
> >     bar2 <- function(){
> >       x <<- 2
> >       y <<- 2
> >       z <<- 2
> >       cat(sprintf('bar2: x=%d, y=%d, z=%d\n', x, y, z))
> >     }
> >
> >     # some setup code
> >     dummy <- a + b
> >     x <- y <- z <- 0
> >
> >     # here is my scope problem
> >     if (c==1) bar1()
> >     if (c==2) bar2()
> >
> >     # some more code
> >     cat(sprintf('foo: x=%d, y=%d, z=%d\n', x, y, z))
> >
> > }
> >
> > foo(c=0)
> > foo(c=1)
> > foo(c=2)
> >
> > I get this output:
> >
> >   > foo(c=0)
> > foo: x=0, y=0, z=0
> >   > foo(c=1)
> > bar1: x=1, y=1, z=1
> > foo: x=1, y=1, z=1
> >   > foo(c=2)
> > bar2: x=2, y=2, z=2
> > foo: x=2, y=2, z=2
> >
> > Duncan Murdoch
> >
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @tyen @ending from ntu@edu@tw  Wed Oct 31 03:28:14 2018
From: @tyen @ending from ntu@edu@tw (Steven Yen)
Date: Wed, 31 Oct 2018 10:28:14 +0800
Subject: [R] Using apply
Message-ID: <e1df1341-9442-021b-08d4-ea9e0b52a35f@ntu.edu.tw>

I need help with "apply". Below, I have no problem getting the column sums.
1. How do I get the sum of squares?
2. In general, where do I look up these functions?
Thanks.

x<-matrix(1:10,nrow=5); x
sum <- apply(x,2,sum); sum




	[[alternative HTML version deleted]]


From jholtm@n @ending from gm@il@com  Wed Oct 31 03:47:22 2018
From: jholtm@n @ending from gm@il@com (jim holtman)
Date: Tue, 30 Oct 2018 22:47:22 -0400
Subject: [R] Using apply
In-Reply-To: <e1df1341-9442-021b-08d4-ea9e0b52a35f@ntu.edu.tw>
References: <e1df1341-9442-021b-08d4-ea9e0b52a35f@ntu.edu.tw>
Message-ID: <CAAxdm-4VjjP_UCFkZfxs9JQ-7Ry9BNvuFnxKED7f=+N7q_nZyA@mail.gmail.com>

> s2 <- apply(x*x, 2, sum)
> s2
[1]  55 330

Jim Holtman
Data Munger Guru

What is the problem that you are trying to solve?
Tell me what you want to do, not how you want to do it.
On Tue, Oct 30, 2018 at 10:28 PM Steven Yen <styen at ntu.edu.tw> wrote:
>
> I need help with "apply". Below, I have no problem getting the column sums.
> 1. How do I get the sum of squares?
> 2. In general, where do I look up these functions?
> Thanks.
>
> x<-matrix(1:10,nrow=5); x
> sum <- apply(x,2,sum); sum
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From peter@l@ngfelder @ending from gm@il@com  Wed Oct 31 04:44:08 2018
From: peter@l@ngfelder @ending from gm@il@com (Peter Langfelder)
Date: Tue, 30 Oct 2018 20:44:08 -0700
Subject: [R] Using apply
In-Reply-To: <e1df1341-9442-021b-08d4-ea9e0b52a35f@ntu.edu.tw>
References: <e1df1341-9442-021b-08d4-ea9e0b52a35f@ntu.edu.tw>
Message-ID: <CA+hbrhV1bvHjc--wggZTVXb=wV+KmQ-FR6OT3XcfHvOzH8hy7Q@mail.gmail.com>

It should be said that for many basic statistics, there are faster
functions than apply, for example here you want

sum = colSums(x)

As already said, for sum of squares you would do colSums(x^2).

Many useful functions of this kind are implemented in package
matrixStats. Once you install it, either look at the package manual or
type ls("package:matrixStats") to see a list of functions. Most if not
all have self-explanatory names.

HTH,

Peter
On Tue, Oct 30, 2018 at 7:28 PM Steven Yen <styen at ntu.edu.tw> wrote:
>
> I need help with "apply". Below, I have no problem getting the column sums.
> 1. How do I get the sum of squares?
> 2. In general, where do I look up these functions?
> Thanks.
>
> x<-matrix(1:10,nrow=5); x
> sum <- apply(x,2,sum); sum
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @ending from gm@il@com  Wed Oct 31 04:57:53 2018
From: bgunter@4567 @ending from gm@il@com (Bert Gunter)
Date: Tue, 30 Oct 2018 20:57:53 -0700
Subject: [R] Using apply
In-Reply-To: <CA+hbrhV1bvHjc--wggZTVXb=wV+KmQ-FR6OT3XcfHvOzH8hy7Q@mail.gmail.com>
References: <e1df1341-9442-021b-08d4-ea9e0b52a35f@ntu.edu.tw>
 <CA+hbrhV1bvHjc--wggZTVXb=wV+KmQ-FR6OT3XcfHvOzH8hy7Q@mail.gmail.com>
Message-ID: <CAGxFJbQ5i1sK4rMLOZFAbza_-Rk0vZmYtD69xx=xfr8ML-KVbQ@mail.gmail.com>

Indeed.

But perhaps it's also worth noting that if such statistics are calculated
as implementations of (e.g. anova) formulae still found (sadly) in many
statistics texts, then they shouldn't be calculated at all. Rather, the
appropriate matrix methods (e.g. QR decompositions ) built into R -- many
of which are already incorporated into R's statistical corpus -- should be
used. To say more would of course be far O/T.

Cheers,
Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Oct 30, 2018 at 8:44 PM Peter Langfelder <peter.langfelder at gmail.com>
wrote:

> It should be said that for many basic statistics, there are faster
> functions than apply, for example here you want
>
> sum = colSums(x)
>
> As already said, for sum of squares you would do colSums(x^2).
>
> Many useful functions of this kind are implemented in package
> matrixStats. Once you install it, either look at the package manual or
> type ls("package:matrixStats") to see a list of functions. Most if not
> all have self-explanatory names.
>
> HTH,
>
> Peter
> On Tue, Oct 30, 2018 at 7:28 PM Steven Yen <styen at ntu.edu.tw> wrote:
> >
> > I need help with "apply". Below, I have no problem getting the column
> sums.
> > 1. How do I get the sum of squares?
> > 2. In general, where do I look up these functions?
> > Thanks.
> >
> > x<-matrix(1:10,nrow=5); x
> > sum <- apply(x,2,sum); sum
> >
> >
> >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From r@turner @ending from @uckl@nd@@c@nz  Wed Oct 31 06:03:15 2018
From: r@turner @ending from @uckl@nd@@c@nz (Rolf Turner)
Date: Wed, 31 Oct 2018 18:03:15 +1300
Subject: [R] [FORGED] Re:  Using apply
In-Reply-To: <CAAxdm-4VjjP_UCFkZfxs9JQ-7Ry9BNvuFnxKED7f=+N7q_nZyA@mail.gmail.com>
References: <e1df1341-9442-021b-08d4-ea9e0b52a35f@ntu.edu.tw>
 <CAAxdm-4VjjP_UCFkZfxs9JQ-7Ry9BNvuFnxKED7f=+N7q_nZyA@mail.gmail.com>
Message-ID: <dfc0ed0d-ea5a-8c0a-9b12-764c0fee01c2@auckland.ac.nz>


On 10/31/18 3:47 PM, jim holtman wrote:

>> s2 <- apply(x*x, 2, sum)
>> s2
> [1]  55 330

<SNIP>

It seems to me to be more "natural" (and perhaps more amenable to 
generalisation) to do:

     s2 <- apply(x,2,function(v){sum(v^2)})

But it's probably just a matter of taste.

cheers,

Rolf

-- 
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From jdnewmil @ending from dcn@d@vi@@c@@u@  Wed Oct 31 07:22:32 2018
From: jdnewmil @ending from dcn@d@vi@@c@@u@ (Jeff Newmiller)
Date: Tue, 30 Oct 2018 23:22:32 -0700
Subject: [R] [FORGED] Re:  Using apply
In-Reply-To: <dfc0ed0d-ea5a-8c0a-9b12-764c0fee01c2@auckland.ac.nz>
References: <e1df1341-9442-021b-08d4-ea9e0b52a35f@ntu.edu.tw>
 <CAAxdm-4VjjP_UCFkZfxs9JQ-7Ry9BNvuFnxKED7f=+N7q_nZyA@mail.gmail.com>
 <dfc0ed0d-ea5a-8c0a-9b12-764c0fee01c2@auckland.ac.nz>
Message-ID: <89DB647F-D5F0-414B-A653-57FD54811FE4@dcn.davis.ca.us>

In general doing vectorized calculations on larger data units is going to lead to faster computation, so it would be better in the long run if your taste could evolve to appreciate Jim's approach.

On October 30, 2018 10:03:15 PM PDT, Rolf Turner <r.turner at auckland.ac.nz> wrote:
>
>On 10/31/18 3:47 PM, jim holtman wrote:
>
>>> s2 <- apply(x*x, 2, sum)
>>> s2
>> [1]  55 330
>
><SNIP>
>
>It seems to me to be more "natural" (and perhaps more amenable to 
>generalisation) to do:
>
>     s2 <- apply(x,2,function(v){sum(v^2)})
>
>But it's probably just a matter of taste.
>
>cheers,
>
>Rolf

-- 
Sent from my phone. Please excuse my brevity.


From p_connolly @ending from @ling@hot@co@nz  Wed Oct 31 08:22:48 2018
From: p_connolly @ending from @ling@hot@co@nz (Patrick Connolly)
Date: Wed, 31 Oct 2018 20:22:48 +1300
Subject: [R] Corrupted package?
Message-ID: <20181031072248.GA8540@slingshot.co.nz>


I got this message while using a dplyr mutate call: 

Error in get0(oNam, envir = ns) : 
  lazy-load database '/home/hrapgc/local/R-3.5.1/library/pkgconfig/R/pkgconfig.rdb' is corrupt

I had only just installed R-3.5.1 and updated the packages (using the
function update.packages with the checkBuild parameter to TRUE) in the
library I use with that version.  So, I checked the size of
pkgconfig.rdb with the previous version from the bash prompt:

> ll `locate pkgconfig.rdb`

-rw-r--r-- 1 hrapgc hrapgc  5335 May  8 14:06 /home/hrapgc/local/R-3.5.0/library/pkgconfig/help/pkgconfig.rdb
-rw-r--r-- 1 hrapgc hrapgc 15669 May  8 14:06 /home/hrapgc/local/R-3.5.0/library/pkgconfig/R/pkgconfig.rdb
-rw-r--r-- 1 hrapgc hrapgc  5359 Oct 31 16:12 /home/hrapgc/local/R-3.5.1/library/pkgconfig/help/pkgconfig.rdb
-rw-r--r-- 1 hrapgc hrapgc  4367 Oct 31 16:12 /home/hrapgc/local/R-3.5.1/library/pkgconfig/R/pkgconfig.rdb

While the pkgconfig.rdb filesize in the help directory is nearly
identical in size to that in R-3.5.0 (and previous versions) the one
in the R directory is very much smaller.  So the error message
probably makes sense.

The question is: how could that have happened?  I removed the package
and reinstalled it, but that made no difference.  Is this documented
anywhere?

TIA
-- 
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.   
   ___    Patrick Connolly   
 {~._.~}                   Great minds discuss ideas    
 _( Y )_  	         Average minds discuss events 
(:_~*~_:)                  Small minds discuss people  
 (_)-(_)  	                      ..... Eleanor Roosevelt
	  
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.


From robertob@kker @ending from gm@il@com  Wed Oct 31 08:50:45 2018
From: robertob@kker @ending from gm@il@com (P. Roberto Bakker)
Date: Wed, 31 Oct 2018 08:50:45 +0100
Subject: [R] Different stack barplots - same color legends
In-Reply-To: <CAGx1TMAYybconxY7ZVVJcdiYW6+WOjr_D+=GHOA=Xxv2AWRCqQ@mail.gmail.com>
References: <CAKDq9_N16xaeL4O2j=v2bVuMb=tuHfu0Ao+yuLQcEq6B-ngq1A@mail.gmail.com>
 <af9001d319ac4992b0bfc5526150f03b@tamu.edu>
 <CAKDq9_P8hQEHWFH=c_86bG81fU0GS+EUCOmtZ9gJa_7kY-2uhA@mail.gmail.com>
 <CAGx1TMAYybconxY7ZVVJcdiYW6+WOjr_D+=GHOA=Xxv2AWRCqQ@mail.gmail.com>
Message-ID: <CAKDq9_Oi0HGNV7qLnmi4HgVr7orF_gpC7Sys8mLKAxMfjHVtvQ@mail.gmail.com>

Thank you for you information. Package 'HH' is interesting.

Now I find another problem when using 'likert(teamq)'
I get an error message:
> likert(teamq)
Error in dimnames(x) <- `*vtmp*` :
  length of 'dimnames' [2] not equal to array extent

I checked:
> dim(teamq)
[1] 4 2
> ncol(teamq)
[1] 2
So it should be good.

I used 'make.names' , in case the spaces in the variable names would be a
problem.
Same error.

What could I do?

Best and thank you in advance.
Roberto


Op ma 22 okt. 2018 om 20:10 schreef Richard M. Heiberger <rmh at temple.edu>:

> Try the likert function in
> install.packages("HH) ## if necessary
> library(HH)
>
> Then using David Carlson's example teamq
> likert(teamq)
>
> Your example in the 1:30PM (Eastern Daylight Time) doesn't work.
> Error in revalue(teamq, c(`de situatie in zeer geringe mate van
> toepassing is\nvoor u of uw supervisorengroep` = "1",  :
>   x is not a factor or a character vector.
>
> There are many examples in
> ?likert
>
> Rich
>
>
> On Mon, Oct 22, 2018 at 1:30 PM, P. Roberto Bakker
> <robertobakker at gmail.com> wrote:
> > Dear David,
> >
> > Thank you for you quite response.
> > My apologies for not giving some sample data - this is due to AVG.
> > *But this minisample should not be a problem (all in Dutch)*:
> >  teamq
> > # A tibble: 4 x 2
> >   `Ik volg bijscholing om mijn opleiders-kwaliteiten op peil te houden`
> >
> >   <chr>
> >
> > 1 de situatie in hoge mate van toepassing is voor u of uw
> > supervisorengroep
> > 2 de situatie in zeer hoge mate van toepassing is voor u of uw
> > supervisorengroep
> > 3 de situatie in zeer hoge mate van toepassing is voor u of uw
> > supervisorengroep
> > 4 de situatie in geringe mate van toepassing is voor u of uw
> > supervisorengroep
> >   `Ik weet precies wat de ?modernisering van de opleiding? inhoudt`
> >
> >   <chr>
> >
> > 1 de situatie in hoge mate van toepassing is voor u of uw
> > supervisorengroep
> > 2 de situatie in zeer hoge mate van toepassing is voor u of uw
> > supervisorengroep
> > 3 de situatie in zeer hoge mate van toepassing is voor u of uw
> > supervisorengroep
> > 4 de situatie in geringe mate van toepassing is voor u of uw
> > supervisorengroep
> >
> > As you see the likert items are in words, and I should change them in
> > nummeric - Am I correct?
> >
> > *To do this, I tried (see further below):*
> > plyr rename() ; I receive the message it should be a factor or character
> > dplyr recode() ; same message
> > mapvalues() ; it should be atomic, so I used as.atomic(teamq) but then I
> > receive the nummers a strings.
> >
> > *The syntaxes*
> > require(plyr)
> > example2 <- revalue(teamq,
> >                     c("de situatie in zeer geringe mate van toepassing is
> > voor u of uw supervisorengroep"= "1",
> >                         "de situatie in geringe mate van toepassing is
> voor
> > u of uw supervisorengroep"= "2",
> >                         "de situatie enigszins van toepassing is voor u
> of
> > uw supervisorengroep"= "3",
> >                         "de situatie in hoge mate van toepassing is voor
> u
> > of uw supervisorengroep"= "4",
> >                         "de situatie in zeer hoge mate van toepassing is
> > voor u of uw supervisorengroep"= "5"))
> >
> > require(dplyr)
> > example2 <- recode(teamq,
> >                     c("de situatie in zeer geringe mate van toepassing is
> > voor u of uw supervisorengroep"= "1",
> >                       "de situatie in geringe mate van toepassing is
> voor u
> > of uw supervisorengroep"= "2",
> >                       "de situatie enigszins van toepassing is voor u of
> uw
> > supervisorengroep"= "3",
> >                       "de situatie in hoge mate van toepassing is voor u
> of
> > uw supervisorengroep"= "4",
> >                       "de situatie in zeer hoge mate van toepassing is
> voor
> > u of uw supervisorengroep"= "5"))
> >
> > mapvalues(as.matrix(teamq), from = c("de situatie in zeer geringe mate
> van
> > toepassing is voor u of uw supervisorengroep",
> >                         "de situatie in geringe mate van toepassing is
> voor
> > u of uw supervisorengroep",
> >                         "de situatie enigszins van toepassing is voor u
> of
> > uw supervisorengroep",
> >                         "de situatie in hoge mate van toepassing is voor
> u
> > of uw supervisorengroep",
> >                         "de situatie in zeer hoge mate van toepassing is
> > voor u of uw supervisorengroep"),
> >           to = c(1,2,3,4,5))
> >
> > What should I do?
> > Thank you in advance, Roberto
> >
> > Op ma 22 okt. 2018 om 17:13 schreef David L Carlson <dcarlson at tamu.edu>:
> >
> >> Your example is not reproducible since you did not give us some sample
> >> data. I suspect that your data frame consists of columns that represent
> >> questions and rows that represent individuals who answered the
> questions.
> >> First create a simple example:
> >>
> >> set.seed(42)
> >> teamq <- data.frame(V1=sample(c(1, 2, 4, 5), 25, replace = TRUE),
> >>      V2=sample(c(1, 2, 3, 4, 5), 25, replace=TRUE),
> >>      V3=sample(c(2, 3, 4, 5), 25, replace=TRUE))
> >>
> >> Notice that this data frame ONLY contains questions (and only 3
> >> questions). Here are 2 ways to get what you want. The first one stacks
> the
> >> data:
> >>
> >> teamq.stack <- stack(teamq)
> >> str(teamq.stack)
> >> counts <- table(teamq.stack)
> >> str(counts)
> >>
> >> The second one converts each column to a factor with levels 1 - 5:
> >>
> >> teamq2 <- data.frame(lapply(teamq, factor, levels=1:5))
> >> str(teamq2)
> >> counts <- sapply(teamq2, table)
> >> str(counts)
> >>
> >> Now make the plots:
> >>
> >> cols <- c("yellow","sandybrown","orange", "darkolivegreen","green")
> >> barplot(counts[, 1], horiz=TRUE, col=cols, legend=TRUE)
> >> barplot(counts[, 2], horiz=TRUE, col=cols, legend=TRUE)
> >> barplot(counts[, 3], horiz=TRUE, col=cols, legend=TRUE)
> >>
> >> You will need to adjust the xlim= argument so that the legend does not
> >> print on top of the bars.
> >>
> >> ----------------------------------------
> >> David L Carlson
> >> Department of Anthropology
> >> Texas A&M University
> >> College Station, TX 77843-4352
> >>
> >>
> >> -----Original Message-----
> >> From: R-help <r-help-bounces at r-project.org> On Behalf Of P. Roberto
> Bakker
> >> Sent: Monday, October 22, 2018 9:04 AM
> >> To: R mailing list <r-help at r-project.org>
> >> Subject: [R] Different stack barplots - same color legends
> >>
> >> Hi,
> >>
> >> I want to make barplots from different questions (columns) in one
> >> data.frame.
> >> Each question has the same 5 likert items.
> >> Now the problem: in some questions all items are answered; in other
> less.
> >> From the syntax below I get nice stack barplots - *but the legend
> colors do
> >> not* refer to the same likert-item, which I understand - the colors go
> in
> >> sequence along the table.
> >> Question: how can I write a syntax that each likert-item has the same
> >> legend color?
> >> Thank you in advance,
> >>
> >> Roberto
> >>
> >> SYNTAX:
> >> counts19 <- table(teamq[,19])
> >> counts20 <- table(teamq[,20])
> >> barplot(as.matrix(counts19), horiz = T,
> >>         col=c("yellow","sandybrown","orange", "darkolivegreen","green"),
> >> legend=T)
> >> barplot(as.matrix(counts20), horiz = T,
> >>         col=c("yellow","sandybrown","orange", "darkolivegreen","green"),
> >> legend=T)
> >>
> >>         [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >>
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From rmh @ending from temple@edu  Wed Oct 31 14:27:26 2018
From: rmh @ending from temple@edu (Richard M. Heiberger)
Date: Wed, 31 Oct 2018 09:27:26 -0400
Subject: [R] Different stack barplots - same color legends
In-Reply-To: <CAKDq9_Oi0HGNV7qLnmi4HgVr7orF_gpC7Sys8mLKAxMfjHVtvQ@mail.gmail.com>
References: <CAKDq9_N16xaeL4O2j=v2bVuMb=tuHfu0Ao+yuLQcEq6B-ngq1A@mail.gmail.com>
 <af9001d319ac4992b0bfc5526150f03b@tamu.edu>
 <CAKDq9_P8hQEHWFH=c_86bG81fU0GS+EUCOmtZ9gJa_7kY-2uhA@mail.gmail.com>
 <CAGx1TMAYybconxY7ZVVJcdiYW6+WOjr_D+=GHOA=Xxv2AWRCqQ@mail.gmail.com>
 <CAKDq9_Oi0HGNV7qLnmi4HgVr7orF_gpC7Sys8mLKAxMfjHVtvQ@mail.gmail.com>
Message-ID: <CAGx1TMB+=RnNeoBmzF=_-gxZ2bzaabExs2Gf-8dKE2vAcpiHpA@mail.gmail.com>

Please send me the
dput(teamq)


On Wed, Oct 31, 2018 at 03:51 P. Roberto Bakker <robertobakker at gmail.com>
wrote:

> Thank you for you information. Package 'HH' is interesting.
>
> Now I find another problem when using 'likert(teamq)'
> I get an error message:
> > likert(teamq)
> Error in dimnames(x) <- `*vtmp*` :
>   length of 'dimnames' [2] not equal to array extent
>
> I checked:
> > dim(teamq)
> [1] 4 2
> > ncol(teamq)
> [1] 2
> So it should be good.
>
> I used 'make.names' , in case the spaces in the variable names would be a
> problem.
> Same error.
>
> What could I do?
>
> Best and thank you in advance.
> Roberto
>
>
> Op ma 22 okt. 2018 om 20:10 schreef Richard M. Heiberger <rmh at temple.edu>:
>
>> Try the likert function in
>> install.packages("HH) ## if necessary
>> library(HH)
>>
>> Then using David Carlson's example teamq
>> likert(teamq)
>>
>> Your example in the 1:30PM (Eastern Daylight Time) doesn't work.
>> Error in revalue(teamq, c(`de situatie in zeer geringe mate van
>> toepassing is\nvoor u of uw supervisorengroep` = "1",  :
>>   x is not a factor or a character vector.
>>
>> There are many examples in
>> ?likert
>>
>> Rich
>>
>>
>> On Mon, Oct 22, 2018 at 1:30 PM, P. Roberto Bakker
>> <robertobakker at gmail.com> wrote:
>> > Dear David,
>> >
>> > Thank you for you quite response.
>> > My apologies for not giving some sample data - this is due to AVG.
>> > *But this minisample should not be a problem (all in Dutch)*:
>> >  teamq
>> > # A tibble: 4 x 2
>> >   `Ik volg bijscholing om mijn opleiders-kwaliteiten op peil te houden`
>> >
>> >   <chr>
>> >
>> > 1 de situatie in hoge mate van toepassing is voor u of uw
>> > supervisorengroep
>> > 2 de situatie in zeer hoge mate van toepassing is voor u of uw
>> > supervisorengroep
>> > 3 de situatie in zeer hoge mate van toepassing is voor u of uw
>> > supervisorengroep
>> > 4 de situatie in geringe mate van toepassing is voor u of uw
>> > supervisorengroep
>> >   `Ik weet precies wat de ?modernisering van de opleiding? inhoudt`
>> >
>> >   <chr>
>> >
>> > 1 de situatie in hoge mate van toepassing is voor u of uw
>> > supervisorengroep
>> > 2 de situatie in zeer hoge mate van toepassing is voor u of uw
>> > supervisorengroep
>> > 3 de situatie in zeer hoge mate van toepassing is voor u of uw
>> > supervisorengroep
>> > 4 de situatie in geringe mate van toepassing is voor u of uw
>> > supervisorengroep
>> >
>> > As you see the likert items are in words, and I should change them in
>> > nummeric - Am I correct?
>> >
>> > *To do this, I tried (see further below):*
>> > plyr rename() ; I receive the message it should be a factor or character
>> > dplyr recode() ; same message
>> > mapvalues() ; it should be atomic, so I used as.atomic(teamq) but then I
>> > receive the nummers a strings.
>> >
>> > *The syntaxes*
>> > require(plyr)
>> > example2 <- revalue(teamq,
>> >                     c("de situatie in zeer geringe mate van toepassing
>> is
>> > voor u of uw supervisorengroep"= "1",
>> >                         "de situatie in geringe mate van toepassing is
>> voor
>> > u of uw supervisorengroep"= "2",
>> >                         "de situatie enigszins van toepassing is voor u
>> of
>> > uw supervisorengroep"= "3",
>> >                         "de situatie in hoge mate van toepassing is
>> voor u
>> > of uw supervisorengroep"= "4",
>> >                         "de situatie in zeer hoge mate van toepassing is
>> > voor u of uw supervisorengroep"= "5"))
>> >
>> > require(dplyr)
>> > example2 <- recode(teamq,
>> >                     c("de situatie in zeer geringe mate van toepassing
>> is
>> > voor u of uw supervisorengroep"= "1",
>> >                       "de situatie in geringe mate van toepassing is
>> voor u
>> > of uw supervisorengroep"= "2",
>> >                       "de situatie enigszins van toepassing is voor u
>> of uw
>> > supervisorengroep"= "3",
>> >                       "de situatie in hoge mate van toepassing is voor
>> u of
>> > uw supervisorengroep"= "4",
>> >                       "de situatie in zeer hoge mate van toepassing is
>> voor
>> > u of uw supervisorengroep"= "5"))
>> >
>> > mapvalues(as.matrix(teamq), from = c("de situatie in zeer geringe mate
>> van
>> > toepassing is voor u of uw supervisorengroep",
>> >                         "de situatie in geringe mate van toepassing is
>> voor
>> > u of uw supervisorengroep",
>> >                         "de situatie enigszins van toepassing is voor u
>> of
>> > uw supervisorengroep",
>> >                         "de situatie in hoge mate van toepassing is
>> voor u
>> > of uw supervisorengroep",
>> >                         "de situatie in zeer hoge mate van toepassing is
>> > voor u of uw supervisorengroep"),
>> >           to = c(1,2,3,4,5))
>> >
>> > What should I do?
>> > Thank you in advance, Roberto
>> >
>> > Op ma 22 okt. 2018 om 17:13 schreef David L Carlson <dcarlson at tamu.edu
>> >:
>> >
>> >> Your example is not reproducible since you did not give us some sample
>> >> data. I suspect that your data frame consists of columns that represent
>> >> questions and rows that represent individuals who answered the
>> questions.
>> >> First create a simple example:
>> >>
>> >> set.seed(42)
>> >> teamq <- data.frame(V1=sample(c(1, 2, 4, 5), 25, replace = TRUE),
>> >>      V2=sample(c(1, 2, 3, 4, 5), 25, replace=TRUE),
>> >>      V3=sample(c(2, 3, 4, 5), 25, replace=TRUE))
>> >>
>> >> Notice that this data frame ONLY contains questions (and only 3
>> >> questions). Here are 2 ways to get what you want. The first one stacks
>> the
>> >> data:
>> >>
>> >> teamq.stack <- stack(teamq)
>> >> str(teamq.stack)
>> >> counts <- table(teamq.stack)
>> >> str(counts)
>> >>
>> >> The second one converts each column to a factor with levels 1 - 5:
>> >>
>> >> teamq2 <- data.frame(lapply(teamq, factor, levels=1:5))
>> >> str(teamq2)
>> >> counts <- sapply(teamq2, table)
>> >> str(counts)
>> >>
>> >> Now make the plots:
>> >>
>> >> cols <- c("yellow","sandybrown","orange", "darkolivegreen","green")
>> >> barplot(counts[, 1], horiz=TRUE, col=cols, legend=TRUE)
>> >> barplot(counts[, 2], horiz=TRUE, col=cols, legend=TRUE)
>> >> barplot(counts[, 3], horiz=TRUE, col=cols, legend=TRUE)
>> >>
>> >> You will need to adjust the xlim= argument so that the legend does not
>> >> print on top of the bars.
>> >>
>> >> ----------------------------------------
>> >> David L Carlson
>> >> Department of Anthropology
>> >> Texas A&M University
>> >> College Station, TX 77843-4352
>> >>
>> >>
>> >> -----Original Message-----
>> >> From: R-help <r-help-bounces at r-project.org> On Behalf Of P. Roberto
>> Bakker
>> >> Sent: Monday, October 22, 2018 9:04 AM
>> >> To: R mailing list <r-help at r-project.org>
>> >> Subject: [R] Different stack barplots - same color legends
>> >>
>> >> Hi,
>> >>
>> >> I want to make barplots from different questions (columns) in one
>> >> data.frame.
>> >> Each question has the same 5 likert items.
>> >> Now the problem: in some questions all items are answered; in other
>> less.
>> >> From the syntax below I get nice stack barplots - *but the legend
>> colors do
>> >> not* refer to the same likert-item, which I understand - the colors go
>> in
>> >> sequence along the table.
>> >> Question: how can I write a syntax that each likert-item has the same
>> >> legend color?
>> >> Thank you in advance,
>> >>
>> >> Roberto
>> >>
>> >> SYNTAX:
>> >> counts19 <- table(teamq[,19])
>> >> counts20 <- table(teamq[,20])
>> >> barplot(as.matrix(counts19), horiz = T,
>> >>         col=c("yellow","sandybrown","orange",
>> "darkolivegreen","green"),
>> >> legend=T)
>> >> barplot(as.matrix(counts20), horiz = T,
>> >>         col=c("yellow","sandybrown","orange",
>> "darkolivegreen","green"),
>> >> legend=T)
>> >>
>> >>         [[alternative HTML version deleted]]
>> >>
>> >> ______________________________________________
>> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> >> https://stat.ethz.ch/mailman/listinfo/r-help
>> >> PLEASE do read the posting guide
>> >> http://www.R-project.org/posting-guide.html
>> >> and provide commented, minimal, self-contained, reproducible code.
>> >>
>> >
>> >         [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From robertob@kker @ending from gm@il@com  Wed Oct 31 16:15:55 2018
From: robertob@kker @ending from gm@il@com (P. Roberto Bakker)
Date: Wed, 31 Oct 2018 16:15:55 +0100
Subject: [R] Different stack barplots - same color legends
In-Reply-To: <CAGx1TMB+=RnNeoBmzF=_-gxZ2bzaabExs2Gf-8dKE2vAcpiHpA@mail.gmail.com>
References: <CAKDq9_N16xaeL4O2j=v2bVuMb=tuHfu0Ao+yuLQcEq6B-ngq1A@mail.gmail.com>
 <af9001d319ac4992b0bfc5526150f03b@tamu.edu>
 <CAKDq9_P8hQEHWFH=c_86bG81fU0GS+EUCOmtZ9gJa_7kY-2uhA@mail.gmail.com>
 <CAGx1TMAYybconxY7ZVVJcdiYW6+WOjr_D+=GHOA=Xxv2AWRCqQ@mail.gmail.com>
 <CAKDq9_Oi0HGNV7qLnmi4HgVr7orF_gpC7Sys8mLKAxMfjHVtvQ@mail.gmail.com>
 <CAGx1TMB+=RnNeoBmzF=_-gxZ2bzaabExs2Gf-8dKE2vAcpiHpA@mail.gmail.com>
Message-ID: <CAKDq9_P3GfHXbFbChQwrDUm=E+RuuWGP89tf_KPFXRjYAsrA+A@mail.gmail.com>

It is a very long result text. I can send it to you, or is part of it ok?[

Op wo 31 okt. 2018 om 14:27 schreef Richard M. Heiberger <rmh at temple.edu>:

> Please send me the
> dput(teamq)
>
>
> On Wed, Oct 31, 2018 at 03:51 P. Roberto Bakker <robertobakker at gmail.com>
> wrote:
>
>> Thank you for you information. Package 'HH' is interesting.
>>
>> Now I find another problem when using 'likert(teamq)'
>> I get an error message:
>> > likert(teamq)
>> Error in dimnames(x) <- `*vtmp*` :
>>   length of 'dimnames' [2] not equal to array extent
>>
>> I checked:
>> > dim(teamq)
>> [1] 4 2
>> > ncol(teamq)
>> [1] 2
>> So it should be good.
>>
>> I used 'make.names' , in case the spaces in the variable names would be a
>> problem.
>> Same error.
>>
>> What could I do?
>>
>> Best and thank you in advance.
>> Roberto
>>
>>
>> Op ma 22 okt. 2018 om 20:10 schreef Richard M. Heiberger <rmh at temple.edu
>> >:
>>
>>> Try the likert function in
>>> install.packages("HH) ## if necessary
>>> library(HH)
>>>
>>> Then using David Carlson's example teamq
>>> likert(teamq)
>>>
>>> Your example in the 1:30PM (Eastern Daylight Time) doesn't work.
>>> Error in revalue(teamq, c(`de situatie in zeer geringe mate van
>>> toepassing is\nvoor u of uw supervisorengroep` = "1",  :
>>>   x is not a factor or a character vector.
>>>
>>> There are many examples in
>>> ?likert
>>>
>>> Rich
>>>
>>>
>>> On Mon, Oct 22, 2018 at 1:30 PM, P. Roberto Bakker
>>> <robertobakker at gmail.com> wrote:
>>> > Dear David,
>>> >
>>> > Thank you for you quite response.
>>> > My apologies for not giving some sample data - this is due to AVG.
>>> > *But this minisample should not be a problem (all in Dutch)*:
>>> >  teamq
>>> > # A tibble: 4 x 2
>>> >   `Ik volg bijscholing om mijn opleiders-kwaliteiten op peil te houden`
>>> >
>>> >   <chr>
>>> >
>>> > 1 de situatie in hoge mate van toepassing is voor u of uw
>>> > supervisorengroep
>>> > 2 de situatie in zeer hoge mate van toepassing is voor u of uw
>>> > supervisorengroep
>>> > 3 de situatie in zeer hoge mate van toepassing is voor u of uw
>>> > supervisorengroep
>>> > 4 de situatie in geringe mate van toepassing is voor u of uw
>>> > supervisorengroep
>>> >   `Ik weet precies wat de ?modernisering van de opleiding? inhoudt`
>>> >
>>> >   <chr>
>>> >
>>> > 1 de situatie in hoge mate van toepassing is voor u of uw
>>> > supervisorengroep
>>> > 2 de situatie in zeer hoge mate van toepassing is voor u of uw
>>> > supervisorengroep
>>> > 3 de situatie in zeer hoge mate van toepassing is voor u of uw
>>> > supervisorengroep
>>> > 4 de situatie in geringe mate van toepassing is voor u of uw
>>> > supervisorengroep
>>> >
>>> > As you see the likert items are in words, and I should change them in
>>> > nummeric - Am I correct?
>>> >
>>> > *To do this, I tried (see further below):*
>>> > plyr rename() ; I receive the message it should be a factor or
>>> character
>>> > dplyr recode() ; same message
>>> > mapvalues() ; it should be atomic, so I used as.atomic(teamq) but then
>>> I
>>> > receive the nummers a strings.
>>> >
>>> > *The syntaxes*
>>> > require(plyr)
>>> > example2 <- revalue(teamq,
>>> >                     c("de situatie in zeer geringe mate van toepassing
>>> is
>>> > voor u of uw supervisorengroep"= "1",
>>> >                         "de situatie in geringe mate van toepassing is
>>> voor
>>> > u of uw supervisorengroep"= "2",
>>> >                         "de situatie enigszins van toepassing is voor
>>> u of
>>> > uw supervisorengroep"= "3",
>>> >                         "de situatie in hoge mate van toepassing is
>>> voor u
>>> > of uw supervisorengroep"= "4",
>>> >                         "de situatie in zeer hoge mate van toepassing
>>> is
>>> > voor u of uw supervisorengroep"= "5"))
>>> >
>>> > require(dplyr)
>>> > example2 <- recode(teamq,
>>> >                     c("de situatie in zeer geringe mate van toepassing
>>> is
>>> > voor u of uw supervisorengroep"= "1",
>>> >                       "de situatie in geringe mate van toepassing is
>>> voor u
>>> > of uw supervisorengroep"= "2",
>>> >                       "de situatie enigszins van toepassing is voor u
>>> of uw
>>> > supervisorengroep"= "3",
>>> >                       "de situatie in hoge mate van toepassing is voor
>>> u of
>>> > uw supervisorengroep"= "4",
>>> >                       "de situatie in zeer hoge mate van toepassing is
>>> voor
>>> > u of uw supervisorengroep"= "5"))
>>> >
>>> > mapvalues(as.matrix(teamq), from = c("de situatie in zeer geringe mate
>>> van
>>> > toepassing is voor u of uw supervisorengroep",
>>> >                         "de situatie in geringe mate van toepassing is
>>> voor
>>> > u of uw supervisorengroep",
>>> >                         "de situatie enigszins van toepassing is voor
>>> u of
>>> > uw supervisorengroep",
>>> >                         "de situatie in hoge mate van toepassing is
>>> voor u
>>> > of uw supervisorengroep",
>>> >                         "de situatie in zeer hoge mate van toepassing
>>> is
>>> > voor u of uw supervisorengroep"),
>>> >           to = c(1,2,3,4,5))
>>> >
>>> > What should I do?
>>> > Thank you in advance, Roberto
>>> >
>>> > Op ma 22 okt. 2018 om 17:13 schreef David L Carlson <dcarlson at tamu.edu
>>> >:
>>> >
>>> >> Your example is not reproducible since you did not give us some sample
>>> >> data. I suspect that your data frame consists of columns that
>>> represent
>>> >> questions and rows that represent individuals who answered the
>>> questions.
>>> >> First create a simple example:
>>> >>
>>> >> set.seed(42)
>>> >> teamq <- data.frame(V1=sample(c(1, 2, 4, 5), 25, replace = TRUE),
>>> >>      V2=sample(c(1, 2, 3, 4, 5), 25, replace=TRUE),
>>> >>      V3=sample(c(2, 3, 4, 5), 25, replace=TRUE))
>>> >>
>>> >> Notice that this data frame ONLY contains questions (and only 3
>>> >> questions). Here are 2 ways to get what you want. The first one
>>> stacks the
>>> >> data:
>>> >>
>>> >> teamq.stack <- stack(teamq)
>>> >> str(teamq.stack)
>>> >> counts <- table(teamq.stack)
>>> >> str(counts)
>>> >>
>>> >> The second one converts each column to a factor with levels 1 - 5:
>>> >>
>>> >> teamq2 <- data.frame(lapply(teamq, factor, levels=1:5))
>>> >> str(teamq2)
>>> >> counts <- sapply(teamq2, table)
>>> >> str(counts)
>>> >>
>>> >> Now make the plots:
>>> >>
>>> >> cols <- c("yellow","sandybrown","orange", "darkolivegreen","green")
>>> >> barplot(counts[, 1], horiz=TRUE, col=cols, legend=TRUE)
>>> >> barplot(counts[, 2], horiz=TRUE, col=cols, legend=TRUE)
>>> >> barplot(counts[, 3], horiz=TRUE, col=cols, legend=TRUE)
>>> >>
>>> >> You will need to adjust the xlim= argument so that the legend does not
>>> >> print on top of the bars.
>>> >>
>>> >> ----------------------------------------
>>> >> David L Carlson
>>> >> Department of Anthropology
>>> >> Texas A&M University
>>> >> College Station, TX 77843-4352
>>> >>
>>> >>
>>> >> -----Original Message-----
>>> >> From: R-help <r-help-bounces at r-project.org> On Behalf Of P. Roberto
>>> Bakker
>>> >> Sent: Monday, October 22, 2018 9:04 AM
>>> >> To: R mailing list <r-help at r-project.org>
>>> >> Subject: [R] Different stack barplots - same color legends
>>> >>
>>> >> Hi,
>>> >>
>>> >> I want to make barplots from different questions (columns) in one
>>> >> data.frame.
>>> >> Each question has the same 5 likert items.
>>> >> Now the problem: in some questions all items are answered; in other
>>> less.
>>> >> From the syntax below I get nice stack barplots - *but the legend
>>> colors do
>>> >> not* refer to the same likert-item, which I understand - the colors
>>> go in
>>> >> sequence along the table.
>>> >> Question: how can I write a syntax that each likert-item has the same
>>> >> legend color?
>>> >> Thank you in advance,
>>> >>
>>> >> Roberto
>>> >>
>>> >> SYNTAX:
>>> >> counts19 <- table(teamq[,19])
>>> >> counts20 <- table(teamq[,20])
>>> >> barplot(as.matrix(counts19), horiz = T,
>>> >>         col=c("yellow","sandybrown","orange",
>>> "darkolivegreen","green"),
>>> >> legend=T)
>>> >> barplot(as.matrix(counts20), horiz = T,
>>> >>         col=c("yellow","sandybrown","orange",
>>> "darkolivegreen","green"),
>>> >> legend=T)
>>> >>
>>> >>         [[alternative HTML version deleted]]
>>> >>
>>> >> ______________________________________________
>>> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> >> https://stat.ethz.ch/mailman/listinfo/r-help
>>> >> PLEASE do read the posting guide
>>> >> http://www.R-project.org/posting-guide.html
>>> >> and provide commented, minimal, self-contained, reproducible code.
>>> >>
>>> >
>>> >         [[alternative HTML version deleted]]
>>> >
>>> > ______________________________________________
>>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> > https://stat.ethz.ch/mailman/listinfo/r-help
>>> > PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> > and provide commented, minimal, self-contained, reproducible code.
>>>
>>

	[[alternative HTML version deleted]]


From rmh @ending from temple@edu  Wed Oct 31 16:24:06 2018
From: rmh @ending from temple@edu (Richard M. Heiberger)
Date: Wed, 31 Oct 2018 11:24:06 -0400
Subject: [R] Different stack barplots - same color legends
In-Reply-To: <CAKDq9_P3GfHXbFbChQwrDUm=E+RuuWGP89tf_KPFXRjYAsrA+A@mail.gmail.com>
References: <CAKDq9_N16xaeL4O2j=v2bVuMb=tuHfu0Ao+yuLQcEq6B-ngq1A@mail.gmail.com>
 <af9001d319ac4992b0bfc5526150f03b@tamu.edu>
 <CAKDq9_P8hQEHWFH=c_86bG81fU0GS+EUCOmtZ9gJa_7kY-2uhA@mail.gmail.com>
 <CAGx1TMAYybconxY7ZVVJcdiYW6+WOjr_D+=GHOA=Xxv2AWRCqQ@mail.gmail.com>
 <CAKDq9_Oi0HGNV7qLnmi4HgVr7orF_gpC7Sys8mLKAxMfjHVtvQ@mail.gmail.com>
 <CAGx1TMB+=RnNeoBmzF=_-gxZ2bzaabExs2Gf-8dKE2vAcpiHpA@mail.gmail.com>
 <CAKDq9_P3GfHXbFbChQwrDUm=E+RuuWGP89tf_KPFXRjYAsrA+A@mail.gmail.com>
Message-ID: <CAGx1TMByCiZvwOPm06qo4bssWjh=UP9ZPvkX5zi+6dNE=wggaA@mail.gmail.com>

part is fine.  just be sure that the small part causes the problem.
I will need that to investigate what is happening.


On Wed, Oct 31, 2018 at 11:15 AM, P. Roberto Bakker
<robertobakker at gmail.com> wrote:
> It is a very long result text. I can send it to you, or is part of it ok?[
>
> Op wo 31 okt. 2018 om 14:27 schreef Richard M. Heiberger <rmh at temple.edu>:
>>
>> Please send me the
>> dput(teamq)
>>
>>
>> On Wed, Oct 31, 2018 at 03:51 P. Roberto Bakker <robertobakker at gmail.com>
>> wrote:
>>>
>>> Thank you for you information. Package 'HH' is interesting.
>>>
>>> Now I find another problem when using 'likert(teamq)'
>>> I get an error message:
>>> > likert(teamq)
>>> Error in dimnames(x) <- `*vtmp*` :
>>>   length of 'dimnames' [2] not equal to array extent
>>>
>>> I checked:
>>> > dim(teamq)
>>> [1] 4 2
>>> > ncol(teamq)
>>> [1] 2
>>> So it should be good.
>>>
>>> I used 'make.names' , in case the spaces in the variable names would be a
>>> problem.
>>> Same error.
>>>
>>> What could I do?
>>>
>>> Best and thank you in advance.
>>> Roberto
>>>
>>>
>>> Op ma 22 okt. 2018 om 20:10 schreef Richard M. Heiberger
>>> <rmh at temple.edu>:
>>>>
>>>> Try the likert function in
>>>> install.packages("HH) ## if necessary
>>>> library(HH)
>>>>
>>>> Then using David Carlson's example teamq
>>>> likert(teamq)
>>>>
>>>> Your example in the 1:30PM (Eastern Daylight Time) doesn't work.
>>>> Error in revalue(teamq, c(`de situatie in zeer geringe mate van
>>>> toepassing is\nvoor u of uw supervisorengroep` = "1",  :
>>>>   x is not a factor or a character vector.
>>>>
>>>> There are many examples in
>>>> ?likert
>>>>
>>>> Rich
>>>>
>>>>
>>>> On Mon, Oct 22, 2018 at 1:30 PM, P. Roberto Bakker
>>>> <robertobakker at gmail.com> wrote:
>>>> > Dear David,
>>>> >
>>>> > Thank you for you quite response.
>>>> > My apologies for not giving some sample data - this is due to AVG.
>>>> > *But this minisample should not be a problem (all in Dutch)*:
>>>> >  teamq
>>>> > # A tibble: 4 x 2
>>>> >   `Ik volg bijscholing om mijn opleiders-kwaliteiten op peil te
>>>> > houden`
>>>> >
>>>> >   <chr>
>>>> >
>>>> > 1 de situatie in hoge mate van toepassing is voor u of uw
>>>> > supervisorengroep
>>>> > 2 de situatie in zeer hoge mate van toepassing is voor u of uw
>>>> > supervisorengroep
>>>> > 3 de situatie in zeer hoge mate van toepassing is voor u of uw
>>>> > supervisorengroep
>>>> > 4 de situatie in geringe mate van toepassing is voor u of uw
>>>> > supervisorengroep
>>>> >   `Ik weet precies wat de ?modernisering van de opleiding? inhoudt`
>>>> >
>>>> >   <chr>
>>>> >
>>>> > 1 de situatie in hoge mate van toepassing is voor u of uw
>>>> > supervisorengroep
>>>> > 2 de situatie in zeer hoge mate van toepassing is voor u of uw
>>>> > supervisorengroep
>>>> > 3 de situatie in zeer hoge mate van toepassing is voor u of uw
>>>> > supervisorengroep
>>>> > 4 de situatie in geringe mate van toepassing is voor u of uw
>>>> > supervisorengroep
>>>> >
>>>> > As you see the likert items are in words, and I should change them in
>>>> > nummeric - Am I correct?
>>>> >
>>>> > *To do this, I tried (see further below):*
>>>> > plyr rename() ; I receive the message it should be a factor or
>>>> > character
>>>> > dplyr recode() ; same message
>>>> > mapvalues() ; it should be atomic, so I used as.atomic(teamq) but then
>>>> > I
>>>> > receive the nummers a strings.
>>>> >
>>>> > *The syntaxes*
>>>> > require(plyr)
>>>> > example2 <- revalue(teamq,
>>>> >                     c("de situatie in zeer geringe mate van toepassing
>>>> > is
>>>> > voor u of uw supervisorengroep"= "1",
>>>> >                         "de situatie in geringe mate van toepassing is
>>>> > voor
>>>> > u of uw supervisorengroep"= "2",
>>>> >                         "de situatie enigszins van toepassing is voor
>>>> > u of
>>>> > uw supervisorengroep"= "3",
>>>> >                         "de situatie in hoge mate van toepassing is
>>>> > voor u
>>>> > of uw supervisorengroep"= "4",
>>>> >                         "de situatie in zeer hoge mate van toepassing
>>>> > is
>>>> > voor u of uw supervisorengroep"= "5"))
>>>> >
>>>> > require(dplyr)
>>>> > example2 <- recode(teamq,
>>>> >                     c("de situatie in zeer geringe mate van toepassing
>>>> > is
>>>> > voor u of uw supervisorengroep"= "1",
>>>> >                       "de situatie in geringe mate van toepassing is
>>>> > voor u
>>>> > of uw supervisorengroep"= "2",
>>>> >                       "de situatie enigszins van toepassing is voor u
>>>> > of uw
>>>> > supervisorengroep"= "3",
>>>> >                       "de situatie in hoge mate van toepassing is voor
>>>> > u of
>>>> > uw supervisorengroep"= "4",
>>>> >                       "de situatie in zeer hoge mate van toepassing is
>>>> > voor
>>>> > u of uw supervisorengroep"= "5"))
>>>> >
>>>> > mapvalues(as.matrix(teamq), from = c("de situatie in zeer geringe mate
>>>> > van
>>>> > toepassing is voor u of uw supervisorengroep",
>>>> >                         "de situatie in geringe mate van toepassing is
>>>> > voor
>>>> > u of uw supervisorengroep",
>>>> >                         "de situatie enigszins van toepassing is voor
>>>> > u of
>>>> > uw supervisorengroep",
>>>> >                         "de situatie in hoge mate van toepassing is
>>>> > voor u
>>>> > of uw supervisorengroep",
>>>> >                         "de situatie in zeer hoge mate van toepassing
>>>> > is
>>>> > voor u of uw supervisorengroep"),
>>>> >           to = c(1,2,3,4,5))
>>>> >
>>>> > What should I do?
>>>> > Thank you in advance, Roberto
>>>> >
>>>> > Op ma 22 okt. 2018 om 17:13 schreef David L Carlson
>>>> > <dcarlson at tamu.edu>:
>>>> >
>>>> >> Your example is not reproducible since you did not give us some
>>>> >> sample
>>>> >> data. I suspect that your data frame consists of columns that
>>>> >> represent
>>>> >> questions and rows that represent individuals who answered the
>>>> >> questions.
>>>> >> First create a simple example:
>>>> >>
>>>> >> set.seed(42)
>>>> >> teamq <- data.frame(V1=sample(c(1, 2, 4, 5), 25, replace = TRUE),
>>>> >>      V2=sample(c(1, 2, 3, 4, 5), 25, replace=TRUE),
>>>> >>      V3=sample(c(2, 3, 4, 5), 25, replace=TRUE))
>>>> >>
>>>> >> Notice that this data frame ONLY contains questions (and only 3
>>>> >> questions). Here are 2 ways to get what you want. The first one
>>>> >> stacks the
>>>> >> data:
>>>> >>
>>>> >> teamq.stack <- stack(teamq)
>>>> >> str(teamq.stack)
>>>> >> counts <- table(teamq.stack)
>>>> >> str(counts)
>>>> >>
>>>> >> The second one converts each column to a factor with levels 1 - 5:
>>>> >>
>>>> >> teamq2 <- data.frame(lapply(teamq, factor, levels=1:5))
>>>> >> str(teamq2)
>>>> >> counts <- sapply(teamq2, table)
>>>> >> str(counts)
>>>> >>
>>>> >> Now make the plots:
>>>> >>
>>>> >> cols <- c("yellow","sandybrown","orange", "darkolivegreen","green")
>>>> >> barplot(counts[, 1], horiz=TRUE, col=cols, legend=TRUE)
>>>> >> barplot(counts[, 2], horiz=TRUE, col=cols, legend=TRUE)
>>>> >> barplot(counts[, 3], horiz=TRUE, col=cols, legend=TRUE)
>>>> >>
>>>> >> You will need to adjust the xlim= argument so that the legend does
>>>> >> not
>>>> >> print on top of the bars.
>>>> >>
>>>> >> ----------------------------------------
>>>> >> David L Carlson
>>>> >> Department of Anthropology
>>>> >> Texas A&M University
>>>> >> College Station, TX 77843-4352
>>>> >>
>>>> >>
>>>> >> -----Original Message-----
>>>> >> From: R-help <r-help-bounces at r-project.org> On Behalf Of P. Roberto
>>>> >> Bakker
>>>> >> Sent: Monday, October 22, 2018 9:04 AM
>>>> >> To: R mailing list <r-help at r-project.org>
>>>> >> Subject: [R] Different stack barplots - same color legends
>>>> >>
>>>> >> Hi,
>>>> >>
>>>> >> I want to make barplots from different questions (columns) in one
>>>> >> data.frame.
>>>> >> Each question has the same 5 likert items.
>>>> >> Now the problem: in some questions all items are answered; in other
>>>> >> less.
>>>> >> From the syntax below I get nice stack barplots - *but the legend
>>>> >> colors do
>>>> >> not* refer to the same likert-item, which I understand - the colors
>>>> >> go in
>>>> >> sequence along the table.
>>>> >> Question: how can I write a syntax that each likert-item has the same
>>>> >> legend color?
>>>> >> Thank you in advance,
>>>> >>
>>>> >> Roberto
>>>> >>
>>>> >> SYNTAX:
>>>> >> counts19 <- table(teamq[,19])
>>>> >> counts20 <- table(teamq[,20])
>>>> >> barplot(as.matrix(counts19), horiz = T,
>>>> >>         col=c("yellow","sandybrown","orange",
>>>> >> "darkolivegreen","green"),
>>>> >> legend=T)
>>>> >> barplot(as.matrix(counts20), horiz = T,
>>>> >>         col=c("yellow","sandybrown","orange",
>>>> >> "darkolivegreen","green"),
>>>> >> legend=T)
>>>> >>
>>>> >>         [[alternative HTML version deleted]]
>>>> >>
>>>> >> ______________________________________________
>>>> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> >> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> >> PLEASE do read the posting guide
>>>> >> http://www.R-project.org/posting-guide.html
>>>> >> and provide commented, minimal, self-contained, reproducible code.
>>>> >>
>>>> >
>>>> >         [[alternative HTML version deleted]]
>>>> >
>>>> > ______________________________________________
>>>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> > https://stat.ethz.ch/mailman/listinfo/r-help
>>>> > PLEASE do read the posting guide
>>>> > http://www.R-project.org/posting-guide.html
>>>> > and provide commented, minimal, self-contained, reproducible code.


From r-@ub@cribe @ending from m@il@ru  Wed Oct 31 16:34:40 2018
From: r-@ub@cribe @ending from m@il@ru (=?UTF-8?B?TWVkaWM=?=)
Date: Wed, 31 Oct 2018 18:34:40 +0300
Subject: [R] =?utf-8?q?survival_analysis_question?=
Message-ID: <1541000080.817310464@f419.i.mail.ru>


When I run the code from the book Kleinbaum "Survival analysis" (7. Running an extended cox model. Page 646) I got an ERROR. What do you think is the reason? I attach a file with few lines of dataset "addicts-dput.r".
> library(cmprsk)
> addicts = read.csv ("addicts.csv")?
? ?id clinic status survt prison dose
1 ?1 ? ? ?1 ? ? ?1 ? 428 ? ? ?0 ? 50
2 ?2 ? ? ?1 ? ? ?1 ? 275 ? ? ?1 ? 55
3 ?3 ? ? ?1 ? ? ?1 ? 262 ? ? ?0 ? 55
4 ?4 ? ? ?1 ? ? ?1 ? 183 ? ? ?0 ? 30
5 ?5 ? ? ?1 ? ? ?1 ? 259 ? ? ?1 ? 65
6 ?6 ? ? ?1 ? ? ?1 ? 714 ? ? ?0 ? 55
7 ?7 ? ? ?1 ? ? ?1 ? 438 ? ? ?1 ? 65
8 ?8 ? ? ?1 ? ? ?0 ? 796 ? ? ?1 ? 60
9 ?9 ? ? ?1 ? ? ?1 ? 892 ? ? ?0 ? 50
> addicts.cp=survSplit(addicts, cut=addicts$survt[addicts$status==1], end="survt", event="status",start="start", id="id")
ERROR in survSplit(addicts, cut = addicts$survt[addicts$status == 1],: the suggested id name is already present.




From robertob@kker @ending from gm@il@com  Wed Oct 31 18:53:51 2018
From: robertob@kker @ending from gm@il@com (P. Roberto Bakker)
Date: Wed, 31 Oct 2018 18:53:51 +0100
Subject: [R] Different stack barplots - same color legends
In-Reply-To: <CAGx1TMByCiZvwOPm06qo4bssWjh=UP9ZPvkX5zi+6dNE=wggaA@mail.gmail.com>
References: <CAKDq9_N16xaeL4O2j=v2bVuMb=tuHfu0Ao+yuLQcEq6B-ngq1A@mail.gmail.com>
 <af9001d319ac4992b0bfc5526150f03b@tamu.edu>
 <CAKDq9_P8hQEHWFH=c_86bG81fU0GS+EUCOmtZ9gJa_7kY-2uhA@mail.gmail.com>
 <CAGx1TMAYybconxY7ZVVJcdiYW6+WOjr_D+=GHOA=Xxv2AWRCqQ@mail.gmail.com>
 <CAKDq9_Oi0HGNV7qLnmi4HgVr7orF_gpC7Sys8mLKAxMfjHVtvQ@mail.gmail.com>
 <CAGx1TMB+=RnNeoBmzF=_-gxZ2bzaabExs2Gf-8dKE2vAcpiHpA@mail.gmail.com>
 <CAKDq9_P3GfHXbFbChQwrDUm=E+RuuWGP89tf_KPFXRjYAsrA+A@mail.gmail.com>
 <CAGx1TMByCiZvwOPm06qo4bssWjh=UP9ZPvkX5zi+6dNE=wggaA@mail.gmail.com>
Message-ID: <CAKDq9_OkLfiP98cuYUg0BU_+cCXmKi9gKHqxSm+Eu16eC3WWyg@mail.gmail.com>

This is part of the output text

"de situatie in hoge mate van toepassing is voor u of uw
supervisorengroep",
"de situatie in hoge mate van toepassing is voor u of uw
supervisorengroep",
"de situatie enigszins van toepassing is voor u of uw supervisorengroep",
"de situatie in hoge mate van toepassing is voor u of uw supervisorengroep"
), `Ik waardeer de inbreng van de aios in de afdelingsvergadering` = c("de
situatie in hoge mate van toepassing is voor u of uw supervisorengroep",
"de situatie in hoge mate van toepassing is voor u of uw
supervisorengroep",
"de situatie in zeer hoge mate van toepassing is voor u of uw
supervisorengroep",
"de situatie in zeer hoge mate van toepassing is voor u of uw
supervisorengroep",
"de situatie enigszins van toepassing is voor u of uw supervisorengroep",
"de situatie in zeer hoge mate van toepassing is voor u of uw
supervisorengroep",
"de situatie in zeer hoge mate van toepassing is voor u of uw
supervisorengroep",
"de situatie in zeer hoge mate van toepassing is voor u of uw
supervisorengroep",
"de situatie enigszins van toepassing is voor u of uw supervisorengroep",
"de situatie in hoge mate van toepassing is voor u of uw
supervisorengroep",
"de situatie in hoge mate van toepassing is voor u of uw
supervisorengroep",
"de situatie in hoge mate van toepassing is voor u of uw
supervisorengroep",

Op wo 31 okt. 2018 om 16:24 schreef Richard M. Heiberger <rmh at temple.edu>:

> part is fine.  just be sure that the small part causes the problem.
> I will need that to investigate what is happening.
>
>
> On Wed, Oct 31, 2018 at 11:15 AM, P. Roberto Bakker
> <robertobakker at gmail.com> wrote:
> > It is a very long result text. I can send it to you, or is part of it
> ok?[
> >
> > Op wo 31 okt. 2018 om 14:27 schreef Richard M. Heiberger <rmh at temple.edu
> >:
> >>
> >> Please send me the
> >> dput(teamq)
> >>
> >>
> >> On Wed, Oct 31, 2018 at 03:51 P. Roberto Bakker <
> robertobakker at gmail.com>
> >> wrote:
> >>>
> >>> Thank you for you information. Package 'HH' is interesting.
> >>>
> >>> Now I find another problem when using 'likert(teamq)'
> >>> I get an error message:
> >>> > likert(teamq)
> >>> Error in dimnames(x) <- `*vtmp*` :
> >>>   length of 'dimnames' [2] not equal to array extent
> >>>
> >>> I checked:
> >>> > dim(teamq)
> >>> [1] 4 2
> >>> > ncol(teamq)
> >>> [1] 2
> >>> So it should be good.
> >>>
> >>> I used 'make.names' , in case the spaces in the variable names would
> be a
> >>> problem.
> >>> Same error.
> >>>
> >>> What could I do?
> >>>
> >>> Best and thank you in advance.
> >>> Roberto
> >>>
> >>>
> >>> Op ma 22 okt. 2018 om 20:10 schreef Richard M. Heiberger
> >>> <rmh at temple.edu>:
> >>>>
> >>>> Try the likert function in
> >>>> install.packages("HH) ## if necessary
> >>>> library(HH)
> >>>>
> >>>> Then using David Carlson's example teamq
> >>>> likert(teamq)
> >>>>
> >>>> Your example in the 1:30PM (Eastern Daylight Time) doesn't work.
> >>>> Error in revalue(teamq, c(`de situatie in zeer geringe mate van
> >>>> toepassing is\nvoor u of uw supervisorengroep` = "1",  :
> >>>>   x is not a factor or a character vector.
> >>>>
> >>>> There are many examples in
> >>>> ?likert
> >>>>
> >>>> Rich
> >>>>
> >>>>
> >>>> On Mon, Oct 22, 2018 at 1:30 PM, P. Roberto Bakker
> >>>> <robertobakker at gmail.com> wrote:
> >>>> > Dear David,
> >>>> >
> >>>> > Thank you for you quite response.
> >>>> > My apologies for not giving some sample data - this is due to AVG.
> >>>> > *But this minisample should not be a problem (all in Dutch)*:
> >>>> >  teamq
> >>>> > # A tibble: 4 x 2
> >>>> >   `Ik volg bijscholing om mijn opleiders-kwaliteiten op peil te
> >>>> > houden`
> >>>> >
> >>>> >   <chr>
> >>>> >
> >>>> > 1 de situatie in hoge mate van toepassing is voor u of uw
> >>>> > supervisorengroep
> >>>> > 2 de situatie in zeer hoge mate van toepassing is voor u of uw
> >>>> > supervisorengroep
> >>>> > 3 de situatie in zeer hoge mate van toepassing is voor u of uw
> >>>> > supervisorengroep
> >>>> > 4 de situatie in geringe mate van toepassing is voor u of uw
> >>>> > supervisorengroep
> >>>> >   `Ik weet precies wat de ?modernisering van de opleiding? inhoudt`
> >>>> >
> >>>> >   <chr>
> >>>> >
> >>>> > 1 de situatie in hoge mate van toepassing is voor u of uw
> >>>> > supervisorengroep
> >>>> > 2 de situatie in zeer hoge mate van toepassing is voor u of uw
> >>>> > supervisorengroep
> >>>> > 3 de situatie in zeer hoge mate van toepassing is voor u of uw
> >>>> > supervisorengroep
> >>>> > 4 de situatie in geringe mate van toepassing is voor u of uw
> >>>> > supervisorengroep
> >>>> >
> >>>> > As you see the likert items are in words, and I should change them
> in
> >>>> > nummeric - Am I correct?
> >>>> >
> >>>> > *To do this, I tried (see further below):*
> >>>> > plyr rename() ; I receive the message it should be a factor or
> >>>> > character
> >>>> > dplyr recode() ; same message
> >>>> > mapvalues() ; it should be atomic, so I used as.atomic(teamq) but
> then
> >>>> > I
> >>>> > receive the nummers a strings.
> >>>> >
> >>>> > *The syntaxes*
> >>>> > require(plyr)
> >>>> > example2 <- revalue(teamq,
> >>>> >                     c("de situatie in zeer geringe mate van
> toepassing
> >>>> > is
> >>>> > voor u of uw supervisorengroep"= "1",
> >>>> >                         "de situatie in geringe mate van toepassing
> is
> >>>> > voor
> >>>> > u of uw supervisorengroep"= "2",
> >>>> >                         "de situatie enigszins van toepassing is
> voor
> >>>> > u of
> >>>> > uw supervisorengroep"= "3",
> >>>> >                         "de situatie in hoge mate van toepassing is
> >>>> > voor u
> >>>> > of uw supervisorengroep"= "4",
> >>>> >                         "de situatie in zeer hoge mate van
> toepassing
> >>>> > is
> >>>> > voor u of uw supervisorengroep"= "5"))
> >>>> >
> >>>> > require(dplyr)
> >>>> > example2 <- recode(teamq,
> >>>> >                     c("de situatie in zeer geringe mate van
> toepassing
> >>>> > is
> >>>> > voor u of uw supervisorengroep"= "1",
> >>>> >                       "de situatie in geringe mate van toepassing is
> >>>> > voor u
> >>>> > of uw supervisorengroep"= "2",
> >>>> >                       "de situatie enigszins van toepassing is voor
> u
> >>>> > of uw
> >>>> > supervisorengroep"= "3",
> >>>> >                       "de situatie in hoge mate van toepassing is
> voor
> >>>> > u of
> >>>> > uw supervisorengroep"= "4",
> >>>> >                       "de situatie in zeer hoge mate van toepassing
> is
> >>>> > voor
> >>>> > u of uw supervisorengroep"= "5"))
> >>>> >
> >>>> > mapvalues(as.matrix(teamq), from = c("de situatie in zeer geringe
> mate
> >>>> > van
> >>>> > toepassing is voor u of uw supervisorengroep",
> >>>> >                         "de situatie in geringe mate van toepassing
> is
> >>>> > voor
> >>>> > u of uw supervisorengroep",
> >>>> >                         "de situatie enigszins van toepassing is
> voor
> >>>> > u of
> >>>> > uw supervisorengroep",
> >>>> >                         "de situatie in hoge mate van toepassing is
> >>>> > voor u
> >>>> > of uw supervisorengroep",
> >>>> >                         "de situatie in zeer hoge mate van
> toepassing
> >>>> > is
> >>>> > voor u of uw supervisorengroep"),
> >>>> >           to = c(1,2,3,4,5))
> >>>> >
> >>>> > What should I do?
> >>>> > Thank you in advance, Roberto
> >>>> >
> >>>> > Op ma 22 okt. 2018 om 17:13 schreef David L Carlson
> >>>> > <dcarlson at tamu.edu>:
> >>>> >
> >>>> >> Your example is not reproducible since you did not give us some
> >>>> >> sample
> >>>> >> data. I suspect that your data frame consists of columns that
> >>>> >> represent
> >>>> >> questions and rows that represent individuals who answered the
> >>>> >> questions.
> >>>> >> First create a simple example:
> >>>> >>
> >>>> >> set.seed(42)
> >>>> >> teamq <- data.frame(V1=sample(c(1, 2, 4, 5), 25, replace = TRUE),
> >>>> >>      V2=sample(c(1, 2, 3, 4, 5), 25, replace=TRUE),
> >>>> >>      V3=sample(c(2, 3, 4, 5), 25, replace=TRUE))
> >>>> >>
> >>>> >> Notice that this data frame ONLY contains questions (and only 3
> >>>> >> questions). Here are 2 ways to get what you want. The first one
> >>>> >> stacks the
> >>>> >> data:
> >>>> >>
> >>>> >> teamq.stack <- stack(teamq)
> >>>> >> str(teamq.stack)
> >>>> >> counts <- table(teamq.stack)
> >>>> >> str(counts)
> >>>> >>
> >>>> >> The second one converts each column to a factor with levels 1 - 5:
> >>>> >>
> >>>> >> teamq2 <- data.frame(lapply(teamq, factor, levels=1:5))
> >>>> >> str(teamq2)
> >>>> >> counts <- sapply(teamq2, table)
> >>>> >> str(counts)
> >>>> >>
> >>>> >> Now make the plots:
> >>>> >>
> >>>> >> cols <- c("yellow","sandybrown","orange", "darkolivegreen","green")
> >>>> >> barplot(counts[, 1], horiz=TRUE, col=cols, legend=TRUE)
> >>>> >> barplot(counts[, 2], horiz=TRUE, col=cols, legend=TRUE)
> >>>> >> barplot(counts[, 3], horiz=TRUE, col=cols, legend=TRUE)
> >>>> >>
> >>>> >> You will need to adjust the xlim= argument so that the legend does
> >>>> >> not
> >>>> >> print on top of the bars.
> >>>> >>
> >>>> >> ----------------------------------------
> >>>> >> David L Carlson
> >>>> >> Department of Anthropology
> >>>> >> Texas A&M University
> >>>> >> College Station, TX 77843-4352
> >>>> >>
> >>>> >>
> >>>> >> -----Original Message-----
> >>>> >> From: R-help <r-help-bounces at r-project.org> On Behalf Of P.
> Roberto
> >>>> >> Bakker
> >>>> >> Sent: Monday, October 22, 2018 9:04 AM
> >>>> >> To: R mailing list <r-help at r-project.org>
> >>>> >> Subject: [R] Different stack barplots - same color legends
> >>>> >>
> >>>> >> Hi,
> >>>> >>
> >>>> >> I want to make barplots from different questions (columns) in one
> >>>> >> data.frame.
> >>>> >> Each question has the same 5 likert items.
> >>>> >> Now the problem: in some questions all items are answered; in other
> >>>> >> less.
> >>>> >> From the syntax below I get nice stack barplots - *but the legend
> >>>> >> colors do
> >>>> >> not* refer to the same likert-item, which I understand - the colors
> >>>> >> go in
> >>>> >> sequence along the table.
> >>>> >> Question: how can I write a syntax that each likert-item has the
> same
> >>>> >> legend color?
> >>>> >> Thank you in advance,
> >>>> >>
> >>>> >> Roberto
> >>>> >>
> >>>> >> SYNTAX:
> >>>> >> counts19 <- table(teamq[,19])
> >>>> >> counts20 <- table(teamq[,20])
> >>>> >> barplot(as.matrix(counts19), horiz = T,
> >>>> >>         col=c("yellow","sandybrown","orange",
> >>>> >> "darkolivegreen","green"),
> >>>> >> legend=T)
> >>>> >> barplot(as.matrix(counts20), horiz = T,
> >>>> >>         col=c("yellow","sandybrown","orange",
> >>>> >> "darkolivegreen","green"),
> >>>> >> legend=T)
> >>>> >>
> >>>> >>         [[alternative HTML version deleted]]
> >>>> >>
> >>>> >> ______________________________________________
> >>>> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>>> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>> >> PLEASE do read the posting guide
> >>>> >> http://www.R-project.org/posting-guide.html
> >>>> >> and provide commented, minimal, self-contained, reproducible code.
> >>>> >>
> >>>> >
> >>>> >         [[alternative HTML version deleted]]
> >>>> >
> >>>> > ______________________________________________
> >>>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>>> > https://stat.ethz.ch/mailman/listinfo/r-help
> >>>> > PLEASE do read the posting guide
> >>>> > http://www.R-project.org/posting-guide.html
> >>>> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From pd@lgd @ending from gm@il@com  Wed Oct 31 19:30:09 2018
From: pd@lgd @ending from gm@il@com (peter dalgaard)
Date: Wed, 31 Oct 2018 19:30:09 +0100
Subject: [R] Corrupted package?
In-Reply-To: <20181031072248.GA8540@slingshot.co.nz>
References: <20181031072248.GA8540@slingshot.co.nz>
Message-ID: <41FEDABD-D3DF-4BEF-8BB1-152F6342617A@gmail.com>

Hm, a source install to r-devel gave me 

Peter-Dalgaards-MacBook-Air:BUILD pd$ ls -l library/pkgconfig/R/pkgconfig.rdb
-rw-r--r--  1 pd  staff  4515 Oct 31 19:15 library/pkgconfig/R/pkgconfig.rdb
Peter-Dalgaards-MacBook-Air:BUILD pd$ ls -l library/pkgconfig/help/pkgconfig.rdb
-rw-r--r--  1 pd  staff  5748 Oct 31 19:15 library/pkgconfig/help/pkgconfig.rdb

and an install to R_3.4.1 (yes, 4...) said

$ ls -l /Library/Frameworks/R.framework/Versions/3.4/Resources/library/pkgconfig/*/pkgconfig.rdb
-rw-r--r--  1 pd  admin  2432 Aug 17 11:36 /Library/Frameworks/R.framework/Versions/3.4/Resources/library/pkgconfig/R/pkgconfig.rdb
-rw-r--r--  1 pd  admin  5412 Aug 17 11:36 /Library/Frameworks/R.framework/Versions/3.4/Resources/library/pkgconfig/help/pkgconfig.rdb

I.e., it looks like it is the larger of your file sizes that is anomalous(?).

Did you try a straight install with install.packages("pkgconfig")? 

And, BTW, which system are you using?

-pd

> On 31 Oct 2018, at 08:22 , Patrick Connolly <p_connolly at slingshot.co.nz> wrote:
> 
> 
> I got this message while using a dplyr mutate call: 
> 
> Error in get0(oNam, envir = ns) : 
>  lazy-load database '/home/hrapgc/local/R-3.5.1/library/pkgconfig/R/pkgconfig.rdb' is corrupt
> 
> I had only just installed R-3.5.1 and updated the packages (using the
> function update.packages with the checkBuild parameter to TRUE) in the
> library I use with that version.  So, I checked the size of
> pkgconfig.rdb with the previous version from the bash prompt:
> 
>> ll `locate pkgconfig.rdb`
> 
> -rw-r--r-- 1 hrapgc hrapgc  5335 May  8 14:06 /home/hrapgc/local/R-3.5.0/library/pkgconfig/help/pkgconfig.rdb
> -rw-r--r-- 1 hrapgc hrapgc 15669 May  8 14:06 /home/hrapgc/local/R-3.5.0/library/pkgconfig/R/pkgconfig.rdb
> -rw-r--r-- 1 hrapgc hrapgc  5359 Oct 31 16:12 /home/hrapgc/local/R-3.5.1/library/pkgconfig/help/pkgconfig.rdb
> -rw-r--r-- 1 hrapgc hrapgc  4367 Oct 31 16:12 /home/hrapgc/local/R-3.5.1/library/pkgconfig/R/pkgconfig.rdb
> 
> While the pkgconfig.rdb filesize in the help directory is nearly
> identical in size to that in R-3.5.0 (and previous versions) the one
> in the R directory is very much smaller.  So the error message
> probably makes sense.
> 
> The question is: how could that have happened?  I removed the package
> and reinstalled it, but that made no difference.  Is this documented
> anywhere?
> 
> TIA
> -- 
> ~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.   
>   ___    Patrick Connolly   
> {~._.~}                   Great minds discuss ideas    
> _( Y )_  	         Average minds discuss events 
> (:_~*~_:)                  Small minds discuss people  
> (_)-(_)  	                      ..... Eleanor Roosevelt
> 	  
> ~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From ericjberger @ending from gm@il@com  Wed Oct 31 19:55:31 2018
From: ericjberger @ending from gm@il@com (Eric Berger)
Date: Wed, 31 Oct 2018 20:55:31 +0200
Subject: [R] survival analysis question
In-Reply-To: <1541000080.817310464@f419.i.mail.ru>
References: <1541000080.817310464@f419.i.mail.ru>
Message-ID: <CAGgJW76_hr1Lz98BVJs-Lb7NB3vx0fFOEHVNRGTVxdRy+_9r0A@mail.gmail.com>

You need to read the Help page for the function survSplit
?survSplit
states that the id argument is a

 "character string with the name of new id variable to create (optional).
This can be useful if the data set does not already contain an identifier"

The addicts data.frame has as its first column 'id', which seems to be the
cause of the ERROR message.

HTH,
Eric



On Wed, Oct 31, 2018 at 5:37 PM Medic via R-help <r-help at r-project.org>
wrote:

>
> When I run the code from the book Kleinbaum "Survival analysis" (7.
> Running an extended cox model. Page 646) I got an ERROR. What do you think
> is the reason? I attach a file with few lines of dataset "addicts-dput.r".
> > library(cmprsk)
> > addicts = read.csv ("addicts.csv")
>    id clinic status survt prison dose
> 1  1      1      1   428      0   50
> 2  2      1      1   275      1   55
> 3  3      1      1   262      0   55
> 4  4      1      1   183      0   30
> 5  5      1      1   259      1   65
> 6  6      1      1   714      0   55
> 7  7      1      1   438      1   65
> 8  8      1      0   796      1   60
> 9  9      1      1   892      0   50
> > addicts.cp=survSplit(addicts, cut=addicts$survt[addicts$status==1],
> end="survt", event="status",start="start", id="id")
> ERROR in survSplit(addicts, cut = addicts$survt[addicts$status == 1],: the
> suggested id name is already present.
>
>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From dwin@emiu@ @ending from comc@@t@net  Wed Oct 31 20:23:33 2018
From: dwin@emiu@ @ending from comc@@t@net (David Winsemius)
Date: Wed, 31 Oct 2018 12:23:33 -0700
Subject: [R] Corrupted package?
In-Reply-To: <41FEDABD-D3DF-4BEF-8BB1-152F6342617A@gmail.com>
References: <20181031072248.GA8540@slingshot.co.nz>
 <41FEDABD-D3DF-4BEF-8BB1-152F6342617A@gmail.com>
Message-ID: <10D88F2A-0013-411B-B410-00155F76C3C4@comcast.net>



> On Oct 31, 2018, at 11:30 AM, peter dalgaard <pdalgd at gmail.com> wrote:
> 
> Hm, a source install to r-devel gave me 
> 
> Peter-Dalgaards-MacBook-Air:BUILD pd$ ls -l library/pkgconfig/R/pkgconfig.rdb
> -rw-r--r--  1 pd  staff  4515 Oct 31 19:15 library/pkgconfig/R/pkgconfig.rdb
> Peter-Dalgaards-MacBook-Air:BUILD pd$ ls -l library/pkgconfig/help/pkgconfig.rdb
> -rw-r--r--  1 pd  staff  5748 Oct 31 19:15 library/pkgconfig/help/pkgconfig.rdb
> 
> and an install to R_3.4.1 (yes, 4...) said
> 
> $ ls -l /Library/Frameworks/R.framework/Versions/3.4/Resources/library/pkgconfig/*/pkgconfig.rdb
> -rw-r--r--  1 pd  admin  2432 Aug 17 11:36 /Library/Frameworks/R.framework/Versions/3.4/Resources/library/pkgconfig/R/pkgconfig.rdb
> -rw-r--r--  1 pd  admin  5412 Aug 17 11:36 /Library/Frameworks/R.framework/Versions/3.4/Resources/library/pkgconfig/help/pkgconfig.rdb
> 
> I.e., it looks like it is the larger of your file sizes that is anomalous(?).
> 
> Did you try a straight install with install.packages("pkgconfig")? 
> 
> And, BTW, which system are you using?
> 
> -pd
> 
>> On 31 Oct 2018, at 08:22 , Patrick Connolly <p_connolly at slingshot.co.nz> wrote:
>> 
>> 
>> I got this message while using a dplyr mutate call: 
>> 
>> Error in get0(oNam, envir = ns) : 
>> lazy-load database '/home/hrapgc/local/R-3.5.1/library/pkgconfig/R/pkgconfig.rdb' is corrupt
>> 
>> I had only just installed R-3.5.1 and updated the packages (using the
>> function update.packages with the checkBuild parameter to TRUE) in the

Did you misspell "checkBuilt"? You should always present the transcript to prevent such questions.

-- 
David.


>> library I use with that version.  So, I checked the size of
>> pkgconfig.rdb with the previous version from the bash prompt:
>> 
>>> ll `locate pkgconfig.rdb`
>> 
>> -rw-r--r-- 1 hrapgc hrapgc  5335 May  8 14:06 /home/hrapgc/local/R-3.5.0/library/pkgconfig/help/pkgconfig.rdb
>> -rw-r--r-- 1 hrapgc hrapgc 15669 May  8 14:06 /home/hrapgc/local/R-3.5.0/library/pkgconfig/R/pkgconfig.rdb
>> -rw-r--r-- 1 hrapgc hrapgc  5359 Oct 31 16:12 /home/hrapgc/local/R-3.5.1/library/pkgconfig/help/pkgconfig.rdb
>> -rw-r--r-- 1 hrapgc hrapgc  4367 Oct 31 16:12 /home/hrapgc/local/R-3.5.1/library/pkgconfig/R/pkgconfig.rdb
>> 
>> While the pkgconfig.rdb filesize in the help directory is nearly
>> identical in size to that in R-3.5.0 (and previous versions) the one
>> in the R directory is very much smaller.  So the error message
>> probably makes sense.
>> 
>> The question is: how could that have happened?  I removed the package
>> and reinstalled it, but that made no difference.  Is this documented
>> anywhere?
>> 
>> TIA
>> -- 
>> ~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.   
>>  ___    Patrick Connolly   
>> {~._.~}                   Great minds discuss ideas    
>> _( Y )_  	         Average minds discuss events 
>> (:_~*~_:)                  Small minds discuss people  
>> (_)-(_)  	                      ..... Eleanor Roosevelt
>> 	  
>> ~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> -- 
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From rmh @ending from temple@edu  Wed Oct 31 20:28:08 2018
From: rmh @ending from temple@edu (Richard M. Heiberger)
Date: Wed, 31 Oct 2018 15:28:08 -0400
Subject: [R] Different stack barplots - same color legends
In-Reply-To: <CAKDq9_OkLfiP98cuYUg0BU_+cCXmKi9gKHqxSm+Eu16eC3WWyg@mail.gmail.com>
References: <CAKDq9_N16xaeL4O2j=v2bVuMb=tuHfu0Ao+yuLQcEq6B-ngq1A@mail.gmail.com>
 <af9001d319ac4992b0bfc5526150f03b@tamu.edu>
 <CAKDq9_P8hQEHWFH=c_86bG81fU0GS+EUCOmtZ9gJa_7kY-2uhA@mail.gmail.com>
 <CAGx1TMAYybconxY7ZVVJcdiYW6+WOjr_D+=GHOA=Xxv2AWRCqQ@mail.gmail.com>
 <CAKDq9_Oi0HGNV7qLnmi4HgVr7orF_gpC7Sys8mLKAxMfjHVtvQ@mail.gmail.com>
 <CAGx1TMB+=RnNeoBmzF=_-gxZ2bzaabExs2Gf-8dKE2vAcpiHpA@mail.gmail.com>
 <CAKDq9_P3GfHXbFbChQwrDUm=E+RuuWGP89tf_KPFXRjYAsrA+A@mail.gmail.com>
 <CAGx1TMByCiZvwOPm06qo4bssWjh=UP9ZPvkX5zi+6dNE=wggaA@mail.gmail.com>
 <CAKDq9_OkLfiP98cuYUg0BU_+cCXmKi9gKHqxSm+Eu16eC3WWyg@mail.gmail.com>
Message-ID: <CAGx1TMCF8bg64+UOP9ULygHcRnna505RO+1WCWxWJuuFaNp4fQ@mail.gmail.com>

What you sent looks like a set of column labels, not the actual numeric data.

You might want to convert them to factors where you control the order
of the levels.
> Factor.wrong <- factor(c("mm", "cm", "m", "km"))
> levels(Factor.wrong) ## alphabetical order, not meaning order
[1] "cm" "km" "m"  "mm"
>
> Factor.right <- factor(c("mm", "cm", "m", "km"),
+                        levels=c("mm", "cm", "m", "km"))
> levels(Factor.right) ## meaning order
[1] "mm" "cm" "m"  "km"

Or you might want to construct a matrix of counts of your data and plot that.

Rich


On Wed, Oct 31, 2018 at 1:53 PM, P. Roberto Bakker
<robertobakker at gmail.com> wrote:
> This is part of the output text
>
> "de situatie in hoge mate van toepassing is voor u of uw supervisorengroep",
> "de situatie in hoge mate van toepassing is voor u of uw supervisorengroep",
> "de situatie enigszins van toepassing is voor u of uw supervisorengroep",
> "de situatie in hoge mate van toepassing is voor u of uw supervisorengroep"
> ), `Ik waardeer de inbreng van de aios in de afdelingsvergadering` = c("de
> situatie in hoge mate van toepassing is voor u of uw supervisorengroep",
> "de situatie in hoge mate van toepassing is voor u of uw supervisorengroep",
> "de situatie in zeer hoge mate van toepassing is voor u of uw
> supervisorengroep",
> "de situatie in zeer hoge mate van toepassing is voor u of uw
> supervisorengroep",
> "de situatie enigszins van toepassing is voor u of uw supervisorengroep",
> "de situatie in zeer hoge mate van toepassing is voor u of uw
> supervisorengroep",
> "de situatie in zeer hoge mate van toepassing is voor u of uw
> supervisorengroep",
> "de situatie in zeer hoge mate van toepassing is voor u of uw
> supervisorengroep",
> "de situatie enigszins van toepassing is voor u of uw supervisorengroep",
> "de situatie in hoge mate van toepassing is voor u of uw supervisorengroep",
> "de situatie in hoge mate van toepassing is voor u of uw supervisorengroep",
> "de situatie in hoge mate van toepassing is voor u of uw supervisorengroep",
>
> Op wo 31 okt. 2018 om 16:24 schreef Richard M. Heiberger <rmh at temple.edu>:
>>
>> part is fine.  just be sure that the small part causes the problem.
>> I will need that to investigate what is happening.
>>
>>
>> On Wed, Oct 31, 2018 at 11:15 AM, P. Roberto Bakker
>> <robertobakker at gmail.com> wrote:
>> > It is a very long result text. I can send it to you, or is part of it
>> > ok?[
>> >
>> > Op wo 31 okt. 2018 om 14:27 schreef Richard M. Heiberger
>> > <rmh at temple.edu>:
>> >>
>> >> Please send me the
>> >> dput(teamq)
>> >>
>> >>
>> >> On Wed, Oct 31, 2018 at 03:51 P. Roberto Bakker
>> >> <robertobakker at gmail.com>
>> >> wrote:
>> >>>
>> >>> Thank you for you information. Package 'HH' is interesting.
>> >>>
>> >>> Now I find another problem when using 'likert(teamq)'
>> >>> I get an error message:
>> >>> > likert(teamq)
>> >>> Error in dimnames(x) <- `*vtmp*` :
>> >>>   length of 'dimnames' [2] not equal to array extent
>> >>>
>> >>> I checked:
>> >>> > dim(teamq)
>> >>> [1] 4 2
>> >>> > ncol(teamq)
>> >>> [1] 2
>> >>> So it should be good.
>> >>>
>> >>> I used 'make.names' , in case the spaces in the variable names would
>> >>> be a
>> >>> problem.
>> >>> Same error.
>> >>>
>> >>> What could I do?
>> >>>
>> >>> Best and thank you in advance.
>> >>> Roberto
>> >>>
>> >>>
>> >>> Op ma 22 okt. 2018 om 20:10 schreef Richard M. Heiberger
>> >>> <rmh at temple.edu>:
>> >>>>
>> >>>> Try the likert function in
>> >>>> install.packages("HH) ## if necessary
>> >>>> library(HH)
>> >>>>
>> >>>> Then using David Carlson's example teamq
>> >>>> likert(teamq)
>> >>>>
>> >>>> Your example in the 1:30PM (Eastern Daylight Time) doesn't work.
>> >>>> Error in revalue(teamq, c(`de situatie in zeer geringe mate van
>> >>>> toepassing is\nvoor u of uw supervisorengroep` = "1",  :
>> >>>>   x is not a factor or a character vector.
>> >>>>
>> >>>> There are many examples in
>> >>>> ?likert
>> >>>>
>> >>>> Rich
>> >>>>
>> >>>>
>> >>>> On Mon, Oct 22, 2018 at 1:30 PM, P. Roberto Bakker
>> >>>> <robertobakker at gmail.com> wrote:
>> >>>> > Dear David,
>> >>>> >
>> >>>> > Thank you for you quite response.
>> >>>> > My apologies for not giving some sample data - this is due to AVG.
>> >>>> > *But this minisample should not be a problem (all in Dutch)*:
>> >>>> >  teamq
>> >>>> > # A tibble: 4 x 2
>> >>>> >   `Ik volg bijscholing om mijn opleiders-kwaliteiten op peil te
>> >>>> > houden`
>> >>>> >
>> >>>> >   <chr>
>> >>>> >
>> >>>> > 1 de situatie in hoge mate van toepassing is voor u of uw
>> >>>> > supervisorengroep
>> >>>> > 2 de situatie in zeer hoge mate van toepassing is voor u of uw
>> >>>> > supervisorengroep
>> >>>> > 3 de situatie in zeer hoge mate van toepassing is voor u of uw
>> >>>> > supervisorengroep
>> >>>> > 4 de situatie in geringe mate van toepassing is voor u of uw
>> >>>> > supervisorengroep
>> >>>> >   `Ik weet precies wat de ?modernisering van de opleiding? inhoudt`
>> >>>> >
>> >>>> >   <chr>
>> >>>> >
>> >>>> > 1 de situatie in hoge mate van toepassing is voor u of uw
>> >>>> > supervisorengroep
>> >>>> > 2 de situatie in zeer hoge mate van toepassing is voor u of uw
>> >>>> > supervisorengroep
>> >>>> > 3 de situatie in zeer hoge mate van toepassing is voor u of uw
>> >>>> > supervisorengroep
>> >>>> > 4 de situatie in geringe mate van toepassing is voor u of uw
>> >>>> > supervisorengroep
>> >>>> >
>> >>>> > As you see the likert items are in words, and I should change them
>> >>>> > in
>> >>>> > nummeric - Am I correct?
>> >>>> >
>> >>>> > *To do this, I tried (see further below):*
>> >>>> > plyr rename() ; I receive the message it should be a factor or
>> >>>> > character
>> >>>> > dplyr recode() ; same message
>> >>>> > mapvalues() ; it should be atomic, so I used as.atomic(teamq) but
>> >>>> > then
>> >>>> > I
>> >>>> > receive the nummers a strings.
>> >>>> >
>> >>>> > *The syntaxes*
>> >>>> > require(plyr)
>> >>>> > example2 <- revalue(teamq,
>> >>>> >                     c("de situatie in zeer geringe mate van
>> >>>> > toepassing
>> >>>> > is
>> >>>> > voor u of uw supervisorengroep"= "1",
>> >>>> >                         "de situatie in geringe mate van toepassing
>> >>>> > is
>> >>>> > voor
>> >>>> > u of uw supervisorengroep"= "2",
>> >>>> >                         "de situatie enigszins van toepassing is
>> >>>> > voor
>> >>>> > u of
>> >>>> > uw supervisorengroep"= "3",
>> >>>> >                         "de situatie in hoge mate van toepassing is
>> >>>> > voor u
>> >>>> > of uw supervisorengroep"= "4",
>> >>>> >                         "de situatie in zeer hoge mate van
>> >>>> > toepassing
>> >>>> > is
>> >>>> > voor u of uw supervisorengroep"= "5"))
>> >>>> >
>> >>>> > require(dplyr)
>> >>>> > example2 <- recode(teamq,
>> >>>> >                     c("de situatie in zeer geringe mate van
>> >>>> > toepassing
>> >>>> > is
>> >>>> > voor u of uw supervisorengroep"= "1",
>> >>>> >                       "de situatie in geringe mate van toepassing
>> >>>> > is
>> >>>> > voor u
>> >>>> > of uw supervisorengroep"= "2",
>> >>>> >                       "de situatie enigszins van toepassing is voor
>> >>>> > u
>> >>>> > of uw
>> >>>> > supervisorengroep"= "3",
>> >>>> >                       "de situatie in hoge mate van toepassing is
>> >>>> > voor
>> >>>> > u of
>> >>>> > uw supervisorengroep"= "4",
>> >>>> >                       "de situatie in zeer hoge mate van toepassing
>> >>>> > is
>> >>>> > voor
>> >>>> > u of uw supervisorengroep"= "5"))
>> >>>> >
>> >>>> > mapvalues(as.matrix(teamq), from = c("de situatie in zeer geringe
>> >>>> > mate
>> >>>> > van
>> >>>> > toepassing is voor u of uw supervisorengroep",
>> >>>> >                         "de situatie in geringe mate van toepassing
>> >>>> > is
>> >>>> > voor
>> >>>> > u of uw supervisorengroep",
>> >>>> >                         "de situatie enigszins van toepassing is
>> >>>> > voor
>> >>>> > u of
>> >>>> > uw supervisorengroep",
>> >>>> >                         "de situatie in hoge mate van toepassing is
>> >>>> > voor u
>> >>>> > of uw supervisorengroep",
>> >>>> >                         "de situatie in zeer hoge mate van
>> >>>> > toepassing
>> >>>> > is
>> >>>> > voor u of uw supervisorengroep"),
>> >>>> >           to = c(1,2,3,4,5))
>> >>>> >
>> >>>> > What should I do?
>> >>>> > Thank you in advance, Roberto
>> >>>> >
>> >>>> > Op ma 22 okt. 2018 om 17:13 schreef David L Carlson
>> >>>> > <dcarlson at tamu.edu>:
>> >>>> >
>> >>>> >> Your example is not reproducible since you did not give us some
>> >>>> >> sample
>> >>>> >> data. I suspect that your data frame consists of columns that
>> >>>> >> represent
>> >>>> >> questions and rows that represent individuals who answered the
>> >>>> >> questions.
>> >>>> >> First create a simple example:
>> >>>> >>
>> >>>> >> set.seed(42)
>> >>>> >> teamq <- data.frame(V1=sample(c(1, 2, 4, 5), 25, replace = TRUE),
>> >>>> >>      V2=sample(c(1, 2, 3, 4, 5), 25, replace=TRUE),
>> >>>> >>      V3=sample(c(2, 3, 4, 5), 25, replace=TRUE))
>> >>>> >>
>> >>>> >> Notice that this data frame ONLY contains questions (and only 3
>> >>>> >> questions). Here are 2 ways to get what you want. The first one
>> >>>> >> stacks the
>> >>>> >> data:
>> >>>> >>
>> >>>> >> teamq.stack <- stack(teamq)
>> >>>> >> str(teamq.stack)
>> >>>> >> counts <- table(teamq.stack)
>> >>>> >> str(counts)
>> >>>> >>
>> >>>> >> The second one converts each column to a factor with levels 1 - 5:
>> >>>> >>
>> >>>> >> teamq2 <- data.frame(lapply(teamq, factor, levels=1:5))
>> >>>> >> str(teamq2)
>> >>>> >> counts <- sapply(teamq2, table)
>> >>>> >> str(counts)
>> >>>> >>
>> >>>> >> Now make the plots:
>> >>>> >>
>> >>>> >> cols <- c("yellow","sandybrown","orange",
>> >>>> >> "darkolivegreen","green")
>> >>>> >> barplot(counts[, 1], horiz=TRUE, col=cols, legend=TRUE)
>> >>>> >> barplot(counts[, 2], horiz=TRUE, col=cols, legend=TRUE)
>> >>>> >> barplot(counts[, 3], horiz=TRUE, col=cols, legend=TRUE)
>> >>>> >>
>> >>>> >> You will need to adjust the xlim= argument so that the legend does
>> >>>> >> not
>> >>>> >> print on top of the bars.
>> >>>> >>
>> >>>> >> ----------------------------------------
>> >>>> >> David L Carlson
>> >>>> >> Department of Anthropology
>> >>>> >> Texas A&M University
>> >>>> >> College Station, TX 77843-4352
>> >>>> >>
>> >>>> >>
>> >>>> >> -----Original Message-----
>> >>>> >> From: R-help <r-help-bounces at r-project.org> On Behalf Of P.
>> >>>> >> Roberto
>> >>>> >> Bakker
>> >>>> >> Sent: Monday, October 22, 2018 9:04 AM
>> >>>> >> To: R mailing list <r-help at r-project.org>
>> >>>> >> Subject: [R] Different stack barplots - same color legends
>> >>>> >>
>> >>>> >> Hi,
>> >>>> >>
>> >>>> >> I want to make barplots from different questions (columns) in one
>> >>>> >> data.frame.
>> >>>> >> Each question has the same 5 likert items.
>> >>>> >> Now the problem: in some questions all items are answered; in
>> >>>> >> other
>> >>>> >> less.
>> >>>> >> From the syntax below I get nice stack barplots - *but the legend
>> >>>> >> colors do
>> >>>> >> not* refer to the same likert-item, which I understand - the
>> >>>> >> colors
>> >>>> >> go in
>> >>>> >> sequence along the table.
>> >>>> >> Question: how can I write a syntax that each likert-item has the
>> >>>> >> same
>> >>>> >> legend color?
>> >>>> >> Thank you in advance,
>> >>>> >>
>> >>>> >> Roberto
>> >>>> >>
>> >>>> >> SYNTAX:
>> >>>> >> counts19 <- table(teamq[,19])
>> >>>> >> counts20 <- table(teamq[,20])
>> >>>> >> barplot(as.matrix(counts19), horiz = T,
>> >>>> >>         col=c("yellow","sandybrown","orange",
>> >>>> >> "darkolivegreen","green"),
>> >>>> >> legend=T)
>> >>>> >> barplot(as.matrix(counts20), horiz = T,
>> >>>> >>         col=c("yellow","sandybrown","orange",
>> >>>> >> "darkolivegreen","green"),
>> >>>> >> legend=T)
>> >>>> >>
>> >>>> >>         [[alternative HTML version deleted]]
>> >>>> >>
>> >>>> >> ______________________________________________
>> >>>> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> >>>> >> https://stat.ethz.ch/mailman/listinfo/r-help
>> >>>> >> PLEASE do read the posting guide
>> >>>> >> http://www.R-project.org/posting-guide.html
>> >>>> >> and provide commented, minimal, self-contained, reproducible code.
>> >>>> >>
>> >>>> >
>> >>>> >         [[alternative HTML version deleted]]
>> >>>> >
>> >>>> > ______________________________________________
>> >>>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> >>>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> >>>> > PLEASE do read the posting guide
>> >>>> > http://www.R-project.org/posting-guide.html
>> >>>> > and provide commented, minimal, self-contained, reproducible code.


From ferri@leberl @ending from gmx@@t  Wed Oct 31 22:27:19 2018
From: ferri@leberl @ending from gmx@@t (Ferri Leberl)
Date: Wed, 31 Oct 2018 22:27:19 +0100
Subject: [R] Plot a path
Message-ID: <trinity-c72faedf-333b-472d-83c1-16c528a67f1b-1541021239921@3c-app-gmx-bs72>


Dear All,
I have a dataframe with four cols: Date, Placename, geogr. latitude, geogr. longitude.
How can I plot the path as a line, ordered by the date, with the longitude as the x-axis and the latitude as the y-axis?
Thank you in advance!
Yours, Ferri


From m@cqueen1 @ending from llnl@gov  Wed Oct 31 22:45:55 2018
From: m@cqueen1 @ending from llnl@gov (MacQueen, Don)
Date: Wed, 31 Oct 2018 21:45:55 +0000
Subject: [R] Plot a path
In-Reply-To: <trinity-c72faedf-333b-472d-83c1-16c528a67f1b-1541021239921@3c-app-gmx-bs72>
References: <trinity-c72faedf-333b-472d-83c1-16c528a67f1b-1541021239921@3c-app-gmx-bs72>
Message-ID: <80E9D8A5-DDFF-4025-9351-FA398894ED12@llnl.gov>

Probably
   sort the data frame by date
Then
  plot( mydf$geogr.longitude, mydf$geogr.latitude, type='l')

Search the web for some tutorials

See the help pages for
   plot
   plot.default

--
Don MacQueen
Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062
Lab cell 925-724-7509
 
 

?On 10/31/18, 2:27 PM, "R-help on behalf of Ferri Leberl" <r-help-bounces at r-project.org on behalf of ferri.leberl at gmx.at> wrote:

    
    Dear All,
    I have a dataframe with four cols: Date, Placename, geogr. latitude, geogr. longitude.
    How can I plot the path as a line, ordered by the date, with the longitude as the x-axis and the latitude as the y-axis?
    Thank you in advance!
    Yours, Ferri
    
    ______________________________________________
    R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    https://stat.ethz.ch/mailman/listinfo/r-help
    PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    and provide commented, minimal, self-contained, reproducible code.
    


From robertob@kker @ending from gm@il@com  Wed Oct 31 22:56:05 2018
From: robertob@kker @ending from gm@il@com (P. Roberto Bakker)
Date: Wed, 31 Oct 2018 22:56:05 +0100
Subject: [R] Different stack barplots - same color legends
In-Reply-To: <CAGx1TMCF8bg64+UOP9ULygHcRnna505RO+1WCWxWJuuFaNp4fQ@mail.gmail.com>
References: <CAKDq9_N16xaeL4O2j=v2bVuMb=tuHfu0Ao+yuLQcEq6B-ngq1A@mail.gmail.com>
 <af9001d319ac4992b0bfc5526150f03b@tamu.edu>
 <CAKDq9_P8hQEHWFH=c_86bG81fU0GS+EUCOmtZ9gJa_7kY-2uhA@mail.gmail.com>
 <CAGx1TMAYybconxY7ZVVJcdiYW6+WOjr_D+=GHOA=Xxv2AWRCqQ@mail.gmail.com>
 <CAKDq9_Oi0HGNV7qLnmi4HgVr7orF_gpC7Sys8mLKAxMfjHVtvQ@mail.gmail.com>
 <CAGx1TMB+=RnNeoBmzF=_-gxZ2bzaabExs2Gf-8dKE2vAcpiHpA@mail.gmail.com>
 <CAKDq9_P3GfHXbFbChQwrDUm=E+RuuWGP89tf_KPFXRjYAsrA+A@mail.gmail.com>
 <CAGx1TMByCiZvwOPm06qo4bssWjh=UP9ZPvkX5zi+6dNE=wggaA@mail.gmail.com>
 <CAKDq9_OkLfiP98cuYUg0BU_+cCXmKi9gKHqxSm+Eu16eC3WWyg@mail.gmail.com>
 <CAGx1TMCF8bg64+UOP9ULygHcRnna505RO+1WCWxWJuuFaNp4fQ@mail.gmail.com>
Message-ID: <CAKDq9_OU8bNq4p8zLr45JADz=SWvGAhG+-ACqdu+qC4a+D8FUw@mail.gmail.com>

Hi Rich,

Thank you for your answer.
The sentences are strings (likert scale: 'the situation is highly
applicable to me' etc - in Dutch), or column labels; it may be confusing as
it is in Dutch. Below I show you part of the dataframe with my annotation
added (string/column lable) to give you an idea.
I need to change the likert strings into numeric (1:5). And this is a
challenge somehow.
With dplyr, plyr it did not work.
After I have the numeric version then I can stack them as suggested by
David.

PART OF THE DATAFRAME
>> >>>> >   `Ik volg bijscholing om mijn opleiders-kwaliteiten op peil te
>> >>>> > houden` COLUMN LABEL
>> >>>> >
>> >>>> >   <chr>
>> >>>> >
>> >>>> > 1 de situatie in hoge mate van toepassing is voor u of uw
>> >>>> > supervisorengroep LIKERT STRING
>> >>>> > 2 de situatie in zeer hoge mate van toepassing is voor u of uw
>> >>>> > supervisorengroep LIKERT STRING
>> >>>> > 3 de situatie in zeer hoge mate van toepassing is voor u of uw
>> >>>> > supervisorengroep LIKERT STRING
>> >>>> > 4 de situatie in geringe mate van toepassing is voor u of uw
>> >>>> > supervisorengroep LIKERT STRING
>> >>>> >   `Ik weet precies wat de ?modernisering van de opleiding?
inhoudt` COLUMN LABEL
>> >>>> >
>> >>>> >   <chr>
>> >>>> >
>> >>>> > 1 de situatie in hoge mate van toepassing is voor u of uw
>> >>>> > supervisorengroep LIKERT STRING
>> >>>> > 2 de situatie in zeer hoge mate van toepassing is voor u of uw
>> >>>> > supervisorengroep LIKERT STRING
>> >>>> > 3 de situatie in zeer hoge mate van toepassing is voor u of uw
>> >>>> > supervisorengroep LIKERT STRING
>> >>>> > 4 de situatie in geringe mate van toepassing is voor u of uw
>> >>>> > supervisorengroep LIKERT STRING



Op wo 31 okt. 2018 om 20:28 schreef Richard M. Heiberger <rmh at temple.edu>:

> What you sent looks like a set of column labels, not the actual numeric
> data.
>
> You might want to convert them to factors where you control the order
> of the levels.
> > Factor.wrong <- factor(c("mm", "cm", "m", "km"))
> > levels(Factor.wrong) ## alphabetical order, not meaning order
> [1] "cm" "km" "m"  "mm"
> >
> > Factor.right <- factor(c("mm", "cm", "m", "km"),
> +                        levels=c("mm", "cm", "m", "km"))
> > levels(Factor.right) ## meaning order
> [1] "mm" "cm" "m"  "km"
>
> Or you might want to construct a matrix of counts of your data and plot
> that.
>
> Rich
>
>
> On Wed, Oct 31, 2018 at 1:53 PM, P. Roberto Bakker
> <robertobakker at gmail.com> wrote:
> > This is part of the output text
> >
> > "de situatie in hoge mate van toepassing is voor u of uw
> supervisorengroep", STRING
> > "de situatie in hoge mate van toepassing is voor u of uw
> supervisorengroep", STRING
> > "de situatie enigszins van toepassing is voor u of uw
> supervisorengroep", STRING
> > "de situatie in hoge mate van toepassing is voor u of uw
> supervisorengroep" STRINK
> > ), `Ik waardeer de inbreng van de aios in de afdelingsvergadering`
> COLUMN LABEL= c("de
> > situatie in hoge mate van toepassing is voor u of uw supervisorengroep",
> STRING
> > "de situatie in hoge mate van toepassing is voor u of uw
> supervisorengroep",
> > "de situatie in zeer hoge mate van toepassing is voor u of uw
> > supervisorengroep",
> > "de situatie in zeer hoge mate van toepassing is voor u of uw
> > supervisorengroep",
> > "de situatie enigszins van toepassing is voor u of uw supervisorengroep",
> > "de situatie in zeer hoge mate van toepassing is voor u of uw
> > supervisorengroep",
> > "de situatie in zeer hoge mate van toepassing is voor u of uw
> > supervisorengroep",
> > "de situatie in zeer hoge mate van toepassing is voor u of uw
> > supervisorengroep",
> > "de situatie enigszins van toepassing is voor u of uw supervisorengroep",
> > "de situatie in hoge mate van toepassing is voor u of uw
> supervisorengroep",
> > "de situatie in hoge mate van toepassing is voor u of uw
> supervisorengroep",
> > "de situatie in hoge mate van toepassing is voor u of uw
> supervisorengroep",
> >
> > Op wo 31 okt. 2018 om 16:24 schreef Richard M. Heiberger <rmh at temple.edu
> >:
> >>
> >> part is fine.  just be sure that the small part causes the problem.
> >> I will need that to investigate what is happening.
> >>
> >>
> >> On Wed, Oct 31, 2018 at 11:15 AM, P. Roberto Bakker
> >> <robertobakker at gmail.com> wrote:
> >> > It is a very long result text. I can send it to you, or is part of it
> >> > ok?[
> >> >
> >> > Op wo 31 okt. 2018 om 14:27 schreef Richard M. Heiberger
> >> > <rmh at temple.edu>:
> >> >>
> >> >> Please send me the
> >> >> dput(teamq)
> >> >>
> >> >>
> >> >> On Wed, Oct 31, 2018 at 03:51 P. Roberto Bakker
> >> >> <robertobakker at gmail.com>
> >> >> wrote:
> >> >>>
> >> >>> Thank you for you information. Package 'HH' is interesting.
> >> >>>
> >> >>> Now I find another problem when using 'likert(teamq)'
> >> >>> I get an error message:
> >> >>> > likert(teamq)
> >> >>> Error in dimnames(x) <- `*vtmp*` :
> >> >>>   length of 'dimnames' [2] not equal to array extent
> >> >>>
> >> >>> I checked:
> >> >>> > dim(teamq)
> >> >>> [1] 4 2
> >> >>> > ncol(teamq)
> >> >>> [1] 2
> >> >>> So it should be good.
> >> >>>
> >> >>> I used 'make.names' , in case the spaces in the variable names would
> >> >>> be a
> >> >>> problem.
> >> >>> Same error.
> >> >>>
> >> >>> What could I do?
> >> >>>
> >> >>> Best and thank you in advance.
> >> >>> Roberto
> >> >>>
> >> >>>
> >> >>> Op ma 22 okt. 2018 om 20:10 schreef Richard M. Heiberger
> >> >>> <rmh at temple.edu>:
> >> >>>>
> >> >>>> Try the likert function in
> >> >>>> install.packages("HH) ## if necessary
> >> >>>> library(HH)
> >> >>>>
> >> >>>> Then using David Carlson's example teamq
> >> >>>> likert(teamq)
> >> >>>>
> >> >>>> Your example in the 1:30PM (Eastern Daylight Time) doesn't work.
> >> >>>> Error in revalue(teamq, c(`de situatie in zeer geringe mate van
> >> >>>> toepassing is\nvoor u of uw supervisorengroep` = "1",  :
> >> >>>>   x is not a factor or a character vector.
> >> >>>>
> >> >>>> There are many examples in
> >> >>>> ?likert
> >> >>>>
> >> >>>> Rich
> >> >>>>
> >> >>>>
> >> >>>> On Mon, Oct 22, 2018 at 1:30 PM, P. Roberto Bakker
> >> >>>> <robertobakker at gmail.com> wrote:
> >> >>>> > Dear David,
> >> >>>> >
> >> >>>> > Thank you for you quite response.
> >> >>>> > My apologies for not giving some sample data - this is due to
> AVG.
> >> >>>> > *But this minisample should not be a problem (all in Dutch)*:
> >> >>>> >  teamq
> >> >>>> > # A tibble: 4 x 2
> >> >>>> >   `Ik volg bijscholing om mijn opleiders-kwaliteiten op peil te
> >> >>>> > houden`
> >> >>>> >
> >> >>>> >   <chr>
> >> >>>> >
> >> >>>> > 1 de situatie in hoge mate van toepassing is voor u of uw
> >> >>>> > supervisorengroep
> >> >>>> > 2 de situatie in zeer hoge mate van toepassing is voor u of uw
> >> >>>> > supervisorengroep
> >> >>>> > 3 de situatie in zeer hoge mate van toepassing is voor u of uw
> >> >>>> > supervisorengroep
> >> >>>> > 4 de situatie in geringe mate van toepassing is voor u of uw
> >> >>>> > supervisorengroep
> >> >>>> >   `Ik weet precies wat de ?modernisering van de opleiding?
> inhoudt`
> >> >>>> >
> >> >>>> >   <chr>
> >> >>>> >
> >> >>>> > 1 de situatie in hoge mate van toepassing is voor u of uw
> >> >>>> > supervisorengroep
> >> >>>> > 2 de situatie in zeer hoge mate van toepassing is voor u of uw
> >> >>>> > supervisorengroep
> >> >>>> > 3 de situatie in zeer hoge mate van toepassing is voor u of uw
> >> >>>> > supervisorengroep
> >> >>>> > 4 de situatie in geringe mate van toepassing is voor u of uw
> >> >>>> > supervisorengroep
> >> >>>> >
> >> >>>> > As you see the likert items are in words, and I should change
> them
> >> >>>> > in
> >> >>>> > nummeric - Am I correct?
> >> >>>> >
> >> >>>> > *To do this, I tried (see further below):*
> >> >>>> > plyr rename() ; I receive the message it should be a factor or
> >> >>>> > character
> >> >>>> > dplyr recode() ; same message
> >> >>>> > mapvalues() ; it should be atomic, so I used as.atomic(teamq) but
> >> >>>> > then
> >> >>>> > I
> >> >>>> > receive the nummers a strings.
> >> >>>> >
> >> >>>> > *The syntaxes*
> >> >>>> > require(plyr)
> >> >>>> > example2 <- revalue(teamq,
> >> >>>> >                     c("de situatie in zeer geringe mate van
> >> >>>> > toepassing
> >> >>>> > is
> >> >>>> > voor u of uw supervisorengroep"= "1",
> >> >>>> >                         "de situatie in geringe mate van
> toepassing
> >> >>>> > is
> >> >>>> > voor
> >> >>>> > u of uw supervisorengroep"= "2",
> >> >>>> >                         "de situatie enigszins van toepassing is
> >> >>>> > voor
> >> >>>> > u of
> >> >>>> > uw supervisorengroep"= "3",
> >> >>>> >                         "de situatie in hoge mate van toepassing
> is
> >> >>>> > voor u
> >> >>>> > of uw supervisorengroep"= "4",
> >> >>>> >                         "de situatie in zeer hoge mate van
> >> >>>> > toepassing
> >> >>>> > is
> >> >>>> > voor u of uw supervisorengroep"= "5"))
> >> >>>> >
> >> >>>> > require(dplyr)
> >> >>>> > example2 <- recode(teamq,
> >> >>>> >                     c("de situatie in zeer geringe mate van
> >> >>>> > toepassing
> >> >>>> > is
> >> >>>> > voor u of uw supervisorengroep"= "1",
> >> >>>> >                       "de situatie in geringe mate van toepassing
> >> >>>> > is
> >> >>>> > voor u
> >> >>>> > of uw supervisorengroep"= "2",
> >> >>>> >                       "de situatie enigszins van toepassing is
> voor
> >> >>>> > u
> >> >>>> > of uw
> >> >>>> > supervisorengroep"= "3",
> >> >>>> >                       "de situatie in hoge mate van toepassing is
> >> >>>> > voor
> >> >>>> > u of
> >> >>>> > uw supervisorengroep"= "4",
> >> >>>> >                       "de situatie in zeer hoge mate van
> toepassing
> >> >>>> > is
> >> >>>> > voor
> >> >>>> > u of uw supervisorengroep"= "5"))
> >> >>>> >
> >> >>>> > mapvalues(as.matrix(teamq), from = c("de situatie in zeer geringe
> >> >>>> > mate
> >> >>>> > van
> >> >>>> > toepassing is voor u of uw supervisorengroep",
> >> >>>> >                         "de situatie in geringe mate van
> toepassing
> >> >>>> > is
> >> >>>> > voor
> >> >>>> > u of uw supervisorengroep",
> >> >>>> >                         "de situatie enigszins van toepassing is
> >> >>>> > voor
> >> >>>> > u of
> >> >>>> > uw supervisorengroep",
> >> >>>> >                         "de situatie in hoge mate van toepassing
> is
> >> >>>> > voor u
> >> >>>> > of uw supervisorengroep",
> >> >>>> >                         "de situatie in zeer hoge mate van
> >> >>>> > toepassing
> >> >>>> > is
> >> >>>> > voor u of uw supervisorengroep"),
> >> >>>> >           to = c(1,2,3,4,5))
> >> >>>> >
> >> >>>> > What should I do?
> >> >>>> > Thank you in advance, Roberto
> >> >>>> >
> >> >>>> > Op ma 22 okt. 2018 om 17:13 schreef David L Carlson
> >> >>>> > <dcarlson at tamu.edu>:
> >> >>>> >
> >> >>>> >> Your example is not reproducible since you did not give us some
> >> >>>> >> sample
> >> >>>> >> data. I suspect that your data frame consists of columns that
> >> >>>> >> represent
> >> >>>> >> questions and rows that represent individuals who answered the
> >> >>>> >> questions.
> >> >>>> >> First create a simple example:
> >> >>>> >>
> >> >>>> >> set.seed(42)
> >> >>>> >> teamq <- data.frame(V1=sample(c(1, 2, 4, 5), 25, replace =
> TRUE),
> >> >>>> >>      V2=sample(c(1, 2, 3, 4, 5), 25, replace=TRUE),
> >> >>>> >>      V3=sample(c(2, 3, 4, 5), 25, replace=TRUE))
> >> >>>> >>
> >> >>>> >> Notice that this data frame ONLY contains questions (and only 3
> >> >>>> >> questions). Here are 2 ways to get what you want. The first one
> >> >>>> >> stacks the
> >> >>>> >> data:
> >> >>>> >>
> >> >>>> >> teamq.stack <- stack(teamq)
> >> >>>> >> str(teamq.stack)
> >> >>>> >> counts <- table(teamq.stack)
> >> >>>> >> str(counts)
> >> >>>> >>
> >> >>>> >> The second one converts each column to a factor with levels 1 -
> 5:
> >> >>>> >>
> >> >>>> >> teamq2 <- data.frame(lapply(teamq, factor, levels=1:5))
> >> >>>> >> str(teamq2)
> >> >>>> >> counts <- sapply(teamq2, table)
> >> >>>> >> str(counts)
> >> >>>> >>
> >> >>>> >> Now make the plots:
> >> >>>> >>
> >> >>>> >> cols <- c("yellow","sandybrown","orange",
> >> >>>> >> "darkolivegreen","green")
> >> >>>> >> barplot(counts[, 1], horiz=TRUE, col=cols, legend=TRUE)
> >> >>>> >> barplot(counts[, 2], horiz=TRUE, col=cols, legend=TRUE)
> >> >>>> >> barplot(counts[, 3], horiz=TRUE, col=cols, legend=TRUE)
> >> >>>> >>
> >> >>>> >> You will need to adjust the xlim= argument so that the legend
> does
> >> >>>> >> not
> >> >>>> >> print on top of the bars.
> >> >>>> >>
> >> >>>> >> ----------------------------------------
> >> >>>> >> David L Carlson
> >> >>>> >> Department of Anthropology
> >> >>>> >> Texas A&M University
> >> >>>> >> College Station, TX 77843-4352
> >> >>>> >>
> >> >>>> >>
> >> >>>> >> -----Original Message-----
> >> >>>> >> From: R-help <r-help-bounces at r-project.org> On Behalf Of P.
> >> >>>> >> Roberto
> >> >>>> >> Bakker
> >> >>>> >> Sent: Monday, October 22, 2018 9:04 AM
> >> >>>> >> To: R mailing list <r-help at r-project.org>
> >> >>>> >> Subject: [R] Different stack barplots - same color legends
> >> >>>> >>
> >> >>>> >> Hi,
> >> >>>> >>
> >> >>>> >> I want to make barplots from different questions (columns) in
> one
> >> >>>> >> data.frame.
> >> >>>> >> Each question has the same 5 likert items.
> >> >>>> >> Now the problem: in some questions all items are answered; in
> >> >>>> >> other
> >> >>>> >> less.
> >> >>>> >> From the syntax below I get nice stack barplots - *but the
> legend
> >> >>>> >> colors do
> >> >>>> >> not* refer to the same likert-item, which I understand - the
> >> >>>> >> colors
> >> >>>> >> go in
> >> >>>> >> sequence along the table.
> >> >>>> >> Question: how can I write a syntax that each likert-item has the
> >> >>>> >> same
> >> >>>> >> legend color?
> >> >>>> >> Thank you in advance,
> >> >>>> >>
> >> >>>> >> Roberto
> >> >>>> >>
> >> >>>> >> SYNTAX:
> >> >>>> >> counts19 <- table(teamq[,19])
> >> >>>> >> counts20 <- table(teamq[,20])
> >> >>>> >> barplot(as.matrix(counts19), horiz = T,
> >> >>>> >>         col=c("yellow","sandybrown","orange",
> >> >>>> >> "darkolivegreen","green"),
> >> >>>> >> legend=T)
> >> >>>> >> barplot(as.matrix(counts20), horiz = T,
> >> >>>> >>         col=c("yellow","sandybrown","orange",
> >> >>>> >> "darkolivegreen","green"),
> >> >>>> >> legend=T)
> >> >>>> >>
> >> >>>> >>         [[alternative HTML version deleted]]
> >> >>>> >>
> >> >>>> >> ______________________________________________
> >> >>>> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
> see
> >> >>>> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> >>>> >> PLEASE do read the posting guide
> >> >>>> >> http://www.R-project.org/posting-guide.html
> >> >>>> >> and provide commented, minimal, self-contained, reproducible
> code.
> >> >>>> >>
> >> >>>> >
> >> >>>> >         [[alternative HTML version deleted]]
> >> >>>> >
> >> >>>> > ______________________________________________
> >> >>>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
> see
> >> >>>> > https://stat.ethz.ch/mailman/listinfo/r-help
> >> >>>> > PLEASE do read the posting guide
> >> >>>> > http://www.R-project.org/posting-guide.html
> >> >>>> > and provide commented, minimal, self-contained, reproducible
> code.
>

	[[alternative HTML version deleted]]


From r@ub@cribe @ending from inbox@ru  Wed Oct 31 23:28:14 2018
From: r@ub@cribe @ending from inbox@ru (=?UTF-8?B?cnN1YnNjcmliZSAu?=)
Date: Thu, 01 Nov 2018 01:28:14 +0300
Subject: [R] =?utf-8?q?survival_analysis_question?=
Message-ID: <1541024894.533234226@f515.i.mail.ru>

Thank You,Eric. I run this code without id="id" and it worked!

Eric Berger <ericjberger at gmail.com>:
<The addicts data.frame has as its first column 'id', which seems to be the cause of the ERROR message.>
?
?Medic <rsubscribe at inbox.ru>  via? R - help ?< r - help @ r -project.org > wrote:
<When I run code, I got the ERROR: 
> addicts.cp=survSplit(addicts, cut=addicts$survt[addicts$status==1], end="survt", event="status",start="start", id="id")
>ERROR in survSplit(addicts, cut = addicts$survt[addicts$status == 1],: the suggested id name is already present.>

From m@rong|u@|u|g| @end|ng |rom gm@||@com  Mon Oct  1 08:44:01 2018
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Mon, 1 Oct 2018 08:44:01 +0200
Subject: [R] Boxplot with linear (not categorical) x-axis
In-Reply-To: <CAF8bMca1M3FP5MF8hxtYH+NM7L0GMxGfZk2W9jz7DLTO6b2zyg@mail.gmail.com>
References: <CAMk+s2Qn+5KyzZYCE_1OqmCBqXn9Jg0FCGmogqGt=KkK0aTUaw@mail.gmail.com>
 <CAF8bMca1M3FP5MF8hxtYH+NM7L0GMxGfZk2W9jz7DLTO6b2zyg@mail.gmail.com>
Message-ID: <CAMk+s2SGuc4jPWwn6t9PXJ9+6aWkW43-qcB3xMB73AM-i7SKHw@mail.gmail.com>

Thank you.
On Fri, Sep 28, 2018 at 5:34 PM William Dunlap <wdunlap at tibco.com> wrote:
>
> Use the 'at' argument to boxplot.  E.g.,
>
> > x <- rep(c(2,4,8,16), c(5,10,20,30))
> > y <- seq_along(x)
> > par(mfrow=c(2,1))
> > boxplot(y~x, at=unique(x))
> > boxplot(y~x)
>
>
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
>
> On Fri, Sep 28, 2018 at 3:05 AM, Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
>>
>> Dear all,
>> I am using boxplot to draw some data. Would be possible to have the
>> X-axis linear (as in a scatter plot) instead of the standard
>> categorical axis?
>> The data I have is subdivided into three groups at the numerical
>> values 1, 3, 5; boxplot treats these as categorical values; in fact, I
>> can write my own labels simply by using the values 1, 2, 3 for the
>> position of the labels as in the example.
>> Thank you,
>>
>> >>>>
>> # generate data.frames
>> A = c(70, 22, 4, 21, 29, 35, 24, 20, 9, 21,
>>       22, 12, 20, 21, 13, 18, 15, 3, 9, 23,
>>       6, 5, 2, 24, 25, 21, 16, 0, 4, 1)
>> B = c(17, 21, 70, 6, 23, 10, 8, 5, 22, 5,
>>       21, 5, 19, 9, 23, 24, 11, 13, 7, 15,
>>       25, 9, 13, 14, 11, 9, 12, 0, 5, 9)
>> C = c(17, 8, 30, 22, 11, 32, 33, 8, 160, 11,
>>       35, 7, 36, 15, 11, 25, 16, 6, 38, 19,
>>       35, 30, 12, 27, 22, 32, 47, 39, 31, 26)
>> X = rep(c(1, 3, 5),30*3)
>> dfA <- data.frame(X, c(A, B, C))
>> names(dfA) <- c("X", "Y")
>> par(mfrow=c(2,1))
>> boxplot(dfA$Y ~ dfA$X,
>>         ylim=c(0, 80),
>>         col="green",
>>         ylab="Y-values",
>>         xlab="X-values",
>>         main="usual X labels"
>> )
>> boxplot(dfA$Y ~ dfA$X,
>>         ylim=c(0, 80),
>>         col="green",
>>         ylab="Y-values",
>>         xlab="X-values",
>>         main="custom X labels",
>>         xaxt="n"
>> )
>> x.lab = c("A", "B", "C")
>> x.pos = c(1, 2, 3)
>> axis(side=1, at=x.pos,
>>      lab=x.lab, cex.axis=1)
>>
>> --
>> Best regards,
>> Luigi
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>


-- 
Best regards,
Luigi



From oy@te|n@@oren@en@1985 @end|ng |rom gm@||@com  Mon Oct  1 08:15:06 2018
From: oy@te|n@@oren@en@1985 @end|ng |rom gm@||@com (=?UTF-8?B?w5h5c3RlaW4gU8O4cmVuc2Vu?=)
Date: Mon, 1 Oct 2018 08:15:06 +0200
Subject: [R] Why do two different calls to mgcv::gamm give different
 p-values?
Message-ID: <CAEWpFgchTan5_nOs=F07DhQpZAd+GDcG3AUKNtxC4QGbEcm9bQ@mail.gmail.com>

I have longitudinal data where a response y_{ij} has been measured
repeatedly for i=1,...,n individuals, j=1,...,m times for each individual.
Let x_{ij} be the age of individual i at her/his jth measurement. I wish to
see how the response varies with age, and have reason to believe that a
nonlinear fit is needed. I hence wish to model the relationship using an
additive mixed model of the form y_{ij} = f(x_{ij}) + b_{i} +
\epsilon_{ij}, where f() is some smooth function to be estimated, b_{i}
\sim N(0, \sigma_{b}^{2}) is the random effect for individual i,
\epsilon_{ij} \sim N(0, \sigma^{2}) is the residual.

Reading the documentation to the mgcv package, I see that such models can
be set up by calling the mgcv::gamm two different ways. One way shown to
set up such a model is with the call
b1 <- gamm(y ~ s(x), random = list(id =~ 1)),
where id is an indicator of the specific individual. In this way, the
random effect is specified in a list. The other way is to set up the random
effect with a smooth of the re:
b2 <- gamm(y ~ s(x) + s(id, bs = "re")).

As far as I can understand, these two setups should create the same
underlying model matrices. However, when running them on my data, the
p-values for the smooth terms, as well as their estimated degrees of
freedom, are different.

Below is a reproducible example on simulated data, which show that these
two types of specifying the models give different p-values and estimated
degrees of freedom. On my real data, these differences are sometimes even
more exaggerated.

My question is: Are not these two calls to gamm suppose to estimate the
same model, or have I misunderstood?

Here is a reproducible example:

library(mgcv)
set.seed(100)
n_sim <- 100
df <- data.frame(
  model1_pval = numeric(n_sim),
  model1_edf = numeric(n_sim),
  model2_pval = numeric(n_sim),
  model2_edf = numeric(n_sim)
)

# Number of observations
n <- 500
# Number of groups
ng <- 100

for(i in 1:n_sim){
  # Draw the fixed effect covariate
  x <- rnorm(n)
  # Set up the group
  id <- rep(1:ng, n/ng)
  # Draw the random effect
  z <- rnorm(ng)
  # Draw the response
  y <- 0.1 * x + 0.2 * x^3 + z[id] + rnorm(n)

  # Fit the two different models
  b1 <- gamm(y ~ s(x, k = 5), random = list(id =~ 1))
  b2 <- gamm(y ~ s(x, k = 5) + s(id, bs = "re"))

  df[i, "model1_pval"] <- anova(b1$gam)$s.pv
  df[i, "model1_edf"] <- anova(b1$gam)$edf
  df[i, "model2_pval"] <- anova(b2$gam)$s.pv[[1]]
  df[i, "model2_edf"] <- anova(b2$gam)$edf[[1]]
}

# Differences between model 1 and model 2 p values
mean(df$model1_pval)
#> [1] 6.790546e-21
mean(df$model2_pval)
#> [1] 3.090694e-14
max(abs(df$model1_pval - df$model2_pval))
#> [1] 2.770545e-12

# Differences between model1 and model 2 estimated degrees of freedom
mean(df$model1_edf)
#> [1] 3.829992
mean(df$model2_edf)
#> [1] 3.731438
max(abs(df$model1_edf - df$model2_edf))
#> [1] 0.6320281


Thanks in advance,
?ystein S?rensen

	[[alternative HTML version deleted]]



From r@nj@nm@no167 @end|ng |rom gm@||@com  Mon Oct  1 11:24:43 2018
From: r@nj@nm@no167 @end|ng |rom gm@||@com (Manoranjan Muthusamy)
Date: Mon, 1 Oct 2018 10:24:43 +0100
Subject: [R] R - Reading a horizontally arranged csv file,
 replacing values and saving again
Message-ID: <CANqyHbTC9JF4JQRKOu2YeiL43V3VpTWCA4-tnXpXDYack0d94g@mail.gmail.com>

I have a horizontally arranged CSV file
<https://www.dropbox.com/s/0ukyuifvpq1olqk/samplefile.csv?dl=0> (
samplefile.csv) with headers are in the first column. Also, each row has a
different number of columns. I want to read this CSV file, replace one of
the cell value and save again as a CSV file with the same format as the
original file with exactly same number of columns and rows. It sounds like
a simple task, but I am struggling to find a way. I tried to do this with
the help of this
<https://stackoverflow.com/questions/17288197/reading-a-csv-file-organized-horizontally>
 and this
<https://stackoverflow.com/questions/20308621/how-do-i-write-a-csv-file-in-r-where-my-input-is-written-to-the-file-as-row>
posts,
but still, I can't get the output the way I want. Can somebody help me here?

My attempt using the answer in this post
<https://stackoverflow.com/questions/17288197/reading-a-csv-file-organized-horizontally>
to
read the CSV file (samplefile.csv) gives me the following output where
headers are kinda messed up and empty cells are replaced with NA values
which is not what I want

aaa <- read.tcsv("samplefile.csv")
aaa

     Header.1 Header.2..units. Header.3..units. Header.3..units..11
Some text           0.0625                0             2648962
<NA>           0.0625             1200             6647473        <NA>
          0.0625             1380                  14        <NA>
     0.2500             1500                  15        <NA>
0.6250             1620                 NA6        <NA>
1.3125             1740                 NA7        <NA>
2.4375             1860                 NA8        <NA>
3.5625             1980                 NA9        <NA>
4.6250             2100                 NA10       <NA>
5.0000             2220                 NA11       <NA>
5.0000             2340                 NA12       <NA>
4.6250             2460                 NA13       <NA>
3.5625             2580                 NA14       <NA>
2.4375             2700                 NA15       <NA>
1.3125             2820                 NA16       <NA>
0.6250             2940                 NA17       <NA>
0.2500             3060                 NA18       <NA>
0.0625             3180                 NA19       <NA>
0.0000             3300                 NA20       <NA>
0.0000            18000                 NA

Also, I am not sure how to go back to original format when I save the file
again after a modification (for example after replacing a cell value)

I tried saving the file again by using t (transpose) as given below

write.csv(t(aaa), file ="samplefile_e.csv", row.names=T)

but still, there are following issues in the saved file

   1. messed up headers
   2. empty cells are replaced with NA
   3. when I open the file in a text editor all the values are shown as
   characters

Thanks,
Mano

	[[alternative HTML version deleted]]



From wdun|@p @end|ng |rom t|bco@com  Mon Oct  1 17:56:36 2018
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Mon, 1 Oct 2018 08:56:36 -0700
Subject: [R] R - Reading a horizontally arranged csv file,
 replacing values and saving again
In-Reply-To: <CANqyHbTC9JF4JQRKOu2YeiL43V3VpTWCA4-tnXpXDYack0d94g@mail.gmail.com>
References: <CANqyHbTC9JF4JQRKOu2YeiL43V3VpTWCA4-tnXpXDYack0d94g@mail.gmail.com>
Message-ID: <CAF8bMcZ3gid0Zb0_e7eTG67XeH7tj0eZw5Hh79m0v=v44gLDcg@mail.gmail.com>

Read the help file for write.table
   ?write.table
and look at the descriptions of its arguments.
  > df <- data.frame(Text=c("Abe","Ben",NA,"David"), Age=c(19, NA, 12, 10))
  > write.table(file=stdout(), t(df), sep=",")
  "V1","V2","V3","V4"
  "Text","Abe","Ben",NA,"David"
  "Age","19",NA,"12","10"
  > write.table(file=stdout(), t(df), quote=FALSE, na="", sep=",")
  V1,V2,V3,V4
  Text,Abe,Ben,,David
  Age,19,,12,10




Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Mon, Oct 1, 2018 at 2:24 AM, Manoranjan Muthusamy <
ranjanmano167 at gmail.com> wrote:

> I have a horizontally arranged CSV file
> <https://www.dropbox.com/s/0ukyuifvpq1olqk/samplefile.csv?dl=0> (
> samplefile.csv) with headers are in the first column. Also, each row has a
> different number of columns. I want to read this CSV file, replace one of
> the cell value and save again as a CSV file with the same format as the
> original file with exactly same number of columns and rows. It sounds like
> a simple task, but I am struggling to find a way. I tried to do this with
> the help of this
> <https://stackoverflow.com/questions/17288197/reading-a-
> csv-file-organized-horizontally>
>  and this
> <https://stackoverflow.com/questions/20308621/how-do-i-
> write-a-csv-file-in-r-where-my-input-is-written-to-the-file-as-row>
> posts,
> but still, I can't get the output the way I want. Can somebody help me
> here?
>
> My attempt using the answer in this post
> <https://stackoverflow.com/questions/17288197/reading-a-
> csv-file-organized-horizontally>
> to
> read the CSV file (samplefile.csv) gives me the following output where
> headers are kinda messed up and empty cells are replaced with NA values
> which is not what I want
>
> aaa <- read.tcsv("samplefile.csv")
> aaa
>
>      Header.1 Header.2..units. Header.3..units. Header.3..units..11
> Some text           0.0625                0             2648962
> <NA>           0.0625             1200             6647473        <NA>
>           0.0625             1380                  14        <NA>
>      0.2500             1500                  15        <NA>
> 0.6250             1620                 NA6        <NA>
> 1.3125             1740                 NA7        <NA>
> 2.4375             1860                 NA8        <NA>
> 3.5625             1980                 NA9        <NA>
> 4.6250             2100                 NA10       <NA>
> 5.0000             2220                 NA11       <NA>
> 5.0000             2340                 NA12       <NA>
> 4.6250             2460                 NA13       <NA>
> 3.5625             2580                 NA14       <NA>
> 2.4375             2700                 NA15       <NA>
> 1.3125             2820                 NA16       <NA>
> 0.6250             2940                 NA17       <NA>
> 0.2500             3060                 NA18       <NA>
> 0.0625             3180                 NA19       <NA>
> 0.0000             3300                 NA20       <NA>
> 0.0000            18000                 NA
>
> Also, I am not sure how to go back to original format when I save the file
> again after a modification (for example after replacing a cell value)
>
> I tried saving the file again by using t (transpose) as given below
>
> write.csv(t(aaa), file ="samplefile_e.csv", row.names=T)
>
> but still, there are following issues in the saved file
>
>    1. messed up headers
>    2. empty cells are replaced with NA
>    3. when I open the file in a text editor all the values are shown as
>    characters
>
> Thanks,
> Mano
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From pro|@@m|t@m|tt@| @end|ng |rom gm@||@com  Mon Oct  1 18:31:21 2018
From: pro|@@m|t@m|tt@| @end|ng |rom gm@||@com (Amit Mittal)
Date: Mon, 1 Oct 2018 16:31:21 +0000
Subject: [R] R - Reading a horizontally arranged csv file,
 replacing values and saving again
In-Reply-To: <CAF8bMcZ3gid0Zb0_e7eTG67XeH7tj0eZw5Hh79m0v=v44gLDcg@mail.gmail.com>
References: <CANqyHbTC9JF4JQRKOu2YeiL43V3VpTWCA4-tnXpXDYack0d94g@mail.gmail.com>,
 <CAF8bMcZ3gid0Zb0_e7eTG67XeH7tj0eZw5Hh79m0v=v44gLDcg@mail.gmail.com>
Message-ID: <DM6PR01MB4107C1394F1A2CA7DC279D00FCEF0@DM6PR01MB4107.prod.exchangelabs.com>

You can just transpose in xl and read the regular form. Also use na.omit(data) and is.na() to replace na with 0  or remove rows with na data items

------------
Amit Mittal
PhD in Finance and Accounting (tbd)
IIM Lucknow
http://ssrn.com/author=2665511
*Top 10%, downloaded author since July 2017
------------
Sent from my Outlook for Android
https://aka.ms/ghei36

________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of William Dunlap via R-help <r-help at r-project.org>
Sent: Monday, October 1, 2018 9:26:36 PM
To: Manoranjan Muthusamy
Cc: r-help at r-project.org
Subject: Re: [R] R - Reading a horizontally arranged csv file, replacing values and saving again

Read the help file for write.table
   ?write.table
and look at the descriptions of its arguments.
  > df <- data.frame(Text=c("Abe","Ben",NA,"David"), Age=c(19, NA, 12, 10))
  > write.table(file=stdout(), t(df), sep=",")
  "V1","V2","V3","V4"
  "Text","Abe","Ben",NA,"David"
  "Age","19",NA,"12","10"
  > write.table(file=stdout(), t(df), quote=FALSE, na="", sep=",")
  V1,V2,V3,V4
  Text,Abe,Ben,,David
  Age,19,,12,10




Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Mon, Oct 1, 2018 at 2:24 AM, Manoranjan Muthusamy <
ranjanmano167 at gmail.com> wrote:

> I have a horizontally arranged CSV file
> <https://www.dropbox.com/s/0ukyuifvpq1olqk/samplefile.csv?dl=0> (
> samplefile.csv) with headers are in the first column. Also, each row has a
> different number of columns. I want to read this CSV file, replace one of
> the cell value and save again as a CSV file with the same format as the
> original file with exactly same number of columns and rows. It sounds like
> a simple task, but I am struggling to find a way. I tried to do this with
> the help of this
> <https://stackoverflow.com/questions/17288197/reading-a-
> csv-file-organized-horizontally>
>  and this
> <https://stackoverflow.com/questions/20308621/how-do-i-
> write-a-csv-file-in-r-where-my-input-is-written-to-the-file-as-row>
> posts,
> but still, I can't get the output the way I want. Can somebody help me
> here?
>
> My attempt using the answer in this post
> <https://stackoverflow.com/questions/17288197/reading-a-
> csv-file-organized-horizontally>
> to
> read the CSV file (samplefile.csv) gives me the following output where
> headers are kinda messed up and empty cells are replaced with NA values
> which is not what I want
>
> aaa <- read.tcsv("samplefile.csv")
> aaa
>
>      Header.1 Header.2..units. Header.3..units. Header.3..units..11
> Some text           0.0625                0             2648962
> <NA>           0.0625             1200             6647473        <NA>
>           0.0625             1380                  14        <NA>
>      0.2500             1500                  15        <NA>
> 0.6250             1620                 NA6        <NA>
> 1.3125             1740                 NA7        <NA>
> 2.4375             1860                 NA8        <NA>
> 3.5625             1980                 NA9        <NA>
> 4.6250             2100                 NA10       <NA>
> 5.0000             2220                 NA11       <NA>
> 5.0000             2340                 NA12       <NA>
> 4.6250             2460                 NA13       <NA>
> 3.5625             2580                 NA14       <NA>
> 2.4375             2700                 NA15       <NA>
> 1.3125             2820                 NA16       <NA>
> 0.6250             2940                 NA17       <NA>
> 0.2500             3060                 NA18       <NA>
> 0.0625             3180                 NA19       <NA>
> 0.0000             3300                 NA20       <NA>
> 0.0000            18000                 NA
>
> Also, I am not sure how to go back to original format when I save the file
> again after a modification (for example after replacing a cell value)
>
> I tried saving the file again by using t (transpose) as given below
>
> write.csv(t(aaa), file ="samplefile_e.csv", row.names=T)
>
> but still, there are following issues in the saved file
>
>    1. messed up headers
>    2. empty cells are replaced with NA
>    3. when I open the file in a text editor all the values are shown as
>    characters
>
> Thanks,
> Mano
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]



From re|chm@nj @end|ng |rom @bcg|ob@|@net  Mon Oct  1 23:42:33 2018
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Mon, 1 Oct 2018 16:42:33 -0500
Subject: [R] arulesSequences Package
Message-ID: <000601d459cf$aa37e840$fea7b8c0$@sbcglobal.net>

R-Help Forum

For anyone who has used the "arulesSequences" Package how do I start with
raw data (*.csv file) and convert into a sequence object to run the cSPADE
function.  The package example use zaki dataset which has already been
converted.  When I state raw data how should I structure my csv file?

A web example  or RPubs link?

Jeff Reichman



From re|chm@nj @end|ng |rom @bcg|ob@|@net  Mon Oct  1 23:47:33 2018
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Mon, 1 Oct 2018 16:47:33 -0500
Subject: [R] arulesSequences Package
Message-ID: <000701d459d0$5cfc1140$16f433c0$@sbcglobal.net>

R-Help Forum

For anyone who has used the "arulesSequences" Package how do I start with
raw data (*.csv file) and convert into a sequence object to run the cSPADE
function.  The package example use zaki dataset which has already been
converted.  When I state raw data how should I structure my csv file?

A web example  or RPubs link?

For example 
Seq_1	{E,B}, {C}, {T}
Seq_2 	(E,M}, {C}, {B,E,V,T}
Seq_3 	{E},{C},{T}

Jeff Reichman



From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Tue Oct  2 00:03:06 2018
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Mon, 1 Oct 2018 15:03:06 -0700 (PDT)
Subject: [R] Installing packages in bulk
Message-ID: <alpine.LNX.2.20.1810011457060.18720@salmo.appl-ecosys.com>

   For a new installation of R-3.5.1 I want to install all packages on
another host. I prepared a file, R-libraries.R, which contains
install.packages('BH, ...') for the entire list.

   When I source() this file on the new host and select a CRAN mirror I see
the message, "Warning message:
package 'BH,covr, <etc>
[...truncated]

   Do I need a space after each comma or is there something else wrong with
my syntax?

Rich



From bgunter@4567 @end|ng |rom gm@||@com  Tue Oct  2 00:22:02 2018
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 1 Oct 2018 15:22:02 -0700
Subject: [R] Installing packages in bulk
In-Reply-To: <alpine.LNX.2.20.1810011457060.18720@salmo.appl-ecosys.com>
References: <alpine.LNX.2.20.1810011457060.18720@salmo.appl-ecosys.com>
Message-ID: <CAGxFJbSYqT4y34KZcs0zjoRgXN5uFnv97M=+w2DUAU=oLWD7mA@mail.gmail.com>

Your syntax is wrong.

pkgs

character ***vector*** of the names of packages

See the example at the end of ?install.packages.

"a","b", "c"  is **not** a vector
c("a", "b", "c")  **is** a vector.

-- Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Oct 1, 2018 at 3:04 PM Rich Shepard <rshepard at appl-ecosys.com>
wrote:

>    For a new installation of R-3.5.1 I want to install all packages on
> another host. I prepared a file, R-libraries.R, which contains
> install.packages('BH, ...') for the entire list.
>
>    When I source() this file on the new host and select a CRAN mirror I see
> the message, "Warning message:
> package 'BH,covr, <etc>
> [...truncated]
>
>    Do I need a space after each comma or is there something else wrong with
> my syntax?
>
> Rich
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From e@@w|ek @end|ng |rom gm@||@com  Tue Oct  2 00:32:33 2018
From: e@@w|ek @end|ng |rom gm@||@com (Ek Esawi)
Date: Mon, 1 Oct 2018 18:32:33 -0400
Subject: [R] From for loop to lappy?
Message-ID: <CA+ZkTxsTWPrEe88f70yevZBqBV5C17G+sxeoxth_VF1Ka_vGuA@mail.gmail.com>

Hi All?

I am using Tabulizer to extract tables from PDF files. Tabulizer
creates a list of matrices for each set of tables in each document.
My code, below, works well. Then i thought i would use lapply instead
of for loop since it is a little faster and more compact,
but i kept getting an error message below.

Any help is greatly appreciated

EK

install.packages("tabulizer")
installed.packages("stringr")
library(stringi)
library(tabulizer)
path = "C:/Users/name/Documents/TextMining/"
file.names <- dir(path, pattern =".PDF")

for(i in 1:length(file.names)){
  print(file.names[i])
  A[[i]] <- extract_tables(file.names[i])
}


lapply(file.names, function(i) A[[i]] <- extract_tables(file.names[i]))

 Error in normalizePath(path.expand(path), winslash, mustWork) :
  path[1]="NA": The system cannot find the file specified



From m@cqueen1 @end|ng |rom ||n|@gov  Tue Oct  2 00:39:31 2018
From: m@cqueen1 @end|ng |rom ||n|@gov (MacQueen, Don)
Date: Mon, 1 Oct 2018 22:39:31 +0000
Subject: [R] From for loop to lappy?
In-Reply-To: <CA+ZkTxsTWPrEe88f70yevZBqBV5C17G+sxeoxth_VF1Ka_vGuA@mail.gmail.com>
References: <CA+ZkTxsTWPrEe88f70yevZBqBV5C17G+sxeoxth_VF1Ka_vGuA@mail.gmail.com>
Message-ID: <C8AEE11E-17D2-4E01-BE92-41EE734B855B@llnl.gov>

Try

A <- lapply(file.names, function(fn) extract_tables(fn)


--
Don MacQueen
Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062
Lab cell 925-724-7509
 
 

?On 10/1/18, 3:32 PM, "R-help on behalf of Ek Esawi" <r-help-bounces at r-project.org on behalf of esawiek at gmail.com> wrote:

    Hi All?
    
    I am using Tabulizer to extract tables from PDF files. Tabulizer
    creates a list of matrices for each set of tables in each document.
    My code, below, works well. Then i thought i would use lapply instead
    of for loop since it is a little faster and more compact,
    but i kept getting an error message below.
    
    Any help is greatly appreciated
    
    EK
    
    install.packages("tabulizer")
    installed.packages("stringr")
    library(stringi)
    library(tabulizer)
    path = "C:/Users/name/Documents/TextMining/"
    file.names <- dir(path, pattern =".PDF")
    
    for(i in 1:length(file.names)){
      print(file.names[i])
      A[[i]] <- extract_tables(file.names[i])
    }
    
    
    lapply(file.names, function(i) A[[i]] <- extract_tables(file.names[i]))
    
     Error in normalizePath(path.expand(path), winslash, mustWork) :
      path[1]="NA": The system cannot find the file specified
    
    ______________________________________________
    R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    https://stat.ethz.ch/mailman/listinfo/r-help
    PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    and provide commented, minimal, self-contained, reproducible code.
    


From e@@w|ek @end|ng |rom gm@||@com  Tue Oct  2 01:02:29 2018
From: e@@w|ek @end|ng |rom gm@||@com (Ek Esawi)
Date: Mon, 1 Oct 2018 19:02:29 -0400
Subject: [R] From for loop to lappy?
In-Reply-To: <C8AEE11E-17D2-4E01-BE92-41EE734B855B@llnl.gov>
References: <CA+ZkTxsTWPrEe88f70yevZBqBV5C17G+sxeoxth_VF1Ka_vGuA@mail.gmail.com>
 <C8AEE11E-17D2-4E01-BE92-41EE734B855B@llnl.gov>
Message-ID: <CA+ZkTxudw15YonuGPovhfGQ6giRsch2pXpZArnGzTdH1cfmhKQ@mail.gmail.com>

Thank you Don. It works
EK
On Mon, Oct 1, 2018 at 6:39 PM MacQueen, Don <macqueen1 at llnl.gov> wrote:
>
> Try
>
> A <- lapply(file.names, function(fn) extract_tables(fn)
>
>
> --
> Don MacQueen
> Lawrence Livermore National Laboratory
> 7000 East Ave., L-627
> Livermore, CA 94550
> 925-423-1062
> Lab cell 925-724-7509
>
>
>
> ?On 10/1/18, 3:32 PM, "R-help on behalf of Ek Esawi" <r-help-bounces at r-project.org on behalf of esawiek at gmail.com> wrote:
>
>     Hi All?
>
>     I am using Tabulizer to extract tables from PDF files. Tabulizer
>     creates a list of matrices for each set of tables in each document.
>     My code, below, works well. Then i thought i would use lapply instead
>     of for loop since it is a little faster and more compact,
>     but i kept getting an error message below.
>
>     Any help is greatly appreciated
>
>     EK
>
>     install.packages("tabulizer")
>     installed.packages("stringr")
>     library(stringi)
>     library(tabulizer)
>     path = "C:/Users/name/Documents/TextMining/"
>     file.names <- dir(path, pattern =".PDF")
>
>     for(i in 1:length(file.names)){
>       print(file.names[i])
>       A[[i]] <- extract_tables(file.names[i])
>     }
>
>
>     lapply(file.names, function(i) A[[i]] <- extract_tables(file.names[i]))
>
>      Error in normalizePath(path.expand(path), winslash, mustWork) :
>       path[1]="NA": The system cannot find the file specified
>
>     ______________________________________________
>     R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>     https://stat.ethz.ch/mailman/listinfo/r-help
>     PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>     and provide commented, minimal, self-contained, reproducible code.
>
>



From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Tue Oct  2 01:04:51 2018
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Mon, 1 Oct 2018 16:04:51 -0700 (PDT)
Subject: [R] Installing packages in bulk
In-Reply-To: <CAGxFJbSYqT4y34KZcs0zjoRgXN5uFnv97M=+w2DUAU=oLWD7mA@mail.gmail.com>
References: <alpine.LNX.2.20.1810011457060.18720@salmo.appl-ecosys.com>
 <CAGxFJbSYqT4y34KZcs0zjoRgXN5uFnv97M=+w2DUAU=oLWD7mA@mail.gmail.com>
Message-ID: <alpine.LNX.2.20.1810011604250.18720@salmo.appl-ecosys.com>

On Mon, 1 Oct 2018, Bert Gunter wrote:

> Your syntax is wrong.
> See the example at the end of ?install.packages.

Bert,

   Thank you.

Rich



From re|chm@nj @end|ng |rom @bcg|ob@|@net  Tue Oct  2 02:02:33 2018
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Mon, 1 Oct 2018 19:02:33 -0500
Subject: [R] arulesSequences Package
In-Reply-To: <000701d459d0$5cfc1140$16f433c0$@sbcglobal.net>
References: <000701d459d0$5cfc1140$16f433c0$@sbcglobal.net>
Message-ID: <000f01d459e3$3906c420$ab144c60$@sbcglobal.net>

I Was able to figure out how to create my object using the "read_baskets"
function but when I run the "cspade" function I receive the following error
(running in RStudio)
...
4 -> 1 2 -> 1 -> 1 -- 1 1 
3 -> 1 2 -> 1 -> 1 -- 1 1 
3 4 -> 1 2 -> 1 -> 1 -- 1 1 
3 4 -> 1 -> 1 -> 1 -- 1 1 
 NA MB [2.4s]
reading sequences ...Error in file(con, "r") : cannot open the connection
In addition: Warning message:
In file(con, "r") :
  cannot open file
'C:\Users\reichmanj\Documents\R\R-3.5.1\library\arulesSequences\misc\cspade1
f8c30bb5148.out': No such file or directory
> 
> cspade> as(s1, "data.frame")
Error in .class1(object) : object 's1' not found

But if I run in R (alone) it works just fine.  Any idea why I can' t seem to
run in RStudio or what I might have to do in RStudio?

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Jeff Reichman
Sent: Monday, October 1, 2018 4:48 PM
To: r-help at r-project.org
Subject: [R] arulesSequences Package

R-Help Forum

For anyone who has used the "arulesSequences" Package how do I start with
raw data (*.csv file) and convert into a sequence object to run the cSPADE
function.  The package example use zaki dataset which has already been
converted.  When I state raw data how should I structure my csv file?

A web example  or RPubs link?

For example 
Seq_1	{E,B}, {C}, {T}
Seq_2 	(E,M}, {C}, {B,E,V,T}
Seq_3 	{E},{C},{T}

Jeff Reichman

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.



From bgunter@4567 @end|ng |rom gm@||@com  Tue Oct  2 02:19:41 2018
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 1 Oct 2018 17:19:41 -0700
Subject: [R] arulesSequences Package
In-Reply-To: <000f01d459e3$3906c420$ab144c60$@sbcglobal.net>
References: <000701d459d0$5cfc1140$16f433c0$@sbcglobal.net>
 <000f01d459e3$3906c420$ab144c60$@sbcglobal.net>
Message-ID: <CAGxFJbQ=tCLxuDJTHXwUJS46DXQhcwGmVZOaO8G4d7EjBaQYEA@mail.gmail.com>

"But if I run in R (alone) it works just fine.  Any idea why I can' t seem
to
run in RStudio or what I might have to do in RStudio?"

This is the R-Help list; RStudio is a totally separate software product,
Any questions you have on RStudio software should be directed to their
site,not here.

Cheers,
Bert



Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Oct 1, 2018 at 5:03 PM Jeff Reichman <reichmanj at sbcglobal.net>
wrote:

> I Was able to figure out how to create my object using the "read_baskets"
> function but when I run the "cspade" function I receive the following error
> (running in RStudio)
> ...
> 4 -> 1 2 -> 1 -> 1 -- 1 1
> 3 -> 1 2 -> 1 -> 1 -- 1 1
> 3 4 -> 1 2 -> 1 -> 1 -- 1 1
> 3 4 -> 1 -> 1 -> 1 -- 1 1
>  NA MB [2.4s]
> reading sequences ...Error in file(con, "r") : cannot open the connection
> In addition: Warning message:
> In file(con, "r") :
>   cannot open file
>
> 'C:\Users\reichmanj\Documents\R\R-3.5.1\library\arulesSequences\misc\cspade1
> f8c30bb5148.out': No such file or directory
> >
> > cspade> as(s1, "data.frame")
> Error in .class1(object) : object 's1' not found
>
> But if I run in R (alone) it works just fine.  Any idea why I can' t seem
> to
> run in RStudio or what I might have to do in RStudio?
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Jeff Reichman
> Sent: Monday, October 1, 2018 4:48 PM
> To: r-help at r-project.org
> Subject: [R] arulesSequences Package
>
> R-Help Forum
>
> For anyone who has used the "arulesSequences" Package how do I start with
> raw data (*.csv file) and convert into a sequence object to run the cSPADE
> function.  The package example use zaki dataset which has already been
> converted.  When I state raw data how should I structure my csv file?
>
> A web example  or RPubs link?
>
> For example
> Seq_1   {E,B}, {C}, {T}
> Seq_2   (E,M}, {C}, {B,E,V,T}
> Seq_3   {E},{C},{T}
>
> Jeff Reichman
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From wdun|@p @end|ng |rom t|bco@com  Tue Oct  2 02:45:48 2018
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Mon, 1 Oct 2018 17:45:48 -0700
Subject: [R] arulesSequences Package
In-Reply-To: <000f01d459e3$3906c420$ab144c60$@sbcglobal.net>
References: <000701d459d0$5cfc1140$16f433c0$@sbcglobal.net>
 <000f01d459e3$3906c420$ab144c60$@sbcglobal.net>
Message-ID: <CAF8bMca5Q5ua4hjkYh_PGrfh0jQTWe6ZLoFpLZM2URFjOwxF_w@mail.gmail.com>

Warning message:t
In file(con, "r") :
  cannot open file
'C:\Users\reichmanj\Documents\R\R-3.5.1\library\arulesSequences\misc\cspade1

f8c30bb5148.out': No such file or directory

It is hard to say what you did wrong when we only see R's output and not
what you typed to provoke the error.  However, this file it is trying to
read looks like something that tempfile() would have made if the tempdir()
function were messed up or if you gave an inappropriate directory name as
the tmpdir argument to arulesSequences::cspade.  You should not generally
give the tmpdir argument to cspade, as the default, tempdir(), should
work.  Did you supply it?  What does tempdir() return in the case that this
fails?

As an added complications, cspade redefines the system2 function if
.Platfom$OS.type is
"windows" and .Platform$GUI is "RGui".
    ## workaround
    if (.Platform$OS  == "windows" &&
        .Platform$GUI == "Rgui")
        system2 <- function(command, args = character(), stdout = "", ...) {
            if (is.character(stdout) && nzchar(stdout)) {
                args   <- c(args, ">", stdout)
                stdout <- NULL
            }
            args <- c("/c", shQuote(command), args)
            command <- Sys.getenv("COMSPEC")
            ## bail out
            if (!nzchar(command))
                stop("environment variable 'COMSPEC' not set")
            base::system2(command, args = args, stdout = stdout, ...)
        }

RStudio redefines .Platform$RGui to be "RStudio" so this redefinition does
not happen.  The author or maintainer of the package might be able to
straighten this part out.


Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Mon, Oct 1, 2018 at 5:02 PM, Jeff Reichman <reichmanj at sbcglobal.net>
wrote:

> I Was able to figure out how to create my object using the "read_baskets"
> function but when I run the "cspade" function I receive the following error
> (running in RStudio)
> ...
> 4 -> 1 2 -> 1 -> 1 -- 1 1
> 3 -> 1 2 -> 1 -> 1 -- 1 1
> 3 4 -> 1 2 -> 1 -> 1 -- 1 1
> 3 4 -> 1 -> 1 -> 1 -- 1 1
>  NA MB [2.4s]
> reading sequences ...Error in file(con, "r") : cannot open the connection
> In addition: Warning message:
> In file(con, "r") :
>   cannot open file
> 'C:\Users\reichmanj\Documents\R\R-3.5.1\library\
> arulesSequences\misc\cspade1
> f8c30bb5148.out': No such file or directory
> >
> > cspade> as(s1, "data.frame")
> Error in .class1(object) : object 's1' not found
>
> But if I run in R (alone) it works just fine.  Any idea why I can' t seem
> to
> run in RStudio or what I might have to do in RStudio?
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Jeff Reichman
> Sent: Monday, October 1, 2018 4:48 PM
> To: r-help at r-project.org
> Subject: [R] arulesSequences Package
>
> R-Help Forum
>
> For anyone who has used the "arulesSequences" Package how do I start with
> raw data (*.csv file) and convert into a sequence object to run the cSPADE
> function.  The package example use zaki dataset which has already been
> converted.  When I state raw data how should I structure my csv file?
>
> A web example  or RPubs link?
>
> For example
> Seq_1   {E,B}, {C}, {T}
> Seq_2   (E,M}, {C}, {B,E,V,T}
> Seq_3   {E},{C},{T}
>
> Jeff Reichman
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From @dee|@@u@| @end|ng |rom gm@||@com  Tue Oct  2 09:29:46 2018
From: @dee|@@u@| @end|ng |rom gm@||@com (Adeela Munawar)
Date: Tue, 2 Oct 2018 12:29:46 +0500
Subject: [R] confiidence limits in Binom package
Message-ID: <CABGg3O4rh4h9P_vLOpD+vxuW75XeEBCbBSpFrn2pj=jNZ3DEJg@mail.gmail.com>

Dear List,

I am using your package binom in R version 3.4.4 but i have to display
lower and upper confidence limts in binom.confint and binom.length function
but unable to dispaly them. Could you suggest any improvement?
for example,
Binom<-binom.length(p=0.01, n=40, conf.level = 0.95, method = "all")
Output:
print(Binom)
          method         n       p          length
1  agresti-coull      40    0.01     0.13136905
2     asymptotic     40    0.01     0.03458699
3          bayes        40    0.01    0.06453984
4        cloglog        40    0.01    0.09751737
5          exact         40    0.01    0.10443801
6          logit           40    0.01    0.11075339
7         probit          40    0.01    0.10233802
8        profile          40    0.01    0.08961691
9            lrt             40    0.01    0.06806841
10     prop.test       40    0.01    0.12318140
11        wilson         40    0.01    0.10159667
Regards,
Adeela Munawar
Lecturer Statistics

	[[alternative HTML version deleted]]



From @|mon@wood @end|ng |rom b@th@edu  Tue Oct  2 14:26:46 2018
From: @|mon@wood @end|ng |rom b@th@edu (Simon Wood)
Date: Tue, 2 Oct 2018 14:26:46 +0200
Subject: [R] Why do two different calls to mgcv::gamm give different
 p-values?
In-Reply-To: <CAEWpFgchTan5_nOs=F07DhQpZAd+GDcG3AUKNtxC4QGbEcm9bQ@mail.gmail.com>
References: <CAEWpFgchTan5_nOs=F07DhQpZAd+GDcG3AUKNtxC4QGbEcm9bQ@mail.gmail.com>
Message-ID: <649ac7fe-39e4-1282-b305-d59451139a16@bath.edu>

Dear ?ystein,

In your code 'id' is set up to be numeric. In your first gamm call it 
gets coerced to a factor (since nothing else would make sense). In? your 
second gamm call it is simply treated as numeric, since that could makes 
sense. To make the two models equivalent you just need to substitute:

id <- as.factor(rep(1:ng, n/ng))

into your loop.

best,
Simon

On 01/10/18 08:15, ?ystein S?rensen wrote:
> I have longitudinal data where a response y_{ij} has been measured
> repeatedly for i=1,...,n individuals, j=1,...,m times for each individual.
> Let x_{ij} be the age of individual i at her/his jth measurement. I wish to
> see how the response varies with age, and have reason to believe that a
> nonlinear fit is needed. I hence wish to model the relationship using an
> additive mixed model of the form y_{ij} = f(x_{ij}) + b_{i} +
> \epsilon_{ij}, where f() is some smooth function to be estimated, b_{i}
> \sim N(0, \sigma_{b}^{2}) is the random effect for individual i,
> \epsilon_{ij} \sim N(0, \sigma^{2}) is the residual.
>
> Reading the documentation to the mgcv package, I see that such models can
> be set up by calling the mgcv::gamm two different ways. One way shown to
> set up such a model is with the call
> b1 <- gamm(y ~ s(x), random = list(id =~ 1)),
> where id is an indicator of the specific individual. In this way, the
> random effect is specified in a list. The other way is to set up the random
> effect with a smooth of the re:
> b2 <- gamm(y ~ s(x) + s(id, bs = "re")).
>
> As far as I can understand, these two setups should create the same
> underlying model matrices. However, when running them on my data, the
> p-values for the smooth terms, as well as their estimated degrees of
> freedom, are different.
>
> Below is a reproducible example on simulated data, which show that these
> two types of specifying the models give different p-values and estimated
> degrees of freedom. On my real data, these differences are sometimes even
> more exaggerated.
>
> My question is: Are not these two calls to gamm suppose to estimate the
> same model, or have I misunderstood?
>
> Here is a reproducible example:
>
> library(mgcv)
> set.seed(100)
> n_sim <- 100
> df <- data.frame(
>    model1_pval = numeric(n_sim),
>    model1_edf = numeric(n_sim),
>    model2_pval = numeric(n_sim),
>    model2_edf = numeric(n_sim)
> )
>
> # Number of observations
> n <- 500
> # Number of groups
> ng <- 100
>
> for(i in 1:n_sim){
>    # Draw the fixed effect covariate
>    x <- rnorm(n)
>    # Set up the group
>    id <- rep(1:ng, n/ng)
>    # Draw the random effect
>    z <- rnorm(ng)
>    # Draw the response
>    y <- 0.1 * x + 0.2 * x^3 + z[id] + rnorm(n)
>
>    # Fit the two different models
>    b1 <- gamm(y ~ s(x, k = 5), random = list(id =~ 1))
>    b2 <- gamm(y ~ s(x, k = 5) + s(id, bs = "re"))
>
>    df[i, "model1_pval"] <- anova(b1$gam)$s.pv
>    df[i, "model1_edf"] <- anova(b1$gam)$edf
>    df[i, "model2_pval"] <- anova(b2$gam)$s.pv[[1]]
>    df[i, "model2_edf"] <- anova(b2$gam)$edf[[1]]
> }
>
> # Differences between model 1 and model 2 p values
> mean(df$model1_pval)
> #> [1] 6.790546e-21
> mean(df$model2_pval)
> #> [1] 3.090694e-14
> max(abs(df$model1_pval - df$model2_pval))
> #> [1] 2.770545e-12
>
> # Differences between model1 and model 2 estimated degrees of freedom
> mean(df$model1_edf)
> #> [1] 3.829992
> mean(df$model2_edf)
> #> [1] 3.731438
> max(abs(df$model1_edf - df$model2_edf))
> #> [1] 0.6320281
>
>
> Thanks in advance,
> ?ystein S?rensen
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



From m@rc_grt @end|ng |rom y@hoo@|r  Tue Oct  2 15:30:11 2018
From: m@rc_grt @end|ng |rom y@hoo@|r (Marc Girondot)
Date: Tue, 2 Oct 2018 15:30:11 +0200
Subject: [R] Strange result for strptime with %p
Message-ID: <76133d2f-20f0-707a-cdd2-73941115cf1d@yahoo.fr>

Dear members... are these results normal ?

For the first one, no problem. I expected this:

 > strptime("05/01/18 01:00:00 AM", format = ("%m/%d/%y %I:%M:%S %p"), 
tz="Asia/Jayapura")
[1] "2018-05-01 01:00:00 WIT"

For this one, it is ok also:

 > strptime("05/01/18 01:00:00 AM", format = ("%m/%d/%y %I:%M:%S %p"), 
tz="Asia/Jayapura")-1
[1] "2018-05-01 00:59:59 WIT"

But how to explain this ???

 > strptime("05/01/18 00:59:59 AM", format = ("%m/%d/%y %I:%M:%S %p"), 
tz="Asia/Jayapura")
[1] NA

Thanks for your advices
Marc
______________________

R 3.5.1 on MacOS 10.14

 > version
 ?????????????? _
platform?????? x86_64-apple-darwin15.6.0
arch?????????? x86_64
os???????????? darwin15.6.0
system???????? x86_64, darwin15.6.0
status
major????????? 3
minor????????? 5.1
year?????????? 2018
month????????? 07
day??????????? 02
svn rev??????? 74947
language?????? R
version.string R version 3.5.1 (2018-07-02)
nickname?????? Feather Spray



From petr@p|k@| @end|ng |rom prechez@@cz  Tue Oct  2 15:39:55 2018
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Tue, 2 Oct 2018 13:39:55 +0000
Subject: [R] Strange result for strptime with %p
In-Reply-To: <76133d2f-20f0-707a-cdd2-73941115cf1d@yahoo.fr>
References: <76133d2f-20f0-707a-cdd2-73941115cf1d@yahoo.fr>
Message-ID: <6d12217076d942f292efe0ddc191f7a3@SRVEXCHCM1301.precheza.cz>

Hi

Maybe it is connected to
%I
Hours as decimal number (01?12).

Your input has hour as 00

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Marc Girondot via
> R-help
> Sent: Tuesday, October 2, 2018 3:30 PM
> To: R-help Mailing List <r-help at r-project.org>
> Subject: [R] Strange result for strptime with %p
>
> Dear members... are these results normal ?
>
> For the first one, no problem. I expected this:
>
>  > strptime("05/01/18 01:00:00 AM", format = ("%m/%d/%y %I:%M:%S %p"),
> tz="Asia/Jayapura")
> [1] "2018-05-01 01:00:00 WIT"
>
> For this one, it is ok also:
>
>  > strptime("05/01/18 01:00:00 AM", format = ("%m/%d/%y %I:%M:%S %p"),
> tz="Asia/Jayapura")-1
> [1] "2018-05-01 00:59:59 WIT"
>
> But how to explain this ???
>
>  > strptime("05/01/18 00:59:59 AM", format = ("%m/%d/%y %I:%M:%S %p"),
> tz="Asia/Jayapura")
> [1] NA
>
> Thanks for your advices
> Marc
> ______________________
>
> R 3.5.1 on MacOS 10.14
>
>  > version
>                 _
> platform       x86_64-apple-darwin15.6.0
> arch           x86_64
> os             darwin15.6.0
> system         x86_64, darwin15.6.0
> status
> major          3
> minor          5.1
> year           2018
> month          07
> day            02
> svn rev        74947
> language       R
> version.string R version 3.5.1 (2018-07-02)
> nickname       Feather Spray
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information about processing and protection of business partner?s personal data are available on website: https://www.precheza.cz/en/personal-data-protection-principles/
D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any documents attached to it may be confidential and are subject to the legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/


From h|gh@t@t @end|ng |rom h|gh@t@t@com  Tue Oct  2 16:13:52 2018
From: h|gh@t@t @end|ng |rom h|gh@t@t@com (Highland Statistics Ltd)
Date: Tue, 2 Oct 2018 16:13:52 +0200
Subject: [R] Book: Spatial,
 Temporal and Spatial-Temporal Ecological Data Analysis with
 R-INLA. Volume II: GAM and Zero-Inflated Models
Message-ID: <41d874ff-70b9-2602-b30e-1c95d7d1be7d@highstat.com>

We are pleased to announce the following book:

Spatial, Temporal and Spatial-Temporal Ecological Data Analysis with 
R-INLA. Volume II: GAM and Zero-Inflated Models
Authors: Zuur and Ieno

Book website: www.highstat.com
Paperback or EBook can be order (exclusively) from www.highstat.com
TOC: http://highstat.com/Books/BGS/SpatialTempVII/TOC_SpatTempII_Online.pdf

Summary: In Volume II we apply zero-inflated models and generalised 
additive (mixed-effects) models to spatial and spatial-temporal data. 
Data and all R code is available.


Outline:

In Chapter 18 we will explain how to deal with zero-inflated data. We 
introduce so-called zero-inflated Poisson (ZIP) models, zero-inflated 
negative binomial (ZINB) models, zero-altered Poisson (ZAP) models and 
zero-altered negative binomial (ZINB) models.

In Chapter 19 we extend the ZIP, ZINB, ZAP and ZANB models with spatial 
correlation. Both these chapters use a skate data set from South 
America. In the appendix accompanying Chapter 19 we also explain how to 
manipulate maps and create spatial polygons (e.g. for coastlines).

In Chapter 20 we revisit a data set with which we have been battling 
since 2006. It is about begging behaviour of owl nestlings. In Zuur 
(2009a) we applied linear mixed-effects models on it, and in Zuur et al. 
(2012a) we analysed it with a zero-inflated GLMM. Thanks to R-INLA we 
finally cracked this data set and apply a zero-inflated GAMM.

In Chapter 21 we analyse sandeel count data. This work came out of a 
consultancy project that we carried out for Wageningen Marine Research 
(The Netherlands) in 2017. Although the setup of the experiment is 
simple (approximately 400 sites sampled once per year, for 4 years), 
analysing these data and writing this chapter took about 30 days. This 
should give you an idea about the complexity of the statistical tools 
(zero-inflated GAMMs + spatial-temporal correlation) that we discuss in 
this book.

Chapter 22 is about zero-inflated bird densities sampled in the Labrador 
Sea, located between the Labrador Peninsula (Eastern Canada) and 
Greenland. This chapter is about the analysis of zero-inflated 
continuous data with spatial correlation. A zero-altered gamma model 
with spatial correlation is used.

In Chapter 23 we analyse coral reef data sampled around an island. A lot 
of misery comes together in this chapter: smoothers, zero-inflation and 
spatial dependency that should not cross land as benthic species that 
live in a coral reef do not walk over land! We will discuss barrier 
models (Bakka et al. 2018) which ensure that spatial correlation seeps 
around a barrier (in this case an island).

Up to Chapter 23 all data sets analysed were geostatistical data and not 
areal or lattice data. The reason for this is that most ecological data 
is geostatistical. In Chapter 24 we analyse aggregated tornado data in 
102 counties in Illinois. This is areal data. We will use various CAR 
models (e.g. iCAR, BYM, BYM2) for zero-inflated spatial and 
spatial-temporal correlated data.


-- 

Dr. Alain F. Zuur
Highland Statistics Ltd.
9 St Clair Wynd
AB41 6DZ Newburgh, UK
Email: highstat at highstat.com
URL:   www.highstat.com

And:
NIOZ Royal Netherlands Institute for Sea Research,
Department of Coastal Systems, and Utrecht University,
P.O. Box 59, 1790 AB Den Burg,
Texel, The Netherlands



Author of:
1. Beginner's Guide to Spatial, Temporal and Spatial-Temporal Ecological Data Analysis with R-INLA. (2017).
2. Beginner's Guide to Zero-Inflated Models with R (2016).
3. Beginner's Guide to Data Exploration and Visualisation with R (2015).
4. Beginner's Guide to GAMM with R (2014).
5. Beginner's Guide to GLM and GLMM with R (2013).
6. Beginner's Guide to GAM with R (2012).
7. Zero Inflated Models and GLMM with R (2012).
8. A Beginner's Guide to R (2009).
9. Mixed effects models and extensions in ecology with R (2009).
10. Analysing Ecological Data (2007).


	[[alternative HTML version deleted]]



From pd@|gd @end|ng |rom gm@||@com  Tue Oct  2 16:14:59 2018
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Tue, 2 Oct 2018 16:14:59 +0200
Subject: [R] Strange result for strptime with %p
In-Reply-To: <6d12217076d942f292efe0ddc191f7a3@SRVEXCHCM1301.precheza.cz>
References: <76133d2f-20f0-707a-cdd2-73941115cf1d@yahoo.fr>
 <6d12217076d942f292efe0ddc191f7a3@SRVEXCHCM1301.precheza.cz>
Message-ID: <8629DDDB-3AB7-44FF-80A3-805F46D39398@gmail.com>

Nice catch, Petr:

> strptime("05/01/18 00:59:59 AM", format = ("%m/%d/%y %I:%M:%S %p"), tz="Asia/Jayapura")
[1] NA
> strptime("05/01/18 12:59:59 AM", format = ("%m/%d/%y %I:%M:%S %p"), tz="Asia/Jayapura")
[1] "2018-05-01 00:59:59 WIT"

-pd

> On 2 Oct 2018, at 15:39 , PIKAL Petr <petr.pikal at precheza.cz> wrote:
> 
> Hi
> 
> Maybe it is connected to
> %I
> Hours as decimal number (01?12).
> 
> Your input has hour as 00
> 
> Cheers
> Petr
> 
>> -----Original Message-----
>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Marc Girondot via
>> R-help
>> Sent: Tuesday, October 2, 2018 3:30 PM
>> To: R-help Mailing List <r-help at r-project.org>
>> Subject: [R] Strange result for strptime with %p
>> 
>> Dear members... are these results normal ?
>> 
>> For the first one, no problem. I expected this:
>> 
>>> strptime("05/01/18 01:00:00 AM", format = ("%m/%d/%y %I:%M:%S %p"),
>> tz="Asia/Jayapura")
>> [1] "2018-05-01 01:00:00 WIT"
>> 
>> For this one, it is ok also:
>> 
>>> strptime("05/01/18 01:00:00 AM", format = ("%m/%d/%y %I:%M:%S %p"),
>> tz="Asia/Jayapura")-1
>> [1] "2018-05-01 00:59:59 WIT"
>> 
>> But how to explain this ???
>> 
>>> strptime("05/01/18 00:59:59 AM", format = ("%m/%d/%y %I:%M:%S %p"),
>> tz="Asia/Jayapura")
>> [1] NA
>> 
>> Thanks for your advices
>> Marc
>> ______________________
>> 
>> R 3.5.1 on MacOS 10.14
>> 
>>> version
>>                _
>> platform       x86_64-apple-darwin15.6.0
>> arch           x86_64
>> os             darwin15.6.0
>> system         x86_64, darwin15.6.0
>> status
>> major          3
>> minor          5.1
>> year           2018
>> month          07
>> day            02
>> svn rev        74947
>> language       R
>> version.string R version 3.5.1 (2018-07-02)
>> nickname       Feather Spray
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information about processing and protection of business partner?s personal data are available on website: https://www.precheza.cz/en/personal-data-protection-principles/
> D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any documents attached to it may be confidential and are subject to the legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com



From petr@p|k@| @end|ng |rom prechez@@cz  Tue Oct  2 16:20:04 2018
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Tue, 2 Oct 2018 14:20:04 +0000
Subject: [R] Strange result for strptime with %p
In-Reply-To: <8629DDDB-3AB7-44FF-80A3-805F46D39398@gmail.com>
References: <76133d2f-20f0-707a-cdd2-73941115cf1d@yahoo.fr>
 <6d12217076d942f292efe0ddc191f7a3@SRVEXCHCM1301.precheza.cz>
 <8629DDDB-3AB7-44FF-80A3-805F46D39398@gmail.com>
Message-ID: <960fcbf028d248fa9262b4e73e90f06b@SRVEXCHCM1301.precheza.cz>

Hi

Credit belongs to documentation. I picked it from it.

Cheers
Petr

> -----Original Message-----
> From: peter dalgaard <pdalgd at gmail.com>
> Sent: Tuesday, October 2, 2018 4:15 PM
> To: PIKAL Petr <petr.pikal at precheza.cz>
> Cc: Marc Girondot <marc_grt at yahoo.fr>; r-help mailing list <r-help at r-
> project.org>
> Subject: Re: [R] Strange result for strptime with %p
>
> Nice catch, Petr:
>
> > strptime("05/01/18 00:59:59 AM", format = ("%m/%d/%y %I:%M:%S %p"),
> > tz="Asia/Jayapura")
> [1] NA
> > strptime("05/01/18 12:59:59 AM", format = ("%m/%d/%y %I:%M:%S %p"),
> > tz="Asia/Jayapura")
> [1] "2018-05-01 00:59:59 WIT"
>
> -pd
>
> > On 2 Oct 2018, at 15:39 , PIKAL Petr <petr.pikal at precheza.cz> wrote:
> >
> > Hi
> >
> > Maybe it is connected to
> > %I
> > Hours as decimal number (01?12).
> >
> > Your input has hour as 00
> >
> > Cheers
> > Petr
> >
> >> -----Original Message-----
> >> From: R-help <r-help-bounces at r-project.org> On Behalf Of Marc
> >> Girondot via R-help
> >> Sent: Tuesday, October 2, 2018 3:30 PM
> >> To: R-help Mailing List <r-help at r-project.org>
> >> Subject: [R] Strange result for strptime with %p
> >>
> >> Dear members... are these results normal ?
> >>
> >> For the first one, no problem. I expected this:
> >>
> >>> strptime("05/01/18 01:00:00 AM", format = ("%m/%d/%y %I:%M:%S %p"),
> >> tz="Asia/Jayapura")
> >> [1] "2018-05-01 01:00:00 WIT"
> >>
> >> For this one, it is ok also:
> >>
> >>> strptime("05/01/18 01:00:00 AM", format = ("%m/%d/%y %I:%M:%S %p"),
> >> tz="Asia/Jayapura")-1
> >> [1] "2018-05-01 00:59:59 WIT"
> >>
> >> But how to explain this ???
> >>
> >>> strptime("05/01/18 00:59:59 AM", format = ("%m/%d/%y %I:%M:%S %p"),
> >> tz="Asia/Jayapura")
> >> [1] NA
> >>
> >> Thanks for your advices
> >> Marc
> >> ______________________
> >>
> >> R 3.5.1 on MacOS 10.14
> >>
> >>> version
> >>                _
> >> platform       x86_64-apple-darwin15.6.0
> >> arch           x86_64
> >> os             darwin15.6.0
> >> system         x86_64, darwin15.6.0
> >> status
> >> major          3
> >> minor          5.1
> >> year           2018
> >> month          07
> >> day            02
> >> svn rev        74947
> >> language       R
> >> version.string R version 3.5.1 (2018-07-02)
> >> nickname       Feather Spray
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> > Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj?
> > obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na:
> > https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information
> > about processing and protection of business partner?s personal data
> > are available on website:
> > https://www.precheza.cz/en/personal-data-protection-principles/
> > D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou
> > d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en?
> > odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any
> > documents attached to it may be confidential and are subject to the
> > legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> --
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School Solbjerg Plads 3, 2000
> Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>
>
>
>
>
>
>
>

Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information about processing and protection of business partner?s personal data are available on website: https://www.precheza.cz/en/personal-data-protection-principles/
D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any documents attached to it may be confidential and are subject to the legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Tue Oct  2 17:22:02 2018
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Tue, 2 Oct 2018 16:22:02 +0100
Subject: [R] Strange result for strptime with %p
In-Reply-To: <960fcbf028d248fa9262b4e73e90f06b@SRVEXCHCM1301.precheza.cz>
References: <76133d2f-20f0-707a-cdd2-73941115cf1d@yahoo.fr>
 <6d12217076d942f292efe0ddc191f7a3@SRVEXCHCM1301.precheza.cz>
 <8629DDDB-3AB7-44FF-80A3-805F46D39398@gmail.com>
 <960fcbf028d248fa9262b4e73e90f06b@SRVEXCHCM1301.precheza.cz>
Message-ID: <0a8d8fa6-0248-d7aa-2afe-065ba7f8d4ec@sapo.pt>

Hello,

Or %H, it also works.

strptime("05/01/18 00:59:59 AM", format = ("%m/%d/%y %H:%M:%S %p"), 
tz="Asia/Jayapura")
#[1] "2018-05-01 00:59:59 WIT"


Hope this helps,

Rui Barradas

?s 15:20 de 02/10/2018, PIKAL Petr escreveu:
> Hi
> 
> Credit belongs to documentation. I picked it from it.
> 
> Cheers
> Petr
> 
>> -----Original Message-----
>> From: peter dalgaard <pdalgd at gmail.com>
>> Sent: Tuesday, October 2, 2018 4:15 PM
>> To: PIKAL Petr <petr.pikal at precheza.cz>
>> Cc: Marc Girondot <marc_grt at yahoo.fr>; r-help mailing list <r-help at r-
>> project.org>
>> Subject: Re: [R] Strange result for strptime with %p
>>
>> Nice catch, Petr:
>>
>>> strptime("05/01/18 00:59:59 AM", format = ("%m/%d/%y %I:%M:%S %p"),
>>> tz="Asia/Jayapura")
>> [1] NA
>>> strptime("05/01/18 12:59:59 AM", format = ("%m/%d/%y %I:%M:%S %p"),
>>> tz="Asia/Jayapura")
>> [1] "2018-05-01 00:59:59 WIT"
>>
>> -pd
>>
>>> On 2 Oct 2018, at 15:39 , PIKAL Petr <petr.pikal at precheza.cz> wrote:
>>>
>>> Hi
>>>
>>> Maybe it is connected to
>>> %I
>>> Hours as decimal number (01?12).
>>>
>>> Your input has hour as 00
>>>
>>> Cheers
>>> Petr
>>>
>>>> -----Original Message-----
>>>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Marc
>>>> Girondot via R-help
>>>> Sent: Tuesday, October 2, 2018 3:30 PM
>>>> To: R-help Mailing List <r-help at r-project.org>
>>>> Subject: [R] Strange result for strptime with %p
>>>>
>>>> Dear members... are these results normal ?
>>>>
>>>> For the first one, no problem. I expected this:
>>>>
>>>>> strptime("05/01/18 01:00:00 AM", format = ("%m/%d/%y %I:%M:%S %p"),
>>>> tz="Asia/Jayapura")
>>>> [1] "2018-05-01 01:00:00 WIT"
>>>>
>>>> For this one, it is ok also:
>>>>
>>>>> strptime("05/01/18 01:00:00 AM", format = ("%m/%d/%y %I:%M:%S %p"),
>>>> tz="Asia/Jayapura")-1
>>>> [1] "2018-05-01 00:59:59 WIT"
>>>>
>>>> But how to explain this ???
>>>>
>>>>> strptime("05/01/18 00:59:59 AM", format = ("%m/%d/%y %I:%M:%S %p"),
>>>> tz="Asia/Jayapura")
>>>> [1] NA
>>>>
>>>> Thanks for your advices
>>>> Marc
>>>> ______________________
>>>>
>>>> R 3.5.1 on MacOS 10.14
>>>>
>>>>> version
>>>>                 _
>>>> platform       x86_64-apple-darwin15.6.0
>>>> arch           x86_64
>>>> os             darwin15.6.0
>>>> system         x86_64, darwin15.6.0
>>>> status
>>>> major          3
>>>> minor          5.1
>>>> year           2018
>>>> month          07
>>>> day            02
>>>> svn rev        74947
>>>> language       R
>>>> version.string R version 3.5.1 (2018-07-02)
>>>> nickname       Feather Spray
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>> Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj?
>>> obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na:
>>> https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information
>>> about processing and protection of business partner?s personal data
>>> are available on website:
>>> https://www.precheza.cz/en/personal-data-protection-principles/
>>> D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou
>>> d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en?
>>> odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any
>>> documents attached to it may be confidential and are subject to the
>>> legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>> --
>> Peter Dalgaard, Professor,
>> Center for Statistics, Copenhagen Business School Solbjerg Plads 3, 2000
>> Frederiksberg, Denmark
>> Phone: (+45)38153501
>> Office: A 4.23
>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>>
>>
>>
>>
>>
>>
>>
>>
> 
> Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information about processing and protection of business partner?s personal data are available on website: https://www.precheza.cz/en/personal-data-protection-principles/
> D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any documents attached to it may be confidential and are subject to the legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>



From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Oct  2 17:55:35 2018
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 02 Oct 2018 08:55:35 -0700
Subject: [R] Strange result for strptime with %p
In-Reply-To: <0a8d8fa6-0248-d7aa-2afe-065ba7f8d4ec@sapo.pt>
References: <76133d2f-20f0-707a-cdd2-73941115cf1d@yahoo.fr>
 <6d12217076d942f292efe0ddc191f7a3@SRVEXCHCM1301.precheza.cz>
 <8629DDDB-3AB7-44FF-80A3-805F46D39398@gmail.com>
 <960fcbf028d248fa9262b4e73e90f06b@SRVEXCHCM1301.precheza.cz>
 <0a8d8fa6-0248-d7aa-2afe-065ba7f8d4ec@sapo.pt>
Message-ID: <977DBE46-CB88-461B-9280-0589B56B5D33@dcn.davis.ca.us>

... except that the %p is ignored or generates an error (implementation-dependent) if you use %H, so this may only address a few of the values you are processing and then only on some platforms.

On October 2, 2018 8:22:02 AM PDT, Rui Barradas <ruipbarradas at sapo.pt> wrote:
>Hello,
>
>Or %H, it also works.
>
>strptime("05/01/18 00:59:59 AM", format = ("%m/%d/%y %H:%M:%S %p"), 
>tz="Asia/Jayapura")
>#[1] "2018-05-01 00:59:59 WIT"
>
>
>Hope this helps,
>
>Rui Barradas
>
>?s 15:20 de 02/10/2018, PIKAL Petr escreveu:
>> Hi
>> 
>> Credit belongs to documentation. I picked it from it.
>> 
>> Cheers
>> Petr
>> 
>>> -----Original Message-----
>>> From: peter dalgaard <pdalgd at gmail.com>
>>> Sent: Tuesday, October 2, 2018 4:15 PM
>>> To: PIKAL Petr <petr.pikal at precheza.cz>
>>> Cc: Marc Girondot <marc_grt at yahoo.fr>; r-help mailing list
><r-help at r-
>>> project.org>
>>> Subject: Re: [R] Strange result for strptime with %p
>>>
>>> Nice catch, Petr:
>>>
>>>> strptime("05/01/18 00:59:59 AM", format = ("%m/%d/%y %I:%M:%S %p"),
>>>> tz="Asia/Jayapura")
>>> [1] NA
>>>> strptime("05/01/18 12:59:59 AM", format = ("%m/%d/%y %I:%M:%S %p"),
>>>> tz="Asia/Jayapura")
>>> [1] "2018-05-01 00:59:59 WIT"
>>>
>>> -pd
>>>
>>>> On 2 Oct 2018, at 15:39 , PIKAL Petr <petr.pikal at precheza.cz>
>wrote:
>>>>
>>>> Hi
>>>>
>>>> Maybe it is connected to
>>>> %I
>>>> Hours as decimal number (01?12).
>>>>
>>>> Your input has hour as 00
>>>>
>>>> Cheers
>>>> Petr
>>>>
>>>>> -----Original Message-----
>>>>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Marc
>>>>> Girondot via R-help
>>>>> Sent: Tuesday, October 2, 2018 3:30 PM
>>>>> To: R-help Mailing List <r-help at r-project.org>
>>>>> Subject: [R] Strange result for strptime with %p
>>>>>
>>>>> Dear members... are these results normal ?
>>>>>
>>>>> For the first one, no problem. I expected this:
>>>>>
>>>>>> strptime("05/01/18 01:00:00 AM", format = ("%m/%d/%y %I:%M:%S
>%p"),
>>>>> tz="Asia/Jayapura")
>>>>> [1] "2018-05-01 01:00:00 WIT"
>>>>>
>>>>> For this one, it is ok also:
>>>>>
>>>>>> strptime("05/01/18 01:00:00 AM", format = ("%m/%d/%y %I:%M:%S
>%p"),
>>>>> tz="Asia/Jayapura")-1
>>>>> [1] "2018-05-01 00:59:59 WIT"
>>>>>
>>>>> But how to explain this ???
>>>>>
>>>>>> strptime("05/01/18 00:59:59 AM", format = ("%m/%d/%y %I:%M:%S
>%p"),
>>>>> tz="Asia/Jayapura")
>>>>> [1] NA
>>>>>
>>>>> Thanks for your advices
>>>>> Marc
>>>>> ______________________
>>>>>
>>>>> R 3.5.1 on MacOS 10.14
>>>>>
>>>>>> version
>>>>>                 _
>>>>> platform       x86_64-apple-darwin15.6.0
>>>>> arch           x86_64
>>>>> os             darwin15.6.0
>>>>> system         x86_64, darwin15.6.0
>>>>> status
>>>>> major          3
>>>>> minor          5.1
>>>>> year           2018
>>>>> month          07
>>>>> day            02
>>>>> svn rev        74947
>>>>> language       R
>>>>> version.string R version 3.5.1 (2018-07-02)
>>>>> nickname       Feather Spray
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide
>>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>> Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj?
>>>> obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na:
>>>> https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ |
>Information
>>>> about processing and protection of business partner?s personal data
>>>> are available on website:
>>>> https://www.precheza.cz/en/personal-data-protection-principles/
>>>> D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou
>>>> d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en?
>>>> odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and
>any
>>>> documents attached to it may be confidential and are subject to the
>>>> legally binding disclaimer:
>https://www.precheza.cz/en/01-disclaimer/
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>> --
>>> Peter Dalgaard, Professor,
>>> Center for Statistics, Copenhagen Business School Solbjerg Plads 3,
>2000
>>> Frederiksberg, Denmark
>>> Phone: (+45)38153501
>>> Office: A 4.23
>>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>> 
>> Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj?
>obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na:
>https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information
>about processing and protection of business partner?s personal data are
>available on website:
>https://www.precheza.cz/en/personal-data-protection-principles/
>> D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou
>d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en?
>odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any
>documents attached to it may be confidential and are subject to the
>legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.



From oy@te|n@@oren@en@1985 @end|ng |rom gm@||@com  Tue Oct  2 14:48:52 2018
From: oy@te|n@@oren@en@1985 @end|ng |rom gm@||@com (=?UTF-8?B?w5h5c3RlaW4gU8O4cmVuc2Vu?=)
Date: Tue, 2 Oct 2018 14:48:52 +0200
Subject: [R] Why do two different calls to mgcv::gamm give different
 p-values?
In-Reply-To: <649ac7fe-39e4-1282-b305-d59451139a16@bath.edu>
References: <CAEWpFgchTan5_nOs=F07DhQpZAd+GDcG3AUKNtxC4QGbEcm9bQ@mail.gmail.com>
 <649ac7fe-39e4-1282-b305-d59451139a16@bath.edu>
Message-ID: <CAEWpFgdhSf_KFd5A3jau7z+OuNgrVfszOc_hLyAnVJXHBtRocA@mail.gmail.com>

Thanks a lot, Simon. That was a silly mistake on my part. After correcting,
there is still a slight difference between the p-values, but this is so
small that I guess it is just numerics.

Best,
?ystein

On Tue, Oct 2, 2018 at 2:26 PM Simon Wood <simon.wood at bath.edu> wrote:

> Dear ?ystein,
>
> In your code 'id' is set up to be numeric. In your first gamm call it
> gets coerced to a factor (since nothing else would make sense). In  your
> second gamm call it is simply treated as numeric, since that could makes
> sense. To make the two models equivalent you just need to substitute:
>
> id <- as.factor(rep(1:ng, n/ng))
>
> into your loop.
>
> best,
> Simon
>
> On 01/10/18 08:15, ?ystein S?rensen wrote:
> > I have longitudinal data where a response y_{ij} has been measured
> > repeatedly for i=1,...,n individuals, j=1,...,m times for each
> individual.
> > Let x_{ij} be the age of individual i at her/his jth measurement. I wish
> to
> > see how the response varies with age, and have reason to believe that a
> > nonlinear fit is needed. I hence wish to model the relationship using an
> > additive mixed model of the form y_{ij} = f(x_{ij}) + b_{i} +
> > \epsilon_{ij}, where f() is some smooth function to be estimated, b_{i}
> > \sim N(0, \sigma_{b}^{2}) is the random effect for individual i,
> > \epsilon_{ij} \sim N(0, \sigma^{2}) is the residual.
> >
> > Reading the documentation to the mgcv package, I see that such models can
> > be set up by calling the mgcv::gamm two different ways. One way shown to
> > set up such a model is with the call
> > b1 <- gamm(y ~ s(x), random = list(id =~ 1)),
> > where id is an indicator of the specific individual. In this way, the
> > random effect is specified in a list. The other way is to set up the
> random
> > effect with a smooth of the re:
> > b2 <- gamm(y ~ s(x) + s(id, bs = "re")).
> >
> > As far as I can understand, these two setups should create the same
> > underlying model matrices. However, when running them on my data, the
> > p-values for the smooth terms, as well as their estimated degrees of
> > freedom, are different.
> >
> > Below is a reproducible example on simulated data, which show that these
> > two types of specifying the models give different p-values and estimated
> > degrees of freedom. On my real data, these differences are sometimes even
> > more exaggerated.
> >
> > My question is: Are not these two calls to gamm suppose to estimate the
> > same model, or have I misunderstood?
> >
> > Here is a reproducible example:
> >
> > library(mgcv)
> > set.seed(100)
> > n_sim <- 100
> > df <- data.frame(
> >    model1_pval = numeric(n_sim),
> >    model1_edf = numeric(n_sim),
> >    model2_pval = numeric(n_sim),
> >    model2_edf = numeric(n_sim)
> > )
> >
> > # Number of observations
> > n <- 500
> > # Number of groups
> > ng <- 100
> >
> > for(i in 1:n_sim){
> >    # Draw the fixed effect covariate
> >    x <- rnorm(n)
> >    # Set up the group
> >    id <- rep(1:ng, n/ng)
> >    # Draw the random effect
> >    z <- rnorm(ng)
> >    # Draw the response
> >    y <- 0.1 * x + 0.2 * x^3 + z[id] + rnorm(n)
> >
> >    # Fit the two different models
> >    b1 <- gamm(y ~ s(x, k = 5), random = list(id =~ 1))
> >    b2 <- gamm(y ~ s(x, k = 5) + s(id, bs = "re"))
> >
> >    df[i, "model1_pval"] <- anova(b1$gam)$s.pv
> >    df[i, "model1_edf"] <- anova(b1$gam)$edf
> >    df[i, "model2_pval"] <- anova(b2$gam)$s.pv[[1]]
> >    df[i, "model2_edf"] <- anova(b2$gam)$edf[[1]]
> > }
> >
> > # Differences between model 1 and model 2 p values
> > mean(df$model1_pval)
> > #> [1] 6.790546e-21
> > mean(df$model2_pval)
> > #> [1] 3.090694e-14
> > max(abs(df$model1_pval - df$model2_pval))
> > #> [1] 2.770545e-12
> >
> > # Differences between model1 and model 2 estimated degrees of freedom
> > mean(df$model1_edf)
> > #> [1] 3.829992
> > mean(df$model2_edf)
> > #> [1] 3.731438
> > max(abs(df$model1_edf - df$model2_edf))
> > #> [1] 0.6320281
> >
> >
> > Thanks in advance,
> > ?ystein S?rensen
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
>

	[[alternative HTML version deleted]]



From |cwp|eter@ @end|ng |rom gm@||@com  Tue Oct  2 16:33:40 2018
From: |cwp|eter@ @end|ng |rom gm@||@com (Ivy Pieters)
Date: Tue, 2 Oct 2018 16:33:40 +0200
Subject: [R] Sp-package overlay
Message-ID: <918BE55E-111A-4A84-BAD3-D18EA16DACDD@gmail.com>

Hey there, 

For my internship I have to work with R. I am working with R for the first
time and I don't know much. 
Somehow I don't manage to find the answer to my question in google. I think
I don't search with the right words, or maybe I just don't understand
enough. Anyways, I hope someone here can help me out. 

I have 2 datasets: 

a SpatialPolygonDataFrame, this dataset is called "field" (these are
different fields of arable land) 
and a SpatialPointsDataFrame, this dataset is called "odk" (these are
different soil samples taken in each field) 

The field data set consists of 8 polygons and they have a slot with coords 

The odk data set consists of 537 features (soil samples), these features
belong to the polygons but they are all mixed. This dataset also has a slot
with coords 

They are both projected in the same coordinate system. 

Now I would like to create a new dataset with a table with the features of
odk that belong to polygon 1 and a separate table for the features that
belong to polygon 2 etc. The best is if they also get into the
spatialpointsdataframe format. 

I really don't know how to do this. I hope someone here can help me out. I
hope that I gave enough information for anyone to help me else let me know
if I have to tell something more about my datasets. 

Thank you already a lot in advance, 

Hope to hear from anyone soon, 

Kind regards, 

Ivy



From @tyen @end|ng |rom ntu@edu@tw  Tue Oct  2 18:25:43 2018
From: @tyen @end|ng |rom ntu@edu@tw (Steven Yen)
Date: Wed, 3 Oct 2018 00:25:43 +0800
Subject: [R] Polygon
Message-ID: <fcc9c821-50bf-7c7a-4e8f-e4859f7deb78@ntu.edu.tw>

Can someone help me with polygon. The following codes are self-runnable 
and mark a shaded area under the standard normal curve in the x-range 
(-3,-1).
Is there a way to also mark the area in (1,3), at the same time.
That is, I want shaded areas in both tails. Thank you...

===
# Create data for the area to shade
cord.x <- c(-3,seq(-3,-1,0.01),-1)
cord.y <- c(0,dnorm(seq(-3,-1,0.01)),0)

# Make a curve
curve(dnorm(x,0,1), xlim=c(-3,3), main='Standard Normal')

# Add the shaded area.
polygon(cord.x,cord.y,col='skyblue')

-- 
styen at ntu.edu.tw (S.T. Yen)


	[[alternative HTML version deleted]]



From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Tue Oct  2 18:51:35 2018
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Tue, 2 Oct 2018 17:51:35 +0100
Subject: [R] Polygon
In-Reply-To: <fcc9c821-50bf-7c7a-4e8f-e4859f7deb78@ntu.edu.tw>
References: <fcc9c821-50bf-7c7a-4e8f-e4859f7deb78@ntu.edu.tw>
Message-ID: <0d7bc6e1-2d8e-f3f9-d685-2c1e5a001a20@sapo.pt>

Hello,

Continue with


polygon(-rev(cord.x), rev(cord.y), col = 'skyblue')


Hope this helps,

Rui Barradas

?s 17:25 de 02/10/2018, Steven Yen escreveu:
> Can someone help me with polygon. The following codes are self-runnable
> and mark a shaded area under the standard normal curve in the x-range
> (-3,-1).
> Is there a way to also mark the area in (1,3), at the same time.
> That is, I want shaded areas in both tails. Thank you...
> 
> ===
> # Create data for the area to shade
> cord.x <- c(-3,seq(-3,-1,0.01),-1)
> cord.y <- c(0,dnorm(seq(-3,-1,0.01)),0)
> 
> # Make a curve
> curve(dnorm(x,0,1), xlim=c(-3,3), main='Standard Normal')
> 
> # Add the shaded area.
> polygon(cord.x,cord.y,col='skyblue')
>



From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Oct  2 18:55:31 2018
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 2 Oct 2018 16:55:31 +0000
Subject: [R] inconsistency in progress bar......
Message-ID: <SL2P216MB0091C7C425F547AB6EF00E48C8E80@SL2P216MB0091.KORP216.PROD.OUTLOOK.COM>

dear members,
                            I am using the function "pbmclapply" in the pbmcapply package to track the progress of mclapply function in my own function.

For some run of pbmclapply function, the progress bar stopped at  92% and 88%., but nevertheless continued to the next piece of the code. I encountered about 4 to 5 instances of this happenstance....but the main function in which pbmclapply was used completed succesfully...

Is this a cause for concern? Should I recheck my code?

very many thanks for your time and effort...
yours sincerely,
AKSHAY M KULKARNI

	[[alternative HTML version deleted]]



From dw|n@em|u@ @end|ng |rom comc@@t@net  Tue Oct  2 19:11:17 2018
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Tue, 2 Oct 2018 10:11:17 -0700
Subject: [R] Strange result for strptime with %p
In-Reply-To: <76133d2f-20f0-707a-cdd2-73941115cf1d@yahoo.fr>
References: <76133d2f-20f0-707a-cdd2-73941115cf1d@yahoo.fr>
Message-ID: <EED62BB4-4C4C-44D2-A162-B1C6A583F6B1@comcast.net>


> On Oct 2, 2018, at 6:30 AM, Marc Girondot via R-help <r-help at r-project.org> wrote:
> 
> Dear members... are these results normal ?
> 
> For the first one, no problem. I expected this:
> 
> > strptime("05/01/18 01:00:00 AM", format = ("%m/%d/%y %I:%M:%S %p"), tz="Asia/Jayapura")
> [1] "2018-05-01 01:00:00 WIT"
> 
> For this one, it is ok also:
> 
> > strptime("05/01/18 01:00:00 AM", format = ("%m/%d/%y %I:%M:%S %p"), tz="Asia/Jayapura")-1
> [1] "2018-05-01 00:59:59 WIT"
> 
> But how to explain this ???
> 
> > strptime("05/01/18 00:59:59 AM", format = ("%m/%d/%y %I:%M:%S %p"), tz="Asia/Jayapura")
> [1] NA

I'm afraid this is "as documented":

%I
Hours as decimal number (01?12).

I see no reason not to use "%H"

-- 
David.
> 
> Thanks for your advices
> Marc
> ______________________
> 
> R 3.5.1 on MacOS 10.14
> 
> > version
>                _
> platform       x86_64-apple-darwin15.6.0
> arch           x86_64
> os             darwin15.6.0
> system         x86_64, darwin15.6.0
> status
> major          3
> minor          5.1
> year           2018
> month          07
> day            02
> svn rev        74947
> language       R
> version.string R version 3.5.1 (2018-07-02)
> nickname       Feather Spray
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

David Winsemius
Alameda, CA, USA

'Any technology distinguishable from magic is insufficiently advanced.'   -Gehm's Corollary to Clarke's Third Law



From btupper @end|ng |rom b|ge|ow@org  Tue Oct  2 22:41:11 2018
From: btupper @end|ng |rom b|ge|ow@org (Ben Tupper)
Date: Tue, 2 Oct 2018 16:41:11 -0400
Subject: [R] Sp-package overlay
In-Reply-To: <918BE55E-111A-4A84-BAD3-D18EA16DACDD@gmail.com>
References: <918BE55E-111A-4A84-BAD3-D18EA16DACDD@gmail.com>
Message-ID: <BFC0F8A6-51E7-4F35-8546-88D3271B5E42@bigelow.org>

Hi,

I'm pretty sure that what you ask is likely not too hard to do.  On the other hand, I think you will do well to consider the following...

1. Join the mailing list; the folks there will know better what you are trying to do - see

https://stat.ethz.ch/mailman/listinfo/r-sig-geo <https://stat.ethz.ch/mailman/listinfo/r-sig-geo>


2. Switch from the sf package to the sf package if you can - see  

https://cran.r-project.org/web/packages/sf/


3. Come up to speed with geospatial data handling in R starting here 

https://geocompr.robinlovelace.net/index.html


Cheers,
Ben


> On Oct 2, 2018, at 10:33 AM, Ivy Pieters <icwpieters at gmail.com> wrote:
> 
> Hey there, 
> 
> For my internship I have to work with R. I am working with R for the first
> time and I don't know much. 
> Somehow I don't manage to find the answer to my question in google. I think
> I don't search with the right words, or maybe I just don't understand
> enough. Anyways, I hope someone here can help me out. 
> 
> I have 2 datasets: 
> 
> a SpatialPolygonDataFrame, this dataset is called "field" (these are
> different fields of arable land) 
> and a SpatialPointsDataFrame, this dataset is called "odk" (these are
> different soil samples taken in each field) 
> 
> The field data set consists of 8 polygons and they have a slot with coords 
> 
> The odk data set consists of 537 features (soil samples), these features
> belong to the polygons but they are all mixed. This dataset also has a slot
> with coords 
> 
> They are both projected in the same coordinate system. 
> 
> Now I would like to create a new dataset with a table with the features of
> odk that belong to polygon 1 and a separate table for the features that
> belong to polygon 2 etc. The best is if they also get into the
> spatialpointsdataframe format. 
> 
> I really don't know how to do this. I hope someone here can help me out. I
> hope that I gave enough information for anyone to help me else let me know
> if I have to tell something more about my datasets. 
> 
> Thank you already a lot in advance, 
> 
> Hope to hear from anyone soon, 
> 
> Kind regards, 
> 
> Ivy
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

Ben Tupper
Bigelow Laboratory for Ocean Sciences
60 Bigelow Drive, P.O. Box 380
East Boothbay, Maine 04544
http://www.bigelow.org

Ecological Forecasting: https://eco.bigelow.org/






	[[alternative HTML version deleted]]



From dw|n@em|u@ @end|ng |rom comc@@t@net  Wed Oct  3 01:23:44 2018
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Tue, 2 Oct 2018 16:23:44 -0700
Subject: [R] Strange result for strptime with %p
In-Reply-To: <EED62BB4-4C4C-44D2-A162-B1C6A583F6B1@comcast.net>
References: <76133d2f-20f0-707a-cdd2-73941115cf1d@yahoo.fr>
 <EED62BB4-4C4C-44D2-A162-B1C6A583F6B1@comcast.net>
Message-ID: <7734993C-175E-4D5F-BDD5-1AB4582DD1D2@comcast.net>


> On Oct 2, 2018, at 10:11 AM, David Winsemius <dwinsemius at comcast.net> wrote:
> 
> 
>> On Oct 2, 2018, at 6:30 AM, Marc Girondot via R-help <r-help at r-project.org> wrote:
>> 
>> Dear members... are these results normal ?
>> 
>> For the first one, no problem. I expected this:
>> 
>>> strptime("05/01/18 01:00:00 AM", format = ("%m/%d/%y %I:%M:%S %p"), tz="Asia/Jayapura")
>> [1] "2018-05-01 01:00:00 WIT"
>> 
>> For this one, it is ok also:
>> 
>>> strptime("05/01/18 01:00:00 AM", format = ("%m/%d/%y %I:%M:%S %p"), tz="Asia/Jayapura")-1
>> [1] "2018-05-01 00:59:59 WIT"
>> 
>> But how to explain this ???
>> 
>>> strptime("05/01/18 00:59:59 AM", format = ("%m/%d/%y %I:%M:%S %p"), tz="Asia/Jayapura")
>> [1] NA
> 
> I'm afraid this is "as documented":
> 
> %I
> Hours as decimal number (01?12).
> 
> I see no reason not to use "%H"

If you need to use %I and %p then you may need to pre-process with sub(" 00", " 12", object_name)

 strptime("05/01/18 12:59:59 AM", format = ("%m/%d/%y %I:%M:%S %p"), tz="Asia/Jayapura")
[1] "2018-05-01 00:59:59 WIT"


> 
> -- 
> David.
>> 
>> Thanks for your advices
>> Marc
>> ______________________
>> 
>> R 3.5.1 on MacOS 10.14
>> 
>>> version
>>               _
>> platform       x86_64-apple-darwin15.6.0
>> arch           x86_64
>> os             darwin15.6.0
>> system         x86_64, darwin15.6.0
>> status
>> major          3
>> minor          5.1
>> year           2018
>> month          07
>> day            02
>> svn rev        74947
>> language       R
>> version.string R version 3.5.1 (2018-07-02)
>> nickname       Feather Spray
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> David Winsemius
> Alameda, CA, USA
> 
> 'Any technology distinguishable from magic is insufficiently advanced.'   -Gehm's Corollary to Clarke's Third Law
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

David Winsemius
Alameda, CA, USA

'Any technology distinguishable from magic is insufficiently advanced.'   -Gehm's Corollary to Clarke's Third Law



From @tyen @end|ng |rom ntu@edu@tw  Wed Oct  3 02:50:48 2018
From: @tyen @end|ng |rom ntu@edu@tw (Steven Yen)
Date: Wed, 3 Oct 2018 08:50:48 +0800
Subject: [R] Polygon
In-Reply-To: <0d7bc6e1-2d8e-f3f9-d685-2c1e5a001a20@sapo.pt>
References: <fcc9c821-50bf-7c7a-4e8f-e4859f7deb78@ntu.edu.tw>
 <0d7bc6e1-2d8e-f3f9-d685-2c1e5a001a20@sapo.pt>
Message-ID: <9ac5812e-5539-9d6a-6396-a2ec225f257b@ntu.edu.tw>

Great. Thanks! It did wonders.
1. Is there a way to suppress the obvious tick stops (-3,-2,-1,0,1,2,3) 
and mark only the ticks -1.96 and 1.96.
2. Better yet, to draw vertical lines at x = -1.96 and x = 1.96.
Thanks.
Steven

On 10/3/2018 12:51 AM, Rui Barradas wrote:
> Hello,
>
> Continue with
>
>
> polygon(-rev(cord.x), rev(cord.y), col = 'skyblue')
>
>
> Hope this helps,
>
> Rui Barradas
>
> ?s 17:25 de 02/10/2018, Steven Yen escreveu:
>> Can someone help me with polygon. The following codes are self-runnable
>> and mark a shaded area under the standard normal curve in the x-range
>> (-3,-1).
>> Is there a way to also mark the area in (1,3), at the same time.
>> That is, I want shaded areas in both tails. Thank you...
>>
>> ===
>> # Create data for the area to shade
>> cord.x <- c(-3,seq(-3,-1,0.01),-1)
>> cord.y <- c(0,dnorm(seq(-3,-1,0.01)),0)
>>
>> # Make a curve
>> curve(dnorm(x,0,1), xlim=c(-3,3), main='Standard Normal')
>>
>> # Add the shaded area.
>> polygon(cord.x,cord.y,col='skyblue')
>>
>

-- 
styen at ntu.edu.tw (S.T. Yen)


	[[alternative HTML version deleted]]



From dw|n@em|u@ @end|ng |rom comc@@t@net  Wed Oct  3 03:39:22 2018
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Tue, 2 Oct 2018 18:39:22 -0700
Subject: [R] Polygon
In-Reply-To: <9ac5812e-5539-9d6a-6396-a2ec225f257b@ntu.edu.tw>
References: <fcc9c821-50bf-7c7a-4e8f-e4859f7deb78@ntu.edu.tw>
 <0d7bc6e1-2d8e-f3f9-d685-2c1e5a001a20@sapo.pt>
 <9ac5812e-5539-9d6a-6396-a2ec225f257b@ntu.edu.tw>
Message-ID: <EFF7563D-00B0-4DB8-BC1B-5B0A7FBBE113@comcast.net>


> On Oct 2, 2018, at 5:50 PM, Steven Yen <styen at ntu.edu.tw> wrote:
> 
> Great. Thanks! It did wonders.
> 1. Is there a way to suppress the obvious tick stops (-3,-2,-1,0,1,2,3) 
> and mark only the ticks -1.96 and 1.96.
> 2. Better yet, to draw vertical lines at x = -1.96 and x = 1.96.
> Thanks.

Read ?plot.default

Then add xaxt="n" to the arguments to curve, ... and afterwards:

axis( 1, at=c(-1.96, 1.96),lab=c(-1.96, 1.96) )
abline( v= c(-1.96, 1.96) )

--
> Steven
> 
> On 10/3/2018 12:51 AM, Rui Barradas wrote:
>> Hello,
>> 
>> Continue with
>> 
>> 
>> polygon(-rev(cord.x), rev(cord.y), col = 'skyblue')
>> 
>> 
>> Hope this helps,
>> 
>> Rui Barradas
>> 
>> ?s 17:25 de 02/10/2018, Steven Yen escreveu:
>>> Can someone help me with polygon. The following codes are self-runnable
>>> and mark a shaded area under the standard normal curve in the x-range
>>> (-3,-1).
>>> Is there a way to also mark the area in (1,3), at the same time.
>>> That is, I want shaded areas in both tails. Thank you...
>>> 
>>> ===
>>> # Create data for the area to shade
>>> cord.x <- c(-3,seq(-3,-1,0.01),-1)
>>> cord.y <- c(0,dnorm(seq(-3,-1,0.01)),0)
>>> 
>>> # Make a curve
>>> curve(dnorm(x,0,1), xlim=c(-3,3), main='Standard Normal')
>>> 
>>> # Add the shaded area.
>>> polygon(cord.x,cord.y,col='skyblue')
>>> 
>> 
> 
> -- 
> styen at ntu.edu.tw (S.T. Yen)
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

David Winsemius
Alameda, CA, USA

'Any technology distinguishable from magic is insufficiently advanced.'   -Gehm's Corollary to Clarke's Third Law



From @tyen @end|ng |rom ntu@edu@tw  Wed Oct  3 03:50:07 2018
From: @tyen @end|ng |rom ntu@edu@tw (Steven Yen)
Date: Wed, 3 Oct 2018 09:50:07 +0800
Subject: [R] Polygon
In-Reply-To: <EFF7563D-00B0-4DB8-BC1B-5B0A7FBBE113@comcast.net>
References: <fcc9c821-50bf-7c7a-4e8f-e4859f7deb78@ntu.edu.tw>
 <0d7bc6e1-2d8e-f3f9-d685-2c1e5a001a20@sapo.pt>
 <9ac5812e-5539-9d6a-6396-a2ec225f257b@ntu.edu.tw>
 <EFF7563D-00B0-4DB8-BC1B-5B0A7FBBE113@comcast.net>
Message-ID: <3898bda2-5073-8dd4-266b-4751d5d00c6c@ntu.edu.tw>

Thanks!!! It did wonders.
Steven

On 10/3/2018 9:39 AM, David Winsemius wrote:
>> On Oct 2, 2018, at 5:50 PM, Steven Yen <styen at ntu.edu.tw> wrote:
>>
>> Great. Thanks! It did wonders.
>> 1. Is there a way to suppress the obvious tick stops (-3,-2,-1,0,1,2,3)
>> and mark only the ticks -1.96 and 1.96.
>> 2. Better yet, to draw vertical lines at x = -1.96 and x = 1.96.
>> Thanks.
> Read ?plot.default
>
> Then add xaxt="n" to the arguments to curve, ... and afterwards:
>
> axis( 1, at=c(-1.96, 1.96),lab=c(-1.96, 1.96) )
> abline( v= c(-1.96, 1.96) )
>
> --
>> Steven
>>
>> On 10/3/2018 12:51 AM, Rui Barradas wrote:
>>> Hello,
>>>
>>> Continue with
>>>
>>>
>>> polygon(-rev(cord.x), rev(cord.y), col = 'skyblue')
>>>
>>>
>>> Hope this helps,
>>>
>>> Rui Barradas
>>>
>>> ?s 17:25 de 02/10/2018, Steven Yen escreveu:
>>>> Can someone help me with polygon. The following codes are self-runnable
>>>> and mark a shaded area under the standard normal curve in the x-range
>>>> (-3,-1).
>>>> Is there a way to also mark the area in (1,3), at the same time.
>>>> That is, I want shaded areas in both tails. Thank you...
>>>>
>>>> ===
>>>> # Create data for the area to shade
>>>> cord.x <- c(-3,seq(-3,-1,0.01),-1)
>>>> cord.y <- c(0,dnorm(seq(-3,-1,0.01)),0)
>>>>
>>>> # Make a curve
>>>> curve(dnorm(x,0,1), xlim=c(-3,3), main='Standard Normal')
>>>>
>>>> # Add the shaded area.
>>>> polygon(cord.x,cord.y,col='skyblue')
>>>>
>> -- 
>> styen at ntu.edu.tw (S.T. Yen)
>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> David Winsemius
> Alameda, CA, USA
>
> 'Any technology distinguishable from magic is insufficiently advanced.'   -Gehm's Corollary to Clarke's Third Law
>
>
>
>
>
>

-- 
styen at ntu.edu.tw (S.T. Yen)


	[[alternative HTML version deleted]]



From r@nj@nm@no167 @end|ng |rom gm@||@com  Wed Oct  3 12:05:18 2018
From: r@nj@nm@no167 @end|ng |rom gm@||@com (Manoranjan Muthusamy)
Date: Wed, 3 Oct 2018 11:05:18 +0100
Subject: [R] R - Reading a horizontally arranged csv file,
 replacing values and saving again
In-Reply-To: <CAF8bMcZ3gid0Zb0_e7eTG67XeH7tj0eZw5Hh79m0v=v44gLDcg@mail.gmail.com>
References: <CANqyHbTC9JF4JQRKOu2YeiL43V3VpTWCA4-tnXpXDYack0d94g@mail.gmail.com>
 <CAF8bMcZ3gid0Zb0_e7eTG67XeH7tj0eZw5Hh79m0v=v44gLDcg@mail.gmail.com>
Message-ID: <CANqyHbS5OupmnRi47fON7krzxMYiYy1o+pLeD2D+3zb9+QQ15w@mail.gmail.com>

Thanks for the short but informative answer, Bill. But still, each row has
four columns..right? Although the *NA* is replaced by a blank cell,
because of the extra comma it still is a four column row. Is there any way
to avoid/remove the extra comma when NA is replaced which will make it a
three column row?



On Mon, Oct 1, 2018 at 4:56 PM William Dunlap <wdunlap at tibco.com> wrote:

> Read the help file for write.table
>    ?write.table
> and look at the descriptions of its arguments.
>   > df <- data.frame(Text=c("Abe","Ben",NA,"David"), Age=c(19, NA, 12, 10))
>   > write.table(file=stdout(), t(df), sep=",")
>   "V1","V2","V3","V4"
>   "Text","Abe","Ben",NA,"David"
>   "Age","19",NA,"12","10"
>   > write.table(file=stdout(), t(df), quote=FALSE, na="", sep=",")
>   V1,V2,V3,V4
>   Text,Abe,Ben,,David
>   Age,19,,12,10
>
>
>
>
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
>
> On Mon, Oct 1, 2018 at 2:24 AM, Manoranjan Muthusamy <
> ranjanmano167 at gmail.com> wrote:
>
>> I have a horizontally arranged CSV file
>> <https://www.dropbox.com/s/0ukyuifvpq1olqk/samplefile.csv?dl=0> (
>> samplefile.csv) with headers are in the first column. Also, each row has a
>> different number of columns. I want to read this CSV file, replace one of
>> the cell value and save again as a CSV file with the same format as the
>> original file with exactly same number of columns and rows. It sounds like
>> a simple task, but I am struggling to find a way. I tried to do this with
>> the help of this
>> <
>> https://stackoverflow.com/questions/17288197/reading-a-csv-file-organized-horizontally
>> >
>>  and this
>> <
>> https://stackoverflow.com/questions/20308621/how-do-i-write-a-csv-file-in-r-where-my-input-is-written-to-the-file-as-row
>> >
>> posts,
>> but still, I can't get the output the way I want. Can somebody help me
>> here?
>>
>> My attempt using the answer in this post
>> <
>> https://stackoverflow.com/questions/17288197/reading-a-csv-file-organized-horizontally
>> >
>> to
>> read the CSV file (samplefile.csv) gives me the following output where
>> headers are kinda messed up and empty cells are replaced with NA values
>> which is not what I want
>>
>> aaa <- read.tcsv("samplefile.csv")
>> aaa
>>
>>      Header.1 Header.2..units. Header.3..units. Header.3..units..11
>> Some text           0.0625                0             2648962
>> <NA>           0.0625             1200             6647473        <NA>
>>           0.0625             1380                  14        <NA>
>>      0.2500             1500                  15        <NA>
>> 0.6250             1620                 NA6        <NA>
>> 1.3125             1740                 NA7        <NA>
>> 2.4375             1860                 NA8        <NA>
>> 3.5625             1980                 NA9        <NA>
>> 4.6250             2100                 NA10       <NA>
>> 5.0000             2220                 NA11       <NA>
>> 5.0000             2340                 NA12       <NA>
>> 4.6250             2460                 NA13       <NA>
>> 3.5625             2580                 NA14       <NA>
>> 2.4375             2700                 NA15       <NA>
>> 1.3125             2820                 NA16       <NA>
>> 0.6250             2940                 NA17       <NA>
>> 0.2500             3060                 NA18       <NA>
>> 0.0625             3180                 NA19       <NA>
>> 0.0000             3300                 NA20       <NA>
>> 0.0000            18000                 NA
>>
>> Also, I am not sure how to go back to original format when I save the file
>> again after a modification (for example after replacing a cell value)
>>
>> I tried saving the file again by using t (transpose) as given below
>>
>> write.csv(t(aaa), file ="samplefile_e.csv", row.names=T)
>>
>> but still, there are following issues in the saved file
>>
>>    1. messed up headers
>>    2. empty cells are replaced with NA
>>    3. when I open the file in a text editor all the values are shown as
>>    characters
>>
>> Thanks,
>> Mano
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>

	[[alternative HTML version deleted]]



From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Oct  3 12:37:41 2018
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 3 Oct 2018 11:37:41 +0100
Subject: [R] Polygon
In-Reply-To: <3898bda2-5073-8dd4-266b-4751d5d00c6c@ntu.edu.tw>
References: <fcc9c821-50bf-7c7a-4e8f-e4859f7deb78@ntu.edu.tw>
 <0d7bc6e1-2d8e-f3f9-d685-2c1e5a001a20@sapo.pt>
 <9ac5812e-5539-9d6a-6396-a2ec225f257b@ntu.edu.tw>
 <EFF7563D-00B0-4DB8-BC1B-5B0A7FBBE113@comcast.net>
 <3898bda2-5073-8dd4-266b-4751d5d00c6c@ntu.edu.tw>
Message-ID: <e38d6173-60ec-a74f-858e-b1974a81cd22@sapo.pt>

Hello,

If you change cord.x and cord.y to


cord.x <- c(-3, seq(-3, -1.96, 0.01), -1.96)
cord.y <- c(0, dnorm(seq(-3, -1.96, 0.01)), 0)


then you will not need the call to abline.

Hope this helps,

Rui Barradas

?s 02:50 de 03/10/2018, Steven Yen escreveu:
> Thanks!!! It did wonders.
> Steven
> 
> On 10/3/2018 9:39 AM, David Winsemius wrote:
>>> On Oct 2, 2018, at 5:50 PM, Steven Yen<styen at ntu.edu.tw>  wrote:
>>>
>>> Great. Thanks! It did wonders.
>>> 1. Is there a way to suppress the obvious tick stops (-3,-2,-1,0,1,2,3)
>>> and mark only the ticks -1.96 and 1.96.
>>> 2. Better yet, to draw vertical lines at x = -1.96 and x = 1.96.
>>> Thanks.
>> Read ?plot.default
>>
>> Then add xaxt="n" to the arguments to curve, ... and afterwards:
>>
>> axis( 1, at=c(-1.96, 1.96),lab=c(-1.96, 1.96) )
>> abline( v= c(-1.96, 1.96) )
>>
>> --
>>> Steven
>>>
>>> On 10/3/2018 12:51 AM, Rui Barradas wrote:
>>>> Hello,
>>>>
>>>> Continue with
>>>>
>>>>
>>>> polygon(-rev(cord.x), rev(cord.y), col = 'skyblue')
>>>>
>>>>
>>>> Hope this helps,
>>>>
>>>> Rui Barradas
>>>>
>>>> ?s 17:25 de 02/10/2018, Steven Yen escreveu:
>>>>> Can someone help me with polygon. The following codes are self-runnable
>>>>> and mark a shaded area under the standard normal curve in the x-range
>>>>> (-3,-1).
>>>>> Is there a way to also mark the area in (1,3), at the same time.
>>>>> That is, I want shaded areas in both tails. Thank you...
>>>>>
>>>>> ===
>>>>> # Create data for the area to shade
>>>>> cord.x <- c(-3,seq(-3,-1,0.01),-1)
>>>>> cord.y <- c(0,dnorm(seq(-3,-1,0.01)),0)
>>>>>
>>>>> # Make a curve
>>>>> curve(dnorm(x,0,1), xlim=c(-3,3), main='Standard Normal')
>>>>>
>>>>> # Add the shaded area.
>>>>> polygon(cord.x,cord.y,col='skyblue')
>>>>>
>>> -- 
>>> styen at ntu.edu.tw  (S.T. Yen)
>>>
>>>
>>> 	[[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org  mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guidehttp://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> David Winsemius
>> Alameda, CA, USA
>>
>> 'Any technology distinguishable from magic is insufficiently advanced.'   -Gehm's Corollary to Clarke's Third Law
>>
>>
>>
>>
>>
>>
> 
> -- 
> styen at ntu.edu.tw  (S.T. Yen)
>



From m@cqueen1 @end|ng |rom ||n|@gov  Wed Oct  3 18:48:43 2018
From: m@cqueen1 @end|ng |rom ||n|@gov (MacQueen, Don)
Date: Wed, 3 Oct 2018 16:48:43 +0000
Subject: [R] Sp-package overlay
In-Reply-To: <BFC0F8A6-51E7-4F35-8546-88D3271B5E42@bigelow.org>
References: <918BE55E-111A-4A84-BAD3-D18EA16DACDD@gmail.com>
 <BFC0F8A6-51E7-4F35-8546-88D3271B5E42@bigelow.org>
Message-ID: <F5BD06C7-E742-4FB6-97A7-6BA9EACE8520@llnl.gov>

In addition, the function you want is
  sp::over
or its equivalent in sf

--
Don MacQueen
Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062
Lab cell 925-724-7509
 
 

?On 10/2/18, 1:41 PM, "R-help on behalf of Ben Tupper" <r-help-bounces at r-project.org on behalf of btupper at bigelow.org> wrote:

    Hi,
    
    I'm pretty sure that what you ask is likely not too hard to do.  On the other hand, I think you will do well to consider the following...
    
    1. Join the mailing list; the folks there will know better what you are trying to do - see
    
    https://stat.ethz.ch/mailman/listinfo/r-sig-geo <https://stat.ethz.ch/mailman/listinfo/r-sig-geo>
    
    
    2. Switch from the sf package to the sf package if you can - see  
    
    https://cran.r-project.org/web/packages/sf/
    
    
    3. Come up to speed with geospatial data handling in R starting here 
    
    https://geocompr.robinlovelace.net/index.html
    
    
    Cheers,
    Ben
    
    
    > On Oct 2, 2018, at 10:33 AM, Ivy Pieters <icwpieters at gmail.com> wrote:
    > 
    > Hey there, 
    > 
    > For my internship I have to work with R. I am working with R for the first
    > time and I don't know much. 
    > Somehow I don't manage to find the answer to my question in google. I think
    > I don't search with the right words, or maybe I just don't understand
    > enough. Anyways, I hope someone here can help me out. 
    > 
    > I have 2 datasets: 
    > 
    > a SpatialPolygonDataFrame, this dataset is called "field" (these are
    > different fields of arable land) 
    > and a SpatialPointsDataFrame, this dataset is called "odk" (these are
    > different soil samples taken in each field) 
    > 
    > The field data set consists of 8 polygons and they have a slot with coords 
    > 
    > The odk data set consists of 537 features (soil samples), these features
    > belong to the polygons but they are all mixed. This dataset also has a slot
    > with coords 
    > 
    > They are both projected in the same coordinate system. 
    > 
    > Now I would like to create a new dataset with a table with the features of
    > odk that belong to polygon 1 and a separate table for the features that
    > belong to polygon 2 etc. The best is if they also get into the
    > spatialpointsdataframe format. 
    > 
    > I really don't know how to do this. I hope someone here can help me out. I
    > hope that I gave enough information for anyone to help me else let me know
    > if I have to tell something more about my datasets. 
    > 
    > Thank you already a lot in advance, 
    > 
    > Hope to hear from anyone soon, 
    > 
    > Kind regards, 
    > 
    > Ivy
    > 
    > ______________________________________________
    > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    > https://stat.ethz.ch/mailman/listinfo/r-help
    > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    > and provide commented, minimal, self-contained, reproducible code.
    > 
    
    Ben Tupper
    Bigelow Laboratory for Ocean Sciences
    60 Bigelow Drive, P.O. Box 380
    East Boothbay, Maine 04544
    http://www.bigelow.org
    
    Ecological Forecasting: https://eco.bigelow.org/
    
    
    
    
    
    
    	[[alternative HTML version deleted]]
    
    ______________________________________________
    R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    https://stat.ethz.ch/mailman/listinfo/r-help
    PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    and provide commented, minimal, self-contained, reproducible code.
    


From wdun|@p @end|ng |rom t|bco@com  Wed Oct  3 18:51:36 2018
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Wed, 3 Oct 2018 09:51:36 -0700
Subject: [R] R - Reading a horizontally arranged csv file,
 replacing values and saving again
In-Reply-To: <CANqyHbS5OupmnRi47fON7krzxMYiYy1o+pLeD2D+3zb9+QQ15w@mail.gmail.com>
References: <CANqyHbTC9JF4JQRKOu2YeiL43V3VpTWCA4-tnXpXDYack0d94g@mail.gmail.com>
 <CAF8bMcZ3gid0Zb0_e7eTG67XeH7tj0eZw5Hh79m0v=v44gLDcg@mail.gmail.com>
 <CANqyHbS5OupmnRi47fON7krzxMYiYy1o+pLeD2D+3zb9+QQ15w@mail.gmail.com>
Message-ID: <CAF8bMcYBJgUc3Tu_1WAeUE-SN6HKQv26fGfnzj6NSu_kU-JUdg@mail.gmail.com>

Using read.table to read data with a variable number of entries per row is
probably a mistake - data.frames (which read.table returns) are not meant
for this sort of data.  You want to store the data in R as a list with
names.  E.g.,

readYourFormat <- function(connection) {
    # connection is a file name or connection object referring
    # to text of the form
    # Header A,Some text
    # Header B,<number>,<number>,<number>
    # Header C,<number>
    # Header D,<number>,<number>,<number>,<number>
    lines <- readLines(connection)
    lines <- lines[ nchar(lines)>0 ] # omit empty lines
    fields <- strsplit(lines, ",") # split lines by commas into fields
    headers <- vapply(fields, function(x)x[1], FUN.VALUE="") # first entry
is header
    names(fields) <- headers
    contents <- lapply(fields, function(x)x[-1]) # remaining entries are
contents
    contents[-1] <- lapply(contents[-1], as.numeric) # convert all but
first line's entries to numeric
    contents
}

After reading the data and fiddling with it (but keeping it a named list),
you can write it out in a similar format with

writeYourFormat <- function (data, connection = stdout())
{
    stopifnot(is.list(data), !is.null(names(data)))
    cat(file = connection, sep = "\n", paste(sep = ",", names(data),
        vapply(data, paste, collapse = ",", FUN.VALUE = "")))
}


Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Wed, Oct 3, 2018 at 3:05 AM, Manoranjan Muthusamy <
ranjanmano167 at gmail.com> wrote:

> Thanks for the short but informative answer, Bill. But still, each row has
> four columns..right? Although the *NA* is replaced by a blank cell,
> because of the extra comma it still is a four column row. Is there any way
> to avoid/remove the extra comma when NA is replaced which will make it a
> three column row?
>
>
>
> On Mon, Oct 1, 2018 at 4:56 PM William Dunlap <wdunlap at tibco.com> wrote:
>
>> Read the help file for write.table
>>    ?write.table
>> and look at the descriptions of its arguments.
>>   > df <- data.frame(Text=c("Abe","Ben",NA,"David"), Age=c(19, NA, 12,
>> 10))
>>   > write.table(file=stdout(), t(df), sep=",")
>>   "V1","V2","V3","V4"
>>   "Text","Abe","Ben",NA,"David"
>>   "Age","19",NA,"12","10"
>>   > write.table(file=stdout(), t(df), quote=FALSE, na="", sep=",")
>>   V1,V2,V3,V4
>>   Text,Abe,Ben,,David
>>   Age,19,,12,10
>>
>>
>>
>>
>> Bill Dunlap
>> TIBCO Software
>> wdunlap tibco.com
>>
>> On Mon, Oct 1, 2018 at 2:24 AM, Manoranjan Muthusamy <
>> ranjanmano167 at gmail.com> wrote:
>>
>>> I have a horizontally arranged CSV file
>>> <https://www.dropbox.com/s/0ukyuifvpq1olqk/samplefile.csv?dl=0> (
>>> samplefile.csv) with headers are in the first column. Also, each row has
>>> a
>>> different number of columns. I want to read this CSV file, replace one of
>>> the cell value and save again as a CSV file with the same format as the
>>> original file with exactly same number of columns and rows. It sounds
>>> like
>>> a simple task, but I am struggling to find a way. I tried to do this with
>>> the help of this
>>> <https://stackoverflow.com/questions/17288197/reading-a-
>>> csv-file-organized-horizontally>
>>>  and this
>>> <https://stackoverflow.com/questions/20308621/how-do-i-
>>> write-a-csv-file-in-r-where-my-input-is-written-to-the-file-as-row>
>>> posts,
>>> but still, I can't get the output the way I want. Can somebody help me
>>> here?
>>>
>>> My attempt using the answer in this post
>>> <https://stackoverflow.com/questions/17288197/reading-a-
>>> csv-file-organized-horizontally>
>>> to
>>> read the CSV file (samplefile.csv) gives me the following output where
>>> headers are kinda messed up and empty cells are replaced with NA values
>>> which is not what I want
>>>
>>> aaa <- read.tcsv("samplefile.csv")
>>> aaa
>>>
>>>      Header.1 Header.2..units. Header.3..units. Header.3..units..11
>>> Some text           0.0625                0             2648962
>>> <NA>           0.0625             1200             6647473        <NA>
>>>           0.0625             1380                  14        <NA>
>>>      0.2500             1500                  15        <NA>
>>> 0.6250             1620                 NA6        <NA>
>>> 1.3125             1740                 NA7        <NA>
>>> 2.4375             1860                 NA8        <NA>
>>> 3.5625             1980                 NA9        <NA>
>>> 4.6250             2100                 NA10       <NA>
>>> 5.0000             2220                 NA11       <NA>
>>> 5.0000             2340                 NA12       <NA>
>>> 4.6250             2460                 NA13       <NA>
>>> 3.5625             2580                 NA14       <NA>
>>> 2.4375             2700                 NA15       <NA>
>>> 1.3125             2820                 NA16       <NA>
>>> 0.6250             2940                 NA17       <NA>
>>> 0.2500             3060                 NA18       <NA>
>>> 0.0625             3180                 NA19       <NA>
>>> 0.0000             3300                 NA20       <NA>
>>> 0.0000            18000                 NA
>>>
>>> Also, I am not sure how to go back to original format when I save the
>>> file
>>> again after a modification (for example after replacing a cell value)
>>>
>>> I tried saving the file again by using t (transpose) as given below
>>>
>>> write.csv(t(aaa), file ="samplefile_e.csv", row.names=T)
>>>
>>> but still, there are following issues in the saved file
>>>
>>>    1. messed up headers
>>>    2. empty cells are replaced with NA
>>>    3. when I open the file in a text editor all the values are shown as
>>>    characters
>>>
>>> Thanks,
>>> Mano
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/
>>> posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>>

	[[alternative HTML version deleted]]



From @hmed@t|@80 @end|ng |rom gm@||@com  Wed Oct  3 19:30:56 2018
From: @hmed@t|@80 @end|ng |rom gm@||@com (Ahmed Attia)
Date: Wed, 3 Oct 2018 14:30:56 -0300
Subject: [R] Maximum number of iterations (maxit) does not work in
 hydroPSO-modFit-optimr in r
Message-ID: <CAG6S0Ompz6ur0WWfCiv2DQOh-GvbQv=UBp2J4cXxBQY62o4x5A@mail.gmail.com>

The argument maxit used in libraries optimr, hydroPSO, and FME to
control the maximal number of iterations to be performed does not work
at ALL!!

This needs to be fixed...



mysamp <- function(n, m, s, lwr, upr, nnorm) {
  samp <- rnorm(nnorm, m, s)
  samp <- samp[samp >= lwr & samp <= upr]
  if (length(samp) >= n) {
    return(sample(samp, n))
  }
  stop(simpleError("Not enough values to sample from. Try increasing nnorm."))
}

x <- mysamp(1000,0.8117648,0.1281839,0,1,1000000)
y <- mysamp(1000,0.7530346,0.1865946,0,1,1000000)

n <- length(x)
xgroup <- c('a','b')
ygroup <- c('c','d')

for (i in c(2:n)){
  xgroup[i] <-  c('b')
  ygroup[i] <-  c('d')
}

dataset <- data.frame(x = x, y = y, xgroup = as.factor(xgroup),
                      ygroup = as.factor(ygroup))
dataset$ObsNo <- 1:n
dataset <- dataset[order(dataset$x,decreasing=F),]

xopt <- c(dataset$x[1],0.95)    #Initial critical x,y values


my.function <- function(xopt){
  for (i in c(1:n)){
    dataset$xgroup[i] <- if(dataset$x[i] < xopt[1]) 'a' else 'b'
    dataset$ygroup[i] <- if(dataset$y[i] < xopt[2]) 'c' else 'd'
    dataset$q.i[i] <- with(dataset, ifelse
                           (dataset$xgroup[i]=='a' &
dataset$ygroup[i]=='d', 1, 0))
    dataset$q.ii[i] <- with(dataset, ifelse
                            (dataset$xgroup[i]=='b' &
dataset$ygroup[i]=='d', 1, 0))
    dataset$q.iii[i] <- with(dataset, ifelse
                             (dataset$xgroup[i]=='b' &
dataset$ygroup[i]=='c', 1, 0))
    dataset$q.iv[i] <- with(dataset, ifelse
                            (dataset$xgroup[i]=='a' &
dataset$ygroup[i]=='c', 1, 0))

    dataset$q.err[i] <- sum(dataset$q.i[i] + dataset$q.iii[i])
  }
  min.qerr <- sum(dataset$q.err)
  q.I <- sum(dataset$q.i)
  q.II <- sum(dataset$q.ii)
  q.III <- sum(dataset$q.iii)
  q.IV <- sum(dataset$q.iv)
  q.Iandq.III <- sum(dataset$q.err)
  print(c(q.I,
          q.II,
          q.III,
          q.IV,
          q.Iandq.III))
  return(min.qerr)
}

my.function(xopt)

#-------Algorithm

xmin=c(0,0.60)
xmax=c(0.95,0.95)

res= hydroPSO(par=xopt,my.function,method="spso2011",
              lower=xmin,upper=xmax,control=list(maxit=3))


res= modFit(my.function,p=xopt,method="Pseudo",
            lower=xmin,upper=xmax,control=list(numiter=3))

res= optimr(par=xopt,my.function,method="L-BFGS-B",
            lower=xmin,upper=xmax,control=list(maxit=3,trace=T))

#Only the hjkb form dfoptim that has argument maxfeval and it works.

res=hjkb(par=xopt,my.function,
         lower=xmin,upper=xmax,control=list(maxfeval=3,tol=2^-10,info=T))






Ahmed Attia, Ph.D.
Agronomist & Crop Modeler



From pro|jcn@@h @end|ng |rom gm@||@com  Wed Oct  3 19:45:05 2018
From: pro|jcn@@h @end|ng |rom gm@||@com (ProfJCNash)
Date: Wed, 3 Oct 2018 13:45:05 -0400
Subject: [R] Maximum number of iterations (maxit) does not work in
 hydroPSO-modFit-optimr in r
In-Reply-To: <CAG6S0Ompz6ur0WWfCiv2DQOh-GvbQv=UBp2J4cXxBQY62o4x5A@mail.gmail.com>
References: <CAG6S0Ompz6ur0WWfCiv2DQOh-GvbQv=UBp2J4cXxBQY62o4x5A@mail.gmail.com>
Message-ID: <88baed98-8dbc-a2b0-d393-e1f3ffc4ab95@gmail.com>

As the author of optimx (there is a new version just up), I can say that
maxit only "works" if the underlying solver is set up to use it.

You seem to be mistaken, however, in this case, as the following example
shows.

> library(optimx)
> library(adagio)
> sessionInfo()
R version 3.5.1 (2018-07-02)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Linux Mint 18.3

Matrix products: default
BLAS: /usr/lib/openblas-base/libblas.so.3
LAPACK: /usr/lib/libopenblasp-r0.2.18.so

locale:
 [1] LC_CTYPE=en_CA.UTF-8       LC_NUMERIC=C
LC_TIME=en_CA.UTF-8
 [4] LC_COLLATE=en_CA.UTF-8     LC_MONETARY=en_CA.UTF-8
LC_MESSAGES=en_CA.UTF-8
 [7] LC_PAPER=en_CA.UTF-8       LC_NAME=C                  LC_ADDRESS=C

[10] LC_TELEPHONE=C             LC_MEASUREMENT=en_CA.UTF-8
LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] adagio_0.7.1     optimx_2018-7.10

loaded via a namespace (and not attached):
[1] compiler_3.5.1    tools_3.5.1       numDeriv_2016.8-1
> test <- optimr(c(-1.2, 1), fn=fnRosenbrock, method="L-BFGS-B",
control=list(maxit=2, trace=2))
Parameter scaling:[1] 1 1
N = 2, M = 5 machine precision = 2.22045e-16
This problem is unconstrained.
final  value 4.120516
stopped after 3 iterations

So it seems to have worked, albeit one iteration later than specified
(the test is not always immediate).

Note optimr() is just a wrapper. There may be improvements that could be
made to use maxit and similar controls. Note that the code is in plain R
and optimr() was written in a way that allows it to be maintained. The
most difficult problem -- which may be related to the OP's complaint in
some cases -- is translating maxit to whatever is used by the solver,
then copying back the relevant information about number of iterations.

John Nash


On 2018-10-03 01:30 PM, Ahmed Attia wrote:
> The argument maxit used in libraries optimr, hydroPSO, and FME to
> control the maximal number of iterations to be performed does not work
> at ALL!!
> 
> This needs to be fixed...
> 
> 
> 
> mysamp <- function(n, m, s, lwr, upr, nnorm) {
>   samp <- rnorm(nnorm, m, s)
>   samp <- samp[samp >= lwr & samp <= upr]
>   if (length(samp) >= n) {
>     return(sample(samp, n))
>   }
>   stop(simpleError("Not enough values to sample from. Try increasing nnorm."))
> }
> 
> x <- mysamp(1000,0.8117648,0.1281839,0,1,1000000)
> y <- mysamp(1000,0.7530346,0.1865946,0,1,1000000)
> 
> n <- length(x)
> xgroup <- c('a','b')
> ygroup <- c('c','d')
> 
> for (i in c(2:n)){
>   xgroup[i] <-  c('b')
>   ygroup[i] <-  c('d')
> }
> 
> dataset <- data.frame(x = x, y = y, xgroup = as.factor(xgroup),
>                       ygroup = as.factor(ygroup))
> dataset$ObsNo <- 1:n
> dataset <- dataset[order(dataset$x,decreasing=F),]
> 
> xopt <- c(dataset$x[1],0.95)    #Initial critical x,y values
> 
> 
> my.function <- function(xopt){
>   for (i in c(1:n)){
>     dataset$xgroup[i] <- if(dataset$x[i] < xopt[1]) 'a' else 'b'
>     dataset$ygroup[i] <- if(dataset$y[i] < xopt[2]) 'c' else 'd'
>     dataset$q.i[i] <- with(dataset, ifelse
>                            (dataset$xgroup[i]=='a' &
> dataset$ygroup[i]=='d', 1, 0))
>     dataset$q.ii[i] <- with(dataset, ifelse
>                             (dataset$xgroup[i]=='b' &
> dataset$ygroup[i]=='d', 1, 0))
>     dataset$q.iii[i] <- with(dataset, ifelse
>                              (dataset$xgroup[i]=='b' &
> dataset$ygroup[i]=='c', 1, 0))
>     dataset$q.iv[i] <- with(dataset, ifelse
>                             (dataset$xgroup[i]=='a' &
> dataset$ygroup[i]=='c', 1, 0))
> 
>     dataset$q.err[i] <- sum(dataset$q.i[i] + dataset$q.iii[i])
>   }
>   min.qerr <- sum(dataset$q.err)
>   q.I <- sum(dataset$q.i)
>   q.II <- sum(dataset$q.ii)
>   q.III <- sum(dataset$q.iii)
>   q.IV <- sum(dataset$q.iv)
>   q.Iandq.III <- sum(dataset$q.err)
>   print(c(q.I,
>           q.II,
>           q.III,
>           q.IV,
>           q.Iandq.III))
>   return(min.qerr)
> }
> 
> my.function(xopt)
> 
> #-------Algorithm
> 
> xmin=c(0,0.60)
> xmax=c(0.95,0.95)
> 
> res= hydroPSO(par=xopt,my.function,method="spso2011",
>               lower=xmin,upper=xmax,control=list(maxit=3))
> 
> 
> res= modFit(my.function,p=xopt,method="Pseudo",
>             lower=xmin,upper=xmax,control=list(numiter=3))
> 
> res= optimr(par=xopt,my.function,method="L-BFGS-B",
>             lower=xmin,upper=xmax,control=list(maxit=3,trace=T))
> 
> #Only the hjkb form dfoptim that has argument maxfeval and it works.
> 
> res=hjkb(par=xopt,my.function,
>          lower=xmin,upper=xmax,control=list(maxfeval=3,tol=2^-10,info=T))
> 
> 
> 
> 
> 
> 
> Ahmed Attia, Ph.D.
> Agronomist & Crop Modeler
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>



From d@v|d@m| @end|ng |rom m|cro@o|t@com  Wed Oct  3 20:11:54 2018
From: d@v|d@m| @end|ng |rom m|cro@o|t@com (David Smith (CDA))
Date: Wed, 3 Oct 2018 18:11:54 +0000
Subject: [R] Revolutions blog: September 2018 roundup
Message-ID: <DM5PR2101MB1048FC7A8F516E4E2E9E4E27C8E90@DM5PR2101MB1048.namprd21.prod.outlook.com>

Since 2008, Microsoft staff and guests have written about R at the Revolutions
blog (http://blog.revolutionanalytics.com) and every month I post a summary of
articles from the previous month of particular interest to readers of r-help.

In case you missed them, here are some articles related to R from the
month of September:

R code by Barry Rowlingson to replicate an XKCD comic about curve fitting:
http://blog.revolutionanalytics.com/2018/09/curve-fitting.html

The rayshader package creates 3-D relief maps in R with perspective, shadows,
and depth of field: http://blog.revolutionanalytics.com/2018/09/raytracer.html

The R Developer's Guide to Azure, with links to documentation for Azure cloud
services integrating R: http://blog.revolutionanalytics.com/2018/09/index.html

A review of many commercial applications of R presented at EARL London 2018:
http://blog.revolutionanalytics.com/2018/09/earl-london-2018.html

Roundup of AI, Machine Learning and Data Science news from September 2018:
http://blog.revolutionanalytics.com/2018/09/ai-roundup-september-2018.html

A Shiny app using the Custom Vision API to identify pictures (or not) of hotdogs:
http://blog.revolutionanalytics.com/2018/09/not-hotdog-a-shiny-app-using-the-custom-vision-api.html

Two academic articles use survey techniques to estimate casualties from
Hurricane Maria in Puerto Rico:
http://blog.revolutionanalytics.com/2018/09/mortality-in-puerto-rico.html

Yihui Xie describes the benefits of RMarkdown documents in response to criticism
of Jupyter Notebooks:
http://blog.revolutionanalytics.com/2018/09/notebooks-literate-programming.html

A video demonstrates the use of R and Python in Azure HDinsight:
http://blog.revolutionanalytics.com/2018/09/r-python-azure-hdinsight.html

Similarity analyses in R used to identify candidate authors for an anonymous
op-ed in the New York Times:
http://blog.revolutionanalytics.com/2018/09/anonymous-nyt-op-ed.html

A review of the book "SQL Server 2017 Machine Learning Services with R":
http://blog.revolutionanalytics.com/2018/09/sql-server-2017-book-review.html

And some general interest stories (not necessarily related to R):

* Inspiring radio from a young pilot's eventful first solo flight:
  http://blog.revolutionanalytics.com/2018/09/because-its-friday-fly-strong.html

* Various techniques used by media to project the track of Hurricane Florence:
  http://blog.revolutionanalytics.com/2018/09/because-its-friday-hurricane-trackers.html

* A 26-year timelapse of stars orbiting the galactic center:
  http://blog.revolutionanalytics.com/2018/09/stars-in-motion.html

As always, thanks for the comments and please keep sending suggestions to me at
davidsmi at microsoft.com or via Twitter (I'm @revodavid).

Cheers,
# David

-- 
David M Smith <davidsmi at microsoft.com>
Developer Advocate, Microsoft Cloud & Enterprise 
Tel: +1 (312) 9205766 (Chicago IL, USA)
Twitter: @revodavid | Blog: ?http://blog.revolutionanalytics.com



From kyd@v|ddoy|e @end|ng |rom gm@||@com  Thu Oct  4 01:03:31 2018
From: kyd@v|ddoy|e @end|ng |rom gm@||@com (David Doyle)
Date: Wed, 3 Oct 2018 18:03:31 -0500
Subject: [R] Logic operators...more than one??
Message-ID: <CACftpvrJwyV6451gFrZsGZKQoXbn3iA8P=7fuKs8FgOdLxJCXw@mail.gmail.com>

I'm sure this is a simple question but I'm not sure where to find the
answer.

I want to remove some of the data.  For example when my Location column is
MW-09, MW-10, or MW-11.

It works fine if I ONLY list ONE of the locations as in:

SampledWells <- MyData[ MyData$Location != "MW-09", ]

But if I try to do more than one (as shown below), I don't get an error but
I also don't get my SampledWells
SampledWells <- MyData[ MyData$Location != "MW-09", "MW-10", ]

Thoughts??

Thank you for your time
David

	[[alternative HTML version deleted]]



From m@rc_@chw@rtz @end|ng |rom me@com  Thu Oct  4 01:06:48 2018
From: m@rc_@chw@rtz @end|ng |rom me@com (Marc Schwartz)
Date: Wed, 03 Oct 2018 19:06:48 -0400
Subject: [R] Logic operators...more than one??
In-Reply-To: <CACftpvrJwyV6451gFrZsGZKQoXbn3iA8P=7fuKs8FgOdLxJCXw@mail.gmail.com>
References: <CACftpvrJwyV6451gFrZsGZKQoXbn3iA8P=7fuKs8FgOdLxJCXw@mail.gmail.com>
Message-ID: <75E7FA17-8DF9-4705-8BC5-68BDC50F307C@me.com>


> On Oct 3, 2018, at 7:03 PM, David Doyle <kydaviddoyle at gmail.com> wrote:
> 
> I'm sure this is a simple question but I'm not sure where to find the
> answer.
> 
> I want to remove some of the data.  For example when my Location column is
> MW-09, MW-10, or MW-11.
> 
> It works fine if I ONLY list ONE of the locations as in:
> 
> SampledWells <- MyData[ MyData$Location != "MW-09", ]
> 
> But if I try to do more than one (as shown below), I don't get an error but
> I also don't get my SampledWells
> SampledWells <- MyData[ MyData$Location != "MW-09", "MW-10", ]
> 
> Thoughts??
> 
> Thank you for your time
> David


Hi,

See ?"%in%"

Then:

  SampledWells <- MyData[ !MyData$Location %in% c("MW-09", "MW-10"), ]

Note the '!' operator that precedes the expression to negate the logical.

Regards,

Marc Schwartz


	[[alternative HTML version deleted]]



From drj|m|emon @end|ng |rom gm@||@com  Thu Oct  4 01:04:37 2018
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Thu, 4 Oct 2018 09:04:37 +1000
Subject: [R] Logic operators...more than one??
In-Reply-To: <CACftpvrJwyV6451gFrZsGZKQoXbn3iA8P=7fuKs8FgOdLxJCXw@mail.gmail.com>
References: <CACftpvrJwyV6451gFrZsGZKQoXbn3iA8P=7fuKs8FgOdLxJCXw@mail.gmail.com>
Message-ID: <CA+8X3fV_4LB02iMFeWd=NxTZr3QhvRG1MSrCyBZ9LDkEBSB64w@mail.gmail.com>

Hi David,
I think you want this:

SampledWells <- MyData[!( MyData$Location %in% c("MW-09", "MW-10")), ]

Jim

On Thu, Oct 4, 2018 at 9:02 AM David Doyle <kydaviddoyle at gmail.com> wrote:
>
> I'm sure this is a simple question but I'm not sure where to find the
> answer.
>
> I want to remove some of the data.  For example when my Location column is
> MW-09, MW-10, or MW-11.
>
> It works fine if I ONLY list ONE of the locations as in:
>
> SampledWells <- MyData[ MyData$Location != "MW-09", ]
>
> But if I try to do more than one (as shown below), I don't get an error but
> I also don't get my SampledWells
> SampledWells <- MyData[ MyData$Location != "MW-09", "MW-10", ]
>
> Thoughts??
>
> Thank you for your time
> David
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



From bgunter@4567 @end|ng |rom gm@||@com  Thu Oct  4 01:20:48 2018
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 3 Oct 2018 16:20:48 -0700
Subject: [R] Logic operators...more than one??
In-Reply-To: <CACftpvrJwyV6451gFrZsGZKQoXbn3iA8P=7fuKs8FgOdLxJCXw@mail.gmail.com>
References: <CACftpvrJwyV6451gFrZsGZKQoXbn3iA8P=7fuKs8FgOdLxJCXw@mail.gmail.com>
Message-ID: <CAGxFJbT3Nh9Wa-_Wp5_vyMvtySq9Y0zu7Y033NAgYRT-SPJCVQ@mail.gmail.com>

Inline.
-- Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Oct 3, 2018 at 4:02 PM David Doyle <kydaviddoyle at gmail.com> wrote:

> I'm sure this is a simple question but I'm not sure where to find the
> answer.
>

Good R tutorials abound on the internet. One resource is:
https://www.rstudio.com/online-learning/#r-programming

but there are tons more if you search.

>
> I want to remove some of the data.  For example when my Location column is
> MW-09, MW-10, or MW-11.
>
> It works fine if I ONLY list ONE of the locations as in:
>
> SampledWells <- MyData[ MyData$Location != "MW-09", ]
>
> But if I try to do more than one (as shown below), I don't get an error but
> I also don't get my SampledWells
> SampledWells <- MyData[ MyData$Location != "MW-09", "MW-10", ]
>
> Thoughts??
>

?"%in%"

as in:

SampledWells <- MyData[ MyData$Location %in% c( "MW-09", "MW-10", "MW-11"),
]





> Thank you for your time
> David
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From j|up@dh @end|ng |rom gm@||@com  Thu Oct  4 07:18:29 2018
From: j|up@dh @end|ng |rom gm@||@com (Jiblal Upadhya)
Date: Thu, 4 Oct 2018 00:18:29 -0500
Subject: [R] Help to find ksl data set
Message-ID: <CAO-R1n7H_g9L9u+h2_4Xobn+3Kbi56+ax9r4jpC0PObww5ejOw@mail.gmail.com>

Hi,

I  need help in finding the ksl data set mention in the deal package in the
paper attached. I searched in the UCI Machine learning repository, but
couldn?t find.
Please help,

Thanks,
Jiblal

-------------- next part --------------
A non-text attachment was scrubbed...
Name: deal.pdf
Type: application/pdf
Size: 1537224 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20181004/d54a131e/attachment-0002.pdf>

From dw|n@em|u@ @end|ng |rom comc@@t@net  Thu Oct  4 08:48:13 2018
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Wed, 3 Oct 2018 23:48:13 -0700
Subject: [R] Help to find ksl data set
In-Reply-To: <CAO-R1n7H_g9L9u+h2_4Xobn+3Kbi56+ax9r4jpC0PObww5ejOw@mail.gmail.com>
References: <CAO-R1n7H_g9L9u+h2_4Xobn+3Kbi56+ax9r4jpC0PObww5ejOw@mail.gmail.com>
Message-ID: <502A4C72-9E0C-49A2-9D6D-739A70053B45@comcast.net>


> On Oct 3, 2018, at 10:18 PM, Jiblal Upadhya <jlupadh at gmail.com> wrote:
> 
> Hi,
> 
> I  need help in finding the ksl data set mention in the deal package in the
> paper attached. I searched in the UCI Machine learning repository, but
> couldn?t find.

The paper makes me think it is in the archived package (last updated in 2013)

https://cran.r-project.org/src/contrib/Archive/deal/deal_1.2-37.tar.gz


> Please help,
> 
> Thanks,
> Jiblal
> <deal.pdf>______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

David Winsemius
Alameda, CA, USA

'Any technology distinguishable from magic is insufficiently advanced.'   -Gehm's Corollary to Clarke's Third Law



From hugomh @end|ng |rom gmx@|r  Thu Oct  4 12:09:01 2018
From: hugomh @end|ng |rom gmx@|r (hmh)
Date: Thu, 4 Oct 2018 10:09:01 +0000
Subject: [R] Bug : Autocorrelation in sample drawn from stats::rnorm
In-Reply-To: <a218224b-fdbd-2736-8cf9-6894c4a3adbd@gmx.fr>
References: <a218224b-fdbd-2736-8cf9-6894c4a3adbd@gmx.fr>
Message-ID: <a92bbb3c-35a2-049c-a18a-afcf78e689c4@gmx.fr>

Hi,


I just noticed the following bug:

When we draw a random sample using the function stats::rnorm, there 
should be not auto-correlation in the sample. But their is some 
auto-correlation _when the sample that is drawn is small_.

I describe the problem using two functions:

DistributionAutocorrelation_Unexpected which as the wrong behavior : 
_when drawing some small samples using rnorm, there is generally a 
strong negative auto-correlation in the sample_.

and

DistributionAutocorrelation_Expected which illustrate the expected behavior



*Unexpected : *

DistributionAutocorrelation_Unexpected = function(SampleSize){
 ? Cor = NULL
 ? for(repetition in 1:1e5){
 ??? X = rnorm(SampleSize)
 ??? Cor[repetition] = cor(X[-1],X[-length(X)])
 ? }
 ? return(Cor)
}

par(mfrow=c(3,3))
for(SampleSize_ in c(4,5,6,7,8,10,15,20,50)){
hist(DistributionAutocorrelation_Unexpected(SampleSize_),col='grey',main=paste0('SampleSize=',SampleSize_)) 
; abline(v=0,col=2)
}

output:


*Expected**:*

DistributionAutocorrelation_Expected = function(SampleSize){
 ? Cor = NULL
 ? for(repetition in 1:1e5){
 ??? X = rnorm(SampleSize)
*??? Cor[repetition] = cor(sample(X[-1]),sample(X[-length(X)]))*
 ? }
 ? return(Cor)
}

par(mfrow=c(3,3))
for(SampleSize_ in c(4,5,6,7,8,10,15,20,50)){
hist(DistributionAutocorrelation_Expected(SampleSize_),col='grey',main=paste0('SampleSize=',SampleSize_)) 
; abline(v=0,col=2)
}




Some more information you might need:


packageDescription("stats")
Package: stats
Version: 3.5.1
Priority: base
Title: The R Stats Package
Author: R Core Team and contributors worldwide
Maintainer: R Core Team <R-core at r-project.org>
Description: R statistical functions.
License: Part of R 3.5.1
Imports: utils, grDevices, graphics
Suggests: MASS, Matrix, SuppDists, methods, stats4
NeedsCompilation: yes
Built: R 3.5.1; x86_64-pc-linux-gnu; 2018-07-03 02:12:37 UTC; unix

Thanks for correcting that.

fill free to ask any further information you would need.

cheers,

hugo


-- 
- no title specified

Hugo Math?-Hubert

ATER

Laboratoire Interdisciplinaire des Environnements Continentaux (LIEC)

UMR 7360 CNRS - ?B?t IBISE

Universit? de Lorraine ?- ?UFR SciFA

8, Rue du G?n?ral Delestraint

F-57070 METZ

+33(0)9 77 21 66 66
- - - - - - - - - - - - - - - - - -
Les r?flexions naissent dans les doutes et meurent dans les certitudes. 
Les doutes sont donc un signe de force et les certitudes un signe de 
faiblesse. La plupart des gens sont pourtant certains du contraire.
- - - - - - - - - - - - - - - - - -
Thoughts appear from doubts and die in convictions. Therefore, doubts 
are an indication of strength and convictions an indication of weakness. 
Yet, most people believe the opposite.



From j@n@@nn@ert @end|ng |rom u@ntwerpen@be  Thu Oct  4 13:23:59 2018
From: j@n@@nn@ert @end|ng |rom u@ntwerpen@be (Annaert Jan)
Date: Thu, 4 Oct 2018 11:23:59 +0000
Subject: [R] Bug : Autocorrelation in sample drawn from stats::rnorm
In-Reply-To: <a92bbb3c-35a2-049c-a18a-afcf78e689c4@gmx.fr>
References: <a218224b-fdbd-2736-8cf9-6894c4a3adbd@gmx.fr>
 <a92bbb3c-35a2-049c-a18a-afcf78e689c4@gmx.fr>
Message-ID: <5795765504f44ce7928655d3ef2037f5@uantwerpen.be>


Did you take into account that the sample serial correlation coefficient has a bias of approximately -1/T (with T the sample size)? Its variance is approximately 1/T.
Jan Annaert



-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of hmh
Sent: donderdag 4 oktober 2018 12:09
To: R <r-help at r-project.org>
Subject: [R] Bug : Autocorrelation in sample drawn from stats::rnorm

Hi,


I just noticed the following bug:

When we draw a random sample using the function stats::rnorm, there should be not auto-correlation in the sample. But their is some auto-correlation _when the sample that is drawn is small_.

I describe the problem using two functions:

DistributionAutocorrelation_Unexpected which as the wrong behavior : 
_when drawing some small samples using rnorm, there is generally a strong negative auto-correlation in the sample_.

and

DistributionAutocorrelation_Expected which illustrate the expected behavior



*Unexpected : *

DistributionAutocorrelation_Unexpected = function(SampleSize){
 ? Cor = NULL
 ? for(repetition in 1:1e5){
 ??? X = rnorm(SampleSize)
 ??? Cor[repetition] = cor(X[-1],X[-length(X)])
 ? }
 ? return(Cor)
}

par(mfrow=c(3,3))
for(SampleSize_ in c(4,5,6,7,8,10,15,20,50)){
hist(DistributionAutocorrelation_Unexpected(SampleSize_),col='grey',main=paste0('SampleSize=',SampleSize_))
; abline(v=0,col=2)
}

output:


*Expected**:*

DistributionAutocorrelation_Expected = function(SampleSize){
 ? Cor = NULL
 ? for(repetition in 1:1e5){
 ??? X = rnorm(SampleSize)
*??? Cor[repetition] = cor(sample(X[-1]),sample(X[-length(X)]))*
 ? }
 ? return(Cor)
}

par(mfrow=c(3,3))
for(SampleSize_ in c(4,5,6,7,8,10,15,20,50)){
hist(DistributionAutocorrelation_Expected(SampleSize_),col='grey',main=paste0('SampleSize=',SampleSize_))
; abline(v=0,col=2)
}




Some more information you might need:


packageDescription("stats")
Package: stats
Version: 3.5.1
Priority: base
Title: The R Stats Package
Author: R Core Team and contributors worldwide
Maintainer: R Core Team <R-core at r-project.org>
Description: R statistical functions.
License: Part of R 3.5.1
Imports: utils, grDevices, graphics
Suggests: MASS, Matrix, SuppDists, methods, stats4
NeedsCompilation: yes
Built: R 3.5.1; x86_64-pc-linux-gnu; 2018-07-03 02:12:37 UTC; unix

Thanks for correcting that.

fill free to ask any further information you would need.

cheers,

hugo


-- 
- no title specified

Hugo Math?-Hubert

ATER

Laboratoire Interdisciplinaire des Environnements Continentaux (LIEC)

UMR 7360 CNRS - ?B?t IBISE

Universit? de Lorraine ?- ?UFR SciFA

8, Rue du G?n?ral Delestraint

F-57070 METZ

+33(0)9 77 21 66 66
- - - - - - - - - - - - - - - - - -
Les r?flexions naissent dans les doutes et meurent dans les certitudes. 
Les doutes sont donc un signe de force et les certitudes un signe de 
faiblesse. La plupart des gens sont pourtant certains du contraire.
- - - - - - - - - - - - - - - - - -
Thoughts appear from doubts and die in convictions. Therefore, doubts 
are an indication of strength and convictions an indication of weakness. 
Yet, most people believe the opposite.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

From r@nj@nm@no167 @end|ng |rom gm@||@com  Thu Oct  4 18:03:59 2018
From: r@nj@nm@no167 @end|ng |rom gm@||@com (Manoranjan Muthusamy)
Date: Thu, 4 Oct 2018 17:03:59 +0100
Subject: [R] R - Reading a horizontally arranged csv file,
 replacing values and saving again
In-Reply-To: <CAF8bMcYBJgUc3Tu_1WAeUE-SN6HKQv26fGfnzj6NSu_kU-JUdg@mail.gmail.com>
References: <CANqyHbTC9JF4JQRKOu2YeiL43V3VpTWCA4-tnXpXDYack0d94g@mail.gmail.com>
 <CAF8bMcZ3gid0Zb0_e7eTG67XeH7tj0eZw5Hh79m0v=v44gLDcg@mail.gmail.com>
 <CANqyHbS5OupmnRi47fON7krzxMYiYy1o+pLeD2D+3zb9+QQ15w@mail.gmail.com>
 <CAF8bMcYBJgUc3Tu_1WAeUE-SN6HKQv26fGfnzj6NSu_kU-JUdg@mail.gmail.com>
Message-ID: <CANqyHbQzqNC7ynb9brMFB+b_vAg6+6D6SMgAgSJn_y-hHC4gQA@mail.gmail.com>

That's exactly what I was looking for. Never used readLines before which is
why I was struggling.  Many thanks. I asked the same question in Stack
Overflow as well. But no answers yet. I will post the link to your answer.
Thanks again.

On Wed, Oct 3, 2018 at 5:51 PM William Dunlap <wdunlap at tibco.com> wrote:

> Using read.table to read data with a variable number of entries per row is
> probably a mistake - data.frames (which read.table returns) are not meant
> for this sort of data.  You want to store the data in R as a list with
> names.  E.g.,
>
> readYourFormat <- function(connection) {
>     # connection is a file name or connection object referring
>     # to text of the form
>     # Header A,Some text
>     # Header B,<number>,<number>,<number>
>     # Header C,<number>
>     # Header D,<number>,<number>,<number>,<number>
>     lines <- readLines(connection)
>     lines <- lines[ nchar(lines)>0 ] # omit empty lines
>     fields <- strsplit(lines, ",") # split lines by commas into fields
>     headers <- vapply(fields, function(x)x[1], FUN.VALUE="") # first entry
> is header
>     names(fields) <- headers
>     contents <- lapply(fields, function(x)x[-1]) # remaining entries are
> contents
>     contents[-1] <- lapply(contents[-1], as.numeric) # convert all but
> first line's entries to numeric
>     contents
> }
>
> After reading the data and fiddling with it (but keeping it a named list),
> you can write it out in a similar format with
>
> writeYourFormat <- function (data, connection = stdout())
> {
>     stopifnot(is.list(data), !is.null(names(data)))
>     cat(file = connection, sep = "\n", paste(sep = ",", names(data),
>         vapply(data, paste, collapse = ",", FUN.VALUE = "")))
> }
>
>
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
>
> On Wed, Oct 3, 2018 at 3:05 AM, Manoranjan Muthusamy <
> ranjanmano167 at gmail.com> wrote:
>
>> Thanks for the short but informative answer, Bill. But still, each row
>> has four columns..right? Although the *NA* is replaced by a blank cell,
>> because of the extra comma it still is a four column row. Is there any way
>> to avoid/remove the extra comma when NA is replaced which will make it a
>> three column row?
>>
>>
>>
>> On Mon, Oct 1, 2018 at 4:56 PM William Dunlap <wdunlap at tibco.com> wrote:
>>
>>> Read the help file for write.table
>>>    ?write.table
>>> and look at the descriptions of its arguments.
>>>   > df <- data.frame(Text=c("Abe","Ben",NA,"David"), Age=c(19, NA, 12,
>>> 10))
>>>   > write.table(file=stdout(), t(df), sep=",")
>>>   "V1","V2","V3","V4"
>>>   "Text","Abe","Ben",NA,"David"
>>>   "Age","19",NA,"12","10"
>>>   > write.table(file=stdout(), t(df), quote=FALSE, na="", sep=",")
>>>   V1,V2,V3,V4
>>>   Text,Abe,Ben,,David
>>>   Age,19,,12,10
>>>
>>>
>>>
>>>
>>> Bill Dunlap
>>> TIBCO Software
>>> wdunlap tibco.com
>>>
>>> On Mon, Oct 1, 2018 at 2:24 AM, Manoranjan Muthusamy <
>>> ranjanmano167 at gmail.com> wrote:
>>>
>>>> I have a horizontally arranged CSV file
>>>> <https://www.dropbox.com/s/0ukyuifvpq1olqk/samplefile.csv?dl=0> (
>>>> samplefile.csv) with headers are in the first column. Also, each row
>>>> has a
>>>> different number of columns. I want to read this CSV file, replace one
>>>> of
>>>> the cell value and save again as a CSV file with the same format as the
>>>> original file with exactly same number of columns and rows. It sounds
>>>> like
>>>> a simple task, but I am struggling to find a way. I tried to do this
>>>> with
>>>> the help of this
>>>> <
>>>> https://stackoverflow.com/questions/17288197/reading-a-csv-file-organized-horizontally
>>>> >
>>>>  and this
>>>> <
>>>> https://stackoverflow.com/questions/20308621/how-do-i-write-a-csv-file-in-r-where-my-input-is-written-to-the-file-as-row
>>>> >
>>>> posts,
>>>> but still, I can't get the output the way I want. Can somebody help me
>>>> here?
>>>>
>>>> My attempt using the answer in this post
>>>> <
>>>> https://stackoverflow.com/questions/17288197/reading-a-csv-file-organized-horizontally
>>>> >
>>>> to
>>>> read the CSV file (samplefile.csv) gives me the following output where
>>>> headers are kinda messed up and empty cells are replaced with NA values
>>>> which is not what I want
>>>>
>>>> aaa <- read.tcsv("samplefile.csv")
>>>> aaa
>>>>
>>>>      Header.1 Header.2..units. Header.3..units. Header.3..units..11
>>>> Some text           0.0625                0             2648962
>>>> <NA>           0.0625             1200             6647473        <NA>
>>>>           0.0625             1380                  14        <NA>
>>>>      0.2500             1500                  15        <NA>
>>>> 0.6250             1620                 NA6        <NA>
>>>> 1.3125             1740                 NA7        <NA>
>>>> 2.4375             1860                 NA8        <NA>
>>>> 3.5625             1980                 NA9        <NA>
>>>> 4.6250             2100                 NA10       <NA>
>>>> 5.0000             2220                 NA11       <NA>
>>>> 5.0000             2340                 NA12       <NA>
>>>> 4.6250             2460                 NA13       <NA>
>>>> 3.5625             2580                 NA14       <NA>
>>>> 2.4375             2700                 NA15       <NA>
>>>> 1.3125             2820                 NA16       <NA>
>>>> 0.6250             2940                 NA17       <NA>
>>>> 0.2500             3060                 NA18       <NA>
>>>> 0.0625             3180                 NA19       <NA>
>>>> 0.0000             3300                 NA20       <NA>
>>>> 0.0000            18000                 NA
>>>>
>>>> Also, I am not sure how to go back to original format when I save the
>>>> file
>>>> again after a modification (for example after replacing a cell value)
>>>>
>>>> I tried saving the file again by using t (transpose) as given below
>>>>
>>>> write.csv(t(aaa), file ="samplefile_e.csv", row.names=T)
>>>>
>>>> but still, there are following issues in the saved file
>>>>
>>>>    1. messed up headers
>>>>    2. empty cells are replaced with NA
>>>>    3. when I open the file in a text editor all the values are shown as
>>>>    characters
>>>>
>>>> Thanks,
>>>> Mano
>>>>
>>>>         [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>
>>>
>

	[[alternative HTML version deleted]]



From @uy@n@cy @end|ng |rom gm@||@com  Thu Oct  4 19:06:39 2018
From: @uy@n@cy @end|ng |rom gm@||@com (Nancy S)
Date: Thu, 4 Oct 2018 13:06:39 -0400
Subject: [R] savehistory()
Message-ID: <CAHqCQvib9_d9Czkugz3z6iWStE5BwtLbSjpSUniiW=pyggPSBw@mail.gmail.com>

Hi,

I just  start to learn R, but I have problem to use "savehistory()"

When I run, it pops out "Error in .External2(C_savehistory, file) :
  'savehistory' is not currently implemented". I searched a little bit
online, but I still cannot figure out how to fix that.

thanks,
Suy

	[[alternative HTML version deleted]]



From @@r@h@go@|ee @end|ng |rom gm@||@com  Thu Oct  4 19:23:07 2018
From: @@r@h@go@|ee @end|ng |rom gm@||@com (Sarah Goslee)
Date: Thu, 4 Oct 2018 13:23:07 -0400
Subject: [R] savehistory()
In-Reply-To: <CAHqCQvib9_d9Czkugz3z6iWStE5BwtLbSjpSUniiW=pyggPSBw@mail.gmail.com>
References: <CAHqCQvib9_d9Czkugz3z6iWStE5BwtLbSjpSUniiW=pyggPSBw@mail.gmail.com>
Message-ID: <CAM_vjunHf8e+2eO8UNZt08rRJwPMHF7pe3jEHR1j8bXONDsK5g@mail.gmail.com>

Hi Suy,

It is very important to specify what OS and version of R you're using.

But I'm going to make a wild guess that you're using Mac, and that you
didn't read the documentation for savehistory() carefully.

"R.app, the console on macOS, has a separate and largely incompatible
history mechanism, which by default uses a file .Rapp.history and saves up
to 250 entries. These functions are not currently implemented there."

https://www.rdocumentation.org/packages/utils/versions/3.5.1/topics/savehistory
or
?savehistory

If my wild guess is wrong, then you'll need, at a minimum, to provide the
output of
sessionInfo()
for anyone to be able to help you.

Sarah

On Thu, Oct 4, 2018 at 1:11 PM Nancy S <suy.nacy at gmail.com> wrote:

> Hi,
>
> I just  start to learn R, but I have problem to use "savehistory()"
>
> When I run, it pops out "Error in .External2(C_savehistory, file) :
>   'savehistory' is not currently implemented". I searched a little bit
> online, but I still cannot figure out how to fix that.
>
> thanks,
> Suy
>
-- 
Sarah Goslee
http://www.functionaldiversity.org <http://www.functionaldiversity.org>

	[[alternative HTML version deleted]]



From ycd|ng @end|ng |rom coh@org  Thu Oct  4 20:06:43 2018
From: ycd|ng @end|ng |rom coh@org (Ding, Yuan Chun)
Date: Thu, 4 Oct 2018 18:06:43 +0000
Subject: [R] heatmap.2, adding a legend at bottom
Message-ID: <A86C6438FB909A409DDEF926277952B61102221A@PPWEXCH2KX14.coh.org>

Hi All,

I generated the attached heatmap using the following  R code and attached testfile.

I tried to move the legend to the bottom, Can anyone help me?  I have play for 3 hours and can not resolve the problem.

Thank  you,

Ding


----------------------------------------------------------------------------
png("heatmaps_test2.png",   # create PNG for the heat map
    width = 5*300,        # 5 x 300 pixels
    height = 5*300,
    res = 300,            # 300 pixels per inch
    pointsize = 8  # smaller font size
)

# lmat = rbind(c(0,0,4),c(3,1,2),c(0,0,5))
# #1.      RowSideColors;2.Heatmap;3.Row tree;4.Column tree;5.Color key
# lwid = c(0.8,0.15,7) # lwid controls the column width
# lhei = c(0.1,5.5,1) #lhei controls the row height


my_palette2 <- colorRampPalette(c("blue", "cyan4", "red"))(n = 299)
col_breaks = c(seq(-1.5,-1.1,length=100), # for bllue
               seq(-1.099,1.099,length=100),  # for green
               seq(1.1,1.5,length=100)) # for red
cols <- c("red", "black", "blue")
heatmap.2(as.matrix(testfile), key=T,
          #lmat=lmat, lwid=lwid, lhei=lhei,
          symkey=FALSE,#keysize=1, key.par =list(cex=0.25),
          key.xlab="Heatmap color key",
          key.title =" ",
          RowSideColors= cols[as.numeric(as.factor(allinfo.blood$Group))],
          density.info="none",  # turns off density plot inside color legend
          trace="none",         # turns off trace lines inside the heat map
          col=my_palette2, # use color palette defined earlier
          breaks=col_breaks,
          cexRow=1.4,
          labCol=" ", # default to colnames(x)
          #labRow=" ",
          #margins =c(12,9),
          #Colv="NA", # only draw a row dendrogram
          hclust=function(x) hclust(x,method="complete"),
          distfun=function(x) as.dist((1-cor(t(x)))/2)
          ) # using pearson correlation as distance
groups = levels(as.factor(allinfo.blood$Group))
legend(0.2,0.1, groups, col=cols, pch=15, ncol = 3, cex=1)
dev.off()

------------------------------------------------------------
-SECURITY/CONFIDENTIALITY WARNING-  

This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to receive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)
------------------------------------------------------------

-------------- next part --------------
A non-text attachment was scrubbed...
Name: heatmaps_test2.png
Type: image/png
Size: 37145 bytes
Desc: heatmaps_test2.png
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20181004/aa61a1d4/attachment-0002.png>

From ycd|ng @end|ng |rom coh@org  Thu Oct  4 20:18:33 2018
From: ycd|ng @end|ng |rom coh@org (Ding, Yuan Chun)
Date: Thu, 4 Oct 2018 18:18:33 +0000
Subject: [R] heatmap.2, adding a legend at bottom
In-Reply-To: <A86C6438FB909A409DDEF926277952B61102221A@PPWEXCH2KX14.coh.org>
References: <A86C6438FB909A409DDEF926277952B61102221A@PPWEXCH2KX14.coh.org>
Message-ID: <A86C6438FB909A409DDEF926277952B611022246@PPWEXCH2KX14.coh.org>


Hi All,

I generated the attached heatmap using the following  R code and attached testfile.

I tried to move the legend to the bottom, Can anyone help me?  I have played for 3 hours and can not resolve the problem.

I realized that in the last email, I forgot to include the "Group" variable for legend. I added to the R code below.

Thank  you,

Ding


----------------------------------------------------------------------------
png("heatmaps_test2.png",   # create PNG for the heat map
    width = 5*300,        # 5 x 300 pixels
    height = 5*300,
    res = 300,            # 300 pixels per inch
    pointsize = 8  # smaller font size
)

# lmat = rbind(c(0,0,4),c(3,1,2),c(0,0,5))
# #1.      RowSideColors;2.Heatmap;3.Row tree;4.Column tree;5.Color key
# lwid = c(0.8,0.15,7) # lwid controls the column width # lhei = c(0.1,5.5,1) #lhei controls the row height


my_palette2 <- colorRampPalette(c("blue", "cyan4", "red"))(n = 299) col_breaks = c(seq(-1.5,-1.1,length=100), # for bllue
               seq(-1.099,1.099,length=100),  # for green
               seq(1.1,1.5,length=100)) # for red cols <- c("red", "black", "blue") heatmap.2(as.matrix(testfile), key=T,
          #lmat=lmat, lwid=lwid, lhei=lhei,
          symkey=FALSE,#keysize=1, key.par =list(cex=0.25),
          key.xlab="Heatmap color key",
          key.title =" ",
          RowSideColors= cols[as.numeric(as.factor(allinfo.blood$Group))],
          density.info="none",  # turns off density plot inside color legend
          trace="none",         # turns off trace lines inside the heat map
          col=my_palette2, # use color palette defined earlier
          breaks=col_breaks,
          cexRow=1.4,
          labCol=" ", # default to colnames(x)
          #labRow=" ",
          #margins =c(12,9),
          #Colv="NA", # only draw a row dendrogram
          hclust=function(x) hclust(x,method="complete"),
          distfun=function(x) as.dist((1-cor(t(x)))/2)
          ) # using pearson correlation as distance

Group <-c("Blood: Vector", "Blood: Vector", "Blood: E2", "Blood: E2",    
"Blood: E2+BP3",  "Blood: E2+BP3",  "Blood: Vector",  "Blood: Vector",
"Blood: E2", "Blood: E2", "Blood: E2+BP3",  "Blood: E2+BP3")

 groups = levels(as.factor(Group))
legend(0.2,0.1, groups, col=cols, pch=15, ncol = 3, cex=1)
dev.off()



------------------------------------------------------------
-SECURITY/CONFIDENTIALITY WARNING-  

This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to receive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)
------------------------------------------------------------

-------------- next part --------------
A non-text attachment was scrubbed...
Name: heatmaps_test2.png
Type: image/png
Size: 37145 bytes
Desc: heatmaps_test2.png
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20181004/14cbf315/attachment-0002.png>

From dc@r|@on @end|ng |rom t@mu@edu  Thu Oct  4 21:08:53 2018
From: dc@r|@on @end|ng |rom t@mu@edu (David L Carlson)
Date: Thu, 4 Oct 2018 19:08:53 +0000
Subject: [R] heatmap.2, adding a legend at bottom
In-Reply-To: <A86C6438FB909A409DDEF926277952B611022246@PPWEXCH2KX14.coh.org>
References: <A86C6438FB909A409DDEF926277952B61102221A@PPWEXCH2KX14.coh.org>
 <A86C6438FB909A409DDEF926277952B611022246@PPWEXCH2KX14.coh.org>
Message-ID: <835b9ffdd4394972b9bc8c3eef6c05cc@tamu.edu>

It will take a bit of trial and error. Use this example as a guide. You will probably have to set the y coordinate to a negative value and include xpd=TRUE:

> data(mtcars)
> x  <- as.matrix(mtcars)
> heatmap.2(x)
> legend(.5, -.1, "Legend", xpd=TRUE)

----------------------------------------
David L Carlson
Department of Anthropology
Texas A&M University
College Station, TX 77843-4352

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Ding, Yuan Chun
Sent: Thursday, October 4, 2018 1:19 PM
To: r-help at r-project.org
Subject: Re: [R] heatmap.2, adding a legend at bottom


Hi All,

I generated the attached heatmap using the following  R code and attached testfile.

I tried to move the legend to the bottom, Can anyone help me?  I have played for 3 hours and can not resolve the problem.

I realized that in the last email, I forgot to include the "Group" variable for legend. I added to the R code below.

Thank  you,

Ding


----------------------------------------------------------------------------
png("heatmaps_test2.png",   # create PNG for the heat map
    width = 5*300,        # 5 x 300 pixels
    height = 5*300,
    res = 300,            # 300 pixels per inch
    pointsize = 8  # smaller font size
)

# lmat = rbind(c(0,0,4),c(3,1,2),c(0,0,5))
# #1.      RowSideColors;2.Heatmap;3.Row tree;4.Column tree;5.Color key
# lwid = c(0.8,0.15,7) # lwid controls the column width # lhei = c(0.1,5.5,1) #lhei controls the row height


my_palette2 <- colorRampPalette(c("blue", "cyan4", "red"))(n = 299) col_breaks = c(seq(-1.5,-1.1,length=100), # for bllue
               seq(-1.099,1.099,length=100),  # for green
               seq(1.1,1.5,length=100)) # for red cols <- c("red", "black", "blue") heatmap.2(as.matrix(testfile), key=T,
          #lmat=lmat, lwid=lwid, lhei=lhei,
          symkey=FALSE,#keysize=1, key.par =list(cex=0.25),
          key.xlab="Heatmap color key",
          key.title =" ",
          RowSideColors= cols[as.numeric(as.factor(allinfo.blood$Group))],
          density.info="none",  # turns off density plot inside color legend
          trace="none",         # turns off trace lines inside the heat map
          col=my_palette2, # use color palette defined earlier
          breaks=col_breaks,
          cexRow=1.4,
          labCol=" ", # default to colnames(x)
          #labRow=" ",
          #margins =c(12,9),
          #Colv="NA", # only draw a row dendrogram
          hclust=function(x) hclust(x,method="complete"),
          distfun=function(x) as.dist((1-cor(t(x)))/2)
          ) # using pearson correlation as distance

Group <-c("Blood: Vector", "Blood: Vector", "Blood: E2", "Blood: E2",    
"Blood: E2+BP3",  "Blood: E2+BP3",  "Blood: Vector",  "Blood: Vector",
"Blood: E2", "Blood: E2", "Blood: E2+BP3",  "Blood: E2+BP3")

 groups = levels(as.factor(Group))
legend(0.2,0.1, groups, col=cols, pch=15, ncol = 3, cex=1)
dev.off()



------------------------------------------------------------
-SECURITY/CONFIDENTIALITY WARNING-  

This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to receive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)



From ycd|ng @end|ng |rom coh@org  Thu Oct  4 21:18:06 2018
From: ycd|ng @end|ng |rom coh@org (Ding, Yuan Chun)
Date: Thu, 4 Oct 2018 19:18:06 +0000
Subject: [R] heatmap.2, adding a legend at bottom
In-Reply-To: <835b9ffdd4394972b9bc8c3eef6c05cc@tamu.edu>
References: <A86C6438FB909A409DDEF926277952B61102221A@PPWEXCH2KX14.coh.org>
 <A86C6438FB909A409DDEF926277952B611022246@PPWEXCH2KX14.coh.org>
 <835b9ffdd4394972b9bc8c3eef6c05cc@tamu.edu>
Message-ID: <A86C6438FB909A409DDEF926277952B6110222B8@PPWEXCH2KX14.coh.org>

Hi David,

Thank you so much!!  Problem resolved. xpd=TRUE does the trick to put a legend outside.

Ding

-----Original Message-----
From: David L Carlson [mailto:dcarlson at tamu.edu] 
Sent: Thursday, October 04, 2018 12:09 PM
To: Ding, Yuan Chun; r-help at r-project.org
Subject: RE: heatmap.2, adding a legend at bottom

It will take a bit of trial and error. Use this example as a guide. You will probably have to set the y coordinate to a negative value and include xpd=TRUE:

> data(mtcars)
> x  <- as.matrix(mtcars)
> heatmap.2(x)
> legend(.5, -.1, "Legend", xpd=TRUE)

----------------------------------------
David L Carlson
Department of Anthropology
Texas A&M University
College Station, TX 77843-4352

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Ding, Yuan Chun
Sent: Thursday, October 4, 2018 1:19 PM
To: r-help at r-project.org
Subject: Re: [R] heatmap.2, adding a legend at bottom


Hi All,

I generated the attached heatmap using the following  R code and attached testfile.

I tried to move the legend to the bottom, Can anyone help me?  I have played for 3 hours and can not resolve the problem.

I realized that in the last email, I forgot to include the "Group" variable for legend. I added to the R code below.

Thank  you,

Ding


----------------------------------------------------------------------------
png("heatmaps_test2.png",   # create PNG for the heat map
    width = 5*300,        # 5 x 300 pixels
    height = 5*300,
    res = 300,            # 300 pixels per inch
    pointsize = 8  # smaller font size
)

# lmat = rbind(c(0,0,4),c(3,1,2),c(0,0,5))
# #1.      RowSideColors;2.Heatmap;3.Row tree;4.Column tree;5.Color key
# lwid = c(0.8,0.15,7) # lwid controls the column width # lhei = c(0.1,5.5,1) #lhei controls the row height


my_palette2 <- colorRampPalette(c("blue", "cyan4", "red"))(n = 299) col_breaks = c(seq(-1.5,-1.1,length=100), # for bllue
               seq(-1.099,1.099,length=100),  # for green
               seq(1.1,1.5,length=100)) # for red cols <- c("red", "black", "blue") heatmap.2(as.matrix(testfile), key=T,
          #lmat=lmat, lwid=lwid, lhei=lhei,
          symkey=FALSE,#keysize=1, key.par =list(cex=0.25),
          key.xlab="Heatmap color key",
          key.title =" ",
          RowSideColors= cols[as.numeric(as.factor(allinfo.blood$Group))],
          density.info="none",  # turns off density plot inside color legend
          trace="none",         # turns off trace lines inside the heat map
          col=my_palette2, # use color palette defined earlier
          breaks=col_breaks,
          cexRow=1.4,
          labCol=" ", # default to colnames(x)
          #labRow=" ",
          #margins =c(12,9),
          #Colv="NA", # only draw a row dendrogram
          hclust=function(x) hclust(x,method="complete"),
          distfun=function(x) as.dist((1-cor(t(x)))/2)
          ) # using pearson correlation as distance

Group <-c("Blood: Vector", "Blood: Vector", "Blood: E2", "Blood: E2",    
"Blood: E2+BP3",  "Blood: E2+BP3",  "Blood: Vector",  "Blood: Vector",
"Blood: E2", "Blood: E2", "Blood: E2+BP3",  "Blood: E2+BP3")

 groups = levels(as.factor(Group))
legend(0.2,0.1, groups, col=cols, pch=15, ncol = 3, cex=1)
dev.off()



------------------------------------------------------------
-SECURITY/CONFIDENTIALITY WARNING-  

This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to receive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)



From o||yoxen|ree1997 @end|ng |rom y@hoo@c@  Fri Oct  5 01:52:06 2018
From: o||yoxen|ree1997 @end|ng |rom y@hoo@c@ (William Bell)
Date: Thu, 4 Oct 2018 23:52:06 +0000 (UTC)
Subject: [R] 
 Bug : Autocorrelation in sample drawn from stats::rnorm (hmh)
References: <1607055752.4873464.1538697126419.ref@mail.yahoo.com>
Message-ID: <1607055752.4873464.1538697126419@mail.yahoo.com>

Hi Hugo,
I've been able to replicate your bug, including for other distributions (runif, rexp, rgamma, etc) which shouldn't be surprising since they're probably all drawing from the same pseudo-random number generator. ?Interestingly, it does not seem to depend on the choice of seed, I am not sure why that is the case.
I'll point out first of all that the R-devel mailing list is perhaps better suited for this query, I'm fairly sure we're supposed to direct bug reports, etc there.
It is possible this is a known quantity but is tolerated, I could think of many reasons why that might be the case, not least of which being that as far as I know, the vast majority of Monte Carlo methods involve >>40 trials (which seems to be enough for the effect to disappear), with the possible exception of procedures for testing the power of statistical tests on small samples?
There might be more to be said, but I thought I'd just add what I could from playing around with it a little bit.
For anyone who wishes to give it a try, I suggest this implementation of the autocorrelation tester which is about 80 times faster:
DistributionAutocorrelation_new <- function(SampleSize)????{
? ? Cor <- replicate(1e5, function() {X <- rnorm(SampleSize)? ? return(cor(X[-1], X[-length(X)]))})? ? return(Cor)}
I have the same Stats package version installed.
- (Thomas) William BellHons BSc Candidate (Biology and Mathematics)BA Candidate (Philosophy)McMaster University
# Hi,#?#?# I just noticed the following bug:# ??# ? When we draw a random sample using the function stats::rnorm, there?# should be not auto-correlation in the sample. But their is some?# auto-correlation _when the sample that is drawn is small_.#?# I describe the problem using two functions:# ??# ? DistributionAutocorrelation_Unexpected which as the wrong behavior :?# ? _when drawing some small samples using rnorm, there is generally a?# strong negative auto-correlation in the sample_.#?# and#?# DistributionAutocorrelation_Expected which illustrate the expected behavior#?#?#?# *Unexpected : *# ??# ? DistributionAutocorrelation_Unexpected = function(SampleSize){# ? ? Cor = NULL# ? ? for(repetition in 1:1e5){# ? ? ? X = rnorm(SampleSize)# ? ? ? Cor[repetition] = cor(X[-1],X[-length(X)])# ? ? }# ? ? return(Cor)# ? }#?# par(mfrow=c(3,3))# for(SampleSize_ in c(4,5,6,7,8,10,15,20,50)){# ? hist(DistributionAutocorrelation_Unexpected(SampleSize_),col='grey',main=paste0('SampleSize=',SampleSize_))?# ? ; abline(v=0,col=2)# }#?# output:# ??# ??# ? *Expected**:*# ??# ? DistributionAutocorrelation_Expected = function(SampleSize){# ? ? Cor = NULL# ? ? for(repetition in 1:1e5){# ? ? ? X = rnorm(SampleSize)# ? ? ? * ? ?Cor[repetition] = cor(sample(X[-1]),sample(X[-length(X)]))*# ? ? }# ? ? return(Cor)# ? }#?# par(mfrow=c(3,3))# for(SampleSize_ in c(4,5,6,7,8,10,15,20,50)){# ? hist(DistributionAutocorrelation_Expected(SampleSize_),col='grey',main=paste0('SampleSize=',SampleSize_))?# ? ; abline(v=0,col=2)# }#?#?#?#?# Some more information you might need:# ??# ??# ? packageDescription("stats")# Package: stats# Version: 3.5.1# Priority: base# Title: The R Stats Package# Author: R Core Team and contributors worldwide# Maintainer: R Core Team <R-core at r-project.org># ? Description: R statistical functions.# License: Part of R 3.5.1# Imports: utils, grDevices, graphics# Suggests: MASS, Matrix, SuppDists, methods, stats4# NeedsCompilation: yes# Built: R 3.5.1; x86_64-pc-linux-gnu; 2018-07-03 02:12:37 UTC; unix#?# Thanks for correcting that.#?# fill free to ask any further information you would need.#?# cheers,#?# hugo#?#?# --?# ? - no title specified#?# Hugo Math?-Hubert#?# ATER#?# Laboratoire Interdisciplinaire des Environnements Continentaux (LIEC)#?# UMR 7360 CNRS - ?B?t IBISE#?# Universit? de Lorraine ?- ?UFR SciFA#?# 8, Rue du G?n?ral Delestraint#?# F-57070 METZ#?# +33(0)9 77 21 66 66# - - - - - - - - - - - - - - - - - -# ? Les r?flexions naissent dans les doutes et meurent dans les certitudes.?# Les doutes sont donc un signe de force et les certitudes un signe de?# faiblesse. La plupart des gens sont pourtant certains du contraire.# - - - - - - - - - - - - - - - - - -# ? Thoughts appear from doubts and die in convictions. Therefore, doubts?# are an indication of strength and convictions an indication of weakness.?# Yet, most people believe the opposite.
	[[alternative HTML version deleted]]



From |@h@ndke @end|ng |rom tu-br@un@chwe|g@de  Fri Oct  5 07:09:57 2018
From: |@h@ndke @end|ng |rom tu-br@un@chwe|g@de (Lisa Handke)
Date: Fri, 5 Oct 2018 07:09:57 +0200
Subject: [R] Help plotting recurrence matrix
Message-ID: <008401d45c69$ac18e0a0$044aa1e0$@tu-braunschweig.de>

Hi everyone,

 

I am trying to plot a recurrence matrix (package: nonlinearTseries).

 

This is my command, which gives the plot as found in the attached image
(example 1):

 

Team1 <- read.delim("Team1.txt", header =TRUE)

Team1_plot <- rqa(time.series = Team1$Kat5, embedding.dim = 1, time.lag = 1,

                radius = 0.1,lmin =2, vmin =2, distanceToBorder = 2, save.RM
= TRUE,

                do.plot = FALSE )

 

RP <- Team1_plot$recurrence.matrix

image (RP)

 

My first problem

 

1.	I cannot change the labeling of the axis limits

 

While this command helps rotate the datapoints WITHIN the plot as desired
(example 2):

 

image(t(RP[,ncol(RP):1])) # rotate matrix by 90? and plot

 

the labeling of the axes is still wrong (the y-axis still starts with 223).
Adding parameters such as ylim or ymax has not helped.

 

2.	I am trying to convert it into a colour-coded image. I have
categories ranging from numbers 1 to 5 (as well as random unique larger
numbers referring to nonrecurrent values). With some help, I have managed to
assign my numeric values in my data to colours using this function:

 

RP2 <- as.matrix(RP)*1

TS <- Team1$Kat5

for (i in seq(1,dim(RP2)[1])) {

  for (j in seq(1,dim(RP2)[1])) {

    if (RP2[i,j] == 1 & TS[i] < 6) { # test if recurrence is present in RP
AND corresponding value in the time-series is < 6, in which case that
Recurrent is coded according to the value in the time series

      RP2[i,j] <- TS[i]

    } else if (RP2[i,j] == 1 & TS[i] < 6) { # if the above is not the case,
test if recurrence is present in RP AND corresponding value in the
time-series is > 5, in which case that recurrence is deleted from the RP

      RP2[i,j] <- 0

    }

  }

}

 

image.scale(RP2, zlim=c(1,5),col= c("yellow", "red", "blue", "green",
"orange")

 

My problem is that the image I receive from doing this (see attachment) is
scaled from 0 to 1 and I seem to be incapable of understanding why this is
and how to change it. Once again, I have tried using y and x lim as well as
max functions, but have not managed to attain any results.

 

I realize these are amateur questions but I have been struggling with this
for quite some time and would really appreciate any help I can get.

 

Thanks and best regards,

Lisa

 



From hugomh @end|ng |rom gmx@|r  Fri Oct  5 09:45:10 2018
From: hugomh @end|ng |rom gmx@|r (hmh)
Date: Fri, 5 Oct 2018 09:45:10 +0200
Subject: [R] 
 Bug : Autocorrelation in sample drawn from stats::rnorm (hmh)
In-Reply-To: <1607055752.4873464.1538697126419@mail.yahoo.com>
References: <1607055752.4873464.1538697126419.ref@mail.yahoo.com>
 <1607055752.4873464.1538697126419@mail.yahoo.com>
Message-ID: <f5169c3a-cd6b-1ba4-9701-4119f4123db3@gmx.fr>

Hi,

Thanks William for this fast answer, and sorry for sending the 1st mail 
to r-help instead to r-devel.


I noticed that bug while I was simulating many small random walks using 
c(0,cumsum(rnorm(10))). Then the negative auto-correlation was inducing 
a muchsmaller space visited by the random walks than expected if there 
would be no auto-correlation in the samples.


The code I provided and you optimized was only provided to illustrated 
and investigate that bug.


It is really worrying that most of the R distributions are affected by 
this bug !!!!

What I did should have been one of the first check done for _*each*_ 
distributions by the developers of these functions !


And if as you suggested this is a "tolerated" _error_ of the algorithm, 
I do think this is a bad choice, but any way, this should have been 
mentioned in the documentations of the functions !!


cheers,

hugo


On 05/10/2018 01:52, William Bell wrote:
> Hi Hugo,
>
> I've been able to replicate your bug, including for other 
> distributions (runif, rexp, rgamma, etc) which shouldn't be surprising 
> since they're probably all drawing from the same pseudo-random number 
> generator. ?Interestingly, it does not seem to depend on the choice of 
> seed, I am not sure why that is the case.
>
> I'll point out first of all that the R-devel mailing list is perhaps 
> better suited for this query, I'm fairly sure we're supposed to direct 
> bug reports, etc there.
>
> It is possible this is a known quantity but is tolerated, I could 
> think of many reasons why that might be the case, not least of which 
> being that as far as I know, the vast majority of Monte Carlo methods 
> involve >>40 trials (which seems to be enough for the effect to 
> disappear), with the possible exception of procedures for testing the 
> power of statistical tests on small samples?
>
> There might be more to be said, but I thought I'd just add what I 
> could from playing around with it a little bit.
>
> For anyone who wishes to give it a try, I suggest this implementation 
> of the autocorrelation tester which is about 80 times faster:
>
> DistributionAutocorrelation_new <- function(SampleSize)????{
> ? ? Cor <- replicate(1e5, function() {X <- rnorm(SampleSize)
> ? ? return(cor(X[-1], X[-length(X)]))})
> ? ? return(Cor)
> }
>
> I have the same Stats package version installed.
>
> - (Thomas) William Bell
> Hons BSc Candidate (Biology and Mathematics)
> BA Candidate (Philosophy)
> McMaster University
>
> # Hi,
> #
> #
> # I just noticed the following bug:
> #
> # ? When we draw a random sample using the function stats::rnorm, there
> # should be not auto-correlation in the sample. But their is some
> # auto-correlation _when the sample that is drawn is small_.
> #
> # I describe the problem using two functions:
> #
> # ? DistributionAutocorrelation_Unexpected which as the wrong behavior :
> # ? _when drawing some small samples using rnorm, there is generally a
> # strong negative auto-correlation in the sample_.
> #
> # and
> #
> # DistributionAutocorrelation_Expected which illustrate the expected 
> behavior
> #
> #
> #
> # *Unexpected : *
> #
> # ? DistributionAutocorrelation_Unexpected = function(SampleSize){
> # ? ? Cor = NULL
> # ? ? for(repetition in 1:1e5){
> # ? ? ? X = rnorm(SampleSize)
> # ? ? ? Cor[repetition] = cor(X[-1],X[-length(X)])
> # ? ? }
> # ? ? return(Cor)
> # ? }
> #
> # par(mfrow=c(3,3))
> # for(SampleSize_ in c(4,5,6,7,8,10,15,20,50)){
> # 
> hist(DistributionAutocorrelation_Unexpected(SampleSize_),col='grey',main=paste0('SampleSize=',SampleSize_)) 
>
> # ? ; abline(v=0,col=2)
> # }
> #
> # output:
> #
> #
> # ? *Expected**:*
> #
> # ? DistributionAutocorrelation_Expected = function(SampleSize){
> # ? ? Cor = NULL
> # ? ? for(repetition in 1:1e5){
> # ? ? ? X = rnorm(SampleSize)
> # ? ? ? * ? ?Cor[repetition] = cor(sample(X[-1]),sample(X[-length(X)]))*
> # ? ? }
> # ? ? return(Cor)
> # ? }
> #
> # par(mfrow=c(3,3))
> # for(SampleSize_ in c(4,5,6,7,8,10,15,20,50)){
> # 
> hist(DistributionAutocorrelation_Expected(SampleSize_),col='grey',main=paste0('SampleSize=',SampleSize_)) 
>
> # ? ; abline(v=0,col=2)
> # }
> #
> #
> #
> #
> # Some more information you might need:
> #
> #
> # ? packageDescription("stats")
> # Package: stats
> # Version: 3.5.1
> # Priority: base
> # Title: The R Stats Package
> # Author: R Core Team and contributors worldwide
> # Maintainer: R Core Team <R-core at r-project.org>
> # ? Description: R statistical functions.
> # License: Part of R 3.5.1
> # Imports: utils, grDevices, graphics
> # Suggests: MASS, Matrix, SuppDists, methods, stats4
> # NeedsCompilation: yes
> # Built: R 3.5.1; x86_64-pc-linux-gnu; 2018-07-03 02:12:37 UTC; unix
> #
> # Thanks for correcting that.
> #
> # fill free to ask any further information you would need.
> #
> # cheers,
> #
> # hugo
> #
> #
> # --
> # ? - no title specified
> #
> # Hugo Math?-Hubert
> #
> # ATER
> #
> # Laboratoire Interdisciplinaire des Environnements Continentaux (LIEC)
> #
> # UMR 7360 CNRS - ?B?t IBISE
> #
> # Universit? de Lorraine ?- ?UFR SciFA
> #
> # 8, Rue du G?n?ral Delestraint
> #
> # F-57070 METZ
> #
> # +33(0)9 77 21 66 66
> # - - - - - - - - - - - - - - - - - -
> # ? Les r?flexions naissent dans les doutes et meurent dans les 
> certitudes.
> # Les doutes sont donc un signe de force et les certitudes un signe de
> # faiblesse. La plupart des gens sont pourtant certains du contraire.
> # - - - - - - - - - - - - - - - - - -
> # ? Thoughts appear from doubts and die in convictions. Therefore, doubts
> # are an indication of strength and convictions an indication of 
> weakness.
> # Yet, most people believe the opposite.

-- 
- no title specified

Hugo Math?-Hubert

ATER

Laboratoire Interdisciplinaire des Environnements Continentaux (LIEC)

UMR 7360 CNRS - ?B?t IBISE

Universit? de Lorraine ?- ?UFR SciFA

8, Rue du G?n?ral Delestraint

F-57070 METZ

+33(0)9 77 21 66 66
- - - - - - - - - - - - - - - - - -
Les r?flexions naissent dans les doutes et meurent dans les certitudes. 
Les doutes sont donc un signe de force et les certitudes un signe de 
faiblesse. La plupart des gens sont pourtant certains du contraire.
- - - - - - - - - - - - - - - - - -
Thoughts appear from doubts and die in convictions. Therefore, doubts 
are an indication of strength and convictions an indication of weakness. 
Yet, most people believe the opposite.


	[[alternative HTML version deleted]]



From j@n@@nn@ert @end|ng |rom u@ntwerpen@be  Fri Oct  5 09:58:15 2018
From: j@n@@nn@ert @end|ng |rom u@ntwerpen@be (Annaert Jan)
Date: Fri, 5 Oct 2018 07:58:15 +0000
Subject: [R] 
 Bug : Autocorrelation in sample drawn from stats::rnorm (hmh)
In-Reply-To: <f5169c3a-cd6b-1ba4-9701-4119f4123db3@gmx.fr>
References: <1607055752.4873464.1538697126419.ref@mail.yahoo.com>
 <1607055752.4873464.1538697126419@mail.yahoo.com>
 <f5169c3a-cd6b-1ba4-9701-4119f4123db3@gmx.fr>
Message-ID: <61E0376C-8813-4678-B4AF-12D57017624C@ua.ac.be>

On 05/10/2018, 09:45, "R-help on behalf of hmh" <r-help-bounces at r-project.org on behalf of hugomh at gmx.fr> wrote:

    Hi,
    
    Thanks William for this fast answer, and sorry for sending the 1st mail 
    to r-help instead to r-devel.
    
    
    I noticed that bug while I was simulating many small random walks using 
    c(0,cumsum(rnorm(10))). Then the negative auto-correlation was inducing 
    a muchsmaller space visited by the random walks than expected if there 
    would be no auto-correlation in the samples.
    
    
    The code I provided and you optimized was only provided to illustrated 
    and investigate that bug.
    
    
    It is really worrying that most of the R distributions are affected by 
    this bug !!!!
    
    What I did should have been one of the first check done for _*each*_ 
    distributions by the developers of these functions !
    
    
    And if as you suggested this is a "tolerated" _error_ of the algorithm, 
    I do think this is a bad choice, but any way, this should have been 
    mentioned in the documentations of the functions !!
    
    
    cheers,
    
    hugo
 
This is not a bug. You have simply rediscovered the finite-sample bias in the sample autocorrelation coefficient, known at least since
Kendall, M. G. (1954). Note on bias in the estimation of autocorrelation. Biometrika, 41(3-4), 403-404. 

The bias is approximately -1/T, with T sample size, which explains why it seems to disappear in the larger sample sizes you consider.

Jan


From hugomh @end|ng |rom gmx@|r  Fri Oct  5 10:36:58 2018
From: hugomh @end|ng |rom gmx@|r (hmh)
Date: Fri, 5 Oct 2018 10:36:58 +0200
Subject: [R] 
 Bug : Autocorrelation in sample drawn from stats::rnorm (hmh)
In-Reply-To: <ABD057D3-5E10-44B4-B4DD-0FB04D475B52@ua.ac.be>
References: <1607055752.4873464.1538697126419.ref@mail.yahoo.com>
 <1607055752.4873464.1538697126419@mail.yahoo.com>
 <f5169c3a-cd6b-1ba4-9701-4119f4123db3@gmx.fr>
 <61E0376C-8813-4678-B4AF-12D57017624C@ua.ac.be>
 <aa15aaef-d56c-e44a-e618-61c69e9b36a7@gmx.fr>
 <ABD057D3-5E10-44B4-B4DD-0FB04D475B52@ua.ac.be>
Message-ID: <5154ab19-d82c-ca24-676f-7eaeb03196f0@gmx.fr>

On 05/10/2018 10:28, Annaert Jan wrote:
> you discard any time series structure;
But that is PRECISELY what a call a bug:
There should not be any "time series structure" in the output or rnorm, 
runif and so on but there is one.

rnorm(N,0,1)
should give on average the same output as
sample(rnorm(N,0,1))

Which is not the case. rnorm(N,0,1) should draw INDEPENDENT samples i.e. 
without time series structure !


-- 
- no title specified

Hugo Math?-Hubert

ATER

Laboratoire Interdisciplinaire des Environnements Continentaux (LIEC)

UMR 7360 CNRS - ?B?t IBISE

Universit? de Lorraine ?- ?UFR SciFA

8, Rue du G?n?ral Delestraint

F-57070 METZ

+33(0)9 77 21 66 66
- - - - - - - - - - - - - - - - - -
Les r?flexions naissent dans les doutes et meurent dans les certitudes. 
Les doutes sont donc un signe de force et les certitudes un signe de 
faiblesse. La plupart des gens sont pourtant certains du contraire.
- - - - - - - - - - - - - - - - - -
Thoughts appear from doubts and die in convictions. Therefore, doubts 
are an indication of strength and convictions an indication of weakness. 
Yet, most people believe the opposite.


	[[alternative HTML version deleted]]



From Anne@Ch@tton @end|ng |rom hcuge@ch  Fri Oct  5 10:45:51 2018
From: Anne@Ch@tton @end|ng |rom hcuge@ch (CHATTON Anne)
Date: Fri, 5 Oct 2018 08:45:51 +0000
Subject: [R] Strange paradox
Message-ID: <a12441c953ba4d5ab8a21c3693e84533@wexchprod08.huge.ad.hcuge.ch>

Hello,

I am currently analysed two nested models using the same sample. Both the simpler model (Model 1 ~ x1 + x2) and the more complex model (Model 2 ~ x1 + x2 + x3 + x4) yield the same adjusted R-square. Yet the p-value associated with the deviance statistic is highly significant (p=0.0047), suggesting that the confounders (x3 and x4) account for the prediction of the dependent variable.

Does anyone have an explanation of this strange paradox?

Thank you for any suggestion.

Anne



From p@u|john32 @end|ng |rom gm@||@com  Fri Oct  5 10:46:50 2018
From: p@u|john32 @end|ng |rom gm@||@com (Paul Johnson)
Date: Fri, 5 Oct 2018 03:46:50 -0500
Subject: [R] 
 Problems to obtain standardized betas in multiply-imputed data
In-Reply-To: <1b906c9b735b4d428ae528ef6609f74e@wexchprod08.huge.ad.hcuge.ch>
References: <1b906c9b735b4d428ae528ef6609f74e@wexchprod08.huge.ad.hcuge.ch>
Message-ID: <CAErODj877awdC5W66cBegG9xLn43_Y-EeOy+bw6+FOFTp09EuQ@mail.gmail.com>

Greetings.
I would adjust approach  to calculate standardized estimates for each
imputed set. Then summarize them . The way you are doing it here implies
that standardization concept applies to model list, which seems doubtful.
The empirical std. dev. of the variables differs among imputed data sets,
after all.

I suppose I mean to say lm.beta is not intended to receive a list of
regressions. Put standardization in the with() work done on each imputed
set. I suspect it is as easy as putting lm.beta in there. If there is
trouble, I have a standardize function in the rockchalk package. Unlike
lm.beta, it actually standardizes variables and runs regression. lm.beta
resales coefficients instead.

Paul Johnson
University of Kansas

On Wed, Sep 26, 2018, 5:03 AM CHATTON Anne via R-help <r-help at r-project.org>
wrote:

> Dear all,
>
> I am having problems in obtaining standardized betas on a multiply-imputed
> data set. Here are the codes I used :
> imp = mice(data, 5, maxit=10, seed=42, print=FALSE)
> FitImp <- with(imp,lm(y ~ x1 + x2 + x3))
> Up to here everything is fine. But when I ask for the standardized
> coefficients of the multiply-imputed regressions using this command :
> sdBeta <- lm.beta(FitImp)
> I get the following error message:
> Error in b * sx : argument non num?rique pour un op?rateur binaire
>
> Can anyone help me with this please?
>
> Anne
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From deep@y@n@@@rk@r @end|ng |rom gm@||@com  Fri Oct  5 11:16:47 2018
From: deep@y@n@@@rk@r @end|ng |rom gm@||@com (Deepayan Sarkar)
Date: Fri, 5 Oct 2018 14:46:47 +0530
Subject: [R] 
 Bug : Autocorrelation in sample drawn from stats::rnorm (hmh)
In-Reply-To: <5154ab19-d82c-ca24-676f-7eaeb03196f0@gmx.fr>
References: <1607055752.4873464.1538697126419.ref@mail.yahoo.com>
 <1607055752.4873464.1538697126419@mail.yahoo.com>
 <f5169c3a-cd6b-1ba4-9701-4119f4123db3@gmx.fr>
 <61E0376C-8813-4678-B4AF-12D57017624C@ua.ac.be>
 <aa15aaef-d56c-e44a-e618-61c69e9b36a7@gmx.fr>
 <ABD057D3-5E10-44B4-B4DD-0FB04D475B52@ua.ac.be>
 <5154ab19-d82c-ca24-676f-7eaeb03196f0@gmx.fr>
Message-ID: <CADfFDC49X87yVfjVjBer3prLnuy5SaP-U+ekxiyHhBaY_RKvUw@mail.gmail.com>

On Fri, Oct 5, 2018 at 2:07 PM hmh <hugomh at gmx.fr> wrote:
>
> On 05/10/2018 10:28, Annaert Jan wrote:
> > you discard any time series structure;
> But that is PRECISELY what a call a bug:
> There should not be any "time series structure" in the output or rnorm,
> runif and so on but there is one.
>
> rnorm(N,0,1)
> should give on average the same output as
> sample(rnorm(N,0,1))

Agreed, but that is not what your code is testing. You seem to think
that something much more specific should be true; namely,

X[1:10] ~ iid normal, then

cor(X[1:9], X[2:10])

and

cor(sample(X[-1]), sample(X[-10]))

should have the same distribution. This is not at all obvious, and in
fact not true.

Please check the reference you have been pointed to. Here is a related
article in the same volume:

https://www.jstor.org/stable/2332719

-Deepayan


> Which is not the case. rnorm(N,0,1) should draw INDEPENDENT samples i.e.
> without time series structure !
>
>
> --
> - no title specified
>
> Hugo Math?-Hubert
>
> ATER
>
> Laboratoire Interdisciplinaire des Environnements Continentaux (LIEC)
>
> UMR 7360 CNRS -  B?t IBISE
>
> Universit? de Lorraine  -  UFR SciFA
>
> 8, Rue du G?n?ral Delestraint
>
> F-57070 METZ
>
> +33(0)9 77 21 66 66
> - - - - - - - - - - - - - - - - - -
> Les r?flexions naissent dans les doutes et meurent dans les certitudes.
> Les doutes sont donc un signe de force et les certitudes un signe de
> faiblesse. La plupart des gens sont pourtant certains du contraire.
> - - - - - - - - - - - - - - - - - -
> Thoughts appear from doubts and die in convictions. Therefore, doubts
> are an indication of strength and convictions an indication of weakness.
> Yet, most people believe the opposite.
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



From hugomh @end|ng |rom gmx@|r  Fri Oct  5 11:32:36 2018
From: hugomh @end|ng |rom gmx@|r (hmh)
Date: Fri, 5 Oct 2018 11:32:36 +0200
Subject: [R] 
 Bug : Autocorrelation in sample drawn from stats::rnorm (hmh)
In-Reply-To: <CADfFDC49X87yVfjVjBer3prLnuy5SaP-U+ekxiyHhBaY_RKvUw@mail.gmail.com>
References: <1607055752.4873464.1538697126419.ref@mail.yahoo.com>
 <1607055752.4873464.1538697126419@mail.yahoo.com>
 <f5169c3a-cd6b-1ba4-9701-4119f4123db3@gmx.fr>
 <61E0376C-8813-4678-B4AF-12D57017624C@ua.ac.be>
 <aa15aaef-d56c-e44a-e618-61c69e9b36a7@gmx.fr>
 <ABD057D3-5E10-44B4-B4DD-0FB04D475B52@ua.ac.be>
 <5154ab19-d82c-ca24-676f-7eaeb03196f0@gmx.fr>
 <CADfFDC49X87yVfjVjBer3prLnuy5SaP-U+ekxiyHhBaY_RKvUw@mail.gmail.com>
Message-ID: <50bfae14-5049-222b-bb30-0a985710a4ef@gmx.fr>

I got it !


thanks and sorry for annoying you with that.


have a nice day,

hugo


On 05/10/2018 11:16, Deepayan Sarkar wrote:
> On Fri, Oct 5, 2018 at 2:07 PM hmh <hugomh at gmx.fr> wrote:
>> On 05/10/2018 10:28, Annaert Jan wrote:
>>> you discard any time series structure;
>> But that is PRECISELY what a call a bug:
>> There should not be any "time series structure" in the output or rnorm,
>> runif and so on but there is one.
>>
>> rnorm(N,0,1)
>> should give on average the same output as
>> sample(rnorm(N,0,1))
> Agreed, but that is not what your code is testing. You seem to think
> that something much more specific should be true; namely,
>
> X[1:10] ~ iid normal, then
>
> cor(X[1:9], X[2:10])
>
> and
>
> cor(sample(X[-1]), sample(X[-10]))
>
> should have the same distribution. This is not at all obvious, and in
> fact not true.
>
> Please check the reference you have been pointed to. Here is a related
> article in the same volume:
>
> https://www.jstor.org/stable/2332719
>
> -Deepayan
>
>
>> Which is not the case. rnorm(N,0,1) should draw INDEPENDENT samples i.e.
>> without time series structure !
>>
>>
>> --
>> - no title specified
>>
>> Hugo Math?-Hubert
>>
>> ATER
>>
>> Laboratoire Interdisciplinaire des Environnements Continentaux (LIEC)
>>
>> UMR 7360 CNRS -  B?t IBISE
>>
>> Universit? de Lorraine  -  UFR SciFA
>>
>> 8, Rue du G?n?ral Delestraint
>>
>> F-57070 METZ
>>
>> +33(0)9 77 21 66 66
>> - - - - - - - - - - - - - - - - - -
>> Les r?flexions naissent dans les doutes et meurent dans les certitudes.
>> Les doutes sont donc un signe de force et les certitudes un signe de
>> faiblesse. La plupart des gens sont pourtant certains du contraire.
>> - - - - - - - - - - - - - - - - - -
>> Thoughts appear from doubts and die in convictions. Therefore, doubts
>> are an indication of strength and convictions an indication of weakness.
>> Yet, most people believe the opposite.
>>
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.

-- 
- no title specified

Hugo Math?-Hubert

ATER

Laboratoire Interdisciplinaire des Environnements Continentaux (LIEC)

UMR 7360 CNRS - ?B?t IBISE

Universit? de Lorraine ?- ?UFR SciFA

8, Rue du G?n?ral Delestraint

F-57070 METZ

+33(0)9 77 21 66 66
- - - - - - - - - - - - - - - - - -
Les r?flexions naissent dans les doutes et meurent dans les certitudes. 
Les doutes sont donc un signe de force et les certitudes un signe de 
faiblesse. La plupart des gens sont pourtant certains du contraire.
- - - - - - - - - - - - - - - - - -
Thoughts appear from doubts and die in convictions. Therefore, doubts 
are an indication of strength and convictions an indication of weakness. 
Yet, most people believe the opposite.


	[[alternative HTML version deleted]]



From hugomh @end|ng |rom gmx@|r  Fri Oct  5 10:11:53 2018
From: hugomh @end|ng |rom gmx@|r (hmh)
Date: Fri, 5 Oct 2018 10:11:53 +0200
Subject: [R] 
 Bug : Autocorrelation in sample drawn from stats::rnorm (hmh)
In-Reply-To: <61E0376C-8813-4678-B4AF-12D57017624C@ua.ac.be>
References: <1607055752.4873464.1538697126419.ref@mail.yahoo.com>
 <1607055752.4873464.1538697126419@mail.yahoo.com>
 <f5169c3a-cd6b-1ba4-9701-4119f4123db3@gmx.fr>
 <61E0376C-8813-4678-B4AF-12D57017624C@ua.ac.be>
Message-ID: <aa15aaef-d56c-e44a-e618-61c69e9b36a7@gmx.fr>

Nope.


This IS a bug:

_*The negative auto-correlation mostly disappear when I randomize small 
samples using the R function '*__*sample*__*'.*_


Please check thoroughly the code of the 1st mail I sent, there should be 
no difference between the two R functions I wrote to illustrate the bug.

The two functions that should produce the same output if there would be 
no bug are 'DistributionAutocorrelation_Unexpected' and 
'DistributionAutocorrelation_Expected'.

_/Please take the time to compare there output!!/_

The finite-sample bias in the sample autocorrelation coefficient you 
mention should affect them in the same manner. This bias is not the only 
phenomenon at work, *_there is ALSO as BUG !_*


Thanks


The first mail I sent is below :

_ _ _

Hi,


I just noticed the following bug:

When we draw a random sample using the function stats::rnorm, there 
should be not auto-correlation in the sample. But their is some 
auto-correlation _when the sample that is drawn is small_.

I describe the problem using two functions:

DistributionAutocorrelation_Unexpected which as the wrong behavior : 
_when drawing some small samples using rnorm, there is generally a 
strong negative auto-correlation in the sample_.

and

DistributionAutocorrelation_Expected which illustrate the expected behavior



*Unexpected : *

DistributionAutocorrelation_Unexpected = function(SampleSize){
 ? Cor = NULL
 ? for(repetition in 1:1e5){
 ??? X = rnorm(SampleSize)
 ??? Cor[repetition] = cor(X[-1],X[-length(X)])
 ? }
 ? return(Cor)
}

par(mfrow=c(3,3))
for(SampleSize_ in c(4,5,6,7,8,10,15,20,50)){
hist(DistributionAutocorrelation_Unexpected(SampleSize_),col='grey',main=paste0('SampleSize=',SampleSize_)) 
; abline(v=0,col=2)
}

output:


*Expected**:*

DistributionAutocorrelation_Expected = function(SampleSize){
 ? Cor = NULL
 ? for(repetition in 1:1e5){
 ??? X = rnorm(SampleSize)
*??? Cor[repetition] = cor(sample(X[-1]),sample(X[-length(X)]))*
 ? }
 ? return(Cor)
}

par(mfrow=c(3,3))
for(SampleSize_ in c(4,5,6,7,8,10,15,20,50)){
hist(DistributionAutocorrelation_Expected(SampleSize_),col='grey',main=paste0('SampleSize=',SampleSize_)) 
; abline(v=0,col=2)
}




Some more information you might need:


packageDescription("stats")
Package: stats
Version: 3.5.1
Priority: base
Title: The R Stats Package
Author: R Core Team and contributors worldwide
Maintainer: R Core Team <R-core at r-project.org>
Description: R statistical functions.
License: Part of R 3.5.1
Imports: utils, grDevices, graphics
Suggests: MASS, Matrix, SuppDists, methods, stats4
NeedsCompilation: yes
Built: R 3.5.1; x86_64-pc-linux-gnu; 2018-07-03 02:12:37 UTC; unix

Thanks for correcting that.

fill free to ask any further information you would need.

cheers,

hugo






On 05/10/2018 09:58, Annaert Jan wrote:
> On 05/10/2018, 09:45, "R-help on behalf of hmh" <r-help-bounces at r-project.org on behalf of hugomh at gmx.fr> wrote:
>
>      Hi,
>      
>      Thanks William for this fast answer, and sorry for sending the 1st mail
>      to r-help instead to r-devel.
>      
>      
>      I noticed that bug while I was simulating many small random walks using
>      c(0,cumsum(rnorm(10))). Then the negative auto-correlation was inducing
>      a muchsmaller space visited by the random walks than expected if there
>      would be no auto-correlation in the samples.
>      
>      
>      The code I provided and you optimized was only provided to illustrated
>      and investigate that bug.
>      
>      
>      It is really worrying that most of the R distributions are affected by
>      this bug !!!!
>      
>      What I did should have been one of the first check done for _*each*_
>      distributions by the developers of these functions !
>      
>      
>      And if as you suggested this is a "tolerated" _error_ of the algorithm,
>      I do think this is a bad choice, but any way, this should have been
>      mentioned in the documentations of the functions !!
>      
>      
>      cheers,
>      
>      hugo
>   
> This is not a bug. You have simply rediscovered the finite-sample bias in the sample autocorrelation coefficient, known at least since
> Kendall, M. G. (1954). Note on bias in the estimation of autocorrelation. Biometrika, 41(3-4), 403-404.
>
> The bias is approximately -1/T, with T sample size, which explains why it seems to disappear in the larger sample sizes you consider.
>
> Jan
>

-- 
- no title specified

Hugo Math?-Hubert

ATER

Laboratoire Interdisciplinaire des Environnements Continentaux (LIEC)

UMR 7360 CNRS - ?B?t IBISE

Universit? de Lorraine ?- ?UFR SciFA

8, Rue du G?n?ral Delestraint

F-57070 METZ

+33(0)9 77 21 66 66
- - - - - - - - - - - - - - - - - -
Les r?flexions naissent dans les doutes et meurent dans les certitudes. 
Les doutes sont donc un signe de force et les certitudes un signe de 
faiblesse. La plupart des gens sont pourtant certains du contraire.
- - - - - - - - - - - - - - - - - -
Thoughts appear from doubts and die in convictions. Therefore, doubts 
are an indication of strength and convictions an indication of weakness. 
Yet, most people believe the opposite.



From j@n@@nn@ert @end|ng |rom u@ntwerpen@be  Fri Oct  5 10:28:05 2018
From: j@n@@nn@ert @end|ng |rom u@ntwerpen@be (Annaert Jan)
Date: Fri, 5 Oct 2018 08:28:05 +0000
Subject: [R] 
 Bug : Autocorrelation in sample drawn from stats::rnorm (hmh)
In-Reply-To: <aa15aaef-d56c-e44a-e618-61c69e9b36a7@gmx.fr>
References: <1607055752.4873464.1538697126419.ref@mail.yahoo.com>
 <1607055752.4873464.1538697126419@mail.yahoo.com>
 <f5169c3a-cd6b-1ba4-9701-4119f4123db3@gmx.fr>
 <61E0376C-8813-4678-B4AF-12D57017624C@ua.ac.be>
 <aa15aaef-d56c-e44a-e618-61c69e9b36a7@gmx.fr>
Message-ID: <ABD057D3-5E10-44B4-B4DD-0FB04D475B52@ua.ac.be>



> Nope.

> This IS a bug:
> The negative auto-correlation mostly disappear when I randomize small samples using the R function 'sample'.

> Please check thoroughly the code of the 1st mail I sent, there should be no difference between the two R functions I wrote to illustrate the bug.
> The two functions that should produce the same output if there would be no bug are 'DistributionAutocorrelation_Unexpected' and  'DistributionAutocorrelation_Expected'.
>Please take the time to compare there output!!
>The finite-sample bias in the sample autocorrelation coefficient you mention should affect them in the same manner. This bias is not the only phenomenon at work, there is ALSO as BUG !

I disagree. Take a look at your code:
Cor[repetition] = cor(sample(X[-1]),sample(X[-length(X)]))

By sampling the two series in the correlation function, you discard any time series structure; you are no longer estimating a serial correlation coefficient, but just a correlation (which in this case is unbiased).
Try out the following:

Xs <- sample(X)
Cor[repetition] = cor(Xs[-1]),(Xs[-length(Xs)]))

The bias should reappear.

Jan


-------------- next part --------------
A non-text attachment was scrubbed...
Name: cclhgmpcmhoinmca.png
Type: image/png
Size: 76147 bytes
Desc: cclhgmpcmhoinmca.png
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20181005/1c25e7f4/attachment-0004.png>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: adeokhkijhbomjkp.png
Type: image/png
Size: 75264 bytes
Desc: adeokhkijhbomjkp.png
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20181005/1c25e7f4/attachment-0005.png>

From bgunter@4567 @end|ng |rom gm@||@com  Fri Oct  5 16:42:55 2018
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 5 Oct 2018 07:42:55 -0700
Subject: [R] Strange paradox
In-Reply-To: <a12441c953ba4d5ab8a21c3693e84533@wexchprod08.huge.ad.hcuge.ch>
References: <a12441c953ba4d5ab8a21c3693e84533@wexchprod08.huge.ad.hcuge.ch>
Message-ID: <CAGxFJbTmejAyai3f9+g5pD-1W6EtWcHQh=CD2SUvzEfGOKoyJA@mail.gmail.com>

This list is about R programming. Statistics questions, which this is, are
generally off topic here. Try posting on a statistics list like
stats.stackexchange.com instead.

Cheers,
Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Oct 5, 2018 at 1:48 AM CHATTON Anne via R-help <r-help at r-project.org>
wrote:

> Hello,
>
> I am currently analysed two nested models using the same sample. Both the
> simpler model (Model 1 ~ x1 + x2) and the more complex model (Model 2 ~ x1
> + x2 + x3 + x4) yield the same adjusted R-square. Yet the p-value
> associated with the deviance statistic is highly significant (p=0.0047),
> suggesting that the confounders (x3 and x4) account for the prediction of
> the dependent variable.
>
> Does anyone have an explanation of this strange paradox?
>
> Thank you for any suggestion.
>
> Anne
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From |cwp|eter@ @end|ng |rom gm@||@com  Fri Oct  5 16:30:05 2018
From: |cwp|eter@ @end|ng |rom gm@||@com (Ivy Pieters)
Date: Fri, 5 Oct 2018 16:30:05 +0200
Subject: [R] How can I create a loop for this? Please help me
Message-ID: <04758020-16E3-4E1D-B4A2-1005B9315732@gmail.com>

Hey there,
I am very much a newbie in the R world. I have to work with R for my internship. I really hope that someone can help me out here, since it costs me ages to run and adjust the same script over and over again. 

I have a SpatialPointsDataFrame table (sent2field2 at data) that I would like to split into different SpatialPointsDataFrame tables. The first table needs to consist out of [1:13] columns, the second table needs to consist of [,c(1,14:25)] the third needs to consist of [,c(1,26:37)]. The name of the tables need to be Sent2Field2_1, Sent2Field2_2, Sent2Field2_3, etc etc? So only 1,2,3,4 etc need to change within the name. This loop needs to go on until there are no columns left anymore in the dataset. Then the next step needs to add coordinates to the table (see script below). The name of the tables need to be Sent2F2_1, Sent2F2_2, Sent2F2_3, etc etc? So only 1,2,3,4 etc need to change within the name. The last step projects the table with the added coordinates into a SpatialPointsDataFrame. See the script below: (up to now I am adjusting the names manually and running it time after time, i am getting crazy, but I really don?t know how to make a loop) For now the separate steps are working fine. I really hope someone can help me out. Looking forward to anyones reply. Thank you already in advance. 

#field2
Sent2Field2_1<-Sent2Field2 at data[,1:13]
Sent2F2_1<-cbind(CoordsSent2_F2,Sent2Field2_1)
coordinates(Sent2F2_1) <- ~long+lat

Sent2Field2_2<-Sent2Field2 at data[,c(1,14:25)]
Sent2F2_2<-cbind(CoordsSent2_F2,Sent2Field2_2)
coordinates(Sent2F2_2) <- ~long+lat

Sent2Field2_3<-Sent2Field2 at data[,c(1,26:37)]
Sent2F2_3<-cbind(CoordsSent2_F2,Sent2Field2_3)
coordinates(Sent2F2_3) <- ~long+lat

Sent2Field2_4<-Sent2Field2 at data[,c(1,38:49)]
Sent2F2_4<-cbind(CoordsSent2_F2,Sent2Field2_4)
coordinates(Sent2F2_4) <- ~long+lat

Sent2Field2_5<-Sent2Field2 at data[,c(1,50:61)]
Sent2F2_5<-cbind(CoordsSent2_F2,Sent2Field2_5)
coordinates(Sent2F2_5) <- ~long+lat

etc 
etc




	[[alternative HTML version deleted]]



From bgunter@4567 @end|ng |rom gm@||@com  Fri Oct  5 17:42:24 2018
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 5 Oct 2018 08:42:24 -0700
Subject: [R] How can I create a loop for this? Please help me
In-Reply-To: <04758020-16E3-4E1D-B4A2-1005B9315732@gmail.com>
References: <04758020-16E3-4E1D-B4A2-1005B9315732@gmail.com>
Message-ID: <CAGxFJbSpA8VhUS8syBQe2FYLw+e+LoaMCPFGoasVVVd+Kdf3+g@mail.gmail.com>

Two things:

1. As your query is about spatial data, you may do better posting (in plain
text, **not** html, which often gets mangled on these plain text lists) on
the r-sig-geo  list.

2. These lists can help, but do not replace, your obligation to do your own
homework. There are many good R tutorials on the web that you can look to
for help. Some recommendations, by no means all that you may wish to check,
can be found here:

https://www.rstudio.com/online-learning/#r-programming

There are also both tutorials and "Vignettes" (the latter in the packages
themselves) specifically for spatial data analysis and visualization.
Searching on "R tutorial spatial data" brought up several.

Cheers,
Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Oct 5, 2018 at 8:12 AM Ivy Pieters <icwpieters at gmail.com> wrote:

> Hey there,
> I am very much a newbie in the R world. I have to work with R for my
> internship. I really hope that someone can help me out here, since it costs
> me ages to run and adjust the same script over and over again.
>
> I have a SpatialPointsDataFrame table (sent2field2 at data) that I would
> like to split into different SpatialPointsDataFrame tables. The first table
> needs to consist out of [1:13] columns, the second table needs to consist
> of [,c(1,14:25)] the third needs to consist of [,c(1,26:37)]. The name of
> the tables need to be Sent2Field2_1, Sent2Field2_2, Sent2Field2_3, etc etc?
> So only 1,2,3,4 etc need to change within the name. This loop needs to go
> on until there are no columns left anymore in the dataset. Then the next
> step needs to add coordinates to the table (see script below). The name of
> the tables need to be Sent2F2_1, Sent2F2_2, Sent2F2_3, etc etc? So only
> 1,2,3,4 etc need to change within the name. The last step projects the
> table with the added coordinates into a SpatialPointsDataFrame. See the
> script below: (up to now I am adjusting the names manually and running it
> time after time, i am getting crazy, but I really don?t know how to make a
> loop) For now the separate steps are working fine. I really hope someone
> can help me out. Looking forward to anyones reply. Thank you already in
> advance.
>
> #field2
> Sent2Field2_1<-Sent2Field2 at data[,1:13]
> Sent2F2_1<-cbind(CoordsSent2_F2,Sent2Field2_1)
> coordinates(Sent2F2_1) <- ~long+lat
>
> Sent2Field2_2<-Sent2Field2 at data[,c(1,14:25)]
> Sent2F2_2<-cbind(CoordsSent2_F2,Sent2Field2_2)
> coordinates(Sent2F2_2) <- ~long+lat
>
> Sent2Field2_3<-Sent2Field2 at data[,c(1,26:37)]
> Sent2F2_3<-cbind(CoordsSent2_F2,Sent2Field2_3)
> coordinates(Sent2F2_3) <- ~long+lat
>
> Sent2Field2_4<-Sent2Field2 at data[,c(1,38:49)]
> Sent2F2_4<-cbind(CoordsSent2_F2,Sent2Field2_4)
> coordinates(Sent2F2_4) <- ~long+lat
>
> Sent2Field2_5<-Sent2Field2 at data[,c(1,50:61)]
> Sent2F2_5<-cbind(CoordsSent2_F2,Sent2Field2_5)
> coordinates(Sent2F2_5) <- ~long+lat
>
> etc
> etc
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From m@cqueen1 @end|ng |rom ||n|@gov  Fri Oct  5 20:34:18 2018
From: m@cqueen1 @end|ng |rom ||n|@gov (MacQueen, Don)
Date: Fri, 5 Oct 2018 18:34:18 +0000
Subject: [R] How can I create a loop for this? Please help me
In-Reply-To: <04758020-16E3-4E1D-B4A2-1005B9315732@gmail.com>
References: <04758020-16E3-4E1D-B4A2-1005B9315732@gmail.com>
Message-ID: <72C001B2-ECC7-42DA-BD99-559F5C70091F@llnl.gov>

Bert (in his separate email) is right about learning the basics, and using R-sig-geo. You're kind of jumping right into the deep end! None the less, here's an example that should help.

For one thing, you're being more complicated than necessary. SpatialPointsDataFrame objects can, much of the time, be treated just like regular data frames. You don't need to extract the @data slot and operate on it.


## example with simple fake data
## for the example, I've decided on groups of three columns
## and 5 rows

set.seed(11198905)

## first, the coordinates and the single column that will be included every time.
sdf <- data.frame(long=runif(5, -121, -120),
                  lat=runif(5, 33, 34),
                  nm=letters[1:5])

## construct a set of data with 9 columns (3 sets of 3)
tmp <- matrix( round(runif(45, 10,20)), nrow=5)
colnames(tmp) <- paste0('v',1:9)
sdf <- cbind(sdf, tmp)

## make it into a SpatialPointsDataFrame
library(sp)
coordinates(sdf) <- c('long','lat')
plot(sdf)

## manually:
##   split into three separate SpatialPointsDataFrames, each with three data columns
s1 <- sdf[,c(1,2:4)]
s2 <- sdf[,c(1,5:7)]
s3 <- sdf[,c(1,8:10)]

## to use a loop, have to calculate which columns are needed each time through the loop
## (showing intermediate steps in more detail than truly necessary)

for (ic in 1:3) {

  ## calculate the column numbers
  col1 <- ic*3-1
  coln <- col1+2
  
  cat('iteration',ic,' selecting columns 1 and',col1,'through',coln,'\n')
  sic <- sdf[, c(1, col1:coln)]

  ## calculate the name of the new SpatialPointsDataFrame
  nmi <- paste0('sd',ic)
  cat('      assigning to ',nmi,'\n')

  ## write the current columns to .GlobalEnv
  assign( nmi, sic)

}

## now compare s1 with sd1, s2 with sd2, etc.
## they should be the same

## using assign() in this way is often recommended against. An alternative, which might be better depending on what you need to do with them, would be to save them as elements of a list object.

--
Don MacQueen
Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062
Lab cell 925-724-7509
 
 

?On 10/5/18, 7:30 AM, "R-help on behalf of Ivy Pieters" <r-help-bounces at r-project.org on behalf of icwpieters at gmail.com> wrote:

    Hey there,
    I am very much a newbie in the R world. I have to work with R for my internship. I really hope that someone can help me out here, since it costs me ages to run and adjust the same script over and over again. 
    
    I have a SpatialPointsDataFrame table (sent2field2 at data) that I would like to split into different SpatialPointsDataFrame tables. The first table needs to consist out of [1:13] columns, the second table needs to consist of [,c(1,14:25)] the third needs to consist of [,c(1,26:37)]. The name of the tables need to be Sent2Field2_1, Sent2Field2_2, Sent2Field2_3, etc etc? So only 1,2,3,4 etc need to change within the name. This loop needs to go on until there are no columns left anymore in the dataset. Then the next step needs to add coordinates to the table (see script below). The name of the tables need to be Sent2F2_1, Sent2F2_2, Sent2F2_3, etc etc? So only 1,2,3,4 etc need to change within the name. The last step projects the table with the added coordinates into a SpatialPointsDataFrame. See the script below: (up to now I am adjusting the names manually and running it time after time, i am getting crazy, but I really don?t know how to make a loop) For now the separate steps are working fine. I really hope someone can help me out. Looking forward to anyones reply. Thank you already in advance. 
    
    #field2
    Sent2Field2_1<-Sent2Field2 at data[,1:13]
    Sent2F2_1<-cbind(CoordsSent2_F2,Sent2Field2_1)
    coordinates(Sent2F2_1) <- ~long+lat
    
    Sent2Field2_2<-Sent2Field2 at data[,c(1,14:25)]
    Sent2F2_2<-cbind(CoordsSent2_F2,Sent2Field2_2)
    coordinates(Sent2F2_2) <- ~long+lat
    
    Sent2Field2_3<-Sent2Field2 at data[,c(1,26:37)]
    Sent2F2_3<-cbind(CoordsSent2_F2,Sent2Field2_3)
    coordinates(Sent2F2_3) <- ~long+lat
    
    Sent2Field2_4<-Sent2Field2 at data[,c(1,38:49)]
    Sent2F2_4<-cbind(CoordsSent2_F2,Sent2Field2_4)
    coordinates(Sent2F2_4) <- ~long+lat
    
    Sent2Field2_5<-Sent2Field2 at data[,c(1,50:61)]
    Sent2F2_5<-cbind(CoordsSent2_F2,Sent2Field2_5)
    coordinates(Sent2F2_5) <- ~long+lat
    
    etc 
    etc
    
    
    
    
    	[[alternative HTML version deleted]]
    
    ______________________________________________
    R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    https://stat.ethz.ch/mailman/listinfo/r-help
    PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    and provide commented, minimal, self-contained, reproducible code.
    



From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Oct  5 20:03:57 2018
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Fri, 05 Oct 2018 11:03:57 -0700
Subject: [R] How can I create a loop for this? Please help me
In-Reply-To: <CAGxFJbSpA8VhUS8syBQe2FYLw+e+LoaMCPFGoasVVVd+Kdf3+g@mail.gmail.com>
References: <04758020-16E3-4E1D-B4A2-1005B9315732@gmail.com>
 <CAGxFJbSpA8VhUS8syBQe2FYLw+e+LoaMCPFGoasVVVd+Kdf3+g@mail.gmail.com>
Message-ID: <326AC638-6522-4C85-A791-71C331A04D0E@dcn.davis.ca.us>

In addition to using plain text format when you post, please try to create a complete minimal example [1][2][3] that sets up a representative set of the variables you are using because the behavior of functions can change depending on what kind of data you are working with. For instance, so you have reason to believe that the number of columns will always divide out with no remainder? Why don't you split this data up before you create the one large SpatialPointsDataFrame? It is highly unusual to have multiple columns with the same names in any one data frame (it looks like you think two of each block of 12 columns will be named long and lat, but they all come from one source data frame).

[1] http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example

[2] http://adv-r.had.co.nz/Reproducibility.html

[3] https://cran.r-project.org/web/packages/reprex/index.html (read the vignette)

On October 5, 2018 8:42:24 AM PDT, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>Two things:
>
>1. As your query is about spatial data, you may do better posting (in
>plain
>text, **not** html, which often gets mangled on these plain text lists)
>on
>the r-sig-geo  list.
>
>2. These lists can help, but do not replace, your obligation to do your
>own
>homework. There are many good R tutorials on the web that you can look
>to
>for help. Some recommendations, by no means all that you may wish to
>check,
>can be found here:
>
>https://www.rstudio.com/online-learning/#r-programming
>
>There are also both tutorials and "Vignettes" (the latter in the
>packages
>themselves) specifically for spatial data analysis and visualization.
>Searching on "R tutorial spatial data" brought up several.
>
>Cheers,
>Bert
>
>Bert Gunter
>
>"The trouble with having an open mind is that people keep coming along
>and
>sticking things into it."
>-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
>On Fri, Oct 5, 2018 at 8:12 AM Ivy Pieters <icwpieters at gmail.com>
>wrote:
>
>> Hey there,
>> I am very much a newbie in the R world. I have to work with R for my
>> internship. I really hope that someone can help me out here, since it
>costs
>> me ages to run and adjust the same script over and over again.
>>
>> I have a SpatialPointsDataFrame table (sent2field2 at data) that I would
>> like to split into different SpatialPointsDataFrame tables. The first
>table
>> needs to consist out of [1:13] columns, the second table needs to
>consist
>> of [,c(1,14:25)] the third needs to consist of [,c(1,26:37)]. The
>name of
>> the tables need to be Sent2Field2_1, Sent2Field2_2, Sent2Field2_3,
>etc etc?
>> So only 1,2,3,4 etc need to change within the name. This loop needs
>to go
>> on until there are no columns left anymore in the dataset. Then the
>next
>> step needs to add coordinates to the table (see script below). The
>name of
>> the tables need to be Sent2F2_1, Sent2F2_2, Sent2F2_3, etc etc? So
>only
>> 1,2,3,4 etc need to change within the name. The last step projects
>the
>> table with the added coordinates into a SpatialPointsDataFrame. See
>the
>> script below: (up to now I am adjusting the names manually and
>running it
>> time after time, i am getting crazy, but I really don?t know how to
>make a
>> loop) For now the separate steps are working fine. I really hope
>someone
>> can help me out. Looking forward to anyones reply. Thank you already
>in
>> advance.
>>
>> #field2
>> Sent2Field2_1<-Sent2Field2 at data[,1:13]
>> Sent2F2_1<-cbind(CoordsSent2_F2,Sent2Field2_1)
>> coordinates(Sent2F2_1) <- ~long+lat
>>
>> Sent2Field2_2<-Sent2Field2 at data[,c(1,14:25)]
>> Sent2F2_2<-cbind(CoordsSent2_F2,Sent2Field2_2)
>> coordinates(Sent2F2_2) <- ~long+lat
>>
>> Sent2Field2_3<-Sent2Field2 at data[,c(1,26:37)]
>> Sent2F2_3<-cbind(CoordsSent2_F2,Sent2Field2_3)
>> coordinates(Sent2F2_3) <- ~long+lat
>>
>> Sent2Field2_4<-Sent2Field2 at data[,c(1,38:49)]
>> Sent2F2_4<-cbind(CoordsSent2_F2,Sent2Field2_4)
>> coordinates(Sent2F2_4) <- ~long+lat
>>
>> Sent2Field2_5<-Sent2Field2 at data[,c(1,50:61)]
>> Sent2F2_5<-cbind(CoordsSent2_F2,Sent2Field2_5)
>> coordinates(Sent2F2_5) <- ~long+lat
>>
>> etc
>> etc
>>
>>
>>
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.



From @|k@u||m @end|ng |rom |@@tm@||@|m  Sat Oct  6 02:08:49 2018
From: @|k@u||m @end|ng |rom |@@tm@||@|m (Albrecht Kauffmann)
Date: Sat, 06 Oct 2018 02:08:49 +0200
Subject: [R] How can I create a loop for this? Please help me
In-Reply-To: <04758020-16E3-4E1D-B4A2-1005B9315732@gmail.com>
References: <04758020-16E3-4E1D-B4A2-1005B9315732@gmail.com>
Message-ID: <1538784529.3648590.1532484736.5206D620@webmail.messagingengine.com>

Hi Ivy,

try this:

k <- 0
i  <- 1
while((k*12+13) <= ncol(Sent2Field2 at data) {
    i <- k+1
    n <- paste("Sent2Field2",i, sep="_")
    assign(n, Sent2Field2 at data[,c(1,k*12+c(2:13))])
    k <- k+1
}

Best, 
Albrecht

-- 
  Albrecht Kauffmann
  alkauffm at fastmail.fm

Am Fr, 5. Okt 2018, um 16:30, schrieb Ivy Pieters:
> Hey there,
> I am very much a newbie in the R world. I have to work with R for my 
> internship. I really hope that someone can help me out here, since it 
> costs me ages to run and adjust the same script over and over again. 
> 
> I have a SpatialPointsDataFrame table (sent2field2 at data) that I would 
> like to split into different SpatialPointsDataFrame tables. The first 
> table needs to consist out of [1:13] columns, the second table needs to 
> consist of [,c(1,14:25)] the third needs to consist of [,c(1,26:37)]. 
> The name of the tables need to be Sent2Field2_1, Sent2Field2_2, 
> Sent2Field2_3, etc etc? So only 1,2,3,4 etc need to change within the 
> name. This loop needs to go on until there are no columns left anymore 
> in the dataset. Then the next step needs to add coordinates to the table 
> (see script below). The name of the tables need to be Sent2F2_1, 
> Sent2F2_2, Sent2F2_3, etc etc? So only 1,2,3,4 etc need to change within 
> the name. The last step projects the table with the added coordinates 
> into a SpatialPointsDataFrame. See the script below: (up to now I am 
> adjusting the names manually and running it time after time, i am 
> getting crazy, but I really don?t know how to make a loop) For now the 
> separate steps are working fine. I really hope someone can help me out. 
> Looking forward to anyones reply. Thank you already in advance. 
> 
> #field2
> Sent2Field2_1<-Sent2Field2 at data[,1:13]
> Sent2F2_1<-cbind(CoordsSent2_F2,Sent2Field2_1)
> coordinates(Sent2F2_1) <- ~long+lat
> 
> Sent2Field2_2<-Sent2Field2 at data[,c(1,14:25)]
> Sent2F2_2<-cbind(CoordsSent2_F2,Sent2Field2_2)
> coordinates(Sent2F2_2) <- ~long+lat
> 
> Sent2Field2_3<-Sent2Field2 at data[,c(1,26:37)]
> Sent2F2_3<-cbind(CoordsSent2_F2,Sent2Field2_3)
> coordinates(Sent2F2_3) <- ~long+lat
> 
> Sent2Field2_4<-Sent2Field2 at data[,c(1,38:49)]
> Sent2F2_4<-cbind(CoordsSent2_F2,Sent2Field2_4)
> coordinates(Sent2F2_4) <- ~long+lat
> 
> Sent2Field2_5<-Sent2Field2 at data[,c(1,50:61)]
> Sent2F2_5<-cbind(CoordsSent2_F2,Sent2Field2_5)
> coordinates(Sent2F2_5) <- ~long+lat
> 
> etc 
> etc
> 
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



From @uy@n@cy @end|ng |rom gm@||@com  Sat Oct  6 04:38:10 2018
From: @uy@n@cy @end|ng |rom gm@||@com (Nancy S)
Date: Fri, 5 Oct 2018 22:38:10 -0400
Subject: [R] savehistory()
In-Reply-To: <CAM_vjunHf8e+2eO8UNZt08rRJwPMHF7pe3jEHR1j8bXONDsK5g@mail.gmail.com>
References: <CAHqCQvib9_d9Czkugz3z6iWStE5BwtLbSjpSUniiW=pyggPSBw@mail.gmail.com>
 <CAM_vjunHf8e+2eO8UNZt08rRJwPMHF7pe3jEHR1j8bXONDsK5g@mail.gmail.com>
Message-ID: <CAHqCQvjCZ5hXJnsp8sF=HSCAfoc_8TKJB1rcVox6arBtt2ax3g@mail.gmail.com>

Hi Sarah,

Thank you for pointing out this. I am using Mac.

Suy

On Thu, Oct 4, 2018 at 1:23 PM Sarah Goslee <sarah.goslee at gmail.com> wrote:

> Hi Suy,
>
> It is very important to specify what OS and version of R you're using.
>
> But I'm going to make a wild guess that you're using Mac, and that you
> didn't read the documentation for savehistory() carefully.
>
> "R.app, the console on macOS, has a separate and largely incompatible
> history mechanism, which by default uses a file .Rapp.history and saves
> up to 250 entries. These functions are not currently implemented there."
>
>
> https://www.rdocumentation.org/packages/utils/versions/3.5.1/topics/savehistory
> or
> ?savehistory
>
> If my wild guess is wrong, then you'll need, at a minimum, to provide the
> output of
> sessionInfo()
> for anyone to be able to help you.
>
> Sarah
>
> On Thu, Oct 4, 2018 at 1:11 PM Nancy S <suy.nacy at gmail.com> wrote:
>
>> Hi,
>>
>> I just  start to learn R, but I have problem to use "savehistory()"
>>
>> When I run, it pops out "Error in .External2(C_savehistory, file) :
>>   'savehistory' is not currently implemented". I searched a little bit
>> online, but I still cannot figure out how to fix that.
>>
>> thanks,
>> Suy
>>
> --
> Sarah Goslee
> http://www.functionaldiversity.org <http://www.functionaldiversity.org>
>

	[[alternative HTML version deleted]]



From @ubh@m|tr@@p@tr@ @end|ng |rom gm@||@com  Sat Oct  6 09:29:25 2018
From: @ubh@m|tr@@p@tr@ @end|ng |rom gm@||@com (Subhamitra Patra)
Date: Sat, 6 Oct 2018 12:59:25 +0530
Subject: [R] Requesting for help on the problem of "subscript out of bounds"
Message-ID: <CAOFE=kP+YbecTTHOj1rVFDecU_+iaZLgPX4UcGXWXZBca_TtHQ@mail.gmail.com>

Hello friends,

I am very new in this R world. But, still doing some programming by
learning. While running one code, I found the problem of "subscript out of
bounds". Please suggest me how to overcome this problem? For your
reference, I am uploading my code here.

The function

approx_entropy(ts, edim =2, r = 0.2*sd(ts), elag = 1)

library(pracma)

N<-nrow(mat)
r<-matrix(0, nrow = N, ncol = 1)for (i in 1:N){
     r[i]<-approx_entropy(mat[i,], edim = 2, r = 0.2*sd(mat[i,]), elag = 1)}

After running this code, I am getting the error of

*"subscript out of bounds"*

Please help me for which I shall be always grateful to you.

Thanks in advance.



-- 
*Best Regards,*
*Subhamitra Patra*
*Phd. Research Scholar*
*Department of Humanities and Social Sciences*
*Indian Institute of Technology, Kharagpur*
*INDIA*

	[[alternative HTML version deleted]]



From drj|m|emon @end|ng |rom gm@||@com  Sat Oct  6 10:51:56 2018
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Sat, 6 Oct 2018 18:51:56 +1000
Subject: [R] 
 Requesting for help on the problem of "subscript out of bounds"
In-Reply-To: <CAOFE=kP+YbecTTHOj1rVFDecU_+iaZLgPX4UcGXWXZBca_TtHQ@mail.gmail.com>
References: <CAOFE=kP+YbecTTHOj1rVFDecU_+iaZLgPX4UcGXWXZBca_TtHQ@mail.gmail.com>
Message-ID: <CA+8X3fW6X1fgAY0PKzS00oOz=9LHUDdx-cQeFctMq8izcYT8qQ@mail.gmail.com>

Hi Subhamitra,
Where I think the error arises is in the line:

 N<-nrow(mat)

Since we don't know what "mat" is, we don't know what nrow(mat) will
return. If "mat" is not a matrix or data frame, it is likely to be
NULL. Try this:

print(N)

after defining it and see what it is.

Jim

On Sat, Oct 6, 2018 at 5:51 PM Subhamitra Patra
<subhamitra.patra at gmail.com> wrote:
>
> Hello friends,
>
> I am very new in this R world. But, still doing some programming by
> learning. While running one code, I found the problem of "subscript out of
> bounds". Please suggest me how to overcome this problem? For your
> reference, I am uploading my code here.
>
> The function
>
> approx_entropy(ts, edim =2, r = 0.2*sd(ts), elag = 1)
>
> library(pracma)
>
> N<-nrow(mat)
> r<-matrix(0, nrow = N, ncol = 1)for (i in 1:N){
>      r[i]<-approx_entropy(mat[i,], edim = 2, r = 0.2*sd(mat[i,]), elag = 1)}
>
> After running this code, I am getting the error of
>
> *"subscript out of bounds"*
>
> Please help me for which I shall be always grateful to you.
>
> Thanks in advance.
>
>
>
> --
> *Best Regards,*
> *Subhamitra Patra*
> *Phd. Research Scholar*
> *Department of Humanities and Social Sciences*
> *Indian Institute of Technology, Kharagpur*
> *INDIA*
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



From @ubh@m|tr@@p@tr@ @end|ng |rom gm@||@com  Sat Oct  6 11:14:27 2018
From: @ubh@m|tr@@p@tr@ @end|ng |rom gm@||@com (Subhamitra Patra)
Date: Sat, 6 Oct 2018 14:44:27 +0530
Subject: [R] 
 Requesting for help on the problem of "subscript out of bounds"
In-Reply-To: <CA+8X3fW6X1fgAY0PKzS00oOz=9LHUDdx-cQeFctMq8izcYT8qQ@mail.gmail.com>
References: <CAOFE=kP+YbecTTHOj1rVFDecU_+iaZLgPX4UcGXWXZBca_TtHQ@mail.gmail.com>
 <CA+8X3fW6X1fgAY0PKzS00oOz=9LHUDdx-cQeFctMq8izcYT8qQ@mail.gmail.com>
Message-ID: <CAOFE=kPs+jH=6iBeqx=OJ1jZMrOCz8O3ZPWmnd2ty29_1MbsyA@mail.gmail.com>

Hello Sir,

I tried by defining mat, but still facing the same problem.

Hence, mat represents the time series. This time, I defined it as ts and
tried, but still having the same problem.

In particular, the problem is coming in the following line
*for (i in 1:N){*
*+     r[i]<-approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]), elag =
1) *

where i is unable to synchronize with the no. of rows i.e. rows and thus I
am getting the error of

*Error in `[<-`(`*tmp*`, i, , value = ts[i:(N - m + i)]) :   subscript out
of bounds*

For your reference, I am providing my full code with an explanation as
follows.

The function

approx_entropy(ts, edim = 2, r = 0.2*sd(ts), elag = 1)

from the package,pracma I am calculating the approximate entropy of time
series.ts

I have a matrix of time series (one series per row i.e. 51 rows and 1
column)  and I would estimate the approximate entropy for each of the rows,
storing the results in a vector. So, I have written a code

library(pracma)

N<-nrow(ts)
r<-matrix(0, nrow = N, ncol = 1)for (i in 1:N){
     r[i]<-approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]), elag = 1)}

* After calculating for 1 series, I need to calculate the same things for
the multiple series by changing the dimension of the ncol.*

Please help me in this regard.

Thanks in advance.

On Sat, Oct 6, 2018 at 2:22 PM Jim Lemon <drjimlemon at gmail.com> wrote:

> Hi Subhamitra,
> Where I think the error arises is in the line:
>
>  N<-nrow(mat)
>
> Since we don't know what "mat" is, we don't know what nrow(mat) will
> return. If "mat" is not a matrix or data frame, it is likely to be
> NULL. Try this:
>
> print(N)
>
> after defining it and see what it is.
>
> Jim
>
> On Sat, Oct 6, 2018 at 5:51 PM Subhamitra Patra
> <subhamitra.patra at gmail.com> wrote:
> >
> > Hello friends,
> >
> > I am very new in this R world. But, still doing some programming by
> > learning. While running one code, I found the problem of "subscript out
> of
> > bounds". Please suggest me how to overcome this problem? For your
> > reference, I am uploading my code here.
> >
> > The function
> >
> > approx_entropy(ts, edim =2, r = 0.2*sd(ts), elag = 1)
> >
> > library(pracma)
> >
> > N<-nrow(mat)
> > r<-matrix(0, nrow = N, ncol = 1)for (i in 1:N){
> >      r[i]<-approx_entropy(mat[i,], edim = 2, r = 0.2*sd(mat[i,]), elag =
> 1)}
> >
> > After running this code, I am getting the error of
> >
> > *"subscript out of bounds"*
> >
> > Please help me for which I shall be always grateful to you.
> >
> > Thanks in advance.
> >
> >
> >
> > --
> > *Best Regards,*
> > *Subhamitra Patra*
> > *Phd. Research Scholar*
> > *Department of Humanities and Social Sciences*
> > *Indian Institute of Technology, Kharagpur*
> > *INDIA*
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>


-- 
*Best Regards,*
*Subhamitra Patra*
*Phd. Research Scholar*
*Department of Humanities and Social Sciences*
*Indian Institute of Technology, Kharagpur*
*INDIA*

	[[alternative HTML version deleted]]



From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sat Oct  6 11:18:28 2018
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (ruipbarradas)
Date: Sat, 06 Oct 2018 10:18:28 +0100
Subject: [R] 
 Requesting for help on the problem of "subscript out of bounds"
Message-ID: <s00fgd43bpmvp8d126tra105.1538817508046@email.android.com>

Hello,
Instead of nrow try all uppercase:
N <- NROW (ts)

Hope this helps,
Rui Barradas?



Enviado a partir do meu smartphone Samsung Galaxy.-------- Mensagem original --------De: Subhamitra Patra <subhamitra.patra at gmail.com> Data: 06/10/2018  10:14  (GMT+00:00) Para: drjimlemon at gmail.com Cc: r-help at r-project.org Assunto: Re: [R] 
  Requesting for help on the problem of "subscript out of bounds" 
Hello Sir,

I tried by defining mat, but still facing the same problem.

Hence, mat represents the time series. This time, I defined it as ts and
tried, but still having the same problem.

In particular, the problem is coming in the following line
*for (i in 1:N){*
*+???? r[i]<-approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]), elag =
1) *

where i is unable to synchronize with the no. of rows i.e. rows and thus I
am getting the error of

*Error in `[<-`(`*tmp*`, i, , value = ts[i:(N - m + i)]) :?? subscript out
of bounds*

For your reference, I am providing my full code with an explanation as
follows.

The function

approx_entropy(ts, edim = 2, r = 0.2*sd(ts), elag = 1)

from the package,pracma I am calculating the approximate entropy of time
series.ts

I have a matrix of time series (one series per row i.e. 51 rows and 1
column)? and I would estimate the approximate entropy for each of the rows,
storing the results in a vector. So, I have written a code

library(pracma)

N<-nrow(ts)
r<-matrix(0, nrow = N, ncol = 1)for (i in 1:N){
???? r[i]<-approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]), elag = 1)}

* After calculating for 1 series, I need to calculate the same things for
the multiple series by changing the dimension of the ncol.*

Please help me in this regard.

Thanks in advance.

On Sat, Oct 6, 2018 at 2:22 PM Jim Lemon <drjimlemon at gmail.com> wrote:

> Hi Subhamitra,
> Where I think the error arises is in the line:
>
>? N<-nrow(mat)
>
> Since we don't know what "mat" is, we don't know what nrow(mat) will
> return. If "mat" is not a matrix or data frame, it is likely to be
> NULL. Try this:
>
> print(N)
>
> after defining it and see what it is.
>
> Jim
>
> On Sat, Oct 6, 2018 at 5:51 PM Subhamitra Patra
> <subhamitra.patra at gmail.com> wrote:
> >
> > Hello friends,
> >
> > I am very new in this R world. But, still doing some programming by
> > learning. While running one code, I found the problem of "subscript out
> of
> > bounds". Please suggest me how to overcome this problem? For your
> > reference, I am uploading my code here.
> >
> > The function
> >
> > approx_entropy(ts, edim =2, r = 0.2*sd(ts), elag = 1)
> >
> > library(pracma)
> >
> > N<-nrow(mat)
> > r<-matrix(0, nrow = N, ncol = 1)for (i in 1:N){
> >????? r[i]<-approx_entropy(mat[i,], edim = 2, r = 0.2*sd(mat[i,]), elag =
> 1)}
> >
> > After running this code, I am getting the error of
> >
> > *"subscript out of bounds"*
> >
> > Please help me for which I shall be always grateful to you.
> >
> > Thanks in advance.
> >
> >
> >
> > --
> > *Best Regards,*
> > *Subhamitra Patra*
> > *Phd. Research Scholar*
> > *Department of Humanities and Social Sciences*
> > *Indian Institute of Technology, Kharagpur*
> > *INDIA*
> >
> >???????? [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>


-- 
*Best Regards,*
*Subhamitra Patra*
*Phd. Research Scholar*
*Department of Humanities and Social Sciences*
*Indian Institute of Technology, Kharagpur*
*INDIA*

	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Sat Oct  6 11:15:56 2018
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Sat, 6 Oct 2018 19:15:56 +1000
Subject: [R] 
 Requesting for help on the problem of "subscript out of bounds"
In-Reply-To: <CAOFE=kPs+jH=6iBeqx=OJ1jZMrOCz8O3ZPWmnd2ty29_1MbsyA@mail.gmail.com>
References: <CAOFE=kP+YbecTTHOj1rVFDecU_+iaZLgPX4UcGXWXZBca_TtHQ@mail.gmail.com>
 <CA+8X3fW6X1fgAY0PKzS00oOz=9LHUDdx-cQeFctMq8izcYT8qQ@mail.gmail.com>
 <CAOFE=kPs+jH=6iBeqx=OJ1jZMrOCz8O3ZPWmnd2ty29_1MbsyA@mail.gmail.com>
Message-ID: <CA+8X3fVVDgAEeCY2p0bRgFFd8+Rfa3Atg-QgFhDrB=KDTm8t9w@mail.gmail.com>

What I would do next is to insert a line to see where it goes wrong:

for (i in 1:N){
     cat("i =",i,"\n")
     r[i]<-approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]), elag = 1)
}

The last i that is printed (which may be the first) will reveal what
caused the error I hope.

Jim

On Sat, Oct 6, 2018 at 7:12 PM Subhamitra Patra
<subhamitra.patra at gmail.com> wrote:
>
> Hello Sir,
>
> I tried by defining mat, but still facing the same problem.
>
> Hence, mat represents the time series. This time, I defined it as ts and tried, but still having the same problem.
>
> In particular, the problem is coming in the following line
> for (i in 1:N){
> +     r[i]<-approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]), elag = 1)
>
> where i is unable to synchronize with the no. of rows i.e. rows and thus I am getting the error of
>
> Error in `[<-`(`*tmp*`, i, , value = ts[i:(N - m + i)]) :
>   subscript out of bounds
>
> For your reference, I am providing my full code with an explanation as follows.
>
> The function
>
> approx_entropy(ts, edim = 2, r = 0.2*sd(ts), elag = 1)
>
> from the package,pracma I am calculating the approximate entropy of time series.ts
>
> I have a matrix of time series (one series per row i.e. 51 rows and 1 column)  and I would estimate the approximate entropy for each of the rows, storing the results in a vector. So, I have written a code
>
> library(pracma)
>
> N<-nrow(ts)
> r<-matrix(0, nrow = N, ncol = 1)
> for (i in 1:N){
>      r[i]<-approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]), elag = 1)
> }
>
>  After calculating for 1 series, I need to calculate the same things for the multiple series by changing the dimension of the ncol.
>
> Please help me in this regard.
>
> Thanks in advance.
>
> On Sat, Oct 6, 2018 at 2:22 PM Jim Lemon <drjimlemon at gmail.com> wrote:
>>
>> Hi Subhamitra,
>> Where I think the error arises is in the line:
>>
>>  N<-nrow(mat)
>>
>> Since we don't know what "mat" is, we don't know what nrow(mat) will
>> return. If "mat" is not a matrix or data frame, it is likely to be
>> NULL. Try this:
>>
>> print(N)
>>
>> after defining it and see what it is.
>>
>> Jim
>>
>> On Sat, Oct 6, 2018 at 5:51 PM Subhamitra Patra
>> <subhamitra.patra at gmail.com> wrote:
>> >
>> > Hello friends,
>> >
>> > I am very new in this R world. But, still doing some programming by
>> > learning. While running one code, I found the problem of "subscript out of
>> > bounds". Please suggest me how to overcome this problem? For your
>> > reference, I am uploading my code here.
>> >
>> > The function
>> >
>> > approx_entropy(ts, edim =2, r = 0.2*sd(ts), elag = 1)
>> >
>> > library(pracma)
>> >
>> > N<-nrow(mat)
>> > r<-matrix(0, nrow = N, ncol = 1)for (i in 1:N){
>> >      r[i]<-approx_entropy(mat[i,], edim = 2, r = 0.2*sd(mat[i,]), elag = 1)}
>> >
>> > After running this code, I am getting the error of
>> >
>> > *"subscript out of bounds"*
>> >
>> > Please help me for which I shall be always grateful to you.
>> >
>> > Thanks in advance.
>> >
>> >
>> >
>> > --
>> > *Best Regards,*
>> > *Subhamitra Patra*
>> > *Phd. Research Scholar*
>> > *Department of Humanities and Social Sciences*
>> > *Indian Institute of Technology, Kharagpur*
>> > *INDIA*
>> >
>> >         [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>
>
>
> --
> Best Regards,
> Subhamitra Patra
> Phd. Research Scholar
> Department of Humanities and Social Sciences
> Indian Institute of Technology, Kharagpur
> INDIA



From @ubh@m|tr@@p@tr@ @end|ng |rom gm@||@com  Sat Oct  6 11:34:57 2018
From: @ubh@m|tr@@p@tr@ @end|ng |rom gm@||@com (Subhamitra Patra)
Date: Sat, 6 Oct 2018 15:04:57 +0530
Subject: [R] 
 Requesting for help on the problem of "subscript out of bounds"
In-Reply-To: <s00fgd43bpmvp8d126tra105.1538817508046@email.android.com>
References: <s00fgd43bpmvp8d126tra105.1538817508046@email.android.com>
Message-ID: <CAOFE=kN4opv9-pp0QnN76UqHymr1ROoX9_P9fE=-M+j=x2qGQw@mail.gmail.com>

I am extremely sorry to say that both the suggestions did not work.

I did not understand the suggestion of Prof. Lemon. So, Sir, Can you please
clarify me your suggestion?

 I tried the suggestion of Ruipbarradas. It does not work.

Please help me out for which I shall be always grateful to you.

Thanks in advance.

On Sat, Oct 6, 2018 at 2:48 PM ruipbarradas <ruipbarradas at sapo.pt> wrote:

> Hello,
>
> Instead of nrow try all uppercase:
>
> N <- NROW (ts)
>
>
> Hope this helps,
>
> Rui Barradas
>
>
>
>
> Enviado a partir do meu smartphone Samsung Galaxy.
> -------- Mensagem original --------
> De: Subhamitra Patra <subhamitra.patra at gmail.com>
> Data: 06/10/2018 10:14 (GMT+00:00)
> Para: drjimlemon at gmail.com
> Cc: r-help at r-project.org
> Assunto: Re: [R] Requesting for help on the problem of "subscript out of
> bounds"
>
> Hello Sir,
>
> I tried by defining mat, but still facing the same problem.
>
> Hence, mat represents the time series. This time, I defined it as ts and
> tried, but still having the same problem.
>
> In particular, the problem is coming in the following line
> *for (i in 1:N){*
> *+     r[i]<-approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]), elag =
> 1) *
>
> where i is unable to synchronize with the no. of rows i.e. rows and thus I
> am getting the error of
>
> *Error in `[<-`(`*tmp*`, i, , value = ts[i:(N - m + i)]) :   subscript out
> of bounds*
>
> For your reference, I am providing my full code with an explanation as
> follows.
>
> The function
>
> approx_entropy(ts, edim = 2, r = 0.2*sd(ts), elag = 1)
>
> from the package,pracma I am calculating the approximate entropy of time
> series.ts
>
> I have a matrix of time series (one series per row i.e. 51 rows and 1
> column)  and I would estimate the approximate entropy for each of the rows,
> storing the results in a vector. So, I have written a code
>
> library(pracma)
>
> N<-nrow(ts)
> r<-matrix(0, nrow = N, ncol = 1)for (i in 1:N){
>      r[i]<-approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]), elag = 1)}
>
> * After calculating for 1 series, I need to calculate the same things for
> the multiple series by changing the dimension of the ncol.*
>
> Please help me in this regard.
>
> Thanks in advance.
>
> On Sat, Oct 6, 2018 at 2:22 PM Jim Lemon <drjimlemon at gmail.com> wrote:
>
> > Hi Subhamitra,
> > Where I think the error arises is in the line:
> >
> >  N<-nrow(mat)
> >
> > Since we don't know what "mat" is, we don't know what nrow(mat) will
> > return. If "mat" is not a matrix or data frame, it is likely to be
> > NULL. Try this:
> >
> > print(N)
> >
> > after defining it and see what it is.
> >
> > Jim
> >
> > On Sat, Oct 6, 2018 at 5:51 PM Subhamitra Patra
> > <subhamitra.patra at gmail.com> wrote:
> > >
> > > Hello friends,
> > >
> > > I am very new in this R world. But, still doing some programming by
> > > learning. While running one code, I found the problem of "subscript out
> > of
> > > bounds". Please suggest me how to overcome this problem? For your
> > > reference, I am uploading my code here.
> > >
> > > The function
> > >
> > > approx_entropy(ts, edim =2, r = 0.2*sd(ts), elag = 1)
> > >
> > > library(pracma)
> > >
> > > N<-nrow(mat)
> > > r<-matrix(0, nrow = N, ncol = 1)for (i in 1:N){
> > >      r[i]<-approx_entropy(mat[i,], edim = 2, r = 0.2*sd(mat[i,]), elag
> =
> > 1)}
> > >
> > > After running this code, I am getting the error of
> > >
> > > *"subscript out of bounds"*
> > >
> > > Please help me for which I shall be always grateful to you.
> > >
> > > Thanks in advance.
> > >
> > >
> > >
> > > --
> > > *Best Regards,*
> > > *Subhamitra Patra*
> > > *Phd. Research Scholar*
> > > *Department of Humanities and Social Sciences*
> > > *Indian Institute of Technology, Kharagpur*
> > > *INDIA*
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> >
>
>
> --
> *Best Regards,*
> *Subhamitra Patra*
> *Phd. Research Scholar*
> *Department of Humanities and Social Sciences*
> *Indian Institute of Technology, Kharagpur*
> *INDIA*
>
> [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
*Best Regards,*
*Subhamitra Patra*
*Phd. Research Scholar*
*Department of Humanities and Social Sciences*
*Indian Institute of Technology, Kharagpur*
*INDIA*

	[[alternative HTML version deleted]]



From drj|m|emon @end|ng |rom gm@||@com  Sat Oct  6 12:12:44 2018
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Sat, 6 Oct 2018 20:12:44 +1000
Subject: [R] 
 Requesting for help on the problem of "subscript out of bounds"
In-Reply-To: <CAOFE=kN4opv9-pp0QnN76UqHymr1ROoX9_P9fE=-M+j=x2qGQw@mail.gmail.com>
References: <s00fgd43bpmvp8d126tra105.1538817508046@email.android.com>
 <CAOFE=kN4opv9-pp0QnN76UqHymr1ROoX9_P9fE=-M+j=x2qGQw@mail.gmail.com>
Message-ID: <CA+8X3fXz38j39wnvK7wzvwhnfpzJ1yP1d0jxVNtjc-z3u9KuDg@mail.gmail.com>

The idea of using:

cat("i =",i,"\n")

is to display the value of i each time the loop executes. Displaying i
_before_ the error occurs tells us what value of i is causing the
problem. Because the error is occurring when you try to index ts,
perhaps adding:

cat(dim(ts),"\n")
for(i in 1:N) {
...

_before_ the loop starts will tell you what the dimensions of ts are.
It way well be a list that you have to use a different syntax for
indexing. An even more complete description of ts can be had like
this:

str(ts)

Unfortunately I am about to log out and get some sleep so I will not
be able to continue answering until some time tomorrow.

Jim
On Sat, Oct 6, 2018 at 7:32 PM Subhamitra Patra
<subhamitra.patra at gmail.com> wrote:
>
> I am extremely sorry to say that both the suggestions did not work.
>
> I did not understand the suggestion of Prof. Lemon. So, Sir, Can you please clarify me your suggestion?
>
>  I tried the suggestion of Ruipbarradas. It does not work.
>
>
> Please help me out for which I shall be always grateful to you.
>
> Thanks in advance.
>
> On Sat, Oct 6, 2018 at 2:48 PM ruipbarradas <ruipbarradas at sapo.pt> wrote:
>>
>> Hello,
>>
>> Instead of nrow try all uppercase:
>>
>> N <- NROW (ts)
>>
>>
>> Hope this helps,
>>
>> Rui Barradas
>>
>>
>>
>>
>> Enviado a partir do meu smartphone Samsung Galaxy.
>> -------- Mensagem original --------
>> De: Subhamitra Patra <subhamitra.patra at gmail.com>
>> Data: 06/10/2018 10:14 (GMT+00:00)
>> Para: drjimlemon at gmail.com
>> Cc: r-help at r-project.org
>> Assunto: Re: [R] Requesting for help on the problem of "subscript out of bounds"
>>
>> Hello Sir,
>>
>> I tried by defining mat, but still facing the same problem.
>>
>> Hence, mat represents the time series. This time, I defined it as ts and
>> tried, but still having the same problem.
>>
>> In particular, the problem is coming in the following line
>> *for (i in 1:N){*
>> *+     r[i]<-approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]), elag =
>> 1) *
>>
>> where i is unable to synchronize with the no. of rows i.e. rows and thus I
>> am getting the error of
>>
>> *Error in `[<-`(`*tmp*`, i, , value = ts[i:(N - m + i)]) :   subscript out
>> of bounds*
>>
>> For your reference, I am providing my full code with an explanation as
>> follows.
>>
>> The function
>>
>> approx_entropy(ts, edim = 2, r = 0.2*sd(ts), elag = 1)
>>
>> from the package,pracma I am calculating the approximate entropy of time
>> series.ts
>>
>> I have a matrix of time series (one series per row i.e. 51 rows and 1
>> column)  and I would estimate the approximate entropy for each of the rows,
>> storing the results in a vector. So, I have written a code
>>
>> library(pracma)
>>
>> N<-nrow(ts)
>> r<-matrix(0, nrow = N, ncol = 1)for (i in 1:N){
>>      r[i]<-approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]), elag = 1)}
>>
>> * After calculating for 1 series, I need to calculate the same things for
>> the multiple series by changing the dimension of the ncol.*
>>
>> Please help me in this regard.
>>
>> Thanks in advance.
>>
>> On Sat, Oct 6, 2018 at 2:22 PM Jim Lemon <drjimlemon at gmail.com> wrote:
>>
>> > Hi Subhamitra,
>> > Where I think the error arises is in the line:
>> >
>> >  N<-nrow(mat)
>> >
>> > Since we don't know what "mat" is, we don't know what nrow(mat) will
>> > return. If "mat" is not a matrix or data frame, it is likely to be
>> > NULL. Try this:
>> >
>> > print(N)
>> >
>> > after defining it and see what it is.
>> >
>> > Jim
>> >
>> > On Sat, Oct 6, 2018 at 5:51 PM Subhamitra Patra
>> > <subhamitra.patra at gmail.com> wrote:
>> > >
>> > > Hello friends,
>> > >
>> > > I am very new in this R world. But, still doing some programming by
>> > > learning. While running one code, I found the problem of "subscript out
>> > of
>> > > bounds". Please suggest me how to overcome this problem? For your
>> > > reference, I am uploading my code here.
>> > >
>> > > The function
>> > >
>> > > approx_entropy(ts, edim =2, r = 0.2*sd(ts), elag = 1)
>> > >
>> > > library(pracma)
>> > >
>> > > N<-nrow(mat)
>> > > r<-matrix(0, nrow = N, ncol = 1)for (i in 1:N){
>> > >      r[i]<-approx_entropy(mat[i,], edim = 2, r = 0.2*sd(mat[i,]), elag =
>> > 1)}
>> > >
>> > > After running this code, I am getting the error of
>> > >
>> > > *"subscript out of bounds"*
>> > >
>> > > Please help me for which I shall be always grateful to you.
>> > >
>> > > Thanks in advance.
>> > >
>> > >
>> > >
>> > > --
>> > > *Best Regards,*
>> > > *Subhamitra Patra*
>> > > *Phd. Research Scholar*
>> > > *Department of Humanities and Social Sciences*
>> > > *Indian Institute of Technology, Kharagpur*
>> > > *INDIA*
>> > >
>> > >         [[alternative HTML version deleted]]
>> > >
>> > > ______________________________________________
>> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > > https://stat.ethz.ch/mailman/listinfo/r-help
>> > > PLEASE do read the posting guide
>> > http://www.R-project.org/posting-guide.html
>> > > and provide commented, minimal, self-contained, reproducible code.
>> >
>>
>>
>> --
>> *Best Regards,*
>> *Subhamitra Patra*
>> *Phd. Research Scholar*
>> *Department of Humanities and Social Sciences*
>> *Indian Institute of Technology, Kharagpur*
>> *INDIA*
>>
>> [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>
>
> --
> Best Regards,
> Subhamitra Patra
> Phd. Research Scholar
> Department of Humanities and Social Sciences
> Indian Institute of Technology, Kharagpur
> INDIA



From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sat Oct  6 13:28:09 2018
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sat, 6 Oct 2018 12:28:09 +0100
Subject: [R] 
 Requesting for help on the problem of "subscript out of bounds"
In-Reply-To: <CAOFE=kN4opv9-pp0QnN76UqHymr1ROoX9_P9fE=-M+j=x2qGQw@mail.gmail.com>
References: <s00fgd43bpmvp8d126tra105.1538817508046@email.android.com>
 <CAOFE=kN4opv9-pp0QnN76UqHymr1ROoX9_P9fE=-M+j=x2qGQw@mail.gmail.com>
Message-ID: <8a802382-6dfd-feca-503a-eb65710aa7b3@sapo.pt>

Hello,

I suggested NROW (all uppercase) because it works even if its argument, 
in your case ts, has only one dimension, nrow needs 2-dim objects.

I have now noticed that you are indexing ts as if it has two dimensions, 
and that r is created with function matrix() but then you index it with 
just one dimension.


r[i] <- approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]), elag = 1)


Shouldn't it be ts[i] or r[i, ] ?

Hope this helps,

Rui Barradas

?s 10:34 de 06/10/2018, Subhamitra Patra escreveu:
> I am extremely sorry to say that both the suggestions did not work.
> 
> I did not understand the suggestion of Prof. Lemon. So, Sir, Can you 
> please clarify me your suggestion?
> 
> 
>        ?I tried the suggestion of Ruipbarradas. It does not work.
> 
> 
> Please help me out for which I shall be always grateful to you.
> 
> Thanks in advance.
> 
> On Sat, Oct 6, 2018 at 2:48 PM ruipbarradas <ruipbarradas at sapo.pt 
> <mailto:ruipbarradas at sapo.pt>> wrote:
> 
>     Hello,
> 
>     Instead of nrow try all uppercase:
> 
>     N <- NROW (ts)
> 
> 
>     Hope this helps,
> 
>     Rui Barradas
> 
> 
> 
> 
>     Enviado a partir do meu smartphone Samsung Galaxy.
>     -------- Mensagem original --------
>     De: Subhamitra Patra <subhamitra.patra at gmail.com
>     <mailto:subhamitra.patra at gmail.com>>
>     Data: 06/10/2018 10:14 (GMT+00:00)
>     Para: drjimlemon at gmail.com <mailto:drjimlemon at gmail.com>
>     Cc: r-help at r-project.org <mailto:r-help at r-project.org>
>     Assunto: Re: [R] Requesting for help on the problem of "subscript
>     out of bounds"
> 
>     Hello Sir,
> 
>     I tried by defining mat, but still facing the same problem.
> 
>     Hence, mat represents the time series. This time, I defined it as ts and
>     tried, but still having the same problem.
> 
>     In particular, the problem is coming in the following line
>     *for (i in 1:N){*
>     *+???? r[i]<-approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]), elag =
>     1) *
> 
>     where i is unable to synchronize with the no. of rows i.e. rows and
>     thus I
>     am getting the error of
> 
>     *Error in `[<-`(`*tmp*`, i, , value = ts[i:(N - m + i)]) :  
>     subscript out
>     of bounds*
> 
>     For your reference, I am providing my full code with an explanation as
>     follows.
> 
>     The function
> 
>     approx_entropy(ts, edim = 2, r = 0.2*sd(ts), elag = 1)
> 
>     from the package,pracma I am calculating the approximate entropy of time
>     series.ts
> 
>     I have a matrix of time series (one series per row i.e. 51 rows and 1
>     column)? and I would estimate the approximate entropy for each of
>     the rows,
>     storing the results in a vector. So, I have written a code
> 
>     library(pracma)
> 
>     N<-nrow(ts)
>     r<-matrix(0, nrow = N, ncol = 1)for (i in 1:N){
>      ???? r[i]<-approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]),
>     elag = 1)}
> 
>     * After calculating for 1 series, I need to calculate the same
>     things for
>     the multiple series by changing the dimension of the ncol.*
> 
>     Please help me in this regard.
> 
>     Thanks in advance.
> 
>     On Sat, Oct 6, 2018 at 2:22 PM Jim Lemon <drjimlemon at gmail.com
>     <mailto:drjimlemon at gmail.com>> wrote:
> 
>      > Hi Subhamitra,
>      > Where I think the error arises is in the line:
>      >
>      >? N<-nrow(mat)
>      >
>      > Since we don't know what "mat" is, we don't know what nrow(mat) will
>      > return. If "mat" is not a matrix or data frame, it is likely to be
>      > NULL. Try this:
>      >
>      > print(N)
>      >
>      > after defining it and see what it is.
>      >
>      > Jim
>      >
>      > On Sat, Oct 6, 2018 at 5:51 PM Subhamitra Patra
>      > <subhamitra.patra at gmail.com <mailto:subhamitra.patra at gmail.com>>
>     wrote:
>      > >
>      > > Hello friends,
>      > >
>      > > I am very new in this R world. But, still doing some programming by
>      > > learning. While running one code, I found the problem of
>     "subscript out
>      > of
>      > > bounds". Please suggest me how to overcome this problem? For your
>      > > reference, I am uploading my code here.
>      > >
>      > > The function
>      > >
>      > > approx_entropy(ts, edim =2, r = 0.2*sd(ts), elag = 1)
>      > >
>      > > library(pracma)
>      > >
>      > > N<-nrow(mat)
>      > > r<-matrix(0, nrow = N, ncol = 1)for (i in 1:N){
>      > >????? r[i]<-approx_entropy(mat[i,], edim = 2, r =
>     0.2*sd(mat[i,]), elag =
>      > 1)}
>      > >
>      > > After running this code, I am getting the error of
>      > >
>      > > *"subscript out of bounds"*
>      > >
>      > > Please help me for which I shall be always grateful to you.
>      > >
>      > > Thanks in advance.
>      > >
>      > >
>      > >
>      > > --
>      > > *Best Regards,*
>      > > *Subhamitra Patra*
>      > > *Phd. Research Scholar*
>      > > *Department of Humanities and Social Sciences*
>      > > *Indian Institute of Technology, Kharagpur*
>      > > *INDIA*
>      > >
>      > >???????? [[alternative HTML version deleted]]
>      > >
>      > > ______________________________________________
>      > > R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>     -- To UNSUBSCRIBE and more, see
>      > > https://stat.ethz.ch/mailman/listinfo/r-help
>      > > PLEASE do read the posting guide
>      > http://www.R-project.org/posting-guide.html
>      > > and provide commented, minimal, self-contained, reproducible code.
>      >
> 
> 
>     -- 
>     *Best Regards,*
>     *Subhamitra Patra*
>     *Phd. Research Scholar*
>     *Department of Humanities and Social Sciences*
>     *Indian Institute of Technology, Kharagpur*
>     *INDIA*
> 
>     [[alternative HTML version deleted]]
> 
>     ______________________________________________
>     R-help at r-project.org <mailto:R-help at r-project.org> mailing list --
>     To UNSUBSCRIBE and more, see
>     https://stat.ethz.ch/mailman/listinfo/r-help
>     PLEASE do read the posting guide
>     http://www.R-project.org/posting-guide.html
>     and provide commented, minimal, self-contained, reproducible code.
> 
> 
> 
> -- 
> *Best Regards,*
> *Subhamitra Patra*
> *Phd. Research Scholar*
> *Department of Humanities and Social Sciences*
> *Indian Institute of Technology, Kharagpur*
> *INDIA*



From o||v|er_g|v@ud@n @end|ng |rom hotm@||@com  Sat Oct  6 13:48:44 2018
From: o||v|er_g|v@ud@n @end|ng |rom hotm@||@com (Olivier GIVAUDAN)
Date: Sat, 6 Oct 2018 11:48:44 +0000
Subject: [R] Genuine relative paths with R
Message-ID: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>

Dear R users,

I would like to work with genuine relative paths in R for obvious reasons: if I move all my scripts related to some project as a whole to another location of my computer or someone else's computer, if want my scripts to continue to run seamlessly.

What I mean by "genuine" is that it should not be necessary to hardcode one single absolute path (making the code obviously not "portable" - to another place - anymore).

For the time being, I found the following related posts, unfortunately never conclusive or even somewhat off-topic:
https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html

So I found 2 workarounds, more or less satisfactory:


  1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.
  2.  Or create an R project file with RStudio and use the package "here" to get the absolute path of the R project file and put all the R scripts related to this project in the R project directory, as often recommended.

But I am really wondering why R doesn't have (please tell me if I'm wrong) this basic feature as many other languages have it (batch, shell, C, LaTeX, SAS with macro-variables, etc.)?
Do you know whether the language will have this kind of function in a near future? What are the obstacles / what is the reasoning for not having it already?

Do you know other workarounds?

Best regards,

Olivier

	[[alternative HTML version deleted]]



From |@t@z@hn @end|ng |rom gm@||@com  Sat Oct  6 14:56:34 2018
From: |@t@z@hn @end|ng |rom gm@||@com (Ista Zahn)
Date: Sat, 6 Oct 2018 08:56:34 -0400
Subject: [R] Genuine relative paths with R
In-Reply-To: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
Message-ID: <CA+vqiLGxq1_LPgOqNVWC+=e9deTzMCwgJx0G6X26kF-1vWZc5Q@mail.gmail.com>

Hi Oliver,

Interesting question. Can you describe your motivation in a little
more detail? That is, why do you what this feature? I ask because to
my way of thinking you have to know the path to the script in order to
call it in the first place. If calling from R, is

setwd("/path/to/dir")
source("file.R")

really so much worse than

source("path/to/dir/file.R")

?  If it is worse, why?

Similarly if calling from a shell, is

cd /path/to/dir
Rscript file.R

really so much worse than

Rscript /path/to/dir/file.R

? Again, if is worse, why?

Best,
Ista
On Sat, Oct 6, 2018 at 8:25 AM Olivier GIVAUDAN
<olivier_givaudan at hotmail.com> wrote:
>
> Dear R users,
>
> I would like to work with genuine relative paths in R for obvious reasons: if I move all my scripts related to some project as a whole to another location of my computer or someone else's computer, if want my scripts to continue to run seamlessly.
>
> What I mean by "genuine" is that it should not be necessary to hardcode one single absolute path (making the code obviously not "portable" - to another place - anymore).
>
> For the time being, I found the following related posts, unfortunately never conclusive or even somewhat off-topic:
> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
>
> So I found 2 workarounds, more or less satisfactory:
>
>
>   1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.
>   2.  Or create an R project file with RStudio and use the package "here" to get the absolute path of the R project file and put all the R scripts related to this project in the R project directory, as often recommended.
>
> But I am really wondering why R doesn't have (please tell me if I'm wrong) this basic feature as many other languages have it (batch, shell, C, LaTeX, SAS with macro-variables, etc.)?
> Do you know whether the language will have this kind of function in a near future? What are the obstacles / what is the reasoning for not having it already?
>
> Do you know other workarounds?
>
> Best regards,
>
> Olivier
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



From @ubh@m|tr@@p@tr@ @end|ng |rom gm@||@com  Sat Oct  6 16:45:45 2018
From: @ubh@m|tr@@p@tr@ @end|ng |rom gm@||@com (Subhamitra Patra)
Date: Sat, 6 Oct 2018 20:15:45 +0530
Subject: [R] 
 Requesting for help on the problem of "subscript out of bounds"
In-Reply-To: <8a802382-6dfd-feca-503a-eb65710aa7b3@sapo.pt>
References: <s00fgd43bpmvp8d126tra105.1538817508046@email.android.com>
 <CAOFE=kN4opv9-pp0QnN76UqHymr1ROoX9_P9fE=-M+j=x2qGQw@mail.gmail.com>
 <8a802382-6dfd-feca-503a-eb65710aa7b3@sapo.pt>
Message-ID: <CAOFE=kNz-za=i44_XuqQYtQyvdswvWmUYjAV+48sb6ZSSwgRBA@mail.gmail.com>

Yes, I tried as per your suggestion, but not getting any results. I think,
there is some dimension mismatch in the data matrix and result matrix.

I have to compute the particular model yearly for each series.

Please help.

Thanks in advance.


On Sat, Oct 6, 2018 at 4:58 PM Rui Barradas <ruipbarradas at sapo.pt> wrote:

> Hello,
>
> I suggested NROW (all uppercase) because it works even if its argument,
> in your case ts, has only one dimension, nrow needs 2-dim objects.
>
> I have now noticed that you are indexing ts as if it has two dimensions,
> and that r is created with function matrix() but then you index it with
> just one dimension.
>
>
> r[i] <- approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]), elag = 1)
>
>
> Shouldn't it be ts[i] or r[i, ] ?
>
> Hope this helps,
>
> Rui Barradas
>
> ?s 10:34 de 06/10/2018, Subhamitra Patra escreveu:
> > I am extremely sorry to say that both the suggestions did not work.
> >
> > I did not understand the suggestion of Prof. Lemon. So, Sir, Can you
> > please clarify me your suggestion?
> >
> >
> >         I tried the suggestion of Ruipbarradas. It does not work.
> >
> >
> > Please help me out for which I shall be always grateful to you.
> >
> > Thanks in advance.
> >
> > On Sat, Oct 6, 2018 at 2:48 PM ruipbarradas <ruipbarradas at sapo.pt
> > <mailto:ruipbarradas at sapo.pt>> wrote:
> >
> >     Hello,
> >
> >     Instead of nrow try all uppercase:
> >
> >     N <- NROW (ts)
> >
> >
> >     Hope this helps,
> >
> >     Rui Barradas
> >
> >
> >
> >
> >     Enviado a partir do meu smartphone Samsung Galaxy.
> >     -------- Mensagem original --------
> >     De: Subhamitra Patra <subhamitra.patra at gmail.com
> >     <mailto:subhamitra.patra at gmail.com>>
> >     Data: 06/10/2018 10:14 (GMT+00:00)
> >     Para: drjimlemon at gmail.com <mailto:drjimlemon at gmail.com>
> >     Cc: r-help at r-project.org <mailto:r-help at r-project.org>
> >     Assunto: Re: [R] Requesting for help on the problem of "subscript
> >     out of bounds"
> >
> >     Hello Sir,
> >
> >     I tried by defining mat, but still facing the same problem.
> >
> >     Hence, mat represents the time series. This time, I defined it as ts
> and
> >     tried, but still having the same problem.
> >
> >     In particular, the problem is coming in the following line
> >     *for (i in 1:N){*
> >     *+     r[i]<-approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]),
> elag =
> >     1) *
> >
> >     where i is unable to synchronize with the no. of rows i.e. rows and
> >     thus I
> >     am getting the error of
> >
> >     *Error in `[<-`(`*tmp*`, i, , value = ts[i:(N - m + i)]) :
> >     subscript out
> >     of bounds*
> >
> >     For your reference, I am providing my full code with an explanation
> as
> >     follows.
> >
> >     The function
> >
> >     approx_entropy(ts, edim = 2, r = 0.2*sd(ts), elag = 1)
> >
> >     from the package,pracma I am calculating the approximate entropy of
> time
> >     series.ts
> >
> >     I have a matrix of time series (one series per row i.e. 51 rows and 1
> >     column)  and I would estimate the approximate entropy for each of
> >     the rows,
> >     storing the results in a vector. So, I have written a code
> >
> >     library(pracma)
> >
> >     N<-nrow(ts)
> >     r<-matrix(0, nrow = N, ncol = 1)for (i in 1:N){
> >           r[i]<-approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]),
> >     elag = 1)}
> >
> >     * After calculating for 1 series, I need to calculate the same
> >     things for
> >     the multiple series by changing the dimension of the ncol.*
> >
> >     Please help me in this regard.
> >
> >     Thanks in advance.
> >
> >     On Sat, Oct 6, 2018 at 2:22 PM Jim Lemon <drjimlemon at gmail.com
> >     <mailto:drjimlemon at gmail.com>> wrote:
> >
> >      > Hi Subhamitra,
> >      > Where I think the error arises is in the line:
> >      >
> >      >  N<-nrow(mat)
> >      >
> >      > Since we don't know what "mat" is, we don't know what nrow(mat)
> will
> >      > return. If "mat" is not a matrix or data frame, it is likely to be
> >      > NULL. Try this:
> >      >
> >      > print(N)
> >      >
> >      > after defining it and see what it is.
> >      >
> >      > Jim
> >      >
> >      > On Sat, Oct 6, 2018 at 5:51 PM Subhamitra Patra
> >      > <subhamitra.patra at gmail.com <mailto:subhamitra.patra at gmail.com>>
> >     wrote:
> >      > >
> >      > > Hello friends,
> >      > >
> >      > > I am very new in this R world. But, still doing some
> programming by
> >      > > learning. While running one code, I found the problem of
> >     "subscript out
> >      > of
> >      > > bounds". Please suggest me how to overcome this problem? For
> your
> >      > > reference, I am uploading my code here.
> >      > >
> >      > > The function
> >      > >
> >      > > approx_entropy(ts, edim =2, r = 0.2*sd(ts), elag = 1)
> >      > >
> >      > > library(pracma)
> >      > >
> >      > > N<-nrow(mat)
> >      > > r<-matrix(0, nrow = N, ncol = 1)for (i in 1:N){
> >      > >      r[i]<-approx_entropy(mat[i,], edim = 2, r =
> >     0.2*sd(mat[i,]), elag =
> >      > 1)}
> >      > >
> >      > > After running this code, I am getting the error of
> >      > >
> >      > > *"subscript out of bounds"*
> >      > >
> >      > > Please help me for which I shall be always grateful to you.
> >      > >
> >      > > Thanks in advance.
> >      > >
> >      > >
> >      > >
> >      > > --
> >      > > *Best Regards,*
> >      > > *Subhamitra Patra*
> >      > > *Phd. Research Scholar*
> >      > > *Department of Humanities and Social Sciences*
> >      > > *Indian Institute of Technology, Kharagpur*
> >      > > *INDIA*
> >      > >
> >      > >         [[alternative HTML version deleted]]
> >      > >
> >      > > ______________________________________________
> >      > > R-help at r-project.org <mailto:R-help at r-project.org> mailing list
> >     -- To UNSUBSCRIBE and more, see
> >      > > https://stat.ethz.ch/mailman/listinfo/r-help
> >      > > PLEASE do read the posting guide
> >      > http://www.R-project.org/posting-guide.html
> >      > > and provide commented, minimal, self-contained, reproducible
> code.
> >      >
> >
> >
> >     --
> >     *Best Regards,*
> >     *Subhamitra Patra*
> >     *Phd. Research Scholar*
> >     *Department of Humanities and Social Sciences*
> >     *Indian Institute of Technology, Kharagpur*
> >     *INDIA*
> >
> >     [[alternative HTML version deleted]]
> >
> >     ______________________________________________
> >     R-help at r-project.org <mailto:R-help at r-project.org> mailing list --
> >     To UNSUBSCRIBE and more, see
> >     https://stat.ethz.ch/mailman/listinfo/r-help
> >     PLEASE do read the posting guide
> >     http://www.R-project.org/posting-guide.html
> >     and provide commented, minimal, self-contained, reproducible code.
> >
> >
> >
> > --
> > *Best Regards,*
> > *Subhamitra Patra*
> > *Phd. Research Scholar*
> > *Department of Humanities and Social Sciences*
> > *Indian Institute of Technology, Kharagpur*
> > *INDIA*
>


-- 
*Best Regards,*
*Subhamitra Patra*
*Phd. Research Scholar*
*Department of Humanities and Social Sciences*
*Indian Institute of Technology, Kharagpur*
*INDIA*

	[[alternative HTML version deleted]]



From |r|end|y @end|ng |rom yorku@c@  Sat Oct  6 18:14:31 2018
From: |r|end|y @end|ng |rom yorku@c@ (Michael Friendly)
Date: Sat, 6 Oct 2018 12:14:31 -0400
Subject: [R] Strange paradox
In-Reply-To: <a12441c953ba4d5ab8a21c3693e84533@wexchprod08.huge.ad.hcuge.ch>
References: <a12441c953ba4d5ab8a21c3693e84533@wexchprod08.huge.ad.hcuge.ch>
Message-ID: <7da313ad-5d6a-31ce-9760-7f973a740559@yorku.ca>

Yes-- there's no paradox; the adjusted R^2 and deviance are looking 
at/testing different things.

Also you don't say *what* deviance you are looking at, but
your interpretation of the deviance is probably wrong.
A significant test for
anova(model2, model1)
says that x3 & x4 add significantly to prediction, over and above x1, x2

On 10/5/2018 4:45 AM, CHATTON Anne via R-help wrote:
> Hello,
> 
> I am currently analysed two nested models using the same sample. Both the simpler model (Model 1 ~ x1 + x2) and the more complex model (Model 2 ~ x1 + x2 + x3 + x4) yield the same adjusted R-square. Yet the p-value associated with the deviance statistic is highly significant (p=0.0047), suggesting that the confounders (x3 and x4) account for the prediction of the dependent variable.
> 
> Does anyone have an explanation of this strange paradox?
> 
> Thank you for any suggestion.
> 
> Anne
> 


-- 
Michael Friendly     Email: friendly AT yorku DOT ca
Professor, Psychology Dept. & Chair, ASA Statistical Graphics Section
York University      Voice: 416 736-2100 x66249 Fax: 416 736-5814
4700 Keele Street    Web:   http://www.datavis.ca
Toronto, ONT  M3J 1P3 CANADA



From |@t@z@hn @end|ng |rom gm@||@com  Sat Oct  6 18:40:38 2018
From: |@t@z@hn @end|ng |rom gm@||@com (Ista Zahn)
Date: Sat, 6 Oct 2018 12:40:38 -0400
Subject: [R] Genuine relative paths with R
In-Reply-To: <VI1PR0202MB3357776AA39CD2305C0FA141F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <CA+vqiLGxq1_LPgOqNVWC+=e9deTzMCwgJx0G6X26kF-1vWZc5Q@mail.gmail.com>
 <VI1PR0202MB3357776AA39CD2305C0FA141F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
Message-ID: <CA+vqiLFoxUe=4-KLN7ebcTwRoR95R0cSJfSKcDV=dungdT6hjg@mail.gmail.com>

Hi Olivier,

Sorry for misspelling your name! Please see inline below.

On Sat, Oct 6, 2018 at 9:58 AM Olivier GIVAUDAN
<olivier_givaudan at hotmail.com> wrote:
>
> Hi Ista,
>
> Thank you for your reply.
>
> My motivation is described at the 3rd line of my initial message:
> "if I move all my scripts related to some project as a whole to another location of my computer or someone else's computer, if want my scripts to continue to run seamlessly."
>
> The main point is simply to avoid any hardcoded path in my R scripts, as you wrote in your examples.

My claim is that you cannot avoid hardcoding paths. Even if the
feature you requested existed, you would still have to do e.g.,

source("/path/to/dir/file.R")

That is just as much hard-coded as the (only slightly more verbose)

cd("/path/to/dir")
source("file.R")

So, I'm afraid I still don't get it. What is it that you actually want
to do that you currently cannot?

Best,
Ista
>
> BTW I don't use R with command line, only within RStudio or with the default GUI.
>
> Best regards,
>
> Olivier (and not Oliver )
> ________________________________
> De : Ista Zahn <istazahn at gmail.com>
> Envoy? : samedi 6 octobre 2018 12:56
> ? : olivier_givaudan at hotmail.com
> Cc : r-help at r-project.org
> Objet : Re: [R] Genuine relative paths with R
>
> Hi Oliver,
>
> Interesting question. Can you describe your motivation in a little
> more detail? That is, why do you what this feature? I ask because to
> my way of thinking you have to know the path to the script in order to
> call it in the first place. If calling from R, is
>
> setwd("/path/to/dir")
> source("file.R")
>
> really so much worse than
>
> source("path/to/dir/file.R")
>
> ?  If it is worse, why?
>
> Similarly if calling from a shell, is
>
> cd /path/to/dir
> Rscript file.R
>
> really so much worse than
>
> Rscript /path/to/dir/file.R
>
> ? Again, if is worse, why?
>
> Best,
> Ista
> On Sat, Oct 6, 2018 at 8:25 AM Olivier GIVAUDAN
> <olivier_givaudan at hotmail.com> wrote:
> >
> > Dear R users,
> >
> > I would like to work with genuine relative paths in R for obvious reasons: if I move all my scripts related to some project as a whole to another location of my computer or someone else's computer, if want my scripts to continue to run seamlessly.
> >
> > What I mean by "genuine" is that it should not be necessary to hardcode one single absolute path (making the code obviously not "portable" - to another place - anymore).
> >
> > For the time being, I found the following related posts, unfortunately never conclusive or even somewhat off-topic:
> > https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
> > https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
> > http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
> >
> > So I found 2 workarounds, more or less satisfactory:
> >
> >
> >   1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.
> >   2.  Or create an R project file with RStudio and use the package "here" to get the absolute path of the R project file and put all the R scripts related to this project in the R project directory, as often recommended.
> >
> > But I am really wondering why R doesn't have (please tell me if I'm wrong) this basic feature as many other languages have it (batch, shell, C, LaTeX, SAS with macro-variables, etc.)?
> > Do you know whether the language will have this kind of function in a near future? What are the obstacles / what is the reasoning for not having it already?
> >
> > Do you know other workarounds?
> >
> > Best regards,
> >
> > Olivier
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.



From |@t@z@hn @end|ng |rom gm@||@com  Sat Oct  6 18:42:59 2018
From: |@t@z@hn @end|ng |rom gm@||@com (Ista Zahn)
Date: Sat, 6 Oct 2018 12:42:59 -0400
Subject: [R] Genuine relative paths with R
In-Reply-To: <CA+vqiLFoxUe=4-KLN7ebcTwRoR95R0cSJfSKcDV=dungdT6hjg@mail.gmail.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <CA+vqiLGxq1_LPgOqNVWC+=e9deTzMCwgJx0G6X26kF-1vWZc5Q@mail.gmail.com>
 <VI1PR0202MB3357776AA39CD2305C0FA141F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <CA+vqiLFoxUe=4-KLN7ebcTwRoR95R0cSJfSKcDV=dungdT6hjg@mail.gmail.com>
Message-ID: <CA+vqiLGK40mSB1nQyyevU6mHz7PXD+X3B+j7q6oOoKPUuyp2Lw@mail.gmail.com>

On Sat, Oct 6, 2018 at 12:40 PM Ista Zahn <istazahn at gmail.com> wrote:
>
> Hi Olivier,
>
> Sorry for misspelling your name! Please see inline below.
>
> On Sat, Oct 6, 2018 at 9:58 AM Olivier GIVAUDAN
> <olivier_givaudan at hotmail.com> wrote:
> >
> > Hi Ista,
> >
> > Thank you for your reply.
> >
> > My motivation is described at the 3rd line of my initial message:
> > "if I move all my scripts related to some project as a whole to another location of my computer or someone else's computer, if want my scripts to continue to run seamlessly."
> >
> > The main point is simply to avoid any hardcoded path in my R scripts, as you wrote in your examples.
>
> My claim is that you cannot avoid hardcoding paths. Even if the
> feature you requested existed, you would still have to do e.g.,
>
> source("/path/to/dir/file.R")
>
> That is just as much hard-coded as the (only slightly more verbose)
>
> cd("/path/to/dir")
> source("file.R")
>
> So, I'm afraid I still don't get it. What is it that you actually want
> to do that you currently cannot?

I should have added that my assumption is that you will call

setwd("/path/to/dir")
source("file.R")

interactively, not that you will hard-code this in your script.

Best,
Ista
>
> Best,
> Ista
> >
> > BTW I don't use R with command line, only within RStudio or with the default GUI.
> >
> > Best regards,
> >
> > Olivier (and not Oliver )
> > ________________________________
> > De : Ista Zahn <istazahn at gmail.com>
> > Envoy? : samedi 6 octobre 2018 12:56
> > ? : olivier_givaudan at hotmail.com
> > Cc : r-help at r-project.org
> > Objet : Re: [R] Genuine relative paths with R
> >
> > Hi Oliver,
> >
> > Interesting question. Can you describe your motivation in a little
> > more detail? That is, why do you what this feature? I ask because to
> > my way of thinking you have to know the path to the script in order to
> > call it in the first place. If calling from R, is
> >
> > setwd("/path/to/dir")
> > source("file.R")
> >
> > really so much worse than
> >
> > source("path/to/dir/file.R")
> >
> > ?  If it is worse, why?
> >
> > Similarly if calling from a shell, is
> >
> > cd /path/to/dir
> > Rscript file.R
> >
> > really so much worse than
> >
> > Rscript /path/to/dir/file.R
> >
> > ? Again, if is worse, why?
> >
> > Best,
> > Ista
> > On Sat, Oct 6, 2018 at 8:25 AM Olivier GIVAUDAN
> > <olivier_givaudan at hotmail.com> wrote:
> > >
> > > Dear R users,
> > >
> > > I would like to work with genuine relative paths in R for obvious reasons: if I move all my scripts related to some project as a whole to another location of my computer or someone else's computer, if want my scripts to continue to run seamlessly.
> > >
> > > What I mean by "genuine" is that it should not be necessary to hardcode one single absolute path (making the code obviously not "portable" - to another place - anymore).
> > >
> > > For the time being, I found the following related posts, unfortunately never conclusive or even somewhat off-topic:
> > > https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
> > > https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
> > > http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
> > >
> > > So I found 2 workarounds, more or less satisfactory:
> > >
> > >
> > >   1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.
> > >   2.  Or create an R project file with RStudio and use the package "here" to get the absolute path of the R project file and put all the R scripts related to this project in the R project directory, as often recommended.
> > >
> > > But I am really wondering why R doesn't have (please tell me if I'm wrong) this basic feature as many other languages have it (batch, shell, C, LaTeX, SAS with macro-variables, etc.)?
> > > Do you know whether the language will have this kind of function in a near future? What are the obstacles / what is the reasoning for not having it already?
> > >
> > > Do you know other workarounds?
> > >
> > > Best regards,
> > >
> > > Olivier
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.



From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sat Oct  6 19:16:09 2018
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sat, 6 Oct 2018 18:16:09 +0100
Subject: [R] 
 Requesting for help on the problem of "subscript out of bounds"
In-Reply-To: <CAOFE=kNz-za=i44_XuqQYtQyvdswvWmUYjAV+48sb6ZSSwgRBA@mail.gmail.com>
References: <s00fgd43bpmvp8d126tra105.1538817508046@email.android.com>
 <CAOFE=kN4opv9-pp0QnN76UqHymr1ROoX9_P9fE=-M+j=x2qGQw@mail.gmail.com>
 <8a802382-6dfd-feca-503a-eb65710aa7b3@sapo.pt>
 <CAOFE=kNz-za=i44_XuqQYtQyvdswvWmUYjAV+48sb6ZSSwgRBA@mail.gmail.com>
Message-ID: <16c267c6-fa89-7105-9203-3e6000124aa5@sapo.pt>

Hello,

Can you post the output of

dput(head(ts, 20))    # paste the output of this in a mail
dim(ts)               # and this


Rui Barradas

?s 15:45 de 06/10/2018, Subhamitra Patra escreveu:
> Yes, I tried as per your suggestion, but not getting any results. I 
> think, there is some dimension mismatch in the data matrix and result 
> matrix.
> 
> I have to compute the particular model yearly for each series.
> 
> Please help.
> 
> Thanks in advance.
> 
> 
> On Sat, Oct 6, 2018 at 4:58 PM Rui Barradas <ruipbarradas at sapo.pt 
> <mailto:ruipbarradas at sapo.pt>> wrote:
> 
>     Hello,
> 
>     I suggested NROW (all uppercase) because it works even if its argument,
>     in your case ts, has only one dimension, nrow needs 2-dim objects.
> 
>     I have now noticed that you are indexing ts as if it has two
>     dimensions,
>     and that r is created with function matrix() but then you index it with
>     just one dimension.
> 
> 
>     r[i] <- approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]), elag = 1)
> 
> 
>     Shouldn't it be ts[i] or r[i, ] ?
> 
>     Hope this helps,
> 
>     Rui Barradas
> 
>     ?s 10:34 de 06/10/2018, Subhamitra Patra escreveu:
>      > I am extremely sorry to say that both the suggestions did not work.
>      >
>      > I did not understand the suggestion of Prof. Lemon. So, Sir, Can you
>      > please clarify me your suggestion?
>      >
>      >
>      >? ? ? ? ?I tried the suggestion of Ruipbarradas. It does not work.
>      >
>      >
>      > Please help me out for which I shall be always grateful to you.
>      >
>      > Thanks in advance.
>      >
>      > On Sat, Oct 6, 2018 at 2:48 PM ruipbarradas <ruipbarradas at sapo.pt
>     <mailto:ruipbarradas at sapo.pt>
>      > <mailto:ruipbarradas at sapo.pt <mailto:ruipbarradas at sapo.pt>>> wrote:
>      >
>      >? ? ?Hello,
>      >
>      >? ? ?Instead of nrow try all uppercase:
>      >
>      >? ? ?N <- NROW (ts)
>      >
>      >
>      >? ? ?Hope this helps,
>      >
>      >? ? ?Rui Barradas
>      >
>      >
>      >
>      >
>      >? ? ?Enviado a partir do meu smartphone Samsung Galaxy.
>      >? ? ?-------- Mensagem original --------
>      >? ? ?De: Subhamitra Patra <subhamitra.patra at gmail.com
>     <mailto:subhamitra.patra at gmail.com>
>      >? ? ?<mailto:subhamitra.patra at gmail.com
>     <mailto:subhamitra.patra at gmail.com>>>
>      >? ? ?Data: 06/10/2018 10:14 (GMT+00:00)
>      >? ? ?Para: drjimlemon at gmail.com <mailto:drjimlemon at gmail.com>
>     <mailto:drjimlemon at gmail.com <mailto:drjimlemon at gmail.com>>
>      >? ? ?Cc: r-help at r-project.org <mailto:r-help at r-project.org>
>     <mailto:r-help at r-project.org <mailto:r-help at r-project.org>>
>      >? ? ?Assunto: Re: [R] Requesting for help on the problem of "subscript
>      >? ? ?out of bounds"
>      >
>      >? ? ?Hello Sir,
>      >
>      >? ? ?I tried by defining mat, but still facing the same problem.
>      >
>      >? ? ?Hence, mat represents the time series. This time, I defined
>     it as ts and
>      >? ? ?tried, but still having the same problem.
>      >
>      >? ? ?In particular, the problem is coming in the following line
>      >? ? ?*for (i in 1:N){*
>      >? ? ?*+???? r[i]<-approx_entropy(ts[i,], edim = 2, r =
>     0.2*sd(ts[i,]), elag =
>      >? ? ?1) *
>      >
>      >? ? ?where i is unable to synchronize with the no. of rows i.e.
>     rows and
>      >? ? ?thus I
>      >? ? ?am getting the error of
>      >
>      >? ? ?*Error in `[<-`(`*tmp*`, i, , value = ts[i:(N - m + i)]) :
>      >? ? ?subscript out
>      >? ? ?of bounds*
>      >
>      >? ? ?For your reference, I am providing my full code with an
>     explanation as
>      >? ? ?follows.
>      >
>      >? ? ?The function
>      >
>      >? ? ?approx_entropy(ts, edim = 2, r = 0.2*sd(ts), elag = 1)
>      >
>      >? ? ?from the package,pracma I am calculating the approximate
>     entropy of time
>      >? ? ?series.ts
>      >
>      >? ? ?I have a matrix of time series (one series per row i.e. 51
>     rows and 1
>      >? ? ?column)? and I would estimate the approximate entropy for each of
>      >? ? ?the rows,
>      >? ? ?storing the results in a vector. So, I have written a code
>      >
>      >? ? ?library(pracma)
>      >
>      >? ? ?N<-nrow(ts)
>      >? ? ?r<-matrix(0, nrow = N, ncol = 1)for (i in 1:N){
>      >? ? ? ???? r[i]<-approx_entropy(ts[i,], edim = 2, r = 0.2*sd(ts[i,]),
>      >? ? ?elag = 1)}
>      >
>      >? ? ?* After calculating for 1 series, I need to calculate the same
>      >? ? ?things for
>      >? ? ?the multiple series by changing the dimension of the ncol.*
>      >
>      >? ? ?Please help me in this regard.
>      >
>      >? ? ?Thanks in advance.
>      >
>      >? ? ?On Sat, Oct 6, 2018 at 2:22 PM Jim Lemon
>     <drjimlemon at gmail.com <mailto:drjimlemon at gmail.com>
>      >? ? ?<mailto:drjimlemon at gmail.com <mailto:drjimlemon at gmail.com>>>
>     wrote:
>      >
>      >? ? ? > Hi Subhamitra,
>      >? ? ? > Where I think the error arises is in the line:
>      >? ? ? >
>      >? ? ? >? N<-nrow(mat)
>      >? ? ? >
>      >? ? ? > Since we don't know what "mat" is, we don't know what
>     nrow(mat) will
>      >? ? ? > return. If "mat" is not a matrix or data frame, it is
>     likely to be
>      >? ? ? > NULL. Try this:
>      >? ? ? >
>      >? ? ? > print(N)
>      >? ? ? >
>      >? ? ? > after defining it and see what it is.
>      >? ? ? >
>      >? ? ? > Jim
>      >? ? ? >
>      >? ? ? > On Sat, Oct 6, 2018 at 5:51 PM Subhamitra Patra
>      >? ? ? > <subhamitra.patra at gmail.com
>     <mailto:subhamitra.patra at gmail.com>
>     <mailto:subhamitra.patra at gmail.com <mailto:subhamitra.patra at gmail.com>>>
>      >? ? ?wrote:
>      >? ? ? > >
>      >? ? ? > > Hello friends,
>      >? ? ? > >
>      >? ? ? > > I am very new in this R world. But, still doing some
>     programming by
>      >? ? ? > > learning. While running one code, I found the problem of
>      >? ? ?"subscript out
>      >? ? ? > of
>      >? ? ? > > bounds". Please suggest me how to overcome this problem?
>     For your
>      >? ? ? > > reference, I am uploading my code here.
>      >? ? ? > >
>      >? ? ? > > The function
>      >? ? ? > >
>      >? ? ? > > approx_entropy(ts, edim =2, r = 0.2*sd(ts), elag = 1)
>      >? ? ? > >
>      >? ? ? > > library(pracma)
>      >? ? ? > >
>      >? ? ? > > N<-nrow(mat)
>      >? ? ? > > r<-matrix(0, nrow = N, ncol = 1)for (i in 1:N){
>      >? ? ? > >????? r[i]<-approx_entropy(mat[i,], edim = 2, r =
>      >? ? ?0.2*sd(mat[i,]), elag =
>      >? ? ? > 1)}
>      >? ? ? > >
>      >? ? ? > > After running this code, I am getting the error of
>      >? ? ? > >
>      >? ? ? > > *"subscript out of bounds"*
>      >? ? ? > >
>      >? ? ? > > Please help me for which I shall be always grateful to you.
>      >? ? ? > >
>      >? ? ? > > Thanks in advance.
>      >? ? ? > >
>      >? ? ? > >
>      >? ? ? > >
>      >? ? ? > > --
>      >? ? ? > > *Best Regards,*
>      >? ? ? > > *Subhamitra Patra*
>      >? ? ? > > *Phd. Research Scholar*
>      >? ? ? > > *Department of Humanities and Social Sciences*
>      >? ? ? > > *Indian Institute of Technology, Kharagpur*
>      >? ? ? > > *INDIA*
>      >? ? ? > >
>      >? ? ? > >???????? [[alternative HTML version deleted]]
>      >? ? ? > >
>      >? ? ? > > ______________________________________________
>      >? ? ? > > R-help at r-project.org <mailto:R-help at r-project.org>
>     <mailto:R-help at r-project.org <mailto:R-help at r-project.org>> mailing list
>      >? ? ?-- To UNSUBSCRIBE and more, see
>      >? ? ? > > https://stat.ethz.ch/mailman/listinfo/r-help
>      >? ? ? > > PLEASE do read the posting guide
>      >? ? ? > http://www.R-project.org/posting-guide.html
>      >? ? ? > > and provide commented, minimal, self-contained,
>     reproducible code.
>      >? ? ? >
>      >
>      >
>      >? ? ?--
>      >? ? ?*Best Regards,*
>      >? ? ?*Subhamitra Patra*
>      >? ? ?*Phd. Research Scholar*
>      >? ? ?*Department of Humanities and Social Sciences*
>      >? ? ?*Indian Institute of Technology, Kharagpur*
>      >? ? ?*INDIA*
>      >
>      >? ? ?[[alternative HTML version deleted]]
>      >
>      >? ? ?______________________________________________
>      > R-help at r-project.org <mailto:R-help at r-project.org>
>     <mailto:R-help at r-project.org <mailto:R-help at r-project.org>> mailing
>     list --
>      >? ? ?To UNSUBSCRIBE and more, see
>      > https://stat.ethz.ch/mailman/listinfo/r-help
>      >? ? ?PLEASE do read the posting guide
>      > http://www.R-project.org/posting-guide.html
>      >? ? ?and provide commented, minimal, self-contained, reproducible
>     code.
>      >
>      >
>      >
>      > --
>      > *Best Regards,*
>      > *Subhamitra Patra*
>      > *Phd. Research Scholar*
>      > *Department of Humanities and Social Sciences*
>      > *Indian Institute of Technology, Kharagpur*
>      > *INDIA*
> 
> 
> 
> -- 
> *Best Regards,*
> *Subhamitra Patra*
> *Phd. Research Scholar*
> *Department of Humanities and Social Sciences*
> *Indian Institute of Technology, Kharagpur*
> *INDIA*



From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Oct  6 21:31:29 2018
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 06 Oct 2018 12:31:29 -0700
Subject: [R] Genuine relative paths with R
In-Reply-To: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
Message-ID: <EF096B6D-D167-402E-A1BB-9310D60E6F64@dcn.davis.ca.us>

I stopped using hardcoded absolute paths inside R scripts years ago, and I suspect that is fairly common practice. That is, I almost never enter a path starting with "/" or "c:/" in an R script.

The key concession you have to make is to start your R session in your working directory using OS-specific mechanisms, and then reference your code and data relative to that directory. RStudio project files offer one mechanism for doing this; using CD from the OS command line is another, and using the file-browser double-click mechanism on .RData files is another (though I prefer to avoid that these days due to potential global environment contamination).

Perhaps you can be more specific about what facilities you are expecting to find. You should also mention what OS you typically use and how you normally start R.

On October 6, 2018 4:48:44 AM PDT, Olivier GIVAUDAN <olivier_givaudan at hotmail.com> wrote:
>Dear R users,
>
>I would like to work with genuine relative paths in R for obvious
>reasons: if I move all my scripts related to some project as a whole to
>another location of my computer or someone else's computer, if want my
>scripts to continue to run seamlessly.
>
>What I mean by "genuine" is that it should not be necessary to hardcode
>one single absolute path (making the code obviously not "portable" - to
>another place - anymore).
>
>For the time being, I found the following related posts, unfortunately
>never conclusive or even somewhat off-topic:
>https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
>https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
>http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
>
>So I found 2 workarounds, more or less satisfactory:
>
>
>1.  Either create a variable "ScriptPath" in the first lines of each of
>my R scripts and run a batch (or shell, etc.) to replace every single
>occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R
>script]" in all the R scripts located in the folder (and possibly
>subfolders) of the batch file.
>2.  Or create an R project file with RStudio and use the package "here"
>to get the absolute path of the R project file and put all the R
>scripts related to this project in the R project directory, as often
>recommended.
>
>But I am really wondering why R doesn't have (please tell me if I'm
>wrong) this basic feature as many other languages have it (batch,
>shell, C, LaTeX, SAS with macro-variables, etc.)?
>Do you know whether the language will have this kind of function in a
>near future? What are the obstacles / what is the reasoning for not
>having it already?
>
>Do you know other workarounds?
>
>Best regards,
>
>Olivier
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.



From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Oct  6 23:19:32 2018
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 06 Oct 2018 14:19:32 -0700
Subject: [R] Genuine relative paths with R
In-Reply-To: <VI1PR0202MB335744735A6AAD8240B2EC32F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <EF096B6D-D167-402E-A1BB-9310D60E6F64@dcn.davis.ca.us>
 <VI1PR0202MB335744735A6AAD8240B2EC32F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
Message-ID: <E55D1CDB-7F3A-4BD5-959B-937A01C2BDE4@dcn.davis.ca.us>

Please use reply-all to keep the conversation on the mailing list.

I found no enlightenment in your response to Ista. 

a) I have many years of experience in a variety of operating systems and languages, and there are a variety of approaches taken to handle self-configuration. R is not special in having to cede some responsibility to the OS if you want portability. I have no problems making my R code work unchanged on various platforms (and in multiple directories on the same machine of needed) simply by making all my path references local.

b) If you want to communicate to us about what mechanisms you cannot find in R, you are going to have to use more specific words than "this function". Ista already mentioned setwd, which works perfectly fine with relative paths, and the (optional) file.path function can construct paths without even assuming that "/" is the separator. Regardless of language I find that changing the working directory as the script runs makes for brittle code... simply using paths relative to the working directory avoids the risk of leaving the current directory changed if the processing fails.

c) Note that R does not provide elaborate support for sharing directories full of scripts containing functions... if you want to build complex code you should be building packages and using the R CMD check facility to prepare your code for use in other environments.

d) Some wild guesses at what you might find useful: ?Startup, littler package, ?commandArgs.

On October 6, 2018 1:43:34 PM PDT, Olivier GIVAUDAN <olivier_givaudan at hotmail.com> wrote:
>Hi Jeff,
>
>Thanks for sharing your workaround.
>
>I guess my last answer to Ista answers your question as well.
>
>To me this function (an equivalent of 'cd', say) should be
>platform-independent.
>
>Best regards,
>
>Olivier
>________________________________
>De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>Envoy? : samedi 6 octobre 2018 19:31
>? : r-help at r-project.org; Olivier GIVAUDAN; r-help at r-project.org
>Objet : Re: [R] Genuine relative paths with R
>
>I stopped using hardcoded absolute paths inside R scripts years ago,
>and I suspect that is fairly common practice. That is, I almost never
>enter a path starting with "/" or "c:/" in an R script.
>
>The key concession you have to make is to start your R session in your
>working directory using OS-specific mechanisms, and then reference your
>code and data relative to that directory. RStudio project files offer
>one mechanism for doing this; using CD from the OS command line is
>another, and using the file-browser double-click mechanism on .RData
>files is another (though I prefer to avoid that these days due to
>potential global environment contamination).
>
>Perhaps you can be more specific about what facilities you are
>expecting to find. You should also mention what OS you typically use
>and how you normally start R.
>
>On October 6, 2018 4:48:44 AM PDT, Olivier GIVAUDAN
><olivier_givaudan at hotmail.com> wrote:
>>Dear R users,
>>
>>I would like to work with genuine relative paths in R for obvious
>>reasons: if I move all my scripts related to some project as a whole
>to
>>another location of my computer or someone else's computer, if want my
>>scripts to continue to run seamlessly.
>>
>>What I mean by "genuine" is that it should not be necessary to
>hardcode
>>one single absolute path (making the code obviously not "portable" -
>to
>>another place - anymore).
>>
>>For the time being, I found the following related posts, unfortunately
>>never conclusive or even somewhat off-topic:
>>https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
>>https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
>>http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
>>
>>So I found 2 workarounds, more or less satisfactory:
>>
>>
>>1.  Either create a variable "ScriptPath" in the first lines of each
>of
>>my R scripts and run a batch (or shell, etc.) to replace every single
>>occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the
>R
>>script]" in all the R scripts located in the folder (and possibly
>>subfolders) of the batch file.
>>2.  Or create an R project file with RStudio and use the package
>"here"
>>to get the absolute path of the R project file and put all the R
>>scripts related to this project in the R project directory, as often
>>recommended.
>>
>>But I am really wondering why R doesn't have (please tell me if I'm
>>wrong) this basic feature as many other languages have it (batch,
>>shell, C, LaTeX, SAS with macro-variables, etc.)?
>>Do you know whether the language will have this kind of function in a
>>near future? What are the obstacles / what is the reasoning for not
>>having it already?
>>
>>Do you know other workarounds?
>>
>>Best regards,
>>
>>Olivier
>>
>>       [[alternative HTML version deleted]]
>>
>>______________________________________________
>>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>https://stat.ethz.ch/mailman/listinfo/r-help
>>PLEASE do read the posting guide
>>http://www.R-project.org/posting-guide.html
>>and provide commented, minimal, self-contained, reproducible code.
>
>--
>Sent from my phone. Please excuse my brevity.

-- 
Sent from my phone. Please excuse my brevity.



From o||v|er_g|v@ud@n @end|ng |rom hotm@||@com  Sat Oct  6 23:35:36 2018
From: o||v|er_g|v@ud@n @end|ng |rom hotm@||@com (Olivier GIVAUDAN)
Date: Sat, 6 Oct 2018 21:35:36 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <CA+vqiLFoxUe=4-KLN7ebcTwRoR95R0cSJfSKcDV=dungdT6hjg@mail.gmail.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <CA+vqiLGxq1_LPgOqNVWC+=e9deTzMCwgJx0G6X26kF-1vWZc5Q@mail.gmail.com>
 <VI1PR0202MB3357776AA39CD2305C0FA141F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <CA+vqiLFoxUe=4-KLN7ebcTwRoR95R0cSJfSKcDV=dungdT6hjg@mail.gmail.com>
Message-ID: <VI1PR0202MB3357C8AE14B2202164F23229F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>

Hi Ista,

No worry :)

"/path/to/dir" is what I call hardcoded path.
And I do want to work with relative paths in code, not interacticely.

I (but not only I actually!) need genuine relative paths especially for inputting or outputting files in a location "close" (e.g. parent or child folder) to where the R script is located.

I'm looking for the equivalent of the function cd in batch / shell, for instance, or __DIR__ in PHP, or %sysget(SAS_EXECFILEPATH) in SAS, etc.

Is it clearer now?

Best regards,

Olivier

________________________________
De : Ista Zahn <istazahn at gmail.com>
Envoy? : samedi 6 octobre 2018 16:40
? : olivier_givaudan at hotmail.com; r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

Hi Olivier,

Sorry for misspelling your name! Please see inline below.

On Sat, Oct 6, 2018 at 9:58 AM Olivier GIVAUDAN
<olivier_givaudan at hotmail.com> wrote:
>
> Hi Ista,
>
> Thank you for your reply.
>
> My motivation is described at the 3rd line of my initial message:
> "if I move all my scripts related to some project as a whole to another location of my computer or someone else's computer, if want my scripts to continue to run seamlessly."
>
> The main point is simply to avoid any hardcoded path in my R scripts, as you wrote in your examples.

My claim is that you cannot avoid hardcoding paths. Even if the
feature you requested existed, you would still have to do e.g.,

source("/path/to/dir/file.R")

That is just as much hard-coded as the (only slightly more verbose)

cd("/path/to/dir")
source("file.R")

So, I'm afraid I still don't get it. What is it that you actually want
to do that you currently cannot?

Best,
Ista
>
> BTW I don't use R with command line, only within RStudio or with the default GUI.
>
> Best regards,
>
> Olivier (and not Oliver )
> ________________________________
> De : Ista Zahn <istazahn at gmail.com>
> Envoy? : samedi 6 octobre 2018 12:56
> ? : olivier_givaudan at hotmail.com
> Cc : r-help at r-project.org
> Objet : Re: [R] Genuine relative paths with R
>
> Hi Oliver,
>
> Interesting question. Can you describe your motivation in a little
> more detail? That is, why do you what this feature? I ask because to
> my way of thinking you have to know the path to the script in order to
> call it in the first place. If calling from R, is
>
> setwd("/path/to/dir")
> source("file.R")
>
> really so much worse than
>
> source("path/to/dir/file.R")
>
> ?  If it is worse, why?
>
> Similarly if calling from a shell, is
>
> cd /path/to/dir
> Rscript file.R
>
> really so much worse than
>
> Rscript /path/to/dir/file.R
>
> ? Again, if is worse, why?
>
> Best,
> Ista
> On Sat, Oct 6, 2018 at 8:25 AM Olivier GIVAUDAN
> <olivier_givaudan at hotmail.com> wrote:
> >
> > Dear R users,
> >
> > I would like to work with genuine relative paths in R for obvious reasons: if I move all my scripts related to some project as a whole to another location of my computer or someone else's computer, if want my scripts to continue to run seamlessly.
> >
> > What I mean by "genuine" is that it should not be necessary to hardcode one single absolute path (making the code obviously not "portable" - to another place - anymore).
> >
> > For the time being, I found the following related posts, unfortunately never conclusive or even somewhat off-topic:
> > https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
> > https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
> > http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
> >
> > So I found 2 workarounds, more or less satisfactory:
> >
> >
> >   1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.
> >   2.  Or create an R project file with RStudio and use the package "here" to get the absolute path of the R project file and put all the R scripts related to this project in the R project directory, as often recommended.
> >
> > But I am really wondering why R doesn't have (please tell me if I'm wrong) this basic feature as many other languages have it (batch, shell, C, LaTeX, SAS with macro-variables, etc.)?
> > Do you know whether the language will have this kind of function in a near future? What are the obstacles / what is the reasoning for not having it already?
> >
> > Do you know other workarounds?
> >
> > Best regards,
> >
> > Olivier
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]



From o||v|er_g|v@ud@n @end|ng |rom hotm@||@com  Sat Oct  6 23:36:21 2018
From: o||v|er_g|v@ud@n @end|ng |rom hotm@||@com (Olivier GIVAUDAN)
Date: Sat, 6 Oct 2018 21:36:21 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <EF096B6D-D167-402E-A1BB-9310D60E6F64@dcn.davis.ca.us>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <EF096B6D-D167-402E-A1BB-9310D60E6F64@dcn.davis.ca.us>
Message-ID: <VI1PR0202MB33571A964A191D165B3BF422F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>

Hi Jeff,

Thanks for sharing your workaround.

I guess my last answer to Ista answers your question as well.

To me this function (an equivalent of 'cd', say) should be platform-independent.

Best regards,

Olivier

________________________________
De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
Envoy? : samedi 6 octobre 2018 19:31
? : r-help at r-project.org; Olivier GIVAUDAN; r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

I stopped using hardcoded absolute paths inside R scripts years ago, and I suspect that is fairly common practice. That is, I almost never enter a path starting with "/" or "c:/" in an R script.

The key concession you have to make is to start your R session in your working directory using OS-specific mechanisms, and then reference your code and data relative to that directory. RStudio project files offer one mechanism for doing this; using CD from the OS command line is another, and using the file-browser double-click mechanism on .RData files is another (though I prefer to avoid that these days due to potential global environment contamination).

Perhaps you can be more specific about what facilities you are expecting to find. You should also mention what OS you typically use and how you normally start R.

On October 6, 2018 4:48:44 AM PDT, Olivier GIVAUDAN <olivier_givaudan at hotmail.com> wrote:
>Dear R users,
>
>I would like to work with genuine relative paths in R for obvious
>reasons: if I move all my scripts related to some project as a whole to
>another location of my computer or someone else's computer, if want my
>scripts to continue to run seamlessly.
>
>What I mean by "genuine" is that it should not be necessary to hardcode
>one single absolute path (making the code obviously not "portable" - to
>another place - anymore).
>
>For the time being, I found the following related posts, unfortunately
>never conclusive or even somewhat off-topic:
>https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
>https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
>http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
>
>So I found 2 workarounds, more or less satisfactory:
>
>
>1.  Either create a variable "ScriptPath" in the first lines of each of
>my R scripts and run a batch (or shell, etc.) to replace every single
>occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R
>script]" in all the R scripts located in the folder (and possibly
>subfolders) of the batch file.
>2.  Or create an R project file with RStudio and use the package "here"
>to get the absolute path of the R project file and put all the R
>scripts related to this project in the R project directory, as often
>recommended.
>
>But I am really wondering why R doesn't have (please tell me if I'm
>wrong) this basic feature as many other languages have it (batch,
>shell, C, LaTeX, SAS with macro-variables, etc.)?
>Do you know whether the language will have this kind of function in a
>near future? What are the obstacles / what is the reasoning for not
>having it already?
>
>Do you know other workarounds?
>
>Best regards,
>
>Olivier
>
>       [[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

--
Sent from my phone. Please excuse my brevity.

	[[alternative HTML version deleted]]



From @ubh@m|tr@@p@tr@ @end|ng |rom gm@||@com  Sun Oct  7 12:03:54 2018
From: @ubh@m|tr@@p@tr@ @end|ng |rom gm@||@com (Subhamitra Patra)
Date: Sun, 7 Oct 2018 15:33:54 +0530
Subject: [R] 
 Requesting for help on the problem of "subscript out of bounds"
In-Reply-To: <CA+8X3fXBGSkQX1jdu_AeSQPv-sGTcPusfKzJ5LBbjwoXwGUSEA@mail.gmail.com>
References: <s00fgd43bpmvp8d126tra105.1538817508046@email.android.com>
 <CAOFE=kN4opv9-pp0QnN76UqHymr1ROoX9_P9fE=-M+j=x2qGQw@mail.gmail.com>
 <8a802382-6dfd-feca-503a-eb65710aa7b3@sapo.pt>
 <CAOFE=kNz-za=i44_XuqQYtQyvdswvWmUYjAV+48sb6ZSSwgRBA@mail.gmail.com>
 <16c267c6-fa89-7105-9203-3e6000124aa5@sapo.pt>
 <CAOFE=kNhLWKPy47e86dcXVsetCVQAQA=2hGDqX-Os3aOVLOtoA@mail.gmail.com>
 <CA+8X3fXBGSkQX1jdu_AeSQPv-sGTcPusfKzJ5LBbjwoXwGUSEA@mail.gmail.com>
Message-ID: <CAOFE=kOy847c_eT2nBtT_4530ObGDkuCVmzJOUwze7n+cLnbsQ@mail.gmail.com>

Thanks a lot, Sir. I'll check them out.

But, I have 1 more query that in which package   "b" and "l" functions are
available?

Can you please educate me about the usage of "b" and "I" in my code.

For your reference,

I am writing my code here again.

N<-ncol(ts)
> r<-matrix(0, ncol = N, nrow = 1)
> for (i in 1:N){
       r[i]<-approx_entropy(ts[,i], edim = 2, r = 0.2*sd(ts[,i]), elag = 1)
}
plot (r)

Here how to add "b" and "l" function?

Please help me.

Thanks in advance.

On Sun, Oct 7, 2018 at 3:19 PM Jim Lemon <drjimlemon at gmail.com> wrote:

> plot(r) will give you a set of points with the values of r on the y
> axis and 1:N on the x axis. If you want to add more series, look at
> "points" or "lines". Also look at the options "b" and "l" for plot if
> you want points and lines or just lines respectively.
>
> Jim
>
> On Sun, Oct 7, 2018 at 6:03 PM Subhamitra Patra
> <subhamitra.patra at gmail.com> wrote:
> >
> > Hello friends,
> >
> > Finally, I became able to compute APEn values for each series.
> >
> > Actually, there was a small mistake in the code for the arguments of row
> and columns. Now, after rectifying my mistakes as well as by taking the
> suggestions from Rui Barradas and Jim, It became possible. Therefore, I
> would like to say thanks to both of you.
> >
> > One small help (if possible) that I want to plot that particular APEn
> values for each series.
> > Only, I will write the code "plot (r)" or any other code is there?
> >
> > Please help.
> >
> > Thanks in advance.
>


-- 
*Best Regards,*
*Subhamitra Patra*
*Phd. Research Scholar*
*Department of Humanities and Social Sciences*
*Indian Institute of Technology, Kharagpur*
*INDIA*

	[[alternative HTML version deleted]]



From @ubh@m|tr@@p@tr@ @end|ng |rom gm@||@com  Sun Oct  7 13:29:01 2018
From: @ubh@m|tr@@p@tr@ @end|ng |rom gm@||@com (Subhamitra Patra)
Date: Sun, 7 Oct 2018 16:59:01 +0530
Subject: [R] 
 Requesting for help on the problem of "subscript out of bounds"
In-Reply-To: <CAOFE=kOy847c_eT2nBtT_4530ObGDkuCVmzJOUwze7n+cLnbsQ@mail.gmail.com>
References: <s00fgd43bpmvp8d126tra105.1538817508046@email.android.com>
 <CAOFE=kN4opv9-pp0QnN76UqHymr1ROoX9_P9fE=-M+j=x2qGQw@mail.gmail.com>
 <8a802382-6dfd-feca-503a-eb65710aa7b3@sapo.pt>
 <CAOFE=kNz-za=i44_XuqQYtQyvdswvWmUYjAV+48sb6ZSSwgRBA@mail.gmail.com>
 <16c267c6-fa89-7105-9203-3e6000124aa5@sapo.pt>
 <CAOFE=kNhLWKPy47e86dcXVsetCVQAQA=2hGDqX-Os3aOVLOtoA@mail.gmail.com>
 <CA+8X3fXBGSkQX1jdu_AeSQPv-sGTcPusfKzJ5LBbjwoXwGUSEA@mail.gmail.com>
 <CAOFE=kOy847c_eT2nBtT_4530ObGDkuCVmzJOUwze7n+cLnbsQ@mail.gmail.com>
Message-ID: <CAOFE=kOBRY++O=hfV0MhRKHcAGYOOJXB4AkfGhrc9FHHFgz6ZA@mail.gmail.com>

Dear Friends,

Further, I want to compute the APEn values for the multiple files in a
folder. In particular, along with the loop for the columns in one data file
(through the code that I mentioned above), I have to write a loop for the
multiple files (having same dimensions) in a folder.

But, I am not getting a proper idea for writing the double loop (i.e. one
for the multiple columns of one excel sheet and other for the multiple
excel sheets of a folder).

Please help me in this regard.

Thanks in advance.

On Sun, Oct 7, 2018 at 3:33 PM Subhamitra Patra <subhamitra.patra at gmail.com>
wrote:

> Thanks a lot, Sir. I'll check them out.
>
> But, I have 1 more query that in which package   "b" and "l" functions
> are available?
>
> Can you please educate me about the usage of "b" and "I" in my code.
>
> For your reference,
>
> I am writing my code here again.
>
> N<-ncol(ts)
> > r<-matrix(0, ncol = N, nrow = 1)
> > for (i in 1:N){
>        r[i]<-approx_entropy(ts[,i], edim = 2, r = 0.2*sd(ts[,i]), elag = 1)
> }
> plot (r)
>
> Here how to add "b" and "l" function?
>
> Please help me.
>
> Thanks in advance.
>
> On Sun, Oct 7, 2018 at 3:19 PM Jim Lemon <drjimlemon at gmail.com> wrote:
>
>> plot(r) will give you a set of points with the values of r on the y
>> axis and 1:N on the x axis. If you want to add more series, look at
>> "points" or "lines". Also look at the options "b" and "l" for plot if
>> you want points and lines or just lines respectively.
>>
>> Jim
>>
>> On Sun, Oct 7, 2018 at 6:03 PM Subhamitra Patra
>> <subhamitra.patra at gmail.com> wrote:
>> >
>> > Hello friends,
>> >
>> > Finally, I became able to compute APEn values for each series.
>> >
>> > Actually, there was a small mistake in the code for the arguments of
>> row and columns. Now, after rectifying my mistakes as well as by taking the
>> suggestions from Rui Barradas and Jim, It became possible. Therefore, I
>> would like to say thanks to both of you.
>> >
>> > One small help (if possible) that I want to plot that particular APEn
>> values for each series.
>> > Only, I will write the code "plot (r)" or any other code is there?
>> >
>> > Please help.
>> >
>> > Thanks in advance.
>>
>
>
> --
> *Best Regards,*
> *Subhamitra Patra*
> *Phd. Research Scholar*
> *Department of Humanities and Social Sciences*
> *Indian Institute of Technology, Kharagpur*
> *INDIA*
>


-- 
*Best Regards,*
*Subhamitra Patra*
*Phd. Research Scholar*
*Department of Humanities and Social Sciences*
*Indian Institute of Technology, Kharagpur*
*INDIA*

	[[alternative HTML version deleted]]



From |@t@z@hn @end|ng |rom gm@||@com  Sun Oct  7 14:37:10 2018
From: |@t@z@hn @end|ng |rom gm@||@com (Ista Zahn)
Date: Sun, 7 Oct 2018 08:37:10 -0400
Subject: [R] Genuine relative paths with R
In-Reply-To: <VI1PR0202MB3357C6E7C9CBE5E33D9546A9F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <CA+vqiLGxq1_LPgOqNVWC+=e9deTzMCwgJx0G6X26kF-1vWZc5Q@mail.gmail.com>
 <VI1PR0202MB3357776AA39CD2305C0FA141F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <CA+vqiLFoxUe=4-KLN7ebcTwRoR95R0cSJfSKcDV=dungdT6hjg@mail.gmail.com>
 <VI1PR0202MB3357C6E7C9CBE5E33D9546A9F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
Message-ID: <CA+vqiLFqRHpp-WR2g1Eg6J_KV15nNqABunWFE0CSsftgAm9xWQ@mail.gmail.com>

Hi Olivier,

Please keep the list copied so others can join our discussion.
On Sat, Oct 6, 2018 at 4:39 PM Olivier GIVAUDAN
<olivier_givaudan at hotmail.com> wrote:
>
> Hi Ista,
>
> No worry :)
>
> "/path/to/dir" is what I call hardcoded path.

Yes, we share the same definition :-)

> And I do want to work with relative paths in code, not interacticely.

Yes, using relative paths in code is a good idea. We agree about this also!

>
> I (but not only I actually!) need genuine relative paths especially for inputting or outputting files in a location "close" (e.g. parent or child folder) to where the R script is located.

You still have not explained why!

>
> I'm looking for the equivalent of the function cd in batch / shell, for instance, or __DIR__ in PHP, or %sysget(SAS_EXECFILEPATH) in SAS, etc.
>
> Is it clearer now?

I'm not confused about what you are asking for. I'm only asking for
more details about why you think you need it. Again, my claim is that
all this feature would do is allow the user of the script to
interactively call it with e.g.,

Rscript /path/to/dir/file.R

instead of

cd /path/to/dir/file.R
Rscript file.R

Note that I assume that only relative paths are used in the scripts.
The path is specified by the user when running the script, and this
cannot be avoided. Thus some "auto setwd to the source file directory"
would serve only as a minor convenience that enables my first from
above as opposed to my second form. Is this the benefit you are hoping
for, or is there some other reason you want this feature?

Note that when calling from R you can already to

source("/path/to/dir/file.R", chdir = TRUE)

Best,
Ista

>
> Best regards,
>
> Olivier
>
> ________________________________
> De : Ista Zahn <istazahn at gmail.com>
> Envoy? : samedi 6 octobre 2018 16:40
> ? : olivier_givaudan at hotmail.com; r-help at r-project.org
> Objet : Re: [R] Genuine relative paths with R
>
> Hi Olivier,
>
> Sorry for misspelling your name! Please see inline below.
>
> On Sat, Oct 6, 2018 at 9:58 AM Olivier GIVAUDAN
> <olivier_givaudan at hotmail.com> wrote:
> >
> > Hi Ista,
> >
> > Thank you for your reply.
> >
> > My motivation is described at the 3rd line of my initial message:
> > "if I move all my scripts related to some project as a whole to another location of my computer or someone else's computer, if want my scripts to continue to run seamlessly."
> >
> > The main point is simply to avoid any hardcoded path in my R scripts, as you wrote in your examples.
>
> My claim is that you cannot avoid hardcoding paths. Even if the
> feature you requested existed, you would still have to do e.g.,
>
> source("/path/to/dir/file.R")
>
> That is just as much hard-coded as the (only slightly more verbose)
>
> cd("/path/to/dir")
> source("file.R")
>
> So, I'm afraid I still don't get it. What is it that you actually want
> to do that you currently cannot?
>
> Best,
> Ista
> >
> > BTW I don't use R with command line, only within RStudio or with the default GUI.
> >
> > Best regards,
> >
> > Olivier (and not Oliver )
> > ________________________________
> > De : Ista Zahn <istazahn at gmail.com>
> > Envoy? : samedi 6 octobre 2018 12:56
> > ? : olivier_givaudan at hotmail.com
> > Cc : r-help at r-project.org
> > Objet : Re: [R] Genuine relative paths with R
> >
> > Hi Oliver,
> >
> > Interesting question. Can you describe your motivation in a little
> > more detail? That is, why do you what this feature? I ask because to
> > my way of thinking you have to know the path to the script in order to
> > call it in the first place. If calling from R, is
> >
> > setwd("/path/to/dir")
> > source("file.R")
> >
> > really so much worse than
> >
> > source("path/to/dir/file.R")
> >
> > ?  If it is worse, why?
> >
> > Similarly if calling from a shell, is
> >
> > cd /path/to/dir
> > Rscript file.R
> >
> > really so much worse than
> >
> > Rscript /path/to/dir/file.R
> >
> > ? Again, if is worse, why?
> >
> > Best,
> > Ista
> > On Sat, Oct 6, 2018 at 8:25 AM Olivier GIVAUDAN
> > <olivier_givaudan at hotmail.com> wrote:
> > >
> > > Dear R users,
> > >
> > > I would like to work with genuine relative paths in R for obvious reasons: if I move all my scripts related to some project as a whole to another location of my computer or someone else's computer, if want my scripts to continue to run seamlessly.
> > >
> > > What I mean by "genuine" is that it should not be necessary to hardcode one single absolute path (making the code obviously not "portable" - to another place - anymore).
> > >
> > > For the time being, I found the following related posts, unfortunately never conclusive or even somewhat off-topic:
> > > https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
> > > https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
> > > http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
> > >
> > > So I found 2 workarounds, more or less satisfactory:
> > >
> > >
> > >   1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.
> > >   2.  Or create an R project file with RStudio and use the package "here" to get the absolute path of the R project file and put all the R scripts related to this project in the R project directory, as often recommended.
> > >
> > > But I am really wondering why R doesn't have (please tell me if I'm wrong) this basic feature as many other languages have it (batch, shell, C, LaTeX, SAS with macro-variables, etc.)?
> > > Do you know whether the language will have this kind of function in a near future? What are the obstacles / what is the reasoning for not having it already?
> > >
> > > Do you know other workarounds?
> > >
> > > Best regards,
> > >
> > > Olivier
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.



From ||@t@ @end|ng |rom dewey@myzen@co@uk  Sun Oct  7 14:46:47 2018
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Sun, 7 Oct 2018 13:46:47 +0100
Subject: [R] 
 Requesting for help on the problem of "subscript out of bounds"
In-Reply-To: <CAOFE=kOy847c_eT2nBtT_4530ObGDkuCVmzJOUwze7n+cLnbsQ@mail.gmail.com>
References: <s00fgd43bpmvp8d126tra105.1538817508046@email.android.com>
 <CAOFE=kN4opv9-pp0QnN76UqHymr1ROoX9_P9fE=-M+j=x2qGQw@mail.gmail.com>
 <8a802382-6dfd-feca-503a-eb65710aa7b3@sapo.pt>
 <CAOFE=kNz-za=i44_XuqQYtQyvdswvWmUYjAV+48sb6ZSSwgRBA@mail.gmail.com>
 <16c267c6-fa89-7105-9203-3e6000124aa5@sapo.pt>
 <CAOFE=kNhLWKPy47e86dcXVsetCVQAQA=2hGDqX-Os3aOVLOtoA@mail.gmail.com>
 <CA+8X3fXBGSkQX1jdu_AeSQPv-sGTcPusfKzJ5LBbjwoXwGUSEA@mail.gmail.com>
 <CAOFE=kOy847c_eT2nBtT_4530ObGDkuCVmzJOUwze7n+cLnbsQ@mail.gmail.com>
Message-ID: <fc20ac89-6201-04f6-a3db-7fb16f2f05f9@dewey.myzen.co.uk>

If you look at the documentation for plot() you will see a type 
parameter which can take a number of values including plot = "l" to get 
lines, and so on.

On 07/10/2018 11:03, Subhamitra Patra wrote:
> Thanks a lot, Sir. I'll check them out.
> 
> But, I have 1 more query that in which package   "b" and "l" functions are
> available?
> 
> Can you please educate me about the usage of "b" and "I" in my code.
> 
> For your reference,
> 
> I am writing my code here again.
> 
> N<-ncol(ts)
>> r<-matrix(0, ncol = N, nrow = 1)
>> for (i in 1:N){
>         r[i]<-approx_entropy(ts[,i], edim = 2, r = 0.2*sd(ts[,i]), elag = 1)
> }
> plot (r)
> 
> Here how to add "b" and "l" function?
> 
> Please help me.
> 
> Thanks in advance.
> 
> On Sun, Oct 7, 2018 at 3:19 PM Jim Lemon <drjimlemon at gmail.com> wrote:
> 
>> plot(r) will give you a set of points with the values of r on the y
>> axis and 1:N on the x axis. If you want to add more series, look at
>> "points" or "lines". Also look at the options "b" and "l" for plot if
>> you want points and lines or just lines respectively.
>>
>> Jim
>>
>> On Sun, Oct 7, 2018 at 6:03 PM Subhamitra Patra
>> <subhamitra.patra at gmail.com> wrote:
>>>
>>> Hello friends,
>>>
>>> Finally, I became able to compute APEn values for each series.
>>>
>>> Actually, there was a small mistake in the code for the arguments of row
>> and columns. Now, after rectifying my mistakes as well as by taking the
>> suggestions from Rui Barradas and Jim, It became possible. Therefore, I
>> would like to say thanks to both of you.
>>>
>>> One small help (if possible) that I want to plot that particular APEn
>> values for each series.
>>> Only, I will write the code "plot (r)" or any other code is there?
>>>
>>> Please help.
>>>
>>> Thanks in advance.
>>
> 
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html



From @ubh@m|tr@@p@tr@ @end|ng |rom gm@||@com  Sun Oct  7 15:29:28 2018
From: @ubh@m|tr@@p@tr@ @end|ng |rom gm@||@com (Subhamitra Patra)
Date: Sun, 7 Oct 2018 18:59:28 +0530
Subject: [R] 
 Requesting for help on the problem of "subscript out of bounds"
In-Reply-To: <fc20ac89-6201-04f6-a3db-7fb16f2f05f9@dewey.myzen.co.uk>
References: <s00fgd43bpmvp8d126tra105.1538817508046@email.android.com>
 <CAOFE=kN4opv9-pp0QnN76UqHymr1ROoX9_P9fE=-M+j=x2qGQw@mail.gmail.com>
 <8a802382-6dfd-feca-503a-eb65710aa7b3@sapo.pt>
 <CAOFE=kNz-za=i44_XuqQYtQyvdswvWmUYjAV+48sb6ZSSwgRBA@mail.gmail.com>
 <16c267c6-fa89-7105-9203-3e6000124aa5@sapo.pt>
 <CAOFE=kNhLWKPy47e86dcXVsetCVQAQA=2hGDqX-Os3aOVLOtoA@mail.gmail.com>
 <CA+8X3fXBGSkQX1jdu_AeSQPv-sGTcPusfKzJ5LBbjwoXwGUSEA@mail.gmail.com>
 <CAOFE=kOy847c_eT2nBtT_4530ObGDkuCVmzJOUwze7n+cLnbsQ@mail.gmail.com>
 <fc20ac89-6201-04f6-a3db-7fb16f2f05f9@dewey.myzen.co.uk>
Message-ID: <CAOFE=kNNfc2vpAYwXEf1XNrD7eWr9_-y1nEmqYSK_eDqbEEjNw@mail.gmail.com>

Thanks a lot.

On Sun, Oct 7, 2018 at 6:16 PM Michael Dewey <lists at dewey.myzen.co.uk>
wrote:

> If you look at the documentation for plot() you will see a type
> parameter which can take a number of values including plot = "l" to get
> lines, and so on.
>
> On 07/10/2018 11:03, Subhamitra Patra wrote:
> > Thanks a lot, Sir. I'll check them out.
> >
> > But, I have 1 more query that in which package   "b" and "l" functions
> are
> > available?
> >
> > Can you please educate me about the usage of "b" and "I" in my code.
> >
> > For your reference,
> >
> > I am writing my code here again.
> >
> > N<-ncol(ts)
> >> r<-matrix(0, ncol = N, nrow = 1)
> >> for (i in 1:N){
> >         r[i]<-approx_entropy(ts[,i], edim = 2, r = 0.2*sd(ts[,i]), elag
> = 1)
> > }
> > plot (r)
> >
> > Here how to add "b" and "l" function?
> >
> > Please help me.
> >
> > Thanks in advance.
> >
> > On Sun, Oct 7, 2018 at 3:19 PM Jim Lemon <drjimlemon at gmail.com> wrote:
> >
> >> plot(r) will give you a set of points with the values of r on the y
> >> axis and 1:N on the x axis. If you want to add more series, look at
> >> "points" or "lines". Also look at the options "b" and "l" for plot if
> >> you want points and lines or just lines respectively.
> >>
> >> Jim
> >>
> >> On Sun, Oct 7, 2018 at 6:03 PM Subhamitra Patra
> >> <subhamitra.patra at gmail.com> wrote:
> >>>
> >>> Hello friends,
> >>>
> >>> Finally, I became able to compute APEn values for each series.
> >>>
> >>> Actually, there was a small mistake in the code for the arguments of
> row
> >> and columns. Now, after rectifying my mistakes as well as by taking the
> >> suggestions from Rui Barradas and Jim, It became possible. Therefore, I
> >> would like to say thanks to both of you.
> >>>
> >>> One small help (if possible) that I want to plot that particular APEn
> >> values for each series.
> >>> Only, I will write the code "plot (r)" or any other code is there?
> >>>
> >>> Please help.
> >>>
> >>> Thanks in advance.
> >>
> >
> >
>
> --
> Michael
> http://www.dewey.myzen.co.uk/home.html
>


-- 
*Best Regards,*
*Subhamitra Patra*
*Phd. Research Scholar*
*Department of Humanities and Social Sciences*
*Indian Institute of Technology, Kharagpur*
*INDIA*

	[[alternative HTML version deleted]]



From m||uj|@b @end|ng |rom gm@||@com  Sun Oct  7 19:58:31 2018
From: m||uj|@b @end|ng |rom gm@||@com (Miluji Sb)
Date: Sun, 7 Oct 2018 19:58:31 +0200
Subject: [R] Smoothing by group - Panel data - exponential/loess
Message-ID: <CAMLwc7M8ktB0ennwkaErfrfmkYpanxmy9TVD1WZ_hrg8+dAtBA@mail.gmail.com>

Dear all,

I have panel data for a series (g) for three time periods. The variable is
likely autocorrelated. I would like to generate a new variable using
exponential/loess smoothing by group (gid).

For time series, I could have done something like this;

smoothdf <- data.frame(
  x = 1:n,
  y = as.vector(smooth(dat$g)),
  method = "smooth()"
)

But confused about the panel data setting. Apologies if this a stat
question along with an R query. Any help will be greatly appreciated.

### data
structure(list(gid = c(1L, 1L, 1L, 2L, 2L, 2L, 3L, 3L, 3L, 4L,
4L, 4L, 5L, 5L, 5L, 6L, 6L, 6L, 7L, 7L, 7L, 8L, 8L, 8L, 9L, 9L,
9L), year = c(2030L, 2050L, 2100L, 2030L, 2050L, 2100L, 2030L,
2050L, 2100L, 2030L, 2050L, 2100L, 2030L, 2050L, 2100L, 2030L,
2050L, 2100L, 2030L, 2050L, 2100L, 2030L, 2050L, 2100L, 2030L,
2050L, 2100L), g = c(9.24e-05, 0.0001133, 6.3e-05, 7.72e-10,
1.41e-09, 4.68e-09, 0.0001736, 0.0002286, 0.0001541, 1.87e-15,
3.76e-15, 8.52e-15, 0.0001822, 0.0002391, 0.0001348, 3.69e-06,
8.11e-06, 8.63e-06, 3.41e-06, 7.32e-06, 7.18e-06, 8.47e-07, 1.83e-06,
1.84e-06, 1.13e-06, 2.37e-06, 2.15e-06)), class = "data.frame", row.names =
c(NA,
-27L))


Sincerely,

Milu

	[[alternative HTML version deleted]]



From bgunter@4567 @end|ng |rom gm@||@com  Sun Oct  7 22:42:56 2018
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 7 Oct 2018 13:42:56 -0700
Subject: [R] Smoothing by group - Panel data - exponential/loess
In-Reply-To: <CAMLwc7M8ktB0ennwkaErfrfmkYpanxmy9TVD1WZ_hrg8+dAtBA@mail.gmail.com>
References: <CAMLwc7M8ktB0ennwkaErfrfmkYpanxmy9TVD1WZ_hrg8+dAtBA@mail.gmail.com>
Message-ID: <CAGxFJbQXSP_WQ0z1+ooB_ZiVeMiz_rCTzWy6qC6=zPt-qxV94w@mail.gmail.com>

1. This doesn't make much sense:

smoothdf <- data.frame(
  x = 1:n,
  y = as.vector(smooth(dat$g)),
  method = "smooth()"
)

What do you think the "method" invocation does (data.frame has no "method"
argument)?

2. Show us what you have tried -- it depends on what graphics system you
use. In lattice and ggplot2, for example, it's pretty basic. In base
graphics, see ?scatter.smooth, for example -- it would have to be called
for each separate group, of course. See e.g. ?tapply and friends for
processig by separate groups. I'd also suggest that you spend time with a
basic R tutorial or two, where this sort of thing is usually covered.

3. Numerous packages also do this: searching on "plot smooth curves by
groups" on rseek.org brought up lots of stuff.

Cheers,
Bert





Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sun, Oct 7, 2018 at 10:59 AM Miluji Sb <milujisb at gmail.com> wrote:

> Dear all,
>
> I have panel data for a series (g) for three time periods. The variable is
> likely autocorrelated. I would like to generate a new variable using
> exponential/loess smoothing by group (gid).
>
> For time series, I could have done something like this;
>
> smoothdf <- data.frame(
>   x = 1:n,
>   y = as.vector(smooth(dat$g)),
>   method = "smooth()"
> )
>
> But confused about the panel data setting. Apologies if this a stat
> question along with an R query. Any help will be greatly appreciated.
>
> ### data
> structure(list(gid = c(1L, 1L, 1L, 2L, 2L, 2L, 3L, 3L, 3L, 4L,
> 4L, 4L, 5L, 5L, 5L, 6L, 6L, 6L, 7L, 7L, 7L, 8L, 8L, 8L, 9L, 9L,
> 9L), year = c(2030L, 2050L, 2100L, 2030L, 2050L, 2100L, 2030L,
> 2050L, 2100L, 2030L, 2050L, 2100L, 2030L, 2050L, 2100L, 2030L,
> 2050L, 2100L, 2030L, 2050L, 2100L, 2030L, 2050L, 2100L, 2030L,
> 2050L, 2100L), g = c(9.24e-05, 0.0001133, 6.3e-05, 7.72e-10,
> 1.41e-09, 4.68e-09, 0.0001736, 0.0002286, 0.0001541, 1.87e-15,
> 3.76e-15, 8.52e-15, 0.0001822, 0.0002391, 0.0001348, 3.69e-06,
> 8.11e-06, 8.63e-06, 3.41e-06, 7.32e-06, 7.18e-06, 8.47e-07, 1.83e-06,
> 1.84e-06, 1.13e-06, 2.37e-06, 2.15e-06)), class = "data.frame", row.names =
> c(NA,
> -27L))
>
>
> Sincerely,
>
> Milu
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Oct  7 22:48:06 2018
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 7 Oct 2018 13:48:06 -0700 (PDT)
Subject: [R] Genuine relative paths with R
In-Reply-To: <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <EF096B6D-D167-402E-A1BB-9310D60E6F64@dcn.davis.ca.us>
 <VI1PR0202MB33571A964A191D165B3BF422F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <292ca297-27e3-162b-e525-fabc4bb4554c@kogentum.hu>
 <VI1PR0202MB3357E9066FF1527BAC014784F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <dbde4f15-caa6-dc62-3a10-e804cc81671a@kogentum.hu>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
Message-ID: <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>

On Sun, 7 Oct 2018, Olivier GIVAUDAN wrote:

> Hello Denes,
> 
> > Yes, the path to the "root" folder of your project. You seem to have a?
> really esoteric context if you want to run an R script without knowing?
> its path in the file system.
> 
> I don't have any esoteric context: I'm just looking for the most generic, automatic and reproducible solution.
> Of course you always know where an R script is located, nevertheless it doesn't imply you want to manually write its path in this
> R script. The issue is to have to hardcode an absolute path: I don't want that.
> 
> >?Because it is extremely rare that someone - who uses R for what it is?
> worth and in a manner how R is supposed to be used - actually needs such?
> a function.
>

> First, the fact that it is rare doesn't mean this need is not legitimate 
> and relevant: it is needed to make R projects fully movable (i.e. 
> wherever you want). Second why a vast majority of languages does have 
> this feature and not R? Why is it useful in these languages and not in 
> R?

The R interpreter does not make assumptions about where the code it is 
running came from. You might be running it by using the source() function, 
or by using the Rscript program, or by R CMD BATCH, or using eval() on 
code you pasted together in an R function, or as byte-compiled code loaded 
from an RData file. That is, there is not always a file in a particular 
directory even involved in the executing code.

You also keep referring to "this feature" being in many languages, though 
you seem to be mistaken about most of them... in fact, they, too, know NOT 
where the script is but where the current directory is ($PWD is the same 
as getwd()) or where the compilation occurred (__FILE__ in C relates to 
the source code directory that is usually not where the executable is 
located and may not even exist on the computer it is running on).

I have already pointed out that the solution is to let the OS set the 
current directory. If you want the user to have access to R independent of 
your code, the easiest way to leave them in Rgui after your code is done 
is to use save.image() to create a "myApp.RData" file which can be 
double-clicked [1]. The double-clicking action by default (as defined by 
the installation of R) causes the operating system to set the current 
directory to the one containing the file you double-clicked on and then 
executes the Rgui program.

If you don't want the user to interact with your session, you can use the 
Rscript executable (also mentioned briefly at the bottom of [1]). In both 
cases, the user has (unknowingly) set the current directory before running 
your code, and there is no need to encode where the script is or was 
inside the script.

You can also create a windows shortcut to invoke Rscript yourself by 
bootstrapping the RData file and invoking the 
R.utils::createWindowsShortcut() [2] function.

However, by far the best approach is to teach your users to fish... if you 
give them an RStudio project directory they can double-click on the .Rproj 
file to set the current directory and enter the world of R.

[1] https://www.r-bloggers.com/look-ma-no-typing-autorunning-code-on-r-startup/
[2] https://cran.r-project.org/web/packages/R.utils/R.utils.pdf

End comment.

> Best regards,
> 
> Olivier
> 
> _________________________________________________________________________________________________________________________________
> De : D?nes T?th <toth.denes at kogentum.hu>
> Envoy? : samedi 6 octobre 2018 23:36
> ? : Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
> Objet : Re: [R] Genuine relative paths with R ?
> Hi Olivier,
> 
> 
> On 10/07/2018 01:13 AM, Olivier GIVAUDAN wrote:
> > Hi Denes,
> >
> > Thank you for the possibility you shared: unfortunately it still uses
> > one hardcoded absolute path which I want to avoid.
> 
> Yes, the path to the "root" folder of your project. You seem to have a
> really esoteric context if you want to run an R script without knowing
> its path in the file system.
> 
> >
> > I just think that the solutions suggested are too complicated for my
> > simple need.
> >
> > The root cause being that R doesn't seem to have the Windows batch
> > equivalent of cd, or bash equivalent of $PWD, or PHP equivalent of __DIR__.
> > Hence the workarounds we are discussing.
> >
> > And finally we go back to my initial question: if such a function
> > doesn't exist in R, what are the reasons?
> 
> Because it is extremely rare that someone - who uses R for what it is
> worth and in a manner how R is supposed to be used - actually needs such
> a function.
> 
> Best,
> Denes
> 
> 
> 
> >
> > Best regards,
> >
> > Olivier
> > ------------------------------------------------------------------------
> > *De :* D?nes T?th <toth.denes at kogentum.hu>
> > *Envoy? :* samedi 6 octobre 2018 23:05
> > *?:* Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
> > *Objet :* Re: [R] Genuine relative paths with R
> > Hi Olivier,
> >
> > I really think that Ista and Jeff gave you plenty of useful options how
> > you can avoid using absolute paths.
> >
> > One more possibility: you can use `source()` with the chdir = TRUE
> > argument (see ?source). If you have a master script which sources other
> > files which are located in a fixed hierarchy relative to the location of
> > the master script, the only time when you have to use an absolute path
> > is when you source your master script, e.g.:
> > source("/my/path/to/master.R", chdir = TRUE)
> >
> > Inside the master script, you can then source the other scripts by
> > relative paths, define your 'data' folders relative to the master script
> > and let the other scripts use those data paths, etc.
> >
> > Best,
> > Denes
> >
> >
> > On 10/06/2018 11:36 PM, Olivier GIVAUDAN wrote:
> >> Hi Jeff,
> >>
> >> Thanks for sharing your workaround.
> >>
> >> I guess my last answer to Ista answers your question as well.
> >>
> >> To me this function (an equivalent of 'cd', say) should be platform-independent.
> >>
> >> Best regards,
> >>
> >> Olivier
> >>
> >> ________________________________
> >> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> >> Envoy??? : samedi 6 octobre 2018 19:31
> >> ??? : r-help at r-project.org; Olivier GIVAUDAN; r-help at r-project.org
> >> Objet : Re: [R] Genuine relative paths with R
> >>
> >> I stopped using hardcoded absolute paths inside R scripts years ago, and I suspect that is fairly common practice. That is, I
> almost never enter a path starting with "/" or "c:/" in an R script.
> >>
> >> The key concession you have to make is to start your R session in your working directory using OS-specific mechanisms, and
> then reference your code and data relative to that directory. RStudio project files offer one mechanism for doing this; using CD
> from? the OS command line is another, and using the file-browser
> > double-click mechanism on .RData files is another (though I prefer to
> > avoid that these days due to potential global environment contamination).
> >>
> >> Perhaps you can be more specific about what facilities you are expecting to find. You should also mention what OS you
> typically use and how you normally start R.
> >>
> >> On October 6, 2018 4:48:44 AM PDT, Olivier GIVAUDAN <olivier_givaudan at hotmail.com> wrote:
> >>> Dear R users,
> >>>
> >>> I would like to work with genuine relative paths in R for obvious
> >>> reasons: if I move all my scripts related to some project as a whole to
> >>> another location of my computer or someone else's computer, if want my
> >>> scripts to continue to run seamlessly.
> >>>
> >>> What I mean by "genuine" is that it should not be necessary to hardcode
> >>> one single absolute path (making the code obviously not "portable" - to
> >>> another place - anymore).
> >>>
> >>> For the time being, I found the following related posts, unfortunately
> >>> never conclusive or even somewhat off-topic:
> >>> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
> >>> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
> >>> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
> >>>
> >>> So I found 2 workarounds, more or less satisfactory:
> >>>
> >>>
> >>> 1.? Either create a variable "ScriptPath" in the first lines of each of
> >>> my R scripts and run a batch (or shell, etc.) to replace every single
> >>> occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R
> >>> script]" in all the R scripts located in the folder (and possibly
> >>> subfolders) of the batch file.
> >>> 2.? Or create an R project file with RStudio and use the package "here"
> >>> to get the absolute path of the R project file and put all the R
> >>> scripts related to this project in the R project directory, as often
> >>> recommended.
> >>>
> >>> But I am really wondering why R doesn't have (please tell me if I'm
> >>> wrong) this basic feature as many other languages have it (batch,
> >>> shell, C, LaTeX, SAS with macro-variables, etc.)?
> >>> Do you know whether the language will have this kind of function in a
> >>> near future? What are the obstacles / what is the reasoning for not
> >>> having it already?
> >>>
> >>> Do you know other workarounds?
> >>>
> >>> Best regards,
> >>>
> >>> Olivier
> >>>
> >>>??????? [[alternative HTML version deleted]]
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide
> >>> http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >>
> >> --
> >> Sent from my phone. Please excuse my brevity.
> >>
> >>??????? [[alternative HTML version deleted]]
> >>
> >>
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >>
> 
>

---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                       Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
---------------------------------------------------------------------------

From j|up@dh @end|ng |rom gm@||@com  Mon Oct  8 08:48:34 2018
From: j|up@dh @end|ng |rom gm@||@com (Jiblal Upadhya)
Date: Mon, 8 Oct 2018 01:48:34 -0500
Subject: [R] Help to find ksl data set
In-Reply-To: <502A4C72-9E0C-49A2-9D6D-739A70053B45@comcast.net>
References: <CAO-R1n7H_g9L9u+h2_4Xobn+3Kbi56+ax9r4jpC0PObww5ejOw@mail.gmail.com>
 <502A4C72-9E0C-49A2-9D6D-739A70053B45@comcast.net>
Message-ID: <CAO-R1n6Xy8CRjS4FxFBbAj-aeg5LZVkth7m_AsBxMqM45LUEFA@mail.gmail.com>

Thanks, I'll check it out.

On Thu, Oct 4, 2018 at 1:48 AM David Winsemius <dwinsemius at comcast.net>
wrote:

>
> > On Oct 3, 2018, at 10:18 PM, Jiblal Upadhya <jlupadh at gmail.com> wrote:
> >
> > Hi,
> >
> > I  need help in finding the ksl data set mention in the deal package in
> the
> > paper attached. I searched in the UCI Machine learning repository, but
> > couldn?t find.
>
> The paper makes me think it is in the archived package (last updated in
> 2013)
>
> https://cran.r-project.org/src/contrib/Archive/deal/deal_1.2-37.tar.gz
>
>
> > Please help,
> >
> > Thanks,
> > Jiblal
> > <deal.pdf>______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> David Winsemius
> Alameda, CA, USA
>
> 'Any technology distinguishable from magic is insufficiently advanced.'
>  -Gehm's Corollary to Clarke's Third Law
>
>
>
>
>
>

	[[alternative HTML version deleted]]



From Anne@Ch@tton @end|ng |rom hcuge@ch  Mon Oct  8 09:19:34 2018
From: Anne@Ch@tton @end|ng |rom hcuge@ch (CHATTON Anne)
Date: Mon, 8 Oct 2018 07:19:34 +0000
Subject: [R] Strange paradox
Message-ID: <4302226810d84d2f874d762443eb7d11@wexchprod08.huge.ad.hcuge.ch>

Dear all,
Thank you for your remarks.
The data under analysis were multiply-imputed using Mice.
To compare the nested models, I used the following R codes by van Buuren:
pool.compare (Model2, Model1, method = c("wald"), data = NULL)
As far as I know the Wald statistic tests the null hypothesis that the extra parameters are all zero. But I might be wrong...

-----Message d'origine-----
De?: CHATTON Anne 
Envoy??: vendredi, 5 octobre 2018 10:46
??: 'r-help at r-project.org' <r-help at r-project.org>
Objet?: Strange paradox

Hello,

I am currently analysed two nested models using the same sample. Both the simpler model (Model 1 ~ x1 + x2) and the more complex model (Model 2 ~ x1 + x2 + x3 + x4) yield the same adjusted R-square. Yet the p-value associated with the deviance statistic is highly significant (p=0.0047), suggesting that the confounders (x3 and x4) account for the prediction of the dependent variable.

Does anyone have an explanation of this strange paradox?

Thank you for any suggestion.

Anne



From br@n@chr| @end|ng |rom gm@||@com  Mon Oct  8 09:22:30 2018
From: br@n@chr| @end|ng |rom gm@||@com (Christian =?ISO-8859-1?Q?Brandst=E4tter?=)
Date: Mon, 08 Oct 2018 09:22:30 +0200
Subject: [R] Plot in real unit (1:1)
In-Reply-To: <CA+8X3fUGK9FiKdGVudST=Ly-hLiudVWg1MYO_tRjewBLAA6JzA@mail.gmail.com>
References: <145846eef400f1de031e4c020702276d253bf22b.camel@gmail.com>
 <CA+8X3fXfxy6OrQawPBkJNZfjsHZ2+7w3JnAS9-7ocNsRGbH1qA@mail.gmail.com>
 <CA+8X3fUGK9FiKdGVudST=Ly-hLiudVWg1MYO_tRjewBLAA6JzA@mail.gmail.com>
Message-ID: <a0319513f459fae8ffdadb47352d1cbabc91b04a.camel@gmail.com>

Dar Jim, 
late, but it works now perfectly. I made a little function for
autoscaling elevation data. 
https://stackoverflow.com/questions/50606797/plot-in-real-units-mm/52696705#52696705The
 (paper-)printer typically also autoscales, which needs to be
deactivated.  
Example for a plot with scale  in y and x direction: 
in2mm<-25.4

mx = 1000 # Scale X # input unit m
my = 2000 # Scale Y # input unit m

pdf("test_size.pdf",width=210/in2mm,height=297/in2mm,paper="special")
par(mar= c(5.1,4.1,4.1,1.1))
pin <- par("pin") # returns plotheight and -width

yvalue <- sort(sample(1:1000,200))
xvalue <- sort(sample(1:500,200))

xplus <- diff(range(c(0,pin[1]*in2mm)))*(mx/1000)/2
yplus <- diff(range(c(0,pin[2]*in2mm)))*(my/1000)/2

plot(xvalue,yvalue,#asp=mx/my,
     type="n", xaxs="i", yaxs="i",
     xlim=c(mean(xvalue)-xplus,mean(xvalue)+xplus),
     ylim=c(mean(yvalue)-yplus,mean(yvalue)+yplus),
     ylab="vertical [m]",xlab="horizontal [m]")

lines(xvalue,yvalue,type="l",col="black")

legend(x="topleft",horiz=TRUE,
       legend=c(paste0("Mx: 1:",mx),paste0("My: 1:",my),
                paste0("Vertical Exaggeration:
1:",mx/my)),x.intersp=0,bty="n")

dev.off()
On Thu, 2018-06-07 at 14:13 +1000, Jim Lemon wrote:
> Hi Christian,Well, it almost worked. I suspect that the postscript
> device adds somepadding to account for the printable area, so with a
> bit ofexperimentation, The following example seems to do what you
> want. WhenI printed the resulting file from the GIMP, the box and
> diamond werethe correct dimensions.
> postscript("test.ps",paper="a4",horizontal=FALSE)par(mai=c(1.713,0,1.
> 713,0),xaxs="i",yaxs="i")plot(0,type="n",xlim=c(0,190),ylim=c(0,190),
> xlab="",axes=FALSE)segments(c(0,95),c(95,0),c(190,95),c(95,190))segme
> nts(c(45,95,145,95),c(95,145,95,45),
> c(95,145,95,45),c(145,95,45,95))box()dev.off()
> Jim
> On Thu, Jun 7, 2018 at 8:16 AM, Jim Lemon <drjimlemon at gmail.com>
> wrote:Hi Christian,When I have to do something like this, I usually
> write it inPostscript using this:
> /def mm 2.8346 mul
> that converts a dimension in mm to points (1/72 inch). However,
> thiswon't work in R. It may be possible to set up the device like
> this:
> postscript("myfile.ps",paper="a4")par(mar=c(0,0,0,0))# generate a
> blank plotplot(0,type="n",xlim=c(0,210),ylim=c(0,297),axes=FALSE)#
> display lines, etc. in mm with 0,0 at the bottom leftdev.off()
> The resulting file should be printable. Warning, I don't have time
> totest this right now.
> Jim
> 
> 
> On Thu, Jun 7, 2018 at 12:00 AM, Christian Brandst?tter<
> bran.chri at gmail.com> wrote:Dear List,
> Is it possible to plot in R in "real" units? I would like to draw
> aplot on A4 paper, where 1 plot unit would be a mm in reality.
> Issomething like that possible? I would also like to be able to scale
> theplot in x and y direction.Background: For a project I would have
> to draw around 65 fast sketchesof elevation courves.
> Copied from here, due to no answer: 
> https://stackoverflow.com/questions/50606797/plot-in-real-units-mm
> Thank you!
> ______________________________________________R-help at r-project.org
> mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-helpPLEASE do read the
> posting guide http://www.R-project.org/posting-guide.htmland provide
> commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]



From E@Vettor@zz| @end|ng |rom uke@de  Mon Oct  8 13:30:43 2018
From: E@Vettor@zz| @end|ng |rom uke@de (Eik Vettorazzi)
Date: Mon, 8 Oct 2018 13:30:43 +0200
Subject: [R] Genuine relative paths with R
In-Reply-To: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
Message-ID: <60714a3e-2ef5-5563-7dcc-eb4965f966d4@uke.de>

Dear Olivier,
you may find the rprojroot package useful, see
https://github.com/r-lib/rprojroot

and a discussion

https://gist.github.com/jennybc/362f52446fe1ebc4c49f#file-2014-10-12_stop-working-directory-insanity-md

Cheers

Am 06.10.2018 um 13:48 schrieb Olivier GIVAUDAN:
> Dear R users,
> 
> I would like to work with genuine relative paths in R for obvious reasons: if I move all my scripts related to some project as a whole to another location of my computer or someone else's computer, if want my scripts to continue to run seamlessly.
> 
> What I mean by "genuine" is that it should not be necessary to hardcode one single absolute path (making the code obviously not "portable" - to another place - anymore).
> 
> For the time being, I found the following related posts, unfortunately never conclusive or even somewhat off-topic:
> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
> 
> So I found 2 workarounds, more or less satisfactory:
> 
> 
>    1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.
>    2.  Or create an R project file with RStudio and use the package "here" to get the absolute path of the R project file and put all the R scripts related to this project in the R project directory, as often recommended.
> 
> But I am really wondering why R doesn't have (please tell me if I'm wrong) this basic feature as many other languages have it (batch, shell, C, LaTeX, SAS with macro-variables, etc.)?
> Do you know whether the language will have this kind of function in a near future? What are the obstacles / what is the reasoning for not having it already?
> 
> Do you know other workarounds?
> 
> Best regards,
> 
> Olivier
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

-- 
Eik Vettorazzi

Department of Medical Biometry and Epidemiology
University Medical Center Hamburg-Eppendorf

Martinistrasse 52
building W 34
20246 Hamburg

Phone: +49 (0) 40 7410 - 58243
Fax:   +49 (0) 40 7410 - 57790
Web: www.uke.de/imbe
--

_____________________________________________________________________

Universit?tsklinikum Hamburg-Eppendorf; K?rperschaft des ?ffentlichen Rechts; Gerichtsstand: Hamburg | www.uke.de
Vorstandsmitglieder: Prof. Dr. Burkhard G?ke (Vorsitzender), Prof. Dr. Dr. Uwe Koch-Gromus, Joachim Pr?l?, Martina Saurin (komm.)
_____________________________________________________________________

SAVE PAPER - THINK BEFORE PRINTING

From be||nd@hb| @end|ng |rom gm@||@com  Mon Oct  8 11:14:41 2018
From: be||nd@hb| @end|ng |rom gm@||@com (Belinda Hum Bei Lin)
Date: Mon, 8 Oct 2018 11:14:41 +0200
Subject: [R] Error in nlsModel
Message-ID: <CAGf4fj0GwzivGHz_Q=BpjPY5J2p7NqBPFiSBeA1q0tEUPPq0Ng@mail.gmail.com>

Hello,

It is my first time using R studio and I am facing the error of
"Error in nlsModel(formula, mf, start, wts) :
  singular gradient matrix at initial parameter estimates"
when I try to run my script. From what I read online, I understand that the
error might be due to the parameters. However, I do not know how to choose
the right set of parameters. Is there anyone who could advice me on how to
do this?

Below are my script details:
rm(list=ls()) #remove ALL objects
cat("\014") # clear console window prior to new run
Sys.setenv(LANG = "en") #Let's keep stuff in English
Sys.setlocale("LC_ALL","English")

##########
#import necessary packages
#########

##To install the packages use the function install.packages. Installing is
done once.
#install.packages("ggplot2")
#install.packages("minpack.lm")
#install.packages("nlstools")

##Activate the packages. This needs to be done everytime before running the
script.
require(ggplot2)
require(minpack.lm)
require(nlstools)



#########
#define the Weibull function
#########
Weibull<-function(tet1, tet2,x){
  1-exp(-exp(tet1+tet2*log10(x)))
}

#########
##define the inverse of the Weibull function. put in effect and get
concentration as output
#########
iWeibull<-function(tet1,tet2,x){
  10^((log(-log(1-x))-tet1)/tet2)
}


#########
#define the Logit function
#########
Logit<-function(tet1, tet2,x){
  1/(1+exp(-tet1-tet2*log10(x)))
}

#########
##define the inverse of the Logit function
#########
iLogit<-function(tet1,tet2,x){
  10^(-(log(1/x-1)+tet1)/tet2)
}

#########
#define the Probit function
#########
Probit<-function(tet1, tet2, x){
  pnorm(tet1+tet2*(log10(x)))
}

#########
##define the inverse of the Probit function
#########
iProbit<-function(tet1,tet2,x){
  10^((qnorm(x)-tet1)/tet2)
}

#########
# Establish data to fit
# data given here are the data for Diuron from the example datasets
#
# Of course one could also import an external datafile via e.g.
# read.table, read.csv functions

### example to choose a file for import with the read.csv function, where
"," is seperating the columns,
# header=TURE tells R that the first row contains the titles of the
columns, and
# stringsAsFactors = FALSE specify that the characters should not be
converted to factors. For more info run ?read.csv
effectdata<-read.csv(file.choose(),sep=",",stringsAsFactors = FALSE,header
= TRUE)
?read.csv
###

#########
conc<-c(0,
        0,
        0,
        0,
        0,
        0,
        0.000135696,
        0.000135696,
        0.000135696,
        0.000152971,
        0.000152971,
        0.000152971,
        0.000172445,
        0.000172445,
        0.000172445,
        0.000194398,
        0.000194398,
        0.000194398,
        0.000219146,
        0.000219146,
        0.000219146,
        0.000247044,
        0.000247044,
        0.000247044
)

effect<-c(5.342014355,
          13.46249176,
          -9.249022885,
          -6.666486351,
          1.00292152,
          -3.891918402,
          12.63136345,
          -2.372582186,
          8.601073479,
          1.309926638,
          0.772728968,
          -7.01067202,
          30.65306236,
          28.10819667,
          17.94875421,
          73.00440617,
          71.33593917,
          62.23994217,
          99.18897648,
          99.05982514,
          99.2325145,
          100.2402872,
          100.1276669,
          100.1501468
)

#build input dataframe
effectdata<-data.frame(conc,effect)

#plot the data just to get a first glance of the data
ggplot()+
  geom_point(data=effectdata,aes(x=conc,y=effect), size = 5)+
  scale_x_log10("conc")


#delete controls
effectdata_without_controls<-subset(effectdata,effectdata$conc>0)


#save controls in a seperate dataframe called effectdata_control, which
will be added to the ggplot in the end.
#since you can't have 0 on a logscale we will give the controls a very very
low concentration 0.00001 (not 100% correct, but will not be seen in the
final plot)
effectdata_controls<-subset(effectdata,effectdata$conc==0)
effectdata_controls$conc<-effectdata_controls$conc+0.0001



########
#fit data (without controls) using ordinary least squares
#ordinary least squares is a method for estimating unknown parameters in
statistics. The aim of the method is to minimize
#the difference between the observed responses and the responses predicted
by the approximation of the data.
#nlsLM is from the minpack.lm package
#nls=non-linear lest squares
########
nlsLM_result_Weibull<-nlsLM(effect~Weibull(tet1,tet2,conc),
data=effectdata_without_controls, start=list(tet1=1,tet2=1))
nlsLM_result_Logit<-nlsLM(effect~Logit(tet1,tet2,conc),
data=effectdata_without_controls, start=list(tet1=1,tet2=1))
nlsLM_result_Probit<-nlsLM(effect~Probit(tet1,tet2,conc),
data=effectdata_without_controls, start=list(tet1=1,tet2=1))

Thanks a bunch!

Best Regards,
Belinda
Belinda *Hum* Bei Lin (Ms)
National University of Singapore
(e): belindahbl at gmail.com
(c): +6581136079
<+65%208113%206079>

	[[alternative HTML version deleted]]



From petr@p|k@| @end|ng |rom prechez@@cz  Mon Oct  8 16:26:48 2018
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Mon, 8 Oct 2018 14:26:48 +0000
Subject: [R] 
 Problems to obtain standardized betas in multiply-imputed data
In-Reply-To: <8a90fb4b3e05452da62e81e3424bc3a0@wexchprod08.huge.ad.hcuge.ch>
References: <1b906c9b735b4d428ae528ef6609f74e@wexchprod08.huge.ad.hcuge.ch>
 <976b75bcc4d34a839b60b7a588d01542@SRVEXCHCM1301.precheza.cz>
 <8a90fb4b3e05452da62e81e3424bc3a0@wexchprod08.huge.ad.hcuge.ch>
Message-ID: <4fadca9b8eeb4572adf2ca7a7044f957@SRVEXCHCM1301.precheza.cz>

Hi

as I wrote I am not an expert in multiple imputation and others are probably more capable to give you an answer so please keep your emails coppied to the list.

The error message is straightforward and clear - object has to be of class lm

My wild guess is that you must not use the whole object "imp" but only the imputed data.frame. It is probably time for you to read documentation to mice package. It seems to me, that you can get data frame from mice object by function

?complete

and use that filled data frame for your lm model and lm.beta. But I may be completely wrong, I do not have any experience with mice.

Cheers
Petr

> -----Original Message-----
> From: CHATTON Anne <Anne.Chatton at hcuge.ch>
> Sent: Monday, October 8, 2018 12:52 PM
> To: PIKAL Petr <petr.pikal at precheza.cz>
> Subject: RE: Problems to obtain standardized betas in multiply-imputed data
>
> Hi Petr,
> I apologize for the late reply and thank you very much for your judicious
> remarks.
> As you appropriately say, I also suspect that 'FitImp' is not an lm object. But the
> question of how to obtain these standardized values in the context of multiple
> imputations still remains.
> As requested, I am sending you herewith the output of the 'str' functions:
>
> imp = mice(Data, method = "norm.predict", m=5, seed=100, print=FALSE)
> FitImp <- with(imp,lm(y ~ x1 + x2 + x3))
> sdBeta <- lm.beta(FitImp)
> Error in lm.beta(FitImp) : object has to be of class lm
>
> > str(Data)
> 'data.frame':   996 obs. of  4 variables:
>  $ x3: num  18 18 18 18 18 19 19 19 19 20 ...
>  $ x2: num  12 27 20 55 31 24 43 31 25 43 ...
>  $ x1: num  NA NA NA NA NA NA NA NA NA NA ...
>  $ y : num  NA NA NA NA NA NA NA NA NA NA ...
>  - attr(*, "variable.labels")= Named chr
>   ..- attr(*, "names")= chr
>  - attr(*, "codepage")= int 65001
>
> > str(imp)
> List of 21
>  $ data           :'data.frame':        996 obs. of  4 variables:
>   ..$ x3: num [1:996] 18 18 18 18 18 19 19 19 19 20 ...
>   ..$ x2: num [1:996] 12 27 20 55 31 24 43 31 25 43 ...
>   ..$ x1: num [1:996] NA NA NA NA NA NA NA NA NA NA ...
>   ..$ y : num [1:996] NA NA NA NA NA NA NA NA NA NA ...
>   ..- attr(*, "variable.labels")= Named chr(0)
>   .. ..- attr(*, "names")= chr(0)
>   ..- attr(*, "codepage")= int 65001
>  $ imp            :List of 4
>   ..$ x3:'data.frame':  2 obs. of  5 variables:
>   .. ..$ 1: num [1:2] 26.6 33.9
>   .. ..$ 2: num [1:2] 26.6 33.9
>   .. ..$ 3: num [1:2] 26.6 33.9
>   .. ..$ 4: num [1:2] 26.6 33.9
>   .. ..$ 5: num [1:2] 26.6 33.9
>   ..$ x2:'data.frame':  2 obs. of  5 variables:
>   .. ..$ 1: num [1:2] 34.2 33.1
>   .. ..$ 2: num [1:2] 34.4 32.6
>   .. ..$ 3: num [1:2] 34 32.9
>   .. ..$ 4: num [1:2] 34.1 33.2
>   .. ..$ 5: num [1:2] 34.5 34.3
>   ..$ x1:'data.frame':  245 obs. of  5 variables:
>   .. ..$ 1: num [1:245] 6.39 12.97 9.9 25.32 14.5 ...
>   .. ..$ 2: num [1:245] 6.07 12.81 9.79 25.51 14.7 ...
>   .. ..$ 3: num [1:245] 6.39 12.79 9.54 25.41 14.63 ...
>   .. ..$ 4: num [1:245] 5.95 12.82 9.85 25.78 14.69 ...
>   .. ..$ 5: num [1:245] 5.83 13.01 9.76 25.49 14.7 ...
>   ..$ y :'data.frame':  244 obs. of  5 variables:
>   .. ..$ 1: num [1:244] 56.2 71.6 64.4 100.6 75.6 ...
>   .. ..$ 2: num [1:244] 55.9 71.5 64.3 100.8 75.8 ...
>   .. ..$ 3: num [1:244] 56.2 71.5 64.1 100.7 75.7 ...
>   .. ..$ 4: num [1:244] 55.8 71.5 64.4 101 75.7 ...
>   .. ..$ 5: num [1:244] 55.7 71.7 64.3 100.7 75.8 ...
>  $ m              : num 5
>  $ where          : logi [1:996, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
>   ..- attr(*, "dimnames")=List of 2
>   .. ..$ : chr [1:996] "1" "2" "3" "4" ...
>   .. ..$ : chr [1:4] "x3" "x2" "x1" "y"
>  $ blocks         :List of 4
>   ..$ x3: chr "x3"
>   ..$ x2: chr "x2"
>   ..$ x1: chr "x1"
>   ..$ y : chr "y"
>   ..- attr(*, "calltype")= Named chr [1:4] "type" "type" "type" "type"
>   .. ..- attr(*, "names")= chr [1:4] "x3" "x2" "x1" "y"
>  $ call           : language mice(data = Data, m = 5, method = "norm.predict",
> printFlag = FALSE, seed = 100)
>  $ nmis           : Named int [1:4] 2 2 245 244
>   ..- attr(*, "names")= chr [1:4] "x3" "x2" "x1" "y"
>  $ method         : Named chr [1:4] "norm.predict" "norm.predict"
> "norm.predict" "norm.predict"
>   ..- attr(*, "names")= chr [1:4] "x3" "x2" "x1" "y"
>  $ predictorMatrix: num [1:4, 1:4] 0 1 1 1 1 0 1 1 1 1 ...
>   ..- attr(*, "dimnames")=List of 2
>   .. ..$ : chr [1:4] "x3" "x2" "x1" "y"
>   .. ..$ : chr [1:4] "x3" "x2" "x1" "y"
>  $ visitSequence  : chr [1:4] "x3" "x2" "x1" "y"
>  $ formulas       :List of 4
>   ..$ x3:Class 'formula'  language x3 ~ 0 + x2 + x1 + y
>   .. .. ..- attr(*, ".Environment")=<environment: 0x000000000f0139c8>
>   ..$ x2:Class 'formula'  language x2 ~ 0 + x3 + x1 + y
>   .. .. ..- attr(*, ".Environment")=<environment: 0x000000000f0139c8>
>   ..$ x1:Class 'formula'  language x1 ~ 0 + x3 + x2 + y
>   .. .. ..- attr(*, ".Environment")=<environment: 0x000000000f0139c8>
>   ..$ y :Class 'formula'  language y ~ 0 + x3 + x2 + x1
>   .. .. ..- attr(*, ".Environment")=<environment: 0x000000000f0139c8>
>  $ post           : Named chr [1:4] "" "" "" ""
>   ..- attr(*, "names")= chr [1:4] "x3" "x2" "x1" "y"
>  $ blots          :List of 4
>   ..$ x3: list()
>   ..$ x2: list()
>   ..$ x1: list()
>   ..$ y : list()
>  $ seed           : num 100
>  $ iteration      : num 5
>  $ lastSeedValue  : int [1:626] 403 593 2082529872 -1076659723 770353271 -
> 83917670 1999705384 1490542154 -151817264 1924404941 ...
>  $ chainMean      : num [1:4, 1:5, 1:5] 31 32.6 15.2 73.1 30.4 ...
>   ..- attr(*, "dimnames")=List of 3
>   .. ..$ : chr [1:4] "x3" "x2" "x1" "y"
>   .. ..$ : chr [1:5] "1" "2" "3" "4" ...
>   .. ..$ : chr [1:5] "Chain 1" "Chain 2" "Chain 3" "Chain 4" ...
>  $ chainVar       : num [1:4, 1:5, 1:5] 19.621 0.105 80.049 116.363 20.278 ...
>   ..- attr(*, "dimnames")=List of 3
>   .. ..$ : chr [1:4] "x3" "x2" "x1" "y"
>   .. ..$ : chr [1:5] "1" "2" "3" "4" ...
>   .. ..$ : chr [1:5] "Chain 1" "Chain 2" "Chain 3" "Chain 4" ...
>  $ loggedEvents   : NULL
>  $ version        :Classes 'package_version', 'numeric_version'  hidden list of 1
>   ..$ : int [1:3] 3 3 0
>  $ date           : Date[1:1], format: "2018-10-08"
>  - attr(*, "class")= chr "mids"
>
> > str(FitImp)
> List of 4
>  $ call    : language with.mids(data = imp, expr = lm(y ~ x1 + x2 + x3))
>  $ call1   : language mice(data = Data, m = 5, method = "norm.predict",
> printFlag = FALSE, seed = 100)
>  $ nmis    : Named int [1:4] 2 2 245 244
>   ..- attr(*, "names")= chr [1:4] "x3" "x2" "x1" "y"
>  $ analyses:List of 5
>   ..$ :List of 12
>   .. ..$ coefficients : Named num [1:4] 44.917 0.957 0.611 -0.121
>   .. .. ..- attr(*, "names")= chr [1:4] "(Intercept)" "x1" "x2" "x3"
>   .. ..$ residuals    : Named num [1:996] 4.14e-12 -7.53e-13 -7.10e-14 2.89e-14
> 1.33e-14 ...
>   .. .. ..- attr(*, "names")= chr [1:996] "1" "2" "3" "4" ...
>   .. ..$ effects      : Named num [1:996] -2.34e+03 4.44e+02 1.94e+02 -4.41e+01
> -1.07e-13 ...
>   .. .. ..- attr(*, "names")= chr [1:996] "(Intercept)" "x1" "x2" "x3" ...
>   .. ..$ rank         : int 4
>   .. ..$ fitted.values: Named num [1:996] 56.2 71.6 64.4 100.6 75.6 ...
>   .. .. ..- attr(*, "names")= chr [1:996] "1" "2" "3" "4" ...
>   .. ..$ assign       : int [1:4] 0 1 2 3
>   .. ..$ qr           :List of 5
>   .. .. ..$ qr   : num [1:996, 1:4] -31.5595 0.0317 0.0317 0.0317 0.0317 ...
>   .. .. .. ..- attr(*, "dimnames")=List of 2
>   .. .. .. .. ..$ : chr [1:996] "1" "2" "3" "4" ...
>   .. .. .. .. ..$ : chr [1:4] "(Intercept)" "x1" "x2" "x3"
>   .. .. .. ..- attr(*, "assign")= int [1:4] 0 1 2 3
>   .. .. ..$ qraux: num [1:4] 1.03 1 1.03 1.04
>   .. .. ..$ pivot: int [1:4] 1 2 3 4
>   .. .. ..$ tol  : num 1e-07
>   .. .. ..$ rank : int 4
>   .. .. ..- attr(*, "class")= chr "qr"
>   .. ..$ df.residual  : int 992
>   .. ..$ xlevels      : Named list()
>   .. ..$ call         : language lm(formula = y ~ x1 + x2 + x3)
>   .. ..$ terms        :Classes 'terms', 'formula'  language y ~ x1 + x2 + x3
>   .. .. .. ..- attr(*, "variables")= language list(y, x1, x2, x3)
>   .. .. .. ..- attr(*, "factors")= int [1:4, 1:3] 0 1 0 0 0 0 1 0 0 0 ...
>   .. .. .. .. ..- attr(*, "dimnames")=List of 2
>   .. .. .. .. .. ..$ : chr [1:4] "y" "x1" "x2" "x3"
>   .. .. .. .. .. ..$ : chr [1:3] "x1" "x2" "x3"
>   .. .. .. ..- attr(*, "term.labels")= chr [1:3] "x1" "x2" "x3"
>   .. .. .. ..- attr(*, "order")= int [1:3] 1 1 1
>   .. .. .. ..- attr(*, "intercept")= int 1
>   .. .. .. ..- attr(*, "response")= int 1
>   .. .. .. ..- attr(*, ".Environment")=<environment: 0x000000000eeefd48>
>   .. .. .. ..- attr(*, "predvars")= language list(y, x1, x2, x3)
>   .. .. .. ..- attr(*, "dataClasses")= Named chr [1:4] "numeric" "numeric"
> "numeric" "numeric"
>   .. .. .. .. ..- attr(*, "names")= chr [1:4] "y" "x1" "x2" "x3"
>   .. ..$ model        :'data.frame':    996 obs. of  4 variables:
>   .. .. ..$ y : num [1:996] 56.2 71.6 64.4 100.6 75.6 ...
>   .. .. ..$ x1: num [1:996] 6.39 12.97 9.9 25.32 14.5 ...
>   .. .. ..$ x2: num [1:996] 12 27 20 55 31 24 43 31 25 43 ...
>   .. .. ..$ x3: num [1:996] 18 18 18 18 18 19 19 19 19 20 ...
>   .. .. ..- attr(*, "terms")=Classes 'terms', 'formula'  language y ~ x1 + x2 + x3
>   .. .. .. .. ..- attr(*, "variables")= language list(y, x1, x2, x3)
>   .. .. .. .. ..- attr(*, "factors")= int [1:4, 1:3] 0 1 0 0 0 0 1 0 0 0 ...
>   .. .. .. .. .. ..- attr(*, "dimnames")=List of 2
>   .. .. .. .. .. .. ..$ : chr [1:4] "y" "x1" "x2" "x3"
>   .. .. .. .. .. .. ..$ : chr [1:3] "x1" "x2" "x3"
>   .. .. .. .. ..- attr(*, "term.labels")= chr [1:3] "x1" "x2" "x3"
>   .. .. .. .. ..- attr(*, "order")= int [1:3] 1 1 1
>   .. .. .. .. ..- attr(*, "intercept")= int 1
>   .. .. .. .. ..- attr(*, "response")= int 1
>   .. .. .. .. ..- attr(*, ".Environment")=<environment: 0x000000000eeefd48>
>   .. .. .. .. ..- attr(*, "predvars")= language list(y, x1, x2, x3)
>   .. .. .. .. ..- attr(*, "dataClasses")= Named chr [1:4] "numeric" "numeric"
> "numeric" "numeric"
>   .. .. .. .. .. ..- attr(*, "names")= chr [1:4] "y" "x1" "x2" "x3"
>   .. ..- attr(*, "class")= chr "lm"
>   ..$ :List of 12
>   .. ..$ coefficients : Named num [1:4] 44.917 0.957 0.611 -0.121
>   .. .. ..- attr(*, "names")= chr [1:4] "(Intercept)" "x1" "x2" "x3"
>   .. ..$ residuals    : Named num [1:996] 4.59e-12 -9.08e-15 -9.95e-14 -3.33e-14
> -1.88e-14 ...
>   .. .. ..- attr(*, "names")= chr [1:996] "1" "2" "3" "4" ...
>   .. ..$ effects      : Named num [1:996] -2.34e+03 4.44e+02 1.94e+02 -4.41e+01
> -1.51e-13 ...
>   .. .. ..- attr(*, "names")= chr [1:996] "(Intercept)" "x1" "x2" "x3" ...
>   .. ..$ rank         : int 4
>   .. ..$ fitted.values: Named num [1:996] 55.9 71.5 64.3 100.8 75.8 ...
>   .. .. ..- attr(*, "names")= chr [1:996] "1" "2" "3" "4" ...
>   .. ..$ assign       : int [1:4] 0 1 2 3
>   .. ..$ qr           :List of 5
>   .. .. ..$ qr   : num [1:996, 1:4] -31.5595 0.0317 0.0317 0.0317 0.0317 ...
>   .. .. .. ..- attr(*, "dimnames")=List of 2
>   .. .. .. .. ..$ : chr [1:996] "1" "2" "3" "4" ...
>   .. .. .. .. ..$ : chr [1:4] "(Intercept)" "x1" "x2" "x3"
>   .. .. .. ..- attr(*, "assign")= int [1:4] 0 1 2 3
>   .. .. ..$ qraux: num [1:4] 1.03 1 1.03 1.04
>   .. .. ..$ pivot: int [1:4] 1 2 3 4
>   .. .. ..$ tol  : num 1e-07
>   .. .. ..$ rank : int 4
>   .. .. ..- attr(*, "class")= chr "qr"
>   .. ..$ df.residual  : int 992
>   .. ..$ xlevels      : Named list()
>   .. ..$ call         : language lm(formula = y ~ x1 + x2 + x3)
>   .. ..$ terms        :Classes 'terms', 'formula'  language y ~ x1 + x2 + x3
>   .. .. .. ..- attr(*, "variables")= language list(y, x1, x2, x3)
>   .. .. .. ..- attr(*, "factors")= int [1:4, 1:3] 0 1 0 0 0 0 1 0 0 0 ...
>   .. .. .. .. ..- attr(*, "dimnames")=List of 2
>   .. .. .. .. .. ..$ : chr [1:4] "y" "x1" "x2" "x3"
>   .. .. .. .. .. ..$ : chr [1:3] "x1" "x2" "x3"
>   .. .. .. ..- attr(*, "term.labels")= chr [1:3] "x1" "x2" "x3"
>   .. .. .. ..- attr(*, "order")= int [1:3] 1 1 1
>   .. .. .. ..- attr(*, "intercept")= int 1
>   .. .. .. ..- attr(*, "response")= int 1
>   .. .. .. ..- attr(*, ".Environment")=<environment: 0x000000000ee25f90>
>   .. .. .. ..- attr(*, "predvars")= language list(y, x1, x2, x3)
>   .. .. .. ..- attr(*, "dataClasses")= Named chr [1:4] "numeric" "numeric"
> "numeric" "numeric"
>   .. .. .. .. ..- attr(*, "names")= chr [1:4] "y" "x1" "x2" "x3"
>   .. ..$ model        :'data.frame':    996 obs. of  4 variables:
>   .. .. ..$ y : num [1:996] 55.9 71.5 64.3 100.8 75.8 ...
>   .. .. ..$ x1: num [1:996] 6.07 12.81 9.79 25.51 14.7 ...
>   .. .. ..$ x2: num [1:996] 12 27 20 55 31 24 43 31 25 43 ...
>   .. .. ..$ x3: num [1:996] 18 18 18 18 18 19 19 19 19 20 ...
>   .. .. ..- attr(*, "terms")=Classes 'terms', 'formula'  language y ~ x1 + x2 + x3
>   .. .. .. .. ..- attr(*, "variables")= language list(y, x1, x2, x3)
>   .. .. .. .. ..- attr(*, "factors")= int [1:4, 1:3] 0 1 0 0 0 0 1 0 0 0 ...
>   .. .. .. .. .. ..- attr(*, "dimnames")=List of 2
>   .. .. .. .. .. .. ..$ : chr [1:4] "y" "x1" "x2" "x3"
>   .. .. .. .. .. .. ..$ : chr [1:3] "x1" "x2" "x3"
>   .. .. .. .. ..- attr(*, "term.labels")= chr [1:3] "x1" "x2" "x3"
>   .. .. .. .. ..- attr(*, "order")= int [1:3] 1 1 1
>   .. .. .. .. ..- attr(*, "intercept")= int 1
>   .. .. .. .. ..- attr(*, "response")= int 1
>   .. .. .. .. ..- attr(*, ".Environment")=<environment: 0x000000000ee25f90>
>   .. .. .. .. ..- attr(*, "predvars")= language list(y, x1, x2, x3)
>   .. .. .. .. ..- attr(*, "dataClasses")= Named chr [1:4] "numeric" "numeric"
> "numeric" "numeric"
>   .. .. .. .. .. ..- attr(*, "names")= chr [1:4] "y" "x1" "x2" "x3"
>   .. ..- attr(*, "class")= chr "lm"
>   ..$ :List of 12
>   .. ..$ coefficients : Named num [1:4] 44.917 0.957 0.611 -0.121
>   .. .. ..- attr(*, "names")= chr [1:4] "(Intercept)" "x1" "x2" "x3"
>   .. ..$ residuals    : Named num [1:996] 3.54e-12 -9.01e-14 -6.32e-14 1.80e-14
> 1.59e-14 ...
>   .. .. ..- attr(*, "names")= chr [1:996] "1" "2" "3" "4" ...
>   .. ..$ effects      : Named num [1:996] -2.34e+03 4.44e+02 1.94e+02 -4.41e+01
> -8.79e-14 ...
>   .. .. ..- attr(*, "names")= chr [1:996] "(Intercept)" "x1" "x2" "x3" ...
>   .. ..$ rank         : int 4
>   .. ..$ fitted.values: Named num [1:996] 56.2 71.5 64.1 100.7 75.7 ...
>   .. .. ..- attr(*, "names")= chr [1:996] "1" "2" "3" "4" ...
>   .. ..$ assign       : int [1:4] 0 1 2 3
>   .. ..$ qr           :List of 5
>   .. .. ..$ qr   : num [1:996, 1:4] -31.5595 0.0317 0.0317 0.0317 0.0317 ...
>   .. .. .. ..- attr(*, "dimnames")=List of 2
>   .. .. .. .. ..$ : chr [1:996] "1" "2" "3" "4" ...
>   .. .. .. .. ..$ : chr [1:4] "(Intercept)" "x1" "x2" "x3"
>   .. .. .. ..- attr(*, "assign")= int [1:4] 0 1 2 3
>   .. .. ..$ qraux: num [1:4] 1.03 1 1.03 1.04
>   .. .. ..$ pivot: int [1:4] 1 2 3 4
>   .. .. ..$ tol  : num 1e-07
>   .. .. ..$ rank : int 4
>   .. .. ..- attr(*, "class")= chr "qr"
>   .. ..$ df.residual  : int 992
>   .. ..$ xlevels      : Named list()
>   .. ..$ call         : language lm(formula = y ~ x1 + x2 + x3)
>   .. ..$ terms        :Classes 'terms', 'formula'  language y ~ x1 + x2 + x3
>   .. .. .. ..- attr(*, "variables")= language list(y, x1, x2, x3)
>   .. .. .. ..- attr(*, "factors")= int [1:4, 1:3] 0 1 0 0 0 0 1 0 0 0 ...
>   .. .. .. .. ..- attr(*, "dimnames")=List of 2
>   .. .. .. .. .. ..$ : chr [1:4] "y" "x1" "x2" "x3"
>   .. .. .. .. .. ..$ : chr [1:3] "x1" "x2" "x3"
>   .. .. .. ..- attr(*, "term.labels")= chr [1:3] "x1" "x2" "x3"
>   .. .. .. ..- attr(*, "order")= int [1:3] 1 1 1
>   .. .. .. ..- attr(*, "intercept")= int 1
>   .. .. .. ..- attr(*, "response")= int 1
>   .. .. .. ..- attr(*, ".Environment")=<environment: 0x000000000c2916d0>
>   .. .. .. ..- attr(*, "predvars")= language list(y, x1, x2, x3)
>   .. .. .. ..- attr(*, "dataClasses")= Named chr [1:4] "numeric" "numeric"
> "numeric" "numeric"
>   .. .. .. .. ..- attr(*, "names")= chr [1:4] "y" "x1" "x2" "x3"
>   .. ..$ model        :'data.frame':    996 obs. of  4 variables:
>   .. .. ..$ y : num [1:996] 56.2 71.5 64.1 100.7 75.7 ...
>   .. .. ..$ x1: num [1:996] 6.39 12.79 9.54 25.41 14.63 ...
>   .. .. ..$ x2: num [1:996] 12 27 20 55 31 24 43 31 25 43 ...
>   .. .. ..$ x3: num [1:996] 18 18 18 18 18 19 19 19 19 20 ...
>   .. .. ..- attr(*, "terms")=Classes 'terms', 'formula'  language y ~ x1 + x2 + x3
>   .. .. .. .. ..- attr(*, "variables")= language list(y, x1, x2, x3)
>   .. .. .. .. ..- attr(*, "factors")= int [1:4, 1:3] 0 1 0 0 0 0 1 0 0 0 ...
>   .. .. .. .. .. ..- attr(*, "dimnames")=List of 2
>   .. .. .. .. .. .. ..$ : chr [1:4] "y" "x1" "x2" "x3"
>   .. .. .. .. .. .. ..$ : chr [1:3] "x1" "x2" "x3"
>   .. .. .. .. ..- attr(*, "term.labels")= chr [1:3] "x1" "x2" "x3"
>   .. .. .. .. ..- attr(*, "order")= int [1:3] 1 1 1
>   .. .. .. .. ..- attr(*, "intercept")= int 1
>   .. .. .. .. ..- attr(*, "response")= int 1
>   .. .. .. .. ..- attr(*, ".Environment")=<environment: 0x000000000c2916d0>
>   .. .. .. .. ..- attr(*, "predvars")= language list(y, x1, x2, x3)
>   .. .. .. .. ..- attr(*, "dataClasses")= Named chr [1:4] "numeric" "numeric"
> "numeric" "numeric"
>   .. .. .. .. .. ..- attr(*, "names")= chr [1:4] "y" "x1" "x2" "x3"
>   .. ..- attr(*, "class")= chr "lm"
>   ..$ :List of 12
>   .. ..$ coefficients : Named num [1:4] 44.917 0.957 0.611 -0.121
>   .. .. ..- attr(*, "names")= chr [1:4] "(Intercept)" "x1" "x2" "x3"
>   .. ..$ residuals    : Named num [1:996] 4.33e-12 1.59e-12 -4.68e-13 7.83e-14
> 2.85e-15 ...
>   .. .. ..- attr(*, "names")= chr [1:996] "1" "2" "3" "4" ...
>   .. ..$ effects      : Named num [1:996] -2.34e+03 4.44e+02 1.94e+02 -4.41e+01
> -1.27e-13 ...
>   .. .. ..- attr(*, "names")= chr [1:996] "(Intercept)" "x1" "x2" "x3" ...
>   .. ..$ rank         : int 4
>   .. ..$ fitted.values: Named num [1:996] 55.8 71.5 64.4 101 75.7 ...
>   .. .. ..- attr(*, "names")= chr [1:996] "1" "2" "3" "4" ...
>   .. ..$ assign       : int [1:4] 0 1 2 3
>   .. ..$ qr           :List of 5
>   .. .. ..$ qr   : num [1:996, 1:4] -31.5595 0.0317 0.0317 0.0317 0.0317 ...
>   .. .. .. ..- attr(*, "dimnames")=List of 2
>   .. .. .. .. ..$ : chr [1:996] "1" "2" "3" "4" ...
>   .. .. .. .. ..$ : chr [1:4] "(Intercept)" "x1" "x2" "x3"
>   .. .. .. ..- attr(*, "assign")= int [1:4] 0 1 2 3
>   .. .. ..$ qraux: num [1:4] 1.03 1 1.03 1.04
>   .. .. ..$ pivot: int [1:4] 1 2 3 4
>   .. .. ..$ tol  : num 1e-07
>   .. .. ..$ rank : int 4
>   .. .. ..- attr(*, "class")= chr "qr"
>   .. ..$ df.residual  : int 992
>   .. ..$ xlevels      : Named list()
>   .. ..$ call         : language lm(formula = y ~ x1 + x2 + x3)
>   .. ..$ terms        :Classes 'terms', 'formula'  language y ~ x1 + x2 + x3
>   .. .. .. ..- attr(*, "variables")= language list(y, x1, x2, x3)
>   .. .. .. ..- attr(*, "factors")= int [1:4, 1:3] 0 1 0 0 0 0 1 0 0 0 ...
>   .. .. .. .. ..- attr(*, "dimnames")=List of 2
>   .. .. .. .. .. ..$ : chr [1:4] "y" "x1" "x2" "x3"
>   .. .. .. .. .. ..$ : chr [1:3] "x1" "x2" "x3"
>   .. .. .. ..- attr(*, "term.labels")= chr [1:3] "x1" "x2" "x3"
>   .. .. .. ..- attr(*, "order")= int [1:3] 1 1 1
>   .. .. .. ..- attr(*, "intercept")= int 1
>   .. .. .. ..- attr(*, "response")= int 1
>   .. .. .. ..- attr(*, ".Environment")=<environment: 0x000000000e870a48>
>   .. .. .. ..- attr(*, "predvars")= language list(y, x1, x2, x3)
>   .. .. .. ..- attr(*, "dataClasses")= Named chr [1:4] "numeric" "numeric"
> "numeric" "numeric"
>   .. .. .. .. ..- attr(*, "names")= chr [1:4] "y" "x1" "x2" "x3"
>   .. ..$ model        :'data.frame':    996 obs. of  4 variables:
>   .. .. ..$ y : num [1:996] 55.8 71.5 64.4 101 75.7 ...
>   .. .. ..$ x1: num [1:996] 5.95 12.82 9.85 25.78 14.69 ...
>   .. .. ..$ x2: num [1:996] 12 27 20 55 31 24 43 31 25 43 ...
>   .. .. ..$ x3: num [1:996] 18 18 18 18 18 19 19 19 19 20 ...
>   .. .. ..- attr(*, "terms")=Classes 'terms', 'formula'  language y ~ x1 + x2 + x3
>   .. .. .. .. ..- attr(*, "variables")= language list(y, x1, x2, x3)
>   .. .. .. .. ..- attr(*, "factors")= int [1:4, 1:3] 0 1 0 0 0 0 1 0 0 0 ...
>   .. .. .. .. .. ..- attr(*, "dimnames")=List of 2
>   .. .. .. .. .. .. ..$ : chr [1:4] "y" "x1" "x2" "x3"
>   .. .. .. .. .. .. ..$ : chr [1:3] "x1" "x2" "x3"
>   .. .. .. .. ..- attr(*, "term.labels")= chr [1:3] "x1" "x2" "x3"
>   .. .. .. .. ..- attr(*, "order")= int [1:3] 1 1 1
>   .. .. .. .. ..- attr(*, "intercept")= int 1
>   .. .. .. .. ..- attr(*, "response")= int 1
>   .. .. .. .. ..- attr(*, ".Environment")=<environment: 0x000000000e870a48>
>   .. .. .. .. ..- attr(*, "predvars")= language list(y, x1, x2, x3)
>   .. .. .. .. ..- attr(*, "dataClasses")= Named chr [1:4] "numeric" "numeric"
> "numeric" "numeric"
>   .. .. .. .. .. ..- attr(*, "names")= chr [1:4] "y" "x1" "x2" "x3"
>   .. ..- attr(*, "class")= chr "lm"
>   ..$ :List of 12
>   .. ..$ coefficients : Named num [1:4] 44.917 0.957 0.611 -0.121
>   .. .. ..- attr(*, "names")= chr [1:4] "(Intercept)" "x1" "x2" "x3"
>   .. ..$ residuals    : Named num [1:996] 4.78e-12 2.82e-12 -2.51e-13 -1.75e-16
> 6.59e-15 ...
>   .. .. ..- attr(*, "names")= chr [1:996] "1" "2" "3" "4" ...
>   .. ..$ effects      : Named num [1:996] -2.34e+03 4.44e+02 1.94e+02 -4.41e+01
> -1.35e-13 ...
>   .. .. ..- attr(*, "names")= chr [1:996] "(Intercept)" "x1" "x2" "x3" ...
>   .. ..$ rank         : int 4
>   .. ..$ fitted.values: Named num [1:996] 55.7 71.7 64.3 100.7 75.8 ...
>   .. .. ..- attr(*, "names")= chr [1:996] "1" "2" "3" "4" ...
>   .. ..$ assign       : int [1:4] 0 1 2 3
>   .. ..$ qr           :List of 5
>   .. .. ..$ qr   : num [1:996, 1:4] -31.5595 0.0317 0.0317 0.0317 0.0317 ...
>   .. .. .. ..- attr(*, "dimnames")=List of 2
>   .. .. .. .. ..$ : chr [1:996] "1" "2" "3" "4" ...
>   .. .. .. .. ..$ : chr [1:4] "(Intercept)" "x1" "x2" "x3"
>   .. .. .. ..- attr(*, "assign")= int [1:4] 0 1 2 3
>   .. .. ..$ qraux: num [1:4] 1.03 1 1.03 1.04
>   .. .. ..$ pivot: int [1:4] 1 2 3 4
>   .. .. ..$ tol  : num 1e-07
>   .. .. ..$ rank : int 4
>   .. .. ..- attr(*, "class")= chr "qr"
>   .. ..$ df.residual  : int 992
>   .. ..$ xlevels      : Named list()
>   .. ..$ call         : language lm(formula = y ~ x1 + x2 + x3)
>   .. ..$ terms        :Classes 'terms', 'formula'  language y ~ x1 + x2 + x3
>   .. .. .. ..- attr(*, "variables")= language list(y, x1, x2, x3)
>   .. .. .. ..- attr(*, "factors")= int [1:4, 1:3] 0 1 0 0 0 0 1 0 0 0 ...
>   .. .. .. .. ..- attr(*, "dimnames")=List of 2
>   .. .. .. .. .. ..$ : chr [1:4] "y" "x1" "x2" "x3"
>   .. .. .. .. .. ..$ : chr [1:3] "x1" "x2" "x3"
>   .. .. .. ..- attr(*, "term.labels")= chr [1:3] "x1" "x2" "x3"
>   .. .. .. ..- attr(*, "order")= int [1:3] 1 1 1
>   .. .. .. ..- attr(*, "intercept")= int 1
>   .. .. .. ..- attr(*, "response")= int 1
>   .. .. .. ..- attr(*, ".Environment")=<environment: 0x000000000c5b6b88>
>   .. .. .. ..- attr(*, "predvars")= language list(y, x1, x2, x3)
>   .. .. .. ..- attr(*, "dataClasses")= Named chr [1:4] "numeric" "numeric"
> "numeric" "numeric"
>   .. .. .. .. ..- attr(*, "names")= chr [1:4] "y" "x1" "x2" "x3"
>   .. ..$ model        :'data.frame':    996 obs. of  4 variables:
>   .. .. ..$ y : num [1:996] 55.7 71.7 64.3 100.7 75.8 ...
>   .. .. ..$ x1: num [1:996] 5.83 13.01 9.76 25.49 14.7 ...
>   .. .. ..$ x2: num [1:996] 12 27 20 55 31 24 43 31 25 43 ...
>   .. .. ..$ x3: num [1:996] 18 18 18 18 18 19 19 19 19 20 ...
>   .. .. ..- attr(*, "terms")=Classes 'terms', 'formula'  language y ~ x1 + x2 + x3
>   .. .. .. .. ..- attr(*, "variables")= language list(y, x1, x2, x3)
>   .. .. .. .. ..- attr(*, "factors")= int [1:4, 1:3] 0 1 0 0 0 0 1 0 0 0 ...
>   .. .. .. .. .. ..- attr(*, "dimnames")=List of 2
>   .. .. .. .. .. .. ..$ : chr [1:4] "y" "x1" "x2" "x3"
>   .. .. .. .. .. .. ..$ : chr [1:3] "x1" "x2" "x3"
>   .. .. .. .. ..- attr(*, "term.labels")= chr [1:3] "x1" "x2" "x3"
>   .. .. .. .. ..- attr(*, "order")= int [1:3] 1 1 1
>   .. .. .. .. ..- attr(*, "intercept")= int 1
>   .. .. .. .. ..- attr(*, "response")= int 1
>   .. .. .. .. ..- attr(*, ".Environment")=<environment: 0x000000000c5b6b88>
>   .. .. .. .. ..- attr(*, "predvars")= language list(y, x1, x2, x3)
>   .. .. .. .. ..- attr(*, "dataClasses")= Named chr [1:4] "numeric" "numeric"
> "numeric" "numeric"
>   .. .. .. .. .. ..- attr(*, "names")= chr [1:4] "y" "x1" "x2" "x3"
>   .. ..- attr(*, "class")= chr "lm"
>  - attr(*, "class")= chr [1:2] "mira" "matrix"
>
> Thank you,
>
> Anne
>
> -----Message d'origine-----
> De : PIKAL Petr [mailto:petr.pikal at precheza.cz]
> Envoy? : jeudi, 27 septembre 2018 09:20
> ? : CHATTON Anne <Anne.Chatton at hcuge.ch>
> Objet : RE: Problems to obtain standardized betas in multiply-imputed data
>
> Hi
>
> I am not an expert in multiple imputation but from mice help page the
> resulting object is not a simple data frame. lm does not complain but maybe
> FitImp is not "standard" lm object.
>
> Without detailed info about used objects it is difficult to tell what is reason for
> error.
>
> You should send us result (or part) of
>
> str(data)
> str(imp)
> str(FitImp)
>
> to get better answer.
>
> Cheers
> Petr
>
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of CHATTON Anne
> > via R-help
> > Sent: Wednesday, September 26, 2018 10:43 AM
> > To: r-help at r-project.org
> > Subject: [R] Problems to obtain standardized betas in multiply-imputed
> > data
> >
> > Dear all,
> >
> > I am having problems in obtaining standardized betas on a
> > multiply-imputed data set. Here are the codes I used :
> > imp = mice(data, 5, maxit=10, seed=42, print=FALSE)
> > FitImp <-  with(imp,lm(y ~ x1 + x2 + x3)) Up to here everything is fine. But
> when
> > I ask for the standardized coefficients of the multiply-imputed
> > regressions using this command :
> > sdBeta <- lm.beta(FitImp)
> > I get the following error message:
> > Error in b * sx : argument non num?rique pour un op?rateur binaire
> >
> > Can anyone help me with this please?
> >
> > Anne
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch
> partner? PRECHEZA a.s. jsou zve?ejn?ny na: https://www.precheza.cz/zasady-
> ochrany-osobnich-udaju/ | Information about processing and protection of
> business partner?s personal data are available on website:
> https://www.precheza.cz/en/personal-data-protection-principles/
> D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn?
> a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti:
> https://www.precheza.cz/01-dovetek/ | This email and any documents
> attached to it may be confidential and are subject to the legally binding
> disclaimer: https://www.precheza.cz/en/01-disclaimer/

Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information about processing and protection of business partner?s personal data are available on website: https://www.precheza.cz/en/personal-data-protection-principles/
D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any documents attached to it may be confidential and are subject to the legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/


From petr@p|k@| @end|ng |rom prechez@@cz  Mon Oct  8 16:46:48 2018
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Mon, 8 Oct 2018 14:46:48 +0000
Subject: [R] Error in nlsModel
In-Reply-To: <CAGf4fj0GwzivGHz_Q=BpjPY5J2p7NqBPFiSBeA1q0tEUPPq0Ng@mail.gmail.com>
References: <CAGf4fj0GwzivGHz_Q=BpjPY5J2p7NqBPFiSBeA1q0tEUPPq0Ng@mail.gmail.com>
Message-ID: <30fdda659c934b1cb0059af4915b73ce@SRVEXCHCM1301.precheza.cz>

Hi

I do not want to dig too deep into your code so only 2 comments.

1.Try to plot your defined functions with starting parameters and with defined concentration

something like

plot(conc, Weibull(1,1, conc))

2.Try to use conc with different units, something like

conc1 <- conc*1000

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Belinda Hum Bei Lin
> Sent: Monday, October 8, 2018 11:15 AM
> To: r-help at r-project.org
> Subject: [R] Error in nlsModel
>
> Hello,
>
> It is my first time using R studio and I am facing the error of
> "Error in nlsModel(formula, mf, start, wts) :
>   singular gradient matrix at initial parameter estimates"
> when I try to run my script. From what I read online, I understand that the
> error might be due to the parameters. However, I do not know how to choose
> the right set of parameters. Is there anyone who could advice me on how to
> do this?
>
> Below are my script details:
> rm(list=ls()) #remove ALL objects
> cat("\014") # clear console window prior to new run
> Sys.setenv(LANG = "en") #Let's keep stuff in English
> Sys.setlocale("LC_ALL","English")
>
> ##########
> #import necessary packages
> #########
>
> ##To install the packages use the function install.packages. Installing is
> done once.
> #install.packages("ggplot2")
> #install.packages("minpack.lm")
> #install.packages("nlstools")
>
> ##Activate the packages. This needs to be done everytime before running the
> script.
> require(ggplot2)
> require(minpack.lm)
> require(nlstools)
>
>
>
> #########
> #define the Weibull function
> #########
> Weibull<-function(tet1, tet2,x){
>   1-exp(-exp(tet1+tet2*log10(x)))
> }
>
> #########
> ##define the inverse of the Weibull function. put in effect and get
> concentration as output
> #########
> iWeibull<-function(tet1,tet2,x){
>   10^((log(-log(1-x))-tet1)/tet2)
> }
>
>
> #########
> #define the Logit function
> #########
> Logit<-function(tet1, tet2,x){
>   1/(1+exp(-tet1-tet2*log10(x)))
> }
>
> #########
> ##define the inverse of the Logit function
> #########
> iLogit<-function(tet1,tet2,x){
>   10^(-(log(1/x-1)+tet1)/tet2)
> }
>
> #########
> #define the Probit function
> #########
> Probit<-function(tet1, tet2, x){
>   pnorm(tet1+tet2*(log10(x)))
> }
>
> #########
> ##define the inverse of the Probit function
> #########
> iProbit<-function(tet1,tet2,x){
>   10^((qnorm(x)-tet1)/tet2)
> }
>
> #########
> # Establish data to fit
> # data given here are the data for Diuron from the example datasets
> #
> # Of course one could also import an external datafile via e.g.
> # read.table, read.csv functions
>
> ### example to choose a file for import with the read.csv function, where
> "," is seperating the columns,
> # header=TURE tells R that the first row contains the titles of the
> columns, and
> # stringsAsFactors = FALSE specify that the characters should not be
> converted to factors. For more info run ?read.csv
> effectdata<-read.csv(file.choose(),sep=",",stringsAsFactors = FALSE,header
> = TRUE)
> ?read.csv
> ###
>
> #########
> conc<-c(0,
>         0,
>         0,
>         0,
>         0,
>         0,
>         0.000135696,
>         0.000135696,
>         0.000135696,
>         0.000152971,
>         0.000152971,
>         0.000152971,
>         0.000172445,
>         0.000172445,
>         0.000172445,
>         0.000194398,
>         0.000194398,
>         0.000194398,
>         0.000219146,
>         0.000219146,
>         0.000219146,
>         0.000247044,
>         0.000247044,
>         0.000247044
> )
>
> effect<-c(5.342014355,
>           13.46249176,
>           -9.249022885,
>           -6.666486351,
>           1.00292152,
>           -3.891918402,
>           12.63136345,
>           -2.372582186,
>           8.601073479,
>           1.309926638,
>           0.772728968,
>           -7.01067202,
>           30.65306236,
>           28.10819667,
>           17.94875421,
>           73.00440617,
>           71.33593917,
>           62.23994217,
>           99.18897648,
>           99.05982514,
>           99.2325145,
>           100.2402872,
>           100.1276669,
>           100.1501468
> )
>
> #build input dataframe
> effectdata<-data.frame(conc,effect)
>
> #plot the data just to get a first glance of the data
> ggplot()+
>   geom_point(data=effectdata,aes(x=conc,y=effect), size = 5)+
>   scale_x_log10("conc")
>
>
> #delete controls
> effectdata_without_controls<-subset(effectdata,effectdata$conc>0)
>
>
> #save controls in a seperate dataframe called effectdata_control, which
> will be added to the ggplot in the end.
> #since you can't have 0 on a logscale we will give the controls a very very
> low concentration 0.00001 (not 100% correct, but will not be seen in the
> final plot)
> effectdata_controls<-subset(effectdata,effectdata$conc==0)
> effectdata_controls$conc<-effectdata_controls$conc+0.0001
>
>
>
> ########
> #fit data (without controls) using ordinary least squares
> #ordinary least squares is a method for estimating unknown parameters in
> statistics. The aim of the method is to minimize
> #the difference between the observed responses and the responses predicted
> by the approximation of the data.
> #nlsLM is from the minpack.lm package
> #nls=non-linear lest squares
> ########
> nlsLM_result_Weibull<-nlsLM(effect~Weibull(tet1,tet2,conc),
> data=effectdata_without_controls, start=list(tet1=1,tet2=1))
> nlsLM_result_Logit<-nlsLM(effect~Logit(tet1,tet2,conc),
> data=effectdata_without_controls, start=list(tet1=1,tet2=1))
> nlsLM_result_Probit<-nlsLM(effect~Probit(tet1,tet2,conc),
> data=effectdata_without_controls, start=list(tet1=1,tet2=1))
>
> Thanks a bunch!
>
> Best Regards,
> Belinda
> Belinda *Hum* Bei Lin (Ms)
> National University of Singapore
> (e): belindahbl at gmail.com
> (c): +6581136079
> <+65%208113%206079>
>
> [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information about processing and protection of business partner?s personal data are available on website: https://www.precheza.cz/en/personal-data-protection-principles/
D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any documents attached to it may be confidential and are subject to the legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/


From m@cqueen1 @end|ng |rom ||n|@gov  Mon Oct  8 18:04:47 2018
From: m@cqueen1 @end|ng |rom ||n|@gov (MacQueen, Don)
Date: Mon, 8 Oct 2018 16:04:47 +0000
Subject: [R] Genuine relative paths with R
Message-ID: <7976D00C-2713-4B28-AD19-6788184DCF16@llnl.gov>

A few facts (and some opinions):


First fact:

  R understands relative paths (as do the other languages you mentioned) (you have misunderstood R if you think it doesn't)

Second fact:

  R interprets relative paths as being relative to its current working directory

Third fact:

  To find out R's current working directory type:   getwd() at the R prompt

Fourth fact:

   There are various ways to set R's working directory, depending on how you are running R. Once R is running, you can if necessary use setwd() at the R prompt, and this is platform-independent (but it should rarely be necessary).



The easiest way to set the working directory, in my opinion, is by starting R from a linux or Mac command shell (bash, tcsh, etc) environment. You start R by typing "R" at the shell prompt and R's working directory is inherited from the current working directory of the shell.

If you are using a GUI (i.e., you started R by double-clicking on some icon), look for menu commands to set the working directory. Check the documentation for the GUI to find out other ways to set the working directory for that GUI.

No additional packages are necessary in order to manage R's working directory simply and effectively.

Yes, you can move all the scripts related to some project as a whole to some other location and have them run seamlessly using relative paths. Hopefully it is clear by now that all that is needed is to set R's working directory to the project's main directory.

-Don

--
Don MacQueen
Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062
Lab cell 925-724-7509
 
 

?On 10/6/18, 4:48 AM, "R-help on behalf of Olivier GIVAUDAN" <r-help-bounces at r-project.org on behalf of olivier_givaudan at hotmail.com> wrote:

    Dear R users,
    
    I would like to work with genuine relative paths in R for obvious reasons: if I move all my scripts related to some project as a whole to another location of my computer or someone else's computer, if want my scripts to continue to run seamlessly.
    
    What I mean by "genuine" is that it should not be necessary to hardcode one single absolute path (making the code obviously not "portable" - to another place - anymore).
    
    For the time being, I found the following related posts, unfortunately never conclusive or even somewhat off-topic:
    https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
    https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
    http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
    
    So I found 2 workarounds, more or less satisfactory:
    
    
      1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.
      2.  Or create an R project file with RStudio and use the package "here" to get the absolute path of the R project file and put all the R scripts related to this project in the R project directory, as often recommended.
    
    But I am really wondering why R doesn't have (please tell me if I'm wrong) this basic feature as many other languages have it (batch, shell, C, LaTeX, SAS with macro-variables, etc.)?
    Do you know whether the language will have this kind of function in a near future? What are the obstacles / what is the reasoning for not having it already?
    
    Do you know other workarounds?
    
    Best regards,
    
    Olivier
    
    	[[alternative HTML version deleted]]
    
    ______________________________________________
    R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    https://stat.ethz.ch/mailman/listinfo/r-help
    PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    and provide commented, minimal, self-contained, reproducible code.
    


From pro|jcn@@h @end|ng |rom gm@||@com  Mon Oct  8 23:31:40 2018
From: pro|jcn@@h @end|ng |rom gm@||@com (ProfJCNash)
Date: Mon, 8 Oct 2018 17:31:40 -0400
Subject: [R] Error in nlsModel
In-Reply-To: <CAGf4fj0GwzivGHz_Q=BpjPY5J2p7NqBPFiSBeA1q0tEUPPq0Ng@mail.gmail.com>
References: <CAGf4fj0GwzivGHz_Q=BpjPY5J2p7NqBPFiSBeA1q0tEUPPq0Ng@mail.gmail.com>
Message-ID: <ce380959-ba03-ba7e-3dad-3199c86cdf10@gmail.com>

I'm not the author of nlsModel, so would prefer not to tinker with it.

But "singular gradient" is a VERY common problem with nls() that is used
by nlsModel as I understand it. The issue is actually a singular
Jacobian matrix resulting from a rather weak approximation of the
derivatives (a simple forward approximation as far as I can determine,
and using a fairly large step (1e-7), though a choice I'd probably make
too for this approach.

Duncan Murdoch and I wrote nlsr to do analytic derivatives where
possible. If you can use that (i.e., extract the modeling part of
nlsModel and call nlxb() from nlsr directly), I suspect you will have
better luck. If you still get singularity, it likely means that you
really have parameters that are some combination of each other.

JN

On 2018-10-08 05:14 AM, Belinda Hum Bei Lin wrote:
> Hello,
> 
> It is my first time using R studio and I am facing the error of
> "Error in nlsModel(formula, mf, start, wts) :
>   singular gradient matrix at initial parameter estimates"
> when I try to run my script. From what I read online, I understand that the
> error might be due to the parameters. However, I do not know how to choose
> the right set of parameters. Is there anyone who could advice me on how to
> do this?
> 
> Below are my script details:
> rm(list=ls()) #remove ALL objects
> cat("\014") # clear console window prior to new run
> Sys.setenv(LANG = "en") #Let's keep stuff in English
> Sys.setlocale("LC_ALL","English")
> 
> ##########
> #import necessary packages
> #########
> 
> ##To install the packages use the function install.packages. Installing is
> done once.
> #install.packages("ggplot2")
> #install.packages("minpack.lm")
> #install.packages("nlstools")
> 
> ##Activate the packages. This needs to be done everytime before running the
> script.
> require(ggplot2)
> require(minpack.lm)
> require(nlstools)
> 
> 
> 
> #########
> #define the Weibull function
> #########
> Weibull<-function(tet1, tet2,x){
>   1-exp(-exp(tet1+tet2*log10(x)))
> }
> 
> #########
> ##define the inverse of the Weibull function. put in effect and get
> concentration as output
> #########
> iWeibull<-function(tet1,tet2,x){
>   10^((log(-log(1-x))-tet1)/tet2)
> }
> 
> 
> #########
> #define the Logit function
> #########
> Logit<-function(tet1, tet2,x){
>   1/(1+exp(-tet1-tet2*log10(x)))
> }
> 
> #########
> ##define the inverse of the Logit function
> #########
> iLogit<-function(tet1,tet2,x){
>   10^(-(log(1/x-1)+tet1)/tet2)
> }
> 
> #########
> #define the Probit function
> #########
> Probit<-function(tet1, tet2, x){
>   pnorm(tet1+tet2*(log10(x)))
> }
> 
> #########
> ##define the inverse of the Probit function
> #########
> iProbit<-function(tet1,tet2,x){
>   10^((qnorm(x)-tet1)/tet2)
> }
> 
> #########
> # Establish data to fit
> # data given here are the data for Diuron from the example datasets
> #
> # Of course one could also import an external datafile via e.g.
> # read.table, read.csv functions
> 
> ### example to choose a file for import with the read.csv function, where
> "," is seperating the columns,
> # header=TURE tells R that the first row contains the titles of the
> columns, and
> # stringsAsFactors = FALSE specify that the characters should not be
> converted to factors. For more info run ?read.csv
> effectdata<-read.csv(file.choose(),sep=",",stringsAsFactors = FALSE,header
> = TRUE)
> ?read.csv
> ###
> 
> #########
> conc<-c(0,
>         0,
>         0,
>         0,
>         0,
>         0,
>         0.000135696,
>         0.000135696,
>         0.000135696,
>         0.000152971,
>         0.000152971,
>         0.000152971,
>         0.000172445,
>         0.000172445,
>         0.000172445,
>         0.000194398,
>         0.000194398,
>         0.000194398,
>         0.000219146,
>         0.000219146,
>         0.000219146,
>         0.000247044,
>         0.000247044,
>         0.000247044
> )
> 
> effect<-c(5.342014355,
>           13.46249176,
>           -9.249022885,
>           -6.666486351,
>           1.00292152,
>           -3.891918402,
>           12.63136345,
>           -2.372582186,
>           8.601073479,
>           1.309926638,
>           0.772728968,
>           -7.01067202,
>           30.65306236,
>           28.10819667,
>           17.94875421,
>           73.00440617,
>           71.33593917,
>           62.23994217,
>           99.18897648,
>           99.05982514,
>           99.2325145,
>           100.2402872,
>           100.1276669,
>           100.1501468
> )
> 
> #build input dataframe
> effectdata<-data.frame(conc,effect)
> 
> #plot the data just to get a first glance of the data
> ggplot()+
>   geom_point(data=effectdata,aes(x=conc,y=effect), size = 5)+
>   scale_x_log10("conc")
> 
> 
> #delete controls
> effectdata_without_controls<-subset(effectdata,effectdata$conc>0)
> 
> 
> #save controls in a seperate dataframe called effectdata_control, which
> will be added to the ggplot in the end.
> #since you can't have 0 on a logscale we will give the controls a very very
> low concentration 0.00001 (not 100% correct, but will not be seen in the
> final plot)
> effectdata_controls<-subset(effectdata,effectdata$conc==0)
> effectdata_controls$conc<-effectdata_controls$conc+0.0001
> 
> 
> 
> ########
> #fit data (without controls) using ordinary least squares
> #ordinary least squares is a method for estimating unknown parameters in
> statistics. The aim of the method is to minimize
> #the difference between the observed responses and the responses predicted
> by the approximation of the data.
> #nlsLM is from the minpack.lm package
> #nls=non-linear lest squares
> ########
> nlsLM_result_Weibull<-nlsLM(effect~Weibull(tet1,tet2,conc),
> data=effectdata_without_controls, start=list(tet1=1,tet2=1))
> nlsLM_result_Logit<-nlsLM(effect~Logit(tet1,tet2,conc),
> data=effectdata_without_controls, start=list(tet1=1,tet2=1))
> nlsLM_result_Probit<-nlsLM(effect~Probit(tet1,tet2,conc),
> data=effectdata_without_controls, start=list(tet1=1,tet2=1))
> 
> Thanks a bunch!
> 
> Best Regards,
> Belinda
> Belinda *Hum* Bei Lin (Ms)
> National University of Singapore
> (e): belindahbl at gmail.com
> (c): +6581136079
> <+65%208113%206079>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>



From wdun|@p @end|ng |rom t|bco@com  Tue Oct  9 00:21:04 2018
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Mon, 8 Oct 2018 15:21:04 -0700
Subject: [R] Error in nlsModel
In-Reply-To: <CAGf4fj0GwzivGHz_Q=BpjPY5J2p7NqBPFiSBeA1q0tEUPPq0Ng@mail.gmail.com>
References: <CAGf4fj0GwzivGHz_Q=BpjPY5J2p7NqBPFiSBeA1q0tEUPPq0Ng@mail.gmail.com>
Message-ID: <CAF8bMcZXcN5KNHq-WuKaSePWfrTJEkESz2u+dCawGc-5BHwewA@mail.gmail.com>

  Weibull<-function(tet1, tet2,x){
    1-exp(-exp(tet1+tet2*log10(x)))
  }
  range(effectdata_without_controls$conc)
  # 0.000135696 0.000247044
  range(effectdata_without_controls$effect)
  # [1]  -7.010672 100.240287
  nls(effect ~ Weibull(tet1, tet2, conc))

Your Weibull function has a range of [0,1) but you are using it to model
an effect with range c. -7 to 100.  Is this an appropriate model?




Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Mon, Oct 8, 2018 at 2:14 AM, Belinda Hum Bei Lin <belindahbl at gmail.com>
wrote:

> Hello,
>
> It is my first time using R studio and I am facing the error of
> "Error in nlsModel(formula, mf, start, wts) :
>   singular gradient matrix at initial parameter estimates"
> when I try to run my script. From what I read online, I understand that the
> error might be due to the parameters. However, I do not know how to choose
> the right set of parameters. Is there anyone who could advice me on how to
> do this?
>
> Below are my script details:
> rm(list=ls()) #remove ALL objects
> cat("\014") # clear console window prior to new run
> Sys.setenv(LANG = "en") #Let's keep stuff in English
> Sys.setlocale("LC_ALL","English")
>
> ##########
> #import necessary packages
> #########
>
> ##To install the packages use the function install.packages. Installing is
> done once.
> #install.packages("ggplot2")
> #install.packages("minpack.lm")
> #install.packages("nlstools")
>
> ##Activate the packages. This needs to be done everytime before running the
> script.
> require(ggplot2)
> require(minpack.lm)
> require(nlstools)
>
>
>
> #########
> #define the Weibull function
> #########
> Weibull<-function(tet1, tet2,x){
>   1-exp(-exp(tet1+tet2*log10(x)))
> }
>
> #########
> ##define the inverse of the Weibull function. put in effect and get
> concentration as output
> #########
> iWeibull<-function(tet1,tet2,x){
>   10^((log(-log(1-x))-tet1)/tet2)
> }
>
>
> #########
> #define the Logit function
> #########
> Logit<-function(tet1, tet2,x){
>   1/(1+exp(-tet1-tet2*log10(x)))
> }
>
> #########
> ##define the inverse of the Logit function
> #########
> iLogit<-function(tet1,tet2,x){
>   10^(-(log(1/x-1)+tet1)/tet2)
> }
>
> #########
> #define the Probit function
> #########
> Probit<-function(tet1, tet2, x){
>   pnorm(tet1+tet2*(log10(x)))
> }
>
> #########
> ##define the inverse of the Probit function
> #########
> iProbit<-function(tet1,tet2,x){
>   10^((qnorm(x)-tet1)/tet2)
> }
>
> #########
> # Establish data to fit
> # data given here are the data for Diuron from the example datasets
> #
> # Of course one could also import an external datafile via e.g.
> # read.table, read.csv functions
>
> ### example to choose a file for import with the read.csv function, where
> "," is seperating the columns,
> # header=TURE tells R that the first row contains the titles of the
> columns, and
> # stringsAsFactors = FALSE specify that the characters should not be
> converted to factors. For more info run ?read.csv
> effectdata<-read.csv(file.choose(),sep=",",stringsAsFactors = FALSE,header
> = TRUE)
> ?read.csv
> ###
>
> #########
> conc<-c(0,
>         0,
>         0,
>         0,
>         0,
>         0,
>         0.000135696,
>         0.000135696,
>         0.000135696,
>         0.000152971,
>         0.000152971,
>         0.000152971,
>         0.000172445,
>         0.000172445,
>         0.000172445,
>         0.000194398,
>         0.000194398,
>         0.000194398,
>         0.000219146,
>         0.000219146,
>         0.000219146,
>         0.000247044,
>         0.000247044,
>         0.000247044
> )
>
> effect<-c(5.342014355,
>           13.46249176,
>           -9.249022885,
>           -6.666486351,
>           1.00292152,
>           -3.891918402,
>           12.63136345,
>           -2.372582186,
>           8.601073479,
>           1.309926638,
>           0.772728968,
>           -7.01067202,
>           30.65306236,
>           28.10819667,
>           17.94875421,
>           73.00440617,
>           71.33593917,
>           62.23994217,
>           99.18897648,
>           99.05982514,
>           99.2325145,
>           100.2402872,
>           100.1276669,
>           100.1501468
> )
>
> #build input dataframe
> effectdata<-data.frame(conc,effect)
>
> #plot the data just to get a first glance of the data
> ggplot()+
>   geom_point(data=effectdata,aes(x=conc,y=effect), size = 5)+
>   scale_x_log10("conc")
>
>
> #delete controls
> effectdata_without_controls<-subset(effectdata,effectdata$conc>0)
>
>
> #save controls in a seperate dataframe called effectdata_control, which
> will be added to the ggplot in the end.
> #since you can't have 0 on a logscale we will give the controls a very very
> low concentration 0.00001 (not 100% correct, but will not be seen in the
> final plot)
> effectdata_controls<-subset(effectdata,effectdata$conc==0)
> effectdata_controls$conc<-effectdata_controls$conc+0.0001
>
>
>
> ########
> #fit data (without controls) using ordinary least squares
> #ordinary least squares is a method for estimating unknown parameters in
> statistics. The aim of the method is to minimize
> #the difference between the observed responses and the responses predicted
> by the approximation of the data.
> #nlsLM is from the minpack.lm package
> #nls=non-linear lest squares
> ########
> nlsLM_result_Weibull<-nlsLM(effect~Weibull(tet1,tet2,conc),
> data=effectdata_without_controls, start=list(tet1=1,tet2=1))
> nlsLM_result_Logit<-nlsLM(effect~Logit(tet1,tet2,conc),
> data=effectdata_without_controls, start=list(tet1=1,tet2=1))
> nlsLM_result_Probit<-nlsLM(effect~Probit(tet1,tet2,conc),
> data=effectdata_without_controls, start=list(tet1=1,tet2=1))
>
> Thanks a bunch!
>
> Best Regards,
> Belinda
> Belinda *Hum* Bei Lin (Ms)
> National University of Singapore
> (e): belindahbl at gmail.com
> (c): +6581136079
> <+65%208113%206079>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From e@@w|ek @end|ng |rom gm@||@com  Tue Oct  9 15:44:21 2018
From: e@@w|ek @end|ng |rom gm@||@com (Ek Esawi)
Date: Tue, 9 Oct 2018 09:44:21 -0400
Subject: [R] Reorder file names read by list.files function
Message-ID: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>

Hi All--

I used base R list.file function to read files from a directory. The
file names are months (April, August, etc). That's the system reads
them in alphabetical order., but i want to reordered them in calendar
order (January, February, ...December).. I thought i might be able to
do it via RegEx or possibly gtools package, I am wondering if there is
an easier way.

Thanks--EK

Example
path = "C:/Users/name/Downloads/MyFiles"
file.names <- dir(path, pattern =".PDF")

Example output
Output:
"February.PDF"  "January.PDF" "March.PDF"
Desired output
"January.PDF"  "February.PDF" "March.PDF"



From petr@p|k@| @end|ng |rom prechez@@cz  Tue Oct  9 16:07:52 2018
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Tue, 9 Oct 2018 14:07:52 +0000
Subject: [R] Reorder file names read by list.files function
In-Reply-To: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
References: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
Message-ID: <cdc15c6ec9a1464b830f72e5c01092c0@SRVEXCHCM1301.precheza.cz>

Hi

You could use brute force approach. Just print out "file.names" and estimate ordering vector.
In czech locale it is

oo <- c(6, 11, 1, 4, 5, 2, 3, 10, 12, 9, 7, 8)

In english locale it is different :-)

After that
file.names[oo]

should give you correct order of file names

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Ek Esawi
> Sent: Tuesday, October 9, 2018 3:44 PM
> To: r-help at r-project.org
> Subject: [R] Reorder file names read by list.files function
>
> Hi All--
>
> I used base R list.file function to read files from a directory. The file names are
> months (April, August, etc). That's the system reads them in alphabetical order.,
> but i want to reordered them in calendar order (January, February,
> ...December).. I thought i might be able to do it via RegEx or possibly gtools
> package, I am wondering if there is an easier way.
>
> Thanks--EK
>
> Example
> path = "C:/Users/name/Downloads/MyFiles"
> file.names <- dir(path, pattern =".PDF")
>
> Example output
> Output:
> "February.PDF"  "January.PDF" "March.PDF"
> Desired output
> "January.PDF"  "February.PDF" "March.PDF"
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information about processing and protection of business partner?s personal data are available on website: https://www.precheza.cz/en/personal-data-protection-principles/
D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any documents attached to it may be confidential and are subject to the legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Tue Oct  9 16:09:39 2018
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Tue, 9 Oct 2018 15:09:39 +0100
Subject: [R] Reorder file names read by list.files function
In-Reply-To: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
References: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
Message-ID: <391b9b99-17cf-fd1d-461d-e91dd7e8ab4c@sapo.pt>

Hello,

You can use the built in variable month.name to get the calendar order 
and match it with your file names.


i <- match(sub("\\.PDF", "", file.names), month.name)
file.names[i]
#[1] "January.PDF"  "February.PDF" "March.PDF"


Hope this helps,

Rui Barradas


?s 14:44 de 09/10/2018, Ek Esawi escreveu:
> Hi All--
> 
> I used base R list.file function to read files from a directory. The
> file names are months (April, August, etc). That's the system reads
> them in alphabetical order., but i want to reordered them in calendar
> order (January, February, ...December).. I thought i might be able to
> do it via RegEx or possibly gtools package, I am wondering if there is
> an easier way.
> 
> Thanks--EK
> 
> Example
> path = "C:/Users/name/Downloads/MyFiles"
> file.names <- dir(path, pattern =".PDF")
> 
> Example output
> Output:
> "February.PDF"  "January.PDF" "March.PDF"
> Desired output
> "January.PDF"  "February.PDF" "March.PDF"
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>



From m@rc@c@p@v@nn| @end|ng |rom goog|em@||@com  Tue Oct  9 14:24:05 2018
From: m@rc@c@p@v@nn| @end|ng |rom goog|em@||@com (Marc Capavanni)
Date: Tue, 9 Oct 2018 13:24:05 +0100
Subject: [R] Can I safely use an installed R folder in a portable manner?
Message-ID: <CANccLkyi1W7iMnyur60v0s85CL3EwgdLhJNNFpASRVgWxaRigQ@mail.gmail.com>

Hi there,

I'm currently using R on Windows as part of a piece of software and when
I'm providing it to users I have an application that runs the R
installation file with an INF file containing the following settings as to
not disrupt existing installs of R on their system.

[Setup]
Lang=en
Dir=.\R_Install\
Group=R
NoIcons=1
SetupType=user32
Components=main,i386
Tasks=
[R]
MDISDI=MDI
HelpStyle=HTML

The aim using this INF file is that the install should not touch the
registry, or add any icons/shortcuts anywhere.

This R install does not need to do much aside from provide the R
executables (particularly rscript.exe) for use, so I don't need it to be on
the PATH, for it to handle R files being double clicked by the user, etc.

However, I've recently found that taking the installed R folder and using
it on another PC without running the installer *seems* to work just fine
(at least for my use case of simply accessible the executables). This would
make "installing"/"uninstalling" easier as it would simply be a case of
copying the folder, and later on deleting it.

I was wondering if there is anything I'm missing here that would make this
not feasible.

Can I safely use an installed R folder, as a base for copying it to other
PCs in a portable manner?

Thanks,
Marc

	[[alternative HTML version deleted]]



From j@zh@o @end|ng |rom ye@h@net  Tue Oct  9 16:53:17 2018
From: j@zh@o @end|ng |rom ye@h@net (Jinsong Zhao)
Date: Tue, 9 Oct 2018 22:53:17 +0800 (CST)
Subject: [R] how to pass arguments to panel.cor in pairs()
Message-ID: <612e821a.3104.1665951614f.Coremail.jszhao@yeah.net>

Hi there,

Here is the panel.cor function from ?pairs:

     panel.cor <- function(x, y, digits = 2, prefix = "", cex.cor, ...)
     {
         usr <- par("usr"); on.exit(par(usr))
         par(usr = c(0, 1, 0, 1))
         r <- abs(cor(x, y))
         txt <- format(c(r, 0.123456789), digits = digits)[1]
         txt <- paste0(prefix, txt)
         if(missing(cex.cor)) cex.cor <- 0.8/strwidth(txt)
         text(0.5, 0.5, txt, cex = cex.cor * r)
     }

in the following code, pairs use the panel.cor defined above:

     pairs(USJudgeRatings, lower.panel = panel.smooth, upper.panel = panel.cor,
           gap=0, row1attop=FALSE)

I try to change prefix = "" to prefix = "r = ", something like:

     pairs(USJudgeRatings, lower.panel = panel.smooth, upper.panel = panel.cor, prefix = "r = ",
           gap=0, row1attop=FALSE)

I got lots of warnings.

How to change prefix to something else, but not change the defined panel.cor? Thanks!

Best,
Jinsong

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Oct  9 17:22:24 2018
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 9 Oct 2018 11:22:24 -0400
Subject: [R] how to pass arguments to panel.cor in pairs()
In-Reply-To: <612e821a.3104.1665951614f.Coremail.jszhao@yeah.net>
References: <612e821a.3104.1665951614f.Coremail.jszhao@yeah.net>
Message-ID: <cd53a455-141e-7555-d171-2db91cdd78dd@gmail.com>

On 09/10/2018 10:53 AM, Jinsong Zhao wrote:
> Hi there,
> 
> Here is the panel.cor function from ?pairs:
> 
>       panel.cor <- function(x, y, digits = 2, prefix = "", cex.cor, ...)
>       {
>           usr <- par("usr"); on.exit(par(usr))
>           par(usr = c(0, 1, 0, 1))
>           r <- abs(cor(x, y))
>           txt <- format(c(r, 0.123456789), digits = digits)[1]
>           txt <- paste0(prefix, txt)
>           if(missing(cex.cor)) cex.cor <- 0.8/strwidth(txt)
>           text(0.5, 0.5, txt, cex = cex.cor * r)
>       }
> 
> in the following code, pairs use the panel.cor defined above:
> 
>       pairs(USJudgeRatings, lower.panel = panel.smooth, upper.panel = panel.cor,
>             gap=0, row1attop=FALSE)
> 
> I try to change prefix = "" to prefix = "r = ", something like:
> 
>       pairs(USJudgeRatings, lower.panel = panel.smooth, upper.panel = panel.cor, prefix = "r = ",
>             gap=0, row1attop=FALSE)
> 
> I got lots of warnings.
> 
> How to change prefix to something else, but not change the defined panel.cor? Thanks!

Since panel.cor is not a base function, just a function defined in the 
example, you could just modify it.

If you want the regular one sometimes and a custom one other times,
you could make your own panel function:

   panel.cor2 <- function(...) panel.cor(..., prefix = "r = ")

Then use


   pairs(USJudgeRatings, lower.panel = panel.smooth, upper.panel = 
panel.cor2, gap=0, row1attop=FALSE)

Duncan Murdoch



From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Oct  9 17:29:56 2018
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 09 Oct 2018 08:29:56 -0700
Subject: [R] Reorder file names read by list.files function
In-Reply-To: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
References: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
Message-ID: <14B8D3CD-0D7C-48BF-A34E-3C45D448A961@dcn.davis.ca.us>

Instead of changing the order in which you read the files, perhaps your analysis will work if you sort the data after you read it in. This may require that you add the month names as a column in the data frames, or you may already have dates in the data that you could sort by.

One idea:

fnames <- paste0( month.name, ".PDF" )
resultdf <- do.call( rbind, lapply(fnames, function(fn) { read.csv( file.path( "datadir", fn ), as.is=TRUE ) } )

but that only works if there are exactly 12 files. If there could be fewer, perhaps:

fnames <- list.files( "datadir" )
sfnames <- fnames[ match( sub("\\.PDF", "", fnames ), month.name ) ]


On October 9, 2018 6:44:21 AM PDT, Ek Esawi <esawiek at gmail.com> wrote:
>Hi All--
>
>I used base R list.file function to read files from a directory. The
>file names are months (April, August, etc). That's the system reads
>them in alphabetical order., but i want to reordered them in calendar
>order (January, February, ...December).. I thought i might be able to
>do it via RegEx or possibly gtools package, I am wondering if there is
>an easier way.
>
>Thanks--EK
>
>Example
>path = "C:/Users/name/Downloads/MyFiles"
>file.names <- dir(path, pattern =".PDF")
>
>Example output
>Output:
>"February.PDF"  "January.PDF" "March.PDF"
>Desired output
>"January.PDF"  "February.PDF" "March.PDF"
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.



From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Oct  9 17:29:56 2018
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 09 Oct 2018 08:29:56 -0700
Subject: [R] Reorder file names read by list.files function
In-Reply-To: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
References: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
Message-ID: <221314A3-19DD-41D2-9802-8BA9C031DE6A@dcn.davis.ca.us>

Instead of changing the order in which you read the files, perhaps your analysis will work if you sort the data after you read it in. This may require that you add the month names as a column in the data frames, or you may already have dates in the data that you could sort by.

One idea:

fnames <- paste0( month.name, ".PDF" )
resultdf <- do.call( rbind, lapply(fnames, function(fn) { read.csv( file.path( "datadir", fn ), as.is=TRUE ) } )

but that only works if there are exactly 12 files. If there could be fewer, perhaps:

fnames <- list.files( "datadir" )
sfnames <- fnames[ match( sub("\\.PDF", "", fnames ), month.name ) ]


On October 9, 2018 6:44:21 AM PDT, Ek Esawi <esawiek at gmail.com> wrote:
>Hi All--
>
>I used base R list.file function to read files from a directory. The
>file names are months (April, August, etc). That's the system reads
>them in alphabetical order., but i want to reordered them in calendar
>order (January, February, ...December).. I thought i might be able to
>do it via RegEx or possibly gtools package, I am wondering if there is
>an easier way.
>
>Thanks--EK
>
>Example
>path = "C:/Users/name/Downloads/MyFiles"
>file.names <- dir(path, pattern =".PDF")
>
>Example output
>Output:
>"February.PDF"  "January.PDF" "March.PDF"
>Desired output
>"January.PDF"  "February.PDF" "March.PDF"
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.



From @tyen @end|ng |rom ntu@edu@tw  Tue Oct  9 18:17:28 2018
From: @tyen @end|ng |rom ntu@edu@tw (Steven Yen)
Date: Wed, 10 Oct 2018 00:17:28 +0800
Subject: [R] Graphing output
Message-ID: <4663accd-7495-bc0f-2b15-fc6f6371e5e5@ntu.edu.tw>

Is it possible to release the file destination after sending it to a pdf 
file?
Below, line 3 send the graph to a pdf file.
I like to release the devise so that I can see result produced by line 
for on the console (screen). Thanks.

x<-1:10
pdf("test1.pdf") # pdf {grDevices}
boxplot(x) # This goes to pdf file
boxplot(x) # Like this to go to console

-- 
styen at ntu.edu.tw  (S.T. Yen)


	[[alternative HTML version deleted]]



From wdun|@p @end|ng |rom t|bco@com  Tue Oct  9 18:19:43 2018
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Tue, 9 Oct 2018 09:19:43 -0700
Subject: [R] Graphing output
In-Reply-To: <4663accd-7495-bc0f-2b15-fc6f6371e5e5@ntu.edu.tw>
References: <4663accd-7495-bc0f-2b15-fc6f6371e5e5@ntu.edu.tw>
Message-ID: <CAF8bMcbhfpjfr6b6jUh=nQqxsLof0D0LtZxVnJj+T2bwf0c1qw@mail.gmail.com>

Look at dev.off() or possibly dev.set().

Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Tue, Oct 9, 2018 at 9:17 AM, Steven Yen <styen at ntu.edu.tw> wrote:

> Is it possible to release the file destination after sending it to a pdf
> file?
> Below, line 3 send the graph to a pdf file.
> I like to release the devise so that I can see result produced by line
> for on the console (screen). Thanks.
>
> x<-1:10
> pdf("test1.pdf") # pdf {grDevices}
> boxplot(x) # This goes to pdf file
> boxplot(x) # Like this to go to console
>
> --
> styen at ntu.edu.tw  (S.T. Yen)
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From r|der|ck@on @end|ng |rom gm@||@com  Tue Oct  9 19:14:54 2018
From: r|der|ck@on @end|ng |rom gm@||@com (Ryan Derickson)
Date: Tue, 9 Oct 2018 13:14:54 -0400
Subject: [R] Rounding behavior
Message-ID: <CALSCBYoOYa8qzhRCpj8-CYsDKCVu280PvoNvrpoDfKw0TSwQNg@mail.gmail.com>

Hello,

Apologies if this is a simple misunderstanding.

round((.575*100),0) gives 57
round(57.5,0) gives 58

Why?

Ryan Derickson
University of Cincinnati

On Tue, Oct 9, 2018, 10:08 AM PIKAL Petr <petr.pikal at precheza.cz> wrote:

> Hi
>
> You could use brute force approach. Just print out "file.names" and
> estimate ordering vector.
> In czech locale it is
>
> oo <- c(6, 11, 1, 4, 5, 2, 3, 10, 12, 9, 7, 8)
>
> In english locale it is different :-)
>
> After that
> file.names[oo]
>
> should give you correct order of file names
>
> Cheers
> Petr
>
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of Ek Esawi
> > Sent: Tuesday, October 9, 2018 3:44 PM
> > To: r-help at r-project.org
> > Subject: [R] Reorder file names read by list.files function
> >
> > Hi All--
> >
> > I used base R list.file function to read files from a directory. The
> file names are
> > months (April, August, etc). That's the system reads them in
> alphabetical order.,
> > but i want to reordered them in calendar order (January, February,
> > ...December).. I thought i might be able to do it via RegEx or possibly
> gtools
> > package, I am wondering if there is an easier way.
> >
> > Thanks--EK
> >
> > Example
> > path = "C:/Users/name/Downloads/MyFiles"
> > file.names <- dir(path, pattern =".PDF")
> >
> > Example output
> > Output:
> > "February.PDF"  "January.PDF" "March.PDF"
> > Desired output
> > "January.PDF"  "February.PDF" "March.PDF"
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch
> partner? PRECHEZA a.s. jsou zve?ejn?ny na:
> https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information
> about processing and protection of business partner?s personal data are
> available on website:
> https://www.precheza.cz/en/personal-data-protection-principles/
> D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou
> d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en?
> odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any
> documents attached to it may be confidential and are subject to the legally
> binding disclaimer: https://www.precheza.cz/en/01-disclaimer/
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From rmh @end|ng |rom temp|e@edu  Tue Oct  9 19:33:55 2018
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Tue, 9 Oct 2018 13:33:55 -0400
Subject: [R] Rounding behavior
In-Reply-To: <CALSCBYoOYa8qzhRCpj8-CYsDKCVu280PvoNvrpoDfKw0TSwQNg@mail.gmail.com>
References: <CALSCBYoOYa8qzhRCpj8-CYsDKCVu280PvoNvrpoDfKw0TSwQNg@mail.gmail.com>
Message-ID: <CAGx1TMAfwCrqP7qe8H17ArQU88KGg7jKuW=Hp679c0Aoq68DKw@mail.gmail.com>

FAQ 7.31
Open this file in your favorite text editor on your computer
system.file("../../doc/FAQ")

57.5 comes out even in binary, and .575 does not.

> print(.575*100, digits=17)
[1] 57.499999999999993
## The fraction is less than .5, hence it gets rounded down to 57
> print(57.5, digits=17)
[1] 57.5
## the fraction is exactly .5, hence gets rounded to the nearest even number 58
l

On Tue, Oct 9, 2018 at 1:14 PM, Ryan Derickson <rlderickson at gmail.com> wrote:
> Hello,
>
> Apologies if this is a simple misunderstanding.
>
> round((.575*100),0) gives 57
> round(57.5,0) gives 58
>
> Why?
>
> Ryan Derickson
> University of Cincinnati
>
> On Tue, Oct 9, 2018, 10:08 AM PIKAL Petr <petr.pikal at precheza.cz> wrote:
>
>> Hi
>>
>> You could use brute force approach. Just print out "file.names" and
>> estimate ordering vector.
>> In czech locale it is
>>
>> oo <- c(6, 11, 1, 4, 5, 2, 3, 10, 12, 9, 7, 8)
>>
>> In english locale it is different :-)
>>
>> After that
>> file.names[oo]
>>
>> should give you correct order of file names
>>
>> Cheers
>> Petr
>>
>> > -----Original Message-----
>> > From: R-help <r-help-bounces at r-project.org> On Behalf Of Ek Esawi
>> > Sent: Tuesday, October 9, 2018 3:44 PM
>> > To: r-help at r-project.org
>> > Subject: [R] Reorder file names read by list.files function
>> >
>> > Hi All--
>> >
>> > I used base R list.file function to read files from a directory. The
>> file names are
>> > months (April, August, etc). That's the system reads them in
>> alphabetical order.,
>> > but i want to reordered them in calendar order (January, February,
>> > ...December).. I thought i might be able to do it via RegEx or possibly
>> gtools
>> > package, I am wondering if there is an easier way.
>> >
>> > Thanks--EK
>> >
>> > Example
>> > path = "C:/Users/name/Downloads/MyFiles"
>> > file.names <- dir(path, pattern =".PDF")
>> >
>> > Example output
>> > Output:
>> > "February.PDF"  "January.PDF" "March.PDF"
>> > Desired output
>> > "January.PDF"  "February.PDF" "March.PDF"
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>> Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch
>> partner? PRECHEZA a.s. jsou zve?ejn?ny na:
>> https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information
>> about processing and protection of business partner?s personal data are
>> available on website:
>> https://www.precheza.cz/en/personal-data-protection-principles/
>> D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou
>> d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en?
>> odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any
>> documents attached to it may be confidential and are subject to the legally
>> binding disclaimer: https://www.precheza.cz/en/01-disclaimer/
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Oct  9 19:47:24 2018
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 09 Oct 2018 10:47:24 -0700
Subject: [R] Rounding behavior
In-Reply-To: <CALSCBYoOYa8qzhRCpj8-CYsDKCVu280PvoNvrpoDfKw0TSwQNg@mail.gmail.com>
References: <CALSCBYoOYa8qzhRCpj8-CYsDKCVu280PvoNvrpoDfKw0TSwQNg@mail.gmail.com>
Message-ID: <452CEA75-F7E1-4BDD-9CB0-95E738232011@dcn.davis.ca.us>

Floating point numbers are approximations in base 2, so any fractions not representing such numbers may round off in unexpected directions.

sprintf( "%22.20f", 0.5 )
sprintf( "%22.20f", 0.575 )

See R FAQ 7.31.

On October 9, 2018 10:14:54 AM PDT, Ryan Derickson <rlderickson at gmail.com> wrote:
>Hello,
>
>Apologies if this is a simple misunderstanding.
>
>round((.575*100),0) gives 57
>round(57.5,0) gives 58
>
>Why?
>
>Ryan Derickson
>University of Cincinnati
>
>On Tue, Oct 9, 2018, 10:08 AM PIKAL Petr <petr.pikal at precheza.cz>
>wrote:
>
>> Hi
>>
>> You could use brute force approach. Just print out "file.names" and
>> estimate ordering vector.
>> In czech locale it is
>>
>> oo <- c(6, 11, 1, 4, 5, 2, 3, 10, 12, 9, 7, 8)
>>
>> In english locale it is different :-)
>>
>> After that
>> file.names[oo]
>>
>> should give you correct order of file names
>>
>> Cheers
>> Petr
>>
>> > -----Original Message-----
>> > From: R-help <r-help-bounces at r-project.org> On Behalf Of Ek Esawi
>> > Sent: Tuesday, October 9, 2018 3:44 PM
>> > To: r-help at r-project.org
>> > Subject: [R] Reorder file names read by list.files function
>> >
>> > Hi All--
>> >
>> > I used base R list.file function to read files from a directory.
>The
>> file names are
>> > months (April, August, etc). That's the system reads them in
>> alphabetical order.,
>> > but i want to reordered them in calendar order (January, February,
>> > ...December).. I thought i might be able to do it via RegEx or
>possibly
>> gtools
>> > package, I am wondering if there is an easier way.
>> >
>> > Thanks--EK
>> >
>> > Example
>> > path = "C:/Users/name/Downloads/MyFiles"
>> > file.names <- dir(path, pattern =".PDF")
>> >
>> > Example output
>> > Output:
>> > "February.PDF"  "January.PDF" "March.PDF"
>> > Desired output
>> > "January.PDF"  "February.PDF" "March.PDF"
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>> Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj?
>obchodn?ch
>> partner? PRECHEZA a.s. jsou zve?ejn?ny na:
>> https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information
>> about processing and protection of business partner?s personal data
>are
>> available on website:
>> https://www.precheza.cz/en/personal-data-protection-principles/
>> D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou
>> d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en?
>> odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and
>any
>> documents attached to it may be confidential and are subject to the
>legally
>> binding disclaimer: https://www.precheza.cz/en/01-disclaimer/
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.



From beno|t@v@|||@nt @end|ng |rom no-|og@org  Tue Oct  9 20:00:04 2018
From: beno|t@v@|||@nt @end|ng |rom no-|og@org (Benoit Vaillant)
Date: Tue, 9 Oct 2018 20:00:04 +0200
Subject: [R] Rounding behavior
In-Reply-To: <CALSCBYoOYa8qzhRCpj8-CYsDKCVu280PvoNvrpoDfKw0TSwQNg@mail.gmail.com>
References: <CALSCBYoOYa8qzhRCpj8-CYsDKCVu280PvoNvrpoDfKw0TSwQNg@mail.gmail.com>
Message-ID: <20181009180004.wesdxscuayglpmby@auroras.fr>

Hello,

On Tue, Oct 09, 2018 at 01:14:54PM -0400, Ryan Derickson wrote:
> Apologies if this is a simple misunderstanding.

See for example:
https://cran.r-project.org/doc/FAQ/R-FAQ.html#Why-doesn_0027t-R-think-these-numbers-are-equal_003f

> round((.575*100),0) gives 57
> round(57.5,0) gives 58
> 
> Why?

Not R related at all.

$ python
Python 2.7.13 (default, Sep 26 2018, 18:42:22)
[GCC 6.3.0 20170516] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> round((.575*100),0)
57.0
>>> round(57.5,0)
58.0

Same "issue". :)

You'll need to dig into how numbers are floating numbers are
represented in a finite set.

Cheers,

-- 
Beno?t Vaillant

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 866 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20181009/0b862d59/attachment-0002.sig>

From r|der|ck@on @end|ng |rom gm@||@com  Tue Oct  9 20:43:45 2018
From: r|der|ck@on @end|ng |rom gm@||@com (Ryan Derickson)
Date: Tue, 9 Oct 2018 14:43:45 -0400
Subject: [R] Rounding behavior
In-Reply-To: <20181009180004.wesdxscuayglpmby@auroras.fr>
References: <CALSCBYoOYa8qzhRCpj8-CYsDKCVu280PvoNvrpoDfKw0TSwQNg@mail.gmail.com>
 <20181009180004.wesdxscuayglpmby@auroras.fr>
Message-ID: <CALSCBYp09TnaHRUPt0S99=d75UdLtg8xXYbTZzhidjuzCBPrPQ@mail.gmail.com>

I thought it might be a floating issue but didn't see the connection.
Thanks everyone.

On Tue, Oct 9, 2018, 2:00 PM Benoit Vaillant <benoit.vaillant at no-log.org>
wrote:

> Hello,
>
> On Tue, Oct 09, 2018 at 01:14:54PM -0400, Ryan Derickson wrote:
> > Apologies if this is a simple misunderstanding.
>
> See for example:
>
> https://cran.r-project.org/doc/FAQ/R-FAQ.html#Why-doesn_0027t-R-think-these-numbers-are-equal_003f
>
> > round((.575*100),0) gives 57
> > round(57.5,0) gives 58
> >
> > Why?
>
> Not R related at all.
>
> $ python
> Python 2.7.13 (default, Sep 26 2018, 18:42:22)
> [GCC 6.3.0 20170516] on linux2
> Type "help", "copyright", "credits" or "license" for more information.
> >>> round((.575*100),0)
> 57.0
> >>> round(57.5,0)
> 58.0
>
> Same "issue". :)
>
> You'll need to dig into how numbers are floating numbers are
> represented in a finite set.
>
> Cheers,
>
> --
> Beno?t Vaillant
>

	[[alternative HTML version deleted]]



From @b|r|edm@n @end|ng |rom ur@|nu@@edu  Tue Oct  9 20:00:12 2018
From: @b|r|edm@n @end|ng |rom ur@|nu@@edu (Friedman, Abigail)
Date: Tue, 9 Oct 2018 18:00:12 +0000
Subject: [R] Creating a data frame
Message-ID: <BN6PR22MB03402442F1CB307485018D7EC8E70@BN6PR22MB0340.namprd22.prod.outlook.com>

I keep getting error messages when running my data frame code and I cannot figure out what I am doing wrong.


	[[alternative HTML version deleted]]



From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Tue Oct  9 21:54:11 2018
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Tue, 9 Oct 2018 20:54:11 +0100
Subject: [R] Creating a data frame
In-Reply-To: <BN6PR22MB03402442F1CB307485018D7EC8E70@BN6PR22MB0340.namprd22.prod.outlook.com>
References: <BN6PR22MB03402442F1CB307485018D7EC8E70@BN6PR22MB0340.namprd22.prod.outlook.com>
Message-ID: <cb6fcf0b-f01b-2165-4cea-24cdb21e4267@sapo.pt>

Hello,

Well, you must post the said code (and data), how can we help you 
without seeing it?

In order to post data, post the output of dput(df) in your mail. Or, if 
it is too big with the output of dput(head(df, 20)). (df is the name of 
your dataset.)

Also, don't post in html, please, see the note at the bottom of this and 
all R-help e-mails.

Rui Barradas

?s 19:00 de 09/10/2018, Friedman, Abigail escreveu:
> I keep getting error messages when running my data frame code and I cannot figure out what I am doing wrong.
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>



From n@th@n@|@p@r@on@ @end|ng |rom gm@||@com  Tue Oct  9 21:46:03 2018
From: n@th@n@|@p@r@on@ @end|ng |rom gm@||@com (Nathan Parsons)
Date: Tue, 9 Oct 2018 12:46:03 -0700
Subject: [R] Creating a data frame
In-Reply-To: <BN6PR22MB03402442F1CB307485018D7EC8E70@BN6PR22MB0340.namprd22.prod.outlook.com>
References: <BN6PR22MB03402442F1CB307485018D7EC8E70@BN6PR22MB0340.namprd22.prod.outlook.com>
Message-ID: <8f8d9852-bcde-44d6-8bfa-b330ba02adc5@Spark>

Please post both the code you are using and the error, Abigail.

Nate
On Oct 9, 2018, 11:59 AM -0700, Friedman, Abigail <abfriedman at ursinus.edu>, wrote:
> I keep getting error messages when running my data frame code and I cannot figure out what I am doing wrong.
>
>
> [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]



From e@@w|ek @end|ng |rom gm@||@com  Tue Oct  9 22:38:42 2018
From: e@@w|ek @end|ng |rom gm@||@com (Ek Esawi)
Date: Tue, 9 Oct 2018 16:38:42 -0400
Subject: [R] Reorder file names read by list.files function
In-Reply-To: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
References: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
Message-ID: <CA+ZkTxuHUZGfpq=FioOo6bZGE=MGOCHxex0Y1ssWjhAsrT2kXw@mail.gmail.com>

Hi again,

I worked with RUi's idea of using the match function with month.name.
I got numerical values for months then i sorted and pasted the PDF
file extension. It gave me the file order i wanted, but now statements
8,9,&10 don't work and i kept getting an error which is listed below.
The dilemma is if i add full.names=TRUE in statement 6 then statements
9 and 10 don't produce what they did earlier. If i put
full.names=FALSE, then i am back to square 1.
Any idea is greatly appreciated.:

The code

1. nstall.packages("tabulizer")
2. installed.packages("stringr")
3. library(stringr)
4. library(tabulizer)
5. path = "C:/Users/namei/Documents/TextMining/S2017"
6. file.names <- dir(path, pattern =".PDF",full.names = TRUE)
7. file.names <- str_remove(file.names,"\\s[0-9][0-9]")
8. FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
9. FNs1 <- paste0(month.name[FNs],".","PDF")
10 A <- lapply(FNs1, function(i) extract_tables(i))

Output and the error message.

path = "C:/Users/eesawi/Documents/TextMining/S2017"
> file.names <- dir(path, pattern =".PDF",full.names = TRUE)
> file.names <- str_remove(file.names,"\\s[0-9][0-9]")
> FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
> FNs1 <- paste0(month.name[FNs],".","PDF")
> A <- lapply(FNs1, function(i) extract_tables(i))
 Show Traceback

 Error in normalizePath(path.expand(path), winslash, mustWork) :
  path[1]=".PDF": The system cannot find the file specified
On Tue, Oct 9, 2018 at 9:44 AM Ek Esawi <esawiek at gmail.com> wrote:
>
> Hi All--
>
> I used base R list.file function to read files from a directory. The
> file names are months (April, August, etc). That's the system reads
> them in alphabetical order., but i want to reordered them in calendar
> order (January, February, ...December).. I thought i might be able to
> do it via RegEx or possibly gtools package, I am wondering if there is
> an easier way.
>
> Thanks--EK
>
> Example
> path = "C:/Users/name/Downloads/MyFiles"
> file.names <- dir(path, pattern =".PDF")
>
> Example output
> Output:
> "February.PDF"  "January.PDF" "March.PDF"
> Desired output
> "January.PDF"  "February.PDF" "March.PDF"



From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Tue Oct  9 22:44:39 2018
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Tue, 9 Oct 2018 21:44:39 +0100
Subject: [R] Reorder file names read by list.files function
In-Reply-To: <CA+ZkTxuHUZGfpq=FioOo6bZGE=MGOCHxex0Y1ssWjhAsrT2kXw@mail.gmail.com>
References: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
 <CA+ZkTxuHUZGfpq=FioOo6bZGE=MGOCHxex0Y1ssWjhAsrT2kXw@mail.gmail.com>
Message-ID: <8c9034c0-5d40-3d6d-bd7d-97da8acab5ed@sapo.pt>

Hello,

I would do something along the lines of

# work in the directory where the files are located
old_dir <- setwd(path)
file.names <- list.files(pattern = "\\.PDF")

[...]

# When you are done reset your wd
setwd(old_dir)


Hope this helps,

Rui Barradas

?s 21:38 de 09/10/2018, Ek Esawi escreveu:
> Hi again,
> 
> I worked with RUi's idea of using the match function with month.name.
> I got numerical values for months then i sorted and pasted the PDF
> file extension. It gave me the file order i wanted, but now statements
> 8,9,&10 don't work and i kept getting an error which is listed below.
> The dilemma is if i add full.names=TRUE in statement 6 then statements
> 9 and 10 don't produce what they did earlier. If i put
> full.names=FALSE, then i am back to square 1.
> Any idea is greatly appreciated.:
> 
> The code
> 
> 1. nstall.packages("tabulizer")
> 2. installed.packages("stringr")
> 3. library(stringr)
> 4. library(tabulizer)
> 5. path = "C:/Users/namei/Documents/TextMining/S2017"
> 6. file.names <- dir(path, pattern =".PDF",full.names = TRUE)
> 7. file.names <- str_remove(file.names,"\\s[0-9][0-9]")
> 8. FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
> 9. FNs1 <- paste0(month.name[FNs],".","PDF")
> 10 A <- lapply(FNs1, function(i) extract_tables(i))
> 
> Output and the error message.
> 
> path = "C:/Users/eesawi/Documents/TextMining/S2017"
>> file.names <- dir(path, pattern =".PDF",full.names = TRUE)
>> file.names <- str_remove(file.names,"\\s[0-9][0-9]")
>> FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
>> FNs1 <- paste0(month.name[FNs],".","PDF")
>> A <- lapply(FNs1, function(i) extract_tables(i))
>   Show Traceback
> 
>   Error in normalizePath(path.expand(path), winslash, mustWork) :
>    path[1]=".PDF": The system cannot find the file specified
> On Tue, Oct 9, 2018 at 9:44 AM Ek Esawi <esawiek at gmail.com> wrote:
>>
>> Hi All--
>>
>> I used base R list.file function to read files from a directory. The
>> file names are months (April, August, etc). That's the system reads
>> them in alphabetical order., but i want to reordered them in calendar
>> order (January, February, ...December).. I thought i might be able to
>> do it via RegEx or possibly gtools package, I am wondering if there is
>> an easier way.
>>
>> Thanks--EK
>>
>> Example
>> path = "C:/Users/name/Downloads/MyFiles"
>> file.names <- dir(path, pattern =".PDF")
>>
>> Example output
>> Output:
>> "February.PDF"  "January.PDF" "March.PDF"
>> Desired output
>> "January.PDF"  "February.PDF" "March.PDF"
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>



From wdun|@p @end|ng |rom t|bco@com  Tue Oct  9 22:47:31 2018
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Tue, 9 Oct 2018 13:47:31 -0700
Subject: [R] Reorder file names read by list.files function
In-Reply-To: <CA+ZkTxuHUZGfpq=FioOo6bZGE=MGOCHxex0Y1ssWjhAsrT2kXw@mail.gmail.com>
References: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
 <CA+ZkTxuHUZGfpq=FioOo6bZGE=MGOCHxex0Y1ssWjhAsrT2kXw@mail.gmail.com>
Message-ID: <CAF8bMcZEx5=NCSj9_t6ztYaXW3ywUAFuja8d6aqid3A8aeojJg@mail.gmail.com>

Use basename(filename) to remove the lead parts of the full path to the
file.  E.g., replace
   FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
with (the untested)
    FNs <- sort(match(sub("\\.PDF", "", basename(file.names)), month.name))

Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Tue, Oct 9, 2018 at 1:38 PM, Ek Esawi <esawiek at gmail.com> wrote:

> Hi again,
>
> I worked with RUi's idea of using the match function with month.name.
> I got numerical values for months then i sorted and pasted the PDF
> file extension. It gave me the file order i wanted, but now statements
> 8,9,&10 don't work and i kept getting an error which is listed below.
> The dilemma is if i add full.names=TRUE in statement 6 then statements
> 9 and 10 don't produce what they did earlier. If i put
> full.names=FALSE, then i am back to square 1.
> Any idea is greatly appreciated.:
>
> The code
>
> 1. nstall.packages("tabulizer")
> 2. installed.packages("stringr")
> 3. library(stringr)
> 4. library(tabulizer)
> 5. path = "C:/Users/namei/Documents/TextMining/S2017"
> 6. file.names <- dir(path, pattern =".PDF",full.names = TRUE)
> 7. file.names <- str_remove(file.names,"\\s[0-9][0-9]")
> 8. FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
> 9. FNs1 <- paste0(month.name[FNs],".","PDF")
> 10 A <- lapply(FNs1, function(i) extract_tables(i))
>
> Output and the error message.
>
> path = "C:/Users/eesawi/Documents/TextMining/S2017"
> > file.names <- dir(path, pattern =".PDF",full.names = TRUE)
> > file.names <- str_remove(file.names,"\\s[0-9][0-9]")
> > FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
> > FNs1 <- paste0(month.name[FNs],".","PDF")
> > A <- lapply(FNs1, function(i) extract_tables(i))
>  Show Traceback
>
>  Error in normalizePath(path.expand(path), winslash, mustWork) :
>   path[1]=".PDF": The system cannot find the file specified
> On Tue, Oct 9, 2018 at 9:44 AM Ek Esawi <esawiek at gmail.com> wrote:
> >
> > Hi All--
> >
> > I used base R list.file function to read files from a directory. The
> > file names are months (April, August, etc). That's the system reads
> > them in alphabetical order., but i want to reordered them in calendar
> > order (January, February, ...December).. I thought i might be able to
> > do it via RegEx or possibly gtools package, I am wondering if there is
> > an easier way.
> >
> > Thanks--EK
> >
> > Example
> > path = "C:/Users/name/Downloads/MyFiles"
> > file.names <- dir(path, pattern =".PDF")
> >
> > Example output
> > Output:
> > "February.PDF"  "January.PDF" "March.PDF"
> > Desired output
> > "January.PDF"  "February.PDF" "March.PDF"
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From e@@w|ek @end|ng |rom gm@||@com  Tue Oct  9 22:50:18 2018
From: e@@w|ek @end|ng |rom gm@||@com (Ek Esawi)
Date: Tue, 9 Oct 2018 16:50:18 -0400
Subject: [R] Reorder file names read by list.files function
In-Reply-To: <221314A3-19DD-41D2-9802-8BA9C031DE6A@dcn.davis.ca.us>
References: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
 <221314A3-19DD-41D2-9802-8BA9C031DE6A@dcn.davis.ca.us>
Message-ID: <CA+ZkTxvNmsEM+5U5ZqyRdBY4usNSD6CwpC7QUVErvV_1-b-uZA@mail.gmail.com>

Thank you Jeff. It is an excellent idea and i might try it out if
nothing works out. And i  don't have 12 files on each sub directory;

EK
On Tue, Oct 9, 2018 at 11:30 AM Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>
> Instead of changing the order in which you read the files, perhaps your analysis will work if you sort the data after you read it in. This may require that you add the month names as a column in the data frames, or you may already have dates in the data that you could sort by.
>
> One idea:
>
> fnames <- paste0( month.name, ".PDF" )
> resultdf <- do.call( rbind, lapply(fnames, function(fn) { read.csv( file.path( "datadir", fn ), as.is=TRUE ) } )
>
> but that only works if there are exactly 12 files. If there could be fewer, perhaps:
>
> fnames <- list.files( "datadir" )
> sfnames <- fnames[ match( sub("\\.PDF", "", fnames ), month.name ) ]
>
>
> On October 9, 2018 6:44:21 AM PDT, Ek Esawi <esawiek at gmail.com> wrote:
> >Hi All--
> >
> >I used base R list.file function to read files from a directory. The
> >file names are months (April, August, etc). That's the system reads
> >them in alphabetical order., but i want to reordered them in calendar
> >order (January, February, ...December).. I thought i might be able to
> >do it via RegEx or possibly gtools package, I am wondering if there is
> >an easier way.
> >
> >Thanks--EK
> >
> >Example
> >path = "C:/Users/name/Downloads/MyFiles"
> >file.names <- dir(path, pattern =".PDF")
> >
> >Example output
> >Output:
> >"February.PDF"  "January.PDF" "March.PDF"
> >Desired output
> >"January.PDF"  "February.PDF" "March.PDF"
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my phone. Please excuse my brevity.



From drj|m|emon @end|ng |rom gm@||@com  Tue Oct  9 23:13:40 2018
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Wed, 10 Oct 2018 08:13:40 +1100
Subject: [R] 
 Can I safely use an installed R folder in a portable manner?
In-Reply-To: <CANccLkyi1W7iMnyur60v0s85CL3EwgdLhJNNFpASRVgWxaRigQ@mail.gmail.com>
References: <CANccLkyi1W7iMnyur60v0s85CL3EwgdLhJNNFpASRVgWxaRigQ@mail.gmail.com>
Message-ID: <CA+8X3fX+HtM7_rfnffypyyY8t8eHRySeDg_u92tvTAjB=bONSw@mail.gmail.com>

Hi Marc,
I do this quite often with Tcl-Tk. All you have to do is make sure
that the PATH contains the correct location for the R executable if
you don't specify it within your program.

Jim
On Wed, Oct 10, 2018 at 1:58 AM Marc Capavanni via R-help
<r-help at r-project.org> wrote:
>
> Hi there,
>
> I'm currently using R on Windows as part of a piece of software and when
> I'm providing it to users I have an application that runs the R
> installation file with an INF file containing the following settings as to
> not disrupt existing installs of R on their system.
>
> [Setup]
> Lang=en
> Dir=.\R_Install\
> Group=R
> NoIcons=1
> SetupType=user32
> Components=main,i386
> Tasks=
> [R]
> MDISDI=MDI
> HelpStyle=HTML
>
> The aim using this INF file is that the install should not touch the
> registry, or add any icons/shortcuts anywhere.
>
> This R install does not need to do much aside from provide the R
> executables (particularly rscript.exe) for use, so I don't need it to be on
> the PATH, for it to handle R files being double clicked by the user, etc.
>
> However, I've recently found that taking the installed R folder and using
> it on another PC without running the installer *seems* to work just fine
> (at least for my use case of simply accessible the executables). This would
> make "installing"/"uninstalling" easier as it would simply be a case of
> copying the folder, and later on deleting it.
>
> I was wondering if there is anything I'm missing here that would make this
> not feasible.
>
> Can I safely use an installed R folder, as a base for copying it to other
> PCs in a portable manner?
>
> Thanks,
> Marc
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Oct  9 23:35:00 2018
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 09 Oct 2018 14:35:00 -0700
Subject: [R] 
 Can I safely use an installed R folder in a portable manner?
In-Reply-To: <CA+8X3fX+HtM7_rfnffypyyY8t8eHRySeDg_u92tvTAjB=bONSw@mail.gmail.com>
References: <CANccLkyi1W7iMnyur60v0s85CL3EwgdLhJNNFpASRVgWxaRigQ@mail.gmail.com>
 <CA+8X3fX+HtM7_rfnffypyyY8t8eHRySeDg_u92tvTAjB=bONSw@mail.gmail.com>
Message-ID: <F7B83799-D6E6-4D36-B0B3-39A6D2412B8E@dcn.davis.ca.us>

If you don't want to disturb the existing install of R then you might want to take some effort to bring your library with you and avoid letting your copy of R mess with the default user library. Packrat may help with this?

On October 9, 2018 2:13:40 PM PDT, Jim Lemon <drjimlemon at gmail.com> wrote:
>Hi Marc,
>I do this quite often with Tcl-Tk. All you have to do is make sure
>that the PATH contains the correct location for the R executable if
>you don't specify it within your program.
>
>Jim
>On Wed, Oct 10, 2018 at 1:58 AM Marc Capavanni via R-help
><r-help at r-project.org> wrote:
>>
>> Hi there,
>>
>> I'm currently using R on Windows as part of a piece of software and
>when
>> I'm providing it to users I have an application that runs the R
>> installation file with an INF file containing the following settings
>as to
>> not disrupt existing installs of R on their system.
>>
>> [Setup]
>> Lang=en
>> Dir=.\R_Install\
>> Group=R
>> NoIcons=1
>> SetupType=user32
>> Components=main,i386
>> Tasks=
>> [R]
>> MDISDI=MDI
>> HelpStyle=HTML
>>
>> The aim using this INF file is that the install should not touch the
>> registry, or add any icons/shortcuts anywhere.
>>
>> This R install does not need to do much aside from provide the R
>> executables (particularly rscript.exe) for use, so I don't need it to
>be on
>> the PATH, for it to handle R files being double clicked by the user,
>etc.
>>
>> However, I've recently found that taking the installed R folder and
>using
>> it on another PC without running the installer *seems* to work just
>fine
>> (at least for my use case of simply accessible the executables). This
>would
>> make "installing"/"uninstalling" easier as it would simply be a case
>of
>> copying the folder, and later on deleting it.
>>
>> I was wondering if there is anything I'm missing here that would make
>this
>> not feasible.
>>
>> Can I safely use an installed R folder, as a base for copying it to
>other
>> PCs in a portable manner?
>>
>> Thanks,
>> Marc
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.



From mcc3qb @end|ng |rom v|rg|n|@@edu  Wed Oct 10 00:04:22 2018
From: mcc3qb @end|ng |rom v|rg|n|@@edu (matthew campbell)
Date: Tue, 9 Oct 2018 18:04:22 -0400
Subject: [R] Defining Variables from a Matrix for 10-Fold Cross Validation
Message-ID: <CAGKPD0EP9=sLtdB5VF9iF5UyPFzRwwkdq4HSVS+aUFBfD=ymLQ@mail.gmail.com>

Good afternoon,

I am trying to run a 10-fold CV, using a matrix as my data set.
Essentially, I want "y" to be the first column of the matrix, and my "x" to
be all remaining columns (2-257). I've posted some of the code I used
below, and the data set (called "zip.train") is in the "ElemStatLearn"
package. The error message is highlighted in red, and the corresponding
section of code is bolded. (I am not concerned with the warning message,
just the error message).

The issue I am experiencing is the error message below the code: I haven't
come across that specific message before, and am not exactly sure how to
interpret its meaning. What exactly is this error message trying to tell
me?  Any suggestions or insights are appreciated!

Thank you all,

Matthew Campbell


> library (ElemStatLearn)
> library(kknn)
> data(zip.train)
> train=zip.train[which(zip.train[,1] %in% c(2,3)),]
> test=zip.test[which(zip.test[,1] %in% c(2,3)),]
> nfold = 10
> infold = sample(rep(1:10, length.out = (x)))
Warning message:
In rep(1:10, length.out = (x)) :
  first element used of 'length.out' argument
>
*> mydata = data.frame(x = train[ , c(2,257)] , y = train[ , 1])*
>
> K = 20
> errorMatrix = matrix(NA, K, 10)
>
> for (l in nfold)
+ {
+   for (k in 1:20)
+   {
+     knn.fit = kknn(y ~ x, train = mydata[infold != l, ], test =
mydata[infold == l, ], k = k)
+     errorMatrix[k, l] = mean((knn.fit$fitted.values - mydata$y[infold ==
l])^2)
+   }
+ }
Error in model.frame.default(formula, data = train) :
  variable lengths differ (found for 'x')

	[[alternative HTML version deleted]]



From dw|n@em|u@ @end|ng |rom comc@@t@net  Wed Oct 10 00:34:15 2018
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Tue, 9 Oct 2018 15:34:15 -0700
Subject: [R] 
 Defining Variables from a Matrix for 10-Fold Cross Validation
In-Reply-To: <CAGKPD0EP9=sLtdB5VF9iF5UyPFzRwwkdq4HSVS+aUFBfD=ymLQ@mail.gmail.com>
References: <CAGKPD0EP9=sLtdB5VF9iF5UyPFzRwwkdq4HSVS+aUFBfD=ymLQ@mail.gmail.com>
Message-ID: <85DC895F-BEA2-4E47-ACC1-49A5C350B2D8@comcast.net>


> On Oct 9, 2018, at 3:04 PM, matthew campbell <mcc3qb at virginia.edu> wrote:
> 
> Good afternoon,
> 
> I am trying to run a 10-fold CV, using a matrix as my data set.
> Essentially, I want "y" to be the first column of the matrix, and my "x" to
> be all remaining columns (2-257). I've posted some of the code I used
> below, and the data set (called "zip.train") is in the "ElemStatLearn"
> package. The error message is highlighted in red, and the corresponding
> section of code is bolded. (I am not concerned with the warning message,
> just the error message).
> 
> The issue I am experiencing is the error message below the code: I haven't
> come across that specific message before, and am not exactly sure how to
> interpret its meaning. What exactly is this error message trying to tell
> me?  Any suggestions or insights are appreciated!
> 
> Thank you all,
> 
> Matthew Campbell
> 
> 
>> library (ElemStatLearn)
>> library(kknn)
>> data(zip.train)
>> train=zip.train[which(zip.train[,1] %in% c(2,3)),]
>> test=zip.test[which(zip.test[,1] %in% c(2,3)),]
>> nfold = 10
>> infold = sample(rep(1:10, length.out = (x)))

I don't see a definition for x.

> Warning message:
> In rep(1:10, length.out = (x)) :
>  first element used of 'length.out' argument

But apparently it las a length greater than 1 and your are getting a sample whose length is specified by the first element of x.


>> 
> *> mydata = data.frame(x = train[ , c(2,257)] , y = train[ , 1])*
>> 
>> K = 20
>> errorMatrix = matrix(NA, K, 10)
>> 
>> for (l in nfold)
> + {
> +   for (k in 1:20)
> +   {
> +     knn.fit = kknn(y ~ x, train = mydata[infold != l, ], test =
> mydata[infold == l, ], k = k)
> +     errorMatrix[k, l] = mean((knn.fit$fitted.values - mydata$y[infold ==
> l])^2)
> +   }
> + }
> Error in model.frame.default(formula, data = train) :
>  variable lengths differ (found for 'x')

So the warning above is probably a great clue to the source of this error.

Morale of the tale: Always read the warnings, even if your code proceeds.

> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

David Winsemius
Alameda, CA, USA

"The whole problem with the world is that fools and fanatics are always so certain of themselves, and wiser people so full of doubts." - Bertrand Russell



From j@zh@o @end|ng |rom ye@h@net  Wed Oct 10 02:40:16 2018
From: j@zh@o @end|ng |rom ye@h@net (Jinsong Zhao)
Date: Wed, 10 Oct 2018 08:40:16 +0800
Subject: [R] how to pass arguments to panel.cor in pairs()
In-Reply-To: <cd53a455-141e-7555-d171-2db91cdd78dd@gmail.com>
References: <612e821a.3104.1665951614f.Coremail.jszhao@yeah.net>
 <cd53a455-141e-7555-d171-2db91cdd78dd@gmail.com>
Message-ID: <fd159d42-d99d-2513-38eb-a94b88d74b43@yeah.net>

On 2018/10/9 23:22, Duncan Murdoch wrote:
> On 09/10/2018 10:53 AM, Jinsong Zhao wrote:
>> Hi there,
>>
>> Here is the panel.cor function from ?pairs:
>>
>> ????? panel.cor <- function(x, y, digits = 2, prefix = "", cex.cor, ...)
>> ????? {
>> ????????? usr <- par("usr"); on.exit(par(usr))
>> ????????? par(usr = c(0, 1, 0, 1))
>> ????????? r <- abs(cor(x, y))
>> ????????? txt <- format(c(r, 0.123456789), digits = digits)[1]
>> ????????? txt <- paste0(prefix, txt)
>> ????????? if(missing(cex.cor)) cex.cor <- 0.8/strwidth(txt)
>> ????????? text(0.5, 0.5, txt, cex = cex.cor * r)
>> ????? }
>>
>> in the following code, pairs use the panel.cor defined above:
>>
>> ????? pairs(USJudgeRatings, lower.panel = panel.smooth, upper.panel = 
>> panel.cor,
>> ??????????? gap=0, row1attop=FALSE)
>>
>> I try to change prefix = "" to prefix = "r = ", something like:
>>
>> ????? pairs(USJudgeRatings, lower.panel = panel.smooth, upper.panel = 
>> panel.cor, prefix = "r = ",
>> ??????????? gap=0, row1attop=FALSE)
>>
>> I got lots of warnings.
>>
>> How to change prefix to something else, but not change the defined 
>> panel.cor? Thanks!
> 
> Since panel.cor is not a base function, just a function defined in the 
> example, you could just modify it.
> 
> If you want the regular one sometimes and a custom one other times,
> you could make your own panel function:
> 
>  ? panel.cor2 <- function(...) panel.cor(..., prefix = "r = ")
> 
> Then use
> 
> 
>  ? pairs(USJudgeRatings, lower.panel = panel.smooth, upper.panel = 
> panel.cor2, gap=0, row1attop=FALSE)
> 

That is what I want to know. Thanks a lot.

Best,
Jinsong



From m@@ternh@ttt @end|ng |rom gm@||@com  Wed Oct 10 01:47:06 2018
From: m@@ternh@ttt @end|ng |rom gm@||@com (Thanh Tran)
Date: Wed, 10 Oct 2018 08:47:06 +0900
Subject: [R] ANOVA in R
Message-ID: <CAHjanSAzyPQ8ANKLEUxzSpy0iESD+eikSFgsOo6oU+ytV8-5mg@mail.gmail.com>

Hi eveyone,
I'm studying about variance (ANOVA) in R and have some questions to share.
I read an article investigating the effect of factors (temperature, Asphalt
content, Air voids, and sample thickness) on the hardness of asphalt
concrete in the tensile test (abbreviated as Kic). Each condition was
repeated four times (4 samples). In the paper, the authors used MINITAB to
analyze Anova. The authors use "adjusted sums of squares" calculate the
p-value I try to use ANOVA in R to analyze this data and get the result as
shown in Figure 4. The results are different from the results in the
article. Some papers say that in R, the default for ANOVA analysis is to
use "sequential sums of squares" to calculate the p-value.
So please help the following two questions: 1 / Introduction to code in R
for anova analysis uses "adjusted sums of squares". The main part of the
command in R / myself is as follows: > Tem = as.factor (temperature) > Ac =
as.factor (AC) > Av = as.factor (AV) > Thick = as.factor (Thickness) >
Twoway = lm (KIC ~ Tem + Ac + Av + Thick + Stamp + Ac + Stamp + Av + Stamp
+ Thick + Ac * Av + Ac * Thick + Av * Thick) > anova (twoway) 2/ When to
use "sequential sums of squares" and when to use "adjusted sums of
squares". Some papers recommend using the "oa.design
<https://www.youtube.com/redirect?q=http%3A%2F%2Foa.design%2F&redir_token=AaSAPDY-5UAsoHxN6BdwfyIJ7R98MTUzOTIxNDg2OUAxNTM5MTI4NDY5&event=comments>"
function in R to check for "orthogonal" designs. If not, use "adjusted sums
of squares". I am still vague about this command, so look forward to
everyone's suggestion. If you could answer all two of my questions, I would
be most grateful. Ps: I have added a CSV file and the paper for practicing
R. http://www.mediafire.com/file/e5oe54p2c2wd4bc/Saha+research.csv
http://www.mediafire.com/file/39jlf9h539y9mdz/Homothetic+behaviour+investigation+on+fracture+toughness+of+asphalt+mixtures+using+semicircular+bending+test.pdf

	[[alternative HTML version deleted]]



From em@||2mrn@ @end|ng |rom gm@||@com  Wed Oct 10 02:41:14 2018
From: em@||2mrn@ @end|ng |rom gm@||@com (A DNA RNA)
Date: Tue, 9 Oct 2018 20:41:14 -0400
Subject: [R] cluster samples using self organizing map in R
Message-ID: <CAOQGvC6abdJ=vcT0iW+ngHiPdYmWET4GCn389YnVQMnjODvr=g@mail.gmail.com>

Dear All,

Who can I use Self Organizing Map (SOM) results to cluster samples? I have
tried following but this gives me only the clustering of grids, while I
want to cluster (150) samples:

library(kohonen)
iris.sc <- scale(iris[, 1:4])
iris.som <- som(iris.sc, grid=somgrid(xdim = 3, ydim=3, topo="hexagonal"),
               rlen=100, alpha=c(0.05,0.01))
##hierarchical clustering
groups <- 3
iris.hc <- cutree(hclust(dist(iris.som$codes[[1]])), groups)
iris.hc
#V1 V2 V3 V4 V5 V6 V7 V8 V9
#1  1  2  1  1  2  3  3  2


Can anyone help me with this please?
--
Tina

	[[alternative HTML version deleted]]



From p@u|john32 @end|ng |rom gm@||@com  Wed Oct 10 11:37:46 2018
From: p@u|john32 @end|ng |rom gm@||@com (Paul Johnson)
Date: Wed, 10 Oct 2018 04:37:46 -0500
Subject: [R] ANOVA in R
In-Reply-To: <CAHjanSAzyPQ8ANKLEUxzSpy0iESD+eikSFgsOo6oU+ytV8-5mg@mail.gmail.com>
References: <CAHjanSAzyPQ8ANKLEUxzSpy0iESD+eikSFgsOo6oU+ytV8-5mg@mail.gmail.com>
Message-ID: <CAErODj8u9hLpW_x1D2YZvsXDMoNJ=czX5SvBd2ZzQwfsnWT5CA@mail.gmail.com>

We cannot read your message. Should post pure text, not html. Hm, my phone
now may post html, must try to stop. Your R code not legible. It seems to
be output? Lines all run together. I tried find articles you mention, but
"not found" resulted.

You should use aov() for fitting, then get post hoc comparisons.

In car package, Anova function will help. I may teach Anova soon, we'll see
if I have better answer then.

Paul Johnson
University of Kansas

On Wed, Oct 10, 2018, 1:14 AM Thanh Tran <masternhattt at gmail.com> wrote:

> Hi eveyone,
> I'm studying about variance (ANOVA) in R and have some questions to share.
> I read an article investigating the effect of factors (temperature, Asphalt
> content, Air voids, and sample thickness) on the hardness of asphalt
> concrete in the tensile test (abbreviated as Kic). Each condition was
> repeated four times (4 samples). In the paper, the authors used MINITAB to
> analyze Anova. The authors use "adjusted sums of squares" calculate the
> p-value I try to use ANOVA in R to analyze this data and get the result as
> shown in Figure 4. The results are different from the results in the
> article. Some papers say that in R, the default for ANOVA analysis is to
> use "sequential sums of squares" to calculate the p-value.
> So please help the following two questions: 1 / Introduction to code in R
> for anova analysis uses "adjusted sums of squares". The main part of the
> command in R / myself is as follows: > Tem = as.factor (temperature) > Ac =
> as.factor (AC) > Av = as.factor (AV) > Thick = as.factor (Thickness) >
> Twoway = lm (KIC ~ Tem + Ac + Av + Thick + Stamp + Ac + Stamp + Av + Stamp
> + Thick + Ac * Av + Ac * Thick + Av * Thick) > anova (twoway) 2/ When to
> use "sequential sums of squares" and when to use "adjusted sums of
> squares". Some papers recommend using the "oa.design
> <
> https://www.youtube.com/redirect?q=http%3A%2F%2Foa.design%2F&redir_token=AaSAPDY-5UAsoHxN6BdwfyIJ7R98MTUzOTIxNDg2OUAxNTM5MTI4NDY5&event=comments
> >"
> function in R to check for "orthogonal" designs. If not, use "adjusted sums
> of squares". I am still vague about this command, so look forward to
> everyone's suggestion. If you could answer all two of my questions, I would
> be most grateful. Ps: I have added a CSV file and the paper for practicing
> R. http://www.mediafire.com/file/e5oe54p2c2wd4bc/Saha+research.csv
>
> http://www.mediafire.com/file/39jlf9h539y9mdz/Homothetic+behaviour+investigation+on+fracture+toughness+of+asphalt+mixtures+using+semicircular+bending+test.pdf
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From @ubh@m|tr@@p@tr@ @end|ng |rom gm@||@com  Wed Oct 10 13:07:06 2018
From: @ubh@m|tr@@p@tr@ @end|ng |rom gm@||@com (Subhamitra Patra)
Date: Wed, 10 Oct 2018 16:37:06 +0530
Subject: [R] [R studio] Plotting line chart for the obtained entropy values
Message-ID: <CAOFE=kPiyQt6Gi+SMMXBFiNS2OC1j1Oqqvd2K5u4edXGpCi8bA@mail.gmail.com>

Hello friends,

I have obtained the approximate entropy values for the multiple series.
But, after that, I am unable to draw a line chart for the obtained
approximate entropy values. Please help me to draw a line chart for the
obtained entropy values. For your reference, I am writing my code here so
that it will be easier to suggest the code for the plotting of line chart.

     N<-nrow(ts)
r<-matrix(0, nrow = N, ncol = 1)
for (i in 1:N){
     r[i]<-approx_entropy(ts[,i], edim = 2, r = 0.2*sd(ts[,i]), elag = 1)
}


Hence, I need to plot the obtained entropy values that stored in r folder.

A great help will be highly appreciated.

Thanks in advance.

-- 
*Best Regards,*
*Subhamitra Patra*
*Phd. Research Scholar*
*Department of Humanities and Social Sciences*
*Indian Institute of Technology, Kharagpur*
*INDIA*

	[[alternative HTML version deleted]]



From o||v|er_g|v@ud@n @end|ng |rom hotm@||@com  Wed Oct 10 15:53:00 2018
From: o||v|er_g|v@ud@n @end|ng |rom hotm@||@com (Olivier GIVAUDAN)
Date: Wed, 10 Oct 2018 13:53:00 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <CAP01uR=FnwBZ=_iet5q0_tZQS4WZ0MjiiY_-kFr_KL9GFwL=ww@mail.gmail.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <CAP01uR=FnwBZ=_iet5q0_tZQS4WZ0MjiiY_-kFr_KL9GFwL=ww@mail.gmail.com>
Message-ID: <VI1PR0202MB335744BC531D2F410931FEBFF5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>

Hi Gabor,
?

  1.  By definition the relative path (I'm excluding the absolute path solution for obvious reasons) depends on the current working directory: What if my R script is not located along this current working directory? It won't work.?
  2.  What should I write as an option in this .Rprofile file? An absolute path to the project's root? Plus I don't want the users to choose their working directory: this technicality should be kept hidden from them and be automatic.?

Best regards,?
?
Olivier
________________________________
De : Gabor Grothendieck <ggrothendieck at gmail.com>
Envoy? : samedi 6 octobre 2018 23:33
? : olivier_givaudan at hotmail.com; r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

1. Assuming you are starting the script from within R, if you want to
keep all the files used by the script together with the script itself
then just source the script using the absolute or relative path to the
script using source(..., chdir = TRUE) as shown below and the script
will run in the directory containing the script. We used an absoluate
path below but a relative path will work too.  In either case the
script itself will not need to use absolute paths and it is portable
to other machines.

  source("/path/to/script.R", chdir = TRUE)

If your script is on your PATH then this would work:

  source(Sys.which("script.R"), chdir = TRUE)

2. Another approach is to define an R option, say root, using the R
options() function to define the root directory of your project.  You
can have a different R option for each project.  Place the options()
statements to set these R options for your various projects in your
.Rprofile, say, and in the script use:

    root <- getOption("root", ".")

to cause it to retrieve the value of the R option root if it is
defined and use the current directory otherwise.  Use a different name
for each project. If the user does not define the R option root it
will be up to them to change directory first.  Again there will be no
use of absolute paths in the script itself and it is portable to other
machines.

What is particularly convenient about this is that it documents where
all the projects are on the  machine right in the .Rproject file so
one always knows where they are.

On Sat, Oct 6, 2018 at 8:25 AM Olivier GIVAUDAN
<olivier_givaudan at hotmail.com> wrote:
>> Dear R users,
>
> I would like to work with genuine relative paths in R for obvious reasons: if I move all my scripts related to some project as a whole to another location of my computer or someone else's computer, if want my scripts to continue to run seamlessly.
>
> What I mean by "genuine" is that it should not be necessary to hardcode one single absolute path (making the code obviously not "portable" - to another place - anymore).
>
> For the time being, I found the following related posts, unfortunately never conclusive or even somewhat off-topic:
> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
>
> So I found 2 workarounds, more or less satisfactory:
>
>
>   1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.
>   2.  Or create an R project file with RStudio and use the package "here" to get the absolute path of the R project file and put all the R scripts related to this project in the R project directory, as often recommended.
>
> But I am really wondering why R doesn't have (please tell me if I'm wrong) this basic feature as many other languages have it (batch, shell, C, LaTeX, SAS with macro-variables, etc.)?
> Do you know whether the language will have this kind of function in a near future? What are the obstacles / what is the reasoning for not having it already?
>
> Do you know other workarounds?
>
> Best regards,
>
> Olivier
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



--
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com

	[[alternative HTML version deleted]]


From petr@p|k@| @end|ng |rom prechez@@cz  Wed Oct 10 16:12:30 2018
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Wed, 10 Oct 2018 14:12:30 +0000
Subject: [R] 
 [R studio] Plotting line chart for the obtained entropy values
In-Reply-To: <CAOFE=kPiyQt6Gi+SMMXBFiNS2OC1j1Oqqvd2K5u4edXGpCi8bA@mail.gmail.com>
References: <CAOFE=kPiyQt6Gi+SMMXBFiNS2OC1j1Oqqvd2K5u4edXGpCi8bA@mail.gmail.com>
Message-ID: <217370f8b0f949f391f0c8e8e8e2633e@SRVEXCHCM1301.precheza.cz>

Hi

see in line

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Subhamitra Patra
> Sent: Wednesday, October 10, 2018 1:07 PM
> To: r-help at r-project.org
> Subject: [R] [R studio] Plotting line chart for the obtained entropy values
>
> Hello friends,
>
> I have obtained the approximate entropy values for the multiple series.
> But, after that, I am unable to draw a line chart for the obtained
> approximate entropy values. Please help me to draw a line chart for the
> obtained entropy values. For your reference, I am writing my code here so
> that it will be easier to suggest the code for the plotting of line chart.
>
>      N<-nrow(ts)
> r<-matrix(0, nrow = N, ncol = 1)
> for (i in 1:N){
>      r[i]<-approx_entropy(ts[,i], edim = 2, r = 0.2*sd(ts[,i]), elag = 1)
> }

I may be completely wrong but does not

plot(r, type="l")

produce line graph?

Cheers
Petr

>
>
> Hence, I need to plot the obtained entropy values that stored in r folder.
>
> A great help will be highly appreciated.
>
> Thanks in advance.
>
> --
> *Best Regards,*
> *Subhamitra Patra*
> *Phd. Research Scholar*
> *Department of Humanities and Social Sciences*
> *Indian Institute of Technology, Kharagpur*
> *INDIA*
>
> [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information about processing and protection of business partner?s personal data are available on website: https://www.precheza.cz/en/personal-data-protection-principles/
D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any documents attached to it may be confidential and are subject to the legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/


From o||v|er_g|v@ud@n @end|ng |rom hotm@||@com  Wed Oct 10 16:37:13 2018
From: o||v|er_g|v@ud@n @end|ng |rom hotm@||@com (Olivier GIVAUDAN)
Date: Wed, 10 Oct 2018 14:37:13 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <EF096B6D-D167-402E-A1BB-9310D60E6F64@dcn.davis.ca.us>
 <VI1PR0202MB33571A964A191D165B3BF422F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <292ca297-27e3-162b-e525-fabc4bb4554c@kogentum.hu>
 <VI1PR0202MB3357E9066FF1527BAC014784F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <dbde4f15-caa6-dc62-3a10-e804cc81671a@kogentum.hu>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
Message-ID: <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>

Hi Jeff,
?
> That is, there is not always a file in a particular directory even involved in the executing code.??
?
True. I'm only asking in the case where some R code is run from an R file. This function 'MyOwnPath()' (say) should only work (i.e. return a useful result) in this case.?
?
> The R interpreter does not make assumptions about where the code it is running came from.?
?
That's precisely the reproach I have in case the code comes from a file.?
?
> You also keep referring to "this feature" being in many languages, though you seem to be mistaken about most of them...?
?
'Most of them' is largely exaggerated (plus I corrected myself): I only mixed between the 'cd' variable / command in Windows and Linux shells (you would certainly agree it's a bit vicious).?
?
> $PWD is the same as getwd()?
?
Wrong. As I already said, if I create an R script located somewhere on my computer with the only line 'getwd()' and run this script, I won't get the directory of this R script, contrary to a shell file with the only line '$PWD'.?
?
> __FILE__ in C relates to the source code directory that is usually not where the executable is ?located and may not even exist on the computer it is running on?
?
Yes, and? What is the issue here? So '__FILE__' does the job. Invoking '__FILE__' in a .C file (I never said in its related executable) will return the absolute path of this C source file.?
'__DIR__' in PHP also does the job. No to forget the good old VBA (Excel in this case) 'ActiveWorkbook.Path'.?

Thank you for the 2 references you provided.
However it seems that some manual settings are still required to be able to use Rscript.
But I like the solution of the .RData file: I simply created an empty .RData file at the root of my project and by double-clicking on this file (as you said), the R GUI opens and 'getwd()' returns the path of this .RData file. It seems to be a good alternative to .Rproj file to be opened with RStudio.
?
> However, by far the best approach is to teach your users to fish... if you give them an RStudio project directory they can double-click on the .Rproj ?file to set the current directory and enter the world of R.??
?
Yes, using an .Rproj file to be opened with RStudio also seems to me to be a reasonable solution (the one I chose until now), although it is still a workaround and requires RStudio.?
Actually in this case, the package 'here'? I previously mentioned is useless to get the current working directory of the project as 'When a project is opened within RStudio the following actions are taken: [...] The current working directory is set to the project directory.', as stated on this page: https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects.
So 'getwd()' returns exactly the same as 'here()' does.

Best regards,?
?
Olivier

________________________________
De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
Envoy? : dimanche 7 octobre 2018 20:48
? : Olivier GIVAUDAN
Cc : D?nes T?th; r-help at r-project.org
Objet : RE: [R] Genuine relative paths with R

On Sun, 7 Oct 2018, Olivier GIVAUDAN wrote:

> Hello Denes,
>
> > Yes, the path to the "root" folder of your project. You seem to have a
> really esoteric context if you want to run an R script without knowing
> its path in the file system.
>
> I don't have any esoteric context: I'm just looking for the most generic, automatic and reproducible solution.
> Of course you always know where an R script is located, nevertheless it doesn't imply you want to manually write its path in this
> R script. The issue is to have to hardcode an absolute path: I don't want that.
>
> > Because it is extremely rare that someone - who uses R for what it is
> worth and in a manner how R is supposed to be used - actually needs such
> a function.
>

> First, the fact that it is rare doesn't mean this need is not legitimate
> and relevant: it is needed to make R projects fully movable (i.e.
> wherever you want). Second why a vast majority of languages does have
> this feature and not R? Why is it useful in these languages and not in
> R?

The R interpreter does not make assumptions about where the code it is
running came from. You might be running it by using the source() function,
or by using the Rscript program, or by R CMD BATCH, or using eval() on
code you pasted together in an R function, or as byte-compiled code loaded
from an RData file. That is, there is not always a file in a particular
directory even involved in the executing code.

You also keep referring to "this feature" being in many languages, though
you seem to be mistaken about most of them... in fact, they, too, know NOT
where the script is but where the current directory is ($PWD is the same
as getwd()) or where the compilation occurred (__FILE__ in C relates to
the source code directory that is usually not where the executable is
located and may not even exist on the computer it is running on).

I have already pointed out that the solution is to let the OS set the
current directory. If you want the user to have access to R independent of
your code, the easiest way to leave them in Rgui after your code is done
is to use save.image() to create a "myApp.RData" file which can be
double-clicked [1]. The double-clicking action by default (as defined by
the installation of R) causes the operating system to set the current
directory to the one containing the file you double-clicked on and then
executes the Rgui program.

If you don't want the user to interact with your session, you can use the
Rscript executable (also mentioned briefly at the bottom of [1]). In both
cases, the user has (unknowingly) set the current directory before running
your code, and there is no need to encode where the script is or was
inside the script.

You can also create a windows shortcut to invoke Rscript yourself by
bootstrapping the RData file and invoking the
R.utils::createWindowsShortcut() [2] function.

However, by far the best approach is to teach your users to fish... if you
give them an RStudio project directory they can double-click on the .Rproj
file to set the current directory and enter the world of R.

[1] https://www.r-bloggers.com/look-ma-no-typing-autorunning-code-on-r-startup/
[2] https://cran.r-project.org/web/packages/R.utils/R.utils.pdf

End comment.

> Best regards,
>
> Olivier
>
> _________________________________________________________________________________________________________________________________
> De : D?nes T?th <toth.denes at kogentum.hu>
> Envoy? : samedi 6 octobre 2018 23:36
> ? : Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
> Objet : Re: [R] Genuine relative paths with R
> Hi Olivier,
>
>
> On 10/07/2018 01:13 AM, Olivier GIVAUDAN wrote:
> > Hi Denes,
> >
> > Thank you for the possibility you shared: unfortunately it still uses
> > one hardcoded absolute path which I want to avoid.
>
> Yes, the path to the "root" folder of your project. You seem to have a
> really esoteric context if you want to run an R script without knowing
> its path in the file system.
>
> >
> > I just think that the solutions suggested are too complicated for my
> > simple need.
> >
> > The root cause being that R doesn't seem to have the Windows batch
> > equivalent of cd, or bash equivalent of $PWD, or PHP equivalent of __DIR__.
> > Hence the workarounds we are discussing.
> >
> > And finally we go back to my initial question: if such a function
> > doesn't exist in R, what are the reasons?
>
> Because it is extremely rare that someone - who uses R for what it is
> worth and in a manner how R is supposed to be used - actually needs such
> a function.
>
> Best,
> Denes
>
>
>
> >
> > Best regards,
> >
> > Olivier
> > ------------------------------------------------------------------------
> > *De :* D?nes T?th <toth.denes at kogentum.hu>
> > *Envoy? :* samedi 6 octobre 2018 23:05
> > *?:* Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
> > *Objet :* Re: [R] Genuine relative paths with R
> > Hi Olivier,
> >
> > I really think that Ista and Jeff gave you plenty of useful options how
> > you can avoid using absolute paths.
> >
> > One more possibility: you can use `source()` with the chdir = TRUE
> > argument (see ?source). If you have a master script which sources other
> > files which are located in a fixed hierarchy relative to the location of
> > the master script, the only time when you have to use an absolute path
> > is when you source your master script, e.g.:
> > source("/my/path/to/master.R", chdir = TRUE)
> >
> > Inside the master script, you can then source the other scripts by
> > relative paths, define your 'data' folders relative to the master script
> > and let the other scripts use those data paths, etc.
> >
> > Best,
> > Denes
> >
> >
> > On 10/06/2018 11:36 PM, Olivier GIVAUDAN wrote:
> >> Hi Jeff,
> >>
> >> Thanks for sharing your workaround.
> >>
> >> I guess my last answer to Ista answers your question as well.
> >>
> >> To me this function (an equivalent of 'cd', say) should be platform-independent.
> >>
> >> Best regards,
> >>
> >> Olivier
> >>
> >> ________________________________
> >> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> >> Envoy??? : samedi 6 octobre 2018 19:31
> >> ??? : r-help at r-project.org; Olivier GIVAUDAN; r-help at r-project.org
> >> Objet : Re: [R] Genuine relative paths with R
> >>
> >> I stopped using hardcoded absolute paths inside R scripts years ago, and I suspect that is fairly common practice. That is, I
> almost never enter a path starting with "/" or "c:/" in an R script.
> >>
> >> The key concession you have to make is to start your R session in your working directory using OS-specific mechanisms, and
> then reference your code and data relative to that directory. RStudio project files offer one mechanism for doing this; using CD
> from  the OS command line is another, and using the file-browser
> > double-click mechanism on .RData files is another (though I prefer to
> > avoid that these days due to potential global environment contamination).
> >>
> >> Perhaps you can be more specific about what facilities you are expecting to find. You should also mention what OS you
> typically use and how you normally start R.
> >>
> >> On October 6, 2018 4:48:44 AM PDT, Olivier GIVAUDAN <olivier_givaudan at hotmail.com> wrote:
> >>> Dear R users,
> >>>
> >>> I would like to work with genuine relative paths in R for obvious
> >>> reasons: if I move all my scripts related to some project as a whole to
> >>> another location of my computer or someone else's computer, if want my
> >>> scripts to continue to run seamlessly.
> >>>
> >>> What I mean by "genuine" is that it should not be necessary to hardcode
> >>> one single absolute path (making the code obviously not "portable" - to
> >>> another place - anymore).
> >>>
> >>> For the time being, I found the following related posts, unfortunately
> >>> never conclusive or even somewhat off-topic:
> >>> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
> >>> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
> >>> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
> >>>
> >>> So I found 2 workarounds, more or less satisfactory:
> >>>
> >>>
> >>> 1.  Either create a variable "ScriptPath" in the first lines of each of
> >>> my R scripts and run a batch (or shell, etc.) to replace every single
> >>> occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R
> >>> script]" in all the R scripts located in the folder (and possibly
> >>> subfolders) of the batch file.
> >>> 2.  Or create an R project file with RStudio and use the package "here"
> >>> to get the absolute path of the R project file and put all the R
> >>> scripts related to this project in the R project directory, as often
> >>> recommended.
> >>>
> >>> But I am really wondering why R doesn't have (please tell me if I'm
> >>> wrong) this basic feature as many other languages have it (batch,
> >>> shell, C, LaTeX, SAS with macro-variables, etc.)?
> >>> Do you know whether the language will have this kind of function in a
> >>> near future? What are the obstacles / what is the reasoning for not
> >>> having it already?
> >>>
> >>> Do you know other workarounds?
> >>>
> >>> Best regards,
> >>>
> >>> Olivier
> >>>
> >>>        [[alternative HTML version deleted]]
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide
> >>> http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >>
> >> --
> >> Sent from my phone. Please excuse my brevity.
> >>
> >>        [[alternative HTML version deleted]]
> >>
> >>
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >>
>
>

---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                       Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
---------------------------------------------------------------------------

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Wed Oct 10 16:43:37 2018
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 10 Oct 2018 07:43:37 -0700
Subject: [R] cluster samples using self organizing map in R
In-Reply-To: <CAOQGvC6abdJ=vcT0iW+ngHiPdYmWET4GCn389YnVQMnjODvr=g@mail.gmail.com>
References: <CAOQGvC6abdJ=vcT0iW+ngHiPdYmWET4GCn389YnVQMnjODvr=g@mail.gmail.com>
Message-ID: <CAGxFJbQk5tVauVY+yA=ig_fObfcyzGRt8zDtt+_Ecd3XBPbB2Q@mail.gmail.com>

Search!

the rseek.org site gives many hits for "self organizing maps", including
the som package among others.

-- Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Oct 9, 2018 at 11:14 PM A DNA RNA <email2mrna at gmail.com> wrote:

> Dear All,
>
> Who can I use Self Organizing Map (SOM) results to cluster samples? I have
> tried following but this gives me only the clustering of grids, while I
> want to cluster (150) samples:
>
> library(kohonen)
> iris.sc <- scale(iris[, 1:4])
> iris.som <- som(iris.sc, grid=somgrid(xdim = 3, ydim=3, topo="hexagonal"),
>                rlen=100, alpha=c(0.05,0.01))
> ##hierarchical clustering
> groups <- 3
> iris.hc <- cutree(hclust(dist(iris.som$codes[[1]])), groups)
> iris.hc
> #V1 V2 V3 V4 V5 V6 V7 V8 V9
> #1  1  2  1  1  2  3  3  2
>
>
> Can anyone help me with this please?
> --
> Tina
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Oct 10 16:51:32 2018
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 10 Oct 2018 10:51:32 -0400
Subject: [R] Genuine relative paths with R
In-Reply-To: <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <EF096B6D-D167-402E-A1BB-9310D60E6F64@dcn.davis.ca.us>
 <VI1PR0202MB33571A964A191D165B3BF422F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <292ca297-27e3-162b-e525-fabc4bb4554c@kogentum.hu>
 <VI1PR0202MB3357E9066FF1527BAC014784F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <dbde4f15-caa6-dc62-3a10-e804cc81671a@kogentum.hu>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
Message-ID: <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>

On 10/10/2018 10:37 AM, Olivier GIVAUDAN wrote:
> Hi Jeff,
> ?
>> That is, there is not always a file in a particular directory even involved in the executing code.??
> ?
> True. I'm only asking in the case where some R code is run from an R file. This function 'MyOwnPath()' (say) should only work (i.e. return a useful result) in this case.?
> ?
>> The R interpreter does not make assumptions about where the code it is running came from.?
> ?
> That's precisely the reproach I have in case the code comes from a file.?
> ?
>> You also keep referring to "this feature" being in many languages, though you seem to be mistaken about most of them...?
> ?
> 'Most of them' is largely exaggerated (plus I corrected myself): I only mixed between the 'cd' variable / command in Windows and Linux shells (you would certainly agree it's a bit vicious).?
> ?
>> $PWD is the same as getwd()?
> ?
> Wrong. As I already said, if I create an R script located somewhere on my computer with the only line 'getwd()' and run this script, I won't get the directory of this R script, contrary to a shell file with the only line '$PWD'.?

What system are you talking about?  On Unix-alikes, you'd need an "echo" 
ahead of that, and it would print the user's working directory, not the 
working directory of the script.

Duncan Murdoch

> ?
>> __FILE__ in C relates to the source code directory that is usually not where the executable is ?located and may not even exist on the computer it is running on?
> ?
> Yes, and? What is the issue here? So '__FILE__' does the job. Invoking '__FILE__' in a .C file (I never said in its related executable) will return the absolute path of this C source file.?
> '__DIR__' in PHP also does the job. No to forget the good old VBA (Excel in this case) 'ActiveWorkbook.Path'.?
> 
> Thank you for the 2 references you provided.
> However it seems that some manual settings are still required to be able to use Rscript.
> But I like the solution of the .RData file: I simply created an empty .RData file at the root of my project and by double-clicking on this file (as you said), the R GUI opens and 'getwd()' returns the path of this .RData file. It seems to be a good alternative to .Rproj file to be opened with RStudio.
> ?
>> However, by far the best approach is to teach your users to fish... if you give them an RStudio project directory they can double-click on the .Rproj ?file to set the current directory and enter the world of R.??
> ?
> Yes, using an .Rproj file to be opened with RStudio also seems to me to be a reasonable solution (the one I chose until now), although it is still a workaround and requires RStudio.?
> Actually in this case, the package 'here'? I previously mentioned is useless to get the current working directory of the project as 'When a project is opened within RStudio the following actions are taken: [...] The current working directory is set to the project directory.', as stated on this page: https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects.
> So 'getwd()' returns exactly the same as 'here()' does.
> 
> Best regards,?
> ?
> Olivier
> 
> ________________________________
> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> Envoy? : dimanche 7 octobre 2018 20:48
> ? : Olivier GIVAUDAN
> Cc : D?nes T?th; r-help at r-project.org
> Objet : RE: [R] Genuine relative paths with R
> 
> On Sun, 7 Oct 2018, Olivier GIVAUDAN wrote:
> 
>> Hello Denes,
>>
>>> Yes, the path to the "root" folder of your project. You seem to have a
>> really esoteric context if you want to run an R script without knowing
>> its path in the file system.
>>
>> I don't have any esoteric context: I'm just looking for the most generic, automatic and reproducible solution.
>> Of course you always know where an R script is located, nevertheless it doesn't imply you want to manually write its path in this
>> R script. The issue is to have to hardcode an absolute path: I don't want that.
>>
>>> Because it is extremely rare that someone - who uses R for what it is
>> worth and in a manner how R is supposed to be used - actually needs such
>> a function.
>>
> 
>> First, the fact that it is rare doesn't mean this need is not legitimate
>> and relevant: it is needed to make R projects fully movable (i.e.
>> wherever you want). Second why a vast majority of languages does have
>> this feature and not R? Why is it useful in these languages and not in
>> R?
> 
> The R interpreter does not make assumptions about where the code it is
> running came from. You might be running it by using the source() function,
> or by using the Rscript program, or by R CMD BATCH, or using eval() on
> code you pasted together in an R function, or as byte-compiled code loaded
> from an RData file. That is, there is not always a file in a particular
> directory even involved in the executing code.
> 
> You also keep referring to "this feature" being in many languages, though
> you seem to be mistaken about most of them... in fact, they, too, know NOT
> where the script is but where the current directory is ($PWD is the same
> as getwd()) or where the compilation occurred (__FILE__ in C relates to
> the source code directory that is usually not where the executable is
> located and may not even exist on the computer it is running on).
> 
> I have already pointed out that the solution is to let the OS set the
> current directory. If you want the user to have access to R independent of
> your code, the easiest way to leave them in Rgui after your code is done
> is to use save.image() to create a "myApp.RData" file which can be
> double-clicked [1]. The double-clicking action by default (as defined by
> the installation of R) causes the operating system to set the current
> directory to the one containing the file you double-clicked on and then
> executes the Rgui program.
> 
> If you don't want the user to interact with your session, you can use the
> Rscript executable (also mentioned briefly at the bottom of [1]). In both
> cases, the user has (unknowingly) set the current directory before running
> your code, and there is no need to encode where the script is or was
> inside the script.
> 
> You can also create a windows shortcut to invoke Rscript yourself by
> bootstrapping the RData file and invoking the
> R.utils::createWindowsShortcut() [2] function.
> 
> However, by far the best approach is to teach your users to fish... if you
> give them an RStudio project directory they can double-click on the .Rproj
> file to set the current directory and enter the world of R.
> 
> [1] https://www.r-bloggers.com/look-ma-no-typing-autorunning-code-on-r-startup/
> [2] https://cran.r-project.org/web/packages/R.utils/R.utils.pdf
> 
> End comment.
> 
>> Best regards,
>>
>> Olivier
>>
>> _________________________________________________________________________________________________________________________________
>> De : D?nes T?th <toth.denes at kogentum.hu>
>> Envoy? : samedi 6 octobre 2018 23:36
>> ? : Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
>> Objet : Re: [R] Genuine relative paths with R
>> Hi Olivier,
>>
>>
>> On 10/07/2018 01:13 AM, Olivier GIVAUDAN wrote:
>>> Hi Denes,
>>>
>>> Thank you for the possibility you shared: unfortunately it still uses
>>> one hardcoded absolute path which I want to avoid.
>>
>> Yes, the path to the "root" folder of your project. You seem to have a
>> really esoteric context if you want to run an R script without knowing
>> its path in the file system.
>>
>>>
>>> I just think that the solutions suggested are too complicated for my
>>> simple need.
>>>
>>> The root cause being that R doesn't seem to have the Windows batch
>>> equivalent of cd, or bash equivalent of $PWD, or PHP equivalent of __DIR__.
>>> Hence the workarounds we are discussing.
>>>
>>> And finally we go back to my initial question: if such a function
>>> doesn't exist in R, what are the reasons?
>>
>> Because it is extremely rare that someone - who uses R for what it is
>> worth and in a manner how R is supposed to be used - actually needs such
>> a function.
>>
>> Best,
>> Denes
>>
>>
>>
>>>
>>> Best regards,
>>>
>>> Olivier
>>> ------------------------------------------------------------------------
>>> *De :* D?nes T?th <toth.denes at kogentum.hu>
>>> *Envoy? :* samedi 6 octobre 2018 23:05
>>> *?:* Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
>>> *Objet :* Re: [R] Genuine relative paths with R
>>> Hi Olivier,
>>>
>>> I really think that Ista and Jeff gave you plenty of useful options how
>>> you can avoid using absolute paths.
>>>
>>> One more possibility: you can use `source()` with the chdir = TRUE
>>> argument (see ?source). If you have a master script which sources other
>>> files which are located in a fixed hierarchy relative to the location of
>>> the master script, the only time when you have to use an absolute path
>>> is when you source your master script, e.g.:
>>> source("/my/path/to/master.R", chdir = TRUE)
>>>
>>> Inside the master script, you can then source the other scripts by
>>> relative paths, define your 'data' folders relative to the master script
>>> and let the other scripts use those data paths, etc.
>>>
>>> Best,
>>> Denes
>>>
>>>
>>> On 10/06/2018 11:36 PM, Olivier GIVAUDAN wrote:
>>>> Hi Jeff,
>>>>
>>>> Thanks for sharing your workaround.
>>>>
>>>> I guess my last answer to Ista answers your question as well.
>>>>
>>>> To me this function (an equivalent of 'cd', say) should be platform-independent.
>>>>
>>>> Best regards,
>>>>
>>>> Olivier
>>>>
>>>> ________________________________
>>>> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>>>> Envoy??? : samedi 6 octobre 2018 19:31
>>>> ??? : r-help at r-project.org; Olivier GIVAUDAN; r-help at r-project.org
>>>> Objet : Re: [R] Genuine relative paths with R
>>>>
>>>> I stopped using hardcoded absolute paths inside R scripts years ago, and I suspect that is fairly common practice. That is, I
>> almost never enter a path starting with "/" or "c:/" in an R script.
>>>>
>>>> The key concession you have to make is to start your R session in your working directory using OS-specific mechanisms, and
>> then reference your code and data relative to that directory. RStudio project files offer one mechanism for doing this; using CD
>> from  the OS command line is another, and using the file-browser
>>> double-click mechanism on .RData files is another (though I prefer to
>>> avoid that these days due to potential global environment contamination).
>>>>
>>>> Perhaps you can be more specific about what facilities you are expecting to find. You should also mention what OS you
>> typically use and how you normally start R.
>>>>
>>>> On October 6, 2018 4:48:44 AM PDT, Olivier GIVAUDAN <olivier_givaudan at hotmail.com> wrote:
>>>>> Dear R users,
>>>>>
>>>>> I would like to work with genuine relative paths in R for obvious
>>>>> reasons: if I move all my scripts related to some project as a whole to
>>>>> another location of my computer or someone else's computer, if want my
>>>>> scripts to continue to run seamlessly.
>>>>>
>>>>> What I mean by "genuine" is that it should not be necessary to hardcode
>>>>> one single absolute path (making the code obviously not "portable" - to
>>>>> another place - anymore).
>>>>>
>>>>> For the time being, I found the following related posts, unfortunately
>>>>> never conclusive or even somewhat off-topic:
>>>>> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
>>>>> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
>>>>> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
>>>>>
>>>>> So I found 2 workarounds, more or less satisfactory:
>>>>>
>>>>>
>>>>> 1.  Either create a variable "ScriptPath" in the first lines of each of
>>>>> my R scripts and run a batch (or shell, etc.) to replace every single
>>>>> occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R
>>>>> script]" in all the R scripts located in the folder (and possibly
>>>>> subfolders) of the batch file.
>>>>> 2.  Or create an R project file with RStudio and use the package "here"
>>>>> to get the absolute path of the R project file and put all the R
>>>>> scripts related to this project in the R project directory, as often
>>>>> recommended.
>>>>>
>>>>> But I am really wondering why R doesn't have (please tell me if I'm
>>>>> wrong) this basic feature as many other languages have it (batch,
>>>>> shell, C, LaTeX, SAS with macro-variables, etc.)?
>>>>> Do you know whether the language will have this kind of function in a
>>>>> near future? What are the obstacles / what is the reasoning for not
>>>>> having it already?
>>>>>
>>>>> Do you know other workarounds?
>>>>>
>>>>> Best regards,
>>>>>
>>>>> Olivier
>>>>>
>>>>>         [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide
>>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>> --
>>>> Sent from my phone. Please excuse my brevity.
>>>>
>>>>         [[alternative HTML version deleted]]
>>>>
>>>>
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>
>>
> 
> ---------------------------------------------------------------------------
> Jeff Newmiller                        The     .....       .....  Go Live...
> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
>                                         Live:   OO#.. Dead: OO#..  Playing
> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
> /Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
> ---------------------------------------------------------------------------
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>



From o||v|er_g|v@ud@n @end|ng |rom hotm@||@com  Wed Oct 10 16:57:25 2018
From: o||v|er_g|v@ud@n @end|ng |rom hotm@||@com (Olivier GIVAUDAN)
Date: Wed, 10 Oct 2018 14:57:25 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <60714a3e-2ef5-5563-7dcc-eb4965f966d4@uke.de>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <60714a3e-2ef5-5563-7dcc-eb4965f966d4@uke.de>
Message-ID: <VI1PR0202MB3357ECAFF18BC7D7DD83E11FF5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>

Dear Eik,

Thank you for your message.

Yes, I already got to know this package and this discussion (while I found the 'here' package). But thanks.

Best regards,

Olivier
________________________________
De : Eik Vettorazzi <E.Vettorazzi at uke.de>
Envoy? : lundi 8 octobre 2018 11:30
? : Olivier GIVAUDAN; r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

Dear Olivier,
you may find the rprojroot package useful, see
https://github.com/r-lib/rprojroot

and a discussion

https://gist.github.com/jennybc/362f52446fe1ebc4c49f#file-2014-10-12_stop-working-directory-insanity-md

Cheers

Am 06.10.2018 um 13:48 schrieb Olivier GIVAUDAN:
> Dear R users,
>
> I would like to work with genuine relative paths in R for obvious reasons: if I move all my scripts related to some project as a whole to another location of my computer or someone else's computer, if want my scripts to continue to run seamlessly.
>
> What I mean by "genuine" is that it should not be necessary to hardcode one single absolute path (making the code obviously not "portable" - to another place - anymore).
>
> For the time being, I found the following related posts, unfortunately never conclusive or even somewhat off-topic:
> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
>
> So I found 2 workarounds, more or less satisfactory:
>
>
>    1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.
>    2.  Or create an R project file with RStudio and use the package "here" to get the absolute path of the R project file and put all the R scripts related to this project in the R project directory, as often recommended.
>
> But I am really wondering why R doesn't have (please tell me if I'm wrong) this basic feature as many other languages have it (batch, shell, C, LaTeX, SAS with macro-variables, etc.)?
> Do you know whether the language will have this kind of function in a near future? What are the obstacles / what is the reasoning for not having it already?
>
> Do you know other workarounds?
>
> Best regards,
>
> Olivier
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

--
Eik Vettorazzi

Department of Medical Biometry and Epidemiology
University Medical Center Hamburg-Eppendorf

Martinistrasse 52
building W 34
20246 Hamburg

Phone: +49 (0) 40 7410 - 58243
Fax:   +49 (0) 40 7410 - 57790
Web: www.uke.de/imbe<http://www.uke.de/imbe>
--

_____________________________________________________________________

Universit?tsklinikum Hamburg-Eppendorf; K?rperschaft des ?ffentlichen Rechts; Gerichtsstand: Hamburg | www.uke.de
Vorstandsmitglieder: Prof. Dr. Burkhard G?ke (Vorsitzender), Prof. Dr. Dr. Uwe Koch-Gromus, Joachim Pr?l?, Martina Saurin (komm.)
_____________________________________________________________________

SAVE PAPER - THINK BEFORE PRINTING

	[[alternative HTML version deleted]]



From o||v|er_g|v@ud@n @end|ng |rom hotm@||@com  Wed Oct 10 17:12:49 2018
From: o||v|er_g|v@ud@n @end|ng |rom hotm@||@com (Olivier GIVAUDAN)
Date: Wed, 10 Oct 2018 15:12:49 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <7976D00C-2713-4B28-AD19-6788184DCF16@llnl.gov>
References: <7976D00C-2713-4B28-AD19-6788184DCF16@llnl.gov>
Message-ID: <VI1PR0202MB3357092207090935EA1E5EB0F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>

Hi Don,

Thanks for your message.

> First fact:
?
>  R understands relative paths (as do the other languages you mentioned) (you have misunderstood R if you think it doesn't)?

I never said R doesn't understand relative paths (which software doesn't...). I simply said it is not straightforward to use relative paths in R as the function 'MyOwnPath()' returning the path of the R file where this function is written and run doesn't exist; therefore workarounds more or less "clean" are necessary. Precisely changing (automatically, not manually of course) the current working directory to the location where a given R file (.R) is located is not straightforward.

> Second fact:?
?
> R interprets relative paths as being relative to its current working directory

Yep.

> Third fact:
?
> To find out R's current working directory type:   getwd() at the R prompt

Yep.

> The easiest way to set the working directory, in my opinion, is by starting R from a linux or Mac command shell (bash, tcsh, etc) environment. You start R by typing "R" at the shell prompt and R's working directory is inherited from the current working directory of the shell.

Yes, I found a similar but more user-friendly (in my opinion) way via .Rproj (with RStudio) and .RData (with R GUI).

> No additional packages are necessary in order to manage R's working directory simply and effectively.

Exactly!

Best regards,

Olivier
________________________________
De : MacQueen, Don <macqueen1 at llnl.gov>
Envoy? : lundi 8 octobre 2018 16:04
? : Olivier GIVAUDAN; r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

A few facts (and some opinions):


First fact:

  R understands relative paths (as do the other languages you mentioned) (you have misunderstood R if you think it doesn't)

Second fact:

  R interprets relative paths as being relative to its current working directory

Third fact:

  To find out R's current working directory type:   getwd() at the R prompt

Fourth fact:

   There are various ways to set R's working directory, depending on how you are running R. Once R is running, you can if necessary use setwd() at the R prompt, and this is platform-independent (but it should rarely be necessary).



The easiest way to set the working directory, in my opinion, is by starting R from a linux or Mac command shell (bash, tcsh, etc) environment. You start R by typing "R" at the shell prompt and R's working directory is inherited from the current working directory of the shell.

If you are using a GUI (i.e., you started R by double-clicking on some icon), look for menu commands to set the working directory. Check the documentation for the GUI to find out other ways to set the working directory for that GUI.

No additional packages are necessary in order to manage R's working directory simply and effectively.

Yes, you can move all the scripts related to some project as a whole to some other location and have them run seamlessly using relative paths. Hopefully it is clear by now that all that is needed is to set R's working directory to the project's main directory.

-Don

--
Don MacQueen
Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062
Lab cell 925-724-7509



?On 10/6/18, 4:48 AM, "R-help on behalf of Olivier GIVAUDAN" <r-help-bounces at r-project.org on behalf of olivier_givaudan at hotmail.com> wrote:

    Dear R users,

    I would like to work with genuine relative paths in R for obvious reasons: if I move all my scripts related to some project as a whole to another location of my computer or someone else's computer, if want my scripts to continue to run seamlessly.

    What I mean by "genuine" is that it should not be necessary to hardcode one single absolute path (making the code obviously not "portable" - to another place - anymore).

    For the time being, I found the following related posts, unfortunately never conclusive or even somewhat off-topic:
    https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
    https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
    http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html

    So I found 2 workarounds, more or less satisfactory:


      1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.
      2.  Or create an R project file with RStudio and use the package "here" to get the absolute path of the R project file and put all the R scripts related to this project in the R project directory, as often recommended.

    But I am really wondering why R doesn't have (please tell me if I'm wrong) this basic feature as many other languages have it (batch, shell, C, LaTeX, SAS with macro-variables, etc.)?
    Do you know whether the language will have this kind of function in a near future? What are the obstacles / what is the reasoning for not having it already?

    Do you know other workarounds?

    Best regards,

    Olivier

         [[alternative HTML version deleted]]

    ______________________________________________
    R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    https://stat.ethz.ch/mailman/listinfo/r-help
    PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    and provide commented, minimal, self-contained, reproducible code.



	[[alternative HTML version deleted]]


From o||v|er_g|v@ud@n @end|ng |rom hotm@||@com  Wed Oct 10 17:18:07 2018
From: o||v|er_g|v@ud@n @end|ng |rom hotm@||@com (Olivier GIVAUDAN)
Date: Wed, 10 Oct 2018 15:18:07 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <EF096B6D-D167-402E-A1BB-9310D60E6F64@dcn.davis.ca.us>
 <VI1PR0202MB33571A964A191D165B3BF422F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <292ca297-27e3-162b-e525-fabc4bb4554c@kogentum.hu>
 <VI1PR0202MB3357E9066FF1527BAC014784F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <dbde4f15-caa6-dc62-3a10-e804cc81671a@kogentum.hu>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
Message-ID: <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>

Hi Duncan,

Yes, if you need to display the content of $PWD you obviously need to type 'echo' before this variable.

It prints the user's working directory if run from a terminal but if run from a bash file it prints the working directory of the script.
At least for me (I am running on the last version of Ubuntu)...

Best regards,

Olivier
________________________________
De : Duncan Murdoch <murdoch.duncan at gmail.com>
Envoy? : mercredi 10 octobre 2018 14:51
? : Olivier GIVAUDAN; Jeff Newmiller
Cc : r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

On 10/10/2018 10:37 AM, Olivier GIVAUDAN wrote:
> Hi Jeff,
> ?
>> That is, there is not always a file in a particular directory even involved in the executing code.??
> ?
> True. I'm only asking in the case where some R code is run from an R file. This function 'MyOwnPath()' (say) should only work (i.e. return a useful result) in this case.?
> ?
>> The R interpreter does not make assumptions about where the code it is running came from.?
> ?
> That's precisely the reproach I have in case the code comes from a file.?
> ?
>> You also keep referring to "this feature" being in many languages, though you seem to be mistaken about most of them...?
> ?
> 'Most of them' is largely exaggerated (plus I corrected myself): I only mixed between the 'cd' variable / command in Windows and Linux shells (you would certainly agree it's a bit vicious).?
> ?
>> $PWD is the same as getwd()?
> ?
> Wrong. As I already said, if I create an R script located somewhere on my computer with the only line 'getwd()' and run this script, I won't get the directory of this R script, contrary to a shell file with the only line '$PWD'.?

What system are you talking about?  On Unix-alikes, you'd need an "echo"
ahead of that, and it would print the user's working directory, not the
working directory of the script.

Duncan Murdoch

> ?
>> __FILE__ in C relates to the source code directory that is usually not where the executable is ?located and may not even exist on the computer it is running on?
> ?
> Yes, and? What is the issue here? So '__FILE__' does the job. Invoking '__FILE__' in a .C file (I never said in its related executable) will return the absolute path of this C source file.?
> '__DIR__' in PHP also does the job. No to forget the good old VBA (Excel in this case) 'ActiveWorkbook.Path'.?
>
> Thank you for the 2 references you provided.
> However it seems that some manual settings are still required to be able to use Rscript.
> But I like the solution of the .RData file: I simply created an empty .RData file at the root of my project and by double-clicking on this file (as you said), the R GUI opens and 'getwd()' returns the path of this .RData file. It seems to be a good alternative to .Rproj file to be opened with RStudio.
> ?
>> However, by far the best approach is to teach your users to fish... if you give them an RStudio project directory they can double-click on the .Rproj ?file to set the current directory and enter the world of R.??
> ?
> Yes, using an .Rproj file to be opened with RStudio also seems to me to be a reasonable solution (the one I chose until now), although it is still a workaround and requires RStudio.?
> Actually in this case, the package 'here'? I previously mentioned is useless to get the current working directory of the project as 'When a project is opened within RStudio the following actions are taken: [...] The current working directory is set to the project directory.', as stated on this page: https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects.
> So 'getwd()' returns exactly the same as 'here()' does.
>
> Best regards,?
> ?
> Olivier
>
> ________________________________
> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> Envoy? : dimanche 7 octobre 2018 20:48
> ? : Olivier GIVAUDAN
> Cc : D?nes T?th; r-help at r-project.org
> Objet : RE: [R] Genuine relative paths with R
>
> On Sun, 7 Oct 2018, Olivier GIVAUDAN wrote:
>
>> Hello Denes,
>>
>>> Yes, the path to the "root" folder of your project. You seem to have a
>> really esoteric context if you want to run an R script without knowing
>> its path in the file system.
>>
>> I don't have any esoteric context: I'm just looking for the most generic, automatic and reproducible solution.
>> Of course you always know where an R script is located, nevertheless it doesn't imply you want to manually write its path in this
>> R script. The issue is to have to hardcode an absolute path: I don't want that.
>>
>>> Because it is extremely rare that someone - who uses R for what it is
>> worth and in a manner how R is supposed to be used - actually needs such
>> a function.
>>
>
>> First, the fact that it is rare doesn't mean this need is not legitimate
>> and relevant: it is needed to make R projects fully movable (i.e.
>> wherever you want). Second why a vast majority of languages does have
>> this feature and not R? Why is it useful in these languages and not in
>> R?
>
> The R interpreter does not make assumptions about where the code it is
> running came from. You might be running it by using the source() function,
> or by using the Rscript program, or by R CMD BATCH, or using eval() on
> code you pasted together in an R function, or as byte-compiled code loaded
> from an RData file. That is, there is not always a file in a particular
> directory even involved in the executing code.
>
> You also keep referring to "this feature" being in many languages, though
> you seem to be mistaken about most of them... in fact, they, too, know NOT
> where the script is but where the current directory is ($PWD is the same
> as getwd()) or where the compilation occurred (__FILE__ in C relates to
> the source code directory that is usually not where the executable is
> located and may not even exist on the computer it is running on).
>
> I have already pointed out that the solution is to let the OS set the
> current directory. If you want the user to have access to R independent of
> your code, the easiest way to leave them in Rgui after your code is done
> is to use save.image() to create a "myApp.RData" file which can be
> double-clicked [1]. The double-clicking action by default (as defined by
> the installation of R) causes the operating system to set the current
> directory to the one containing the file you double-clicked on and then
> executes the Rgui program.
>
> If you don't want the user to interact with your session, you can use the
> Rscript executable (also mentioned briefly at the bottom of [1]). In both
> cases, the user has (unknowingly) set the current directory before running
> your code, and there is no need to encode where the script is or was
> inside the script.
>
> You can also create a windows shortcut to invoke Rscript yourself by
> bootstrapping the RData file and invoking the
> R.utils::createWindowsShortcut() [2] function.
>
> However, by far the best approach is to teach your users to fish... if you
> give them an RStudio project directory they can double-click on the .Rproj
> file to set the current directory and enter the world of R.
>
> [1] https://www.r-bloggers.com/look-ma-no-typing-autorunning-code-on-r-startup/
> [2] https://cran.r-project.org/web/packages/R.utils/R.utils.pdf
>
> End comment.
>
>> Best regards,
>>
>> Olivier
>>
>> _________________________________________________________________________________________________________________________________
>> De : D?nes T?th <toth.denes at kogentum.hu>
>> Envoy? : samedi 6 octobre 2018 23:36
>> ? : Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
>> Objet : Re: [R] Genuine relative paths with R
>> Hi Olivier,
>>
>>
>> On 10/07/2018 01:13 AM, Olivier GIVAUDAN wrote:
>>> Hi Denes,
>>>
>>> Thank you for the possibility you shared: unfortunately it still uses
>>> one hardcoded absolute path which I want to avoid.
>>
>> Yes, the path to the "root" folder of your project. You seem to have a
>> really esoteric context if you want to run an R script without knowing
>> its path in the file system.
>>
>>>
>>> I just think that the solutions suggested are too complicated for my
>>> simple need.
>>>
>>> The root cause being that R doesn't seem to have the Windows batch
>>> equivalent of cd, or bash equivalent of $PWD, or PHP equivalent of __DIR__.
>>> Hence the workarounds we are discussing.
>>>
>>> And finally we go back to my initial question: if such a function
>>> doesn't exist in R, what are the reasons?
>>
>> Because it is extremely rare that someone - who uses R for what it is
>> worth and in a manner how R is supposed to be used - actually needs such
>> a function.
>>
>> Best,
>> Denes
>>
>>
>>
>>>
>>> Best regards,
>>>
>>> Olivier
>>> ------------------------------------------------------------------------
>>> *De :* D?nes T?th <toth.denes at kogentum.hu>
>>> *Envoy? :* samedi 6 octobre 2018 23:05
>>> *?:* Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
>>> *Objet :* Re: [R] Genuine relative paths with R
>>> Hi Olivier,
>>>
>>> I really think that Ista and Jeff gave you plenty of useful options how
>>> you can avoid using absolute paths.
>>>
>>> One more possibility: you can use `source()` with the chdir = TRUE
>>> argument (see ?source). If you have a master script which sources other
>>> files which are located in a fixed hierarchy relative to the location of
>>> the master script, the only time when you have to use an absolute path
>>> is when you source your master script, e.g.:
>>> source("/my/path/to/master.R", chdir = TRUE)
>>>
>>> Inside the master script, you can then source the other scripts by
>>> relative paths, define your 'data' folders relative to the master script
>>> and let the other scripts use those data paths, etc.
>>>
>>> Best,
>>> Denes
>>>
>>>
>>> On 10/06/2018 11:36 PM, Olivier GIVAUDAN wrote:
>>>> Hi Jeff,
>>>>
>>>> Thanks for sharing your workaround.
>>>>
>>>> I guess my last answer to Ista answers your question as well.
>>>>
>>>> To me this function (an equivalent of 'cd', say) should be platform-independent.
>>>>
>>>> Best regards,
>>>>
>>>> Olivier
>>>>
>>>> ________________________________
>>>> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>>>> Envoy??? : samedi 6 octobre 2018 19:31
>>>> ??? : r-help at r-project.org; Olivier GIVAUDAN; r-help at r-project.org
>>>> Objet : Re: [R] Genuine relative paths with R
>>>>
>>>> I stopped using hardcoded absolute paths inside R scripts years ago, and I suspect that is fairly common practice. That is, I
>> almost never enter a path starting with "/" or "c:/" in an R script.
>>>>
>>>> The key concession you have to make is to start your R session in your working directory using OS-specific mechanisms, and
>> then reference your code and data relative to that directory. RStudio project files offer one mechanism for doing this; using CD
>> from  the OS command line is another, and using the file-browser
>>> double-click mechanism on .RData files is another (though I prefer to
>>> avoid that these days due to potential global environment contamination).
>>>>
>>>> Perhaps you can be more specific about what facilities you are expecting to find. You should also mention what OS you
>> typically use and how you normally start R.
>>>>
>>>> On October 6, 2018 4:48:44 AM PDT, Olivier GIVAUDAN <olivier_givaudan at hotmail.com> wrote:
>>>>> Dear R users,
>>>>>
>>>>> I would like to work with genuine relative paths in R for obvious
>>>>> reasons: if I move all my scripts related to some project as a whole to
>>>>> another location of my computer or someone else's computer, if want my
>>>>> scripts to continue to run seamlessly.
>>>>>
>>>>> What I mean by "genuine" is that it should not be necessary to hardcode
>>>>> one single absolute path (making the code obviously not "portable" - to
>>>>> another place - anymore).
>>>>>
>>>>> For the time being, I found the following related posts, unfortunately
>>>>> never conclusive or even somewhat off-topic:
>>>>> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
>>>>> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
>>>>> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
>>>>>
>>>>> So I found 2 workarounds, more or less satisfactory:
>>>>>
>>>>>
>>>>> 1.  Either create a variable "ScriptPath" in the first lines of each of
>>>>> my R scripts and run a batch (or shell, etc.) to replace every single
>>>>> occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R
>>>>> script]" in all the R scripts located in the folder (and possibly
>>>>> subfolders) of the batch file.
>>>>> 2.  Or create an R project file with RStudio and use the package "here"
>>>>> to get the absolute path of the R project file and put all the R
>>>>> scripts related to this project in the R project directory, as often
>>>>> recommended.
>>>>>
>>>>> But I am really wondering why R doesn't have (please tell me if I'm
>>>>> wrong) this basic feature as many other languages have it (batch,
>>>>> shell, C, LaTeX, SAS with macro-variables, etc.)?
>>>>> Do you know whether the language will have this kind of function in a
>>>>> near future? What are the obstacles / what is the reasoning for not
>>>>> having it already?
>>>>>
>>>>> Do you know other workarounds?
>>>>>
>>>>> Best regards,
>>>>>
>>>>> Olivier
>>>>>
>>>>>         [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide
>>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>> --
>>>> Sent from my phone. Please excuse my brevity.
>>>>
>>>>         [[alternative HTML version deleted]]
>>>>
>>>>
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>
>>
>
> ---------------------------------------------------------------------------
> Jeff Newmiller                        The     .....       .....  Go Live...
> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
>                                         Live:   OO#.. Dead: OO#..  Playing
> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
> /Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
> ---------------------------------------------------------------------------
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Oct 10 17:20:31 2018
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 10 Oct 2018 11:20:31 -0400
Subject: [R] Genuine relative paths with R
In-Reply-To: <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <EF096B6D-D167-402E-A1BB-9310D60E6F64@dcn.davis.ca.us>
 <VI1PR0202MB33571A964A191D165B3BF422F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <292ca297-27e3-162b-e525-fabc4bb4554c@kogentum.hu>
 <VI1PR0202MB3357E9066FF1527BAC014784F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <dbde4f15-caa6-dc62-3a10-e804cc81671a@kogentum.hu>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
Message-ID: <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>

On 10/10/2018 11:18 AM, Olivier GIVAUDAN wrote:
> Hi Duncan,
> 
> Yes, if you need to display the content of $PWD you obviously need to 
> type 'echo' before this variable.
> 
> It prints the user's working directory if run from a terminal but if run 
> from a bash file it prints the working directory of the script.
> At least for me (I am running on the last version of Ubuntu)...

Not for me.  Always prints the user's working directory.

Duncan Murdoch


> 
> Best regards,
> 
> Olivier
> ------------------------------------------------------------------------
> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Envoy? :* mercredi 10 octobre 2018 14:51
> *? :* Olivier GIVAUDAN; Jeff Newmiller
> *Cc?:* r-help at r-project.org
> *Objet :* Re: [R] Genuine relative paths with R
> On 10/10/2018 10:37 AM, Olivier GIVAUDAN wrote:
>> Hi Jeff,
>> ?
>>> That is, there is not always a file in a particular directory even involved in the executing code.??
>> ?
>> True. I'm only asking in the case where some R code is run from an R file. This function 'MyOwnPath()' (say) should only work (i.e. return a useful result) in this case.?
>> ?
>>> The R interpreter does not make assumptions about where the code it is running came from.?
>> ?
>> That's precisely the reproach I have in case the code comes from a file.?
>> ?
>>> You also keep referring to "this feature" being in many languages, though you seem to be mistaken about most of them...?
>> ?
>> 'Most of them' is largely exaggerated (plus I corrected myself): I only mixed between the 'cd' variable / command in Windows and Linux shells (you would certainly agree it's a bit vicious).?
>> ?
>>> $PWD is the same as getwd()?
>> ?
>> Wrong. As I already said, if I create an R script located somewhere on my computer with the only line 'getwd()' and run this script, I won't get the directory of this R script, contrary to a shell file with the only line '$PWD'.?
> 
> What system are you talking about?? On Unix-alikes, you'd need an "echo"
> ahead of that, and it would print the user's working directory, not the
> working directory of the script.
> 
> Duncan Murdoch
> 
>> ?
>>> __FILE__ in C relates to the source code directory that is usually not where the executable is ?located and may not even exist on the computer it is running on?
>> ?
>> Yes, and? What is the issue here? So '__FILE__' does the job. Invoking '__FILE__' in a .C file (I never said in its related executable) will return the absolute path of this C source file.?
>> '__DIR__' in PHP also does the job. No to forget the good old VBA (Excel in this case) 'ActiveWorkbook.Path'.?
>> 
>> Thank you for the 2 references you provided.
>> However it seems that some manual settings are still required to be able to use Rscript.
>> But I like the solution of the .RData file: I simply created an empty .RData file at the root of my project and by double-clicking on this file (as you said), the R GUI opens and 'getwd()' returns the path of this .RData file. It seems to be a good alternative  to .Rproj file to be opened with RStudio.
>> ?
>>> However, by far the best approach is to teach your users to fish... if you give them an RStudio project directory they can double-click on the .Rproj ?file to set the current directory and enter the world of R.??
>> ?
>> Yes, using an .Rproj file to be opened with RStudio also seems to me to be a reasonable solution (the one I chose until now), although it is still a workaround and requires RStudio.?
>> Actually in this case, the package 'here'? I previously mentioned is useless to get the current working directory of the project as 'When a project is opened within RStudio the following actions are taken: [...] The current working directory is set to the  project directory.', as stated on this page: 
> https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects.
>> So 'getwd()' returns exactly the same as 'here()' does.
>> 
>> Best regards,?
>> ?
>> Olivier
>> 
>> ________________________________
>> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>> Envoy? : dimanche 7 octobre 2018 20:48
>> ? : Olivier GIVAUDAN
>> Cc : D?nes T?th; r-help at r-project.org
>> Objet : RE: [R] Genuine relative paths with R
>> 
>> On Sun, 7 Oct 2018, Olivier GIVAUDAN wrote:
>> 
>>> Hello Denes,
>>>
>>>> Yes, the path to the "root" folder of your project. You seem to have a
>>> really esoteric context if you want to run an R script without knowing
>>> its path in the file system.
>>>
>>> I don't have any esoteric context: I'm just looking for the most generic, automatic and reproducible solution.
>>> Of course you always know where an R script is located, nevertheless it doesn't imply you want to manually write its path in this
>>> R script. The issue is to have to hardcode an absolute path: I don't want that.
>>>
>>>> Because it is extremely rare that someone - who uses R for what it is
>>> worth and in a manner how R is supposed to be used - actually needs such
>>> a function.
>>>
>> 
>>> First, the fact that it is rare doesn't mean this need is not legitimate
>>> and relevant: it is needed to make R projects fully movable (i.e.
>>> wherever you want). Second why a vast majority of languages does have
>>> this feature and not R? Why is it useful in these languages and not in
>>> R?
>> 
>> The R interpreter does not make assumptions about where the code it is
>> running came from. You might be running it by using the source() function,
>> or by using the Rscript program, or by R CMD BATCH, or using eval() on
>> code you pasted together in an R function, or as byte-compiled code loaded
>> from an RData file. That is, there is not always a file in a particular
>> directory even involved in the executing code.
>> 
>> You also keep referring to "this feature" being in many languages, though
>> you seem to be mistaken about most of them... in fact, they, too, know NOT
>> where the script is but where the current directory is ($PWD is the same
>> as getwd()) or where the compilation occurred (__FILE__ in C relates to
>> the source code directory that is usually not where the executable is
>> located and may not even exist on the computer it is running on).
>> 
>> I have already pointed out that the solution is to let the OS set the
>> current directory. If you want the user to have access to R independent of
>> your code, the easiest way to leave them in Rgui after your code is done
>> is to use save.image() to create a "myApp.RData" file which can be
>> double-clicked [1]. The double-clicking action by default (as defined by
>> the installation of R) causes the operating system to set the current
>> directory to the one containing the file you double-clicked on and then
>> executes the Rgui program.
>> 
>> If you don't want the user to interact with your session, you can use the
>> Rscript executable (also mentioned briefly at the bottom of [1]). In both
>> cases, the user has (unknowingly) set the current directory before running
>> your code, and there is no need to encode where the script is or was
>> inside the script.
>> 
>> You can also create a windows shortcut to invoke Rscript yourself by
>> bootstrapping the RData file and invoking the
>> R.utils::createWindowsShortcut() [2] function.
>> 
>> However, by far the best approach is to teach your users to fish... if you
>> give them an RStudio project directory they can double-click on the .Rproj
>> file to set the current directory and enter the world of R.
>> 
>> [1] https://www.r-bloggers.com/look-ma-no-typing-autorunning-code-on-r-startup/
>> [2] https://cran.r-project.org/web/packages/R.utils/R.utils.pdf
>> 
>> End comment.
>> 
>>> Best regards,
>>>
>>> Olivier
>>>
>>> _________________________________________________________________________________________________________________________________
>>> De : D?nes T?th <toth.denes at kogentum.hu>
>>> Envoy? : samedi 6 octobre 2018 23:36
>>> ? : Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
>>> Objet : Re: [R] Genuine relative paths with R
>>> Hi Olivier,
>>>
>>>
>>> On 10/07/2018 01:13 AM, Olivier GIVAUDAN wrote:
>>>> Hi Denes,
>>>>
>>>> Thank you for the possibility you shared: unfortunately it still uses
>>>> one hardcoded absolute path which I want to avoid.
>>>
>>> Yes, the path to the "root" folder of your project. You seem to have a
>>> really esoteric context if you want to run an R script without knowing
>>> its path in the file system.
>>>
>>>>
>>>> I just think that the solutions suggested are too complicated for my
>>>> simple need.
>>>>
>>>> The root cause being that R doesn't seem to have the Windows batch
>>>> equivalent of cd, or bash equivalent of $PWD, or PHP equivalent of __DIR__.
>>>> Hence the workarounds we are discussing.
>>>>
>>>> And finally we go back to my initial question: if such a function
>>>> doesn't exist in R, what are the reasons?
>>>
>>> Because it is extremely rare that someone - who uses R for what it is
>>> worth and in a manner how R is supposed to be used - actually needs such
>>> a function.
>>>
>>> Best,
>>> Denes
>>>
>>>
>>>
>>>>
>>>> Best regards,
>>>>
>>>> Olivier
>>>> ------------------------------------------------------------------------
>>>> *De :* D?nes T?th <toth.denes at kogentum.hu>
>>>> *Envoy? :* samedi 6 octobre 2018 23:05
>>>> *?:* Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>> Hi Olivier,
>>>>
>>>> I really think that Ista and Jeff gave you plenty of useful options how
>>>> you can avoid using absolute paths.
>>>>
>>>> One more possibility: you can use `source()` with the chdir = TRUE
>>>> argument (see ?source). If you have a master script which sources other
>>>> files which are located in a fixed hierarchy relative to the location of
>>>> the master script, the only time when you have to use an absolute path
>>>> is when you source your master script, e.g.:
>>>> source("/my/path/to/master.R", chdir = TRUE)
>>>>
>>>> Inside the master script, you can then source the other scripts by
>>>> relative paths, define your 'data' folders relative to the master script
>>>> and let the other scripts use those data paths, etc.
>>>>
>>>> Best,
>>>> Denes
>>>>
>>>>
>>>> On 10/06/2018 11:36 PM, Olivier GIVAUDAN wrote:
>>>>> Hi Jeff,
>>>>>
>>>>> Thanks for sharing your workaround.
>>>>>
>>>>> I guess my last answer to Ista answers your question as well.
>>>>>
>>>>> To me this function (an equivalent of 'cd', say) should be platform-independent.
>>>>>
>>>>> Best regards,
>>>>>
>>>>> Olivier
>>>>>
>>>>> ________________________________
>>>>> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>>>>> Envoy??? : samedi 6 octobre 2018 19:31
>>>>> ??? : r-help at r-project.org; Olivier GIVAUDAN; r-help at r-project.org
>>>>> Objet : Re: [R] Genuine relative paths with R
>>>>>
>>>>> I stopped using hardcoded absolute paths inside R scripts years ago, and I suspect that is fairly common practice. That is, I
>>> almost never enter a path starting with "/" or "c:/" in an R script.
>>>>>
>>>>> The key concession you have to make is to start your R session in your working directory using OS-specific mechanisms, and
>>> then reference your code and data relative to that directory. RStudio project files offer one mechanism for doing this; using CD
>>> from? the OS command line is another, and using the file-browser
>>>> double-click mechanism on .RData files is another (though I prefer to
>>>> avoid that these days due to potential global environment contamination).
>>>>>
>>>>> Perhaps you can be more specific about what facilities you are expecting to find. You should also mention what OS you
>>> typically use and how you normally start R.
>>>>>
>>>>> On October 6, 2018 4:48:44 AM PDT, Olivier GIVAUDAN <olivier_givaudan at hotmail.com> wrote:
>>>>>> Dear R users,
>>>>>>
>>>>>> I would like to work with genuine relative paths in R for obvious
>>>>>> reasons: if I move all my scripts related to some project as a whole to
>>>>>> another location of my computer or someone else's computer, if want my
>>>>>> scripts to continue to run seamlessly.
>>>>>>
>>>>>> What I mean by "genuine" is that it should not be necessary to hardcode
>>>>>> one single absolute path (making the code obviously not "portable" - to
>>>>>> another place - anymore).
>>>>>>
>>>>>> For the time being, I found the following related posts, unfortunately
>>>>>> never conclusive or even somewhat off-topic:
>>>>>> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
>>>>>> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
>>>>>> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
>>>>>>
>>>>>> So I found 2 workarounds, more or less satisfactory:
>>>>>>
>>>>>>
>>>>>> 1.? Either create a variable "ScriptPath" in the first lines of each of
>>>>>> my R scripts and run a batch (or shell, etc.) to replace every single
>>>>>> occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R
>>>>>> script]" in all the R scripts located in the folder (and possibly
>>>>>> subfolders) of the batch file.
>>>>>> 2.? Or create an R project file with RStudio and use the package "here"
>>>>>> to get the absolute path of the R project file and put all the R
>>>>>> scripts related to this project in the R project directory, as often
>>>>>> recommended.
>>>>>>
>>>>>> But I am really wondering why R doesn't have (please tell me if I'm
>>>>>> wrong) this basic feature as many other languages have it (batch,
>>>>>> shell, C, LaTeX, SAS with macro-variables, etc.)?
>>>>>> Do you know whether the language will have this kind of function in a
>>>>>> near future? What are the obstacles / what is the reasoning for not
>>>>>> having it already?
>>>>>>
>>>>>> Do you know other workarounds?
>>>>>>
>>>>>> Best regards,
>>>>>>
>>>>>> Olivier
>>>>>>
>>>>>>???????? [[alternative HTML version deleted]]
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>> PLEASE do read the posting guide
>>>>>> http://www.R-project.org/posting-guide.html
>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>
>>>>> --
>>>>> Sent from my phone. Please excuse my brevity.
>>>>>
>>>>>???????? [[alternative HTML version deleted]]
>>>>>
>>>>>
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>
>>>
>>>
>> 
>> ---------------------------------------------------------------------------
>> Jeff Newmiller??????????????????????? The???? .....?????? .....? Go Live...
>> DCN:<jdnewmil at dcn.davis.ca.us>??????? Basics: ##.#.?????? ##.#.? Live Go...
>>???????????????????????????????????????? Live:?? OO#.. Dead: OO#..? Playing
>> Research Engineer (Solar/Batteries??????????? O.O#.?????? #.O#.? with
>> /Software/Embedded Controllers)?????????????? .OO#.?????? .OO#.? rocks...1k
>> ---------------------------------------------------------------------------
>> 
>>??????? [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>> 
>



From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Oct 10 17:21:44 2018
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 10 Oct 2018 11:21:44 -0400
Subject: [R] Genuine relative paths with R
In-Reply-To: <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <EF096B6D-D167-402E-A1BB-9310D60E6F64@dcn.davis.ca.us>
 <VI1PR0202MB33571A964A191D165B3BF422F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <292ca297-27e3-162b-e525-fabc4bb4554c@kogentum.hu>
 <VI1PR0202MB3357E9066FF1527BAC014784F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <dbde4f15-caa6-dc62-3a10-e804cc81671a@kogentum.hu>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
Message-ID: <a14ecc19-f7ff-45a8-c931-c215111b9d29@gmail.com>

On 10/10/2018 11:20 AM, Duncan Murdoch wrote:
> On 10/10/2018 11:18 AM, Olivier GIVAUDAN wrote:
>> Hi Duncan,
>>
>> Yes, if you need to display the content of $PWD you obviously need to
>> type 'echo' before this variable.
>>
>> It prints the user's working directory if run from a terminal but if run
>> from a bash file it prints the working directory of the script.
>> At least for me (I am running on the last version of Ubuntu)...
> 
> Not for me.  Always prints the user's working directory.

... unless some earlier lines in the script changed it, of course.

Duncan Murdoch

> 
> Duncan Murdoch
> 
> 
>>
>> Best regards,
>>
>> Olivier
>> ------------------------------------------------------------------------
>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>> *Envoy? :* mercredi 10 octobre 2018 14:51
>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>> *Cc?:* r-help at r-project.org
>> *Objet :* Re: [R] Genuine relative paths with R
>> On 10/10/2018 10:37 AM, Olivier GIVAUDAN wrote:
>>> Hi Jeff,
>>> ?
>>>> That is, there is not always a file in a particular directory even involved in the executing code.??
>>> ?
>>> True. I'm only asking in the case where some R code is run from an R file. This function 'MyOwnPath()' (say) should only work (i.e. return a useful result) in this case.?
>>> ?
>>>> The R interpreter does not make assumptions about where the code it is running came from.?
>>> ?
>>> That's precisely the reproach I have in case the code comes from a file.?
>>> ?
>>>> You also keep referring to "this feature" being in many languages, though you seem to be mistaken about most of them...?
>>> ?
>>> 'Most of them' is largely exaggerated (plus I corrected myself): I only mixed between the 'cd' variable / command in Windows and Linux shells (you would certainly agree it's a bit vicious).?
>>> ?
>>>> $PWD is the same as getwd()?
>>> ?
>>> Wrong. As I already said, if I create an R script located somewhere on my computer with the only line 'getwd()' and run this script, I won't get the directory of this R script, contrary to a shell file with the only line '$PWD'.?
>>
>> What system are you talking about?? On Unix-alikes, you'd need an "echo"
>> ahead of that, and it would print the user's working directory, not the
>> working directory of the script.
>>
>> Duncan Murdoch
>>
>>> ?
>>>> __FILE__ in C relates to the source code directory that is usually not where the executable is ?located and may not even exist on the computer it is running on?
>>> ?
>>> Yes, and? What is the issue here? So '__FILE__' does the job. Invoking '__FILE__' in a .C file (I never said in its related executable) will return the absolute path of this C source file.?
>>> '__DIR__' in PHP also does the job. No to forget the good old VBA (Excel in this case) 'ActiveWorkbook.Path'.?
>>>
>>> Thank you for the 2 references you provided.
>>> However it seems that some manual settings are still required to be able to use Rscript.
>>> But I like the solution of the .RData file: I simply created an empty .RData file at the root of my project and by double-clicking on this file (as you said), the R GUI opens and 'getwd()' returns the path of this .RData file. It seems to be a good alternative  to .Rproj file to be opened with RStudio.
>>> ?
>>>> However, by far the best approach is to teach your users to fish... if you give them an RStudio project directory they can double-click on the .Rproj ?file to set the current directory and enter the world of R.??
>>> ?
>>> Yes, using an .Rproj file to be opened with RStudio also seems to me to be a reasonable solution (the one I chose until now), although it is still a workaround and requires RStudio.?
>>> Actually in this case, the package 'here'? I previously mentioned is useless to get the current working directory of the project as 'When a project is opened within RStudio the following actions are taken: [...] The current working directory is set to the  project directory.', as stated on this page:
>> https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects.
>>> So 'getwd()' returns exactly the same as 'here()' does.
>>>
>>> Best regards,?
>>> ?
>>> Olivier
>>>
>>> ________________________________
>>> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>>> Envoy? : dimanche 7 octobre 2018 20:48
>>> ? : Olivier GIVAUDAN
>>> Cc : D?nes T?th; r-help at r-project.org
>>> Objet : RE: [R] Genuine relative paths with R
>>>
>>> On Sun, 7 Oct 2018, Olivier GIVAUDAN wrote:
>>>
>>>> Hello Denes,
>>>>
>>>>> Yes, the path to the "root" folder of your project. You seem to have a
>>>> really esoteric context if you want to run an R script without knowing
>>>> its path in the file system.
>>>>
>>>> I don't have any esoteric context: I'm just looking for the most generic, automatic and reproducible solution.
>>>> Of course you always know where an R script is located, nevertheless it doesn't imply you want to manually write its path in this
>>>> R script. The issue is to have to hardcode an absolute path: I don't want that.
>>>>
>>>>> Because it is extremely rare that someone - who uses R for what it is
>>>> worth and in a manner how R is supposed to be used - actually needs such
>>>> a function.
>>>>
>>>
>>>> First, the fact that it is rare doesn't mean this need is not legitimate
>>>> and relevant: it is needed to make R projects fully movable (i.e.
>>>> wherever you want). Second why a vast majority of languages does have
>>>> this feature and not R? Why is it useful in these languages and not in
>>>> R?
>>>
>>> The R interpreter does not make assumptions about where the code it is
>>> running came from. You might be running it by using the source() function,
>>> or by using the Rscript program, or by R CMD BATCH, or using eval() on
>>> code you pasted together in an R function, or as byte-compiled code loaded
>>> from an RData file. That is, there is not always a file in a particular
>>> directory even involved in the executing code.
>>>
>>> You also keep referring to "this feature" being in many languages, though
>>> you seem to be mistaken about most of them... in fact, they, too, know NOT
>>> where the script is but where the current directory is ($PWD is the same
>>> as getwd()) or where the compilation occurred (__FILE__ in C relates to
>>> the source code directory that is usually not where the executable is
>>> located and may not even exist on the computer it is running on).
>>>
>>> I have already pointed out that the solution is to let the OS set the
>>> current directory. If you want the user to have access to R independent of
>>> your code, the easiest way to leave them in Rgui after your code is done
>>> is to use save.image() to create a "myApp.RData" file which can be
>>> double-clicked [1]. The double-clicking action by default (as defined by
>>> the installation of R) causes the operating system to set the current
>>> directory to the one containing the file you double-clicked on and then
>>> executes the Rgui program.
>>>
>>> If you don't want the user to interact with your session, you can use the
>>> Rscript executable (also mentioned briefly at the bottom of [1]). In both
>>> cases, the user has (unknowingly) set the current directory before running
>>> your code, and there is no need to encode where the script is or was
>>> inside the script.
>>>
>>> You can also create a windows shortcut to invoke Rscript yourself by
>>> bootstrapping the RData file and invoking the
>>> R.utils::createWindowsShortcut() [2] function.
>>>
>>> However, by far the best approach is to teach your users to fish... if you
>>> give them an RStudio project directory they can double-click on the .Rproj
>>> file to set the current directory and enter the world of R.
>>>
>>> [1] https://www.r-bloggers.com/look-ma-no-typing-autorunning-code-on-r-startup/
>>> [2] https://cran.r-project.org/web/packages/R.utils/R.utils.pdf
>>>
>>> End comment.
>>>
>>>> Best regards,
>>>>
>>>> Olivier
>>>>
>>>> _________________________________________________________________________________________________________________________________
>>>> De : D?nes T?th <toth.denes at kogentum.hu>
>>>> Envoy? : samedi 6 octobre 2018 23:36
>>>> ? : Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
>>>> Objet : Re: [R] Genuine relative paths with R
>>>> Hi Olivier,
>>>>
>>>>
>>>> On 10/07/2018 01:13 AM, Olivier GIVAUDAN wrote:
>>>>> Hi Denes,
>>>>>
>>>>> Thank you for the possibility you shared: unfortunately it still uses
>>>>> one hardcoded absolute path which I want to avoid.
>>>>
>>>> Yes, the path to the "root" folder of your project. You seem to have a
>>>> really esoteric context if you want to run an R script without knowing
>>>> its path in the file system.
>>>>
>>>>>
>>>>> I just think that the solutions suggested are too complicated for my
>>>>> simple need.
>>>>>
>>>>> The root cause being that R doesn't seem to have the Windows batch
>>>>> equivalent of cd, or bash equivalent of $PWD, or PHP equivalent of __DIR__.
>>>>> Hence the workarounds we are discussing.
>>>>>
>>>>> And finally we go back to my initial question: if such a function
>>>>> doesn't exist in R, what are the reasons?
>>>>
>>>> Because it is extremely rare that someone - who uses R for what it is
>>>> worth and in a manner how R is supposed to be used - actually needs such
>>>> a function.
>>>>
>>>> Best,
>>>> Denes
>>>>
>>>>
>>>>
>>>>>
>>>>> Best regards,
>>>>>
>>>>> Olivier
>>>>> ------------------------------------------------------------------------
>>>>> *De :* D?nes T?th <toth.denes at kogentum.hu>
>>>>> *Envoy? :* samedi 6 octobre 2018 23:05
>>>>> *?:* Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
>>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>>> Hi Olivier,
>>>>>
>>>>> I really think that Ista and Jeff gave you plenty of useful options how
>>>>> you can avoid using absolute paths.
>>>>>
>>>>> One more possibility: you can use `source()` with the chdir = TRUE
>>>>> argument (see ?source). If you have a master script which sources other
>>>>> files which are located in a fixed hierarchy relative to the location of
>>>>> the master script, the only time when you have to use an absolute path
>>>>> is when you source your master script, e.g.:
>>>>> source("/my/path/to/master.R", chdir = TRUE)
>>>>>
>>>>> Inside the master script, you can then source the other scripts by
>>>>> relative paths, define your 'data' folders relative to the master script
>>>>> and let the other scripts use those data paths, etc.
>>>>>
>>>>> Best,
>>>>> Denes
>>>>>
>>>>>
>>>>> On 10/06/2018 11:36 PM, Olivier GIVAUDAN wrote:
>>>>>> Hi Jeff,
>>>>>>
>>>>>> Thanks for sharing your workaround.
>>>>>>
>>>>>> I guess my last answer to Ista answers your question as well.
>>>>>>
>>>>>> To me this function (an equivalent of 'cd', say) should be platform-independent.
>>>>>>
>>>>>> Best regards,
>>>>>>
>>>>>> Olivier
>>>>>>
>>>>>> ________________________________
>>>>>> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>>>>>> Envoy??? : samedi 6 octobre 2018 19:31
>>>>>> ??? : r-help at r-project.org; Olivier GIVAUDAN; r-help at r-project.org
>>>>>> Objet : Re: [R] Genuine relative paths with R
>>>>>>
>>>>>> I stopped using hardcoded absolute paths inside R scripts years ago, and I suspect that is fairly common practice. That is, I
>>>> almost never enter a path starting with "/" or "c:/" in an R script.
>>>>>>
>>>>>> The key concession you have to make is to start your R session in your working directory using OS-specific mechanisms, and
>>>> then reference your code and data relative to that directory. RStudio project files offer one mechanism for doing this; using CD
>>>> from? the OS command line is another, and using the file-browser
>>>>> double-click mechanism on .RData files is another (though I prefer to
>>>>> avoid that these days due to potential global environment contamination).
>>>>>>
>>>>>> Perhaps you can be more specific about what facilities you are expecting to find. You should also mention what OS you
>>>> typically use and how you normally start R.
>>>>>>
>>>>>> On October 6, 2018 4:48:44 AM PDT, Olivier GIVAUDAN <olivier_givaudan at hotmail.com> wrote:
>>>>>>> Dear R users,
>>>>>>>
>>>>>>> I would like to work with genuine relative paths in R for obvious
>>>>>>> reasons: if I move all my scripts related to some project as a whole to
>>>>>>> another location of my computer or someone else's computer, if want my
>>>>>>> scripts to continue to run seamlessly.
>>>>>>>
>>>>>>> What I mean by "genuine" is that it should not be necessary to hardcode
>>>>>>> one single absolute path (making the code obviously not "portable" - to
>>>>>>> another place - anymore).
>>>>>>>
>>>>>>> For the time being, I found the following related posts, unfortunately
>>>>>>> never conclusive or even somewhat off-topic:
>>>>>>> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
>>>>>>> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
>>>>>>> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
>>>>>>>
>>>>>>> So I found 2 workarounds, more or less satisfactory:
>>>>>>>
>>>>>>>
>>>>>>> 1.? Either create a variable "ScriptPath" in the first lines of each of
>>>>>>> my R scripts and run a batch (or shell, etc.) to replace every single
>>>>>>> occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R
>>>>>>> script]" in all the R scripts located in the folder (and possibly
>>>>>>> subfolders) of the batch file.
>>>>>>> 2.? Or create an R project file with RStudio and use the package "here"
>>>>>>> to get the absolute path of the R project file and put all the R
>>>>>>> scripts related to this project in the R project directory, as often
>>>>>>> recommended.
>>>>>>>
>>>>>>> But I am really wondering why R doesn't have (please tell me if I'm
>>>>>>> wrong) this basic feature as many other languages have it (batch,
>>>>>>> shell, C, LaTeX, SAS with macro-variables, etc.)?
>>>>>>> Do you know whether the language will have this kind of function in a
>>>>>>> near future? What are the obstacles / what is the reasoning for not
>>>>>>> having it already?
>>>>>>>
>>>>>>> Do you know other workarounds?
>>>>>>>
>>>>>>> Best regards,
>>>>>>>
>>>>>>> Olivier
>>>>>>>
>>>>>>>  ???????? [[alternative HTML version deleted]]
>>>>>>>
>>>>>>> ______________________________________________
>>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>> PLEASE do read the posting guide
>>>>>>> http://www.R-project.org/posting-guide.html
>>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>
>>>>>> --
>>>>>> Sent from my phone. Please excuse my brevity.
>>>>>>
>>>>>>  ???????? [[alternative HTML version deleted]]
>>>>>>
>>>>>>
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------------
>>> Jeff Newmiller??????????????????????? The???? .....?????? .....? Go Live...
>>> DCN:<jdnewmil at dcn.davis.ca.us>??????? Basics: ##.#.?????? ##.#.? Live Go...
>>>  ???????????????????????????????????????? Live:?? OO#.. Dead: OO#..? Playing
>>> Research Engineer (Solar/Batteries??????????? O.O#.?????? #.O#.? with
>>> /Software/Embedded Controllers)?????????????? .OO#.?????? .OO#.? rocks...1k
>>> ---------------------------------------------------------------------------
>>>
>>>  ??????? [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>



From wdun|@p @end|ng |rom t|bco@com  Wed Oct 10 17:25:26 2018
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Wed, 10 Oct 2018 08:25:26 -0700
Subject: [R] Genuine relative paths with R
In-Reply-To: <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <EF096B6D-D167-402E-A1BB-9310D60E6F64@dcn.davis.ca.us>
 <VI1PR0202MB33571A964A191D165B3BF422F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <292ca297-27e3-162b-e525-fabc4bb4554c@kogentum.hu>
 <VI1PR0202MB3357E9066FF1527BAC014784F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <dbde4f15-caa6-dc62-3a10-e804cc81671a@kogentum.hu>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
Message-ID: <CAF8bMcY-nF22Z0jOavfTKu7rc2L55x++N2XTUUjMe3+=b3FFhw@mail.gmail.com>

I am curious about why it is desirable for a script to know where in the
file system it is.  Is it because you have a set of scripts invoking each
other?  If so, the best route it to convert the scripts into functions and
put them into a package.  Functions do know which package they live in and
they "prefer" to call other functions in their own package (or other
packages which they have declared).

Or is there some other reason?


Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Wed, Oct 10, 2018 at 8:18 AM, Olivier GIVAUDAN <
olivier_givaudan at hotmail.com> wrote:

> Hi Duncan,
>
> Yes, if you need to display the content of $PWD you obviously need to type
> 'echo' before this variable.
>
> It prints the user's working directory if run from a terminal but if run
> from a bash file it prints the working directory of the script.
> At least for me (I am running on the last version of Ubuntu)...
>
> Best regards,
>
> Olivier
> ________________________________
> De : Duncan Murdoch <murdoch.duncan at gmail.com>
> Envoy? : mercredi 10 octobre 2018 14:51
> ? : Olivier GIVAUDAN; Jeff Newmiller
> Cc : r-help at r-project.org
> Objet : Re: [R] Genuine relative paths with R
>
> On 10/10/2018 10:37 AM, Olivier GIVAUDAN wrote:
> > Hi Jeff,
> > ?
> >> That is, there is not always a file in a particular directory even
> involved in the executing code.??
> > ?
> > True. I'm only asking in the case where some R code is run from an R
> file. This function 'MyOwnPath()' (say) should only work (i.e. return a
> useful result) in this case.?
> > ?
> >> The R interpreter does not make assumptions about where the code it is
> running came from.?
> > ?
> > That's precisely the reproach I have in case the code comes from a file.?
> > ?
> >> You also keep referring to "this feature" being in many languages,
> though you seem to be mistaken about most of them...?
> > ?
> > 'Most of them' is largely exaggerated (plus I corrected myself): I only
> mixed between the 'cd' variable / command in Windows and Linux shells (you
> would certainly agree it's a bit vicious).?
> > ?
> >> $PWD is the same as getwd()?
> > ?
> > Wrong. As I already said, if I create an R script located somewhere on
> my computer with the only line 'getwd()' and run this script, I won't get
> the directory of this R script, contrary to a shell file with the only line
> '$PWD'.?
>
> What system are you talking about?  On Unix-alikes, you'd need an "echo"
> ahead of that, and it would print the user's working directory, not the
> working directory of the script.
>
> Duncan Murdoch
>
> > ?
> >> __FILE__ in C relates to the source code directory that is usually not
> where the executable is ?located and may not even exist on the computer it
> is running on?
> > ?
> > Yes, and? What is the issue here? So '__FILE__' does the job. Invoking
> '__FILE__' in a .C file (I never said in its related executable) will
> return the absolute path of this C source file.?
> > '__DIR__' in PHP also does the job. No to forget the good old VBA (Excel
> in this case) 'ActiveWorkbook.Path'.?
> >
> > Thank you for the 2 references you provided.
> > However it seems that some manual settings are still required to be able
> to use Rscript.
> > But I like the solution of the .RData file: I simply created an empty
> .RData file at the root of my project and by double-clicking on this file
> (as you said), the R GUI opens and 'getwd()' returns the path of this
> .RData file. It seems to be a good alternative to .Rproj file to be opened
> with RStudio.
> > ?
> >> However, by far the best approach is to teach your users to fish... if
> you give them an RStudio project directory they can double-click on the
> .Rproj ?file to set the current directory and enter the world of R.??
> > ?
> > Yes, using an .Rproj file to be opened with RStudio also seems to me to
> be a reasonable solution (the one I chose until now), although it is still
> a workaround and requires RStudio.?
> > Actually in this case, the package 'here'? I previously mentioned is
> useless to get the current working directory of the project as 'When a
> project is opened within RStudio the following actions are taken: [...] The
> current working directory is set to the project directory.', as stated on
> this page: https://support.rstudio.com/hc/en-us/articles/200526207-
> Using-Projects.
> > So 'getwd()' returns exactly the same as 'here()' does.
> >
> > Best regards,?
> > ?
> > Olivier
> >
> > ________________________________
> > De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> > Envoy? : dimanche 7 octobre 2018 20:48
> > ? : Olivier GIVAUDAN
> > Cc : D?nes T?th; r-help at r-project.org
> > Objet : RE: [R] Genuine relative paths with R
> >
> > On Sun, 7 Oct 2018, Olivier GIVAUDAN wrote:
> >
> >> Hello Denes,
> >>
> >>> Yes, the path to the "root" folder of your project. You seem to have a
> >> really esoteric context if you want to run an R script without knowing
> >> its path in the file system.
> >>
> >> I don't have any esoteric context: I'm just looking for the most
> generic, automatic and reproducible solution.
> >> Of course you always know where an R script is located, nevertheless it
> doesn't imply you want to manually write its path in this
> >> R script. The issue is to have to hardcode an absolute path: I don't
> want that.
> >>
> >>> Because it is extremely rare that someone - who uses R for what it is
> >> worth and in a manner how R is supposed to be used - actually needs such
> >> a function.
> >>
> >
> >> First, the fact that it is rare doesn't mean this need is not legitimate
> >> and relevant: it is needed to make R projects fully movable (i.e.
> >> wherever you want). Second why a vast majority of languages does have
> >> this feature and not R? Why is it useful in these languages and not in
> >> R?
> >
> > The R interpreter does not make assumptions about where the code it is
> > running came from. You might be running it by using the source()
> function,
> > or by using the Rscript program, or by R CMD BATCH, or using eval() on
> > code you pasted together in an R function, or as byte-compiled code
> loaded
> > from an RData file. That is, there is not always a file in a particular
> > directory even involved in the executing code.
> >
> > You also keep referring to "this feature" being in many languages, though
> > you seem to be mistaken about most of them... in fact, they, too, know
> NOT
> > where the script is but where the current directory is ($PWD is the same
> > as getwd()) or where the compilation occurred (__FILE__ in C relates to
> > the source code directory that is usually not where the executable is
> > located and may not even exist on the computer it is running on).
> >
> > I have already pointed out that the solution is to let the OS set the
> > current directory. If you want the user to have access to R independent
> of
> > your code, the easiest way to leave them in Rgui after your code is done
> > is to use save.image() to create a "myApp.RData" file which can be
> > double-clicked [1]. The double-clicking action by default (as defined by
> > the installation of R) causes the operating system to set the current
> > directory to the one containing the file you double-clicked on and then
> > executes the Rgui program.
> >
> > If you don't want the user to interact with your session, you can use the
> > Rscript executable (also mentioned briefly at the bottom of [1]). In both
> > cases, the user has (unknowingly) set the current directory before
> running
> > your code, and there is no need to encode where the script is or was
> > inside the script.
> >
> > You can also create a windows shortcut to invoke Rscript yourself by
> > bootstrapping the RData file and invoking the
> > R.utils::createWindowsShortcut() [2] function.
> >
> > However, by far the best approach is to teach your users to fish... if
> you
> > give them an RStudio project directory they can double-click on the
> .Rproj
> > file to set the current directory and enter the world of R.
> >
> > [1] https://www.r-bloggers.com/look-ma-no-typing-autorunning-
> code-on-r-startup/
> > [2] https://cran.r-project.org/web/packages/R.utils/R.utils.pdf
> >
> > End comment.
> >
> >> Best regards,
> >>
> >> Olivier
> >>
> >> ____________________________________________________________
> _____________________________________________________________________
> >> De : D?nes T?th <toth.denes at kogentum.hu>
> >> Envoy? : samedi 6 octobre 2018 23:36
> >> ? : Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
> >> Objet : Re: [R] Genuine relative paths with R
> >> Hi Olivier,
> >>
> >>
> >> On 10/07/2018 01:13 AM, Olivier GIVAUDAN wrote:
> >>> Hi Denes,
> >>>
> >>> Thank you for the possibility you shared: unfortunately it still uses
> >>> one hardcoded absolute path which I want to avoid.
> >>
> >> Yes, the path to the "root" folder of your project. You seem to have a
> >> really esoteric context if you want to run an R script without knowing
> >> its path in the file system.
> >>
> >>>
> >>> I just think that the solutions suggested are too complicated for my
> >>> simple need.
> >>>
> >>> The root cause being that R doesn't seem to have the Windows batch
> >>> equivalent of cd, or bash equivalent of $PWD, or PHP equivalent of
> __DIR__.
> >>> Hence the workarounds we are discussing.
> >>>
> >>> And finally we go back to my initial question: if such a function
> >>> doesn't exist in R, what are the reasons?
> >>
> >> Because it is extremely rare that someone - who uses R for what it is
> >> worth and in a manner how R is supposed to be used - actually needs such
> >> a function.
> >>
> >> Best,
> >> Denes
> >>
> >>
> >>
> >>>
> >>> Best regards,
> >>>
> >>> Olivier
> >>> ------------------------------------------------------------
> ------------
> >>> *De :* D?nes T?th <toth.denes at kogentum.hu>
> >>> *Envoy? :* samedi 6 octobre 2018 23:05
> >>> *?:* Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
> >>> *Objet :* Re: [R] Genuine relative paths with R
> >>> Hi Olivier,
> >>>
> >>> I really think that Ista and Jeff gave you plenty of useful options how
> >>> you can avoid using absolute paths.
> >>>
> >>> One more possibility: you can use `source()` with the chdir = TRUE
> >>> argument (see ?source). If you have a master script which sources other
> >>> files which are located in a fixed hierarchy relative to the location
> of
> >>> the master script, the only time when you have to use an absolute path
> >>> is when you source your master script, e.g.:
> >>> source("/my/path/to/master.R", chdir = TRUE)
> >>>
> >>> Inside the master script, you can then source the other scripts by
> >>> relative paths, define your 'data' folders relative to the master
> script
> >>> and let the other scripts use those data paths, etc.
> >>>
> >>> Best,
> >>> Denes
> >>>
> >>>
> >>> On 10/06/2018 11:36 PM, Olivier GIVAUDAN wrote:
> >>>> Hi Jeff,
> >>>>
> >>>> Thanks for sharing your workaround.
> >>>>
> >>>> I guess my last answer to Ista answers your question as well.
> >>>>
> >>>> To me this function (an equivalent of 'cd', say) should be
> platform-independent.
> >>>>
> >>>> Best regards,
> >>>>
> >>>> Olivier
> >>>>
> >>>> ________________________________
> >>>> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> >>>> Envoy??? : samedi 6 octobre 2018 19:31
> >>>> ??? : r-help at r-project.org; Olivier GIVAUDAN; r-help at r-project.org
> >>>> Objet : Re: [R] Genuine relative paths with R
> >>>>
> >>>> I stopped using hardcoded absolute paths inside R scripts years ago,
> and I suspect that is fairly common practice. That is, I
> >> almost never enter a path starting with "/" or "c:/" in an R script.
> >>>>
> >>>> The key concession you have to make is to start your R session in
> your working directory using OS-specific mechanisms, and
> >> then reference your code and data relative to that directory. RStudio
> project files offer one mechanism for doing this; using CD
> >> from  the OS command line is another, and using the file-browser
> >>> double-click mechanism on .RData files is another (though I prefer to
> >>> avoid that these days due to potential global environment
> contamination).
> >>>>
> >>>> Perhaps you can be more specific about what facilities you are
> expecting to find. You should also mention what OS you
> >> typically use and how you normally start R.
> >>>>
> >>>> On October 6, 2018 4:48:44 AM PDT, Olivier GIVAUDAN <
> olivier_givaudan at hotmail.com> wrote:
> >>>>> Dear R users,
> >>>>>
> >>>>> I would like to work with genuine relative paths in R for obvious
> >>>>> reasons: if I move all my scripts related to some project as a whole
> to
> >>>>> another location of my computer or someone else's computer, if want
> my
> >>>>> scripts to continue to run seamlessly.
> >>>>>
> >>>>> What I mean by "genuine" is that it should not be necessary to
> hardcode
> >>>>> one single absolute path (making the code obviously not "portable" -
> to
> >>>>> another place - anymore).
> >>>>>
> >>>>> For the time being, I found the following related posts,
> unfortunately
> >>>>> never conclusive or even somewhat off-topic:
> >>>>> https://stackoverflow.com/questions/1815606/rscript-
> determine-path-of-the-executing-script
> >>>>> https://stackoverflow.com/questions/47044068/get-the-
> path-of-current-script/47045368
> >>>>> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-
> path-td2719676.html
> >>>>>
> >>>>> So I found 2 workarounds, more or less satisfactory:
> >>>>>
> >>>>>
> >>>>> 1.  Either create a variable "ScriptPath" in the first lines of each
> of
> >>>>> my R scripts and run a batch (or shell, etc.) to replace every single
> >>>>> occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of
> the R
> >>>>> script]" in all the R scripts located in the folder (and possibly
> >>>>> subfolders) of the batch file.
> >>>>> 2.  Or create an R project file with RStudio and use the package
> "here"
> >>>>> to get the absolute path of the R project file and put all the R
> >>>>> scripts related to this project in the R project directory, as often
> >>>>> recommended.
> >>>>>
> >>>>> But I am really wondering why R doesn't have (please tell me if I'm
> >>>>> wrong) this basic feature as many other languages have it (batch,
> >>>>> shell, C, LaTeX, SAS with macro-variables, etc.)?
> >>>>> Do you know whether the language will have this kind of function in a
> >>>>> near future? What are the obstacles / what is the reasoning for not
> >>>>> having it already?
> >>>>>
> >>>>> Do you know other workarounds?
> >>>>>
> >>>>> Best regards,
> >>>>>
> >>>>> Olivier
> >>>>>
> >>>>>         [[alternative HTML version deleted]]
> >>>>>
> >>>>> ______________________________________________
> >>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>>> PLEASE do read the posting guide
> >>>>> http://www.R-project.org/posting-guide.html
> >>>>> and provide commented, minimal, self-contained, reproducible code.
> >>>>
> >>>> --
> >>>> Sent from my phone. Please excuse my brevity.
> >>>>
> >>>>         [[alternative HTML version deleted]]
> >>>>
> >>>>
> >>>>
> >>>> ______________________________________________
> >>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> >>>> and provide commented, minimal, self-contained, reproducible code.
> >>>>
> >>
> >>
> >
> > ------------------------------------------------------------
> ---------------
> > Jeff Newmiller                        The     .....       .....  Go
> Live...
> > DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live
> Go...
> >                                         Live:   OO#.. Dead: OO#..
> Playing
> > Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
> > /Software/Embedded Controllers)               .OO#.       .OO#.
> rocks...1k
> > ------------------------------------------------------------
> ---------------
> >
> >        [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From |uke-t|erney @end|ng |rom u|ow@@edu  Wed Oct 10 17:48:22 2018
From: |uke-t|erney @end|ng |rom u|ow@@edu (Tierney, Luke)
Date: Wed, 10 Oct 2018 15:48:22 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <VI1PR0202MB3357ECAFF18BC7D7DD83E11FF5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <60714a3e-2ef5-5563-7dcc-eb4965f966d4@uke.de>
 <VI1PR0202MB3357ECAFF18BC7D7DD83E11FF5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
Message-ID: <alpine.DEB.2.21.1810101044310.3154@luke-Latitude-7480>

If you are always running your main script as 'Rscript myscript.R'
then your file argument will appear as '--file=myscript.R' in
commandArgs(). So you can use something like

scriptFile <- function()
{
     pat <- "^--file="
     args <- commandArgs()
     file <- args[grepl(pat, args, args)]
     normalizePath(sub(pat, "", file))
}

Then scriptFile() will give you something to work with.

Best,

luke



On Wed, 10 Oct 2018, Olivier GIVAUDAN wrote:

> Dear Eik,
>
> Thank you for your message.
>
> Yes, I already got to know this package and this discussion (while I found the 'here' package). But thanks.
>
> Best regards,
>
> Olivier
> ________________________________
> De : Eik Vettorazzi <E.Vettorazzi at uke.de>
> Envoy??? : lundi 8 octobre 2018 11:30
> ??? : Olivier GIVAUDAN; r-help at r-project.org
> Objet : Re: [R] Genuine relative paths with R
>
> Dear Olivier,
> you may find the rprojroot package useful, see
> https://github.com/r-lib/rprojroot
>
> and a discussion
>
> https://gist.github.com/jennybc/362f52446fe1ebc4c49f#file-2014-10-12_stop-working-directory-insanity-md
>
> Cheers
>
> Am 06.10.2018 um 13:48 schrieb Olivier GIVAUDAN:
>> Dear R users,
>>
>> I would like to work with genuine relative paths in R for obvious reasons: if I move all my scripts related to some project as a whole to another location of my computer or someone else's computer, if want my scripts to continue to run seamlessly.
>>
>> What I mean by "genuine" is that it should not be necessary to hardcode one single absolute path (making the code obviously not "portable" - to another place - anymore).
>>
>> For the time being, I found the following related posts, unfortunately never conclusive or even somewhat off-topic:
>> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
>> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
>> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
>>
>> So I found 2 workarounds, more or less satisfactory:
>>
>>
>>    1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.
>>    2.  Or create an R project file with RStudio and use the package "here" to get the absolute path of the R project file and put all the R scripts related to this project in the R project directory, as often recommended.
>>
>> But I am really wondering why R doesn't have (please tell me if I'm wrong) this basic feature as many other languages have it (batch, shell, C, LaTeX, SAS with macro-variables, etc.)?
>> Do you know whether the language will have this kind of function in a near future? What are the obstacles / what is the reasoning for not having it already?
>>
>> Do you know other workarounds?
>>
>> Best regards,
>>
>> Olivier
>>
>>        [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
> --
> Eik Vettorazzi
>
> Department of Medical Biometry and Epidemiology
> University Medical Center Hamburg-Eppendorf
>
> Martinistrasse 52
> building W 34
> 20246 Hamburg
>
> Phone: +49 (0) 40 7410 - 58243
> Fax:   +49 (0) 40 7410 - 57790
> Web: www.uke.de/imbe<http://www.uke.de/imbe>
> --
>
> _____________________________________________________________________
>
> Universit???tsklinikum Hamburg-Eppendorf; K???rperschaft des ???ffentlichen Rechts; Gerichtsstand: Hamburg | www.uke.de
> Vorstandsmitglieder: Prof. Dr. Burkhard G???ke (Vorsitzender), Prof. Dr. Dr. Uwe Koch-Gromus, Joachim Pr???l???, Martina Saurin (komm.)
> _____________________________________________________________________
>
> SAVE PAPER - THINK BEFORE PRINTING
>
> 	[[alternative HTML version deleted]]
>
>

-- 
Luke Tierney
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:   luke-tierney at uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu



From @@r@h@go@|ee @end|ng |rom gm@||@com  Wed Oct 10 18:14:29 2018
From: @@r@h@go@|ee @end|ng |rom gm@||@com (Sarah Goslee)
Date: Wed, 10 Oct 2018 12:14:29 -0400
Subject: [R] cluster samples using self organizing map in R
In-Reply-To: <CAOQGvC6abdJ=vcT0iW+ngHiPdYmWET4GCn389YnVQMnjODvr=g@mail.gmail.com>
References: <CAOQGvC6abdJ=vcT0iW+ngHiPdYmWET4GCn389YnVQMnjODvr=g@mail.gmail.com>
Message-ID: <CAM_vju=e5BGcxdrt3K5a9EGC8TYYpkfxzQigtKp_OzWxuPkSdw@mail.gmail.com>

Hi Tina,

What's wrong with what you did?

The output object of som() contains the classification of each sample.

You probably do need to read more about self-organizing maps, since
you specified you wanted the samples classified into nine groups, and
that's unlikely to be your actual intent.

I have no idea what you thought your hierarchical clustering step was
supposed to do, either.

Here's one way to get 3 groups instead of 9:

library(kohonen)
iris.sc <- scale(iris[, 1:4])
iris.som <- som(iris.sc, grid=somgrid(xdim = 1, ydim=3,
topo="rectangular"), rlen=100, alpha=c(0.05,0.01))

table(iris.som$unit.classif, iris$Species)
plot(iris.som)

Sarah

On Wed, Oct 10, 2018 at 2:14 AM A DNA RNA <email2mrna at gmail.com> wrote:
>
> Dear All,
>
> Who can I use Self Organizing Map (SOM) results to cluster samples? I have
> tried following but this gives me only the clustering of grids, while I
> want to cluster (150) samples:
>
> library(kohonen)
> iris.sc <- scale(iris[, 1:4])
> iris.som <- som(iris.sc, grid=somgrid(xdim = 3, ydim=3, topo="hexagonal"),
>                rlen=100, alpha=c(0.05,0.01))
> ##hierarchical clustering
> groups <- 3
> iris.hc <- cutree(hclust(dist(iris.som$codes[[1]])), groups)
> iris.hc
> #V1 V2 V3 V4 V5 V6 V7 V8 V9
> #1  1  2  1  1  2  3  3  2
>
>
> Can anyone help me with this please?
> --
> Tina


-- 
Sarah Goslee
http://www.functionaldiversity.org



From |e@||e@rutkow@k| @end|ng |rom gm@||@com  Wed Oct 10 21:42:35 2018
From: |e@||e@rutkow@k| @end|ng |rom gm@||@com (Leslie Rutkowski)
Date: Wed, 10 Oct 2018 15:42:35 -0400
Subject: [R] Code "tags"
Message-ID: <CAA0F9kW1SyLe_PnYnSoeVWcdRJswX7MF1YxrxrG7Vgngn_S=Ww@mail.gmail.com>

Hi all,

I'm trying to get organized about my R programming and I'm looking for a
way to "tag" snippets of handy code that I go back to time and again. At
the moment, I just plop .R files into a folder and rely on the file name to
guide me. In desperation, I've taken to saving the same chunk as multiple
.R files with different "tags" (e.g. "Loops with titles.R" = "CLT
example.R").

Any tips would be appreciated.

Thanks,
Leslie

	[[alternative HTML version deleted]]



From o||v|er_g|v@ud@n @end|ng |rom hotm@||@com  Wed Oct 10 21:51:19 2018
From: o||v|er_g|v@ud@n @end|ng |rom hotm@||@com (Olivier GIVAUDAN)
Date: Wed, 10 Oct 2018 19:51:19 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <EF096B6D-D167-402E-A1BB-9310D60E6F64@dcn.davis.ca.us>
 <VI1PR0202MB33571A964A191D165B3BF422F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <292ca297-27e3-162b-e525-fabc4bb4554c@kogentum.hu>
 <VI1PR0202MB3357E9066FF1527BAC014784F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <dbde4f15-caa6-dc62-3a10-e804cc81671a@kogentum.hu>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
Message-ID: <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>

Well, no idea...

I just created a file 'TestPWD', made it executable, inserted in it these lines and moved the file in various places:

#!/bin/bash

echo $PWD
read -p ""
________________________________
De : Duncan Murdoch <murdoch.duncan at gmail.com>
Envoy? : mercredi 10 octobre 2018 15:20
? : Olivier GIVAUDAN; Jeff Newmiller
Cc : r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

On 10/10/2018 11:18 AM, Olivier GIVAUDAN wrote:
> Hi Duncan,
>
> Yes, if you need to display the content of $PWD you obviously need to
> type 'echo' before this variable.
>
> It prints the user's working directory if run from a terminal but if run
> from a bash file it prints the working directory of the script.
> At least for me (I am running on the last version of Ubuntu)...

Not for me.  Always prints the user's working directory.

Duncan Murdoch


>
> Best regards,
>
> Olivier
> ------------------------------------------------------------------------
> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Envoy? :* mercredi 10 octobre 2018 14:51
> *? :* Olivier GIVAUDAN; Jeff Newmiller
> *Cc :* r-help at r-project.org
> *Objet :* Re: [R] Genuine relative paths with R
> On 10/10/2018 10:37 AM, Olivier GIVAUDAN wrote:
>> Hi Jeff,
>> ?
>>> That is, there is not always a file in a particular directory even involved in the executing code.??
>> ?
>> True. I'm only asking in the case where some R code is run from an R file. This function 'MyOwnPath()' (say) should only work (i.e. return a useful result) in this case.?
>> ?
>>> The R interpreter does not make assumptions about where the code it is running came from.?
>> ?
>> That's precisely the reproach I have in case the code comes from a file.?
>> ?
>>> You also keep referring to "this feature" being in many languages, though you seem to be mistaken about most of them...?
>> ?
>> 'Most of them' is largely exaggerated (plus I corrected myself): I only mixed between the 'cd' variable / command in Windows and Linux shells (you would certainly agree it's a bit vicious).?
>> ?
>>> $PWD is the same as getwd()?
>> ?
>> Wrong. As I already said, if I create an R script located somewhere on my computer with the only line 'getwd()' and run this script, I won't get the directory of this R script, contrary to a shell file with the only line '$PWD'.?
>
> What system are you talking about?  On Unix-alikes, you'd need an "echo"
> ahead of that, and it would print the user's working directory, not the
> working directory of the script.
>
> Duncan Murdoch
>
>> ?
>>> __FILE__ in C relates to the source code directory that is usually not where the executable is ?located and may not even exist on the computer it is running on?
>> ?
>> Yes, and? What is the issue here? So '__FILE__' does the job. Invoking '__FILE__' in a .C file (I never said in its related executable) will return the absolute path of this C source file.?
>> '__DIR__' in PHP also does the job. No to forget the good old VBA (Excel in this case) 'ActiveWorkbook.Path'.?
>>
>> Thank you for the 2 references you provided.
>> However it seems that some manual settings are still required to be able to use Rscript.
>> But I like the solution of the .RData file: I simply created an empty .RData file at the root of my project and by double-clicking on this file (as you said), the R GUI opens and 'getwd()' returns the path of this .RData file. It seems to be a good alternative  to .Rproj file to be opened with RStudio.
>> ?
>>> However, by far the best approach is to teach your users to fish... if you give them an RStudio project directory they can double-click on the .Rproj ?file to set the current directory and enter the world of R.??
>> ?
>> Yes, using an .Rproj file to be opened with RStudio also seems to me to be a reasonable solution (the one I chose until now), although it is still a workaround and requires RStudio.?
>> Actually in this case, the package 'here'? I previously mentioned is useless to get the current working directory of the project as 'When a project is opened within RStudio the following actions are taken: [...] The current working directory is set to the  project directory.', as stated on this page:
> https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects.
>> So 'getwd()' returns exactly the same as 'here()' does.
>>
>> Best regards,?
>> ?
>> Olivier
>>
>> ________________________________
>> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>> Envoy? : dimanche 7 octobre 2018 20:48
>> ? : Olivier GIVAUDAN
>> Cc : D?nes T?th; r-help at r-project.org
>> Objet : RE: [R] Genuine relative paths with R
>>
>> On Sun, 7 Oct 2018, Olivier GIVAUDAN wrote:
>>
>>> Hello Denes,
>>>
>>>> Yes, the path to the "root" folder of your project. You seem to have a
>>> really esoteric context if you want to run an R script without knowing
>>> its path in the file system.
>>>
>>> I don't have any esoteric context: I'm just looking for the most generic, automatic and reproducible solution.
>>> Of course you always know where an R script is located, nevertheless it doesn't imply you want to manually write its path in this
>>> R script. The issue is to have to hardcode an absolute path: I don't want that.
>>>
>>>> Because it is extremely rare that someone - who uses R for what it is
>>> worth and in a manner how R is supposed to be used - actually needs such
>>> a function.
>>>
>>
>>> First, the fact that it is rare doesn't mean this need is not legitimate
>>> and relevant: it is needed to make R projects fully movable (i.e.
>>> wherever you want). Second why a vast majority of languages does have
>>> this feature and not R? Why is it useful in these languages and not in
>>> R?
>>
>> The R interpreter does not make assumptions about where the code it is
>> running came from. You might be running it by using the source() function,
>> or by using the Rscript program, or by R CMD BATCH, or using eval() on
>> code you pasted together in an R function, or as byte-compiled code loaded
>> from an RData file. That is, there is not always a file in a particular
>> directory even involved in the executing code.
>>
>> You also keep referring to "this feature" being in many languages, though
>> you seem to be mistaken about most of them... in fact, they, too, know NOT
>> where the script is but where the current directory is ($PWD is the same
>> as getwd()) or where the compilation occurred (__FILE__ in C relates to
>> the source code directory that is usually not where the executable is
>> located and may not even exist on the computer it is running on).
>>
>> I have already pointed out that the solution is to let the OS set the
>> current directory. If you want the user to have access to R independent of
>> your code, the easiest way to leave them in Rgui after your code is done
>> is to use save.image() to create a "myApp.RData" file which can be
>> double-clicked [1]. The double-clicking action by default (as defined by
>> the installation of R) causes the operating system to set the current
>> directory to the one containing the file you double-clicked on and then
>> executes the Rgui program.
>>
>> If you don't want the user to interact with your session, you can use the
>> Rscript executable (also mentioned briefly at the bottom of [1]). In both
>> cases, the user has (unknowingly) set the current directory before running
>> your code, and there is no need to encode where the script is or was
>> inside the script.
>>
>> You can also create a windows shortcut to invoke Rscript yourself by
>> bootstrapping the RData file and invoking the
>> R.utils::createWindowsShortcut() [2] function.
>>
>> However, by far the best approach is to teach your users to fish... if you
>> give them an RStudio project directory they can double-click on the .Rproj
>> file to set the current directory and enter the world of R.
>>
>> [1] https://www.r-bloggers.com/look-ma-no-typing-autorunning-code-on-r-startup/
>> [2] https://cran.r-project.org/web/packages/R.utils/R.utils.pdf
>>
>> End comment.
>>
>>> Best regards,
>>>
>>> Olivier
>>>
>>> _________________________________________________________________________________________________________________________________
>>> De : D?nes T?th <toth.denes at kogentum.hu>
>>> Envoy? : samedi 6 octobre 2018 23:36
>>> ? : Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
>>> Objet : Re: [R] Genuine relative paths with R
>>> Hi Olivier,
>>>
>>>
>>> On 10/07/2018 01:13 AM, Olivier GIVAUDAN wrote:
>>>> Hi Denes,
>>>>
>>>> Thank you for the possibility you shared: unfortunately it still uses
>>>> one hardcoded absolute path which I want to avoid.
>>>
>>> Yes, the path to the "root" folder of your project. You seem to have a
>>> really esoteric context if you want to run an R script without knowing
>>> its path in the file system.
>>>
>>>>
>>>> I just think that the solutions suggested are too complicated for my
>>>> simple need.
>>>>
>>>> The root cause being that R doesn't seem to have the Windows batch
>>>> equivalent of cd, or bash equivalent of $PWD, or PHP equivalent of __DIR__.
>>>> Hence the workarounds we are discussing.
>>>>
>>>> And finally we go back to my initial question: if such a function
>>>> doesn't exist in R, what are the reasons?
>>>
>>> Because it is extremely rare that someone - who uses R for what it is
>>> worth and in a manner how R is supposed to be used - actually needs such
>>> a function.
>>>
>>> Best,
>>> Denes
>>>
>>>
>>>
>>>>
>>>> Best regards,
>>>>
>>>> Olivier
>>>> ------------------------------------------------------------------------
>>>> *De :* D?nes T?th <toth.denes at kogentum.hu>
>>>> *Envoy? :* samedi 6 octobre 2018 23:05
>>>> *?:* Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>> Hi Olivier,
>>>>
>>>> I really think that Ista and Jeff gave you plenty of useful options how
>>>> you can avoid using absolute paths.
>>>>
>>>> One more possibility: you can use `source()` with the chdir = TRUE
>>>> argument (see ?source). If you have a master script which sources other
>>>> files which are located in a fixed hierarchy relative to the location of
>>>> the master script, the only time when you have to use an absolute path
>>>> is when you source your master script, e.g.:
>>>> source("/my/path/to/master.R", chdir = TRUE)
>>>>
>>>> Inside the master script, you can then source the other scripts by
>>>> relative paths, define your 'data' folders relative to the master script
>>>> and let the other scripts use those data paths, etc.
>>>>
>>>> Best,
>>>> Denes
>>>>
>>>>
>>>> On 10/06/2018 11:36 PM, Olivier GIVAUDAN wrote:
>>>>> Hi Jeff,
>>>>>
>>>>> Thanks for sharing your workaround.
>>>>>
>>>>> I guess my last answer to Ista answers your question as well.
>>>>>
>>>>> To me this function (an equivalent of 'cd', say) should be platform-independent.
>>>>>
>>>>> Best regards,
>>>>>
>>>>> Olivier
>>>>>
>>>>> ________________________________
>>>>> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>>>>> Envoy??? : samedi 6 octobre 2018 19:31
>>>>> ??? : r-help at r-project.org; Olivier GIVAUDAN; r-help at r-project.org
>>>>> Objet : Re: [R] Genuine relative paths with R
>>>>>
>>>>> I stopped using hardcoded absolute paths inside R scripts years ago, and I suspect that is fairly common practice. That is, I
>>> almost never enter a path starting with "/" or "c:/" in an R script.
>>>>>
>>>>> The key concession you have to make is to start your R session in your working directory using OS-specific mechanisms, and
>>> then reference your code and data relative to that directory. RStudio project files offer one mechanism for doing this; using CD
>>> from  the OS command line is another, and using the file-browser
>>>> double-click mechanism on .RData files is another (though I prefer to
>>>> avoid that these days due to potential global environment contamination).
>>>>>
>>>>> Perhaps you can be more specific about what facilities you are expecting to find. You should also mention what OS you
>>> typically use and how you normally start R.
>>>>>
>>>>> On October 6, 2018 4:48:44 AM PDT, Olivier GIVAUDAN <olivier_givaudan at hotmail.com> wrote:
>>>>>> Dear R users,
>>>>>>
>>>>>> I would like to work with genuine relative paths in R for obvious
>>>>>> reasons: if I move all my scripts related to some project as a whole to
>>>>>> another location of my computer or someone else's computer, if want my
>>>>>> scripts to continue to run seamlessly.
>>>>>>
>>>>>> What I mean by "genuine" is that it should not be necessary to hardcode
>>>>>> one single absolute path (making the code obviously not "portable" - to
>>>>>> another place - anymore).
>>>>>>
>>>>>> For the time being, I found the following related posts, unfortunately
>>>>>> never conclusive or even somewhat off-topic:
>>>>>> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
>>>>>> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
>>>>>> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
>>>>>>
>>>>>> So I found 2 workarounds, more or less satisfactory:
>>>>>>
>>>>>>
>>>>>> 1.  Either create a variable "ScriptPath" in the first lines of each of
>>>>>> my R scripts and run a batch (or shell, etc.) to replace every single
>>>>>> occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R
>>>>>> script]" in all the R scripts located in the folder (and possibly
>>>>>> subfolders) of the batch file.
>>>>>> 2.  Or create an R project file with RStudio and use the package "here"
>>>>>> to get the absolute path of the R project file and put all the R
>>>>>> scripts related to this project in the R project directory, as often
>>>>>> recommended.
>>>>>>
>>>>>> But I am really wondering why R doesn't have (please tell me if I'm
>>>>>> wrong) this basic feature as many other languages have it (batch,
>>>>>> shell, C, LaTeX, SAS with macro-variables, etc.)?
>>>>>> Do you know whether the language will have this kind of function in a
>>>>>> near future? What are the obstacles / what is the reasoning for not
>>>>>> having it already?
>>>>>>
>>>>>> Do you know other workarounds?
>>>>>>
>>>>>> Best regards,
>>>>>>
>>>>>> Olivier
>>>>>>
>>>>>>         [[alternative HTML version deleted]]
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>> PLEASE do read the posting guide
>>>>>> http://www.R-project.org/posting-guide.html
>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>
>>>>> --
>>>>> Sent from my phone. Please excuse my brevity.
>>>>>
>>>>>         [[alternative HTML version deleted]]
>>>>>
>>>>>
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>
>>>
>>>
>>
>> ---------------------------------------------------------------------------
>> Jeff Newmiller                        The     .....       .....  Go Live...
>> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
>>                                         Live:   OO#.. Dead: OO#..  Playing
>> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
>> /Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
>> ---------------------------------------------------------------------------
>>
>>        [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>


	[[alternative HTML version deleted]]


From o||v|er_g|v@ud@n @end|ng |rom hotm@||@com  Wed Oct 10 21:55:33 2018
From: o||v|er_g|v@ud@n @end|ng |rom hotm@||@com (Olivier GIVAUDAN)
Date: Wed, 10 Oct 2018 19:55:33 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <CAF8bMcY-nF22Z0jOavfTKu7rc2L55x++N2XTUUjMe3+=b3FFhw@mail.gmail.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <EF096B6D-D167-402E-A1BB-9310D60E6F64@dcn.davis.ca.us>
 <VI1PR0202MB33571A964A191D165B3BF422F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <292ca297-27e3-162b-e525-fabc4bb4554c@kogentum.hu>
 <VI1PR0202MB3357E9066FF1527BAC014784F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <dbde4f15-caa6-dc62-3a10-e804cc81671a@kogentum.hu>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <CAF8bMcY-nF22Z0jOavfTKu7rc2L55x++N2XTUUjMe3+=b3FFhw@mail.gmail.com>
Message-ID: <DB3PR0202MB3355EA3AA237D8ECD4A1271BF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>

To be able to change easily, cleanly and automatically the working directory and thus to work with relative paths in the close neighbourhood of your R files.
________________________________
De : William Dunlap <wdunlap at tibco.com>
Envoy? : mercredi 10 octobre 2018 15:25
? : Olivier GIVAUDAN
Cc : Duncan Murdoch; Jeff Newmiller; r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

I am curious about why it is desirable for a script to know where in the file system it is.  Is it because you have a set of scripts invoking each other?  If so, the best route it to convert the scripts into functions and put them into a package.  Functions do know which package they live in and they "prefer" to call other functions in their own package (or other packages which they have declared).

Or is there some other reason?


Bill Dunlap
TIBCO Software
wdunlap tibco.com<http://tibco.com>

On Wed, Oct 10, 2018 at 8:18 AM, Olivier GIVAUDAN <olivier_givaudan at hotmail.com<mailto:olivier_givaudan at hotmail.com>> wrote:
Hi Duncan,

Yes, if you need to display the content of $PWD you obviously need to type 'echo' before this variable.

It prints the user's working directory if run from a terminal but if run from a bash file it prints the working directory of the script.
At least for me (I am running on the last version of Ubuntu)...

Best regards,

Olivier
________________________________
De : Duncan Murdoch <murdoch.duncan at gmail.com<mailto:murdoch.duncan at gmail.com>>
Envoy? : mercredi 10 octobre 2018 14:51
? : Olivier GIVAUDAN; Jeff Newmiller
Cc : r-help at r-project.org<mailto:r-help at r-project.org>
Objet : Re: [R] Genuine relative paths with R

On 10/10/2018 10:37 AM, Olivier GIVAUDAN wrote:
> Hi Jeff,
> ?
>> That is, there is not always a file in a particular directory even involved in the executing code.??
> ?
> True. I'm only asking in the case where some R code is run from an R file. This function 'MyOwnPath()' (say) should only work (i.e. return a useful result) in this case.?
> ?
>> The R interpreter does not make assumptions about where the code it is running came from.?
> ?
> That's precisely the reproach I have in case the code comes from a file.?
> ?
>> You also keep referring to "this feature" being in many languages, though you seem to be mistaken about most of them...?
> ?
> 'Most of them' is largely exaggerated (plus I corrected myself): I only mixed between the 'cd' variable / command in Windows and Linux shells (you would certainly agree it's a bit vicious).?
> ?
>> $PWD is the same as getwd()?
> ?
> Wrong. As I already said, if I create an R script located somewhere on my computer with the only line 'getwd()' and run this script, I won't get the directory of this R script, contrary to a shell file with the only line '$PWD'.?

What system are you talking about?  On Unix-alikes, you'd need an "echo"
ahead of that, and it would print the user's working directory, not the
working directory of the script.

Duncan Murdoch

> ?
>> __FILE__ in C relates to the source code directory that is usually not where the executable is ?located and may not even exist on the computer it is running on?
> ?
> Yes, and? What is the issue here? So '__FILE__' does the job. Invoking '__FILE__' in a .C file (I never said in its related executable) will return the absolute path of this C source file.?
> '__DIR__' in PHP also does the job. No to forget the good old VBA (Excel in this case) 'ActiveWorkbook.Path'.?
>
> Thank you for the 2 references you provided.
> However it seems that some manual settings are still required to be able to use Rscript.
> But I like the solution of the .RData file: I simply created an empty .RData file at the root of my project and by double-clicking on this file (as you said), the R GUI opens and 'getwd()' returns the path of this .RData file. It seems to be a good alternative to .Rproj file to be opened with RStudio.
> ?
>> However, by far the best approach is to teach your users to fish... if you give them an RStudio project directory they can double-click on the .Rproj ?file to set the current directory and enter the world of R.??
> ?
> Yes, using an .Rproj file to be opened with RStudio also seems to me to be a reasonable solution (the one I chose until now), although it is still a workaround and requires RStudio.?
> Actually in this case, the package 'here'? I previously mentioned is useless to get the current working directory of the project as 'When a project is opened within RStudio the following actions are taken: [...] The current working directory is set to the project directory.', as stated on this page: https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects.
> So 'getwd()' returns exactly the same as 'here()' does.
>
> Best regards,?
> ?
> Olivier
>
> ________________________________
> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us<mailto:jdnewmil at dcn.davis.ca.us>>
> Envoy? : dimanche 7 octobre 2018 20:48
> ? : Olivier GIVAUDAN
> Cc : D?nes T?th; r-help at r-project.org<mailto:r-help at r-project.org>
> Objet : RE: [R] Genuine relative paths with R
>
> On Sun, 7 Oct 2018, Olivier GIVAUDAN wrote:
>
>> Hello Denes,
>>
>>> Yes, the path to the "root" folder of your project. You seem to have a
>> really esoteric context if you want to run an R script without knowing
>> its path in the file system.
>>
>> I don't have any esoteric context: I'm just looking for the most generic, automatic and reproducible solution.
>> Of course you always know where an R script is located, nevertheless it doesn't imply you want to manually write its path in this
>> R script. The issue is to have to hardcode an absolute path: I don't want that.
>>
>>> Because it is extremely rare that someone - who uses R for what it is
>> worth and in a manner how R is supposed to be used - actually needs such
>> a function.
>>
>
>> First, the fact that it is rare doesn't mean this need is not legitimate
>> and relevant: it is needed to make R projects fully movable (i.e.
>> wherever you want). Second why a vast majority of languages does have
>> this feature and not R? Why is it useful in these languages and not in
>> R?
>
> The R interpreter does not make assumptions about where the code it is
> running came from. You might be running it by using the source() function,
> or by using the Rscript program, or by R CMD BATCH, or using eval() on
> code you pasted together in an R function, or as byte-compiled code loaded
> from an RData file. That is, there is not always a file in a particular
> directory even involved in the executing code.
>
> You also keep referring to "this feature" being in many languages, though
> you seem to be mistaken about most of them... in fact, they, too, know NOT
> where the script is but where the current directory is ($PWD is the same
> as getwd()) or where the compilation occurred (__FILE__ in C relates to
> the source code directory that is usually not where the executable is
> located and may not even exist on the computer it is running on).
>
> I have already pointed out that the solution is to let the OS set the
> current directory. If you want the user to have access to R independent of
> your code, the easiest way to leave them in Rgui after your code is done
> is to use save.image() to create a "myApp.RData" file which can be
> double-clicked [1]. The double-clicking action by default (as defined by
> the installation of R) causes the operating system to set the current
> directory to the one containing the file you double-clicked on and then
> executes the Rgui program.
>
> If you don't want the user to interact with your session, you can use the
> Rscript executable (also mentioned briefly at the bottom of [1]). In both
> cases, the user has (unknowingly) set the current directory before running
> your code, and there is no need to encode where the script is or was
> inside the script.
>
> You can also create a windows shortcut to invoke Rscript yourself by
> bootstrapping the RData file and invoking the
> R.utils::createWindowsShortcut() [2] function.
>
> However, by far the best approach is to teach your users to fish... if you
> give them an RStudio project directory they can double-click on the .Rproj
> file to set the current directory and enter the world of R.
>
> [1] https://www.r-bloggers.com/look-ma-no-typing-autorunning-code-on-r-startup/
> [2] https://cran.r-project.org/web/packages/R.utils/R.utils.pdf
>
> End comment.
>
>> Best regards,
>>
>> Olivier
>>
>> _________________________________________________________________________________________________________________________________
>> De : D?nes T?th <toth.denes at kogentum.hu<mailto:toth.denes at kogentum.hu>>
>> Envoy? : samedi 6 octobre 2018 23:36
>> ? : Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org<mailto:r-help at r-project.org>
>> Objet : Re: [R] Genuine relative paths with R
>> Hi Olivier,
>>
>>
>> On 10/07/2018 01:13 AM, Olivier GIVAUDAN wrote:
>>> Hi Denes,
>>>
>>> Thank you for the possibility you shared: unfortunately it still uses
>>> one hardcoded absolute path which I want to avoid.
>>
>> Yes, the path to the "root" folder of your project. You seem to have a
>> really esoteric context if you want to run an R script without knowing
>> its path in the file system.
>>
>>>
>>> I just think that the solutions suggested are too complicated for my
>>> simple need.
>>>
>>> The root cause being that R doesn't seem to have the Windows batch
>>> equivalent of cd, or bash equivalent of $PWD, or PHP equivalent of __DIR__.
>>> Hence the workarounds we are discussing.
>>>
>>> And finally we go back to my initial question: if such a function
>>> doesn't exist in R, what are the reasons?
>>
>> Because it is extremely rare that someone - who uses R for what it is
>> worth and in a manner how R is supposed to be used - actually needs such
>> a function.
>>
>> Best,
>> Denes
>>
>>
>>
>>>
>>> Best regards,
>>>
>>> Olivier
>>> ------------------------------------------------------------------------
>>> *De :* D?nes T?th <toth.denes at kogentum.hu<mailto:toth.denes at kogentum.hu>>
>>> *Envoy? :* samedi 6 octobre 2018 23:05
>>> *?:* Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org<mailto:r-help at r-project.org>
>>> *Objet :* Re: [R] Genuine relative paths with R
>>> Hi Olivier,
>>>
>>> I really think that Ista and Jeff gave you plenty of useful options how
>>> you can avoid using absolute paths.
>>>
>>> One more possibility: you can use `source()` with the chdir = TRUE
>>> argument (see ?source). If you have a master script which sources other
>>> files which are located in a fixed hierarchy relative to the location of
>>> the master script, the only time when you have to use an absolute path
>>> is when you source your master script, e.g.:
>>> source("/my/path/to/master.R", chdir = TRUE)
>>>
>>> Inside the master script, you can then source the other scripts by
>>> relative paths, define your 'data' folders relative to the master script
>>> and let the other scripts use those data paths, etc.
>>>
>>> Best,
>>> Denes
>>>
>>>
>>> On 10/06/2018 11:36 PM, Olivier GIVAUDAN wrote:
>>>> Hi Jeff,
>>>>
>>>> Thanks for sharing your workaround.
>>>>
>>>> I guess my last answer to Ista answers your question as well.
>>>>
>>>> To me this function (an equivalent of 'cd', say) should be platform-independent.
>>>>
>>>> Best regards,
>>>>
>>>> Olivier
>>>>
>>>> ________________________________
>>>> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us<mailto:jdnewmil at dcn.davis.ca.us>>
>>>> Envoy??? : samedi 6 octobre 2018 19:31
>>>> ??? : r-help at r-project.org<mailto:r-help at r-project.org>; Olivier GIVAUDAN; r-help at r-project.org<mailto:r-help at r-project.org>
>>>> Objet : Re: [R] Genuine relative paths with R
>>>>
>>>> I stopped using hardcoded absolute paths inside R scripts years ago, and I suspect that is fairly common practice. That is, I
>> almost never enter a path starting with "/" or "c:/" in an R script.
>>>>
>>>> The key concession you have to make is to start your R session in your working directory using OS-specific mechanisms, and
>> then reference your code and data relative to that directory. RStudio project files offer one mechanism for doing this; using CD
>> from  the OS command line is another, and using the file-browser
>>> double-click mechanism on .RData files is another (though I prefer to
>>> avoid that these days due to potential global environment contamination).
>>>>
>>>> Perhaps you can be more specific about what facilities you are expecting to find. You should also mention what OS you
>> typically use and how you normally start R.
>>>>
>>>> On October 6, 2018 4:48:44 AM PDT, Olivier GIVAUDAN <olivier_givaudan at hotmail.com<mailto:olivier_givaudan at hotmail.com>> wrote:
>>>>> Dear R users,
>>>>>
>>>>> I would like to work with genuine relative paths in R for obvious
>>>>> reasons: if I move all my scripts related to some project as a whole to
>>>>> another location of my computer or someone else's computer, if want my
>>>>> scripts to continue to run seamlessly.
>>>>>
>>>>> What I mean by "genuine" is that it should not be necessary to hardcode
>>>>> one single absolute path (making the code obviously not "portable" - to
>>>>> another place - anymore).
>>>>>
>>>>> For the time being, I found the following related posts, unfortunately
>>>>> never conclusive or even somewhat off-topic:
>>>>> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
>>>>> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
>>>>> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
>>>>>
>>>>> So I found 2 workarounds, more or less satisfactory:
>>>>>
>>>>>
>>>>> 1.  Either create a variable "ScriptPath" in the first lines of each of
>>>>> my R scripts and run a batch (or shell, etc.) to replace every single
>>>>> occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R
>>>>> script]" in all the R scripts located in the folder (and possibly
>>>>> subfolders) of the batch file.
>>>>> 2.  Or create an R project file with RStudio and use the package "here"
>>>>> to get the absolute path of the R project file and put all the R
>>>>> scripts related to this project in the R project directory, as often
>>>>> recommended.
>>>>>
>>>>> But I am really wondering why R doesn't have (please tell me if I'm
>>>>> wrong) this basic feature as many other languages have it (batch,
>>>>> shell, C, LaTeX, SAS with macro-variables, etc.)?
>>>>> Do you know whether the language will have this kind of function in a
>>>>> near future? What are the obstacles / what is the reasoning for not
>>>>> having it already?
>>>>>
>>>>> Do you know other workarounds?
>>>>>
>>>>> Best regards,
>>>>>
>>>>> Olivier
>>>>>
>>>>>         [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide
>>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>> --
>>>> Sent from my phone. Please excuse my brevity.
>>>>
>>>>         [[alternative HTML version deleted]]
>>>>
>>>>
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>
>>
>
> ---------------------------------------------------------------------------
> Jeff Newmiller                        The     .....       .....  Go Live...
> DCN:<jdnewmil at dcn.davis.ca.us<mailto:jdnewmil at dcn.davis.ca.us>>        Basics: ##.#.       ##.#.  Live Go...
>                                         Live:   OO#.. Dead: OO#..  Playing
> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
> /Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
> ---------------------------------------------------------------------------
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From o||v|er_g|v@ud@n @end|ng |rom hotm@||@com  Wed Oct 10 22:13:09 2018
From: o||v|er_g|v@ud@n @end|ng |rom hotm@||@com (Olivier GIVAUDAN)
Date: Wed, 10 Oct 2018 20:13:09 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <alpine.DEB.2.21.1810101044310.3154@luke-Latitude-7480>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <60714a3e-2ef5-5563-7dcc-eb4965f966d4@uke.de>
 <VI1PR0202MB3357ECAFF18BC7D7DD83E11FF5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <alpine.DEB.2.21.1810101044310.3154@luke-Latitude-7480>
Message-ID: <DB3PR0202MB3355857E994DE5163D17B600F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>

Thank you, Luke.

Unfortunately I don't use Rscript (it is not allowed to run shell scripts on my professional computer).

Best regards,

Olivier
________________________________
De : Tierney, Luke <luke-tierney at uiowa.edu>
Envoy? : mercredi 10 octobre 2018 15:48
? : Olivier GIVAUDAN
Cc : Eik Vettorazzi; r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

If you are always running your main script as 'Rscript myscript.R'
then your file argument will appear as '--file=myscript.R' in
commandArgs(). So you can use something like

scriptFile <- function()
{
     pat <- "^--file="
     args <- commandArgs()
     file <- args[grepl(pat, args, args)]
     normalizePath(sub(pat, "", file))
}

Then scriptFile() will give you something to work with.

Best,

luke



On Wed, 10 Oct 2018, Olivier GIVAUDAN wrote:

> Dear Eik,
>
> Thank you for your message.
>
> Yes, I already got to know this package and this discussion (while I found the 'here' package). But thanks.
>
> Best regards,
>
> Olivier
> ________________________________
> De : Eik Vettorazzi <E.Vettorazzi at uke.de>
> Envoy??? : lundi 8 octobre 2018 11:30
> ??? : Olivier GIVAUDAN; r-help at r-project.org
> Objet : Re: [R] Genuine relative paths with R
>
> Dear Olivier,
> you may find the rprojroot package useful, see
> https://github.com/r-lib/rprojroot
>
> and a discussion
>
> https://gist.github.com/jennybc/362f52446fe1ebc4c49f#file-2014-10-12_stop-working-directory-insanity-md
>
> Cheers
>
> Am 06.10.2018 um 13:48 schrieb Olivier GIVAUDAN:
>> Dear R users,
>>
>> I would like to work with genuine relative paths in R for obvious reasons: if I move all my scripts related to some project as a whole to another location of my computer or someone else's computer, if want my scripts to continue to run seamlessly.
>>
>> What I mean by "genuine" is that it should not be necessary to hardcode one single absolute path (making the code obviously not "portable" - to another place - anymore).
>>
>> For the time being, I found the following related posts, unfortunately never conclusive or even somewhat off-topic:
>> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
>> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
>> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
>>
>> So I found 2 workarounds, more or less satisfactory:
>>
>>
>>    1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.
>>    2.  Or create an R project file with RStudio and use the package "here" to get the absolute path of the R project file and put all the R scripts related to this project in the R project directory, as often recommended.
>>
>> But I am really wondering why R doesn't have (please tell me if I'm wrong) this basic feature as many other languages have it (batch, shell, C, LaTeX, SAS with macro-variables, etc.)?
>> Do you know whether the language will have this kind of function in a near future? What are the obstacles / what is the reasoning for not having it already?
>>
>> Do you know other workarounds?
>>
>> Best regards,
>>
>> Olivier
>>
>>        [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
> --
> Eik Vettorazzi
>
> Department of Medical Biometry and Epidemiology
> University Medical Center Hamburg-Eppendorf
>
> Martinistrasse 52
> building W 34
> 20246 Hamburg
>
> Phone: +49 (0) 40 7410 - 58243
> Fax:   +49 (0) 40 7410 - 57790
> Web: www.uke.de/imbe<http://www.uke.de/imbe>
> --
>
> _____________________________________________________________________
>
> Universit???tsklinikum Hamburg-Eppendorf; K???rperschaft des ???ffentlichen Rechts; Gerichtsstand: Hamburg | www.uke.de
> Vorstandsmitglieder: Prof. Dr. Burkhard G???ke (Vorsitzender), Prof. Dr. Dr. Uwe Koch-Gromus, Joachim Pr???l???, Martina Saurin (komm.)
> _____________________________________________________________________
>
> SAVE PAPER - THINK BEFORE PRINTING
>
>        [[alternative HTML version deleted]]
>
>

--
Luke Tierney
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:   luke-tierney at uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu

	[[alternative HTML version deleted]]



From bgunter@4567 @end|ng |rom gm@||@com  Wed Oct 10 22:15:12 2018
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 10 Oct 2018 13:15:12 -0700
Subject: [R] Code "tags"
In-Reply-To: <CAA0F9kW1SyLe_PnYnSoeVWcdRJswX7MF1YxrxrG7Vgngn_S=Ww@mail.gmail.com>
References: <CAA0F9kW1SyLe_PnYnSoeVWcdRJswX7MF1YxrxrG7Vgngn_S=Ww@mail.gmail.com>
Message-ID: <CAGxFJbT0p+=F_NRmswV03bo9YWgUdqTaqyB7qUhWcnNNY_CW1A@mail.gmail.com>

"get organized around R programming" is rather vague.  Nor do I know what
you mean by "tagging" code snippets.

A standard answer would be to write your "code" as documented functions in
a package (e.g. "LeslieMisc"). RStudio -- a wholly separate software
product -- has various tools to that may also be relevant. RMarkdown allows
you to write documents in which you embed executable R code, which is
useful for producing "vignettes" to illustrate how code works. Roxygen is
useful for producing package docs with a minimum of pain. Any of these --
and others, like just producing inline comments -- may be useful.

-- Bert



On Wed, Oct 10, 2018 at 12:43 PM Leslie Rutkowski <
leslie.rutkowski at gmail.com> wrote:

> Hi all,
>
> I'm trying to get organized about my R programming and I'm looking for a
> way to "tag" snippets of handy code that I go back to time and again. At
> the moment, I just plop .R files into a folder and rely on the file name to
> guide me. In desperation, I've taken to saving the same chunk as multiple
> .R files with different "tags" (e.g. "Loops with titles.R" = "CLT
> example.R").
>
> Any tips would be appreciated.
>
> Thanks,
> Leslie
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Oct 10 22:17:49 2018
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 10 Oct 2018 16:17:49 -0400
Subject: [R] Genuine relative paths with R
In-Reply-To: <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <EF096B6D-D167-402E-A1BB-9310D60E6F64@dcn.davis.ca.us>
 <VI1PR0202MB33571A964A191D165B3BF422F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <292ca297-27e3-162b-e525-fabc4bb4554c@kogentum.hu>
 <VI1PR0202MB3357E9066FF1527BAC014784F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <dbde4f15-caa6-dc62-3a10-e804cc81671a@kogentum.hu>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
Message-ID: <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>

On 10/10/2018 3:51 PM, Olivier GIVAUDAN wrote:
> Well, no idea...
> 
> I just created a file 'TestPWD', made it executable, inserted in it 
> these lines and moved the file in various places:
> 
> #!/bin/bash
> 
> echo $PWD
> read -p ""

When I execute that, it prints my working directory.  Doesn't matter 
where the TestPWD file is.  If I put it in directory "foo", and change 
to foo's parent, then

   foo/TestPWD

prints the name of the parent directory, not the foo directory.  If I 
then add foo to the PATH, and run

   TestPWD

I get the same thing.  I find it unbelievable that you are seeing 
anything different from that on a Unix-alike.

Duncan Muroch


> ------------------------------------------------------------------------
> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Envoy? :* mercredi 10 octobre 2018 15:20
> *? :* Olivier GIVAUDAN; Jeff Newmiller
> *Cc?:* r-help at r-project.org
> *Objet :* Re: [R] Genuine relative paths with R
> On 10/10/2018 11:18 AM, Olivier GIVAUDAN wrote:
>> Hi Duncan,
>> 
>> Yes, if you need to display the content of $PWD you obviously need to 
>> type 'echo' before this variable.
>> 
>> It prints the user's working directory if run from a terminal but if run 
>> from a bash file it prints the working directory of the script.
>> At least for me (I am running on the last version of Ubuntu)...
> 
> Not for me.? Always prints the user's working directory.
> 
> Duncan Murdoch
> 
> 
>> 
>> Best regards,
>> 
>> Olivier
>> ------------------------------------------------------------------------
>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>> *Envoy? :* mercredi 10 octobre 2018 14:51
>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>> *Cc?:* r-help at r-project.org
>> *Objet :* Re: [R] Genuine relative paths with R
>> On 10/10/2018 10:37 AM, Olivier GIVAUDAN wrote:
>>> Hi Jeff,
>>> ?
>>>> That is, there is not always a file in a particular directory even involved in the executing code.??
>>> ?
>>> True. I'm only asking in the case where some R code is run from an R file. This function 'MyOwnPath()' (say) should only work (i.e. return a useful result) in this case.?
>>> ?
>>>> The R interpreter does not make assumptions about where the code it is running came from.?
>>> ?
>>> That's precisely the reproach I have in case the code comes from a file.?
>>> ?
>>>> You also keep referring to "this feature" being in many languages, though you seem to be mistaken about most of them...?
>>> ?
>>> 'Most of them' is largely exaggerated (plus I corrected myself): I only mixed between the 'cd' variable / command in Windows and Linux shells (you would certainly agree it's a bit vicious).?
>>> ?
>>>> $PWD is the same as getwd()?
>>> ?
>>> Wrong. As I already said, if I create an R script located somewhere on my computer with the only line 'getwd()' and run this script, I won't get the directory of this R script, contrary to a shell file with the only line '$PWD'.?
>> 
>> What system are you talking about?? On Unix-alikes, you'd need an "echo"
>> ahead of that, and it would print the user's working directory, not the
>> working directory of the script.
>> 
>> Duncan Murdoch
>> 
>>> ?
>>>> __FILE__ in C relates to the source code directory that is usually not where the executable is ?located and may not even exist on the computer it is running on?
>>> ?
>>> Yes, and? What is the issue here? So '__FILE__' does the job. Invoking '__FILE__' in a .C file (I never said in its related executable) will return the absolute path of this C source file.?
>>> '__DIR__' in PHP also does the job. No to forget the good old VBA (Excel in this case) 'ActiveWorkbook.Path'.?
>>> 
>>> Thank you for the 2 references you provided.
>>> However it seems that some manual settings are still required to be able to use Rscript.
>>> But I like the solution of the .RData file: I simply created an empty .RData file at the root of my project and by double-clicking on this file (as you said), the R GUI opens and 'getwd()' returns the path of this .RData file. It seems to be a good alternative to .Rproj file to be opened with RStudio.
>>> ?
>>>> However, by far the best approach is to teach your users to fish... if you give them an RStudio project directory they can double-click on the .Rproj ?file to set the current directory and enter the world of R.??
>>> ?
>>> Yes, using an .Rproj file to be opened with RStudio also seems to me to be a reasonable solution (the one I chose until now), although it is still a workaround and requires RStudio.?
>>> Actually in this case, the package 'here'? I previously mentioned is useless to get the current working directory of the project as 'When a project is opened within RStudio the following actions are taken: [...] The current working directory is set to the project directory.', as stated on this page:
>> https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects.
>>> So 'getwd()' returns exactly the same as 'here()' does.
>>> 
>>> Best regards,?
>>> ?
>>> Olivier
>>> 
>>> ________________________________
>>> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>>> Envoy? : dimanche 7 octobre 2018 20:48
>>> ? : Olivier GIVAUDAN
>>> Cc : D?nes T?th; r-help at r-project.org
>>> Objet : RE: [R] Genuine relative paths with R
>>> 
>>> On Sun, 7 Oct 2018, Olivier GIVAUDAN wrote:
>>> 
>>>> Hello Denes,
>>>>
>>>>> Yes, the path to the "root" folder of your project. You seem to have a
>>>> really esoteric context if you want to run an R script without knowing
>>>> its path in the file system.
>>>>
>>>> I don't have any esoteric context: I'm just looking for the most generic, automatic and reproducible solution.
>>>> Of course you always know where an R script is located, nevertheless it doesn't imply you want to manually write its path in this
>>>> R script. The issue is to have to hardcode an absolute path: I don't want that.
>>>>
>>>>> Because it is extremely rare that someone - who uses R for what it is
>>>> worth and in a manner how R is supposed to be used - actually needs such
>>>> a function.
>>>>
>>> 
>>>> First, the fact that it is rare doesn't mean this need is not legitimate
>>>> and relevant: it is needed to make R projects fully movable (i.e.
>>>> wherever you want). Second why a vast majority of languages does have
>>>> this feature and not R? Why is it useful in these languages and not in
>>>> R?
>>> 
>>> The R interpreter does not make assumptions about where the code it is
>>> running came from. You might be running it by using the source() function,
>>> or by using the Rscript program, or by R CMD BATCH, or using eval() on
>>> code you pasted together in an R function, or as byte-compiled code loaded
>>> from an RData file. That is, there is not always a file in a particular
>>> directory even involved in the executing code.
>>> 
>>> You also keep referring to "this feature" being in many languages, though
>>> you seem to be mistaken about most of them... in fact, they, too, know NOT
>>> where the script is but where the current directory is ($PWD is the same
>>> as getwd()) or where the compilation occurred (__FILE__ in C relates to
>>> the source code directory that is usually not where the executable is
>>> located and may not even exist on the computer it is running on).
>>> 
>>> I have already pointed out that the solution is to let the OS set the
>>> current directory. If you want the user to have access to R independent of
>>> your code, the easiest way to leave them in Rgui after your code is done
>>> is to use save.image() to create a "myApp.RData" file which can be
>>> double-clicked [1]. The double-clicking action by default (as defined by
>>> the installation of R) causes the operating system to set the current
>>> directory to the one containing the file you double-clicked on and then
>>> executes the Rgui program.
>>> 
>>> If you don't want the user to interact with your session, you can use the
>>> Rscript executable (also mentioned briefly at the bottom of [1]). In both
>>> cases, the user has (unknowingly) set the current directory before running
>>> your code, and there is no need to encode where the script is or was
>>> inside the script.
>>> 
>>> You can also create a windows shortcut to invoke Rscript yourself by
>>> bootstrapping the RData file and invoking the
>>> R.utils::createWindowsShortcut() [2] function.
>>> 
>>> However, by far the best approach is to teach your users to fish... if you
>>> give them an RStudio project directory they can double-click on the .Rproj
>>> file to set the current directory and enter the world of R.
>>> 
>>> [1] https://www.r-bloggers.com/look-ma-no-typing-autorunning-code-on-r-startup/
>>> [2] https://cran.r-project.org/web/packages/R.utils/R.utils.pdf
>>> 
>>> End comment.
>>> 
>>>> Best regards,
>>>>
>>>> Olivier
>>>>
>>>> _________________________________________________________________________________________________________________________________
>>>> De : D?nes T?th <toth.denes at kogentum.hu>
>>>> Envoy? : samedi 6 octobre 2018 23:36
>>>> ? : Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
>>>> Objet : Re: [R] Genuine relative paths with R
>>>> Hi Olivier,
>>>>
>>>>
>>>> On 10/07/2018 01:13 AM, Olivier GIVAUDAN wrote:
>>>>> Hi Denes,
>>>>>
>>>>> Thank you for the possibility you shared: unfortunately it still uses
>>>>> one hardcoded absolute path which I want to avoid.
>>>>
>>>> Yes, the path to the "root" folder of your project. You seem to have a
>>>> really esoteric context if you want to run an R script without knowing
>>>> its path in the file system.
>>>>
>>>>>
>>>>> I just think that the solutions suggested are too complicated for my
>>>>> simple need.
>>>>>
>>>>> The root cause being that R doesn't seem to have the Windows batch
>>>>> equivalent of cd, or bash equivalent of $PWD, or PHP equivalent of __DIR__.
>>>>> Hence the workarounds we are discussing.
>>>>>
>>>>> And finally we go back to my initial question: if such a function
>>>>> doesn't exist in R, what are the reasons?
>>>>
>>>> Because it is extremely rare that someone - who uses R for what it is
>>>> worth and in a manner how R is supposed to be used - actually needs such
>>>> a function.
>>>>
>>>> Best,
>>>> Denes
>>>>
>>>>
>>>>
>>>>>
>>>>> Best regards,
>>>>>
>>>>> Olivier
>>>>> ------------------------------------------------------------------------
>>>>> *De :* D?nes T?th <toth.denes at kogentum.hu>
>>>>> *Envoy? :* samedi 6 octobre 2018 23:05
>>>>> *?:* Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
>>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>>> Hi Olivier,
>>>>>
>>>>> I really think that Ista and Jeff gave you plenty of useful options how
>>>>> you can avoid using absolute paths.
>>>>>
>>>>> One more possibility: you can use `source()` with the chdir = TRUE
>>>>> argument (see ?source). If you have a master script which sources other
>>>>> files which are located in a fixed hierarchy relative to the location of
>>>>> the master script, the only time when you have to use an absolute path
>>>>> is when you source your master script, e.g.:
>>>>> source("/my/path/to/master.R", chdir = TRUE)
>>>>>
>>>>> Inside the master script, you can then source the other scripts by
>>>>> relative paths, define your 'data' folders relative to the master script
>>>>> and let the other scripts use those data paths, etc.
>>>>>
>>>>> Best,
>>>>> Denes
>>>>>
>>>>>
>>>>> On 10/06/2018 11:36 PM, Olivier GIVAUDAN wrote:
>>>>>> Hi Jeff,
>>>>>>
>>>>>> Thanks for sharing your workaround.
>>>>>>
>>>>>> I guess my last answer to Ista answers your question as well.
>>>>>>
>>>>>> To me this function (an equivalent of 'cd', say) should be platform-independent.
>>>>>>
>>>>>> Best regards,
>>>>>>
>>>>>> Olivier
>>>>>>
>>>>>> ________________________________
>>>>>> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>>>>>> Envoy??? : samedi 6 octobre 2018 19:31
>>>>>> ??? : r-help at r-project.org; Olivier GIVAUDAN; r-help at r-project.org
>>>>>> Objet : Re: [R] Genuine relative paths with R
>>>>>>
>>>>>> I stopped using hardcoded absolute paths inside R scripts years ago, and I suspect that is fairly common practice. That is, I
>>>> almost never enter a path starting with "/" or "c:/" in an R script.
>>>>>>
>>>>>> The key concession you have to make is to start your R session in your working directory using OS-specific mechanisms, and
>>>> then reference your code and data relative to that directory. RStudio project files offer one mechanism for doing this; using CD
>>>> from? the OS command line is another, and using the file-browser
>>>>> double-click mechanism on .RData files is another (though I prefer to
>>>>> avoid that these days due to potential global environment contamination).
>>>>>>
>>>>>> Perhaps you can be more specific about what facilities you are expecting to find. You should also mention what OS you
>>>> typically use and how you normally start R.
>>>>>>
>>>>>> On October 6, 2018 4:48:44 AM PDT, Olivier GIVAUDAN <olivier_givaudan at hotmail.com> wrote:
>>>>>>> Dear R users,
>>>>>>>
>>>>>>> I would like to work with genuine relative paths in R for obvious
>>>>>>> reasons: if I move all my scripts related to some project as a whole to
>>>>>>> another location of my computer or someone else's computer, if want my
>>>>>>> scripts to continue to run seamlessly.
>>>>>>>
>>>>>>> What I mean by "genuine" is that it should not be necessary to hardcode
>>>>>>> one single absolute path (making the code obviously not "portable" - to
>>>>>>> another place - anymore).
>>>>>>>
>>>>>>> For the time being, I found the following related posts, unfortunately
>>>>>>> never conclusive or even somewhat off-topic:
>>>>>>> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
>>>>>>> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
>>>>>>> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
>>>>>>>
>>>>>>> So I found 2 workarounds, more or less satisfactory:
>>>>>>>
>>>>>>>
>>>>>>> 1.? Either create a variable "ScriptPath" in the first lines of each of
>>>>>>> my R scripts and run a batch (or shell, etc.) to replace every single
>>>>>>> occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R
>>>>>>> script]" in all the R scripts located in the folder (and possibly
>>>>>>> subfolders) of the batch file.
>>>>>>> 2.? Or create an R project file with RStudio and use the package "here"
>>>>>>> to get the absolute path of the R project file and put all the R
>>>>>>> scripts related to this project in the R project directory, as often
>>>>>>> recommended.
>>>>>>>
>>>>>>> But I am really wondering why R doesn't have (please tell me if I'm
>>>>>>> wrong) this basic feature as many other languages have it (batch,
>>>>>>> shell, C, LaTeX, SAS with macro-variables, etc.)?
>>>>>>> Do you know whether the language will have this kind of function in a
>>>>>>> near future? What are the obstacles / what is the reasoning for not
>>>>>>> having it already?
>>>>>>>
>>>>>>> Do you know other workarounds?
>>>>>>>
>>>>>>> Best regards,
>>>>>>>
>>>>>>> Olivier
>>>>>>>
>>>>>>>???????? [[alternative HTML version deleted]]
>>>>>>>
>>>>>>> ______________________________________________
>>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>> PLEASE do read the posting guide
>>>>>>> http://www.R-project.org/posting-guide.html
>>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>
>>>>>> --
>>>>>> Sent from my phone. Please excuse my brevity.
>>>>>>
>>>>>>???????? [[alternative HTML version deleted]]
>>>>>>
>>>>>>
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>
>>>>
>>>>
>>> 
>>> ---------------------------------------------------------------------------
>>> Jeff Newmiller??????????????????????? The???? .....?????? .....? Go Live...
>>> DCN:<jdnewmil at dcn.davis.ca.us>??????? Basics: ##.#.?????? ##.#.? Live Go...
>>>???????????????????????????????????????? Live:?? OO#.. Dead: OO#..? Playing
>>> Research Engineer (Solar/Batteries??????????? O.O#.?????? #.O#.? with
>>> /Software/Embedded Controllers)?????????????? .OO#.?????? .OO#.? rocks...1k
>>> ---------------------------------------------------------------------------
>>> 
>>>??????? [[alternative HTML version deleted]]
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>> 
>> 
>



From bgunter@4567 @end|ng |rom gm@||@com  Wed Oct 10 22:37:33 2018
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 10 Oct 2018 13:37:33 -0700
Subject: [R] Genuine relative paths with R
In-Reply-To: <VI1PR0202MB335744BC531D2F410931FEBFF5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <CAP01uR=FnwBZ=_iet5q0_tZQS4WZ0MjiiY_-kFr_KL9GFwL=ww@mail.gmail.com>
 <VI1PR0202MB335744BC531D2F410931FEBFF5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
Message-ID: <CAGxFJbSFz4iwMazvZvVP3JnSVmiAdkhdoLhcrwW2Mz76tZpjNQ@mail.gmail.com>

I haven't followed this discussion closely, so this may be offbase, but in
response to your point 2., note that you can set the working directory via
setwd() in your .Rprofile file. Of course, users can always determine the
working directory via invoking the getwd() function, so I'm not sure what
you mean here. However, as I said, if my comments are useless, please
ignore and do not waste time responding.

Cheers,
Bert



On Wed, Oct 10, 2018 at 6:53 AM Olivier GIVAUDAN <
olivier_givaudan at hotmail.com> wrote:

> Hi Gabor,
> ?
>
>   1.  By definition the relative path (I'm excluding the absolute path
> solution for obvious reasons) depends on the current working directory:
> What if my R script is not located along this current working directory? It
> won't work.?
>   2.  What should I write as an option in this .Rprofile file? An absolute
> path to the project's root? Plus I don't want the users to choose their
> working directory: this technicality should be kept hidden from them and be
> automatic.?
>
> Best regards,?
> ?
> Olivier
> ________________________________
> De : Gabor Grothendieck <ggrothendieck at gmail.com>
> Envoy? : samedi 6 octobre 2018 23:33
> ? : olivier_givaudan at hotmail.com; r-help at r-project.org
> Objet : Re: [R] Genuine relative paths with R
>
> 1. Assuming you are starting the script from within R, if you want to
> keep all the files used by the script together with the script itself
> then just source the script using the absolute or relative path to the
> script using source(..., chdir = TRUE) as shown below and the script
> will run in the directory containing the script. We used an absoluate
> path below but a relative path will work too.  In either case the
> script itself will not need to use absolute paths and it is portable
> to other machines.
>
>   source("/path/to/script.R", chdir = TRUE)
>
> If your script is on your PATH then this would work:
>
>   source(Sys.which("script.R"), chdir = TRUE)
>
> 2. Another approach is to define an R option, say root, using the R
> options() function to define the root directory of your project.  You
> can have a different R option for each project.  Place the options()
> statements to set these R options for your various projects in your
> .Rprofile, say, and in the script use:
>
>     root <- getOption("root", ".")
>
> to cause it to retrieve the value of the R option root if it is
> defined and use the current directory otherwise.  Use a different name
> for each project. If the user does not define the R option root it
> will be up to them to change directory first.  Again there will be no
> use of absolute paths in the script itself and it is portable to other
> machines.
>
> What is particularly convenient about this is that it documents where
> all the projects are on the  machine right in the .Rproject file so
> one always knows where they are.
>
> On Sat, Oct 6, 2018 at 8:25 AM Olivier GIVAUDAN
> <olivier_givaudan at hotmail.com> wrote:
> >> Dear R users,
> >
> > I would like to work with genuine relative paths in R for obvious
> reasons: if I move all my scripts related to some project as a whole to
> another location of my computer or someone else's computer, if want my
> scripts to continue to run seamlessly.
> >
> > What I mean by "genuine" is that it should not be necessary to hardcode
> one single absolute path (making the code obviously not "portable" - to
> another place - anymore).
> >
> > For the time being, I found the following related posts, unfortunately
> never conclusive or even somewhat off-topic:
> >
> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
> >
> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
> >
> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
> >
> > So I found 2 workarounds, more or less satisfactory:
> >
> >
> >   1.  Either create a variable "ScriptPath" in the first lines of each
> of my R scripts and run a batch (or shell, etc.) to replace every single
> occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R
> script]" in all the R scripts located in the folder (and possibly
> subfolders) of the batch file.
> >   2.  Or create an R project file with RStudio and use the package
> "here" to get the absolute path of the R project file and put all the R
> scripts related to this project in the R project directory, as often
> recommended.
> >
> > But I am really wondering why R doesn't have (please tell me if I'm
> wrong) this basic feature as many other languages have it (batch, shell, C,
> LaTeX, SAS with macro-variables, etc.)?
> > Do you know whether the language will have this kind of function in a
> near future? What are the obstacles / what is the reasoning for not having
> it already?
> >
> > Do you know other workarounds?
> >
> > Best regards,
> >
> > Olivier
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
>
>
> --
> Statistics & Software Consulting
> GKX Group, GKX Associates Inc.
> tel: 1-877-GKX-GROUP
> email: ggrothendieck at gmail.com
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From o||v|er_g|v@ud@n @end|ng |rom hotm@||@com  Wed Oct 10 22:42:27 2018
From: o||v|er_g|v@ud@n @end|ng |rom hotm@||@com (Olivier GIVAUDAN)
Date: Wed, 10 Oct 2018 20:42:27 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <EF096B6D-D167-402E-A1BB-9310D60E6F64@dcn.davis.ca.us>
 <VI1PR0202MB33571A964A191D165B3BF422F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <292ca297-27e3-162b-e525-fabc4bb4554c@kogentum.hu>
 <VI1PR0202MB3357E9066FF1527BAC014784F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <dbde4f15-caa6-dc62-3a10-e804cc81671a@kogentum.hu>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>,
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
Message-ID: <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>

Why are you not simply double-clicking on 'TestPWD' and choosing to execute the file (don't add anything)?
Are you executing the file from a terminal?
________________________________
De : Duncan Murdoch <murdoch.duncan at gmail.com>
Envoy? : mercredi 10 octobre 2018 20:17
? : Olivier GIVAUDAN; Jeff Newmiller
Cc : r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

On 10/10/2018 3:51 PM, Olivier GIVAUDAN wrote:
> Well, no idea...
>
> I just created a file 'TestPWD', made it executable, inserted in it
> these lines and moved the file in various places:
>
> #!/bin/bash
>
> echo $PWD
> read -p ""

When I execute that, it prints my working directory.  Doesn't matter
where the TestPWD file is.  If I put it in directory "foo", and change
to foo's parent, then

   foo/TestPWD

prints the name of the parent directory, not the foo directory.  If I
then add foo to the PATH, and run

   TestPWD

I get the same thing.  I find it unbelievable that you are seeing
anything different from that on a Unix-alike.

Duncan Muroch


> ------------------------------------------------------------------------
> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Envoy? :* mercredi 10 octobre 2018 15:20
> *? :* Olivier GIVAUDAN; Jeff Newmiller
> *Cc :* r-help at r-project.org
> *Objet :* Re: [R] Genuine relative paths with R
> On 10/10/2018 11:18 AM, Olivier GIVAUDAN wrote:
>> Hi Duncan,
>>
>> Yes, if you need to display the content of $PWD you obviously need to
>> type 'echo' before this variable.
>>
>> It prints the user's working directory if run from a terminal but if run
>> from a bash file it prints the working directory of the script.
>> At least for me (I am running on the last version of Ubuntu)...
>
> Not for me.  Always prints the user's working directory.
>
> Duncan Murdoch
>
>
>>
>> Best regards,
>>
>> Olivier
>> ------------------------------------------------------------------------
>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>> *Envoy? :* mercredi 10 octobre 2018 14:51
>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>> *Cc :* r-help at r-project.org
>> *Objet :* Re: [R] Genuine relative paths with R
>> On 10/10/2018 10:37 AM, Olivier GIVAUDAN wrote:
>>> Hi Jeff,
>>> ?
>>>> That is, there is not always a file in a particular directory even involved in the executing code.??
>>> ?
>>> True. I'm only asking in the case where some R code is run from an R file. This function 'MyOwnPath()' (say) should only work (i.e. return a useful result) in this case.?
>>> ?
>>>> The R interpreter does not make assumptions about where the code it is running came from.?
>>> ?
>>> That's precisely the reproach I have in case the code comes from a file.?
>>> ?
>>>> You also keep referring to "this feature" being in many languages, though you seem to be mistaken about most of them...?
>>> ?
>>> 'Most of them' is largely exaggerated (plus I corrected myself): I only mixed between the 'cd' variable / command in Windows and Linux shells (you would certainly agree it's a bit vicious).?
>>> ?
>>>> $PWD is the same as getwd()?
>>> ?
>>> Wrong. As I already said, if I create an R script located somewhere on my computer with the only line 'getwd()' and run this script, I won't get the directory of this R script, contrary to a shell file with the only line '$PWD'.?
>>
>> What system are you talking about?  On Unix-alikes, you'd need an "echo"
>> ahead of that, and it would print the user's working directory, not the
>> working directory of the script.
>>
>> Duncan Murdoch
>>
>>> ?
>>>> __FILE__ in C relates to the source code directory that is usually not where the executable is ?located and may not even exist on the computer it is running on?
>>> ?
>>> Yes, and? What is the issue here? So '__FILE__' does the job. Invoking '__FILE__' in a .C file (I never said in its related executable) will return the absolute path of this C source file.?
>>> '__DIR__' in PHP also does the job. No to forget the good old VBA (Excel in this case) 'ActiveWorkbook.Path'.?
>>>
>>> Thank you for the 2 references you provided.
>>> However it seems that some manual settings are still required to be able to use Rscript.
>>> But I like the solution of the .RData file: I simply created an empty .RData file at the root of my project and by double-clicking on this file (as you said), the R GUI opens and 'getwd()' returns the path of this .RData file. It seems to be a good alternative to .Rproj file to be opened with RStudio.
>>> ?
>>>> However, by far the best approach is to teach your users to fish... if you give them an RStudio project directory they can double-click on the .Rproj ?file to set the current directory and enter the world of R.??
>>> ?
>>> Yes, using an .Rproj file to be opened with RStudio also seems to me to be a reasonable solution (the one I chose until now), although it is still a workaround and requires RStudio.?
>>> Actually in this case, the package 'here'? I previously mentioned is useless to get the current working directory of the project as 'When a project is opened within RStudio the following actions are taken: [...] The current working directory is set to the project directory.', as stated on this page:
>> https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects.
>>> So 'getwd()' returns exactly the same as 'here()' does.
>>>
>>> Best regards,?
>>> ?
>>> Olivier
>>>
>>> ________________________________
>>> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>>> Envoy? : dimanche 7 octobre 2018 20:48
>>> ? : Olivier GIVAUDAN
>>> Cc : D?nes T?th; r-help at r-project.org
>>> Objet : RE: [R] Genuine relative paths with R
>>>
>>> On Sun, 7 Oct 2018, Olivier GIVAUDAN wrote:
>>>
>>>> Hello Denes,
>>>>
>>>>> Yes, the path to the "root" folder of your project. You seem to have a
>>>> really esoteric context if you want to run an R script without knowing
>>>> its path in the file system.
>>>>
>>>> I don't have any esoteric context: I'm just looking for the most generic, automatic and reproducible solution.
>>>> Of course you always know where an R script is located, nevertheless it doesn't imply you want to manually write its path in this
>>>> R script. The issue is to have to hardcode an absolute path: I don't want that.
>>>>
>>>>> Because it is extremely rare that someone - who uses R for what it is
>>>> worth and in a manner how R is supposed to be used - actually needs such
>>>> a function.
>>>>
>>>
>>>> First, the fact that it is rare doesn't mean this need is not legitimate
>>>> and relevant: it is needed to make R projects fully movable (i.e.
>>>> wherever you want). Second why a vast majority of languages does have
>>>> this feature and not R? Why is it useful in these languages and not in
>>>> R?
>>>
>>> The R interpreter does not make assumptions about where the code it is
>>> running came from. You might be running it by using the source() function,
>>> or by using the Rscript program, or by R CMD BATCH, or using eval() on
>>> code you pasted together in an R function, or as byte-compiled code loaded
>>> from an RData file. That is, there is not always a file in a particular
>>> directory even involved in the executing code.
>>>
>>> You also keep referring to "this feature" being in many languages, though
>>> you seem to be mistaken about most of them... in fact, they, too, know NOT
>>> where the script is but where the current directory is ($PWD is the same
>>> as getwd()) or where the compilation occurred (__FILE__ in C relates to
>>> the source code directory that is usually not where the executable is
>>> located and may not even exist on the computer it is running on).
>>>
>>> I have already pointed out that the solution is to let the OS set the
>>> current directory. If you want the user to have access to R independent of
>>> your code, the easiest way to leave them in Rgui after your code is done
>>> is to use save.image() to create a "myApp.RData" file which can be
>>> double-clicked [1]. The double-clicking action by default (as defined by
>>> the installation of R) causes the operating system to set the current
>>> directory to the one containing the file you double-clicked on and then
>>> executes the Rgui program.
>>>
>>> If you don't want the user to interact with your session, you can use the
>>> Rscript executable (also mentioned briefly at the bottom of [1]). In both
>>> cases, the user has (unknowingly) set the current directory before running
>>> your code, and there is no need to encode where the script is or was
>>> inside the script.
>>>
>>> You can also create a windows shortcut to invoke Rscript yourself by
>>> bootstrapping the RData file and invoking the
>>> R.utils::createWindowsShortcut() [2] function.
>>>
>>> However, by far the best approach is to teach your users to fish... if you
>>> give them an RStudio project directory they can double-click on the .Rproj
>>> file to set the current directory and enter the world of R.
>>>
>>> [1] https://www.r-bloggers.com/look-ma-no-typing-autorunning-code-on-r-startup/
>>> [2] https://cran.r-project.org/web/packages/R.utils/R.utils.pdf
>>>
>>> End comment.
>>>
>>>> Best regards,
>>>>
>>>> Olivier
>>>>
>>>> _________________________________________________________________________________________________________________________________
>>>> De : D?nes T?th <toth.denes at kogentum.hu>
>>>> Envoy? : samedi 6 octobre 2018 23:36
>>>> ? : Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
>>>> Objet : Re: [R] Genuine relative paths with R
>>>> Hi Olivier,
>>>>
>>>>
>>>> On 10/07/2018 01:13 AM, Olivier GIVAUDAN wrote:
>>>>> Hi Denes,
>>>>>
>>>>> Thank you for the possibility you shared: unfortunately it still uses
>>>>> one hardcoded absolute path which I want to avoid.
>>>>
>>>> Yes, the path to the "root" folder of your project. You seem to have a
>>>> really esoteric context if you want to run an R script without knowing
>>>> its path in the file system.
>>>>
>>>>>
>>>>> I just think that the solutions suggested are too complicated for my
>>>>> simple need.
>>>>>
>>>>> The root cause being that R doesn't seem to have the Windows batch
>>>>> equivalent of cd, or bash equivalent of $PWD, or PHP equivalent of __DIR__.
>>>>> Hence the workarounds we are discussing.
>>>>>
>>>>> And finally we go back to my initial question: if such a function
>>>>> doesn't exist in R, what are the reasons?
>>>>
>>>> Because it is extremely rare that someone - who uses R for what it is
>>>> worth and in a manner how R is supposed to be used - actually needs such
>>>> a function.
>>>>
>>>> Best,
>>>> Denes
>>>>
>>>>
>>>>
>>>>>
>>>>> Best regards,
>>>>>
>>>>> Olivier
>>>>> ------------------------------------------------------------------------
>>>>> *De :* D?nes T?th <toth.denes at kogentum.hu>
>>>>> *Envoy? :* samedi 6 octobre 2018 23:05
>>>>> *?:* Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
>>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>>> Hi Olivier,
>>>>>
>>>>> I really think that Ista and Jeff gave you plenty of useful options how
>>>>> you can avoid using absolute paths.
>>>>>
>>>>> One more possibility: you can use `source()` with the chdir = TRUE
>>>>> argument (see ?source). If you have a master script which sources other
>>>>> files which are located in a fixed hierarchy relative to the location of
>>>>> the master script, the only time when you have to use an absolute path
>>>>> is when you source your master script, e.g.:
>>>>> source("/my/path/to/master.R", chdir = TRUE)
>>>>>
>>>>> Inside the master script, you can then source the other scripts by
>>>>> relative paths, define your 'data' folders relative to the master script
>>>>> and let the other scripts use those data paths, etc.
>>>>>
>>>>> Best,
>>>>> Denes
>>>>>
>>>>>
>>>>> On 10/06/2018 11:36 PM, Olivier GIVAUDAN wrote:
>>>>>> Hi Jeff,
>>>>>>
>>>>>> Thanks for sharing your workaround.
>>>>>>
>>>>>> I guess my last answer to Ista answers your question as well.
>>>>>>
>>>>>> To me this function (an equivalent of 'cd', say) should be platform-independent.
>>>>>>
>>>>>> Best regards,
>>>>>>
>>>>>> Olivier
>>>>>>
>>>>>> ________________________________
>>>>>> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>>>>>> Envoy??? : samedi 6 octobre 2018 19:31
>>>>>> ??? : r-help at r-project.org; Olivier GIVAUDAN; r-help at r-project.org
>>>>>> Objet : Re: [R] Genuine relative paths with R
>>>>>>
>>>>>> I stopped using hardcoded absolute paths inside R scripts years ago, and I suspect that is fairly common practice. That is, I
>>>> almost never enter a path starting with "/" or "c:/" in an R script.
>>>>>>
>>>>>> The key concession you have to make is to start your R session in your working directory using OS-specific mechanisms, and
>>>> then reference your code and data relative to that directory. RStudio project files offer one mechanism for doing this; using CD
>>>> from  the OS command line is another, and using the file-browser
>>>>> double-click mechanism on .RData files is another (though I prefer to
>>>>> avoid that these days due to potential global environment contamination).
>>>>>>
>>>>>> Perhaps you can be more specific about what facilities you are expecting to find. You should also mention what OS you
>>>> typically use and how you normally start R.
>>>>>>
>>>>>> On October 6, 2018 4:48:44 AM PDT, Olivier GIVAUDAN <olivier_givaudan at hotmail.com> wrote:
>>>>>>> Dear R users,
>>>>>>>
>>>>>>> I would like to work with genuine relative paths in R for obvious
>>>>>>> reasons: if I move all my scripts related to some project as a whole to
>>>>>>> another location of my computer or someone else's computer, if want my
>>>>>>> scripts to continue to run seamlessly.
>>>>>>>
>>>>>>> What I mean by "genuine" is that it should not be necessary to hardcode
>>>>>>> one single absolute path (making the code obviously not "portable" - to
>>>>>>> another place - anymore).
>>>>>>>
>>>>>>> For the time being, I found the following related posts, unfortunately
>>>>>>> never conclusive or even somewhat off-topic:
>>>>>>> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
>>>>>>> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
>>>>>>> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
>>>>>>>
>>>>>>> So I found 2 workarounds, more or less satisfactory:
>>>>>>>
>>>>>>>
>>>>>>> 1.  Either create a variable "ScriptPath" in the first lines of each of
>>>>>>> my R scripts and run a batch (or shell, etc.) to replace every single
>>>>>>> occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R
>>>>>>> script]" in all the R scripts located in the folder (and possibly
>>>>>>> subfolders) of the batch file.
>>>>>>> 2.  Or create an R project file with RStudio and use the package "here"
>>>>>>> to get the absolute path of the R project file and put all the R
>>>>>>> scripts related to this project in the R project directory, as often
>>>>>>> recommended.
>>>>>>>
>>>>>>> But I am really wondering why R doesn't have (please tell me if I'm
>>>>>>> wrong) this basic feature as many other languages have it (batch,
>>>>>>> shell, C, LaTeX, SAS with macro-variables, etc.)?
>>>>>>> Do you know whether the language will have this kind of function in a
>>>>>>> near future? What are the obstacles / what is the reasoning for not
>>>>>>> having it already?
>>>>>>>
>>>>>>> Do you know other workarounds?
>>>>>>>
>>>>>>> Best regards,
>>>>>>>
>>>>>>> Olivier
>>>>>>>
>>>>>>>         [[alternative HTML version deleted]]
>>>>>>>
>>>>>>> ______________________________________________
>>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>> PLEASE do read the posting guide
>>>>>>> http://www.R-project.org/posting-guide.html
>>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>
>>>>>> --
>>>>>> Sent from my phone. Please excuse my brevity.
>>>>>>
>>>>>>         [[alternative HTML version deleted]]
>>>>>>
>>>>>>
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------------
>>> Jeff Newmiller                        The     .....       .....  Go Live...
>>> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
>>>                                         Live:   OO#.. Dead: OO#..  Playing
>>> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
>>> /Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
>>> ---------------------------------------------------------------------------
>>>
>>>        [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>


	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Oct 10 22:54:30 2018
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 10 Oct 2018 16:54:30 -0400
Subject: [R] Genuine relative paths with R
In-Reply-To: <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <292ca297-27e3-162b-e525-fabc4bb4554c@kogentum.hu>
 <VI1PR0202MB3357E9066FF1527BAC014784F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <dbde4f15-caa6-dc62-3a10-e804cc81671a@kogentum.hu>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
Message-ID: <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>

On 10/10/2018 4:42 PM, Olivier GIVAUDAN wrote:
> Why are you not simply double-clicking on 'TestPWD' and choosing to 
> execute the file (don't add anything)?
> Are you executing the file from a terminal?

Yes, I was executing the file from my terminal.  Otherwise I really have 
no idea what the "current directory" is in the Finder.   (I'm on a Mac. 
I just tried the click method; it printed my home directory, not the 
directory of the script.)

I don't know the name of your visual front end, but you are displaying 
the working directory that it sets when you click on TestPWD.  That will 
be different from the working directory that your user sees in the Terminal.

You can see what I saw if you run TestPWD from the Terminal.  It will 
print the current working directory, not the one where TestPWD happens 
to live.

If you want to do the same sort of thing in R, you could set up a script 
that calls R, and execute that in the way you executed TestPWD.  But in 
another message you said you aren't allowed to do that, so I think your 
best solution is the one offered by Bill Dunlap:  organize your files as 
an R package.  If you name your package "Olivier", then you can find all 
the files in it under the directory returned by

   system.file(".", package = "Olivier")

The package system is designed for R code, but you can put arbitrary 
files into a package:  just store them under the "inst" directory in 
your source.  When the package is installed, those files will be moved 
up one level, i.e.

Olivier/inst/foo

will become

   system.file("foo", package = "Olivier")

Duncan Murdoch



From |e@||e@rutkow@k| @end|ng |rom gm@||@com  Wed Oct 10 22:53:41 2018
From: |e@||e@rutkow@k| @end|ng |rom gm@||@com (Leslie Rutkowski)
Date: Wed, 10 Oct 2018 16:53:41 -0400
Subject: [R] Code "tags"
In-Reply-To: <CAGxFJbT0p+=F_NRmswV03bo9YWgUdqTaqyB7qUhWcnNNY_CW1A@mail.gmail.com>
References: <CAA0F9kW1SyLe_PnYnSoeVWcdRJswX7MF1YxrxrG7Vgngn_S=Ww@mail.gmail.com>
 <CAGxFJbT0p+=F_NRmswV03bo9YWgUdqTaqyB7qUhWcnNNY_CW1A@mail.gmail.com>
Message-ID: <CAA0F9kUEvK3Y-dx3jSRqEnPw3CK=4HygJXPwhev+bw2NqztPrg@mail.gmail.com>

"tags" are a way to label things digitally so that they are easier to find
later - Twitter uses these, as one example.

I found a nice solution: GitHubGist with an interface via Lepton, if anyone
else would like to avoid rummaging through old code to find something (a
function, an example, whatever). Organization looks pretty detailed and
relatively user friendly, with labels for languages and tags. You can also
make your "gists" public or private.

Leslie



On Wed, Oct 10, 2018 at 4:15 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> "get organized around R programming" is rather vague.  Nor do I know what
> you mean by "tagging" code snippets.
>
> A standard answer would be to write your "code" as documented functions in
> a package (e.g. "LeslieMisc"). RStudio -- a wholly separate software
> product -- has various tools to that may also be relevant. RMarkdown allows
> you to write documents in which you embed executable R code, which is
> useful for producing "vignettes" to illustrate how code works. Roxygen is
> useful for producing package docs with a minimum of pain. Any of these --
> and others, like just producing inline comments -- may be useful.
>
> -- Bert
>
>
>
> On Wed, Oct 10, 2018 at 12:43 PM Leslie Rutkowski <
> leslie.rutkowski at gmail.com> wrote:
>
>> Hi all,
>>
>> I'm trying to get organized about my R programming and I'm looking for a
>> way to "tag" snippets of handy code that I go back to time and again. At
>> the moment, I just plop .R files into a folder and rely on the file name
>> to
>> guide me. In desperation, I've taken to saving the same chunk as multiple
>> .R files with different "tags" (e.g. "Loops with titles.R" = "CLT
>> example.R").
>>
>> Any tips would be appreciated.
>>
>> Thanks,
>> Leslie
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]



From o||v|er_g|v@ud@n @end|ng |rom hotm@||@com  Wed Oct 10 23:03:30 2018
From: o||v|er_g|v@ud@n @end|ng |rom hotm@||@com (Olivier GIVAUDAN)
Date: Wed, 10 Oct 2018 21:03:30 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <EF096B6D-D167-402E-A1BB-9310D60E6F64@dcn.davis.ca.us>
 <VI1PR0202MB33571A964A191D165B3BF422F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <292ca297-27e3-162b-e525-fabc4bb4554c@kogentum.hu>
 <VI1PR0202MB3357E9066FF1527BAC014784F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <dbde4f15-caa6-dc62-3a10-e804cc81671a@kogentum.hu>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>,
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>,
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
Message-ID: <DB3PR0202MB33554654F5276A0D53C13A0DF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>

Actually there is a difference between:

  1.  Directly executing the file by the user by double clicking on the "physical" file (you can only do that from the directory where the file is located), without going through any terminal, and
  2.  Executing this file "remotely" by calling it through a terminal for instance.

________________________________
De : R-help <r-help-bounces at r-project.org> de la part de Olivier GIVAUDAN <olivier_givaudan at hotmail.com>
Envoy? : mercredi 10 octobre 2018 20:42
? : Duncan Murdoch; Jeff Newmiller
Cc : r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

Why are you not simply double-clicking on 'TestPWD' and choosing to execute the file (don't add anything)?
Are you executing the file from a terminal?
________________________________
De : Duncan Murdoch <murdoch.duncan at gmail.com>
Envoy? : mercredi 10 octobre 2018 20:17
? : Olivier GIVAUDAN; Jeff Newmiller
Cc : r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

On 10/10/2018 3:51 PM, Olivier GIVAUDAN wrote:
> Well, no idea...
>
> I just created a file 'TestPWD', made it executable, inserted in it
> these lines and moved the file in various places:
>
> #!/bin/bash
>
> echo $PWD
> read -p ""

When I execute that, it prints my working directory.  Doesn't matter
where the TestPWD file is.  If I put it in directory "foo", and change
to foo's parent, then

   foo/TestPWD

prints the name of the parent directory, not the foo directory.  If I
then add foo to the PATH, and run

   TestPWD

I get the same thing.  I find it unbelievable that you are seeing
anything different from that on a Unix-alike.

Duncan Muroch


> ------------------------------------------------------------------------
> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Envoy? :* mercredi 10 octobre 2018 15:20
> *? :* Olivier GIVAUDAN; Jeff Newmiller
> *Cc :* r-help at r-project.org
> *Objet :* Re: [R] Genuine relative paths with R
> On 10/10/2018 11:18 AM, Olivier GIVAUDAN wrote:
>> Hi Duncan,
>>
>> Yes, if you need to display the content of $PWD you obviously need to
>> type 'echo' before this variable.
>>
>> It prints the user's working directory if run from a terminal but if run
>> from a bash file it prints the working directory of the script.
>> At least for me (I am running on the last version of Ubuntu)...
>
> Not for me.  Always prints the user's working directory.
>
> Duncan Murdoch
>
>
>>
>> Best regards,
>>
>> Olivier
>> ------------------------------------------------------------------------
>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>> *Envoy? :* mercredi 10 octobre 2018 14:51
>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>> *Cc :* r-help at r-project.org
>> *Objet :* Re: [R] Genuine relative paths with R
>> On 10/10/2018 10:37 AM, Olivier GIVAUDAN wrote:
>>> Hi Jeff,
>>> ?
>>>> That is, there is not always a file in a particular directory even involved in the executing code.??
>>> ?
>>> True. I'm only asking in the case where some R code is run from an R file. This function 'MyOwnPath()' (say) should only work (i.e. return a useful result) in this case.?
>>> ?
>>>> The R interpreter does not make assumptions about where the code it is running came from.?
>>> ?
>>> That's precisely the reproach I have in case the code comes from a file.?
>>> ?
>>>> You also keep referring to "this feature" being in many languages, though you seem to be mistaken about most of them...?
>>> ?
>>> 'Most of them' is largely exaggerated (plus I corrected myself): I only mixed between the 'cd' variable / command in Windows and Linux shells (you would certainly agree it's a bit vicious).?
>>> ?
>>>> $PWD is the same as getwd()?
>>> ?
>>> Wrong. As I already said, if I create an R script located somewhere on my computer with the only line 'getwd()' and run this script, I won't get the directory of this R script, contrary to a shell file with the only line '$PWD'.?
>>
>> What system are you talking about?  On Unix-alikes, you'd need an "echo"
>> ahead of that, and it would print the user's working directory, not the
>> working directory of the script.
>>
>> Duncan Murdoch
>>
>>> ?
>>>> __FILE__ in C relates to the source code directory that is usually not where the executable is ?located and may not even exist on the computer it is running on?
>>> ?
>>> Yes, and? What is the issue here? So '__FILE__' does the job. Invoking '__FILE__' in a .C file (I never said in its related executable) will return the absolute path of this C source file.?
>>> '__DIR__' in PHP also does the job. No to forget the good old VBA (Excel in this case) 'ActiveWorkbook.Path'.?
>>>
>>> Thank you for the 2 references you provided.
>>> However it seems that some manual settings are still required to be able to use Rscript.
>>> But I like the solution of the .RData file: I simply created an empty .RData file at the root of my project and by double-clicking on this file (as you said), the R GUI opens and 'getwd()' returns the path of this .RData file. It seems to be a good alternative to .Rproj file to be opened with RStudio.
>>> ?
>>>> However, by far the best approach is to teach your users to fish... if you give them an RStudio project directory they can double-click on the .Rproj ?file to set the current directory and enter the world of R.??
>>> ?
>>> Yes, using an .Rproj file to be opened with RStudio also seems to me to be a reasonable solution (the one I chose until now), although it is still a workaround and requires RStudio.?
>>> Actually in this case, the package 'here'? I previously mentioned is useless to get the current working directory of the project as 'When a project is opened within RStudio the following actions are taken: [...] The current working directory is set to the project directory.', as stated on this page:
>> https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects.
>>> So 'getwd()' returns exactly the same as 'here()' does.
>>>
>>> Best regards,?
>>> ?
>>> Olivier
>>>
>>> ________________________________
>>> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>>> Envoy? : dimanche 7 octobre 2018 20:48
>>> ? : Olivier GIVAUDAN
>>> Cc : D?nes T?th; r-help at r-project.org
>>> Objet : RE: [R] Genuine relative paths with R
>>>
>>> On Sun, 7 Oct 2018, Olivier GIVAUDAN wrote:
>>>
>>>> Hello Denes,
>>>>
>>>>> Yes, the path to the "root" folder of your project. You seem to have a
>>>> really esoteric context if you want to run an R script without knowing
>>>> its path in the file system.
>>>>
>>>> I don't have any esoteric context: I'm just looking for the most generic, automatic and reproducible solution.
>>>> Of course you always know where an R script is located, nevertheless it doesn't imply you want to manually write its path in this
>>>> R script. The issue is to have to hardcode an absolute path: I don't want that.
>>>>
>>>>> Because it is extremely rare that someone - who uses R for what it is
>>>> worth and in a manner how R is supposed to be used - actually needs such
>>>> a function.
>>>>
>>>
>>>> First, the fact that it is rare doesn't mean this need is not legitimate
>>>> and relevant: it is needed to make R projects fully movable (i.e.
>>>> wherever you want). Second why a vast majority of languages does have
>>>> this feature and not R? Why is it useful in these languages and not in
>>>> R?
>>>
>>> The R interpreter does not make assumptions about where the code it is
>>> running came from. You might be running it by using the source() function,
>>> or by using the Rscript program, or by R CMD BATCH, or using eval() on
>>> code you pasted together in an R function, or as byte-compiled code loaded
>>> from an RData file. That is, there is not always a file in a particular
>>> directory even involved in the executing code.
>>>
>>> You also keep referring to "this feature" being in many languages, though
>>> you seem to be mistaken about most of them... in fact, they, too, know NOT
>>> where the script is but where the current directory is ($PWD is the same
>>> as getwd()) or where the compilation occurred (__FILE__ in C relates to
>>> the source code directory that is usually not where the executable is
>>> located and may not even exist on the computer it is running on).
>>>
>>> I have already pointed out that the solution is to let the OS set the
>>> current directory. If you want the user to have access to R independent of
>>> your code, the easiest way to leave them in Rgui after your code is done
>>> is to use save.image() to create a "myApp.RData" file which can be
>>> double-clicked [1]. The double-clicking action by default (as defined by
>>> the installation of R) causes the operating system to set the current
>>> directory to the one containing the file you double-clicked on and then
>>> executes the Rgui program.
>>>
>>> If you don't want the user to interact with your session, you can use the
>>> Rscript executable (also mentioned briefly at the bottom of [1]). In both
>>> cases, the user has (unknowingly) set the current directory before running
>>> your code, and there is no need to encode where the script is or was
>>> inside the script.
>>>
>>> You can also create a windows shortcut to invoke Rscript yourself by
>>> bootstrapping the RData file and invoking the
>>> R.utils::createWindowsShortcut() [2] function.
>>>
>>> However, by far the best approach is to teach your users to fish... if you
>>> give them an RStudio project directory they can double-click on the .Rproj
>>> file to set the current directory and enter the world of R.
>>>
>>> [1] https://www.r-bloggers.com/look-ma-no-typing-autorunning-code-on-r-startup/
>>> [2] https://cran.r-project.org/web/packages/R.utils/R.utils.pdf
>>>
>>> End comment.
>>>
>>>> Best regards,
>>>>
>>>> Olivier
>>>>
>>>> _________________________________________________________________________________________________________________________________
>>>> De : D?nes T?th <toth.denes at kogentum.hu>
>>>> Envoy? : samedi 6 octobre 2018 23:36
>>>> ? : Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
>>>> Objet : Re: [R] Genuine relative paths with R
>>>> Hi Olivier,
>>>>
>>>>
>>>> On 10/07/2018 01:13 AM, Olivier GIVAUDAN wrote:
>>>>> Hi Denes,
>>>>>
>>>>> Thank you for the possibility you shared: unfortunately it still uses
>>>>> one hardcoded absolute path which I want to avoid.
>>>>
>>>> Yes, the path to the "root" folder of your project. You seem to have a
>>>> really esoteric context if you want to run an R script without knowing
>>>> its path in the file system.
>>>>
>>>>>
>>>>> I just think that the solutions suggested are too complicated for my
>>>>> simple need.
>>>>>
>>>>> The root cause being that R doesn't seem to have the Windows batch
>>>>> equivalent of cd, or bash equivalent of $PWD, or PHP equivalent of __DIR__.
>>>>> Hence the workarounds we are discussing.
>>>>>
>>>>> And finally we go back to my initial question: if such a function
>>>>> doesn't exist in R, what are the reasons?
>>>>
>>>> Because it is extremely rare that someone - who uses R for what it is
>>>> worth and in a manner how R is supposed to be used - actually needs such
>>>> a function.
>>>>
>>>> Best,
>>>> Denes
>>>>
>>>>
>>>>
>>>>>
>>>>> Best regards,
>>>>>
>>>>> Olivier
>>>>> ------------------------------------------------------------------------
>>>>> *De :* D?nes T?th <toth.denes at kogentum.hu>
>>>>> *Envoy? :* samedi 6 octobre 2018 23:05
>>>>> *?:* Olivier GIVAUDAN; Jeff Newmiller; r-help at r-project.org
>>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>>> Hi Olivier,
>>>>>
>>>>> I really think that Ista and Jeff gave you plenty of useful options how
>>>>> you can avoid using absolute paths.
>>>>>
>>>>> One more possibility: you can use `source()` with the chdir = TRUE
>>>>> argument (see ?source). If you have a master script which sources other
>>>>> files which are located in a fixed hierarchy relative to the location of
>>>>> the master script, the only time when you have to use an absolute path
>>>>> is when you source your master script, e.g.:
>>>>> source("/my/path/to/master.R", chdir = TRUE)
>>>>>
>>>>> Inside the master script, you can then source the other scripts by
>>>>> relative paths, define your 'data' folders relative to the master script
>>>>> and let the other scripts use those data paths, etc.
>>>>>
>>>>> Best,
>>>>> Denes
>>>>>
>>>>>
>>>>> On 10/06/2018 11:36 PM, Olivier GIVAUDAN wrote:
>>>>>> Hi Jeff,
>>>>>>
>>>>>> Thanks for sharing your workaround.
>>>>>>
>>>>>> I guess my last answer to Ista answers your question as well.
>>>>>>
>>>>>> To me this function (an equivalent of 'cd', say) should be platform-independent.
>>>>>>
>>>>>> Best regards,
>>>>>>
>>>>>> Olivier
>>>>>>
>>>>>> ________________________________
>>>>>> De : Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>>>>>> Envoy??? : samedi 6 octobre 2018 19:31
>>>>>> ??? : r-help at r-project.org; Olivier GIVAUDAN; r-help at r-project.org
>>>>>> Objet : Re: [R] Genuine relative paths with R
>>>>>>
>>>>>> I stopped using hardcoded absolute paths inside R scripts years ago, and I suspect that is fairly common practice. That is, I
>>>> almost never enter a path starting with "/" or "c:/" in an R script.
>>>>>>
>>>>>> The key concession you have to make is to start your R session in your working directory using OS-specific mechanisms, and
>>>> then reference your code and data relative to that directory. RStudio project files offer one mechanism for doing this; using CD
>>>> from  the OS command line is another, and using the file-browser
>>>>> double-click mechanism on .RData files is another (though I prefer to
>>>>> avoid that these days due to potential global environment contamination).
>>>>>>
>>>>>> Perhaps you can be more specific about what facilities you are expecting to find. You should also mention what OS you
>>>> typically use and how you normally start R.
>>>>>>
>>>>>> On October 6, 2018 4:48:44 AM PDT, Olivier GIVAUDAN <olivier_givaudan at hotmail.com> wrote:
>>>>>>> Dear R users,
>>>>>>>
>>>>>>> I would like to work with genuine relative paths in R for obvious
>>>>>>> reasons: if I move all my scripts related to some project as a whole to
>>>>>>> another location of my computer or someone else's computer, if want my
>>>>>>> scripts to continue to run seamlessly.
>>>>>>>
>>>>>>> What I mean by "genuine" is that it should not be necessary to hardcode
>>>>>>> one single absolute path (making the code obviously not "portable" - to
>>>>>>> another place - anymore).
>>>>>>>
>>>>>>> For the time being, I found the following related posts, unfortunately
>>>>>>> never conclusive or even somewhat off-topic:
>>>>>>> https://stackoverflow.com/questions/1815606/rscript-determine-path-of-the-executing-script
>>>>>>> https://stackoverflow.com/questions/47044068/get-the-path-of-current-script/47045368
>>>>>>> http://r.789695.n4.nabble.com/Script-auto-detecting-its-own-path-td2719676.html
>>>>>>>
>>>>>>> So I found 2 workarounds, more or less satisfactory:
>>>>>>>
>>>>>>>
>>>>>>> 1.  Either create a variable "ScriptPath" in the first lines of each of
>>>>>>> my R scripts and run a batch (or shell, etc.) to replace every single
>>>>>>> occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R
>>>>>>> script]" in all the R scripts located in the folder (and possibly
>>>>>>> subfolders) of the batch file.
>>>>>>> 2.  Or create an R project file with RStudio and use the package "here"
>>>>>>> to get the absolute path of the R project file and put all the R
>>>>>>> scripts related to this project in the R project directory, as often
>>>>>>> recommended.
>>>>>>>
>>>>>>> But I am really wondering why R doesn't have (please tell me if I'm
>>>>>>> wrong) this basic feature as many other languages have it (batch,
>>>>>>> shell, C, LaTeX, SAS with macro-variables, etc.)?
>>>>>>> Do you know whether the language will have this kind of function in a
>>>>>>> near future? What are the obstacles / what is the reasoning for not
>>>>>>> having it already?
>>>>>>>
>>>>>>> Do you know other workarounds?
>>>>>>>
>>>>>>> Best regards,
>>>>>>>
>>>>>>> Olivier
>>>>>>>
>>>>>>>         [[alternative HTML version deleted]]
>>>>>>>
>>>>>>> ______________________________________________
>>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>> PLEASE do read the posting guide
>>>>>>> http://www.R-project.org/posting-guide.html
>>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>
>>>>>> --
>>>>>> Sent from my phone. Please excuse my brevity.
>>>>>>
>>>>>>         [[alternative HTML version deleted]]
>>>>>>
>>>>>>
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------------
>>> Jeff Newmiller                        The     .....       .....  Go Live...
>>> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
>>>                                         Live:   OO#.. Dead: OO#..  Playing
>>> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
>>> /Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
>>> ---------------------------------------------------------------------------
>>>
>>>        [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>


        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Wed Oct 10 23:21:13 2018
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Thu, 11 Oct 2018 08:21:13 +1100
Subject: [R] Code "tags"
In-Reply-To: <CAA0F9kW1SyLe_PnYnSoeVWcdRJswX7MF1YxrxrG7Vgngn_S=Ww@mail.gmail.com>
References: <CAA0F9kW1SyLe_PnYnSoeVWcdRJswX7MF1YxrxrG7Vgngn_S=Ww@mail.gmail.com>
Message-ID: <CA+8X3fVS_dNjQiDYgdfJ6tQ=HYwD4NZjY9TONznmOinjQMF5XQ@mail.gmail.com>

Hi Leslie,
Keeping track of any sort of text (or music or pictures) can be
challenging when the number of files becomes large. One way to
organize a large collection is to categorize it in some way that makes
sense to you. Say you create a directory structure:

R_code__________________________________________________
            |                      |                            |
               |                         |
data_input         output_listing        desc_stats           plots
           R objects
   |          |               |             |
                                   |              |
CSV    Excel       text        HTML
              saving   combining

Within categories like that, your filenames might be sufficient to
identify the one you want.

Jim



From o||v|er_g|v@ud@n @end|ng |rom hotm@||@com  Wed Oct 10 23:31:17 2018
From: o||v|er_g|v@ud@n @end|ng |rom hotm@||@com (Olivier GIVAUDAN)
Date: Wed, 10 Oct 2018 21:31:17 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <292ca297-27e3-162b-e525-fabc4bb4554c@kogentum.hu>
 <VI1PR0202MB3357E9066FF1527BAC014784F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <dbde4f15-caa6-dc62-3a10-e804cc81671a@kogentum.hu>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>,
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
Message-ID: <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>

I do not want to use the terminal, just double clicks (i.e. the simplest, automatic, non-manual way, without having to write a line / command).
Therefore everything should happen outside any terminal. The user won't use a terminal.

I don't have a Mac and I'm not familiar with this OS, sorry.
But I'm really surprised the click method gives different results than on Linux and Windows.
I know the click method worked both on Linux (Ubuntu latest version) and Windows (10).

Yes, I executed my file from a terminal and got obviously the same result as you (that's reassuring).

Come on guys, creating a package... It's like using a hammer to kill a fly...
________________________________
De : Duncan Murdoch <murdoch.duncan at gmail.com>
Envoy? : mercredi 10 octobre 2018 20:54
? : Olivier GIVAUDAN; Jeff Newmiller
Cc : r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

On 10/10/2018 4:42 PM, Olivier GIVAUDAN wrote:
> Why are you not simply double-clicking on 'TestPWD' and choosing to
> execute the file (don't add anything)?
> Are you executing the file from a terminal?

Yes, I was executing the file from my terminal.  Otherwise I really have
no idea what the "current directory" is in the Finder.   (I'm on a Mac.
I just tried the click method; it printed my home directory, not the
directory of the script.)

I don't know the name of your visual front end, but you are displaying
the working directory that it sets when you click on TestPWD.  That will
be different from the working directory that your user sees in the Terminal.

You can see what I saw if you run TestPWD from the Terminal.  It will
print the current working directory, not the one where TestPWD happens
to live.

If you want to do the same sort of thing in R, you could set up a script
that calls R, and execute that in the way you executed TestPWD.  But in
another message you said you aren't allowed to do that, so I think your
best solution is the one offered by Bill Dunlap:  organize your files as
an R package.  If you name your package "Olivier", then you can find all
the files in it under the directory returned by

   system.file(".", package = "Olivier")

The package system is designed for R code, but you can put arbitrary
files into a package:  just store them under the "inst" directory in
your source.  When the package is installed, those files will be moved
up one level, i.e.

Olivier/inst/foo

will become

   system.file("foo", package = "Olivier")

Duncan Murdoch

	[[alternative HTML version deleted]]



From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Oct 10 23:39:10 2018
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 10 Oct 2018 17:39:10 -0400
Subject: [R] Genuine relative paths with R
In-Reply-To: <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <VI1PR0202MB3357E9066FF1527BAC014784F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <dbde4f15-caa6-dc62-3a10-e804cc81671a@kogentum.hu>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
Message-ID: <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>

On 10/10/2018 5:31 PM, Olivier GIVAUDAN wrote:
> I do not want to use the terminal, just double clicks (i.e. the 
> simplest, automatic, non-manual way, without having to write a line / 
> command).
> Therefore everything should happen outside any terminal. The user won't 
> use a terminal.
> 
> I don't have a Mac and I'm not familiar with this OS, sorry.
> But I'm really surprised the click method gives different results than 
> on Linux and Windows.
> I know the click method worked both on Linux (Ubuntu latest version) and 
> Windows (10).
> 
> Yes, I executed my file from a terminal and got obviously the same 
> result as you (that's reassuring).
> 
> Come on guys, creating a package... It's like using a hammer to kill a 
> fly...

It's a simple operation to create a package in RStudio.  Not quite a 
single click, but just a few.

In plain R, it's just a little more work using package.skeleton().

Really, if you are distributing R code, you should do it in the standard 
way, not invent your own.

Duncan Murdoch

> ------------------------------------------------------------------------
> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Envoy? :* mercredi 10 octobre 2018 20:54
> *? :* Olivier GIVAUDAN; Jeff Newmiller
> *Cc?:* r-help at r-project.org
> *Objet :* Re: [R] Genuine relative paths with R
> On 10/10/2018 4:42 PM, Olivier GIVAUDAN wrote:
>> Why are you not simply double-clicking on 'TestPWD' and choosing to 
>> execute the file (don't add anything)?
>> Are you executing the file from a terminal?
> 
> Yes, I was executing the file from my terminal.? Otherwise I really have
> no idea what the "current directory" is in the Finder.?? (I'm on a Mac.
> I just tried the click method; it printed my home directory, not the
> directory of the script.)
> 
> I don't know the name of your visual front end, but you are displaying
> the working directory that it sets when you click on TestPWD.? That will
> be different from the working directory that your user sees in the Terminal.
> 
> You can see what I saw if you run TestPWD from the Terminal.? It will
> print the current working directory, not the one where TestPWD happens
> to live.
> 
> If you want to do the same sort of thing in R, you could set up a script
> that calls R, and execute that in the way you executed TestPWD.? But in
> another message you said you aren't allowed to do that, so I think your
> best solution is the one offered by Bill Dunlap:? organize your files as
> an R package.? If you name your package "Olivier", then you can find all
> the files in it under the directory returned by
> 
>  ?? system.file(".", package = "Olivier")
> 
> The package system is designed for R code, but you can put arbitrary
> files into a package:? just store them under the "inst" directory in
> your source.? When the package is installed, those files will be moved
> up one level, i.e.
> 
> Olivier/inst/foo
> 
> will become
> 
>  ?? system.file("foo", package = "Olivier")
> 
> Duncan Murdoch



From o||v|er_g|v@ud@n @end|ng |rom hotm@||@com  Wed Oct 10 23:45:56 2018
From: o||v|er_g|v@ud@n @end|ng |rom hotm@||@com (Olivier GIVAUDAN)
Date: Wed, 10 Oct 2018 21:45:56 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <VI1PR0202MB3357E9066FF1527BAC014784F5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <dbde4f15-caa6-dc62-3a10-e804cc81671a@kogentum.hu>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>,
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
Message-ID: <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>

I'm not sure I'm "inventing my own way" of distributing R code... And I distribute it to a very limited audience.
Anyway, why not "inventing a new way" if it's more efficient than the standard one (I'm talking now in theory)?
________________________________
De : Duncan Murdoch <murdoch.duncan at gmail.com>
Envoy? : mercredi 10 octobre 2018 21:39
? : Olivier GIVAUDAN; Jeff Newmiller
Cc : r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

On 10/10/2018 5:31 PM, Olivier GIVAUDAN wrote:
> I do not want to use the terminal, just double clicks (i.e. the
> simplest, automatic, non-manual way, without having to write a line /
> command).
> Therefore everything should happen outside any terminal. The user won't
> use a terminal.
>
> I don't have a Mac and I'm not familiar with this OS, sorry.
> But I'm really surprised the click method gives different results than

> I know the click method worked both on Linux (Ubuntu latest version) and

>
> Yes, I executed my file from a terminal and got obviously the same
> result as you (that's reassuring).
>
> Come on guys, creating a package... It's like using a hammer to kill a
> fly...

It's a simple operation to create a package in RStudio.  Not quite a
single click, but just a few.

In plain R, it's just a little more work using package.skeleton().

Really, if you are distributing R code, you should do it in the standard
way, not invent your own.

Duncan Murdoch

> ------------------------------------------------------------------------
> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Envoy? :* mercredi 10 octobre 2018 20:54
> *? :* Olivier GIVAUDAN; Jeff Newmiller
> *Cc :* r-help at r-project.org
> *Objet :* Re: [R] Genuine relative paths with R
> On 10/10/2018 4:42 PM, Olivier GIVAUDAN wrote:
>> Why are you not simply double-clicking on 'TestPWD' and choosing to
>> execute the file (don't add anything)?
>> Are you executing the file from a terminal?
>
> Yes, I was executing the file from my terminal.  Otherwise I really have
> no idea what the "current directory" is in the Finder.   (I'm on a Mac.
> I just tried the click method; it printed my home directory, not the
> directory of the script.)
>
> I don't know the name of your visual front end, but you are displaying
> the working directory that it sets when you click on TestPWD.  That will
> be different from the working directory that your user sees in the Terminal.
>
> You can see what I saw if you run TestPWD from the Terminal.  It will
> print the current working directory, not the one where TestPWD happens
> to live.
>
> If you want to do the same sort of thing in R, you could set up a script
> that calls R, and execute that in the way you executed TestPWD.  But in
> another message you said you aren't allowed to do that, so I think your
> best solution is the one offered by Bill Dunlap:  organize your files as
> an R package.  If you name your package "Olivier", then you can find all
> the files in it under the directory returned by
>
>     system.file(".", package = "Olivier")
>
> The package system is designed for R code, but you can put arbitrary
> files into a package:  just store them under the "inst" directory in
> your source.  When the package is installed, those files will be moved
> up one level, i.e.
>
> Olivier/inst/foo
>
> will become
>
>     system.file("foo", package = "Olivier")
>
> Duncan Murdoch


	[[alternative HTML version deleted]]



From drj|m|emon @end|ng |rom gm@||@com  Thu Oct 11 00:02:48 2018
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Thu, 11 Oct 2018 09:02:48 +1100
Subject: [R] ANOVA in R
In-Reply-To: <CAHjanSAzyPQ8ANKLEUxzSpy0iESD+eikSFgsOo6oU+ytV8-5mg@mail.gmail.com>
References: <CAHjanSAzyPQ8ANKLEUxzSpy0iESD+eikSFgsOo6oU+ytV8-5mg@mail.gmail.com>
Message-ID: <CA+8X3fXEm20OjTfL5F-5eSa+PJJHRjcjBCEm8g6rie1eYU63+A@mail.gmail.com>

Hi Tranh,
I'm not sure why you are converting your variables to factors, and I
think the model you want is:

lm(KIC~temperature+AC+AV+Thickness+temperature:AC+
 temperature:AV+temperature:thickness+AC:AV+
 AC:thickness+AV:thickness,SR)

Note the colons (:) rather than asterisks (*) for the interactions.

Jim
On Wed, Oct 10, 2018 at 5:14 PM Thanh Tran <masternhattt at gmail.com> wrote:
>
> Hi eveyone,
> I'm studying about variance (ANOVA) in R and have some questions to share.
> I read an article investigating the effect of factors (temperature, Asphalt
> content, Air voids, and sample thickness) on the hardness of asphalt
> concrete in the tensile test (abbreviated as Kic). Each condition was
> repeated four times (4 samples). In the paper, the authors used MINITAB to
> analyze Anova. The authors use "adjusted sums of squares" calculate the
> p-value I try to use ANOVA in R to analyze this data and get the result as
> shown in Figure 4. The results are different from the results in the
> article. Some papers say that in R, the default for ANOVA analysis is to
> use "sequential sums of squares" to calculate the p-value.
> So please help the following two questions: 1 / Introduction to code in R
> for anova analysis uses "adjusted sums of squares". The main part of the
> command in R / myself is as follows: > Tem = as.factor (temperature) > Ac =
> as.factor (AC) > Av = as.factor (AV) > Thick = as.factor (Thickness) >
> Twoway = lm (KIC ~ Tem + Ac + Av + Thick + Stamp + Ac + Stamp + Av + Stamp
> + Thick + Ac * Av + Ac * Thick + Av * Thick) > anova (twoway) 2/ When to
> use "sequential sums of squares" and when to use "adjusted sums of
> squares". Some papers recommend using the "oa.design
> <https://www.youtube.com/redirect?q=http%3A%2F%2Foa.design%2F&redir_token=AaSAPDY-5UAsoHxN6BdwfyIJ7R98MTUzOTIxNDg2OUAxNTM5MTI4NDY5&event=comments>"
> function in R to check for "orthogonal" designs. If not, use "adjusted sums
> of squares". I am still vague about this command, so look forward to
> everyone's suggestion. If you could answer all two of my questions, I would
> be most grateful. Ps: I have added a CSV file and the paper for practicing
> R. http://www.mediafire.com/file/e5oe54p2c2wd4bc/Saha+research.csv
> http://www.mediafire.com/file/39jlf9h539y9mdz/Homothetic+behaviour+investigation+on+fracture+toughness+of+asphalt+mixtures+using+semicircular+bending+test.pdf
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Oct 11 00:07:29 2018
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 10 Oct 2018 18:07:29 -0400
Subject: [R] Genuine relative paths with R
In-Reply-To: <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
Message-ID: <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>

On 10/10/2018 5:45 PM, Olivier GIVAUDAN wrote:
> I'm not sure I'm "inventing my own way" of distributing R code... And I 
> distribute it to a very limited audience.

Nothing says a package has to go on CRAN.  You can distribute them 
privately to a small audience.

> Anyway, why not "inventing a new way" if it's more efficient than the 
> standard one (I'm talking now in theory)?

If you know as much about R as the people who wrote it, then you can 
almost certainly invent better ways to do many of the things it does.  R 
Core was constrained by trying to maintain back compatibility, and that 
means some of their solutions aren't perfect.

But if you don't know it that well, chances are you'll make mistakes 
when you invent your own way of doing it.  For example, you might think 
that all front ends set the working directory to the directory of the 
program they are running, because the ones you've tried do it that way.
But they don't.

Duncan Murdoch

> ------------------------------------------------------------------------
> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Envoy? :* mercredi 10 octobre 2018 21:39
> *? :* Olivier GIVAUDAN; Jeff Newmiller
> *Cc?:* r-help at r-project.org
> *Objet :* Re: [R] Genuine relative paths with R
> On 10/10/2018 5:31 PM, Olivier GIVAUDAN wrote:
>> I do not want to use the terminal, just double clicks (i.e. the 
>> simplest, automatic, non-manual way, without having to write a line / 
>> command).
>> Therefore everything should happen outside any terminal. The user won't 
>> use a terminal.
>> 
>> I don't have a Mac and I'm not familiar with this OS, sorry.
>> But I'm really surprised the click method gives different results than 
>> on Linux and Windows.
>> I know the click method worked both on Linux (Ubuntu latest version) and 
>> Windows (10).
>> 
>> Yes, I executed my file from a terminal and got obviously the same 
>> result as you (that's reassuring).
>> 
>> Come on guys, creating a package... It's like using a hammer to kill a 
>> fly...
> 
> It's a simple operation to create a package in RStudio.? Not quite a
> single click, but just a few.
> 
> In plain R, it's just a little more work using package.skeleton().
> 
> Really, if you are distributing R code, you should do it in the standard
> way, not invent your own.
> 
> Duncan Murdoch
> 
>> ------------------------------------------------------------------------
>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>> *Envoy? :* mercredi 10 octobre 2018 20:54
>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>> *Cc?:* r-help at r-project.org
>> *Objet :* Re: [R] Genuine relative paths with R
>> On 10/10/2018 4:42 PM, Olivier GIVAUDAN wrote:
>>> Why are you not simply double-clicking on 'TestPWD' and choosing to 
>>> execute the file (don't add anything)?
>>> Are you executing the file from a terminal?
>> 
>> Yes, I was executing the file from my terminal.? Otherwise I really have
>> no idea what the "current directory" is in the Finder.?? (I'm on a Mac.
>> I just tried the click method; it printed my home directory, not the
>> directory of the script.)
>> 
>> I don't know the name of your visual front end, but you are displaying
>> the working directory that it sets when you click on TestPWD.? That will
>> be different from the working directory that your user sees in the Terminal.
>> 
>> You can see what I saw if you run TestPWD from the Terminal.? It will
>> print the current working directory, not the one where TestPWD happens
>> to live.
>> 
>> If you want to do the same sort of thing in R, you could set up a script
>> that calls R, and execute that in the way you executed TestPWD.? But in
>> another message you said you aren't allowed to do that, so I think your
>> best solution is the one offered by Bill Dunlap:? organize your files as
>> an R package.? If you name your package "Olivier", then you can find all
>> the files in it under the directory returned by
>> 
>>? ?? system.file(".", package = "Olivier")
>> 
>> The package system is designed for R code, but you can put arbitrary
>> files into a package:? just store them under the "inst" directory in
>> your source.? When the package is installed, those files will be moved
>> up one level, i.e.
>> 
>> Olivier/inst/foo
>> 
>> will become
>> 
>>? ?? system.file("foo", package = "Olivier")
>> 
>> Duncan Murdoch
>



From o||v|er_g|v@ud@n @end|ng |rom hotm@||@com  Thu Oct 11 00:17:07 2018
From: o||v|er_g|v@ud@n @end|ng |rom hotm@||@com (Olivier GIVAUDAN)
Date: Wed, 10 Oct 2018 22:17:07 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <VI1PR0202MB335728CFA9C4B2B31EAA4043F5E50@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <alpine.BSF.2.00.1810071155020.10784@pedal.dcn.davis.ca.us>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>,
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
Message-ID: <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>

> Nothing says a package has to go on CRAN.  You can distribute them privately to a small audience.

Yes, I agree in theory. But this solution still violates my own proportionality principle.

> If you know as much about R as the people who wrote it

I didn't claim that (that's was a quite general / theoretical statement, not necessarily and only applicable to R).

> For example, you might think that all front ends set the working directory to the directory of the program they are running, because the ones you've tried do it that way. But they don't.

It runs that way at least on Windows with RStudio and R GUI and I know the recipients of my R code work on Windows with at least one of these 2 GUIs. So the workaround I finally found satisfies my current needs.
________________________________
De : Duncan Murdoch <murdoch.duncan at gmail.com>
Envoy? : mercredi 10 octobre 2018 22:07
? : Olivier GIVAUDAN; Jeff Newmiller
Cc : r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

On 10/10/2018 5:45 PM, Olivier GIVAUDAN wrote:
> I'm not sure I'm "inventing my own way" of distributing R code... And I
> distribute it to a very limited audience.

Nothing says a package has to go on CRAN.  You can distribute them
privately to a small audience.

> Anyway, why not "inventing a new way" if it's more efficient than the
> standard one (I'm talking now in theory)?

If you know as much about R as the people who wrote it, then you can
almost certainly invent better ways to do many of the things it does.  R
Core was constrained by trying to maintain back compatibility, and that
means some of their solutions aren't perfect.

But if you don't know it that well, chances are you'll make mistakes
when you invent your own way of doing it.  For example, you might think
that all front ends set the working directory to the directory of the
program they are running, because the ones you've tried do it that way.
But they don't.

Duncan Murdoch

> ------------------------------------------------------------------------
> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Envoy? :* mercredi 10 octobre 2018 21:39
> *? :* Olivier GIVAUDAN; Jeff Newmiller
> *Cc :* r-help at r-project.org
> *Objet :* Re: [R] Genuine relative paths with R
> On 10/10/2018 5:31 PM, Olivier GIVAUDAN wrote:
>> I do not want to use the terminal, just double clicks (i.e. the
>> simplest, automatic, non-manual way, without having to write a line /
>> command).
>> Therefore everything should happen outside any terminal. The user won't
>> use a terminal.
>>
>> I don't have a Mac and I'm not familiar with this OS, sorry.
>> But I'm really surprised the click method gives different results than

>> I know the click method worked both on Linux (Ubuntu latest version) and

>>
>> Yes, I executed my file from a terminal and got obviously the same
>> result as you (that's reassuring).
>>
>> Come on guys, creating a package... It's like using a hammer to kill a
>> fly...
>
> It's a simple operation to create a package in RStudio.  Not quite a
> single click, but just a few.
>
> In plain R, it's just a little more work using package.skeleton().
>
> Really, if you are distributing R code, you should do it in the standard
> way, not invent your own.
>
> Duncan Murdoch
>
>> ------------------------------------------------------------------------
>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>> *Envoy? :* mercredi 10 octobre 2018 20:54
>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>> *Cc :* r-help at r-project.org
>> *Objet :* Re: [R] Genuine relative paths with R
>> On 10/10/2018 4:42 PM, Olivier GIVAUDAN wrote:
>>> Why are you not simply double-clicking on 'TestPWD' and choosing to
>>> execute the file (don't add anything)?
>>> Are you executing the file from a terminal?
>>
>> Yes, I was executing the file from my terminal.  Otherwise I really have
>> no idea what the "current directory" is in the Finder.   (I'm on a Mac.
>> I just tried the click method; it printed my home directory, not the
>> directory of the script.)
>>
>> I don't know the name of your visual front end, but you are displaying
>> the working directory that it sets when you click on TestPWD.  That will
>> be different from the working directory that your user sees in the Terminal.
>>
>> You can see what I saw if you run TestPWD from the Terminal.  It will
>> print the current working directory, not the one where TestPWD happens
>> to live.
>>
>> If you want to do the same sort of thing in R, you could set up a script
>> that calls R, and execute that in the way you executed TestPWD.  But in
>> another message you said you aren't allowed to do that, so I think your
>> best solution is the one offered by Bill Dunlap:  organize your files as
>> an R package.  If you name your package "Olivier", then you can find all
>> the files in it under the directory returned by
>>
>>     system.file(".", package = "Olivier")
>>
>> The package system is designed for R code, but you can put arbitrary
>> files into a package:  just store them under the "inst" directory in
>> your source.  When the package is installed, those files will be moved
>> up one level, i.e.
>>
>> Olivier/inst/foo
>>
>> will become
>>
>>     system.file("foo", package = "Olivier")
>>
>> Duncan Murdoch
>


	[[alternative HTML version deleted]]



From drj|m|emon @end|ng |rom gm@||@com  Thu Oct 11 00:25:17 2018
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Thu, 11 Oct 2018 09:25:17 +1100
Subject: [R] ANOVA in R
In-Reply-To: <CA+8X3fXEm20OjTfL5F-5eSa+PJJHRjcjBCEm8g6rie1eYU63+A@mail.gmail.com>
References: <CAHjanSAzyPQ8ANKLEUxzSpy0iESD+eikSFgsOo6oU+ytV8-5mg@mail.gmail.com>
 <CA+8X3fXEm20OjTfL5F-5eSa+PJJHRjcjBCEm8g6rie1eYU63+A@mail.gmail.com>
Message-ID: <CA+8X3fXcPTV0YA7kWjtFfvZq9O4=Sxcf_AaP_u6244_7VSyuPg@mail.gmail.com>

Hi again,
Two things, I named the data frame SR as shown in the model.
The other is for those who may wish to answer the OP. The mediafire
website is loaded with intrusive ads and perhaps malware.

Jim
On Thu, Oct 11, 2018 at 9:02 AM Jim Lemon <drjimlemon at gmail.com> wrote:
>
> Hi Tranh,
> I'm not sure why you are converting your variables to factors, and I
> think the model you want is:
>
> lm(KIC~temperature+AC+AV+Thickness+temperature:AC+
>  temperature:AV+temperature:thickness+AC:AV+
>  AC:thickness+AV:thickness,SR)
>
> Note the colons (:) rather than asterisks (*) for the interactions.
>
> Jim
> On Wed, Oct 10, 2018 at 5:14 PM Thanh Tran <masternhattt at gmail.com> wrote:
> >
> > Hi eveyone,
> > I'm studying about variance (ANOVA) in R and have some questions to share.
> > I read an article investigating the effect of factors (temperature, Asphalt
> > content, Air voids, and sample thickness) on the hardness of asphalt
> > concrete in the tensile test (abbreviated as Kic). Each condition was
> > repeated four times (4 samples). In the paper, the authors used MINITAB to
> > analyze Anova. The authors use "adjusted sums of squares" calculate the
> > p-value I try to use ANOVA in R to analyze this data and get the result as
> > shown in Figure 4. The results are different from the results in the
> > article. Some papers say that in R, the default for ANOVA analysis is to
> > use "sequential sums of squares" to calculate the p-value.
> > So please help the following two questions: 1 / Introduction to code in R
> > for anova analysis uses "adjusted sums of squares". The main part of the
> > command in R / myself is as follows: > Tem = as.factor (temperature) > Ac =
> > as.factor (AC) > Av = as.factor (AV) > Thick = as.factor (Thickness) >
> > Twoway = lm (KIC ~ Tem + Ac + Av + Thick + Stamp + Ac + Stamp + Av + Stamp
> > + Thick + Ac * Av + Ac * Thick + Av * Thick) > anova (twoway) 2/ When to
> > use "sequential sums of squares" and when to use "adjusted sums of
> > squares". Some papers recommend using the "oa.design
> > <https://www.youtube.com/redirect?q=http%3A%2F%2Foa.design%2F&redir_token=AaSAPDY-5UAsoHxN6BdwfyIJ7R98MTUzOTIxNDg2OUAxNTM5MTI4NDY5&event=comments>"
> > function in R to check for "orthogonal" designs. If not, use "adjusted sums
> > of squares". I am still vague about this command, so look forward to
> > everyone's suggestion. If you could answer all two of my questions, I would
> > be most grateful. Ps: I have added a CSV file and the paper for practicing
> > R. http://www.mediafire.com/file/e5oe54p2c2wd4bc/Saha+research.csv
> > http://www.mediafire.com/file/39jlf9h539y9mdz/Homothetic+behaviour+investigation+on+fracture+toughness+of+asphalt+mixtures+using+semicircular+bending+test.pdf
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.



From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Oct 11 00:31:44 2018
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 10 Oct 2018 18:31:44 -0400
Subject: [R] Genuine relative paths with R
In-Reply-To: <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
 <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
Message-ID: <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>

On 10/10/2018 6:17 PM, Olivier GIVAUDAN wrote:
>> Nothing says a package has to go on CRAN.? You can distribute 
> themprivately to a small audience.
> 
> Yes, I agree in theory. But this solution still violates my own 
> proportionality principle.

Again, you seem to think making a package is a big deal.  Maybe that was 
true 10 years ago (though I wrote and tested a package in a 45 minute 
presentation at UseR 2008), but now it's very easy.

But you're free to decide not to do it:  just please don't repeat false 
claims about R (like the ones about paths that started this long thread).

> 
>> If you know as much about R as the people who wrote it
> 
> I didn't claim that (that's was a quite general / theoretical statement, 
> not necessarily and only applicable to R).

I didn't say you made that claim.  I was answering your question about 
why inventing your own way is not a good idea.  It might be a good idea, 
if you know the system very, very well.  Otherwise, it's probably better 
to work the standard way.

Duncan Murdoch

> 
>> For example, you might thinkthat all front ends set the working 
> directory to the directory of theprogram they are running, because the 
> ones you've tried do it that way. But they don't.
> 
> It runs that way at least on Windows with RStudio and R GUI and I know 
> the recipients of my R code work on Windows with at least one of these 2 
> GUIs. So the workaround I finally found satisfies my current needs
> ------------------------------------------------------------------------
> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Envoy? :* mercredi 10 octobre 2018 22:07
> *? :* Olivier GIVAUDAN; Jeff Newmiller
> *Cc?:* r-help at r-project.org
> *Objet :* Re: [R] Genuine relative paths with R
> On 10/10/2018 5:45 PM, Olivier GIVAUDAN wrote:
>> I'm not sure I'm "inventing my own way" of distributing R code... And I 
>> distribute it to a very limited audience.
> 
> Nothing says a package has to go on CRAN.? You can distribute them
> privately to a small audience.
> 
>> Anyway, why not "inventing a new way" if it's more efficient than the 
>> standard one (I'm talking now in theory)?
> 
> If you know as much about R as the people who wrote it, then you can
> almost certainly invent better ways to do many of the things it does.? R
> Core was constrained by trying to maintain back compatibility, and that
> means some of their solutions aren't perfect.
> 
> But if you don't know it that well, chances are you'll make mistakes
> when you invent your own way of doing it.? For example, you might think
> that all front ends set the working directory to the directory of the
> program they are running, because the ones you've tried do it that way.
> But they don't.
> 
> Duncan Murdoch
> 
>> ------------------------------------------------------------------------
>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>> *Envoy? :* mercredi 10 octobre 2018 21:39
>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>> *Cc?:* r-help at r-project.org
>> *Objet :* Re: [R] Genuine relative paths with R
>> On 10/10/2018 5:31 PM, Olivier GIVAUDAN wrote:
>>> I do not want to use the terminal, just double clicks (i.e. the 
>>> simplest, automatic, non-manual way, without having to write a line / 
>>> command).
>>> Therefore everything should happen outside any terminal. The user won't 
>>> use a terminal.
>>> 
>>> I don't have a Mac and I'm not familiar with this OS, sorry.
>>> But I'm really surprised the click method gives different results than 
>>> on Linux and Windows.
>>> I know the click method worked both on Linux (Ubuntu latest version) and 
>>> Windows (10).
>>> 
>>> Yes, I executed my file from a terminal and got obviously the same 
>>> result as you (that's reassuring).
>>> 
>>> Come on guys, creating a package... It's like using a hammer to kill a 
>>> fly...
>> 
>> It's a simple operation to create a package in RStudio.? Not quite a
>> single click, but just a few.
>> 
>> In plain R, it's just a little more work using package.skeleton().
>> 
>> Really, if you are distributing R code, you should do it in the standard
>> way, not invent your own.
>> 
>> Duncan Murdoch
>> 
>>> ------------------------------------------------------------------------
>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>> *Envoy? :* mercredi 10 octobre 2018 20:54
>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>> *Cc?:* r-help at r-project.org
>>> *Objet :* Re: [R] Genuine relative paths with R
>>> On 10/10/2018 4:42 PM, Olivier GIVAUDAN wrote:
>>>> Why are you not simply double-clicking on 'TestPWD' and choosing to 
>>>> execute the file (don't add anything)?
>>>> Are you executing the file from a terminal?
>>> 
>>> Yes, I was executing the file from my terminal.? Otherwise I really have
>>> no idea what the "current directory" is in the Finder.?? (I'm on a Mac.
>>> I just tried the click method; it printed my home directory, not the
>>> directory of the script.)
>>> 
>>> I don't know the name of your visual front end, but you are displaying
>>> the working directory that it sets when you click on TestPWD.? That will
>>> be different from the working directory that your user sees in the Terminal.
>>> 
>>> You can see what I saw if you run TestPWD from the Terminal.? It will
>>> print the current working directory, not the one where TestPWD happens
>>> to live.
>>> 
>>> If you want to do the same sort of thing in R, you could set up a script
>>> that calls R, and execute that in the way you executed TestPWD.? But in
>>> another message you said you aren't allowed to do that, so I think your
>>> best solution is the one offered by Bill Dunlap:? organize your files as
>>> an R package.? If you name your package "Olivier", then you can find all
>>> the files in it under the directory returned by
>>> 
>>>? ?? system.file(".", package = "Olivier")
>>> 
>>> The package system is designed for R code, but you can put arbitrary
>>> files into a package:? just store them under the "inst" directory in
>>> your source.? When the package is installed, those files will be moved
>>> up one level, i.e.
>>> 
>>> Olivier/inst/foo
>>> 
>>> will become
>>> 
>>>? ?? system.file("foo", package = "Olivier")
>>> 
>>> Duncan Murdoch
>> 
>



From o||v|er_g|v@ud@n @end|ng |rom hotm@||@com  Thu Oct 11 00:52:25 2018
From: o||v|er_g|v@ud@n @end|ng |rom hotm@||@com (Olivier GIVAUDAN)
Date: Wed, 10 Oct 2018 22:52:25 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <VI1PR0202MB3357A79CB65FED1B09B42D51F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <a5509c53-2899-5ad7-3d6e-19fc85d1ffbb@gmail.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
 <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>,
 <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>
Message-ID: <DB3PR0202MB3355AC9A5807D00F591E3B55F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>

> Again, you seem to think making a package is a big deal.

Perhaps not a big deal (I believe you, I didn't write an R package yet), but not as straightforward as having a function within an R file returning its own path.

> But you're free to decide not to do it:  just please don't repeat false claims about R (like the ones about paths that started this long thread).

Which false claims?
________________________________
De : Duncan Murdoch <murdoch.duncan at gmail.com>
Envoy? : mercredi 10 octobre 2018 22:31
? : Olivier GIVAUDAN; Jeff Newmiller
Cc : r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

On 10/10/2018 6:17 PM, Olivier GIVAUDAN wrote:
>> Nothing says a package has to go on CRAN.  You can distribute
> themprivately to a small audience.
>
> Yes, I agree in theory. But this solution still violates my own
> proportionality principle.

Again, you seem to think making a package is a big deal.  Maybe that was
true 10 years ago (though I wrote and tested a package in a 45 minute
presentation at UseR 2008), but now it's very easy.

But you're free to decide not to do it:  just please don't repeat false
claims about R (like the ones about paths that started this long thread).

>
>> If you know as much about R as the people who wrote it
>
> I didn't claim that (that's was a quite general / theoretical statement,
> not necessarily and only applicable to R).

I didn't say you made that claim.  I was answering your question about
why inventing your own way is not a good idea.  It might be a good idea,
if you know the system very, very well.  Otherwise, it's probably better
to work the standard way.

Duncan Murdoch

>
>> For example, you might thinkthat all front ends set the working
> directory to the directory of theprogram they are running, because the
> ones you've tried do it that way. But they don't.
>


> GUIs. So the workaround I finally found satisfies my current needs
> ------------------------------------------------------------------------
> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Envoy? :* mercredi 10 octobre 2018 22:07
> *? :* Olivier GIVAUDAN; Jeff Newmiller
> *Cc :* r-help at r-project.org
> *Objet :* Re: [R] Genuine relative paths with R
> On 10/10/2018 5:45 PM, Olivier GIVAUDAN wrote:
>> I'm not sure I'm "inventing my own way" of distributing R code... And I
>> distribute it to a very limited audience.
>
> Nothing says a package has to go on CRAN.  You can distribute them
> privately to a small audience.
>
>> Anyway, why not "inventing a new way" if it's more efficient than the
>> standard one (I'm talking now in theory)?
>
> If you know as much about R as the people who wrote it, then you can
> almost certainly invent better ways to do many of the things it does.  R
> Core was constrained by trying to maintain back compatibility, and that
> means some of their solutions aren't perfect.
>
> But if you don't know it that well, chances are you'll make mistakes
> when you invent your own way of doing it.  For example, you might think
> that all front ends set the working directory to the directory of the
> program they are running, because the ones you've tried do it that way.
> But they don't.
>
> Duncan Murdoch
>
>> ------------------------------------------------------------------------
>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>> *Envoy? :* mercredi 10 octobre 2018 21:39
>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>> *Cc :* r-help at r-project.org
>> *Objet :* Re: [R] Genuine relative paths with R
>> On 10/10/2018 5:31 PM, Olivier GIVAUDAN wrote:
>>> I do not want to use the terminal, just double clicks (i.e. the
>>> simplest, automatic, non-manual way, without having to write a line /
>>> command).
>>> Therefore everything should happen outside any terminal. The user won't
>>> use a terminal.
>>>
>>> I don't have a Mac and I'm not familiar with this OS, sorry.
>>> But I'm really surprised the click method gives different results than

>>> I know the click method worked both on Linux (Ubuntu latest version) and

>>>
>>> Yes, I executed my file from a terminal and got obviously the same
>>> result as you (that's reassuring).
>>>
>>> Come on guys, creating a package... It's like using a hammer to kill a
>>> fly...
>>
>> It's a simple operation to create a package in RStudio.  Not quite a
>> single click, but just a few.
>>
>> In plain R, it's just a little more work using package.skeleton().
>>
>> Really, if you are distributing R code, you should do it in the standard
>> way, not invent your own.
>>
>> Duncan Murdoch
>>
>>> ------------------------------------------------------------------------
>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>> *Envoy? :* mercredi 10 octobre 2018 20:54
>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>> *Cc :* r-help at r-project.org
>>> *Objet :* Re: [R] Genuine relative paths with R
>>> On 10/10/2018 4:42 PM, Olivier GIVAUDAN wrote:
>>>> Why are you not simply double-clicking on 'TestPWD' and choosing to
>>>> execute the file (don't add anything)?
>>>> Are you executing the file from a terminal?
>>>
>>> Yes, I was executing the file from my terminal.  Otherwise I really have
>>> no idea what the "current directory" is in the Finder.   (I'm on a Mac.
>>> I just tried the click method; it printed my home directory, not the
>>> directory of the script.)
>>>
>>> I don't know the name of your visual front end, but you are displaying
>>> the working directory that it sets when you click on TestPWD.  That will
>>> be different from the working directory that your user sees in the Terminal.
>>>
>>> You can see what I saw if you run TestPWD from the Terminal.  It will
>>> print the current working directory, not the one where TestPWD happens
>>> to live.
>>>
>>> If you want to do the same sort of thing in R, you could set up a script
>>> that calls R, and execute that in the way you executed TestPWD.  But in
>>> another message you said you aren't allowed to do that, so I think your
>>> best solution is the one offered by Bill Dunlap:  organize your files as
>>> an R package.  If you name your package "Olivier", then you can find all
>>> the files in it under the directory returned by
>>>
>>>     system.file(".", package = "Olivier")
>>>
>>> The package system is designed for R code, but you can put arbitrary
>>> files into a package:  just store them under the "inst" directory in
>>> your source.  When the package is installed, those files will be moved
>>> up one level, i.e.
>>>
>>> Olivier/inst/foo
>>>
>>> will become
>>>
>>>     system.file("foo", package = "Olivier")
>>>
>>> Duncan Murdoch
>>
>


	[[alternative HTML version deleted]]



From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Oct 11 00:59:53 2018
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 10 Oct 2018 18:59:53 -0400
Subject: [R] Genuine relative paths with R
In-Reply-To: <DB3PR0202MB3355AC9A5807D00F591E3B55F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
 <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>
 <DB3PR0202MB3355AC9A5807D00F591E3B55F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
Message-ID: <ac573e54-dde3-397e-601f-2130b5c27676@gmail.com>

On 10/10/2018 6:52 PM, Olivier GIVAUDAN wrote:
>>  Again, you seem to think making a package is a big deal.
> 
> Perhaps not a big deal (I believe you, I didn't write an R package yet), 
> but not as straightforward as having a function within an R file 
> returning its own path.
> 
>> But you're free to decide not to do it:? just please don't repeat 
> falseclaims about R (like the ones about paths that started this long 
> thread).
> 
> Which false claims?

"But I am really wondering why R doesn't have (please tell me if I'm 
wrong) this basic feature as many other languages have it (batch, shell, 
C, LaTeX, SAS with macro-variables, etc.)?"

Duncan Murdoch

> ------------------------------------------------------------------------
> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Envoy? :* mercredi 10 octobre 2018 22:31
> *? :* Olivier GIVAUDAN; Jeff Newmiller
> *Cc?:* r-help at r-project.org
> *Objet :* Re: [R] Genuine relative paths with R
> On 10/10/2018 6:17 PM, Olivier GIVAUDAN wrote:
>>> Nothing says a package has to go on CRAN.? You can distribute 
>> themprivately to a small audience.
>> 
>> Yes, I agree in theory. But this solution still violates my own 
>> proportionality principle.
> 
> Again, you seem to think making a package is a big deal.? Maybe that was
> true 10 years ago (though I wrote and tested a package in a 45 minute
> presentation at UseR 2008), but now it's very easy.
> 
> But you're free to decide not to do it:? just please don't repeat false
> claims about R (like the ones about paths that started this long thread).
> 
>> 
>>> If you know as much about R as the people who wrote it
>> 
>> I didn't claim that (that's was a quite general / theoretical statement, 
>> not necessarily and only applicable to R).
> 
> I didn't say you made that claim.? I was answering your question about
> why inventing your own way is not a good idea.? It might be a good idea,
> if you know the system very, very well.? Otherwise, it's probably better
> to work the standard way.
> 
> Duncan Murdoch
> 
>> 
>>> For example, you might thinkthat all front ends set the working 
>> directory to the directory of theprogram they are running, because the 
>> ones you've tried do it that way. But they don't.
>> 
>> It runs that way at least on Windows with RStudio and R GUI and I know 
>> the recipients of my R code work on Windows with at least one of these 2 
>> GUIs. So the workaround I finally found satisfies my current needs
>> ------------------------------------------------------------------------
>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>> *Envoy? :* mercredi 10 octobre 2018 22:07
>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>> *Cc?:* r-help at r-project.org
>> *Objet :* Re: [R] Genuine relative paths with R
>> On 10/10/2018 5:45 PM, Olivier GIVAUDAN wrote:
>>> I'm not sure I'm "inventing my own way" of distributing R code... And I 
>>> distribute it to a very limited audience.
>> 
>> Nothing says a package has to go on CRAN.? You can distribute them
>> privately to a small audience.
>> 
>>> Anyway, why not "inventing a new way" if it's more efficient than the 
>>> standard one (I'm talking now in theory)?
>> 
>> If you know as much about R as the people who wrote it, then you can
>> almost certainly invent better ways to do many of the things it does.? R
>> Core was constrained by trying to maintain back compatibility, and that
>> means some of their solutions aren't perfect.
>> 
>> But if you don't know it that well, chances are you'll make mistakes
>> when you invent your own way of doing it.? For example, you might think
>> that all front ends set the working directory to the directory of the
>> program they are running, because the ones you've tried do it that way.
>> But they don't.
>> 
>> Duncan Murdoch
>> 
>>> ------------------------------------------------------------------------
>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>> *Envoy? :* mercredi 10 octobre 2018 21:39
>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>> *Cc?:* r-help at r-project.org
>>> *Objet :* Re: [R] Genuine relative paths with R
>>> On 10/10/2018 5:31 PM, Olivier GIVAUDAN wrote:
>>>> I do not want to use the terminal, just double clicks (i.e. the 
>>>> simplest, automatic, non-manual way, without having to write a line / 
>>>> command).
>>>> Therefore everything should happen outside any terminal. The user won't 
>>>> use a terminal.
>>>> 
>>>> I don't have a Mac and I'm not familiar with this OS, sorry.
>>>> But I'm really surprised the click method gives different results than 
>>>> on Linux and Windows.
>>>> I know the click method worked both on Linux (Ubuntu latest version) and 
>>>> Windows (10).
>>>> 
>>>> Yes, I executed my file from a terminal and got obviously the same 
>>>> result as you (that's reassuring).
>>>> 
>>>> Come on guys, creating a package... It's like using a hammer to kill a 
>>>> fly...
>>> 
>>> It's a simple operation to create a package in RStudio.? Not quite a
>>> single click, but just a few.
>>> 
>>> In plain R, it's just a little more work using package.skeleton().
>>> 
>>> Really, if you are distributing R code, you should do it in the standard
>>> way, not invent your own.
>>> 
>>> Duncan Murdoch
>>> 
>>>> ------------------------------------------------------------------------
>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>> *Envoy? :* mercredi 10 octobre 2018 20:54
>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>> *Cc?:* r-help at r-project.org
>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>> On 10/10/2018 4:42 PM, Olivier GIVAUDAN wrote:
>>>>> Why are you not simply double-clicking on 'TestPWD' and choosing to 
>>>>> execute the file (don't add anything)?
>>>>> Are you executing the file from a terminal?
>>>> 
>>>> Yes, I was executing the file from my terminal.? Otherwise I really have
>>>> no idea what the "current directory" is in the Finder.?? (I'm on a Mac.
>>>> I just tried the click method; it printed my home directory, not the
>>>> directory of the script.)
>>>> 
>>>> I don't know the name of your visual front end, but you are displaying
>>>> the working directory that it sets when you click on TestPWD.? That will
>>>> be different from the working directory that your user sees in the Terminal.
>>>> 
>>>> You can see what I saw if you run TestPWD from the Terminal.? It will
>>>> print the current working directory, not the one where TestPWD happens
>>>> to live.
>>>> 
>>>> If you want to do the same sort of thing in R, you could set up a script
>>>> that calls R, and execute that in the way you executed TestPWD.? But in
>>>> another message you said you aren't allowed to do that, so I think your
>>>> best solution is the one offered by Bill Dunlap:? organize your files as
>>>> an R package.? If you name your package "Olivier", then you can find all
>>>> the files in it under the directory returned by
>>>> 
>>>>? ?? system.file(".", package = "Olivier")
>>>> 
>>>> The package system is designed for R code, but you can put arbitrary
>>>> files into a package:? just store them under the "inst" directory in
>>>> your source.? When the package is installed, those files will be moved
>>>> up one level, i.e.
>>>> 
>>>> Olivier/inst/foo
>>>> 
>>>> will become
>>>> 
>>>>? ?? system.file("foo", package = "Olivier")
>>>> 
>>>> Duncan Murdoch
>>> 
>> 
>



From o||v|er_g|v@ud@n @end|ng |rom hotm@||@com  Thu Oct 11 01:11:14 2018
From: o||v|er_g|v@ud@n @end|ng |rom hotm@||@com (Olivier GIVAUDAN)
Date: Wed, 10 Oct 2018 23:11:14 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <ac573e54-dde3-397e-601f-2130b5c27676@gmail.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
 <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>
 <DB3PR0202MB3355AC9A5807D00F591E3B55F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>,
 <ac573e54-dde3-397e-601f-2130b5c27676@gmail.com>
Message-ID: <DB3PR0202MB33559193F379157F44AD4AB0F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>

It is not wrong to claim that R currently doesn't have a function returning the path of the R file where this same function was invoked.

'getwd()' is indeed not equivalent to VBA 'Application.ThisWorkbook.Path' or C macro '__FILE__' or SAS %sysget(SAS_EXECFILENAME), etc.
________________________________
De : Duncan Murdoch <murdoch.duncan at gmail.com>
Envoy? : mercredi 10 octobre 2018 22:59
? : Olivier GIVAUDAN; Jeff Newmiller
Cc : r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

On 10/10/2018 6:52 PM, Olivier GIVAUDAN wrote:
>>  Again, you seem to think making a package is a big deal.
>
> Perhaps not a big deal (I believe you, I didn't write an R package yet),
> but not as straightforward as having a function within an R file
> returning its own path.
>
>> But you're free to decide not to do it:  just please don't repeat
> falseclaims about R (like the ones about paths that started this long
> thread).
>
> Which false claims?

"But I am really wondering why R doesn't have (please tell me if I'm
wrong) this basic feature as many other languages have it (batch, shell,
C, LaTeX, SAS with macro-variables, etc.)?"

Duncan Murdoch

> ------------------------------------------------------------------------
> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Envoy? :* mercredi 10 octobre 2018 22:31
> *? :* Olivier GIVAUDAN; Jeff Newmiller
> *Cc :* r-help at r-project.org
> *Objet :* Re: [R] Genuine relative paths with R
> On 10/10/2018 6:17 PM, Olivier GIVAUDAN wrote:
>>> Nothing says a package has to go on CRAN.  You can distribute
>> themprivately to a small audience.
>>
>> Yes, I agree in theory. But this solution still violates my own
>> proportionality principle.
>
> Again, you seem to think making a package is a big deal.  Maybe that was
> true 10 years ago (though I wrote and tested a package in a 45 minute
> presentation at UseR 2008), but now it's very easy.
>
> But you're free to decide not to do it:  just please don't repeat false
> claims about R (like the ones about paths that started this long thread).
>
>>
>>> If you know as much about R as the people who wrote it
>>
>> I didn't claim that (that's was a quite general / theoretical statement,
>> not necessarily and only applicable to R).
>
> I didn't say you made that claim.  I was answering your question about
> why inventing your own way is not a good idea.  It might be a good idea,
> if you know the system very, very well.  Otherwise, it's probably better
> to work the standard way.
>
> Duncan Murdoch
>
>>
>>> For example, you might thinkthat all front ends set the working
>> directory to the directory of theprogram they are running, because the
>> ones you've tried do it that way. But they don't.
>>


>> GUIs. So the workaround I finally found satisfies my current needs
>> ------------------------------------------------------------------------
>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>> *Envoy? :* mercredi 10 octobre 2018 22:07
>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>> *Cc :* r-help at r-project.org
>> *Objet :* Re: [R] Genuine relative paths with R
>> On 10/10/2018 5:45 PM, Olivier GIVAUDAN wrote:
>>> I'm not sure I'm "inventing my own way" of distributing R code... And I
>>> distribute it to a very limited audience.
>>
>> Nothing says a package has to go on CRAN.  You can distribute them
>> privately to a small audience.
>>
>>> Anyway, why not "inventing a new way" if it's more efficient than the
>>> standard one (I'm talking now in theory)?
>>
>> If you know as much about R as the people who wrote it, then you can
>> almost certainly invent better ways to do many of the things it does.  R
>> Core was constrained by trying to maintain back compatibility, and that
>> means some of their solutions aren't perfect.
>>
>> But if you don't know it that well, chances are you'll make mistakes
>> when you invent your own way of doing it.  For example, you might think
>> that all front ends set the working directory to the directory of the
>> program they are running, because the ones you've tried do it that way.
>> But they don't.
>>
>> Duncan Murdoch
>>
>>> ------------------------------------------------------------------------
>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>> *Envoy? :* mercredi 10 octobre 2018 21:39
>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>> *Cc :* r-help at r-project.org
>>> *Objet :* Re: [R] Genuine relative paths with R
>>> On 10/10/2018 5:31 PM, Olivier GIVAUDAN wrote:
>>>> I do not want to use the terminal, just double clicks (i.e. the
>>>> simplest, automatic, non-manual way, without having to write a line /
>>>> command).
>>>> Therefore everything should happen outside any terminal. The user won't
>>>> use a terminal.
>>>>
>>>> I don't have a Mac and I'm not familiar with this OS, sorry.
>>>> But I'm really surprised the click method gives different results than

>>>> I know the click method worked both on Linux (Ubuntu latest version) and

>>>>
>>>> Yes, I executed my file from a terminal and got obviously the same
>>>> result as you (that's reassuring).
>>>>
>>>> Come on guys, creating a package... It's like using a hammer to kill a
>>>> fly...
>>>
>>> It's a simple operation to create a package in RStudio.  Not quite a
>>> single click, but just a few.
>>>
>>> In plain R, it's just a little more work using package.skeleton().
>>>
>>> Really, if you are distributing R code, you should do it in the standard
>>> way, not invent your own.
>>>
>>> Duncan Murdoch
>>>
>>>> ------------------------------------------------------------------------
>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>> *Envoy? :* mercredi 10 octobre 2018 20:54
>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>> *Cc :* r-help at r-project.org
>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>> On 10/10/2018 4:42 PM, Olivier GIVAUDAN wrote:
>>>>> Why are you not simply double-clicking on 'TestPWD' and choosing to
>>>>> execute the file (don't add anything)?
>>>>> Are you executing the file from a terminal?
>>>>
>>>> Yes, I was executing the file from my terminal.  Otherwise I really have
>>>> no idea what the "current directory" is in the Finder.   (I'm on a Mac.
>>>> I just tried the click method; it printed my home directory, not the
>>>> directory of the script.)
>>>>
>>>> I don't know the name of your visual front end, but you are displaying
>>>> the working directory that it sets when you click on TestPWD.  That will
>>>> be different from the working directory that your user sees in the Terminal.
>>>>
>>>> You can see what I saw if you run TestPWD from the Terminal.  It will
>>>> print the current working directory, not the one where TestPWD happens
>>>> to live.
>>>>
>>>> If you want to do the same sort of thing in R, you could set up a script
>>>> that calls R, and execute that in the way you executed TestPWD.  But in
>>>> another message you said you aren't allowed to do that, so I think your
>>>> best solution is the one offered by Bill Dunlap:  organize your files as
>>>> an R package.  If you name your package "Olivier", then you can find all
>>>> the files in it under the directory returned by
>>>>
>>>>     system.file(".", package = "Olivier")
>>>>
>>>> The package system is designed for R code, but you can put arbitrary
>>>> files into a package:  just store them under the "inst" directory in
>>>> your source.  When the package is installed, those files will be moved
>>>> up one level, i.e.
>>>>
>>>> Olivier/inst/foo
>>>>
>>>> will become
>>>>
>>>>     system.file("foo", package = "Olivier")
>>>>
>>>> Duncan Murdoch
>>>
>>
>


	[[alternative HTML version deleted]]



From e@@w|ek @end|ng |rom gm@||@com  Thu Oct 11 01:23:06 2018
From: e@@w|ek @end|ng |rom gm@||@com (Ek Esawi)
Date: Wed, 10 Oct 2018 19:23:06 -0400
Subject: [R] Reorder file names read by list.files function
In-Reply-To: <CAF8bMcZEx5=NCSj9_t6ztYaXW3ywUAFuja8d6aqid3A8aeojJg@mail.gmail.com>
References: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
 <CA+ZkTxuHUZGfpq=FioOo6bZGE=MGOCHxex0Y1ssWjhAsrT2kXw@mail.gmail.com>
 <CAF8bMcZEx5=NCSj9_t6ztYaXW3ywUAFuja8d6aqid3A8aeojJg@mail.gmail.com>
Message-ID: <CA+ZkTxsk9Ctqv3ZEW=F76dGLqpcD6ZbrpRakDzfDjQY6eO10RA@mail.gmail.com>

Thank you Bill and RUI. I use month.name with sort and basename, as
suggested by Bill. i got the sorted numerical values, then i use
month.name to get proper ordered month names. The problem is that i
have to paste to the names the extension PDF giving me the correct
ordered file names, but then i get the same error message which
suggest that the code is not reading the files properly

I have not tried RUI's yet, but i will if nothing else works out.

Thanks again--EK

had to strip off file.names from the extension PDF, but when i paste
the month.name with .PDF to get the correct file names, i am getting
the same error.
On Tue, Oct 9, 2018 at 4:47 PM William Dunlap <wdunlap at tibco.com> wrote:
>
> Use basename(filename) to remove the lead parts of the full path to the file.  E.g., replace
>    FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
> with (the untested)
>     FNs <- sort(match(sub("\\.PDF", "", basename(file.names)), month.name))
>
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
>
> On Tue, Oct 9, 2018 at 1:38 PM, Ek Esawi <esawiek at gmail.com> wrote:
>>
>> Hi again,
>>
>> I worked with RUi's idea of using the match function with month.name.
>> I got numerical values for months then i sorted and pasted the PDF
>> file extension. It gave me the file order i wanted, but now statements
>> 8,9,&10 don't work and i kept getting an error which is listed below.
>> The dilemma is if i add full.names=TRUE in statement 6 then statements
>> 9 and 10 don't produce what they did earlier. If i put
>> full.names=FALSE, then i am back to square 1.
>> Any idea is greatly appreciated.:
>>
>> The code
>>
>> 1. nstall.packages("tabulizer")
>> 2. installed.packages("stringr")
>> 3. library(stringr)
>> 4. library(tabulizer)
>> 5. path = "C:/Users/namei/Documents/TextMining/S2017"
>> 6. file.names <- dir(path, pattern =".PDF",full.names = TRUE)
>> 7. file.names <- str_remove(file.names,"\\s[0-9][0-9]")
>> 8. FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
>> 9. FNs1 <- paste0(month.name[FNs],".","PDF")
>> 10 A <- lapply(FNs1, function(i) extract_tables(i))
>>
>> Output and the error message.
>>
>> path = "C:/Users/eesawi/Documents/TextMining/S2017"
>> > file.names <- dir(path, pattern =".PDF",full.names = TRUE)
>> > file.names <- str_remove(file.names,"\\s[0-9][0-9]")
>> > FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
>> > FNs1 <- paste0(month.name[FNs],".","PDF")
>> > A <- lapply(FNs1, function(i) extract_tables(i))
>>  Show Traceback
>>
>>  Error in normalizePath(path.expand(path), winslash, mustWork) :
>>   path[1]=".PDF": The system cannot find the file specified
>> On Tue, Oct 9, 2018 at 9:44 AM Ek Esawi <esawiek at gmail.com> wrote:
>> >
>> > Hi All--
>> >
>> > I used base R list.file function to read files from a directory. The
>> > file names are months (April, August, etc). That's the system reads
>> > them in alphabetical order., but i want to reordered them in calendar
>> > order (January, February, ...December).. I thought i might be able to
>> > do it via RegEx or possibly gtools package, I am wondering if there is
>> > an easier way.
>> >
>> > Thanks--EK
>> >
>> > Example
>> > path = "C:/Users/name/Downloads/MyFiles"
>> > file.names <- dir(path, pattern =".PDF")
>> >
>> > Example output
>> > Output:
>> > "February.PDF"  "January.PDF" "March.PDF"
>> > Desired output
>> > "January.PDF"  "February.PDF" "March.PDF"
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>



From d@kot@judo @end|ng |rom m@c@com  Thu Oct 11 01:29:39 2018
From: d@kot@judo @end|ng |rom m@c@com (Peter Claussen)
Date: Wed, 10 Oct 2018 18:29:39 -0500
Subject: [R] Genuine relative paths with R
In-Reply-To: <DB3PR0202MB33559193F379157F44AD4AB0F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
 <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>
 <DB3PR0202MB3355AC9A5807D00F591E3B55F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <ac573e54-dde3-397e-601f-2130b5c27676@gmail.com>
 <DB3PR0202MB33559193F379157F44AD4AB0F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
Message-ID: <42363BAD-7D85-4A57-B35A-0CCBA2EC1FD2@mac.com>

If I?m following all this correctly, it seems your criticism is that R doesn?t provide a run-time function that is equivalent to a compile-time macro. You do realize that __FILE__ is not part of the C programming language - it?s a predefined variable recognized by the cpp - the C preprocessor program. Similarly, SAS_EXECFILENAME is a predefined variable that can be recognized by the SAS macro processor, but has no meaning in the SAS language itself.

So, to go back to your original post:
> 1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.


This is what a macro processor does. Are you asking for a macro language in R?

Cheers

> On Oct 10, 2018, at 6:11 PM, Olivier GIVAUDAN <olivier_givaudan at hotmail.com> wrote:
> 
> It is not wrong to claim that R currently doesn't have a function returning the path of the R file where this same function was invoked.
> 
> 'getwd()' is indeed not equivalent to VBA 'Application.ThisWorkbook.Path' or C macro '__FILE__' or SAS %sysget(SAS_EXECFILENAME), etc.


	[[alternative HTML version deleted]]



From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Oct 11 01:51:06 2018
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 10 Oct 2018 19:51:06 -0400
Subject: [R] Genuine relative paths with R
In-Reply-To: <DB3PR0202MB33559193F379157F44AD4AB0F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
 <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>
 <DB3PR0202MB3355AC9A5807D00F591E3B55F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <ac573e54-dde3-397e-601f-2130b5c27676@gmail.com>
 <DB3PR0202MB33559193F379157F44AD4AB0F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
Message-ID: <f96e0c64-0e77-47f8-dbc1-5b49313ebb39@gmail.com>

On 10/10/2018 7:11 PM, Olivier GIVAUDAN wrote:
> It is not wrong to claim that R currently doesn't have a function 
> returning the path of the R file where this same function was invoked.

But it does.  I didn't realize that's what you were asking for.  This 
has nothing to do with your subject line.

If you source a file from somewhere, then each of the functions it 
creates is marked with its source location.  So you can put this in a file:

foo <- function () 1

filename <- normalizePath(getSrcFilename(foo, full.names=TRUE))

(You need the normalizePath() call because all that will be saved is the 
path that was used.  If it was a relative path, that's what you get 
before you normalize it.  You don't really need the foo function; you 
could put an anonymous function into the getSrcFilename call.  It's just 
usually easier to include a function that already exists.)

When you source() that file, filename will get the name of the file it 
came from.

This is a lot like __FILE__ in C.  One difference is that it is usually 
turned off when the function is being loaded into a package, but you can 
optionally turn it on.

You can also find out what line foo starts on, using

fooline <- getSrcLocation(foo)

This is a lot like __LINE__ in C.

Duncan Murdoch


> 
> 'getwd()' is indeed not equivalent to VBA 
> 'Application.ThisWorkbook.Path' or C macro '__FILE__' or SAS 
> %sysget(SAS_EXECFILENAME), etc.
> ------------------------------------------------------------------------
> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Envoy? :* mercredi 10 octobre 2018 22:59
> *? :* Olivier GIVAUDAN; Jeff Newmiller
> *Cc?:* r-help at r-project.org
> *Objet :* Re: [R] Genuine relative paths with R
> On 10/10/2018 6:52 PM, Olivier GIVAUDAN wrote:
>>>? Again, you seem to think making a package is a big deal.
>> 
>> Perhaps not a big deal (I believe you, I didn't write an R package yet), 
>> but not as straightforward as having a function within an R file 
>> returning its own path.
>> 
>>> But you're free to decide not to do it:? just please don't repeat 
>> falseclaims about R (like the ones about paths that started this long 
>> thread).
>> 
>> Which false claims?
> 
> "But I am really wondering why R doesn't have (please tell me if I'm
> wrong) this basic feature as many other languages have it (batch, shell,
> C, LaTeX, SAS with macro-variables, etc.)?"
> 
> Duncan Murdoch
> 
>> ------------------------------------------------------------------------
>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>> *Envoy? :* mercredi 10 octobre 2018 22:31
>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>> *Cc?:* r-help at r-project.org
>> *Objet :* Re: [R] Genuine relative paths with R
>> On 10/10/2018 6:17 PM, Olivier GIVAUDAN wrote:
>>>> Nothing says a package has to go on CRAN.? You can distribute 
>>> themprivately to a small audience.
>>> 
>>> Yes, I agree in theory. But this solution still violates my own 
>>> proportionality principle.
>> 
>> Again, you seem to think making a package is a big deal.? Maybe that was
>> true 10 years ago (though I wrote and tested a package in a 45 minute
>> presentation at UseR 2008), but now it's very easy.
>> 
>> But you're free to decide not to do it:? just please don't repeat false
>> claims about R (like the ones about paths that started this long thread).
>> 
>>> 
>>>> If you know as much about R as the people who wrote it
>>> 
>>> I didn't claim that (that's was a quite general / theoretical statement, 
>>> not necessarily and only applicable to R).
>> 
>> I didn't say you made that claim.? I was answering your question about
>> why inventing your own way is not a good idea.? It might be a good idea,
>> if you know the system very, very well.? Otherwise, it's probably better
>> to work the standard way.
>> 
>> Duncan Murdoch
>> 
>>> 
>>>> For example, you might thinkthat all front ends set the working 
>>> directory to the directory of theprogram they are running, because the 
>>> ones you've tried do it that way. But they don't.
>>> 
>>> It runs that way at least on Windows with RStudio and R GUI and I know 
>>> the recipients of my R code work on Windows with at least one of these 2 
>>> GUIs. So the workaround I finally found satisfies my current needs
>>> ------------------------------------------------------------------------
>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>> *Envoy? :* mercredi 10 octobre 2018 22:07
>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>> *Cc?:* r-help at r-project.org
>>> *Objet :* Re: [R] Genuine relative paths with R
>>> On 10/10/2018 5:45 PM, Olivier GIVAUDAN wrote:
>>>> I'm not sure I'm "inventing my own way" of distributing R code... And I 
>>>> distribute it to a very limited audience.
>>> 
>>> Nothing says a package has to go on CRAN.? You can distribute them
>>> privately to a small audience.
>>> 
>>>> Anyway, why not "inventing a new way" if it's more efficient than the 
>>>> standard one (I'm talking now in theory)?
>>> 
>>> If you know as much about R as the people who wrote it, then you can
>>> almost certainly invent better ways to do many of the things it does.? R
>>> Core was constrained by trying to maintain back compatibility, and that
>>> means some of their solutions aren't perfect.
>>> 
>>> But if you don't know it that well, chances are you'll make mistakes
>>> when you invent your own way of doing it.? For example, you might think
>>> that all front ends set the working directory to the directory of the
>>> program they are running, because the ones you've tried do it that way.
>>> But they don't.
>>> 
>>> Duncan Murdoch
>>> 
>>>> ------------------------------------------------------------------------
>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>> *Envoy? :* mercredi 10 octobre 2018 21:39
>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>> *Cc?:* r-help at r-project.org
>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>> On 10/10/2018 5:31 PM, Olivier GIVAUDAN wrote:
>>>>> I do not want to use the terminal, just double clicks (i.e. the 
>>>>> simplest, automatic, non-manual way, without having to write a line / 
>>>>> command).
>>>>> Therefore everything should happen outside any terminal. The user won't 
>>>>> use a terminal.
>>>>> 
>>>>> I don't have a Mac and I'm not familiar with this OS, sorry.
>>>>> But I'm really surprised the click method gives different results than 
>>>>> on Linux and Windows.
>>>>> I know the click method worked both on Linux (Ubuntu latest version) and 
>>>>> Windows (10).
>>>>> 
>>>>> Yes, I executed my file from a terminal and got obviously the same 
>>>>> result as you (that's reassuring).
>>>>> 
>>>>> Come on guys, creating a package... It's like using a hammer to kill a 
>>>>> fly...
>>>> 
>>>> It's a simple operation to create a package in RStudio.? Not quite a
>>>> single click, but just a few.
>>>> 
>>>> In plain R, it's just a little more work using package.skeleton().
>>>> 
>>>> Really, if you are distributing R code, you should do it in the standard
>>>> way, not invent your own.
>>>> 
>>>> Duncan Murdoch
>>>> 
>>>>> ------------------------------------------------------------------------
>>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>>> *Envoy? :* mercredi 10 octobre 2018 20:54
>>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>>> *Cc?:* r-help at r-project.org
>>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>>> On 10/10/2018 4:42 PM, Olivier GIVAUDAN wrote:
>>>>>> Why are you not simply double-clicking on 'TestPWD' and choosing to 
>>>>>> execute the file (don't add anything)?
>>>>>> Are you executing the file from a terminal?
>>>>> 
>>>>> Yes, I was executing the file from my terminal.? Otherwise I really have
>>>>> no idea what the "current directory" is in the Finder.?? (I'm on a Mac.
>>>>> I just tried the click method; it printed my home directory, not the
>>>>> directory of the script.)
>>>>> 
>>>>> I don't know the name of your visual front end, but you are displaying
>>>>> the working directory that it sets when you click on TestPWD.? That will
>>>>> be different from the working directory that your user sees in the Terminal.
>>>>> 
>>>>> You can see what I saw if you run TestPWD from the Terminal.? It will
>>>>> print the current working directory, not the one where TestPWD happens
>>>>> to live.
>>>>> 
>>>>> If you want to do the same sort of thing in R, you could set up a script
>>>>> that calls R, and execute that in the way you executed TestPWD.? But in
>>>>> another message you said you aren't allowed to do that, so I think your
>>>>> best solution is the one offered by Bill Dunlap:? organize your files as
>>>>> an R package.? If you name your package "Olivier", then you can find all
>>>>> the files in it under the directory returned by
>>>>> 
>>>>>? ?? system.file(".", package = "Olivier")
>>>>> 
>>>>> The package system is designed for R code, but you can put arbitrary
>>>>> files into a package:? just store them under the "inst" directory in
>>>>> your source.? When the package is installed, those files will be moved
>>>>> up one level, i.e.
>>>>> 
>>>>> Olivier/inst/foo
>>>>> 
>>>>> will become
>>>>> 
>>>>>? ?? system.file("foo", package = "Olivier")
>>>>> 
>>>>> Duncan Murdoch
>>>> 
>>> 
>> 
>



From o||v|er_g|v@ud@n @end|ng |rom hotm@||@com  Thu Oct 11 01:53:41 2018
From: o||v|er_g|v@ud@n @end|ng |rom hotm@||@com (Olivier GIVAUDAN)
Date: Wed, 10 Oct 2018 23:53:41 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <42363BAD-7D85-4A57-B35A-0CCBA2EC1FD2@mac.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
 <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>
 <DB3PR0202MB3355AC9A5807D00F591E3B55F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <ac573e54-dde3-397e-601f-2130b5c27676@gmail.com>
 <DB3PR0202MB33559193F379157F44AD4AB0F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>,
 <42363BAD-7D85-4A57-B35A-0CCBA2EC1FD2@mac.com>
Message-ID: <VI1PR0202MB3357AC579BC0B0D7C4C66BC2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>

Yes, I am aware that both '__FILE__' and 'SAS_EXECFILENAME' are macro variables. I don't know how the VBA 'Application.ThisWorkbook.Path' VBA or PHP '__DIR__' (or '__FILE__') work.

And yes, indeed, until now I didn't even realise that this simple find-and-replace solution of "mine" is actually the basic job of a preprocessor when it expands macro variables, thank you!

A macro language in R, yes, I think it would be useful, at least for this function. If nothing simpler is available, of course...
________________________________
De : Peter Claussen <dakotajudo at mac.com>
Envoy? : mercredi 10 octobre 2018 23:29
? : Olivier GIVAUDAN
Cc : Duncan Murdoch; Jeff Newmiller; r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

If I?m following all this correctly, it seems your criticism is that R doesn?t provide a run-time function that is equivalent to a compile-time macro. You do realize that __FILE__ is not part of the C programming language - it?s a predefined variable recognized by the cpp - the C preprocessor program. Similarly, SAS_EXECFILENAME is a predefined variable that can be recognized by the SAS macro processor, but has no meaning in the SAS language itself.

So, to go back to your original post:
1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.

This is what a macro processor does. Are you asking for a macro language in R?

Cheers

On Oct 10, 2018, at 6:11 PM, Olivier GIVAUDAN <olivier_givaudan at hotmail.com<mailto:olivier_givaudan at hotmail.com>> wrote:

It is not wrong to claim that R currently doesn't have a function returning the path of the R file where this same function was invoked.

'getwd()' is indeed not equivalent to VBA 'Application.ThisWorkbook.Path' or C macro '__FILE__' or SAS %sysget(SAS_EXECFILENAME), etc.


	[[alternative HTML version deleted]]



From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Oct 11 01:53:45 2018
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 10 Oct 2018 19:53:45 -0400
Subject: [R] Reorder file names read by list.files function
In-Reply-To: <CA+ZkTxsk9Ctqv3ZEW=F76dGLqpcD6ZbrpRakDzfDjQY6eO10RA@mail.gmail.com>
References: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
 <CA+ZkTxuHUZGfpq=FioOo6bZGE=MGOCHxex0Y1ssWjhAsrT2kXw@mail.gmail.com>
 <CAF8bMcZEx5=NCSj9_t6ztYaXW3ywUAFuja8d6aqid3A8aeojJg@mail.gmail.com>
 <CA+ZkTxsk9Ctqv3ZEW=F76dGLqpcD6ZbrpRakDzfDjQY6eO10RA@mail.gmail.com>
Message-ID: <8dfaf876-0fd9-f2d6-665c-a4636a1d3d66@gmail.com>

On 10/10/2018 7:23 PM, Ek Esawi wrote:
> Thank you Bill and RUI. I use month.name with sort and basename, as
> suggested by Bill. i got the sorted numerical values, then i use
> month.name to get proper ordered month names. The problem is that i
> have to paste to the names the extension PDF giving me the correct
> ordered file names, but then i get the same error message which
> suggest that the code is not reading the files properly

You shouldn't need to do any pasting.  Extract the months, use the 
order() function to find their proper order, then apply that vector to 
the original vector of filenames.

Duncan Murdoch

> 
> I have not tried RUI's yet, but i will if nothing else works out.
> 
> Thanks again--EK
> 
> had to strip off file.names from the extension PDF, but when i paste
> the month.name with .PDF to get the correct file names, i am getting
> the same error.
> On Tue, Oct 9, 2018 at 4:47 PM William Dunlap <wdunlap at tibco.com> wrote:
>>
>> Use basename(filename) to remove the lead parts of the full path to the file.  E.g., replace
>>     FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
>> with (the untested)
>>      FNs <- sort(match(sub("\\.PDF", "", basename(file.names)), month.name))
>>
>> Bill Dunlap
>> TIBCO Software
>> wdunlap tibco.com
>>
>> On Tue, Oct 9, 2018 at 1:38 PM, Ek Esawi <esawiek at gmail.com> wrote:
>>>
>>> Hi again,
>>>
>>> I worked with RUi's idea of using the match function with month.name.
>>> I got numerical values for months then i sorted and pasted the PDF
>>> file extension. It gave me the file order i wanted, but now statements
>>> 8,9,&10 don't work and i kept getting an error which is listed below.
>>> The dilemma is if i add full.names=TRUE in statement 6 then statements
>>> 9 and 10 don't produce what they did earlier. If i put
>>> full.names=FALSE, then i am back to square 1.
>>> Any idea is greatly appreciated.:
>>>
>>> The code
>>>
>>> 1. nstall.packages("tabulizer")
>>> 2. installed.packages("stringr")
>>> 3. library(stringr)
>>> 4. library(tabulizer)
>>> 5. path = "C:/Users/namei/Documents/TextMining/S2017"
>>> 6. file.names <- dir(path, pattern =".PDF",full.names = TRUE)
>>> 7. file.names <- str_remove(file.names,"\\s[0-9][0-9]")
>>> 8. FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
>>> 9. FNs1 <- paste0(month.name[FNs],".","PDF")
>>> 10 A <- lapply(FNs1, function(i) extract_tables(i))
>>>
>>> Output and the error message.
>>>
>>> path = "C:/Users/eesawi/Documents/TextMining/S2017"
>>>> file.names <- dir(path, pattern =".PDF",full.names = TRUE)
>>>> file.names <- str_remove(file.names,"\\s[0-9][0-9]")
>>>> FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
>>>> FNs1 <- paste0(month.name[FNs],".","PDF")
>>>> A <- lapply(FNs1, function(i) extract_tables(i))
>>>   Show Traceback
>>>
>>>   Error in normalizePath(path.expand(path), winslash, mustWork) :
>>>    path[1]=".PDF": The system cannot find the file specified
>>> On Tue, Oct 9, 2018 at 9:44 AM Ek Esawi <esawiek at gmail.com> wrote:
>>>>
>>>> Hi All--
>>>>
>>>> I used base R list.file function to read files from a directory. The
>>>> file names are months (April, August, etc). That's the system reads
>>>> them in alphabetical order., but i want to reordered them in calendar
>>>> order (January, February, ...December).. I thought i might be able to
>>>> do it via RegEx or possibly gtools package, I am wondering if there is
>>>> an easier way.
>>>>
>>>> Thanks--EK
>>>>
>>>> Example
>>>> path = "C:/Users/name/Downloads/MyFiles"
>>>> file.names <- dir(path, pattern =".PDF")
>>>>
>>>> Example output
>>>> Output:
>>>> "February.PDF"  "January.PDF" "March.PDF"
>>>> Desired output
>>>> "January.PDF"  "February.PDF" "March.PDF"
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>>
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>



From wdun|@p @end|ng |rom t|bco@com  Thu Oct 11 02:05:21 2018
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Wed, 10 Oct 2018 17:05:21 -0700
Subject: [R] Reorder file names read by list.files function
In-Reply-To: <CA+ZkTxsk9Ctqv3ZEW=F76dGLqpcD6ZbrpRakDzfDjQY6eO10RA@mail.gmail.com>
References: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
 <CA+ZkTxuHUZGfpq=FioOo6bZGE=MGOCHxex0Y1ssWjhAsrT2kXw@mail.gmail.com>
 <CAF8bMcZEx5=NCSj9_t6ztYaXW3ywUAFuja8d6aqid3A8aeojJg@mail.gmail.com>
 <CA+ZkTxsk9Ctqv3ZEW=F76dGLqpcD6ZbrpRakDzfDjQY6eO10RA@mail.gmail.com>
Message-ID: <CAF8bMcaCk7Y2QotVQp19otgH07KTiYJvt+_G732wCnttOHMr9g@mail.gmail.com>

You can paste the directory names, dir.names(files), back on, with
file.path(), after you do the sorting.  A better idiom is to use order()
instead of sort() and usng order's output to subscript file.names.  E.g.,
the following sorts by year and month number.

> file.names <- c("C:/tmp/June_2018.PDF", "C:/tmp/May_2018.PDF",
"C:/tmp/October_2016.PDF")
> bfile.names <- sub("\\..*$", "", basename(file.names))
> bfile.names
[1] "June_2018"    "May_2018"     "October_2016"
> month <- sub("^([[:alpha:]]+)_.*$", "\\1", bfile.names)
> month
[1] "June"    "May"     "October"
> month.names
Error: object 'month.names' not found
> month.names <-
c("January","February","March","April","May","June","July","August","September","October","November","December")
> month.number <- match(month, month.names)
> month.number
[1]  6  5 10
> file.names[ order(year, month.number) ]
[1] "C:/tmp/October_2016.PDF" "C:/tmp/May_2018.PDF"
 "C:/tmp/June_2018.PDF"




Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Wed, Oct 10, 2018 at 4:23 PM, Ek Esawi <esawiek at gmail.com> wrote:

> Thank you Bill and RUI. I use month.name with sort and basename, as
> suggested by Bill. i got the sorted numerical values, then i use
> month.name to get proper ordered month names. The problem is that i
> have to paste to the names the extension PDF giving me the correct
> ordered file names, but then i get the same error message which
> suggest that the code is not reading the files properly
>
> I have not tried RUI's yet, but i will if nothing else works out.
>
> Thanks again--EK
>
> had to strip off file.names from the extension PDF, but when i paste
> the month.name with .PDF to get the correct file names, i am getting
> the same error.
> On Tue, Oct 9, 2018 at 4:47 PM William Dunlap <wdunlap at tibco.com> wrote:
> >
> > Use basename(filename) to remove the lead parts of the full path to the
> file.  E.g., replace
> >    FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
> > with (the untested)
> >     FNs <- sort(match(sub("\\.PDF", "", basename(file.names)),
> month.name))
> >
> > Bill Dunlap
> > TIBCO Software
> > wdunlap tibco.com
> >
> > On Tue, Oct 9, 2018 at 1:38 PM, Ek Esawi <esawiek at gmail.com> wrote:
> >>
> >> Hi again,
> >>
> >> I worked with RUi's idea of using the match function with month.name.
> >> I got numerical values for months then i sorted and pasted the PDF
> >> file extension. It gave me the file order i wanted, but now statements
> >> 8,9,&10 don't work and i kept getting an error which is listed below.
> >> The dilemma is if i add full.names=TRUE in statement 6 then statements
> >> 9 and 10 don't produce what they did earlier. If i put
> >> full.names=FALSE, then i am back to square 1.
> >> Any idea is greatly appreciated.:
> >>
> >> The code
> >>
> >> 1. nstall.packages("tabulizer")
> >> 2. installed.packages("stringr")
> >> 3. library(stringr)
> >> 4. library(tabulizer)
> >> 5. path = "C:/Users/namei/Documents/TextMining/S2017"
> >> 6. file.names <- dir(path, pattern =".PDF",full.names = TRUE)
> >> 7. file.names <- str_remove(file.names,"\\s[0-9][0-9]")
> >> 8. FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
> >> 9. FNs1 <- paste0(month.name[FNs],".","PDF")
> >> 10 A <- lapply(FNs1, function(i) extract_tables(i))
> >>
> >> Output and the error message.
> >>
> >> path = "C:/Users/eesawi/Documents/TextMining/S2017"
> >> > file.names <- dir(path, pattern =".PDF",full.names = TRUE)
> >> > file.names <- str_remove(file.names,"\\s[0-9][0-9]")
> >> > FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
> >> > FNs1 <- paste0(month.name[FNs],".","PDF")
> >> > A <- lapply(FNs1, function(i) extract_tables(i))
> >>  Show Traceback
> >>
> >>  Error in normalizePath(path.expand(path), winslash, mustWork) :
> >>   path[1]=".PDF": The system cannot find the file specified
> >> On Tue, Oct 9, 2018 at 9:44 AM Ek Esawi <esawiek at gmail.com> wrote:
> >> >
> >> > Hi All--
> >> >
> >> > I used base R list.file function to read files from a directory. The
> >> > file names are months (April, August, etc). That's the system reads
> >> > them in alphabetical order., but i want to reordered them in calendar
> >> > order (January, February, ...December).. I thought i might be able to
> >> > do it via RegEx or possibly gtools package, I am wondering if there is
> >> > an easier way.
> >> >
> >> > Thanks--EK
> >> >
> >> > Example
> >> > path = "C:/Users/name/Downloads/MyFiles"
> >> > file.names <- dir(path, pattern =".PDF")
> >> >
> >> > Example output
> >> > Output:
> >> > "February.PDF"  "January.PDF" "March.PDF"
> >> > Desired output
> >> > "January.PDF"  "February.PDF" "March.PDF"
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >
> >
>

	[[alternative HTML version deleted]]



From o||v|er_g|v@ud@n @end|ng |rom hotm@||@com  Thu Oct 11 02:08:08 2018
From: o||v|er_g|v@ud@n @end|ng |rom hotm@||@com (Olivier GIVAUDAN)
Date: Thu, 11 Oct 2018 00:08:08 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <f96e0c64-0e77-47f8-dbc1-5b49313ebb39@gmail.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
 <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>
 <DB3PR0202MB3355AC9A5807D00F591E3B55F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <ac573e54-dde3-397e-601f-2130b5c27676@gmail.com>
 <DB3PR0202MB33559193F379157F44AD4AB0F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>,
 <f96e0c64-0e77-47f8-dbc1-5b49313ebb39@gmail.com>
Message-ID: <VI1PR0202MB3357AF40A744B10736F640A3F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>

I think Gabor (at least) already suggested this solution. But the problem is: how do you source this file containing this 'foo' function without writing its absolute path?

It's a kind of initialisation issue.

> a function returning the path of the R file where this same function was invoked.
>> I didn't realize that's what you were asking for. This has nothing to do with your subject line.

It's just a trick to work with relative paths without having to write any hardcoded (by definition) absolute path beforehand.
________________________________
De : Duncan Murdoch <murdoch.duncan at gmail.com>
Envoy? : mercredi 10 octobre 2018 23:51
? : Olivier GIVAUDAN; Jeff Newmiller
Cc : r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

On 10/10/2018 7:11 PM, Olivier GIVAUDAN wrote:
> It is not wrong to claim that R currently doesn't have a function
> returning the path of the R file where this same function was invoked.

But it does.  I didn't realize that's what you were asking for.  This
has nothing to do with your subject line.

If you source a file from somewhere, then each of the functions it
creates is marked with its source location.  So you can put this in a file:

foo <- function () 1

filename <- normalizePath(getSrcFilename(foo, full.names=TRUE))

(You need the normalizePath() call because all that will be saved is the
path that was used.  If it was a relative path, that's what you get
before you normalize it.  You don't really need the foo function; you
could put an anonymous function into the getSrcFilename call.  It's just
usually easier to include a function that already exists.)

When you source() that file, filename will get the name of the file it
came from.

This is a lot like __FILE__ in C.  One difference is that it is usually
turned off when the function is being loaded into a package, but you can
optionally turn it on.

You can also find out what line foo starts on, using

fooline <- getSrcLocation(foo)

This is a lot like __LINE__ in C.

Duncan Murdoch


>
> 'getwd()' is indeed not equivalent to VBA
> 'Application.ThisWorkbook.Path' or C macro '__FILE__' or SAS
> %sysget(SAS_EXECFILENAME), etc.
> ------------------------------------------------------------------------
> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Envoy? :* mercredi 10 octobre 2018 22:59
> *? :* Olivier GIVAUDAN; Jeff Newmiller
> *Cc :* r-help at r-project.org
> *Objet :* Re: [R] Genuine relative paths with R
> On 10/10/2018 6:52 PM, Olivier GIVAUDAN wrote:
>>>  Again, you seem to think making a package is a big deal.
>>
>> Perhaps not a big deal (I believe you, I didn't write an R package yet),
>> but not as straightforward as having a function within an R file
>> returning its own path.
>>
>>> But you're free to decide not to do it:  just please don't repeat
>> falseclaims about R (like the ones about paths that started this long
>> thread).
>>
>> Which false claims?
>
> "But I am really wondering why R doesn't have (please tell me if I'm
> wrong) this basic feature as many other languages have it (batch, shell,
> C, LaTeX, SAS with macro-variables, etc.)?"
>
> Duncan Murdoch
>
>> ------------------------------------------------------------------------
>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>> *Envoy? :* mercredi 10 octobre 2018 22:31
>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>> *Cc :* r-help at r-project.org
>> *Objet :* Re: [R] Genuine relative paths with R
>> On 10/10/2018 6:17 PM, Olivier GIVAUDAN wrote:
>>>> Nothing says a package has to go on CRAN.  You can distribute
>>> themprivately to a small audience.
>>>
>>> Yes, I agree in theory. But this solution still violates my own
>>> proportionality principle.
>>
>> Again, you seem to think making a package is a big deal.  Maybe that was
>> true 10 years ago (though I wrote and tested a package in a 45 minute
>> presentation at UseR 2008), but now it's very easy.
>>
>> But you're free to decide not to do it:  just please don't repeat false
>> claims about R (like the ones about paths that started this long thread).
>>
>>>
>>>> If you know as much about R as the people who wrote it
>>>
>>> I didn't claim that (that's was a quite general / theoretical statement,
>>> not necessarily and only applicable to R).
>>
>> I didn't say you made that claim.  I was answering your question about
>> why inventing your own way is not a good idea.  It might be a good idea,
>> if you know the system very, very well.  Otherwise, it's probably better
>> to work the standard way.
>>
>> Duncan Murdoch
>>
>>>
>>>> For example, you might thinkthat all front ends set the working
>>> directory to the directory of theprogram they are running, because the
>>> ones you've tried do it that way. But they don't.
>>>


>>> GUIs. So the workaround I finally found satisfies my current needs
>>> ------------------------------------------------------------------------
>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>> *Envoy? :* mercredi 10 octobre 2018 22:07
>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>> *Cc :* r-help at r-project.org
>>> *Objet :* Re: [R] Genuine relative paths with R
>>> On 10/10/2018 5:45 PM, Olivier GIVAUDAN wrote:
>>>> I'm not sure I'm "inventing my own way" of distributing R code... And I
>>>> distribute it to a very limited audience.
>>>
>>> Nothing says a package has to go on CRAN.  You can distribute them
>>> privately to a small audience.
>>>
>>>> Anyway, why not "inventing a new way" if it's more efficient than the
>>>> standard one (I'm talking now in theory)?
>>>
>>> If you know as much about R as the people who wrote it, then you can
>>> almost certainly invent better ways to do many of the things it does.  R
>>> Core was constrained by trying to maintain back compatibility, and that
>>> means some of their solutions aren't perfect.
>>>
>>> But if you don't know it that well, chances are you'll make mistakes
>>> when you invent your own way of doing it.  For example, you might think
>>> that all front ends set the working directory to the directory of the
>>> program they are running, because the ones you've tried do it that way.
>>> But they don't.
>>>
>>> Duncan Murdoch
>>>
>>>> ------------------------------------------------------------------------
>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>> *Envoy? :* mercredi 10 octobre 2018 21:39
>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>> *Cc :* r-help at r-project.org
>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>> On 10/10/2018 5:31 PM, Olivier GIVAUDAN wrote:
>>>>> I do not want to use the terminal, just double clicks (i.e. the
>>>>> simplest, automatic, non-manual way, without having to write a line /
>>>>> command).
>>>>> Therefore everything should happen outside any terminal. The user won't
>>>>> use a terminal.
>>>>>
>>>>> I don't have a Mac and I'm not familiar with this OS, sorry.
>>>>> But I'm really surprised the click method gives different results than

>>>>> I know the click method worked both on Linux (Ubuntu latest version) and

>>>>>
>>>>> Yes, I executed my file from a terminal and got obviously the same
>>>>> result as you (that's reassuring).
>>>>>
>>>>> Come on guys, creating a package... It's like using a hammer to kill a
>>>>> fly...
>>>>
>>>> It's a simple operation to create a package in RStudio.  Not quite a
>>>> single click, but just a few.
>>>>
>>>> In plain R, it's just a little more work using package.skeleton().
>>>>
>>>> Really, if you are distributing R code, you should do it in the standard
>>>> way, not invent your own.
>>>>
>>>> Duncan Murdoch
>>>>
>>>>> ------------------------------------------------------------------------
>>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>>> *Envoy? :* mercredi 10 octobre 2018 20:54
>>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>>> *Cc :* r-help at r-project.org
>>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>>> On 10/10/2018 4:42 PM, Olivier GIVAUDAN wrote:
>>>>>> Why are you not simply double-clicking on 'TestPWD' and choosing to
>>>>>> execute the file (don't add anything)?
>>>>>> Are you executing the file from a terminal?
>>>>>
>>>>> Yes, I was executing the file from my terminal.  Otherwise I really have
>>>>> no idea what the "current directory" is in the Finder.   (I'm on a Mac.
>>>>> I just tried the click method; it printed my home directory, not the
>>>>> directory of the script.)
>>>>>
>>>>> I don't know the name of your visual front end, but you are displaying
>>>>> the working directory that it sets when you click on TestPWD.  That will
>>>>> be different from the working directory that your user sees in the Terminal.
>>>>>
>>>>> You can see what I saw if you run TestPWD from the Terminal.  It will
>>>>> print the current working directory, not the one where TestPWD happens
>>>>> to live.
>>>>>
>>>>> If you want to do the same sort of thing in R, you could set up a script
>>>>> that calls R, and execute that in the way you executed TestPWD.  But in
>>>>> another message you said you aren't allowed to do that, so I think your
>>>>> best solution is the one offered by Bill Dunlap:  organize your files as
>>>>> an R package.  If you name your package "Olivier", then you can find all
>>>>> the files in it under the directory returned by
>>>>>
>>>>>     system.file(".", package = "Olivier")
>>>>>
>>>>> The package system is designed for R code, but you can put arbitrary
>>>>> files into a package:  just store them under the "inst" directory in
>>>>> your source.  When the package is installed, those files will be moved
>>>>> up one level, i.e.
>>>>>
>>>>> Olivier/inst/foo
>>>>>
>>>>> will become
>>>>>
>>>>>     system.file("foo", package = "Olivier")
>>>>>
>>>>> Duncan Murdoch
>>>>
>>>
>>
>


	[[alternative HTML version deleted]]



From zp@|mp@o @end|ng |rom gm@||@com  Thu Oct 11 05:37:06 2018
From: zp@|mp@o @end|ng |rom gm@||@com (Zach Simpson)
Date: Thu, 11 Oct 2018 16:37:06 +1300
Subject: [R] 
 Defining Variables from a Matrix for 10-Fold Cross Validation
Message-ID: <CAJByKzqdJMBEx5hFTSfZSQof=3uKt=U=nSWPbTNDCPFQKDRPeQ@mail.gmail.com>

Hey Matthew,

In addition to what's been mentioned, you may want to look at the
'caret' package, as it provides a nice system for whatever flavor of
cross-validation you're after *and* has a built-in method for `kknn`:

http://topepo.github.io/caret/available-models.html

Hope this helps,
Zach Simpson

On October 9, 2018 15:34:15 -0700, David Winsemius
<dwinsemius at comcast.net> wrote:
> Message: 26
> Date: Tue, 9 Oct 2018 15:34:15 -0700
> From: David Winsemius <dwinsemius at comcast.net>
> To: matthew campbell <mcc3qb at virginia.edu>
> Cc: R-help at r-project.org
> Subject: Re: [R]  Defining Variables from a Matrix for 10-Fold Cross
>         Validation
> Message-ID: <85DC895F-BEA2-4E47-ACC1-49A5C350B2D8 at comcast.net>
> Content-Type: text/plain; charset="us-ascii"
>
>
> > On Oct 9, 2018, at 3:04 PM, matthew campbell <mcc3qb at virginia.edu> wrote:
> >
> > Good afternoon,
> >
> > I am trying to run a 10-fold CV, using a matrix as my data set.
> > Essentially, I want "y" to be the first column of the matrix, and my "x" to
> > be all remaining columns (2-257). I've posted some of the code I used
> > below, and the data set (called "zip.train") is in the "ElemStatLearn"
> > package. The error message is highlighted in red, and the corresponding
> > section of code is bolded. (I am not concerned with the warning message,
> > just the error message).
> >
> > The issue I am experiencing is the error message below the code: I haven't
> > come across that specific message before, and am not exactly sure how to
> > interpret its meaning. What exactly is this error message trying to tell
> > me?  Any suggestions or insights are appreciated!
> >
> > Thank you all,
> >
> > Matthew Campbell
> >
> >
> >> library (ElemStatLearn)
> >> library(kknn)
> >> data(zip.train)
> >> train=zip.train[which(zip.train[,1] %in% c(2,3)),]
> >> test=zip.test[which(zip.test[,1] %in% c(2,3)),]
> >> nfold = 10
> >> infold = sample(rep(1:10, length.out = (x)))
>
> I don't see a definition for x.
>
> > Warning message:
> > In rep(1:10, length.out = (x)) :
> >  first element used of 'length.out' argument
>
> But apparently it las a length greater than 1 and your are getting a sample whose length is specified by the first element of x.
>
>
> >>
> > *> mydata = data.frame(x = train[ , c(2,257)] , y = train[ , 1])*
> >>
> >> K = 20
> >> errorMatrix = matrix(NA, K, 10)
> >>
> >> for (l in nfold)
> > + {
> > +   for (k in 1:20)
> > +   {
> > +     knn.fit = kknn(y ~ x, train = mydata[infold != l, ], test =
> > mydata[infold == l, ], k = k)
> > +     errorMatrix[k, l] = mean((knn.fit$fitted.values - mydata$y[infold ==
> > l])^2)
> > +   }
> > + }
> > Error in model.frame.default(formula, data = train) :
> >  variable lengths differ (found for 'x')
>
> So the warning above is probably a great clue to the source of this error.
>
> Morale of the tale: Always read the warnings, even if your code proceeds.
>
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> David Winsemius
> Alameda, CA, USA
>
> "The whole problem with the world is that fools and fanatics are always so certain of themselves, and wiser people so full of doubts." - Bertrand Russell



From m@rc_grt @end|ng |rom y@hoo@|r  Thu Oct 11 06:15:26 2018
From: m@rc_grt @end|ng |rom y@hoo@|r (Marc Girondot)
Date: Thu, 11 Oct 2018 06:15:26 +0200
Subject: [R] Set attributes for object known by name
Message-ID: <355e3f06-5fee-1e67-3c53-5fedb720aa2f@yahoo.fr>

Hello everybody,

Has someone the solution to set attribute when variable is known by name ?

Thanks a lot

Marc

Let see this exemple:

# The variable name is stored as characters.

varname <- "myvarname"
assign(x = varname, data.frame(A=1:5, B=2:6))
attributes(myvarname)

$names
[1] "A" "B"
$class
[1] "data.frame"
$row.names
[1] 1 2 3 4 5

# perfect

attributes(get(varname))

# It works also

$names
[1] "A" "B"
$class
[1] "data.frame"

$row.names
[1] 1 2 3 4 5

attributes(myvarname)$NewAtt <- "MyAtt"

# It works

attributes(get(varname))$NewAtt2 <- "MyAtt2"
Error in attributes(get(varname))$NewAtt2 <- "MyAtt2" :
 ? impossible de trouver la fonction "get<-"

# Error...



From peter@|@ng|e|der @end|ng |rom gm@||@com  Thu Oct 11 06:30:40 2018
From: peter@|@ng|e|der @end|ng |rom gm@||@com (Peter Langfelder)
Date: Wed, 10 Oct 2018 21:30:40 -0700
Subject: [R] Set attributes for object known by name
In-Reply-To: <355e3f06-5fee-1e67-3c53-5fedb720aa2f@yahoo.fr>
References: <355e3f06-5fee-1e67-3c53-5fedb720aa2f@yahoo.fr>
Message-ID: <CA+hbrhU9yRApfv9bHEGr2Z5JCTjoqtaf6TBfxuEUvrZxoWohNQ@mail.gmail.com>

I would try something like

x = get(myvarname)
attr(x, "foo") = "bar"
assign(varname, x)

HTH,

Peter

On Wed, Oct 10, 2018 at 9:15 PM Marc Girondot via R-help <
r-help at r-project.org> wrote:

> Hello everybody,
>
> Has someone the solution to set attribute when variable is known by name ?
>
> Thanks a lot
>
> Marc
>
> Let see this exemple:
>
> # The variable name is stored as characters.
>
> varname <- "myvarname"
> assign(x = varname, data.frame(A=1:5, B=2:6))
> attributes(myvarname)
>
> $names
> [1] "A" "B"
> $class
> [1] "data.frame"
> $row.names
> [1] 1 2 3 4 5
>
> # perfect
>
> attributes(get(varname))
>
> # It works also
>
> $names
> [1] "A" "B"
> $class
> [1] "data.frame"
>
> $row.names
> [1] 1 2 3 4 5
>
> attributes(myvarname)$NewAtt <- "MyAtt"
>
> # It works
>
> attributes(get(varname))$NewAtt2 <- "MyAtt2"
> Error in attributes(get(varname))$NewAtt2 <- "MyAtt2" :
>    impossible de trouver la fonction "get<-"
>
> # Error...
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Thu Oct 11 06:37:15 2018
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Thu, 11 Oct 2018 05:37:15 +0100
Subject: [R] Reorder file names read by list.files function
In-Reply-To: <CAF8bMcaCk7Y2QotVQp19otgH07KTiYJvt+_G732wCnttOHMr9g@mail.gmail.com>
References: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
 <CA+ZkTxuHUZGfpq=FioOo6bZGE=MGOCHxex0Y1ssWjhAsrT2kXw@mail.gmail.com>
 <CAF8bMcZEx5=NCSj9_t6ztYaXW3ywUAFuja8d6aqid3A8aeojJg@mail.gmail.com>
 <CA+ZkTxsk9Ctqv3ZEW=F76dGLqpcD6ZbrpRakDzfDjQY6eO10RA@mail.gmail.com>
 <CAF8bMcaCk7Y2QotVQp19otgH07KTiYJvt+_G732wCnttOHMr9g@mail.gmail.com>
Message-ID: <9414d01a-4126-6f01-c08a-c7edb290a6e9@sapo.pt>

Hello,


 > month.names
Erro: objeto 'month.names' n?o encontrado
 > month.name
  [1] "January"   "February"  "March"     "April"     "May"       "June" 

  [7] "July"      "August"    "September" "October"   "November"  "December"


Hope this helps,

Rui Barradas

?s 01:05 de 11/10/2018, William Dunlap via R-help escreveu:
> You can paste the directory names, dir.names(files), back on, with
> file.path(), after you do the sorting.  A better idiom is to use order()
> instead of sort() and usng order's output to subscript file.names.  E.g.,
> the following sorts by year and month number.
> 
>> file.names <- c("C:/tmp/June_2018.PDF", "C:/tmp/May_2018.PDF",
> "C:/tmp/October_2016.PDF")
>> bfile.names <- sub("\\..*$", "", basename(file.names))
>> bfile.names
> [1] "June_2018"    "May_2018"     "October_2016"
>> month <- sub("^([[:alpha:]]+)_.*$", "\\1", bfile.names)
>> month
> [1] "June"    "May"     "October"
>> month.names
> Error: object 'month.names' not found
>> month.names <-
> c("January","February","March","April","May","June","July","August","September","October","November","December")
>> month.number <- match(month, month.names)
>> month.number
> [1]  6  5 10
>> file.names[ order(year, month.number) ]
> [1] "C:/tmp/October_2016.PDF" "C:/tmp/May_2018.PDF"
>   "C:/tmp/June_2018.PDF"
> 
> 
> 
> 
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
> 
> On Wed, Oct 10, 2018 at 4:23 PM, Ek Esawi <esawiek at gmail.com> wrote:
> 
>> Thank you Bill and RUI. I use month.name with sort and basename, as
>> suggested by Bill. i got the sorted numerical values, then i use
>> month.name to get proper ordered month names. The problem is that i
>> have to paste to the names the extension PDF giving me the correct
>> ordered file names, but then i get the same error message which
>> suggest that the code is not reading the files properly
>>
>> I have not tried RUI's yet, but i will if nothing else works out.
>>
>> Thanks again--EK
>>
>> had to strip off file.names from the extension PDF, but when i paste
>> the month.name with .PDF to get the correct file names, i am getting
>> the same error.
>> On Tue, Oct 9, 2018 at 4:47 PM William Dunlap <wdunlap at tibco.com> wrote:
>>>
>>> Use basename(filename) to remove the lead parts of the full path to the
>> file.  E.g., replace
>>>     FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
>>> with (the untested)
>>>      FNs <- sort(match(sub("\\.PDF", "", basename(file.names)),
>> month.name))
>>>
>>> Bill Dunlap
>>> TIBCO Software
>>> wdunlap tibco.com
>>>
>>> On Tue, Oct 9, 2018 at 1:38 PM, Ek Esawi <esawiek at gmail.com> wrote:
>>>>
>>>> Hi again,
>>>>
>>>> I worked with RUi's idea of using the match function with month.name.
>>>> I got numerical values for months then i sorted and pasted the PDF
>>>> file extension. It gave me the file order i wanted, but now statements
>>>> 8,9,&10 don't work and i kept getting an error which is listed below.
>>>> The dilemma is if i add full.names=TRUE in statement 6 then statements
>>>> 9 and 10 don't produce what they did earlier. If i put
>>>> full.names=FALSE, then i am back to square 1.
>>>> Any idea is greatly appreciated.:
>>>>
>>>> The code
>>>>
>>>> 1. nstall.packages("tabulizer")
>>>> 2. installed.packages("stringr")
>>>> 3. library(stringr)
>>>> 4. library(tabulizer)
>>>> 5. path = "C:/Users/namei/Documents/TextMining/S2017"
>>>> 6. file.names <- dir(path, pattern =".PDF",full.names = TRUE)
>>>> 7. file.names <- str_remove(file.names,"\\s[0-9][0-9]")
>>>> 8. FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
>>>> 9. FNs1 <- paste0(month.name[FNs],".","PDF")
>>>> 10 A <- lapply(FNs1, function(i) extract_tables(i))
>>>>
>>>> Output and the error message.
>>>>
>>>> path = "C:/Users/eesawi/Documents/TextMining/S2017"
>>>>> file.names <- dir(path, pattern =".PDF",full.names = TRUE)
>>>>> file.names <- str_remove(file.names,"\\s[0-9][0-9]")
>>>>> FNs <- sort(match(sub("\\.PDF", "", file.names), month.name))
>>>>> FNs1 <- paste0(month.name[FNs],".","PDF")
>>>>> A <- lapply(FNs1, function(i) extract_tables(i))
>>>>   Show Traceback
>>>>
>>>>   Error in normalizePath(path.expand(path), winslash, mustWork) :
>>>>    path[1]=".PDF": The system cannot find the file specified
>>>> On Tue, Oct 9, 2018 at 9:44 AM Ek Esawi <esawiek at gmail.com> wrote:
>>>>>
>>>>> Hi All--
>>>>>
>>>>> I used base R list.file function to read files from a directory. The
>>>>> file names are months (April, August, etc). That's the system reads
>>>>> them in alphabetical order., but i want to reordered them in calendar
>>>>> order (January, February, ...December).. I thought i might be able to
>>>>> do it via RegEx or possibly gtools package, I am wondering if there is
>>>>> an easier way.
>>>>>
>>>>> Thanks--EK
>>>>>
>>>>> Example
>>>>> path = "C:/Users/name/Downloads/MyFiles"
>>>>> file.names <- dir(path, pattern =".PDF")
>>>>>
>>>>> Example output
>>>>> Output:
>>>>> "February.PDF"  "January.PDF" "March.PDF"
>>>>> Desired output
>>>>> "January.PDF"  "February.PDF" "March.PDF"
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/
>> posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>>
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>



From peter@|@ng|e|der @end|ng |rom gm@||@com  Thu Oct 11 06:48:05 2018
From: peter@|@ng|e|der @end|ng |rom gm@||@com (Peter Langfelder)
Date: Wed, 10 Oct 2018 21:48:05 -0700
Subject: [R] Set attributes for object known by name
In-Reply-To: <CA+hbrhU9yRApfv9bHEGr2Z5JCTjoqtaf6TBfxuEUvrZxoWohNQ@mail.gmail.com>
References: <355e3f06-5fee-1e67-3c53-5fedb720aa2f@yahoo.fr>
 <CA+hbrhU9yRApfv9bHEGr2Z5JCTjoqtaf6TBfxuEUvrZxoWohNQ@mail.gmail.com>
Message-ID: <CA+hbrhWpyApQWDUsQLeMWQ8oZaVggTYJ68u1194fQPKtBScpug@mail.gmail.com>

oops, I think the right code would be

x = get(varname)
attr(x, "foo") = "bar"
assign(varname, x)

On Wed, Oct 10, 2018 at 9:30 PM Peter Langfelder <peter.langfelder at gmail.com>
wrote:

> I would try something like
>
> x = get(myvarname)
> attr(x, "foo") = "bar"
> assign(varname, x)
>
> HTH,
>
> Peter
>
> On Wed, Oct 10, 2018 at 9:15 PM Marc Girondot via R-help <
> r-help at r-project.org> wrote:
>
>> Hello everybody,
>>
>> Has someone the solution to set attribute when variable is known by name ?
>>
>> Thanks a lot
>>
>> Marc
>>
>> Let see this exemple:
>>
>> # The variable name is stored as characters.
>>
>> varname <- "myvarname"
>> assign(x = varname, data.frame(A=1:5, B=2:6))
>> attributes(myvarname)
>>
>> $names
>> [1] "A" "B"
>> $class
>> [1] "data.frame"
>> $row.names
>> [1] 1 2 3 4 5
>>
>> # perfect
>>
>> attributes(get(varname))
>>
>> # It works also
>>
>> $names
>> [1] "A" "B"
>> $class
>> [1] "data.frame"
>>
>> $row.names
>> [1] 1 2 3 4 5
>>
>> attributes(myvarname)$NewAtt <- "MyAtt"
>>
>> # It works
>>
>> attributes(get(varname))$NewAtt2 <- "MyAtt2"
>> Error in attributes(get(varname))$NewAtt2 <- "MyAtt2" :
>>    impossible de trouver la fonction "get<-"
>>
>> # Error...
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]



From bgunter@4567 @end|ng |rom gm@||@com  Thu Oct 11 07:58:15 2018
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 10 Oct 2018 22:58:15 -0700
Subject: [R] Set attributes for object known by name
In-Reply-To: <CA+hbrhWpyApQWDUsQLeMWQ8oZaVggTYJ68u1194fQPKtBScpug@mail.gmail.com>
References: <355e3f06-5fee-1e67-3c53-5fedb720aa2f@yahoo.fr>
 <CA+hbrhU9yRApfv9bHEGr2Z5JCTjoqtaf6TBfxuEUvrZxoWohNQ@mail.gmail.com>
 <CA+hbrhWpyApQWDUsQLeMWQ8oZaVggTYJ68u1194fQPKtBScpug@mail.gmail.com>
Message-ID: <CAGxFJbQ6G6YrTaVy3S6coucZd+=uf5S9JGuYTS2P7AYR=yAnAA@mail.gmail.com>

Well, it can be done without a temporary variable, but I'm not sure you
would want to.
Anyway...

## simplified example
> a <- 1
> vname <- "a"
> eval(substitute(attr(x,"b") <- "hi", list( x = as.name(vname))))
> a
[1] 1
attr(,"b")
[1] "hi"


Cheers,
Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Oct 10, 2018 at 9:48 PM Peter Langfelder <peter.langfelder at gmail.com>
wrote:

> oops, I think the right code would be
>
> x = get(varname)
> attr(x, "foo") = "bar"
> assign(varname, x)
>
> On Wed, Oct 10, 2018 at 9:30 PM Peter Langfelder <
> peter.langfelder at gmail.com>
> wrote:
>
> > I would try something like
> >
> > x = get(myvarname)
> > attr(x, "foo") = "bar"
> > assign(varname, x)
> >
> > HTH,
> >
> > Peter
> >
> > On Wed, Oct 10, 2018 at 9:15 PM Marc Girondot via R-help <
> > r-help at r-project.org> wrote:
> >
> >> Hello everybody,
> >>
> >> Has someone the solution to set attribute when variable is known by
> name ?
> >>
> >> Thanks a lot
> >>
> >> Marc
> >>
> >> Let see this exemple:
> >>
> >> # The variable name is stored as characters.
> >>
> >> varname <- "myvarname"
> >> assign(x = varname, data.frame(A=1:5, B=2:6))
> >> attributes(myvarname)
> >>
> >> $names
> >> [1] "A" "B"
> >> $class
> >> [1] "data.frame"
> >> $row.names
> >> [1] 1 2 3 4 5
> >>
> >> # perfect
> >>
> >> attributes(get(varname))
> >>
> >> # It works also
> >>
> >> $names
> >> [1] "A" "B"
> >> $class
> >> [1] "data.frame"
> >>
> >> $row.names
> >> [1] 1 2 3 4 5
> >>
> >> attributes(myvarname)$NewAtt <- "MyAtt"
> >>
> >> # It works
> >>
> >> attributes(get(varname))$NewAtt2 <- "MyAtt2"
> >> Error in attributes(get(varname))$NewAtt2 <- "MyAtt2" :
> >>    impossible de trouver la fonction "get<-"
> >>
> >> # Error...
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >>
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From K@th@r|n@@Fr|t@ch @end|ng |rom nn|@co@uk  Thu Oct 11 10:22:16 2018
From: K@th@r|n@@Fr|t@ch @end|ng |rom nn|@co@uk (Fritsch, Katharina (NNL))
Date: Thu, 11 Oct 2018 08:22:16 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <VI1PR0202MB3357AC579BC0B0D7C4C66BC2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
 <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>
 <DB3PR0202MB3355AC9A5807D00F591E3B55F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <ac573e54-dde3-397e-601f-2130b5c27676@gmail.com>
 <DB3PR0202MB33559193F379157F44AD4AB0F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>,
 <42363BAD-7D85-4A57-B35A-0CCBA2EC1FD2@mac.com>
 <VI1PR0202MB3357AC579BC0B0D7C4C66BC2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
Message-ID: <1B674C66F0DD4343BA5DD0C025217F9F028BFDE5@CSSPWD2PRAP1147.SSA-Intra.net>

Hiya,
I have lost track of half the discussion so forgive me if that suggestion has been made before, but would it be suitable to wrap your code in a shiny app and disseminate it this way?
Kind regards,
Katharina.

--

Dr Katharina Fritsch B.Sc. M.Sc. MRSC
Chemical Modeller, Chemical and Process Modelling


E.
katharina.fritsch at nnl.co.uk
T.
+44 (0)1925 289387
@uknnl

National Nuclear Laboratory Limited, 5th Floor, Chadwick House,
Birchwood Park, Warrington, WA3 6AE, UK

www.nnl.co.uk

-----Original Message-----
From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Olivier GIVAUDAN
Sent: 11 October 2018 00:54
To: Peter Claussen
Cc: r-help at r-project.org
Subject: Re: [R] Genuine relative paths with R

Yes, I am aware that both '__FILE__' and 'SAS_EXECFILENAME' are macro variables. I don't know how the VBA 'Application.ThisWorkbook.Path' VBA or PHP '__DIR__' (or '__FILE__') work.

And yes, indeed, until now I didn't even realise that this simple find-and-replace solution of "mine" is actually the basic job of a preprocessor when it expands macro variables, thank you!

A macro language in R, yes, I think it would be useful, at least for this function. If nothing simpler is available, of course...
________________________________
De : Peter Claussen <dakotajudo at mac.com> Envoy  : mercredi 10 octobre 2018 23:29   : Olivier GIVAUDAN Cc : Duncan Murdoch; Jeff Newmiller; r-help at r-project.org Objet : Re: [R] Genuine relative paths with R

If I m following all this correctly, it seems your criticism is that R doesn t provide a run-time function that is equivalent to a compile-time macro. You do realize that __FILE__ is not part of the C programming language - it s a predefined variable recognized by the cpp - the C preprocessor program. Similarly, SAS_EXECFILENAME is a predefined variable that can be recognized by the SAS macro processor, but has no meaning in the SAS language itself.

So, to go back to your original post:
1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.

This is what a macro processor does. Are you asking for a macro language in R?

Cheers

On Oct 10, 2018, at 6:11 PM, Olivier GIVAUDAN <olivier_givaudan at hotmail.com<mailto:olivier_givaudan at hotmail.com>> wrote:

It is not wrong to claim that R currently doesn't have a function returning the path of the R file where this same function was invoked.

'getwd()' is indeed not equivalent to VBA 'Application.ThisWorkbook.Path' or C macro '__FILE__' or SAS %sysget(SAS_EXECFILENAME), etc.


        [[alternative HTML version deleted]]


This e-mail is from National Nuclear Laboratory Limited ("NNL"). This e-mail and any attachments are intended for the addressee and may also be legally privileged. If you are not the intended recipient please do not print, re-transmit, store or act in reliance on it or any attachments. Instead, please e-mail it back to the sender and then immediately permanently delete it.

National Nuclear Laboratory Limited (Company number 3857752) Registered in England and Wales. Registered office: Chadwick House, Warrington Road, Birchwood Park, Warrington, WA3 6AE.

From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Thu Oct 11 11:07:47 2018
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Thu, 11 Oct 2018 04:07:47 -0500
Subject: [R] RMarkdown vignettes v. Jupyter notebooks?
Message-ID: <056b9d58-70ef-b0bc-a195-b1b8c5377a60@effectivedefense.org>

Hello:


 ????? What are the differences between Jupyter notebooks and RMarkdown 
vignettes?


 ????? I'm trying to do real time monitoring of the broadcast quality of 
a radio station, and it seems to me that it may be easier to do that in 
Python than in R.[1]? This led me to a recent post to 
"python-list at python.org" that mentioned "Jupyter, Mathematica, and the 
Future of the Research Paper"[2] by Paul Romer, who won the 2018 Nobel 
Memorial Prize in Economics only a few days ago.? In brief, this article 
suggests that Jupyter notebooks may replace publication in refereed 
scientific journals as the primary vehicle for sharing scientific 
research, because they make it so easy for readers to follow both the 
scientific and computational logic and test their own modifications.


 ????? A "Jupyter Notebook Tutorial: The Definitive Guide"[3] suggested 
I first install Anaconda Navigator.? I got version 1.9.2 of that.? It 
opens with options for eight different "applications" including 
JupyterLab 0.34.9, Jupyter Notebook 5.6.0, Spyder 3.3.1 (an IDE for 
Python), and RStudio 1.1.456.


 ????? This leads to several questions:


 ??? ??????? 1.? In general, what experiences have people had with 
Jupyter Notebooks, Anaconda Navigator, and RMarkdown vignettes in 
RStudio, and the similarities and differences?? Do you know any 
references that discuss this?


 ??? ??????? 2.? More specifically, does it make sense to try to use 
RStudio from within Anaconda Navigator, or is one better off using 
RStudio as a separate, stand alone application -- or should one even 
abandon RStudio and run R instead from within a Jupyter Notebook? [I'm 
new to this topic, so it's possible that this question doesn't even make 
sense.]


 ????? Thanks,
 ????? Spencer Graves


[1] If you have ideas for how best to do real time monitoring of 
broadcast quality of a radio station, I'd love to hear them.? I need 
software that will do that, preferably something that's free, open 
source.? The commercial software I've seen for this is not adequate for 
my purposes, so I'm trying to write my own.? I have a sample script in 
Python that will read a live stream from a radio tuner and output a 
*.wav of whatever length I want, and I wrote Python eight years ago for 
a similar real time application.? I'd prefer to use R, but I don't know 
how to get started.


[2] 2018-04-13: 
"https://paulromer.net/jupyter-mathematica-and-the-future-of-the-research-paper". 
This further cites a similar article in The Atlantic from 2018-04-05: 
"www.theatlantic.com/science/archive/2018/04/the-scientific-paper-is-obsolete/556676".



From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Oct 11 11:27:49 2018
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 11 Oct 2018 05:27:49 -0400
Subject: [R] Genuine relative paths with R
In-Reply-To: <VI1PR0202MB3357AF40A744B10736F640A3F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
 <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>
 <DB3PR0202MB3355AC9A5807D00F591E3B55F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <ac573e54-dde3-397e-601f-2130b5c27676@gmail.com>
 <DB3PR0202MB33559193F379157F44AD4AB0F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <f96e0c64-0e77-47f8-dbc1-5b49313ebb39@gmail.com>
 <VI1PR0202MB3357AF40A744B10736F640A3F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
Message-ID: <cbc49c08-3a5d-7510-98e3-8e53a680f47a@gmail.com>

On 10/10/2018 8:08 PM, Olivier GIVAUDAN wrote:
> I think Gabor (at least) already suggested this solution. But the 
> problem is: how do you source this file containing this 'foo' function 
> without writing its absolute path?

You only need its relative path to source it.

Duncan Murdoch
> 
> It's a kind of initialisation issue.
> 
>  > a function returning the path of the R file where this same function 
> was invoked.
>  >> I didn't realize that's what you were asking for. This has nothing 
> to do with your subject line.
> 
> It's just a trick to work with relative paths without having to write 
> any hardcoded (by definition) absolute path beforehand.
> ------------------------------------------------------------------------
> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Envoy? :* mercredi 10 octobre 2018 23:51
> *? :* Olivier GIVAUDAN; Jeff Newmiller
> *Cc?:* r-help at r-project.org
> *Objet :* Re: [R] Genuine relative paths with R
> On 10/10/2018 7:11 PM, Olivier GIVAUDAN wrote:
>> It is not wrong to claim that R currently doesn't have a function 
>> returning the path of the R file where this same function was invoked.
> 
> But it does.? I didn't realize that's what you were asking for.? This
> has nothing to do with your subject line.
> 
> If you source a file from somewhere, then each of the functions it
> creates is marked with its source location.? So you can put this in a file:
> 
> foo <- function () 1
> 
> filename <- normalizePath(getSrcFilename(foo, full.names=TRUE))
> 
> (You need the normalizePath() call because all that will be saved is the
> path that was used.? If it was a relative path, that's what you get
> before you normalize it.? You don't really need the foo function; you
> could put an anonymous function into the getSrcFilename call.? It's just
> usually easier to include a function that already exists.)
> 
> When you source() that file, filename will get the name of the file it
> came from.
> 
> This is a lot like __FILE__ in C.? One difference is that it is usually
> turned off when the function is being loaded into a package, but you can
> optionally turn it on.
> 
> You can also find out what line foo starts on, using
> 
> fooline <- getSrcLocation(foo)
> 
> This is a lot like __LINE__ in C.
> 
> Duncan Murdoch
> 
> 
>> 
>> 'getwd()' is indeed not equivalent to VBA 
>> 'Application.ThisWorkbook.Path' or C macro '__FILE__' or SAS 
>> %sysget(SAS_EXECFILENAME), etc.
>> ------------------------------------------------------------------------
>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>> *Envoy? :* mercredi 10 octobre 2018 22:59
>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>> *Cc?:* r-help at r-project.org
>> *Objet :* Re: [R] Genuine relative paths with R
>> On 10/10/2018 6:52 PM, Olivier GIVAUDAN wrote:
>>>>? Again, you seem to think making a package is a big deal.
>>> 
>>> Perhaps not a big deal (I believe you, I didn't write an R package yet), 
>>> but not as straightforward as having a function within an R file 
>>> returning its own path.
>>> 
>>>> But you're free to decide not to do it:? just please don't repeat 
>>> falseclaims about R (like the ones about paths that started this long 
>>> thread).
>>> 
>>> Which false claims?
>> 
>> "But I am really wondering why R doesn't have (please tell me if I'm
>> wrong) this basic feature as many other languages have it (batch, shell,
>> C, LaTeX, SAS with macro-variables, etc.)?"
>> 
>> Duncan Murdoch
>> 
>>> ------------------------------------------------------------------------
>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>> *Envoy? :* mercredi 10 octobre 2018 22:31
>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>> *Cc?:* r-help at r-project.org
>>> *Objet :* Re: [R] Genuine relative paths with R
>>> On 10/10/2018 6:17 PM, Olivier GIVAUDAN wrote:
>>>>> Nothing says a package has to go on CRAN.? You can distribute 
>>>> themprivately to a small audience.
>>>> 
>>>> Yes, I agree in theory. But this solution still violates my own 
>>>> proportionality principle.
>>> 
>>> Again, you seem to think making a package is a big deal.? Maybe that was
>>> true 10 years ago (though I wrote and tested a package in a 45 minute
>>> presentation at UseR 2008), but now it's very easy.
>>> 
>>> But you're free to decide not to do it:? just please don't repeat false
>>> claims about R (like the ones about paths that started this long thread).
>>> 
>>>> 
>>>>> If you know as much about R as the people who wrote it
>>>> 
>>>> I didn't claim that (that's was a quite general / theoretical statement, 
>>>> not necessarily and only applicable to R).
>>> 
>>> I didn't say you made that claim.? I was answering your question about
>>> why inventing your own way is not a good idea.? It might be a good idea,
>>> if you know the system very, very well.? Otherwise, it's probably better
>>> to work the standard way.
>>> 
>>> Duncan Murdoch
>>> 
>>>> 
>>>>> For example, you might thinkthat all front ends set the working 
>>>> directory to the directory of theprogram they are running, because the 
>>>> ones you've tried do it that way. But they don't.
>>>> 
>>>> It runs that way at least on Windows with RStudio and R GUI and I know 
>>>> the recipients of my R code work on Windows with at least one of these 2 
>>>> GUIs. So the workaround I finally found satisfies my current needs
>>>> ------------------------------------------------------------------------
>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>> *Envoy? :* mercredi 10 octobre 2018 22:07
>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>> *Cc?:* r-help at r-project.org
>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>> On 10/10/2018 5:45 PM, Olivier GIVAUDAN wrote:
>>>>> I'm not sure I'm "inventing my own way" of distributing R code... And I 
>>>>> distribute it to a very limited audience.
>>>> 
>>>> Nothing says a package has to go on CRAN.? You can distribute them
>>>> privately to a small audience.
>>>> 
>>>>> Anyway, why not "inventing a new way" if it's more efficient than the 
>>>>> standard one (I'm talking now in theory)?
>>>> 
>>>> If you know as much about R as the people who wrote it, then you can
>>>> almost certainly invent better ways to do many of the things it does.? R
>>>> Core was constrained by trying to maintain back compatibility, and that
>>>> means some of their solutions aren't perfect.
>>>> 
>>>> But if you don't know it that well, chances are you'll make mistakes
>>>> when you invent your own way of doing it.? For example, you might think
>>>> that all front ends set the working directory to the directory of the
>>>> program they are running, because the ones you've tried do it that way.
>>>> But they don't.
>>>> 
>>>> Duncan Murdoch
>>>> 
>>>>> ------------------------------------------------------------------------
>>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>>> *Envoy? :* mercredi 10 octobre 2018 21:39
>>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>>> *Cc?:* r-help at r-project.org
>>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>>> On 10/10/2018 5:31 PM, Olivier GIVAUDAN wrote:
>>>>>> I do not want to use the terminal, just double clicks (i.e. the 
>>>>>> simplest, automatic, non-manual way, without having to write a line / 
>>>>>> command).
>>>>>> Therefore everything should happen outside any terminal. The user won't 
>>>>>> use a terminal.
>>>>>> 
>>>>>> I don't have a Mac and I'm not familiar with this OS, sorry.
>>>>>> But I'm really surprised the click method gives different results than 
>>>>>> on Linux and Windows.
>>>>>> I know the click method worked both on Linux (Ubuntu latest version) and 
>>>>>> Windows (10).
>>>>>> 
>>>>>> Yes, I executed my file from a terminal and got obviously the same 
>>>>>> result as you (that's reassuring).
>>>>>> 
>>>>>> Come on guys, creating a package... It's like using a hammer to kill a 
>>>>>> fly...
>>>>> 
>>>>> It's a simple operation to create a package in RStudio.? Not quite a
>>>>> single click, but just a few.
>>>>> 
>>>>> In plain R, it's just a little more work using package.skeleton().
>>>>> 
>>>>> Really, if you are distributing R code, you should do it in the standard
>>>>> way, not invent your own.
>>>>> 
>>>>> Duncan Murdoch
>>>>> 
>>>>>> ------------------------------------------------------------------------
>>>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>>>> *Envoy? :* mercredi 10 octobre 2018 20:54
>>>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>>>> *Cc?:* r-help at r-project.org
>>>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>>>> On 10/10/2018 4:42 PM, Olivier GIVAUDAN wrote:
>>>>>>> Why are you not simply double-clicking on 'TestPWD' and choosing to 
>>>>>>> execute the file (don't add anything)?
>>>>>>> Are you executing the file from a terminal?
>>>>>> 
>>>>>> Yes, I was executing the file from my terminal.? Otherwise I really have
>>>>>> no idea what the "current directory" is in the Finder.?? (I'm on a Mac.
>>>>>> I just tried the click method; it printed my home directory, not the
>>>>>> directory of the script.)
>>>>>> 
>>>>>> I don't know the name of your visual front end, but you are displaying
>>>>>> the working directory that it sets when you click on TestPWD.? That will
>>>>>> be different from the working directory that your user sees in the Terminal.
>>>>>> 
>>>>>> You can see what I saw if you run TestPWD from the Terminal.? It will
>>>>>> print the current working directory, not the one where TestPWD happens
>>>>>> to live.
>>>>>> 
>>>>>> If you want to do the same sort of thing in R, you could set up a script
>>>>>> that calls R, and execute that in the way you executed TestPWD.? But in
>>>>>> another message you said you aren't allowed to do that, so I think your
>>>>>> best solution is the one offered by Bill Dunlap:? organize your files as
>>>>>> an R package.? If you name your package "Olivier", then you can find all
>>>>>> the files in it under the directory returned by
>>>>>> 
>>>>>>? ?? system.file(".", package = "Olivier")
>>>>>> 
>>>>>> The package system is designed for R code, but you can put arbitrary
>>>>>> files into a package:? just store them under the "inst" directory in
>>>>>> your source.? When the package is installed, those files will be moved
>>>>>> up one level, i.e.
>>>>>> 
>>>>>> Olivier/inst/foo
>>>>>> 
>>>>>> will become
>>>>>> 
>>>>>>? ?? system.file("foo", package = "Olivier")
>>>>>> 
>>>>>> Duncan Murdoch
>>>>> 
>>>> 
>>> 
>> 
>



From |@t@z@hn @end|ng |rom gm@||@com  Thu Oct 11 13:18:13 2018
From: |@t@z@hn @end|ng |rom gm@||@com (Ista Zahn)
Date: Thu, 11 Oct 2018 07:18:13 -0400
Subject: [R] RMarkdown vignettes v. Jupyter notebooks?
In-Reply-To: <056b9d58-70ef-b0bc-a195-b1b8c5377a60@effectivedefense.org>
References: <056b9d58-70ef-b0bc-a195-b1b8c5377a60@effectivedefense.org>
Message-ID: <CA+vqiLFRhHi+jm4JNwwEd+MOMG-Agzk7p_duKoku8G-CgTBNuQ@mail.gmail.com>

Hi Spencer,

On Thu, Oct 11, 2018 at 5:08 AM Spencer Graves
<spencer.graves at effectivedefense.org> wrote:
>
> Hello:
>
>
>        What are the differences between Jupyter notebooks and RMarkdown
> vignettes?

Here are some of the main differences I'm aware of:

Rmarkdown files include code and prose. The results produced by the
code do not appear in the Rmarkdown file; instead, the file must be
processed and typeset to produce a .pdf or .html (etc.) file that
includes those results. Jupyter notebooks dispense with with
processing step: output is displayed directly in the notebook. That
is, a notebook includes code, prose, and results, while an Rmarkdown
file includes only code and prose.

Rmarkdown allows control over the inclusion of code and results, and
over how the results are displayed via header arguments. There is no
such thing in Jupyter notebooks. Controlling the precise appearance of
a document produced by Jupyter is much more difficult. Going farther,
one can even say that Jupyter notebooks are designed primarily to be
read as Jupyter notebooks; exporting to other formats is kind of an
afterthought. In contrast, Rmarkdown is designed to produce the final
readable result in another format (.html or .pdf typically).

Rmarkdown is based on markdown, a human readable markup language,
Jupyter notebooks are based on JSON, a data interchange format common
on the web. This means that Rmarkdown files can be easily edited using
any text editor you like. The same is not true of Jupyter notebooks.
While you can of course edit the JSON directly, the format is designed
to be written and read by a computer; editing it yourself is not easy.

Rmarkdown is specific to R (I guess there is some basic support in
knitr for other languages, but in my experience it never worked well)
while Jupyter notebooks are language agnostic and "kernels" exist for
a large number of programming languages. However, each Jupyter
notebook can use only one kernel; you can't easily have R and Python
code in the same notebook.

Jupyter notebooks typically run in your browser where the actual text
editing features are somewhat limited. Rmarkdown is typically run in
an editor such as Emacs or Rstudio where editing and project support
is much better and greater customization may be possible. You can work
indirectly with Jupyter notebooks in Emacs
(https://github.com/millejoh/emacs-ipython-notebook) and perhaps other
editors as well; this goes some way toward escaping the tyranny of the
browser but is more fragile and difficult to get working compared to
Rmarkdown.

Because Jupyter uses a web-based client-server model, it is easy to
provide live interactive notebooks on your website (see e.g.,
https://github.com/jupyterhub/binderhub). As far as I know this is not
currently possible with Rmarkdown.

>
>
>        I'm trying to do real time monitoring of the broadcast quality of
> a radio station, and it seems to me that it may be easier to do that in
> Python than in R.[1]  This led me to a recent post to
> "python-list at python.org" that mentioned "Jupyter, Mathematica, and the
> Future of the Research Paper"[2] by Paul Romer, who won the 2018 Nobel
> Memorial Prize in Economics only a few days ago.  In brief, this article
> suggests that Jupyter notebooks may replace publication in refereed
> scientific journals as the primary vehicle for sharing scientific
> research, because they make it so easy for readers to follow both the
> scientific and computational logic and test their own modifications.
>
>
>        A "Jupyter Notebook Tutorial: The Definitive Guide"[3] suggested
> I first install Anaconda Navigator.  I got version 1.9.2 of that.  It
> opens with options for eight different "applications" including
> JupyterLab 0.34.9, Jupyter Notebook 5.6.0, Spyder 3.3.1 (an IDE for
> Python), and RStudio 1.1.456.
>
>
>        This leads to several questions:
>
>
>              1.  In general, what experiences have people had with
> Jupyter Notebooks, Anaconda Navigator, and RMarkdown vignettes in
> RStudio, and the similarities and differences?  Do you know any
> references that discuss this?

I've used both extensively, and noted the differences I've discovered above.

>
>
>              2.  More specifically, does it make sense to try to use
> RStudio from within Anaconda Navigator, or is one better off using
> RStudio as a separate, stand alone application -- or should one even
> abandon RStudio and run R instead from within a Jupyter Notebook? [I'm
> new to this topic, so it's possible that this question doesn't even make
> sense.]

The only advantage I can think of to using Rstudio via Anaconda is
that you could use conda environments to maintain different versions
or R and/or R packages for different projects.

You'll have to weigh the pros and cons to decide whether to switch
from Rstudio to Jupyter notebooks. Depending on what you want to do
there are both advantages and disadvantages, as discussed above.

Finally, I have to give a plug for a couple of related tools that I
find very useful.

Emacs org-mode https://orgmode.org/ gives you the best of both worlds:
notebooks unconstrained by the browser that can include code in
multiple languages, header arguments, excellent export support, etc.
It is superior to both Jupyter and Rmarkdown, except that support only
exists in Emacs.

Jupytext (https://github.com/mwouts/jupytext) is another way to have
it all, by allowing you to edit in markdown or Rmarkdown, and
auto-generating a notebook and possibly other formats for you. I've
only recently started experimenting with it, but so far I like it a
lot.

Best,
Ista
>
>
>        Thanks,
>        Spencer Graves
>
>
> [1] If you have ideas for how best to do real time monitoring of
> broadcast quality of a radio station, I'd love to hear them.  I need
> software that will do that, preferably something that's free, open
> source.  The commercial software I've seen for this is not adequate for
> my purposes, so I'm trying to write my own.  I have a sample script in
> Python that will read a live stream from a radio tuner and output a
> *.wav of whatever length I want, and I wrote Python eight years ago for
> a similar real time application.  I'd prefer to use R, but I don't know
> how to get started.
>
>
> [2] 2018-04-13:
> "https://paulromer.net/jupyter-mathematica-and-the-future-of-the-research-paper".
> This further cites a similar article in The Atlantic from 2018-04-05:
> "www.theatlantic.com/science/archive/2018/04/the-scientific-paper-is-obsolete/556676".
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



From e@@w|ek @end|ng |rom gm@||@com  Thu Oct 11 13:32:43 2018
From: e@@w|ek @end|ng |rom gm@||@com (Ek Esawi)
Date: Thu, 11 Oct 2018 07:32:43 -0400
Subject: [R] Reorder file names read by list.files function
In-Reply-To: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
References: <CA+ZkTxvOpBX+xp7eZDCRJdtGLqMPNYcb7M6kN-ynQo3+FEVSUw@mail.gmail.com>
Message-ID: <CA+ZkTxvzBWbdcb7rZkMccZpLOEYMUqU4hoMputBDobkmdSxX4A@mail.gmail.com>

Thank you all. Bill's original idea worked well. I did not realize
that i had to paste the full dir name to the correctly ordered file.
Once that was done it did work well. I will try REUI's idea  and i
think Jeff's idea of rearranging the output after extracting the
tables might work and i will try it and see.

Thank you all.

EK
On Tue, Oct 9, 2018 at 9:44 AM Ek Esawi <esawiek at gmail.com> wrote:
>
> Hi All--
>
> I used base R list.file function to read files from a directory. The
> file names are months (April, August, etc). That's the system reads
> them in alphabetical order., but i want to reordered them in calendar
> order (January, February, ...December).. I thought i might be able to
> do it via RegEx or possibly gtools package, I am wondering if there is
> an easier way.
>
> Thanks--EK
>
> Example
> path = "C:/Users/name/Downloads/MyFiles"
> file.names <- dir(path, pattern =".PDF")
>
> Example output
> Output:
> "February.PDF"  "January.PDF" "March.PDF"
> Desired output
> "January.PDF"  "February.PDF" "March.PDF"



From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Oct 11 14:36:20 2018
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 11 Oct 2018 08:36:20 -0400
Subject: [R] RMarkdown vignettes v. Jupyter notebooks?
In-Reply-To: <CA+vqiLFRhHi+jm4JNwwEd+MOMG-Agzk7p_duKoku8G-CgTBNuQ@mail.gmail.com>
References: <056b9d58-70ef-b0bc-a195-b1b8c5377a60@effectivedefense.org>
 <CA+vqiLFRhHi+jm4JNwwEd+MOMG-Agzk7p_duKoku8G-CgTBNuQ@mail.gmail.com>
Message-ID: <248ead90-e4d2-a0da-49b3-93afa850c0b3@gmail.com>

On 11/10/2018 7:18 AM, Ista Zahn wrote:
> Hi Spencer,
> 
> On Thu, Oct 11, 2018 at 5:08 AM Spencer Graves
> <spencer.graves at effectivedefense.org> wrote:
>>
>> Hello:
>>
>>
>>         What are the differences between Jupyter notebooks and RMarkdown
>> vignettes?
> 
> Here are some of the main differences I'm aware of:
> 
> Rmarkdown files include code and prose. The results produced by the
> code do not appear in the Rmarkdown file; instead, the file must be
> processed and typeset to produce a .pdf or .html (etc.) file that
> includes those results. Jupyter notebooks dispense with with
> processing step: output is displayed directly in the notebook. That
> is, a notebook includes code, prose, and results, while an Rmarkdown
> file includes only code and prose.

RStudio can display the output mixed in with the text in the editor.

> 
> Rmarkdown allows control over the inclusion of code and results, and
> over how the results are displayed via header arguments. There is no
> such thing in Jupyter notebooks. Controlling the precise appearance of
> a document produced by Jupyter is much more difficult. Going farther,
> one can even say that Jupyter notebooks are designed primarily to be
> read as Jupyter notebooks; exporting to other formats is kind of an
> afterthought. In contrast, Rmarkdown is designed to produce the final
> readable result in another format (.html or .pdf typically).
> 
> Rmarkdown is based on markdown, a human readable markup language,
> Jupyter notebooks are based on JSON, a data interchange format common
> on the web. This means that Rmarkdown files can be easily edited using
> any text editor you like. The same is not true of Jupyter notebooks.
> While you can of course edit the JSON directly, the format is designed
> to be written and read by a computer; editing it yourself is not easy.
> 
> Rmarkdown is specific to R (I guess there is some basic support in
> knitr for other languages, but in my experience it never worked well)
> while Jupyter notebooks are language agnostic and "kernels" exist for
> a large number of programming languages. However, each Jupyter
> notebook can use only one kernel; you can't easily have R and Python
> code in the same notebook.
> 
> Jupyter notebooks typically run in your browser where the actual text
> editing features are somewhat limited. Rmarkdown is typically run in
> an editor such as Emacs or Rstudio where editing and project support
> is much better and greater customization may be possible. You can work
> indirectly with Jupyter notebooks in Emacs
> (https://github.com/millejoh/emacs-ipython-notebook) and perhaps other
> editors as well; this goes some way toward escaping the tyranny of the
> browser but is more fragile and difficult to get working compared to
> Rmarkdown.
> 
> Because Jupyter uses a web-based client-server model, it is easy to
> provide live interactive notebooks on your website (see e.g.,
> https://github.com/jupyterhub/binderhub). As far as I know this is not
> currently possible with Rmarkdown.

There are ways to put Shiny apps into Rmarkdown documents; see 
<https://beta.rstudioconnect.com/content/2671/Combining-Shiny-R-Markdown.html>. 
  Other than my two notes above, your comments about Rmarkdown seem 
right on the mark.

Duncan Murdoch

> 
>>
>>
>>         I'm trying to do real time monitoring of the broadcast quality of
>> a radio station, and it seems to me that it may be easier to do that in
>> Python than in R.[1]  This led me to a recent post to
>> "python-list at python.org" that mentioned "Jupyter, Mathematica, and the
>> Future of the Research Paper"[2] by Paul Romer, who won the 2018 Nobel
>> Memorial Prize in Economics only a few days ago.  In brief, this article
>> suggests that Jupyter notebooks may replace publication in refereed
>> scientific journals as the primary vehicle for sharing scientific
>> research, because they make it so easy for readers to follow both the
>> scientific and computational logic and test their own modifications.
>>
>>
>>         A "Jupyter Notebook Tutorial: The Definitive Guide"[3] suggested
>> I first install Anaconda Navigator.  I got version 1.9.2 of that.  It
>> opens with options for eight different "applications" including
>> JupyterLab 0.34.9, Jupyter Notebook 5.6.0, Spyder 3.3.1 (an IDE for
>> Python), and RStudio 1.1.456.
>>
>>
>>         This leads to several questions:
>>
>>
>>               1.  In general, what experiences have people had with
>> Jupyter Notebooks, Anaconda Navigator, and RMarkdown vignettes in
>> RStudio, and the similarities and differences?  Do you know any
>> references that discuss this?
> 
> I've used both extensively, and noted the differences I've discovered above.
> 
>>
>>
>>               2.  More specifically, does it make sense to try to use
>> RStudio from within Anaconda Navigator, or is one better off using
>> RStudio as a separate, stand alone application -- or should one even
>> abandon RStudio and run R instead from within a Jupyter Notebook? [I'm
>> new to this topic, so it's possible that this question doesn't even make
>> sense.]
> 
> The only advantage I can think of to using Rstudio via Anaconda is
> that you could use conda environments to maintain different versions
> or R and/or R packages for different projects.
> 
> You'll have to weigh the pros and cons to decide whether to switch
> from Rstudio to Jupyter notebooks. Depending on what you want to do
> there are both advantages and disadvantages, as discussed above.
> 
> Finally, I have to give a plug for a couple of related tools that I
> find very useful.
> 
> Emacs org-mode https://orgmode.org/ gives you the best of both worlds:
> notebooks unconstrained by the browser that can include code in
> multiple languages, header arguments, excellent export support, etc.
> It is superior to both Jupyter and Rmarkdown, except that support only
> exists in Emacs.
> 
> Jupytext (https://github.com/mwouts/jupytext) is another way to have
> it all, by allowing you to edit in markdown or Rmarkdown, and
> auto-generating a notebook and possibly other formats for you. I've
> only recently started experimenting with it, but so far I like it a
> lot.
> 
> Best,
> Ista
>>
>>
>>         Thanks,
>>         Spencer Graves
>>
>>
>> [1] If you have ideas for how best to do real time monitoring of
>> broadcast quality of a radio station, I'd love to hear them.  I need
>> software that will do that, preferably something that's free, open
>> source.  The commercial software I've seen for this is not adequate for
>> my purposes, so I'm trying to write my own.  I have a sample script in
>> Python that will read a live stream from a radio tuner and output a
>> *.wav of whatever length I want, and I wrote Python eight years ago for
>> a similar real time application.  I'd prefer to use R, but I don't know
>> how to get started.
>>
>>
>> [2] 2018-04-13:
>> "https://paulromer.net/jupyter-mathematica-and-the-future-of-the-research-paper".
>> This further cites a similar article in The Atlantic from 2018-04-05:
>> "www.theatlantic.com/science/archive/2018/04/the-scientific-paper-is-obsolete/556676".
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>



From h@w|ckh@m @end|ng |rom gm@||@com  Thu Oct 11 14:43:00 2018
From: h@w|ckh@m @end|ng |rom gm@||@com (Hadley Wickham)
Date: Thu, 11 Oct 2018 07:43:00 -0500
Subject: [R] RMarkdown vignettes v. Jupyter notebooks?
In-Reply-To: <056b9d58-70ef-b0bc-a195-b1b8c5377a60@effectivedefense.org>
References: <056b9d58-70ef-b0bc-a195-b1b8c5377a60@effectivedefense.org>
Message-ID: <CABdHhvF7c=mvE5Tp3PtJyy2tQDytmGtEtFc6x4FzUOQ+fpmhzA@mail.gmail.com>

I'd highly recommend Yihui's extensive write up:
https://yihui.name/en/2018/09/notebook-war/

Hadley
On Thu, Oct 11, 2018 at 4:08 AM Spencer Graves
<spencer.graves at effectivedefense.org> wrote:
>
> Hello:
>
>
>        What are the differences between Jupyter notebooks and RMarkdown
> vignettes?
>
>
>        I'm trying to do real time monitoring of the broadcast quality of
> a radio station, and it seems to me that it may be easier to do that in
> Python than in R.[1]  This led me to a recent post to
> "python-list at python.org" that mentioned "Jupyter, Mathematica, and the
> Future of the Research Paper"[2] by Paul Romer, who won the 2018 Nobel
> Memorial Prize in Economics only a few days ago.  In brief, this article
> suggests that Jupyter notebooks may replace publication in refereed
> scientific journals as the primary vehicle for sharing scientific
> research, because they make it so easy for readers to follow both the
> scientific and computational logic and test their own modifications.
>
>
>        A "Jupyter Notebook Tutorial: The Definitive Guide"[3] suggested
> I first install Anaconda Navigator.  I got version 1.9.2 of that.  It
> opens with options for eight different "applications" including
> JupyterLab 0.34.9, Jupyter Notebook 5.6.0, Spyder 3.3.1 (an IDE for
> Python), and RStudio 1.1.456.
>
>
>        This leads to several questions:
>
>
>              1.  In general, what experiences have people had with
> Jupyter Notebooks, Anaconda Navigator, and RMarkdown vignettes in
> RStudio, and the similarities and differences?  Do you know any
> references that discuss this?
>
>
>              2.  More specifically, does it make sense to try to use
> RStudio from within Anaconda Navigator, or is one better off using
> RStudio as a separate, stand alone application -- or should one even
> abandon RStudio and run R instead from within a Jupyter Notebook? [I'm
> new to this topic, so it's possible that this question doesn't even make
> sense.]
>
>
>        Thanks,
>        Spencer Graves
>
>
> [1] If you have ideas for how best to do real time monitoring of
> broadcast quality of a radio station, I'd love to hear them.  I need
> software that will do that, preferably something that's free, open
> source.  The commercial software I've seen for this is not adequate for
> my purposes, so I'm trying to write my own.  I have a sample script in
> Python that will read a live stream from a radio tuner and output a
> *.wav of whatever length I want, and I wrote Python eight years ago for
> a similar real time application.  I'd prefer to use R, but I don't know
> how to get started.
>
>
> [2] 2018-04-13:
> "https://paulromer.net/jupyter-mathematica-and-the-future-of-the-research-paper".
> This further cites a similar article in The Atlantic from 2018-04-05:
> "www.theatlantic.com/science/archive/2018/04/the-scientific-paper-is-obsolete/556676".
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
http://hadley.nz



From |@t@z@hn @end|ng |rom gm@||@com  Thu Oct 11 14:53:29 2018
From: |@t@z@hn @end|ng |rom gm@||@com (Ista Zahn)
Date: Thu, 11 Oct 2018 08:53:29 -0400
Subject: [R] RMarkdown vignettes v. Jupyter notebooks?
In-Reply-To: <248ead90-e4d2-a0da-49b3-93afa850c0b3@gmail.com>
References: <056b9d58-70ef-b0bc-a195-b1b8c5377a60@effectivedefense.org>
 <CA+vqiLFRhHi+jm4JNwwEd+MOMG-Agzk7p_duKoku8G-CgTBNuQ@mail.gmail.com>
 <248ead90-e4d2-a0da-49b3-93afa850c0b3@gmail.com>
Message-ID: <CA+vqiLH=U6r7z9ZJ9VSrENMP4pDNYLu05OKcOZe44OWwH9rpwQ@mail.gmail.com>

On Thu, Oct 11, 2018 at 8:36 AM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> On 11/10/2018 7:18 AM, Ista Zahn wrote:
> > Hi Spencer,
> >
> > On Thu, Oct 11, 2018 at 5:08 AM Spencer Graves
> > <spencer.graves at effectivedefense.org> wrote:
> >>
> >> Hello:
> >>
> >>
> >>         What are the differences between Jupyter notebooks and RMarkdown
> >> vignettes?
> >
> > Here are some of the main differences I'm aware of:
> >
> > Rmarkdown files include code and prose. The results produced by the
> > code do not appear in the Rmarkdown file; instead, the file must be
> > processed and typeset to produce a .pdf or .html (etc.) file that
> > includes those results. Jupyter notebooks dispense with with
> > processing step: output is displayed directly in the notebook. That
> > is, a notebook includes code, prose, and results, while an Rmarkdown
> > file includes only code and prose.
>
> RStudio can display the output mixed in with the text in the editor.

True, but the _file_ does not include the output. Thus it functions
more as a preview, and will not be visible to you if I email you a
.Rmd file. On the other hand, .ipynb files really do contain the
output; if I email one to you and you open it in Jupyter you will see
the output as well.

--Ista

>
> >
> > Rmarkdown allows control over the inclusion of code and results, and
> > over how the results are displayed via header arguments. There is no
> > such thing in Jupyter notebooks. Controlling the precise appearance of
> > a document produced by Jupyter is much more difficult. Going farther,
> > one can even say that Jupyter notebooks are designed primarily to be
> > read as Jupyter notebooks; exporting to other formats is kind of an
> > afterthought. In contrast, Rmarkdown is designed to produce the final
> > readable result in another format (.html or .pdf typically).
> >
> > Rmarkdown is based on markdown, a human readable markup language,
> > Jupyter notebooks are based on JSON, a data interchange format common
> > on the web. This means that Rmarkdown files can be easily edited using
> > any text editor you like. The same is not true of Jupyter notebooks.
> > While you can of course edit the JSON directly, the format is designed
> > to be written and read by a computer; editing it yourself is not easy.
> >
> > Rmarkdown is specific to R (I guess there is some basic support in
> > knitr for other languages, but in my experience it never worked well)
> > while Jupyter notebooks are language agnostic and "kernels" exist for
> > a large number of programming languages. However, each Jupyter
> > notebook can use only one kernel; you can't easily have R and Python
> > code in the same notebook.
> >
> > Jupyter notebooks typically run in your browser where the actual text
> > editing features are somewhat limited. Rmarkdown is typically run in
> > an editor such as Emacs or Rstudio where editing and project support
> > is much better and greater customization may be possible. You can work
> > indirectly with Jupyter notebooks in Emacs
> > (https://github.com/millejoh/emacs-ipython-notebook) and perhaps other
> > editors as well; this goes some way toward escaping the tyranny of the
> > browser but is more fragile and difficult to get working compared to
> > Rmarkdown.
> >
> > Because Jupyter uses a web-based client-server model, it is easy to
> > provide live interactive notebooks on your website (see e.g.,
> > https://github.com/jupyterhub/binderhub). As far as I know this is not
> > currently possible with Rmarkdown.
>
> There are ways to put Shiny apps into Rmarkdown documents; see
> <https://beta.rstudioconnect.com/content/2671/Combining-Shiny-R-Markdown.html>.
>   Other than my two notes above, your comments about Rmarkdown seem
> right on the mark.
>
> Duncan Murdoch
>
> >
> >>
> >>
> >>         I'm trying to do real time monitoring of the broadcast quality of
> >> a radio station, and it seems to me that it may be easier to do that in
> >> Python than in R.[1]  This led me to a recent post to
> >> "python-list at python.org" that mentioned "Jupyter, Mathematica, and the
> >> Future of the Research Paper"[2] by Paul Romer, who won the 2018 Nobel
> >> Memorial Prize in Economics only a few days ago.  In brief, this article
> >> suggests that Jupyter notebooks may replace publication in refereed
> >> scientific journals as the primary vehicle for sharing scientific
> >> research, because they make it so easy for readers to follow both the
> >> scientific and computational logic and test their own modifications.
> >>
> >>
> >>         A "Jupyter Notebook Tutorial: The Definitive Guide"[3] suggested
> >> I first install Anaconda Navigator.  I got version 1.9.2 of that.  It
> >> opens with options for eight different "applications" including
> >> JupyterLab 0.34.9, Jupyter Notebook 5.6.0, Spyder 3.3.1 (an IDE for
> >> Python), and RStudio 1.1.456.
> >>
> >>
> >>         This leads to several questions:
> >>
> >>
> >>               1.  In general, what experiences have people had with
> >> Jupyter Notebooks, Anaconda Navigator, and RMarkdown vignettes in
> >> RStudio, and the similarities and differences?  Do you know any
> >> references that discuss this?
> >
> > I've used both extensively, and noted the differences I've discovered above.
> >
> >>
> >>
> >>               2.  More specifically, does it make sense to try to use
> >> RStudio from within Anaconda Navigator, or is one better off using
> >> RStudio as a separate, stand alone application -- or should one even
> >> abandon RStudio and run R instead from within a Jupyter Notebook? [I'm
> >> new to this topic, so it's possible that this question doesn't even make
> >> sense.]
> >
> > The only advantage I can think of to using Rstudio via Anaconda is
> > that you could use conda environments to maintain different versions
> > or R and/or R packages for different projects.
> >
> > You'll have to weigh the pros and cons to decide whether to switch
> > from Rstudio to Jupyter notebooks. Depending on what you want to do
> > there are both advantages and disadvantages, as discussed above.
> >
> > Finally, I have to give a plug for a couple of related tools that I
> > find very useful.
> >
> > Emacs org-mode https://orgmode.org/ gives you the best of both worlds:
> > notebooks unconstrained by the browser that can include code in
> > multiple languages, header arguments, excellent export support, etc.
> > It is superior to both Jupyter and Rmarkdown, except that support only
> > exists in Emacs.
> >
> > Jupytext (https://github.com/mwouts/jupytext) is another way to have
> > it all, by allowing you to edit in markdown or Rmarkdown, and
> > auto-generating a notebook and possibly other formats for you. I've
> > only recently started experimenting with it, but so far I like it a
> > lot.
> >
> > Best,
> > Ista
> >>
> >>
> >>         Thanks,
> >>         Spencer Graves
> >>
> >>
> >> [1] If you have ideas for how best to do real time monitoring of
> >> broadcast quality of a radio station, I'd love to hear them.  I need
> >> software that will do that, preferably something that's free, open
> >> source.  The commercial software I've seen for this is not adequate for
> >> my purposes, so I'm trying to write my own.  I have a sample script in
> >> Python that will read a live stream from a radio tuner and output a
> >> *.wav of whatever length I want, and I wrote Python eight years ago for
> >> a similar real time application.  I'd prefer to use R, but I don't know
> >> how to get started.
> >>
> >>
> >> [2] 2018-04-13:
> >> "https://paulromer.net/jupyter-mathematica-and-the-future-of-the-research-paper".
> >> This further cites a similar article in The Atlantic from 2018-04-05:
> >> "www.theatlantic.com/science/archive/2018/04/the-scientific-paper-is-obsolete/556676".
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>



From |r|end|y @end|ng |rom yorku@c@  Thu Oct 11 15:08:08 2018
From: |r|end|y @end|ng |rom yorku@c@ (Michael Friendly)
Date: Thu, 11 Oct 2018 09:08:08 -0400
Subject: [R] Genuine relative paths with R
In-Reply-To: <VI1PR0202MB3357AF40A744B10736F640A3F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
 <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>
 <DB3PR0202MB3355AC9A5807D00F591E3B55F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <ac573e54-dde3-397e-601f-2130b5c27676@gmail.com>
 <DB3PR0202MB33559193F379157F44AD4AB0F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <f96e0c64-0e77-47f8-dbc1-5b49313ebb39@gmail.com>
 <VI1PR0202MB3357AF40A744B10736F640A3F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
Message-ID: <12da61c6-8c19-7af2-c57b-6cc5fc929481@yorku.ca>

Olivier:

Readers of R-Help generally are patient and try to be helpful. Numerous 
solutions to your initial query were proposed, but for some reason you
either reject them or take the discussion down some different rabbit 
hole of claims about R vs. other software environments, to which kind
people reply and you then rebut. ENOUGH ALREADY.  This thread has been
going on for nearly a week. Choose something that
works for you, have a cup of tea, go for a run, get a life.
Please do not bother to reply.

-Michael

On 10/10/2018 8:08 PM, Olivier GIVAUDAN wrote:
> I think Gabor (at least) already suggested this solution. But the problem is: how do you source this file containing this 'foo' function without writing its absolute path?
> 
> It's a kind of initialisation issue.
> 
>> a function returning the path of the R file where this same function was invoked.
>>> I didn't realize that's what you were asking for. This has nothing to do with your subject line.
> 
> It's just a trick to work with relative paths without having to write any hardcoded (by definition) absolute path beforehand.
> ________________________________
> De : Duncan Murdoch <murdoch.duncan at gmail.com>
> Envoy? : mercredi 10 octobre 2018 23:51
> ? : Olivier GIVAUDAN; Jeff Newmiller
> Cc : r-help at r-project.org
> Objet : Re: [R] Genuine relative paths with R
> 
> On 10/10/2018 7:11 PM, Olivier GIVAUDAN wrote:
>> It is not wrong to claim that R currently doesn't have a function
>> returning the path of the R file where this same function was invoked.
> 
> But it does.  I didn't realize that's what you were asking for.  This
> has nothing to do with your subject line.
> 
> If you source a file from somewhere, then each of the functions it
> creates is marked with its source location.  So you can put this in a file:
> 
> foo <- function () 1
> 
> filename <- normalizePath(getSrcFilename(foo, full.names=TRUE))
> 
> (You need the normalizePath() call because all that will be saved is the
> path that was used.  If it was a relative path, that's what you get
> before you normalize it.  You don't really need the foo function; you
> could put an anonymous function into the getSrcFilename call.  It's just
> usually easier to include a function that already exists.)
> 
> When you source() that file, filename will get the name of the file it
> came from.
> 
> This is a lot like __FILE__ in C.  One difference is that it is usually
> turned off when the function is being loaded into a package, but you can
> optionally turn it on.
> 
> You can also find out what line foo starts on, using
> 
> fooline <- getSrcLocation(foo)
> 
> This is a lot like __LINE__ in C.
> 
> Duncan Murdoch
> 
> 
>>
>> 'getwd()' is indeed not equivalent to VBA
>> 'Application.ThisWorkbook.Path' or C macro '__FILE__' or SAS
>> %sysget(SAS_EXECFILENAME), etc.
>> ------------------------------------------------------------------------
>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>> *Envoy? :* mercredi 10 octobre 2018 22:59
>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>> *Cc :* r-help at r-project.org
>> *Objet :* Re: [R] Genuine relative paths with R
>> On 10/10/2018 6:52 PM, Olivier GIVAUDAN wrote:
>>>>   Again, you seem to think making a package is a big deal.
>>>
>>> Perhaps not a big deal (I believe you, I didn't write an R package yet),
>>> but not as straightforward as having a function within an R file
>>> returning its own path.
>>>
>>>> But you're free to decide not to do it:  just please don't repeat
>>> falseclaims about R (like the ones about paths that started this long
>>> thread).
>>>
>>> Which false claims?
>>
>> "But I am really wondering why R doesn't have (please tell me if I'm
>> wrong) this basic feature as many other languages have it (batch, shell,
>> C, LaTeX, SAS with macro-variables, etc.)?"
>>
>> Duncan Murdoch
>>
>>> ------------------------------------------------------------------------
>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>> *Envoy? :* mercredi 10 octobre 2018 22:31
>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>> *Cc :* r-help at r-project.org
>>> *Objet :* Re: [R] Genuine relative paths with R
>>> On 10/10/2018 6:17 PM, Olivier GIVAUDAN wrote:
>>>>> Nothing says a package has to go on CRAN.  You can distribute
>>>> themprivately to a small audience.
>>>>
>>>> Yes, I agree in theory. But this solution still violates my own
>>>> proportionality principle.
>>>
>>> Again, you seem to think making a package is a big deal.  Maybe that was
>>> true 10 years ago (though I wrote and tested a package in a 45 minute
>>> presentation at UseR 2008), but now it's very easy.
>>>
>>> But you're free to decide not to do it:  just please don't repeat false
>>> claims about R (like the ones about paths that started this long thread).
>>>
>>>>
>>>>> If you know as much about R as the people who wrote it
>>>>
>>>> I didn't claim that (that's was a quite general / theoretical statement,
>>>> not necessarily and only applicable to R).
>>>
>>> I didn't say you made that claim.  I was answering your question about
>>> why inventing your own way is not a good idea.  It might be a good idea,
>>> if you know the system very, very well.  Otherwise, it's probably better
>>> to work the standard way.
>>>
>>> Duncan Murdoch
>>>
>>>>
>>>>> For example, you might thinkthat all front ends set the working
>>>> directory to the directory of theprogram they are running, because the
>>>> ones you've tried do it that way. But they don't.
>>>>
> 
> 
>>>> GUIs. So the workaround I finally found satisfies my current needs
>>>> ------------------------------------------------------------------------
>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>> *Envoy? :* mercredi 10 octobre 2018 22:07
>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>> *Cc :* r-help at r-project.org
>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>> On 10/10/2018 5:45 PM, Olivier GIVAUDAN wrote:
>>>>> I'm not sure I'm "inventing my own way" of distributing R code... And I
>>>>> distribute it to a very limited audience.
>>>>
>>>> Nothing says a package has to go on CRAN.  You can distribute them
>>>> privately to a small audience.
>>>>
>>>>> Anyway, why not "inventing a new way" if it's more efficient than the
>>>>> standard one (I'm talking now in theory)?
>>>>
>>>> If you know as much about R as the people who wrote it, then you can
>>>> almost certainly invent better ways to do many of the things it does.  R
>>>> Core was constrained by trying to maintain back compatibility, and that
>>>> means some of their solutions aren't perfect.
>>>>
>>>> But if you don't know it that well, chances are you'll make mistakes
>>>> when you invent your own way of doing it.  For example, you might think
>>>> that all front ends set the working directory to the directory of the
>>>> program they are running, because the ones you've tried do it that way.
>>>> But they don't.
>>>>
>>>> Duncan Murdoch
>>>>
>>>>> ------------------------------------------------------------------------
>>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>>> *Envoy? :* mercredi 10 octobre 2018 21:39
>>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>>> *Cc :* r-help at r-project.org
>>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>>> On 10/10/2018 5:31 PM, Olivier GIVAUDAN wrote:
>>>>>> I do not want to use the terminal, just double clicks (i.e. the
>>>>>> simplest, automatic, non-manual way, without having to write a line /
>>>>>> command).
>>>>>> Therefore everything should happen outside any terminal. The user won't
>>>>>> use a terminal.
>>>>>>
>>>>>> I don't have a Mac and I'm not familiar with this OS, sorry.
>>>>>> But I'm really surprised the click method gives different results than
> 
>>>>>> I know the click method worked both on Linux (Ubuntu latest version) and
> 
>>>>>>
>>>>>> Yes, I executed my file from a terminal and got obviously the same
>>>>>> result as you (that's reassuring).
>>>>>>
>>>>>> Come on guys, creating a package... It's like using a hammer to kill a
>>>>>> fly...
>>>>>
>>>>> It's a simple operation to create a package in RStudio.  Not quite a
>>>>> single click, but just a few.
>>>>>
>>>>> In plain R, it's just a little more work using package.skeleton().
>>>>>
>>>>> Really, if you are distributing R code, you should do it in the standard
>>>>> way, not invent your own.
>>>>>
>>>>> Duncan Murdoch
>>>>>
>>>>>> ------------------------------------------------------------------------
>>>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>>>> *Envoy? :* mercredi 10 octobre 2018 20:54
>>>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>>>> *Cc :* r-help at r-project.org
>>>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>>>> On 10/10/2018 4:42 PM, Olivier GIVAUDAN wrote:
>>>>>>> Why are you not simply double-clicking on 'TestPWD' and choosing to
>>>>>>> execute the file (don't add anything)?
>>>>>>> Are you executing the file from a terminal?
>>>>>>
>>>>>> Yes, I was executing the file from my terminal.  Otherwise I really have
>>>>>> no idea what the "current directory" is in the Finder.   (I'm on a Mac.
>>>>>> I just tried the click method; it printed my home directory, not the
>>>>>> directory of the script.)
>>>>>>
>>>>>> I don't know the name of your visual front end, but you are displaying
>>>>>> the working directory that it sets when you click on TestPWD.  That will
>>>>>> be different from the working directory that your user sees in the Terminal.
>>>>>>
>>>>>> You can see what I saw if you run TestPWD from the Terminal.  It will
>>>>>> print the current working directory, not the one where TestPWD happens
>>>>>> to live.
>>>>>>
>>>>>> If you want to do the same sort of thing in R, you could set up a script
>>>>>> that calls R, and execute that in the way you executed TestPWD.  But in
>>>>>> another message you said you aren't allowed to do that, so I think your
>>>>>> best solution is the one offered by Bill Dunlap:  organize your files as
>>>>>> an R package.  If you name your package "Olivier", then you can find all
>>>>>> the files in it under the directory returned by
>>>>>>
>>>>>>      system.file(".", package = "Olivier")
>>>>>>
>>>>>> The package system is designed for R code, but you can put arbitrary
>>>>>> files into a package:  just store them under the "inst" directory in
>>>>>> your source.  When the package is installed, those files will be moved
>>>>>> up one level, i.e.
>>>>>>
>>>>>> Olivier/inst/foo
>>>>>>
>>>>>> will become
>>>>>>
>>>>>>      system.file("foo", package = "Olivier")
>>>>>>
>>>>>> Duncan Murdoch
>>>>>
>>>>
>>>
>>
> 
> 
> 	[[alternative HTML version deleted]]
> 
> 
>



From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Oct 11 16:03:10 2018
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 11 Oct 2018 07:03:10 -0700
Subject: [R] RMarkdown vignettes v. Jupyter notebooks?
In-Reply-To: <CA+vqiLH=U6r7z9ZJ9VSrENMP4pDNYLu05OKcOZe44OWwH9rpwQ@mail.gmail.com>
References: <056b9d58-70ef-b0bc-a195-b1b8c5377a60@effectivedefense.org>
 <CA+vqiLFRhHi+jm4JNwwEd+MOMG-Agzk7p_duKoku8G-CgTBNuQ@mail.gmail.com>
 <248ead90-e4d2-a0da-49b3-93afa850c0b3@gmail.com>
 <CA+vqiLH=U6r7z9ZJ9VSrENMP4pDNYLu05OKcOZe44OWwH9rpwQ@mail.gmail.com>
Message-ID: <92A266C1-82B9-4D40-B571-251DF6A4A2EB@dcn.davis.ca.us>

Ista, you do not seem to be aware of the 
.nb.html format, which is way easier to share with a non-uswr than an ipynb file yet allows the same in-progress kinds of results to be shared and the source can be extracted easily using a web browser (no server needed).

There is some controversy about this whole notebook approach [1] but I think deciding whether it is right for your purposes is highly subjective.

FWIW It took me years to figure out how to even open a Jupyter notebook, so the idea that they should be the gold standard for sharing results seems absurd to me.

[1] https://yihui.name/en/2018/09/notebook-war/

On October 11, 2018 5:53:29 AM PDT, Ista Zahn <istazahn at gmail.com> wrote:
>On Thu, Oct 11, 2018 at 8:36 AM Duncan Murdoch
><murdoch.duncan at gmail.com> wrote:
>>
>> On 11/10/2018 7:18 AM, Ista Zahn wrote:
>> > Hi Spencer,
>> >
>> > On Thu, Oct 11, 2018 at 5:08 AM Spencer Graves
>> > <spencer.graves at effectivedefense.org> wrote:
>> >>
>> >> Hello:
>> >>
>> >>
>> >>         What are the differences between Jupyter notebooks and
>RMarkdown
>> >> vignettes?
>> >
>> > Here are some of the main differences I'm aware of:
>> >
>> > Rmarkdown files include code and prose. The results produced by the
>> > code do not appear in the Rmarkdown file; instead, the file must be
>> > processed and typeset to produce a .pdf or .html (etc.) file that
>> > includes those results. Jupyter notebooks dispense with with
>> > processing step: output is displayed directly in the notebook. That
>> > is, a notebook includes code, prose, and results, while an
>Rmarkdown
>> > file includes only code and prose.
>>
>> RStudio can display the output mixed in with the text in the editor.
>
>True, but the _file_ does not include the output. Thus it functions
>more as a preview, and will not be visible to you if I email you a
>.Rmd file. On the other hand, .ipynb files really do contain the
>output; if I email one to you and you open it in Jupyter you will see
>the output as well.
>
>--Ista
>
>>
>> >
>> > Rmarkdown allows control over the inclusion of code and results,
>and
>> > over how the results are displayed via header arguments. There is
>no
>> > such thing in Jupyter notebooks. Controlling the precise appearance
>of
>> > a document produced by Jupyter is much more difficult. Going
>farther,
>> > one can even say that Jupyter notebooks are designed primarily to
>be
>> > read as Jupyter notebooks; exporting to other formats is kind of an
>> > afterthought. In contrast, Rmarkdown is designed to produce the
>final
>> > readable result in another format (.html or .pdf typically).
>> >
>> > Rmarkdown is based on markdown, a human readable markup language,
>> > Jupyter notebooks are based on JSON, a data interchange format
>common
>> > on the web. This means that Rmarkdown files can be easily edited
>using
>> > any text editor you like. The same is not true of Jupyter
>notebooks.
>> > While you can of course edit the JSON directly, the format is
>designed
>> > to be written and read by a computer; editing it yourself is not
>easy.
>> >
>> > Rmarkdown is specific to R (I guess there is some basic support in
>> > knitr for other languages, but in my experience it never worked
>well)
>> > while Jupyter notebooks are language agnostic and "kernels" exist
>for
>> > a large number of programming languages. However, each Jupyter
>> > notebook can use only one kernel; you can't easily have R and
>Python
>> > code in the same notebook.
>> >
>> > Jupyter notebooks typically run in your browser where the actual
>text
>> > editing features are somewhat limited. Rmarkdown is typically run
>in
>> > an editor such as Emacs or Rstudio where editing and project
>support
>> > is much better and greater customization may be possible. You can
>work
>> > indirectly with Jupyter notebooks in Emacs
>> > (https://github.com/millejoh/emacs-ipython-notebook) and perhaps
>other
>> > editors as well; this goes some way toward escaping the tyranny of
>the
>> > browser but is more fragile and difficult to get working compared
>to
>> > Rmarkdown.
>> >
>> > Because Jupyter uses a web-based client-server model, it is easy to
>> > provide live interactive notebooks on your website (see e.g.,
>> > https://github.com/jupyterhub/binderhub). As far as I know this is
>not
>> > currently possible with Rmarkdown.
>>
>> There are ways to put Shiny apps into Rmarkdown documents; see
>>
><https://beta.rstudioconnect.com/content/2671/Combining-Shiny-R-Markdown.html>.
>>   Other than my two notes above, your comments about Rmarkdown seem
>> right on the mark.
>>
>> Duncan Murdoch
>>
>> >
>> >>
>> >>
>> >>         I'm trying to do real time monitoring of the broadcast
>quality of
>> >> a radio station, and it seems to me that it may be easier to do
>that in
>> >> Python than in R.[1]  This led me to a recent post to
>> >> "python-list at python.org" that mentioned "Jupyter, Mathematica, and
>the
>> >> Future of the Research Paper"[2] by Paul Romer, who won the 2018
>Nobel
>> >> Memorial Prize in Economics only a few days ago.  In brief, this
>article
>> >> suggests that Jupyter notebooks may replace publication in
>refereed
>> >> scientific journals as the primary vehicle for sharing scientific
>> >> research, because they make it so easy for readers to follow both
>the
>> >> scientific and computational logic and test their own
>modifications.
>> >>
>> >>
>> >>         A "Jupyter Notebook Tutorial: The Definitive Guide"[3]
>suggested
>> >> I first install Anaconda Navigator.  I got version 1.9.2 of that. 
>It
>> >> opens with options for eight different "applications" including
>> >> JupyterLab 0.34.9, Jupyter Notebook 5.6.0, Spyder 3.3.1 (an IDE
>for
>> >> Python), and RStudio 1.1.456.
>> >>
>> >>
>> >>         This leads to several questions:
>> >>
>> >>
>> >>               1.  In general, what experiences have people had
>with
>> >> Jupyter Notebooks, Anaconda Navigator, and RMarkdown vignettes in
>> >> RStudio, and the similarities and differences?  Do you know any
>> >> references that discuss this?
>> >
>> > I've used both extensively, and noted the differences I've
>discovered above.
>> >
>> >>
>> >>
>> >>               2.  More specifically, does it make sense to try to
>use
>> >> RStudio from within Anaconda Navigator, or is one better off using
>> >> RStudio as a separate, stand alone application -- or should one
>even
>> >> abandon RStudio and run R instead from within a Jupyter Notebook?
>[I'm
>> >> new to this topic, so it's possible that this question doesn't
>even make
>> >> sense.]
>> >
>> > The only advantage I can think of to using Rstudio via Anaconda is
>> > that you could use conda environments to maintain different
>versions
>> > or R and/or R packages for different projects.
>> >
>> > You'll have to weigh the pros and cons to decide whether to switch
>> > from Rstudio to Jupyter notebooks. Depending on what you want to do
>> > there are both advantages and disadvantages, as discussed above.
>> >
>> > Finally, I have to give a plug for a couple of related tools that I
>> > find very useful.
>> >
>> > Emacs org-mode https://orgmode.org/ gives you the best of both
>worlds:
>> > notebooks unconstrained by the browser that can include code in
>> > multiple languages, header arguments, excellent export support,
>etc.
>> > It is superior to both Jupyter and Rmarkdown, except that support
>only
>> > exists in Emacs.
>> >
>> > Jupytext (https://github.com/mwouts/jupytext) is another way to
>have
>> > it all, by allowing you to edit in markdown or Rmarkdown, and
>> > auto-generating a notebook and possibly other formats for you. I've
>> > only recently started experimenting with it, but so far I like it a
>> > lot.
>> >
>> > Best,
>> > Ista
>> >>
>> >>
>> >>         Thanks,
>> >>         Spencer Graves
>> >>
>> >>
>> >> [1] If you have ideas for how best to do real time monitoring of
>> >> broadcast quality of a radio station, I'd love to hear them.  I
>need
>> >> software that will do that, preferably something that's free, open
>> >> source.  The commercial software I've seen for this is not
>adequate for
>> >> my purposes, so I'm trying to write my own.  I have a sample
>script in
>> >> Python that will read a live stream from a radio tuner and output
>a
>> >> *.wav of whatever length I want, and I wrote Python eight years
>ago for
>> >> a similar real time application.  I'd prefer to use R, but I don't
>know
>> >> how to get started.
>> >>
>> >>
>> >> [2] 2018-04-13:
>> >>
>"https://paulromer.net/jupyter-mathematica-and-the-future-of-the-research-paper".
>> >> This further cites a similar article in The Atlantic from
>2018-04-05:
>> >>
>"www.theatlantic.com/science/archive/2018/04/the-scientific-paper-is-obsolete/556676".
>> >>
>> >> ______________________________________________
>> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> >> https://stat.ethz.ch/mailman/listinfo/r-help
>> >> PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>> >> and provide commented, minimal, self-contained, reproducible code.
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>> >
>>
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.



From |@t@z@hn @end|ng |rom gm@||@com  Thu Oct 11 16:11:44 2018
From: |@t@z@hn @end|ng |rom gm@||@com (Ista Zahn)
Date: Thu, 11 Oct 2018 10:11:44 -0400
Subject: [R] RMarkdown vignettes v. Jupyter notebooks?
In-Reply-To: <92A266C1-82B9-4D40-B571-251DF6A4A2EB@dcn.davis.ca.us>
References: <056b9d58-70ef-b0bc-a195-b1b8c5377a60@effectivedefense.org>
 <CA+vqiLFRhHi+jm4JNwwEd+MOMG-Agzk7p_duKoku8G-CgTBNuQ@mail.gmail.com>
 <248ead90-e4d2-a0da-49b3-93afa850c0b3@gmail.com>
 <CA+vqiLH=U6r7z9ZJ9VSrENMP4pDNYLu05OKcOZe44OWwH9rpwQ@mail.gmail.com>
 <92A266C1-82B9-4D40-B571-251DF6A4A2EB@dcn.davis.ca.us>
Message-ID: <CA+vqiLEOo+cMFggu1mvVFWB0cxPygQg+KSUHKBu7v4W=cGktig@mail.gmail.com>

On Thu, Oct 11, 2018 at 10:03 AM Jeff Newmiller
<jdnewmil at dcn.davis.ca.us> wrote:
>
> Ista, you do not seem to be aware of the
> .nb.html format, which is way easier to share with a non-uswr than an ipynb file yet allows the same in-progress kinds of results to be shared and the source can be extracted easily using a web browser (no server needed).

Yes, I am aware that notebooks can be exported / converted to other
formats, including .html and .pdf. My point is about emphasis:
Rmarkdown gives you header arguments and other tools that allow you a
great deal of control over how the final .html or .pdf file looks. The
system seems designed to produce .html or .pdf as the final output
format. Jupyter notebooks on the other hand seem primarily designed to
be viewed as Jupyter notebooks: they don't give you a log of tools for
controlling how the converted / exported notebook appears. That's not
so say there is not conversion / export possible of course...

--Ista

>
> There is some controversy about this whole notebook approach [1] but I think deciding whether it is right for your purposes is highly subjective.
>
> FWIW It took me years to figure out how to even open a Jupyter notebook, so the idea that they should be the gold standard for sharing results seems absurd to me.
>
> [1] https://yihui.name/en/2018/09/notebook-war/
>
> On October 11, 2018 5:53:29 AM PDT, Ista Zahn <istazahn at gmail.com> wrote:
> >On Thu, Oct 11, 2018 at 8:36 AM Duncan Murdoch
> ><murdoch.duncan at gmail.com> wrote:
> >>
> >> On 11/10/2018 7:18 AM, Ista Zahn wrote:
> >> > Hi Spencer,
> >> >
> >> > On Thu, Oct 11, 2018 at 5:08 AM Spencer Graves
> >> > <spencer.graves at effectivedefense.org> wrote:
> >> >>
> >> >> Hello:
> >> >>
> >> >>
> >> >>         What are the differences between Jupyter notebooks and
> >RMarkdown
> >> >> vignettes?
> >> >
> >> > Here are some of the main differences I'm aware of:
> >> >
> >> > Rmarkdown files include code and prose. The results produced by the
> >> > code do not appear in the Rmarkdown file; instead, the file must be
> >> > processed and typeset to produce a .pdf or .html (etc.) file that
> >> > includes those results. Jupyter notebooks dispense with with
> >> > processing step: output is displayed directly in the notebook. That
> >> > is, a notebook includes code, prose, and results, while an
> >Rmarkdown
> >> > file includes only code and prose.
> >>
> >> RStudio can display the output mixed in with the text in the editor.
> >
> >True, but the _file_ does not include the output. Thus it functions
> >more as a preview, and will not be visible to you if I email you a
> >.Rmd file. On the other hand, .ipynb files really do contain the
> >output; if I email one to you and you open it in Jupyter you will see
> >the output as well.
> >
> >--Ista
> >
> >>
> >> >
> >> > Rmarkdown allows control over the inclusion of code and results,
> >and
> >> > over how the results are displayed via header arguments. There is
> >no
> >> > such thing in Jupyter notebooks. Controlling the precise appearance
> >of
> >> > a document produced by Jupyter is much more difficult. Going
> >farther,
> >> > one can even say that Jupyter notebooks are designed primarily to
> >be
> >> > read as Jupyter notebooks; exporting to other formats is kind of an
> >> > afterthought. In contrast, Rmarkdown is designed to produce the
> >final
> >> > readable result in another format (.html or .pdf typically).
> >> >
> >> > Rmarkdown is based on markdown, a human readable markup language,
> >> > Jupyter notebooks are based on JSON, a data interchange format
> >common
> >> > on the web. This means that Rmarkdown files can be easily edited
> >using
> >> > any text editor you like. The same is not true of Jupyter
> >notebooks.
> >> > While you can of course edit the JSON directly, the format is
> >designed
> >> > to be written and read by a computer; editing it yourself is not
> >easy.
> >> >
> >> > Rmarkdown is specific to R (I guess there is some basic support in
> >> > knitr for other languages, but in my experience it never worked
> >well)
> >> > while Jupyter notebooks are language agnostic and "kernels" exist
> >for
> >> > a large number of programming languages. However, each Jupyter
> >> > notebook can use only one kernel; you can't easily have R and
> >Python
> >> > code in the same notebook.
> >> >
> >> > Jupyter notebooks typically run in your browser where the actual
> >text
> >> > editing features are somewhat limited. Rmarkdown is typically run
> >in
> >> > an editor such as Emacs or Rstudio where editing and project
> >support
> >> > is much better and greater customization may be possible. You can
> >work
> >> > indirectly with Jupyter notebooks in Emacs
> >> > (https://github.com/millejoh/emacs-ipython-notebook) and perhaps
> >other
> >> > editors as well; this goes some way toward escaping the tyranny of
> >the
> >> > browser but is more fragile and difficult to get working compared
> >to
> >> > Rmarkdown.
> >> >
> >> > Because Jupyter uses a web-based client-server model, it is easy to
> >> > provide live interactive notebooks on your website (see e.g.,
> >> > https://github.com/jupyterhub/binderhub). As far as I know this is
> >not
> >> > currently possible with Rmarkdown.
> >>
> >> There are ways to put Shiny apps into Rmarkdown documents; see
> >>
> ><https://beta.rstudioconnect.com/content/2671/Combining-Shiny-R-Markdown.html>.
> >>   Other than my two notes above, your comments about Rmarkdown seem
> >> right on the mark.
> >>
> >> Duncan Murdoch
> >>
> >> >
> >> >>
> >> >>
> >> >>         I'm trying to do real time monitoring of the broadcast
> >quality of
> >> >> a radio station, and it seems to me that it may be easier to do
> >that in
> >> >> Python than in R.[1]  This led me to a recent post to
> >> >> "python-list at python.org" that mentioned "Jupyter, Mathematica, and
> >the
> >> >> Future of the Research Paper"[2] by Paul Romer, who won the 2018
> >Nobel
> >> >> Memorial Prize in Economics only a few days ago.  In brief, this
> >article
> >> >> suggests that Jupyter notebooks may replace publication in
> >refereed
> >> >> scientific journals as the primary vehicle for sharing scientific
> >> >> research, because they make it so easy for readers to follow both
> >the
> >> >> scientific and computational logic and test their own
> >modifications.
> >> >>
> >> >>
> >> >>         A "Jupyter Notebook Tutorial: The Definitive Guide"[3]
> >suggested
> >> >> I first install Anaconda Navigator.  I got version 1.9.2 of that.
> >It
> >> >> opens with options for eight different "applications" including
> >> >> JupyterLab 0.34.9, Jupyter Notebook 5.6.0, Spyder 3.3.1 (an IDE
> >for
> >> >> Python), and RStudio 1.1.456.
> >> >>
> >> >>
> >> >>         This leads to several questions:
> >> >>
> >> >>
> >> >>               1.  In general, what experiences have people had
> >with
> >> >> Jupyter Notebooks, Anaconda Navigator, and RMarkdown vignettes in
> >> >> RStudio, and the similarities and differences?  Do you know any
> >> >> references that discuss this?
> >> >
> >> > I've used both extensively, and noted the differences I've
> >discovered above.
> >> >
> >> >>
> >> >>
> >> >>               2.  More specifically, does it make sense to try to
> >use
> >> >> RStudio from within Anaconda Navigator, or is one better off using
> >> >> RStudio as a separate, stand alone application -- or should one
> >even
> >> >> abandon RStudio and run R instead from within a Jupyter Notebook?
> >[I'm
> >> >> new to this topic, so it's possible that this question doesn't
> >even make
> >> >> sense.]
> >> >
> >> > The only advantage I can think of to using Rstudio via Anaconda is
> >> > that you could use conda environments to maintain different
> >versions
> >> > or R and/or R packages for different projects.
> >> >
> >> > You'll have to weigh the pros and cons to decide whether to switch
> >> > from Rstudio to Jupyter notebooks. Depending on what you want to do
> >> > there are both advantages and disadvantages, as discussed above.
> >> >
> >> > Finally, I have to give a plug for a couple of related tools that I
> >> > find very useful.
> >> >
> >> > Emacs org-mode https://orgmode.org/ gives you the best of both
> >worlds:
> >> > notebooks unconstrained by the browser that can include code in
> >> > multiple languages, header arguments, excellent export support,
> >etc.
> >> > It is superior to both Jupyter and Rmarkdown, except that support
> >only
> >> > exists in Emacs.
> >> >
> >> > Jupytext (https://github.com/mwouts/jupytext) is another way to
> >have
> >> > it all, by allowing you to edit in markdown or Rmarkdown, and
> >> > auto-generating a notebook and possibly other formats for you. I've
> >> > only recently started experimenting with it, but so far I like it a
> >> > lot.
> >> >
> >> > Best,
> >> > Ista
> >> >>
> >> >>
> >> >>         Thanks,
> >> >>         Spencer Graves
> >> >>
> >> >>
> >> >> [1] If you have ideas for how best to do real time monitoring of
> >> >> broadcast quality of a radio station, I'd love to hear them.  I
> >need
> >> >> software that will do that, preferably something that's free, open
> >> >> source.  The commercial software I've seen for this is not
> >adequate for
> >> >> my purposes, so I'm trying to write my own.  I have a sample
> >script in
> >> >> Python that will read a live stream from a radio tuner and output
> >a
> >> >> *.wav of whatever length I want, and I wrote Python eight years
> >ago for
> >> >> a similar real time application.  I'd prefer to use R, but I don't
> >know
> >> >> how to get started.
> >> >>
> >> >>
> >> >> [2] 2018-04-13:
> >> >>
> >"https://paulromer.net/jupyter-mathematica-and-the-future-of-the-research-paper".
> >> >> This further cites a similar article in The Atlantic from
> >2018-04-05:
> >> >>
> >"www.theatlantic.com/science/archive/2018/04/the-scientific-paper-is-obsolete/556676".
> >> >>
> >> >> ______________________________________________
> >> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> >> PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >> >> and provide commented, minimal, self-contained, reproducible code.
> >> >
> >> > ______________________________________________
> >> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> > https://stat.ethz.ch/mailman/listinfo/r-help
> >> > PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >> > and provide commented, minimal, self-contained, reproducible code.
> >> >
> >>
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my phone. Please excuse my brevity.



From x|e @end|ng |rom y|hu|@n@me  Thu Oct 11 16:15:08 2018
From: x|e @end|ng |rom y|hu|@n@me (Yihui Xie)
Date: Thu, 11 Oct 2018 09:15:08 -0500
Subject: [R] RMarkdown vignettes v. Jupyter notebooks?
In-Reply-To: <CA+vqiLFRhHi+jm4JNwwEd+MOMG-Agzk7p_duKoku8G-CgTBNuQ@mail.gmail.com>
References: <056b9d58-70ef-b0bc-a195-b1b8c5377a60@effectivedefense.org>
 <CA+vqiLFRhHi+jm4JNwwEd+MOMG-Agzk7p_duKoku8G-CgTBNuQ@mail.gmail.com>
Message-ID: <CANROs4fFzcT+G+h8M11X=ydRY8Pno0hKTJdRhrg_Ejta0pLojg@mail.gmail.com>

I just have one comment on the multi-language support in R Markdown
(inline below):

On Thu, Oct 11, 2018 at 6:19 AM Ista Zahn <istazahn at gmail.com> wrote:
>
> Hi Spencer,
>
> On Thu, Oct 11, 2018 at 5:08 AM Spencer Graves
> <spencer.graves at effectivedefense.org> wrote:
> >
> > Hello:
> >
> >
> >        What are the differences between Jupyter notebooks and RMarkdown
> > vignettes?
>
> Here are some of the main differences I'm aware of:
>
> Rmarkdown files include code and prose. The results produced by the
> code do not appear in the Rmarkdown file; instead, the file must be
> processed and typeset to produce a .pdf or .html (etc.) file that
> includes those results. Jupyter notebooks dispense with with
> processing step: output is displayed directly in the notebook. That
> is, a notebook includes code, prose, and results, while an Rmarkdown
> file includes only code and prose.
>
> Rmarkdown allows control over the inclusion of code and results, and
> over how the results are displayed via header arguments. There is no
> such thing in Jupyter notebooks. Controlling the precise appearance of
> a document produced by Jupyter is much more difficult. Going farther,
> one can even say that Jupyter notebooks are designed primarily to be
> read as Jupyter notebooks; exporting to other formats is kind of an
> afterthought. In contrast, Rmarkdown is designed to produce the final
> readable result in another format (.html or .pdf typically).
>
> Rmarkdown is based on markdown, a human readable markup language,
> Jupyter notebooks are based on JSON, a data interchange format common
> on the web. This means that Rmarkdown files can be easily edited using
> any text editor you like. The same is not true of Jupyter notebooks.
> While you can of course edit the JSON directly, the format is designed
> to be written and read by a computer; editing it yourself is not easy.
>
> Rmarkdown is specific to R (I guess there is some basic support in
> knitr for other languages, but in my experience it never worked well)
> while Jupyter notebooks are language agnostic and "kernels" exist for
> a large number of programming languages. However, each Jupyter
> notebook can use only one kernel; you can't easily have R and Python
> code in the same notebook.

You might want to at least update your impression about the Python
support in R Markdown now :) Last year, with the release of the
reticulate package, the support for Python has been substantially
enhanced in both R Markdown
(https://bookdown.org/yihui/rmarkdown/language-engines.html) and
RStudio (https://blog.rstudio.com/2018/10/09/rstudio-1-2-preview-reticulated-python/).
You can easily have both R and Python code in the same R Markdown
document, and the two worlds can freely talk to each other.

> Jupyter notebooks typically run in your browser where the actual text
> editing features are somewhat limited. Rmarkdown is typically run in
> an editor such as Emacs or Rstudio where editing and project support
> is much better and greater customization may be possible. You can work
> indirectly with Jupyter notebooks in Emacs
> (https://github.com/millejoh/emacs-ipython-notebook) and perhaps other
> editors as well; this goes some way toward escaping the tyranny of the
> browser but is more fragile and difficult to get working compared to
> Rmarkdown.
>
> Because Jupyter uses a web-based client-server model, it is easy to
> provide live interactive notebooks on your website (see e.g.,
> https://github.com/jupyterhub/binderhub). As far as I know this is not
> currently possible with Rmarkdown.
>
> >
> >
> >        I'm trying to do real time monitoring of the broadcast quality of
> > a radio station, and it seems to me that it may be easier to do that in
> > Python than in R.[1]  This led me to a recent post to
> > "python-list at python.org" that mentioned "Jupyter, Mathematica, and the
> > Future of the Research Paper"[2] by Paul Romer, who won the 2018 Nobel
> > Memorial Prize in Economics only a few days ago.  In brief, this article
> > suggests that Jupyter notebooks may replace publication in refereed
> > scientific journals as the primary vehicle for sharing scientific
> > research, because they make it so easy for readers to follow both the
> > scientific and computational logic and test their own modifications.
> >
> >
> >        A "Jupyter Notebook Tutorial: The Definitive Guide"[3] suggested
> > I first install Anaconda Navigator.  I got version 1.9.2 of that.  It
> > opens with options for eight different "applications" including
> > JupyterLab 0.34.9, Jupyter Notebook 5.6.0, Spyder 3.3.1 (an IDE for
> > Python), and RStudio 1.1.456.
> >
> >
> >        This leads to several questions:
> >
> >
> >              1.  In general, what experiences have people had with
> > Jupyter Notebooks, Anaconda Navigator, and RMarkdown vignettes in
> > RStudio, and the similarities and differences?  Do you know any
> > references that discuss this?
>
> I've used both extensively, and noted the differences I've discovered above.
>
> >
> >
> >              2.  More specifically, does it make sense to try to use
> > RStudio from within Anaconda Navigator, or is one better off using
> > RStudio as a separate, stand alone application -- or should one even
> > abandon RStudio and run R instead from within a Jupyter Notebook? [I'm
> > new to this topic, so it's possible that this question doesn't even make
> > sense.]
>
> The only advantage I can think of to using Rstudio via Anaconda is
> that you could use conda environments to maintain different versions
> or R and/or R packages for different projects.
>
> You'll have to weigh the pros and cons to decide whether to switch
> from Rstudio to Jupyter notebooks. Depending on what you want to do
> there are both advantages and disadvantages, as discussed above.
>
> Finally, I have to give a plug for a couple of related tools that I
> find very useful.
>
> Emacs org-mode https://orgmode.org/ gives you the best of both worlds:
> notebooks unconstrained by the browser that can include code in
> multiple languages, header arguments, excellent export support, etc.
> It is superior to both Jupyter and Rmarkdown, except that support only
> exists in Emacs.
>
> Jupytext (https://github.com/mwouts/jupytext) is another way to have
> it all, by allowing you to edit in markdown or Rmarkdown, and
> auto-generating a notebook and possibly other formats for you. I've
> only recently started experimenting with it, but so far I like it a
> lot.
>
> Best,
> Ista
> >
> >
> >        Thanks,
> >        Spencer Graves
> >
> >
> > [1] If you have ideas for how best to do real time monitoring of
> > broadcast quality of a radio station, I'd love to hear them.  I need
> > software that will do that, preferably something that's free, open
> > source.  The commercial software I've seen for this is not adequate for
> > my purposes, so I'm trying to write my own.  I have a sample script in
> > Python that will read a live stream from a radio tuner and output a
> > *.wav of whatever length I want, and I wrote Python eight years ago for
> > a similar real time application.  I'd prefer to use R, but I don't know
> > how to get started.
> >
> >
> > [2] 2018-04-13:
> > "https://paulromer.net/jupyter-mathematica-and-the-future-of-the-research-paper".
> > This further cites a similar article in The Atlantic from 2018-04-05:
> > "www.theatlantic.com/science/archive/2018/04/the-scientific-paper-is-obsolete/556676".



From |@t@z@hn @end|ng |rom gm@||@com  Thu Oct 11 16:19:36 2018
From: |@t@z@hn @end|ng |rom gm@||@com (Ista Zahn)
Date: Thu, 11 Oct 2018 10:19:36 -0400
Subject: [R] RMarkdown vignettes v. Jupyter notebooks?
In-Reply-To: <CANROs4fFzcT+G+h8M11X=ydRY8Pno0hKTJdRhrg_Ejta0pLojg@mail.gmail.com>
References: <056b9d58-70ef-b0bc-a195-b1b8c5377a60@effectivedefense.org>
 <CA+vqiLFRhHi+jm4JNwwEd+MOMG-Agzk7p_duKoku8G-CgTBNuQ@mail.gmail.com>
 <CANROs4fFzcT+G+h8M11X=ydRY8Pno0hKTJdRhrg_Ejta0pLojg@mail.gmail.com>
Message-ID: <CA+vqiLH49R-F8BGFOjHS2mGko8CjJXJxHV1Hbx6KxwTca982CA@mail.gmail.com>

On Thu, Oct 11, 2018 at 10:15 AM Yihui Xie <xie at yihui.name> wrote:
>
> I just have one comment on the multi-language support in R Markdown
> (inline below):
>
> On Thu, Oct 11, 2018 at 6:19 AM Ista Zahn <istazahn at gmail.com> wrote:
> >
> > Hi Spencer,
> >
> > On Thu, Oct 11, 2018 at 5:08 AM Spencer Graves
> > <spencer.graves at effectivedefense.org> wrote:
> > >
> > > Hello:
> > >
> > >
> > >        What are the differences between Jupyter notebooks and RMarkdown
> > > vignettes?
> >
> > Here are some of the main differences I'm aware of:
> >

<snip>

> > Rmarkdown is specific to R (I guess there is some basic support in
> > knitr for other languages, but in my experience it never worked well)
> > while Jupyter notebooks are language agnostic and "kernels" exist for
> > a large number of programming languages. However, each Jupyter
> > notebook can use only one kernel; you can't easily have R and Python
> > code in the same notebook.
>
> You might want to at least update your impression about the Python
> support in R Markdown now :) Last year, with the release of the
> reticulate package, the support for Python has been substantially
> enhanced in both R Markdown
> (https://bookdown.org/yihui/rmarkdown/language-engines.html) and
> RStudio (https://blog.rstudio.com/2018/10/09/rstudio-1-2-preview-reticulated-python/).
> You can easily have both R and Python code in the same R Markdown
> document, and the two worlds can freely talk to each other.

Yes, I did miss that development, thank you for that! I haven't spent
much time with it yet, but that looks really great.

--Ista
>
> > Jupyter notebooks typically run in your browser where the actual text
> > editing features are somewhat limited. Rmarkdown is typically run in
> > an editor such as Emacs or Rstudio where editing and project support
> > is much better and greater customization may be possible. You can work
> > indirectly with Jupyter notebooks in Emacs
> > (https://github.com/millejoh/emacs-ipython-notebook) and perhaps other
> > editors as well; this goes some way toward escaping the tyranny of the
> > browser but is more fragile and difficult to get working compared to
> > Rmarkdown.
> >
> > Because Jupyter uses a web-based client-server model, it is easy to
> > provide live interactive notebooks on your website (see e.g.,
> > https://github.com/jupyterhub/binderhub). As far as I know this is not
> > currently possible with Rmarkdown.
> >
> > >
> > >
> > >        I'm trying to do real time monitoring of the broadcast quality of
> > > a radio station, and it seems to me that it may be easier to do that in
> > > Python than in R.[1]  This led me to a recent post to
> > > "python-list at python.org" that mentioned "Jupyter, Mathematica, and the
> > > Future of the Research Paper"[2] by Paul Romer, who won the 2018 Nobel
> > > Memorial Prize in Economics only a few days ago.  In brief, this article
> > > suggests that Jupyter notebooks may replace publication in refereed
> > > scientific journals as the primary vehicle for sharing scientific
> > > research, because they make it so easy for readers to follow both the
> > > scientific and computational logic and test their own modifications.
> > >
> > >
> > >        A "Jupyter Notebook Tutorial: The Definitive Guide"[3] suggested
> > > I first install Anaconda Navigator.  I got version 1.9.2 of that.  It
> > > opens with options for eight different "applications" including
> > > JupyterLab 0.34.9, Jupyter Notebook 5.6.0, Spyder 3.3.1 (an IDE for
> > > Python), and RStudio 1.1.456.
> > >
> > >
> > >        This leads to several questions:
> > >
> > >
> > >              1.  In general, what experiences have people had with
> > > Jupyter Notebooks, Anaconda Navigator, and RMarkdown vignettes in
> > > RStudio, and the similarities and differences?  Do you know any
> > > references that discuss this?
> >
> > I've used both extensively, and noted the differences I've discovered above.
> >
> > >
> > >
> > >              2.  More specifically, does it make sense to try to use
> > > RStudio from within Anaconda Navigator, or is one better off using
> > > RStudio as a separate, stand alone application -- or should one even
> > > abandon RStudio and run R instead from within a Jupyter Notebook? [I'm
> > > new to this topic, so it's possible that this question doesn't even make
> > > sense.]
> >
> > The only advantage I can think of to using Rstudio via Anaconda is
> > that you could use conda environments to maintain different versions
> > or R and/or R packages for different projects.
> >
> > You'll have to weigh the pros and cons to decide whether to switch
> > from Rstudio to Jupyter notebooks. Depending on what you want to do
> > there are both advantages and disadvantages, as discussed above.
> >
> > Finally, I have to give a plug for a couple of related tools that I
> > find very useful.
> >
> > Emacs org-mode https://orgmode.org/ gives you the best of both worlds:
> > notebooks unconstrained by the browser that can include code in
> > multiple languages, header arguments, excellent export support, etc.
> > It is superior to both Jupyter and Rmarkdown, except that support only
> > exists in Emacs.
> >
> > Jupytext (https://github.com/mwouts/jupytext) is another way to have
> > it all, by allowing you to edit in markdown or Rmarkdown, and
> > auto-generating a notebook and possibly other formats for you. I've
> > only recently started experimenting with it, but so far I like it a
> > lot.
> >
> > Best,
> > Ista
> > >
> > >
> > >        Thanks,
> > >        Spencer Graves
> > >
> > >
> > > [1] If you have ideas for how best to do real time monitoring of
> > > broadcast quality of a radio station, I'd love to hear them.  I need
> > > software that will do that, preferably something that's free, open
> > > source.  The commercial software I've seen for this is not adequate for
> > > my purposes, so I'm trying to write my own.  I have a sample script in
> > > Python that will read a live stream from a radio tuner and output a
> > > *.wav of whatever length I want, and I wrote Python eight years ago for
> > > a similar real time application.  I'd prefer to use R, but I don't know
> > > how to get started.
> > >
> > >
> > > [2] 2018-04-13:
> > > "https://paulromer.net/jupyter-mathematica-and-the-future-of-the-research-paper".
> > > This further cites a similar article in The Atlantic from 2018-04-05:
> > > "www.theatlantic.com/science/archive/2018/04/the-scientific-paper-is-obsolete/556676".



From x|e @end|ng |rom y|hu|@n@me  Thu Oct 11 16:22:41 2018
From: x|e @end|ng |rom y|hu|@n@me (Yihui Xie)
Date: Thu, 11 Oct 2018 09:22:41 -0500
Subject: [R] RMarkdown vignettes v. Jupyter notebooks?
In-Reply-To: <CA+vqiLEOo+cMFggu1mvVFWB0cxPygQg+KSUHKBu7v4W=cGktig@mail.gmail.com>
References: <056b9d58-70ef-b0bc-a195-b1b8c5377a60@effectivedefense.org>
 <CA+vqiLFRhHi+jm4JNwwEd+MOMG-Agzk7p_duKoku8G-CgTBNuQ@mail.gmail.com>
 <248ead90-e4d2-a0da-49b3-93afa850c0b3@gmail.com>
 <CA+vqiLH=U6r7z9ZJ9VSrENMP4pDNYLu05OKcOZe44OWwH9rpwQ@mail.gmail.com>
 <92A266C1-82B9-4D40-B571-251DF6A4A2EB@dcn.davis.ca.us>
 <CA+vqiLEOo+cMFggu1mvVFWB0cxPygQg+KSUHKBu7v4W=cGktig@mail.gmail.com>
Message-ID: <CANROs4eUZJWM2uxwPvwm00-8-ocozq82zyEqyFAtfKCHF0XWoA@mail.gmail.com>

In case Jeff's point was not clear enough: the *.nb.html file is very
similar to *.ipynb and it is very different with other output formats
that R Markdown generates. A .nb.html file is generated alongside .Rmd
when you preview an R Markdown notebook, and it contains both the R
Markdown source document and its output (in a single file). See
Section 3.2.2 of the R Markdown book for more info:
https://bookdown.org/yihui/rmarkdown/notebook.html

But I think you are correct that R Markdown and Jupyter have different emphasis.

Regards,
Yihui
--
https://yihui.name

On Thu, Oct 11, 2018 at 9:14 AM Ista Zahn <istazahn at gmail.com> wrote:
>
> On Thu, Oct 11, 2018 at 10:03 AM Jeff Newmiller
> <jdnewmil at dcn.davis.ca.us> wrote:
> >
> > Ista, you do not seem to be aware of the
> > .nb.html format, which is way easier to share with a non-uswr than an ipynb file yet allows the same in-progress kinds of results to be shared and the source can be extracted easily using a web browser (no server needed).
>
> Yes, I am aware that notebooks can be exported / converted to other
> formats, including .html and .pdf. My point is about emphasis:
> Rmarkdown gives you header arguments and other tools that allow you a
> great deal of control over how the final .html or .pdf file looks. The
> system seems designed to produce .html or .pdf as the final output
> format. Jupyter notebooks on the other hand seem primarily designed to
> be viewed as Jupyter notebooks: they don't give you a log of tools for
> controlling how the converted / exported notebook appears. That's not
> so say there is not conversion / export possible of course...
>
> --Ista
>
> >
> > There is some controversy about this whole notebook approach [1] but I think deciding whether it is right for your purposes is highly subjective.
> >
> > FWIW It took me years to figure out how to even open a Jupyter notebook, so the idea that they should be the gold standard for sharing results seems absurd to me.
> >
> > [1] https://yihui.name/en/2018/09/notebook-war/
> >
> > On October 11, 2018 5:53:29 AM PDT, Ista Zahn <istazahn at gmail.com> wrote:
> > >On Thu, Oct 11, 2018 at 8:36 AM Duncan Murdoch
> > ><murdoch.duncan at gmail.com> wrote:
> > >>
> > >> On 11/10/2018 7:18 AM, Ista Zahn wrote:
> > >> > Hi Spencer,
> > >> >
> > >> > On Thu, Oct 11, 2018 at 5:08 AM Spencer Graves
> > >> > <spencer.graves at effectivedefense.org> wrote:
> > >> >>
> > >> >> Hello:
> > >> >>
> > >> >>
> > >> >>         What are the differences between Jupyter notebooks and
> > >RMarkdown
> > >> >> vignettes?
> > >> >
> > >> > Here are some of the main differences I'm aware of:
> > >> >
> > >> > Rmarkdown files include code and prose. The results produced by the
> > >> > code do not appear in the Rmarkdown file; instead, the file must be
> > >> > processed and typeset to produce a .pdf or .html (etc.) file that
> > >> > includes those results. Jupyter notebooks dispense with with
> > >> > processing step: output is displayed directly in the notebook. That
> > >> > is, a notebook includes code, prose, and results, while an
> > >Rmarkdown
> > >> > file includes only code and prose.
> > >>
> > >> RStudio can display the output mixed in with the text in the editor.
> > >
> > >True, but the _file_ does not include the output. Thus it functions
> > >more as a preview, and will not be visible to you if I email you a
> > >.Rmd file. On the other hand, .ipynb files really do contain the
> > >output; if I email one to you and you open it in Jupyter you will see
> > >the output as well.
> > >
> > >--Ista
> > >
> > >>
> > >> >
> > >> > Rmarkdown allows control over the inclusion of code and results,
> > >and
> > >> > over how the results are displayed via header arguments. There is
> > >no
> > >> > such thing in Jupyter notebooks. Controlling the precise appearance
> > >of
> > >> > a document produced by Jupyter is much more difficult. Going
> > >farther,
> > >> > one can even say that Jupyter notebooks are designed primarily to
> > >be
> > >> > read as Jupyter notebooks; exporting to other formats is kind of an
> > >> > afterthought. In contrast, Rmarkdown is designed to produce the
> > >final
> > >> > readable result in another format (.html or .pdf typically).
> > >> >
> > >> > Rmarkdown is based on markdown, a human readable markup language,
> > >> > Jupyter notebooks are based on JSON, a data interchange format
> > >common
> > >> > on the web. This means that Rmarkdown files can be easily edited
> > >using
> > >> > any text editor you like. The same is not true of Jupyter
> > >notebooks.
> > >> > While you can of course edit the JSON directly, the format is
> > >designed
> > >> > to be written and read by a computer; editing it yourself is not
> > >easy.
> > >> >
> > >> > Rmarkdown is specific to R (I guess there is some basic support in
> > >> > knitr for other languages, but in my experience it never worked
> > >well)
> > >> > while Jupyter notebooks are language agnostic and "kernels" exist
> > >for
> > >> > a large number of programming languages. However, each Jupyter
> > >> > notebook can use only one kernel; you can't easily have R and
> > >Python
> > >> > code in the same notebook.
> > >> >
> > >> > Jupyter notebooks typically run in your browser where the actual
> > >text
> > >> > editing features are somewhat limited. Rmarkdown is typically run
> > >in
> > >> > an editor such as Emacs or Rstudio where editing and project
> > >support
> > >> > is much better and greater customization may be possible. You can
> > >work
> > >> > indirectly with Jupyter notebooks in Emacs
> > >> > (https://github.com/millejoh/emacs-ipython-notebook) and perhaps
> > >other
> > >> > editors as well; this goes some way toward escaping the tyranny of
> > >the
> > >> > browser but is more fragile and difficult to get working compared
> > >to
> > >> > Rmarkdown.
> > >> >
> > >> > Because Jupyter uses a web-based client-server model, it is easy to
> > >> > provide live interactive notebooks on your website (see e.g.,
> > >> > https://github.com/jupyterhub/binderhub). As far as I know this is
> > >not
> > >> > currently possible with Rmarkdown.
> > >>
> > >> There are ways to put Shiny apps into Rmarkdown documents; see
> > >>
> > ><https://beta.rstudioconnect.com/content/2671/Combining-Shiny-R-Markdown.html>.
> > >>   Other than my two notes above, your comments about Rmarkdown seem
> > >> right on the mark.
> > >>
> > >> Duncan Murdoch
> > >>
> > >> >
> > >> >>
> > >> >>
> > >> >>         I'm trying to do real time monitoring of the broadcast
> > >quality of
> > >> >> a radio station, and it seems to me that it may be easier to do
> > >that in
> > >> >> Python than in R.[1]  This led me to a recent post to
> > >> >> "python-list at python.org" that mentioned "Jupyter, Mathematica, and
> > >the
> > >> >> Future of the Research Paper"[2] by Paul Romer, who won the 2018
> > >Nobel
> > >> >> Memorial Prize in Economics only a few days ago.  In brief, this
> > >article
> > >> >> suggests that Jupyter notebooks may replace publication in
> > >refereed
> > >> >> scientific journals as the primary vehicle for sharing scientific
> > >> >> research, because they make it so easy for readers to follow both
> > >the
> > >> >> scientific and computational logic and test their own
> > >modifications.
> > >> >>
> > >> >>
> > >> >>         A "Jupyter Notebook Tutorial: The Definitive Guide"[3]
> > >suggested
> > >> >> I first install Anaconda Navigator.  I got version 1.9.2 of that.
> > >It
> > >> >> opens with options for eight different "applications" including
> > >> >> JupyterLab 0.34.9, Jupyter Notebook 5.6.0, Spyder 3.3.1 (an IDE
> > >for
> > >> >> Python), and RStudio 1.1.456.
> > >> >>
> > >> >>
> > >> >>         This leads to several questions:
> > >> >>
> > >> >>
> > >> >>               1.  In general, what experiences have people had
> > >with
> > >> >> Jupyter Notebooks, Anaconda Navigator, and RMarkdown vignettes in
> > >> >> RStudio, and the similarities and differences?  Do you know any
> > >> >> references that discuss this?
> > >> >
> > >> > I've used both extensively, and noted the differences I've
> > >discovered above.
> > >> >
> > >> >>
> > >> >>
> > >> >>               2.  More specifically, does it make sense to try to
> > >use
> > >> >> RStudio from within Anaconda Navigator, or is one better off using
> > >> >> RStudio as a separate, stand alone application -- or should one
> > >even
> > >> >> abandon RStudio and run R instead from within a Jupyter Notebook?
> > >[I'm
> > >> >> new to this topic, so it's possible that this question doesn't
> > >even make
> > >> >> sense.]
> > >> >
> > >> > The only advantage I can think of to using Rstudio via Anaconda is
> > >> > that you could use conda environments to maintain different
> > >versions
> > >> > or R and/or R packages for different projects.
> > >> >
> > >> > You'll have to weigh the pros and cons to decide whether to switch
> > >> > from Rstudio to Jupyter notebooks. Depending on what you want to do
> > >> > there are both advantages and disadvantages, as discussed above.
> > >> >
> > >> > Finally, I have to give a plug for a couple of related tools that I
> > >> > find very useful.
> > >> >
> > >> > Emacs org-mode https://orgmode.org/ gives you the best of both
> > >worlds:
> > >> > notebooks unconstrained by the browser that can include code in
> > >> > multiple languages, header arguments, excellent export support,
> > >etc.
> > >> > It is superior to both Jupyter and Rmarkdown, except that support
> > >only
> > >> > exists in Emacs.
> > >> >
> > >> > Jupytext (https://github.com/mwouts/jupytext) is another way to
> > >have
> > >> > it all, by allowing you to edit in markdown or Rmarkdown, and
> > >> > auto-generating a notebook and possibly other formats for you. I've
> > >> > only recently started experimenting with it, but so far I like it a
> > >> > lot.
> > >> >
> > >> > Best,
> > >> > Ista
> > >> >>
> > >> >>
> > >> >>         Thanks,
> > >> >>         Spencer Graves
> > >> >>
> > >> >>
> > >> >> [1] If you have ideas for how best to do real time monitoring of
> > >> >> broadcast quality of a radio station, I'd love to hear them.  I
> > >need
> > >> >> software that will do that, preferably something that's free, open
> > >> >> source.  The commercial software I've seen for this is not
> > >adequate for
> > >> >> my purposes, so I'm trying to write my own.  I have a sample
> > >script in
> > >> >> Python that will read a live stream from a radio tuner and output
> > >a
> > >> >> *.wav of whatever length I want, and I wrote Python eight years
> > >ago for
> > >> >> a similar real time application.  I'd prefer to use R, but I don't
> > >know
> > >> >> how to get started.
> > >> >>
> > >> >>
> > >> >> [2] 2018-04-13:
> > >> >>
> > >"https://paulromer.net/jupyter-mathematica-and-the-future-of-the-research-paper".
> > >> >> This further cites a similar article in The Atlantic from
> > >2018-04-05:
> > >> >>
> > >"www.theatlantic.com/science/archive/2018/04/the-scientific-paper-is-obsolete/556676".
> > >> >>
> > >> >> ______________________________________________
> > >> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >> >> https://stat.ethz.ch/mailman/listinfo/r-help
> > >> >> PLEASE do read the posting guide
> > >http://www.R-project.org/posting-guide.html
> > >> >> and provide commented, minimal, self-contained, reproducible code.
> > >> >
> > >> > ______________________________________________
> > >> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >> > https://stat.ethz.ch/mailman/listinfo/r-help
> > >> > PLEASE do read the posting guide
> > >http://www.R-project.org/posting-guide.html
> > >> > and provide commented, minimal, self-contained, reproducible code.
> > >> >
> > >>
> > >
> > >______________________________________________
> > >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >https://stat.ethz.ch/mailman/listinfo/r-help
> > >PLEASE do read the posting guide
> > >http://www.R-project.org/posting-guide.html
> > >and provide commented, minimal, self-contained, reproducible code.
> >
> > --
> > Sent from my phone. Please excuse my brevity.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



From |@t@z@hn @end|ng |rom gm@||@com  Thu Oct 11 16:39:42 2018
From: |@t@z@hn @end|ng |rom gm@||@com (Ista Zahn)
Date: Thu, 11 Oct 2018 10:39:42 -0400
Subject: [R] RMarkdown vignettes v. Jupyter notebooks?
In-Reply-To: <CANROs4eUZJWM2uxwPvwm00-8-ocozq82zyEqyFAtfKCHF0XWoA@mail.gmail.com>
References: <056b9d58-70ef-b0bc-a195-b1b8c5377a60@effectivedefense.org>
 <CA+vqiLFRhHi+jm4JNwwEd+MOMG-Agzk7p_duKoku8G-CgTBNuQ@mail.gmail.com>
 <248ead90-e4d2-a0da-49b3-93afa850c0b3@gmail.com>
 <CA+vqiLH=U6r7z9ZJ9VSrENMP4pDNYLu05OKcOZe44OWwH9rpwQ@mail.gmail.com>
 <92A266C1-82B9-4D40-B571-251DF6A4A2EB@dcn.davis.ca.us>
 <CA+vqiLEOo+cMFggu1mvVFWB0cxPygQg+KSUHKBu7v4W=cGktig@mail.gmail.com>
 <CANROs4eUZJWM2uxwPvwm00-8-ocozq82zyEqyFAtfKCHF0XWoA@mail.gmail.com>
Message-ID: <CA+vqiLFT_vSYcJSid5NUjyrr52iGteQ_7k6O9msR0Yi6FeU=gQ@mail.gmail.com>

On Thu, Oct 11, 2018 at 10:23 AM Yihui Xie <xie at yihui.name> wrote:
>
> In case Jeff's point was not clear enough: the *.nb.html file is very
> similar to *.ipynb and it is very different with other output formats
> that R Markdown generates. A .nb.html file is generated alongside .Rmd
> when you preview an R Markdown notebook, and it contains both the R
> Markdown source document and its output (in a single file). See
> Section 3.2.2 of the R Markdown book for more info:
> https://bookdown.org/yihui/rmarkdown/notebook.html

Thank you Yihui, you have once again rescued me from a state of
ignorance. Much appreciated.

--Ista

>
> But I think you are correct that R Markdown and Jupyter have different emphasis.
>
> Regards,
> Yihui
> --
> https://yihui.name
>
> On Thu, Oct 11, 2018 at 9:14 AM Ista Zahn <istazahn at gmail.com> wrote:
> >
> > On Thu, Oct 11, 2018 at 10:03 AM Jeff Newmiller
> > <jdnewmil at dcn.davis.ca.us> wrote:
> > >
> > > Ista, you do not seem to be aware of the
> > > .nb.html format, which is way easier to share with a non-uswr than an ipynb file yet allows the same in-progress kinds of results to be shared and the source can be extracted easily using a web browser (no server needed).
> >
> > Yes, I am aware that notebooks can be exported / converted to other
> > formats, including .html and .pdf. My point is about emphasis:
> > Rmarkdown gives you header arguments and other tools that allow you a
> > great deal of control over how the final .html or .pdf file looks. The
> > system seems designed to produce .html or .pdf as the final output
> > format. Jupyter notebooks on the other hand seem primarily designed to
> > be viewed as Jupyter notebooks: they don't give you a log of tools for
> > controlling how the converted / exported notebook appears. That's not
> > so say there is not conversion / export possible of course...
> >
> > --Ista
> >
> > >
> > > There is some controversy about this whole notebook approach [1] but I think deciding whether it is right for your purposes is highly subjective.
> > >
> > > FWIW It took me years to figure out how to even open a Jupyter notebook, so the idea that they should be the gold standard for sharing results seems absurd to me.
> > >
> > > [1] https://yihui.name/en/2018/09/notebook-war/
> > >
> > > On October 11, 2018 5:53:29 AM PDT, Ista Zahn <istazahn at gmail.com> wrote:
> > > >On Thu, Oct 11, 2018 at 8:36 AM Duncan Murdoch
> > > ><murdoch.duncan at gmail.com> wrote:
> > > >>
> > > >> On 11/10/2018 7:18 AM, Ista Zahn wrote:
> > > >> > Hi Spencer,
> > > >> >
> > > >> > On Thu, Oct 11, 2018 at 5:08 AM Spencer Graves
> > > >> > <spencer.graves at effectivedefense.org> wrote:
> > > >> >>
> > > >> >> Hello:
> > > >> >>
> > > >> >>
> > > >> >>         What are the differences between Jupyter notebooks and
> > > >RMarkdown
> > > >> >> vignettes?
> > > >> >
> > > >> > Here are some of the main differences I'm aware of:
> > > >> >
> > > >> > Rmarkdown files include code and prose. The results produced by the
> > > >> > code do not appear in the Rmarkdown file; instead, the file must be
> > > >> > processed and typeset to produce a .pdf or .html (etc.) file that
> > > >> > includes those results. Jupyter notebooks dispense with with
> > > >> > processing step: output is displayed directly in the notebook. That
> > > >> > is, a notebook includes code, prose, and results, while an
> > > >Rmarkdown
> > > >> > file includes only code and prose.
> > > >>
> > > >> RStudio can display the output mixed in with the text in the editor.
> > > >
> > > >True, but the _file_ does not include the output. Thus it functions
> > > >more as a preview, and will not be visible to you if I email you a
> > > >.Rmd file. On the other hand, .ipynb files really do contain the
> > > >output; if I email one to you and you open it in Jupyter you will see
> > > >the output as well.
> > > >
> > > >--Ista
> > > >
> > > >>
> > > >> >
> > > >> > Rmarkdown allows control over the inclusion of code and results,
> > > >and
> > > >> > over how the results are displayed via header arguments. There is
> > > >no
> > > >> > such thing in Jupyter notebooks. Controlling the precise appearance
> > > >of
> > > >> > a document produced by Jupyter is much more difficult. Going
> > > >farther,
> > > >> > one can even say that Jupyter notebooks are designed primarily to
> > > >be
> > > >> > read as Jupyter notebooks; exporting to other formats is kind of an
> > > >> > afterthought. In contrast, Rmarkdown is designed to produce the
> > > >final
> > > >> > readable result in another format (.html or .pdf typically).
> > > >> >
> > > >> > Rmarkdown is based on markdown, a human readable markup language,
> > > >> > Jupyter notebooks are based on JSON, a data interchange format
> > > >common
> > > >> > on the web. This means that Rmarkdown files can be easily edited
> > > >using
> > > >> > any text editor you like. The same is not true of Jupyter
> > > >notebooks.
> > > >> > While you can of course edit the JSON directly, the format is
> > > >designed
> > > >> > to be written and read by a computer; editing it yourself is not
> > > >easy.
> > > >> >
> > > >> > Rmarkdown is specific to R (I guess there is some basic support in
> > > >> > knitr for other languages, but in my experience it never worked
> > > >well)
> > > >> > while Jupyter notebooks are language agnostic and "kernels" exist
> > > >for
> > > >> > a large number of programming languages. However, each Jupyter
> > > >> > notebook can use only one kernel; you can't easily have R and
> > > >Python
> > > >> > code in the same notebook.
> > > >> >
> > > >> > Jupyter notebooks typically run in your browser where the actual
> > > >text
> > > >> > editing features are somewhat limited. Rmarkdown is typically run
> > > >in
> > > >> > an editor such as Emacs or Rstudio where editing and project
> > > >support
> > > >> > is much better and greater customization may be possible. You can
> > > >work
> > > >> > indirectly with Jupyter notebooks in Emacs
> > > >> > (https://github.com/millejoh/emacs-ipython-notebook) and perhaps
> > > >other
> > > >> > editors as well; this goes some way toward escaping the tyranny of
> > > >the
> > > >> > browser but is more fragile and difficult to get working compared
> > > >to
> > > >> > Rmarkdown.
> > > >> >
> > > >> > Because Jupyter uses a web-based client-server model, it is easy to
> > > >> > provide live interactive notebooks on your website (see e.g.,
> > > >> > https://github.com/jupyterhub/binderhub). As far as I know this is
> > > >not
> > > >> > currently possible with Rmarkdown.
> > > >>
> > > >> There are ways to put Shiny apps into Rmarkdown documents; see
> > > >>
> > > ><https://beta.rstudioconnect.com/content/2671/Combining-Shiny-R-Markdown.html>.
> > > >>   Other than my two notes above, your comments about Rmarkdown seem
> > > >> right on the mark.
> > > >>
> > > >> Duncan Murdoch
> > > >>
> > > >> >
> > > >> >>
> > > >> >>
> > > >> >>         I'm trying to do real time monitoring of the broadcast
> > > >quality of
> > > >> >> a radio station, and it seems to me that it may be easier to do
> > > >that in
> > > >> >> Python than in R.[1]  This led me to a recent post to
> > > >> >> "python-list at python.org" that mentioned "Jupyter, Mathematica, and
> > > >the
> > > >> >> Future of the Research Paper"[2] by Paul Romer, who won the 2018
> > > >Nobel
> > > >> >> Memorial Prize in Economics only a few days ago.  In brief, this
> > > >article
> > > >> >> suggests that Jupyter notebooks may replace publication in
> > > >refereed
> > > >> >> scientific journals as the primary vehicle for sharing scientific
> > > >> >> research, because they make it so easy for readers to follow both
> > > >the
> > > >> >> scientific and computational logic and test their own
> > > >modifications.
> > > >> >>
> > > >> >>
> > > >> >>         A "Jupyter Notebook Tutorial: The Definitive Guide"[3]
> > > >suggested
> > > >> >> I first install Anaconda Navigator.  I got version 1.9.2 of that.
> > > >It
> > > >> >> opens with options for eight different "applications" including
> > > >> >> JupyterLab 0.34.9, Jupyter Notebook 5.6.0, Spyder 3.3.1 (an IDE
> > > >for
> > > >> >> Python), and RStudio 1.1.456.
> > > >> >>
> > > >> >>
> > > >> >>         This leads to several questions:
> > > >> >>
> > > >> >>
> > > >> >>               1.  In general, what experiences have people had
> > > >with
> > > >> >> Jupyter Notebooks, Anaconda Navigator, and RMarkdown vignettes in
> > > >> >> RStudio, and the similarities and differences?  Do you know any
> > > >> >> references that discuss this?
> > > >> >
> > > >> > I've used both extensively, and noted the differences I've
> > > >discovered above.
> > > >> >
> > > >> >>
> > > >> >>
> > > >> >>               2.  More specifically, does it make sense to try to
> > > >use
> > > >> >> RStudio from within Anaconda Navigator, or is one better off using
> > > >> >> RStudio as a separate, stand alone application -- or should one
> > > >even
> > > >> >> abandon RStudio and run R instead from within a Jupyter Notebook?
> > > >[I'm
> > > >> >> new to this topic, so it's possible that this question doesn't
> > > >even make
> > > >> >> sense.]
> > > >> >
> > > >> > The only advantage I can think of to using Rstudio via Anaconda is
> > > >> > that you could use conda environments to maintain different
> > > >versions
> > > >> > or R and/or R packages for different projects.
> > > >> >
> > > >> > You'll have to weigh the pros and cons to decide whether to switch
> > > >> > from Rstudio to Jupyter notebooks. Depending on what you want to do
> > > >> > there are both advantages and disadvantages, as discussed above.
> > > >> >
> > > >> > Finally, I have to give a plug for a couple of related tools that I
> > > >> > find very useful.
> > > >> >
> > > >> > Emacs org-mode https://orgmode.org/ gives you the best of both
> > > >worlds:
> > > >> > notebooks unconstrained by the browser that can include code in
> > > >> > multiple languages, header arguments, excellent export support,
> > > >etc.
> > > >> > It is superior to both Jupyter and Rmarkdown, except that support
> > > >only
> > > >> > exists in Emacs.
> > > >> >
> > > >> > Jupytext (https://github.com/mwouts/jupytext) is another way to
> > > >have
> > > >> > it all, by allowing you to edit in markdown or Rmarkdown, and
> > > >> > auto-generating a notebook and possibly other formats for you. I've
> > > >> > only recently started experimenting with it, but so far I like it a
> > > >> > lot.
> > > >> >
> > > >> > Best,
> > > >> > Ista
> > > >> >>
> > > >> >>
> > > >> >>         Thanks,
> > > >> >>         Spencer Graves
> > > >> >>
> > > >> >>
> > > >> >> [1] If you have ideas for how best to do real time monitoring of
> > > >> >> broadcast quality of a radio station, I'd love to hear them.  I
> > > >need
> > > >> >> software that will do that, preferably something that's free, open
> > > >> >> source.  The commercial software I've seen for this is not
> > > >adequate for
> > > >> >> my purposes, so I'm trying to write my own.  I have a sample
> > > >script in
> > > >> >> Python that will read a live stream from a radio tuner and output
> > > >a
> > > >> >> *.wav of whatever length I want, and I wrote Python eight years
> > > >ago for
> > > >> >> a similar real time application.  I'd prefer to use R, but I don't
> > > >know
> > > >> >> how to get started.
> > > >> >>
> > > >> >>
> > > >> >> [2] 2018-04-13:
> > > >> >>
> > > >"https://paulromer.net/jupyter-mathematica-and-the-future-of-the-research-paper".
> > > >> >> This further cites a similar article in The Atlantic from
> > > >2018-04-05:
> > > >> >>
> > > >"www.theatlantic.com/science/archive/2018/04/the-scientific-paper-is-obsolete/556676".
> > > >> >>
> > > >> >> ______________________________________________
> > > >> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > >> >> https://stat.ethz.ch/mailman/listinfo/r-help
> > > >> >> PLEASE do read the posting guide
> > > >http://www.R-project.org/posting-guide.html
> > > >> >> and provide commented, minimal, self-contained, reproducible code.
> > > >> >
> > > >> > ______________________________________________
> > > >> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > >> > https://stat.ethz.ch/mailman/listinfo/r-help
> > > >> > PLEASE do read the posting guide
> > > >http://www.R-project.org/posting-guide.html
> > > >> > and provide commented, minimal, self-contained, reproducible code.
> > > >> >
> > > >>
> > > >
> > > >______________________________________________
> > > >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > >https://stat.ethz.ch/mailman/listinfo/r-help
> > > >PLEASE do read the posting guide
> > > >http://www.R-project.org/posting-guide.html
> > > >and provide commented, minimal, self-contained, reproducible code.
> > >
> > > --
> > > Sent from my phone. Please excuse my brevity.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.



From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Thu Oct 11 17:40:50 2018
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Thu, 11 Oct 2018 08:40:50 -0700 (PDT)
Subject: [R] Package updates for new versions
Message-ID: <alpine.LNX.2.20.1810110833340.14179@salmo.appl-ecosys.com>

   This is a question to better my understanding of the relationship between
core R versions and packages that work with them. It's not a complaint or
criticism.

   Installed here is R-3.5.1. There are two packages that allow integration
of R and GRASS that are not yet available for 3.5.1: rpy2 and spgrass7.

   Appreciating that package maintainers have day jobs that take priority
over volunteer package maintenance, I ask only for thoughts on when copies
of those two packages _might_ be available for 3.5.1.

Regards,

Rich



From m@rc_@chw@rtz @end|ng |rom me@com  Thu Oct 11 17:56:16 2018
From: m@rc_@chw@rtz @end|ng |rom me@com (Marc Schwartz)
Date: Thu, 11 Oct 2018 11:56:16 -0400
Subject: [R] Package updates for new versions
In-Reply-To: <alpine.LNX.2.20.1810110833340.14179@salmo.appl-ecosys.com>
References: <alpine.LNX.2.20.1810110833340.14179@salmo.appl-ecosys.com>
Message-ID: <D2513358-6AC7-4A92-8C5C-18FA18788CBC@me.com>

> On Oct 11, 2018, at 11:40 AM, Rich Shepard <rshepard at appl-ecosys.com> wrote:
> 
>  This is a question to better my understanding of the relationship between
> core R versions and packages that work with them. It's not a complaint or
> criticism.
> 
>  Installed here is R-3.5.1. There are two packages that allow integration
> of R and GRASS that are not yet available for 3.5.1: rpy2 and spgrass7.
> 
>  Appreciating that package maintainers have day jobs that take priority
> over volunteer package maintenance, I ask only for thoughts on when copies
> of those two packages _might_ be available for 3.5.1.
> 
> Regards,
> 
> Rich


Rich,

Your best bet is to directly contact the package maintainers, as they would be the definitive source for timeline information on package updates.

They ultimately control that workflow for third party packages, whether on CRAN or otherwise, and can give you some idea of current status and plans.

Regards,

Marc Schwartz



From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Thu Oct 11 18:15:59 2018
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Thu, 11 Oct 2018 09:15:59 -0700 (PDT)
Subject: [R] Package updates for new versions
In-Reply-To: <D2513358-6AC7-4A92-8C5C-18FA18788CBC@me.com>
References: <alpine.LNX.2.20.1810110833340.14179@salmo.appl-ecosys.com>
 <D2513358-6AC7-4A92-8C5C-18FA18788CBC@me.com>
Message-ID: <alpine.LNX.2.20.1810110915050.14179@salmo.appl-ecosys.com>

On Thu, 11 Oct 2018, Marc Schwartz wrote:

> Your best bet is to directly contact the package maintainers, as they
> would be the definitive source for timeline information on package
> updates.

Marc,

   Thank you, I will contact them. Being unfamiliar with standard practice I
asked first.

Best regards,

Rich



From pro|@@m|t@m|tt@| @end|ng |rom gm@||@com  Thu Oct 11 18:42:20 2018
From: pro|@@m|t@m|tt@| @end|ng |rom gm@||@com (Amit Mittal)
Date: Thu, 11 Oct 2018 22:12:20 +0530
Subject: [R] Package updates for new versions
In-Reply-To: <alpine.LNX.2.20.1810110833340.14179@salmo.appl-ecosys.com>
References: <alpine.LNX.2.20.1810110833340.14179@salmo.appl-ecosys.com>
Message-ID: <CAP8zaQBzdCyU=Wut9Cxj0c+4B=ovWfoasXSSx_dZ_VdJ0donYA@mail.gmail.com>

You can contact them as Marc suggested by opening an account at bit
(bitbucket/Atlassian) or git (github) Most prefer strongly to have a
primary at git before going to Atlassian other code checkers so you can
discover the package team there esp if any future development is in the
pipes.

Don't worry about it you dont have to be a founder or developer to have an
account there :)

BR

On Thu, Oct 11, 2018 at 9:11 PM Rich Shepard <rshepard at appl-ecosys.com>
wrote:

>    This is a question to better my understanding of the relationship
> between
> core R versions and packages that work with them. It's not a complaint or
> criticism.
>
>    Installed here is R-3.5.1. There are two packages that allow integration
> of R and GRASS that are not yet available for 3.5.1: rpy2 and spgrass7.
>
>    Appreciating that package maintainers have day jobs that take priority
> over volunteer package maintenance, I ask only for thoughts on when copies
> of those two packages _might_ be available for 3.5.1.
>
> Regards,
>
> Rich
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
-- 

______________________________

Amit Mittal
Pursuing Ph.D. in Finance and Accounting
Indian Institute of Management, Lucknow
Visit my SSRN author page:
http://ssrn.com/author=2665511
* Top 10% Downloaded Author on SSRN
Mob: +91 7525023664

This message has been sent from a mobile device. I may contact you again.

_________________

	[[alternative HTML version deleted]]



From bgunter@4567 @end|ng |rom gm@||@com  Thu Oct 11 18:56:14 2018
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 11 Oct 2018 09:56:14 -0700
Subject: [R] Package updates for new versions
In-Reply-To: <CAP8zaQBzdCyU=Wut9Cxj0c+4B=ovWfoasXSSx_dZ_VdJ0donYA@mail.gmail.com>
References: <alpine.LNX.2.20.1810110833340.14179@salmo.appl-ecosys.com>
 <CAP8zaQBzdCyU=Wut9Cxj0c+4B=ovWfoasXSSx_dZ_VdJ0donYA@mail.gmail.com>
Message-ID: <CAGxFJbSp-+8V=CY9=SsUW-aEb6dgkn2pP0Kf74b0MpVUk1z0KQ@mail.gmail.com>

?maintainer

in R accesses the package description file to provide maintainer info. No
need to fool around with git or other software development repositories.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Thu, Oct 11, 2018 at 9:44 AM Amit Mittal <prof.amit.mittal at gmail.com>
wrote:

> You can contact them as Marc suggested by opening an account at bit
> (bitbucket/Atlassian) or git (github) Most prefer strongly to have a
> primary at git before going to Atlassian other code checkers so you can
> discover the package team there esp if any future development is in the
> pipes.
>
> Don't worry about it you dont have to be a founder or developer to have an
> account there :)
>
> BR
>
> On Thu, Oct 11, 2018 at 9:11 PM Rich Shepard <rshepard at appl-ecosys.com>
> wrote:
>
> >    This is a question to better my understanding of the relationship
> > between
> > core R versions and packages that work with them. It's not a complaint or
> > criticism.
> >
> >    Installed here is R-3.5.1. There are two packages that allow
> integration
> > of R and GRASS that are not yet available for 3.5.1: rpy2 and spgrass7.
> >
> >    Appreciating that package maintainers have day jobs that take priority
> > over volunteer package maintenance, I ask only for thoughts on when
> copies
> > of those two packages _might_ be available for 3.5.1.
> >
> > Regards,
> >
> > Rich
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
> --
>
> ______________________________
>
> Amit Mittal
> Pursuing Ph.D. in Finance and Accounting
> Indian Institute of Management, Lucknow
> Visit my SSRN author page:
> http://ssrn.com/author=2665511
> * Top 10% Downloaded Author on SSRN
> Mob: +91 7525023664
>
> This message has been sent from a mobile device. I may contact you again.
>
> _________________
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From pro|@@m|t@m|tt@| @end|ng |rom gm@||@com  Thu Oct 11 18:59:49 2018
From: pro|@@m|t@m|tt@| @end|ng |rom gm@||@com (Amit Mittal)
Date: Thu, 11 Oct 2018 22:29:49 +0530
Subject: [R] Package updates for new versions
In-Reply-To: <CAGxFJbSp-+8V=CY9=SsUW-aEb6dgkn2pP0Kf74b0MpVUk1z0KQ@mail.gmail.com>
References: <alpine.LNX.2.20.1810110833340.14179@salmo.appl-ecosys.com>
 <CAP8zaQBzdCyU=Wut9Cxj0c+4B=ovWfoasXSSx_dZ_VdJ0donYA@mail.gmail.com>
 <CAGxFJbSp-+8V=CY9=SsUW-aEb6dgkn2pP0Kf74b0MpVUk1z0KQ@mail.gmail.com>
Message-ID: <CAP8zaQBPqyt4itYL1N1+AYbFr9XO2QX3LXNPpH5DbMQ_H3obiQ@mail.gmail.com>

Most developers like to be unavailable on email without genuine queries,
one or the other we tell you to come thru git

On Thu 11 Oct, 2018, 22:26 Bert Gunter, <bgunter.4567 at gmail.com> wrote:

> ?maintainer
>
> in R accesses the package description file to provide maintainer info. No
> need to fool around with git or other software development repositories.
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Thu, Oct 11, 2018 at 9:44 AM Amit Mittal <prof.amit.mittal at gmail.com>
> wrote:
>
>> You can contact them as Marc suggested by opening an account at bit
>> (bitbucket/Atlassian) or git (github) Most prefer strongly to have a
>> primary at git before going to Atlassian other code checkers so you can
>> discover the package team there esp if any future development is in the
>> pipes.
>>
>> Don't worry about it you dont have to be a founder or developer to have an
>> account there :)
>>
>> BR
>>
>> On Thu, Oct 11, 2018 at 9:11 PM Rich Shepard <rshepard at appl-ecosys.com>
>> wrote:
>>
>> >    This is a question to better my understanding of the relationship
>> > between
>> > core R versions and packages that work with them. It's not a complaint
>> or
>> > criticism.
>> >
>> >    Installed here is R-3.5.1. There are two packages that allow
>> integration
>> > of R and GRASS that are not yet available for 3.5.1: rpy2 and spgrass7.
>> >
>> >    Appreciating that package maintainers have day jobs that take
>> priority
>> > over volunteer package maintenance, I ask only for thoughts on when
>> copies
>> > of those two packages _might_ be available for 3.5.1.
>> >
>> > Regards,
>> >
>> > Rich
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>> > http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>> >
>> --
>>
>> ______________________________
>>
>> Amit Mittal
>> Pursuing Ph.D. in Finance and Accounting
>> Indian Institute of Management, Lucknow
>> Visit my SSRN author page:
>> http://ssrn.com/author=2665511
>> * Top 10% Downloaded Author on SSRN
>> Mob: +91 7525023664
>>
>> This message has been sent from a mobile device. I may contact you again.
>>
>> _________________
>>
>>         [[alternative HTML version deleted]]
>
>
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> --

______________________________

Amit Mittal
Pursuing Ph.D. in Finance and Accounting
Indian Institute of Management, Lucknow
Visit my SSRN author page:
http://ssrn.com/author=2665511
* Top 10% Downloaded Author on SSRN
Mob: +91 7525023664

This message has been sent from a mobile device. I may contact you again.

_________________

	[[alternative HTML version deleted]]



From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Thu Oct 11 19:11:58 2018
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Thu, 11 Oct 2018 10:11:58 -0700 (PDT)
Subject: [R] Package updates for new versions
In-Reply-To: <CAP8zaQBzdCyU=Wut9Cxj0c+4B=ovWfoasXSSx_dZ_VdJ0donYA@mail.gmail.com>
References: <alpine.LNX.2.20.1810110833340.14179@salmo.appl-ecosys.com>
 <CAP8zaQBzdCyU=Wut9Cxj0c+4B=ovWfoasXSSx_dZ_VdJ0donYA@mail.gmail.com>
Message-ID: <alpine.LNX.2.20.1810111011250.14179@salmo.appl-ecosys.com>

On Thu, 11 Oct 2018, Amit Mittal wrote:

> You can contact them as Marc suggested by opening an account at bit
> (bitbucket/Atlassian) or git (github) Most prefer strongly to have a
> primary at git before going to Atlassian other code checkers so you can
> discover the package team there esp if any future development is in the
> pipes.

   Thanks, Amit.

Rich



From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Thu Oct 11 19:13:51 2018
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Thu, 11 Oct 2018 10:13:51 -0700 (PDT)
Subject: [R] Package updates for new versions
In-Reply-To: <CAGxFJbSp-+8V=CY9=SsUW-aEb6dgkn2pP0Kf74b0MpVUk1z0KQ@mail.gmail.com>
References: <alpine.LNX.2.20.1810110833340.14179@salmo.appl-ecosys.com>
 <CAP8zaQBzdCyU=Wut9Cxj0c+4B=ovWfoasXSSx_dZ_VdJ0donYA@mail.gmail.com>
 <CAGxFJbSp-+8V=CY9=SsUW-aEb6dgkn2pP0Kf74b0MpVUk1z0KQ@mail.gmail.com>
Message-ID: <alpine.LNX.2.20.1810111012120.14179@salmo.appl-ecosys.com>

On Thu, 11 Oct 2018, Bert Gunter wrote:

> ?maintainer

Bert,

   I found maintainer names from the package entry in the local CRAN repo. I
suspect that the above does not work well with non-installed packages. Am I
wrong?

Regards,

Rich



From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Oct 11 19:41:27 2018
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 11 Oct 2018 10:41:27 -0700
Subject: [R] Package updates for new versions
In-Reply-To: <CAP8zaQBPqyt4itYL1N1+AYbFr9XO2QX3LXNPpH5DbMQ_H3obiQ@mail.gmail.com>
References: <alpine.LNX.2.20.1810110833340.14179@salmo.appl-ecosys.com>
 <CAP8zaQBzdCyU=Wut9Cxj0c+4B=ovWfoasXSSx_dZ_VdJ0donYA@mail.gmail.com>
 <CAGxFJbSp-+8V=CY9=SsUW-aEb6dgkn2pP0Kf74b0MpVUk1z0KQ@mail.gmail.com>
 <CAP8zaQBPqyt4itYL1N1+AYbFr9XO2QX3LXNPpH5DbMQ_H3obiQ@mail.gmail.com>
Message-ID: <00944FC7-BEB7-49DA-A093-04E072733FC7@dcn.davis.ca.us>

I recommend reading the DESCRIPTION file or the CRAN web page for the package if it is on n CRAN, e.g. [1]. While every package on CRAN is supposed to have an email for contact, many developers do prefer alternate communication approaches. Github is NOT used universally though.

[1] https://cran.r-project.org/web/packages/spgrass6/index.html

On October 11, 2018 9:59:49 AM PDT, Amit Mittal <prof.amit.mittal at gmail.com> wrote:
>Most developers like to be unavailable on email without genuine
>queries,
>one or the other we tell you to come thru git
>
>On Thu 11 Oct, 2018, 22:26 Bert Gunter, <bgunter.4567 at gmail.com> wrote:
>
>> ?maintainer
>>
>> in R accesses the package description file to provide maintainer
>info. No
>> need to fool around with git or other software development
>repositories.
>>
>> Bert Gunter
>>
>> "The trouble with having an open mind is that people keep coming
>along and
>> sticking things into it."
>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>
>>
>> On Thu, Oct 11, 2018 at 9:44 AM Amit Mittal
><prof.amit.mittal at gmail.com>
>> wrote:
>>
>>> You can contact them as Marc suggested by opening an account at bit
>>> (bitbucket/Atlassian) or git (github) Most prefer strongly to have a
>>> primary at git before going to Atlassian other code checkers so you
>can
>>> discover the package team there esp if any future development is in
>the
>>> pipes.
>>>
>>> Don't worry about it you dont have to be a founder or developer to
>have an
>>> account there :)
>>>
>>> BR
>>>
>>> On Thu, Oct 11, 2018 at 9:11 PM Rich Shepard
><rshepard at appl-ecosys.com>
>>> wrote:
>>>
>>> >    This is a question to better my understanding of the
>relationship
>>> > between
>>> > core R versions and packages that work with them. It's not a
>complaint
>>> or
>>> > criticism.
>>> >
>>> >    Installed here is R-3.5.1. There are two packages that allow
>>> integration
>>> > of R and GRASS that are not yet available for 3.5.1: rpy2 and
>spgrass7.
>>> >
>>> >    Appreciating that package maintainers have day jobs that take
>>> priority
>>> > over volunteer package maintenance, I ask only for thoughts on
>when
>>> copies
>>> > of those two packages _might_ be available for 3.5.1.
>>> >
>>> > Regards,
>>> >
>>> > Rich
>>> >
>>> > ______________________________________________
>>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> > https://stat.ethz.ch/mailman/listinfo/r-help
>>> > PLEASE do read the posting guide
>>> > http://www.R-project.org/posting-guide.html
>>> > and provide commented, minimal, self-contained, reproducible code.
>>> >
>>> --
>>>
>>> ______________________________
>>>
>>> Amit Mittal
>>> Pursuing Ph.D. in Finance and Accounting
>>> Indian Institute of Management, Lucknow
>>> Visit my SSRN author page:
>>> http://ssrn.com/author=2665511
>>> * Top 10% Downloaded Author on SSRN
>>> Mob: +91 7525023664
>>>
>>> This message has been sent from a mobile device. I may contact you
>again.
>>>
>>> _________________
>>>
>>>         [[alternative HTML version deleted]]
>>
>>
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>> --
>
>______________________________
>
>Amit Mittal
>Pursuing Ph.D. in Finance and Accounting
>Indian Institute of Management, Lucknow
>Visit my SSRN author page:
>http://ssrn.com/author=2665511
>* Top 10% Downloaded Author on SSRN
>Mob: +91 7525023664
>
>This message has been sent from a mobile device. I may contact you
>again.
>
>_________________
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.



From wdun|@p @end|ng |rom t|bco@com  Thu Oct 11 20:08:42 2018
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Thu, 11 Oct 2018 11:08:42 -0700
Subject: [R] Package updates for new versions
In-Reply-To: <00944FC7-BEB7-49DA-A093-04E072733FC7@dcn.davis.ca.us>
References: <alpine.LNX.2.20.1810110833340.14179@salmo.appl-ecosys.com>
 <CAP8zaQBzdCyU=Wut9Cxj0c+4B=ovWfoasXSSx_dZ_VdJ0donYA@mail.gmail.com>
 <CAGxFJbSp-+8V=CY9=SsUW-aEb6dgkn2pP0Kf74b0MpVUk1z0KQ@mail.gmail.com>
 <CAP8zaQBPqyt4itYL1N1+AYbFr9XO2QX3LXNPpH5DbMQ_H3obiQ@mail.gmail.com>
 <00944FC7-BEB7-49DA-A093-04E072733FC7@dcn.davis.ca.us>
Message-ID: <CAF8bMcY3A87zFj6+MBSXVWWLG+VWVSuMPuW9A1Lv1=AoTVJ-aQ@mail.gmail.com>

bug.report(package="thePackage")
will look through the DESCRIPTION file to figure out a good way to report
concerns about a package.

Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Thu, Oct 11, 2018 at 10:41 AM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> I recommend reading the DESCRIPTION file or the CRAN web page for the
> package if it is on n CRAN, e.g. [1]. While every package on CRAN is
> supposed to have an email for contact, many developers do prefer alternate
> communication approaches. Github is NOT used universally though.
>
> [1] https://cran.r-project.org/web/packages/spgrass6/index.html
>
> On October 11, 2018 9:59:49 AM PDT, Amit Mittal <
> prof.amit.mittal at gmail.com> wrote:
> >Most developers like to be unavailable on email without genuine
> >queries,
> >one or the other we tell you to come thru git
> >
> >On Thu 11 Oct, 2018, 22:26 Bert Gunter, <bgunter.4567 at gmail.com> wrote:
> >
> >> ?maintainer
> >>
> >> in R accesses the package description file to provide maintainer
> >info. No
> >> need to fool around with git or other software development
> >repositories.
> >>
> >> Bert Gunter
> >>
> >> "The trouble with having an open mind is that people keep coming
> >along and
> >> sticking things into it."
> >> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> >>
> >>
> >> On Thu, Oct 11, 2018 at 9:44 AM Amit Mittal
> ><prof.amit.mittal at gmail.com>
> >> wrote:
> >>
> >>> You can contact them as Marc suggested by opening an account at bit
> >>> (bitbucket/Atlassian) or git (github) Most prefer strongly to have a
> >>> primary at git before going to Atlassian other code checkers so you
> >can
> >>> discover the package team there esp if any future development is in
> >the
> >>> pipes.
> >>>
> >>> Don't worry about it you dont have to be a founder or developer to
> >have an
> >>> account there :)
> >>>
> >>> BR
> >>>
> >>> On Thu, Oct 11, 2018 at 9:11 PM Rich Shepard
> ><rshepard at appl-ecosys.com>
> >>> wrote:
> >>>
> >>> >    This is a question to better my understanding of the
> >relationship
> >>> > between
> >>> > core R versions and packages that work with them. It's not a
> >complaint
> >>> or
> >>> > criticism.
> >>> >
> >>> >    Installed here is R-3.5.1. There are two packages that allow
> >>> integration
> >>> > of R and GRASS that are not yet available for 3.5.1: rpy2 and
> >spgrass7.
> >>> >
> >>> >    Appreciating that package maintainers have day jobs that take
> >>> priority
> >>> > over volunteer package maintenance, I ask only for thoughts on
> >when
> >>> copies
> >>> > of those two packages _might_ be available for 3.5.1.
> >>> >
> >>> > Regards,
> >>> >
> >>> > Rich
> >>> >
> >>> > ______________________________________________
> >>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> > https://stat.ethz.ch/mailman/listinfo/r-help
> >>> > PLEASE do read the posting guide
> >>> > http://www.R-project.org/posting-guide.html
> >>> > and provide commented, minimal, self-contained, reproducible code.
> >>> >
> >>> --
> >>>
> >>> ______________________________
> >>>
> >>> Amit Mittal
> >>> Pursuing Ph.D. in Finance and Accounting
> >>> Indian Institute of Management, Lucknow
> >>> Visit my SSRN author page:
> >>> http://ssrn.com/author=2665511
> >>> * Top 10% Downloaded Author on SSRN
> >>> Mob: +91 7525023664
> >>>
> >>> This message has been sent from a mobile device. I may contact you
> >again.
> >>>
> >>> _________________
> >>>
> >>>         [[alternative HTML version deleted]]
> >>
> >>
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide
> >>> http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >>>
> >> --
> >
> >______________________________
> >
> >Amit Mittal
> >Pursuing Ph.D. in Finance and Accounting
> >Indian Institute of Management, Lucknow
> >Visit my SSRN author page:
> >http://ssrn.com/author=2665511
> >* Top 10% Downloaded Author on SSRN
> >Mob: +91 7525023664
> >
> >This message has been sent from a mobile device. I may contact you
> >again.
> >
> >_________________
> >
> >       [[alternative HTML version deleted]]
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my phone. Please excuse my brevity.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From ro@||n@ump @end|ng |rom gm@||@com  Fri Oct 12 00:12:09 2018
From: ro@||n@ump @end|ng |rom gm@||@com (roslinazairimah zakaria)
Date: Fri, 12 Oct 2018 06:12:09 +0800
Subject: [R] Finding unique terms
Message-ID: <CANTvJZKf7V4qxr87RsEvQc=nV3mpG+tmvy+8yC2tfjFdonaHFw@mail.gmail.com>

Dear r-users,

I have this data:

structure(list(STUDENT_ID = structure(c(1L, 1L, 1L, 1L, 1L, 1L,
2L, 2L, 2L, 2L, 2L), .Label = c("AA15285", "AA15286"), class = "factor"),
    COURSE_CODE = structure(c(1L, 2L, 5L, 6L, 7L, 8L, 2L, 3L,
    4L, 5L, 6L), .Label = c("BAA1113", "BAA1322", "BAA2113",
    "BAA2513", "BAA2713", "BAA2921", "BAA4273", "BAA4513"), class =
"factor"),
    PO1M = c(155.7, 48.9, 83.2, NA, NA, NA, 48.05, 68.4, 41.65,
    82.35, NA), PO1T = c(180, 70, 100, NA, NA, NA, 70, 100, 60,
    100, NA), PO2M = c(NA, NA, NA, 37, NA, NA, NA, NA, NA, NA,
    41), PO2T = c(NA, NA, NA, 50, NA, NA, NA, NA, NA, NA, 50),
    X = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), X.1 = c(NA,
    NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names = c("STUDENT_ID",
"COURSE_CODE", "PO1M", "PO1T", "PO2M", "PO2T", "X", "X.1"), class =
"data.frame", row.names = c(NA,
-11L))

I want to combine the same Student ID and add up all the values for PO1M,
PO1T,...,PO2T obtained by the same ID.

How do I do that?
Thank you for any help given.

-- 
*Roslinazairimah Zakaria*
*Tel: +609-5492370; Fax. No.+609-5492766*

*Email: roslinazairimah at ump.edu.my <roslinazairimah at ump.edu.my>;
roslinaump at gmail.com <roslinaump at gmail.com>*
Faculty of Industrial Sciences & Technology
University Malaysia Pahang
Lebuhraya Tun Razak, 26300 Gambang, Pahang, Malaysia

	[[alternative HTML version deleted]]



From toth@dene@ @end|ng |rom kogentum@hu  Fri Oct 12 00:29:06 2018
From: toth@dene@ @end|ng |rom kogentum@hu (=?UTF-8?B?RMOpbmVzIFTDs3Ro?=)
Date: Fri, 12 Oct 2018 00:29:06 +0200
Subject: [R] Finding unique terms
In-Reply-To: <CANTvJZKf7V4qxr87RsEvQc=nV3mpG+tmvy+8yC2tfjFdonaHFw@mail.gmail.com>
References: <CANTvJZKf7V4qxr87RsEvQc=nV3mpG+tmvy+8yC2tfjFdonaHFw@mail.gmail.com>
Message-ID: <6a70a2f0-b2df-73a8-bf08-20ef2059dc49@kogentum.hu>



On 10/12/2018 12:12 AM, roslinazairimah zakaria wrote:
> Dear r-users,
> 
> I have this data:
> 
> structure(list(STUDENT_ID = structure(c(1L, 1L, 1L, 1L, 1L, 1L,
> 2L, 2L, 2L, 2L, 2L), .Label = c("AA15285", "AA15286"), class = "factor"),
>      COURSE_CODE = structure(c(1L, 2L, 5L, 6L, 7L, 8L, 2L, 3L,
>      4L, 5L, 6L), .Label = c("BAA1113", "BAA1322", "BAA2113",
>      "BAA2513", "BAA2713", "BAA2921", "BAA4273", "BAA4513"), class =
> "factor"),
>      PO1M = c(155.7, 48.9, 83.2, NA, NA, NA, 48.05, 68.4, 41.65,
>      82.35, NA), PO1T = c(180, 70, 100, NA, NA, NA, 70, 100, 60,
>      100, NA), PO2M = c(NA, NA, NA, 37, NA, NA, NA, NA, NA, NA,
>      41), PO2T = c(NA, NA, NA, 50, NA, NA, NA, NA, NA, NA, 50),
>      X = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), X.1 = c(NA,
>      NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names = c("STUDENT_ID",
> "COURSE_CODE", "PO1M", "PO1T", "PO2M", "PO2T", "X", "X.1"), class =
> "data.frame", row.names = c(NA,
> -11L))
> 
> I want to combine the same Student ID and add up all the values for PO1M,
> PO1T,...,PO2T obtained by the same ID.

dat <- structure(list(STUDENT_ID = structure(c(1L, 1L, 1L, 1L, 1L, 1L,
2L, 2L, 2L, 2L, 2L), .Label = c("AA15285", "AA15286"), class = "factor"),
     COURSE_CODE = structure(c(1L, 2L, 5L, 6L, 7L, 8L, 2L, 3L,
     4L, 5L, 6L), .Label = c("BAA1113", "BAA1322", "BAA2113",
     "BAA2513", "BAA2713", "BAA2921", "BAA4273", "BAA4513"), class =
"factor"),
     PO1M = c(155.7, 48.9, 83.2, NA, NA, NA, 48.05, 68.4, 41.65,
     82.35, NA), PO1T = c(180, 70, 100, NA, NA, NA, 70, 100, 60,
     100, NA), PO2M = c(NA, NA, NA, 37, NA, NA, NA, NA, NA, NA,
     41), PO2T = c(NA, NA, NA, 50, NA, NA, NA, NA, NA, NA, 50),
     X = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), X.1 = c(NA,
     NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names = c("STUDENT_ID",
"COURSE_CODE", "PO1M", "PO1T", "PO2M", "PO2T", "X", "X.1"), class =
"data.frame", row.names = c(NA,
-11L))

# I assume you would like to add up the values with na.rm = TRUE
meanFn <- function(x) mean(x, na.rm = TRUE)

# see ?aggregate
aggregate(dat[, c("PO1M", "PO1T", "PO2M")],
           by = dat["STUDENT_ID"],
           FUN = meanFn)

# if you have largish or large data
library(data.table)
dat2 <- as.data.table(dat)
dat2[, lapply(.SD, meanFn),
      by = STUDENT_ID,
      .SDcols = c("PO1M", "PO1T", "PO2M")]


Regards,
Denes


> 
> How do I do that?
> Thank you for any help given.
>



From ro@||n@ump @end|ng |rom gm@||@com  Fri Oct 12 00:56:23 2018
From: ro@||n@ump @end|ng |rom gm@||@com (roslinazairimah zakaria)
Date: Fri, 12 Oct 2018 06:56:23 +0800
Subject: [R] Finding unique terms
In-Reply-To: <6a70a2f0-b2df-73a8-bf08-20ef2059dc49@kogentum.hu>
References: <CANTvJZKf7V4qxr87RsEvQc=nV3mpG+tmvy+8yC2tfjFdonaHFw@mail.gmail.com>
 <6a70a2f0-b2df-73a8-bf08-20ef2059dc49@kogentum.hu>
Message-ID: <CANTvJZJ44mM8c6UHebXdipvvy=4JcrnE_GEZLtRxnXrV4TtHvA@mail.gmail.com>

Hi Denes,

It works perfectly as I want!

Thanks a lot.

On Fri, Oct 12, 2018 at 6:29 AM D?nes T?th <toth.denes at kogentum.hu> wrote:

>
>
> On 10/12/2018 12:12 AM, roslinazairimah zakaria wrote:
> > Dear r-users,
> >
> > I have this data:
> >
> > structure(list(STUDENT_ID = structure(c(1L, 1L, 1L, 1L, 1L, 1L,
> > 2L, 2L, 2L, 2L, 2L), .Label = c("AA15285", "AA15286"), class = "factor"),
> >      COURSE_CODE = structure(c(1L, 2L, 5L, 6L, 7L, 8L, 2L, 3L,
> >      4L, 5L, 6L), .Label = c("BAA1113", "BAA1322", "BAA2113",
> >      "BAA2513", "BAA2713", "BAA2921", "BAA4273", "BAA4513"), class =
> > "factor"),
> >      PO1M = c(155.7, 48.9, 83.2, NA, NA, NA, 48.05, 68.4, 41.65,
> >      82.35, NA), PO1T = c(180, 70, 100, NA, NA, NA, 70, 100, 60,
> >      100, NA), PO2M = c(NA, NA, NA, 37, NA, NA, NA, NA, NA, NA,
> >      41), PO2T = c(NA, NA, NA, 50, NA, NA, NA, NA, NA, NA, 50),
> >      X = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), X.1 = c(NA,
> >      NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names = c("STUDENT_ID",
> > "COURSE_CODE", "PO1M", "PO1T", "PO2M", "PO2T", "X", "X.1"), class =
> > "data.frame", row.names = c(NA,
> > -11L))
> >
> > I want to combine the same Student ID and add up all the values for PO1M,
> > PO1T,...,PO2T obtained by the same ID.
>
> dat <- structure(list(STUDENT_ID = structure(c(1L, 1L, 1L, 1L, 1L, 1L,
> 2L, 2L, 2L, 2L, 2L), .Label = c("AA15285", "AA15286"), class = "factor"),
>      COURSE_CODE = structure(c(1L, 2L, 5L, 6L, 7L, 8L, 2L, 3L,
>      4L, 5L, 6L), .Label = c("BAA1113", "BAA1322", "BAA2113",
>      "BAA2513", "BAA2713", "BAA2921", "BAA4273", "BAA4513"), class =
> "factor"),
>      PO1M = c(155.7, 48.9, 83.2, NA, NA, NA, 48.05, 68.4, 41.65,
>      82.35, NA), PO1T = c(180, 70, 100, NA, NA, NA, 70, 100, 60,
>      100, NA), PO2M = c(NA, NA, NA, 37, NA, NA, NA, NA, NA, NA,
>      41), PO2T = c(NA, NA, NA, 50, NA, NA, NA, NA, NA, NA, 50),
>      X = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), X.1 = c(NA,
>      NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names = c("STUDENT_ID",
> "COURSE_CODE", "PO1M", "PO1T", "PO2M", "PO2T", "X", "X.1"), class =
> "data.frame", row.names = c(NA,
> -11L))
>
> # I assume you would like to add up the values with na.rm = TRUE
> meanFn <- function(x) mean(x, na.rm = TRUE)
>
> # see ?aggregate
> aggregate(dat[, c("PO1M", "PO1T", "PO2M")],
>            by = dat["STUDENT_ID"],
>            FUN = meanFn)
>
> # if you have largish or large data
> library(data.table)
> dat2 <- as.data.table(dat)
> dat2[, lapply(.SD, meanFn),
>       by = STUDENT_ID,
>       .SDcols = c("PO1M", "PO1T", "PO2M")]
>
>
> Regards,
> Denes
>
>
> >
> > How do I do that?
> > Thank you for any help given.
> >
>


-- 
*Roslinazairimah Zakaria*
*Tel: +609-5492370; Fax. No.+609-5492766*

*Email: roslinazairimah at ump.edu.my <roslinazairimah at ump.edu.my>;
roslinaump at gmail.com <roslinaump at gmail.com>*
Faculty of Industrial Sciences & Technology
University Malaysia Pahang
Lebuhraya Tun Razak, 26300 Gambang, Pahang, Malaysia

	[[alternative HTML version deleted]]



From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Oct 12 04:36:51 2018
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 11 Oct 2018 19:36:51 -0700
Subject: [R] Finding unique terms
In-Reply-To: <CANTvJZJ44mM8c6UHebXdipvvy=4JcrnE_GEZLtRxnXrV4TtHvA@mail.gmail.com>
References: <CANTvJZKf7V4qxr87RsEvQc=nV3mpG+tmvy+8yC2tfjFdonaHFw@mail.gmail.com>
 <6a70a2f0-b2df-73a8-bf08-20ef2059dc49@kogentum.hu>
 <CANTvJZJ44mM8c6UHebXdipvvy=4JcrnE_GEZLtRxnXrV4TtHvA@mail.gmail.com>
Message-ID: <8194FCE8-B018-466D-8C05-B7927A180B98@dcn.davis.ca.us>

You said "add up"... so you did not mean to say that? Denes computed the mean...

On October 11, 2018 3:56:23 PM PDT, roslinazairimah zakaria <roslinaump at gmail.com> wrote:
>Hi Denes,
>
>It works perfectly as I want!
>
>Thanks a lot.
>
>On Fri, Oct 12, 2018 at 6:29 AM D?nes T?th <toth.denes at kogentum.hu>
>wrote:
>
>>
>>
>> On 10/12/2018 12:12 AM, roslinazairimah zakaria wrote:
>> > Dear r-users,
>> >
>> > I have this data:
>> >
>> > structure(list(STUDENT_ID = structure(c(1L, 1L, 1L, 1L, 1L, 1L,
>> > 2L, 2L, 2L, 2L, 2L), .Label = c("AA15285", "AA15286"), class =
>"factor"),
>> >      COURSE_CODE = structure(c(1L, 2L, 5L, 6L, 7L, 8L, 2L, 3L,
>> >      4L, 5L, 6L), .Label = c("BAA1113", "BAA1322", "BAA2113",
>> >      "BAA2513", "BAA2713", "BAA2921", "BAA4273", "BAA4513"), class
>=
>> > "factor"),
>> >      PO1M = c(155.7, 48.9, 83.2, NA, NA, NA, 48.05, 68.4, 41.65,
>> >      82.35, NA), PO1T = c(180, 70, 100, NA, NA, NA, 70, 100, 60,
>> >      100, NA), PO2M = c(NA, NA, NA, 37, NA, NA, NA, NA, NA, NA,
>> >      41), PO2T = c(NA, NA, NA, 50, NA, NA, NA, NA, NA, NA, 50),
>> >      X = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), X.1 = c(NA,
>> >      NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names =
>c("STUDENT_ID",
>> > "COURSE_CODE", "PO1M", "PO1T", "PO2M", "PO2T", "X", "X.1"), class =
>> > "data.frame", row.names = c(NA,
>> > -11L))
>> >
>> > I want to combine the same Student ID and add up all the values for
>PO1M,
>> > PO1T,...,PO2T obtained by the same ID.
>>
>> dat <- structure(list(STUDENT_ID = structure(c(1L, 1L, 1L, 1L, 1L,
>1L,
>> 2L, 2L, 2L, 2L, 2L), .Label = c("AA15285", "AA15286"), class =
>"factor"),
>>      COURSE_CODE = structure(c(1L, 2L, 5L, 6L, 7L, 8L, 2L, 3L,
>>      4L, 5L, 6L), .Label = c("BAA1113", "BAA1322", "BAA2113",
>>      "BAA2513", "BAA2713", "BAA2921", "BAA4273", "BAA4513"), class =
>> "factor"),
>>      PO1M = c(155.7, 48.9, 83.2, NA, NA, NA, 48.05, 68.4, 41.65,
>>      82.35, NA), PO1T = c(180, 70, 100, NA, NA, NA, 70, 100, 60,
>>      100, NA), PO2M = c(NA, NA, NA, 37, NA, NA, NA, NA, NA, NA,
>>      41), PO2T = c(NA, NA, NA, 50, NA, NA, NA, NA, NA, NA, 50),
>>      X = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), X.1 = c(NA,
>>      NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names =
>c("STUDENT_ID",
>> "COURSE_CODE", "PO1M", "PO1T", "PO2M", "PO2T", "X", "X.1"), class =
>> "data.frame", row.names = c(NA,
>> -11L))
>>
>> # I assume you would like to add up the values with na.rm = TRUE
>> meanFn <- function(x) mean(x, na.rm = TRUE)
>>
>> # see ?aggregate
>> aggregate(dat[, c("PO1M", "PO1T", "PO2M")],
>>            by = dat["STUDENT_ID"],
>>            FUN = meanFn)
>>
>> # if you have largish or large data
>> library(data.table)
>> dat2 <- as.data.table(dat)
>> dat2[, lapply(.SD, meanFn),
>>       by = STUDENT_ID,
>>       .SDcols = c("PO1M", "PO1T", "PO2M")]
>>
>>
>> Regards,
>> Denes
>>
>>
>> >
>> > How do I do that?
>> > Thank you for any help given.
>> >
>>

-- 
Sent from my phone. Please excuse my brevity.



From drj|m|emon @end|ng |rom gm@||@com  Fri Oct 12 05:37:09 2018
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Fri, 12 Oct 2018 14:37:09 +1100
Subject: [R] Finding unique terms
In-Reply-To: <8194FCE8-B018-466D-8C05-B7927A180B98@dcn.davis.ca.us>
References: <CANTvJZKf7V4qxr87RsEvQc=nV3mpG+tmvy+8yC2tfjFdonaHFw@mail.gmail.com>
 <6a70a2f0-b2df-73a8-bf08-20ef2059dc49@kogentum.hu>
 <CANTvJZJ44mM8c6UHebXdipvvy=4JcrnE_GEZLtRxnXrV4TtHvA@mail.gmail.com>
 <8194FCE8-B018-466D-8C05-B7927A180B98@dcn.davis.ca.us>
Message-ID: <CA+8X3fVgbHGB7ZWPs4OsaYFN-Q3nY_i0AmT7Pz1nk1-kDxOpHg@mail.gmail.com>

Yes, I thought that as well and had worked out this but didn't send it:

add_Pscores<-function(x) {
return(sum(unlist(x),na.rm=TRUE))
}
by(rzdf[,c("PO1M", "PO1T", "PO2M", "PO2T")],rzdf$STUDENT_ID,FUN=add_Pscores)
rzdf$STUDENT_ID: AA15285
[1] 724.8
------------------------------------------------------------
rzdf$STUDENT_ID: AA15286
[1] 661.45

Jim
On Fri, Oct 12, 2018 at 1:37 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>
> You said "add up"... so you did not mean to say that? Denes computed the mean...
>
> On October 11, 2018 3:56:23 PM PDT, roslinazairimah zakaria <roslinaump at gmail.com> wrote:
> >Hi Denes,
> >
> >It works perfectly as I want!



From choco|d12 @end|ng |rom gm@||@com  Fri Oct 12 05:59:11 2018
From: choco|d12 @end|ng |rom gm@||@com (lily li)
Date: Fri, 12 Oct 2018 11:59:11 +0800
Subject: [R] how to exclude certain keywords in strings
Message-ID: <CAN5afy_vgsm4xPpQO+kUGxsx2TbTL+6NwzDXyEcghBc2dA3C-g@mail.gmail.com>

Hi R users,

I don't know how to extract certain words in strings. For example, if I
have strings like the formats "StationName1_temp.csv",
"StationName2_temp.csv", etc. How to get strings like these "StationName1",
"StationName2", etc? That is to say, I want to exclude the keywords
"_temp.csv", but I could not find a clue online. Thanks for your help.

	[[alternative HTML version deleted]]



From choco|d12 @end|ng |rom gm@||@com  Fri Oct 12 06:03:40 2018
From: choco|d12 @end|ng |rom gm@||@com (lily li)
Date: Fri, 12 Oct 2018 12:03:40 +0800
Subject: [R] how to exclude certain keywords in strings
In-Reply-To: <CAN5afy_vgsm4xPpQO+kUGxsx2TbTL+6NwzDXyEcghBc2dA3C-g@mail.gmail.com>
References: <CAN5afy_vgsm4xPpQO+kUGxsx2TbTL+6NwzDXyEcghBc2dA3C-g@mail.gmail.com>
Message-ID: <CAN5afy8aNQu=Wg7bBMeVd4osC_QDhUzZ+mpyv9iXZj3d-LkU_Q@mail.gmail.com>

I just figured this out, which seems to be a simple question. I just used
gsub("_temp.csv","","StationName1_temp.csv").



> Hi R users,
>
> I don't know how to extract certain words in strings. For example, if I
> have strings like the formats "StationName1_temp.csv",
> "StationName2_temp.csv", etc. How to get strings like these "StationName1",
> "StationName2", etc? That is to say, I want to exclude the keywords
> "_temp.csv", but I could not find a clue online. Thanks for your help.
>

	[[alternative HTML version deleted]]



From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Oct 12 07:26:01 2018
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 11 Oct 2018 22:26:01 -0700
Subject: [R] how to exclude certain keywords in strings
In-Reply-To: <CAN5afy_vgsm4xPpQO+kUGxsx2TbTL+6NwzDXyEcghBc2dA3C-g@mail.gmail.com>
References: <CAN5afy_vgsm4xPpQO+kUGxsx2TbTL+6NwzDXyEcghBc2dA3C-g@mail.gmail.com>
Message-ID: <48B3FD3A-F8D3-428C-921A-06CF70BCA10D@dcn.davis.ca.us>

I cannot imagine you looked very hard... this kind of question pops up all the time on this mailing list. Read the help fur the sub() function... you want to search for something and replace it with an empty string ("").

You should also know by now to post plain text on this mailing list.

On October 11, 2018 8:59:11 PM PDT, lily li <chocold12 at gmail.com> wrote:
>Hi R users,
>
>I don't know how to extract certain words in strings. For example, if I
>have strings like the formats "StationName1_temp.csv",
>"StationName2_temp.csv", etc. How to get strings like these
>"StationName1",
>"StationName2", etc? That is to say, I want to exclude the keywords
>"_temp.csv", but I could not find a clue online. Thanks for your help.
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.



From toth@dene@ @end|ng |rom kogentum@hu  Fri Oct 12 08:58:15 2018
From: toth@dene@ @end|ng |rom kogentum@hu (=?UTF-8?B?RMOpbmVzIFTDs3Ro?=)
Date: Fri, 12 Oct 2018 08:58:15 +0200
Subject: [R] Finding unique terms
In-Reply-To: <8194FCE8-B018-466D-8C05-B7927A180B98@dcn.davis.ca.us>
References: <CANTvJZKf7V4qxr87RsEvQc=nV3mpG+tmvy+8yC2tfjFdonaHFw@mail.gmail.com>
 <6a70a2f0-b2df-73a8-bf08-20ef2059dc49@kogentum.hu>
 <CANTvJZJ44mM8c6UHebXdipvvy=4JcrnE_GEZLtRxnXrV4TtHvA@mail.gmail.com>
 <8194FCE8-B018-466D-8C05-B7927A180B98@dcn.davis.ca.us>
Message-ID: <4d607934-c087-9799-65cb-86b29b52a4eb@kogentum.hu>



On 10/12/2018 04:36 AM, Jeff Newmiller wrote:
> You said "add up"... so you did not mean to say that? Denes computed the mean...

Nice catch, Jeff. Of course I wanted to use 'sum' instead of 'mean'.


> 
> On October 11, 2018 3:56:23 PM PDT, roslinazairimah zakaria <roslinaump at gmail.com> wrote:
>> Hi Denes,
>>
>> It works perfectly as I want!
>>
>> Thanks a lot.
>>
>> On Fri, Oct 12, 2018 at 6:29 AM D?nes T?th <toth.denes at kogentum.hu>
>> wrote:
>>
>>>
>>>
>>> On 10/12/2018 12:12 AM, roslinazairimah zakaria wrote:
>>>> Dear r-users,
>>>>
>>>> I have this data:
>>>>
>>>> structure(list(STUDENT_ID = structure(c(1L, 1L, 1L, 1L, 1L, 1L,
>>>> 2L, 2L, 2L, 2L, 2L), .Label = c("AA15285", "AA15286"), class =
>> "factor"),
>>>>       COURSE_CODE = structure(c(1L, 2L, 5L, 6L, 7L, 8L, 2L, 3L,
>>>>       4L, 5L, 6L), .Label = c("BAA1113", "BAA1322", "BAA2113",
>>>>       "BAA2513", "BAA2713", "BAA2921", "BAA4273", "BAA4513"), class
>> =
>>>> "factor"),
>>>>       PO1M = c(155.7, 48.9, 83.2, NA, NA, NA, 48.05, 68.4, 41.65,
>>>>       82.35, NA), PO1T = c(180, 70, 100, NA, NA, NA, 70, 100, 60,
>>>>       100, NA), PO2M = c(NA, NA, NA, 37, NA, NA, NA, NA, NA, NA,
>>>>       41), PO2T = c(NA, NA, NA, 50, NA, NA, NA, NA, NA, NA, 50),
>>>>       X = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), X.1 = c(NA,
>>>>       NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names =
>> c("STUDENT_ID",
>>>> "COURSE_CODE", "PO1M", "PO1T", "PO2M", "PO2T", "X", "X.1"), class =
>>>> "data.frame", row.names = c(NA,
>>>> -11L))
>>>>
>>>> I want to combine the same Student ID and add up all the values for
>> PO1M,
>>>> PO1T,...,PO2T obtained by the same ID.
>>>
>>> dat <- structure(list(STUDENT_ID = structure(c(1L, 1L, 1L, 1L, 1L,
>> 1L,
>>> 2L, 2L, 2L, 2L, 2L), .Label = c("AA15285", "AA15286"), class =
>> "factor"),
>>>       COURSE_CODE = structure(c(1L, 2L, 5L, 6L, 7L, 8L, 2L, 3L,
>>>       4L, 5L, 6L), .Label = c("BAA1113", "BAA1322", "BAA2113",
>>>       "BAA2513", "BAA2713", "BAA2921", "BAA4273", "BAA4513"), class =
>>> "factor"),
>>>       PO1M = c(155.7, 48.9, 83.2, NA, NA, NA, 48.05, 68.4, 41.65,
>>>       82.35, NA), PO1T = c(180, 70, 100, NA, NA, NA, 70, 100, 60,
>>>       100, NA), PO2M = c(NA, NA, NA, 37, NA, NA, NA, NA, NA, NA,
>>>       41), PO2T = c(NA, NA, NA, 50, NA, NA, NA, NA, NA, NA, 50),
>>>       X = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), X.1 = c(NA,
>>>       NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names =
>> c("STUDENT_ID",
>>> "COURSE_CODE", "PO1M", "PO1T", "PO2M", "PO2T", "X", "X.1"), class =
>>> "data.frame", row.names = c(NA,
>>> -11L))
>>>
>>> # I assume you would like to add up the values with na.rm = TRUE
>>> meanFn <- function(x) mean(x, na.rm = TRUE)
>>>
>>> # see ?aggregate
>>> aggregate(dat[, c("PO1M", "PO1T", "PO2M")],
>>>             by = dat["STUDENT_ID"],
>>>             FUN = meanFn)
>>>
>>> # if you have largish or large data
>>> library(data.table)
>>> dat2 <- as.data.table(dat)
>>> dat2[, lapply(.SD, meanFn),
>>>        by = STUDENT_ID,
>>>        .SDcols = c("PO1M", "PO1T", "PO2M")]
>>>
>>>
>>> Regards,
>>> Denes
>>>
>>>
>>>>
>>>> How do I do that?
>>>> Thank you for any help given.
>>>>
>>>
>



From toth@dene@ @end|ng |rom kogentum@hu  Fri Oct 12 09:03:32 2018
From: toth@dene@ @end|ng |rom kogentum@hu (=?UTF-8?B?VMOzdGggRMOpbmVz?=)
Date: Fri, 12 Oct 2018 09:03:32 +0200
Subject: [R] Finding unique terms
In-Reply-To: <4d607934-c087-9799-65cb-86b29b52a4eb@kogentum.hu>
References: <CANTvJZKf7V4qxr87RsEvQc=nV3mpG+tmvy+8yC2tfjFdonaHFw@mail.gmail.com>
 <6a70a2f0-b2df-73a8-bf08-20ef2059dc49@kogentum.hu>
 <CANTvJZJ44mM8c6UHebXdipvvy=4JcrnE_GEZLtRxnXrV4TtHvA@mail.gmail.com>
 <8194FCE8-B018-466D-8C05-B7927A180B98@dcn.davis.ca.us>
 <4d607934-c087-9799-65cb-86b29b52a4eb@kogentum.hu>
Message-ID: <3ba324df-6c05-e59c-09cc-a02e5a3614a2@kogentum.hu>



On 10/12/2018 08:58 AM, D?nes T?th wrote:
> 
> 
> On 10/12/2018 04:36 AM, Jeff Newmiller wrote:
>> You said "add up"... so you did not mean to say that? Denes computed 
>> the mean...
> 
> Nice catch, Jeff. Of course I wanted to use 'sum' instead of 'mean'.

Oh, and one more note: If you have NAs in your columns, 'sum' is rarely 
the aggregate statistic that you are after. Probably this is why my 
subconscious statistician suggested 'mean'.

> 
> 
>>
>> On October 11, 2018 3:56:23 PM PDT, roslinazairimah zakaria 
>> <roslinaump at gmail.com> wrote:
>>> Hi Denes,
>>>
>>> It works perfectly as I want!
>>>
>>> Thanks a lot.
>>>
>>> On Fri, Oct 12, 2018 at 6:29 AM D?nes T?th <toth.denes at kogentum.hu>
>>> wrote:
>>>
>>>>
>>>>
>>>> On 10/12/2018 12:12 AM, roslinazairimah zakaria wrote:
>>>>> Dear r-users,
>>>>>
>>>>> I have this data:
>>>>>
>>>>> structure(list(STUDENT_ID = structure(c(1L, 1L, 1L, 1L, 1L, 1L,
>>>>> 2L, 2L, 2L, 2L, 2L), .Label = c("AA15285", "AA15286"), class =
>>> "factor"),
>>>>>       COURSE_CODE = structure(c(1L, 2L, 5L, 6L, 7L, 8L, 2L, 3L,
>>>>>       4L, 5L, 6L), .Label = c("BAA1113", "BAA1322", "BAA2113",
>>>>>       "BAA2513", "BAA2713", "BAA2921", "BAA4273", "BAA4513"), class
>>> =
>>>>> "factor"),
>>>>>       PO1M = c(155.7, 48.9, 83.2, NA, NA, NA, 48.05, 68.4, 41.65,
>>>>>       82.35, NA), PO1T = c(180, 70, 100, NA, NA, NA, 70, 100, 60,
>>>>>       100, NA), PO2M = c(NA, NA, NA, 37, NA, NA, NA, NA, NA, NA,
>>>>>       41), PO2T = c(NA, NA, NA, 50, NA, NA, NA, NA, NA, NA, 50),
>>>>>       X = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), X.1 = c(NA,
>>>>>       NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names =
>>> c("STUDENT_ID",
>>>>> "COURSE_CODE", "PO1M", "PO1T", "PO2M", "PO2T", "X", "X.1"), class =
>>>>> "data.frame", row.names = c(NA,
>>>>> -11L))
>>>>>
>>>>> I want to combine the same Student ID and add up all the values for
>>> PO1M,
>>>>> PO1T,...,PO2T obtained by the same ID.
>>>>
>>>> dat <- structure(list(STUDENT_ID = structure(c(1L, 1L, 1L, 1L, 1L,
>>> 1L,
>>>> 2L, 2L, 2L, 2L, 2L), .Label = c("AA15285", "AA15286"), class =
>>> "factor"),
>>>>       COURSE_CODE = structure(c(1L, 2L, 5L, 6L, 7L, 8L, 2L, 3L,
>>>>       4L, 5L, 6L), .Label = c("BAA1113", "BAA1322", "BAA2113",
>>>>       "BAA2513", "BAA2713", "BAA2921", "BAA4273", "BAA4513"), class =
>>>> "factor"),
>>>>       PO1M = c(155.7, 48.9, 83.2, NA, NA, NA, 48.05, 68.4, 41.65,
>>>>       82.35, NA), PO1T = c(180, 70, 100, NA, NA, NA, 70, 100, 60,
>>>>       100, NA), PO2M = c(NA, NA, NA, 37, NA, NA, NA, NA, NA, NA,
>>>>       41), PO2T = c(NA, NA, NA, 50, NA, NA, NA, NA, NA, NA, 50),
>>>>       X = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), X.1 = c(NA,
>>>>       NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names =
>>> c("STUDENT_ID",
>>>> "COURSE_CODE", "PO1M", "PO1T", "PO2M", "PO2T", "X", "X.1"), class =
>>>> "data.frame", row.names = c(NA,
>>>> -11L))
>>>>
>>>> # I assume you would like to add up the values with na.rm = TRUE
>>>> meanFn <- function(x) mean(x, na.rm = TRUE)
>>>>
>>>> # see ?aggregate
>>>> aggregate(dat[, c("PO1M", "PO1T", "PO2M")],
>>>>             by = dat["STUDENT_ID"],
>>>>             FUN = meanFn)
>>>>
>>>> # if you have largish or large data
>>>> library(data.table)
>>>> dat2 <- as.data.table(dat)
>>>> dat2[, lapply(.SD, meanFn),
>>>>        by = STUDENT_ID,
>>>>        .SDcols = c("PO1M", "PO1T", "PO2M")]
>>>>
>>>>
>>>> Regards,
>>>> Denes
>>>>
>>>>
>>>>>
>>>>> How do I do that?
>>>>> Thank you for any help given.
>>>>>
>>>>
>>

-- 
Dr. T?th D?nes ?gyvezet?
Kogentum Kft.
Tel.: 06-30-2583723
Web: www.kogentum.hu



From @|exnerdy @end|ng |rom hotm@||@com  Fri Oct 12 10:31:44 2018
From: @|exnerdy @end|ng |rom hotm@||@com (Alexander Nervedi)
Date: Fri, 12 Oct 2018 08:31:44 +0000
Subject: [R] install issue with survey package?
Message-ID: <BM1PR01MB2577DED744E7A949873985B8BBE20@BM1PR01MB2577.INDPRD01.PROD.OUTLOOK.COM>

Have been trying to run a few packages with dependency on the survey package (e.g. twang) and have run into trouble that I am not sure how to resolve. Any help would be appreciated, the code (and error messages) are below:

--- R log begins ---
> install.packages("survey")
Installing package into ?D:/Users/Al Nerdi/Documents/R/win-library/3.5?
(as ?lib? is unspecified)

  There is a binary version available but the source version is later:
       binary source needs_compilation
survey 3.33-2   3.34             FALSE

installing the source package ?survey?

trying URL 'https://cran.rstudio.com/src/contrib/survey_3.34.tar.gz'
Content type 'application/x-gzip' length 1476949 bytes (1.4 MB)
downloaded 1.4 MB

Warning: invalid package 'D:\Users\Al'
Warning: invalid package 'Nerdi\AppData\Local\Temp\RtmpU3AmrY/downloaded_packages/survey_3.34.tar.gz'
Error: ERROR: no packages specified
In R CMD INSTALL
Warning in install.packages :
  installation of package ?survey? had non-zero exit status

The downloaded source packages are in
?D:\Users\Al Nerdi\AppData\Local\Temp\RtmpU3AmrY\downloaded_packages?

> install.packages("twang")
Installing package into ?D:/Users/Al Nerdi/Documents/R/win-library/3.5?
(as ?lib? is unspecified)
also installing the dependencies ?gbm?, ?survey?


  There is a binary version available but the source version is later:
       binary source needs_compilation
survey 3.33-2   3.34             FALSE

trying URL 'https://cran.rstudio.com/bin/windows/contrib/3.5/gbm_2.1.4.zip'
Content type 'application/zip' length 1094087 bytes (1.0 MB)
downloaded 1.0 MB

trying URL 'https://cran.rstudio.com/bin/windows/contrib/3.5/twang_1.5.zip'
Content type 'application/zip' length 1516991 bytes (1.4 MB)
downloaded 1.4 MB

package ?gbm? successfully unpacked and MD5 sums checked
package ?twang? successfully unpacked and MD5 sums checked

The downloaded binary packages are in
D:\Users\Al Nerdi\AppData\Local\Temp\RtmpU3AmrY\downloaded_packages
installing the source package ?survey?

trying URL 'https://cran.rstudio.com/src/contrib/survey_3.34.tar.gz'
Content type 'application/x-gzip' length 1476949 bytes (1.4 MB)
downloaded 1.4 MB

Warning: invalid package 'D:\Users\Al'
Warning: invalid package 'Nerdi\AppData\Local\Temp\RtmpU3AmrY/downloaded_packages/survey_3.34.tar.gz'
Error: ERROR: no packages specified
In R CMD INSTALL
Warning in install.packages :
  installation of package ?survey? had non-zero exit status

The downloaded source packages are in
?D:\Users\Al Nerdi\AppData\Local\Temp\RtmpU3AmrY\downloaded_packages?
> library(twang)
Loading required package: gbm
Loaded gbm 2.1.4
Error: package ?survey? required by ?twang? could not be found

> R.Version()
$`platform`
[1] "x86_64-w64-mingw32"

$arch
[1] "x86_64"

$os
[1] "mingw32"

$system
[1] "x86_64, mingw32"

$status
[1] ""

$major
[1] "3"

$minor
[1] "5.1"

$year
[1] "2018"

$month
[1] "07"

$day
[1] "02"

$`svn rev`
[1] "74947"

$language
[1] "R"

$version.string
[1] "R version 3.5.1 (2018-07-02)"

$nickname
[1] "Feather Spray"

--- R log ends ---

I am not sure how to address this. Any suggestions will be great!

Grazie,

Al Nerdi

	[[alternative HTML version deleted]]



From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Fri Oct 12 12:28:22 2018
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Fri, 12 Oct 2018 11:28:22 +0100
Subject: [R] how to exclude certain keywords in strings
In-Reply-To: <CAN5afy8aNQu=Wg7bBMeVd4osC_QDhUzZ+mpyv9iXZj3d-LkU_Q@mail.gmail.com>
References: <CAN5afy_vgsm4xPpQO+kUGxsx2TbTL+6NwzDXyEcghBc2dA3C-g@mail.gmail.com>
 <CAN5afy8aNQu=Wg7bBMeVd4osC_QDhUzZ+mpyv9iXZj3d-LkU_Q@mail.gmail.com>
Message-ID: <a22bec9b-ef43-9192-0419-508f2fa46894@sapo.pt>

Hello,

If you want to remove everything from the last underscore to the end of 
the string, this regex is better.
Note that you don't need gsub, 'g' is to replace all matches.

x <- c("StationName1_temp.csv", "Station_Name1_temp.csv", 
"StationName2_temp.csv")

sub("_[^_]*$", "", x)
#[1] "StationName1"  "Station_Name1" "StationName2"


Hope this helps,

Rui Barradas

?s 05:03 de 12/10/2018, lily li escreveu:
> I just figured this out, which seems to be a simple question. I just used
> gsub("_temp.csv","","StationName1_temp.csv").
> 
> 
> 
>> Hi R users,
>>
>> I don't know how to extract certain words in strings. For example, if I
>> have strings like the formats "StationName1_temp.csv",
>> "StationName2_temp.csv", etc. How to get strings like these "StationName1",
>> "StationName2", etc? That is to say, I want to exclude the keywords
>> "_temp.csv", but I could not find a clue online. Thanks for your help.
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>



From ||@t@ @end|ng |rom dewey@myzen@co@uk  Fri Oct 12 13:33:15 2018
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Fri, 12 Oct 2018 12:33:15 +0100
Subject: [R] install issue with survey package?
In-Reply-To: <BM1PR01MB2577DED744E7A949873985B8BBE20@BM1PR01MB2577.INDPRD01.PROD.OUTLOOK.COM>
References: <BM1PR01MB2577DED744E7A949873985B8BBE20@BM1PR01MB2577.INDPRD01.PROD.OUTLOOK.COM>
Message-ID: <0d6b2449-6547-4332-8405-c24a20f1f079@dewey.myzen.co.uk>

Dear Al

It looks like the problem may be the embedded space in Al Nerdi

What happens if you manually download the tar.gz file, put it somewhere 
convenient and then from the commend line run

R CMD INSTALL survey_3.34.tar.gz

You will need to make sure R is on your path first

Michael

On 12/10/2018 09:31, Alexander Nervedi wrote:
> Have been trying to run a few packages with dependency on the survey package (e.g. twang) and have run into trouble that I am not sure how to resolve. Any help would be appreciated, the code (and error messages) are below:
> 
> --- R log begins ---
>> install.packages("survey")
> Installing package into ?D:/Users/Al Nerdi/Documents/R/win-library/3.5?
> (as ?lib? is unspecified)
> 
>    There is a binary version available but the source version is later:
>         binary source needs_compilation
> survey 3.33-2   3.34             FALSE
> 
> installing the source package ?survey?
> 
> trying URL 'https://cran.rstudio.com/src/contrib/survey_3.34.tar.gz'
> Content type 'application/x-gzip' length 1476949 bytes (1.4 MB)
> downloaded 1.4 MB
> 
> Warning: invalid package 'D:\Users\Al'
> Warning: invalid package 'Nerdi\AppData\Local\Temp\RtmpU3AmrY/downloaded_packages/survey_3.34.tar.gz'
> Error: ERROR: no packages specified
> In R CMD INSTALL
> Warning in install.packages :
>    installation of package ?survey? had non-zero exit status
> 
> The downloaded source packages are in
> ?D:\Users\Al Nerdi\AppData\Local\Temp\RtmpU3AmrY\downloaded_packages?
> 
>> install.packages("twang")
> Installing package into ?D:/Users/Al Nerdi/Documents/R/win-library/3.5?
> (as ?lib? is unspecified)
> also installing the dependencies ?gbm?, ?survey?
> 
> 
>    There is a binary version available but the source version is later:
>         binary source needs_compilation
> survey 3.33-2   3.34             FALSE
> 
> trying URL 'https://cran.rstudio.com/bin/windows/contrib/3.5/gbm_2.1.4.zip'
> Content type 'application/zip' length 1094087 bytes (1.0 MB)
> downloaded 1.0 MB
> 
> trying URL 'https://cran.rstudio.com/bin/windows/contrib/3.5/twang_1.5.zip'
> Content type 'application/zip' length 1516991 bytes (1.4 MB)
> downloaded 1.4 MB
> 
> package ?gbm? successfully unpacked and MD5 sums checked
> package ?twang? successfully unpacked and MD5 sums checked
> 
> The downloaded binary packages are in
> D:\Users\Al Nerdi\AppData\Local\Temp\RtmpU3AmrY\downloaded_packages
> installing the source package ?survey?
> 
> trying URL 'https://cran.rstudio.com/src/contrib/survey_3.34.tar.gz'
> Content type 'application/x-gzip' length 1476949 bytes (1.4 MB)
> downloaded 1.4 MB
> 
> Warning: invalid package 'D:\Users\Al'
> Warning: invalid package 'Nerdi\AppData\Local\Temp\RtmpU3AmrY/downloaded_packages/survey_3.34.tar.gz'
> Error: ERROR: no packages specified
> In R CMD INSTALL
> Warning in install.packages :
>    installation of package ?survey? had non-zero exit status
> 
> The downloaded source packages are in
> ?D:\Users\Al Nerdi\AppData\Local\Temp\RtmpU3AmrY\downloaded_packages?
>> library(twang)
> Loading required package: gbm
> Loaded gbm 2.1.4
> Error: package ?survey? required by ?twang? could not be found
> 
>> R.Version()
> $`platform`
> [1] "x86_64-w64-mingw32"
> 
> $arch
> [1] "x86_64"
> 
> $os
> [1] "mingw32"
> 
> $system
> [1] "x86_64, mingw32"
> 
> $status
> [1] ""
> 
> $major
> [1] "3"
> 
> $minor
> [1] "5.1"
> 
> $year
> [1] "2018"
> 
> $month
> [1] "07"
> 
> $day
> [1] "02"
> 
> $`svn rev`
> [1] "74947"
> 
> $language
> [1] "R"
> 
> $version.string
> [1] "R version 3.5.1 (2018-07-02)"
> 
> $nickname
> [1] "Feather Spray"
> 
> --- R log ends ---
> 
> I am not sure how to address this. Any suggestions will be great!
> 
> Grazie,
> 
> Al Nerdi
> 
> 	[[alternative HTML version deleted]]
> 
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html



From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Fri Oct 12 16:06:44 2018
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Fri, 12 Oct 2018 07:06:44 -0700 (PDT)
Subject: [R] Package updates for new versions
In-Reply-To: <44725a49-5b0d-e990-bc7a-5c5a020ebb3e@gmail.com>
References: <alpine.LNX.2.20.1810110833340.14179@salmo.appl-ecosys.com>
 <44725a49-5b0d-e990-bc7a-5c5a020ebb3e@gmail.com>
Message-ID: <alpine.LNX.2.20.1810120705250.4941@salmo.appl-ecosys.com>

On Fri, 12 Oct 2018, Micha Silver wrote:

> Just to clarify, I believe that rpy2 is a *python* package.

Micha,

   So I learned yesterday.

Thanks very much,

Rich



From |eder|co@c@|bo|| @end|ng |rom ku|euven@be  Fri Oct 12 17:00:11 2018
From: |eder|co@c@|bo|| @end|ng |rom ku|euven@be (Federico Calboli)
Date: Fri, 12 Oct 2018 15:00:11 +0000
Subject: [R] keeping github packages up to date
Message-ID: <FE0C85C4-7749-4545-8A91-3C8B1DAD0A0B@kuleuven.be>

Hi all,

more and more people (sadly) are putting stuff on github, with either no CRAN upload or an package.  So I am stuck with using devtools and install_github.

I know how to keep stuff from CRAN updated ? how do I do the same for github stuff?

Cheers

F


--
Federico Calboli
LBEG - Laboratory of Biodiversity and Evolutionary Genomics
Charles Deberiotstraat 32 box 2439
3000 Leuven
+32 16 32 87 67






From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Oct 12 17:32:35 2018
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Fri, 12 Oct 2018 08:32:35 -0700
Subject: [R] keeping github packages up to date
In-Reply-To: <FE0C85C4-7749-4545-8A91-3C8B1DAD0A0B@kuleuven.be>
References: <FE0C85C4-7749-4545-8A91-3C8B1DAD0A0B@kuleuven.be>
Message-ID: <99CDC2BA-A667-4D4A-A046-7A81160DA277@dcn.davis.ca.us>

Reinstall the updated versions however you originally did. The "obstacles" imposed by CRAN that cause package developers to forgo sharing there came about to confirm documentation, cross-platform compatibility and dependencies. With no referee enforcing such care in the environments you are pulling from, you cannot expect automated dependency management to work. You are riding a mustang in the Wild West... so have fun while it lasts... eventually bit-rot will break your library unless you freeze it (use packrat and keep old versions of R?).

On October 12, 2018 8:00:11 AM PDT, Federico Calboli <federico.calboli at kuleuven.be> wrote:
>Hi all,
>
>more and more people (sadly) are putting stuff on github, with either
>no CRAN upload or an package.  So I am stuck with using devtools and
>install_github.
>
>I know how to keep stuff from CRAN updated ? how do I do the same for
>github stuff?
>
>Cheers
>
>F
>
>
>--
>Federico Calboli
>LBEG - Laboratory of Biodiversity and Evolutionary Genomics
>Charles Deberiotstraat 32 box 2439
>3000 Leuven
>+32 16 32 87 67
>
>
>
>
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.



From pro|@@m|t@m|tt@| @end|ng |rom gm@||@com  Fri Oct 12 18:00:49 2018
From: pro|@@m|t@m|tt@| @end|ng |rom gm@||@com (Amit Mittal)
Date: Fri, 12 Oct 2018 21:30:49 +0530
Subject: [R] keeping github packages up to date
In-Reply-To: <99CDC2BA-A667-4D4A-A046-7A81160DA277@dcn.davis.ca.us>
References: <FE0C85C4-7749-4545-8A91-3C8B1DAD0A0B@kuleuven.be>
 <99CDC2BA-A667-4D4A-A046-7A81160DA277@dcn.davis.ca.us>
Message-ID: <CAP8zaQA5Na_SMCq2kub+wNe+HVwE28YEFQxwJse_nZQr_SdFjA@mail.gmail.com>

I'd just check with a strip script checking for updates with devtools,
maybe every week and maybe when a mail pops from the git team, if
subscribed (pretty powerful about merges into the final software )

BR

On Fri 12 Oct, 2018, 21:03 Jeff Newmiller, <jdnewmil at dcn.davis.ca.us> wrote:

> Reinstall the updated versions however you originally did. The "obstacles"
> imposed by CRAN that cause package developers to forgo sharing there came
> about to confirm documentation, cross-platform compatibility and
> dependencies. With no referee enforcing such care in the environments you
> are pulling from, you cannot expect automated dependency management to
> work. You are riding a mustang in the Wild West... so have fun while it
> lasts... eventually bit-rot will break your library unless you freeze it
> (use packrat and keep old versions of R?).
>
> On October 12, 2018 8:00:11 AM PDT, Federico Calboli <
> federico.calboli at kuleuven.be> wrote:
> >Hi all,
> >
> >more and more people (sadly) are putting stuff on github, with either
> >no CRAN upload or an package.  So I am stuck with using devtools and
> >install_github.
> >
> >I know how to keep stuff from CRAN updated ? how do I do the same for
> >github stuff?
> >
> >Cheers
> >
> >F
> >
> >
> >--
> >Federico Calboli
> >LBEG - Laboratory of Biodiversity and Evolutionary Genomics
> >Charles Deberiotstraat 32
> <https://maps.google.com/?q=Charles+Deberiotstraat+32&entry=gmail&source=g>
> box 2439
> >3000 Leuven
> >+32 16 32 87 67
> >
> >
> >
> >
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my phone. Please excuse my brevity.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
-- 

______________________________

Amit Mittal
Pursuing Ph.D. in Finance and Accounting
Indian Institute of Management, Lucknow
Visit my SSRN author page:
http://ssrn.com/author=2665511
* Top 10% Downloaded Author on SSRN
Mob: +91 7525023664

This message has been sent from a mobile device. I may contact you again.

_________________

	[[alternative HTML version deleted]]



From j|up@dh @end|ng |rom gm@||@com  Fri Oct 12 18:41:03 2018
From: j|up@dh @end|ng |rom gm@||@com (Jiblal Upadhya)
Date: Fri, 12 Oct 2018 11:41:03 -0500
Subject: [R] Help in jointprior(kslf.nw)
Message-ID: <CAO-R1n6LF1+74MhNDVrHr2=S5RqcrYeDd-Mjzk8AwUR4sKnUiw@mail.gmail.com>

Dear All,

I tried to implement following code, but its giving error as
"Error in array(1:TD, dim = Dim) : 'dims' cannot be of length 0"

Code for ksl dataset in deal package
kslfs <- ksl[c(1:300),c(1,2,4,5,6,7,8)]
head(kslfs)
kslfs[,c(1:7)] <- lapply(kslfs[,c(1:7)], as.factor)
indx <- sapply(kslfs, is.factor)
kslfs[indx] <- lapply(kslfs[indx], function(x) as.numeric(as.character(x)))
kslfs.nw <- network(kslfs)
kslfs.prior <- jointprior(kslfs.nw)

I look on the stack overflow and its saying it doesn't run for only
continuous variables. Anyone has updated information to correct this.

Any help will be highly appreciated.
Thanks,

-Jiblal

	[[alternative HTML version deleted]]



From @|exnerdy @end|ng |rom hotm@||@com  Fri Oct 12 18:46:09 2018
From: @|exnerdy @end|ng |rom hotm@||@com (Alexander Nervedi)
Date: Fri, 12 Oct 2018 16:46:09 +0000
Subject: [R] install issue with survey package?
In-Reply-To: <0d6b2449-6547-4332-8405-c24a20f1f079@dewey.myzen.co.uk>
References: <BM1PR01MB2577DED744E7A949873985B8BBE20@BM1PR01MB2577.INDPRD01.PROD.OUTLOOK.COM>,
 <0d6b2449-6547-4332-8405-c24a20f1f079@dewey.myzen.co.uk>
Message-ID: <BM1PR01MB2577B588FE7592F8CC696E4EBBE20@BM1PR01MB2577.INDPRD01.PROD.OUTLOOK.COM>

Hi Michael,

I think you are spot on. Haven't resolved the issue yet. Here is what i get:

> utils:::menuInstallLocal()
* installing *source* package 'survey' ...
** package 'survey' successfully unpacked and MD5 sums checked
** R
** data
** inst
** preparing package for lazy loading
** help
*** installing help indices
** building package indices
** installing vignettes
** testing if installed package can be loaded
*** arch - i386
Fatal error: cannot open file 'D:\Users\Al': No such file or directory

*** arch - x64
Fatal error: cannot open file 'D:\Users\Al': No such file or directory

ERROR: loading failed for 'i386', 'x64'
* removing 'D:/Users/Al Nerdi/Documents/R/win-library/3.3/survey'
Warning messages:
1: running command '"C:/PROGRA~1/R/R-33~1.1/bin/i386/R" CMD INSTALL -l "D:\Users\Al Nerdi\Documents\R\win-library\3.3" "D:/downloads/survey_3.34.tar.gz"' had status 1
2: In install.packages(files[tarballs], .libPaths()[1L], repos = NULL,  :
  installation of package ?D:/downloads/survey_3.34.tar.gz? had non-zero exit status
>

I think i might have to reinstall R in the root directly (rather than under program files) so that there are no spaces in path names.

Thanks for the pointer,

best wishes,
Alnerdi

________________________________
From: Michael Dewey <lists at dewey.myzen.co.uk>
Sent: Friday, October 12, 2018 4:33 AM
To: Alexander Nervedi; r-help at R-project.org
Subject: Re: [R] install issue with survey package?

Dear Al

It looks like the problem may be the embedded space in Al Nerdi

What happens if you manually download the tar.gz file, put it somewhere
convenient and then from the commend line run

R CMD INSTALL survey_3.34.tar.gz

You will need to make sure R is on your path first

Michael

On 12/10/2018 09:31, Alexander Nervedi wrote:
> Have been trying to run a few packages with dependency on the survey package (e.g. twang) and have run into trouble that I am not sure how to resolve. Any help would be appreciated, the code (and error messages) are below:
>
> --- R log begins ---
>> install.packages("survey")
> Installing package into ?D:/Users/Al Nerdi/Documents/R/win-library/3.5?
> (as ?lib? is unspecified)
>
>    There is a binary version available but the source version is later:
>         binary source needs_compilation
> survey 3.33-2   3.34             FALSE
>
> installing the source package ?survey?
>
> trying URL 'https://cran.rstudio.com/src/contrib/survey_3.34.tar.gz'
> Content type 'application/x-gzip' length 1476949 bytes (1.4 MB)
> downloaded 1.4 MB
>
> Warning: invalid package 'D:\Users\Al'
> Warning: invalid package 'Nerdi\AppData\Local\Temp\RtmpU3AmrY/downloaded_packages/survey_3.34.tar.gz'
> Error: ERROR: no packages specified
> In R CMD INSTALL
> Warning in install.packages :
>    installation of package ?survey? had non-zero exit status
>
> The downloaded source packages are in
> ?D:\Users\Al Nerdi\AppData\Local\Temp\RtmpU3AmrY\downloaded_packages?
>
>> install.packages("twang")
> Installing package into ?D:/Users/Al Nerdi/Documents/R/win-library/3.5?
> (as ?lib? is unspecified)
> also installing the dependencies ?gbm?, ?survey?
>
>
>    There is a binary version available but the source version is later:
>         binary source needs_compilation
> survey 3.33-2   3.34             FALSE
>
> trying URL 'https://cran.rstudio.com/bin/windows/contrib/3.5/gbm_2.1.4.zip'
> Content type 'application/zip' length 1094087 bytes (1.0 MB)
> downloaded 1.0 MB
>
> trying URL 'https://cran.rstudio.com/bin/windows/contrib/3.5/twang_1.5.zip'
> Content type 'application/zip' length 1516991 bytes (1.4 MB)
> downloaded 1.4 MB
>
> package ?gbm? successfully unpacked and MD5 sums checked
> package ?twang? successfully unpacked and MD5 sums checked
>
> The downloaded binary packages are in
> D:\Users\Al Nerdi\AppData\Local\Temp\RtmpU3AmrY\downloaded_packages
> installing the source package ?survey?
>
> trying URL 'https://cran.rstudio.com/src/contrib/survey_3.34.tar.gz'
> Content type 'application/x-gzip' length 1476949 bytes (1.4 MB)
> downloaded 1.4 MB
>
> Warning: invalid package 'D:\Users\Al'
> Warning: invalid package 'Nerdi\AppData\Local\Temp\RtmpU3AmrY/downloaded_packages/survey_3.34.tar.gz'
> Error: ERROR: no packages specified
> In R CMD INSTALL
> Warning in install.packages :
>    installation of package ?survey? had non-zero exit status
>
> The downloaded source packages are in
> ?D:\Users\Al Nerdi\AppData\Local\Temp\RtmpU3AmrY\downloaded_packages?
>> library(twang)
> Loading required package: gbm
> Loaded gbm 2.1.4
> Error: package ?survey? required by ?twang? could not be found
>
>> R.Version()
> $`platform`
> [1] "x86_64-w64-mingw32"
>
> $arch
> [1] "x86_64"
>
> $os
> [1] "mingw32"
>
> $system
> [1] "x86_64, mingw32"
>
> $status
> [1] ""
>
> $major
> [1] "3"
>
> $minor
> [1] "5.1"
>
> $year
> [1] "2018"
>
> $month
> [1] "07"
>
> $day
> [1] "02"
>
> $`svn rev`
> [1] "74947"
>
> $language
> [1] "R"
>
> $version.string
> [1] "R version 3.5.1 (2018-07-02)"
>
> $nickname
> [1] "Feather Spray"
>
> --- R log ends ---
>
> I am not sure how to address this. Any suggestions will be great!
>
> Grazie,
>
> Al Nerdi
>
>        [[alternative HTML version deleted]]
>
>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

--
Michael
http://www.dewey.myzen.co.uk/home.html

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Oct 12 21:50:03 2018
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Fri, 12 Oct 2018 12:50:03 -0700
Subject: [R] install issue with survey package?
In-Reply-To: <BM1PR01MB2577B588FE7592F8CC696E4EBBE20@BM1PR01MB2577.INDPRD01.PROD.OUTLOOK.COM>
References: <BM1PR01MB2577DED744E7A949873985B8BBE20@BM1PR01MB2577.INDPRD01.PROD.OUTLOOK.COM>,
 <0d6b2449-6547-4332-8405-c24a20f1f079@dewey.myzen.co.uk>
 <BM1PR01MB2577B588FE7592F8CC696E4EBBE20@BM1PR01MB2577.INDPRD01.PROD.OUTLOOK.COM>
Message-ID: <8392951B-1BFE-4575-B2DB-B71C359993C3@dcn.davis.ca.us>

I think that would be a mistake, since R itself works just fine there. Your error has to do with the location of your default user library, not the software or its base library.

If you set R_LIBS_USER to a directory without spaces you should be fine. I suspect you can use the 8.3 directory notation visible when you use DIR/x at the CMD command line to even refer to the default library location in your Documents directory if you want.

On October 12, 2018 9:46:09 AM PDT, Alexander Nervedi <alexnerdy at hotmail.com> wrote:
>Hi Michael,
>
>I think you are spot on. Haven't resolved the issue yet. Here is what i
>get:
>
>> utils:::menuInstallLocal()
>* installing *source* package 'survey' ...
>** package 'survey' successfully unpacked and MD5 sums checked
>** R
>** data
>** inst
>** preparing package for lazy loading
>** help
>*** installing help indices
>** building package indices
>** installing vignettes
>** testing if installed package can be loaded
>*** arch - i386
>Fatal error: cannot open file 'D:\Users\Al': No such file or directory
>
>*** arch - x64
>Fatal error: cannot open file 'D:\Users\Al': No such file or directory
>
>ERROR: loading failed for 'i386', 'x64'
>* removing 'D:/Users/Al Nerdi/Documents/R/win-library/3.3/survey'
>Warning messages:
>1: running command '"C:/PROGRA~1/R/R-33~1.1/bin/i386/R" CMD INSTALL -l
>"D:\Users\Al Nerdi\Documents\R\win-library\3.3"
>"D:/downloads/survey_3.34.tar.gz"' had status 1
>2: In install.packages(files[tarballs], .libPaths()[1L], repos = NULL, 
>:
>installation of package ?D:/downloads/survey_3.34.tar.gz? had non-zero
>exit status
>>
>
>I think i might have to reinstall R in the root directly (rather than
>under program files) so that there are no spaces in path names.
>
>Thanks for the pointer,
>
>best wishes,
>Alnerdi
>
>________________________________
>From: Michael Dewey <lists at dewey.myzen.co.uk>
>Sent: Friday, October 12, 2018 4:33 AM
>To: Alexander Nervedi; r-help at R-project.org
>Subject: Re: [R] install issue with survey package?
>
>Dear Al
>
>It looks like the problem may be the embedded space in Al Nerdi
>
>What happens if you manually download the tar.gz file, put it somewhere
>convenient and then from the commend line run
>
>R CMD INSTALL survey_3.34.tar.gz
>
>You will need to make sure R is on your path first
>
>Michael
>
>On 12/10/2018 09:31, Alexander Nervedi wrote:
>> Have been trying to run a few packages with dependency on the survey
>package (e.g. twang) and have run into trouble that I am not sure how
>to resolve. Any help would be appreciated, the code (and error
>messages) are below:
>>
>> --- R log begins ---
>>> install.packages("survey")
>> Installing package into ?D:/Users/Al
>Nerdi/Documents/R/win-library/3.5?
>> (as ?lib? is unspecified)
>>
>>    There is a binary version available but the source version is
>later:
>>         binary source needs_compilation
>> survey 3.33-2   3.34             FALSE
>>
>> installing the source package ?survey?
>>
>> trying URL 'https://cran.rstudio.com/src/contrib/survey_3.34.tar.gz'
>> Content type 'application/x-gzip' length 1476949 bytes (1.4 MB)
>> downloaded 1.4 MB
>>
>> Warning: invalid package 'D:\Users\Al'
>> Warning: invalid package
>'Nerdi\AppData\Local\Temp\RtmpU3AmrY/downloaded_packages/survey_3.34.tar.gz'
>> Error: ERROR: no packages specified
>> In R CMD INSTALL
>> Warning in install.packages :
>>    installation of package ?survey? had non-zero exit status
>>
>> The downloaded source packages are in
>> ?D:\Users\Al Nerdi\AppData\Local\Temp\RtmpU3AmrY\downloaded_packages?
>>
>>> install.packages("twang")
>> Installing package into ?D:/Users/Al
>Nerdi/Documents/R/win-library/3.5?
>> (as ?lib? is unspecified)
>> also installing the dependencies ?gbm?, ?survey?
>>
>>
>>    There is a binary version available but the source version is
>later:
>>         binary source needs_compilation
>> survey 3.33-2   3.34             FALSE
>>
>> trying URL
>'https://cran.rstudio.com/bin/windows/contrib/3.5/gbm_2.1.4.zip'
>> Content type 'application/zip' length 1094087 bytes (1.0 MB)
>> downloaded 1.0 MB
>>
>> trying URL
>'https://cran.rstudio.com/bin/windows/contrib/3.5/twang_1.5.zip'
>> Content type 'application/zip' length 1516991 bytes (1.4 MB)
>> downloaded 1.4 MB
>>
>> package ?gbm? successfully unpacked and MD5 sums checked
>> package ?twang? successfully unpacked and MD5 sums checked
>>
>> The downloaded binary packages are in
>> D:\Users\Al Nerdi\AppData\Local\Temp\RtmpU3AmrY\downloaded_packages
>> installing the source package ?survey?
>>
>> trying URL 'https://cran.rstudio.com/src/contrib/survey_3.34.tar.gz'
>> Content type 'application/x-gzip' length 1476949 bytes (1.4 MB)
>> downloaded 1.4 MB
>>
>> Warning: invalid package 'D:\Users\Al'
>> Warning: invalid package
>'Nerdi\AppData\Local\Temp\RtmpU3AmrY/downloaded_packages/survey_3.34.tar.gz'
>> Error: ERROR: no packages specified
>> In R CMD INSTALL
>> Warning in install.packages :
>>    installation of package ?survey? had non-zero exit status
>>
>> The downloaded source packages are in
>> ?D:\Users\Al Nerdi\AppData\Local\Temp\RtmpU3AmrY\downloaded_packages?
>>> library(twang)
>> Loading required package: gbm
>> Loaded gbm 2.1.4
>> Error: package ?survey? required by ?twang? could not be found
>>
>>> R.Version()
>> $`platform`
>> [1] "x86_64-w64-mingw32"
>>
>> $arch
>> [1] "x86_64"
>>
>> $os
>> [1] "mingw32"
>>
>> $system
>> [1] "x86_64, mingw32"
>>
>> $status
>> [1] ""
>>
>> $major
>> [1] "3"
>>
>> $minor
>> [1] "5.1"
>>
>> $year
>> [1] "2018"
>>
>> $month
>> [1] "07"
>>
>> $day
>> [1] "02"
>>
>> $`svn rev`
>> [1] "74947"
>>
>> $language
>> [1] "R"
>>
>> $version.string
>> [1] "R version 3.5.1 (2018-07-02)"
>>
>> $nickname
>> [1] "Feather Spray"
>>
>> --- R log ends ---
>>
>> I am not sure how to address this. Any suggestions will be great!
>>
>> Grazie,
>>
>> Al Nerdi
>>
>>        [[alternative HTML version deleted]]
>>
>>
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>--
>Michael
>http://www.dewey.myzen.co.uk/home.html
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.



From wdun|@p @end|ng |rom t|bco@com  Sat Oct 13 00:32:00 2018
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Fri, 12 Oct 2018 15:32:00 -0700
Subject: [R] readBin with connection of unknown compression type
Message-ID: <CAF8bMcbufYt1FRWF=rFGm9AKjgU=0g4ahF0QLhdoL+bhYSD2Og@mail.gmail.com>

I would like to use readBin to read parts of a compressed binary file whose
compression type is not known (e.g, a *.RData file, which may be compressed
with gz, xz, or bz compression or not compressed at all).

If I use
    con <- file("theFile", "r")
to create the connection then the compression type is detected;
summary(con)$class will give the compression type (or "file" if no
compression type is recognized).

However, I cannot use that connection in readBin because uncompressed data
that con will produce is considered text, not binary.  E.g. with the files
produced with the code in the postscript I get

> con <- file(df["bz", "binaryFile"], "r")
> dput(summary(con))
list(description =
"C:\\Users\\wdunlap\\AppData\\Local\\Temp\\RtmpAlyXT6\\file472c73e710cd/
binary.bz",
    class = "bzfile", mode = "r", text = "text", opened = "opened",
    `can read` = "yes", `can write` = "no")
> readBin(con, what="raw", n=8)
Error in readBin(con, what = "raw", n = 8) :
  can only read from a binary connection

I can read compressed text files with scan(file(.., "r")) and I don't have
to tell it what sort of compression was used:
> con <- file(df["bz", "textFile"], "r")
> scan(con, what="integer", n=4)
Read 4 items
[1] "2" "3" "5" "7"

I can read binary files with unknown compression by saving the class of the
connection returned by file("r"), mapping that to one of file, bzfile,
xzfile, or gzfile, and reopening the compressed file with "rb".  E.g.,

myBinaryFile <- function(filename) {
    con <- file(filename, "r")
    class <- summary(con)$class
    close(con)
    # rely on class of a connection also being the name of a connection
creator
    con <- getFunction(class)(filename, "rb")
    con
}
> lapply(bn(df$binaryFile), FUN=function(f) { con <- myBinaryFile(f) ;
on.exit(close(con)) ; tryCatch(readBin(con, what="raw",n=12),
error=function(e)conditionMessage(e))})
$`binary.gz`
 [1] 02 00 00 00 03 00 00 00 05 00 00 00

$binary.bz
 [1] 02 00 00 00 03 00 00 00 05 00 00 00

$binary.xz
 [1] 02 00 00 00 03 00 00 00 05 00 00 00

$binary.uncompressed
 [1] 02 00 00 00 03 00 00 00 05 00 00 00

Is this repeated opening of the file required to read binary files of
unknown compression type, or did I miss a way to make readBin() with just
one call to a connection-creating function?

Bill Dunlap
TIBCO Software
wdunlap tibco.com

Code to produce compressed binary and text files:
    tdata <- as.integer(c(2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41,
43, 47, 53,
        59, 61, 67, 71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127,
131, 137))
    dir.create(tdir <- tempfile())
    bn <- function(filename) structure(filename, names=basename(filename))
    df <- data.frame(conMaker = I(list(gz = gzfile, bz = bzfile, xz =
xzfile, uncompressed = file)))
    df$binaryFile <- vapply(rownames(df), FUN.VALUE=NA_character_,
FUN=function(nm) {
        con <- df[[nm, "conMaker"]]( file <- file.path(tdir, paste(sep=".",
"binary", nm)), "wb")
        on.exit(close(con))
        writeBin(tdata, con)
        file
    })
    df$textFile <- vapply(rownames(df), FUN.VALUE=NA_character_,
FUN=function(nm) {
        con <- df[[nm, "conMaker"]]( file <- file.path(tdir, paste(sep=".",
"text", nm)), "wt")
        on.exit(close(con))
        cat(tdata, sep="\n", file=con)
        file
    })

	[[alternative HTML version deleted]]



From |eder|co@c@|bo|| @end|ng |rom ku|euven@be  Sat Oct 13 12:13:29 2018
From: |eder|co@c@|bo|| @end|ng |rom ku|euven@be (Federico Calboli)
Date: Sat, 13 Oct 2018 10:13:29 +0000
Subject: [R] keeping github packages up to date
In-Reply-To: <99CDC2BA-A667-4D4A-A046-7A81160DA277@dcn.davis.ca.us>
References: <FE0C85C4-7749-4545-8A91-3C8B1DAD0A0B@kuleuven.be>
 <99CDC2BA-A667-4D4A-A046-7A81160DA277@dcn.davis.ca.us>
Message-ID: <63812025-B272-40D5-B209-E63C5C5CEE64@kuleuven.be>

On 12 Oct 2018, at 17:32, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
> 
> Reinstall the updated versions however you originally did. The "obstacles" imposed by CRAN that cause package developers to forgo sharing there came about to confirm documentation, cross-platform compatibility and dependencies. With no referee enforcing such care in the environments you are pulling from, you cannot expect automated dependency management to work. You are riding a mustang in the Wild West... so have fun while it lasts... eventually bit-rot will break your library unless you freeze it (use packrat and keep old versions of R?).

I agree on all accounts ? there is a thread here someplace where I expressed my displeasure at the fact people publish papers making a big deal of the fact they have github packages when it is obvious this is just a quick and dirty approach that creates as many issues (in terms of software management) that it might fix (in terms of whatever the code does). 

Unfortunately some developers only release on github, or do not submit a new version to CRAN with all the bugfixes they put on github.  An unintended consequence of devtools.    

Cheers

F



> 
> On October 12, 2018 8:00:11 AM PDT, Federico Calboli <federico.calboli at kuleuven.be> wrote:
>> Hi all,
>> 
>> more and more people (sadly) are putting stuff on github, with either
>> no CRAN upload or an package.  So I am stuck with using devtools and
>> install_github.
>> 
>> I know how to keep stuff from CRAN updated ? how do I do the same for
>> github stuff?
>> 
>> Cheers
>> 
>> F
>> 
>> 
>> --
>> Federico Calboli
>> LBEG - Laboratory of Biodiversity and Evolutionary Genomics
>> Charles Deberiotstraat 32 box 2439
>> 3000 Leuven
>> +32 16 32 87 67
>> 
>> 
>> 
>> 
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> -- 
> Sent from my phone. Please excuse my brevity.

--
Federico Calboli
LBEG - Laboratory of Biodiversity and Evolutionary Genomics
Charles Deberiotstraat 32 box 2439
3000 Leuven
+32 16 32 87 67






From m|korym @end|ng |rom protonm@||@com  Sat Oct 13 22:16:46 2018
From: m|korym @end|ng |rom protonm@||@com (mikorym)
Date: Sat, 13 Oct 2018 20:16:46 +0000
Subject: [R] Wavelet Package for Time Series
Message-ID: <JTfbinwIBd5z6_pmJwVN6JZC0xnUFqcYlGGd6Js_6CFcSxSv4hXsOt0leTep-Q3YUBc3_RRZs1JJTmkUFT7withYOPntbbr52Zjh7TH-wuA=@protonmail.com>

Hi R-help

Are there any R users that can tell me which of the wavelet packages are the "best" to use? By this I mean ones that are being maintained, or e.g., work well with ggplot2 or otherwise have specific advantages to use.

I have seen for example that WaveThresh has an accompanying book.

In terms of being up to date, however, it seems like python may be a better option. Although, sometimes more recent does not mean better.

My first use case would be to model time series data.

Thanks you in advance,
Phillip



From bgunter@4567 @end|ng |rom gm@||@com  Sat Oct 13 22:52:33 2018
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 13 Oct 2018 13:52:33 -0700
Subject: [R] Wavelet Package for Time Series
In-Reply-To: <JTfbinwIBd5z6_pmJwVN6JZC0xnUFqcYlGGd6Js_6CFcSxSv4hXsOt0leTep-Q3YUBc3_RRZs1JJTmkUFT7withYOPntbbr52Zjh7TH-wuA=@protonmail.com>
References: <JTfbinwIBd5z6_pmJwVN6JZC0xnUFqcYlGGd6Js_6CFcSxSv4hXsOt0leTep-Q3YUBc3_RRZs1JJTmkUFT7withYOPntbbr52Zjh7TH-wuA=@protonmail.com>
Message-ID: <CAGxFJbTCd=V7vNiyj2rK6Z=MhozJvPUg5kd9HRaEqB_imAT8Gw@mail.gmail.com>

I cannot provide any specific info, but as a matter of policy, packages on
CRAN *must* meet their required maintenance standards (compatibility with
current R version, run on different OS's, etc.)  or they are removed from
CRAN. This is not necessarily so for packages on other repos, e.g. github.

Cheers,
Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sat, Oct 13, 2018 at 1:17 PM mikorym via R-help <r-help at r-project.org>
wrote:

> Hi R-help
>
> Are there any R users that can tell me which of the wavelet packages are
> the "best" to use? By this I mean ones that are being maintained, or e.g.,
> work well with ggplot2 or otherwise have specific advantages to use.
>
> I have seen for example that WaveThresh has an accompanying book.
>
> In terms of being up to date, however, it seems like python may be a
> better option. Although, sometimes more recent does not mean better.
>
> My first use case would be to model time series data.
>
> Thanks you in advance,
> Phillip
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Oct 14 02:26:46 2018
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 13 Oct 2018 17:26:46 -0700
Subject: [R] Wavelet Package for Time Series
In-Reply-To: <JTfbinwIBd5z6_pmJwVN6JZC0xnUFqcYlGGd6Js_6CFcSxSv4hXsOt0leTep-Q3YUBc3_RRZs1JJTmkUFT7withYOPntbbr52Zjh7TH-wuA=@protonmail.com>
References: <JTfbinwIBd5z6_pmJwVN6JZC0xnUFqcYlGGd6Js_6CFcSxSv4hXsOt0leTep-Q3YUBc3_RRZs1JJTmkUFT7withYOPntbbr52Zjh7TH-wuA=@protonmail.com>
Message-ID: <E75C348F-3850-4A0A-981A-40BA6A20262A@dcn.davis.ca.us>

Any question about "best" implies an optimization function that will almost certainly vary depending on what you are interested in... please avoid asking such questions.

You probably ought to peruse the CRAN time series Task View [1] and try out some options.

[1] https://cran.r-project.org/web/views/TimeSeries.html

On October 13, 2018 1:16:46 PM PDT, mikorym via R-help <r-help at r-project.org> wrote:
>Hi R-help
>
>Are there any R users that can tell me which of the wavelet packages
>are the "best" to use? By this I mean ones that are being maintained,
>or e.g., work well with ggplot2 or otherwise have specific advantages
>to use.
>
>I have seen for example that WaveThresh has an accompanying book.
>
>In terms of being up to date, however, it seems like python may be a
>better option. Although, sometimes more recent does not mean better.
>
>My first use case would be to model time series data.
>
>Thanks you in advance,
>Phillip
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.



From r@turner @end|ng |rom @uck|@nd@@c@nz  Sun Oct 14 22:11:45 2018
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Mon, 15 Oct 2018 09:11:45 +1300
Subject: [R] [FORGED] Re:  Wavelet Package for Time Series
In-Reply-To: <E75C348F-3850-4A0A-981A-40BA6A20262A@dcn.davis.ca.us>
References: <JTfbinwIBd5z6_pmJwVN6JZC0xnUFqcYlGGd6Js_6CFcSxSv4hXsOt0leTep-Q3YUBc3_RRZs1JJTmkUFT7withYOPntbbr52Zjh7TH-wuA=@protonmail.com>
 <E75C348F-3850-4A0A-981A-40BA6A20262A@dcn.davis.ca.us>
Message-ID: <41a767b5-c149-309c-72fd-ecd118392ce7@auckland.ac.nz>


On 10/14/2018 01:26 PM, Jeff Newmiller wrote:

> Any question about "best" implies an optimization function that will
> almost certainly vary depending on what you are interested in ...
> please avoid asking such questions.

Fortune nomination.

cheers,

Rolf

-- 
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276



From re|chm@nj @end|ng |rom @bcg|ob@|@net  Mon Oct 15 03:45:17 2018
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Sun, 14 Oct 2018 20:45:17 -0500
Subject: [R] Scientific Notation
Message-ID: <000001d46428$bb960eb0$32c22c10$@sbcglobal.net>

R Forum

Is there a way to tell R to not import numbers as scientific notation
(read.csv).  So that 1619052826499 will not be imported as 1.619053e+12.

Jeff Reichman



From dc@r|@on @end|ng |rom t@mu@edu  Mon Oct 15 03:58:05 2018
From: dc@r|@on @end|ng |rom t@mu@edu (David L Carlson)
Date: Mon, 15 Oct 2018 01:58:05 +0000
Subject: [R] Scientific Notation
In-Reply-To: <000001d46428$bb960eb0$32c22c10$@sbcglobal.net>
References: <000001d46428$bb960eb0$32c22c10$@sbcglobal.net>
Message-ID: <00e75708579e40c78b70fd274d0266df@tamu.edu>

You probably need to read up on the scipen= argument in ?options. What is displayed at the console is not what is stored:


> x <- 1619052826499
> print(x)
[1] 1.619053e+12
> dput(x)
1619052826499
> options(scipen=10)
> print(x)
[1] 1619052826499

-------------------------

David L Carlson

Anthropology Department

Texas A&M University

________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of Jeff Reichman <reichmanj at sbcglobal.net>
Sent: Sunday, October 14, 2018 8:45:17 PM
To: r-help at r-project.org
Subject: [R] Scientific Notation

R Forum

Is there a way to tell R to not import numbers as scientific notation
(read.csv).  So that 1619052826499 will not be imported as 1.619053e+12.

Jeff Reichman

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]



From re|chm@nj @end|ng |rom @bcg|ob@|@net  Mon Oct 15 04:13:01 2018
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Sun, 14 Oct 2018 21:13:01 -0500
Subject: [R] limit bar graph output
Message-ID: <000301d4642c$9a4181f0$cec485d0$@sbcglobal.net>

R-Help Forum

I'm using the following code to reorder (from highest to lowest) my miRNA
counts.  But there are 500 plus and I only need the first (say) 15-20.  How
do I limit ggplot to only the first 20 miRNA counts

ggplot(data = corr.m, aes(x = reorder(miRNA, -value), y = value, fill =
variable)) + 
  geom_bar(stat = "identity")

Jeff



From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Oct 15 04:16:16 2018
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 14 Oct 2018 19:16:16 -0700
Subject: [R] Scientific Notation
In-Reply-To: <00e75708579e40c78b70fd274d0266df@tamu.edu>
References: <000001d46428$bb960eb0$32c22c10$@sbcglobal.net>
 <00e75708579e40c78b70fd274d0266df@tamu.edu>
Message-ID: <B016E5AD-5ADA-476B-A9E5-0BCB58A78D52@dcn.davis.ca.us>

While the OP should study up on what numeric values are, context may determine that a different storage mode be used. For example, if the values are intrinsically integers and meet the appropriate magnitude requirements, importing as integer may make sense. Or, if these are identifiers like serial numbers it may make sense to import as character data. To implement those constraints, read up on the colClasses argument to read.csv.

If these values really are intended for computation, the OP needs to differentiate how R prints values by default from how R can be made to export character representations of that internal data. In short, don't get picky about scientific notation until you export the data from R, because floating point data are ALWAYS in scientific notation (base 2) internally.

On October 14, 2018 6:58:05 PM PDT, David L Carlson <dcarlson at tamu.edu> wrote:
>You probably need to read up on the scipen= argument in ?options. What
>is displayed at the console is not what is stored:
>
>
>> x <- 1619052826499
>> print(x)
>[1] 1.619053e+12
>> dput(x)
>1619052826499
>> options(scipen=10)
>> print(x)
>[1] 1619052826499
>
>-------------------------
>
>David L Carlson
>
>Anthropology Department
>
>Texas A&M University
>
>________________________________
>From: R-help <r-help-bounces at r-project.org> on behalf of Jeff Reichman
><reichmanj at sbcglobal.net>
>Sent: Sunday, October 14, 2018 8:45:17 PM
>To: r-help at r-project.org
>Subject: [R] Scientific Notation
>
>R Forum
>
>Is there a way to tell R to not import numbers as scientific notation
>(read.csv).  So that 1619052826499 will not be imported as
>1.619053e+12.
>
>Jeff Reichman
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.



From re|chm@nj @end|ng |rom @bcg|ob@|@net  Mon Oct 15 04:19:34 2018
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Sun, 14 Oct 2018 21:19:34 -0500
Subject: [R] Scientific Notation
In-Reply-To: <00e75708579e40c78b70fd274d0266df@tamu.edu>
References: <000001d46428$bb960eb0$32c22c10$@sbcglobal.net>
 <00e75708579e40c78b70fd274d0266df@tamu.edu>
Message-ID: <000401d4642d$84712320$8d536960$@sbcglobal.net>

Mr. Carlson

 

Well that was easy enough. Thank you.  

Options -
https://stat.ethz.ch/R-manual/R-devel/library/base/html/options.html

 

Jeff

 

From: David L Carlson <dcarlson at tamu.edu> 
Sent: Sunday, October 14, 2018 8:58 PM
To: r-help at r-project.org; reichmanj at sbcglobal.net
Subject: Re: [R] Scientific Notation

 

You probably need to read up on the scipen= argument in ?options. What is
displayed at the console is not what is stored:

 

> x <- 1619052826499

> print(x)

[1] 1.619053e+12

> dput(x)

1619052826499

> options(scipen=10)

> print(x)

[1] 1619052826499

 

------------------------- 

David L Carlson

Anthropology Department

Texas A&M University

  _____  

From: R-help <r-help-bounces at r-project.org
<mailto:r-help-bounces at r-project.org> > on behalf of Jeff Reichman
<reichmanj at sbcglobalnet>
Sent: Sunday, October 14, 2018 8:45:17 PM
To: r-help at r-project.org <mailto:r-help at r-project.org> 
Subject: [R] Scientific Notation 

 

R Forum

Is there a way to tell R to not import numbers as scientific notation
(read.csv).  So that 1619052826499 will not be imported as 1.619053e+12.

Jeff Reichman

______________________________________________
R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To
UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]



From bgunter@4567 @end|ng |rom gm@||@com  Mon Oct 15 05:51:29 2018
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 14 Oct 2018 20:51:29 -0700
Subject: [R] limit bar graph output
In-Reply-To: <000301d4642c$9a4181f0$cec485d0$@sbcglobal.net>
References: <000301d4642c$9a4181f0$cec485d0$@sbcglobal.net>
Message-ID: <CAGxFJbTZWWKbR6=RUMsC4kqnwyny9AfPyeX_mvn7ydkMHf=psQ@mail.gmail.com>

If I understand correctly, just subset your sorted data.

e.g. :

x <- runif(50)
##  50 unsorted values

sort(x, dec = TRUE)[1:10]
## the 10 biggest


-- Bert



Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sun, Oct 14, 2018 at 7:13 PM Jeff Reichman <reichmanj at sbcglobal.net>
wrote:

> R-Help Forum
>
> I'm using the following code to reorder (from highest to lowest) my miRNA
> counts.  But there are 500 plus and I only need the first (say) 15-20.  How
> do I limit ggplot to only the first 20 miRNA counts
>
> ggplot(data = corr.m, aes(x = reorder(miRNA, -value), y = value, fill =
> variable)) +
>   geom_bar(stat = "identity")
>
> Jeff
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Oct 15 07:50:35 2018
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 14 Oct 2018 22:50:35 -0700
Subject: [R] limit bar graph output
In-Reply-To: <CAGxFJbTZWWKbR6=RUMsC4kqnwyny9AfPyeX_mvn7ydkMHf=psQ@mail.gmail.com>
References: <000301d4642c$9a4181f0$cec485d0$@sbcglobal.net>
 <CAGxFJbTZWWKbR6=RUMsC4kqnwyny9AfPyeX_mvn7ydkMHf=psQ@mail.gmail.com>
Message-ID: <C9A24E9F-90A8-4CD7-A40A-2E19D7C3FC44@dcn.davis.ca.us>

A reproducible example would help here (you cannot assume we know what type "miRNA" is) but guessing from the use of "reorder" I suspect it is a factor. In which case after you subset you will need to use the droplevels function to remove the unused levels, and then plot that prepared data.

On October 14, 2018 8:51:29 PM PDT, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>If I understand correctly, just subset your sorted data.
>
>e.g. :
>
>x <- runif(50)
>##  50 unsorted values
>
>sort(x, dec = TRUE)[1:10]
>## the 10 biggest
>
>
>-- Bert
>
>
>
>Bert Gunter
>
>"The trouble with having an open mind is that people keep coming along
>and
>sticking things into it."
>-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
>On Sun, Oct 14, 2018 at 7:13 PM Jeff Reichman <reichmanj at sbcglobal.net>
>wrote:
>
>> R-Help Forum
>>
>> I'm using the following code to reorder (from highest to lowest) my
>miRNA
>> counts.  But there are 500 plus and I only need the first (say)
>15-20.  How
>> do I limit ggplot to only the first 20 miRNA counts
>>
>> ggplot(data = corr.m, aes(x = reorder(miRNA, -value), y = value, fill
>=
>> variable)) +
>>   geom_bar(stat = "identity")
>>
>> Jeff
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.



From j|ox @end|ng |rom mcm@@ter@c@  Mon Oct 15 21:34:35 2018
From: j|ox @end|ng |rom mcm@@ter@c@ (Fox, John)
Date: Mon, 15 Oct 2018 19:34:35 +0000
Subject: [R] new edition of An R Companion to Applied Regression
Message-ID: <ACD1644AA6C67E4FBD0C350625508EC8368F0B93@FHSDB2D11-2.csu.mcmaster.ca>

Dear r-help list members,

Sandy Weisberg and I would like to announce a new (third) edition of our book An R Companion to Applied Regression, which has recently been published by Sage Publications. The book provides a broad introduction to R in the general context of applied regression analysis, including linear models, generalized linear models, and, new to the third edition, mixed-effects models.

The R Companion is associated with two widely used CRAN packages, the car and effects packages. In anticipation of the new edition of the R Companion we contributed substantially revised versions of these packages to CRAN: version 3.0-x of the car package and version 4.0-x of the effects package.

More information about the book, including a variety of on-line resources (chapter R scripts, on-line appendices, etc.), is available at <https://tinyurl.com/carbook>.

Best,
 John

-----------------------------------------------------------------
John Fox
Professor Emeritus
McMaster University
Hamilton, Ontario, Canada
Web: https://socialsciences.mcmaster.ca/jfox/



From re|chm@nj @end|ng |rom @bcg|ob@|@net  Mon Oct 15 23:28:11 2018
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Mon, 15 Oct 2018 16:28:11 -0500
Subject: [R] limit bar graph output
In-Reply-To: <CAGxFJbTZWWKbR6=RUMsC4kqnwyny9AfPyeX_mvn7ydkMHf=psQ@mail.gmail.com>
References: <000301d4642c$9a4181f0$cec485d0$@sbcglobal.net>
 <CAGxFJbTZWWKbR6=RUMsC4kqnwyny9AfPyeX_mvn7ydkMHf=psQ@mail.gmail.com>
Message-ID: <001f01d464cd$f987d910$ec978b30$@sbcglobal.net>

Bert 

Jeff

 

I just resorted and took the top 30 and then reordered again in the geom_bar function ? below

 

ggplot(data=st.cnt)+

  geom_bar(aes(x=reorder(CourseName, -n), y=n),fill = "dark blue", stat="identity")+

  theme(axis.text.x = element_text(angle = 60, hjust = 1))

 

Jeff

 

From: Bert Gunter <bgunter.4567 at gmail.com> 
Sent: Sunday, October 14, 2018 10:51 PM
To: reichmanj at sbcglobal.net
Cc: R-help <r-help at r-project.org>
Subject: Re: [R] limit bar graph output

 

If I understand correctly, just subset your sorted data.

 

e.g. :

 

x <- runif(50)

##  50 unsorted values

 

sort(x, dec = TRUE)[1:10]  

## the 10 biggest

 

 

-- Bert

 

 




Bert Gunter

"The trouble with having an open mind is that people keep coming along and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

 

 

On Sun, Oct 14, 2018 at 7:13 PM Jeff Reichman <reichmanj at sbcglobal.net <mailto:reichmanj at sbcglobal.net> > wrote:

R-Help Forum

I'm using the following code to reorder (from highest to lowest) my miRNA
counts.  But there are 500 plus and I only need the first (say) 15-20.  How
do I limit ggplot to only the first 20 miRNA counts

ggplot(data = corr.m, aes(x = reorder(miRNA, -value), y = value, fill =
variable)) + 
  geom_bar(stat = "identity")

Jeff

______________________________________________
R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]



From yhbrent @end|ng |rom y@hoo@com  Tue Oct 16 00:40:20 2018
From: yhbrent @end|ng |rom y@hoo@com (Brent)
Date: Mon, 15 Oct 2018 22:40:20 +0000 (UTC)
Subject: [R] RTools and previous Cygwin installation--conflict?
References: <1035735313.10407463.1539643220464.ref@mail.yahoo.com>
Message-ID: <1035735313.10407463.1539643220464@mail.yahoo.com>

I sent a query on this subject over 4 years ago.
    https://www.mail-archive.com/r-help at r-project.org/msg212269.html

I used to use Duncan Murdoch's suggestion to install only cygwin 32 bit and then put RTools first in my Windows path, so that its versions of cygwin commands would get pick up first.
    https://www.mail-archive.com/r-help at r-project.org/msg212281.html

That approach, however, fails as of RTools 3.5, since RTools switched from cygwin commands to msys2.
    https://cran.r-project.org/bin/windows/Rtools/Rtools.txt
The mysys commands are incompatible with cygwin; you will get strange errors in cygwin if it tries to use msys2 commands.

This forced me to reconsider this problem, and I think that I came up with a much better approach that I want to share for the benefit of others.

Gabor Grothendieck had already suggested using a DOS batch file to temporarily alter the PATH env var "to R and to Rtools only when R is being used in order to avoid conflicts"
    https://www.mail-archive.com/r-help at r-project.org/msg212275.html

My solution is similar, except that instead of doing this in a DOS batch file, I do it as the first action within R itself.

In particular, I edited R .Rprofile file so that its
    .First
function calls a new function
    add_RTools_toPATH()

That function is:
    # Modifies the PATH environmental variable to have the path to the RTools bin directory as its first element.
    # This change only affects the current R session (and any processes it spawns?); it does not permanently alter the Windows system env var.
    add_RTools_toPATH = function() {
        # get the existing PATH env var's value:
        pathEnvVar = Sys.getenv("PATH")
        
        # check that it does not already have an Rtools element:
        if (grepl("Rtools", pathEnvVar, fixed = TRUE)) {
            stop("Your existing Windows PATH env var (printed below) already contains the substring \"Rtools\", which is unexpected:", "\n", pathEnvVar)
        }
        
        # add C:\Rtools\bin to the front of PATH:
        pathNew = paste( "C:\\Rtools\\bin", Sys.getenv("PATH"), sep = ";" )
        Sys.setenv(PATH = pathNew)
    }


This new solution allows me to use whatever version of cygwin I want (e.g. 64 bit) with no worries about collision as before.  It also lets me exactly control the PATH for my R sessions.

Here are some background links if you do not fully understand the above:
    https://stat.ethz.ch/R-manual/R-devel/library/base/html/Startup.html
    https://stat.ethz.ch/R-manual/R-devel/library/base/html/Sys.setenv.html
    https://stackoverflow.com/questions/24622725/how-to-set-path-on-windows-through-r-shell-command



From rb@er @end|ng |rom @t@u@edu  Tue Oct 16 03:32:17 2018
From: rb@er @end|ng |rom @t@u@edu (Robert Baer)
Date: Mon, 15 Oct 2018 20:32:17 -0500
Subject: [R] Finding unique terms
In-Reply-To: <CANTvJZKf7V4qxr87RsEvQc=nV3mpG+tmvy+8yC2tfjFdonaHFw@mail.gmail.com>
References: <CANTvJZKf7V4qxr87RsEvQc=nV3mpG+tmvy+8yC2tfjFdonaHFw@mail.gmail.com>
Message-ID: <ac548e31-0550-c5f5-f5b0-31b10ef91510@atsu.edu>


> Dear r-users,
>
> I have this data:
>
> structure(list(STUDENT_ID = structure(c(1L, 1L, 1L, 1L, 1L, 1L,
> 2L, 2L, 2L, 2L, 2L), .Label = c("AA15285", "AA15286"), class = "factor"),
>      COURSE_CODE = structure(c(1L, 2L, 5L, 6L, 7L, 8L, 2L, 3L,
>      4L, 5L, 6L), .Label = c("BAA1113", "BAA1322", "BAA2113",
>      "BAA2513", "BAA2713", "BAA2921", "BAA4273", "BAA4513"), class =
> "factor"),
>      PO1M = c(155.7, 48.9, 83.2, NA, NA, NA, 48.05, 68.4, 41.65,
>      82.35, NA), PO1T = c(180, 70, 100, NA, NA, NA, 70, 100, 60,
>      100, NA), PO2M = c(NA, NA, NA, 37, NA, NA, NA, NA, NA, NA,
>      41), PO2T = c(NA, NA, NA, 50, NA, NA, NA, NA, NA, NA, 50),
>      X = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), X.1 = c(NA,
>      NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names = c("STUDENT_ID",
> "COURSE_CODE", "PO1M", "PO1T", "PO2M", "PO2T", "X", "X.1"), class =
> "data.frame", row.names = c(NA,
> -11L))
>
> I want to combine the same Student ID and add up all the values for PO1M,
> PO1T,...,PO2T obtained by the same ID.
>
> How do I do that?
> Thank you for any help given

# load data

# Enter dataframe by hand
dat <- structure(list(STUDENT_ID = structure(c(1L, 1L, 1L, 1L, 1L, 1L,
2L, 2L, 2L, 2L, 2L), .Label = c("AA15285", "AA15286"), class = "factor"),
 ??? COURSE_CODE = structure(c(1L, 2L, 5L, 6L, 7L, 8L, 2L, 3L,
 ??? 4L, 5L, 6L), .Label = c("BAA1113", "BAA1322", "BAA2113",
 ??? "BAA2513", "BAA2713", "BAA2921", "BAA4273", "BAA4513"), class =
"factor"),
 ??? PO1M = c(155.7, 48.9, 83.2, NA, NA, NA, 48.05, 68.4, 41.65,
 ??? 82.35, NA), PO1T = c(180, 70, 100, NA, NA, NA, 70, 100, 60,
 ??? 100, NA), PO2M = c(NA, NA, NA, 37, NA, NA, NA, NA, NA, NA,
 ??? 41), PO2T = c(NA, NA, NA, 50, NA, NA, NA, NA, NA, NA, 50),
 ??? X = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), X.1 = c(NA,
 ??? NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names = c("STUDENT_ID",
"COURSE_CODE", "PO1M", "PO1T", "PO2M", "PO2T", "X", "X.1"), class =
"data.frame", row.names = c(NA,
-11L))

# Create sums by student ID

library(dplyr)
dat %>%
 ? group_by(STUDENT_ID) %>%
 ? summarize(sum.PO1M = sum(PO1M, na.rm = TRUE),
 ??????????? sum.PO1T = sum(PO1M, na.rm = TRUE),
 ??????????? sum.PO2M = sum(PO1M, na.rm = TRUE),
 ??????????? sum.PO2T = sum(PO1M, na.rm = TRUE))



From rb@er @end|ng |rom @t@u@edu  Tue Oct 16 03:41:12 2018
From: rb@er @end|ng |rom @t@u@edu (Robert Baer)
Date: Mon, 15 Oct 2018 20:41:12 -0500
Subject: [R] Finding unique terms
In-Reply-To: <CANTvJZKf7V4qxr87RsEvQc=nV3mpG+tmvy+8yC2tfjFdonaHFw@mail.gmail.com>
References: <CANTvJZKf7V4qxr87RsEvQc=nV3mpG+tmvy+8yC2tfjFdonaHFw@mail.gmail.com>
Message-ID: <3a5ca77c-289b-7e92-7f0c-bef1e567cf68@atsu.edu>



On 10/11/2018 5:12 PM, roslinazairimah zakaria wrote:
> Dear r-users,
>
> I have this data:
>
> structure(list(STUDENT_ID = structure(c(1L, 1L, 1L, 1L, 1L, 1L,
> 2L, 2L, 2L, 2L, 2L), .Label = c("AA15285", "AA15286"), class = "factor"),
>      COURSE_CODE = structure(c(1L, 2L, 5L, 6L, 7L, 8L, 2L, 3L,
>      4L, 5L, 6L), .Label = c("BAA1113", "BAA1322", "BAA2113",
>      "BAA2513", "BAA2713", "BAA2921", "BAA4273", "BAA4513"), class =
> "factor"),
>      PO1M = c(155.7, 48.9, 83.2, NA, NA, NA, 48.05, 68.4, 41.65,
>      82.35, NA), PO1T = c(180, 70, 100, NA, NA, NA, 70, 100, 60,
>      100, NA), PO2M = c(NA, NA, NA, 37, NA, NA, NA, NA, NA, NA,
>      41), PO2T = c(NA, NA, NA, 50, NA, NA, NA, NA, NA, NA, 50),
>      X = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), X.1 = c(NA,
>      NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names = c("STUDENT_ID",
> "COURSE_CODE", "PO1M", "PO1T", "PO2M", "PO2T", "X", "X.1"), class =
> "data.frame", row.names = c(NA,
> -11L))
>
> I want to combine the same Student ID and add up all the values for PO1M,
> PO1T,...,PO2T obtained by the same ID.
>
> How do I do that?
> Thank you for any help given.
>
oops!? Forgot to clean up after my cut and paste. Solution with dplyr 
looks like this:
# Create sums by student ID
library(dplyr)
dat %>%
 ? group_by(STUDENT_ID) %>%
 ? summarize(sum.PO1M = sum(PO1M, na.rm = TRUE),
 ??????????? sum.PO1T = sum(PO1T, na.rm = TRUE),
 ??????????? sum.PO2M = sum(PO2M, na.rm = TRUE),
 ??????????? sum.PO2T = sum(PO2T, na.rm = TRUE))



From n@th@n@|@p@r@on@ @end|ng |rom gm@||@com  Tue Oct 16 04:55:59 2018
From: n@th@n@|@p@r@on@ @end|ng |rom gm@||@com (Nathan Parsons)
Date: Mon, 15 Oct 2018 19:55:59 -0700
Subject: [R] Unlisting a nested dataset
Message-ID: <e20d1ef6-fb3d-4a9d-a774-0f4276e5b17b@Spark>

I?m attempting to do some content analysis on a few million tweets, but I can?t seem to get them cleaned correctly.

I?m trying to replicate the process outlined here:?https://stackoverflow.com/questions/46734501/opposite-of-unnest-tokens

My code:

tweets %>%
?unnest_tokens(word, text, token = 'tweets') %>%
?filter(!word %in% stop_words$word) %>%
?nest(word) %>%
?mutate(text = map(data, unlist),
? ? ? ? ???text = map_chr(text, paste, collapse = " ")) -> tweets

Unfortunately, I keep getting:

?Error in mutate_impl(.data, dots) :
?Evaluation error: cannot coerce type 'closure' to vector of type 'character?.

What am I doing wrong?

Here?s what the dataset looks like:

> glimpse(tweets)
Observations: 389,253
Variables: 12
$ status_id "x1047841705729306624", "x1046966595610927105", "x104709...
$ created_at "2018-10-04T13:31:45Z", "2018-10-02T03:34:22Z", "2018-10...
$ text "Technique is everything with olympic lifts ! @ Body By ...
$ lat 43.68359, 40.28412, 37.77066, 40.43139, 31.16889, 33.937...
$ lng -70.32841, -83.07859, -122.43598, -79.98069, -100.07689,...
$ county_name "Cumberland County", "Delaware County", "San Francisco C...
$ fips 23005, 39041, 6075, 42003, 48095, 6037, 6037, 55073, 482...
$ state_name "Maine", "Ohio", "California", "Pennsylvania", "Texas", ...
$ state_abb "ME", "OH", "CA", "PA", "TX", "CA", "CA", "WI", "TX", "A...
$ urban_level "Medium Metro", "Large Fringe Metro", "Large Central Met...
$ urban_code 3, 2, 1, 1, 6, 1, 1, 4, 1, 3, 2, 2, 1, 3, 6, 1, 1, 2, 3,...
$ population 277308, 184029, 830781, 1160433, 4160, 9509611, 9509611,...

--

Nate Parsons
Pronouns: He, Him, His
Graduate Teaching Assistant
Department of Sociology
Portland State University
Portland, Oregon

503-725-9025
503-725-3957 FAX

	[[alternative HTML version deleted]]



From bgunter@4567 @end|ng |rom gm@||@com  Tue Oct 16 05:04:10 2018
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 15 Oct 2018 20:04:10 -0700
Subject: [R] Finding unique terms
In-Reply-To: <3a5ca77c-289b-7e92-7f0c-bef1e567cf68@atsu.edu>
References: <CANTvJZKf7V4qxr87RsEvQc=nV3mpG+tmvy+8yC2tfjFdonaHFw@mail.gmail.com>
 <3a5ca77c-289b-7e92-7f0c-bef1e567cf68@atsu.edu>
Message-ID: <CAGxFJbRtVqY_pM+V8ywrFkwJqSszNnBNh=4sE7nV-rY0xpEVMQ@mail.gmail.com>

Here is a base R solution:
"dat" is the data frame as in Robert's solution.

> aggregate(dat[,3:6], by= dat[1], FUN = sum, na.rm = TRUE)
  STUDENT_ID   PO1M PO1T PO2M PO2T
1    AA15285 287.80  350   37   50
2    AA15286 240.45  330   41   50

Cheers,
Bert



Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Oct 15, 2018 at 6:42 PM Robert Baer <rbaer at atsu.edu> wrote:

>
>
> On 10/11/2018 5:12 PM, roslinazairimah zakaria wrote:
> > Dear r-users,
> >
> > I have this data:
> >
> > structure(list(STUDENT_ID = structure(c(1L, 1L, 1L, 1L, 1L, 1L,
> > 2L, 2L, 2L, 2L, 2L), .Label = c("AA15285", "AA15286"), class = "factor"),
> >      COURSE_CODE = structure(c(1L, 2L, 5L, 6L, 7L, 8L, 2L, 3L,
> >      4L, 5L, 6L), .Label = c("BAA1113", "BAA1322", "BAA2113",
> >      "BAA2513", "BAA2713", "BAA2921", "BAA4273", "BAA4513"), class =
> > "factor"),
> >      PO1M = c(155.7, 48.9, 83.2, NA, NA, NA, 48.05, 68.4, 41.65,
> >      82.35, NA), PO1T = c(180, 70, 100, NA, NA, NA, 70, 100, 60,
> >      100, NA), PO2M = c(NA, NA, NA, 37, NA, NA, NA, NA, NA, NA,
> >      41), PO2T = c(NA, NA, NA, 50, NA, NA, NA, NA, NA, NA, 50),
> >      X = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), X.1 = c(NA,
> >      NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names = c("STUDENT_ID",
> > "COURSE_CODE", "PO1M", "PO1T", "PO2M", "PO2T", "X", "X.1"), class =
> > "data.frame", row.names = c(NA,
> > -11L))
> >
> > I want to combine the same Student ID and add up all the values for PO1M,
> > PO1T,...,PO2T obtained by the same ID.
> >
> > How do I do that?
> > Thank you for any help given.
> >
> oops!  Forgot to clean up after my cut and paste. Solution with dplyr
> looks like this:
> # Create sums by student ID
> library(dplyr)
> dat %>%
>    group_by(STUDENT_ID) %>%
>    summarize(sum.PO1M = sum(PO1M, na.rm = TRUE),
>              sum.PO1T = sum(PO1T, na.rm = TRUE),
>              sum.PO2M = sum(PO2M, na.rm = TRUE),
>              sum.PO2T = sum(PO2T, na.rm = TRUE))
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Oct 16 10:27:14 2018
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 16 Oct 2018 08:27:14 +0000
Subject: [R] inconsistency in pbmclapply...
Message-ID: <SL2P216MB0091CBFD1E02AD33EEEAE501C8FE0@SL2P216MB0091.KORP216.PROD.OUTLOOK.COM>

dear members,
                             I am using parallel processing with pbmclapply. below is the code. LYG1[[1]] got from pbmclapply is not the same as LYG1[[1]] got from direct application of auto.arima. what may be wrong?

              debug at <tmp>#20: LYG1 <- pbmclapply(LYGH, FUN = auto.arima, mc.cores = detectCores())
Browse[2]>
  |=========================================                   |  68%, ETA 00:21
debug at <tmp>#21: LYG2 <- pbmclapply(LYGH, FUN = ets, mc.cores = detectCores())
Browse[2]> LYG1[[1]]
[1] "Error in ts(x) : 'ts' object must have one or more observations\n"
attr(,"class")
[1] "try-error"
attr(,"condition")
<simpleError in ts(x): 'ts' object must have one or more observations>
Warning message:
In pbmclapply(LYGH, FUN = auto.arima, mc.cores = detectCores()) :
  scheduled cores encountered errors in user code
Browse[2]> LYGH[[1]]
 [1] 0.700000000 0.400000000 0.300000000 0.150000000 0.250000000 0.950000000
 [7] 1.000000000 0.300000000 0.650000000 0.200000000 0.600000000 0.100000000
[13] 0.001412873 1.550000000 0.150000000 0.300000000 0.450000000 0.350000000
[19] 0.150000000 2.350000000 0.250000000 0.100000000 3.700000000 3.950000000
[25] 3.050000000 0.900000000 0.400000000 1.050000000 1.100000000 1.950000000
[31] 2.000000000 0.650000000 0.700000000 0.250000000 5.250000000 0.800000000
[37] 0.001412873
Browse[2]> auto.arima(LYGH[[1]])
Series: LYGH[[1]]
ARIMA(0,1,0)

sigma^2 estimated as 2.303:  log likelihood=-66.1
AIC=134.2   AICc=134.31   BIC=135.78

very many thanks for your time and effort.....
yours sincerely,
AKSHAY M KULKARNI

	[[alternative HTML version deleted]]



From petr@p|k@| @end|ng |rom prechez@@cz  Tue Oct 16 10:36:27 2018
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Tue, 16 Oct 2018 08:36:27 +0000
Subject: [R] regexp mystery
Message-ID: <d92354b2dbce431189273a2ba75652de@SRVEXCHCM1301.precheza.cz>

Dear all

I have text file with lines like this.

> dput(x[9])
"PYedehYev:  300 s                    Z?va~?: 2.160 kg"
> dput(x[11])
"et odYezko: 3                     \fas odYezku:   15 s"

I am able to extract some numbers but others give me headache.

gsub("^.*[^:] (\\d+.\\d+).*$", "\\1", x[9])
works for 300

gsub("^.*[:] (\\d+.\\d+).*$", "\\1", x[9])
works for 2.160

gsub("^.*: (\\d+).*$", "\\1", x[11])
works for 3

but only after many attempts I found that
gsub("^.*[^:] (\\d+).*$", "\\1", x[11])
works for 15

Can somebody explain my why for line 11 second item requires almost equvalent regular expression as first item in line 9 and why just

gsub("^.*[:] (\\d+).*$", "\\1", x[11])

does not produce 15 but 3???

Cheers
Petr

Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information about processing and protection of business partner?s personal data are available on website: https://www.precheza.cz/en/personal-data-protection-principles/
D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any documents attached to it may be confidential and are subject to the legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Oct 16 10:51:50 2018
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 16 Oct 2018 08:51:50 +0000
Subject: [R] Fw: inconsistency in pbmclapply...
In-Reply-To: <SL2P216MB0091CBFD1E02AD33EEEAE501C8FE0@SL2P216MB0091.KORP216.PROD.OUTLOOK.COM>
References: <SL2P216MB0091CBFD1E02AD33EEEAE501C8FE0@SL2P216MB0091.KORP216.PROD.OUTLOOK.COM>
Message-ID: <SL2P216MB00917F6691FBFAB687D2071FC8FE0@SL2P216MB0091.KORP216.PROD.OUTLOOK.COM>


dear members,
                         however, "ts must have more than one observation" error is only found for the first entry of LYG1 ( LYG1[[20]], LYG1[[200]], LYG1[[1000]]..etc are all well defined....!
________________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of akshay kulkarni <akshay_e4 at hotmail.com>
Sent: Tuesday, October 16, 2018 1:57 PM
To: R help Mailing  list
Subject: [R] inconsistency in pbmclapply...

dear members,
                             I am using parallel processing with pbmclapply. below is the code. LYG1[[1]] got from pbmclapply is not the same as LYG1[[1]] got from direct application of auto.arima. what may be wrong?

              debug at <tmp>#20: LYG1 <- pbmclapply(LYGH, FUN = auto.arima, mc.cores = detectCores())
Browse[2]>
  |=========================================                   |  68%, ETA 00:21
debug at <tmp>#21: LYG2 <- pbmclapply(LYGH, FUN = ets, mc.cores = detectCores())
Browse[2]> LYG1[[1]]
[1] "Error in ts(x) : 'ts' object must have one or more observations\n"
attr(,"class")
[1] "try-error"
attr(,"condition")
<simpleError in ts(x): 'ts' object must have one or more observations>
Warning message:
In pbmclapply(LYGH, FUN = auto.arima, mc.cores = detectCores()) :
  scheduled cores encountered errors in user code
Browse[2]> LYGH[[1]]
 [1] 0.700000000 0.400000000 0.300000000 0.150000000 0.250000000 0.950000000
 [7] 1.000000000 0.300000000 0.650000000 0.200000000 0.600000000 0.100000000
[13] 0.001412873 1.550000000 0.150000000 0.300000000 0.450000000 0.350000000
[19] 0.150000000 2.350000000 0.250000000 0.100000000 3.700000000 3.950000000
[25] 3.050000000 0.900000000 0.400000000 1.050000000 1.100000000 1.950000000
[31] 2.000000000 0.650000000 0.700000000 0.250000000 5.250000000 0.800000000
[37] 0.001412873
Browse[2]> auto.arima(LYGH[[1]])
Series: LYGH[[1]]
ARIMA(0,1,0)

sigma^2 estimated as 2.303:  log likelihood=-66.1
AIC=134.2   AICc=134.31   BIC=135.78

very many thanks for your time and effort.....
yours sincerely,
AKSHAY M KULKARNI

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]



From kry|ov@r00t @end|ng |rom gm@||@com  Tue Oct 16 11:08:00 2018
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 16 Oct 2018 12:08:00 +0300
Subject: [R] regexp mystery
In-Reply-To: <d92354b2dbce431189273a2ba75652de@SRVEXCHCM1301.precheza.cz>
References: <d92354b2dbce431189273a2ba75652de@SRVEXCHCM1301.precheza.cz>
Message-ID: <20181016120801.7afdd6e2@Tarkus>

On Tue, 16 Oct 2018 08:36:27 +0000
PIKAL Petr <petr.pikal at precheza.cz> wrote:

> > dput(x[11])  
> "et odYezko: 3                     \fas odYezku:   15 s"

> gsub("^.*: (\\d+).*$", "\\1", x[11])
> works for 3

This regular expression only matches one space between the colon and
the number, but you have more than one of them before "15".

> gsub("^.*[^:] (\\d+).*$", "\\1", x[11])
> works for 15

Match succeeds because a space is not a colon:

 ^.* matches "et odYezko: 3                     \fas odYezku:  "
 [^:] matches space " "
 space " " matches another space " "
 finally, (\\d+) matches "15"
 and .*$ matches " s"

If you need just the numbers, you might have more success by extracting
matches directly with gregexpr and regmatches:

(
	function(s) regmatches(
		s,
		gregexpr("\\d+(\\.\\d+)?", s)
	)
)("et odYezko: 3                     \fas odYezku:   15 s")

[[1]]
[1] "3"  "15"

(I'm creating an anonymous function and evaluating it immediately
because I need to pass the same string to both gregexpr and regmatches.)

If you need to capture numbers appearing in a specific context, a
better regular expression suiting your needs might be

":\\s*(\\d+(?:\\.\\d+)?)"

(A colon, followed by optional whitespace, followed by a number to
capture, consisting of decimals followed by optional, non-captured dot
followed by decimals)

but I couldn't find a way to extract captures from repeated match by
using vanilla R pattern matching (it's either regexec which returns
captures for the first match or gregexpr which returns all matches but
without the captures). If you can load the stringr package, it's very
easy, though:

str_match_all(
	c(
		"PYedehYev:  300 s              Z?va~?: 2.160 kg",
		"et odYezko: 3               \fas odYezku:   15 s"
	),
	":\\s*(\\d+(?:\\.\\d+)?)"
)
[[1]]
     [,1]      [,2]   
[1,] ":  300"  "300"  
[2,] ": 2.160" "2.160"

[[2]]
     [,1]     [,2]
[1,] ": 3"    "3" 
[2,] ":   15" "15"

Column 2 of each list item contains the requested captures.

-- 
Best regards,
Ivan



From petr@p|k@| @end|ng |rom prechez@@cz  Tue Oct 16 11:23:54 2018
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Tue, 16 Oct 2018 09:23:54 +0000
Subject: [R] regexp mystery
In-Reply-To: <20181016120801.7afdd6e2@Tarkus>
References: <d92354b2dbce431189273a2ba75652de@SRVEXCHCM1301.precheza.cz>
 <20181016120801.7afdd6e2@Tarkus>
Message-ID: <7faadb5336b8491490ecf5a0a4cae979@SRVEXCHCM1301.precheza.cz>

Hi

Thanks a lot for your insightful answer. I will need to study it in detail, gregexpr and regexpr seems to be quite handy for what I need.

Cheers
Petr

> -----Original Message-----
> From: Ivan Krylov <krylov.r00t at gmail.com>
> Sent: Tuesday, October 16, 2018 11:08 AM
> To: PIKAL Petr <petr.pikal at precheza.cz>
> Cc: r-help at r-project.org
> Subject: Re: [R] regexp mystery
>
> On Tue, 16 Oct 2018 08:36:27 +0000
> PIKAL Petr <petr.pikal at precheza.cz> wrote:
>
> > > dput(x[11])
> > "et odYezko: 3                     \fas odYezku:   15 s"
>
> > gsub("^.*: (\\d+).*$", "\\1", x[11])
> > works for 3
>
> This regular expression only matches one space between the colon and the
> number, but you have more than one of them before "15".
>
> > gsub("^.*[^:] (\\d+).*$", "\\1", x[11]) works for 15
>
> Match succeeds because a space is not a colon:
>
>  ^.* matches "et odYezko: 3                     \fas odYezku:  "
>  [^:] matches space " "
>  space " " matches another space " "
>  finally, (\\d+) matches "15"
>  and .*$ matches " s"
>
> If you need just the numbers, you might have more success by extracting
> matches directly with gregexpr and regmatches:
>
> (
> function(s) regmatches(
> s,
> gregexpr("\\d+(\\.\\d+)?", s)
> )
> )("et odYezko: 3                     \fas odYezku:   15 s")
>
> [[1]]
> [1] "3"  "15"
>
> (I'm creating an anonymous function and evaluating it immediately because I
> need to pass the same string to both gregexpr and regmatches.)
>
> If you need to capture numbers appearing in a specific context, a better regular
> expression suiting your needs might be
>
> ":\\s*(\\d+(?:\\.\\d+)?)"
>
> (A colon, followed by optional whitespace, followed by a number to capture,
> consisting of decimals followed by optional, non-captured dot followed by
> decimals)
>
> but I couldn't find a way to extract captures from repeated match by using
> vanilla R pattern matching (it's either regexec which returns captures for the
> first match or gregexpr which returns all matches but without the captures). If
> you can load the stringr package, it's very easy, though:
>
> str_match_all(
> c(
> "PYedehYev:  300 s              Z?va~?: 2.160 kg",
> "et odYezko: 3               \fas odYezku:   15 s"
> ),
> ":\\s*(\\d+(?:\\.\\d+)?)"
> )
> [[1]]
>      [,1]      [,2]
> [1,] ":  300"  "300"
> [2,] ": 2.160" "2.160"
>
> [[2]]
>      [,1]     [,2]
> [1,] ": 3"    "3"
> [2,] ":   15" "15"
>
> Column 2 of each list item contains the requested captures.
>
> --
> Best regards,
> Ivan
Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information about processing and protection of business partner?s personal data are available on website: https://www.precheza.cz/en/personal-data-protection-principles/
D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any documents attached to it may be confidential and are subject to the legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/


From ro@||n@ump @end|ng |rom gm@||@com  Tue Oct 16 13:58:52 2018
From: ro@||n@ump @end|ng |rom gm@||@com (roslinazairimah zakaria)
Date: Tue, 16 Oct 2018 19:58:52 +0800
Subject: [R] Finding unique terms
In-Reply-To: <8194FCE8-B018-466D-8C05-B7927A180B98@dcn.davis.ca.us>
References: <CANTvJZKf7V4qxr87RsEvQc=nV3mpG+tmvy+8yC2tfjFdonaHFw@mail.gmail.com>
 <6a70a2f0-b2df-73a8-bf08-20ef2059dc49@kogentum.hu>
 <CANTvJZJ44mM8c6UHebXdipvvy=4JcrnE_GEZLtRxnXrV4TtHvA@mail.gmail.com>
 <8194FCE8-B018-466D-8C05-B7927A180B98@dcn.davis.ca.us>
Message-ID: <CANTvJZLxTQEGJnVnMwGmfL2AE7scDXHND=9_e=_=N+g9hRPBUA@mail.gmail.com>

Yes you are right, I want the sum. I wll change the formula accordingly.

On Fri, Oct 12, 2018 at 10:36 AM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> You said "add up"... so you did not mean to say that? Denes computed the
> mean...
>
> On October 11, 2018 3:56:23 PM PDT, roslinazairimah zakaria <
> roslinaump at gmail.com> wrote:
> >Hi Denes,
> >
> >It works perfectly as I want!
> >
> >Thanks a lot.
> >
> >On Fri, Oct 12, 2018 at 6:29 AM D?nes T?th <toth.denes at kogentum.hu>
> >wrote:
> >
> >>
> >>
> >> On 10/12/2018 12:12 AM, roslinazairimah zakaria wrote:
> >> > Dear r-users,
> >> >
> >> > I have this data:
> >> >
> >> > structure(list(STUDENT_ID = structure(c(1L, 1L, 1L, 1L, 1L, 1L,
> >> > 2L, 2L, 2L, 2L, 2L), .Label = c("AA15285", "AA15286"), class =
> >"factor"),
> >> >      COURSE_CODE = structure(c(1L, 2L, 5L, 6L, 7L, 8L, 2L, 3L,
> >> >      4L, 5L, 6L), .Label = c("BAA1113", "BAA1322", "BAA2113",
> >> >      "BAA2513", "BAA2713", "BAA2921", "BAA4273", "BAA4513"), class
> >=
> >> > "factor"),
> >> >      PO1M = c(155.7, 48.9, 83.2, NA, NA, NA, 48.05, 68.4, 41.65,
> >> >      82.35, NA), PO1T = c(180, 70, 100, NA, NA, NA, 70, 100, 60,
> >> >      100, NA), PO2M = c(NA, NA, NA, 37, NA, NA, NA, NA, NA, NA,
> >> >      41), PO2T = c(NA, NA, NA, 50, NA, NA, NA, NA, NA, NA, 50),
> >> >      X = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), X.1 = c(NA,
> >> >      NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names =
> >c("STUDENT_ID",
> >> > "COURSE_CODE", "PO1M", "PO1T", "PO2M", "PO2T", "X", "X.1"), class =
> >> > "data.frame", row.names = c(NA,
> >> > -11L))
> >> >
> >> > I want to combine the same Student ID and add up all the values for
> >PO1M,
> >> > PO1T,...,PO2T obtained by the same ID.
> >>
> >> dat <- structure(list(STUDENT_ID = structure(c(1L, 1L, 1L, 1L, 1L,
> >1L,
> >> 2L, 2L, 2L, 2L, 2L), .Label = c("AA15285", "AA15286"), class =
> >"factor"),
> >>      COURSE_CODE = structure(c(1L, 2L, 5L, 6L, 7L, 8L, 2L, 3L,
> >>      4L, 5L, 6L), .Label = c("BAA1113", "BAA1322", "BAA2113",
> >>      "BAA2513", "BAA2713", "BAA2921", "BAA4273", "BAA4513"), class =
> >> "factor"),
> >>      PO1M = c(155.7, 48.9, 83.2, NA, NA, NA, 48.05, 68.4, 41.65,
> >>      82.35, NA), PO1T = c(180, 70, 100, NA, NA, NA, 70, 100, 60,
> >>      100, NA), PO2M = c(NA, NA, NA, 37, NA, NA, NA, NA, NA, NA,
> >>      41), PO2T = c(NA, NA, NA, 50, NA, NA, NA, NA, NA, NA, 50),
> >>      X = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), X.1 = c(NA,
> >>      NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names =
> >c("STUDENT_ID",
> >> "COURSE_CODE", "PO1M", "PO1T", "PO2M", "PO2T", "X", "X.1"), class =
> >> "data.frame", row.names = c(NA,
> >> -11L))
> >>
> >> # I assume you would like to add up the values with na.rm = TRUE
> >> meanFn <- function(x) mean(x, na.rm = TRUE)
> >>
> >> # see ?aggregate
> >> aggregate(dat[, c("PO1M", "PO1T", "PO2M")],
> >>            by = dat["STUDENT_ID"],
> >>            FUN = meanFn)
> >>
> >> # if you have largish or large data
> >> library(data.table)
> >> dat2 <- as.data.table(dat)
> >> dat2[, lapply(.SD, meanFn),
> >>       by = STUDENT_ID,
> >>       .SDcols = c("PO1M", "PO1T", "PO2M")]
> >>
> >>
> >> Regards,
> >> Denes
> >>
> >>
> >> >
> >> > How do I do that?
> >> > Thank you for any help given.
> >> >
> >>
>
> --
> Sent from my phone. Please excuse my brevity.
>


-- 
*Roslinazairimah Zakaria*
*Tel: +609-5492370; Fax. No.+609-5492766*

*Email: roslinazairimah at ump.edu.my <roslinazairimah at ump.edu.my>;
roslinaump at gmail.com <roslinaump at gmail.com>*
Faculty of Industrial Sciences & Technology
University Malaysia Pahang
Lebuhraya Tun Razak, 26300 Gambang, Pahang, Malaysia

	[[alternative HTML version deleted]]



From peter@@@|zm@nu@er @end|ng |rom gm@||@com  Tue Oct 16 16:22:44 2018
From: peter@@@|zm@nu@er @end|ng |rom gm@||@com (peter salzman)
Date: Tue, 16 Oct 2018 10:22:44 -0400
Subject: [R] year and week to date - before 1/1 and after 12/31
Message-ID: <CAHdotinT-X5+huK05prObMuDSPHgBtRBe2ERdVr57bz1A5o06w@mail.gmail.com>

hi,

to turn year and week into the date one can do the following:

as.Date('2018 05 Sun', "%Y %W %a")

however, when we want the Sunday (1st day of week) of the 1st week of 2018
we get NA because 1/1/2018 was on Monday

as.Date('2018 00 Mon',format="%Y %U %a")
## 2018-01-01
as.Date('2018 00 Sun',format="%Y %U %a")
## NA

btw the same goes for last week
as.Date('2017 53 Sun',format="%Y %U %a")
## 2017-12-31
as.Date('2017 53 Mon',format="%Y %U %a")
## NA

So my question is :
how do i get
from "2018 00 Sun" to 2018-12-31
and
from "2017 53 Mon" to 2018-01-01

i realize i can loop over days of week and do some if/then statements,
but is there a built in function?

thank you
peter





-- 
Peter Salzman, PhD
Department of Biostatistics and Computational Biology
University of Rochester

	[[alternative HTML version deleted]]



From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Oct 16 15:09:02 2018
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 16 Oct 2018 13:09:02 +0000
Subject: [R] Fw: inconsistency in pbmclapply...
In-Reply-To: <SL2P216MB00917F6691FBFAB687D2071FC8FE0@SL2P216MB0091.KORP216.PROD.OUTLOOK.COM>
References: <SL2P216MB0091CBFD1E02AD33EEEAE501C8FE0@SL2P216MB0091.KORP216.PROD.OUTLOOK.COM>,
 <SL2P216MB00917F6691FBFAB687D2071FC8FE0@SL2P216MB0091.KORP216.PROD.OUTLOOK.COM>
Message-ID: <SL2P216MB00917A205738DF0F6C4E6DADC8FE0@SL2P216MB0091.KORP216.PROD.OUTLOOK.COM>

dear members,
                             I am attaching the object LYGH as used in my expression with pbmclapply so that you can recreate the expression:

LYG1 <- pbmclapply(LYGH, FUN = auto.arima, mc.cores = detectCores()

very many thanks for your help and time.....
yours sincerely,
AKSHAY M KULKARNI
________________________________
From: akshay kulkarni <akshay_e4 at hotmail.com>
Sent: Tuesday, October 16, 2018 2:21 PM
To: R help Mailing list
Subject: Fw: inconsistency in pbmclapply...


dear members,
                         however, "ts must have more than one observation" error is only found for the first entry of LYG1 ( LYG1[[20]], LYG1[[200]], [[elided Hotmail spam]]
________________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of akshay kulkarni <akshay_e4 at hotmail.com>
Sent: Tuesday, October 16, 2018 1:57 PM
To: R help Mailing  list
Subject: [R] inconsistency in pbmclapply...

dear members,
                             I am using parallel processing with pbmclapply. below is the code. LYG1[[1]] got from pbmclapply is not the same as LYG1[[1]] got from direct application of auto.arima. what may be wrong?

              debug at <tmp>#20: LYG1 <- pbmclapply(LYGH, FUN = auto.arima, mc.cores = detectCores())
Browse[2]>
  |=========================================                   |  68%, ETA 00:21
debug at <tmp>#21: LYG2 <- pbmclapply(LYGH, FUN = ets, mc.cores = detectCores())
Browse[2]> LYG1[[1]]
[1] "Error in ts(x) : 'ts' object must have one or more observations\n"
attr(,"class")
[1] "try-error"
attr(,"condition")
<simpleError in ts(x): 'ts' object must have one or more observations>
Warning message:
In pbmclapply(LYGH, FUN = auto.arima, mc.cores = detectCores()) :
  scheduled cores encountered errors in user code
Browse[2]> LYGH[[1]]
 [1] 0.700000000 0.400000000 0.300000000 0.150000000 0.250000000 0.950000000
 [7] 1.000000000 0.300000000 0.650000000 0.200000000 0.600000000 0.100000000
[13] 0.001412873 1.550000000 0.150000000 0.300000000 0.450000000 0.350000000
[19] 0.150000000 2.350000000 0.250000000 0.100000000 3.700000000 3.950000000
[25] 3.050000000 0.900000000 0.400000000 1.050000000 1.100000000 1.950000000
[31] 2.000000000 0.650000000 0.700000000 0.250000000 5.250000000 0.800000000
[37] 0.001412873
Browse[2]> auto.arima(LYGH[[1]])
Series: LYGH[[1]]
ARIMA(0,1,0)

sigma^2 estimated as 2.303:  log likelihood=-66.1
AIC=134.2   AICc=134.31   BIC=135.78

very many thanks for your time and effort.....
yours sincerely,
AKSHAY M KULKARNI

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From peter@@@|zm@nu@er @end|ng |rom gm@||@com  Tue Oct 16 17:11:12 2018
From: peter@@@|zm@nu@er @end|ng |rom gm@||@com (peter salzman)
Date: Tue, 16 Oct 2018 11:11:12 -0400
Subject: [R] year and week to date - before 1/1 and after 12/31
In-Reply-To: <CAHdotinT-X5+huK05prObMuDSPHgBtRBe2ERdVr57bz1A5o06w@mail.gmail.com>
References: <CAHdotinT-X5+huK05prObMuDSPHgBtRBe2ERdVr57bz1A5o06w@mail.gmail.com>
Message-ID: <CAHdotimPAJwM5-HJyafESW-OvP4bOxKAxLGTG5ecdq1WDzHeAw@mail.gmail.com>

it is simpler than i thought

first day of given week is the last day minus 6days

in other words:
d1 = as.Date('2018 00 Sat',format="%Y %U %a") - 6
d2 = as.Date('2018 00 Sun',format="%Y %U %a")
are the same as long both are not NA

therefore to get the one that is not NA one can do

max( c(d1,d2), na.rm=TRUE )

maybe there is some other trick

best,
peter






On Tue, Oct 16, 2018 at 10:22 AM peter salzman <peter.salzmanuser at gmail.com>
wrote:

> hi,
>
> to turn year and week into the date one can do the following:
>
> as.Date('2018 05 Sun', "%Y %W %a")
>
> however, when we want the Sunday (1st day of week) of the 1st week of 2018
> we get NA because 1/1/2018 was on Monday
>
> as.Date('2018 00 Mon',format="%Y %U %a")
> ## 2018-01-01
> as.Date('2018 00 Sun',format="%Y %U %a")
> ## NA
>
> btw the same goes for last week
> as.Date('2017 53 Sun',format="%Y %U %a")
> ## 2017-12-31
> as.Date('2017 53 Mon',format="%Y %U %a")
> ## NA
>
> So my question is :
> how do i get
> from "2018 00 Sun" to 2018-12-31
> and
> from "2017 53 Mon" to 2018-01-01
>
> i realize i can loop over days of week and do some if/then statements,
> but is there a built in function?
>
> thank you
> peter
>
>
>
>
>
> --
> Peter Salzman, PhD
> Department of Biostatistics and Computational Biology
> University of Rochester
>


-- 
Peter Salzman, PhD
Department of Biostatistics and Computational Biology
University of Rochester

	[[alternative HTML version deleted]]



From bgunter@4567 @end|ng |rom gm@||@com  Tue Oct 16 17:21:23 2018
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 16 Oct 2018 08:21:23 -0700
Subject: [R] Fw: inconsistency in pbmclapply...
In-Reply-To: <SL2P216MB00917A205738DF0F6C4E6DADC8FE0@SL2P216MB0091.KORP216.PROD.OUTLOOK.COM>
References: <SL2P216MB0091CBFD1E02AD33EEEAE501C8FE0@SL2P216MB0091.KORP216.PROD.OUTLOOK.COM>
 <SL2P216MB00917F6691FBFAB687D2071FC8FE0@SL2P216MB0091.KORP216.PROD.OUTLOOK.COM>
 <SL2P216MB00917A205738DF0F6C4E6DADC8FE0@SL2P216MB0091.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAGxFJbQjO8-SBgJx7zSmKUKW=m6rxa_6gR8uAD+=7Rys0xQaFQ@mail.gmail.com>

As I think you hve been told before, most attachments don't make it through
the mail server. Use ?dput instead to include data.

Also, post in plain text, not html.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Oct 16, 2018 at 8:03 AM akshay kulkarni <akshay_e4 at hotmail.com>
wrote:

> dear members,
>                              I am attaching the object LYGH as used in my
> expression with pbmclapply so that you can recreate the expression:
>
> LYG1 <- pbmclapply(LYGH, FUN = auto.arima, mc.cores = detectCores()
>
> very many thanks for your help and time.....
> yours sincerely,
> AKSHAY M KULKARNI
> ________________________________
> From: akshay kulkarni <akshay_e4 at hotmail.com>
> Sent: Tuesday, October 16, 2018 2:21 PM
> To: R help Mailing list
> Subject: Fw: inconsistency in pbmclapply...
>
>
> dear members,
>                          however, "ts must have more than one observation"
> error is only found for the first entry of LYG1 ( LYG1[[20]], LYG1[[200]],
> [[elided Hotmail spam]]
> ________________________________________
> From: R-help <r-help-bounces at r-project.org> on behalf of akshay kulkarni <
> akshay_e4 at hotmail.com>
> Sent: Tuesday, October 16, 2018 1:57 PM
> To: R help Mailing  list
> Subject: [R] inconsistency in pbmclapply...
>
> dear members,
>                              I am using parallel processing with
> pbmclapply. below is the code. LYG1[[1]] got from pbmclapply is not the
> same as LYG1[[1]] got from direct application of auto.arima. what may be
> wrong?
>
>               debug at <tmp>#20: LYG1 <- pbmclapply(LYGH, FUN =
> auto.arima, mc.cores = detectCores())
> Browse[2]>
>   |=========================================                   |  68%, ETA
> 00:21
> debug at <tmp>#21: LYG2 <- pbmclapply(LYGH, FUN = ets, mc.cores =
> detectCores())
> Browse[2]> LYG1[[1]]
> [1] "Error in ts(x) : 'ts' object must have one or more observations\n"
> attr(,"class")
> [1] "try-error"
> attr(,"condition")
> <simpleError in ts(x): 'ts' object must have one or more observations>
> Warning message:
> In pbmclapply(LYGH, FUN = auto.arima, mc.cores = detectCores()) :
>   scheduled cores encountered errors in user code
> Browse[2]> LYGH[[1]]
>  [1] 0.700000000 0.400000000 0.300000000 0.150000000 0.250000000
> 0.950000000
>  [7] 1.000000000 0.300000000 0.650000000 0.200000000 0.600000000
> 0.100000000
> [13] 0.001412873 1.550000000 0.150000000 0.300000000 0.450000000
> 0.350000000
> [19] 0.150000000 2.350000000 0.250000000 0.100000000 3.700000000
> 3.950000000
> [25] 3.050000000 0.900000000 0.400000000 1.050000000 1.100000000
> 1.950000000
> [31] 2.000000000 0.650000000 0.700000000 0.250000000 5.250000000
> 0.800000000
> [37] 0.001412873
> Browse[2]> auto.arima(LYGH[[1]])
> Series: LYGH[[1]]
> ARIMA(0,1,0)
>
> sigma^2 estimated as 2.303:  log likelihood=-66.1
> AIC=134.2   AICc=134.31   BIC=135.78
>
> very many thanks for your time and effort.....
> yours sincerely,
> AKSHAY M KULKARNI
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From @||redo@corte||@n|co|@u @end|ng |rom gm@||@com  Tue Oct 16 16:55:39 2018
From: @||redo@corte||@n|co|@u @end|ng |rom gm@||@com (Alfredo Cortell)
Date: Tue, 16 Oct 2018 16:55:39 +0200
Subject: [R] DNAbin
Message-ID: <CAPxhGmiOQRLcxC+URoncL_wDJ_m_LgjFYDfNxpKU0paD6d+2mg@mail.gmail.com>

Hola, buenos dias.

Escribo porque me gustar?a saber si puedo convertir un data frame que
consiste en variables (indicadas por columnas) y en filas (el n?mero de
personas que tienen cada variable en determinada hora del dia.) en un tipo
de objeto DNAbin para poder calcular la divergencia de Tajima. He estado
d?ndole vueltas, y no encuentro la forma de convertirlo

Muchas gracias,



V1 V2 V3 V4 V5 V6 V7
1 0 0 0 0 0 0
4 0 0 1 0 0 0
18 0 0 3 1 0 0
20 0 0 155 1 0 0
50 0 0 200 1 0 0
120 0 0 200 1 0 0
456 0 0 200 1 0 0

	[[alternative HTML version deleted]]



From Scott@A@Ne@||n @end|ng |rom tuck@d@rtmouth@edu  Tue Oct 16 18:33:34 2018
From: Scott@A@Ne@||n @end|ng |rom tuck@d@rtmouth@edu (Neslin, Scott A.)
Date: Tue, 16 Oct 2018 16:33:34 +0000
Subject: [R] GLM Model Summary
Message-ID: <af3ff2ce935e471c9356281d9945fcd5@tuck.dartmouth.edu>

R-Help:

We are working with your GLM R package.  The Summary(Model) now gets printed by the program as one object and we want to put the coefficient columns into Excel.  We took an initial stab at this by counting the number of characters occupied by each column.  But we have now learned that the number of characters in a column depends on the length of the variable names, so is not a constant number (e.g., 54 characters to a line).

We therefore ask, is it possible for us to get the Summary(Model) column by column, i.e., a separate object for each column?  That way we could assemble an Excel table easily rather than having to count the number of characters.

Is this possible for us to do by ourselves?  Or could you modify the package in some way?

We appreciate your attention.  Thank you!

Scott Neslin
Prasad Vana

Dartmouth College

	[[alternative HTML version deleted]]



From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Oct 16 18:52:53 2018
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 16 Oct 2018 12:52:53 -0400
Subject: [R] GLM Model Summary
In-Reply-To: <af3ff2ce935e471c9356281d9945fcd5@tuck.dartmouth.edu>
References: <af3ff2ce935e471c9356281d9945fcd5@tuck.dartmouth.edu>
Message-ID: <08dd5842-c39d-90ff-90b4-095db1ae452b@gmail.com>

On 16/10/2018 12:33 PM, Neslin, Scott A. wrote:
> R-Help:
> 
> We are working with your GLM R package.  The Summary(Model) now gets printed by the program as one object and we want to put the coefficient columns into Excel.  We took an initial stab at this by counting the number of characters occupied by each column.  But we have now learned that the number of characters in a column depends on the length of the variable names, so is not a constant number (e.g., 54 characters to a line).

There is no GLM R package as far as I know.  There's a glm() function in 
the stats package.  Is that what you meant?

What would probably be best is if you showed us a simple example of what 
you are doing, and then referred to the results from that when saying 
what you want to extract.

Duncan Murdoch

> 
> We therefore ask, is it possible for us to get the Summary(Model) column by column, i.e., a separate object for each column?  That way we could assemble an Excel table easily rather than having to count the number of characters.
> 
> Is this possible for us to do by ourselves?  Or could you modify the package in some way?
> 
> We appreciate your attention.  Thank you!
> 
> Scott Neslin
> Prasad Vana
> 
> Dartmouth College
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>



From peter@|@ng|e|der @end|ng |rom gm@||@com  Tue Oct 16 18:54:37 2018
From: peter@|@ng|e|der @end|ng |rom gm@||@com (Peter Langfelder)
Date: Tue, 16 Oct 2018 09:54:37 -0700
Subject: [R] GLM Model Summary
In-Reply-To: <af3ff2ce935e471c9356281d9945fcd5@tuck.dartmouth.edu>
References: <af3ff2ce935e471c9356281d9945fcd5@tuck.dartmouth.edu>
Message-ID: <CA+hbrhWQZWq5Rvop4GWVKTA2uRzHsdptk0i4B2wKoxvS22RQmw@mail.gmail.com>

The coefficients are best obtained as summary(Model)$coefficients.
This is a matrix can than be saved as a csv file and opened in excel
or other spreadsheet software.

HTH,

Peter
On Tue, Oct 16, 2018 at 9:44 AM Neslin, Scott A.
<Scott.A.Neslin at tuck.dartmouth.edu> wrote:
>
> R-Help:
>
> We are working with your GLM R package.  The Summary(Model) now gets printed by the program as one object and we want to put the coefficient columns into Excel.  We took an initial stab at this by counting the number of characters occupied by each column.  But we have now learned that the number of characters in a column depends on the length of the variable names, so is not a constant number (e.g., 54 characters to a line).
>
> We therefore ask, is it possible for us to get the Summary(Model) column by column, i.e., a separate object for each column?  That way we could assemble an Excel table easily rather than having to count the number of characters.
>
> Is this possible for us to do by ourselves?  Or could you modify the package in some way?
>
> We appreciate your attention.  Thank you!
>
> Scott Neslin
> Prasad Vana
>
> Dartmouth College
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



From pro|@@m|t@m|tt@| @end|ng |rom gm@||@com  Tue Oct 16 19:02:18 2018
From: pro|@@m|t@m|tt@| @end|ng |rom gm@||@com (Amit Mittal)
Date: Tue, 16 Oct 2018 22:32:18 +0530
Subject: [R] GLM Model Summary
In-Reply-To: <08dd5842-c39d-90ff-90b4-095db1ae452b@gmail.com>
References: <af3ff2ce935e471c9356281d9945fcd5@tuck.dartmouth.edu>
 <08dd5842-c39d-90ff-90b4-095db1ae452b@gmail.com>
Message-ID: <CAP8zaQAP=ihP7b0HzNc2aC=QhJ2dioTWLGfpk7keG95XJ=J7cg@mail.gmail.com>

You can just use

'slotNames(modelname)
This will return sub objects for which names can be extracted

Eg

slotNames(modelname)
[1] "mfit" "model"
names(modelname at mfit)
names(modelname at model)
Will return all objects within the model including coed car R cover vcov as
applicable and you can store per choice

However within the column they will still be text

BR

On Tue 16 Oct, 2018, 10:23 PM Duncan Murdoch, <murdoch.duncan at gmail.com>
wrote:

> On 16/10/2018 12:33 PM, Neslin, Scott A. wrote:
> > R-Help:
> >
> > We are working with your GLM R package.  The Summary(Model) now gets
> printed by the program as one object and we want to put the coefficient
> columns into Excel.  We took an initial stab at this by counting the number
> of characters occupied by each column.  But we have now learned that the
> number of characters in a column depends on the length of the variable
> names, so is not a constant number (e.g., 54 characters to a line).
>
> There is no GLM R package as far as I know.  There's a glm() function in
> the stats package.  Is that what you meant?
>
> What would probably be best is if you showed us a simple example of what
> you are doing, and then referred to the results from that when saying
> what you want to extract.
>
> Duncan Murdoch
>
> >
> > We therefore ask, is it possible for us to get the Summary(Model) column
> by column, i.e., a separate object for each column?  That way we could
> assemble an Excel table easily rather than having to count the number of
> characters.
> >
> > Is this possible for us to do by ourselves?  Or could you modify the
> package in some way?
> >
> > We appreciate your attention.  Thank you!
> >
> > Scott Neslin
> > Prasad Vana
> >
> > Dartmouth College
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
-- 

______________________________

Amit Mittal
Pursuing Ph.D. in Finance and Accounting
Indian Institute of Management, Lucknow
Visit my SSRN author page:
http://ssrn.com/author=2665511
* Top 10% Downloaded Author on SSRN
Mob: +91 7525023664

This message has been sent from a mobile device. I may contact you again.

_________________

	[[alternative HTML version deleted]]



From m@rc_@chw@rtz @end|ng |rom me@com  Tue Oct 16 19:17:20 2018
From: m@rc_@chw@rtz @end|ng |rom me@com (Marc Schwartz)
Date: Tue, 16 Oct 2018 13:17:20 -0400
Subject: [R] GLM Model Summary
In-Reply-To: <af3ff2ce935e471c9356281d9945fcd5@tuck.dartmouth.edu>
References: <af3ff2ce935e471c9356281d9945fcd5@tuck.dartmouth.edu>
Message-ID: <3DAFBCD1-B635-4A45-B7EE-89C56E806177@me.com>



> On Oct 16, 2018, at 12:33 PM, Neslin, Scott A. <Scott.A.Neslin at tuck.dartmouth.edu> wrote:
> 
> R-Help:
> 
> We are working with your GLM R package.  The Summary(Model) now gets printed by the program as one object and we want to put the coefficient columns into Excel.  We took an initial stab at this by counting the number of characters occupied by each column.  But we have now learned that the number of characters in a column depends on the length of the variable names, so is not a constant number (e.g., 54 characters to a line).
> 
> We therefore ask, is it possible for us to get the Summary(Model) column by column, i.e., a separate object for each column?  That way we could assemble an Excel table easily rather than having to count the number of characters.
> 
> Is this possible for us to do by ourselves?  Or could you modify the package in some way?
> 
> We appreciate your attention.  Thank you!
> 
> Scott Neslin
> Prasad Vana
> 
> Dartmouth College


Hi,

Presuming that you are talking about the glm() function, as there is no GLM package as far as I can see, R model objects have a structure that can be viewed using the str() function. The help for this function can be viewed using:

   ?str

You can then use:

  str(summary(YourModelObject))

That will give you some insights into the model object components and that same str() function is valuable for investigating other objects as well.

That being said, R's model objects typically have 'extractor' functions to make it easy to obtain commonly used components of the model object, which can be complicated.

The R manual "An Introduction to R", has a section on some of these:

    https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Generic-functions-for-extracting-model-information <https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Generic-functions-for-extracting-model-information>

Thus, for example, using:

  coef(summary(YourModelObject))

will return the matrix of coefficients and related parameters from the summary model object.

Once you have that matrix object, you can write it out to a CSV file using ?write.csv, where the CSV file can then be opened with or imported into Excel.

So the steps might be along the lines of:

  my.coef <- coef(summary(YourModelObject))

  write.csv(my.coef, file = "MyCoefficients.csv")


The R Data Import/Export manual:

  https://cran.r-project.org/doc/manuals/r-release/R-data.html <https://cran.r-project.org/doc/manuals/r-release/R-data.html>

has some insights into pathways for getting data to and from R, including some packages that can directly write Excel files. You may wish to review that manual as well.

Regards,

Marc Schwartz



	[[alternative HTML version deleted]]



From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Oct 16 19:22:10 2018
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 16 Oct 2018 10:22:10 -0700
Subject: [R] year and week to date - before 1/1 and after 12/31
In-Reply-To: <CAHdotimPAJwM5-HJyafESW-OvP4bOxKAxLGTG5ecdq1WDzHeAw@mail.gmail.com>
References: <CAHdotinT-X5+huK05prObMuDSPHgBtRBe2ERdVr57bz1A5o06w@mail.gmail.com>
 <CAHdotimPAJwM5-HJyafESW-OvP4bOxKAxLGTG5ecdq1WDzHeAw@mail.gmail.com>
Message-ID: <338ACAD3-127C-49AD-943F-9DD5BBDE2421@dcn.davis.ca.us>

If the date in your character representation does not exist then there is no requirement for a POSIX function to give any reliable answer... including NA. Using 00 as the week number won't always work.

The first week/weekday combination that is guaranteed to exist by POSIX is 1/1 (first Monday). If the corresponding mon/mday is 1/1 then no days exist in week zero for that year and the first Sunday is 6 days more than the mday of the first Monday, else the mday of the first Sunday is one day less than the mday of the first Monday.

You should if at all possible repair the computations that are creating the invalid string dates you mention.

On October 16, 2018 8:11:12 AM PDT, peter salzman <peter.salzmanuser at gmail.com> wrote:
>it is simpler than i thought
>
>first day of given week is the last day minus 6days
>
>in other words:
>d1 = as.Date('2018 00 Sat',format="%Y %U %a") - 6
>d2 = as.Date('2018 00 Sun',format="%Y %U %a")
>are the same as long both are not NA
>
>therefore to get the one that is not NA one can do
>
>max( c(d1,d2), na.rm=TRUE )
>
>maybe there is some other trick
>
>best,
>peter
>
>
>
>
>
>
>On Tue, Oct 16, 2018 at 10:22 AM peter salzman
><peter.salzmanuser at gmail.com>
>wrote:
>
>> hi,
>>
>> to turn year and week into the date one can do the following:
>>
>> as.Date('2018 05 Sun', "%Y %W %a")
>>
>> however, when we want the Sunday (1st day of week) of the 1st week of
>2018
>> we get NA because 1/1/2018 was on Monday
>>
>> as.Date('2018 00 Mon',format="%Y %U %a")
>> ## 2018-01-01
>> as.Date('2018 00 Sun',format="%Y %U %a")
>> ## NA
>>
>> btw the same goes for last week
>> as.Date('2017 53 Sun',format="%Y %U %a")
>> ## 2017-12-31
>> as.Date('2017 53 Mon',format="%Y %U %a")
>> ## NA
>>
>> So my question is :
>> how do i get
>> from "2018 00 Sun" to 2018-12-31
>> and
>> from "2017 53 Mon" to 2018-01-01
>>
>> i realize i can loop over days of week and do some if/then
>statements,
>> but is there a built in function?
>>
>> thank you
>> peter
>>
>>
>>
>>
>>
>> --
>> Peter Salzman, PhD
>> Department of Biostatistics and Computational Biology
>> University of Rochester
>>

-- 
Sent from my phone. Please excuse my brevity.



From dw|n@em|u@ @end|ng |rom comc@@t@net  Tue Oct 16 19:24:20 2018
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Tue, 16 Oct 2018 10:24:20 -0700
Subject: [R] DNAbin
In-Reply-To: <CAPxhGmiOQRLcxC+URoncL_wDJ_m_LgjFYDfNxpKU0paD6d+2mg@mail.gmail.com>
References: <CAPxhGmiOQRLcxC+URoncL_wDJ_m_LgjFYDfNxpKU0paD6d+2mg@mail.gmail.com>
Message-ID: <50F38BC9-4543-4058-B8E5-FCC378D4B6F7@comcast.net>


> On Oct 16, 2018, at 7:55 AM, Alfredo Cortell <alfredo.cortell.nicolau at gmail.com> wrote:
> 
> Hola, buenos dias.
> 
> Escribo porque me gustar?a saber si puedo convertir un data frame que
> consiste en variables (indicadas por columnas) y en filas (el n?mero de
> personas que tienen cada variable en determinada hora del dia.) en un tipo
> de objeto DNAbin para poder calcular la divergencia de Tajima. He estado
> d?ndole vueltas, y no encuentro la forma de convertirlo
> 
> Muchas gracias,

Rhelp is an English language mailing list, but I think there was (? still is) a Spanish language R mailing list.
> 
> 
> 
> V1 V2 V3 V4 V5 V6 V7
> 1 0 0 0 0 0 0
> 4 0 0 1 0 0 0
> 18 0 0 3 1 0 0
> 20 0 0 155 1 0 0
> 50 0 0 200 1 0 0
> 120 0 0 200 1 0 0
> 456 0 0 200 1 0 0
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

David Winsemius
Alameda, CA, USA

"The whole problem with the world is that fools and fanatics are always so certain of themselves, and wiser people so full of doubts." - Bertrand Russell



From @||redo@corte||@n|co|@u @end|ng |rom gm@||@com  Tue Oct 16 19:55:49 2018
From: @||redo@corte||@n|co|@u @end|ng |rom gm@||@com (Alfredo Cortell)
Date: Tue, 16 Oct 2018 19:55:49 +0200
Subject: [R] DNAbin
Message-ID: <CAPxhGmh=eh477ZAMEFAPgEK1b62bV=QQzKGicE7eKRRJ6Z5PJA@mail.gmail.com>

Dear all,

Is it possible to convert a data frame with variables (columns) and the
number of persons for each variable at a given time at the day (rows) to
DNAbin object type, so that I can calculate Tajima's divergence? I've been
trying, but I just can't find the way.

Thank you very much,


V1 V2 V3 V4 V5 V6 V7
1 0 0 0 0 0 0
4 0 0 1 0 0 0
18 0 0 3 1 0 0
20 0 0 155 1 0 0
50 0 0 200 1 0 0
120 0 0 200 1 0 0
456 0 0 200 1 0 0

	[[alternative HTML version deleted]]



From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Oct 16 20:11:42 2018
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 16 Oct 2018 11:11:42 -0700
Subject: [R] year and week to date - before 1/1 and after 12/31
In-Reply-To: <338ACAD3-127C-49AD-943F-9DD5BBDE2421@dcn.davis.ca.us>
References: <CAHdotinT-X5+huK05prObMuDSPHgBtRBe2ERdVr57bz1A5o06w@mail.gmail.com>
 <CAHdotimPAJwM5-HJyafESW-OvP4bOxKAxLGTG5ecdq1WDzHeAw@mail.gmail.com>
 <338ACAD3-127C-49AD-943F-9DD5BBDE2421@dcn.davis.ca.us>
Message-ID: <294CB480-26E8-454C-9C31-B78396CB5BCA@dcn.davis.ca.us>

Er, my mistake, you are using %U not %W... but now I am really confused, because the first Sunday is trivial with %U/%u.

Can you clarify what your actual upstream input is? Is it an invalid date string as you say below, or is it year number?

On October 16, 2018 10:22:10 AM PDT, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>If the date in your character representation does not exist then there
>is no requirement for a POSIX function to give any reliable answer...
>including NA. Using 00 as the week number won't always work.
>
>The first week/weekday combination that is guaranteed to exist by POSIX
>is 1/1 (first Monday). If the corresponding mon/mday is 1/1 then no
>days exist in week zero for that year and the first Sunday is 6 days
>more than the mday of the first Monday, else the mday of the first
>Sunday is one day less than the mday of the first Monday.
>
>You should if at all possible repair the computations that are creating
>the invalid string dates you mention.
>
>On October 16, 2018 8:11:12 AM PDT, peter salzman
><peter.salzmanuser at gmail.com> wrote:
>>it is simpler than i thought
>>
>>first day of given week is the last day minus 6days
>>
>>in other words:
>>d1 = as.Date('2018 00 Sat',format="%Y %U %a") - 6
>>d2 = as.Date('2018 00 Sun',format="%Y %U %a")
>>are the same as long both are not NA
>>
>>therefore to get the one that is not NA one can do
>>
>>max( c(d1,d2), na.rm=TRUE )
>>
>>maybe there is some other trick
>>
>>best,
>>peter
>>
>>
>>
>>
>>
>>
>>On Tue, Oct 16, 2018 at 10:22 AM peter salzman
>><peter.salzmanuser at gmail.com>
>>wrote:
>>
>>> hi,
>>>
>>> to turn year and week into the date one can do the following:
>>>
>>> as.Date('2018 05 Sun', "%Y %W %a")
>>>
>>> however, when we want the Sunday (1st day of week) of the 1st week
>of
>>2018
>>> we get NA because 1/1/2018 was on Monday
>>>
>>> as.Date('2018 00 Mon',format="%Y %U %a")
>>> ## 2018-01-01
>>> as.Date('2018 00 Sun',format="%Y %U %a")
>>> ## NA
>>>
>>> btw the same goes for last week
>>> as.Date('2017 53 Sun',format="%Y %U %a")
>>> ## 2017-12-31
>>> as.Date('2017 53 Mon',format="%Y %U %a")
>>> ## NA
>>>
>>> So my question is :
>>> how do i get
>>> from "2018 00 Sun" to 2018-12-31
>>> and
>>> from "2017 53 Mon" to 2018-01-01
>>>
>>> i realize i can loop over days of week and do some if/then
>>statements,
>>> but is there a built in function?
>>>
>>> thank you
>>> peter
>>>
>>>
>>>
>>>
>>>
>>> --
>>> Peter Salzman, PhD
>>> Department of Biostatistics and Computational Biology
>>> University of Rochester
>>>

-- 
Sent from my phone. Please excuse my brevity.



From |@t@z@hn @end|ng |rom gm@||@com  Tue Oct 16 21:35:34 2018
From: |@t@z@hn @end|ng |rom gm@||@com (Ista Zahn)
Date: Tue, 16 Oct 2018 15:35:34 -0400
Subject: [R] Unlisting a nested dataset
In-Reply-To: <e20d1ef6-fb3d-4a9d-a774-0f4276e5b17b@Spark>
References: <e20d1ef6-fb3d-4a9d-a774-0f4276e5b17b@Spark>
Message-ID: <CA+vqiLHrGc=HSH5qZ_ynx5GtNjyLn15JdjRbWWeD2kwMF4o9nQ@mail.gmail.com>

Hi Nate,

You've made it pretty difficult to answer your question. Please see
https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example
and follow some of the suggestions you find there to make it easier on
those who want to help you.

Best,
Ista
On Mon, Oct 15, 2018 at 10:56 PM Nathan Parsons
<nathan.f.parsons at gmail.com> wrote:
>
> I?m attempting to do some content analysis on a few million tweets, but I can?t seem to get them cleaned correctly.
>
> I?m trying to replicate the process outlined here: https://stackoverflow.com/questions/46734501/opposite-of-unnest-tokens
>
> My code:
>
> tweets %>%
> unnest_tokens(word, text, token = 'tweets') %>%
> filter(!word %in% stop_words$word) %>%
> nest(word) %>%
> mutate(text = map(data, unlist),
>          text = map_chr(text, paste, collapse = " ")) -> tweets
>
> Unfortunately, I keep getting:
>
> Error in mutate_impl(.data, dots) :
> Evaluation error: cannot coerce type 'closure' to vector of type 'character?.
>
> What am I doing wrong?
>
> Here?s what the dataset looks like:
>
> > glimpse(tweets)
> Observations: 389,253
> Variables: 12
> $ status_id "x1047841705729306624", "x1046966595610927105", "x104709...
> $ created_at "2018-10-04T13:31:45Z", "2018-10-02T03:34:22Z", "2018-10...
> $ text "Technique is everything with olympic lifts ! @ Body By ...
> $ lat 43.68359, 40.28412, 37.77066, 40.43139, 31.16889, 33.937...
> $ lng -70.32841, -83.07859, -122.43598, -79.98069, -100.07689,...
> $ county_name "Cumberland County", "Delaware County", "San Francisco C...
> $ fips 23005, 39041, 6075, 42003, 48095, 6037, 6037, 55073, 482...
> $ state_name "Maine", "Ohio", "California", "Pennsylvania", "Texas", ...
> $ state_abb "ME", "OH", "CA", "PA", "TX", "CA", "CA", "WI", "TX", "A...
> $ urban_level "Medium Metro", "Large Fringe Metro", "Large Central Met...
> $ urban_code 3, 2, 1, 1, 6, 1, 1, 4, 1, 3, 2, 2, 1, 3, 6, 1, 1, 2, 3,...
> $ population 277308, 184029, 830781, 1160433, 4160, 9509611, 9509611,...
>
> --
>
> Nate Parsons
> Pronouns: He, Him, His
> Graduate Teaching Assistant
> Department of Sociology
> Portland State University
> Portland, Oregon
>
> 503-725-9025
> 503-725-3957 FAX
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



From n@th@n@|@p@r@on@ @end|ng |rom gm@||@com  Tue Oct 16 21:50:20 2018
From: n@th@n@|@p@r@on@ @end|ng |rom gm@||@com (Nathan Parsons)
Date: Tue, 16 Oct 2018 12:50:20 -0700
Subject: [R] Unlisting a nested dataset
In-Reply-To: <CA+vqiLHrGc=HSH5qZ_ynx5GtNjyLn15JdjRbWWeD2kwMF4o9nQ@mail.gmail.com>
References: <e20d1ef6-fb3d-4a9d-a774-0f4276e5b17b@Spark>
 <CA+vqiLHrGc=HSH5qZ_ynx5GtNjyLn15JdjRbWWeD2kwMF4o9nQ@mail.gmail.com>
Message-ID: <5959e388-f694-4474-8790-ed416ce91ba7@Spark>

Ista - I provided data, code, and the error being returned as per reproducible r protocol. I did not include packages, however. unnest_tokens is from the TidyText package, map/map_chr are from purrr, and everything else is from tidyverse(dplyr/tidyr/etc.)

Not sure what else I can provide to make this more clear.

--

Nate Parsons
Pronouns: He, Him, His
Graduate Teaching Assistant
Department of Sociology
Portland State University
Portland, Oregon

503-725-9025
503-725-3957 FAX
On Oct 16, 2018, 12:35 PM -0700, Ista Zahn <istazahn at gmail.com>, wrote:
> Hi Nate,
>
> You've made it pretty difficult to answer your question. Please see
> https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example
> and follow some of the suggestions you find there to make it easier on
> those who want to help you.
>
> Best,
> Ista
> On Mon, Oct 15, 2018 at 10:56 PM Nathan Parsons
> <nathan.f.parsons at gmail.com> wrote:
> >
> > I?m attempting to do some content analysis on a few million tweets, but I can?t seem to get them cleaned correctly.
> >
> > I?m trying to replicate the process outlined here: https://stackoverflow.com/questions/46734501/opposite-of-unnest-tokens
> >
> > My code:
> >
> > tweets %>%
> > unnest_tokens(word, text, token = 'tweets') %>%
> > filter(!word %in% stop_words$word) %>%
> > nest(word) %>%
> > mutate(text = map(data, unlist),
> > text = map_chr(text, paste, collapse = " ")) -> tweets
> >
> > Unfortunately, I keep getting:
> >
> > Error in mutate_impl(.data, dots) :
> > Evaluation error: cannot coerce type 'closure' to vector of type 'character?.
> >
> > What am I doing wrong?
> >
> > Here?s what the dataset looks like:
> >
> > > glimpse(tweets)
> > Observations: 389,253
> > Variables: 12
> > $ status_id "x1047841705729306624", "x1046966595610927105", "x104709...
> > $ created_at "2018-10-04T13:31:45Z", "2018-10-02T03:34:22Z", "2018-10...
> > $ text "Technique is everything with olympic lifts ! @ Body By ...
> > $ lat 43.68359, 40.28412, 37.77066, 40.43139, 31.16889, 33.937...
> > $ lng -70.32841, -83.07859, -122.43598, -79.98069, -100.07689,...
> > $ county_name "Cumberland County", "Delaware County", "San Francisco C...
> > $ fips 23005, 39041, 6075, 42003, 48095, 6037, 6037, 55073, 482...
> > $ state_name "Maine", "Ohio", "California", "Pennsylvania", "Texas", ...
> > $ state_abb "ME", "OH", "CA", "PA", "TX", "CA", "CA", "WI", "TX", "A...
> > $ urban_level "Medium Metro", "Large Fringe Metro", "Large Central Met...
> > $ urban_code 3, 2, 1, 1, 6, 1, 1, 4, 1, 3, 2, 2, 1, 3, 6, 1, 1, 2, 3,...
> > $ population 277308, 184029, 830781, 1160433, 4160, 9509611, 9509611,...
> >
> > --
> >
> > Nate Parsons
> > Pronouns: He, Him, His
> > Graduate Teaching Assistant
> > Department of Sociology
> > Portland State University
> > Portland, Oregon
> >
> > 503-725-9025
> > 503-725-3957 FAX
> >
> > [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]



From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Oct 16 23:02:46 2018
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 16 Oct 2018 14:02:46 -0700
Subject: [R] Unlisting a nested dataset
In-Reply-To: <5959e388-f694-4474-8790-ed416ce91ba7@Spark>
References: <e20d1ef6-fb3d-4a9d-a774-0f4276e5b17b@Spark>
 <CA+vqiLHrGc=HSH5qZ_ynx5GtNjyLn15JdjRbWWeD2kwMF4o9nQ@mail.gmail.com>
 <5959e388-f694-4474-8790-ed416ce91ba7@Spark>
Message-ID: <AED49DDA-0081-47D9-920E-3A5CBFEB184F@dcn.davis.ca.us>

> >Not sure what else I can provide to make this more clear.

You can address this deficiency of awareness by using the reprex package to generate the example+errors you are concerned about. Combined with the use of dput described in the link Ista provided (or use of example data from your declared packages), you will know before you hit the send button that we should be able to reproduce your error even without knowing anything about your field of interest or having your directory structure/files.

The last impediment will be your sending email in HTML format... Gmail DOES have a plain text option, and this makes a difference because with HTML what you see is almost never what we see.

On October 16, 2018 12:50:20 PM PDT, Nathan Parsons <nathan.f.parsons at gmail.com> wrote:
>Ista - I provided data, code, and the error being returned as per
>reproducible r protocol. I did not include packages, however.
>unnest_tokens is from the TidyText package, map/map_chr are from purrr,
>and everything else is from tidyverse(dplyr/tidyr/etc.)
>
>Not sure what else I can provide to make this more clear.
>
>--
>
>Nate Parsons
>Pronouns: He, Him, His
>Graduate Teaching Assistant
>Department of Sociology
>Portland State University
>Portland, Oregon
>
>503-725-9025
>503-725-3957 FAX
>On Oct 16, 2018, 12:35 PM -0700, Ista Zahn <istazahn at gmail.com>, wrote:
>> Hi Nate,
>>
>> You've made it pretty difficult to answer your question. Please see
>>
>https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example
>> and follow some of the suggestions you find there to make it easier
>on
>> those who want to help you.
>>
>> Best,
>> Ista
>> On Mon, Oct 15, 2018 at 10:56 PM Nathan Parsons
>> <nathan.f.parsons at gmail.com> wrote:
>> >
>> > I?m attempting to do some content analysis on a few million tweets,
>but I can?t seem to get them cleaned correctly.
>> >
>> > I?m trying to replicate the process outlined here:
>https://stackoverflow.com/questions/46734501/opposite-of-unnest-tokens
>> >
>> > My code:
>> >
>> > tweets %>%
>> > unnest_tokens(word, text, token = 'tweets') %>%
>> > filter(!word %in% stop_words$word) %>%
>> > nest(word) %>%
>> > mutate(text = map(data, unlist),
>> > text = map_chr(text, paste, collapse = " ")) -> tweets
>> >
>> > Unfortunately, I keep getting:
>> >
>> > Error in mutate_impl(.data, dots) :
>> > Evaluation error: cannot coerce type 'closure' to vector of type
>'character?.
>> >
>> > What am I doing wrong?
>> >
>> > Here?s what the dataset looks like:
>> >
>> > > glimpse(tweets)
>> > Observations: 389,253
>> > Variables: 12
>> > $ status_id "x1047841705729306624", "x1046966595610927105",
>"x104709...
>> > $ created_at "2018-10-04T13:31:45Z", "2018-10-02T03:34:22Z",
>"2018-10...
>> > $ text "Technique is everything with olympic lifts ! @ Body By ...
>> > $ lat 43.68359, 40.28412, 37.77066, 40.43139, 31.16889, 33.937...
>> > $ lng -70.32841, -83.07859, -122.43598, -79.98069, -100.07689,...
>> > $ county_name "Cumberland County", "Delaware County", "San
>Francisco C...
>> > $ fips 23005, 39041, 6075, 42003, 48095, 6037, 6037, 55073, 482...
>> > $ state_name "Maine", "Ohio", "California", "Pennsylvania",
>"Texas", ...
>> > $ state_abb "ME", "OH", "CA", "PA", "TX", "CA", "CA", "WI", "TX",
>"A...
>> > $ urban_level "Medium Metro", "Large Fringe Metro", "Large Central
>Met...
>> > $ urban_code 3, 2, 1, 1, 6, 1, 1, 4, 1, 3, 2, 2, 1, 3, 6, 1, 1, 2,
>3,...
>> > $ population 277308, 184029, 830781, 1160433, 4160, 9509611,
>9509611,...
>> >
>> > --
>> >
>> > Nate Parsons
>> > Pronouns: He, Him, His
>> > Graduate Teaching Assistant
>> > Department of Sociology
>> > Portland State University
>> > Portland, Oregon
>> >
>> > 503-725-9025
>> > 503-725-3957 FAX
>> >
>> > [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.



From peter@@@|zm@nu@er @end|ng |rom gm@||@com  Tue Oct 16 23:08:52 2018
From: peter@@@|zm@nu@er @end|ng |rom gm@||@com (peter salzman)
Date: Tue, 16 Oct 2018 17:08:52 -0400
Subject: [R] year and week to date - before 1/1 and after 12/31
In-Reply-To: <294CB480-26E8-454C-9C31-B78396CB5BCA@dcn.davis.ca.us>
References: <CAHdotinT-X5+huK05prObMuDSPHgBtRBe2ERdVr57bz1A5o06w@mail.gmail.com>
 <CAHdotimPAJwM5-HJyafESW-OvP4bOxKAxLGTG5ecdq1WDzHeAw@mail.gmail.com>
 <338ACAD3-127C-49AD-943F-9DD5BBDE2421@dcn.davis.ca.us>
 <294CB480-26E8-454C-9C31-B78396CB5BCA@dcn.davis.ca.us>
Message-ID: <CAHdotik1nvTtZ0Q_9xUMnr+i69o6fNnNNddt8n3=kW=40Oz6RQ@mail.gmail.com>

hi,

thanks for replying,

it has taken some time to understand

i have year+week and i need to find the 1st day and the last day of that
week
i can decide when week starts

for example these 3 examples:
df <- data.frame(id = 1:3, year = c(2018, 2018, 2018), week=c(0,1,52))

## now run for all 3 rows:
for (kk in 1:3) {
  print(df[kk,])
  print('## version 1')
  print(as.Date(paste(df$year[kk],df$week[kk],'Sun',sep=' '), format = "%Y
%U %a")       )
  print(as.Date(paste(df$year[kk],df$week[kk],'Mon',sep=' '), format = "%Y
%U %a")       )
  print(as.Date(paste(df$year[kk],df$week[kk],'Tue',sep=' '), format = "%Y
%U %a")       )
  print(as.Date(paste(df$year[kk],df$week[kk],'Wed',sep=' '), format = "%Y
%U %a")       )
  print(as.Date(paste(df$year[kk],df$week[kk],'Thu',sep=' '), format = "%Y
%U %a")       )
  print(as.Date(paste(df$year[kk],df$week[kk],'Fri',sep=' '), format = "%Y
%U %a")       )
  print(as.Date(paste(df$year[kk],df$week[kk],'Sat',sep=' '), format = "%Y
%U %a")       )

  print('## version 2')
  print(as.Date(paste(df$year[kk],df$week[kk],'7',sep=' '), format = "%Y %U
%u")        )
  print(as.Date(paste(df$year[kk],df$week[kk],'1',sep=' '), format = "%Y %U
%u")         )
  print(as.Date(paste(df$year[kk],df$week[kk],'2',sep=' '), format = "%Y %U
%u")         )
  print(as.Date(paste(df$year[kk],df$week[kk],'3',sep=' '), format = "%Y %U
%u")         )
  print(as.Date(paste(df$year[kk],df$week[kk],'4',sep=' '), format = "%Y %U
%u")         )
  print(as.Date(paste(df$year[kk],df$week[kk],'5',sep=' '), format = "%Y %U
%u")         )
  print(as.Date(paste(df$year[kk],df$week[kk],'6',sep=' '), format = "%Y %U
%u")         )
}

for week 0 we get NA for Sunday because it was Dec 31, 2017
similarly for week 52 we get NA for Tue,Wed, ... because these are in
January of 2019

my hope was to write
as.Date(paste(year,week,1), format "%Y %month %weekday")
as.Date(paste(year,week,7), format "%Y %month %weekday")
and get the first and last day of the given week even at the beginning and
end of year
for example
as.Date("2018 0 Sun","%Y %U %a")   = '2017-12-31'

i hope this makes sense.

thanks for replying
peter










On Tue, Oct 16, 2018 at 2:11 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> Er, my mistake, you are using %U not %W... but now I am really confused,
> because the first Sunday is trivial with %U/%u.
>
> Can you clarify what your actual upstream input is? Is it an invalid date
> string as you say below, or is it year number?
>
> On October 16, 2018 10:22:10 AM PDT, Jeff Newmiller <
> jdnewmil at dcn.davis.ca.us> wrote:
> >If the date in your character representation does not exist then there
> >is no requirement for a POSIX function to give any reliable answer...
> >including NA. Using 00 as the week number won't always work.
> >
> >The first week/weekday combination that is guaranteed to exist by POSIX
> >is 1/1 (first Monday). If the corresponding mon/mday is 1/1 then no
> >days exist in week zero for that year and the first Sunday is 6 days
> >more than the mday of the first Monday, else the mday of the first
> >Sunday is one day less than the mday of the first Monday.
> >
> >You should if at all possible repair the computations that are creating
> >the invalid string dates you mention.
> >
> >On October 16, 2018 8:11:12 AM PDT, peter salzman
> ><peter.salzmanuser at gmail.com> wrote:
> >>it is simpler than i thought
> >>
> >>first day of given week is the last day minus 6days
> >>
> >>in other words:
> >>d1 = as.Date('2018 00 Sat',format="%Y %U %a") - 6
> >>d2 = as.Date('2018 00 Sun',format="%Y %U %a")
> >>are the same as long both are not NA
> >>
> >>therefore to get the one that is not NA one can do
> >>
> >>max( c(d1,d2), na.rm=TRUE )
> >>
> >>maybe there is some other trick
> >>
> >>best,
> >>peter
> >>
> >>
> >>
> >>
> >>
> >>
> >>On Tue, Oct 16, 2018 at 10:22 AM peter salzman
> >><peter.salzmanuser at gmail.com>
> >>wrote:
> >>
> >>> hi,
> >>>
> >>> to turn year and week into the date one can do the following:
> >>>
> >>> as.Date('2018 05 Sun', "%Y %W %a")
> >>>
> >>> however, when we want the Sunday (1st day of week) of the 1st week
> >of
> >>2018
> >>> we get NA because 1/1/2018 was on Monday
> >>>
> >>> as.Date('2018 00 Mon',format="%Y %U %a")
> >>> ## 2018-01-01
> >>> as.Date('2018 00 Sun',format="%Y %U %a")
> >>> ## NA
> >>>
> >>> btw the same goes for last week
> >>> as.Date('2017 53 Sun',format="%Y %U %a")
> >>> ## 2017-12-31
> >>> as.Date('2017 53 Mon',format="%Y %U %a")
> >>> ## NA
> >>>
> >>> So my question is :
> >>> how do i get
> >>> from "2018 00 Sun" to 2018-12-31
> >>> and
> >>> from "2017 53 Mon" to 2018-01-01
> >>>
> >>> i realize i can loop over days of week and do some if/then
> >>statements,
> >>> but is there a built in function?
> >>>
> >>> thank you
> >>> peter
> >>>
> >>>
> >>>
> >>>
> >>>
> >>> --
> >>> Peter Salzman, PhD
> >>> Department of Biostatistics and Computational Biology
> >>> University of Rochester
> >>>
>
> --
> Sent from my phone. Please excuse my brevity.
>


-- 
Peter Salzman, PhD
BMS
Greater Boston Area, MA

	[[alternative HTML version deleted]]



From n@th@n@|@p@r@on@ @end|ng |rom gm@||@com  Tue Oct 16 23:39:30 2018
From: n@th@n@|@p@r@on@ @end|ng |rom gm@||@com (Nathan Parsons)
Date: Tue, 16 Oct 2018 14:39:30 -0700
Subject: [R] Matching multiple search criteria (Unlisting a nested dataset,
 take 2)
Message-ID: <CANdqJqdP2bDdVNc=8R7jeXYU94p_=3BNmwrt11zwh7OdOaEfZA@mail.gmail.com>

Thanks all for your patience. Here?s a second go that is perhaps more
explicative of what it is I am trying to accomplish (and hopefully in plain
text form)...


I?m using the following packages: tidyverse, purrr, tidytext


I have a number of tweets in the following form:


th <- structure(list(status_id = c("x1047841705729306624",
"x1046966595610927105",

"x1047094786610552832", "x1046988542818308097", "x1046934493553221632",

"x1047227442899775488"), created_at = c("2018-10-04T13:31:45Z",

"2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",

"2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z"), text = c("Technique is
everything with olympic lifts ! @ Body By John https://t.co/UsfR6DafZt",

"@Subtronics just went back and rewatched ur FBlice with ur CDJs and let me
tell you man. You are the fucking messiah",

"@ic4rus1 Opportunistic means short-game. As in getting drunk now vs. not
being hung over tomorrow vs. not fucking up your life ten years later.",

"I tend to think about my dreams before I sleep.", "@MichaelAvenatti
@SenatorCollins So, if your client was in her 20s, attending parties with
teenagers, doesn't that make her at the least immature as hell, or at the
worst, a pedophile and a person contributing to the delinquency of minors?",

"i wish i could take credit for this"), lat = c(43.6835853, 40.284123,

37.7706565, 40.431389, 31.1688935, 33.9376735), lng = c(-70.3284118,

-83.078589, -122.4359785, -79.9806895, -100.0768885, -118.130426

), county_name = c("Cumberland County", "Delaware County", "San Francisco
County",

"Allegheny County", "Concho County", "Los Angeles County"), fips = c(23005L,

39041L, 6075L, 42003L, 48095L, 6037L), state_name = c("Maine",

"Ohio", "California", "Pennsylvania", "Texas", "California"),

state_abb = c("ME", "OH", "CA", "PA", "TX", "CA"), urban_level = c("Medium
Metro",

"Large Fringe Metro", "Large Central Metro", "Large Central Metro",

"NonCore (Nonmetro)", "Large Central Metro"), urban_code = c(3L,

2L, 1L, 1L, 6L, 1L), population = c(277308L, 184029L, 830781L,

1160433L, 4160L, 9509611L)), class = c("data.table", "data.frame"

), row.names = c(NA, -6L), .internal.selfref = )


I also have a number of search terms in the following form:


st <- structure(list(terms = c("me abused depressed", "me hurt depressed",

"feel hopeless depressed", "feel alone depressed", "i feel helpless",

"i feel worthless")), row.names = c(NA, -6L), class = c("tbl_df",

"tbl", "data.frame?))


I am trying to isolate the tweets that contain all of the words in each of
the search terms, i.e ?me? ?abused? and ?depressed? from the first example
search term, but they do not have to be in order or even next to one
another.


I am familiar with the dplyr suite of tools and have been attempting to
generate some sort of ?filter()? to do this. I am not very familiar with
purrr, but there may be a solution using the map function? I have also
explored the tidytext ?unnest_tokens? function which transforms the ?th?
data in the following way:


> tidytext::unnest_tokens(th, word, text, token = "tweets") -> tt

> head(tt)

status_id created_at lat lng

1: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841

2: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841

3: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841

4: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841

5: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841

6: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841

county_name fips state_name state_abb urban_level urban_code

1: Cumberland County 23005 Maine ME Medium Metro 3

2: Cumberland County 23005 Maine ME Medium Metro 3

3: Cumberland County 23005 Maine ME Medium Metro 3

4: Cumberland County 23005 Maine ME Medium Metro 3

5: Cumberland County 23005 Maine ME Medium Metro 3

6: Cumberland County 23005 Maine ME Medium Metro 3

population word

1: 277308 technique

2: 277308 is

3: 277308 everything

4: 277308 with

5: 277308 olympic

6: 277308 lifts


but once I have unnested the tokens, I am unable to recombine them back
into tweets.


Ideally the end result would append a new column to the ?th? data that
would flag a tweet that contained all of the search words for any of the
search terms; so the work flow would look like

1) look for all search words for one search term in a tweet

2) if all of the search words in the search term are found, create a flag
(mutate(flag = 1) or some such)

3) do this for all of the tweets

4) move on the next search term and repeat


Again, my thanks for your patience.


--


Nate Parsons

Pronouns: He, Him, His

Graduate Teaching Assistant

Department of Sociology

Portland State University

Portland, Oregon


503-725-9025

503-725-3957 FAX

	[[alternative HTML version deleted]]



From n@th@n@|@p@r@on@ @end|ng |rom gm@||@com  Tue Oct 16 23:46:59 2018
From: n@th@n@|@p@r@on@ @end|ng |rom gm@||@com (Nathan Parsons)
Date: Tue, 16 Oct 2018 14:46:59 -0700
Subject: [R] 
 Matching multiple search criteria (Unlisting a nested dataset,
 take 2)
In-Reply-To: <CANdqJqdP2bDdVNc=8R7jeXYU94p_=3BNmwrt11zwh7OdOaEfZA@mail.gmail.com>
References: <CANdqJqdP2bDdVNc=8R7jeXYU94p_=3BNmwrt11zwh7OdOaEfZA@mail.gmail.com>
Message-ID: <CANdqJqfCZU96s3XtVWwDYgmmh4LOJe-3896xxO4Ye4aMGaoDWg@mail.gmail.com>

Argh! Here are those two example datasets as data frames (not tibbles).
Sorry again. This apparently is just not my day.


th <- structure(list(status_id = c("x1047841705729306624",
"x1046966595610927105",

"x1047094786610552832", "x1046988542818308097", "x1046934493553221632",

"x1047227442899775488"), created_at = c("2018-10-04T13:31:45Z",

"2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",

"2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z"), text = c("Technique is
everything with olympic lifts ! @ Body By John https://t.co/UsfR6DafZt",

"@Subtronics just went back and rewatched ur FBlice with ur CDJs and let me
tell you man. You are the fucking messiah",

"@ic4rus1 Opportunistic means short-game. As in getting drunk now vs. not
being hung over tomorrow vs. not fucking up your life ten years later.",

"I tend to think about my dreams before I sleep.", "@MichaelAvenatti
@SenatorCollins So,  if your client was in her 20s, attending parties with
teenagers, doesn't that make her at the least immature as hell, or at the
worst, a pedophile and a person contributing to the delinquency of minors?",


"i wish i could take credit for this"), lat = c(43.6835853, 40.284123,

37.7706565, 40.431389, 31.1688935, 33.9376735), lng = c(-70.3284118,

-83.078589, -122.4359785, -79.9806895, -100.0768885, -118.130426

), county_name = c("Cumberland County", "Delaware County", "San Francisco
County",

"Allegheny County", "Concho County", "Los Angeles County"), fips = c(23005L,


39041L, 6075L, 42003L, 48095L, 6037L), state_name = c("Maine",

"Ohio", "California", "Pennsylvania", "Texas", "California"),

    state_abb = c("ME", "OH", "CA", "PA", "TX", "CA"), urban_level =
c("Medium Metro",

    "Large Fringe Metro", "Large Central Metro", "Large Central Metro",

    "NonCore (Nonmetro)", "Large Central Metro"), urban_code = c(3L,

    2L, 1L, 1L, 6L, 1L), population = c(277308L, 184029L, 830781L,

    1160433L, 4160L, 9509611L)), class = "data.frame", row.names = c(NA,

-6L))


st <- structure(list(terms = c("me abused depressed", "me hurt depressed",

"feel hopeless depressed", "feel alone depressed", "i feel helpless",

"i feel worthless")), row.names = c(NA, -6L), class = c("tbl_df",

"tbl", "data.frame"))

On Tue, Oct 16, 2018 at 2:39 PM Nathan Parsons <nathan.f.parsons at gmail.com>
wrote:

> Thanks all for your patience. Here?s a second go that is perhaps more
> explicative of what it is I am trying to accomplish (and hopefully in plain
> text form)...
>
>
> I?m using the following packages: tidyverse, purrr, tidytext
>
>
> I have a number of tweets in the following form:
>
>
> th <- structure(list(status_id = c("x1047841705729306624",
> "x1046966595610927105",
>
> "x1047094786610552832", "x1046988542818308097", "x1046934493553221632",
>
> "x1047227442899775488"), created_at = c("2018-10-04T13:31:45Z",
>
> "2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",
>
> "2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z"), text = c("Technique is
> everything with olympic lifts ! @ Body By John https://t.co/UsfR6DafZt",
>
> "@Subtronics just went back and rewatched ur FBlice with ur CDJs and let
> me tell you man. You are the fucking messiah",
>
> "@ic4rus1 Opportunistic means short-game. As in getting drunk now vs. not
> being hung over tomorrow vs. not fucking up your life ten years later.",
>
> "I tend to think about my dreams before I sleep.", "@MichaelAvenatti
> @SenatorCollins So, if your client was in her 20s, attending parties with
> teenagers, doesn't that make her at the least immature as hell, or at the
> worst, a pedophile and a person contributing to the delinquency of minors?",
>
> "i wish i could take credit for this"), lat = c(43.6835853, 40.284123,
>
> 37.7706565, 40.431389, 31.1688935, 33.9376735), lng = c(-70.3284118,
>
> -83.078589, -122.4359785, -79.9806895, -100.0768885, -118.130426
>
> ), county_name = c("Cumberland County", "Delaware County", "San Francisco
> County",
>
> "Allegheny County", "Concho County", "Los Angeles County"), fips =
> c(23005L,
>
> 39041L, 6075L, 42003L, 48095L, 6037L), state_name = c("Maine",
>
> "Ohio", "California", "Pennsylvania", "Texas", "California"),
>
> state_abb = c("ME", "OH", "CA", "PA", "TX", "CA"), urban_level = c("Medium
> Metro",
>
> "Large Fringe Metro", "Large Central Metro", "Large Central Metro",
>
> "NonCore (Nonmetro)", "Large Central Metro"), urban_code = c(3L,
>
> 2L, 1L, 1L, 6L, 1L), population = c(277308L, 184029L, 830781L,
>
> 1160433L, 4160L, 9509611L)), class = c("data.table", "data.frame"
>
> ), row.names = c(NA, -6L), .internal.selfref = )
>
>
> I also have a number of search terms in the following form:
>
>
> st <- structure(list(terms = c("me abused depressed", "me hurt depressed",
>
> "feel hopeless depressed", "feel alone depressed", "i feel helpless",
>
> "i feel worthless")), row.names = c(NA, -6L), class = c("tbl_df",
>
> "tbl", "data.frame?))
>
>
> I am trying to isolate the tweets that contain all of the words in each of
> the search terms, i.e ?me? ?abused? and ?depressed? from the first example
> search term, but they do not have to be in order or even next to one
> another.
>
>
> I am familiar with the dplyr suite of tools and have been attempting to
> generate some sort of ?filter()? to do this. I am not very familiar with
> purrr, but there may be a solution using the map function? I have also
> explored the tidytext ?unnest_tokens? function which transforms the ?th?
> data in the following way:
>
>
> > tidytext::unnest_tokens(th, word, text, token = "tweets") -> tt
>
> > head(tt)
>
> status_id created_at lat lng
>
> 1: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>
> 2: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>
> 3: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>
> 4: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>
> 5: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>
> 6: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>
> county_name fips state_name state_abb urban_level urban_code
>
> 1: Cumberland County 23005 Maine ME Medium Metro 3
>
> 2: Cumberland County 23005 Maine ME Medium Metro 3
>
> 3: Cumberland County 23005 Maine ME Medium Metro 3
>
> 4: Cumberland County 23005 Maine ME Medium Metro 3
>
> 5: Cumberland County 23005 Maine ME Medium Metro 3
>
> 6: Cumberland County 23005 Maine ME Medium Metro 3
>
> population word
>
> 1: 277308 technique
>
> 2: 277308 is
>
> 3: 277308 everything
>
> 4: 277308 with
>
> 5: 277308 olympic
>
> 6: 277308 lifts
>
>
> but once I have unnested the tokens, I am unable to recombine them back
> into tweets.
>
>
> Ideally the end result would append a new column to the ?th? data that
> would flag a tweet that contained all of the search words for any of the
> search terms; so the work flow would look like
>
> 1) look for all search words for one search term in a tweet
>
> 2) if all of the search words in the search term are found, create a flag
> (mutate(flag = 1) or some such)
>
> 3) do this for all of the tweets
>
> 4) move on the next search term and repeat
>
>
> Again, my thanks for your patience.
>
>
> --
>
>
> Nate Parsons
>
> Pronouns: He, Him, His
>
> Graduate Teaching Assistant
>
> Department of Sociology
>
> Portland State University
>
> Portland, Oregon
>
>
> 503-725-9025
>
> 503-725-3957 FAX
>

	[[alternative HTML version deleted]]



From bgunter@4567 @end|ng |rom gm@||@com  Wed Oct 17 00:03:13 2018
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 16 Oct 2018 15:03:13 -0700
Subject: [R] 
 Matching multiple search criteria (Unlisting a nested dataset,
 take 2)
In-Reply-To: <CANdqJqfCZU96s3XtVWwDYgmmh4LOJe-3896xxO4Ye4aMGaoDWg@mail.gmail.com>
References: <CANdqJqdP2bDdVNc=8R7jeXYU94p_=3BNmwrt11zwh7OdOaEfZA@mail.gmail.com>
 <CANdqJqfCZU96s3XtVWwDYgmmh4LOJe-3896xxO4Ye4aMGaoDWg@mail.gmail.com>
Message-ID: <CAGxFJbQmPf=vqRU0iLgEBGyTtUXL_GX8Kd3Bgdq796QhpQxUXA@mail.gmail.com>

The problem wasn't the data tibbles. You posted in html -- which you were
explictly warned against -- and that corrupted your text (e.g. some quotes
became "smart quotes", which cannot be properly cut and pasted into R).

Bert


On Tue, Oct 16, 2018 at 2:47 PM Nathan Parsons <nathan.f.parsons at gmail.com>
wrote:

> Argh! Here are those two example datasets as data frames (not tibbles).
> Sorry again. This apparently is just not my day.
>
>
> th <- structure(list(status_id = c("x1047841705729306624",
> "x1046966595610927105",
>
> "x1047094786610552832", "x1046988542818308097", "x1046934493553221632",
>
> "x1047227442899775488"), created_at = c("2018-10-04T13:31:45Z",
>
> "2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",
>
> "2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z"), text = c("Technique is
> everything with olympic lifts ! @ Body By John https://t.co/UsfR6DafZt",
>
> "@Subtronics just went back and rewatched ur FBlice with ur CDJs and let me
> tell you man. You are the fucking messiah",
>
> "@ic4rus1 Opportunistic means short-game. As in getting drunk now vs. not
> being hung over tomorrow vs. not fucking up your life ten years later.",
>
> "I tend to think about my dreams before I sleep.", "@MichaelAvenatti
> @SenatorCollins So,  if your client was in her 20s, attending parties with
> teenagers, doesn't that make her at the least immature as hell, or at the
> worst, a pedophile and a person contributing to the delinquency of
> minors?",
>
>
> "i wish i could take credit for this"), lat = c(43.6835853, 40.284123,
>
> 37.7706565, 40.431389, 31.1688935, 33.9376735), lng = c(-70.3284118,
>
> -83.078589, -122.4359785, -79.9806895, -100.0768885, -118.130426
>
> ), county_name = c("Cumberland County", "Delaware County", "San Francisco
> County",
>
> "Allegheny County", "Concho County", "Los Angeles County"), fips =
> c(23005L,
>
>
> 39041L, 6075L, 42003L, 48095L, 6037L), state_name = c("Maine",
>
> "Ohio", "California", "Pennsylvania", "Texas", "California"),
>
>     state_abb = c("ME", "OH", "CA", "PA", "TX", "CA"), urban_level =
> c("Medium Metro",
>
>     "Large Fringe Metro", "Large Central Metro", "Large Central Metro",
>
>     "NonCore (Nonmetro)", "Large Central Metro"), urban_code = c(3L,
>
>     2L, 1L, 1L, 6L, 1L), population = c(277308L, 184029L, 830781L,
>
>     1160433L, 4160L, 9509611L)), class = "data.frame", row.names = c(NA,
>
> -6L))
>
>
> st <- structure(list(terms = c("me abused depressed", "me hurt depressed",
>
> "feel hopeless depressed", "feel alone depressed", "i feel helpless",
>
> "i feel worthless")), row.names = c(NA, -6L), class = c("tbl_df",
>
> "tbl", "data.frame"))
>
> On Tue, Oct 16, 2018 at 2:39 PM Nathan Parsons <nathan.f.parsons at gmail.com
> >
> wrote:
>
> > Thanks all for your patience. Here?s a second go that is perhaps more
> > explicative of what it is I am trying to accomplish (and hopefully in
> plain
> > text form)...
> >
> >
> > I?m using the following packages: tidyverse, purrr, tidytext
> >
> >
> > I have a number of tweets in the following form:
> >
> >
> > th <- structure(list(status_id = c("x1047841705729306624",
> > "x1046966595610927105",
> >
> > "x1047094786610552832", "x1046988542818308097", "x1046934493553221632",
> >
> > "x1047227442899775488"), created_at = c("2018-10-04T13:31:45Z",
> >
> > "2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",
> >
> > "2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z"), text = c("Technique is
> > everything with olympic lifts ! @ Body By John https://t.co/UsfR6DafZt",
> >
> > "@Subtronics just went back and rewatched ur FBlice with ur CDJs and let
> > me tell you man. You are the fucking messiah",
> >
> > "@ic4rus1 Opportunistic means short-game. As in getting drunk now vs. not
> > being hung over tomorrow vs. not fucking up your life ten years later.",
> >
> > "I tend to think about my dreams before I sleep.", "@MichaelAvenatti
> > @SenatorCollins So, if your client was in her 20s, attending parties with
> > teenagers, doesn't that make her at the least immature as hell, or at the
> > worst, a pedophile and a person contributing to the delinquency of
> minors?",
> >
> > "i wish i could take credit for this"), lat = c(43.6835853, 40.284123,
> >
> > 37.7706565, 40.431389, 31.1688935, 33.9376735), lng = c(-70.3284118,
> >
> > -83.078589, -122.4359785, -79.9806895, -100.0768885, -118.130426
> >
> > ), county_name = c("Cumberland County", "Delaware County", "San Francisco
> > County",
> >
> > "Allegheny County", "Concho County", "Los Angeles County"), fips =
> > c(23005L,
> >
> > 39041L, 6075L, 42003L, 48095L, 6037L), state_name = c("Maine",
> >
> > "Ohio", "California", "Pennsylvania", "Texas", "California"),
> >
> > state_abb = c("ME", "OH", "CA", "PA", "TX", "CA"), urban_level =
> c("Medium
> > Metro",
> >
> > "Large Fringe Metro", "Large Central Metro", "Large Central Metro",
> >
> > "NonCore (Nonmetro)", "Large Central Metro"), urban_code = c(3L,
> >
> > 2L, 1L, 1L, 6L, 1L), population = c(277308L, 184029L, 830781L,
> >
> > 1160433L, 4160L, 9509611L)), class = c("data.table", "data.frame"
> >
> > ), row.names = c(NA, -6L), .internal.selfref = )
> >
> >
> > I also have a number of search terms in the following form:
> >
> >
> > st <- structure(list(terms = c("me abused depressed", "me hurt
> depressed",
> >
> > "feel hopeless depressed", "feel alone depressed", "i feel helpless",
> >
> > "i feel worthless")), row.names = c(NA, -6L), class = c("tbl_df",
> >
> > "tbl", "data.frame?))
> >
> >
> > I am trying to isolate the tweets that contain all of the words in each
> of
> > the search terms, i.e ?me? ?abused? and ?depressed? from the first
> example
> > search term, but they do not have to be in order or even next to one
> > another.
> >
> >
> > I am familiar with the dplyr suite of tools and have been attempting to
> > generate some sort of ?filter()? to do this. I am not very familiar with
> > purrr, but there may be a solution using the map function? I have also
> > explored the tidytext ?unnest_tokens? function which transforms the ?th?
> > data in the following way:
> >
> >
> > > tidytext::unnest_tokens(th, word, text, token = "tweets") -> tt
> >
> > > head(tt)
> >
> > status_id created_at lat lng
> >
> > 1: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
> >
> > 2: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
> >
> > 3: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
> >
> > 4: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
> >
> > 5: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
> >
> > 6: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
> >
> > county_name fips state_name state_abb urban_level urban_code
> >
> > 1: Cumberland County 23005 Maine ME Medium Metro 3
> >
> > 2: Cumberland County 23005 Maine ME Medium Metro 3
> >
> > 3: Cumberland County 23005 Maine ME Medium Metro 3
> >
> > 4: Cumberland County 23005 Maine ME Medium Metro 3
> >
> > 5: Cumberland County 23005 Maine ME Medium Metro 3
> >
> > 6: Cumberland County 23005 Maine ME Medium Metro 3
> >
> > population word
> >
> > 1: 277308 technique
> >
> > 2: 277308 is
> >
> > 3: 277308 everything
> >
> > 4: 277308 with
> >
> > 5: 277308 olympic
> >
> > 6: 277308 lifts
> >
> >
> > but once I have unnested the tokens, I am unable to recombine them back
> > into tweets.
> >
> >
> > Ideally the end result would append a new column to the ?th? data that
> > would flag a tweet that contained all of the search words for any of the
> > search terms; so the work flow would look like
> >
> > 1) look for all search words for one search term in a tweet
> >
> > 2) if all of the search words in the search term are found, create a flag
> > (mutate(flag = 1) or some such)
> >
> > 3) do this for all of the tweets
> >
> > 4) move on the next search term and repeat
> >
> >
> > Again, my thanks for your patience.
> >
> >
> > --
> >
> >
> > Nate Parsons
> >
> > Pronouns: He, Him, His
> >
> > Graduate Teaching Assistant
> >
> > Department of Sociology
> >
> > Portland State University
> >
> > Portland, Oregon
> >
> >
> > 503-725-9025
> >
> > 503-725-3957 FAX
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From bgunter@4567 @end|ng |rom gm@||@com  Wed Oct 17 04:20:02 2018
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 16 Oct 2018 19:20:02 -0700
Subject: [R] 
 Matching multiple search criteria (Unlisting a nested dataset,
 take 2)
In-Reply-To: <CAGxFJbQmPf=vqRU0iLgEBGyTtUXL_GX8Kd3Bgdq796QhpQxUXA@mail.gmail.com>
References: <CANdqJqdP2bDdVNc=8R7jeXYU94p_=3BNmwrt11zwh7OdOaEfZA@mail.gmail.com>
 <CANdqJqfCZU96s3XtVWwDYgmmh4LOJe-3896xxO4Ye4aMGaoDWg@mail.gmail.com>
 <CAGxFJbQmPf=vqRU0iLgEBGyTtUXL_GX8Kd3Bgdq796QhpQxUXA@mail.gmail.com>
Message-ID: <CAGxFJbRFJjwWjMWSLJMDVtwqWwNd0K36rHLyJiL63nmwVGZBZQ@mail.gmail.com>

OK, as no one else has offered a solution, I'll take a whack at it.

Caveats: This is a brute force attempt using R's basic regular expression
engine. It is inelegant and barely tested, so likely to be at best
incomplete and buggy, and at worst, incorrect. But maybe Nathan or someone
else on the list can fix it up. So if (when) it breaks, complain on the
list to give someone (almost certainly not me) the opportunity.

The basic idea is that the tweets are just character strings and the search
phrases are just character vectors all of whose elements must match
"appropriately" -- i.e. they must match whole words -- in the character
strings. So my desired output from the code is a list indexed by the search
phrases, each of whose components if a logical vector of length the number
of tweets each of whose elements = TRUE iff all the words in the search
phrase match somewhere in the tweet.

Here's the code(using the data Nathan provided):

> words <- sapply(st[[1]],strsplit,split = " +" )
## convert the phrases to a list of character vectors of the words
## Result:
> words
$`me abused depressed`
[1] "me"        "abused"    "depressed"

$`me hurt depressed`
[1] "me"        "hurt"      "depressed"

$`feel hopeless depressed`
[1] "feel"      "hopeless"  "depressed"

$`feel alone depressed`
[1] "feel"      "alone"     "depressed"

$`i feel helpless`
[1] "i"        "feel"     "helpless"

$`i feel worthless`
[1] "i"         "feel"      "worthless"

> expand.words <-  function(z)lapply(z,function(x)paste0(c("^ *"," ","
"),x, c(" "," "," *$")))
## function to create regexes for words when they are at the beginning,
middle, or end of tweets

> wordregex <- lapply(words,expand.words)
##Result
## too lengthy to include
##
> tweets <- th$text
##extract the tweets
> findin <- function(x,y)
   ## x is a vector of regex patterns
   ## y is a character vector
   ## value = vector,vec, with length(vec) == length(y) and vec[i] == TRUE
iff any of x matches y[i]
{ apply(sapply(x,function(z)grepl(z,y)), 1,any)
}

## add a matching "tweet" to the tweet vector:
> tweets <- c(tweets," i xxxx worthless yxxc ght feel")

> ans <-
lapply(wordregex,function(z)apply(sapply(z,function(x)findin(x,tweets)), 1,
all))
## Result:
> ans
$`me abused depressed`
[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE

$`me hurt depressed`
[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE

$`feel hopeless depressed`
[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE

$`feel alone depressed`
[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE

$`i feel helpless`
[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE

$`i feel worthless`
[1] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE

## None of the tweets match any of the phrases except for the last tweet
that I added.

## Note: you need to add capabilities to handle upper and lower case. See,
e.g. ?casefold

Cheers,
Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Oct 16, 2018 at 3:03 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> The problem wasn't the data tibbles. You posted in html -- which you were
> explictly warned against -- and that corrupted your text (e.g. some quotes
> became "smart quotes", which cannot be properly cut and pasted into R).
>
> Bert
>
>
> On Tue, Oct 16, 2018 at 2:47 PM Nathan Parsons <nathan.f.parsons at gmail.com>
> wrote:
>
>> Argh! Here are those two example datasets as data frames (not tibbles).
>> Sorry again. This apparently is just not my day.
>>
>>
>> th <- structure(list(status_id = c("x1047841705729306624",
>> "x1046966595610927105",
>>
>> "x1047094786610552832", "x1046988542818308097", "x1046934493553221632",
>>
>> "x1047227442899775488"), created_at = c("2018-10-04T13:31:45Z",
>>
>> "2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",
>>
>> "2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z"), text = c("Technique is
>> everything with olympic lifts ! @ Body By John https://t.co/UsfR6DafZt",
>>
>> "@Subtronics just went back and rewatched ur FBlice with ur CDJs and let
>> me
>> tell you man. You are the fucking messiah",
>>
>> "@ic4rus1 Opportunistic means short-game. As in getting drunk now vs. not
>> being hung over tomorrow vs. not fucking up your life ten years later.",
>>
>> "I tend to think about my dreams before I sleep.", "@MichaelAvenatti
>> @SenatorCollins So,  if your client was in her 20s, attending parties with
>> teenagers, doesn't that make her at the least immature as hell, or at the
>> worst, a pedophile and a person contributing to the delinquency of
>> minors?",
>>
>>
>> "i wish i could take credit for this"), lat = c(43.6835853, 40.284123,
>>
>> 37.7706565, 40.431389, 31.1688935, 33.9376735), lng = c(-70.3284118,
>>
>> -83.078589, -122.4359785, -79.9806895, -100.0768885, -118.130426
>>
>> ), county_name = c("Cumberland County", "Delaware County", "San Francisco
>> County",
>>
>> "Allegheny County", "Concho County", "Los Angeles County"), fips =
>> c(23005L,
>>
>>
>> 39041L, 6075L, 42003L, 48095L, 6037L), state_name = c("Maine",
>>
>> "Ohio", "California", "Pennsylvania", "Texas", "California"),
>>
>>     state_abb = c("ME", "OH", "CA", "PA", "TX", "CA"), urban_level =
>> c("Medium Metro",
>>
>>     "Large Fringe Metro", "Large Central Metro", "Large Central Metro",
>>
>>     "NonCore (Nonmetro)", "Large Central Metro"), urban_code = c(3L,
>>
>>     2L, 1L, 1L, 6L, 1L), population = c(277308L, 184029L, 830781L,
>>
>>     1160433L, 4160L, 9509611L)), class = "data.frame", row.names = c(NA,
>>
>> -6L))
>>
>>
>> st <- structure(list(terms = c("me abused depressed", "me hurt depressed",
>>
>> "feel hopeless depressed", "feel alone depressed", "i feel helpless",
>>
>> "i feel worthless")), row.names = c(NA, -6L), class = c("tbl_df",
>>
>> "tbl", "data.frame"))
>>
>> On Tue, Oct 16, 2018 at 2:39 PM Nathan Parsons <
>> nathan.f.parsons at gmail.com>
>> wrote:
>>
>> > Thanks all for your patience. Here?s a second go that is perhaps more
>> > explicative of what it is I am trying to accomplish (and hopefully in
>> plain
>> > text form)...
>> >
>> >
>> > I?m using the following packages: tidyverse, purrr, tidytext
>> >
>> >
>> > I have a number of tweets in the following form:
>> >
>> >
>> > th <- structure(list(status_id = c("x1047841705729306624",
>> > "x1046966595610927105",
>> >
>> > "x1047094786610552832", "x1046988542818308097", "x1046934493553221632",
>> >
>> > "x1047227442899775488"), created_at = c("2018-10-04T13:31:45Z",
>> >
>> > "2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",
>> >
>> > "2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z"), text = c("Technique is
>> > everything with olympic lifts ! @ Body By John https://t.co/UsfR6DafZt
>> ",
>> >
>> > "@Subtronics just went back and rewatched ur FBlice with ur CDJs and let
>> > me tell you man. You are the fucking messiah",
>> >
>> > "@ic4rus1 Opportunistic means short-game. As in getting drunk now vs.
>> not
>> > being hung over tomorrow vs. not fucking up your life ten years later.",
>> >
>> > "I tend to think about my dreams before I sleep.", "@MichaelAvenatti
>> > @SenatorCollins So, if your client was in her 20s, attending parties
>> with
>> > teenagers, doesn't that make her at the least immature as hell, or at
>> the
>> > worst, a pedophile and a person contributing to the delinquency of
>> minors?",
>> >
>> > "i wish i could take credit for this"), lat = c(43.6835853, 40.284123,
>> >
>> > 37.7706565, 40.431389, 31.1688935, 33.9376735), lng = c(-70.3284118,
>> >
>> > -83.078589, -122.4359785, -79.9806895, -100.0768885, -118.130426
>> >
>> > ), county_name = c("Cumberland County", "Delaware County", "San
>> Francisco
>> > County",
>> >
>> > "Allegheny County", "Concho County", "Los Angeles County"), fips =
>> > c(23005L,
>> >
>> > 39041L, 6075L, 42003L, 48095L, 6037L), state_name = c("Maine",
>> >
>> > "Ohio", "California", "Pennsylvania", "Texas", "California"),
>> >
>> > state_abb = c("ME", "OH", "CA", "PA", "TX", "CA"), urban_level =
>> c("Medium
>> > Metro",
>> >
>> > "Large Fringe Metro", "Large Central Metro", "Large Central Metro",
>> >
>> > "NonCore (Nonmetro)", "Large Central Metro"), urban_code = c(3L,
>> >
>> > 2L, 1L, 1L, 6L, 1L), population = c(277308L, 184029L, 830781L,
>> >
>> > 1160433L, 4160L, 9509611L)), class = c("data.table", "data.frame"
>> >
>> > ), row.names = c(NA, -6L), .internal.selfref = )
>> >
>> >
>> > I also have a number of search terms in the following form:
>> >
>> >
>> > st <- structure(list(terms = c("me abused depressed", "me hurt
>> depressed",
>> >
>> > "feel hopeless depressed", "feel alone depressed", "i feel helpless",
>> >
>> > "i feel worthless")), row.names = c(NA, -6L), class = c("tbl_df",
>> >
>> > "tbl", "data.frame?))
>> >
>> >
>> > I am trying to isolate the tweets that contain all of the words in each
>> of
>> > the search terms, i.e ?me? ?abused? and ?depressed? from the first
>> example
>> > search term, but they do not have to be in order or even next to one
>> > another.
>> >
>> >
>> > I am familiar with the dplyr suite of tools and have been attempting to
>> > generate some sort of ?filter()? to do this. I am not very familiar with
>> > purrr, but there may be a solution using the map function? I have also
>> > explored the tidytext ?unnest_tokens? function which transforms the ?th?
>> > data in the following way:
>> >
>> >
>> > > tidytext::unnest_tokens(th, word, text, token = "tweets") -> tt
>> >
>> > > head(tt)
>> >
>> > status_id created_at lat lng
>> >
>> > 1: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>> >
>> > 2: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>> >
>> > 3: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>> >
>> > 4: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>> >
>> > 5: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>> >
>> > 6: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>> >
>> > county_name fips state_name state_abb urban_level urban_code
>> >
>> > 1: Cumberland County 23005 Maine ME Medium Metro 3
>> >
>> > 2: Cumberland County 23005 Maine ME Medium Metro 3
>> >
>> > 3: Cumberland County 23005 Maine ME Medium Metro 3
>> >
>> > 4: Cumberland County 23005 Maine ME Medium Metro 3
>> >
>> > 5: Cumberland County 23005 Maine ME Medium Metro 3
>> >
>> > 6: Cumberland County 23005 Maine ME Medium Metro 3
>> >
>> > population word
>> >
>> > 1: 277308 technique
>> >
>> > 2: 277308 is
>> >
>> > 3: 277308 everything
>> >
>> > 4: 277308 with
>> >
>> > 5: 277308 olympic
>> >
>> > 6: 277308 lifts
>> >
>> >
>> > but once I have unnested the tokens, I am unable to recombine them back
>> > into tweets.
>> >
>> >
>> > Ideally the end result would append a new column to the ?th? data that
>> > would flag a tweet that contained all of the search words for any of the
>> > search terms; so the work flow would look like
>> >
>> > 1) look for all search words for one search term in a tweet
>> >
>> > 2) if all of the search words in the search term are found, create a
>> flag
>> > (mutate(flag = 1) or some such)
>> >
>> > 3) do this for all of the tweets
>> >
>> > 4) move on the next search term and repeat
>> >
>> >
>> > Again, my thanks for your patience.
>> >
>> >
>> > --
>> >
>> >
>> > Nate Parsons
>> >
>> > Pronouns: He, Him, His
>> >
>> > Graduate Teaching Assistant
>> >
>> > Department of Sociology
>> >
>> > Portland State University
>> >
>> > Portland, Oregon
>> >
>> >
>> > 503-725-9025
>> >
>> > 503-725-3957 FAX
>> >
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]



From mxn||mx @end|ng |rom gm@||@com  Wed Oct 17 16:07:20 2018
From: mxn||mx @end|ng |rom gm@||@com (Nielson Pasqualotto)
Date: Wed, 17 Oct 2018 11:07:20 -0300
Subject: [R] Random selection of points in SpatialPointsDataFrame with
 distance constraint
Message-ID: <CAPAP8wZgKKcgXT2Kq3ztsa=Trh+FM8Hpvw+C-5q84=HE6hZihA@mail.gmail.com>

I'm trying to select points randomly (without replacement) from a
SpatialPointsDataFrame (input object) with a minimum distance of 3,000
meters between them. I want to get random 50% of all points and create a
vector object with lines index as result. I tried to use sample() function
but I still did not realised how to set the geographical constraint. I'll
appreciate any help.

> input
class       : SpatialPointsDataFrame
features    : 205
extent      : 203294.5, 259880.6, 7600123, 7668676  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=utm +zone=23 +south +ellps=GRS80 +units=m +no_defs
variables   : 3
names       :     Sites, Long_X,   Lat_Y
min values  : CPF - 050, 203295, 7600120
max values  : JES - S94, 259881, 7668680

> head(input)
  Sites Long_X   Lat_Y1 CPF - 050 235441 76171502 CPF - 052 234106
76157403 CPF - 054 232683 76142804 CPF - 056 233863 76144205 CPF - 058
234012 76128906 CPF - 062 236929 7612850

rdm_input <- sample(x= nrow(input), size=(0.5*205), replace= FALSE)[1]
167 189 79 80 126 129 144 100 4 109 170 72 123 73 132 93 169 5 134 176
196 158 152 183 23 136 180[28] 130 12 142 179 11 13 66 22 2 96 29 54
137 120 171 184 36 113 3 81 115  30 85 61 162 98 102[55] 103 181 90
133 56 174 76 201 150 197 14 86 118 121 28 97 160 178 1 186 141 163
172 32 65 168 74[82] 114 182 128 131 67 70 165 187 185 69 17 194 16
154 119 192 156 106  25 101 198 105 108 151 125 190 10[109] 84 38 51
161 40 94 45 19 145 75 42 122 117 49 87


MSc. Nielson Pasqualotto
Doutorando pelo Programa de P?s-Gradua??o em Ecologia Aplicada
(ESALQ/CENA/USP)
Bi?logo e Mestre em Ci?ncias pela Universidade de S?o Paulo (USP).
Laborat?rio de Ecologia e Conserva??o (LAEC).
Av. Bandeirantes, 3900. Bairro Monte Alegre, Ribeir?o Preto, S?o Paulo,
Brasil.

	[[alternative HTML version deleted]]



From n@th@n@|@p@r@on@ @end|ng |rom gm@||@com  Wed Oct 17 18:19:53 2018
From: n@th@n@|@p@r@on@ @end|ng |rom gm@||@com (Nathan Parsons)
Date: Wed, 17 Oct 2018 09:19:53 -0700
Subject: [R] 
 Matching multiple search criteria (Unlisting a nested dataset,
 take 2)
In-Reply-To: <CAGxFJbRFJjwWjMWSLJMDVtwqWwNd0K36rHLyJiL63nmwVGZBZQ@mail.gmail.com>
References: <CANdqJqdP2bDdVNc=8R7jeXYU94p_=3BNmwrt11zwh7OdOaEfZA@mail.gmail.com>
 <CANdqJqfCZU96s3XtVWwDYgmmh4LOJe-3896xxO4Ye4aMGaoDWg@mail.gmail.com>
 <CAGxFJbQmPf=vqRU0iLgEBGyTtUXL_GX8Kd3Bgdq796QhpQxUXA@mail.gmail.com>
 <CAGxFJbRFJjwWjMWSLJMDVtwqWwNd0K36rHLyJiL63nmwVGZBZQ@mail.gmail.com>
Message-ID: <4e06312a-10f4-4524-a82f-9f7618e435fb@Spark>

I do not have your command of base r, Bert. That is a herculean effort! Here?s what I spent my night putting together:

## Create search terms
## dput(st)
st <- structure(list(word1 = c("technique", "me", "me", "feel", "feel"
), word2 = c("olympic", "abused", "hurt", "hopeless", "alone"
), word3 = c("lifts", "depressed", "depressed", "depressed",
"depressed")), class = c("tbl_df", "tbl", "data.frame"), row.names = c(NA,
-5L))

## Create tweets
## dput(th)
th <- structure(list(status_id = c("x1047841705729306624", "x1046966595610927105",
"x1047094786610552832", "x1046988542818308097", "x1046934493553221632",
"x1047227442899775488", "x1048126008941981696", "x1047798782673543173",
"x1048269727582355457", "x1048092408544677890"), created_at = c("2018-10-04T13:31:45Z",
"2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",
"2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z", "2018-10-05T08:21:28Z",
"2018-10-04T10:41:11Z", "2018-10-05T17:52:33Z", "2018-10-05T06:07:57Z"
), text = c("technique is everything with olympic lifts ! @ body by john ",
"@subtronics just went back and rewatched ur fblice with ur cdjs and let me tell you man. you are the fucking messiah",
"@ic4rus1 opportunistic means short-game. as in getting drunk now vs. not being hung over tomorrow vs. not fucking up your life ten years later.",
"i tend to think about my dreams before i sleep.", "@michaelavenatti @senatorcollins so if your client was in her 20s attending parties with teenagers doesnt that make her at the least immature as hell or at the worst a pedophile and a person contributing to the delinquency of minors?",
"i wish i could take credit for this", "i woulda never imagined. #lakeshow ",
"@philipbloom @blackmagic_news its ok phil! i feel your pain! ",
"sunday ill have a booth in katy at the real craft wives of katy fest @nolabelbrewco cmon yall!everything is better when you top it with tias!order today we ship to all 50 ",
"dolly is so baddd"), lat = c(43.6835853, 40.284123, 37.7706565,
40.431389, 31.1688935, 33.9376735, 34.0207895, 44.900818, 29.7926,
32.364145), lng = c(-70.3284118, -83.078589, -122.4359785, -79.9806895,
-100.0768885, -118.130426, -118.4119065, -89.5694915, -95.8224,
-86.2447285), county_name = c("Cumberland County", "Delaware County",
"San Francisco County", "Allegheny County", "Concho County",
"Los Angeles County", "Los Angeles County", "Marathon County",
"Harris County", "Montgomery County"), fips = c(23005L, 39041L,
6075L, 42003L, 48095L, 6037L, 6037L, 55073L, 48201L, 1101L),
state_name = c("Maine", "Ohio", "California", "Pennsylvania",
"Texas", "California", "California", "Wisconsin", "Texas",
"Alabama"), state_abb = c("ME", "OH", "CA", "PA", "TX", "CA",
"CA", "WI", "TX", "AL"), urban_level = c("Medium Metro",
"Large Fringe Metro", "Large Central Metro", "Large Central Metro",
"NonCore (Nonmetro)", "Large Central Metro", "Large Central Metro",
"Small Metro", "Large Central Metro", "Medium Metro"), urban_code = c(3L,
2L, 1L, 1L, 6L, 1L, 1L, 4L, 1L, 3L), population = c(277308L,
184029L, 830781L, 1160433L, 4160L, 9509611L, 9509611L, 127612L,
4233913L, 211037L), linenumber = 1:10), row.names = c(NA,
10L), class = "data.frame")

## Clean tweets - basically just remove everything we don?t need from the text including punctuation and urls
th %>%
mutate(linenumber = row_number(),
text = str_remove_all(text, "[^\x01-\x7F]"),
text = str_remove_all(text, "\n"),
text = str_remove_all(text, ","),
text = str_remove_all(text, "'"),
text = str_remove_all(text, "&"),
text = str_remove_all(text, "<"),
text = str_remove_all(text, ">"),
text = str_remove_all(text, "http[s]?://[[:alnum:].\\/]+"),
text = tolower(text)) -> th

## Create search function that looks for each search term in the provided string, evaluates if all three search terms have been found, and returns a logical
srchr <- function(df) {
str_detect(df, "olympic") -> a
str_detect(df, "technique") -> b
str_detect(df, "lifts") -> c
ifelse(a == TRUE & b == TRUE & c == TRUE, TRUE, FALSE)
}

## Evaluate tweets for presence of search term
th %>%
mutate(flag = map_chr(text, srchr)) -> th_flagged

As far as I can tell, this works. I have to manually enter each set of search terms into the function, which is not ideal. Also, this only generates a True/False for each tweet based on one search term - I end up with an evaluatory column for each search term that I would then have to collapse together somehow. I?m sure there?s a more elegant solution.

--

Nate Parsons
Pronouns: He, Him, His
Graduate Teaching Assistant
Department of Sociology
Portland State University
Portland, Oregon

503-725-9025
503-725-3957 FAX
On Oct 16, 2018, 7:20 PM -0700, Bert Gunter <bgunter.4567 at gmail.com>, wrote:
> OK, as no one else has offered a solution, I'll take a whack at it.
>
> Caveats: This is a brute force attempt using R's basic regular expression engine. It is inelegant and barely tested, so likely to be at best incomplete and buggy, and at worst, incorrect. But maybe Nathan or someone else on the list can fix it up. So if (when) it breaks, complain on the list to give someone (almost certainly not me) the opportunity.
>
> The basic idea is that the tweets are just character strings and the search phrases are just character vectors all of whose elements must match "appropriately" -- i.e. they must match whole words -- in the character strings. So my desired output from the code is a list indexed by the search phrases, each of whose components if a logical vector of length the number of tweets each of whose elements = TRUE iff all the words in the search phrase match somewhere in the tweet.
>
> Here's the code(using the data Nathan provided):
>
> > words <- sapply(st[[1]],strsplit,split = " +" )
> ## convert the phrases to a list of character vectors of the words
> ## Result:
> > words
> $`me abused depressed`
> [1] "me"??????? "abused"??? "depressed"
>
> $`me hurt depressed`
> [1] "me"??????? "hurt"????? "depressed"
>
> $`feel hopeless depressed`
> [1] "feel"????? "hopeless"? "depressed"
>
> $`feel alone depressed`
> [1] "feel"????? "alone"???? "depressed"
>
> $`i feel helpless`
> [1] "i"??????? "feel"???? "helpless"
>
> $`i feel worthless`
> [1] "i"???????? "feel"????? "worthless"
>
> > expand.words <-? function(z)lapply(z,function(x)paste0(c("^ *"," "," "),x, c(" "," "," *$")))
> ## function to create regexes for words when they are at the beginning, middle, or end of tweets
>
> > wordregex <- lapply(words,expand.words)
> ##Result
> ## too lengthy to include
> ##
> > tweets <- th$text
> ##extract the tweets
> > findin <- function(x,y)
> ?? ## x is a vector of regex patterns
> ?? ## y is a character vector
> ?? ## value = vector,vec, with length(vec) == length(y) and vec[i] == TRUE iff any of x matches y[i]
> { apply(sapply(x,function(z)grepl(z,y)), 1,any)
> }
>
> ## add a matching "tweet" to the tweet vector:
> > tweets <- c(tweets," i xxxx worthless yxxc ght feel")
>
> > ans <- lapply(wordregex,function(z)apply(sapply(z,function(x)findin(x,tweets)), 1, all))
> ## Result:
> > ans
> $`me abused depressed`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>
> $`me hurt depressed`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>
> $`feel hopeless depressed`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>
> $`feel alone depressed`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>
> $`i feel helpless`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>
> $`i feel worthless`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE? TRUE
>
> ## None of the tweets match any of the phrases except for the last tweet that I added.
>
> ## Note: you need to add capabilities to handle upper and lower case. See, e.g. ?casefold
>
> Cheers,
> Bert
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> > On Tue, Oct 16, 2018 at 3:03 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
> > > The problem wasn't the data tibbles. You posted in html -- which you were explictly warned against -- and that corrupted your text (e.g. some quotes became "smart quotes", which cannot be properly cut and pasted into R).
> > >
> > > Bert
> > >
> > >
> > > > On Tue, Oct 16, 2018 at 2:47 PM Nathan Parsons <nathan.f.parsons at gmail.com> wrote:
> > > > > Argh! Here are those two example datasets as data frames (not tibbles).
> > > > > Sorry again. This apparently is just not my day.
> > > > >
> > > > >
> > > > > th <- structure(list(status_id = c("x1047841705729306624",
> > > > > "x1046966595610927105",
> > > > >
> > > > > "x1047094786610552832", "x1046988542818308097", "x1046934493553221632",
> > > > >
> > > > > "x1047227442899775488"), created_at = c("2018-10-04T13:31:45Z",
> > > > >
> > > > > "2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",
> > > > >
> > > > > "2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z"), text = c("Technique is
> > > > > everything with olympic lifts ! @ Body By John https://t.co/UsfR6DafZt",
> > > > >
> > > > > "@Subtronics just went back and rewatched ur FBlice with ur CDJs and let me
> > > > > tell you man. You are the fucking messiah",
> > > > >
> > > > > "@ic4rus1 Opportunistic means short-game. As in getting drunk now vs. not
> > > > > being hung over tomorrow vs. not fucking up your life ten years later.",
> > > > >
> > > > > "I tend to think about my dreams before I sleep.", "@MichaelAvenatti
> > > > > @SenatorCollins So,? if your client was in her 20s, attending parties with
> > > > > teenagers, doesn't that make her at the least immature as hell, or at the
> > > > > worst, a pedophile and a person contributing to the delinquency of minors?",
> > > > >
> > > > >
> > > > > "i wish i could take credit for this"), lat = c(43.6835853, 40.284123,
> > > > >
> > > > > 37.7706565, 40.431389, 31.1688935, 33.9376735), lng = c(-70.3284118,
> > > > >
> > > > > -83.078589, -122.4359785, -79.9806895, -100.0768885, -118.130426
> > > > >
> > > > > ), county_name = c("Cumberland County", "Delaware County", "San Francisco
> > > > > County",
> > > > >
> > > > > "Allegheny County", "Concho County", "Los Angeles County"), fips = c(23005L,
> > > > >
> > > > >
> > > > > 39041L, 6075L, 42003L, 48095L, 6037L), state_name = c("Maine",
> > > > >
> > > > > "Ohio", "California", "Pennsylvania", "Texas", "California"),
> > > > >
> > > > > ? ? state_abb = c("ME", "OH", "CA", "PA", "TX", "CA"), urban_level =
> > > > > c("Medium Metro",
> > > > >
> > > > > ? ? "Large Fringe Metro", "Large Central Metro", "Large Central Metro",
> > > > >
> > > > > ? ? "NonCore (Nonmetro)", "Large Central Metro"), urban_code = c(3L,
> > > > >
> > > > > ? ? 2L, 1L, 1L, 6L, 1L), population = c(277308L, 184029L, 830781L,
> > > > >
> > > > > ? ? 1160433L, 4160L, 9509611L)), class = "data.frame", row.names = c(NA,
> > > > >
> > > > > -6L))
> > > > >
> > > > >
> > > > > st <- structure(list(terms = c("me abused depressed", "me hurt depressed",
> > > > >
> > > > > "feel hopeless depressed", "feel alone depressed", "i feel helpless",
> > > > >
> > > > > "i feel worthless")), row.names = c(NA, -6L), class = c("tbl_df",
> > > > >
> > > > > "tbl", "data.frame"))
> > > > >
> > > > > On Tue, Oct 16, 2018 at 2:39 PM Nathan Parsons <nathan.f.parsons at gmail.com>
> > > > > wrote:
> > > > >
> > > > > > Thanks all for your patience. Here?s a second go that is perhaps more
> > > > > > explicative of what it is I am trying to accomplish (and hopefully in plain
> > > > > > text form)...
> > > > > >
> > > > > >
> > > > > > I?m using the following packages: tidyverse, purrr, tidytext
> > > > > >
> > > > > >
> > > > > > I have a number of tweets in the following form:
> > > > > >
> > > > > >
> > > > > > th <- structure(list(status_id = c("x1047841705729306624",
> > > > > > "x1046966595610927105",
> > > > > >
> > > > > > "x1047094786610552832", "x1046988542818308097", "x1046934493553221632",
> > > > > >
> > > > > > "x1047227442899775488"), created_at = c("2018-10-04T13:31:45Z",
> > > > > >
> > > > > > "2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",
> > > > > >
> > > > > > "2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z"), text = c("Technique is
> > > > > > everything with olympic lifts ! @ Body By John https://t.co/UsfR6DafZt",
> > > > > >
> > > > > > "@Subtronics just went back and rewatched ur FBlice with ur CDJs and let
> > > > > > me tell you man. You are the fucking messiah",
> > > > > >
> > > > > > "@ic4rus1 Opportunistic means short-game. As in getting drunk now vs. not
> > > > > > being hung over tomorrow vs. not fucking up your life ten years later.",
> > > > > >
> > > > > > "I tend to think about my dreams before I sleep.", "@MichaelAvenatti
> > > > > > @SenatorCollins So, if your client was in her 20s, attending parties with
> > > > > > teenagers, doesn't that make her at the least immature as hell, or at the
> > > > > > worst, a pedophile and a person contributing to the delinquency of minors?",
> > > > > >
> > > > > > "i wish i could take credit for this"), lat = c(43.6835853, 40.284123,
> > > > > >
> > > > > > 37.7706565, 40.431389, 31.1688935, 33.9376735), lng = c(-70.3284118,
> > > > > >
> > > > > > -83.078589, -122.4359785, -79.9806895, -100.0768885, -118.130426
> > > > > >
> > > > > > ), county_name = c("Cumberland County", "Delaware County", "San Francisco
> > > > > > County",
> > > > > >
> > > > > > "Allegheny County", "Concho County", "Los Angeles County"), fips =
> > > > > > c(23005L,
> > > > > >
> > > > > > 39041L, 6075L, 42003L, 48095L, 6037L), state_name = c("Maine",
> > > > > >
> > > > > > "Ohio", "California", "Pennsylvania", "Texas", "California"),
> > > > > >
> > > > > > state_abb = c("ME", "OH", "CA", "PA", "TX", "CA"), urban_level = c("Medium
> > > > > > Metro",
> > > > > >
> > > > > > "Large Fringe Metro", "Large Central Metro", "Large Central Metro",
> > > > > >
> > > > > > "NonCore (Nonmetro)", "Large Central Metro"), urban_code = c(3L,
> > > > > >
> > > > > > 2L, 1L, 1L, 6L, 1L), population = c(277308L, 184029L, 830781L,
> > > > > >
> > > > > > 1160433L, 4160L, 9509611L)), class = c("data.table", "data.frame"
> > > > > >
> > > > > > ), row.names = c(NA, -6L), .internal.selfref = )
> > > > > >
> > > > > >
> > > > > > I also have a number of search terms in the following form:
> > > > > >
> > > > > >
> > > > > > st <- structure(list(terms = c("me abused depressed", "me hurt depressed",
> > > > > >
> > > > > > "feel hopeless depressed", "feel alone depressed", "i feel helpless",
> > > > > >
> > > > > > "i feel worthless")), row.names = c(NA, -6L), class = c("tbl_df",
> > > > > >
> > > > > > "tbl", "data.frame?))
> > > > > >
> > > > > >
> > > > > > I am trying to isolate the tweets that contain all of the words in each of
> > > > > > the search terms, i.e ?me? ?abused? and ?depressed? from the first example
> > > > > > search term, but they do not have to be in order or even next to one
> > > > > > another.
> > > > > >
> > > > > >
> > > > > > I am familiar with the dplyr suite of tools and have been attempting to
> > > > > > generate some sort of ?filter()? to do this. I am not very familiar with
> > > > > > purrr, but there may be a solution using the map function? I have also
> > > > > > explored the tidytext ?unnest_tokens? function which transforms the ?th?
> > > > > > data in the following way:
> > > > > >
> > > > > >
> > > > > > > tidytext::unnest_tokens(th, word, text, token = "tweets") -> tt
> > > > > >
> > > > > > > head(tt)
> > > > > >
> > > > > > status_id created_at lat lng
> > > > > >
> > > > > > 1: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
> > > > > >
> > > > > > 2: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
> > > > > >
> > > > > > 3: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
> > > > > >
> > > > > > 4: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
> > > > > >
> > > > > > 5: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
> > > > > >
> > > > > > 6: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
> > > > > >
> > > > > > county_name fips state_name state_abb urban_level urban_code
> > > > > >
> > > > > > 1: Cumberland County 23005 Maine ME Medium Metro 3
> > > > > >
> > > > > > 2: Cumberland County 23005 Maine ME Medium Metro 3
> > > > > >
> > > > > > 3: Cumberland County 23005 Maine ME Medium Metro 3
> > > > > >
> > > > > > 4: Cumberland County 23005 Maine ME Medium Metro 3
> > > > > >
> > > > > > 5: Cumberland County 23005 Maine ME Medium Metro 3
> > > > > >
> > > > > > 6: Cumberland County 23005 Maine ME Medium Metro 3
> > > > > >
> > > > > > population word
> > > > > >
> > > > > > 1: 277308 technique
> > > > > >
> > > > > > 2: 277308 is
> > > > > >
> > > > > > 3: 277308 everything
> > > > > >
> > > > > > 4: 277308 with
> > > > > >
> > > > > > 5: 277308 olympic
> > > > > >
> > > > > > 6: 277308 lifts
> > > > > >
> > > > > >
> > > > > > but once I have unnested the tokens, I am unable to recombine them back
> > > > > > into tweets.
> > > > > >
> > > > > >
> > > > > > Ideally the end result would append a new column to the ?th? data that
> > > > > > would flag a tweet that contained all of the search words for any of the
> > > > > > search terms; so the work flow would look like
> > > > > >
> > > > > > 1) look for all search words for one search term in a tweet
> > > > > >
> > > > > > 2) if all of the search words in the search term are found, create a flag
> > > > > > (mutate(flag = 1) or some such)
> > > > > >
> > > > > > 3) do this for all of the tweets
> > > > > >
> > > > > > 4) move on the next search term and repeat
> > > > > >
> > > > > >
> > > > > > Again, my thanks for your patience.
> > > > > >
> > > > > >
> > > > > > --
> > > > > >
> > > > > >
> > > > > > Nate Parsons
> > > > > >
> > > > > > Pronouns: He, Him, His
> > > > > >
> > > > > > Graduate Teaching Assistant
> > > > > >
> > > > > > Department of Sociology
> > > > > >
> > > > > > Portland State University
> > > > > >
> > > > > > Portland, Oregon
> > > > > >
> > > > > >
> > > > > > 503-725-9025
> > > > > >
> > > > > > 503-725-3957 FAX
> > > > > >
> > > > >
> > > > > ? ? ? ? [[alternative HTML version deleted]]
> > > > >
> > > > > ______________________________________________
> > > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > > > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > > > > and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]



From pw|jer@tne @end|ng |rom gm@||@com  Wed Oct 17 21:48:25 2018
From: pw|jer@tne @end|ng |rom gm@||@com (Peter Wijeratne)
Date: Wed, 17 Oct 2018 20:48:25 +0100
Subject: [R] Simulating data with nested random effects
Message-ID: <CAHsQySsziSS5whA_jVgk61J0wy9=v+m-3usLKMYNFdw43DPM3w@mail.gmail.com>

Hello,

I would like to simulate nested data, where my mixed effects model fitted
to real data has the form:

y ~ time + (1 | site/subject)

I then take the hyper-parameters from this model to simulate fake data,
using this function:

create_fake <- function(J,K,L,HP,t){

                                                              # J :
number of sites

                                                    # K : number of
subjects / site

                                          # L : number of years# HP:
hyperparameters from fit, y ~ time + (1 | site/subject)# t: fractional
effectiveness of treatment
time <- rep(seq(0,2,length=L), J*K)
subject <- rep(1:(J*K), each=L)
site <- sample(rep (1:J, K))
site1 <- factor(site[subject])
treatment <- sample(rep (0:1, J*K/2))
treatment1 <- treatment[subject]
# time coefficient
g.0.true <- as.numeric( HP['g.0.true'] )

                                                          # treatment
coefficient
g.1.true <- -as.numeric(t)*g.0.true
                                           # intercept
mu.a.true <- as.numeric( HP['mu.a.true'] )

                                                          # fixed
effects
b.true <- (g.0.true + g.1.true*treatment)

                                                          # random
effects
sigma.y.true <- as.numeric( HP['sigma.y.true'] ) # residual std dev
sigma.a.true <- as.numeric( HP['sigma.a.true'] ) # site std dev
sigma.a0.true <- as.numeric( HP['sigma.a0.true'] ) # site:person std
dev
a0.true <- rnorm(J*K, 0, sigma.a0.true)
a.true <- rnorm(J*K, mu.a.true + a0.true, sigma.a.true)
y <- rnorm(J*K*L, a.true[subject] + b.true[subject]*time,
sigma.y.true)
return(data.frame( y, time, subject, treatment1, site1 ))

I then fit models of the form:

y ~ time + time:treatment1 + (1 | site1/subject)

To the fake data. However, this approach can (but not always) produce a
'site' standard deviation approximately a factor of 10 less than in the
real data.

My question is - is my simulation function correct?

	[[alternative HTML version deleted]]



From bgunter@4567 @end|ng |rom gm@||@com  Thu Oct 18 04:22:03 2018
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 17 Oct 2018 19:22:03 -0700
Subject: [R] Simulating data with nested random effects
In-Reply-To: <CAHsQySsziSS5whA_jVgk61J0wy9=v+m-3usLKMYNFdw43DPM3w@mail.gmail.com>
References: <CAHsQySsziSS5whA_jVgk61J0wy9=v+m-3usLKMYNFdw43DPM3w@mail.gmail.com>
Message-ID: <CAGxFJbSpRu2fifbZXMXJzRkXUNW9J=K8y6s+y2kghjj8uiH+qQ@mail.gmail.com>

This would almost certainly fit better on the r-sig-mixed-models
list,rather than here. You are more likely to get authoritative responses
about this specialized statistical topic there.

Also -- these are **plain text** mailing lists. Please do not post in html.

Cheers,
Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Oct 17, 2018 at 5:45 PM Peter Wijeratne <pwijeratne at gmail.com>
wrote:

> Hello,
>
> I would like to simulate nested data, where my mixed effects model fitted
> to real data has the form:
>
> y ~ time + (1 | site/subject)
>
> I then take the hyper-parameters from this model to simulate fake data,
> using this function:
>
> create_fake <- function(J,K,L,HP,t){
>
>                                                               # J :
> number of sites
>
>                                                     # K : number of
> subjects / site
>
>                                           # L : number of years# HP:
> hyperparameters from fit, y ~ time + (1 | site/subject)# t: fractional
> effectiveness of treatment
> time <- rep(seq(0,2,length=L), J*K)
> subject <- rep(1:(J*K), each=L)
> site <- sample(rep (1:J, K))
> site1 <- factor(site[subject])
> treatment <- sample(rep (0:1, J*K/2))
> treatment1 <- treatment[subject]
> # time coefficient
> g.0.true <- as.numeric( HP['g.0.true'] )
>
>                                                           # treatment
> coefficient
> g.1.true <- -as.numeric(t)*g.0.true
>                                            # intercept
> mu.a.true <- as.numeric( HP['mu.a.true'] )
>
>                                                           # fixed
> effects
> b.true <- (g.0.true + g.1.true*treatment)
>
>                                                           # random
> effects
> sigma.y.true <- as.numeric( HP['sigma.y.true'] ) # residual std dev
> sigma.a.true <- as.numeric( HP['sigma.a.true'] ) # site std dev
> sigma.a0.true <- as.numeric( HP['sigma.a0.true'] ) # site:person std
> dev
> a0.true <- rnorm(J*K, 0, sigma.a0.true)
> a.true <- rnorm(J*K, mu.a.true + a0.true, sigma.a.true)
> y <- rnorm(J*K*L, a.true[subject] + b.true[subject]*time,
> sigma.y.true)
> return(data.frame( y, time, subject, treatment1, site1 ))
>
> I then fit models of the form:
>
> y ~ time + time:treatment1 + (1 | site1/subject)
>
> To the fake data. However, this approach can (but not always) produce a
> 'site' standard deviation approximately a factor of 10 less than in the
> real data.
>
> My question is - is my simulation function correct?
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From bgunter@4567 @end|ng |rom gm@||@com  Thu Oct 18 04:50:49 2018
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 17 Oct 2018 19:50:49 -0700
Subject: [R] 
 Matching multiple search criteria (Unlisting a nested dataset,
 take 2)
In-Reply-To: <4e06312a-10f4-4524-a82f-9f7618e435fb@Spark>
References: <CANdqJqdP2bDdVNc=8R7jeXYU94p_=3BNmwrt11zwh7OdOaEfZA@mail.gmail.com>
 <CANdqJqfCZU96s3XtVWwDYgmmh4LOJe-3896xxO4Ye4aMGaoDWg@mail.gmail.com>
 <CAGxFJbQmPf=vqRU0iLgEBGyTtUXL_GX8Kd3Bgdq796QhpQxUXA@mail.gmail.com>
 <CAGxFJbRFJjwWjMWSLJMDVtwqWwNd0K36rHLyJiL63nmwVGZBZQ@mail.gmail.com>
 <4e06312a-10f4-4524-a82f-9f7618e435fb@Spark>
Message-ID: <CAGxFJbQabThuSjOgWaa4QT1Da3EhfjQ9W=0dNKRDtVknije5BQ@mail.gmail.com>

If you wish to use R, you need to at least understand its basic data
structures and functionality. Expecting that mimickry of code in special
packages will suffice is, I believe, an illusion. If you haven't already
done so, you should go through a basic R tutorial or two (there are many on
the web; some recommendations, by no means necessarily "the best",  can be
found here:
https://www.rstudio.com/online-learning/#r-programming).

Having said that, I realized that my previous "solution" using regular
expressions was more complicated than it needed to be and somewhat foolish
( so much for all my "expertise"). A simpler and better approach is simply
to break up both the tweet texts and your search phrases into vectors of
their "words" (i.e. character strings surrounded by spaces) using
strplit(), and then using R's built-in matching capabilities with %in%.
This is quite straightforward, pretty robust (no regex's to wrestle with),
and does not require "herculean efforts" to understand. The only wrinkle is
some bookkeeping with the "apply" family of functions. These are, as you
may know, the functional programming way of handling iteration (loops), but
they are what I would consider part of "basic" R functionality and worth
spending the time to learn about.

Herewith my better, simpler proposal, using your example data as before:

getwords <- function(x)strsplit(tolower(x),split = " +")
## split text into a vector of lower-cased "words"

phrasewords <- structure(getwords(st$terms), names = st$terms)
## named list of your search word vectors

tweets <- getwords(c(th$text, " i xxxx worthless yxxc ght feel"))
## the tweets + one additional that should match the last phrase

ans <- lapply(phrasewords, function(x) apply(sapply(tweets,function(y)x
%in% y), 2, all))
## a list indexed by the search phrases,
## with each component a vector of logicals with vec[i] == TRUE iff
## the ith tweet contains all the words in the search phrase

> ans
$`me abused depressed`
[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE

$`me hurt depressed`
[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE

$`feel hopeless depressed`
[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE

$`feel alone depressed`
[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE

$`i feel helpless`
[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE

$`i feel worthless`
[1] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE

-- Bert

On Wed, Oct 17, 2018 at 9:20 AM Nathan Parsons <nathan.f.parsons at gmail.com>
wrote:

> I do not have your command of base r, Bert. That is a herculean effort!
> Here?s what I spent my night putting together:
>
> ## Create search terms
> ## dput(st)
> st <- structure(list(word1 = c("technique", "me", "me", "feel", "feel"
> ), word2 = c("olympic", "abused", "hurt", "hopeless", "alone"
> ), word3 = c("lifts", "depressed", "depressed", "depressed",
> "depressed")), class = c("tbl_df", "tbl", "data.frame"), row.names = c(NA,
> -5L))
>
> ## Create tweets
> ## dput(th)
> th <- structure(list(status_id = c("x1047841705729306624",
> "x1046966595610927105",
> "x1047094786610552832", "x1046988542818308097", "x1046934493553221632",
> "x1047227442899775488", "x1048126008941981696", "x1047798782673543173",
> "x1048269727582355457", "x1048092408544677890"), created_at =
> c("2018-10-04T13:31:45Z",
> "2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",
> "2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z", "2018-10-05T08:21:28Z",
> "2018-10-04T10:41:11Z", "2018-10-05T17:52:33Z", "2018-10-05T06:07:57Z"
> ), text = c("technique is everything with olympic lifts ! @ body by john ",
> "@subtronics just went back and rewatched ur fblice with ur cdjs and let
> me tell you man. you are the fucking messiah",
> "@ic4rus1 opportunistic means short-game. as in getting drunk now vs. not
> being hung over tomorrow vs. not fucking up your life ten years later.",
> "i tend to think about my dreams before i sleep.", "@michaelavenatti
> @senatorcollins so if your client was in her 20s attending parties with
> teenagers doesnt that make her at the least immature as hell or at the
> worst a pedophile and a person contributing to the delinquency of minors?",
> "i wish i could take credit for this", "i woulda never imagined. #lakeshow
> ",
> "@philipbloom @blackmagic_news its ok phil! i feel your pain! ",
> "sunday ill have a booth in katy at the real craft wives of katy fest
> @nolabelbrewco cmon yall!everything is better when you top it with
> tias!order today we ship to all 50 ",
> "dolly is so baddd"), lat = c(43.6835853, 40.284123, 37.7706565,
> 40.431389, 31.1688935, 33.9376735, 34.0207895, 44.900818, 29.7926,
> 32.364145), lng = c(-70.3284118, -83.078589, -122.4359785, -79.9806895,
> -100.0768885, -118.130426, -118.4119065, -89.5694915, -95.8224,
> -86.2447285), county_name = c("Cumberland County", "Delaware County",
> "San Francisco County", "Allegheny County", "Concho County",
> "Los Angeles County", "Los Angeles County", "Marathon County",
> "Harris County", "Montgomery County"), fips = c(23005L, 39041L,
> 6075L, 42003L, 48095L, 6037L, 6037L, 55073L, 48201L, 1101L),
> state_name = c("Maine", "Ohio", "California", "Pennsylvania",
> "Texas", "California", "California", "Wisconsin", "Texas",
> "Alabama"), state_abb = c("ME", "OH", "CA", "PA", "TX", "CA",
> "CA", "WI", "TX", "AL"), urban_level = c("Medium Metro",
> "Large Fringe Metro", "Large Central Metro", "Large Central Metro",
> "NonCore (Nonmetro)", "Large Central Metro", "Large Central Metro",
> "Small Metro", "Large Central Metro", "Medium Metro"), urban_code = c(3L,
> 2L, 1L, 1L, 6L, 1L, 1L, 4L, 1L, 3L), population = c(277308L,
> 184029L, 830781L, 1160433L, 4160L, 9509611L, 9509611L, 127612L,
> 4233913L, 211037L), linenumber = 1:10), row.names = c(NA,
> 10L), class = "data.frame")
>
> ## Clean tweets - basically just remove everything we don?t need from the
> text including punctuation and urls
> th %>%
> mutate(linenumber = row_number(),
> text = str_remove_all(text, "[^\x01-\x7F]"),
> text = str_remove_all(text, "\n"),
> text = str_remove_all(text, ","),
> text = str_remove_all(text, "'"),
> text = str_remove_all(text, "&"),
> text = str_remove_all(text, "<"),
> text = str_remove_all(text, ">"),
> text = str_remove_all(text, "http[s]?://[[:alnum:].\\/]+"),
> text = tolower(text)) -> th
>
> ## Create search function that looks for each search term in the provided
> string, evaluates if all three search terms have been found, and returns a
> logical
> srchr <- function(df) {
> str_detect(df, "olympic") -> a
> str_detect(df, "technique") -> b
> str_detect(df, "lifts") -> c
> ifelse(a == TRUE & b == TRUE & c == TRUE, TRUE, FALSE)
> }
>
> ## Evaluate tweets for presence of search term
> th %>%
> mutate(flag = map_chr(text, srchr)) -> th_flagged
>
> As far as I can tell, this works. I have to manually enter each set of
> search terms into the function, which is not ideal. Also, this only
> generates a True/False for each tweet based on one search term - I end up
> with an evaluatory column for each search term that I would then have to
> collapse together somehow. I?m sure there?s a more elegant solution.
>
> --
>
> Nate Parsons
> Pronouns: He, Him, His
> Graduate Teaching Assistant
> Department of Sociology
> Portland State University
> Portland, Oregon
>
> 503-725-9025
> 503-725-3957 FAX
> On Oct 16, 2018, 7:20 PM -0700, Bert Gunter <bgunter.4567 at gmail.com>,
> wrote:
>
> OK, as no one else has offered a solution, I'll take a whack at it.
>
> Caveats: This is a brute force attempt using R's basic regular expression
> engine. It is inelegant and barely tested, so likely to be at best
> incomplete and buggy, and at worst, incorrect. But maybe Nathan or someone
> else on the list can fix it up. So if (when) it breaks, complain on the
> list to give someone (almost certainly not me) the opportunity.
>
> The basic idea is that the tweets are just character strings and the
> search phrases are just character vectors all of whose elements must match
> "appropriately" -- i.e. they must match whole words -- in the character
> strings. So my desired output from the code is a list indexed by the search
> phrases, each of whose components if a logical vector of length the number
> of tweets each of whose elements = TRUE iff all the words in the search
> phrase match somewhere in the tweet.
>
> Here's the code(using the data Nathan provided):
>
> > words <- sapply(st[[1]],strsplit,split = " +" )
> ## convert the phrases to a list of character vectors of the words
> ## Result:
> > words
> $`me abused depressed`
> [1] "me"        "abused"    "depressed"
>
> $`me hurt depressed`
> [1] "me"        "hurt"      "depressed"
>
> $`feel hopeless depressed`
> [1] "feel"      "hopeless"  "depressed"
>
> $`feel alone depressed`
> [1] "feel"      "alone"     "depressed"
>
> $`i feel helpless`
> [1] "i"        "feel"     "helpless"
>
> $`i feel worthless`
> [1] "i"         "feel"      "worthless"
>
> > expand.words <-  function(z)lapply(z,function(x)paste0(c("^ *"," ","
> "),x, c(" "," "," *$")))
> ## function to create regexes for words when they are at the beginning,
> middle, or end of tweets
>
> > wordregex <- lapply(words,expand.words)
> ##Result
> ## too lengthy to include
> ##
> > tweets <- th$text
> ##extract the tweets
> > findin <- function(x,y)
>    ## x is a vector of regex patterns
>    ## y is a character vector
>    ## value = vector,vec, with length(vec) == length(y) and vec[i] == TRUE
> iff any of x matches y[i]
> { apply(sapply(x,function(z)grepl(z,y)), 1,any)
> }
>
> ## add a matching "tweet" to the tweet vector:
> > tweets <- c(tweets," i xxxx worthless yxxc ght feel")
>
> > ans <-
> lapply(wordregex,function(z)apply(sapply(z,function(x)findin(x,tweets)), 1,
> all))
> ## Result:
> > ans
> $`me abused depressed`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>
> $`me hurt depressed`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>
> $`feel hopeless depressed`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>
> $`feel alone depressed`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>
> $`i feel helpless`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>
> $`i feel worthless`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE
>
> ## None of the tweets match any of the phrases except for the last tweet
> that I added.
>
> ## Note: you need to add capabilities to handle upper and lower case. See,
> e.g. ?casefold
>
> Cheers,
> Bert
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Tue, Oct 16, 2018 at 3:03 PM Bert Gunter <bgunter.4567 at gmail.com>
> wrote:
>
>> The problem wasn't the data tibbles. You posted in html -- which you were
>> explictly warned against -- and that corrupted your text (e.g. some quotes
>> became "smart quotes", which cannot be properly cut and pasted into R).
>>
>> Bert
>>
>>
>> On Tue, Oct 16, 2018 at 2:47 PM Nathan Parsons <
>> nathan.f.parsons at gmail.com> wrote:
>>
>>> Argh! Here are those two example datasets as data frames (not tibbles).
>>> Sorry again. This apparently is just not my day.
>>>
>>>
>>> th <- structure(list(status_id = c("x1047841705729306624",
>>> "x1046966595610927105",
>>>
>>> "x1047094786610552832", "x1046988542818308097", "x1046934493553221632",
>>>
>>> "x1047227442899775488"), created_at = c("2018-10-04T13:31:45Z",
>>>
>>> "2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",
>>>
>>> "2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z"), text = c("Technique is
>>> everything with olympic lifts ! @ Body By John https://t.co/UsfR6DafZt",
>>>
>>> "@Subtronics just went back and rewatched ur FBlice with ur CDJs and let
>>> me
>>> tell you man. You are the fucking messiah",
>>>
>>> "@ic4rus1 Opportunistic means short-game. As in getting drunk now vs. not
>>> being hung over tomorrow vs. not fucking up your life ten years later.",
>>>
>>> "I tend to think about my dreams before I sleep.", "@MichaelAvenatti
>>> @SenatorCollins So,  if your client was in her 20s, attending parties
>>> with
>>> teenagers, doesn't that make her at the least immature as hell, or at the
>>> worst, a pedophile and a person contributing to the delinquency of
>>> minors?",
>>>
>>>
>>> "i wish i could take credit for this"), lat = c(43.6835853, 40.284123,
>>>
>>> 37.7706565, 40.431389, 31.1688935, 33.9376735), lng = c(-70.3284118,
>>>
>>> -83.078589, -122.4359785, -79.9806895, -100.0768885, -118.130426
>>>
>>> ), county_name = c("Cumberland County", "Delaware County", "San Francisco
>>> County",
>>>
>>> "Allegheny County", "Concho County", "Los Angeles County"), fips =
>>> c(23005L,
>>>
>>>
>>> 39041L, 6075L, 42003L, 48095L, 6037L), state_name = c("Maine",
>>>
>>> "Ohio", "California", "Pennsylvania", "Texas", "California"),
>>>
>>>     state_abb = c("ME", "OH", "CA", "PA", "TX", "CA"), urban_level =
>>> c("Medium Metro",
>>>
>>>     "Large Fringe Metro", "Large Central Metro", "Large Central Metro",
>>>
>>>     "NonCore (Nonmetro)", "Large Central Metro"), urban_code = c(3L,
>>>
>>>     2L, 1L, 1L, 6L, 1L), population = c(277308L, 184029L, 830781L,
>>>
>>>     1160433L, 4160L, 9509611L)), class = "data.frame", row.names = c(NA,
>>>
>>> -6L))
>>>
>>>
>>> st <- structure(list(terms = c("me abused depressed", "me hurt
>>> depressed",
>>>
>>> "feel hopeless depressed", "feel alone depressed", "i feel helpless",
>>>
>>> "i feel worthless")), row.names = c(NA, -6L), class = c("tbl_df",
>>>
>>> "tbl", "data.frame"))
>>>
>>> On Tue, Oct 16, 2018 at 2:39 PM Nathan Parsons <
>>> nathan.f.parsons at gmail.com>
>>> wrote:
>>>
>>> > Thanks all for your patience. Here?s a second go that is perhaps more
>>> > explicative of what it is I am trying to accomplish (and hopefully in
>>> plain
>>> > text form)...
>>> >
>>> >
>>> > I?m using the following packages: tidyverse, purrr, tidytext
>>> >
>>> >
>>> > I have a number of tweets in the following form:
>>> >
>>> >
>>> > th <- structure(list(status_id = c("x1047841705729306624",
>>> > "x1046966595610927105",
>>> >
>>> > "x1047094786610552832", "x1046988542818308097", "x1046934493553221632",
>>> >
>>> > "x1047227442899775488"), created_at = c("2018-10-04T13:31:45Z",
>>> >
>>> > "2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",
>>> >
>>> > "2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z"), text = c("Technique is
>>> > everything with olympic lifts ! @ Body By John https://t.co/UsfR6DafZt
>>> ",
>>> >
>>> > "@Subtronics just went back and rewatched ur FBlice with ur CDJs and
>>> let
>>> > me tell you man. You are the fucking messiah",
>>> >
>>> > "@ic4rus1 Opportunistic means short-game. As in getting drunk now vs.
>>> not
>>> > being hung over tomorrow vs. not fucking up your life ten years
>>> later.",
>>> >
>>> > "I tend to think about my dreams before I sleep.", "@MichaelAvenatti
>>> > @SenatorCollins So, if your client was in her 20s, attending parties
>>> with
>>> > teenagers, doesn't that make her at the least immature as hell, or at
>>> the
>>> > worst, a pedophile and a person contributing to the delinquency of
>>> minors?",
>>> >
>>> > "i wish i could take credit for this"), lat = c(43.6835853, 40.284123,
>>> >
>>> > 37.7706565, 40.431389, 31.1688935, 33.9376735), lng = c(-70.3284118,
>>> >
>>> > -83.078589, -122.4359785, -79.9806895, -100.0768885, -118.130426
>>> >
>>> > ), county_name = c("Cumberland County", "Delaware County", "San
>>> Francisco
>>> > County",
>>> >
>>> > "Allegheny County", "Concho County", "Los Angeles County"), fips =
>>> > c(23005L,
>>> >
>>> > 39041L, 6075L, 42003L, 48095L, 6037L), state_name = c("Maine",
>>> >
>>> > "Ohio", "California", "Pennsylvania", "Texas", "California"),
>>> >
>>> > state_abb = c("ME", "OH", "CA", "PA", "TX", "CA"), urban_level =
>>> c("Medium
>>> > Metro",
>>> >
>>> > "Large Fringe Metro", "Large Central Metro", "Large Central Metro",
>>> >
>>> > "NonCore (Nonmetro)", "Large Central Metro"), urban_code = c(3L,
>>> >
>>> > 2L, 1L, 1L, 6L, 1L), population = c(277308L, 184029L, 830781L,
>>> >
>>> > 1160433L, 4160L, 9509611L)), class = c("data.table", "data.frame"
>>> >
>>> > ), row.names = c(NA, -6L), .internal.selfref = )
>>> >
>>> >
>>> > I also have a number of search terms in the following form:
>>> >
>>> >
>>> > st <- structure(list(terms = c("me abused depressed", "me hurt
>>> depressed",
>>> >
>>> > "feel hopeless depressed", "feel alone depressed", "i feel helpless",
>>> >
>>> > "i feel worthless")), row.names = c(NA, -6L), class = c("tbl_df",
>>> >
>>> > "tbl", "data.frame?))
>>> >
>>> >
>>> > I am trying to isolate the tweets that contain all of the words in
>>> each of
>>> > the search terms, i.e ?me? ?abused? and ?depressed? from the first
>>> example
>>> > search term, but they do not have to be in order or even next to one
>>> > another.
>>> >
>>> >
>>> > I am familiar with the dplyr suite of tools and have been attempting to
>>> > generate some sort of ?filter()? to do this. I am not very familiar
>>> with
>>> > purrr, but there may be a solution using the map function? I have also
>>> > explored the tidytext ?unnest_tokens? function which transforms the
>>> ?th?
>>> > data in the following way:
>>> >
>>> >
>>> > > tidytext::unnest_tokens(th, word, text, token = "tweets") -> tt
>>> >
>>> > > head(tt)
>>> >
>>> > status_id created_at lat lng
>>> >
>>> > 1: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>> >
>>> > 2: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>> >
>>> > 3: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>> >
>>> > 4: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>> >
>>> > 5: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>> >
>>> > 6: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>> >
>>> > county_name fips state_name state_abb urban_level urban_code
>>> >
>>> > 1: Cumberland County 23005 Maine ME Medium Metro 3
>>> >
>>> > 2: Cumberland County 23005 Maine ME Medium Metro 3
>>> >
>>> > 3: Cumberland County 23005 Maine ME Medium Metro 3
>>> >
>>> > 4: Cumberland County 23005 Maine ME Medium Metro 3
>>> >
>>> > 5: Cumberland County 23005 Maine ME Medium Metro 3
>>> >
>>> > 6: Cumberland County 23005 Maine ME Medium Metro 3
>>> >
>>> > population word
>>> >
>>> > 1: 277308 technique
>>> >
>>> > 2: 277308 is
>>> >
>>> > 3: 277308 everything
>>> >
>>> > 4: 277308 with
>>> >
>>> > 5: 277308 olympic
>>> >
>>> > 6: 277308 lifts
>>> >
>>> >
>>> > but once I have unnested the tokens, I am unable to recombine them back
>>> > into tweets.
>>> >
>>> >
>>> > Ideally the end result would append a new column to the ?th? data that
>>> > would flag a tweet that contained all of the search words for any of
>>> the
>>> > search terms; so the work flow would look like
>>> >
>>> > 1) look for all search words for one search term in a tweet
>>> >
>>> > 2) if all of the search words in the search term are found, create a
>>> flag
>>> > (mutate(flag = 1) or some such)
>>> >
>>> > 3) do this for all of the tweets
>>> >
>>> > 4) move on the next search term and repeat
>>> >
>>> >
>>> > Again, my thanks for your patience.
>>> >
>>> >
>>> > --
>>> >
>>> >
>>> > Nate Parsons
>>> >
>>> > Pronouns: He, Him, His
>>> >
>>> > Graduate Teaching Assistant
>>> >
>>> > Department of Sociology
>>> >
>>> > Portland State University
>>> >
>>> > Portland, Oregon
>>> >
>>> >
>>> > 503-725-9025
>>> >
>>> > 503-725-3957 FAX
>>> >
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>

	[[alternative HTML version deleted]]



From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Oct 18 05:19:01 2018
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 17 Oct 2018 20:19:01 -0700 (PDT)
Subject: [R] year and week to date - before 1/1 and after 12/31
In-Reply-To: <CAHdotik1nvTtZ0Q_9xUMnr+i69o6fNnNNddt8n3=kW=40Oz6RQ@mail.gmail.com>
References: <CAHdotinT-X5+huK05prObMuDSPHgBtRBe2ERdVr57bz1A5o06w@mail.gmail.com>
 <CAHdotimPAJwM5-HJyafESW-OvP4bOxKAxLGTG5ecdq1WDzHeAw@mail.gmail.com>
 <338ACAD3-127C-49AD-943F-9DD5BBDE2421@dcn.davis.ca.us>
 <294CB480-26E8-454C-9C31-B78396CB5BCA@dcn.davis.ca.us>
 <CAHdotik1nvTtZ0Q_9xUMnr+i69o6fNnNNddt8n3=kW=40Oz6RQ@mail.gmail.com>
Message-ID: <alpine.BSF.2.00.1810172015100.64488@pedal.dcn.davis.ca.us>

You cannot obtain a predictable result by sending invalid time 
representation data to strptime... you have to work with valid time 
representations.
See sample approach below:

############################
weekEnds <- function( DF ) {
    d1_1 <- as.Date( sprintf( "%04d 1 1"
                            , DF[[ "Y" ]]
                            )
                   , format = "%Y %U %u"
                   )
    d52_7 <- as.Date( sprintf( "%04d 52 7"
                             , DF[[ "Y" ]]
                             )
                    , format = "%Y %U %u"
                    )
    week <- as.difftime( 7, units = "days" )
    day <- as.difftime( 1, units = "days" )
    d <- as.Date( sprintf( "%04d %d 1"
                         , DF[[ "Y" ]]
                         , DF[[ "wn" ]]
                         )
                , format = "%Y %U %u"
                )
    before <- 0 == DF[[ "wn" ]]
    after <- 53 == DF[[ "wn" ]]
    d[ before ] <- d1_1[ before ] - week
    d[ after ] <- d52_7[ after ] + day
    DF[[ "weekBegin" ]] <- d
    DF[[ "weekEnd" ]] <- d + week
    DF
}

tst <- expand.grid( Y = 2000:2028
                   , wn = c( 0, 1, 53 )
                   )

result <- weekEnds( tst )
set.seed( 42 )
result[ sample( nrow( result ), 5 ), ]
#>       Y wn  weekBegin    weekEnd
#> 80 2021 53 2021-12-27 2022-01-03
#> 81 2022 53 2022-12-26 2023-01-02
#> 25 2024  0 2024-01-01 2024-01-08
#> 70 2011 53 2011-12-26 2012-01-02
#> 54 2024  1 2024-01-08 2024-01-15
sum( is.na( result$weekBegin ) )
#> [1] 0
############################

On Tue, 16 Oct 2018, peter salzman wrote:

> hi,
> thanks for replying,
> 
> it has taken some time to understand
> 
> i have year+week and i need to find the 1st day and the last day of that week
> i can decide when week starts
> 
> for example these 3 examples:
> df <- data.frame(id = 1:3, year = c(2018, 2018, 2018), week=c(0,1,52))
> 
> ## now run for all 3 rows:
> for (kk in 1:3) {
> ? print(df[kk,])
> ? print('## version 1')
> ? print(as.Date(paste(df$year[kk],df$week[kk],'Sun',sep=' '), format = "%Y %U %a")? ? ? ?)?
> ? print(as.Date(paste(df$year[kk],df$week[kk],'Mon',sep=' '), format = "%Y %U %a")? ? ? ?)?
> ? print(as.Date(paste(df$year[kk],df$week[kk],'Tue',sep=' '), format = "%Y %U %a")? ? ? ?)?
> ? print(as.Date(paste(df$year[kk],df$week[kk],'Wed',sep=' '), format = "%Y %U %a")? ? ? ?)?
> ? print(as.Date(paste(df$year[kk],df$week[kk],'Thu',sep=' '), format = "%Y %U %a")? ? ? ?)?
> ? print(as.Date(paste(df$year[kk],df$week[kk],'Fri',sep=' '), format = "%Y %U %a")? ? ? ?)?
> ? print(as.Date(paste(df$year[kk],df$week[kk],'Sat',sep=' '), format = "%Y %U %a")? ? ? ?)
> ??
> ? print('## version 2')
> ? print(as.Date(paste(df$year[kk],df$week[kk],'7',sep=' '), format = "%Y %U %u")? ? ? ? )?
> ? print(as.Date(paste(df$year[kk],df$week[kk],'1',sep=' '), format = "%Y %U %u")? ? ? ? ?)?
> ? print(as.Date(paste(df$year[kk],df$week[kk],'2',sep=' '), format = "%Y %U %u")? ? ? ? ?)?
> ? print(as.Date(paste(df$year[kk],df$week[kk],'3',sep=' '), format = "%Y %U %u")? ? ? ? ?)?
> ? print(as.Date(paste(df$year[kk],df$week[kk],'4',sep=' '), format = "%Y %U %u")? ? ? ? ?)?
> ? print(as.Date(paste(df$year[kk],df$week[kk],'5',sep=' '), format = "%Y %U %u")? ? ? ? ?)?
> ? print(as.Date(paste(df$year[kk],df$week[kk],'6',sep=' '), format = "%Y %U %u")? ? ? ? ?)
> }
> 
> for week 0 we get NA for Sunday because it was Dec 31, 2017
> similarly for week 52 we get NA for Tue,Wed, ... because these are in January of 2019
> 
> my hope was to write?
> as.Date(paste(year,week,1), format "%Y %month %weekday")
> as.Date(paste(year,week,7), format "%Y %month %weekday")
> and get the first and last day of the given week even at the beginning and end of year
> for example
> as.Date("2018 0 Sun","%Y %U %a")? ?= '2017-12-31'
> 
> i hope this makes sense.
> 
> thanks for replying
> peter
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> On Tue, Oct 16, 2018 at 2:11 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>       Er, my mistake, you are using %U not %W... but now I am really confused, because the first Sunday is trivial with %U/%u.
>
>       Can you clarify what your actual upstream input is? Is it an invalid date string as you say below, or is it year number?
>
>       On October 16, 2018 10:22:10 AM PDT, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>       >If the date in your character representation does not exist then there
>       >is no requirement for a POSIX function to give any reliable answer...
>       >including NA. Using 00 as the week number won't always work.
>       >
>       >The first week/weekday combination that is guaranteed to exist by POSIX
>       >is 1/1 (first Monday). If the corresponding mon/mday is 1/1 then no
>       >days exist in week zero for that year and the first Sunday is 6 days
>       >more than the mday of the first Monday, else the mday of the first
>       >Sunday is one day less than the mday of the first Monday.
>       >
>       >You should if at all possible repair the computations that are creating
>       >the invalid string dates you mention.
>       >
>       >On October 16, 2018 8:11:12 AM PDT, peter salzman
>       ><peter.salzmanuser at gmail.com> wrote:
>       >>it is simpler than i thought
>       >>
>       >>first day of given week is the last day minus 6days
>       >>
>       >>in other words:
>       >>d1 = as.Date('2018 00 Sat',format="%Y %U %a") - 6
>       >>d2 = as.Date('2018 00 Sun',format="%Y %U %a")
>       >>are the same as long both are not NA
>       >>
>       >>therefore to get the one that is not NA one can do
>       >>
>       >>max( c(d1,d2), na.rm=TRUE )
>       >>
>       >>maybe there is some other trick
>       >>
>       >>best,
>       >>peter
>       >>
>       >>
>       >>
>       >>
>       >>
>       >>
>       >>On Tue, Oct 16, 2018 at 10:22 AM peter salzman
>       >><peter.salzmanuser at gmail.com>
>       >>wrote:
>       >>
>       >>> hi,
>       >>>
>       >>> to turn year and week into the date one can do the following:
>       >>>
>       >>> as.Date('2018 05 Sun', "%Y %W %a")
>       >>>
>       >>> however, when we want the Sunday (1st day of week) of the 1st week
>       >of
>       >>2018
>       >>> we get NA because 1/1/2018 was on Monday
>       >>>
>       >>> as.Date('2018 00 Mon',format="%Y %U %a")
>       >>> ## 2018-01-01
>       >>> as.Date('2018 00 Sun',format="%Y %U %a")
>       >>> ## NA
>       >>>
>       >>> btw the same goes for last week
>       >>> as.Date('2017 53 Sun',format="%Y %U %a")
>       >>> ## 2017-12-31
>       >>> as.Date('2017 53 Mon',format="%Y %U %a")
>       >>> ## NA
>       >>>
>       >>> So my question is :
>       >>> how do i get
>       >>> from "2018 00 Sun" to 2018-12-31
>       >>> and
>       >>> from "2017 53 Mon" to 2018-01-01
>       >>>
>       >>> i realize i can loop over days of week and do some if/then
>       >>statements,
>       >>> but is there a built in function?
>       >>>
>       >>> thank you
>       >>> peter
>       >>>
>       >>>
>       >>>
>       >>>
>       >>>
>       >>> --
>       >>> Peter Salzman, PhD
>       >>> Department of Biostatistics and Computational Biology
>       >>> University of Rochester
>       >>>
>
>       --
>       Sent from my phone. Please excuse my brevity.
> 
> 
> 
> --
> Peter Salzman, PhD
> BMS
> Greater Boston Area, MA
> 
>

---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                       Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
---------------------------------------------------------------------------

From jun@y@n @end|ng |rom uconn@edu  Thu Oct 18 11:50:25 2018
From: jun@y@n @end|ng |rom uconn@edu (Yan, Jun)
Date: Thu, 18 Oct 2018 09:50:25 +0000
Subject: [R] 
 Seeking nomination for the Statistical Computing and Graphics Award
In-Reply-To: <BL0PR05MB46271C19AF334BD2D354F709F0310@BL0PR05MB4627.namprd05.prod.outlook.com>
References: <BL0PR05MB46271C19AF334BD2D354F709F0310@BL0PR05MB4627.namprd05.prod.outlook.com>
Message-ID: <BL0PR05MB462759B4DFA6268B255D4BB0F0F80@BL0PR05MB4627.namprd05.prod.outlook.com>

This is a reminder that the deadline is about 4 weeks ahead. We'd appreciate your spreading the word or nominating a candidate.


Best regards.

Jun Yan

________________________________
From: Yan, Jun
Sent: Tuesday, August 21, 2018 6:39:46 AM
To: r-help at R-project.org
Subject: Seeking nomination for the Statistical Computing and Graphics Award

(apologies for cross posting)

The Statistical Computing and Graphics Award of the ASA Sections of Statistical Computing and Statistical Graphics recognizes an individual or team for innovation in computing, software, or graphics that has had a great impact on statistical practice or research. The past awardees include Bill Cleveland (2016) and Robert Gentleman and Ross Ihaka (2010). The prize carries with it a cash award of $5,000 plus an allowance of up to $1,000 for travel to the next Joint Statistical Meetings (JSM) where the award will be presented.

Qualifications
The prize-winning contribution will have had significant and lasting impacts on statistical computing, software or graphics.

The Awards Committee depends on the American Statistical Association membership to submit nominations. Committee members will review the nominations and make the final determination of who, if any, should receive the award. The award may not be given to a sitting member of the Awards Committee or a sitting member of the Executive Committee of the Section of Statistical Computing or the Section of Statistical Graphics.

Nomination and Award Dates
Nominations are due by November 15, 2018 for an award to be presented at the JSM in the following year. Nominations should be submitted as a complete packet, consisting of:
- a nomination letter, no longer than four pages, addressing points in the selection criteria
- nominee's curriculum vita(e)
- a minimum of 3 (and no more than 4) supporting letters, each no longer than two pages

Selection Process
The Awards Committee will consist of the Chairs and Past Chairs of the Sections on Statistical Computing and Statistical Graphics. The selection process will be handled by the Awards Chair of the Statistical Computing Section and the Statistical Graphics Section. Nominations and questions are to be sent to the e-mail address below.

Jun Yan
Professor
University of Connecticut
jun.yan at uconn.edu






	[[alternative HTML version deleted]]



From @k@h@y_e4 @end|ng |rom hotm@||@com  Thu Oct 18 13:52:32 2018
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Thu, 18 Oct 2018 11:52:32 +0000
Subject: [R] inconsistency in pbmclapply/mclapply....
Message-ID: <SL2P216MB00911634D4B58B7696801FC5C8F80@SL2P216MB0091.KORP216.PROD.OUTLOOK.COM>

dear members,
                              I am using pbmclapply in pbmcapply package, to do parallel processing in my R function. Below is the line that is malfunctioning:

> LYG1b <- pbmclapply(lygh171, FUN = auto.arima, mc.cores = detectCores())

auto.arima is a function from the "forecast" package. The length of lygh171 is 2435.

NOW:

> LYG1b[[1]]
[1] "Error in ts(x) : 'ts' object must have one or more observations\n"
attr(,"class")
[1] "try-error"
attr(,"condition")
<simpleError in ts(x): 'ts' object must have one or more observations>

AND:

> auto.arima(lygh171[[1]])
Series: lygh171[[1]]
ARIMA(0,1,0)

sigma^2 estimated as 2.303:  log likelihood=-66.1
AIC=134.2   AICc=134.31   BIC=135.78

AND:

> LYG1ba <- pbmclapply(lygh171[1:9], FUN = auto.arima, mc.cores = detectCores())

> LYG1ba[[1]]
Series: X[[i]]
ARIMA(0,1,0)

sigma^2 estimated as 2.303:  log likelihood=-66.1
AIC=134.2   AICc=134.31   BIC=135.78

Why is LYG1b[[1]] not welldefined  but  LYG1ba[[1]] is eventhough the function(auto.arima) is the same in both cases? And why is the direct application of auto.arima on lygh171[[1]] successful, but not when auto.arima is iterated through pbmclapply on lygh171?
 here is the output of dput:
lygh171[1:9] <-  list(c(0.699999999999999, 0.399999999999999, 0.300000000000001,
0.149999999999999, 0.25, 0.949999999999999, 1, 0.300000000000001,
0.65, 0.199999999999999, 0.6, 0.0999999999999996, 0.00141287284144427,
1.55, 0.15, 0.300000000000001, 0.449999999999999, 0.350000000000001,
0.149999999999999, 2.35, 0.25, 0.100000000000001, 3.7, 3.95,
3.05, 0.899999999999999, 0.399999999999999, 1.05, 1.1, 1.95,
2, 0.649999999999999, 0.699999999999999, 0.25, 5.25, 0.800000000000001,
0.00141287284144427), c(0, 0.199999999999999, 1.3, 2, 1.9, 1.6
), c(0.699999999999999, 0.399999999999999, 0.300000000000001,
0.149999999999999, 0.25, 1, 0.300000000000001, 0.65, 0.199999999999999,
0.0999999999999996, 0.300000000000001, 0.15, 0.25, 0.15, 0.300000000000001,
0.449999999999999, 0.800000000000001, 0.25, 0.350000000000001,
0.149999999999999, 2.35, 0.25, 0.100000000000001, 3.7, 3.95,
3.05, 0.899999999999999, 0.399999999999999, 1.05, 1.1, 1.95,
2, 0.649999999999999, 0.699999999999999, 0.25, 5.25, 0.800000000000001,
0.699999999999999, 0.449999999999999, 0.800000000000001, 0.800000000000001
), c(0.0500000000000007, 0.25, 0.100000000000001, 1.25, 1, 0.65,
0.65, 0.9, 0.4, 0.0500000000000007, 0.0500000000000007, 0.450000000000001,
1.2, 0.5, 0.15, 0.35, 0.0500000000000007, 0.300000000000001,
1.1, 0.0999999999999996, 0.950000000000001, 0.25, 0.75, 0.199999999999999,
0.5, 0.5, 0.25, 2, 0.699999999999999, 2.75, 1.65, 0.149999999999999,
0.200000000000003, 2, 1.25, 4.3, 0.600000000000001, 0.75, 0.549999999999997,
0.5, 3.6, 4.1, 0.899999999999999, 0.100000000000001, 1, 0.25,
0.100000000000001, 0.399999999999999, 0.149999999999999, 1.7,
0.949999999999999, 0.150000000000002), c(0.0500000000000007,
0.25, 0.15, 0.0999999999999996, 0.5, 0.15, 0.600000000000001,
1, 0.149999999999999, 0.600000000000001, 3.05, 0.100000000000001,
0.199999999999999, 1.3), c(0.5, 0.5, 0.0999999999999996, 1.2,
3.75, 1.9), c(0.000770416024653313, 0.550000000000001, 1.2, 3
), 1, 0.25)

very many thanks for your time and effort....
yours sincerely,

AKSHAY M KULKARNI

	[[alternative HTML version deleted]]



From ggrothend|eck @end|ng |rom gm@||@com  Thu Oct 18 14:26:12 2018
From: ggrothend|eck @end|ng |rom gm@||@com (Gabor Grothendieck)
Date: Thu, 18 Oct 2018 08:26:12 -0400
Subject: [R] year and week to date - before 1/1 and after 12/31
In-Reply-To: <CAHdotinT-X5+huK05prObMuDSPHgBtRBe2ERdVr57bz1A5o06w@mail.gmail.com>
References: <CAHdotinT-X5+huK05prObMuDSPHgBtRBe2ERdVr57bz1A5o06w@mail.gmail.com>
Message-ID: <CAP01uRntEoB39uaKWz9Vv4+wLZj18=dqJ62VNog-t3-XReACpg@mail.gmail.com>

Replace the week in the date with week 2, say -- a week in which
nothing will go wrong and then add or subtract the appropriate number
of weeks.

  d <- c('2016 00 Sun', '2017 53 Sun', '2017 53 Mon') # test data

  as.Date(sub(" .. ", "02", d), "%Y %U %a") +
     7 * (as.numeric(sub(".... (..) ...", "\\1", d)) - 2)
  ## [1] "2015-12-27" "2017-12-31" "2018-01-01"

On Tue, Oct 16, 2018 at 10:23 AM peter salzman
<peter.salzmanuser at gmail.com> wrote:
>
> hi,
>
> to turn year and week into the date one can do the following:
>
> as.Date('2018 05 Sun', "%Y %W %a")
>
> however, when we want the Sunday (1st day of week) of the 1st week of 2018
> we get NA because 1/1/2018 was on Monday
>
> as.Date('2018 00 Mon',format="%Y %U %a")
> ## 2018-01-01
> as.Date('2018 00 Sun',format="%Y %U %a")
> ## NA
>
> btw the same goes for last week
> as.Date('2017 53 Sun',format="%Y %U %a")
> ## 2017-12-31
> as.Date('2017 53 Mon',format="%Y %U %a")
> ## NA
>
> So my question is :
> how do i get
> from "2018 00 Sun" to 2018-12-31
> and
> from "2017 53 Mon" to 2018-01-01
>
> i realize i can loop over days of week and do some if/then statements,
> but is there a built in function?
>
> thank you
> peter
>
>
>
>
>
> --
> Peter Salzman, PhD
> Department of Biostatistics and Computational Biology
> University of Rochester
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com



From peter@@@|zm@nu@er @end|ng |rom gm@||@com  Thu Oct 18 15:19:25 2018
From: peter@@@|zm@nu@er @end|ng |rom gm@||@com (peter salzman)
Date: Thu, 18 Oct 2018 09:19:25 -0400
Subject: [R] year and week to date - before 1/1 and after 12/31
In-Reply-To: <alpine.BSF.2.00.1810172015100.64488@pedal.dcn.davis.ca.us>
References: <CAHdotinT-X5+huK05prObMuDSPHgBtRBe2ERdVr57bz1A5o06w@mail.gmail.com>
 <CAHdotimPAJwM5-HJyafESW-OvP4bOxKAxLGTG5ecdq1WDzHeAw@mail.gmail.com>
 <338ACAD3-127C-49AD-943F-9DD5BBDE2421@dcn.davis.ca.us>
 <294CB480-26E8-454C-9C31-B78396CB5BCA@dcn.davis.ca.us>
 <CAHdotik1nvTtZ0Q_9xUMnr+i69o6fNnNNddt8n3=kW=40Oz6RQ@mail.gmail.com>
 <alpine.BSF.2.00.1810172015100.64488@pedal.dcn.davis.ca.us>
Message-ID: <CAHdotinLeyA3vSrivkKhumY=Jo-EipQe2pnHqFZ3VhZz1V7ycw@mail.gmail.com>

thanks Jeff and Gabor,
appreciate you spending time on this,

you both use similar ideas - add/subtract days/weeks from a day that exists

combining all i learned i would go with something like this:

## step 1) find 1st sunday of year Y
d11 <- as.Date( sprintf( "%04d 1 1"
                            , DF[[ "Y" ]]
                            )
                   , format = "%Y %U %u"
                   )
## btw note that when Jan 1 is on sunday then d11 will be Jan 8th
## step 2) for start of week just add the number of weeks that is needed
start <- d11 + (w-1)*week
## step 3) for end of week add number of weeks and subtract 1 day
start <- d11 + w*week - day

thanks
peter






On Wed, Oct 17, 2018 at 11:15 PM Jeff Newmiller
<jdnewmil at dcn.davis.ca.us> wrote:
>
> You cannot obtain a predictable result by sending invalid time
> representation data to strptime... you have to work with valid time
> representations.
> See sample approach below:
>
> ############################
> weekEnds <- function( DF ) {
>     d1_1 <- as.Date( sprintf( "%04d 1 1"
>                             , DF[[ "Y" ]]
>                             )
>                    , format = "%Y %U %u"
>                    )
>     d52_7 <- as.Date( sprintf( "%04d 52 7"
>                              , DF[[ "Y" ]]
>                              )
>                     , format = "%Y %U %u"
>                     )
>     week <- as.difftime( 7, units = "days" )
>     day <- as.difftime( 1, units = "days" )
>     d <- as.Date( sprintf( "%04d %d 1"
>                          , DF[[ "Y" ]]
>                          , DF[[ "wn" ]]
>                          )
>                 , format = "%Y %U %u"
>                 )
>     before <- 0 == DF[[ "wn" ]]
>     after <- 53 == DF[[ "wn" ]]
>     d[ before ] <- d1_1[ before ] - week
>     d[ after ] <- d52_7[ after ] + day
>     DF[[ "weekBegin" ]] <- d
>     DF[[ "weekEnd" ]] <- d + week
>     DF
> }
>
> tst <- expand.grid( Y = 2000:2028
>                    , wn = c( 0, 1, 53 )
>                    )
>
> result <- weekEnds( tst )
> set.seed( 42 )
> result[ sample( nrow( result ), 5 ), ]
> #>       Y wn  weekBegin    weekEnd
> #> 80 2021 53 2021-12-27 2022-01-03
> #> 81 2022 53 2022-12-26 2023-01-02
> #> 25 2024  0 2024-01-01 2024-01-08
> #> 70 2011 53 2011-12-26 2012-01-02
> #> 54 2024  1 2024-01-08 2024-01-15
> sum( is.na( result$weekBegin ) )
> #> [1] 0
> ############################
>
> On Tue, 16 Oct 2018, peter salzman wrote:
>
> > hi,
> > thanks for replying,
> >
> > it has taken some time to understand
> >
> > i have year+week and i need to find the 1st day and the last day of that week
> > i can decide when week starts
> >
> > for example these 3 examples:
> > df <- data.frame(id = 1:3, year = c(2018, 2018, 2018), week=c(0,1,52))
> >
> > ## now run for all 3 rows:
> > for (kk in 1:3) {
> >   print(df[kk,])
> >   print('## version 1')
> >   print(as.Date(paste(df$year[kk],df$week[kk],'Sun',sep=' '), format = "%Y %U %a")       )
> >   print(as.Date(paste(df$year[kk],df$week[kk],'Mon',sep=' '), format = "%Y %U %a")       )
> >   print(as.Date(paste(df$year[kk],df$week[kk],'Tue',sep=' '), format = "%Y %U %a")       )
> >   print(as.Date(paste(df$year[kk],df$week[kk],'Wed',sep=' '), format = "%Y %U %a")       )
> >   print(as.Date(paste(df$year[kk],df$week[kk],'Thu',sep=' '), format = "%Y %U %a")       )
> >   print(as.Date(paste(df$year[kk],df$week[kk],'Fri',sep=' '), format = "%Y %U %a")       )
> >   print(as.Date(paste(df$year[kk],df$week[kk],'Sat',sep=' '), format = "%Y %U %a")       )
> >
> >   print('## version 2')
> >   print(as.Date(paste(df$year[kk],df$week[kk],'7',sep=' '), format = "%Y %U %u")        )
> >   print(as.Date(paste(df$year[kk],df$week[kk],'1',sep=' '), format = "%Y %U %u")         )
> >   print(as.Date(paste(df$year[kk],df$week[kk],'2',sep=' '), format = "%Y %U %u")         )
> >   print(as.Date(paste(df$year[kk],df$week[kk],'3',sep=' '), format = "%Y %U %u")         )
> >   print(as.Date(paste(df$year[kk],df$week[kk],'4',sep=' '), format = "%Y %U %u")         )
> >   print(as.Date(paste(df$year[kk],df$week[kk],'5',sep=' '), format = "%Y %U %u")         )
> >   print(as.Date(paste(df$year[kk],df$week[kk],'6',sep=' '), format = "%Y %U %u")         )
> > }
> >
> > for week 0 we get NA for Sunday because it was Dec 31, 2017
> > similarly for week 52 we get NA for Tue,Wed, ... because these are in January of 2019
> >
> > my hope was to write
> > as.Date(paste(year,week,1), format "%Y %month %weekday")
> > as.Date(paste(year,week,7), format "%Y %month %weekday")
> > and get the first and last day of the given week even at the beginning and end of year
> > for example
> > as.Date("2018 0 Sun","%Y %U %a")   = '2017-12-31'
> >
> > i hope this makes sense.
> >
> > thanks for replying
> > peter
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> > On Tue, Oct 16, 2018 at 2:11 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
> >       Er, my mistake, you are using %U not %W... but now I am really confused, because the first Sunday is trivial with %U/%u.
> >
> >       Can you clarify what your actual upstream input is? Is it an invalid date string as you say below, or is it year number?
> >
> >       On October 16, 2018 10:22:10 AM PDT, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
> >       >If the date in your character representation does not exist then there
> >       >is no requirement for a POSIX function to give any reliable answer...
> >       >including NA. Using 00 as the week number won't always work.
> >       >
> >       >The first week/weekday combination that is guaranteed to exist by POSIX
> >       >is 1/1 (first Monday). If the corresponding mon/mday is 1/1 then no
> >       >days exist in week zero for that year and the first Sunday is 6 days
> >       >more than the mday of the first Monday, else the mday of the first
> >       >Sunday is one day less than the mday of the first Monday.
> >       >
> >       >You should if at all possible repair the computations that are creating
> >       >the invalid string dates you mention.
> >       >
> >       >On October 16, 2018 8:11:12 AM PDT, peter salzman
> >       ><peter.salzmanuser at gmail.com> wrote:
> >       >>it is simpler than i thought
> >       >>
> >       >>first day of given week is the last day minus 6days
> >       >>
> >       >>in other words:
> >       >>d1 = as.Date('2018 00 Sat',format="%Y %U %a") - 6
> >       >>d2 = as.Date('2018 00 Sun',format="%Y %U %a")
> >       >>are the same as long both are not NA
> >       >>
> >       >>therefore to get the one that is not NA one can do
> >       >>
> >       >>max( c(d1,d2), na.rm=TRUE )
> >       >>
> >       >>maybe there is some other trick
> >       >>
> >       >>best,
> >       >>peter
> >       >>
> >       >>
> >       >>
> >       >>
> >       >>
> >       >>
> >       >>On Tue, Oct 16, 2018 at 10:22 AM peter salzman
> >       >><peter.salzmanuser at gmail.com>
> >       >>wrote:
> >       >>
> >       >>> hi,
> >       >>>
> >       >>> to turn year and week into the date one can do the following:
> >       >>>
> >       >>> as.Date('2018 05 Sun', "%Y %W %a")
> >       >>>
> >       >>> however, when we want the Sunday (1st day of week) of the 1st week
> >       >of
> >       >>2018
> >       >>> we get NA because 1/1/2018 was on Monday
> >       >>>
> >       >>> as.Date('2018 00 Mon',format="%Y %U %a")
> >       >>> ## 2018-01-01
> >       >>> as.Date('2018 00 Sun',format="%Y %U %a")
> >       >>> ## NA
> >       >>>
> >       >>> btw the same goes for last week
> >       >>> as.Date('2017 53 Sun',format="%Y %U %a")
> >       >>> ## 2017-12-31
> >       >>> as.Date('2017 53 Mon',format="%Y %U %a")
> >       >>> ## NA
> >       >>>
> >       >>> So my question is :
> >       >>> how do i get
> >       >>> from "2018 00 Sun" to 2018-12-31
> >       >>> and
> >       >>> from "2017 53 Mon" to 2018-01-01
> >       >>>
> >       >>> i realize i can loop over days of week and do some if/then
> >       >>statements,
> >       >>> but is there a built in function?
> >       >>>
> >       >>> thank you
> >       >>> peter
> >       >>>
> >       >>>
> >       >>>
> >       >>>
> >       >>>
> >       >>> --
> >       >>> Peter Salzman, PhD
> >       >>> Department of Biostatistics and Computational Biology
> >       >>> University of Rochester
> >       >>>
> >
> >       --
> >       Sent from my phone. Please excuse my brevity.
> >
> >
> >
> > --
> > Peter Salzman, PhD
> > BMS
> > Greater Boston Area, MA
> >
> >
>
> ---------------------------------------------------------------------------
> Jeff Newmiller                        The     .....       .....  Go Live...
> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
>                                        Live:   OO#.. Dead: OO#..  Playing
> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
> /Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
> ---------------------------------------------------------------------------



-- 
Peter Salzman, PhD
BMS
Greater Boston Area, MA



From bgunter@4567 @end|ng |rom gm@||@com  Fri Oct 19 04:04:47 2018
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 18 Oct 2018 19:04:47 -0700
Subject: [R] 
 Matching multiple search criteria (Unlisting a nested dataset,
 take 2)
In-Reply-To: <CAGxFJbQabThuSjOgWaa4QT1Da3EhfjQ9W=0dNKRDtVknije5BQ@mail.gmail.com>
References: <CANdqJqdP2bDdVNc=8R7jeXYU94p_=3BNmwrt11zwh7OdOaEfZA@mail.gmail.com>
 <CANdqJqfCZU96s3XtVWwDYgmmh4LOJe-3896xxO4Ye4aMGaoDWg@mail.gmail.com>
 <CAGxFJbQmPf=vqRU0iLgEBGyTtUXL_GX8Kd3Bgdq796QhpQxUXA@mail.gmail.com>
 <CAGxFJbRFJjwWjMWSLJMDVtwqWwNd0K36rHLyJiL63nmwVGZBZQ@mail.gmail.com>
 <4e06312a-10f4-4524-a82f-9f7618e435fb@Spark>
 <CAGxFJbQabThuSjOgWaa4QT1Da3EhfjQ9W=0dNKRDtVknije5BQ@mail.gmail.com>
Message-ID: <CAGxFJbQzGOdb5-coFEV=U4hhwGYQA+9xU2OjLVfYMTYQ6HWWOA@mail.gmail.com>

All (especially Nathan): **Please feel free to ignore this post without
response.** It just represents a bit of OCD-ness on my part that may or may
not be of interest to anyone else.

Purpose of this post: To give an alternative considerably simpler and
considerably faster solution to the problem than those which I offered
previously. It may or may not be what the OP asked for, but the improvement
exercise was instructive to me . Notation as previously in this thread.

New solution:

getwords <-
function(x)strsplit(gsub("(^[[:space:]]+)|([[:space:]]+)$)","",tolower(x)),split
= " +")
## split lower-cased text into a vector of "words"
## I made this a bit fancier to handle some "corner" cases, but the
previous simpler version may well suffice.

'%allin%' <- function(x, table)prod(match(x,table, nomatch = 0L)) > 0L
## a convenience function/operator that improves efficiency.

## lists of  search word vectors as before
phrasewords <- getwords(st$terms)
tweets <- getwords(c(th$text, " i xxxx worthless yxxc ght feel")) ## the
tweets + one additional

## simpler approach just using indexing for the bookkeeping that nested
_apply
## loops previously were used for
ans <- expand.grid(phrases = seq_along(phrasewords),tweets =
seq_along(tweets), Result = FALSE)
ans$Result <- apply(ind,1,function(r)phrasewords[[r[1]]] %allin%
tweets[[r[2]]])

## ans is a data frame in which the first column indexes phrases and the
second tweets
## The ith row of ans$Result == TRUE iff all the words in the phrase
indexed by the ith row of the
##  phrase column are contained in the tweet indexed by that row's tweet
column.

This was way faster than my previous offerings.

Note also that just the matching phrases and tweets can be extracted as
usual by:

> ans[ans[,3],]
   phrases tweets Result
42       6      7   TRUE
## all the words in the 6th search phrase appeared in the 7th tweet.

** I promise to natter on about this no longer! **

Cheers,
Bert


On Wed, Oct 17, 2018 at 7:50 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:

>
> If you wish to use R, you need to at least understand its basic data
> structures and functionality. Expecting that mimickry of code in special
> packages will suffice is, I believe, an illusion. If you haven't already
> done so, you should go through a basic R tutorial or two (there are many on
> the web; some recommendations, by no means necessarily "the best",  can be
> found here:
> https://www.rstudio.com/online-learning/#r-programming).
>
> Having said that, I realized that my previous "solution" using regular
> expressions was more complicated than it needed to be and somewhat foolish
> ( so much for all my "expertise"). A simpler and better approach is simply
> to break up both the tweet texts and your search phrases into vectors of
> their "words" (i.e. character strings surrounded by spaces) using
> strplit(), and then using R's built-in matching capabilities with %in%.
> This is quite straightforward, pretty robust (no regex's to wrestle with),
> and does not require "herculean efforts" to understand. The only wrinkle is
> some bookkeeping with the "apply" family of functions. These are, as you
> may know, the functional programming way of handling iteration (loops), but
> they are what I would consider part of "basic" R functionality and worth
> spending the time to learn about.
>
> Herewith my better, simpler proposal, using your example data as before:
>
> getwords <- function(x)strsplit(tolower(x),split = " +")
> ## split text into a vector of lower-cased "words"
>
> phrasewords <- structure(getwords(st$terms), names = st$terms)
> ## named list of your search word vectors
>
> tweets <- getwords(c(th$text, " i xxxx worthless yxxc ght feel"))
> ## the tweets + one additional that should match the last phrase
>
> ans <- lapply(phrasewords, function(x) apply(sapply(tweets,function(y)x
> %in% y), 2, all))
> ## a list indexed by the search phrases,
> ## with each component a vector of logicals with vec[i] == TRUE iff
> ## the ith tweet contains all the words in the search phrase
>
> > ans
> $`me abused depressed`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>
> $`me hurt depressed`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>
> $`feel hopeless depressed`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>
> $`feel alone depressed`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>
> $`i feel helpless`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>
> $`i feel worthless`
> [1] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE
>
> -- Bert
>
> On Wed, Oct 17, 2018 at 9:20 AM Nathan Parsons <nathan.f.parsons at gmail.com>
> wrote:
>
>> I do not have your command of base r, Bert. That is a herculean effort!
>> Here?s what I spent my night putting together:
>>
>> ## Create search terms
>> ## dput(st)
>> st <- structure(list(word1 = c("technique", "me", "me", "feel", "feel"
>> ), word2 = c("olympic", "abused", "hurt", "hopeless", "alone"
>> ), word3 = c("lifts", "depressed", "depressed", "depressed",
>> "depressed")), class = c("tbl_df", "tbl", "data.frame"), row.names = c(NA,
>> -5L))
>>
>> ## Create tweets
>> ## dput(th)
>> th <- structure(list(status_id = c("x1047841705729306624",
>> "x1046966595610927105",
>> "x1047094786610552832", "x1046988542818308097", "x1046934493553221632",
>> "x1047227442899775488", "x1048126008941981696", "x1047798782673543173",
>> "x1048269727582355457", "x1048092408544677890"), created_at =
>> c("2018-10-04T13:31:45Z",
>> "2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",
>> "2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z", "2018-10-05T08:21:28Z",
>> "2018-10-04T10:41:11Z", "2018-10-05T17:52:33Z", "2018-10-05T06:07:57Z"
>> ), text = c("technique is everything with olympic lifts ! @ body by john
>> ",
>> "@subtronics just went back and rewatched ur fblice with ur cdjs and let
>> me tell you man. you are the fucking messiah",
>> "@ic4rus1 opportunistic means short-game. as in getting drunk now vs. not
>> being hung over tomorrow vs. not fucking up your life ten years later.",
>> "i tend to think about my dreams before i sleep.", "@michaelavenatti
>> @senatorcollins so if your client was in her 20s attending parties with
>> teenagers doesnt that make her at the least immature as hell or at the
>> worst a pedophile and a person contributing to the delinquency of minors?",
>> "i wish i could take credit for this", "i woulda never imagined.
>> #lakeshow ",
>> "@philipbloom @blackmagic_news its ok phil! i feel your pain! ",
>> "sunday ill have a booth in katy at the real craft wives of katy fest
>> @nolabelbrewco cmon yall!everything is better when you top it with
>> tias!order today we ship to all 50 ",
>> "dolly is so baddd"), lat = c(43.6835853, 40.284123, 37.7706565,
>> 40.431389, 31.1688935, 33.9376735, 34.0207895, 44.900818, 29.7926,
>> 32.364145), lng = c(-70.3284118, -83.078589, -122.4359785, -79.9806895,
>> -100.0768885, -118.130426, -118.4119065, -89.5694915, -95.8224,
>> -86.2447285), county_name = c("Cumberland County", "Delaware County",
>> "San Francisco County", "Allegheny County", "Concho County",
>> "Los Angeles County", "Los Angeles County", "Marathon County",
>> "Harris County", "Montgomery County"), fips = c(23005L, 39041L,
>> 6075L, 42003L, 48095L, 6037L, 6037L, 55073L, 48201L, 1101L),
>> state_name = c("Maine", "Ohio", "California", "Pennsylvania",
>> "Texas", "California", "California", "Wisconsin", "Texas",
>> "Alabama"), state_abb = c("ME", "OH", "CA", "PA", "TX", "CA",
>> "CA", "WI", "TX", "AL"), urban_level = c("Medium Metro",
>> "Large Fringe Metro", "Large Central Metro", "Large Central Metro",
>> "NonCore (Nonmetro)", "Large Central Metro", "Large Central Metro",
>> "Small Metro", "Large Central Metro", "Medium Metro"), urban_code = c(3L,
>> 2L, 1L, 1L, 6L, 1L, 1L, 4L, 1L, 3L), population = c(277308L,
>> 184029L, 830781L, 1160433L, 4160L, 9509611L, 9509611L, 127612L,
>> 4233913L, 211037L), linenumber = 1:10), row.names = c(NA,
>> 10L), class = "data.frame")
>>
>> ## Clean tweets - basically just remove everything we don?t need from the
>> text including punctuation and urls
>> th %>%
>> mutate(linenumber = row_number(),
>> text = str_remove_all(text, "[^\x01-\x7F]"),
>> text = str_remove_all(text, "\n"),
>> text = str_remove_all(text, ","),
>> text = str_remove_all(text, "'"),
>> text = str_remove_all(text, "&"),
>> text = str_remove_all(text, "<"),
>> text = str_remove_all(text, ">"),
>> text = str_remove_all(text, "http[s]?://[[:alnum:].\\/]+"),
>> text = tolower(text)) -> th
>>
>> ## Create search function that looks for each search term in the provided
>> string, evaluates if all three search terms have been found, and returns a
>> logical
>> srchr <- function(df) {
>> str_detect(df, "olympic") -> a
>> str_detect(df, "technique") -> b
>> str_detect(df, "lifts") -> c
>> ifelse(a == TRUE & b == TRUE & c == TRUE, TRUE, FALSE)
>> }
>>
>> ## Evaluate tweets for presence of search term
>> th %>%
>> mutate(flag = map_chr(text, srchr)) -> th_flagged
>>
>> As far as I can tell, this works. I have to manually enter each set of
>> search terms into the function, which is not ideal. Also, this only
>> generates a True/False for each tweet based on one search term - I end up
>> with an evaluatory column for each search term that I would then have to
>> collapse together somehow. I?m sure there?s a more elegant solution.
>>
>> --
>>
>> Nate Parsons
>> Pronouns: He, Him, His
>> Graduate Teaching Assistant
>> Department of Sociology
>> Portland State University
>> Portland, Oregon
>>
>> 503-725-9025
>> 503-725-3957 FAX
>> On Oct 16, 2018, 7:20 PM -0700, Bert Gunter <bgunter.4567 at gmail.com>,
>> wrote:
>>
>> OK, as no one else has offered a solution, I'll take a whack at it.
>>
>> Caveats: This is a brute force attempt using R's basic regular expression
>> engine. It is inelegant and barely tested, so likely to be at best
>> incomplete and buggy, and at worst, incorrect. But maybe Nathan or someone
>> else on the list can fix it up. So if (when) it breaks, complain on the
>> list to give someone (almost certainly not me) the opportunity.
>>
>> The basic idea is that the tweets are just character strings and the
>> search phrases are just character vectors all of whose elements must match
>> "appropriately" -- i.e. they must match whole words -- in the character
>> strings. So my desired output from the code is a list indexed by the search
>> phrases, each of whose components if a logical vector of length the number
>> of tweets each of whose elements = TRUE iff all the words in the search
>> phrase match somewhere in the tweet.
>>
>> Here's the code(using the data Nathan provided):
>>
>> > words <- sapply(st[[1]],strsplit,split = " +" )
>> ## convert the phrases to a list of character vectors of the words
>> ## Result:
>> > words
>> $`me abused depressed`
>> [1] "me"        "abused"    "depressed"
>>
>> $`me hurt depressed`
>> [1] "me"        "hurt"      "depressed"
>>
>> $`feel hopeless depressed`
>> [1] "feel"      "hopeless"  "depressed"
>>
>> $`feel alone depressed`
>> [1] "feel"      "alone"     "depressed"
>>
>> $`i feel helpless`
>> [1] "i"        "feel"     "helpless"
>>
>> $`i feel worthless`
>> [1] "i"         "feel"      "worthless"
>>
>> > expand.words <-  function(z)lapply(z,function(x)paste0(c("^ *"," ","
>> "),x, c(" "," "," *$")))
>> ## function to create regexes for words when they are at the beginning,
>> middle, or end of tweets
>>
>> > wordregex <- lapply(words,expand.words)
>> ##Result
>> ## too lengthy to include
>> ##
>> > tweets <- th$text
>> ##extract the tweets
>> > findin <- function(x,y)
>>    ## x is a vector of regex patterns
>>    ## y is a character vector
>>    ## value = vector,vec, with length(vec) == length(y) and vec[i] ==
>> TRUE iff any of x matches y[i]
>> { apply(sapply(x,function(z)grepl(z,y)), 1,any)
>> }
>>
>> ## add a matching "tweet" to the tweet vector:
>> > tweets <- c(tweets," i xxxx worthless yxxc ght feel")
>>
>> > ans <-
>> lapply(wordregex,function(z)apply(sapply(z,function(x)findin(x,tweets)), 1,
>> all))
>> ## Result:
>> > ans
>> $`me abused depressed`
>> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>>
>> $`me hurt depressed`
>> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>>
>> $`feel hopeless depressed`
>> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>>
>> $`feel alone depressed`
>> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>>
>> $`i feel helpless`
>> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>>
>> $`i feel worthless`
>> [1] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE
>>
>> ## None of the tweets match any of the phrases except for the last tweet
>> that I added.
>>
>> ## Note: you need to add capabilities to handle upper and lower case.
>> See, e.g. ?casefold
>>
>> Cheers,
>> Bert
>>
>> Bert Gunter
>>
>> "The trouble with having an open mind is that people keep coming along
>> and sticking things into it."
>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>
>>
>> On Tue, Oct 16, 2018 at 3:03 PM Bert Gunter <bgunter.4567 at gmail.com>
>> wrote:
>>
>>> The problem wasn't the data tibbles. You posted in html -- which you
>>> were explictly warned against -- and that corrupted your text (e.g. some
>>> quotes became "smart quotes", which cannot be properly cut and pasted into
>>> R).
>>>
>>> Bert
>>>
>>>
>>> On Tue, Oct 16, 2018 at 2:47 PM Nathan Parsons <
>>> nathan.f.parsons at gmail.com> wrote:
>>>
>>>> Argh! Here are those two example datasets as data frames (not tibbles).
>>>> Sorry again. This apparently is just not my day.
>>>>
>>>>
>>>> th <- structure(list(status_id = c("x1047841705729306624",
>>>> "x1046966595610927105",
>>>>
>>>> "x1047094786610552832", "x1046988542818308097", "x1046934493553221632",
>>>>
>>>> "x1047227442899775488"), created_at = c("2018-10-04T13:31:45Z",
>>>>
>>>> "2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",
>>>>
>>>> "2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z"), text = c("Technique is
>>>> everything with olympic lifts ! @ Body By John https://t.co/UsfR6DafZt
>>>> ",
>>>>
>>>> "@Subtronics just went back and rewatched ur FBlice with ur CDJs and
>>>> let me
>>>> tell you man. You are the fucking messiah",
>>>>
>>>> "@ic4rus1 Opportunistic means short-game. As in getting drunk now vs.
>>>> not
>>>> being hung over tomorrow vs. not fucking up your life ten years later.",
>>>>
>>>> "I tend to think about my dreams before I sleep.", "@MichaelAvenatti
>>>> @SenatorCollins So,  if your client was in her 20s, attending parties
>>>> with
>>>> teenagers, doesn't that make her at the least immature as hell, or at
>>>> the
>>>> worst, a pedophile and a person contributing to the delinquency of
>>>> minors?",
>>>>
>>>>
>>>> "i wish i could take credit for this"), lat = c(43.6835853, 40.284123,
>>>>
>>>> 37.7706565, 40.431389, 31.1688935, 33.9376735), lng = c(-70.3284118,
>>>>
>>>> -83.078589, -122.4359785, -79.9806895, -100.0768885, -118.130426
>>>>
>>>> ), county_name = c("Cumberland County", "Delaware County", "San
>>>> Francisco
>>>> County",
>>>>
>>>> "Allegheny County", "Concho County", "Los Angeles County"), fips =
>>>> c(23005L,
>>>>
>>>>
>>>> 39041L, 6075L, 42003L, 48095L, 6037L), state_name = c("Maine",
>>>>
>>>> "Ohio", "California", "Pennsylvania", "Texas", "California"),
>>>>
>>>>     state_abb = c("ME", "OH", "CA", "PA", "TX", "CA"), urban_level =
>>>> c("Medium Metro",
>>>>
>>>>     "Large Fringe Metro", "Large Central Metro", "Large Central Metro",
>>>>
>>>>     "NonCore (Nonmetro)", "Large Central Metro"), urban_code = c(3L,
>>>>
>>>>     2L, 1L, 1L, 6L, 1L), population = c(277308L, 184029L, 830781L,
>>>>
>>>>     1160433L, 4160L, 9509611L)), class = "data.frame", row.names = c(NA,
>>>>
>>>> -6L))
>>>>
>>>>
>>>> st <- structure(list(terms = c("me abused depressed", "me hurt
>>>> depressed",
>>>>
>>>> "feel hopeless depressed", "feel alone depressed", "i feel helpless",
>>>>
>>>> "i feel worthless")), row.names = c(NA, -6L), class = c("tbl_df",
>>>>
>>>> "tbl", "data.frame"))
>>>>
>>>> On Tue, Oct 16, 2018 at 2:39 PM Nathan Parsons <
>>>> nathan.f.parsons at gmail.com>
>>>> wrote:
>>>>
>>>> > Thanks all for your patience. Here?s a second go that is perhaps more
>>>> > explicative of what it is I am trying to accomplish (and hopefully in
>>>> plain
>>>> > text form)...
>>>> >
>>>> >
>>>> > I?m using the following packages: tidyverse, purrr, tidytext
>>>> >
>>>> >
>>>> > I have a number of tweets in the following form:
>>>> >
>>>> >
>>>> > th <- structure(list(status_id = c("x1047841705729306624",
>>>> > "x1046966595610927105",
>>>> >
>>>> > "x1047094786610552832", "x1046988542818308097",
>>>> "x1046934493553221632",
>>>> >
>>>> > "x1047227442899775488"), created_at = c("2018-10-04T13:31:45Z",
>>>> >
>>>> > "2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z",
>>>> "2018-10-02T05:01:35Z",
>>>> >
>>>> > "2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z"), text = c("Technique
>>>> is
>>>> > everything with olympic lifts ! @ Body By John
>>>> https://t.co/UsfR6DafZt",
>>>> >
>>>> > "@Subtronics just went back and rewatched ur FBlice with ur CDJs and
>>>> let
>>>> > me tell you man. You are the fucking messiah",
>>>> >
>>>> > "@ic4rus1 Opportunistic means short-game. As in getting drunk now vs.
>>>> not
>>>> > being hung over tomorrow vs. not fucking up your life ten years
>>>> later.",
>>>> >
>>>> > "I tend to think about my dreams before I sleep.", "@MichaelAvenatti
>>>> > @SenatorCollins So, if your client was in her 20s, attending parties
>>>> with
>>>> > teenagers, doesn't that make her at the least immature as hell, or at
>>>> the
>>>> > worst, a pedophile and a person contributing to the delinquency of
>>>> minors?",
>>>> >
>>>> > "i wish i could take credit for this"), lat = c(43.6835853, 40.284123,
>>>> >
>>>> > 37.7706565, 40.431389, 31.1688935, 33.9376735), lng = c(-70.3284118,
>>>> >
>>>> > -83.078589, -122.4359785, -79.9806895, -100.0768885, -118.130426
>>>> >
>>>> > ), county_name = c("Cumberland County", "Delaware County", "San
>>>> Francisco
>>>> > County",
>>>> >
>>>> > "Allegheny County", "Concho County", "Los Angeles County"), fips =
>>>> > c(23005L,
>>>> >
>>>> > 39041L, 6075L, 42003L, 48095L, 6037L), state_name = c("Maine",
>>>> >
>>>> > "Ohio", "California", "Pennsylvania", "Texas", "California"),
>>>> >
>>>> > state_abb = c("ME", "OH", "CA", "PA", "TX", "CA"), urban_level =
>>>> c("Medium
>>>> > Metro",
>>>> >
>>>> > "Large Fringe Metro", "Large Central Metro", "Large Central Metro",
>>>> >
>>>> > "NonCore (Nonmetro)", "Large Central Metro"), urban_code = c(3L,
>>>> >
>>>> > 2L, 1L, 1L, 6L, 1L), population = c(277308L, 184029L, 830781L,
>>>> >
>>>> > 1160433L, 4160L, 9509611L)), class = c("data.table", "data.frame"
>>>> >
>>>> > ), row.names = c(NA, -6L), .internal.selfref = )
>>>> >
>>>> >
>>>> > I also have a number of search terms in the following form:
>>>> >
>>>> >
>>>> > st <- structure(list(terms = c("me abused depressed", "me hurt
>>>> depressed",
>>>> >
>>>> > "feel hopeless depressed", "feel alone depressed", "i feel helpless",
>>>> >
>>>> > "i feel worthless")), row.names = c(NA, -6L), class = c("tbl_df",
>>>> >
>>>> > "tbl", "data.frame?))
>>>> >
>>>> >
>>>> > I am trying to isolate the tweets that contain all of the words in
>>>> each of
>>>> > the search terms, i.e ?me? ?abused? and ?depressed? from the first
>>>> example
>>>> > search term, but they do not have to be in order or even next to one
>>>> > another.
>>>> >
>>>> >
>>>> > I am familiar with the dplyr suite of tools and have been attempting
>>>> to
>>>> > generate some sort of ?filter()? to do this. I am not very familiar
>>>> with
>>>> > purrr, but there may be a solution using the map function? I have also
>>>> > explored the tidytext ?unnest_tokens? function which transforms the
>>>> ?th?
>>>> > data in the following way:
>>>> >
>>>> >
>>>> > > tidytext::unnest_tokens(th, word, text, token = "tweets") -> tt
>>>> >
>>>> > > head(tt)
>>>> >
>>>> > status_id created_at lat lng
>>>> >
>>>> > 1: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>>> >
>>>> > 2: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>>> >
>>>> > 3: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>>> >
>>>> > 4: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>>> >
>>>> > 5: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>>> >
>>>> > 6: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>>> >
>>>> > county_name fips state_name state_abb urban_level urban_code
>>>> >
>>>> > 1: Cumberland County 23005 Maine ME Medium Metro 3
>>>> >
>>>> > 2: Cumberland County 23005 Maine ME Medium Metro 3
>>>> >
>>>> > 3: Cumberland County 23005 Maine ME Medium Metro 3
>>>> >
>>>> > 4: Cumberland County 23005 Maine ME Medium Metro 3
>>>> >
>>>> > 5: Cumberland County 23005 Maine ME Medium Metro 3
>>>> >
>>>> > 6: Cumberland County 23005 Maine ME Medium Metro 3
>>>> >
>>>> > population word
>>>> >
>>>> > 1: 277308 technique
>>>> >
>>>> > 2: 277308 is
>>>> >
>>>> > 3: 277308 everything
>>>> >
>>>> > 4: 277308 with
>>>> >
>>>> > 5: 277308 olympic
>>>> >
>>>> > 6: 277308 lifts
>>>> >
>>>> >
>>>> > but once I have unnested the tokens, I am unable to recombine them
>>>> back
>>>> > into tweets.
>>>> >
>>>> >
>>>> > Ideally the end result would append a new column to the ?th? data that
>>>> > would flag a tweet that contained all of the search words for any of
>>>> the
>>>> > search terms; so the work flow would look like
>>>> >
>>>> > 1) look for all search words for one search term in a tweet
>>>> >
>>>> > 2) if all of the search words in the search term are found, create a
>>>> flag
>>>> > (mutate(flag = 1) or some such)
>>>> >
>>>> > 3) do this for all of the tweets
>>>> >
>>>> > 4) move on the next search term and repeat
>>>> >
>>>> >
>>>> > Again, my thanks for your patience.
>>>> >
>>>> >
>>>> > --
>>>> >
>>>> >
>>>> > Nate Parsons
>>>> >
>>>> > Pronouns: He, Him, His
>>>> >
>>>> > Graduate Teaching Assistant
>>>> >
>>>> > Department of Sociology
>>>> >
>>>> > Portland State University
>>>> >
>>>> > Portland, Oregon
>>>> >
>>>> >
>>>> > 503-725-9025
>>>> >
>>>> > 503-725-3957 FAX
>>>> >
>>>>
>>>>         [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>

	[[alternative HTML version deleted]]



From bgunter@4567 @end|ng |rom gm@||@com  Fri Oct 19 04:34:51 2018
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 18 Oct 2018 19:34:51 -0700
Subject: [R] 
 Matching multiple search criteria (Unlisting a nested dataset,
 take 2)
In-Reply-To: <CAGxFJbQzGOdb5-coFEV=U4hhwGYQA+9xU2OjLVfYMTYQ6HWWOA@mail.gmail.com>
References: <CANdqJqdP2bDdVNc=8R7jeXYU94p_=3BNmwrt11zwh7OdOaEfZA@mail.gmail.com>
 <CANdqJqfCZU96s3XtVWwDYgmmh4LOJe-3896xxO4Ye4aMGaoDWg@mail.gmail.com>
 <CAGxFJbQmPf=vqRU0iLgEBGyTtUXL_GX8Kd3Bgdq796QhpQxUXA@mail.gmail.com>
 <CAGxFJbRFJjwWjMWSLJMDVtwqWwNd0K36rHLyJiL63nmwVGZBZQ@mail.gmail.com>
 <4e06312a-10f4-4524-a82f-9f7618e435fb@Spark>
 <CAGxFJbQabThuSjOgWaa4QT1Da3EhfjQ9W=0dNKRDtVknije5BQ@mail.gmail.com>
 <CAGxFJbQzGOdb5-coFEV=U4hhwGYQA+9xU2OjLVfYMTYQ6HWWOA@mail.gmail.com>
Message-ID: <CAGxFJbQLnsZQW9XBLnU=zD5aRu-NeDpioCL9QNE-wDACbJ6tmA@mail.gmail.com>

Sorry. Typo.  The last line should be:

ans$Result <- apply(ans,1,function(r)phrasewords[[r[1]]] %allin%
tweets[[r[2]]])

-- Bert



On Thu, Oct 18, 2018 at 7:04 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> All (especially Nathan): **Please feel free to ignore this post without
> response.** It just represents a bit of OCD-ness on my part that may or may
> not be of interest to anyone else.
>
> Purpose of this post: To give an alternative considerably simpler and
> considerably faster solution to the problem than those which I offered
> previously. It may or may not be what the OP asked for, but the improvement
> exercise was instructive to me . Notation as previously in this thread.
>
> New solution:
>
> getwords <-
> function(x)strsplit(gsub("(^[[:space:]]+)|([[:space:]]+)$)","",tolower(x)),split
> = " +")
> ## split lower-cased text into a vector of "words"
> ## I made this a bit fancier to handle some "corner" cases, but the
> previous simpler version may well suffice.
>
> '%allin%' <- function(x, table)prod(match(x,table, nomatch = 0L)) > 0L
> ## a convenience function/operator that improves efficiency.
>
> ## lists of  search word vectors as before
> phrasewords <- getwords(st$terms)
> tweets <- getwords(c(th$text, " i xxxx worthless yxxc ght feel")) ## the
> tweets + one additional
>
> ## simpler approach just using indexing for the bookkeeping that nested
> _apply
> ## loops previously were used for
> ans <- expand.grid(phrases = seq_along(phrasewords),tweets =
> seq_along(tweets), Result = FALSE)
> ans$Result <- apply(ind,1,function(r)phrasewords[[r[1]]] %allin%
> tweets[[r[2]]])
>
> ## ans is a data frame in which the first column indexes phrases and the
> second tweets
> ## The ith row of ans$Result == TRUE iff all the words in the phrase
> indexed by the ith row of the
> ##  phrase column are contained in the tweet indexed by that row's tweet
> column.
>
> This was way faster than my previous offerings.
>
> Note also that just the matching phrases and tweets can be extracted as
> usual by:
>
> > ans[ans[,3],]
>    phrases tweets Result
> 42       6      7   TRUE
> ## all the words in the 6th search phrase appeared in the 7th tweet.
>
> ** I promise to natter on about this no longer! **
>
> Cheers,
> Bert
>
>
> On Wed, Oct 17, 2018 at 7:50 PM Bert Gunter <bgunter.4567 at gmail.com>
> wrote:
>
>>
>> If you wish to use R, you need to at least understand its basic data
>> structures and functionality. Expecting that mimickry of code in special
>> packages will suffice is, I believe, an illusion. If you haven't already
>> done so, you should go through a basic R tutorial or two (there are many on
>> the web; some recommendations, by no means necessarily "the best",  can be
>> found here:
>> https://www.rstudio.com/online-learning/#r-programming).
>>
>> Having said that, I realized that my previous "solution" using regular
>> expressions was more complicated than it needed to be and somewhat foolish
>> ( so much for all my "expertise"). A simpler and better approach is simply
>> to break up both the tweet texts and your search phrases into vectors of
>> their "words" (i.e. character strings surrounded by spaces) using
>> strplit(), and then using R's built-in matching capabilities with %in%.
>> This is quite straightforward, pretty robust (no regex's to wrestle with),
>> and does not require "herculean efforts" to understand. The only wrinkle is
>> some bookkeeping with the "apply" family of functions. These are, as you
>> may know, the functional programming way of handling iteration (loops), but
>> they are what I would consider part of "basic" R functionality and worth
>> spending the time to learn about.
>>
>> Herewith my better, simpler proposal, using your example data as before:
>>
>> getwords <- function(x)strsplit(tolower(x),split = " +")
>> ## split text into a vector of lower-cased "words"
>>
>> phrasewords <- structure(getwords(st$terms), names = st$terms)
>> ## named list of your search word vectors
>>
>> tweets <- getwords(c(th$text, " i xxxx worthless yxxc ght feel"))
>> ## the tweets + one additional that should match the last phrase
>>
>> ans <- lapply(phrasewords, function(x) apply(sapply(tweets,function(y)x
>> %in% y), 2, all))
>> ## a list indexed by the search phrases,
>> ## with each component a vector of logicals with vec[i] == TRUE iff
>> ## the ith tweet contains all the words in the search phrase
>>
>> > ans
>> $`me abused depressed`
>> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>>
>> $`me hurt depressed`
>> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>>
>> $`feel hopeless depressed`
>> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>>
>> $`feel alone depressed`
>> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>>
>> $`i feel helpless`
>> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>>
>> $`i feel worthless`
>> [1] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE
>>
>> -- Bert
>>
>> On Wed, Oct 17, 2018 at 9:20 AM Nathan Parsons <
>> nathan.f.parsons at gmail.com> wrote:
>>
>>> I do not have your command of base r, Bert. That is a herculean effort!
>>> Here?s what I spent my night putting together:
>>>
>>> ## Create search terms
>>> ## dput(st)
>>> st <- structure(list(word1 = c("technique", "me", "me", "feel", "feel"
>>> ), word2 = c("olympic", "abused", "hurt", "hopeless", "alone"
>>> ), word3 = c("lifts", "depressed", "depressed", "depressed",
>>> "depressed")), class = c("tbl_df", "tbl", "data.frame"), row.names =
>>> c(NA,
>>> -5L))
>>>
>>> ## Create tweets
>>> ## dput(th)
>>> th <- structure(list(status_id = c("x1047841705729306624",
>>> "x1046966595610927105",
>>> "x1047094786610552832", "x1046988542818308097", "x1046934493553221632",
>>> "x1047227442899775488", "x1048126008941981696", "x1047798782673543173",
>>> "x1048269727582355457", "x1048092408544677890"), created_at =
>>> c("2018-10-04T13:31:45Z",
>>> "2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",
>>> "2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z", "2018-10-05T08:21:28Z",
>>> "2018-10-04T10:41:11Z", "2018-10-05T17:52:33Z", "2018-10-05T06:07:57Z"
>>> ), text = c("technique is everything with olympic lifts ! @ body by john
>>> ",
>>> "@subtronics just went back and rewatched ur fblice with ur cdjs and let
>>> me tell you man. you are the fucking messiah",
>>> "@ic4rus1 opportunistic means short-game. as in getting drunk now vs.
>>> not being hung over tomorrow vs. not fucking up your life ten years later.",
>>> "i tend to think about my dreams before i sleep.", "@michaelavenatti
>>> @senatorcollins so if your client was in her 20s attending parties with
>>> teenagers doesnt that make her at the least immature as hell or at the
>>> worst a pedophile and a person contributing to the delinquency of minors?",
>>> "i wish i could take credit for this", "i woulda never imagined.
>>> #lakeshow ",
>>> "@philipbloom @blackmagic_news its ok phil! i feel your pain! ",
>>> "sunday ill have a booth in katy at the real craft wives of katy fest
>>> @nolabelbrewco cmon yall!everything is better when you top it with
>>> tias!order today we ship to all 50 ",
>>> "dolly is so baddd"), lat = c(43.6835853, 40.284123, 37.7706565,
>>> 40.431389, 31.1688935, 33.9376735, 34.0207895, 44.900818, 29.7926,
>>> 32.364145), lng = c(-70.3284118, -83.078589, -122.4359785, -79.9806895,
>>> -100.0768885, -118.130426, -118.4119065, -89.5694915, -95.8224,
>>> -86.2447285), county_name = c("Cumberland County", "Delaware County",
>>> "San Francisco County", "Allegheny County", "Concho County",
>>> "Los Angeles County", "Los Angeles County", "Marathon County",
>>> "Harris County", "Montgomery County"), fips = c(23005L, 39041L,
>>> 6075L, 42003L, 48095L, 6037L, 6037L, 55073L, 48201L, 1101L),
>>> state_name = c("Maine", "Ohio", "California", "Pennsylvania",
>>> "Texas", "California", "California", "Wisconsin", "Texas",
>>> "Alabama"), state_abb = c("ME", "OH", "CA", "PA", "TX", "CA",
>>> "CA", "WI", "TX", "AL"), urban_level = c("Medium Metro",
>>> "Large Fringe Metro", "Large Central Metro", "Large Central Metro",
>>> "NonCore (Nonmetro)", "Large Central Metro", "Large Central Metro",
>>> "Small Metro", "Large Central Metro", "Medium Metro"), urban_code = c(3L,
>>> 2L, 1L, 1L, 6L, 1L, 1L, 4L, 1L, 3L), population = c(277308L,
>>> 184029L, 830781L, 1160433L, 4160L, 9509611L, 9509611L, 127612L,
>>> 4233913L, 211037L), linenumber = 1:10), row.names = c(NA,
>>> 10L), class = "data.frame")
>>>
>>> ## Clean tweets - basically just remove everything we don?t need from
>>> the text including punctuation and urls
>>> th %>%
>>> mutate(linenumber = row_number(),
>>> text = str_remove_all(text, "[^\x01-\x7F]"),
>>> text = str_remove_all(text, "\n"),
>>> text = str_remove_all(text, ","),
>>> text = str_remove_all(text, "'"),
>>> text = str_remove_all(text, "&"),
>>> text = str_remove_all(text, "<"),
>>> text = str_remove_all(text, ">"),
>>> text = str_remove_all(text, "http[s]?://[[:alnum:].\\/]+"),
>>> text = tolower(text)) -> th
>>>
>>> ## Create search function that looks for each search term in the
>>> provided string, evaluates if all three search terms have been found, and
>>> returns a logical
>>> srchr <- function(df) {
>>> str_detect(df, "olympic") -> a
>>> str_detect(df, "technique") -> b
>>> str_detect(df, "lifts") -> c
>>> ifelse(a == TRUE & b == TRUE & c == TRUE, TRUE, FALSE)
>>> }
>>>
>>> ## Evaluate tweets for presence of search term
>>> th %>%
>>> mutate(flag = map_chr(text, srchr)) -> th_flagged
>>>
>>> As far as I can tell, this works. I have to manually enter each set of
>>> search terms into the function, which is not ideal. Also, this only
>>> generates a True/False for each tweet based on one search term - I end up
>>> with an evaluatory column for each search term that I would then have to
>>> collapse together somehow. I?m sure there?s a more elegant solution.
>>>
>>> --
>>>
>>> Nate Parsons
>>> Pronouns: He, Him, His
>>> Graduate Teaching Assistant
>>> Department of Sociology
>>> Portland State University
>>> Portland, Oregon
>>>
>>> 503-725-9025
>>> 503-725-3957 FAX
>>> On Oct 16, 2018, 7:20 PM -0700, Bert Gunter <bgunter.4567 at gmail.com>,
>>> wrote:
>>>
>>> OK, as no one else has offered a solution, I'll take a whack at it.
>>>
>>> Caveats: This is a brute force attempt using R's basic regular
>>> expression engine. It is inelegant and barely tested, so likely to be at
>>> best incomplete and buggy, and at worst, incorrect. But maybe Nathan or
>>> someone else on the list can fix it up. So if (when) it breaks, complain on
>>> the list to give someone (almost certainly not me) the opportunity.
>>>
>>> The basic idea is that the tweets are just character strings and the
>>> search phrases are just character vectors all of whose elements must match
>>> "appropriately" -- i.e. they must match whole words -- in the character
>>> strings. So my desired output from the code is a list indexed by the search
>>> phrases, each of whose components if a logical vector of length the number
>>> of tweets each of whose elements = TRUE iff all the words in the search
>>> phrase match somewhere in the tweet.
>>>
>>> Here's the code(using the data Nathan provided):
>>>
>>> > words <- sapply(st[[1]],strsplit,split = " +" )
>>> ## convert the phrases to a list of character vectors of the words
>>> ## Result:
>>> > words
>>> $`me abused depressed`
>>> [1] "me"        "abused"    "depressed"
>>>
>>> $`me hurt depressed`
>>> [1] "me"        "hurt"      "depressed"
>>>
>>> $`feel hopeless depressed`
>>> [1] "feel"      "hopeless"  "depressed"
>>>
>>> $`feel alone depressed`
>>> [1] "feel"      "alone"     "depressed"
>>>
>>> $`i feel helpless`
>>> [1] "i"        "feel"     "helpless"
>>>
>>> $`i feel worthless`
>>> [1] "i"         "feel"      "worthless"
>>>
>>> > expand.words <-  function(z)lapply(z,function(x)paste0(c("^ *"," ","
>>> "),x, c(" "," "," *$")))
>>> ## function to create regexes for words when they are at the beginning,
>>> middle, or end of tweets
>>>
>>> > wordregex <- lapply(words,expand.words)
>>> ##Result
>>> ## too lengthy to include
>>> ##
>>> > tweets <- th$text
>>> ##extract the tweets
>>> > findin <- function(x,y)
>>>    ## x is a vector of regex patterns
>>>    ## y is a character vector
>>>    ## value = vector,vec, with length(vec) == length(y) and vec[i] ==
>>> TRUE iff any of x matches y[i]
>>> { apply(sapply(x,function(z)grepl(z,y)), 1,any)
>>> }
>>>
>>> ## add a matching "tweet" to the tweet vector:
>>> > tweets <- c(tweets," i xxxx worthless yxxc ght feel")
>>>
>>> > ans <-
>>> lapply(wordregex,function(z)apply(sapply(z,function(x)findin(x,tweets)), 1,
>>> all))
>>> ## Result:
>>> > ans
>>> $`me abused depressed`
>>> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>>>
>>> $`me hurt depressed`
>>> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>>>
>>> $`feel hopeless depressed`
>>> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>>>
>>> $`feel alone depressed`
>>> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>>>
>>> $`i feel helpless`
>>> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>>>
>>> $`i feel worthless`
>>> [1] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE
>>>
>>> ## None of the tweets match any of the phrases except for the last tweet
>>> that I added.
>>>
>>> ## Note: you need to add capabilities to handle upper and lower case.
>>> See, e.g. ?casefold
>>>
>>> Cheers,
>>> Bert
>>>
>>> Bert Gunter
>>>
>>> "The trouble with having an open mind is that people keep coming along
>>> and sticking things into it."
>>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>>
>>>
>>> On Tue, Oct 16, 2018 at 3:03 PM Bert Gunter <bgunter.4567 at gmail.com>
>>> wrote:
>>>
>>>> The problem wasn't the data tibbles. You posted in html -- which you
>>>> were explictly warned against -- and that corrupted your text (e.g. some
>>>> quotes became "smart quotes", which cannot be properly cut and pasted into
>>>> R).
>>>>
>>>> Bert
>>>>
>>>>
>>>> On Tue, Oct 16, 2018 at 2:47 PM Nathan Parsons <
>>>> nathan.f.parsons at gmail.com> wrote:
>>>>
>>>>> Argh! Here are those two example datasets as data frames (not tibbles).
>>>>> Sorry again. This apparently is just not my day.
>>>>>
>>>>>
>>>>> th <- structure(list(status_id = c("x1047841705729306624",
>>>>> "x1046966595610927105",
>>>>>
>>>>> "x1047094786610552832", "x1046988542818308097", "x1046934493553221632",
>>>>>
>>>>> "x1047227442899775488"), created_at = c("2018-10-04T13:31:45Z",
>>>>>
>>>>> "2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",
>>>>>
>>>>> "2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z"), text = c("Technique is
>>>>> everything with olympic lifts ! @ Body By John https://t.co/UsfR6DafZt
>>>>> ",
>>>>>
>>>>> "@Subtronics just went back and rewatched ur FBlice with ur CDJs and
>>>>> let me
>>>>> tell you man. You are the fucking messiah",
>>>>>
>>>>> "@ic4rus1 Opportunistic means short-game. As in getting drunk now vs.
>>>>> not
>>>>> being hung over tomorrow vs. not fucking up your life ten years
>>>>> later.",
>>>>>
>>>>> "I tend to think about my dreams before I sleep.", "@MichaelAvenatti
>>>>> @SenatorCollins So,  if your client was in her 20s, attending parties
>>>>> with
>>>>> teenagers, doesn't that make her at the least immature as hell, or at
>>>>> the
>>>>> worst, a pedophile and a person contributing to the delinquency of
>>>>> minors?",
>>>>>
>>>>>
>>>>> "i wish i could take credit for this"), lat = c(43.6835853, 40.284123,
>>>>>
>>>>> 37.7706565, 40.431389, 31.1688935, 33.9376735), lng = c(-70.3284118,
>>>>>
>>>>> -83.078589, -122.4359785, -79.9806895, -100.0768885, -118.130426
>>>>>
>>>>> ), county_name = c("Cumberland County", "Delaware County", "San
>>>>> Francisco
>>>>> County",
>>>>>
>>>>> "Allegheny County", "Concho County", "Los Angeles County"), fips =
>>>>> c(23005L,
>>>>>
>>>>>
>>>>> 39041L, 6075L, 42003L, 48095L, 6037L), state_name = c("Maine",
>>>>>
>>>>> "Ohio", "California", "Pennsylvania", "Texas", "California"),
>>>>>
>>>>>     state_abb = c("ME", "OH", "CA", "PA", "TX", "CA"), urban_level =
>>>>> c("Medium Metro",
>>>>>
>>>>>     "Large Fringe Metro", "Large Central Metro", "Large Central Metro",
>>>>>
>>>>>     "NonCore (Nonmetro)", "Large Central Metro"), urban_code = c(3L,
>>>>>
>>>>>     2L, 1L, 1L, 6L, 1L), population = c(277308L, 184029L, 830781L,
>>>>>
>>>>>     1160433L, 4160L, 9509611L)), class = "data.frame", row.names =
>>>>> c(NA,
>>>>>
>>>>> -6L))
>>>>>
>>>>>
>>>>> st <- structure(list(terms = c("me abused depressed", "me hurt
>>>>> depressed",
>>>>>
>>>>> "feel hopeless depressed", "feel alone depressed", "i feel helpless",
>>>>>
>>>>> "i feel worthless")), row.names = c(NA, -6L), class = c("tbl_df",
>>>>>
>>>>> "tbl", "data.frame"))
>>>>>
>>>>> On Tue, Oct 16, 2018 at 2:39 PM Nathan Parsons <
>>>>> nathan.f.parsons at gmail.com>
>>>>> wrote:
>>>>>
>>>>> > Thanks all for your patience. Here?s a second go that is perhaps more
>>>>> > explicative of what it is I am trying to accomplish (and hopefully
>>>>> in plain
>>>>> > text form)...
>>>>> >
>>>>> >
>>>>> > I?m using the following packages: tidyverse, purrr, tidytext
>>>>> >
>>>>> >
>>>>> > I have a number of tweets in the following form:
>>>>> >
>>>>> >
>>>>> > th <- structure(list(status_id = c("x1047841705729306624",
>>>>> > "x1046966595610927105",
>>>>> >
>>>>> > "x1047094786610552832", "x1046988542818308097",
>>>>> "x1046934493553221632",
>>>>> >
>>>>> > "x1047227442899775488"), created_at = c("2018-10-04T13:31:45Z",
>>>>> >
>>>>> > "2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z",
>>>>> "2018-10-02T05:01:35Z",
>>>>> >
>>>>> > "2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z"), text = c("Technique
>>>>> is
>>>>> > everything with olympic lifts ! @ Body By John
>>>>> https://t.co/UsfR6DafZt",
>>>>> >
>>>>> > "@Subtronics just went back and rewatched ur FBlice with ur CDJs and
>>>>> let
>>>>> > me tell you man. You are the fucking messiah",
>>>>> >
>>>>> > "@ic4rus1 Opportunistic means short-game. As in getting drunk now
>>>>> vs. not
>>>>> > being hung over tomorrow vs. not fucking up your life ten years
>>>>> later.",
>>>>> >
>>>>> > "I tend to think about my dreams before I sleep.", "@MichaelAvenatti
>>>>> > @SenatorCollins So, if your client was in her 20s, attending parties
>>>>> with
>>>>> > teenagers, doesn't that make her at the least immature as hell, or
>>>>> at the
>>>>> > worst, a pedophile and a person contributing to the delinquency of
>>>>> minors?",
>>>>> >
>>>>> > "i wish i could take credit for this"), lat = c(43.6835853,
>>>>> 40.284123,
>>>>> >
>>>>> > 37.7706565, 40.431389, 31.1688935, 33.9376735), lng = c(-70.3284118,
>>>>> >
>>>>> > -83.078589, -122.4359785, -79.9806895, -100.0768885, -118.130426
>>>>> >
>>>>> > ), county_name = c("Cumberland County", "Delaware County", "San
>>>>> Francisco
>>>>> > County",
>>>>> >
>>>>> > "Allegheny County", "Concho County", "Los Angeles County"), fips =
>>>>> > c(23005L,
>>>>> >
>>>>> > 39041L, 6075L, 42003L, 48095L, 6037L), state_name = c("Maine",
>>>>> >
>>>>> > "Ohio", "California", "Pennsylvania", "Texas", "California"),
>>>>> >
>>>>> > state_abb = c("ME", "OH", "CA", "PA", "TX", "CA"), urban_level =
>>>>> c("Medium
>>>>> > Metro",
>>>>> >
>>>>> > "Large Fringe Metro", "Large Central Metro", "Large Central Metro",
>>>>> >
>>>>> > "NonCore (Nonmetro)", "Large Central Metro"), urban_code = c(3L,
>>>>> >
>>>>> > 2L, 1L, 1L, 6L, 1L), population = c(277308L, 184029L, 830781L,
>>>>> >
>>>>> > 1160433L, 4160L, 9509611L)), class = c("data.table", "data.frame"
>>>>> >
>>>>> > ), row.names = c(NA, -6L), .internal.selfref = )
>>>>> >
>>>>> >
>>>>> > I also have a number of search terms in the following form:
>>>>> >
>>>>> >
>>>>> > st <- structure(list(terms = c("me abused depressed", "me hurt
>>>>> depressed",
>>>>> >
>>>>> > "feel hopeless depressed", "feel alone depressed", "i feel helpless",
>>>>> >
>>>>> > "i feel worthless")), row.names = c(NA, -6L), class = c("tbl_df",
>>>>> >
>>>>> > "tbl", "data.frame?))
>>>>> >
>>>>> >
>>>>> > I am trying to isolate the tweets that contain all of the words in
>>>>> each of
>>>>> > the search terms, i.e ?me? ?abused? and ?depressed? from the first
>>>>> example
>>>>> > search term, but they do not have to be in order or even next to one
>>>>> > another.
>>>>> >
>>>>> >
>>>>> > I am familiar with the dplyr suite of tools and have been attempting
>>>>> to
>>>>> > generate some sort of ?filter()? to do this. I am not very familiar
>>>>> with
>>>>> > purrr, but there may be a solution using the map function? I have
>>>>> also
>>>>> > explored the tidytext ?unnest_tokens? function which transforms the
>>>>> ?th?
>>>>> > data in the following way:
>>>>> >
>>>>> >
>>>>> > > tidytext::unnest_tokens(th, word, text, token = "tweets") -> tt
>>>>> >
>>>>> > > head(tt)
>>>>> >
>>>>> > status_id created_at lat lng
>>>>> >
>>>>> > 1: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>>>> >
>>>>> > 2: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>>>> >
>>>>> > 3: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>>>> >
>>>>> > 4: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>>>> >
>>>>> > 5: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>>>> >
>>>>> > 6: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>>>>> >
>>>>> > county_name fips state_name state_abb urban_level urban_code
>>>>> >
>>>>> > 1: Cumberland County 23005 Maine ME Medium Metro 3
>>>>> >
>>>>> > 2: Cumberland County 23005 Maine ME Medium Metro 3
>>>>> >
>>>>> > 3: Cumberland County 23005 Maine ME Medium Metro 3
>>>>> >
>>>>> > 4: Cumberland County 23005 Maine ME Medium Metro 3
>>>>> >
>>>>> > 5: Cumberland County 23005 Maine ME Medium Metro 3
>>>>> >
>>>>> > 6: Cumberland County 23005 Maine ME Medium Metro 3
>>>>> >
>>>>> > population word
>>>>> >
>>>>> > 1: 277308 technique
>>>>> >
>>>>> > 2: 277308 is
>>>>> >
>>>>> > 3: 277308 everything
>>>>> >
>>>>> > 4: 277308 with
>>>>> >
>>>>> > 5: 277308 olympic
>>>>> >
>>>>> > 6: 277308 lifts
>>>>> >
>>>>> >
>>>>> > but once I have unnested the tokens, I am unable to recombine them
>>>>> back
>>>>> > into tweets.
>>>>> >
>>>>> >
>>>>> > Ideally the end result would append a new column to the ?th? data
>>>>> that
>>>>> > would flag a tweet that contained all of the search words for any of
>>>>> the
>>>>> > search terms; so the work flow would look like
>>>>> >
>>>>> > 1) look for all search words for one search term in a tweet
>>>>> >
>>>>> > 2) if all of the search words in the search term are found, create a
>>>>> flag
>>>>> > (mutate(flag = 1) or some such)
>>>>> >
>>>>> > 3) do this for all of the tweets
>>>>> >
>>>>> > 4) move on the next search term and repeat
>>>>> >
>>>>> >
>>>>> > Again, my thanks for your patience.
>>>>> >
>>>>> >
>>>>> > --
>>>>> >
>>>>> >
>>>>> > Nate Parsons
>>>>> >
>>>>> > Pronouns: He, Him, His
>>>>> >
>>>>> > Graduate Teaching Assistant
>>>>> >
>>>>> > Department of Sociology
>>>>> >
>>>>> > Portland State University
>>>>> >
>>>>> > Portland, Oregon
>>>>> >
>>>>> >
>>>>> > 503-725-9025
>>>>> >
>>>>> > 503-725-3957 FAX
>>>>> >
>>>>>
>>>>>         [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide
>>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>
>>>>

	[[alternative HTML version deleted]]



From n@re@h_gurbux@n| @end|ng |rom hotm@||@com  Fri Oct 19 06:11:54 2018
From: n@re@h_gurbux@n| @end|ng |rom hotm@||@com (Naresh Gurbuxani)
Date: Fri, 19 Oct 2018 04:11:54 +0000
Subject: [R] Project in emacs + ess
Message-ID: <CY1PR18MB05499B79AB37D7B65C34ED89FAF90@CY1PR18MB0549.namprd18.prod.outlook.com>

I have switched from RStudio to emacs.  In emacs, how can I create a project like in RStudio?


Within the project directory, I would like to create different directories for code, data, results, figures, documents, etc.  In RStudio project, relative references work well.  For example, an Sweave document in document directory can use command source('code/mycode.R').  In emacs, this does not work "out of the box".  In document folder, the command needs to be source('../code/mycode.R').  This is minor effort, but a better method must exist.


Thanks,

Naresh

	[[alternative HTML version deleted]]



From bgunter@4567 @end|ng |rom gm@||@com  Fri Oct 19 06:45:33 2018
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 18 Oct 2018 21:45:33 -0700
Subject: [R] Project in emacs + ess
In-Reply-To: <CY1PR18MB05499B79AB37D7B65C34ED89FAF90@CY1PR18MB0549.namprd18.prod.outlook.com>
References: <CY1PR18MB05499B79AB37D7B65C34ED89FAF90@CY1PR18MB0549.namprd18.prod.outlook.com>
Message-ID: <CAGxFJbQP3Y48ZgPtmpVvXa85a=UxSKhDZ1EbrOHjyDm+AWd7Sw@mail.gmail.com>

Wrong list. This list is about R programming. You should address this to an
emacs support list. Better yet, to an ess list . Here's one place you might
start:

https://www.r-bloggers.com/using-r-with-emacs-and-ess/

Other resources can be found by a web search on "R ess"  .

Cheers,
Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Thu, Oct 18, 2018 at 9:12 PM Naresh Gurbuxani <
naresh_gurbuxani at hotmail.com> wrote:

> I have switched from RStudio to emacs.  In emacs, how can I create a
> project like in RStudio?
>
>
> Within the project directory, I would like to create different directories
> for code, data, results, figures, documents, etc.  In RStudio project,
> relative references work well.  For example, an Sweave document in document
> directory can use command source('code/mycode.R').  In emacs, this does not
> work "out of the box".  In document folder, the command needs to be
> source('../code/mycode.R').  This is minor effort, but a better method must
> exist.
>
>
> Thanks,
>
> Naresh
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From o||v|er_g|v@ud@n @end|ng |rom hotm@||@com  Fri Oct 19 07:26:13 2018
From: o||v|er_g|v@ud@n @end|ng |rom hotm@||@com (Olivier GIVAUDAN)
Date: Fri, 19 Oct 2018 05:26:13 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <1B674C66F0DD4343BA5DD0C025217F9F028BFDE5@CSSPWD2PRAP1147.SSA-Intra.net>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
 <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>
 <DB3PR0202MB3355AC9A5807D00F591E3B55F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <ac573e54-dde3-397e-601f-2130b5c27676@gmail.com>
 <DB3PR0202MB33559193F379157F44AD4AB0F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>,
 <42363BAD-7D85-4A57-B35A-0CCBA2EC1FD2@mac.com>
 <VI1PR0202MB3357AC579BC0B0D7C4C66BC2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <1B674C66F0DD4343BA5DD0C025217F9F028BFDE5@CSSPWD2PRAP1147.SSA-Intra.net>
Message-ID: <VI1PR0202MB33574BF249C24C25DC8D2C0AF5F90@VI1PR0202MB3357.eurprd02.prod.outlook.com>

Hi Katharina,

Apologies for the late reply.

Thank you for your proposal which was not made yet.

That's actually a Shiny app which I am working on. The problem is that the data are confidential: except when I share the R codes and data (via a marvelous secured SharePoint system...), the data should stay local.

When looking at [1], it seems inevitable that the data are published to a third-party server, which I want to avoid.

But I will look into it more closely, esp. whether it is possible to segregate the sharing of R codes / Shiny app (to the server, no problem) and data (only local).

Best regards,

Olivier

?[1] https://shiny.rstudio.com/articles/deployment-local.html
________________________________
De : Fritsch, Katharina (NNL) <Katharina.Fritsch at nnl.co.uk>
Envoy? : jeudi 11 octobre 2018 08:22
? : Olivier GIVAUDAN; Peter Claussen
Cc : r-help at r-project.org
Objet : RE: [R] Genuine relative paths with R

Hiya,
I have lost track of half the discussion so forgive me if that suggestion has been made before, but would it be suitable to wrap your code in a shiny app and disseminate it this way?
Kind regards,
Katharina.

--

Dr Katharina Fritsch B.Sc. M.Sc. MRSC
Chemical Modeller, Chemical and Process Modelling


E.
katharina.fritsch at nnl.co.uk
T.
+44 (0)1925 289387
@uknnl

National Nuclear Laboratory Limited, 5th Floor, Chadwick House,
Birchwood Park, Warrington, WA3 6AE, UK

www.nnl.co.uk<http://www.nnl.co.uk>

-----Original Message-----
From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Olivier GIVAUDAN
Sent: 11 October 2018 00:54
To: Peter Claussen
Cc: r-help at r-project.org
Subject: Re: [R] Genuine relative paths with R

Yes, I am aware that both '__FILE__' and 'SAS_EXECFILENAME' are macro variables. I don't know how the VBA 'Application.ThisWorkbook.Path' VBA or PHP '__DIR__' (or '__FILE__') work.

And yes, indeed, until now I didn't even realise that this simple find-and-replace solution of "mine" is actually the basic job of a preprocessor when it expands macro variables, thank you!

A macro language in R, yes, I think it would be useful, at least for this function. If nothing simpler is available, of course...
________________________________
De : Peter Claussen <dakotajudo at mac.com> Envoy  : mercredi 10 octobre 2018 23:29   : Olivier GIVAUDAN Cc : Duncan Murdoch; Jeff Newmiller; r-help at r-project.org Objet : Re: [R] Genuine relative paths with R

If I m following all this correctly, it seems your criticism is that R doesn t provide a run-time function that is equivalent to a compile-time macro. You do realize that __FILE__ is not part of the C programming language - it s a predefined variable recognized by the cpp - the C preprocessor program. Similarly, SAS_EXECFILENAME is a predefined variable that can be recognized by the SAS macro processor, but has no meaning in the SAS language itself.

So, to go back to your original post:
1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.

This is what a macro processor does. Are you asking for a macro language in R?

Cheers

On Oct 10, 2018, at 6:11 PM, Olivier GIVAUDAN <olivier_givaudan at hotmail.com<mailto:olivier_givaudan at hotmail.com>> wrote:

It is not wrong to claim that R currently doesn't have a function returning the path of the R file where this same function was invoked.

'getwd()' is indeed not equivalent to VBA 'Application.ThisWorkbook.Path' or C macro '__FILE__' or SAS %sysget(SAS_EXECFILENAME), etc.


        [[alternative HTML version deleted]]


This e-mail is from National Nuclear Laboratory Limited ("NNL"). This e-mail and any attachments are intended for the addressee and may also be legally privileged. If you are not the intended recipient please do not print, re-transmit, store or act in reliance on it or any attachments. Instead, please e-mail it back to the sender and then immediately permanently delete it.

National Nuclear Laboratory Limited (Company number 3857752) Registered in England and Wales. Registered office: Chadwick House, Warrington Road, Birchwood Park, Warrington, WA3 6AE.

	[[alternative HTML version deleted]]


From o||v|er_g|v@ud@n @end|ng |rom hotm@||@com  Fri Oct 19 07:27:16 2018
From: o||v|er_g|v@ud@n @end|ng |rom hotm@||@com (Olivier GIVAUDAN)
Date: Fri, 19 Oct 2018 05:27:16 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <cbc49c08-3a5d-7510-98e3-8e53a680f47a@gmail.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
 <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>
 <DB3PR0202MB3355AC9A5807D00F591E3B55F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <ac573e54-dde3-397e-601f-2130b5c27676@gmail.com>
 <DB3PR0202MB33559193F379157F44AD4AB0F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <f96e0c64-0e77-47f8-dbc1-5b49313ebb39@gmail.com>
 <VI1PR0202MB3357AF40A744B10736F640A3F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <cbc49c08-3a5d-7510-98e3-8e53a680f47a@gmail.com>
Message-ID: <VI1PR0202MB3357D8143CE4980A5FEDA33FF5F90@VI1PR0202MB3357.eurprd02.prod.outlook.com>

OK, but the usual question remains: how to set the working directory automatically / dynamically?
________________________________
De : Duncan Murdoch <murdoch.duncan at gmail.com>
Envoy? : jeudi 11 octobre 2018 09:27
? : Olivier GIVAUDAN; Jeff Newmiller
Cc : r-help at r-project.org
Objet : Re: [R] Genuine relative paths with R

On 10/10/2018 8:08 PM, Olivier GIVAUDAN wrote:
> I think Gabor (at least) already suggested this solution. But the
> problem is: how do you source this file containing this 'foo' function
> without writing its absolute path?

You only need its relative path to source it.

Duncan Murdoch
>
> It's a kind of initialisation issue.
>
>  > a function returning the path of the R file where this same function
> was invoked.
>  >> I didn't realize that's what you were asking for. This has nothing
> to do with your subject line.
>
> It's just a trick to work with relative paths without having to write
> any hardcoded (by definition) absolute path beforehand.
> ------------------------------------------------------------------------
> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Envoy? :* mercredi 10 octobre 2018 23:51
> *? :* Olivier GIVAUDAN; Jeff Newmiller
> *Cc :* r-help at r-project.org
> *Objet :* Re: [R] Genuine relative paths with R
> On 10/10/2018 7:11 PM, Olivier GIVAUDAN wrote:
>> It is not wrong to claim that R currently doesn't have a function
>> returning the path of the R file where this same function was invoked.
>
> But it does.  I didn't realize that's what you were asking for.  This
> has nothing to do with your subject line.
>
> If you source a file from somewhere, then each of the functions it
> creates is marked with its source location.  So you can put this in a file:
>
> foo <- function () 1
>
> filename <- normalizePath(getSrcFilename(foo, full.names=TRUE))
>
> (You need the normalizePath() call because all that will be saved is the
> path that was used.  If it was a relative path, that's what you get
> before you normalize it.  You don't really need the foo function; you
> could put an anonymous function into the getSrcFilename call.  It's just
> usually easier to include a function that already exists.)
>
> When you source() that file, filename will get the name of the file it
> came from.
>
> This is a lot like __FILE__ in C.  One difference is that it is usually
> turned off when the function is being loaded into a package, but you can
> optionally turn it on.
>
> You can also find out what line foo starts on, using
>
> fooline <- getSrcLocation(foo)
>
> This is a lot like __LINE__ in C.
>
> Duncan Murdoch
>
>
>>
>> 'getwd()' is indeed not equivalent to VBA
>> 'Application.ThisWorkbook.Path' or C macro '__FILE__' or SAS
>> %sysget(SAS_EXECFILENAME), etc.
>> ------------------------------------------------------------------------
>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>> *Envoy? :* mercredi 10 octobre 2018 22:59
>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>> *Cc :* r-help at r-project.org
>> *Objet :* Re: [R] Genuine relative paths with R
>> On 10/10/2018 6:52 PM, Olivier GIVAUDAN wrote:
>>>>  Again, you seem to think making a package is a big deal.
>>>
>>> Perhaps not a big deal (I believe you, I didn't write an R package yet),
>>> but not as straightforward as having a function within an R file
>>> returning its own path.
>>>
>>>> But you're free to decide not to do it:  just please don't repeat
>>> falseclaims about R (like the ones about paths that started this long
>>> thread).
>>>
>>> Which false claims?
>>
>> "But I am really wondering why R doesn't have (please tell me if I'm
>> wrong) this basic feature as many other languages have it (batch, shell,
>> C, LaTeX, SAS with macro-variables, etc.)?"
>>
>> Duncan Murdoch
>>
>>> ------------------------------------------------------------------------
>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>> *Envoy? :* mercredi 10 octobre 2018 22:31
>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>> *Cc :* r-help at r-project.org
>>> *Objet :* Re: [R] Genuine relative paths with R
>>> On 10/10/2018 6:17 PM, Olivier GIVAUDAN wrote:
>>>>> Nothing says a package has to go on CRAN.  You can distribute
>>>> themprivately to a small audience.
>>>>
>>>> Yes, I agree in theory. But this solution still violates my own
>>>> proportionality principle.
>>>
>>> Again, you seem to think making a package is a big deal.  Maybe that was
>>> true 10 years ago (though I wrote and tested a package in a 45 minute
>>> presentation at UseR 2008), but now it's very easy.
>>>
>>> But you're free to decide not to do it:  just please don't repeat false
>>> claims about R (like the ones about paths that started this long thread).
>>>
>>>>
>>>>> If you know as much about R as the people who wrote it
>>>>
>>>> I didn't claim that (that's was a quite general / theoretical statement,
>>>> not necessarily and only applicable to R).
>>>
>>> I didn't say you made that claim.  I was answering your question about
>>> why inventing your own way is not a good idea.  It might be a good idea,
>>> if you know the system very, very well.  Otherwise, it's probably better
>>> to work the standard way.
>>>
>>> Duncan Murdoch
>>>
>>>>
>>>>> For example, you might thinkthat all front ends set the working
>>>> directory to the directory of theprogram they are running, because the
>>>> ones you've tried do it that way. But they don't.
>>>>


 2
>>>> GUIs. So the workaround I finally found satisfies my current needs
>>>> ------------------------------------------------------------------------
>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>> *Envoy? :* mercredi 10 octobre 2018 22:07
>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>> *Cc :* r-help at r-project.org
>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>> On 10/10/2018 5:45 PM, Olivier GIVAUDAN wrote:
>>>>> I'm not sure I'm "inventing my own way" of distributing R code... And I
>>>>> distribute it to a very limited audience.
>>>>
>>>> Nothing says a package has to go on CRAN.  You can distribute them
>>>> privately to a small audience.
>>>>
>>>>> Anyway, why not "inventing a new way" if it's more efficient than the
>>>>> standard one (I'm talking now in theory)?
>>>>
>>>> If you know as much about R as the people who wrote it, then you can
>>>> almost certainly invent better ways to do many of the things it does.  R
>>>> Core was constrained by trying to maintain back compatibility, and that
>>>> means some of their solutions aren't perfect.
>>>>
>>>> But if you don't know it that well, chances are you'll make mistakes
>>>> when you invent your own way of doing it.  For example, you might think
>>>> that all front ends set the working directory to the directory of the
>>>> program they are running, because the ones you've tried do it that way.
>>>> But they don't.
>>>>
>>>> Duncan Murdoch
>>>>
>>>>> ------------------------------------------------------------------------
>>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>>> *Envoy? :* mercredi 10 octobre 2018 21:39
>>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>>> *Cc :* r-help at r-project.org
>>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>>> On 10/10/2018 5:31 PM, Olivier GIVAUDAN wrote:
>>>>>> I do not want to use the terminal, just double clicks (i.e. the
>>>>>> simplest, automatic, non-manual way, without having to write a line /
>>>>>> command).
>>>>>> Therefore everything should happen outside any terminal. The user won't
>>>>>> use a terminal.
>>>>>>
>>>>>> I don't have a Mac and I'm not familiar with this OS, sorry.
>>>>>> But I'm really surprised the click method gives different results than

>>>>>> I know the click method worked both on Linux (Ubuntu latest version) and

>>>>>>
>>>>>> Yes, I executed my file from a terminal and got obviously the same
>>>>>> result as you (that's reassuring).
>>>>>>
>>>>>> Come on guys, creating a package... It's like using a hammer to kill a
>>>>>> fly...
>>>>>
>>>>> It's a simple operation to create a package in RStudio.  Not quite a
>>>>> single click, but just a few.
>>>>>
>>>>> In plain R, it's just a little more work using package.skeleton().
>>>>>
>>>>> Really, if you are distributing R code, you should do it in the standard
>>>>> way, not invent your own.
>>>>>
>>>>> Duncan Murdoch
>>>>>
>>>>>> ------------------------------------------------------------------------
>>>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>>>> *Envoy? :* mercredi 10 octobre 2018 20:54
>>>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>>>> *Cc :* r-help at r-project.org
>>>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>>>> On 10/10/2018 4:42 PM, Olivier GIVAUDAN wrote:
>>>>>>> Why are you not simply double-clicking on 'TestPWD' and choosing to
>>>>>>> execute the file (don't add anything)?
>>>>>>> Are you executing the file from a terminal?
>>>>>>
>>>>>> Yes, I was executing the file from my terminal.  Otherwise I really have
>>>>>> no idea what the "current directory" is in the Finder.   (I'm on a Mac.
>>>>>> I just tried the click method; it printed my home directory, not the
>>>>>> directory of the script.)
>>>>>>
>>>>>> I don't know the name of your visual front end, but you are displaying
>>>>>> the working directory that it sets when you click on TestPWD.  That will
>>>>>> be different from the working directory that your user sees in the Terminal.
>>>>>>
>>>>>> You can see what I saw if you run TestPWD from the Terminal.  It will
>>>>>> print the current working directory, not the one where TestPWD happens
>>>>>> to live.
>>>>>>
>>>>>> If you want to do the same sort of thing in R, you could set up a script
>>>>>> that calls R, and execute that in the way you executed TestPWD.  But in
>>>>>> another message you said you aren't allowed to do that, so I think your
>>>>>> best solution is the one offered by Bill Dunlap:  organize your files as
>>>>>> an R package.  If you name your package "Olivier", then you can find all
>>>>>> the files in it under the directory returned by
>>>>>>
>>>>>>     system.file(".", package = "Olivier")
>>>>>>
>>>>>> The package system is designed for R code, but you can put arbitrary
>>>>>> files into a package:  just store them under the "inst" directory in
>>>>>> your source.  When the package is installed, those files will be moved
>>>>>> up one level, i.e.
>>>>>>
>>>>>> Olivier/inst/foo
>>>>>>
>>>>>> will become
>>>>>>
>>>>>>     system.file("foo", package = "Olivier")
>>>>>>
>>>>>> Duncan Murdoch
>>>>>
>>>>
>>>
>>
>


	[[alternative HTML version deleted]]



From o||v|er_g|v@ud@n @end|ng |rom hotm@||@com  Fri Oct 19 07:46:43 2018
From: o||v|er_g|v@ud@n @end|ng |rom hotm@||@com (Olivier GIVAUDAN)
Date: Fri, 19 Oct 2018 05:46:43 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <12da61c6-8c19-7af2-c57b-6cc5fc929481@yorku.ca>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
 <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>
 <DB3PR0202MB3355AC9A5807D00F591E3B55F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <ac573e54-dde3-397e-601f-2130b5c27676@gmail.com>
 <DB3PR0202MB33559193F379157F44AD4AB0F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <f96e0c64-0e77-47f8-dbc1-5b49313ebb39@gmail.com>
 <VI1PR0202MB3357AF40A744B10736F640A3F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <12da61c6-8c19-7af2-c57b-6cc5fc929481@yorku.ca>
Message-ID: <VI1PR0202MB335785D06EAD0DD198B118E6F5F90@VI1PR0202MB3357.eurprd02.prod.outlook.com>

Hi Michael,

Apologies for the late reply.

I am very grateful to all the R users who generously spent time on my problem and suggested operational solutions.

It seems you didn't follow carefully this thread (which I can understand of course) as 2 operational solutions were already suggested and successfully implemented from my side.

So, to summarise:


  1.  The most universal (i.e. it works on Windows and Linux, grateful if someone on Mac could check) solution, when working with the graphical shell system of an OS, is to create a Rproject file at the root of the project and open it with RStudio: the working directory will be automatically set to the location where this Rproject file is;
  2.  Only on Windows (at first sight): Create an empty .RData (with a proper basename) at the root of the project and open it (it should be by default associated to / opened by the default R GUI): the working directory will be automatically set to the location where this instrumental / dummy RData file is.

I didn't invest more time to look more thoroughly into the other solution suggested by Peter Claussen on macro language.

Again thanks to all of you and special thanks to Jeff Newmiller for his patience and for having shared this "trick" with .RData file.

Best regards,

Olivier
________________________________
De : Michael Friendly <friendly at yorku.ca>
Envoy? : jeudi 11 octobre 2018 13:08
? : Olivier GIVAUDAN; Duncan Murdoch; Jeff Newmiller
Cc : r-help at r-project.org
Objet : Re: Genuine relative paths with R

Olivier:

Readers of R-Help generally are patient and try to be helpful. Numerous
solutions to your initial query were proposed, but for some reason you
either reject them or take the discussion down some different rabbit
hole of claims about R vs. other software environments, to which kind
people reply and you then rebut. ENOUGH ALREADY.  This thread has been
going on for nearly a week. Choose something that
works for you, have a cup of tea, go for a run, get a life.
Please do not bother to reply.

-Michael

On 10/10/2018 8:08 PM, Olivier GIVAUDAN wrote:
> I think Gabor (at least) already suggested this solution. But the problem is: how do you source this file containing this 'foo' function without writing its absolute path?
>
> It's a kind of initialisation issue.
>
>> a function returning the path of the R file where this same function was invoked.
>>> I didn't realize that's what you were asking for. This has nothing to do with your subject line.
>
> It's just a trick to work with relative paths without having to write any hardcoded (by definition) absolute path beforehand.
> ________________________________
> De : Duncan Murdoch <murdoch.duncan at gmail.com>
> Envoy? : mercredi 10 octobre 2018 23:51
> ? : Olivier GIVAUDAN; Jeff Newmiller
> Cc : r-help at r-project.org
> Objet : Re: [R] Genuine relative paths with R
>
> On 10/10/2018 7:11 PM, Olivier GIVAUDAN wrote:
>> It is not wrong to claim that R currently doesn't have a function
>> returning the path of the R file where this same function was invoked.
>
> But it does.  I didn't realize that's what you were asking for.  This
> has nothing to do with your subject line.
>
> If you source a file from somewhere, then each of the functions it
> creates is marked with its source location.  So you can put this in a file:
>
> foo <- function () 1
>
> filename <- normalizePath(getSrcFilename(foo, full.names=TRUE))
>
> (You need the normalizePath() call because all that will be saved is the
> path that was used.  If it was a relative path, that's what you get
> before you normalize it.  You don't really need the foo function; you
> could put an anonymous function into the getSrcFilename call.  It's just
> usually easier to include a function that already exists.)
>
> When you source() that file, filename will get the name of the file it
> came from.
>
> This is a lot like __FILE__ in C.  One difference is that it is usually
> turned off when the function is being loaded into a package, but you can
> optionally turn it on.
>
> You can also find out what line foo starts on, using
>
> fooline <- getSrcLocation(foo)
>
> This is a lot like __LINE__ in C.
>
> Duncan Murdoch
>
>
>>
>> 'getwd()' is indeed not equivalent to VBA
>> 'Application.ThisWorkbook.Path' or C macro '__FILE__' or SAS
>> %sysget(SAS_EXECFILENAME), etc.
>> ------------------------------------------------------------------------
>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>> *Envoy? :* mercredi 10 octobre 2018 22:59
>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>> *Cc :* r-help at r-project.org
>> *Objet :* Re: [R] Genuine relative paths with R
>> On 10/10/2018 6:52 PM, Olivier GIVAUDAN wrote:
>>>>   Again, you seem to think making a package is a big deal.
>>>
>>> Perhaps not a big deal (I believe you, I didn't write an R package yet),
>>> but not as straightforward as having a function within an R file
>>> returning its own path.
>>>
>>>> But you're free to decide not to do it:  just please don't repeat
>>> falseclaims about R (like the ones about paths that started this long
>>> thread).
>>>
>>> Which false claims?
>>
>> "But I am really wondering why R doesn't have (please tell me if I'm
>> wrong) this basic feature as many other languages have it (batch, shell,
>> C, LaTeX, SAS with macro-variables, etc.)?"
>>
>> Duncan Murdoch
>>
>>> ------------------------------------------------------------------------
>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>> *Envoy? :* mercredi 10 octobre 2018 22:31
>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>> *Cc :* r-help at r-project.org
>>> *Objet :* Re: [R] Genuine relative paths with R
>>> On 10/10/2018 6:17 PM, Olivier GIVAUDAN wrote:
>>>>> Nothing says a package has to go on CRAN.  You can distribute
>>>> themprivately to a small audience.
>>>>
>>>> Yes, I agree in theory. But this solution still violates my own
>>>> proportionality principle.
>>>
>>> Again, you seem to think making a package is a big deal.  Maybe that was
>>> true 10 years ago (though I wrote and tested a package in a 45 minute
>>> presentation at UseR 2008), but now it's very easy.
>>>
>>> But you're free to decide not to do it:  just please don't repeat false
>>> claims about R (like the ones about paths that started this long thread).
>>>
>>>>
>>>>> If you know as much about R as the people who wrote it
>>>>
>>>> I didn't claim that (that's was a quite general / theoretical statement,
>>>> not necessarily and only applicable to R).
>>>
>>> I didn't say you made that claim.  I was answering your question about
>>> why inventing your own way is not a good idea.  It might be a good idea,
>>> if you know the system very, very well.  Otherwise, it's probably better
>>> to work the standard way.
>>>
>>> Duncan Murdoch
>>>
>>>>
>>>>> For example, you might thinkthat all front ends set the working
>>>> directory to the directory of theprogram they are running, because the
>>>> ones you've tried do it that way. But they don't.
>>>>
>
>
>>>> GUIs. So the workaround I finally found satisfies my current needs
>>>> ------------------------------------------------------------------------
>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>> *Envoy? :* mercredi 10 octobre 2018 22:07
>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>> *Cc :* r-help at r-project.org
>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>> On 10/10/2018 5:45 PM, Olivier GIVAUDAN wrote:
>>>>> I'm not sure I'm "inventing my own way" of distributing R code... And I
>>>>> distribute it to a very limited audience.
>>>>
>>>> Nothing says a package has to go on CRAN.  You can distribute them
>>>> privately to a small audience.
>>>>
>>>>> Anyway, why not "inventing a new way" if it's more efficient than the
>>>>> standard one (I'm talking now in theory)?
>>>>
>>>> If you know as much about R as the people who wrote it, then you can
>>>> almost certainly invent better ways to do many of the things it does.  R
>>>> Core was constrained by trying to maintain back compatibility, and that
>>>> means some of their solutions aren't perfect.
>>>>
>>>> But if you don't know it that well, chances are you'll make mistakes
>>>> when you invent your own way of doing it.  For example, you might think
>>>> that all front ends set the working directory to the directory of the
>>>> program they are running, because the ones you've tried do it that way.
>>>> But they don't.
>>>>
>>>> Duncan Murdoch
>>>>
>>>>> ------------------------------------------------------------------------
>>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>>> *Envoy? :* mercredi 10 octobre 2018 21:39
>>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>>> *Cc :* r-help at r-project.org
>>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>>> On 10/10/2018 5:31 PM, Olivier GIVAUDAN wrote:
>>>>>> I do not want to use the terminal, just double clicks (i.e. the
>>>>>> simplest, automatic, non-manual way, without having to write a line /
>>>>>> command).
>>>>>> Therefore everything should happen outside any terminal. The user won't
>>>>>> use a terminal.
>>>>>>
>>>>>> I don't have a Mac and I'm not familiar with this OS, sorry.
>>>>>> But I'm really surprised the click method gives different results than
>
>>>>>> I know the click method worked both on Linux (Ubuntu latest version) and
>
>>>>>>
>>>>>> Yes, I executed my file from a terminal and got obviously the same
>>>>>> result as you (that's reassuring).
>>>>>>
>>>>>> Come on guys, creating a package... It's like using a hammer to kill a
>>>>>> fly...
>>>>>
>>>>> It's a simple operation to create a package in RStudio.  Not quite a
>>>>> single click, but just a few.
>>>>>
>>>>> In plain R, it's just a little more work using package.skeleton().
>>>>>
>>>>> Really, if you are distributing R code, you should do it in the standard
>>>>> way, not invent your own.
>>>>>
>>>>> Duncan Murdoch
>>>>>
>>>>>> ------------------------------------------------------------------------
>>>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>>>> *Envoy? :* mercredi 10 octobre 2018 20:54
>>>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>>>> *Cc :* r-help at r-project.org
>>>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>>>> On 10/10/2018 4:42 PM, Olivier GIVAUDAN wrote:
>>>>>>> Why are you not simply double-clicking on 'TestPWD' and choosing to
>>>>>>> execute the file (don't add anything)?
>>>>>>> Are you executing the file from a terminal?
>>>>>>
>>>>>> Yes, I was executing the file from my terminal.  Otherwise I really have
>>>>>> no idea what the "current directory" is in the Finder.   (I'm on a Mac.
>>>>>> I just tried the click method; it printed my home directory, not the
>>>>>> directory of the script.)
>>>>>>
>>>>>> I don't know the name of your visual front end, but you are displaying
>>>>>> the working directory that it sets when you click on TestPWD.  That will
>>>>>> be different from the working directory that your user sees in the Terminal.
>>>>>>
>>>>>> You can see what I saw if you run TestPWD from the Terminal.  It will
>>>>>> print the current working directory, not the one where TestPWD happens
>>>>>> to live.
>>>>>>
>>>>>> If you want to do the same sort of thing in R, you could set up a script
>>>>>> that calls R, and execute that in the way you executed TestPWD.  But in
>>>>>> another message you said you aren't allowed to do that, so I think your
>>>>>> best solution is the one offered by Bill Dunlap:  organize your files as
>>>>>> an R package.  If you name your package "Olivier", then you can find all
>>>>>> the files in it under the directory returned by
>>>>>>
>>>>>>      system.file(".", package = "Olivier")
>>>>>>
>>>>>> The package system is designed for R code, but you can put arbitrary
>>>>>> files into a package:  just store them under the "inst" directory in
>>>>>> your source.  When the package is installed, those files will be moved
>>>>>> up one level, i.e.
>>>>>>
>>>>>> Olivier/inst/foo
>>>>>>
>>>>>> will become
>>>>>>
>>>>>>      system.file("foo", package = "Olivier")
>>>>>>
>>>>>> Duncan Murdoch
>>>>>
>>>>
>>>
>>
>
>
>        [[alternative HTML version deleted]]
>
>
>


	[[alternative HTML version deleted]]


From o||v|er_g|v@ud@n @end|ng |rom hotm@||@com  Fri Oct 19 07:48:18 2018
From: o||v|er_g|v@ud@n @end|ng |rom hotm@||@com (Olivier GIVAUDAN)
Date: Fri, 19 Oct 2018 05:48:18 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <VI1PR0202MB335785D06EAD0DD198B118E6F5F90@VI1PR0202MB3357.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
 <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>
 <DB3PR0202MB3355AC9A5807D00F591E3B55F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <ac573e54-dde3-397e-601f-2130b5c27676@gmail.com>
 <DB3PR0202MB33559193F379157F44AD4AB0F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <f96e0c64-0e77-47f8-dbc1-5b49313ebb39@gmail.com>
 <VI1PR0202MB3357AF40A744B10736F640A3F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <12da61c6-8c19-7af2-c57b-6cc5fc929481@yorku.ca>,
 <VI1PR0202MB335785D06EAD0DD198B118E6F5F90@VI1PR0202MB3357.eurprd02.prod.outlook.com>
Message-ID: <VI1PR0202MB3357F2C493FDEB7C950DDAD6F5F90@VI1PR0202MB3357.eurprd02.prod.outlook.com>

Sorry, I forgot:

The only regret I have is the title of this thread which is somehow misleading: a more correct one would be "How to set automatically / dynamically the working directory in R?"
________________________________
De : Olivier GIVAUDAN <olivier_givaudan at hotmail.com>
Envoy? : vendredi 19 octobre 2018 05:46
? : Michael Friendly; Duncan Murdoch; Jeff Newmiller
Cc : r-help at r-project.org
Objet : RE: Genuine relative paths with R

Hi Michael,

Apologies for the late reply.

I am very grateful to all the R users who generously spent time on my problem and suggested operational solutions.

It seems you didn't follow carefully this thread (which I can understand of course) as 2 operational solutions were already suggested and successfully implemented from my side.

So, to summarise:


  1.  The most universal (i.e. it works on Windows and Linux, grateful if someone on Mac could check) solution, when working with the graphical shell system of an OS, is to create a Rproject file at the root of the project and open it with RStudio: the working directory will be automatically set to the location where this Rproject file is;
  2.  Only on Windows (at first sight): Create an empty .RData (with a proper basename) at the root of the project and open it (it should be by default associated to / opened by the default R GUI): the working directory will be automatically set to the location where this instrumental / dummy RData file is.

I didn't invest more time to look more thoroughly into the other solution suggested by Peter Claussen on macro language.

Again thanks to all of you and special thanks to Jeff Newmiller for his patience and for having shared this "trick" with .RData file.

Best regards,

Olivier
________________________________
De : Michael Friendly <friendly at yorku.ca>
Envoy? : jeudi 11 octobre 2018 13:08
? : Olivier GIVAUDAN; Duncan Murdoch; Jeff Newmiller
Cc : r-help at r-project.org
Objet : Re: Genuine relative paths with R

Olivier:

Readers of R-Help generally are patient and try to be helpful. Numerous
solutions to your initial query were proposed, but for some reason you
either reject them or take the discussion down some different rabbit
hole of claims about R vs. other software environments, to which kind
people reply and you then rebut. ENOUGH ALREADY.  This thread has been
going on for nearly a week. Choose something that
works for you, have a cup of tea, go for a run, get a life.
Please do not bother to reply.

-Michael

On 10/10/2018 8:08 PM, Olivier GIVAUDAN wrote:
> I think Gabor (at least) already suggested this solution. But the problem is: how do you source this file containing this 'foo' function without writing its absolute path?
>
> It's a kind of initialisation issue.
>
>> a function returning the path of the R file where this same function was invoked.
>>> I didn't realize that's what you were asking for. This has nothing to do with your subject line.
>
> It's just a trick to work with relative paths without having to write any hardcoded (by definition) absolute path beforehand.
> ________________________________
> De : Duncan Murdoch <murdoch.duncan at gmail.com>
> Envoy? : mercredi 10 octobre 2018 23:51
> ? : Olivier GIVAUDAN; Jeff Newmiller
> Cc : r-help at r-project.org
> Objet : Re: [R] Genuine relative paths with R
>
> On 10/10/2018 7:11 PM, Olivier GIVAUDAN wrote:
>> It is not wrong to claim that R currently doesn't have a function
>> returning the path of the R file where this same function was invoked.
>
> But it does.  I didn't realize that's what you were asking for.  This
> has nothing to do with your subject line.
>
> If you source a file from somewhere, then each of the functions it
> creates is marked with its source location.  So you can put this in a file:
>
> foo <- function () 1
>
> filename <- normalizePath(getSrcFilename(foo, full.names=TRUE))
>
> (You need the normalizePath() call because all that will be saved is the
> path that was used.  If it was a relative path, that's what you get
> before you normalize it.  You don't really need the foo function; you
> could put an anonymous function into the getSrcFilename call.  It's just
> usually easier to include a function that already exists.)
>
> When you source() that file, filename will get the name of the file it
> came from.
>
> This is a lot like __FILE__ in C.  One difference is that it is usually
> turned off when the function is being loaded into a package, but you can
> optionally turn it on.
>
> You can also find out what line foo starts on, using
>
> fooline <- getSrcLocation(foo)
>
> This is a lot like __LINE__ in C.
>
> Duncan Murdoch
>
>
>>
>> 'getwd()' is indeed not equivalent to VBA
>> 'Application.ThisWorkbook.Path' or C macro '__FILE__' or SAS
>> %sysget(SAS_EXECFILENAME), etc.
>> ------------------------------------------------------------------------
>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>> *Envoy? :* mercredi 10 octobre 2018 22:59
>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>> *Cc :* r-help at r-project.org
>> *Objet :* Re: [R] Genuine relative paths with R
>> On 10/10/2018 6:52 PM, Olivier GIVAUDAN wrote:
>>>>   Again, you seem to think making a package is a big deal.
>>>
>>> Perhaps not a big deal (I believe you, I didn't write an R package yet),
>>> but not as straightforward as having a function within an R file
>>> returning its own path.
>>>
>>>> But you're free to decide not to do it:  just please don't repeat
>>> falseclaims about R (like the ones about paths that started this long
>>> thread).
>>>
>>> Which false claims?
>>
>> "But I am really wondering why R doesn't have (please tell me if I'm
>> wrong) this basic feature as many other languages have it (batch, shell,
>> C, LaTeX, SAS with macro-variables, etc.)?"
>>
>> Duncan Murdoch
>>
>>> ------------------------------------------------------------------------
>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>> *Envoy? :* mercredi 10 octobre 2018 22:31
>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>> *Cc :* r-help at r-project.org
>>> *Objet :* Re: [R] Genuine relative paths with R
>>> On 10/10/2018 6:17 PM, Olivier GIVAUDAN wrote:
>>>>> Nothing says a package has to go on CRAN.  You can distribute
>>>> themprivately to a small audience.
>>>>
>>>> Yes, I agree in theory. But this solution still violates my own
>>>> proportionality principle.
>>>
>>> Again, you seem to think making a package is a big deal.  Maybe that was
>>> true 10 years ago (though I wrote and tested a package in a 45 minute
>>> presentation at UseR 2008), but now it's very easy.
>>>
>>> But you're free to decide not to do it:  just please don't repeat false
>>> claims about R (like the ones about paths that started this long thread).
>>>
>>>>
>>>>> If you know as much about R as the people who wrote it
>>>>
>>>> I didn't claim that (that's was a quite general / theoretical statement,
>>>> not necessarily and only applicable to R).
>>>
>>> I didn't say you made that claim.  I was answering your question about
>>> why inventing your own way is not a good idea.  It might be a good idea,
>>> if you know the system very, very well.  Otherwise, it's probably better
>>> to work the standard way.
>>>
>>> Duncan Murdoch
>>>
>>>>
>>>>> For example, you might thinkthat all front ends set the working
>>>> directory to the directory of theprogram they are running, because the
>>>> ones you've tried do it that way. But they don't.
>>>>
>
>
>>>> GUIs. So the workaround I finally found satisfies my current needs
>>>> ------------------------------------------------------------------------
>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>> *Envoy? :* mercredi 10 octobre 2018 22:07
>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>> *Cc :* r-help at r-project.org
>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>> On 10/10/2018 5:45 PM, Olivier GIVAUDAN wrote:
>>>>> I'm not sure I'm "inventing my own way" of distributing R code... And I
>>>>> distribute it to a very limited audience.
>>>>
>>>> Nothing says a package has to go on CRAN.  You can distribute them
>>>> privately to a small audience.
>>>>
>>>>> Anyway, why not "inventing a new way" if it's more efficient than the
>>>>> standard one (I'm talking now in theory)?
>>>>
>>>> If you know as much about R as the people who wrote it, then you can
>>>> almost certainly invent better ways to do many of the things it does.  R
>>>> Core was constrained by trying to maintain back compatibility, and that
>>>> means some of their solutions aren't perfect.
>>>>
>>>> But if you don't know it that well, chances are you'll make mistakes
>>>> when you invent your own way of doing it.  For example, you might think
>>>> that all front ends set the working directory to the directory of the
>>>> program they are running, because the ones you've tried do it that way.
>>>> But they don't.
>>>>
>>>> Duncan Murdoch
>>>>
>>>>> ------------------------------------------------------------------------
>>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>>> *Envoy? :* mercredi 10 octobre 2018 21:39
>>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>>> *Cc :* r-help at r-project.org
>>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>>> On 10/10/2018 5:31 PM, Olivier GIVAUDAN wrote:
>>>>>> I do not want to use the terminal, just double clicks (i.e. the
>>>>>> simplest, automatic, non-manual way, without having to write a line /
>>>>>> command).
>>>>>> Therefore everything should happen outside any terminal. The user won't
>>>>>> use a terminal.
>>>>>>
>>>>>> I don't have a Mac and I'm not familiar with this OS, sorry.
>>>>>> But I'm really surprised the click method gives different results than
>
>>>>>> I know the click method worked both on Linux (Ubuntu latest version) and
>
>>>>>>
>>>>>> Yes, I executed my file from a terminal and got obviously the same
>>>>>> result as you (that's reassuring).
>>>>>>
>>>>>> Come on guys, creating a package... It's like using a hammer to kill a
>>>>>> fly...
>>>>>
>>>>> It's a simple operation to create a package in RStudio.  Not quite a
>>>>> single click, but just a few.
>>>>>
>>>>> In plain R, it's just a little more work using package.skeleton().
>>>>>
>>>>> Really, if you are distributing R code, you should do it in the standard
>>>>> way, not invent your own.
>>>>>
>>>>> Duncan Murdoch
>>>>>
>>>>>> ------------------------------------------------------------------------
>>>>>> *De :* Duncan Murdoch <murdoch.duncan at gmail.com>
>>>>>> *Envoy? :* mercredi 10 octobre 2018 20:54
>>>>>> *? :* Olivier GIVAUDAN; Jeff Newmiller
>>>>>> *Cc :* r-help at r-project.org
>>>>>> *Objet :* Re: [R] Genuine relative paths with R
>>>>>> On 10/10/2018 4:42 PM, Olivier GIVAUDAN wrote:
>>>>>>> Why are you not simply double-clicking on 'TestPWD' and choosing to
>>>>>>> execute the file (don't add anything)?
>>>>>>> Are you executing the file from a terminal?
>>>>>>
>>>>>> Yes, I was executing the file from my terminal.  Otherwise I really have
>>>>>> no idea what the "current directory" is in the Finder.   (I'm on a Mac.
>>>>>> I just tried the click method; it printed my home directory, not the
>>>>>> directory of the script.)
>>>>>>
>>>>>> I don't know the name of your visual front end, but you are displaying
>>>>>> the working directory that it sets when you click on TestPWD.  That will
>>>>>> be different from the working directory that your user sees in the Terminal.
>>>>>>
>>>>>> You can see what I saw if you run TestPWD from the Terminal.  It will
>>>>>> print the current working directory, not the one where TestPWD happens
>>>>>> to live.
>>>>>>
>>>>>> If you want to do the same sort of thing in R, you could set up a script
>>>>>> that calls R, and execute that in the way you executed TestPWD.  But in
>>>>>> another message you said you aren't allowed to do that, so I think your
>>>>>> best solution is the one offered by Bill Dunlap:  organize your files as
>>>>>> an R package.  If you name your package "Olivier", then you can find all
>>>>>> the files in it under the directory returned by
>>>>>>
>>>>>>      system.file(".", package = "Olivier")
>>>>>>
>>>>>> The package system is designed for R code, but you can put arbitrary
>>>>>> files into a package:  just store them under the "inst" directory in
>>>>>> your source.  When the package is installed, those files will be moved
>>>>>> up one level, i.e.
>>>>>>
>>>>>> Olivier/inst/foo
>>>>>>
>>>>>> will become
>>>>>>
>>>>>>      system.file("foo", package = "Olivier")
>>>>>>
>>>>>> Duncan Murdoch
>>>>>
>>>>
>>>
>>
>
>
>        [[alternative HTML version deleted]]
>
>
>


	[[alternative HTML version deleted]]


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Fri Oct 19 08:57:14 2018
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Fri, 19 Oct 2018 08:57:14 +0200
Subject: [R] Project in emacs + ess
In-Reply-To: <CAGxFJbQP3Y48ZgPtmpVvXa85a=UxSKhDZ1EbrOHjyDm+AWd7Sw@mail.gmail.com>
References: <CY1PR18MB05499B79AB37D7B65C34ED89FAF90@CY1PR18MB0549.namprd18.prod.outlook.com>
 <CAGxFJbQP3Y48ZgPtmpVvXa85a=UxSKhDZ1EbrOHjyDm+AWd7Sw@mail.gmail.com>
Message-ID: <23497.32842.663076.941173@stat.math.ethz.ch>

>>>>> Bert Gunter 
>>>>>     on Thu, 18 Oct 2018 21:45:33 -0700 writes:

    > Wrong list. This list is about R programming. You should
    > address this to an emacs support list. Better yet, to an
    > ess list . Here's one place you might start:

    > https://www.r-bloggers.com/using-r-with-emacs-and-ess/

    > Other resources can be found by a web search on "R ess" .

Indeed, for completeness :

- The ESS website is at https://ess.r-project.org/

- There's an ESS dedicated mailing list "just parallel to" R-help:
  https://stat.ethz.ch/mailman/listinfo/ess-help

- We are currently beta testing a new release of ESS, "18.10",
  which *does* contain some project support.
  Prerelease tar/zip balls available from
  https://stat.ethz.ch/ESS/downloads/ess/Prerelease/
  
- ESS is developed on github now, and issues are tracked here:
  https://github.com/emacs-ess/ESS/issues/

Last but not least :
     Welcome to the world of Emacs and ESS !

--
Martin Maechler
ETH Zurich  (and ESS core team)


    > Cheers, Bert
    > Bert Gunter

    > "The trouble with having an open mind is that people keep
    > coming along and sticking things into it."  -- Opus (aka
    > Berkeley Breathed in his "Bloom County" comic strip )


    > On Thu, Oct 18, 2018 at 9:12 PM Naresh Gurbuxani <
    > naresh_gurbuxani at hotmail.com> wrote:

    >> I have switched from RStudio to emacs.  In emacs, how can
    >> I create a project like in RStudio?
    >> 
    >> 
    >> Within the project directory, I would like to create
    >> different directories for code, data, results, figures,
    >> documents, etc.  In RStudio project, relative references
    >> work well.  For example, an Sweave document in document
    >> directory can use command source('code/mycode.R').  In
    >> emacs, this does not work "out of the box".  In document
    >> folder, the command needs to be
    >> source('../code/mycode.R').  This is minor effort, but a
    >> better method must exist.
    >> 
    >> 
    >> Thanks,
    >> 
    >> Naresh
    >> 
    >> [[alternative HTML version deleted]]
    >> 
    >> ______________________________________________
    >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and
    >> more, see https://stat.ethz.ch/mailman/listinfo/r-help
    >> PLEASE do read the posting guide
    >> http://www.R-project.org/posting-guide.html and provide
    >> commented, minimal, self-contained, reproducible code.
    >> 

    > 	[[alternative HTML version deleted]]

    > ______________________________________________
    > R-help at r-project.org mailing list -- To UNSUBSCRIBE and
    > more, see https://stat.ethz.ch/mailman/listinfo/r-help
    > PLEASE do read the posting guide
    > http://www.R-project.org/posting-guide.html and provide
    > commented, minimal, self-contained, reproducible code.



From K@th@r|n@@Fr|t@ch @end|ng |rom nn|@co@uk  Fri Oct 19 10:08:45 2018
From: K@th@r|n@@Fr|t@ch @end|ng |rom nn|@co@uk (Fritsch, Katharina (NNL))
Date: Fri, 19 Oct 2018 08:08:45 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <VI1PR0202MB33574BF249C24C25DC8D2C0AF5F90@VI1PR0202MB3357.eurprd02.prod.outlook.com>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
 <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>
 <DB3PR0202MB3355AC9A5807D00F591E3B55F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <ac573e54-dde3-397e-601f-2130b5c27676@gmail.com>
 <DB3PR0202MB33559193F379157F44AD4AB0F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>,
 <42363BAD-7D85-4A57-B35A-0CCBA2EC1FD2@mac.com>
 <VI1PR0202MB3357AC579BC0B0D7C4C66BC2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <1B674C66F0DD4343BA5DD0C025217F9F028BFDE5@CSSPWD2PRAP1147.SSA-Intra.net>
 <VI1PR0202MB33574BF249C24C25DC8D2C0AF5F90@VI1PR0202MB3357.eurprd02.prod.outlook.com>
Message-ID: <1B674C66F0DD4343BA5DD0C025217F9F028CBD53@CSSPWD2PRAP1147.SSA-Intra.net>

Hello Olivier,
You can definitely use Shiny Server to share data and apps on a server you (or the people who asked you to share the data) own and which is only accessible from specified networks. I?ve personally contributed R code to exactly such a project that involved confidential data.
Kind regards,
Katharina.

--

Dr Katharina Fritsch B.Sc. M.Sc. MRSC
Chemical Modeller, Chemical and Process Modelling


E.
katharina.fritsch at nnl.co.uk
T.
+44 (0)1925 289387
@uknnl

National Nuclear Laboratory Limited, 5th Floor, Chadwick House,
Birchwood Park, Warrington, WA3 6AE, UK

www.nnl.co.uk

From: Olivier GIVAUDAN [mailto:olivier_givaudan at hotmail.com]
Sent: 19 October 2018 06:26
To: Fritsch, Katharina (NNL); Peter Claussen
Cc: r-help at r-project.org
Subject: RE: [R] Genuine relative paths with R

Hi Katharina,

Apologies for the late reply.

Thank you for your proposal which was not made yet.

That's actually a Shiny app which I am working on. The problem is that the data are confidential: except when I share the R codes and data (via a marvelous secured SharePoint system...), the data should stay local.

When looking at [1], it seems inevitable that the data are published to a third-party server, which I want to avoid.

But I will look into it more closely, esp. whether it is possible to segregate the sharing of R codes / Shiny app (to the server, no problem) and data (only local).

Best regards,

Olivier

?[1] BLOCKEDshiny[.]rstudio[.]com/articles/deployment-local[.]htmlBLOCKED
________________________________________
De : Fritsch, Katharina (NNL) <Katharina.Fritsch at nnl.co.uk>
Envoy? : jeudi 11 octobre 2018 08:22
? : Olivier GIVAUDAN; Peter Claussen
Cc : r-help at r-project.org
Objet : RE: [R] Genuine relative paths with R

Hiya,
I have lost track of half the discussion so forgive me if that suggestion has been made before, but would it be suitable to wrap your code in a shiny app and disseminate it this way?
Kind regards,
Katharina.

--

Dr Katharina Fritsch B.Sc. M.Sc. MRSC
Chemical Modeller, Chemical and Process Modelling


E.
katharina.fritsch at nnl.co.uk
T.
+44 (0)1925 289387
@uknnl

National Nuclear Laboratory Limited, 5th Floor, Chadwick House,
Birchwood Park, Warrington, WA3 6AE, UK

BLOCKEDnnl[.]co[.]ukBLOCKED

-----Original Message-----
From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Olivier GIVAUDAN
Sent: 11 October 2018 00:54
To: Peter Claussen
Cc: r-help at r-project.org
Subject: Re: [R] Genuine relative paths with R

Yes, I am aware that both '__FILE__' and 'SAS_EXECFILENAME' are macro variables. I don't know how the VBA 'Application.ThisWorkbook.Path' VBA or PHP '__DIR__' (or '__FILE__') work.

And yes, indeed, until now I didn't even realise that this simple find-and-replace solution of "mine" is actually the basic job of a preprocessor when it expands macro variables, thank you!

A macro language in R, yes, I think it would be useful, at least for this function. If nothing simpler is available, of course...
________________________________
De : Peter Claussen <dakotajudo at mac.com> Envoy  : mercredi 10 octobre 2018 23:29   : Olivier GIVAUDAN Cc : Duncan Murdoch; Jeff Newmiller; r-help at r-project.org Objet : Re: [R] Genuine relative paths with R

If I m following all this correctly, it seems your criticism is that R doesn t provide a run-time function that is equivalent to a compile-time macro. You do realize that __FILE__ is not part of the C programming language - it s a predefined variable recognized by the cpp - the C preprocessor program. Similarly, SAS_EXECFILENAME is a predefined variable that can be recognized by the SAS macro processor, but has no meaning in the SAS language itself.

So, to go back to your original post:
1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.

This is what a macro processor does. Are you asking for a macro language in R?

Cheers

On Oct 10, 2018, at 6:11 PM, Olivier GIVAUDAN <olivier_givaudan at hotmail.com<mailto:olivier_givaudan at hotmail.com>> wrote:

It is not wrong to claim that R currently doesn't have a function returning the path of the R file where this same function was invoked.

'getwd()' is indeed not equivalent to VBA 'Application.ThisWorkbook.Path' or C macro '__FILE__' or SAS %sysget(SAS_EXECFILENAME), etc.


        [[alternative HTML version deleted]]


This e-mail is from National Nuclear Laboratory Limited ("NNL"). This e-mail and any attachments are intended for the addressee and may also be legally privileged. If you are not the intended recipient please do not print, re-transmit, store or act in reliance on it or any attachments. Instead, please e-mail it back to the sender and then immediately permanently delete it.

National Nuclear Laboratory Limited (Company number 3857752) Registered in England and Wales. Registered office: Chadwick House, Warrington Road, Birchwood Park, Warrington, WA3 6AE.

*****************************************************************************
This message was received by the Cloud Security Email Gateway

and was checked for Viruses and SPAM by the Cloud Security Email Management Service.
Please forward any suspicious or unwanted emails to "Spam Helpdesk"
*****************************************************************************

This e-mail is from National Nuclear Laboratory Limited ("NNL"). This e-mail and any attachments are intended for the addressee and may also be legally privileged. If you are not the intended recipient please do not print, re-transmit, store or act in reliance on it or any attachments. Instead, please e-mail it back to the sender and then immediately permanently delete it.

National Nuclear Laboratory Limited (Company number 3857752) Registered in England and Wales. Registered office: Chadwick House, Warrington Road, Birchwood Park, Warrington, WA3 6AE.

From er|cjberger @end|ng |rom gm@||@com  Fri Oct 19 12:12:38 2018
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Fri, 19 Oct 2018 13:12:38 +0300
Subject: [R] Project in emacs + ess
In-Reply-To: <23497.32842.663076.941173@stat.math.ethz.ch>
References: <CY1PR18MB05499B79AB37D7B65C34ED89FAF90@CY1PR18MB0549.namprd18.prod.outlook.com>
 <CAGxFJbQP3Y48ZgPtmpVvXa85a=UxSKhDZ1EbrOHjyDm+AWd7Sw@mail.gmail.com>
 <23497.32842.663076.941173@stat.math.ethz.ch>
Message-ID: <CAGgJW74ZzfWoPENQDAbxSA_LHxtigT+h+fj65VMBtEStCFNGDQ@mail.gmail.com>

Not exactly sure what you are looking for but here is my workflow which may
give you another perspective
1. my OS is linux
2. I edit my files in emacs (with ESS pulled in)
3. I use make (and Makefile) to compile .o's and .so's from .cpp where
necessary (i.e. I use Rcpp etc)
    (and also to build server.R and ui.R from smaller .R's for my shiny app)
4. I kick off RStudio in what you would call the "project" directory and
use source() commands as appropriate
    (For a given project I would generally have a small script that I
source as the first command in RStudio.)

This gives me the power of the various components
    linux - make, git, shell scripts, etc
    emacs - great editor
    RStudio - for debugging, testing etc

I definitely do not claim my workflow is optimal and am certainly open -
and curious - to understand your proposed workflow.

Regards,
Eric


On Fri, Oct 19, 2018 at 9:57 AM Martin Maechler <maechler at stat.math.ethz.ch>
wrote:

> >>>>> Bert Gunter
> >>>>>     on Thu, 18 Oct 2018 21:45:33 -0700 writes:
>
>     > Wrong list. This list is about R programming. You should
>     > address this to an emacs support list. Better yet, to an
>     > ess list . Here's one place you might start:
>
>     > https://www.r-bloggers.com/using-r-with-emacs-and-ess/
>
>     > Other resources can be found by a web search on "R ess" .
>
> Indeed, for completeness :
>
> - The ESS website is at https://ess.r-project.org/
>
> - There's an ESS dedicated mailing list "just parallel to" R-help:
>   https://stat.ethz.ch/mailman/listinfo/ess-help
>
> - We are currently beta testing a new release of ESS, "18.10",
>   which *does* contain some project support.
>   Prerelease tar/zip balls available from
>   https://stat.ethz.ch/ESS/downloads/ess/Prerelease/
>
> - ESS is developed on github now, and issues are tracked here:
>   https://github.com/emacs-ess/ESS/issues/
>
> Last but not least :
>      Welcome to the world of Emacs and ESS !
>
> --
> Martin Maechler
> ETH Zurich  (and ESS core team)
>
>
>     > Cheers, Bert
>     > Bert Gunter
>
>     > "The trouble with having an open mind is that people keep
>     > coming along and sticking things into it."  -- Opus (aka
>     > Berkeley Breathed in his "Bloom County" comic strip )
>
>
>     > On Thu, Oct 18, 2018 at 9:12 PM Naresh Gurbuxani <
>     > naresh_gurbuxani at hotmail.com> wrote:
>
>     >> I have switched from RStudio to emacs.  In emacs, how can
>     >> I create a project like in RStudio?
>     >>
>     >>
>     >> Within the project directory, I would like to create
>     >> different directories for code, data, results, figures,
>     >> documents, etc.  In RStudio project, relative references
>     >> work well.  For example, an Sweave document in document
>     >> directory can use command source('code/mycode.R').  In
>     >> emacs, this does not work "out of the box".  In document
>     >> folder, the command needs to be
>     >> source('../code/mycode.R').  This is minor effort, but a
>     >> better method must exist.
>     >>
>     >>
>     >> Thanks,
>     >>
>     >> Naresh
>     >>
>     >> [[alternative HTML version deleted]]
>     >>
>     >> ______________________________________________
>     >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and
>     >> more, see https://stat.ethz.ch/mailman/listinfo/r-help
>     >> PLEASE do read the posting guide
>     >> http://www.R-project.org/posting-guide.html and provide
>     >> commented, minimal, self-contained, reproducible code.
>     >>
>
>     >   [[alternative HTML version deleted]]
>
>     > ______________________________________________
>     > R-help at r-project.org mailing list -- To UNSUBSCRIBE and
>     > more, see https://stat.ethz.ch/mailman/listinfo/r-help
>     > PLEASE do read the posting guide
>     > http://www.R-project.org/posting-guide.html and provide
>     > commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From o||v|er_g|v@ud@n @end|ng |rom hotm@||@com  Fri Oct 19 12:51:10 2018
From: o||v|er_g|v@ud@n @end|ng |rom hotm@||@com (Olivier GIVAUDAN)
Date: Fri, 19 Oct 2018 10:51:10 +0000
Subject: [R] Genuine relative paths with R
In-Reply-To: <1B674C66F0DD4343BA5DD0C025217F9F028CBD53@CSSPWD2PRAP1147.SSA-Intra.net>
References: <VI1PR0202MB33579D35349FE38FC602CF9FF5E40@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <VI1PR0202MB33573D74952A4674DCF866D2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>
 <b1ad4111-15d3-323a-5d61-5ff5e2ddd4f2@gmail.com>
 <DB3PR0202MB3355BA29BAD0AF0EC5FB6CBBF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <2cc44e5d-ca4d-636a-60a6-b31f5bc25143@gmail.com>
 <DB3PR0202MB3355EAB3948B25F5CC5A4DECF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <22a10dd6-8612-106e-b221-834a94bba6e7@gmail.com>
 <DB3PR0202MB33557D39C9FBD1798874A40EF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <d72d94b5-c938-815d-fdd2-fe99ad9ea62e@gmail.com>
 <DB3PR0202MB3355AA79C0F20AD00BF0A191F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <c84937aa-244f-8112-2c71-d92aa0ee759a@gmail.com>
 <DB3PR0202MB335570EDF1740765F7E78CAFF5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <b8b6d6c4-bb69-e35b-0abb-465bd45029c0@gmail.com>
 <DB3PR0202MB3355AC9A5807D00F591E3B55F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>
 <ac573e54-dde3-397e-601f-2130b5c27676@gmail.com>
 <DB3PR0202MB33559193F379157F44AD4AB0F5E00@DB3PR0202MB3355.eurprd02.prod.outlook.com>,
 <42363BAD-7D85-4A57-B35A-0CCBA2EC1FD2@mac.com>
 <VI1PR0202MB3357AC579BC0B0D7C4C66BC2F5E00@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <1B674C66F0DD4343BA5DD0C025217F9F028BFDE5@CSSPWD2PRAP1147.SSA-Intra.net>
 <VI1PR0202MB33574BF249C24C25DC8D2C0AF5F90@VI1PR0202MB3357.eurprd02.prod.outlook.com>,
 <1B674C66F0DD4343BA5DD0C025217F9F028CBD53@CSSPWD2PRAP1147.SSA-Intra.net>
Message-ID: <VI1PR0202MB3357E47013E0E70AC32B6B02F5F90@VI1PR0202MB3357.eurprd02.prod.outlook.com>

Hello Katharina,
?
Indeed, I forgot this solution to have your own server, probably because in my organisation this is not an option, yet.?
?
I'm pushing for that in our organisation for months now but there is quite some resistance and heavy processes around that, and ultimately I'm not deciding on that unfortunately...?
?
That would be for me the ideal solution.?
?
Best regards,?
?
Olivier
________________________________
De : Fritsch, Katharina (NNL) <Katharina.Fritsch at nnl.co.uk>
Envoy? : vendredi 19 octobre 2018 08:08
? : Olivier GIVAUDAN
Cc : r-help at r-project.org
Objet : RE: [R] Genuine relative paths with R

Hello Olivier,
You can definitely use Shiny Server to share data and apps on a server you (or the people who asked you to share the data) own and which is only accessible from specified networks. I?ve personally contributed R code to exactly such a project that involved confidential data.
Kind regards,
Katharina.

--

Dr Katharina Fritsch B.Sc. M.Sc. MRSC
Chemical Modeller, Chemical and Process Modelling


E.
katharina.fritsch at nnl.co.uk
T.
+44 (0)1925 289387
@uknnl

National Nuclear Laboratory Limited, 5th Floor, Chadwick House,
Birchwood Park, Warrington, WA3 6AE, UK

www.nnl.co.uk<http://www.nnl.co.uk>

From: Olivier GIVAUDAN [mailto:olivier_givaudan at hotmail.com]
Sent: 19 October 2018 06:26
To: Fritsch, Katharina (NNL); Peter Claussen
Cc: r-help at r-project.org
Subject: RE: [R] Genuine relative paths with R

Hi Katharina,

Apologies for the late reply.

Thank you for your proposal which was not made yet.

That's actually a Shiny app which I am working on. The problem is that the data are confidential: except when I share the R codes and data (via a marvelous secured SharePoint system...), the data should stay local.

When looking at [1], it seems inevitable that the data are published to a third-party server, which I want to avoid.

But I will look into it more closely, esp. whether it is possible to segregate the sharing of R codes / Shiny app (to the server, no problem) and data (only local).

Best regards,

Olivier

?[1] BLOCKEDshiny[.]rstudio[.]com/articles/deployment-local[.]htmlBLOCKED
________________________________________
De : Fritsch, Katharina (NNL) <Katharina.Fritsch at nnl.co.uk>
Envoy? : jeudi 11 octobre 2018 08:22
? : Olivier GIVAUDAN; Peter Claussen
Cc : r-help at r-project.org
Objet : RE: [R] Genuine relative paths with R

Hiya,
I have lost track of half the discussion so forgive me if that suggestion has been made before, but would it be suitable to wrap your code in a shiny app and disseminate it this way?
Kind regards,
Katharina.

--

Dr Katharina Fritsch B.Sc. M.Sc. MRSC
Chemical Modeller, Chemical and Process Modelling


E.
katharina.fritsch at nnl.co.uk
T.
+44 (0)1925 289387
@uknnl

National Nuclear Laboratory Limited, 5th Floor, Chadwick House,
Birchwood Park, Warrington, WA3 6AE, UK

BLOCKEDnnl[.]co[.]ukBLOCKED

-----Original Message-----
From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Olivier GIVAUDAN
Sent: 11 October 2018 00:54
To: Peter Claussen
Cc: r-help at r-project.org
Subject: Re: [R] Genuine relative paths with R

Yes, I am aware that both '__FILE__' and 'SAS_EXECFILENAME' are macro variables. I don't know how the VBA 'Application.ThisWorkbook.Path' VBA or PHP '__DIR__' (or '__FILE__') work.

And yes, indeed, until now I didn't even realise that this simple find-and-replace solution of "mine" is actually the basic job of a preprocessor when it expands macro variables, thank you!

A macro language in R, yes, I think it would be useful, at least for this function. If nothing simpler is available, of course...
________________________________
De : Peter Claussen <dakotajudo at mac.com> Envoy  : mercredi 10 octobre 2018 23:29   : Olivier GIVAUDAN Cc : Duncan Murdoch; Jeff Newmiller; r-help at r-project.org Objet : Re: [R] Genuine relative paths with R

If I m following all this correctly, it seems your criticism is that R doesn t provide a run-time function that is equivalent to a compile-time macro. You do realize that __FILE__ is not part of the C programming language - it s a predefined variable recognized by the cpp - the C preprocessor program. Similarly, SAS_EXECFILENAME is a predefined variable that can be recognized by the SAS macro processor, but has no meaning in the SAS language itself.

So, to go back to your original post:
1.  Either create a variable "ScriptPath" in the first lines of each of my R scripts and run a batch (or shell, etc.) to replace every single occurrence of "ScriptPath <-" by "ScriptPath <- [Absolute path of the R script]" in all the R scripts located in the folder (and possibly subfolders) of the batch file.

This is what a macro processor does. Are you asking for a macro language in R?

Cheers

On Oct 10, 2018, at 6:11 PM, Olivier GIVAUDAN <olivier_givaudan at hotmail.com<mailto:olivier_givaudan at hotmail.com>> wrote:

It is not wrong to claim that R currently doesn't have a function returning the path of the R file where this same function was invoked.

'getwd()' is indeed not equivalent to VBA 'Application.ThisWorkbook.Path' or C macro '__FILE__' or SAS %sysget(SAS_EXECFILENAME), etc.


        [[alternative HTML version deleted]]


This e-mail is from National Nuclear Laboratory Limited ("NNL"). This e-mail and any attachments are intended for the addressee and may also be legally privileged. If you are not the intended recipient please do not print, re-transmit, store or act in reliance on it or any attachments. Instead, please e-mail it back to the sender and then immediately permanently delete it.

National Nuclear Laboratory Limited (Company number 3857752) Registered in England and Wales. Registered office: Chadwick House, Warrington Road, Birchwood Park, Warrington, WA3 6AE.

*****************************************************************************
This message was received by the Cloud Security Email Gateway

and was checked for Viruses and SPAM by the Cloud Security Email Management Service.
Please forward any suspicious or unwanted emails to "Spam Helpdesk"
*****************************************************************************

This e-mail is from National Nuclear Laboratory Limited ("NNL"). This e-mail and any attachments are intended for the addressee and may also be legally privileged. If you are not the intended recipient please do not print, re-transmit, store or act in reliance on it or any attachments. Instead, please e-mail it back to the sender and then immediately permanently delete it.

National Nuclear Laboratory Limited (Company number 3857752) Registered in England and Wales. Registered office: Chadwick House, Warrington Road, Birchwood Park, Warrington, WA3 6AE.

	[[alternative HTML version deleted]]


From |@t@z@hn @end|ng |rom gm@||@com  Fri Oct 19 15:00:54 2018
From: |@t@z@hn @end|ng |rom gm@||@com (Ista Zahn)
Date: Fri, 19 Oct 2018 09:00:54 -0400
Subject: [R] 
 Matching multiple search criteria (Unlisting a nested dataset,
 take 2)
In-Reply-To: <CANdqJqdP2bDdVNc=8R7jeXYU94p_=3BNmwrt11zwh7OdOaEfZA@mail.gmail.com>
References: <CANdqJqdP2bDdVNc=8R7jeXYU94p_=3BNmwrt11zwh7OdOaEfZA@mail.gmail.com>
Message-ID: <CA+vqiLFXRo8-0_XR5v73Ad0KE+eKx7=P1NPsCdPWkwNX94tASw@mail.gmail.com>

Here is another approach, just for fun:

library(tidyverse)
library(tokenizers)

anyall <- function(x, # a character vector
                   terms # a list of character vectors
                   ){
    any(map_lgl(terms, function(term) {
        all(term %in% x)
    }))
}

mutate(th,
       flag = map_lgl(tokenize_tweets(text),
                      anyall,
                      terms = tokenize_words(st$terms)))

Best,
Ista
On Tue, Oct 16, 2018 at 5:39 PM Nathan Parsons
<nathan.f.parsons at gmail.com> wrote:
>
> Thanks all for your patience. Here?s a second go that is perhaps more
> explicative of what it is I am trying to accomplish (and hopefully in plain
> text form)...
>
>
> I?m using the following packages: tidyverse, purrr, tidytext
>
>
> I have a number of tweets in the following form:
>
>
> th <- structure(list(status_id = c("x1047841705729306624",
> "x1046966595610927105",
>
> "x1047094786610552832", "x1046988542818308097", "x1046934493553221632",
>
> "x1047227442899775488"), created_at = c("2018-10-04T13:31:45Z",
>
> "2018-10-02T03:34:22Z", "2018-10-02T12:03:45Z", "2018-10-02T05:01:35Z",
>
> "2018-10-02T01:26:49Z", "2018-10-02T20:50:53Z"), text = c("Technique is
> everything with olympic lifts ! @ Body By John https://t.co/UsfR6DafZt",
>
> "@Subtronics just went back and rewatched ur FBlice with ur CDJs and let me
> tell you man. You are the fucking messiah",
>
> "@ic4rus1 Opportunistic means short-game. As in getting drunk now vs. not
> being hung over tomorrow vs. not fucking up your life ten years later.",
>
> "I tend to think about my dreams before I sleep.", "@MichaelAvenatti
> @SenatorCollins So, if your client was in her 20s, attending parties with
> teenagers, doesn't that make her at the least immature as hell, or at the
> worst, a pedophile and a person contributing to the delinquency of minors?",
>
> "i wish i could take credit for this"), lat = c(43.6835853, 40.284123,
>
> 37.7706565, 40.431389, 31.1688935, 33.9376735), lng = c(-70.3284118,
>
> -83.078589, -122.4359785, -79.9806895, -100.0768885, -118.130426
>
> ), county_name = c("Cumberland County", "Delaware County", "San Francisco
> County",
>
> "Allegheny County", "Concho County", "Los Angeles County"), fips = c(23005L,
>
> 39041L, 6075L, 42003L, 48095L, 6037L), state_name = c("Maine",
>
> "Ohio", "California", "Pennsylvania", "Texas", "California"),
>
> state_abb = c("ME", "OH", "CA", "PA", "TX", "CA"), urban_level = c("Medium
> Metro",
>
> "Large Fringe Metro", "Large Central Metro", "Large Central Metro",
>
> "NonCore (Nonmetro)", "Large Central Metro"), urban_code = c(3L,
>
> 2L, 1L, 1L, 6L, 1L), population = c(277308L, 184029L, 830781L,
>
> 1160433L, 4160L, 9509611L)), class = c("data.table", "data.frame"
>
> ), row.names = c(NA, -6L), .internal.selfref = )
>
>
> I also have a number of search terms in the following form:
>
>
> st <- structure(list(terms = c("me abused depressed", "me hurt depressed",
>
> "feel hopeless depressed", "feel alone depressed", "i feel helpless",
>
> "i feel worthless")), row.names = c(NA, -6L), class = c("tbl_df",
>
> "tbl", "data.frame?))
>
>
> I am trying to isolate the tweets that contain all of the words in each of
> the search terms, i.e ?me? ?abused? and ?depressed? from the first example
> search term, but they do not have to be in order or even next to one
> another.
>
>
> I am familiar with the dplyr suite of tools and have been attempting to
> generate some sort of ?filter()? to do this. I am not very familiar with
> purrr, but there may be a solution using the map function? I have also
> explored the tidytext ?unnest_tokens? function which transforms the ?th?
> data in the following way:
>
>
> > tidytext::unnest_tokens(th, word, text, token = "tweets") -> tt
>
> > head(tt)
>
> status_id created_at lat lng
>
> 1: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>
> 2: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>
> 3: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>
> 4: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>
> 5: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>
> 6: x1047841705729306624 2018-10-04T13:31:45Z 43.68359 -70.32841
>
> county_name fips state_name state_abb urban_level urban_code
>
> 1: Cumberland County 23005 Maine ME Medium Metro 3
>
> 2: Cumberland County 23005 Maine ME Medium Metro 3
>
> 3: Cumberland County 23005 Maine ME Medium Metro 3
>
> 4: Cumberland County 23005 Maine ME Medium Metro 3
>
> 5: Cumberland County 23005 Maine ME Medium Metro 3
>
> 6: Cumberland County 23005 Maine ME Medium Metro 3
>
> population word
>
> 1: 277308 technique
>
> 2: 277308 is
>
> 3: 277308 everything
>
> 4: 277308 with
>
> 5: 277308 olympic
>
> 6: 277308 lifts
>
>
> but once I have unnested the tokens, I am unable to recombine them back
> into tweets.
>
>
> Ideally the end result would append a new column to the ?th? data that
> would flag a tweet that contained all of the search words for any of the
> search terms; so the work flow would look like
>
> 1) look for all search words for one search term in a tweet
>
> 2) if all of the search words in the search term are found, create a flag
> (mutate(flag = 1) or some such)
>
> 3) do this for all of the tweets
>
> 4) move on the next search term and repeat
>
>
> Again, my thanks for your patience.
>
>
> --
>
>
> Nate Parsons
>
> Pronouns: He, Him, His
>
> Graduate Teaching Assistant
>
> Department of Sociology
>
> Portland State University
>
> Portland, Oregon
>
>
> 503-725-9025
>
> 503-725-3957 FAX
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



From |n|ojomy @end|ng |rom gm@||@com  Fri Oct 19 15:48:18 2018
From: |n|ojomy @end|ng |rom gm@||@com (Jomy Jose)
Date: Fri, 19 Oct 2018 19:18:18 +0530
Subject: [R] Importing SAS datasets into R efficiently
Message-ID: <CADGufDGv8Os=svtvchTqutRbBM1XEYipBXsKNbVHpO3JA1iqCA@mail.gmail.com>

Hi

Is there an efficient way to import SAS datasets into R,presently while
using haven package it takes long time...Is there a smart work around this ?

Thanks in advance
Jose

	[[alternative HTML version deleted]]



From bgunter@4567 @end|ng |rom gm@||@com  Fri Oct 19 16:41:31 2018
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 19 Oct 2018 07:41:31 -0700
Subject: [R] Importing SAS datasets into R efficiently
In-Reply-To: <CADGufDGv8Os=svtvchTqutRbBM1XEYipBXsKNbVHpO3JA1iqCA@mail.gmail.com>
References: <CADGufDGv8Os=svtvchTqutRbBM1XEYipBXsKNbVHpO3JA1iqCA@mail.gmail.com>
Message-ID: <CAGxFJbSLgHjsqsx+hJwfsnaFF3K3y_z72k0hOY7RX71g=uf30Q@mail.gmail.com>

Have you looked at the "foreign" package?

-- Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Oct 19, 2018 at 6:48 AM Jomy Jose <infojomy at gmail.com> wrote:

> Hi
>
> Is there an efficient way to import SAS datasets into R,presently while
> using haven package it takes long time...Is there a smart work around this
> ?
>
> Thanks in advance
> Jose
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From m@rc_@chw@rtz @end|ng |rom me@com  Fri Oct 19 17:05:52 2018
From: m@rc_@chw@rtz @end|ng |rom me@com (Marc Schwartz)
Date: Fri, 19 Oct 2018 11:05:52 -0400
Subject: [R] Importing SAS datasets into R efficiently
In-Reply-To: <CAGxFJbSLgHjsqsx+hJwfsnaFF3K3y_z72k0hOY7RX71g=uf30Q@mail.gmail.com>
References: <CADGufDGv8Os=svtvchTqutRbBM1XEYipBXsKNbVHpO3JA1iqCA@mail.gmail.com>
 <CAGxFJbSLgHjsqsx+hJwfsnaFF3K3y_z72k0hOY7RX71g=uf30Q@mail.gmail.com>
Message-ID: <0ABFA6F0-78EB-4115-B1CC-7FF670B0CE6C@me.com>

Hi,

'foreign' will only read SAS XPT files, not the proprietary BDAT files, which I presume is the case here.

I don't use 'haven', but it looks like the key functions are written in C/C++, which should be relatively efficient.

If you are having specific issues with particular files,  because they are rather large, and/or have some kind of complex structure, you might want to communicate directly with the haven maintainers to see if there are some performance bottlenecks that perhaps they can resolve.

The only other option, to my knowledge, to directly read BDAT files in R, is the sas7bdat package on CRAN:

  https://cran.r-project.org/web/packages/sas7bdat/ <https://cran.r-project.org/web/packages/sas7bdat/>

However, it looks like it has not been updated in several years, so not sure of status.

Another alternative, if you have access to SAS, is to export the BDAT datasets(s) to CSV files in SAS, and them import them into R, using read.csv().

Regards,

Marc Schwartz


> On Oct 19, 2018, at 10:41 AM, Bert Gunter <bgunter.4567 at gmail.com> wrote:
> 
> Have you looked at the "foreign" package?
> 
> -- Bert
> 
> Bert Gunter
> 
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> 
> 
> On Fri, Oct 19, 2018 at 6:48 AM Jomy Jose <infojomy at gmail.com> wrote:
> 
>> Hi
>> 
>> Is there an efficient way to import SAS datasets into R,presently while
>> using haven package it takes long time...Is there a smart work around this
>> ?
>> 
>> Thanks in advance
>> Jose


	[[alternative HTML version deleted]]



From kev|n@thorpe @end|ng |rom utoronto@c@  Fri Oct 19 18:32:26 2018
From: kev|n@thorpe @end|ng |rom utoronto@c@ (Kevin Thorpe)
Date: Fri, 19 Oct 2018 16:32:26 +0000
Subject: [R] Importing SAS datasets into R efficiently
In-Reply-To: <YTXPR01MB03510F5A301A22F45EB5DF3A95F90@YTXPR01MB0351.CANPRD01.PROD.OUTLOOK.COM>
References: <CADGufDGv8Os=svtvchTqutRbBM1XEYipBXsKNbVHpO3JA1iqCA@mail.gmail.com>
 <CAGxFJbSLgHjsqsx+hJwfsnaFF3K3y_z72k0hOY7RX71g=uf30Q@mail.gmail.com>,
 <0ABFA6F0-78EB-4115-B1CC-7FF670B0CE6C@me.com>,
 <YTXPR01MB03510F5A301A22F45EB5DF3A95F90@YTXPR01MB0351.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <YTXPR01MB035115F64F29CFA03EBB3C5395F90@YTXPR01MB0351.CANPRD01.PROD.OUTLOOK.COM>

For some reason, the mailing list got dropped from my reply below.


  
 
--
 Kevin E. Thorpe
 Head of Biostatistics,? Applied Health Research Centre (AHRC)
 Li Ka Shing Knowledge Institute of St. Michael's
 Assistant Professor, Dalla Lana School of Public Health
 University of Toronto
 email: kevin.thorpe at utoronto.ca? Tel: 416.864.5776? Fax: 416.864.3016
 
     



From: Kevin Thorpe
Sent: Friday, October 19, 2018 12:30 PM
To: Bert Gunter; Marc Schwartz
Subject: Re: [R] Importing SAS datasets into R efficiently
? 

Related to Marc's suggestion, if you have SAS on the same computer as R, try the sas.get function in the Hmisc package.

I know it doesn't help you, but I have not had speed issues with haven.

Kevin
? 
?
--
?Kevin E. Thorpe
?Head of Biostatistics,? Applied Health Research Centre (AHRC)
?Li Ka Shing Knowledge Institute of St. Michael's
?Assistant Professor, Dalla Lana School of Public Health
?University of Toronto
?email: kevin.thorpe at utoronto.ca? Tel: 416.864.5776? Fax: 416.864.3016
?
???? 



From: R-help <r-help-bounces at r-project.org> on behalf of Marc Schwartz via R-help <r-help at r-project.org>
Sent: Friday, October 19, 2018 11:05 AM
To: Bert Gunter
Cc: R-help
Subject: Re: [R] Importing SAS datasets into R efficiently
? 

Hi,

'foreign' will only read SAS XPT files, not the proprietary BDAT files, which I presume is the case here.

I don't use 'haven', but it looks like the key functions are written in C/C++, which should be relatively efficient.

If you are having specific issues with particular files,? because they are rather large, and/or have some kind of complex structure, you might want to communicate directly with the haven maintainers to see if there are some performance bottlenecks that perhaps?  they can resolve.

The only other option, to my knowledge, to directly read BDAT files in R, is the sas7bdat package on CRAN:

? https://cran.r-project.org/web/packages/sas7bdat/ <https://cran.r-project.org/web/packages/sas7bdat/>


CRAN - Package sas7bdat
cran.r-project.org
sas7bdat: SAS Database Reader (experimental) Read SAS files in the sas7bdat data format.


CRAN - Package sas7bdat
cran.r-project.org
sas7bdat: SAS Database Reader (experimental) Read SAS files in the sas7bdat data format.

However, it looks like it has not been updated in several years, so not sure of status.

Another alternative, if you have access to SAS, is to export the BDAT datasets(s) to CSV files in SAS, and them import them into R, using read.csv().

Regards,

Marc Schwartz


> On Oct 19, 2018, at 10:41 AM, Bert Gunter <bgunter.4567 at gmail.com> wrote:
> 
> Have you looked at the "foreign" package?
> 
> -- Bert
> 
> Bert Gunter
> 
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> 
> 
> On Fri, Oct 19, 2018 at 6:48 AM Jomy Jose <infojomy at gmail.com> wrote:
> 
>> Hi
>> 
>> Is there an efficient way to import SAS datasets into R,presently while
>> using haven package it takes long time...Is there a smart work around this
>> ?
>> 
>> Thanks in advance
>> Jose


??????? [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide?  http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.
???     


From DSm|th @end|ng |rom mednet@uc|@@edu  Fri Oct 19 23:57:50 2018
From: DSm|th @end|ng |rom mednet@uc|@@edu (Smith, Desmond)
Date: Fri, 19 Oct 2018 21:57:50 +0000
Subject: [R] Fixed effects in negative binomial mixed model mgcv::gam
Message-ID: <5B892337-D798-4071-B86B-CF01D98BEEEE@contoso.com>

I am using gam from the mgcv package to analyze a dataset with 24 entries :

ran  f1     f2   y
1   3000    5   545
1   3000    10  1045
1   10000   5   536
1   10000   10  770
2   3000    5   842
2   3000    10  2042
2   10000   5   615
2   10000   10  1361
3   3000    5   328
3   3000    10  1028
3   10000   5   262
3   10000   10  722
4   3000    5   349
4   3000    10  665
4   10000   5   255
4   10000   10  470
5   3000    5   680
5   3000    10  1510
5   10000   5   499
5   10000   10  1422
6   3000    5   628
6   3000    10  2062
6   10000   5   499
6   10000   10  2158

The data has two fixed effects (f1 and f2) and one random effect (ran). The dependent data is y. Because the dependent data y represents counts and is overdispersed, I am using a negative binomial model.

The gam model and its summary output is as follows:

library(mgcv)
summary(gam(y ~ f1 * f2 + s(ran, bs = "re"), data = df2, family = nb, method = "REML"))

Family: Negative Binomial(27.376)
Link function: log

Formula:
y ~ f1 * f2 + s(ran, bs = "re")

Parametric coefficients:
              Estimate Std. Error z value Pr(>|z|)
(Intercept)  5.500e+00  3.137e-01  17.533  < 2e-16 ***
f1          -3.421e-05  3.619e-05  -0.945    0.345
f2           1.760e-01  3.355e-02   5.247 1.55e-07 ***
f1:f2        2.665e-07  4.554e-06   0.059    0.953
---
Signif. codes:  0 ?***? 0.001 ?**? 0.01 ?*? 0.05 ?.? 0.1 ? ? 1

Approximate significance of smooth terms:
         edf Ref.df Chi.sq p-value
s(ran) 4.726      5  85.66  <2e-16 ***
---
Signif. codes:  0 ?***? 0.001 ?**? 0.01 ?*? 0.05 ?.? 0.1 ? ? 1

R-sq.(adj) =  0.866   Deviance explained = 93.6%
-REML = 185.96  Scale est. = 1         n = 24

The Wald test from summary gives very high significance for f2 (P = 1.55e-07). However, when I test the significance of f2 by comparing two different models using anova, I get dramatically different results:

anova(gam(y ~ f1 * f2 + s(ran, bs = "re"), data = df2, family = nb, method = "ML"),
gam(y ~ f1 + s(ran, bs = "re"), data = df2, family = nb, method = "ML"),
test="Chisq")

Analysis of Deviance Table

Model 1: y ~ f1 * f2 + s(ran, bs = "re")
Model 2: y ~ f1 + s(ran, bs = "re")
  Resid. Df Resid. Dev      Df Deviance Pr(>Chi)
1    14.843     18.340
2    16.652     21.529 -1.8091   -3.188   0.1752

f2 is no longer significant. The models were changed from REML to ML, as recommended for evaluation of fixed effects.

If the interaction is preserved, f2 still remains insignificant using anova:

anova(gam(y ~ f1 + f2 + f1:f2 + s(ran, bs = "re"), data = df2, family = nb, method = "ML"),
gam(y ~ f1 + f1:f2 + s(ran, bs = "re"), data = df2, family = nb, method = "ML"),
test="Chisq")
Analysis of Deviance Table

Model 1: y ~ f1 + f2 + f1:f2 + s(ran, bs = "re")
Model 2: y ~ f1 + f1:f2 + s(ran, bs = "re")
  Resid. Df Resid. Dev       Df Deviance Pr(>Chi)
1    14.843     18.340
2    15.645     19.194 -0.80159 -0.85391   0.2855

I would be very grateful for advice on which of these approaches is most appropriate. Many thanks!

________________________________

UCLA HEALTH SCIENCES IMPORTANT WARNING: This email (and any attachments) is only intended for the use of the person or entity to which it is addressed, and may contain information that is privileged and confidential. You, the recipient, are obligated to maintain it in a safe, secure and confidential manner. Unauthorized redisclosure or failure to maintain confidentiality may subject you to federal and state penalties. If you are not the intended recipient, please immediately notify us by return email, and delete this message from your computer.

	[[alternative HTML version deleted]]


From y@@@@_m@||k@ @end|ng |rom y@hoo@|r  Sat Oct 20 14:45:13 2018
From: y@@@@_m@||k@ @end|ng |rom y@hoo@|r (malika yassa)
Date: Sat, 20 Oct 2018 12:45:13 +0000 (UTC)
Subject: [R] (no subject)
References: <1576907437.20119739.1540039513212.ref@mail.yahoo.com>
Message-ID: <1576907437.20119739.1540039513212@mail.yahoo.com>

hellowplease,do you help mei have this matrixm<-matrix(( 1:12, nrow = 3 )

I want to delete the diagonal values of this matrix
can anyone do thisthinks 


	[[alternative HTML version deleted]]



From y@@@@_m@||k@ @end|ng |rom y@hoo@|r  Sat Oct 20 15:04:01 2018
From: y@@@@_m@||k@ @end|ng |rom y@hoo@|r (malika yassa)
Date: Sat, 20 Oct 2018 13:04:01 +0000 (UTC)
Subject: [R] (no subject)
References: <946067094.20140946.1540040641893.ref@mail.yahoo.com>
Message-ID: <946067094.20140946.1540040641893@mail.yahoo.com>

hello
please you help mei have this functionx<-rnorm(10,0,1)f<-fuction(u,x)? {exp((x-u)}I want to calculate the integral of this function for each value of x{for(i in 1:lenght(x)
integrate(f,lower=1,upper=4) 

}but I can not find the vector of resulatwhere is the errorthinks

	[[alternative HTML version deleted]]



From jerem|eju@te @end|ng |rom gm@||@com  Sat Oct 20 15:21:50 2018
From: jerem|eju@te @end|ng |rom gm@||@com (Jeremie Juste)
Date: Sat, 20 Oct 2018 15:21:50 +0200
Subject: [R] (no subject)
In-Reply-To: <1576907437.20119739.1540039513212@mail.yahoo.com> (malika yassa
 via R-help's message of "Sat, 20 Oct 2018 12:45:13 +0000 (UTC)")
References: <1576907437.20119739.1540039513212.ref@mail.yahoo.com>
 <1576907437.20119739.1540039513212@mail.yahoo.com>
Message-ID: <87o9bo3g9d.fsf@gmail.com>

malika yassa via R-help <r-help at r-project.org> writes:

Hello,

Can you specify what you mean by deleting exactly?
Do you want to have zero in the diagonal or do you want to extract the
non-diagonal part?

Besides your matrix is not a square matrix. Do you really want to
extract the non-diagonal part of a non square matrix?


Best regards,

Jeremie






> hellowplease,do you help mei have this matrixm<-matrix(( 1:12, nrow = 3 )
>
> I want to delete the diagonal values of this matrix
> can anyone do thisthinks 
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



From jerem|eju@te @end|ng |rom gm@||@com  Sat Oct 20 17:48:39 2018
From: jerem|eju@te @end|ng |rom gm@||@com (Jeremie Juste)
Date: Sat, 20 Oct 2018 17:48:39 +0200
Subject: [R] (no subject)
In-Reply-To: <1253569924.20198431.1540046871532@mail.yahoo.com> (malika
 yassa's message of "Sat, 20 Oct 2018 14:47:51 +0000 (UTC)")
References: <1576907437.20119739.1540039513212.ref@mail.yahoo.com>
 <1576907437.20119739.1540039513212@mail.yahoo.com>
 <87o9bo3g9d.fsf@gmail.com>
 <1253569924.20198431.1540046871532@mail.yahoo.com>
Message-ID: <87d0s439go.fsf@gmail.com>



Hello,

Be sure to include the mailing list,<r-help at r-project.org> when you
reply. In this way to improve your chances of obtaining a good answer
and everyone benefits. 


May be something like this ?

aa <- matrix(1:9,3,3)
matrix(as.numeric(aa)[!as.numeric(aa) %in% diag(aa)],2,3)

     [,1] [,2] [,3]
[1,]    2    4    7
[2,]    3    6    8

Hope it helps,

Jeremie

malika yassa <yassa_malika at yahoo.fr> writes:

>  hellow
> yes i want to extract the non-diagonal part 
> for exampl
> i have this matrix? [,1] [,2] [,3]
> [1,]??? 1??? 4??? 7
> [2,]??? 2??? 5??? 8
> [3,]??? 3??? 6??? 9the result 
>
> ? [,1] [,2] [,3]
> [1,]??? 2??? 4??? 7
> [2,]??? 3??? 6??? 8
>
>     Le samedi 20 octobre 2018 ? 15:21:53 UTC+2, Jeremie Juste <jeremiejuste at gmail.com> a ?crit :  
>
>  malika yassa via R-help <r-help at r-project.org> writes:
>
> Hello,
>
> Can you specify what you mean by deleting exactly?
> Do you want to have zero in the diagonal or do you want to extract the
> non-diagonal part?
>
> Besides your matrix is not a square matrix. Do you really want to
> extract the non-diagonal part of a non square matrix?
>
> Best regards,
>
> Jeremie
>
>> hellowplease,do you help mei have this matrixm<-matrix(( 1:12, nrow = 3 )
>>
>> I want to delete the diagonal values of this matrix
>> can anyone do thisthinks 
>>
>> ??? [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.



From bgunter@4567 @end|ng |rom gm@||@com  Sat Oct 20 19:12:13 2018
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 20 Oct 2018 10:12:13 -0700
Subject: [R] (no subject)
In-Reply-To: <87d0s439go.fsf@gmail.com>
References: <1576907437.20119739.1540039513212.ref@mail.yahoo.com>
 <1576907437.20119739.1540039513212@mail.yahoo.com> <87o9bo3g9d.fsf@gmail.com>
 <1253569924.20198431.1540046871532@mail.yahoo.com> <87d0s439go.fsf@gmail.com>
Message-ID: <CAGxFJbTq7JWcWtnY+nAhCqsmCQm6qmP4ERrbTRzReBhowTAbBA@mail.gmail.com>

Jeremie's suggestion of course will fail if some of the off-diagonal
elements are the same as those on the diagonals.

The request doesn't make a lot of sense to me, but if "m" is the matrix,

 m[row(z) != col(z)]

reliably extracts the vector of non-diagonal entries, which can then be
dimensioned as desired.
Or upper.tri() and lower.tri() can be used to separately extract the upper
and lower triangle entries via logical indexing.

Cheers,
Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sat, Oct 20, 2018 at 8:48 AM Jeremie Juste <jeremiejuste at gmail.com>
wrote:

>
>
> Hello,
>
> Be sure to include the mailing list,<r-help at r-project.org> when you
> reply. In this way to improve your chances of obtaining a good answer
> and everyone benefits.
>
>
> May be something like this ?
>
> aa <- matrix(1:9,3,3)
> matrix(as.numeric(aa)[!as.numeric(aa) %in% diag(aa)],2,3)
>
>      [,1] [,2] [,3]
> [1,]    2    4    7
> [2,]    3    6    8
>
> Hope it helps,
>
> Jeremie
>
> malika yassa <yassa_malika at yahoo.fr> writes:
>
> >  hellow
> > yes i want to extract the non-diagonal part
> > for exampl
> > i have this matrix  [,1] [,2] [,3]
> > [1,]    1    4    7
> > [2,]    2    5    8
> > [3,]    3    6    9the result
> >
> >   [,1] [,2] [,3]
> > [1,]    2    4    7
> > [2,]    3    6    8
> >
> >     Le samedi 20 octobre 2018 ? 15:21:53 UTC+2, Jeremie Juste <
> jeremiejuste at gmail.com> a ?crit :
> >
> >  malika yassa via R-help <r-help at r-project.org> writes:
> >
> > Hello,
> >
> > Can you specify what you mean by deleting exactly?
> > Do you want to have zero in the diagonal or do you want to extract the
> > non-diagonal part?
> >
> > Besides your matrix is not a square matrix. Do you really want to
> > extract the non-diagonal part of a non square matrix?
> >
> > Best regards,
> >
> > Jeremie
> >
> >> hellowplease,do you help mei have this matrixm<-matrix(( 1:12, nrow = 3
> )
> >>
> >> I want to delete the diagonal values of this matrix
> >> can anyone do thisthinks
> >>
> >>     [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From meen@m@u @end|ng |rom y@hoo@com  Sat Oct 20 20:06:27 2018
From: meen@m@u @end|ng |rom y@hoo@com (MEENA SUBRAMANIAN)
Date: Sat, 20 Oct 2018 18:06:27 +0000 (UTC)
Subject: [R] Need to understand how to troubleshoot below error
References: <2093278728.661318.1540058787846.ref@mail.yahoo.com>
Message-ID: <2093278728.661318.1540058787846@mail.yahoo.com>

Hi?
Im unable to write or save my R studio files?
Below error is thrown when the same code works for others
Error in file(file, ifelse(append, "a", "w")) :?? cannot open the connectionIn addition: Warning message:In file(file, ifelse(append, "a", "w")) :? cannot open file 'housedatacomplete.csv': No such file or directory

Meena?
	[[alternative HTML version deleted]]



From jho|tm@n @end|ng |rom gm@||@com  Sun Oct 21 00:08:28 2018
From: jho|tm@n @end|ng |rom gm@||@com (jim holtman)
Date: Sat, 20 Oct 2018 15:08:28 -0700
Subject: [R] Need to understand how to troubleshoot below error
In-Reply-To: <2093278728.661318.1540058787846@mail.yahoo.com>
References: <2093278728.661318.1540058787846.ref@mail.yahoo.com>
 <2093278728.661318.1540058787846@mail.yahoo.com>
Message-ID: <CAAxdm-7AGDBz1NSzJfjnpMSP71p9UzwPqMmZ=KEhPRu+ED00Xw@mail.gmail.com>

Can you show the code that was being executed at the time.  Have you
verified that the path to the file is correct for the directory that you
are using?  Have you validated that you have the correct permissions in the
directory to create the file?  Show the complete path length that you were
using and then follow that path to make sure that there is a directory
there that you can write into.

Jim Holtman
*Data Munger Guru*


*What is the problem that you are trying to solve?Tell me what you want to
do, not how you want to do it.*


On Sat, Oct 20, 2018 at 1:19 PM MEENA SUBRAMANIAN via R-help <
r-help at r-project.org> wrote:

> Hi
> Im unable to write or save my R studio files
> Below error is thrown when the same code works for others
> Error in file(file, ifelse(append, "a", "w")) :   cannot open the
> connectionIn addition: Warning message:In file(file, ifelse(append, "a",
> "w")) :  cannot open file 'housedatacomplete.csv': No such file or directory
>
> Meena
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Oct 21 01:19:47 2018
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 20 Oct 2018 16:19:47 -0700
Subject: [R] Need to understand how to troubleshoot below error
In-Reply-To: <CAAxdm-7AGDBz1NSzJfjnpMSP71p9UzwPqMmZ=KEhPRu+ED00Xw@mail.gmail.com>
References: <2093278728.661318.1540058787846.ref@mail.yahoo.com>
 <2093278728.661318.1540058787846@mail.yahoo.com>
 <CAAxdm-7AGDBz1NSzJfjnpMSP71p9UzwPqMmZ=KEhPRu+ED00Xw@mail.gmail.com>
Message-ID: <C0200CD8-02D6-4ABD-A160-FDAA3BD6EA17@dcn.davis.ca.us>

When you specify a filename such as 'housedatacomplete.csv' which has no directory path information, the file is assumed to be in the "current directory" which you can identify using the status notation at the top of the RStudio console window or using the R getwd() function. Note that we may guess something about what may be wrong if you provide that information in your request here, but it is more likely that you will need to use the operating system to investigate permissions which are really off-topic here. Your best bet will be to find a local computer tech or sysadmin to help you solve your mystery, since there can be many special configurations we on the mailing list won't know about.

One note: since you are using RStudio, be sure to create a Project directory/file and do your work with a project open. That way most problems with permissions and working in the wrong directory should usually be avoided. If you cannot create a project then you definitely need local help.

On October 20, 2018 3:08:28 PM PDT, jim holtman <jholtman at gmail.com> wrote:
>Can you show the code that was being executed at the time.  Have you
>verified that the path to the file is correct for the directory that
>you
>are using?  Have you validated that you have the correct permissions in
>the
>directory to create the file?  Show the complete path length that you
>were
>using and then follow that path to make sure that there is a directory
>there that you can write into.
>
>Jim Holtman
>*Data Munger Guru*
>
>
>*What is the problem that you are trying to solve?Tell me what you want
>to
>do, not how you want to do it.*
>
>
>On Sat, Oct 20, 2018 at 1:19 PM MEENA SUBRAMANIAN via R-help <
>r-help at r-project.org> wrote:
>
>> Hi
>> Im unable to write or save my R studio files
>> Below error is thrown when the same code works for others
>> Error in file(file, ifelse(append, "a", "w")) :   cannot open the
>> connectionIn addition: Warning message:In file(file, ifelse(append,
>"a",
>> "w")) :  cannot open file 'housedatacomplete.csv': No such file or
>directory
>>
>> Meena
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.



From j@y@@hreer@m@n @end|ng |rom berke|ey@edu  Sun Oct 21 03:08:04 2018
From: j@y@@hreer@m@n @end|ng |rom berke|ey@edu (Jayashree Raman)
Date: Sat, 20 Oct 2018 18:08:04 -0700
Subject: [R] fixef.plm: Extract the Fixed Effects
Message-ID: <CACH37SFRvGPNtp2G7QuvJx5ki+YFtyf+8zk0R9Dm7_LCNp9Q1w@mail.gmail.com>

Hello,

I am trying to predict using a fixed effects model on an unbalanced
panel. I tried using the code in the example but the fitted values I
get are very different from the fitted values using observed value -
residual. I am giving my code  snippet here:

train_data <- na.omit(read.csv(file="usersessions-with-char-sec-train-subset-100.csv",
header=TRUE, row.names = NULL, sep="|"))

panel.data.train <- plm.data(train_data, index = c("session_start","userid"))

mdl_fe <-plm(session_length~age+session_length_mvavg, data =
panel.data.train, model = "within")

##Summaries
summary(mdl_fe)
fixefs <- fixef(mdl_fe)[index(mdl_fe, which = "userid")]
fit_hand <- fixefs + mdl_fe$coefficients[1] * panel.data.train$age +
mdl_fe$coefficients[2] * panel.data.train$session_length_mvavg
fitval <- panel.data.train$session_length-mdl_fe$residuals

Also when I tried the prediction function from the prediction package,
I get the following error:
Error in crossprod(beta, t(X)) : non-conformable arguments

Any help is appreciated.

Thanks!
Jayashree



From |r@|uch@ @end|ng |rom gm@||@com  Sun Oct 21 05:12:01 2018
From: |r@|uch@ @end|ng |rom gm@||@com (Fuchs Ira)
Date: Sat, 20 Oct 2018 23:12:01 -0400
Subject: [R] studio server on High SIerra
Message-ID: <2A362557-2CE9-4BD4-AD0D-5B83ED16AC82@gmail.com>

Can I run Rstudio Server on OSX 10.13 (High Sierra). If so, can someone
please point me to install directions? I found an old post that talks about
using homebrew but I can't find the rstudio-server brew to install.



From bgunter@4567 @end|ng |rom gm@||@com  Sun Oct 21 06:01:47 2018
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 20 Oct 2018 21:01:47 -0700
Subject: [R] studio server on High SIerra
In-Reply-To: <2A362557-2CE9-4BD4-AD0D-5B83ED16AC82@gmail.com>
References: <2A362557-2CE9-4BD4-AD0D-5B83ED16AC82@gmail.com>
Message-ID: <CAGxFJbRzJzmx5jfjSks2ysmO2GJ3+eAcu3OKA759Y0DfGRNNJA@mail.gmail.com>

RStudio is a separate product from R. Post on the RStudio site, not R-help.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sat, Oct 20, 2018 at 8:12 PM Fuchs Ira <irafuchs at gmail.com> wrote:

> Can I run Rstudio Server on OSX 10.13 (High Sierra). If so, can someone
> please point me to install directions? I found an old post that talks about
> using homebrew but I can't find the rstudio-server brew to install.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Oct 21 06:20:15 2018
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 20 Oct 2018 21:20:15 -0700
Subject: [R] studio server on High SIerra
In-Reply-To: <CAGxFJbRzJzmx5jfjSks2ysmO2GJ3+eAcu3OKA759Y0DfGRNNJA@mail.gmail.com>
References: <2A362557-2CE9-4BD4-AD0D-5B83ED16AC82@gmail.com>
 <CAGxFJbRzJzmx5jfjSks2ysmO2GJ3+eAcu3OKA759Y0DfGRNNJA@mail.gmail.com>
Message-ID: <C1EC7268-2BD9-4951-8B19-F7A8CEBBA429@dcn.davis.ca.us>

There may be certain advantages to installing R via homebrew, but I wouldn't know... I don't use Mac OS. I suspect your easiest route would be to install via the method recommended on CRAN [1], and if you need more help getting R working then there is the R-sig-mac mailing list [2] for OS specific questions.

RStudio requires that you install R first, but as Bert points out this is not the support area for RStudio. The appropriate topics for this mailing list are described in the Posting Guide [3]. Note for future reference that when you send your email formatted as HTML what we see is a garbled version of what you sent, so in the future look for the plain-text setting in your email program when sending email to this list.

[1] https://cran.r-project.org/bin/macosx/
[2] https://stat.ethz.ch/mailman/listinfo/r-sig-mac
[3] See footer of this or any email from the list.

On October 20, 2018 9:01:47 PM PDT, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>RStudio is a separate product from R. Post on the RStudio site, not
>R-help.
>
>Bert Gunter
>
>"The trouble with having an open mind is that people keep coming along
>and
>sticking things into it."
>-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
>On Sat, Oct 20, 2018 at 8:12 PM Fuchs Ira <irafuchs at gmail.com> wrote:
>
>> Can I run Rstudio Server on OSX 10.13 (High Sierra). If so, can
>someone
>> please point me to install directions? I found an old post that talks
>about
>> using homebrew but I can't find the rstudio-server brew to install.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.



From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Oct 21 06:38:25 2018
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 20 Oct 2018 21:38:25 -0700
Subject: [R] Need to understand how to troubleshoot below error
In-Reply-To: <764671844.772135.1540092611866@mail.yahoo.com>
References: <2093278728.661318.1540058787846.ref@mail.yahoo.com>
 <2093278728.661318.1540058787846@mail.yahoo.com>
 <CAAxdm-7AGDBz1NSzJfjnpMSP71p9UzwPqMmZ=KEhPRu+ED00Xw@mail.gmail.com>
 <C0200CD8-02D6-4ABD-A160-FDAA3BD6EA17@dcn.davis.ca.us>
 <764671844.772135.1540092611866@mail.yahoo.com>
Message-ID: <594418AC-6E2B-4F74-B784-B3F13402BEDE@dcn.davis.ca.us>

This looks like a case where some local tech assistance from someone familiar with Windows permissions settings would be appropriate. You may have erroneously installed R using "As Administrator" privileges, which can not only make it difficult to do anything useful but it can be difficult to completely reverse the permissions damage that has already been done. I suggest you remove R completely and in addition remove the user library directory located at C:\\Users\\Vidyut\\Documents\\R or  C:\\Users\\Vidyut\\R. This may require working in As Administrator mode to succeed, which is why some local tech support might be advisable, particularly if my diagnosis is wrong.

Once R is completely eradicated you should be able to install R as a normal user and give permission to install only when prompted, and avoid using As Administrator mode in the future.


On October 20, 2018 8:30:11 PM PDT, MEENA SUBRAMANIAN <meenamsu at yahoo.com> wrote:
> Hi Jeff,
>im a new learner to R an I am trying to execute the below and my files
>get created except for the last function write.csv(housedata, file
>="housedatacomplete.csv")write where my new file housedatacomplete.csv
>does not get created and no write command works for me. Also I am
>unable to save any files.
>
>
>
>setwd("C:\\Users\\Vidyut\\Desktop\\I2R")
>
>
>
>getwd()
>
>
>
>housesalesdata<-read.csv("housesalesdata.csv")
>
>
>
>housefeaturesdata<-read.csv("housefeaturesdata.csv")
>
>
>
>housedata<-merge(housesalesdata,housefeaturesdata,by="ID")
>
>
>
>write.csv(housedata, file ="housedatacomplete.csv")
>
>
>
>Thanks?
>
>Meena?
>
>
>
>On ?Sunday?, ?21? ?October? ?2018? ?04?:?49?:?49? ?AM? ?IST, Jeff
>Newmiller <jdnewmil at dcn.davis.ca.us> wrote:  
> 
>When you specify a filename such as 'housedatacomplete.csv' which has
>no directory path information, the file is assumed to be in the
>"current directory" which you can identify using the status notation at
>the top of the RStudio console window or using the R getwd() function.
>Note that we may guess something about what may be wrong if you provide
>that information in your request here, but it is more likely that you
>will need to use the operating system to investigate permissions which
>are really off-topic here. Your best bet will be to find a local
>computer tech or sysadmin to help you solve your mystery, since there
>can be many special configurations we on the mailing list won't know
>about.
>
>One note: since you are using RStudio, be sure to create a Project
>directory/file and do your work with a project open. That way most
>problems with permissions and working in the wrong directory should
>usually be avoided. If you cannot create a project then you definitely
>need local help.
>
>On October 20, 2018 3:08:28 PM PDT, jim holtman <jholtman at gmail.com>
>wrote:
>>Can you show the code that was being executed at the time.? Have you
>>verified that the path to the file is correct for the directory that
>>you
>>are using?? Have you validated that you have the correct permissions
>in
>>the
>>directory to create the file?? Show the complete path length that you
>>were
>>using and then follow that path to make sure that there is a directory
>>there that you can write into.
>>
>>Jim Holtman
>>*Data Munger Guru*
>>
>>
>>*What is the problem that you are trying to solve?Tell me what you
>want
>>to
>>do, not how you want to do it.*
>>
>>
>>On Sat, Oct 20, 2018 at 1:19 PM MEENA SUBRAMANIAN via R-help <
>>r-help at r-project.org> wrote:
>>
>>> Hi
>>> Im unable to write or save my R studio files
>>> Below error is thrown when the same code works for others
>>> Error in file(file, ifelse(append, "a", "w")) :? cannot open the
>>> connectionIn addition: Warning message:In file(file, ifelse(append,
>>"a",
>>> "w")) :? cannot open file 'housedatacomplete.csv': No such file or
>>directory
>>>
>>> Meena
>>>? ? ? ? [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>>??? [[alternative HTML version deleted]]
>>
>>______________________________________________
>>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>https://stat.ethz.ch/mailman/listinfo/r-help
>>PLEASE do read the posting guide
>>http://www.R-project.org/posting-guide.html
>>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.



From meen@m@u @end|ng |rom y@hoo@com  Sun Oct 21 05:30:11 2018
From: meen@m@u @end|ng |rom y@hoo@com (MEENA SUBRAMANIAN)
Date: Sun, 21 Oct 2018 03:30:11 +0000 (UTC)
Subject: [R] Need to understand how to troubleshoot below error
In-Reply-To: <C0200CD8-02D6-4ABD-A160-FDAA3BD6EA17@dcn.davis.ca.us>
References: <2093278728.661318.1540058787846.ref@mail.yahoo.com>
 <2093278728.661318.1540058787846@mail.yahoo.com>
 <CAAxdm-7AGDBz1NSzJfjnpMSP71p9UzwPqMmZ=KEhPRu+ED00Xw@mail.gmail.com>
 <C0200CD8-02D6-4ABD-A160-FDAA3BD6EA17@dcn.davis.ca.us>
Message-ID: <764671844.772135.1540092611866@mail.yahoo.com>

 Hi Jeff,
im a new learner to R an I am trying to execute the below and my files get created except for the last function write.csv(housedata, file ="housedatacomplete.csv")write where my new file housedatacomplete.csv does not get created and no write command works for me. Also I am unable to save any files.



setwd("C:\\Users\\Vidyut\\Desktop\\I2R")



getwd()



housesalesdata<-read.csv("housesalesdata.csv")



housefeaturesdata<-read.csv("housefeaturesdata.csv")



housedata<-merge(housesalesdata,housefeaturesdata,by="ID")



write.csv(housedata, file ="housedatacomplete.csv")



Thanks?

Meena?



    On ?Sunday?, ?21? ?October? ?2018? ?04?:?49?:?49? ?AM? ?IST, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:  
 
 When you specify a filename such as 'housedatacomplete.csv' which has no directory path information, the file is assumed to be in the "current directory" which you can identify using the status notation at the top of the RStudio console window or using the R getwd() function. Note that we may guess something about what may be wrong if you provide that information in your request here, but it is more likely that you will need to use the operating system to investigate permissions which are really off-topic here. Your best bet will be to find a local computer tech or sysadmin to help you solve your mystery, since there can be many special configurations we on the mailing list won't know about.

One note: since you are using RStudio, be sure to create a Project directory/file and do your work with a project open. That way most problems with permissions and working in the wrong directory should usually be avoided. If you cannot create a project then you definitely need local help.

On October 20, 2018 3:08:28 PM PDT, jim holtman <jholtman at gmail.com> wrote:
>Can you show the code that was being executed at the time.? Have you
>verified that the path to the file is correct for the directory that
>you
>are using?? Have you validated that you have the correct permissions in
>the
>directory to create the file?? Show the complete path length that you
>were
>using and then follow that path to make sure that there is a directory
>there that you can write into.
>
>Jim Holtman
>*Data Munger Guru*
>
>
>*What is the problem that you are trying to solve?Tell me what you want
>to
>do, not how you want to do it.*
>
>
>On Sat, Oct 20, 2018 at 1:19 PM MEENA SUBRAMANIAN via R-help <
>r-help at r-project.org> wrote:
>
>> Hi
>> Im unable to write or save my R studio files
>> Below error is thrown when the same code works for others
>> Error in file(file, ifelse(append, "a", "w")) :? cannot open the
>> connectionIn addition: Warning message:In file(file, ifelse(append,
>"a",
>> "w")) :? cannot open file 'housedatacomplete.csv': No such file or
>directory
>>
>> Meena
>>? ? ? ? [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>??? [[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.  
	[[alternative HTML version deleted]]



From y@@@@_m@||k@ @end|ng |rom y@hoo@|r  Sun Oct 21 14:02:37 2018
From: y@@@@_m@||k@ @end|ng |rom y@hoo@|r (malika yassa)
Date: Sun, 21 Oct 2018 12:02:37 +0000 (UTC)
Subject: [R] integral of the fuction for each value
References: <1889549226.20566287.1540123357840.ref@mail.yahoo.com>
Message-ID: <1889549226.20566287.1540123357840@mail.yahoo.com>

hello
please you help me i have this functionx<-rnorm(10,0,1)f<-fuction(u,x)? {exp((x-u)}I want to calculate the integral of this function for each value of x{for(i in 1:lenght(x)integrate(f,lower=1,upper=4) 
thinks

	[[alternative HTML version deleted]]



From tobby @end|ng |rom htu@@t  Sun Oct 21 14:23:07 2018
From: tobby @end|ng |rom htu@@t (Tobias Fellinger)
Date: Sun, 21 Oct 2018 14:23:07 +0200
Subject: [R] integral of the fuction for each value
In-Reply-To: <1889549226.20566287.1540123357840@mail.yahoo.com>
References: <1889549226.20566287.1540123357840.ref@mail.yahoo.com>
 <1889549226.20566287.1540123357840@mail.yahoo.com>
Message-ID: <93eab8721bafd28c855a2eb7a71f63069144893d.camel@htu.at>

Hi, 

I'm not entirely sure what you want to calculate. 

If you want to integrate by u in the interval from 0 to 4 for every value
of x I would suggest something like this:

x <- rnorm(10,0,1)
f <- function(u,x){
  exp((x-u))
}

sapply(x, function(i){
  integrate(f,lower=1,upper=4, x=i)$value
})

You can just pass additional arguments to f to integrate, integrate always
integrates by the first argument of the function passed as its first
argument, see the help entry of integrate for more details.

Best Regards, Tobias

On Sun, 2018-10-21 at 12:02 +0000, malika yassa via R-help wrote:
> hello
> please you help me i have this functionx<-rnorm(10,0,1)f<-fuction(u,x)  {exp((x-u)}I want to calculate the integral of this function for each value of x{for(i in 1:lenght(x)integrate(f,lower=1,upper=4) 
> thinks
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



From m@rc_grt @end|ng |rom y@hoo@|r  Sun Oct 21 15:56:28 2018
From: m@rc_grt @end|ng |rom y@hoo@|r (Marc Girondot)
Date: Sun, 21 Oct 2018 15:56:28 +0200
Subject: [R] studio server on High SIerra
In-Reply-To: <2A362557-2CE9-4BD4-AD0D-5B83ED16AC82@gmail.com>
References: <2A362557-2CE9-4BD4-AD0D-5B83ED16AC82@gmail.com>
Message-ID: <6d6adf32-2308-53e8-3bd6-b381879f2e14@yahoo.fr>

I post long time ago a post on my blog about this:
https://max2.ese.u-psud.fr/epc/conservation/Girondot/Publications/Blog_r/Entrees/2014/8/3_Install_RStudio_server_on_Marverick_MacOSX.html

You could try using this base.

Marc

Le 21/10/2018 ? 05:12, Fuchs Ira a ?crit?:
> Can I run Rstudio Server on OSX 10.13 (High Sierra). If so, can someone
> please point me to install directions? I found an old post that talks about
> using homebrew but I can't find the rstudio-server brew to install.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>



From @tyen @end|ng |rom ntu@edu@tw  Sun Oct 21 20:46:34 2018
From: @tyen @end|ng |rom ntu@edu@tw (Steven Yen)
Date: Mon, 22 Oct 2018 02:46:34 +0800
Subject: [R] Polygon
In-Reply-To: <1f52a554-7c22-1127-471b-217da7f473a2@ntu.edu.tw>
References: <fcc9c821-50bf-7c7a-4e8f-e4859f7deb78@ntu.edu.tw>
 <0d7bc6e1-2d8e-f3f9-d685-2c1e5a001a20@sapo.pt>
 <9ac5812e-5539-9d6a-6396-a2ec225f257b@ntu.edu.tw>
 <EFF7563D-00B0-4DB8-BC1B-5B0A7FBBE113@comcast.net>
 <1f52a554-7c22-1127-471b-217da7f473a2@ntu.edu.tw>
Message-ID: <37254746-470b-6d9c-dd6c-73cdd58c58c2@ntu.edu.tw>

David, Rui, and All:
Greetings.
1. I need a helping hand with the polygon statement below so that I can 
have the area under the curve highlighted, between (z1,z2).
2. Is it possible to label the X-axis with in two scale, in the current 
z-scale and another, say x = (z+5)*2?
Thank you.

z1<- -1
z2<-? 2
curve(dnorm(x,0,1),xlim=c(-4,4),main="Standard 
Normal",xaxt="n",frame=F,xlab="z")
jj<-seq(z1,z2,0.01)
cord.x<-c(jj)
cord.y<-c(dnorm(jj))
#polygon(cord.x,cord.y,col="skyblue")
axis(1,at=c(-5,z1,0,z2,5),lab=c(-5,z1,0,z2,5))
abline(v=c(z1,z2))

-- 
styen at ntu.edu.tw (S.T. Yen)


	[[alternative HTML version deleted]]



From dc@r|@on @end|ng |rom t@mu@edu  Sun Oct 21 22:24:24 2018
From: dc@r|@on @end|ng |rom t@mu@edu (David L Carlson)
Date: Sun, 21 Oct 2018 20:24:24 +0000
Subject: [R] Polygon
In-Reply-To: <37254746-470b-6d9c-dd6c-73cdd58c58c2@ntu.edu.tw>
References: <fcc9c821-50bf-7c7a-4e8f-e4859f7deb78@ntu.edu.tw>
 <0d7bc6e1-2d8e-f3f9-d685-2c1e5a001a20@sapo.pt>
 <9ac5812e-5539-9d6a-6396-a2ec225f257b@ntu.edu.tw>
 <EFF7563D-00B0-4DB8-BC1B-5B0A7FBBE113@comcast.net>
 <1f52a554-7c22-1127-471b-217da7f473a2@ntu.edu.tw>
 <37254746-470b-6d9c-dd6c-73cdd58c58c2@ntu.edu.tw>
Message-ID: <7c430404eb934af893b6e930257dd9f1@tamu.edu>

I think this does what you want.

z1<- -1
z2<-  2
oldp <- par(mgp=c(3, .5, 0))
curve(dnorm(x,0,1), xlim=c(-5, 5),main="Standard Normal",
    xaxt="n", frame=F, xlab="")
jj<-seq(z1,z2,0.01)
cord.x<- jj
cord.y<- dnorm(jj)
polygon(c(-1, cord.x, 2), c(0, cord.y, 0), col="skyblue")
axis(1,at=c(-5,z1,0,z2,5),lab=c(-5,z1,0,z2,5))
abline(v=c(z1,z2))
axis(1, at=c(-5, z1, 0, z2, 5), lab=(c(-5,z1,0,z2,5) + 5)*2, line=2)
par(oldp)

When you assign a vector to an object, you do not need to use c(), e.g. cord.x <- jj. I expanded xlim= since you were labeling the axis at -5, and 5, but only drawing the plot from -4 to 4.

To get the polygon to work, you need to add points to the baseline at at either end.

The line= argument in axis() lets you put an axis line into the margin of the plot. I used the mgp= argument in par() to close the space between the tickmarks and their values.
--------------------------------------
David L. Carlson
Department of Anthropology
Texas A&M University

-----Original Message-----
From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Steven Yen
Sent: Sunday, October 21, 2018 1:47 PM
To: David Winsemius <dwinsemius at comcast.net>
Cc: r-help at r-project.org
Subject: Re: [R] Polygon

David, Rui, and All:
Greetings.
1. I need a helping hand with the polygon statement below so that I can 
have the area under the curve highlighted, between (z1,z2).
2. Is it possible to label the X-axis with in two scale, in the current 
z-scale and another, say x = (z+5)*2?
Thank you.

z1<- -1
z2<-? 2
curve(dnorm(x,0,1),xlim=c(-4,4),main="Standard 
Normal",xaxt="n",frame=F,xlab="z")
jj<-seq(z1,z2,0.01)
cord.x<-c(jj)
cord.y<-c(dnorm(jj))
#polygon(cord.x,cord.y,col="skyblue")
axis(1,at=c(-5,z1,0,z2,5),lab=c(-5,z1,0,z2,5))
abline(v=c(z1,z2))

-- 
styen at ntu.edu.tw (S.T. Yen)


	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

From gkr@emer @end|ng |rom bgc-jen@@mpg@de  Mon Oct 22 09:26:14 2018
From: gkr@emer @end|ng |rom bgc-jen@@mpg@de (Guido Kraemer)
Date: Mon, 22 Oct 2018 09:26:14 +0200
Subject: [R] object 'nativeRoutines' not found
In-Reply-To: <76b118ab-4235-f0fd-4499-eb56aa7ab8bc@bgc-jena.mpg.de>
References: <76b118ab-4235-f0fd-4499-eb56aa7ab8bc@bgc-jena.mpg.de>
Message-ID: <d86a94ab-085b-f28f-71f3-6a4046fd681e@bgc-jena.mpg.de>

FYI, the problem just fixed itself.

On 9/24/18 3:43 PM, Guido Kraemer wrote:
> Hi all,
>
> Since a couple of days travis-ci fails for my package coRanking with 
> "R: devel".
> The error message is:
>
> Error in nativeRoutines[[lib]] <- routines :
> object 'nativeRoutines' not found
>
> "R: release" and "R: oldrel" work fine. Did some R internals change or 
> is the "R: devel" on travis currently broken?
>
> I also sent the package to winbuilder and it works fine with R-devel
>
> You can find the travis build here:
>
> https://travis-ci.org/gdkrmr/coRanking/jobs/428661435
>
> Best Regards,
>
> Guido
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Guido Kraemer
Max Planck Institute for Biogeochemistry Jena
Department for Biogeochemical Integration
Hans-Kn?ll-Str. 10
07745 Jena
Germany

phone: +49 3641 576293
e-mail: gkraemer at bgc-jena.mpg.de



From petr@p|k@| @end|ng |rom prechez@@cz  Mon Oct 22 11:34:06 2018
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Mon, 22 Oct 2018 09:34:06 +0000
Subject: [R] (no subject)
In-Reply-To: <946067094.20140946.1540040641893@mail.yahoo.com>
References: <946067094.20140946.1540040641893.ref@mail.yahoo.com>
 <946067094.20140946.1540040641893@mail.yahoo.com>
Message-ID: <eb53082636be4c1da1a4c5d39acc9592@SRVEXCHCM1301.precheza.cz>

Hi

first of all few comments

Does your email client have subject line? If yes please use it, if not, change the client.
Please do not post in HTML, such emails have big chance to be scrambled.

# this gives you 10 random numbers
x<-rnorm(10,0,1)

f<-fuction(u,x)  {exp(x- u)}
# you probably ment
f<-function(u,x)  {exp(x- u)}

for(i in 1:lenght(x) integrate(f,lower=1,upper=4)
# you probably ment
for(i in 1:length(x)) integrate(f,lower=1,upper=4)
......................^^...^
but this gives you an error
> for(i in 1:length(x)) integrate(f,lower=1,upper=4)
Error in f(x, ...) : argument "x" is missing, with no default

The error message comes from your f function as you did not defined u

If you changed your f function somehow
f<-function(x, u=2)  {exp(x - u)}
for(i in 1:length(x)) integrate(f,lower=1,upper=4)
the error is gone but so do results.

You need either print your results explicitly or to assign them to some object.

But if you printed your results you would find that you get same repeated result length(x) times.
> for(i in 1:length(x)) print(integrate(f,lower=1,upper=4))
7.021177 with absolute error < 7.8e-14
7.021177 with absolute error < 7.8e-14
7.021177 with absolute error < 7.8e-14
7.021177 with absolute error < 7.8e-14
7.021177 with absolute error < 7.8e-14

AFAIK, integrate computes area below curve defined by function f between lower and upper and it has nothing to do with your x definition.

So you should reconsider what do you want to achieve and if you have some time you should read some introduction document(s) to understand how R operates with objects. R Intro should be good starting point.

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of malika yassa via R-
> help
> Sent: Saturday, October 20, 2018 3:04 PM
> To: r-help at r-project.org
> Subject: [R] (no subject)
>
> hello
> please you help mei have this functionx<-rnorm(10,0,1)f<-fuction(u,x)  {exp((x-
> u)}I want to calculate the integral of this function for each value of x{for(i in
> 1:lenght(x)
> integrate(f,lower=1,upper=4)
>
> }but I can not find the vector of resulatwhere is the errorthinks
>
> [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information about processing and protection of business partner?s personal data are available on website: https://www.precheza.cz/en/personal-data-protection-principles/
D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any documents attached to it may be confidential and are subject to the legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/


From m@rc@c@p@v@nn| @end|ng |rom goog|em@||@com  Mon Oct 22 15:30:22 2018
From: m@rc@c@p@v@nn| @end|ng |rom goog|em@||@com (Marc Capavanni)
Date: Mon, 22 Oct 2018 14:30:22 +0100
Subject: [R] Cannot use R on Windows when installed to an external drive
 with a space in the path
Message-ID: <CANccLkyWSaKnrb9gczt62WqR9WVpAT5eXbJhkKRk_gRUcQhzxw@mail.gmail.com>

Hi all,

I'm considering filing this as a bug report but wanted to make sure first
that I'm not doing something wrong.

A piece of software which I develop installs R as part of its dependencies.
This normally works perfectly fine. However we noticed a bug when
installing to external drives on a path that includes a space, RScript.exe
and R.exe will not work.

E:\Program Files (x86)\R-3-3-3\bin>Rscript.exe
'E:\Program' is not recognized as an internal or external command,
operable program or batch file.

As you can see I'm in the directory itself, and simply calling the
executable without entering a path.

Similarly, if I do enter the full path with quote marks, I get the same
issue.

E:\>"E:\Program Files (x86)\R-3-3-3\bin\Rscript.exe"
'E:\Program' is not recognized as an internal or external command,
operable program or batch file.

At this stage I'm thinking it's either an R bug or a Windows bug, but I can
run the following just fine.

E:\Program Files (x86)\HelloWorldProj\bin>HelloWorldProj.exe
Hello, world!

I've tested this with two variables.

 A - Using the R installer OR Simply copying the binaries
 B - Writing to E:\R-3-3-3 OR Writing to E:\Program Files (x86)\R-3-3-3

A does not affect the outcome in any way, however R only works when B uses
the path without spaces.

I searched elsewhere on the internet for the same and interestingly it was
another R install with this issue. I believe the commenters here were
erroneously attributing it to the user.

https://stackoverflow.com/questions/43510438/how-to-run-an-executable-that-contains-a-space-in-path-from-command-line-on-wind

Any thoughts? I'm open to a sensible workaround, and if it is a bug I'm
happy to raise it.

Thanks,
Marc

	[[alternative HTML version deleted]]



From dc@r|@on @end|ng |rom t@mu@edu  Mon Oct 22 15:34:23 2018
From: dc@r|@on @end|ng |rom t@mu@edu (David L Carlson)
Date: Mon, 22 Oct 2018 13:34:23 +0000
Subject: [R] Polygon
In-Reply-To: <1f26f7c9-34a5-628d-e30f-a9eca5202407@ntu.edu.tw>
References: <fcc9c821-50bf-7c7a-4e8f-e4859f7deb78@ntu.edu.tw>
 <0d7bc6e1-2d8e-f3f9-d685-2c1e5a001a20@sapo.pt>
 <9ac5812e-5539-9d6a-6396-a2ec225f257b@ntu.edu.tw>
 <EFF7563D-00B0-4DB8-BC1B-5B0A7FBBE113@comcast.net>
 <1f52a554-7c22-1127-471b-217da7f473a2@ntu.edu.tw>
 <37254746-470b-6d9c-dd6c-73cdd58c58c2@ntu.edu.tw>
 <7c430404eb934af893b6e930257dd9f1@tamu.edu>
 <1f26f7c9-34a5-628d-e30f-a9eca5202407@ntu.edu.tw>
Message-ID: <a52c389bd60b4bb3b7238147e1679c4a@tamu.edu>

Yes, par(oldp) resets the parameter to its original value.

The simplest way to get the area in this case would be to use pnorm():

> pnorm(2) - pnorm(-1)
[1] 0.8185946

If you have an arbitrary polygon, you can use polyarea() in the pracma package:

> library(pracma)
> polyarea(rev(c(-1, cord.x, 2)), rev(c(0, cord.y, 0)))
[1] 0.8185917

The second differs slightly from the first because it is an approximation based on 101 points (the default for the curve() function). The polyarea() function wants the polygon to be defined counter-clockwise so we use rev() to reverse the coordinates. Without this you will get a negative area, but you can always use abs() to fix that:

> polyarea(c(-1, cord.x, 2), c(0, cord.y, 0))
[1] -0.8185917
> abs(polyarea(c(-1, cord.x, 2), c(0, cord.y, 0)))
[1] 0.8185917

One more point. Don?t use abbreviations for TRUE and FALSE (e.g. frame=F). FALSE cannot be redefined, but F can be. If you used a variable called F in earlier code, it could change the behavior of curve():

> curve(dnorm(x,0,1), xlim=c(-5, 5), frame=F)
> FALSE <- 1
Error in FALSE <- 1 : invalid (do_set) left-hand side to assignment
> F <- 1
> curve(dnorm(x,0,1), xlim=c(-5, 5), frame=F)

----------------------------------------
David L Carlson
Department of Anthropology
Texas A&M University
College Station, TX 77843-4352



From: Steven Yen <styen at ntu.edu.tw> 
Sent: Sunday, October 21, 2018 9:54 PM
To: David L Carlson <dcarlson at tamu.edu>
Subject: Re: [R] Polygon

Thank you David. This is great!!
I can follow all you do, except one. What does the last statement do: par(oldp). I would think that it reset the parameters, needed only if there is a next job.

I am a little embarrassed to push this further, but let me see if I can bounce another thing out of this.

Is it possible to have a "call-out", somehow indicating that the probability associated witht he shaded area is, say, 0.45. Is this possible? Am I asking too much of R? Fine if not. Thanks again!!!
On 10/22/2018 4:24 AM, David L Carlson wrote:
I think this does what you want.

z1<- -1
z2<-  2
oldp <- par(mgp=c(3, .5, 0))
curve(dnorm(x,0,1), xlim=c(-5, 5),main="Standard Normal",
    xaxt="n", frame=F, xlab="")
jj<-seq(z1,z2,0.01)
cord.x<- jj
cord.y<- dnorm(jj)
polygon(c(-1, cord.x, 2), c(0, cord.y, 0), col="skyblue")
axis(1,at=c(-5,z1,0,z2,5),lab=c(-5,z1,0,z2,5))
abline(v=c(z1,z2))
axis(1, at=c(-5, z1, 0, z2, 5), lab=(c(-5,z1,0,z2,5) + 5)*2, line=2)
par(oldp)

When you assign a vector to an object, you do not need to use c(), e.g. cord.x <- jj. I expanded xlim= since you were labeling the axis at -5, and 5, but only drawing the plot from -4 to 4.

To get the polygon to work, you need to add points to the baseline at at either end.

The line= argument in axis() lets you put an axis line into the margin of the plot. I used the mgp= argument in par() to close the space between the tickmarks and their values.
--------------------------------------
David L. Carlson
Department of Anthropology
Texas A&M University

-----Original Message-----
From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Steven Yen
Sent: Sunday, October 21, 2018 1:47 PM
To: David Winsemius mailto:dwinsemius at comcast.net
Cc: mailto:r-help at r-project.org
Subject: Re: [R] Polygon

David, Rui, and All:
Greetings.
1. I need a helping hand with the polygon statement below so that I can 
have the area under the curve highlighted, between (z1,z2).
2. Is it possible to label the X-axis with in two scale, in the current 
z-scale and another, say x = (z+5)*2?
Thank you.

z1<- -1
z2<-? 2
curve(dnorm(x,0,1),xlim=c(-4,4),main="Standard 
Normal",xaxt="n",frame=F,xlab="z")
jj<-seq(z1,z2,0.01)
cord.x<-c(jj)
cord.y<-c(dnorm(jj))
#polygon(cord.x,cord.y,col="skyblue")
axis(1,at=c(-5,z1,0,z2,5),lab=c(-5,z1,0,z2,5))
abline(v=c(z1,z2))



-- 
mailto:styen at ntu.edu.tw (S.T. Yen)

From m@rc@c@p@v@nn| @end|ng |rom goog|em@||@com  Mon Oct 22 15:34:22 2018
From: m@rc@c@p@v@nn| @end|ng |rom goog|em@||@com (Marc Capavanni)
Date: Mon, 22 Oct 2018 14:34:22 +0100
Subject: [R] Cannot use R on Windows when installed to an external drive
 with a space in the path
In-Reply-To: <CANccLkyWSaKnrb9gczt62WqR9WVpAT5eXbJhkKRk_gRUcQhzxw@mail.gmail.com>
References: <CANccLkyWSaKnrb9gczt62WqR9WVpAT5eXbJhkKRk_gRUcQhzxw@mail.gmail.com>
Message-ID: <CANccLkzjC97K=U8Ahqng_dVL3efwjw7480vbu4P=yvrGdytWNw@mail.gmail.com>

Hi all,

This is my second time posting this, I accidentally sent the first email
without the proper subject header. Hopefully this won't create any noise
and a moderator can dismiss the first one.

I'm considering filing this as a bug report but wanted to make sure first
that I'm not doing something wrong.

A piece of software which I develop installs R as part of its dependencies.
This normally works perfectly fine. However we noticed a bug when
installing to external drives on a path that includes a space, RScript.exe
and R.exe will not work.

E:\Program Files (x86)\R-3-3-3\bin>Rscript.exe
'E:\Program' is not recognized as an internal or external command,
operable program or batch file.

As you can see I'm in the directory itself, and simply calling the
executable without entering a path.

Similarly, if I do enter the full path with quote marks, I get the same
issue.

E:\>"E:\Program Files (x86)\R-3-3-3\bin\Rscript.exe"
'E:\Program' is not recognized as an internal or external command,
operable program or batch file.

At this stage I'm thinking it's either an R bug or a Windows bug, but I can
run the following just fine.

E:\Program Files (x86)\HelloWorldProj\bin>HelloWorldProj.exe
Hello, world!

I've tested this with two variables.

 A - Using the R installer OR Simply copying the binaries
 B - Writing to E:\R-3-3-3 OR Writing to E:\Program Files (x86)\R-3-3-3

A does not affect the outcome in any way, however R only works when B uses
the path without spaces.

I searched elsewhere on the internet for the same and interestingly it was
another R install with this issue. I believe the commenters here were
erroneously attributing it to the user.

https://stackoverflow.com/questions/43510438/how-to-run-an-executable-that-contains-a-space-in-path-from-command-line-on-wind

Any thoughts? I'm open to a sensible workaround, and if it is a bug I'm
happy to raise it.

Thanks,
Marc

	[[alternative HTML version deleted]]



From tom@@@k@||ber@ @end|ng |rom gm@||@com  Mon Oct 22 15:47:36 2018
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Mon, 22 Oct 2018 15:47:36 +0200
Subject: [R] Cannot use R on Windows when installed to an external drive
 with a space in the path
In-Reply-To: <CANccLkzjC97K=U8Ahqng_dVL3efwjw7480vbu4P=yvrGdytWNw@mail.gmail.com>
References: <CANccLkyWSaKnrb9gczt62WqR9WVpAT5eXbJhkKRk_gRUcQhzxw@mail.gmail.com>
 <CANccLkzjC97K=U8Ahqng_dVL3efwjw7480vbu4P=yvrGdytWNw@mail.gmail.com>
Message-ID: <f09e6b9d-4073-6aac-1a16-35e821f672cf@gmail.com>

Dear Marc,

this is probably because short file names are disabled on that external 
drive. R needs short file names to be enabled on the drive where it is 
installed - please check/follow according to Microsoft documentation on 
turning on Short File Names (SFN, aka 8.3 names, 8dot3 names).

Best,
Tomas

On 10/22/2018 03:34 PM, Marc Capavanni via R-help wrote:
> Hi all,
>
> This is my second time posting this, I accidentally sent the first email
> without the proper subject header. Hopefully this won't create any noise
> and a moderator can dismiss the first one.
>
> I'm considering filing this as a bug report but wanted to make sure first
> that I'm not doing something wrong.
>
> A piece of software which I develop installs R as part of its dependencies.
> This normally works perfectly fine. However we noticed a bug when
> installing to external drives on a path that includes a space, RScript.exe
> and R.exe will not work.
>
> E:\Program Files (x86)\R-3-3-3\bin>Rscript.exe
> 'E:\Program' is not recognized as an internal or external command,
> operable program or batch file.
>
> As you can see I'm in the directory itself, and simply calling the
> executable without entering a path.
>
> Similarly, if I do enter the full path with quote marks, I get the same
> issue.
>
> E:\>"E:\Program Files (x86)\R-3-3-3\bin\Rscript.exe"
> 'E:\Program' is not recognized as an internal or external command,
> operable program or batch file.
>
> At this stage I'm thinking it's either an R bug or a Windows bug, but I can
> run the following just fine.
>
> E:\Program Files (x86)\HelloWorldProj\bin>HelloWorldProj.exe
> Hello, world!
>
> I've tested this with two variables.
>
>   A - Using the R installer OR Simply copying the binaries
>   B - Writing to E:\R-3-3-3 OR Writing to E:\Program Files (x86)\R-3-3-3
>
> A does not affect the outcome in any way, however R only works when B uses
> the path without spaces.
>
> I searched elsewhere on the internet for the same and interestingly it was
> another R install with this issue. I believe the commenters here were
> erroneously attributing it to the user.
>
> https://stackoverflow.com/questions/43510438/how-to-run-an-executable-that-contains-a-space-in-path-from-command-line-on-wind
>
> Any thoughts? I'm open to a sensible workaround, and if it is a bug I'm
> happy to raise it.
>
> Thanks,
> Marc
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



From robertob@kker @end|ng |rom gm@||@com  Mon Oct 22 16:03:54 2018
From: robertob@kker @end|ng |rom gm@||@com (P. Roberto Bakker)
Date: Mon, 22 Oct 2018 16:03:54 +0200
Subject: [R] Different stack barplots - same color legends
Message-ID: <CAKDq9_N16xaeL4O2j=v2bVuMb=tuHfu0Ao+yuLQcEq6B-ngq1A@mail.gmail.com>

Hi,

I want to make barplots from different questions (columns) in one
data.frame.
Each question has the same 5 likert items.
Now the problem: in some questions all items are answered; in other less.
>From the syntax below I get nice stack barplots - *but the legend colors do
not* refer to the same likert-item, which I understand - the colors go in
sequence along the table.
Question: how can I write a syntax that each likert-item has the same
legend color?
Thank you in advance,

Roberto

SYNTAX:
counts19 <- table(teamq[,19])
counts20 <- table(teamq[,20])
barplot(as.matrix(counts19), horiz = T,
        col=c("yellow","sandybrown","orange", "darkolivegreen","green"),
legend=T)
barplot(as.matrix(counts20), horiz = T,
        col=c("yellow","sandybrown","orange", "darkolivegreen","green"),
legend=T)

	[[alternative HTML version deleted]]



From rhe|p @end|ng |rom krueger-|@m||y@de  Mon Oct 22 16:37:42 2018
From: rhe|p @end|ng |rom krueger-|@m||y@de (Knut Krueger)
Date: Mon, 22 Oct 2018 16:37:42 +0200
Subject: [R] match() question or needle haystack problem for a data.frame
Message-ID: <cac83a2c-2edd-e0e9-8b54-96afd48d401d@krueger-family.de>


Hi to all

I would like to reduce the "Mydata" to rows, only if Mydata$Data1 are in 
needles



needles =c(14390, 14391, 14392, 14427, 14428, 14429, 14430, 14431, 
14432, 14433, 14434, 14435, 14436, 14437, 14439, 14440, 14441, 15195, 
15196, 15197, 15198, 15199, 15200, 15201, 15202, 15203, 15204, 15205, 
15206, 15207, 15208, 15209, 17615, 17616, 17617, 17618, 17619, 17620, 
17621, 17622, 17623, 17624, 17625, 17626, 17627, 17628, 17629, 17630, 
17631, 17679, 17680, 17681, 17682, 17683, 17823, 17824, 17825, 17826, 
17827, 17828, 17829, 17830, 17831, 17862, 17863, 17864, 17865, 17866, 
17867, 17868, 17869, 17870, 17871, 17872, 17873, 17874, 17875, 17876, 
17877, 17878, 17879, 17880, 17881, 17882, 17883, 19255, 19256, 19257, 
19258, 21289, 21290, 21291, 21292, 22890, 22891, 22892, 22893, 22894, 
22895, 22896, 22897, 22898, 22899, 22900, 22901, 22902, 40428, 40429, 
40430, 40431, 40432, 40433, 40434, 40435, 40436, 40437)

Haystack =c(14390, 14391, 14392, 14427, 14428, 14429, 14430, 14431, 
14432, 14433, 14434, 14435, 14436, 14437, 14439, 14440, 14441, 15187, 
15188, 15195, 15196, 15197, 15198, 15199, 15200, 15201, 15202, 15203, 
15204, 15205, 15206, 15207, 15208, 15209, 16717, 16718, 17615, 17616, 
17617, 17618, 17619, 17620, 17621, 17622, 17623, 17624, 17625, 17626, 
17627, 17628, 17629, 17630, 17631, 17679, 17680, 17681, 17682, 17683, 
17817, 17818, 17823, 17824, 17825, 17826, 17827, 17828, 17829, 17830, 
17831, 17862, 17863, 17864, 17865, 17866, 17867, 17868, 17869, 17870, 
17871, 17872, 17873, 17874, 17875, 17876, 17877, 17878, 17879, 17880, 
17881, 17882, 17883, 17886, 19255, 19256, 19257, 19258, 21289, 21290, 
21291, 21292, 22890, 22891, 22892, 22893, 22894, 22895, 22896, 22897, 
22898, 22899, 22900, 22901, 22902, 40428, 40429, 40430, 40431, 40432, 
40433, 40434, 40435, 40436, 40437, 40710, 40711, 49127, 49128, 52768)

Mydata =data.frame (DATA1=Haystack, Data2=c(1:length(Haystack)))



match(Mydata$DATA1, needles, nomatch=NA) does find all data which are in 
needle - the others are set to the nomatch value.

But I don not find out how to reduce the data.frame  -  maybe match() is 
not helpful for that.

Kind regards Knut



From bgunter@4567 @end|ng |rom gm@||@com  Mon Oct 22 16:47:46 2018
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 22 Oct 2018 07:47:46 -0700
Subject: [R] 
 match() question or needle haystack problem for a data.frame
In-Reply-To: <cac83a2c-2edd-e0e9-8b54-96afd48d401d@krueger-family.de>
References: <cac83a2c-2edd-e0e9-8b54-96afd48d401d@krueger-family.de>
Message-ID: <CAGxFJbQrCaH6jLzMU60dx-U7m3oNT-zt1FhUOmcaOb-8njrp2w@mail.gmail.com>

Re-read ?match and note the examples for %in%

-- Bert
Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Oct 22, 2018 at 7:38 AM Knut Krueger <rhelp at krueger-family.de>
wrote:

>
> Hi to all
>
> I would like to reduce the "Mydata" to rows, only if Mydata$Data1 are in
> needles
>
>
>
> needles =c(14390, 14391, 14392, 14427, 14428, 14429, 14430, 14431,
> 14432, 14433, 14434, 14435, 14436, 14437, 14439, 14440, 14441, 15195,
> 15196, 15197, 15198, 15199, 15200, 15201, 15202, 15203, 15204, 15205,
> 15206, 15207, 15208, 15209, 17615, 17616, 17617, 17618, 17619, 17620,
> 17621, 17622, 17623, 17624, 17625, 17626, 17627, 17628, 17629, 17630,
> 17631, 17679, 17680, 17681, 17682, 17683, 17823, 17824, 17825, 17826,
> 17827, 17828, 17829, 17830, 17831, 17862, 17863, 17864, 17865, 17866,
> 17867, 17868, 17869, 17870, 17871, 17872, 17873, 17874, 17875, 17876,
> 17877, 17878, 17879, 17880, 17881, 17882, 17883, 19255, 19256, 19257,
> 19258, 21289, 21290, 21291, 21292, 22890, 22891, 22892, 22893, 22894,
> 22895, 22896, 22897, 22898, 22899, 22900, 22901, 22902, 40428, 40429,
> 40430, 40431, 40432, 40433, 40434, 40435, 40436, 40437)
>
> Haystack =c(14390, 14391, 14392, 14427, 14428, 14429, 14430, 14431,
> 14432, 14433, 14434, 14435, 14436, 14437, 14439, 14440, 14441, 15187,
> 15188, 15195, 15196, 15197, 15198, 15199, 15200, 15201, 15202, 15203,
> 15204, 15205, 15206, 15207, 15208, 15209, 16717, 16718, 17615, 17616,
> 17617, 17618, 17619, 17620, 17621, 17622, 17623, 17624, 17625, 17626,
> 17627, 17628, 17629, 17630, 17631, 17679, 17680, 17681, 17682, 17683,
> 17817, 17818, 17823, 17824, 17825, 17826, 17827, 17828, 17829, 17830,
> 17831, 17862, 17863, 17864, 17865, 17866, 17867, 17868, 17869, 17870,
> 17871, 17872, 17873, 17874, 17875, 17876, 17877, 17878, 17879, 17880,
> 17881, 17882, 17883, 17886, 19255, 19256, 19257, 19258, 21289, 21290,
> 21291, 21292, 22890, 22891, 22892, 22893, 22894, 22895, 22896, 22897,
> 22898, 22899, 22900, 22901, 22902, 40428, 40429, 40430, 40431, 40432,
> 40433, 40434, 40435, 40436, 40437, 40710, 40711, 49127, 49128, 52768)
>
> Mydata =data.frame (DATA1=Haystack, Data2=c(1:length(Haystack)))
>
>
>
> match(Mydata$DATA1, needles, nomatch=NA) does find all data which are in
> needle - the others are set to the nomatch value.
>
> But I don not find out how to reduce the data.frame  -  maybe match() is
> not helpful for that.
>
> Kind regards Knut
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From m@rc@c@p@v@nn| @end|ng |rom goog|em@||@com  Mon Oct 22 16:57:34 2018
From: m@rc@c@p@v@nn| @end|ng |rom goog|em@||@com (Marc Capavanni)
Date: Mon, 22 Oct 2018 15:57:34 +0100
Subject: [R] Cannot use R on Windows when installed to an external drive
 with a space in the path
In-Reply-To: <243008a7-a47d-7d5e-b003-7ef32202374c@gmail.com>
References: <CANccLkyWSaKnrb9gczt62WqR9WVpAT5eXbJhkKRk_gRUcQhzxw@mail.gmail.com>
 <CANccLkzjC97K=U8Ahqng_dVL3efwjw7480vbu4P=yvrGdytWNw@mail.gmail.com>
 <f09e6b9d-4073-6aac-1a16-35e821f672cf@gmail.com>
 <CANccLkxVNQJYt2rcbz4re3fUw8ET7NTbcvz6rxPjTgomaEQH5g@mail.gmail.com>
 <243008a7-a47d-7d5e-b003-7ef32202374c@gmail.com>
Message-ID: <CANccLkwE4UsTKcF5G-9EWZmeabiBYf2wp31M_WhsBF-aaJbREQ@mail.gmail.com>

Hi Tomas,

You're likely right, I didn't restart, unplug/replug the hard drive, or
even close CMD, so I can give that a go. Thanks for your insight.

In any case I think I'll go with the solution of using 3.5.1 as it seems to
solve the issue, and would mean I wouldn't have to modify hard drive or
registry settings on my user's PCs.

Many thanks,
Marc

P.S. I accidentally didn't include the r-help address, I'll bring it back
in in case others might find this useful.

On Mon, 22 Oct 2018 at 15:47, Tomas Kalibera <tomas.kalibera at gmail.com>
wrote:

> Hi Marc,
>
> this seems to me that the directory where R is installed still does not
> have a short name. I don't remember the details, but maybe you have to
> reboot or something for them to be generated, windows docs should say. It
> would be good to ensure that the short name exists, e.g. using "dir /x" or
> just from inside R, checking R home. R internally uses the short name when
> possible, because it is not completely robust against space in file name.
>
> I've fixed some most obvious places in R recently (already in R 3.5), but
> maybe not all and certainly packages may break with spaces in R home
> directory name and some will definitely break. So it is unsafe to use R
> without SFN, even though it may start and many packages may work fine in
> 3.5.
>
> Best
> Tomas
>
>
> On 10/22/2018 04:40 PM, Marc Capavanni wrote:
>
> Hi Tomas,
>
> Thanks for your input. I tried to enabled those settings but the issue
> persists.
>
>     E:\Program Files (x86)\R-3.3.3\bin>fsutil 8dot3name query E:
>     The volume state is: 0 (8dot3 name creation is enabled).
>     The registry state is: 2 (Per volume setting - the default).
>
>     Based on the above settings, 8dot3 name creation is enabled on E:
>
>     E:\Program Files (x86)\R-3.3.3\bin>Rscript.exe
>     'E:\Program' is not recognized as an internal or external command,
>     operable program or batch file.
>
> However I did try the latest version of R (3.5.1 as of writing) and it
> works following the same steps in which 3.3.3 does not. I've verified this
> on a few machines and different external devices, so it seems like this has
> been remedied in the past few months.
>
> Thanks,
> Marc
>
> On Mon, 22 Oct 2018 at 14:47, Tomas Kalibera <tomas.kalibera at gmail.com>
> wrote:
>
>> Dear Marc,
>>
>> this is probably because short file names are disabled on that external
>> drive. R needs short file names to be enabled on the drive where it is
>> installed - please check/follow according to Microsoft documentation on
>> turning on Short File Names (SFN, aka 8.3 names, 8dot3 names).
>>
>> Best,
>> Tomas
>>
>> On 10/22/2018 03:34 PM, Marc Capavanni via R-help wrote:
>> > Hi all,
>> >
>> > This is my second time posting this, I accidentally sent the first email
>> > without the proper subject header. Hopefully this won't create any noise
>> > and a moderator can dismiss the first one.
>> >
>> > I'm considering filing this as a bug report but wanted to make sure
>> first
>> > that I'm not doing something wrong.
>> >
>> > A piece of software which I develop installs R as part of its
>> dependencies.
>> > This normally works perfectly fine. However we noticed a bug when
>> > installing to external drives on a path that includes a space,
>> RScript.exe
>> > and R.exe will not work.
>> >
>> > E:\Program Files (x86)\R-3-3-3\bin>Rscript.exe
>> > 'E:\Program' is not recognized as an internal or external command,
>> > operable program or batch file.
>> >
>> > As you can see I'm in the directory itself, and simply calling the
>> > executable without entering a path.
>> >
>> > Similarly, if I do enter the full path with quote marks, I get the same
>> > issue.
>> >
>> > E:\>"E:\Program Files (x86)\R-3-3-3\bin\Rscript.exe"
>> > 'E:\Program' is not recognized as an internal or external command,
>> > operable program or batch file.
>> >
>> > At this stage I'm thinking it's either an R bug or a Windows bug, but I
>> can
>> > run the following just fine.
>> >
>> > E:\Program Files (x86)\HelloWorldProj\bin>HelloWorldProj.exe
>> > Hello, world!
>> >
>> > I've tested this with two variables.
>> >
>> >   A - Using the R installer OR Simply copying the binaries
>> >   B - Writing to E:\R-3-3-3 OR Writing to E:\Program Files (x86)\R-3-3-3
>> >
>> > A does not affect the outcome in any way, however R only works when B
>> uses
>> > the path without spaces.
>> >
>> > I searched elsewhere on the internet for the same and interestingly it
>> was
>> > another R install with this issue. I believe the commenters here were
>> > erroneously attributing it to the user.
>> >
>> >
>> https://stackoverflow.com/questions/43510438/how-to-run-an-executable-that-contains-a-space-in-path-from-command-line-on-wind
>> >
>> > Any thoughts? I'm open to a sensible workaround, and if it is a bug I'm
>> > happy to raise it.
>> >
>> > Thanks,
>> > Marc
>> >
>> >       [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>>
>>
>>
>

	[[alternative HTML version deleted]]



From er|cjberger @end|ng |rom gm@||@com  Mon Oct 22 17:01:17 2018
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Mon, 22 Oct 2018 18:01:17 +0300
Subject: [R] 
 match() question or needle haystack problem for a data.frame
In-Reply-To: <CAGxFJbQrCaH6jLzMU60dx-U7m3oNT-zt1FhUOmcaOb-8njrp2w@mail.gmail.com>
References: <cac83a2c-2edd-e0e9-8b54-96afd48d401d@krueger-family.de>
 <CAGxFJbQrCaH6jLzMU60dx-U7m3oNT-zt1FhUOmcaOb-8njrp2w@mail.gmail.com>
Message-ID: <CAGgJW74Tebw5CNDGVSf32bF7cMwkM3z=qi++8-SUPFYOHynYGQ@mail.gmail.com>

Hi Knut,
You are almost done.

> v <- match(Mydata$DATA1, needles, nomatch=NA)
> found <- Mydata[ !is.na(v), ]
> missing <- Mdata[ is.na(v), ]

HTH,
Eric


On Mon, Oct 22, 2018 at 5:51 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> Re-read ?match and note the examples for %in%
>
> -- Bert
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Mon, Oct 22, 2018 at 7:38 AM Knut Krueger <rhelp at krueger-family.de>
> wrote:
>
> >
> > Hi to all
> >
> > I would like to reduce the "Mydata" to rows, only if Mydata$Data1 are in
> > needles
> >
> >
> >
> > needles =c(14390, 14391, 14392, 14427, 14428, 14429, 14430, 14431,
> > 14432, 14433, 14434, 14435, 14436, 14437, 14439, 14440, 14441, 15195,
> > 15196, 15197, 15198, 15199, 15200, 15201, 15202, 15203, 15204, 15205,
> > 15206, 15207, 15208, 15209, 17615, 17616, 17617, 17618, 17619, 17620,
> > 17621, 17622, 17623, 17624, 17625, 17626, 17627, 17628, 17629, 17630,
> > 17631, 17679, 17680, 17681, 17682, 17683, 17823, 17824, 17825, 17826,
> > 17827, 17828, 17829, 17830, 17831, 17862, 17863, 17864, 17865, 17866,
> > 17867, 17868, 17869, 17870, 17871, 17872, 17873, 17874, 17875, 17876,
> > 17877, 17878, 17879, 17880, 17881, 17882, 17883, 19255, 19256, 19257,
> > 19258, 21289, 21290, 21291, 21292, 22890, 22891, 22892, 22893, 22894,
> > 22895, 22896, 22897, 22898, 22899, 22900, 22901, 22902, 40428, 40429,
> > 40430, 40431, 40432, 40433, 40434, 40435, 40436, 40437)
> >
> > Haystack =c(14390, 14391, 14392, 14427, 14428, 14429, 14430, 14431,
> > 14432, 14433, 14434, 14435, 14436, 14437, 14439, 14440, 14441, 15187,
> > 15188, 15195, 15196, 15197, 15198, 15199, 15200, 15201, 15202, 15203,
> > 15204, 15205, 15206, 15207, 15208, 15209, 16717, 16718, 17615, 17616,
> > 17617, 17618, 17619, 17620, 17621, 17622, 17623, 17624, 17625, 17626,
> > 17627, 17628, 17629, 17630, 17631, 17679, 17680, 17681, 17682, 17683,
> > 17817, 17818, 17823, 17824, 17825, 17826, 17827, 17828, 17829, 17830,
> > 17831, 17862, 17863, 17864, 17865, 17866, 17867, 17868, 17869, 17870,
> > 17871, 17872, 17873, 17874, 17875, 17876, 17877, 17878, 17879, 17880,
> > 17881, 17882, 17883, 17886, 19255, 19256, 19257, 19258, 21289, 21290,
> > 21291, 21292, 22890, 22891, 22892, 22893, 22894, 22895, 22896, 22897,
> > 22898, 22899, 22900, 22901, 22902, 40428, 40429, 40430, 40431, 40432,
> > 40433, 40434, 40435, 40436, 40437, 40710, 40711, 49127, 49128, 52768)
> >
> > Mydata =data.frame (DATA1=Haystack, Data2=c(1:length(Haystack)))
> >
> >
> >
> > match(Mydata$DATA1, needles, nomatch=NA) does find all data which are in
> > needle - the others are set to the nomatch value.
> >
> > But I don not find out how to reduce the data.frame  -  maybe match() is
> > not helpful for that.
> >
> > Kind regards Knut
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From dc@r|@on @end|ng |rom t@mu@edu  Mon Oct 22 17:13:40 2018
From: dc@r|@on @end|ng |rom t@mu@edu (David L Carlson)
Date: Mon, 22 Oct 2018 15:13:40 +0000
Subject: [R] Different stack barplots - same color legends
In-Reply-To: <CAKDq9_N16xaeL4O2j=v2bVuMb=tuHfu0Ao+yuLQcEq6B-ngq1A@mail.gmail.com>
References: <CAKDq9_N16xaeL4O2j=v2bVuMb=tuHfu0Ao+yuLQcEq6B-ngq1A@mail.gmail.com>
Message-ID: <af9001d319ac4992b0bfc5526150f03b@tamu.edu>

Your example is not reproducible since you did not give us some sample data. I suspect that your data frame consists of columns that represent questions and rows that represent individuals who answered the questions. First create a simple example:

set.seed(42)
teamq <- data.frame(V1=sample(c(1, 2, 4, 5), 25, replace = TRUE),
     V2=sample(c(1, 2, 3, 4, 5), 25, replace=TRUE), 
     V3=sample(c(2, 3, 4, 5), 25, replace=TRUE))

Notice that this data frame ONLY contains questions (and only 3 questions). Here are 2 ways to get what you want. The first one stacks the data:

teamq.stack <- stack(teamq)
str(teamq.stack)
counts <- table(teamq.stack)
str(counts)

The second one converts each column to a factor with levels 1 - 5:

teamq2 <- data.frame(lapply(teamq, factor, levels=1:5))
str(teamq2)
counts <- sapply(teamq2, table)
str(counts)

Now make the plots:

cols <- c("yellow","sandybrown","orange", "darkolivegreen","green")
barplot(counts[, 1], horiz=TRUE, col=cols, legend=TRUE)
barplot(counts[, 2], horiz=TRUE, col=cols, legend=TRUE)
barplot(counts[, 3], horiz=TRUE, col=cols, legend=TRUE)

You will need to adjust the xlim= argument so that the legend does not print on top of the bars.

----------------------------------------
David L Carlson
Department of Anthropology
Texas A&M University
College Station, TX 77843-4352


-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of P. Roberto Bakker
Sent: Monday, October 22, 2018 9:04 AM
To: R mailing list <r-help at r-project.org>
Subject: [R] Different stack barplots - same color legends

Hi,

I want to make barplots from different questions (columns) in one
data.frame.
Each question has the same 5 likert items.
Now the problem: in some questions all items are answered; in other less.
>From the syntax below I get nice stack barplots - *but the legend colors do
not* refer to the same likert-item, which I understand - the colors go in
sequence along the table.
Question: how can I write a syntax that each likert-item has the same
legend color?
Thank you in advance,

Roberto

SYNTAX:
counts19 <- table(teamq[,19])
counts20 <- table(teamq[,20])
barplot(as.matrix(counts19), horiz = T,
        col=c("yellow","sandybrown","orange", "darkolivegreen","green"),
legend=T)
barplot(as.matrix(counts20), horiz = T,
        col=c("yellow","sandybrown","orange", "darkolivegreen","green"),
legend=T)

	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.



From rhe|p @end|ng |rom krueger-|@m||y@de  Mon Oct 22 17:18:35 2018
From: rhe|p @end|ng |rom krueger-|@m||y@de (Knut Krueger)
Date: Mon, 22 Oct 2018 17:18:35 +0200
Subject: [R] 
 match() question or needle haystack problem for a data.frame
In-Reply-To: <CAGgJW74Tebw5CNDGVSf32bF7cMwkM3z=qi++8-SUPFYOHynYGQ@mail.gmail.com>
References: <cac83a2c-2edd-e0e9-8b54-96afd48d401d@krueger-family.de>
 <CAGxFJbQrCaH6jLzMU60dx-U7m3oNT-zt1FhUOmcaOb-8njrp2w@mail.gmail.com>
 <CAGgJW74Tebw5CNDGVSf32bF7cMwkM3z=qi++8-SUPFYOHynYGQ@mail.gmail.com>
Message-ID: <6ebcd80a-1786-34bb-d852-d05bfa24c9bc@krueger-family.de>

Am 22.10.18 um 17:01 schrieb Eric Berger:
> v <- match(Mydata$DATA1, needles, nomatch=NA)
>  > found <- Mydata[ !is.na <http://is.na>(v), ]
>  > missing <- Mdata[ is.na <http://is.na>(v), ]

Thank you it is working, additionally as Bert suggested, it seems that

Mydata[Mydata$DATA1 %in% needles,]

is doing the same.

Kind Regards Knut



From bgunter@4567 @end|ng |rom gm@||@com  Mon Oct 22 18:02:35 2018
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 22 Oct 2018 09:02:35 -0700
Subject: [R] 
 match() question or needle haystack problem for a data.frame
In-Reply-To: <6ebcd80a-1786-34bb-d852-d05bfa24c9bc@krueger-family.de>
References: <cac83a2c-2edd-e0e9-8b54-96afd48d401d@krueger-family.de>
 <CAGxFJbQrCaH6jLzMU60dx-U7m3oNT-zt1FhUOmcaOb-8njrp2w@mail.gmail.com>
 <CAGgJW74Tebw5CNDGVSf32bF7cMwkM3z=qi++8-SUPFYOHynYGQ@mail.gmail.com>
 <6ebcd80a-1786-34bb-d852-d05bfa24c9bc@krueger-family.de>
Message-ID: <CAGxFJbS7vgQQK8t-X_z==on+jzYtDMmroCv3hPM6HWyU0Uq7Jw@mail.gmail.com>

I suggest you spend a bit of time with an R tutorial or two and, in
particular learn about "logical indexing," as this basic R construct seems
to be mysterious to you.

Cheers,
Bert




On Mon, Oct 22, 2018 at 8:22 AM Knut Krueger <rhelp at krueger-family.de>
wrote:

> Am 22.10.18 um 17:01 schrieb Eric Berger:
> > v <- match(Mydata$DATA1, needles, nomatch=NA)
> >  > found <- Mydata[ !is.na <http://is.na>(v), ]
> >  > missing <- Mdata[ is.na <http://is.na>(v), ]
>
> Thank you it is working, additionally as Bert suggested, it seems that
>
> Mydata[Mydata$DATA1 %in% needles,]
>
> is doing the same.
>
> Kind Regards Knut
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From j@m@xue| @end|ng |rom gm@||@com  Mon Oct 22 14:27:09 2018
From: j@m@xue| @end|ng |rom gm@||@com (Joel Maxuel)
Date: Mon, 22 Oct 2018 09:27:09 -0300
Subject: [R] Transformations in Tidyverse (renaming and ordering columns)
Message-ID: <CA+O61snvxz8-Ph5RWuSbzaS47aTf__+XFb=bOT2YviHt8isASg@mail.gmail.com>

Hello all,

I am slowly picking away at a factsheet that will include several result
sets from a single tibble (there is a column identifying the section title)
and would like to have that value in the top left corner of each resulting
table.  When using the `spread` function, I see that any remaining columns
not identified by `key` nor `value` will be placed to the far left.

Like the example below, I would like the column label Fiscal be renamed to
the data value "A", so the top-left of the result is "A".  However, if I
try to progmatically set the column name, I run into issues:


library(knitr)
library(tidyverse)
library(tibble)
library(dplyr)
library(magrittr)

testset <- as_tibble(tribble(~Section, ~Observation, ~Order, ~Fiscal,
~Value,
                             "A", "One", 1, "2016-17", 419,
                             "A", "One", 1, "2017-18", 499,
                             "A", "One", 1, "2018-19", 463,
                             "A", "Two", 2, "2016-17", 391,
                             "A", "Two", 2, "2017-18", 445,
                             "A", "Two", 2, "2018-19", 423,
                             "A", "Three", 3, "2016-17", 348,
                             "A", "Three", 3, "2017-18", 353,
                             "A", "Three", 3, "2018-19", 357))
sectionA <- as_tibble(filter(testset, Section == "A")) # Mind you for this
example, does very little
spread(select(sectionA, Observation, "A" = Fiscal, Value), key=Observation,
value=Value) # Works, with reservations
spread(select(sectionA, Observation, slice(sectionA,1) %>%
magrittr::extract2("Section") = Fiscal, Value), key=Observation,
value=Value) # Produces error:
# Error: unexpected '=' in "spread(select(sectionA, Observation,
slice(sectionA,1) %>% magrittr::extract2("Section") ="


I presume my premise is very wrong.

Also, I am curious how to sort columns (and rows) with extra columns
(/rows) not meant for display.  In this case, the columns One, Two, and
Three (in real life won't be linguistic representations of numbers), are
out of order - however I do have the Order column to fix that (if I knew
how to include it for sorting purposes, without displaying it).  A few
hints here would help.  (Perhaps there is column/row hiding in kableExtra -
which I will be using later on?)

--
Cheers,
Joel Maxuel

	[[alternative HTML version deleted]]



From kry|ov@r00t @end|ng |rom gm@||@com  Mon Oct 22 19:15:30 2018
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Mon, 22 Oct 2018 20:15:30 +0300
Subject: [R] Cannot use R on Windows when installed to an external drive
 with a space in the path
In-Reply-To: <CANccLkyWSaKnrb9gczt62WqR9WVpAT5eXbJhkKRk_gRUcQhzxw@mail.gmail.com>
References: <CANccLkyWSaKnrb9gczt62WqR9WVpAT5eXbJhkKRk_gRUcQhzxw@mail.gmail.com>
Message-ID: <20181022201530.47d185b8@Tarkus>

This is a bin\R.exe + bin\Rscript.exe bug.

On Windows, where the system call to create a process only takes one
command line string instead of an array of command line parameters[0]
(and the C runtimes usually call CommandLineToArgvW[1] behind the
scenes to get an array back), execv() does nothing to prepare a
properly-quoted command line and just concatenates its arguments[2].
Moreover, Windows version of execv() is effectively undocumented[3],
nor there is any information about the suggested replacement[4].
(You can call it a Windows bug instead.)

Short file names are not a guaranteed solution, because they may
not be available at all on some filesystems[5] (which is how this
error has been encountered). In the general case, "argument quoting
hell"[6] is unavoidable on Windows, but the code from [2] implements
the proper conversion from an array of strings to a single quoted
command line, ready to be parsed by the launched process.

char* getRHOME(int m) in src/gnuwin32/rhome.c tries to return a short
path (assuming it won't contain spaces). This is used by rcmdfn() from
src/gnuwin32/front-ends/rcmdfn.c to system() a command line built with
no quoting, causing the error. rcmdfn() is called from
src/gnuwin32/front-ends/R.c, which seems to contain the entry point for
R\R-3.3.3\bin\R.exe.

Fortunately, in src/unix/Rscript.c the whole mess seems to be avoided by
having it directly include rterm.c and then call AppMain() on Windows,
passing the command line parameter array. Same goes for
src/gnuwin32/front-ends/graphappmain.c. The corresponding executables
reside in the architecture-specific subdirectory of ...\bin\.

So if you run Rgui.exe, Rterm.exe or Rscript.exe from
R-3.3.3\bin\i386 instead of R-3.3.3\bin, no extra cmd.exe processes
should be spawned and the badly-formed system() should be avoided.

-- 
Best regards,
Ivan

[0]
https://docs.microsoft.com/en-us/windows/desktop/api/processthreadsapi/nf-processthreadsapi-createprocessa

That's probably for historical reasons, because Win32 API wanted to
stay mostly source-compatible with Win16 API, and Win16 API may have
evolved from DOS system calls, where the command line was, indeed, a
single string pointer.

[1]
https://docs.microsoft.com/en-us/windows/desktop/api/shellapi/nf-shellapi-commandlinetoargvw

[2]
https://blogs.msdn.microsoft.com/twistylittlepassagesallalike/2011/04/23/everyone-quotes-command-line-arguments-the-wrong-way/

[3]
https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2012/ms235416(v=vs.110)

[4]
https://docs.microsoft.com/en-us/cpp/c-runtime-library/exec-wexec-functions?view=vs-2017

[5] https://blogs.msdn.microsoft.com/oldnewthing/20181004-00/?p=99895

[6] quoted from Rscript.c



From dc@r|@on @end|ng |rom t@mu@edu  Mon Oct 22 19:19:37 2018
From: dc@r|@on @end|ng |rom t@mu@edu (David L Carlson)
Date: Mon, 22 Oct 2018 17:19:37 +0000
Subject: [R] Polygon
In-Reply-To: <c9c5e4e7-ba81-c239-7cc8-1494e3bc9be4@ntu.edu.tw>
References: <fcc9c821-50bf-7c7a-4e8f-e4859f7deb78@ntu.edu.tw>
 <0d7bc6e1-2d8e-f3f9-d685-2c1e5a001a20@sapo.pt>
 <9ac5812e-5539-9d6a-6396-a2ec225f257b@ntu.edu.tw>
 <EFF7563D-00B0-4DB8-BC1B-5B0A7FBBE113@comcast.net>
 <1f52a554-7c22-1127-471b-217da7f473a2@ntu.edu.tw>
 <37254746-470b-6d9c-dd6c-73cdd58c58c2@ntu.edu.tw>
 <7c430404eb934af893b6e930257dd9f1@tamu.edu>
 <1f26f7c9-34a5-628d-e30f-a9eca5202407@ntu.edu.tw>
 <a52c389bd60b4bb3b7238147e1679c4a@tamu.edu>
 <c9c5e4e7-ba81-c239-7cc8-1494e3bc9be4@ntu.edu.tw>
Message-ID: <444e0737c46644a4834faaffa37eda41@tamu.edu>

Putting it all together:

z1<- -1
z2<-  2
oldp <- par(mgp=c(3, .5, 0))
curve(dnorm(x,0,1), xlim=c(-5, 5),main="Standard Normal",
    xaxt="n", frame=F, xlab="")
jj<-seq(z1,z2,0.01)
cord.x<- jj
cord.y<- dnorm(jj)
polygon(c(-1, cord.x, 2), c(0, cord.y, 0), col="skyblue")
axis(1,at=c(-5,z1,0,z2,5),lab=c(-5,z1,0,z2,5))
abline(v=c(z1,z2))
axis(1, at=c(-5, z1, 0, z2, 5), lab=(c(-5,z1,0,z2,5) + 5)*2, line=2)
segments(.5, .1, 3, .2, lwd=2)
lbl <- paste0("Area = ", round(pnorm(2) - pnorm(-1), 4))
text(3, .2, lbl, pos=4, offset=.25)
par(oldp)


----------------------------------------
David L Carlson
Department of Anthropology
Texas A&M University
College Station, TX 77843-4352





From: Steven Yen <styen at ntu.edu.tw> 
Sent: Monday, October 22, 2018 11:53 AM
To: David L Carlson <dcarlson at tamu.edu>
Subject: Re: [R] Polygon

Thanks David. I do know what to do with pnorm.
By call-out I was hoping to get indication/annotation of probability like the attached.
Maybe I am asking too much of the data, as I suspect R is not meant to do that.
I appreciate your help. I am just trying to make these graphs for stat teaching without graphic software like correl draw.
On 10/22/2018 9:34 PM, David L Carlson wrote:
Yes, par(oldp) resets the parameter to its original value.

The simplest way to get the area in this case would be to use pnorm():

pnorm(2) - pnorm(-1)
[1] 0.8185946

If you have an arbitrary polygon, you can use polyarea() in the pracma package:

library(pracma)
polyarea(rev(c(-1, cord.x, 2)), rev(c(0, cord.y, 0)))
[1] 0.8185917

The second differs slightly from the first because it is an approximation based on 101 points (the default for the curve() function). The polyarea() function wants the polygon to be defined counter-clockwise so we use rev() to reverse the coordinates. Without this you will get a negative area, but you can always use abs() to fix that:

polyarea(c(-1, cord.x, 2), c(0, cord.y, 0))
[1] -0.8185917
abs(polyarea(c(-1, cord.x, 2), c(0, cord.y, 0)))
[1] 0.8185917

One more point. Don?t use abbreviations for TRUE and FALSE (e.g. frame=F). FALSE cannot be redefined, but F can be. If you used a variable called F in earlier code, it could change the behavior of curve():

curve(dnorm(x,0,1), xlim=c(-5, 5), frame=F)
FALSE <- 1
Error in FALSE <- 1 : invalid (do_set) left-hand side to assignment
F <- 1
curve(dnorm(x,0,1), xlim=c(-5, 5), frame=F)

----------------------------------------
David L Carlson
Department of Anthropology
Texas A&M University
College Station, TX 77843-4352



From: Steven Yen mailto:styen at ntu.edu.tw 
Sent: Sunday, October 21, 2018 9:54 PM
To: David L Carlson mailto:dcarlson at tamu.edu
Subject: Re: [R] Polygon

Thank you David. This is great!!
I can follow all you do, except one. What does the last statement do: par(oldp). I would think that it reset the parameters, needed only if there is a next job.

I am a little embarrassed to push this further, but let me see if I can bounce another thing out of this.

Is it possible to have a "call-out", somehow indicating that the probability associated witht he shaded area is, say, 0.45. Is this possible? Am I asking too much of R? Fine if not. Thanks again!!!
On 10/22/2018 4:24 AM, David L Carlson wrote:
I think this does what you want.

z1<- -1
z2<-  2
oldp <- par(mgp=c(3, .5, 0))
curve(dnorm(x,0,1), xlim=c(-5, 5),main="Standard Normal",
    xaxt="n", frame=F, xlab="")
jj<-seq(z1,z2,0.01)
cord.x<- jj
cord.y<- dnorm(jj)
polygon(c(-1, cord.x, 2), c(0, cord.y, 0), col="skyblue")
axis(1,at=c(-5,z1,0,z2,5),lab=c(-5,z1,0,z2,5))
abline(v=c(z1,z2))
axis(1, at=c(-5, z1, 0, z2, 5), lab=(c(-5,z1,0,z2,5) + 5)*2, line=2)
par(oldp)

When you assign a vector to an object, you do not need to use c(), e.g. cord.x <- jj. I expanded xlim= since you were labeling the axis at -5, and 5, but only drawing the plot from -4 to 4.

To get the polygon to work, you need to add points to the baseline at at either end.

The line= argument in axis() lets you put an axis line into the margin of the plot. I used the mgp= argument in par() to close the space between the tickmarks and their values.
--------------------------------------
David L. Carlson
Department of Anthropology
Texas A&M University

-----Original Message-----
From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Steven Yen
Sent: Sunday, October 21, 2018 1:47 PM
To: David Winsemius mailto:dwinsemius at comcast.net
Cc: mailto:r-help at r-project.org
Subject: Re: [R] Polygon

David, Rui, and All:
Greetings.
1. I need a helping hand with the polygon statement below so that I can 
have the area under the curve highlighted, between (z1,z2).
2. Is it possible to label the X-axis with in two scale, in the current 
z-scale and another, say x = (z+5)*2?
Thank you.

z1<- -1
z2<-? 2
curve(dnorm(x,0,1),xlim=c(-4,4),main="Standard 
Normal",xaxt="n",frame=F,xlab="z")
jj<-seq(z1,z2,0.01)
cord.x<-c(jj)
cord.y<-c(dnorm(jj))
#polygon(cord.x,cord.y,col="skyblue")
axis(1,at=c(-5,z1,0,z2,5),lab=c(-5,z1,0,z2,5))
abline(v=c(z1,z2))





-- 
mailto:styen at ntu.edu.tw (S.T. Yen)

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Plot.png
Type: image/png
Size: 8028 bytes
Desc: Plot.png
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20181022/89fd1580/attachment-0002.png>

From robertob@kker @end|ng |rom gm@||@com  Mon Oct 22 19:30:24 2018
From: robertob@kker @end|ng |rom gm@||@com (P. Roberto Bakker)
Date: Mon, 22 Oct 2018 19:30:24 +0200
Subject: [R] Different stack barplots - same color legends
In-Reply-To: <af9001d319ac4992b0bfc5526150f03b@tamu.edu>
References: <CAKDq9_N16xaeL4O2j=v2bVuMb=tuHfu0Ao+yuLQcEq6B-ngq1A@mail.gmail.com>
 <af9001d319ac4992b0bfc5526150f03b@tamu.edu>
Message-ID: <CAKDq9_P8hQEHWFH=c_86bG81fU0GS+EUCOmtZ9gJa_7kY-2uhA@mail.gmail.com>

Dear David,

Thank you for you quite response.
My apologies for not giving some sample data - this is due to AVG.
*But this minisample should not be a problem (all in Dutch)*:
 teamq
# A tibble: 4 x 2
  `Ik volg bijscholing om mijn opleiders-kwaliteiten op peil te houden`

  <chr>

1 de situatie in hoge mate van toepassing is voor u of uw
supervisorengroep
2 de situatie in zeer hoge mate van toepassing is voor u of uw
supervisorengroep
3 de situatie in zeer hoge mate van toepassing is voor u of uw
supervisorengroep
4 de situatie in geringe mate van toepassing is voor u of uw
supervisorengroep
  `Ik weet precies wat de ?modernisering van de opleiding? inhoudt`

  <chr>

1 de situatie in hoge mate van toepassing is voor u of uw
supervisorengroep
2 de situatie in zeer hoge mate van toepassing is voor u of uw
supervisorengroep
3 de situatie in zeer hoge mate van toepassing is voor u of uw
supervisorengroep
4 de situatie in geringe mate van toepassing is voor u of uw
supervisorengroep

As you see the likert items are in words, and I should change them in
nummeric - Am I correct?

*To do this, I tried (see further below):*
plyr rename() ; I receive the message it should be a factor or character
dplyr recode() ; same message
mapvalues() ; it should be atomic, so I used as.atomic(teamq) but then I
receive the nummers a strings.

*The syntaxes*
require(plyr)
example2 <- revalue(teamq,
                    c("de situatie in zeer geringe mate van toepassing is
voor u of uw supervisorengroep"= "1",
                        "de situatie in geringe mate van toepassing is voor
u of uw supervisorengroep"= "2",
                        "de situatie enigszins van toepassing is voor u of
uw supervisorengroep"= "3",
                        "de situatie in hoge mate van toepassing is voor u
of uw supervisorengroep"= "4",
                        "de situatie in zeer hoge mate van toepassing is
voor u of uw supervisorengroep"= "5"))

require(dplyr)
example2 <- recode(teamq,
                    c("de situatie in zeer geringe mate van toepassing is
voor u of uw supervisorengroep"= "1",
                      "de situatie in geringe mate van toepassing is voor u
of uw supervisorengroep"= "2",
                      "de situatie enigszins van toepassing is voor u of uw
supervisorengroep"= "3",
                      "de situatie in hoge mate van toepassing is voor u of
uw supervisorengroep"= "4",
                      "de situatie in zeer hoge mate van toepassing is voor
u of uw supervisorengroep"= "5"))

mapvalues(as.matrix(teamq), from = c("de situatie in zeer geringe mate van
toepassing is voor u of uw supervisorengroep",
                        "de situatie in geringe mate van toepassing is voor
u of uw supervisorengroep",
                        "de situatie enigszins van toepassing is voor u of
uw supervisorengroep",
                        "de situatie in hoge mate van toepassing is voor u
of uw supervisorengroep",
                        "de situatie in zeer hoge mate van toepassing is
voor u of uw supervisorengroep"),
          to = c(1,2,3,4,5))

What should I do?
Thank you in advance, Roberto

Op ma 22 okt. 2018 om 17:13 schreef David L Carlson <dcarlson at tamu.edu>:

> Your example is not reproducible since you did not give us some sample
> data. I suspect that your data frame consists of columns that represent
> questions and rows that represent individuals who answered the questions.
> First create a simple example:
>
> set.seed(42)
> teamq <- data.frame(V1=sample(c(1, 2, 4, 5), 25, replace = TRUE),
>      V2=sample(c(1, 2, 3, 4, 5), 25, replace=TRUE),
>      V3=sample(c(2, 3, 4, 5), 25, replace=TRUE))
>
> Notice that this data frame ONLY contains questions (and only 3
> questions). Here are 2 ways to get what you want. The first one stacks the
> data:
>
> teamq.stack <- stack(teamq)
> str(teamq.stack)
> counts <- table(teamq.stack)
> str(counts)
>
> The second one converts each column to a factor with levels 1 - 5:
>
> teamq2 <- data.frame(lapply(teamq, factor, levels=1:5))
> str(teamq2)
> counts <- sapply(teamq2, table)
> str(counts)
>
> Now make the plots:
>
> cols <- c("yellow","sandybrown","orange", "darkolivegreen","green")
> barplot(counts[, 1], horiz=TRUE, col=cols, legend=TRUE)
> barplot(counts[, 2], horiz=TRUE, col=cols, legend=TRUE)
> barplot(counts[, 3], horiz=TRUE, col=cols, legend=TRUE)
>
> You will need to adjust the xlim= argument so that the legend does not
> print on top of the bars.
>
> ----------------------------------------
> David L Carlson
> Department of Anthropology
> Texas A&M University
> College Station, TX 77843-4352
>
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of P. Roberto Bakker
> Sent: Monday, October 22, 2018 9:04 AM
> To: R mailing list <r-help at r-project.org>
> Subject: [R] Different stack barplots - same color legends
>
> Hi,
>
> I want to make barplots from different questions (columns) in one
> data.frame.
> Each question has the same 5 likert items.
> Now the problem: in some questions all items are answered; in other less.
> From the syntax below I get nice stack barplots - *but the legend colors do
> not* refer to the same likert-item, which I understand - the colors go in
> sequence along the table.
> Question: how can I write a syntax that each likert-item has the same
> legend color?
> Thank you in advance,
>
> Roberto
>
> SYNTAX:
> counts19 <- table(teamq[,19])
> counts20 <- table(teamq[,20])
> barplot(as.matrix(counts19), horiz = T,
>         col=c("yellow","sandybrown","orange", "darkolivegreen","green"),
> legend=T)
> barplot(as.matrix(counts20), horiz = T,
>         col=c("yellow","sandybrown","orange", "darkolivegreen","green"),
> legend=T)
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From rhe|p @end|ng |rom krueger-|@m||y@de  Mon Oct 22 19:33:48 2018
From: rhe|p @end|ng |rom krueger-|@m||y@de (Knut Krueger)
Date: Mon, 22 Oct 2018 19:33:48 +0200
Subject: [R] 
 match() question or needle haystack problem for a data.frame
In-Reply-To: <CAGxFJbS7vgQQK8t-X_z==on+jzYtDMmroCv3hPM6HWyU0Uq7Jw@mail.gmail.com>
References: <cac83a2c-2edd-e0e9-8b54-96afd48d401d@krueger-family.de>
 <CAGxFJbQrCaH6jLzMU60dx-U7m3oNT-zt1FhUOmcaOb-8njrp2w@mail.gmail.com>
 <CAGgJW74Tebw5CNDGVSf32bF7cMwkM3z=qi++8-SUPFYOHynYGQ@mail.gmail.com>
 <6ebcd80a-1786-34bb-d852-d05bfa24c9bc@krueger-family.de>
 <CAGxFJbS7vgQQK8t-X_z==on+jzYtDMmroCv3hPM6HWyU0Uq7Jw@mail.gmail.com>
Message-ID: <5991590c-ad47-bbbc-a187-702133e6cbf8@krueger-family.de>

Am 22.10.18 um 18:02 schrieb Bert Gunter:
> I suggest you spend a bit of time with an R tutorial or two and, in 
> particular learn about "logical indexing," as this basic R construct 
> seems to be mysterious to you.

Hi Bert,

especially the "match" help area is a little bit confusing.

And additional using a couple of programming languages with different 
logical operators and different syntax is misleading me sometimes to the 
wrong direction...

So the logic operations itself are not mysterious ;-)  but the 
translation to R.
And thank's a lot to give me the keyword to find for what I am was 
looking for: logical indexing.

I can not count the sites where I was looking to solve my problem .. 
with the wrong keywords ... :-)

Kind Regards Knut



From rmh @end|ng |rom temp|e@edu  Mon Oct 22 20:10:02 2018
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Mon, 22 Oct 2018 14:10:02 -0400
Subject: [R] Different stack barplots - same color legends
In-Reply-To: <CAKDq9_P8hQEHWFH=c_86bG81fU0GS+EUCOmtZ9gJa_7kY-2uhA@mail.gmail.com>
References: <CAKDq9_N16xaeL4O2j=v2bVuMb=tuHfu0Ao+yuLQcEq6B-ngq1A@mail.gmail.com>
 <af9001d319ac4992b0bfc5526150f03b@tamu.edu>
 <CAKDq9_P8hQEHWFH=c_86bG81fU0GS+EUCOmtZ9gJa_7kY-2uhA@mail.gmail.com>
Message-ID: <CAGx1TMAYybconxY7ZVVJcdiYW6+WOjr_D+=GHOA=Xxv2AWRCqQ@mail.gmail.com>

Try the likert function in
install.packages("HH) ## if necessary
library(HH)

Then using David Carlson's example teamq
likert(teamq)

Your example in the 1:30PM (Eastern Daylight Time) doesn't work.
Error in revalue(teamq, c(`de situatie in zeer geringe mate van
toepassing is\nvoor u of uw supervisorengroep` = "1",  :
  x is not a factor or a character vector.

There are many examples in
?likert

Rich


On Mon, Oct 22, 2018 at 1:30 PM, P. Roberto Bakker
<robertobakker at gmail.com> wrote:
> Dear David,
>
> Thank you for you quite response.
> My apologies for not giving some sample data - this is due to AVG.
> *But this minisample should not be a problem (all in Dutch)*:
>  teamq
> # A tibble: 4 x 2
>   `Ik volg bijscholing om mijn opleiders-kwaliteiten op peil te houden`
>
>   <chr>
>
> 1 de situatie in hoge mate van toepassing is voor u of uw
> supervisorengroep
> 2 de situatie in zeer hoge mate van toepassing is voor u of uw
> supervisorengroep
> 3 de situatie in zeer hoge mate van toepassing is voor u of uw
> supervisorengroep
> 4 de situatie in geringe mate van toepassing is voor u of uw
> supervisorengroep
>   `Ik weet precies wat de ?modernisering van de opleiding? inhoudt`
>
>   <chr>
>
> 1 de situatie in hoge mate van toepassing is voor u of uw
> supervisorengroep
> 2 de situatie in zeer hoge mate van toepassing is voor u of uw
> supervisorengroep
> 3 de situatie in zeer hoge mate van toepassing is voor u of uw
> supervisorengroep
> 4 de situatie in geringe mate van toepassing is voor u of uw
> supervisorengroep
>
> As you see the likert items are in words, and I should change them in
> nummeric - Am I correct?
>
> *To do this, I tried (see further below):*
> plyr rename() ; I receive the message it should be a factor or character
> dplyr recode() ; same message
> mapvalues() ; it should be atomic, so I used as.atomic(teamq) but then I
> receive the nummers a strings.
>
> *The syntaxes*
> require(plyr)
> example2 <- revalue(teamq,
>                     c("de situatie in zeer geringe mate van toepassing is
> voor u of uw supervisorengroep"= "1",
>                         "de situatie in geringe mate van toepassing is voor
> u of uw supervisorengroep"= "2",
>                         "de situatie enigszins van toepassing is voor u of
> uw supervisorengroep"= "3",
>                         "de situatie in hoge mate van toepassing is voor u
> of uw supervisorengroep"= "4",
>                         "de situatie in zeer hoge mate van toepassing is
> voor u of uw supervisorengroep"= "5"))
>
> require(dplyr)
> example2 <- recode(teamq,
>                     c("de situatie in zeer geringe mate van toepassing is
> voor u of uw supervisorengroep"= "1",
>                       "de situatie in geringe mate van toepassing is voor u
> of uw supervisorengroep"= "2",
>                       "de situatie enigszins van toepassing is voor u of uw
> supervisorengroep"= "3",
>                       "de situatie in hoge mate van toepassing is voor u of
> uw supervisorengroep"= "4",
>                       "de situatie in zeer hoge mate van toepassing is voor
> u of uw supervisorengroep"= "5"))
>
> mapvalues(as.matrix(teamq), from = c("de situatie in zeer geringe mate van
> toepassing is voor u of uw supervisorengroep",
>                         "de situatie in geringe mate van toepassing is voor
> u of uw supervisorengroep",
>                         "de situatie enigszins van toepassing is voor u of
> uw supervisorengroep",
>                         "de situatie in hoge mate van toepassing is voor u
> of uw supervisorengroep",
>                         "de situatie in zeer hoge mate van toepassing is
> voor u of uw supervisorengroep"),
>           to = c(1,2,3,4,5))
>
> What should I do?
> Thank you in advance, Roberto
>
> Op ma 22 okt. 2018 om 17:13 schreef David L Carlson <dcarlson at tamu.edu>:
>
>> Your example is not reproducible since you did not give us some sample
>> data. I suspect that your data frame consists of columns that represent
>> questions and rows that represent individuals who answered the questions.
>> First create a simple example:
>>
>> set.seed(42)
>> teamq <- data.frame(V1=sample(c(1, 2, 4, 5), 25, replace = TRUE),
>>      V2=sample(c(1, 2, 3, 4, 5), 25, replace=TRUE),
>>      V3=sample(c(2, 3, 4, 5), 25, replace=TRUE))
>>
>> Notice that this data frame ONLY contains questions (and only 3
>> questions). Here are 2 ways to get what you want. The first one stacks the
>> data:
>>
>> teamq.stack <- stack(teamq)
>> str(teamq.stack)
>> counts <- table(teamq.stack)
>> str(counts)
>>
>> The second one converts each column to a factor with levels 1 - 5:
>>
>> teamq2 <- data.frame(lapply(teamq, factor, levels=1:5))
>> str(teamq2)
>> counts <- sapply(teamq2, table)
>> str(counts)
>>
>> Now make the plots:
>>
>> cols <- c("yellow","sandybrown","orange", "darkolivegreen","green")
>> barplot(counts[, 1], horiz=TRUE, col=cols, legend=TRUE)
>> barplot(counts[, 2], horiz=TRUE, col=cols, legend=TRUE)
>> barplot(counts[, 3], horiz=TRUE, col=cols, legend=TRUE)
>>
>> You will need to adjust the xlim= argument so that the legend does not
>> print on top of the bars.
>>
>> ----------------------------------------
>> David L Carlson
>> Department of Anthropology
>> Texas A&M University
>> College Station, TX 77843-4352
>>
>>
>> -----Original Message-----
>> From: R-help <r-help-bounces at r-project.org> On Behalf Of P. Roberto Bakker
>> Sent: Monday, October 22, 2018 9:04 AM
>> To: R mailing list <r-help at r-project.org>
>> Subject: [R] Different stack barplots - same color legends
>>
>> Hi,
>>
>> I want to make barplots from different questions (columns) in one
>> data.frame.
>> Each question has the same 5 likert items.
>> Now the problem: in some questions all items are answered; in other less.
>> From the syntax below I get nice stack barplots - *but the legend colors do
>> not* refer to the same likert-item, which I understand - the colors go in
>> sequence along the table.
>> Question: how can I write a syntax that each likert-item has the same
>> legend color?
>> Thank you in advance,
>>
>> Roberto
>>
>> SYNTAX:
>> counts19 <- table(teamq[,19])
>> counts20 <- table(teamq[,20])
>> barplot(as.matrix(counts19), horiz = T,
>>         col=c("yellow","sandybrown","orange", "darkolivegreen","green"),
>> legend=T)
>> barplot(as.matrix(counts20), horiz = T,
>>         col=c("yellow","sandybrown","orange", "darkolivegreen","green"),
>> legend=T)
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Oct 22 21:55:30 2018
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 22 Oct 2018 12:55:30 -0700 (PDT)
Subject: [R] 
 Transformations in Tidyverse (renaming and ordering columns)
In-Reply-To: <CA+O61snvxz8-Ph5RWuSbzaS47aTf__+XFb=bOT2YviHt8isASg@mail.gmail.com>
References: <CA+O61snvxz8-Ph5RWuSbzaS47aTf__+XFb=bOT2YviHt8isASg@mail.gmail.com>
Message-ID: <alpine.BSF.2.00.1810221214590.4367@pedal.dcn.davis.ca.us>

IMO your question is flawed in that it does not present a desired output.

One thought that occurs to me is that perhaps you should stop treating 
everything like a nail and use some different tools, like nest and a for 
loop:

############################
library(knitr)
library(tibble)
library(dplyr)
#>
#> Attaching package: 'dplyr'
#> The following objects are masked from 'package:stats':
#>
#>     filter, lag
#> The following objects are masked from 'package:base':
#>
#>     intersect, setdiff, setequal, union
library(tidyr)

testset <- as_tibble(tribble(~Section, ~Observation, ~Order, ~Fiscal, ~Value,
                              "A", "One", 1, "2016-17", 419,
                              "A", "One", 1, "2017-18", 499,
                              "A", "One", 1, "2018-19", 463,
                              "A", "Two", 2, "2016-17", 391,
                              "A", "Two", 2, "2017-18", 445,
                              "A", "Two", 2, "2018-19", 423,
                              "A", "Three", 3, "2016-17", 348,
                              "A", "Three", 3, "2017-18", 353,
                              "A", "Three", 3, "2018-19", 357,
                              "B", "One", 1, "2016-17", 418,
                              "B", "One", 1, "2017-18", 498,
                              "B", "One", 1, "2018-19", 462,
                              "B", "Two", 2, "2016-17", 390,
                              "B", "Two", 2, "2017-18", 444,
                              "B", "Two", 2, "2018-19", 422,
                              "B", "Three", 3, "2016-17", 347,
                              "B", "Three", 3, "2017-18", 352,
                              "B", "Three", 3, "2018-19", 356
                              ))

sections <- (   testset
             %>% select( -Order )
             %>% spread( Observation, Value )
             %>% nest( -Section )
             )
# look at one of the sub-tables
sections[[ "data" ]][[1]]
#> # A tibble: 3 x 4
#>   Fiscal    One Three   Two
#>   <chr>   <dbl> <dbl> <dbl>
#> 1 2016-17   419   348   391
#> 2 2017-18   499   353   445
#> 3 2018-19   463   357   423

# print out the tables with captions
for ( rw in seq.int( nrow( sections ) ) ) {
     print( knitr::kable( sections[[ "data" ]][ rw ]
                        , caption = paste( "Section"
                                         , sections[[ "Section" ]][ rw ] )
                        , format = "pandoc"
                        )
          )
}
#>
#> Section A
#>
#> Fiscal     One   Three   Two
#> --------  ----  ------  ----
#> 2016-17    419     348   391
#> 2017-18    499     353   445
#> 2018-19    463     357   423
#>
#>
#> Section B
#>
#> Fiscal     One   Three   Two
#> --------  ----  ------  ----
#> 2016-17    418     347   390
#> 2017-18    498     352   444
#> 2018-19    462     356   422
#>
############################

On Mon, 22 Oct 2018, Joel Maxuel wrote:

> Hello all,
>
> I am slowly picking away at a factsheet that will include several result
> sets from a single tibble (there is a column identifying the section title)
> and would like to have that value in the top left corner of each resulting
> table.  When using the `spread` function, I see that any remaining columns
> not identified by `key` nor `value` will be placed to the far left.
>
> Like the example below, I would like the column label Fiscal be renamed to
> the data value "A", so the top-left of the result is "A".  However, if I
> try to progmatically set the column name, I run into issues:
>
>
> library(knitr)
> library(tidyverse)
> library(tibble)
> library(dplyr)
> library(magrittr)
>
> testset <- as_tibble(tribble(~Section, ~Observation, ~Order, ~Fiscal,
> ~Value,
>                             "A", "One", 1, "2016-17", 419,
>                             "A", "One", 1, "2017-18", 499,
>                             "A", "One", 1, "2018-19", 463,
>                             "A", "Two", 2, "2016-17", 391,
>                             "A", "Two", 2, "2017-18", 445,
>                             "A", "Two", 2, "2018-19", 423,
>                             "A", "Three", 3, "2016-17", 348,
>                             "A", "Three", 3, "2017-18", 353,
>                             "A", "Three", 3, "2018-19", 357))
> sectionA <- as_tibble(filter(testset, Section == "A")) # Mind you for this
> example, does very little
> spread(select(sectionA, Observation, "A" = Fiscal, Value), key=Observation,
> value=Value) # Works, with reservations
> spread(select(sectionA, Observation, slice(sectionA,1) %>%
> magrittr::extract2("Section") = Fiscal, Value), key=Observation,
> value=Value) # Produces error:
> # Error: unexpected '=' in "spread(select(sectionA, Observation,
> slice(sectionA,1) %>% magrittr::extract2("Section") ="
>
>
> I presume my premise is very wrong.
>
> Also, I am curious how to sort columns (and rows) with extra columns
> (/rows) not meant for display.  In this case, the columns One, Two, and
> Three (in real life won't be linguistic representations of numbers), are
> out of order - however I do have the Order column to fix that (if I knew
> how to include it for sorting purposes, without displaying it).  A few
> hints here would help.  (Perhaps there is column/row hiding in kableExtra -
> which I will be using later on?)
>
> --
> Cheers,
> Joel Maxuel
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                       Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k



From j@m@xue| @end|ng |rom gm@||@com  Mon Oct 22 22:57:55 2018
From: j@m@xue| @end|ng |rom gm@||@com (Joel Maxuel)
Date: Mon, 22 Oct 2018 17:57:55 -0300
Subject: [R] 
 Transformations in Tidyverse (renaming and ordering columns)
In-Reply-To: <alpine.BSF.2.00.1810221214590.4367@pedal.dcn.davis.ca.us>
References: <CA+O61snvxz8-Ph5RWuSbzaS47aTf__+XFb=bOT2YviHt8isASg@mail.gmail.com>
 <alpine.BSF.2.00.1810221214590.4367@pedal.dcn.davis.ca.us>
Message-ID: <CA+O61s=XqesQTTH4Z2BancMG7NbZoVsmymVGFbsfjEOe3YpZ2w@mail.gmail.com>

Hi Jeff,

Thanks for the input, however it does not seem we are on the same
wavelength.  Maybe I should have distilled my example down even further to
solidify context, although given what I was trying to accomplish I believe
it is all in context.

At this point I am not concerned about presenting multiple sections
(agreed, looping will be important) - my emphasis right now is to present
just one piece in a manner that makes sense.  As a result, I am finding
that using `spread` to convert the flat data into a "crosstab" does not.

The flat data has (IMO - at least the wider version I have locally) all the
info needed to allow a sort to be enforced, and any miscellaneous data for
that section, without having to customize each section individually (in
essence, allow for looping).  With regard to sorting, in the past hour or
so I have tried the `seq` parameter (after changing `key` to the `Order`
column) in `spread`, as well as the `arrange` function after `spread` but
neither are helpful.

I have considered a leading character in the headings to force a sort, with
something to trim it from the final output, but I am not fond of that
solution.  Also, having the section heading outside the table to me feels
like a waste of space.  With 13 proposed sections in the end (120 to 140
observations), having that all in only two pages may already be a challenge.

--
Cheers,
Joel Maxuel

	[[alternative HTML version deleted]]



From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Oct 22 23:17:57 2018
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 22 Oct 2018 14:17:57 -0700
Subject: [R] 
 Transformations in Tidyverse (renaming and ordering columns)
In-Reply-To: <CA+O61s=XqesQTTH4Z2BancMG7NbZoVsmymVGFbsfjEOe3YpZ2w@mail.gmail.com>
References: <CA+O61snvxz8-Ph5RWuSbzaS47aTf__+XFb=bOT2YviHt8isASg@mail.gmail.com>
 <alpine.BSF.2.00.1810221214590.4367@pedal.dcn.davis.ca.us>
 <CA+O61s=XqesQTTH4Z2BancMG7NbZoVsmymVGFbsfjEOe3YpZ2w@mail.gmail.com>
Message-ID: <27506B46-D7F6-463E-A706-1E37677EF90F@dcn.davis.ca.us>

If you are willing to work in the context of LaTeX output then perhaps you will find the "tables" package useful. However, while you think you have communicated clearly enough regarding what you want to accomplish, I do not, so either someone else will intuit what you want or you will create a mock-up of what you want your output to look like to remove the guesswork.

On October 22, 2018 1:57:55 PM PDT, Joel Maxuel <j.maxuel at gmail.com> wrote:
>Hi Jeff,
>
>Thanks for the input, however it does not seem we are on the same
>wavelength.  Maybe I should have distilled my example down even further
>to
>solidify context, although given what I was trying to accomplish I
>believe
>it is all in context.
>
>At this point I am not concerned about presenting multiple sections
>(agreed, looping will be important) - my emphasis right now is to
>present
>just one piece in a manner that makes sense.  As a result, I am finding
>that using `spread` to convert the flat data into a "crosstab" does
>not.
>
>The flat data has (IMO - at least the wider version I have locally) all
>the
>info needed to allow a sort to be enforced, and any miscellaneous data
>for
>that section, without having to customize each section individually (in
>essence, allow for looping).  With regard to sorting, in the past hour
>or
>so I have tried the `seq` parameter (after changing `key` to the
>`Order`
>column) in `spread`, as well as the `arrange` function after `spread`
>but
>neither are helpful.
>
>I have considered a leading character in the headings to force a sort,
>with
>something to trim it from the final output, but I am not fond of that
>solution.  Also, having the section heading outside the table to me
>feels
>like a waste of space.  With 13 proposed sections in the end (120 to
>140
>observations), having that all in only two pages may already be a
>challenge.
>
>--
>Cheers,
>Joel Maxuel

-- 
Sent from my phone. Please excuse my brevity.



From j@m@xue| @end|ng |rom gm@||@com  Tue Oct 23 01:55:01 2018
From: j@m@xue| @end|ng |rom gm@||@com (Joel Maxuel)
Date: Mon, 22 Oct 2018 20:55:01 -0300
Subject: [R] 
 Transformations in Tidyverse (renaming and ordering columns)
In-Reply-To: <27506B46-D7F6-463E-A706-1E37677EF90F@dcn.davis.ca.us>
References: <CA+O61snvxz8-Ph5RWuSbzaS47aTf__+XFb=bOT2YviHt8isASg@mail.gmail.com>
 <alpine.BSF.2.00.1810221214590.4367@pedal.dcn.davis.ca.us>
 <CA+O61s=XqesQTTH4Z2BancMG7NbZoVsmymVGFbsfjEOe3YpZ2w@mail.gmail.com>
 <27506B46-D7F6-463E-A706-1E37677EF90F@dcn.davis.ca.us>
Message-ID: <CA+O61smfme2OuARz7LB7jdMmUQBkR1TqL+P3jTXXjxF-jH5AQA@mail.gmail.com>

For clarity sake.  More show (with example closer to reality), less tell.
:^)

## Current:

> library(knitr)
> library(tidyverse)
?? Conflicts
?????????????????????????????????????????????????????????????????????
tidyverse_conflicts() ??
x dplyr::filter() masks stats::filter()
x dplyr::lag()    masks stats::lag()
> library(tibble)
> library(dplyr)
>
> testset <- as_tibble(tribble(~SN, ~Section, ~Order, ~Observation, ~Seq,
~Label, ~Value,
+                              2, "For Reporting Quarter", 1, "One", 1,
"Western", 163,
+                              2, "For Reporting Quarter", 1, "One", 2,
"Northern", 105,
+                              2, "For Reporting Quarter", 1, "One", 3,
"Eastern", 121,
+                              2, "For Reporting Quarter", 1, "One", 4,
"Southern", 74,
+                              2, "For Reporting Quarter", 2, "Two", 1,
"Western", 147,
+                              2, "For Reporting Quarter", 2, "Two", 2,
"Northern", 100,
+                              2, "For Reporting Quarter", 2, "Two", 3,
"Eastern", 106,
+                              2, "For Reporting Quarter", 2, "Two", 4,
"Southern", 70,
+                              2, "For Reporting Quarter", 3, "Three", 1,
"Western", 119,
+                              2, "For Reporting Quarter", 3, "Three", 2,
"Northern", 82,
+                              2, "For Reporting Quarter", 3, "Three", 3,
"Eastern", 90,
+                              2, "For Reporting Quarter", 3, "Three", 4,
"Southern", 65))
> testset %>% select(Observation, Label, Value) %>% spread(key=Observation,
value=Value)
# A tibble: 4 x 4
  Label      One Three   Two
  <chr>    <dbl> <dbl> <dbl>
1 Eastern    121    90   106
2 Northern   105    82   100
3 Southern    74    65    70
4 Western    163   119   147
>

## Intended:

# A tibble: 4 x 4
  For Reporting Quarter     One   Two Three
  <chr>                          <dbl> <dbl> <dbl>
1 Western                       163   147   119
2 Northern                       105   100    82
3 Eastern                        121   106    90
4 Southern                       74     70     65
>

##

Unfortunately I don't know how to get there from here.  Section, Order and
Seq are there to assist with getting the data to the right output
programmatically, however I don't know how to make use of them.

Hope this helps.

--
Cheers,
Joel Maxuel


On Mon, Oct 22, 2018 at 6:18 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> If you are willing to work in the context of LaTeX output then perhaps you
> will find the "tables" package useful. However, while you think you have
> communicated clearly enough regarding what you want to accomplish, I do
> not, so either someone else will intuit what you want or you will create a
> mock-up of what you want your output to look like to remove the guesswork.
>
>

	[[alternative HTML version deleted]]



From bgunter@4567 @end|ng |rom gm@||@com  Tue Oct 23 03:31:06 2018
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 22 Oct 2018 18:31:06 -0700
Subject: [R] 
 Transformations in Tidyverse (renaming and ordering columns)
In-Reply-To: <CA+O61smfme2OuARz7LB7jdMmUQBkR1TqL+P3jTXXjxF-jH5AQA@mail.gmail.com>
References: <CA+O61snvxz8-Ph5RWuSbzaS47aTf__+XFb=bOT2YviHt8isASg@mail.gmail.com>
 <alpine.BSF.2.00.1810221214590.4367@pedal.dcn.davis.ca.us>
 <CA+O61s=XqesQTTH4Z2BancMG7NbZoVsmymVGFbsfjEOe3YpZ2w@mail.gmail.com>
 <27506B46-D7F6-463E-A706-1E37677EF90F@dcn.davis.ca.us>
 <CA+O61smfme2OuARz7LB7jdMmUQBkR1TqL+P3jTXXjxF-jH5AQA@mail.gmail.com>
Message-ID: <CAGxFJbRMmX6kXQAZ-5GrERYiiLkELxBo3pCPz+Q+hrP6r-8j7g@mail.gmail.com>

For clarity's sake:

** Stop posting in HTML.**


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Oct 22, 2018 at 4:55 PM Joel Maxuel <j.maxuel at gmail.com> wrote:

> For clarity sake.  More show (with example closer to reality), less tell.
> :^)
>
> ## Current:
>
> > library(knitr)
> > library(tidyverse)
> ?? Conflicts
> ?????????????????????????????????????????????????????????????????????
> tidyverse_conflicts() ??
> x dplyr::filter() masks stats::filter()
> x dplyr::lag()    masks stats::lag()
> > library(tibble)
> > library(dplyr)
> >
> > testset <- as_tibble(tribble(~SN, ~Section, ~Order, ~Observation, ~Seq,
> ~Label, ~Value,
> +                              2, "For Reporting Quarter", 1, "One", 1,
> "Western", 163,
> +                              2, "For Reporting Quarter", 1, "One", 2,
> "Northern", 105,
> +                              2, "For Reporting Quarter", 1, "One", 3,
> "Eastern", 121,
> +                              2, "For Reporting Quarter", 1, "One", 4,
> "Southern", 74,
> +                              2, "For Reporting Quarter", 2, "Two", 1,
> "Western", 147,
> +                              2, "For Reporting Quarter", 2, "Two", 2,
> "Northern", 100,
> +                              2, "For Reporting Quarter", 2, "Two", 3,
> "Eastern", 106,
> +                              2, "For Reporting Quarter", 2, "Two", 4,
> "Southern", 70,
> +                              2, "For Reporting Quarter", 3, "Three", 1,
> "Western", 119,
> +                              2, "For Reporting Quarter", 3, "Three", 2,
> "Northern", 82,
> +                              2, "For Reporting Quarter", 3, "Three", 3,
> "Eastern", 90,
> +                              2, "For Reporting Quarter", 3, "Three", 4,
> "Southern", 65))
> > testset %>% select(Observation, Label, Value) %>% spread(key=Observation,
> value=Value)
> # A tibble: 4 x 4
>   Label      One Three   Two
>   <chr>    <dbl> <dbl> <dbl>
> 1 Eastern    121    90   106
> 2 Northern   105    82   100
> 3 Southern    74    65    70
> 4 Western    163   119   147
> >
>
> ## Intended:
>
> # A tibble: 4 x 4
>   For Reporting Quarter     One   Two Three
>   <chr>                          <dbl> <dbl> <dbl>
> 1 Western                       163   147   119
> 2 Northern                       105   100    82
> 3 Eastern                        121   106    90
> 4 Southern                       74     70     65
> >
>
> ##
>
> Unfortunately I don't know how to get there from here.  Section, Order and
> Seq are there to assist with getting the data to the right output
> programmatically, however I don't know how to make use of them.
>
> Hope this helps.
>
> --
> Cheers,
> Joel Maxuel
>
>
> On Mon, Oct 22, 2018 at 6:18 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> wrote:
>
> > If you are willing to work in the context of LaTeX output then perhaps
> you
> > will find the "tables" package useful. However, while you think you have
> > communicated clearly enough regarding what you want to accomplish, I do
> > not, so either someone else will intuit what you want or you will create
> a
> > mock-up of what you want your output to look like to remove the
> guesswork.
> >
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From john@|@|ng @end|ng |rom gm@||@com  Tue Oct 23 03:47:50 2018
From: john@|@|ng @end|ng |rom gm@||@com (John Laing)
Date: Mon, 22 Oct 2018 21:47:50 -0400
Subject: [R] 
 Transformations in Tidyverse (renaming and ordering columns)
In-Reply-To: <CA+O61smfme2OuARz7LB7jdMmUQBkR1TqL+P3jTXXjxF-jH5AQA@mail.gmail.com>
References: <CA+O61snvxz8-Ph5RWuSbzaS47aTf__+XFb=bOT2YviHt8isASg@mail.gmail.com>
 <alpine.BSF.2.00.1810221214590.4367@pedal.dcn.davis.ca.us>
 <CA+O61s=XqesQTTH4Z2BancMG7NbZoVsmymVGFbsfjEOe3YpZ2w@mail.gmail.com>
 <27506B46-D7F6-463E-A706-1E37677EF90F@dcn.davis.ca.us>
 <CA+O61smfme2OuARz7LB7jdMmUQBkR1TqL+P3jTXXjxF-jH5AQA@mail.gmail.com>
Message-ID: <CAA3Wa=spwURbFqBDWU_kdSRzgJRHC+p5dPFioqxYyu7SWyQr5A@mail.gmail.com>

I don't know much about the Tidyverse, but more generally the way to
represent ordered categorical data is with a factor. This seems to work:

> testset$Observation <- factor(testset$Observation, levels=c("One", "Two",
"Three"))
> testset$Label <- factor(testset$Label, levels=c("Western", "Northern",
"Eastern", "Southern"))
> testset %>% select(Observation, Label, Value) %>% spread(key=Observation,
value=Value)
# A tibble: 4 x 4
  Label      One   Two Three
  <fct>    <dbl> <dbl> <dbl>
1 Western    163   147   119
2 Northern   105   100    82
3 Eastern    121   106    90
4 Southern    74    70    65


JL

On Mon, Oct 22, 2018 at 7:55 PM Joel Maxuel <j.maxuel at gmail.com> wrote:

> For clarity sake.  More show (with example closer to reality), less tell.
> :^)
>
> ## Current:
>
> > library(knitr)
> > library(tidyverse)
> ?? Conflicts
> ?????????????????????????????????????????????????????????????????????
> tidyverse_conflicts() ??
> x dplyr::filter() masks stats::filter()
> x dplyr::lag()    masks stats::lag()
> > library(tibble)
> > library(dplyr)
> >
> > testset <- as_tibble(tribble(~SN, ~Section, ~Order, ~Observation, ~Seq,
> ~Label, ~Value,
> +                              2, "For Reporting Quarter", 1, "One", 1,
> "Western", 163,
> +                              2, "For Reporting Quarter", 1, "One", 2,
> "Northern", 105,
> +                              2, "For Reporting Quarter", 1, "One", 3,
> "Eastern", 121,
> +                              2, "For Reporting Quarter", 1, "One", 4,
> "Southern", 74,
> +                              2, "For Reporting Quarter", 2, "Two", 1,
> "Western", 147,
> +                              2, "For Reporting Quarter", 2, "Two", 2,
> "Northern", 100,
> +                              2, "For Reporting Quarter", 2, "Two", 3,
> "Eastern", 106,
> +                              2, "For Reporting Quarter", 2, "Two", 4,
> "Southern", 70,
> +                              2, "For Reporting Quarter", 3, "Three", 1,
> "Western", 119,
> +                              2, "For Reporting Quarter", 3, "Three", 2,
> "Northern", 82,
> +                              2, "For Reporting Quarter", 3, "Three", 3,
> "Eastern", 90,
> +                              2, "For Reporting Quarter", 3, "Three", 4,
> "Southern", 65))
> > testset %>% select(Observation, Label, Value) %>% spread(key=Observation,
> value=Value)
> # A tibble: 4 x 4
>   Label      One Three   Two
>   <chr>    <dbl> <dbl> <dbl>
> 1 Eastern    121    90   106
> 2 Northern   105    82   100
> 3 Southern    74    65    70
> 4 Western    163   119   147
> >
>
> ## Intended:
>
> # A tibble: 4 x 4
>   For Reporting Quarter     One   Two Three
>   <chr>                          <dbl> <dbl> <dbl>
> 1 Western                       163   147   119
> 2 Northern                       105   100    82
> 3 Eastern                        121   106    90
> 4 Southern                       74     70     65
> >
>
> ##
>
> Unfortunately I don't know how to get there from here.  Section, Order and
> Seq are there to assist with getting the data to the right output
> programmatically, however I don't know how to make use of them.
>
> Hope this helps.
>
> --
> Cheers,
> Joel Maxuel
>
>
> On Mon, Oct 22, 2018 at 6:18 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> wrote:
>
> > If you are willing to work in the context of LaTeX output then perhaps
> you
> > will find the "tables" package useful. However, while you think you have
> > communicated clearly enough regarding what you want to accomplish, I do
> > not, so either someone else will intuit what you want or you will create
> a
> > mock-up of what you want your output to look like to remove the
> guesswork.
> >
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From m|@ojpm @end|ng |rom gm@||@com  Tue Oct 23 05:15:37 2018
From: m|@ojpm @end|ng |rom gm@||@com (John)
Date: Tue, 23 Oct 2018 11:15:37 +0800
Subject: [R] SVAR: error message
Message-ID: <CABcx46CqaJBcMz7-UX_qOvLOmnbw8qjQ21zUpfCaUfUZ+QyxcQ@mail.gmail.com>

Hi,

  I have a bi-variate VAR model and would like to convert it to SVAR but
get an error message. Could someone pinpoint anything wrong and correct my
code? Thanks,

John


amat <- matrix(c(NA, 0, NA, NA), nrow = 2, ncol = 2, byrow = TRUE)
df1<-data.frame(x=c(1,4,5,6,7,8,9,3,5,3), y=c(4,7,1,2,3,9,3,4,5,7))
var1<-VAR(df1, type = "const", ic="BIC")
svar2<-SVAR(x = var1, estmethod = "scoring", Amat = amat, Bmat = diag(2),
            max.iter = 100, conv.crit = 0.1e-6, maxls = 1000)

> amat <- matrix(c(NA, 0, NA, NA), nrow = 2, ncol = 2, byrow = TRUE)
> df1<-data.frame(x=c(1,4,5,6,7,8,9,3,5,3), y=c(4,7,1,2,3,9,3,4,5,7))
> var1<-VAR(df1, type = "const", ic="BIC")
> svar2<-SVAR(x = var1, estmethod = "scoring", Amat = amat, Bmat = diag(2),
+             max.iter = 100, conv.crit = 0.1e-6, maxls = 1000)
Error in `[<-`(`*tmp*`, pos[i], i, value = 1) : subscript out of bounds

	[[alternative HTML version deleted]]



From @nuj@goy@| @end|ng |rom gm@||@com  Tue Oct 23 07:40:47 2018
From: @nuj@goy@| @end|ng |rom gm@||@com (Anuj Goyal)
Date: Mon, 22 Oct 2018 22:40:47 -0700
Subject: [R] quantmod::chart_Series() how to simplify x-axis labels?
Message-ID: <CAHuEqf=SRpb-D5Ou8SQTcuGDXz1JUkzxzKVqjQ-OrgeknWCE=A@mail.gmail.com>

Is there a way to easily simplify the x-axis labels for
quantmod::chart_Series()

https://stackoverflow.com/questions/52910667/quantmodchart-series-how-to-simplify-x-axis-labels

	[[alternative HTML version deleted]]



From tom@@@k@||ber@ @end|ng |rom gm@||@com  Tue Oct 23 10:43:12 2018
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Tue, 23 Oct 2018 10:43:12 +0200
Subject: [R] Cannot use R on Windows when installed to an external drive
 with a space in the path
In-Reply-To: <20181022201530.47d185b8@Tarkus>
References: <CANccLkyWSaKnrb9gczt62WqR9WVpAT5eXbJhkKRk_gRUcQhzxw@mail.gmail.com>
 <20181022201530.47d185b8@Tarkus>
Message-ID: <fadd7e57-5fcd-beef-7a2e-061ee0316b32@gmail.com>


On 10/22/2018 07:15 PM, Ivan Krylov wrote:
> This is a bin\R.exe + bin\Rscript.exe bug.
Please note this has been fixed in later versions of R, quoting has been 
added. If you can find some corner case in which the current quoting 
(R-devel) is incorrect on Windows, in the front-ends or anywhere else, 
please send a bug report with a reproducible example.

But please keep in mind my comment that some packages will not be 
working with space in the name of R home directory. Some packages will 
not build from source. CRAN has been checking for the most obvious cause 
of this (certain use of include directives in make files), but it is 
still not safe to use R on file systems without SFN.

Best,
Tomas
>
> On Windows, where the system call to create a process only takes one
> command line string instead of an array of command line parameters[0]
> (and the C runtimes usually call CommandLineToArgvW[1] behind the
> scenes to get an array back), execv() does nothing to prepare a
> properly-quoted command line and just concatenates its arguments[2].
> Moreover, Windows version of execv() is effectively undocumented[3],
> nor there is any information about the suggested replacement[4].
> (You can call it a Windows bug instead.)
>
> Short file names are not a guaranteed solution, because they may
> not be available at all on some filesystems[5] (which is how this
> error has been encountered). In the general case, "argument quoting
> hell"[6] is unavoidable on Windows, but the code from [2] implements
> the proper conversion from an array of strings to a single quoted
> command line, ready to be parsed by the launched process.
>
> char* getRHOME(int m) in src/gnuwin32/rhome.c tries to return a short
> path (assuming it won't contain spaces). This is used by rcmdfn() from
> src/gnuwin32/front-ends/rcmdfn.c to system() a command line built with
> no quoting, causing the error. rcmdfn() is called from
> src/gnuwin32/front-ends/R.c, which seems to contain the entry point for
> R\R-3.3.3\bin\R.exe.
>
> Fortunately, in src/unix/Rscript.c the whole mess seems to be avoided by
> having it directly include rterm.c and then call AppMain() on Windows,
> passing the command line parameter array. Same goes for
> src/gnuwin32/front-ends/graphappmain.c. The corresponding executables
> reside in the architecture-specific subdirectory of ...\bin\.
>
> So if you run Rgui.exe, Rterm.exe or Rscript.exe from
> R-3.3.3\bin\i386 instead of R-3.3.3\bin, no extra cmd.exe processes
> should be spawned and the badly-formed system() should be avoided.
>



From h@medh@@e|| @end|ng |rom gm@||@com  Tue Oct 23 11:04:53 2018
From: h@medh@@e|| @end|ng |rom gm@||@com (Hamed Ha)
Date: Tue, 23 Oct 2018 10:04:53 +0100
Subject: [R] Ignoring the domain of RV in punif()
Message-ID: <CAAC89xevX32DXu1tXjou-rrAa4QymrEQQjvP6Z0jOnZSDwpsOg@mail.gmail.com>

Hi All,

I recently discovered an interesting issue with the punif() function.  Let
X~Uiform[a,b] then the CDF is defined by F(x)=(x-a)/(b-a) for (a<= x<= b).
The important fact here is the domain of the random variable X. Having said
that, R returns CDF for any value in the real domain.

I understand that one can justify this by extending the domain of X and
assigning zero probabilities to the values outside the domain. However,
theoretically, it is not true to return a value for the CDF outside the
domain. Then I propose a patch to R function punif() to return an error in
this situations.

Example:
> punif(10^10)
[1] 1


Regards,
Hamed.

	[[alternative HTML version deleted]]



From er|cjberger @end|ng |rom gm@||@com  Tue Oct 23 11:21:16 2018
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Tue, 23 Oct 2018 12:21:16 +0300
Subject: [R] Ignoring the domain of RV in punif()
In-Reply-To: <CAAC89xevX32DXu1tXjou-rrAa4QymrEQQjvP6Z0jOnZSDwpsOg@mail.gmail.com>
References: <CAAC89xevX32DXu1tXjou-rrAa4QymrEQQjvP6Z0jOnZSDwpsOg@mail.gmail.com>
Message-ID: <CAGgJW74aBVxM5JQuYsxQ5WbSFiG1TX3L+3L7KuKsOeci-_EGSg@mail.gmail.com>

Hi Hamed,
I disagree with your criticism.
For a random variable X
X: D - - - > R
its CDF F is defined by
F: R - - - > [0,1]
F(z) = Prob(X <= z)

The fact that you wrote a convenient formula for the CDF
F(z) = (z-a)/(b-a)  a <= z <= b
in a particular range for z is your decision, and as you noted this formula
will give the wrong value for z outside the interval [a,b].
But the problem lies in your formula, not the definition of the CDF which
would be, in your case:

F(z) = 0 if z <= a
       = (z-a)/(b-a)   if a <= z <= b
       = 1 if 1 <= z

HTH,
Eric




On Tue, Oct 23, 2018 at 12:05 PM Hamed Ha <hamedhaseli at gmail.com> wrote:

> Hi All,
>
> I recently discovered an interesting issue with the punif() function.  Let
> X~Uiform[a,b] then the CDF is defined by F(x)=(x-a)/(b-a) for (a<= x<= b).
> The important fact here is the domain of the random variable X. Having said
> that, R returns CDF for any value in the real domain.
>
> I understand that one can justify this by extending the domain of X and
> assigning zero probabilities to the values outside the domain. However,
> theoretically, it is not true to return a value for the CDF outside the
> domain. Then I propose a patch to R function punif() to return an error in
> this situations.
>
> Example:
> > punif(10^10)
> [1] 1
>
>
> Regards,
> Hamed.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From h@medh@@e|| @end|ng |rom gm@||@com  Tue Oct 23 11:35:16 2018
From: h@medh@@e|| @end|ng |rom gm@||@com (Hamed Ha)
Date: Tue, 23 Oct 2018 10:35:16 +0100
Subject: [R] Ignoring the domain of RV in punif()
In-Reply-To: <CAGgJW74aBVxM5JQuYsxQ5WbSFiG1TX3L+3L7KuKsOeci-_EGSg@mail.gmail.com>
References: <CAAC89xevX32DXu1tXjou-rrAa4QymrEQQjvP6Z0jOnZSDwpsOg@mail.gmail.com>
 <CAGgJW74aBVxM5JQuYsxQ5WbSFiG1TX3L+3L7KuKsOeci-_EGSg@mail.gmail.com>
Message-ID: <CAAC89xcYNAhVKM-kBUZYiWrC=JHnAtK9GNftvsvWi-mS2uQ7TQ@mail.gmail.com>

Hi Eric,

Thank you for your reply.

I should say that your justification makes sense to me.  However, I am in
doubt that CDF defines by the Pr(x <= X) for all X? that is the domain of
RV is totally ignored in the definition.

It makes a conflict between the formula and the theoretical definition.

Please see page 115 in
https://books.google.co.uk/books?id=FEE8D1tRl30C&printsec=frontcover&dq=statistical+distribution&hl=en&sa=X&ved=0ahUKEwjp3PGZmJzeAhUQqxoKHV7OBJgQ6AEIKTAA#v=onepage&q=uniform&f=false
The


Thanks.
Hamed.



On Tue, 23 Oct 2018 at 10:21, Eric Berger <ericjberger at gmail.com> wrote:

> Hi Hamed,
> I disagree with your criticism.
> For a random variable X
> X: D - - - > R
> its CDF F is defined by
> F: R - - - > [0,1]
> F(z) = Prob(X <= z)
>
> The fact that you wrote a convenient formula for the CDF
> F(z) = (z-a)/(b-a)  a <= z <= b
> in a particular range for z is your decision, and as you noted this
> formula will give the wrong value for z outside the interval [a,b].
> But the problem lies in your formula, not the definition of the CDF which
> would be, in your case:
>
> F(z) = 0 if z <= a
>        = (z-a)/(b-a)   if a <= z <= b
>        = 1 if 1 <= z
>
> HTH,
> Eric
>
>
>
>
> On Tue, Oct 23, 2018 at 12:05 PM Hamed Ha <hamedhaseli at gmail.com> wrote:
>
>> Hi All,
>>
>> I recently discovered an interesting issue with the punif() function.  Let
>> X~Uiform[a,b] then the CDF is defined by F(x)=(x-a)/(b-a) for (a<= x<= b).
>> The important fact here is the domain of the random variable X. Having
>> said
>> that, R returns CDF for any value in the real domain.
>>
>> I understand that one can justify this by extending the domain of X and
>> assigning zero probabilities to the values outside the domain. However,
>> theoretically, it is not true to return a value for the CDF outside the
>> domain. Then I propose a patch to R function punif() to return an error in
>> this situations.
>>
>> Example:
>> > punif(10^10)
>> [1] 1
>>
>>
>> Regards,
>> Hamed.
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]



From er|cjberger @end|ng |rom gm@||@com  Tue Oct 23 11:42:02 2018
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Tue, 23 Oct 2018 12:42:02 +0300
Subject: [R] Ignoring the domain of RV in punif()
In-Reply-To: <CAAC89xcYNAhVKM-kBUZYiWrC=JHnAtK9GNftvsvWi-mS2uQ7TQ@mail.gmail.com>
References: <CAAC89xevX32DXu1tXjou-rrAa4QymrEQQjvP6Z0jOnZSDwpsOg@mail.gmail.com>
 <CAGgJW74aBVxM5JQuYsxQ5WbSFiG1TX3L+3L7KuKsOeci-_EGSg@mail.gmail.com>
 <CAAC89xcYNAhVKM-kBUZYiWrC=JHnAtK9GNftvsvWi-mS2uQ7TQ@mail.gmail.com>
Message-ID: <CAGgJW74aQvvOAjgqit+79+5zQ-sa2DWC3Ay94mhPa+yPxZ201g@mail.gmail.com>

Hi Hamed,
That reference is sloppy. Try looking at
https://en.wikipedia.org/wiki/Cumulative_distribution_function
and in particular the first example which deals with a Unif[0,1] r.v.

Best,
Eric


On Tue, Oct 23, 2018 at 12:35 PM Hamed Ha <hamedhaseli at gmail.com> wrote:

> Hi Eric,
>
> Thank you for your reply.
>
> I should say that your justification makes sense to me.  However, I am in
> doubt that CDF defines by the Pr(x <= X) for all X? that is the domain of
> RV is totally ignored in the definition.
>
> It makes a conflict between the formula and the theoretical definition.
>
> Please see page 115 in
>
> https://books.google.co.uk/books?id=FEE8D1tRl30C&printsec=frontcover&dq=statistical+distribution&hl=en&sa=X&ved=0ahUKEwjp3PGZmJzeAhUQqxoKHV7OBJgQ6AEIKTAA#v=onepage&q=uniform&f=false
> The
>
>
> Thanks.
> Hamed.
>
>
>
> On Tue, 23 Oct 2018 at 10:21, Eric Berger <ericjberger at gmail.com> wrote:
>
>> Hi Hamed,
>> I disagree with your criticism.
>> For a random variable X
>> X: D - - - > R
>> its CDF F is defined by
>> F: R - - - > [0,1]
>> F(z) = Prob(X <= z)
>>
>> The fact that you wrote a convenient formula for the CDF
>> F(z) = (z-a)/(b-a)  a <= z <= b
>> in a particular range for z is your decision, and as you noted this
>> formula will give the wrong value for z outside the interval [a,b].
>> But the problem lies in your formula, not the definition of the CDF which
>> would be, in your case:
>>
>> F(z) = 0 if z <= a
>>        = (z-a)/(b-a)   if a <= z <= b
>>        = 1 if 1 <= z
>>
>> HTH,
>> Eric
>>
>>
>>
>>
>> On Tue, Oct 23, 2018 at 12:05 PM Hamed Ha <hamedhaseli at gmail.com> wrote:
>>
>>> Hi All,
>>>
>>> I recently discovered an interesting issue with the punif() function.
>>> Let
>>> X~Uiform[a,b] then the CDF is defined by F(x)=(x-a)/(b-a) for (a<= x<=
>>> b).
>>> The important fact here is the domain of the random variable X. Having
>>> said
>>> that, R returns CDF for any value in the real domain.
>>>
>>> I understand that one can justify this by extending the domain of X and
>>> assigning zero probabilities to the values outside the domain. However,
>>> theoretically, it is not true to return a value for the CDF outside the
>>> domain. Then I propose a patch to R function punif() to return an error
>>> in
>>> this situations.
>>>
>>> Example:
>>> > punif(10^10)
>>> [1] 1
>>>
>>>
>>> Regards,
>>> Hamed.
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>

	[[alternative HTML version deleted]]



From h@medh@@e|| @end|ng |rom gm@||@com  Tue Oct 23 11:54:56 2018
From: h@medh@@e|| @end|ng |rom gm@||@com (Hamed Ha)
Date: Tue, 23 Oct 2018 10:54:56 +0100
Subject: [R] Ignoring the domain of RV in punif()
In-Reply-To: <CAGgJW74aQvvOAjgqit+79+5zQ-sa2DWC3Ay94mhPa+yPxZ201g@mail.gmail.com>
References: <CAAC89xevX32DXu1tXjou-rrAa4QymrEQQjvP6Z0jOnZSDwpsOg@mail.gmail.com>
 <CAGgJW74aBVxM5JQuYsxQ5WbSFiG1TX3L+3L7KuKsOeci-_EGSg@mail.gmail.com>
 <CAAC89xcYNAhVKM-kBUZYiWrC=JHnAtK9GNftvsvWi-mS2uQ7TQ@mail.gmail.com>
 <CAGgJW74aQvvOAjgqit+79+5zQ-sa2DWC3Ay94mhPa+yPxZ201g@mail.gmail.com>
Message-ID: <CAAC89xdxsaYhb0gFqM0hJhFHtjyJVegqLhWt4V8we0DocKH0eQ@mail.gmail.com>

Yes, now it makes more sense.

Okay, I think that I am convinced and we can close this ticket.

Thanks Eric.
Regards,
Hamed.






On Tue, 23 Oct 2018 at 10:42, Eric Berger <ericjberger at gmail.com> wrote:

> Hi Hamed,
> That reference is sloppy. Try looking at
> https://en.wikipedia.org/wiki/Cumulative_distribution_function
> and in particular the first example which deals with a Unif[0,1] r.v.
>
> Best,
> Eric
>
>
> On Tue, Oct 23, 2018 at 12:35 PM Hamed Ha <hamedhaseli at gmail.com> wrote:
>
>> Hi Eric,
>>
>> Thank you for your reply.
>>
>> I should say that your justification makes sense to me.  However, I am in
>> doubt that CDF defines by the Pr(x <= X) for all X? that is the domain of
>> RV is totally ignored in the definition.
>>
>> It makes a conflict between the formula and the theoretical definition.
>>
>> Please see page 115 in
>>
>> https://books.google.co.uk/books?id=FEE8D1tRl30C&printsec=frontcover&dq=statistical+distribution&hl=en&sa=X&ved=0ahUKEwjp3PGZmJzeAhUQqxoKHV7OBJgQ6AEIKTAA#v=onepage&q=uniform&f=false
>> The
>>
>>
>> Thanks.
>> Hamed.
>>
>>
>>
>> On Tue, 23 Oct 2018 at 10:21, Eric Berger <ericjberger at gmail.com> wrote:
>>
>>> Hi Hamed,
>>> I disagree with your criticism.
>>> For a random variable X
>>> X: D - - - > R
>>> its CDF F is defined by
>>> F: R - - - > [0,1]
>>> F(z) = Prob(X <= z)
>>>
>>> The fact that you wrote a convenient formula for the CDF
>>> F(z) = (z-a)/(b-a)  a <= z <= b
>>> in a particular range for z is your decision, and as you noted this
>>> formula will give the wrong value for z outside the interval [a,b].
>>> But the problem lies in your formula, not the definition of the CDF
>>> which would be, in your case:
>>>
>>> F(z) = 0 if z <= a
>>>        = (z-a)/(b-a)   if a <= z <= b
>>>        = 1 if 1 <= z
>>>
>>> HTH,
>>> Eric
>>>
>>>
>>>
>>>
>>> On Tue, Oct 23, 2018 at 12:05 PM Hamed Ha <hamedhaseli at gmail.com> wrote:
>>>
>>>> Hi All,
>>>>
>>>> I recently discovered an interesting issue with the punif() function.
>>>> Let
>>>> X~Uiform[a,b] then the CDF is defined by F(x)=(x-a)/(b-a) for (a<= x<=
>>>> b).
>>>> The important fact here is the domain of the random variable X. Having
>>>> said
>>>> that, R returns CDF for any value in the real domain.
>>>>
>>>> I understand that one can justify this by extending the domain of X and
>>>> assigning zero probabilities to the values outside the domain. However,
>>>> theoretically, it is not true to return a value for the CDF outside the
>>>> domain. Then I propose a patch to R function punif() to return an error
>>>> in
>>>> this situations.
>>>>
>>>> Example:
>>>> > punif(10^10)
>>>> [1] 1
>>>>
>>>>
>>>> Regards,
>>>> Hamed.
>>>>
>>>>         [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>

	[[alternative HTML version deleted]]



From j@m@xue| @end|ng |rom gm@||@com  Tue Oct 23 12:12:11 2018
From: j@m@xue| @end|ng |rom gm@||@com (Joel Maxuel)
Date: Tue, 23 Oct 2018 07:12:11 -0300
Subject: [R] 
 Transformations in Tidyverse (renaming and ordering columns)
In-Reply-To: <CAA3Wa=spwURbFqBDWU_kdSRzgJRHC+p5dPFioqxYyu7SWyQr5A@mail.gmail.com>
References: <CA+O61snvxz8-Ph5RWuSbzaS47aTf__+XFb=bOT2YviHt8isASg@mail.gmail.com>
 <alpine.BSF.2.00.1810221214590.4367@pedal.dcn.davis.ca.us>
 <CA+O61s=XqesQTTH4Z2BancMG7NbZoVsmymVGFbsfjEOe3YpZ2w@mail.gmail.com>
 <27506B46-D7F6-463E-A706-1E37677EF90F@dcn.davis.ca.us>
 <CA+O61smfme2OuARz7LB7jdMmUQBkR1TqL+P3jTXXjxF-jH5AQA@mail.gmail.com>
 <CAA3Wa=spwURbFqBDWU_kdSRzgJRHC+p5dPFioqxYyu7SWyQr5A@mail.gmail.com>
Message-ID: <CA+O61s=X1hvApydac1p5HJwWLG=Ump3Y=ccc-oh6jheB7R5UAw@mail.gmail.com>

I am impressed.  Upon playing with factor, I took it a step further to
commonize (and this could very well be simpified):

>
> testset$Observation <- factor(testset$Order, levels=testset$Order,
labels=testset$Observation)
> testset$Label <- factor(testset$Seq, levels=testset$Seq,
labels=testset$Label)
>
>     testset %>% select(Observation, Label, Value) %>%
spread(key=Observation, value=Value)
# A tibble: 4 x 4
  Label      One   Two Three
  <fct>    <dbl> <dbl> <dbl>
1 Western    163   147   119
2 Northern   105   100    82
3 Eastern    121   106    90
4 Southern    74    70    65
>

All I see left now is to replace "Label" heading value with the appropriate
testset$Section value provided for the situation.  In this case...

# A tibble: 4 x 4
  For Reporting Quarter      One   Two Three
  <fct>                               <dbl> <dbl> <dbl>
...

FWIW, before sending this I cleared all formatting and dismissed the
formatting toolbar (been doing only the latter before) in the Gmail client,
which I presume will finally strip HTML from the message.

--
Cheers,
Joel Maxuel

On Mon, Oct 22, 2018 at 10:48 PM John Laing <john.laing at gmail.com> wrote:

> I don't know much about the Tidyverse, but more generally the way to
> represent ordered categorical data is with a factor. This seems to work:
>
> > testset$Observation <- factor(testset$Observation, levels=c("One",
> "Two", "Three"))
> > testset$Label <- factor(testset$Label, levels=c("Western", "Northern",
> "Eastern", "Southern"))
> > testset %>% select(Observation, Label, Value) %>%
> spread(key=Observation, value=Value)
> # A tibble: 4 x 4
>   Label      One   Two Three
>   <fct>    <dbl> <dbl> <dbl>
> 1 Western    163   147   119
> 2 Northern   105   100    82
> 3 Eastern    121   106    90
> 4 Southern    74    70    65
>
>>
>>

	[[alternative HTML version deleted]]



From ted@h@rd|ng @end|ng |rom w|@ndre@@net  Tue Oct 23 12:41:12 2018
From: ted@h@rd|ng @end|ng |rom w|@ndre@@net (Ted Harding)
Date: Tue, 23 Oct 2018 11:41:12 +0100
Subject: [R] Ignoring the domain of RV in punif()
In-Reply-To: <CAAC89xdxsaYhb0gFqM0hJhFHtjyJVegqLhWt4V8we0DocKH0eQ@mail.gmail.com>
References: <CAAC89xevX32DXu1tXjou-rrAa4QymrEQQjvP6Z0jOnZSDwpsOg@mail.gmail.com>
 <CAGgJW74aBVxM5JQuYsxQ5WbSFiG1TX3L+3L7KuKsOeci-_EGSg@mail.gmail.com>
 <CAAC89xcYNAhVKM-kBUZYiWrC=JHnAtK9GNftvsvWi-mS2uQ7TQ@mail.gmail.com>
 <CAGgJW74aQvvOAjgqit+79+5zQ-sa2DWC3Ay94mhPa+yPxZ201g@mail.gmail.com>
 <CAAC89xdxsaYhb0gFqM0hJhFHtjyJVegqLhWt4V8we0DocKH0eQ@mail.gmail.com>
Message-ID: <1540291272.3880.44.camel@deb2.fort.knox.uk>

Before the ticket finally enters the waste bin, I think it is
necessary to explicitly explain what is meant by the "domain"
of a random variable. This is not (though in special cases
could be) the space of possible values of the random variable.

Definition of (real-valued) Random Variable (RV):
Let Z be a probability space, i.e. a set {z} of entities z
on which a probability distribution is defined. The entities z
do not need to be numeric. A real-valued RV X is a function
X:Z --> R defined on Z such that, for any z in Z, X(z) is a
real number. The set Z, in tthis context, is (by definitipon)
the *domain* of X, i.e. the space on which X is defined.
It may or may not be (and usually is not) the same as the set
of possible values of X.

Then. given any real value x0, the CDF of X at x- is Prob[X <= X0].
The distribution function of X does not define the domain of X.

As a simple exam[ple: Suppose Q is a cube of side A, consisting of
points z=(u,v,w) with 0 <= u,v,w <= A. Z is the probability space
of points z with a uniform distribution of position within Q.
Define the random variable X:Q --> [0,1] as
  X(u,v,w) = x/A
Then X is uniformly distributed on [0,1], the domain of X is Q.
Then for x <= 0 _Prob[X <= x] = 0, for 0 <= x <= 1 Prob(X >=x] = x,
for x >= 1 Prob(X <= x] = 1. These define the CDF. The set of poaaible
values of X is 1-dimensional, and is not the same as the domain of X,
which is 3-dimensional.

Hopiong this helps!
Ted.

On Tue, 2018-10-23 at 10:54 +0100, Hamed Ha wrote:
> Yes, now it makes more sense.
> 
> Okay, I think that I am convinced and we can close this ticket.
> 
> Thanks Eric.
> Regards,
> Hamed.
> 
> On Tue, 23 Oct 2018 at 10:42, Eric Berger <ericjberger at gmail.com> wrote:
> 
> > Hi Hamed,
> > That reference is sloppy. Try looking at
> > https://en.wikipedia.org/wiki/Cumulative_distribution_function
> > and in particular the first example which deals with a Unif[0,1] r.v.
> >
> > Best,
> > Eric
> >
> >
> > On Tue, Oct 23, 2018 at 12:35 PM Hamed Ha <hamedhaseli at gmail.com> wrote:
> >
> >> Hi Eric,
> >>
> >> Thank you for your reply.
> >>
> >> I should say that your justification makes sense to me.  However, I am in
> >> doubt that CDF defines by the Pr(x <= X) for all X? that is the domain of
> >> RV is totally ignored in the definition.
> >>
> >> It makes a conflict between the formula and the theoretical definition.
> >>
> >> Please see page 115 in
> >>
> >> https://books.google.co.uk/books?id=FEE8D1tRl30C&printsec=frontcover&dq=statistical+distribution&hl=en&sa=X&ved=0ahUKEwjp3PGZmJzeAhUQqxoKHV7OBJgQ6AEIKTAA#v=onepage&q=uniform&f=false
> >> The
> >>
> >>
> >> Thanks.
> >> Hamed.
> >>
> >>
> >>
> >> On Tue, 23 Oct 2018 at 10:21, Eric Berger <ericjberger at gmail.com> wrote:
> >>
> >>> Hi Hamed,
> >>> I disagree with your criticism.
> >>> For a random variable X
> >>> X: D - - - > R
> >>> its CDF F is defined by
> >>> F: R - - - > [0,1]
> >>> F(z) = Prob(X <= z)
> >>>
> >>> The fact that you wrote a convenient formula for the CDF
> >>> F(z) = (z-a)/(b-a)  a <= z <= b
> >>> in a particular range for z is your decision, and as you noted this
> >>> formula will give the wrong value for z outside the interval [a,b].
> >>> But the problem lies in your formula, not the definition of the CDF
> >>> which would be, in your case:
> >>>
> >>> F(z) = 0 if z <= a
> >>>        = (z-a)/(b-a)   if a <= z <= b
> >>>        = 1 if 1 <= z
> >>>
> >>> HTH,
> >>> Eric
> >>>
> >>>
> >>>
> >>>
> >>> On Tue, Oct 23, 2018 at 12:05 PM Hamed Ha <hamedhaseli at gmail.com> wrote:
> >>>
> >>>> Hi All,
> >>>>
> >>>> I recently discovered an interesting issue with the punif() function.
> >>>> Let
> >>>> X~Uiform[a,b] then the CDF is defined by F(x)=(x-a)/(b-a) for (a<= x<=
> >>>> b).
> >>>> The important fact here is the domain of the random variable X. Having
> >>>> said
> >>>> that, R returns CDF for any value in the real domain.
> >>>>
> >>>> I understand that one can justify this by extending the domain of X and
> >>>> assigning zero probabilities to the values outside the domain. However,
> >>>> theoretically, it is not true to return a value for the CDF outside the
> >>>> domain. Then I propose a patch to R function punif() to return an error
> >>>> in
> >>>> this situations.
> >>>>
> >>>> Example:
> >>>> > punif(10^10)
> >>>> [1] 1
> >>>>
> >>>>
> >>>> Regards,
> >>>> Hamed.
> >>>>
> >>>>         [[alternative HTML version deleted]]
> >>>>
> >>>> ______________________________________________
> >>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>> PLEASE do read the posting guide
> >>>> http://www.R-project.org/posting-guide.html
> >>>> and provide commented, minimal, self-contained, reproducible code.
> >>>>
> >>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



From ted@h@rd|ng @end|ng |rom w|@ndre@@net  Tue Oct 23 12:52:19 2018
From: ted@h@rd|ng @end|ng |rom w|@ndre@@net (Ted Harding)
Date: Tue, 23 Oct 2018 11:52:19 +0100
Subject: [R] Ignoring the domain of RV in punif()
In-Reply-To: <1540291272.3880.44.camel@deb2.fort.knox.uk>
References: <CAAC89xevX32DXu1tXjou-rrAa4QymrEQQjvP6Z0jOnZSDwpsOg@mail.gmail.com>
 <CAGgJW74aBVxM5JQuYsxQ5WbSFiG1TX3L+3L7KuKsOeci-_EGSg@mail.gmail.com>
 <CAAC89xcYNAhVKM-kBUZYiWrC=JHnAtK9GNftvsvWi-mS2uQ7TQ@mail.gmail.com>
 <CAGgJW74aQvvOAjgqit+79+5zQ-sa2DWC3Ay94mhPa+yPxZ201g@mail.gmail.com>
 <CAAC89xdxsaYhb0gFqM0hJhFHtjyJVegqLhWt4V8we0DocKH0eQ@mail.gmail.com>
 <1540291272.3880.44.camel@deb2.fort.knox.uk>
Message-ID: <1540291939.3880.50.camel@deb2.fort.knox.uk>

Sorry -- stupid typos in my definition below!
See at ===*** below.

On Tue, 2018-10-23 at 11:41 +0100, Ted Harding wrote:
Before the ticket finally enters the waste bin, I think it is
necessary to explicitly explain what is meant by the "domain"
of a random variable. This is not (though in special cases
could be) the space of possible values of the random variable.

Definition of (real-valued) Random Variable (RV):
Let Z be a probability space, i.e. a set {z} of entities z
on which a probability distribution is defined. The entities z
do not need to be numeric. A real-valued RV X is a function
X:Z --> R defined on Z such that, for any z in Z, X(z) is a
real number. The set Z, in tthis context, is (by definitipon)
the *domain* of X, i.e. the space on which X is defined.
It may or may not be (and usually is not) the same as the set
of possible values of X.

Then. given any real value x0, the CDF of X at x- is Prob[X <= X0].
The distribution function of X does not define the domain of X.

As a simple exam[ple: Suppose Q is a cube of side A, consisting of
points z=(u,v,w) with 0 <= u,v,w <= A. Z is the probability space
of points z with a uniform distribution of position within Q.
Define the random variable X:Q --> [0,1] as
===***
  X[u,v,w) = x/A

Wrong! That should  have been:

  X[u,v,w) = w/A
===***
Then X is uniformly distributed on [0,1], the domain of X is Q.
Then for x <= 0 _Prob[X <= x] = 0, for 0 <= x <= 1 Prob(X >=x] = x,
for x >= 1 Prob(X <= x] = 1. These define the CDF. The set of poaaible
values of X is 1-dimensional, and is not the same as the domain of X,
which is 3-dimensional.

Hopiong this helps!
Ted.

On Tue, 2018-10-23 at 10:54 +0100, Hamed Ha wrote:
> > Yes, now it makes more sense.
> > 
> > Okay, I think that I am convinced and we can close this ticket.
> > 
> > Thanks Eric.
> > Regards,
> > Hamed.
> > 
> > On Tue, 23 Oct 2018 at 10:42, Eric Berger <ericjberger at gmail.com> wrote:
> > 
> > > Hi Hamed,
> > > That reference is sloppy. Try looking at
> > > https://en.wikipedia.org/wiki/Cumulative_distribution_function
> > > and in particular the first example which deals with a Unif[0,1] r.v.
> > >
> > > Best,
> > > Eric
> > >
> > >
> > > On Tue, Oct 23, 2018 at 12:35 PM Hamed Ha <hamedhaseli at gmail.com> wrote:
> > >
> > >> Hi Eric,
> > >>
> > >> Thank you for your reply.
> > >>
> > >> I should say that your justification makes sense to me.  However, I am in
> > >> doubt that CDF defines by the Pr(x <= X) for all X? that is the domain of
> > >> RV is totally ignored in the definition.
> > >>
> > >> It makes a conflict between the formula and the theoretical definition.
> > >>
> > >> Please see page 115 in
> > >>
> > >> https://books.google.co.uk/books?id=FEE8D1tRl30C&printsec=frontcover&dq=statistical+distribution&hl=en&sa=X&ved=0ahUKEwjp3PGZmJzeAhUQqxoKHV7OBJgQ6AEIKTAA#v=onepage&q=uniform&f=false
> > >> The
> > >>
> > >>
> > >> Thanks.
> > >> Hamed.
> > >>
> > >>
> > >>
> > >> On Tue, 23 Oct 2018 at 10:21, Eric Berger <ericjberger at gmail.com> wrote:
> > >>
> > >>> Hi Hamed,
> > >>> I disagree with your criticism.
> > >>> For a random variable X
> > >>> X: D - - - > R
> > >>> its CDF F is defined by
> > >>> F: R - - - > [0,1]
> > >>> F(z) = Prob(X <= z)
> > >>>
> > >>> The fact that you wrote a convenient formula for the CDF
> > >>> F(z) = (z-a)/(b-a)  a <= z <= b
> > >>> in a particular range for z is your decision, and as you noted this
> > >>> formula will give the wrong value for z outside the interval [a,b].
> > >>> But the problem lies in your formula, not the definition of the CDF
> > >>> which would be, in your case:
> > >>>
> > >>> F(z) = 0 if z <= a
> > >>>        = (z-a)/(b-a)   if a <= z <= b
> > >>>        = 1 if 1 <= z
> > >>>
> > >>> HTH,
> > >>> Eric
> > >>>
> > >>>
> > >>>
> > >>>
> > >>> On Tue, Oct 23, 2018 at 12:05 PM Hamed Ha <hamedhaseli at gmail.com> wrote:
> > >>>
> > >>>> Hi All,
> > >>>>
> > >>>> I recently discovered an interesting issue with the punif() function.
> > >>>> Let
> > >>>> X~Uiform[a,b] then the CDF is defined by F(x)=(x-a)/(b-a) for (a<= x<=
> > >>>> b).
> > >>>> The important fact here is the domain of the random variable X. Having
> > >>>> said
> > >>>> that, R returns CDF for any value in the real domain.
> > >>>>
> > >>>> I understand that one can justify this by extending the domain of X and
> > >>>> assigning zero probabilities to the values outside the domain. However,
> > >>>> theoretically, it is not true to return a value for the CDF outside the
> > >>>> domain. Then I propose a patch to R function punif() to return an error
> > >>>> in
> > >>>> this situations.
> > >>>>
> > >>>> Example:
> > >>>> > punif(10^10)
> > >>>> [1] 1
> > >>>>
> > >>>>
> > >>>> Regards,
> > >>>> Hamed.
> > >>>>
> > >>>>         [[alternative HTML version deleted]]
> > >>>>
> > >>>> ______________________________________________
> > >>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >>>> https://stat.ethz.ch/mailman/listinfo/r-help
> > >>>> PLEASE do read the posting guide
> > >>>> http://www.R-project.org/posting-guide.html
> > >>>> and provide commented, minimal, self-contained, reproducible code.
> > >>>>
> > >>>
> > 
> > 	[[alternative HTML version deleted]]
> > 
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



From h@medh@@e|| @end|ng |rom gm@||@com  Tue Oct 23 13:06:51 2018
From: h@medh@@e|| @end|ng |rom gm@||@com (Hamed Ha)
Date: Tue, 23 Oct 2018 12:06:51 +0100
Subject: [R] Ignoring the domain of RV in punif()
In-Reply-To: <1540291939.3880.50.camel@deb2.fort.knox.uk>
References: <CAAC89xevX32DXu1tXjou-rrAa4QymrEQQjvP6Z0jOnZSDwpsOg@mail.gmail.com>
 <CAGgJW74aBVxM5JQuYsxQ5WbSFiG1TX3L+3L7KuKsOeci-_EGSg@mail.gmail.com>
 <CAAC89xcYNAhVKM-kBUZYiWrC=JHnAtK9GNftvsvWi-mS2uQ7TQ@mail.gmail.com>
 <CAGgJW74aQvvOAjgqit+79+5zQ-sa2DWC3Ay94mhPa+yPxZ201g@mail.gmail.com>
 <CAAC89xdxsaYhb0gFqM0hJhFHtjyJVegqLhWt4V8we0DocKH0eQ@mail.gmail.com>
 <1540291272.3880.44.camel@deb2.fort.knox.uk>
 <1540291939.3880.50.camel@deb2.fort.knox.uk>
Message-ID: <CAAC89xdu5JengdW+i=bGcNhBzfNd46FicXrDBbySVFmAcGtECA@mail.gmail.com>

Hi Ted,

Thanks for the explanation.

I am convinced at least more than average by Eric and your answer. But
still have some shadows of confusion that is definitely because I have
forgotten some fundamentals in probabilities.

In your cube example, the cumulative probability of reaching a point
outside the cube (u or v or w  > A) is 1 however, the bigger cube does not
exists (because the Q is the reference space). Other words, I feel that we
extend the space to accommodate any cube of any size! Looks a bit weird to
me!


Hamed.

On Tue, 23 Oct 2018 at 11:52, Ted Harding <ted.harding at wlandres.net> wrote:

> Sorry -- stupid typos in my definition below!
> See at ===*** below.
>
> On Tue, 2018-10-23 at 11:41 +0100, Ted Harding wrote:
> Before the ticket finally enters the waste bin, I think it is
> necessary to explicitly explain what is meant by the "domain"
> of a random variable. This is not (though in special cases
> could be) the space of possible values of the random variable.
>
> Definition of (real-valued) Random Variable (RV):
> Let Z be a probability space, i.e. a set {z} of entities z
> on which a probability distribution is defined. The entities z
> do not need to be numeric. A real-valued RV X is a function
> X:Z --> R defined on Z such that, for any z in Z, X(z) is a
> real number. The set Z, in tthis context, is (by definitipon)
> the *domain* of X, i.e. the space on which X is defined.
> It may or may not be (and usually is not) the same as the set
> of possible values of X.
>
> Then. given any real value x0, the CDF of X at x- is Prob[X <= X0].
> The distribution function of X does not define the domain of X.
>
> As a simple exam[ple: Suppose Q is a cube of side A, consisting of
> points z=(u,v,w) with 0 <= u,v,w <= A. Z is the probability space
> of points z with a uniform distribution of position within Q.
> Define the random variable X:Q --> [0,1] as
> ===***
>   X[u,v,w) = x/A
>
> Wrong! That should  have been:
>
>   X[u,v,w) = w/A
> ===***
> Then X is uniformly distributed on [0,1], the domain of X is Q.
> Then for x <= 0 _Prob[X <= x] = 0, for 0 <= x <= 1 Prob(X >=x] = x,
> for x >= 1 Prob(X <= x] = 1. These define the CDF. The set of poaaible
> values of X is 1-dimensional, and is not the same as the domain of X,
> which is 3-dimensional.
>
> Hopiong this helps!
> Ted.
>
> On Tue, 2018-10-23 at 10:54 +0100, Hamed Ha wrote:
> > > Yes, now it makes more sense.
> > >
> > > Okay, I think that I am convinced and we can close this ticket.
> > >
> > > Thanks Eric.
> > > Regards,
> > > Hamed.
> > >
> > > On Tue, 23 Oct 2018 at 10:42, Eric Berger <ericjberger at gmail.com>
> wrote:
> > >
> > > > Hi Hamed,
> > > > That reference is sloppy. Try looking at
> > > > https://en.wikipedia.org/wiki/Cumulative_distribution_function
> > > > and in particular the first example which deals with a Unif[0,1] r.v.
> > > >
> > > > Best,
> > > > Eric
> > > >
> > > >
> > > > On Tue, Oct 23, 2018 at 12:35 PM Hamed Ha <hamedhaseli at gmail.com>
> wrote:
> > > >
> > > >> Hi Eric,
> > > >>
> > > >> Thank you for your reply.
> > > >>
> > > >> I should say that your justification makes sense to me.  However, I
> am in
> > > >> doubt that CDF defines by the Pr(x <= X) for all X? that is the
> domain of
> > > >> RV is totally ignored in the definition.
> > > >>
> > > >> It makes a conflict between the formula and the theoretical
> definition.
> > > >>
> > > >> Please see page 115 in
> > > >>
> > > >>
> https://books.google.co.uk/books?id=FEE8D1tRl30C&printsec=frontcover&dq=statistical+distribution&hl=en&sa=X&ved=0ahUKEwjp3PGZmJzeAhUQqxoKHV7OBJgQ6AEIKTAA#v=onepage&q=uniform&f=false
> > > >> The
> > > >>
> > > >>
> > > >> Thanks.
> > > >> Hamed.
> > > >>
> > > >>
> > > >>
> > > >> On Tue, 23 Oct 2018 at 10:21, Eric Berger <ericjberger at gmail.com>
> wrote:
> > > >>
> > > >>> Hi Hamed,
> > > >>> I disagree with your criticism.
> > > >>> For a random variable X
> > > >>> X: D - - - > R
> > > >>> its CDF F is defined by
> > > >>> F: R - - - > [0,1]
> > > >>> F(z) = Prob(X <= z)
> > > >>>
> > > >>> The fact that you wrote a convenient formula for the CDF
> > > >>> F(z) = (z-a)/(b-a)  a <= z <= b
> > > >>> in a particular range for z is your decision, and as you noted this
> > > >>> formula will give the wrong value for z outside the interval [a,b].
> > > >>> But the problem lies in your formula, not the definition of the CDF
> > > >>> which would be, in your case:
> > > >>>
> > > >>> F(z) = 0 if z <= a
> > > >>>        = (z-a)/(b-a)   if a <= z <= b
> > > >>>        = 1 if 1 <= z
> > > >>>
> > > >>> HTH,
> > > >>> Eric
> > > >>>
> > > >>>
> > > >>>
> > > >>>
> > > >>> On Tue, Oct 23, 2018 at 12:05 PM Hamed Ha <hamedhaseli at gmail.com>
> wrote:
> > > >>>
> > > >>>> Hi All,
> > > >>>>
> > > >>>> I recently discovered an interesting issue with the punif()
> function.
> > > >>>> Let
> > > >>>> X~Uiform[a,b] then the CDF is defined by F(x)=(x-a)/(b-a) for
> (a<= x<=
> > > >>>> b).
> > > >>>> The important fact here is the domain of the random variable X.
> Having
> > > >>>> said
> > > >>>> that, R returns CDF for any value in the real domain.
> > > >>>>
> > > >>>> I understand that one can justify this by extending the domain of
> X and
> > > >>>> assigning zero probabilities to the values outside the domain.
> However,
> > > >>>> theoretically, it is not true to return a value for the CDF
> outside the
> > > >>>> domain. Then I propose a patch to R function punif() to return an
> error
> > > >>>> in
> > > >>>> this situations.
> > > >>>>
> > > >>>> Example:
> > > >>>> > punif(10^10)
> > > >>>> [1] 1
> > > >>>>
> > > >>>>
> > > >>>> Regards,
> > > >>>> Hamed.
> > > >>>>
> > > >>>>         [[alternative HTML version deleted]]
> > > >>>>
> > > >>>> ______________________________________________
> > > >>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > >>>> https://stat.ethz.ch/mailman/listinfo/r-help
> > > >>>> PLEASE do read the posting guide
> > > >>>> http://www.R-project.org/posting-guide.html
> > > >>>> and provide commented, minimal, self-contained, reproducible code.
> > > >>>>
> > > >>>
> > >
> > >     [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
>

	[[alternative HTML version deleted]]



From ted@h@rd|ng @end|ng |rom w|@ndre@@net  Tue Oct 23 13:37:35 2018
From: ted@h@rd|ng @end|ng |rom w|@ndre@@net (Ted Harding)
Date: Tue, 23 Oct 2018 12:37:35 +0100
Subject: [R] Ignoring the domain of RV in punif()
In-Reply-To: <CAAC89xdu5JengdW+i=bGcNhBzfNd46FicXrDBbySVFmAcGtECA@mail.gmail.com>
References: <CAAC89xevX32DXu1tXjou-rrAa4QymrEQQjvP6Z0jOnZSDwpsOg@mail.gmail.com>
 <CAGgJW74aBVxM5JQuYsxQ5WbSFiG1TX3L+3L7KuKsOeci-_EGSg@mail.gmail.com>
 <CAAC89xcYNAhVKM-kBUZYiWrC=JHnAtK9GNftvsvWi-mS2uQ7TQ@mail.gmail.com>
 <CAGgJW74aQvvOAjgqit+79+5zQ-sa2DWC3Ay94mhPa+yPxZ201g@mail.gmail.com>
 <CAAC89xdxsaYhb0gFqM0hJhFHtjyJVegqLhWt4V8we0DocKH0eQ@mail.gmail.com>
 <1540291272.3880.44.camel@deb2.fort.knox.uk>
 <1540291939.3880.50.camel@deb2.fort.knox.uk>
 <CAAC89xdu5JengdW+i=bGcNhBzfNd46FicXrDBbySVFmAcGtECA@mail.gmail.com>
Message-ID: <1540294655.3880.72.camel@deb2.fort.knox.uk>

Well, as a final (I hope!) clarification: It is not the case that
"the bigger cube does not exists (because the Q is the reference
space)". It does exist! Simply, the probability of the random point
being in the bigger cube, and NOT in the cube Q, is 0.

Hence "the cumulative probability of reaching a point outside the
cube (u or v or w  > A) is 1" is badly phrased. The "cumulative
probability" is not the probability of *reaching* a point, but of
being (in the case of a real random variable) less than or equal
to the given value. If Prob[X <= x1] = 1, then Prob[X > x1] = 0.
Hence if x0 is the minimum value such that Prob[X <= x0] = 1,
then X "can reach" x0. But for any x1 > x0, Prob[x0 < X <= x1] = 0.
Therefore, since X cannot be greater than x0, X *cannot reach* x1!

Best wishes,
Ted.

On Tue, 2018-10-23 at 12:06 +0100, Hamed Ha wrote:
> Hi Ted,
> 
> Thanks for the explanation.
> 
> I am convinced at least more than average by Eric and your answer. But
> still have some shadows of confusion that is definitely because I have
> forgotten some fundamentals in probabilities.
> 
> In your cube example, the cumulative probability of reaching a point
> outside the cube (u or v or w  > A) is 1 however, the bigger cube does not
> exists (because the Q is the reference space). Other words, I feel that we
> extend the space to accommodate any cube of any size! Looks a bit weird to
> me!
> 
> 
> Hamed.
> 
> On Tue, 23 Oct 2018 at 11:52, Ted Harding <ted.harding at wlandres.net> wrote:
> 
> > Sorry -- stupid typos in my definition below!
> > See at ===*** below.
> >
> > On Tue, 2018-10-23 at 11:41 +0100, Ted Harding wrote:
> > Before the ticket finally enters the waste bin, I think it is
> > necessary to explicitly explain what is meant by the "domain"
> > of a random variable. This is not (though in special cases
> > could be) the space of possible values of the random variable.
> >
> > Definition of (real-valued) Random Variable (RV):
> > Let Z be a probability space, i.e. a set {z} of entities z
> > on which a probability distribution is defined. The entities z
> > do not need to be numeric. A real-valued RV X is a function
> > X:Z --> R defined on Z such that, for any z in Z, X(z) is a
> > real number. The set Z, in tthis context, is (by definitipon)
> > the *domain* of X, i.e. the space on which X is defined.
> > It may or may not be (and usually is not) the same as the set
> > of possible values of X.
> >
> > Then. given any real value x0, the CDF of X at x- is Prob[X <= X0].
> > The distribution function of X does not define the domain of X.
> >
> > As a simple exam[ple: Suppose Q is a cube of side A, consisting of
> > points z=(u,v,w) with 0 <= u,v,w <= A. Z is the probability space
> > of points z with a uniform distribution of position within Q.
> > Define the random variable X:Q --> [0,1] as
> > ===***
> >   X[u,v,w) = x/A
> >
> > Wrong! That should  have been:
> >
> >   X[u,v,w) = w/A
> > ===***
> > Then X is uniformly distributed on [0,1], the domain of X is Q.
> > Then for x <= 0 _Prob[X <= x] = 0, for 0 <= x <= 1 Prob(X >=x] = x,
> > for x >= 1 Prob(X <= x] = 1. These define the CDF. The set of poaaible
> > values of X is 1-dimensional, and is not the same as the domain of X,
> > which is 3-dimensional.
> >
> > Hopiong this helps!
> > Ted.
> >
> > On Tue, 2018-10-23 at 10:54 +0100, Hamed Ha wrote:
> > > > Yes, now it makes more sense.
> > > >
> > > > Okay, I think that I am convinced and we can close this ticket.
> > > >
> > > > Thanks Eric.
> > > > Regards,
> > > > Hamed.
> > > >
> > > > On Tue, 23 Oct 2018 at 10:42, Eric Berger <ericjberger at gmail.com>
> > wrote:
> > > >
> > > > > Hi Hamed,
> > > > > That reference is sloppy. Try looking at
> > > > > https://en.wikipedia.org/wiki/Cumulative_distribution_function
> > > > > and in particular the first example which deals with a Unif[0,1] r.v.
> > > > >
> > > > > Best,
> > > > > Eric
> > > > >
> > > > >
> > > > > On Tue, Oct 23, 2018 at 12:35 PM Hamed Ha <hamedhaseli at gmail.com>
> > wrote:
> > > > >
> > > > >> Hi Eric,
> > > > >>
> > > > >> Thank you for your reply.
> > > > >>
> > > > >> I should say that your justification makes sense to me.  However, I
> > am in
> > > > >> doubt that CDF defines by the Pr(x <= X) for all X? that is the
> > domain of
> > > > >> RV is totally ignored in the definition.
> > > > >>
> > > > >> It makes a conflict between the formula and the theoretical
> > definition.
> > > > >>
> > > > >> Please see page 115 in
> > > > >>
> > > > >>
> > https://books.google.co.uk/books?id=FEE8D1tRl30C&printsec=frontcover&dq=statistical+distribution&hl=en&sa=X&ved=0ahUKEwjp3PGZmJzeAhUQqxoKHV7OBJgQ6AEIKTAA#v=onepage&q=uniform&f=false
> > > > >> The
> > > > >>
> > > > >>
> > > > >> Thanks.
> > > > >> Hamed.
> > > > >>
> > > > >>
> > > > >>
> > > > >> On Tue, 23 Oct 2018 at 10:21, Eric Berger <ericjberger at gmail.com>
> > wrote:
> > > > >>
> > > > >>> Hi Hamed,
> > > > >>> I disagree with your criticism.
> > > > >>> For a random variable X
> > > > >>> X: D - - - > R
> > > > >>> its CDF F is defined by
> > > > >>> F: R - - - > [0,1]
> > > > >>> F(z) = Prob(X <= z)
> > > > >>>
> > > > >>> The fact that you wrote a convenient formula for the CDF
> > > > >>> F(z) = (z-a)/(b-a)  a <= z <= b
> > > > >>> in a particular range for z is your decision, and as you noted this
> > > > >>> formula will give the wrong value for z outside the interval [a,b].
> > > > >>> But the problem lies in your formula, not the definition of the CDF
> > > > >>> which would be, in your case:
> > > > >>>
> > > > >>> F(z) = 0 if z <= a
> > > > >>>        = (z-a)/(b-a)   if a <= z <= b
> > > > >>>        = 1 if 1 <= z
> > > > >>>
> > > > >>> HTH,
> > > > >>> Eric
> > > > >>>
> > > > >>>
> > > > >>>
> > > > >>>
> > > > >>> On Tue, Oct 23, 2018 at 12:05 PM Hamed Ha <hamedhaseli at gmail.com>
> > wrote:
> > > > >>>
> > > > >>>> Hi All,
> > > > >>>>
> > > > >>>> I recently discovered an interesting issue with the punif()
> > function.
> > > > >>>> Let
> > > > >>>> X~Uiform[a,b] then the CDF is defined by F(x)=(x-a)/(b-a) for
> > (a<= x<=
> > > > >>>> b).
> > > > >>>> The important fact here is the domain of the random variable X.
> > Having
> > > > >>>> said
> > > > >>>> that, R returns CDF for any value in the real domain.
> > > > >>>>
> > > > >>>> I understand that one can justify this by extending the domain of
> > X and
> > > > >>>> assigning zero probabilities to the values outside the domain.
> > However,
> > > > >>>> theoretically, it is not true to return a value for the CDF
> > outside the
> > > > >>>> domain. Then I propose a patch to R function punif() to return an
> > error
> > > > >>>> in
> > > > >>>> this situations.
> > > > >>>>
> > > > >>>> Example:
> > > > >>>> > punif(10^10)
> > > > >>>> [1] 1
> > > > >>>>
> > > > >>>>
> > > > >>>> Regards,
> > > > >>>> Hamed.
> > > > >>>>
> > > > >>>>         [[alternative HTML version deleted]]
> > > > >>>>
> > > > >>>> ______________________________________________
> > > > >>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > > >>>> https://stat.ethz.ch/mailman/listinfo/r-help
> > > > >>>> PLEASE do read the posting guide
> > > > >>>> http://www.R-project.org/posting-guide.html
> > > > >>>> and provide commented, minimal, self-contained, reproducible code.
> > > > >>>>
> > > > >>>
> > > >
> > > >     [[alternative HTML version deleted]]
> > > >
> > > > ______________________________________________
> > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > > > and provide commented, minimal, self-contained, reproducible code.
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> >
> >
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



From wdun|@p @end|ng |rom t|bco@com  Tue Oct 23 22:14:30 2018
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Tue, 23 Oct 2018 13:14:30 -0700
Subject: [R] SVAR: error message
In-Reply-To: <CABcx46CqaJBcMz7-UX_qOvLOmnbw8qjQ21zUpfCaUfUZ+QyxcQ@mail.gmail.com>
References: <CABcx46CqaJBcMz7-UX_qOvLOmnbw8qjQ21zUpfCaUfUZ+QyxcQ@mail.gmail.com>
Message-ID: <CAF8bMcY5CyzUC3ei3ryp1=QLtVSvHhw5sd541BJb2DdyZTYoaA@mail.gmail.com>

The immediate problem is in svartype=="AB-model" part of SVAR:

            pos <- which(is.na(rb))
            cols <- length(pos)
            Rb <- matrix(0, nrow = Ksq, ncol = cols)
            for (i in 1:cols) Rb[pos[i], i] <- 1

Your Bmat has no NA's, so cols is 0.  Then 1:cols is c(1,0), causing
an error in the for loop when it tries to reference column 1 of a 0-column
matrix.  The code should use seq_len(cols) instead of 1:cols (or give
an error telling the user that Bmat should contain some NA's).

This is the sort of question one should send to the maintainer of the
package
that SVAR is in:
>  maintainer("vars")
[1] "Bernhard Pfaff <bernhard at pfaffikus.de>"



Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Mon, Oct 22, 2018 at 8:15 PM, John <miaojpm at gmail.com> wrote:

> Hi,
>
>   I have a bi-variate VAR model and would like to convert it to SVAR but
> get an error message. Could someone pinpoint anything wrong and correct my
> code? Thanks,
>
> John
>
>
> amat <- matrix(c(NA, 0, NA, NA), nrow = 2, ncol = 2, byrow = TRUE)
> df1<-data.frame(x=c(1,4,5,6,7,8,9,3,5,3), y=c(4,7,1,2,3,9,3,4,5,7))
> var1<-VAR(df1, type = "const", ic="BIC")
> svar2<-SVAR(x = var1, estmethod = "scoring", Amat = amat, Bmat = diag(2),
>             max.iter = 100, conv.crit = 0.1e-6, maxls = 1000)
>
> > amat <- matrix(c(NA, 0, NA, NA), nrow = 2, ncol = 2, byrow = TRUE)
> > df1<-data.frame(x=c(1,4,5,6,7,8,9,3,5,3), y=c(4,7,1,2,3,9,3,4,5,7))
> > var1<-VAR(df1, type = "const", ic="BIC")
> > svar2<-SVAR(x = var1, estmethod = "scoring", Amat = amat, Bmat = diag(2),
> +             max.iter = 100, conv.crit = 0.1e-6, maxls = 1000)
> Error in `[<-`(`*tmp*`, pos[i], i, value = 1) : subscript out of bounds
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From m|@ojpm @end|ng |rom gm@||@com  Wed Oct 24 02:55:17 2018
From: m|@ojpm @end|ng |rom gm@||@com (John)
Date: Wed, 24 Oct 2018 08:55:17 +0800
Subject: [R] SVAR: error message
In-Reply-To: <CAF8bMcY5CyzUC3ei3ryp1=QLtVSvHhw5sd541BJb2DdyZTYoaA@mail.gmail.com>
References: <CABcx46CqaJBcMz7-UX_qOvLOmnbw8qjQ21zUpfCaUfUZ+QyxcQ@mail.gmail.com>
 <CAF8bMcY5CyzUC3ei3ryp1=QLtVSvHhw5sd541BJb2DdyZTYoaA@mail.gmail.com>
Message-ID: <CABcx46DA02CEn9EA8Wps8a=4t_6+QCT1fB-SRvZ7aHFj6kFeNQ@mail.gmail.com>

If it is an A model, then should I just set B = NULL or skip the entry B?
William Dunlap <wdunlap at tibco.com> ? 2018?10?24? ?? ??4:14???

> The immediate problem is in svartype=="AB-model" part of SVAR:
>
>             pos <- which(is.na(rb))
>             cols <- length(pos)
>             Rb <- matrix(0, nrow = Ksq, ncol = cols)
>             for (i in 1:cols) Rb[pos[i], i] <- 1
>
> Your Bmat has no NA's, so cols is 0.  Then 1:cols is c(1,0), causing
> an error in the for loop when it tries to reference column 1 of a 0-column
> matrix.  The code should use seq_len(cols) instead of 1:cols (or give
> an error telling the user that Bmat should contain some NA's).
>
> This is the sort of question one should send to the maintainer of the
> package
> that SVAR is in:
> >  maintainer("vars")
> [1] "Bernhard Pfaff <bernhard at pfaffikus.de>"
>
>
>
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
>
> On Mon, Oct 22, 2018 at 8:15 PM, John <miaojpm at gmail.com> wrote:
>
>> Hi,
>>
>>   I have a bi-variate VAR model and would like to convert it to SVAR but
>> get an error message. Could someone pinpoint anything wrong and correct my
>> code? Thanks,
>>
>> John
>>
>>
>> amat <- matrix(c(NA, 0, NA, NA), nrow = 2, ncol = 2, byrow = TRUE)
>> df1<-data.frame(x=c(1,4,5,6,7,8,9,3,5,3), y=c(4,7,1,2,3,9,3,4,5,7))
>> var1<-VAR(df1, type = "const", ic="BIC")
>> svar2<-SVAR(x = var1, estmethod = "scoring", Amat = amat, Bmat = diag(2),
>>             max.iter = 100, conv.crit = 0.1e-6, maxls = 1000)
>>
>> > amat <- matrix(c(NA, 0, NA, NA), nrow = 2, ncol = 2, byrow = TRUE)
>> > df1<-data.frame(x=c(1,4,5,6,7,8,9,3,5,3), y=c(4,7,1,2,3,9,3,4,5,7))
>> > var1<-VAR(df1, type = "const", ic="BIC")
>> > svar2<-SVAR(x = var1, estmethod = "scoring", Amat = amat, Bmat =
>> diag(2),
>> +             max.iter = 100, conv.crit = 0.1e-6, maxls = 1000)
>> Error in `[<-`(`*tmp*`, pos[i], i, value = 1) : subscript out of bounds
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>

	[[alternative HTML version deleted]]



From pro|@@m|t@m|tt@| @end|ng |rom gm@||@com  Wed Oct 24 06:11:50 2018
From: pro|@@m|t@m|tt@| @end|ng |rom gm@||@com (Amit Mittal)
Date: Wed, 24 Oct 2018 04:11:50 +0000
Subject: [R] SVAR: error message
In-Reply-To: <CABcx46DA02CEn9EA8Wps8a=4t_6+QCT1fB-SRvZ7aHFj6kFeNQ@mail.gmail.com>
References: <CABcx46CqaJBcMz7-UX_qOvLOmnbw8qjQ21zUpfCaUfUZ+QyxcQ@mail.gmail.com>
 <CAF8bMcY5CyzUC3ei3ryp1=QLtVSvHhw5sd541BJb2DdyZTYoaA@mail.gmail.com>,
 <CABcx46DA02CEn9EA8Wps8a=4t_6+QCT1fB-SRvZ7aHFj6kFeNQ@mail.gmail.com>
Message-ID: <DM6PR01MB4107E0229E147E08C9F01D0AFCF60@DM6PR01MB4107.prod.exchangelabs.com>

I had no problem using svar ()

I think you should try the code examples in the var package PDF by the authors, the research has since been quoted successfully

------------
Amit Mittal
PhD in Finance and Accounting (tbd)
IIM Lucknow
http://ssrn.com/author=2665511
*Top 10%, downloaded author since July 2017
------------
Sent from my Outlook for Android
https://aka.ms/ghei36

________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of John <miaojpm at gmail.com>
Sent: Wednesday, October 24, 2018 6:25:17 AM
To: William Dunlap
Cc: r-help; bernhard at pfaffikus.de
Subject: Re: [R] SVAR: error message

If it is an A model, then should I just set B = NULL or skip the entry B?
William Dunlap <wdunlap at tibco.com> $B1w(B 2018$BG/(B10$B7n(B24$BF|(B $B=5;0(B $B>e8a(B4:14$BUmF;!'(B

> The immediate problem is in svartype=="AB-model" part of SVAR:
>
>             pos <- which(is.na(rb))
>             cols <- length(pos)
>             Rb <- matrix(0, nrow = Ksq, ncol = cols)
>             for (i in 1:cols) Rb[pos[i], i] <- 1
>
> Your Bmat has no NA's, so cols is 0.  Then 1:cols is c(1,0), causing
> an error in the for loop when it tries to reference column 1 of a 0-column
> matrix.  The code should use seq_len(cols) instead of 1:cols (or give
> an error telling the user that Bmat should contain some NA's).
>
> This is the sort of question one should send to the maintainer of the
> package
> that SVAR is in:
> >  maintainer("vars")
> [1] "Bernhard Pfaff <bernhard at pfaffikus.de>"
>
>
>
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
>
> On Mon, Oct 22, 2018 at 8:15 PM, John <miaojpm at gmail.com> wrote:
>
>> Hi,
>>
>>   I have a bi-variate VAR model and would like to convert it to SVAR but
>> get an error message. Could someone pinpoint anything wrong and correct my
>> code? Thanks,
>>
>> John
>>
>>
>> amat <- matrix(c(NA, 0, NA, NA), nrow = 2, ncol = 2, byrow = TRUE)
>> df1<-data.frame(x=c(1,4,5,6,7,8,9,3,5,3), y=c(4,7,1,2,3,9,3,4,5,7))
>> var1<-VAR(df1, type = "const", ic="BIC")
>> svar2<-SVAR(x = var1, estmethod = "scoring", Amat = amat, Bmat = diag(2),
>>             max.iter = 100, conv.crit = 0.1e-6, maxls = 1000)
>>
>> > amat <- matrix(c(NA, 0, NA, NA), nrow = 2, ncol = 2, byrow = TRUE)
>> > df1<-data.frame(x=c(1,4,5,6,7,8,9,3,5,3), y=c(4,7,1,2,3,9,3,4,5,7))
>> > var1<-VAR(df1, type = "const", ic="BIC")
>> > svar2<-SVAR(x = var1, estmethod = "scoring", Amat = amat, Bmat =
>> diag(2),
>> +             max.iter = 100, conv.crit = 0.1e-6, maxls = 1000)
>> Error in `[<-`(`*tmp*`, pos[i], i, value = 1) : subscript out of bounds
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]



From y@@@@_m@||k@ @end|ng |rom y@hoo@|r  Wed Oct 24 15:39:44 2018
From: y@@@@_m@||k@ @end|ng |rom y@hoo@|r (malika yassa)
Date: Wed, 24 Oct 2018 13:39:44 +0000 (UTC)
Subject: [R] calculate the  integral
References: <2115470251.23732799.1540388384753.ref@mail.yahoo.com>
Message-ID: <2115470251.23732799.1540388384753@mail.yahoo.com>

helloplease can anyone help me, I find it difficult to calculate this integrali have this programmx<-rnorm(10,0,1)y<-rexp(10,2)z<-exp(10,3)s<-vector()for (? j in 1:10)s[j]<-x[j+1]+x[j]s1[i]<-s[j]/2f<-function(y,u){exp(y-u)}sapply(x, function(i){
?z[j] integrate(f,lower=s1[j],upper=,s1[j+1] x=i)$value
for each value of x I will have a vectori can't calculate thisthank you in advance








	[[alternative HTML version deleted]]



From y@@@@_m@||k@ @end|ng |rom y@hoo@|r  Wed Oct 24 16:05:55 2018
From: y@@@@_m@||k@ @end|ng |rom y@hoo@|r (malika yassa)
Date: Wed, 24 Oct 2018 14:05:55 +0000 (UTC)
Subject: [R] calculate the integral
References: <1133720482.4507340.1540389955378.ref@mail.yahoo.com>
Message-ID: <1133720482.4507340.1540389955378@mail.yahoo.com>

helloplease can anyone help me, I find it difficult to calculate this integrali have this programmx<-rnorm(10,0,1)y<-rexp(10,2)z<-exp(10,3)s<-vector()for (? j in 1:10)s[j]<-x[j+1]+x[j]s1[i]<-s[j]/2f<-function(y,u){exp(y-u)}sapply(x, function(i){
?z[j] integrate(f,lower=s1[j],upper=,s1[j+1] x=i)$value
for each value of x I will have a vectori can't calculate thisthank you in advance
	[[alternative HTML version deleted]]



From bgunter@4567 @end|ng |rom gm@||@com  Wed Oct 24 16:39:13 2018
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 24 Oct 2018 07:39:13 -0700
Subject: [R] calculate the integral
In-Reply-To: <2115470251.23732799.1540388384753@mail.yahoo.com>
References: <2115470251.23732799.1540388384753.ref@mail.yahoo.com>
 <2115470251.23732799.1540388384753@mail.yahoo.com>
Message-ID: <CAGxFJbRXpKosCDSLJhfem5qDVdXCPwayAK_53mBHeG+=xNj8LA@mail.gmail.com>

Is this homework? This list has a no homework policy.

Also, please stop posting in html.

Bert Gunter


On Wed, Oct 24, 2018 at 6:40 AM malika yassa via R-help <
r-help at r-project.org> wrote:

> helloplease can anyone help me, I find it difficult to calculate this
> integrali have this
> programmx<-rnorm(10,0,1)y<-rexp(10,2)z<-exp(10,3)s<-vector()for (  j in
> 1:10)s[j]<-x[j+1]+x[j]s1[i]<-s[j]/2f<-function(y,u){exp(y-u)}sapply(x,
> function(i){
>  z[j] integrate(f,lower=s1[j],upper=,s1[j+1] x=i)$value
> for each value of x I will have a vectori can't calculate thisthank you in
> advance
>
>
>
>
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From @erenbkt@ @end|ng |rom gm@||@com  Wed Oct 24 16:15:55 2018
From: @erenbkt@ @end|ng |rom gm@||@com (Aerenbkts bkts)
Date: Wed, 24 Oct 2018 16:15:55 +0200
Subject: [R] R Linux Memory Limit error for calculating dissimilarity matrix
 with Gower distance
Message-ID: <CAHxtjzBPUrXP=ygfasAHa2VrfOK-aSdYTn_hX69dVt3GCgjQFg@mail.gmail.com>

Hi all,


I am trying to cluster data file with 50K rows and 10 columns with R. Since
data contains mixed data types (nominal, continuous etc.) I am using gower
distance to create a dissimilarity matrix. But while I was creating the
matrix, I got Error: cannot allocate vector of size 4.1 Gb error. I am
using 64 bit 16 GB RAM.

1-My question is how to use all my memory for R (memory.limit does not work
for linux)?
2-Can I chunk dissimilarty matrix while I am creting it with ;

gower_dist <- daisy(i_cluster_ready,metric = "gower")

3-Can daisy function directly write to ROM to avoid error of RAM usace?


I have tried ff and bigmemory packages. Bigmemory does not work with
mixed data. and I could not figure ff function out.


Thanks for your help


Kind regards

	[[alternative HTML version deleted]]



From hugh_cre@n @end|ng |rom URMC@Roche@ter@edu  Wed Oct 24 23:35:55 2018
From: hugh_cre@n @end|ng |rom URMC@Roche@ter@edu (Crean, Hugh)
Date: Wed, 24 Oct 2018 21:35:55 +0000
Subject: [R] metafor all list elements must be square matrices
Message-ID: <1870c360ffa245b8a3fed40008605b49@exmbxsdc06.urmc-sh.rochester.edu>

This may be a very simple fix, but I am struggling to reproduce Becker's (1988) imputation of control group effect sizes for single group trials.  For some reason that I cannot figure out, I am getting an "All list elements in 'V' must be square matrices".  Below is my V matrix, which I believe is square:

Study1

Study2

Study3

Study4

Study5

Study6

Study7

Study8

0.118

0

0

0

0

0.010465

0.010465

0.010465

0

0.121

0

0

0

0.010465

0.010465

0.010465

0

0

0.404

0

0

0.010465

0.010465

0.010465

0

0

0

0.146

0

0.010465

0.010465

0.010465

0

0

0

0

0.09

0.010465

0.010465

0.010465

0.010465

0.010465

0.010465

0.010465

0.010465

0.104465

0.010465

0.010465

0.010465

0.010465

0.010465

0.010465

0.010465

0.010465

0.085465

0.010465

0.010465

0.010465

0.010465

0.010465

0.010465

0.010465

0.010465

0.069465


I get the error running as a multivariate rma.  If I run as a simple rma, I get a non-positive sampling variances error message (but the correlations are all at least between 0 and 1).

Any help is greatly appreciated.

Hugh

Hugh F. Crean, Ph.D.
Assistant Professor of Clinical Nursing
2W.156 Helen Wood Hall
School of Nursing
University of Rochester
601 Elmwood Avenue
Rochester, New York  14620

(585) 276-5575



	[[alternative HTML version deleted]]



From |@ngchen @end|ng |rom u@bmc@edu  Thu Oct 25 01:39:49 2018
From: |@ngchen @end|ng |rom u@bmc@edu (Chen, Lang)
Date: Wed, 24 Oct 2018 23:39:49 +0000
Subject: [R] Random Forest prediction all NA
Message-ID: <754E446826FC164A9FFE0BAC514400D24DFA742B@MSGHM5A13.ad.hs.uab.edu>

Dear R user,
I try randomForest and had an issue for the prediction. The training and test data from two separate csv file. However I end with all NA or prediction.

Y is the continuouse variable, X variables are factors, continuous variables, variables with numeric 0/1 indication Y/N (not coverted to factor),  and calendar year.
> haq.pred<-predict(x.rfc, x.2)
> summary(haq.pred)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's
     NA      NA      NA     NaN      NA      NA  437990
R version 3.5.1 (2018-07-02)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1
randomForest_4.6-14.




Lang Chen
Center for Education & Research on Therapeutics of Musculoskeletal Disorders (CERTS)
Clinical Immunology and Rheumatology
Dept. of Medicine
Universtiy of Alabama at Birmingham
Mail: 1720 Second Ave. South
FOT 802C,
Birmingham AL 35294
510 20th St S
FOT 802C,
Birmingham AL 35294
205-975-7473 (O)


	[[alternative HTML version deleted]]



From ||@t@ @end|ng |rom dewey@myzen@co@uk  Thu Oct 25 10:33:01 2018
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Thu, 25 Oct 2018 09:33:01 +0100
Subject: [R] metafor all list elements must be square matrices
In-Reply-To: <1870c360ffa245b8a3fed40008605b49@exmbxsdc06.urmc-sh.rochester.edu>
References: <1870c360ffa245b8a3fed40008605b49@exmbxsdc06.urmc-sh.rochester.edu>
Message-ID: <e5d3608c-b402-f7c4-e326-ec4a782e4e4f@dewey.myzen.co.uk>

Dear Hugh

1 - Your post is unreadable because you posted in HTML so it will be 
very difficult for anyone to see your V

2 - there is a separate mailing list for meta-analysis in R where you 
may get more helpful responses as it is monitored by authors of most of 
the main packages. Please see 
https://stat.ethz.ch/mailman/listinfo/r-sig-meta-analysis// and remember 
to register first.

Michael


On 24/10/2018 22:35, Crean, Hugh wrote:
> This may be a very simple fix, but I am struggling to reproduce Becker's (1988) imputation of control group effect sizes for single group trials.  For some reason that I cannot figure out, I am getting an "All list elements in 'V' must be square matrices".  Below is my V matrix, which I believe is square:
> 
> Study1
> 
> Study2
> 
> Study3
> 
> Study4
> 
> Study5
> 
> Study6
> 
> Study7
> 
> Study8
> 
> 0.118
> 
> 0
> 
> 0
> 
> 0
> 
> 0
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0
> 
> 0.121
> 
> 0
> 
> 0
> 
> 0
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0
> 
> 0
> 
> 0.404
> 
> 0
> 
> 0
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0
> 
> 0
> 
> 0
> 
> 0.146
> 
> 0
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0
> 
> 0
> 
> 0
> 
> 0
> 
> 0.09
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.104465
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.085465
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.010465
> 
> 0.069465
> 
> 
> I get the error running as a multivariate rma.  If I run as a simple rma, I get a non-positive sampling variances error message (but the correlations are all at least between 0 and 1).
> 
> Any help is greatly appreciated.
> 
> Hugh
> 
> Hugh F. Crean, Ph.D.
> Assistant Professor of Clinical Nursing
> 2W.156 Helen Wood Hall
> School of Nursing
> University of Rochester
> 601 Elmwood Avenue
> Rochester, New York  14620
> 
> (585) 276-5575
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html



From ch@|@b|@e|@he @end|ng |rom y@hoo@de  Thu Oct 25 11:24:07 2018
From: ch@|@b|@e|@he @end|ng |rom y@hoo@de (Elahe chalabi)
Date: Thu, 25 Oct 2018 09:24:07 +0000 (UTC)
Subject: [R] findAssocs Heatmap in R
References: <1982117970.24489449.1540459447586.ref@mail.yahoo.com>
Message-ID: <1982117970.24489449.1540459447586@mail.yahoo.com>

Hi all,


I have a document term matrix and I would like to have a heatmap (geom_tile) for 20 most associated words to a specific word in it. Here is my dtm:


?corpus=Corpus(VectorSource(data$Message))
?corpus=tm_map(corpus,tolower)
corpus=tm_map(corpus,removePunctuation)
corpus=tm_map(corpus,removeWords,c(stopwords("english")))
corpus=tm_map(corpus,stemDocument,"english")
frequencies=DocumentTermMatrix(corpus)
frequencies=removeSparseTerms(frequencies,0.995)
frequencies
<<DocumentTermMatrix (documents: 16630, terms: 399)>>
Non-/sparse entries: 118557/6516813
Sparsity? ? ? ? ? ?: 98%
Maximal term length: 43
Weighting? ? ? ? ? : term frequency (tf)

and the word I'm looking for the 20 most associated words in dtm for it:

word=c("problem")
corr <- c(0.7, 0.75, 0.1)
my_assocs <- findAssocs(frequencies, word,corr)

my problem is in ggplot line containing only 20 most associated words. How should I bring these to ggplot?

Thanks for any help.
Elahe



From rhe|p @end|ng |rom krueger-|@m||y@de  Thu Oct 25 16:06:52 2018
From: rhe|p @end|ng |rom krueger-|@m||y@de (Knut Krueger)
Date: Thu, 25 Oct 2018 16:06:52 +0200
Subject: [R] "logical indexing,
 " [was] match() question or needle haystack problem for a data.frame
In-Reply-To: <CAGxFJbS7vgQQK8t-X_z==on+jzYtDMmroCv3hPM6HWyU0Uq7Jw@mail.gmail.com>
References: <cac83a2c-2edd-e0e9-8b54-96afd48d401d@krueger-family.de>
 <CAGxFJbQrCaH6jLzMU60dx-U7m3oNT-zt1FhUOmcaOb-8njrp2w@mail.gmail.com>
 <CAGgJW74Tebw5CNDGVSf32bF7cMwkM3z=qi++8-SUPFYOHynYGQ@mail.gmail.com>
 <6ebcd80a-1786-34bb-d852-d05bfa24c9bc@krueger-family.de>
 <CAGxFJbS7vgQQK8t-X_z==on+jzYtDMmroCv3hPM6HWyU0Uq7Jw@mail.gmail.com>
Message-ID: <35998e7b-b02b-9993-5b61-fb20978a39f4@krueger-family.de>

Hi Bert,
another question for indexing
1. is there a good manual  for indexing

2.  is it possible to get !%in%
f.e
x =data.frame("A"=c(1:5),"C"=c("A","B","C","D","E"))
y =data.frame("B"=c(1,3,5))
test = x[x$A %in% y$B,]
test = x[x$A %in% y$B,]

test
A C
1 1 A
3 3 C
5 5 E


means: the result where I am looking for is:
test
A C
2 2 B
4 4 D

no problem with a loop but in a short way I do not find a solution

Kind Regards Knut



From pd@|gd @end|ng |rom gm@||@com  Thu Oct 25 16:13:54 2018
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Thu, 25 Oct 2018 16:13:54 +0200
Subject: [R] "logical indexing,
 " [was] match() question or needle haystack problem for a data.frame
In-Reply-To: <35998e7b-b02b-9993-5b61-fb20978a39f4@krueger-family.de>
References: <cac83a2c-2edd-e0e9-8b54-96afd48d401d@krueger-family.de>
 <CAGxFJbQrCaH6jLzMU60dx-U7m3oNT-zt1FhUOmcaOb-8njrp2w@mail.gmail.com>
 <CAGgJW74Tebw5CNDGVSf32bF7cMwkM3z=qi++8-SUPFYOHynYGQ@mail.gmail.com>
 <6ebcd80a-1786-34bb-d852-d05bfa24c9bc@krueger-family.de>
 <CAGxFJbS7vgQQK8t-X_z==on+jzYtDMmroCv3hPM6HWyU0Uq7Jw@mail.gmail.com>
 <35998e7b-b02b-9993-5b61-fb20978a39f4@krueger-family.de>
Message-ID: <410772ED-27FA-427D-BA16-83205608EDE2@gmail.com>



> On 25 Oct 2018, at 16:06 , Knut Krueger <rhelp at krueger-family.de> wrote:
> 
> Hi Bert,
> another question for indexing
> 1. is there a good manual  for indexing

?Extract is at least authoritative....

> 
> 2.  is it possible to get !%in%
> f.e


Yes: x[!(x$A %in% y$B),]

-pd

> x =data.frame("A"=c(1:5),"C"=c("A","B","C","D","E"))
> y =data.frame("B"=c(1,3,5))
> test = x[x$A %in% y$B,]
> test = x[x$A %in% y$B,]
> 
> test
> A C
> 1 1 A
> 3 3 C
> 5 5 E
> 
> 
> means: the result where I am looking for is:
> test
> A C
> 2 2 B
> 4 4 D
> 
> no problem with a loop but in a short way I do not find a solution
> 
> Kind Regards Knut
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com



From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Thu Oct 25 16:17:44 2018
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Thu, 25 Oct 2018 15:17:44 +0100
Subject: [R] "logical indexing,
 " [was] match() question or needle haystack problem for a data.frame
In-Reply-To: <35998e7b-b02b-9993-5b61-fb20978a39f4@krueger-family.de>
References: <cac83a2c-2edd-e0e9-8b54-96afd48d401d@krueger-family.de>
 <CAGxFJbQrCaH6jLzMU60dx-U7m3oNT-zt1FhUOmcaOb-8njrp2w@mail.gmail.com>
 <CAGgJW74Tebw5CNDGVSf32bF7cMwkM3z=qi++8-SUPFYOHynYGQ@mail.gmail.com>
 <6ebcd80a-1786-34bb-d852-d05bfa24c9bc@krueger-family.de>
 <CAGxFJbS7vgQQK8t-X_z==on+jzYtDMmroCv3hPM6HWyU0Uq7Jw@mail.gmail.com>
 <35998e7b-b02b-9993-5b61-fb20978a39f4@krueger-family.de>
Message-ID: <788781d6-a803-4cf6-b551-387881c268f9@sapo.pt>

Hello,

2. x[!x$A %in% y$B, ]

1.
An Introduction to R, file R-into.pdf in your docs folder.
http://www.cookbook-r.com/Basics/Indexing_into_a_data_structure/


Hope this helps,

Rui Barradas

?s 15:06 de 25/10/2018, Knut Krueger escreveu:
> Hi Bert,
> another question for indexing
> 1. is there a good manual? for indexing
> 
> 2.? is it possible to get !%in%
> f.e
> x =data.frame("A"=c(1:5),"C"=c("A","B","C","D","E"))
> y =data.frame("B"=c(1,3,5))
> test = x[x$A %in% y$B,]
> test = x[x$A %in% y$B,]
> 
> test
> A C
> 1 1 A
> 3 3 C
> 5 5 E
> 
> 
> means: the result where I am looking for is:
> test
> A C
> 2 2 B
> 4 4 D
> 
> no problem with a loop but in a short way I do not find a solution
> 
> Kind Regards Knut
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



From e@@w|ek @end|ng |rom gm@||@com  Fri Oct 26 03:04:09 2018
From: e@@w|ek @end|ng |rom gm@||@com (Ek Esawi)
Date: Thu, 25 Oct 2018 21:04:09 -0400
Subject: [R] remove text from nested list
Message-ID: <CA+ZkTxtwyZ+jJq+NRGWq_gE-tL1GVojTWxxej69z1r+NTEzk0w@mail.gmail.com>

Hi All?

I have a list that contains multiple sub-lists and each sub-list
contains multiple  sub(sub-lists), each of the sub(sub-lists) is made
up of matrices of text. I want to replace some of the text in some
parts in the matrices on the list. I tried gsub and stringr,
str_remove, but nothing seems to work

I tried:

lapply(mylist, function(x) lapply(x, function(y)
gsub("[0-9][0-9]/[0-9[0-9].*com","",y)))
lapply(mylist, function(x) str_remove(x,"[0-9][0-9]/[0-9[0-9].*com"))

Any help is greatly apprercaited.



mylist?this is just an example

[[1]]
[[1]][[1]]
[[1]][[1]][[1]]
[,1]  [,2]  [,3]  [,4] [,5]
[1,] "12/30 12/30"  "ABABABABABAB"  "8.00"
[2,] "01/02 01/02"  "AAAAAAAAAAAA?.   ?99"
[3,] "01/02 01/02"  "CACACACACACC? "55.97"

[[1]][[1]][[2]]
[,1]  [,2]
[1,] "12/30 12/30" "DDDDDDDDDDDDDDD? ?29"
[2,] "12/30 12/30"  :GGGGGGGGGGGGGGG? ?333?

[[1]][[2]]
[[1]][[2]][[1]]
[,1]  [,2]  [,3] [,4]  [,5]
[1,]  "01/02 01/02" "ThankYou" ?23?
[2,] "01/02 01/02"  "Standard data"  "251"



From peter@|@ng|e|der @end|ng |rom gm@||@com  Fri Oct 26 03:18:02 2018
From: peter@|@ng|e|der @end|ng |rom gm@||@com (Peter Langfelder)
Date: Thu, 25 Oct 2018 18:18:02 -0700
Subject: [R] remove text from nested list
In-Reply-To: <CA+ZkTxtwyZ+jJq+NRGWq_gE-tL1GVojTWxxej69z1r+NTEzk0w@mail.gmail.com>
References: <CA+ZkTxtwyZ+jJq+NRGWq_gE-tL1GVojTWxxej69z1r+NTEzk0w@mail.gmail.com>
Message-ID: <CA+hbrhX=783+cEPper7kP7kgnAohOgDAHeJOgcxVmEuNfFVHKA@mail.gmail.com>

You should be more specific about what you want to replace and with
what. The pattern you use, namely "[0-9][0-9]/[0-9[0-9].*com", does
not (AFAICS) match any of the strings in your data, so don't be
surprised that your commands do not change anything.

If you have a correct pattern and replacement and all lists have depth
3, using something like

lapply(mylist, lapply, lapply, function(y) gsub(pattern, replacement, y))

should work. If your list has a variable depth, I would use a
recursive function, something like

recursiveGSub = function(x, pattern, replacement)
{
  if (is.atomic(x)) gsub(pattern, replacement, x) else lapply(x,
recursiveGSub, pattern, replacement)
}

Example:

lst = list("a001", list("b001", list("c001", "d001")))

lst
recursiveGSub(lst, "00", "")


HTH,

Peter
On Thu, Oct 25, 2018 at 6:04 PM Ek Esawi <esawiek at gmail.com> wrote:
>
> Hi All?
>
> I have a list that contains multiple sub-lists and each sub-list
> contains multiple  sub(sub-lists), each of the sub(sub-lists) is made
> up of matrices of text. I want to replace some of the text in some
> parts in the matrices on the list. I tried gsub and stringr,
> str_remove, but nothing seems to work
>
> I tried:
>
> lapply(mylist, function(x) lapply(x, function(y)
> gsub("[0-9][0-9]/[0-9[0-9].*com","",y)))
> lapply(mylist, function(x) str_remove(x,"[0-9][0-9]/[0-9[0-9].*com"))
>
> Any help is greatly apprercaited.
>
>
>
> mylist?this is just an example
>
> [[1]]
> [[1]][[1]]
> [[1]][[1]][[1]]
> [,1]  [,2]  [,3]  [,4] [,5]
> [1,] "12/30 12/30"  "ABABABABABAB"  "8.00"
> [2,] "01/02 01/02"  "AAAAAAAAAAAA?.   ?99"
> [3,] "01/02 01/02"  "CACACACACACC? "55.97"
>
> [[1]][[1]][[2]]
> [,1]  [,2]
> [1,] "12/30 12/30" "DDDDDDDDDDDDDDD? ?29"
> [2,] "12/30 12/30"  :GGGGGGGGGGGGGGG? ?333?
>
> [[1]][[2]]
> [[1]][[2]][[1]]
> [,1]  [,2]  [,3] [,4]  [,5]
> [1,]  "01/02 01/02" "ThankYou" ?23?
> [2,] "01/02 01/02"  "Standard data"  "251"
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



From bgunter@4567 @end|ng |rom gm@||@com  Fri Oct 26 03:33:56 2018
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 25 Oct 2018 18:33:56 -0700
Subject: [R] remove text from nested list
In-Reply-To: <CA+ZkTxtwyZ+jJq+NRGWq_gE-tL1GVojTWxxej69z1r+NTEzk0w@mail.gmail.com>
References: <CA+ZkTxtwyZ+jJq+NRGWq_gE-tL1GVojTWxxej69z1r+NTEzk0w@mail.gmail.com>
Message-ID: <CAGxFJbQi=djaHxP_cDHnSMjBHdugZpqy2UaoqYzWRG5z0oMvqw@mail.gmail.com>

1. Please learn how to use dput() to provide examples to responders.
There's not much we can do with a text printout (at least without some work
that I don't care to do).

2. Do you know what mylist[[c(1,2,1)]] means? If not, read ?(Extract) and
note in particular:
"[[ can be applied recursively to lists, so that if the single index i is a
vector of length p, alist[[i]] is equivalent to alist[[i1]]...[[ip]] providing
all but the final indexing results in a list."

As your intent is unclear -- no reproducible example showing the desired
result -- I would suggest just using list indexing to access the matrices
you wish to change. But maybe this does not satisfy your vague request.

Also, something seems screwy in the example you showed: For example, the
[[1]][[2]][[1]] component indicates a 2 x 5 matrix, but I see only 3
columns of text. Am I missing something?

Cheers,
Bert



On Thu, Oct 25, 2018 at 6:04 PM Ek Esawi <esawiek at gmail.com> wrote:

> Hi All?
>
> I have a list that contains multiple sub-lists and each sub-list
> contains multiple  sub(sub-lists), each of the sub(sub-lists) is made
> up of matrices of text. I want to replace some of the text in some
> parts in the matrices on the list. I tried gsub and stringr,
> str_remove, but nothing seems to work
>
> I tried:
>
> lapply(mylist, function(x) lapply(x, function(y)
> gsub("[0-9][0-9]/[0-9[0-9].*com","",y)))
> lapply(mylist, function(x) str_remove(x,"[0-9][0-9]/[0-9[0-9].*com"))
>
> Any help is greatly apprercaited.
>
>
>
> mylist?this is just an example
>
> [[1]]
> [[1]][[1]]
> [[1]][[1]][[1]]
> [,1]  [,2]  [,3]  [,4] [,5]
> [1,] "12/30 12/30"  "ABABABABABAB"  "8.00"
> [2,] "01/02 01/02"  "AAAAAAAAAAAA?.   ?99"
> [3,] "01/02 01/02"  "CACACACACACC? "55.97"
>
> [[1]][[1]][[2]]
> [,1]  [,2]
> [1,] "12/30 12/30" "DDDDDDDDDDDDDDD? ?29"
> [2,] "12/30 12/30"  :GGGGGGGGGGGGGGG? ?333?
>
> [[1]][[2]]
> [[1]][[2]][[1]]
> [,1]  [,2]  [,3] [,4]  [,5]
> [1,]  "01/02 01/02" "ThankYou" ?23?
> [2,] "01/02 01/02"  "Standard data"  "251"
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From wdun|@p @end|ng |rom t|bco@com  Fri Oct 26 05:10:44 2018
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Thu, 25 Oct 2018 20:10:44 -0700
Subject: [R] remove text from nested list
In-Reply-To: <CA+ZkTxtwyZ+jJq+NRGWq_gE-tL1GVojTWxxej69z1r+NTEzk0w@mail.gmail.com>
References: <CA+ZkTxtwyZ+jJq+NRGWq_gE-tL1GVojTWxxej69z1r+NTEzk0w@mail.gmail.com>
Message-ID: <CAF8bMcZsadc-rhdVqU1sBGQOjztCswU7fzASRRnkrPw+pO9dxA@mail.gmail.com>

If your matrices are at various depths in the list, try rapply().  E.g.,

>  L <- list( A = list( a1 = matrix(c("AAA","AB", "AAB","AC"),2,2),
a2=c("AAx")), list(B = c("AAb1AAA","AAb2")))
> str(L)
List of 2
 $ A:List of 2
  ..$ a1: chr [1:2, 1:2] "AAA" "AB" "AAB" "AC"
  ..$ a2: chr "AAx"
 $  :List of 1
  ..$ B: chr [1:2] "AAb1AAA" "AAb2"
> str(rapply(L, function(x)gsub("A+", "-", x), how="replace"))
List of 2
 $ A:List of 2
  ..$ a1: chr [1:2, 1:2] "-" "-B" "-B" "-C"
  ..$ a2: chr "-x"
 $  :List of 1
  ..$ B: chr [1:2] "-b1-" "-b2"
> # only apply f to matrices in the list:
> str(rapply(L, function(x)gsub("A+", "-", x), classes="matrix",
how="replace"))
List of 2
 $ A:List of 2
  ..$ a1: chr [1:2, 1:2] "-" "-B" "-B" "-C"
  ..$ a2: chr "AAx"
 $  :List of 1
  ..$ B: chr [1:2] "AAb1AAA" "AAb2"


Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Thu, Oct 25, 2018 at 6:04 PM, Ek Esawi <esawiek at gmail.com> wrote:

> Hi All?
>
> I have a list that contains multiple sub-lists and each sub-list
> contains multiple  sub(sub-lists), each of the sub(sub-lists) is made
> up of matrices of text. I want to replace some of the text in some
> parts in the matrices on the list. I tried gsub and stringr,
> str_remove, but nothing seems to work
>
> I tried:
>
> lapply(mylist, function(x) lapply(x, function(y)
> gsub("[0-9][0-9]/[0-9[0-9].*com","",y)))
> lapply(mylist, function(x) str_remove(x,"[0-9][0-9]/[0-9[0-9].*com"))
>
> Any help is greatly apprercaited.
>
>
>
> mylist?this is just an example
>
> [[1]]
> [[1]][[1]]
> [[1]][[1]][[1]]
> [,1]  [,2]  [,3]  [,4] [,5]
> [1,] "12/30 12/30"  "ABABABABABAB"  "8.00"
> [2,] "01/02 01/02"  "AAAAAAAAAAAA?.   ?99"
> [3,] "01/02 01/02"  "CACACACACACC? "55.97"
>
> [[1]][[1]][[2]]
> [,1]  [,2]
> [1,] "12/30 12/30" "DDDDDDDDDDDDDDD? ?29"
> [2,] "12/30 12/30"  :GGGGGGGGGGGGGGG? ?333?
>
> [[1]][[2]]
> [[1]][[2]][[1]]
> [,1]  [,2]  [,3] [,4]  [,5]
> [1,]  "01/02 01/02" "ThankYou" ?23?
> [2,] "01/02 01/02"  "Standard data"  "251"
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From e@@w|ek @end|ng |rom gm@||@com  Fri Oct 26 05:24:00 2018
From: e@@w|ek @end|ng |rom gm@||@com (Ek Esawi)
Date: Thu, 25 Oct 2018 23:24:00 -0400
Subject: [R] remove text from nested list
In-Reply-To: <CAGxFJbQi=djaHxP_cDHnSMjBHdugZpqy2UaoqYzWRG5z0oMvqw@mail.gmail.com>
References: <CA+ZkTxtwyZ+jJq+NRGWq_gE-tL1GVojTWxxej69z1r+NTEzk0w@mail.gmail.com>
 <CAGxFJbQi=djaHxP_cDHnSMjBHdugZpqy2UaoqYzWRG5z0oMvqw@mail.gmail.com>
Message-ID: <CA+ZkTxs=Q6-FEKQQa2o-8WCG4Q9z1huexW=d56ZWzWLmkuVkfg@mail.gmail.com>

Thank you Bert and Peter. My apology for posting poor code. I cannot
create a reproducible example of my data, but i hope the list indices
as shown below helps you understand my question.. My regex pattern on
my previous post works correctly because i tested it on a few sublists
and it worked, but did not work for the all lists.
I tend to think a set of lapply and one apply function will work, but
not sure how to do that.

i tried, but obviously i don't understand nested apply functions.

> lapply(mylsit, function(x) gsub(pattern,"",x))
> lapply(mylist, function(x) lapply (x, function(y)  gsub(mypattern,"",y)))
> lappqaly(mylist, function(x) lapply (x, function(y) apply(y,2,gsub(mypattern,"",y))))


[[1]]

[[1]][[1]]
[[1]][[1]][[1]]
[[1]][[1]][[2]]
[[1]][[1]][[3]]

[[1]][[2]]
[[1]][[2]][[1]]
[[1]][[2]][[2]]

[[1]][[3]]
[[1]][[3]][[1]]
[[1]][[3]][[2]]

[[1]][[4]]
[[1]][[4]][[1]]
[[1]][[4]][[2]]
[[1]][[4]][[3]]
[[1]][[4]][[4]]
[[1]][[4]][[5]]

[[1]][[5]]
[[1]][[5]][[1]]
[[1]][[5]][[2]]
[[1]][[5]][[3]]
[[1]][[5]][[4]]

[[1]][[6]]
[[1]][[6]][[1]]
[[1]][[6]][[2]]
[[1]][[6]][[3]]

[[1]][[7]]
[[1]][[7]][[1]]
[[1]][[7]][[2]]
[[1]][[7]][[3]]

[[1]][[8]]
[[1]][[8]][[1]]
[[1]][[8]][[3]]
On Thu, Oct 25, 2018 at 9:34 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>
> 1. Please learn how to use dput() to provide examples to responders. There's not much we can do with a text printout (at least without some work that I don't care to do).
>
> 2. Do you know what mylist[[c(1,2,1)]] means? If not, read ?(Extract) and note in particular:
> "[[ can be applied recursively to lists, so that if the single index i is a vector of length p, alist[[i]] is equivalent to alist[[i1]]...[[ip]] providing all but the final indexing results in a list."
>
> As your intent is unclear -- no reproducible example showing the desired result -- I would suggest just using list indexing to access the matrices you wish to change. But maybe this does not satisfy your vague request.
>
> Also, something seems screwy in the example you showed: For example, the [[1]][[2]][[1]] component indicates a 2 x 5 matrix, but I see only 3 columns of text. Am I missing something?
>
> Cheers,
> Bert
>
>
>
> On Thu, Oct 25, 2018 at 6:04 PM Ek Esawi <esawiek at gmail.com> wrote:
>>
>> Hi All?
>>
>> I have a list that contains multiple sub-lists and each sub-list
>> contains multiple  sub(sub-lists), each of the sub(sub-lists) is made
>> up of matrices of text. I want to replace some of the text in some
>> parts in the matrices on the list. I tried gsub and stringr,
>> str_remove, but nothing seems to work
>>
>> I tried:
>>
>> lapply(mylist, function(x) lapply(x, function(y)
>> gsub("[0-9][0-9]/[0-9[0-9].*com","",y)))
>> lapply(mylist, function(x) str_remove(x,"[0-9][0-9]/[0-9[0-9].*com"))
>>
>> Any help is greatly apprercaited.
>>
>>
>>
>> mylist?this is just an example
>>
>> [[1]]
>> [[1]][[1]]
>> [[1]][[1]][[1]]
>> [,1]  [,2]  [,3]  [,4] [,5]
>> [1,] "12/30 12/30"  "ABABABABABAB"  "8.00"
>> [2,] "01/02 01/02"  "AAAAAAAAAAAA?.   ?99"
>> [3,] "01/02 01/02"  "CACACACACACC? "55.97"
>>
>> [[1]][[1]][[2]]
>> [,1]  [,2]
>> [1,] "12/30 12/30" "DDDDDDDDDDDDDDD? ?29"
>> [2,] "12/30 12/30"  :GGGGGGGGGGGGGGG? ?333?
>>
>> [[1]][[2]]
>> [[1]][[2]][[1]]
>> [,1]  [,2]  [,3] [,4]  [,5]
>> [1,]  "01/02 01/02" "ThankYou" ?23?
>> [2,] "01/02 01/02"  "Standard data"  "251"
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.



From rhe|p @end|ng |rom krueger-|@m||y@de  Fri Oct 26 08:28:34 2018
From: rhe|p @end|ng |rom krueger-|@m||y@de (Knut Krueger)
Date: Fri, 26 Oct 2018 08:28:34 +0200
Subject: [R] "logical indexing,
 " [was] match() question or needle haystack problem for a data.frame
In-Reply-To: <410772ED-27FA-427D-BA16-83205608EDE2@gmail.com>
References: <cac83a2c-2edd-e0e9-8b54-96afd48d401d@krueger-family.de>
 <CAGxFJbQrCaH6jLzMU60dx-U7m3oNT-zt1FhUOmcaOb-8njrp2w@mail.gmail.com>
 <CAGgJW74Tebw5CNDGVSf32bF7cMwkM3z=qi++8-SUPFYOHynYGQ@mail.gmail.com>
 <6ebcd80a-1786-34bb-d852-d05bfa24c9bc@krueger-family.de>
 <CAGxFJbS7vgQQK8t-X_z==on+jzYtDMmroCv3hPM6HWyU0Uq7Jw@mail.gmail.com>
 <35998e7b-b02b-9993-5b61-fb20978a39f4@krueger-family.de>
 <410772ED-27FA-427D-BA16-83205608EDE2@gmail.com>
Message-ID: <3ae8b56c-b807-3491-9671-55b5e07c4230@krueger-family.de>

Am 25.10.18 um 16:13 schrieb peter dalgaard:
> 
>
> Yes: x[!(x$A %in% y$B),]

Ok thats in my opinion a little workaround
why?:

There is an
= and !=
< and >


means the opposite is available between terms.

why is there f.e no %!in%, %notin%  or !%in%

This would be more intuitive.

Kind regards Knut



From j|ox @end|ng |rom mcm@@ter@c@  Fri Oct 26 14:25:48 2018
From: j|ox @end|ng |rom mcm@@ter@c@ (Fox, John)
Date: Fri, 26 Oct 2018 12:25:48 +0000
Subject: [R] "logical indexing,
 " [was] match() question or needle haystack problem for a data.frame
In-Reply-To: <8584_1540535329_w9Q6Smb5025558_3ae8b56c-b807-3491-9671-55b5e07c4230@krueger-family.de>
References: <cac83a2c-2edd-e0e9-8b54-96afd48d401d@krueger-family.de>
 <CAGxFJbQrCaH6jLzMU60dx-U7m3oNT-zt1FhUOmcaOb-8njrp2w@mail.gmail.com>
 <CAGgJW74Tebw5CNDGVSf32bF7cMwkM3z=qi++8-SUPFYOHynYGQ@mail.gmail.com>
 <6ebcd80a-1786-34bb-d852-d05bfa24c9bc@krueger-family.de>
 <CAGxFJbS7vgQQK8t-X_z==on+jzYtDMmroCv3hPM6HWyU0Uq7Jw@mail.gmail.com>
 <35998e7b-b02b-9993-5b61-fb20978a39f4@krueger-family.de>
 <410772ED-27FA-427D-BA16-83205608EDE2@gmail.com>
 <8584_1540535329_w9Q6Smb5025558_3ae8b56c-b807-3491-9671-55b5e07c4230@krueger-family.de>
Message-ID: <ACD1644AA6C67E4FBD0C350625508EC83690FEF8@FHSDB2D11-2.csu.mcmaster.ca>

Dear Knut,

> -----Original Message-----
> From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Knut
> Krueger
> Sent: Friday, October 26, 2018 2:29 AM
> To: r-help mailing list <r-help at r-project.org>
> Subject: Re: [R] "logical indexing, " [was] match() question or needle haystack
> problem for a data.frame
> 
> Am 25.10.18 um 16:13 schrieb peter dalgaard:
> >
> >
> > Yes: x[!(x$A %in% y$B),]
> 
> Ok thats in my opinion a little workaround

Not a work-around but a solution. That is, one can't expect to find an existing function for every problem.

> why?:
> 
> There is an
> = and !=

Actually == and !=

> < and >
> 
> 
> means the opposite is available between terms.
> 
> why is there f.e no %!in%, %notin%  or !%in%
> 
> This would be more intuitive.

If you feel strongly about this, it's not hard to supply it:

> `%!in%` <- function(x, y) !(x %in% y)
> (1:4) %in% (2*1:4)
[1] FALSE  TRUE FALSE  TRUE
> (1:4) %!in% (2*1:4)
[1]  TRUE FALSE  TRUE FALSE

Best,
 John

-----------------------------------------------------------------
John Fox
Professor Emeritus
McMaster University
Hamilton, Ontario, Canada
Web: https://socialsciences.mcmaster.ca/jfox/


> 
> Kind regards Knut
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.



From @erenbkt@ @end|ng |rom gm@||@com  Fri Oct 26 15:07:16 2018
From: @erenbkt@ @end|ng |rom gm@||@com (Aerenbkts bkts)
Date: Fri, 26 Oct 2018 15:07:16 +0200
Subject: [R] Calculating just a single row of dissimilarity/distance matrix
Message-ID: <CAHxtjzA_h3oBPZPdMX20ROK1Qy1xjgriqXMF4UvXLN=Q0Hk6Kg@mail.gmail.com>

I have a data-frame with 30k rows and 10 features. I would like to
calculate distance matrix like below;

gower_dist <- daisy(data-frame, metric = "gower"),


This function returns whole dissimilarity matrix. I want to get just
the first row.
(Just distances of the first element in data-frame). How can I do it?
Do you have an idea?


Regards

	[[alternative HTML version deleted]]



From er|cjberger @end|ng |rom gm@||@com  Fri Oct 26 15:42:15 2018
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Fri, 26 Oct 2018 16:42:15 +0300
Subject: [R] 
 Calculating just a single row of dissimilarity/distance matrix
In-Reply-To: <CAHxtjzA_h3oBPZPdMX20ROK1Qy1xjgriqXMF4UvXLN=Q0Hk6Kg@mail.gmail.com>
References: <CAHxtjzA_h3oBPZPdMX20ROK1Qy1xjgriqXMF4UvXLN=Q0Hk6Kg@mail.gmail.com>
Message-ID: <CAGgJW76bxtFUrgJ1NoDu1e2npxxKuQG9izuPP9n-S6dONTGOXw@mail.gmail.com>

> first_row_dist <- as.numeric(gower_dist)[1:(attr(gower_dist,"Size")-1)]

will give you the distances of the first row from the subsequent rows.

HTH,
Eric





On Fri, Oct 26, 2018 at 4:07 PM Aerenbkts bkts <aerenbkts at gmail.com> wrote:

> I have a data-frame with 30k rows and 10 features. I would like to
> calculate distance matrix like below;
>
> gower_dist <- daisy(data-frame, metric = "gower"),
>
>
> This function returns whole dissimilarity matrix. I want to get just
> the first row.
> (Just distances of the first element in data-frame). How can I do it?
> Do you have an idea?
>
>
> Regards
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Fri Oct 26 18:30:22 2018
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Fri, 26 Oct 2018 09:30:22 -0700 (PDT)
Subject: [R] source() fails in same directory as script: cannot find file
Message-ID: <alpine.LNX.2.20.1810260918310.16776@salmo.appl-ecosys.com>

   I'm not seeing my error even after reading ?source and a couple of web
fora threads. Running R-3.5.1 on Slackware-14.2.

   The scripts/ directory has the file 'input-summarize.R' with these lines:

sites <- read.table('../data/stations.dat', header=T, sep=',', stringsAsFactors=T)
sink('../analyses/location-summaries.txt')
print(summary(sites)
sink(NULL)

hg_conc <- read.table('../data/concentrations.dat', header=T, sep=',', stringsAsFactors=T)
hg_conc$sampdate <- as.Date(as.character(hg_conc$sampdate))
sink('../analyses/concentration-summaries.txt')
print(summary(hg_conc)
sink(NULL)

   Sourcing the script within the same directory (confirmed using getwd())
fails with this error message:

> source('input-summarize.R')
Error in file(filename, "r", encoding = encoding) :
   cannot open the connection
In addition: Warning message:
In file(filename, "r", encoding = encoding) :
   cannot open file 'input-summarize.R': No such file or directory

   I've used this same syntax to source scripts within the past month and
would like to understand this error so I can fix it now and avoid it in the
future.

TIA,

Rich



From |@t@z@hn @end|ng |rom gm@||@com  Fri Oct 26 20:06:13 2018
From: |@t@z@hn @end|ng |rom gm@||@com (Ista Zahn)
Date: Fri, 26 Oct 2018 14:06:13 -0400
Subject: [R] 
 source() fails in same directory as script: cannot find file
In-Reply-To: <alpine.LNX.2.20.1810260918310.16776@salmo.appl-ecosys.com>
References: <alpine.LNX.2.20.1810260918310.16776@salmo.appl-ecosys.com>
Message-ID: <CA+vqiLHK4bPZLWpCi6R1WcGEnS32FeQAEiqR6Z8gge7hEVR31A@mail.gmail.com>

Hi Rich,

I'm confused. It seems the error is that the file can't be found; if
so, what does it matter what is in the file?

As far as I can see you are either not in the directory you think you
are, or b) the file is not named what you think it is.

Best,
Ista
On Fri, Oct 26, 2018 at 12:30 PM Rich Shepard <rshepard at appl-ecosys.com> wrote:
>
>    I'm not seeing my error even after reading ?source and a couple of web
> fora threads. Running R-3.5.1 on Slackware-14.2.
>
>    The scripts/ directory has the file 'input-summarize.R' with these lines:
>
> sites <- read.table('../data/stations.dat', header=T, sep=',', stringsAsFactors=T)
> sink('../analyses/location-summaries.txt')
> print(summary(sites)
> sink(NULL)
>
> hg_conc <- read.table('../data/concentrations.dat', header=T, sep=',', stringsAsFactors=T)
> hg_conc$sampdate <- as.Date(as.character(hg_conc$sampdate))
> sink('../analyses/concentration-summaries.txt')
> print(summary(hg_conc)
> sink(NULL)
>
>    Sourcing the script within the same directory (confirmed using getwd())
> fails with this error message:
>
> > source('input-summarize.R')
> Error in file(filename, "r", encoding = encoding) :
>    cannot open the connection
> In addition: Warning message:
> In file(filename, "r", encoding = encoding) :
>    cannot open file 'input-summarize.R': No such file or directory
>
>    I've used this same syntax to source scripts within the past month and
> would like to understand this error so I can fix it now and avoid it in the
> future.
>
> TIA,
>
> Rich
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Fri Oct 26 20:11:16 2018
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Fri, 26 Oct 2018 11:11:16 -0700 (PDT)
Subject: [R] 
 source() fails in same directory as script: cannot find file
In-Reply-To: <CA+vqiLHK4bPZLWpCi6R1WcGEnS32FeQAEiqR6Z8gge7hEVR31A@mail.gmail.com>
References: <alpine.LNX.2.20.1810260918310.16776@salmo.appl-ecosys.com>
 <CA+vqiLHK4bPZLWpCi6R1WcGEnS32FeQAEiqR6Z8gge7hEVR31A@mail.gmail.com>
Message-ID: <alpine.LNX.2.20.1810261107540.16776@salmo.appl-ecosys.com>

On Fri, 26 Oct 2018, Ista Zahn wrote:

> I'm confused. It seems the error is that the file can't be found; if
> so, what does it matter what is in the file?

Ista,

   Beats me.

> As far as I can see you are either not in the directory you think you
> are, or b) the file is not named what you think it is.

   Yes, the error seems that R cannot find the file, but it's in the same
directory and the file does exist:

> getwd()
[1] "/home/rshepard/documents/white-papers/geochemistry/willamette-river-mercury/scripts"

~/documents/white-papers/geochemistry/willamette-river-mercury/scripts]$ ls input-summerize.R
input-summerize.R

   So, R is running in the scripts/ directory and the script is there, too.

   This is why I asked for help as the error makes no sense to me.

Regards,

Rich



From |@t@z@hn @end|ng |rom gm@||@com  Fri Oct 26 20:54:12 2018
From: |@t@z@hn @end|ng |rom gm@||@com (Ista Zahn)
Date: Fri, 26 Oct 2018 14:54:12 -0400
Subject: [R] 
 source() fails in same directory as script: cannot find file
In-Reply-To: <alpine.LNX.2.20.1810261107540.16776@salmo.appl-ecosys.com>
References: <alpine.LNX.2.20.1810260918310.16776@salmo.appl-ecosys.com>
 <CA+vqiLHK4bPZLWpCi6R1WcGEnS32FeQAEiqR6Z8gge7hEVR31A@mail.gmail.com>
 <alpine.LNX.2.20.1810261107540.16776@salmo.appl-ecosys.com>
Message-ID: <CA+vqiLGaSF8qb+Cuq7yo120MHHNK19WELODqm5ZxrLi+5j0BOA@mail.gmail.com>

On Fri, Oct 26, 2018 at 2:16 PM Rich Shepard <rshepard at appl-ecosys.com> wrote:
>
> On Fri, 26 Oct 2018, Ista Zahn wrote:
>
> > I'm confused. It seems the error is that the file can't be found; if
> > so, what does it matter what is in the file?
>
> Ista,
>
>    Beats me.
>
> > As far as I can see you are either not in the directory you think you
> > are, or b) the file is not named what you think it is.
>
>    Yes, the error seems that R cannot find the file, but it's in the same
> directory and the file does exist:
>
> > getwd()
> [1] "/home/rshepard/documents/white-papers/geochemistry/willamette-river-mercury/scripts"
>
> ~/documents/white-papers/geochemistry/willamette-river-mercury/scripts]$ ls input-summerize.R
> input-summerize.R
>
>    So, R is running in the scripts/ directory and the script is there, too.

No, the script is _not_ there. Compare your code:

> source('input-summarize.R')

to the contents of the directory:

> input-summerize.R

The moral of the story is, use tab-completion or copy/paste.

Best,
Ista

>
>    This is why I asked for help as the error makes no sense to me.
>
> Regards,
>
> Rich
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



From rhe|p @end|ng |rom eoo@@dd@@n|  Fri Oct 26 21:30:51 2018
From: rhe|p @end|ng |rom eoo@@dd@@n| (Jan van der Laan)
Date: Fri, 26 Oct 2018 21:30:51 +0200
Subject: [R] 
 Calculating just a single row of dissimilarity/distance matrix
In-Reply-To: <CAHxtjzA_h3oBPZPdMX20ROK1Qy1xjgriqXMF4UvXLN=Q0Hk6Kg@mail.gmail.com>
References: <CAHxtjzA_h3oBPZPdMX20ROK1Qy1xjgriqXMF4UvXLN=Q0Hk6Kg@mail.gmail.com>
Message-ID: <a824c37f-a9d4-cc4b-2ea4-d51be254e59b@eoos.dds.nl>


Using another implementation of the gower distance:


library(gower)

gower_dist(iris[1,], iris)


HTH,

Jan



On 26-10-18 15:07, Aerenbkts bkts wrote:
> I have a data-frame with 30k rows and 10 features. I would like to
> calculate distance matrix like below;
>
> gower_dist <- daisy(data-frame, metric = "gower"),
>
>
> This function returns whole dissimilarity matrix. I want to get just
> the first row.
> (Just distances of the first element in data-frame). How can I do it?
> Do you have an idea?
>
>
> Regards
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Fri Oct 26 21:46:22 2018
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Fri, 26 Oct 2018 12:46:22 -0700 (PDT)
Subject: [R] 
 source() fails in same directory as script: cannot find file [FIXED]
In-Reply-To: <CA+vqiLGaSF8qb+Cuq7yo120MHHNK19WELODqm5ZxrLi+5j0BOA@mail.gmail.com>
References: <alpine.LNX.2.20.1810260918310.16776@salmo.appl-ecosys.com>
 <CA+vqiLHK4bPZLWpCi6R1WcGEnS32FeQAEiqR6Z8gge7hEVR31A@mail.gmail.com>
 <alpine.LNX.2.20.1810261107540.16776@salmo.appl-ecosys.com>
 <CA+vqiLGaSF8qb+Cuq7yo120MHHNK19WELODqm5ZxrLi+5j0BOA@mail.gmail.com>
Message-ID: <alpine.LNX.2.20.1810261244490.16776@salmo.appl-ecosys.com>

On Fri, 26 Oct 2018, Ista Zahn wrote:

> No, the script is _not_ there. Compare your code:
>
>> source('input-summarize.R')
>
> to the contents of the directory:
>
>> input-summerize.R

> The moral of the story is, use tab-completion or copy/paste.

Ista,

   Thanks for catching the typo that I kept misssing. I mis-named the script
and didn't see that on the emacs buffer frame.

Best regards,

Rich



From jerem|eju@te @end|ng |rom gm@||@com  Fri Oct 26 22:11:19 2018
From: jerem|eju@te @end|ng |rom gm@||@com (Jeremie Juste)
Date: Fri, 26 Oct 2018 22:11:19 +0200
Subject: [R] 
 source() fails in same directory as script: cannot find file
In-Reply-To: <alpine.LNX.2.20.1810261107540.16776@salmo.appl-ecosys.com> (Rich
 Shepard's message of "Fri, 26 Oct 2018 11:11:16 -0700 (PDT)")
References: <alpine.LNX.2.20.1810260918310.16776@salmo.appl-ecosys.com>
 <CA+vqiLHK4bPZLWpCi6R1WcGEnS32FeQAEiqR6Z8gge7hEVR31A@mail.gmail.com>
 <alpine.LNX.2.20.1810261107540.16776@salmo.appl-ecosys.com>
Message-ID: <877ei41na0.fsf@gmail.com>

Hello,

I suspect the error is in the file input-summerize.R.

I creating a new file input-summerize2.R with only print("hello") for
instance and check if 

> setwd("~/documents/white-papers/geochemistry/willamette-river-mercury/scripts")
> source("input-summerize2.R")

works

Hope it helps,

Jeremie


Rich Shepard <rshepard at appl-ecosys.com> writes:

> On Fri, 26 Oct 2018, Ista Zahn wrote:
>
>> I'm confused. It seems the error is that the file can't be found; if
>> so, what does it matter what is in the file?
>
> Ista,
>
>   Beats me.
>
>> As far as I can see you are either not in the directory you think you
>> are, or b) the file is not named what you think it is.
>
>   Yes, the error seems that R cannot find the file, but it's in the same
> directory and the file does exist:
>
>> getwd()
> [1] "/home/rshepard/documents/white-papers/geochemistry/willamette-river-mercury/scripts"
>
> ~/documents/white-papers/geochemistry/willamette-river-mercury/scripts]$ ls input-summerize.R
> input-summerize.R
>
>   So, R is running in the scripts/ directory and the script is there, too.
>
>   This is why I asked for help as the error makes no sense to me.
>
> Regards,
>
> Rich
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



From mon|cq15 @end|ng |rom y@hoo@com  Fri Oct 26 19:27:19 2018
From: mon|cq15 @end|ng |rom y@hoo@com (=?UTF-8?Q?m=C3=B3nica_queijeiro?=)
Date: Fri, 26 Oct 2018 17:27:19 +0000 (UTC)
Subject: [R] Question for help
References: <1190357765.17769949.1540574839876.ref@mail.yahoo.com>
Message-ID: <1190357765.17769949.1540574839876@mail.yahoo.com>

How do I interpret p and q in the corARMA correlation structure?
I understand that p is the autoregessive order and q is the moving average, but I don't know how to interpret what does it means when it is (2,3) or (2,2) for example. Can anyone give me a simple explanation?
	[[alternative HTML version deleted]]



From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Oct 27 04:42:02 2018
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Fri, 26 Oct 2018 19:42:02 -0700
Subject: [R] 
 source() fails in same directory as script: cannot find file
In-Reply-To: <877ei41na0.fsf@gmail.com>
References: <alpine.LNX.2.20.1810260918310.16776@salmo.appl-ecosys.com>
 <CA+vqiLHK4bPZLWpCi6R1WcGEnS32FeQAEiqR6Z8gge7hEVR31A@mail.gmail.com>
 <alpine.LNX.2.20.1810261107540.16776@salmo.appl-ecosys.com>
 <877ei41na0.fsf@gmail.com>
Message-ID: <53C2F2EC-F606-4C1A-861C-5691234DD607@dcn.davis.ca.us>

I haven't seen mention of what OS or filesystem types are involved, but it superficially looks like it might be one of those cases where the filesystem is case-sensitive... check that all your directory and file names are capitalized correctly.

On October 26, 2018 1:11:19 PM PDT, Jeremie Juste <jeremiejuste at gmail.com> wrote:
>Hello,
>
>I suspect the error is in the file input-summerize.R.
>
>I creating a new file input-summerize2.R with only print("hello") for
>instance and check if 
>
>>
>setwd("~/documents/white-papers/geochemistry/willamette-river-mercury/scripts")
>> source("input-summerize2.R")
>
>works
>
>Hope it helps,
>
>Jeremie
>
>
>Rich Shepard <rshepard at appl-ecosys.com> writes:
>
>> On Fri, 26 Oct 2018, Ista Zahn wrote:
>>
>>> I'm confused. It seems the error is that the file can't be found; if
>>> so, what does it matter what is in the file?
>>
>> Ista,
>>
>>   Beats me.
>>
>>> As far as I can see you are either not in the directory you think
>you
>>> are, or b) the file is not named what you think it is.
>>
>>   Yes, the error seems that R cannot find the file, but it's in the
>same
>> directory and the file does exist:
>>
>>> getwd()
>> [1]
>"/home/rshepard/documents/white-papers/geochemistry/willamette-river-mercury/scripts"
>>
>>
>~/documents/white-papers/geochemistry/willamette-river-mercury/scripts]$
>ls input-summerize.R
>> input-summerize.R
>>
>>   So, R is running in the scripts/ directory and the script is there,
>too.
>>
>>   This is why I asked for help as the error makes no sense to me.
>>
>> Regards,
>>
>> Rich
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.



From |@t@z@hn @end|ng |rom gm@||@com  Sat Oct 27 15:35:15 2018
From: |@t@z@hn @end|ng |rom gm@||@com (Ista Zahn)
Date: Sat, 27 Oct 2018 09:35:15 -0400
Subject: [R] 
 source() fails in same directory as script: cannot find file
In-Reply-To: <53C2F2EC-F606-4C1A-861C-5691234DD607@dcn.davis.ca.us>
References: <alpine.LNX.2.20.1810260918310.16776@salmo.appl-ecosys.com>
 <CA+vqiLHK4bPZLWpCi6R1WcGEnS32FeQAEiqR6Z8gge7hEVR31A@mail.gmail.com>
 <alpine.LNX.2.20.1810261107540.16776@salmo.appl-ecosys.com>
 <877ei41na0.fsf@gmail.com>
 <53C2F2EC-F606-4C1A-861C-5691234DD607@dcn.davis.ca.us>
Message-ID: <CA+vqiLHuGJmLTUc_MhFJCPiH0G2F97WL52yw_M-keVsK8Waxcg@mail.gmail.com>

On Fri, Oct 26, 2018 at 10:42 PM Jeff Newmiller
<jdnewmil at dcn.davis.ca.us> wrote:
>
> I haven't seen mention of what OS or filesystem types are involved, but it superficially looks like it might be one of those cases where the filesystem is case-sensitive... check that all your directory and file names are capitalized correctly.

Just out of curiosity -- are my messages to r-help not going through?
I correctly diagnosed the problem as a simple typo in my message on
Oct 26 at 2:54 PM, but then the discussion just continued as if that
never happened.

>
> On October 26, 2018 1:11:19 PM PDT, Jeremie Juste <jeremiejuste at gmail.com> wrote:
> >Hello,
> >
> >I suspect the error is in the file input-summerize.R.
> >
> >I creating a new file input-summerize2.R with only print("hello") for
> >instance and check if
> >
> >>
> >setwd("~/documents/white-papers/geochemistry/willamette-river-mercury/scripts")
> >> source("input-summerize2.R")
> >
> >works
> >
> >Hope it helps,
> >
> >Jeremie
> >
> >
> >Rich Shepard <rshepard at appl-ecosys.com> writes:
> >
> >> On Fri, 26 Oct 2018, Ista Zahn wrote:
> >>
> >>> I'm confused. It seems the error is that the file can't be found; if
> >>> so, what does it matter what is in the file?
> >>
> >> Ista,
> >>
> >>   Beats me.
> >>
> >>> As far as I can see you are either not in the directory you think
> >you
> >>> are, or b) the file is not named what you think it is.
> >>
> >>   Yes, the error seems that R cannot find the file, but it's in the
> >same
> >> directory and the file does exist:
> >>
> >>> getwd()
> >> [1]
> >"/home/rshepard/documents/white-papers/geochemistry/willamette-river-mercury/scripts"
> >>
> >>
> >~/documents/white-papers/geochemistry/willamette-river-mercury/scripts]$
> >ls input-summerize.R
> >> input-summerize.R
> >>
> >>   So, R is running in the scripts/ directory and the script is there,
> >too.
> >>
> >>   This is why I asked for help as the error makes no sense to me.
> >>
> >> Regards,
> >>
> >> Rich
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my phone. Please excuse my brevity.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



From bgunter@4567 @end|ng |rom gm@||@com  Sat Oct 27 16:18:54 2018
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 27 Oct 2018 07:18:54 -0700
Subject: [R] 
 source() fails in same directory as script: cannot find file
In-Reply-To: <CA+vqiLHuGJmLTUc_MhFJCPiH0G2F97WL52yw_M-keVsK8Waxcg@mail.gmail.com>
References: <alpine.LNX.2.20.1810260918310.16776@salmo.appl-ecosys.com>
 <CA+vqiLHK4bPZLWpCi6R1WcGEnS32FeQAEiqR6Z8gge7hEVR31A@mail.gmail.com>
 <alpine.LNX.2.20.1810261107540.16776@salmo.appl-ecosys.com>
 <877ei41na0.fsf@gmail.com>
 <53C2F2EC-F606-4C1A-861C-5691234DD607@dcn.davis.ca.us>
 <CA+vqiLHuGJmLTUc_MhFJCPiH0G2F97WL52yw_M-keVsK8Waxcg@mail.gmail.com>
Message-ID: <CAGxFJbS=KpfEVWb9vTdA+0pf2ZyfQcP7AvxwpH+77TJpxzvV7A@mail.gmail.com>

Your messages got through fine (to me, anyway). I suspect people are just
failing to read through the threads.

-- Bert

On Sat, Oct 27, 2018 at 6:35 AM Ista Zahn <istazahn at gmail.com> wrote:

> On Fri, Oct 26, 2018 at 10:42 PM Jeff Newmiller
> <jdnewmil at dcn.davis.ca.us> wrote:
> >
> > I haven't seen mention of what OS or filesystem types are involved, but
> it superficially looks like it might be one of those cases where the
> filesystem is case-sensitive... check that all your directory and file
> names are capitalized correctly.
>
> Just out of curiosity -- are my messages to r-help not going through?
> I correctly diagnosed the problem as a simple typo in my message on
> Oct 26 at 2:54 PM, but then the discussion just continued as if that
> never happened.
>
> >
> > On October 26, 2018 1:11:19 PM PDT, Jeremie Juste <
> jeremiejuste at gmail.com> wrote:
> > >Hello,
> > >
> > >I suspect the error is in the file input-summerize.R.
> > >
> > >I creating a new file input-summerize2.R with only print("hello") for
> > >instance and check if
> > >
> > >>
> >
> >setwd("~/documents/white-papers/geochemistry/willamette-river-mercury/scripts")
> > >> source("input-summerize2.R")
> > >
> > >works
> > >
> > >Hope it helps,
> > >
> > >Jeremie
> > >
> > >
> > >Rich Shepard <rshepard at appl-ecosys.com> writes:
> > >
> > >> On Fri, 26 Oct 2018, Ista Zahn wrote:
> > >>
> > >>> I'm confused. It seems the error is that the file can't be found; if
> > >>> so, what does it matter what is in the file?
> > >>
> > >> Ista,
> > >>
> > >>   Beats me.
> > >>
> > >>> As far as I can see you are either not in the directory you think
> > >you
> > >>> are, or b) the file is not named what you think it is.
> > >>
> > >>   Yes, the error seems that R cannot find the file, but it's in the
> > >same
> > >> directory and the file does exist:
> > >>
> > >>> getwd()
> > >> [1]
> >
> >"/home/rshepard/documents/white-papers/geochemistry/willamette-river-mercury/scripts"
> > >>
> > >>
> > >~/documents/white-papers/geochemistry/willamette-river-mercury/scripts]$
> > >ls input-summerize.R
> > >> input-summerize.R
> > >>
> > >>   So, R is running in the scripts/ directory and the script is there,
> > >too.
> > >>
> > >>   This is why I asked for help as the error makes no sense to me.
> > >>
> > >> Regards,
> > >>
> > >> Rich
> > >>
> > >> ______________________________________________
> > >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >> https://stat.ethz.ch/mailman/listinfo/r-help
> > >> PLEASE do read the posting guide
> > >http://www.R-project.org/posting-guide.html
> > >> and provide commented, minimal, self-contained, reproducible code.
> > >
> > >______________________________________________
> > >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >https://stat.ethz.ch/mailman/listinfo/r-help
> > >PLEASE do read the posting guide
> > >http://www.R-project.org/posting-guide.html
> > >and provide commented, minimal, self-contained, reproducible code.
> >
> > --
> > Sent from my phone. Please excuse my brevity.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Sat Oct 27 16:37:59 2018
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Sat, 27 Oct 2018 07:37:59 -0700 (PDT)
Subject: [R] 
 source() fails in same directory as script: cannot find file
In-Reply-To: <CA+vqiLHuGJmLTUc_MhFJCPiH0G2F97WL52yw_M-keVsK8Waxcg@mail.gmail.com>
References: <alpine.LNX.2.20.1810260918310.16776@salmo.appl-ecosys.com>
 <CA+vqiLHK4bPZLWpCi6R1WcGEnS32FeQAEiqR6Z8gge7hEVR31A@mail.gmail.com>
 <alpine.LNX.2.20.1810261107540.16776@salmo.appl-ecosys.com>
 <877ei41na0.fsf@gmail.com>
 <53C2F2EC-F606-4C1A-861C-5691234DD607@dcn.davis.ca.us>
 <CA+vqiLHuGJmLTUc_MhFJCPiH0G2F97WL52yw_M-keVsK8Waxcg@mail.gmail.com>
Message-ID: <alpine.LNX.2.20.1810270736340.11686@salmo.appl-ecosys.com>

On Sat, 27 Oct 2018, Ista Zahn wrote:

> Just out of curiosity -- are my messages to r-help not going through? I
> correctly diagnosed the problem as a simple typo in my message on Oct 26
> at 2:54 PM, but then the discussion just continued as if that never
> happened.

   I responded to you and Jeff (his off the list), and saw my response to you
yesterday.

   Since you found the typo I keep missing, and I fixed it, I deleted the
thread here.

Rich



From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Sat Oct 27 16:44:14 2018
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Sat, 27 Oct 2018 07:44:14 -0700 (PDT)
Subject: [R] 
 source() fails in same directory as script: cannot find file
In-Reply-To: <alpine.LNX.2.20.1810270736340.11686@salmo.appl-ecosys.com>
References: <alpine.LNX.2.20.1810260918310.16776@salmo.appl-ecosys.com>
 <CA+vqiLHK4bPZLWpCi6R1WcGEnS32FeQAEiqR6Z8gge7hEVR31A@mail.gmail.com>
 <alpine.LNX.2.20.1810261107540.16776@salmo.appl-ecosys.com>
 <877ei41na0.fsf@gmail.com>
 <53C2F2EC-F606-4C1A-861C-5691234DD607@dcn.davis.ca.us>
 <CA+vqiLHuGJmLTUc_MhFJCPiH0G2F97WL52yw_M-keVsK8Waxcg@mail.gmail.com>
 <alpine.LNX.2.20.1810270736340.11686@salmo.appl-ecosys.com>
Message-ID: <alpine.LNX.2.20.1810270743390.11686@salmo.appl-ecosys.com>

On Sat, 27 Oct 2018, Rich Shepard wrote:

> thread here.

   'Here' meaning on alpine on my workstation, not on the mail list.

Rich



From rhe|p @end|ng |rom eoo@@dd@@n|  Sat Oct 27 22:17:32 2018
From: rhe|p @end|ng |rom eoo@@dd@@n| (Jan van der Laan)
Date: Sat, 27 Oct 2018 22:17:32 +0200
Subject: [R] 
 Calculating just a single row of dissimilarity/distance matrix
In-Reply-To: <CAHxtjzCUKLsCPqu5zzjEKPG0wy+kFr8EMhGdXkss5GJcd=_VbA@mail.gmail.com>
References: <CAHxtjzA_h3oBPZPdMX20ROK1Qy1xjgriqXMF4UvXLN=Q0Hk6Kg@mail.gmail.com>
 <a824c37f-a9d4-cc4b-2ea4-d51be254e59b@eoos.dds.nl>
 <CAHxtjzCUKLsCPqu5zzjEKPG0wy+kFr8EMhGdXkss5GJcd=_VbA@mail.gmail.com>
Message-ID: <6b6b0e50-9d79-49a6-d882-1ad7a83024a4@eoos.dds.nl>

Please respond to the list; there are more people answering there.


As explained in the documentation gower_dist performes a pairwise 
comparison of the two arguments recycling the shortest one if needed, so 
indeed gower_dist(iris[1:5, ], iris) doesn't do what you want.

Possible solutions are:

tmp <- split(iris[1:150, ], seq_len(150))

sapply(gower_dist, iris)


and:


library(dplyr)

library(tidyr)

pairs <- expand.grid(x = 1:5, y = 1:nrow(iris))
pairs$dist <- gower_dist(iris[pairs$x, ], iris[pairs$y, ])
pairs %>% spread(y, dist)

Don't know which one is faster. And there are probably various other 
solutions too.

--
Jan





On 27-10-18 18:04, Aerenbkts bkts wrote:
> Dear Jan
>
> Thanks for your help. Actually it works for the first element. But I 
> tried to calculate distance values for the first N rows. For example;
>
> gower_dist(iris[1:5,], iris) // gower distance for the first 5 rows. 
> but it did not work. Do you have any suggestion about it?
>
>
>
> On Fri, 26 Oct 2018 at 21:31, Jan van der Laan <rhelp at eoos.dds.nl 
> <mailto:rhelp at eoos.dds.nl>> wrote:
>
>
>     Using another implementation of the gower distance:
>
>
>     library(gower)
>
>     gower_dist(iris[1,], iris)
>
>
>     HTH,
>
>     Jan
>
>
>
>     On 26-10-18 15:07, Aerenbkts bkts wrote:
>     > I have a data-frame with 30k rows and 10 features. I would like to
>     > calculate distance matrix like below;
>     >
>     > gower_dist <- daisy(data-frame, metric = "gower"),
>     >
>     >
>     > This function returns whole dissimilarity matrix. I want to get just
>     > the first row.
>     > (Just distances of the first element in data-frame). How can I
>     do it?
>     > Do you have an idea?
>     >
>     >
>     > Regards
>     >
>     >? ? ? ?[[alternative HTML version deleted]]
>     >
>     > ______________________________________________
>     > R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>     -- To UNSUBSCRIBE and more, see
>     > https://stat.ethz.ch/mailman/listinfo/r-help
>     > PLEASE do read the posting guide
>     http://www.R-project.org/posting-guide.html
>     > and provide commented, minimal, self-contained, reproducible code.
>
>     ______________________________________________
>     R-help at r-project.org <mailto:R-help at r-project.org> mailing list --
>     To UNSUBSCRIBE and more, see
>     https://stat.ethz.ch/mailman/listinfo/r-help
>     PLEASE do read the posting guide
>     http://www.R-project.org/posting-guide.html
>     and provide commented, minimal, self-contained, reproducible code.
>



From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Oct 27 22:38:40 2018
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 27 Oct 2018 16:38:40 -0400
Subject: [R] 
 source() fails in same directory as script: cannot find file
In-Reply-To: <CA+vqiLHuGJmLTUc_MhFJCPiH0G2F97WL52yw_M-keVsK8Waxcg@mail.gmail.com>
References: <alpine.LNX.2.20.1810260918310.16776@salmo.appl-ecosys.com>
 <CA+vqiLHK4bPZLWpCi6R1WcGEnS32FeQAEiqR6Z8gge7hEVR31A@mail.gmail.com>
 <alpine.LNX.2.20.1810261107540.16776@salmo.appl-ecosys.com>
 <877ei41na0.fsf@gmail.com>
 <53C2F2EC-F606-4C1A-861C-5691234DD607@dcn.davis.ca.us>
 <CA+vqiLHuGJmLTUc_MhFJCPiH0G2F97WL52yw_M-keVsK8Waxcg@mail.gmail.com>
Message-ID: <169fba10-e720-7b22-1110-0ccd7f67be1a@gmail.com>

On 27/10/2018 9:35 AM, Ista Zahn wrote:
> On Fri, Oct 26, 2018 at 10:42 PM Jeff Newmiller
> <jdnewmil at dcn.davis.ca.us> wrote:
>>
>> I haven't seen mention of what OS or filesystem types are involved, but it superficially looks like it might be one of those cases where the filesystem is case-sensitive... check that all your directory and file names are capitalized correctly.
> 
> Just out of curiosity -- are my messages to r-help not going through?
> I correctly diagnosed the problem as a simple typo in my message on
> Oct 26 at 2:54 PM, but then the discussion just continued as if that
> never happened.

I saw it.  I don't know why others didn't....

Duncan Murdoch

> 
>>
>> On October 26, 2018 1:11:19 PM PDT, Jeremie Juste <jeremiejuste at gmail.com> wrote:
>>> Hello,
>>>
>>> I suspect the error is in the file input-summerize.R.
>>>
>>> I creating a new file input-summerize2.R with only print("hello") for
>>> instance and check if
>>>
>>>>
>>> setwd("~/documents/white-papers/geochemistry/willamette-river-mercury/scripts")
>>>> source("input-summerize2.R")
>>>
>>> works
>>>
>>> Hope it helps,
>>>
>>> Jeremie
>>>
>>>
>>> Rich Shepard <rshepard at appl-ecosys.com> writes:
>>>
>>>> On Fri, 26 Oct 2018, Ista Zahn wrote:
>>>>
>>>>> I'm confused. It seems the error is that the file can't be found; if
>>>>> so, what does it matter what is in the file?
>>>>
>>>> Ista,
>>>>
>>>>    Beats me.
>>>>
>>>>> As far as I can see you are either not in the directory you think
>>> you
>>>>> are, or b) the file is not named what you think it is.
>>>>
>>>>    Yes, the error seems that R cannot find the file, but it's in the
>>> same
>>>> directory and the file does exist:
>>>>
>>>>> getwd()
>>>> [1]
>>> "/home/rshepard/documents/white-papers/geochemistry/willamette-river-mercury/scripts"
>>>>
>>>>
>>> ~/documents/white-papers/geochemistry/willamette-river-mercury/scripts]$
>>> ls input-summerize.R
>>>> input-summerize.R
>>>>
>>>>    So, R is running in the scripts/ directory and the script is there,
>>> too.
>>>>
>>>>    This is why I asked for help as the error makes no sense to me.
>>>>
>>>> Regards,
>>>>
>>>> Rich
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>> --
>> Sent from my phone. Please excuse my brevity.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>



From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Oct 27 22:57:37 2018
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 27 Oct 2018 13:57:37 -0700
Subject: [R] 
 source() fails in same directory as script: cannot find file
In-Reply-To: <169fba10-e720-7b22-1110-0ccd7f67be1a@gmail.com>
References: <alpine.LNX.2.20.1810260918310.16776@salmo.appl-ecosys.com>
 <CA+vqiLHK4bPZLWpCi6R1WcGEnS32FeQAEiqR6Z8gge7hEVR31A@mail.gmail.com>
 <alpine.LNX.2.20.1810261107540.16776@salmo.appl-ecosys.com>
 <877ei41na0.fsf@gmail.com>
 <53C2F2EC-F606-4C1A-861C-5691234DD607@dcn.davis.ca.us>
 <CA+vqiLHuGJmLTUc_MhFJCPiH0G2F97WL52yw_M-keVsK8Waxcg@mail.gmail.com>
 <169fba10-e720-7b22-1110-0ccd7f67be1a@gmail.com>
Message-ID: <ACC8128E-878D-4A14-B1E8-62BF86D735BF@dcn.davis.ca.us>

FWIW the diagnosis of misspelling appeared, ah, miraculous as the OP appeared consistent in using the incorrect spelling and the diagnosis was not confirmed by the OP.

On October 27, 2018 1:38:40 PM PDT, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>On 27/10/2018 9:35 AM, Ista Zahn wrote:
>> On Fri, Oct 26, 2018 at 10:42 PM Jeff Newmiller
>> <jdnewmil at dcn.davis.ca.us> wrote:
>>>
>>> I haven't seen mention of what OS or filesystem types are involved,
>but it superficially looks like it might be one of those cases where
>the filesystem is case-sensitive... check that all your directory and
>file names are capitalized correctly.
>> 
>> Just out of curiosity -- are my messages to r-help not going through?
>> I correctly diagnosed the problem as a simple typo in my message on
>> Oct 26 at 2:54 PM, but then the discussion just continued as if that
>> never happened.
>
>I saw it.  I don't know why others didn't....
>
>Duncan Murdoch
>
>> 
>>>
>>> On October 26, 2018 1:11:19 PM PDT, Jeremie Juste
><jeremiejuste at gmail.com> wrote:
>>>> Hello,
>>>>
>>>> I suspect the error is in the file input-summerize.R.
>>>>
>>>> I creating a new file input-summerize2.R with only print("hello")
>for
>>>> instance and check if
>>>>
>>>>>
>>>>
>setwd("~/documents/white-papers/geochemistry/willamette-river-mercury/scripts")
>>>>> source("input-summerize2.R")
>>>>
>>>> works
>>>>
>>>> Hope it helps,
>>>>
>>>> Jeremie
>>>>
>>>>
>>>> Rich Shepard <rshepard at appl-ecosys.com> writes:
>>>>
>>>>> On Fri, 26 Oct 2018, Ista Zahn wrote:
>>>>>
>>>>>> I'm confused. It seems the error is that the file can't be found;
>if
>>>>>> so, what does it matter what is in the file?
>>>>>
>>>>> Ista,
>>>>>
>>>>>    Beats me.
>>>>>
>>>>>> As far as I can see you are either not in the directory you think
>>>> you
>>>>>> are, or b) the file is not named what you think it is.
>>>>>
>>>>>    Yes, the error seems that R cannot find the file, but it's in
>the
>>>> same
>>>>> directory and the file does exist:
>>>>>
>>>>>> getwd()
>>>>> [1]
>>>>
>"/home/rshepard/documents/white-papers/geochemistry/willamette-river-mercury/scripts"
>>>>>
>>>>>
>>>>
>~/documents/white-papers/geochemistry/willamette-river-mercury/scripts]$
>>>> ls input-summerize.R
>>>>> input-summerize.R
>>>>>
>>>>>    So, R is running in the scripts/ directory and the script is
>there,
>>>> too.
>>>>>
>>>>>    This is why I asked for help as the error makes no sense to me.
>>>>>
>>>>> Regards,
>>>>>
>>>>> Rich
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>> --
>>> Sent from my phone. Please excuse my brevity.
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>> 

-- 
Sent from my phone. Please excuse my brevity.



From r@hep@rd @end|ng |rom @pp|-eco@y@@com  Sat Oct 27 23:05:58 2018
From: r@hep@rd @end|ng |rom @pp|-eco@y@@com (Rich Shepard)
Date: Sat, 27 Oct 2018 14:05:58 -0700 (PDT)
Subject: [R] 
 source() fails in same directory as script: cannot find file
In-Reply-To: <ACC8128E-878D-4A14-B1E8-62BF86D735BF@dcn.davis.ca.us>
References: <alpine.LNX.2.20.1810260918310.16776@salmo.appl-ecosys.com>
 <CA+vqiLHK4bPZLWpCi6R1WcGEnS32FeQAEiqR6Z8gge7hEVR31A@mail.gmail.com>
 <alpine.LNX.2.20.1810261107540.16776@salmo.appl-ecosys.com>
 <877ei41na0.fsf@gmail.com>
 <53C2F2EC-F606-4C1A-861C-5691234DD607@dcn.davis.ca.us>
 <CA+vqiLHuGJmLTUc_MhFJCPiH0G2F97WL52yw_M-keVsK8Waxcg@mail.gmail.com>
 <169fba10-e720-7b22-1110-0ccd7f67be1a@gmail.com>
 <ACC8128E-878D-4A14-B1E8-62BF86D735BF@dcn.davis.ca.us>
Message-ID: <alpine.LNX.2.20.1810271404400.11686@salmo.appl-ecosys.com>

On Sat, 27 Oct 2018, Jeff Newmiller wrote:

> FWIW the diagnosis of misspelling appeared, ah, miraculous as the OP
> appeared consistent in using the incorrect spelling and the diagnosis was
> not confirmed by the OP.

>From rshepard at appl-ecosys.com Fri Oct 26 12:46:22 2018
Date: Fri, 26 Oct 2018 12:46:22 -0700 (PDT)
From: Rich Shepard <rshepard at appl-ecosys.com>
To: r-help at r-project.org
Subject: Re: [R] source() fails in same directory as script: cannot find file [FIXED]

On Fri, 26 Oct 2018, Ista Zahn wrote:

> No, the script is _not_ there. Compare your code:
>
>> source('input-summarize.R')
>
> to the contents of the directory:
>
>> input-summerize.R

> The moral of the story is, use tab-completion or copy/paste.

Ista,

    Thanks for catching the typo that I kept misssing. I mis-named the script
and didn't see that on the emacs buffer frame.

Best regards,

Rich



From |@t@z@hn @end|ng |rom gm@||@com  Sat Oct 27 23:48:06 2018
From: |@t@z@hn @end|ng |rom gm@||@com (Ista Zahn)
Date: Sat, 27 Oct 2018 17:48:06 -0400
Subject: [R] 
 source() fails in same directory as script: cannot find file
In-Reply-To: <ACC8128E-878D-4A14-B1E8-62BF86D735BF@dcn.davis.ca.us>
References: <alpine.LNX.2.20.1810260918310.16776@salmo.appl-ecosys.com>
 <CA+vqiLHK4bPZLWpCi6R1WcGEnS32FeQAEiqR6Z8gge7hEVR31A@mail.gmail.com>
 <alpine.LNX.2.20.1810261107540.16776@salmo.appl-ecosys.com>
 <877ei41na0.fsf@gmail.com>
 <53C2F2EC-F606-4C1A-861C-5691234DD607@dcn.davis.ca.us>
 <CA+vqiLHuGJmLTUc_MhFJCPiH0G2F97WL52yw_M-keVsK8Waxcg@mail.gmail.com>
 <169fba10-e720-7b22-1110-0ccd7f67be1a@gmail.com>
 <ACC8128E-878D-4A14-B1E8-62BF86D735BF@dcn.davis.ca.us>
Message-ID: <CA+vqiLEZDQy6QMfDxUSCW-rgQcx1fn6N68jwype+bpfRZYycZw@mail.gmail.com>

On Sat, Oct 27, 2018 at 4:57 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>
> FWIW the diagnosis of misspelling appeared, ah, miraculous as the OP appeared consistent in using the incorrect spelling and the diagnosis was not confirmed by the OP.

I am of course happy to be seen as Miracle Worker, but I assure you I
solved the mystery without recourse to any information beyond what was
publicly posted on the r-help mailing list.

--Ista

>
> On October 27, 2018 1:38:40 PM PDT, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> >On 27/10/2018 9:35 AM, Ista Zahn wrote:
> >> On Fri, Oct 26, 2018 at 10:42 PM Jeff Newmiller
> >> <jdnewmil at dcn.davis.ca.us> wrote:
> >>>
> >>> I haven't seen mention of what OS or filesystem types are involved,
> >but it superficially looks like it might be one of those cases where
> >the filesystem is case-sensitive... check that all your directory and
> >file names are capitalized correctly.
> >>
> >> Just out of curiosity -- are my messages to r-help not going through?
> >> I correctly diagnosed the problem as a simple typo in my message on
> >> Oct 26 at 2:54 PM, but then the discussion just continued as if that
> >> never happened.
> >
> >I saw it.  I don't know why others didn't....
> >
> >Duncan Murdoch
> >
> >>
> >>>
> >>> On October 26, 2018 1:11:19 PM PDT, Jeremie Juste
> ><jeremiejuste at gmail.com> wrote:
> >>>> Hello,
> >>>>
> >>>> I suspect the error is in the file input-summerize.R.
> >>>>
> >>>> I creating a new file input-summerize2.R with only print("hello")
> >for
> >>>> instance and check if
> >>>>
> >>>>>
> >>>>
> >setwd("~/documents/white-papers/geochemistry/willamette-river-mercury/scripts")
> >>>>> source("input-summerize2.R")
> >>>>
> >>>> works
> >>>>
> >>>> Hope it helps,
> >>>>
> >>>> Jeremie
> >>>>
> >>>>
> >>>> Rich Shepard <rshepard at appl-ecosys.com> writes:
> >>>>
> >>>>> On Fri, 26 Oct 2018, Ista Zahn wrote:
> >>>>>
> >>>>>> I'm confused. It seems the error is that the file can't be found;
> >if
> >>>>>> so, what does it matter what is in the file?
> >>>>>
> >>>>> Ista,
> >>>>>
> >>>>>    Beats me.
> >>>>>
> >>>>>> As far as I can see you are either not in the directory you think
> >>>> you
> >>>>>> are, or b) the file is not named what you think it is.
> >>>>>
> >>>>>    Yes, the error seems that R cannot find the file, but it's in
> >the
> >>>> same
> >>>>> directory and the file does exist:
> >>>>>
> >>>>>> getwd()
> >>>>> [1]
> >>>>
> >"/home/rshepard/documents/white-papers/geochemistry/willamette-river-mercury/scripts"
> >>>>>
> >>>>>
> >>>>
> >~/documents/white-papers/geochemistry/willamette-river-mercury/scripts]$
> >>>> ls input-summerize.R
> >>>>> input-summerize.R
> >>>>>
> >>>>>    So, R is running in the scripts/ directory and the script is
> >there,
> >>>> too.
> >>>>>
> >>>>>    This is why I asked for help as the error makes no sense to me.
> >>>>>
> >>>>> Regards,
> >>>>>
> >>>>> Rich
> >>>>>
> >>>>> ______________________________________________
> >>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>>> PLEASE do read the posting guide
> >>>> http://www.R-project.org/posting-guide.html
> >>>>> and provide commented, minimal, self-contained, reproducible code.
> >>>>
> >>>> ______________________________________________
> >>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>> PLEASE do read the posting guide
> >>>> http://www.R-project.org/posting-guide.html
> >>>> and provide commented, minimal, self-contained, reproducible code.
> >>>
> >>> --
> >>> Sent from my phone. Please excuse my brevity.
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >>
>
> --
> Sent from my phone. Please excuse my brevity.



From @erenbkt@ @end|ng |rom gm@||@com  Sun Oct 28 15:01:44 2018
From: @erenbkt@ @end|ng |rom gm@||@com (Aerenbkts bkts)
Date: Sun, 28 Oct 2018 15:01:44 +0100
Subject: [R] Handling bid dist object
Message-ID: <CAHxtjzAczEzmz7pXxSpe51EBKaTc+-rVcYFNWHC4vx9REQehxA@mail.gmail.com>

I have a distance/dissimilarity matrix (30K rows 30K columns) that is
calculated in a loop and stored in ROM.

I would like to do clustering over the matrix.

I import and cluster it as below;

Mydata<-read.csv("Mydata.csv")
Mydata<-as.dist(Mydata)
Results<-hclust(Mydata)


But when I convert the matrix to dist object, I get RAM limitation error.
How can I handle it. Can I run hclust algorithm in a loop/chunking?

	[[alternative HTML version deleted]]



From dw|n@em|u@ @end|ng |rom comc@@t@net  Sun Oct 28 17:58:28 2018
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Sun, 28 Oct 2018 09:58:28 -0700
Subject: [R] "logical indexing,
 " [was] match() question or needle haystack problem for a data.frame
In-Reply-To: <3ae8b56c-b807-3491-9671-55b5e07c4230@krueger-family.de>
References: <cac83a2c-2edd-e0e9-8b54-96afd48d401d@krueger-family.de>
 <CAGxFJbQrCaH6jLzMU60dx-U7m3oNT-zt1FhUOmcaOb-8njrp2w@mail.gmail.com>
 <CAGgJW74Tebw5CNDGVSf32bF7cMwkM3z=qi++8-SUPFYOHynYGQ@mail.gmail.com>
 <6ebcd80a-1786-34bb-d852-d05bfa24c9bc@krueger-family.de>
 <CAGxFJbS7vgQQK8t-X_z==on+jzYtDMmroCv3hPM6HWyU0Uq7Jw@mail.gmail.com>
 <35998e7b-b02b-9993-5b61-fb20978a39f4@krueger-family.de>
 <410772ED-27FA-427D-BA16-83205608EDE2@gmail.com>
 <3ae8b56c-b807-3491-9671-55b5e07c4230@krueger-family.de>
Message-ID: <0D78E2FA-C3B3-4CB8-B794-FBC71AFC47F5@comcast.net>



> On Oct 25, 2018, at 11:28 PM, Knut Krueger <rhelp at krueger-family.de> wrote:
> 
> Am 25.10.18 um 16:13 schrieb peter dalgaard:
>> 
>> Yes: x[!(x$A %in% y$B),]
> 
> Ok thats in my opinion a little workaround
> why?:
> 
> There is an
> = and !=
> < and >
> 
> 
> means the opposite is available between terms.
> 
> why is there f.e no %!in%, %notin%  or !%in%
> 
> This would be more intuitive.

This illustrates a failure to read the obvious help page completely. The "Examples" section includes a definition of "%w/o%" which is exactly what was desired.

-- 
David.
> 
> Kind regards Knut
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



From @nowb@||0916 @end|ng |rom 163@com  Sun Oct 28 16:16:32 2018
From: @nowb@||0916 @end|ng |rom 163@com (snowball0916)
Date: Sun, 28 Oct 2018 23:16:32 +0800
Subject: [R] date and time data on x axis
Message-ID: <2018102823163020889853@163.com>

Hi, guys
How do you guys deal with the date and time data on x axis?
I have some trouble with it. Could you help with this?

=============
Sample Data
=============
The sample data look like this:

20181028_10:00:00 600 
20181028_10:00:01 500 
20181028_10:00:02 450 
20181028_10:00:03 660
......

=============
My Code
=============

library(lubridate)
mydata <- read.table("e:/R_study/graph_test2.txt")
xdata <- ymd_hms(mydata$V1)
ydata <- mydata$V2
plot(xdata, ydata, type="o")


=============
Questions:
=============

1. Why my x axis does not show me the correct date time like ""2018-10-28 10:00:00 UTC" ?
2. If my data is very huge(like data in every second and the data has the whole day , even the whole month), how can I display the x axis in a neat and clean way?

Thanks very much.
 



	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sun Oct 28 19:53:49 2018
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sun, 28 Oct 2018 18:53:49 +0000
Subject: [R] date and time data on x axis
In-Reply-To: <2018102823163020889853@163.com>
References: <2018102823163020889853@163.com>
Message-ID: <793bce3a-a029-f235-96f6-64cc47891136@sapo.pt>

Hello,

Maybe you could get some inspiration in the following code.


op <- par(mar = c(4, 0, 0, 0) + par("mar"))

plot(xdata, ydata, type = "o", xaxt = "n")
axis.POSIXct(1, xdata, at = xdata, labels = xdata, las = 2)

par(op)


The important part is the call axis.POSIXct, argument las = 2 and the 
call to par is to make sure that the labels are visible.


Hope this helps,

Rui Barradas


?s 15:16 de 28/10/2018, snowball0916 escreveu:
> Hi, guys
> How do you guys deal with the date and time data on x axis?
> I have some trouble with it. Could you help with this?
> 
> =============
> Sample Data
> =============
> The sample data look like this:
> 
> 20181028_10:00:00 600
> 20181028_10:00:01 500
> 20181028_10:00:02 450
> 20181028_10:00:03 660
> ......
> 
> =============
> My Code
> =============
> 
> library(lubridate)
> mydata <- read.table("e:/R_study/graph_test2.txt")
> xdata <- ymd_hms(mydata$V1)
> ydata <- mydata$V2
> plot(xdata, ydata, type="o")
> 
> 
> =============
> Questions:
> =============
> 
> 1. Why my x axis does not show me the correct date time like ""2018-10-28 10:00:00 UTC" ?
> 2. If my data is very huge(like data in every second and the data has the whole day , even the whole month), how can I display the x axis in a neat and clean way?
> 
> Thanks very much.
>   
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>



From jho|tm@n @end|ng |rom gm@||@com  Sun Oct 28 22:53:28 2018
From: jho|tm@n @end|ng |rom gm@||@com (jim holtman)
Date: Sun, 28 Oct 2018 14:53:28 -0700
Subject: [R] date and time data on x axis
In-Reply-To: <2018102823163020889853@163.com>
References: <2018102823163020889853@163.com>
Message-ID: <CAAxdm-6Wc2007b=6FR0geAXWhJnODPXjfhsgOwLmRe+rRBjM9Q@mail.gmail.com>

You need to specify what the format of the date will be.  I am using
ggplot for the plot:


    library(lubridate)
    library(tidyverse)
    mydata <- read.table(text = "time value
    20181028_10:00:00 600
    20181028_10:00:01 500
    20181028_10:00:02 450
    20181028_10:00:03 660", header = TRUE, as.is = TRUE)

    mydata <- mutate(mydata,
                     time = ymd_hms(time)
    )

    ggplot(mydata, aes(time, value)) +
      geom_point() +
      scale_x_datetime(date_labels = "%m/%d %H:%M:%S"
      ) +
      theme(axis.text.x = element_text(angle = 25, vjust = 1.0, hjust = 1.0))

Jim Holtman
Data Munger Guru

What is the problem that you are trying to solve?
Tell me what you want to do, not how you want to do it.

Jim Holtman
Data Munger Guru

What is the problem that you are trying to solve?
Tell me what you want to do, not how you want to do it.


On Sun, Oct 28, 2018 at 11:23 AM snowball0916 <snowball0916 at 163.com> wrote:
>
> Hi, guys
> How do you guys deal with the date and time data on x axis?
> I have some trouble with it. Could you help with this?
>
> =============
> Sample Data
> =============
> The sample data look like this:
>
> 20181028_10:00:00 600
> 20181028_10:00:01 500
> 20181028_10:00:02 450
> 20181028_10:00:03 660
> ......
>
> =============
> My Code
> =============
>
> library(lubridate)
> mydata <- read.table("e:/R_study/graph_test2.txt")
> xdata <- ymd_hms(mydata$V1)
> ydata <- mydata$V2
> plot(xdata, ydata, type="o")
>
>
> =============
> Questions:
> =============
>
> 1. Why my x axis does not show me the correct date time like ""2018-10-28 10:00:00 UTC" ?
> 2. If my data is very huge(like data in every second and the data has the whole day , even the whole month), how can I display the x axis in a neat and clean way?
>
> Thanks very much.
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



From b|@ck|@h952 @end|ng |rom gm@||@com  Sun Oct 28 21:26:27 2018
From: b|@ck|@h952 @end|ng |rom gm@||@com (Black Yellow)
Date: Sun, 28 Oct 2018 15:26:27 -0500
Subject: [R] Gamma Simulation from Exponential Distribution: find sample
 size given power and sig.Level
Message-ID: <CAM_JVUGuj2QZt0EUmi-jzDSL3mp5KpBn=U4JvNHwmc2tsic_Uw@mail.gmail.com>

I built my function to simulate two gamma distributions X and Y based on the
sum of i.i.d exponential distributions. Assume my code is correct about this
simulation, I am interested in finding an equal sample size n for X and Y
such that n can be determined given 90% power and 5% significance level.

My thought process is that I create a sequence of n's value and use a for
loop to reiterate each n value in the sequence along with an "if" statement
saying that if given the n value, 95% of the time when I replicate the
process, the probability that I reject the null hypothesis given the
alternative is true is 90%.

The problem I am facing is that n value is always the maximum within my
n_seq. I am doubting there must be something wrong when I generate my two
Gamma distributions.

Any input is appreciated.

    set.seed(3701)
    n_seq = seq(from = 1, to = 200, by = 1)
    Z.list = numeric(reps)
    var.list = numeric(reps)

    gamma.sim = function(n, mu){
      for(j in 1:5e5){
          u.list = runif(n = n)
          x.list = -mu*log(1-u.list)
          Z.list[j] = sum(x.list)
      }
      return(Z.list)
    }


    # Generate n generations for X.gamma and Y.gamma
    gen_p_vals <- function(n = reps){
      p_vec <- numeric(reps)
      for(ii in 1:reps){
        x <- gamma.sim(n = 79, mu = 1)
        y <- gamma.sim(n = 80, mu = 1)
        t_stat_numerator <- mean(x) - mean(y) - 0 # Test Statistic under
null hypothesis
        s_p <- sqrt(sum((x-mean(x))^2) + sum((y-mean(y))^2)) /
(sqrt(2*reps-2))
        t_stat <- t_stat_numerator /(s_p*(sqrt((1/reps)+(1/reps))))
        p_vec[ii] <- 2* pt(-abs(t_stat), 2*reps-2)
      }
      return(p_vec)
    }
    power_pvals <- gen_p_vals(n = 10)
    mean(power_pvals < 0.05)

    for(j in 2:100){
      power_pvals = gen_p_vals(n = n_seq[j])
      if (mean(power_pvals < 0.05) == 0.90){
        print(j)
      }
    }

	[[alternative HTML version deleted]]



From @nowb@||0916 @end|ng |rom 163@com  Mon Oct 29 15:03:47 2018
From: @nowb@||0916 @end|ng |rom 163@com (snowball0916)
Date: Mon, 29 Oct 2018 22:03:47 +0800
Subject: [R] date and time data on x axis
References: <2018102823163020889853@163.com>, 
 <793bce3a-a029-f235-96f6-64cc47891136@sapo.pt>
Message-ID: <2018102922034545652561@163.com>

Hi, Rui
Thanks for your code, even though I'm not fully understand it.
And I am new to R, could you kindly help me with
-1). what's the nested usage stand for?
op <- par(mar = c(4, 0, 0, 0) + par("mar"))

-2). how can I get the axis.POSIXct usage or help?
I use help(axis) and help(POSIXct) and not found the actual use.

Thanks very much.






 
From: Rui Barradas
Date: 2018-10-29 02:53
To: snowball0916; r-help
Subject: Re: [R] date and time data on x axis
Hello,
 
Maybe you could get some inspiration in the following code.
 
 
op <- par(mar = c(4, 0, 0, 0) + par("mar"))
 
plot(xdata, ydata, type = "o", xaxt = "n")
axis.POSIXct(1, xdata, at = xdata, labels = xdata, las = 2)
 
par(op)
 
 
The important part is the call axis.POSIXct, argument las = 2 and the 
call to par is to make sure that the labels are visible.
 
 
Hope this helps,
 
Rui Barradas
 
 
?s 15:16 de 28/10/2018, snowball0916 escreveu:
> Hi, guys
> How do you guys deal with the date and time data on x axis?
> I have some trouble with it. Could you help with this?
> 
> =============
> Sample Data
> =============
> The sample data look like this:
> 
> 20181028_10:00:00 600
> 20181028_10:00:01 500
> 20181028_10:00:02 450
> 20181028_10:00:03 660
> ......
> 
> =============
> My Code
> =============
> 
> library(lubridate)
> mydata <- read.table("e:/R_study/graph_test2.txt")
> xdata <- ymd_hms(mydata$V1)
> ydata <- mydata$V2
> plot(xdata, ydata, type="o")
> 
> 
> =============
> Questions:
> =============
> 
> 1. Why my x axis does not show me the correct date time like ""2018-10-28 10:00:00 UTC" ?
> 2. If my data is very huge(like data in every second and the data has the whole day , even the whole month), how can I display the x axis in a neat and clean way?
> 
> Thanks very much.
>   
> 
> 
> 
> [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

	[[alternative HTML version deleted]]


From @nowb@||0916 @end|ng |rom 163@com  Mon Oct 29 15:10:53 2018
From: @nowb@||0916 @end|ng |rom 163@com (snowball0916)
Date: Mon, 29 Oct 2018 22:10:53 +0800
Subject: [R] date and time data on x axis
References: <2018102823163020889853@163.com>, 
 <CAAxdm-6Wc2007b=6FR0geAXWhJnODPXjfhsgOwLmRe+rRBjM9Q@mail.gmail.com>
Message-ID: <2018102922105253138463@163.com>

Hi, Jim
Thanks very much, I will need to study your code, though.
Will large volume of data will affect the x axis display?
Thanks again. 
 


 
From: jim holtman
Date: 2018-10-29 05:53
To: snowball0916
CC: R mailing list
Subject: Re: [R] date and time data on x axis
You need to specify what the format of the date will be.  I am using
ggplot for the plot:
 
 
    library(lubridate)
    library(tidyverse)
    mydata <- read.table(text = "time value
    20181028_10:00:00 600
    20181028_10:00:01 500
    20181028_10:00:02 450
    20181028_10:00:03 660", header = TRUE, as.is = TRUE)
 
    mydata <- mutate(mydata,
                     time = ymd_hms(time)
    )
 
    ggplot(mydata, aes(time, value)) +
      geom_point() +
      scale_x_datetime(date_labels = "%m/%d %H:%M:%S"
      ) +
      theme(axis.text.x = element_text(angle = 25, vjust = 1.0, hjust = 1.0))
 
Jim Holtman
Data Munger Guru
 
What is the problem that you are trying to solve?
Tell me what you want to do, not how you want to do it.
 
Jim Holtman
Data Munger Guru
 
What is the problem that you are trying to solve?
Tell me what you want to do, not how you want to do it.
 
 
On Sun, Oct 28, 2018 at 11:23 AM snowball0916 <snowball0916 at 163.com> wrote:
>
> Hi, guys
> How do you guys deal with the date and time data on x axis?
> I have some trouble with it. Could you help with this?
>
> =============
> Sample Data
> =============
> The sample data look like this:
>
> 20181028_10:00:00 600
> 20181028_10:00:01 500
> 20181028_10:00:02 450
> 20181028_10:00:03 660
> ......
>
> =============
> My Code
> =============
>
> library(lubridate)
> mydata <- read.table("e:/R_study/graph_test2.txt")
> xdata <- ymd_hms(mydata$V1)
> ydata <- mydata$V2
> plot(xdata, ydata, type="o")
>
>
> =============
> Questions:
> =============
>
> 1. Why my x axis does not show me the correct date time like ""2018-10-28 10:00:00 UTC" ?
> 2. If my data is very huge(like data in every second and the data has the whole day , even the whole month), how can I display the x axis in a neat and clean way?
>
> Thanks very much.
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From m@cqueen1 @end|ng |rom ||n|@gov  Mon Oct 29 17:01:12 2018
From: m@cqueen1 @end|ng |rom ||n|@gov (MacQueen, Don)
Date: Mon, 29 Oct 2018 16:01:12 +0000
Subject: [R] date and time data on x axis
In-Reply-To: <2018102823163020889853@163.com>
References: <2018102823163020889853@163.com>
Message-ID: <676F6E37-0980-4540-B5C1-8F25A7DB1E3C@llnl.gov>

Here's an example of 24 hours of data at one second intervals.

npts <- 24*60*60

df <- data.frame(
                 tm = seq( Sys.time(), by='1 sec', length=npts),
                 yd = round(runif(npts),2)
                 )

head(df)

with(df, plot(tm,yd))

The x axis appears to me to be displayed in a neat and clean way. I don't understand what the problem is.
(The data itself is illegible, but that's a different problem.)

The default axis may not be what you want, but it is neat and clean. To choose the axis tick marks and labels yourself, use axis() or axis.POSIXct, as Rui mentioned.  help(axis.POSIXct) provides examples of actual use.

I prefer to do as much as possible with base R, so look at this example:

> as.POSIXct( '20181028_10:00:00' , format='%Y%m%d_%H:%M:%S')
[1] "2018-10-28 10:00:00 PDT"

Therefore 
  xdata <- as.POSIXct(mydata$V1, format='%Y%m%d_%H:%M:%S')
is perfectly adequate (the lubridate package is not essential here)


par() is the function that sets graphical parameters. There are many graphical parameters.
"mar" is the parameter that specifies the sizes of the plot margins  ( see ?par )

This expression
   op <- par(mar = c(4, 0, 0, 0) + par("mar"))
is a way to modify the values of the "mar" parameter.

Type the following commands
   par('mar')
   par()$mar        ## an alternative
   c(4,0,0,0) + par('mar')
   par(mar = c(4, 0, 0, 0) + par("mar"))
   par('mar')        ## to see that the margins have been changed

--
Don MacQueen
Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062
Lab cell 925-724-7509
 
 

?On 10/28/18, 8:16 AM, "R-help on behalf of snowball0916" <r-help-bounces at r-project.org on behalf of snowball0916 at 163.com> wrote:

    Hi, guys
    How do you guys deal with the date and time data on x axis?
    I have some trouble with it. Could you help with this?
    
    =============
    Sample Data
    =============
    The sample data look like this:
    
    20181028_10:00:00 600 
    20181028_10:00:01 500 
    20181028_10:00:02 450 
    20181028_10:00:03 660
    ......
    
    =============
    My Code
    =============
    
    library(lubridate)
    mydata <- read.table("e:/R_study/graph_test2.txt")
    xdata <- ymd_hms(mydata$V1)
    ydata <- mydata$V2
    plot(xdata, ydata, type="o")
    
    
    =============
    Questions:
    =============
    
    1. Why my x axis does not show me the correct date time like ""2018-10-28 10:00:00 UTC" ?
    2. If my data is very huge(like data in every second and the data has the whole day , even the whole month), how can I display the x axis in a neat and clean way?
    
    Thanks very much.
     
    
    
    
    	[[alternative HTML version deleted]]
    
    ______________________________________________
    R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    https://stat.ethz.ch/mailman/listinfo/r-help
    PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    and provide commented, minimal, self-contained, reproducible code.
    


From m@cqueen1 @end|ng |rom ||n|@gov  Mon Oct 29 17:13:01 2018
From: m@cqueen1 @end|ng |rom ||n|@gov (MacQueen, Don)
Date: Mon, 29 Oct 2018 16:13:01 +0000
Subject: [R] "logical indexing,
 " [was] match() question or needle haystack problem for a data.frame
In-Reply-To: <3ae8b56c-b807-3491-9671-55b5e07c4230@krueger-family.de>
References: <cac83a2c-2edd-e0e9-8b54-96afd48d401d@krueger-family.de>
 <CAGxFJbQrCaH6jLzMU60dx-U7m3oNT-zt1FhUOmcaOb-8njrp2w@mail.gmail.com>
 <CAGgJW74Tebw5CNDGVSf32bF7cMwkM3z=qi++8-SUPFYOHynYGQ@mail.gmail.com>
 <6ebcd80a-1786-34bb-d852-d05bfa24c9bc@krueger-family.de>
 <CAGxFJbS7vgQQK8t-X_z==on+jzYtDMmroCv3hPM6HWyU0Uq7Jw@mail.gmail.com>
 <35998e7b-b02b-9993-5b61-fb20978a39f4@krueger-family.de>
 <410772ED-27FA-427D-BA16-83205608EDE2@gmail.com>
 <3ae8b56c-b807-3491-9671-55b5e07c4230@krueger-family.de>
Message-ID: <94B05554-53FA-468A-A38D-7D0F926F27DE@llnl.gov>

Wrong comparisons, I think.

The opposite of
  A & B
is 
  !(A & B)

There is no single operator that can replace the "&" in A & B that gives the "opposite"

-Don

--
Don MacQueen
Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062
Lab cell 925-724-7509
 
 

?On 10/25/18, 11:28 PM, "R-help on behalf of Knut Krueger" <r-help-bounces at r-project.org on behalf of rhelp at krueger-family.de> wrote:

    Am 25.10.18 um 16:13 schrieb peter dalgaard:
    > 
    >
    > Yes: x[!(x$A %in% y$B),]
    
    Ok thats in my opinion a little workaround
    why?:
    
    There is an
    = and !=
    < and >
    
    
    means the opposite is available between terms.
    
    why is there f.e no %!in%, %notin%  or !%in%
    
    This would be more intuitive.
    
    Kind regards Knut
    
    ______________________________________________
    R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    https://stat.ethz.ch/mailman/listinfo/r-help
    PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    and provide commented, minimal, self-contained, reproducible code.
    


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Mon Oct 29 17:38:27 2018
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Mon, 29 Oct 2018 16:38:27 +0000
Subject: [R] date and time data on x axis
In-Reply-To: <2018102922034545652561@163.com>
References: <2018102823163020889853@163.com>
 <793bce3a-a029-f235-96f6-64cc47891136@sapo.pt>
 <2018102922034545652561@163.com>
Message-ID: <2e9fa5b3-6b8c-5df5-83f7-034c2c856be8@sapo.pt>

Hello,

Inline.

?s 14:03 de 29/10/2018, snowball0916 escreveu:
> Hi, Rui
> Thanks for your code, even though I'm not fully understand it.
> And I am new to R, could you kindly help me with
> -1). what's the nested usage stand for?
> op <- par(mar = c(4, 0, 0, 0) + par("mar"))

See the help for ?par. You have

mar
A numerical vector of the form c(bottom, left, top, right) which gives 
the number of lines of margin to be specified on the four sides of the 
plot. The default is c(5, 4, 4, 2) + 0.1.


So par("mar") returns c(5.1, 4.1, 4.1, 2.1)
In order to see the x axis labels, that are longer than normal, I have 
added 4 to the bottom only, c(4, 0, 0, 0) + default_value.
And par() returns the previous values of the graphices parameters, so 
save them in op (old param) and restore the defaults when done plotting.

> 
> -2). how can I get the axis.POSIXct usage or help?
> I use help(axis)and help(POSIXct)and not found the actual use.

It's ?axis.POSIXct or help('axis.POSIXct'). You want the S3 method for 
objects of class "POSIXct".

Hope this helps,

Rui Barradas

> 
> Thanks very much.
> 
> 
> 
> 
> ------------------------------------------------------------------------
> 
>     *From:* Rui Barradas <mailto:ruipbarradas at sapo.pt>
>     *Date:*?2018-10-29?02:53
>     *To:* snowball0916 <mailto:snowball0916 at 163.com>; r-help
>     <mailto:r-help at r-project.org>
>     *Subject:*?Re: [R] date and time data on x axis
>     Hello,
>     Maybe you could get some inspiration in the following code.
>     op <- par(mar = c(4, 0, 0, 0) + par("mar"))
>     plot(xdata, ydata, type = "o", xaxt = "n")
>     axis.POSIXct(1, xdata, at = xdata, labels = xdata, las = 2)
>     par(op)
>     The important part is the call axis.POSIXct, argument las = 2 and the
>     call to par is to make sure that the labels are visible.
>     Hope this helps,
>     Rui Barradas
>     ?s 15:16 de 28/10/2018, snowball0916 escreveu:
>      > Hi, guys
>      > How do you guys deal with the date and time data on x axis?
>      > I have some trouble with it. Could you help with this?
>      >
>      > =============
>      > Sample Data
>      > =============
>      > The sample data look like this:
>      >
>      > 20181028_10:00:00 600
>      > 20181028_10:00:01 500
>      > 20181028_10:00:02 450
>      > 20181028_10:00:03 660
>      > ......
>      >
>      > =============
>      > My Code
>      > =============
>      >
>      > library(lubridate)
>      > mydata <- read.table("e:/R_study/graph_test2.txt")
>      > xdata <- ymd_hms(mydata$V1)
>      > ydata <- mydata$V2
>      > plot(xdata, ydata, type="o")
>      >
>      >
>      > =============
>      > Questions:
>      > =============
>      >
>      > 1. Why my x axis does not show me the correct date time like
>     ""2018-10-28 10:00:00 UTC" ?
>      > 2. If my data is very huge(like data in every second and the data
>     has the whole day , even the whole month), how can I display the x
>     axis in a neat and clean way?
>      >
>      > Thanks very much.
>      >
>      >
>      >
>      >
>      > [[alternative HTML version deleted]]
>      >
>      > ______________________________________________
>      > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>      > https://stat.ethz.ch/mailman/listinfo/r-help
>      > PLEASE do read the posting guide
>     http://www.R-project.org/posting-guide.html
>      > and provide commented, minimal, self-contained, reproducible code.
>      >
>



From m@cqueen1 @end|ng |rom ||n|@gov  Mon Oct 29 21:00:04 2018
From: m@cqueen1 @end|ng |rom ||n|@gov (MacQueen, Don)
Date: Mon, 29 Oct 2018 20:00:04 +0000
Subject: [R] Gamma Simulation from Exponential Distribution: find sample
 size given power and sig.Level
In-Reply-To: <CAM_JVUGuj2QZt0EUmi-jzDSL3mp5KpBn=U4JvNHwmc2tsic_Uw@mail.gmail.com>
References: <CAM_JVUGuj2QZt0EUmi-jzDSL3mp5KpBn=U4JvNHwmc2tsic_Uw@mail.gmail.com>
Message-ID: <538EF24C-2096-4E43-9108-E3DAE526633B@llnl.gov>

If this is homework, then r-help has a no homework policy. I'm assuming that if it is homework then the focus is on statistical concepts, not on R programming.

It looks like your gen_p_vals function should be defined as

    gen_p_vals <- function(reps = n)

instead of n = reps.

Why not just use the rgamma() function to simulate your gamma distributions?
Why not just use the t.test() function do calculate the t test?
But if you really want to calculate the t test manually, use the var() function in the denominator, instead of that x-mean(x) business.
It's unnecessary to use return().
Initializing Z.list outside the gamma.sim function does no good.
Are you using the variable "n" for different purposes in different places? If so, it's confusing.

Although it didn't appear to cause problems this time, sending html formatted email to r-help is generally not a good idea.

(and real names are preferred)

-Don

--
Don MacQueen
Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062
Lab cell 925-724-7509
 
 

?On 10/28/18, 1:26 PM, "R-help on behalf of Black Yellow" <r-help-bounces at r-project.org on behalf of blackish952 at gmail.com> wrote:

    I built my function to simulate two gamma distributions X and Y based on the
    sum of i.i.d exponential distributions. Assume my code is correct about this
    simulation, I am interested in finding an equal sample size n for X and Y
    such that n can be determined given 90% power and 5% significance level.
    
    My thought process is that I create a sequence of n's value and use a for
    loop to reiterate each n value in the sequence along with an "if" statement
    saying that if given the n value, 95% of the time when I replicate the
    process, the probability that I reject the null hypothesis given the
    alternative is true is 90%.
    
    The problem I am facing is that n value is always the maximum within my
    n_seq. I am doubting there must be something wrong when I generate my two
    Gamma distributions.
    
    Any input is appreciated.
    
        set.seed(3701)
        n_seq = seq(from = 1, to = 200, by = 1)
        Z.list = numeric(reps)
        var.list = numeric(reps)
    
        gamma.sim = function(n, mu){
          for(j in 1:5e5){
              u.list = runif(n = n)
              x.list = -mu*log(1-u.list)
              Z.list[j] = sum(x.list)
          }
          return(Z.list)
        }
    
    
        # Generate n generations for X.gamma and Y.gamma
        gen_p_vals <- function(n = reps){
          p_vec <- numeric(reps)
          for(ii in 1:reps){
            x <- gamma.sim(n = 79, mu = 1)
            y <- gamma.sim(n = 80, mu = 1)
            t_stat_numerator <- mean(x) - mean(y) - 0 # Test Statistic under
    null hypothesis
            s_p <- sqrt(sum((x-mean(x))^2) + sum((y-mean(y))^2)) /
    (sqrt(2*reps-2))
            t_stat <- t_stat_numerator /(s_p*(sqrt((1/reps)+(1/reps))))
            p_vec[ii] <- 2* pt(-abs(t_stat), 2*reps-2)
          }
          return(p_vec)
        }
        power_pvals <- gen_p_vals(n = 10)
        mean(power_pvals < 0.05)
    
        for(j in 2:100){
          power_pvals = gen_p_vals(n = n_seq[j])
          if (mean(power_pvals < 0.05) == 0.90){
            print(j)
          }
        }
    
    	[[alternative HTML version deleted]]
    
    ______________________________________________
    R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    https://stat.ethz.ch/mailman/listinfo/r-help
    PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    and provide commented, minimal, self-contained, reproducible code.
    


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Mon Oct 29 21:46:32 2018
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Mon, 29 Oct 2018 20:46:32 +0000 (UTC)
Subject: [R] MSE Cross-validation with factor interactions terms MARS
 regression
References: <96346275.28234122.1540845992354.ref@mail.yahoo.com>
Message-ID: <96346275.28234122.1540845992354@mail.yahoo.com>


Dear R-experts,
I am having trouble while doing crossvalidation with a MARS regression including an interaction term between a factor variable (education) and 1 continuous variable (age). How could I solve my problem ?

Here below my reproducible example.

#######

install.packages("ISLR")

library(ISLR)

install.packages("earth")

library(earth)

a<-as.factor(Wage$education)

# Create a list to store the results

lst<-list()

# This statement does the repetitions (looping)

for(i in 1?:200) {

n=dim(Wage)[1]

p=0.667

sam=sample(1?:n,floor(p*n),replace=FALSE)

Training =Wage [sam,]

Testing = Wage [-sam,]

mars5<-earth(wage~age+education+year+age*a, data=Wage)

ypred=predict(mars5,newdata=Testing)

y=Testing$wage

y=Wage[-sam,]$wage

MSE = mean(y-ypred)^2

MSE

lst[i]<-MSE

}

mean(unlist(lst))

summary(mars5)

#######



From bgunter@4567 @end|ng |rom gm@||@com  Mon Oct 29 22:07:11 2018
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 29 Oct 2018 14:07:11 -0700
Subject: [R] MSE Cross-validation with factor interactions terms MARS
 regression
In-Reply-To: <96346275.28234122.1540845992354@mail.yahoo.com>
References: <96346275.28234122.1540845992354.ref@mail.yahoo.com>
 <96346275.28234122.1540845992354@mail.yahoo.com>
Message-ID: <CAGxFJbQ6wKnSFOopdS=8yyL_fvwi4eTY_sOuqz=KPAn7HRMffg@mail.gmail.com>

I did no analysis of your code or thought process, but noticed that you had
the following two successive lines in your code:


y=Testing$wage

y=Wage[-sam,]$wage

This obviously makes no sense, so maybe you should fix this first and then
proceed.

-- Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Oct 29, 2018 at 1:46 PM varin sacha via R-help <r-help at r-project.org>
wrote:

>
> Dear R-experts,
> I am having trouble while doing crossvalidation with a MARS regression
> including an interaction term between a factor variable (education) and 1
> continuous variable (age). How could I solve my problem ?
>
> Here below my reproducible example.
>
> #######
>
> install.packages("ISLR")
>
> library(ISLR)
>
> install.packages("earth")
>
> library(earth)
>
> a<-as.factor(Wage$education)
>
> # Create a list to store the results
>
> lst<-list()
>
> # This statement does the repetitions (looping)
>
> for(i in 1 :200) {
>
> n=dim(Wage)[1]
>
> p=0.667
>
> sam=sample(1 :n,floor(p*n),replace=FALSE)
>
> Training =Wage [sam,]
>
> Testing = Wage [-sam,]
>
> mars5<-earth(wage~age+education+year+age*a, data=Wage)
>
> ypred=predict(mars5,newdata=Testing)
>
> y=Testing$wage
>
> y=Wage[-sam,]$wage
>
> MSE = mean(y-ypred)^2
>
> MSE
>
> lst[i]<-MSE
>
> }
>
> mean(unlist(lst))
>
> summary(mars5)
>
> #######
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Mon Oct 29 23:50:15 2018
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Mon, 29 Oct 2018 22:50:15 +0000 (UTC)
Subject: [R] MSE Cross-validation with factor interactions terms MARS
 regression
In-Reply-To: <CAGxFJbQ6wKnSFOopdS=8yyL_fvwi4eTY_sOuqz=KPAn7HRMffg@mail.gmail.com>
References: <96346275.28234122.1540845992354.ref@mail.yahoo.com>
 <96346275.28234122.1540845992354@mail.yahoo.com>
 <CAGxFJbQ6wKnSFOopdS=8yyL_fvwi4eTY_sOuqz=KPAn7HRMffg@mail.gmail.com>
Message-ID: <2140295663.8388898.1540853415169@mail.yahoo.com>

Hi Bert,

Many thanks, I have fixed it but it still don't work... . 
Best,






Le lundi 29 octobre 2018 ? 22:07:26 UTC+1, Bert Gunter <bgunter.4567 at gmail.com> a ?crit : 





I did no analysis of your code or thought process, but noticed that you had the following two successive lines in your code:


y=Testing$wage

y=Wage[-sam,]$wage

This obviously makes no sense, so maybe you should fix this first and then proceed.

-- Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Oct 29, 2018 at 1:46 PM varin sacha via R-help <r-help at r-project.org> wrote:
> 
> Dear R-experts,
> I am having trouble while doing crossvalidation with a MARS regression including an interaction term between a factor variable (education) and 1 continuous variable (age). How could I solve my problem ?
> 
> Here below my reproducible example.
> 
> #######
> 
> install.packages("ISLR")
> 
> library(ISLR)
> 
> install.packages("earth")
> 
> library(earth)
> 
> a<-as.factor(Wage$education)
> 
> # Create a list to store the results
> 
> lst<-list()
> 
> # This statement does the repetitions (looping)
> 
> for(i in 1?:200) {
> 
> n=dim(Wage)[1]
> 
> p=0.667
> 
> sam=sample(1?:n,floor(p*n),replace=FALSE)
> 
> Training =Wage [sam,]
> 
> Testing = Wage [-sam,]
> 
> mars5<-earth(wage~age+education+year+age*a, data=Wage)
> 
> ypred=predict(mars5,newdata=Testing)
> 
> y=Testing$wage
> 
> y=Wage[-sam,]$wage
> 
> MSE = mean(y-ypred)^2
> 
> MSE
> 
> lst[i]<-MSE
> 
> }
> 
> mean(unlist(lst))
> 
> summary(mars5)
> 
> #######
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 



From pd@|gd @end|ng |rom gm@||@com  Tue Oct 30 00:30:06 2018
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Tue, 30 Oct 2018 00:30:06 +0100
Subject: [R] MSE Cross-validation with factor interactions terms MARS
 regression
In-Reply-To: <2140295663.8388898.1540853415169@mail.yahoo.com>
References: <96346275.28234122.1540845992354.ref@mail.yahoo.com>
 <96346275.28234122.1540845992354@mail.yahoo.com>
 <CAGxFJbQ6wKnSFOopdS=8yyL_fvwi4eTY_sOuqz=KPAn7HRMffg@mail.gmail.com>
 <2140295663.8388898.1540853415169@mail.yahoo.com>
Message-ID: <D4C000F2-239D-4066-96FE-37358C1EBE27@gmail.com>

The two lines did the same thing, so little wonder...

More likely, the culprit is that a is assigned in the global environment, and then used in a prediction on a subset.

Also, 

- you are defining Training, but as far as I can tell, you're not using it. Not likely to be an issue in itself, but wouldn't you want to fit on the Training set and evaluate on the Testing? 

- your model de facto contains both education as a numeric predictor and as.factor(education) as well as the interaction term age:as.factor(education). Does that make sense modelling-wise??

-pd

> On 29 Oct 2018, at 23:50 , varin sacha via R-help <r-help at r-project.org> wrote:
> 
> Hi Bert,
> 
> Many thanks, I have fixed it but it still don't work... . 
> Best,
> 
> 
> 
> 
> 
> 
> Le lundi 29 octobre 2018 ? 22:07:26 UTC+1, Bert Gunter <bgunter.4567 at gmail.com> a ?crit : 
> 
> 
> 
> 
> 
> I did no analysis of your code or thought process, but noticed that you had the following two successive lines in your code:
> 
> 
> y=Testing$wage
> 
> y=Wage[-sam,]$wage
> 
> This obviously makes no sense, so maybe you should fix this first and then proceed.
> 
> -- Bert
> 
> 
> Bert Gunter
> 
> "The trouble with having an open mind is that people keep coming along and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> 
> 
> On Mon, Oct 29, 2018 at 1:46 PM varin sacha via R-help <r-help at r-project.org> wrote:
>> 
>> Dear R-experts,
>> I am having trouble while doing crossvalidation with a MARS regression including an interaction term between a factor variable (education) and 1 continuous variable (age). How could I solve my problem ?
>> 
>> Here below my reproducible example.
>> 
>> #######
>> 
>> install.packages("ISLR")
>> 
>> library(ISLR)
>> 
>> install.packages("earth")
>> 
>> library(earth)
>> 
>> a<-as.factor(Wage$education)
>> 
>> # Create a list to store the results
>> 
>> lst<-list()
>> 
>> # This statement does the repetitions (looping)
>> 
>> for(i in 1 :200) {
>> 
>> n=dim(Wage)[1]
>> 
>> p=0.667
>> 
>> sam=sample(1 :n,floor(p*n),replace=FALSE)
>> 
>> Training =Wage [sam,]
>> 
>> Testing = Wage [-sam,]
>> 
>> mars5<-earth(wage~age+education+year+age*a, data=Wage)
>> 
>> ypred=predict(mars5,newdata=Testing)
>> 
>> y=Testing$wage
>> 
>> y=Wage[-sam,]$wage
>> 
>> MSE = mean(y-ypred)^2
>> 
>> MSE
>> 
>> lst[i]<-MSE
>> 
>> }
>> 
>> mean(unlist(lst))
>> 
>> summary(mars5)
>> 
>> #######
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com



From m@rc_grt @end|ng |rom y@hoo@|r  Tue Oct 30 16:06:13 2018
From: m@rc_grt @end|ng |rom y@hoo@|r (Marc Girondot)
Date: Tue, 30 Oct 2018 16:06:13 +0100
Subject: [R] Should package be reinstalled when exterbal library is changed
Message-ID: <cc48043b-b29c-b8d4-99d2-fc400ee99581@yahoo.fr>

Dear R-experts,

Some packages need external libraries to be installed. For example ncdf4 
needs netcdf library or flextable need pandoc.

When there is new version of external library, should the R package be 
installed again to use the new external version, or do the package finds 
itself the new version? Perhaps the answer is "It depends on the 
package", and so how to know if it requires new compilation or not ?

Thanks

Marc



From er|cjberger @end|ng |rom gm@||@com  Tue Oct 30 19:17:02 2018
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Tue, 30 Oct 2018 20:17:02 +0200
Subject: [R] 
 Should package be reinstalled when exterbal library is changed
In-Reply-To: <cc48043b-b29c-b8d4-99d2-fc400ee99581@yahoo.fr>
References: <cc48043b-b29c-b8d4-99d2-fc400ee99581@yahoo.fr>
Message-ID: <CAGgJW77hFbV5Cd09zLrRqbiSt01wXD=6FOarT1qBpYuJ-360pw@mail.gmail.com>

Hi Marc,
Normally updating external libraries would not require re-installing an R
package that uses it.
The R package will be able to "find" the new one, because the updated
library would be in the same place (sort of) as the previous library.
On a linux system this is handled by system soft links such as foo.so -->
foo.so.1 changes to foo.so --> foo.so.2
when a version '2' of the foo shared object (the .so.2) is now available to
replace version 1.
On Windows systems a .DLL corresponds to the linux .so.

While you won't need to re-install an R package you will need to start a
new R session.

At a more advanced level you actually can explicitly tell R which .so (or
.dll) files to pull in via the function dyn.load()
See ?dyn.load for details.

HTH,
Eric





On Tue, Oct 30, 2018 at 5:06 PM Marc Girondot via R-help <
r-help at r-project.org> wrote:

> Dear R-experts,
>
> Some packages need external libraries to be installed. For example ncdf4
> needs netcdf library or flextable need pandoc.
>
> When there is new version of external library, should the R package be
> installed again to use the new external version, or do the package finds
> itself the new version? Perhaps the answer is "It depends on the
> package", and so how to know if it requires new compilation or not ?
>
> Thanks
>
> Marc
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From @nowb@||0916 @end|ng |rom 163@com  Tue Oct 30 19:25:00 2018
From: @nowb@||0916 @end|ng |rom 163@com (snowball0916)
Date: Wed, 31 Oct 2018 02:25:00 +0800
Subject: [R] date and time data on x axis
References: <2018102823163020889853@163.com>, 
 <793bce3a-a029-f235-96f6-64cc47891136@sapo.pt>, 
 <2018102922034545652561@163.com>, 
 <2e9fa5b3-6b8c-5df5-83f7-034c2c856be8@sapo.pt>
Message-ID: <20181031022454974691124@163.com>

Hi, Rui
Thank you . I will try later.
Thanks again.

 
 


 
From: Rui Barradas
Date: 2018-10-30 00:38
To: snowball0916; r-help
Subject: Re: [R] date and time data on x axis
Hello,
 
Inline.
 
?s 14:03 de 29/10/2018, snowball0916 escreveu:
> Hi, Rui
> Thanks for your code, even though I'm not fully understand it.
> And I am new to R, could you kindly help me with
> -1). what's the nested usage stand for?
> op <- par(mar = c(4, 0, 0, 0) + par("mar"))
 
See the help for ?par. You have
 
mar
A numerical vector of the form c(bottom, left, top, right) which gives 
the number of lines of margin to be specified on the four sides of the 
plot. The default is c(5, 4, 4, 2) + 0.1.
 
 
So par("mar") returns c(5.1, 4.1, 4.1, 2.1)
In order to see the x axis labels, that are longer than normal, I have 
added 4 to the bottom only, c(4, 0, 0, 0) + default_value.
And par() returns the previous values of the graphices parameters, so 
save them in op (old param) and restore the defaults when done plotting.
 
> 
> -2). how can I get the axis.POSIXct usage or help?
> I use help(axis)and help(POSIXct)and not found the actual use.
 
It's ?axis.POSIXct or help('axis.POSIXct'). You want the S3 method for 
objects of class "POSIXct".
 
Hope this helps,
 
Rui Barradas
 
> 
> Thanks very much.
> 
> 
> 
> 
> ------------------------------------------------------------------------
> 
>     *From:* Rui Barradas <mailto:ruipbarradas at sapo.pt>
>     *Date:* 2018-10-29 02:53
>     *To:* snowball0916 <mailto:snowball0916 at 163.com>; r-help
>     <mailto:r-help at r-project.org>
>     *Subject:* Re: [R] date and time data on x axis
>     Hello,
>     Maybe you could get some inspiration in the following code.
>     op <- par(mar = c(4, 0, 0, 0) + par("mar"))
>     plot(xdata, ydata, type = "o", xaxt = "n")
>     axis.POSIXct(1, xdata, at = xdata, labels = xdata, las = 2)
>     par(op)
>     The important part is the call axis.POSIXct, argument las = 2 and the
>     call to par is to make sure that the labels are visible.
>     Hope this helps,
>     Rui Barradas
>     ?s 15:16 de 28/10/2018, snowball0916 escreveu:
>      > Hi, guys
>      > How do you guys deal with the date and time data on x axis?
>      > I have some trouble with it. Could you help with this?
>      >
>      > =============
>      > Sample Data
>      > =============
>      > The sample data look like this:
>      >
>      > 20181028_10:00:00 600
>      > 20181028_10:00:01 500
>      > 20181028_10:00:02 450
>      > 20181028_10:00:03 660
>      > ......
>      >
>      > =============
>      > My Code
>      > =============
>      >
>      > library(lubridate)
>      > mydata <- read.table("e:/R_study/graph_test2.txt")
>      > xdata <- ymd_hms(mydata$V1)
>      > ydata <- mydata$V2
>      > plot(xdata, ydata, type="o")
>      >
>      >
>      > =============
>      > Questions:
>      > =============
>      >
>      > 1. Why my x axis does not show me the correct date time like
>     ""2018-10-28 10:00:00 UTC" ?
>      > 2. If my data is very huge(like data in every second and the data
>     has the whole day , even the whole month), how can I display the x
>     axis in a neat and clean way?
>      >
>      > Thanks very much.
>      >
>      >
>      >
>      >
>      > [[alternative HTML version deleted]]
>      >
>      > ______________________________________________
>      > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>      > https://stat.ethz.ch/mailman/listinfo/r-help
>      > PLEASE do read the posting guide
>     http://www.R-project.org/posting-guide.html
>      > and provide commented, minimal, self-contained, reproducible code.
>      >
> 

	[[alternative HTML version deleted]]


From @nowb@||0916 @end|ng |rom 163@com  Tue Oct 30 19:25:50 2018
From: @nowb@||0916 @end|ng |rom 163@com (snowball0916)
Date: Wed, 31 Oct 2018 02:25:50 +0800
Subject: [R] date and time data on x axis
References: <2018102823163020889853@163.com>, 
 <676F6E37-0980-4540-B5C1-8F25A7DB1E3C@llnl.gov>
Message-ID: <20181031022549805854125@163.com>

Hi, Don
I got it, I will try and study .
Thanks very much. 
 


 
From: MacQueen, Don
Date: 2018-10-30 00:01
To: snowball0916; r-help
Subject: Re: [R] date and time data on x axis
Here's an example of 24 hours of data at one second intervals.
 
npts <- 24*60*60
 
df <- data.frame(
                 tm = seq( Sys.time(), by='1 sec', length=npts),
                 yd = round(runif(npts),2)
                 )
 
head(df)
 
with(df, plot(tm,yd))
 
The x axis appears to me to be displayed in a neat and clean way. I don't understand what the problem is.
(The data itself is illegible, but that's a different problem.)
 
The default axis may not be what you want, but it is neat and clean. To choose the axis tick marks and labels yourself, use axis() or axis.POSIXct, as Rui mentioned.  help(axis.POSIXct) provides examples of actual use.
 
I prefer to do as much as possible with base R, so look at this example:
 
> as.POSIXct( '20181028_10:00:00' , format='%Y%m%d_%H:%M:%S')
[1] "2018-10-28 10:00:00 PDT"
 
Therefore 
  xdata <- as.POSIXct(mydata$V1, format='%Y%m%d_%H:%M:%S')
is perfectly adequate (the lubridate package is not essential here)
 
 
par() is the function that sets graphical parameters. There are many graphical parameters.
"mar" is the parameter that specifies the sizes of the plot margins  ( see ?par )
 
This expression
   op <- par(mar = c(4, 0, 0, 0) + par("mar"))
is a way to modify the values of the "mar" parameter.
 
Type the following commands
   par('mar')
   par()$mar        ## an alternative
   c(4,0,0,0) + par('mar')
   par(mar = c(4, 0, 0, 0) + par("mar"))
   par('mar')        ## to see that the margins have been changed
 
--
Don MacQueen
Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062
Lab cell 925-724-7509
 
?On 10/28/18, 8:16 AM, "R-help on behalf of snowball0916" <r-help-bounces at r-project.org on behalf of snowball0916 at 163.com> wrote:
 
    Hi, guys
    How do you guys deal with the date and time data on x axis?
    I have some trouble with it. Could you help with this?
    
    =============
    Sample Data
    =============
    The sample data look like this:
    
    20181028_10:00:00 600 
    20181028_10:00:01 500 
    20181028_10:00:02 450 
    20181028_10:00:03 660
    ......
    
    =============
    My Code
    =============
    
    library(lubridate)
    mydata <- read.table("e:/R_study/graph_test2.txt")
    xdata <- ymd_hms(mydata$V1)
    ydata <- mydata$V2
    plot(xdata, ydata, type="o")
    
    
    =============
    Questions:
    =============
    
    1. Why my x axis does not show me the correct date time like ""2018-10-28 10:00:00 UTC" ?
    2. If my data is very huge(like data in every second and the data has the whole day , even the whole month), how can I display the x axis in a neat and clean way?
    
    Thanks very much.
     
    
    
    
    [[alternative HTML version deleted]]
    
    ______________________________________________
    R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    https://stat.ethz.ch/mailman/listinfo/r-help
    PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    and provide commented, minimal, self-contained, reproducible code.
    
 

	[[alternative HTML version deleted]]


From john@bu||ock @end|ng |rom northwe@tern@edu  Tue Oct 30 19:34:25 2018
From: john@bu||ock @end|ng |rom northwe@tern@edu (John G. Bullock)
Date: Tue, 30 Oct 2018 13:34:25 -0500
Subject: [R] grid.grab(): strange behavior of "wrap" argument when working
 with lattice output
Message-ID: <2365dfd1-5222-bad1-43e9-ea740d4a0b26@northwestern.edu>


grid.grab() captures all of the current viewports and stores them as a 
grob. In theory, and often in practice, you can use grid.grab() to store 
an image now for drawing later on. But I have noticed some odd behavior 
of grid.grab() when working with lattice output. It is all related to 
the wrap argument:

1. When wrap = TRUE, the saved grob should produce a drawing faithful to 
the original viewports. But sometimes it doesn't.
 ??? 2. wrap = FALSE is supposed to produce less faithful output if it 
differs at all, but sometimes its output is more faithful.
 ??? 3. Even when using wrap = TRUE, grid.grab() warns me to use wrap = 
TRUE.

Here is a minimal example to illustrate all of these behaviors:

library(grid)
 ??? library(lattice)
 ??? xyplot(1:5 ~ 1:5)
trellis.focus()
 ??? panel.abline(h = 3)
 ??? panel.abline(h = 5)
myGrob <- grid.grab(wrap = TRUE)

At this point, I receive a warning --

 ?? ?? In grabDL(warn, wrap, ...) :
 ? ? ? ? one of more grobs overwritten (grab WILL not be faithful; try 
'wrap = TRUE')

-- which is strange, given that I specified wrap = TRUE.

I proceed by running grid.draw(myGrob). According to Paul Murrell (R 
Graphics, 2nd ed., page 239), using grid.grab(wrap = TRUE) is 
"guaranteed to replicate the original output." But it doesn't. 
Specifically, the top horizontal line (from panel.abline(h = 5)) isn't 
reproduced.

Matters get stranger when I consider the following code:

 ??? xyplot(1:5 ~ 1:5)
 ??? trellis.focus()
 ??? panel.abline(h = 3)
panel.abline(h = 5)
 ??? myGrob <- grid.grab(wrap = FALSE)
grid.draw(myGrob)

These commands are the same as in the previous example, except that this 
time, wrap = FALSE. But this time, grid.draw() does faithfully reproduce 
the captured viewports. So the behavior is the opposite of what I 
expect: when wrap = FALSE, grid.draw() faithfully reproduces the 
captured viewports, but when wrap = TRUE, it doesn't.

I've run these examples in R 3.3.2 and 3.5.1. (Session info from 3.3.2 
is appended.) The result is the same in both cases. Are these bugs, or 
am I overlooking something?

Thank you,
John Bullock


 > sessionInfo()
R version 3.3.2 (2016-10-31)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 17134)

locale:
[1] LC_COLLATE=English_United States.1252 LC_CTYPE=English_United 
States.1252??? LC_MONETARY=English_United States.1252 LC_NUMERIC=C
[5] LC_TIME=English_United States.1252

attached base packages:
[1] grid????? stats???? graphics? grDevices utils???? datasets methods base

other attached packages:
[1] lattice_0.20-34 RevoUtilsMath_10.0.0

loaded via a namespace (and not attached):
[1] RevoUtils_10.0.2




	[[alternative HTML version deleted]]



From @eb@@t|en@b|hore| @end|ng |rom cogn|gencorp@com  Tue Oct 30 20:56:42 2018
From: @eb@@t|en@b|hore| @end|ng |rom cogn|gencorp@com (Sebastien Bihorel)
Date: Tue, 30 Oct 2018 15:56:42 -0400 (EDT)
Subject: [R] Question about function scope
Message-ID: <1171707593.1413980.1540929402577.JavaMail.zimbra@cognigencorp.com>

Hi,

>From the R user manual, I have a basic understanding of the scope of function evaluation but have a harder time understanding how to mess with environments.

My problem can be summarized by the code shown at the bottom:
- the foo function performs some steps including the assignment of default values to 3 objects: x, y, z
- at some point, I would like to call either the bar1 or bar2 function based upon the value of the c argument of the foo function. These functions assign different values to the x, y, z variables.
- then foo should move on and do other cool stuff

Based upon default R scoping, the x, y, and z variables inside the bar1 and bar2 functions are not in the same environment as the x, y, and z variables created inside the foo function.

Can I modify the scope of evaluation of bar1 and bar2 so that x, y, and z created inside the foo function are modified?

PS: 
- I know about "<<-" but, in my real code (which I cannot share, sorry), foo is already called within other functions and x, y, and z variables do not exist in the top-level environment and are not returned by foo. So "<<-" does not work (per manual: " Only when <<- has been used in a function that was returned as the value of another function will the special behavior described here occur. ")
- In my real example, I have a few dozens of variables to transform in bar1 and bar2 so exporting a list bundling all the transform values then dispatching them in foo does not seem practical
- currently, my best solution is to save the inner part of bar1 and bar2 in separate scripts and sourcing them in foo (that does not seem elegant...)
- also, I know that, theoretically, I could put the content of bar1 and bar2 directly in foo, but as the number of cases handled by foo grows, the code will become way too long and hardly manageable.

Thanks for your help


######################################

bar1 <- function(){
  x <- 1
  y <- 1
  z <- 1
  cat(sprintf('bar1: x=%d, y=%d, z=%d\n', x, y, z))
}

bar2 <- function(){
  x <- 2
  y <- 2
  z <- 2
  cat(sprintf('bar2: x=%d, y=%d, z=%d\n', x, y, z))
}

foo <- function(a=1, b=2, c=0){

  # some setup code
  dummy <- a + b
  x <- y <- z <- 0

  # here is my scope problem
  if (c==1) bar1()
  if (c==2) bar2()

  # some more code
  cat(sprintf('foo: x=%d, y=%d, z=%d\n', x, y, z))
  
}

foo(c=0)
foo(c=1)
foo(c=2)



From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Oct 30 21:13:05 2018
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 30 Oct 2018 16:13:05 -0400
Subject: [R] Question about function scope
In-Reply-To: <1171707593.1413980.1540929402577.JavaMail.zimbra@cognigencorp.com>
References: <1171707593.1413980.1540929402577.JavaMail.zimbra@cognigencorp.com>
Message-ID: <6ae82453-0895-6385-a46b-88881b554b97@gmail.com>

On 30/10/2018 3:56 PM, Sebastien Bihorel wrote:
> Hi,
> 
>  From the R user manual, I have a basic understanding of the scope of function evaluation but have a harder time understanding how to mess with environments.
> 
> My problem can be summarized by the code shown at the bottom:
> - the foo function performs some steps including the assignment of default values to 3 objects: x, y, z
> - at some point, I would like to call either the bar1 or bar2 function based upon the value of the c argument of the foo function. These functions assign different values to the x, y, z variables.
> - then foo should move on and do other cool stuff
> 
> Based upon default R scoping, the x, y, and z variables inside the bar1 and bar2 functions are not in the same environment as the x, y, and z variables created inside the foo function.
> 
> Can I modify the scope of evaluation of bar1 and bar2 so that x, y, and z created inside the foo function are modified?
> 
> PS:
> - I know about "<<-" but, in my real code (which I cannot share, sorry), foo is already called within other functions and x, y, and z variables do not exist in the top-level environment and are not returned by foo. So "<<-" does not work (per manual: " Only when <<- has been used in a function that was returned as the value of another function will the special behavior described here occur. ")

I haven't looked up that quote, but it is likely describing a situation 
that isn't relevant to you.  For you, the important part is that bar1 
and bar2 must be created within foo.  They don't need to be returned 
from it.

So my edit below of your code should do what you want.

foo <- function(a=1, b=2, c=0){

   bar1 <- function(){
     x <<- 1
     y <<- 1
     z <<- 1
     cat(sprintf('bar1: x=%d, y=%d, z=%d\n', x, y, z))
   }

   bar2 <- function(){
     x <<- 2
     y <<- 2
     z <<- 2
     cat(sprintf('bar2: x=%d, y=%d, z=%d\n', x, y, z))
   }

   # some setup code
   dummy <- a + b
   x <- y <- z <- 0

   # here is my scope problem
   if (c==1) bar1()
   if (c==2) bar2()

   # some more code
   cat(sprintf('foo: x=%d, y=%d, z=%d\n', x, y, z))

}

foo(c=0)
foo(c=1)
foo(c=2)

I get this output:

 > foo(c=0)
foo: x=0, y=0, z=0
 > foo(c=1)
bar1: x=1, y=1, z=1
foo: x=1, y=1, z=1
 > foo(c=2)
bar2: x=2, y=2, z=2
foo: x=2, y=2, z=2

Duncan Murdoch



From er|cjberger @end|ng |rom gm@||@com  Tue Oct 30 21:17:30 2018
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Tue, 30 Oct 2018 22:17:30 +0200
Subject: [R] Question about function scope
In-Reply-To: <6ae82453-0895-6385-a46b-88881b554b97@gmail.com>
References: <1171707593.1413980.1540929402577.JavaMail.zimbra@cognigencorp.com>
 <6ae82453-0895-6385-a46b-88881b554b97@gmail.com>
Message-ID: <CAGgJW75DHZtLGwW-zF33j9yHM5-A5whZp=6LRA70jCrQAmwXYw@mail.gmail.com>

Hi Sebastien,
I like Duncan's response. An alternative approach is to pass around
environments, as in the following:

bar1 <- function(e) {
  e$x <- e$y <- e$z <- 1
  cat(sprintf('bar1: x=%d, y=%d, z=%d\n', e$x, e$y, e$z))
}
bar2 <- function(e) {
  e$x <- e$y <- e$z <- 2
  cat(sprintf('bar2: x=%d, y=%d, z=%d\n', e$x, e$y, e$z))
}

foo <- function(a=1, b=2, c=0, e){
    # some setup code
  dummy <- a + b
  e$x <- e$y <- e$z <- 0

  # here is my scope problem
  if (c==1) bar1(e)
  if (c==2) bar2(e)

  # some more code
  cat(sprintf('foo: x=%d, y=%d, z=%d\n', e$x, e$y, e$z))
}

e <- new.env()
e$x <- NA
e$y <- NA
e$z <- NA

foo(c=0,e=e)
foo(c=1,e=e)
foo(c=2,e=e)


HTH,
Eric

On Tue, Oct 30, 2018 at 10:13 PM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 30/10/2018 3:56 PM, Sebastien Bihorel wrote:
> > Hi,
> >
> >  From the R user manual, I have a basic understanding of the scope of
> function evaluation but have a harder time understanding how to mess with
> environments.
> >
> > My problem can be summarized by the code shown at the bottom:
> > - the foo function performs some steps including the assignment of
> default values to 3 objects: x, y, z
> > - at some point, I would like to call either the bar1 or bar2 function
> based upon the value of the c argument of the foo function. These functions
> assign different values to the x, y, z variables.
> > - then foo should move on and do other cool stuff
> >
> > Based upon default R scoping, the x, y, and z variables inside the bar1
> and bar2 functions are not in the same environment as the x, y, and z
> variables created inside the foo function.
> >
> > Can I modify the scope of evaluation of bar1 and bar2 so that x, y, and
> z created inside the foo function are modified?
> >
> > PS:
> > - I know about "<<-" but, in my real code (which I cannot share, sorry),
> foo is already called within other functions and x, y, and z variables do
> not exist in the top-level environment and are not returned by foo. So
> "<<-" does not work (per manual: " Only when <<- has been used in a
> function that was returned as the value of another function will the
> special behavior described here occur. ")
>
> I haven't looked up that quote, but it is likely describing a situation
> that isn't relevant to you.  For you, the important part is that bar1
> and bar2 must be created within foo.  They don't need to be returned
> from it.
>
> So my edit below of your code should do what you want.
>
> foo <- function(a=1, b=2, c=0){
>
>    bar1 <- function(){
>      x <<- 1
>      y <<- 1
>      z <<- 1
>      cat(sprintf('bar1: x=%d, y=%d, z=%d\n', x, y, z))
>    }
>
>    bar2 <- function(){
>      x <<- 2
>      y <<- 2
>      z <<- 2
>      cat(sprintf('bar2: x=%d, y=%d, z=%d\n', x, y, z))
>    }
>
>    # some setup code
>    dummy <- a + b
>    x <- y <- z <- 0
>
>    # here is my scope problem
>    if (c==1) bar1()
>    if (c==2) bar2()
>
>    # some more code
>    cat(sprintf('foo: x=%d, y=%d, z=%d\n', x, y, z))
>
> }
>
> foo(c=0)
> foo(c=1)
> foo(c=2)
>
> I get this output:
>
>  > foo(c=0)
> foo: x=0, y=0, z=0
>  > foo(c=1)
> bar1: x=1, y=1, z=1
> foo: x=1, y=1, z=1
>  > foo(c=2)
> bar2: x=2, y=2, z=2
> foo: x=2, y=2, z=2
>
> Duncan Murdoch
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From @eb@@t|en@b|hore| @end|ng |rom cogn|gencorp@com  Tue Oct 30 21:18:33 2018
From: @eb@@t|en@b|hore| @end|ng |rom cogn|gencorp@com (Sebastien Bihorel)
Date: Tue, 30 Oct 2018 16:18:33 -0400 (EDT)
Subject: [R] Question about function scope
In-Reply-To: <6ae82453-0895-6385-a46b-88881b554b97@gmail.com>
References: <1171707593.1413980.1540929402577.JavaMail.zimbra@cognigencorp.com>
 <6ae82453-0895-6385-a46b-88881b554b97@gmail.com>
Message-ID: <129171335.1415203.1540930713880.JavaMail.zimbra@cognigencorp.com>

Thanks Duncan for your quick reply.

Ideally, I would want bar1 and bar2 to be independent functions, because they are huge in actuality and, as the actual foo function grows, I may end up with 10 different bar# functions. So I would like to separate them from foo as much as possible.


----- Original Message -----
From: "Duncan Murdoch" <murdoch.duncan at gmail.com>
To: "Sebastien Bihorel" <sebastien.bihorel at cognigencorp.com>, r-help at r-project.org
Sent: Tuesday, October 30, 2018 4:13:05 PM
Subject: Re: [R] Question about function scope

On 30/10/2018 3:56 PM, Sebastien Bihorel wrote:
> Hi,
> 
>  From the R user manual, I have a basic understanding of the scope of function evaluation but have a harder time understanding how to mess with environments.
> 
> My problem can be summarized by the code shown at the bottom:
> - the foo function performs some steps including the assignment of default values to 3 objects: x, y, z
> - at some point, I would like to call either the bar1 or bar2 function based upon the value of the c argument of the foo function. These functions assign different values to the x, y, z variables.
> - then foo should move on and do other cool stuff
> 
> Based upon default R scoping, the x, y, and z variables inside the bar1 and bar2 functions are not in the same environment as the x, y, and z variables created inside the foo function.
> 
> Can I modify the scope of evaluation of bar1 and bar2 so that x, y, and z created inside the foo function are modified?
> 
> PS:
> - I know about "<<-" but, in my real code (which I cannot share, sorry), foo is already called within other functions and x, y, and z variables do not exist in the top-level environment and are not returned by foo. So "<<-" does not work (per manual: " Only when <<- has been used in a function that was returned as the value of another function will the special behavior described here occur. ")

I haven't looked up that quote, but it is likely describing a situation 
that isn't relevant to you.  For you, the important part is that bar1 
and bar2 must be created within foo.  They don't need to be returned 
from it.

So my edit below of your code should do what you want.

foo <- function(a=1, b=2, c=0){

   bar1 <- function(){
     x <<- 1
     y <<- 1
     z <<- 1
     cat(sprintf('bar1: x=%d, y=%d, z=%d\n', x, y, z))
   }

   bar2 <- function(){
     x <<- 2
     y <<- 2
     z <<- 2
     cat(sprintf('bar2: x=%d, y=%d, z=%d\n', x, y, z))
   }

   # some setup code
   dummy <- a + b
   x <- y <- z <- 0

   # here is my scope problem
   if (c==1) bar1()
   if (c==2) bar2()

   # some more code
   cat(sprintf('foo: x=%d, y=%d, z=%d\n', x, y, z))

}

foo(c=0)
foo(c=1)
foo(c=2)

I get this output:

 > foo(c=0)
foo: x=0, y=0, z=0
 > foo(c=1)
bar1: x=1, y=1, z=1
foo: x=1, y=1, z=1
 > foo(c=2)
bar2: x=2, y=2, z=2
foo: x=2, y=2, z=2

Duncan Murdoch



From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Oct 30 21:18:51 2018
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 30 Oct 2018 16:18:51 -0400
Subject: [R] Question about function scope
In-Reply-To: <1171707593.1413980.1540929402577.JavaMail.zimbra@cognigencorp.com>
References: <1171707593.1413980.1540929402577.JavaMail.zimbra@cognigencorp.com>
Message-ID: <7445db9d-fd28-b59d-59b9-5f0821594b0e@gmail.com>

Here's another modification to your code that also works.  It's a lot 
uglier, but will allow bar1 and bar2 to be used in multiple functions, 
not just foo.

bar1 <- function(env){
   env$x <- 1
   env$y <- 1
   env$z <- 1
   with(env, cat(sprintf('bar1: x=%d, y=%d, z=%d\n', x, y, z)))
}

bar2 <- function(env){
   env$x <- 2
   env$y <- 2
   env$z <- 2
   with(env, cat(sprintf('bar2: x=%d, y=%d, z=%d\n', x, y, z)))
}

foo <- function(a=1, b=2, c=0){

   # some setup code
   dummy <- a + b
   x <- y <- z <- 0

   # here is my scope problem
   if (c==1) bar1(environment())
   if (c==2) bar2(environment())

   # some more code
   cat(sprintf('foo: x=%d, y=%d, z=%d\n', x, y, z))

}

foo(c=0)
foo(c=1)
foo(c=2)

Duncan Murdoch



From @eb@@t|en@b|hore| @end|ng |rom cogn|gencorp@com  Tue Oct 30 21:23:46 2018
From: @eb@@t|en@b|hore| @end|ng |rom cogn|gencorp@com (Sebastien Bihorel)
Date: Tue, 30 Oct 2018 16:23:46 -0400 (EDT)
Subject: [R] Question about function scope
In-Reply-To: <7445db9d-fd28-b59d-59b9-5f0821594b0e@gmail.com>
References: <1171707593.1413980.1540929402577.JavaMail.zimbra@cognigencorp.com>
 <7445db9d-fd28-b59d-59b9-5f0821594b0e@gmail.com>
Message-ID: <1138191837.1415439.1540931026667.JavaMail.zimbra@cognigencorp.com>


That's cool! I think this solution would fit better with what my intended setup.

Thanks a lot


----- Original Message -----
From: "Duncan Murdoch" <murdoch.duncan at gmail.com>
To: "Sebastien Bihorel" <sebastien.bihorel at cognigencorp.com>, r-help at r-project.org
Sent: Tuesday, October 30, 2018 4:18:51 PM
Subject: Re: [R] Question about function scope

Here's another modification to your code that also works.  It's a lot 
uglier, but will allow bar1 and bar2 to be used in multiple functions, 
not just foo.

bar1 <- function(env){
   env$x <- 1
   env$y <- 1
   env$z <- 1
   with(env, cat(sprintf('bar1: x=%d, y=%d, z=%d\n', x, y, z)))
}

bar2 <- function(env){
   env$x <- 2
   env$y <- 2
   env$z <- 2
   with(env, cat(sprintf('bar2: x=%d, y=%d, z=%d\n', x, y, z)))
}

foo <- function(a=1, b=2, c=0){

   # some setup code
   dummy <- a + b
   x <- y <- z <- 0

   # here is my scope problem
   if (c==1) bar1(environment())
   if (c==2) bar2(environment())

   # some more code
   cat(sprintf('foo: x=%d, y=%d, z=%d\n', x, y, z))

}

foo(c=0)
foo(c=1)
foo(c=2)

Duncan Murdoch



From @eb@@t|en@b|hore| @end|ng |rom cogn|gencorp@com  Tue Oct 30 21:25:12 2018
From: @eb@@t|en@b|hore| @end|ng |rom cogn|gencorp@com (Sebastien Bihorel)
Date: Tue, 30 Oct 2018 16:25:12 -0400 (EDT)
Subject: [R] Question about function scope
In-Reply-To: <CAGgJW75DHZtLGwW-zF33j9yHM5-A5whZp=6LRA70jCrQAmwXYw@mail.gmail.com>
References: <1171707593.1413980.1540929402577.JavaMail.zimbra@cognigencorp.com>
 <6ae82453-0895-6385-a46b-88881b554b97@gmail.com>
 <CAGgJW75DHZtLGwW-zF33j9yHM5-A5whZp=6LRA70jCrQAmwXYw@mail.gmail.com>
Message-ID: <1912075849.1415599.1540931112406.JavaMail.zimbra@cognigencorp.com>


Thanks a lot Eric, 

I think you are on the same page as Duncan (at least with his 2nd option). I will definitively explore this. 


From: "Eric Berger" <ericjberger at gmail.com> 
To: "Duncan Murdoch" <murdoch.duncan at gmail.com> 
Cc: "Sebastien Bihorel" <sebastien.bihorel at cognigencorp.com>, "R mailing list" <r-help at r-project.org> 
Sent: Tuesday, October 30, 2018 4:17:30 PM 
Subject: Re: [R] Question about function scope 

Hi Sebastien, 
I like Duncan's response. An alternative approach is to pass around environments, as in the following: 

bar1 <- function(e) { 
e$x <- e$y <- e$z <- 1 
cat(sprintf('bar1: x=%d, y=%d, z=%d\n', e$x, e$y, e$z)) 
} 
bar2 <- function(e) { 
e$x <- e$y <- e$z <- 2 
cat(sprintf('bar2: x=%d, y=%d, z=%d\n', e$x, e$y, e$z)) 
} 

foo <- function(a=1, b=2, c=0, e){ 
# some setup code 
dummy <- a + b 
e$x <- e$y <- e$z <- 0 
# here is my scope problem 
if (c==1) bar1(e) 
if (c==2) bar2(e) 
# some more code 
cat(sprintf('foo: x=%d, y=%d, z=%d\n', e$x, e$y, e$z)) 
} 

e <- new.env() 
e$x <- NA 
e$y <- NA 
e$z <- NA 

foo(c=0,e=e) 
foo(c=1,e=e) 
foo(c=2,e=e) 


HTH, 
Eric 

On Tue, Oct 30, 2018 at 10:13 PM Duncan Murdoch < [ mailto:murdoch.duncan at gmail.com | murdoch.duncan at gmail.com ] > wrote: 


On 30/10/2018 3:56 PM, Sebastien Bihorel wrote: 
> Hi, 
> 
> From the R user manual, I have a basic understanding of the scope of function evaluation but have a harder time understanding how to mess with environments. 
> 
> My problem can be summarized by the code shown at the bottom: 
> - the foo function performs some steps including the assignment of default values to 3 objects: x, y, z 
> - at some point, I would like to call either the bar1 or bar2 function based upon the value of the c argument of the foo function. These functions assign different values to the x, y, z variables. 
> - then foo should move on and do other cool stuff 
> 
> Based upon default R scoping, the x, y, and z variables inside the bar1 and bar2 functions are not in the same environment as the x, y, and z variables created inside the foo function. 
> 
> Can I modify the scope of evaluation of bar1 and bar2 so that x, y, and z created inside the foo function are modified? 
> 
> PS: 
> - I know about "<<-" but, in my real code (which I cannot share, sorry), foo is already called within other functions and x, y, and z variables do not exist in the top-level environment and are not returned by foo. So "<<-" does not work (per manual: " Only when <<- has been used in a function that was returned as the value of another function will the special behavior described here occur. ") 

I haven't looked up that quote, but it is likely describing a situation 
that isn't relevant to you. For you, the important part is that bar1 
and bar2 must be created within foo. They don't need to be returned 
from it. 

So my edit below of your code should do what you want. 

foo <- function(a=1, b=2, c=0){ 

bar1 <- function(){ 
x <<- 1 
y <<- 1 
z <<- 1 
cat(sprintf('bar1: x=%d, y=%d, z=%d\n', x, y, z)) 
} 

bar2 <- function(){ 
x <<- 2 
y <<- 2 
z <<- 2 
cat(sprintf('bar2: x=%d, y=%d, z=%d\n', x, y, z)) 
} 

# some setup code 
dummy <- a + b 
x <- y <- z <- 0 

# here is my scope problem 
if (c==1) bar1() 
if (c==2) bar2() 

# some more code 
cat(sprintf('foo: x=%d, y=%d, z=%d\n', x, y, z)) 

} 

foo(c=0) 
foo(c=1) 
foo(c=2) 

I get this output: 

> foo(c=0) 
foo: x=0, y=0, z=0 
> foo(c=1) 
bar1: x=1, y=1, z=1 
foo: x=1, y=1, z=1 
> foo(c=2) 
bar2: x=2, y=2, z=2 
foo: x=2, y=2, z=2 

Duncan Murdoch 

______________________________________________ 
[ mailto:R-help at r-project.org | R-help at r-project.org ] mailing list -- To UNSUBSCRIBE and more, see 
[ https://stat.ethz.ch/mailman/listinfo/r-help | https://stat.ethz.ch/mailman/listinfo/r-help ] 
PLEASE do read the posting guide [ http://www.r-project.org/posting-guide.html | http://www.R-project.org/posting-guide.html ] 
and provide commented, minimal, self-contained, reproducible code. 





	[[alternative HTML version deleted]]



From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Tue Oct 30 21:38:11 2018
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Tue, 30 Oct 2018 20:38:11 +0000 (UTC)
Subject: [R] MSE Cross-validation with factor interactions terms MARS
 regression
In-Reply-To: <D4C000F2-239D-4066-96FE-37358C1EBE27@gmail.com>
References: <96346275.28234122.1540845992354.ref@mail.yahoo.com>
 <96346275.28234122.1540845992354@mail.yahoo.com>
 <CAGxFJbQ6wKnSFOopdS=8yyL_fvwi4eTY_sOuqz=KPAn7HRMffg@mail.gmail.com>
 <2140295663.8388898.1540853415169@mail.yahoo.com>
 <D4C000F2-239D-4066-96FE-37358C1EBE27@gmail.com>
Message-ID: <1679471886.29293338.1540931891533@mail.yahoo.com>

Dear Prof. Dalgaard,

I really thank you lots for your comments and responses. It perfectly works ! 
Many thanks.





Le mardi 30 octobre 2018 ? 00:30:11 UTC+1, peter dalgaard <pdalgd at gmail.com> a ?crit : 





The two lines did the same thing, so little wonder...

More likely, the culprit is that a is assigned in the global environment, and then used in a prediction on a subset.

Also, 

- you are defining Training, but as far as I can tell, you're not using it. Not likely to be an issue in itself, but wouldn't you want to fit on the Training set and evaluate on the Testing? 

- your model de facto contains both education as a numeric predictor and as.factor(education) as well as the interaction term age:as.factor(education). Does that make sense modelling-wise??

-pd

> On 29 Oct 2018, at 23:50 , varin sacha via R-help <r-help at r-project.org> wrote:
> 
> Hi Bert,
> 
> Many thanks, I have fixed it but it still don't work... . 
> Best,
> 
> 
> 
> 
> 
> 
> Le lundi 29 octobre 2018 ? 22:07:26 UTC+1, Bert Gunter <bgunter.4567 at gmail.com> a ?crit : 
> 
> 
> 
> 
> 
> I did no analysis of your code or thought process, but noticed that you had the following two successive lines in your code:
> 
> 
> y=Testing$wage
> 
> y=Wage[-sam,]$wage
> 
> This obviously makes no sense, so maybe you should fix this first and then proceed.
> 
> -- Bert
> 
> 
> Bert Gunter
> 
> "The trouble with having an open mind is that people keep coming along and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> 
> 
> On Mon, Oct 29, 2018 at 1:46 PM varin sacha via R-help <r-help at r-project.org> wrote:
>> 
>> Dear R-experts,
>> I am having trouble while doing crossvalidation with a MARS regression including an interaction term between a factor variable (education) and 1 continuous variable (age). How could I solve my problem ?
>> 
>> Here below my reproducible example.
>> 
>> #######
>> 
>> install.packages("ISLR")
>> 
>> library(ISLR)
>> 
>> install.packages("earth")
>> 
>> library(earth)
>> 
>> a<-as.factor(Wage$education)
>> 
>> # Create a list to store the results
>> 
>> lst<-list()
>> 
>> # This statement does the repetitions (looping)
>> 
>> for(i in 1 :200) {
>> 
>> n=dim(Wage)[1]
>> 
>> p=0.667
>> 
>> sam=sample(1 :n,floor(p*n),replace=FALSE)
>> 
>> Training =Wage [sam,]
>> 
>> Testing = Wage [-sam,]
>> 
>> mars5<-earth(wage~age+education+year+age*a, data=Wage)
>> 
>> ypred=predict(mars5,newdata=Testing)
>> 
>> y=Testing$wage
>> 
>> y=Wage[-sam,]$wage
>> 
>> MSE = mean(y-ypred)^2
>> 
>> MSE
>> 
>> lst[i]<-MSE
>> 
>> }
>> 
>> mean(unlist(lst))
>> 
>> summary(mars5)
>> 
>> #######
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.

>> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk? Priv: PDalgd at gmail.com



From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Oct 30 21:47:32 2018
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 30 Oct 2018 16:47:32 -0400
Subject: [R] Question about function scope
In-Reply-To: <129171335.1415203.1540930713880.JavaMail.zimbra@cognigencorp.com>
References: <1171707593.1413980.1540929402577.JavaMail.zimbra@cognigencorp.com>
 <6ae82453-0895-6385-a46b-88881b554b97@gmail.com>
 <129171335.1415203.1540930713880.JavaMail.zimbra@cognigencorp.com>
Message-ID: <85e22772-770a-705a-b0b6-6a113cae5a37@gmail.com>

On 30/10/2018 4:18 PM, Sebastien Bihorel wrote:
> Thanks Duncan for your quick reply.
> 
> Ideally, I would want bar1 and bar2 to be independent functions, because they are huge in actuality and, as the actual foo function grows, I may end up with 10 different bar# functions. So I would like to separate them from foo as much as possible.

If that's the case, then I think the second solution (passing around 
environments) is a really bad idea.  Functions should not have side 
effects because it makes them harder to understand.  Modifying local 
variables in some other function is a really dangerous side effect, 
especially if both functions are big, because they are already hard to 
understand.

If you really have more callers for bar1() than just foo(), it is even 
worse.

So I'd suggest having bar1 and bar2 return the new values in a list, and 
in foo(), explicitly extract the values you want from the list.  Then if 
in the future you decide that bar1 should also return a 4th value w, or 
you want to rename x to something more meaningful, you don't need to 
check your other foo functions to see if x and w are used in the same 
way in them.  They'll just ignore w if it isn't relevant to them.  Your 
foo() code becomes something like this:

   x <- y <- z <- 0

   # here is my scope problem
   result <- list(x = x, y = y, z = z) # c == 0 case
   if (c==1) result <- bar1()
   if (c==2) result <- bar2()
   x <- result[["x"]]
   y <- result[["y"]]
   z <- result[["z"]]

Duncan Murdoch


> 
> 
> ----- Original Message -----
> From: "Duncan Murdoch" <murdoch.duncan at gmail.com>
> To: "Sebastien Bihorel" <sebastien.bihorel at cognigencorp.com>, r-help at r-project.org
> Sent: Tuesday, October 30, 2018 4:13:05 PM
> Subject: Re: [R] Question about function scope
> 
> On 30/10/2018 3:56 PM, Sebastien Bihorel wrote:
>> Hi,
>>
>>   From the R user manual, I have a basic understanding of the scope of function evaluation but have a harder time understanding how to mess with environments.
>>
>> My problem can be summarized by the code shown at the bottom:
>> - the foo function performs some steps including the assignment of default values to 3 objects: x, y, z
>> - at some point, I would like to call either the bar1 or bar2 function based upon the value of the c argument of the foo function. These functions assign different values to the x, y, z variables.
>> - then foo should move on and do other cool stuff
>>
>> Based upon default R scoping, the x, y, and z variables inside the bar1 and bar2 functions are not in the same environment as the x, y, and z variables created inside the foo function.
>>
>> Can I modify the scope of evaluation of bar1 and bar2 so that x, y, and z created inside the foo function are modified?
>>
>> PS:
>> - I know about "<<-" but, in my real code (which I cannot share, sorry), foo is already called within other functions and x, y, and z variables do not exist in the top-level environment and are not returned by foo. So "<<-" does not work (per manual: " Only when <<- has been used in a function that was returned as the value of another function will the special behavior described here occur. ")
> 
> I haven't looked up that quote, but it is likely describing a situation
> that isn't relevant to you.  For you, the important part is that bar1
> and bar2 must be created within foo.  They don't need to be returned
> from it.
> 
> So my edit below of your code should do what you want.
> 
> foo <- function(a=1, b=2, c=0){
> 
>     bar1 <- function(){
>       x <<- 1
>       y <<- 1
>       z <<- 1
>       cat(sprintf('bar1: x=%d, y=%d, z=%d\n', x, y, z))
>     }
> 
>     bar2 <- function(){
>       x <<- 2
>       y <<- 2
>       z <<- 2
>       cat(sprintf('bar2: x=%d, y=%d, z=%d\n', x, y, z))
>     }
> 
>     # some setup code
>     dummy <- a + b
>     x <- y <- z <- 0
> 
>     # here is my scope problem
>     if (c==1) bar1()
>     if (c==2) bar2()
> 
>     # some more code
>     cat(sprintf('foo: x=%d, y=%d, z=%d\n', x, y, z))
> 
> }
> 
> foo(c=0)
> foo(c=1)
> foo(c=2)
> 
> I get this output:
> 
>   > foo(c=0)
> foo: x=0, y=0, z=0
>   > foo(c=1)
> bar1: x=1, y=1, z=1
> foo: x=1, y=1, z=1
>   > foo(c=2)
> bar2: x=2, y=2, z=2
> foo: x=2, y=2, z=2
> 
> Duncan Murdoch
>



From p@u| @end|ng |rom @t@t@@uck|@nd@@c@nz  Wed Oct 31 01:33:55 2018
From: p@u| @end|ng |rom @t@t@@uck|@nd@@c@nz (Paul Murrell)
Date: Wed, 31 Oct 2018 13:33:55 +1300
Subject: [R] 
 [FORGED] grid.grab(): strange behavior of "wrap" argument when
 working with lattice output
In-Reply-To: <2365dfd1-5222-bad1-43e9-ea740d4a0b26@northwestern.edu>
References: <2365dfd1-5222-bad1-43e9-ea740d4a0b26@northwestern.edu>
Message-ID: <99ec8b49-2a00-368e-144c-6ad7e7e00619@stat.auckland.ac.nz>

Hi

Mostly these are bugs.

One source of confusion:  wrap=FALSE is NOT doing better than wrap=TRUE, 
which you can see if you start a new page before drawing the grabbed 
grob ...

xyplot(1:5 ~ 1:5)
trellis.focus()
panel.abline(h = 3)
panel.abline(h = 5)
myGrob <- grid.grab(wrap = FALSE)
## start new page, otherwise just drawing over the top
grid.newpage()
grid.draw(myGrob)

But you are correct that wrap=TRUE is underperforming.  The problem is 
that your code is producing two grobs with the same name (and 
grid.grab() gets upset because you cannot create a gTree with two grobs 
with the same name).

Here is a workaround (make sure that each grob has a different name) ...

xyplot(1:5 ~ 1:5)
trellis.focus()
panel.abline(h = 3)
panel.abline(h = 5, identifier="abline2")
myGrob <- grid.grab()

grid.grab(wrap=TRUE) does not fix the problem because it does not wrap 
grobs.  For a more permanent solution, I have added a 'wrap.grobs' 
argument to grid.grab() (in r-devel), so that you can now do this 
(wrap.grobs=TRUE implicitly sets wrap=TRUE) ...

xyplot(1:5 ~ 1:5)
trellis.focus()
panel.abline(h = 3)
panel.abline(h = 5)
myGrob <- grid.grab(wrap.grobs = TRUE)

I have also fixed grid.grab() so that it does not complain about grobs 
with the same name if you have set wrap.grobs=TRUE.

Thanks for the report.  I hope this fixes the problems for you.

Paul

On 31/10/18 7:34 AM, John G. Bullock wrote:
> 
> grid.grab() captures all of the current viewports and stores them as a
> grob. In theory, and often in practice, you can use grid.grab() to store
> an image now for drawing later on. But I have noticed some odd behavior
> of grid.grab() when working with lattice output. It is all related to
> the wrap argument:
> 
> 1. When wrap = TRUE, the saved grob should produce a drawing faithful to
> the original viewports. But sometimes it doesn't.
>   ??? 2. wrap = FALSE is supposed to produce less faithful output if it
> differs at all, but sometimes its output is more faithful.
>   ??? 3. Even when using wrap = TRUE, grid.grab() warns me to use wrap =
> TRUE.
> 
> Here is a minimal example to illustrate all of these behaviors:
> 
> library(grid)
>   ??? library(lattice)
>   ??? xyplot(1:5 ~ 1:5)
> trellis.focus()
>   ??? panel.abline(h = 3)
>   ??? panel.abline(h = 5)
> myGrob <- grid.grab(wrap = TRUE)
> 
> At this point, I receive a warning --
> 
>   ?? ?? In grabDL(warn, wrap, ...) :
>   ? ? ? ? one of more grobs overwritten (grab WILL not be faithful; try
> 'wrap = TRUE')
> 
> -- which is strange, given that I specified wrap = TRUE.
> 
> I proceed by running grid.draw(myGrob). According to Paul Murrell (R
> Graphics, 2nd ed., page 239), using grid.grab(wrap = TRUE) is
> "guaranteed to replicate the original output." But it doesn't.
> Specifically, the top horizontal line (from panel.abline(h = 5)) isn't
> reproduced.
> 
> Matters get stranger when I consider the following code:
> 
>   ??? xyplot(1:5 ~ 1:5)
>   ??? trellis.focus()
>   ??? panel.abline(h = 3)
> panel.abline(h = 5)
>   ??? myGrob <- grid.grab(wrap = FALSE)
> grid.draw(myGrob)
> 
> These commands are the same as in the previous example, except that this
> time, wrap = FALSE. But this time, grid.draw() does faithfully reproduce
> the captured viewports. So the behavior is the opposite of what I
> expect: when wrap = FALSE, grid.draw() faithfully reproduces the
> captured viewports, but when wrap = TRUE, it doesn't.
> 
> I've run these examples in R 3.3.2 and 3.5.1. (Session info from 3.3.2
> is appended.) The result is the same in both cases. Are these bugs, or
> am I overlooking something?
> 
> Thank you,
> John Bullock
> 
> 
>   > sessionInfo()
> R version 3.3.2 (2016-10-31)
> Platform: x86_64-w64-mingw32/x64 (64-bit)
> Running under: Windows 10 x64 (build 17134)
> 
> locale:
> [1] LC_COLLATE=English_United States.1252 LC_CTYPE=English_United
> States.1252??? LC_MONETARY=English_United States.1252 LC_NUMERIC=C
> [5] LC_TIME=English_United States.1252
> 
> attached base packages:
> [1] grid????? stats???? graphics? grDevices utils???? datasets methods base
> 
> other attached packages:
> [1] lattice_0.20-34 RevoUtilsMath_10.0.0
> 
> loaded via a namespace (and not attached):
> [1] RevoUtils_10.0.2
> 
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

-- 
Dr Paul Murrell
Department of Statistics
The University of Auckland
Private Bag 92019
Auckland
New Zealand
64 9 3737599 x85392
paul at stat.auckland.ac.nz
http://www.stat.auckland.ac.nz/~paul/



From n|u|tz @end|ng |rom gm@||@com  Wed Oct 31 02:28:53 2018
From: n|u|tz @end|ng |rom gm@||@com (Neal Fultz)
Date: Tue, 30 Oct 2018 18:28:53 -0700
Subject: [R] Question about function scope
In-Reply-To: <85e22772-770a-705a-b0b6-6a113cae5a37@gmail.com>
References: <1171707593.1413980.1540929402577.JavaMail.zimbra@cognigencorp.com>
 <6ae82453-0895-6385-a46b-88881b554b97@gmail.com>
 <129171335.1415203.1540930713880.JavaMail.zimbra@cognigencorp.com>
 <85e22772-770a-705a-b0b6-6a113cae5a37@gmail.com>
Message-ID: <CAL9B2vc6oD6ZsGp0_ABA2rGywkzSqnW6gW7kv66wm3QcBazNng@mail.gmail.com>

I'm going to n-th Duncan's recommendations to try to keep your functions
small and try not to mess with environments.

... So I'm ashamed that I wrote the following - I apologize in advance.

But as an intellectual exercise, we can cannibalize the code for `dynGet`
and create a `dynSet` function which mirrors it:

---

dynSet <- function (x, value, ifnotfound = stop(gettextf("%s not found",
sQuote(x)),
                               domain = NA), minframe = 1L, inherits =
FALSE)
{
  n <- sys.nframe()
  myObj <- structure(list(.b = as.raw(7)), foo = 47L)
  while (n > minframe) {
    n <- n - 1L
    env <- sys.frame(n)
    r <- get0(x, envir = env, inherits = inherits, ifnotfound = myObj)
    if (!identical(r, myObj)) {
      assign(x, value, envir = env)
      return(NULL)
    }
  }
  ifnotfound
}

### Note that in bar1 / bar2, you can't use x,y,z - dynSet will match the
local variable instead of the calling frame.

bar1 <- function(){
  x1 <- 1
  y1 <- 1
  z1 <- 1
  cat(sprintf('bar1: x=%d, y=%d, z=%d\n', x1, y1, z1))
  dynSet("x", x1)
  dynSet("y", y1)
  dynSet("z", z1)

}

bar2 <- function(){
  x2 <- 2
  y2 <- 2
  z2 <- 2
  cat(sprintf('bar2: x=%d, y=%d, z=%d\n', x2, y2, z2))
  dynSet("x", x2)
  dynSet("y", y2)
  dynSet("z", z2)

}

foo <- function(a=1, b=2, c=0){

  # some setup code
  dummy <- a + b
  x <- y <- z <- 0

  # here is my scope problem
  if (c==1) bar1()
  if (c==2) bar2()

  # some more code
  cat(sprintf('foo: x=%d, y=%d, z=%d\n', x, y, z))

}

foo(c=0)
foo(c=1)
foo(c=2)




---

Please don't actually do this though.

I think the most educational part of this is the dynGet/dynSet function
itself - if you understand the various functions it uses, you can do pretty
much anything in R.


But again, you shouldn't.





On Tue, Oct 30, 2018 at 1:51 PM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 30/10/2018 4:18 PM, Sebastien Bihorel wrote:
> > Thanks Duncan for your quick reply.
> >
> > Ideally, I would want bar1 and bar2 to be independent functions, because
> they are huge in actuality and, as the actual foo function grows, I may end
> up with 10 different bar# functions. So I would like to separate them from
> foo as much as possible.
>
> If that's the case, then I think the second solution (passing around
> environments) is a really bad idea.  Functions should not have side
> effects because it makes them harder to understand.  Modifying local
> variables in some other function is a really dangerous side effect,
> especially if both functions are big, because they are already hard to
> understand.
>
> If you really have more callers for bar1() than just foo(), it is even
> worse.
>
> So I'd suggest having bar1 and bar2 return the new values in a list, and
> in foo(), explicitly extract the values you want from the list.  Then if
> in the future you decide that bar1 should also return a 4th value w, or
> you want to rename x to something more meaningful, you don't need to
> check your other foo functions to see if x and w are used in the same
> way in them.  They'll just ignore w if it isn't relevant to them.  Your
> foo() code becomes something like this:
>
>    x <- y <- z <- 0
>
>    # here is my scope problem
>    result <- list(x = x, y = y, z = z) # c == 0 case
>    if (c==1) result <- bar1()
>    if (c==2) result <- bar2()
>    x <- result[["x"]]
>    y <- result[["y"]]
>    z <- result[["z"]]
>
> Duncan Murdoch
>
>
> >
> >
> > ----- Original Message -----
> > From: "Duncan Murdoch" <murdoch.duncan at gmail.com>
> > To: "Sebastien Bihorel" <sebastien.bihorel at cognigencorp.com>,
> r-help at r-project.org
> > Sent: Tuesday, October 30, 2018 4:13:05 PM
> > Subject: Re: [R] Question about function scope
> >
> > On 30/10/2018 3:56 PM, Sebastien Bihorel wrote:
> >> Hi,
> >>
> >>   From the R user manual, I have a basic understanding of the scope of
> function evaluation but have a harder time understanding how to mess with
> environments.
> >>
> >> My problem can be summarized by the code shown at the bottom:
> >> - the foo function performs some steps including the assignment of
> default values to 3 objects: x, y, z
> >> - at some point, I would like to call either the bar1 or bar2 function
> based upon the value of the c argument of the foo function. These functions
> assign different values to the x, y, z variables.
> >> - then foo should move on and do other cool stuff
> >>
> >> Based upon default R scoping, the x, y, and z variables inside the bar1
> and bar2 functions are not in the same environment as the x, y, and z
> variables created inside the foo function.
> >>
> >> Can I modify the scope of evaluation of bar1 and bar2 so that x, y, and
> z created inside the foo function are modified?
> >>
> >> PS:
> >> - I know about "<<-" but, in my real code (which I cannot share,
> sorry), foo is already called within other functions and x, y, and z
> variables do not exist in the top-level environment and are not returned by
> foo. So "<<-" does not work (per manual: " Only when <<- has been used in a
> function that was returned as the value of another function will the
> special behavior described here occur. ")
> >
> > I haven't looked up that quote, but it is likely describing a situation
> > that isn't relevant to you.  For you, the important part is that bar1
> > and bar2 must be created within foo.  They don't need to be returned
> > from it.
> >
> > So my edit below of your code should do what you want.
> >
> > foo <- function(a=1, b=2, c=0){
> >
> >     bar1 <- function(){
> >       x <<- 1
> >       y <<- 1
> >       z <<- 1
> >       cat(sprintf('bar1: x=%d, y=%d, z=%d\n', x, y, z))
> >     }
> >
> >     bar2 <- function(){
> >       x <<- 2
> >       y <<- 2
> >       z <<- 2
> >       cat(sprintf('bar2: x=%d, y=%d, z=%d\n', x, y, z))
> >     }
> >
> >     # some setup code
> >     dummy <- a + b
> >     x <- y <- z <- 0
> >
> >     # here is my scope problem
> >     if (c==1) bar1()
> >     if (c==2) bar2()
> >
> >     # some more code
> >     cat(sprintf('foo: x=%d, y=%d, z=%d\n', x, y, z))
> >
> > }
> >
> > foo(c=0)
> > foo(c=1)
> > foo(c=2)
> >
> > I get this output:
> >
> >   > foo(c=0)
> > foo: x=0, y=0, z=0
> >   > foo(c=1)
> > bar1: x=1, y=1, z=1
> > foo: x=1, y=1, z=1
> >   > foo(c=2)
> > bar2: x=2, y=2, z=2
> > foo: x=2, y=2, z=2
> >
> > Duncan Murdoch
> >
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From @tyen @end|ng |rom ntu@edu@tw  Wed Oct 31 03:28:14 2018
From: @tyen @end|ng |rom ntu@edu@tw (Steven Yen)
Date: Wed, 31 Oct 2018 10:28:14 +0800
Subject: [R] Using apply
Message-ID: <e1df1341-9442-021b-08d4-ea9e0b52a35f@ntu.edu.tw>

I need help with "apply". Below, I have no problem getting the column sums.
1. How do I get the sum of squares?
2. In general, where do I look up these functions?
Thanks.

x<-matrix(1:10,nrow=5); x
sum <- apply(x,2,sum); sum




	[[alternative HTML version deleted]]



From jho|tm@n @end|ng |rom gm@||@com  Wed Oct 31 03:47:22 2018
From: jho|tm@n @end|ng |rom gm@||@com (jim holtman)
Date: Tue, 30 Oct 2018 22:47:22 -0400
Subject: [R] Using apply
In-Reply-To: <e1df1341-9442-021b-08d4-ea9e0b52a35f@ntu.edu.tw>
References: <e1df1341-9442-021b-08d4-ea9e0b52a35f@ntu.edu.tw>
Message-ID: <CAAxdm-4VjjP_UCFkZfxs9JQ-7Ry9BNvuFnxKED7f=+N7q_nZyA@mail.gmail.com>

> s2 <- apply(x*x, 2, sum)
> s2
[1]  55 330

Jim Holtman
Data Munger Guru

What is the problem that you are trying to solve?
Tell me what you want to do, not how you want to do it.
On Tue, Oct 30, 2018 at 10:28 PM Steven Yen <styen at ntu.edu.tw> wrote:
>
> I need help with "apply". Below, I have no problem getting the column sums.
> 1. How do I get the sum of squares?
> 2. In general, where do I look up these functions?
> Thanks.
>
> x<-matrix(1:10,nrow=5); x
> sum <- apply(x,2,sum); sum
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



From peter@|@ng|e|der @end|ng |rom gm@||@com  Wed Oct 31 04:44:08 2018
From: peter@|@ng|e|der @end|ng |rom gm@||@com (Peter Langfelder)
Date: Tue, 30 Oct 2018 20:44:08 -0700
Subject: [R] Using apply
In-Reply-To: <e1df1341-9442-021b-08d4-ea9e0b52a35f@ntu.edu.tw>
References: <e1df1341-9442-021b-08d4-ea9e0b52a35f@ntu.edu.tw>
Message-ID: <CA+hbrhV1bvHjc--wggZTVXb=wV+KmQ-FR6OT3XcfHvOzH8hy7Q@mail.gmail.com>

It should be said that for many basic statistics, there are faster
functions than apply, for example here you want

sum = colSums(x)

As already said, for sum of squares you would do colSums(x^2).

Many useful functions of this kind are implemented in package
matrixStats. Once you install it, either look at the package manual or
type ls("package:matrixStats") to see a list of functions. Most if not
all have self-explanatory names.

HTH,

Peter
On Tue, Oct 30, 2018 at 7:28 PM Steven Yen <styen at ntu.edu.tw> wrote:
>
> I need help with "apply". Below, I have no problem getting the column sums.
> 1. How do I get the sum of squares?
> 2. In general, where do I look up these functions?
> Thanks.
>
> x<-matrix(1:10,nrow=5); x
> sum <- apply(x,2,sum); sum
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



From bgunter@4567 @end|ng |rom gm@||@com  Wed Oct 31 04:57:53 2018
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 30 Oct 2018 20:57:53 -0700
Subject: [R] Using apply
In-Reply-To: <CA+hbrhV1bvHjc--wggZTVXb=wV+KmQ-FR6OT3XcfHvOzH8hy7Q@mail.gmail.com>
References: <e1df1341-9442-021b-08d4-ea9e0b52a35f@ntu.edu.tw>
 <CA+hbrhV1bvHjc--wggZTVXb=wV+KmQ-FR6OT3XcfHvOzH8hy7Q@mail.gmail.com>
Message-ID: <CAGxFJbQ5i1sK4rMLOZFAbza_-Rk0vZmYtD69xx=xfr8ML-KVbQ@mail.gmail.com>

Indeed.

But perhaps it's also worth noting that if such statistics are calculated
as implementations of (e.g. anova) formulae still found (sadly) in many
statistics texts, then they shouldn't be calculated at all. Rather, the
appropriate matrix methods (e.g. QR decompositions ) built into R -- many
of which are already incorporated into R's statistical corpus -- should be
used. To say more would of course be far O/T.

Cheers,
Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Oct 30, 2018 at 8:44 PM Peter Langfelder <peter.langfelder at gmail.com>
wrote:

> It should be said that for many basic statistics, there are faster
> functions than apply, for example here you want
>
> sum = colSums(x)
>
> As already said, for sum of squares you would do colSums(x^2).
>
> Many useful functions of this kind are implemented in package
> matrixStats. Once you install it, either look at the package manual or
> type ls("package:matrixStats") to see a list of functions. Most if not
> all have self-explanatory names.
>
> HTH,
>
> Peter
> On Tue, Oct 30, 2018 at 7:28 PM Steven Yen <styen at ntu.edu.tw> wrote:
> >
> > I need help with "apply". Below, I have no problem getting the column
> sums.
> > 1. How do I get the sum of squares?
> > 2. In general, where do I look up these functions?
> > Thanks.
> >
> > x<-matrix(1:10,nrow=5); x
> > sum <- apply(x,2,sum); sum
> >
> >
> >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From r@turner @end|ng |rom @uck|@nd@@c@nz  Wed Oct 31 06:03:15 2018
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Wed, 31 Oct 2018 18:03:15 +1300
Subject: [R] [FORGED] Re:  Using apply
In-Reply-To: <CAAxdm-4VjjP_UCFkZfxs9JQ-7Ry9BNvuFnxKED7f=+N7q_nZyA@mail.gmail.com>
References: <e1df1341-9442-021b-08d4-ea9e0b52a35f@ntu.edu.tw>
 <CAAxdm-4VjjP_UCFkZfxs9JQ-7Ry9BNvuFnxKED7f=+N7q_nZyA@mail.gmail.com>
Message-ID: <dfc0ed0d-ea5a-8c0a-9b12-764c0fee01c2@auckland.ac.nz>


On 10/31/18 3:47 PM, jim holtman wrote:

>> s2 <- apply(x*x, 2, sum)
>> s2
> [1]  55 330

<SNIP>

It seems to me to be more "natural" (and perhaps more amenable to 
generalisation) to do:

     s2 <- apply(x,2,function(v){sum(v^2)})

But it's probably just a matter of taste.

cheers,

Rolf

-- 
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276



From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Oct 31 07:22:32 2018
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 30 Oct 2018 23:22:32 -0700
Subject: [R] [FORGED] Re:  Using apply
In-Reply-To: <dfc0ed0d-ea5a-8c0a-9b12-764c0fee01c2@auckland.ac.nz>
References: <e1df1341-9442-021b-08d4-ea9e0b52a35f@ntu.edu.tw>
 <CAAxdm-4VjjP_UCFkZfxs9JQ-7Ry9BNvuFnxKED7f=+N7q_nZyA@mail.gmail.com>
 <dfc0ed0d-ea5a-8c0a-9b12-764c0fee01c2@auckland.ac.nz>
Message-ID: <89DB647F-D5F0-414B-A653-57FD54811FE4@dcn.davis.ca.us>

In general doing vectorized calculations on larger data units is going to lead to faster computation, so it would be better in the long run if your taste could evolve to appreciate Jim's approach.

On October 30, 2018 10:03:15 PM PDT, Rolf Turner <r.turner at auckland.ac.nz> wrote:
>
>On 10/31/18 3:47 PM, jim holtman wrote:
>
>>> s2 <- apply(x*x, 2, sum)
>>> s2
>> [1]  55 330
>
><SNIP>
>
>It seems to me to be more "natural" (and perhaps more amenable to 
>generalisation) to do:
>
>     s2 <- apply(x,2,function(v){sum(v^2)})
>
>But it's probably just a matter of taste.
>
>cheers,
>
>Rolf

-- 
Sent from my phone. Please excuse my brevity.



From p_conno||y @end|ng |rom @||ng@hot@co@nz  Wed Oct 31 08:22:48 2018
From: p_conno||y @end|ng |rom @||ng@hot@co@nz (Patrick Connolly)
Date: Wed, 31 Oct 2018 20:22:48 +1300
Subject: [R] Corrupted package?
Message-ID: <20181031072248.GA8540@slingshot.co.nz>


I got this message while using a dplyr mutate call: 

Error in get0(oNam, envir = ns) : 
  lazy-load database '/home/hrapgc/local/R-3.5.1/library/pkgconfig/R/pkgconfig.rdb' is corrupt

I had only just installed R-3.5.1 and updated the packages (using the
function update.packages with the checkBuild parameter to TRUE) in the
library I use with that version.  So, I checked the size of
pkgconfig.rdb with the previous version from the bash prompt:

> ll `locate pkgconfig.rdb`

-rw-r--r-- 1 hrapgc hrapgc  5335 May  8 14:06 /home/hrapgc/local/R-3.5.0/library/pkgconfig/help/pkgconfig.rdb
-rw-r--r-- 1 hrapgc hrapgc 15669 May  8 14:06 /home/hrapgc/local/R-3.5.0/library/pkgconfig/R/pkgconfig.rdb
-rw-r--r-- 1 hrapgc hrapgc  5359 Oct 31 16:12 /home/hrapgc/local/R-3.5.1/library/pkgconfig/help/pkgconfig.rdb
-rw-r--r-- 1 hrapgc hrapgc  4367 Oct 31 16:12 /home/hrapgc/local/R-3.5.1/library/pkgconfig/R/pkgconfig.rdb

While the pkgconfig.rdb filesize in the help directory is nearly
identical in size to that in R-3.5.0 (and previous versions) the one
in the R directory is very much smaller.  So the error message
probably makes sense.

The question is: how could that have happened?  I removed the package
and reinstalled it, but that made no difference.  Is this documented
anywhere?

TIA
-- 
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.   
   ___    Patrick Connolly   
 {~._.~}                   Great minds discuss ideas    
 _( Y )_  	         Average minds discuss events 
(:_~*~_:)                  Small minds discuss people  
 (_)-(_)  	                      ..... Eleanor Roosevelt
	  
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.



From robertob@kker @end|ng |rom gm@||@com  Wed Oct 31 08:50:45 2018
From: robertob@kker @end|ng |rom gm@||@com (P. Roberto Bakker)
Date: Wed, 31 Oct 2018 08:50:45 +0100
Subject: [R] Different stack barplots - same color legends
In-Reply-To: <CAGx1TMAYybconxY7ZVVJcdiYW6+WOjr_D+=GHOA=Xxv2AWRCqQ@mail.gmail.com>
References: <CAKDq9_N16xaeL4O2j=v2bVuMb=tuHfu0Ao+yuLQcEq6B-ngq1A@mail.gmail.com>
 <af9001d319ac4992b0bfc5526150f03b@tamu.edu>
 <CAKDq9_P8hQEHWFH=c_86bG81fU0GS+EUCOmtZ9gJa_7kY-2uhA@mail.gmail.com>
 <CAGx1TMAYybconxY7ZVVJcdiYW6+WOjr_D+=GHOA=Xxv2AWRCqQ@mail.gmail.com>
Message-ID: <CAKDq9_Oi0HGNV7qLnmi4HgVr7orF_gpC7Sys8mLKAxMfjHVtvQ@mail.gmail.com>

Thank you for you information. Package 'HH' is interesting.

Now I find another problem when using 'likert(teamq)'
I get an error message:
> likert(teamq)
Error in dimnames(x) <- `*vtmp*` :
  length of 'dimnames' [2] not equal to array extent

I checked:
> dim(teamq)
[1] 4 2
> ncol(teamq)
[1] 2
So it should be good.

I used 'make.names' , in case the spaces in the variable names would be a
problem.
Same error.

What could I do?

Best and thank you in advance.
Roberto


Op ma 22 okt. 2018 om 20:10 schreef Richard M. Heiberger <rmh at temple.edu>:

> Try the likert function in
> install.packages("HH) ## if necessary
> library(HH)
>
> Then using David Carlson's example teamq
> likert(teamq)
>
> Your example in the 1:30PM (Eastern Daylight Time) doesn't work.
> Error in revalue(teamq, c(`de situatie in zeer geringe mate van
> toepassing is\nvoor u of uw supervisorengroep` = "1",  :
>   x is not a factor or a character vector.
>
> There are many examples in
> ?likert
>
> Rich
>
>
> On Mon, Oct 22, 2018 at 1:30 PM, P. Roberto Bakker
> <robertobakker at gmail.com> wrote:
> > Dear David,
> >
> > Thank you for you quite response.
> > My apologies for not giving some sample data - this is due to AVG.
> > *But this minisample should not be a problem (all in Dutch)*:
> >  teamq
> > # A tibble: 4 x 2
> >   `Ik volg bijscholing om mijn opleiders-kwaliteiten op peil te houden`
> >
> >   <chr>
> >
> > 1 de situatie in hoge mate van toepassing is voor u of uw
> > supervisorengroep
> > 2 de situatie in zeer hoge mate van toepassing is voor u of uw
> > supervisorengroep
> > 3 de situatie in zeer hoge mate van toepassing is voor u of uw
> > supervisorengroep
> > 4 de situatie in geringe mate van toepassing is voor u of uw
> > supervisorengroep
> >   `Ik weet precies wat de ?modernisering van de opleiding? inhoudt`
> >
> >   <chr>
> >
> > 1 de situatie in hoge mate van toepassing is voor u of uw
> > supervisorengroep
> > 2 de situatie in zeer hoge mate van toepassing is voor u of uw
> > supervisorengroep
> > 3 de situatie in zeer hoge mate van toepassing is voor u of uw
> > supervisorengroep
> > 4 de situatie in geringe mate van toepassing is voor u of uw
> > supervisorengroep
> >
> > As you see the likert items are in words, and I should change them in
> > nummeric - Am I correct?
> >
> > *To do this, I tried (see further below):*
> > plyr rename() ; I receive the message it should be a factor or character
> > dplyr recode() ; same message
> > mapvalues() ; it should be atomic, so I used as.atomic(teamq) but then I
> > receive the nummers a strings.
> >
> > *The syntaxes*
> > require(plyr)
> > example2 <- revalue(teamq,
> >                     c("de situatie in zeer geringe mate van toepassing is
> > voor u of uw supervisorengroep"= "1",
> >                         "de situatie in geringe mate van toepassing is
> voor
> > u of uw supervisorengroep"= "2",
> >                         "de situatie enigszins van toepassing is voor u
> of
> > uw supervisorengroep"= "3",
> >                         "de situatie in hoge mate van toepassing is voor
> u
> > of uw supervisorengroep"= "4",
> >                         "de situatie in zeer hoge mate van toepassing is
> > voor u of uw supervisorengroep"= "5"))
> >
> > require(dplyr)
> > example2 <- recode(teamq,
> >                     c("de situatie in zeer geringe mate van toepassing is
> > voor u of uw supervisorengroep"= "1",
> >                       "de situatie in geringe mate van toepassing is
> voor u
> > of uw supervisorengroep"= "2",
> >                       "de situatie enigszins van toepassing is voor u of
> uw
> > supervisorengroep"= "3",
> >                       "de situatie in hoge mate van toepassing is voor u
> of
> > uw supervisorengroep"= "4",
> >                       "de situatie in zeer hoge mate van toepassing is
> voor
> > u of uw supervisorengroep"= "5"))
> >
> > mapvalues(as.matrix(teamq), from = c("de situatie in zeer geringe mate
> van
> > toepassing is voor u of uw supervisorengroep",
> >                         "de situatie in geringe mate van toepassing is
> voor
> > u of uw supervisorengroep",
> >                         "de situatie enigszins van toepassing is voor u
> of
> > uw supervisorengroep",
> >                         "de situatie in hoge mate van toepassing is voor
> u
> > of uw supervisorengroep",
> >                         "de situatie in zeer hoge mate van toepassing is
> > voor u of uw supervisorengroep"),
> >           to = c(1,2,3,4,5))
> >
> > What should I do?
> > Thank you in advance, Roberto
> >
> > Op ma 22 okt. 2018 om 17:13 schreef David L Carlson <dcarlson at tamu.edu>:
> >
> >> Your example is not reproducible since you did not give us some sample
> >> data. I suspect that your data frame consists of columns that represent
> >> questions and rows that represent individuals who answered the
> questions.
> >> First create a simple example:
> >>
> >> set.seed(42)
> >> teamq <- data.frame(V1=sample(c(1, 2, 4, 5), 25, replace = TRUE),
> >>      V2=sample(c(1, 2, 3, 4, 5), 25, replace=TRUE),
> >>      V3=sample(c(2, 3, 4, 5), 25, replace=TRUE))
> >>
> >> Notice that this data frame ONLY contains questions (and only 3
> >> questions). Here are 2 ways to get what you want. The first one stacks
> the
> >> data:
> >>
> >> teamq.stack <- stack(teamq)
> >> str(teamq.stack)
> >> counts <- table(teamq.stack)
> >> str(counts)
> >>
> >> The second one converts each column to a factor with levels 1 - 5:
> >>
> >> teamq2 <- data.frame(lapply(teamq, factor, levels=1:5))
> >> str(teamq2)
> >> counts <- sapply(teamq2, table)
> >> str(counts)
> >>
> >> Now make the plots:
> >>
> >> cols <- c("yellow","sandybrown","orange", "darkolivegreen","green")
> >> barplot(counts[, 1], horiz=TRUE, col=cols, legend=TRUE)
> >> barplot(counts[, 2], horiz=TRUE, col=cols, legend=TRUE)
> >> barplot(counts[, 3], horiz=TRUE, col=cols, legend=TRUE)
> >>
> >> You will need to adjust the xlim= argument so that the legend does not
> >> print on top of the bars.
> >>
> >> ----------------------------------------
> >> David L Carlson
> >> Department of Anthropology
> >> Texas A&M University
> >> College Station, TX 77843-4352
> >>
> >>
> >> -----Original Message-----
> >> From: R-help <r-help-bounces at r-project.org> On Behalf Of P. Roberto
> Bakker
> >> Sent: Monday, October 22, 2018 9:04 AM
> >> To: R mailing list <r-help at r-project.org>
> >> Subject: [R] Different stack barplots - same color legends
> >>
> >> Hi,
> >>
> >> I want to make barplots from different questions (columns) in one
> >> data.frame.
> >> Each question has the same 5 likert items.
> >> Now the problem: in some questions all items are answered; in other
> less.
> >> From the syntax below I get nice stack barplots - *but the legend
> colors do
> >> not* refer to the same likert-item, which I understand - the colors go
> in
> >> sequence along the table.
> >> Question: how can I write a syntax that each likert-item has the same
> >> legend color?
> >> Thank you in advance,
> >>
> >> Roberto
> >>
> >> SYNTAX:
> >> counts19 <- table(teamq[,19])
> >> counts20 <- table(teamq[,20])
> >> barplot(as.matrix(counts19), horiz = T,
> >>         col=c("yellow","sandybrown","orange", "darkolivegreen","green"),
> >> legend=T)
> >> barplot(as.matrix(counts20), horiz = T,
> >>         col=c("yellow","sandybrown","orange", "darkolivegreen","green"),
> >> legend=T)
> >>
> >>         [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >>
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From rmh @end|ng |rom temp|e@edu  Wed Oct 31 14:27:26 2018
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Wed, 31 Oct 2018 09:27:26 -0400
Subject: [R] Different stack barplots - same color legends
In-Reply-To: <CAKDq9_Oi0HGNV7qLnmi4HgVr7orF_gpC7Sys8mLKAxMfjHVtvQ@mail.gmail.com>
References: <CAKDq9_N16xaeL4O2j=v2bVuMb=tuHfu0Ao+yuLQcEq6B-ngq1A@mail.gmail.com>
 <af9001d319ac4992b0bfc5526150f03b@tamu.edu>
 <CAKDq9_P8hQEHWFH=c_86bG81fU0GS+EUCOmtZ9gJa_7kY-2uhA@mail.gmail.com>
 <CAGx1TMAYybconxY7ZVVJcdiYW6+WOjr_D+=GHOA=Xxv2AWRCqQ@mail.gmail.com>
 <CAKDq9_Oi0HGNV7qLnmi4HgVr7orF_gpC7Sys8mLKAxMfjHVtvQ@mail.gmail.com>
Message-ID: <CAGx1TMB+=RnNeoBmzF=_-gxZ2bzaabExs2Gf-8dKE2vAcpiHpA@mail.gmail.com>

Please send me the
dput(teamq)


On Wed, Oct 31, 2018 at 03:51 P. Roberto Bakker <robertobakker at gmail.com>
wrote:

> Thank you for you information. Package 'HH' is interesting.
>
> Now I find another problem when using 'likert(teamq)'
> I get an error message:
> > likert(teamq)
> Error in dimnames(x) <- `*vtmp*` :
>   length of 'dimnames' [2] not equal to array extent
>
> I checked:
> > dim(teamq)
> [1] 4 2
> > ncol(teamq)
> [1] 2
> So it should be good.
>
> I used 'make.names' , in case the spaces in the variable names would be a
> problem.
> Same error.
>
> What could I do?
>
> Best and thank you in advance.
> Roberto
>
>
> Op ma 22 okt. 2018 om 20:10 schreef Richard M. Heiberger <rmh at temple.edu>:
>
>> Try the likert function in
>> install.packages("HH) ## if necessary
>> library(HH)
>>
>> Then using David Carlson's example teamq
>> likert(teamq)
>>
>> Your example in the 1:30PM (Eastern Daylight Time) doesn't work.
>> Error in revalue(teamq, c(`de situatie in zeer geringe mate van
>> toepassing is\nvoor u of uw supervisorengroep` = "1",  :
>>   x is not a factor or a character vector.
>>
>> There are many examples in
>> ?likert
>>
>> Rich
>>
>>
>> On Mon, Oct 22, 2018 at 1:30 PM, P. Roberto Bakker
>> <robertobakker at gmail.com> wrote:
>> > Dear David,
>> >
>> > Thank you for you quite response.
>> > My apologies for not giving some sample data - this is due to AVG.
>> > *But this minisample should not be a problem (all in Dutch)*:
>> >  teamq
>> > # A tibble: 4 x 2
>> >   `Ik volg bijscholing om mijn opleiders-kwaliteiten op peil te houden`
>> >
>> >   <chr>
>> >
>> > 1 de situatie in hoge mate van toepassing is voor u of uw
>> > supervisorengroep
>> > 2 de situatie in zeer hoge mate van toepassing is voor u of uw
>> > supervisorengroep
>> > 3 de situatie in zeer hoge mate van toepassing is voor u of uw
>> > supervisorengroep
>> > 4 de situatie in geringe mate van toepassing is voor u of uw
>> > supervisorengroep
>> >   `Ik weet precies wat de ?modernisering van de opleiding? inhoudt`
>> >
>> >   <chr>
>> >
>> > 1 de situatie in hoge mate van toepassing is voor u of uw
>> > supervisorengroep
>> > 2 de situatie in zeer hoge mate van toepassing is voor u of uw
>> > supervisorengroep
>> > 3 de situatie in zeer hoge mate van toepassing is voor u of uw
>> > supervisorengroep
>> > 4 de situatie in geringe mate van toepassing is voor u of uw
>> > supervisorengroep
>> >
>> > As you see the likert items are in words, and I should change them in
>> > nummeric - Am I correct?
>> >
>> > *To do this, I tried (see further below):*
>> > plyr rename() ; I receive the message it should be a factor or character
>> > dplyr recode() ; same message
>> > mapvalues() ; it should be atomic, so I used as.atomic(teamq) but then I
>> > receive the nummers a strings.
>> >
>> > *The syntaxes*
>> > require(plyr)
>> > example2 <- revalue(teamq,
>> >                     c("de situatie in zeer geringe mate van toepassing
>> is
>> > voor u of uw supervisorengroep"= "1",
>> >                         "de situatie in geringe mate van toepassing is
>> voor
>> > u of uw supervisorengroep"= "2",
>> >                         "de situatie enigszins van toepassing is voor u
>> of
>> > uw supervisorengroep"= "3",
>> >                         "de situatie in hoge mate van toepassing is
>> voor u
>> > of uw supervisorengroep"= "4",
>> >                         "de situatie in zeer hoge mate van toepassing is
>> > voor u of uw supervisorengroep"= "5"))
>> >
>> > require(dplyr)
>> > example2 <- recode(teamq,
>> >                     c("de situatie in zeer geringe mate van toepassing
>> is
>> > voor u of uw supervisorengroep"= "1",
>> >                       "de situatie in geringe mate van toepassing is
>> voor u
>> > of uw supervisorengroep"= "2",
>> >                       "de situatie enigszins van toepassing is voor u
>> of uw
>> > supervisorengroep"= "3",
>> >                       "de situatie in hoge mate van toepassing is voor
>> u of
>> > uw supervisorengroep"= "4",
>> >                       "de situatie in zeer hoge mate van toepassing is
>> voor
>> > u of uw supervisorengroep"= "5"))
>> >
>> > mapvalues(as.matrix(teamq), from = c("de situatie in zeer geringe mate
>> van
>> > toepassing is voor u of uw supervisorengroep",
>> >                         "de situatie in geringe mate van toepassing is
>> voor
>> > u of uw supervisorengroep",
>> >                         "de situatie enigszins van toepassing is voor u
>> of
>> > uw supervisorengroep",
>> >                         "de situatie in hoge mate van toepassing is
>> voor u
>> > of uw supervisorengroep",
>> >                         "de situatie in zeer hoge mate van toepassing is
>> > voor u of uw supervisorengroep"),
>> >           to = c(1,2,3,4,5))
>> >
>> > What should I do?
>> > Thank you in advance, Roberto
>> >
>> > Op ma 22 okt. 2018 om 17:13 schreef David L Carlson <dcarlson at tamu.edu
>> >:
>> >
>> >> Your example is not reproducible since you did not give us some sample
>> >> data. I suspect that your data frame consists of columns that represent
>> >> questions and rows that represent individuals who answered the
>> questions.
>> >> First create a simple example:
>> >>
>> >> set.seed(42)
>> >> teamq <- data.frame(V1=sample(c(1, 2, 4, 5), 25, replace = TRUE),
>> >>      V2=sample(c(1, 2, 3, 4, 5), 25, replace=TRUE),
>> >>      V3=sample(c(2, 3, 4, 5), 25, replace=TRUE))
>> >>
>> >> Notice that this data frame ONLY contains questions (and only 3
>> >> questions). Here are 2 ways to get what you want. The first one stacks
>> the
>> >> data:
>> >>
>> >> teamq.stack <- stack(teamq)
>> >> str(teamq.stack)
>> >> counts <- table(teamq.stack)
>> >> str(counts)
>> >>
>> >> The second one converts each column to a factor with levels 1 - 5:
>> >>
>> >> teamq2 <- data.frame(lapply(teamq, factor, levels=1:5))
>> >> str(teamq2)
>> >> counts <- sapply(teamq2, table)
>> >> str(counts)
>> >>
>> >> Now make the plots:
>> >>
>> >> cols <- c("yellow","sandybrown","orange", "darkolivegreen","green")
>> >> barplot(counts[, 1], horiz=TRUE, col=cols, legend=TRUE)
>> >> barplot(counts[, 2], horiz=TRUE, col=cols, legend=TRUE)
>> >> barplot(counts[, 3], horiz=TRUE, col=cols, legend=TRUE)
>> >>
>> >> You will need to adjust the xlim= argument so that the legend does not
>> >> print on top of the bars.
>> >>
>> >> ----------------------------------------
>> >> David L Carlson
>> >> Department of Anthropology
>> >> Texas A&M University
>> >> College Station, TX 77843-4352
>> >>
>> >>
>> >> -----Original Message-----
>> >> From: R-help <r-help-bounces at r-project.org> On Behalf Of P. Roberto
>> Bakker
>> >> Sent: Monday, October 22, 2018 9:04 AM
>> >> To: R mailing list <r-help at r-project.org>
>> >> Subject: [R] Different stack barplots - same color legends
>> >>
>> >> Hi,
>> >>
>> >> I want to make barplots from different questions (columns) in one
>> >> data.frame.
>> >> Each question has the same 5 likert items.
>> >> Now the problem: in some questions all items are answered; in other
>> less.
>> >> From the syntax below I get nice stack barplots - *but the legend
>> colors do
>> >> not* refer to the same likert-item, which I understand - the colors go
>> in
>> >> sequence along the table.
>> >> Question: how can I write a syntax that each likert-item has the same
>> >> legend color?
>> >> Thank you in advance,
>> >>
>> >> Roberto
>> >>
>> >> SYNTAX:
>> >> counts19 <- table(teamq[,19])
>> >> counts20 <- table(teamq[,20])
>> >> barplot(as.matrix(counts19), horiz = T,
>> >>         col=c("yellow","sandybrown","orange",
>> "darkolivegreen","green"),
>> >> legend=T)
>> >> barplot(as.matrix(counts20), horiz = T,
>> >>         col=c("yellow","sandybrown","orange",
>> "darkolivegreen","green"),
>> >> legend=T)
>> >>
>> >>         [[alternative HTML version deleted]]
>> >>
>> >> ______________________________________________
>> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> >> https://stat.ethz.ch/mailman/listinfo/r-help
>> >> PLEASE do read the posting guide
>> >> http://www.R-project.org/posting-guide.html
>> >> and provide commented, minimal, self-contained, reproducible code.
>> >>
>> >
>> >         [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]



From robertob@kker @end|ng |rom gm@||@com  Wed Oct 31 16:15:55 2018
From: robertob@kker @end|ng |rom gm@||@com (P. Roberto Bakker)
Date: Wed, 31 Oct 2018 16:15:55 +0100
Subject: [R] Different stack barplots - same color legends
In-Reply-To: <CAGx1TMB+=RnNeoBmzF=_-gxZ2bzaabExs2Gf-8dKE2vAcpiHpA@mail.gmail.com>
References: <CAKDq9_N16xaeL4O2j=v2bVuMb=tuHfu0Ao+yuLQcEq6B-ngq1A@mail.gmail.com>
 <af9001d319ac4992b0bfc5526150f03b@tamu.edu>
 <CAKDq9_P8hQEHWFH=c_86bG81fU0GS+EUCOmtZ9gJa_7kY-2uhA@mail.gmail.com>
 <CAGx1TMAYybconxY7ZVVJcdiYW6+WOjr_D+=GHOA=Xxv2AWRCqQ@mail.gmail.com>
 <CAKDq9_Oi0HGNV7qLnmi4HgVr7orF_gpC7Sys8mLKAxMfjHVtvQ@mail.gmail.com>
 <CAGx1TMB+=RnNeoBmzF=_-gxZ2bzaabExs2Gf-8dKE2vAcpiHpA@mail.gmail.com>
Message-ID: <CAKDq9_P3GfHXbFbChQwrDUm=E+RuuWGP89tf_KPFXRjYAsrA+A@mail.gmail.com>

It is a very long result text. I can send it to you, or is part of it ok?[

Op wo 31 okt. 2018 om 14:27 schreef Richard M. Heiberger <rmh at temple.edu>:

> Please send me the
> dput(teamq)
>
>
> On Wed, Oct 31, 2018 at 03:51 P. Roberto Bakker <robertobakker at gmail.com>
> wrote:
>
>> Thank you for you information. Package 'HH' is interesting.
>>
>> Now I find another problem when using 'likert(teamq)'
>> I get an error message:
>> > likert(teamq)
>> Error in dimnames(x) <- `*vtmp*` :
>>   length of 'dimnames' [2] not equal to array extent
>>
>> I checked:
>> > dim(teamq)
>> [1] 4 2
>> > ncol(teamq)
>> [1] 2
>> So it should be good.
>>
>> I used 'make.names' , in case the spaces in the variable names would be a
>> problem.
>> Same error.
>>
>> What could I do?
>>
>> Best and thank you in advance.
>> Roberto
>>
>>
>> Op ma 22 okt. 2018 om 20:10 schreef Richard M. Heiberger <rmh at temple.edu
>> >:
>>
>>> Try the likert function in
>>> install.packages("HH) ## if necessary
>>> library(HH)
>>>
>>> Then using David Carlson's example teamq
>>> likert(teamq)
>>>
>>> Your example in the 1:30PM (Eastern Daylight Time) doesn't work.
>>> Error in revalue(teamq, c(`de situatie in zeer geringe mate van
>>> toepassing is\nvoor u of uw supervisorengroep` = "1",  :
>>>   x is not a factor or a character vector.
>>>
>>> There are many examples in
>>> ?likert
>>>
>>> Rich
>>>
>>>
>>> On Mon, Oct 22, 2018 at 1:30 PM, P. Roberto Bakker
>>> <robertobakker at gmail.com> wrote:
>>> > Dear David,
>>> >
>>> > Thank you for you quite response.
>>> > My apologies for not giving some sample data - this is due to AVG.
>>> > *But this minisample should not be a problem (all in Dutch)*:
>>> >  teamq
>>> > # A tibble: 4 x 2
>>> >   `Ik volg bijscholing om mijn opleiders-kwaliteiten op peil te houden`
>>> >
>>> >   <chr>
>>> >
>>> > 1 de situatie in hoge mate van toepassing is voor u of uw
>>> > supervisorengroep
>>> > 2 de situatie in zeer hoge mate van toepassing is voor u of uw
>>> > supervisorengroep
>>> > 3 de situatie in zeer hoge mate van toepassing is voor u of uw
>>> > supervisorengroep
>>> > 4 de situatie in geringe mate van toepassing is voor u of uw
>>> > supervisorengroep
>>> >   `Ik weet precies wat de ?modernisering van de opleiding? inhoudt`
>>> >
>>> >   <chr>
>>> >
>>> > 1 de situatie in hoge mate van toepassing is voor u of uw
>>> > supervisorengroep
>>> > 2 de situatie in zeer hoge mate van toepassing is voor u of uw
>>> > supervisorengroep
>>> > 3 de situatie in zeer hoge mate van toepassing is voor u of uw
>>> > supervisorengroep
>>> > 4 de situatie in geringe mate van toepassing is voor u of uw
>>> > supervisorengroep
>>> >
>>> > As you see the likert items are in words, and I should change them in
>>> > nummeric - Am I correct?
>>> >
>>> > *To do this, I tried (see further below):*
>>> > plyr rename() ; I receive the message it should be a factor or
>>> character
>>> > dplyr recode() ; same message
>>> > mapvalues() ; it should be atomic, so I used as.atomic(teamq) but then
>>> I
>>> > receive the nummers a strings.
>>> >
>>> > *The syntaxes*
>>> > require(plyr)
>>> > example2 <- revalue(teamq,
>>> >                     c("de situatie in zeer geringe mate van toepassing
>>> is
>>> > voor u of uw supervisorengroep"= "1",
>>> >                         "de situatie in geringe mate van toepassing is
>>> voor
>>> > u of uw supervisorengroep"= "2",
>>> >                         "de situatie enigszins van toepassing is voor
>>> u of
>>> > uw supervisorengroep"= "3",
>>> >                         "de situatie in hoge mate van toepassing is
>>> voor u
>>> > of uw supervisorengroep"= "4",
>>> >                         "de situatie in zeer hoge mate van toepassing
>>> is
>>> > voor u of uw supervisorengroep"= "5"))
>>> >
>>> > require(dplyr)
>>> > example2 <- recode(teamq,
>>> >                     c("de situatie in zeer geringe mate van toepassing
>>> is
>>> > voor u of uw supervisorengroep"= "1",
>>> >                       "de situatie in geringe mate van toepassing is
>>> voor u
>>> > of uw supervisorengroep"= "2",
>>> >                       "de situatie enigszins van toepassing is voor u
>>> of uw
>>> > supervisorengroep"= "3",
>>> >                       "de situatie in hoge mate van toepassing is voor
>>> u of
>>> > uw supervisorengroep"= "4",
>>> >                       "de situatie in zeer hoge mate van toepassing is
>>> voor
>>> > u of uw supervisorengroep"= "5"))
>>> >
>>> > mapvalues(as.matrix(teamq), from = c("de situatie in zeer geringe mate
>>> van
>>> > toepassing is voor u of uw supervisorengroep",
>>> >                         "de situatie in geringe mate van toepassing is
>>> voor
>>> > u of uw supervisorengroep",
>>> >                         "de situatie enigszins van toepassing is voor
>>> u of
>>> > uw supervisorengroep",
>>> >                         "de situatie in hoge mate van toepassing is
>>> voor u
>>> > of uw supervisorengroep",
>>> >                         "de situatie in zeer hoge mate van toepassing
>>> is
>>> > voor u of uw supervisorengroep"),
>>> >           to = c(1,2,3,4,5))
>>> >
>>> > What should I do?
>>> > Thank you in advance, Roberto
>>> >
>>> > Op ma 22 okt. 2018 om 17:13 schreef David L Carlson <dcarlson at tamu.edu
>>> >:
>>> >
>>> >> Your example is not reproducible since you did not give us some sample
>>> >> data. I suspect that your data frame consists of columns that
>>> represent
>>> >> questions and rows that represent individuals who answered the
>>> questions.
>>> >> First create a simple example:
>>> >>
>>> >> set.seed(42)
>>> >> teamq <- data.frame(V1=sample(c(1, 2, 4, 5), 25, replace = TRUE),
>>> >>      V2=sample(c(1, 2, 3, 4, 5), 25, replace=TRUE),
>>> >>      V3=sample(c(2, 3, 4, 5), 25, replace=TRUE))
>>> >>
>>> >> Notice that this data frame ONLY contains questions (and only 3
>>> >> questions). Here are 2 ways to get what you want. The first one
>>> stacks the
>>> >> data:
>>> >>
>>> >> teamq.stack <- stack(teamq)
>>> >> str(teamq.stack)
>>> >> counts <- table(teamq.stack)
>>> >> str(counts)
>>> >>
>>> >> The second one converts each column to a factor with levels 1 - 5:
>>> >>
>>> >> teamq2 <- data.frame(lapply(teamq, factor, levels=1:5))
>>> >> str(teamq2)
>>> >> counts <- sapply(teamq2, table)
>>> >> str(counts)
>>> >>
>>> >> Now make the plots:
>>> >>
>>> >> cols <- c("yellow","sandybrown","orange", "darkolivegreen","green")
>>> >> barplot(counts[, 1], horiz=TRUE, col=cols, legend=TRUE)
>>> >> barplot(counts[, 2], horiz=TRUE, col=cols, legend=TRUE)
>>> >> barplot(counts[, 3], horiz=TRUE, col=cols, legend=TRUE)
>>> >>
>>> >> You will need to adjust the xlim= argument so that the legend does not
>>> >> print on top of the bars.
>>> >>
>>> >> ----------------------------------------
>>> >> David L Carlson
>>> >> Department of Anthropology
>>> >> Texas A&M University
>>> >> College Station, TX 77843-4352
>>> >>
>>> >>
>>> >> -----Original Message-----
>>> >> From: R-help <r-help-bounces at r-project.org> On Behalf Of P. Roberto
>>> Bakker
>>> >> Sent: Monday, October 22, 2018 9:04 AM
>>> >> To: R mailing list <r-help at r-project.org>
>>> >> Subject: [R] Different stack barplots - same color legends
>>> >>
>>> >> Hi,
>>> >>
>>> >> I want to make barplots from different questions (columns) in one
>>> >> data.frame.
>>> >> Each question has the same 5 likert items.
>>> >> Now the problem: in some questions all items are answered; in other
>>> less.
>>> >> From the syntax below I get nice stack barplots - *but the legend
>>> colors do
>>> >> not* refer to the same likert-item, which I understand - the colors
>>> go in
>>> >> sequence along the table.
>>> >> Question: how can I write a syntax that each likert-item has the same
>>> >> legend color?
>>> >> Thank you in advance,
>>> >>
>>> >> Roberto
>>> >>
>>> >> SYNTAX:
>>> >> counts19 <- table(teamq[,19])
>>> >> counts20 <- table(teamq[,20])
>>> >> barplot(as.matrix(counts19), horiz = T,
>>> >>         col=c("yellow","sandybrown","orange",
>>> "darkolivegreen","green"),
>>> >> legend=T)
>>> >> barplot(as.matrix(counts20), horiz = T,
>>> >>         col=c("yellow","sandybrown","orange",
>>> "darkolivegreen","green"),
>>> >> legend=T)
>>> >>
>>> >>         [[alternative HTML version deleted]]
>>> >>
>>> >> ______________________________________________
>>> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> >> https://stat.ethz.ch/mailman/listinfo/r-help
>>> >> PLEASE do read the posting guide
>>> >> http://www.R-project.org/posting-guide.html
>>> >> and provide commented, minimal, self-contained, reproducible code.
>>> >>
>>> >
>>> >         [[alternative HTML version deleted]]
>>> >
>>> > ______________________________________________
>>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> > https://stat.ethz.ch/mailman/listinfo/r-help
>>> > PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> > and provide commented, minimal, self-contained, reproducible code.
>>>
>>

	[[alternative HTML version deleted]]



From rmh @end|ng |rom temp|e@edu  Wed Oct 31 16:24:06 2018
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Wed, 31 Oct 2018 11:24:06 -0400
Subject: [R] Different stack barplots - same color legends
In-Reply-To: <CAKDq9_P3GfHXbFbChQwrDUm=E+RuuWGP89tf_KPFXRjYAsrA+A@mail.gmail.com>
References: <CAKDq9_N16xaeL4O2j=v2bVuMb=tuHfu0Ao+yuLQcEq6B-ngq1A@mail.gmail.com>
 <af9001d319ac4992b0bfc5526150f03b@tamu.edu>
 <CAKDq9_P8hQEHWFH=c_86bG81fU0GS+EUCOmtZ9gJa_7kY-2uhA@mail.gmail.com>
 <CAGx1TMAYybconxY7ZVVJcdiYW6+WOjr_D+=GHOA=Xxv2AWRCqQ@mail.gmail.com>
 <CAKDq9_Oi0HGNV7qLnmi4HgVr7orF_gpC7Sys8mLKAxMfjHVtvQ@mail.gmail.com>
 <CAGx1TMB+=RnNeoBmzF=_-gxZ2bzaabExs2Gf-8dKE2vAcpiHpA@mail.gmail.com>
 <CAKDq9_P3GfHXbFbChQwrDUm=E+RuuWGP89tf_KPFXRjYAsrA+A@mail.gmail.com>
Message-ID: <CAGx1TMByCiZvwOPm06qo4bssWjh=UP9ZPvkX5zi+6dNE=wggaA@mail.gmail.com>

part is fine.  just be sure that the small part causes the problem.
I will need that to investigate what is happening.


On Wed, Oct 31, 2018 at 11:15 AM, P. Roberto Bakker
<robertobakker at gmail.com> wrote:
> It is a very long result text. I can send it to you, or is part of it ok?[
>
> Op wo 31 okt. 2018 om 14:27 schreef Richard M. Heiberger <rmh at temple.edu>:
>>
>> Please send me the
>> dput(teamq)
>>
>>
>> On Wed, Oct 31, 2018 at 03:51 P. Roberto Bakker <robertobakker at gmail.com>
>> wrote:
>>>
>>> Thank you for you information. Package 'HH' is interesting.
>>>
>>> Now I find another problem when using 'likert(teamq)'
>>> I get an error message:
>>> > likert(teamq)
>>> Error in dimnames(x) <- `*vtmp*` :
>>>   length of 'dimnames' [2] not equal to array extent
>>>
>>> I checked:
>>> > dim(teamq)
>>> [1] 4 2
>>> > ncol(teamq)
>>> [1] 2
>>> So it should be good.
>>>
>>> I used 'make.names' , in case the spaces in the variable names would be a
>>> problem.
>>> Same error.
>>>
>>> What could I do?
>>>
>>> Best and thank you in advance.
>>> Roberto
>>>
>>>
>>> Op ma 22 okt. 2018 om 20:10 schreef Richard M. Heiberger
>>> <rmh at temple.edu>:
>>>>
>>>> Try the likert function in
>>>> install.packages("HH) ## if necessary
>>>> library(HH)
>>>>
>>>> Then using David Carlson's example teamq
>>>> likert(teamq)
>>>>
>>>> Your example in the 1:30PM (Eastern Daylight Time) doesn't work.
>>>> Error in revalue(teamq, c(`de situatie in zeer geringe mate van
>>>> toepassing is\nvoor u of uw supervisorengroep` = "1",  :
>>>>   x is not a factor or a character vector.
>>>>
>>>> There are many examples in
>>>> ?likert
>>>>
>>>> Rich
>>>>
>>>>
>>>> On Mon, Oct 22, 2018 at 1:30 PM, P. Roberto Bakker
>>>> <robertobakker at gmail.com> wrote:
>>>> > Dear David,
>>>> >
>>>> > Thank you for you quite response.
>>>> > My apologies for not giving some sample data - this is due to AVG.
>>>> > *But this minisample should not be a problem (all in Dutch)*:
>>>> >  teamq
>>>> > # A tibble: 4 x 2
>>>> >   `Ik volg bijscholing om mijn opleiders-kwaliteiten op peil te
>>>> > houden`
>>>> >
>>>> >   <chr>
>>>> >
>>>> > 1 de situatie in hoge mate van toepassing is voor u of uw
>>>> > supervisorengroep
>>>> > 2 de situatie in zeer hoge mate van toepassing is voor u of uw
>>>> > supervisorengroep
>>>> > 3 de situatie in zeer hoge mate van toepassing is voor u of uw
>>>> > supervisorengroep
>>>> > 4 de situatie in geringe mate van toepassing is voor u of uw
>>>> > supervisorengroep
>>>> >   `Ik weet precies wat de ?modernisering van de opleiding? inhoudt`
>>>> >
>>>> >   <chr>
>>>> >
>>>> > 1 de situatie in hoge mate van toepassing is voor u of uw
>>>> > supervisorengroep
>>>> > 2 de situatie in zeer hoge mate van toepassing is voor u of uw
>>>> > supervisorengroep
>>>> > 3 de situatie in zeer hoge mate van toepassing is voor u of uw
>>>> > supervisorengroep
>>>> > 4 de situatie in geringe mate van toepassing is voor u of uw
>>>> > supervisorengroep
>>>> >
>>>> > As you see the likert items are in words, and I should change them in
>>>> > nummeric - Am I correct?
>>>> >
>>>> > *To do this, I tried (see further below):*
>>>> > plyr rename() ; I receive the message it should be a factor or
>>>> > character
>>>> > dplyr recode() ; same message
>>>> > mapvalues() ; it should be atomic, so I used as.atomic(teamq) but then
>>>> > I
>>>> > receive the nummers a strings.
>>>> >
>>>> > *The syntaxes*
>>>> > require(plyr)
>>>> > example2 <- revalue(teamq,
>>>> >                     c("de situatie in zeer geringe mate van toepassing
>>>> > is
>>>> > voor u of uw supervisorengroep"= "1",
>>>> >                         "de situatie in geringe mate van toepassing is
>>>> > voor
>>>> > u of uw supervisorengroep"= "2",
>>>> >                         "de situatie enigszins van toepassing is voor
>>>> > u of
>>>> > uw supervisorengroep"= "3",
>>>> >                         "de situatie in hoge mate van toepassing is
>>>> > voor u
>>>> > of uw supervisorengroep"= "4",
>>>> >                         "de situatie in zeer hoge mate van toepassing
>>>> > is
>>>> > voor u of uw supervisorengroep"= "5"))
>>>> >
>>>> > require(dplyr)
>>>> > example2 <- recode(teamq,
>>>> >                     c("de situatie in zeer geringe mate van toepassing
>>>> > is
>>>> > voor u of uw supervisorengroep"= "1",
>>>> >                       "de situatie in geringe mate van toepassing is
>>>> > voor u
>>>> > of uw supervisorengroep"= "2",
>>>> >                       "de situatie enigszins van toepassing is voor u
>>>> > of uw
>>>> > supervisorengroep"= "3",
>>>> >                       "de situatie in hoge mate van toepassing is voor
>>>> > u of
>>>> > uw supervisorengroep"= "4",
>>>> >                       "de situatie in zeer hoge mate van toepassing is
>>>> > voor
>>>> > u of uw supervisorengroep"= "5"))
>>>> >
>>>> > mapvalues(as.matrix(teamq), from = c("de situatie in zeer geringe mate
>>>> > van
>>>> > toepassing is voor u of uw supervisorengroep",
>>>> >                         "de situatie in geringe mate van toepassing is
>>>> > voor
>>>> > u of uw supervisorengroep",
>>>> >                         "de situatie enigszins van toepassing is voor
>>>> > u of
>>>> > uw supervisorengroep",
>>>> >                         "de situatie in hoge mate van toepassing is
>>>> > voor u
>>>> > of uw supervisorengroep",
>>>> >                         "de situatie in zeer hoge mate van toepassing
>>>> > is
>>>> > voor u of uw supervisorengroep"),
>>>> >           to = c(1,2,3,4,5))
>>>> >
>>>> > What should I do?
>>>> > Thank you in advance, Roberto
>>>> >
>>>> > Op ma 22 okt. 2018 om 17:13 schreef David L Carlson
>>>> > <dcarlson at tamu.edu>:
>>>> >
>>>> >> Your example is not reproducible since you did not give us some
>>>> >> sample
>>>> >> data. I suspect that your data frame consists of columns that
>>>> >> represent
>>>> >> questions and rows that represent individuals who answered the
>>>> >> questions.
>>>> >> First create a simple example:
>>>> >>
>>>> >> set.seed(42)
>>>> >> teamq <- data.frame(V1=sample(c(1, 2, 4, 5), 25, replace = TRUE),
>>>> >>      V2=sample(c(1, 2, 3, 4, 5), 25, replace=TRUE),
>>>> >>      V3=sample(c(2, 3, 4, 5), 25, replace=TRUE))
>>>> >>
>>>> >> Notice that this data frame ONLY contains questions (and only 3
>>>> >> questions). Here are 2 ways to get what you want. The first one
>>>> >> stacks the
>>>> >> data:
>>>> >>
>>>> >> teamq.stack <- stack(teamq)
>>>> >> str(teamq.stack)
>>>> >> counts <- table(teamq.stack)
>>>> >> str(counts)
>>>> >>
>>>> >> The second one converts each column to a factor with levels 1 - 5:
>>>> >>
>>>> >> teamq2 <- data.frame(lapply(teamq, factor, levels=1:5))
>>>> >> str(teamq2)
>>>> >> counts <- sapply(teamq2, table)
>>>> >> str(counts)
>>>> >>
>>>> >> Now make the plots:
>>>> >>
>>>> >> cols <- c("yellow","sandybrown","orange", "darkolivegreen","green")
>>>> >> barplot(counts[, 1], horiz=TRUE, col=cols, legend=TRUE)
>>>> >> barplot(counts[, 2], horiz=TRUE, col=cols, legend=TRUE)
>>>> >> barplot(counts[, 3], horiz=TRUE, col=cols, legend=TRUE)
>>>> >>
>>>> >> You will need to adjust the xlim= argument so that the legend does
>>>> >> not
>>>> >> print on top of the bars.
>>>> >>
>>>> >> ----------------------------------------
>>>> >> David L Carlson
>>>> >> Department of Anthropology
>>>> >> Texas A&M University
>>>> >> College Station, TX 77843-4352
>>>> >>
>>>> >>
>>>> >> -----Original Message-----
>>>> >> From: R-help <r-help-bounces at r-project.org> On Behalf Of P. Roberto
>>>> >> Bakker
>>>> >> Sent: Monday, October 22, 2018 9:04 AM
>>>> >> To: R mailing list <r-help at r-project.org>
>>>> >> Subject: [R] Different stack barplots - same color legends
>>>> >>
>>>> >> Hi,
>>>> >>
>>>> >> I want to make barplots from different questions (columns) in one
>>>> >> data.frame.
>>>> >> Each question has the same 5 likert items.
>>>> >> Now the problem: in some questions all items are answered; in other
>>>> >> less.
>>>> >> From the syntax below I get nice stack barplots - *but the legend
>>>> >> colors do
>>>> >> not* refer to the same likert-item, which I understand - the colors
>>>> >> go in
>>>> >> sequence along the table.
>>>> >> Question: how can I write a syntax that each likert-item has the same
>>>> >> legend color?
>>>> >> Thank you in advance,
>>>> >>
>>>> >> Roberto
>>>> >>
>>>> >> SYNTAX:
>>>> >> counts19 <- table(teamq[,19])
>>>> >> counts20 <- table(teamq[,20])
>>>> >> barplot(as.matrix(counts19), horiz = T,
>>>> >>         col=c("yellow","sandybrown","orange",
>>>> >> "darkolivegreen","green"),
>>>> >> legend=T)
>>>> >> barplot(as.matrix(counts20), horiz = T,
>>>> >>         col=c("yellow","sandybrown","orange",
>>>> >> "darkolivegreen","green"),
>>>> >> legend=T)
>>>> >>
>>>> >>         [[alternative HTML version deleted]]
>>>> >>
>>>> >> ______________________________________________
>>>> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> >> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> >> PLEASE do read the posting guide
>>>> >> http://www.R-project.org/posting-guide.html
>>>> >> and provide commented, minimal, self-contained, reproducible code.
>>>> >>
>>>> >
>>>> >         [[alternative HTML version deleted]]
>>>> >
>>>> > ______________________________________________
>>>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> > https://stat.ethz.ch/mailman/listinfo/r-help
>>>> > PLEASE do read the posting guide
>>>> > http://www.R-project.org/posting-guide.html
>>>> > and provide commented, minimal, self-contained, reproducible code.



From r-@ub@cr|be @end|ng |rom m@||@ru  Wed Oct 31 16:34:40 2018
From: r-@ub@cr|be @end|ng |rom m@||@ru (=?UTF-8?B?TWVkaWM=?=)
Date: Wed, 31 Oct 2018 18:34:40 +0300
Subject: [R] =?utf-8?q?survival_analysis_question?=
Message-ID: <1541000080.817310464@f419.i.mail.ru>


When I run the code from the book Kleinbaum "Survival analysis" (7. Running an extended cox model. Page 646) I got an ERROR. What do you think is the reason? I attach a file with few lines of dataset "addicts-dput.r".
> library(cmprsk)
> addicts = read.csv ("addicts.csv")?
? ?id clinic status survt prison dose
1 ?1 ? ? ?1 ? ? ?1 ? 428 ? ? ?0 ? 50
2 ?2 ? ? ?1 ? ? ?1 ? 275 ? ? ?1 ? 55
3 ?3 ? ? ?1 ? ? ?1 ? 262 ? ? ?0 ? 55
4 ?4 ? ? ?1 ? ? ?1 ? 183 ? ? ?0 ? 30
5 ?5 ? ? ?1 ? ? ?1 ? 259 ? ? ?1 ? 65
6 ?6 ? ? ?1 ? ? ?1 ? 714 ? ? ?0 ? 55
7 ?7 ? ? ?1 ? ? ?1 ? 438 ? ? ?1 ? 65
8 ?8 ? ? ?1 ? ? ?0 ? 796 ? ? ?1 ? 60
9 ?9 ? ? ?1 ? ? ?1 ? 892 ? ? ?0 ? 50
> addicts.cp=survSplit(addicts, cut=addicts$survt[addicts$status==1], end="survt", event="status",start="start", id="id")
ERROR in survSplit(addicts, cut = addicts$survt[addicts$status == 1],: the suggested id name is already present.




From robertob@kker @end|ng |rom gm@||@com  Wed Oct 31 18:53:51 2018
From: robertob@kker @end|ng |rom gm@||@com (P. Roberto Bakker)
Date: Wed, 31 Oct 2018 18:53:51 +0100
Subject: [R] Different stack barplots - same color legends
In-Reply-To: <CAGx1TMByCiZvwOPm06qo4bssWjh=UP9ZPvkX5zi+6dNE=wggaA@mail.gmail.com>
References: <CAKDq9_N16xaeL4O2j=v2bVuMb=tuHfu0Ao+yuLQcEq6B-ngq1A@mail.gmail.com>
 <af9001d319ac4992b0bfc5526150f03b@tamu.edu>
 <CAKDq9_P8hQEHWFH=c_86bG81fU0GS+EUCOmtZ9gJa_7kY-2uhA@mail.gmail.com>
 <CAGx1TMAYybconxY7ZVVJcdiYW6+WOjr_D+=GHOA=Xxv2AWRCqQ@mail.gmail.com>
 <CAKDq9_Oi0HGNV7qLnmi4HgVr7orF_gpC7Sys8mLKAxMfjHVtvQ@mail.gmail.com>
 <CAGx1TMB+=RnNeoBmzF=_-gxZ2bzaabExs2Gf-8dKE2vAcpiHpA@mail.gmail.com>
 <CAKDq9_P3GfHXbFbChQwrDUm=E+RuuWGP89tf_KPFXRjYAsrA+A@mail.gmail.com>
 <CAGx1TMByCiZvwOPm06qo4bssWjh=UP9ZPvkX5zi+6dNE=wggaA@mail.gmail.com>
Message-ID: <CAKDq9_OkLfiP98cuYUg0BU_+cCXmKi9gKHqxSm+Eu16eC3WWyg@mail.gmail.com>

This is part of the output text

"de situatie in hoge mate van toepassing is voor u of uw
supervisorengroep",
"de situatie in hoge mate van toepassing is voor u of uw
supervisorengroep",
"de situatie enigszins van toepassing is voor u of uw supervisorengroep",
"de situatie in hoge mate van toepassing is voor u of uw supervisorengroep"
), `Ik waardeer de inbreng van de aios in de afdelingsvergadering` = c("de
situatie in hoge mate van toepassing is voor u of uw supervisorengroep",
"de situatie in hoge mate van toepassing is voor u of uw
supervisorengroep",
"de situatie in zeer hoge mate van toepassing is voor u of uw
supervisorengroep",
"de situatie in zeer hoge mate van toepassing is voor u of uw
supervisorengroep",
"de situatie enigszins van toepassing is voor u of uw supervisorengroep",
"de situatie in zeer hoge mate van toepassing is voor u of uw
supervisorengroep",
"de situatie in zeer hoge mate van toepassing is voor u of uw
supervisorengroep",
"de situatie in zeer hoge mate van toepassing is voor u of uw
supervisorengroep",
"de situatie enigszins van toepassing is voor u of uw supervisorengroep",
"de situatie in hoge mate van toepassing is voor u of uw
supervisorengroep",
"de situatie in hoge mate van toepassing is voor u of uw
supervisorengroep",
"de situatie in hoge mate van toepassing is voor u of uw
supervisorengroep",

Op wo 31 okt. 2018 om 16:24 schreef Richard M. Heiberger <rmh at temple.edu>:

> part is fine.  just be sure that the small part causes the problem.
> I will need that to investigate what is happening.
>
>
> On Wed, Oct 31, 2018 at 11:15 AM, P. Roberto Bakker
> <robertobakker at gmail.com> wrote:
> > It is a very long result text. I can send it to you, or is part of it
> ok?[
> >
> > Op wo 31 okt. 2018 om 14:27 schreef Richard M. Heiberger <rmh at temple.edu
> >:
> >>
> >> Please send me the
> >> dput(teamq)
> >>
> >>
> >> On Wed, Oct 31, 2018 at 03:51 P. Roberto Bakker <
> robertobakker at gmail.com>
> >> wrote:
> >>>
> >>> Thank you for you information. Package 'HH' is interesting.
> >>>
> >>> Now I find another problem when using 'likert(teamq)'
> >>> I get an error message:
> >>> > likert(teamq)
> >>> Error in dimnames(x) <- `*vtmp*` :
> >>>   length of 'dimnames' [2] not equal to array extent
> >>>
> >>> I checked:
> >>> > dim(teamq)
> >>> [1] 4 2
> >>> > ncol(teamq)
> >>> [1] 2
> >>> So it should be good.
> >>>
> >>> I used 'make.names' , in case the spaces in the variable names would
> be a
> >>> problem.
> >>> Same error.
> >>>
> >>> What could I do?
> >>>
> >>> Best and thank you in advance.
> >>> Roberto
> >>>
> >>>
> >>> Op ma 22 okt. 2018 om 20:10 schreef Richard M. Heiberger
> >>> <rmh at temple.edu>:
> >>>>
> >>>> Try the likert function in
> >>>> install.packages("HH) ## if necessary
> >>>> library(HH)
> >>>>
> >>>> Then using David Carlson's example teamq
> >>>> likert(teamq)
> >>>>
> >>>> Your example in the 1:30PM (Eastern Daylight Time) doesn't work.
> >>>> Error in revalue(teamq, c(`de situatie in zeer geringe mate van
> >>>> toepassing is\nvoor u of uw supervisorengroep` = "1",  :
> >>>>   x is not a factor or a character vector.
> >>>>
> >>>> There are many examples in
> >>>> ?likert
> >>>>
> >>>> Rich
> >>>>
> >>>>
> >>>> On Mon, Oct 22, 2018 at 1:30 PM, P. Roberto Bakker
> >>>> <robertobakker at gmail.com> wrote:
> >>>> > Dear David,
> >>>> >
> >>>> > Thank you for you quite response.
> >>>> > My apologies for not giving some sample data - this is due to AVG.
> >>>> > *But this minisample should not be a problem (all in Dutch)*:
> >>>> >  teamq
> >>>> > # A tibble: 4 x 2
> >>>> >   `Ik volg bijscholing om mijn opleiders-kwaliteiten op peil te
> >>>> > houden`
> >>>> >
> >>>> >   <chr>
> >>>> >
> >>>> > 1 de situatie in hoge mate van toepassing is voor u of uw
> >>>> > supervisorengroep
> >>>> > 2 de situatie in zeer hoge mate van toepassing is voor u of uw
> >>>> > supervisorengroep
> >>>> > 3 de situatie in zeer hoge mate van toepassing is voor u of uw
> >>>> > supervisorengroep
> >>>> > 4 de situatie in geringe mate van toepassing is voor u of uw
> >>>> > supervisorengroep
> >>>> >   `Ik weet precies wat de ?modernisering van de opleiding? inhoudt`
> >>>> >
> >>>> >   <chr>
> >>>> >
> >>>> > 1 de situatie in hoge mate van toepassing is voor u of uw
> >>>> > supervisorengroep
> >>>> > 2 de situatie in zeer hoge mate van toepassing is voor u of uw
> >>>> > supervisorengroep
> >>>> > 3 de situatie in zeer hoge mate van toepassing is voor u of uw
> >>>> > supervisorengroep
> >>>> > 4 de situatie in geringe mate van toepassing is voor u of uw
> >>>> > supervisorengroep
> >>>> >
> >>>> > As you see the likert items are in words, and I should change them
> in
> >>>> > nummeric - Am I correct?
> >>>> >
> >>>> > *To do this, I tried (see further below):*
> >>>> > plyr rename() ; I receive the message it should be a factor or
> >>>> > character
> >>>> > dplyr recode() ; same message
> >>>> > mapvalues() ; it should be atomic, so I used as.atomic(teamq) but
> then
> >>>> > I
> >>>> > receive the nummers a strings.
> >>>> >
> >>>> > *The syntaxes*
> >>>> > require(plyr)
> >>>> > example2 <- revalue(teamq,
> >>>> >                     c("de situatie in zeer geringe mate van
> toepassing
> >>>> > is
> >>>> > voor u of uw supervisorengroep"= "1",
> >>>> >                         "de situatie in geringe mate van toepassing
> is
> >>>> > voor
> >>>> > u of uw supervisorengroep"= "2",
> >>>> >                         "de situatie enigszins van toepassing is
> voor
> >>>> > u of
> >>>> > uw supervisorengroep"= "3",
> >>>> >                         "de situatie in hoge mate van toepassing is
> >>>> > voor u
> >>>> > of uw supervisorengroep"= "4",
> >>>> >                         "de situatie in zeer hoge mate van
> toepassing
> >>>> > is
> >>>> > voor u of uw supervisorengroep"= "5"))
> >>>> >
> >>>> > require(dplyr)
> >>>> > example2 <- recode(teamq,
> >>>> >                     c("de situatie in zeer geringe mate van
> toepassing
> >>>> > is
> >>>> > voor u of uw supervisorengroep"= "1",
> >>>> >                       "de situatie in geringe mate van toepassing is
> >>>> > voor u
> >>>> > of uw supervisorengroep"= "2",
> >>>> >                       "de situatie enigszins van toepassing is voor
> u
> >>>> > of uw
> >>>> > supervisorengroep"= "3",
> >>>> >                       "de situatie in hoge mate van toepassing is
> voor
> >>>> > u of
> >>>> > uw supervisorengroep"= "4",
> >>>> >                       "de situatie in zeer hoge mate van toepassing
> is
> >>>> > voor
> >>>> > u of uw supervisorengroep"= "5"))
> >>>> >
> >>>> > mapvalues(as.matrix(teamq), from = c("de situatie in zeer geringe
> mate
> >>>> > van
> >>>> > toepassing is voor u of uw supervisorengroep",
> >>>> >                         "de situatie in geringe mate van toepassing
> is
> >>>> > voor
> >>>> > u of uw supervisorengroep",
> >>>> >                         "de situatie enigszins van toepassing is
> voor
> >>>> > u of
> >>>> > uw supervisorengroep",
> >>>> >                         "de situatie in hoge mate van toepassing is
> >>>> > voor u
> >>>> > of uw supervisorengroep",
> >>>> >                         "de situatie in zeer hoge mate van
> toepassing
> >>>> > is
> >>>> > voor u of uw supervisorengroep"),
> >>>> >           to = c(1,2,3,4,5))
> >>>> >
> >>>> > What should I do?
> >>>> > Thank you in advance, Roberto
> >>>> >
> >>>> > Op ma 22 okt. 2018 om 17:13 schreef David L Carlson
> >>>> > <dcarlson at tamu.edu>:
> >>>> >
> >>>> >> Your example is not reproducible since you did not give us some
> >>>> >> sample
> >>>> >> data. I suspect that your data frame consists of columns that
> >>>> >> represent
> >>>> >> questions and rows that represent individuals who answered the
> >>>> >> questions.
> >>>> >> First create a simple example:
> >>>> >>
> >>>> >> set.seed(42)
> >>>> >> teamq <- data.frame(V1=sample(c(1, 2, 4, 5), 25, replace = TRUE),
> >>>> >>      V2=sample(c(1, 2, 3, 4, 5), 25, replace=TRUE),
> >>>> >>      V3=sample(c(2, 3, 4, 5), 25, replace=TRUE))
> >>>> >>
> >>>> >> Notice that this data frame ONLY contains questions (and only 3
> >>>> >> questions). Here are 2 ways to get what you want. The first one
> >>>> >> stacks the
> >>>> >> data:
> >>>> >>
> >>>> >> teamq.stack <- stack(teamq)
> >>>> >> str(teamq.stack)
> >>>> >> counts <- table(teamq.stack)
> >>>> >> str(counts)
> >>>> >>
> >>>> >> The second one converts each column to a factor with levels 1 - 5:
> >>>> >>
> >>>> >> teamq2 <- data.frame(lapply(teamq, factor, levels=1:5))
> >>>> >> str(teamq2)
> >>>> >> counts <- sapply(teamq2, table)
> >>>> >> str(counts)
> >>>> >>
> >>>> >> Now make the plots:
> >>>> >>
> >>>> >> cols <- c("yellow","sandybrown","orange", "darkolivegreen","green")
> >>>> >> barplot(counts[, 1], horiz=TRUE, col=cols, legend=TRUE)
> >>>> >> barplot(counts[, 2], horiz=TRUE, col=cols, legend=TRUE)
> >>>> >> barplot(counts[, 3], horiz=TRUE, col=cols, legend=TRUE)
> >>>> >>
> >>>> >> You will need to adjust the xlim= argument so that the legend does
> >>>> >> not
> >>>> >> print on top of the bars.
> >>>> >>
> >>>> >> ----------------------------------------
> >>>> >> David L Carlson
> >>>> >> Department of Anthropology
> >>>> >> Texas A&M University
> >>>> >> College Station, TX 77843-4352
> >>>> >>
> >>>> >>
> >>>> >> -----Original Message-----
> >>>> >> From: R-help <r-help-bounces at r-project.org> On Behalf Of P.
> Roberto
> >>>> >> Bakker
> >>>> >> Sent: Monday, October 22, 2018 9:04 AM
> >>>> >> To: R mailing list <r-help at r-project.org>
> >>>> >> Subject: [R] Different stack barplots - same color legends
> >>>> >>
> >>>> >> Hi,
> >>>> >>
> >>>> >> I want to make barplots from different questions (columns) in one
> >>>> >> data.frame.
> >>>> >> Each question has the same 5 likert items.
> >>>> >> Now the problem: in some questions all items are answered; in other
> >>>> >> less.
> >>>> >> From the syntax below I get nice stack barplots - *but the legend
> >>>> >> colors do
> >>>> >> not* refer to the same likert-item, which I understand - the colors
> >>>> >> go in
> >>>> >> sequence along the table.
> >>>> >> Question: how can I write a syntax that each likert-item has the
> same
> >>>> >> legend color?
> >>>> >> Thank you in advance,
> >>>> >>
> >>>> >> Roberto
> >>>> >>
> >>>> >> SYNTAX:
> >>>> >> counts19 <- table(teamq[,19])
> >>>> >> counts20 <- table(teamq[,20])
> >>>> >> barplot(as.matrix(counts19), horiz = T,
> >>>> >>         col=c("yellow","sandybrown","orange",
> >>>> >> "darkolivegreen","green"),
> >>>> >> legend=T)
> >>>> >> barplot(as.matrix(counts20), horiz = T,
> >>>> >>         col=c("yellow","sandybrown","orange",
> >>>> >> "darkolivegreen","green"),
> >>>> >> legend=T)
> >>>> >>
> >>>> >>         [[alternative HTML version deleted]]
> >>>> >>
> >>>> >> ______________________________________________
> >>>> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>>> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>> >> PLEASE do read the posting guide
> >>>> >> http://www.R-project.org/posting-guide.html
> >>>> >> and provide commented, minimal, self-contained, reproducible code.
> >>>> >>
> >>>> >
> >>>> >         [[alternative HTML version deleted]]
> >>>> >
> >>>> > ______________________________________________
> >>>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>>> > https://stat.ethz.ch/mailman/listinfo/r-help
> >>>> > PLEASE do read the posting guide
> >>>> > http://www.R-project.org/posting-guide.html
> >>>> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From pd@|gd @end|ng |rom gm@||@com  Wed Oct 31 19:30:09 2018
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Wed, 31 Oct 2018 19:30:09 +0100
Subject: [R] Corrupted package?
In-Reply-To: <20181031072248.GA8540@slingshot.co.nz>
References: <20181031072248.GA8540@slingshot.co.nz>
Message-ID: <41FEDABD-D3DF-4BEF-8BB1-152F6342617A@gmail.com>

Hm, a source install to r-devel gave me 

Peter-Dalgaards-MacBook-Air:BUILD pd$ ls -l library/pkgconfig/R/pkgconfig.rdb
-rw-r--r--  1 pd  staff  4515 Oct 31 19:15 library/pkgconfig/R/pkgconfig.rdb
Peter-Dalgaards-MacBook-Air:BUILD pd$ ls -l library/pkgconfig/help/pkgconfig.rdb
-rw-r--r--  1 pd  staff  5748 Oct 31 19:15 library/pkgconfig/help/pkgconfig.rdb

and an install to R_3.4.1 (yes, 4...) said

$ ls -l /Library/Frameworks/R.framework/Versions/3.4/Resources/library/pkgconfig/*/pkgconfig.rdb
-rw-r--r--  1 pd  admin  2432 Aug 17 11:36 /Library/Frameworks/R.framework/Versions/3.4/Resources/library/pkgconfig/R/pkgconfig.rdb
-rw-r--r--  1 pd  admin  5412 Aug 17 11:36 /Library/Frameworks/R.framework/Versions/3.4/Resources/library/pkgconfig/help/pkgconfig.rdb

I.e., it looks like it is the larger of your file sizes that is anomalous(?).

Did you try a straight install with install.packages("pkgconfig")? 

And, BTW, which system are you using?

-pd

> On 31 Oct 2018, at 08:22 , Patrick Connolly <p_connolly at slingshot.co.nz> wrote:
> 
> 
> I got this message while using a dplyr mutate call: 
> 
> Error in get0(oNam, envir = ns) : 
>  lazy-load database '/home/hrapgc/local/R-3.5.1/library/pkgconfig/R/pkgconfig.rdb' is corrupt
> 
> I had only just installed R-3.5.1 and updated the packages (using the
> function update.packages with the checkBuild parameter to TRUE) in the
> library I use with that version.  So, I checked the size of
> pkgconfig.rdb with the previous version from the bash prompt:
> 
>> ll `locate pkgconfig.rdb`
> 
> -rw-r--r-- 1 hrapgc hrapgc  5335 May  8 14:06 /home/hrapgc/local/R-3.5.0/library/pkgconfig/help/pkgconfig.rdb
> -rw-r--r-- 1 hrapgc hrapgc 15669 May  8 14:06 /home/hrapgc/local/R-3.5.0/library/pkgconfig/R/pkgconfig.rdb
> -rw-r--r-- 1 hrapgc hrapgc  5359 Oct 31 16:12 /home/hrapgc/local/R-3.5.1/library/pkgconfig/help/pkgconfig.rdb
> -rw-r--r-- 1 hrapgc hrapgc  4367 Oct 31 16:12 /home/hrapgc/local/R-3.5.1/library/pkgconfig/R/pkgconfig.rdb
> 
> While the pkgconfig.rdb filesize in the help directory is nearly
> identical in size to that in R-3.5.0 (and previous versions) the one
> in the R directory is very much smaller.  So the error message
> probably makes sense.
> 
> The question is: how could that have happened?  I removed the package
> and reinstalled it, but that made no difference.  Is this documented
> anywhere?
> 
> TIA
> -- 
> ~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.   
>   ___    Patrick Connolly   
> {~._.~}                   Great minds discuss ideas    
> _( Y )_  	         Average minds discuss events 
> (:_~*~_:)                  Small minds discuss people  
> (_)-(_)  	                      ..... Eleanor Roosevelt
> 	  
> ~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com



From er|cjberger @end|ng |rom gm@||@com  Wed Oct 31 19:55:31 2018
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Wed, 31 Oct 2018 20:55:31 +0200
Subject: [R] survival analysis question
In-Reply-To: <1541000080.817310464@f419.i.mail.ru>
References: <1541000080.817310464@f419.i.mail.ru>
Message-ID: <CAGgJW76_hr1Lz98BVJs-Lb7NB3vx0fFOEHVNRGTVxdRy+_9r0A@mail.gmail.com>

You need to read the Help page for the function survSplit
?survSplit
states that the id argument is a

 "character string with the name of new id variable to create (optional).
This can be useful if the data set does not already contain an identifier"

The addicts data.frame has as its first column 'id', which seems to be the
cause of the ERROR message.

HTH,
Eric



On Wed, Oct 31, 2018 at 5:37 PM Medic via R-help <r-help at r-project.org>
wrote:

>
> When I run the code from the book Kleinbaum "Survival analysis" (7.
> Running an extended cox model. Page 646) I got an ERROR. What do you think
> is the reason? I attach a file with few lines of dataset "addicts-dput.r".
> > library(cmprsk)
> > addicts = read.csv ("addicts.csv")
>    id clinic status survt prison dose
> 1  1      1      1   428      0   50
> 2  2      1      1   275      1   55
> 3  3      1      1   262      0   55
> 4  4      1      1   183      0   30
> 5  5      1      1   259      1   65
> 6  6      1      1   714      0   55
> 7  7      1      1   438      1   65
> 8  8      1      0   796      1   60
> 9  9      1      1   892      0   50
> > addicts.cp=survSplit(addicts, cut=addicts$survt[addicts$status==1],
> end="survt", event="status",start="start", id="id")
> ERROR in survSplit(addicts, cut = addicts$survt[addicts$status == 1],: the
> suggested id name is already present.
>
>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]



From dw|n@em|u@ @end|ng |rom comc@@t@net  Wed Oct 31 20:23:33 2018
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Wed, 31 Oct 2018 12:23:33 -0700
Subject: [R] Corrupted package?
In-Reply-To: <41FEDABD-D3DF-4BEF-8BB1-152F6342617A@gmail.com>
References: <20181031072248.GA8540@slingshot.co.nz>
 <41FEDABD-D3DF-4BEF-8BB1-152F6342617A@gmail.com>
Message-ID: <10D88F2A-0013-411B-B410-00155F76C3C4@comcast.net>



> On Oct 31, 2018, at 11:30 AM, peter dalgaard <pdalgd at gmail.com> wrote:
> 
> Hm, a source install to r-devel gave me 
> 
> Peter-Dalgaards-MacBook-Air:BUILD pd$ ls -l library/pkgconfig/R/pkgconfig.rdb
> -rw-r--r--  1 pd  staff  4515 Oct 31 19:15 library/pkgconfig/R/pkgconfig.rdb
> Peter-Dalgaards-MacBook-Air:BUILD pd$ ls -l library/pkgconfig/help/pkgconfig.rdb
> -rw-r--r--  1 pd  staff  5748 Oct 31 19:15 library/pkgconfig/help/pkgconfig.rdb
> 
> and an install to R_3.4.1 (yes, 4...) said
> 
> $ ls -l /Library/Frameworks/R.framework/Versions/3.4/Resources/library/pkgconfig/*/pkgconfig.rdb
> -rw-r--r--  1 pd  admin  2432 Aug 17 11:36 /Library/Frameworks/R.framework/Versions/3.4/Resources/library/pkgconfig/R/pkgconfig.rdb
> -rw-r--r--  1 pd  admin  5412 Aug 17 11:36 /Library/Frameworks/R.framework/Versions/3.4/Resources/library/pkgconfig/help/pkgconfig.rdb
> 
> I.e., it looks like it is the larger of your file sizes that is anomalous(?).
> 
> Did you try a straight install with install.packages("pkgconfig")? 
> 
> And, BTW, which system are you using?
> 
> -pd
> 
>> On 31 Oct 2018, at 08:22 , Patrick Connolly <p_connolly at slingshot.co.nz> wrote:
>> 
>> 
>> I got this message while using a dplyr mutate call: 
>> 
>> Error in get0(oNam, envir = ns) : 
>> lazy-load database '/home/hrapgc/local/R-3.5.1/library/pkgconfig/R/pkgconfig.rdb' is corrupt
>> 
>> I had only just installed R-3.5.1 and updated the packages (using the
>> function update.packages with the checkBuild parameter to TRUE) in the

Did you misspell "checkBuilt"? You should always present the transcript to prevent such questions.

-- 
David.


>> library I use with that version.  So, I checked the size of
>> pkgconfig.rdb with the previous version from the bash prompt:
>> 
>>> ll `locate pkgconfig.rdb`
>> 
>> -rw-r--r-- 1 hrapgc hrapgc  5335 May  8 14:06 /home/hrapgc/local/R-3.5.0/library/pkgconfig/help/pkgconfig.rdb
>> -rw-r--r-- 1 hrapgc hrapgc 15669 May  8 14:06 /home/hrapgc/local/R-3.5.0/library/pkgconfig/R/pkgconfig.rdb
>> -rw-r--r-- 1 hrapgc hrapgc  5359 Oct 31 16:12 /home/hrapgc/local/R-3.5.1/library/pkgconfig/help/pkgconfig.rdb
>> -rw-r--r-- 1 hrapgc hrapgc  4367 Oct 31 16:12 /home/hrapgc/local/R-3.5.1/library/pkgconfig/R/pkgconfig.rdb
>> 
>> While the pkgconfig.rdb filesize in the help directory is nearly
>> identical in size to that in R-3.5.0 (and previous versions) the one
>> in the R directory is very much smaller.  So the error message
>> probably makes sense.
>> 
>> The question is: how could that have happened?  I removed the package
>> and reinstalled it, but that made no difference.  Is this documented
>> anywhere?
>> 
>> TIA
>> -- 
>> ~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.   
>>  ___    Patrick Connolly   
>> {~._.~}                   Great minds discuss ideas    
>> _( Y )_  	         Average minds discuss events 
>> (:_~*~_:)                  Small minds discuss people  
>> (_)-(_)  	                      ..... Eleanor Roosevelt
>> 	  
>> ~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> -- 
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



From rmh @end|ng |rom temp|e@edu  Wed Oct 31 20:28:08 2018
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Wed, 31 Oct 2018 15:28:08 -0400
Subject: [R] Different stack barplots - same color legends
In-Reply-To: <CAKDq9_OkLfiP98cuYUg0BU_+cCXmKi9gKHqxSm+Eu16eC3WWyg@mail.gmail.com>
References: <CAKDq9_N16xaeL4O2j=v2bVuMb=tuHfu0Ao+yuLQcEq6B-ngq1A@mail.gmail.com>
 <af9001d319ac4992b0bfc5526150f03b@tamu.edu>
 <CAKDq9_P8hQEHWFH=c_86bG81fU0GS+EUCOmtZ9gJa_7kY-2uhA@mail.gmail.com>
 <CAGx1TMAYybconxY7ZVVJcdiYW6+WOjr_D+=GHOA=Xxv2AWRCqQ@mail.gmail.com>
 <CAKDq9_Oi0HGNV7qLnmi4HgVr7orF_gpC7Sys8mLKAxMfjHVtvQ@mail.gmail.com>
 <CAGx1TMB+=RnNeoBmzF=_-gxZ2bzaabExs2Gf-8dKE2vAcpiHpA@mail.gmail.com>
 <CAKDq9_P3GfHXbFbChQwrDUm=E+RuuWGP89tf_KPFXRjYAsrA+A@mail.gmail.com>
 <CAGx1TMByCiZvwOPm06qo4bssWjh=UP9ZPvkX5zi+6dNE=wggaA@mail.gmail.com>
 <CAKDq9_OkLfiP98cuYUg0BU_+cCXmKi9gKHqxSm+Eu16eC3WWyg@mail.gmail.com>
Message-ID: <CAGx1TMCF8bg64+UOP9ULygHcRnna505RO+1WCWxWJuuFaNp4fQ@mail.gmail.com>

What you sent looks like a set of column labels, not the actual numeric data.

You might want to convert them to factors where you control the order
of the levels.
> Factor.wrong <- factor(c("mm", "cm", "m", "km"))
> levels(Factor.wrong) ## alphabetical order, not meaning order
[1] "cm" "km" "m"  "mm"
>
> Factor.right <- factor(c("mm", "cm", "m", "km"),
+                        levels=c("mm", "cm", "m", "km"))
> levels(Factor.right) ## meaning order
[1] "mm" "cm" "m"  "km"

Or you might want to construct a matrix of counts of your data and plot that.

Rich


On Wed, Oct 31, 2018 at 1:53 PM, P. Roberto Bakker
<robertobakker at gmail.com> wrote:
> This is part of the output text
>
> "de situatie in hoge mate van toepassing is voor u of uw supervisorengroep",
> "de situatie in hoge mate van toepassing is voor u of uw supervisorengroep",
> "de situatie enigszins van toepassing is voor u of uw supervisorengroep",
> "de situatie in hoge mate van toepassing is voor u of uw supervisorengroep"
> ), `Ik waardeer de inbreng van de aios in de afdelingsvergadering` = c("de
> situatie in hoge mate van toepassing is voor u of uw supervisorengroep",
> "de situatie in hoge mate van toepassing is voor u of uw supervisorengroep",
> "de situatie in zeer hoge mate van toepassing is voor u of uw
> supervisorengroep",
> "de situatie in zeer hoge mate van toepassing is voor u of uw
> supervisorengroep",
> "de situatie enigszins van toepassing is voor u of uw supervisorengroep",
> "de situatie in zeer hoge mate van toepassing is voor u of uw
> supervisorengroep",
> "de situatie in zeer hoge mate van toepassing is voor u of uw
> supervisorengroep",
> "de situatie in zeer hoge mate van toepassing is voor u of uw
> supervisorengroep",
> "de situatie enigszins van toepassing is voor u of uw supervisorengroep",
> "de situatie in hoge mate van toepassing is voor u of uw supervisorengroep",
> "de situatie in hoge mate van toepassing is voor u of uw supervisorengroep",
> "de situatie in hoge mate van toepassing is voor u of uw supervisorengroep",
>
> Op wo 31 okt. 2018 om 16:24 schreef Richard M. Heiberger <rmh at temple.edu>:
>>
>> part is fine.  just be sure that the small part causes the problem.
>> I will need that to investigate what is happening.
>>
>>
>> On Wed, Oct 31, 2018 at 11:15 AM, P. Roberto Bakker
>> <robertobakker at gmail.com> wrote:
>> > It is a very long result text. I can send it to you, or is part of it
>> > ok?[
>> >
>> > Op wo 31 okt. 2018 om 14:27 schreef Richard M. Heiberger
>> > <rmh at temple.edu>:
>> >>
>> >> Please send me the
>> >> dput(teamq)
>> >>
>> >>
>> >> On Wed, Oct 31, 2018 at 03:51 P. Roberto Bakker
>> >> <robertobakker at gmail.com>
>> >> wrote:
>> >>>
>> >>> Thank you for you information. Package 'HH' is interesting.
>> >>>
>> >>> Now I find another problem when using 'likert(teamq)'
>> >>> I get an error message:
>> >>> > likert(teamq)
>> >>> Error in dimnames(x) <- `*vtmp*` :
>> >>>   length of 'dimnames' [2] not equal to array extent
>> >>>
>> >>> I checked:
>> >>> > dim(teamq)
>> >>> [1] 4 2
>> >>> > ncol(teamq)
>> >>> [1] 2
>> >>> So it should be good.
>> >>>
>> >>> I used 'make.names' , in case the spaces in the variable names would
>> >>> be a
>> >>> problem.
>> >>> Same error.
>> >>>
>> >>> What could I do?
>> >>>
>> >>> Best and thank you in advance.
>> >>> Roberto
>> >>>
>> >>>
>> >>> Op ma 22 okt. 2018 om 20:10 schreef Richard M. Heiberger
>> >>> <rmh at temple.edu>:
>> >>>>
>> >>>> Try the likert function in
>> >>>> install.packages("HH) ## if necessary
>> >>>> library(HH)
>> >>>>
>> >>>> Then using David Carlson's example teamq
>> >>>> likert(teamq)
>> >>>>
>> >>>> Your example in the 1:30PM (Eastern Daylight Time) doesn't work.
>> >>>> Error in revalue(teamq, c(`de situatie in zeer geringe mate van
>> >>>> toepassing is\nvoor u of uw supervisorengroep` = "1",  :
>> >>>>   x is not a factor or a character vector.
>> >>>>
>> >>>> There are many examples in
>> >>>> ?likert
>> >>>>
>> >>>> Rich
>> >>>>
>> >>>>
>> >>>> On Mon, Oct 22, 2018 at 1:30 PM, P. Roberto Bakker
>> >>>> <robertobakker at gmail.com> wrote:
>> >>>> > Dear David,
>> >>>> >
>> >>>> > Thank you for you quite response.
>> >>>> > My apologies for not giving some sample data - this is due to AVG.
>> >>>> > *But this minisample should not be a problem (all in Dutch)*:
>> >>>> >  teamq
>> >>>> > # A tibble: 4 x 2
>> >>>> >   `Ik volg bijscholing om mijn opleiders-kwaliteiten op peil te
>> >>>> > houden`
>> >>>> >
>> >>>> >   <chr>
>> >>>> >
>> >>>> > 1 de situatie in hoge mate van toepassing is voor u of uw
>> >>>> > supervisorengroep
>> >>>> > 2 de situatie in zeer hoge mate van toepassing is voor u of uw
>> >>>> > supervisorengroep
>> >>>> > 3 de situatie in zeer hoge mate van toepassing is voor u of uw
>> >>>> > supervisorengroep
>> >>>> > 4 de situatie in geringe mate van toepassing is voor u of uw
>> >>>> > supervisorengroep
>> >>>> >   `Ik weet precies wat de ?modernisering van de opleiding? inhoudt`
>> >>>> >
>> >>>> >   <chr>
>> >>>> >
>> >>>> > 1 de situatie in hoge mate van toepassing is voor u of uw
>> >>>> > supervisorengroep
>> >>>> > 2 de situatie in zeer hoge mate van toepassing is voor u of uw
>> >>>> > supervisorengroep
>> >>>> > 3 de situatie in zeer hoge mate van toepassing is voor u of uw
>> >>>> > supervisorengroep
>> >>>> > 4 de situatie in geringe mate van toepassing is voor u of uw
>> >>>> > supervisorengroep
>> >>>> >
>> >>>> > As you see the likert items are in words, and I should change them
>> >>>> > in
>> >>>> > nummeric - Am I correct?
>> >>>> >
>> >>>> > *To do this, I tried (see further below):*
>> >>>> > plyr rename() ; I receive the message it should be a factor or
>> >>>> > character
>> >>>> > dplyr recode() ; same message
>> >>>> > mapvalues() ; it should be atomic, so I used as.atomic(teamq) but
>> >>>> > then
>> >>>> > I
>> >>>> > receive the nummers a strings.
>> >>>> >
>> >>>> > *The syntaxes*
>> >>>> > require(plyr)
>> >>>> > example2 <- revalue(teamq,
>> >>>> >                     c("de situatie in zeer geringe mate van
>> >>>> > toepassing
>> >>>> > is
>> >>>> > voor u of uw supervisorengroep"= "1",
>> >>>> >                         "de situatie in geringe mate van toepassing
>> >>>> > is
>> >>>> > voor
>> >>>> > u of uw supervisorengroep"= "2",
>> >>>> >                         "de situatie enigszins van toepassing is
>> >>>> > voor
>> >>>> > u of
>> >>>> > uw supervisorengroep"= "3",
>> >>>> >                         "de situatie in hoge mate van toepassing is
>> >>>> > voor u
>> >>>> > of uw supervisorengroep"= "4",
>> >>>> >                         "de situatie in zeer hoge mate van
>> >>>> > toepassing
>> >>>> > is
>> >>>> > voor u of uw supervisorengroep"= "5"))
>> >>>> >
>> >>>> > require(dplyr)
>> >>>> > example2 <- recode(teamq,
>> >>>> >                     c("de situatie in zeer geringe mate van
>> >>>> > toepassing
>> >>>> > is
>> >>>> > voor u of uw supervisorengroep"= "1",
>> >>>> >                       "de situatie in geringe mate van toepassing
>> >>>> > is
>> >>>> > voor u
>> >>>> > of uw supervisorengroep"= "2",
>> >>>> >                       "de situatie enigszins van toepassing is voor
>> >>>> > u
>> >>>> > of uw
>> >>>> > supervisorengroep"= "3",
>> >>>> >                       "de situatie in hoge mate van toepassing is
>> >>>> > voor
>> >>>> > u of
>> >>>> > uw supervisorengroep"= "4",
>> >>>> >                       "de situatie in zeer hoge mate van toepassing
>> >>>> > is
>> >>>> > voor
>> >>>> > u of uw supervisorengroep"= "5"))
>> >>>> >
>> >>>> > mapvalues(as.matrix(teamq), from = c("de situatie in zeer geringe
>> >>>> > mate
>> >>>> > van
>> >>>> > toepassing is voor u of uw supervisorengroep",
>> >>>> >                         "de situatie in geringe mate van toepassing
>> >>>> > is
>> >>>> > voor
>> >>>> > u of uw supervisorengroep",
>> >>>> >                         "de situatie enigszins van toepassing is
>> >>>> > voor
>> >>>> > u of
>> >>>> > uw supervisorengroep",
>> >>>> >                         "de situatie in hoge mate van toepassing is
>> >>>> > voor u
>> >>>> > of uw supervisorengroep",
>> >>>> >                         "de situatie in zeer hoge mate van
>> >>>> > toepassing
>> >>>> > is
>> >>>> > voor u of uw supervisorengroep"),
>> >>>> >           to = c(1,2,3,4,5))
>> >>>> >
>> >>>> > What should I do?
>> >>>> > Thank you in advance, Roberto
>> >>>> >
>> >>>> > Op ma 22 okt. 2018 om 17:13 schreef David L Carlson
>> >>>> > <dcarlson at tamu.edu>:
>> >>>> >
>> >>>> >> Your example is not reproducible since you did not give us some
>> >>>> >> sample
>> >>>> >> data. I suspect that your data frame consists of columns that
>> >>>> >> represent
>> >>>> >> questions and rows that represent individuals who answered the
>> >>>> >> questions.
>> >>>> >> First create a simple example:
>> >>>> >>
>> >>>> >> set.seed(42)
>> >>>> >> teamq <- data.frame(V1=sample(c(1, 2, 4, 5), 25, replace = TRUE),
>> >>>> >>      V2=sample(c(1, 2, 3, 4, 5), 25, replace=TRUE),
>> >>>> >>      V3=sample(c(2, 3, 4, 5), 25, replace=TRUE))
>> >>>> >>
>> >>>> >> Notice that this data frame ONLY contains questions (and only 3
>> >>>> >> questions). Here are 2 ways to get what you want. The first one
>> >>>> >> stacks the
>> >>>> >> data:
>> >>>> >>
>> >>>> >> teamq.stack <- stack(teamq)
>> >>>> >> str(teamq.stack)
>> >>>> >> counts <- table(teamq.stack)
>> >>>> >> str(counts)
>> >>>> >>
>> >>>> >> The second one converts each column to a factor with levels 1 - 5:
>> >>>> >>
>> >>>> >> teamq2 <- data.frame(lapply(teamq, factor, levels=1:5))
>> >>>> >> str(teamq2)
>> >>>> >> counts <- sapply(teamq2, table)
>> >>>> >> str(counts)
>> >>>> >>
>> >>>> >> Now make the plots:
>> >>>> >>
>> >>>> >> cols <- c("yellow","sandybrown","orange",
>> >>>> >> "darkolivegreen","green")
>> >>>> >> barplot(counts[, 1], horiz=TRUE, col=cols, legend=TRUE)
>> >>>> >> barplot(counts[, 2], horiz=TRUE, col=cols, legend=TRUE)
>> >>>> >> barplot(counts[, 3], horiz=TRUE, col=cols, legend=TRUE)
>> >>>> >>
>> >>>> >> You will need to adjust the xlim= argument so that the legend does
>> >>>> >> not
>> >>>> >> print on top of the bars.
>> >>>> >>
>> >>>> >> ----------------------------------------
>> >>>> >> David L Carlson
>> >>>> >> Department of Anthropology
>> >>>> >> Texas A&M University
>> >>>> >> College Station, TX 77843-4352
>> >>>> >>
>> >>>> >>
>> >>>> >> -----Original Message-----
>> >>>> >> From: R-help <r-help-bounces at r-project.org> On Behalf Of P.
>> >>>> >> Roberto
>> >>>> >> Bakker
>> >>>> >> Sent: Monday, October 22, 2018 9:04 AM
>> >>>> >> To: R mailing list <r-help at r-project.org>
>> >>>> >> Subject: [R] Different stack barplots - same color legends
>> >>>> >>
>> >>>> >> Hi,
>> >>>> >>
>> >>>> >> I want to make barplots from different questions (columns) in one
>> >>>> >> data.frame.
>> >>>> >> Each question has the same 5 likert items.
>> >>>> >> Now the problem: in some questions all items are answered; in
>> >>>> >> other
>> >>>> >> less.
>> >>>> >> From the syntax below I get nice stack barplots - *but the legend
>> >>>> >> colors do
>> >>>> >> not* refer to the same likert-item, which I understand - the
>> >>>> >> colors
>> >>>> >> go in
>> >>>> >> sequence along the table.
>> >>>> >> Question: how can I write a syntax that each likert-item has the
>> >>>> >> same
>> >>>> >> legend color?
>> >>>> >> Thank you in advance,
>> >>>> >>
>> >>>> >> Roberto
>> >>>> >>
>> >>>> >> SYNTAX:
>> >>>> >> counts19 <- table(teamq[,19])
>> >>>> >> counts20 <- table(teamq[,20])
>> >>>> >> barplot(as.matrix(counts19), horiz = T,
>> >>>> >>         col=c("yellow","sandybrown","orange",
>> >>>> >> "darkolivegreen","green"),
>> >>>> >> legend=T)
>> >>>> >> barplot(as.matrix(counts20), horiz = T,
>> >>>> >>         col=c("yellow","sandybrown","orange",
>> >>>> >> "darkolivegreen","green"),
>> >>>> >> legend=T)
>> >>>> >>
>> >>>> >>         [[alternative HTML version deleted]]
>> >>>> >>
>> >>>> >> ______________________________________________
>> >>>> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> >>>> >> https://stat.ethz.ch/mailman/listinfo/r-help
>> >>>> >> PLEASE do read the posting guide
>> >>>> >> http://www.R-project.org/posting-guide.html
>> >>>> >> and provide commented, minimal, self-contained, reproducible code.
>> >>>> >>
>> >>>> >
>> >>>> >         [[alternative HTML version deleted]]
>> >>>> >
>> >>>> > ______________________________________________
>> >>>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> >>>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> >>>> > PLEASE do read the posting guide
>> >>>> > http://www.R-project.org/posting-guide.html
>> >>>> > and provide commented, minimal, self-contained, reproducible code.



From |err|@|eber| @end|ng |rom gmx@@t  Wed Oct 31 22:27:19 2018
From: |err|@|eber| @end|ng |rom gmx@@t (Ferri Leberl)
Date: Wed, 31 Oct 2018 22:27:19 +0100
Subject: [R] Plot a path
Message-ID: <trinity-c72faedf-333b-472d-83c1-16c528a67f1b-1541021239921@3c-app-gmx-bs72>


Dear All,
I have a dataframe with four cols: Date, Placename, geogr. latitude, geogr. longitude.
How can I plot the path as a line, ordered by the date, with the longitude as the x-axis and the latitude as the y-axis?
Thank you in advance!
Yours, Ferri



From m@cqueen1 @end|ng |rom ||n|@gov  Wed Oct 31 22:45:55 2018
From: m@cqueen1 @end|ng |rom ||n|@gov (MacQueen, Don)
Date: Wed, 31 Oct 2018 21:45:55 +0000
Subject: [R] Plot a path
In-Reply-To: <trinity-c72faedf-333b-472d-83c1-16c528a67f1b-1541021239921@3c-app-gmx-bs72>
References: <trinity-c72faedf-333b-472d-83c1-16c528a67f1b-1541021239921@3c-app-gmx-bs72>
Message-ID: <80E9D8A5-DDFF-4025-9351-FA398894ED12@llnl.gov>

Probably
   sort the data frame by date
Then
  plot( mydf$geogr.longitude, mydf$geogr.latitude, type='l')

Search the web for some tutorials

See the help pages for
   plot
   plot.default

--
Don MacQueen
Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062
Lab cell 925-724-7509
 
 

?On 10/31/18, 2:27 PM, "R-help on behalf of Ferri Leberl" <r-help-bounces at r-project.org on behalf of ferri.leberl at gmx.at> wrote:

    
    Dear All,
    I have a dataframe with four cols: Date, Placename, geogr. latitude, geogr. longitude.
    How can I plot the path as a line, ordered by the date, with the longitude as the x-axis and the latitude as the y-axis?
    Thank you in advance!
    Yours, Ferri
    
    ______________________________________________
    R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    https://stat.ethz.ch/mailman/listinfo/r-help
    PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    and provide commented, minimal, self-contained, reproducible code.
    


From robertob@kker @end|ng |rom gm@||@com  Wed Oct 31 22:56:05 2018
From: robertob@kker @end|ng |rom gm@||@com (P. Roberto Bakker)
Date: Wed, 31 Oct 2018 22:56:05 +0100
Subject: [R] Different stack barplots - same color legends
In-Reply-To: <CAGx1TMCF8bg64+UOP9ULygHcRnna505RO+1WCWxWJuuFaNp4fQ@mail.gmail.com>
References: <CAKDq9_N16xaeL4O2j=v2bVuMb=tuHfu0Ao+yuLQcEq6B-ngq1A@mail.gmail.com>
 <af9001d319ac4992b0bfc5526150f03b@tamu.edu>
 <CAKDq9_P8hQEHWFH=c_86bG81fU0GS+EUCOmtZ9gJa_7kY-2uhA@mail.gmail.com>
 <CAGx1TMAYybconxY7ZVVJcdiYW6+WOjr_D+=GHOA=Xxv2AWRCqQ@mail.gmail.com>
 <CAKDq9_Oi0HGNV7qLnmi4HgVr7orF_gpC7Sys8mLKAxMfjHVtvQ@mail.gmail.com>
 <CAGx1TMB+=RnNeoBmzF=_-gxZ2bzaabExs2Gf-8dKE2vAcpiHpA@mail.gmail.com>
 <CAKDq9_P3GfHXbFbChQwrDUm=E+RuuWGP89tf_KPFXRjYAsrA+A@mail.gmail.com>
 <CAGx1TMByCiZvwOPm06qo4bssWjh=UP9ZPvkX5zi+6dNE=wggaA@mail.gmail.com>
 <CAKDq9_OkLfiP98cuYUg0BU_+cCXmKi9gKHqxSm+Eu16eC3WWyg@mail.gmail.com>
 <CAGx1TMCF8bg64+UOP9ULygHcRnna505RO+1WCWxWJuuFaNp4fQ@mail.gmail.com>
Message-ID: <CAKDq9_OU8bNq4p8zLr45JADz=SWvGAhG+-ACqdu+qC4a+D8FUw@mail.gmail.com>

Hi Rich,

Thank you for your answer.
The sentences are strings (likert scale: 'the situation is highly
applicable to me' etc - in Dutch), or column labels; it may be confusing as
it is in Dutch. Below I show you part of the dataframe with my annotation
added (string/column lable) to give you an idea.
I need to change the likert strings into numeric (1:5). And this is a
challenge somehow.
With dplyr, plyr it did not work.
After I have the numeric version then I can stack them as suggested by
David.

PART OF THE DATAFRAME
>> >>>> >   `Ik volg bijscholing om mijn opleiders-kwaliteiten op peil te
>> >>>> > houden` COLUMN LABEL
>> >>>> >
>> >>>> >   <chr>
>> >>>> >
>> >>>> > 1 de situatie in hoge mate van toepassing is voor u of uw
>> >>>> > supervisorengroep LIKERT STRING
>> >>>> > 2 de situatie in zeer hoge mate van toepassing is voor u of uw
>> >>>> > supervisorengroep LIKERT STRING
>> >>>> > 3 de situatie in zeer hoge mate van toepassing is voor u of uw
>> >>>> > supervisorengroep LIKERT STRING
>> >>>> > 4 de situatie in geringe mate van toepassing is voor u of uw
>> >>>> > supervisorengroep LIKERT STRING
>> >>>> >   `Ik weet precies wat de ?modernisering van de opleiding?
inhoudt` COLUMN LABEL
>> >>>> >
>> >>>> >   <chr>
>> >>>> >
>> >>>> > 1 de situatie in hoge mate van toepassing is voor u of uw
>> >>>> > supervisorengroep LIKERT STRING
>> >>>> > 2 de situatie in zeer hoge mate van toepassing is voor u of uw
>> >>>> > supervisorengroep LIKERT STRING
>> >>>> > 3 de situatie in zeer hoge mate van toepassing is voor u of uw
>> >>>> > supervisorengroep LIKERT STRING
>> >>>> > 4 de situatie in geringe mate van toepassing is voor u of uw
>> >>>> > supervisorengroep LIKERT STRING



Op wo 31 okt. 2018 om 20:28 schreef Richard M. Heiberger <rmh at temple.edu>:

> What you sent looks like a set of column labels, not the actual numeric
> data.
>
> You might want to convert them to factors where you control the order
> of the levels.
> > Factor.wrong <- factor(c("mm", "cm", "m", "km"))
> > levels(Factor.wrong) ## alphabetical order, not meaning order
> [1] "cm" "km" "m"  "mm"
> >
> > Factor.right <- factor(c("mm", "cm", "m", "km"),
> +                        levels=c("mm", "cm", "m", "km"))
> > levels(Factor.right) ## meaning order
> [1] "mm" "cm" "m"  "km"
>
> Or you might want to construct a matrix of counts of your data and plot
> that.
>
> Rich
>
>
> On Wed, Oct 31, 2018 at 1:53 PM, P. Roberto Bakker
> <robertobakker at gmail.com> wrote:
> > This is part of the output text
> >
> > "de situatie in hoge mate van toepassing is voor u of uw
> supervisorengroep", STRING
> > "de situatie in hoge mate van toepassing is voor u of uw
> supervisorengroep", STRING
> > "de situatie enigszins van toepassing is voor u of uw
> supervisorengroep", STRING
> > "de situatie in hoge mate van toepassing is voor u of uw
> supervisorengroep" STRINK
> > ), `Ik waardeer de inbreng van de aios in de afdelingsvergadering`
> COLUMN LABEL= c("de
> > situatie in hoge mate van toepassing is voor u of uw supervisorengroep",
> STRING
> > "de situatie in hoge mate van toepassing is voor u of uw
> supervisorengroep",
> > "de situatie in zeer hoge mate van toepassing is voor u of uw
> > supervisorengroep",
> > "de situatie in zeer hoge mate van toepassing is voor u of uw
> > supervisorengroep",
> > "de situatie enigszins van toepassing is voor u of uw supervisorengroep",
> > "de situatie in zeer hoge mate van toepassing is voor u of uw
> > supervisorengroep",
> > "de situatie in zeer hoge mate van toepassing is voor u of uw
> > supervisorengroep",
> > "de situatie in zeer hoge mate van toepassing is voor u of uw
> > supervisorengroep",
> > "de situatie enigszins van toepassing is voor u of uw supervisorengroep",
> > "de situatie in hoge mate van toepassing is voor u of uw
> supervisorengroep",
> > "de situatie in hoge mate van toepassing is voor u of uw
> supervisorengroep",
> > "de situatie in hoge mate van toepassing is voor u of uw
> supervisorengroep",
> >
> > Op wo 31 okt. 2018 om 16:24 schreef Richard M. Heiberger <rmh at temple.edu
> >:
> >>
> >> part is fine.  just be sure that the small part causes the problem.
> >> I will need that to investigate what is happening.
> >>
> >>
> >> On Wed, Oct 31, 2018 at 11:15 AM, P. Roberto Bakker
> >> <robertobakker at gmail.com> wrote:
> >> > It is a very long result text. I can send it to you, or is part of it
> >> > ok?[
> >> >
> >> > Op wo 31 okt. 2018 om 14:27 schreef Richard M. Heiberger
> >> > <rmh at temple.edu>:
> >> >>
> >> >> Please send me the
> >> >> dput(teamq)
> >> >>
> >> >>
> >> >> On Wed, Oct 31, 2018 at 03:51 P. Roberto Bakker
> >> >> <robertobakker at gmail.com>
> >> >> wrote:
> >> >>>
> >> >>> Thank you for you information. Package 'HH' is interesting.
> >> >>>
> >> >>> Now I find another problem when using 'likert(teamq)'
> >> >>> I get an error message:
> >> >>> > likert(teamq)
> >> >>> Error in dimnames(x) <- `*vtmp*` :
> >> >>>   length of 'dimnames' [2] not equal to array extent
> >> >>>
> >> >>> I checked:
> >> >>> > dim(teamq)
> >> >>> [1] 4 2
> >> >>> > ncol(teamq)
> >> >>> [1] 2
> >> >>> So it should be good.
> >> >>>
> >> >>> I used 'make.names' , in case the spaces in the variable names would
> >> >>> be a
> >> >>> problem.
> >> >>> Same error.
> >> >>>
> >> >>> What could I do?
> >> >>>
> >> >>> Best and thank you in advance.
> >> >>> Roberto
> >> >>>
> >> >>>
> >> >>> Op ma 22 okt. 2018 om 20:10 schreef Richard M. Heiberger
> >> >>> <rmh at temple.edu>:
> >> >>>>
> >> >>>> Try the likert function in
> >> >>>> install.packages("HH) ## if necessary
> >> >>>> library(HH)
> >> >>>>
> >> >>>> Then using David Carlson's example teamq
> >> >>>> likert(teamq)
> >> >>>>
> >> >>>> Your example in the 1:30PM (Eastern Daylight Time) doesn't work.
> >> >>>> Error in revalue(teamq, c(`de situatie in zeer geringe mate van
> >> >>>> toepassing is\nvoor u of uw supervisorengroep` = "1",  :
> >> >>>>   x is not a factor or a character vector.
> >> >>>>
> >> >>>> There are many examples in
> >> >>>> ?likert
> >> >>>>
> >> >>>> Rich
> >> >>>>
> >> >>>>
> >> >>>> On Mon, Oct 22, 2018 at 1:30 PM, P. Roberto Bakker
> >> >>>> <robertobakker at gmail.com> wrote:
> >> >>>> > Dear David,
> >> >>>> >
> >> >>>> > Thank you for you quite response.
> >> >>>> > My apologies for not giving some sample data - this is due to
> AVG.
> >> >>>> > *But this minisample should not be a problem (all in Dutch)*:
> >> >>>> >  teamq
> >> >>>> > # A tibble: 4 x 2
> >> >>>> >   `Ik volg bijscholing om mijn opleiders-kwaliteiten op peil te
> >> >>>> > houden`
> >> >>>> >
> >> >>>> >   <chr>
> >> >>>> >
> >> >>>> > 1 de situatie in hoge mate van toepassing is voor u of uw
> >> >>>> > supervisorengroep
> >> >>>> > 2 de situatie in zeer hoge mate van toepassing is voor u of uw
> >> >>>> > supervisorengroep
> >> >>>> > 3 de situatie in zeer hoge mate van toepassing is voor u of uw
> >> >>>> > supervisorengroep
> >> >>>> > 4 de situatie in geringe mate van toepassing is voor u of uw
> >> >>>> > supervisorengroep
> >> >>>> >   `Ik weet precies wat de ?modernisering van de opleiding?
> inhoudt`
> >> >>>> >
> >> >>>> >   <chr>
> >> >>>> >
> >> >>>> > 1 de situatie in hoge mate van toepassing is voor u of uw
> >> >>>> > supervisorengroep
> >> >>>> > 2 de situatie in zeer hoge mate van toepassing is voor u of uw
> >> >>>> > supervisorengroep
> >> >>>> > 3 de situatie in zeer hoge mate van toepassing is voor u of uw
> >> >>>> > supervisorengroep
> >> >>>> > 4 de situatie in geringe mate van toepassing is voor u of uw
> >> >>>> > supervisorengroep
> >> >>>> >
> >> >>>> > As you see the likert items are in words, and I should change
> them
> >> >>>> > in
> >> >>>> > nummeric - Am I correct?
> >> >>>> >
> >> >>>> > *To do this, I tried (see further below):*
> >> >>>> > plyr rename() ; I receive the message it should be a factor or
> >> >>>> > character
> >> >>>> > dplyr recode() ; same message
> >> >>>> > mapvalues() ; it should be atomic, so I used as.atomic(teamq) but
> >> >>>> > then
> >> >>>> > I
> >> >>>> > receive the nummers a strings.
> >> >>>> >
> >> >>>> > *The syntaxes*
> >> >>>> > require(plyr)
> >> >>>> > example2 <- revalue(teamq,
> >> >>>> >                     c("de situatie in zeer geringe mate van
> >> >>>> > toepassing
> >> >>>> > is
> >> >>>> > voor u of uw supervisorengroep"= "1",
> >> >>>> >                         "de situatie in geringe mate van
> toepassing
> >> >>>> > is
> >> >>>> > voor
> >> >>>> > u of uw supervisorengroep"= "2",
> >> >>>> >                         "de situatie enigszins van toepassing is
> >> >>>> > voor
> >> >>>> > u of
> >> >>>> > uw supervisorengroep"= "3",
> >> >>>> >                         "de situatie in hoge mate van toepassing
> is
> >> >>>> > voor u
> >> >>>> > of uw supervisorengroep"= "4",
> >> >>>> >                         "de situatie in zeer hoge mate van
> >> >>>> > toepassing
> >> >>>> > is
> >> >>>> > voor u of uw supervisorengroep"= "5"))
> >> >>>> >
> >> >>>> > require(dplyr)
> >> >>>> > example2 <- recode(teamq,
> >> >>>> >                     c("de situatie in zeer geringe mate van
> >> >>>> > toepassing
> >> >>>> > is
> >> >>>> > voor u of uw supervisorengroep"= "1",
> >> >>>> >                       "de situatie in geringe mate van toepassing
> >> >>>> > is
> >> >>>> > voor u
> >> >>>> > of uw supervisorengroep"= "2",
> >> >>>> >                       "de situatie enigszins van toepassing is
> voor
> >> >>>> > u
> >> >>>> > of uw
> >> >>>> > supervisorengroep"= "3",
> >> >>>> >                       "de situatie in hoge mate van toepassing is
> >> >>>> > voor
> >> >>>> > u of
> >> >>>> > uw supervisorengroep"= "4",
> >> >>>> >                       "de situatie in zeer hoge mate van
> toepassing
> >> >>>> > is
> >> >>>> > voor
> >> >>>> > u of uw supervisorengroep"= "5"))
> >> >>>> >
> >> >>>> > mapvalues(as.matrix(teamq), from = c("de situatie in zeer geringe
> >> >>>> > mate
> >> >>>> > van
> >> >>>> > toepassing is voor u of uw supervisorengroep",
> >> >>>> >                         "de situatie in geringe mate van
> toepassing
> >> >>>> > is
> >> >>>> > voor
> >> >>>> > u of uw supervisorengroep",
> >> >>>> >                         "de situatie enigszins van toepassing is
> >> >>>> > voor
> >> >>>> > u of
> >> >>>> > uw supervisorengroep",
> >> >>>> >                         "de situatie in hoge mate van toepassing
> is
> >> >>>> > voor u
> >> >>>> > of uw supervisorengroep",
> >> >>>> >                         "de situatie in zeer hoge mate van
> >> >>>> > toepassing
> >> >>>> > is
> >> >>>> > voor u of uw supervisorengroep"),
> >> >>>> >           to = c(1,2,3,4,5))
> >> >>>> >
> >> >>>> > What should I do?
> >> >>>> > Thank you in advance, Roberto
> >> >>>> >
> >> >>>> > Op ma 22 okt. 2018 om 17:13 schreef David L Carlson
> >> >>>> > <dcarlson at tamu.edu>:
> >> >>>> >
> >> >>>> >> Your example is not reproducible since you did not give us some
> >> >>>> >> sample
> >> >>>> >> data. I suspect that your data frame consists of columns that
> >> >>>> >> represent
> >> >>>> >> questions and rows that represent individuals who answered the
> >> >>>> >> questions.
> >> >>>> >> First create a simple example:
> >> >>>> >>
> >> >>>> >> set.seed(42)
> >> >>>> >> teamq <- data.frame(V1=sample(c(1, 2, 4, 5), 25, replace =
> TRUE),
> >> >>>> >>      V2=sample(c(1, 2, 3, 4, 5), 25, replace=TRUE),
> >> >>>> >>      V3=sample(c(2, 3, 4, 5), 25, replace=TRUE))
> >> >>>> >>
> >> >>>> >> Notice that this data frame ONLY contains questions (and only 3
> >> >>>> >> questions). Here are 2 ways to get what you want. The first one
> >> >>>> >> stacks the
> >> >>>> >> data:
> >> >>>> >>
> >> >>>> >> teamq.stack <- stack(teamq)
> >> >>>> >> str(teamq.stack)
> >> >>>> >> counts <- table(teamq.stack)
> >> >>>> >> str(counts)
> >> >>>> >>
> >> >>>> >> The second one converts each column to a factor with levels 1 -
> 5:
> >> >>>> >>
> >> >>>> >> teamq2 <- data.frame(lapply(teamq, factor, levels=1:5))
> >> >>>> >> str(teamq2)
> >> >>>> >> counts <- sapply(teamq2, table)
> >> >>>> >> str(counts)
> >> >>>> >>
> >> >>>> >> Now make the plots:
> >> >>>> >>
> >> >>>> >> cols <- c("yellow","sandybrown","orange",
> >> >>>> >> "darkolivegreen","green")
> >> >>>> >> barplot(counts[, 1], horiz=TRUE, col=cols, legend=TRUE)
> >> >>>> >> barplot(counts[, 2], horiz=TRUE, col=cols, legend=TRUE)
> >> >>>> >> barplot(counts[, 3], horiz=TRUE, col=cols, legend=TRUE)
> >> >>>> >>
> >> >>>> >> You will need to adjust the xlim= argument so that the legend
> does
> >> >>>> >> not
> >> >>>> >> print on top of the bars.
> >> >>>> >>
> >> >>>> >> ----------------------------------------
> >> >>>> >> David L Carlson
> >> >>>> >> Department of Anthropology
> >> >>>> >> Texas A&M University
> >> >>>> >> College Station, TX 77843-4352
> >> >>>> >>
> >> >>>> >>
> >> >>>> >> -----Original Message-----
> >> >>>> >> From: R-help <r-help-bounces at r-project.org> On Behalf Of P.
> >> >>>> >> Roberto
> >> >>>> >> Bakker
> >> >>>> >> Sent: Monday, October 22, 2018 9:04 AM
> >> >>>> >> To: R mailing list <r-help at r-project.org>
> >> >>>> >> Subject: [R] Different stack barplots - same color legends
> >> >>>> >>
> >> >>>> >> Hi,
> >> >>>> >>
> >> >>>> >> I want to make barplots from different questions (columns) in
> one
> >> >>>> >> data.frame.
> >> >>>> >> Each question has the same 5 likert items.
> >> >>>> >> Now the problem: in some questions all items are answered; in
> >> >>>> >> other
> >> >>>> >> less.
> >> >>>> >> From the syntax below I get nice stack barplots - *but the
> legend
> >> >>>> >> colors do
> >> >>>> >> not* refer to the same likert-item, which I understand - the
> >> >>>> >> colors
> >> >>>> >> go in
> >> >>>> >> sequence along the table.
> >> >>>> >> Question: how can I write a syntax that each likert-item has the
> >> >>>> >> same
> >> >>>> >> legend color?
> >> >>>> >> Thank you in advance,
> >> >>>> >>
> >> >>>> >> Roberto
> >> >>>> >>
> >> >>>> >> SYNTAX:
> >> >>>> >> counts19 <- table(teamq[,19])
> >> >>>> >> counts20 <- table(teamq[,20])
> >> >>>> >> barplot(as.matrix(counts19), horiz = T,
> >> >>>> >>         col=c("yellow","sandybrown","orange",
> >> >>>> >> "darkolivegreen","green"),
> >> >>>> >> legend=T)
> >> >>>> >> barplot(as.matrix(counts20), horiz = T,
> >> >>>> >>         col=c("yellow","sandybrown","orange",
> >> >>>> >> "darkolivegreen","green"),
> >> >>>> >> legend=T)
> >> >>>> >>
> >> >>>> >>         [[alternative HTML version deleted]]
> >> >>>> >>
> >> >>>> >> ______________________________________________
> >> >>>> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
> see
> >> >>>> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> >>>> >> PLEASE do read the posting guide
> >> >>>> >> http://www.R-project.org/posting-guide.html
> >> >>>> >> and provide commented, minimal, self-contained, reproducible
> code.
> >> >>>> >>
> >> >>>> >
> >> >>>> >         [[alternative HTML version deleted]]
> >> >>>> >
> >> >>>> > ______________________________________________
> >> >>>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
> see
> >> >>>> > https://stat.ethz.ch/mailman/listinfo/r-help
> >> >>>> > PLEASE do read the posting guide
> >> >>>> > http://www.R-project.org/posting-guide.html
> >> >>>> > and provide commented, minimal, self-contained, reproducible
> code.
>

	[[alternative HTML version deleted]]



From r@ub@cr|be @end|ng |rom |nbox@ru  Wed Oct 31 23:28:14 2018
From: r@ub@cr|be @end|ng |rom |nbox@ru (=?UTF-8?B?cnN1YnNjcmliZSAu?=)
Date: Thu, 01 Nov 2018 01:28:14 +0300
Subject: [R] =?utf-8?q?survival_analysis_question?=
Message-ID: <1541024894.533234226@f515.i.mail.ru>

Thank You,Eric. I run this code without id="id" and it worked!

Eric Berger <ericjberger at gmail.com>:
<The addicts data.frame has as its first column 'id', which seems to be the cause of the ERROR message.>
?
?Medic <rsubscribe at inbox.ru>  via? R - help ?< r - help @ r -project.org > wrote:
<When I run code, I got the ERROR: 
> addicts.cp=survSplit(addicts, cut=addicts$survt[addicts$status==1], end="survt", event="status",start="start", id="id")
>ERROR in survSplit(addicts, cut = addicts$survt[addicts$status == 1],: the suggested id name is already present.>

