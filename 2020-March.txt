From g||ted|||e2014 @end|ng |rom gm@||@com  Sun Mar  1 22:12:04 2020
From: g||ted|||e2014 @end|ng |rom gm@||@com (Ogbos Okike)
Date: Sun, 1 Mar 2020 22:12:04 +0100
Subject: [R] Isolating Distinct Dates between two data frames
Message-ID: <CAC8ss31sziqeGSTLDfEBakhp5ahYANK2AUCDC-4fAjhvmG4TVg@mail.gmail.com>

Dear Friends,
I have two data frame of the form:
1997-11-2219 -2.54910135429339
1997-11-2222 -2.66865640466636
1997-11-2305 -2.60761691358946
1997-12-1104 -2.5323738405159
1997-12-1106 -2.6020470080341
1998-05-0204 -4.49745020062937
1998-05-0209 -4.9462725263541
1998-05-0213 -4.60533021405541
1998-05-0218 -4.24415210827579
1998-05-0220 -4.04368079911755
1998-05-0222 -4.05320945184028
1998-05-0302 -4.97226664313875
1998-05-0307 -3.59108791877756
1998-05-0310 -4.06038057061717
1998-05-0313 -4.25967313751507
1998-05-0316 -3.51896561964782
1998-05-0318 -3.43849389406503
1998-05-0321 -2.85778623531446
1998-05-0323 -2.75731441597261
1998-05-0401 -2.85684255921844
1998-05-0403 -2.69637066510405
1998-05-0408 -4.47519076670884
1998-05-0411 -4.2644827160855
1998-05-0414 -4.20377458198688
1998-05-0417 -4.27306636458818
1998-05-0420 -4.05235806406442
1998-05-0500 -4.19141353436269
1998-05-0506 -4.23999646421515
1998-05-0510 -3.95905156765632
1998-05-0512 -3.63857906459363

and
1997-11-2221 -2.04916867404692
1997-11-2303 -1.7285761175751
1998-04-3010 -1.51968127380408
1998-04-3016 -1.51845077174125
1998-05-0101 -1.91660416876407
1998-05-0104 -2.11598840871961
1998-05-0107 -1.99537253619755
1998-05-0109 -1.81496189214167
1998-05-0112 -1.7343458326657
1998-05-0114 -1.77393506418581
1998-05-0121 -1.57249698394961
1998-05-0204 -3.64105829839415
1998-05-0207 -3.5504415342881
1998-05-0209 -3.71003029685917
1998-05-0213 -3.31920767504605
1998-05-0219 -3.98797337595274
1998-05-0300 -3.17694445869443
1998-05-0304 -3.09612110658432
1998-05-0306 -3.29570935794719
1998-05-0308 -3.24529756101203
1998-05-0310 -3.20488571584633
1998-05-0312 -3.16447382251761
1998-05-0314 -2.86406188109331
1998-05-0319 -2.5430318175571
1998-05-0321 -2.87261970832946
1998-05-0400 -2.55200145489882
1998-05-0407 -3.27055844665711
1998-05-0409 -3.24014605168738
1998-05-0412 -3.29952737040137
1998-05-0414 -3.44911485708791

Some dates are common among the two.

I use few  lines of code to select the common dates:
setwd("./")
 list1<-read.table("THUL1",col.names=c("V1","V2"))
 list2<-read.table("INVK1",col.names=c("V1","V2"))
 B<-merge(list1,list2, by ="V1")

Now, I wish to do something differently. I want to identify the dates that
are in THUL1 but are not in INVK1 or vise versa, that is to identify
uncommon dates among the two lists.

Could you please assist me to achieve it.

Thank you.
Best regards
Ogbos

	[[alternative HTML version deleted]]


From @@r@h@go@|ee @end|ng |rom gm@||@com  Sun Mar  1 22:26:55 2020
From: @@r@h@go@|ee @end|ng |rom gm@||@com (Sarah Goslee)
Date: Sun, 1 Mar 2020 16:26:55 -0500
Subject: [R] Isolating Distinct Dates between two data frames
In-Reply-To: <CAC8ss31sziqeGSTLDfEBakhp5ahYANK2AUCDC-4fAjhvmG4TVg@mail.gmail.com>
References: <CAC8ss31sziqeGSTLDfEBakhp5ahYANK2AUCDC-4fAjhvmG4TVg@mail.gmail.com>
Message-ID: <CAM_vjumEZb3st-1sgMdhGWvNF3Bp-Lh_AW2U27VK=5MdEFKuKg@mail.gmail.com>

Look at the all arguments to merge() - you can keep the non-matching
dates, and look for NA values in the data.

Sarah

On Sun, Mar 1, 2020 at 4:12 PM Ogbos Okike <giftedlife2014 at gmail.com> wrote:
>
> Dear Friends,
> I have two data frame of the form:
> 1997-11-2219 -2.54910135429339
> 1997-11-2222 -2.66865640466636
> 1997-11-2305 -2.60761691358946
> 1997-12-1104 -2.5323738405159
> 1997-12-1106 -2.6020470080341
> 1998-05-0204 -4.49745020062937
> 1998-05-0209 -4.9462725263541
> 1998-05-0213 -4.60533021405541
> 1998-05-0218 -4.24415210827579
> 1998-05-0220 -4.04368079911755
> 1998-05-0222 -4.05320945184028
> 1998-05-0302 -4.97226664313875
> 1998-05-0307 -3.59108791877756
> 1998-05-0310 -4.06038057061717
> 1998-05-0313 -4.25967313751507
> 1998-05-0316 -3.51896561964782
> 1998-05-0318 -3.43849389406503
> 1998-05-0321 -2.85778623531446
> 1998-05-0323 -2.75731441597261
> 1998-05-0401 -2.85684255921844
> 1998-05-0403 -2.69637066510405
> 1998-05-0408 -4.47519076670884
> 1998-05-0411 -4.2644827160855
> 1998-05-0414 -4.20377458198688
> 1998-05-0417 -4.27306636458818
> 1998-05-0420 -4.05235806406442
> 1998-05-0500 -4.19141353436269
> 1998-05-0506 -4.23999646421515
> 1998-05-0510 -3.95905156765632
> 1998-05-0512 -3.63857906459363
>
> and
> 1997-11-2221 -2.04916867404692
> 1997-11-2303 -1.7285761175751
> 1998-04-3010 -1.51968127380408
> 1998-04-3016 -1.51845077174125
> 1998-05-0101 -1.91660416876407
> 1998-05-0104 -2.11598840871961
> 1998-05-0107 -1.99537253619755
> 1998-05-0109 -1.81496189214167
> 1998-05-0112 -1.7343458326657
> 1998-05-0114 -1.77393506418581
> 1998-05-0121 -1.57249698394961
> 1998-05-0204 -3.64105829839415
> 1998-05-0207 -3.5504415342881
> 1998-05-0209 -3.71003029685917
> 1998-05-0213 -3.31920767504605
> 1998-05-0219 -3.98797337595274
> 1998-05-0300 -3.17694445869443
> 1998-05-0304 -3.09612110658432
> 1998-05-0306 -3.29570935794719
> 1998-05-0308 -3.24529756101203
> 1998-05-0310 -3.20488571584633
> 1998-05-0312 -3.16447382251761
> 1998-05-0314 -2.86406188109331
> 1998-05-0319 -2.5430318175571
> 1998-05-0321 -2.87261970832946
> 1998-05-0400 -2.55200145489882
> 1998-05-0407 -3.27055844665711
> 1998-05-0409 -3.24014605168738
> 1998-05-0412 -3.29952737040137
> 1998-05-0414 -3.44911485708791
>
> Some dates are common among the two.
>
> I use few  lines of code to select the common dates:
> setwd("./")
>  list1<-read.table("THUL1",col.names=c("V1","V2"))
>  list2<-read.table("INVK1",col.names=c("V1","V2"))
>  B<-merge(list1,list2, by ="V1")
>
> Now, I wish to do something differently. I want to identify the dates that
> are in THUL1 but are not in INVK1 or vise versa, that is to identify
> uncommon dates among the two lists.
>
> Could you please assist me to achieve it.
>
> Thank you.
> Best regards
> Ogbos
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Sarah Goslee (she/her)
http://www.sarahgoslee.com


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Mar  1 22:42:30 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 01 Mar 2020 13:42:30 -0800
Subject: [R] Isolating Distinct Dates between two data frames
In-Reply-To: <CAC8ss31sziqeGSTLDfEBakhp5ahYANK2AUCDC-4fAjhvmG4TVg@mail.gmail.com>
References: <CAC8ss31sziqeGSTLDfEBakhp5ahYANK2AUCDC-4fAjhvmG4TVg@mail.gmail.com>
Message-ID: <ECE96616-3504-438C-9407-84BDC6C1F270@dcn.davis.ca.us>

a) Your use of HTML is corrupting your data. Post using plain text, and use dput output instead of trying to insert tables.

b) You should read about ?setdiff.

On March 1, 2020 1:12:04 PM PST, Ogbos Okike <giftedlife2014 at gmail.com> wrote:
>Dear Friends,
>I have two data frame of the form:
>1997-11-2219 -2.54910135429339
>1997-11-2222 -2.66865640466636
>1997-11-2305 -2.60761691358946
>1997-12-1104 -2.5323738405159
>1997-12-1106 -2.6020470080341
>1998-05-0204 -4.49745020062937
>1998-05-0209 -4.9462725263541
>1998-05-0213 -4.60533021405541
>1998-05-0218 -4.24415210827579
>1998-05-0220 -4.04368079911755
>1998-05-0222 -4.05320945184028
>1998-05-0302 -4.97226664313875
>1998-05-0307 -3.59108791877756
>1998-05-0310 -4.06038057061717
>1998-05-0313 -4.25967313751507
>1998-05-0316 -3.51896561964782
>1998-05-0318 -3.43849389406503
>1998-05-0321 -2.85778623531446
>1998-05-0323 -2.75731441597261
>1998-05-0401 -2.85684255921844
>1998-05-0403 -2.69637066510405
>1998-05-0408 -4.47519076670884
>1998-05-0411 -4.2644827160855
>1998-05-0414 -4.20377458198688
>1998-05-0417 -4.27306636458818
>1998-05-0420 -4.05235806406442
>1998-05-0500 -4.19141353436269
>1998-05-0506 -4.23999646421515
>1998-05-0510 -3.95905156765632
>1998-05-0512 -3.63857906459363
>
>and
>1997-11-2221 -2.04916867404692
>1997-11-2303 -1.7285761175751
>1998-04-3010 -1.51968127380408
>1998-04-3016 -1.51845077174125
>1998-05-0101 -1.91660416876407
>1998-05-0104 -2.11598840871961
>1998-05-0107 -1.99537253619755
>1998-05-0109 -1.81496189214167
>1998-05-0112 -1.7343458326657
>1998-05-0114 -1.77393506418581
>1998-05-0121 -1.57249698394961
>1998-05-0204 -3.64105829839415
>1998-05-0207 -3.5504415342881
>1998-05-0209 -3.71003029685917
>1998-05-0213 -3.31920767504605
>1998-05-0219 -3.98797337595274
>1998-05-0300 -3.17694445869443
>1998-05-0304 -3.09612110658432
>1998-05-0306 -3.29570935794719
>1998-05-0308 -3.24529756101203
>1998-05-0310 -3.20488571584633
>1998-05-0312 -3.16447382251761
>1998-05-0314 -2.86406188109331
>1998-05-0319 -2.5430318175571
>1998-05-0321 -2.87261970832946
>1998-05-0400 -2.55200145489882
>1998-05-0407 -3.27055844665711
>1998-05-0409 -3.24014605168738
>1998-05-0412 -3.29952737040137
>1998-05-0414 -3.44911485708791
>
>Some dates are common among the two.
>
>I use few  lines of code to select the common dates:
>setwd("./")
> list1<-read.table("THUL1",col.names=c("V1","V2"))
> list2<-read.table("INVK1",col.names=c("V1","V2"))
> B<-merge(list1,list2, by ="V1")
>
>Now, I wish to do something differently. I want to identify the dates
>that
>are in THUL1 but are not in INVK1 or vise versa, that is to identify
>uncommon dates among the two lists.
>
>Could you please assist me to achieve it.
>
>Thank you.
>Best regards
>Ogbos
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From drj|m|emon @end|ng |rom gm@||@com  Sun Mar  1 22:49:00 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Mon, 2 Mar 2020 08:49:00 +1100
Subject: [R] Isolating Distinct Dates between two data frames
In-Reply-To: <CAC8ss31sziqeGSTLDfEBakhp5ahYANK2AUCDC-4fAjhvmG4TVg@mail.gmail.com>
References: <CAC8ss31sziqeGSTLDfEBakhp5ahYANK2AUCDC-4fAjhvmG4TVg@mail.gmail.com>
Message-ID: <CA+8X3fVJcMUnbn2TRyFHv66atHidyb1M9ekUMWNf1m7HTfMVgg@mail.gmail.com>

Hi Ogbos,
One way to get all combinations of common and different dates is:

THULinINVK<-which(THUL1$V1 %in% INVK1$V1)
THULnotinINVK<-which(!(THUL1$V1 %in% INVK1$V1))
INVKinTHUL<-which(INVK1$V1 %in% THUL1$V1)
INVKnotinTHUL<-which(!(INVK1$V1 %in% THUL1$V1))

This produces vectors of indices that can be used in further calculations.

Jim

On Mon, Mar 2, 2020 at 8:12 AM Ogbos Okike <giftedlife2014 at gmail.com> wrote:
>
> Dear Friends,
> I have two data frame of the form:
> 1997-11-2219 -2.54910135429339
> 1997-11-2222 -2.66865640466636
> 1997-11-2305 -2.60761691358946
> 1997-12-1104 -2.5323738405159
> 1997-12-1106 -2.6020470080341
> 1998-05-0204 -4.49745020062937
> 1998-05-0209 -4.9462725263541
> 1998-05-0213 -4.60533021405541
> 1998-05-0218 -4.24415210827579
> 1998-05-0220 -4.04368079911755
> 1998-05-0222 -4.05320945184028
> 1998-05-0302 -4.97226664313875
> 1998-05-0307 -3.59108791877756
> 1998-05-0310 -4.06038057061717
> 1998-05-0313 -4.25967313751507
> 1998-05-0316 -3.51896561964782
> 1998-05-0318 -3.43849389406503
> 1998-05-0321 -2.85778623531446
> 1998-05-0323 -2.75731441597261
> 1998-05-0401 -2.85684255921844
> 1998-05-0403 -2.69637066510405
> 1998-05-0408 -4.47519076670884
> 1998-05-0411 -4.2644827160855
> 1998-05-0414 -4.20377458198688
> 1998-05-0417 -4.27306636458818
> 1998-05-0420 -4.05235806406442
> 1998-05-0500 -4.19141353436269
> 1998-05-0506 -4.23999646421515
> 1998-05-0510 -3.95905156765632
> 1998-05-0512 -3.63857906459363
>
> and
> 1997-11-2221 -2.04916867404692
> 1997-11-2303 -1.7285761175751
> 1998-04-3010 -1.51968127380408
> 1998-04-3016 -1.51845077174125
> 1998-05-0101 -1.91660416876407
> 1998-05-0104 -2.11598840871961
> 1998-05-0107 -1.99537253619755
> 1998-05-0109 -1.81496189214167
> 1998-05-0112 -1.7343458326657
> 1998-05-0114 -1.77393506418581
> 1998-05-0121 -1.57249698394961
> 1998-05-0204 -3.64105829839415
> 1998-05-0207 -3.5504415342881
> 1998-05-0209 -3.71003029685917
> 1998-05-0213 -3.31920767504605
> 1998-05-0219 -3.98797337595274
> 1998-05-0300 -3.17694445869443
> 1998-05-0304 -3.09612110658432
> 1998-05-0306 -3.29570935794719
> 1998-05-0308 -3.24529756101203
> 1998-05-0310 -3.20488571584633
> 1998-05-0312 -3.16447382251761
> 1998-05-0314 -2.86406188109331
> 1998-05-0319 -2.5430318175571
> 1998-05-0321 -2.87261970832946
> 1998-05-0400 -2.55200145489882
> 1998-05-0407 -3.27055844665711
> 1998-05-0409 -3.24014605168738
> 1998-05-0412 -3.29952737040137
> 1998-05-0414 -3.44911485708791
>
> Some dates are common among the two.
>
> I use few  lines of code to select the common dates:
> setwd("./")
>  list1<-read.table("THUL1",col.names=c("V1","V2"))
>  list2<-read.table("INVK1",col.names=c("V1","V2"))
>  B<-merge(list1,list2, by ="V1")
>
> Now, I wish to do something differently. I want to identify the dates that
> are in THUL1 but are not in INVK1 or vise versa, that is to identify
> uncommon dates among the two lists.
>
> Could you please assist me to achieve it.
>
> Thank you.
> Best regards
> Ogbos
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From g|ennm@chu|tz @end|ng |rom me@com  Sun Mar  1 15:42:13 2020
From: g|ennm@chu|tz @end|ng |rom me@com (Glenn Schultz)
Date: Sun, 01 Mar 2020 14:42:13 -0000
Subject: [R] using mutate to remove all white space
Message-ID: <3587b5ba-708c-47fc-b33c-57970ec23844@me.com>

All,

This may not be the proper place to ask as the question is dplyr and removing white space using mutate. ?My code is below:

```{r, echo = FALSE, message = FALSE
conn <- myconnection
````

```{r, echo = FALSE, message=FALSE}
fhlloanbalance <- tbl(conn, "fhlloan_balance_view")
colnames(fhlloanbalance)
```

```{r, echo=FALSE, message=FALSE}
fhlloanbalance %>%
select(fctrdt, servicer) %>%
filter(fctrdt == '2020-01-01') %>%
mutate(servicer = 'I need to remove all white space')
```
I have tried a number of approaches using stringr - stringi - and gsub. ?The problem I think I am facing: I cannot seem to operate on the column in sql this is relative straight forward using replace. ?I have tried several approaches and scanned the internet but I cannot seem to come up with a workable solution. ?Any help is appreciated. ?I suppose I could just default back to sql but would prefer to use dplyr.

Best,
Glenn

From g||ted|||e2014 @end|ng |rom gm@||@com  Mon Mar  2 03:46:52 2020
From: g||ted|||e2014 @end|ng |rom gm@||@com (Ogbos Okike)
Date: Mon, 2 Mar 2020 03:46:52 +0100
Subject: [R] Isolating Distinct Dates between two data frames
In-Reply-To: <ECE96616-3504-438C-9407-84BDC6C1F270@dcn.davis.ca.us>
References: <CAC8ss31sziqeGSTLDfEBakhp5ahYANK2AUCDC-4fAjhvmG4TVg@mail.gmail.com>
 <ECE96616-3504-438C-9407-84BDC6C1F270@dcn.davis.ca.us>
Message-ID: <CAC8ss32aYueQveks8JBQ60XWAW54wxvBSHd50=nLTgEU2QnHNA@mail.gmail.com>

Dear Jeff,
I had initially set to plain text. I didn't know when it reverted to
HTML. It has been corrected. Thanks for informing me.

I have checked ?setdiff. The examples are well explained, so it was
not hard for me to use. However, it did not seem to tackle my problem.
I have two columns but it produces results of differences or
similarities using one column. Thus, I lost track of the second
column. Since I need the two columns to plot some graphs, I got a
little confused and thus, could not continue.

I have now used dput function to attach the two files.

As I mentioned in my first mail, each of the files have two columns. I
can select dates common to both using the date column. The output
looks great to me as it outputs each of the second columns in each of
the files. That helps me to do some plotting and other comparisons.  I
used the simple script I indicated to achieve it. Or in case it was
garbled, here it is again:
setwd("./")
 list1<-read.table("THUL1",col.names=c("V1","V2"))
 list2<-read.table("INVK1",col.names=c("V1","V2"))
 B<-merge(list1,list2, by ="V1")
 head(B)

B gives the common date as well as the data in column 2 of each files
associated with the common date.

Now, what I am trying to achieve is to use this common date as a
reference point and run a similar script like the one above
9possibly). But this time, I wish to produce the date and the
associated V2 in THUL1 or INVK1 that is not in the common date. This
common date are technically called simultaneous dates while the
non-common dates describe the globally non-simultaneous events. But
again the associated V2 are useful in each case, else, the date
information alone makes no sense.

So B gives me the common date for both cosmic ray stations and my
problem now is how to use this B to discriminate between the common
date and the unequal or nonidentical dates and their associated V2
data in each of the stations, Inuvick and Thule data.

I would be most grateful for any more help.
Best regards
Ogbos


On Sun, Mar 1, 2020 at 10:42 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>
> a) Your use of HTML is corrupting your data. Post using plain text, and use dput output instead of trying to insert tables.
>
> b) You should read about ?setdiff.
>
> On March 1, 2020 1:12:04 PM PST, Ogbos Okike <giftedlife2014 at gmail.com> wrote:
> >Dear Friends,
> >I have two data frame of the form:
> >1997-11-2219 -2.54910135429339
> >1997-11-2222 -2.66865640466636
> >1997-11-2305 -2.60761691358946
> >1997-12-1104 -2.5323738405159
> >1997-12-1106 -2.6020470080341
> >1998-05-0204 -4.49745020062937
> >1998-05-0209 -4.9462725263541
> >1998-05-0213 -4.60533021405541
> >1998-05-0218 -4.24415210827579
> >1998-05-0220 -4.04368079911755
> >1998-05-0222 -4.05320945184028
> >1998-05-0302 -4.97226664313875
> >1998-05-0307 -3.59108791877756
> >1998-05-0310 -4.06038057061717
> >1998-05-0313 -4.25967313751507
> >1998-05-0316 -3.51896561964782
> >1998-05-0318 -3.43849389406503
> >1998-05-0321 -2.85778623531446
> >1998-05-0323 -2.75731441597261
> >1998-05-0401 -2.85684255921844
> >1998-05-0403 -2.69637066510405
> >1998-05-0408 -4.47519076670884
> >1998-05-0411 -4.2644827160855
> >1998-05-0414 -4.20377458198688
> >1998-05-0417 -4.27306636458818
> >1998-05-0420 -4.05235806406442
> >1998-05-0500 -4.19141353436269
> >1998-05-0506 -4.23999646421515
> >1998-05-0510 -3.95905156765632
> >1998-05-0512 -3.63857906459363
> >
> >and
> >1997-11-2221 -2.04916867404692
> >1997-11-2303 -1.7285761175751
> >1998-04-3010 -1.51968127380408
> >1998-04-3016 -1.51845077174125
> >1998-05-0101 -1.91660416876407
> >1998-05-0104 -2.11598840871961
> >1998-05-0107 -1.99537253619755
> >1998-05-0109 -1.81496189214167
> >1998-05-0112 -1.7343458326657
> >1998-05-0114 -1.77393506418581
> >1998-05-0121 -1.57249698394961
> >1998-05-0204 -3.64105829839415
> >1998-05-0207 -3.5504415342881
> >1998-05-0209 -3.71003029685917
> >1998-05-0213 -3.31920767504605
> >1998-05-0219 -3.98797337595274
> >1998-05-0300 -3.17694445869443
> >1998-05-0304 -3.09612110658432
> >1998-05-0306 -3.29570935794719
> >1998-05-0308 -3.24529756101203
> >1998-05-0310 -3.20488571584633
> >1998-05-0312 -3.16447382251761
> >1998-05-0314 -2.86406188109331
> >1998-05-0319 -2.5430318175571
> >1998-05-0321 -2.87261970832946
> >1998-05-0400 -2.55200145489882
> >1998-05-0407 -3.27055844665711
> >1998-05-0409 -3.24014605168738
> >1998-05-0412 -3.29952737040137
> >1998-05-0414 -3.44911485708791
> >
> >Some dates are common among the two.
> >
> >I use few  lines of code to select the common dates:
> >setwd("./")
> > list1<-read.table("THUL1",col.names=c("V1","V2"))
> > list2<-read.table("INVK1",col.names=c("V1","V2"))
> > B<-merge(list1,list2, by ="V1")
> >
> >Now, I wish to do something differently. I want to identify the dates
> >that
> >are in THUL1 but are not in INVK1 or vise versa, that is to identify
> >uncommon dates among the two lists.
> >
> >Could you please assist me to achieve it.
> >
> >Thank you.
> >Best regards
> >Ogbos
> >
> >       [[alternative HTML version deleted]]
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my phone. Please excuse my brevity.

From g||ted|||e2014 @end|ng |rom gm@||@com  Mon Mar  2 03:54:45 2020
From: g||ted|||e2014 @end|ng |rom gm@||@com (Ogbos Okike)
Date: Mon, 2 Mar 2020 03:54:45 +0100
Subject: [R] A new Paper on automatic selection of Turning Point
Message-ID: <CAC8ss30_mowZ9cj29vV8AyKJr0BRCAdbnmBGDYmi4pTecXjrBg@mail.gmail.com>

Dear Experts,
I asked about a turning identification last few weeks. I got much help
from the list and was really really happy.

When part of the work was published, I was happy to show you and
further thank the contributors. Unfortunately, the moderator didn't
allow the pdf to go. A link was rather recommended.

I am putting the link here for you. Thank you very much. The work I do
using R is acceptable in some high impact journals.

Best regards
Ogbos

Abstract:
https://academic.oup.com/mnras/article-abstract/493/2/1948/5764172
Article (free access):
https://academic.oup.com/mnras/article/493/2/1948/5764172?guestAccessKey=ce6965a5-a228-4b9a-b544-128953e05f17


From bgunter@4567 @end|ng |rom gm@||@com  Mon Mar  2 03:54:30 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 1 Mar 2020 18:54:30 -0800
Subject: [R] using mutate to remove all white space
In-Reply-To: <3587b5ba-708c-47fc-b33c-57970ec23844@me.com>
References: <3587b5ba-708c-47fc-b33c-57970ec23844@me.com>
Message-ID: <CAGxFJbSjfrSCAgEkkH9CEo_6fVMguRKnYJTqqOikUBzXO+h3eA@mail.gmail.com>

I don't use dplyr, but it's trivial with gsub, assuming I understand
correctly:

> x <- "a  b\t c\n e"
> cat(x)
a  b c
 e
> gsub("[[:space:]]", "",x)
[1] "abce"

See ?regex for details (of course!), especially the section on character
classes.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sun, Mar 1, 2020 at 6:33 PM Glenn Schultz via R-help <
r-help at r-project.org> wrote:

> All,
>
> This may not be the proper place to ask as the question is dplyr and
> removing white space using mutate.  My code is below:
>
> ```{r, echo = FALSE, message = FALSE
> conn <- myconnection
> ````
>
> ```{r, echo = FALSE, message=FALSE}
> fhlloanbalance <- tbl(conn, "fhlloan_balance_view")
> colnames(fhlloanbalance)
> ```
>
> ```{r, echo=FALSE, message=FALSE}
> fhlloanbalance %>%
> select(fctrdt, servicer) %>%
> filter(fctrdt == '2020-01-01') %>%
> mutate(servicer = 'I need to remove all white space')
> ```
> I have tried a number of approaches using stringr - stringi - and gsub.
> The problem I think I am facing: I cannot seem to operate on the column in
> sql this is relative straight forward using replace.  I have tried several
> approaches and scanned the internet but I cannot seem to come up with a
> workable solution.  Any help is appreciated.  I suppose I could just
> default back to sql but would prefer to use dplyr.
>
> Best,
> Glenn
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From g||ted|||e2014 @end|ng |rom gm@||@com  Mon Mar  2 04:10:41 2020
From: g||ted|||e2014 @end|ng |rom gm@||@com (Ogbos Okike)
Date: Mon, 2 Mar 2020 04:10:41 +0100
Subject: [R] Isolating Distinct Dates between two data frames
In-Reply-To: <CA+8X3fVJcMUnbn2TRyFHv66atHidyb1M9ekUMWNf1m7HTfMVgg@mail.gmail.com>
References: <CAC8ss31sziqeGSTLDfEBakhp5ahYANK2AUCDC-4fAjhvmG4TVg@mail.gmail.com>
 <CA+8X3fVJcMUnbn2TRyFHv66atHidyb1M9ekUMWNf1m7HTfMVgg@mail.gmail.com>
Message-ID: <CAC8ss32xTrmR0+iXxCEcz-aiis3nrZCP+es+tzE9Rgx=g-WR7g@mail.gmail.com>

Dear Jim,
Many thanks for sparing your time to assist me.

I have tried your codes. It worked very well to some extent for me. At
least it produced the indices you mentioned.

But I got stuck when I think of how to use it in further calculations
as you indicated. I tried including the indices as the first column of
the data. I did the same for each of the station data. That is
including the length (example 1:1609) as the first column. But that
brought me back to the original problem as I had no means of isolating
the uncommon dates using the common dates selected for the two
stations.

I guess that you can point me further to the right direction to use
the indices to discriminate between common dates and uncommon dates
and their associated V2 (Forbush events).

Warm regards
Ogbos

On Sun, Mar 1, 2020 at 10:49 PM Jim Lemon <drjimlemon at gmail.com> wrote:
>
> Hi Ogbos,
> One way to get all combinations of common and different dates is:
>
> THULinINVK<-which(THUL1$V1 %in% INVK1$V1)
> THULnotinINVK<-which(!(THUL1$V1 %in% INVK1$V1))
> INVKinTHUL<-which(INVK1$V1 %in% THUL1$V1)
> INVKnotinTHUL<-which(!(INVK1$V1 %in% THUL1$V1))
>
> This produces vectors of indices that can be used in further calculations.
>
> Jim
>
> On Mon, Mar 2, 2020 at 8:12 AM Ogbos Okike <giftedlife2014 at gmail.com> wrote:
> >
> > Dear Friends,
> > I have two data frame of the form:
> > 1997-11-2219 -2.54910135429339
> > 1997-11-2222 -2.66865640466636
> > 1997-11-2305 -2.60761691358946
> > 1997-12-1104 -2.5323738405159
> > 1997-12-1106 -2.6020470080341
> > 1998-05-0204 -4.49745020062937
> > 1998-05-0209 -4.9462725263541
> > 1998-05-0213 -4.60533021405541
> > 1998-05-0218 -4.24415210827579
> > 1998-05-0220 -4.04368079911755
> > 1998-05-0222 -4.05320945184028
> > 1998-05-0302 -4.97226664313875
> > 1998-05-0307 -3.59108791877756
> > 1998-05-0310 -4.06038057061717
> > 1998-05-0313 -4.25967313751507
> > 1998-05-0316 -3.51896561964782
> > 1998-05-0318 -3.43849389406503
> > 1998-05-0321 -2.85778623531446
> > 1998-05-0323 -2.75731441597261
> > 1998-05-0401 -2.85684255921844
> > 1998-05-0403 -2.69637066510405
> > 1998-05-0408 -4.47519076670884
> > 1998-05-0411 -4.2644827160855
> > 1998-05-0414 -4.20377458198688
> > 1998-05-0417 -4.27306636458818
> > 1998-05-0420 -4.05235806406442
> > 1998-05-0500 -4.19141353436269
> > 1998-05-0506 -4.23999646421515
> > 1998-05-0510 -3.95905156765632
> > 1998-05-0512 -3.63857906459363
> >
> > and
> > 1997-11-2221 -2.04916867404692
> > 1997-11-2303 -1.7285761175751
> > 1998-04-3010 -1.51968127380408
> > 1998-04-3016 -1.51845077174125
> > 1998-05-0101 -1.91660416876407
> > 1998-05-0104 -2.11598840871961
> > 1998-05-0107 -1.99537253619755
> > 1998-05-0109 -1.81496189214167
> > 1998-05-0112 -1.7343458326657
> > 1998-05-0114 -1.77393506418581
> > 1998-05-0121 -1.57249698394961
> > 1998-05-0204 -3.64105829839415
> > 1998-05-0207 -3.5504415342881
> > 1998-05-0209 -3.71003029685917
> > 1998-05-0213 -3.31920767504605
> > 1998-05-0219 -3.98797337595274
> > 1998-05-0300 -3.17694445869443
> > 1998-05-0304 -3.09612110658432
> > 1998-05-0306 -3.29570935794719
> > 1998-05-0308 -3.24529756101203
> > 1998-05-0310 -3.20488571584633
> > 1998-05-0312 -3.16447382251761
> > 1998-05-0314 -2.86406188109331
> > 1998-05-0319 -2.5430318175571
> > 1998-05-0321 -2.87261970832946
> > 1998-05-0400 -2.55200145489882
> > 1998-05-0407 -3.27055844665711
> > 1998-05-0409 -3.24014605168738
> > 1998-05-0412 -3.29952737040137
> > 1998-05-0414 -3.44911485708791
> >
> > Some dates are common among the two.
> >
> > I use few  lines of code to select the common dates:
> > setwd("./")
> >  list1<-read.table("THUL1",col.names=c("V1","V2"))
> >  list2<-read.table("INVK1",col.names=c("V1","V2"))
> >  B<-merge(list1,list2, by ="V1")
> >
> > Now, I wish to do something differently. I want to identify the dates that
> > are in THUL1 but are not in INVK1 or vise versa, that is to identify
> > uncommon dates among the two lists.
> >
> > Could you please assist me to achieve it.
> >
> > Thank you.
> > Best regards
> > Ogbos
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.


From g||ted|||e2014 @end|ng |rom gm@||@com  Mon Mar  2 04:58:41 2020
From: g||ted|||e2014 @end|ng |rom gm@||@com (Ogbos Okike)
Date: Mon, 2 Mar 2020 04:58:41 +0100
Subject: [R] Isolating Distinct Dates between two data frames
In-Reply-To: <CAM_vjumEZb3st-1sgMdhGWvNF3Bp-Lh_AW2U27VK=5MdEFKuKg@mail.gmail.com>
References: <CAC8ss31sziqeGSTLDfEBakhp5ahYANK2AUCDC-4fAjhvmG4TVg@mail.gmail.com>
 <CAM_vjumEZb3st-1sgMdhGWvNF3Bp-Lh_AW2U27VK=5MdEFKuKg@mail.gmail.com>
Message-ID: <CAC8ss33mauQaHbw1ch3=gOsg9Wz7xChEcJxScS10_Q0-iaUYSg@mail.gmail.com>

Dear Sarah,
Thank you for your contribution.

I have tried to use merge function as suggested. But the function
seems to work with data frame. And the file cannot be in the form of
data frame as they have different lengths. I also tried whether I can
use the function without data frame. It didn't work either.

I have used dput function to send all the data.

Please take a second look and see if there is a better way to go.

Thank you.
Best regards
Ogbos

On Sun, Mar 1, 2020 at 10:27 PM Sarah Goslee <sarah.goslee at gmail.com> wrote:
>
> Look at the all arguments to merge() - you can keep the non-matching
> dates, and look for NA values in the data.
>
> Sarah
>
> On Sun, Mar 1, 2020 at 4:12 PM Ogbos Okike <giftedlife2014 at gmail.com> wrote:
> >
> > Dear Friends,
> > I have two data frame of the form:
> > 1997-11-2219 -2.54910135429339
> > 1997-11-2222 -2.66865640466636
> > 1997-11-2305 -2.60761691358946
> > 1997-12-1104 -2.5323738405159
> > 1997-12-1106 -2.6020470080341
> > 1998-05-0204 -4.49745020062937
> > 1998-05-0209 -4.9462725263541
> > 1998-05-0213 -4.60533021405541
> > 1998-05-0218 -4.24415210827579
> > 1998-05-0220 -4.04368079911755
> > 1998-05-0222 -4.05320945184028
> > 1998-05-0302 -4.97226664313875
> > 1998-05-0307 -3.59108791877756
> > 1998-05-0310 -4.06038057061717
> > 1998-05-0313 -4.25967313751507
> > 1998-05-0316 -3.51896561964782
> > 1998-05-0318 -3.43849389406503
> > 1998-05-0321 -2.85778623531446
> > 1998-05-0323 -2.75731441597261
> > 1998-05-0401 -2.85684255921844
> > 1998-05-0403 -2.69637066510405
> > 1998-05-0408 -4.47519076670884
> > 1998-05-0411 -4.2644827160855
> > 1998-05-0414 -4.20377458198688
> > 1998-05-0417 -4.27306636458818
> > 1998-05-0420 -4.05235806406442
> > 1998-05-0500 -4.19141353436269
> > 1998-05-0506 -4.23999646421515
> > 1998-05-0510 -3.95905156765632
> > 1998-05-0512 -3.63857906459363
> >
> > and
> > 1997-11-2221 -2.04916867404692
> > 1997-11-2303 -1.7285761175751
> > 1998-04-3010 -1.51968127380408
> > 1998-04-3016 -1.51845077174125
> > 1998-05-0101 -1.91660416876407
> > 1998-05-0104 -2.11598840871961
> > 1998-05-0107 -1.99537253619755
> > 1998-05-0109 -1.81496189214167
> > 1998-05-0112 -1.7343458326657
> > 1998-05-0114 -1.77393506418581
> > 1998-05-0121 -1.57249698394961
> > 1998-05-0204 -3.64105829839415
> > 1998-05-0207 -3.5504415342881
> > 1998-05-0209 -3.71003029685917
> > 1998-05-0213 -3.31920767504605
> > 1998-05-0219 -3.98797337595274
> > 1998-05-0300 -3.17694445869443
> > 1998-05-0304 -3.09612110658432
> > 1998-05-0306 -3.29570935794719
> > 1998-05-0308 -3.24529756101203
> > 1998-05-0310 -3.20488571584633
> > 1998-05-0312 -3.16447382251761
> > 1998-05-0314 -2.86406188109331
> > 1998-05-0319 -2.5430318175571
> > 1998-05-0321 -2.87261970832946
> > 1998-05-0400 -2.55200145489882
> > 1998-05-0407 -3.27055844665711
> > 1998-05-0409 -3.24014605168738
> > 1998-05-0412 -3.29952737040137
> > 1998-05-0414 -3.44911485708791
> >
> > Some dates are common among the two.
> >
> > I use few  lines of code to select the common dates:
> > setwd("./")
> >  list1<-read.table("THUL1",col.names=c("V1","V2"))
> >  list2<-read.table("INVK1",col.names=c("V1","V2"))
> >  B<-merge(list1,list2, by ="V1")
> >
> > Now, I wish to do something differently. I want to identify the dates that
> > are in THUL1 but are not in INVK1 or vise versa, that is to identify
> > uncommon dates among the two lists.
> >
> > Could you please assist me to achieve it.
> >
> > Thank you.
> > Best regards
> > Ogbos
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
>
>
> --
> Sarah Goslee (she/her)
> http://www.sarahgoslee.com


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Mon Mar  2 08:06:42 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Mon, 2 Mar 2020 07:06:42 +0000
Subject: [R] using mutate to remove all white space
In-Reply-To: <3587b5ba-708c-47fc-b33c-57970ec23844@me.com>
References: <3587b5ba-708c-47fc-b33c-57970ec23844@me.com>
Message-ID: <2bdc7e41-6847-d9ee-0db5-3ca98db43984@sapo.pt>

Hello,

Here are 2 examples, one with stringr::str_remove_all and the other with 
base gsub. I am assuming that you want to remove the spaces from column 
'servicer'.


dat <- data.frame(x = rnorm(2),
                   servicer = c("a b c", "  d efg"),
                   fctrdt = 1:2)
dat

library(dplyr)
library(stringr)

dat %>%
   select(fctrdt, servicer) %>%
   mutate(servicer = str_remove_all(servicer, "[[:space:]]"))

dat %>%
   select(fctrdt, servicer) %>%
   mutate(servicer = gsub("[[:space:]]", "", servicer))


Hope this helps,

Rui Barradas

?s 14:42 de 01/03/20, Glenn Schultz via R-help escreveu:
> All,
> 
> This may not be the proper place to ask as the question is dplyr and 
> removing white space using mutate. ?My code is below:
> 
> ```{r, echo = FALSE, message = FALSE
> conn <- myconnection
> ````
> 
> ```{r, echo = FALSE, message=FALSE}
> fhlloanbalance <- tbl(conn, "fhlloan_balance_view")
> colnames(fhlloanbalance)
> ```
> 
> ```{r, echo=FALSE, message=FALSE}
> fhlloanbalance %>%
> select(fctrdt, servicer) %>%
> filter(fctrdt == '2020-01-01') %>%
> mutate(servicer = 'I need to remove all white space')
> ```
> I have tried a number of approaches using stringr - stringi - and gsub. 
>  ?The problem I think I am facing: I cannot seem to operate on the 
> column in sql this is relative straight forward using replace. ?I have 
> tried several approaches and scanned the internet but I cannot seem to 
> come up with a workable solution. ?Any help is appreciated. ?I suppose I 
> could just default back to sql but would prefer to use dplyr.
> 
> Best,
> Glenn
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From j@vedbtk111 @end|ng |rom gm@||@com  Tue Mar  3 12:29:40 2020
From: j@vedbtk111 @end|ng |rom gm@||@com (javed khan)
Date: Tue, 3 Mar 2020 12:29:40 +0100
Subject: [R] Getting error message,
 "LOOCV is not compatible with `resamples()` since only one
 resampling estimate is available. "
Message-ID: <CAJhui+vnfU6qT=9RnXcM8BAm9KfL-7V-W-o4693Yv1XdoAq9tA@mail.gmail.com>

Hi, I am using different validation methods for random search and grid
search. The validation methods are 10 fold CV, bootstrap and LOOCV but for
LOOCV, I get the error message when I draw boxplots for all the results.

Error is , LOOCV is not compatible with `resamples()` since only one
resampling estimate is available.

The code is below.

d=readARFF("china.arff")
index <- createDataPartition(d$Effort, p = .70,list = FALSE)
tr <- d[index, ]
ts <- d[-index, ]
index_2 <- createFolds(tr$Effort, returnTrain = TRUE, list = TRUE)




ct_rand <- trainControl(method = "repeatedcv", number=10, repeats=10,index
= index_2, search="random")
ct_grid <- trainControl(method = "repeatedcv", number=10, repeats=10,index
= index_2, search="grid")


ct_boot1 <- trainControl(method = "boot", number=100,  index = index_2,
search="random")
ct_boot2 <- trainControl(method = "boot", number=100,  index = index_2,
search="grid")

ct_locv <- trainControl(method = "LOOCV",  search="random")
ct_locv2 <- trainControl(method = "LOOCV",   search="grid")

set.seed(30218)
ran_CV <- train(Effort ~ ., data = tr,
                    method = "pls",
                    tuneLength = 15,
                    metric = "MAE",
                    preProc = c("center", "scale", "zv"),
                    trControl = ct_rand)
getTrainPerf(ran_CV)
rn <- predict(ran_CV, newdata = ts)

## ## ## ## ##grid search CV

set.seed(30218)
grid_CV <- train(Effort ~ ., data = tr,
                     method = "pls",
                     metric = "MAE",
                     preProc = c("center", "scale", "zv"),
                     trControl = ct_grid)

getTrainPerf(grid_CV)

set.seed(30218)
ran_boot <- train(Effort ~ ., data = tr,
                method = "pls",
                tuneLength = 15,
                metric = "MAE",
                preProc = c("center", "scale", "zv"),
                trControl = ct_boot1)
getTrainPerf(ran_boot)
rn <- predict(ran_search, newdata = ts)
##MAE(rn, ts$Effort)


## ## ## ## ##grid search boot

set.seed(30218)
grid_boot <- train(Effort ~ ., data = tr,
                 method = "pls",
                 metric = "MAE",
                 preProc = c("center", "scale", "zv"),
                 trControl = ct_boot2)

getTrainPerf(grid_boot)


set.seed(30218)
ran_locv <- train(Effort ~ ., data = tr,
                method = "pls",
                tuneLength = 15,
                metric = "MAE",
                preProc = c("center", "scale", "zv"),
                trControl = ct_locv)
getTrainPerf(ran_locv)
rn <- predict(ran_search, newdata = ts)
##MAE(rn, ts$Effort)


## ## ## ## ##grid search CV

set.seed(30218)
grid_locv <- train(Effort ~ ., data = tr,
                 method = "pls",
                 metric = "MAE",
                 preProc = c("center", "scale", "zv"),
                 trControl = ct_locv2)

getTrainPerf(grid_locv)


rValues <- resamples(list(Random_Search_CV=ran_CV, Grid_Search_CV=grid_CV,
Random_Search_Boot=ran_boot, Grid_Search_Boot=grid_boot ,
                          Random_Search_LOOCV=ran_locv,
Grid_Search_LOOCV=grid_locv))

bwplot(rValues,metric="MAE", scales=list(cex=1), col="Green")

	[[alternative HTML version deleted]]


From dpweyg@nd @end|ng |rom gm@||@com  Tue Mar  3 16:29:16 2020
From: dpweyg@nd @end|ng |rom gm@||@com (Dennis Weygand)
Date: Tue, 3 Mar 2020 10:29:16 -0500
Subject: [R] file.choose()
Message-ID: <CAJgAAVScqJ_zmn_m2xmzdpsehwBLePchh0PzOkg1dRwvRohjSw@mail.gmail.com>

How do I change the default directory that file.choose() (Windows-10) uses?
D.P. Weygand

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Tue Mar  3 16:36:04 2020
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Tue, 3 Mar 2020 07:36:04 -0800
Subject: [R] file.choose()
In-Reply-To: <CAJgAAVScqJ_zmn_m2xmzdpsehwBLePchh0PzOkg1dRwvRohjSw@mail.gmail.com>
References: <CAJgAAVScqJ_zmn_m2xmzdpsehwBLePchh0PzOkg1dRwvRohjSw@mail.gmail.com>
Message-ID: <8a236153-b7b3-eb83-6d4b-ae21317f8d04@comcast.net>


On 3/3/20 7:29 AM, Dennis Weygand wrote:
> How do I change the default directory that file.choose() (Windows-10) uses?


?setwd


-- 

David

> D.P. Weygand
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Tue Mar  3 16:40:36 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Tue, 3 Mar 2020 15:40:36 +0000
Subject: [R] file.choose()
In-Reply-To: <CAJgAAVScqJ_zmn_m2xmzdpsehwBLePchh0PzOkg1dRwvRohjSw@mail.gmail.com>
References: <CAJgAAVScqJ_zmn_m2xmzdpsehwBLePchh0PzOkg1dRwvRohjSw@mail.gmail.com>
Message-ID: <2bacc530-6da2-a8fa-998e-b43f7482e6d7@sapo.pt>

Hello,

You must set the directory manually.

old_dir <- getwd()
setwd('path/new/dir')

file.choose()

#other stuff, if necessary end with

setwd(old_dir)


Hope this helps,

Rui Barradas

?s 15:29 de 03/03/20, Dennis Weygand escreveu:
> How do I change the default directory that file.choose() (Windows-10) uses?
> D.P. Weygand
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From c@|@ndr@ @end|ng |rom rgzm@de  Tue Mar  3 16:47:51 2020
From: c@|@ndr@ @end|ng |rom rgzm@de (Ivan Calandra)
Date: Tue, 3 Mar 2020 16:47:51 +0100
Subject: [R] file.choose()
In-Reply-To: <8a236153-b7b3-eb83-6d4b-ae21317f8d04@comcast.net>
References: <CAJgAAVScqJ_zmn_m2xmzdpsehwBLePchh0PzOkg1dRwvRohjSw@mail.gmail.com>
 <8a236153-b7b3-eb83-6d4b-ae21317f8d04@comcast.net>
Message-ID: <5643ea19-656e-2780-90ae-3fd6ecd2fe6c@rgzm.de>

That's what I was about to answer but tried first and it did not work.
Now I tried more and noticed an unexpected behavior:

getwd()
[1] "C:/Users/.../Documents"
file.choose() ## opens in "C:/Users/.../Documents" as expected

setwd("D:/")
getwd()
[1] "D:/"
file.choose() ## unexpectedly, opens in "C:/Users/.../Documents"

setwd("D:/Data")
getwd()
[1] "D:/Data"
file.choose() ## opens in "D:/Data" as expected

Is that normal behavior?

Ivan

--
Dr. Ivan Calandra
TraCEr, laboratory for Traceology and Controlled Experiments
MONREPOS Archaeological Research Centre and
Museum for Human Behavioural Evolution
Schloss Monrepos
56567 Neuwied, Germany
+49 (0) 2631 9772-243
https://www.researchgate.net/profile/Ivan_Calandra

On 03/03/2020 16:36, David Winsemius wrote:
>
> On 3/3/20 7:29 AM, Dennis Weygand wrote:
>> How do I change the default directory that file.choose() (Windows-10)
>> uses?
>
>
> ?setwd
>
>


From bgunter@4567 @end|ng |rom gm@||@com  Tue Mar  3 17:07:04 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 3 Mar 2020 08:07:04 -0800
Subject: [R] Getting error message,
 "LOOCV is not compatible with `resamples()` since only one
 resampling estimate is available. "
In-Reply-To: <CAJhui+vnfU6qT=9RnXcM8BAm9KfL-7V-W-o4693Yv1XdoAq9tA@mail.gmail.com>
References: <CAJhui+vnfU6qT=9RnXcM8BAm9KfL-7V-W-o4693Yv1XdoAq9tA@mail.gmail.com>
Message-ID: <CAGxFJbQZni4_yRFYiCcr5ECQw6MdyFtZL-0u2=krqvNQ16MGUQ@mail.gmail.com>

2 1/2 suggestions:

1. Provide a small reproducible example with **minimal code** . It can be
difficult to sort through dozens of lines of code, and I, anyway, would be
unwilling to spend time trying to debug/isolate the problem when you have
apparently not made much of an effort to do so yourself. Others may well be
both more knowledgeable and more tolerant, of course.

2. If, **after a suitable wait ** you have not received useful answers,
contact the package maintainer of the package you used **which you have
again failed to identify** (the caret package?) . Also check to see whether
the package has its own user support structure. Some do, and this should be
the first point of contact anyway if so.

2 1/2 . Post in **plain text** not html, though I don't think it mattered
here.


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Mar 3, 2020 at 3:30 AM javed khan <javedbtk111 at gmail.com> wrote:

> Hi, I am using different validation methods for random search and grid
> search. The validation methods are 10 fold CV, bootstrap and LOOCV but for
> LOOCV, I get the error message when I draw boxplots for all the results.
>
> Error is , LOOCV is not compatible with `resamples()` since only one
> resampling estimate is available.
>
> The code is below.
>
> d=readARFF("china.arff")
> index <- createDataPartition(d$Effort, p = .70,list = FALSE)
> tr <- d[index, ]
> ts <- d[-index, ]
> index_2 <- createFolds(tr$Effort, returnTrain = TRUE, list = TRUE)
>
>
>
>
> ct_rand <- trainControl(method = "repeatedcv", number=10, repeats=10,index
> = index_2, search="random")
> ct_grid <- trainControl(method = "repeatedcv", number=10, repeats=10,index
> = index_2, search="grid")
>
>
> ct_boot1 <- trainControl(method = "boot", number=100,  index = index_2,
> search="random")
> ct_boot2 <- trainControl(method = "boot", number=100,  index = index_2,
> search="grid")
>
> ct_locv <- trainControl(method = "LOOCV",  search="random")
> ct_locv2 <- trainControl(method = "LOOCV",   search="grid")
>
> set.seed(30218)
> ran_CV <- train(Effort ~ ., data = tr,
>                     method = "pls",
>                     tuneLength = 15,
>                     metric = "MAE",
>                     preProc = c("center", "scale", "zv"),
>                     trControl = ct_rand)
> getTrainPerf(ran_CV)
> rn <- predict(ran_CV, newdata = ts)
>
> ## ## ## ## ##grid search CV
>
> set.seed(30218)
> grid_CV <- train(Effort ~ ., data = tr,
>                      method = "pls",
>                      metric = "MAE",
>                      preProc = c("center", "scale", "zv"),
>                      trControl = ct_grid)
>
> getTrainPerf(grid_CV)
>
> set.seed(30218)
> ran_boot <- train(Effort ~ ., data = tr,
>                 method = "pls",
>                 tuneLength = 15,
>                 metric = "MAE",
>                 preProc = c("center", "scale", "zv"),
>                 trControl = ct_boot1)
> getTrainPerf(ran_boot)
> rn <- predict(ran_search, newdata = ts)
> ##MAE(rn, ts$Effort)
>
>
> ## ## ## ## ##grid search boot
>
> set.seed(30218)
> grid_boot <- train(Effort ~ ., data = tr,
>                  method = "pls",
>                  metric = "MAE",
>                  preProc = c("center", "scale", "zv"),
>                  trControl = ct_boot2)
>
> getTrainPerf(grid_boot)
>
>
> set.seed(30218)
> ran_locv <- train(Effort ~ ., data = tr,
>                 method = "pls",
>                 tuneLength = 15,
>                 metric = "MAE",
>                 preProc = c("center", "scale", "zv"),
>                 trControl = ct_locv)
> getTrainPerf(ran_locv)
> rn <- predict(ran_search, newdata = ts)
> ##MAE(rn, ts$Effort)
>
>
> ## ## ## ## ##grid search CV
>
> set.seed(30218)
> grid_locv <- train(Effort ~ ., data = tr,
>                  method = "pls",
>                  metric = "MAE",
>                  preProc = c("center", "scale", "zv"),
>                  trControl = ct_locv2)
>
> getTrainPerf(grid_locv)
>
>
> rValues <- resamples(list(Random_Search_CV=ran_CV, Grid_Search_CV=grid_CV,
> Random_Search_Boot=ran_boot, Grid_Search_Boot=grid_boot ,
>                           Random_Search_LOOCV=ran_locv,
> Grid_Search_LOOCV=grid_locv))
>
> bwplot(rValues,metric="MAE", scales=list(cex=1), col="Green")
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Mar  3 17:26:07 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 3 Mar 2020 11:26:07 -0500
Subject: [R] file.choose()
In-Reply-To: <5643ea19-656e-2780-90ae-3fd6ecd2fe6c@rgzm.de>
References: <CAJgAAVScqJ_zmn_m2xmzdpsehwBLePchh0PzOkg1dRwvRohjSw@mail.gmail.com>
 <8a236153-b7b3-eb83-6d4b-ae21317f8d04@comcast.net>
 <5643ea19-656e-2780-90ae-3fd6ecd2fe6c@rgzm.de>
Message-ID: <d40567d0-bbff-efef-55e7-8092021ec893@gmail.com>

On 03/03/2020 10:47 a.m., Ivan Calandra wrote:
> That's what I was about to answer but tried first and it did not work.
> Now I tried more and noticed an unexpected behavior:
> 
> getwd()
> [1] "C:/Users/.../Documents"
> file.choose() ## opens in "C:/Users/.../Documents" as expected
> 
> setwd("D:/")
> getwd()
> [1] "D:/"
> file.choose() ## unexpectedly, opens in "C:/Users/.../Documents"
> 
> setwd("D:/Data")
> getwd()
> [1] "D:/Data"
> file.choose() ## opens in "D:/Data" as expected
> 
> Is that normal behavior?
> 

If I recall correctly, the Windows GUI version opens the same directory 
as the user last selected (i.e. the dialog box remembers the last 
selection).   This was by design, because Windows users often start the 
GUI with the working directory being the R home directory, and rarely 
use setwd() to change it.

On Windows, I think you always get that version.  On other platforms it 
may depend on which front end you're using.

Duncan Murdoch


From c@|@ndr@ @end|ng |rom rgzm@de  Tue Mar  3 17:29:48 2020
From: c@|@ndr@ @end|ng |rom rgzm@de (Ivan Calandra)
Date: Tue, 3 Mar 2020 17:29:48 +0100
Subject: [R] file.choose()
In-Reply-To: <d40567d0-bbff-efef-55e7-8092021ec893@gmail.com>
References: <CAJgAAVScqJ_zmn_m2xmzdpsehwBLePchh0PzOkg1dRwvRohjSw@mail.gmail.com>
 <8a236153-b7b3-eb83-6d4b-ae21317f8d04@comcast.net>
 <5643ea19-656e-2780-90ae-3fd6ecd2fe6c@rgzm.de>
 <d40567d0-bbff-efef-55e7-8092021ec893@gmail.com>
Message-ID: <2991ed8c-6093-021e-72db-732f27955f34@rgzm.de>

Thank you Duncan.

I tried that through RStudio 1.2.5019 with R 3.6.2 on Win10.

And what I did not mention is that I always cancelled the file.choose()
actions, meaning I did not navigate to another folder.
This does not quite fit what you said, but I might have misunderstood
you, or RStudio overrides this behavior.

I still find it strange that my second and third examples behave
differently.

Ivan

--
Dr. Ivan Calandra
TraCEr, laboratory for Traceology and Controlled Experiments
MONREPOS Archaeological Research Centre and
Museum for Human Behavioural Evolution
Schloss Monrepos
56567 Neuwied, Germany
+49 (0) 2631 9772-243
https://www.researchgate.net/profile/Ivan_Calandra

On 03/03/2020 17:26, Duncan Murdoch wrote:
> On 03/03/2020 10:47 a.m., Ivan Calandra wrote:
>> That's what I was about to answer but tried first and it did not work.
>> Now I tried more and noticed an unexpected behavior:
>>
>> getwd()
>> [1] "C:/Users/.../Documents"
>> file.choose() ## opens in "C:/Users/.../Documents" as expected
>>
>> setwd("D:/")
>> getwd()
>> [1] "D:/"
>> file.choose() ## unexpectedly, opens in "C:/Users/.../Documents"
>>
>> setwd("D:/Data")
>> getwd()
>> [1] "D:/Data"
>> file.choose() ## opens in "D:/Data" as expected
>>
>> Is that normal behavior?
>>
>
> If I recall correctly, the Windows GUI version opens the same
> directory as the user last selected (i.e. the dialog box remembers the
> last selection).?? This was by design, because Windows users often
> start the GUI with the working directory being the R home directory,
> and rarely use setwd() to change it.
>
> On Windows, I think you always get that version.? On other platforms
> it may depend on which front end you're using.
>
> Duncan Murdoch
>
>


From @gh@b@b@rkh@n @end|ng |rom gm@||@com  Mon Mar  2 15:25:34 2020
From: @gh@b@b@rkh@n @end|ng |rom gm@||@com (Agha Babar Khan)
Date: Mon, 2 Mar 2020 19:25:34 +0500
Subject: [R] Reporting a bug in as function
Message-ID: <CAKg9RAgFif2PMHgeCfwudd-Z-m7ZMEVNv5DssM3rS6oT1Px=NA@mail.gmail.com>

Dear R,

Run following commands and you will find last two command result is same.

n1 <- 1
print(n1)
typeof(n1)
is.integer(n1)
is.numeric(n1)

n1 <- as.integer(n1)
print(n1)
typeof(n1)
is.integer(n1)
is.numeric(n1)

Regards,
Agha Babar Khan

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Mar  3 18:43:13 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 3 Mar 2020 12:43:13 -0500
Subject: [R] Reporting a bug in as function
In-Reply-To: <CAKg9RAgFif2PMHgeCfwudd-Z-m7ZMEVNv5DssM3rS6oT1Px=NA@mail.gmail.com>
References: <CAKg9RAgFif2PMHgeCfwudd-Z-m7ZMEVNv5DssM3rS6oT1Px=NA@mail.gmail.com>
Message-ID: <51b1a367-43c3-b520-cc7e-e1890ca56466@gmail.com>

On 02/03/2020 9:25 a.m., Agha Babar Khan wrote:
> Dear R,
> 
> Run following commands and you will find last two command result is same.
> 
> n1 <- 1
> print(n1)
> typeof(n1)
> is.integer(n1)
> is.numeric(n1)
> 
> n1 <- as.integer(n1)
> print(n1)
> typeof(n1)
> is.integer(n1)
> is.numeric(n1)
> 

Please read the help page for is.numeric.  There's no bug in having 
is.integer(n1) == is.numeric(n1).

Duncan Murdoch


From j@vedbtk111 @end|ng |rom gm@||@com  Tue Mar  3 21:27:52 2020
From: j@vedbtk111 @end|ng |rom gm@||@com (javed khan)
Date: Tue, 3 Mar 2020 21:27:52 +0100
Subject: [R] Getting error message,
 "LOOCV is not compatible with `resamples()` since only one
 resampling estimate is available. "
In-Reply-To: <CAGxFJbQZni4_yRFYiCcr5ECQw6MdyFtZL-0u2=krqvNQ16MGUQ@mail.gmail.com>
References: <CAJhui+vnfU6qT=9RnXcM8BAm9KfL-7V-W-o4693Yv1XdoAq9tA@mail.gmail.com>
 <CAGxFJbQZni4_yRFYiCcr5ECQw6MdyFtZL-0u2=krqvNQ16MGUQ@mail.gmail.com>
Message-ID: <CAJhui+t6NWXXr8vk8HzNUb5UuWiCzMTyw=E51sm4YDTk=H1=LA@mail.gmail.com>

The data is as follows:  I included the code for 10 fold CV and LOOCV

structure(list(ID = c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12,
13, 14, 15), Language = c(1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1,
1, 1, 3), Hardware = c(1, 2, 3, 1, 2, 4, 4, 2, 1, 1, 1, 5, 6,
1, 1), Duration = c(17, 7, 15, 18, 13, 5, 5, 11, 14, 5, 13, 31,
20, 26, 14), KSLOC = c(253.6, 40.5, 450, 214.4, 449.9, 50, 43,
200, 289, 39, 254.2, 128.6, 161.4, 164.8, 60.2), AdjFP = c(1217.1,
507.3, 2306.8, 788.5, 1337.6, 421.3, 99.9, 993, 1592.9, 240,
1611, 789, 690.9, 1347.5, 1044.3), RAWFP = c(1010, 457, 2284,
881, 1583, 411, 97, 998, 1554, 250, 1603, 724, 705, 1375, 976
), EffortMM = c(287, 82.5, 1107.31, 86.9, 336.3, 84, 23.2, 130.3,
116, 72, 258.7, 230.7, 157, 246.9, 69.9)), class = "data.frame", row.names
= c(NA,
-15L))


index <- createDataPartition(d$Effort, p = .70,list = FALSE)
tr <- d[index, ]
ts <- d[-index, ]
index_2 <- createFolds(tr$Effort, returnTrain = TRUE, list = TRUE)

ct_rand <- trainControl(method = "repeatedcv", number=10, repeats=10,index
= index_2, search="random")
ct_grid <- trainControl(method = "repeatedcv", number=10, repeats=10,index
= index_2, search="grid")

ct_locv <- trainControl(method = "LOOCV",  search="random")
ct_locv2 <- trainControl(method = "LOOCV",   search="grid")

 ## ## ## ## ##Random Search for for 10 fold CV

set.seed(30218)
ran_CV <- train(Effort ~ ., data = tr,
                    method = "pls",
                    tuneLength = 15,
                    metric = "MAE",
                    preProc = c("center", "scale", "zv"),
                    trControl = ct_rand)
getTrainPerf(ran_CV)
rn <- predict(ran_CV, newdata = ts)
##MAE(rn, ts$Effort)


## ## ## ## ##grid search  for 10 fold CV

set.seed(30218)
grid_CV <- train(Effort ~ ., data = tr,
                     method = "pls",
                     metric = "MAE",
                     preProc = c("center", "scale", "zv"),
                     trControl = ct_grid)

getTrainPerf(grid_CV)

  ## ## ## ## ##Random Search for LOOCV

set.seed(30218)
ran_locv <- train(Effort ~ ., data = tr,
                method = "pls",
                tuneLength = 15,
                metric = "MAE",
                preProc = c("center", "scale", "zv"),
                trControl = ct_locv)
getTrainPerf(ran_locv)
rn <- predict(ran_search, newdata = ts)
##MAE(rn, ts$Effort)


 ## ## ## ## ##Grid Search for LOOCV

set.seed(30218)
grid_locv <- train(Effort ~ ., data = tr,
                 method = "pls",
                 metric = "MAE",
                 preProc = c("center", "scale", "zv"),
                 trControl = ct_locv2)

getTrainPerf(grid_locv)

rValues <- resamples(list(Random_Search_CV=ran_CV, Grid_Search_CV=grid_CV,

                          Random_Search_LOOCV=ran_locv,
Grid_Search_LOOCV=grid_locv))

bwplot(rValues,metric="MAE", scales=list(cex=1), col="Green")




On Tue, Mar 3, 2020 at 5:07 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> 2 1/2 suggestions:
>
> 1. Provide a small reproducible example with **minimal code** . It can be
> difficult to sort through dozens of lines of code, and I, anyway, would be
> unwilling to spend time trying to debug/isolate the problem when you have
> apparently not made much of an effort to do so yourself. Others may well be
> both more knowledgeable and more tolerant, of course.
>
> 2. If, **after a suitable wait ** you have not received useful answers,
> contact the package maintainer of the package you used **which you have
> again failed to identify** (the caret package?) . Also check to see whether
> the package has its own user support structure. Some do, and this should be
> the first point of contact anyway if so.
>
> 2 1/2 . Post in **plain text** not html, though I don't think it mattered
> here.
>
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Tue, Mar 3, 2020 at 3:30 AM javed khan <javedbtk111 at gmail.com> wrote:
>
>> Hi, I am using different validation methods for random search and grid
>> search. The validation methods are 10 fold CV, bootstrap and LOOCV but for
>> LOOCV, I get the error message when I draw boxplots for all the results.
>>
>> Error is , LOOCV is not compatible with `resamples()` since only one
>> resampling estimate is available.
>>
>> The code is below.
>>
>> d=readARFF("china.arff")
>> index <- createDataPartition(d$Effort, p = .70,list = FALSE)
>> tr <- d[index, ]
>> ts <- d[-index, ]
>> index_2 <- createFolds(tr$Effort, returnTrain = TRUE, list = TRUE)
>>
>>
>>
>>
>> ct_rand <- trainControl(method = "repeatedcv", number=10, repeats=10,index
>> = index_2, search="random")
>> ct_grid <- trainControl(method = "repeatedcv", number=10, repeats=10,index
>> = index_2, search="grid")
>>
>>
>> ct_boot1 <- trainControl(method = "boot", number=100,  index = index_2,
>> search="random")
>> ct_boot2 <- trainControl(method = "boot", number=100,  index = index_2,
>> search="grid")
>>
>> ct_locv <- trainControl(method = "LOOCV",  search="random")
>> ct_locv2 <- trainControl(method = "LOOCV",   search="grid")
>>
>> set.seed(30218)
>> ran_CV <- train(Effort ~ ., data = tr,
>>                     method = "pls",
>>                     tuneLength = 15,
>>                     metric = "MAE",
>>                     preProc = c("center", "scale", "zv"),
>>                     trControl = ct_rand)
>> getTrainPerf(ran_CV)
>> rn <- predict(ran_CV, newdata = ts)
>>
>> ## ## ## ## ##grid search CV
>>
>> set.seed(30218)
>> grid_CV <- train(Effort ~ ., data = tr,
>>                      method = "pls",
>>                      metric = "MAE",
>>                      preProc = c("center", "scale", "zv"),
>>                      trControl = ct_grid)
>>
>> getTrainPerf(grid_CV)
>>
>> set.seed(30218)
>> ran_boot <- train(Effort ~ ., data = tr,
>>                 method = "pls",
>>                 tuneLength = 15,
>>                 metric = "MAE",
>>                 preProc = c("center", "scale", "zv"),
>>                 trControl = ct_boot1)
>> getTrainPerf(ran_boot)
>> rn <- predict(ran_search, newdata = ts)
>> ##MAE(rn, ts$Effort)
>>
>>
>> ## ## ## ## ##grid search boot
>>
>> set.seed(30218)
>> grid_boot <- train(Effort ~ ., data = tr,
>>                  method = "pls",
>>                  metric = "MAE",
>>                  preProc = c("center", "scale", "zv"),
>>                  trControl = ct_boot2)
>>
>> getTrainPerf(grid_boot)
>>
>>
>> set.seed(30218)
>> ran_locv <- train(Effort ~ ., data = tr,
>>                 method = "pls",
>>                 tuneLength = 15,
>>                 metric = "MAE",
>>                 preProc = c("center", "scale", "zv"),
>>                 trControl = ct_locv)
>> getTrainPerf(ran_locv)
>> rn <- predict(ran_search, newdata = ts)
>> ##MAE(rn, ts$Effort)
>>
>>
>> ## ## ## ## ##grid search CV
>>
>> set.seed(30218)
>> grid_locv <- train(Effort ~ ., data = tr,
>>                  method = "pls",
>>                  metric = "MAE",
>>                  preProc = c("center", "scale", "zv"),
>>                  trControl = ct_locv2)
>>
>> getTrainPerf(grid_locv)
>>
>>
>> rValues <- resamples(list(Random_Search_CV=ran_CV, Grid_Search_CV=grid_CV,
>> Random_Search_Boot=ran_boot, Grid_Search_Boot=grid_boot ,
>>                           Random_Search_LOOCV=ran_locv,
>> Grid_Search_LOOCV=grid_locv))
>>
>> bwplot(rValues,metric="MAE", scales=list(cex=1), col="Green")
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Mar  3 21:57:12 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 3 Mar 2020 12:57:12 -0800
Subject: [R] Getting error message,
 "LOOCV is not compatible with `resamples()` since only one
 resampling estimate is available. "
In-Reply-To: <CAJhui+t6NWXXr8vk8HzNUb5UuWiCzMTyw=E51sm4YDTk=H1=LA@mail.gmail.com>
References: <CAJhui+vnfU6qT=9RnXcM8BAm9KfL-7V-W-o4693Yv1XdoAq9tA@mail.gmail.com>
 <CAGxFJbQZni4_yRFYiCcr5ECQw6MdyFtZL-0u2=krqvNQ16MGUQ@mail.gmail.com>
 <CAJhui+t6NWXXr8vk8HzNUb5UuWiCzMTyw=E51sm4YDTk=H1=LA@mail.gmail.com>
Message-ID: <CAGxFJbRWQN2SzrGB+Hf+b6HHO4MFbS1gcemFuLKT9rMu8XU_LQ@mail.gmail.com>

... and you **still** have not told us what package(s)...

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Mar 3, 2020 at 12:28 PM javed khan <javedbtk111 at gmail.com> wrote:

> The data is as follows:  I included the code for 10 fold CV and LOOCV
>
> structure(list(ID = c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12,
> 13, 14, 15), Language = c(1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1,
> 1, 1, 3), Hardware = c(1, 2, 3, 1, 2, 4, 4, 2, 1, 1, 1, 5, 6,
> 1, 1), Duration = c(17, 7, 15, 18, 13, 5, 5, 11, 14, 5, 13, 31,
> 20, 26, 14), KSLOC = c(253.6, 40.5, 450, 214.4, 449.9, 50, 43,
> 200, 289, 39, 254.2, 128.6, 161.4, 164.8, 60.2), AdjFP = c(1217.1,
> 507.3, 2306.8, 788.5, 1337.6, 421.3, 99.9, 993, 1592.9, 240,
> 1611, 789, 690.9, 1347.5, 1044.3), RAWFP = c(1010, 457, 2284,
> 881, 1583, 411, 97, 998, 1554, 250, 1603, 724, 705, 1375, 976
> ), EffortMM = c(287, 82.5, 1107.31, 86.9, 336.3, 84, 23.2, 130.3,
> 116, 72, 258.7, 230.7, 157, 246.9, 69.9)), class = "data.frame", row.names
> = c(NA,
> -15L))
>
>
> index <- createDataPartition(d$Effort, p = .70,list = FALSE)
> tr <- d[index, ]
> ts <- d[-index, ]
> index_2 <- createFolds(tr$Effort, returnTrain = TRUE, list = TRUE)
>
> ct_rand <- trainControl(method = "repeatedcv", number=10, repeats=10,index
> = index_2, search="random")
> ct_grid <- trainControl(method = "repeatedcv", number=10, repeats=10,index
> = index_2, search="grid")
>
> ct_locv <- trainControl(method = "LOOCV",  search="random")
> ct_locv2 <- trainControl(method = "LOOCV",   search="grid")
>
>  ## ## ## ## ##Random Search for for 10 fold CV
>
> set.seed(30218)
> ran_CV <- train(Effort ~ ., data = tr,
>                     method = "pls",
>                     tuneLength = 15,
>                     metric = "MAE",
>                     preProc = c("center", "scale", "zv"),
>                     trControl = ct_rand)
> getTrainPerf(ran_CV)
> rn <- predict(ran_CV, newdata = ts)
> ##MAE(rn, ts$Effort)
>
>
> ## ## ## ## ##grid search  for 10 fold CV
>
> set.seed(30218)
> grid_CV <- train(Effort ~ ., data = tr,
>                      method = "pls",
>                      metric = "MAE",
>                      preProc = c("center", "scale", "zv"),
>                      trControl = ct_grid)
>
> getTrainPerf(grid_CV)
>
>   ## ## ## ## ##Random Search for LOOCV
>
> set.seed(30218)
> ran_locv <- train(Effort ~ ., data = tr,
>                 method = "pls",
>                 tuneLength = 15,
>                 metric = "MAE",
>                 preProc = c("center", "scale", "zv"),
>                 trControl = ct_locv)
> getTrainPerf(ran_locv)
> rn <- predict(ran_search, newdata = ts)
> ##MAE(rn, ts$Effort)
>
>
>  ## ## ## ## ##Grid Search for LOOCV
>
> set.seed(30218)
> grid_locv <- train(Effort ~ ., data = tr,
>                  method = "pls",
>                  metric = "MAE",
>                  preProc = c("center", "scale", "zv"),
>                  trControl = ct_locv2)
>
> getTrainPerf(grid_locv)
>
> rValues <- resamples(list(Random_Search_CV=ran_CV, Grid_Search_CV=grid_CV,
>
>                           Random_Search_LOOCV=ran_locv,
> Grid_Search_LOOCV=grid_locv))
>
> bwplot(rValues,metric="MAE", scales=list(cex=1), col="Green")
>
>
>
>
> On Tue, Mar 3, 2020 at 5:07 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>
>> 2 1/2 suggestions:
>>
>> 1. Provide a small reproducible example with **minimal code** . It can be
>> difficult to sort through dozens of lines of code, and I, anyway, would be
>> unwilling to spend time trying to debug/isolate the problem when you have
>> apparently not made much of an effort to do so yourself. Others may well be
>> both more knowledgeable and more tolerant, of course.
>>
>> 2. If, **after a suitable wait ** you have not received useful answers,
>> contact the package maintainer of the package you used **which you have
>> again failed to identify** (the caret package?) . Also check to see whether
>> the package has its own user support structure. Some do, and this should be
>> the first point of contact anyway if so.
>>
>> 2 1/2 . Post in **plain text** not html, though I don't think it mattered
>> here.
>>
>>
>> Bert Gunter
>>
>> "The trouble with having an open mind is that people keep coming along
>> and sticking things into it."
>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>
>>
>> On Tue, Mar 3, 2020 at 3:30 AM javed khan <javedbtk111 at gmail.com> wrote:
>>
>>> Hi, I am using different validation methods for random search and grid
>>> search. The validation methods are 10 fold CV, bootstrap and LOOCV but
>>> for
>>> LOOCV, I get the error message when I draw boxplots for all the results.
>>>
>>> Error is , LOOCV is not compatible with `resamples()` since only one
>>> resampling estimate is available.
>>>
>>> The code is below.
>>>
>>> d=readARFF("china.arff")
>>> index <- createDataPartition(d$Effort, p = .70,list = FALSE)
>>> tr <- d[index, ]
>>> ts <- d[-index, ]
>>> index_2 <- createFolds(tr$Effort, returnTrain = TRUE, list = TRUE)
>>>
>>>
>>>
>>>
>>> ct_rand <- trainControl(method = "repeatedcv", number=10,
>>> repeats=10,index
>>> = index_2, search="random")
>>> ct_grid <- trainControl(method = "repeatedcv", number=10,
>>> repeats=10,index
>>> = index_2, search="grid")
>>>
>>>
>>> ct_boot1 <- trainControl(method = "boot", number=100,  index = index_2,
>>> search="random")
>>> ct_boot2 <- trainControl(method = "boot", number=100,  index = index_2,
>>> search="grid")
>>>
>>> ct_locv <- trainControl(method = "LOOCV",  search="random")
>>> ct_locv2 <- trainControl(method = "LOOCV",   search="grid")
>>>
>>> set.seed(30218)
>>> ran_CV <- train(Effort ~ ., data = tr,
>>>                     method = "pls",
>>>                     tuneLength = 15,
>>>                     metric = "MAE",
>>>                     preProc = c("center", "scale", "zv"),
>>>                     trControl = ct_rand)
>>> getTrainPerf(ran_CV)
>>> rn <- predict(ran_CV, newdata = ts)
>>>
>>> ## ## ## ## ##grid search CV
>>>
>>> set.seed(30218)
>>> grid_CV <- train(Effort ~ ., data = tr,
>>>                      method = "pls",
>>>                      metric = "MAE",
>>>                      preProc = c("center", "scale", "zv"),
>>>                      trControl = ct_grid)
>>>
>>> getTrainPerf(grid_CV)
>>>
>>> set.seed(30218)
>>> ran_boot <- train(Effort ~ ., data = tr,
>>>                 method = "pls",
>>>                 tuneLength = 15,
>>>                 metric = "MAE",
>>>                 preProc = c("center", "scale", "zv"),
>>>                 trControl = ct_boot1)
>>> getTrainPerf(ran_boot)
>>> rn <- predict(ran_search, newdata = ts)
>>> ##MAE(rn, ts$Effort)
>>>
>>>
>>> ## ## ## ## ##grid search boot
>>>
>>> set.seed(30218)
>>> grid_boot <- train(Effort ~ ., data = tr,
>>>                  method = "pls",
>>>                  metric = "MAE",
>>>                  preProc = c("center", "scale", "zv"),
>>>                  trControl = ct_boot2)
>>>
>>> getTrainPerf(grid_boot)
>>>
>>>
>>> set.seed(30218)
>>> ran_locv <- train(Effort ~ ., data = tr,
>>>                 method = "pls",
>>>                 tuneLength = 15,
>>>                 metric = "MAE",
>>>                 preProc = c("center", "scale", "zv"),
>>>                 trControl = ct_locv)
>>> getTrainPerf(ran_locv)
>>> rn <- predict(ran_search, newdata = ts)
>>> ##MAE(rn, ts$Effort)
>>>
>>>
>>> ## ## ## ## ##grid search CV
>>>
>>> set.seed(30218)
>>> grid_locv <- train(Effort ~ ., data = tr,
>>>                  method = "pls",
>>>                  metric = "MAE",
>>>                  preProc = c("center", "scale", "zv"),
>>>                  trControl = ct_locv2)
>>>
>>> getTrainPerf(grid_locv)
>>>
>>>
>>> rValues <- resamples(list(Random_Search_CV=ran_CV,
>>> Grid_Search_CV=grid_CV,
>>> Random_Search_Boot=ran_boot, Grid_Search_Boot=grid_boot ,
>>>                           Random_Search_LOOCV=ran_locv,
>>> Grid_Search_LOOCV=grid_locv))
>>>
>>> bwplot(rValues,metric="MAE", scales=list(cex=1), col="Green")
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>

	[[alternative HTML version deleted]]


From j@vedbtk111 @end|ng |rom gm@||@com  Tue Mar  3 22:57:17 2020
From: j@vedbtk111 @end|ng |rom gm@||@com (javed khan)
Date: Tue, 3 Mar 2020 22:57:17 +0100
Subject: [R] Getting error message,
 "LOOCV is not compatible with `resamples()` since only one
 resampling estimate is available. "
In-Reply-To: <CAGxFJbRWQN2SzrGB+Hf+b6HHO4MFbS1gcemFuLKT9rMu8XU_LQ@mail.gmail.com>
References: <CAJhui+vnfU6qT=9RnXcM8BAm9KfL-7V-W-o4693Yv1XdoAq9tA@mail.gmail.com>
 <CAGxFJbQZni4_yRFYiCcr5ECQw6MdyFtZL-0u2=krqvNQ16MGUQ@mail.gmail.com>
 <CAJhui+t6NWXXr8vk8HzNUb5UuWiCzMTyw=E51sm4YDTk=H1=LA@mail.gmail.com>
 <CAGxFJbRWQN2SzrGB+Hf+b6HHO4MFbS1gcemFuLKT9rMu8XU_LQ@mail.gmail.com>
Message-ID: <CAJhui+sVXRJLLZtn2HiMmEw5--Yf6xEvRy162-ojTgsE-fV3cQ@mail.gmail.com>

I am sorry for that... I am just using caret package.

Thanks

On Tue, Mar 3, 2020 at 9:57 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> ... and you **still** have not told us what package(s)...
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Tue, Mar 3, 2020 at 12:28 PM javed khan <javedbtk111 at gmail.com> wrote:
>
>> The data is as follows:  I included the code for 10 fold CV and LOOCV
>>
>> structure(list(ID = c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12,
>> 13, 14, 15), Language = c(1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1,
>> 1, 1, 3), Hardware = c(1, 2, 3, 1, 2, 4, 4, 2, 1, 1, 1, 5, 6,
>> 1, 1), Duration = c(17, 7, 15, 18, 13, 5, 5, 11, 14, 5, 13, 31,
>> 20, 26, 14), KSLOC = c(253.6, 40.5, 450, 214.4, 449.9, 50, 43,
>> 200, 289, 39, 254.2, 128.6, 161.4, 164.8, 60.2), AdjFP = c(1217.1,
>> 507.3, 2306.8, 788.5, 1337.6, 421.3, 99.9, 993, 1592.9, 240,
>> 1611, 789, 690.9, 1347.5, 1044.3), RAWFP = c(1010, 457, 2284,
>> 881, 1583, 411, 97, 998, 1554, 250, 1603, 724, 705, 1375, 976
>> ), EffortMM = c(287, 82.5, 1107.31, 86.9, 336.3, 84, 23.2, 130.3,
>> 116, 72, 258.7, 230.7, 157, 246.9, 69.9)), class = "data.frame",
>> row.names = c(NA,
>> -15L))
>>
>>
>> index <- createDataPartition(d$Effort, p = .70,list = FALSE)
>> tr <- d[index, ]
>> ts <- d[-index, ]
>> index_2 <- createFolds(tr$Effort, returnTrain = TRUE, list = TRUE)
>>
>> ct_rand <- trainControl(method = "repeatedcv", number=10,
>> repeats=10,index = index_2, search="random")
>> ct_grid <- trainControl(method = "repeatedcv", number=10,
>> repeats=10,index = index_2, search="grid")
>>
>> ct_locv <- trainControl(method = "LOOCV",  search="random")
>> ct_locv2 <- trainControl(method = "LOOCV",   search="grid")
>>
>>  ## ## ## ## ##Random Search for for 10 fold CV
>>
>> set.seed(30218)
>> ran_CV <- train(Effort ~ ., data = tr,
>>                     method = "pls",
>>                     tuneLength = 15,
>>                     metric = "MAE",
>>                     preProc = c("center", "scale", "zv"),
>>                     trControl = ct_rand)
>> getTrainPerf(ran_CV)
>> rn <- predict(ran_CV, newdata = ts)
>> ##MAE(rn, ts$Effort)
>>
>>
>> ## ## ## ## ##grid search  for 10 fold CV
>>
>> set.seed(30218)
>> grid_CV <- train(Effort ~ ., data = tr,
>>                      method = "pls",
>>                      metric = "MAE",
>>                      preProc = c("center", "scale", "zv"),
>>                      trControl = ct_grid)
>>
>> getTrainPerf(grid_CV)
>>
>>   ## ## ## ## ##Random Search for LOOCV
>>
>> set.seed(30218)
>> ran_locv <- train(Effort ~ ., data = tr,
>>                 method = "pls",
>>                 tuneLength = 15,
>>                 metric = "MAE",
>>                 preProc = c("center", "scale", "zv"),
>>                 trControl = ct_locv)
>> getTrainPerf(ran_locv)
>> rn <- predict(ran_search, newdata = ts)
>> ##MAE(rn, ts$Effort)
>>
>>
>>  ## ## ## ## ##Grid Search for LOOCV
>>
>> set.seed(30218)
>> grid_locv <- train(Effort ~ ., data = tr,
>>                  method = "pls",
>>                  metric = "MAE",
>>                  preProc = c("center", "scale", "zv"),
>>                  trControl = ct_locv2)
>>
>> getTrainPerf(grid_locv)
>>
>> rValues <- resamples(list(Random_Search_CV=ran_CV,
>> Grid_Search_CV=grid_CV,
>>
>>                           Random_Search_LOOCV=ran_locv,
>> Grid_Search_LOOCV=grid_locv))
>>
>> bwplot(rValues,metric="MAE", scales=list(cex=1), col="Green")
>>
>>
>>
>>
>> On Tue, Mar 3, 2020 at 5:07 PM Bert Gunter <bgunter.4567 at gmail.com>
>> wrote:
>>
>>> 2 1/2 suggestions:
>>>
>>> 1. Provide a small reproducible example with **minimal code** . It can
>>> be difficult to sort through dozens of lines of code, and I, anyway, would
>>> be unwilling to spend time trying to debug/isolate the problem when you
>>> have apparently not made much of an effort to do so yourself. Others may
>>> well be both more knowledgeable and more tolerant, of course.
>>>
>>> 2. If, **after a suitable wait ** you have not received useful answers,
>>> contact the package maintainer of the package you used **which you have
>>> again failed to identify** (the caret package?) . Also check to see whether
>>> the package has its own user support structure. Some do, and this should be
>>> the first point of contact anyway if so.
>>>
>>> 2 1/2 . Post in **plain text** not html, though I don't think it
>>> mattered here.
>>>
>>>
>>> Bert Gunter
>>>
>>> "The trouble with having an open mind is that people keep coming along
>>> and sticking things into it."
>>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>>
>>>
>>> On Tue, Mar 3, 2020 at 3:30 AM javed khan <javedbtk111 at gmail.com> wrote:
>>>
>>>> Hi, I am using different validation methods for random search and grid
>>>> search. The validation methods are 10 fold CV, bootstrap and LOOCV but
>>>> for
>>>> LOOCV, I get the error message when I draw boxplots for all the results.
>>>>
>>>> Error is , LOOCV is not compatible with `resamples()` since only one
>>>> resampling estimate is available.
>>>>
>>>> The code is below.
>>>>
>>>> d=readARFF("china.arff")
>>>> index <- createDataPartition(d$Effort, p = .70,list = FALSE)
>>>> tr <- d[index, ]
>>>> ts <- d[-index, ]
>>>> index_2 <- createFolds(tr$Effort, returnTrain = TRUE, list = TRUE)
>>>>
>>>>
>>>>
>>>>
>>>> ct_rand <- trainControl(method = "repeatedcv", number=10,
>>>> repeats=10,index
>>>> = index_2, search="random")
>>>> ct_grid <- trainControl(method = "repeatedcv", number=10,
>>>> repeats=10,index
>>>> = index_2, search="grid")
>>>>
>>>>
>>>> ct_boot1 <- trainControl(method = "boot", number=100,  index = index_2,
>>>> search="random")
>>>> ct_boot2 <- trainControl(method = "boot", number=100,  index = index_2,
>>>> search="grid")
>>>>
>>>> ct_locv <- trainControl(method = "LOOCV",  search="random")
>>>> ct_locv2 <- trainControl(method = "LOOCV",   search="grid")
>>>>
>>>> set.seed(30218)
>>>> ran_CV <- train(Effort ~ ., data = tr,
>>>>                     method = "pls",
>>>>                     tuneLength = 15,
>>>>                     metric = "MAE",
>>>>                     preProc = c("center", "scale", "zv"),
>>>>                     trControl = ct_rand)
>>>> getTrainPerf(ran_CV)
>>>> rn <- predict(ran_CV, newdata = ts)
>>>>
>>>> ## ## ## ## ##grid search CV
>>>>
>>>> set.seed(30218)
>>>> grid_CV <- train(Effort ~ ., data = tr,
>>>>                      method = "pls",
>>>>                      metric = "MAE",
>>>>                      preProc = c("center", "scale", "zv"),
>>>>                      trControl = ct_grid)
>>>>
>>>> getTrainPerf(grid_CV)
>>>>
>>>> set.seed(30218)
>>>> ran_boot <- train(Effort ~ ., data = tr,
>>>>                 method = "pls",
>>>>                 tuneLength = 15,
>>>>                 metric = "MAE",
>>>>                 preProc = c("center", "scale", "zv"),
>>>>                 trControl = ct_boot1)
>>>> getTrainPerf(ran_boot)
>>>> rn <- predict(ran_search, newdata = ts)
>>>> ##MAE(rn, ts$Effort)
>>>>
>>>>
>>>> ## ## ## ## ##grid search boot
>>>>
>>>> set.seed(30218)
>>>> grid_boot <- train(Effort ~ ., data = tr,
>>>>                  method = "pls",
>>>>                  metric = "MAE",
>>>>                  preProc = c("center", "scale", "zv"),
>>>>                  trControl = ct_boot2)
>>>>
>>>> getTrainPerf(grid_boot)
>>>>
>>>>
>>>> set.seed(30218)
>>>> ran_locv <- train(Effort ~ ., data = tr,
>>>>                 method = "pls",
>>>>                 tuneLength = 15,
>>>>                 metric = "MAE",
>>>>                 preProc = c("center", "scale", "zv"),
>>>>                 trControl = ct_locv)
>>>> getTrainPerf(ran_locv)
>>>> rn <- predict(ran_search, newdata = ts)
>>>> ##MAE(rn, ts$Effort)
>>>>
>>>>
>>>> ## ## ## ## ##grid search CV
>>>>
>>>> set.seed(30218)
>>>> grid_locv <- train(Effort ~ ., data = tr,
>>>>                  method = "pls",
>>>>                  metric = "MAE",
>>>>                  preProc = c("center", "scale", "zv"),
>>>>                  trControl = ct_locv2)
>>>>
>>>> getTrainPerf(grid_locv)
>>>>
>>>>
>>>> rValues <- resamples(list(Random_Search_CV=ran_CV,
>>>> Grid_Search_CV=grid_CV,
>>>> Random_Search_Boot=ran_boot, Grid_Search_Boot=grid_boot ,
>>>>                           Random_Search_LOOCV=ran_locv,
>>>> Grid_Search_LOOCV=grid_locv))
>>>>
>>>> bwplot(rValues,metric="MAE", scales=list(cex=1), col="Green")
>>>>
>>>>         [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>

	[[alternative HTML version deleted]]


From robertob@kker @end|ng |rom gm@||@com  Wed Mar  4 07:34:55 2020
From: robertob@kker @end|ng |rom gm@||@com (P. Roberto Bakker)
Date: Wed, 4 Mar 2020 07:34:55 +0100
Subject: [R] R 3.6.3 is released
In-Reply-To: <alpine.LNX.2.20.2002290533430.20958@salmo.appl-ecosys.com>
References: <DEBEE59C-5554-4FD1-8E36-7D4B22914CC2@cbs.dk>
 <alpine.LNX.2.20.2002290533430.20958@salmo.appl-ecosys.com>
Message-ID: <CAKDq9_N-84Mm=kzjbgsZqY7hL-ip60vsqmLw0fqGMxbKnsZ1TQ@mail.gmail.com>

Yes, many thanks from my side!
Roberto

Op za 29 feb. 2020 om 14:35 schreef Rich Shepard <rshepard at appl-ecosys.com>:

> On Sat, 29 Feb 2020, Peter Dalgaard via R-help wrote:
>
> > The build system rolled up R-3.6.3.tar.gz (codename "Holding the
> > Windsock") this morning.
>
> Peter,
>
> My thanks to you and the rest of the Core Team for your continuing efforts
> of an important application.
>
> Regards,
>
> Rich
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From petr@p|k@| @end|ng |rom prechez@@cz  Wed Mar  4 07:55:18 2020
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Wed, 4 Mar 2020 06:55:18 +0000
Subject: [R] file.choose()
In-Reply-To: <5643ea19-656e-2780-90ae-3fd6ecd2fe6c@rgzm.de>
References: <CAJgAAVScqJ_zmn_m2xmzdpsehwBLePchh0PzOkg1dRwvRohjSw@mail.gmail.com>
 <8a236153-b7b3-eb83-6d4b-ae21317f8d04@comcast.net>
 <5643ea19-656e-2780-90ae-3fd6ecd2fe6c@rgzm.de>
Message-ID: <ee7e9f33dd8f48008e6c9b3779ee2c18@SRVEXCHCM1302.precheza.cz>

Hi Ivan

I tried your examples and they behave as expected. Second one opens D:/ and
third should be setwd("D:/Data/") to open in Data folder.

> sessionInfo()
R Under development (unstable) (2019-07-21 r76854)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 18363)

So the problem is in your setting.

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Ivan Calandra
> Sent: Tuesday, March 3, 2020 4:48 PM
> To: r-help at r-project.org
> Subject: Re: [R] file.choose()
> 
> That's what I was about to answer but tried first and it did not work.
> Now I tried more and noticed an unexpected behavior:
> 
> getwd()
> [1] "C:/Users/.../Documents"
> file.choose() ## opens in "C:/Users/.../Documents" as expected
> 
> setwd("D:/")
> getwd()
> [1] "D:/"
> file.choose() ## unexpectedly, opens in "C:/Users/.../Documents"
> 
> setwd("D:/Data")
> getwd()
> [1] "D:/Data"
> file.choose() ## opens in "D:/Data" as expected
> 
> Is that normal behavior?
> 
> Ivan
> 
> --
> Dr. Ivan Calandra
> TraCEr, laboratory for Traceology and Controlled Experiments MONREPOS
> Archaeological Research Centre and Museum for Human Behavioural Evolution
> Schloss Monrepos
> 56567 Neuwied, Germany
> +49 (0) 2631 9772-243
> https://www.researchgate.net/profile/Ivan_Calandra
> 
> On 03/03/2020 16:36, David Winsemius wrote:
> >
> > On 3/3/20 7:29 AM, Dennis Weygand wrote:
> >> How do I change the default directory that file.choose() (Windows-10)
> >> uses?
> >
> >
> > ?setwd
> >
> >
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

From c@|@ndr@ @end|ng |rom rgzm@de  Wed Mar  4 09:05:41 2020
From: c@|@ndr@ @end|ng |rom rgzm@de (Ivan Calandra)
Date: Wed, 4 Mar 2020 09:05:41 +0100
Subject: [R] file.choose()
In-Reply-To: <ee7e9f33dd8f48008e6c9b3779ee2c18@SRVEXCHCM1302.precheza.cz>
References: <CAJgAAVScqJ_zmn_m2xmzdpsehwBLePchh0PzOkg1dRwvRohjSw@mail.gmail.com>
 <8a236153-b7b3-eb83-6d4b-ae21317f8d04@comcast.net>
 <5643ea19-656e-2780-90ae-3fd6ecd2fe6c@rgzm.de>
 <ee7e9f33dd8f48008e6c9b3779ee2c18@SRVEXCHCM1302.precheza.cz>
Message-ID: <94a77ff2-ca9d-f19b-1586-19faf1795c0a@rgzm.de>

Thanks Petr for checking.

This unexpected behavior is reproducible on my machine, both with the
RGui and RStudio, both with R3.6.2 and 3.6.3.
> sessionInfo()
R version 3.6.3 (2020-02-29)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 18362)
Matrix products: default
locale:
[1] LC_COLLATE=English_United Kingdom.1252? LC_CTYPE=English_United
Kingdom.1252??
[3] LC_MONETARY=English_United Kingdom.1252
LC_NUMERIC=C??????????????????????????
[5] LC_TIME=English_United Kingdom.1252???
attached base packages:
[1] stats???? graphics? grDevices utils???? datasets? methods?? base????
loaded via a namespace (and not attached):
[1] compiler_3.6.3 tools_3.6.3

Couldn't be that it behaves differently when the working directory is
the root of the drive (D:/) vs. a folder on the drive (D:/Data)?

Ivan ?

--
Dr. Ivan Calandra
TraCEr, laboratory for Traceology and Controlled Experiments
MONREPOS Archaeological Research Centre and
Museum for Human Behavioural Evolution
Schloss Monrepos
56567 Neuwied, Germany
+49 (0) 2631 9772-243
https://www.researchgate.net/profile/Ivan_Calandra

On 04/03/2020 7:55, PIKAL Petr wrote:
> Hi Ivan
>
> I tried your examples and they behave as expected. Second one opens D:/ and
> third should be setwd("D:/Data/") to open in Data folder.
>
>> sessionInfo()
> R Under development (unstable) (2019-07-21 r76854)
> Platform: x86_64-w64-mingw32/x64 (64-bit)
> Running under: Windows 10 x64 (build 18363)
>
> So the problem is in your setting.
>
> Cheers
> Petr
>
>> -----Original Message-----
>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Ivan Calandra
>> Sent: Tuesday, March 3, 2020 4:48 PM
>> To: r-help at r-project.org
>> Subject: Re: [R] file.choose()
>>
>> That's what I was about to answer but tried first and it did not work.
>> Now I tried more and noticed an unexpected behavior:
>>
>> getwd()
>> [1] "C:/Users/.../Documents"
>> file.choose() ## opens in "C:/Users/.../Documents" as expected
>>
>> setwd("D:/")
>> getwd()
>> [1] "D:/"
>> file.choose() ## unexpectedly, opens in "C:/Users/.../Documents"
>>
>> setwd("D:/Data")
>> getwd()
>> [1] "D:/Data"
>> file.choose() ## opens in "D:/Data" as expected
>>
>> Is that normal behavior?
>>
>> Ivan
>>
>> --
>> Dr. Ivan Calandra
>> TraCEr, laboratory for Traceology and Controlled Experiments MONREPOS
>> Archaeological Research Centre and Museum for Human Behavioural Evolution
>> Schloss Monrepos
>> 56567 Neuwied, Germany
>> +49 (0) 2631 9772-243
>> https://www.researchgate.net/profile/Ivan_Calandra
>>
>> On 03/03/2020 16:36, David Winsemius wrote:
>>> On 3/3/20 7:29 AM, Dennis Weygand wrote:
>>>> How do I change the default directory that file.choose() (Windows-10)
>>>> uses?
>>>
>>> ?setwd
>>>
>>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From petr@p|k@| @end|ng |rom prechez@@cz  Wed Mar  4 09:47:13 2020
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Wed, 4 Mar 2020 08:47:13 +0000
Subject: [R] file.choose()
In-Reply-To: <94a77ff2-ca9d-f19b-1586-19faf1795c0a@rgzm.de>
References: <CAJgAAVScqJ_zmn_m2xmzdpsehwBLePchh0PzOkg1dRwvRohjSw@mail.gmail.com>
 <8a236153-b7b3-eb83-6d4b-ae21317f8d04@comcast.net>
 <5643ea19-656e-2780-90ae-3fd6ecd2fe6c@rgzm.de>
 <ee7e9f33dd8f48008e6c9b3779ee2c18@SRVEXCHCM1302.precheza.cz>
 <94a77ff2-ca9d-f19b-1586-19faf1795c0a@rgzm.de>
Message-ID: <4b57114a003e4799b24e515274e63f8e@SRVEXCHCM1302.precheza.cz>

Hm, as I wrote, something is weird with your installation or machine.

> version
               _                                                 
platform       x86_64-w64-mingw32                                
arch           x86_64                                            
os             mingw32                                           
system         x86_64, mingw32                                   
status         Under development (unstable)                      
major          3                                                 
minor          7.0                                               
year           2019                                              
month          07                                                
day            21                                                
svn rev        76854                                             
language       R                                                 
version.string R Under development (unstable) (2019-07-21 r76854)
nickname       Unsuffered Consequences                           
>

I do not have other version available so mayby others could adivice what is
going on.

> getwd()
[1] "O:/Dokumenty/STAT/pracovni"
> setwd("D:/")
> file.choose()
Error in file.choose() : file choice cancelled

> dir()
 [1] "$RECYCLE.BIN"              "archiv"                   
 [3] "Cecko"                     "COzak.csv"                
 ...
13] "vypal"                     "Windows Burn Temp Files"  

> setwd("D:/archiv/")
> getwd()
[1] "D:/archiv"
> dir()
[1] "CC"                     "disketa z mereni barvy" "jine"

[4] "prezentace"             "TEMP"                   "zdroje"

[7] "zpravy"                
>

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Ivan Calandra
> Sent: Wednesday, March 4, 2020 9:06 AM
> To: r-help at r-project.org
> Subject: Re: [R] file.choose()
> 
> Thanks Petr for checking.
> 
> This unexpected behavior is reproducible on my machine, both with the RGui
> and RStudio, both with R3.6.2 and 3.6.3.
> > sessionInfo()
> R version 3.6.3 (2020-02-29)
> Platform: x86_64-w64-mingw32/x64 (64-bit) Running under: Windows 10 x64
> (build 18362) Matrix products: default
> locale:
> [1] LC_COLLATE=English_United Kingdom.1252? LC_CTYPE=English_United
> Kingdom.1252
> [3] LC_MONETARY=English_United Kingdom.1252 LC_NUMERIC=C [5]
> LC_TIME=English_United Kingdom.1252 attached base packages:
> [1] stats???? graphics? grDevices utils???? datasets? methods?? base
loaded via a
> namespace (and not attached):
> [1] compiler_3.6.3 tools_3.6.3
> 
> Couldn't be that it behaves differently when the working directory is the
root of
> the drive (D:/) vs. a folder on the drive (D:/Data)?
> 
> Ivan
> 
> --
> Dr. Ivan Calandra
> TraCEr, laboratory for Traceology and Controlled Experiments MONREPOS
> Archaeological Research Centre and Museum for Human Behavioural Evolution
> Schloss Monrepos
> 56567 Neuwied, Germany
> +49 (0) 2631 9772-243
> https://www.researchgate.net/profile/Ivan_Calandra
> 
> On 04/03/2020 7:55, PIKAL Petr wrote:
> > Hi Ivan
> >
> > I tried your examples and they behave as expected. Second one opens
> > D:/ and third should be setwd("D:/Data/") to open in Data folder.
> >
> >> sessionInfo()
> > R Under development (unstable) (2019-07-21 r76854)
> > Platform: x86_64-w64-mingw32/x64 (64-bit) Running under: Windows 10
> > x64 (build 18363)
> >
> > So the problem is in your setting.
> >
> > Cheers
> > Petr
> >
> >> -----Original Message-----
> >> From: R-help <r-help-bounces at r-project.org> On Behalf Of Ivan
> >> Calandra
> >> Sent: Tuesday, March 3, 2020 4:48 PM
> >> To: r-help at r-project.org
> >> Subject: Re: [R] file.choose()
> >>
> >> That's what I was about to answer but tried first and it did not work.
> >> Now I tried more and noticed an unexpected behavior:
> >>
> >> getwd()
> >> [1] "C:/Users/.../Documents"
> >> file.choose() ## opens in "C:/Users/.../Documents" as expected
> >>
> >> setwd("D:/")
> >> getwd()
> >> [1] "D:/"
> >> file.choose() ## unexpectedly, opens in "C:/Users/.../Documents"
> >>
> >> setwd("D:/Data")
> >> getwd()
> >> [1] "D:/Data"
> >> file.choose() ## opens in "D:/Data" as expected
> >>
> >> Is that normal behavior?
> >>
> >> Ivan
> >>
> >> --
> >> Dr. Ivan Calandra
> >> TraCEr, laboratory for Traceology and Controlled Experiments MONREPOS
> >> Archaeological Research Centre and Museum for Human Behavioural
> >> Evolution Schloss Monrepos
> >> 56567 Neuwied, Germany
> >> +49 (0) 2631 9772-243
> >> https://www.researchgate.net/profile/Ivan_Calandra
> >>
> >> On 03/03/2020 16:36, David Winsemius wrote:
> >>> On 3/3/20 7:29 AM, Dennis Weygand wrote:
> >>>> How do I change the default directory that file.choose()
> >>>> (Windows-10) uses?
> >>>
> >>> ?setwd
> >>>
> >>>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

From c@|@ndr@ @end|ng |rom rgzm@de  Wed Mar  4 09:53:36 2020
From: c@|@ndr@ @end|ng |rom rgzm@de (Ivan Calandra)
Date: Wed, 4 Mar 2020 09:53:36 +0100
Subject: [R] file.choose()
In-Reply-To: <4b57114a003e4799b24e515274e63f8e@SRVEXCHCM1302.precheza.cz>
References: <CAJgAAVScqJ_zmn_m2xmzdpsehwBLePchh0PzOkg1dRwvRohjSw@mail.gmail.com>
 <8a236153-b7b3-eb83-6d4b-ae21317f8d04@comcast.net>
 <5643ea19-656e-2780-90ae-3fd6ecd2fe6c@rgzm.de>
 <ee7e9f33dd8f48008e6c9b3779ee2c18@SRVEXCHCM1302.precheza.cz>
 <94a77ff2-ca9d-f19b-1586-19faf1795c0a@rgzm.de>
 <4b57114a003e4799b24e515274e63f8e@SRVEXCHCM1302.precheza.cz>
Message-ID: <4cde27de-fe81-b70f-6026-61ab1272ac74@rgzm.de>

Well, actually it doesn't matter much because I almost never use this
function, and when I do, I use RStudio projects anyway with relative paths.

It was just out of curiosity and trying to understand why it behaves in
this (unexpected) way.

Thanks,
Ivan

--
Dr. Ivan Calandra
TraCEr, laboratory for Traceology and Controlled Experiments
MONREPOS Archaeological Research Centre and
Museum for Human Behavioural Evolution
Schloss Monrepos
56567 Neuwied, Germany
+49 (0) 2631 9772-243
https://www.researchgate.net/profile/Ivan_Calandra

On 04/03/2020 9:47, PIKAL Petr wrote:
> Hm, as I wrote, something is weird with your installation or machine.
>
>> version
>                _                                                 
> platform       x86_64-w64-mingw32                                
> arch           x86_64                                            
> os             mingw32                                           
> system         x86_64, mingw32                                   
> status         Under development (unstable)                      
> major          3                                                 
> minor          7.0                                               
> year           2019                                              
> month          07                                                
> day            21                                                
> svn rev        76854                                             
> language       R                                                 
> version.string R Under development (unstable) (2019-07-21 r76854)
> nickname       Unsuffered Consequences                           
> I do not have other version available so mayby others could adivice what is
> going on.
>
>> getwd()
> [1] "O:/Dokumenty/STAT/pracovni"
>> setwd("D:/")
>> file.choose()
> Error in file.choose() : file choice cancelled
>
>> dir()
>  [1] "$RECYCLE.BIN"              "archiv"                   
>  [3] "Cecko"                     "COzak.csv"                
>  ...
> 13] "vypal"                     "Windows Burn Temp Files"  
>
>> setwd("D:/archiv/")
>> getwd()
> [1] "D:/archiv"
>> dir()
> [1] "CC"                     "disketa z mereni barvy" "jine"
>
> [4] "prezentace"             "TEMP"                   "zdroje"
>
> [7] "zpravy"                
> Cheers
> Petr
>
>> -----Original Message-----
>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Ivan Calandra
>> Sent: Wednesday, March 4, 2020 9:06 AM
>> To: r-help at r-project.org
>> Subject: Re: [R] file.choose()
>>
>> Thanks Petr for checking.
>>
>> This unexpected behavior is reproducible on my machine, both with the RGui
>> and RStudio, both with R3.6.2 and 3.6.3.
>>> sessionInfo()
>> R version 3.6.3 (2020-02-29)
>> Platform: x86_64-w64-mingw32/x64 (64-bit) Running under: Windows 10 x64
>> (build 18362) Matrix products: default
>> locale:
>> [1] LC_COLLATE=English_United Kingdom.1252? LC_CTYPE=English_United
>> Kingdom.1252
>> [3] LC_MONETARY=English_United Kingdom.1252 LC_NUMERIC=C [5]
>> LC_TIME=English_United Kingdom.1252 attached base packages:
>> [1] stats???? graphics? grDevices utils???? datasets? methods?? base
> loaded via a
>> namespace (and not attached):
>> [1] compiler_3.6.3 tools_3.6.3
>>
>> Couldn't be that it behaves differently when the working directory is the
> root of
>> the drive (D:/) vs. a folder on the drive (D:/Data)?
>>
>> Ivan
>>
>> --
>> Dr. Ivan Calandra
>> TraCEr, laboratory for Traceology and Controlled Experiments MONREPOS
>> Archaeological Research Centre and Museum for Human Behavioural Evolution
>> Schloss Monrepos
>> 56567 Neuwied, Germany
>> +49 (0) 2631 9772-243
>> https://www.researchgate.net/profile/Ivan_Calandra
>>
>> On 04/03/2020 7:55, PIKAL Petr wrote:
>>> Hi Ivan
>>>
>>> I tried your examples and they behave as expected. Second one opens
>>> D:/ and third should be setwd("D:/Data/") to open in Data folder.
>>>
>>>> sessionInfo()
>>> R Under development (unstable) (2019-07-21 r76854)
>>> Platform: x86_64-w64-mingw32/x64 (64-bit) Running under: Windows 10
>>> x64 (build 18363)
>>>
>>> So the problem is in your setting.
>>>
>>> Cheers
>>> Petr
>>>
>>>> -----Original Message-----
>>>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Ivan
>>>> Calandra
>>>> Sent: Tuesday, March 3, 2020 4:48 PM
>>>> To: r-help at r-project.org
>>>> Subject: Re: [R] file.choose()
>>>>
>>>> That's what I was about to answer but tried first and it did not work.
>>>> Now I tried more and noticed an unexpected behavior:
>>>>
>>>> getwd()
>>>> [1] "C:/Users/.../Documents"
>>>> file.choose() ## opens in "C:/Users/.../Documents" as expected
>>>>
>>>> setwd("D:/")
>>>> getwd()
>>>> [1] "D:/"
>>>> file.choose() ## unexpectedly, opens in "C:/Users/.../Documents"
>>>>
>>>> setwd("D:/Data")
>>>> getwd()
>>>> [1] "D:/Data"
>>>> file.choose() ## opens in "D:/Data" as expected
>>>>
>>>> Is that normal behavior?
>>>>
>>>> Ivan
>>>>
>>>> --
>>>> Dr. Ivan Calandra
>>>> TraCEr, laboratory for Traceology and Controlled Experiments MONREPOS
>>>> Archaeological Research Centre and Museum for Human Behavioural
>>>> Evolution Schloss Monrepos
>>>> 56567 Neuwied, Germany
>>>> +49 (0) 2631 9772-243
>>>> https://www.researchgate.net/profile/Ivan_Calandra
>>>>
>>>> On 03/03/2020 16:36, David Winsemius wrote:
>>>>> On 3/3/20 7:29 AM, Dennis Weygand wrote:
>>>>>> How do I change the default directory that file.choose()
>>>>>> (Windows-10) uses?
>>>>> ?setwd
>>>>>
>>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Mar  4 10:45:03 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 4 Mar 2020 09:45:03 +0000
Subject: [R] file.choose()
In-Reply-To: <94a77ff2-ca9d-f19b-1586-19faf1795c0a@rgzm.de>
References: <CAJgAAVScqJ_zmn_m2xmzdpsehwBLePchh0PzOkg1dRwvRohjSw@mail.gmail.com>
 <8a236153-b7b3-eb83-6d4b-ae21317f8d04@comcast.net>
 <5643ea19-656e-2780-90ae-3fd6ecd2fe6c@rgzm.de>
 <ee7e9f33dd8f48008e6c9b3779ee2c18@SRVEXCHCM1302.precheza.cz>
 <94a77ff2-ca9d-f19b-1586-19faf1795c0a@rgzm.de>
Message-ID: <4960607c-9d02-34bb-bf8c-71fd8da01130@sapo.pt>

Hello,

This is off-topic, it's been a while since I update my version of Windows.

Running R 3.6.3, RGui on Windows 7, sessionInfo() below.

The unexpected behavior I got is different from those posted so far.
In all cases the dialog window was closed without choosing a file.
Note: I don't have a directory C:\data so I changed to the home dir.

old_dir <- getwd()
old_dir
#[1] "C:/Programas/R/R-3.6.3/bin/x64"

file.choose()    # works, current dir was not changed

setwd('~/')
getwd()
#[1] "C:/Users/Rui/Documents"

file.choose()    # doesn't work, still in "C:/Programas/R/R-3.6.3/bin/x64"
file.choose()    # works at the second time

setwd('C:/')
getwd()
#[1] "C:/"

file.choose()    # doens't work, still in "C:/Users/Rui/Documents"
file.choose()    # works at the second time

setwd(old_dir)
getwd()
#[1] "C:/Programas/R/R-3.6.3/bin/x64"

file.choose()    # doesn't work, still in "C:/"
file.choose()    # works at the second time


sessionInfo()
R version 3.6.3 (2020-02-29)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

Matrix products: default

locale:
[1] LC_COLLATE=Portuguese_Portugal.1252 
LC_CTYPE=Portuguese_Portugal.1252
[3] LC_MONETARY=Portuguese_Portugal.1252 LC_NUMERIC=C 

[5] LC_TIME=Portuguese_Portugal.1252

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] compiler_3.6.3


Hope this helps,

Rui Barradas



?s 08:05 de 04/03/20, Ivan Calandra escreveu:
> Thanks Petr for checking.
> 
> This unexpected behavior is reproducible on my machine, both with the
> RGui and RStudio, both with R3.6.2 and 3.6.3.
>> sessionInfo()
> R version 3.6.3 (2020-02-29)
> Platform: x86_64-w64-mingw32/x64 (64-bit)
> Running under: Windows 10 x64 (build 18362)
> Matrix products: default
> locale:
> [1] LC_COLLATE=English_United Kingdom.1252? LC_CTYPE=English_United
> Kingdom.1252
> [3] LC_MONETARY=English_United Kingdom.1252
> LC_NUMERIC=C
> [5] LC_TIME=English_United Kingdom.1252
> attached base packages:
> [1] stats???? graphics? grDevices utils???? datasets? methods?? base
> loaded via a namespace (and not attached):
> [1] compiler_3.6.3 tools_3.6.3
> 
> Couldn't be that it behaves differently when the working directory is
> the root of the drive (D:/) vs. a folder on the drive (D:/Data)?
> 
> Ivan
> 
> --
> Dr. Ivan Calandra
> TraCEr, laboratory for Traceology and Controlled Experiments
> MONREPOS Archaeological Research Centre and
> Museum for Human Behavioural Evolution
> Schloss Monrepos
> 56567 Neuwied, Germany
> +49 (0) 2631 9772-243
> https://www.researchgate.net/profile/Ivan_Calandra
> 
> On 04/03/2020 7:55, PIKAL Petr wrote:
>> Hi Ivan
>>
>> I tried your examples and they behave as expected. Second one opens D:/ and
>> third should be setwd("D:/Data/") to open in Data folder.
>>
>>> sessionInfo()
>> R Under development (unstable) (2019-07-21 r76854)
>> Platform: x86_64-w64-mingw32/x64 (64-bit)
>> Running under: Windows 10 x64 (build 18363)
>>
>> So the problem is in your setting.
>>
>> Cheers
>> Petr
>>
>>> -----Original Message-----
>>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Ivan Calandra
>>> Sent: Tuesday, March 3, 2020 4:48 PM
>>> To: r-help at r-project.org
>>> Subject: Re: [R] file.choose()
>>>
>>> That's what I was about to answer but tried first and it did not work.
>>> Now I tried more and noticed an unexpected behavior:
>>>
>>> getwd()
>>> [1] "C:/Users/.../Documents"
>>> file.choose() ## opens in "C:/Users/.../Documents" as expected
>>>
>>> setwd("D:/")
>>> getwd()
>>> [1] "D:/"
>>> file.choose() ## unexpectedly, opens in "C:/Users/.../Documents"
>>>
>>> setwd("D:/Data")
>>> getwd()
>>> [1] "D:/Data"
>>> file.choose() ## opens in "D:/Data" as expected
>>>
>>> Is that normal behavior?
>>>
>>> Ivan
>>>
>>> --
>>> Dr. Ivan Calandra
>>> TraCEr, laboratory for Traceology and Controlled Experiments MONREPOS
>>> Archaeological Research Centre and Museum for Human Behavioural Evolution
>>> Schloss Monrepos
>>> 56567 Neuwied, Germany
>>> +49 (0) 2631 9772-243
>>> https://www.researchgate.net/profile/Ivan_Calandra
>>>
>>> On 03/03/2020 16:36, David Winsemius wrote:
>>>> On 3/3/20 7:29 AM, Dennis Weygand wrote:
>>>>> How do I change the default directory that file.choose() (Windows-10)
>>>>> uses?
>>>>
>>>> ?setwd
>>>>
>>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From c@|@ndr@ @end|ng |rom rgzm@de  Wed Mar  4 10:48:29 2020
From: c@|@ndr@ @end|ng |rom rgzm@de (Ivan Calandra)
Date: Wed, 4 Mar 2020 10:48:29 +0100
Subject: [R] file.choose()
In-Reply-To: <4960607c-9d02-34bb-bf8c-71fd8da01130@sapo.pt>
References: <CAJgAAVScqJ_zmn_m2xmzdpsehwBLePchh0PzOkg1dRwvRohjSw@mail.gmail.com>
 <8a236153-b7b3-eb83-6d4b-ae21317f8d04@comcast.net>
 <5643ea19-656e-2780-90ae-3fd6ecd2fe6c@rgzm.de>
 <ee7e9f33dd8f48008e6c9b3779ee2c18@SRVEXCHCM1302.precheza.cz>
 <94a77ff2-ca9d-f19b-1586-19faf1795c0a@rgzm.de>
 <4960607c-9d02-34bb-bf8c-71fd8da01130@sapo.pt>
Message-ID: <b046afd5-2621-4585-7c00-0ae65dc59483@rgzm.de>

Hi Rui,

I hadn't checked it, but indeed, calling file.choose() a second time
works as expected when it doesn't the first time already.

Best,
Ivan

--
Dr. Ivan Calandra
TraCEr, laboratory for Traceology and Controlled Experiments
MONREPOS Archaeological Research Centre and
Museum for Human Behavioural Evolution
Schloss Monrepos
56567 Neuwied, Germany
+49 (0) 2631 9772-243
https://www.researchgate.net/profile/Ivan_Calandra

On 04/03/2020 10:45, Rui Barradas wrote:
> Hello,
>
> This is off-topic, it's been a while since I update my version of
> Windows.
>
> Running R 3.6.3, RGui on Windows 7, sessionInfo() below.
>
> The unexpected behavior I got is different from those posted so far.
> In all cases the dialog window was closed without choosing a file.
> Note: I don't have a directory C:\data so I changed to the home dir.
>
> old_dir <- getwd()
> old_dir
> #[1] "C:/Programas/R/R-3.6.3/bin/x64"
>
> file.choose()??? # works, current dir was not changed
>
> setwd('~/')
> getwd()
> #[1] "C:/Users/Rui/Documents"
>
> file.choose()??? # doesn't work, still in
> "C:/Programas/R/R-3.6.3/bin/x64"
> file.choose()??? # works at the second time
>
> setwd('C:/')
> getwd()
> #[1] "C:/"
>
> file.choose()??? # doens't work, still in "C:/Users/Rui/Documents"
> file.choose()??? # works at the second time
>
> setwd(old_dir)
> getwd()
> #[1] "C:/Programas/R/R-3.6.3/bin/x64"
>
> file.choose()??? # doesn't work, still in "C:/"
> file.choose()??? # works at the second time
>
>
> sessionInfo()
> R version 3.6.3 (2020-02-29)
> Platform: x86_64-w64-mingw32/x64 (64-bit)
> Running under: Windows 7 x64 (build 7601) Service Pack 1
>
> Matrix products: default
>
> locale:
> [1] LC_COLLATE=Portuguese_Portugal.1252 LC_CTYPE=Portuguese_Portugal.1252
> [3] LC_MONETARY=Portuguese_Portugal.1252 LC_NUMERIC=C
> [5] LC_TIME=Portuguese_Portugal.1252
>
> attached base packages:
> [1] stats???? graphics? grDevices utils???? datasets? methods?? base
>
> loaded via a namespace (and not attached):
> [1] compiler_3.6.3
>
>
> Hope this helps,
>
> Rui Barradas
>
>
>
> ?s 08:05 de 04/03/20, Ivan Calandra escreveu:
>> Thanks Petr for checking.
>>
>> This unexpected behavior is reproducible on my machine, both with the
>> RGui and RStudio, both with R3.6.2 and 3.6.3.
>>> sessionInfo()
>> R version 3.6.3 (2020-02-29)
>> Platform: x86_64-w64-mingw32/x64 (64-bit)
>> Running under: Windows 10 x64 (build 18362)
>> Matrix products: default
>> locale:
>> [1] LC_COLLATE=English_United Kingdom.1252? LC_CTYPE=English_United
>> Kingdom.1252
>> [3] LC_MONETARY=English_United Kingdom.1252
>> LC_NUMERIC=C
>> [5] LC_TIME=English_United Kingdom.1252
>> attached base packages:
>> [1] stats???? graphics? grDevices utils???? datasets? methods?? base
>> loaded via a namespace (and not attached):
>> [1] compiler_3.6.3 tools_3.6.3
>>
>> Couldn't be that it behaves differently when the working directory is
>> the root of the drive (D:/) vs. a folder on the drive (D:/Data)?
>>
>> Ivan
>>
>> -- 
>> Dr. Ivan Calandra
>> TraCEr, laboratory for Traceology and Controlled Experiments
>> MONREPOS Archaeological Research Centre and
>> Museum for Human Behavioural Evolution
>> Schloss Monrepos
>> 56567 Neuwied, Germany
>> +49 (0) 2631 9772-243
>> https://www.researchgate.net/profile/Ivan_Calandra
>>
>> On 04/03/2020 7:55, PIKAL Petr wrote:
>>> Hi Ivan
>>>
>>> I tried your examples and they behave as expected. Second one opens
>>> D:/ and
>>> third should be setwd("D:/Data/") to open in Data folder.
>>>
>>>> sessionInfo()
>>> R Under development (unstable) (2019-07-21 r76854)
>>> Platform: x86_64-w64-mingw32/x64 (64-bit)
>>> Running under: Windows 10 x64 (build 18363)
>>>
>>> So the problem is in your setting.
>>>
>>> Cheers
>>> Petr
>>>
>>>> -----Original Message-----
>>>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Ivan Calandra
>>>> Sent: Tuesday, March 3, 2020 4:48 PM
>>>> To: r-help at r-project.org
>>>> Subject: Re: [R] file.choose()
>>>>
>>>> That's what I was about to answer but tried first and it did not work.
>>>> Now I tried more and noticed an unexpected behavior:
>>>>
>>>> getwd()
>>>> [1] "C:/Users/.../Documents"
>>>> file.choose() ## opens in "C:/Users/.../Documents" as expected
>>>>
>>>> setwd("D:/")
>>>> getwd()
>>>> [1] "D:/"
>>>> file.choose() ## unexpectedly, opens in "C:/Users/.../Documents"
>>>>
>>>> setwd("D:/Data")
>>>> getwd()
>>>> [1] "D:/Data"
>>>> file.choose() ## opens in "D:/Data" as expected
>>>>
>>>> Is that normal behavior?
>>>>
>>>> Ivan
>>>>
>>>> -- 
>>>> Dr. Ivan Calandra
>>>> TraCEr, laboratory for Traceology and Controlled Experiments MONREPOS
>>>> Archaeological Research Centre and Museum for Human Behavioural
>>>> Evolution
>>>> Schloss Monrepos
>>>> 56567 Neuwied, Germany
>>>> +49 (0) 2631 9772-243
>>>> https://www.researchgate.net/profile/Ivan_Calandra
>>>>
>>>> On 03/03/2020 16:36, David Winsemius wrote:
>>>>> On 3/3/20 7:29 AM, Dennis Weygand wrote:
>>>>>> How do I change the default directory that file.choose()
>>>>>> (Windows-10)
>>>>>> uses?
>>>>>
>>>>> ?setwd
>>>>>
>>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Mar  4 11:23:05 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 4 Mar 2020 05:23:05 -0500
Subject: [R] file.choose()
In-Reply-To: <b046afd5-2621-4585-7c00-0ae65dc59483@rgzm.de>
References: <CAJgAAVScqJ_zmn_m2xmzdpsehwBLePchh0PzOkg1dRwvRohjSw@mail.gmail.com>
 <8a236153-b7b3-eb83-6d4b-ae21317f8d04@comcast.net>
 <5643ea19-656e-2780-90ae-3fd6ecd2fe6c@rgzm.de>
 <ee7e9f33dd8f48008e6c9b3779ee2c18@SRVEXCHCM1302.precheza.cz>
 <94a77ff2-ca9d-f19b-1586-19faf1795c0a@rgzm.de>
 <4960607c-9d02-34bb-bf8c-71fd8da01130@sapo.pt>
 <b046afd5-2621-4585-7c00-0ae65dc59483@rgzm.de>
Message-ID: <b7b28ed9-836b-20fa-25b5-79578b72b60f@gmail.com>

You can see the source code for this in

https://svn.r-project.org/R/trunk/src/extra/graphapp/dialogs.c

The function handling the dialog is askfilenames, starting at line 229. 
I'd guess the weird behaviour where file.choose() acts differently on 
the first and second calls in Rui's example is because the directory is 
saved before the peekevent() calls on line 274.  However, I can't build 
R on Windows any more, so I can't test this.

Duncan Murdoch

On 04/03/2020 4:48 a.m., Ivan Calandra wrote:
> Hi Rui,
> 
> I hadn't checked it, but indeed, calling file.choose() a second time
> works as expected when it doesn't the first time already.
> 
> Best,
> Ivan
> 
> --
> Dr. Ivan Calandra
> TraCEr, laboratory for Traceology and Controlled Experiments
> MONREPOS Archaeological Research Centre and
> Museum for Human Behavioural Evolution
> Schloss Monrepos
> 56567 Neuwied, Germany
> +49 (0) 2631 9772-243
> https://www.researchgate.net/profile/Ivan_Calandra
> 
> On 04/03/2020 10:45, Rui Barradas wrote:
>> Hello,
>>
>> This is off-topic, it's been a while since I update my version of
>> Windows.
>>
>> Running R 3.6.3, RGui on Windows 7, sessionInfo() below.
>>
>> The unexpected behavior I got is different from those posted so far.
>> In all cases the dialog window was closed without choosing a file.
>> Note: I don't have a directory C:\data so I changed to the home dir.
>>
>> old_dir <- getwd()
>> old_dir
>> #[1] "C:/Programas/R/R-3.6.3/bin/x64"
>>
>> file.choose()??? # works, current dir was not changed
>>
>> setwd('~/')
>> getwd()
>> #[1] "C:/Users/Rui/Documents"
>>
>> file.choose()??? # doesn't work, still in
>> "C:/Programas/R/R-3.6.3/bin/x64"
>> file.choose()??? # works at the second time
>>
>> setwd('C:/')
>> getwd()
>> #[1] "C:/"
>>
>> file.choose()??? # doens't work, still in "C:/Users/Rui/Documents"
>> file.choose()??? # works at the second time
>>
>> setwd(old_dir)
>> getwd()
>> #[1] "C:/Programas/R/R-3.6.3/bin/x64"
>>
>> file.choose()??? # doesn't work, still in "C:/"
>> file.choose()??? # works at the second time
>>
>>
>> sessionInfo()
>> R version 3.6.3 (2020-02-29)
>> Platform: x86_64-w64-mingw32/x64 (64-bit)
>> Running under: Windows 7 x64 (build 7601) Service Pack 1
>>
>> Matrix products: default
>>
>> locale:
>> [1] LC_COLLATE=Portuguese_Portugal.1252 LC_CTYPE=Portuguese_Portugal.1252
>> [3] LC_MONETARY=Portuguese_Portugal.1252 LC_NUMERIC=C
>> [5] LC_TIME=Portuguese_Portugal.1252
>>
>> attached base packages:
>> [1] stats???? graphics? grDevices utils???? datasets? methods?? base
>>
>> loaded via a namespace (and not attached):
>> [1] compiler_3.6.3
>>
>>
>> Hope this helps,
>>
>> Rui Barradas
>>
>>
>>
>> ?s 08:05 de 04/03/20, Ivan Calandra escreveu:
>>> Thanks Petr for checking.
>>>
>>> This unexpected behavior is reproducible on my machine, both with the
>>> RGui and RStudio, both with R3.6.2 and 3.6.3.
>>>> sessionInfo()
>>> R version 3.6.3 (2020-02-29)
>>> Platform: x86_64-w64-mingw32/x64 (64-bit)
>>> Running under: Windows 10 x64 (build 18362)
>>> Matrix products: default
>>> locale:
>>> [1] LC_COLLATE=English_United Kingdom.1252? LC_CTYPE=English_United
>>> Kingdom.1252
>>> [3] LC_MONETARY=English_United Kingdom.1252
>>> LC_NUMERIC=C
>>> [5] LC_TIME=English_United Kingdom.1252
>>> attached base packages:
>>> [1] stats???? graphics? grDevices utils???? datasets? methods?? base
>>> loaded via a namespace (and not attached):
>>> [1] compiler_3.6.3 tools_3.6.3
>>>
>>> Couldn't be that it behaves differently when the working directory is
>>> the root of the drive (D:/) vs. a folder on the drive (D:/Data)?
>>>
>>> Ivan
>>>
>>> -- 
>>> Dr. Ivan Calandra
>>> TraCEr, laboratory for Traceology and Controlled Experiments
>>> MONREPOS Archaeological Research Centre and
>>> Museum for Human Behavioural Evolution
>>> Schloss Monrepos
>>> 56567 Neuwied, Germany
>>> +49 (0) 2631 9772-243
>>> https://www.researchgate.net/profile/Ivan_Calandra
>>>
>>> On 04/03/2020 7:55, PIKAL Petr wrote:
>>>> Hi Ivan
>>>>
>>>> I tried your examples and they behave as expected. Second one opens
>>>> D:/ and
>>>> third should be setwd("D:/Data/") to open in Data folder.
>>>>
>>>>> sessionInfo()
>>>> R Under development (unstable) (2019-07-21 r76854)
>>>> Platform: x86_64-w64-mingw32/x64 (64-bit)
>>>> Running under: Windows 10 x64 (build 18363)
>>>>
>>>> So the problem is in your setting.
>>>>
>>>> Cheers
>>>> Petr
>>>>
>>>>> -----Original Message-----
>>>>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Ivan Calandra
>>>>> Sent: Tuesday, March 3, 2020 4:48 PM
>>>>> To: r-help at r-project.org
>>>>> Subject: Re: [R] file.choose()
>>>>>
>>>>> That's what I was about to answer but tried first and it did not work.
>>>>> Now I tried more and noticed an unexpected behavior:
>>>>>
>>>>> getwd()
>>>>> [1] "C:/Users/.../Documents"
>>>>> file.choose() ## opens in "C:/Users/.../Documents" as expected
>>>>>
>>>>> setwd("D:/")
>>>>> getwd()
>>>>> [1] "D:/"
>>>>> file.choose() ## unexpectedly, opens in "C:/Users/.../Documents"
>>>>>
>>>>> setwd("D:/Data")
>>>>> getwd()
>>>>> [1] "D:/Data"
>>>>> file.choose() ## opens in "D:/Data" as expected
>>>>>
>>>>> Is that normal behavior?
>>>>>
>>>>> Ivan
>>>>>
>>>>> -- 
>>>>> Dr. Ivan Calandra
>>>>> TraCEr, laboratory for Traceology and Controlled Experiments MONREPOS
>>>>> Archaeological Research Centre and Museum for Human Behavioural
>>>>> Evolution
>>>>> Schloss Monrepos
>>>>> 56567 Neuwied, Germany
>>>>> +49 (0) 2631 9772-243
>>>>> https://www.researchgate.net/profile/Ivan_Calandra
>>>>>
>>>>> On 03/03/2020 16:36, David Winsemius wrote:
>>>>>> On 3/3/20 7:29 AM, Dennis Weygand wrote:
>>>>>>> How do I change the default directory that file.choose()
>>>>>>> (Windows-10)
>>>>>>> uses?
>>>>>>
>>>>>> ?setwd
>>>>>>
>>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From j@vedbtk111 @end|ng |rom gm@||@com  Wed Mar  4 11:35:12 2020
From: j@vedbtk111 @end|ng |rom gm@||@com (javed khan)
Date: Wed, 4 Mar 2020 11:35:12 +0100
Subject: [R] Getting error message,
 "LOOCV is not compatible with `resamples()` since only one
 resampling estimate is available. "
In-Reply-To: <CAJhui+sVXRJLLZtn2HiMmEw5--Yf6xEvRy162-ojTgsE-fV3cQ@mail.gmail.com>
References: <CAJhui+vnfU6qT=9RnXcM8BAm9KfL-7V-W-o4693Yv1XdoAq9tA@mail.gmail.com>
 <CAGxFJbQZni4_yRFYiCcr5ECQw6MdyFtZL-0u2=krqvNQ16MGUQ@mail.gmail.com>
 <CAJhui+t6NWXXr8vk8HzNUb5UuWiCzMTyw=E51sm4YDTk=H1=LA@mail.gmail.com>
 <CAGxFJbRWQN2SzrGB+Hf+b6HHO4MFbS1gcemFuLKT9rMu8XU_LQ@mail.gmail.com>
 <CAJhui+sVXRJLLZtn2HiMmEw5--Yf6xEvRy162-ojTgsE-fV3cQ@mail.gmail.com>
Message-ID: <CAJhui+vdR-2r3d=ZsVjks-NbbJkddXyjqbWNaLM-g6BO20hfYA@mail.gmail.com>

In response to my question, I want to confirm that the LOOCV gives me the
result (RMSE/MAE values), but when I use it as rvalues=resamples(list() ,
it gives error. All other works like boot, k fold cv and even LGOCV (Leave
Group Out Cross Validation).

Regards

On Tue, Mar 3, 2020 at 10:57 PM javed khan <javedbtk111 at gmail.com> wrote:

> I am sorry for that... I am just using caret package.
>
> Thanks
>
> On Tue, Mar 3, 2020 at 9:57 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>
>> ... and you **still** have not told us what package(s)...
>>
>> Bert Gunter
>>
>> "The trouble with having an open mind is that people keep coming along
>> and sticking things into it."
>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>
>>
>> On Tue, Mar 3, 2020 at 12:28 PM javed khan <javedbtk111 at gmail.com> wrote:
>>
>>> The data is as follows:  I included the code for 10 fold CV and LOOCV
>>>
>>> structure(list(ID = c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12,
>>> 13, 14, 15), Language = c(1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1,
>>> 1, 1, 3), Hardware = c(1, 2, 3, 1, 2, 4, 4, 2, 1, 1, 1, 5, 6,
>>> 1, 1), Duration = c(17, 7, 15, 18, 13, 5, 5, 11, 14, 5, 13, 31,
>>> 20, 26, 14), KSLOC = c(253.6, 40.5, 450, 214.4, 449.9, 50, 43,
>>> 200, 289, 39, 254.2, 128.6, 161.4, 164.8, 60.2), AdjFP = c(1217.1,
>>> 507.3, 2306.8, 788.5, 1337.6, 421.3, 99.9, 993, 1592.9, 240,
>>> 1611, 789, 690.9, 1347.5, 1044.3), RAWFP = c(1010, 457, 2284,
>>> 881, 1583, 411, 97, 998, 1554, 250, 1603, 724, 705, 1375, 976
>>> ), EffortMM = c(287, 82.5, 1107.31, 86.9, 336.3, 84, 23.2, 130.3,
>>> 116, 72, 258.7, 230.7, 157, 246.9, 69.9)), class = "data.frame",
>>> row.names = c(NA,
>>> -15L))
>>>
>>>
>>> index <- createDataPartition(d$Effort, p = .70,list = FALSE)
>>> tr <- d[index, ]
>>> ts <- d[-index, ]
>>> index_2 <- createFolds(tr$Effort, returnTrain = TRUE, list = TRUE)
>>>
>>> ct_rand <- trainControl(method = "repeatedcv", number=10,
>>> repeats=10,index = index_2, search="random")
>>> ct_grid <- trainControl(method = "repeatedcv", number=10,
>>> repeats=10,index = index_2, search="grid")
>>>
>>> ct_locv <- trainControl(method = "LOOCV",  search="random")
>>> ct_locv2 <- trainControl(method = "LOOCV",   search="grid")
>>>
>>>  ## ## ## ## ##Random Search for for 10 fold CV
>>>
>>> set.seed(30218)
>>> ran_CV <- train(Effort ~ ., data = tr,
>>>                     method = "pls",
>>>                     tuneLength = 15,
>>>                     metric = "MAE",
>>>                     preProc = c("center", "scale", "zv"),
>>>                     trControl = ct_rand)
>>> getTrainPerf(ran_CV)
>>> rn <- predict(ran_CV, newdata = ts)
>>> ##MAE(rn, ts$Effort)
>>>
>>>
>>> ## ## ## ## ##grid search  for 10 fold CV
>>>
>>> set.seed(30218)
>>> grid_CV <- train(Effort ~ ., data = tr,
>>>                      method = "pls",
>>>                      metric = "MAE",
>>>                      preProc = c("center", "scale", "zv"),
>>>                      trControl = ct_grid)
>>>
>>> getTrainPerf(grid_CV)
>>>
>>>   ## ## ## ## ##Random Search for LOOCV
>>>
>>> set.seed(30218)
>>> ran_locv <- train(Effort ~ ., data = tr,
>>>                 method = "pls",
>>>                 tuneLength = 15,
>>>                 metric = "MAE",
>>>                 preProc = c("center", "scale", "zv"),
>>>                 trControl = ct_locv)
>>> getTrainPerf(ran_locv)
>>> rn <- predict(ran_search, newdata = ts)
>>> ##MAE(rn, ts$Effort)
>>>
>>>
>>>  ## ## ## ## ##Grid Search for LOOCV
>>>
>>> set.seed(30218)
>>> grid_locv <- train(Effort ~ ., data = tr,
>>>                  method = "pls",
>>>                  metric = "MAE",
>>>                  preProc = c("center", "scale", "zv"),
>>>                  trControl = ct_locv2)
>>>
>>> getTrainPerf(grid_locv)
>>>
>>> rValues <- resamples(list(Random_Search_CV=ran_CV,
>>> Grid_Search_CV=grid_CV,
>>>
>>>                           Random_Search_LOOCV=ran_locv,
>>> Grid_Search_LOOCV=grid_locv))
>>>
>>> bwplot(rValues,metric="MAE", scales=list(cex=1), col="Green")
>>>
>>>
>>>
>>>
>>> On Tue, Mar 3, 2020 at 5:07 PM Bert Gunter <bgunter.4567 at gmail.com>
>>> wrote:
>>>
>>>> 2 1/2 suggestions:
>>>>
>>>> 1. Provide a small reproducible example with **minimal code** . It can
>>>> be difficult to sort through dozens of lines of code, and I, anyway, would
>>>> be unwilling to spend time trying to debug/isolate the problem when you
>>>> have apparently not made much of an effort to do so yourself. Others may
>>>> well be both more knowledgeable and more tolerant, of course.
>>>>
>>>> 2. If, **after a suitable wait ** you have not received useful answers,
>>>> contact the package maintainer of the package you used **which you have
>>>> again failed to identify** (the caret package?) . Also check to see whether
>>>> the package has its own user support structure. Some do, and this should be
>>>> the first point of contact anyway if so.
>>>>
>>>> 2 1/2 . Post in **plain text** not html, though I don't think it
>>>> mattered here.
>>>>
>>>>
>>>> Bert Gunter
>>>>
>>>> "The trouble with having an open mind is that people keep coming along
>>>> and sticking things into it."
>>>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>>>
>>>>
>>>> On Tue, Mar 3, 2020 at 3:30 AM javed khan <javedbtk111 at gmail.com>
>>>> wrote:
>>>>
>>>>> Hi, I am using different validation methods for random search and grid
>>>>> search. The validation methods are 10 fold CV, bootstrap and LOOCV but
>>>>> for
>>>>> LOOCV, I get the error message when I draw boxplots for all the
>>>>> results.
>>>>>
>>>>> Error is , LOOCV is not compatible with `resamples()` since only one
>>>>> resampling estimate is available.
>>>>>
>>>>> The code is below.
>>>>>
>>>>> d=readARFF("china.arff")
>>>>> index <- createDataPartition(d$Effort, p = .70,list = FALSE)
>>>>> tr <- d[index, ]
>>>>> ts <- d[-index, ]
>>>>> index_2 <- createFolds(tr$Effort, returnTrain = TRUE, list = TRUE)
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> ct_rand <- trainControl(method = "repeatedcv", number=10,
>>>>> repeats=10,index
>>>>> = index_2, search="random")
>>>>> ct_grid <- trainControl(method = "repeatedcv", number=10,
>>>>> repeats=10,index
>>>>> = index_2, search="grid")
>>>>>
>>>>>
>>>>> ct_boot1 <- trainControl(method = "boot", number=100,  index = index_2,
>>>>> search="random")
>>>>> ct_boot2 <- trainControl(method = "boot", number=100,  index = index_2,
>>>>> search="grid")
>>>>>
>>>>> ct_locv <- trainControl(method = "LOOCV",  search="random")
>>>>> ct_locv2 <- trainControl(method = "LOOCV",   search="grid")
>>>>>
>>>>> set.seed(30218)
>>>>> ran_CV <- train(Effort ~ ., data = tr,
>>>>>                     method = "pls",
>>>>>                     tuneLength = 15,
>>>>>                     metric = "MAE",
>>>>>                     preProc = c("center", "scale", "zv"),
>>>>>                     trControl = ct_rand)
>>>>> getTrainPerf(ran_CV)
>>>>> rn <- predict(ran_CV, newdata = ts)
>>>>>
>>>>> ## ## ## ## ##grid search CV
>>>>>
>>>>> set.seed(30218)
>>>>> grid_CV <- train(Effort ~ ., data = tr,
>>>>>                      method = "pls",
>>>>>                      metric = "MAE",
>>>>>                      preProc = c("center", "scale", "zv"),
>>>>>                      trControl = ct_grid)
>>>>>
>>>>> getTrainPerf(grid_CV)
>>>>>
>>>>> set.seed(30218)
>>>>> ran_boot <- train(Effort ~ ., data = tr,
>>>>>                 method = "pls",
>>>>>                 tuneLength = 15,
>>>>>                 metric = "MAE",
>>>>>                 preProc = c("center", "scale", "zv"),
>>>>>                 trControl = ct_boot1)
>>>>> getTrainPerf(ran_boot)
>>>>> rn <- predict(ran_search, newdata = ts)
>>>>> ##MAE(rn, ts$Effort)
>>>>>
>>>>>
>>>>> ## ## ## ## ##grid search boot
>>>>>
>>>>> set.seed(30218)
>>>>> grid_boot <- train(Effort ~ ., data = tr,
>>>>>                  method = "pls",
>>>>>                  metric = "MAE",
>>>>>                  preProc = c("center", "scale", "zv"),
>>>>>                  trControl = ct_boot2)
>>>>>
>>>>> getTrainPerf(grid_boot)
>>>>>
>>>>>
>>>>> set.seed(30218)
>>>>> ran_locv <- train(Effort ~ ., data = tr,
>>>>>                 method = "pls",
>>>>>                 tuneLength = 15,
>>>>>                 metric = "MAE",
>>>>>                 preProc = c("center", "scale", "zv"),
>>>>>                 trControl = ct_locv)
>>>>> getTrainPerf(ran_locv)
>>>>> rn <- predict(ran_search, newdata = ts)
>>>>> ##MAE(rn, ts$Effort)
>>>>>
>>>>>
>>>>> ## ## ## ## ##grid search CV
>>>>>
>>>>> set.seed(30218)
>>>>> grid_locv <- train(Effort ~ ., data = tr,
>>>>>                  method = "pls",
>>>>>                  metric = "MAE",
>>>>>                  preProc = c("center", "scale", "zv"),
>>>>>                  trControl = ct_locv2)
>>>>>
>>>>> getTrainPerf(grid_locv)
>>>>>
>>>>>
>>>>> rValues <- resamples(list(Random_Search_CV=ran_CV,
>>>>> Grid_Search_CV=grid_CV,
>>>>> Random_Search_Boot=ran_boot, Grid_Search_Boot=grid_boot ,
>>>>>                           Random_Search_LOOCV=ran_locv,
>>>>> Grid_Search_LOOCV=grid_locv))
>>>>>
>>>>> bwplot(rValues,metric="MAE", scales=list(cex=1), col="Green")
>>>>>
>>>>>         [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide
>>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>
>>>>

	[[alternative HTML version deleted]]


From c@nde|@m@d@@ch| @end|ng |rom gm@||@com  Wed Mar  4 18:58:34 2020
From: c@nde|@m@d@@ch| @end|ng |rom gm@||@com (Candela Madaschi)
Date: Wed, 4 Mar 2020 14:58:34 -0300
Subject: [R] Help! Can a nested fixed effects model with autocorrelation be
 possible?
Message-ID: <CAOezDu07qxXh-zu0XoKH=kJM6y3ctrk=___YqDR5kTtO6SoStQ@mail.gmail.com>

Hi everyone!
I'm a little bit lost as to which statistical model I should use.

I'm evaluating the decomposition of two plant species (factor: "species")
under two treatments: "temperature" (with 2 levels) and "water level" (3
levels). These two treatments are completely crossed. I have 5 replicates
per plant species for each time period (6 dates).
So I have 6 dates x 2 species x 2 temperatures x 3 water levels x 5
replicates: 360 obs. (180 obs. per species).

The comparison between plant species isn't relevant in my study, rather I
want to test the significance of the treatments within the plant species.
So I think that a nested model could fit my data. Could this be possible?

On the other hand, I've been reading that there could be temporal
correlation problems in my data, and that this can be addressed with nlme
package. But as I understand you can't fit a nested fixed effects model
using lme. My design doesn't have random effects, they are all fixed
factors, and, from what I understand, time can't be used as a random effect
because it is not a categorical variable. Furthermore, "species" can't be a
random factor because it only has two levels. In summary, I'm completely
lost.

My questions are:
Can I use a nested model for the structure of my data?
Is there such a thing as a nested fixed effects model with autocorrelation
approach?
Can I use lme or lme4 if that model exists?
Could I transform time variable to a categorical factor and use it as a
random factor nested in species?
Is there a simple way to analyse this data set?

Thank you!!

(I'm very sorry for my english, it is not my native language)
-- 
Candela Madaschi

	[[alternative HTML version deleted]]


From c@u@t|c|x88 @end|ng |rom gm@||@com  Tue Mar  3 19:31:06 2020
From: c@u@t|c|x88 @end|ng |rom gm@||@com (spencer davis)
Date: Tue, 3 Mar 2020 11:31:06 -0700
Subject: [R] Statistical Analysis of an Exchange Rate
Message-ID: <CADN7qjVmRRH6wErOAsm+yBYQohBZCDkvbXpGA4n3_ZzT1QR+sg@mail.gmail.com>

So I've been researching statistical analysis for a considerable amount of
time and still haven't really found what I've been looking for and am
hoping that by getting help answering this question it will send me down
the right path to answering all of my questions. So I am hoping that
someone will be able to tell me how and what package I would need to do
what I'm about to describe. I want to take historical price data from 1
minute currency pair charts and find the probabilities of price moves after
a pullback immediately following an impulsive move. So I would have to set
the definition of an impulsive move as price moving a certain percentage in
a certain amount of time, I'd have to define a threshold as to what would
be considered a pullback and what wouldn't and then I'd like to gain the
information as to what the probability is of different percentage of moves
at different pullbacks, the different probabilities with different length
impulsive moves. Can anyone get me set on the right path here, I'm swimming
in information and am just so lost. Any help will be so much appreciated.
Thanks!

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Wed Mar  4 20:27:52 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 4 Mar 2020 11:27:52 -0800
Subject: [R] 
 Help! Can a nested fixed effects model with autocorrelation be
 possible?
In-Reply-To: <CAOezDu07qxXh-zu0XoKH=kJM6y3ctrk=___YqDR5kTtO6SoStQ@mail.gmail.com>
References: <CAOezDu07qxXh-zu0XoKH=kJM6y3ctrk=___YqDR5kTtO6SoStQ@mail.gmail.com>
Message-ID: <CAGxFJbQMXxipdz9c7Fgm_Ozt0QvUM3X3NDm8_Zg=1Vr_4oqT4A@mail.gmail.com>

Your English is excellent, but your statistics is bad.

This list is for questions about R programming, not statistics, although
sometimes the two topics do intersect. If you wish to seek online help of
this sort, the  special R Help list r-sig-mixed-models may be where you
should post, as it appears that mixed effects models might be useful for
you. Another specific statistical help site is stats.stackexchange.com .

However, I think you would do much better to consult with a local
statistical expert, as your statistical background seems minimal. But
that's just my opinion.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Mar 4, 2020 at 10:30 AM Candela Madaschi <candelamadaschi at gmail.com>
wrote:

> Hi everyone!
> I'm a little bit lost as to which statistical model I should use.
>
> I'm evaluating the decomposition of two plant species (factor: "species")
> under two treatments: "temperature" (with 2 levels) and "water level" (3
> levels). These two treatments are completely crossed. I have 5 replicates
> per plant species for each time period (6 dates).
> So I have 6 dates x 2 species x 2 temperatures x 3 water levels x 5
> replicates: 360 obs. (180 obs. per species).
>
> The comparison between plant species isn't relevant in my study, rather I
> want to test the significance of the treatments within the plant species.
> So I think that a nested model could fit my data. Could this be possible?
>
> On the other hand, I've been reading that there could be temporal
> correlation problems in my data, and that this can be addressed with nlme
> package. But as I understand you can't fit a nested fixed effects model
> using lme. My design doesn't have random effects, they are all fixed
> factors, and, from what I understand, time can't be used as a random effect
> because it is not a categorical variable. Furthermore, "species" can't be a
> random factor because it only has two levels. In summary, I'm completely
> lost.
>
> My questions are:
> Can I use a nested model for the structure of my data?
> Is there such a thing as a nested fixed effects model with autocorrelation
> approach?
> Can I use lme or lme4 if that model exists?
> Could I transform time variable to a categorical factor and use it as a
> random factor nested in species?
> Is there a simple way to analyse this data set?
>
> Thank you!!
>
> (I'm very sorry for my english, it is not my native language)
> --
> Candela Madaschi
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Wed Mar  4 20:29:08 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 4 Mar 2020 11:29:08 -0800
Subject: [R] Statistical Analysis of an Exchange Rate
In-Reply-To: <CADN7qjVmRRH6wErOAsm+yBYQohBZCDkvbXpGA4n3_ZzT1QR+sg@mail.gmail.com>
References: <CADN7qjVmRRH6wErOAsm+yBYQohBZCDkvbXpGA4n3_ZzT1QR+sg@mail.gmail.com>
Message-ID: <CAGxFJbRxCmmRF1oif5bNe-WSHBcmg9n46q1dqKKZEwppNTEizA@mail.gmail.com>

Your question is way off topic here -- this list is for R programming
questions, not statistical consulting. You might wish to try
stats.stackexchange.com for the latter.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Mar 4, 2020 at 10:58 AM spencer davis <causticfx88 at gmail.com> wrote:

> So I've been researching statistical analysis for a considerable amount of
> time and still haven't really found what I've been looking for and am
> hoping that by getting help answering this question it will send me down
> the right path to answering all of my questions. So I am hoping that
> someone will be able to tell me how and what package I would need to do
> what I'm about to describe. I want to take historical price data from 1
> minute currency pair charts and find the probabilities of price moves after
> a pullback immediately following an impulsive move. So I would have to set
> the definition of an impulsive move as price moving a certain percentage in
> a certain amount of time, I'd have to define a threshold as to what would
> be considered a pullback and what wouldn't and then I'd like to gain the
> information as to what the probability is of different percentage of moves
> at different pullbacks, the different probabilities with different length
> impulsive moves. Can anyone get me set on the right path here, I'm swimming
> in information and am just so lost. Any help will be so much appreciated.
> Thanks!
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Wed Mar  4 22:00:47 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Thu, 5 Mar 2020 08:00:47 +1100
Subject: [R] 
 Help! Can a nested fixed effects model with autocorrelation be
 possible?
In-Reply-To: <CAOezDu07qxXh-zu0XoKH=kJM6y3ctrk=___YqDR5kTtO6SoStQ@mail.gmail.com>
References: <CAOezDu07qxXh-zu0XoKH=kJM6y3ctrk=___YqDR5kTtO6SoStQ@mail.gmail.com>
Message-ID: <CA+8X3fX7=AerF4zFEe5mjLj7YJ3+mWo-tgCL+ULwfsn6oQiqaw@mail.gmail.com>

Hi Candela,
Try posting your question to the R-SIG-mixed-models list. You will
probably get an expert answer there.

Jiim

On Thu, Mar 5, 2020 at 5:30 AM Candela Madaschi
<candelamadaschi at gmail.com> wrote:
>
> Hi everyone!
> I'm a little bit lost as to which statistical model I should use.
>
> I'm evaluating the decomposition of two plant species (factor: "species")
> under two treatments: "temperature" (with 2 levels) and "water level" (3
> levels). These two treatments are completely crossed. I have 5 replicates
> per plant species for each time period (6 dates).
> So I have 6 dates x 2 species x 2 temperatures x 3 water levels x 5
> replicates: 360 obs. (180 obs. per species).
>
> The comparison between plant species isn't relevant in my study, rather I
> want to test the significance of the treatments within the plant species.
> So I think that a nested model could fit my data. Could this be possible?
>
> On the other hand, I've been reading that there could be temporal
> correlation problems in my data, and that this can be addressed with nlme
> package. But as I understand you can't fit a nested fixed effects model
> using lme. My design doesn't have random effects, they are all fixed
> factors, and, from what I understand, time can't be used as a random effect
> because it is not a categorical variable. Furthermore, "species" can't be a
> random factor because it only has two levels. In summary, I'm completely
> lost.
>
> My questions are:
> Can I use a nested model for the structure of my data?
> Is there such a thing as a nested fixed effects model with autocorrelation
> approach?
> Can I use lme or lme4 if that model exists?
> Could I transform time variable to a categorical factor and use it as a
> random factor nested in species?
> Is there a simple way to analyse this data set?
>
> Thank you!!
>
> (I'm very sorry for my english, it is not my native language)
> --
> Candela Madaschi
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From t@n@@@ @end|ng |rom gm@||@com  Thu Mar  5 06:50:34 2020
From: t@n@@@ @end|ng |rom gm@||@com (Bogdan Tanasa)
Date: Wed, 4 Mar 2020 21:50:34 -0800
Subject: [R] a package with randomization/permutation tests for genomic
 analyses
Message-ID: <CA+JEM026=NVa9ggowAb-0nE7u4s05q6ofxbZYJuv8pmm2s701w@mail.gmail.com>

Dear all,

please would you let me know, is there a package in R that has
implemented randomization/permutation
tests for joint genomic analyses

(an example of joint genomic analyses -- when jointly considering both GENE
EXPRESSION and PROTEIN BINDING along the DNA).

The context of my question is the following :

let's consider 1000 UP_REGULATED genes with increased PROTEIN X and with a
HISTONE MARK Y :

in order to show that PROTEIN X is related to HISTONE MARK Y for 1000
UP-regulated genes, what "controls" would you use for the comparison :

-- 1000 RANDOM GENES (and multiple randomization tests)

-- 1000 UP-REG GENES with NO PROTEIN X, NO HISTONE MARK Y

-- 1000 UP-REG GENES with PROTEIN X, and NO HISTONE MARK Y

-- 1000 UP-REG GENES with NO PROTEIN X, and with HISTONE MARK Y

-- 1000 NOT-UP-REG GENES with NO PROTEIN X, NO HISTONE MARK Y

-- 1000 NOT-UP-REG GENES with PROTEIN X, and NO HISTONE MARK Y

-- 1000 NOT-UP-REG GENES with NO PROTEIN X, and with HISTONE MARK Y

-- anything else ?

thanks a lot,

bogdan

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Thu Mar  5 08:40:28 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 4 Mar 2020 23:40:28 -0800
Subject: [R] a package with randomization/permutation tests for genomic
 analyses
In-Reply-To: <CA+JEM026=NVa9ggowAb-0nE7u4s05q6ofxbZYJuv8pmm2s701w@mail.gmail.com>
References: <CA+JEM026=NVa9ggowAb-0nE7u4s05q6ofxbZYJuv8pmm2s701w@mail.gmail.com>
Message-ID: <CAGxFJbQp9D_o-yW1g5oKd3fYstNWt8jYJcD58vb9sF6kw66_Lw@mail.gmail.com>

I believe that a much better place to ask this is on the Bioconductor
Support Site:

https://support.bioconductor.org/

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Mar 4, 2020 at 9:51 PM Bogdan Tanasa <tanasa at gmail.com> wrote:

> Dear all,
>
> please would you let me know, is there a package in R that has
> implemented randomization/permutation
> tests for joint genomic analyses
>
> (an example of joint genomic analyses -- when jointly considering both GENE
> EXPRESSION and PROTEIN BINDING along the DNA).
>
> The context of my question is the following :
>
> let's consider 1000 UP_REGULATED genes with increased PROTEIN X and with a
> HISTONE MARK Y :
>
> in order to show that PROTEIN X is related to HISTONE MARK Y for 1000
> UP-regulated genes, what "controls" would you use for the comparison :
>
> -- 1000 RANDOM GENES (and multiple randomization tests)
>
> -- 1000 UP-REG GENES with NO PROTEIN X, NO HISTONE MARK Y
>
> -- 1000 UP-REG GENES with PROTEIN X, and NO HISTONE MARK Y
>
> -- 1000 UP-REG GENES with NO PROTEIN X, and with HISTONE MARK Y
>
> -- 1000 NOT-UP-REG GENES with NO PROTEIN X, NO HISTONE MARK Y
>
> -- 1000 NOT-UP-REG GENES with PROTEIN X, and NO HISTONE MARK Y
>
> -- 1000 NOT-UP-REG GENES with NO PROTEIN X, and with HISTONE MARK Y
>
> -- anything else ?
>
> thanks a lot,
>
> bogdan
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ev1017 @end|ng |rom out|ook@com  Wed Mar  4 11:48:47 2020
From: ev1017 @end|ng |rom out|ook@com (Huang Ivy)
Date: Wed, 4 Mar 2020 10:48:47 +0000
Subject: [R] about ARMA(p,q) SCAN method: SAS vs. R
Message-ID: <PS2PR02MB2662E1A4F6FF133C67550ABFC8E50@PS2PR02MB2662.apcprd02.prod.outlook.com>

Hello Steve,
I?m an undergraduate from SWUFE. I?ve read your webpage about performing SCAN method for identification of ARMA(p,q) orders with R code today. But I can?t open your URLs inserted to download the R code.
So have you solved your problems now? And may I have a look at your R code please?
I?ve been learning ARMA models these days and I?m confused with the difference and relationship between EACF and CSAN in order-selection. If I just use BIC loops in my code, the output  seems not vivid enough.
Looking forward to your reply.

Yiwei Huang

	[[alternative HTML version deleted]]


From @@@oomro97 @end|ng |rom gm@||@com  Wed Mar  4 16:21:32 2020
From: @@@oomro97 @end|ng |rom gm@||@com (Sanna Soomro)
Date: Wed, 4 Mar 2020 15:21:32 +0000
Subject: [R] rgamma function produces NaN values
Message-ID: <CAMJa_icUaSRD+xH+Jh8vrYh_M5t=tP97Y-vr47hWt0bo4LZ7wQ@mail.gmail.com>

Hi,

In my code, I want to sample from the posterior distribution to get
estimates for each parameter via the Bayesian approach. My model has
spatial coefficient and lasso penalty.

When I run this line

gibbs_lasso(y = Y, x= X, W=W.rook, tau = 0.5, M=2)

It works, however, when I changed M from 2 to 5, I get the following error:

Error in rgig(1, 0.5, (SIGMA[m, ]/theta2) * ((y[ik] - crossprod(x[ik,  :
  invalid parameters for GIG distribution: lambda=0.5, chi=nan, psi=nan
In addition: Warning message:
In rgamma(1, shape = 1.5 * n + a0, rate = SIGMAgamma + b0) : NAs produced

It makes sense that rgig cannot accept NaN values of sigma parameter in its
computation. But why does rgamma produces NaN value for sigma? The gamma
distribution require both shape and scale parameters to be positive and my
R computations for both should always be positive then sigma can be sampled
easily. So, what went wrong in my code?

Best regards
Sanna

From ruben @end|ng |rom k|upm@edu@@@  Thu Mar  5 10:10:43 2020
From: ruben @end|ng |rom k|upm@edu@@@ (Ruben)
Date: Thu, 5 Mar 2020 12:10:43 +0300
Subject: [R] R CMD check report error not finding function
Message-ID: <c604e684-83c9-a233-00c1-7948d4b72d1c@kfupm.edu.sa>

Dear R-help listers,

I am creating a package for a friend using his scripts and I run into a
problem when doing the check.

Inside a macro created with gtools::defmacro(par1, expr= ... there is a
call to stats::optim and the function for the optimization is called
.foo(), which is listed as one of the functions to be included in the
package, not to be documented, using package.skeleton. R CMD check
reports that it cannot find .foo(). This runs OK as a script but not as
a package. I believe it has to do with namespaces. The NAMESPACE file is
just this:

exportPattern("^[[:alpha:]]+")
importFrom("stats", "optim")
import(gtools)
importFrom("gtools", "defmacro")

Any help would be greatly appreciated

Ruben

--
Ruben H. Roa-Ureta, Ph. D.
Consultant, ORCID ID 0000-0002-9620-5224
Center for Environment and Water, Research Institute,
King Fahd University of Petroleum and Minerals,
KFUPM Box 1927, Dhahran 31261, Saudi Arabia
Office Phone : 966-3-860-7850
Cellular Phone : 966-540026401

?? ????????? ??????? ?? ??? ?????? ?????????? ???????? (?? ????)? ?? ???? ???? ?? ????? ???? ?? ??? ??????? ???? ???????? ?????? ??? ????? ????????? ?? ????? ?????? ?????? ???? ?????? ???? ????. ??? ?? ???? ??? ?? ??? ???? ?? ???????? ? ?? ??????? ?? ????????? ??? ??? ?? ????????? ??? ??? ???. ?? ????? ????? ??? ??????? ???????? ?? ????? ??????? ????????? ???? ??? ??????? ??? ??? ??????? ??? ???????. ??? ???????? ?? ?????? ?????? ???? ?? ??? ??????? ?? ?????? ??? ???????? ??? ???? ???????? ??? ??????? ???????. ??? ?? ????? ??????? ??????? ?? ????? ???? ?? ??? ??????? ???? ?? ????? ?? ?????.

DISCLAIMER: The information in this email and its attach...{{dropped:11}}


From er|cjberger @end|ng |rom gm@||@com  Thu Mar  5 10:37:20 2020
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Thu, 5 Mar 2020 11:37:20 +0200
Subject: [R] Statistical Analysis of an Exchange Rate
In-Reply-To: <CAGxFJbRxCmmRF1oif5bNe-WSHBcmg9n46q1dqKKZEwppNTEizA@mail.gmail.com>
References: <CADN7qjVmRRH6wErOAsm+yBYQohBZCDkvbXpGA4n3_ZzT1QR+sg@mail.gmail.com>
 <CAGxFJbRxCmmRF1oif5bNe-WSHBcmg9n46q1dqKKZEwppNTEizA@mail.gmail.com>
Message-ID: <CAGgJW74dzhTHz0qO4MF+Z0UME4M1Psk77SBVnGL1YvS8AJ4Zkw@mail.gmail.com>

Alternatively you might try posting to
r-sig-finance at r-project.org



On Wed, Mar 4, 2020 at 9:38 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> Your question is way off topic here -- this list is for R programming
> questions, not statistical consulting. You might wish to try
> stats.stackexchange.com for the latter.
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Wed, Mar 4, 2020 at 10:58 AM spencer davis <causticfx88 at gmail.com>
> wrote:
>
> > So I've been researching statistical analysis for a considerable amount
> of
> > time and still haven't really found what I've been looking for and am
> > hoping that by getting help answering this question it will send me down
> > the right path to answering all of my questions. So I am hoping that
> > someone will be able to tell me how and what package I would need to do
> > what I'm about to describe. I want to take historical price data from 1
> > minute currency pair charts and find the probabilities of price moves
> after
> > a pullback immediately following an impulsive move. So I would have to
> set
> > the definition of an impulsive move as price moving a certain percentage
> in
> > a certain amount of time, I'd have to define a threshold as to what would
> > be considered a pullback and what wouldn't and then I'd like to gain the
> > information as to what the probability is of different percentage of
> moves
> > at different pullbacks, the different probabilities with different length
> > impulsive moves. Can anyone get me set on the right path here, I'm
> swimming
> > in information and am just so lost. Any help will be so much appreciated.
> > Thanks!
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From petr@p|k@| @end|ng |rom prechez@@cz  Thu Mar  5 11:30:10 2020
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Thu, 5 Mar 2020 10:30:10 +0000
Subject: [R] rgamma function produces NaN values
In-Reply-To: <CAMJa_icUaSRD+xH+Jh8vrYh_M5t=tP97Y-vr47hWt0bo4LZ7wQ@mail.gmail.com>
References: <CAMJa_icUaSRD+xH+Jh8vrYh_M5t=tP97Y-vr47hWt0bo4LZ7wQ@mail.gmail.com>
Message-ID: <2c971c8968e94455a1c063277df30819@SRVEXCHCM1302.precheza.cz>

Hi

what is gibbs_lasso? I did not find any function of this name.

Usually reproducible example greatly enhance your chances to get reasonable
answer.

If any n, a0, SIGMAgamma, b0 is NA rgamma gives you NA.

Cheers
Petr
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Sanna Soomro
> Sent: Wednesday, March 4, 2020 4:22 PM
> To: r-help at r-project.org
> Subject: [R] rgamma function produces NaN values
> 
> Hi,
> 
> In my code, I want to sample from the posterior distribution to get
estimates for
> each parameter via the Bayesian approach. My model has spatial coefficient
and
> lasso penalty.
> 
> When I run this line
> 
> gibbs_lasso(y = Y, x= X, W=W.rook, tau = 0.5, M=2)
> 
> It works, however, when I changed M from 2 to 5, I get the following
error:
> 
> Error in rgig(1, 0.5, (SIGMA[m, ]/theta2) * ((y[ik] - crossprod(x[ik,  :
>   invalid parameters for GIG distribution: lambda=0.5, chi=nan, psi=nan In
> addition: Warning message:
> In rgamma(1, shape = 1.5 * n + a0, rate = SIGMAgamma + b0) : NAs produced
> 
> It makes sense that rgig cannot accept NaN values of sigma parameter in
its
> computation. But why does rgamma produces NaN value for sigma? The gamma
> distribution require both shape and scale parameters to be positive and my
R
> computations for both should always be positive then sigma can be sampled
> easily. So, what went wrong in my code?
> 
> Best regards
> Sanna
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

From petr@p|k@| @end|ng |rom prechez@@cz  Thu Mar  5 11:33:24 2020
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Thu, 5 Mar 2020 10:33:24 +0000
Subject: [R] about ARMA(p,q) SCAN method: SAS vs. R
In-Reply-To: <PS2PR02MB2662E1A4F6FF133C67550ABFC8E50@PS2PR02MB2662.apcprd02.prod.outlook.com>
References: <PS2PR02MB2662E1A4F6FF133C67550ABFC8E50@PS2PR02MB2662.apcprd02.prod.outlook.com>
Message-ID: <0a62dc7ca30a4145b4740f41e2e2e0b8@SRVEXCHCM1302.precheza.cz>

Hi

maybe you will got another answer from Steve.

PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

and please do not use HTML formating, it could make your message scrambled.

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Huang Ivy
> Sent: Wednesday, March 4, 2020 11:49 AM
> To: r-help at r-project.org
> Subject: [R] about ARMA(p,q) SCAN method: SAS vs. R
> 
> Hello Steve,
> I?m an undergraduate from SWUFE. I?ve read your webpage about
> performing SCAN method for identification of ARMA(p,q) orders with R code
> today. But I can?t open your URLs inserted to download the R code.
> So have you solved your problems now? And may I have a look at your R code
> please?
> I?ve been learning ARMA models these days and I?m confused with the
> difference and relationship between EACF and CSAN in order-selection. If I just
> use BIC loops in my code, the output  seems not vivid enough.
> Looking forward to your reply.
> 
> Yiwei Huang
> 
> 	[[alternative HTML version deleted]]


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Thu Mar  5 12:32:47 2020
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Thu, 5 Mar 2020 11:32:47 +0000
Subject: [R] R CMD check report error not finding function
In-Reply-To: <c604e684-83c9-a233-00c1-7948d4b72d1c@kfupm.edu.sa>
References: <c604e684-83c9-a233-00c1-7948d4b72d1c@kfupm.edu.sa>
Message-ID: <f5f21f11-fcdd-6935-9872-da2b913ae555@dewey.myzen.co.uk>

Dear Ruben

I do not think your export pattern matches .foo so that may be the problem.

Michael

On 05/03/2020 09:10, Ruben wrote:
> Dear R-help listers,
> 
> I am creating a package for a friend using his scripts and I run into a
> problem when doing the check.
> 
> Inside a macro created with gtools::defmacro(par1, expr= ... there is a
> call to stats::optim and the function for the optimization is called
> .foo(), which is listed as one of the functions to be included in the
> package, not to be documented, using package.skeleton. R CMD check
> reports that it cannot find .foo(). This runs OK as a script but not as
> a package. I believe it has to do with namespaces. The NAMESPACE file is
> just this:
> 
> exportPattern("^[[:alpha:]]+")
> importFrom("stats", "optim")
> import(gtools)
> importFrom("gtools", "defmacro")
> 
> Any help would be greatly appreciated
> 
> Ruben
> 
> -- 
> Ruben H. Roa-Ureta, Ph. D.
> Consultant, ORCID ID 0000-0002-9620-5224
> Center for Environment and Water, Research Institute,
> King Fahd University of Petroleum and Minerals,
> KFUPM Box 1927, Dhahran 31261, Saudi Arabia
> Office Phone : 966-3-860-7850
> Cellular Phone : 966-540026401
> 
> ?? ????????? ??????? ?? ??? ?????? ?????????? ???????? (?? ????)? ?? 
> ???? ???? ?? ????? ???? ?? ??? ??????? ???? ???????? ?????? ??? ????? 
> ????????? ?? ????? ?????? ?????? ???? ?????? ???? ????. ??? ?? ???? ??? 
> ?? ??? ???? ?? ???????? ? ?? ??????? ?? ????????? ??? ??? ?? ????????? 
> ??? ??? ???. ?? ????? ????? ??? ??????? ???????? ?? ????? ??????? 
> ????????? ???? ??? ??????? ??? ??? ??????? ??? ???????. ??? ???????? ?? 
> ?????? ?????? ???? ?? ??? ??????? ?? ?????? ??? ???????? ??? ???? 
> ???????? ??? ??????? ???????. ??? ?? ????? ??????? ??????? ?? ????? ???? 
> ?? ??? ??????? ???? ?? ????? ?? ?????.
> 
> DISCLAIMER: The information in this email and its attach...{{dropped:11}}
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From m@rk|eed@2 @end|ng |rom gm@||@com  Thu Mar  5 14:55:19 2020
From: m@rk|eed@2 @end|ng |rom gm@||@com (Mark Leeds)
Date: Thu, 5 Mar 2020 08:55:19 -0500
Subject: [R] Statistical Analysis of an Exchange Rate
In-Reply-To: <CAGgJW74dzhTHz0qO4MF+Z0UME4M1Psk77SBVnGL1YvS8AJ4Zkw@mail.gmail.com>
References: <CADN7qjVmRRH6wErOAsm+yBYQohBZCDkvbXpGA4n3_ZzT1QR+sg@mail.gmail.com>
 <CAGxFJbRxCmmRF1oif5bNe-WSHBcmg9n46q1dqKKZEwppNTEizA@mail.gmail.com>
 <CAGgJW74dzhTHz0qO4MF+Z0UME4M1Psk77SBVnGL1YvS8AJ4Zkw@mail.gmail.com>
Message-ID: <CAHz+bWarnU4EH2umMn-4=5u_LKsAE4Nv4T1VbkcYK1nQZJ9XhA@mail.gmail.com>

or possibly even more appropriate is quant.stackexchange.com.


On Thu, Mar 5, 2020 at 4:38 AM Eric Berger <ericjberger at gmail.com> wrote:

> Alternatively you might try posting to
> r-sig-finance at r-project.org
>
>
>
> On Wed, Mar 4, 2020 at 9:38 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>
> > Your question is way off topic here -- this list is for R programming
> > questions, not statistical consulting. You might wish to try
> > stats.stackexchange.com for the latter.
> >
> > Bert Gunter
> >
> > "The trouble with having an open mind is that people keep coming along
> and
> > sticking things into it."
> > -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> >
> >
> > On Wed, Mar 4, 2020 at 10:58 AM spencer davis <causticfx88 at gmail.com>
> > wrote:
> >
> > > So I've been researching statistical analysis for a considerable amount
> > of
> > > time and still haven't really found what I've been looking for and am
> > > hoping that by getting help answering this question it will send me
> down
> > > the right path to answering all of my questions. So I am hoping that
> > > someone will be able to tell me how and what package I would need to do
> > > what I'm about to describe. I want to take historical price data from 1
> > > minute currency pair charts and find the probabilities of price moves
> > after
> > > a pullback immediately following an impulsive move. So I would have to
> > set
> > > the definition of an impulsive move as price moving a certain
> percentage
> > in
> > > a certain amount of time, I'd have to define a threshold as to what
> would
> > > be considered a pullback and what wouldn't and then I'd like to gain
> the
> > > information as to what the probability is of different percentage of
> > moves
> > > at different pullbacks, the different probabilities with different
> length
> > > impulsive moves. Can anyone get me set on the right path here, I'm
> > swimming
> > > in information and am just so lost. Any help will be so much
> appreciated.
> > > Thanks!
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> > >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Thu Mar  5 16:38:19 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 5 Mar 2020 07:38:19 -0800
Subject: [R] R CMD check report error not finding function
In-Reply-To: <c604e684-83c9-a233-00c1-7948d4b72d1c@kfupm.edu.sa>
References: <c604e684-83c9-a233-00c1-7948d4b72d1c@kfupm.edu.sa>
Message-ID: <CAGxFJbQA8fn5dsTHKmX+NN379ZO-DYQcZF_Cu6F6BNd9D8Uvag@mail.gmail.com>

... but this is the wrong  list for such questions.
Post on r-package-devel if you need further help.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Thu, Mar 5, 2020 at 1:15 AM Ruben <ruben at kfupm.edu.sa> wrote:

> Dear R-help listers,
>
> I am creating a package for a friend using his scripts and I run into a
> problem when doing the check.
>
> Inside a macro created with gtools::defmacro(par1, expr= ... there is a
> call to stats::optim and the function for the optimization is called
> .foo(), which is listed as one of the functions to be included in the
> package, not to be documented, using package.skeleton. R CMD check
> reports that it cannot find .foo(). This runs OK as a script but not as
> a package. I believe it has to do with namespaces. The NAMESPACE file is
> just this:
>
> exportPattern("^[[:alpha:]]+")
> importFrom("stats", "optim")
> import(gtools)
> importFrom("gtools", "defmacro")
>
> Any help would be greatly appreciated
>
> Ruben
>
> --
> Ruben H. Roa-Ureta, Ph. D.
> Consultant, ORCID ID 0000-0002-9620-5224
> Center for Environment and Water, Research Institute,
> King Fahd University of Petroleum and Minerals,
> KFUPM Box 1927, Dhahran 31261, Saudi Arabia
> Office Phone : 966-3-860-7850
> Cellular Phone : 966-540026401
>
> ?? ????????? ??????? ?? ??? ?????? ?????????? ???????? (?? ????)? ?? ????
> ???? ?? ????? ???? ?? ??? ??????? ???? ???????? ?????? ??? ????? ?????????
> ?? ????? ?????? ?????? ???? ?????? ???? ????. ??? ?? ???? ??? ?? ??? ????
> ?? ???????? ? ?? ??????? ?? ????????? ??? ??? ?? ????????? ??? ??? ???. ??
> ????? ????? ??? ??????? ???????? ?? ????? ??????? ????????? ???? ???
> ??????? ??? ??? ??????? ??? ???????. ??? ???????? ?? ?????? ?????? ???? ??
> ??? ??????? ?? ?????? ??? ???????? ??? ???? ???????? ??? ??????? ???????.
> ??? ?? ????? ??????? ??????? ?? ????? ???? ?? ??? ??????? ???? ?? ????? ??
> ?????.
>
> DISCLAIMER: The information in this email and its attach...{{dropped:11}}
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Thu Mar  5 21:06:40 2020
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Thu, 5 Mar 2020 21:06:40 +0100
Subject: [R] caption needed for boxplot
Message-ID: <CA+nrPnsa1Dj8jcJT8nmYhzNV8Z7HcsAt67jLZJtwn-Gzhsut4g@mail.gmail.com>

Hi
I have a boxplot using the following code and I get the boxplots, but at
the x axis, instead of 1,2,3, how can I get my own captions like , random,
grid, genetic, pso etc.

a=ran_CV$results$MAE
aa=grid_CV$results$MAE
b=ran_boot$results$MAE
bb=grid_boot$results$MAE
c=ran_locv$results$MAE
cc=grid_locv$results$MAE
e=ran_5CV$results$MAE
dd=grid_5CV$results$MAE

boxplot(a,aa,b,bb,c,cc,e,dd, col="Green")

	[[alternative HTML version deleted]]


From @kobe@ @end|ng |rom @umm|te@rth@com  Thu Mar  5 20:19:22 2020
From: @kobe@ @end|ng |rom @umm|te@rth@com (Amber Kobes)
Date: Thu, 5 Mar 2020 19:19:22 +0000
Subject: [R] Shape / Colour Configuration
Message-ID: <QB1PR01MB23221B657E8343E3FE0D141CD5E20@QB1PR01MB2322.CANPRD01.PROD.OUTLOOK.COM>

A non-text attachment was scrubbed...
Name: PCA Groups.pdf
Type: application/pdf
Size: 8716 bytes
Desc: PCA Groups.pdf
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200305/a91d68a6/attachment.pdf>

From @@r@h@go@|ee @end|ng |rom gm@||@com  Thu Mar  5 21:56:14 2020
From: @@r@h@go@|ee @end|ng |rom gm@||@com (Sarah Goslee)
Date: Thu, 5 Mar 2020 15:56:14 -0500
Subject: [R] Shape / Colour Configuration
In-Reply-To: <QB1PR01MB23221B657E8343E3FE0D141CD5E20@QB1PR01MB2322.CANPRD01.PROD.OUTLOOK.COM>
References: <QB1PR01MB23221B657E8343E3FE0D141CD5E20@QB1PR01MB2322.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <CAM_vjuk4qLBLiz_8oaOXySwYfX4Eh92+SF8=L78fFTQbQreyfQ@mail.gmail.com>

Without an actual question, it's hard to know what you want.

But take a look at hullplot in the dbscan package.

Sarah

On Thu, Mar 5, 2020 at 3:54 PM Amber Kobes <akobes at summitearth.com> wrote:
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Sarah Goslee (she/her)
http://www.numberwright.com


From drj|m|emon @end|ng |rom gm@||@com  Thu Mar  5 22:07:00 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Fri, 6 Mar 2020 08:07:00 +1100
Subject: [R] caption needed for boxplot
In-Reply-To: <CA+nrPnsa1Dj8jcJT8nmYhzNV8Z7HcsAt67jLZJtwn-Gzhsut4g@mail.gmail.com>
References: <CA+nrPnsa1Dj8jcJT8nmYhzNV8Z7HcsAt67jLZJtwn-Gzhsut4g@mail.gmail.com>
Message-ID: <CA+8X3fWa79CTPpkeBUZs76pGs3BVDd0hL_p+XPiFLBPHn2wVDw@mail.gmail.com>

Hi Neha,
Have a look at the "names" argument to boxplot. Something like this:

boxplot(a,aa,b,bb,c,cc,e,dd, col="Green",
 names=c("ab","cd","ef","gh","lm","pq","xy","yz") )

Jim

On Fri, Mar 6, 2020 at 7:07 AM Neha gupta <neha.bologna90 at gmail.com> wrote:
>
> Hi
> I have a boxplot using the following code and I get the boxplots, but at
> the x axis, instead of 1,2,3, how can I get my own captions like , random,
> grid, genetic, pso etc.
>
> a=ran_CV$results$MAE
> aa=grid_CV$results$MAE
> b=ran_boot$results$MAE
> bb=grid_boot$results$MAE
> c=ran_locv$results$MAE
> cc=grid_locv$results$MAE
> e=ran_5CV$results$MAE
> dd=grid_5CV$results$MAE
>
> boxplot(a,aa,b,bb,c,cc,e,dd, col="Green")
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Thu Mar  5 22:20:22 2020
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Thu, 5 Mar 2020 22:20:22 +0100
Subject: [R] caption needed for boxplot
In-Reply-To: <CA+8X3fWa79CTPpkeBUZs76pGs3BVDd0hL_p+XPiFLBPHn2wVDw@mail.gmail.com>
References: <CA+nrPnsa1Dj8jcJT8nmYhzNV8Z7HcsAt67jLZJtwn-Gzhsut4g@mail.gmail.com>
 <CA+8X3fWa79CTPpkeBUZs76pGs3BVDd0hL_p+XPiFLBPHn2wVDw@mail.gmail.com>
Message-ID: <CA+nrPnufx+U9GD0OXZ=4wDDFLexSKFOVBQJwL-XKO-+q6mN=Gg@mail.gmail.com>

Hi Jim, thanks for your feedback

It works fine now.

Best regards

On Thu, Mar 5, 2020 at 10:07 PM Jim Lemon <drjimlemon at gmail.com> wrote:

> Hi Neha,
> Have a look at the "names" argument to boxplot. Something like this:
>
> boxplot(a,aa,b,bb,c,cc,e,dd, col="Green",
>  names=c("ab","cd","ef","gh","lm","pq","xy","yz") )
>
> Jim
>
> On Fri, Mar 6, 2020 at 7:07 AM Neha gupta <neha.bologna90 at gmail.com>
> wrote:
> >
> > Hi
> > I have a boxplot using the following code and I get the boxplots, but at
> > the x axis, instead of 1,2,3, how can I get my own captions like ,
> random,
> > grid, genetic, pso etc.
> >
> > a=ran_CV$results$MAE
> > aa=grid_CV$results$MAE
> > b=ran_boot$results$MAE
> > bb=grid_boot$results$MAE
> > c=ran_locv$results$MAE
> > cc=grid_locv$results$MAE
> > e=ran_5CV$results$MAE
> > dd=grid_5CV$results$MAE
> >
> > boxplot(a,aa,b,bb,c,cc,e,dd, col="Green")
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ycd|ng @end|ng |rom coh@org  Thu Mar  5 23:04:33 2020
From: ycd|ng @end|ng |rom coh@org (Yuan Chun Ding)
Date: Thu, 5 Mar 2020 22:04:33 +0000
Subject: [R] how to archive old shiny applications
Message-ID: <A86C6438FB909A409DDEF926277952B6113C70CC@PPWEXCH2KX14.coh.org>

Hi R users,

We like to use shiny program to share data view between collaborators in different universities.

When running shiny, I got the following errors, so I just found that I am allowed to upload up to five applications.  I want to remove the first four old applications (not view those plots /tables any more). Does any one know how to archive or even remove old applications I uploaded before?  So I can upload new ones?

Thank you,

Ding
--------------------------------------------------------------------------------------------------------------
Preparing to deploy application...Error: HTTP 402
POST https://api.shinyapps.io/v1/applications/
You have reached the maximum number of applications allowed for your account.
Execution halted

----------------------------------------------------------------------
------------------------------------------------------------
-SECURITY/CONFIDENTIALITY WARNING-  

This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to receive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)
------------------------------------------------------------

	[[alternative HTML version deleted]]


From pd@|gd @end|ng |rom gm@||@com  Thu Mar  5 23:20:34 2020
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Thu, 5 Mar 2020 23:20:34 +0100
Subject: [R] how to archive old shiny applications
In-Reply-To: <A86C6438FB909A409DDEF926277952B6113C70CC@PPWEXCH2KX14.coh.org>
References: <A86C6438FB909A409DDEF926277952B6113C70CC@PPWEXCH2KX14.coh.org>
Message-ID: <C26EF238-9F78-4E4C-87AE-0B5600569637@gmail.com>

That'll be between you and the people who run shinyapps.io. 

It's not a question for r-help, more likely

https://community.rstudio.com/tags/shinyappsio

-pd

> On 5 Mar 2020, at 23:04 , Yuan Chun Ding <ycding at coh.org> wrote:
> 
> Hi R users,
> 
> We like to use shiny program to share data view between collaborators in different universities.
> 
> When running shiny, I got the following errors, so I just found that I am allowed to upload up to five applications.  I want to remove the first four old applications (not view those plots /tables any more). Does any one know how to archive or even remove old applications I uploaded before?  So I can upload new ones?
> 
> Thank you,
> 
> Ding
> --------------------------------------------------------------------------------------------------------------
> Preparing to deploy application...Error: HTTP 402
> POST https://api.shinyapps.io/v1/applications/
> You have reached the maximum number of applications allowed for your account.
> Execution halted
> 
> ----------------------------------------------------------------------
> ------------------------------------------------------------
> -SECURITY/CONFIDENTIALITY WARNING-  
> 
> This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to rec
> eive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)
> ------------------------------------------------------------
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From ycd|ng @end|ng |rom coh@org  Thu Mar  5 23:46:46 2020
From: ycd|ng @end|ng |rom coh@org (Yuan Chun Ding)
Date: Thu, 5 Mar 2020 22:46:46 +0000
Subject: [R] how to archive old shiny applications
In-Reply-To: <C26EF238-9F78-4E4C-87AE-0B5600569637@gmail.com>
References: <A86C6438FB909A409DDEF926277952B6113C70CC@PPWEXCH2KX14.coh.org>
 <C26EF238-9F78-4E4C-87AE-0B5600569637@gmail.com>
Message-ID: <A86C6438FB909A409DDEF926277952B6113C71A2@PPWEXCH2KX14.coh.org>

Thank you for pointing me there.

Ding

-----Original Message-----
From: peter dalgaard [mailto:pdalgd at gmail.com] 
Sent: Thursday, March 05, 2020 2:21 PM
To: Yuan Chun Ding
Cc: r-help at r-project.org
Subject: Re: [R] how to archive old shiny applications

That'll be between you and the people who run shinyapps.io. 

It's not a question for r-help, more likely

https://urldefense.com/v3/__https://community.rstudio.com/tags/shinyappsio__;!!Fou38LsQmgU!5w1tB2N6X1dyoEVpLNRp30nlC-IoIB2N7yoLmSZjCuDCfnhJdYANGw1U7Du5$ 

-pd

> On 5 Mar 2020, at 23:04 , Yuan Chun Ding <ycding at coh.org> wrote:
> 
> Hi R users,
> 
> We like to use shiny program to share data view between collaborators in different universities.
> 
> When running shiny, I got the following errors, so I just found that I am allowed to upload up to five applications.  I want to remove the first four old applications (not view those plots /tables any more). Does any one know how to archive or even remove old applications I uploaded before?  So I can upload new ones?
> 
> Thank you,
> 
> Ding
> ----------------------------------------------------------------------
> ----------------------------------------
> Preparing to deploy application...Error: HTTP 402 POST 
> https://urldefense.com/v3/__https://api.shinyapps.io/v1/applications/_
> _;!!Fou38LsQmgU!5w1tB2N6X1dyoEVpLNRp30nlC-IoIB2N7yoLmSZjCuDCfnhJdYANGz
> 2hB90r$ You have reached the maximum number of applications allowed 
> for your account.
> Execution halted
> 
> ----------------------------------------------------------------------
> ------------------------------------------------------------
> -SECURITY/CONFIDENTIALITY WARNING-
> 
> This message and any attachments are intended solely for the 
> individual or entity to which they are addressed. This communication 
> may contain information that is privileged, confidential, or exempt 
> from disclosure under applicable law (e.g., personal health 
> information, research data, financial information). Because this 
> e-mail has been sent without encryption, individuals other than the 
> intended recipient may be able to view the information, forward it to 
> others or tamper with the information without the knowledge or consent 
> of the sender. If you are not the intended recipient, or the employee 
> or person responsible for delivering the message to the intended 
> recipient, any dissemination, distribution or copying of the 
> communication is strictly prohibited. If you received the 
> communication in error, please notify the sender immediately by 
> replying to this message and deleting the message and any accompanying 
> files from your system. If, due to the security risks, you do not wish 
> to rec eive further communications via e-mail, please reply to this 
> message and inform the sender that you do not wish to receive further 
> e-mail from the sender. (LCP301)
> ------------------------------------------------------------
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-he
> lp__;!!Fou38LsQmgU!5w1tB2N6X1dyoEVpLNRp30nlC-IoIB2N7yoLmSZjCuDCfnhJdYA
> NG8Q-4dSX$ PLEASE do read the posting guide 
> https://urldefense.com/v3/__http://www.R-project.org/posting-guide.htm
> l__;!!Fou38LsQmgU!5w1tB2N6X1dyoEVpLNRp30nlC-IoIB2N7yoLmSZjCuDCfnhJdYAN
> G6aGg_1Z$ and provide commented, minimal, self-contained, reproducible 
> code.

--
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From @kobe@ @end|ng |rom @umm|te@rth@com  Thu Mar  5 23:56:19 2020
From: @kobe@ @end|ng |rom @umm|te@rth@com (Amber Kobes)
Date: Thu, 5 Mar 2020 22:56:19 +0000
Subject: [R] Shape / Colour Configuration
In-Reply-To: <CAM_vjuk4qLBLiz_8oaOXySwYfX4Eh92+SF8=L78fFTQbQreyfQ@mail.gmail.com>
References: <QB1PR01MB23221B657E8343E3FE0D141CD5E20@QB1PR01MB2322.CANPRD01.PROD.OUTLOOK.COM>
 <CAM_vjuk4qLBLiz_8oaOXySwYfX4Eh92+SF8=L78fFTQbQreyfQ@mail.gmail.com>
Message-ID: <YQXPR01MB23285DD8CD14428E96550F4ED5E20@YQXPR01MB2328.CANPRD01.PROD.OUTLOOK.COM>

My question didn't transfer through.

I have a PCA plot and there are four groups all with Shape 4; however, the default colours are hard to distinguish. I am wanting to change the colour or shape of  select groupings to make it easier. My code is below. 

> ggplot(soilall2, aes(PC1, PC2, col = Radar.Plot.Group, fill = Radar.Plot.Group)) + stat_ellipse(geom = "polygon", col = "black", alpha = 0.5) + geom_point(shape = 4)




Amber Kobes, P.Geo., B.Sc.
Mobile: 780.214.0718
Direct: 780-874-6226

-----Original Message-----
From: Sarah Goslee <sarah.goslee at gmail.com> 
Sent: Thursday, March 5, 2020 1:56 PM
To: Amber Kobes <akobes at summitearth.com>
Cc: r-help at r-project.org
Subject: Re: [R] Shape / Colour Configuration

[EXTERNAL EMAIL] DO NOT CLICK links or attachments unless you recognize the sender and know the content is safe.

Without an actual question, it's hard to know what you want.

But take a look at hullplot in the dbscan package.

Sarah

On Thu, Mar 5, 2020 at 3:54 PM Amber Kobes <akobes at summitearth.com> wrote:
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



--
Sarah Goslee (she/her)
http://www.numberwright.com

From m@rco@g@br|e|||94 @end|ng |rom gm@||@com  Fri Mar  6 11:05:05 2020
From: m@rco@g@br|e|||94 @end|ng |rom gm@||@com (Marco Gabrielli)
Date: Fri, 6 Mar 2020 11:05:05 +0100
Subject: [R] Error with stepwise models selection using NADA library
Message-ID: <99c1d5e7-dbd2-f223-de24-f97cdbd12765@gmail.com>

Hi,
I'm working with environmental data which are left-censored and I found the
R package NADA which seems to do the job.
After fitting a complete model, using the cenreg function,I'd like to do a
stepwise procedure to minimize the AIC using the stepAIC function.
Unfortunately, after fitting the model, the stepAIC does not work with
either the cenreg object or the S3 survreg object within.

Here it is an example of the commands used:

library(NADA)
MLEtot=with(df, cenreg(Cen(Y,Cen)~x1+x2+x3+x4,dist="lognormal"))
stepAIC(MLEtot)
"Error: $ operator not defined for this S4 class"
stepAIC(MLEtot at survreg)
"Start:  AIC=6.16
asSurv(Cen(Y, Cen)) ~ x1 + x2 + x3 + x4
Error in (function (classes, fdef, mtable)  :
   unable to find an inherited method for function ?asSurv? for signature
?"Surv"?"

How can I do manage to make it work?
Thanks


From bgunter@4567 @end|ng |rom gm@||@com  Fri Mar  6 16:45:17 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 6 Mar 2020 07:45:17 -0800
Subject: [R] rgamma function produces NaN values
In-Reply-To: <AM5P18901MB0225CF2C7DE507EF8D613703FBE30@AM5P18901MB0225.EURP189.PROD.OUTLOOK.COM>
References: <CAMJa_icUaSRD+xH+Jh8vrYh_M5t=tP97Y-vr47hWt0bo4LZ7wQ@mail.gmail.com>
 <CAGxFJbRAjH9YOVvF-K_aHHCDmsx017H6fNoieNtS-K8vVcn_Rw@mail.gmail.com>
 <AM5P18901MB0225CF2C7DE507EF8D613703FBE30@AM5P18901MB0225.EURP189.PROD.OUTLOOK.COM>
Message-ID: <CAGxFJbRxKdSBe4VraU=-5re87SXNBjmOdNJXdaAcjFBpK-7CEA@mail.gmail.com>

Unless there is a good reason not to, always cc the list in your responses.
I am not your free private consultant.

Beause you use your own function, your result is not reproducible, so that
it is unlikely you can get useful help.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Mar 6, 2020 at 6:11 AM Sanna Soomro <s.soomro97 at gmail.com> wrote:

> Hi
>
>
>
> I apologize for the late response ? I?ve been busy.
>
> I have attached my R code in the email but I don?t know if it gone
> through.
>
> The gibb_lasso function is what I created myself.
>
> The packages I am using are mvtnorm, GIGrvg, tmvtnorm, RGeode and
> truncnorm.
>
>
>
> Best regards
>
> Sanna
>
>
>
> *From: *Bert Gunter <bgunter.4567 at gmail.com>
> *Date: *Thursday, 5 March 2020 at 15:40
> *To: *Sanna Soomro <s.soomro97 at gmail.com>
> *Subject: *Re: [R] rgamma function produces NaN values
>
>
>
> What package are you using? -- this is requested by the posting guide.
>
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
>
>
>
> On Thu, Mar 5, 2020 at 12:50 AM Sanna Soomro <s.soomro97 at gmail.com> wrote:
>
> Hi,
>
> In my code, I want to sample from the posterior distribution to get
> estimates for each parameter via the Bayesian approach. My model has
> spatial coefficient and lasso penalty.
>
> When I run this line
>
> gibbs_lasso(y = Y, x= X, W=W.rook, tau = 0.5, M=2)
>
> It works, however, when I changed M from 2 to 5, I get the following error:
>
> Error in rgig(1, 0.5, (SIGMA[m, ]/theta2) * ((y[ik] - crossprod(x[ik,  :
>   invalid parameters for GIG distribution: lambda=0.5, chi=nan, psi=nan
> In addition: Warning message:
> In rgamma(1, shape = 1.5 * n + a0, rate = SIGMAgamma + b0) : NAs produced
>
> It makes sense that rgig cannot accept NaN values of sigma parameter in its
> computation. But why does rgamma produces NaN value for sigma? The gamma
> distribution require both shape and scale parameters to be positive and my
> R computations for both should always be positive then sigma can be sampled
> easily. So, what went wrong in my code?
>
> Best regards
> Sanna
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
>

	[[alternative HTML version deleted]]


From @@@oomro97 @end|ng |rom gm@||@com  Fri Mar  6 16:51:08 2020
From: @@@oomro97 @end|ng |rom gm@||@com (Sanna Soomro)
Date: Fri, 6 Mar 2020 15:51:08 +0000
Subject: [R] rgamma function produces NaN values
In-Reply-To: <CAGxFJbRxKdSBe4VraU=-5re87SXNBjmOdNJXdaAcjFBpK-7CEA@mail.gmail.com>
References: <CAMJa_icUaSRD+xH+Jh8vrYh_M5t=tP97Y-vr47hWt0bo4LZ7wQ@mail.gmail.com>
 <CAGxFJbRAjH9YOVvF-K_aHHCDmsx017H6fNoieNtS-K8vVcn_Rw@mail.gmail.com>
 <AM5P18901MB0225CF2C7DE507EF8D613703FBE30@AM5P18901MB0225.EURP189.PROD.OUTLOOK.COM>
 <CAGxFJbRxKdSBe4VraU=-5re87SXNBjmOdNJXdaAcjFBpK-7CEA@mail.gmail.com>
Message-ID: <CAMJa_ieyXjNLaTBK-Ho9mCTAFsM1ZSc3xGTOuRpM8GE5EKAw1w@mail.gmail.com>

Hi

I didn't notice that I haven't cc the R-help so, unknowingly, I replied
back to you only.
That's understandable and I think I may consult for the wrong type of help.
However, I'll remain in the list in case if I get stuck in any simple R
problem again.

Best regards
Sanna Soomro

On Fri, 6 Mar 2020, 15:45 Bert Gunter, <bgunter.4567 at gmail.com> wrote:

> Unless there is a good reason not to, always cc the list in your
> responses. I am not your free private consultant.
>
> Beause you use your own function, your result is not reproducible, so that
> it is unlikely you can get useful help.
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Fri, Mar 6, 2020 at 6:11 AM Sanna Soomro <s.soomro97 at gmail.com> wrote:
>
>> Hi
>>
>>
>>
>> I apologize for the late response ? I?ve been busy.
>>
>> I have attached my R code in the email but I don?t know if it gone
>> through.
>>
>> The gibb_lasso function is what I created myself.
>>
>> The packages I am using are mvtnorm, GIGrvg, tmvtnorm, RGeode and
>> truncnorm.
>>
>>
>>
>> Best regards
>>
>> Sanna
>>
>>
>>
>> *From: *Bert Gunter <bgunter.4567 at gmail.com>
>> *Date: *Thursday, 5 March 2020 at 15:40
>> *To: *Sanna Soomro <s.soomro97 at gmail.com>
>> *Subject: *Re: [R] rgamma function produces NaN values
>>
>>
>>
>> What package are you using? -- this is requested by the posting guide.
>>
>>
>> Bert Gunter
>>
>> "The trouble with having an open mind is that people keep coming along
>> and sticking things into it."
>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>
>>
>>
>>
>>
>> On Thu, Mar 5, 2020 at 12:50 AM Sanna Soomro <s.soomro97 at gmail.com>
>> wrote:
>>
>> Hi,
>>
>> In my code, I want to sample from the posterior distribution to get
>> estimates for each parameter via the Bayesian approach. My model has
>> spatial coefficient and lasso penalty.
>>
>> When I run this line
>>
>> gibbs_lasso(y = Y, x= X, W=W.rook, tau = 0.5, M=2)
>>
>> It works, however, when I changed M from 2 to 5, I get the following
>> error:
>>
>> Error in rgig(1, 0.5, (SIGMA[m, ]/theta2) * ((y[ik] - crossprod(x[ik,  :
>>   invalid parameters for GIG distribution: lambda=0.5, chi=nan, psi=nan
>> In addition: Warning message:
>> In rgamma(1, shape = 1.5 * n + a0, rate = SIGMAgamma + b0) : NAs produced
>>
>> It makes sense that rgig cannot accept NaN values of sigma parameter in
>> its
>> computation. But why does rgamma produces NaN value for sigma? The gamma
>> distribution require both shape and scale parameters to be positive and my
>> R computations for both should always be positive then sigma can be
>> sampled
>> easily. So, what went wrong in my code?
>>
>> Best regards
>> Sanna
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>>

	[[alternative HTML version deleted]]


From demeo@erme||nd@ @end|ng |rom h@r@|t  Fri Mar  6 18:20:17 2020
From: demeo@erme||nd@ @end|ng |rom h@r@|t (De Meo Ermelinda)
Date: Fri, 6 Mar 2020 17:20:17 +0000
Subject: [R] Cross validation tidyLPA
Message-ID: <24C8AC23-E7A3-49D7-A88A-32DCEF0FF461@hsr.it>


Are there available some cross-validation method for LPA object??

Linda


Rispetta l?ambiente: non stampare questa mail se non ? necessario.
Respect the environment: print this email only if necessary.

From meryem@kh@nn|j| @end|ng |rom gm@||@com  Sat Mar  7 23:34:34 2020
From: meryem@kh@nn|j| @end|ng |rom gm@||@com (meryem khanniji)
Date: Sat, 7 Mar 2020 23:34:34 +0100
Subject: [R] (no subject)
Message-ID: <CAF1DM1kLScnJEWBZPoRYB_t_TLyWj=X__ronz6Wkiv0YOxS2Kg@mail.gmail.com>

Hello to all  R users' , I need to get the Ox interface in R, can anyone
help me to know if the garchOxfit is still working .
Also i want to know if there is a way to get G at RCH package.
Thanks in advance

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Sun Mar  8 11:41:28 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Sun, 8 Mar 2020 21:41:28 +1100
Subject: [R] (no subject)
In-Reply-To: <CAF1DM1kLScnJEWBZPoRYB_t_TLyWj=X__ronz6Wkiv0YOxS2Kg@mail.gmail.com>
References: <CAF1DM1kLScnJEWBZPoRYB_t_TLyWj=X__ronz6Wkiv0YOxS2Kg@mail.gmail.com>
Message-ID: <CA+8X3fXq4S8_LGbZVSHwyH5tZG=Vj-HQmSOyRnjg6OVhiB8hkQ@mail.gmail.com>

Hi Meryem,
It seems that OxMetrics is the underlying environment for G at RCH and
OxConsole (command line) is free for academic use.
(https://www.doornik.com/products.html). A quick glance didn't reveal
any interface for R.

Jim

On Sun, Mar 8, 2020 at 9:27 PM meryem khanniji
<meryem.khanniji at gmail.com> wrote:
>
> Hello to all  R users' , I need to get the Ox interface in R, can anyone
> help me to know if the garchOxfit is still working .
> Also i want to know if there is a way to get G at RCH package.
> Thanks in advance
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From er|cjberger @end|ng |rom gm@||@com  Sun Mar  8 13:53:07 2020
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Sun, 8 Mar 2020 14:53:07 +0200
Subject: [R] (no subject)
In-Reply-To: <CA+8X3fXq4S8_LGbZVSHwyH5tZG=Vj-HQmSOyRnjg6OVhiB8hkQ@mail.gmail.com>
References: <CAF1DM1kLScnJEWBZPoRYB_t_TLyWj=X__ronz6Wkiv0YOxS2Kg@mail.gmail.com>
 <CA+8X3fXq4S8_LGbZVSHwyH5tZG=Vj-HQmSOyRnjg6OVhiB8hkQ@mail.gmail.com>
Message-ID: <CAGgJW75TAWHxrOYobM_g-D3WckP0_8o0r_TBs64ksaDbPxJ1wA@mail.gmail.com>

I have no experience with these packages/libraries. I did a Google search
on 'R interface for G at RCH' and there seemed to be a number of relevant
hits, such as

https://faculty.chicagobooth.edu/ruey.tsay/teaching/bs41202/sp2009/G at RCH_info.txt


HTH,
Eric


On Sun, Mar 8, 2020 at 12:42 PM Jim Lemon <drjimlemon at gmail.com> wrote:

> Hi Meryem,
> It seems that OxMetrics is the underlying environment for G at RCH and
> OxConsole (command line) is free for academic use.
> (https://www.doornik.com/products.html). A quick glance didn't reveal
> any interface for R.
>
> Jim
>
> On Sun, Mar 8, 2020 at 9:27 PM meryem khanniji
> <meryem.khanniji at gmail.com> wrote:
> >
> > Hello to all  R users' , I need to get the Ox interface in R, can anyone
> > help me to know if the garchOxfit is still working .
> > Also i want to know if there is a way to get G at RCH package.
> > Thanks in advance
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From |@nzcc @end|ng |rom pot@d@m@edu  Sun Mar  8 17:35:42 2020
From: |@nzcc @end|ng |rom pot@d@m@edu (Christopher C. Lanz)
Date: Sun, 8 Mar 2020 16:35:42 +0000
Subject: [R] extremely long installation of devtools
Message-ID: <BL0PR16MB24346C92979083A3A44EDEDCC9E10@BL0PR16MB2434.namprd16.prod.outlook.com>

Help! I followed the instructions I found to install ggbiplot, and entered "install_packages("devtools")" about 25 minutes ago, and the installation procedure is continuing as I write this. Although it's difficult to tell, there appears to be substantial repetition in the messages displayed.

Should I terminate the process, or is this a normal event?

Thanks! (Please respond to this email [also?] because I can't enter R as the process is continuing. lanzcc at potsdam.edu)


Chris Lanz

Department of Computer Science

340 Dunn Hall, SUNY Potsdam

lanzcc at potsdam.edu

315 267 2407

315 268 1547


"The reason academic conflicts are so bitter is that the stakes are so low."

Sayre's Law (not the original, but a correct wording)

	[[alternative HTML version deleted]]


From tr@xp|@yer @end|ng |rom gm@||@com  Mon Mar  9 18:33:10 2020
From: tr@xp|@yer @end|ng |rom gm@||@com (=?UTF-8?Q?Martin_M=C3=B8ller_Skarbiniks_Pedersen?=)
Date: Mon, 9 Mar 2020 18:33:10 +0100
Subject: [R] extremely long installation of devtools
In-Reply-To: <BL0PR16MB24346C92979083A3A44EDEDCC9E10@BL0PR16MB2434.namprd16.prod.outlook.com>
References: <BL0PR16MB24346C92979083A3A44EDEDCC9E10@BL0PR16MB2434.namprd16.prod.outlook.com>
Message-ID: <CAGAA5bc2hAEyMQZEftO-R1t7fiLmr3EFB-cFP7bcLU4OTgME3w@mail.gmail.com>

On Mon, 9 Mar 2020 at 09:57, Christopher C. Lanz via R-help
<r-help at r-project.org> wrote:

> Help! I followed the instructions I found to install ggbiplot, and entered "install_packages("devtools")" about 25 minutes ago, and the installation procedure is continuing as I write this.

Hi,

  This is a lot of guess-work because you didn't write which
operationsystem or which version of R you are using.
  Also I guess you wrote: "install.packages("devtools") and not
install_packages("devtools").

  If you are using Windows, then you might the Rtools package before
installing devtools.
  If you are using Linux, then you might need to install a
C/C++-compiler for your Linux first.
  If ...

Please read and understand this: https://stackoverflow.com/help/how-to-ask









Although it's difficult to tell, there appears to be substantial
repetition in the messages displayed.
>
> Should I terminate the process, or is this a normal event?
>
> Thanks! (Please respond to this email [also?] because I can't enter R as the process is continuing. lanzcc at potsdam.edu)
>
>
> Chris Lanz
>
> Department of Computer Science
>
> 340 Dunn Hall, SUNY Potsdam
>
> lanzcc at potsdam.edu
>
> 315 267 2407
>
> 315 268 1547
>
>
> "The reason academic conflicts are so bitter is that the stakes are so low."
>
> Sayre's Law (not the original, but a correct wording)
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Til uvedkommende, der l?ser med: Der er ingen grund til at l?se min
mail. Jeg har intet at g?re med FARC, al-Jihad, al-Qaida, Hamas, Hizb
al-Mujahidin eller ETA. Jeg har aldrig gjort Zakat, g?r ikke ind for
Istishad, har ikke lavet en bilbombe eller kernev?ben og jeg ved
d?rligt nok, hvad Al Manar og ????? betyder.  Men tak for den udviste
interesse.

Leve Ligemageriet!
Styrk p?belv?ldet!
Bevar misundelsesafgifterne og cafepengene!
Hurra for ?ldrebyrden!


From m||uj|@b @end|ng |rom gm@||@com  Mon Mar  9 23:15:44 2020
From: m||uj|@b @end|ng |rom gm@||@com (Miluji Sb)
Date: Mon, 9 Mar 2020 23:15:44 +0100
Subject: [R] Match coordinates to regional polygon
Message-ID: <CAMLwc7PHxSnUz6h7m-+5UGvKK2dKL7NQwp=Ya5mprt+T8uiaCA@mail.gmail.com>

Dear all,

I am trying to match a large number of coordinates (attached) sub-national
regions using GADM shapefile.

Coordinates:
https://drive.google.com/file/d/1PUsi4d0wP7hB6Aps6UmpXsnIPSD3I1sT/view?usp=sharing

Shapefile:
https://drive.google.com/drive/folders/1DxyygjQNeg2GIS9doaFM8yM2LvBYZi8E?usp=sharing


This is the code I am using;

###
library(data.table)
library(ncdf4)
library(rgdal)
library(raster)
library(tidyverse)

## Read coordinates
coords <- read.csv("coords.csv")

## Read shapefile
world <-readOGR(dsn = "/gadm36_levels_shp", layer = "gadm36_2")

## Convert to spatial points
pts <- coords
coordinates(pts) <- ~lon+lat

## Provide the same CRS to the coordinates as the shapefile
proj4string(pts) <- proj4string(world)

## Use over function to match coordinates to polygons
pts_district <- over(pts, world)$NAME_1
###

However, less than 20% of the coordinates are matched to a polygon. What am
I doing wrong? Any help will be greatly appreciated.

Regards,

Milu

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Mar 10 00:13:03 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 9 Mar 2020 16:13:03 -0700
Subject: [R] Match coordinates to regional polygon
In-Reply-To: <CAMLwc7PHxSnUz6h7m-+5UGvKK2dKL7NQwp=Ya5mprt+T8uiaCA@mail.gmail.com>
References: <CAMLwc7PHxSnUz6h7m-+5UGvKK2dKL7NQwp=Ya5mprt+T8uiaCA@mail.gmail.com>
Message-ID: <CAGxFJbRSE1pFw=B7kFPoUxfsLTDiFhJSh2Cz90aFFWVttOC5QQ@mail.gmail.com>

I believe this would be better posted on r-sig-Geo  .

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Mar 9, 2020 at 3:16 PM Miluji Sb <milujisb at gmail.com> wrote:

> Dear all,
>
> I am trying to match a large number of coordinates (attached) sub-national
> regions using GADM shapefile.
>
> Coordinates:
>
> https://drive.google.com/file/d/1PUsi4d0wP7hB6Aps6UmpXsnIPSD3I1sT/view?usp=sharing
>
> Shapefile:
>
> https://drive.google.com/drive/folders/1DxyygjQNeg2GIS9doaFM8yM2LvBYZi8E?usp=sharing
>
>
> This is the code I am using;
>
> ###
> library(data.table)
> library(ncdf4)
> library(rgdal)
> library(raster)
> library(tidyverse)
>
> ## Read coordinates
> coords <- read.csv("coords.csv")
>
> ## Read shapefile
> world <-readOGR(dsn = "/gadm36_levels_shp", layer = "gadm36_2")
>
> ## Convert to spatial points
> pts <- coords
> coordinates(pts) <- ~lon+lat
>
> ## Provide the same CRS to the coordinates as the shapefile
> proj4string(pts) <- proj4string(world)
>
> ## Use over function to match coordinates to polygons
> pts_district <- over(pts, world)$NAME_1
> ###
>
> However, less than 20% of the coordinates are matched to a polygon. What am
> I doing wrong? Any help will be greatly appreciated.
>
> Regards,
>
> Milu
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Tue Mar 10 02:42:46 2020
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Tue, 10 Mar 2020 01:42:46 +0000
Subject: [R] I am struggling with contrasts
Message-ID: <MN2PR03MB51673D2B88A5930CEA77EE52E2FF0@MN2PR03MB5167.namprd03.prod.outlook.com>

I am running a Poisson regression with a single outcome variable, HGE, and a single independent variable, a factor, Group which can be one of two values, Group1, or Group2.
I am trying to define contrasts that will give me the values of my outcome variable (HGE) when group=Group1 and when group=Group2. After beating my head against a wall day, I have decided to ask for help.

Please see code and below below.

DataForR <-
structure(list(Group = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L,
                                   1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
                                   1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L,
                                   2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
                                   2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
                                   2L), .Label = c("Group1", "Group2"), class = "factor"), HGE = c(3,
                                   1, 0, 0, 0, 1, 0, 0, 0, 0, 3, 5, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0,
                                   0, 0, 0, 0, 1, 1, 3, 2, 0, 0, 0, 0, 3, 0, 2, 3, 0, 2, 0, 0, 5,
                                   0, 0, 0, 1, 0, 1, 3, 3, 4, 1, 0, 0, 2, 0, 0, 6, 2, 0, 0, 1, 4,
                                   5, 0, 3, 11, 0, 0, 0, 2), logFU = c(3.11397816503905, 2.68510374827232,
                                   0.991192040047273, 0.611801541105993, 1.06925022633126, 2.57001131045749,
                                   0.527354925717201, 0.608027951722353, 1.35812348415319, 1.99809590222588,
                                   2.73814823225949, 2.89037175789616, 1.02290046693241, 0.58120642052779,
                                   1.03160157838515, 0.457336938815005, 1.56760267327335, 2.29561642367795,
                                   -0.296984465114094, 0.4812251539897, 0.606135803570315, -0.349754501094159,
                                   1.34464013381591, 1.03777062941186, 0.604240068405416, 0.416972714959644,
                                   1.90748277192143, 1.92586939817187, 2.84013378690079, 0.611801541105993,
                                   1.57697211118452, 1.09047743846183, 0.412385550952738, -0.129570991408426,
                                   0.752136479035649, 1.3518538711396, 1.44118361285158, 1.24779030782599,
                                   1.0893098960058, 1.40008768325223, 1.36257783450257, 1.06686359035353,
                                   1.93493747038584, 0.549645615615573, -0.0794641713542468, -0.220542769614152,
                                   2.18753270073519, 0.613683009205699, 1.74010061095415, 1.76596671466633,
                                   0.508740117274969, 1.71791855542817, 1.90335053463652, 1.24679280150886,
                                   0.541597282432744, 2.16984703638892, 1.91926871414052, 1.030363188134,
                                   1.07992015565596, 1.78886175639198, 1.07755887947028, -0.117783035656384,
                                   1.49866152280324, 1.03530757397947, 2.68225744654048, 1.58909347171687,
                                   1.49477500411396, 1.47749256296521, 1.77129690199719, 1.5668782980153,
                                   2.06633519417454, 2.62758302063679)), class = "data.frame", row.names = c(NA,
                                   -72L))

# Show that dataForR is a dataframe.
summary(dataForR)
levels(dataForR$Group)
class(dataForR$Group)
# Fit the model.
fit0 <- glm(HGE ~ Group,family=poisson,data=dataForR,offset=logFU)
summary(fit0)

# Get value for Group1
MyContrast=list(xxx=c(1,0))
MyContrast
contrast(fit0,MyContrast)

# Get value for Group2
MyContrast=list(xxx=c(1,1))
MyContrast
contrast(fit0,MyContrast)

I hope you can help me understand how to use the contrast statement.

Thank you,
John




John David Sorkin M.D., Ph.D.
Professor of Medicine
Chief, Biostatistics and Informatics
University of Maryland School of Medicine Division of Gerontology and Geriatric Medicine
Baltimore VA Medical Center
10 North Greene Street
GRECC (BT/18/GR)
Baltimore, MD 21201-1524
(Phone) 410-605-7119
(Fax) 410-605-7913 (Please call phone number above prior to faxing)


	[[alternative HTML version deleted]]


From berw|n@tur|@ch @end|ng |rom gm@||@com  Tue Mar 10 04:06:34 2020
From: berw|n@tur|@ch @end|ng |rom gm@||@com (Berwin A Turlach)
Date: Tue, 10 Mar 2020 11:06:34 +0800
Subject: [R] I am struggling with contrasts
In-Reply-To: <MN2PR03MB51673D2B88A5930CEA77EE52E2FF0@MN2PR03MB5167.namprd03.prod.outlook.com>
References: <MN2PR03MB51673D2B88A5930CEA77EE52E2FF0@MN2PR03MB5167.namprd03.prod.outlook.com>
Message-ID: <20200310110634.0950686c@ECM-DTC-716.uniwa.uwa.edu.au>

G'day John,

On Tue, 10 Mar 2020 01:42:46 +0000
"Sorkin, John" <jsorkin at som.umaryland.edu> wrote:

> I am running a Poisson regression with a single outcome variable,
> HGE, and a single independent variable, a factor, Group which can be
> one of two values, Group1, or Group2. I am trying to define contrasts
> that will give me the values of my outcome variable (HGE) when
> group=Group1 and when group=Group2. 

Not sure what you mean, but I am suspecting you are after this output:

R> fit0 <- glm(HGE ~ Group - 1,family=poisson,data=dataForR,offset=logFU)
R> summary(fit0)

Cheers,

	Berwin


From gro@@m@b @end|ng |rom um|ch@edu  Mon Mar  9 20:25:50 2020
From: gro@@m@b @end|ng |rom um|ch@edu (Brian Grossman)
Date: Mon, 9 Mar 2020 15:25:50 -0400
Subject: [R] Problem launching Rcmdr
Message-ID: <CACcht+kA59600nxPTUEY6swC0krkOmo2aiZezUhfxwnjwmjV_A@mail.gmail.com>

I'm having a problem with launching Rcmdr. When I try to launch it the
first time through R using the command library(Rcmdr) it will go through
the process of launching and get to the point where it says

"Registered S3 methods overwritten by 'lme4':
  method                          from
  cooks.distance.influence.merMod car
  influence.merMod                car
  dfbeta.influence.merMod         car
  dfbetas.influence.merMod        car
lattice theme set by effectsTheme()
See ?effectsTheme for details."

and then it just hangs there and never launches Rcmdr. If you launch
another instance of R and run the same command it will complete and launch
Rcmdr successfully. I have tried launching R with R.exe --vanilla with the
same results.

The system information is Windows 10 version 1903, i5 8500 processor, 8GB
RAM, 256Gb  SSD. R version 3.6.2 Platform: x86_64-w64-mingw32/x64 (64-bit)

Hopefully I haven't left out any important information. Thank you for any
suggestions.

	[[alternative HTML version deleted]]


From pd@|gd @end|ng |rom gm@||@com  Tue Mar 10 10:07:26 2020
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Tue, 10 Mar 2020 10:07:26 +0100
Subject: [R] I am struggling with contrasts
In-Reply-To: <20200310110634.0950686c@ECM-DTC-716.uniwa.uwa.edu.au>
References: <MN2PR03MB51673D2B88A5930CEA77EE52E2FF0@MN2PR03MB5167.namprd03.prod.outlook.com>
 <20200310110634.0950686c@ECM-DTC-716.uniwa.uwa.edu.au>
Message-ID: <33C1E0C6-3A44-4434-ABED-F9B193024954@gmail.com>

Yes. Contrasts, by definition, represents between-group differences, so cannot yield individual group levels. The closest you get is that the _intercept_ is the level of the base group in treatment contrasts, and relevel() will allow you to change the base level.

-pd

> On 10 Mar 2020, at 04:06 , Berwin A Turlach <Berwin.Turlach at gmail.com> wrote:
> 
> G'day John,
> 
> On Tue, 10 Mar 2020 01:42:46 +0000
> "Sorkin, John" <jsorkin at som.umaryland.edu> wrote:
> 
>> I am running a Poisson regression with a single outcome variable,
>> HGE, and a single independent variable, a factor, Group which can be
>> one of two values, Group1, or Group2. I am trying to define contrasts
>> that will give me the values of my outcome variable (HGE) when
>> group=Group1 and when group=Group2. 
> 
> Not sure what you mean, but I am suspecting you are after this output:
> 
> R> fit0 <- glm(HGE ~ Group - 1,family=poisson,data=dataForR,offset=logFU)
> R> summary(fit0)
> 
> Cheers,
> 
> 	Berwin
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From @purd|e@@ @end|ng |rom gm@||@com  Tue Mar 10 10:13:42 2020
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Tue, 10 Mar 2020 22:13:42 +1300
Subject: [R] Error with stepwise models selection using NADA library
In-Reply-To: <99c1d5e7-dbd2-f223-de24-f97cdbd12765@gmail.com>
References: <99c1d5e7-dbd2-f223-de24-f97cdbd12765@gmail.com>
Message-ID: <CAB8pepxhmCj9MXjAfez-d0ExgF4PFCJJ3a8KnUG1NenPgpxnWw@mail.gmail.com>

I'm assuming that you're referring to MASS::stepAIC.

There's a few problems here.
Firstly, I don't think stepAIC is compatible with S4 objects.

My first strategy was to create another class.
However, that requires many new methods.
(And the stepAIC documentation doesn't say what methods are needed).

My second strategy was to wrap the cenreg function and return a modified
copy of the survreg object.
This appears to work, but there are complications using the update and
terms functions.

Also, I got the impression that the return value from calling the term
function on the NADA-based objects, is also not compatible with the stepAIC
function, possible causing the S4 error messages.

I got the following working, hopefully...

----------
library (NADA)
library (MASS)
data (TCEReg)

cenreg.auto <- function (formula, ...)
{   mfit <- cenreg (formula, ...)@survreg
    class (mfit) <- c ("cenreg.auto", class (mfit) )
    mfit$call <- match.call ()
    mfit
}

update.cenreg.auto <- function (object, formula, ..., evaluate=TRUE)
{   call <- object$call
    f0 <- eval (call [[2]])
    f0 <- update.formula (f0, formula)
    call [[2]] <- as.call (f0)
    if (evaluate)
    {    object <- eval (call)
        object$call <- call
        object
    }
    else
        call
}

terms.cenreg.auto <- function (x, ...)
{  terms <- main.formula
   attributes (terms) <- attributes (x$terms)
   terms
}

#main dataset
#(current code needs this to be *global*)
attach (TCEReg)

#simulated data
#model sometimes picks these up
#(correct or bug?)
xrand <- 50 * sample (LandUse)
yrand <- 50 * sample (Depth)

#main formula
#(current code needs this to be *global* too)
main.formula <- Cen (TCEConc, TCECen) ~ LandUse + xrand + Depth + yrand

#fit
#(current code needs *formula duplicated*)
myfit <- cenreg.auto (Cen (TCEConc, TCECen) ~ LandUse + xrand + Depth +
yrand)

bestfit.if.lucky <- stepAIC (myfit, Cen (TCEConc, TCECen) ~ .)

detach (TCEReg)

print (bestfit.if.lucky)
----------

There are some problems with this code:
(1) Both the dataset and formula need to be in the global environment.
(2) The formula needs to be typed twice.

I don't consider this good R code.
However, I'm not an expert on formula objects, and I spent more time on
this problem than planned.
Someone who is an expert on formula objects could improve this,
substantially.

The other thing to note, is that I included some terms in the input, that
contain random numbers.
They appear in the final model, more frequently than I initially expected.
However, I'm not familiar with the type regression that you're using, so
can't really say how often this should happen.


On Sat, Mar 7, 2020 at 1:21 AM Marco Gabrielli <marco.gabrielli94 at gmail.com>
wrote:

> Hi,
> I'm working with environmental data which are left-censored and I found the
> R package NADA which seems to do the job.
> After fitting a complete model, using the cenreg function,I'd like to do a
> stepwise procedure to minimize the AIC using the stepAIC function.
> Unfortunately, after fitting the model, the stepAIC does not work with
> either the cenreg object or the S3 survreg object within.
>
> Here it is an example of the commands used:
>
> library(NADA)
> MLEtot=with(df, cenreg(Cen(Y,Cen)~x1+x2+x3+x4,dist="lognormal"))
> stepAIC(MLEtot)
> "Error: $ operator not defined for this S4 class"
> stepAIC(MLEtot at survreg)
> "Start:  AIC=6.16
> asSurv(Cen(Y, Cen)) ~ x1 + x2 + x3 + x4
> Error in (function (classes, fdef, mtable)  :
>    unable to find an inherited method for function ?asSurv? for signature
> ?"Surv"?"
>
> How can I do manage to make it work?
> Thanks
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Tue Mar 10 11:50:33 2020
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Tue, 10 Mar 2020 10:50:33 +0000
Subject: [R] I am struggling with contrasts
In-Reply-To: <33C1E0C6-3A44-4434-ABED-F9B193024954@gmail.com>
References: <MN2PR03MB51673D2B88A5930CEA77EE52E2FF0@MN2PR03MB5167.namprd03.prod.outlook.com>
 <20200310110634.0950686c@ECM-DTC-716.uniwa.uwa.edu.au>,
 <33C1E0C6-3A44-4434-ABED-F9B193024954@gmail.com>
Message-ID: <MN2PR03MB5167D8C68ECFE160CBA49223E2FF0@MN2PR03MB5167.namprd03.prod.outlook.com>

I have not clearly stated my question. I would like to obtain the point estimate and SE (or point estimate and 95% CI) of a linear combination of the the independent variables included in my regression model. In a simple model having a single categorical variable that has two levels (Group1 and Group2) obtaining the estimate and its SE (or the estimate and a 95% CI) requires knowing the betas produced by the model, the SEs of the betas (which are easily obtained) along with the variance covariance of the estimates. I assume that the variance covariance matrix can be obtained but working the the matrix is a real pain. I am looking for a SIMPLE way to get the point estimate and its SE without having to slog though getting all the estimates, their SEs manually adding them together and including the covariances.
For example if my model is

rate = group and group has the value 1, I want:

beta rate = beta intercept + beta group
variance rate = variance intercept + variance group + 2*covariance (intercept,group)

I suspect I can do this calculation manually, but I would really like to find a way that R will do the computation for me.

My regression model is:
fit1 <- glm(HGE ~ Group,family=quasipoisson(link="log"), data=dataForR,offset=logFU)

In SAS this can be accomplished using estimate statements; I suspect that is an R analogue of the SAS estimate statement, but I don't know that the analogue is .

Thank you,

John

Particular thanks are due to Peter Dalgaard, Berwin Turlach, and Mark Leeds who responded to my original, not well formulated posting.



Thank you,

John





John David Sorkin M.D., Ph.D.
Professor of Medicine
Chief, Biostatistics and Informatics
University of Maryland School of Medicine Division of Gerontology and Geriatric Medicine
Baltimore VA Medical Center
10 North Greene Street
GRECC (BT/18/GR)
Baltimore, MD 21201-1524
(Phone) 410-605-7119
(Fax) 410-605-7913 (Please call phone number above prior to faxing)


________________________________
From: peter dalgaard <pdalgd at gmail.com>
Sent: Tuesday, March 10, 2020 5:07 AM
To: Berwin A Turlach <Berwin.Turlach at gmail.com>
Cc: Sorkin, John <jsorkin at som.umaryland.edu>; r-help at r-project.org (r-help at r-project.org) <r-help at r-project.org>
Subject: Re: [R] I am struggling with contrasts

Yes. Contrasts, by definition, represents between-group differences, so cannot yield individual group levels. The closest you get is that the _intercept_ is the level of the base group in treatment contrasts, and relevel() will allow you to change the base level.

-pd

> On 10 Mar 2020, at 04:06 , Berwin A Turlach <Berwin.Turlach at gmail.com> wrote:
>
> G'day John,
>
> On Tue, 10 Mar 2020 01:42:46 +0000
> "Sorkin, John" <jsorkin at som.umaryland.edu> wrote:
>
>> I am running a Poisson regression with a single outcome variable,
>> HGE, and a single independent variable, a factor, Group which can be
>> one of two values, Group1, or Group2. I am trying to define contrasts
>> that will give me the values of my outcome variable (HGE) when
>> group=Group1 and when group=Group2.
>
> Not sure what you mean, but I am suspecting you are after this output:
>
> R> fit0 <- glm(HGE ~ Group - 1,family=poisson,data=dataForR,offset=logFU)
> R> summary(fit0)
>
> Cheers,
>
>        Berwin
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam03.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=02%7C01%7C%7C4b9ea7f815e0494abf0908d7c4d2770c%7C717009a620de461a88940312a395cac9%7C0%7C0%7C637194280543093844&amp;sdata=QFyKBzxZfkXAjASSUYsSnMJ1CiZIjXDK6JEgKHrV5vg%3D&amp;reserved=0
> PLEASE do read the posting guide https://nam03.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.R-project.org%2Fposting-guide.html&amp;data=02%7C01%7C%7C4b9ea7f815e0494abf0908d7c4d2770c%7C717009a620de461a88940312a395cac9%7C0%7C0%7C637194280543093844&amp;sdata=pf%2BQVOSaoGq5HwJ1QjMawCArFC1yjpG9yL%2Fs5dv5wJw%3D&amp;reserved=0
> and provide commented, minimal, self-contained, reproducible code.

--
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com










	[[alternative HTML version deleted]]


From wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n|  Tue Mar 10 12:07:13 2020
From: wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n| (Viechtbauer, Wolfgang (SP))
Date: Tue, 10 Mar 2020 11:07:13 +0000
Subject: [R] I am struggling with contrasts
In-Reply-To: <MN2PR03MB5167D8C68ECFE160CBA49223E2FF0@MN2PR03MB5167.namprd03.prod.outlook.com>
References: <MN2PR03MB51673D2B88A5930CEA77EE52E2FF0@MN2PR03MB5167.namprd03.prod.outlook.com>
 <20200310110634.0950686c@ECM-DTC-716.uniwa.uwa.edu.au>,
 <33C1E0C6-3A44-4434-ABED-F9B193024954@gmail.com>
 <MN2PR03MB5167D8C68ECFE160CBA49223E2FF0@MN2PR03MB5167.namprd03.prod.outlook.com>
Message-ID: <73501fc4afd045ca92562d162d9e2625@UM-MAIL3214.unimaas.nl>

Dear John,

The linearHypothesis() function from the 'car' package does this.

>From the help file: "The value of the linear hypothesis and its covariance matrix are returned respectively as "value" and "vcov" attributes of the object (but not printed)." For  a single linear combination, vcov will be a single value and its square-root the SE.

Best,
Wolfgang

-----Original Message-----
From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Sorkin, John
Sent: Tuesday, 10 March, 2020 11:51
To: peter dalgaard; Berwin A Turlach
Cc: r-help at r-project.org (r-help at r-project.org)
Subject: Re: [R] I am struggling with contrasts

I have not clearly stated my question. I would like to obtain the point estimate and SE (or point estimate and 95% CI) of a linear combination of the the independent variables included in my regression model. In a simple model having a single categorical variable that has two levels (Group1 and Group2) obtaining the estimate and its SE (or the estimate and a 95% CI) requires knowing the betas produced by the model, the SEs of the betas (which are easily obtained) along with the variance covariance of the estimates. I assume that the variance covariance matrix can be obtained but working the the matrix is a real pain. I am looking for a SIMPLE way to get the point estimate and its SE without having to slog though getting all the estimates, their SEs manually adding them together and including the covariances.
For example if my model is

rate = group and group has the value 1, I want:

beta rate = beta intercept + beta group
variance rate = variance intercept + variance group + 2*covariance (intercept,group)

I suspect I can do this calculation manually, but I would really like to find a way that R will do the computation for me.

My regression model is:
fit1 <- glm(HGE ~ Group,family=quasipoisson(link="log"), data=dataForR,offset=logFU)

In SAS this can be accomplished using estimate statements; I suspect that is an R analogue of the SAS estimate statement, but I don't know that the analogue is .

Thank you,

John

Particular thanks are due to Peter Dalgaard, Berwin Turlach, and Mark Leeds who responded to my original, not well formulated posting.

Thank you,

John

John David Sorkin M.D., Ph.D.
Professor of Medicine
Chief, Biostatistics and Informatics
University of Maryland School of Medicine Division of Gerontology and Geriatric Medicine
Baltimore VA Medical Center
10 North Greene Street
GRECC (BT/18/GR)
Baltimore, MD 21201-1524
(Phone) 410-605-7119
(Fax) 410-605-7913 (Please call phone number above prior to faxing)


From berw|n@tur|@ch @end|ng |rom gm@||@com  Tue Mar 10 12:28:01 2020
From: berw|n@tur|@ch @end|ng |rom gm@||@com (Berwin A Turlach)
Date: Tue, 10 Mar 2020 19:28:01 +0800
Subject: [R] I am struggling with contrasts
In-Reply-To: <73501fc4afd045ca92562d162d9e2625@UM-MAIL3214.unimaas.nl>
References: <MN2PR03MB51673D2B88A5930CEA77EE52E2FF0@MN2PR03MB5167.namprd03.prod.outlook.com>
 <20200310110634.0950686c@ECM-DTC-716.uniwa.uwa.edu.au>
 <33C1E0C6-3A44-4434-ABED-F9B193024954@gmail.com>
 <MN2PR03MB5167D8C68ECFE160CBA49223E2FF0@MN2PR03MB5167.namprd03.prod.outlook.com>
 <73501fc4afd045ca92562d162d9e2625@UM-MAIL3214.unimaas.nl>
Message-ID: <20200310192801.61f9a894@ECM-DTC-716.uniwa.uwa.edu.au>

G'day all,

On Tue, 10 Mar 2020 11:07:13 +0000
"Viechtbauer, Wolfgang (SP)"
<wolfgang.viechtbauer at maastrichtuniversity.nl> wrote:

> The linearHypothesis() function from the 'car' package does this.

The function glht() in the 'multcomp' package should also be able to do
this.  

The 'emmeans' package might also be useful.

Will be off-line for a while now, but might look at the example again
and how to do it with 'multcomp' or 'emmeans' later.

Cheers,

	Berwin


From j|ox @end|ng |rom mcm@@ter@c@  Tue Mar 10 13:46:25 2020
From: j|ox @end|ng |rom mcm@@ter@c@ (Fox, John)
Date: Tue, 10 Mar 2020 12:46:25 +0000
Subject: [R] Problem launching Rcmdr
In-Reply-To: <30331_1583814715_02A4Upjf022824_CACcht+kA59600nxPTUEY6swC0krkOmo2aiZezUhfxwnjwmjV_A@mail.gmail.com>
References: <30331_1583814715_02A4Upjf022824_CACcht+kA59600nxPTUEY6swC0krkOmo2aiZezUhfxwnjwmjV_A@mail.gmail.com>
Message-ID: <7DCD30FF-8198-4C98-A05D-65308D5ED952@mcmaster.ca>

Dear Brian,

Normally I'd expect that a workspace saved from a previous session and loaded at the start of the current session would cause this kind of anomalous behaviour, but that doesn't explain why the Rcmdr starts up properly in a second (concurrent?) session, nor why it doesn't start up properly when R is run with the --vanilla switch.

Can you report the result of sessionInfo() at the start of a session?

If all else fails, you could try uninstalling and reinstalling R and packages.

Best,
 John

  -----------------------------
  John Fox, Professor Emeritus
  McMaster University
  Hamilton, Ontario, Canada
  Web: http::/socserv.mcmaster.ca/jfox

> On Mar 9, 2020, at 3:25 PM, Brian Grossman <grossmab at umich.edu> wrote:
> 
> I'm having a problem with launching Rcmdr. When I try to launch it the
> first time through R using the command library(Rcmdr) it will go through
> the process of launching and get to the point where it says
> 
> "Registered S3 methods overwritten by 'lme4':
>  method                          from
>  cooks.distance.influence.merMod car
>  influence.merMod                car
>  dfbeta.influence.merMod         car
>  dfbetas.influence.merMod        car
> lattice theme set by effectsTheme()
> See ?effectsTheme for details."
> 
> and then it just hangs there and never launches Rcmdr. If you launch
> another instance of R and run the same command it will complete and launch
> Rcmdr successfully. I have tried launching R with R.exe --vanilla with the
> same results.
> 
> The system information is Windows 10 version 1903, i5 8500 processor, 8GB
> RAM, 256Gb  SSD. R version 3.6.2 Platform: x86_64-w64-mingw32/x64 (64-bit)
> 
> Hopefully I haven't left out any important information. Thank you for any
> suggestions.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From m|ch@e|@m@homet@ @end|ng |rom @u@t|n@utex@@@edu  Mon Mar  9 20:30:44 2020
From: m|ch@e|@m@homet@ @end|ng |rom @u@t|n@utex@@@edu (Mahometa, Michael J)
Date: Mon, 9 Mar 2020 19:30:44 +0000
Subject: [R] Announcement: Summer Statistics Institute at UT Austin
Message-ID: <479225BD-1552-4AA3-A2F2-C3663025AC4E@austin.utexas.edu>

The Department of Statistics and Data Sciences at The University of Texas at Austin is hosting the 13th annual UT Summer Statistics Institute (SSI) May 26?29, 2020.  

SSI OVERVIEW:

* SSI attracts participants from academia, health professions and marketing firms.
* Participants acquire new statistical knowledge and skills through hands-on data analysis.
* SSI provides an exciting venue to build statistical knowledge alongside a diverse and dynamic audience.

UT's Summer Statistics Institute (SSI) offers intensive four-day workshops on diverse topics from introductory data sciences to advanced statistics. Whether you are new to data analysis or a seasoned statistician, SSI provides a unique hands-on opportunity to acquire valuable skills directly from experts in the field. The UT Summer Statistics Institute (SSI) is open to 700 participants.

Courses span introductory statistics, statistical software, statistical methods and statistics applications. Each course will meet for four half-days, either mornings or afternoons, for a total of twelve hours. Instructors will post lectures, datasets, exercises, and course information on a website accessible to enrolled participants. There will be no examinations, and participants will receive certificates upon completion. Academic credit will not be issued. Please carefully check the specified prerequisite knowledge before enrolling in a course.

R Specific Courses for this year include:
* Introduction to Data Analysis and Graphics Using R (AM)
* Introduction to Data Analysis and Graphics Using R (PM)
* Informed Decision Making from Data: Regression Analysis
* Introduction to Bayesian Statistics

The Department of Statistics and Data Sciences now offers credit for educational professional development opportunities during our 2020 Summer Statistics Institute! Teachers currently working in PK?12 settings can earn 12 hours of Continuing Professional Education (CPE) by attending one of our 25 exciting SSI courses held May 26-29, 2020. 

Courses will be held on the UT Campus in Patton Hall (RLP), Flawn Academic Center (FAC) and Robert A. Welch Hall (WEL).

For more information and to register:
https://stat.utexas.edu/training/ssi


-----

MICHAEL J. MAHOMETA
Director of Statistical Consulting and Professional Education
Department of Statistics and Data Sciences  |  The University of Texas at Austin
2317 Speedway, Stop D9800 | Austin, TX 78712
o: 512-471-4542  |  stat.utexas.edu


From Debb|e@H@h@-V@ughn @end|ng |rom uc|@edu  Tue Mar 10 14:57:26 2020
From: Debb|e@H@h@-V@ughn @end|ng |rom uc|@edu (Debbie Hahs-Vaughn)
Date: Tue, 10 Mar 2020 13:57:26 +0000
Subject: [R] power for repeated measures ANCOVA
Message-ID: <BY5PR11MB419494AE5F77E830B07AE2D7CFFF0@BY5PR11MB4194.namprd11.prod.outlook.com>

Is anyone aware of an R package for computing power analysis with repeated measures ANCOVA? I realize this message was posted many years ago so am wondering if something is now available.

<mailto:debbie.hahs-vaughn at ucf.edu>

	[[alternative HTML version deleted]]


From j|ox @end|ng |rom mcm@@ter@c@  Tue Mar 10 23:43:40 2020
From: j|ox @end|ng |rom mcm@@ter@c@ (Fox, John)
Date: Tue, 10 Mar 2020 22:43:40 +0000
Subject: [R] Problem launching Rcmdr
In-Reply-To: <CACcht+kJVr28_ev-GNxZXcZWrvVzKxvNm4cwvmRxX2fTUDPtnQ@mail.gmail.com>
References: <30331_1583814715_02A4Upjf022824_CACcht+kA59600nxPTUEY6swC0krkOmo2aiZezUhfxwnjwmjV_A@mail.gmail.com>
 <7DCD30FF-8198-4C98-A05D-65308D5ED952@mcmaster.ca>
 <CACcht+kJVr28_ev-GNxZXcZWrvVzKxvNm4cwvmRxX2fTUDPtnQ@mail.gmail.com>
Message-ID: <ACD1644AA6C67E4FBD0C350625508EC88CD4BB23@FHSDB4H16-2.csu.mcmaster.ca>

Dear Brian,

(Please keep r-help in the loop so that if someone else has this problem they'll have something to refer to.)

Your session at start-up seems completely clean, so I'm at a loss to understand what the problem is. I, and I assume very many other people, are using the Rcmdr with essentially the same Windows setup. What's particularly hard for me to understand is that you're able to start the Rcmdr in a second R session. Does the first R session have to remain open for this to work?

A next step is to reinstall packages, starting with the Rcmdr package, if you haven't already tried that, and eventually to reinstall R, including deleting the R package library. BTW, I usually prefer to install R in c:\R\ rather than under Program Files so that the system library is used for packages that I subsequently install, although it should work perfectly fine to install packages into a personal library.

Best,
 John

> -----Original Message-----
> From: Brian Grossman <grossmab at umich.edu>
> Sent: Tuesday, March 10, 2020 5:07 PM
> To: Fox, John <jfox at mcmaster.ca>
> Subject: Re: [R] Problem launching Rcmdr
> 
> John,
> 
> Thanks for the reply. Here is the output from running sessionInfo() right after
> opening R.
> 
> > sessionInfo()
> R version 3.6.2 (2019-12-12)
> Platform: x86_64-w64-mingw32/x64 (64-bit) Running under: Windows 10 x64
> (build 18362)
> 
> Matrix products: default
> 
> locale:
> [1] LC_COLLATE=English_United States.1252 [2] LC_CTYPE=English_United
> States.1252 [3] LC_MONETARY=English_United States.1252 [4]
> LC_NUMERIC=C [5] LC_TIME=English_United States.1252
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
> 
> loaded via a namespace (and not attached):
> [1] compiler_3.6.2
> 
> 
> Brian
> 
> On Tue, Mar 10, 2020 at 8:46 AM Fox, John <jfox at mcmaster.ca
> <mailto:jfox at mcmaster.ca> > wrote:
> 
> 
> 	Dear Brian,
> 
> 	Normally I'd expect that a workspace saved from a previous session
> and loaded at the start of the current session would cause this kind of
> anomalous behaviour, but that doesn't explain why the Rcmdr starts up
> properly in a second (concurrent?) session, nor why it doesn't start up
> properly when R is run with the --vanilla switch.
> 
> 	Can you report the result of sessionInfo() at the start of a session?
> 
> 	If all else fails, you could try uninstalling and reinstalling R and
> packages.
> 
> 	Best,
> 	 John
> 
> 	  -----------------------------
> 	  John Fox, Professor Emeritus
> 	  McMaster University
> 	  Hamilton, Ontario, Canada
> 	  Web: http::/socserv.mcmaster.ca/jfox
> <http://socserv.mcmaster.ca/jfox>
> 
> 	> On Mar 9, 2020, at 3:25 PM, Brian Grossman
> <grossmab at umich.edu <mailto:grossmab at umich.edu> > wrote:
> 	>
> 	> I'm having a problem with launching Rcmdr. When I try to launch it
> the
> 	> first time through R using the command library(Rcmdr) it will go
> through
> 	> the process of launching and get to the point where it says
> 	>
> 	> "Registered S3 methods overwritten by 'lme4':
> 	>  method                          from
> 	>  cooks.distance.influence.merMod car
> 	>  influence.merMod                car
> 	>  dfbeta.influence.merMod         car
> 	>  dfbetas.influence.merMod        car
> 	> lattice theme set by effectsTheme()
> 	> See ?effectsTheme for details."
> 	>
> 	> and then it just hangs there and never launches Rcmdr. If you
> launch
> 	> another instance of R and run the same command it will complete
> and launch
> 	> Rcmdr successfully. I have tried launching R with R.exe --vanilla with
> the
> 	> same results.
> 	>
> 	> The system information is Windows 10 version 1903, i5 8500
> processor, 8GB
> 	> RAM, 256Gb  SSD. R version 3.6.2 Platform: x86_64-w64-
> mingw32/x64 (64-bit)
> 	>
> 	> Hopefully I haven't left out any important information. Thank you
> for any
> 	> suggestions.
> 	>
> 	>       [[alternative HTML version deleted]]
> 	>
> 	> ______________________________________________
> 	> R-help at r-project.org <mailto:R-help at r-project.org>  mailing list --
> To UNSUBSCRIBE and more, see
> 	> https://stat.ethz.ch/mailman/listinfo/r-help
> 	> PLEASE do read the posting guide http://www.R-
> project.org/posting-guide.html
> 	> and provide commented, minimal, self-contained, reproducible
> code.
> 
> 
> 


From @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com  Wed Mar 11 05:51:40 2020
From: @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com (Ana Marija)
Date: Tue, 10 Mar 2020 23:51:40 -0500
Subject: [R] how do I add text lables on QQ plot
Message-ID: <CAF9-5jMMFM3fA7sbyv4yNrfyF1Da7vw8RD2jcfTWOMT6Lfgi4A@mail.gmail.com>

Hello,

I am making QQ plot via:

library(ggman)
qq(fdr2_sorted$FDR.q.val2, main = "RG_All", pch = 17,
col=fdr1_sorted$group, cex = 1, las = 1)

data frames used look like this:

> head(fdr1_sorted)
                                       NAME             GS<br> follow
link to MSigDB  GS DETAILS SIZE         ES       NES NOM p-val
1:                 GO_DNA_PACKAGING_COMPLEX
GO_DNA_PACKAGING_COMPLEX Details ...   77  0.6757226  2.466745
0
2:                   GO_PROTEIN_DNA_COMPLEX
GO_PROTEIN_DNA_COMPLEX Details ...  132  0.5958179  2.346520         0
3:         GO_RESPONSE_TO_TYPE_I_INTERFERON
GO_RESPONSE_TO_TYPE_I_INTERFERON Details ...   52 -0.7521569 -2.533148
        0
4:          GO_RESPONSE_TO_INTERFERON_GAMMA
GO_RESPONSE_TO_INTERFERON_GAMMA Details ...  101 -0.6370415 -2.420473
       0
5: GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA
GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA Details ...   85 -0.6571892
-2.402153         0
6:                 GO_GRANULOCYTE_MIGRATION
GO_GRANULOCYTE_MIGRATION Details ...   43 -0.7332099 -2.398983
0
   FDR q-val FWER p-val RANK AT MAX                   LEADING EDGE V12
group FDR.q.val2
1:         0          0        1111 tags=43%, list=10%, signal=47%  NA
    2      1e-10
2:         0          0        1516 tags=39%, list=13%, signal=45%  NA
    2      1e-10
3:         0          0        1427 tags=54%, list=12%, signal=61%  NA
    4      1e-10
4:         0          0        1819 tags=45%, list=16%, signal=52%  NA
    4      1e-10
5:         0          0        1216 tags=38%, list=11%, signal=42%  NA
    4      1e-10
6:         0          0         491  tags=28%, list=4%, signal=29%  NA
    4      1e-10

> head(fdr2_sorted)
                                       NAME             GS<br> follow
link to MSigDB  GS DETAILS SIZE         ES       NES NOM p-val
1:                 GO_DNA_PACKAGING_COMPLEX
GO_DNA_PACKAGING_COMPLEX Details ...   77  0.6757226  2.466745
0
2:                   GO_PROTEIN_DNA_COMPLEX
GO_PROTEIN_DNA_COMPLEX Details ...  132  0.5958179  2.346520         0
3:         GO_RESPONSE_TO_TYPE_I_INTERFERON
GO_RESPONSE_TO_TYPE_I_INTERFERON Details ...   52 -0.7521569 -2.533148
        0
4:          GO_RESPONSE_TO_INTERFERON_GAMMA
GO_RESPONSE_TO_INTERFERON_GAMMA Details ...  101 -0.6370415 -2.420473
       0
5: GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA
GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA Details ...   85 -0.6571892
-2.402153         0
6:                 GO_GRANULOCYTE_MIGRATION
GO_GRANULOCYTE_MIGRATION Details ...   43 -0.7332099 -2.398983
0
   FDR q-val FWER p-val RANK AT MAX                   LEADING EDGE V12
FDR.q.val2
1:         0          0        1111 tags=43%, list=10%, signal=47%  NA
     1e-10
2:         0          0        1516 tags=39%, list=13%, signal=45%  NA
     1e-10
3:         0          0        1427 tags=54%, list=12%, signal=61%  NA
     1e-10
4:         0          0        1819 tags=45%, list=16%, signal=52%  NA
     1e-10
5:         0          0        1216 tags=38%, list=11%, signal=42%  NA
     1e-10
6:         0          0         491  tags=28%, list=4%, signal=29%  NA
     1e-10

and I would like to get the plot like the one in attach.

Please advise,
Ana

-------------- next part --------------
A non-text attachment was scrubbed...
Name: rsz_qqanot.png
Type: image/png
Size: 76403 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200310/d24efc4e/attachment.png>

From pd@|gd @end|ng |rom gm@||@com  Wed Mar 11 10:29:01 2020
From: pd@|gd @end|ng |rom gm@||@com (Peter Dalgaard)
Date: Wed, 11 Mar 2020 10:29:01 +0100
Subject: [R] Problem launching Rcmdr
In-Reply-To: <ACD1644AA6C67E4FBD0C350625508EC88CD4BB23@FHSDB4H16-2.csu.mcmaster.ca>
References: <30331_1583814715_02A4Upjf022824_CACcht+kA59600nxPTUEY6swC0krkOmo2aiZezUhfxwnjwmjV_A@mail.gmail.com>
 <7DCD30FF-8198-4C98-A05D-65308D5ED952@mcmaster.ca>
 <CACcht+kJVr28_ev-GNxZXcZWrvVzKxvNm4cwvmRxX2fTUDPtnQ@mail.gmail.com>
 <ACD1644AA6C67E4FBD0C350625508EC88CD4BB23@FHSDB4H16-2.csu.mcmaster.ca>
Message-ID: <9943308E-BE52-4DE3-8ED5-C0DC060C7FEB@gmail.com>

Any chance that a virus checker is interfering?

-pd

> On 10 Mar 2020, at 23:43 , Fox, John <jfox at mcmaster.ca> wrote:
> 
> Dear Brian,
> 
> (Please keep r-help in the loop so that if someone else has this problem they'll have something to refer to.)
> 
> Your session at start-up seems completely clean, so I'm at a loss to understand what the problem is. I, and I assume very many other people, are using the Rcmdr with essentially the same Windows setup. What's particularly hard for me to understand is that you're able to start the Rcmdr in a second R session. Does the first R session have to remain open for this to work?
> 
> A next step is to reinstall packages, starting with the Rcmdr package, if you haven't already tried that, and eventually to reinstall R, including deleting the R package library. BTW, I usually prefer to install R in c:\R\ rather than under Program Files so that the system library is used for packages that I subsequently install, although it should work perfectly fine to install packages into a personal library.
> 
> Best,
> John
> 
>> -----Original Message-----
>> From: Brian Grossman <grossmab at umich.edu>
>> Sent: Tuesday, March 10, 2020 5:07 PM
>> To: Fox, John <jfox at mcmaster.ca>
>> Subject: Re: [R] Problem launching Rcmdr
>> 
>> John,
>> 
>> Thanks for the reply. Here is the output from running sessionInfo() right after
>> opening R.
>> 
>>> sessionInfo()
>> R version 3.6.2 (2019-12-12)
>> Platform: x86_64-w64-mingw32/x64 (64-bit) Running under: Windows 10 x64
>> (build 18362)
>> 
>> Matrix products: default
>> 
>> locale:
>> [1] LC_COLLATE=English_United States.1252 [2] LC_CTYPE=English_United
>> States.1252 [3] LC_MONETARY=English_United States.1252 [4]
>> LC_NUMERIC=C [5] LC_TIME=English_United States.1252
>> 
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>> 
>> loaded via a namespace (and not attached):
>> [1] compiler_3.6.2
>> 
>> 
>> Brian
>> 
>> On Tue, Mar 10, 2020 at 8:46 AM Fox, John <jfox at mcmaster.ca
>> <mailto:jfox at mcmaster.ca> > wrote:
>> 
>> 
>> 	Dear Brian,
>> 
>> 	Normally I'd expect that a workspace saved from a previous session
>> and loaded at the start of the current session would cause this kind of
>> anomalous behaviour, but that doesn't explain why the Rcmdr starts up
>> properly in a second (concurrent?) session, nor why it doesn't start up
>> properly when R is run with the --vanilla switch.
>> 
>> 	Can you report the result of sessionInfo() at the start of a session?
>> 
>> 	If all else fails, you could try uninstalling and reinstalling R and
>> packages.
>> 
>> 	Best,
>> 	 John
>> 
>> 	  -----------------------------
>> 	  John Fox, Professor Emeritus
>> 	  McMaster University
>> 	  Hamilton, Ontario, Canada
>> 	  Web: http::/socserv.mcmaster.ca/jfox
>> <http://socserv.mcmaster.ca/jfox>
>> 
>> 	> On Mar 9, 2020, at 3:25 PM, Brian Grossman
>> <grossmab at umich.edu <mailto:grossmab at umich.edu> > wrote:
>> 	>
>> 	> I'm having a problem with launching Rcmdr. When I try to launch it
>> the
>> 	> first time through R using the command library(Rcmdr) it will go
>> through
>> 	> the process of launching and get to the point where it says
>> 	>
>> 	> "Registered S3 methods overwritten by 'lme4':
>> 	>  method                          from
>> 	>  cooks.distance.influence.merMod car
>> 	>  influence.merMod                car
>> 	>  dfbeta.influence.merMod         car
>> 	>  dfbetas.influence.merMod        car
>> 	> lattice theme set by effectsTheme()
>> 	> See ?effectsTheme for details."
>> 	>
>> 	> and then it just hangs there and never launches Rcmdr. If you
>> launch
>> 	> another instance of R and run the same command it will complete
>> and launch
>> 	> Rcmdr successfully. I have tried launching R with R.exe --vanilla with
>> the
>> 	> same results.
>> 	>
>> 	> The system information is Windows 10 version 1903, i5 8500
>> processor, 8GB
>> 	> RAM, 256Gb  SSD. R version 3.6.2 Platform: x86_64-w64-
>> mingw32/x64 (64-bit)
>> 	>
>> 	> Hopefully I haven't left out any important information. Thank you
>> for any
>> 	> suggestions.
>> 	>
>> 	>       [[alternative HTML version deleted]]
>> 	>
>> 	> ______________________________________________
>> 	> R-help at r-project.org <mailto:R-help at r-project.org>  mailing list --
>> To UNSUBSCRIBE and more, see
>> 	> https://stat.ethz.ch/mailman/listinfo/r-help
>> 	> PLEASE do read the posting guide http://www.R-
>> project.org/posting-guide.html
>> 	> and provide commented, minimal, self-contained, reproducible
>> code.
>> 
>> 
>> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From Bernh@rd@P|@|| @end|ng |rom Inve@co@com  Wed Mar 11 14:18:18 2020
From: Bernh@rd@P|@|| @end|ng |rom Inve@co@com (Pfaff, Bernhard Dr.)
Date: Wed, 11 Mar 2020 13:18:18 +0000
Subject: [R] Problem launching Rcmdr
In-Reply-To: <9943308E-BE52-4DE3-8ED5-C0DC060C7FEB@gmail.com>
References: <30331_1583814715_02A4Upjf022824_CACcht+kA59600nxPTUEY6swC0krkOmo2aiZezUhfxwnjwmjV_A@mail.gmail.com>
 <7DCD30FF-8198-4C98-A05D-65308D5ED952@mcmaster.ca>
 <CACcht+kJVr28_ev-GNxZXcZWrvVzKxvNm4cwvmRxX2fTUDPtnQ@mail.gmail.com>
 <ACD1644AA6C67E4FBD0C350625508EC88CD4BB23@FHSDB4H16-2.csu.mcmaster.ca>
 <9943308E-BE52-4DE3-8ED5-C0DC060C7FEB@gmail.com>
Message-ID: <BN8PR03MB46115BE5FD668B041197741783FC0@BN8PR03MB4611.namprd03.prod.outlook.com>

Good catch, Peter; Cylance might be the culprit - at least I encountered problems by compiling C++ sources and/or building packages with interfaced routines and here a memory checker kicked in.
Maybe something akin is happening by launching Rcmdr (tcl/tk)?

-----Urspr?ngliche Nachricht-----
Von: R-help <r-help-bounces at r-project.org> Im Auftrag von Peter Dalgaard
Gesendet: Mittwoch, 11. M?rz 2020 10:29
An: Fox, John <jfox at mcmaster.ca>
Cc: r-help at r-project.org
Betreff: [EXT] Re: [R] Problem launching Rcmdr

Any chance that a virus checker is interfering?

-pd

> On 10 Mar 2020, at 23:43 , Fox, John <jfox at mcmaster.ca> wrote:
> 
> Dear Brian,
> 
> (Please keep r-help in the loop so that if someone else has this 
> problem they'll have something to refer to.)
> 
> Your session at start-up seems completely clean, so I'm at a loss to understand what the problem is. I, and I assume very many other people, are using the Rcmdr with essentially the same Windows setup. What's particularly hard for me to understand is that you're able to start the Rcmdr in a second R session. Does the first R session have to remain open for this to work?
> 
> A next step is to reinstall packages, starting with the Rcmdr package, if you haven't already tried that, and eventually to reinstall R, including deleting the R package library. BTW, I usually prefer to install R in c:\R\ rather than under Program Files so that the system library is used for packages that I subsequently install, although it should work perfectly fine to install packages into a personal library.
> 
> Best,
> John
> 
>> -----Original Message-----
>> From: Brian Grossman <grossmab at umich.edu>
>> Sent: Tuesday, March 10, 2020 5:07 PM
>> To: Fox, John <jfox at mcmaster.ca>
>> Subject: Re: [R] Problem launching Rcmdr
>> 
>> John,
>> 
>> Thanks for the reply. Here is the output from running sessionInfo() 
>> right after opening R.
>> 
>>> sessionInfo()
>> R version 3.6.2 (2019-12-12)
>> Platform: x86_64-w64-mingw32/x64 (64-bit) Running under: Windows 10 
>> x64 (build 18362)
>> 
>> Matrix products: default
>> 
>> locale:
>> [1] LC_COLLATE=English_United States.1252 [2] LC_CTYPE=English_United
>> States.1252 [3] LC_MONETARY=English_United States.1252 [4] 
>> LC_NUMERIC=C [5] LC_TIME=English_United States.1252
>> 
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>> 
>> loaded via a namespace (and not attached):
>> [1] compiler_3.6.2
>> 
>> 
>> Brian
>> 
>> On Tue, Mar 10, 2020 at 8:46 AM Fox, John <jfox at mcmaster.ca 
>> <mailto:jfox at mcmaster.ca> > wrote:
>> 
>> 
>> 	Dear Brian,
>> 
>> 	Normally I'd expect that a workspace saved from a previous session 
>> and loaded at the start of the current session would cause this kind 
>> of anomalous behaviour, but that doesn't explain why the Rcmdr starts 
>> up properly in a second (concurrent?) session, nor why it doesn't 
>> start up properly when R is run with the --vanilla switch.
>> 
>> 	Can you report the result of sessionInfo() at the start of a session?
>> 
>> 	If all else fails, you could try uninstalling and reinstalling R and 
>> packages.
>> 
>> 	Best,
>> 	 John
>> 
>> 	  -----------------------------
>> 	  John Fox, Professor Emeritus
>> 	  McMaster University
>> 	  Hamilton, Ontario, Canada
>> 	  Web: http::/socserv.mcmaster.ca/jfox 
>> <https://urldefense.proofpoint.com/v2/url?u=http-3A__socserv.mcmaster
>> .ca_jfox&d=DwIFAg&c=MWFkEADu9ctt4KEmLIuwsQ&r=OhbxYoJKYsmfC2WjzTKFj7Fw
>> 1qyrbJIFo5BfgVqACaM&m=385Kfv02lZxykzhYHnbjRxxzMBywESQnuptbnhDtfTc&s=a
>> eoHPeyoWEbF1Lq409kfGNS_AauUuCunIr_B_-mNx68&e= >
>> 
>> 	> On Mar 9, 2020, at 3:25 PM, Brian Grossman <grossmab at umich.edu 
>> <mailto:grossmab at umich.edu> > wrote:
>> 	>
>> 	> I'm having a problem with launching Rcmdr. When I try to launch it 
>> the
>> 	> first time through R using the command library(Rcmdr) it will go 
>> through
>> 	> the process of launching and get to the point where it says
>> 	>
>> 	> "Registered S3 methods overwritten by 'lme4':
>> 	>  method                          from
>> 	>  cooks.distance.influence.merMod car
>> 	>  influence.merMod                car
>> 	>  dfbeta.influence.merMod         car
>> 	>  dfbetas.influence.merMod        car
>> 	> lattice theme set by effectsTheme()
>> 	> See ?effectsTheme for details."
>> 	>
>> 	> and then it just hangs there and never launches Rcmdr. If you 
>> launch
>> 	> another instance of R and run the same command it will complete 
>> and launch
>> 	> Rcmdr successfully. I have tried launching R with R.exe --vanilla 
>> with the
>> 	> same results.
>> 	>
>> 	> The system information is Windows 10 version 1903, i5 8500 
>> processor, 8GB
>> 	> RAM, 256Gb  SSD. R version 3.6.2 Platform: x86_64-w64-
>> mingw32/x64 (64-bit)
>> 	>
>> 	> Hopefully I haven't left out any important information. Thank you 
>> for any
>> 	> suggestions.
>> 	>
>> 	>       [[alternative HTML version deleted]]
>> 	>
>> 	> ______________________________________________
>> 	> R-help at r-project.org <mailto:R-help at r-project.org>  mailing list 
>> -- To UNSUBSCRIBE and more, see
>> 	> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwIFAg&c=MWFkEADu9ctt4KEmLIuwsQ&r=OhbxYoJKYsmfC2WjzTKFj7Fw1qyrbJIFo5BfgVqACaM&m=385Kfv02lZxykzhYHnbjRxxzMBywESQnuptbnhDtfTc&s=jg4lofDFaGo2np9e6FoTRGku1mlQurK9XMxANVVp6qA&e= 
>> 	> PLEASE do read the posting guide 
>> https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2D&d=DwIFAg
>> &c=MWFkEADu9ctt4KEmLIuwsQ&r=OhbxYoJKYsmfC2WjzTKFj7Fw1qyrbJIFo5BfgVqAC
>> aM&m=385Kfv02lZxykzhYHnbjRxxzMBywESQnuptbnhDtfTc&s=684atQ5ytYwBnLObmV
>> U4CnU1Ls3V7wVbqgwpW2kbQ-I&e=
>> project.org/posting-guide.html
>> 	> and provide commented, minimal, self-contained, reproducible code.
>> 
>> 
>> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mail
> man_listinfo_r-2Dhelp&d=DwIFAg&c=MWFkEADu9ctt4KEmLIuwsQ&r=OhbxYoJKYsmf
> C2WjzTKFj7Fw1qyrbJIFo5BfgVqACaM&m=385Kfv02lZxykzhYHnbjRxxzMBywESQnuptb
> nhDtfTc&s=jg4lofDFaGo2np9e6FoTRGku1mlQurK9XMxANVVp6qA&e=
> PLEASE do read the posting guide 
> https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.or
> g_posting-2Dguide.html&d=DwIFAg&c=MWFkEADu9ctt4KEmLIuwsQ&r=OhbxYoJKYsm
> fC2WjzTKFj7Fw1qyrbJIFo5BfgVqACaM&m=385Kfv02lZxykzhYHnbjRxxzMBywESQnupt
> bnhDtfTc&s=g85V6DgoZLBte-UoRPs-KcLh7Fpr-qkxxpwVNbMmd9w&e=
> and provide commented, minimal, self-contained, reproducible code.

--
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwIFAg&c=MWFkEADu9ctt4KEmLIuwsQ&r=OhbxYoJKYsmfC2WjzTKFj7Fw1qyrbJIFo5BfgVqACaM&m=385Kfv02lZxykzhYHnbjRxxzMBywESQnuptbnhDtfTc&s=jg4lofDFaGo2np9e6FoTRGku1mlQurK9XMxANVVp6qA&e=
PLEASE do read the posting guide https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwIFAg&c=MWFkEADu9ctt4KEmLIuwsQ&r=OhbxYoJKYsmfC2WjzTKFj7Fw1qyrbJIFo5BfgVqACaM&m=385Kfv02lZxykzhYHnbjRxxzMBywESQnuptbnhDtfTc&s=g85V6DgoZLBte-UoRPs-KcLh7Fpr-qkxxpwVNbMmd9w&e=
and provide commented, minimal, self-contained, reproducible code.

****************************************************************
Confidentiality Note: The information contained in this=...{{dropped:11}}


From re|chm@nj @end|ng |rom @bcg|ob@|@net  Wed Mar 11 15:46:22 2020
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Wed, 11 Mar 2020 09:46:22 -0500
Subject: [R] Installing Packages
References: <001c01d5f7b3$d55a9df0$800fd9d0$.ref@sbcglobal.net>
Message-ID: <001c01d5f7b3$d55a9df0$800fd9d0$@sbcglobal.net>

R-Help

 

Recently I've started receiving the following message when updating packages
- "Do you want to install from sources the packages which need compilation."
I generally click "Yes," but what is this asking me. That is it appears to
be re-compiling certain packages? Why?

 

RStudio version: 1.2.5033

R version: 3.6.3

 

 

Sincerely

 

Jeff Reichman

 


	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Mar 11 15:56:58 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 11 Mar 2020 07:56:58 -0700
Subject: [R] Installing Packages
In-Reply-To: <001c01d5f7b3$d55a9df0$800fd9d0$@sbcglobal.net>
References: <001c01d5f7b3$d55a9df0$800fd9d0$.ref@sbcglobal.net>
 <001c01d5f7b3$d55a9df0$800fd9d0$@sbcglobal.net>
Message-ID: <250D5C00-AE06-4E56-BB79-BA8104A92B03@dcn.davis.ca.us>

Because pre-compiled (binary) versions of packages are getting built slower than the introduction of new versions of the packages are getting approved.

On March 11, 2020 7:46:22 AM PDT, Jeff Reichman <reichmanj at sbcglobal.net> wrote:
>R-Help
>
> 
>
>Recently I've started receiving the following message when updating
>packages
>- "Do you want to install from sources the packages which need
>compilation."
>I generally click "Yes," but what is this asking me. That is it appears
>to
>be re-compiling certain packages? Why?
>
> 
>
>RStudio version: 1.2.5033
>
>R version: 3.6.3
>
> 
>
> 
>
>Sincerely
>
> 
>
>Jeff Reichman
>
> 
>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From @zwj|08 @end|ng |rom gm@||@com  Wed Mar 11 15:59:16 2020
From: @zwj|08 @end|ng |rom gm@||@com (Wang Jiefei)
Date: Wed, 11 Mar 2020 10:59:16 -0400
Subject: [R] Installing Packages
In-Reply-To: <001c01d5f7b3$d55a9df0$800fd9d0$@sbcglobal.net>
References: <001c01d5f7b3$d55a9df0$800fd9d0$.ref@sbcglobal.net>
 <001c01d5f7b3$d55a9df0$800fd9d0$@sbcglobal.net>
Message-ID: <CAGiFhPM-m_g4Ux9wJr64Yz8O=yPdOjBF9vSnOxtZjmGEXw-BAQ@mail.gmail.com>

Hi,

This means that the package you were trying to install does not have a
compiled version stored on the server. Sometimes you would not see the
question because the server has compiled the package for you, but sometimes
it doesn't.

Cheers,
Jiefei



On Wed, Mar 11, 2020 at 10:46 AM Jeff Reichman <reichmanj at sbcglobal.net>
wrote:

> R-Help
>
>
>
> Recently I've started receiving the following message when updating
> packages
> - "Do you want to install from sources the packages which need
> compilation."
> I generally click "Yes," but what is this asking me. That is it appears to
> be re-compiling certain packages? Why?
>
>
>
> RStudio version: 1.2.5033
>
> R version: 3.6.3
>
>
>
>
>
> Sincerely
>
>
>
> Jeff Reichman
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Mar 11 16:10:25 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 11 Mar 2020 08:10:25 -0700
Subject: [R] Installing Packages
In-Reply-To: <001c01d5f7b3$d55a9df0$800fd9d0$@sbcglobal.net>
References: <001c01d5f7b3$d55a9df0$800fd9d0$.ref@sbcglobal.net>
 <001c01d5f7b3$d55a9df0$800fd9d0$@sbcglobal.net>
Message-ID: <6aaf8e34-7694-0008-869d-900ed5c249b5@gmail.com>

On 11/03/2020 7:46 a.m., Jeff Reichman wrote:
> R-Help
> 
>   
> 
> Recently I've started receiving the following message when updating packages
> - "Do you want to install from sources the packages which need compilation."
> I generally click "Yes," but what is this asking me. That is it appears to
> be re-compiling certain packages? Why?
> 

As the others answered:  that's because compiled versions aren't 
available on the server yet.

What they didn't say is why you might want to say "no".  You would say 
that if you expect the compile on your own system to fail, perhaps 
because you don't have compilers or special libraries installed.  R can 
install packages whose source is all in R, but needs external tools to 
install packages that incorporate other languages like C, C++ and 
Fortran.  Even if you have those compilers, some packages will need to 
link to libraries outside of R.

If you say "no", then R will look for an older compiled version of the 
package and install that.  This might cause trouble if some other 
package depends on the latest version of its dependencies:  you won't be 
able to install the latest version of that package either.

I'd recommend trying with "yes", then trying again with "no" if there 
were any install failures.

Duncan Murdoch


From j|ox @end|ng |rom mcm@@ter@c@  Wed Mar 11 18:02:12 2020
From: j|ox @end|ng |rom mcm@@ter@c@ (Fox, John)
Date: Wed, 11 Mar 2020 17:02:12 +0000
Subject: [R] Problem launching Rcmdr
In-Reply-To: <BN8PR03MB46115BE5FD668B041197741783FC0@BN8PR03MB4611.namprd03.prod.outlook.com>
References: <30331_1583814715_02A4Upjf022824_CACcht+kA59600nxPTUEY6swC0krkOmo2aiZezUhfxwnjwmjV_A@mail.gmail.com>
 <7DCD30FF-8198-4C98-A05D-65308D5ED952@mcmaster.ca>
 <CACcht+kJVr28_ev-GNxZXcZWrvVzKxvNm4cwvmRxX2fTUDPtnQ@mail.gmail.com>
 <ACD1644AA6C67E4FBD0C350625508EC88CD4BB23@FHSDB4H16-2.csu.mcmaster.ca>
 <9943308E-BE52-4DE3-8ED5-C0DC060C7FEB@gmail.com>
 <BN8PR03MB46115BE5FD668B041197741783FC0@BN8PR03MB4611.namprd03.prod.outlook.com>
Message-ID: <ACD1644AA6C67E4FBD0C350625508EC88CD4E720@FHSDB4H16-2.csu.mcmaster.ca>

Dear Bernhard, Peter, and Brian,

Thanks, Peter, for the suggestion. If you're right then the problem is with tcltk more generally and not directly with the Rcmdr package.

Brian: That's easily checked and might clarify what's going on: Load the tcltk package via library(tcltk), and then try the following example from ?TkWidgetcmds:

------------ snip --------------

tt <- tktoplevel()
tkpack(txt.w <- tktext(tt))
tkinsert(txt.w, "0.0", "plot(1:10)")
eval.txt <- function()
   eval(parse(text = tclvalue(tkget(txt.w, "0.0", "end"))))
tkpack(but.w <- tkbutton(tt, text = "Submit", command = eval.txt))

## Try pressing the button, edit the text and when finished:

tkdestroy(tt)

------------ snip --------------

Best,
 John


> -----Original Message-----
> From: Pfaff, Bernhard Dr. <Bernhard.Pfaff at Invesco.com>
> Sent: Wednesday, March 11, 2020 9:18 AM
> To: Peter Dalgaard <pdalgd at gmail.com>; Fox, John <jfox at mcmaster.ca>
> Cc: r-help at r-project.org
> Subject: AW: Re: [R] Problem launching Rcmdr
> 
> Good catch, Peter; Cylance might be the culprit - at least I encountered
> problems by compiling C++ sources and/or building packages with interfaced
> routines and here a memory checker kicked in.
> Maybe something akin is happening by launching Rcmdr (tcl/tk)?
> 
> -----Urspr?ngliche Nachricht-----
> Von: R-help <r-help-bounces at r-project.org> Im Auftrag von Peter Dalgaard
> Gesendet: Mittwoch, 11. M?rz 2020 10:29
> An: Fox, John <jfox at mcmaster.ca>
> Cc: r-help at r-project.org
> Betreff: [EXT] Re: [R] Problem launching Rcmdr
> 
> Any chance that a virus checker is interfering?
> 
> -pd
> 
> > On 10 Mar 2020, at 23:43 , Fox, John <jfox at mcmaster.ca> wrote:
> >
> > Dear Brian,
> >
> > (Please keep r-help in the loop so that if someone else has this
> > problem they'll have something to refer to.)
> >
> > Your session at start-up seems completely clean, so I'm at a loss to
> understand what the problem is. I, and I assume very many other people,
> are using the Rcmdr with essentially the same Windows setup. What's
> particularly hard for me to understand is that you're able to start the Rcmdr in
> a second R session. Does the first R session have to remain open for this to
> work?
> >
> > A next step is to reinstall packages, starting with the Rcmdr package, if you
> haven't already tried that, and eventually to reinstall R, including deleting the
> R package library. BTW, I usually prefer to install R in c:\R\ rather than under
> Program Files so that the system library is used for packages that I
> subsequently install, although it should work perfectly fine to install packages
> into a personal library.
> >
> > Best,
> > John
> >
> >> -----Original Message-----
> >> From: Brian Grossman <grossmab at umich.edu>
> >> Sent: Tuesday, March 10, 2020 5:07 PM
> >> To: Fox, John <jfox at mcmaster.ca>
> >> Subject: Re: [R] Problem launching Rcmdr
> >>
> >> John,
> >>
> >> Thanks for the reply. Here is the output from running sessionInfo()
> >> right after opening R.
> >>
> >>> sessionInfo()
> >> R version 3.6.2 (2019-12-12)
> >> Platform: x86_64-w64-mingw32/x64 (64-bit) Running under: Windows 10
> >> x64 (build 18362)
> >>
> >> Matrix products: default
> >>
> >> locale:
> >> [1] LC_COLLATE=English_United States.1252 [2] LC_CTYPE=English_United
> >> States.1252 [3] LC_MONETARY=English_United States.1252 [4]
> >> LC_NUMERIC=C [5] LC_TIME=English_United States.1252
> >>
> >> attached base packages:
> >> [1] stats     graphics  grDevices utils     datasets  methods   base
> >>
> >> loaded via a namespace (and not attached):
> >> [1] compiler_3.6.2
> >>
> >>
> >> Brian
> >>
> >> On Tue, Mar 10, 2020 at 8:46 AM Fox, John <jfox at mcmaster.ca
> >> <mailto:jfox at mcmaster.ca> > wrote:
> >>
> >>
> >> 	Dear Brian,
> >>
> >> 	Normally I'd expect that a workspace saved from a previous session
> >> and loaded at the start of the current session would cause this kind
> >> of anomalous behaviour, but that doesn't explain why the Rcmdr starts
> >> up properly in a second (concurrent?) session, nor why it doesn't
> >> start up properly when R is run with the --vanilla switch.
> >>
> >> 	Can you report the result of sessionInfo() at the start of a session?
> >>
> >> 	If all else fails, you could try uninstalling and reinstalling R and
> >> packages.
> >>
> >> 	Best,
> >> 	 John
> >>
> >> 	  -----------------------------
> >> 	  John Fox, Professor Emeritus
> >> 	  McMaster University
> >> 	  Hamilton, Ontario, Canada
> >> 	  Web: http::/socserv.mcmaster.ca/jfox
> >> <https://urldefense.proofpoint.com/v2/url?u=http-
> 3A__socserv.mcmaster
> >>
> .ca_jfox&d=DwIFAg&c=MWFkEADu9ctt4KEmLIuwsQ&r=OhbxYoJKYsmfC2Wj
> zTKFj7Fw
> >>
> 1qyrbJIFo5BfgVqACaM&m=385Kfv02lZxykzhYHnbjRxxzMBywESQnuptbnhDtf
> Tc&s=a
> >> eoHPeyoWEbF1Lq409kfGNS_AauUuCunIr_B_-mNx68&e= >
> >>
> >> 	> On Mar 9, 2020, at 3:25 PM, Brian Grossman
> <grossmab at umich.edu
> >> <mailto:grossmab at umich.edu> > wrote:
> >> 	>
> >> 	> I'm having a problem with launching Rcmdr. When I try to launch it
> >> the
> >> 	> first time through R using the command library(Rcmdr) it will go
> >> through
> >> 	> the process of launching and get to the point where it says
> >> 	>
> >> 	> "Registered S3 methods overwritten by 'lme4':
> >> 	>  method                          from
> >> 	>  cooks.distance.influence.merMod car
> >> 	>  influence.merMod                car
> >> 	>  dfbeta.influence.merMod         car
> >> 	>  dfbetas.influence.merMod        car
> >> 	> lattice theme set by effectsTheme()
> >> 	> See ?effectsTheme for details."
> >> 	>
> >> 	> and then it just hangs there and never launches Rcmdr. If you
> >> launch
> >> 	> another instance of R and run the same command it will complete
> >> and launch
> >> 	> Rcmdr successfully. I have tried launching R with R.exe --vanilla
> >> with the
> >> 	> same results.
> >> 	>
> >> 	> The system information is Windows 10 version 1903, i5 8500
> >> processor, 8GB
> >> 	> RAM, 256Gb  SSD. R version 3.6.2 Platform: x86_64-w64-
> >> mingw32/x64 (64-bit)
> >> 	>
> >> 	> Hopefully I haven't left out any important information. Thank you
> >> for any
> >> 	> suggestions.
> >> 	>
> >> 	>       [[alternative HTML version deleted]]
> >> 	>
> >> 	> ______________________________________________
> >> 	> R-help at r-project.org <mailto:R-help at r-project.org>  mailing list
> >> -- To UNSUBSCRIBE and more, see
> >> 	> https://urldefense.proofpoint.com/v2/url?u=https-
> 3A__stat.ethz.ch_mailman_listinfo_r-
> 2Dhelp&d=DwIFAg&c=MWFkEADu9ctt4KEmLIuwsQ&r=OhbxYoJKYsmfC2Wjz
> TKFj7Fw1qyrbJIFo5BfgVqACaM&m=385Kfv02lZxykzhYHnbjRxxzMBywESQnu
> ptbnhDtfTc&s=jg4lofDFaGo2np9e6FoTRGku1mlQurK9XMxANVVp6qA&e=
> >> 	> PLEASE do read the posting guide
> >> https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-
> 2D&d=DwIFAg
> >>
> &c=MWFkEADu9ctt4KEmLIuwsQ&r=OhbxYoJKYsmfC2WjzTKFj7Fw1qyrbJIFo5
> BfgVqAC
> >>
> aM&m=385Kfv02lZxykzhYHnbjRxxzMBywESQnuptbnhDtfTc&s=684atQ5ytYw
> BnLObmV
> >> U4CnU1Ls3V7wVbqgwpW2kbQ-I&e=
> >> project.org/posting-guide.html
> >> 	> and provide commented, minimal, self-contained, reproducible
> code.
> >>
> >>
> >>
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mail
> > man_listinfo_r-
> 2Dhelp&d=DwIFAg&c=MWFkEADu9ctt4KEmLIuwsQ&r=OhbxYoJKYsmf
> >
> C2WjzTKFj7Fw1qyrbJIFo5BfgVqACaM&m=385Kfv02lZxykzhYHnbjRxxzMBywE
> SQnuptb
> > nhDtfTc&s=jg4lofDFaGo2np9e6FoTRGku1mlQurK9XMxANVVp6qA&e=
> > PLEASE do read the posting guide
> > https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-
> 2Dproject.or
> > g_posting-
> 2Dguide.html&d=DwIFAg&c=MWFkEADu9ctt4KEmLIuwsQ&r=OhbxYoJKYsm
> >
> fC2WjzTKFj7Fw1qyrbJIFo5BfgVqACaM&m=385Kfv02lZxykzhYHnbjRxxzMByw
> ESQnupt
> > bnhDtfTc&s=g85V6DgoZLBte-UoRPs-KcLh7Fpr-qkxxpwVNbMmd9w&e=
> > and provide commented, minimal, self-contained, reproducible code.
> 
> --
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School Solbjerg Plads 3, 2000
> Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://urldefense.proofpoint.com/v2/url?u=https-
> 3A__stat.ethz.ch_mailman_listinfo_r-
> 2Dhelp&d=DwIFAg&c=MWFkEADu9ctt4KEmLIuwsQ&r=OhbxYoJKYsmfC2Wjz
> TKFj7Fw1qyrbJIFo5BfgVqACaM&m=385Kfv02lZxykzhYHnbjRxxzMBywESQnu
> ptbnhDtfTc&s=jg4lofDFaGo2np9e6FoTRGku1mlQurK9XMxANVVp6qA&e=
> PLEASE do read the posting guide
> https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-
> 2Dproject.org_posting-
> 2Dguide.html&d=DwIFAg&c=MWFkEADu9ctt4KEmLIuwsQ&r=OhbxYoJKYsmf
> C2WjzTKFj7Fw1qyrbJIFo5BfgVqACaM&m=385Kfv02lZxykzhYHnbjRxxzMBywE
> SQnuptbnhDtfTc&s=g85V6DgoZLBte-UoRPs-KcLh7Fpr-
> qkxxpwVNbMmd9w&e=
> and provide commented, minimal, self-contained, reproducible code.
> 
> **********************************************************
> ******
> Confidentiality Note: The information contained in this message, and any
> attachments, may contain confidential and/or privileged material.  It is
> intended solely for the
> person(s) or entity to which it is addressed.  Any review, retransmission,
> dissemination, or taking of any action in reliance upon this information by
> persons or entities other than the intended recipient(s) is prohibited.  If you
> received this in error, please contact the sender and delete the material from
> any device.
> **********************************************************
> ******


From @purd|e@@ @end|ng |rom gm@||@com  Wed Mar 11 21:08:31 2020
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Thu, 12 Mar 2020 09:08:31 +1300
Subject: [R] power for repeated measures ANCOVA
In-Reply-To: <BY5PR11MB419494AE5F77E830B07AE2D7CFFF0@BY5PR11MB4194.namprd11.prod.outlook.com>
References: <BY5PR11MB419494AE5F77E830B07AE2D7CFFF0@BY5PR11MB4194.namprd11.prod.outlook.com>
Message-ID: <CAB8pepzCMXY01065ATD=risyDYsMyqz6N2vAqbvxtez4k+SV_w@mail.gmail.com>

I don't know the answer to your question.
But I was wondering if "repeated measures ANCOVA" could fall under other
headings?

If you search for <power analysis <xxxx> R>, substituting <xxxx>, maybe
you'll get lucky.

On Wed, Mar 11, 2020 at 6:42 AM Debbie Hahs-Vaughn <
Debbie.Hahs-Vaughn at ucf.edu> wrote:

> Is anyone aware of an R package for computing power analysis with repeated
> measures ANCOVA? I realize this message was posted many years ago so am
> wondering if something is now available.
>
> <mailto:debbie.hahs-vaughn at ucf.edu>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @purd|e@@ @end|ng |rom gm@||@com  Thu Mar 12 01:36:59 2020
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Thu, 12 Mar 2020 13:36:59 +1300
Subject: [R] how do I add text lables on QQ plot
In-Reply-To: <CAF9-5jMMFM3fA7sbyv4yNrfyF1Da7vw8RD2jcfTWOMT6Lfgi4A@mail.gmail.com>
References: <CAF9-5jMMFM3fA7sbyv4yNrfyF1Da7vw8RD2jcfTWOMT6Lfgi4A@mail.gmail.com>
Message-ID: <CAB8pepya2sv0FiupVQeLmkJx_J7+V3oa12spqYeV9O_KA9ub-A@mail.gmail.com>

> and I would like to get the plot like the one in attach.
> Please advise,

This is a bad idea.
Plots should be *easy* to interpret.

Try to keep plots relatively simple, avoiding unnecessary details.
For nontrivial plots, use a caption to describe the main features of the plot.
(That's where your text should go).

I note that you've asked a number of questions about QQ plots.
I'd recommend that you use QQ plots in a standard way, without
frequently trying to modify/customize them.


From @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com  Thu Mar 12 01:48:16 2020
From: @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com (Ana Marija)
Date: Wed, 11 Mar 2020 19:48:16 -0500
Subject: [R] how do I add text lables on QQ plot
In-Reply-To: <CAB8pepya2sv0FiupVQeLmkJx_J7+V3oa12spqYeV9O_KA9ub-A@mail.gmail.com>
References: <CAF9-5jMMFM3fA7sbyv4yNrfyF1Da7vw8RD2jcfTWOMT6Lfgi4A@mail.gmail.com>
 <CAB8pepya2sv0FiupVQeLmkJx_J7+V3oa12spqYeV9O_KA9ub-A@mail.gmail.com>
Message-ID: <CAF9-5jOfYv2dnwm6OKEgYhwQq-spg6VU9H19HihLaAkeLWCyOA@mail.gmail.com>

Thanks for getting back to me but I would need this text labels added in
this particular instance

On Wed, 11 Mar 2020 at 19:37, Abby Spurdle <spurdle.a at gmail.com> wrote:

> > and I would like to get the plot like the one in attach.
> > Please advise,
>
> This is a bad idea.
> Plots should be *easy* to interpret.
>
> Try to keep plots relatively simple, avoiding unnecessary details.
> For nontrivial plots, use a caption to describe the main features of the
> plot.
> (That's where your text should go).
>
> I note that you've asked a number of questions about QQ plots.
> I'd recommend that you use QQ plots in a standard way, without
> frequently trying to modify/customize them.
>

	[[alternative HTML version deleted]]


From @purd|e@@ @end|ng |rom gm@||@com  Thu Mar 12 01:59:31 2020
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Thu, 12 Mar 2020 13:59:31 +1300
Subject: [R] how do I add text lables on QQ plot
In-Reply-To: <CAF9-5jOfYv2dnwm6OKEgYhwQq-spg6VU9H19HihLaAkeLWCyOA@mail.gmail.com>
References: <CAF9-5jMMFM3fA7sbyv4yNrfyF1Da7vw8RD2jcfTWOMT6Lfgi4A@mail.gmail.com>
 <CAB8pepya2sv0FiupVQeLmkJx_J7+V3oa12spqYeV9O_KA9ub-A@mail.gmail.com>
 <CAF9-5jOfYv2dnwm6OKEgYhwQq-spg6VU9H19HihLaAkeLWCyOA@mail.gmail.com>
Message-ID: <CAB8pepzAEKMemM_9AqoyUdAGJ5G2cMrLpAeYD0zJ9R2U2zPFWw@mail.gmail.com>

Ok, then.

What graphics system is the qq function using?
Assuming that it's using the base graphics system, look at the
graphics::text function.

text (1:10, 1:10, LETTERS [1:10])

If it's a different graphics system, then I don't know, but hopefully
someone else will help.

On Thu, Mar 12, 2020 at 1:48 PM Ana Marija <sokovic.anamarija at gmail.com> wrote:
>
> Thanks for getting back to me but I would need this text labels added in this particular instance
>
> On Wed, 11 Mar 2020 at 19:37, Abby Spurdle <spurdle.a at gmail.com> wrote:
>>
>> > and I would like to get the plot like the one in attach.
>> > Please advise,
>>
>> This is a bad idea.
>> Plots should be *easy* to interpret.
>>
>> Try to keep plots relatively simple, avoiding unnecessary details.
>> For nontrivial plots, use a caption to describe the main features of the plot.
>> (That's where your text should go).
>>
>> I note that you've asked a number of questions about QQ plots.
>> I'd recommend that you use QQ plots in a standard way, without
>> frequently trying to modify/customize them.


From @purd|e@@ @end|ng |rom gm@||@com  Thu Mar 12 02:14:11 2020
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Thu, 12 Mar 2020 14:14:11 +1300
Subject: [R] how do I add text lables on QQ plot
In-Reply-To: <CAB8pepzAEKMemM_9AqoyUdAGJ5G2cMrLpAeYD0zJ9R2U2zPFWw@mail.gmail.com>
References: <CAF9-5jMMFM3fA7sbyv4yNrfyF1Da7vw8RD2jcfTWOMT6Lfgi4A@mail.gmail.com>
 <CAB8pepya2sv0FiupVQeLmkJx_J7+V3oa12spqYeV9O_KA9ub-A@mail.gmail.com>
 <CAF9-5jOfYv2dnwm6OKEgYhwQq-spg6VU9H19HihLaAkeLWCyOA@mail.gmail.com>
 <CAB8pepzAEKMemM_9AqoyUdAGJ5G2cMrLpAeYD0zJ9R2U2zPFWw@mail.gmail.com>
Message-ID: <CAB8pepwcYSRr2F9CSAdTXXOdNsfisJd+V=1czcxP3hwVitiuGQ@mail.gmail.com>

One more thing, I can't find a CRAN package named "ggman".

On Thu, Mar 12, 2020 at 1:59 PM Abby Spurdle <spurdle.a at gmail.com> wrote:
>
> Ok, then.
>
> What graphics system is the qq function using?
> Assuming that it's using the base graphics system, look at the
> graphics::text function.
>
> text (1:10, 1:10, LETTERS [1:10])
>
> If it's a different graphics system, then I don't know, but hopefully
> someone else will help.
>
> On Thu, Mar 12, 2020 at 1:48 PM Ana Marija <sokovic.anamarija at gmail.com> wrote:
> >
> > Thanks for getting back to me but I would need this text labels added in this particular instance
> >
> > On Wed, 11 Mar 2020 at 19:37, Abby Spurdle <spurdle.a at gmail.com> wrote:
> >>
> >> > and I would like to get the plot like the one in attach.
> >> > Please advise,
> >>
> >> This is a bad idea.
> >> Plots should be *easy* to interpret.
> >>
> >> Try to keep plots relatively simple, avoiding unnecessary details.
> >> For nontrivial plots, use a caption to describe the main features of the plot.
> >> (That's where your text should go).
> >>
> >> I note that you've asked a number of questions about QQ plots.
> >> I'd recommend that you use QQ plots in a standard way, without
> >> frequently trying to modify/customize them.


From jrkr|de@u @end|ng |rom gm@||@com  Thu Mar 12 02:28:03 2020
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Wed, 11 Mar 2020 21:28:03 -0400
Subject: [R] how do I add text lables on QQ plot
In-Reply-To: <CAB8pepwcYSRr2F9CSAdTXXOdNsfisJd+V=1czcxP3hwVitiuGQ@mail.gmail.com>
References: <CAF9-5jMMFM3fA7sbyv4yNrfyF1Da7vw8RD2jcfTWOMT6Lfgi4A@mail.gmail.com>
 <CAB8pepya2sv0FiupVQeLmkJx_J7+V3oa12spqYeV9O_KA9ub-A@mail.gmail.com>
 <CAF9-5jOfYv2dnwm6OKEgYhwQq-spg6VU9H19HihLaAkeLWCyOA@mail.gmail.com>
 <CAB8pepzAEKMemM_9AqoyUdAGJ5G2cMrLpAeYD0zJ9R2U2zPFWw@mail.gmail.com>
 <CAB8pepwcYSRr2F9CSAdTXXOdNsfisJd+V=1czcxP3hwVitiuGQ@mail.gmail.com>
Message-ID: <CAKZQJMCkHgDUu5QjT98Ujv1cLQ9qeYbALn1BjZvXfGMq3mVDVA@mail.gmail.com>

No idua how it works but the name suggests it in out of the Hadley universe
and not basic graphics.

On Wed, 11 Mar 2020 at 21:14, Abby Spurdle <spurdle.a at gmail.com> wrote:

> One more thing, I can't find a CRAN package named "ggman".
>
> On Thu, Mar 12, 2020 at 1:59 PM Abby Spurdle <spurdle.a at gmail.com> wrote:
> >
> > Ok, then.
> >
> > What graphics system is the qq function using?
> > Assuming that it's using the base graphics system, look at the
> > graphics::text function.
> >
> > text (1:10, 1:10, LETTERS [1:10])
> >
> > If it's a different graphics system, then I don't know, but hopefully
> > someone else will help.
> >
> > On Thu, Mar 12, 2020 at 1:48 PM Ana Marija <sokovic.anamarija at gmail.com>
> wrote:
> > >
> > > Thanks for getting back to me but I would need this text labels added
> in this particular instance
> > >
> > > On Wed, 11 Mar 2020 at 19:37, Abby Spurdle <spurdle.a at gmail.com>
> wrote:
> > >>
> > >> > and I would like to get the plot like the one in attach.
> > >> > Please advise,
> > >>
> > >> This is a bad idea.
> > >> Plots should be *easy* to interpret.
> > >>
> > >> Try to keep plots relatively simple, avoiding unnecessary details.
> > >> For nontrivial plots, use a caption to describe the main features of
> the plot.
> > >> (That's where your text should go).
> > >>
> > >> I note that you've asked a number of questions about QQ plots.
> > >> I'd recommend that you use QQ plots in a standard way, without
> > >> frequently trying to modify/customize them.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
John Kane
Kingston ON Canada

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Thu Mar 12 03:18:16 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 11 Mar 2020 19:18:16 -0700
Subject: [R] power for repeated measures ANCOVA
In-Reply-To: <CAB8pepzCMXY01065ATD=risyDYsMyqz6N2vAqbvxtez4k+SV_w@mail.gmail.com>
References: <BY5PR11MB419494AE5F77E830B07AE2D7CFFF0@BY5PR11MB4194.namprd11.prod.outlook.com>
 <CAB8pepzCMXY01065ATD=risyDYsMyqz6N2vAqbvxtez4k+SV_w@mail.gmail.com>
Message-ID: <CAGxFJbRQrb0yfQ0FdFvHjX294i6PqSUU+cFw1mdHFiKbObDXpw@mail.gmail.com>

You should probably post this on a statistics site like
stats.stackexchange.com. I suspect the answer is something like "are you
serious?!," because I presume any such analysis would have to specify a
complex VCOV matrix with many parameters that would have to be pulled more
or less out of thin air. In other words, a fantasy. But don't take my word
for it -- knowledgeable people at a stats site would be far more reliable.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Mar 11, 2020 at 1:09 PM Abby Spurdle <spurdle.a at gmail.com> wrote:

> I don't know the answer to your question.
> But I was wondering if "repeated measures ANCOVA" could fall under other
> headings?
>
> If you search for <power analysis <xxxx> R>, substituting <xxxx>, maybe
> you'll get lucky.
>
> On Wed, Mar 11, 2020 at 6:42 AM Debbie Hahs-Vaughn <
> Debbie.Hahs-Vaughn at ucf.edu> wrote:
>
> > Is anyone aware of an R package for computing power analysis with
> repeated
> > measures ANCOVA? I realize this message was posted many years ago so am
> > wondering if something is now available.
> >
> > <mailto:debbie.hahs-vaughn at ucf.edu>
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From j|ox @end|ng |rom mcm@@ter@c@  Thu Mar 12 04:03:42 2020
From: j|ox @end|ng |rom mcm@@ter@c@ (Fox, John)
Date: Thu, 12 Mar 2020 03:03:42 +0000
Subject: [R] Problem launching Rcmdr
In-Reply-To: <CACcht+=L275-t2qm8GE6z2Ok4UV+NqvMArwBdGygXxNN6fJsyQ@mail.gmail.com>
References: <30331_1583814715_02A4Upjf022824_CACcht+kA59600nxPTUEY6swC0krkOmo2aiZezUhfxwnjwmjV_A@mail.gmail.com>
 <7DCD30FF-8198-4C98-A05D-65308D5ED952@mcmaster.ca>
 <CACcht+kJVr28_ev-GNxZXcZWrvVzKxvNm4cwvmRxX2fTUDPtnQ@mail.gmail.com>
 <ACD1644AA6C67E4FBD0C350625508EC88CD4BB23@FHSDB4H16-2.csu.mcmaster.ca>
 <9943308E-BE52-4DE3-8ED5-C0DC060C7FEB@gmail.com>
 <BN8PR03MB46115BE5FD668B041197741783FC0@BN8PR03MB4611.namprd03.prod.outlook.com>
 <ACD1644AA6C67E4FBD0C350625508EC88CD4E720@FHSDB4H16-2.csu.mcmaster.ca>
 <CACcht+=L275-t2qm8GE6z2Ok4UV+NqvMArwBdGygXxNN6fJsyQ@mail.gmail.com>
Message-ID: <893956B6-E43E-4668-8DA4-3877C8974BE9@mcmaster.ca>

Dear Brian,

I'm afraid that I have no idea about what's going on, particularly why your second attempt to start the Rcmdr works, whether after a first attempt, or now after using tcltk. 

Did you follow up on Peter's suggestion that your antivirus software may be the source of the problem?

Best,
 John

> On Mar 11, 2020, at 4:42 PM, Brian Grossman <grossmab at umich.edu> wrote:
> 
> I did some testing and was able to run the tcltk commands without any problems. It brought up the graph normally when I hit the submit button and when I changed the values and hit submit it would change the graph accordingly.The interesting thing is that after the tkdestroy(tt) command I tried running library(Rcmdr) and it launched successfully. I'm not sure what that means, but hopefully someone else will.
> 
> Thank you,
> 
> Brian
> 
> On Wed, Mar 11, 2020 at 1:02 PM Fox, John <jfox at mcmaster.ca> wrote:
> Dear Bernhard, Peter, and Brian,
> 
> Thanks, Peter, for the suggestion. If you're right then the problem is with tcltk more generally and not directly with the Rcmdr package.
> 
> Brian: That's easily checked and might clarify what's going on: Load the tcltk package via library(tcltk), and then try the following example from ?TkWidgetcmds:
> 
> ------------ snip --------------
> 
> tt <- tktoplevel()
> tkpack(txt.w <- tktext(tt))
> tkinsert(txt.w, "0.0", "plot(1:10)")
> eval.txt <- function()
>    eval(parse(text = tclvalue(tkget(txt.w, "0.0", "end"))))
> tkpack(but.w <- tkbutton(tt, text = "Submit", command = eval.txt))
> 
> ## Try pressing the button, edit the text and when finished:
> 
> tkdestroy(tt)
> 
> ------------ snip --------------
> 
> Best,
>  John
> 
> 
> > -----Original Message-----
> > From: Pfaff, Bernhard Dr. <Bernhard.Pfaff at Invesco.com>
> > Sent: Wednesday, March 11, 2020 9:18 AM
> > To: Peter Dalgaard <pdalgd at gmail.com>; Fox, John <jfox at mcmaster.ca>
> > Cc: r-help at r-project.org
> > Subject: AW: Re: [R] Problem launching Rcmdr
> > 
> > Good catch, Peter; Cylance might be the culprit - at least I encountered
> > problems by compiling C++ sources and/or building packages with interfaced
> > routines and here a memory checker kicked in.
> > Maybe something akin is happening by launching Rcmdr (tcl/tk)?
> > 
> > -----Urspr?ngliche Nachricht-----
> > Von: R-help <r-help-bounces at r-project.org> Im Auftrag von Peter Dalgaard
> > Gesendet: Mittwoch, 11. M?rz 2020 10:29
> > An: Fox, John <jfox at mcmaster.ca>
> > Cc: r-help at r-project.org
> > Betreff: [EXT] Re: [R] Problem launching Rcmdr
> > 
> > Any chance that a virus checker is interfering?
> > 
> > -pd
> > 
> > > On 10 Mar 2020, at 23:43 , Fox, John <jfox at mcmaster.ca> wrote:
> > >
> > > Dear Brian,
> > >
> > > (Please keep r-help in the loop so that if someone else has this
> > > problem they'll have something to refer to.)
> > >
> > > Your session at start-up seems completely clean, so I'm at a loss to
> > understand what the problem is. I, and I assume very many other people,
> > are using the Rcmdr with essentially the same Windows setup. What's
> > particularly hard for me to understand is that you're able to start the Rcmdr in
> > a second R session. Does the first R session have to remain open for this to
> > work?
> > >
> > > A next step is to reinstall packages, starting with the Rcmdr package, if you
> > haven't already tried that, and eventually to reinstall R, including deleting the
> > R package library. BTW, I usually prefer to install R in c:\R\ rather than under
> > Program Files so that the system library is used for packages that I
> > subsequently install, although it should work perfectly fine to install packages
> > into a personal library.
> > >
> > > Best,
> > > John
> > >
> > >> -----Original Message-----
> > >> From: Brian Grossman <grossmab at umich.edu>
> > >> Sent: Tuesday, March 10, 2020 5:07 PM
> > >> To: Fox, John <jfox at mcmaster.ca>
> > >> Subject: Re: [R] Problem launching Rcmdr
> > >>
> > >> John,
> > >>
> > >> Thanks for the reply. Here is the output from running sessionInfo()
> > >> right after opening R.
> > >>
> > >>> sessionInfo()
> > >> R version 3.6.2 (2019-12-12)
> > >> Platform: x86_64-w64-mingw32/x64 (64-bit) Running under: Windows 10
> > >> x64 (build 18362)
> > >>
> > >> Matrix products: default
> > >>
> > >> locale:
> > >> [1] LC_COLLATE=English_United States.1252 [2] LC_CTYPE=English_United
> > >> States.1252 [3] LC_MONETARY=English_United States.1252 [4]
> > >> LC_NUMERIC=C [5] LC_TIME=English_United States.1252
> > >>
> > >> attached base packages:
> > >> [1] stats     graphics  grDevices utils     datasets  methods   base
> > >>
> > >> loaded via a namespace (and not attached):
> > >> [1] compiler_3.6.2
> > >>
> > >>
> > >> Brian
> > >>
> > >> On Tue, Mar 10, 2020 at 8:46 AM Fox, John <jfox at mcmaster.ca
> > >> <mailto:jfox at mcmaster.ca> > wrote:
> > >>
> > >>
> > >>    Dear Brian,
> > >>
> > >>    Normally I'd expect that a workspace saved from a previous session
> > >> and loaded at the start of the current session would cause this kind
> > >> of anomalous behaviour, but that doesn't explain why the Rcmdr starts
> > >> up properly in a second (concurrent?) session, nor why it doesn't
> > >> start up properly when R is run with the --vanilla switch.
> > >>
> > >>    Can you report the result of sessionInfo() at the start of a session?
> > >>
> > >>    If all else fails, you could try uninstalling and reinstalling R and
> > >> packages.
> > >>
> > >>    Best,
> > >>     John
> > >>
> > >>      -----------------------------
> > >>      John Fox, Professor Emeritus
> > >>      McMaster University
> > >>      Hamilton, Ontario, Canada
> > >>      Web: http::/socserv.mcmaster.ca/jfox
> > >> <https://urldefense.proofpoint.com/v2/url?u=http-
> > 3A__socserv.mcmaster
> > >>
> > .ca_jfox&d=DwIFAg&c=MWFkEADu9ctt4KEmLIuwsQ&r=OhbxYoJKYsmfC2Wj
> > zTKFj7Fw
> > >>
> > 1qyrbJIFo5BfgVqACaM&m=385Kfv02lZxykzhYHnbjRxxzMBywESQnuptbnhDtf
> > Tc&s=a
> > >> eoHPeyoWEbF1Lq409kfGNS_AauUuCunIr_B_-mNx68&e= >
> > >>
> > >>    > On Mar 9, 2020, at 3:25 PM, Brian Grossman
> > <grossmab at umich.edu
> > >> <mailto:grossmab at umich.edu> > wrote:
> > >>    >
> > >>    > I'm having a problem with launching Rcmdr. When I try to launch it
> > >> the
> > >>    > first time through R using the command library(Rcmdr) it will go
> > >> through
> > >>    > the process of launching and get to the point where it says
> > >>    >
> > >>    > "Registered S3 methods overwritten by 'lme4':
> > >>    >  method                          from
> > >>    >  cooks.distance.influence.merMod car
> > >>    >  influence.merMod                car
> > >>    >  dfbeta.influence.merMod         car
> > >>    >  dfbetas.influence.merMod        car
> > >>    > lattice theme set by effectsTheme()
> > >>    > See ?effectsTheme for details."
> > >>    >
> > >>    > and then it just hangs there and never launches Rcmdr. If you
> > >> launch
> > >>    > another instance of R and run the same command it will complete
> > >> and launch
> > >>    > Rcmdr successfully. I have tried launching R with R.exe --vanilla
> > >> with the
> > >>    > same results.
> > >>    >
> > >>    > The system information is Windows 10 version 1903, i5 8500
> > >> processor, 8GB
> > >>    > RAM, 256Gb  SSD. R version 3.6.2 Platform: x86_64-w64-
> > >> mingw32/x64 (64-bit)
> > >>    >
> > >>    > Hopefully I haven't left out any important information. Thank you
> > >> for any
> > >>    > suggestions.
> > >>    >
> > >>    >       [[alternative HTML version deleted]]
> > >>    >
> > >>    > ______________________________________________
> > >>    > R-help at r-project.org <mailto:R-help at r-project.org>  mailing list
> > >> -- To UNSUBSCRIBE and more, see
> > >>    > https://urldefense.proofpoint.com/v2/url?u=https-
> > 3A__stat.ethz.ch_mailman_listinfo_r-
> > 2Dhelp&d=DwIFAg&c=MWFkEADu9ctt4KEmLIuwsQ&r=OhbxYoJKYsmfC2Wjz
> > TKFj7Fw1qyrbJIFo5BfgVqACaM&m=385Kfv02lZxykzhYHnbjRxxzMBywESQnu
> > ptbnhDtfTc&s=jg4lofDFaGo2np9e6FoTRGku1mlQurK9XMxANVVp6qA&e=
> > >>    > PLEASE do read the posting guide
> > >> https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-
> > 2D&d=DwIFAg
> > >>
> > &c=MWFkEADu9ctt4KEmLIuwsQ&r=OhbxYoJKYsmfC2WjzTKFj7Fw1qyrbJIFo5
> > BfgVqAC
> > >>
> > aM&m=385Kfv02lZxykzhYHnbjRxxzMBywESQnuptbnhDtfTc&s=684atQ5ytYw
> > BnLObmV
> > >> U4CnU1Ls3V7wVbqgwpW2kbQ-I&e=
> > >> project.org/posting-guide.html
> > >>    > and provide commented, minimal, self-contained, reproducible
> > code.
> > >>
> > >>
> > >>
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mail
> > > man_listinfo_r-
> > 2Dhelp&d=DwIFAg&c=MWFkEADu9ctt4KEmLIuwsQ&r=OhbxYoJKYsmf
> > >
> > C2WjzTKFj7Fw1qyrbJIFo5BfgVqACaM&m=385Kfv02lZxykzhYHnbjRxxzMBywE
> > SQnuptb
> > > nhDtfTc&s=jg4lofDFaGo2np9e6FoTRGku1mlQurK9XMxANVVp6qA&e=
> > > PLEASE do read the posting guide
> > > https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-
> > 2Dproject.or
> > > g_posting-
> > 2Dguide.html&d=DwIFAg&c=MWFkEADu9ctt4KEmLIuwsQ&r=OhbxYoJKYsm
> > >
> > fC2WjzTKFj7Fw1qyrbJIFo5BfgVqACaM&m=385Kfv02lZxykzhYHnbjRxxzMByw
> > ESQnupt
> > > bnhDtfTc&s=g85V6DgoZLBte-UoRPs-KcLh7Fpr-qkxxpwVNbMmd9w&e=
> > > and provide commented, minimal, self-contained, reproducible code.
> > 
> > --
> > Peter Dalgaard, Professor,
> > Center for Statistics, Copenhagen Business School Solbjerg Plads 3, 2000
> > Frederiksberg, Denmark
> > Phone: (+45)38153501
> > Office: A 4.23
> > Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> > 
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://urldefense.proofpoint.com/v2/url?u=https-
> > 3A__stat.ethz.ch_mailman_listinfo_r-
> > 2Dhelp&d=DwIFAg&c=MWFkEADu9ctt4KEmLIuwsQ&r=OhbxYoJKYsmfC2Wjz
> > TKFj7Fw1qyrbJIFo5BfgVqACaM&m=385Kfv02lZxykzhYHnbjRxxzMBywESQnu
> > ptbnhDtfTc&s=jg4lofDFaGo2np9e6FoTRGku1mlQurK9XMxANVVp6qA&e=
> > PLEASE do read the posting guide
> > https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-
> > 2Dproject.org_posting-
> > 2Dguide.html&d=DwIFAg&c=MWFkEADu9ctt4KEmLIuwsQ&r=OhbxYoJKYsmf
> > C2WjzTKFj7Fw1qyrbJIFo5BfgVqACaM&m=385Kfv02lZxykzhYHnbjRxxzMBywE
> > SQnuptbnhDtfTc&s=g85V6DgoZLBte-UoRPs-KcLh7Fpr-
> > qkxxpwVNbMmd9w&e=
> > and provide commented, minimal, self-contained, reproducible code.
> > 
> > **********************************************************
> > ******
> > Confidentiality Note: The information contained in this message, and any
> > attachments, may contain confidential and/or privileged material.  It is
> > intended solely for the
> > person(s) or entity to which it is addressed.  Any review, retransmission,
> > dissemination, or taking of any action in reliance upon this information by
> > persons or entities other than the intended recipient(s) is prohibited.  If you
> > received this in error, please contact the sender and delete the material from
> > any device.
> > **********************************************************
> > ******
> 
> 


From @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com  Thu Mar 12 04:56:54 2020
From: @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com (Ana Marija)
Date: Wed, 11 Mar 2020 22:56:54 -0500
Subject: [R] how do I add text lables on QQ plot
In-Reply-To: <CAKZQJMCkHgDUu5QjT98Ujv1cLQ9qeYbALn1BjZvXfGMq3mVDVA@mail.gmail.com>
References: <CAF9-5jMMFM3fA7sbyv4yNrfyF1Da7vw8RD2jcfTWOMT6Lfgi4A@mail.gmail.com>
 <CAB8pepya2sv0FiupVQeLmkJx_J7+V3oa12spqYeV9O_KA9ub-A@mail.gmail.com>
 <CAF9-5jOfYv2dnwm6OKEgYhwQq-spg6VU9H19HihLaAkeLWCyOA@mail.gmail.com>
 <CAB8pepzAEKMemM_9AqoyUdAGJ5G2cMrLpAeYD0zJ9R2U2zPFWw@mail.gmail.com>
 <CAB8pepwcYSRr2F9CSAdTXXOdNsfisJd+V=1czcxP3hwVitiuGQ@mail.gmail.com>
 <CAKZQJMCkHgDUu5QjT98Ujv1cLQ9qeYbALn1BjZvXfGMq3mVDVA@mail.gmail.com>
Message-ID: <CAF9-5jN5PUfRqsKB9Rs7Q6q4u0cWqxadSkn6S30Mpvq+j4zG=Q@mail.gmail.com>

I don?t need to use qqman package... if someone has any other solution
would be the most appreciated


On Wed, 11 Mar 2020 at 20:28, John Kane <jrkrideau at gmail.com> wrote:

> No idua how it works but the name suggests it in out of the Hadley
> universe and not basic graphics.
>
> On Wed, 11 Mar 2020 at 21:14, Abby Spurdle <spurdle.a at gmail.com> wrote:
>
>> One more thing, I can't find a CRAN package named "ggman".
>>
>> On Thu, Mar 12, 2020 at 1:59 PM Abby Spurdle <spurdle.a at gmail.com> wrote:
>> >
>> > Ok, then.
>> >
>> > What graphics system is the qq function using?
>> > Assuming that it's using the base graphics system, look at the
>> > graphics::text function.
>> >
>> > text (1:10, 1:10, LETTERS [1:10])
>> >
>> > If it's a different graphics system, then I don't know, but hopefully
>> > someone else will help.
>> >
>> > On Thu, Mar 12, 2020 at 1:48 PM Ana Marija <sokovic.anamarija at gmail.com>
>> wrote:
>> > >
>> > > Thanks for getting back to me but I would need this text labels added
>> in this particular instance
>> > >
>> > > On Wed, 11 Mar 2020 at 19:37, Abby Spurdle <spurdle.a at gmail.com>
>> wrote:
>> > >>
>> > >> > and I would like to get the plot like the one in attach.
>> > >> > Please advise,
>> > >>
>> > >> This is a bad idea.
>> > >> Plots should be *easy* to interpret.
>> > >>
>> > >> Try to keep plots relatively simple, avoiding unnecessary details.
>> > >> For nontrivial plots, use a caption to describe the main features of
>> the plot.
>> > >> (That's where your text should go).
>> > >>
>> > >> I note that you've asked a number of questions about QQ plots.
>> > >> I'd recommend that you use QQ plots in a standard way, without
>> > >> frequently trying to modify/customize them.
>>
>> ______________________________________________
>
>
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>
> --
> John Kane
> Kingston ON Canada
>

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Thu Mar 12 05:21:49 2020
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Wed, 11 Mar 2020 21:21:49 -0700
Subject: [R] how do I add text lables on QQ plot
In-Reply-To: <CAF9-5jMMFM3fA7sbyv4yNrfyF1Da7vw8RD2jcfTWOMT6Lfgi4A@mail.gmail.com>
References: <CAF9-5jMMFM3fA7sbyv4yNrfyF1Da7vw8RD2jcfTWOMT6Lfgi4A@mail.gmail.com>
Message-ID: <a824d0cc-ba62-96cc-4836-934216715e37@comcast.net>


On 3/10/20 9:51 PM, Ana Marija wrote:
> Hello,
>
> I am making QQ plot via:
>
> library(ggman)
> qq(fdr2_sorted$FDR.q.val2, main = "RG_All", pch = 17,
> col=fdr1_sorted$group, cex = 1, las = 1)


I think you may be confusing the audience. There is no qq function in 
the ggman package. There is however a qq function in the qqman package.


Running the example in help page for qqman::qq and looking at the code 
suggests this is a base plot function, so the text function will allow 
you to put any particular string within the plot area:

library(qqman)

qq(gwasResults$P)
text( 2, 6, "arbitrary")? # puts text "arbitrary" at postion (x=2, y=6)

>
> data frames used look like this:
>
>> head(fdr1_sorted)

You should use `dput` to post reproducible data examples.

HTH;

David.

>                                         NAME             GS<br> follow
> link to MSigDB  GS DETAILS SIZE         ES       NES NOM p-val
> 1:                 GO_DNA_PACKAGING_COMPLEX
> GO_DNA_PACKAGING_COMPLEX Details ...   77  0.6757226  2.466745
> 0
> 2:                   GO_PROTEIN_DNA_COMPLEX
> GO_PROTEIN_DNA_COMPLEX Details ...  132  0.5958179  2.346520         0
> 3:         GO_RESPONSE_TO_TYPE_I_INTERFERON
> GO_RESPONSE_TO_TYPE_I_INTERFERON Details ...   52 -0.7521569 -2.533148
>          0
> 4:          GO_RESPONSE_TO_INTERFERON_GAMMA
> GO_RESPONSE_TO_INTERFERON_GAMMA Details ...  101 -0.6370415 -2.420473
>         0
> 5: GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA
> GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA Details ...   85 -0.6571892
> -2.402153         0
> 6:                 GO_GRANULOCYTE_MIGRATION
> GO_GRANULOCYTE_MIGRATION Details ...   43 -0.7332099 -2.398983
> 0
>     FDR q-val FWER p-val RANK AT MAX                   LEADING EDGE V12
> group FDR.q.val2
> 1:         0          0        1111 tags=43%, list=10%, signal=47%  NA
>      2      1e-10
> 2:         0          0        1516 tags=39%, list=13%, signal=45%  NA
>      2      1e-10
> 3:         0          0        1427 tags=54%, list=12%, signal=61%  NA
>      4      1e-10
> 4:         0          0        1819 tags=45%, list=16%, signal=52%  NA
>      4      1e-10
> 5:         0          0        1216 tags=38%, list=11%, signal=42%  NA
>      4      1e-10
> 6:         0          0         491  tags=28%, list=4%, signal=29%  NA
>      4      1e-10
>
>> head(fdr2_sorted)
>                                         NAME             GS<br> follow
> link to MSigDB  GS DETAILS SIZE         ES       NES NOM p-val
> 1:                 GO_DNA_PACKAGING_COMPLEX
> GO_DNA_PACKAGING_COMPLEX Details ...   77  0.6757226  2.466745
> 0
> 2:                   GO_PROTEIN_DNA_COMPLEX
> GO_PROTEIN_DNA_COMPLEX Details ...  132  0.5958179  2.346520         0
> 3:         GO_RESPONSE_TO_TYPE_I_INTERFERON
> GO_RESPONSE_TO_TYPE_I_INTERFERON Details ...   52 -0.7521569 -2.533148
>          0
> 4:          GO_RESPONSE_TO_INTERFERON_GAMMA
> GO_RESPONSE_TO_INTERFERON_GAMMA Details ...  101 -0.6370415 -2.420473
>         0
> 5: GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA
> GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA Details ...   85 -0.6571892
> -2.402153         0
> 6:                 GO_GRANULOCYTE_MIGRATION
> GO_GRANULOCYTE_MIGRATION Details ...   43 -0.7332099 -2.398983
> 0
>     FDR q-val FWER p-val RANK AT MAX                   LEADING EDGE V12
> FDR.q.val2
> 1:         0          0        1111 tags=43%, list=10%, signal=47%  NA
>       1e-10
> 2:         0          0        1516 tags=39%, list=13%, signal=45%  NA
>       1e-10
> 3:         0          0        1427 tags=54%, list=12%, signal=61%  NA
>       1e-10
> 4:         0          0        1819 tags=45%, list=16%, signal=52%  NA
>       1e-10
> 5:         0          0        1216 tags=38%, list=11%, signal=42%  NA
>       1e-10
> 6:         0          0         491  tags=28%, list=4%, signal=29%  NA
>       1e-10
>
> and I would like to get the plot like the one in attach.
>
> Please advise,
> Ana
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From gro@@m@b @end|ng |rom um|ch@edu  Wed Mar 11 21:42:14 2020
From: gro@@m@b @end|ng |rom um|ch@edu (Brian Grossman)
Date: Wed, 11 Mar 2020 16:42:14 -0400
Subject: [R] Problem launching Rcmdr
In-Reply-To: <ACD1644AA6C67E4FBD0C350625508EC88CD4E720@FHSDB4H16-2.csu.mcmaster.ca>
References: <30331_1583814715_02A4Upjf022824_CACcht+kA59600nxPTUEY6swC0krkOmo2aiZezUhfxwnjwmjV_A@mail.gmail.com>
 <7DCD30FF-8198-4C98-A05D-65308D5ED952@mcmaster.ca>
 <CACcht+kJVr28_ev-GNxZXcZWrvVzKxvNm4cwvmRxX2fTUDPtnQ@mail.gmail.com>
 <ACD1644AA6C67E4FBD0C350625508EC88CD4BB23@FHSDB4H16-2.csu.mcmaster.ca>
 <9943308E-BE52-4DE3-8ED5-C0DC060C7FEB@gmail.com>
 <BN8PR03MB46115BE5FD668B041197741783FC0@BN8PR03MB4611.namprd03.prod.outlook.com>
 <ACD1644AA6C67E4FBD0C350625508EC88CD4E720@FHSDB4H16-2.csu.mcmaster.ca>
Message-ID: <CACcht+=L275-t2qm8GE6z2Ok4UV+NqvMArwBdGygXxNN6fJsyQ@mail.gmail.com>

I did some testing and was able to run the tcltk commands without any
problems. It brought up the graph normally when I hit the submit button and
when I changed the values and hit submit it would change the graph
accordingly.The interesting thing is that after the tkdestroy(tt) command I
tried running library(Rcmdr) and it launched successfully. I'm not sure
what that means, but hopefully someone else will.

Thank you,

Brian

On Wed, Mar 11, 2020 at 1:02 PM Fox, John <jfox at mcmaster.ca> wrote:

> Dear Bernhard, Peter, and Brian,
>
> Thanks, Peter, for the suggestion. If you're right then the problem is
> with tcltk more generally and not directly with the Rcmdr package.
>
> Brian: That's easily checked and might clarify what's going on: Load the
> tcltk package via library(tcltk), and then try the following example from
> ?TkWidgetcmds:
>
> ------------ snip --------------
>
> tt <- tktoplevel()
> tkpack(txt.w <- tktext(tt))
> tkinsert(txt.w, "0.0", "plot(1:10)")
> eval.txt <- function()
>    eval(parse(text = tclvalue(tkget(txt.w, "0.0", "end"))))
> tkpack(but.w <- tkbutton(tt, text = "Submit", command = eval.txt))
>
> ## Try pressing the button, edit the text and when finished:
>
> tkdestroy(tt)
>
> ------------ snip --------------
>
> Best,
>  John
>
>
> > -----Original Message-----
> > From: Pfaff, Bernhard Dr. <Bernhard.Pfaff at Invesco.com>
> > Sent: Wednesday, March 11, 2020 9:18 AM
> > To: Peter Dalgaard <pdalgd at gmail.com>; Fox, John <jfox at mcmaster.ca>
> > Cc: r-help at r-project.org
> > Subject: AW: Re: [R] Problem launching Rcmdr
> >
> > Good catch, Peter; Cylance might be the culprit - at least I encountered
> > problems by compiling C++ sources and/or building packages with
> interfaced
> > routines and here a memory checker kicked in.
> > Maybe something akin is happening by launching Rcmdr (tcl/tk)?
> >
> > -----Urspr?ngliche Nachricht-----
> > Von: R-help <r-help-bounces at r-project.org> Im Auftrag von Peter Dalgaard
> > Gesendet: Mittwoch, 11. M?rz 2020 10:29
> > An: Fox, John <jfox at mcmaster.ca>
> > Cc: r-help at r-project.org
> > Betreff: [EXT] Re: [R] Problem launching Rcmdr
> >
> > Any chance that a virus checker is interfering?
> >
> > -pd
> >
> > > On 10 Mar 2020, at 23:43 , Fox, John <jfox at mcmaster.ca> wrote:
> > >
> > > Dear Brian,
> > >
> > > (Please keep r-help in the loop so that if someone else has this
> > > problem they'll have something to refer to.)
> > >
> > > Your session at start-up seems completely clean, so I'm at a loss to
> > understand what the problem is. I, and I assume very many other people,
> > are using the Rcmdr with essentially the same Windows setup. What's
> > particularly hard for me to understand is that you're able to start the
> Rcmdr in
> > a second R session. Does the first R session have to remain open for
> this to
> > work?
> > >
> > > A next step is to reinstall packages, starting with the Rcmdr package,
> if you
> > haven't already tried that, and eventually to reinstall R, including
> deleting the
> > R package library. BTW, I usually prefer to install R in c:\R\ rather
> than under
> > Program Files so that the system library is used for packages that I
> > subsequently install, although it should work perfectly fine to install
> packages
> > into a personal library.
> > >
> > > Best,
> > > John
> > >
> > >> -----Original Message-----
> > >> From: Brian Grossman <grossmab at umich.edu>
> > >> Sent: Tuesday, March 10, 2020 5:07 PM
> > >> To: Fox, John <jfox at mcmaster.ca>
> > >> Subject: Re: [R] Problem launching Rcmdr
> > >>
> > >> John,
> > >>
> > >> Thanks for the reply. Here is the output from running sessionInfo()
> > >> right after opening R.
> > >>
> > >>> sessionInfo()
> > >> R version 3.6.2 (2019-12-12)
> > >> Platform: x86_64-w64-mingw32/x64 (64-bit) Running under: Windows 10
> > >> x64 (build 18362)
> > >>
> > >> Matrix products: default
> > >>
> > >> locale:
> > >> [1] LC_COLLATE=English_United States.1252 [2] LC_CTYPE=English_United
> > >> States.1252 [3] LC_MONETARY=English_United States.1252 [4]
> > >> LC_NUMERIC=C [5] LC_TIME=English_United States.1252
> > >>
> > >> attached base packages:
> > >> [1] stats     graphics  grDevices utils     datasets  methods   base
> > >>
> > >> loaded via a namespace (and not attached):
> > >> [1] compiler_3.6.2
> > >>
> > >>
> > >> Brian
> > >>
> > >> On Tue, Mar 10, 2020 at 8:46 AM Fox, John <jfox at mcmaster.ca
> > >> <mailto:jfox at mcmaster.ca> > wrote:
> > >>
> > >>
> > >>    Dear Brian,
> > >>
> > >>    Normally I'd expect that a workspace saved from a previous session
> > >> and loaded at the start of the current session would cause this kind
> > >> of anomalous behaviour, but that doesn't explain why the Rcmdr starts
> > >> up properly in a second (concurrent?) session, nor why it doesn't
> > >> start up properly when R is run with the --vanilla switch.
> > >>
> > >>    Can you report the result of sessionInfo() at the start of a
> session?
> > >>
> > >>    If all else fails, you could try uninstalling and reinstalling R
> and
> > >> packages.
> > >>
> > >>    Best,
> > >>     John
> > >>
> > >>      -----------------------------
> > >>      John Fox, Professor Emeritus
> > >>      McMaster University
> > >>      Hamilton, Ontario, Canada
> > >>      Web: http::/socserv.mcmaster.ca/jfox
> > >> <https://urldefense.proofpoint.com/v2/url?u=http-
> > 3A__socserv.mcmaster
> > >>
> > .ca_jfox&d=DwIFAg&c=MWFkEADu9ctt4KEmLIuwsQ&r=OhbxYoJKYsmfC2Wj
> > zTKFj7Fw
> > >>
> > 1qyrbJIFo5BfgVqACaM&m=385Kfv02lZxykzhYHnbjRxxzMBywESQnuptbnhDtf
> > Tc&s=a
> > >> eoHPeyoWEbF1Lq409kfGNS_AauUuCunIr_B_-mNx68&e= >
> > >>
> > >>    > On Mar 9, 2020, at 3:25 PM, Brian Grossman
> > <grossmab at umich.edu
> > >> <mailto:grossmab at umich.edu> > wrote:
> > >>    >
> > >>    > I'm having a problem with launching Rcmdr. When I try to launch
> it
> > >> the
> > >>    > first time through R using the command library(Rcmdr) it will go
> > >> through
> > >>    > the process of launching and get to the point where it says
> > >>    >
> > >>    > "Registered S3 methods overwritten by 'lme4':
> > >>    >  method                          from
> > >>    >  cooks.distance.influence.merMod car
> > >>    >  influence.merMod                car
> > >>    >  dfbeta.influence.merMod         car
> > >>    >  dfbetas.influence.merMod        car
> > >>    > lattice theme set by effectsTheme()
> > >>    > See ?effectsTheme for details."
> > >>    >
> > >>    > and then it just hangs there and never launches Rcmdr. If you
> > >> launch
> > >>    > another instance of R and run the same command it will complete
> > >> and launch
> > >>    > Rcmdr successfully. I have tried launching R with R.exe --vanilla
> > >> with the
> > >>    > same results.
> > >>    >
> > >>    > The system information is Windows 10 version 1903, i5 8500
> > >> processor, 8GB
> > >>    > RAM, 256Gb  SSD. R version 3.6.2 Platform: x86_64-w64-
> > >> mingw32/x64 (64-bit)
> > >>    >
> > >>    > Hopefully I haven't left out any important information. Thank you
> > >> for any
> > >>    > suggestions.
> > >>    >
> > >>    >       [[alternative HTML version deleted]]
> > >>    >
> > >>    > ______________________________________________
> > >>    > R-help at r-project.org <mailto:R-help at r-project.org>  mailing list
> > >> -- To UNSUBSCRIBE and more, see
> > >>    > https://urldefense.proofpoint.com/v2/url?u=https-
> > 3A__stat.ethz.ch_mailman_listinfo_r-
> > 2Dhelp&d=DwIFAg&c=MWFkEADu9ctt4KEmLIuwsQ&r=OhbxYoJKYsmfC2Wjz
> > TKFj7Fw1qyrbJIFo5BfgVqACaM&m=385Kfv02lZxykzhYHnbjRxxzMBywESQnu
> > ptbnhDtfTc&s=jg4lofDFaGo2np9e6FoTRGku1mlQurK9XMxANVVp6qA&e=
> > >>    > PLEASE do read the posting guide
> > >> https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-
> > 2D&d=DwIFAg
> > >>
> > &c=MWFkEADu9ctt4KEmLIuwsQ&r=OhbxYoJKYsmfC2WjzTKFj7Fw1qyrbJIFo5
> > BfgVqAC
> > >>
> > aM&m=385Kfv02lZxykzhYHnbjRxxzMBywESQnuptbnhDtfTc&s=684atQ5ytYw
> > BnLObmV
> > >> U4CnU1Ls3V7wVbqgwpW2kbQ-I&e=
> > >> project.org/posting-guide.html
> > >>    > and provide commented, minimal, self-contained, reproducible
> > code.
> > >>
> > >>
> > >>
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mail
> > > man_listinfo_r-
> > 2Dhelp&d=DwIFAg&c=MWFkEADu9ctt4KEmLIuwsQ&r=OhbxYoJKYsmf
> > >
> > C2WjzTKFj7Fw1qyrbJIFo5BfgVqACaM&m=385Kfv02lZxykzhYHnbjRxxzMBywE
> > SQnuptb
> > > nhDtfTc&s=jg4lofDFaGo2np9e6FoTRGku1mlQurK9XMxANVVp6qA&e=
> > > PLEASE do read the posting guide
> > > https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-
> > 2Dproject.or
> > > g_posting-
> > 2Dguide.html&d=DwIFAg&c=MWFkEADu9ctt4KEmLIuwsQ&r=OhbxYoJKYsm
> > >
> > fC2WjzTKFj7Fw1qyrbJIFo5BfgVqACaM&m=385Kfv02lZxykzhYHnbjRxxzMByw
> > ESQnupt
> > > bnhDtfTc&s=g85V6DgoZLBte-UoRPs-KcLh7Fpr-qkxxpwVNbMmd9w&e=
> > > and provide commented, minimal, self-contained, reproducible code.
> >
> > --
> > Peter Dalgaard, Professor,
> > Center for Statistics, Copenhagen Business School Solbjerg Plads 3, 2000
> > Frederiksberg, Denmark
> > Phone: (+45)38153501
> > Office: A 4.23
> > Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://urldefense.proofpoint.com/v2/url?u=https-
> > 3A__stat.ethz.ch_mailman_listinfo_r-
> > 2Dhelp&d=DwIFAg&c=MWFkEADu9ctt4KEmLIuwsQ&r=OhbxYoJKYsmfC2Wjz
> > TKFj7Fw1qyrbJIFo5BfgVqACaM&m=385Kfv02lZxykzhYHnbjRxxzMBywESQnu
> > ptbnhDtfTc&s=jg4lofDFaGo2np9e6FoTRGku1mlQurK9XMxANVVp6qA&e=
> > PLEASE do read the posting guide
> > https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-
> > 2Dproject.org_posting-
> > 2Dguide.html&d=DwIFAg&c=MWFkEADu9ctt4KEmLIuwsQ&r=OhbxYoJKYsmf
> > C2WjzTKFj7Fw1qyrbJIFo5BfgVqACaM&m=385Kfv02lZxykzhYHnbjRxxzMBywE
> > SQnuptbnhDtfTc&s=g85V6DgoZLBte-UoRPs-KcLh7Fpr-
> > qkxxpwVNbMmd9w&e=
> > and provide commented, minimal, self-contained, reproducible code.
> >
> > **********************************************************
> > ******
> > Confidentiality Note: The information contained in this message, and any
> > attachments, may contain confidential and/or privileged material.  It is
> > intended solely for the
> > person(s) or entity to which it is addressed.  Any review,
> retransmission,
> > dissemination, or taking of any action in reliance upon this information
> by
> > persons or entities other than the intended recipient(s) is prohibited.
> If you
> > received this in error, please contact the sender and delete the
> material from
> > any device.
> > **********************************************************
> > ******
>

	[[alternative HTML version deleted]]


From pd@me@ @end|ng |rom cb@@dk  Thu Mar 12 13:30:35 2020
From: pd@me@ @end|ng |rom cb@@dk (Peter Dalgaard)
Date: Thu, 12 Mar 2020 12:30:35 +0000
Subject: [R] [Rd] R 4.0.0 scheduled for April 24
Message-ID: <68E2CE45-82CF-4766-9363-6023DF0B5BE4@cbs.dk>

Full schedule is available on developer.r-project.org.

Notice that Copenhagen Business School, like all Danish educational institutions, is physically locked down for two weeks due to COVID-19. The schedule is automated, but there may be irregularities with the nightly builds, if things act up and I can't get to the machine.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com

______________________________________________
R-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-devel

_______________________________________________
R-announce at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-announce


From @ky|erb@@|eeby@n @end|ng |rom gm@||@com  Thu Mar 12 10:30:26 2020
From: @ky|erb@@|eeby@n @end|ng |rom gm@||@com (Skyler Saleebyan)
Date: Thu, 12 Mar 2020 04:30:26 -0500
Subject: [R] Relatively Simple Maximization Using Optim Doesnt Optimize
Message-ID: <CA+gY42CJ000Kuj0Cjnif+xWH0oJYt0mXOzUx9s33FSWE9Peteg@mail.gmail.com>

I am trying to familiarize myself with optim() with a relatively simple
maximization.

Description:
L and K are two terms which are constrained to add up to a total 100000
(with respective weights to each). To map this constraint I plugged K into
the function (to make this as simple as possible.)

Together these two feed into one nonlinear function which is the product of
two monotonic (on the positive interval) functions. Then that numbers is
returned in a function fed to optim, which should maximize the output by
adjusting L. The whole code is:

production1 <- function(L){
  budget=100000
  Lcost=12
  Kcost=15
  K=(budget-L*Lcost)/Kcost
  machines=0.05*L^(2/3)*K^(1/3)
  return(machines)
}

# production1(6000) #example of number with much higher output vs optim
result
S1=optim(1001,production1,method="CG",control=list(fnscale=-1))
S1

Output:
$par
[1] 1006.536

$value
[1] 90.54671

$counts
function gradient
     201      101

$convergence
[1] 1

$message
NULL


For some reason this never explores the problem space and just spits out
some answer close to the initial condition. What am I doing wrong?

Thanks,
Skyler S.

	[[alternative HTML version deleted]]


From @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com  Thu Mar 12 15:08:52 2020
From: @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com (Ana Marija)
Date: Thu, 12 Mar 2020 09:08:52 -0500
Subject: [R] how do I add text lables on QQ plot
In-Reply-To: <a824d0cc-ba62-96cc-4836-934216715e37@comcast.net>
References: <CAF9-5jMMFM3fA7sbyv4yNrfyF1Da7vw8RD2jcfTWOMT6Lfgi4A@mail.gmail.com>
 <a824d0cc-ba62-96cc-4836-934216715e37@comcast.net>
Message-ID: <CAF9-5jNnY8kkzuiUFKd1cLGqe5mZRn1SUT6uwVhUmHNCRA8wAg@mail.gmail.com>

HI David,

thank you for getting back to me.

Is there is a way for qq() to pick up text label names on its own or I
have to specify each one manually?
like in this example:
text( 2, 6, "arbitrary")

this is dput for

>a=head(fdr2_sorted)
> dput(a)
structure(list(NAME = c("GO_DNA_PACKAGING_COMPLEX", "GO_PROTEIN_DNA_COMPLEX",
"GO_RESPONSE_TO_TYPE_I_INTERFERON", "GO_RESPONSE_TO_INTERFERON_GAMMA",
"GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA", "GO_GRANULOCYTE_MIGRATION"
), `GS<br> follow link to MSigDB` = c("GO_DNA_PACKAGING_COMPLEX",
"GO_PROTEIN_DNA_COMPLEX", "GO_RESPONSE_TO_TYPE_I_INTERFERON",
"GO_RESPONSE_TO_INTERFERON_GAMMA", "GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA",
"GO_GRANULOCYTE_MIGRATION"), `GS DETAILS` = c("Details ...",
"Details ...", "Details ...", "Details ...", "Details ...", "Details ..."
), SIZE = c(77L, 132L, 52L, 101L, 85L, 43L), ES = c(0.6757226,
0.59581786, -0.7521569, -0.63704145, -0.6571892, -0.7332099),
    NES = c(2.466745, 2.3465202, -2.5331483, -2.4204733, -2.4021535,
    -2.3989832), `NOM p-val` = c(0, 0, 0, 0, 0, 0), `FDR q-val` = c(0,
    0, 0, 0, 0, 0), `FWER p-val` = c(0, 0, 0, 0, 0, 0), `RANK AT MAX` = c(1111L,
    1516L, 1427L, 1819L, 1216L, 491L), `LEADING EDGE` = c("tags=43%,
list=10%, signal=47%",
    "tags=39%, list=13%, signal=45%", "tags=54%, list=12%, signal=61%",
    "tags=45%, list=16%, signal=52%", "tags=38%, list=11%, signal=42%",
    "tags=28%, list=4%, signal=29%"), V12 = c(NA, NA, NA, NA,
    NA, NA), FDR.q.val2 = c(1e-10, 1e-10, 1e-10, 1e-10, 1e-10,
    1e-10)), class = c("data.table", "data.frame"), row.names = c(NA,
-6L), .internal.selfref = <pointer: 0x10400bae0>)

> b=head(fdr1_sorted)
> dput(b)
structure(list(NAME = c("GO_DNA_PACKAGING_COMPLEX", "GO_PROTEIN_DNA_COMPLEX",
"GO_RESPONSE_TO_TYPE_I_INTERFERON", "GO_RESPONSE_TO_INTERFERON_GAMMA",
"GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA", "GO_GRANULOCYTE_MIGRATION"
), `GS<br> follow link to MSigDB` = c("GO_DNA_PACKAGING_COMPLEX",
"GO_PROTEIN_DNA_COMPLEX", "GO_RESPONSE_TO_TYPE_I_INTERFERON",
"GO_RESPONSE_TO_INTERFERON_GAMMA", "GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA",
"GO_GRANULOCYTE_MIGRATION"), `GS DETAILS` = c("Details ...",
"Details ...", "Details ...", "Details ...", "Details ...", "Details ..."
), SIZE = c(77L, 132L, 52L, 101L, 85L, 43L), ES = c(0.6757226,
0.59581786, -0.7521569, -0.63704145, -0.6571892, -0.7332099),
    NES = c(2.466745, 2.3465202, -2.5331483, -2.4204733, -2.4021535,
    -2.3989832), `NOM p-val` = c(0, 0, 0, 0, 0, 0), `FDR q-val` = c(0,
    0, 0, 0, 0, 0), `FWER p-val` = c(0, 0, 0, 0, 0, 0), `RANK AT MAX` = c(1111L,
    1516L, 1427L, 1819L, 1216L, 491L), `LEADING EDGE` = c("tags=43%,
list=10%, signal=47%",
    "tags=39%, list=13%, signal=45%", "tags=54%, list=12%, signal=61%",
    "tags=45%, list=16%, signal=52%", "tags=38%, list=11%, signal=42%",
    "tags=28%, list=4%, signal=29%"), V12 = c(NA, NA, NA, NA,
    NA, NA), group = c(2, 2, 4, 4, 4, 4), FDR.q.val2 = c(1e-10,
    1e-10, 1e-10, 1e-10, 1e-10, 1e-10)), class = c("data.table",
"data.frame"), row.names = c(NA, -6L), .internal.selfref = <pointer:
0x10400bae0>)

library(qqman)
qq(fdr2_sorted$FDR.q.val2, main = "RG_All", pch = 16,
col=fdr1_sorted$group, cex = 0.8, las = 1)

Please advise

On Wed, Mar 11, 2020 at 11:21 PM David Winsemius <dwinsemius at comcast.net> wrote:
>
>
> On 3/10/20 9:51 PM, Ana Marija wrote:
> > Hello,
> >
> > I am making QQ plot via:
> >
> > library(ggman)
> > qq(fdr2_sorted$FDR.q.val2, main = "RG_All", pch = 17,
> > col=fdr1_sorted$group, cex = 1, las = 1)
>
>
> I think you may be confusing the audience. There is no qq function in
> the ggman package. There is however a qq function in the qqman package.
>
>
> Running the example in help page for qqman::qq and looking at the code
> suggests this is a base plot function, so the text function will allow
> you to put any particular string within the plot area:
>
> library(qqman)
>
> qq(gwasResults$P)
> text( 2, 6, "arbitrary")  # puts text "arbitrary" at postion (x=2, y=6)
>
> >
> > data frames used look like this:
> >
> >> head(fdr1_sorted)
>
> You should use `dput` to post reproducible data examples.
>
> HTH;
>
> David.
>
> >                                         NAME             GS<br> follow
> > link to MSigDB  GS DETAILS SIZE         ES       NES NOM p-val
> > 1:                 GO_DNA_PACKAGING_COMPLEX
> > GO_DNA_PACKAGING_COMPLEX Details ...   77  0.6757226  2.466745
> > 0
> > 2:                   GO_PROTEIN_DNA_COMPLEX
> > GO_PROTEIN_DNA_COMPLEX Details ...  132  0.5958179  2.346520         0
> > 3:         GO_RESPONSE_TO_TYPE_I_INTERFERON
> > GO_RESPONSE_TO_TYPE_I_INTERFERON Details ...   52 -0.7521569 -2.533148
> >          0
> > 4:          GO_RESPONSE_TO_INTERFERON_GAMMA
> > GO_RESPONSE_TO_INTERFERON_GAMMA Details ...  101 -0.6370415 -2.420473
> >         0
> > 5: GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA
> > GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA Details ...   85 -0.6571892
> > -2.402153         0
> > 6:                 GO_GRANULOCYTE_MIGRATION
> > GO_GRANULOCYTE_MIGRATION Details ...   43 -0.7332099 -2.398983
> > 0
> >     FDR q-val FWER p-val RANK AT MAX                   LEADING EDGE V12
> > group FDR.q.val2
> > 1:         0          0        1111 tags=43%, list=10%, signal=47%  NA
> >      2      1e-10
> > 2:         0          0        1516 tags=39%, list=13%, signal=45%  NA
> >      2      1e-10
> > 3:         0          0        1427 tags=54%, list=12%, signal=61%  NA
> >      4      1e-10
> > 4:         0          0        1819 tags=45%, list=16%, signal=52%  NA
> >      4      1e-10
> > 5:         0          0        1216 tags=38%, list=11%, signal=42%  NA
> >      4      1e-10
> > 6:         0          0         491  tags=28%, list=4%, signal=29%  NA
> >      4      1e-10
> >
> >> head(fdr2_sorted)
> >                                         NAME             GS<br> follow
> > link to MSigDB  GS DETAILS SIZE         ES       NES NOM p-val
> > 1:                 GO_DNA_PACKAGING_COMPLEX
> > GO_DNA_PACKAGING_COMPLEX Details ...   77  0.6757226  2.466745
> > 0
> > 2:                   GO_PROTEIN_DNA_COMPLEX
> > GO_PROTEIN_DNA_COMPLEX Details ...  132  0.5958179  2.346520         0
> > 3:         GO_RESPONSE_TO_TYPE_I_INTERFERON
> > GO_RESPONSE_TO_TYPE_I_INTERFERON Details ...   52 -0.7521569 -2.533148
> >          0
> > 4:          GO_RESPONSE_TO_INTERFERON_GAMMA
> > GO_RESPONSE_TO_INTERFERON_GAMMA Details ...  101 -0.6370415 -2.420473
> >         0
> > 5: GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA
> > GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA Details ...   85 -0.6571892
> > -2.402153         0
> > 6:                 GO_GRANULOCYTE_MIGRATION
> > GO_GRANULOCYTE_MIGRATION Details ...   43 -0.7332099 -2.398983
> > 0
> >     FDR q-val FWER p-val RANK AT MAX                   LEADING EDGE V12
> > FDR.q.val2
> > 1:         0          0        1111 tags=43%, list=10%, signal=47%  NA
> >       1e-10
> > 2:         0          0        1516 tags=39%, list=13%, signal=45%  NA
> >       1e-10
> > 3:         0          0        1427 tags=54%, list=12%, signal=61%  NA
> >       1e-10
> > 4:         0          0        1819 tags=45%, list=16%, signal=52%  NA
> >       1e-10
> > 5:         0          0        1216 tags=38%, list=11%, signal=42%  NA
> >       1e-10
> > 6:         0          0         491  tags=28%, list=4%, signal=29%  NA
> >       1e-10
> >
> > and I would like to get the plot like the one in attach.
> >
> > Please advise,
> > Ana
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Mar 12 15:03:43 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 12 Mar 2020 07:03:43 -0700
Subject: [R] Relatively Simple Maximization Using Optim Doesnt Optimize
In-Reply-To: <CA+gY42CJ000Kuj0Cjnif+xWH0oJYt0mXOzUx9s33FSWE9Peteg@mail.gmail.com>
References: <CA+gY42CJ000Kuj0Cjnif+xWH0oJYt0mXOzUx9s33FSWE9Peteg@mail.gmail.com>
Message-ID: <9058B889-D77B-424D-BBAC-7E54876D1F3D@dcn.davis.ca.us>

The help file points out that CG is "fragile" ... and I would expect that failing to define a gradient function will exacerbate that.

I think you should use a different algorithm or specify a gradient function. You might also consider working with the more recent optimr package contributed by Dr Nash, author of the original optim function in R.

On March 12, 2020 2:30:26 AM PDT, Skyler Saleebyan <skylerbsaleebyan at gmail.com> wrote:
>I am trying to familiarize myself with optim() with a relatively simple
>maximization.
>
>Description:
>L and K are two terms which are constrained to add up to a total 100000
>(with respective weights to each). To map this constraint I plugged K
>into
>the function (to make this as simple as possible.)
>
>Together these two feed into one nonlinear function which is the
>product of
>two monotonic (on the positive interval) functions. Then that numbers
>is
>returned in a function fed to optim, which should maximize the output
>by
>adjusting L. The whole code is:
>
>production1 <- function(L){
>  budget=100000
>  Lcost=12
>  Kcost=15
>  K=(budget-L*Lcost)/Kcost
>  machines=0.05*L^(2/3)*K^(1/3)
>  return(machines)
>}
>
># production1(6000) #example of number with much higher output vs optim
>result
>S1=optim(1001,production1,method="CG",control=list(fnscale=-1))
>S1
>
>Output:
>$par
>[1] 1006.536
>
>$value
>[1] 90.54671
>
>$counts
>function gradient
>     201      101
>
>$convergence
>[1] 1
>
>$message
>NULL
>
>
>For some reason this never explores the problem space and just spits
>out
>some answer close to the initial condition. What am I doing wrong?
>
>Thanks,
>Skyler S.
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Thu Mar 12 15:16:52 2020
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Thu, 12 Mar 2020 14:16:52 +0000
Subject: [R] how do I add text lables on QQ plot
In-Reply-To: <CAF9-5jNnY8kkzuiUFKd1cLGqe5mZRn1SUT6uwVhUmHNCRA8wAg@mail.gmail.com>
References: <CAF9-5jMMFM3fA7sbyv4yNrfyF1Da7vw8RD2jcfTWOMT6Lfgi4A@mail.gmail.com>
 <a824d0cc-ba62-96cc-4836-934216715e37@comcast.net>
 <CAF9-5jNnY8kkzuiUFKd1cLGqe5mZRn1SUT6uwVhUmHNCRA8wAg@mail.gmail.com>
Message-ID: <0e31c7e7-982c-2990-36ce-44618b988177@dewey.myzen.co.uk>

Dear Ana

You can specify the first three parameters to text() as vectors so it is 
all done in one call. That may or may not answer your question.

Michael

On 12/03/2020 14:08, Ana Marija wrote:
> HI David,
> 
> thank you for getting back to me.
> 
> Is there is a way for qq() to pick up text label names on its own or I
> have to specify each one manually?
> like in this example:
> text( 2, 6, "arbitrary")
> 
> this is dput for
> 
>> a=head(fdr2_sorted)
>> dput(a)
> structure(list(NAME = c("GO_DNA_PACKAGING_COMPLEX", "GO_PROTEIN_DNA_COMPLEX",
> "GO_RESPONSE_TO_TYPE_I_INTERFERON", "GO_RESPONSE_TO_INTERFERON_GAMMA",
> "GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA", "GO_GRANULOCYTE_MIGRATION"
> ), `GS<br> follow link to MSigDB` = c("GO_DNA_PACKAGING_COMPLEX",
> "GO_PROTEIN_DNA_COMPLEX", "GO_RESPONSE_TO_TYPE_I_INTERFERON",
> "GO_RESPONSE_TO_INTERFERON_GAMMA", "GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA",
> "GO_GRANULOCYTE_MIGRATION"), `GS DETAILS` = c("Details ...",
> "Details ...", "Details ...", "Details ...", "Details ...", "Details ..."
> ), SIZE = c(77L, 132L, 52L, 101L, 85L, 43L), ES = c(0.6757226,
> 0.59581786, -0.7521569, -0.63704145, -0.6571892, -0.7332099),
>      NES = c(2.466745, 2.3465202, -2.5331483, -2.4204733, -2.4021535,
>      -2.3989832), `NOM p-val` = c(0, 0, 0, 0, 0, 0), `FDR q-val` = c(0,
>      0, 0, 0, 0, 0), `FWER p-val` = c(0, 0, 0, 0, 0, 0), `RANK AT MAX` = c(1111L,
>      1516L, 1427L, 1819L, 1216L, 491L), `LEADING EDGE` = c("tags=43%,
> list=10%, signal=47%",
>      "tags=39%, list=13%, signal=45%", "tags=54%, list=12%, signal=61%",
>      "tags=45%, list=16%, signal=52%", "tags=38%, list=11%, signal=42%",
>      "tags=28%, list=4%, signal=29%"), V12 = c(NA, NA, NA, NA,
>      NA, NA), FDR.q.val2 = c(1e-10, 1e-10, 1e-10, 1e-10, 1e-10,
>      1e-10)), class = c("data.table", "data.frame"), row.names = c(NA,
> -6L), .internal.selfref = <pointer: 0x10400bae0>)
> 
>> b=head(fdr1_sorted)
>> dput(b)
> structure(list(NAME = c("GO_DNA_PACKAGING_COMPLEX", "GO_PROTEIN_DNA_COMPLEX",
> "GO_RESPONSE_TO_TYPE_I_INTERFERON", "GO_RESPONSE_TO_INTERFERON_GAMMA",
> "GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA", "GO_GRANULOCYTE_MIGRATION"
> ), `GS<br> follow link to MSigDB` = c("GO_DNA_PACKAGING_COMPLEX",
> "GO_PROTEIN_DNA_COMPLEX", "GO_RESPONSE_TO_TYPE_I_INTERFERON",
> "GO_RESPONSE_TO_INTERFERON_GAMMA", "GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA",
> "GO_GRANULOCYTE_MIGRATION"), `GS DETAILS` = c("Details ...",
> "Details ...", "Details ...", "Details ...", "Details ...", "Details ..."
> ), SIZE = c(77L, 132L, 52L, 101L, 85L, 43L), ES = c(0.6757226,
> 0.59581786, -0.7521569, -0.63704145, -0.6571892, -0.7332099),
>      NES = c(2.466745, 2.3465202, -2.5331483, -2.4204733, -2.4021535,
>      -2.3989832), `NOM p-val` = c(0, 0, 0, 0, 0, 0), `FDR q-val` = c(0,
>      0, 0, 0, 0, 0), `FWER p-val` = c(0, 0, 0, 0, 0, 0), `RANK AT MAX` = c(1111L,
>      1516L, 1427L, 1819L, 1216L, 491L), `LEADING EDGE` = c("tags=43%,
> list=10%, signal=47%",
>      "tags=39%, list=13%, signal=45%", "tags=54%, list=12%, signal=61%",
>      "tags=45%, list=16%, signal=52%", "tags=38%, list=11%, signal=42%",
>      "tags=28%, list=4%, signal=29%"), V12 = c(NA, NA, NA, NA,
>      NA, NA), group = c(2, 2, 4, 4, 4, 4), FDR.q.val2 = c(1e-10,
>      1e-10, 1e-10, 1e-10, 1e-10, 1e-10)), class = c("data.table",
> "data.frame"), row.names = c(NA, -6L), .internal.selfref = <pointer:
> 0x10400bae0>)
> 
> library(qqman)
> qq(fdr2_sorted$FDR.q.val2, main = "RG_All", pch = 16,
> col=fdr1_sorted$group, cex = 0.8, las = 1)
> 
> Please advise
> 
> On Wed, Mar 11, 2020 at 11:21 PM David Winsemius <dwinsemius at comcast.net> wrote:
>>
>>
>> On 3/10/20 9:51 PM, Ana Marija wrote:
>>> Hello,
>>>
>>> I am making QQ plot via:
>>>
>>> library(ggman)
>>> qq(fdr2_sorted$FDR.q.val2, main = "RG_All", pch = 17,
>>> col=fdr1_sorted$group, cex = 1, las = 1)
>>
>>
>> I think you may be confusing the audience. There is no qq function in
>> the ggman package. There is however a qq function in the qqman package.
>>
>>
>> Running the example in help page for qqman::qq and looking at the code
>> suggests this is a base plot function, so the text function will allow
>> you to put any particular string within the plot area:
>>
>> library(qqman)
>>
>> qq(gwasResults$P)
>> text( 2, 6, "arbitrary")  # puts text "arbitrary" at postion (x=2, y=6)
>>
>>>
>>> data frames used look like this:
>>>
>>>> head(fdr1_sorted)
>>
>> You should use `dput` to post reproducible data examples.
>>
>> HTH;
>>
>> David.
>>
>>>                                          NAME             GS<br> follow
>>> link to MSigDB  GS DETAILS SIZE         ES       NES NOM p-val
>>> 1:                 GO_DNA_PACKAGING_COMPLEX
>>> GO_DNA_PACKAGING_COMPLEX Details ...   77  0.6757226  2.466745
>>> 0
>>> 2:                   GO_PROTEIN_DNA_COMPLEX
>>> GO_PROTEIN_DNA_COMPLEX Details ...  132  0.5958179  2.346520         0
>>> 3:         GO_RESPONSE_TO_TYPE_I_INTERFERON
>>> GO_RESPONSE_TO_TYPE_I_INTERFERON Details ...   52 -0.7521569 -2.533148
>>>           0
>>> 4:          GO_RESPONSE_TO_INTERFERON_GAMMA
>>> GO_RESPONSE_TO_INTERFERON_GAMMA Details ...  101 -0.6370415 -2.420473
>>>          0
>>> 5: GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA
>>> GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA Details ...   85 -0.6571892
>>> -2.402153         0
>>> 6:                 GO_GRANULOCYTE_MIGRATION
>>> GO_GRANULOCYTE_MIGRATION Details ...   43 -0.7332099 -2.398983
>>> 0
>>>      FDR q-val FWER p-val RANK AT MAX                   LEADING EDGE V12
>>> group FDR.q.val2
>>> 1:         0          0        1111 tags=43%, list=10%, signal=47%  NA
>>>       2      1e-10
>>> 2:         0          0        1516 tags=39%, list=13%, signal=45%  NA
>>>       2      1e-10
>>> 3:         0          0        1427 tags=54%, list=12%, signal=61%  NA
>>>       4      1e-10
>>> 4:         0          0        1819 tags=45%, list=16%, signal=52%  NA
>>>       4      1e-10
>>> 5:         0          0        1216 tags=38%, list=11%, signal=42%  NA
>>>       4      1e-10
>>> 6:         0          0         491  tags=28%, list=4%, signal=29%  NA
>>>       4      1e-10
>>>
>>>> head(fdr2_sorted)
>>>                                          NAME             GS<br> follow
>>> link to MSigDB  GS DETAILS SIZE         ES       NES NOM p-val
>>> 1:                 GO_DNA_PACKAGING_COMPLEX
>>> GO_DNA_PACKAGING_COMPLEX Details ...   77  0.6757226  2.466745
>>> 0
>>> 2:                   GO_PROTEIN_DNA_COMPLEX
>>> GO_PROTEIN_DNA_COMPLEX Details ...  132  0.5958179  2.346520         0
>>> 3:         GO_RESPONSE_TO_TYPE_I_INTERFERON
>>> GO_RESPONSE_TO_TYPE_I_INTERFERON Details ...   52 -0.7521569 -2.533148
>>>           0
>>> 4:          GO_RESPONSE_TO_INTERFERON_GAMMA
>>> GO_RESPONSE_TO_INTERFERON_GAMMA Details ...  101 -0.6370415 -2.420473
>>>          0
>>> 5: GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA
>>> GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA Details ...   85 -0.6571892
>>> -2.402153         0
>>> 6:                 GO_GRANULOCYTE_MIGRATION
>>> GO_GRANULOCYTE_MIGRATION Details ...   43 -0.7332099 -2.398983
>>> 0
>>>      FDR q-val FWER p-val RANK AT MAX                   LEADING EDGE V12
>>> FDR.q.val2
>>> 1:         0          0        1111 tags=43%, list=10%, signal=47%  NA
>>>        1e-10
>>> 2:         0          0        1516 tags=39%, list=13%, signal=45%  NA
>>>        1e-10
>>> 3:         0          0        1427 tags=54%, list=12%, signal=61%  NA
>>>        1e-10
>>> 4:         0          0        1819 tags=45%, list=16%, signal=52%  NA
>>>        1e-10
>>> 5:         0          0        1216 tags=38%, list=11%, signal=42%  NA
>>>        1e-10
>>> 6:         0          0         491  tags=28%, list=4%, signal=29%  NA
>>>        1e-10
>>>
>>> and I would like to get the plot like the one in attach.
>>>
>>> Please advise,
>>> Ana
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From er|cjberger @end|ng |rom gm@||@com  Thu Mar 12 15:17:33 2020
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Thu, 12 Mar 2020 16:17:33 +0200
Subject: [R] Relatively Simple Maximization Using Optim Doesnt Optimize
In-Reply-To: <9058B889-D77B-424D-BBAC-7E54876D1F3D@dcn.davis.ca.us>
References: <CA+gY42CJ000Kuj0Cjnif+xWH0oJYt0mXOzUx9s33FSWE9Peteg@mail.gmail.com>
 <9058B889-D77B-424D-BBAC-7E54876D1F3D@dcn.davis.ca.us>
Message-ID: <CAGgJW76Xj=LDRC9bP57mzpY0LkWFoZ4j1-Lti-iCbEfbMdzQ0g@mail.gmail.com>

It is possible to work out this problem explicitly. Playing with a few
different calls to optim shows that the method="L-BFGS-B" gives the correct
answer.
I don't have particular insight into why method="CG" is problematic.


On Thu, Mar 12, 2020 at 4:12 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> The help file points out that CG is "fragile" ... and I would expect that
> failing to define a gradient function will exacerbate that.
>
> I think you should use a different algorithm or specify a gradient
> function. You might also consider working with the more recent optimr
> package contributed by Dr Nash, author of the original optim function in R.
>
> On March 12, 2020 2:30:26 AM PDT, Skyler Saleebyan <
> skylerbsaleebyan at gmail.com> wrote:
> >I am trying to familiarize myself with optim() with a relatively simple
> >maximization.
> >
> >Description:
> >L and K are two terms which are constrained to add up to a total 100000
> >(with respective weights to each). To map this constraint I plugged K
> >into
> >the function (to make this as simple as possible.)
> >
> >Together these two feed into one nonlinear function which is the
> >product of
> >two monotonic (on the positive interval) functions. Then that numbers
> >is
> >returned in a function fed to optim, which should maximize the output
> >by
> >adjusting L. The whole code is:
> >
> >production1 <- function(L){
> >  budget=100000
> >  Lcost=12
> >  Kcost=15
> >  K=(budget-L*Lcost)/Kcost
> >  machines=0.05*L^(2/3)*K^(1/3)
> >  return(machines)
> >}
> >
> ># production1(6000) #example of number with much higher output vs optim
> >result
> >S1=optim(1001,production1,method="CG",control=list(fnscale=-1))
> >S1
> >
> >Output:
> >$par
> >[1] 1006.536
> >
> >$value
> >[1] 90.54671
> >
> >$counts
> >function gradient
> >     201      101
> >
> >$convergence
> >[1] 1
> >
> >$message
> >NULL
> >
> >
> >For some reason this never explores the problem space and just spits
> >out
> >some answer close to the initial condition. What am I doing wrong?
> >
> >Thanks,
> >Skyler S.
> >
> >       [[alternative HTML version deleted]]
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my phone. Please excuse my brevity.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Mar 12 15:21:46 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 12 Mar 2020 07:21:46 -0700
Subject: [R] Relatively Simple Maximization Using Optim Doesnt Optimize
In-Reply-To: <CA+gY42CJ000Kuj0Cjnif+xWH0oJYt0mXOzUx9s33FSWE9Peteg@mail.gmail.com>
References: <CA+gY42CJ000Kuj0Cjnif+xWH0oJYt0mXOzUx9s33FSWE9Peteg@mail.gmail.com>
Message-ID: <272e760f-d1fb-9f1c-f431-0fe418c70b11@gmail.com>

It looks like a bug in the CG method.  The other methods in optim() all 
work fine.  CG is documented to be a good choice in high dimensions; why 
did you choose it for a 1 dim problem?

Duncan Murdoch

On 12/03/2020 2:30 a.m., Skyler Saleebyan wrote:
> I am trying to familiarize myself with optim() with a relatively simple
> maximization.
> 
> Description:
> L and K are two terms which are constrained to add up to a total 100000
> (with respective weights to each). To map this constraint I plugged K into
> the function (to make this as simple as possible.)
> 
> Together these two feed into one nonlinear function which is the product of
> two monotonic (on the positive interval) functions. Then that numbers is
> returned in a function fed to optim, which should maximize the output by
> adjusting L. The whole code is:
> 
> production1 <- function(L){
>    budget=100000
>    Lcost=12
>    Kcost=15
>    K=(budget-L*Lcost)/Kcost
>    machines=0.05*L^(2/3)*K^(1/3)
>    return(machines)
> }
> 
> # production1(6000) #example of number with much higher output vs optim
> result
> S1=optim(1001,production1,method="CG",control=list(fnscale=-1))
> S1
> 
> Output:
> $par
> [1] 1006.536
> 
> $value
> [1] 90.54671
> 
> $counts
> function gradient
>       201      101
> 
> $convergence
> [1] 1
> 
> $message
> NULL
> 
> 
> For some reason this never explores the problem space and just spits out
> some answer close to the initial condition. What am I doing wrong?
> 
> Thanks,
> Skyler S.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From pro|jcn@@h @end|ng |rom gm@||@com  Thu Mar 12 15:23:15 2020
From: pro|jcn@@h @end|ng |rom gm@||@com (J C Nash)
Date: Thu, 12 Mar 2020 10:23:15 -0400
Subject: [R] Relatively Simple Maximization Using Optim Doesnt Optimize
In-Reply-To: <9058B889-D77B-424D-BBAC-7E54876D1F3D@dcn.davis.ca.us>
References: <CA+gY42CJ000Kuj0Cjnif+xWH0oJYt0mXOzUx9s33FSWE9Peteg@mail.gmail.com>
 <9058B889-D77B-424D-BBAC-7E54876D1F3D@dcn.davis.ca.us>
Message-ID: <160f9143-0b7e-681c-fa42-4096a781fdf9@gmail.com>

As author of CG (at least the code that was used to build it), I can say I was
never happy with that code. Rcgmin is the replacement I wrote, and I believe that
could still be improved.

BUT:
  - you have a 1D optimization. Use Brent method and supply bounds.
  - I never intended CG (or BFGS or Nelder-Mead or ...) to work for 1D
    problems
  - as Jeff points out, you need the gradient. I stop Rcgmin and Rvmmin if
    user hasn't supplied one, as numerical approximations need to be very
    good for these gradient methods

JN

On 2020-03-12 10:03 a.m., Jeff Newmiller wrote:
> The help file points out that CG is "fragile" ... and I would expect that failing to define a gradient function will exacerbate that.
> 
> I think you should use a different algorithm or specify a gradient function. You might also consider working with the more recent optimr package contributed by Dr Nash, author of the original optim function in R.
> 
> On March 12, 2020 2:30:26 AM PDT, Skyler Saleebyan <skylerbsaleebyan at gmail.com> wrote:
>> I am trying to familiarize myself with optim() with a relatively simple
>> maximization.
>>
>> Description:
>> L and K are two terms which are constrained to add up to a total 100000
>> (with respective weights to each). To map this constraint I plugged K
>> into
>> the function (to make this as simple as possible.)
>>
>> Together these two feed into one nonlinear function which is the
>> product of
>> two monotonic (on the positive interval) functions. Then that numbers
>> is
>> returned in a function fed to optim, which should maximize the output
>> by
>> adjusting L. The whole code is:
>>
>> production1 <- function(L){
>>  budget=100000
>>  Lcost=12
>>  Kcost=15
>>  K=(budget-L*Lcost)/Kcost
>>  machines=0.05*L^(2/3)*K^(1/3)
>>  return(machines)
>> }
>>
>> # production1(6000) #example of number with much higher output vs optim
>> result
>> S1=optim(1001,production1,method="CG",control=list(fnscale=-1))
>> S1
>>
>> Output:
>> $par
>> [1] 1006.536
>>
>> $value
>> [1] 90.54671
>>
>> $counts
>> function gradient
>>     201      101
>>
>> $convergence
>> [1] 1
>>
>> $message
>> NULL
>>
>>
>> For some reason this never explores the problem space and just spits
>> out
>> some answer close to the initial condition. What am I doing wrong?
>>
>> Thanks,
>> Skyler S.
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>


From @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com  Thu Mar 12 15:30:40 2020
From: @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com (Ana Marija)
Date: Thu, 12 Mar 2020 09:30:40 -0500
Subject: [R] how do I add text lables on QQ plot
In-Reply-To: <0e31c7e7-982c-2990-36ce-44618b988177@dewey.myzen.co.uk>
References: <CAF9-5jMMFM3fA7sbyv4yNrfyF1Da7vw8RD2jcfTWOMT6Lfgi4A@mail.gmail.com>
 <a824d0cc-ba62-96cc-4836-934216715e37@comcast.net>
 <CAF9-5jNnY8kkzuiUFKd1cLGqe5mZRn1SUT6uwVhUmHNCRA8wAg@mail.gmail.com>
 <0e31c7e7-982c-2990-36ce-44618b988177@dewey.myzen.co.uk>
Message-ID: <CAF9-5jMtXcBAF2_TpbVJOOtVUGAh0QDvvCWBsGAa6ZFXiPUXdA@mail.gmail.com>

Hi Michael,

can you please send me a line of code showing how it would be done.

Thanks
Ana

On Thu, Mar 12, 2020 at 9:16 AM Michael Dewey <lists at dewey.myzen.co.uk> wrote:
>
> Dear Ana
>
> You can specify the first three parameters to text() as vectors so it is
> all done in one call. That may or may not answer your question.
>
> Michael
>
> On 12/03/2020 14:08, Ana Marija wrote:
> > HI David,
> >
> > thank you for getting back to me.
> >
> > Is there is a way for qq() to pick up text label names on its own or I
> > have to specify each one manually?
> > like in this example:
> > text( 2, 6, "arbitrary")
> >
> > this is dput for
> >
> >> a=head(fdr2_sorted)
> >> dput(a)
> > structure(list(NAME = c("GO_DNA_PACKAGING_COMPLEX", "GO_PROTEIN_DNA_COMPLEX",
> > "GO_RESPONSE_TO_TYPE_I_INTERFERON", "GO_RESPONSE_TO_INTERFERON_GAMMA",
> > "GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA", "GO_GRANULOCYTE_MIGRATION"
> > ), `GS<br> follow link to MSigDB` = c("GO_DNA_PACKAGING_COMPLEX",
> > "GO_PROTEIN_DNA_COMPLEX", "GO_RESPONSE_TO_TYPE_I_INTERFERON",
> > "GO_RESPONSE_TO_INTERFERON_GAMMA", "GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA",
> > "GO_GRANULOCYTE_MIGRATION"), `GS DETAILS` = c("Details ...",
> > "Details ...", "Details ...", "Details ...", "Details ...", "Details ..."
> > ), SIZE = c(77L, 132L, 52L, 101L, 85L, 43L), ES = c(0.6757226,
> > 0.59581786, -0.7521569, -0.63704145, -0.6571892, -0.7332099),
> >      NES = c(2.466745, 2.3465202, -2.5331483, -2.4204733, -2.4021535,
> >      -2.3989832), `NOM p-val` = c(0, 0, 0, 0, 0, 0), `FDR q-val` = c(0,
> >      0, 0, 0, 0, 0), `FWER p-val` = c(0, 0, 0, 0, 0, 0), `RANK AT MAX` = c(1111L,
> >      1516L, 1427L, 1819L, 1216L, 491L), `LEADING EDGE` = c("tags=43%,
> > list=10%, signal=47%",
> >      "tags=39%, list=13%, signal=45%", "tags=54%, list=12%, signal=61%",
> >      "tags=45%, list=16%, signal=52%", "tags=38%, list=11%, signal=42%",
> >      "tags=28%, list=4%, signal=29%"), V12 = c(NA, NA, NA, NA,
> >      NA, NA), FDR.q.val2 = c(1e-10, 1e-10, 1e-10, 1e-10, 1e-10,
> >      1e-10)), class = c("data.table", "data.frame"), row.names = c(NA,
> > -6L), .internal.selfref = <pointer: 0x10400bae0>)
> >
> >> b=head(fdr1_sorted)
> >> dput(b)
> > structure(list(NAME = c("GO_DNA_PACKAGING_COMPLEX", "GO_PROTEIN_DNA_COMPLEX",
> > "GO_RESPONSE_TO_TYPE_I_INTERFERON", "GO_RESPONSE_TO_INTERFERON_GAMMA",
> > "GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA", "GO_GRANULOCYTE_MIGRATION"
> > ), `GS<br> follow link to MSigDB` = c("GO_DNA_PACKAGING_COMPLEX",
> > "GO_PROTEIN_DNA_COMPLEX", "GO_RESPONSE_TO_TYPE_I_INTERFERON",
> > "GO_RESPONSE_TO_INTERFERON_GAMMA", "GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA",
> > "GO_GRANULOCYTE_MIGRATION"), `GS DETAILS` = c("Details ...",
> > "Details ...", "Details ...", "Details ...", "Details ...", "Details ..."
> > ), SIZE = c(77L, 132L, 52L, 101L, 85L, 43L), ES = c(0.6757226,
> > 0.59581786, -0.7521569, -0.63704145, -0.6571892, -0.7332099),
> >      NES = c(2.466745, 2.3465202, -2.5331483, -2.4204733, -2.4021535,
> >      -2.3989832), `NOM p-val` = c(0, 0, 0, 0, 0, 0), `FDR q-val` = c(0,
> >      0, 0, 0, 0, 0), `FWER p-val` = c(0, 0, 0, 0, 0, 0), `RANK AT MAX` = c(1111L,
> >      1516L, 1427L, 1819L, 1216L, 491L), `LEADING EDGE` = c("tags=43%,
> > list=10%, signal=47%",
> >      "tags=39%, list=13%, signal=45%", "tags=54%, list=12%, signal=61%",
> >      "tags=45%, list=16%, signal=52%", "tags=38%, list=11%, signal=42%",
> >      "tags=28%, list=4%, signal=29%"), V12 = c(NA, NA, NA, NA,
> >      NA, NA), group = c(2, 2, 4, 4, 4, 4), FDR.q.val2 = c(1e-10,
> >      1e-10, 1e-10, 1e-10, 1e-10, 1e-10)), class = c("data.table",
> > "data.frame"), row.names = c(NA, -6L), .internal.selfref = <pointer:
> > 0x10400bae0>)
> >
> > library(qqman)
> > qq(fdr2_sorted$FDR.q.val2, main = "RG_All", pch = 16,
> > col=fdr1_sorted$group, cex = 0.8, las = 1)
> >
> > Please advise
> >
> > On Wed, Mar 11, 2020 at 11:21 PM David Winsemius <dwinsemius at comcast.net> wrote:
> >>
> >>
> >> On 3/10/20 9:51 PM, Ana Marija wrote:
> >>> Hello,
> >>>
> >>> I am making QQ plot via:
> >>>
> >>> library(ggman)
> >>> qq(fdr2_sorted$FDR.q.val2, main = "RG_All", pch = 17,
> >>> col=fdr1_sorted$group, cex = 1, las = 1)
> >>
> >>
> >> I think you may be confusing the audience. There is no qq function in
> >> the ggman package. There is however a qq function in the qqman package.
> >>
> >>
> >> Running the example in help page for qqman::qq and looking at the code
> >> suggests this is a base plot function, so the text function will allow
> >> you to put any particular string within the plot area:
> >>
> >> library(qqman)
> >>
> >> qq(gwasResults$P)
> >> text( 2, 6, "arbitrary")  # puts text "arbitrary" at postion (x=2, y=6)
> >>
> >>>
> >>> data frames used look like this:
> >>>
> >>>> head(fdr1_sorted)
> >>
> >> You should use `dput` to post reproducible data examples.
> >>
> >> HTH;
> >>
> >> David.
> >>
> >>>                                          NAME             GS<br> follow
> >>> link to MSigDB  GS DETAILS SIZE         ES       NES NOM p-val
> >>> 1:                 GO_DNA_PACKAGING_COMPLEX
> >>> GO_DNA_PACKAGING_COMPLEX Details ...   77  0.6757226  2.466745
> >>> 0
> >>> 2:                   GO_PROTEIN_DNA_COMPLEX
> >>> GO_PROTEIN_DNA_COMPLEX Details ...  132  0.5958179  2.346520         0
> >>> 3:         GO_RESPONSE_TO_TYPE_I_INTERFERON
> >>> GO_RESPONSE_TO_TYPE_I_INTERFERON Details ...   52 -0.7521569 -2.533148
> >>>           0
> >>> 4:          GO_RESPONSE_TO_INTERFERON_GAMMA
> >>> GO_RESPONSE_TO_INTERFERON_GAMMA Details ...  101 -0.6370415 -2.420473
> >>>          0
> >>> 5: GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA
> >>> GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA Details ...   85 -0.6571892
> >>> -2.402153         0
> >>> 6:                 GO_GRANULOCYTE_MIGRATION
> >>> GO_GRANULOCYTE_MIGRATION Details ...   43 -0.7332099 -2.398983
> >>> 0
> >>>      FDR q-val FWER p-val RANK AT MAX                   LEADING EDGE V12
> >>> group FDR.q.val2
> >>> 1:         0          0        1111 tags=43%, list=10%, signal=47%  NA
> >>>       2      1e-10
> >>> 2:         0          0        1516 tags=39%, list=13%, signal=45%  NA
> >>>       2      1e-10
> >>> 3:         0          0        1427 tags=54%, list=12%, signal=61%  NA
> >>>       4      1e-10
> >>> 4:         0          0        1819 tags=45%, list=16%, signal=52%  NA
> >>>       4      1e-10
> >>> 5:         0          0        1216 tags=38%, list=11%, signal=42%  NA
> >>>       4      1e-10
> >>> 6:         0          0         491  tags=28%, list=4%, signal=29%  NA
> >>>       4      1e-10
> >>>
> >>>> head(fdr2_sorted)
> >>>                                          NAME             GS<br> follow
> >>> link to MSigDB  GS DETAILS SIZE         ES       NES NOM p-val
> >>> 1:                 GO_DNA_PACKAGING_COMPLEX
> >>> GO_DNA_PACKAGING_COMPLEX Details ...   77  0.6757226  2.466745
> >>> 0
> >>> 2:                   GO_PROTEIN_DNA_COMPLEX
> >>> GO_PROTEIN_DNA_COMPLEX Details ...  132  0.5958179  2.346520         0
> >>> 3:         GO_RESPONSE_TO_TYPE_I_INTERFERON
> >>> GO_RESPONSE_TO_TYPE_I_INTERFERON Details ...   52 -0.7521569 -2.533148
> >>>           0
> >>> 4:          GO_RESPONSE_TO_INTERFERON_GAMMA
> >>> GO_RESPONSE_TO_INTERFERON_GAMMA Details ...  101 -0.6370415 -2.420473
> >>>          0
> >>> 5: GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA
> >>> GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA Details ...   85 -0.6571892
> >>> -2.402153         0
> >>> 6:                 GO_GRANULOCYTE_MIGRATION
> >>> GO_GRANULOCYTE_MIGRATION Details ...   43 -0.7332099 -2.398983
> >>> 0
> >>>      FDR q-val FWER p-val RANK AT MAX                   LEADING EDGE V12
> >>> FDR.q.val2
> >>> 1:         0          0        1111 tags=43%, list=10%, signal=47%  NA
> >>>        1e-10
> >>> 2:         0          0        1516 tags=39%, list=13%, signal=45%  NA
> >>>        1e-10
> >>> 3:         0          0        1427 tags=54%, list=12%, signal=61%  NA
> >>>        1e-10
> >>> 4:         0          0        1819 tags=45%, list=16%, signal=52%  NA
> >>>        1e-10
> >>> 5:         0          0        1216 tags=38%, list=11%, signal=42%  NA
> >>>        1e-10
> >>> 6:         0          0         491  tags=28%, list=4%, signal=29%  NA
> >>>        1e-10
> >>>
> >>> and I would like to get the plot like the one in attach.
> >>>
> >>> Please advise,
> >>> Ana
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
> --
> Michael
> http://www.dewey.myzen.co.uk/home.html


From @ky|erb@@|eeby@n @end|ng |rom gm@||@com  Thu Mar 12 16:21:40 2020
From: @ky|erb@@|eeby@n @end|ng |rom gm@||@com (Skyler Saleebyan)
Date: Thu, 12 Mar 2020 10:21:40 -0500
Subject: [R] Relatively Simple Maximization Using Optim Doesnt Optimize
In-Reply-To: <160f9143-0b7e-681c-fa42-4096a781fdf9@gmail.com>
References: <CA+gY42CJ000Kuj0Cjnif+xWH0oJYt0mXOzUx9s33FSWE9Peteg@mail.gmail.com>
 <9058B889-D77B-424D-BBAC-7E54876D1F3D@dcn.davis.ca.us>
 <160f9143-0b7e-681c-fa42-4096a781fdf9@gmail.com>
Message-ID: <CA+gY42AeDqOh1pqOR8CU5Tt2Mr28MiQOAZZO=FR8avByCkMaDg@mail.gmail.com>

Thanks for the replies. Since I was seeing this glitch with CG in my 1d and
2d formulation of the problem I was trying to figure out what was going on
that led to the failure.  I'll switch to a more suitable method and keep
these considerations in mind.

On Thu, Mar 12, 2020, 9:23 AM J C Nash <profjcnash at gmail.com> wrote:

> As author of CG (at least the code that was used to build it), I can say I
> was
> never happy with that code. Rcgmin is the replacement I wrote, and I
> believe that
> could still be improved.
>
> BUT:
>   - you have a 1D optimization. Use Brent method and supply bounds.
>   - I never intended CG (or BFGS or Nelder-Mead or ...) to work for 1D
>     problems
>   - as Jeff points out, you need the gradient. I stop Rcgmin and Rvmmin if
>     user hasn't supplied one, as numerical approximations need to be very
>     good for these gradient methods
>
> JN
>
> On 2020-03-12 10:03 a.m., Jeff Newmiller wrote:
> > The help file points out that CG is "fragile" ... and I would expect
> that failing to define a gradient function will exacerbate that.
> >
> > I think you should use a different algorithm or specify a gradient
> function. You might also consider working with the more recent optimr
> package contributed by Dr Nash, author of the original optim function in R.
> >
> > On March 12, 2020 2:30:26 AM PDT, Skyler Saleebyan <
> skylerbsaleebyan at gmail.com> wrote:
> >> I am trying to familiarize myself with optim() with a relatively simple
> >> maximization.
> >>
> >> Description:
> >> L and K are two terms which are constrained to add up to a total 100000
> >> (with respective weights to each). To map this constraint I plugged K
> >> into
> >> the function (to make this as simple as possible.)
> >>
> >> Together these two feed into one nonlinear function which is the
> >> product of
> >> two monotonic (on the positive interval) functions. Then that numbers
> >> is
> >> returned in a function fed to optim, which should maximize the output
> >> by
> >> adjusting L. The whole code is:
> >>
> >> production1 <- function(L){
> >>  budget=100000
> >>  Lcost=12
> >>  Kcost=15
> >>  K=(budget-L*Lcost)/Kcost
> >>  machines=0.05*L^(2/3)*K^(1/3)
> >>  return(machines)
> >> }
> >>
> >> # production1(6000) #example of number with much higher output vs optim
> >> result
> >> S1=optim(1001,production1,method="CG",control=list(fnscale=-1))
> >> S1
> >>
> >> Output:
> >> $par
> >> [1] 1006.536
> >>
> >> $value
> >> [1] 90.54671
> >>
> >> $counts
> >> function gradient
> >>     201      101
> >>
> >> $convergence
> >> [1] 1
> >>
> >> $message
> >> NULL
> >>
> >>
> >> For some reason this never explores the problem space and just spits
> >> out
> >> some answer close to the initial condition. What am I doing wrong?
> >>
> >> Thanks,
> >> Skyler S.
> >>
> >>      [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >
>

	[[alternative HTML version deleted]]


From @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com  Thu Mar 12 17:04:12 2020
From: @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com (Ana Marija)
Date: Thu, 12 Mar 2020 11:04:12 -0500
Subject: [R] how do I add text lables on QQ plot
In-Reply-To: <CAF9-5jMtXcBAF2_TpbVJOOtVUGAh0QDvvCWBsGAa6ZFXiPUXdA@mail.gmail.com>
References: <CAF9-5jMMFM3fA7sbyv4yNrfyF1Da7vw8RD2jcfTWOMT6Lfgi4A@mail.gmail.com>
 <a824d0cc-ba62-96cc-4836-934216715e37@comcast.net>
 <CAF9-5jNnY8kkzuiUFKd1cLGqe5mZRn1SUT6uwVhUmHNCRA8wAg@mail.gmail.com>
 <0e31c7e7-982c-2990-36ce-44618b988177@dewey.myzen.co.uk>
 <CAF9-5jMtXcBAF2_TpbVJOOtVUGAh0QDvvCWBsGAa6ZFXiPUXdA@mail.gmail.com>
Message-ID: <CAF9-5jNVQeSN4xE5uBx5OmEGYY2HcSLSbFFVxx-gcv-We8a1MQ@mail.gmail.com>

Also how would I add legend to this plot?

I searched qqman pages and there is no mention of that

qq(fdr2_sorted$FDR.q.val2, main = "RG_All", pch = 16,
col=fdr1_sorted$group, cex = 0.8, las = 1)

On Thu, Mar 12, 2020 at 9:30 AM Ana Marija <sokovic.anamarija at gmail.com> wrote:
>
> Hi Michael,
>
> can you please send me a line of code showing how it would be done.
>
> Thanks
> Ana
>
> On Thu, Mar 12, 2020 at 9:16 AM Michael Dewey <lists at dewey.myzen.co.uk> wrote:
> >
> > Dear Ana
> >
> > You can specify the first three parameters to text() as vectors so it is
> > all done in one call. That may or may not answer your question.
> >
> > Michael
> >
> > On 12/03/2020 14:08, Ana Marija wrote:
> > > HI David,
> > >
> > > thank you for getting back to me.
> > >
> > > Is there is a way for qq() to pick up text label names on its own or I
> > > have to specify each one manually?
> > > like in this example:
> > > text( 2, 6, "arbitrary")
> > >
> > > this is dput for
> > >
> > >> a=head(fdr2_sorted)
> > >> dput(a)
> > > structure(list(NAME = c("GO_DNA_PACKAGING_COMPLEX", "GO_PROTEIN_DNA_COMPLEX",
> > > "GO_RESPONSE_TO_TYPE_I_INTERFERON", "GO_RESPONSE_TO_INTERFERON_GAMMA",
> > > "GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA", "GO_GRANULOCYTE_MIGRATION"
> > > ), `GS<br> follow link to MSigDB` = c("GO_DNA_PACKAGING_COMPLEX",
> > > "GO_PROTEIN_DNA_COMPLEX", "GO_RESPONSE_TO_TYPE_I_INTERFERON",
> > > "GO_RESPONSE_TO_INTERFERON_GAMMA", "GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA",
> > > "GO_GRANULOCYTE_MIGRATION"), `GS DETAILS` = c("Details ...",
> > > "Details ...", "Details ...", "Details ...", "Details ...", "Details ..."
> > > ), SIZE = c(77L, 132L, 52L, 101L, 85L, 43L), ES = c(0.6757226,
> > > 0.59581786, -0.7521569, -0.63704145, -0.6571892, -0.7332099),
> > >      NES = c(2.466745, 2.3465202, -2.5331483, -2.4204733, -2.4021535,
> > >      -2.3989832), `NOM p-val` = c(0, 0, 0, 0, 0, 0), `FDR q-val` = c(0,
> > >      0, 0, 0, 0, 0), `FWER p-val` = c(0, 0, 0, 0, 0, 0), `RANK AT MAX` = c(1111L,
> > >      1516L, 1427L, 1819L, 1216L, 491L), `LEADING EDGE` = c("tags=43%,
> > > list=10%, signal=47%",
> > >      "tags=39%, list=13%, signal=45%", "tags=54%, list=12%, signal=61%",
> > >      "tags=45%, list=16%, signal=52%", "tags=38%, list=11%, signal=42%",
> > >      "tags=28%, list=4%, signal=29%"), V12 = c(NA, NA, NA, NA,
> > >      NA, NA), FDR.q.val2 = c(1e-10, 1e-10, 1e-10, 1e-10, 1e-10,
> > >      1e-10)), class = c("data.table", "data.frame"), row.names = c(NA,
> > > -6L), .internal.selfref = <pointer: 0x10400bae0>)
> > >
> > >> b=head(fdr1_sorted)
> > >> dput(b)
> > > structure(list(NAME = c("GO_DNA_PACKAGING_COMPLEX", "GO_PROTEIN_DNA_COMPLEX",
> > > "GO_RESPONSE_TO_TYPE_I_INTERFERON", "GO_RESPONSE_TO_INTERFERON_GAMMA",
> > > "GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA", "GO_GRANULOCYTE_MIGRATION"
> > > ), `GS<br> follow link to MSigDB` = c("GO_DNA_PACKAGING_COMPLEX",
> > > "GO_PROTEIN_DNA_COMPLEX", "GO_RESPONSE_TO_TYPE_I_INTERFERON",
> > > "GO_RESPONSE_TO_INTERFERON_GAMMA", "GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA",
> > > "GO_GRANULOCYTE_MIGRATION"), `GS DETAILS` = c("Details ...",
> > > "Details ...", "Details ...", "Details ...", "Details ...", "Details ..."
> > > ), SIZE = c(77L, 132L, 52L, 101L, 85L, 43L), ES = c(0.6757226,
> > > 0.59581786, -0.7521569, -0.63704145, -0.6571892, -0.7332099),
> > >      NES = c(2.466745, 2.3465202, -2.5331483, -2.4204733, -2.4021535,
> > >      -2.3989832), `NOM p-val` = c(0, 0, 0, 0, 0, 0), `FDR q-val` = c(0,
> > >      0, 0, 0, 0, 0), `FWER p-val` = c(0, 0, 0, 0, 0, 0), `RANK AT MAX` = c(1111L,
> > >      1516L, 1427L, 1819L, 1216L, 491L), `LEADING EDGE` = c("tags=43%,
> > > list=10%, signal=47%",
> > >      "tags=39%, list=13%, signal=45%", "tags=54%, list=12%, signal=61%",
> > >      "tags=45%, list=16%, signal=52%", "tags=38%, list=11%, signal=42%",
> > >      "tags=28%, list=4%, signal=29%"), V12 = c(NA, NA, NA, NA,
> > >      NA, NA), group = c(2, 2, 4, 4, 4, 4), FDR.q.val2 = c(1e-10,
> > >      1e-10, 1e-10, 1e-10, 1e-10, 1e-10)), class = c("data.table",
> > > "data.frame"), row.names = c(NA, -6L), .internal.selfref = <pointer:
> > > 0x10400bae0>)
> > >
> > > library(qqman)
> > > qq(fdr2_sorted$FDR.q.val2, main = "RG_All", pch = 16,
> > > col=fdr1_sorted$group, cex = 0.8, las = 1)
> > >
> > > Please advise
> > >
> > > On Wed, Mar 11, 2020 at 11:21 PM David Winsemius <dwinsemius at comcast.net> wrote:
> > >>
> > >>
> > >> On 3/10/20 9:51 PM, Ana Marija wrote:
> > >>> Hello,
> > >>>
> > >>> I am making QQ plot via:
> > >>>
> > >>> library(ggman)
> > >>> qq(fdr2_sorted$FDR.q.val2, main = "RG_All", pch = 17,
> > >>> col=fdr1_sorted$group, cex = 1, las = 1)
> > >>
> > >>
> > >> I think you may be confusing the audience. There is no qq function in
> > >> the ggman package. There is however a qq function in the qqman package.
> > >>
> > >>
> > >> Running the example in help page for qqman::qq and looking at the code
> > >> suggests this is a base plot function, so the text function will allow
> > >> you to put any particular string within the plot area:
> > >>
> > >> library(qqman)
> > >>
> > >> qq(gwasResults$P)
> > >> text( 2, 6, "arbitrary")  # puts text "arbitrary" at postion (x=2, y=6)
> > >>
> > >>>
> > >>> data frames used look like this:
> > >>>
> > >>>> head(fdr1_sorted)
> > >>
> > >> You should use `dput` to post reproducible data examples.
> > >>
> > >> HTH;
> > >>
> > >> David.
> > >>
> > >>>                                          NAME             GS<br> follow
> > >>> link to MSigDB  GS DETAILS SIZE         ES       NES NOM p-val
> > >>> 1:                 GO_DNA_PACKAGING_COMPLEX
> > >>> GO_DNA_PACKAGING_COMPLEX Details ...   77  0.6757226  2.466745
> > >>> 0
> > >>> 2:                   GO_PROTEIN_DNA_COMPLEX
> > >>> GO_PROTEIN_DNA_COMPLEX Details ...  132  0.5958179  2.346520         0
> > >>> 3:         GO_RESPONSE_TO_TYPE_I_INTERFERON
> > >>> GO_RESPONSE_TO_TYPE_I_INTERFERON Details ...   52 -0.7521569 -2.533148
> > >>>           0
> > >>> 4:          GO_RESPONSE_TO_INTERFERON_GAMMA
> > >>> GO_RESPONSE_TO_INTERFERON_GAMMA Details ...  101 -0.6370415 -2.420473
> > >>>          0
> > >>> 5: GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA
> > >>> GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA Details ...   85 -0.6571892
> > >>> -2.402153         0
> > >>> 6:                 GO_GRANULOCYTE_MIGRATION
> > >>> GO_GRANULOCYTE_MIGRATION Details ...   43 -0.7332099 -2.398983
> > >>> 0
> > >>>      FDR q-val FWER p-val RANK AT MAX                   LEADING EDGE V12
> > >>> group FDR.q.val2
> > >>> 1:         0          0        1111 tags=43%, list=10%, signal=47%  NA
> > >>>       2      1e-10
> > >>> 2:         0          0        1516 tags=39%, list=13%, signal=45%  NA
> > >>>       2      1e-10
> > >>> 3:         0          0        1427 tags=54%, list=12%, signal=61%  NA
> > >>>       4      1e-10
> > >>> 4:         0          0        1819 tags=45%, list=16%, signal=52%  NA
> > >>>       4      1e-10
> > >>> 5:         0          0        1216 tags=38%, list=11%, signal=42%  NA
> > >>>       4      1e-10
> > >>> 6:         0          0         491  tags=28%, list=4%, signal=29%  NA
> > >>>       4      1e-10
> > >>>
> > >>>> head(fdr2_sorted)
> > >>>                                          NAME             GS<br> follow
> > >>> link to MSigDB  GS DETAILS SIZE         ES       NES NOM p-val
> > >>> 1:                 GO_DNA_PACKAGING_COMPLEX
> > >>> GO_DNA_PACKAGING_COMPLEX Details ...   77  0.6757226  2.466745
> > >>> 0
> > >>> 2:                   GO_PROTEIN_DNA_COMPLEX
> > >>> GO_PROTEIN_DNA_COMPLEX Details ...  132  0.5958179  2.346520         0
> > >>> 3:         GO_RESPONSE_TO_TYPE_I_INTERFERON
> > >>> GO_RESPONSE_TO_TYPE_I_INTERFERON Details ...   52 -0.7521569 -2.533148
> > >>>           0
> > >>> 4:          GO_RESPONSE_TO_INTERFERON_GAMMA
> > >>> GO_RESPONSE_TO_INTERFERON_GAMMA Details ...  101 -0.6370415 -2.420473
> > >>>          0
> > >>> 5: GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA
> > >>> GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA Details ...   85 -0.6571892
> > >>> -2.402153         0
> > >>> 6:                 GO_GRANULOCYTE_MIGRATION
> > >>> GO_GRANULOCYTE_MIGRATION Details ...   43 -0.7332099 -2.398983
> > >>> 0
> > >>>      FDR q-val FWER p-val RANK AT MAX                   LEADING EDGE V12
> > >>> FDR.q.val2
> > >>> 1:         0          0        1111 tags=43%, list=10%, signal=47%  NA
> > >>>        1e-10
> > >>> 2:         0          0        1516 tags=39%, list=13%, signal=45%  NA
> > >>>        1e-10
> > >>> 3:         0          0        1427 tags=54%, list=12%, signal=61%  NA
> > >>>        1e-10
> > >>> 4:         0          0        1819 tags=45%, list=16%, signal=52%  NA
> > >>>        1e-10
> > >>> 5:         0          0        1216 tags=38%, list=11%, signal=42%  NA
> > >>>        1e-10
> > >>> 6:         0          0         491  tags=28%, list=4%, signal=29%  NA
> > >>>        1e-10
> > >>>
> > >>> and I would like to get the plot like the one in attach.
> > >>>
> > >>> Please advise,
> > >>> Ana
> > >>>
> > >>> ______________________________________________
> > >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >>> https://stat.ethz.ch/mailman/listinfo/r-help
> > >>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > >>> and provide commented, minimal, self-contained, reproducible code.
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> > >
> >
> > --
> > Michael
> > http://www.dewey.myzen.co.uk/home.html


From @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com  Thu Mar 12 18:17:50 2020
From: @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com (Ana Marija)
Date: Thu, 12 Mar 2020 12:17:50 -0500
Subject: [R] how do I add text lables on QQ plot
In-Reply-To: <CAF9-5jNVQeSN4xE5uBx5OmEGYY2HcSLSbFFVxx-gcv-We8a1MQ@mail.gmail.com>
References: <CAF9-5jMMFM3fA7sbyv4yNrfyF1Da7vw8RD2jcfTWOMT6Lfgi4A@mail.gmail.com>
 <a824d0cc-ba62-96cc-4836-934216715e37@comcast.net>
 <CAF9-5jNnY8kkzuiUFKd1cLGqe5mZRn1SUT6uwVhUmHNCRA8wAg@mail.gmail.com>
 <0e31c7e7-982c-2990-36ce-44618b988177@dewey.myzen.co.uk>
 <CAF9-5jMtXcBAF2_TpbVJOOtVUGAh0QDvvCWBsGAa6ZFXiPUXdA@mail.gmail.com>
 <CAF9-5jNVQeSN4xE5uBx5OmEGYY2HcSLSbFFVxx-gcv-We8a1MQ@mail.gmail.com>
Message-ID: <CAF9-5jMrb=Je0iLzP9kdmLdhg-A244NRAsms8kGhFLSDH33Azg@mail.gmail.com>

I could make legend via this:
qq(fdr2_sorted$FDR.q.val2, main = "RG_All", pch = 16,
col=fdr1_sorted$group, cex = 0.8, las = 1)
legend('topleft', legend = c('up-regulated', 'down-regulated'), fill =
c('red', 'blue'),bty="o")

but this gives me squares in legend. How do I write this code in order
to have circles in the legend?

On Thu, Mar 12, 2020 at 11:04 AM Ana Marija <sokovic.anamarija at gmail.com> wrote:
>
> Also how would I add legend to this plot?
>
> I searched qqman pages and there is no mention of that
>
> qq(fdr2_sorted$FDR.q.val2, main = "RG_All", pch = 16,
> col=fdr1_sorted$group, cex = 0.8, las = 1)
>
> On Thu, Mar 12, 2020 at 9:30 AM Ana Marija <sokovic.anamarija at gmail.com> wrote:
> >
> > Hi Michael,
> >
> > can you please send me a line of code showing how it would be done.
> >
> > Thanks
> > Ana
> >
> > On Thu, Mar 12, 2020 at 9:16 AM Michael Dewey <lists at dewey.myzen.co.uk> wrote:
> > >
> > > Dear Ana
> > >
> > > You can specify the first three parameters to text() as vectors so it is
> > > all done in one call. That may or may not answer your question.
> > >
> > > Michael
> > >
> > > On 12/03/2020 14:08, Ana Marija wrote:
> > > > HI David,
> > > >
> > > > thank you for getting back to me.
> > > >
> > > > Is there is a way for qq() to pick up text label names on its own or I
> > > > have to specify each one manually?
> > > > like in this example:
> > > > text( 2, 6, "arbitrary")
> > > >
> > > > this is dput for
> > > >
> > > >> a=head(fdr2_sorted)
> > > >> dput(a)
> > > > structure(list(NAME = c("GO_DNA_PACKAGING_COMPLEX", "GO_PROTEIN_DNA_COMPLEX",
> > > > "GO_RESPONSE_TO_TYPE_I_INTERFERON", "GO_RESPONSE_TO_INTERFERON_GAMMA",
> > > > "GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA", "GO_GRANULOCYTE_MIGRATION"
> > > > ), `GS<br> follow link to MSigDB` = c("GO_DNA_PACKAGING_COMPLEX",
> > > > "GO_PROTEIN_DNA_COMPLEX", "GO_RESPONSE_TO_TYPE_I_INTERFERON",
> > > > "GO_RESPONSE_TO_INTERFERON_GAMMA", "GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA",
> > > > "GO_GRANULOCYTE_MIGRATION"), `GS DETAILS` = c("Details ...",
> > > > "Details ...", "Details ...", "Details ...", "Details ...", "Details ..."
> > > > ), SIZE = c(77L, 132L, 52L, 101L, 85L, 43L), ES = c(0.6757226,
> > > > 0.59581786, -0.7521569, -0.63704145, -0.6571892, -0.7332099),
> > > >      NES = c(2.466745, 2.3465202, -2.5331483, -2.4204733, -2.4021535,
> > > >      -2.3989832), `NOM p-val` = c(0, 0, 0, 0, 0, 0), `FDR q-val` = c(0,
> > > >      0, 0, 0, 0, 0), `FWER p-val` = c(0, 0, 0, 0, 0, 0), `RANK AT MAX` = c(1111L,
> > > >      1516L, 1427L, 1819L, 1216L, 491L), `LEADING EDGE` = c("tags=43%,
> > > > list=10%, signal=47%",
> > > >      "tags=39%, list=13%, signal=45%", "tags=54%, list=12%, signal=61%",
> > > >      "tags=45%, list=16%, signal=52%", "tags=38%, list=11%, signal=42%",
> > > >      "tags=28%, list=4%, signal=29%"), V12 = c(NA, NA, NA, NA,
> > > >      NA, NA), FDR.q.val2 = c(1e-10, 1e-10, 1e-10, 1e-10, 1e-10,
> > > >      1e-10)), class = c("data.table", "data.frame"), row.names = c(NA,
> > > > -6L), .internal.selfref = <pointer: 0x10400bae0>)
> > > >
> > > >> b=head(fdr1_sorted)
> > > >> dput(b)
> > > > structure(list(NAME = c("GO_DNA_PACKAGING_COMPLEX", "GO_PROTEIN_DNA_COMPLEX",
> > > > "GO_RESPONSE_TO_TYPE_I_INTERFERON", "GO_RESPONSE_TO_INTERFERON_GAMMA",
> > > > "GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA", "GO_GRANULOCYTE_MIGRATION"
> > > > ), `GS<br> follow link to MSigDB` = c("GO_DNA_PACKAGING_COMPLEX",
> > > > "GO_PROTEIN_DNA_COMPLEX", "GO_RESPONSE_TO_TYPE_I_INTERFERON",
> > > > "GO_RESPONSE_TO_INTERFERON_GAMMA", "GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA",
> > > > "GO_GRANULOCYTE_MIGRATION"), `GS DETAILS` = c("Details ...",
> > > > "Details ...", "Details ...", "Details ...", "Details ...", "Details ..."
> > > > ), SIZE = c(77L, 132L, 52L, 101L, 85L, 43L), ES = c(0.6757226,
> > > > 0.59581786, -0.7521569, -0.63704145, -0.6571892, -0.7332099),
> > > >      NES = c(2.466745, 2.3465202, -2.5331483, -2.4204733, -2.4021535,
> > > >      -2.3989832), `NOM p-val` = c(0, 0, 0, 0, 0, 0), `FDR q-val` = c(0,
> > > >      0, 0, 0, 0, 0), `FWER p-val` = c(0, 0, 0, 0, 0, 0), `RANK AT MAX` = c(1111L,
> > > >      1516L, 1427L, 1819L, 1216L, 491L), `LEADING EDGE` = c("tags=43%,
> > > > list=10%, signal=47%",
> > > >      "tags=39%, list=13%, signal=45%", "tags=54%, list=12%, signal=61%",
> > > >      "tags=45%, list=16%, signal=52%", "tags=38%, list=11%, signal=42%",
> > > >      "tags=28%, list=4%, signal=29%"), V12 = c(NA, NA, NA, NA,
> > > >      NA, NA), group = c(2, 2, 4, 4, 4, 4), FDR.q.val2 = c(1e-10,
> > > >      1e-10, 1e-10, 1e-10, 1e-10, 1e-10)), class = c("data.table",
> > > > "data.frame"), row.names = c(NA, -6L), .internal.selfref = <pointer:
> > > > 0x10400bae0>)
> > > >
> > > > library(qqman)
> > > > qq(fdr2_sorted$FDR.q.val2, main = "RG_All", pch = 16,
> > > > col=fdr1_sorted$group, cex = 0.8, las = 1)
> > > >
> > > > Please advise
> > > >
> > > > On Wed, Mar 11, 2020 at 11:21 PM David Winsemius <dwinsemius at comcast.net> wrote:
> > > >>
> > > >>
> > > >> On 3/10/20 9:51 PM, Ana Marija wrote:
> > > >>> Hello,
> > > >>>
> > > >>> I am making QQ plot via:
> > > >>>
> > > >>> library(ggman)
> > > >>> qq(fdr2_sorted$FDR.q.val2, main = "RG_All", pch = 17,
> > > >>> col=fdr1_sorted$group, cex = 1, las = 1)
> > > >>
> > > >>
> > > >> I think you may be confusing the audience. There is no qq function in
> > > >> the ggman package. There is however a qq function in the qqman package.
> > > >>
> > > >>
> > > >> Running the example in help page for qqman::qq and looking at the code
> > > >> suggests this is a base plot function, so the text function will allow
> > > >> you to put any particular string within the plot area:
> > > >>
> > > >> library(qqman)
> > > >>
> > > >> qq(gwasResults$P)
> > > >> text( 2, 6, "arbitrary")  # puts text "arbitrary" at postion (x=2, y=6)
> > > >>
> > > >>>
> > > >>> data frames used look like this:
> > > >>>
> > > >>>> head(fdr1_sorted)
> > > >>
> > > >> You should use `dput` to post reproducible data examples.
> > > >>
> > > >> HTH;
> > > >>
> > > >> David.
> > > >>
> > > >>>                                          NAME             GS<br> follow
> > > >>> link to MSigDB  GS DETAILS SIZE         ES       NES NOM p-val
> > > >>> 1:                 GO_DNA_PACKAGING_COMPLEX
> > > >>> GO_DNA_PACKAGING_COMPLEX Details ...   77  0.6757226  2.466745
> > > >>> 0
> > > >>> 2:                   GO_PROTEIN_DNA_COMPLEX
> > > >>> GO_PROTEIN_DNA_COMPLEX Details ...  132  0.5958179  2.346520         0
> > > >>> 3:         GO_RESPONSE_TO_TYPE_I_INTERFERON
> > > >>> GO_RESPONSE_TO_TYPE_I_INTERFERON Details ...   52 -0.7521569 -2.533148
> > > >>>           0
> > > >>> 4:          GO_RESPONSE_TO_INTERFERON_GAMMA
> > > >>> GO_RESPONSE_TO_INTERFERON_GAMMA Details ...  101 -0.6370415 -2.420473
> > > >>>          0
> > > >>> 5: GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA
> > > >>> GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA Details ...   85 -0.6571892
> > > >>> -2.402153         0
> > > >>> 6:                 GO_GRANULOCYTE_MIGRATION
> > > >>> GO_GRANULOCYTE_MIGRATION Details ...   43 -0.7332099 -2.398983
> > > >>> 0
> > > >>>      FDR q-val FWER p-val RANK AT MAX                   LEADING EDGE V12
> > > >>> group FDR.q.val2
> > > >>> 1:         0          0        1111 tags=43%, list=10%, signal=47%  NA
> > > >>>       2      1e-10
> > > >>> 2:         0          0        1516 tags=39%, list=13%, signal=45%  NA
> > > >>>       2      1e-10
> > > >>> 3:         0          0        1427 tags=54%, list=12%, signal=61%  NA
> > > >>>       4      1e-10
> > > >>> 4:         0          0        1819 tags=45%, list=16%, signal=52%  NA
> > > >>>       4      1e-10
> > > >>> 5:         0          0        1216 tags=38%, list=11%, signal=42%  NA
> > > >>>       4      1e-10
> > > >>> 6:         0          0         491  tags=28%, list=4%, signal=29%  NA
> > > >>>       4      1e-10
> > > >>>
> > > >>>> head(fdr2_sorted)
> > > >>>                                          NAME             GS<br> follow
> > > >>> link to MSigDB  GS DETAILS SIZE         ES       NES NOM p-val
> > > >>> 1:                 GO_DNA_PACKAGING_COMPLEX
> > > >>> GO_DNA_PACKAGING_COMPLEX Details ...   77  0.6757226  2.466745
> > > >>> 0
> > > >>> 2:                   GO_PROTEIN_DNA_COMPLEX
> > > >>> GO_PROTEIN_DNA_COMPLEX Details ...  132  0.5958179  2.346520         0
> > > >>> 3:         GO_RESPONSE_TO_TYPE_I_INTERFERON
> > > >>> GO_RESPONSE_TO_TYPE_I_INTERFERON Details ...   52 -0.7521569 -2.533148
> > > >>>           0
> > > >>> 4:          GO_RESPONSE_TO_INTERFERON_GAMMA
> > > >>> GO_RESPONSE_TO_INTERFERON_GAMMA Details ...  101 -0.6370415 -2.420473
> > > >>>          0
> > > >>> 5: GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA
> > > >>> GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA Details ...   85 -0.6571892
> > > >>> -2.402153         0
> > > >>> 6:                 GO_GRANULOCYTE_MIGRATION
> > > >>> GO_GRANULOCYTE_MIGRATION Details ...   43 -0.7332099 -2.398983
> > > >>> 0
> > > >>>      FDR q-val FWER p-val RANK AT MAX                   LEADING EDGE V12
> > > >>> FDR.q.val2
> > > >>> 1:         0          0        1111 tags=43%, list=10%, signal=47%  NA
> > > >>>        1e-10
> > > >>> 2:         0          0        1516 tags=39%, list=13%, signal=45%  NA
> > > >>>        1e-10
> > > >>> 3:         0          0        1427 tags=54%, list=12%, signal=61%  NA
> > > >>>        1e-10
> > > >>> 4:         0          0        1819 tags=45%, list=16%, signal=52%  NA
> > > >>>        1e-10
> > > >>> 5:         0          0        1216 tags=38%, list=11%, signal=42%  NA
> > > >>>        1e-10
> > > >>> 6:         0          0         491  tags=28%, list=4%, signal=29%  NA
> > > >>>        1e-10
> > > >>>
> > > >>> and I would like to get the plot like the one in attach.
> > > >>>
> > > >>> Please advise,
> > > >>> Ana
> > > >>>
> > > >>> ______________________________________________
> > > >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > >>> https://stat.ethz.ch/mailman/listinfo/r-help
> > > >>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > > >>> and provide commented, minimal, self-contained, reproducible code.
> > > >
> > > > ______________________________________________
> > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > > > and provide commented, minimal, self-contained, reproducible code.
> > > >
> > >
> > > --
> > > Michael
> > > http://www.dewey.myzen.co.uk/home.html


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Thu Mar 12 18:15:53 2020
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Thu, 12 Mar 2020 18:15:53 +0100
Subject: [R] Unintended behaviour (possibly bugs)
In-Reply-To: <CAD-ePxZELLi+zvkT8AmF6R9vffB+_K3vi6PMLONi2RViuSBFng@mail.gmail.com>
References: <CAD-ePxY3WOumNjaED5OwHtGWnzGecom+5MLGNgeEWS4sbBxGiw@mail.gmail.com>
 <bd143039-d302-fee9-7350-ec01a61c17e1@sapo.pt>
 <CAD-ePxZ-MytqqfQUiEE9+4e_T8kyfj4kiYcRTj4GsYcupGLj8A@mail.gmail.com>
 <cd83233c-5794-d741-cf9d-32d4435cf590@sapo.pt>
 <CADfFDC6HGT0X0d5xnrCfRKybp9SRehU10c3C5hGAm0USNtndWQ@mail.gmail.com>
 <CAD-ePxZELLi+zvkT8AmF6R9vffB+_K3vi6PMLONi2RViuSBFng@mail.gmail.com>
Message-ID: <24170.28233.24528.535254@stat.math.ethz.ch>

>>>>> Alexey Shipunov 
>>>>>     on Tue, 18 Feb 2020 14:34:48 +0900 writes:

    > Thank you for the detailed explanation. I tend to agree. However, this
    > behavior is relatively easy to remediate:

    > This is the piece of the current code:

    > ===
    > if (!(is.null(labels) && is.null(glabels))) {
    >    nmai <- par("mai")
    >    nmai[2L] <- nmai[4L] + max(linch + goffset, ginch) + 0.1
    >    par(mai = nmai)
    > }
    > ===

    > This is my proposal:

    > ===
    > yinch <- if (!is.null(ylab)) 0.4 else 0
    > if (!(is.null(labels) && is.null(glabels))) {
    >    nmai <- par("mai")
    >    nm.2 <- nmai[4L] + max(if(is.null(ylab)) 0 else 0.4) + linch + goffset, ginch) + 0.1
    >    if (nmai[2L] < nm.2)
    >       nmai[2L] <- nm.2
    >    par(mai = nmai)
    > }
    > ===

    > Then margins and y-axis labels start to work normally. I wonder if
    > this (or similar) is possible to introduce into the code?

    > Alexey

Well, I had looked at this back then (~Feb 18), and now had a
considerable longer look.

Your suggestion makes sense,  but then it needs even more work
to ensure that the  'ylab'  y-axis label will be placed properly.

Of course, Deepayan (author of grid-based 'lattice')  is right
that dotchart()s implementation is pretty hackish ... but then
still.

I have (+-) fixed this in the sources of "R-devel" the
development version of R (which should become R 4.0.0  on April
24 as was announced today).

Now, things like this (extended) example work nicely :

op <- par(xaxs = "i")  # 0 -- 100\%
dotchart(t(VADeaths), xlim = c(0,100), bg = "skyblue",
         main = "Death Rates in Virginia - 1940", xlab = "rate [ % ]",
         ylab = "Grouping:  Age  x   Urbanity . Gender")
par(op)


Thank you, Alexey, for your report and bug fix suggestion!

Best regards,

Martin Maechler
ETH Zurich and R Core team



    > ........... 17:37, Deepayan Sarkar <deepayan.sarkar at gmail.com>:
    >> 
    >> On Mon, Feb 17, 2020 at 10:24 AM Rui Barradas <ruipbarradas at sapo.pt> wrot=
    > e:
    >> >
    >> > Hello,
    >> >
    >> > Yes, this is definitely a bug.
    >> 
    >> I would argue that the only bug here is that the documentation doesn't
    >> say that 'ylab' may not behave as expected.
    >> 
    >> dotchart() is mainly designed for 2-way tables (see the VADeaths
    >> example), but it's implementation is really pretty hackish because it
    >> has to work within the limited traditional graphics framework. The
    >> main problem is that dot plots want to put horizontal y-axis labels
    >> (usually derived from factor levels), which are often longer than the
    >> default margins, so the margins are modified. Unfortunately they are
    >> only re-set on exit, and so the ylab that is plotted inside dotchart()
    >> may be clipped. Traditionally, Cleveland dot plots don't have a y-axis
    >> label; it's assumed that the factor levels are sufficient (and for
    >> 2-way tables, there would be two variables, so there is no sensible
    >> default).
    >> 
    >> I doubt that dotchart() is worth fixing (except to maybe disallow
    >> ylab). If you want flexibility, use modern grid-based alternatives
    >> such as lattice::dotplot() or ggplot2.
    >> 
    >> -Deepayan
    >> 
    >> > Even the matrix plot is puzzling, with a "1" as top row sort-of-label
    >> > but no grid line. I'm trying to follow the source code of dotchart but
    >> > am yet to understand exactly what it does to decide the margins setting=
    > s.
    >> >
    >> >      if (!(is.null(labels) && is.null(glabels))) {
    >> >        nmai <- par("mai")
    >> >        nmai[2L] <- nmai[4L] + max(linch + goffset, ginch) +
    >> >          0.1
    >> >        par(mai = nmai)
    >> >      }
    >> >
    >> > This should be moved to r-devel?
    >> >
    >> > Rui Barradas
    >> >
    >> >  03:33 de 17/02/20, Alexey Shipunov escreveu:
    >> > > John and Rui, thanks!
    >> > >
    >> > > However, if we use the proper object, the problem still persists:
    >> > >
    >> > > dotchart(c("3"=1, "2"=2, "1"=3), ylab="Ylab") # ylab is invisible
    >> > > dotchart(c("aa"=1, "b"=2, "cc"=3), ylab="Ylab") # ylab is partly visible (!!!)
    >> > > dotchart(c("aaa"=1, "bbb"=2, "ccc"=3), ylab="Ylab") # ylab is well visible
    >> > >
    >> > > If the object is matrix, ylab is visible:
    >> > >
    >> > > dotchart(matrix(1:3, dimnames=list(c("aa","bb","cc"), NULL)), ylab="Ylab")
    >> > >
    >> > > But the ?dotchart explicitly says that "x: either a vector or matrix
    >> > > of numeric values" and then "labels: a vector of labels for each
    >> > > point.  For vectors the default is to use  "names(x) = ...".
    >> > >
    >> > > So this is likely a bug. Do you agree?
    >> > >
    >> > > Alexey
    >> > >
    >> > > ..... 01:55, Rui Barradas <ruipbarradas at sapo.pt>:
    >> > >>
    >> > >> Hello,
    >> > >>
    >> > >> I believe you are wrong, the error is not in dotchart, it's in your
    >> > >> code. You assume that to plot an object of class "table" is the same as
    >> > >> to plot an object of class "numeric".
    >> > >>
    >> > >> Inline.
    >> > >>
    >> > >> =C3=80s 12:21 de 16/02/20, Alexey Shipunov escreveu:
    >> > >>> Dear list,
    >> > >>>
    >> > >>> I have been advised to share these with R-help instead of filling the
    >> > >>> bug report:
    >> > >>>
    >> > >>> 1) dotchart() does not allow to see the left axis title ('ylab') and
    >> > >>> cannot change the left margin (outer margin 2) of the plot
    >> > >>>
    >> > >>> The code:
    >> > >>>
    >> > >>> aa <- table(c(1, 1, 1, 2, 2, 3))
    >> > >>> dotchart(aa, ylab="Ylab") # does not show 'ylab'
    >> > >>
    >> > >> You are right, it does *not* show 'ylab' but the user is warned.
    >> > >>
    >> > >>
    >> > >> aa <- table(c(1, 1, 1, 2, 2, 3))
    >> > >> dotchart(aa, ylab = "Ylab") # does show 'ylab'
    >> > >> #Warning message:
    >> > >> #In dotchart(aa, ylab = "Ylab") :
    >> > >> #  'x' is neither a vector nor a matrix: using as.numeric(x)
    >> > >>
    >> > >>
    >> > >> My code:
    >> > >>
    >> > >>
    >> > >> (mar <- par("mar"))    # new R session
    >> > >> #[1] 5.1 4.1 4.1 2.1   # the left margin is 4.1
    >> > >>
    >> > >> aa <- as.numeric(table(c(1, 1, 1, 2, 2, 3)))
    >> > >>
    >> > >> dotchart(aa, ylab = "Ylab") # It does show 'ylab'
    >> > >> old.par <- par(mar = mar + c(0, 5, 0, 0))
    >> > >> par("mar")
    >> > >> #[1] 5.1 9.1 4.1 2.1
    >> > >>
    >> > >> dotchart(aa, ylab = "Ylab")  # The left margin is now 9.1, much bigger
    >> > >>
    >> > >> par(old.par)                 # It does change the left margin
    >> > >> dotchart(aa, ylab = "Ylab")  #  but only when a new graph is plotted.
    >> > >>
    >> > >>
    >> > >>
    >> > >>> old.par <- par(mar=c(1, 10, 1, 1)) ; dotchart(aa, ylab="Ylab") ;
    >> > >>> par(old.par) # does not change left margin
    >> > >>>
    >> > >>> Possible solution:
    >> > >>>
    >> > >>> I researched the problem and think that the dotchart() code will need
    >> > >>> few corrections. If there is an interest, I can post it here; or you
    >> > >>> can look at the code of shipunov::Dotchart1() function.
    >> > >>>
    >> > >>> 2) example(hist) includes two "wrong" and "extreme" examples which
    >> > >>> slow down and even crash R on some systems; this make it unsuitable
    >> > >>> for demonstration in the class and strikes beginners in R who just
    >> > >>> want to understand how hist() works. Actually, I did it last week (I
    >> > >>> was not aware of these examples), and in the class two computers hang,
    >> > >>> and many others were extremely slow.
    >> > >>>
    >> > >>> The code:
    >> > >>>
    >> > >>> example(hist)
    >> > >>>
    >> > >>> Possible solution:
    >> > >>>
    >> > >>> If R maintainers will enclose parts of "hist" example in \dontrun{},
    >> > >>> this will allow to see the code but in the same time will not strike
    >> > >>> beginners in R who just
    >> > >>> want to understand how hist() works. They will still be possible to
    >> > >>> run with example(..., run.dontrun=TRUE).
    >> > >>
    >> > >> Agree, it's annoying. Sometimes there's a Warning section after the
    >> > >> Details section. Maybe such a section could get users' attention to
    >> > >> those examples? At least it wouldn't hurt...
    >> > >>
    >> > >>
    >> > >> Hope this helps,
    >> > >>
    >> > >> Rui Barradas
    >> > >>
    >> > >>>
    >> > >>> With best wishes,
    >> > >>>
    >> > >>> Alexey Shipunov
    >> > >>> ______________________________________________


From @purd|e@@ @end|ng |rom gm@||@com  Thu Mar 12 18:23:35 2020
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Fri, 13 Mar 2020 06:23:35 +1300
Subject: [R] how do I add text lables on QQ plot
In-Reply-To: <CAF9-5jMtXcBAF2_TpbVJOOtVUGAh0QDvvCWBsGAa6ZFXiPUXdA@mail.gmail.com>
References: <CAF9-5jMMFM3fA7sbyv4yNrfyF1Da7vw8RD2jcfTWOMT6Lfgi4A@mail.gmail.com>
 <a824d0cc-ba62-96cc-4836-934216715e37@comcast.net>
 <CAF9-5jNnY8kkzuiUFKd1cLGqe5mZRn1SUT6uwVhUmHNCRA8wAg@mail.gmail.com>
 <0e31c7e7-982c-2990-36ce-44618b988177@dewey.myzen.co.uk>
 <CAF9-5jMtXcBAF2_TpbVJOOtVUGAh0QDvvCWBsGAa6ZFXiPUXdA@mail.gmail.com>
Message-ID: <CAB8pepyjw+7qO_SdWVz4KK8v14ZoVWQoRwjLEnTqG6AHKRm1hA@mail.gmail.com>

Hi Ana,

I've already given you an example of using the text function with vectors.

I note that this thread contains a lot of duplication.
I'd recommend people read the whole thread before posting.


On Fri, Mar 13, 2020 at 3:42 AM Ana Marija <sokovic.anamarija at gmail.com> wrote:
>
> Hi Michael,
>
> can you please send me a line of code showing how it would be done.
>
> Thanks
> Ana
>
> On Thu, Mar 12, 2020 at 9:16 AM Michael Dewey <lists at dewey.myzen.co.uk> wrote:
> >
> > Dear Ana
> >
> > You can specify the first three parameters to text() as vectors so it is
> > all done in one call. That may or may not answer your question.
> >
> > Michael
> >
> > On 12/03/2020 14:08, Ana Marija wrote:
> > > HI David,
> > >
> > > thank you for getting back to me.
> > >
> > > Is there is a way for qq() to pick up text label names on its own or I
> > > have to specify each one manually?
> > > like in this example:
> > > text( 2, 6, "arbitrary")
> > >
> > > this is dput for
> > >
> > >> a=head(fdr2_sorted)
> > >> dput(a)
> > > structure(list(NAME = c("GO_DNA_PACKAGING_COMPLEX", "GO_PROTEIN_DNA_COMPLEX",
> > > "GO_RESPONSE_TO_TYPE_I_INTERFERON", "GO_RESPONSE_TO_INTERFERON_GAMMA",
> > > "GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA", "GO_GRANULOCYTE_MIGRATION"
> > > ), `GS<br> follow link to MSigDB` = c("GO_DNA_PACKAGING_COMPLEX",
> > > "GO_PROTEIN_DNA_COMPLEX", "GO_RESPONSE_TO_TYPE_I_INTERFERON",
> > > "GO_RESPONSE_TO_INTERFERON_GAMMA", "GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA",
> > > "GO_GRANULOCYTE_MIGRATION"), `GS DETAILS` = c("Details ...",
> > > "Details ...", "Details ...", "Details ...", "Details ...", "Details ..."
> > > ), SIZE = c(77L, 132L, 52L, 101L, 85L, 43L), ES = c(0.6757226,
> > > 0.59581786, -0.7521569, -0.63704145, -0.6571892, -0.7332099),
> > >      NES = c(2.466745, 2.3465202, -2.5331483, -2.4204733, -2.4021535,
> > >      -2.3989832), `NOM p-val` = c(0, 0, 0, 0, 0, 0), `FDR q-val` = c(0,
> > >      0, 0, 0, 0, 0), `FWER p-val` = c(0, 0, 0, 0, 0, 0), `RANK AT MAX` = c(1111L,
> > >      1516L, 1427L, 1819L, 1216L, 491L), `LEADING EDGE` = c("tags=43%,
> > > list=10%, signal=47%",
> > >      "tags=39%, list=13%, signal=45%", "tags=54%, list=12%, signal=61%",
> > >      "tags=45%, list=16%, signal=52%", "tags=38%, list=11%, signal=42%",
> > >      "tags=28%, list=4%, signal=29%"), V12 = c(NA, NA, NA, NA,
> > >      NA, NA), FDR.q.val2 = c(1e-10, 1e-10, 1e-10, 1e-10, 1e-10,
> > >      1e-10)), class = c("data.table", "data.frame"), row.names = c(NA,
> > > -6L), .internal.selfref = <pointer: 0x10400bae0>)
> > >
> > >> b=head(fdr1_sorted)
> > >> dput(b)
> > > structure(list(NAME = c("GO_DNA_PACKAGING_COMPLEX", "GO_PROTEIN_DNA_COMPLEX",
> > > "GO_RESPONSE_TO_TYPE_I_INTERFERON", "GO_RESPONSE_TO_INTERFERON_GAMMA",
> > > "GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA", "GO_GRANULOCYTE_MIGRATION"
> > > ), `GS<br> follow link to MSigDB` = c("GO_DNA_PACKAGING_COMPLEX",
> > > "GO_PROTEIN_DNA_COMPLEX", "GO_RESPONSE_TO_TYPE_I_INTERFERON",
> > > "GO_RESPONSE_TO_INTERFERON_GAMMA", "GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA",
> > > "GO_GRANULOCYTE_MIGRATION"), `GS DETAILS` = c("Details ...",
> > > "Details ...", "Details ...", "Details ...", "Details ...", "Details ..."
> > > ), SIZE = c(77L, 132L, 52L, 101L, 85L, 43L), ES = c(0.6757226,
> > > 0.59581786, -0.7521569, -0.63704145, -0.6571892, -0.7332099),
> > >      NES = c(2.466745, 2.3465202, -2.5331483, -2.4204733, -2.4021535,
> > >      -2.3989832), `NOM p-val` = c(0, 0, 0, 0, 0, 0), `FDR q-val` = c(0,
> > >      0, 0, 0, 0, 0), `FWER p-val` = c(0, 0, 0, 0, 0, 0), `RANK AT MAX` = c(1111L,
> > >      1516L, 1427L, 1819L, 1216L, 491L), `LEADING EDGE` = c("tags=43%,
> > > list=10%, signal=47%",
> > >      "tags=39%, list=13%, signal=45%", "tags=54%, list=12%, signal=61%",
> > >      "tags=45%, list=16%, signal=52%", "tags=38%, list=11%, signal=42%",
> > >      "tags=28%, list=4%, signal=29%"), V12 = c(NA, NA, NA, NA,
> > >      NA, NA), group = c(2, 2, 4, 4, 4, 4), FDR.q.val2 = c(1e-10,
> > >      1e-10, 1e-10, 1e-10, 1e-10, 1e-10)), class = c("data.table",
> > > "data.frame"), row.names = c(NA, -6L), .internal.selfref = <pointer:
> > > 0x10400bae0>)
> > >
> > > library(qqman)
> > > qq(fdr2_sorted$FDR.q.val2, main = "RG_All", pch = 16,
> > > col=fdr1_sorted$group, cex = 0.8, las = 1)
> > >
> > > Please advise
> > >
> > > On Wed, Mar 11, 2020 at 11:21 PM David Winsemius <dwinsemius at comcast.net> wrote:
> > >>
> > >>
> > >> On 3/10/20 9:51 PM, Ana Marija wrote:
> > >>> Hello,
> > >>>
> > >>> I am making QQ plot via:
> > >>>
> > >>> library(ggman)
> > >>> qq(fdr2_sorted$FDR.q.val2, main = "RG_All", pch = 17,
> > >>> col=fdr1_sorted$group, cex = 1, las = 1)
> > >>
> > >>
> > >> I think you may be confusing the audience. There is no qq function in
> > >> the ggman package. There is however a qq function in the qqman package.
> > >>
> > >>
> > >> Running the example in help page for qqman::qq and looking at the code
> > >> suggests this is a base plot function, so the text function will allow
> > >> you to put any particular string within the plot area:
> > >>
> > >> library(qqman)
> > >>
> > >> qq(gwasResults$P)
> > >> text( 2, 6, "arbitrary")  # puts text "arbitrary" at postion (x=2, y=6)
> > >>
> > >>>
> > >>> data frames used look like this:
> > >>>
> > >>>> head(fdr1_sorted)
> > >>
> > >> You should use `dput` to post reproducible data examples.
> > >>
> > >> HTH;
> > >>
> > >> David.
> > >>
> > >>>                                          NAME             GS<br> follow
> > >>> link to MSigDB  GS DETAILS SIZE         ES       NES NOM p-val
> > >>> 1:                 GO_DNA_PACKAGING_COMPLEX
> > >>> GO_DNA_PACKAGING_COMPLEX Details ...   77  0.6757226  2.466745
> > >>> 0
> > >>> 2:                   GO_PROTEIN_DNA_COMPLEX
> > >>> GO_PROTEIN_DNA_COMPLEX Details ...  132  0.5958179  2.346520         0
> > >>> 3:         GO_RESPONSE_TO_TYPE_I_INTERFERON
> > >>> GO_RESPONSE_TO_TYPE_I_INTERFERON Details ...   52 -0.7521569 -2.533148
> > >>>           0
> > >>> 4:          GO_RESPONSE_TO_INTERFERON_GAMMA
> > >>> GO_RESPONSE_TO_INTERFERON_GAMMA Details ...  101 -0.6370415 -2.420473
> > >>>          0
> > >>> 5: GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA
> > >>> GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA Details ...   85 -0.6571892
> > >>> -2.402153         0
> > >>> 6:                 GO_GRANULOCYTE_MIGRATION
> > >>> GO_GRANULOCYTE_MIGRATION Details ...   43 -0.7332099 -2.398983
> > >>> 0
> > >>>      FDR q-val FWER p-val RANK AT MAX                   LEADING EDGE V12
> > >>> group FDR.q.val2
> > >>> 1:         0          0        1111 tags=43%, list=10%, signal=47%  NA
> > >>>       2      1e-10
> > >>> 2:         0          0        1516 tags=39%, list=13%, signal=45%  NA
> > >>>       2      1e-10
> > >>> 3:         0          0        1427 tags=54%, list=12%, signal=61%  NA
> > >>>       4      1e-10
> > >>> 4:         0          0        1819 tags=45%, list=16%, signal=52%  NA
> > >>>       4      1e-10
> > >>> 5:         0          0        1216 tags=38%, list=11%, signal=42%  NA
> > >>>       4      1e-10
> > >>> 6:         0          0         491  tags=28%, list=4%, signal=29%  NA
> > >>>       4      1e-10
> > >>>
> > >>>> head(fdr2_sorted)
> > >>>                                          NAME             GS<br> follow
> > >>> link to MSigDB  GS DETAILS SIZE         ES       NES NOM p-val
> > >>> 1:                 GO_DNA_PACKAGING_COMPLEX
> > >>> GO_DNA_PACKAGING_COMPLEX Details ...   77  0.6757226  2.466745
> > >>> 0
> > >>> 2:                   GO_PROTEIN_DNA_COMPLEX
> > >>> GO_PROTEIN_DNA_COMPLEX Details ...  132  0.5958179  2.346520         0
> > >>> 3:         GO_RESPONSE_TO_TYPE_I_INTERFERON
> > >>> GO_RESPONSE_TO_TYPE_I_INTERFERON Details ...   52 -0.7521569 -2.533148
> > >>>           0
> > >>> 4:          GO_RESPONSE_TO_INTERFERON_GAMMA
> > >>> GO_RESPONSE_TO_INTERFERON_GAMMA Details ...  101 -0.6370415 -2.420473
> > >>>          0
> > >>> 5: GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA
> > >>> GO_CELLULAR_RESPONSE_TO_INTERFERON_GAMMA Details ...   85 -0.6571892
> > >>> -2.402153         0
> > >>> 6:                 GO_GRANULOCYTE_MIGRATION
> > >>> GO_GRANULOCYTE_MIGRATION Details ...   43 -0.7332099 -2.398983
> > >>> 0
> > >>>      FDR q-val FWER p-val RANK AT MAX                   LEADING EDGE V12
> > >>> FDR.q.val2
> > >>> 1:         0          0        1111 tags=43%, list=10%, signal=47%  NA
> > >>>        1e-10
> > >>> 2:         0          0        1516 tags=39%, list=13%, signal=45%  NA
> > >>>        1e-10
> > >>> 3:         0          0        1427 tags=54%, list=12%, signal=61%  NA
> > >>>        1e-10
> > >>> 4:         0          0        1819 tags=45%, list=16%, signal=52%  NA
> > >>>        1e-10
> > >>> 5:         0          0        1216 tags=38%, list=11%, signal=42%  NA
> > >>>        1e-10
> > >>> 6:         0          0         491  tags=28%, list=4%, signal=29%  NA
> > >>>        1e-10
> > >>>
> > >>> and I would like to get the plot like the one in attach.
> > >>>
> > >>> Please advise,
> > >>> Ana
> > >>>
> > >>> ______________________________________________
> > >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >>> https://stat.ethz.ch/mailman/listinfo/r-help
> > >>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > >>> and provide commented, minimal, self-contained, reproducible code.
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> > >
> >
> > --
> > Michael
> > http://www.dewey.myzen.co.uk/home.html
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @purd|e@@ @end|ng |rom gm@||@com  Thu Mar 12 18:47:48 2020
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Fri, 13 Mar 2020 06:47:48 +1300
Subject: [R] how do I add text lables on QQ plot
In-Reply-To: <CAF9-5jMrb=Je0iLzP9kdmLdhg-A244NRAsms8kGhFLSDH33Azg@mail.gmail.com>
References: <CAF9-5jMMFM3fA7sbyv4yNrfyF1Da7vw8RD2jcfTWOMT6Lfgi4A@mail.gmail.com>
 <a824d0cc-ba62-96cc-4836-934216715e37@comcast.net>
 <CAF9-5jNnY8kkzuiUFKd1cLGqe5mZRn1SUT6uwVhUmHNCRA8wAg@mail.gmail.com>
 <0e31c7e7-982c-2990-36ce-44618b988177@dewey.myzen.co.uk>
 <CAF9-5jMtXcBAF2_TpbVJOOtVUGAh0QDvvCWBsGAa6ZFXiPUXdA@mail.gmail.com>
 <CAF9-5jNVQeSN4xE5uBx5OmEGYY2HcSLSbFFVxx-gcv-We8a1MQ@mail.gmail.com>
 <CAF9-5jMrb=Je0iLzP9kdmLdhg-A244NRAsms8kGhFLSDH33Azg@mail.gmail.com>
Message-ID: <CAB8pepyF+44RVHgzV6bxM2_8VHBqRYCQceGDqRguHYbN9O7kRQ@mail.gmail.com>

The plotting character is determined by the pch argument.
i.e. You need to specify the pch argument in the legend call.

Here's the R code to preview the first 20 plotting characters:

> plot (1:20, rep (0, 20), pch=1:20, ylim = c (-5, 5) )
> text (1:20, rep (1, 20), 1:20)

Empty circles, have a pch value of 1.
Solid circles, have a pch value of 16.
In general, to set the color, use the col argument.

So, you could add the following to your legend call:

> ..., pch=16, col = c ("red", "blue"), ...

And remove the fill argument.



On 3/13/20, Ana Marija <sokovic.anamarija at gmail.com> wrote:
> I could make legend via this:
> qq(fdr2_sorted$FDR.q.val2, main = "RG_All", pch = 16,
> col=fdr1_sorted$group, cex = 0.8, las = 1)
> legend('topleft', legend = c('up-regulated', 'down-regulated'), fill =
> c('red', 'blue'),bty="o")
>
> but this gives me squares in legend. How do I write this code in order
> to have circles in the legend?
>
> On Thu, Mar 12, 2020 at 11:04 AM Ana Marija <sokovic.anamarija at gmail.com>
> wrote:
>>
>> Also how would I add legend to this plot?
>>
>> I searched qqman pages and there is no mention of that


From @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com  Thu Mar 12 19:39:00 2020
From: @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com (Ana Marija)
Date: Thu, 12 Mar 2020 13:39:00 -0500
Subject: [R] how do I add text lables on QQ plot
In-Reply-To: <CAB8pepyF+44RVHgzV6bxM2_8VHBqRYCQceGDqRguHYbN9O7kRQ@mail.gmail.com>
References: <CAF9-5jMMFM3fA7sbyv4yNrfyF1Da7vw8RD2jcfTWOMT6Lfgi4A@mail.gmail.com>
 <a824d0cc-ba62-96cc-4836-934216715e37@comcast.net>
 <CAF9-5jNnY8kkzuiUFKd1cLGqe5mZRn1SUT6uwVhUmHNCRA8wAg@mail.gmail.com>
 <0e31c7e7-982c-2990-36ce-44618b988177@dewey.myzen.co.uk>
 <CAF9-5jMtXcBAF2_TpbVJOOtVUGAh0QDvvCWBsGAa6ZFXiPUXdA@mail.gmail.com>
 <CAF9-5jNVQeSN4xE5uBx5OmEGYY2HcSLSbFFVxx-gcv-We8a1MQ@mail.gmail.com>
 <CAF9-5jMrb=Je0iLzP9kdmLdhg-A244NRAsms8kGhFLSDH33Azg@mail.gmail.com>
 <CAB8pepyF+44RVHgzV6bxM2_8VHBqRYCQceGDqRguHYbN9O7kRQ@mail.gmail.com>
Message-ID: <CAF9-5jOJvruVa5dKHoeFSeBSSQT4PTJMC+Cx7y9YKF=LvqvUnA@mail.gmail.com>

Thank you!

On Thu, Mar 12, 2020 at 12:47 PM Abby Spurdle <spurdle.a at gmail.com> wrote:
>
> The plotting character is determined by the pch argument.
> i.e. You need to specify the pch argument in the legend call.
>
> Here's the R code to preview the first 20 plotting characters:
>
> > plot (1:20, rep (0, 20), pch=1:20, ylim = c (-5, 5) )
> > text (1:20, rep (1, 20), 1:20)
>
> Empty circles, have a pch value of 1.
> Solid circles, have a pch value of 16.
> In general, to set the color, use the col argument.
>
> So, you could add the following to your legend call:
>
> > ..., pch=16, col = c ("red", "blue"), ...
>
> And remove the fill argument.
>
>
>
> On 3/13/20, Ana Marija <sokovic.anamarija at gmail.com> wrote:
> > I could make legend via this:
> > qq(fdr2_sorted$FDR.q.val2, main = "RG_All", pch = 16,
> > col=fdr1_sorted$group, cex = 0.8, las = 1)
> > legend('topleft', legend = c('up-regulated', 'down-regulated'), fill =
> > c('red', 'blue'),bty="o")
> >
> > but this gives me squares in legend. How do I write this code in order
> > to have circles in the legend?
> >
> > On Thu, Mar 12, 2020 at 11:04 AM Ana Marija <sokovic.anamarija at gmail.com>
> > wrote:
> >>
> >> Also how would I add legend to this plot?
> >>
> >> I searched qqman pages and there is no mention of that


From @purd|e@@ @end|ng |rom gm@||@com  Thu Mar 12 21:22:10 2020
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Fri, 13 Mar 2020 09:22:10 +1300
Subject: [R] Relatively Simple Maximization Using Optim Doesnt Optimize
In-Reply-To: <272e760f-d1fb-9f1c-f431-0fe418c70b11@gmail.com>
References: <CA+gY42CJ000Kuj0Cjnif+xWH0oJYt0mXOzUx9s33FSWE9Peteg@mail.gmail.com>
 <272e760f-d1fb-9f1c-f431-0fe418c70b11@gmail.com>
Message-ID: <CAB8pepw8bPFv23s1bvrSr-rh9=aL3mHOSS_nso1F6coLi=qOvQ@mail.gmail.com>

I'm sorry, Duncan.
But I disagree.

This is not a "bug" in optim function, as such.
(Or at least, there's nothing in this discussion to suggest that there's a bug).
But rather a floating point arithmetic related problem.

The OP's function looks simple enough, at first glance.
But it's not.

Plotting a numerical approximation of the derivative, makes the
problem more apparent:
----------
plot_derivative <- function (f, a = sol - offset, b = sol + offset,
sol, offset=0.001, N=200)
{   FIRST <- 1:(N - 2)
    LAST <- 3:N
    MP <- 2:(N - 1)

    x <- seq (a, b, length.out=N)
    y <- f (x)
    dy <- (y [LAST] - y [FIRST]) / (x [LAST] - x [FIRST])

    plot (x [MP], dy, type="l", xlab="x", ylab="dy/dx (approx)")
}

optim.sol <- optim (1001, production1 ,method="CG", control = list
(fnscale=-1) )$par
plot_derivative (production1, sol=optim.sol)
abline (v=optim.sol, lty=2, col="grey")
----------

So, I would say the optim function (including the CG method) is doing
what it's supposed to do.

And collating/expanding on Nash's, Jeff's and Eric's comments:
(1) An exact solution can be derived quickly, so using a numerical
method is unnecessary, and inefficient.
(2) Possible problems with the CG method are noted in the documentation.
(3) Numerical approximations of the function's derivative need to be
well-behaved for gradient-based numerical methods to work properly.


On Fri, Mar 13, 2020 at 3:42 AM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> It looks like a bug in the CG method.  The other methods in optim() all
> work fine.  CG is documented to be a good choice in high dimensions; why
> did you choose it for a 1 dim problem?
>
> Duncan Murdoch


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Thu Mar 12 22:08:20 2020
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Thu, 12 Mar 2020 22:08:20 +0100
Subject: [R] How to make our data normally distributed in R
Message-ID: <CA+nrPnsOBmwjN4aK=SQ=hnK2d-PVd9+wH9dg7bBCd2xuVRim+w@mail.gmail.com>

Hi

I have a regression based data where I get the RMSE results as:

SVM=3500
ANN=4600
R.Forest=2900

I want to know how can I make it so that its values comes as 0-1

I plot the boxplot for it to indicate their RMSE values and used,
ylim=(0,1), but the boxplot which works for RMSE values like 3500 etc, but
when I use ylim=(0,1), all the boxplots suddenly disappears. What should I
do for it?

Thanks

	[[alternative HTML version deleted]]


From @purd|e@@ @end|ng |rom gm@||@com  Thu Mar 12 22:54:21 2020
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Fri, 13 Mar 2020 10:54:21 +1300
Subject: [R] Relatively Simple Maximization Using Optim Doesnt Optimize
In-Reply-To: <CAB8pepw8bPFv23s1bvrSr-rh9=aL3mHOSS_nso1F6coLi=qOvQ@mail.gmail.com>
References: <CA+gY42CJ000Kuj0Cjnif+xWH0oJYt0mXOzUx9s33FSWE9Peteg@mail.gmail.com>
 <272e760f-d1fb-9f1c-f431-0fe418c70b11@gmail.com>
 <CAB8pepw8bPFv23s1bvrSr-rh9=aL3mHOSS_nso1F6coLi=qOvQ@mail.gmail.com>
Message-ID: <CAB8pepzm9qnuakk9nofxhsQP59RVTt+BaJRYgYhWEtQg+LBUsA@mail.gmail.com>

> (1) An exact solution can be derived quickly

Please disregard note (1) above.
I'm not sure if it was right.

And one more comment:

The conjugate gradient method is an established method.
So the question is, is the optim function applying this method or not...
And assuming that it is, then R is definitely doing what it should be doing.
If not, then I guess it would be a bug...


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Thu Mar 12 23:51:39 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Thu, 12 Mar 2020 22:51:39 +0000
Subject: [R] How to make our data normally distributed in R
In-Reply-To: <CA+nrPnsOBmwjN4aK=SQ=hnK2d-PVd9+wH9dg7bBCd2xuVRim+w@mail.gmail.com>
References: <CA+nrPnsOBmwjN4aK=SQ=hnK2d-PVd9+wH9dg7bBCd2xuVRim+w@mail.gmail.com>
Message-ID: <39e5d162-1487-ec51-e1cd-636d0999c40a@sapo.pt>

Hello,

To rescale data so that their values are between 0 and 1, use this function:


scale01 <- function(x, na.rm = FALSE){
   (x - min(x, na.rm = na.rm))/(max(x, na.rm = na.rm) - min(x, na.rm = 
na.rm))
}

x <- c(SVM=3500,
        ANN=4600,
        R.Forest=2900)

scale01(x)
#      SVM       ANN  R.Forest
#0.3529412 1.0000000 0.0000000


See base R function ?scale for another way of scaling data.

As for the second question, if your RMSE vector had values in the range 
2900 to 4600 and the y axis limits are c(0, 1), how can you expect to 
see anything?

Hope this helps,

Rui Barradas


?s 21:08 de 12/03/20, Neha gupta escreveu:
> Hi
> 
> I have a regression based data where I get the RMSE results as:
> 
> SVM=3500
> ANN=4600
> R.Forest=2900
> 
> I want to know how can I make it so that its values comes as 0-1
> 
> I plot the boxplot for it to indicate their RMSE values and used,
> ylim=(0,1), but the boxplot which works for RMSE values like 3500 etc, but
> when I use ylim=(0,1), all the boxplots suddenly disappears. What should I
> do for it?
> 
> Thanks
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Thu Mar 12 23:58:05 2020
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Thu, 12 Mar 2020 23:58:05 +0100
Subject: [R] How to make our data normally distributed in R
In-Reply-To: <39e5d162-1487-ec51-e1cd-636d0999c40a@sapo.pt>
References: <CA+nrPnsOBmwjN4aK=SQ=hnK2d-PVd9+wH9dg7bBCd2xuVRim+w@mail.gmail.com>
 <39e5d162-1487-ec51-e1cd-636d0999c40a@sapo.pt>
Message-ID: <CA+nrPnsci4YaO_UkYycQW1bC_SwnZ2qW18cB3KwGu3TwMO1sMA@mail.gmail.com>

Thanks Hasan and Rui

Rui, as you mentioned

As for the second question, if your RMSE vector had values in the range
2900 to 4600 and the y axis limits are c(0, 1), how can you expect to
see anything?

Then what should be the values of ylim in boxplots? I need to show them as
boxplot between 0-1 or 1-10, even 10-100 but it will be very awkward if the
boxplot shows the values of 3500 etc.

Regards



On Thu, Mar 12, 2020 at 11:51 PM Rui Barradas <ruipbarradas at sapo.pt> wrote:

> Hello,
>
> To rescale data so that their values are between 0 and 1, use this
> function:
>
>
> scale01 <- function(x, na.rm = FALSE){
>    (x - min(x, na.rm = na.rm))/(max(x, na.rm = na.rm) - min(x, na.rm =
> na.rm))
> }
>
> x <- c(SVM=3500,
>         ANN=4600,
>         R.Forest=2900)
>
> scale01(x)
> #      SVM       ANN  R.Forest
> #0.3529412 1.0000000 0.0000000
>
>
> See base R function ?scale for another way of scaling data.
>
> As for the second question, if your RMSE vector had values in the range
> 2900 to 4600 and the y axis limits are c(0, 1), how can you expect to
> see anything?
>
> Hope this helps,
>
> Rui Barradas
>
>
> ?s 21:08 de 12/03/20, Neha gupta escreveu:
> > Hi
> >
> > I have a regression based data where I get the RMSE results as:
> >
> > SVM=3500
> > ANN=4600
> > R.Forest=2900
> >
> > I want to know how can I make it so that its values comes as 0-1
> >
> > I plot the boxplot for it to indicate their RMSE values and used,
> > ylim=(0,1), but the boxplot which works for RMSE values like 3500 etc,
> but
> > when I use ylim=(0,1), all the boxplots suddenly disappears. What should
> I
> > do for it?
> >
> > Thanks
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>

	[[alternative HTML version deleted]]


From re|chm@nj @end|ng |rom @bcg|ob@|@net  Fri Mar 13 00:28:33 2020
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Thu, 12 Mar 2020 18:28:33 -0500
Subject: [R] Installing Packages
In-Reply-To: <6aaf8e34-7694-0008-869d-900ed5c249b5@gmail.com>
References: <001c01d5f7b3$d55a9df0$800fd9d0$.ref@sbcglobal.net>
 <001c01d5f7b3$d55a9df0$800fd9d0$@sbcglobal.net>
 <6aaf8e34-7694-0008-869d-900ed5c249b5@gmail.com>
Message-ID: <000401d5f8c5$f352e700$d9f8b500$@sbcglobal.net>

Thank you all - that was helpful. I guess I assumes everything that got pushed up to the server was already compiled.

-----Original Message-----
From: Duncan Murdoch <murdoch.duncan at gmail.com> 
Sent: Wednesday, March 11, 2020 10:10 AM
To: reichmanj at sbcglobal.net; r-help at r-project.org
Subject: Re: [R] Installing Packages

On 11/03/2020 7:46 a.m., Jeff Reichman wrote:
> R-Help
> 
>   
> 
> Recently I've started receiving the following message when updating 
> packages
> - "Do you want to install from sources the packages which need compilation."
> I generally click "Yes," but what is this asking me. That is it 
> appears to be re-compiling certain packages? Why?
> 

As the others answered:  that's because compiled versions aren't available on the server yet.

What they didn't say is why you might want to say "no".  You would say that if you expect the compile on your own system to fail, perhaps because you don't have compilers or special libraries installed.  R can install packages whose source is all in R, but needs external tools to install packages that incorporate other languages like C, C++ and Fortran.  Even if you have those compilers, some packages will need to link to libraries outside of R.

If you say "no", then R will look for an older compiled version of the package and install that.  This might cause trouble if some other package depends on the latest version of its dependencies:  you won't be able to install the latest version of that package either.

I'd recommend trying with "yes", then trying again with "no" if there were any install failures.

Duncan Murdoch


From j|n||68 @end|ng |rom gm@||@com  Fri Mar 13 00:46:09 2020
From: j|n||68 @end|ng |rom gm@||@com (Jin Li)
Date: Fri, 13 Mar 2020 10:46:09 +1100
Subject: [R] How to make our data normally distributed in R
In-Reply-To: <CA+nrPnsOBmwjN4aK=SQ=hnK2d-PVd9+wH9dg7bBCd2xuVRim+w@mail.gmail.com>
References: <CA+nrPnsOBmwjN4aK=SQ=hnK2d-PVd9+wH9dg7bBCd2xuVRim+w@mail.gmail.com>
Message-ID: <CAGu_3ZLcETAgF4mwzHrgQqZsPkc0DsEC0h8jARYd1BHMS6f79Q@mail.gmail.com>

Hi,
Why do you want to re-scale RMSE to 0-1? You can change ylim=(0,1) to
ylim=(0, 4600). You may use VEcv (Variance explained by predictive models
based on cross-validation) that ranges from  0 to 100% instead. It can be
calculated using vecv function in library(spm) or you can convert RMSE to
VEcv using tovecv in spm.
Hope this helps,
Jin

On Fri, Mar 13, 2020 at 8:08 AM Neha gupta <neha.bologna90 at gmail.com> wrote:

> Hi
>
> I have a regression based data where I get the RMSE results as:
>
> SVM=3500
> ANN=4600
> R.Forest=2900
>
> I want to know how can I make it so that its values comes as 0-1
>
> I plot the boxplot for it to indicate their RMSE values and used,
> ylim=(0,1), but the boxplot which works for RMSE values like 3500 etc, but
> when I use ylim=(0,1), all the boxplots suddenly disappears. What should I
> do for it?
>
> Thanks
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
Jin

	[[alternative HTML version deleted]]


From m@rk|eed@2 @end|ng |rom gm@||@com  Fri Mar 13 00:58:13 2020
From: m@rk|eed@2 @end|ng |rom gm@||@com (Mark Leeds)
Date: Thu, 12 Mar 2020 19:58:13 -0400
Subject: [R] Relatively Simple Maximization Using Optim Doesnt Optimize
In-Reply-To: <CAB8pepzm9qnuakk9nofxhsQP59RVTt+BaJRYgYhWEtQg+LBUsA@mail.gmail.com>
References: <CA+gY42CJ000Kuj0Cjnif+xWH0oJYt0mXOzUx9s33FSWE9Peteg@mail.gmail.com>
 <272e760f-d1fb-9f1c-f431-0fe418c70b11@gmail.com>
 <CAB8pepw8bPFv23s1bvrSr-rh9=aL3mHOSS_nso1F6coLi=qOvQ@mail.gmail.com>
 <CAB8pepzm9qnuakk9nofxhsQP59RVTt+BaJRYgYhWEtQg+LBUsA@mail.gmail.com>
Message-ID: <CAHz+bWZcXW8LEyuPGYZrwnR7tr_Fn=43N_7fe82Em0R66RjL5Q@mail.gmail.com>

Hi Abby: Either way, thanks for your efforts with the derivative plot.

Note that John Nash is a SERIOUS EXPERT in optimization so I would just go
by what he
said earlier. Also, I don't want to speak for Duncan but I have a feeling
that he meant "inadequacy"  in the CG
method rather than a bug in  the R code.


Mark

On Thu, Mar 12, 2020 at 5:55 PM Abby Spurdle <spurdle.a at gmail.com> wrote:

> > (1) An exact solution can be derived quickly
>
> Please disregard note (1) above.
> I'm not sure if it was right.
>
> And one more comment:
>
> The conjugate gradient method is an established method.
> So the question is, is the optim function applying this method or not...
> And assuming that it is, then R is definitely doing what it should be
> doing.
> If not, then I guess it would be a bug...
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Mar 13 02:42:54 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 12 Mar 2020 18:42:54 -0700
Subject: [R] Relatively Simple Maximization Using Optim Doesnt Optimize
In-Reply-To: <CAB8pepw8bPFv23s1bvrSr-rh9=aL3mHOSS_nso1F6coLi=qOvQ@mail.gmail.com>
References: <CA+gY42CJ000Kuj0Cjnif+xWH0oJYt0mXOzUx9s33FSWE9Peteg@mail.gmail.com>
 <272e760f-d1fb-9f1c-f431-0fe418c70b11@gmail.com>
 <CAB8pepw8bPFv23s1bvrSr-rh9=aL3mHOSS_nso1F6coLi=qOvQ@mail.gmail.com>
Message-ID: <b687bd08-655d-46eb-a2f1-c5aab0502bc7@gmail.com>

On 12/03/2020 1:22 p.m., Abby Spurdle wrote:
> I'm sorry, Duncan.
> But I disagree.
> 
> This is not a "bug" in optim function, as such.
> (Or at least, there's nothing in this discussion to suggest that there's a bug).
> But rather a floating point arithmetic related problem.
> 
> The OP's function looks simple enough, at first glance.
> But it's not.
> 
> Plotting a numerical approximation of the derivative, makes the
> problem more apparent:

There is nothing in that plot to indicate that the result given by 
optim() should be accepted as optimal.  The numerical approximation to 
the derivative is 0.055851 everywhere in your graph, with numerical 
errors out in the 8th decimal place or later.  Clearly the max occurs 
somewhere to the right of that.  Yes, the 2nd derivative calculation 
will be terrible if R chooses a step size of 0.00001 when calculating 
it, but why would it do that, given that the 1st derivative is 3 orders 
of magnitude larger?


> ----------
> plot_derivative <- function (f, a = sol - offset, b = sol + offset,
> sol, offset=0.001, N=200)
> {   FIRST <- 1:(N - 2)
>      LAST <- 3:N
>      MP <- 2:(N - 1)
> 
>      x <- seq (a, b, length.out=N)
>      y <- f (x)
>      dy <- (y [LAST] - y [FIRST]) / (x [LAST] - x [FIRST])
> 
>      plot (x [MP], dy, type="l", xlab="x", ylab="dy/dx (approx)")
> }
> 
> optim.sol <- optim (1001, production1 ,method="CG", control = list
> (fnscale=-1) )$par
> plot_derivative (production1, sol=optim.sol)
> abline (v=optim.sol, lty=2, col="grey")
> ----------
> 
> So, I would say the optim function (including the CG method) is doing
> what it's supposed to do.
> 
> And collating/expanding on Nash's, Jeff's and Eric's comments:
> (1) An exact solution can be derived quickly, so using a numerical
> method is unnecessary, and inefficient.
> (2) Possible problems with the CG method are noted in the documentation.
> (3) Numerical approximations of the function's derivative need to be
> well-behaved for gradient-based numerical methods to work properly.
> 
> 
> On Fri, Mar 13, 2020 at 3:42 AM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>
>> It looks like a bug in the CG method.  The other methods in optim() all
>> work fine.  CG is documented to be a good choice in high dimensions; why
>> did you choose it for a 1 dim problem?
>>
>> Duncan Murdoch


From @purd|e@@ @end|ng |rom gm@||@com  Fri Mar 13 03:25:06 2020
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Fri, 13 Mar 2020 15:25:06 +1300
Subject: [R] Relatively Simple Maximization Using Optim Doesnt Optimize
In-Reply-To: <b687bd08-655d-46eb-a2f1-c5aab0502bc7@gmail.com>
References: <CA+gY42CJ000Kuj0Cjnif+xWH0oJYt0mXOzUx9s33FSWE9Peteg@mail.gmail.com>
 <272e760f-d1fb-9f1c-f431-0fe418c70b11@gmail.com>
 <CAB8pepw8bPFv23s1bvrSr-rh9=aL3mHOSS_nso1F6coLi=qOvQ@mail.gmail.com>
 <b687bd08-655d-46eb-a2f1-c5aab0502bc7@gmail.com>
Message-ID: <CAB8pepxd2F9Y+BJ0nPXd9vib7Xi4jCihOrR+HTNP+NZ2YHMXUA@mail.gmail.com>

> There is nothing in that plot to indicate that the result given by
> optim() should be accepted as optimal.  The numerical approximation to
> the derivative is 0.055851 everywhere in your graph

That wasn't how I intended the plot to be interpreted.
By default, the step size (in x) is 1e-5, which seems like a moderate step size.
However, at that level, the numerical approximation is very badly behaved.
And if the step size is decreased, things get worse.

I haven't checked all the technical details of the optim function.
But any reliance on numerical approximations of the derivative, have a
high chance of running into problems using a function like this.


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Mar 13 04:13:21 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 12 Mar 2020 20:13:21 -0700
Subject: [R] Relatively Simple Maximization Using Optim Doesnt Optimize
In-Reply-To: <CAB8pepxd2F9Y+BJ0nPXd9vib7Xi4jCihOrR+HTNP+NZ2YHMXUA@mail.gmail.com>
References: <CA+gY42CJ000Kuj0Cjnif+xWH0oJYt0mXOzUx9s33FSWE9Peteg@mail.gmail.com>
 <272e760f-d1fb-9f1c-f431-0fe418c70b11@gmail.com>
 <CAB8pepw8bPFv23s1bvrSr-rh9=aL3mHOSS_nso1F6coLi=qOvQ@mail.gmail.com>
 <b687bd08-655d-46eb-a2f1-c5aab0502bc7@gmail.com>
 <CAB8pepxd2F9Y+BJ0nPXd9vib7Xi4jCihOrR+HTNP+NZ2YHMXUA@mail.gmail.com>
Message-ID: <be0a9bb4-cf3b-f9a3-312c-8317322e2608@gmail.com>

On 12/03/2020 7:25 p.m., Abby Spurdle wrote:
>> There is nothing in that plot to indicate that the result given by
>> optim() should be accepted as optimal.  The numerical approximation to
>> the derivative is 0.055851 everywhere in your graph
> 
> That wasn't how I intended the plot to be interpreted.
> By default, the step size (in x) is 1e-5, which seems like a moderate step size.

optim() uses a much larger one.  You can see it if you run this code 
after yours:

production2 <- function(L){
   abline(v=L);cat("L=", L, "\n")  # Add this in to see L values
   budget=100000
   Lcost=12
   Kcost=15
   K=(budget-L*Lcost)/Kcost
   machines=0.05*L^(2/3)*K^(1/3)
   return(machines)
}
  optim.sol <- optim (1001, production2 ,method="CG", control = 
list(fnscale=-1) )

You'll get just 3 evaluations within the scale of your plot. They are at

L= 1006.536
L= 1006.537
L= 1006.535

It appears to have chosen step size 0.001, not 0.00001.  It should be 
getting adequate accuracy in both 1st and 2nd derivatives.

Those little ripples you see in the plot are not relevant.


> However, at that level, the numerical approximation is very badly behaved.
> And if the step size is decreased, things get worse.
> 
> I haven't checked all the technical details of the optim function.
> But any reliance on numerical approximations of the derivative, have a
> high chance of running into problems using a function like this.
>


From @purd|e@@ @end|ng |rom gm@||@com  Fri Mar 13 04:52:48 2020
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Fri, 13 Mar 2020 16:52:48 +1300
Subject: [R] Relatively Simple Maximization Using Optim Doesnt Optimize
In-Reply-To: <be0a9bb4-cf3b-f9a3-312c-8317322e2608@gmail.com>
References: <CA+gY42CJ000Kuj0Cjnif+xWH0oJYt0mXOzUx9s33FSWE9Peteg@mail.gmail.com>
 <272e760f-d1fb-9f1c-f431-0fe418c70b11@gmail.com>
 <CAB8pepw8bPFv23s1bvrSr-rh9=aL3mHOSS_nso1F6coLi=qOvQ@mail.gmail.com>
 <b687bd08-655d-46eb-a2f1-c5aab0502bc7@gmail.com>
 <CAB8pepxd2F9Y+BJ0nPXd9vib7Xi4jCihOrR+HTNP+NZ2YHMXUA@mail.gmail.com>
 <be0a9bb4-cf3b-f9a3-312c-8317322e2608@gmail.com>
Message-ID: <CAB8pepynuwCW3bkO0_HYLLjB+R=Yj7ZOL1PYe8_VmrniuvNWAA@mail.gmail.com>

> L= 1006.536
> L= 1006.537
> L= 1006.535
> It appears to have chosen step size 0.001, not 0.00001.  It should be
> getting adequate accuracy in both 1st and 2nd derivatives.
> Those little ripples you see in the plot are not relevant.

I'm impressed.
But you're still wrong.

Try this:
---------
#not good R code!
v = numeric ()

production3 <- function(L){
    #store in vector
    v <<- c (v, L)

   budget=100000
   Lcost=12
   Kcost=15
   K=(budget-L*Lcost)/Kcost
   machines=0.05*L^(2/3)*K^(1/3)
   return(machines)
}

optim.sol <- optim (1001, production3 ,method="CG", control = list(fnscale=-1) )

n = length (v)
print (n)

plot (1:n ,v, type="l")
---------

After 401 iterations (on my computer), the algorithm hasn't converged.
And I note it's converging extremely slowly, so I don't see any
argument for increasing the number of iterations.

And try this:
(The first 30 steps).
---------
plot (1:30 ,v [1:30], type="l")
---------

Little ripples aren't going anywhere...


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Fri Mar 13 10:24:48 2020
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Fri, 13 Mar 2020 09:24:48 +0000
Subject: [R] output of bounds function (ldbounds package)
Message-ID: <MN2PR03MB516775EDC093506B5E062EDAE2FA0@MN2PR03MB5167.namprd03.prod.outlook.com>

I am trying to get information about the output produced by the bounds function. Code that runs the package along with sample output is below.

Questions (1) Do the values given under boundaries, lower and upper
(Boundaries:
   Time    Lower   Upper    Exit pr.   Diff. pr.
1  0.10  -6.9913  6.9913  2.7227e-12  2.7227e-12
2  0.33  -3.7308  3.7308  1.9097e-04  1.9097e-04
3  1.00  -1.9605  1.9605  5.0000e-02  4.9809e-02)
represent values of z-scores which an analysis must exceed to declare the analysis significant (after accounting for multiple looks)?

(2) The Exit pr. is described in the documentation as
exit.pr
the vector of cumulative exit probabilities at each analysis.
What is meant by "exit probabilites"

(3) Diff. pr. is described in the documentation as
diff.pr
the vector of exit probabilities accumulated at each analysis.
What is meant by "exit probabilities accumulated"?

Thank you,
John


install.packages("ldbounds")
library(ldbounds)
t2 <- c(0.10,0.33,1)
t2
obf.bd <- bounds(t2,iuse=c(1,1),alpha=c(0.025,0.025))
summary(obf.bd)
plot(obf.bd)

Lan-DeMets bounds for a given spending function

n =  3
Overall alpha:  0.05

Type: Two-Sided Symmetric Bounds
Lower alpha:  0.025
Upper alpha:  0.025
Spending function:  O'Brien-Fleming

Boundaries:
   Time    Lower   Upper    Exit pr.   Diff. pr.
1  0.10  -6.9913  6.9913  2.7227e-12  2.7227e-12
2  0.33  -3.7308  3.7308  1.9097e-04  1.9097e-04
3  1.00  -1.9605  1.9605  5.0000e-02  4.9809e-02




John David Sorkin M.D., Ph.D.
Professor of Medicine
Chief, Biostatistics and Informatics
University of Maryland School of Medicine Division of Gerontology and Geriatric Medicine
Baltimore VA Medical Center
10 North Greene Street
GRECC (BT/18/GR)
Baltimore, MD 21201-1524
(Phone) 410-605-7119
(Fax) 410-605-7913 (Please call phone number above prior to faxing)


	[[alternative HTML version deleted]]


From d@cty|orh|z@ @end|ng |rom gm@||@com  Fri Mar 13 10:56:15 2020
From: d@cty|orh|z@ @end|ng |rom gm@||@com (Alexey Shipunov)
Date: Fri, 13 Mar 2020 18:56:15 +0900
Subject: [R] Unintended behaviour (possibly bugs)
In-Reply-To: <24170.28233.24528.535254@stat.math.ethz.ch>
References: <CAD-ePxY3WOumNjaED5OwHtGWnzGecom+5MLGNgeEWS4sbBxGiw@mail.gmail.com>
 <bd143039-d302-fee9-7350-ec01a61c17e1@sapo.pt>
 <CAD-ePxZ-MytqqfQUiEE9+4e_T8kyfj4kiYcRTj4GsYcupGLj8A@mail.gmail.com>
 <cd83233c-5794-d741-cf9d-32d4435cf590@sapo.pt>
 <CADfFDC6HGT0X0d5xnrCfRKybp9SRehU10c3C5hGAm0USNtndWQ@mail.gmail.com>
 <CAD-ePxZELLi+zvkT8AmF6R9vffB+_K3vi6PMLONi2RViuSBFng@mail.gmail.com>
 <24170.28233.24528.535254@stat.math.ethz.ch>
Message-ID: <CAD-ePxZtLg-fhgeNMQSKhLfzXt-ZC4_V8N--rh-OV9XZ-2B3CA@mail.gmail.com>

Dear Martin,

Great news, thanks!

If you wish, please also consider my initial note about help(hist),
this is definitely worrying new R users.

With best wishes,

Alexey

??, 13 ???. 2020 ?. ? 02:16, Martin Maechler <maechler at stat.math.ethz.ch>:
>
> >>>>> Alexey Shipunov
> >>>>>     on Tue, 18 Feb 2020 14:34:48 +0900 writes:
>
>     > Thank you for the detailed explanation. I tend to agree. However, this
>     > behavior is relatively easy to remediate:
>
>     > This is the piece of the current code:
>
>     > ===
>     > if (!(is.null(labels) && is.null(glabels))) {
>     >    nmai <- par("mai")
>     >    nmai[2L] <- nmai[4L] + max(linch + goffset, ginch) + 0.1
>     >    par(mai = nmai)
>     > }
>     > ===
>
>     > This is my proposal:
>
>     > ===
>     > yinch <- if (!is.null(ylab)) 0.4 else 0
>     > if (!(is.null(labels) && is.null(glabels))) {
>     >    nmai <- par("mai")
>     >    nm.2 <- nmai[4L] + max(if(is.null(ylab)) 0 else 0.4) + linch + goffset, ginch) + 0.1
>     >    if (nmai[2L] < nm.2)
>     >       nmai[2L] <- nm.2
>     >    par(mai = nmai)
>     > }
>     > ===
>
>     > Then margins and y-axis labels start to work normally. I wonder if
>     > this (or similar) is possible to introduce into the code?
>
>     > Alexey
>
> Well, I had looked at this back then (~Feb 18), and now had a
> considerable longer look.
>
> Your suggestion makes sense,  but then it needs even more work
> to ensure that the  'ylab'  y-axis label will be placed properly.
>
> Of course, Deepayan (author of grid-based 'lattice')  is right
> that dotchart()s implementation is pretty hackish ... but then
> still.
>
> I have (+-) fixed this in the sources of "R-devel" the
> development version of R (which should become R 4.0.0  on April
> 24 as was announced today).
>
> Now, things like this (extended) example work nicely :
>
> op <- par(xaxs = "i")  # 0 -- 100\%
> dotchart(t(VADeaths), xlim = c(0,100), bg = "skyblue",
>          main = "Death Rates in Virginia - 1940", xlab = "rate [ % ]",
>          ylab = "Grouping:  Age  x   Urbanity . Gender")
> par(op)
>
>
> Thank you, Alexey, for your report and bug fix suggestion!
>
> Best regards,
>
> Martin Maechler
> ETH Zurich and R Core team
>
>
>
>     > ........... 17:37, Deepayan Sarkar <deepayan.sarkar at gmail.com>:
>     >>
>     >> On Mon, Feb 17, 2020 at 10:24 AM Rui Barradas <ruipbarradas at sapo.pt> wrot=
>     > e:
>     >> >
>     >> > Hello,
>     >> >
>     >> > Yes, this is definitely a bug.
>     >>
>     >> I would argue that the only bug here is that the documentation doesn't
>     >> say that 'ylab' may not behave as expected.
>     >>
>     >> dotchart() is mainly designed for 2-way tables (see the VADeaths
>     >> example), but it's implementation is really pretty hackish because it
>     >> has to work within the limited traditional graphics framework. The
>     >> main problem is that dot plots want to put horizontal y-axis labels
>     >> (usually derived from factor levels), which are often longer than the
>     >> default margins, so the margins are modified. Unfortunately they are
>     >> only re-set on exit, and so the ylab that is plotted inside dotchart()
>     >> may be clipped. Traditionally, Cleveland dot plots don't have a y-axis
>     >> label; it's assumed that the factor levels are sufficient (and for
>     >> 2-way tables, there would be two variables, so there is no sensible
>     >> default).
>     >>
>     >> I doubt that dotchart() is worth fixing (except to maybe disallow
>     >> ylab). If you want flexibility, use modern grid-based alternatives
>     >> such as lattice::dotplot() or ggplot2.
>     >>
>     >> -Deepayan
>     >>
>     >> > Even the matrix plot is puzzling, with a "1" as top row sort-of-label
>     >> > but no grid line. I'm trying to follow the source code of dotchart but
>     >> > am yet to understand exactly what it does to decide the margins setting=
>     > s.
>     >> >
>     >> >      if (!(is.null(labels) && is.null(glabels))) {
>     >> >        nmai <- par("mai")
>     >> >        nmai[2L] <- nmai[4L] + max(linch + goffset, ginch) +
>     >> >          0.1
>     >> >        par(mai = nmai)
>     >> >      }
>     >> >
>     >> > This should be moved to r-devel?
>     >> >
>     >> > Rui Barradas
>     >> >
>     >> >  03:33 de 17/02/20, Alexey Shipunov escreveu:
>     >> > > John and Rui, thanks!
>     >> > >
>     >> > > However, if we use the proper object, the problem still persists:
>     >> > >
>     >> > > dotchart(c("3"=1, "2"=2, "1"=3), ylab="Ylab") # ylab is invisible
>     >> > > dotchart(c("aa"=1, "b"=2, "cc"=3), ylab="Ylab") # ylab is partly visible (!!!)
>     >> > > dotchart(c("aaa"=1, "bbb"=2, "ccc"=3), ylab="Ylab") # ylab is well visible
>     >> > >
>     >> > > If the object is matrix, ylab is visible:
>     >> > >
>     >> > > dotchart(matrix(1:3, dimnames=list(c("aa","bb","cc"), NULL)), ylab="Ylab")
>     >> > >
>     >> > > But the ?dotchart explicitly says that "x: either a vector or matrix
>     >> > > of numeric values" and then "labels: a vector of labels for each
>     >> > > point.  For vectors the default is to use  "names(x) = ...".
>     >> > >
>     >> > > So this is likely a bug. Do you agree?
>     >> > >
>     >> > > Alexey
>     >> > >
>     >> > > ..... 01:55, Rui Barradas <ruipbarradas at sapo.pt>:
>     >> > >>
>     >> > >> Hello,
>     >> > >>
>     >> > >> I believe you are wrong, the error is not in dotchart, it's in your
>     >> > >> code. You assume that to plot an object of class "table" is the same as
>     >> > >> to plot an object of class "numeric".
>     >> > >>
>     >> > >> Inline.
>     >> > >>
>     >> > >> =C3=80s 12:21 de 16/02/20, Alexey Shipunov escreveu:
>     >> > >>> Dear list,
>     >> > >>>
>     >> > >>> I have been advised to share these with R-help instead of filling the
>     >> > >>> bug report:
>     >> > >>>
>     >> > >>> 1) dotchart() does not allow to see the left axis title ('ylab') and
>     >> > >>> cannot change the left margin (outer margin 2) of the plot
>     >> > >>>
>     >> > >>> The code:
>     >> > >>>
>     >> > >>> aa <- table(c(1, 1, 1, 2, 2, 3))
>     >> > >>> dotchart(aa, ylab="Ylab") # does not show 'ylab'
>     >> > >>
>     >> > >> You are right, it does *not* show 'ylab' but the user is warned.
>     >> > >>
>     >> > >>
>     >> > >> aa <- table(c(1, 1, 1, 2, 2, 3))
>     >> > >> dotchart(aa, ylab = "Ylab") # does show 'ylab'
>     >> > >> #Warning message:
>     >> > >> #In dotchart(aa, ylab = "Ylab") :
>     >> > >> #  'x' is neither a vector nor a matrix: using as.numeric(x)
>     >> > >>
>     >> > >>
>     >> > >> My code:
>     >> > >>
>     >> > >>
>     >> > >> (mar <- par("mar"))    # new R session
>     >> > >> #[1] 5.1 4.1 4.1 2.1   # the left margin is 4.1
>     >> > >>
>     >> > >> aa <- as.numeric(table(c(1, 1, 1, 2, 2, 3)))
>     >> > >>
>     >> > >> dotchart(aa, ylab = "Ylab") # It does show 'ylab'
>     >> > >> old.par <- par(mar = mar + c(0, 5, 0, 0))
>     >> > >> par("mar")
>     >> > >> #[1] 5.1 9.1 4.1 2.1
>     >> > >>
>     >> > >> dotchart(aa, ylab = "Ylab")  # The left margin is now 9.1, much bigger
>     >> > >>
>     >> > >> par(old.par)                 # It does change the left margin
>     >> > >> dotchart(aa, ylab = "Ylab")  #  but only when a new graph is plotted.
>     >> > >>
>     >> > >>
>     >> > >>
>     >> > >>> old.par <- par(mar=c(1, 10, 1, 1)) ; dotchart(aa, ylab="Ylab") ;
>     >> > >>> par(old.par) # does not change left margin
>     >> > >>>
>     >> > >>> Possible solution:
>     >> > >>>
>     >> > >>> I researched the problem and think that the dotchart() code will need
>     >> > >>> few corrections. If there is an interest, I can post it here; or you
>     >> > >>> can look at the code of shipunov::Dotchart1() function.
>     >> > >>>
>     >> > >>> 2) example(hist) includes two "wrong" and "extreme" examples which
>     >> > >>> slow down and even crash R on some systems; this make it unsuitable
>     >> > >>> for demonstration in the class and strikes beginners in R who just
>     >> > >>> want to understand how hist() works. Actually, I did it last week (I
>     >> > >>> was not aware of these examples), and in the class two computers hang,
>     >> > >>> and many others were extremely slow.
>     >> > >>>
>     >> > >>> The code:
>     >> > >>>
>     >> > >>> example(hist)
>     >> > >>>
>     >> > >>> Possible solution:
>     >> > >>>
>     >> > >>> If R maintainers will enclose parts of "hist" example in \dontrun{},
>     >> > >>> this will allow to see the code but in the same time will not strike
>     >> > >>> beginners in R who just
>     >> > >>> want to understand how hist() works. They will still be possible to
>     >> > >>> run with example(..., run.dontrun=TRUE).
>     >> > >>
>     >> > >> Agree, it's annoying. Sometimes there's a Warning section after the
>     >> > >> Details section. Maybe such a section could get users' attention to
>     >> > >> those examples? At least it wouldn't hurt...
>     >> > >>
>     >> > >>
>     >> > >> Hope this helps,
>     >> > >>
>     >> > >> Rui Barradas
>     >> > >>
>     >> > >>>
>     >> > >>> With best wishes,
>     >> > >>>
>     >> > >>> Alexey Shipunov
>     >> > >>> ______________________________________________


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Mar 13 11:47:05 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 13 Mar 2020 03:47:05 -0700
Subject: [R] Relatively Simple Maximization Using Optim Doesnt Optimize
In-Reply-To: <CAB8pepynuwCW3bkO0_HYLLjB+R=Yj7ZOL1PYe8_VmrniuvNWAA@mail.gmail.com>
References: <CA+gY42CJ000Kuj0Cjnif+xWH0oJYt0mXOzUx9s33FSWE9Peteg@mail.gmail.com>
 <272e760f-d1fb-9f1c-f431-0fe418c70b11@gmail.com>
 <CAB8pepw8bPFv23s1bvrSr-rh9=aL3mHOSS_nso1F6coLi=qOvQ@mail.gmail.com>
 <b687bd08-655d-46eb-a2f1-c5aab0502bc7@gmail.com>
 <CAB8pepxd2F9Y+BJ0nPXd9vib7Xi4jCihOrR+HTNP+NZ2YHMXUA@mail.gmail.com>
 <be0a9bb4-cf3b-f9a3-312c-8317322e2608@gmail.com>
 <CAB8pepynuwCW3bkO0_HYLLjB+R=Yj7ZOL1PYe8_VmrniuvNWAA@mail.gmail.com>
Message-ID: <27b102b2-af25-dd62-e365-f4dacfb6c9f5@gmail.com>

On 12/03/2020 8:52 p.m., Abby Spurdle wrote:
>> L= 1006.536
>> L= 1006.537
>> L= 1006.535
>> It appears to have chosen step size 0.001, not 0.00001.  It should be
>> getting adequate accuracy in both 1st and 2nd derivatives.
>> Those little ripples you see in the plot are not relevant.
> 
> I'm impressed.
> But you're still wrong.
> 
> Try this:
> ---------
> #not good R code!
> v = numeric ()
> 
> production3 <- function(L){
>      #store in vector
>      v <<- c (v, L)
> 
>     budget=100000
>     Lcost=12
>     Kcost=15
>     K=(budget-L*Lcost)/Kcost
>     machines=0.05*L^(2/3)*K^(1/3)
>     return(machines)
> }
> 
> optim.sol <- optim (1001, production3 ,method="CG", control = list(fnscale=-1) )
> 
> n = length (v)
> print (n)
> 
> plot (1:n ,v, type="l")
> ---------
> 
> After 401 iterations (on my computer), the algorithm hasn't converged.
> And I note it's converging extremely slowly, so I don't see any
> argument for increasing the number of iterations.
> 
> And try this:
> (The first 30 steps).
> ---------
> plot (1:30 ,v [1:30], type="l")
> ---------
> 
> Little ripples aren't going anywhere...
> 

That's the bug.

It is correctly signalling that it hasn't converged (look at 
optim.sol$convergence, which "indicates that the iteration limit maxit 
had been reached".)  But CG should be taking bigger steps.  On a 1D 
quadratic objective function with no errors in the derivatives, it 
should take one step to convergence.  Here we're not quadratic (though 
it's pretty close), and we don't have exact derivatives (your ripples), 
so the fact that it is sticking to one step size is a sign that it is 
not working.   If those ripples are big enough to matter (and I'm not 
convinced of that), it should take highly variable steps.

The fact that it doesn't give a warning() when it knows it has failed to 
converge is also a pretty serious design flaw.

Duncan Murdoch


From pro|jcn@@h @end|ng |rom gm@||@com  Fri Mar 13 14:07:52 2020
From: pro|jcn@@h @end|ng |rom gm@||@com (J C Nash)
Date: Fri, 13 Mar 2020 09:07:52 -0400
Subject: [R] Relatively Simple Maximization Using Optim Doesnt Optimize
In-Reply-To: <27b102b2-af25-dd62-e365-f4dacfb6c9f5@gmail.com>
References: <CA+gY42CJ000Kuj0Cjnif+xWH0oJYt0mXOzUx9s33FSWE9Peteg@mail.gmail.com>
 <272e760f-d1fb-9f1c-f431-0fe418c70b11@gmail.com>
 <CAB8pepw8bPFv23s1bvrSr-rh9=aL3mHOSS_nso1F6coLi=qOvQ@mail.gmail.com>
 <b687bd08-655d-46eb-a2f1-c5aab0502bc7@gmail.com>
 <CAB8pepxd2F9Y+BJ0nPXd9vib7Xi4jCihOrR+HTNP+NZ2YHMXUA@mail.gmail.com>
 <be0a9bb4-cf3b-f9a3-312c-8317322e2608@gmail.com>
 <CAB8pepynuwCW3bkO0_HYLLjB+R=Yj7ZOL1PYe8_VmrniuvNWAA@mail.gmail.com>
 <27b102b2-af25-dd62-e365-f4dacfb6c9f5@gmail.com>
Message-ID: <5926579c-9321-58a5-7b0f-e6dfe2a7655b@gmail.com>

Once again, CG and its successors aren't envisaged for 1D problems. Do you
really want to perform brain surgery with a chain saw?

Note that

production4 <- function(L) { - production3(L) }

sjn2 <- optimize(production3, c(900, 1100))
sjn2

gives

$minimum
[1] 900.0001

$objective
[1] 84.44156

Whether that is a good optimum I haven't checked.

JN


On 2020-03-13 6:47 a.m., Duncan Murdoch wrote:
> On 12/03/2020 8:52 p.m., Abby Spurdle wrote:
>>> L= 1006.536
>>> L= 1006.537
>>> L= 1006.535
>>> It appears to have chosen step size 0.001, not 0.00001.? It should be
>>> getting adequate accuracy in both 1st and 2nd derivatives.
>>> Those little ripples you see in the plot are not relevant.
>>
>> I'm impressed.
>> But you're still wrong.
>>
>> Try this:
>> ---------
>> #not good R code!
>> v = numeric ()
>>
>> production3 <- function(L){
>> ???? #store in vector
>> ???? v <<- c (v, L)
>>
>> ??? budget=100000
>> ??? Lcost=12
>> ??? Kcost=15
>> ??? K=(budget-L*Lcost)/Kcost
>> ??? machines=0.05*L^(2/3)*K^(1/3)
>> ??? return(machines)
>> }
>>
>> optim.sol <- optim (1001, production3 ,method="CG", control = list(fnscale=-1) )
>>
>> n = length (v)
>> print (n)
>>
>> plot (1:n ,v, type="l")
>> ---------
>>
>> After 401 iterations (on my computer), the algorithm hasn't converged.
>> And I note it's converging extremely slowly, so I don't see any
>> argument for increasing the number of iterations.
>>
>> And try this:
>> (The first 30 steps).
>> ---------
>> plot (1:30 ,v [1:30], type="l")
>> ---------
>>
>> Little ripples aren't going anywhere...
>>
> 
> That's the bug.
> 
> It is correctly signalling that it hasn't converged (look at optim.sol$convergence, which "indicates that the iteration
> limit maxit had been reached".)? But CG should be taking bigger steps.? On a 1D quadratic objective function with no
> errors in the derivatives, it should take one step to convergence.? Here we're not quadratic (though it's pretty close),
> and we don't have exact derivatives (your ripples), so the fact that it is sticking to one step size is a sign that it
> is not working.?? If those ripples are big enough to matter (and I'm not convinced of that), it should take highly
> variable steps.
> 
> The fact that it doesn't give a warning() when it knows it has failed to converge is also a pretty serious design flaw.
> 
> Duncan Murdoch
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Fri Mar 13 14:08:56 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Fri, 13 Mar 2020 13:08:56 +0000
Subject: [R] How to make our data normally distributed in R
In-Reply-To: <CA+nrPnsci4YaO_UkYycQW1bC_SwnZ2qW18cB3KwGu3TwMO1sMA@mail.gmail.com>
References: <CA+nrPnsOBmwjN4aK=SQ=hnK2d-PVd9+wH9dg7bBCd2xuVRim+w@mail.gmail.com>
 <39e5d162-1487-ec51-e1cd-636d0999c40a@sapo.pt>
 <CA+nrPnsci4YaO_UkYycQW1bC_SwnZ2qW18cB3KwGu3TwMO1sMA@mail.gmail.com>
Message-ID: <88b273c2-4c0e-ae11-af51-f915cdae4249@sapo.pt>

Hello,

Why would it be awkward to show values like 4600? If those are the 
values, show them. When there is a large difference, orders of 
magnitude, you can plot logs by setting parameter log = "y" as in

boxplot(10^(0:5), log = "y")

But I don't see why to have values in the range 2900-4600 (same order of 
magnitude) is a reason to alter ylim.

Hope this helps,

Rui Barradas

?s 22:58 de 12/03/20, Neha gupta escreveu:
> Thanks Hasan and Rui
> 
> Rui, as you mentioned
> 
> As for the second question, if your RMSE vector had values in the range
> 2900 to 4600 and the y axis limits are c(0, 1), how can you expect to
> see anything?
> 
> Then what should be the values of ylim in boxplots? I need to show them 
> as boxplot between 0-1 or 1-10, even 10-100 but it will be very awkward 
> if the boxplot shows the values of 3500 etc.
> 
> Regards
> 
> 
> 
> On Thu, Mar 12, 2020 at 11:51 PM Rui Barradas <ruipbarradas at sapo.pt 
> <mailto:ruipbarradas at sapo.pt>> wrote:
> 
>     Hello,
> 
>     To rescale data so that their values are between 0 and 1, use this
>     function:
> 
> 
>     scale01 <- function(x, na.rm = FALSE){
>      ? ?(x - min(x, na.rm = na.rm))/(max(x, na.rm = na.rm) - min(x, na.rm =
>     na.rm))
>     }
> 
>     x <- c(SVM=3500,
>      ? ? ? ? ANN=4600,
>      ? ? ? ? R.Forest=2900)
> 
>     scale01(x)
>     #? ? ? SVM? ? ? ?ANN? R.Forest
>     #0.3529412 1.0000000 0.0000000
> 
> 
>     See base R function ?scale for another way of scaling data.
> 
>     As for the second question, if your RMSE vector had values in the range
>     2900 to 4600 and the y axis limits are c(0, 1), how can you expect to
>     see anything?
> 
>     Hope this helps,
> 
>     Rui Barradas
> 
> 
>     ?s 21:08 de 12/03/20, Neha gupta escreveu:
>      > Hi
>      >
>      > I have a regression based data where I get the RMSE results as:
>      >
>      > SVM=3500
>      > ANN=4600
>      > R.Forest=2900
>      >
>      > I want to know how can I make it so that its values comes as 0-1
>      >
>      > I plot the boxplot for it to indicate their RMSE values and used,
>      > ylim=(0,1), but the boxplot which works for RMSE values like 3500
>     etc, but
>      > when I use ylim=(0,1), all the boxplots suddenly disappears. What
>     should I
>      > do for it?
>      >
>      > Thanks
>      >
>      >? ? ? ?[[alternative HTML version deleted]]
>      >
>      > ______________________________________________
>      > R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>     -- To UNSUBSCRIBE and more, see
>      > https://stat.ethz.ch/mailman/listinfo/r-help
>      > PLEASE do read the posting guide
>     http://www.R-project.org/posting-guide.html
>      > and provide commented, minimal, self-contained, reproducible code.
>      >
>


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Fri Mar 13 16:06:57 2020
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Fri, 13 Mar 2020 16:06:57 +0100
Subject: [R] How to make our data normally distributed in R
In-Reply-To: <CAGu_3ZLcETAgF4mwzHrgQqZsPkc0DsEC0h8jARYd1BHMS6f79Q@mail.gmail.com>
References: <CA+nrPnsOBmwjN4aK=SQ=hnK2d-PVd9+wH9dg7bBCd2xuVRim+w@mail.gmail.com>
 <CAGu_3ZLcETAgF4mwzHrgQqZsPkc0DsEC0h8jARYd1BHMS6f79Q@mail.gmail.com>
Message-ID: <CA+nrPntsvveugjjc48MXfMCraZKbKNXuQSCaJQfDyOc9PK_97Q@mail.gmail.com>

Thanks a lot Jin..

If my total number of observations are 500,
n will be 500,
mu will be average (500)
s will be sd (500)
and m will be RMSE value i.e. 4500 in this case?

tovecv(n=500, mu=average (500), s=sd, m=4500, measure="rmse")


On Fri, Mar 13, 2020 at 12:46 AM Jin Li <jinli68 at gmail.com> wrote:

> Hi,
> Why do you want to re-scale RMSE to 0-1? You can change ylim=(0,1) to
> ylim=(0, 4600). You may use VEcv (Variance explained by predictive models
> based on cross-validation) that ranges from  0 to 100% instead. It can be
> calculated using vecv function in library(spm) or you can convert RMSE to
> VEcv using tovecv in spm.
> Hope this helps,
> Jin
>
> On Fri, Mar 13, 2020 at 8:08 AM Neha gupta <neha.bologna90 at gmail.com>
> wrote:
>
>> Hi
>>
>> I have a regression based data where I get the RMSE results as:
>>
>> SVM=3500
>> ANN=4600
>> R.Forest=2900
>>
>> I want to know how can I make it so that its values comes as 0-1
>>
>> I plot the boxplot for it to indicate their RMSE values and used,
>> ylim=(0,1), but the boxplot which works for RMSE values like 3500 etc, but
>> when I use ylim=(0,1), all the boxplots suddenly disappears. What should I
>> do for it?
>>
>> Thanks
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>
> --
> Jin
>

	[[alternative HTML version deleted]]


From @purd|e@@ @end|ng |rom gm@||@com  Sat Mar 14 05:09:26 2020
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Sat, 14 Mar 2020 17:09:26 +1300
Subject: [R] Relatively Simple Maximization Using Optim Doesnt Optimize
In-Reply-To: <27b102b2-af25-dd62-e365-f4dacfb6c9f5@gmail.com>
References: <CA+gY42CJ000Kuj0Cjnif+xWH0oJYt0mXOzUx9s33FSWE9Peteg@mail.gmail.com>
 <272e760f-d1fb-9f1c-f431-0fe418c70b11@gmail.com>
 <CAB8pepw8bPFv23s1bvrSr-rh9=aL3mHOSS_nso1F6coLi=qOvQ@mail.gmail.com>
 <b687bd08-655d-46eb-a2f1-c5aab0502bc7@gmail.com>
 <CAB8pepxd2F9Y+BJ0nPXd9vib7Xi4jCihOrR+HTNP+NZ2YHMXUA@mail.gmail.com>
 <be0a9bb4-cf3b-f9a3-312c-8317322e2608@gmail.com>
 <CAB8pepynuwCW3bkO0_HYLLjB+R=Yj7ZOL1PYe8_VmrniuvNWAA@mail.gmail.com>
 <27b102b2-af25-dd62-e365-f4dacfb6c9f5@gmail.com>
Message-ID: <CAB8pepyyR=C6ujJE-BqRtS=gk5K5MBCt15UdVFijb38jmzHbhQ@mail.gmail.com>

> It is correctly signalling that it hasn't converged (look at
> optim.sol$convergence, which "indicates that the iteration limit maxit
> had been reached".)  But CG should be taking bigger steps.  On a 1D
> quadratic objective function with no errors in the derivatives, it
> should take one step to convergence.  Here we're not quadratic (though
> it's pretty close), and we don't have exact derivatives (your ripples),
> so the fact that it is sticking to one step size is a sign that it is
> not working.   If those ripples are big enough to matter (and I'm not
> convinced of that), it should take highly variable steps.

Hi Duncan,

I need to apologize.
The problem has nothing to do with little ripples.
(My bad...)

I tried approximating the function with a cubic Hermite spline.
(Essentially smoothing the function).

However, the optim function still returns the wrong result.
Which surprised me...

Then I tried changing the max number of iterations, and found
something quite interesting:
---------
production.wr <- function(L){
  cat (L, "\n")
  budget=100000
  Lcost=12
  Kcost=15
  K=(budget-L*Lcost)/Kcost
  machines=0.05*L^(2/3)*K^(1/3)
  return(machines)
}

S1=optim(1001,production.wr,method="CG",control=list(fnscale=-1, maxit=1))
S1=optim(1001,production.wr,method="CG",control=list(fnscale=-1, maxit=2))
S1=optim(1001,production.wr,method="CG",control=list(fnscale=-1, maxit=3))
S1=optim(1001,production.wr,method="CG",control=list(fnscale=-1, maxit=4))
---------

The first iteration calls the function (3 + 2) times.
Subsequent iterations call the function (2 + 2) times.
In the subset-of-3, the step size is exactly 0.001.
And in subsequent leading (but not trailing) subsets-of-2, the step
size is exactly 0.002.

I was wondering (hypothetically) if the first iteration is
approximating the second derivative, and subsequent iterations are
not...???


From @purd|e@@ @end|ng |rom gm@||@com  Sat Mar 14 08:58:02 2020
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Sat, 14 Mar 2020 20:58:02 +1300
Subject: [R] Relatively Simple Maximization Using Optim Doesnt Optimize
In-Reply-To: <CAB8pepyyR=C6ujJE-BqRtS=gk5K5MBCt15UdVFijb38jmzHbhQ@mail.gmail.com>
References: <CA+gY42CJ000Kuj0Cjnif+xWH0oJYt0mXOzUx9s33FSWE9Peteg@mail.gmail.com>
 <272e760f-d1fb-9f1c-f431-0fe418c70b11@gmail.com>
 <CAB8pepw8bPFv23s1bvrSr-rh9=aL3mHOSS_nso1F6coLi=qOvQ@mail.gmail.com>
 <b687bd08-655d-46eb-a2f1-c5aab0502bc7@gmail.com>
 <CAB8pepxd2F9Y+BJ0nPXd9vib7Xi4jCihOrR+HTNP+NZ2YHMXUA@mail.gmail.com>
 <be0a9bb4-cf3b-f9a3-312c-8317322e2608@gmail.com>
 <CAB8pepynuwCW3bkO0_HYLLjB+R=Yj7ZOL1PYe8_VmrniuvNWAA@mail.gmail.com>
 <27b102b2-af25-dd62-e365-f4dacfb6c9f5@gmail.com>
 <CAB8pepyyR=C6ujJE-BqRtS=gk5K5MBCt15UdVFijb38jmzHbhQ@mail.gmail.com>
Message-ID: <CAB8pepwXZcDEw=dE6EAR10XWzSm3bSomeTrZ6D0rxqXLAMoijA@mail.gmail.com>

I got that last point wrong as well.
(Each iteration is using five evaluations).

Ignore all my comments on this subject.


On 3/14/20, Abby Spurdle <spurdle.a at gmail.com> wrote:
>> It is correctly signalling that it hasn't converged (look at
>> optim.sol$convergence, which "indicates that the iteration limit maxit
>> had been reached".)  But CG should be taking bigger steps.  On a 1D
>> quadratic objective function with no errors in the derivatives, it
>> should take one step to convergence.  Here we're not quadratic (though
>> it's pretty close), and we don't have exact derivatives (your ripples),
>> so the fact that it is sticking to one step size is a sign that it is
>> not working.   If those ripples are big enough to matter (and I'm not
>> convinced of that), it should take highly variable steps.
>
> Hi Duncan,
>
> I need to apologize.
> The problem has nothing to do with little ripples.
> (My bad...)
>
> I tried approximating the function with a cubic Hermite spline.
> (Essentially smoothing the function).
>
> However, the optim function still returns the wrong result.
> Which surprised me...
>
> Then I tried changing the max number of iterations, and found
> something quite interesting:
> ---------
> production.wr <- function(L){
>   cat (L, "\n")
>   budget=100000
>   Lcost=12
>   Kcost=15
>   K=(budget-L*Lcost)/Kcost
>   machines=0.05*L^(2/3)*K^(1/3)
>   return(machines)
> }
>
> S1=optim(1001,production.wr,method="CG",control=list(fnscale=-1, maxit=1))
> S1=optim(1001,production.wr,method="CG",control=list(fnscale=-1, maxit=2))
> S1=optim(1001,production.wr,method="CG",control=list(fnscale=-1, maxit=3))
> S1=optim(1001,production.wr,method="CG",control=list(fnscale=-1, maxit=4))
> ---------
>
> The first iteration calls the function (3 + 2) times.
> Subsequent iterations call the function (2 + 2) times.
> In the subset-of-3, the step size is exactly 0.001.
> And in subsequent leading (but not trailing) subsets-of-2, the step
> size is exactly 0.002.
>
> I was wondering (hypothetically) if the first iteration is
> approximating the second derivative, and subsequent iterations are
> not...???
>


From ggrothend|eck @end|ng |rom gm@||@com  Sat Mar 14 17:55:24 2020
From: ggrothend|eck @end|ng |rom gm@||@com (Gabor Grothendieck)
Date: Sat, 14 Mar 2020 12:55:24 -0400
Subject: [R] Relatively Simple Maximization Using Optim Doesnt Optimize
In-Reply-To: <CA+gY42CJ000Kuj0Cjnif+xWH0oJYt0mXOzUx9s33FSWE9Peteg@mail.gmail.com>
References: <CA+gY42CJ000Kuj0Cjnif+xWH0oJYt0mXOzUx9s33FSWE9Peteg@mail.gmail.com>
Message-ID: <CAP01uRmFnZuQura5rwXYrANmHkekCt8sK0ajdRjExaQQFWBg6g@mail.gmail.com>

It seems CG is having problems with the cube root.  This converges while
still using CG:

S1 <- optim(1001,function(x) (production1(x)^3), method = "CG",
  control = list(fnscale=-1))

On Thu, Mar 12, 2020 at 9:34 AM Skyler Saleebyan
<skylerbsaleebyan at gmail.com> wrote:
>
> I am trying to familiarize myself with optim() with a relatively simple
> maximization.
>
> Description:
> L and K are two terms which are constrained to add up to a total 100000
> (with respective weights to each). To map this constraint I plugged K into
> the function (to make this as simple as possible.)
>
> Together these two feed into one nonlinear function which is the product of
> two monotonic (on the positive interval) functions. Then that numbers is
> returned in a function fed to optim, which should maximize the output by
> adjusting L. The whole code is:
>
> production1 <- function(L){
>   budget=100000
>   Lcost=12
>   Kcost=15
>   K=(budget-L*Lcost)/Kcost
>   machines=0.05*L^(2/3)*K^(1/3)
>   return(machines)
> }
>
> # production1(6000) #example of number with much higher output vs optim
> result
> S1=optim(1001,production1,method="CG",control=list(fnscale=-1))
> S1
>
> Output:
> $par
> [1] 1006.536
>
> $value
> [1] 90.54671
>
> $counts
> function gradient
>      201      101
>
> $convergence
> [1] 1
>
> $message
> NULL
>
>
> For some reason this never explores the problem space and just spits out
> some answer close to the initial condition. What am I doing wrong?
>
> Thanks,
> Skyler S.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com


From 13917987541 @end|ng |rom 163@com  Sat Mar 14 03:53:27 2020
From: 13917987541 @end|ng |rom 163@com (=?GBK?B?wdbOsOi0?=)
Date: Sat, 14 Mar 2020 10:53:27 +0800 (CST)
Subject: [R] About the multiprecision computing package in R
Message-ID: <6fbfe09c.1042.170d6f5f0b3.Coremail.13917987541@163.com>

Dear all


I need a multiprecision computing package in R, if anyone in the list knows, please let me known...


Many thanks


Weilu Lin
	[[alternative HTML version deleted]]


From j@hedder|ch @end|ng |rom t-on||ne@de  Sat Mar 14 13:27:46 2020
From: j@hedder|ch @end|ng |rom t-on||ne@de (|Juergen Hedderich)
Date: Sat, 14 Mar 2020 13:27:46 +0100
Subject: [R] fit for truncated normal distribution
Message-ID: <31d9c507-3b08-b254-847e-1777f7e9a05b@t-online.de>

Dear R-help list members,

the R Session aborted without any 'comment'? for the following 'small 
example':

/library(fitdistrplus)
library(truncnorm)

filter <- c(4.98, 8.60, 6.37, 4.37, 8.03, 7.43, 6.83, 5.64, 5.43, 6.88,
 ??????????? 4.57, 7.50, 5.69, 7.88, 8.98, 6.79, 8.61, 6.70, 5.14, 7.29)

fit? <- fitdist(filter, "truncnorm", fix.arg=list(a=-Inf, b=9),
 ??????????????? start=list(mean=mean(filter), sd=sd(filter)),
 ??????????????? optim.method="L-BFGS-B",
 ??????????????? lower=c(-0.1, -0.1), upper=c(Inf, Inf))/

R worked fine in an 'older'? R-version (environment). Can anyone help me?

Many thanks in advance.

Best regards

J. Hedderich


	[[alternative HTML version deleted]]


From er|cjberger @end|ng |rom gm@||@com  Sat Mar 14 18:57:36 2020
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Sat, 14 Mar 2020 19:57:36 +0200
Subject: [R] About the multiprecision computing package in R
In-Reply-To: <6fbfe09c.1042.170d6f5f0b3.Coremail.13917987541@163.com>
References: <6fbfe09c.1042.170d6f5f0b3.Coremail.13917987541@163.com>
Message-ID: <CAGgJW75fz5y7oXfFbgGyn5FZzGsdrL1LntD0Um39oeibKzu8Lg@mail.gmail.com>

CRAN Rmpfr


On Sat, Mar 14, 2020 at 7:36 PM ??? <13917987541 at 163.com> wrote:

> Dear all
>
>
> I need a multiprecision computing package in R, if anyone in the list
> knows, please let me known...
>
>
> Many thanks
>
>
> Weilu Lin
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Sat Mar 14 19:42:58 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 14 Mar 2020 11:42:58 -0700
Subject: [R] fit for truncated normal distribution
In-Reply-To: <31d9c507-3b08-b254-847e-1777f7e9a05b@t-online.de>
References: <31d9c507-3b08-b254-847e-1777f7e9a05b@t-online.de>
Message-ID: <CAGxFJbQAvXJ5fJYbFyuaBc9xd1SoFF9PpQqD-WJ=Nw9aG4o65w@mail.gmail.com>

Inline.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sat, Mar 14, 2020 at 10:36 AM |Juergen Hedderich <j.hedderich at t-online.de>
wrote:

> Dear R-help list members,
>
> the R Session aborted without any 'comment'  for the following 'small
> example':
>
> /library(fitdistrplus)
> library(truncnorm)
>
> filter <- c(4.98, 8.60, 6.37, 4.37, 8.03, 7.43, 6.83, 5.64, 5.43, 6.88,
>              4.57, 7.50, 5.69, 7.88, 8.98, 6.79, 8.61, 6.70, 5.14, 7.29)
>
> fit  <- fitdist(filter, "truncnorm", fix.arg=list(a=-Inf, b=9),
>                  start=list(mean=mean(filter), sd=sd(filter)),
>                  optim.method="L-BFGS-B",
>                  lower=c(-0.1, -0.1), upper=c(Inf, Inf))/
>
> R worked fine in an 'older'  R-version (environment). Can anyone help me?
>

I can't. But without including the specifics of the older and newer
software (including OS version, maybe), maybe no one can.
See ?sessionInfo



>
> Many thanks in advance.
>
> Best regards
>
> J. Hedderich
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Sat Mar 14 19:44:39 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 14 Mar 2020 11:44:39 -0700
Subject: [R] About the multiprecision computing package in R
In-Reply-To: <6fbfe09c.1042.170d6f5f0b3.Coremail.13917987541@163.com>
References: <6fbfe09c.1042.170d6f5f0b3.Coremail.13917987541@163.com>
Message-ID: <CAGxFJbTXUAGt3N=S_i7+bjwzV7LGa0Zn-Ujwod_J_uuVih5KmQ@mail.gmail.com>

Here's a novel idea:
Do a google search on "multiprecision computing package R" for an answer.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sat, Mar 14, 2020 at 10:36 AM ??? <13917987541 at 163.com> wrote:

> Dear all
>
>
> I need a multiprecision computing package in R, if anyone in the list
> knows, please let me known...
>
>
> Many thanks
>
>
> Weilu Lin
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From pd@|gd @end|ng |rom gm@||@com  Sat Mar 14 20:19:31 2020
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Sat, 14 Mar 2020 20:19:31 +0100
Subject: [R] fit for truncated normal distribution
In-Reply-To: <CAGxFJbQAvXJ5fJYbFyuaBc9xd1SoFF9PpQqD-WJ=Nw9aG4o65w@mail.gmail.com>
References: <31d9c507-3b08-b254-847e-1777f7e9a05b@t-online.de>
 <CAGxFJbQAvXJ5fJYbFyuaBc9xd1SoFF9PpQqD-WJ=Nw9aG4o65w@mail.gmail.com>
Message-ID: <1786F385-F78F-4CBC-95E7-4D83A22F009B@gmail.com>

I see it in three different Mac builds, including a quite recent local R-devel build.

It boils down to this:

> dtruncnorm(numeric(0), mean=6.7, sd=1.38, a=-Inf, b=9)
Floating point exception: 8

which looks like a bug in the truncnorm package, where dtruncnorm() is unprepared for a zero-length argument.

(The indirect cause is fitdistrplus:::test1fun, which makes calls like the above.)

-pd

> On 14 Mar 2020, at 19:42 , Bert Gunter <bgunter.4567 at gmail.com> wrote:
> 
> Inline.
> 
> Bert Gunter
> 
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> 
> 
> On Sat, Mar 14, 2020 at 10:36 AM |Juergen Hedderich <j.hedderich at t-online.de>
> wrote:
> 
>> Dear R-help list members,
>> 
>> the R Session aborted without any 'comment'  for the following 'small
>> example':
>> 
>> /library(fitdistrplus)
>> library(truncnorm)
>> 
>> filter <- c(4.98, 8.60, 6.37, 4.37, 8.03, 7.43, 6.83, 5.64, 5.43, 6.88,
>>             4.57, 7.50, 5.69, 7.88, 8.98, 6.79, 8.61, 6.70, 5.14, 7.29)
>> 
>> fit  <- fitdist(filter, "truncnorm", fix.arg=list(a=-Inf, b=9),
>>                 start=list(mean=mean(filter), sd=sd(filter)),
>>                 optim.method="L-BFGS-B",
>>                 lower=c(-0.1, -0.1), upper=c(Inf, Inf))/
>> 
>> R worked fine in an 'older'  R-version (environment). Can anyone help me?
>> 
> 
> I can't. But without including the specifics of the older and newer
> software (including OS version, maybe), maybe no one can.
> See ?sessionInfo
> 
> 
> 
>> 
>> Many thanks in advance.
>> 
>> Best regards
>> 
>> J. Hedderich
>> 
>> 
>>        [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From bgunter@4567 @end|ng |rom gm@||@com  Sat Mar 14 20:41:53 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 14 Mar 2020 12:41:53 -0700
Subject: [R] About the multiprecision computing package in R
In-Reply-To: <1d8b045f.8d42.170da8478a9.Coremail.13917987541@163.com>
References: <6fbfe09c.1042.170d6f5f0b3.Coremail.13917987541@163.com>
 <CAGxFJbTXUAGt3N=S_i7+bjwzV7LGa0Zn-Ujwod_J_uuVih5KmQ@mail.gmail.com>
 <610712cd.8d1c.170da5fe48f.Coremail.13917987541@163.com>
 <CAGxFJbQCQrQ4K64YrQha5G=UPFkwsezZKMfetrGgqL8fijTarQ@mail.gmail.com>
 <1d8b045f.8d42.170da8478a9.Coremail.13917987541@163.com>
Message-ID: <CAGxFJbQ+-aT5QfP9YoPk7gB+yr3ei-Q-_k=MgSwFR=XuHn9_uA@mail.gmail.com>

Read its documentation yourself and unless you have good reason not to,
always cc the list (which I have done here).


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sat, Mar 14, 2020 at 12:28 PM ??? <13917987541 at 163.com> wrote:

> Thanks. Does it support matrix algebra?
>
>
>
> ???
> ???13917987541 at 163.com
>
> <https://maas.mail.163.com/dashi-web-extend/html/proSignature.html?iconUrl=http%3A%2F%2Fmail-online.nosdn.127.net%2F17c23bc1722125aa6261c33736f525c5.jpg&name=%E6%9E%97%E4%BC%9F%E7%92%90&uid=13917987541%40163.com&ftlId=1&items=%5B%22%E9%82%AE%E7%AE%B1%EF%BC%9A13917987541%40163.com%22%5D>
>
> ??? ?????? <https://mail.163.com/dashi/dlpro.html?from=mail88> ??
>
> On 03/15/2020 03:18, Bert Gunter <bgunter.4567 at gmail.com> wrote:
> Use google instead, as I recommended. If that's impossible in China, you
> should state that and what you tried (Baidu) in your query.
>
> You'll get the Rmpfr package.
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Sat, Mar 14, 2020 at 11:48 AM ??? <13917987541 at 163.com> wrote:
>
>> Thanks, I tried Baidu but get nothing
>>
>>
>>
>> ???
>> ???13917987541 at 163.com
>>
>> <https://maas.mail.163.com/dashi-web-extend/html/proSignature.html?iconUrl=http%3A%2F%2Fmail-online.nosdn.127.net%2F17c23bc1722125aa6261c33736f525c5.jpg&name=%E6%9E%97%E4%BC%9F%E7%92%90&uid=13917987541%40163.com&ftlId=1&items=%5B%22%E9%82%AE%E7%AE%B1%EF%BC%9A13917987541%40163.com%22%5D>
>>
>> ??? ?????? <https://mail.163.com/dashi/dlpro.html?from=mail88> ??
>>
>> On 03/15/2020 02:44, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>> Here's a novel idea:
>> Do a google search on "multiprecision computing package R" for an answer.
>>
>> Bert Gunter
>>
>> "The trouble with having an open mind is that people keep coming along
>> and sticking things into it."
>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>
>>
>> On Sat, Mar 14, 2020 at 10:36 AM ??? <13917987541 at 163.com> wrote:
>>
>>> Dear all
>>>
>>>
>>> I need a multiprecision computing package in R, if anyone in the list
>>> knows, please let me known...
>>>
>>>
>>> Many thanks
>>>
>>>
>>> Weilu Lin
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>

	[[alternative HTML version deleted]]


From pro|jcn@@h @end|ng |rom gm@||@com  Sat Mar 14 21:10:19 2020
From: pro|jcn@@h @end|ng |rom gm@||@com (J C Nash)
Date: Sat, 14 Mar 2020 16:10:19 -0400
Subject: [R] About the multiprecision computing package in R
In-Reply-To: <CAGxFJbQ+-aT5QfP9YoPk7gB+yr3ei-Q-_k=MgSwFR=XuHn9_uA@mail.gmail.com>
References: <6fbfe09c.1042.170d6f5f0b3.Coremail.13917987541@163.com>
 <CAGxFJbTXUAGt3N=S_i7+bjwzV7LGa0Zn-Ujwod_J_uuVih5KmQ@mail.gmail.com>
 <610712cd.8d1c.170da5fe48f.Coremail.13917987541@163.com>
 <CAGxFJbQCQrQ4K64YrQha5G=UPFkwsezZKMfetrGgqL8fijTarQ@mail.gmail.com>
 <1d8b045f.8d42.170da8478a9.Coremail.13917987541@163.com>
 <CAGxFJbQ+-aT5QfP9YoPk7gB+yr3ei-Q-_k=MgSwFR=XuHn9_uA@mail.gmail.com>
Message-ID: <1b3b91e5-bd30-5bae-74f6-3dc17e84e7aa@gmail.com>

Rmpfr does "support" matrix algebra, but I have been trying for some
time to determine if it computes "double" precision (i.e., double the
set level of precision) inner products. I suspect that it does NOT,
which is unfortunate. However, I would be happy to be wrong about
this.

JN

On 2020-03-14 3:41 p.m., Bert Gunter wrote:
> Read its documentation yourself and unless you have good reason not to,
> always cc the list (which I have done here).
> 
> 
> Bert Gunter
> 
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> 
> 
> On Sat, Mar 14, 2020 at 12:28 PM ??? <13917987541 at 163.com> wrote:
> 
>> Thanks. Does it support matrix algebra?
>>
>>
>>
>> ???
>> ???13917987541 at 163.com
>>
>> <https://maas.mail.163.com/dashi-web-extend/html/proSignature.html?iconUrl=http%3A%2F%2Fmail-online.nosdn.127.net%2F17c23bc1722125aa6261c33736f525c5.jpg&name=%E6%9E%97%E4%BC%9F%E7%92%90&uid=13917987541%40163.com&ftlId=1&items=%5B%22%E9%82%AE%E7%AE%B1%EF%BC%9A13917987541%40163.com%22%5D>
>>
>> ??? ?????? <https://mail.163.com/dashi/dlpro.html?from=mail88> ??
>>
>> On 03/15/2020 03:18, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>> Use google instead, as I recommended. If that's impossible in China, you
>> should state that and what you tried (Baidu) in your query.
>>
>> You'll get the Rmpfr package.
>>
>> Bert Gunter
>>
>> "The trouble with having an open mind is that people keep coming along and
>> sticking things into it."
>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>
>>
>> On Sat, Mar 14, 2020 at 11:48 AM ??? <13917987541 at 163.com> wrote:
>>
>>> Thanks, I tried Baidu but get nothing
>>>
>>>
>>>
>>> ???
>>> ???13917987541 at 163.com
>>>
>>> <https://maas.mail.163.com/dashi-web-extend/html/proSignature.html?iconUrl=http%3A%2F%2Fmail-online.nosdn.127.net%2F17c23bc1722125aa6261c33736f525c5.jpg&name=%E6%9E%97%E4%BC%9F%E7%92%90&uid=13917987541%40163.com&ftlId=1&items=%5B%22%E9%82%AE%E7%AE%B1%EF%BC%9A13917987541%40163.com%22%5D>
>>>
>>> ??? ?????? <https://mail.163.com/dashi/dlpro.html?from=mail88> ??
>>>
>>> On 03/15/2020 02:44, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>>> Here's a novel idea:
>>> Do a google search on "multiprecision computing package R" for an answer.
>>>
>>> Bert Gunter
>>>
>>> "The trouble with having an open mind is that people keep coming along
>>> and sticking things into it."
>>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>>
>>>
>>> On Sat, Mar 14, 2020 at 10:36 AM ??? <13917987541 at 163.com> wrote:
>>>
>>>> Dear all
>>>>
>>>>
>>>> I need a multiprecision computing package in R, if anyone in the list
>>>> knows, please let me known...
>>>>
>>>>
>>>> Many thanks
>>>>
>>>>
>>>> Weilu Lin
>>>>         [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From er|nm@hodge@@ @end|ng |rom gm@||@com  Sat Mar 14 21:17:00 2020
From: er|nm@hodge@@ @end|ng |rom gm@||@com (Erin Hodgess)
Date: Sat, 14 Mar 2020 14:17:00 -0600
Subject: [R] About the multiprecision computing package in R
In-Reply-To: <1b3b91e5-bd30-5bae-74f6-3dc17e84e7aa@gmail.com>
References: <6fbfe09c.1042.170d6f5f0b3.Coremail.13917987541@163.com>
 <CAGxFJbTXUAGt3N=S_i7+bjwzV7LGa0Zn-Ujwod_J_uuVih5KmQ@mail.gmail.com>
 <610712cd.8d1c.170da5fe48f.Coremail.13917987541@163.com>
 <CAGxFJbQCQrQ4K64YrQha5G=UPFkwsezZKMfetrGgqL8fijTarQ@mail.gmail.com>
 <1d8b045f.8d42.170da8478a9.Coremail.13917987541@163.com>
 <CAGxFJbQ+-aT5QfP9YoPk7gB+yr3ei-Q-_k=MgSwFR=XuHn9_uA@mail.gmail.com>
 <1b3b91e5-bd30-5bae-74f6-3dc17e84e7aa@gmail.com>
Message-ID: <CACxE24nTkzZvwiu29Mj6_u9GSsfzGowva5Po8gb6jdpng773jA@mail.gmail.com>

Are you using a PC, please?  You may want to consider installing OpenBLAS.
It?s a bit tricky but worth the time/effort.

Thanks,
Erin


On Sat, Mar 14, 2020 at 2:10 PM J C Nash <profjcnash at gmail.com> wrote:

> Rmpfr does "support" matrix algebra, but I have been trying for some
> time to determine if it computes "double" precision (i.e., double the
> set level of precision) inner products. I suspect that it does NOT,
> which is unfortunate. However, I would be happy to be wrong about
> this.
>
> JN
>
> On 2020-03-14 3:41 p.m., Bert Gunter wrote:
> > Read its documentation yourself and unless you have good reason not to,
> > always cc the list (which I have done here).
> >
> >
> > Bert Gunter
> >
> > "The trouble with having an open mind is that people keep coming along
> and
> > sticking things into it."
> > -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> >
> >
> > On Sat, Mar 14, 2020 at 12:28 PM ??? <13917987541 at 163.com> wrote:
> >
> >> Thanks. Does it support matrix algebra?
> >>
> >>
> >>
> >> ???
> >> ???13917987541 at 163.com
> >>
> >> <
> https://maas.mail.163.com/dashi-web-extend/html/proSignature.html?iconUrl=http%3A%2F%2Fmail-online.nosdn.127.net%2F17c23bc1722125aa6261c33736f525c5.jpg&name=%E6%9E%97%E4%BC%9F%E7%92%90&uid=13917987541%40163.com&ftlId=1&items=%5B%22%E9%82%AE%E7%AE%B1%EF%BC%9A13917987541%40163.com%22%5D
> >
> >>
> >> ??? ?????? <https://mail.163.com/dashi/dlpro.html?from=mail88> ??
> >>
> >> On 03/15/2020 03:18, Bert Gunter <bgunter.4567 at gmail.com> wrote:
> >> Use google instead, as I recommended. If that's impossible in China, you
> >> should state that and what you tried (Baidu) in your query.
> >>
> >> You'll get the Rmpfr package.
> >>
> >> Bert Gunter
> >>
> >> "The trouble with having an open mind is that people keep coming along
> and
> >> sticking things into it."
> >> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> >>
> >>
> >> On Sat, Mar 14, 2020 at 11:48 AM ??? <13917987541 at 163.com> wrote:
> >>
> >>> Thanks, I tried Baidu but get nothing
> >>>
> >>>
> >>>
> >>> ???
> >>> ???13917987541 at 163.com
> >>>
> >>> <
> https://maas.mail.163.com/dashi-web-extend/html/proSignature.html?iconUrl=http%3A%2F%2Fmail-online.nosdn.127.net%2F17c23bc1722125aa6261c33736f525c5.jpg&name=%E6%9E%97%E4%BC%9F%E7%92%90&uid=13917987541%40163.com&ftlId=1&items=%5B%22%E9%82%AE%E7%AE%B1%EF%BC%9A13917987541%40163.com%22%5D
> >
> >>>
> >>> ??? ?????? <https://mail.163.com/dashi/dlpro.html?from=mail88> ??
> >>>
> >>> On 03/15/2020 02:44, Bert Gunter <bgunter.4567 at gmail.com> wrote:
> >>> Here's a novel idea:
> >>> Do a google search on "multiprecision computing package R" for an
> answer.
> >>>
> >>> Bert Gunter
> >>>
> >>> "The trouble with having an open mind is that people keep coming along
> >>> and sticking things into it."
> >>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> >>>
> >>>
> >>> On Sat, Mar 14, 2020 at 10:36 AM ??? <13917987541 at 163.com> wrote:
> >>>
> >>>> Dear all
> >>>>
> >>>>
> >>>> I need a multiprecision computing package in R, if anyone in the list
> >>>> knows, please let me known...
> >>>>
> >>>>
> >>>> Many thanks
> >>>>
> >>>>
> >>>> Weilu Lin
> >>>>         [[alternative HTML version deleted]]
> >>>>
> >>>> ______________________________________________
> >>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>> PLEASE do read the posting guide
> >>>> http://www.R-project.org/posting-guide.html
> >>>> and provide commented, minimal, self-contained, reproducible code.
> >>>>
> >>>
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
-- 
Erin Hodgess, PhD
mailto: erinm.hodgess at gmail.com

	[[alternative HTML version deleted]]


From pro|jcn@@h @end|ng |rom gm@||@com  Sat Mar 14 21:24:06 2020
From: pro|jcn@@h @end|ng |rom gm@||@com (J C Nash)
Date: Sat, 14 Mar 2020 16:24:06 -0400
Subject: [R] About the multiprecision computing package in R
In-Reply-To: <CACxE24nTkzZvwiu29Mj6_u9GSsfzGowva5Po8gb6jdpng773jA@mail.gmail.com>
References: <6fbfe09c.1042.170d6f5f0b3.Coremail.13917987541@163.com>
 <CAGxFJbTXUAGt3N=S_i7+bjwzV7LGa0Zn-Ujwod_J_uuVih5KmQ@mail.gmail.com>
 <610712cd.8d1c.170da5fe48f.Coremail.13917987541@163.com>
 <CAGxFJbQCQrQ4K64YrQha5G=UPFkwsezZKMfetrGgqL8fijTarQ@mail.gmail.com>
 <1d8b045f.8d42.170da8478a9.Coremail.13917987541@163.com>
 <CAGxFJbQ+-aT5QfP9YoPk7gB+yr3ei-Q-_k=MgSwFR=XuHn9_uA@mail.gmail.com>
 <1b3b91e5-bd30-5bae-74f6-3dc17e84e7aa@gmail.com>
 <CACxE24nTkzZvwiu29Mj6_u9GSsfzGowva5Po8gb6jdpng773jA@mail.gmail.com>
Message-ID: <7840a550-4924-f95f-ab85-f3465fd869af@gmail.com>

As I understand things, OpenBLAS will improve the performance of computations on regular IEEE 754 formats.

I use Rmpfr for much longer numbers, e.g., 50 decimal digits, which -- depending on scale of numbers in a
vector -- can mean one needs approximately 100 decimals to accumulate the dot product. As I indicated, I
have not been able to verify the internals. Probably I'll have to dig. However, for the moment I'm using
David Smith's FM-Fortran, which offers a dot product function which does appear to do this.

JN

On 2020-03-14 4:17 p.m., Erin Hodgess wrote:
> Are you using a PC, please?? You may want to consider installing OpenBLAS.? It?s a bit tricky but worth the time/effort.
> 
> Thanks,
> Erin
> 
> 
> On Sat, Mar 14, 2020 at 2:10 PM J C Nash <profjcnash at gmail.com <mailto:profjcnash at gmail.com>> wrote:
> 
>     Rmpfr does "support" matrix algebra, but I have been trying for some
>     time to determine if it computes "double" precision (i.e., double the
>     set level of precision) inner products. I suspect that it does NOT,
>     which is unfortunate. However, I would be happy to be wrong about
>     this.
> 
>     JN
> 
>     On 2020-03-14 3:41 p.m., Bert Gunter wrote:
>     > Read its documentation yourself and unless you have good reason not to,
>     > always cc the list (which I have done here).
>     >
>     >
>     > Bert Gunter
>     >
>     > "The trouble with having an open mind is that people keep coming along and
>     > sticking things into it."
>     > -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>     >
>     >
>     > On Sat, Mar 14, 2020 at 12:28 PM ??? <13917987541 at 163.com <mailto:13917987541 at 163.com>> wrote:
>     >
>     >> Thanks. Does it support matrix algebra?
>     >>
>     >>
>     >>
>     >> ???
>     >> ???13917987541 at 163.com <mailto:13917987541 at 163.com>
>     >>
>     >>
>     <https://maas.mail.163.com/dashi-web-extend/html/proSignature.html?iconUrl=http%3A%2F%2Fmail-online.nosdn.127.net%2F17c23bc1722125aa6261c33736f525c5.jpg&name=%E6%9E%97%E4%BC%9F%E7%92%90&uid=13917987541%40163.com&ftlId=1&items=%5B%22%E9%82%AE%E7%AE%B1%EF%BC%9A13917987541%40163.com%22%5D>
>     >>
>     >> ??? ?????? <https://mail.163.com/dashi/dlpro.html?from=mail88> ??
>     >>
>     >> On 03/15/2020 03:18, Bert Gunter <bgunter.4567 at gmail.com <mailto:bgunter.4567 at gmail.com>> wrote:
>     >> Use google instead, as I recommended. If that's impossible in China, you
>     >> should state that and what you tried (Baidu) in your query.
>     >>
>     >> You'll get the Rmpfr package.
>     >>
>     >> Bert Gunter
>     >>
>     >> "The trouble with having an open mind is that people keep coming along and
>     >> sticking things into it."
>     >> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>     >>
>     >>
>     >> On Sat, Mar 14, 2020 at 11:48 AM ??? <13917987541 at 163.com <mailto:13917987541 at 163.com>> wrote:
>     >>
>     >>> Thanks, I tried Baidu but get nothing
>     >>>
>     >>>
>     >>>
>     >>> ???
>     >>> ???13917987541 at 163.com <mailto:13917987541 at 163.com>
>     >>>
>     >>>
>     <https://maas.mail.163.com/dashi-web-extend/html/proSignature.html?iconUrl=http%3A%2F%2Fmail-online.nosdn.127.net%2F17c23bc1722125aa6261c33736f525c5.jpg&name=%E6%9E%97%E4%BC%9F%E7%92%90&uid=13917987541%40163.com&ftlId=1&items=%5B%22%E9%82%AE%E7%AE%B1%EF%BC%9A13917987541%40163.com%22%5D>
>     >>>
>     >>> ??? ?????? <https://mail.163.com/dashi/dlpro.html?from=mail88> ??
>     >>>
>     >>> On 03/15/2020 02:44, Bert Gunter <bgunter.4567 at gmail.com <mailto:bgunter.4567 at gmail.com>> wrote:
>     >>> Here's a novel idea:
>     >>> Do a google search on "multiprecision computing package R" for an answer.
>     >>>
>     >>> Bert Gunter
>     >>>
>     >>> "The trouble with having an open mind is that people keep coming along
>     >>> and sticking things into it."
>     >>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>     >>>
>     >>>
>     >>> On Sat, Mar 14, 2020 at 10:36 AM ??? <13917987541 at 163.com <mailto:13917987541 at 163.com>> wrote:
>     >>>
>     >>>> Dear all
>     >>>>
>     >>>>
>     >>>> I need a multiprecision computing package in R, if anyone in the list
>     >>>> knows, please let me known...
>     >>>>
>     >>>>
>     >>>> Many thanks
>     >>>>
>     >>>>
>     >>>> Weilu Lin
>     >>>>? ? ? ? ?[[alternative HTML version deleted]]
>     >>>>
>     >>>> ______________________________________________
>     >>>> R-help at r-project.org <mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
>     >>>> https://stat.ethz.ch/mailman/listinfo/r-help
>     >>>> PLEASE do read the posting guide
>     >>>> http://www.R-project.org/posting-guide.html
>     >>>> and provide commented, minimal, self-contained, reproducible code.
>     >>>>
>     >>>
>     >
>     >? ? ? ?[[alternative HTML version deleted]]
>     >
>     > ______________________________________________
>     > R-help at r-project.org <mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
>     > https://stat.ethz.ch/mailman/listinfo/r-help
>     > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>     > and provide commented, minimal, self-contained, reproducible code.
>     >
> 
>     ______________________________________________
>     R-help at r-project.org <mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
>     https://stat.ethz.ch/mailman/listinfo/r-help
>     PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>     and provide commented, minimal, self-contained, reproducible code.
> 
> -- 
> Erin Hodgess, PhD
> mailto: erinm.hodgess at gmail.com <mailto:erinm.hodgess at gmail.com>


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Mar 14 21:28:54 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 14 Mar 2020 13:28:54 -0700
Subject: [R] About the multiprecision computing package in R
In-Reply-To: <1b3b91e5-bd30-5bae-74f6-3dc17e84e7aa@gmail.com>
References: <6fbfe09c.1042.170d6f5f0b3.Coremail.13917987541@163.com>
 <CAGxFJbTXUAGt3N=S_i7+bjwzV7LGa0Zn-Ujwod_J_uuVih5KmQ@mail.gmail.com>
 <610712cd.8d1c.170da5fe48f.Coremail.13917987541@163.com>
 <CAGxFJbQCQrQ4K64YrQha5G=UPFkwsezZKMfetrGgqL8fijTarQ@mail.gmail.com>
 <1d8b045f.8d42.170da8478a9.Coremail.13917987541@163.com>
 <CAGxFJbQ+-aT5QfP9YoPk7gB+yr3ei-Q-_k=MgSwFR=XuHn9_uA@mail.gmail.com>
 <1b3b91e5-bd30-5bae-74f6-3dc17e84e7aa@gmail.com>
Message-ID: <FB0F13A9-400E-46AA-B9D4-FA7435F1EB37@dcn.davis.ca.us>

Not sure I understand the concern. IEEE 754 double precision floating point was invented to allow for avoiding loss of precision when manipulating single precision floating point numbers... but then C just ignores single precision and you are expected to know that the precision of your answers may only be relied on at single precision for certain operations.

Wouldn't you just set Rmpfr precision to double your actual desired precision and move on? Though I suppose you might consider  more than doubling the desired precision to deal with exponentiation [1].

[1] https://en.m.wikipedia.org/wiki/Extended_precision#Working_range

On March 14, 2020 1:10:19 PM PDT, J C Nash <profjcnash at gmail.com> wrote:
>Rmpfr does "support" matrix algebra, but I have been trying for some
>time to determine if it computes "double" precision (i.e., double the
>set level of precision) inner products. I suspect that it does NOT,
>which is unfortunate. However, I would be happy to be wrong about
>this.
>
>JN
>
>On 2020-03-14 3:41 p.m., Bert Gunter wrote:
>> Read its documentation yourself and unless you have good reason not
>to,
>> always cc the list (which I have done here).
>> 
>> 
>> Bert Gunter
>> 
>> "The trouble with having an open mind is that people keep coming
>along and
>> sticking things into it."
>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>> 
>> 
>> On Sat, Mar 14, 2020 at 12:28 PM ??? <13917987541 at 163.com> wrote:
>> 
>>> Thanks. Does it support matrix algebra?
>>>
>>>
>>>
>>> ???
>>> ???13917987541 at 163.com
>>>
>>>
><https://maas.mail.163.com/dashi-web-extend/html/proSignature.html?iconUrl=http%3A%2F%2Fmail-online.nosdn.127.net%2F17c23bc1722125aa6261c33736f525c5.jpg&name=%E6%9E%97%E4%BC%9F%E7%92%90&uid=13917987541%40163.com&ftlId=1&items=%5B%22%E9%82%AE%E7%AE%B1%EF%BC%9A13917987541%40163.com%22%5D>
>>>
>>> ??? ?????? <https://mail.163.com/dashi/dlpro.html?from=mail88> ??
>>>
>>> On 03/15/2020 03:18, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>>> Use google instead, as I recommended. If that's impossible in China,
>you
>>> should state that and what you tried (Baidu) in your query.
>>>
>>> You'll get the Rmpfr package.
>>>
>>> Bert Gunter
>>>
>>> "The trouble with having an open mind is that people keep coming
>along and
>>> sticking things into it."
>>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>>
>>>
>>> On Sat, Mar 14, 2020 at 11:48 AM ??? <13917987541 at 163.com> wrote:
>>>
>>>> Thanks, I tried Baidu but get nothing
>>>>
>>>>
>>>>
>>>> ???
>>>> ???13917987541 at 163.com
>>>>
>>>>
><https://maas.mail.163.com/dashi-web-extend/html/proSignature.html?iconUrl=http%3A%2F%2Fmail-online.nosdn.127.net%2F17c23bc1722125aa6261c33736f525c5.jpg&name=%E6%9E%97%E4%BC%9F%E7%92%90&uid=13917987541%40163.com&ftlId=1&items=%5B%22%E9%82%AE%E7%AE%B1%EF%BC%9A13917987541%40163.com%22%5D>
>>>>
>>>> ??? ?????? <https://mail.163.com/dashi/dlpro.html?from=mail88> ??
>>>>
>>>> On 03/15/2020 02:44, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>>>> Here's a novel idea:
>>>> Do a google search on "multiprecision computing package R" for an
>answer.
>>>>
>>>> Bert Gunter
>>>>
>>>> "The trouble with having an open mind is that people keep coming
>along
>>>> and sticking things into it."
>>>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>>>
>>>>
>>>> On Sat, Mar 14, 2020 at 10:36 AM ??? <13917987541 at 163.com> wrote:
>>>>
>>>>> Dear all
>>>>>
>>>>>
>>>>> I need a multiprecision computing package in R, if anyone in the
>list
>>>>> knows, please let me known...
>>>>>
>>>>>
>>>>> Many thanks
>>>>>
>>>>>
>>>>> Weilu Lin
>>>>>         [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide
>>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>
>>>>
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From er|nm@hodge@@ @end|ng |rom gm@||@com  Sat Mar 14 21:31:22 2020
From: er|nm@hodge@@ @end|ng |rom gm@||@com (Erin Hodgess)
Date: Sat, 14 Mar 2020 14:31:22 -0600
Subject: [R] About the multiprecision computing package in R
In-Reply-To: <7840a550-4924-f95f-ab85-f3465fd869af@gmail.com>
References: <6fbfe09c.1042.170d6f5f0b3.Coremail.13917987541@163.com>
 <CAGxFJbTXUAGt3N=S_i7+bjwzV7LGa0Zn-Ujwod_J_uuVih5KmQ@mail.gmail.com>
 <610712cd.8d1c.170da5fe48f.Coremail.13917987541@163.com>
 <CAGxFJbQCQrQ4K64YrQha5G=UPFkwsezZKMfetrGgqL8fijTarQ@mail.gmail.com>
 <1d8b045f.8d42.170da8478a9.Coremail.13917987541@163.com>
 <CAGxFJbQ+-aT5QfP9YoPk7gB+yr3ei-Q-_k=MgSwFR=XuHn9_uA@mail.gmail.com>
 <1b3b91e5-bd30-5bae-74f6-3dc17e84e7aa@gmail.com>
 <CACxE24nTkzZvwiu29Mj6_u9GSsfzGowva5Po8gb6jdpng773jA@mail.gmail.com>
 <7840a550-4924-f95f-ab85-f3465fd869af@gmail.com>
Message-ID: <CACxE24nnH6XnXtUSAtGP=CsCm5kzyH38g-R5yGg7cg9Gh=NBBA@mail.gmail.com>

Got it!  Thanks!



On Sat, Mar 14, 2020 at 2:24 PM J C Nash <profjcnash at gmail.com> wrote:

> As I understand things, OpenBLAS will improve the performance of
> computations on regular IEEE 754 formats.
>
> I use Rmpfr for much longer numbers, e.g., 50 decimal digits, which --
> depending on scale of numbers in a
> vector -- can mean one needs approximately 100 decimals to accumulate the
> dot product. As I indicated, I
> have not been able to verify the internals. Probably I'll have to dig.
> However, for the moment I'm using
> David Smith's FM-Fortran, which offers a dot product function which does
> appear to do this.
>
> JN
>
> On 2020-03-14 4:17 p.m., Erin Hodgess wrote:
> > Are you using a PC, please?  You may want to consider installing
> OpenBLAS.  It?s a bit tricky but worth the time/effort.
> >
> > Thanks,
> > Erin
> >
> >
> > On Sat, Mar 14, 2020 at 2:10 PM J C Nash <profjcnash at gmail.com <mailto:
> profjcnash at gmail.com>> wrote:
> >
> >     Rmpfr does "support" matrix algebra, but I have been trying for some
> >     time to determine if it computes "double" precision (i.e., double the
> >     set level of precision) inner products. I suspect that it does NOT,
> >     which is unfortunate. However, I would be happy to be wrong about
> >     this.
> >
> >     JN
> >
> >     On 2020-03-14 3:41 p.m., Bert Gunter wrote:
> >     > Read its documentation yourself and unless you have good reason
> not to,
> >     > always cc the list (which I have done here).
> >     >
> >     >
> >     > Bert Gunter
> >     >
> >     > "The trouble with having an open mind is that people keep coming
> along and
> >     > sticking things into it."
> >     > -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> >     >
> >     >
> >     > On Sat, Mar 14, 2020 at 12:28 PM ??? <13917987541 at 163.com <mailto:
> 13917987541 at 163.com>> wrote:
> >     >
> >     >> Thanks. Does it support matrix algebra?
> >     >>
> >     >>
> >     >>
> >     >> ???
> >     >> ???13917987541 at 163.com <mailto:13917987541 at 163.com>
> >     >>
> >     >>
> >     <
> https://maas.mail.163.com/dashi-web-extend/html/proSignature.html?iconUrl=http%3A%2F%2Fmail-online.nosdn.127.net%2F17c23bc1722125aa6261c33736f525c5.jpg&name=%E6%9E%97%E4%BC%9F%E7%92%90&uid=13917987541%40163.com&ftlId=1&items=%5B%22%E9%82%AE%E7%AE%B1%EF%BC%9A13917987541%40163.com%22%5D
> >
> >     >>
> >     >> ??? ?????? <https://mail.163.com/dashi/dlpro.html?from=mail88> ??
> >     >>
> >     >> On 03/15/2020 03:18, Bert Gunter <bgunter.4567 at gmail.com <mailto:
> bgunter.4567 at gmail.com>> wrote:
> >     >> Use google instead, as I recommended. If that's impossible in
> China, you
> >     >> should state that and what you tried (Baidu) in your query.
> >     >>
> >     >> You'll get the Rmpfr package.
> >     >>
> >     >> Bert Gunter
> >     >>
> >     >> "The trouble with having an open mind is that people keep coming
> along and
> >     >> sticking things into it."
> >     >> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> >     >>
> >     >>
> >     >> On Sat, Mar 14, 2020 at 11:48 AM ??? <13917987541 at 163.com
> <mailto:13917987541 at 163.com>> wrote:
> >     >>
> >     >>> Thanks, I tried Baidu but get nothing
> >     >>>
> >     >>>
> >     >>>
> >     >>> ???
> >     >>> ???13917987541 at 163.com <mailto:13917987541 at 163.com>
> >     >>>
> >     >>>
> >     <
> https://maas.mail.163.com/dashi-web-extend/html/proSignature.html?iconUrl=http%3A%2F%2Fmail-online.nosdn.127.net%2F17c23bc1722125aa6261c33736f525c5.jpg&name=%E6%9E%97%E4%BC%9F%E7%92%90&uid=13917987541%40163.com&ftlId=1&items=%5B%22%E9%82%AE%E7%AE%B1%EF%BC%9A13917987541%40163.com%22%5D
> >
> >     >>>
> >     >>> ??? ?????? <https://mail.163.com/dashi/dlpro.html?from=mail88>
> ??
> >     >>>
> >     >>> On 03/15/2020 02:44, Bert Gunter <bgunter.4567 at gmail.com
> <mailto:bgunter.4567 at gmail.com>> wrote:
> >     >>> Here's a novel idea:
> >     >>> Do a google search on "multiprecision computing package R" for
> an answer.
> >     >>>
> >     >>> Bert Gunter
> >     >>>
> >     >>> "The trouble with having an open mind is that people keep coming
> along
> >     >>> and sticking things into it."
> >     >>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip
> )
> >     >>>
> >     >>>
> >     >>> On Sat, Mar 14, 2020 at 10:36 AM ??? <13917987541 at 163.com
> <mailto:13917987541 at 163.com>> wrote:
> >     >>>
> >     >>>> Dear all
> >     >>>>
> >     >>>>
> >     >>>> I need a multiprecision computing package in R, if anyone in
> the list
> >     >>>> knows, please let me known...
> >     >>>>
> >     >>>>
> >     >>>> Many thanks
> >     >>>>
> >     >>>>
> >     >>>> Weilu Lin
> >     >>>>         [[alternative HTML version deleted]]
> >     >>>>
> >     >>>> ______________________________________________
> >     >>>> R-help at r-project.org <mailto:R-help at r-project.org> mailing
> list -- To UNSUBSCRIBE and more, see
> >     >>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >     >>>> PLEASE do read the posting guide
> >     >>>> http://www.R-project.org/posting-guide.html
> >     >>>> and provide commented, minimal, self-contained, reproducible
> code.
> >     >>>>
> >     >>>
> >     >
> >     >       [[alternative HTML version deleted]]
> >     >
> >     > ______________________________________________
> >     > R-help at r-project.org <mailto:R-help at r-project.org> mailing list
> -- To UNSUBSCRIBE and more, see
> >     > https://stat.ethz.ch/mailman/listinfo/r-help
> >     > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> >     > and provide commented, minimal, self-contained, reproducible code.
> >     >
> >
> >     ______________________________________________
> >     R-help at r-project.org <mailto:R-help at r-project.org> mailing list --
> To UNSUBSCRIBE and more, see
> >     https://stat.ethz.ch/mailman/listinfo/r-help
> >     PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> >     and provide commented, minimal, self-contained, reproducible code.
> >
> > --
> > Erin Hodgess, PhD
> > mailto: erinm.hodgess at gmail.com <mailto:erinm.hodgess at gmail.com>
>
-- 
Erin Hodgess, PhD
mailto: erinm.hodgess at gmail.com

	[[alternative HTML version deleted]]


From pro|jcn@@h @end|ng |rom gm@||@com  Sat Mar 14 21:34:57 2020
From: pro|jcn@@h @end|ng |rom gm@||@com (J C Nash)
Date: Sat, 14 Mar 2020 16:34:57 -0400
Subject: [R] About the multiprecision computing package in R
In-Reply-To: <FB0F13A9-400E-46AA-B9D4-FA7435F1EB37@dcn.davis.ca.us>
References: <6fbfe09c.1042.170d6f5f0b3.Coremail.13917987541@163.com>
 <CAGxFJbTXUAGt3N=S_i7+bjwzV7LGa0Zn-Ujwod_J_uuVih5KmQ@mail.gmail.com>
 <610712cd.8d1c.170da5fe48f.Coremail.13917987541@163.com>
 <CAGxFJbQCQrQ4K64YrQha5G=UPFkwsezZKMfetrGgqL8fijTarQ@mail.gmail.com>
 <1d8b045f.8d42.170da8478a9.Coremail.13917987541@163.com>
 <CAGxFJbQ+-aT5QfP9YoPk7gB+yr3ei-Q-_k=MgSwFR=XuHn9_uA@mail.gmail.com>
 <1b3b91e5-bd30-5bae-74f6-3dc17e84e7aa@gmail.com>
 <FB0F13A9-400E-46AA-B9D4-FA7435F1EB37@dcn.davis.ca.us>
Message-ID: <9cbf1d8b-c5e0-724a-a7f4-e87fc1024679@gmail.com>

The issue is to avoid the storage and operational penalty. 100 x 100 matrix in 100 decimals vs 100 x 100 matrix in 50
decimals for many operations like copy, scale, etc. But accumulation of inner products, you want to avoid digit loss,
e.g., A and B are long vectors -- say 100000 long, with a few "large" elements but most smaller. However 99000 "small"
numbers could add up and ...

As with many such issues, it doesn't affect the vast majority of occurrences. Indeed few of my own. IEEE arithmetic
usually does the job (I was one of the members of the original committee). This particular
concern arose when trying to tease out a signal from a great deal of noise from a spacecraft sensor.

JN


On 2020-03-14 4:28 p.m., Jeff Newmiller wrote:
> Not sure I understand the concern. IEEE 754 double precision floating point was invented to allow for avoiding loss of precision when manipulating single precision floating point numbers... but then C just ignores single precision and you are expected to know that the precision of your answers may only be relied on at single precision for certain operations.
> 
> Wouldn't you just set Rmpfr precision to double your actual desired precision and move on? Though I suppose you might consider  more than doubling the desired precision to deal with exponentiation [1].
> 
> [1] https://en.m.wikipedia.org/wiki/Extended_precision#Working_range
> 
> On March 14, 2020 1:10:19 PM PDT, J C Nash <profjcnash at gmail.com> wrote:
>> Rmpfr does "support" matrix algebra, but I have been trying for some
>> time to determine if it computes "double" precision (i.e., double the
>> set level of precision) inner products. I suspect that it does NOT,
>> which is unfortunate. However, I would be happy to be wrong about
>> this.
>>
>> JN
>>
>> On 2020-03-14 3:41 p.m., Bert Gunter wrote:
>>> Read its documentation yourself and unless you have good reason not
>> to,
>>> always cc the list (which I have done here).
>>>
>>>
>>> Bert Gunter
>>>
>>> "The trouble with having an open mind is that people keep coming
>> along and
>>> sticking things into it."
>>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>>
>>>
>>> On Sat, Mar 14, 2020 at 12:28 PM ??? <13917987541 at 163.com> wrote:
>>>
>>>> Thanks. Does it support matrix algebra?
>>>>
>>>>
>>>>
>>>> ???
>>>> ???13917987541 at 163.com
>>>>
>>>>
>> <https://maas.mail.163.com/dashi-web-extend/html/proSignature.html?iconUrl=http%3A%2F%2Fmail-online.nosdn.127.net%2F17c23bc1722125aa6261c33736f525c5.jpg&name=%E6%9E%97%E4%BC%9F%E7%92%90&uid=13917987541%40163.com&ftlId=1&items=%5B%22%E9%82%AE%E7%AE%B1%EF%BC%9A13917987541%40163.com%22%5D>
>>>>
>>>> ??? ?????? <https://mail.163.com/dashi/dlpro.html?from=mail88> ??
>>>>
>>>> On 03/15/2020 03:18, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>>>> Use google instead, as I recommended. If that's impossible in China,
>> you
>>>> should state that and what you tried (Baidu) in your query.
>>>>
>>>> You'll get the Rmpfr package.
>>>>
>>>> Bert Gunter
>>>>
>>>> "The trouble with having an open mind is that people keep coming
>> along and
>>>> sticking things into it."
>>>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>>>
>>>>
>>>> On Sat, Mar 14, 2020 at 11:48 AM ??? <13917987541 at 163.com> wrote:
>>>>
>>>>> Thanks, I tried Baidu but get nothing
>>>>>
>>>>>
>>>>>
>>>>> ???
>>>>> ???13917987541 at 163.com
>>>>>
>>>>>
>> <https://maas.mail.163.com/dashi-web-extend/html/proSignature.html?iconUrl=http%3A%2F%2Fmail-online.nosdn.127.net%2F17c23bc1722125aa6261c33736f525c5.jpg&name=%E6%9E%97%E4%BC%9F%E7%92%90&uid=13917987541%40163.com&ftlId=1&items=%5B%22%E9%82%AE%E7%AE%B1%EF%BC%9A13917987541%40163.com%22%5D>
>>>>>
>>>>> ??? ?????? <https://mail.163.com/dashi/dlpro.html?from=mail88> ??
>>>>>
>>>>> On 03/15/2020 02:44, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>>>>> Here's a novel idea:
>>>>> Do a google search on "multiprecision computing package R" for an
>> answer.
>>>>>
>>>>> Bert Gunter
>>>>>
>>>>> "The trouble with having an open mind is that people keep coming
>> along
>>>>> and sticking things into it."
>>>>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>>>>
>>>>>
>>>>> On Sat, Mar 14, 2020 at 10:36 AM ??? <13917987541 at 163.com> wrote:
>>>>>
>>>>>> Dear all
>>>>>>
>>>>>>
>>>>>> I need a multiprecision computing package in R, if anyone in the
>> list
>>>>>> knows, please let me known...
>>>>>>
>>>>>>
>>>>>> Many thanks
>>>>>>
>>>>>>
>>>>>> Weilu Lin
>>>>>>         [[alternative HTML version deleted]]
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>> PLEASE do read the posting guide
>>>>>> http://www.R-project.org/posting-guide.html
>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>
>>>>>
>>>
>>> 	[[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>


From wdun|@p @end|ng |rom t|bco@com  Sat Mar 14 22:22:14 2020
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Sat, 14 Mar 2020 14:22:14 -0700
Subject: [R] fit for truncated normal distribution
In-Reply-To: <1786F385-F78F-4CBC-95E7-4D83A22F009B@gmail.com>
References: <31d9c507-3b08-b254-847e-1777f7e9a05b@t-online.de>
 <CAGxFJbQAvXJ5fJYbFyuaBc9xd1SoFF9PpQqD-WJ=Nw9aG4o65w@mail.gmail.com>
 <1786F385-F78F-4CBC-95E7-4D83A22F009B@gmail.com>
Message-ID: <CAF8bMcaiSBV9W87mEiKjk+aXWtVaDSuhEXSHTmp4XgFy0ZEHMg@mail.gmail.com>

On Linux it says "Program received signal SIGFPE, Arithmetic exception".  I
think the only way to get a SIGFPE (floating point exception) any more (on
machines with IEEE floating point arithmetic) is taking an integer modulo
zero, which do_druncnorm does when length(x) is 0:
       const double cx = x[i % n_x];
Should R catch SIGFPE and turn it into an error condition?

Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Sat, Mar 14, 2020 at 12:19 PM peter dalgaard <pdalgd at gmail.com> wrote:

> I see it in three different Mac builds, including a quite recent local
> R-devel build.
>
> It boils down to this:
>
> > dtruncnorm(numeric(0), mean=6.7, sd=1.38, a=-Inf, b=9)
> Floating point exception: 8
>
> which looks like a bug in the truncnorm package, where dtruncnorm() is
> unprepared for a zero-length argument.
>
> (The indirect cause is fitdistrplus:::test1fun, which makes calls like the
> above.)
>
> -pd
>
> > On 14 Mar 2020, at 19:42 , Bert Gunter <bgunter.4567 at gmail.com> wrote:
> >
> > Inline.
> >
> > Bert Gunter
> >
> > "The trouble with having an open mind is that people keep coming along
> and
> > sticking things into it."
> > -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> >
> >
> > On Sat, Mar 14, 2020 at 10:36 AM |Juergen Hedderich <
> j.hedderich at t-online.de>
> > wrote:
> >
> >> Dear R-help list members,
> >>
> >> the R Session aborted without any 'comment'  for the following 'small
> >> example':
> >>
> >> /library(fitdistrplus)
> >> library(truncnorm)
> >>
> >> filter <- c(4.98, 8.60, 6.37, 4.37, 8.03, 7.43, 6.83, 5.64, 5.43, 6.88,
> >>             4.57, 7.50, 5.69, 7.88, 8.98, 6.79, 8.61, 6.70, 5.14, 7.29)
> >>
> >> fit  <- fitdist(filter, "truncnorm", fix.arg=list(a=-Inf, b=9),
> >>                 start=list(mean=mean(filter), sd=sd(filter)),
> >>                 optim.method="L-BFGS-B",
> >>                 lower=c(-0.1, -0.1), upper=c(Inf, Inf))/
> >>
> >> R worked fine in an 'older'  R-version (environment). Can anyone help
> me?
> >>
> >
> > I can't. But without including the specifics of the older and newer
> > software (including OS version, maybe), maybe no one can.
> > See ?sessionInfo
> >
> >
> >
> >>
> >> Many thanks in advance.
> >>
> >> Best regards
> >>
> >> J. Hedderich
> >>
> >>
> >>        [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >>
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> --
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @purd|e@@ @end|ng |rom gm@||@com  Sat Mar 14 22:27:48 2020
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Sun, 15 Mar 2020 10:27:48 +1300
Subject: [R] Relatively Simple Maximization Using Optim Doesnt Optimize
In-Reply-To: <272e760f-d1fb-9f1c-f431-0fe418c70b11@gmail.com>
References: <CA+gY42CJ000Kuj0Cjnif+xWH0oJYt0mXOzUx9s33FSWE9Peteg@mail.gmail.com>
 <272e760f-d1fb-9f1c-f431-0fe418c70b11@gmail.com>
Message-ID: <CAB8pepww_WR=D1+d+vUsi6EUfuXi3y0kighkONBRzoh7Anzpvw@mail.gmail.com>

######################################################
I ran <while (TRUE) 0> before posting, and waited a while...
(Re: The posting guide, which I'm going to start putting a lot more weight on).

Noting, I was wondering if the posting guide has a mistake, because
<4*runif(1)> doesn't do anything special...
(Hopefully, Martin is reading this...).

And I'm planning to make this my last post in this thread...
######################################################
Here's a much simpler example of the problem:

optim (4, dnorm, method="CG", control = list (fnscale=-1) )$par

This problem isn't limited to objective functions of one variable.
I tried similar problems with functions of two, three and four variables.
And the same thing happened.

I'm not sure if this is a bug in the R code, or not.

If it's a bug...

And if it's not a bug, I'm struggling to see why anyone would want to
use this method in an applied setting...


On Fri, Mar 13, 2020 at 3:42 AM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> It looks like a bug in the CG method.  The other methods in optim() all
> work fine.  CG is documented to be a good choice in high dimensions; why
> did you choose it for a 1 dim problem?
>
> Duncan Murdoch


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Mar 14 22:33:32 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 14 Mar 2020 14:33:32 -0700
Subject: [R] fit for truncated normal distribution
In-Reply-To: <CAF8bMcaiSBV9W87mEiKjk+aXWtVaDSuhEXSHTmp4XgFy0ZEHMg@mail.gmail.com>
References: <31d9c507-3b08-b254-847e-1777f7e9a05b@t-online.de>
 <CAGxFJbQAvXJ5fJYbFyuaBc9xd1SoFF9PpQqD-WJ=Nw9aG4o65w@mail.gmail.com>
 <1786F385-F78F-4CBC-95E7-4D83A22F009B@gmail.com>
 <CAF8bMcaiSBV9W87mEiKjk+aXWtVaDSuhEXSHTmp4XgFy0ZEHMg@mail.gmail.com>
Message-ID: <EBCA596C-39E3-448A-983D-EAB8D766B10F@dcn.davis.ca.us>

Uh... yes?!

On March 14, 2020 2:22:14 PM PDT, William Dunlap via R-help <r-help at r-project.org> wrote:
>On Linux it says "Program received signal SIGFPE, Arithmetic
>exception".  I
>think the only way to get a SIGFPE (floating point exception) any more
>(on
>machines with IEEE floating point arithmetic) is taking an integer
>modulo
>zero, which do_druncnorm does when length(x) is 0:
>       const double cx = x[i % n_x];
>Should R catch SIGFPE and turn it into an error condition?
>
>Bill Dunlap
>TIBCO Software
>wdunlap tibco.com
>
>
>On Sat, Mar 14, 2020 at 12:19 PM peter dalgaard <pdalgd at gmail.com>
>wrote:
>
>> I see it in three different Mac builds, including a quite recent
>local
>> R-devel build.
>>
>> It boils down to this:
>>
>> > dtruncnorm(numeric(0), mean=6.7, sd=1.38, a=-Inf, b=9)
>> Floating point exception: 8
>>
>> which looks like a bug in the truncnorm package, where dtruncnorm()
>is
>> unprepared for a zero-length argument.
>>
>> (The indirect cause is fitdistrplus:::test1fun, which makes calls
>like the
>> above.)
>>
>> -pd
>>
>> > On 14 Mar 2020, at 19:42 , Bert Gunter <bgunter.4567 at gmail.com>
>wrote:
>> >
>> > Inline.
>> >
>> > Bert Gunter
>> >
>> > "The trouble with having an open mind is that people keep coming
>along
>> and
>> > sticking things into it."
>> > -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>> >
>> >
>> > On Sat, Mar 14, 2020 at 10:36 AM |Juergen Hedderich <
>> j.hedderich at t-online.de>
>> > wrote:
>> >
>> >> Dear R-help list members,
>> >>
>> >> the R Session aborted without any 'comment'  for the following
>'small
>> >> example':
>> >>
>> >> /library(fitdistrplus)
>> >> library(truncnorm)
>> >>
>> >> filter <- c(4.98, 8.60, 6.37, 4.37, 8.03, 7.43, 6.83, 5.64, 5.43,
>6.88,
>> >>             4.57, 7.50, 5.69, 7.88, 8.98, 6.79, 8.61, 6.70, 5.14,
>7.29)
>> >>
>> >> fit  <- fitdist(filter, "truncnorm", fix.arg=list(a=-Inf, b=9),
>> >>                 start=list(mean=mean(filter), sd=sd(filter)),
>> >>                 optim.method="L-BFGS-B",
>> >>                 lower=c(-0.1, -0.1), upper=c(Inf, Inf))/
>> >>
>> >> R worked fine in an 'older'  R-version (environment). Can anyone
>help
>> me?
>> >>
>> >
>> > I can't. But without including the specifics of the older and newer
>> > software (including OS version, maybe), maybe no one can.
>> > See ?sessionInfo
>> >
>> >
>> >
>> >>
>> >> Many thanks in advance.
>> >>
>> >> Best regards
>> >>
>> >> J. Hedderich
>> >>
>> >>
>> >>        [[alternative HTML version deleted]]
>> >>
>> >> ______________________________________________
>> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> >> https://stat.ethz.ch/mailman/listinfo/r-help
>> >> PLEASE do read the posting guide
>> >> http://www.R-project.org/posting-guide.html
>> >> and provide commented, minimal, self-contained, reproducible code.
>> >>
>> >
>> >       [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>>
>> --
>> Peter Dalgaard, Professor,
>> Center for Statistics, Copenhagen Business School
>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>> Phone: (+45)38153501
>> Office: A 4.23
>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Mar 14 22:41:04 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 14 Mar 2020 14:41:04 -0700
Subject: [R] Relatively Simple Maximization Using Optim Doesnt Optimize
In-Reply-To: <CAB8pepww_WR=D1+d+vUsi6EUfuXi3y0kighkONBRzoh7Anzpvw@mail.gmail.com>
References: <CA+gY42CJ000Kuj0Cjnif+xWH0oJYt0mXOzUx9s33FSWE9Peteg@mail.gmail.com>
 <272e760f-d1fb-9f1c-f431-0fe418c70b11@gmail.com>
 <CAB8pepww_WR=D1+d+vUsi6EUfuXi3y0kighkONBRzoh7Anzpvw@mail.gmail.com>
Message-ID: <B3F214BF-62CB-4D6B-A4AE-CF26949981B1@dcn.davis.ca.us>

You are starting to sound like Dr Nash [1]... "use optimr".

[1] https://stat.ethz.ch/pipermail/r-help/2018-July/458498.html

On March 14, 2020 2:27:48 PM PDT, Abby Spurdle <spurdle.a at gmail.com> wrote:
>######################################################
>I ran <while (TRUE) 0> before posting, and waited a while...
>(Re: The posting guide, which I'm going to start putting a lot more
>weight on).
>
>Noting, I was wondering if the posting guide has a mistake, because
><4*runif(1)> doesn't do anything special...
>(Hopefully, Martin is reading this...).
>
>And I'm planning to make this my last post in this thread...
>######################################################
>Here's a much simpler example of the problem:
>
>optim (4, dnorm, method="CG", control = list (fnscale=-1) )$par
>
>This problem isn't limited to objective functions of one variable.
>I tried similar problems with functions of two, three and four
>variables.
>And the same thing happened.
>
>I'm not sure if this is a bug in the R code, or not.
>
>If it's a bug...
>
>And if it's not a bug, I'm struggling to see why anyone would want to
>use this method in an applied setting...
>
>
>On Fri, Mar 13, 2020 at 3:42 AM Duncan Murdoch
><murdoch.duncan at gmail.com> wrote:
>>
>> It looks like a bug in the CG method.  The other methods in optim()
>all
>> work fine.  CG is documented to be a good choice in high dimensions;
>why
>> did you choose it for a 1 dim problem?
>>
>> Duncan Murdoch
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From rmh @end|ng |rom temp|e@edu  Sun Mar 15 00:55:11 2020
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Sat, 14 Mar 2020 19:55:11 -0400
Subject: [R] About the multiprecision computing package in R
In-Reply-To: <9cbf1d8b-c5e0-724a-a7f4-e87fc1024679@gmail.com>
References: <6fbfe09c.1042.170d6f5f0b3.Coremail.13917987541@163.com>
 <CAGxFJbTXUAGt3N=S_i7+bjwzV7LGa0Zn-Ujwod_J_uuVih5KmQ@mail.gmail.com>
 <610712cd.8d1c.170da5fe48f.Coremail.13917987541@163.com>
 <CAGxFJbQCQrQ4K64YrQha5G=UPFkwsezZKMfetrGgqL8fijTarQ@mail.gmail.com>
 <1d8b045f.8d42.170da8478a9.Coremail.13917987541@163.com>
 <CAGxFJbQ+-aT5QfP9YoPk7gB+yr3ei-Q-_k=MgSwFR=XuHn9_uA@mail.gmail.com>
 <1b3b91e5-bd30-5bae-74f6-3dc17e84e7aa@gmail.com>
 <FB0F13A9-400E-46AA-B9D4-FA7435F1EB37@dcn.davis.ca.us>
 <9cbf1d8b-c5e0-724a-a7f4-e87fc1024679@gmail.com>
Message-ID: <CAGx1TMAOoyQWPvdkFZOwmtmhAzaa=XDF6OgTr94kCSmLOanp4A@mail.gmail.com>

Rmpfr product and inner product are not doubling the nominal precision.
Small precision inner products are stored as 53-bit numeric.

library(Rmpfr)

 ## double with precBits=53
(5/17) * (5/17) ## 0.08650519 ## base 10
formatHex( (5/17) * (5/17) ) ##  +0x1.6253443526171p-4

## various precisions
fs5 <- 5*mpfr(1, precBits=5)/17
fs6 <- 5*mpfr(1, precBits=6)/17
fs7 <- 5*mpfr(1, precBits=7)/17
fs8 <- 5*mpfr(1, precBits=8)/17
fs9 <- 5*mpfr(1, precBits=9)/17

## product
formatHex(fs5*fs5) ## +0x1.7p-4

## All these are smaller
formatHex(fs6*fs6)
formatHex(fs7*fs7)
formatHex(fs8*fs8)
formatHex(fs9*fs9)

## and all round DOWN to +0x1.6p-4
formatHex(mpfr(  fs6*fs6 , precBits=5))
formatHex(mpfr(  fs7*fs7 , precBits=5))
formatHex(mpfr(  fs8*fs8 , precBits=5))
formatHex(mpfr(  fs9*fs9 , precBits=5))


## inner product, for low precision, is stored as 53-bit numeric
rounded to 6 bits
formatHex(fs5 %*% fs5) ## +0x1.6900000000000p-4
class(fs5 %*% fs5)
getPrec(fs5 %*% fs5)
formatHex((fs5 %*% fs5)*(fs5 %*% fs5)) ## 12 bits ## +0x1.fd11000000000p-8

## All these are smaller
formatHex(fs6 %*% fs6) ## same
formatHex(fs7 %*% fs7)
formatHex(fs8 %*% fs8)
formatHex(fs9 %*% fs9)

## and all round DOWN to +0x1.6p-4
formatHex(mpfr(  fs6 %*% fs6 , precBits=5)) ## same
formatHex(mpfr(  fs7 %*% fs7 , precBits=5))
formatHex(mpfr(  fs8 %*% fs8 , precBits=5))
formatHex(mpfr(  fs9 %*% fs9 , precBits=5))



## inner product, for high precision, stays at the specified precision
fs65 <- 5*mpfr(1, precBits=65)/17
formatHex(fs65 * fs65)   ## +0x1.62534435261707f8p-4

formatHex(fs65 %*% fs65) ## +0x1.62534435261707f8p-4
class(fs65 %*% fs65)
getPrec(fs65 %*% fs65)

fs130 <- 5*mpfr(1, precBits=130)/17
formatHex(fs130 * fs130)   ## +0x1.62534435261707f8e9dacbbcad9e8f800p-4
formatHex(mpfr( fs130 * fs130 , precBits=65))   ## +0x1.62534435261707f9p-4
## not the same as 65-bit inner product

On Sat, Mar 14, 2020 at 4:51 PM J C Nash <profjcnash at gmail.com> wrote:
>
> The issue is to avoid the storage and operational penalty. 100 x 100 matrix in 100 decimals vs 100 x 100 matrix in 50
> decimals for many operations like copy, scale, etc. But accumulation of inner products, you want to avoid digit loss,
> e.g., A and B are long vectors -- say 100000 long, with a few "large" elements but most smaller. However 99000 "small"
> numbers could add up and ...
>
> As with many such issues, it doesn't affect the vast majority of occurrences. Indeed few of my own. IEEE arithmetic
> usually does the job (I was one of the members of the original committee). This particular
> concern arose when trying to tease out a signal from a great deal of noise from a spacecraft sensor.
>
> JN
>
>
> On 2020-03-14 4:28 p.m., Jeff Newmiller wrote:
> > Not sure I understand the concern. IEEE 754 double precision floating point was invented to allow for avoiding loss of precision when manipulating single precision floating point numbers... but then C just ignores single precision and you are expected to know that the precision of your answers may only be relied on at single precision for certain operations.
> >
> > Wouldn't you just set Rmpfr precision to double your actual desired precision and move on? Though I suppose you might consider  more than doubling the desired precision to deal with exponentiation [1].
> >
> > [1] https://en.m.wikipedia.org/wiki/Extended_precision#Working_range
> >
> > On March 14, 2020 1:10:19 PM PDT, J C Nash <profjcnash at gmail.com> wrote:
> >> Rmpfr does "support" matrix algebra, but I have been trying for some
> >> time to determine if it computes "double" precision (i.e., double the
> >> set level of precision) inner products. I suspect that it does NOT,
> >> which is unfortunate. However, I would be happy to be wrong about
> >> this.
> >>
> >> JN
> >>
> >> On 2020-03-14 3:41 p.m., Bert Gunter wrote:
> >>> Read its documentation yourself and unless you have good reason not
> >> to,
> >>> always cc the list (which I have done here).
> >>>
> >>>
> >>> Bert Gunter
> >>>
> >>> "The trouble with having an open mind is that people keep coming
> >> along and
> >>> sticking things into it."
> >>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> >>>
> >>>
> >>> On Sat, Mar 14, 2020 at 12:28 PM ??? <13917987541 at 163.com> wrote:
> >>>
> >>>> Thanks. Does it support matrix algebra?
> >>>>
> >>>>
> >>>>
> >>>> ???
> >>>> ???13917987541 at 163.com
> >>>>
> >>>>
> >> <https://maas.mail.163.com/dashi-web-extend/html/proSignature.html?iconUrl=http%3A%2F%2Fmail-online.nosdn.127.net%2F17c23bc1722125aa6261c33736f525c5.jpg&name=%E6%9E%97%E4%BC%9F%E7%92%90&uid=13917987541%40163.com&ftlId=1&items=%5B%22%E9%82%AE%E7%AE%B1%EF%BC%9A13917987541%40163.com%22%5D>
> >>>>
> >>>> ??? ?????? <https://mail.163.com/dashi/dlpro.html?from=mail88> ??
> >>>>
> >>>> On 03/15/2020 03:18, Bert Gunter <bgunter.4567 at gmail.com> wrote:
> >>>> Use google instead, as I recommended. If that's impossible in China,
> >> you
> >>>> should state that and what you tried (Baidu) in your query.
> >>>>
> >>>> You'll get the Rmpfr package.
> >>>>
> >>>> Bert Gunter
> >>>>
> >>>> "The trouble with having an open mind is that people keep coming
> >> along and
> >>>> sticking things into it."
> >>>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> >>>>
> >>>>
> >>>> On Sat, Mar 14, 2020 at 11:48 AM ??? <13917987541 at 163.com> wrote:
> >>>>
> >>>>> Thanks, I tried Baidu but get nothing
> >>>>>
> >>>>>
> >>>>>
> >>>>> ???
> >>>>> ???13917987541 at 163.com
> >>>>>
> >>>>>
> >> <https://maas.mail.163.com/dashi-web-extend/html/proSignature.html?iconUrl=http%3A%2F%2Fmail-online.nosdn.127.net%2F17c23bc1722125aa6261c33736f525c5.jpg&name=%E6%9E%97%E4%BC%9F%E7%92%90&uid=13917987541%40163.com&ftlId=1&items=%5B%22%E9%82%AE%E7%AE%B1%EF%BC%9A13917987541%40163.com%22%5D>
> >>>>>
> >>>>> ??? ?????? <https://mail.163.com/dashi/dlpro.html?from=mail88> ??
> >>>>>
> >>>>> On 03/15/2020 02:44, Bert Gunter <bgunter.4567 at gmail.com> wrote:
> >>>>> Here's a novel idea:
> >>>>> Do a google search on "multiprecision computing package R" for an
> >> answer.
> >>>>>
> >>>>> Bert Gunter
> >>>>>
> >>>>> "The trouble with having an open mind is that people keep coming
> >> along
> >>>>> and sticking things into it."
> >>>>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> >>>>>
> >>>>>
> >>>>> On Sat, Mar 14, 2020 at 10:36 AM ??? <13917987541 at 163.com> wrote:
> >>>>>
> >>>>>> Dear all
> >>>>>>
> >>>>>>
> >>>>>> I need a multiprecision computing package in R, if anyone in the
> >> list
> >>>>>> knows, please let me known...
> >>>>>>
> >>>>>>
> >>>>>> Many thanks
> >>>>>>
> >>>>>>
> >>>>>> Weilu Lin
> >>>>>>         [[alternative HTML version deleted]]
> >>>>>>
> >>>>>> ______________________________________________
> >>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>>>> PLEASE do read the posting guide
> >>>>>> http://www.R-project.org/posting-guide.html
> >>>>>> and provide commented, minimal, self-contained, reproducible code.
> >>>>>>
> >>>>>
> >>>
> >>>     [[alternative HTML version deleted]]
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >>>
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From j@hedder|ch @end|ng |rom t-on||ne@de  Sun Mar 15 11:31:01 2020
From: j@hedder|ch @end|ng |rom t-on||ne@de (|Juergen Hedderich)
Date: Sun, 15 Mar 2020 11:31:01 +0100
Subject: [R] fit for truncated normal distribution
In-Reply-To: <EBCA596C-39E3-448A-983D-EAB8D766B10F@dcn.davis.ca.us>
References: <31d9c507-3b08-b254-847e-1777f7e9a05b@t-online.de>
 <CAGxFJbQAvXJ5fJYbFyuaBc9xd1SoFF9PpQqD-WJ=Nw9aG4o65w@mail.gmail.com>
 <1786F385-F78F-4CBC-95E7-4D83A22F009B@gmail.com>
 <CAF8bMcaiSBV9W87mEiKjk+aXWtVaDSuhEXSHTmp4XgFy0ZEHMg@mail.gmail.com>
 <EBCA596C-39E3-448A-983D-EAB8D766B10F@dcn.davis.ca.us>
Message-ID: <8c65379a-3bbf-6f50-aae3-6c50d0834df2@t-online.de>

Many thanks for all the helpful hints.

There is probably a bug in dtruncnorm() from library(truncnorm).

The workround with function dtnorm() from library(exactDistr) works fine!

/> //library(fitdistrplus); library(extraDistr) //Lade n?tiges Paket: 
MASS //Lade n?tiges Paket: survival //Lade n?tiges Paket: npsurv //Lade 
n?tiges Paket: lsei //> ////> ////> //filter <- c(4.98, 8.60, 6.37, 
4.37, 8.03, 7.43, 6.83, 5.64, 5.43, 6.88, //+ //4.57, 7.50, 5.69, 7.88, 
8.98, 6.79, 8.61, 6.70, 5.14, 7.29) //> ////> //fit <- fitdist(filter, 
dtnorm, fix.arg=list(a=-Inf, b=9), //+ //start=list(mean=mean(filter), 
sd=sd(filter)), //+ //optim.method="L-BFGS-B", //+ //lower=c(-0.1, 
-0.1), upper=c(Inf, Inf)) //> //summary(fit) //Fitting of the 
distribution ' tnorm ' by maximum likelihood Parameters : estimate Std. 
Error mean 7.036644 0.5592341 sd 1.622802 0.4099704/ Best regards J. 
Hedderich


	[[alternative HTML version deleted]]


From ycd|ng @end|ng |rom coh@org  Sun Mar 15 21:55:05 2020
From: ycd|ng @end|ng |rom coh@org (Yuan Chun Ding)
Date: Sun, 15 Mar 2020 20:55:05 +0000
Subject: [R] find multiple mode
Message-ID: <A86C6438FB909A409DDEF926277952B6113C892E@PPWEXCH2KX14.coh.org>

Hi R users,

I want to find multiple modes (10, 8, 149) for the following vector.

freq =1,2,5,5  10,4,4,8,1,1,8,8,2,4,3,1,2,1,1 138 149  14,1,1;

any suggestion?

Thank you,

Ding

----------------------------------------------------------------------
------------------------------------------------------------
-SECURITY/CONFIDENTIALITY WARNING-  

This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to receive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)
------------------------------------------------------------

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Sun Mar 15 22:23:41 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Mon, 16 Mar 2020 08:23:41 +1100
Subject: [R] find multiple mode
In-Reply-To: <A86C6438FB909A409DDEF926277952B6113C892E@PPWEXCH2KX14.coh.org>
References: <A86C6438FB909A409DDEF926277952B6113C892E@PPWEXCH2KX14.coh.org>
Message-ID: <CA+8X3fUxLObksq1mtYyPg9ZYmOQQs-Y8TMeQt-o5qKQ9B3s=gw@mail.gmail.com>

Hi Ding,
Translating this into R code:

freq<-c(1,2,5,5,10,4,4,8,1,1,8,8,2,4,3,1,2,1,1,138,149,14,1,1)
> table(freq)
freq
 1   2   3   4   5   8  10  14 138 149
 8   3   1   3   2   3   1   1   1   1
> library(prettyR)
> Mode(freq)
[1] "1"

You have a single modal value (1). If there were at most two ones, you
would have three values (2,4,8) that could be considered multiple
modes. What you seem to be doing is considering values that are not
separated by commas as modes. Perhaps this is a formatting problem
with your email.

Jim

On Mon, Mar 16, 2020 at 7:55 AM Yuan Chun Ding <ycding at coh.org> wrote:
>
> Hi R users,
>
> I want to find multiple modes (10, 8, 149) for the following vector.
>
> freq =1,2,5,5  10,4,4,8,1,1,8,8,2,4,3,1,2,1,1 138 149  14,1,1;
>
> any suggestion?
>
> Thank you,
>
> Ding
>
> ----------------------------------------------------------------------
> ------------------------------------------------------------
> -SECURITY/CONFIDENTIALITY WARNING-
>
> This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to rec
>  eive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)
> ------------------------------------------------------------
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Sun Mar 15 23:26:14 2020
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Sun, 15 Mar 2020 22:26:14 +0000
Subject: [R] find multiple mode
In-Reply-To: <A86C6438FB909A409DDEF926277952B6113C892E@PPWEXCH2KX14.coh.org>
References: <A86C6438FB909A409DDEF926277952B6113C892E@PPWEXCH2KX14.coh.org>
Message-ID: <MN2PR03MB516724A15540CA5F45504C5BE2F80@MN2PR03MB5167.namprd03.prod.outlook.com>

Ding,
Perhaps I am missing something. First, if you know the modes, why do you need to look for them? Second, I don?t believe the modes are as you stated, 10, 8, and 149.
John

Sent from Mail<https://go.microsoft.com/fwlink/?LinkId=550986> for Windows 10

From: Yuan Chun Ding<mailto:ycding at coh.org>
Sent: Sunday, March 15, 2020 4:55 PM
To: r-help mailing list<mailto:r-help at r-project.org>
Subject: [R] find multiple mode

Hi R users,

I want to find multiple modes (10, 8, 149) for the following vector.

freq =1,2,5,5  10,4,4,8,1,1,8,8,2,4,3,1,2,1,1 138 149  14,1,1;

any suggestion?

Thank you,

Ding

----------------------------------------------------------------------
------------------------------------------------------------
-SECURITY/CONFIDENTIALITY WARNING-

This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to rec
 eive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)
------------------------------------------------------------

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam03.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=02%7C01%7C%7C147c639f891e4753d10908d7c923312d%7C717009a620de461a88940312a395cac9%7C0%7C0%7C637199025303882146&amp;sdata=2393RLv1pAKFVoOGyObIlOg6yBSttf%2FH59GhqqFU3oA%3D&amp;reserved=0
PLEASE do read the posting guide https://nam03.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.R-project.org%2Fposting-guide.html&amp;data=02%7C01%7C%7C147c639f891e4753d10908d7c923312d%7C717009a620de461a88940312a395cac9%7C0%7C0%7C637199025303882146&amp;sdata=oQhNDMGv2XpTCUpZlCg5brpFJtZ4ZrvfcHVmeXWJmHU%3D&amp;reserved=0
and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sun Mar 15 23:29:45 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sun, 15 Mar 2020 22:29:45 +0000
Subject: [R] find multiple mode
In-Reply-To: <A86C6438FB909A409DDEF926277952B6113C892E@PPWEXCH2KX14.coh.org>
References: <A86C6438FB909A409DDEF926277952B6113C892E@PPWEXCH2KX14.coh.org>
Message-ID: <45196fd1-3eb7-e5f8-3c29-9f0d9014ab83@sapo.pt>

Hello,

There is StackOverflow question on mode finding [1].
There is also a RPubs post, with the following now rewritten as a function.

Mode <- function(x){
   y <- table(x)
   names(y)[which(y == max(y))]
}

Mode(freq)
#[1] "1"

is.na(freq) <- freq == 1
Mode(freq)
#[1] "2" "4" "8"

[1] 
https://stackoverflow.com/questions/2547402/is-there-a-built-in-function-for-finding-the-mode
[2] https://rpubs.com/mohammadshadan/meanmedianmode

Hope this helps,

Rui Barradas


?s 20:55 de 15/03/20, Yuan Chun Ding escreveu:
> Hi R users,
> 
> I want to find multiple modes (10, 8, 149) for the following vector.
> 
> freq =1,2,5,5  10,4,4,8,1,1,8,8,2,4,3,1,2,1,1 138 149  14,1,1;
> 
> any suggestion?
> 
> Thank you,
> 
> Ding
> 
> ----------------------------------------------------------------------
> ------------------------------------------------------------
> -SECURITY/CONFIDENTIALITY WARNING-
> 
> This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to rec
>   eive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)
> ------------------------------------------------------------
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

From @purd|e@@ @end|ng |rom gm@||@com  Sun Mar 15 23:42:37 2020
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Mon, 16 Mar 2020 11:42:37 +1300
Subject: [R] find multiple mode
In-Reply-To: <CA+8X3fUxLObksq1mtYyPg9ZYmOQQs-Y8TMeQt-o5qKQ9B3s=gw@mail.gmail.com>
References: <A86C6438FB909A409DDEF926277952B6113C892E@PPWEXCH2KX14.coh.org>
 <CA+8X3fUxLObksq1mtYyPg9ZYmOQQs-Y8TMeQt-o5qKQ9B3s=gw@mail.gmail.com>
Message-ID: <CAB8pepwcYd+XWSB+GyvRnNJSL3QQuxnvXZpj6gi9rvvwu0kFfQ@mail.gmail.com>

I think people have misinterpreted the question.
The OP wants local maxima from the series.

The original series is frequencies, so your table is frequencies of frequencies.

A solution can be derived by looking at signs of the first and second
differences.
But there may be a simpler way????

On Mon, Mar 16, 2020 at 10:24 AM Jim Lemon <drjimlemon at gmail.com> wrote:
>
> Hi Ding,
> Translating this into R code:
>
> freq<-c(1,2,5,5,10,4,4,8,1,1,8,8,2,4,3,1,2,1,1,138,149,14,1,1)
> > table(freq)
> freq
>  1   2   3   4   5   8  10  14 138 149
>  8   3   1   3   2   3   1   1   1   1
> > library(prettyR)
> > Mode(freq)
> [1] "1"
>
> You have a single modal value (1). If there were at most two ones, you
> would have three values (2,4,8) that could be considered multiple
> modes. What you seem to be doing is considering values that are not
> separated by commas as modes. Perhaps this is a formatting problem
> with your email.
>
> Jim
>
> On Mon, Mar 16, 2020 at 7:55 AM Yuan Chun Ding <ycding at coh.org> wrote:
> >
> > Hi R users,
> >
> > I want to find multiple modes (10, 8, 149) for the following vector.
> >
> > freq =1,2,5,5  10,4,4,8,1,1,8,8,2,4,3,1,2,1,1 138 149  14,1,1;
> >
> > any suggestion?
> >
> > Thank you,
> >
> > Ding
> >
> > ----------------------------------------------------------------------
> > ------------------------------------------------------------
> > -SECURITY/CONFIDENTIALITY WARNING-
> >
> > This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to r
>  ec
> >  eive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)
> > ------------------------------------------------------------
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Mar 16 00:20:11 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 15 Mar 2020 19:20:11 -0400
Subject: [R] find multiple mode
In-Reply-To: <CAB8pepwcYd+XWSB+GyvRnNJSL3QQuxnvXZpj6gi9rvvwu0kFfQ@mail.gmail.com>
References: <A86C6438FB909A409DDEF926277952B6113C892E@PPWEXCH2KX14.coh.org>
 <CA+8X3fUxLObksq1mtYyPg9ZYmOQQs-Y8TMeQt-o5qKQ9B3s=gw@mail.gmail.com>
 <CAB8pepwcYd+XWSB+GyvRnNJSL3QQuxnvXZpj6gi9rvvwu0kFfQ@mail.gmail.com>
Message-ID: <d823e7c7-35b9-9d87-50e7-bfe8dad5f3cd@gmail.com>

On 15/03/2020 6:42 p.m., Abby Spurdle wrote:
> I think people have misinterpreted the question.
> The OP wants local maxima from the series.
> 
> The original series is frequencies, so your table is frequencies of frequencies.
> 
> A solution can be derived by looking at signs of the first and second
> differences.
> But there may be a simpler way????

Presumably this is a homework question.  Your answer is perfect for one 
of those; more detail would be inappropriate.

Duncan Murdoch

> 
> On Mon, Mar 16, 2020 at 10:24 AM Jim Lemon <drjimlemon at gmail.com> wrote:
>>
>> Hi Ding,
>> Translating this into R code:
>>
>> freq<-c(1,2,5,5,10,4,4,8,1,1,8,8,2,4,3,1,2,1,1,138,149,14,1,1)
>>> table(freq)
>> freq
>>   1   2   3   4   5   8  10  14 138 149
>>   8   3   1   3   2   3   1   1   1   1
>>> library(prettyR)
>>> Mode(freq)
>> [1] "1"
>>
>> You have a single modal value (1). If there were at most two ones, you
>> would have three values (2,4,8) that could be considered multiple
>> modes. What you seem to be doing is considering values that are not
>> separated by commas as modes. Perhaps this is a formatting problem
>> with your email.
>>
>> Jim
>>
>> On Mon, Mar 16, 2020 at 7:55 AM Yuan Chun Ding <ycding at coh.org> wrote:
>>>
>>> Hi R users,
>>>
>>> I want to find multiple modes (10, 8, 149) for the following vector.
>>>
>>> freq =1,2,5,5  10,4,4,8,1,1,8,8,2,4,3,1,2,1,1 138 149  14,1,1;
>>>
>>> any suggestion?
>>>
>>> Thank you,
>>>
>>> Ding
>>>
>>> ----------------------------------------------------------------------
>>> ------------------------------------------------------------
>>> -SECURITY/CONFIDENTIALITY WARNING-
>>>
>>> This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to
>    r
>>   ec
>>>   eive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)
>>> ------------------------------------------------------------
>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 


From j|n||68 @end|ng |rom gm@||@com  Mon Mar 16 00:29:33 2020
From: j|n||68 @end|ng |rom gm@||@com (Jin Li)
Date: Mon, 16 Mar 2020 10:29:33 +1100
Subject: [R] How to make our data normally distributed in R
In-Reply-To: <CA+nrPntsvveugjjc48MXfMCraZKbKNXuQSCaJQfDyOc9PK_97Q@mail.gmail.com>
References: <CA+nrPnsOBmwjN4aK=SQ=hnK2d-PVd9+wH9dg7bBCd2xuVRim+w@mail.gmail.com>
 <CAGu_3ZLcETAgF4mwzHrgQqZsPkc0DsEC0h8jARYd1BHMS6f79Q@mail.gmail.com>
 <CA+nrPntsvveugjjc48MXfMCraZKbKNXuQSCaJQfDyOc9PK_97Q@mail.gmail.com>
Message-ID: <CAGu_3ZKA=CWpYChHvJHQ9Wzf=OFAbfZ3zMHv++AHwiAoBKd7Aw@mail.gmail.com>

Please note that mu and sd are the mean and standard deviation of
validation samples. You may use pred.acc in spm to calculate a number of
error and accuracy measures including RMSE and VEcv from the observed and
predicted values directly.

On Sat, Mar 14, 2020 at 2:07 AM Neha gupta <neha.bologna90 at gmail.com> wrote:

> Thanks a lot Jin..
>
> If my total number of observations are 500,
> n will be 500,
> mu will be average (500)
> s will be sd (500)
> and m will be RMSE value i.e. 4500 in this case?
>
> tovecv(n=500, mu=average (500), s=sd, m=4500, measure="rmse")
>
>
> On Fri, Mar 13, 2020 at 12:46 AM Jin Li <jinli68 at gmail.com> wrote:
>
>> Hi,
>> Why do you want to re-scale RMSE to 0-1? You can change ylim=(0,1) to
>> ylim=(0, 4600). You may use VEcv (Variance explained by predictive models
>> based on cross-validation) that ranges from  0 to 100% instead. It can be
>> calculated using vecv function in library(spm) or you can convert RMSE to
>> VEcv using tovecv in spm.
>> Hope this helps,
>> Jin
>>
>> On Fri, Mar 13, 2020 at 8:08 AM Neha gupta <neha.bologna90 at gmail.com>
>> wrote:
>>
>>> Hi
>>>
>>> I have a regression based data where I get the RMSE results as:
>>>
>>> SVM=3500
>>> ANN=4600
>>> R.Forest=2900
>>>
>>> I want to know how can I make it so that its values comes as 0-1
>>>
>>> I plot the boxplot for it to indicate their RMSE values and used,
>>> ylim=(0,1), but the boxplot which works for RMSE values like 3500 etc,
>>> but
>>> when I use ylim=(0,1), all the boxplots suddenly disappears. What should
>>> I
>>> do for it?
>>>
>>> Thanks
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>>
>> --
>> Jin
>>
>

-- 
Jin

	[[alternative HTML version deleted]]


From ycd|ng @end|ng |rom coh@org  Mon Mar 16 05:11:37 2020
From: ycd|ng @end|ng |rom coh@org (Yuan Chun Ding)
Date: Mon, 16 Mar 2020 04:11:37 +0000
Subject: [R] 
 find multiple mode, sorry for not providing enough information
Message-ID: <A86C6438FB909A409DDEF926277952B6113C8973@PPWEXCH2KX14.coh.org>

sorry, I just came back.

Yes,  Abby's understanding is right.  

> tem4$Var1
 [1]  1    3   4   5   6    7   8   9  10  11  12  13  14  15  16  17  18  20   21   22    23     24   25   31
> tem4$Freq
 [1]   1   2   5   5  10   4   4   8   1    1    8    8    2    4    3    1    2    1     1   138  149    14    1     1

I have 2000 markers, this is just one example marker, the var1 is a VNTR marker with alleles 1, 3, 4 etc, a multi-allele marker; the corresponding frequency for each allele is 1,2 5 etc.  I want to convert this multi-allele marker to bi-allele markers by choosing a cutoff value; I would want the cut point to be allele 6 with frequency of 10, so allele 1 to allele 9 are considered as "short" allele, allele 10 to 31 as "long" allele;  then sliding to next rsing frequency peak, allele 8 with frequency of 8, etc.

maybe those rising peaks are not really multiple modes, but I want to do this type of data conversion.  I want to first determine the number of modes, then convert input dat file into m different input files, then perform Cox regression analysis for each converted file. I am stuck in the step of find out m rise peaks. 

Thank you,

Ding  

   tem <- as.data.frame(t(dat[i,,drop=F]))
  names(tem)<-"V1"
  tem <- tem[which(tem$V1!=""),,drop=F]
  tem2 <-separate(tem, col=V1, into=c("m1","m2"), convert = T)
  tem3 <-gather(tem2, marker, VNTR_repeats, m1:m2)
  tem4 <-as.data.frame(t(t(table(tem3$VNTR_repeats))))[,c(1,3)]
  tem4$Var1 <-as.numeric(as.character(tem4$Var1))
  tem4 <-tem4[order(tem4$Var1),]
  m<-
________________________________________
From: Abby Spurdle [spurdle.a at gmail.com]
Sent: Sunday, March 15, 2020 3:42 PM
To: Jim Lemon
Cc: Yuan Chun Ding; r-help mailing list
Subject: Re: [R] find multiple mode

I think people have misinterpreted the question.
The OP wants local maxima from the series.

The original series is frequencies, so your table is frequencies of frequencies.

A solution can be derived by looking at signs of the first and second
differences.
But there may be a simpler way????

On Mon, Mar 16, 2020 at 10:24 AM Jim Lemon <drjimlemon at gmail.com> wrote:
>
> Hi Ding,
> Translating this into R code:
>
> freq<-c(1,2,5,5,10,4,4,8,1,1,8,8,2,4,3,1,2,1,1,138,149,14,1,1)
> > table(freq)
> freq
>  1   2   3   4   5   8  10  14 138 149
>  8   3   1   3   2   3   1   1   1   1
> > library(prettyR)
> > Mode(freq)
> [1] "1"
>
> You have a single modal value (1). If there were at most two ones, you
> would have three values (2,4,8) that could be considered multiple
> modes. What you seem to be doing is considering values that are not
> separated by commas as modes. Perhaps this is a formatting problem
> with your email.
>
> Jim
>
> On Mon, Mar 16, 2020 at 7:55 AM Yuan Chun Ding <ycding at coh.org> wrote:
> >
> > Hi R users,
> >
> > I want to find multiple modes (10, 8, 149) for the following vector.
> >
> > freq =1,2,5,5  10,4,4,8,1,1,8,8,2,4,3,1,2,1,1 138 149  14,1,1;
> >
> > any suggestion?
> >
> > Thank you,
> >
> > Ding
> >
> > ----------------------------------------------------------------------
> > ------------------------------------------------------------
> > -SECURITY/CONFIDENTIALITY WARNING-
> >
> > This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to r
>  ec
> >  eive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)
> > ------------------------------------------------------------
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!Fou38LsQmgU!9OUyylfoBlBUQnLz-Egk5Um71rWB0DbbnY4gyx9_RpEt81y9sySrh7SE8vZj$
> > PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!Fou38LsQmgU!9OUyylfoBlBUQnLz-Egk5Um71rWB0DbbnY4gyx9_RpEt81y9sySrh07mJrDD$
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!Fou38LsQmgU!9OUyylfoBlBUQnLz-Egk5Um71rWB0DbbnY4gyx9_RpEt81y9sySrh7SE8vZj$
> PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!Fou38LsQmgU!9OUyylfoBlBUQnLz-Egk5Um71rWB0DbbnY4gyx9_RpEt81y9sySrh07mJrDD$
> and provide commented, minimal, self-contained, reproducible code.


From ycd|ng @end|ng |rom coh@org  Mon Mar 16 05:20:07 2020
From: ycd|ng @end|ng |rom coh@org (Yuan Chun Ding)
Date: Mon, 16 Mar 2020 04:20:07 +0000
Subject: [R] find multiple mode
In-Reply-To: <d823e7c7-35b9-9d87-50e7-bfe8dad5f3cd@gmail.com>
References: <A86C6438FB909A409DDEF926277952B6113C892E@PPWEXCH2KX14.coh.org>
 <CA+8X3fUxLObksq1mtYyPg9ZYmOQQs-Y8TMeQt-o5qKQ9B3s=gw@mail.gmail.com>
 <CAB8pepwcYd+XWSB+GyvRnNJSL3QQuxnvXZpj6gi9rvvwu0kFfQ@mail.gmail.com>,
 <d823e7c7-35b9-9d87-50e7-bfe8dad5f3cd@gmail.com>
Message-ID: <A86C6438FB909A409DDEF926277952B6113C898A@PPWEXCH2KX14.coh.org>

sorry, this is not a homework question although I am working at home now due to COVID19  virus spreading in California.   I tried to write a function to convert input data file.

> tem4$Var1
 [1]  1    3   4   5   6    7   8   9  10  11  12  13  14  15  16  17  18  20   21   22    23     24   25   31
> tem4$Freq
 [1]   1   2   5   5  10   4   4   8   1    1    8    8    2    4    3    1    2    1     1   138  149    14    1     1

I have 2000 markers, this is just one example marker, the var1 is a VNTR marker with alleles 1, 3, 4 etc, a multi-allele marker; the corresponding frequency for each allele is 1,2 5 etc.  I want to convert this multi-allele marker to bi-allele markers by choosing a cutoff value; I would want the cut point to be allele 6 with frequency of 10, so allele 1 to allele 9 are considered as "short" allele, allele 10 to 31 as "long" allele;  then sliding to next rsing frequency peak, allele 8 with frequency of 8, etc.

maybe those rising peaks are not really multiple modes, but I want to do this type of data conversion.  I want to first determine the number of modes, then convert input dat file into m different input files, then perform Cox regression analysis for each converted file. I am stuck in the step of find out m rise peaks.

Thank you,

Ding 

mode_format <-function (i) {
   tem <- as.data.frame(t(dat[i,,drop=F]))
  names(tem)<-"V1"
  tem <- tem[which(tem$V1!=""),,drop=F]
  tem2 <-separate(tem, col=V1, into=c("m1","m2"), convert = T)
  tem3 <-gather(tem2, marker, VNTR_repeats, m1:m2)
  tem4 <-as.data.frame(t(t(table(tem3$VNTR_repeats))))[,c(1,3)]
  tem4$Var1 <-as.numeric(as.character(tem4$Var1))
  tem4 <-tem4[order(tem4$Var1),]
  m<-
                                       }
________________________________________
From: R-help [r-help-bounces at r-project.org] on behalf of Duncan Murdoch [murdoch.duncan at gmail.com]
Sent: Sunday, March 15, 2020 4:20 PM
To: Abby Spurdle; Jim Lemon
Cc: r-help mailing list
Subject: Re: [R] find multiple mode

On 15/03/2020 6:42 p.m., Abby Spurdle wrote:
> I think people have misinterpreted the question.
> The OP wants local maxima from the series.
>
> The original series is frequencies, so your table is frequencies of frequencies.
>
> A solution can be derived by looking at signs of the first and second
> differences.
> But there may be a simpler way????

Presumably this is a homework question.  Your answer is perfect for one
of those; more detail would be inappropriate.

Duncan Murdoch

>
> On Mon, Mar 16, 2020 at 10:24 AM Jim Lemon <drjimlemon at gmail.com> wrote:
>>
>> Hi Ding,
>> Translating this into R code:
>>
>> freq<-c(1,2,5,5,10,4,4,8,1,1,8,8,2,4,3,1,2,1,1,138,149,14,1,1)
>>> table(freq)
>> freq
>>   1   2   3   4   5   8  10  14 138 149
>>   8   3   1   3   2   3   1   1   1   1
>>> library(prettyR)
>>> Mode(freq)
>> [1] "1"
>>
>> You have a single modal value (1). If there were at most two ones, you
>> would have three values (2,4,8) that could be considered multiple
>> modes. What you seem to be doing is considering values that are not
>> separated by commas as modes. Perhaps this is a formatting problem
>> with your email.
>>
>> Jim
>>
>> On Mon, Mar 16, 2020 at 7:55 AM Yuan Chun Ding <ycding at coh.org> wrote:
>>>
>>> Hi R users,
>>>
>>> I want to find multiple modes (10, 8, 149) for the following vector.
>>>
>>> freq =1,2,5,5  10,4,4,8,1,1,8,8,2,4,3,1,2,1,1 138 149  14,1,1;
>>>
>>> any suggestion?
>>>
>>> Thank you,
>>>
>>> Ding
>>>
>>> ----------------------------------------------------------------------
>>> ------------------------------------------------------------
>>> -SECURITY/CONFIDENTIALITY WARNING-
>>>
>>> This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to
>    r
>>   ec
>>>   eive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)
>>> ------------------------------------------------------------
>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!Fou38LsQmgU!6iNw2AfLJV6eFkLuUgAwX9T0mSPCxKBHTLj-nyL_ZNTbTCkH5nA23q6f90tG$
>>> PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!Fou38LsQmgU!6iNw2AfLJV6eFkLuUgAwX9T0mSPCxKBHTLj-nyL_ZNTbTCkH5nA23t1tDzUg$
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!Fou38LsQmgU!6iNw2AfLJV6eFkLuUgAwX9T0mSPCxKBHTLj-nyL_ZNTbTCkH5nA23q6f90tG$
>> PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!Fou38LsQmgU!6iNw2AfLJV6eFkLuUgAwX9T0mSPCxKBHTLj-nyL_ZNTbTCkH5nA23t1tDzUg$
>> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!Fou38LsQmgU!6iNw2AfLJV6eFkLuUgAwX9T0mSPCxKBHTLj-nyL_ZNTbTCkH5nA23q6f90tG$
> PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!Fou38LsQmgU!6iNw2AfLJV6eFkLuUgAwX9T0mSPCxKBHTLj-nyL_ZNTbTCkH5nA23t1tDzUg$
> and provide commented, minimal, self-contained, reproducible code.
>

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!Fou38LsQmgU!6iNw2AfLJV6eFkLuUgAwX9T0mSPCxKBHTLj-nyL_ZNTbTCkH5nA23q6f90tG$
PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!Fou38LsQmgU!6iNw2AfLJV6eFkLuUgAwX9T0mSPCxKBHTLj-nyL_ZNTbTCkH5nA23t1tDzUg$
and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Mon Mar 16 05:35:00 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 15 Mar 2020 21:35:00 -0700
Subject: [R] 
 find multiple mode, sorry for not providing enough information
In-Reply-To: <A86C6438FB909A409DDEF926277952B6113C8973@PPWEXCH2KX14.coh.org>
References: <A86C6438FB909A409DDEF926277952B6113C8973@PPWEXCH2KX14.coh.org>
Message-ID: <CAGxFJbSkJ9UEPtuUP--o0emUkFrC40JvZ7G-2wQrJZdxpP7qoQ@mail.gmail.com>

You **might** do better pursuing this sort of thing on the Bioconductor
site:
https://www.bioconductor.org/help/
They often have professionally written R packages tailored for genomics so
that you don't need to shake and bake your own with all the dangers that
entails (not least of which may be that your methodology is suspect).

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sun, Mar 15, 2020 at 9:11 PM Yuan Chun Ding <ycding at coh.org> wrote:

> sorry, I just came back.
>
> Yes,  Abby's understanding is right.
>
> > tem4$Var1
>  [1]  1    3   4   5   6    7   8   9  10  11  12  13  14  15  16  17  18
> 20   21   22    23     24   25   31
> > tem4$Freq
>  [1]   1   2   5   5  10   4   4   8   1    1    8    8    2    4    3
> 1    2    1     1   138  149    14    1     1
>
> I have 2000 markers, this is just one example marker, the var1 is a VNTR
> marker with alleles 1, 3, 4 etc, a multi-allele marker; the corresponding
> frequency for each allele is 1,2 5 etc.  I want to convert this
> multi-allele marker to bi-allele markers by choosing a cutoff value; I
> would want the cut point to be allele 6 with frequency of 10, so allele 1
> to allele 9 are considered as "short" allele, allele 10 to 31 as "long"
> allele;  then sliding to next rsing frequency peak, allele 8 with frequency
> of 8, etc.
>
> maybe those rising peaks are not really multiple modes, but I want to do
> this type of data conversion.  I want to first determine the number of
> modes, then convert input dat file into m different input files, then
> perform Cox regression analysis for each converted file. I am stuck in the
> step of find out m rise peaks.
>
> Thank you,
>
> Ding
>
>    tem <- as.data.frame(t(dat[i,,drop=F]))
>   names(tem)<-"V1"
>   tem <- tem[which(tem$V1!=""),,drop=F]
>   tem2 <-separate(tem, col=V1, into=c("m1","m2"), convert = T)
>   tem3 <-gather(tem2, marker, VNTR_repeats, m1:m2)
>   tem4 <-as.data.frame(t(t(table(tem3$VNTR_repeats))))[,c(1,3)]
>   tem4$Var1 <-as.numeric(as.character(tem4$Var1))
>   tem4 <-tem4[order(tem4$Var1),]
>   m<-
> ________________________________________
> From: Abby Spurdle [spurdle.a at gmail.com]
> Sent: Sunday, March 15, 2020 3:42 PM
> To: Jim Lemon
> Cc: Yuan Chun Ding; r-help mailing list
> Subject: Re: [R] find multiple mode
>
> I think people have misinterpreted the question.
> The OP wants local maxima from the series.
>
> The original series is frequencies, so your table is frequencies of
> frequencies.
>
> A solution can be derived by looking at signs of the first and second
> differences.
> But there may be a simpler way????
>
> On Mon, Mar 16, 2020 at 10:24 AM Jim Lemon <drjimlemon at gmail.com> wrote:
> >
> > Hi Ding,
> > Translating this into R code:
> >
> > freq<-c(1,2,5,5,10,4,4,8,1,1,8,8,2,4,3,1,2,1,1,138,149,14,1,1)
> > > table(freq)
> > freq
> >  1   2   3   4   5   8  10  14 138 149
> >  8   3   1   3   2   3   1   1   1   1
> > > library(prettyR)
> > > Mode(freq)
> > [1] "1"
> >
> > You have a single modal value (1). If there were at most two ones, you
> > would have three values (2,4,8) that could be considered multiple
> > modes. What you seem to be doing is considering values that are not
> > separated by commas as modes. Perhaps this is a formatting problem
> > with your email.
> >
> > Jim
> >
> > On Mon, Mar 16, 2020 at 7:55 AM Yuan Chun Ding <ycding at coh.org> wrote:
> > >
> > > Hi R users,
> > >
> > > I want to find multiple modes (10, 8, 149) for the following vector.
> > >
> > > freq =1,2,5,5  10,4,4,8,1,1,8,8,2,4,3,1,2,1,1 138 149  14,1,1;
> > >
> > > any suggestion?
> > >
> > > Thank you,
> > >
> > > Ding
> > >
> > > ----------------------------------------------------------------------
> > > ------------------------------------------------------------
> > > -SECURITY/CONFIDENTIALITY WARNING-
> > >
> > > This message and any attachments are intended solely for the
> individual or entity to which they are addressed. This communication may
> contain information that is privileged, confidential, or exempt from
> disclosure under applicable law (e.g., personal health information,
> research data, financial information). Because this e-mail has been sent
> without encryption, individuals other than the intended recipient may be
> able to view the information, forward it to others or tamper with the
> information without the knowledge or consent of the sender. If you are not
> the intended recipient, or the employee or person responsible for
> delivering the message to the intended recipient, any dissemination,
> distribution or copying of the communication is strictly prohibited. If you
> received the communication in error, please notify the sender immediately
> by replying to this message and deleting the message and any accompanying
> files from your system. If, due to the security risks, you do not wish to r
> >  ec
> > >  eive further communications via e-mail, please reply to this message
> and inform the sender that you do not wish to receive further e-mail from
> the sender. (LCP301)
> > > ------------------------------------------------------------
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!Fou38LsQmgU!9OUyylfoBlBUQnLz-Egk5Um71rWB0DbbnY4gyx9_RpEt81y9sySrh7SE8vZj$
> > > PLEASE do read the posting guide
> https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!Fou38LsQmgU!9OUyylfoBlBUQnLz-Egk5Um71rWB0DbbnY4gyx9_RpEt81y9sySrh07mJrDD$
> > > and provide commented, minimal, self-contained, reproducible code.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!Fou38LsQmgU!9OUyylfoBlBUQnLz-Egk5Um71rWB0DbbnY4gyx9_RpEt81y9sySrh7SE8vZj$
> > PLEASE do read the posting guide
> https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!Fou38LsQmgU!9OUyylfoBlBUQnLz-Egk5Um71rWB0DbbnY4gyx9_RpEt81y9sySrh07mJrDD$
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ycd|ng @end|ng |rom coh@org  Mon Mar 16 06:00:25 2020
From: ycd|ng @end|ng |rom coh@org (Yuan Chun Ding)
Date: Mon, 16 Mar 2020 05:00:25 +0000
Subject: [R] 
 find multiple mode, sorry for not providing enough information
In-Reply-To: <CAGxFJbSkJ9UEPtuUP--o0emUkFrC40JvZ7G-2wQrJZdxpP7qoQ@mail.gmail.com>
References: <A86C6438FB909A409DDEF926277952B6113C8973@PPWEXCH2KX14.coh.org>,
 <CAGxFJbSkJ9UEPtuUP--o0emUkFrC40JvZ7G-2wQrJZdxpP7qoQ@mail.gmail.com>
Message-ID: <A86C6438FB909A409DDEF926277952B6113C8A34@PPWEXCH2KX14.coh.org>



You **might** do better pursuing this sort of thing on the Bioconductor site:
https://www.bioconductor.org/help/<https://urldefense.com/v3/__https://www.bioconductor.org/help/__;!!Fou38LsQmgU!441uqddHFvpuq6wfAy-jNNUZ8Dz_jGxN9itKerhoPxav-yjaqUkpwPhN4bJJ$>
They often have professionally written R packages tailored for genomics so that you don't need to shake and bake your own with all the dangers that entails (not least of which may be that your methodology is suspect).

Bert Gunter

"The trouble with having an open mind is that people keep coming along and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

Thank you, Bert!

I just realized that I made a typo in the following email, so I modified it using the red font.  we are doing genomics work, but this is a understudied genomic research, so no professional packages. I admit that what I am doing is pretty explorative.

On Sun, Mar 15, 2020 at 9:11 PM Yuan Chun Ding <ycding at coh.org<mailto:ycding at coh.org>> wrote:
sorry, I just came back.

Yes,  Abby's understanding is right.

> tem4$Var1
 [1]  1    3   4   5   6    7   8   9  10  11  12  13  14  15  16  17  18  20   21   22    23     24   25   31
> tem4$Freq
 [1]   1   2   5   5  10   4   4   8   1    1    8    8    2    4    3    1    2    1     1   138  149    14    1     1

I have 2000 markers, this is just one example marker, the var1 is a VNTR marker with alleles 1, 3, 4 etc, a multi-allele marker; the corresponding frequency for each allele is 1,2 5 etc.  I want to convert this multi-allele marker to bi-allele markers by choosing a cutoff value; I would want the cut point to be allele 6 with frequency of 10, so allele 1 to allele 5 are considered as "short" allele, allele 6 to 31 as "long" allele;  then sliding to next rsing frequency peak, allele 8 with frequency of 8, etc.

maybe those rising peaks are not really multiple modes, but I want to do this type of data conversion.  I want to first determine the number of modes, then convert input dat file into m different input files, then perform Cox regression analysis for each converted file. I am stuck in the step of find out m rise peaks.

Thank you,

Ding

   tem <- as.data.frame(t(dat[i,,drop=F]))
  names(tem)<-"V1"
  tem <- tem[which(tem$V1!=""),,drop=F]
  tem2 <-separate(tem, col=V1, into=c("m1","m2"), convert = T)
  tem3 <-gather(tem2, marker, VNTR_repeats, m1:m2)
  tem4 <-as.data.frame(t(t(table(tem3$VNTR_repeats))))[,c(1,3)]
  tem4$Var1 <-as.numeric(as.character(tem4$Var1))
  tem4 <-tem4[order(tem4$Var1),]
  m<-
________________________________________
From: Abby Spurdle [spurdle.a at gmail.com<mailto:spurdle.a at gmail.com>]
Sent: Sunday, March 15, 2020 3:42 PM
To: Jim Lemon
Cc: Yuan Chun Ding; r-help mailing list
Subject: Re: [R] find multiple mode

I think people have misinterpreted the question.
The OP wants local maxima from the series.

The original series is frequencies, so your table is frequencies of frequencies.

A solution can be derived by looking at signs of the first and second
differences.
But there may be a simpler way????

On Mon, Mar 16, 2020 at 10:24 AM Jim Lemon <drjimlemon at gmail.com<mailto:drjimlemon at gmail.com>> wrote:
>
> Hi Ding,
> Translating this into R code:
>
> freq<-c(1,2,5,5,10,4,4,8,1,1,8,8,2,4,3,1,2,1,1,138,149,14,1,1)
> > table(freq)
> freq
>  1   2   3   4   5   8  10  14 138 149
>  8   3   1   3   2   3   1   1   1   1
> > library(prettyR)
> > Mode(freq)
> [1] "1"
>
> You have a single modal value (1). If there were at most two ones, you
> would have three values (2,4,8) that could be considered multiple
> modes. What you seem to be doing is considering values that are not
> separated by commas as modes. Perhaps this is a formatting problem
> with your email.
>
> Jim
>
> On Mon, Mar 16, 2020 at 7:55 AM Yuan Chun Ding <ycding at coh.org<mailto:ycding at coh.org>> wrote:
> >
> > Hi R users,
> >
> > I want to find multiple modes (10, 8, 149) for the following vector.
> >
> > freq =1,2,5,5  10,4,4,8,1,1,8,8,2,4,3,1,2,1,1 138 149  14,1,1;
> >
> > any suggestion?
> >
> > Thank you,
> >
> > Ding
> >
> > ----------------------------------------------------------------------
> > ------------------------------------------------------------
> > -SECURITY/CONFIDENTIALITY WARNING-
> >
> > This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to r
>  ec
> >  eive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)
> > ------------------------------------------------------------
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
> > https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!Fou38LsQmgU!9OUyylfoBlBUQnLz-Egk5Um71rWB0DbbnY4gyx9_RpEt81y9sySrh7SE8vZj$
> > PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!Fou38LsQmgU!9OUyylfoBlBUQnLz-Egk5Um71rWB0DbbnY4gyx9_RpEt81y9sySrh07mJrDD$
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!Fou38LsQmgU!9OUyylfoBlBUQnLz-Egk5Um71rWB0DbbnY4gyx9_RpEt81y9sySrh7SE8vZj$
> PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!Fou38LsQmgU!9OUyylfoBlBUQnLz-Egk5Um71rWB0DbbnY4gyx9_RpEt81y9sySrh07mJrDD$
> and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help<https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!Fou38LsQmgU!441uqddHFvpuq6wfAy-jNNUZ8Dz_jGxN9itKerhoPxav-yjaqUkpwHJvsqnO$>
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html<https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!Fou38LsQmgU!441uqddHFvpuq6wfAy-jNNUZ8Dz_jGxN9itKerhoPxav-yjaqUkpwNnVwHmS$>
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Mar 16 06:42:16 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 15 Mar 2020 22:42:16 -0700
Subject: [R] 
 find multiple mode, sorry for not providing enough information
In-Reply-To: <A86C6438FB909A409DDEF926277952B6113C8A34@PPWEXCH2KX14.coh.org>
References: <A86C6438FB909A409DDEF926277952B6113C8973@PPWEXCH2KX14.coh.org>,
 <CAGxFJbSkJ9UEPtuUP--o0emUkFrC40JvZ7G-2wQrJZdxpP7qoQ@mail.gmail.com>
 <A86C6438FB909A409DDEF926277952B6113C8A34@PPWEXCH2KX14.coh.org>
Message-ID: <924320DD-38DD-46B4-BCAF-3AFC4935880D@dcn.davis.ca.us>

Anyone following along on the mailing list cannot see your "red text" since this is a plain text mailing list.

Please set your email format to "plain text" when sending messages to the R mailing lists so you don't fool yourself into thinking we can see HTML formatting. It will also avoid corrupting your code examples... which does happen sometimes with formatted emails.

On March 15, 2020 10:00:25 PM PDT, Yuan Chun Ding <ycding at coh.org> wrote:
>
>
>You **might** do better pursuing this sort of thing on the Bioconductor
>site:
>https://www.bioconductor.org/help/<https://urldefense.com/v3/__https://www.bioconductor.org/help/__;!!Fou38LsQmgU!441uqddHFvpuq6wfAy-jNNUZ8Dz_jGxN9itKerhoPxav-yjaqUkpwPhN4bJJ$>
>They often have professionally written R packages tailored for genomics
>so that you don't need to shake and bake your own with all the dangers
>that entails (not least of which may be that your methodology is
>suspect).
>
>Bert Gunter
>
>"The trouble with having an open mind is that people keep coming along
>and sticking things into it."
>-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>Thank you, Bert!
>
>I just realized that I made a typo in the following email, so I
>modified it using the red font.  we are doing genomics work, but this
>is a understudied genomic research, so no professional packages. I
>admit that what I am doing is pretty explorative.
>
>On Sun, Mar 15, 2020 at 9:11 PM Yuan Chun Ding
><ycding at coh.org<mailto:ycding at coh.org>> wrote:
>sorry, I just came back.
>
>Yes,  Abby's understanding is right.
>
>> tem4$Var1
>[1]  1    3   4   5   6    7   8   9  10  11  12  13  14  15  16  17 
>18  20   21   22    23     24   25   31
>> tem4$Freq
>[1]   1   2   5   5  10   4   4   8   1    1    8    8    2    4    3  
> 1    2    1     1   138  149    14    1     1
>
>I have 2000 markers, this is just one example marker, the var1 is a
>VNTR marker with alleles 1, 3, 4 etc, a multi-allele marker; the
>corresponding frequency for each allele is 1,2 5 etc.  I want to
>convert this multi-allele marker to bi-allele markers by choosing a
>cutoff value; I would want the cut point to be allele 6 with frequency
>of 10, so allele 1 to allele 5 are considered as "short" allele, allele
>6 to 31 as "long" allele;  then sliding to next rsing frequency peak,
>allele 8 with frequency of 8, etc.
>
>maybe those rising peaks are not really multiple modes, but I want to
>do this type of data conversion.  I want to first determine the number
>of modes, then convert input dat file into m different input files,
>then perform Cox regression analysis for each converted file. I am
>stuck in the step of find out m rise peaks.
>
>Thank you,
>
>Ding
>
>   tem <- as.data.frame(t(dat[i,,drop=F]))
>  names(tem)<-"V1"
>  tem <- tem[which(tem$V1!=""),,drop=F]
>  tem2 <-separate(tem, col=V1, into=c("m1","m2"), convert = T)
>  tem3 <-gather(tem2, marker, VNTR_repeats, m1:m2)
>  tem4 <-as.data.frame(t(t(table(tem3$VNTR_repeats))))[,c(1,3)]
>  tem4$Var1 <-as.numeric(as.character(tem4$Var1))
>  tem4 <-tem4[order(tem4$Var1),]
>  m<-
>________________________________________
>From: Abby Spurdle [spurdle.a at gmail.com<mailto:spurdle.a at gmail.com>]
>Sent: Sunday, March 15, 2020 3:42 PM
>To: Jim Lemon
>Cc: Yuan Chun Ding; r-help mailing list
>Subject: Re: [R] find multiple mode
>
>I think people have misinterpreted the question.
>The OP wants local maxima from the series.
>
>The original series is frequencies, so your table is frequencies of
>frequencies.
>
>A solution can be derived by looking at signs of the first and second
>differences.
>But there may be a simpler way????
>
>On Mon, Mar 16, 2020 at 10:24 AM Jim Lemon
><drjimlemon at gmail.com<mailto:drjimlemon at gmail.com>> wrote:
>>
>> Hi Ding,
>> Translating this into R code:
>>
>> freq<-c(1,2,5,5,10,4,4,8,1,1,8,8,2,4,3,1,2,1,1,138,149,14,1,1)
>> > table(freq)
>> freq
>>  1   2   3   4   5   8  10  14 138 149
>>  8   3   1   3   2   3   1   1   1   1
>> > library(prettyR)
>> > Mode(freq)
>> [1] "1"
>>
>> You have a single modal value (1). If there were at most two ones,
>you
>> would have three values (2,4,8) that could be considered multiple
>> modes. What you seem to be doing is considering values that are not
>> separated by commas as modes. Perhaps this is a formatting problem
>> with your email.
>>
>> Jim
>>
>> On Mon, Mar 16, 2020 at 7:55 AM Yuan Chun Ding
><ycding at coh.org<mailto:ycding at coh.org>> wrote:
>> >
>> > Hi R users,
>> >
>> > I want to find multiple modes (10, 8, 149) for the following
>vector.
>> >
>> > freq =1,2,5,5  10,4,4,8,1,1,8,8,2,4,3,1,2,1,1 138 149  14,1,1;
>> >
>> > any suggestion?
>> >
>> > Thank you,
>> >
>> > Ding
>> >
>> >
>----------------------------------------------------------------------
>> > ------------------------------------------------------------
>> > -SECURITY/CONFIDENTIALITY WARNING-
>> >
>> > This message and any attachments are intended solely for the
>individual or entity to which they are addressed. This communication
>may contain information that is privileged, confidential, or exempt
>from disclosure under applicable law (e.g., personal health
>information, research data, financial information). Because this e-mail
>has been sent without encryption, individuals other than the intended
>recipient may be able to view the information, forward it to others or
>tamper with the information without the knowledge or consent of the
>sender. If you are not the intended recipient, or the employee or
>person responsible for delivering the message to the intended
>recipient, any dissemination, distribution or copying of the
>communication is strictly prohibited. If you received the communication
>in error, please notify the sender immediately by replying to this
>message and deleting the message and any accompanying files from your
>system. If, due to the security risks, you do not
> 
>  wish to
>  r
>>  ec
>> >  eive further communications via e-mail, please reply to this
>message and inform the sender that you do not wish to receive further
>e-mail from the sender. (LCP301)
>> > ------------------------------------------------------------
>> >
>> >         [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-help at r-project.org<mailto:R-help at r-project.org> mailing list --
>To UNSUBSCRIBE and more, see
>> >
>https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!Fou38LsQmgU!9OUyylfoBlBUQnLz-Egk5Um71rWB0DbbnY4gyx9_RpEt81y9sySrh7SE8vZj$
>> > PLEASE do read the posting guide
>https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!Fou38LsQmgU!9OUyylfoBlBUQnLz-Egk5Um71rWB0DbbnY4gyx9_RpEt81y9sySrh07mJrDD$
>> > and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To
>UNSUBSCRIBE and more, see
>>
>https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!Fou38LsQmgU!9OUyylfoBlBUQnLz-Egk5Um71rWB0DbbnY4gyx9_RpEt81y9sySrh7SE8vZj$
>> PLEASE do read the posting guide
>https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!Fou38LsQmgU!9OUyylfoBlBUQnLz-Egk5Um71rWB0DbbnY4gyx9_RpEt81y9sySrh07mJrDD$
>> and provide commented, minimal, self-contained, reproducible code.
>
>______________________________________________
>R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To
>UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help<https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!Fou38LsQmgU!441uqddHFvpuq6wfAy-jNNUZ8Dz_jGxN9itKerhoPxav-yjaqUkpwHJvsqnO$>
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html<https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!Fou38LsQmgU!441uqddHFvpuq6wfAy-jNNUZ8Dz_jGxN9itKerhoPxav-yjaqUkpwNnVwHmS$>
>and provide commented, minimal, self-contained, reproducible code.
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From drj|m|emon @end|ng |rom gm@||@com  Mon Mar 16 09:09:50 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Mon, 16 Mar 2020 19:09:50 +1100
Subject: [R] 
 find multiple mode, sorry for not providing enough information
In-Reply-To: <A86C6438FB909A409DDEF926277952B6113C8973@PPWEXCH2KX14.coh.org>
References: <A86C6438FB909A409DDEF926277952B6113C8973@PPWEXCH2KX14.coh.org>
Message-ID: <CA+8X3fXY0X2WVmjw9_myQZ8Qvm_8h7rF7SHwGKh=a504LfXuHw@mail.gmail.com>

Hi Ding,
While I was completely off the track in my first reply, the subsequent
posts make your problem somewhat clearer. The way you state the
problem suggests that the order of the values of "freq" is important.
That is, it is not just a matter of finding local maxima, but the
direction in which you approach those maxima is important. For
example. I might want to only identify maxima with at least four
monotonically increasing values preceding them and a decrease of at
least half the value of the maximum in the succeeding value. By
breaking down the problem into a set of criteria, these can be
implemented in a function that will search the values in one
direction, returning the locations of maxima that fulfil those
criteria.

Jim

On Mon, Mar 16, 2020 at 3:11 PM Yuan Chun Ding <ycding at coh.org> wrote:
>
> sorry, I just came back.
>
> Yes,  Abby's understanding is right.
>
> > tem4$Var1
>  [1]  1    3   4   5   6    7   8   9  10  11  12  13  14  15  16  17  18  20   21   22    23     24   25   31
> > tem4$Freq
>  [1]   1   2   5   5  10   4   4   8   1    1    8    8    2    4    3    1    2    1     1   138  149    14    1     1
>
> I have 2000 markers, this is just one example marker, the var1 is a VNTR marker with alleles 1, 3, 4 etc, a multi-allele marker; the corresponding frequency for each allele is 1,2 5 etc.  I want to convert this multi-allele marker to bi-allele markers by choosing a cutoff value; I would want the cut point to be allele 6 with frequency of 10, so allele 1 to allele 9 are considered as "short" allele, allele 10 to 31 as "long" allele;  then sliding to next rsing frequency peak, allele 8 with frequency of 8, etc.
>
> maybe those rising peaks are not really multiple modes, but I want to do this type of data conversion.  I want to first determine the number of modes, then convert input dat file into m different input files, then perform Cox regression analysis for each converted file. I am stuck in the step of find out m rise peaks.
>
> Thank you,
>
> Ding
>


From @|2|@b@b|d| @end|ng |rom gm@||@com  Sun Mar 15 23:42:41 2020
From: @|2|@b@b|d| @end|ng |rom gm@||@com (Alaa Lababidi)
Date: Mon, 16 Mar 2020 00:42:41 +0200
Subject: [R] CHAID in R
Message-ID: <CACpJaS1jgqyxEiDn_ea4Hkrx2mfVqd=m-mZbNv_oeUjcFzxVGQ@mail.gmail.com>



	[[alternative HTML version deleted]]


From ycd|ng @end|ng |rom coh@org  Mon Mar 16 17:35:34 2020
From: ycd|ng @end|ng |rom coh@org (Yuan Chun Ding)
Date: Mon, 16 Mar 2020 16:35:34 +0000
Subject: [R] 
 find multiple mode, sorry for not providing enough information
In-Reply-To: <CA+8X3fXY0X2WVmjw9_myQZ8Qvm_8h7rF7SHwGKh=a504LfXuHw@mail.gmail.com>
References: <A86C6438FB909A409DDEF926277952B6113C8973@PPWEXCH2KX14.coh.org>
 <CA+8X3fXY0X2WVmjw9_myQZ8Qvm_8h7rF7SHwGKh=a504LfXuHw@mail.gmail.com>
Message-ID: <A86C6438FB909A409DDEF926277952B6113C8B55@PPWEXCH2KX14.coh.org>

Hi Jim,

Yes, you are right.  I sorted the tem4$Var1 first, then find rising peaks in Freq variable from left to right.   I guess I probably need to define the minimal rising and drop on both side of a potential maxima, so avoid identifying really small rising peaks.  For example, I only want to identify the freq value of freq=10 (corresponding var1 = allele6), freq=8(var1=allele9),, freq=8( var1=allele12), and freq=149 (var1=allele23),  but ignore freq=4 (var10=allele15) and freq=2 (var1=allele18).

I am still working on it, any help would be really appreciated.

Thank you,

Ding

-----Original Message-----
From: Jim Lemon [mailto:drjimlemon at gmail.com] 
Sent: Monday, March 16, 2020 1:10 AM
To: Yuan Chun Ding; r-help mailing list
Subject: Re: [R] find multiple mode, sorry for not providing enough information

[Attention: This email came from an external source. Do not open attachments or click on links from unknown senders or unexpected emails.]

----------------------------------------------------------------------
Hi Ding,
While I was completely off the track in my first reply, the subsequent posts make your problem somewhat clearer. The way you state the problem suggests that the order of the values of "freq" is important.
That is, it is not just a matter of finding local maxima, but the direction in which you approach those maxima is important. For example. I might want to only identify maxima with at least four monotonically increasing values preceding them and a decrease of at least half the value of the maximum in the succeeding value. By breaking down the problem into a set of criteria, these can be implemented in a function that will search the values in one direction, returning the locations of maxima that fulfil those criteria.

Jim

On Mon, Mar 16, 2020 at 3:11 PM Yuan Chun Ding <ycding at coh.org> wrote:
>
> sorry, I just came back.
>
> Yes,  Abby's understanding is right.
>
> > tem4$Var1
>  [1]  1    3   4   5   6    7   8   9  10  11  12  13  14  15  16  17  18  20   21   22    23     24   25   31
> > tem4$Freq
>  [1]   1   2   5   5  10   4   4   8   1    1    8    8     2     4    3    1    2    1     1   138  149    14    1     1
>
> I have 2000 markers, this is just one example marker, the var1 is a VNTR marker with alleles 1, 3, 4 etc, a multi-allele marker; the corresponding frequency for each allele is 1,2 5 etc.  I want to convert this multi-allele marker to bi-allele markers by choosing a cutoff value; I would want the cut point to be allele 6 with frequency of 10, so  patients with allele 1 to allele 5 are considered as carrying "short" allele, allele 6 to 31 as "long" allele;  then sliding to next rsing frequency peak, allele 8 with frequency of 8, etc.
>
> maybe those rising peaks are not really multiple modes, but I want to do this type of data conversion.  I want to first determine m number of modes, then convert input dat file into m different input files, then perform Cox regression analysis for each converted file. I am stuck in the step of find out m rise peaks.
>
> Thank you,
>
> Ding
>

----------------------------------------------------------------------
------------------------------------------------------------
-SECURITY/CONFIDENTIALITY WARNING-  

This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to receive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)
------------------------------------------------------------

From @purd|e@@ @end|ng |rom gm@||@com  Mon Mar 16 21:56:51 2020
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Tue, 17 Mar 2020 09:56:51 +1300
Subject: [R] 
 find multiple mode, sorry for not providing enough information
In-Reply-To: <A86C6438FB909A409DDEF926277952B6113C8B55@PPWEXCH2KX14.coh.org>
References: <A86C6438FB909A409DDEF926277952B6113C8973@PPWEXCH2KX14.coh.org>
 <CA+8X3fXY0X2WVmjw9_myQZ8Qvm_8h7rF7SHwGKh=a504LfXuHw@mail.gmail.com>
 <A86C6438FB909A409DDEF926277952B6113C8B55@PPWEXCH2KX14.coh.org>
Message-ID: <CAB8pepySVpPRh=E6LqZGEMVGKSn4Qdjyxe-WzXCM6M7O4y=Q1g@mail.gmail.com>

(Sorry, that was supposed to go to the mailing list).

Here's a solution to your original question:
---------
freq <- c (1,2,5,5,10,4,4,8,1,1,8,8,2,4,3,1,2,1,1,138,149,14,1,1)

unique.consecutive <- function (x)
{       dx <- diff (x)
        x [dx != 0]
}

which.maxs <- function (x, ..., include.endpoints=FALSE)
{       dx <- diff (x)
        if (any (dx == 0) )
                stop ("function needs unique-consecutive values")
        ndx <- length (dx)
        I <- c (FALSE, dx [-ndx] > 0 & dx [-1] < 0, FALSE)
        if (include.endpoints)
        {       I [1] <- (dx [1] < 0)
                I [ndx + 1] <- (dx [ndx] > 0)
        }
        which (I)
}

freq.sub <- unique.consecutive (freq)
maxv <- freq.sub [which.maxs (freq.sub, include.endpoints=TRUE)]

maxv
unique (maxv)
---------

Some comments:

My package, probhat, contains early prototype-quality functions for
discrete kernel smoothing.
This can be used to "smooth" frequency data.
Which in turn, can eliminate spurious modes.

https://cran.r-project.org/web/packages/probhat/vignettes/probhat.pdf

Unfortunately, bandwidth selection is manual.
Also note that currently it only returns probability mass (not
frequency) but it's very easy to to get frequency from probability
mass.

I'm planning to resume work on this package in two to three days, so
I'm open to suggestions...

On 3/17/20, Yuan Chun Ding <ycding at coh.org> wrote:
> Hi Jim,
>
> Yes, you are right.  I sorted the tem4$Var1 first, then find rising peaks in
> Freq variable from left to right.   I guess I probably need to define the
> minimal rising and drop on both side of a potential maxima, so avoid
> identifying really small rising peaks.  For example, I only want to identify
> the freq value of freq=10 (corresponding var1 = allele6),
> freq=8(var1=allele9),, freq=8( var1=allele12), and freq=149 (var1=allele23),
>  but ignore freq=4 (var10=allele15) and freq=2 (var1=allele18).
>
> I am still working on it, any help would be really appreciated.
>
> Thank you,
>
> Ding
>
> -----Original Message-----
> From: Jim Lemon [mailto:drjimlemon at gmail.com]
> Sent: Monday, March 16, 2020 1:10 AM
> To: Yuan Chun Ding; r-help mailing list
> Subject: Re: [R] find multiple mode, sorry for not providing enough
> information
>
> [Attention: This email came from an external source. Do not open attachments
> or click on links from unknown senders or unexpected emails.]
>
> ----------------------------------------------------------------------
> Hi Ding,
> While I was completely off the track in my first reply, the subsequent posts
> make your problem somewhat clearer. The way you state the problem suggests
> that the order of the values of "freq" is important.
> That is, it is not just a matter of finding local maxima, but the direction
> in which you approach those maxima is important. For example. I might want
> to only identify maxima with at least four monotonically increasing values
> preceding them and a decrease of at least half the value of the maximum in
> the succeeding value. By breaking down the problem into a set of criteria,
> these can be implemented in a function that will search the values in one
> direction, returning the locations of maxima that fulfil those criteria.
>
> Jim
>
> On Mon, Mar 16, 2020 at 3:11 PM Yuan Chun Ding <ycding at coh.org> wrote:
>>
>> sorry, I just came back.
>>
>> Yes,  Abby's understanding is right.
>>
>> > tem4$Var1
>>  [1]  1    3   4   5   6    7   8   9  10  11  12  13  14  15  16  17  18
>> 20   21   22    23     24   25   31
>> > tem4$Freq
>>  [1]   1   2   5   5  10   4   4   8   1    1    8    8     2     4    3
>>  1    2    1     1   138  149    14    1     1
>>
>> I have 2000 markers, this is just one example marker, the var1 is a VNTR
>> marker with alleles 1, 3, 4 etc, a multi-allele marker; the corresponding
>> frequency for each allele is 1,2 5 etc.  I want to convert this
>> multi-allele marker to bi-allele markers by choosing a cutoff value; I
>> would want the cut point to be allele 6 with frequency of 10, so  patients
>> with allele 1 to allele 5 are considered as carrying "short" allele,
>> allele 6 to 31 as "long" allele;  then sliding to next rsing frequency
>> peak, allele 8 with frequency of 8, etc.
>>
>> maybe those rising peaks are not really multiple modes, but I want to do
>> this type of data conversion.  I want to first determine m number of
>> modes, then convert input dat file into m different input files, then
>> perform Cox regression analysis for each converted file. I am stuck in the
>> step of find out m rise peaks.
>>
>> Thank you,
>>
>> Ding
>>
>
> ----------------------------------------------------------------------
> ------------------------------------------------------------
> -SECURITY/CONFIDENTIALITY WARNING-
>
> This message and any attachments are intended solely for the individual or
> entity to which they are addressed. This communication may contain
> information that is privileged, confidential, or exempt from disclosure
> under applicable law (e.g., personal health information, research data,
> financial information). Because this e-mail has been sent without
> encryption, individuals other than the intended recipient may be able to
> view the information, forward it to others or tamper with the information
> without the knowledge or consent of the sender. If you are not the intended
> recipient, or the employee or person responsible for delivering the message
> to the intended recipient, any dissemination, distribution or copying of the
> communication is strictly prohibited. If you received the communication in
> error, please notify the sender immediately by replying to this message and
> deleting the message and any accompanying files from your system. If, due to
> the security risks, you do not wish to rec
>  eive further communications via e-mail, please reply to this message and
> inform the sender that you do not wish to receive further e-mail from the
> sender. (LCP301)
> ------------------------------------------------------------
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Mon Mar 16 22:08:32 2020
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Mon, 16 Mar 2020 21:08:32 +0000 (UTC)
Subject: [R] Code seems OK (no warnings, no error messages) but no results
References: <1472460689.2878165.1584392912015.ref@mail.yahoo.com>
Message-ID: <1472460689.2878165.1584392912015@mail.yahoo.com>

Good afternoon,

Here below my reproducible R code. I don't get any results. I am looking for MSE_fastMM value and the bootstrap CIs around MSE_fastMM value. How can I finish/correct my R code to get the results ?
Many thanks for your help.

####################
install.packages( "robustbase",dependencies=TRUE )
install.packages( "boot",dependencies=TRUE )
library(boot)
library(robustbase)

my.experiment <- function() {{

n<-2000
b<-runif(n, 0, 5)
z <- rnorm(n, 2, 3)
a <- runif(n, 0, 5)

y_model<- 0.1*b - 0.5 * z - a + 10
y_obs <- y_model +c( rnorm(n*0.9, 0, 0.1), rnorm(n*0.1, 0, 0.5) )

fastMM <- lmrob( y_obs ~ b+z+a)
MSE_fastMM<-mean((fastMM$fitted.values - y_model)^2)

return( c(MSE_fastMM) )

}

my.data = t(replicate( 50, my.experiment() ))
colnames(my.data) <- c("MSE_fastMM")
summary(my.data)

data <- data.frame(a, z, b, y_obs)
boot.ci.type <- c("norm","basic", "perc")

MSE_fastMM <- function(data,i) {
? boot.MM <- lmrob(y_obs~b+z+a,data=data[i,])
? mean(boot.MM$residuals^2)
}

bootResults_MM <-boot(data=data, statistic=MSE_fastMM, R=100)
boot.ci(bootResults_MM, type = boot.ci.type)
}
###############################


From @purd|e@@ @end|ng |rom gm@||@com  Mon Mar 16 22:14:51 2020
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Tue, 17 Mar 2020 10:14:51 +1300
Subject: [R] 
 find multiple mode, sorry for not providing enough information
In-Reply-To: <A86C6438FB909A409DDEF926277952B6113C8B55@PPWEXCH2KX14.coh.org>
References: <A86C6438FB909A409DDEF926277952B6113C8973@PPWEXCH2KX14.coh.org>
 <CA+8X3fXY0X2WVmjw9_myQZ8Qvm_8h7rF7SHwGKh=a504LfXuHw@mail.gmail.com>
 <A86C6438FB909A409DDEF926277952B6113C8B55@PPWEXCH2KX14.coh.org>
Message-ID: <CAB8pepyoygg3nTFPAuF7ypJ1ZxKHvnbXv2w3ZY5Wy01XF=BORw@mail.gmail.com>

Sorry, internet's not working properly today.
Third time lucky....

Here's a solution to your original question:

---------
freq <- c (1,2,5,5,10,4,4,8,1,1,8,8,2,4,3,1,2,1,1,138,149,14,1,1)

unique.consecutive <- function (x)
{   dx <- diff (x)
    x [dx != 0]
}

which.maxs <- function (x, ..., include.endpoints=FALSE)
{   dx <- diff (x)
    if (any (dx == 0) )
    stop ("function needs unique-consecutive values")
    ndx <- length (dx)
    I <- c (FALSE, dx [-ndx] > 0 & dx [-1] < 0, FALSE)
    if (include.endpoints)
    {   I [1] <- (dx [1] < 0)
        I [ndx + 1] <- (dx [ndx] > 0)
    }
    which (I)
}

freq.sub <- unique.consecutive (freq)
maxv <- freq.sub [which.maxs (freq.sub, include.endpoints=TRUE)]

maxv
unique (maxv)
---------

Some comments:

My package, probhat, contains early prototype-quality functions for
discrete kernel smoothing.
This can be used to "smooth" frequency data.
Which in turn, can eliminate spurious modes.

https://cran.r-project.org/web/packages/probhat/vignettes/probhat.pdf

Unfortunately, bandwidth selection is manual.
Also note that currently it only returns probability mass (not frequency)
but it's very easy to to get frequency from probability mass.

I'm planning to resume work on this package in two to three days, so I'm
open to suggestions...

	[[alternative HTML version deleted]]


From @purd|e@@ @end|ng |rom gm@||@com  Mon Mar 16 22:29:20 2020
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Tue, 17 Mar 2020 10:29:20 +1300
Subject: [R] 
 find multiple mode, sorry for not providing enough information
In-Reply-To: <CAB8pepyoygg3nTFPAuF7ypJ1ZxKHvnbXv2w3ZY5Wy01XF=BORw@mail.gmail.com>
References: <A86C6438FB909A409DDEF926277952B6113C8973@PPWEXCH2KX14.coh.org>
 <CA+8X3fXY0X2WVmjw9_myQZ8Qvm_8h7rF7SHwGKh=a504LfXuHw@mail.gmail.com>
 <A86C6438FB909A409DDEF926277952B6113C8B55@PPWEXCH2KX14.coh.org>
 <CAB8pepyoygg3nTFPAuF7ypJ1ZxKHvnbXv2w3ZY5Wy01XF=BORw@mail.gmail.com>
Message-ID: <CAB8pepw1z5y-C487vnJnxFv4PwSWBtRhG4JXb5H-U8awWBRcyg@mail.gmail.com>

I think I need a different email.
Google is making it difficult to sent/receive/read completely plain
text messages.
On my end, it's automatically formatting plain text messages, and
doing so, incorrectly.


From herd_dog @end|ng |rom cox@net  Mon Mar 16 23:35:36 2020
From: herd_dog @end|ng |rom cox@net (Phillip Heinrich)
Date: Mon, 16 Mar 2020 15:35:36 -0700
Subject: [R] Analyzing Baseball Data With R
Message-ID: <EBFF6F280FA34D348E95421E9C0818D0@OWNERPC>

Can?t get past first step of Chapter 7 page 164.

Opened a new RStudio window.  Loaded tidyverse and keyed in library(tidyverse) which of course includes dplyr.  The working directory is: C:/Users/Owner/Documents.

Then keyed in: db <- src_sqlite(?data/pitchrx.sqlite?,create=TRUE)

And got the following error: Error: Could not connect to database:
                                            unable to open database file

Googled everything I could think of to find the sqlite function and the pitchrx.sqlite empty data base.  Can someone give me some direction?

I wondering if I have configured RStudio incorrectly.  Why doesn?t my by RStudio point to the correct data file?



 
	[[alternative HTML version deleted]]


From ycd|ng @end|ng |rom coh@org  Mon Mar 16 23:58:18 2020
From: ycd|ng @end|ng |rom coh@org (Yuan Chun Ding)
Date: Mon, 16 Mar 2020 22:58:18 +0000
Subject: [R] 
 find multiple mode, sorry for not providing enough information
In-Reply-To: <CAB8pepySVpPRh=E6LqZGEMVGKSn4Qdjyxe-WzXCM6M7O4y=Q1g@mail.gmail.com>
References: <A86C6438FB909A409DDEF926277952B6113C8973@PPWEXCH2KX14.coh.org>
 <CA+8X3fXY0X2WVmjw9_myQZ8Qvm_8h7rF7SHwGKh=a504LfXuHw@mail.gmail.com>
 <A86C6438FB909A409DDEF926277952B6113C8B55@PPWEXCH2KX14.coh.org>
 <CAB8pepySVpPRh=E6LqZGEMVGKSn4Qdjyxe-WzXCM6M7O4y=Q1g@mail.gmail.com>
Message-ID: <A86C6438FB909A409DDEF926277952B6113C8C56@PPWEXCH2KX14.coh.org>

Hi Abby,

Thank you so much for your effort!! I really appreciate your help!!

I modified your code a little to get both maxv and corresponding alleles in var1.

For now, I do not care too much for identifying small peaks.

Ding

var1 <-c(1,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,20,21,22,23,24,25,31)
freq <-c(1,2,5,5,10,4,4,8,1,1,8,8,2,4,3,1,2,1,1,138,149,14,1,1)
var_freq <-data.frame(var1,freq)

temp8 <-var_freq[diff(var_freq$freq)!=0, ]

which.maxs <- function (x, ..., include.endpoints=FALSE)
{       dx <- diff (x)
if (any (dx == 0) )
  stop ("function needs unique-consecutive values")
ndx <- length (dx)
I <- c (FALSE, dx [-ndx] > 0 & dx [-1] < 0, FALSE)
if (include.endpoints)
{       I [1] <- (dx [1] < 0)
I [ndx + 1] <- (dx [ndx] > 0)
}
which (I)
}

var_freq_modes <- temp8 [which.maxs (temp8$freq, include.endpoints=TRUE),]

-----Original Message-----
From: Abby Spurdle [mailto:spurdle.a at gmail.com] 
Sent: Monday, March 16, 2020 1:57 PM
To: Yuan Chun Ding
Cc: Jim Lemon; r-help mailing list
Subject: Re: [R] find multiple mode, sorry for not providing enough information

(Sorry, that was supposed to go to the mailing list).

Here's a solution to your original question:
---------
freq <- c (1,2,5,5,10,4,4,8,1,1,8,8,2,4,3,1,2,1,1,138,149,14,1,1)

unique.consecutive <- function (x)
{       dx <- diff (x)
        x [dx != 0]
}

which.maxs <- function (x, ..., include.endpoints=FALSE)
{       dx <- diff (x)
        if (any (dx == 0) )
                stop ("function needs unique-consecutive values")
        ndx <- length (dx)
        I <- c (FALSE, dx [-ndx] > 0 & dx [-1] < 0, FALSE)
        if (include.endpoints)
        {       I [1] <- (dx [1] < 0)
                I [ndx + 1] <- (dx [ndx] > 0)
        }
        which (I)
}

freq.sub <- unique.consecutive (freq)
maxv <- freq.sub [which.maxs (freq.sub, include.endpoints=TRUE)]

maxv
unique (maxv)
---------

Some comments:

My package, probhat, contains early prototype-quality functions for discrete kernel smoothing.
This can be used to "smooth" frequency data.
Which in turn, can eliminate spurious modes.

https://urldefense.com/v3/__https://cran.r-project.org/web/packages/probhat/vignettes/probhat.pdf__;!!Fou38LsQmgU!9PTtUQp80JUeGi1gzKCC6IfoCZkZ8BO4ic42iXkMCcVlFUW4Cu1sgi1urJX0$ 

Unfortunately, bandwidth selection is manual.
Also note that currently it only returns probability mass (not
frequency) but it's very easy to to get frequency from probability mass.

I'm planning to resume work on this package in two to three days, so I'm open to suggestions...

On 3/17/20, Yuan Chun Ding <ycding at coh.org> wrote:
> Hi Jim,
>
> Yes, you are right.  I sorted the tem4$Var1 first, then find rising peaks in
> Freq variable from left to right.   I guess I probably need to define the
> minimal rising and drop on both side of a potential maxima, so avoid 
> identifying really small rising peaks.  For example, I only want to 
> identify the freq value of freq=10 (corresponding var1 = allele6), 
> freq=8(var1=allele9),, freq=8( var1=allele12), and freq=149 
> (var1=allele23),  but ignore freq=4 (var10=allele15) and freq=2 (var1=allele18).
>
> I am still working on it, any help would be really appreciated.
>
> Thank you,
>
> Ding
>
> -----Original Message-----
> From: Jim Lemon [mailto:drjimlemon at gmail.com]
> Sent: Monday, March 16, 2020 1:10 AM
> To: Yuan Chun Ding; r-help mailing list
> Subject: Re: [R] find multiple mode, sorry for not providing enough 
> information
>
> [Attention: This email came from an external source. Do not open 
> attachments or click on links from unknown senders or unexpected 
> emails.]
>
> ----------------------------------------------------------------------
> Hi Ding,
> While I was completely off the track in my first reply, the subsequent 
> posts make your problem somewhat clearer. The way you state the 
> problem suggests that the order of the values of "freq" is important.
> That is, it is not just a matter of finding local maxima, but the 
> direction in which you approach those maxima is important. For 
> example. I might want to only identify maxima with at least four 
> monotonically increasing values preceding them and a decrease of at 
> least half the value of the maximum in the succeeding value. By 
> breaking down the problem into a set of criteria, these can be 
> implemented in a function that will search the values in one direction, returning the locations of maxima that fulfil those criteria.
>
> Jim
>
> On Mon, Mar 16, 2020 at 3:11 PM Yuan Chun Ding <ycding at coh.org> wrote:
>>
>> sorry, I just came back.
>>
>> Yes,  Abby's understanding is right.
>>
>> > tem4$Var1
>>  [1]  1    3   4   5   6    7   8   9  10  11  12  13  14  15  16  17  18
>> 20   21   22    23     24   25   31
>> > tem4$Freq
>>  [1]   1   2   5   5  10   4   4   8   1    1    8    8     2     4    3
>>  1    2    1     1   138  149    14    1     1
>>
>> I have 2000 markers, this is just one example marker, the var1 is a 
>> VNTR marker with alleles 1, 3, 4 etc, a multi-allele marker; the 
>> corresponding frequency for each allele is 1,2 5 etc.  I want to 
>> convert this multi-allele marker to bi-allele markers by choosing a 
>> cutoff value; I would want the cut point to be allele 6 with 
>> frequency of 10, so  patients with allele 1 to allele 5 are 
>> considered as carrying "short" allele, allele 6 to 31 as "long" 
>> allele;  then sliding to next rsing frequency peak, allele 8 with frequency of 8, etc.
>>
>> maybe those rising peaks are not really multiple modes, but I want to 
>> do this type of data conversion.  I want to first determine m number 
>> of modes, then convert input dat file into m different input files, 
>> then perform Cox regression analysis for each converted file. I am 
>> stuck in the step of find out m rise peaks.
>>
>> Thank you,
>>
>> Ding
>>
>
> ----------------------------------------------------------------------
> ------------------------------------------------------------
> -SECURITY/CONFIDENTIALITY WARNING-
>
> This message and any attachments are intended solely for the 
> individual or entity to which they are addressed. This communication 
> may contain information that is privileged, confidential, or exempt 
> from disclosure under applicable law (e.g., personal health 
> information, research data, financial information). Because this 
> e-mail has been sent without encryption, individuals other than the 
> intended recipient may be able to view the information, forward it to 
> others or tamper with the information without the knowledge or consent 
> of the sender. If you are not the intended recipient, or the employee 
> or person responsible for delivering the message to the intended 
> recipient, any dissemination, distribution or copying of the 
> communication is strictly prohibited. If you received the 
> communication in error, please notify the sender immediately by 
> replying to this message and deleting the message and any accompanying 
> files from your system. If, due to the security risks, you do not wish 
> to rec  eive further communications via e-mail, please reply to this 
> message and inform the sender that you do not wish to receive further 
> e-mail from the sender. (LCP301)
> ------------------------------------------------------------
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-he
> lp__;!!Fou38LsQmgU!9PTtUQp80JUeGi1gzKCC6IfoCZkZ8BO4ic42iXkMCcVlFUW4Cu1
> sgoXl9dl3$
> PLEASE do read the posting guide
> https://urldefense.com/v3/__http://www.R-project.org/posting-guide.htm
> l__;!!Fou38LsQmgU!9PTtUQp80JUeGi1gzKCC6IfoCZkZ8BO4ic42iXkMCcVlFUW4Cu1s
> glbVg45-$ and provide commented, minimal, self-contained, reproducible 
> code.
>

From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Mar 17 00:12:57 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 16 Mar 2020 16:12:57 -0700
Subject: [R] Analyzing Baseball Data With R
In-Reply-To: <EBFF6F280FA34D348E95421E9C0818D0@OWNERPC>
References: <EBFF6F280FA34D348E95421E9C0818D0@OWNERPC>
Message-ID: <BD3AAD7D-1767-48F5-A1BC-CB632F9088A8@dcn.davis.ca.us>

This is R-help, not RStudio-help, nor is it "Analyzing Baseball Data"-help, which means you cannot assume we know anything about what you are don't unless you tell us. However, it turns out that neither R nor RStudio are likely to be at fault here... it is up to you to keep track of which directory is the current directory (?getwd) and to insure that the files you want to access are in the directories where you are looking for them (a sub-directory called data within your current directory).

Note that if you double-click on a file from most file manager windows, and that opens R or RStudio, the file manager will set the current directory conveniently to where the file is for you. For RGui (on-topic here), that file could be an empty start.RData file. For RStudio (not really on-topic here) that is usually a YourProject.Rproj file. But we don't know what files or sub-directories you have to work with, or how you are starting RStudio.

Do read the Posting Guide and try to clarify your questions with R code and responses from R for best results on this mailing list.

On March 16, 2020 3:35:36 PM PDT, Phillip Heinrich <herd_dog at cox.net> wrote:
>Can?t get past first step of Chapter 7 page 164.
>
>Opened a new RStudio window.  Loaded tidyverse and keyed in
>library(tidyverse) which of course includes dplyr.  The working
>directory is: C:/Users/Owner/Documents.
>
>Then keyed in: db <- src_sqlite(?data/pitchrx.sqlite?,create=TRUE)
>
>And got the following error: Error: Could not connect to database:
>                                           unable to open database file
>
>Googled everything I could think of to find the sqlite function and the
>pitchrx.sqlite empty data base.  Can someone give me some direction?
>
>I wondering if I have configured RStudio incorrectly.  Why doesn?t my
>by RStudio point to the correct data file?
>
>
>
> 
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From bgunter@4567 @end|ng |rom gm@||@com  Tue Mar 17 01:03:36 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 16 Mar 2020 17:03:36 -0700
Subject: [R] Analyzing Baseball Data With R
In-Reply-To: <BD3AAD7D-1767-48F5-A1BC-CB632F9088A8@dcn.davis.ca.us>
References: <EBFF6F280FA34D348E95421E9C0818D0@OWNERPC>
 <BD3AAD7D-1767-48F5-A1BC-CB632F9088A8@dcn.davis.ca.us>
Message-ID: <CAGxFJbSgYptVhtGWo6Ja=JsZQbeW1ewukezsmFY3LwnLsL2emA@mail.gmail.com>

... and in addition see ?file.choose for an interactive way to choose files
that may be easier and/or help you to diagnose your problems.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Mar 16, 2020 at 4:13 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> This is R-help, not RStudio-help, nor is it "Analyzing Baseball
> Data"-help, which means you cannot assume we know anything about what you
> are don't unless you tell us. However, it turns out that neither R nor
> RStudio are likely to be at fault here... it is up to you to keep track of
> which directory is the current directory (?getwd) and to insure that the
> files you want to access are in the directories where you are looking for
> them (a sub-directory called data within your current directory).
>
> Note that if you double-click on a file from most file manager windows,
> and that opens R or RStudio, the file manager will set the current
> directory conveniently to where the file is for you. For RGui (on-topic
> here), that file could be an empty start.RData file. For RStudio (not
> really on-topic here) that is usually a YourProject.Rproj file. But we
> don't know what files or sub-directories you have to work with, or how you
> are starting RStudio.
>
> Do read the Posting Guide and try to clarify your questions with R code
> and responses from R for best results on this mailing list.
>
> On March 16, 2020 3:35:36 PM PDT, Phillip Heinrich <herd_dog at cox.net>
> wrote:
> >Can?t get past first step of Chapter 7 page 164.
> >
> >Opened a new RStudio window.  Loaded tidyverse and keyed in
> >library(tidyverse) which of course includes dplyr.  The working
> >directory is: C:/Users/Owner/Documents.
> >
> >Then keyed in: db <- src_sqlite(?data/pitchrx.sqlite?,create=TRUE)
> >
> >And got the following error: Error: Could not connect to database:
> >                                           unable to open database file
> >
> >Googled everything I could think of to find the sqlite function and the
> >pitchrx.sqlite empty data base.  Can someone give me some direction?
> >
> >I wondering if I have configured RStudio incorrectly.  Why doesn?t my
> >by RStudio point to the correct data file?
> >
> >
> >
> >
> >       [[alternative HTML version deleted]]
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my phone. Please excuse my brevity.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @purd|e@@ @end|ng |rom gm@||@com  Tue Mar 17 01:14:15 2020
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Tue, 17 Mar 2020 13:14:15 +1300
Subject: [R] 
 find multiple mode, sorry for not providing enough information
In-Reply-To: <A86C6438FB909A409DDEF926277952B6113C8C56@PPWEXCH2KX14.coh.org>
References: <A86C6438FB909A409DDEF926277952B6113C8973@PPWEXCH2KX14.coh.org>
 <CA+8X3fXY0X2WVmjw9_myQZ8Qvm_8h7rF7SHwGKh=a504LfXuHw@mail.gmail.com>
 <A86C6438FB909A409DDEF926277952B6113C8B55@PPWEXCH2KX14.coh.org>
 <CAB8pepySVpPRh=E6LqZGEMVGKSn4Qdjyxe-WzXCM6M7O4y=Q1g@mail.gmail.com>
 <A86C6438FB909A409DDEF926277952B6113C8C56@PPWEXCH2KX14.coh.org>
Message-ID: <CAB8pepwOruvfk6oNsRt-3Mm7i4yqu2r_yzO1=usWSGNTcMwqTw@mail.gmail.com>

#bug fix
unique.consecutive <- function (x)
{	dx <- diff (x)
	x [c (TRUE, dx != 0)]
}


From gro@@m@b @end|ng |rom um|ch@edu  Tue Mar 17 01:23:49 2020
From: gro@@m@b @end|ng |rom um|ch@edu (Brian Grossman)
Date: Mon, 16 Mar 2020 20:23:49 -0400
Subject: [R] Problem launching Rcmdr
In-Reply-To: <7DCD30FF-8198-4C98-A05D-65308D5ED952@mcmaster.ca>
References: <30331_1583814715_02A4Upjf022824_CACcht+kA59600nxPTUEY6swC0krkOmo2aiZezUhfxwnjwmjV_A@mail.gmail.com>
 <7DCD30FF-8198-4C98-A05D-65308D5ED952@mcmaster.ca>
Message-ID: <CACcht+k_RjNg1DajwDhnQYUUOZTsftu-QXK3AaHOagMB5TGTqg@mail.gmail.com>

John,

It appears that the new version of R 3.6.3 does not have this issue. I will
be doing more testing and will let you know if we have any issues.

Thank you for your assistance,

Brian

On Tue, Mar 10, 2020 at 8:46 AM Fox, John <jfox at mcmaster.ca> wrote:

> Dear Brian,
>
> Normally I'd expect that a workspace saved from a previous session and
> loaded at the start of the current session would cause this kind of
> anomalous behaviour, but that doesn't explain why the Rcmdr starts up
> properly in a second (concurrent?) session, nor why it doesn't start up
> properly when R is run with the --vanilla switch.
>
> Can you report the result of sessionInfo() at the start of a session?
>
> If all else fails, you could try uninstalling and reinstalling R and
> packages.
>
> Best,
>  John
>
>   -----------------------------
>   John Fox, Professor Emeritus
>   McMaster University
>   Hamilton, Ontario, Canada
>   Web: http::/socserv.mcmaster.ca/jfox
>
> > On Mar 9, 2020, at 3:25 PM, Brian Grossman <grossmab at umich.edu> wrote:
> >
> > I'm having a problem with launching Rcmdr. When I try to launch it the
> > first time through R using the command library(Rcmdr) it will go through
> > the process of launching and get to the point where it says
> >
> > "Registered S3 methods overwritten by 'lme4':
> >  method                          from
> >  cooks.distance.influence.merMod car
> >  influence.merMod                car
> >  dfbeta.influence.merMod         car
> >  dfbetas.influence.merMod        car
> > lattice theme set by effectsTheme()
> > See ?effectsTheme for details."
> >
> > and then it just hangs there and never launches Rcmdr. If you launch
> > another instance of R and run the same command it will complete and
> launch
> > Rcmdr successfully. I have tried launching R with R.exe --vanilla with
> the
> > same results.
> >
> > The system information is Windows 10 version 1903, i5 8500 processor, 8GB
> > RAM, 256Gb  SSD. R version 3.6.2 Platform: x86_64-w64-mingw32/x64
> (64-bit)
> >
> > Hopefully I haven't left out any important information. Thank you for any
> > suggestions.
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
>

-- 

Brian Grossman, (he/him/his) Desktop Support Specialist

College of Literature, Science, and the Arts <http://lsa.umich.edu/> |
University
of Michigan <http://umich.edu/>

LSA Technology Services | G240 Angell Hall | 435 S. State Street | Ann
Arbor, MI I 48109
Desk: 734.764.0774 | Cell: 734.260.1017 | For Immediate Assistance:
734.615.0100 | Email: g <sharpbg at umich.edu>rossmab at umich.edu


Submit a support request anytime using our Guided Web Form
<http://lsa.umich.edu/ts/help>

	[[alternative HTML version deleted]]


From j|ox @end|ng |rom mcm@@ter@c@  Tue Mar 17 01:40:39 2020
From: j|ox @end|ng |rom mcm@@ter@c@ (Fox, John)
Date: Tue, 17 Mar 2020 00:40:39 +0000
Subject: [R] Problem launching Rcmdr
In-Reply-To: <CACcht+k_RjNg1DajwDhnQYUUOZTsftu-QXK3AaHOagMB5TGTqg@mail.gmail.com>
References: <30331_1583814715_02A4Upjf022824_CACcht+kA59600nxPTUEY6swC0krkOmo2aiZezUhfxwnjwmjV_A@mail.gmail.com>
 <7DCD30FF-8198-4C98-A05D-65308D5ED952@mcmaster.ca>
 <CACcht+k_RjNg1DajwDhnQYUUOZTsftu-QXK3AaHOagMB5TGTqg@mail.gmail.com>
Message-ID: <15B92F2B-CA35-471F-8E37-18485C3AC3C1@mcmaster.ca>

Dear Brian,

> On Mar 16, 2020, at 8:23 PM, Brian Grossman <grossmab at umich.edu> wrote:
> 
> John,
> 
> It appears that the new version of R   3.6.3 does not have this issue. I will be doing more testing and will let you know if we have any issues.

I'm glad that the Rcmdr is now working normally for you -- thanks for letting me know.

Since no one else has reported a similar problem under R 3.6.2, I suspect that your installation was somehow broken or strangely configured. I guess that we'll never know what the source of the problem was.

Best,
 John

> 
> Thank you for your assistance,
> 
> Brian
> 
> On Tue, Mar 10, 2020 at 8:46 AM Fox, John <jfox at mcmaster.ca> wrote:
> Dear Brian,
> 
> Normally I'd expect that a workspace saved from a previous session and loaded at the start of the current session would cause this kind of anomalous behaviour, but that doesn't explain why the Rcmdr starts up properly in a second (concurrent?) session, nor why it doesn't start up properly when R is run with the --vanilla switch.
> 
> Can you report the result of sessionInfo() at the start of a session?
> 
> If all else fails, you could try uninstalling and reinstalling R and packages.
> 
> Best,
>  John
> 
>   -----------------------------
>   John Fox, Professor Emeritus
>   McMaster University
>   Hamilton, Ontario, Canada
>   Web: http::/socserv.mcmaster.ca/jfox
> 
> > On Mar 9, 2020, at 3:25 PM, Brian Grossman <grossmab at umich.edu> wrote:
> > 
> > I'm having a problem with launching Rcmdr. When I try to launch it the
> > first time through R using the command library(Rcmdr) it will go through
> > the process of launching and get to the point where it says
> > 
> > "Registered S3 methods overwritten by 'lme4':
> >  method                          from
> >  cooks.distance.influence.merMod car
> >  influence.merMod                car
> >  dfbeta.influence.merMod         car
> >  dfbetas.influence.merMod        car
> > lattice theme set by effectsTheme()
> > See ?effectsTheme for details."
> > 
> > and then it just hangs there and never launches Rcmdr. If you launch
> > another instance of R and run the same command it will complete and launch
> > Rcmdr successfully. I have tried launching R with R.exe --vanilla with the
> > same results.
> > 
> > The system information is Windows 10 version 1903, i5 8500 processor, 8GB
> > RAM, 256Gb  SSD. R version 3.6.2 Platform: x86_64-w64-mingw32/x64 (64-bit)
> > 
> > Hopefully I haven't left out any important information. Thank you for any
> > suggestions.
> > 
> >       [[alternative HTML version deleted]]
> > 
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> 
> 
> 
> -- 
> Brian Grossman, (he/him/his) Desktop Support Specialist
> College of Literature, Science, and the Arts | University of Michigan 
> LSA Technology Services | G240 Angell Hall | 435 S. State Street | Ann Arbor, MI I 48109
> Desk: 734.764.0774 | Cell: 734.260.1017 | For Immediate Assistance: 734.615.0100 | Email: grossmab at umich.edu
> 
> Submit a support request anytime using our Guided Web Form
>  
> 
> 


From ko|@@@@ @end|ng |rom @t@t@rutger@@edu  Tue Mar 17 03:23:26 2020
From: ko|@@@@ @end|ng |rom @t@t@rutger@@edu (John Kolassa)
Date: Tue, 17 Mar 2020 02:23:26 +0000
Subject: [R] Some seemingly odd behavior of survfit in library survival
Message-ID: <MN2PR14MB3229805CD2D452939CDFF44D84F60@MN2PR14MB3229.namprd14.prod.outlook.com>

I ran across an issue that looks like variable scoping in survfit is not acting as I would expect.  Here's a minimal example:

new<-as.data.frame(list(t=1:4,d=rep(1,4),s=c(1,0,0,1)))
library(survival)
mine<-function(ff,df){
        fit<-coxph(ff,data=df)
        out<-survfit(fit,df)
}
mine(as.formula("Surv(t,d)~s"),new)

I would expect this to fit the proportional hazards regression model using formula Surv(t,d)~s, using data set new, and then calculate a separate fitted survival curve for each member of the data set.  Instead I get an error

Error in eval(predvars, data, env) :
  invalid 'envir' argument of type 'closure'

The code runs without error if I modify it by copying the data set new to the local variable within the function mine before running:

new<-as.data.frame(list(t=1:4,d=rep(1,4),s=c(1,0,0,1)))
library(survival)
mine<-function(ff,df){
        fit<-coxph(ff,data=df)
        out<-survfit(fit,df)
}
df<-new
mine(as.formula("Surv(t,d)~s"),new)

which leads me to believe that there's some variable scoping error.  Can anyone point out what I'm doing wrong?  Thanks, John

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Mar 17 05:39:54 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 16 Mar 2020 21:39:54 -0700
Subject: [R] Some seemingly odd behavior of survfit in library survival
In-Reply-To: <MN2PR14MB3229805CD2D452939CDFF44D84F60@MN2PR14MB3229.namprd14.prod.outlook.com>
References: <MN2PR14MB3229805CD2D452939CDFF44D84F60@MN2PR14MB3229.namprd14.prod.outlook.com>
Message-ID: <FB5505EC-6CBD-41D2-8E7D-2EA934C72231@dcn.davis.ca.us>

The coxph function appears to rely on finding the name of the data argument in the environment in which the formula was created. The lm function does not have this problem.

Oh, and df is the name of the F distribution density function, which explains why the error complained about a "closure".

new<-as.data.frame(list(t=1:4,d=rep(1,4),s=c(1,0,0,1)))
library(survival)
mine<-function(ff,df){
        fit<-coxph(as.formula(ff),data=df)
         survfit(fit,df)
}
mine("Surv(t,d)~s",new)


On March 16, 2020 7:23:26 PM PDT, John Kolassa <kolassa at stat.rutgers.edu> wrote:
>I ran across an issue that looks like variable scoping in survfit is
>not acting as I would expect.  Here's a minimal example:
>
>new<-as.data.frame(list(t=1:4,d=rep(1,4),s=c(1,0,0,1)))
>library(survival)
>mine<-function(ff,df){
>        fit<-coxph(ff,data=df)
>        out<-survfit(fit,df)
>}
>mine(as.formula("Surv(t,d)~s"),new)
>
>I would expect this to fit the proportional hazards regression model
>using formula Surv(t,d)~s, using data set new, and then calculate a
>separate fitted survival curve for each member of the data set. 
>Instead I get an error
>
>Error in eval(predvars, data, env) :
>  invalid 'envir' argument of type 'closure'
>
>The code runs without error if I modify it by copying the data set new
>to the local variable within the function mine before running:
>
>new<-as.data.frame(list(t=1:4,d=rep(1,4),s=c(1,0,0,1)))
>library(survival)
>mine<-function(ff,df){
>        fit<-coxph(ff,data=df)
>        out<-survfit(fit,df)
>}
>df<-new
>mine(as.formula("Surv(t,d)~s"),new)
>
>which leads me to believe that there's some variable scoping error. 
>Can anyone point out what I'm doing wrong?  Thanks, John
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From tuech|er @end|ng |rom gmx@@t  Tue Mar 17 07:10:09 2020
From: tuech|er @end|ng |rom gmx@@t (Heinz Tuechler)
Date: Tue, 17 Mar 2020 07:10:09 +0100
Subject: [R] Some seemingly odd behavior of survfit in library survival
In-Reply-To: <FB5505EC-6CBD-41D2-8E7D-2EA934C72231@dcn.davis.ca.us>
References: <MN2PR14MB3229805CD2D452939CDFF44D84F60@MN2PR14MB3229.namprd14.prod.outlook.com>
 <FB5505EC-6CBD-41D2-8E7D-2EA934C72231@dcn.davis.ca.us>
Message-ID: <c9109c72-b810-201b-838a-3685f61b9c01@gmx.at>

Jeff Newmiller wrote/hat geschrieben on/am 17.03.2020 05:39:
> The coxph function appears to rely on finding the name of the data argument in the environment in which the formula was created. The lm function does not have this problem.
>
> Oh, and df is the name of the F distribution density function, which explains why the error complained about a "closure".
>
> new<-as.data.frame(list(t=1:4,d=rep(1,4),s=c(1,0,0,1)))
> library(survival)
> mine<-function(ff,df){
>         fit<-coxph(as.formula(ff),data=df)
>          survfit(fit,df)
> }
> mine("Surv(t,d)~s",new)
>

Therefore a workaround could be to use the character string for the
formula as argument and apply as.formula() within the function.

mine2 <-function(fstr,df){
         fit<-coxph(as.formula(fstr),data=df)
         out<-survfit(fit,df)
         out
}

mine2("Surv(t,d)~s",new)

Heinz
>
> On March 16, 2020 7:23:26 PM PDT, John Kolassa <kolassa at stat.rutgers.edu> wrote:
>> I ran across an issue that looks like variable scoping in survfit is
>> not acting as I would expect.  Here's a minimal example:
>>
>> new<-as.data.frame(list(t=1:4,d=rep(1,4),s=c(1,0,0,1)))
>> library(survival)
>> mine<-function(ff,df){
>>        fit<-coxph(ff,data=df)
>>        out<-survfit(fit,df)
>> }
>> mine(as.formula("Surv(t,d)~s"),new)
>>
>> I would expect this to fit the proportional hazards regression model
>> using formula Surv(t,d)~s, using data set new, and then calculate a
>> separate fitted survival curve for each member of the data set.
>> Instead I get an error
>>
>> Error in eval(predvars, data, env) :
>>  invalid 'envir' argument of type 'closure'
>>
>> The code runs without error if I modify it by copying the data set new
>> to the local variable within the function mine before running:
>>
>> new<-as.data.frame(list(t=1:4,d=rep(1,4),s=c(1,0,0,1)))
>> library(survival)
>> mine<-function(ff,df){
>>        fit<-coxph(ff,data=df)
>>        out<-survfit(fit,df)
>> }
>> df<-new
>> mine(as.formula("Surv(t,d)~s"),new)
>>
>> which leads me to believe that there's some variable scoping error.
>> Can anyone point out what I'm doing wrong?  Thanks, John
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>


From wjm1 @end|ng |rom c@@@co|umb|@@edu  Tue Mar 17 07:33:11 2020
From: wjm1 @end|ng |rom c@@@co|umb|@@edu (William Michels)
Date: Mon, 16 Mar 2020 23:33:11 -0700
Subject: [R] Analyzing Baseball Data With R
In-Reply-To: <EBFF6F280FA34D348E95421E9C0818D0@OWNERPC>
References: <EBFF6F280FA34D348E95421E9C0818D0@OWNERPC>
Message-ID: <CAA99HCy100TCE1yEMo932G2DPvz_YNSvevU6Hqx4oKjOnXo3tw@mail.gmail.com>

Hi Phillip,

Generally these problems come down to knowing/setting your working
directory. The first question is whether you have a directory named
"data" inside your "C:/Users/Owner/Documents" directory? You may need
to create this directory first, outside of R and/or RStudio (using
your Windows OS).

Below is some example code (on a Mac). You might want to try 1)
creating the "data" directory in Windows as mentioned earlier, 2)
setting your working directory to "C:/Users/Owner/Documents/data",
then 3) re-running your src_sqlite() command giving "pitchrx.sqlite?
as the database file name.

> getwd()
[1] "/Users/homedir/R_Dir"
> setwd("/Users/homedir/R_Dir/data")
Error in setwd("/Users/homedir/R_Dir/data") :
  cannot change working directory
>

HTH, Bill.

W. Michels, Ph.D.


On Mon, Mar 16, 2020 at 3:35 PM Phillip Heinrich <herd_dog at cox.net> wrote:
>
> Can?t get past first step of Chapter 7 page 164.
>
> Opened a new RStudio window.  Loaded tidyverse and keyed in library(tidyverse) which of course includes dplyr.  The working directory is: C:/Users/Owner/Documents.
>
> Then keyed in: db <- src_sqlite(?data/pitchrx.sqlite?,create=TRUE)
>
> And got the following error: Error: Could not connect to database:
>                                             unable to open database file
>
> Googled everything I could think of to find the sqlite function and the pitchrx.sqlite empty data base.  Can someone give me some direction?
>
> I wondering if I have configured RStudio incorrectly.  Why doesn?t my by RStudio point to the correct data file?
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jwd @end|ng |rom @urewe@t@net  Tue Mar 17 08:10:43 2020
From: jwd @end|ng |rom @urewe@t@net (John)
Date: Tue, 17 Mar 2020 00:10:43 -0700
Subject: [R] Analyzing Baseball Data With R
In-Reply-To: <EBFF6F280FA34D348E95421E9C0818D0@OWNERPC>
References: <EBFF6F280FA34D348E95421E9C0818D0@OWNERPC>
Message-ID: <20200317001043.01c06b99@Draco.localdomain>

On Mon, 16 Mar 2020 15:35:36 -0700
"Phillip Heinrich" <herd_dog at cox.net> wrote:

> Can?t get past first step of Chapter 7 page 164.
> 
> Opened a new RStudio window.  Loaded tidyverse and keyed in
> library(tidyverse) which of course includes dplyr.  The working
> directory is: C:/Users/Owner/Documents.
> 
> Then keyed in: db <- src_sqlite(?data/pitchrx.sqlite?,create=TRUE)
> 
> And got the following error: Error: Could not connect to database:
>                                             unable to open database
> file
> 
> Googled everything I could think of to find the sqlite function and
> the pitchrx.sqlite empty data base.  Can someone give me some
> direction?
> 
> I wondering if I have configured RStudio incorrectly.  Why doesn?t my
> by RStudio point to the correct data file?
> 
I get the idea that this might be homework.  There's a good deal of
information missing if you want help, and probably you've neglected a
few steps that need to be taken before you can proceed.  You also need
to understand the difference between R and RStudio.  

What you could do is type in "??src_sqlite() and see what it tells you.
For instance, have you installed the package RSQlite? If you haven't
you need to install it.  

It also appears that you might be running Windows.  Have you installed
sqlite?  And so on ...

JWD


From j@p@rk4 @end|ng |rom u|c@edu  Tue Mar 17 20:19:07 2020
From: j@p@rk4 @end|ng |rom u|c@edu (Sparks, John)
Date: Tue, 17 Mar 2020 19:19:07 +0000
Subject: [R] Get Data Table from iml FeatureEffect Object
Message-ID: <DM6PR13MB2522933431C6FCFD2744090FFAF60@DM6PR13MB2522.namprd13.prod.outlook.com>

Hi R-Helpers,

I have recently started working with the iml package (Interpretable Machine Learning)  and its associated material, which I generally find very helpful.

I want to recover some values out of the FeatureEffect Object created by this library, but the form of the object is completely foreign to me.

As a reproducible example:


set.seed(42)?
library("iml")?
library("randomForest")?
data("Boston", package  = "MASS")?
rf = randomForest(medv ~ ., data = Boston, ntree = 50)?
?
X = Boston[which(names(Boston) != "medv")]?
predictor = Predictor$new(rf, data = X, y = Boston$medv)?
imp = FeatureImp$new(predictor, loss = "mae")?
eff = FeatureEffect$new(predictor, feature = "rm") ?
eff


Interpretation method:  FeatureEffect
features: rm[numerical]
grid size: 20

Analysed predictor:
Prediction task: unknown


Analysed data:
Sampling from data.frame with 506 rows and 13 columns.

Head of results:
       .ale .type    rm
1 -2.150574   ale 3.561
2 -2.610528   ale 5.304
3 -2.338677   ale 5.593
4 -2.265673   ale 5.709
5 -2.142912   ale 5.837
6 -2.085899   ale 5.885

How can I refer to and get ahold of the table of 6 records above?

I tried str(eff) and class(eff), but I am not familiar with the structure of the object(s).

Would someone please tell me how to get inside the eff object, or point me to a reference as to what the class or structure of the object is?

Thanks.
--John Sparks

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Mar 17 20:22:06 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 17 Mar 2020 12:22:06 -0700
Subject: [R] Get Data Table from iml FeatureEffect Object
In-Reply-To: <DM6PR13MB2522933431C6FCFD2744090FFAF60@DM6PR13MB2522.namprd13.prod.outlook.com>
References: <DM6PR13MB2522933431C6FCFD2744090FFAF60@DM6PR13MB2522.namprd13.prod.outlook.com>
Message-ID: <CAGxFJbS4g69LjW4xgOtWSw3DZiqq2sKZN5_Z0oXZh3ZPWwdgHA@mail.gmail.com>

?str

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Mar 17, 2020 at 12:19 PM Sparks, John <jspark4 at uic.edu> wrote:

> Hi R-Helpers,
>
> I have recently started working with the iml package (Interpretable
> Machine Learning)  and its associated material, which I generally find very
> helpful.
>
> I want to recover some values out of the FeatureEffect Object created by
> this library, but the form of the object is completely foreign to me.
>
> As a reproducible example:
>
>
> set.seed(42)?
> library("iml")?
> library("randomForest")?
> data("Boston", package  = "MASS")?
> rf = randomForest(medv ~ ., data = Boston, ntree = 50)?
> ?
> X = Boston[which(names(Boston) != "medv")]?
> predictor = Predictor$new(rf, data = X, y = Boston$medv)?
> imp = FeatureImp$new(predictor, loss = "mae")?
> eff = FeatureEffect$new(predictor, feature = "rm") ?
> eff
>
>
> Interpretation method:  FeatureEffect
> features: rm[numerical]
> grid size: 20
>
> Analysed predictor:
> Prediction task: unknown
>
>
> Analysed data:
> Sampling from data.frame with 506 rows and 13 columns.
>
> Head of results:
>        .ale .type    rm
> 1 -2.150574   ale 3.561
> 2 -2.610528   ale 5.304
> 3 -2.338677   ale 5.593
> 4 -2.265673   ale 5.709
> 5 -2.142912   ale 5.837
> 6 -2.085899   ale 5.885
>
> How can I refer to and get ahold of the table of 6 records above?
>
> I tried str(eff) and class(eff), but I am not familiar with the structure
> of the object(s).
>
> Would someone please tell me how to get inside the eff object, or point me
> to a reference as to what the class or structure of the object is?
>
> Thanks.
> --John Sparks
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From j@p@rk4 @end|ng |rom u|c@edu  Tue Mar 17 20:26:10 2020
From: j@p@rk4 @end|ng |rom u|c@edu (Sparks, John)
Date: Tue, 17 Mar 2020 19:26:10 +0000
Subject: [R] Get Data Table from iml FeatureEffect Object
In-Reply-To: <CAGxFJbS4g69LjW4xgOtWSw3DZiqq2sKZN5_Z0oXZh3ZPWwdgHA@mail.gmail.com>
References: <DM6PR13MB2522933431C6FCFD2744090FFAF60@DM6PR13MB2522.namprd13.prod.outlook.com>,
 <CAGxFJbS4g69LjW4xgOtWSw3DZiqq2sKZN5_Z0oXZh3ZPWwdgHA@mail.gmail.com>
Message-ID: <DM6PR13MB25225DADA065B85BB118D417FAF60@DM6PR13MB2522.namprd13.prod.outlook.com>

From my previous email:

"I tried str(eff) and class(eff), but I am not familiar with the structure of the object(s)."

--JJS

________________________________
From: Bert Gunter <bgunter.4567 at gmail.com>
Sent: Tuesday, March 17, 2020 2:22 PM
To: Sparks, John <jspark4 at uic.edu>
Cc: r-help at r-project.org <r-help at r-project.org>; christoph.molnar at gmail.com <christoph.molnar at gmail.com>
Subject: Re: [R] Get Data Table from iml FeatureEffect Object

?str

Bert Gunter

"The trouble with having an open mind is that people keep coming along and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Mar 17, 2020 at 12:19 PM Sparks, John <jspark4 at uic.edu<mailto:jspark4 at uic.edu>> wrote:
Hi R-Helpers,

I have recently started working with the iml package (Interpretable Machine Learning)  and its associated material, which I generally find very helpful.

I want to recover some values out of the FeatureEffect Object created by this library, but the form of the object is completely foreign to me.

As a reproducible example:


set.seed(42)?
library("iml")?
library("randomForest")?
data("Boston", package  = "MASS")?
rf = randomForest(medv ~ ., data = Boston, ntree = 50)?
?
X = Boston[which(names(Boston) != "medv")]?
predictor = Predictor$new(rf, data = X, y = Boston$medv)?
imp = FeatureImp$new(predictor, loss = "mae")?
eff = FeatureEffect$new(predictor, feature = "rm") ?
eff


Interpretation method:  FeatureEffect
features: rm[numerical]
grid size: 20

Analysed predictor:
Prediction task: unknown


Analysed data:
Sampling from data.frame with 506 rows and 13 columns.

Head of results:
       .ale .type    rm
1 -2.150574   ale 3.561
2 -2.610528   ale 5.304
3 -2.338677   ale 5.593
4 -2.265673   ale 5.709
5 -2.142912   ale 5.837
6 -2.085899   ale 5.885

How can I refer to and get ahold of the table of 6 records above?

I tried str(eff) and class(eff), but I am not familiar with the structure of the object(s).

Would someone please tell me how to get inside the eff object, or point me to a reference as to what the class or structure of the object is?

Thanks.
--John Sparks

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Mar 17 20:26:33 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 17 Mar 2020 12:26:33 -0700
Subject: [R] Get Data Table from iml FeatureEffect Object
In-Reply-To: <CAGxFJbS4g69LjW4xgOtWSw3DZiqq2sKZN5_Z0oXZh3ZPWwdgHA@mail.gmail.com>
References: <DM6PR13MB2522933431C6FCFD2744090FFAF60@DM6PR13MB2522.namprd13.prod.outlook.com>
 <CAGxFJbS4g69LjW4xgOtWSw3DZiqq2sKZN5_Z0oXZh3ZPWwdgHA@mail.gmail.com>
Message-ID: <CAGxFJbQX9ShKBm05SG9rLihto-uvvsg1fEiB9c8d4jjfB4HXTw@mail.gmail.com>

that is, read ?str carefully.

data structures are fundamental to any programming language, so if you
really aren't getting it, that's a signal that you need to spend some time
with R tutorials. The R language Definition manual is a more comprehensive
but of course more difficult resource to learn about such matters. I find
it readable, however. Others may not.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Mar 17, 2020 at 12:22 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> ?str
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Tue, Mar 17, 2020 at 12:19 PM Sparks, John <jspark4 at uic.edu> wrote:
>
>> Hi R-Helpers,
>>
>> I have recently started working with the iml package (Interpretable
>> Machine Learning)  and its associated material, which I generally find very
>> helpful.
>>
>> I want to recover some values out of the FeatureEffect Object created by
>> this library, but the form of the object is completely foreign to me.
>>
>> As a reproducible example:
>>
>>
>> set.seed(42)?
>> library("iml")?
>> library("randomForest")?
>> data("Boston", package  = "MASS")?
>> rf = randomForest(medv ~ ., data = Boston, ntree = 50)?
>> ?
>> X = Boston[which(names(Boston) != "medv")]?
>> predictor = Predictor$new(rf, data = X, y = Boston$medv)?
>> imp = FeatureImp$new(predictor, loss = "mae")?
>> eff = FeatureEffect$new(predictor, feature = "rm") ?
>> eff
>>
>>
>> Interpretation method:  FeatureEffect
>> features: rm[numerical]
>> grid size: 20
>>
>> Analysed predictor:
>> Prediction task: unknown
>>
>>
>> Analysed data:
>> Sampling from data.frame with 506 rows and 13 columns.
>>
>> Head of results:
>>        .ale .type    rm
>> 1 -2.150574   ale 3.561
>> 2 -2.610528   ale 5.304
>> 3 -2.338677   ale 5.593
>> 4 -2.265673   ale 5.709
>> 5 -2.142912   ale 5.837
>> 6 -2.085899   ale 5.885
>>
>> How can I refer to and get ahold of the table of 6 records above?
>>
>> I tried str(eff) and class(eff), but I am not familiar with the structure
>> of the object(s).
>>
>> Would someone please tell me how to get inside the eff object, or point
>> me to a reference as to what the class or structure of the object is?
>>
>> Thanks.
>> --John Sparks
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Mar 17 23:13:22 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 17 Mar 2020 15:13:22 -0700
Subject: [R] Get Data Table from iml FeatureEffect Object
In-Reply-To: <CAGxFJbQX9ShKBm05SG9rLihto-uvvsg1fEiB9c8d4jjfB4HXTw@mail.gmail.com>
References: <DM6PR13MB2522933431C6FCFD2744090FFAF60@DM6PR13MB2522.namprd13.prod.outlook.com>
 <CAGxFJbS4g69LjW4xgOtWSw3DZiqq2sKZN5_Z0oXZh3ZPWwdgHA@mail.gmail.com>
 <CAGxFJbQX9ShKBm05SG9rLihto-uvvsg1fEiB9c8d4jjfB4HXTw@mail.gmail.com>
Message-ID: <4EFC5F04-0CAD-4FCE-B4A1-0804408428E1@dcn.davis.ca.us>

OP may find the help page [1] informative as to which fields are which. I have never used the imp package. Note that the DESCRIPTION file indicates that this package uses the R6 object system rather than the more typical S3 or S4.

[1] https://rdrr.io/cran/iml/man/FeatureEffect.html

On March 17, 2020 12:26:33 PM PDT, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>that is, read ?str carefully.
>
>data structures are fundamental to any programming language, so if you
>really aren't getting it, that's a signal that you need to spend some
>time
>with R tutorials. The R language Definition manual is a more
>comprehensive
>but of course more difficult resource to learn about such matters. I
>find
>it readable, however. Others may not.
>
>Bert Gunter
>
>"The trouble with having an open mind is that people keep coming along
>and
>sticking things into it."
>-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
>On Tue, Mar 17, 2020 at 12:22 PM Bert Gunter <bgunter.4567 at gmail.com>
>wrote:
>
>> ?str
>>
>> Bert Gunter
>>
>> "The trouble with having an open mind is that people keep coming
>along and
>> sticking things into it."
>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>
>>
>> On Tue, Mar 17, 2020 at 12:19 PM Sparks, John <jspark4 at uic.edu>
>wrote:
>>
>>> Hi R-Helpers,
>>>
>>> I have recently started working with the iml package (Interpretable
>>> Machine Learning)  and its associated material, which I generally
>find very
>>> helpful.
>>>
>>> I want to recover some values out of the FeatureEffect Object
>created by
>>> this library, but the form of the object is completely foreign to
>me.
>>>
>>> As a reproducible example:
>>>
>>>
>>> set.seed(42)?
>>> library("iml")?
>>> library("randomForest")?
>>> data("Boston", package  = "MASS")?
>>> rf = randomForest(medv ~ ., data = Boston, ntree = 50)?
>>> ?
>>> X = Boston[which(names(Boston) != "medv")]?
>>> predictor = Predictor$new(rf, data = X, y = Boston$medv)?
>>> imp = FeatureImp$new(predictor, loss = "mae")?
>>> eff = FeatureEffect$new(predictor, feature = "rm") ?
>>> eff
>>>
>>>
>>> Interpretation method:  FeatureEffect
>>> features: rm[numerical]
>>> grid size: 20
>>>
>>> Analysed predictor:
>>> Prediction task: unknown
>>>
>>>
>>> Analysed data:
>>> Sampling from data.frame with 506 rows and 13 columns.
>>>
>>> Head of results:
>>>        .ale .type    rm
>>> 1 -2.150574   ale 3.561
>>> 2 -2.610528   ale 5.304
>>> 3 -2.338677   ale 5.593
>>> 4 -2.265673   ale 5.709
>>> 5 -2.142912   ale 5.837
>>> 6 -2.085899   ale 5.885
>>>
>>> How can I refer to and get ahold of the table of 6 records above?
>>>
>>> I tried str(eff) and class(eff), but I am not familiar with the
>structure
>>> of the object(s).
>>>
>>> Would someone please tell me how to get inside the eff object, or
>point
>>> me to a reference as to what the class or structure of the object
>is?
>>>
>>> Thanks.
>>> --John Sparks
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Mar 18 00:08:18 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 17 Mar 2020 16:08:18 -0700
Subject: [R] Get Data Table from iml FeatureEffect Object
In-Reply-To: <4EFC5F04-0CAD-4FCE-B4A1-0804408428E1@dcn.davis.ca.us>
References: <DM6PR13MB2522933431C6FCFD2744090FFAF60@DM6PR13MB2522.namprd13.prod.outlook.com>
 <CAGxFJbS4g69LjW4xgOtWSw3DZiqq2sKZN5_Z0oXZh3ZPWwdgHA@mail.gmail.com>
 <CAGxFJbQX9ShKBm05SG9rLihto-uvvsg1fEiB9c8d4jjfB4HXTw@mail.gmail.com>
 <4EFC5F04-0CAD-4FCE-B4A1-0804408428E1@dcn.davis.ca.us>
Message-ID: <294F2090-7EB0-4E6A-A2F2-EA7AE6FE110B@dcn.davis.ca.us>

Also, R6 is based on R environments... you can access the methods and fields like S3 (eff$field) and you can list what methods and fields the object has (ls(envir=eff)).

On March 17, 2020 3:13:22 PM PDT, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>OP may find the help page [1] informative as to which fields are which.
>I have never used the imp package. Note that the DESCRIPTION file
>indicates that this package uses the R6 object system rather than the
>more typical S3 or S4.
>
>[1] https://rdrr.io/cran/iml/man/FeatureEffect.html
>
>On March 17, 2020 12:26:33 PM PDT, Bert Gunter <bgunter.4567 at gmail.com>
>wrote:
>>that is, read ?str carefully.
>>
>>data structures are fundamental to any programming language, so if you
>>really aren't getting it, that's a signal that you need to spend some
>>time
>>with R tutorials. The R language Definition manual is a more
>>comprehensive
>>but of course more difficult resource to learn about such matters. I
>>find
>>it readable, however. Others may not.
>>
>>Bert Gunter
>>
>>"The trouble with having an open mind is that people keep coming along
>>and
>>sticking things into it."
>>-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>
>>
>>On Tue, Mar 17, 2020 at 12:22 PM Bert Gunter <bgunter.4567 at gmail.com>
>>wrote:
>>
>>> ?str
>>>
>>> Bert Gunter
>>>
>>> "The trouble with having an open mind is that people keep coming
>>along and
>>> sticking things into it."
>>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>>
>>>
>>> On Tue, Mar 17, 2020 at 12:19 PM Sparks, John <jspark4 at uic.edu>
>>wrote:
>>>
>>>> Hi R-Helpers,
>>>>
>>>> I have recently started working with the iml package (Interpretable
>>>> Machine Learning)  and its associated material, which I generally
>>find very
>>>> helpful.
>>>>
>>>> I want to recover some values out of the FeatureEffect Object
>>created by
>>>> this library, but the form of the object is completely foreign to
>>me.
>>>>
>>>> As a reproducible example:
>>>>
>>>>
>>>> set.seed(42)?
>>>> library("iml")?
>>>> library("randomForest")?
>>>> data("Boston", package  = "MASS")?
>>>> rf = randomForest(medv ~ ., data = Boston, ntree = 50)?
>>>> ?
>>>> X = Boston[which(names(Boston) != "medv")]?
>>>> predictor = Predictor$new(rf, data = X, y = Boston$medv)?
>>>> imp = FeatureImp$new(predictor, loss = "mae")?
>>>> eff = FeatureEffect$new(predictor, feature = "rm") ?
>>>> eff
>>>>
>>>>
>>>> Interpretation method:  FeatureEffect
>>>> features: rm[numerical]
>>>> grid size: 20
>>>>
>>>> Analysed predictor:
>>>> Prediction task: unknown
>>>>
>>>>
>>>> Analysed data:
>>>> Sampling from data.frame with 506 rows and 13 columns.
>>>>
>>>> Head of results:
>>>>        .ale .type    rm
>>>> 1 -2.150574   ale 3.561
>>>> 2 -2.610528   ale 5.304
>>>> 3 -2.338677   ale 5.593
>>>> 4 -2.265673   ale 5.709
>>>> 5 -2.142912   ale 5.837
>>>> 6 -2.085899   ale 5.885
>>>>
>>>> How can I refer to and get ahold of the table of 6 records above?
>>>>
>>>> I tried str(eff) and class(eff), but I am not familiar with the
>>structure
>>>> of the object(s).
>>>>
>>>> Would someone please tell me how to get inside the eff object, or
>>point
>>>> me to a reference as to what the class or structure of the object
>>is?
>>>>
>>>> Thanks.
>>>> --John Sparks
>>>>
>>>>         [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>
>>
>>	[[alternative HTML version deleted]]
>>
>>______________________________________________
>>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>https://stat.ethz.ch/mailman/listinfo/r-help
>>PLEASE do read the posting guide
>>http://www.R-project.org/posting-guide.html
>>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From pd@|gd @end|ng |rom gm@||@com  Wed Mar 18 09:44:15 2020
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Wed, 18 Mar 2020 09:44:15 +0100
Subject: [R] 
 Code seems OK (no warnings, no error messages) but no results
In-Reply-To: <1472460689.2878165.1584392912015@mail.yahoo.com>
References: <1472460689.2878165.1584392912015.ref@mail.yahoo.com>
 <1472460689.2878165.1584392912015@mail.yahoo.com>
Message-ID: <C04F1C82-3CC8-4339-B5D3-39BFE429457E@gmail.com>


The double curlies in

> my.experiment <- function() {{

look suspicious.

-pd

> On 16 Mar 2020, at 22:08 , varin sacha via R-help <r-help at r-project.org> wrote:
> 
> Good afternoon,
> 
> Here below my reproducible R code. I don't get any results. I am looking for MSE_fastMM value and the bootstrap CIs around MSE_fastMM value. How can I finish/correct my R code to get the results ?
> Many thanks for your help.
> 
> ####################
> install.packages( "robustbase",dependencies=TRUE )
> install.packages( "boot",dependencies=TRUE )
> library(boot)
> library(robustbase)
> 
> my.experiment <- function() {{
> 
> n<-2000
> b<-runif(n, 0, 5)
> z <- rnorm(n, 2, 3)
> a <- runif(n, 0, 5)
> 
> y_model<- 0.1*b - 0.5 * z - a + 10
> y_obs <- y_model +c( rnorm(n*0.9, 0, 0.1), rnorm(n*0.1, 0, 0.5) )
> 
> fastMM <- lmrob( y_obs ~ b+z+a)
> MSE_fastMM<-mean((fastMM$fitted.values - y_model)^2)
> 
> return( c(MSE_fastMM) )
> 
> }
> 
> my.data = t(replicate( 50, my.experiment() ))
> colnames(my.data) <- c("MSE_fastMM")
> summary(my.data)
> 
> data <- data.frame(a, z, b, y_obs)
> boot.ci.type <- c("norm","basic", "perc")
> 
> MSE_fastMM <- function(data,i) {
>   boot.MM <- lmrob(y_obs~b+z+a,data=data[i,])
>   mean(boot.MM$residuals^2)
> }
> 
> bootResults_MM <-boot(data=data, statistic=MSE_fastMM, R=100)
> boot.ci(bootResults_MM, type = boot.ci.type)
> }
> ###############################
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From m||uj|@b @end|ng |rom gm@||@com  Wed Mar 18 13:36:52 2020
From: m||uj|@b @end|ng |rom gm@||@com (Miluji Sb)
Date: Wed, 18 Mar 2020 13:36:52 +0100
Subject: [R] Extract NASA VIIRS data in R
Message-ID: <CAMLwc7MjdXvqxcwcZzbU4U27RNALH8+zcQOQvK4bcEu3nDiyWg@mail.gmail.com>

Dear all,

Hope everyone is keeping safe.

I am trying to extract/read VIIRS nighttime lights data but the output
seems rather strange.

I have uploaded the file here
<https://drive.google.com/open?id=1zpqXJ8AlEcnk6ApRb75tfQc4-Y8AfK5h> so as
not exceed the size limit of the email.

## Code ##
library(ncdf4)
library(rgdal)

netcdf_file <- c("VNP02DNB_NRT.A2020069.1048.001.nc
<http://vnp02dnb_nrt.a2020069.1048.001.nc/>")
nl <- brick(netcdf_file, lvar=0, values=TRUE,
varname="observation_data/DNB_observations")

## Detail ##
class      : RasterLayer
dimensions : 3232, 4064, 13134848  (nrow, ncol, ncell)
resolution : 1, 1  (x, y)
extent     : 0.5, 4064.5, 0.5, 3232.5  (xmin, xmax, ymin, ymax)
crs        : NA
source     : C:/Users/shour/Desktop/VNP02DNB_NRT.A2020069.1048.001.nc
<http://vnp02dnb_nrt.a2020069.1048.001.nc/>
names      : DNB.observations.at.pixel.locations
zvar       : observation_data/DNB_observations

The spatial resolution is supposed to be 750m but this shows 1?. What am I
doing wrong? Any help will be greatly appreciated. Thank you.

Cross-posted in R sig-geo but no reply - apologies.

Sincerely,

Millu

	[[alternative HTML version deleted]]


From eehneehn @end|ng |rom gm@||@com  Tue Mar 17 23:20:22 2020
From: eehneehn @end|ng |rom gm@||@com (olivia mah)
Date: Tue, 17 Mar 2020 15:20:22 -0700
Subject: [R] post new question
Message-ID: <CAKOyZQ=mVL5Ecb7sWHVwkwSZgmpGh5n0DgA4+1j9cHsgu+3sYw@mail.gmail.com>

Hi,

I am interested in running sensitivity analysis (variance-based). But
instead of running Monte Carlo simulations in R, I already have my sample
data in two tables.

So how do I run Sobol on my own data then? Does that mean that the model =
null? And then to use tell()? I cannot find any examples online to follow.
I would appreciate it if some one can point me to an example like this in R.

Many thanks,

om

	[[alternative HTML version deleted]]


From Chr|@@W||cox @end|ng |rom c@|ro@@u  Wed Mar 18 08:44:53 2020
From: Chr|@@W||cox @end|ng |rom c@|ro@@u (Wilcox, Chris (O&A, Hobart))
Date: Wed, 18 Mar 2020 07:44:53 +0000
Subject: [R] FW: problem with markov random field smooths in mgcv
Message-ID: <D782BFE1-F78B-47E5-B1B7-838497B45381@csiro.au>

Hi all,
    
    I am trying to fit a model with a markov random field smooth in mgcv.  I am having some trouble with getting it to run, and in particular I am getting the message 
    
    Error in initial.sp(w * x, S, off) : S[[1]] matrix is not +ve definite.
    
    After reading everything I could find on mrf, it sounds like there was a bug that was brought up with Simon Wood in 2012, due to differences between windows and linux, with the linus machine stopping due to this error, while windows was not.  I have not been able to find much else on it.  Any suggestions would be much appreciated.
    
    There is reproducible code below.
    
    Thanks 
    
    Chris
    
    
    library(mgcv)
    
    #create data
    Country <- as.factor(c("Australia","Australia","Australia","Australia","Australia","Australia","Bangladesh","Bangladesh","Bangladesh",
    "Bangladesh","Bangladesh","Bangladesh","Cambodia","Cambodia","Cambodia","Cambodia","Cambodia","Cambodia",
    "China","China","China","China","China","China","East Timor","East Timor","East Timor",
    "East Timor","East Timor","East Timor","HighSeas1","HighSeas1","HighSeas1","HighSeas1","HighSeas1","HighSeas1",
    "HighSeas2","HighSeas2","HighSeas2","HighSeas2","HighSeas2","HighSeas2","China","China","China","China","China","China",
    "India","India","India","India","India","India","Indonesia","Indonesia","Indonesia","Indonesia","Indonesia","Indonesia",
    "Malaysia","Malaysia","Malaysia","Malaysia","Malaysia","Malaysia","Myanmar","Myanmar","Myanmar","Myanmar","Myanmar",
    "Myanmar","Philippines","Philippines","Philippines","Philippines","Philippines","Philippines","South Korea","South Korea",
    "South Korea","South Korea","South Korea","South Korea","China","China","China","China","China","China",
    "Sri Lanka","Sri Lanka","Sri Lanka","Sri Lanka","Sri Lanka","Sri Lanka","Taiwan","Taiwan","Taiwan","Taiwan",
    "Taiwan","Taiwan","Thailand","Thailand","Thailand","Thailand","Thailand","Thailand","Vietnam","Vietnam","Vietnam","Vietnam",
    "Vietnam","Vietnam"))
    
    Count <- c(0,0,3,5,1,5,0,0,0,0,0,1,0,0,0,0,0,3,0,0,2,1,0,6,0,0,0,1,0,0,0,1,0,0,0,0
    ,0,0,20,0,1,0,0,0,0,0,0,2,0,0,6,3,3,10,1,1,18,11,8,11,0,1,2,2,1,14,0,0,0,1,0,0
    ,0,0,4,3,9,16,0,0,3,0,0,1,0,0,1,0,0,0,0,0,33,18,8,16,0,0,0,0,0,2,0,1,14,6,8,2
    ,0,0,0,0,1,1)
    
    Data <- data.frame(Count,Country)
    
    #create neighbour matrix
    NB <- list()
    NB$'East Timor' <- c(1,2,15)
    NB$Australia <- c(1,2,15)
    NB$'Sri Lanka' <-c(3,12,16)
    NB$Bangladesh <-c(4,12,13,16)
    NB$Philippines <- c(5,6,11,14,15,17)
    NB$Taiwan <- c(5,6,11)
    NB$Thailand <- c(7,8,10,12,13,14,15)
    NB$Vietnam <- c(7,8,10,11,14,15)
    NB$`South Korea` <- c(9,11)
    NB$Cambodia <- c(7,8,10)
    NB$China <- c(5,6,8,9,11,14)
    NB$India <- c(3,4,7,12,13,15,16)
    NB$Myanmar <- c(4,7,12,13,16)
    NB$Malaysia <- c(5,7,8,11,14,15)
    NB$Indonesia <- c(1,2,5,7,8,12,14,15)
    NB$HighSeas2 <- c(3,4,12,13,16)
    NB$HighSeas1 <- c(5,17)
    
    #check levels and names match
    all.equal(sort(names(NB)), sort(levels(Data$Country)))
    
    #try fitting GAM
    m1 <- gam(Data$Count ~ s(Data$Country, bs = 'mrf', xt = list(nb = NB)))
    
    


From pt|t_b|eu @end|ng |rom y@hoo@|r  Wed Mar 18 15:10:47 2020
From: pt|t_b|eu @end|ng |rom y@hoo@|r (lionel sicot)
Date: Wed, 18 Mar 2020 14:10:47 +0000 (UTC)
Subject: [R] How to evaluate impact of factors on parameters
References: <2011100850.576017.1584540647995.ref@mail.yahoo.com>
Message-ID: <2011100850.576017.1584540647995@mail.yahoo.com>

Hello,
One of my colleagues sent me a csv file with 12 columns and a lot of rows. Column1 to Column10 are factors with 2 to 6 levels. Column11 and Column12 are experimental results.I'm a bit lost with all these data.
I would like- to determine which factors have the most impact, and in which way, on Column10 (which has to be as high as possible) while Column 11, at the same time, has to be as low as possible (I hope it is clear for at least one of you ...).- to find a nice way to plot trends as there are several factors.

Below is a small data.frame from the SixSigma package (4 columns of factors and 2 columns of values). I don't know if it can help you to show me how to "play" with my data.If not, a package name or a tutorial can also be hepful.
Thanks in advance,Ptit Bleu.
df_test<-read.table(text="pc.col pc.filler pc.batch pc.op pc.volume pc.densityC 1 1 A 16.7533110462178 1.25341925113923C 2 1 B 18.0143546656987 1.11243453179479C 3 1 C 15.6448655396281 1.14110454507519C 1 1 D 18.0281678426422 1.09177192905336C 2 2 A 13.7831255488576 1.1465474843639C 3 2 B 16.758396178001 1.12333920013556C 1 2 C 14.6938147409883 1.34554594406146C 2 2 D 15.1974804312962 1.18442400447752C 3 3 A 14.2077591655389 1.45756680703941C 1 3 B 15.9579675459773 1.18602487934004C 2 3 C 18.1500426178447 1.27641549258776C 3 3 D 14.2297691617968 1.28052785172529B 1 4 A 16.8646535945654 1.30119623444795B 2 4 B 14.2798441018389 1.11228530554194B 3 4 C 16.1341256681412 1.27060268503477B 1 4 D 15.9241734353476 1.34131613229472B 2 5 A 16.8583005443759 1.19909272287678B 3 5 B 16.3449003481023 1.19954395487512B 1 5 C 15.4175473098922 1.54100836814473B 2 5 D 16.7861703759254 1.31241568978863B 3 6 A 15.3079007135867 1.14210653222791B 1 6 B 14.8169564636873 1.21694093094929B 2 6 C 17.2688507060631 1.2603211001675B 3 6 D 15.6874484539888 1.32986554107345", header=T)


	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Wed Mar 18 17:40:44 2020
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Wed, 18 Mar 2020 09:40:44 -0700
Subject: [R] FW: problem with markov random field smooths in mgcv
In-Reply-To: <D782BFE1-F78B-47E5-B1B7-838497B45381@csiro.au>
References: <D782BFE1-F78B-47E5-B1B7-838497B45381@csiro.au>
Message-ID: <2c513086-6cce-0d16-c9d0-51eff02889b5@comcast.net>


On 3/18/20 12:44 AM, Wilcox, Chris (O&A, Hobart) wrote:
> Hi all,
>      
>      I am trying to fit a model with a markov random field smooth in mgcv.  I am having some trouble with getting it to run, and in particular I am getting the message
>      
>      Error in initial.sp(w * x, S, off) : S[[1]] matrix is not +ve definite.
>      
>      After reading everything I could find on mrf, it sounds like there was a bug that was brought up with Simon Wood in 2012, due to differences between windows and linux, with the linus machine stopping due to this error, while windows was not.  I have not been able to find much else on it.  Any suggestions would be much appreciated.
>      
>      There is reproducible code below.
>      
>      Thanks
>      
>      Chris
>      
>      
>      library(mgcv)
>      
>      #create data
>      Country <- as.factor(c("Australia","Australia","Australia","Australia","Australia","Australia","Bangladesh","Bangladesh","Bangladesh",
>      "Bangladesh","Bangladesh","Bangladesh","Cambodia","Cambodia","Cambodia","Cambodia","Cambodia","Cambodia",
>      "China","China","China","China","China","China","East Timor","East Timor","East Timor",
>      "East Timor","East Timor","East Timor","HighSeas1","HighSeas1","HighSeas1","HighSeas1","HighSeas1","HighSeas1",
>      "HighSeas2","HighSeas2","HighSeas2","HighSeas2","HighSeas2","HighSeas2","China","China","China","China","China","China",
>      "India","India","India","India","India","India","Indonesia","Indonesia","Indonesia","Indonesia","Indonesia","Indonesia",
>      "Malaysia","Malaysia","Malaysia","Malaysia","Malaysia","Malaysia","Myanmar","Myanmar","Myanmar","Myanmar","Myanmar",
>      "Myanmar","Philippines","Philippines","Philippines","Philippines","Philippines","Philippines","South Korea","South Korea",
>      "South Korea","South Korea","South Korea","South Korea","China","China","China","China","China","China",
>      "Sri Lanka","Sri Lanka","Sri Lanka","Sri Lanka","Sri Lanka","Sri Lanka","Taiwan","Taiwan","Taiwan","Taiwan",
>      "Taiwan","Taiwan","Thailand","Thailand","Thailand","Thailand","Thailand","Thailand","Vietnam","Vietnam","Vietnam","Vietnam",
>      "Vietnam","Vietnam"))
>      
>      Count <- c(0,0,3,5,1,5,0,0,0,0,0,1,0,0,0,0,0,3,0,0,2,1,0,6,0,0,0,1,0,0,0,1,0,0,0,0
>      ,0,0,20,0,1,0,0,0,0,0,0,2,0,0,6,3,3,10,1,1,18,11,8,11,0,1,2,2,1,14,0,0,0,1,0,0
>      ,0,0,4,3,9,16,0,0,3,0,0,1,0,0,1,0,0,0,0,0,33,18,8,16,0,0,0,0,0,2,0,1,14,6,8,2
>      ,0,0,0,0,1,1)
>      
>      Data <- data.frame(Count,Country)


I'm not seeing any spatial data being defined, so I'm puzzled by the 
expectation that this is yet a markov random field problem. You appear 
to be following the last part of the example code in 
?smooth.construct.mrf.smooth.spec {mgcv} without constructing your data 
set to match the structure of the `columb` example dataset.

str(columb)

#------------------

'data.frame': 49 obs. of? 8 variables:
 ?$ area????? : num? 0.3094 0.2593 0.1925 0.0838 0.4889 ...
 ?$ home.value: num? 80.5 44.6 26.4 33.2 23.2 ...
 ?$ income??? : num? 19.53 21.23 15.96 4.48 11.25 ...
 ?$ crime???? : num? 15.7 18.8 30.6 32.4 50.7 ...
 ?$ open.space: num? 2.851 5.297 4.535 0.394 0.406 ...
 ?$ district? : Factor w/ 49 levels "0","1","2","3",..: 1 2 3 4 5 6 7 8 
9 10 ...
 ?$ x???????? : num? 8.83 8.33 9.01 8.46 9.01 ...
 ?$ y???????? : num? 14.4 14 13.8 13.7 13.3 ...


You are also committing a common R-beginner error in accessing columns 
of a data object directly in a formula while failing to use a data 
argument for a regression call.

-- 

David.

>      
>      #create neighbour matrix
>      NB <- list()
>      NB$'East Timor' <- c(1,2,15)
>      NB$Australia <- c(1,2,15)
>      NB$'Sri Lanka' <-c(3,12,16)
>      NB$Bangladesh <-c(4,12,13,16)
>      NB$Philippines <- c(5,6,11,14,15,17)
>      NB$Taiwan <- c(5,6,11)
>      NB$Thailand <- c(7,8,10,12,13,14,15)
>      NB$Vietnam <- c(7,8,10,11,14,15)
>      NB$`South Korea` <- c(9,11)
>      NB$Cambodia <- c(7,8,10)
>      NB$China <- c(5,6,8,9,11,14)
>      NB$India <- c(3,4,7,12,13,15,16)
>      NB$Myanmar <- c(4,7,12,13,16)
>      NB$Malaysia <- c(5,7,8,11,14,15)
>      NB$Indonesia <- c(1,2,5,7,8,12,14,15)
>      NB$HighSeas2 <- c(3,4,12,13,16)
>      NB$HighSeas1 <- c(5,17)
>      
>      #check levels and names match
>      all.equal(sort(names(NB)), sort(levels(Data$Country)))
>      
>      #try fitting GAM
>      m1 <- gam(Data$Count ~ s(Data$Country, bs = 'mrf', xt = list(nb = NB)))
>      
>      
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From rmh @end|ng |rom temp|e@edu  Wed Mar 18 20:04:24 2020
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Wed, 18 Mar 2020 15:04:24 -0400
Subject: [R] How to evaluate impact of factors on parameters
In-Reply-To: <2011100850.576017.1584540647995@mail.yahoo.com>
References: <2011100850.576017.1584540647995.ref@mail.yahoo.com>
 <2011100850.576017.1584540647995@mail.yahoo.com>
Message-ID: <CAGx1TMDi_=++SnOz9boTP3djFNR_mCQ9cNgp4oHXaEpvo97dTA@mail.gmail.com>

Unfortunately, sending HTML mail scrambled the correct use of dput.
Please use "plain text mode" for all R mailing lists.

I unscrambled it here

df_test <-
structure(list(pc.col = structure(c(2L, 2L, 2L, 2L, 2L, 2L, 2L,
2L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
1L), .Label = c("B", "C"), class = "factor"), pc.filler = structure(c(1L,
2L, 3L, 1L, 2L, 3L, 1L, 2L, 3L, 1L, 2L, 3L, 1L, 2L, 3L, 1L, 2L,
3L, 1L, 2L, 3L, 1L, 2L, 3L), .Label = c("1", "2", "3"), class = "factor"),
    pc.batch = structure(c(1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 3L,
    3L, 3L, 3L, 4L, 4L, 4L, 4L, 5L, 5L, 5L, 5L, 6L, 6L, 6L, 6L
    ), .Label = c("1", "2", "3", "4", "5", "6"), class = "factor"),
    pc.op = structure(c(1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L, 1L, 2L,
    3L, 4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L), .Label = c("A",
    "B", "C", "D"), class = "factor"), pc.volume = c(16.7533110462178,
    18.0143546656987, 15.6448655396281, 18.0281678426422, 13.7831255488576,
    16.758396178001, 14.6938147409883, 15.1974804312962, 14.2077591655389,
    15.9579675459773, 18.1500426178447, 14.2297691617968, 16.8646535945654,
    14.2798441018389, 16.1341256681412, 15.9241734353476, 16.8583005443759,
    16.3449003481023, 15.4175473098922, 16.7861703759254, 15.3079007135867,
    14.8169564636873, 17.2688507060631, 15.6874484539888), pc.density
= c(1.25341925113923,
    1.11243453179479, 1.14110454507519, 1.09177192905336, 1.1465474843639,
    1.12333920013556, 1.34554594406146, 1.18442400447752, 1.45756680703941,
    1.18602487934004, 1.27641549258776, 1.28052785172529, 1.30119623444795,
    1.11228530554194, 1.27060268503477, 1.34131613229472, 1.19909272287678,
    1.19954395487512, 1.54100836814473, 1.31241568978863, 1.14210653222791,
    1.21694093094929, 1.2603211001675, 1.32986554107345)), row.names = c(NA,
-24L), class = "data.frame")


Your factor structure 2x3x4x6=144 has 144 cells, but there are only 24
data points.
I am plotting both response variables against one factor at a time.

library(lattice)
?xyplot
bwplot(pc.volume + pc.density ~ pc.col + pc.filler + pc.batch + pc.op,
data=df_test, outer=TRUE)
bwplot(pc.volume + pc.density ~ pc.col, data=df_test, outer=TRUE)
bwplot(pc.volume + pc.density ~ pc.filler, data=df_test, outer=TRUE)
bwplot(pc.volume + pc.density ~ pc.batch, data=df_test, outer=TRUE)
bwplot(pc.volume + pc.density ~ pc.op, data=df_test, outer=TRUE)


More information about the experiment is needed before anything else
can be attempted.

Rich

On Wed, Mar 18, 2020 at 10:11 AM lionel sicot via R-help
<r-help at r-project.org> wrote:
>
> Hello,
> One of my colleagues sent me a csv file with 12 columns and a lot of rows. Column1 to Column10 are factors with 2 to 6 levels. Column11 and Column12 are experimental results.I'm a bit lost with all these data.
> I would like- to determine which factors have the most impact, and in which way, on Column10 (which has to be as high as possible) while Column 11, at the same time, has to be as low as possible (I hope it is clear for at least one of you ...).- to find a nice way to plot trends as there are several factors.
>
> Below is a small data.frame from the SixSigma package (4 columns of factors and 2 columns of values). I don't know if it can help you to show me how to "play" with my data.If not, a package name or a tutorial can also be hepful.
> Thanks in advance,Ptit Bleu.
> df_test<-read.table(text="pc.col pc.filler pc.batch pc.op pc.volume pc.densityC 1 1 A 16.7533110462178 1.25341925113923C 2 1 B 18.0143546656987 1.11243453179479C 3 1 C 15.6448655396281 1.14110454507519C 1 1 D 18.0281678426422 1.09177192905336C 2 2 A 13.7831255488576 1.1465474843639C 3 2 B 16.758396178001 1.12333920013556C 1 2 C 14.6938147409883 1.34554594406146C 2 2 D 15.1974804312962 1.18442400447752C 3 3 A 14.2077591655389 1.45756680703941C 1 3 B 15.9579675459773 1.18602487934004C 2 3 C 18.1500426178447 1.27641549258776C 3 3 D 14.2297691617968 1.28052785172529B 1 4 A 16.8646535945654 1.30119623444795B 2 4 B 14.2798441018389 1.11228530554194B 3 4 C 16.1341256681412 1.27060268503477B 1 4 D 15.9241734353476 1.34131613229472B 2 5 A 16.8583005443759 1.19909272287678B 3 5 B 16.3449003481023 1.19954395487512B 1 5 C 15.4175473098922 1.54100836814473B 2 5 D 16.7861703759254 1.31241568978863B 3 6 A 15.3079007135867 1.14210653222791B 1 6 B 14.8169564636873 1.21694093094929B 2 6 C 17.268850706
>  0631 1.2603211001675B 3 6 D 15.6874484539888 1.32986554107345", header=T)
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ycd|ng @end|ng |rom coh@org  Wed Mar 18 20:16:13 2020
From: ycd|ng @end|ng |rom coh@org (Yuan Chun Ding)
Date: Wed, 18 Mar 2020 19:16:13 +0000
Subject: [R] row combining 2972 files
Message-ID: <A86C6438FB909A409DDEF926277952B6113C9149@PPWEXCH2KX14.coh.org>

Hi R users,

I generated 2972 list files in R, each list includes four data frame files , file names for those list file are VNTR13576, VNTR14689, etc.  the second data frame in each list has the same 11 column names, but different number of rows.

I can combine two dataframes by
list2972 <-ls(pat="VNTR.*.")
test <-rbind(get(list2972[16])[[2]],get(list2972[166])[[2]] )

I tried to combine all 2972 data frames from those 2972 list files using do.call or lapply function, but not successful.

Can you help me?

Thank you very much!

Ding

----------------------------------------------------------------------
------------------------------------------------------------
-SECURITY/CONFIDENTIALITY WARNING-  

This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to receive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)


From bgunter@4567 @end|ng |rom gm@||@com  Wed Mar 18 21:02:24 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 18 Mar 2020 13:02:24 -0700
Subject: [R] row combining 2972 files
In-Reply-To: <A86C6438FB909A409DDEF926277952B6113C9149@PPWEXCH2KX14.coh.org>
References: <A86C6438FB909A409DDEF926277952B6113C9149@PPWEXCH2KX14.coh.org>
Message-ID: <CAGxFJbSYg3pt_nE6y_qnWvxfKXtab2Y3N0iXM2iaqGgCqX83Og@mail.gmail.com>

Untested in the absence of example data, but I think

combined <- do.call(rbind, lapply(ls2972, function(x)get(x)[[2]]))

should do it.


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Mar 18, 2020 at 12:16 PM Yuan Chun Ding <ycding at coh.org> wrote:

> Hi R users,
>
> I generated 2972 list files in R, each list includes four data frame files
> , file names for those list file are VNTR13576, VNTR14689, etc.  the second
> data frame in each list has the same 11 column names, but different number
> of rows.
>
> I can combine two dataframes by
> list2972 <-ls(pat="VNTR.*.")
> test <-rbind(get(list2972[16])[[2]],get(list2972[166])[[2]] )
>
> I tried to combine all 2972 data frames from those 2972 list files using
> do.call or lapply function, but not successful.
>
> Can you help me?
>
> Thank you very much!
>
> Ding
>
> ----------------------------------------------------------------------
> ------------------------------------------------------------
> -SECURITY/CONFIDENTIALITY WARNING-
>
> This message and any attachments are intended solely for the individual or
> entity to which they are addressed. This communication may contain
> information that is privileged, confidential, or exempt from disclosure
> under applicable law (e.g., personal health information, research data,
> financial information). Because this e-mail has been sent without
> encryption, individuals other than the intended recipient may be able to
> view the information, forward it to others or tamper with the information
> without the knowledge or consent of the sender. If you are not the intended
> recipient, or the employee or person responsible for delivering the message
> to the intended recipient, any dissemination, distribution or copying of
> the communication is strictly prohibited. If you received the communication
> in error, please notify the sender immediately by replying to this message
> and deleting the message and any accompanying files from your system. If,
> due to the security risks, you do not wish to receive further
> communications via e-mail, please reply to this message and inform the
> sender that you do not wish to receive further e-mail from the sender.
> (LCP301)
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Wed Mar 18 22:21:31 2020
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Wed, 18 Mar 2020 21:21:31 +0000 (UTC)
Subject: [R] 
 Code seems OK (no warnings, no error messages) but no results
In-Reply-To: <C04F1C82-3CC8-4339-B5D3-39BFE429457E@gmail.com>
References: <1472460689.2878165.1584392912015.ref@mail.yahoo.com>
 <1472460689.2878165.1584392912015@mail.yahoo.com>
 <C04F1C82-3CC8-4339-B5D3-39BFE429457E@gmail.com>
Message-ID: <70321270.1048275.1584566491610@mail.yahoo.com>

Dear R Experts,

So I managed to get the first part of my R code to work with one error message but R still gives me the result I am looking for. Now I'm trying to calculate the bootstrap confidence interval around the "MSE_fastMM" value. 
The end of my code after mean(my.data) does not work (error messages). Any help for my code to work would be highly appreciated.

####################
install.packages( "robustbase",dependencies=TRUE )
install.packages( "boot",dependencies=TRUE )
library(boot)
library(robustbase)

my.experiment <- function() {

n<-2000
b<-runif(n, 0, 5)
z <- rnorm(n, 2, 3)
a <- runif(n, 0, 5)

y_model<- 0.1*b - 0.5 * z - a + 10
y_obs <- y_model +c( rnorm(n*0.9, 0, 0.1), rnorm(n*0.1, 0, 0.5) )

fastMM <- lmrob( y_obs ~ b+z+a)

MSE_fastMM<-mean((fastMM$fitted.values - y_model)^2)

return( c(MSE_fastMM) )

}

my.data = t(replicate( 50, my.experiment() ))
colnames(my.data) <- c("MSE_fastMM")
mean(my.data)


###BOOTSTRAP CIs###

data <- data.frame(a, z, b, y_obs)
boot.ci.type <- c("norm","basic", "perc")

MSE_fastMM <- function(data,i) {
? boot.MM <- lmrob(y_obs~b+z+a,data=data[i,])
? mean(boot.MM$residuals^2)
}

bootResults_MM <-boot(data=data, statistic=MSE_fastMM, R=100)
boot.ci(bootResults_MM, type = boot.ci.type)

}

####################





Le mercredi 18 mars 2020 ? 09:44:19 UTC+1, peter dalgaard <pdalgd at gmail.com> a ?crit : 






The double curlies in

> my.experiment <- function() {{

look suspicious.

-pd

> On 16 Mar 2020, at 22:08 , varin sacha via R-help <r-help at r-project.org> wrote:
> 
> Good afternoon,
> 
> Here below my reproducible R code. I don't get any results. I am looking for MSE_fastMM value and the bootstrap CIs around MSE_fastMM value. How can I finish/correct my R code to get the results ?
> Many thanks for your help.
> 
> ####################
> install.packages( "robustbase",dependencies=TRUE )
> install.packages( "boot",dependencies=TRUE )
> library(boot)
> library(robustbase)
> 
> my.experiment <- function() {{
> 
> n<-2000
> b<-runif(n, 0, 5)
> z <- rnorm(n, 2, 3)
> a <- runif(n, 0, 5)
> 
> y_model<- 0.1*b - 0.5 * z - a + 10
> y_obs <- y_model +c( rnorm(n*0.9, 0, 0.1), rnorm(n*0.1, 0, 0.5) )
> 
> fastMM <- lmrob( y_obs ~ b+z+a)
> MSE_fastMM<-mean((fastMM$fitted.values - y_model)^2)
> 
> return( c(MSE_fastMM) )
> 
> }
> 
> my.data = t(replicate( 50, my.experiment() ))
> colnames(my.data) <- c("MSE_fastMM")
> summary(my.data)
> 
> data <- data.frame(a, z, b, y_obs)
> boot.ci.type <- c("norm","basic", "perc")
> 
> MSE_fastMM <- function(data,i) {
>? boot.MM <- lmrob(y_obs~b+z+a,data=data[i,])
>? mean(boot.MM$residuals^2)
> }
> 
> bootResults_MM <-boot(data=data, statistic=MSE_fastMM, R=100)
> boot.ci(bootResults_MM, type = boot.ci.type)
> }
> ###############################
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk? Priv: PDalgd at gmail.com


From he||o@@dero@@r|o @end|ng |rom gm@||@com  Wed Mar 18 22:25:17 2020
From: he||o@@dero@@r|o @end|ng |rom gm@||@com (helios.derosario)
Date: Wed, 18 Mar 2020 22:25:17 +0100
Subject: [R] Model frame of lme objects
Message-ID: <8f33e718-1b45-6ecf-e6fc-8bae65cf292f@gmail.com>

 From a linear model like `mod <- lm(y ~ x)`, I can obtain a data frame 
with all the variables involved in the model (in that case, `y` and `x`).

How could I get a similar data frame from an lme object, e.g. fitted as 
`mod <- lme(y ~ x, random=~1|g)` ?


I know that `getData` might work if the variables come from a data 
frame, but the result is `NULL` if it is not like that. And if there is 
a transformation (e.g. `lme(log(y)~x, ...)`), the result of `getData` 
gives the original, untransformed variable.


Kind regards

Helios De Rosario


From toth@dene@ @end|ng |rom kogentum@hu  Wed Mar 18 22:35:13 2020
From: toth@dene@ @end|ng |rom kogentum@hu (=?UTF-8?B?RMOpbmVzIFTDs3Ro?=)
Date: Wed, 18 Mar 2020 22:35:13 +0100
Subject: [R] row combining 2972 files
In-Reply-To: <CAGxFJbSYg3pt_nE6y_qnWvxfKXtab2Y3N0iXM2iaqGgCqX83Og@mail.gmail.com>
References: <A86C6438FB909A409DDEF926277952B6113C9149@PPWEXCH2KX14.coh.org>
 <CAGxFJbSYg3pt_nE6y_qnWvxfKXtab2Y3N0iXM2iaqGgCqX83Og@mail.gmail.com>
Message-ID: <a5709e0b-0000-13e8-f056-604f7a1bebd7@kogentum.hu>



On 3/18/20 9:02 PM, Bert Gunter wrote:
> Untested in the absence of example data, but I think
> 
> combined <- do.call(rbind, lapply(ls2972, function(x)get(x)[[2]]))

Or if you have largish data, use rbindlist() from the data.table package:

combined <- data.table::rbindlist(
   lapply(ls2972, function(x) get(x)[[2]])
)

However, it seems you are on the wrong track when you create 2972 lists 
in your workspace. (Note: there are no "list files" objects in R. Lists 
are objects, not files.) You should have one list of 2972 lists each 
having 4 data.frames.

E.g.:

x <- list(
   list(
     data.frame(),
     data.frame(x = 1),
     data.frame(),
     data.frame()
   ),
   list(
     data.frame(),
     data.frame(x = 2),
     data.frame(),
     data.frame()
   ),
   list(
     data.frame(),
     data.frame(x = 3),
     data.frame(),
     data.frame()
   )
)
keep <- lapply(x, "[[", 2L)
combined <- data.table::rbindlist(keep)


HTH,
Denes


> 
> should do it.
> 
> 
> Bert Gunter
> 
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> 
> 
> On Wed, Mar 18, 2020 at 12:16 PM Yuan Chun Ding <ycding at coh.org> wrote:
> 
>> Hi R users,
>>
>> I generated 2972 list files in R, each list includes four data frame files
>> , file names for those list file are VNTR13576, VNTR14689, etc.  the second
>> data frame in each list has the same 11 column names, but different number
>> of rows.
>>
>> I can combine two dataframes by
>> list2972 <-ls(pat="VNTR.*.")
>> test <-rbind(get(list2972[16])[[2]],get(list2972[166])[[2]] )
>>
>> I tried to combine all 2972 data frames from those 2972 list files using
>> do.call or lapply function, but not successful.
>>
>> Can you help me?
>>
>> Thank you very much!
>>
>> Ding
>>
>> ----------------------------------------------------------------------
>> ------------------------------------------------------------
>> -SECURITY/CONFIDENTIALITY WARNING-
>>
>> This message and any attachments are intended solely for the individual or
>> entity to which they are addressed. This communication may contain
>> information that is privileged, confidential, or exempt from disclosure
>> under applicable law (e.g., personal health information, research data,
>> financial information). Because this e-mail has been sent without
>> encryption, individuals other than the intended recipient may be able to
>> view the information, forward it to others or tamper with the information
>> without the knowledge or consent of the sender. If you are not the intended
>> recipient, or the employee or person responsible for delivering the message
>> to the intended recipient, any dissemination, distribution or copying of
>> the communication is strictly prohibited. If you received the communication
>> in error, please notify the sender immediately by replying to this message
>> and deleting the message and any accompanying files from your system. If,
>> due to the security risks, you do not wish to receive further
>> communications via e-mail, please reply to this message and inform the
>> sender that you do not wish to receive further e-mail from the sender.
>> (LCP301)
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From ycd|ng @end|ng |rom coh@org  Wed Mar 18 22:32:39 2020
From: ycd|ng @end|ng |rom coh@org (Yuan Chun Ding)
Date: Wed, 18 Mar 2020 21:32:39 +0000
Subject: [R] row combining 2972 files
In-Reply-To: <CAGxFJbSYg3pt_nE6y_qnWvxfKXtab2Y3N0iXM2iaqGgCqX83Og@mail.gmail.com>
References: <A86C6438FB909A409DDEF926277952B6113C9149@PPWEXCH2KX14.coh.org>,
 <CAGxFJbSYg3pt_nE6y_qnWvxfKXtab2Y3N0iXM2iaqGgCqX83Og@mail.gmail.com>
Message-ID: <A86C6438FB909A409DDEF926277952B6113C919C@PPWEXCH2KX14.coh.org>

Hi Bert,

Yes,  your code works very well.

Thank you very much!!

Ding
________________________________
From: Bert Gunter [bgunter.4567 at gmail.com]
Sent: Wednesday, March 18, 2020 1:02 PM
To: Yuan Chun Ding
Cc: r-help mailing list
Subject: Re: [R] row combining 2972 files

Untested in the absence of example data, but I think

combined <- do.call(rbind, lapply(ls2972, function(x)get(x)[[2]]))

should do it.


Bert Gunter

"The trouble with having an open mind is that people keep coming along and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Mar 18, 2020 at 12:16 PM Yuan Chun Ding <ycding at coh.org<mailto:ycding at coh.org>> wrote:
Hi R users,

I generated 2972 list files in R, each list includes four data frame files , file names for those list file are VNTR13576, VNTR14689, etc.  the second data frame in each list has the same 11 column names, but different number of rows.

I can combine two dataframes by
list2972 <-ls(pat="VNTR.*.")
test <-rbind(get(list2972[16])[[2]],get(list2972[166])[[2]] )

I tried to combine all 2972 data frames from those 2972 list files using do.call or lapply function, but not successful.

Can you help me?

Thank you very much!

Ding

----------------------------------------------------------------------
------------------------------------------------------------
-SECURITY/CONFIDENTIALITY WARNING-

This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to receive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help<https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!Fou38LsQmgU!-MrWypeV7S1sEj7fnJ3nOamkSI6MLScnz3NUdET4p02diT24hNEbAJlcf1mG$>
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html<https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!Fou38LsQmgU!-MrWypeV7S1sEj7fnJ3nOamkSI6MLScnz3NUdET4p02diT24hNEbADIrZyE0$>
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From ycd|ng @end|ng |rom coh@org  Wed Mar 18 23:29:24 2020
From: ycd|ng @end|ng |rom coh@org (Yuan Chun Ding)
Date: Wed, 18 Mar 2020 22:29:24 +0000
Subject: [R] row combining 2972 files
In-Reply-To: <a5709e0b-0000-13e8-f056-604f7a1bebd7@kogentum.hu>
References: <A86C6438FB909A409DDEF926277952B6113C9149@PPWEXCH2KX14.coh.org>
 <CAGxFJbSYg3pt_nE6y_qnWvxfKXtab2Y3N0iXM2iaqGgCqX83Og@mail.gmail.com>,
 <a5709e0b-0000-13e8-f056-604f7a1bebd7@kogentum.hu>
Message-ID: <A86C6438FB909A409DDEF926277952B6113C91DC@PPWEXCH2KX14.coh.org>

Hi Denes,

thank you very much for your mesasge!!
I would like to learn from you.

We generated preliminary data for a new project, so performing explorative analysis. since only sample size is relative small, I probably will both Cox regression and firth's Cox regresion.
there are 2972 markers; for each marker, there are different ways to convert multi-allele genotype data to bi-allele genotype data based on allele distribution pattern in each marker.  
 
for each converted bi-allele variable, I ran Cox model in two different ways ( categorical variable, and numeric  variable)

since distribution patterns are different for different markers, I tested them and added some restrictions using if else condition. I  have wide computer screen, one line of code is long.

how do you arrange the data analysis process if you perform those analysis?

Thank you,

Ding

#dat file includes multi-allele genotype data for 2972 markers in row and 187 individuals in columns
for (i in 1:nrow(dat)){
  tem <- as.data.frame(t(dat[i,,drop=F])) #subset data for one of 2972 markers
  names(tem)<-"V1"
  tem <- tem[which(tem$V1!=""),,drop=F]
  tem1 <-separate(tem, col=V1, into=c("m1","m2"), convert = T)
  row.names(tem1) <-substr(row.names(tem1), 17, nchar(row.names(tem1))-7)
  tem2 <-tem1
  tem3 <-gather(tem2, marker, VNTR_repeats, m1:m2)
  tem4 <-as.data.frame(t(t(table(tem3$VNTR_repeats))))[,c(1,3)]
  tem4$Var1 <-as.numeric(as.character(tem4$Var1))
  tem4 <-tem4[order(tem4$Var1),]
  tem5 <-tem4[c(TRUE,diff(tem4$Freq)!=0), ]
  if(length(tem5$Freq)<=2) {tem6 <-tem4} else
    {tem6 <-tem5[which.maxs (tem5$Freq, include.endpoints=TRUE),]}
  
  if((tem6$Var1[1]==tem5$Var1[1]) & length(tem6$Var1)>1) tem6 <-tem6[-1,]
  
  c <-length(tem6$Var1) # for each marker, c different ways to convert multi-allele data into bi-allele data
  
#to convert multi-allele data into bi-allele data for one marker 
  for ( m in 1:c) {
    if(tem6$Var1[m]==tem5$Var1[1]) { tem7 <-tem2%>% 
      mutate(m3 = case_when(m1>tem6$Var1[m]~"L", m1<=tem6$Var1[m] ~"S"),
             m4 = case_when(m2>tem6$Var1[m]~"L", m2<=tem6$Var1[m] ~"S"))} else
  {tem7 <-tem2%>% mutate(m3 = case_when(m1>=tem6$Var1[m]~"L", m1<tem6$Var1[m] ~"S"),
                        m4 = case_when(m2>=tem6$Var1[m]~"L", m2<tem6$Var1[m] ~"S"))}
  cut_off <-paste(strsplit(as.character(row.names(dat)[i]),'_',fixed=TRUE)[[1]][1], "cutoff_repeat", tem6$Var1[m], sep="_")
  tem7[[cut_off]] <-paste(tem7$m3, tem7$m4, sep="_")
  tem7[[cut_off]] <-ifelse(tem7[[cut_off]] =="L_S", "S_L", tem7[[cut_off]])
  tem2 <-tem7
  }

#to merge phenotypic data and bi-allele data for Cox regression analysis
# treat bi-allele data as categorical data (factor)
  tem8 <-tem7[,-c(1:4),drop=F]
  row.names(tem8) <-row.names(tem1)
  tem9 <-merge(pheno, tem8, by.x="id", by.y=0)
  tem10 <- matrix(NA, nrow=c, ncol=11)

#Cox models for one marker ( c different categorical variables)  
  for (n in 1:c) {
    form=as.formula(paste("Surv(age, status) ~  ", factor(colnames(tem9)[n + 8])))
    res <- coxph(formula=form, data=tem9)
    s <- summary(res)
    if (length(table(tem9[[colnames(tem9)[n + 8]]])) ==3) tem10[n,] <- c(row.names(s[[8]])[1], s[[4]], s[[7]][1,5], s[[8]][1,1], s[[8]][1,3], s[[8]][1,4], row.names(s[[8]])[2], s[[7]][2,5], s[[8]][2,1], s[[8]][2,3], s[[8]][2,4])
    if (length(table(tem9[[colnames(tem9)[n + 8]]])) ==2) tem10[n,] <- c(row.names(s[[8]])[1], s[[4]], s[[7]][1,5], s[[8]][1,1], s[[8]][1,3], s[[8]][1,4], NA, NA, NA, NA, NA)
  }

  #tem10 contains Cox regression results
  tem10 <-as.data.frame(tem10)
  names(tem10)[1:11]<-c("genotype1", "N_sample","Pr1","HR1","HR_lower1" ,"HR_upper1", "genotype2", "Pr2","HR2","HR_lower2" ,"HR_upper2")
  
  # for the same marker, convert each categorical variable as numeric variables (0, 1, 2 copies of long alleles)
  if (ncol(tem8)==1) tem8$dup <-tem8[,1]
  tem11 <- as.data.frame(do.call(cbind, lapply(tem8[,1:ncol(tem8)], function(i) mgsub(pattern = c("S_S", "S_L","L_L"), replacement = c("0", "1","2"), i))))
  tem12 <- as.data.frame(do.call(cbind, lapply(tem11[,1:ncol(tem11)], function(i) as.numeric(as.character(i)))))
  row.names(tem12)<-row.names(tem8)
  colnames(tem12) <-paste(colnames(tem12),"numeric",sep="_")
  tem13 <-merge(pheno, tem12, by.x="id", by.y=0)
  
  tem14 <- matrix(NA, nrow=c, ncol=6)

  #Cox models for numberic variables
  for (p in 1:c) {
    form=as.formula(paste("Surv(age, status) ~  ", colnames(tem13)[p + 8]))
    res14 <- coxph(formula=form, data=tem13)
    s14 <- summary(res14)
    # Cox model results in tem14  
   tem14[p,] <- c(row.names(s14[[8]])[1], s14[[4]], s14[[7]][1,5], s14[[8]][1,1], s14[[8]][1,3], s14[[8]][1,4])
  }
  tem14 <-as.data.frame(tem14)
  names(tem14)[1:6]<-c("genotype", "N_sample","Pr","HR","HR_lower" ,"HR_upper")
  
  #put Cox model input data files (tem8 and tem12) and Cox model results (tem10 and tem14) into a list object
  #and assign marker id as file name for the list object
  assign(row.names(dat)[i], list(tem8,tem10, tem12, tem14))
}

list2972 <-ls(pat="VNTR.*.")

# to combine cox model input files and results 
dat.cat <- do.call(rbind, lapply(list2972, function(x)get(x)[1]))
res.cat <- do.call(rbind, lapply(list2972, function(x)get(x)[[2]]))
dat.num <-  do.call(rbind, lapply(list2972, function(x)get(x)[3]))
res.num <- do.call(rbind, lapply(list2972, function(x)get(x)[4]))
________________________________________
From: D?nes T?th [toth.denes at kogentum.hu]
Sent: Wednesday, March 18, 2020 2:35 PM
To: Bert Gunter; Yuan Chun Ding
Cc: r-help mailing list
Subject: Re: [R] row combining 2972 files

On 3/18/20 9:02 PM, Bert Gunter wrote:
> Untested in the absence of example data, but I think
>
> combined <- do.call(rbind, lapply(ls2972, function(x)get(x)[[2]]))

Or if you have largish data, use rbindlist() from the data.table package:

combined <- data.table::rbindlist(
   lapply(ls2972, function(x) get(x)[[2]])
)

However, it seems you are on the wrong track when you create 2972 lists
in your workspace. (Note: there are no "list files" objects in R. Lists
are objects, not files.) You should have one list of 2972 lists each
having 4 data.frames.

E.g.:

x <- list(
   list(
     data.frame(),
     data.frame(x = 1),
     data.frame(),
     data.frame()
   ),
   list(
     data.frame(),
     data.frame(x = 2),
     data.frame(),
     data.frame()
   ),
   list(
     data.frame(),
     data.frame(x = 3),
     data.frame(),
     data.frame()
   )
)
keep <- lapply(x, "[[", 2L)
combined <- data.table::rbindlist(keep)


HTH,
Denes


>
> should do it.
>
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Wed, Mar 18, 2020 at 12:16 PM Yuan Chun Ding <ycding at coh.org> wrote:
>
>> Hi R users,
>>
>> I generated 2972 list files in R, each list includes four data frame files
>> , file names for those list file are VNTR13576, VNTR14689, etc.  the second
>> data frame in each list has the same 11 column names, but different number
>> of rows.
>>
>> I can combine two dataframes by
>> list2972 <-ls(pat="VNTR.*.")
>> test <-rbind(get(list2972[16])[[2]],get(list2972[166])[[2]] )
>>
>> I tried to combine all 2972 data frames from those 2972 list files using
>> do.call or lapply function, but not successful.
>>
>> Can you help me?
>>
>> Thank you very much!
>>
>> Ding
>>
>> ----------------------------------------------------------------------
>> ------------------------------------------------------------
>> -SECURITY/CONFIDENTIALITY WARNING-
>>
>> This message and any attachments are intended solely for the individual or
>> entity to which they are addressed. This communication may contain
>> information that is privileged, confidential, or exempt from disclosure
>> under applicable law (e.g., personal health information, research data,
>> financial information). Because this e-mail has been sent without
>> encryption, individuals other than the intended recipient may be able to
>> view the information, forward it to others or tamper with the information
>> without the knowledge or consent of the sender. If you are not the intended
>> recipient, or the employee or person responsible for delivering the message
>> to the intended recipient, any dissemination, distribution or copying of
>> the communication is strictly prohibited. If you received the communication
>> in error, please notify the sender immediately by replying to this message
>> and deleting the message and any accompanying files from your system. If,
>> due to the security risks, you do not wish to receive further
>> communications via e-mail, please reply to this message and inform the
>> sender that you do not wish to receive further e-mail from the sender.
>> (LCP301)
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!Fou38LsQmgU!81csfRTX5GGrC7eTO0C1mv_eFQ7glT3yULsK-xiJfcvfjvY8d49Iiff6h_xX$
>> PLEASE do read the posting guide
>> https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!Fou38LsQmgU!81csfRTX5GGrC7eTO0C1mv_eFQ7glT3yULsK-xiJfcvfjvY8d49IiQj8zA2P$
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>       [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!Fou38LsQmgU!81csfRTX5GGrC7eTO0C1mv_eFQ7glT3yULsK-xiJfcvfjvY8d49Iiff6h_xX$
> PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!Fou38LsQmgU!81csfRTX5GGrC7eTO0C1mv_eFQ7glT3yULsK-xiJfcvfjvY8d49IiQj8zA2P$
> and provide commented, minimal, self-contained, reproducible code.
>


From Chr|@@W||cox @end|ng |rom c@|ro@@u  Wed Mar 18 23:36:35 2020
From: Chr|@@W||cox @end|ng |rom c@|ro@@u (Wilcox, Chris (O&A, Hobart))
Date: Wed, 18 Mar 2020 22:36:35 +0000
Subject: [R] FW: problem with markov random field smooths in mgcv
In-Reply-To: <2c513086-6cce-0d16-c9d0-51eff02889b5@comcast.net>
References: <D782BFE1-F78B-47E5-B1B7-838497B45381@csiro.au>
 <2c513086-6cce-0d16-c9d0-51eff02889b5@comcast.net>
Message-ID: <5E2CF6AB-96EB-46E1-B32F-2431A72BDFAE@csiro.au>

Hi David,

Thanks for the comments.  I am running the analysis on a mac OS 10.12.6, using R R 3.5.3 GUI 1.70 El Capitan build (7632), and mgcv 1.8-31.  

I am aware of the procedure of using data = "xx" in a call to gam.  I am having a strange issue locally, in that gam does not see to be able to find the response variable (Count) if I use the standard way of handing gam the data.  That is the reason I wrote the gam function as I did.  I wanted to ignore that issue for the moment.  I have not had it happen with mgcv before, despite having used it for 10 years or so.

In reference to your question about spatial data, see the section of the code that starts with #create neighbourhood matrix.  This should say list, not matrix.  But it is the indices of the levels in the Country variable that are neighbours.  This list defines the parameter nb in the call to the function that constructs the mrf.

Thanks for spending the time to look at the problem.  I did not use the columb structure, but if you read down in the help for the smooth constructor function you can see that Simon has an example using nb that is like the one I submitted.

Cheers,

Chris

?On 19/3/20, 3:41 am, "David Winsemius" <dwinsemius at comcast.net> wrote:

    
    On 3/18/20 12:44 AM, Wilcox, Chris (O&A, Hobart) wrote:
    > Hi all,
    >      
    >      I am trying to fit a model with a markov random field smooth in mgcv.  I am having some trouble with getting it to run, and in particular I am getting the message
    >      
    >      Error in initial.sp(w * x, S, off) : S[[1]] matrix is not +ve definite.
    >      
    >      After reading everything I could find on mrf, it sounds like there was a bug that was brought up with Simon Wood in 2012, due to differences between windows and linux, with the linus machine stopping due to this error, while windows was not.  I have not been able to find much else on it.  Any suggestions would be much appreciated.
    >      
    >      There is reproducible code below.
    >      
    >      Thanks
    >      
    >      Chris
    >      
    >      
    >      library(mgcv)
    >      
    >      #create data
    >      Country <- as.factor(c("Australia","Australia","Australia","Australia","Australia","Australia","Bangladesh","Bangladesh","Bangladesh",
    >      "Bangladesh","Bangladesh","Bangladesh","Cambodia","Cambodia","Cambodia","Cambodia","Cambodia","Cambodia",
    >      "China","China","China","China","China","China","East Timor","East Timor","East Timor",
    >      "East Timor","East Timor","East Timor","HighSeas1","HighSeas1","HighSeas1","HighSeas1","HighSeas1","HighSeas1",
    >      "HighSeas2","HighSeas2","HighSeas2","HighSeas2","HighSeas2","HighSeas2","China","China","China","China","China","China",
    >      "India","India","India","India","India","India","Indonesia","Indonesia","Indonesia","Indonesia","Indonesia","Indonesia",
    >      "Malaysia","Malaysia","Malaysia","Malaysia","Malaysia","Malaysia","Myanmar","Myanmar","Myanmar","Myanmar","Myanmar",
    >      "Myanmar","Philippines","Philippines","Philippines","Philippines","Philippines","Philippines","South Korea","South Korea",
    >      "South Korea","South Korea","South Korea","South Korea","China","China","China","China","China","China",
    >      "Sri Lanka","Sri Lanka","Sri Lanka","Sri Lanka","Sri Lanka","Sri Lanka","Taiwan","Taiwan","Taiwan","Taiwan",
    >      "Taiwan","Taiwan","Thailand","Thailand","Thailand","Thailand","Thailand","Thailand","Vietnam","Vietnam","Vietnam","Vietnam",
    >      "Vietnam","Vietnam"))
    >      
    >      Count <- c(0,0,3,5,1,5,0,0,0,0,0,1,0,0,0,0,0,3,0,0,2,1,0,6,0,0,0,1,0,0,0,1,0,0,0,0
    >      ,0,0,20,0,1,0,0,0,0,0,0,2,0,0,6,3,3,10,1,1,18,11,8,11,0,1,2,2,1,14,0,0,0,1,0,0
    >      ,0,0,4,3,9,16,0,0,3,0,0,1,0,0,1,0,0,0,0,0,33,18,8,16,0,0,0,0,0,2,0,1,14,6,8,2
    >      ,0,0,0,0,1,1)
    >      
    >      Data <- data.frame(Count,Country)
    
    
    I'm not seeing any spatial data being defined, so I'm puzzled by the 
    expectation that this is yet a markov random field problem. You appear 
    to be following the last part of the example code in 
    ?smooth.construct.mrf.smooth.spec {mgcv} without constructing your data 
    set to match the structure of the `columb` example dataset.
    
    str(columb)
    
    #------------------
    
    'data.frame': 49 obs. of  8 variables:
      $ area      : num  0.3094 0.2593 0.1925 0.0838 0.4889 ...
      $ home.value: num  80.5 44.6 26.4 33.2 23.2 ...
      $ income    : num  19.53 21.23 15.96 4.48 11.25 ...
      $ crime     : num  15.7 18.8 30.6 32.4 50.7 ...
      $ open.space: num  2.851 5.297 4.535 0.394 0.406 ...
      $ district  : Factor w/ 49 levels "0","1","2","3",..: 1 2 3 4 5 6 7 8 
    9 10 ...
      $ x         : num  8.83 8.33 9.01 8.46 9.01 ...
      $ y         : num  14.4 14 13.8 13.7 13.3 ...
    
    
    You are also committing a common R-beginner error in accessing columns 
    of a data object directly in a formula while failing to use a data 
    argument for a regression call.
    
    -- 
    
    David.
    
    >      
    >      #create neighbour matrix
    >      NB <- list()
    >      NB$'East Timor' <- c(1,2,15)
    >      NB$Australia <- c(1,2,15)
    >      NB$'Sri Lanka' <-c(3,12,16)
    >      NB$Bangladesh <-c(4,12,13,16)
    >      NB$Philippines <- c(5,6,11,14,15,17)
    >      NB$Taiwan <- c(5,6,11)
    >      NB$Thailand <- c(7,8,10,12,13,14,15)
    >      NB$Vietnam <- c(7,8,10,11,14,15)
    >      NB$`South Korea` <- c(9,11)
    >      NB$Cambodia <- c(7,8,10)
    >      NB$China <- c(5,6,8,9,11,14)
    >      NB$India <- c(3,4,7,12,13,15,16)
    >      NB$Myanmar <- c(4,7,12,13,16)
    >      NB$Malaysia <- c(5,7,8,11,14,15)
    >      NB$Indonesia <- c(1,2,5,7,8,12,14,15)
    >      NB$HighSeas2 <- c(3,4,12,13,16)
    >      NB$HighSeas1 <- c(5,17)
    >      
    >      #check levels and names match
    >      all.equal(sort(names(NB)), sort(levels(Data$Country)))
    >      
    >      #try fitting GAM
    >      m1 <- gam(Data$Count ~ s(Data$Country, bs = 'mrf', xt = list(nb = NB)))
    >      
    >      
    >
    > ______________________________________________
    > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    > https://stat.ethz.ch/mailman/listinfo/r-help
    > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    > and provide commented, minimal, self-contained, reproducible code.
    


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Thu Mar 19 16:46:41 2020
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Thu, 19 Mar 2020 16:46:41 +0100
Subject: [R] Statistical tests on model trained on different datasets
Message-ID: <CA+nrPnuwjK0bqy=4KhgsnHkozMARcE65YEhytkGq1B-NsWrgfg@mail.gmail.com>

Hi

If I have one dataset , then we can perform statistical tests as:

d=read.csv("dataset1)

svm <- train(bug ~ ., data = tr,
            --
---
getTrainPerf(svm)

rf <- train(bug ~ ., data = tr,
            --
---
getTrainPerf(rf)

wilcox.test(svm$resamples$RMSE, rf$resamplesRMSE)

But if we have another model trained with another dataset

dd=  read.csv("dataset2")

gbm<- train(bug ~ ., data = tr,
            --
---
getTrainPerf(gbm)

How can I perform wilcox test between rf and gbm, which are trained on
different datasets.

Thanks

	[[alternative HTML version deleted]]


From m@ur|c|o@z@mbr@no @end|ng |rom u|ronter@@c|  Thu Mar 19 00:35:41 2020
From: m@ur|c|o@z@mbr@no @end|ng |rom u|ronter@@c| (Mauricio Zambrano-Bigiarini)
Date: Wed, 18 Mar 2020 20:35:41 -0300
Subject: [R] [R-pkgs] hydroPSO: new version 0.5-0 on CRAN
In-Reply-To: <649f9b7a-8cec-661d-453b-af6a6a151e8d@gmail.com>
References: <649f9b7a-8cec-661d-453b-af6a6a151e8d@gmail.com>
Message-ID: <CAP6Varumwiv4MZQs5HeDTiv69Y4_GWXxXJMg8yweCpgW6KgaKQ@mail.gmail.com>

Dear all,

I would bring your attention to the new release of hydroPSO (v0.5-0),
which is on CRAN now: https://cran.r-project.org/package=hydroPSO.


Among its new features stand out:

 o Full compatibility with (hydrological/environmental) models
implemented as R functions (e.g., TUWmodel, GR4J, etc)

 o New vignette showing how to calibrate TUWmodel with hydroPSO:
https://doi.org/10.5281/zenodo.3701902.

 o New vignette showing how to calibrate TUWmodel with GR4J (and other
models of the 'airGR' family): https://doi.org/10.5281/zenodo.3712382.

 o 'verification'  : now it is fully compatible with R-based models
and allows parallelisation.

 o 'read_results', plot_results', 'read_out  :much faster now due to
the use of 'data.table::fread' instead of 'read.table'

 o New dataset 'Trancura9414001' with daily time series on P, Temp,
PET, and Q from 1979 to 2016.

 o Package tested against R 4.0.0 (unstable) (2020-03-17 r77992) --
"Unsuffered Consequences", following an imperative request made by
CRAN.

 o All the new features can be read at:
https://cran.r-project.org/web/packages/hydroPSO/NEWS


I hope you enjoy it !.


Mauricio Zambrano-Bigiarini, PhD

=====================================
Department of Civil Engineering
Faculty of Engineering and Sciences
Universidad de La Frontera, Temuco, Chile
http://hzambran.github.io/
=====================================
mailto : mauricio.zambrano at ufrontera.cl
work-phone : +56 45 259 2812
=====================================
"A people that values its privileges
above its principles soon loses both".
(Dwight D. Eisenhower)
=====================================
Linux user #454569 -- Linux Mint user

-- 
La informaci?n contenida en este correo electr?nico y cualquier anexo o 
respuesta relacionada, puede contener datos e informaci?n confidencial y no 
puede ser usada o difundida por personas distintas a su(s) destinatario(s). 
Si usted no es el destinatario de esta comunicaci?n, le informamos que 
cualquier divulgaci?n, distribuci?n o copia de esta informaci?n constituye 
un delito conforme a la ley chilena. Si lo ha recibido por error, por favor 
borre el mensaje y todos sus anexos y notifique al remitente.

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From tr|ng @end|ng |rom gvdnet@dk  Sat Mar 21 09:44:50 2020
From: tr|ng @end|ng |rom gvdnet@dk (Troels Ring)
Date: Sat, 21 Mar 2020 09:44:50 +0100
Subject: [R] cannot coerce class '"expression"' to a data.frame
Message-ID: <e66f01d5ff5c$fc070410$f4150c30$@gvdnet.dk>

Dear friends - I have some old data of chemical results and want to annotate
the points with chemical formula. If I just do

ID <- c("HCl 7","HCl 5.25","HCl 3.5","HCL 7 no Na","HCl 3.5  No Na",

"HSO4 7 no  Na",

        "HNO3 7 No Na")

I can make a data.frame like

DD <- data.frame(x=1:7,ID)

 

and plotting works fine. 

But if I try to format sulfuric acid and nitric acid like

ID <- c("HCl 7","HCl 5.25","HCl 3.5","HCL 7 no Na","HCl 3.5  No Na",

        expression(paste(HSO[4]," 7 no  Na")),

        expression(paste(HNO[3]," 7 No Na")))

 

DD <- data.frame(x=1:7,ID)

Elicits an error

Error in as.data.frame.default(x[[i]], optional = TRUE) : 

  cannot coerce class '"expression"' to a data.frame

and plotting is prohibited - so how is this bypassed?

 

I'm on Windows 10,

R version 3.6.1 (2019-07-05)

 

All best wishes

Troels Ring, MD

Aalborg, Denmark


This email has been scanned by BullGuard antivirus protection.
For more info visit www.bullguard.com
<http://www.bullguard.com/tracking.aspx?affiliate=bullguard&buyaffiliate=smt
p&url=/> 

	[[alternative HTML version deleted]]


From ||54250 @end|ng |rom m@n@com  Sat Mar 21 16:59:58 2020
From: ||54250 @end|ng |rom m@n@com (Ioanna Ioannou)
Date: Sat, 21 Mar 2020 15:59:58 +0000
Subject: [R] How to save output of multiple loops in a matrix
In-Reply-To: <CABcYAdLvFyYDS+rFD3fboAy15Ydhks=ng82AsUZqBU9ZDU_j_A@mail.gmail.com>
References: <DBBPR05MB657042CF5BA5D3BE1592166BF3360@DBBPR05MB6570.eurprd05.prod.outlook.com>
 <17F90DC5-D0FD-4A2D-A6FA-0A22861A78CF@krugs.de>
 <DBBPR05MB6570B84F540BE7F511103A70F3360@DBBPR05MB6570.eurprd05.prod.outlook.com>
 <B4D78F92-CB0E-42C8-99A7-E115DE725714@krugs.de>
 <DBBPR05MB65705DE2605FFC8D9F02E2C8F3360@DBBPR05MB6570.eurprd05.prod.outlook.com>,
 <CABcYAdLvFyYDS+rFD3fboAy15Ydhks=ng82AsUZqBU9ZDU_j_A@mail.gmail.com>
Message-ID: <DBBPR05MB657007DE194B7A9F01D573A8F3F20@DBBPR05MB6570.eurprd05.prod.outlook.com>

Hello everyone,

I am having this data.frame. For each row you have 26 values aggregated in a cell and separated by a comma. I want to do some calculations for all unique names and taxonomy which include the four different damage states. I can estimate the results but i am struggling to save them in a data.frame and assign next to them the unique combination of the name, taxonomy. Any help much appreciated.


d1 <- read.csv('test.csv')

D2L <- c(0, 2, 10, 50, 100)

VC_final <- array(NA, length(distinct(d1[,c(65,4,3)])$Name) )
VC       <- matrix(NA, length(distinct(d1[,c(65,4,3)])$Name),length(unlist(str_split(as.character(d1[1,]$Y_vals), pattern = ","))))

# get the rows for the four damage states
DS1_rows <- d1$Damage_State ==  unique(d1$Damage_State)[4]
DS2_rows <- d1$Damage_State ==  unique(d1$Damage_State)[3]
DS3_rows <- d1$Damage_State ==  unique(d1$Damage_State)[2]
DS4_rows <- d1$Damage_State ==  unique(d1$Damage_State)[1]

# step through all possible values of IM.type and Taxonomy and Name
#### This is true for this subset not generalibale needs to be checked first ##

for(IM in unique(d1$IM_type)) {
  for(Tax in unique(d1$Taxonomy)) {
    for(Name in unique(d1$Name)) {
      # get a logical vector of the rows to be use DS5 in this calculation
      calc_rows <- d1$IM_type == IM & d1$Taxonomy == Tax & d1$Name == Name


      # check that there are any such rows in the DS5ata frame
      if(sum(calc_rows)) {
        cat(IM,Tax,Name,"\n")
        # if so, fill in the four values for these rows
        VC[calc_rows]  <- D2L[1] * (1- as.numeric(unlist(str_split(as.character(d1[calc_rows & DS1_rows,]$Y_vals), pattern = ","))) ) +
          D2L[2]* (as.numeric(unlist(str_split(as.character(d1[calc_rows & DS1_rows,]$Y_vals), pattern = ","))) -
                     as.numeric(unlist(str_split(as.character(d1[calc_rows & DS2_rows,]$Y_vals), pattern = ",")))) +
          D2L[3]* (as.numeric(unlist(str_split(as.character(d1[calc_rows & DS2_rows,]$Y_vals), pattern = ","))) -
                     as.numeric(unlist(str_split(as.character(d1[calc_rows & DS3_rows,]$Y_vals), pattern = ",")))) +
          D2L[4] * (as.numeric(unlist(str_split(as.character(d1[calc_rows & DS3_rows,]$Y_vals), pattern = ","))) -
                      as.numeric(unlist(str_split(as.character(d1[calc_rows & DS4_rows,]$Y_vals), pattern = ",")))) +
          D2L[5]*    as.numeric(unlist(str_split(as.character(d1[calc_rows & DS4_rows,]$Y_vals), pattern = ",")))
        print(VC[calc_rows] )
      }
    }
  }
}

  for(Tax in unique(d1$Taxonomy)) {
    for(Name in unique(d1$Name)) {
      # get a logical vector of the rows to be use DS5 in this calculation
      calc_rows <- d1$IM_type == IM & d1$Taxonomy == Tax & d1$Name == Name


      # check that there are any such rows in the DS5ata frame
      if(sum(calc_rows)) {
        cat(IM,Tax,Name,"\n")
        # if so, fill in the four values for these rows
        VC[calc_rows]  <- D2L[1] * (1- as.numeric(unlist(str_split(as.character(d1[calc_rows & DS1_rows,]$Y_vals), pattern = ","))) ) +
          D2L[2]* (as.numeric(unlist(str_split(as.character(d1[calc_rows & DS1_rows,]$Y_vals), pattern = ","))) -
                     as.numeric(unlist(str_split(as.character(d1[calc_rows & DS2_rows,]$Y_vals), pattern = ",")))) +
          D2L[3]* (as.numeric(unlist(str_split(as.character(d1[calc_rows & DS2_rows,]$Y_vals), pattern = ","))) -
                     as.numeric(unlist(str_split(as.character(d1[calc_rows & DS3_rows,]$Y_vals), pattern = ",")))) +
          D2L[4] * (as.numeric(unlist(str_split(as.character(d1[calc_rows & DS3_rows,]$Y_vals), pattern = ","))) -
                      as.numeric(unlist(str_split(as.character(d1[calc_rows & DS4_rows,]$Y_vals), pattern = ",")))) +
          D2L[5]*    as.numeric(unlist(str_split(as.character(d1[calc_rows & DS4_rows,]$Y_vals), pattern = ",")))
        print(unique(VC ))
      }
    }
  }

Vul <- distinct(d1[,c(65,4,3)])

dim(VC) <- c(length(unlist(str_split(as.character(d1[1,]$Y_vals), pattern = ","))),length(distinct(d1[,c(65,4,3)])$Name))  ## (rows, cols)
VC
VC_t <- t(VC)
Vulnerability <- matrix(apply(VC_t, 1, function(x) paste(x, collapse = ',')))

Vul$Y_vals <- Vulnerability




Best,
ioanna










Name    Taxonomy        Damage_State    Y_vals
Hancilar et. al (2014) - CR/LDUAL school - Case V (Sd)  CR/LDUAL/HEX:4+HFEX:12.8/YAPP:1990/EDU+EDU2//PLFSQ/IRRE//RSH1// Slight  4.61e-149,0.007234459,0.158482316,0.438164341,0.671470035,0.818341464,0.901312438,0.946339742,0.970531767,0.983584997,0.990707537,0.994650876,0.996869188,0.998137671,0.998874868,0.9993101,0.999570978,0.999729626,0.999827443,0.999888548,0.999927197,0.999951931,0.999967938,0.999978407,0.999985325,0.999989939
Hancilar et. al (2014) - CR/LDUAL school - Case V (Sd)  CR/LDUAL/HEX:4+HFEX:12.8/YAPP:1990/EDU+EDU2//PLFSQ/IRRE//RSH1//  Collapse       0,6.49e-45,1.29e-29,3.35e-22,1.25e-17,1.8e-14,3.81e-12,2.35e-10,6.18e-09,8.78e-08,7.86e-07,4.92e-06,2.32e-05,8.76e-05,0.000274154,0.000736426,0.001740046,0.003688955,0.007130224,0.012730071,0.021221055,0.0333283,0.049687895,0.070771949,0.096832412,0.12787106
Hancilar et. al (2014) - CR/LDUAL school - Case V (Sd)  CR/LDUAL/HEX:4+HFEX:12.8/YAPP:1990/EDU+EDU2//PLFSQ/IRRE//RSH1//  Extensive      5.02e-182,3.52e-10,8.81e-07,3.62e-05,0.000346166,0.001608096,0.004916965,0.01150426,0.022416772,0.038311015,0.059392175,0.085458446,0.115998702,0.150303282,0.187564259,0.226954808,0.267685669,0.309041053,0.35039806,0.391233913,0.431124831,0.469739614,0.506830242,0.542221151,0.575798268,0.607498531
Hancilar et. al (2014) - CR/LDUAL school - Case V (Sd)  CR/LDUAL/HEX:4+HFEX:12.8/YAPP:1990/EDU+EDU2//PLFSQ/IRRE//RSH1// Moderate        0,1.05e-10,4.75e-06,0.000479751,0.006156253,0.02983369,0.084284357,0.171401809,0.281721077,0.401071017,0.516782184,0.620508952,0.708327468,0.779597953,0.835636781,0.87866127,0.911104254,0.935237852,0.95300803,0.965993954,0.97543154,0.982263787,0.987197155,0.990753887,0.993316294,0.99516227
Rojas(2010) - CR/LFM/DNO 2storey        CR/LFM/DNO/H:2/EDU2      Collapse       0,4.91e-109,2.88e-47,3.32e-23,1.65e-11,1.78e-05,0.018162775,0.356628282,0.870224163,0.992779045,0.999855873,0.999998652,0.999999993,1,1,1,1,1,1,1,1,1,1,1,1,1
Rojas(2010) - CR/LFM/DNO 2storey        CR/LFM/DNO/H:2/EDU2      Extensive      0,1.21e-32,1.78e-05,0.645821244,0.999823159,0.999999999,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
Rojas(2010) - CR/LFM/DNO 2storey        CR/LFM/DNO/H:2/EDU2     Moderate        0,0.077161367,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
Rojas(2010) - CR/LFM/DNO 2storey        CR/LFM/DNO/H:2/EDU2     Slight  0,0.996409276,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
Rojas(2010) - CR/LFM/DNO 3storey        CR/LFM/DNO/H:3   Collapse       0,1.29e-144,1.99e-71,1.16e-40,3.23e-24,1.59e-14,1.41e-08,6.42e-05,0.00971775,0.153727719,0.562404795,0.889217735,0.985915683,0.998997836,0.999955341,0.999998628,0.999999969,0.999999999,1,1,1,1,1,1,1,1
Rojas(2010) - CR/LFM/DNO 3storey        CR/LFM/DNO/H:3   Extensive      0,2.12e-51,4.89e-14,0.001339285,0.559153268,0.995244295,0.999997786,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
Rojas(2010) - CR/LFM/DNO 3storey        CR/LFM/DNO/H:3  Moderate        0,3.22e-07,0.992496021,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
Rojas(2010) - CR/LFM/DNO 3storey        CR/LFM/DNO/H:3  Slight  0,0.368907496,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1


	[[alternative HTML version deleted]]


From wdun|@p @end|ng |rom t|bco@com  Sat Mar 21 17:26:16 2020
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Sat, 21 Mar 2020 09:26:16 -0700
Subject: [R] cannot coerce class '"expression"' to a data.frame
In-Reply-To: <e66f01d5ff5c$fc070410$f4150c30$@gvdnet.dk>
References: <e66f01d5ff5c$fc070410$f4150c30$@gvdnet.dk>
Message-ID: <CAF8bMcbryX6AH2A5Gza7y6CDbbzepjys_uXo=mWr113jkGCn+g@mail.gmail.com>

Try using the I() function in the call to data.frame.  E.g.,

> d <- data.frame(X=1:3, Y=1:3, Substance=I(expression(H[2]*O, H[2] * O[2],
H*S*O[4])))
> with(d, {plot(X,Y,type="n",xlim=c(0,4)); text(X, Y, Substance)})

Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Sat, Mar 21, 2020 at 1:45 AM Troels Ring <tring at gvdnet.dk> wrote:

> Dear friends - I have some old data of chemical results and want to
> annotate
> the points with chemical formula. If I just do
>
> ID <- c("HCl 7","HCl 5.25","HCl 3.5","HCL 7 no Na","HCl 3.5  No Na",
>
> "HSO4 7 no  Na",
>
>         "HNO3 7 No Na")
>
> I can make a data.frame like
>
> DD <- data.frame(x=1:7,ID)
>
>
>
> and plotting works fine.
>
> But if I try to format sulfuric acid and nitric acid like
>
> ID <- c("HCl 7","HCl 5.25","HCl 3.5","HCL 7 no Na","HCl 3.5  No Na",
>
>         expression(paste(HSO[4]," 7 no  Na")),
>
>         expression(paste(HNO[3]," 7 No Na")))
>
>
>
> DD <- data.frame(x=1:7,ID)
>
> Elicits an error
>
> Error in as.data.frame.default(x[[i]], optional = TRUE) :
>
>   cannot coerce class '"expression"' to a data.frame
>
> and plotting is prohibited - so how is this bypassed?
>
>
>
> I'm on Windows 10,
>
> R version 3.6.1 (2019-07-05)
>
>
>
> All best wishes
>
> Troels Ring, MD
>
> Aalborg, Denmark
>
>
> This email has been scanned by BullGuard antivirus protection.
> For more info visit www.bullguard.com
> <
> http://www.bullguard.com/tracking.aspx?affiliate=bullguard&buyaffiliate=smt
> p&url=/
> <http://www.bullguard.com/tracking.aspx?affiliate=bullguard&buyaffiliate=smtp&url=/>>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Mar 21 17:27:50 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 21 Mar 2020 09:27:50 -0700
Subject: [R] How to save output of multiple loops in a matrix
In-Reply-To: <DBBPR05MB657007DE194B7A9F01D573A8F3F20@DBBPR05MB6570.eurprd05.prod.outlook.com>
References: <DBBPR05MB657042CF5BA5D3BE1592166BF3360@DBBPR05MB6570.eurprd05.prod.outlook.com>
 <17F90DC5-D0FD-4A2D-A6FA-0A22861A78CF@krugs.de>
 <DBBPR05MB6570B84F540BE7F511103A70F3360@DBBPR05MB6570.eurprd05.prod.outlook.com>
 <B4D78F92-CB0E-42C8-99A7-E115DE725714@krugs.de>
 <DBBPR05MB65705DE2605FFC8D9F02E2C8F3360@DBBPR05MB6570.eurprd05.prod.outlook.com>,
 <CABcYAdLvFyYDS+rFD3fboAy15Ydhks=ng82AsUZqBU9ZDU_j_A@mail.gmail.com>
 <DBBPR05MB657007DE194B7A9F01D573A8F3F20@DBBPR05MB6570.eurprd05.prod.outlook.com>
Message-ID: <A4FE5DC9-269A-483D-ADE3-18AA26552170@dcn.davis.ca.us>

You have again posted using HTML  and the result is unreadable. Please post a reproducible example using dput instead of assuming we can read your formatted code or table.

On March 21, 2020 8:59:58 AM PDT, Ioanna Ioannou <ii54250 at msn.com> wrote:
>Hello everyone,
>
>I am having this data.frame. For each row you have 26 values aggregated
>in a cell and separated by a comma. I want to do some calculations for
>all unique names and taxonomy which include the four different damage
>states. I can estimate the results but i am struggling to save them in
>a data.frame and assign next to them the unique combination of the
>name, taxonomy. Any help much appreciated.
>
>
>d1 <- read.csv('test.csv')
>
>D2L <- c(0, 2, 10, 50, 100)
>
>VC_final <- array(NA, length(distinct(d1[,c(65,4,3)])$Name) )
>VC       <- matrix(NA,
>length(distinct(d1[,c(65,4,3)])$Name),length(unlist(str_split(as.character(d1[1,]$Y_vals),
>pattern = ","))))
>
># get the rows for the four damage states
>DS1_rows <- d1$Damage_State ==  unique(d1$Damage_State)[4]
>DS2_rows <- d1$Damage_State ==  unique(d1$Damage_State)[3]
>DS3_rows <- d1$Damage_State ==  unique(d1$Damage_State)[2]
>DS4_rows <- d1$Damage_State ==  unique(d1$Damage_State)[1]
>
># step through all possible values of IM.type and Taxonomy and Name
>#### This is true for this subset not generalibale needs to be checked
>first ##
>
>for(IM in unique(d1$IM_type)) {
>  for(Tax in unique(d1$Taxonomy)) {
>    for(Name in unique(d1$Name)) {
>   # get a logical vector of the rows to be use DS5 in this calculation
>   calc_rows <- d1$IM_type == IM & d1$Taxonomy == Tax & d1$Name == Name
>
>
>      # check that there are any such rows in the DS5ata frame
>      if(sum(calc_rows)) {
>        cat(IM,Tax,Name,"\n")
>        # if so, fill in the four values for these rows
>VC[calc_rows]  <- D2L[1] * (1-
>as.numeric(unlist(str_split(as.character(d1[calc_rows &
>DS1_rows,]$Y_vals), pattern = ","))) ) +
>D2L[2]* (as.numeric(unlist(str_split(as.character(d1[calc_rows &
>DS1_rows,]$Y_vals), pattern = ","))) -
>as.numeric(unlist(str_split(as.character(d1[calc_rows &
>DS2_rows,]$Y_vals), pattern = ",")))) +
>D2L[3]* (as.numeric(unlist(str_split(as.character(d1[calc_rows &
>DS2_rows,]$Y_vals), pattern = ","))) -
>as.numeric(unlist(str_split(as.character(d1[calc_rows &
>DS3_rows,]$Y_vals), pattern = ",")))) +
>D2L[4] * (as.numeric(unlist(str_split(as.character(d1[calc_rows &
>DS3_rows,]$Y_vals), pattern = ","))) -
>as.numeric(unlist(str_split(as.character(d1[calc_rows &
>DS4_rows,]$Y_vals), pattern = ",")))) +
>D2L[5]*    as.numeric(unlist(str_split(as.character(d1[calc_rows &
>DS4_rows,]$Y_vals), pattern = ",")))
>        print(VC[calc_rows] )
>      }
>    }
>  }
>}
>
>  for(Tax in unique(d1$Taxonomy)) {
>    for(Name in unique(d1$Name)) {
>   # get a logical vector of the rows to be use DS5 in this calculation
>   calc_rows <- d1$IM_type == IM & d1$Taxonomy == Tax & d1$Name == Name
>
>
>      # check that there are any such rows in the DS5ata frame
>      if(sum(calc_rows)) {
>        cat(IM,Tax,Name,"\n")
>        # if so, fill in the four values for these rows
>VC[calc_rows]  <- D2L[1] * (1-
>as.numeric(unlist(str_split(as.character(d1[calc_rows &
>DS1_rows,]$Y_vals), pattern = ","))) ) +
>D2L[2]* (as.numeric(unlist(str_split(as.character(d1[calc_rows &
>DS1_rows,]$Y_vals), pattern = ","))) -
>as.numeric(unlist(str_split(as.character(d1[calc_rows &
>DS2_rows,]$Y_vals), pattern = ",")))) +
>D2L[3]* (as.numeric(unlist(str_split(as.character(d1[calc_rows &
>DS2_rows,]$Y_vals), pattern = ","))) -
>as.numeric(unlist(str_split(as.character(d1[calc_rows &
>DS3_rows,]$Y_vals), pattern = ",")))) +
>D2L[4] * (as.numeric(unlist(str_split(as.character(d1[calc_rows &
>DS3_rows,]$Y_vals), pattern = ","))) -
>as.numeric(unlist(str_split(as.character(d1[calc_rows &
>DS4_rows,]$Y_vals), pattern = ",")))) +
>D2L[5]*    as.numeric(unlist(str_split(as.character(d1[calc_rows &
>DS4_rows,]$Y_vals), pattern = ",")))
>        print(unique(VC ))
>      }
>    }
>  }
>
>Vul <- distinct(d1[,c(65,4,3)])
>
>dim(VC) <- c(length(unlist(str_split(as.character(d1[1,]$Y_vals),
>pattern = ","))),length(distinct(d1[,c(65,4,3)])$Name))  ## (rows,
>cols)
>VC
>VC_t <- t(VC)
>Vulnerability <- matrix(apply(VC_t, 1, function(x) paste(x, collapse =
>',')))
>
>Vul$Y_vals <- Vulnerability
>
>
>
>
>Best,
>ioanna
>
>
>
>
>
>
>
>
>
>
>Name    Taxonomy        Damage_State    Y_vals
>Hancilar et. al (2014) - CR/LDUAL school - Case V (Sd) 
>CR/LDUAL/HEX:4+HFEX:12.8/YAPP:1990/EDU+EDU2//PLFSQ/IRRE//RSH1// Slight 
>4.61e-149,0.007234459,0.158482316,0.438164341,0.671470035,0.818341464,0.901312438,0.946339742,0.970531767,0.983584997,0.990707537,0.994650876,0.996869188,0.998137671,0.998874868,0.9993101,0.999570978,0.999729626,0.999827443,0.999888548,0.999927197,0.999951931,0.999967938,0.999978407,0.999985325,0.999989939
>Hancilar et. al (2014) - CR/LDUAL school - Case V (Sd) 
>CR/LDUAL/HEX:4+HFEX:12.8/YAPP:1990/EDU+EDU2//PLFSQ/IRRE//RSH1// 
>Collapse      
>0,6.49e-45,1.29e-29,3.35e-22,1.25e-17,1.8e-14,3.81e-12,2.35e-10,6.18e-09,8.78e-08,7.86e-07,4.92e-06,2.32e-05,8.76e-05,0.000274154,0.000736426,0.001740046,0.003688955,0.007130224,0.012730071,0.021221055,0.0333283,0.049687895,0.070771949,0.096832412,0.12787106
>Hancilar et. al (2014) - CR/LDUAL school - Case V (Sd) 
>CR/LDUAL/HEX:4+HFEX:12.8/YAPP:1990/EDU+EDU2//PLFSQ/IRRE//RSH1// 
>Extensive     
>5.02e-182,3.52e-10,8.81e-07,3.62e-05,0.000346166,0.001608096,0.004916965,0.01150426,0.022416772,0.038311015,0.059392175,0.085458446,0.115998702,0.150303282,0.187564259,0.226954808,0.267685669,0.309041053,0.35039806,0.391233913,0.431124831,0.469739614,0.506830242,0.542221151,0.575798268,0.607498531
>Hancilar et. al (2014) - CR/LDUAL school - Case V (Sd) 
>CR/LDUAL/HEX:4+HFEX:12.8/YAPP:1990/EDU+EDU2//PLFSQ/IRRE//RSH1//
>Moderate       
>0,1.05e-10,4.75e-06,0.000479751,0.006156253,0.02983369,0.084284357,0.171401809,0.281721077,0.401071017,0.516782184,0.620508952,0.708327468,0.779597953,0.835636781,0.87866127,0.911104254,0.935237852,0.95300803,0.965993954,0.97543154,0.982263787,0.987197155,0.990753887,0.993316294,0.99516227
>Rojas(2010) - CR/LFM/DNO 2storey        CR/LFM/DNO/H:2/EDU2     
>Collapse      
>0,4.91e-109,2.88e-47,3.32e-23,1.65e-11,1.78e-05,0.018162775,0.356628282,0.870224163,0.992779045,0.999855873,0.999998652,0.999999993,1,1,1,1,1,1,1,1,1,1,1,1,1
>Rojas(2010) - CR/LFM/DNO 2storey        CR/LFM/DNO/H:2/EDU2     
>Extensive     
>0,1.21e-32,1.78e-05,0.645821244,0.999823159,0.999999999,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
>Rojas(2010) - CR/LFM/DNO 2storey        CR/LFM/DNO/H:2/EDU2    
>Moderate       
>0,0.077161367,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
>Rojas(2010) - CR/LFM/DNO 2storey        CR/LFM/DNO/H:2/EDU2     Slight 
>0,0.996409276,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
>Rojas(2010) - CR/LFM/DNO 3storey        CR/LFM/DNO/H:3   Collapse      
>0,1.29e-144,1.99e-71,1.16e-40,3.23e-24,1.59e-14,1.41e-08,6.42e-05,0.00971775,0.153727719,0.562404795,0.889217735,0.985915683,0.998997836,0.999955341,0.999998628,0.999999969,0.999999999,1,1,1,1,1,1,1,1
>Rojas(2010) - CR/LFM/DNO 3storey        CR/LFM/DNO/H:3   Extensive     
>0,2.12e-51,4.89e-14,0.001339285,0.559153268,0.995244295,0.999997786,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
>Rojas(2010) - CR/LFM/DNO 3storey        CR/LFM/DNO/H:3  Moderate       
>0,3.22e-07,0.992496021,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
>Rojas(2010) - CR/LFM/DNO 3storey        CR/LFM/DNO/H:3  Slight 
>0,0.368907496,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Sat Mar 21 17:35:46 2020
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Sat, 21 Mar 2020 16:35:46 +0000 (UTC)
Subject: [R] Strange error message, many thanks
References: <2098287967.412818.1584808546394.ref@mail.yahoo.com>
Message-ID: <2098287967.412818.1584808546394@mail.yahoo.com>

Dear R-experts,

Here below my R code giving an error message that I don't understand. If somebody can help me to fix it, it would be highly appreciated.

# # # # # # # # # # # # # # # # # # # # # # # #
install.packages( "robustbase",dependencies=TRUE )
install.packages( "boot",dependencies=TRUE )
library(boot)
library(robustbase)

n<-500
b<-runif(n, 0, 5)
z <- rnorm(n, 2, 3)
a <- runif(n, 0, 5)
df<-data.frame(b,z,a)

y_model<- 0.1*b - 0.5 * z - a + 10
y_obs <- y_model +c( rnorm(n*0.9, 0, 0.1), rnorm(n*0.1, 0, 0.5) )

?# function to obtain MSE
?MSE <- function(data, indices, formula) {
? ? d <- data[indices, ] # allows boot to select sample
? ? fit <- lmrob(formula, data = d)
? ? ypred <- predict(fit)
? ? mean((d[["y_obs "]] - ypred)^2)
?}

?# Make the results reproducible
?set.seed(1234)
?
?# bootstrapping with 500 replications
?results <- boot(data = df, statistic = MSE,
? ??????????????? R = 500, formula = y_obs ~ b+z+a)

boot.ci(results, type="bca")
# # # # # # # # # # # # # # # # # # # # # # # # #


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Mar 21 17:48:23 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 21 Mar 2020 12:48:23 -0400
Subject: [R] Strange error message, many thanks
In-Reply-To: <2098287967.412818.1584808546394@mail.yahoo.com>
References: <2098287967.412818.1584808546394.ref@mail.yahoo.com>
 <2098287967.412818.1584808546394@mail.yahoo.com>
Message-ID: <cde2af7c-8280-4187-cea3-6b7b864eb322@gmail.com>

On 21/03/2020 12:35 p.m., varin sacha via R-help wrote:
> # # # # # # # # # # # # # # # # # # # # # # # #
> install.packages( "robustbase",dependencies=TRUE )
> install.packages( "boot",dependencies=TRUE )
> library(boot)
> library(robustbase)
> 
> n<-500
> b<-runif(n, 0, 5)
> z <- rnorm(n, 2, 3)
> a <- runif(n, 0, 5)
> df<-data.frame(b,z,a)
> 
> y_model<- 0.1*b - 0.5 * z - a + 10
> y_obs <- y_model +c( rnorm(n*0.9, 0, 0.1), rnorm(n*0.1, 0, 0.5) )
> 
>  ?# function to obtain MSE
>  ?MSE <- function(data, indices, formula) {
>  ? ? d <- data[indices, ] # allows boot to select sample
>  ? ? fit <- lmrob(formula, data = d)
>  ? ? ypred <- predict(fit)
>  ? ? mean((d[["y_obs "]] - ypred)^2)
>  ?}
> 
>  ?# Make the results reproducible
>  ?set.seed(1234)
>   
>  ?# bootstrapping with 500 replications
>  ?results <- boot(data = df, statistic = MSE,
>  ? ??????????????? R = 500, formula = y_obs ~ b+z+a)
> 
> boot.ci(results, type="bca")
> # # # # # # # # # # # # # # # # # # # # # # # # #

Try using debug(MSE), and you'll see that d[["yobs "]] doesn't exist, so 
your MSE function always returns NaN.

Duncan Murdoch


From ||54250 @end|ng |rom m@n@com  Sat Mar 21 17:54:00 2020
From: ||54250 @end|ng |rom m@n@com (Ioanna Ioannou)
Date: Sat, 21 Mar 2020 16:54:00 +0000
Subject: [R] How to save output of multiple loops in a matrix
In-Reply-To: <A4FE5DC9-269A-483D-ADE3-18AA26552170@dcn.davis.ca.us>
References: <DBBPR05MB657042CF5BA5D3BE1592166BF3360@DBBPR05MB6570.eurprd05.prod.outlook.com>
 <17F90DC5-D0FD-4A2D-A6FA-0A22861A78CF@krugs.de>
 <DBBPR05MB6570B84F540BE7F511103A70F3360@DBBPR05MB6570.eurprd05.prod.outlook.com>
 <B4D78F92-CB0E-42C8-99A7-E115DE725714@krugs.de>
 <DBBPR05MB65705DE2605FFC8D9F02E2C8F3360@DBBPR05MB6570.eurprd05.prod.outlook.com>,
 <CABcYAdLvFyYDS+rFD3fboAy15Ydhks=ng82AsUZqBU9ZDU_j_A@mail.gmail.com>
 <DBBPR05MB657007DE194B7A9F01D573A8F3F20@DBBPR05MB6570.eurprd05.prod.outlook.com>,
 <A4FE5DC9-269A-483D-ADE3-18AA26552170@dcn.davis.ca.us>
Message-ID: <DBBPR05MB657058D353C18EB281CA0917F3F20@DBBPR05MB6570.eurprd05.prod.outlook.com>

Hello again,

Here is the reproducible example:

rm(list = ls())
library(plyr)
library(dplyr)
library( data.table)
library(stringr)


d1 <- data.frame( Name = rep(c('Hancilar et. al (2014) - CR/LDUAL school - Case V (Sd)',
                               'Rojas(2010) - CR/LFM/DNO 2storey',
                               'Rojas(2010) - CR/LFM/DNO 3storey'), each = 4),
                  Taxonomy = rep(c('CR/LDUAL/HEX:4+HFEX:12.8/YAPP:1990/EDU+EDU2//PLFSQ/IRRE//RSH1//',
                                   'CR/LFM/DNO/H:2/EDU2',
                                   'CR/LFM/DNO/H:3'), each = 4),
                  Damage_State =rep(c('Collapse', 'Extensive', 'Moderate', 'Slight'), times =3),
                  Y_vals = c('0,6.49e-45,1.29e-29,3.35e-22,1.25e-17,1.8e-14,3.81e-12,2.35e-10,6.18e-09,8.78e-08,7.86e-07,4.92e-06,2.32e-05,8.76e-05,0.000274154,0.000736426,0.001740046,0.003688955,0.007130224,0.012730071,0.021221055,0.0333283,0.049687895,0.070771949,0.096832412,0.12787106',
                             '5.02e-182,3.52e-10,8.81e-07,3.62e-05,0.000346166,0.001608096,0.004916965,0.01150426,0.022416772,0.038311015,0.059392175,0.085458446,0.115998702,0.150303282,0.187564259,0.226954808,0.267685669,0.309041053,0.35039806,0.391233913,0.431124831,0.469739614,0.506830242,0.542221151,0.575798268,0.607498531',
                             '0,1.05e-10,4.75e-06,0.000479751,0.006156253,0.02983369,0.084284357,0.171401809,0.281721077,0.401071017,0.516782184,0.620508952,0.708327468,0.779597953,0.835636781,0.87866127,0.911104254,0.935237852,0.95300803,0.965993954,0.97543154,0.982263787,0.987197155,0.990753887,0.993316294,0.99516227',
                             '4.61e-149,0.007234459,0.158482316,0.438164341,0.671470035,0.818341464,0.901312438,0.946339742,0.970531767,0.983584997,0.990707537,0.994650876,0.996869188,0.998137671,0.998874868,0.9993101,0.999570978,0.999729626,0.999827443,0.999888548,0.999927197,0.999951931,0.999967938,0.999978407,0.999985325,0.999989939',

                             '0,4.91e-109,2.88e-47,3.32e-23,1.65e-11,1.78e-05,0.018162775,0.356628282,0.870224163,0.992779045,0.999855873,0.999998652,0.999999993,1,1,1,1,1,1,1,1,1,1,1,1,1',
                             '0,1.21e-32,1.78e-05,0.645821244,0.999823159,0.999999999,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1',
                             '0,0.077161367,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1',
                             '0,0.996409276,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1',

                             '0,1.29e-144,1.99e-71,1.16e-40,3.23e-24,1.59e-14,1.41e-08,6.42e-05,0.00971775,0.153727719,0.562404795,0.889217735,0.985915683,0.998997836,0.999955341,0.999998628,0.999999969,0.999999999,1,1,1,1,1,1,1,1',
                             '0,2.12e-51,4.89e-14,0.001339285,0.559153268,0.995244295,0.999997786,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1',
                             '0,3.22e-07,0.992496021,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1',
                             '0,0.368907496,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1')
                             )




D2L <- c(0, 2, 10, 50, 100)

VC_final <- array(NA, length(distinct(d1[,c(1,2)])$Name) )

# get the rows for the four damage states
DS1_rows <- d1$Damage_State ==  unique(d1$Damage_State)[4]
DS2_rows <- d1$Damage_State ==  unique(d1$Damage_State)[3]
DS3_rows <- d1$Damage_State ==  unique(d1$Damage_State)[2]
DS4_rows <- d1$Damage_State ==  unique(d1$Damage_State)[1]

# step through all possible values of IM.type and Taxonomy and Name
#### This is true for this subset not generalibale needs to be checked first ##
VC       <- matrix(NA, 3,26)
  for(Tax in unique(d1$Taxonomy)) {
    for(Name in unique(d1$Name)) {
      # get a logical vector of the rows to be use DS5 in this calculation
      calc_rows <-  d1$Taxonomy == Tax & d1$Name == Name


      # check that there are any such rows in the DS5ata frame
      if(sum(calc_rows)) {

        cat(Tax,Name,"\n")
        # if so, fill in the four values for these rows
        VC[calc_rows]  <- D2L[1] * (1- as.numeric(unlist(str_split(as.character(d1[calc_rows & DS1_rows,]$Y_vals), pattern = ","))) ) +
          D2L[2]* (as.numeric(unlist(str_split(as.character(d1[calc_rows & DS1_rows,]$Y_vals), pattern = ","))) -
                     as.numeric(unlist(str_split(as.character(d1[calc_rows & DS2_rows,]$Y_vals), pattern = ",")))) +
          D2L[3]* (as.numeric(unlist(str_split(as.character(d1[calc_rows & DS2_rows,]$Y_vals), pattern = ","))) -
                     as.numeric(unlist(str_split(as.character(d1[calc_rows & DS3_rows,]$Y_vals), pattern = ",")))) +
          D2L[4] * (as.numeric(unlist(str_split(as.character(d1[calc_rows & DS3_rows,]$Y_vals), pattern = ","))) -
                      as.numeric(unlist(str_split(as.character(d1[calc_rows & DS4_rows,]$Y_vals), pattern = ",")))) +
          D2L[5]*    as.numeric(unlist(str_split(as.character(d1[calc_rows & DS4_rows,]$Y_vals), pattern = ",")))
        print(VC[calc_rows] )
      }
    }
  }



Vul <- distinct(d1[,c(1,2)])

dim(VC) <- c(length(unlist(str_split(as.character(d1[2,]$Y_vals), pattern = ","))),length(distinct(d1[,c(1,2)])$Name))  ## (rows, cols)
VC
VC_t <- t(VC)
Vulnerability <- matrix(apply(VC_t, 1, function(x) paste(x, collapse = ',')))

Vul$Y_vals <- Vulnerability




________________________________
From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
Sent: 21 March 2020 16:27
To: r-help at r-project.org <r-help at r-project.org>; Ioanna Ioannou <ii54250 at msn.com>; r-help at r-project.org <r-help at r-project.org>
Subject: Re: [R] How to save output of multiple loops in a matrix

You have again posted using HTML  and the result is unreadable. Please post a reproducible example using dput instead of assuming we can read your formatted code or table.

On March 21, 2020 8:59:58 AM PDT, Ioanna Ioannou <ii54250 at msn.com> wrote:
>Hello everyone,
>
>I am having this data.frame. For each row you have 26 values aggregated
>in a cell and separated by a comma. I want to do some calculations for
>all unique names and taxonomy which include the four different damage
>states. I can estimate the results but i am struggling to save them in
>a data.frame and assign next to them the unique combination of the
>name, taxonomy. Any help much appreciated.
>
>
>d1 <- read.csv('test.csv')
>
>D2L <- c(0, 2, 10, 50, 100)
>
>VC_final <- array(NA, length(distinct(d1[,c(65,4,3)])$Name) )
>VC       <- matrix(NA,
>length(distinct(d1[,c(65,4,3)])$Name),length(unlist(str_split(as.character(d1[1,]$Y_vals),
>pattern = ","))))
>
># get the rows for the four damage states
>DS1_rows <- d1$Damage_State ==  unique(d1$Damage_State)[4]
>DS2_rows <- d1$Damage_State ==  unique(d1$Damage_State)[3]
>DS3_rows <- d1$Damage_State ==  unique(d1$Damage_State)[2]
>DS4_rows <- d1$Damage_State ==  unique(d1$Damage_State)[1]
>
># step through all possible values of IM.type and Taxonomy and Name
>#### This is true for this subset not generalibale needs to be checked
>first ##
>
>for(IM in unique(d1$IM_type)) {
>  for(Tax in unique(d1$Taxonomy)) {
>    for(Name in unique(d1$Name)) {
>   # get a logical vector of the rows to be use DS5 in this calculation
>   calc_rows <- d1$IM_type == IM & d1$Taxonomy == Tax & d1$Name == Name
>
>
>      # check that there are any such rows in the DS5ata frame
>      if(sum(calc_rows)) {
>        cat(IM,Tax,Name,"\n")
>        # if so, fill in the four values for these rows
>VC[calc_rows]  <- D2L[1] * (1-
>as.numeric(unlist(str_split(as.character(d1[calc_rows &
>DS1_rows,]$Y_vals), pattern = ","))) ) +
>D2L[2]* (as.numeric(unlist(str_split(as.character(d1[calc_rows &
>DS1_rows,]$Y_vals), pattern = ","))) -
>as.numeric(unlist(str_split(as.character(d1[calc_rows &
>DS2_rows,]$Y_vals), pattern = ",")))) +
>D2L[3]* (as.numeric(unlist(str_split(as.character(d1[calc_rows &
>DS2_rows,]$Y_vals), pattern = ","))) -
>as.numeric(unlist(str_split(as.character(d1[calc_rows &
>DS3_rows,]$Y_vals), pattern = ",")))) +
>D2L[4] * (as.numeric(unlist(str_split(as.character(d1[calc_rows &
>DS3_rows,]$Y_vals), pattern = ","))) -
>as.numeric(unlist(str_split(as.character(d1[calc_rows &
>DS4_rows,]$Y_vals), pattern = ",")))) +
>D2L[5]*    as.numeric(unlist(str_split(as.character(d1[calc_rows &
>DS4_rows,]$Y_vals), pattern = ",")))
>        print(VC[calc_rows] )
>      }
>    }
>  }
>}
>
>  for(Tax in unique(d1$Taxonomy)) {
>    for(Name in unique(d1$Name)) {
>   # get a logical vector of the rows to be use DS5 in this calculation
>   calc_rows <- d1$IM_type == IM & d1$Taxonomy == Tax & d1$Name == Name
>
>
>      # check that there are any such rows in the DS5ata frame
>      if(sum(calc_rows)) {
>        cat(IM,Tax,Name,"\n")
>        # if so, fill in the four values for these rows
>VC[calc_rows]  <- D2L[1] * (1-
>as.numeric(unlist(str_split(as.character(d1[calc_rows &
>DS1_rows,]$Y_vals), pattern = ","))) ) +
>D2L[2]* (as.numeric(unlist(str_split(as.character(d1[calc_rows &
>DS1_rows,]$Y_vals), pattern = ","))) -
>as.numeric(unlist(str_split(as.character(d1[calc_rows &
>DS2_rows,]$Y_vals), pattern = ",")))) +
>D2L[3]* (as.numeric(unlist(str_split(as.character(d1[calc_rows &
>DS2_rows,]$Y_vals), pattern = ","))) -
>as.numeric(unlist(str_split(as.character(d1[calc_rows &
>DS3_rows,]$Y_vals), pattern = ",")))) +
>D2L[4] * (as.numeric(unlist(str_split(as.character(d1[calc_rows &
>DS3_rows,]$Y_vals), pattern = ","))) -
>as.numeric(unlist(str_split(as.character(d1[calc_rows &
>DS4_rows,]$Y_vals), pattern = ",")))) +
>D2L[5]*    as.numeric(unlist(str_split(as.character(d1[calc_rows &
>DS4_rows,]$Y_vals), pattern = ",")))
>        print(unique(VC ))
>      }
>    }
>  }
>
>Vul <- distinct(d1[,c(65,4,3)])
>
>dim(VC) <- c(length(unlist(str_split(as.character(d1[1,]$Y_vals),
>pattern = ","))),length(distinct(d1[,c(65,4,3)])$Name))  ## (rows,
>cols)
>VC
>VC_t <- t(VC)
>Vulnerability <- matrix(apply(VC_t, 1, function(x) paste(x, collapse =
>',')))
>
>Vul$Y_vals <- Vulnerability
>
>
>
>
>Best,
>ioanna
>
>
>
>
>
>
>
>
>
>
>Name    Taxonomy        Damage_State    Y_vals
>Hancilar et. al (2014) - CR/LDUAL school - Case V (Sd)
>CR/LDUAL/HEX:4+HFEX:12.8/YAPP:1990/EDU+EDU2//PLFSQ/IRRE//RSH1// Slight
>4.61e-149,0.007234459,0.158482316,0.438164341,0.671470035,0.818341464,0.901312438,0.946339742,0.970531767,0.983584997,0.990707537,0.994650876,0.996869188,0.998137671,0.998874868,0.9993101,0.999570978,0.999729626,0.999827443,0.999888548,0.999927197,0.999951931,0.999967938,0.999978407,0.999985325,0.9
>Hancilar et. al (2014) - CR/LDUAL school - Case V (Sd)
>CR/LDUAL/HEX:4+HFEX:12.8/YAPP:1990/EDU+EDU2//PLFSQ/IRRE//RSH1//
>Collapse
>0,6.49e-45,1.29e-29,3.35e-22,1.25e-17,1.8e-14,3.81e-12,2.35e-10,6.18e-09,8.78e-08,7.86e-07,4.92e-06,2.32e-05,8.76e-05,0.000274154,0.000736426,0.001740046,0.003688955,0.007130224,0.012730071,0.021221055,0.0333283,0.049687895,0.070771949,0.096832412,0.12787106
>Hancilar et. al (2014) - CR/LDUAL school - Case V (Sd)
>CR/LDUAL/HEX:4+HFEX:12.8/YAPP:1990/EDU+EDU2//PLFSQ/IRRE//RSH1//
>Extensive
>5.02e-182,3.52e-10,8.81e-07,3.62e-05,0.000346166,0.001608096,0.004916965,0.01150426,0.022416772,0.038311015,0.059392175,0.085458446,0.115998702,0.150303282,0.187564259,0.226954808,0.267685669,0.309041053,0.35039806,0.391233913,0.431124831,0.469739614,0.506830242,0.542221151,0.575798268,0.607498531
>Hancilar et. al (2014) - CR/LDUAL school - Case V (Sd)
>CR/LDUAL/HEX:4+HFEX:12.8/YAPP:1990/EDU+EDU2//PLFSQ/IRRE//RSH1//
>Moderate
>0,1.05e-10,4.75e-06,0.000479751,0.006156253,0.02983369,0.084284357,0.171401809,0.281721077,0.401071017,0.516782184,0.620508952,0.708327468,0.779597953,0.835636781,0.87866127,0.911104254,0.935237852,0.95300803,0.965993954,0.97543154,0.982263787,0.987197155,0.990753887,0.993316294,0.99516227
>Rojas(2010) - CR/LFM/DNO 2storey        CR/LFM/DNO/H:2/EDU2
>Collapse
>0,4.91e-109,2.88e-47,3.32e-23,1.65e-11,1.78e-05,0.018162775,0.356628282,0.870224163,0.992779045,0.999855873,0.999998652,0.999999993,1,1,1,1,1,1,1,1,1,1,1,1,1
>Rojas(2010) - CR/LFM/DNO 2storey        CR/LFM/DNO/H:2/EDU2
>Extensive
>0,1.21e-32,1.78e-05,0.645821244,0.999823159,0.999999999,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
>Rojas(2010) - CR/LFM/DNO 2storey        CR/LFM/DNO/H:2/EDU2
>Moderate
>0,0.077161367,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
>Rojas(2010) - CR/LFM/DNO 2storey        CR/LFM/DNO/H:2/EDU2     Slight
>0,0.996409276,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
>Rojas(2010) - CR/LFM/DNO 3storey        CR/LFM/DNO/H:3   Collapse
>0,1.29e-144,1.99e-71,1.16e-40,3.23e-24,1.59e-14,1.41e-08,6.42e-05,0.00971775,0.153727719,0.562404795,0.889217735,0.985915683,0.998997836,0.999955341,0.999998628,0.999999969,0.999999999,1,1,1,1,1,1,1,1
>Rojas(2010) - CR/LFM/DNO 3storey        CR/LFM/DNO/H:3   Extensive
>0,2.12e-51,4.89e-14,0.001339285,0.559153268,0.995244295,0.999997786,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
>Rojas(2010) - CR/LFM/DNO 3storey        CR/LFM/DNO/H:3  Moderate
>0,3.22e-07,0.992496021,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
>Rojas(2010) - CR/LFM/DNO 3storey        CR/LFM/DNO/H:3  Slight
>0,0.368907496,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
>
>
>       [[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

--
Sent from my phone. Please excuse my brevity.

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Sat Mar 21 18:14:14 2020
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Sat, 21 Mar 2020 10:14:14 -0700
Subject: [R] Strange error message, many thanks
In-Reply-To: <2098287967.412818.1584808546394@mail.yahoo.com>
References: <2098287967.412818.1584808546394.ref@mail.yahoo.com>
 <2098287967.412818.1584808546394@mail.yahoo.com>
Message-ID: <be95f3c5-97d8-b0cd-b725-cf7ae7630b5b@comcast.net>


On 3/21/20 9:35 AM, varin sacha via R-help wrote:
> Dear R-experts,
>
> Here below my R code giving an error message that I don't understand. If somebody can help me to fix it, it would be highly appreciated.
>
> # # # # # # # # # # # # # # # # # # # # # # # #
> install.packages( "robustbase",dependencies=TRUE )
> install.packages( "boot",dependencies=TRUE )
> library(boot)
> library(robustbase)
>
> n<-500
> b<-runif(n, 0, 5)
> z <- rnorm(n, 2, 3)
> a <- runif(n, 0, 5)
> df<-data.frame(b,z,a)
>
> y_model<- 0.1*b - 0.5 * z - a + 10
> y_obs <- y_model +c( rnorm(n*0.9, 0, 0.1), rnorm(n*0.1, 0, 0.5) )
Two errors: First, you need to have the y_obs vector in the df dataframe 
if you later reference it as a column.
>
>  ?# function to obtain MSE
>  ?MSE <- function(data, indices, formula) {
>  ? ? d <- data[indices, ] # allows boot to select sample
>  ? ? fit <- lmrob(formula, data = d)
>  ? ? ypred <- predict(fit)
>  ? ? mean((d[["y_obs "]] - ypred)^2)
The second error is the misspelling . Remove the space
>  ?}
>
>  ?# Make the results reproducible
>  ?set.seed(1234)
>   
>  ?# bootstrapping with 500 replications
>  ?results <- boot(data = df, statistic = MSE,
>  ? ??????????????? R = 500, formula = y_obs ~ b+z+a)
>
> boot.ci(results, type="bca")


Now get:


 > boot.ci(results, type="bca")
BOOTSTRAP CONFIDENCE INTERVAL CALCULATIONS
Based on 500 bootstrap replicates

CALL :
boot.ci(boot.out = results, type = "bca")

Intervals :
Level?????? BCa
95%?? ( 0.0237,? 0.0460 )
Calculations and Intervals on Original Scale
Some BCa intervals may be unstable

-- 

David.

> # # # # # # # # # # # # # # # # # # # # # # # # #
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Sat Mar 21 20:18:11 2020
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Sat, 21 Mar 2020 19:18:11 +0000 (UTC)
Subject: [R] Strange error message, many thanks
In-Reply-To: <be95f3c5-97d8-b0cd-b725-cf7ae7630b5b@comcast.net>
References: <2098287967.412818.1584808546394.ref@mail.yahoo.com>
 <2098287967.412818.1584808546394@mail.yahoo.com>
 <be95f3c5-97d8-b0cd-b725-cf7ae7630b5b@comcast.net>
Message-ID: <457600858.522008.1584818291839@mail.yahoo.com>

Hi Duncan, Hi David,

Many thanks, ok for the first error but David when you say "The second error is the misspelling . Remove the space". Where do I have to remove the space ?

Best,
Sacha


Le samedi 21 mars 2020 ? 18:14:30 UTC+1, David Winsemius <dwinsemius at comcast.net> a ?crit : 






On 3/21/20 9:35 AM, varin sacha via R-help wrote:
> Dear R-experts,
>
> Here below my R code giving an error message that I don't understand. If somebody can help me to fix it, it would be highly appreciated.
>
> # # # # # # # # # # # # # # # # # # # # # # # #
> install.packages( "robustbase",dependencies=TRUE )
> install.packages( "boot",dependencies=TRUE )
> library(boot)
> library(robustbase)
>
> n<-500
> b<-runif(n, 0, 5)
> z <- rnorm(n, 2, 3)
> a <- runif(n, 0, 5)
> df<-data.frame(b,z,a)
>
> y_model<- 0.1*b - 0.5 * z - a + 10
> y_obs <- y_model +c( rnorm(n*0.9, 0, 0.1), rnorm(n*0.1, 0, 0.5) )
Two errors: First, you need to have the y_obs vector in the df dataframe 
if you later reference it as a column.
>
>? ?# function to obtain MSE
>? ?MSE <- function(data, indices, formula) {
>? ? ? d <- data[indices, ] # allows boot to select sample
>? ? ? fit <- lmrob(formula, data = d)
>? ? ? ypred <- predict(fit)
>? ? ? mean((d[["y_obs "]] - ypred)^2)
The second error is the misspelling . Remove the space
>? ?}
>
>? ?# Make the results reproducible
>? ?set.seed(1234)
>? 
>? ?# bootstrapping with 500 replications
>? ?results <- boot(data = df, statistic = MSE,
>? ? ??????????????? R = 500, formula = y_obs ~ b+z+a)
>
> boot.ci(results, type="bca")


Now get:



> boot.ci(results, type="bca")

BOOTSTRAP CONFIDENCE INTERVAL CALCULATIONS
Based on 500 bootstrap replicates

CALL :
boot.ci(boot.out = results, type = "bca")

Intervals :
Level?????? BCa
95%?? ( 0.0237,? 0.0460 )
Calculations and Intervals on Original Scale
Some BCa intervals may be unstable

-- 

David.

> # # # # # # # # # # # # # # # # # # # # # # # # #
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From dw|n@em|u@ @end|ng |rom comc@@t@net  Sat Mar 21 20:26:32 2020
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Sat, 21 Mar 2020 12:26:32 -0700
Subject: [R] Strange error message, many thanks
In-Reply-To: <457600858.522008.1584818291839@mail.yahoo.com>
References: <2098287967.412818.1584808546394.ref@mail.yahoo.com>
 <2098287967.412818.1584808546394@mail.yahoo.com>
 <be95f3c5-97d8-b0cd-b725-cf7ae7630b5b@comcast.net>
 <457600858.522008.1584818291839@mail.yahoo.com>
Message-ID: <c163dc8d-8045-7db5-cf4c-3160449733cc@comcast.net>


On 3/21/20 12:18 PM, varin sacha wrote:
>   mean((d[["y_obs "]] - ypred)^2)

	[[alternative HTML version deleted]]


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Sat Mar 21 20:56:36 2020
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Sat, 21 Mar 2020 19:56:36 +0000 (UTC)
Subject: [R] Strange error message, many thanks
In-Reply-To: <c163dc8d-8045-7db5-cf4c-3160449733cc@comcast.net>
References: <2098287967.412818.1584808546394.ref@mail.yahoo.com>
 <2098287967.412818.1584808546394@mail.yahoo.com>
 <be95f3c5-97d8-b0cd-b725-cf7ae7630b5b@comcast.net>
 <457600858.522008.1584818291839@mail.yahoo.com>
 <c163dc8d-8045-7db5-cf4c-3160449733cc@comcast.net>
Message-ID: <1318373032.544073.1584820596626@mail.yahoo.com>

Hi David,

Perfect I got it now. One last precision, if I want to get the MSE value how can I get it ?







Le samedi 21 mars 2020 ? 20:26:37 UTC+1, David Winsemius <dwinsemius at comcast.net> a ?crit : 









On 3/21/20 12:18 PM, varin sacha wrote:


>?? mean((d[["y_obs "]] - ypred)^2)


From dw|n@em|u@ @end|ng |rom comc@@t@net  Sat Mar 21 21:12:21 2020
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Sat, 21 Mar 2020 13:12:21 -0700
Subject: [R] Strange error message, many thanks
In-Reply-To: <1318373032.544073.1584820596626@mail.yahoo.com>
References: <2098287967.412818.1584808546394.ref@mail.yahoo.com>
 <2098287967.412818.1584808546394@mail.yahoo.com>
 <be95f3c5-97d8-b0cd-b725-cf7ae7630b5b@comcast.net>
 <457600858.522008.1584818291839@mail.yahoo.com>
 <c163dc8d-8045-7db5-cf4c-3160449733cc@comcast.net>
 <1318373032.544073.1584820596626@mail.yahoo.com>
Message-ID: <b558ee29-2adf-07f2-54db-e16a3ca5f611@comcast.net>


On 3/21/20 12:56 PM, varin sacha wrote:
> Hi David,
>
> Perfect I got it now. One last precision, if I want to get the MSE value how can I get it ?


If I understand your question, it is answered in the help page:

help(boot,pack=boot)

# See the "Value" section

 ?str(results)

# List of 11
# $ t0?????? : num 0.0335
# $ t??????? : num [1:500, 1] 0.0424 0.0334 0.0289 0.0224 0.0369 ...

Snipped rest of output.

-- 

David

>
>
>
>
>
>
>
> Le samedi 21 mars 2020 ? 20:26:37 UTC+1, David Winsemius <dwinsemius at comcast.net> a ?crit :
>
>
>
>
>
>
>
>
>
> On 3/21/20 12:18 PM, varin sacha wrote:
>
>
>>  ?? mean((d[["y_obs "]] - ypred)^2)


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Sat Mar 21 21:48:19 2020
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Sat, 21 Mar 2020 20:48:19 +0000 (UTC)
Subject: [R] Strange error message, many thanks
In-Reply-To: <b558ee29-2adf-07f2-54db-e16a3ca5f611@comcast.net>
References: <2098287967.412818.1584808546394.ref@mail.yahoo.com>
 <2098287967.412818.1584808546394@mail.yahoo.com>
 <be95f3c5-97d8-b0cd-b725-cf7ae7630b5b@comcast.net>
 <457600858.522008.1584818291839@mail.yahoo.com>
 <c163dc8d-8045-7db5-cf4c-3160449733cc@comcast.net>
 <1318373032.544073.1584820596626@mail.yahoo.com>
 <b558ee29-2adf-07f2-54db-e16a3ca5f611@comcast.net>
Message-ID: <1262591900.563848.1584823699523@mail.yahoo.com>

David,

Great... exactly what I was looking for... Many thanks.




Le samedi 21 mars 2020 ? 21:12:31 UTC+1, David Winsemius <dwinsemius at comcast.net> a ?crit : 






On 3/21/20 12:56 PM, varin sacha wrote:
> Hi David,
>
> Perfect I got it now. One last precision, if I want to get the MSE value how can I get it ?


If I understand your question, it is answered in the help page:

help(boot,pack=boot)

# See the "Value" section

?str(results)

# List of 11
# $ t0?????? : num 0.0335
# $ t??????? : num [1:500, 1] 0.0424 0.0334 0.0289 0.0224 0.0369 ...

Snipped rest of output.


-- 

David

>
>
>
>
>
>
>
> Le samedi 21 mars 2020 ? 20:26:37 UTC+1, David Winsemius <dwinsemius at comcast.net> a ?crit :
>
>
>
>
>
>
>
>
>
> On 3/21/20 12:18 PM, varin sacha wrote:
>
>
>>? ?? mean((d[["y_obs "]] - ypred)^2)


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Sun Mar 22 00:09:13 2020
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Sat, 21 Mar 2020 23:09:13 +0000 (UTC)
Subject: [R] No predict method for hbrfit
References: <862641470.2945.1584832153668.ref@mail.yahoo.com>
Message-ID: <862641470.2945.1584832153668@mail.yahoo.com>

Dear R-helpers,

Using the HBR (high breakdown rank-based) robust estimator and the hbrfit function, I get an error saying Error in UseMethod("predict") for hbrfit. How can I solve the problem ? Many thanks for your help.

# # # # # # # # # # # # # # # # # # # # # # # #
install.packages( "robustbase",dependencies=TRUE )
install.packages( "boot",dependencies=TRUE )
install.packages( "MASS",dependencies=TRUE ?)
install.packages( "quantreg",dependencies=TRUE ?)
install.packages( "RobPer",dependencies=TRUE ?)
install_github("kloke/hbrfit") 
install.packages('http://www.stat.wmich.edu/mckean/Stat666/Pkgs/npsmReg2_0.1.1.tar.gz') 
install.packages( "RobStatTM",dependencies=TRUE )

library(boot)
library(robustbase)
library(MASS)
library(quantreg)
library(RobPer)
library(hbrfit)
library(RobStatTM)

n<-200
b<-runif(n, 0, 5)
z <- rnorm(n, 2, 3)
a <- runif(n, 0, 5)

y_model<- 0.1*b - 0.5 * z - a + 10
y_obs <- y_model +c( rnorm(n*0.9, 0, 0.1), rnorm(n*0.1, 0, 0.5) )
df<-data.frame(b,z,a,y_obs)

?# function to obtain MSE
?MSE <- function(data, indices, formula){
? ? d <- data[indices, ] # allows boot to select sample
? ? fit <- hbrfit(formula, data = d)
? ? ypred <- predict(fit)

? ?mean((d[["y_obs"]]-ypred)^2)
?}

?# Make the results reproducible
?set.seed(1234)
?
# bootstrapping with 600 replications
results <- boot(data = df, statistic = MSE,
R = 600, formula = y_obs ~ b+z+a)
str(results)

boot.ci(results, type="bca"?)
# # # # # # # # # # # # # # # # # # # # # # # # #


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Sun Mar 22 00:14:28 2020
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Sat, 21 Mar 2020 23:14:28 +0000 (UTC)
Subject: [R] Error in FastTau(formula,
 data = d) : unused argument(s) (data = d)
References: <823362416.608809.1584832468702.ref@mail.yahoo.com>
Message-ID: <823362416.608809.1584832468702@mail.yahoo.com>

Dear R-helpers,

Another problem with FastTau function from the RobPer packages. Any solution to solve my problem would be highly appreciated.


# # # # # # # # # # # # # # # # # # # # # # # #
install.packages( "boot",dependencies=TRUE )
install.packages( "RobPer",dependencies=TRUE ?)

library(boot)
library(RobPer)

n<-200
b<-runif(n, 0, 5)
z <- rnorm(n, 2, 3)
a <- runif(n, 0, 5)

y_model<- 0.1*b - 0.5 * z - a + 10
y_obs <- y_model +c( rnorm(n*0.9, 0, 0.1), rnorm(n*0.1, 0, 0.5) )
df<-data.frame(b,z,a,y_obs)

?# function to obtain MSE
?MSE <- function(data, indices, formula){
? ? d <- data[indices, ] # allows boot to select sample
? ? fit <- FastTau(formula, data = d)
? ? ypred <- predict(fit)
?? mean((d[["y_obs"]]-ypred)^2)
?}
?
# Make the results reproducible
?set.seed(1234)
?
?# bootstrapping with 600 replications
?results <- boot(data = df, statistic = MSE,
? ??????????????? R = 600, formula = model.matrix(~b+z+a))
str(results)

boot.ci(results, type="bca"?)
# # # # # # # # # # # # # # # # # # # # # # # # #


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Mar 22 00:23:58 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 21 Mar 2020 16:23:58 -0700 (PDT)
Subject: [R] How to save output of multiple loops in a matrix
In-Reply-To: <DBBPR05MB657058D353C18EB281CA0917F3F20@DBBPR05MB6570.eurprd05.prod.outlook.com>
References: <DBBPR05MB657042CF5BA5D3BE1592166BF3360@DBBPR05MB6570.eurprd05.prod.outlook.com>
 <17F90DC5-D0FD-4A2D-A6FA-0A22861A78CF@krugs.de>
 <DBBPR05MB6570B84F540BE7F511103A70F3360@DBBPR05MB6570.eurprd05.prod.outlook.com>
 <B4D78F92-CB0E-42C8-99A7-E115DE725714@krugs.de>
 <DBBPR05MB65705DE2605FFC8D9F02E2C8F3360@DBBPR05MB6570.eurprd05.prod.outlook.com>,
 <CABcYAdLvFyYDS+rFD3fboAy15Ydhks=ng82AsUZqBU9ZDU_j_A@mail.gmail.com>
 <DBBPR05MB657007DE194B7A9F01D573A8F3F20@DBBPR05MB6570.eurprd05.prod.outlook.com>,
 <A4FE5DC9-269A-483D-ADE3-18AA26552170@dcn.davis.ca.us>
 <DBBPR05MB657058D353C18EB281CA0917F3F20@DBBPR05MB6570.eurprd05.prod.outlook.com>
Message-ID: <alpine.BSF.2.00.2003211559310.62382@pedal.dcn.davis.ca.us>

You really need to pick small problems and build solutions for them as 
functions rather than copy-pasting code. Then you can build more 
complicated solutions using those small solutions that can actually be 
understood. I suspect that in a few days you would not understand your own 
code because it is so complicated... but that is not inevitable... you 
_can_ avoid creating write-only code.

library(dplyr)
#>
#> Attaching package: 'dplyr'
#> The following objects are masked from 'package:stats':
#>
#>     filter, lag
#> The following objects are masked from 'package:base':
#>
#>     intersect, setdiff, setequal, union
library(tidyr)

damage_states <- c( 'Collapse', 'Extensive', 'Moderate', 'Slight')
# the following re-definition of d1 uses the stringsAsFactors parameter to
# prevent the character data from automatically being converted to
# factors, which is much better than having to use as.character later 
# throughout your code.
d3 <- data.frame( Name = rep(c( 'Hancilar et. al (2014) - CR/LDUAL school - Case V (Sd)'
                               , 'Rojas(2010) - CR/LFM/DNO 2storey'
                               , 'Rojas(2010) - CR/LFM/DNO 3storey'
                               )
                             , each = 4
                             )
                 , Taxonomy = rep(c( 'CR/LDUAL/HEX:4+HFEX:12.8/YAPP:1990/EDU+EDU2//PLFSQ/IRRE//RSH1//'
                                   , 'CR/LFM/DNO/H:2/EDU2'
                                   , 'CR/LFM/DNO/H:3'
                                   )
                                 , each = 4
                                 )
                 , Damage_State = rep( damage_states, times = 3 )
                 , Y_vals = c( '0,6.49e-45,1.29e-29,3.35e-22,1.25e-17,1.8e-14,3.81e-12,2.35e-10,6.18e-09,8.78e-08,7.86e-07,4.92e-06,2.32e-05,8.76e-05,0.000274154,0.000736426,0.001740046,0.003688955,0.007130224,0.012730071,0.021221055,0.0333283,0.049687895,0.070771949,0.096832412,0.12787106'
                             , '5.02e-182,3.52e-10,8.81e-07,3.62e-05,0.000346166,0.001608096,0.004916965,0.01150426,0.022416772,0.038311015,0.059392175,0.085458446,0.115998702,0.150303282,0.187564259,0.226954808,0.267685669,0.309041053,0.35039806,0.391233913,0.431124831,0.469739614,0.506830242,0.542221151,0.575798268,0.607498531'
                             , '0,1.05e-10,4.75e-06,0.000479751,0.006156253,0.02983369,0.084284357,0.171401809,0.281721077,0.401071017,0.516782184,0.620508952,0.708327468,0.779597953,0.835636781,0.87866127,0.911104254,0.935237852,0.95300803,0.965993954,0.97543154,0.982263787,0.987197155,0.990753887,0.993316294,0.99516227'
                             , '4.61e-149,0.007234459,0.158482316,0.438164341,0.671470035,0.818341464,0.901312438,0.946339742,0.970531767,0.983584997,0.990707537,0.994650876,0.996869188,0.998137671,0.998874868,0.9993101,0.999570978,0.999729626,0.999827443,0.999888548,0.999927197,0.999951931,0.999967938,0.999978407,0.999985325,0.999989939'
                             , '0,4.91e-109,2.88e-47,3.32e-23,1.65e-11,1.78e-05,0.018162775,0.356628282,0.870224163,0.992779045,0.999855873,0.999998652,0.999999993,1,1,1,1,1,1,1,1,1,1,1,1,1'
                             , '0,1.21e-32,1.78e-05,0.645821244,0.999823159,0.999999999,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1'
                             , '0,0.077161367,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1'
                             , '0,0.996409276,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1'
                             , '0,1.29e-144,1.99e-71,1.16e-40,3.23e-24,1.59e-14,1.41e-08,6.42e-05,0.00971775,0.153727719,0.562404795,0.889217735,0.985915683,0.998997836,0.999955341,0.999998628,0.999999969,0.999999999,1,1,1,1,1,1,1,1'
                             , '0,2.12e-51,4.89e-14,0.001339285,0.559153268,0.995244295,0.999997786,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1'
                             , '0,3.22e-07,0.992496021,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1'
                             , '0,0.368907496,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1'
                             )
                 , stringsAsFactors = FALSE
                 )
# convert Damage_State to a factor using the desired sequence of levels
# This is useful when spread'ing the values to create columns in the 
# desired order
d3$Damage_State = factor( d3$Damage_State, levels = damage_states )
d3long <- (   d3
           %>% separate_rows( Y_vals, sep="," )
           %>% mutate( Y_vals = as.numeric( Y_vals ) )
           )
str( d3long )
#> 'data.frame':    312 obs. of  4 variables:
#>  $ Name        : chr  "Hancilar et. al (2014) - CR/LDUAL school - Case V (Sd)" "Hancilar et. al (2014) - CR/LDUAL school - Case V (Sd)" "Hancilar et. al (2014) - CR/LDUAL school - Case V (Sd)" "Hancilar et. al (2014) - CR/LDUAL school - Case V (Sd)" ...
#>  $ Taxonomy    : chr  "CR/LDUAL/HEX:4+HFEX:12.8/YAPP:1990/EDU+EDU2//PLFSQ/IRRE//RSH1//" "CR/LDUAL/HEX:4+HFEX:12.8/YAPP:1990/EDU+EDU2//PLFSQ/IRRE//RSH1//" "CR/LDUAL/HEX:4+HFEX:12.8/YAPP:1990/EDU+EDU2//PLFSQ/IRRE//RSH1//" "CR/LDUAL/HEX:4+HFEX:12.8/YAPP:1990/EDU+EDU2//PLFSQ/IRRE//RSH1//" ...
#>  $ Damage_State: Factor w/ 4 levels "Collapse","Extensive",..: 1 1 1 1 1 1 1 1 1 1 ...
#>  $ Y_vals      : num  0.00 6.49e-45 1.29e-29 3.35e-22 1.25e-17 ...

# By putting the vector of weights into a data frame you can make the 
# meaning of the vector D1L self-documenting
weights <- data.frame( Damage_State = c( "Initial", rev( damage_states ) )
                      , D2L = c( 0, 2, 10, 50, 100 )
                      )
weights
#>   Damage_State D2L
#> 1      Initial   0
#> 2       Slight   2
#> 3     Moderate  10
#> 4    Extensive  50
#> 5     Collapse 100

# Group-by to get one row per combination of Taxonomy, Damage_State,
# and Name, then create a position index value for each Y_vals value
# then split the dataframe by combinations of Taxonomy and Name. Each
# small data frame in the `data` column has its own columns Damage_State,
# Index, and Y_vals.
d3long1 <- (   d3long
            %>% group_by( Taxonomy, Damage_State, Name )
            %>% mutate( Index = seq.int( n() ) )
            %>% ungroup()
            %>% nest( data = -c( Taxonomy, Name ) )
            )
d3long1
#> # A tibble: 3 x 3
#>   Name                           Taxonomy                            data
#>   <chr>                          <chr>                               <list>
#> 1 Hancilar et. al (2014) - CR/L~ CR/LDUAL/HEX:4+HFEX:12.8/YAPP:1990~ <tibble [1~
#> 2 Rojas(2010) - CR/LFM/DNO 2sto~ CR/LFM/DNO/H:2/EDU2                 <tibble [1~
#> 3 Rojas(2010) - CR/LFM/DNO 3sto~ CR/LFM/DNO/H:3                      <tibble [1~
# function to convert a sub-dataframe into a matrix,
# built with tidyverse tools
DFL_to_matrix <- function( DFL, labelCol, indexCol, valueCol ) {
     stopifnot( 3 == length( DFL ) )
     (   DFL
     %>% spread( !!labelCol, !!valueCol )
     %>% select( -!!indexCol )
     %>% as.matrix
     )
}
# same function built with base R
DFL_to_matrix2 <- function( DFL, labelCol, indexCol, valueCol ) {
     as.matrix( data.frame( split( DFL[[ valueCol ]]
                                 , DFL[[ labelCol ]]
                                 )
                          )
              )
}
# you can test small functions and later re-use them
#DFL_to_matrix2( d3long1$data[[1]], "Damage_State", "Index", "Y_vals" )

# Now convert the long data frames into matrices
# then use matrix multiplication to weight the damage
d3long2 <- (   d3long1
            %>% mutate( mat = lapply( data
                                    , DFL_to_matrix2
                                    , labelCol = "Damage_State"
                                    , indexCol = "Index"
                                    , valueCol = "Y_vals"
                                    )
                      , vc = lapply( mat
                                   , function( m ) {
                                         mr <- m[ , rev( seq.int( ncol( m ) ) ) ]
                                         m1 <- cbind( matrix( 1, nrow = nrow( m ) )
                                                    , mr
                                                    )
                                         m0 <- cbind( mr
                                                    , matrix( 0, nrow = nrow( m ) )
                                                    )
                                         c( ( m1 - m0 ) %*% weights$D2L )
                                     }
                                   )
                      )
            )
str( d3long2[ 1,] )
#> Classes 'tbl_df', 'tbl' and 'data.frame':    1 obs. of  5 variables:
#>  $ Name    : chr "Hancilar et. al (2014) - CR/LDUAL school - Case V (Sd)"
#>  $ Taxonomy: chr "CR/LDUAL/HEX:4+HFEX:12.8/YAPP:1990/EDU+EDU2//PLFSQ/IRRE//RSH1//"
#>  $ data    :List of 1
#>   ..$ :Classes 'tbl_df', 'tbl' and 'data.frame': 104 obs. of  3 variables:
#>   .. ..$ Damage_State: Factor w/ 4 levels "Collapse","Extensive",..: 1 1 1 1 1 1 1 1 1 1 ...
#>   .. ..$ Y_vals      : num  0.00 6.49e-45 1.29e-29 3.35e-22 1.25e-17 ...
#>   .. ..$ Index       : int  1 2 3 4 5 6 7 8 9 10 ...
#>  $ mat     :List of 1
#>   ..$ : num [1:26, 1:4] 0.00 6.49e-45 1.29e-29 3.35e-22 1.25e-17 ...
#>   .. ..- attr(*, "dimnames")=List of 2
#>   .. .. ..$ : NULL
#>   .. .. ..$ : chr  "Collapse" "Extensive" "Moderate" "Slight"
#>  $ vc      :List of 1
#>   ..$ : num  9.22e-149 1.45e-02 3.17e-01 8.82e-01 1.41 ...
d3long3 <- (   d3long2
            %>% select( Name, Taxonomy, vc )
            %>% mutate( Y_vals = unlist( lapply( vc
                                               , function(v){paste(v,collapse = ",") } )))
            %>% select( -vc )
            )
d3long3
#> # A tibble: 3 x 3
#>   Name                  Taxonomy                   Y_vals
#>   <chr>                 <chr>                      <chr>
#> 1 Hancilar et. al (201~ CR/LDUAL/HEX:4+HFEX:12.8/~ 9.22e-149,0.01446893292,0.31~
#> 2 Rojas(2010) - CR/LFM~ CR/LFM/DNO/H:2/EDU2        0,2.610109488,10.000712,35.8~
#> 3 Rojas(2010) - CR/LFM~ CR/LFM/DNO/H:3             0,0.737817568,9.939968168001~


On Sat, 21 Mar 2020, Ioanna Ioannou wrote:

> Hello again,
>
> Here is the reproducible example:
>
> rm(list = ls())
> library(plyr)
> library(dplyr)
> library( data.table)
> library(stringr)
>
>
> d1 <- data.frame( Name = rep(c('Hancilar et. al (2014) - CR/LDUAL school - Case V (Sd)',
>                               'Rojas(2010) - CR/LFM/DNO 2storey',
>                               'Rojas(2010) - CR/LFM/DNO 3storey'), each = 4),
>                  Taxonomy = rep(c('CR/LDUAL/HEX:4+HFEX:12.8/YAPP:1990/EDU+EDU2//PLFSQ/IRRE//RSH1//',
>                                   'CR/LFM/DNO/H:2/EDU2',
>                                   'CR/LFM/DNO/H:3'), each = 4),
>                  Damage_State =rep(c('Collapse', 'Extensive', 'Moderate', 'Slight'), times =3),
>                  Y_vals = c('0,6.49e-45,1.29e-29,3.35e-22,1.25e-17,1.8e-14,3.81e-12,2.35e-10,6.18e-09,8.78e-08,7.86e-07,4.92e-06,2.32e-05,8.76e-05,0.000274154,0.000736426,0.001740046,0.003688955,0.007130224,0.012730071,0.021221055,0.0333283,0.049687895,0.070771949,0.096832412,0.12787106',
>                             '5.02e-182,3.52e-10,8.81e-07,3.62e-05,0.000346166,0.001608096,0.004916965,0.01150426,0.022416772,0.038311015,0.059392175,0.085458446,0.115998702,0.150303282,0.187564259,0.226954808,0.267685669,0.309041053,0.35039806,0.391233913,0.431124831,0.469739614,0.506830242,0.542221151,0.575798268,0.607498531',
>                             '0,1.05e-10,4.75e-06,0.000479751,0.006156253,0.02983369,0.084284357,0.171401809,0.281721077,0.401071017,0.516782184,0.620508952,0.708327468,0.779597953,0.835636781,0.87866127,0.911104254,0.935237852,0.95300803,0.965993954,0.97543154,0.982263787,0.987197155,0.990753887,0.993316294,0.99516227',
>                             '4.61e-149,0.007234459,0.158482316,0.438164341,0.671470035,0.818341464,0.901312438,0.946339742,0.970531767,0.983584997,0.990707537,0.994650876,0.996869188,0.998137671,0.998874868,0.9993101,0.999570978,0.999729626,0.999827443,0.999888548,0.999927197,0.999951931,0.999967938,0.999978407,0.999985325,0.999989939',
>
>                             '0,4.91e-109,2.88e-47,3.32e-23,1.65e-11,1.78e-05,0.018162775,0.356628282,0.870224163,0.992779045,0.999855873,0.999998652,0.999999993,1,1,1,1,1,1,1,1,1,1,1,1,1',
>                             '0,1.21e-32,1.78e-05,0.645821244,0.999823159,0.999999999,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1',
>                             '0,0.077161367,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1',
>                             '0,0.996409276,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1',
>
>                             '0,1.29e-144,1.99e-71,1.16e-40,3.23e-24,1.59e-14,1.41e-08,6.42e-05,0.00971775,0.153727719,0.562404795,0.889217735,0.985915683,0.998997836,0.999955341,0.999998628,0.999999969,0.999999999,1,1,1,1,1,1,1,1',
>                             '0,2.12e-51,4.89e-14,0.001339285,0.559153268,0.995244295,0.999997786,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1',
>                             '0,3.22e-07,0.992496021,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1',
>                             '0,0.368907496,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1')
>                             )
>
>
>
>
> D2L <- c(0, 2, 10, 50, 100)
>
> VC_final <- array(NA, length(distinct(d1[,c(1,2)])$Name) )
>
> # get the rows for the four damage states
> DS1_rows <- d1$Damage_State ==  unique(d1$Damage_State)[4]
> DS2_rows <- d1$Damage_State ==  unique(d1$Damage_State)[3]
> DS3_rows <- d1$Damage_State ==  unique(d1$Damage_State)[2]
> DS4_rows <- d1$Damage_State ==  unique(d1$Damage_State)[1]
>
> # step through all possible values of IM.type and Taxonomy and Name
> #### This is true for this subset not generalibale needs to be checked first ##
> VC       <- matrix(NA, 3,26)
>  for(Tax in unique(d1$Taxonomy)) {
>    for(Name in unique(d1$Name)) {
>      # get a logical vector of the rows to be use DS5 in this calculation
>      calc_rows <-  d1$Taxonomy == Tax & d1$Name == Name
>
>
>      # check that there are any such rows in the DS5ata frame
>      if(sum(calc_rows)) {
>
>        cat(Tax,Name,"\n")
>        # if so, fill in the four values for these rows
>        VC[calc_rows]  <- D2L[1] * (1- as.numeric(unlist(str_split(as.character(d1[calc_rows & DS1_rows,]$Y_vals), pattern = ","))) ) +
>          D2L[2]* (as.numeric(unlist(str_split(as.character(d1[calc_rows & DS1_rows,]$Y_vals), pattern = ","))) -
>                     as.numeric(unlist(str_split(as.character(d1[calc_rows & DS2_rows,]$Y_vals), pattern = ",")))) +
>          D2L[3]* (as.numeric(unlist(str_split(as.character(d1[calc_rows & DS2_rows,]$Y_vals), pattern = ","))) -
>                     as.numeric(unlist(str_split(as.character(d1[calc_rows & DS3_rows,]$Y_vals), pattern = ",")))) +
>          D2L[4] * (as.numeric(unlist(str_split(as.character(d1[calc_rows & DS3_rows,]$Y_vals), pattern = ","))) -
>                      as.numeric(unlist(str_split(as.character(d1[calc_rows & DS4_rows,]$Y_vals), pattern = ",")))) +
>          D2L[5]*    as.numeric(unlist(str_split(as.character(d1[calc_rows & DS4_rows,]$Y_vals), pattern = ",")))
>        print(VC[calc_rows] )
>      }
>    }
>  }
>
>
>
> Vul <- distinct(d1[,c(1,2)])
>
> dim(VC) <- c(length(unlist(str_split(as.character(d1[2,]$Y_vals), pattern = ","))),length(distinct(d1[,c(1,2)])$Name))  ## (rows, cols)
> VC
> VC_t <- t(VC)
> Vulnerability <- matrix(apply(VC_t, 1, function(x) paste(x, collapse = ',')))
>
> Vul$Y_vals <- Vulnerability
>
>
>
>
> ________________________________
> From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> Sent: 21 March 2020 16:27
> To: r-help at r-project.org <r-help at r-project.org>; Ioanna Ioannou <ii54250 at msn.com>; r-help at r-project.org <r-help at r-project.org>
> Subject: Re: [R] How to save output of multiple loops in a matrix
>
> You have again posted using HTML  and the result is unreadable. Please post a reproducible example using dput instead of assuming we can read your formatted code or table.
>
> On March 21, 2020 8:59:58 AM PDT, Ioanna Ioannou <ii54250 at msn.com> wrote:
>> Hello everyone,
>>
>> I am having this data.frame. For each row you have 26 values aggregated
>> in a cell and separated by a comma. I want to do some calculations for
>> all unique names and taxonomy which include the four different damage
>> states. I can estimate the results but i am struggling to save them in
>> a data.frame and assign next to them the unique combination of the
>> name, taxonomy. Any help much appreciated.
>>
>>
>> d1 <- read.csv('test.csv')
>>
>> D2L <- c(0, 2, 10, 50, 100)
>>
>> VC_final <- array(NA, length(distinct(d1[,c(65,4,3)])$Name) )
>> VC       <- matrix(NA,
>> length(distinct(d1[,c(65,4,3)])$Name),length(unlist(str_split(as.character(d1[1,]$Y_vals),
>> pattern = ","))))
>>
>> # get the rows for the four damage states
>> DS1_rows <- d1$Damage_State ==  unique(d1$Damage_State)[4]
>> DS2_rows <- d1$Damage_State ==  unique(d1$Damage_State)[3]
>> DS3_rows <- d1$Damage_State ==  unique(d1$Damage_State)[2]
>> DS4_rows <- d1$Damage_State ==  unique(d1$Damage_State)[1]
>>
>> # step through all possible values of IM.type and Taxonomy and Name
>> #### This is true for this subset not generalibale needs to be checked
>> first ##
>>
>> for(IM in unique(d1$IM_type)) {
>>  for(Tax in unique(d1$Taxonomy)) {
>>    for(Name in unique(d1$Name)) {
>>   # get a logical vector of the rows to be use DS5 in this calculation
>>   calc_rows <- d1$IM_type == IM & d1$Taxonomy == Tax & d1$Name == Name
>>
>>
>>      # check that there are any such rows in the DS5ata frame
>>      if(sum(calc_rows)) {
>>        cat(IM,Tax,Name,"\n")
>>        # if so, fill in the four values for these rows
>> VC[calc_rows]  <- D2L[1] * (1-
>> as.numeric(unlist(str_split(as.character(d1[calc_rows &
>> DS1_rows,]$Y_vals), pattern = ","))) ) +
>> D2L[2]* (as.numeric(unlist(str_split(as.character(d1[calc_rows &
>> DS1_rows,]$Y_vals), pattern = ","))) -
>> as.numeric(unlist(str_split(as.character(d1[calc_rows &
>> DS2_rows,]$Y_vals), pattern = ",")))) +
>> D2L[3]* (as.numeric(unlist(str_split(as.character(d1[calc_rows &
>> DS2_rows,]$Y_vals), pattern = ","))) -
>> as.numeric(unlist(str_split(as.character(d1[calc_rows &
>> DS3_rows,]$Y_vals), pattern = ",")))) +
>> D2L[4] * (as.numeric(unlist(str_split(as.character(d1[calc_rows &
>> DS3_rows,]$Y_vals), pattern = ","))) -
>> as.numeric(unlist(str_split(as.character(d1[calc_rows &
>> DS4_rows,]$Y_vals), pattern = ",")))) +
>> D2L[5]*    as.numeric(unlist(str_split(as.character(d1[calc_rows &
>> DS4_rows,]$Y_vals), pattern = ",")))
>>        print(VC[calc_rows] )
>>      }
>>    }
>>  }
>> }
>>
>>  for(Tax in unique(d1$Taxonomy)) {
>>    for(Name in unique(d1$Name)) {
>>   # get a logical vector of the rows to be use DS5 in this calculation
>>   calc_rows <- d1$IM_type == IM & d1$Taxonomy == Tax & d1$Name == Name
>>
>>
>>      # check that there are any such rows in the DS5ata frame
>>      if(sum(calc_rows)) {
>>        cat(IM,Tax,Name,"\n")
>>        # if so, fill in the four values for these rows
>> VC[calc_rows]  <- D2L[1] * (1-
>> as.numeric(unlist(str_split(as.character(d1[calc_rows &
>> DS1_rows,]$Y_vals), pattern = ","))) ) +
>> D2L[2]* (as.numeric(unlist(str_split(as.character(d1[calc_rows &
>> DS1_rows,]$Y_vals), pattern = ","))) -
>> as.numeric(unlist(str_split(as.character(d1[calc_rows &
>> DS2_rows,]$Y_vals), pattern = ",")))) +
>> D2L[3]* (as.numeric(unlist(str_split(as.character(d1[calc_rows &
>> DS2_rows,]$Y_vals), pattern = ","))) -
>> as.numeric(unlist(str_split(as.character(d1[calc_rows &
>> DS3_rows,]$Y_vals), pattern = ",")))) +
>> D2L[4] * (as.numeric(unlist(str_split(as.character(d1[calc_rows &
>> DS3_rows,]$Y_vals), pattern = ","))) -
>> as.numeric(unlist(str_split(as.character(d1[calc_rows &
>> DS4_rows,]$Y_vals), pattern = ",")))) +
>> D2L[5]*    as.numeric(unlist(str_split(as.character(d1[calc_rows &
>> DS4_rows,]$Y_vals), pattern = ",")))
>>        print(unique(VC ))
>>      }
>>    }
>>  }
>>
>> Vul <- distinct(d1[,c(65,4,3)])
>>
>> dim(VC) <- c(length(unlist(str_split(as.character(d1[1,]$Y_vals),
>> pattern = ","))),length(distinct(d1[,c(65,4,3)])$Name))  ## (rows,
>> cols)
>> VC
>> VC_t <- t(VC)
>> Vulnerability <- matrix(apply(VC_t, 1, function(x) paste(x, collapse =
>> ',')))
>>
>> Vul$Y_vals <- Vulnerability
>>
>>
>>
>>
>> Best,
>> ioanna
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>> Name    Taxonomy        Damage_State    Y_vals
>> Hancilar et. al (2014) - CR/LDUAL school - Case V (Sd)
>> CR/LDUAL/HEX:4+HFEX:12.8/YAPP:1990/EDU+EDU2//PLFSQ/IRRE//RSH1// Slight
>> 4.61e-149,0.007234459,0.158482316,0.438164341,0.671470035,0.818341464,0.901312438,0.946339742,0.970531767,0.983584997,0.990707537,0.994650876,0.996869188,0.998137671,0.998874868,0.9993101,0.999570978,0.999729626,0.999827443,0.999888548,0.999927197,0.999951931,0.999967938,0.999978407,0.999985325,0.9
>> Hancilar et. al (2014) - CR/LDUAL school - Case V (Sd)
>> CR/LDUAL/HEX:4+HFEX:12.8/YAPP:1990/EDU+EDU2//PLFSQ/IRRE//RSH1//
>> Collapse
>> 0,6.49e-45,1.29e-29,3.35e-22,1.25e-17,1.8e-14,3.81e-12,2.35e-10,6.18e-09,8.78e-08,7.86e-07,4.92e-06,2.32e-05,8.76e-05,0.000274154,0.000736426,0.001740046,0.003688955,0.007130224,0.012730071,0.021221055,0.0333283,0.049687895,0.070771949,0.096832412,0.12787106
>> Hancilar et. al (2014) - CR/LDUAL school - Case V (Sd)
>> CR/LDUAL/HEX:4+HFEX:12.8/YAPP:1990/EDU+EDU2//PLFSQ/IRRE//RSH1//
>> Extensive
>> 5.02e-182,3.52e-10,8.81e-07,3.62e-05,0.000346166,0.001608096,0.004916965,0.01150426,0.022416772,0.038311015,0.059392175,0.085458446,0.115998702,0.150303282,0.187564259,0.226954808,0.267685669,0.309041053,0.35039806,0.391233913,0.431124831,0.469739614,0.506830242,0.542221151,0.575798268,0.607498531
>> Hancilar et. al (2014) - CR/LDUAL school - Case V (Sd)
>> CR/LDUAL/HEX:4+HFEX:12.8/YAPP:1990/EDU+EDU2//PLFSQ/IRRE//RSH1//
>> Moderate
>> 0,1.05e-10,4.75e-06,0.000479751,0.006156253,0.02983369,0.084284357,0.171401809,0.281721077,0.401071017,0.516782184,0.620508952,0.708327468,0.779597953,0.835636781,0.87866127,0.911104254,0.935237852,0.95300803,0.965993954,0.97543154,0.982263787,0.987197155,0.990753887,0.993316294,0.99516227
>> Rojas(2010) - CR/LFM/DNO 2storey        CR/LFM/DNO/H:2/EDU2
>> Collapse
>> 0,4.91e-109,2.88e-47,3.32e-23,1.65e-11,1.78e-05,0.018162775,0.356628282,0.870224163,0.992779045,0.999855873,0.999998652,0.999999993,1,1,1,1,1,1,1,1,1,1,1,1,1
>> Rojas(2010) - CR/LFM/DNO 2storey        CR/LFM/DNO/H:2/EDU2
>> Extensive
>> 0,1.21e-32,1.78e-05,0.645821244,0.999823159,0.999999999,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
>> Rojas(2010) - CR/LFM/DNO 2storey        CR/LFM/DNO/H:2/EDU2
>> Moderate
>> 0,0.077161367,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
>> Rojas(2010) - CR/LFM/DNO 2storey        CR/LFM/DNO/H:2/EDU2     Slight
>> 0,0.996409276,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
>> Rojas(2010) - CR/LFM/DNO 3storey        CR/LFM/DNO/H:3   Collapse
>> 0,1.29e-144,1.99e-71,1.16e-40,3.23e-24,1.59e-14,1.41e-08,6.42e-05,0.00971775,0.153727719,0.562404795,0.889217735,0.985915683,0.998997836,0.999955341,0.999998628,0.999999969,0.999999999,1,1,1,1,1,1,1,1
>> Rojas(2010) - CR/LFM/DNO 3storey        CR/LFM/DNO/H:3   Extensive
>> 0,2.12e-51,4.89e-14,0.001339285,0.559153268,0.995244295,0.999997786,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
>> Rojas(2010) - CR/LFM/DNO 3storey        CR/LFM/DNO/H:3  Moderate
>> 0,3.22e-07,0.992496021,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
>> Rojas(2010) - CR/LFM/DNO 3storey        CR/LFM/DNO/H:3  Slight
>> 0,0.368907496,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
>>
>>
>>       [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my phone. Please excuse my brevity.
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                       Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Mar 22 01:08:49 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 21 Mar 2020 17:08:49 -0700
Subject: [R] No predict method for hbrfit
In-Reply-To: <862641470.2945.1584832153668@mail.yahoo.com>
References: <862641470.2945.1584832153668.ref@mail.yahoo.com>
 <862641470.2945.1584832153668@mail.yahoo.com>
Message-ID: <BB4B9424-64E2-4BCA-8BB8-5BC91712DB77@dcn.davis.ca.us>

Don't use packages that haven't been maintained. Or correspond with the author. Or, fix them yourself.

On March 21, 2020 4:09:13 PM PDT, varin sacha via R-help <r-help at r-project.org> wrote:
>Dear R-helpers,
>
>Using the HBR (high breakdown rank-based) robust estimator and the
>hbrfit function, I get an error saying Error in UseMethod("predict")
>for hbrfit. How can I solve the problem ? Many thanks for your help.
>
># # # # # # # # # # # # # # # # # # # # # # # #
>install.packages( "robustbase",dependencies=TRUE )
>install.packages( "boot",dependencies=TRUE )
>install.packages( "MASS",dependencies=TRUE ?)
>install.packages( "quantreg",dependencies=TRUE ?)
>install.packages( "RobPer",dependencies=TRUE ?)
>install_github("kloke/hbrfit") 
>install.packages('http://www.stat.wmich.edu/mckean/Stat666/Pkgs/npsmReg2_0.1.1.tar.gz')
>
>install.packages( "RobStatTM",dependencies=TRUE )
>
>library(boot)
>library(robustbase)
>library(MASS)
>library(quantreg)
>library(RobPer)
>library(hbrfit)
>library(RobStatTM)
>
>n<-200
>b<-runif(n, 0, 5)
>z <- rnorm(n, 2, 3)
>a <- runif(n, 0, 5)
>
>y_model<- 0.1*b - 0.5 * z - a + 10
>y_obs <- y_model +c( rnorm(n*0.9, 0, 0.1), rnorm(n*0.1, 0, 0.5) )
>df<-data.frame(b,z,a,y_obs)
>
>?# function to obtain MSE
>?MSE <- function(data, indices, formula){
>? ? d <- data[indices, ] # allows boot to select sample
>? ? fit <- hbrfit(formula, data = d)
>? ? ypred <- predict(fit)
>
>? ?mean((d[["y_obs"]]-ypred)^2)
>?}
>
>?# Make the results reproducible
>?set.seed(1234)
>?
># bootstrapping with 600 replications
>results <- boot(data = df, statistic = MSE,
>R = 600, formula = y_obs ~ b+z+a)
>str(results)
>
>boot.ci(results, type="bca"?)
># # # # # # # # # # # # # # # # # # # # # # # # #
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From dw|n@em|u@ @end|ng |rom comc@@t@net  Sun Mar 22 01:42:14 2020
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Sat, 21 Mar 2020 17:42:14 -0700
Subject: [R] No predict method for hbrfit
In-Reply-To: <862641470.2945.1584832153668@mail.yahoo.com>
References: <862641470.2945.1584832153668.ref@mail.yahoo.com>
 <862641470.2945.1584832153668@mail.yahoo.com>
Message-ID: <86f0ae97-df3e-3f5e-9ce5-59a9818df6bb@comcast.net>


On 3/21/20 4:09 PM, varin sacha via R-help wrote:
> Dear R-helpers,
>
> Using the HBR (high breakdown rank-based) robust estimator and the hbrfit function, I get an error saying Error in UseMethod("predict") for hbrfit. How can I solve the problem ? Many thanks for your help.


What makes you think there is a predict method for objects returned by 
hbrfit?

(I'm also puzzled how one would construct such a prediction. How would 
one construct an estimate of something based on a weighted Wilcoxon 
scale when the weighting depends on the original data? What weights 
would apply to the new data?)


I do note that there are residuals in the object returned from 
https://github.com/kloke/hbrfit/blob/master/R/hbrfit.R


Perhaps you can do something with that?

-- 

David


>
> # # # # # # # # # # # # # # # # # # # # # # # #
> install.packages( "robustbase",dependencies=TRUE )
> install.packages( "boot",dependencies=TRUE )
> install.packages( "MASS",dependencies=TRUE ?)
> install.packages( "quantreg",dependencies=TRUE ?)
> install.packages( "RobPer",dependencies=TRUE ?)
> install_github("kloke/hbrfit")
> install.packages('http://www.stat.wmich.edu/mckean/Stat666/Pkgs/npsmReg2_0.1.1.tar.gz')
> install.packages( "RobStatTM",dependencies=TRUE )
>
> library(boot)
> library(robustbase)
> library(MASS)
> library(quantreg)
> library(RobPer)
> library(hbrfit)
> library(RobStatTM)
>
> n<-200
> b<-runif(n, 0, 5)
> z <- rnorm(n, 2, 3)
> a <- runif(n, 0, 5)
>
> y_model<- 0.1*b - 0.5 * z - a + 10
> y_obs <- y_model +c( rnorm(n*0.9, 0, 0.1), rnorm(n*0.1, 0, 0.5) )
> df<-data.frame(b,z,a,y_obs)
>
>  ?# function to obtain MSE
>  ?MSE <- function(data, indices, formula){
>  ? ? d <- data[indices, ] # allows boot to select sample
>  ? ? fit <- hbrfit(formula, data = d)
>  ? ? ypred <- predict(fit)
>
>  ? ?mean((d[["y_obs"]]-ypred)^2)
>  ?}
>
>  ?# Make the results reproducible
>  ?set.seed(1234)
>   
> # bootstrapping with 600 replications
> results <- boot(data = df, statistic = MSE,
> R = 600, formula = y_obs ~ b+z+a)
> str(results)
>
> boot.ci(results, type="bca"?)
> # # # # # # # # # # # # # # # # # # # # # # # # #
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From tg@77m @end|ng |rom y@hoo@com  Sun Mar 22 04:01:30 2020
From: tg@77m @end|ng |rom y@hoo@com (Thomas Subia)
Date: Sat, 21 Mar 2020 20:01:30 -0700
Subject: [R] Grouping Question
References: <001001d5fff6$30c60860$92521920$.ref@yahoo.com>
Message-ID: <001001d5fff6$30c60860$92521920$@yahoo.com>

Colleagues,

Here is my dataset.

Serial	Measurement	Meas_test	Serial_test
1	17		fail		fail
1	16		pass		fail
2	12		pass		pass
2	8		pass		pass
2	10		pass		pass
3	19		fail		fail
3	13		pass		pass

If a measurement is less than or equal to 16, then Meas_test is pass. Else
Meas_test is fail
This is easy to code.

Serial_test is a pass, when all of the Meas_test are pass for a given
serial. Else Serial_test is a fail.
I'm at a loss to figure out how to do this in R.

Some guidance would be appreciated.

All the best,

Thomas Subia


From kry|ov@r00t @end|ng |rom gm@||@com  Sun Mar 22 07:24:15 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Sun, 22 Mar 2020 09:24:15 +0300
Subject: [R] Grouping Question
In-Reply-To: <001001d5fff6$30c60860$92521920$@yahoo.com>
References: <001001d5fff6$30c60860$92521920$.ref@yahoo.com>
 <001001d5fff6$30c60860$92521920$@yahoo.com>
Message-ID: <20200322092415.7ee8acca@Tarkus>

On Sat, 21 Mar 2020 20:01:30 -0700
Thomas Subia via R-help <r-help at r-project.org> wrote:

> Serial_test is a pass, when all of the Meas_test are pass for a given
> serial. Else Serial_test is a fail.

Use by/tapply in base R or dplyr::group_by if you prefer tidyverse
packages.

-- 
Best regards,
Ivan


From chr|@ho|d @end|ng |rom p@yctc@org  Sun Mar 22 07:30:30 2020
From: chr|@ho|d @end|ng |rom p@yctc@org (Chris Evans)
Date: Sun, 22 Mar 2020 06:30:30 +0000 (GMT)
Subject: [R] Grouping Question
In-Reply-To: <20200322092415.7ee8acca@Tarkus>
References: <001001d5fff6$30c60860$92521920$.ref@yahoo.com>
 <001001d5fff6$30c60860$92521920$@yahoo.com> <20200322092415.7ee8acca@Tarkus>
Message-ID: <1230263070.5747443.1584858630409.JavaMail.zimbra@psyctc.org>

Here's a very "step by step" example with dplyr as I'm trying to teach myself the Tidyverse way of being

library(dplyr)

# Serial        Measurement        Meas_test        Serial_test
# 1        17                fail                fail
# 1        16                pass                fail
# 2        12                pass                pass
# 2        8                pass                pass
# 2        10                pass                pass
# 3        19                fail                fail
# 3        13                pass                pass

dat <- as.data.frame(list(Serial = c(1,1,2,2,2,3,3),
                          Measurement = c(17, 16, 12, 8, 10, 19, 13),
                          Meas_test = c("fail", "pass", "pass", "pass", "pass", "fail", "pass")))

dat %>%
  group_by(Serial) %>%
  summarise(Serial_test = sum(Meas_test == "fail")) %>%
  mutate(Serial_test = if_else(Serial_test > 0, 1, 0),
         Serial_test = factor(Serial_test,
                              levels = 0:1,
                              labels = c("pass", "fail"))) -> groupedDat

dat %>%
  left_join(groupedDat) # add -> dat to the end to pip to dat

Gives:

  Serial Measurement Meas_test Serial_test
1      1          17      fail        fail
2      1          16      pass        fail
3      2          12      pass        pass
4      2           8      pass        pass
5      2          10      pass        pass
6      3          19      fail        fail
7      3          13      pass        fail
            
Would be easier for us if used dput() to share your data but thanks for the minimal example!

Chris

----- Original Message -----
> From: "Ivan Krylov" <krylov.r00t at gmail.com>
> To: "Thomas Subia via R-help" <r-help at r-project.org>
> Cc: "Thomas Subia" <tgs77m at yahoo.com>
> Sent: Sunday, 22 March, 2020 07:24:15
> Subject: Re: [R] Grouping Question

> On Sat, 21 Mar 2020 20:01:30 -0700
> Thomas Subia via R-help <r-help at r-project.org> wrote:
> 
>> Serial_test is a pass, when all of the Meas_test are pass for a given
>> serial. Else Serial_test is a fail.
> 
> Use by/tapply in base R or dplyr::group_by if you prefer tidyverse
> packages.
> 
> --
> Best regards,
> Ivan
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Chris Evans <chris at psyctc.org> Visiting Professor, University of Sheffield <chris.evans at sheffield.ac.uk>
I do some consultation work for the University of Roehampton <chris.evans at roehampton.ac.uk> and other places
but <chris at psyctc.org> remains my main Email address.  I have a work web site at:
   https://www.psyctc.org/psyctc/
and a site I manage for CORE and CORE system trust at:
   http://www.coresystemtrust.org.uk/
I have "semigrated" to France, see: 
   https://www.psyctc.org/pelerinage2016/semigrating-to-france/ 
That page will also take you to my blog which started with earlier joys in France and Spain!

If you want to book to talk, I am trying to keep that to Thursdays and my diary is at:
   https://www.psyctc.org/pelerinage2016/ceworkdiary/
Beware: French time, generally an hour ahead of UK.


From r@turner @end|ng |rom @uck|@nd@@c@nz  Sun Mar 22 07:59:27 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Sun, 22 Mar 2020 19:59:27 +1300
Subject: [R] [FORGED]  Grouping Question
In-Reply-To: <001001d5fff6$30c60860$92521920$@yahoo.com>
References: <001001d5fff6$30c60860$92521920$.ref@yahoo.com>
 <001001d5fff6$30c60860$92521920$@yahoo.com>
Message-ID: <5cd75ed0-d752-f511-5650-9744459d09c5@auckland.ac.nz>


On 22/03/20 4:01 pm, Thomas Subia via R-help wrote:

> Colleagues,
> 
> Here is my dataset.
> 
> Serial	Measurement	Meas_test	Serial_test
> 1	17		fail		fail
> 1	16		pass		fail
> 2	12		pass		pass
> 2	8		pass		pass
> 2	10		pass		pass
> 3	19		fail		fail
> 3	13		pass		pass
> 
> If a measurement is less than or equal to 16, then Meas_test is pass. Else
> Meas_test is fail
> This is easy to code.
> 
> Serial_test is a pass, when all of the Meas_test are pass for a given
> serial. Else Serial_test is a fail.
> I'm at a loss to figure out how to do this in R.
> 
> Some guidance would be appreciated.

In future, please present your data using dput(); makes life much easier 
for those trying to help you.  Your data are really the first two 
columns of what you presented --- the last two columns are your desired 
output.

Let "X" be these first two columns.  Define

foo <- function (X) {
a <- with(X,Measurement <= 16)
a <- ifelse(a,"pass","fail")
b <- with(X,tapply(Measurement,Serial,function(x){all(x<=16)}))
i <- match(X$Serial,names(b))
b <- ifelse(b[i],"pass","fail")
data.frame(Meas_test=a,Serial_test=b)
}

foo(X) gives:

>   Meas_test Serial_test
> 1      fail        fail
> 2      pass        fail
> 3      pass        pass
> 4      pass        pass
> 5      pass        pass
> 6      fail        fail
> 7      pass        fail

If you want input and output combined, as in the way that you presented 
your data use cbind(X,foo(X)).

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From deep@y@n@@@rk@r @end|ng |rom gm@||@com  Sun Mar 22 08:44:34 2020
From: deep@y@n@@@rk@r @end|ng |rom gm@||@com (Deepayan Sarkar)
Date: Sun, 22 Mar 2020 13:14:34 +0530
Subject: [R] [FORGED] Grouping Question
In-Reply-To: <5cd75ed0-d752-f511-5650-9744459d09c5@auckland.ac.nz>
References: <001001d5fff6$30c60860$92521920$.ref@yahoo.com>
 <001001d5fff6$30c60860$92521920$@yahoo.com>
 <5cd75ed0-d752-f511-5650-9744459d09c5@auckland.ac.nz>
Message-ID: <CADfFDC7AXGF2uhWRoEAukK0k+qB8Pgi5Y8uEWmj=V22AJ-N=NQ@mail.gmail.com>

Another possible approach is to use split -> lapply -> rbind, which I
often find to be conceptually simpler:

d <- data.frame(Serial = c(1, 1, 2, 2, 2, 3, 3),
                Measurement = c(17, 16, 12, 8, 10, 19, 13))

dlist <- split(d, d$Serial)
dlist <- lapply(dlist, within,
{
    Serial_test <- if (all(Measurement <= 16)) "pass" else "fail"
    Meas_test <- ifelse(Measurement <= 16, "pass", "fail")
})
do.call(rbind, dlist)

-Deepayan

On Sun, Mar 22, 2020 at 12:29 PM Rolf Turner <r.turner at auckland.ac.nz> wrote:
>
>
> On 22/03/20 4:01 pm, Thomas Subia via R-help wrote:
>
> > Colleagues,
> >
> > Here is my dataset.
> >
> > Serial        Measurement     Meas_test       Serial_test
> > 1     17              fail            fail
> > 1     16              pass            fail
> > 2     12              pass            pass
> > 2     8               pass            pass
> > 2     10              pass            pass
> > 3     19              fail            fail
> > 3     13              pass            pass
> >
> > If a measurement is less than or equal to 16, then Meas_test is pass. Else
> > Meas_test is fail
> > This is easy to code.
> >
> > Serial_test is a pass, when all of the Meas_test are pass for a given
> > serial. Else Serial_test is a fail.
> > I'm at a loss to figure out how to do this in R.
> >
> > Some guidance would be appreciated.
>
> In future, please present your data using dput(); makes life much easier
> for those trying to help you.  Your data are really the first two
> columns of what you presented --- the last two columns are your desired
> output.
>
> Let "X" be these first two columns.  Define
>
> foo <- function (X) {
> a <- with(X,Measurement <= 16)
> a <- ifelse(a,"pass","fail")
> b <- with(X,tapply(Measurement,Serial,function(x){all(x<=16)}))
> i <- match(X$Serial,names(b))
> b <- ifelse(b[i],"pass","fail")
> data.frame(Meas_test=a,Serial_test=b)
> }
>
> foo(X) gives:
>
> >   Meas_test Serial_test
> > 1      fail        fail
> > 2      pass        fail
> > 3      pass        pass
> > 4      pass        pass
> > 5      pass        pass
> > 6      fail        fail
> > 7      pass        fail
>
> If you want input and output combined, as in the way that you presented
> your data use cbind(X,foo(X)).
>
> cheers,
>
> Rolf Turner
>
> --
> Honorary Research Fellow
> Department of Statistics
> University of Auckland
> Phone: +64-9-373-7599 ext. 88276
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From r@turner @end|ng |rom @uck|@nd@@c@nz  Sun Mar 22 09:23:03 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Sun, 22 Mar 2020 21:23:03 +1300
Subject: [R] [FORGED] Grouping Question
In-Reply-To: <CADfFDC7AXGF2uhWRoEAukK0k+qB8Pgi5Y8uEWmj=V22AJ-N=NQ@mail.gmail.com>
References: <001001d5fff6$30c60860$92521920$.ref@yahoo.com>
 <001001d5fff6$30c60860$92521920$@yahoo.com>
 <5cd75ed0-d752-f511-5650-9744459d09c5@auckland.ac.nz>
 <CADfFDC7AXGF2uhWRoEAukK0k+qB8Pgi5Y8uEWmj=V22AJ-N=NQ@mail.gmail.com>
Message-ID: <2e12e9f5-3a46-32c6-f8e9-67250ea9e1aa@auckland.ac.nz>


On 22/03/20 8:44 pm, Deepayan Sarkar wrote:

> Another possible approach is to use split -> lapply -> rbind, which I
> often find to be conceptually simpler:
> 
> d <- data.frame(Serial = c(1, 1, 2, 2, 2, 3, 3),
>                  Measurement = c(17, 16, 12, 8, 10, 19, 13))
> 
> dlist <- split(d, d$Serial)
> dlist <- lapply(dlist, within,
> {
>      Serial_test <- if (all(Measurement <= 16)) "pass" else "fail"
>      Meas_test <- ifelse(Measurement <= 16, "pass", "fail")
> })
> do.call(rbind, dlist)

Yes!!! Much sexier than my clumsy hack-and-grind approach!

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sun Mar 22 10:59:46 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sun, 22 Mar 2020 09:59:46 +0000
Subject: [R] Error in FastTau(formula,
 data = d) : unused argument(s) (data = d)
In-Reply-To: <823362416.608809.1584832468702@mail.yahoo.com>
References: <823362416.608809.1584832468702.ref@mail.yahoo.com>
 <823362416.608809.1584832468702@mail.yahoo.com>
Message-ID: <20a5a223-d0fd-2eb9-b3f2-0ae17b658e82@sapo.pt>

Hello,

1. There is no need to install package 'boot', it's a base package.
2. The question.

The problem is that FastTau returns an object of class "list" and there 
is no 'predict' method for lists, you will have to define your own.
This is easy, it's just a matrix multiply.
And you are not calling FastTau correctly, see the function 
documentation and the new MSE function below.



MSE <- function(data, indices, formula){
   predfun <- function(object, model){
     beta <- object[["beta"]]
     as.vector(model %*% beta)
   }
   d <- data[indices, ] # allows boot to select sample
   modmat <- model.matrix(as.formula(formula), data = d)
   fit <- FastTau(x = modmat, y = d[["y_obs"]])
   ypred <- predfun(fit, modmat)
   mean((d[["y_obs"]]-ypred)^2)
}

# Make the results reproducible
set.seed(1234)
# bootstrapping with 10 replications
results <- boot(data = df, statistic = MSE,
                 R = 10, formula = ~b+z+a)

type <- c("norm","basic", "stud", "perc", "bca")
boot.ci(results, type = type[-5])


Hope this helps,

Rui Barradas

?s 23:14 de 21/03/20, varin sacha via R-help escreveu:
> Dear R-helpers,
> 
> Another problem with FastTau function from the RobPer packages. Any solution to solve my problem would be highly appreciated.
> 
> 
> # # # # # # # # # # # # # # # # # # # # # # # #
> install.packages( "boot",dependencies=TRUE )
> install.packages( "RobPer",dependencies=TRUE ?)
> 
> library(boot)
> library(RobPer)
> 
> n<-200
> b<-runif(n, 0, 5)
> z <- rnorm(n, 2, 3)
> a <- runif(n, 0, 5)
> 
> y_model<- 0.1*b - 0.5 * z - a + 10
> y_obs <- y_model +c( rnorm(n*0.9, 0, 0.1), rnorm(n*0.1, 0, 0.5) )
> df<-data.frame(b,z,a,y_obs)
> 
>  ?# function to obtain MSE
>  ?MSE <- function(data, indices, formula){
>  ? ? d <- data[indices, ] # allows boot to select sample
>  ? ? fit <- FastTau(formula, data = d)
>  ? ? ypred <- predict(fit)
>  ?? mean((d[["y_obs"]]-ypred)^2)
>  ?}
>   
> # Make the results reproducible
>  ?set.seed(1234)
>   
>  ?# bootstrapping with 600 replications
>  ?results <- boot(data = df, statistic = MSE,
>  ? ??????????????? R = 600, formula = model.matrix(~b+z+a))
> str(results)
> 
> boot.ci(results, type="bca"?)
> # # # # # # # # # # # # # # # # # # # # # # # # #
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sun Mar 22 11:02:47 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sun, 22 Mar 2020 10:02:47 +0000
Subject: [R] Error in FastTau(formula,
 data = d) : unused argument(s) (data = d)
In-Reply-To: <20a5a223-d0fd-2eb9-b3f2-0ae17b658e82@sapo.pt>
References: <823362416.608809.1584832468702.ref@mail.yahoo.com>
 <823362416.608809.1584832468702@mail.yahoo.com>
 <20a5a223-d0fd-2eb9-b3f2-0ae17b658e82@sapo.pt>
Message-ID: <4d5e8620-3563-5036-2944-bb85fbf28b9f@sapo.pt>

Correction:

In MSE

modmat <- model.matrix(as.formula(formula), data = d)

doesn't need as.formula, it should be

modmat <- model.matrix(formula, data = d)


Sorry,

rui Barradas

?s 09:59 de 22/03/20, Rui Barradas escreveu:
> Hello,
> 
> 1. There is no need to install package 'boot', it's a base package.
> 2. The question.
> 
> The problem is that FastTau returns an object of class "list" and there 
> is no 'predict' method for lists, you will have to define your own.
> This is easy, it's just a matrix multiply.
> And you are not calling FastTau correctly, see the function 
> documentation and the new MSE function below.
> 
> 
> 
> MSE <- function(data, indices, formula){
>  ? predfun <- function(object, model){
>  ??? beta <- object[["beta"]]
>  ??? as.vector(model %*% beta)
>  ? }
>  ? d <- data[indices, ] # allows boot to select sample
>  ? modmat <- model.matrix(as.formula(formula), data = d)
>  ? fit <- FastTau(x = modmat, y = d[["y_obs"]])
>  ? ypred <- predfun(fit, modmat)
>  ? mean((d[["y_obs"]]-ypred)^2)
> }
> 
> # Make the results reproducible
> set.seed(1234)
> # bootstrapping with 10 replications
> results <- boot(data = df, statistic = MSE,
>  ??????????????? R = 10, formula = ~b+z+a)
> 
> type <- c("norm","basic", "stud", "perc", "bca")
> boot.ci(results, type = type[-5])
> 
> 
> Hope this helps,
> 
> Rui Barradas
> 
> ?s 23:14 de 21/03/20, varin sacha via R-help escreveu:
>> Dear R-helpers,
>>
>> Another problem with FastTau function from the RobPer packages. Any 
>> solution to solve my problem would be highly appreciated.
>>
>>
>> # # # # # # # # # # # # # # # # # # # # # # # #
>> install.packages( "boot",dependencies=TRUE )
>> install.packages( "RobPer",dependencies=TRUE ?)
>>
>> library(boot)
>> library(RobPer)
>>
>> n<-200
>> b<-runif(n, 0, 5)
>> z <- rnorm(n, 2, 3)
>> a <- runif(n, 0, 5)
>>
>> y_model<- 0.1*b - 0.5 * z - a + 10
>> y_obs <- y_model +c( rnorm(n*0.9, 0, 0.1), rnorm(n*0.1, 0, 0.5) )
>> df<-data.frame(b,z,a,y_obs)
>>
>> ??# function to obtain MSE
>> ??MSE <- function(data, indices, formula){
>> ?? ? d <- data[indices, ] # allows boot to select sample
>> ?? ? fit <- FastTau(formula, data = d)
>> ?? ? ypred <- predict(fit)
>> ??? mean((d[["y_obs"]]-ypred)^2)
>> ??}
>> # Make the results reproducible
>> ??set.seed(1234)
>> ??# bootstrapping with 600 replications
>> ??results <- boot(data = df, statistic = MSE,
>> ?? ??????????????? R = 600, formula = model.matrix(~b+z+a))
>> str(results)
>>
>> boot.ci(results, type="bca"?)
>> # # # # # # # # # # # # # # # # # # # # # # # # #
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From pd@|gd @end|ng |rom gm@||@com  Sun Mar 22 12:54:06 2020
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Sun, 22 Mar 2020 12:54:06 +0100
Subject: [R] [FORGED] Grouping Question
In-Reply-To: <CADfFDC7AXGF2uhWRoEAukK0k+qB8Pgi5Y8uEWmj=V22AJ-N=NQ@mail.gmail.com>
References: <001001d5fff6$30c60860$92521920$.ref@yahoo.com>
 <001001d5fff6$30c60860$92521920$@yahoo.com>
 <5cd75ed0-d752-f511-5650-9744459d09c5@auckland.ac.nz>
 <CADfFDC7AXGF2uhWRoEAukK0k+qB8Pgi5Y8uEWmj=V22AJ-N=NQ@mail.gmail.com>
Message-ID: <3DB442C1-93DD-4BA3-A1F4-1B7A49245FE2@gmail.com>

Or even split -> lapply -> unsplit, in cases where you want the results put back in the original order. 

(Doesn't matter here, but it would, had it been, say, ordered 1,2,3,1,2,2,3).

-pd

> On 22 Mar 2020, at 08:44 , Deepayan Sarkar <deepayan.sarkar at gmail.com> wrote:
> 
> Another possible approach is to use split -> lapply -> rbind, which I
> often find to be conceptually simpler:
> 
> d <- data.frame(Serial = c(1, 1, 2, 2, 2, 3, 3),
>                Measurement = c(17, 16, 12, 8, 10, 19, 13))
> 
> dlist <- split(d, d$Serial)
> dlist <- lapply(dlist, within,
> {
>    Serial_test <- if (all(Measurement <= 16)) "pass" else "fail"
>    Meas_test <- ifelse(Measurement <= 16, "pass", "fail")
> })
> do.call(rbind, dlist)
> 
> -Deepayan
> 
> On Sun, Mar 22, 2020 at 12:29 PM Rolf Turner <r.turner at auckland.ac.nz> wrote:
>> 
>> 
>> On 22/03/20 4:01 pm, Thomas Subia via R-help wrote:
>> 
>>> Colleagues,
>>> 
>>> Here is my dataset.
>>> 
>>> Serial        Measurement     Meas_test       Serial_test
>>> 1     17              fail            fail
>>> 1     16              pass            fail
>>> 2     12              pass            pass
>>> 2     8               pass            pass
>>> 2     10              pass            pass
>>> 3     19              fail            fail
>>> 3     13              pass            pass
>>> 
>>> If a measurement is less than or equal to 16, then Meas_test is pass. Else
>>> Meas_test is fail
>>> This is easy to code.
>>> 
>>> Serial_test is a pass, when all of the Meas_test are pass for a given
>>> serial. Else Serial_test is a fail.
>>> I'm at a loss to figure out how to do this in R.
>>> 
>>> Some guidance would be appreciated.
>> 
>> In future, please present your data using dput(); makes life much easier
>> for those trying to help you.  Your data are really the first two
>> columns of what you presented --- the last two columns are your desired
>> output.
>> 
>> Let "X" be these first two columns.  Define
>> 
>> foo <- function (X) {
>> a <- with(X,Measurement <= 16)
>> a <- ifelse(a,"pass","fail")
>> b <- with(X,tapply(Measurement,Serial,function(x){all(x<=16)}))
>> i <- match(X$Serial,names(b))
>> b <- ifelse(b[i],"pass","fail")
>> data.frame(Meas_test=a,Serial_test=b)
>> }
>> 
>> foo(X) gives:
>> 
>>>  Meas_test Serial_test
>>> 1      fail        fail
>>> 2      pass        fail
>>> 3      pass        pass
>>> 4      pass        pass
>>> 5      pass        pass
>>> 6      fail        fail
>>> 7      pass        fail
>> 
>> If you want input and output combined, as in the way that you presented
>> your data use cbind(X,foo(X)).
>> 
>> cheers,
>> 
>> Rolf Turner
>> 
>> --
>> Honorary Research Fellow
>> Department of Statistics
>> University of Auckland
>> Phone: +64-9-373-7599 ext. 88276
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Sun Mar 22 13:54:39 2020
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Sun, 22 Mar 2020 12:54:39 +0000 (UTC)
Subject: [R] No predict method for hbrfit
In-Reply-To: <86f0ae97-df3e-3f5e-9ce5-59a9818df6bb@comcast.net>
References: <862641470.2945.1584832153668.ref@mail.yahoo.com>
 <862641470.2945.1584832153668@mail.yahoo.com>
 <86f0ae97-df3e-3f5e-9ce5-59a9818df6bb@comcast.net>
Message-ID: <718672838.239083.1584881679877@mail.yahoo.com>

Hi Jeff, 
Hi David,

Thanks for your responses. As the predict function does not work with hbrfit, I have tried? something without the predict function. There is an error message (Error in .subset2(x, i, exact = exact)) unclear to me. Many thanks for your help.

# # # # # # # # # # # # # # # # # # # # # # # #
install.packages( "boot",dependencies=TRUE )
install_github("kloke/hbrfit") 
install.packages('http://www.stat.wmich.edu/mckean/Stat666/Pkgs/npsmReg2_0.1.1.tar.gz') 
install.packages( "robustbase",dependencies=TRUE )
install.packages( "quantreg",dependencies=TRUE ?)

library(robustbase)
library(quantreg)
library(boot)
library(hbrfit)

n<-50
b<-runif(n, 0, 5)
z <- rnorm(n, 2, 3)
a <- runif(n, 0, 5)
?
y_model<- 0.1*b - 0.5 * z - a + 10
y_obs <- y_model +c( rnorm(n*0.9, 0, 0.1), rnorm(n*0.1, 0, 0.5) )
df<-data.frame(b,z,a,y_obs)
HBR<-hbrfit(y_obs ~ b+z+a)

# function to obtain MSE
MSE <- function(data, indices, formula) {
? ? d <- data[indices, ] # allows boot to select sample
? ? fit <- hbrfit(formula, data = d)
? ? ypred <- y_model
? ?mean((d[[HBR$fitted.values]]-ypred)^2)
?}

# Make the results reproducible
?set.seed(1234)
?
# bootstrapping with 60 replications
?results <- boot(data = df, statistic = MSE,
? ??????????????? R = 60, formula = y_obs ~ b+z+a)

str(results)

boot.ci(results, type="bca"?)
# # # # # # # # # # # # # # # # # # # # # # # #
?

Le dimanche 22 mars 2020 ? 01:42:49 UTC+1, David Winsemius <dwinsemius at comcast.net> a ?crit : 






On 3/21/20 4:09 PM, varin sacha via R-help wrote:
> Dear R-helpers,
>
> Using the HBR (high breakdown rank-based) robust estimator and the hbrfit function, I get an error saying Error in UseMethod("predict") for hbrfit. How can I solve the problem ? Many thanks for your help.


What makes you think there is a predict method for objects returned by 
hbrfit?

(I'm also puzzled how one would construct such a prediction. How would 
one construct an estimate of something based on a weighted Wilcoxon 
scale when the weighting depends on the original data? What weights 
would apply to the new data?)


I do note that there are residuals in the object returned from 
https://github.com/kloke/hbrfit/blob/master/R/hbrfit.R


Perhaps you can do something with that?

-- 

David


>
> # # # # # # # # # # # # # # # # # # # # # # # #
> install.packages( "robustbase",dependencies=TRUE )
> install.packages( "boot",dependencies=TRUE )
> install.packages( "MASS",dependencies=TRUE ?)
> install.packages( "quantreg",dependencies=TRUE ?)
> install.packages( "RobPer",dependencies=TRUE ?)
> install_github("kloke/hbrfit")
> install.packages('http://www.stat.wmich.edu/mckean/Stat666/Pkgs/npsmReg2_0.1.1.tar.gz')
> install.packages( "RobStatTM",dependencies=TRUE )
>
> library(boot)
> library(robustbase)
> library(MASS)
> library(quantreg)
> library(RobPer)
> library(hbrfit)
> library(RobStatTM)
>
> n<-200
> b<-runif(n, 0, 5)
> z <- rnorm(n, 2, 3)
> a <- runif(n, 0, 5)
>
> y_model<- 0.1*b - 0.5 * z - a + 10
> y_obs <- y_model +c( rnorm(n*0.9, 0, 0.1), rnorm(n*0.1, 0, 0.5) )
> df<-data.frame(b,z,a,y_obs)
>
>? ?# function to obtain MSE
>? ?MSE <- function(data, indices, formula){
>? ? ? d <- data[indices, ] # allows boot to select sample
>? ? ? fit <- hbrfit(formula, data = d)
>? ? ? ypred <- predict(fit)
>
>? ? ?mean((d[["y_obs"]]-ypred)^2)
>? ?}
>
>? ?# Make the results reproducible
>? ?set.seed(1234)
>? 
> # bootstrapping with 600 replications
> results <- boot(data = df, statistic = MSE,
> R = 600, formula = y_obs ~ b+z+a)
> str(results)
>
> boot.ci(results, type="bca"?)
> # # # # # # # # # # # # # # # # # # # # # # # # #
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Sun Mar 22 13:55:20 2020
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Sun, 22 Mar 2020 12:55:20 +0000 (UTC)
Subject: [R] Error in FastTau(formula,
 data = d) : unused argument(s) (data = d)
In-Reply-To: <4d5e8620-3563-5036-2944-bb85fbf28b9f@sapo.pt>
References: <823362416.608809.1584832468702.ref@mail.yahoo.com>
 <823362416.608809.1584832468702@mail.yahoo.com>
 <20a5a223-d0fd-2eb9-b3f2-0ae17b658e82@sapo.pt>
 <4d5e8620-3563-5036-2944-bb85fbf28b9f@sapo.pt>
Message-ID: <961996819.254782.1584881720718@mail.yahoo.com>

Hi Rui,

Many thanks... it perfectly works !!!!

Best,

Sacha


Le dimanche 22 mars 2020 ? 11:02:49 UTC+1, Rui Barradas <ruipbarradas at sapo.pt> a ?crit : 





Correction:

In MSE

modmat <- model.matrix(as.formula(formula), data = d)

doesn't need as.formula, it should be

modmat <- model.matrix(formula, data = d)


Sorry,

rui Barradas

?s 09:59 de 22/03/20, Rui Barradas escreveu:
> Hello,
> 
> 1. There is no need to install package 'boot', it's a base package.
> 2. The question.
> 
> The problem is that FastTau returns an object of class "list" and there 
> is no 'predict' method for lists, you will have to define your own.
> This is easy, it's just a matrix multiply.
> And you are not calling FastTau correctly, see the function 
> documentation and the new MSE function below.
> 
> 
> 
> MSE <- function(data, indices, formula){
>? ? predfun <- function(object, model){
>? ??? beta <- object[["beta"]]
>? ??? as.vector(model %*% beta)
>? ? }
>? ? d <- data[indices, ] # allows boot to select sample
>? ? modmat <- model.matrix(as.formula(formula), data = d)
>? ? fit <- FastTau(x = modmat, y = d[["y_obs"]])
>? ? ypred <- predfun(fit, modmat)
>? ? mean((d[["y_obs"]]-ypred)^2)
> }
> 
> # Make the results reproducible
> set.seed(1234)
> # bootstrapping with 10 replications
> results <- boot(data = df, statistic = MSE,
>? ??????????????? R = 10, formula = ~b+z+a)
> 
> type <- c("norm","basic", "stud", "perc", "bca")
> boot.ci(results, type = type[-5])
> 
> 
> Hope this helps,
> 
> Rui Barradas
> 
> ?s 23:14 de 21/03/20, varin sacha via R-help escreveu:
>> Dear R-helpers,
>>
>> Another problem with FastTau function from the RobPer packages. Any 
>> solution to solve my problem would be highly appreciated.
>>
>>
>> # # # # # # # # # # # # # # # # # # # # # # # #
>> install.packages( "boot",dependencies=TRUE )
>> install.packages( "RobPer",dependencies=TRUE ?)
>>
>> library(boot)
>> library(RobPer)
>>
>> n<-200
>> b<-runif(n, 0, 5)
>> z <- rnorm(n, 2, 3)
>> a <- runif(n, 0, 5)
>>
>> y_model<- 0.1*b - 0.5 * z - a + 10
>> y_obs <- y_model +c( rnorm(n*0.9, 0, 0.1), rnorm(n*0.1, 0, 0.5) )
>> df<-data.frame(b,z,a,y_obs)
>>
>> ??# function to obtain MSE
>> ??MSE <- function(data, indices, formula){
>> ?? ? d <- data[indices, ] # allows boot to select sample
>> ?? ? fit <- FastTau(formula, data = d)
>> ?? ? ypred <- predict(fit)
>> ??? mean((d[["y_obs"]]-ypred)^2)
>> ??}
>> # Make the results reproducible
>> ??set.seed(1234)
>> ??# bootstrapping with 600 replications
>> ??results <- boot(data = df, statistic = MSE,
>> ?? ??????????????? R = 600, formula = model.matrix(~b+z+a))
>> str(results)
>>
>> boot.ci(results, type="bca"?)
>> # # # # # # # # # # # # # # # # # # # # # # # # #
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.

>>
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From vm|tov @end|ng |rom gm@||@com  Sun Mar 22 13:21:03 2020
From: vm|tov @end|ng |rom gm@||@com (Venelin Mitov)
Date: Sun, 22 Mar 2020 13:21:03 +0100
Subject: [R] Fwd: Package PCMBaseCpp stops the R process on Fedora-clang
In-Reply-To: <CADa9HGLvWxgwT1xh-qLuS-pVN=dD3mO_73MhJszJYDWsTj8rcg@mail.gmail.com>
References: <CADa9HGLvWxgwT1xh-qLuS-pVN=dD3mO_73MhJszJYDWsTj8rcg@mail.gmail.com>
Message-ID: <CADa9HGLmYbqzGzcBGhbrphhLLcGW6_jcPQXyQmkRy641mrw6KA@mail.gmail.com>

Dear R-help-list,

In an e-mail received yesterday from a member of the CRAN maintainer
team, I was informed that the
package PCMBaseCpp (https://CRAN.R-project.org/package=PCMBaseCpp)
is going to be removed from CRAN on April 4th,
due to an R-process crash during unit-tests on the fedora-clang
flavour. The problem is the following:

1. All PCMBaseCpp unit-tests pass on all CRAN flavours except
r-devel-linux-x86_64-fedora-clang.
2. Running devtools::check_rhub(): succeeds on all platforms including
fedora-clang. Hence, I've no way to reproduce the error.
3. The line of code that is causing a segfault error and a crash of
the R-process is a call to the
std::logic_error() constructor. This line of code is found in the package's file
src/QuadraticPoly.h:

throw logic_error(oss.str());

4. However, throwing the above exception is the correct behaviour - the
exception is intercepted (caught) at a higher functional level of the
PCMBaseCpp package, where it is correctly handled. The same line of code is
executed without problem on all other flavours.

5. Hence, my question is why std::logic_error(oss.str()) is
throwing a memory allocation exception on this specific flavour on
CRAN?

I couldn't find anywhere in the R extension manual a text stating that
it was illegal to create std::logic_error objects in C++ code. The
fact that the same code is passing on all other flavours including
rhub's fedora-clang suggests that this might be a local problem in the
fedora-clang test environment on CRAN.

Any advice on how I should proceed to prevent the package getting
removed from CRAN?

Best regards,
Venelin MITOV


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Mar 22 16:36:18 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 22 Mar 2020 08:36:18 -0700
Subject: [R] Fwd: Package PCMBaseCpp stops the R process on Fedora-clang
In-Reply-To: <CADa9HGLmYbqzGzcBGhbrphhLLcGW6_jcPQXyQmkRy641mrw6KA@mail.gmail.com>
References: <CADa9HGLvWxgwT1xh-qLuS-pVN=dD3mO_73MhJszJYDWsTj8rcg@mail.gmail.com>
 <CADa9HGLmYbqzGzcBGhbrphhLLcGW6_jcPQXyQmkRy641mrw6KA@mail.gmail.com>
Message-ID: <21D4733A-AA50-4B26-B1ED-58526BA6A71A@dcn.davis.ca.us>

Wrong list. Way wrong. Pay attention to the Posting Guide.

The correct list would be the Rcpp-devel. If your question were less specific, then r-package-devel. But absolutely not r-help.

There are known issues with Rcpp being fixed right now on the fly... go read the recent archives for Rcpp-devel.
-- 
Sent from my phone. Please excuse my brevity.


From tr|ng @end|ng |rom gvdnet@dk  Sun Mar 22 17:27:48 2020
From: tr|ng @end|ng |rom gvdnet@dk (Troels Ring)
Date: Sun, 22 Mar 2020 17:27:48 +0100
Subject: [R] cannot coerce class '"expression"' to a data.frame
In-Reply-To: FhbojRa968YRwFhbpjQ9VT
References: <e66f01d5ff5c$fc070410$f4150c30$@gvdnet.dk>
 <2d73501d5ff7e$7b301ad0$71905070$@gvdnet.dk> FhbojRa968YRwFhbpjQ9VT
Message-ID: <ecde01d60066$d3af17e0$7b0d47a0$@gvdnet.dk>

Thanks a lot - this does indeed do the trick!

-----Oprindelig meddelelse-----
Fra: peter dalgaard <pdalgd at gmail.com> 
Sendt: 21. marts 2020 18:08
Til: Troels Ring <tring at gvdnet.dk>
Emne: Re: [R] cannot coerce class '"expression"' to a data.frame

Oops, disregard previous...

I'm no ggplot expert, but google "ggplot plotmath" suggests that it wants unparsed expressions, so:

dd <- data.frame(x=1:7, ID = I(ID), ID2 = sapply(ID, deparse))
ggplot(data=dd,aes(x=x,y=x,label=ID2)) + geom_point(color="blue",size=4) + geom_label(parse=TRUE)

seems to do something in the right direction.

-p

> On 21 Mar 2020, at 13:44 , Troels Ring <tring at gvdnet.dk> wrote:
> 
> Thanks a lot - actually I was on my way to ggplot2 - and still gets 
> struck - sorry ?
> 
> ID <- c("HCl 7","HCl 5.25","HCl 3.5","HCL 7 no Na","HCl 3.5  No Na",
>        expression(paste(H[2]*SO[4]," 7 no  Na")),
>        expression(paste(HNO[3]," 7 No Na")))
> 
> dd <- data.frame(x=1:7, ID = I(ID))
> 
> library(ggplot2)
> 
> ggplot(data=dd,aes(x=x,y=x,label=ID))+geom_point(color="blue",size=4)
> # Error: Aesthetics must be valid data columns. Problematic aesthetic(s): label = ID. 
> # Did you mistype the name of a data column or forget to add stat()?
> 
> -----Oprindelig meddelelse-----
> Fra: peter dalgaard <pdalgd at gmail.com>
> Sendt: 21. marts 2020 11:14
> Til: Troels Ring <tring at gvdnet.dk>
> Emne: Re: [R] cannot coerce class '"expression"' to a data.frame
> 
> This seems to work:
> 
> ID <- c("HCl 7","HCl 5.25","HCl 3.5","HCL 7 no Na","HCl 3.5  No Na",
>        expression(paste(HSO[4]," 7 no  Na")),
>        expression(paste(HNO[3]," 7 No Na")))
> 
> ## Actually H[2]*SO[4], no?
> 
> dd <- data.frame(x=1:7, ID = I(ID))
> plot(dd$x, dd$x, typ="n")
> text(dd$x, dd$x, dd$ID)
> 
> 
>> On 21 Mar 2020, at 09:44 , Troels Ring <tring at gvdnet.dk> wrote:
>> 
>> Dear friends - I have some old data of chemical results and want to 
>> annotate the points with chemical formula. If I just do
>> 
>> ID <- c("HCl 7","HCl 5.25","HCl 3.5","HCL 7 no Na","HCl 3.5  No Na",
>> 
>> "HSO4 7 no  Na",
>> 
>>       "HNO3 7 No Na")
>> 
>> I can make a data.frame like
>> 
>> DD <- data.frame(x=1:7,ID)
>> 
>> 
>> 
>> and plotting works fine. 
>> 
>> But if I try to format sulfuric acid and nitric acid like
>> 
>> ID <- c("HCl 7","HCl 5.25","HCl 3.5","HCL 7 no Na","HCl 3.5  No Na",
>> 
>>       expression(paste(HSO[4]," 7 no  Na")),
>> 
>>       expression(paste(HNO[3]," 7 No Na")))
>> 
>> 
>> 
>> DD <- data.frame(x=1:7,ID)
>> 
>> Elicits an error
>> 
>> Error in as.data.frame.default(x[[i]], optional = TRUE) : 
>> 
>> cannot coerce class '"expression"' to a data.frame
>> 
>> and plotting is prohibited - so how is this bypassed?
>> 
>> 
>> 
>> I'm on Windows 10,
>> 
>> R version 3.6.1 (2019-07-05)
>> 
>> 
>> 
>> All best wishes
>> 
>> Troels Ring, MD
>> 
>> Aalborg, Denmark
>> 
>> 
>> This email has been scanned by BullGuard antivirus protection.
>> For more info visit www.bullguard.com 
>> <http://www.bullguard.com/tracking.aspx?affiliate=bullguard&buyaffili
>> a
>> te=smt
>> p&url=/>
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> --
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School Solbjerg Plads 3, 
> 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> This email has been scanned by BullGuard antivirus protection.
> For more info visit www.bullguard.com
> 
> 

--
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com











This email has been scanned by BullGuard antivirus protection.
For more info visit www.bullguard.com


From petr@p|k@| @end|ng |rom prechez@@cz  Mon Mar 23 08:04:54 2020
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Mon, 23 Mar 2020 07:04:54 +0000
Subject: [R] How to save output of multiple loops in a matrix
In-Reply-To: <DBBPR05MB657058D353C18EB281CA0917F3F20@DBBPR05MB6570.eurprd05.prod.outlook.com>
References: <DBBPR05MB657042CF5BA5D3BE1592166BF3360@DBBPR05MB6570.eurprd05.prod.outlook.com>
 <17F90DC5-D0FD-4A2D-A6FA-0A22861A78CF@krugs.de>
 <DBBPR05MB6570B84F540BE7F511103A70F3360@DBBPR05MB6570.eurprd05.prod.outlook.com>
 <B4D78F92-CB0E-42C8-99A7-E115DE725714@krugs.de>
 <DBBPR05MB65705DE2605FFC8D9F02E2C8F3360@DBBPR05MB6570.eurprd05.prod.outlook.com>,
 <CABcYAdLvFyYDS+rFD3fboAy15Ydhks=ng82AsUZqBU9ZDU_j_A@mail.gmail.com>
 <DBBPR05MB657007DE194B7A9F01D573A8F3F20@DBBPR05MB6570.eurprd05.prod.outlook.com>,
 <A4FE5DC9-269A-483D-ADE3-18AA26552170@dcn.davis.ca.us>
 <DBBPR05MB657058D353C18EB281CA0917F3F20@DBBPR05MB6570.eurprd05.prod.outlook.com>
Message-ID: <6a2e034bb43c4e1c90530b64a2b0cce9@SRVEXCHCM1302.precheza.cz>

Hi

What about instead of using split inside several cycles prepare new data
frame and perform required calculation on it
E.g. for the first row you get from second ant fourth column following
(26,2) matrix.

cbind(d1[1,3],unlist(strsplit(d1[1,4],",")))
      [,1]       [,2]         
 [1,] "Collapse" "0"          
 [2,] "Collapse" "6.49e-45"   
 [3,] "Collapse" "1.29e-29"   
 [4,] "Collapse" "3.35e-22"   
 [5,]
....

you could easily cycle through rows by

lll <- vector("list", 12)
for (i in 1:12) {

lll[[i]] <- cbind(d1[i,3],unlist(strsplit(d1[i,4],",")))
}

str(lll)
List of 12
 $ : chr [1:26, 1:2] "Collapse" "Collapse" "Collapse" "Collapse" ...
 $ : chr [1:26, 1:2] "Extensive" "Extensive" "Extensive" "Extensive" ...
 $ : chr [1:26, 1:2] "Moderate" "Moderate" "Moderate" "Moderate" ...

by do call you could change it to matrix and/or data.frame
> ddd <- data.frame(do.call(rbind, lll))
> head(ddd)
        X1       X2
1 Collapse        0
2 Collapse 6.49e-45
3 Collapse 1.29e-29
4 Collapse 3.35e-22
5 Collapse 1.25e-17
6 Collapse  1.8e-14
> str(data.frame(ddd))
'data.frame':   312 obs. of  2 variables:
 $ X1: chr  "Collapse" "Collapse" "Collapse" "Collapse" ...
 $ X2: chr  "0" "6.49e-45" "1.29e-29" "3.35e-22" ...
> dim(ddd)
[1] 312   2
>

I am not sure if this is what you want but my feeling is that it makes
further calculation easier.

S pozdravem | Best Regards
RNDr. Petr PIKAL
Vedouc? V?zkumu a v?voje | Research Manager
PRECHEZA a.s.
n?b?. Dr. Edvarda Bene?e 1170/24 | 750 02 P?erov | Czech Republic
Tel: +420 581 252 256 | GSM: +420 724 008 364
petr.pikal at precheza.cz | www.precheza.cz

Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch
partner? PRECHEZA a.s. jsou zve?ejn?ny na:
https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information about
processing and protection of business partner's personal data are available
on website: https://www.precheza.cz/en/personal-data-protection-principles/
D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn?
a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti:
https://www.precheza.cz/01-dovetek/ | This email and any documents attached
to it may be confidential and are subject to the legally binding disclaimer:
https://www.precheza.cz/en/01-disclaimer/

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Ioanna Ioannou
> Sent: Saturday, March 21, 2020 5:54 PM
> To: r-help at r-project.org
> Subject: Re: [R] How to save output of multiple loops in a matrix
> 
> Hello again,
> 
> Here is the reproducible example:
> 
> rm(list = ls())
> library(plyr)
> library(dplyr)
> library( data.table)
> library(stringr)
> 
> 
> d1 <- data.frame( Name = rep(c('Hancilar et. al (2014) - CR/LDUAL school -
> Case V (Sd)',
>                                'Rojas(2010) - CR/LFM/DNO 2storey',
>                                'Rojas(2010) - CR/LFM/DNO 3storey'), each =
4),
>                   Taxonomy =
> rep(c('CR/LDUAL/HEX:4+HFEX:12.8/YAPP:1990/EDU+EDU2//PLFSQ/IRRE//RSH1/
> /',
>                                    'CR/LFM/DNO/H:2/EDU2',
>                                    'CR/LFM/DNO/H:3'), each = 4),
>                   Damage_State =rep(c('Collapse', 'Extensive', 'Moderate',
'Slight'),
> times =3),
>                   Y_vals =
c('0,6.49e-45,1.29e-29,3.35e-22,1.25e-17,1.8e-14,3.81e-
> 12,2.35e-10,6.18e-09,8.78e-08,7.86e-07,4.92e-06,2.32e-05,8.76e-
> 05,0.000274154,0.000736426,0.001740046,0.003688955,0.007130224,0.012730
> 071,0.021221055,0.0333283,0.049687895,0.070771949,0.096832412,0.1278710
> 6',
>                              '5.02e-182,3.52e-10,8.81e-07,3.62e-
> 05,0.000346166,0.001608096,0.004916965,0.01150426,0.022416772,0.0383110
> 15,0.059392175,0.085458446,0.115998702,0.150303282,0.187564259,0.226954
> 808,0.267685669,0.309041053,0.35039806,0.391233913,0.431124831,0.469739
> 614,0.506830242,0.542221151,0.575798268,0.607498531',
>                              '0,1.05e-10,4.75e-
> 06,0.000479751,0.006156253,0.02983369,0.084284357,0.171401809,0.2817210
> 77,0.401071017,0.516782184,0.620508952,0.708327468,0.779597953,0.835636
> 781,0.87866127,0.911104254,0.935237852,0.95300803,0.965993954,0.9754315
> 4,0.982263787,0.987197155,0.990753887,0.993316294,0.99516227',
>                              '4.61e-
> 149,0.007234459,0.158482316,0.438164341,0.671470035,0.818341464,0.90131
> 2438,0.946339742,0.970531767,0.983584997,0.990707537,0.994650876,0.9968
> 69188,0.998137671,0.998874868,0.9993101,0.999570978,0.999729626,0.99982
> 7443,0.999888548,0.999927197,0.999951931,0.999967938,0.999978407,0.9999
> 85325,0.999989939',
> 
>
'0,4.91e-109,2.88e-47,3.32e-23,1.65e-11,1.78e-
> 05,0.018162775,0.356628282,0.870224163,0.992779045,0.999855873,0.999998
> 652,0.999999993,1,1,1,1,1,1,1,1,1,1,1,1,1',
>                              '0,1.21e-32,1.78e-
>
05,0.645821244,0.999823159,0.999999999,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
,1'
> ,
>
'0,0.077161367,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1',
>
'0,0.996409276,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1',
> 
>
'0,1.29e-144,1.99e-71,1.16e-40,3.23e-24,1.59e-14,1.41e-
> 08,6.42e-
> 05,0.00971775,0.153727719,0.562404795,0.889217735,0.985915683,0.9989978
> 36,0.999955341,0.999998628,0.999999969,0.999999999,1,1,1,1,1,1,1,1',
>                              '0,2.12e-51,4.89e-
>
14,0.001339285,0.559153268,0.995244295,0.999997786,1,1,1,1,1,1,1,1,1,1,1,1,1
> ,1,1,1,1,1,1',
>                              '0,3.22e-
> 07,0.992496021,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1',
>
'0,0.368907496,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1')
>                              )
> 
> 
> 
> 
> D2L <- c(0, 2, 10, 50, 100)
> 
> VC_final <- array(NA, length(distinct(d1[,c(1,2)])$Name) )
> 
> # get the rows for the four damage states DS1_rows <- d1$Damage_State ==
> unique(d1$Damage_State)[4] DS2_rows <- d1$Damage_State ==
> unique(d1$Damage_State)[3] DS3_rows <- d1$Damage_State ==
> unique(d1$Damage_State)[2] DS4_rows <- d1$Damage_State ==
> unique(d1$Damage_State)[1]
> 
> # step through all possible values of IM.type and Taxonomy and Name ####
> This is true for this subset not generalibale needs to be checked first ##
> VC       <- matrix(NA, 3,26)
>   for(Tax in unique(d1$Taxonomy)) {
>     for(Name in unique(d1$Name)) {
>       # get a logical vector of the rows to be use DS5 in this calculation
>       calc_rows <-  d1$Taxonomy == Tax & d1$Name == Name
> 
> 
>       # check that there are any such rows in the DS5ata frame
>       if(sum(calc_rows)) {
> 
>         cat(Tax,Name,"\n")
>         # if so, fill in the four values for these rows
>         VC[calc_rows]  <- D2L[1] * (1-
> as.numeric(unlist(str_split(as.character(d1[calc_rows &
DS1_rows,]$Y_vals),
> pattern = ","))) ) +
>           D2L[2]* (as.numeric(unlist(str_split(as.character(d1[calc_rows &
> DS1_rows,]$Y_vals), pattern = ","))) -
>                      as.numeric(unlist(str_split(as.character(d1[calc_rows
&
> DS2_rows,]$Y_vals), pattern = ",")))) +
>           D2L[3]* (as.numeric(unlist(str_split(as.character(d1[calc_rows &
> DS2_rows,]$Y_vals), pattern = ","))) -
>                      as.numeric(unlist(str_split(as.character(d1[calc_rows
&
> DS3_rows,]$Y_vals), pattern = ",")))) +
>           D2L[4] * (as.numeric(unlist(str_split(as.character(d1[calc_rows
&
> DS3_rows,]$Y_vals), pattern = ","))) -
>
as.numeric(unlist(str_split(as.character(d1[calc_rows &
> DS4_rows,]$Y_vals), pattern = ",")))) +
>           D2L[5]*    as.numeric(unlist(str_split(as.character(d1[calc_rows
&
> DS4_rows,]$Y_vals), pattern = ",")))
>         print(VC[calc_rows] )
>       }
>     }
>   }
> 
> 
> 
> Vul <- distinct(d1[,c(1,2)])
> 
> dim(VC) <- c(length(unlist(str_split(as.character(d1[2,]$Y_vals), pattern
=
> ","))),length(distinct(d1[,c(1,2)])$Name))  ## (rows, cols) VC VC_t <-
t(VC)
> Vulnerability <- matrix(apply(VC_t, 1, function(x) paste(x, collapse =
',')))
> 
> Vul$Y_vals <- Vulnerability
> 
> 
> 
> 
> ________________________________
> From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> Sent: 21 March 2020 16:27
> To: r-help at r-project.org <r-help at r-project.org>; Ioanna Ioannou
> <ii54250 at msn.com>; r-help at r-project.org <r-help at r-project.org>
> Subject: Re: [R] How to save output of multiple loops in a matrix
> 
> You have again posted using HTML  and the result is unreadable. Please
post
> a reproducible example using dput instead of assuming we can read your
> formatted code or table.
> 
> On March 21, 2020 8:59:58 AM PDT, Ioanna Ioannou <ii54250 at msn.com>
> wrote:
> >Hello everyone,
> >
> >I am having this data.frame. For each row you have 26 values aggregated
> >in a cell and separated by a comma. I want to do some calculations for
> >all unique names and taxonomy which include the four different damage
> >states. I can estimate the results but i am struggling to save them in
> >a data.frame and assign next to them the unique combination of the
> >name, taxonomy. Any help much appreciated.
> >
> >
> >d1 <- read.csv('test.csv')
> >
> >D2L <- c(0, 2, 10, 50, 100)
> >
> >VC_final <- array(NA, length(distinct(d1[,c(65,4,3)])$Name) )
> >VC       <- matrix(NA,
> >length(distinct(d1[,c(65,4,3)])$Name),length(unlist(str_split(as.charac
> >ter(d1[1,]$Y_vals),
> >pattern = ","))))
> >
> ># get the rows for the four damage states DS1_rows <- d1$Damage_State
> >==  unique(d1$Damage_State)[4] DS2_rows <- d1$Damage_State ==
> >unique(d1$Damage_State)[3] DS3_rows <- d1$Damage_State ==
> >unique(d1$Damage_State)[2] DS4_rows <- d1$Damage_State ==
> >unique(d1$Damage_State)[1]
> >
> ># step through all possible values of IM.type and Taxonomy and Name
> >#### This is true for this subset not generalibale needs to be checked
> >first ##
> >
> >for(IM in unique(d1$IM_type)) {
> >  for(Tax in unique(d1$Taxonomy)) {
> >    for(Name in unique(d1$Name)) {
> >   # get a logical vector of the rows to be use DS5 in this calculation
> >   calc_rows <- d1$IM_type == IM & d1$Taxonomy == Tax & d1$Name ==
> Name
> >
> >
> >      # check that there are any such rows in the DS5ata frame
> >      if(sum(calc_rows)) {
> >        cat(IM,Tax,Name,"\n")
> >        # if so, fill in the four values for these rows VC[calc_rows]
> ><- D2L[1] * (1- as.numeric(unlist(str_split(as.character(d1[calc_rows &
> >DS1_rows,]$Y_vals), pattern = ","))) ) +
> >D2L[2]* (as.numeric(unlist(str_split(as.character(d1[calc_rows &
> >DS1_rows,]$Y_vals), pattern = ","))) -
> >as.numeric(unlist(str_split(as.character(d1[calc_rows &
> >DS2_rows,]$Y_vals), pattern = ",")))) +
> >D2L[3]* (as.numeric(unlist(str_split(as.character(d1[calc_rows &
> >DS2_rows,]$Y_vals), pattern = ","))) -
> >as.numeric(unlist(str_split(as.character(d1[calc_rows &
> >DS3_rows,]$Y_vals), pattern = ",")))) + D2L[4] *
> >(as.numeric(unlist(str_split(as.character(d1[calc_rows &
> >DS3_rows,]$Y_vals), pattern = ","))) -
> >as.numeric(unlist(str_split(as.character(d1[calc_rows &
> >DS4_rows,]$Y_vals), pattern = ",")))) +
> >D2L[5]*    as.numeric(unlist(str_split(as.character(d1[calc_rows &
> >DS4_rows,]$Y_vals), pattern = ",")))
> >        print(VC[calc_rows] )
> >      }
> >    }
> >  }
> >}
> >
> >  for(Tax in unique(d1$Taxonomy)) {
> >    for(Name in unique(d1$Name)) {
> >   # get a logical vector of the rows to be use DS5 in this calculation
> >   calc_rows <- d1$IM_type == IM & d1$Taxonomy == Tax & d1$Name ==
> Name
> >
> >
> >      # check that there are any such rows in the DS5ata frame
> >      if(sum(calc_rows)) {
> >        cat(IM,Tax,Name,"\n")
> >        # if so, fill in the four values for these rows VC[calc_rows]
> ><- D2L[1] * (1- as.numeric(unlist(str_split(as.character(d1[calc_rows &
> >DS1_rows,]$Y_vals), pattern = ","))) ) +
> >D2L[2]* (as.numeric(unlist(str_split(as.character(d1[calc_rows &
> >DS1_rows,]$Y_vals), pattern = ","))) -
> >as.numeric(unlist(str_split(as.character(d1[calc_rows &
> >DS2_rows,]$Y_vals), pattern = ",")))) +
> >D2L[3]* (as.numeric(unlist(str_split(as.character(d1[calc_rows &
> >DS2_rows,]$Y_vals), pattern = ","))) -
> >as.numeric(unlist(str_split(as.character(d1[calc_rows &
> >DS3_rows,]$Y_vals), pattern = ",")))) + D2L[4] *
> >(as.numeric(unlist(str_split(as.character(d1[calc_rows &
> >DS3_rows,]$Y_vals), pattern = ","))) -
> >as.numeric(unlist(str_split(as.character(d1[calc_rows &
> >DS4_rows,]$Y_vals), pattern = ",")))) +
> >D2L[5]*    as.numeric(unlist(str_split(as.character(d1[calc_rows &
> >DS4_rows,]$Y_vals), pattern = ",")))
> >        print(unique(VC ))
> >      }
> >    }
> >  }
> >
> >Vul <- distinct(d1[,c(65,4,3)])
> >
> >dim(VC) <- c(length(unlist(str_split(as.character(d1[1,]$Y_vals),
> >pattern = ","))),length(distinct(d1[,c(65,4,3)])$Name))  ## (rows,
> >cols)
> >VC
> >VC_t <- t(VC)
> >Vulnerability <- matrix(apply(VC_t, 1, function(x) paste(x, collapse =
> >',')))
> >
> >Vul$Y_vals <- Vulnerability
> >
> >
> >
> >
> >Best,
> >ioanna
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >Name    Taxonomy        Damage_State    Y_vals
> >Hancilar et. al (2014) - CR/LDUAL school - Case V (Sd)
> >CR/LDUAL/HEX:4+HFEX:12.8/YAPP:1990/EDU+EDU2//PLFSQ/IRRE//RSH1//
> Slight
> >4.61e-149,0.007234459,0.158482316,0.438164341,0.671470035,0.818341464,0
> >.901312438,0.946339742,0.970531767,0.983584997,0.990707537,0.994650876
> ,
> >0.996869188,0.998137671,0.998874868,0.9993101,0.999570978,0.999729626,
> 0
> >.999827443,0.999888548,0.999927197,0.999951931,0.999967938,0.999978407
> ,
> >0.999985325,0.9 Hancilar et. al (2014) - CR/LDUAL school - Case V (Sd)
> >CR/LDUAL/HEX:4+HFEX:12.8/YAPP:1990/EDU+EDU2//PLFSQ/IRRE//RSH1//
> >Collapse
> >0,6.49e-45,1.29e-29,3.35e-22,1.25e-17,1.8e-14,3.81e-12,2.35e-10,6.18e-0
> >9,8.78e-08,7.86e-07,4.92e-06,2.32e-05,8.76e-05,0.000274154,0.000736426,
> >0.001740046,0.003688955,0.007130224,0.012730071,0.021221055,0.0333283,
> 0
> >.049687895,0.070771949,0.096832412,0.12787106
> >Hancilar et. al (2014) - CR/LDUAL school - Case V (Sd)
> >CR/LDUAL/HEX:4+HFEX:12.8/YAPP:1990/EDU+EDU2//PLFSQ/IRRE//RSH1//
> >Extensive
> >5.02e-182,3.52e-10,8.81e-07,3.62e-05,0.000346166,0.001608096,0.00491696
> >5,0.01150426,0.022416772,0.038311015,0.059392175,0.085458446,0.1159987
> 0
> >2,0.150303282,0.187564259,0.226954808,0.267685669,0.309041053,0.350398
> 0
> >6,0.391233913,0.431124831,0.469739614,0.506830242,0.542221151,0.575798
> 2
> >68,0.607498531 Hancilar et. al (2014) - CR/LDUAL school - Case V (Sd)
> >CR/LDUAL/HEX:4+HFEX:12.8/YAPP:1990/EDU+EDU2//PLFSQ/IRRE//RSH1//
> >Moderate
> >0,1.05e-10,4.75e-
> 06,0.000479751,0.006156253,0.02983369,0.084284357,0.171401809,0.2817210
> 77,0.401071017,0.516782184,0.620508952,0.708327468,0.779597953,0.835636
> 781,0.87866127,0.911104254,0.935237852,0.95300803,0.965993954,0.9754315
> 4,0.982263787,0.987197155,0.990753887,0.993316294,0.99516227
> >Rojas(2010) - CR/LFM/DNO 2storey        CR/LFM/DNO/H:2/EDU2
> >Collapse
> >0,4.91e-109,2.88e-47,3.32e-23,1.65e-11,1.78e-
> 05,0.018162775,0.356628282,0.870224163,0.992779045,0.999855873,0.999998
> 652,0.999999993,1,1,1,1,1,1,1,1,1,1,1,1,1
> >Rojas(2010) - CR/LFM/DNO 2storey        CR/LFM/DNO/H:2/EDU2
> >Extensive
> >0,1.21e-32,1.78e-
>
05,0.645821244,0.999823159,0.999999999,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
,1
> >Rojas(2010) - CR/LFM/DNO 2storey        CR/LFM/DNO/H:2/EDU2
> >Moderate
> >0,0.077161367,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
> >Rojas(2010) - CR/LFM/DNO 2storey        CR/LFM/DNO/H:2/EDU2     Slight
> >0,0.996409276,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
> >Rojas(2010) - CR/LFM/DNO 3storey        CR/LFM/DNO/H:3   Collapse
> >0,1.29e-144,1.99e-71,1.16e-40,3.23e-24,1.59e-14,1.41e-08,6.42e-
> 05,0.00971775,0.153727719,0.562404795,0.889217735,0.985915683,0.9989978
> 36,0.999955341,0.999998628,0.999999969,0.999999999,1,1,1,1,1,1,1,1
> >Rojas(2010) - CR/LFM/DNO 3storey        CR/LFM/DNO/H:3   Extensive
> >0,2.12e-51,4.89e-
>
14,0.001339285,0.559153268,0.995244295,0.999997786,1,1,1,1,1,1,1,1,1,1,1,1,1
> ,1,1,1,1,1,1
> >Rojas(2010) - CR/LFM/DNO 3storey        CR/LFM/DNO/H:3  Moderate
> >0,3.22e-07,0.992496021,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
> >Rojas(2010) - CR/LFM/DNO 3storey        CR/LFM/DNO/H:3  Slight
> >0,0.368907496,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
> >
> >
> >       [[alternative HTML version deleted]]
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
> 
> --
> Sent from my phone. Please excuse my brevity.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.

From e@@w|ek @end|ng |rom gm@||@com  Mon Mar 23 02:26:11 2020
From: e@@w|ek @end|ng |rom gm@||@com (Ek Esawi)
Date: Sun, 22 Mar 2020 21:26:11 -0400
Subject: [R] 2D and 3D graphing
Message-ID: <CA+ZkTxuiipCU8Bxyd+DCtswepgwzoWrMkaR1K54aRX6EqDAE_Q@mail.gmail.com>

Hi All--

I have been looking into 2D and 3D graphing packages. Based on what i
read, it seems that ggplot2 is the best and I like it too, but ggplot2
doesn't have 3D plotting capabilities. I read that other packages
(plot_ly, rgl, rayshader) can be used with ggplot2 to create 3D
charts, but not sure if that?s the way to go.

The question is: what is/are the best 2D and 3D graphing packages? I
read that lattice, and a few others, has ?limited? 3D charting
capabilities.

Thanks in advance--EK


From h|gh@t@t @end|ng |rom h|gh@t@t@com  Mon Mar 23 13:06:56 2020
From: h|gh@t@t @end|ng |rom h|gh@t@t@com (Highland Statistics Ltd)
Date: Mon, 23 Mar 2020 12:06:56 +0000
Subject: [R] Online stats course with on-demand video and live meetings:
 Data Exploration, Regression, GLM & GAM with introduction to R
Message-ID: <97c60c66-f678-b1fd-bbc8-a5e7c79a732a@highstat.com>

We would like to announce the following online statistics course:


Online course with on-demand video and live Zoom meetings: 'Data 
Exploration, Regression, GLM & GAM with introduction to R'

Remark: The course fee includes a 1-hour face-to-face video chat with 
one or both instructors.

When: 1-19 June 2020
Time zone for live Zoom meetings: Multiple time zones, see the flyer.

Flyer: http://highstat.com/Courses/Flyers/2020/Flyer2020_06_RGG_Online.pdf

Website: http://highstat.com/index.php/courses-upcoming




Kind regards,


Alain Zuur

-- 

Dr. Alain F. Zuur
Highland Statistics Ltd.
9 St Clair Wynd
AB41 6DZ Newburgh, UK
Email: highstat at highstat.com
URL:   www.highstat.com


	[[alternative HTML version deleted]]


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Mon Mar 23 13:39:19 2020
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Mon, 23 Mar 2020 12:39:19 +0000 (UTC)
Subject: [R] Same results but different functions ?
References: <1307827665.1173067.1584967159734.ref@mail.yahoo.com>
Message-ID: <1307827665.1173067.1584967159734@mail.yahoo.com>

Dear R-experts,

The rlm command in the MASS package command implements several versions of robust regression, for example the Huber and the Tukey (bisquare weighting function) estimators.
In my R code here below I try to get the Tukey (bisquare weighting function) estimation, R gives me an error message : Error in statistic(data, original, ...) : unused argument (psi = psi.bisquare)
If I cancel psi=psi.bisquare my code is working but IMHO I will get the Huber estimation and not the Tukey. So how can I get the Tukey ? Many thanks for your help.


# # # # # # # # # # # # # # # # # # # # # # # #
install.packages( "boot",dependencies=TRUE )
install.packages( "MASS",dependencies=TRUE ?)
library(boot)
library(MASS)

n<-50
b<-runif(n, 0, 5)
z <- rnorm(n, 2, 3)
a <- runif(n, 0, 5)

y_model<- 0.1*b - 0.5 * z - a + 10
y_obs <- y_model +c( rnorm(n*0.9, 0, 0.1), rnorm(n*0.1, 0, 0.5) )
df<-data.frame(b,z,a,y_obs)

?# function to obtain MSE
?MSE <- function(data, indices, formula) {
? ? d <- data[indices, ] # allows boot to select sample
? ? fit <- rlm(formula, data = d)
? ? ypred <- predict(fit)
??? d[["y_obs "]] <-y_obs
??? mean((d[["y_obs"]]-ypred)^2)
?}

?# Make the results reproducible
?set.seed(1234)
?
?# bootstrapping with 600 replications
?results <- boot(data = df, statistic = MSE,
? ??????????????? R = 600, formula = y_obs ~ b+z+a, psi = psi.bisquare)

str(results)

boot.ci(results, type="bca"?)
# # # # # # # # # # # # # # # # # # # # # # # # #


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Mon Mar 23 14:45:44 2020
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Mon, 23 Mar 2020 13:45:44 +0000
Subject: [R] Same results but different functions ?
In-Reply-To: <1307827665.1173067.1584967159734@mail.yahoo.com>
References: <1307827665.1173067.1584967159734.ref@mail.yahoo.com>
 <1307827665.1173067.1584967159734@mail.yahoo.com>
Message-ID: <75d49db4-38a2-e0a6-6c81-61ef4e815a35@dewey.myzen.co.uk>

The documentation suggests that the rlm method for a formula does not 
have psi as a parameter. Perhaps try using the method for a matrix x and 
a vector y.

Michael

On 23/03/2020 12:39, varin sacha via R-help wrote:
> Dear R-experts,
> 
> The rlm command in the MASS package command implements several versions of robust regression, for example the Huber and the Tukey (bisquare weighting function) estimators.
> In my R code here below I try to get the Tukey (bisquare weighting function) estimation, R gives me an error message : Error in statistic(data, original, ...) : unused argument (psi = psi.bisquare)
> If I cancel psi=psi.bisquare my code is working but IMHO I will get the Huber estimation and not the Tukey. So how can I get the Tukey ? Many thanks for your help.
> 
> 
> # # # # # # # # # # # # # # # # # # # # # # # #
> install.packages( "boot",dependencies=TRUE )
> install.packages( "MASS",dependencies=TRUE ?)
> library(boot)
> library(MASS)
> 
> n<-50
> b<-runif(n, 0, 5)
> z <- rnorm(n, 2, 3)
> a <- runif(n, 0, 5)
> 
> y_model<- 0.1*b - 0.5 * z - a + 10
> y_obs <- y_model +c( rnorm(n*0.9, 0, 0.1), rnorm(n*0.1, 0, 0.5) )
> df<-data.frame(b,z,a,y_obs)
> 
>  ?# function to obtain MSE
>  ?MSE <- function(data, indices, formula) {
>  ? ? d <- data[indices, ] # allows boot to select sample
>  ? ? fit <- rlm(formula, data = d)
>  ? ? ypred <- predict(fit)
>  ??? d[["y_obs "]] <-y_obs
>  ??? mean((d[["y_obs"]]-ypred)^2)
>  ?}
> 
>  ?# Make the results reproducible
>  ?set.seed(1234)
>   
>  ?# bootstrapping with 600 replications
>  ?results <- boot(data = df, statistic = MSE,
>  ? ??????????????? R = 600, formula = y_obs ~ b+z+a, psi = psi.bisquare)
> 
> str(results)
> 
> boot.ci(results, type="bca"?)
> # # # # # # # # # # # # # # # # # # # # # # # # #
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From |@t@z@hn @end|ng |rom gm@||@com  Mon Mar 23 22:18:42 2020
From: |@t@z@hn @end|ng |rom gm@||@com (Ista Zahn)
Date: Mon, 23 Mar 2020 17:18:42 -0400
Subject: [R] 2D and 3D graphing
In-Reply-To: <CA+ZkTxuiipCU8Bxyd+DCtswepgwzoWrMkaR1K54aRX6EqDAE_Q@mail.gmail.com>
References: <CA+ZkTxuiipCU8Bxyd+DCtswepgwzoWrMkaR1K54aRX6EqDAE_Q@mail.gmail.com>
Message-ID: <CA+vqiLH+417_VC9KWKYxs-Kp-P5uSGUX+FfBAcpoHXKZDR0UQg@mail.gmail.com>

It depends on what you are trying to do, but ggplot-to-rayshader looks
pretty slick.

--Ista

On Mon, Mar 23, 2020 at 7:52 AM Ek Esawi <esawiek at gmail.com> wrote:
>
> Hi All--
>
> I have been looking into 2D and 3D graphing packages. Based on what i
> read, it seems that ggplot2 is the best and I like it too, but ggplot2
> doesn't have 3D plotting capabilities. I read that other packages
> (plot_ly, rgl, rayshader) can be used with ggplot2 to create 3D
> charts, but not sure if that?s the way to go.
>
> The question is: what is/are the best 2D and 3D graphing packages? I
> read that lattice, and a few others, has ?limited? 3D charting
> capabilities.
>
> Thanks in advance--EK
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Mon Mar 23 22:34:40 2020
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Mon, 23 Mar 2020 22:34:40 +0100
Subject: [R] Same results but different functions ?
In-Reply-To: <75d49db4-38a2-e0a6-6c81-61ef4e815a35@dewey.myzen.co.uk>
References: <1307827665.1173067.1584967159734.ref@mail.yahoo.com>
 <1307827665.1173067.1584967159734@mail.yahoo.com>
 <75d49db4-38a2-e0a6-6c81-61ef4e815a35@dewey.myzen.co.uk>
Message-ID: <24185.11120.854513.592408@stat.math.ethz.ch>

>>>>> Michael Dewey 
>>>>>     on Mon, 23 Mar 2020 13:45:44 +0000 writes:

    > The documentation suggests that the rlm method for a formula does not 
    > have psi as a parameter. Perhaps try using the method for a matrix x and 
    > a vector y.

    > Michael

or use lmrob() from pkg robustbase  which is at least one
generation more recent and also with many more options than
rlm().

rlm() has been fantastic when it was introduced (into S /
S-plus, before R existed [in a publicly visible way]) but it had
been based of what was available back then, end of the 80's, beginning 90's.

Martin

    > On 23/03/2020 12:39, varin sacha via R-help wrote:
    >> Dear R-experts,
    >> 
    >> The rlm command in the MASS package command implements several versions of robust regression, for example the Huber and the Tukey (bisquare weighting function) estimators.
    >> In my R code here below I try to get the Tukey (bisquare weighting function) estimation, R gives me an error message : Error in statistic(data, original, ...) : unused argument (psi = psi.bisquare)
    >> If I cancel psi=psi.bisquare my code is working but IMHO I will get the Huber estimation and not the Tukey. So how can I get the Tukey ? Many thanks for your help.
    >> 
    >> 
    >> # # # # # # # # # # # # # # # # # # # # # # # #
    >> install.packages( "boot",dependencies=TRUE )
    >> install.packages( "MASS",dependencies=TRUE ?)
    >> library(boot)
    >> library(MASS)
    >> 
    >> n<-50
    >> b<-runif(n, 0, 5)
    >> z <- rnorm(n, 2, 3)
    >> a <- runif(n, 0, 5)
    >> 
    >> y_model<- 0.1*b - 0.5 * z - a + 10
    >> y_obs <- y_model +c( rnorm(n*0.9, 0, 0.1), rnorm(n*0.1, 0, 0.5) )
    >> df<-data.frame(b,z,a,y_obs)
    >> 
    >> ?# function to obtain MSE
    >> ?MSE <- function(data, indices, formula) {
    >> ? ? d <- data[indices, ] # allows boot to select sample
    >> ? ? fit <- rlm(formula, data = d)
    >> ? ? ypred <- predict(fit)
    >> ??? d[["y_obs "]] <-y_obs
    >> ??? mean((d[["y_obs"]]-ypred)^2)
    >> ?}
    >> 
    >> ?# Make the results reproducible
    >> ?set.seed(1234)
    >> 
    >> ?# bootstrapping with 600 replications
    >> ?results <- boot(data = df, statistic = MSE,
    >> ? ??????????????? R = 600, formula = y_obs ~ b+z+a, psi = psi.bisquare)
    >> 
    >> str(results)
    >> 
    >> boot.ci(results, type="bca"?)
    >> # # # # # # # # # # # # # # # # # # # # # # # # #
    >> 
    >> ______________________________________________
    >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    >> https://stat.ethz.ch/mailman/listinfo/r-help
    >> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    >> and provide commented, minimal, self-contained, reproducible code.
    >> 

    > -- 
    > Michael
    > http://www.dewey.myzen.co.uk/home.html

    > ______________________________________________
    > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    > https://stat.ethz.ch/mailman/listinfo/r-help
    > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    > and provide commented, minimal, self-contained, reproducible code.


From |mh_u@er@-group@ @end|ng |rom mo|conn@com  Mon Mar 23 23:01:32 2020
From: |mh_u@er@-group@ @end|ng |rom mo|conn@com (LMH)
Date: Mon, 23 Mar 2020 18:01:32 -0400
Subject: [R] 2D and 3D graphing
In-Reply-To: <CA+ZkTxuiipCU8Bxyd+DCtswepgwzoWrMkaR1K54aRX6EqDAE_Q@mail.gmail.com>
References: <CA+ZkTxuiipCU8Bxyd+DCtswepgwzoWrMkaR1K54aRX6EqDAE_Q@mail.gmail.com>
Message-ID: <108031af-1ab5-d536-c323-c1b8f6cbf1b6@molconn.com>

Hello,

I use rgl for 3D plots.

Mostly I use this for a 3D scatter plot where I can zoom and pan for closer analyses
of the data. I also can manually connect any points with lines. It took me a bit to
get the options right so the plot appears the way I want it to. In my opinion, there
are a few unresolved issues with the units and labels on the axis, but most of the
data I looked at was in principle components so x, y, and z were in the same units.

I can post a sample of the terminal input that I used if that would help.

LMH


Ek Esawi wrote:
> Hi All--
> 
> I have been looking into 2D and 3D graphing packages. Based on what i
> read, it seems that ggplot2 is the best and I like it too, but ggplot2
> doesn't have 3D plotting capabilities. I read that other packages
> (plot_ly, rgl, rayshader) can be used with ggplot2 to create 3D
> charts, but not sure if that?s the way to go.
> 
> The question is: what is/are the best 2D and 3D graphing packages? I
> read that lattice, and a few others, has ?limited? 3D charting
> capabilities.
> 
> Thanks in advance--EK
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From herd_dog @end|ng |rom cox@net  Mon Mar 23 23:33:00 2020
From: herd_dog @end|ng |rom cox@net (Phillip Heinrich)
Date: Mon, 23 Mar 2020 15:33:00 -0700
Subject: [R] Tidyverse Question
Message-ID: <8F8C98D19A4A4B7389E5EED4FBFC8822@OWNERPC>

Can someone out there run the following code from the book Analyzing Baseball Data with R ? Chapter 7 page 164?

    library(tidyverse)
    db <- src_sqlite(?data/pitchrx.sqlite?,create=TRUE)

Over the past two weeks this code has run correctly twice but I have gotten the following error dozens of times:

    Error: Could not connect to database:
    unable to open database file

I?m trying to figure out if the problem is with my computer or if the tidyverse package has been revised since this book was written.  I got the same error when I loaded R onto my wife?s Mac.

The file pitchrx.sqlite loaded into my directory C:/Users/Owner/Documents.  The data file db contains four xml files used later in the analysis.

Thanks.
	[[alternative HTML version deleted]]


From |@t@z@hn @end|ng |rom gm@||@com  Mon Mar 23 23:37:16 2020
From: |@t@z@hn @end|ng |rom gm@||@com (Ista Zahn)
Date: Mon, 23 Mar 2020 18:37:16 -0400
Subject: [R] Tidyverse Question
In-Reply-To: <8F8C98D19A4A4B7389E5EED4FBFC8822@OWNERPC>
References: <8F8C98D19A4A4B7389E5EED4FBFC8822@OWNERPC>
Message-ID: <CA+vqiLFndLLehDw35piJN5OrWcVayjzRfNHBSHnrLNeBezpKGw@mail.gmail.com>

Hi Phillip,

On Mon, Mar 23, 2020 at 6:33 PM Phillip Heinrich <herd_dog at cox.net> wrote:
>
> Can someone out there run the following code from the book Analyzing Baseball Data with R ? Chapter 7 page 164?
>
>     library(tidyverse)
>     db <- src_sqlite(?data/pitchrx.sqlite?,create=TRUE)
>
> Over the past two weeks this code has run correctly twice but I have gotten the following error dozens of times:
>
>     Error: Could not connect to database:
>     unable to open database file

Probably you working directory has no sub-directory named 'data'.

Best,
Ista
>
> I?m trying to figure out if the problem is with my computer or if the tidyverse package has been revised since this book was written.  I got the same error when I loaded R onto my wife?s Mac.
>
> The file pitchrx.sqlite loaded into my directory C:/Users/Owner/Documents.  The data file db contains four xml files used later in the analysis.
>
> Thanks.
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Mar 23 23:40:08 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 23 Mar 2020 15:40:08 -0700
Subject: [R] Tidyverse Question
In-Reply-To: <8F8C98D19A4A4B7389E5EED4FBFC8822@OWNERPC>
References: <8F8C98D19A4A4B7389E5EED4FBFC8822@OWNERPC>
Message-ID: <11B32D43-1092-4C76-A62B-92BD439A69F7@dcn.davis.ca.us>

This is not a reproducible recipe. I am positive this is an operator error... not keeping current working directory in the same place, or failing to close the file when done.

On March 23, 2020 3:33:00 PM PDT, Phillip Heinrich <herd_dog at cox.net> wrote:
>Can someone out there run the following code from the book Analyzing
>Baseball Data with R ? Chapter 7 page 164?
>
>    library(tidyverse)
>    db <- src_sqlite(?data/pitchrx.sqlite?,create=TRUE)
>
>Over the past two weeks this code has run correctly twice but I have
>gotten the following error dozens of times:
>
>    Error: Could not connect to database:
>    unable to open database file
>
>I?m trying to figure out if the problem is with my computer or if the
>tidyverse package has been revised since this book was written.  I got
>the same error when I loaded R onto my wife?s Mac.
>
>The file pitchrx.sqlite loaded into my directory
>C:/Users/Owner/Documents.  The data file db contains four xml files
>used later in the analysis.
>
>Thanks.
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From eke@@w| @end|ng |rom y@hoo@com  Tue Mar 24 03:54:04 2020
From: eke@@w| @end|ng |rom y@hoo@com (EK Esawi)
Date: Tue, 24 Mar 2020 02:54:04 +0000 (UTC)
Subject: [R] 2D and 3D graphing
In-Reply-To: <108031af-1ab5-d536-c323-c1b8f6cbf1b6@molconn.com>
References: <CA+ZkTxuiipCU8Bxyd+DCtswepgwzoWrMkaR1K54aRX6EqDAE_Q@mail.gmail.com>
 <108031af-1ab5-d536-c323-c1b8f6cbf1b6@molconn.com>
Message-ID: <503206243.1017838.1585018444372@mail.yahoo.com>

 
Thank you Ista and LMH. 
I want to plot 3D scatter with options to connect the surface with lines;that's just like points connected with a? line in 2D and i may want to fit a surface to the data for soem of teh plots. LMH pointed out to what concerned me and the reason for the question which was i don't want to spend time in a package and then find out that t doesn't do what i want to.
Thanks again and best of luckEK
    On Monday, March 23, 2020, 6:02:33 PM EDT, LMH <lmh_users-groups at molconn.com> wrote:  
 
 Hello,

I use rgl for 3D plots.

Mostly I use this for a 3D scatter plot where I can zoom and pan for closer analyses
of the data. I also can manually connect any points with lines. It took me a bit to
get the options right so the plot appears the way I want it to. In my opinion, there
are a few unresolved issues with the units and labels on the axis, but most of the
data I looked at was in principle components so x, y, and z were in the same units.

I can post a sample of the terminal input that I used if that would help.

LMH


Ek Esawi wrote:
> Hi All--
> 
> I have been looking into 2D and 3D graphing packages. Based on what i
> read, it seems that ggplot2 is the best and I like it too, but ggplot2
> doesn't have 3D plotting capabilities. I read that other packages
> (plot_ly, rgl, rayshader) can be used with ggplot2 to create 3D
> charts, but not sure if that?s the way to go.
> 
> The question is: what is/are the best 2D and 3D graphing packages? I
> read that lattice, and a few others, has ?limited? 3D charting
> capabilities.
> 
> Thanks in advance--EK
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.
  
	[[alternative HTML version deleted]]


From bh@@k@r@ko|k@t@ @end|ng |rom gm@||@com  Tue Mar 24 00:16:42 2020
From: bh@@k@r@ko|k@t@ @end|ng |rom gm@||@com (Bhaskar Mitra)
Date: Mon, 23 Mar 2020 16:16:42 -0700
Subject: [R] Request for help about running a loop and reading .NC files
Message-ID: <CAEGXkYWMfq0AK21j35MNLOxHbiDO5n2ttepcen3842vGZcgxnw@mail.gmail.com>

Hello Everyone,

I have written a loop which reads hundreds of .nc files
and extract information from each .nc file and
exports that corresponding information as a csv file.

The loop works fine until it encounters a .nc file which it cannot read
and the loop stops.

 I would appreciate if anyone can suggest how can I modify
the loop, whereby the loop will continue to run by bypassing those
particular
files which it cannot read or if any particular file has an error.

In the end, I was also hoping to modify the loop such that it
will generate a report which will inform me which
files were not read by the loop.  The codes are given below

Thanks for your help,

Regards,
Bhaskar Mitra


#_------------------------------------------------------------------


library(ncdf4)
library(reshape2)
library(dplyr)
library(stringr)


setwd("directory path")

Output <- "directory path"

flist <- list.files(path ="NCFiles/", pattern = "^.*\\.(nc|NC|Nc|Nc)$")

for (i in 1: length(flist))
{

  nc <- nc_open(paste0("NCFiles/",flist[i]))
  mean1 <- ncvar_get(nc,attributes(nc$dim)$names[3])
  nc_close(nc)

  mean_chl_df <- melt(mean1)
  trial.table.df <-as.data.frame(mean_chl_df)

write.csv(trial.table.df,paste0(Output,"/",tools::file_path_sans_ext(flist[i]),".csv"))

}

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Tue Mar 24 13:32:27 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 24 Mar 2020 15:32:27 +0300
Subject: [R] Request for help about running a loop and reading .NC files
In-Reply-To: <CAEGXkYWMfq0AK21j35MNLOxHbiDO5n2ttepcen3842vGZcgxnw@mail.gmail.com>
References: <CAEGXkYWMfq0AK21j35MNLOxHbiDO5n2ttepcen3842vGZcgxnw@mail.gmail.com>
Message-ID: <20200324153227.286673d3@trisector>

On Mon, 23 Mar 2020 16:16:42 -0700
Bhaskar Mitra <bhaskar.kolkata at gmail.com> wrote:

> I would appreciate if anyone can suggest how can I modify
>the loop, whereby the loop will continue to run by bypassing those
>particular
>files which it cannot read or if any particular file has an error.

See ?try and ?tryCatch. With `try`, you can use inherits(x,
'try-error') to check whether execution failed. With `tryCatch` you can
choose your own value to return instead of the error object.

-- 
Best regards,
Ivan


From bgunter@4567 @end|ng |rom gm@||@com  Tue Mar 24 14:49:57 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 24 Mar 2020 06:49:57 -0700
Subject: [R] Request for help about running a loop and reading .NC files
In-Reply-To: <CAEGXkYWMfq0AK21j35MNLOxHbiDO5n2ttepcen3842vGZcgxnw@mail.gmail.com>
References: <CAEGXkYWMfq0AK21j35MNLOxHbiDO5n2ttepcen3842vGZcgxnw@mail.gmail.com>
Message-ID: <CAGxFJbRgZTU41YbyNZ4CN5t0_b-YiukM0AhkcMQNR6pVCZUbkw@mail.gmail.com>

?tryCatch

See also:
https://www.r-bloggers.com/error-handling-in-r/


Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

On Tue, Mar 24, 2020 at 5:13 AM Bhaskar Mitra <bhaskar.kolkata at gmail.com> wrote:
>
> Hello Everyone,
>
> I have written a loop which reads hundreds of .nc files
> and extract information from each .nc file and
> exports that corresponding information as a csv file.
>
> The loop works fine until it encounters a .nc file which it cannot read
> and the loop stops.
>
>  I would appreciate if anyone can suggest how can I modify
> the loop, whereby the loop will continue to run by bypassing those
> particular
> files which it cannot read or if any particular file has an error.
>
> In the end, I was also hoping to modify the loop such that it
> will generate a report which will inform me which
> files were not read by the loop.  The codes are given below
>
> Thanks for your help,
>
> Regards,
> Bhaskar Mitra
>
>
> #_------------------------------------------------------------------
>
>
> library(ncdf4)
> library(reshape2)
> library(dplyr)
> library(stringr)
>
>
> setwd("directory path")
>
> Output <- "directory path"
>
> flist <- list.files(path ="NCFiles/", pattern = "^.*\\.(nc|NC|Nc|Nc)$")
>
> for (i in 1: length(flist))
> {
>
>   nc <- nc_open(paste0("NCFiles/",flist[i]))
>   mean1 <- ncvar_get(nc,attributes(nc$dim)$names[3])
>   nc_close(nc)
>
>   mean_chl_df <- melt(mean1)
>   trial.table.df <-as.data.frame(mean_chl_df)
>
> write.csv(trial.table.df,paste0(Output,"/",tools::file_path_sans_ext(flist[i]),".csv"))
>
> }
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From dp|erce @end|ng |rom uc@d@edu  Tue Mar 24 19:00:46 2020
From: dp|erce @end|ng |rom uc@d@edu (David Pierce)
Date: Tue, 24 Mar 2020 11:00:46 -0700
Subject: [R] Request for help about running a loop and reading .NC files
In-Reply-To: <CAEGXkYWMfq0AK21j35MNLOxHbiDO5n2ttepcen3842vGZcgxnw@mail.gmail.com>
References: <CAEGXkYWMfq0AK21j35MNLOxHbiDO5n2ttepcen3842vGZcgxnw@mail.gmail.com>
Message-ID: <CAMCmWc_bw8uHH6yvMZXt2XN2OEVsWVNr_rn3QFfoY8vOjB2ebQ@mail.gmail.com>

 Hey Bhaskar,

Dave Pierce here, the author and maintainer of the ncdf4 package. What
platform are you working on? If you work on Linux, I'd be happy to send you
a new source tar version of the ncdf4 package I've made that handles this
case. It now has a settable parameter in nc_open called "return_on_error",
and if you set that to TRUE, then nc_open always returns. If no error was
encountered, then the return list element $error is FALSE, and if an error
was encountered, $error is set to TRUE. So you could do this:

for( ifile in 1:nfiles ) {
    nc = nc_open( filename[ifile], return_on_error=TRUE )
    if( nc$error == FALSE ) {
        ... do your processing here ...
        }
  else
        print(paste("Error encountered, skipping file", filename[ifile]))

Regards,

--Dave

On Tue, Mar 24, 2020 at 5:13 AM Bhaskar Mitra <bhaskar.kolkata at gmail.com>
wrote:

> Hello Everyone,
>
> I have written a loop which reads hundreds of .nc files
> and extract information from each .nc file and
> exports that corresponding information as a csv file.
>
> The loop works fine until it encounters a .nc file which it cannot read
> and the loop stops.
>
>  I would appreciate if anyone can suggest how can I modify
> the loop, whereby the loop will continue to run by bypassing those
> particular
> files which it cannot read or if any particular file has an error.
>
> In the end, I was also hoping to modify the loop such that it
> will generate a report which will inform me which
> files were not read by the loop.  The codes are given below
>
> Thanks for your help,
>
> Regards,
> Bhaskar Mitra
>
>
> #_------------------------------------------------------------------
>
>
> library(ncdf4)
> library(reshape2)
> library(dplyr)
> library(stringr)
>
>
> setwd("directory path")
>
> Output <- "directory path"
>
> flist <- list.files(path ="NCFiles/", pattern = "^.*\\.(nc|NC|Nc|Nc)$")
>
> for (i in 1: length(flist))
> {
>
>   nc <- nc_open(paste0("NCFiles/",flist[i]))
>   mean1 <- ncvar_get(nc,attributes(nc$dim)$names[3])
>   nc_close(nc)
>
>   mean_chl_df <- melt(mean1)
>   trial.table.df <-as.data.frame(mean_chl_df)
>
>
> write.csv(trial.table.df,paste0(Output,"/",tools::file_path_sans_ext(flist[i]),".csv"))
>
> }
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 

-------------------------------------------------------------------
David W. Pierce
Division of Climate, Atmospheric Science, and Physical Oceanography
Scripps Institution of Oceanography
(858) 534-8276 (voice)  /  (858) 534-8561 (fax)    dpierce at ucsd.edu
-------------------------------------------------------------------

	[[alternative HTML version deleted]]


From eke@@w| @end|ng |rom y@hoo@com  Tue Mar 24 22:42:28 2020
From: eke@@w| @end|ng |rom y@hoo@com (EK Esawi)
Date: Tue, 24 Mar 2020 21:42:28 +0000 (UTC)
Subject: [R] 2D and 3D graphing
In-Reply-To: <2E00E9DC-A8AC-4EF6-A141-CFD35AA6F234@dcn.davis.ca.us>
References: <CA+ZkTxuiipCU8Bxyd+DCtswepgwzoWrMkaR1K54aRX6EqDAE_Q@mail.gmail.com>
 <108031af-1ab5-d536-c323-c1b8f6cbf1b6@molconn.com>
 <503206243.1017838.1585018444372@mail.yahoo.com>
 <2E00E9DC-A8AC-4EF6-A141-CFD35AA6F234@dcn.davis.ca.us>
Message-ID: <1277233979.1506309.1585086148196@mail.yahoo.com>

 
Thank you Jeff. I have been using a textbook which has some of the chart types i was hoping to produce; that's 3D charts where points are connected by lines in 3D, like a grid. The book also has 3D fitted surfaces. The authors used exclusively R in this book. That's what i asked.
Thanks again and hope you and yours are safe
EK
    On Monday, March 23, 2020, 11:23:34 PM EDT, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:  
 
 I don't know of any 3d scatterplot plotting software that does that. You have to communicate the connections between points to the plotting function, and there is no easy way to do that with arbitrary scattered points. That is why the surface3d function interface is separate from the points3d function interface ... it uses a matrix to communicate adjacency for four points at a time.

On March 23, 2020 7:54:04 PM PDT, EK Esawi via R-help <r-help at r-project.org> wrote:
> 
>Thank you Ista and LMH. 
>I want to plot 3D scatter with options to connect the surface with
>lines;that's just like points connected with a? line in 2D and i may
>want to fit a surface to the data for soem of teh plots. LMH pointed
>out to what concerned me and the reason for the question which was i
>don't want to spend time in a package and then find out that t doesn't
>do what i want to.
>Thanks again and best of luckEK
>On Monday, March 23, 2020, 6:02:33 PM EDT, LMH
><lmh_users-groups at molconn.com> wrote:? 
> 
> Hello,
>
>I use rgl for 3D plots.
>
>Mostly I use this for a 3D scatter plot where I can zoom and pan for
>closer analyses
>of the data. I also can manually connect any points with lines. It took
>me a bit to
>get the options right so the plot appears the way I want it to. In my
>opinion, there
>are a few unresolved issues with the units and labels on the axis, but
>most of the
>data I looked at was in principle components so x, y, and z were in the
>same units.
>
>I can post a sample of the terminal input that I used if that would
>help.
>
>LMH
>
>
>Ek Esawi wrote:
>> Hi All--
>> 
>> I have been looking into 2D and 3D graphing packages. Based on what i
>> read, it seems that ggplot2 is the best and I like it too, but
>ggplot2
>> doesn't have 3D plotting capabilities. I read that other packages
>> (plot_ly, rgl, rayshader) can be used with ggplot2 to create 3D
>> charts, but not sure if that?s the way to go.
>> 
>> The question is: what is/are the best 2D and 3D graphing packages? I
>> read that lattice, and a few others, has ?limited? 3D charting
>> capabilities.
>> 
>> Thanks in advance--EK
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.
>? 
>??? [[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.  
	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Mar 24 22:59:08 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 24 Mar 2020 17:59:08 -0400
Subject: [R] 2D and 3D graphing
In-Reply-To: <1277233979.1506309.1585086148196@mail.yahoo.com>
References: <CA+ZkTxuiipCU8Bxyd+DCtswepgwzoWrMkaR1K54aRX6EqDAE_Q@mail.gmail.com>
 <108031af-1ab5-d536-c323-c1b8f6cbf1b6@molconn.com>
 <503206243.1017838.1585018444372@mail.yahoo.com>
 <2E00E9DC-A8AC-4EF6-A141-CFD35AA6F234@dcn.davis.ca.us>
 <1277233979.1506309.1585086148196@mail.yahoo.com>
Message-ID: <698b130d-fbba-6cb0-14c0-35cd47cb81db@gmail.com>

rgl can do that, but I have my doubts whether it is useful:

x <- runif(500)
y <- runif(500)
z <- (x - 0.5)^2 + (y - 0.5)^2

library(rgl)
plot3d(x, y, z, col = "red")
dxyz <- deldir::deldir(x, y, z = z, suppressMsge = TRUE)
plot3d(dxyz, add = TRUE, front = "lines", back = "lines", specular = 
"black")

Duncan Murdoch

On 24/03/2020 5:42 p.m., EK Esawi via R-help wrote:
>   
> Thank you Jeff. I have been using a textbook which has some of the chart types i was hoping to produce; that's 3D charts where points are connected by lines in 3D, like a grid. The book also has 3D fitted surfaces. The authors used exclusively R in this book. That's what i asked.
> Thanks again and hope you and yours are safe
> EK
>      On Monday, March 23, 2020, 11:23:34 PM EDT, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>   
>   I don't know of any 3d scatterplot plotting software that does that. You have to communicate the connections between points to the plotting function, and there is no easy way to do that with arbitrary scattered points. That is why the surface3d function interface is separate from the points3d function interface ... it uses a matrix to communicate adjacency for four points at a time.
> 
> On March 23, 2020 7:54:04 PM PDT, EK Esawi via R-help <r-help at r-project.org> wrote:
>>
>> Thank you Ista and LMH.
>> I want to plot 3D scatter with options to connect the surface with
>> lines;that's just like points connected with a? line in 2D and i may
>> want to fit a surface to the data for soem of teh plots. LMH pointed
>> out to what concerned me and the reason for the question which was i
>> don't want to spend time in a package and then find out that t doesn't
>> do what i want to.
>> Thanks again and best of luckEK
>> On Monday, March 23, 2020, 6:02:33 PM EDT, LMH
>> <lmh_users-groups at molconn.com> wrote:
>>
>> Hello,
>>
>> I use rgl for 3D plots.
>>
>> Mostly I use this for a 3D scatter plot where I can zoom and pan for
>> closer analyses
>> of the data. I also can manually connect any points with lines. It took
>> me a bit to
>> get the options right so the plot appears the way I want it to. In my
>> opinion, there
>> are a few unresolved issues with the units and labels on the axis, but
>> most of the
>> data I looked at was in principle components so x, y, and z were in the
>> same units.
>>
>> I can post a sample of the terminal input that I used if that would
>> help.
>>
>> LMH
>>
>>
>> Ek Esawi wrote:
>>> Hi All--
>>>
>>> I have been looking into 2D and 3D graphing packages. Based on what i
>>> read, it seems that ggplot2 is the best and I like it too, but
>> ggplot2
>>> doesn't have 3D plotting capabilities. I read that other packages
>>> (plot_ly, rgl, rayshader) can be used with ggplot2 to create 3D
>>> charts, but not sure if that?s the way to go.
>>>
>>> The question is: what is/are the best 2D and 3D graphing packages? I
>>> read that lattice, and a few others, has ?limited? 3D charting
>>> capabilities.
>>>
>>> Thanks in advance--EK
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>    
>>  ??? [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>


From @|mon@wood @end|ng |rom b@th@edu  Tue Mar 24 23:46:53 2020
From: @|mon@wood @end|ng |rom b@th@edu (Simon Wood)
Date: Tue, 24 Mar 2020 22:46:53 +0000
Subject: [R] FW: problem with markov random field smooths in mgcv
In-Reply-To: <D782BFE1-F78B-47E5-B1B7-838497B45381@csiro.au>
References: <D782BFE1-F78B-47E5-B1B7-838497B45381@csiro.au>
Message-ID: <13cbad1e-7218-a201-f5d8-0aaed89d305d@bath.edu>

Hi Chris,

It's kind of a documentation glitch, a node is not supposed to be listed 
as its own neighbour (it causes the diagonal entries in the penalty 
matrix to be over-written by the wrong value). i.e. the neighbour list 
should be.

 ?NB <- list()
 ??? NB$'East Timor' <- c(2,15)
 ??? NB$Australia <- c(1,15)
 ??? NB$'Sri Lanka' <-c(12,16)
 ??? NB$Bangladesh <-c(12,13,16)
 ??? NB$Philippines <- c(6,11,14,15,17)
 ??? NB$Taiwan <- c(5,11)
 ??? NB$Thailand <- c(8,10,12,13,14,15)
 ??? NB$Vietnam <- c(7,10,11,14,15)
 ??? NB$`South Korea` <- c(11)
 ??? NB$Cambodia <- c(7,8)
 ??? NB$China <- c(5,6,8,9,14)
 ??? NB$India <- c(3,4,7,13,15,16)
 ??? NB$Myanmar <- c(4,7,12,16)
 ??? NB$Malaysia <- c(5,7,8,11,15)
 ??? NB$Indonesia <- c(1,2,5,7,8,12,14)
 ??? NB$HighSeas2 <- c(3,4,12,13)
 ??? NB$HighSeas1 <- c(5)

I've fixed the help page and had the smooth constructor ignore 
auto-neighbours for the next release.

best,
Simon

 ? On 18/03/2020 07:44, Wilcox, Chris (O&A, Hobart) wrote:
> Hi all,
>      
>      I am trying to fit a model with a markov random field smooth in mgcv.  I am having some trouble with getting it to run, and in particular I am getting the message
>      
>      Error in initial.sp(w * x, S, off) : S[[1]] matrix is not +ve definite.
>      
>      After reading everything I could find on mrf, it sounds like there was a bug that was brought up with Simon Wood in 2012, due to differences between windows and linux, with the linus machine stopping due to this error, while windows was not.  I have not been able to find much else on it.  Any suggestions would be much appreciated.
>      
>      There is reproducible code below.
>      
>      Thanks
>      
>      Chris
>      
>      
>      library(mgcv)
>      
>      #create data
>      Country <- as.factor(c("Australia","Australia","Australia","Australia","Australia","Australia","Bangladesh","Bangladesh","Bangladesh",
>      "Bangladesh","Bangladesh","Bangladesh","Cambodia","Cambodia","Cambodia","Cambodia","Cambodia","Cambodia",
>      "China","China","China","China","China","China","East Timor","East Timor","East Timor",
>      "East Timor","East Timor","East Timor","HighSeas1","HighSeas1","HighSeas1","HighSeas1","HighSeas1","HighSeas1",
>      "HighSeas2","HighSeas2","HighSeas2","HighSeas2","HighSeas2","HighSeas2","China","China","China","China","China","China",
>      "India","India","India","India","India","India","Indonesia","Indonesia","Indonesia","Indonesia","Indonesia","Indonesia",
>      "Malaysia","Malaysia","Malaysia","Malaysia","Malaysia","Malaysia","Myanmar","Myanmar","Myanmar","Myanmar","Myanmar",
>      "Myanmar","Philippines","Philippines","Philippines","Philippines","Philippines","Philippines","South Korea","South Korea",
>      "South Korea","South Korea","South Korea","South Korea","China","China","China","China","China","China",
>      "Sri Lanka","Sri Lanka","Sri Lanka","Sri Lanka","Sri Lanka","Sri Lanka","Taiwan","Taiwan","Taiwan","Taiwan",
>      "Taiwan","Taiwan","Thailand","Thailand","Thailand","Thailand","Thailand","Thailand","Vietnam","Vietnam","Vietnam","Vietnam",
>      "Vietnam","Vietnam"))
>      
>      Count <- c(0,0,3,5,1,5,0,0,0,0,0,1,0,0,0,0,0,3,0,0,2,1,0,6,0,0,0,1,0,0,0,1,0,0,0,0
>      ,0,0,20,0,1,0,0,0,0,0,0,2,0,0,6,3,3,10,1,1,18,11,8,11,0,1,2,2,1,14,0,0,0,1,0,0
>      ,0,0,4,3,9,16,0,0,3,0,0,1,0,0,1,0,0,0,0,0,33,18,8,16,0,0,0,0,0,2,0,1,14,6,8,2
>      ,0,0,0,0,1,1)
>      
>      Data <- data.frame(Count,Country)
>      
>      #create neighbour matrix
>      NB <- list()
>      NB$'East Timor' <- c(1,2,15)
>      NB$Australia <- c(1,2,15)
>      NB$'Sri Lanka' <-c(3,12,16)
>      NB$Bangladesh <-c(4,12,13,16)
>      NB$Philippines <- c(5,6,11,14,15,17)
>      NB$Taiwan <- c(5,6,11)
>      NB$Thailand <- c(7,8,10,12,13,14,15)
>      NB$Vietnam <- c(7,8,10,11,14,15)
>      NB$`South Korea` <- c(9,11)
>      NB$Cambodia <- c(7,8,10)
>      NB$China <- c(5,6,8,9,11,14)
>      NB$India <- c(3,4,7,12,13,15,16)
>      NB$Myanmar <- c(4,7,12,13,16)
>      NB$Malaysia <- c(5,7,8,11,14,15)
>      NB$Indonesia <- c(1,2,5,7,8,12,14,15)
>      NB$HighSeas2 <- c(3,4,12,13,16)
>      NB$HighSeas1 <- c(5,17)
>      
>      #check levels and names match
>      all.equal(sort(names(NB)), sort(levels(Data$Country)))
>      
>      #try fitting GAM
>      m1 <- gam(Data$Count ~ s(Data$Country, bs = 'mrf', xt = list(nb = NB)))
>      
>      
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Simon Wood, School of Mathematics, University of Bristol, BS8 1TW UK
https://people.maths.bris.ac.uk/~sw15190/


From borge@@y@n@ @end|ng |rom gm@||@com  Tue Mar 24 20:44:41 2020
From: borge@@y@n@ @end|ng |rom gm@||@com (Yana Borges)
Date: Tue, 24 Mar 2020 16:44:41 -0300
Subject: [R] How to read a shapefile with areas other than the one used by
 default in the spplot?
Message-ID: <CA+XD89oYO2HxmW77oT5gxXbe67u=_irwCtm6DNVyxxkyyKkhfQ@mail.gmail.com>

Hello!
I send the same question I asked in the stackoverflow, if you don't mind.
It is possible that it is something simple, but I really did not succeed.

I need to make a map as it is in the script I send below. The shapefile I
am using, as well as the data, are attached.
My problem: I want the divisions by Regional Health (RS), and not by
municipality, which are 399. There are 22 Health Regionals, but I can't
identify them on the map. In the shp file there is this subdivision, but I
was unable to insert it that way.
How do I read by RS and not by municipality (default)?

I used the packages ggplot2, factoextra and rgdal

Thank you!

prec <- readxl::read_xlsx('Cluster\\municipios.xlsx', sheet =
"Obito0a6dias2",col_names = T)
tard <- readxl::read_xlsx('Cluster\\municipios.xlsx', sheet =
"Obito7a27dias2",col_names = T)
pop <- readxl::read_xlsx('Cluster\\municipios.xlsx', sheet =
"pop2",col_names = T)
# TAXAS
taxa.prec <- data.frame(prec[1:22,2:18]/pop[1:22,2:18]*1000,row.names
= prec$mun)
taxa.tard <- data.frame(tard[1:22,2:18]/pop[1:22,2:18]*1000,row.names
= prec$mun)
`# head(taxa.prec)
################### Dados ######################
txp     <- txt  <- res.hc  <- grupo  <- list()
dados <- taxa.grupos <- plot <- list()
for (i in 1:ncol(taxa.prec)) {
txp[[i]]    <- scale(taxa.prec[,i])
txt[[i]]    <- scale(taxa.tard[,i])
res.hc[[i]] <- hclust(dist(data.frame(txp[[i]],
                                    txt[[i]],
                                    row.names = prec$mun)),
                    method = "ward.D2")
grupo[[i]]  <- cutree(res.hc[[i]], k = 4)
dados[[i]]  <- data.frame(RS = 1:22,taxap = taxa.prec[,i],
                        taxat = taxa.tard[,i],
                        Grupo=factor(grupo[[i]]),
                        row.names = prec$mun)
taxa.grupos[[i]] <- aggregate(cbind(taxap, taxat) ~ grupo[[i]],
dados[[i]], mean)
taxa.grupos[[i]]$media.pt <- apply(taxa.grupos[[i]][2:3], 1, mean)}
names(dados) <- 2000:2016

mapa <- maptools::readShapePoly('Cluster\\PR\\rs_pr\\RS.shp')

gp <- list(gp1=list(),gp2=list(),gp3=list(),gp4=list())for (i in 1:17) {
 for (j in 1:4) {
 gp$gp1[[i]] <- which(dados[[i]]$Grupo == 1)
 gp$gp2[[i]] <- which(dados[[i]]$Grupo == 2)
 gp$gp3[[i]] <- which(dados[[i]]$Grupo == 3)
 gp$gp4[[i]] <- which(dados[[i]]$Grupo == 4) }}

aux <- matrix(0, ncol=17, nrow=399)
for (i in 1:17) {for (j in 1:4) {
    aux[,i][mapa$RS %in% gp[[j]][[i]]] <- taxa.grupos[[i]]$media.pt[j]}}
mapa at data[6:22] <- aux

 ############# Mapas em cores####
corDegrade <- colorRampPalette(c("#FFFF99", "orange","red", "darkred"))
x11()spplot(mapa, zcol=c(6:22), col.regions =corDegrade(16),
   layout(matrix(c(1:20),nrow = 5,ncol = 4, byrow = TRUE)),
   names.attr = c(2000:2016))

From bgunter@4567 @end|ng |rom gm@||@com  Wed Mar 25 16:20:33 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 25 Mar 2020 08:20:33 -0700
Subject: [R] 
 How to read a shapefile with areas other than the one used by
 default in the spplot?
In-Reply-To: <CA+XD89oYO2HxmW77oT5gxXbe67u=_irwCtm6DNVyxxkyyKkhfQ@mail.gmail.com>
References: <CA+XD89oYO2HxmW77oT5gxXbe67u=_irwCtm6DNVyxxkyyKkhfQ@mail.gmail.com>
Message-ID: <CAGxFJbQoL-WVZQ1QNSeYaEu7HanRwnLmY9G78L2wJm+cXcARKQ@mail.gmail.com>

1. Wrong list. You should post on r-sig-geo instead.

2. As you use ggplot, why aren't you using ggmap() ?

Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

On Wed, Mar 25, 2020 at 6:34 AM Yana Borges <borges.yana at gmail.com> wrote:
>
> Hello!
> I send the same question I asked in the stackoverflow, if you don't mind.
> It is possible that it is something simple, but I really did not succeed.
>
> I need to make a map as it is in the script I send below. The shapefile I
> am using, as well as the data, are attached.
> My problem: I want the divisions by Regional Health (RS), and not by
> municipality, which are 399. There are 22 Health Regionals, but I can't
> identify them on the map. In the shp file there is this subdivision, but I
> was unable to insert it that way.
> How do I read by RS and not by municipality (default)?
>
> I used the packages ggplot2, factoextra and rgdal
>
> Thank you!
>
> prec <- readxl::read_xlsx('Cluster\\municipios.xlsx', sheet =
> "Obito0a6dias2",col_names = T)
> tard <- readxl::read_xlsx('Cluster\\municipios.xlsx', sheet =
> "Obito7a27dias2",col_names = T)
> pop <- readxl::read_xlsx('Cluster\\municipios.xlsx', sheet =
> "pop2",col_names = T)
> # TAXAS
> taxa.prec <- data.frame(prec[1:22,2:18]/pop[1:22,2:18]*1000,row.names
> = prec$mun)
> taxa.tard <- data.frame(tard[1:22,2:18]/pop[1:22,2:18]*1000,row.names
> = prec$mun)
> `# head(taxa.prec)
> ################### Dados ######################
> txp     <- txt  <- res.hc  <- grupo  <- list()
> dados <- taxa.grupos <- plot <- list()
> for (i in 1:ncol(taxa.prec)) {
> txp[[i]]    <- scale(taxa.prec[,i])
> txt[[i]]    <- scale(taxa.tard[,i])
> res.hc[[i]] <- hclust(dist(data.frame(txp[[i]],
>                                     txt[[i]],
>                                     row.names = prec$mun)),
>                     method = "ward.D2")
> grupo[[i]]  <- cutree(res.hc[[i]], k = 4)
> dados[[i]]  <- data.frame(RS = 1:22,taxap = taxa.prec[,i],
>                         taxat = taxa.tard[,i],
>                         Grupo=factor(grupo[[i]]),
>                         row.names = prec$mun)
> taxa.grupos[[i]] <- aggregate(cbind(taxap, taxat) ~ grupo[[i]],
> dados[[i]], mean)
> taxa.grupos[[i]]$media.pt <- apply(taxa.grupos[[i]][2:3], 1, mean)}
> names(dados) <- 2000:2016
>
> mapa <- maptools::readShapePoly('Cluster\\PR\\rs_pr\\RS.shp')
>
> gp <- list(gp1=list(),gp2=list(),gp3=list(),gp4=list())for (i in 1:17) {
>  for (j in 1:4) {
>  gp$gp1[[i]] <- which(dados[[i]]$Grupo == 1)
>  gp$gp2[[i]] <- which(dados[[i]]$Grupo == 2)
>  gp$gp3[[i]] <- which(dados[[i]]$Grupo == 3)
>  gp$gp4[[i]] <- which(dados[[i]]$Grupo == 4) }}
>
> aux <- matrix(0, ncol=17, nrow=399)
> for (i in 1:17) {for (j in 1:4) {
>     aux[,i][mapa$RS %in% gp[[j]][[i]]] <- taxa.grupos[[i]]$media.pt[j]}}
> mapa at data[6:22] <- aux
>
>  ############# Mapas em cores####
> corDegrade <- colorRampPalette(c("#FFFF99", "orange","red", "darkred"))
> x11()spplot(mapa, zcol=c(6:22), col.regions =corDegrade(16),
>    layout(matrix(c(1:20),nrow = 5,ncol = 4, byrow = TRUE)),
>    names.attr = c(2000:2016))
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From HDor@n @end|ng |rom @|r@org  Wed Mar 25 17:53:29 2020
From: HDor@n @end|ng |rom @|r@org (Doran, Harold)
Date: Wed, 25 Mar 2020 16:53:29 +0000
Subject: [R] RODBC Multiple Results
Message-ID: <BL0PR05MB4818DDBDD7EE81BC23215455CACE0@BL0PR05MB4818.namprd05.prod.outlook.com>

I'm calling a stored procedure that returns multiple tables and my current framework uses RODBC and sqlQuery() to communicate between R and the databases we connect to. A new stored procedure returns multiple tables and I found this on SO indicating that RODBC "may not" be able to retrieve multiple tables.

https://stackoverflow.com/questions/41494419/how-to-read-multiple-result-sets-returned-from-a-sql-server-stored-procedure-in

I'd very much like to continue within the structure of code I have using RODBC, so am asking if RODBC in fact *cannot* retrieve multiple tables as noted in the SO responses or if anyone has insight on how it might be feasible within the context of RODBC using  sqlQuery()?

Thanks
Harold


	[[alternative HTML version deleted]]


From m@vz@@hmed @end|ng |rom utoronto@c@  Wed Mar 25 19:22:00 2020
From: m@vz@@hmed @end|ng |rom utoronto@c@ (Mavra Ahmed)
Date: Wed, 25 Mar 2020 18:22:00 +0000
Subject: [R] Changing mu in svyttest for one sample test
Message-ID: <YTXPR0101MB1102B2B90860181D8CB2FAF99BCE0@YTXPR0101MB1102.CANPRD01.PROD.OUTLOOK.COM>

Hi All,

I am doing a one-sample t-test for survey data with replicates (svrepdesign).
I was wondering if there is a way to change the mu in svyttest for one sample test? I can't find a way to do this online for svyttest but I was able to do it for ttest.
for example; in the following, I can change the mu to be a known standard (in this case, 15):
ttest(dataset$outcome, mu=15)

For svyttest, I can only do as follows:
svyttest(outcome~0, dataset)
svyttest(outcome~1,dataset)
but I want to test my mean against a known standard (e.g. 15 as in the above case) using svyttest. Is there a way to do this? If not, what would be another way to test this?

Thanks for your help,
Mavra



	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Wed Mar 25 20:39:20 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 25 Mar 2020 12:39:20 -0700
Subject: [R] RODBC Multiple Results
In-Reply-To: <BL0PR05MB4818DDBDD7EE81BC23215455CACE0@BL0PR05MB4818.namprd05.prod.outlook.com>
References: <BL0PR05MB4818DDBDD7EE81BC23215455CACE0@BL0PR05MB4818.namprd05.prod.outlook.com>
Message-ID: <CAGxFJbTabPA6iLnyE4acfJ0hZj5yjsaa3FSbrUQYEyFeDYu7rA@mail.gmail.com>

You might wish to post this on r-sig-db if you do not get a
satisfactory reply here.

Also, have you checked the databases task view on :
https://cran.r-project.org/ ?

Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

On Wed, Mar 25, 2020 at 9:54 AM Doran, Harold <HDoran at air.org> wrote:
>
> I'm calling a stored procedure that returns multiple tables and my current framework uses RODBC and sqlQuery() to communicate between R and the databases we connect to. A new stored procedure returns multiple tables and I found this on SO indicating that RODBC "may not" be able to retrieve multiple tables.
>
> https://stackoverflow.com/questions/41494419/how-to-read-multiple-result-sets-returned-from-a-sql-server-stored-procedure-in
>
> I'd very much like to continue within the structure of code I have using RODBC, so am asking if RODBC in fact *cannot* retrieve multiple tables as noted in the SO responses or if anyone has insight on how it might be feasible within the context of RODBC using  sqlQuery()?
>
> Thanks
> Harold
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From pd@|gd @end|ng |rom gm@||@com  Thu Mar 26 10:59:37 2020
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Thu, 26 Mar 2020 10:59:37 +0100
Subject: [R] Changing mu in svyttest for one sample test
In-Reply-To: <YTXPR0101MB1102B2B90860181D8CB2FAF99BCE0@YTXPR0101MB1102.CANPRD01.PROD.OUTLOOK.COM>
References: <YTXPR0101MB1102B2B90860181D8CB2FAF99BCE0@YTXPR0101MB1102.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <E4C08EF4-5AC1-4DA8-8F01-C7B1EC1FA733@gmail.com>

Subtract mu from the outcome?

-pd

> On 25 Mar 2020, at 19:22 , Mavra Ahmed <mavz.ahmed at utoronto.ca> wrote:
> 
> Hi All,
> 
> I am doing a one-sample t-test for survey data with replicates (svrepdesign).
> I was wondering if there is a way to change the mu in svyttest for one sample test? I can't find a way to do this online for svyttest but I was able to do it for ttest.
> for example; in the following, I can change the mu to be a known standard (in this case, 15):
> ttest(dataset$outcome, mu=15)
> 
> For svyttest, I can only do as follows:
> svyttest(outcome~0, dataset)
> svyttest(outcome~1,dataset)
> but I want to test my mean against a known standard (e.g. 15 as in the above case) using svyttest. Is there a way to do this? If not, what would be another way to test this?
> 
> Thanks for your help,
> Mavra
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Thu Mar 26 16:10:15 2020
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Thu, 26 Mar 2020 16:10:15 +0100
Subject: [R] Add labels to dendogram
Message-ID: <CAMk+s2TG75SPi5YrXP=pOA-5APpOqZyL9DYQE-LfQBjeoc=AMw@mail.gmail.com>

Dear all,
I have built a hierarchical clustering on some data as follows:
```
Tag = c(
  "YP_008603282", "NP_054035",    "BAA00606",     "NP_054034",
 "NP_054033",
  "AAC17846" ,    "NP_054036",    "YP_073767" ,   "BAQ20411",     "P52455")
Healthy = c(
  12.15540751,  2.33103008,  1.46924258,  0.26274009,  0.95217008,
  -0.08197491,  0.09038259, -0.08197491, -0.25433241, -0.08197491)
Tumour = c(
  12.51939026,  1.20983671,  0.61459705,  0.61459705,  0.81301027,
  0.21777061,  -0.17905583, -0.17905583, -0.17905583,  0.01935739)
Metastasis = c(
  12.55328882,  1.04722513,  1.04722513,  0.70881149,  0.37039785,
  0.20119103, 0.20119103,    0.20119103,  0.20119103,  0.03198422)
df = data.frame(Tag, Healthy, Tumour, Metastasis, stringsAsFactors = FALSE)
d <- dist(df, method = "euclidean")
hc1 <- hclust(d, method = "complete" )
plot(hc1)
```

Is there a way to add the Tag column instead of the numbers to the leaves
of the dendrogram?
Thank you

-- 
Best regards,
Luigi

	[[alternative HTML version deleted]]


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Thu Mar 26 16:49:56 2020
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Thu, 26 Mar 2020 15:49:56 +0000 (UTC)
Subject: [R] Same results but different functions ?
In-Reply-To: <24185.11120.854513.592408@stat.math.ethz.ch>
References: <1307827665.1173067.1584967159734.ref@mail.yahoo.com>
 <1307827665.1173067.1584967159734@mail.yahoo.com>
 <75d49db4-38a2-e0a6-6c81-61ef4e815a35@dewey.myzen.co.uk>
 <24185.11120.854513.592408@stat.math.ethz.ch>
Message-ID: <118157076.5082021.1585237796441@mail.yahoo.com>

Dear Michael, 
Dear Martin,

Many thanks for your suggestions.

Best,







Le lundi 23 mars 2020 ? 22:34:41 UTC+1, Martin Maechler <maechler at stat.math.ethz.ch> a ?crit : 





>>>>> Michael Dewey 
>>>>>? ? on Mon, 23 Mar 2020 13:45:44 +0000 writes:

? ? > The documentation suggests that the rlm method for a formula does not 
? ? > have psi as a parameter. Perhaps try using the method for a matrix x and 
? ? > a vector y.

? ? > Michael

or use lmrob() from pkg robustbase? which is at least one
generation more recent and also with many more options than
rlm().

rlm() has been fantastic when it was introduced (into S /
S-plus, before R existed [in a publicly visible way]) but it had
been based of what was available back then, end of the 80's, beginning 90's.

Martin

? ? > On 23/03/2020 12:39, varin sacha via R-help wrote:
? ? >> Dear R-experts,
? ? >> 
? ? >> The rlm command in the MASS package command implements several versions of robust regression, for example the Huber and the Tukey (bisquare weighting function) estimators.
? ? >> In my R code here below I try to get the Tukey (bisquare weighting function) estimation, R gives me an error message : Error in statistic(data, original, ...) : unused argument (psi = psi.bisquare)
? ? >> If I cancel psi=psi.bisquare my code is working but IMHO I will get the Huber estimation and not the Tukey. So how can I get the Tukey ? Many thanks for your help.
? ? >> 
? ? >> 
? ? >> # # # # # # # # # # # # # # # # # # # # # # # #
? ? >> install.packages( "boot",dependencies=TRUE )
? ? >> install.packages( "MASS",dependencies=TRUE ?)
? ? >> library(boot)
? ? >> library(MASS)
? ? >> 
? ? >> n<-50
? ? >> b<-runif(n, 0, 5)
? ? >> z <- rnorm(n, 2, 3)
? ? >> a <- runif(n, 0, 5)
? ? >> 
? ? >> y_model<- 0.1*b - 0.5 * z - a + 10
? ? >> y_obs <- y_model +c( rnorm(n*0.9, 0, 0.1), rnorm(n*0.1, 0, 0.5) )
? ? >> df<-data.frame(b,z,a,y_obs)
? ? >> 
? ? >> ?# function to obtain MSE
? ? >> ?MSE <- function(data, indices, formula) {
? ? >> ? ? d <- data[indices, ] # allows boot to select sample
? ? >> ? ? fit <- rlm(formula, data = d)
? ? >> ? ? ypred <- predict(fit)
? ? >> ??? d[["y_obs "]] <-y_obs
? ? >> ??? mean((d[["y_obs"]]-ypred)^2)
? ? >> ?}
? ? >> 
? ? >> ?# Make the results reproducible
? ? >> ?set.seed(1234)
? ? >> 
? ? >> ?# bootstrapping with 600 replications
? ? >> ?results <- boot(data = df, statistic = MSE,
? ? >> ? ??????????????? R = 600, formula = y_obs ~ b+z+a, psi = psi.bisquare)
? ? >> 
? ? >> str(results)
? ? >> 
? ? >> boot.ci(results, type="bca"?)
? ? >> # # # # # # # # # # # # # # # # # # # # # # # # #
? ? >> 
? ? >> ______________________________________________
? ? >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
? ? >> https://stat.ethz.ch/mailman/listinfo/r-help
? ? >> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
? ? >> and provide commented, minimal, self-contained, reproducible code.
? ? >> 

? ? > -- 
? ? > Michael
? ? > http://www.dewey.myzen.co.uk/home.html


? ? > ______________________________________________
? ? > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
? ? > https://stat.ethz.ch/mailman/listinfo/r-help
? ? > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
? ? > and provide commented, minimal, self-contained, reproducible code.


From peter@|@ng|e|der @end|ng |rom gm@||@com  Thu Mar 26 17:07:34 2020
From: peter@|@ng|e|der @end|ng |rom gm@||@com (Peter Langfelder)
Date: Thu, 26 Mar 2020 09:07:34 -0700
Subject: [R] Add labels to dendogram
In-Reply-To: <CAMk+s2TG75SPi5YrXP=pOA-5APpOqZyL9DYQE-LfQBjeoc=AMw@mail.gmail.com>
References: <CAMk+s2TG75SPi5YrXP=pOA-5APpOqZyL9DYQE-LfQBjeoc=AMw@mail.gmail.com>
Message-ID: <CA+hbrhXes1-TrrkT45_UaD+UMzzNDkt7d-gD5HDBq9dFW-5Ocg@mail.gmail.com>

Your code does not work because Tag is not numeric. You need to exclude Tag
from the data frame df and instead assign it as rownames. Also, dist
requires a numeric matrix, not data frame.

df = as.matrix(data.frame(Healthy, Tumour, Metastasis))
or
df = cbind(Healthy, Tumour, Metastasis)

rownames(df) = Tag

Then continue as in your code.

Peter



On Thu, Mar 26, 2020 at 8:10 AM Luigi Marongiu <marongiu.luigi at gmail.com>
wrote:

> Dear all,
> I have built a hierarchical clustering on some data as follows:
> ```
> Tag = c(
>   "YP_008603282", "NP_054035",    "BAA00606",     "NP_054034",
>  "NP_054033",
>   "AAC17846" ,    "NP_054036",    "YP_073767" ,   "BAQ20411",     "P52455")
> Healthy = c(
>   12.15540751,  2.33103008,  1.46924258,  0.26274009,  0.95217008,
>   -0.08197491,  0.09038259, -0.08197491, -0.25433241, -0.08197491)
> Tumour = c(
>   12.51939026,  1.20983671,  0.61459705,  0.61459705,  0.81301027,
>   0.21777061,  -0.17905583, -0.17905583, -0.17905583,  0.01935739)
> Metastasis = c(
>   12.55328882,  1.04722513,  1.04722513,  0.70881149,  0.37039785,
>   0.20119103, 0.20119103,    0.20119103,  0.20119103,  0.03198422)
> df = data.frame(Tag, Healthy, Tumour, Metastasis, stringsAsFactors = FALSE)
> d <- dist(df, method = "euclidean")
> hc1 <- hclust(d, method = "complete" )
> plot(hc1)
> ```
>
> Is there a way to add the Tag column instead of the numbers to the leaves
> of the dendrogram?
> Thank you
>
> --
> Best regards,
> Luigi
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From |mh_u@er@-group@ @end|ng |rom mo|conn@com  Thu Mar 26 18:03:41 2020
From: |mh_u@er@-group@ @end|ng |rom mo|conn@com (LMH)
Date: Thu, 26 Mar 2020 13:03:41 -0400
Subject: [R] 2D and 3D graphing
In-Reply-To: <503206243.1017838.1585018444372@mail.yahoo.com>
References: <CA+ZkTxuiipCU8Bxyd+DCtswepgwzoWrMkaR1K54aRX6EqDAE_Q@mail.gmail.com>
 <108031af-1ab5-d536-c323-c1b8f6cbf1b6@molconn.com>
 <503206243.1017838.1585018444372@mail.yahoo.com>
Message-ID: <6fe18bd7-1b1c-8a69-d278-e1934d38acb6@molconn.com>

I have attached a .zip with some sample data and a list of R terminal commands. This
is not very interactive by does create a useful 3D plot. The data that I used was
generally not very large.

In the sample commands "R_terminal_input.txt", the working directory is given as
"C:/rgl_test". Line 14 in the terminal commands sets the working directory location,
so edit that line if you are going to use a different location. If you just copy the
entire file with select all | copy and paste it into the R terminal you should get
the plot (as long as pwd is correct). Make sure to key "enter" after you paste or you
will not get the last line of code.

You will see a plot of 5 points (5,57,55,41,sum) which are all connected by lines.
You can rotate the plot with left-click, pan the plot with right-click, and zoom with
the scroll wheel. The color of the data point is governed by the value of the "class"
column in the input file.

The input data input is spreadsheet like and you should be able to add your own data
without too much difficulty.

The format for the connecting lines is in the file
"connections_5,57,55,41,sum_all.txt" and is in the format,

x0	x1	y0	y1	z0	z1

Each line in the file is a vector where columns 0,2,4 are the xyz coordinates for the
tail of the vector and columns 1,3,5 are the xyz coordinates for the tip.

I have included a little script "_make_connect.sh". I wrote this to generate the
connection rows from the input file. The first argument to the script is the input
file name. The second argument specifies one of three types of connection sets.

all -> all points are connected
vec -> creates a vector from the first row to each other row
tet -> creates in irregular tetrahedron connection all points except the first row

This was all created for something I was working on and I don't know how directly it
will apply to what you need.

Feel free to ask questions. It is probably easier to do that than for me to
anticipate all possible areas of confusion.

LMH



EK Esawi wrote:
>  
> Thank you Ista and LMH. 
> I want to plot 3D scatter with options to connect the surface with lines;that's just like points connected with a  line in 2D and i may want to fit a surface to the data for soem of teh plots. LMH pointed out to what concerned me and the reason for the question which was i don't want to spend time in a package and then find out that t doesn't do what i want to.
> Thanks again and best of luckEK
>     On Monday, March 23, 2020, 6:02:33 PM EDT, LMH <lmh_users-groups at molconn.com> wrote:  
>  
>  Hello,
> 
> I use rgl for 3D plots.
> 
> Mostly I use this for a 3D scatter plot where I can zoom and pan for closer analyses
> of the data. I also can manually connect any points with lines. It took me a bit to
> get the options right so the plot appears the way I want it to. In my opinion, there
> are a few unresolved issues with the units and labels on the axis, but most of the
> data I looked at was in principle components so x, y, and z were in the same units.
> 
> I can post a sample of the terminal input that I used if that would help.
> 
> LMH
> 
> 
> Ek Esawi wrote:
>> Hi All--
>>
>> I have been looking into 2D and 3D graphing packages. Based on what i
>> read, it seems that ggplot2 is the best and I like it too, but ggplot2
>> doesn't have 3D plotting capabilities. I read that other packages
>> (plot_ly, rgl, rayshader) can be used with ggplot2 to create 3D
>> charts, but not sure if that?s the way to go.
>>
>> The question is: what is/are the best 2D and 3D graphing packages? I
>> read that lattice, and a few others, has ?limited? 3D charting
>> capabilities.
>>
>> Thanks in advance--EK
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>   
> 


From bgunter@4567 @end|ng |rom gm@||@com  Thu Mar 26 19:38:55 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 26 Mar 2020 11:38:55 -0700
Subject: [R] 2D and 3D graphing
In-Reply-To: <6fe18bd7-1b1c-8a69-d278-e1934d38acb6@molconn.com>
References: <CA+ZkTxuiipCU8Bxyd+DCtswepgwzoWrMkaR1K54aRX6EqDAE_Q@mail.gmail.com>
 <108031af-1ab5-d536-c323-c1b8f6cbf1b6@molconn.com>
 <503206243.1017838.1585018444372@mail.yahoo.com>
 <6fe18bd7-1b1c-8a69-d278-e1934d38acb6@molconn.com>
Message-ID: <CAGxFJbSYo8Zmhyw4==kyxKuTsznNvtLO2zCpU=6PAXYkD46kPg@mail.gmail.com>

" I have attached a .zip with some sample data and a list of R
terminal commands..."

Maybe to Ek, but not to the list. The server strips most attachments.

Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

On Thu, Mar 26, 2020 at 10:04 AM LMH <lmh_users-groups at molconn.com> wrote:
>
> I have attached a .zip with some sample data and a list of R terminal commands. This
> is not very interactive by does create a useful 3D plot. The data that I used was
> generally not very large.
>
> In the sample commands "R_terminal_input.txt", the working directory is given as
> "C:/rgl_test". Line 14 in the terminal commands sets the working directory location,
> so edit that line if you are going to use a different location. If you just copy the
> entire file with select all | copy and paste it into the R terminal you should get
> the plot (as long as pwd is correct). Make sure to key "enter" after you paste or you
> will not get the last line of code.
>
> You will see a plot of 5 points (5,57,55,41,sum) which are all connected by lines.
> You can rotate the plot with left-click, pan the plot with right-click, and zoom with
> the scroll wheel. The color of the data point is governed by the value of the "class"
> column in the input file.
>
> The input data input is spreadsheet like and you should be able to add your own data
> without too much difficulty.
>
> The format for the connecting lines is in the file
> "connections_5,57,55,41,sum_all.txt" and is in the format,
>
> x0      x1      y0      y1      z0      z1
>
> Each line in the file is a vector where columns 0,2,4 are the xyz coordinates for the
> tail of the vector and columns 1,3,5 are the xyz coordinates for the tip.
>
> I have included a little script "_make_connect.sh". I wrote this to generate the
> connection rows from the input file. The first argument to the script is the input
> file name. The second argument specifies one of three types of connection sets.
>
> all -> all points are connected
> vec -> creates a vector from the first row to each other row
> tet -> creates in irregular tetrahedron connection all points except the first row
>
> This was all created for something I was working on and I don't know how directly it
> will apply to what you need.
>
> Feel free to ask questions. It is probably easier to do that than for me to
> anticipate all possible areas of confusion.
>
> LMH
>
>
>
> EK Esawi wrote:
> >
> > Thank you Ista and LMH.
> > I want to plot 3D scatter with options to connect the surface with lines;that's just like points connected with a  line in 2D and i may want to fit a surface to the data for soem of teh plots. LMH pointed out to what concerned me and the reason for the question which was i don't want to spend time in a package and then find out that t doesn't do what i want to.
> > Thanks again and best of luckEK
> >     On Monday, March 23, 2020, 6:02:33 PM EDT, LMH <lmh_users-groups at molconn.com> wrote:
> >
> >  Hello,
> >
> > I use rgl for 3D plots.
> >
> > Mostly I use this for a 3D scatter plot where I can zoom and pan for closer analyses
> > of the data. I also can manually connect any points with lines. It took me a bit to
> > get the options right so the plot appears the way I want it to. In my opinion, there
> > are a few unresolved issues with the units and labels on the axis, but most of the
> > data I looked at was in principle components so x, y, and z were in the same units.
> >
> > I can post a sample of the terminal input that I used if that would help.
> >
> > LMH
> >
> >
> > Ek Esawi wrote:
> >> Hi All--
> >>
> >> I have been looking into 2D and 3D graphing packages. Based on what i
> >> read, it seems that ggplot2 is the best and I like it too, but ggplot2
> >> doesn't have 3D plotting capabilities. I read that other packages
> >> (plot_ly, rgl, rayshader) can be used with ggplot2 to create 3D
> >> charts, but not sure if that?s the way to go.
> >>
> >> The question is: what is/are the best 2D and 3D graphing packages? I
> >> read that lattice, and a few others, has ?limited? 3D charting
> >> capabilities.
> >>
> >> Thanks in advance--EK
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >>
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
> >
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From |mh_u@er@-group@ @end|ng |rom mo|conn@com  Thu Mar 26 22:23:28 2020
From: |mh_u@er@-group@ @end|ng |rom mo|conn@com (LMH)
Date: Thu, 26 Mar 2020 17:23:28 -0400
Subject: [R] 2D and 3D graphing
In-Reply-To: <CAGxFJbSYo8Zmhyw4==kyxKuTsznNvtLO2zCpU=6PAXYkD46kPg@mail.gmail.com>
References: <CA+ZkTxuiipCU8Bxyd+DCtswepgwzoWrMkaR1K54aRX6EqDAE_Q@mail.gmail.com>
 <108031af-1ab5-d536-c323-c1b8f6cbf1b6@molconn.com>
 <503206243.1017838.1585018444372@mail.yahoo.com>
 <6fe18bd7-1b1c-8a69-d278-e1934d38acb6@molconn.com>
 <CAGxFJbSYo8Zmhyw4==kyxKuTsznNvtLO2zCpU=6PAXYkD46kPg@mail.gmail.com>
Message-ID: <2c2bc053-166d-36b0-02c1-a100c04fa86e@molconn.com>

Bert Gunter wrote:
> " I have attached a .zip with some sample data and a list of R
> terminal commands..."
>
> Maybe to Ek, but not to the list. The server strips most attachments.
>
> Bert Gunter

Well that is annoying.

I have included the data below. There are 4 files.

If you start under the line below with the file name and copy, you should be
able to past into individual files. This is one reason I often prefer forums
to mailing lists.

LMH


file: point-set_5,57,55,41,sum.txt (tab delimited)
id	class	x	y	z
5	1	0	0	0
57	2	0.182546	-0.47885	0.35814
55	2	1.96957	2.39455	-0.523553
41	2	-3.79805	-1.21401	0.167462
sum	3	-5.84668125	4.57091875	-1.13686875


file: connections_5,57,55,41,sum_all.txt (tab delimited)
x0	x1	y0	y1	z0	z1
0	0.182546	0	-0.47885	0	0.35814
0	1.96957	0	2.39455	0	-0.523553
0	-3.79805	0	-1.21401	0	0.167462
0	-5.84668125	0	4.57091875	0	-1.13686875
0.182546	1.96957	-0.47885	2.39455	0.35814	-0.523553
0.182546	-3.79805	-0.47885	-1.21401	0.35814	0.167462
0.182546	-5.84668125	-0.47885	4.57091875	0.35814	-1.13686875
1.96957	-3.79805	2.39455	-1.21401	-0.523553	0.167462
1.96957	-5.84668125	2.39455	4.57091875	-0.523553	-1.13686875
-3.79805	-5.84668125	-1.21401	4.57091875	0.167462	-1.13686875


file: R_terminal_input.txt
# this is the list of R terminal input to creat the 3D plot
# all of the inputs can be made at once by select all | copy
# and then paste in the terminal

# this implies that you have created a directory containing the files
# point-set_5,57,55,41,sum.txt
# point-set_5,57,55,41,sum_all_connect.txt
# and set that as your working directory in setwd() below

# load rgl library
library(rgl)

# set working directory
setwd("C:/rgl_test")

# remove any existing objects
rm(list=ls())

# read in the table of points for plot
points <- read.table("point-set_5,57,55,41,sum.txt", header = TRUE)

# read in the values for the points that will be connected
connect <- read.table("connections_5,57,55,41,sum_all.txt", header = TRUE)

# create the "class" category
class <- as.factor(points[,2])

# create the plot of colums x,y,z
# the color of the points is indicated by the "class" column value
# change the boolean of "box" or "axes" to remove that feature from the plot
plot3d(points$x, points$y, points$z, col=class, size=7, box = TRUE, axes = TRUE)

# add the connections
segments3d(x=t(connect[,c(1,2)]), y=t(connect[,c(3,4)]), z=t(connect[,c(5,6)]))

# add text labels to the plot
# you can skip this if you don't want labels
# this adds value of the id column read into the points object
text3d(points$x, points$y, points$z, text=points$id, adj = c(1, 1), cex=1)

# add the pan function
# right click will now all the user to pan across the plot

pan3d <- function(button) {
start <- list()

begin <- function(x, y) {
 start$userMatrix <<- par3d("userMatrix")
  start$viewport <<- par3d("viewport")
  start$scale <<- par3d("scale")
   start$projection <<- rgl.projection()
  start$pos <<- rgl.window2user( x/start$viewport[3], 1 - y/start$viewport[4], 0.5,
                              projection=start$projection)
}

update <- function(x, y) {
 xlat <- (rgl.window2user( x/start$viewport[3], 1 - y/start$viewport[4], 0.5,
                         projection = start$projection) - start$pos)*start$scale
mouseMatrix <- translationMatrix(xlat[1], xlat[2], xlat[3])
par3d(userMatrix = start$userMatrix %*% t(mouseMatrix) )
}
rgl.setMouseCallbacks(button, begin, update)
cat("Callbacks set on button", button, "of rgl device",rgl.cur(),"\n")
}
pan3d(2)


file: _make_connect.sh
#!/bin/bash

# input file is first argument
input_file=$1
# which connections to output, all, vec, tet
output_type=$2
# create output file name
output_file=$(echo $input_file | sed 's/.txt//1')
# add output type
output_file=$output_file'_'$output_type'_connect.txt'

# make sure the output type is supported
if [ "$output_type" != "all" ] && [ "$output_type"  != "vec" ] && [ "$output_type"  != "tet" ]; then
   echo ""
   echo "output types are,"
   echo ""
   echo "all: connect all points"
   echo "vec: show vectors, connect point B to A,D,E,C"
   echo "tet: show tetrahedron, connect A to D,E,C, D to E,C, E to C"
   echo ""
   echo "use second argument to specify output type"
   echo ""
   exit 1
fi

# storage for row data
declare -a header
declare -a B_row
declare -a A_row
declare -a D_row
declare -a E_row
declare -a C_row
# to know what row is being read
row_counter=0

# loop through tabe delimited input file and store each row
while IFS=$'\t' read -a temp_row
do

   # for the header row
   if [ $row_counter == 0 ]; then
      header=("${temp_row[@]}")
      (( row_counter++ ))
   # for the B_row
   elif [ $row_counter == 1 ]; then
      B_row=("${temp_row[@]}")
      (( row_counter++ ))
   # for the A_row
   elif [ $row_counter == 2 ]; then
      A_row=("${temp_row[@]}")
      (( row_counter++ ))
   # for the D_row
   elif [ $row_counter == 3 ]; then
      D_row=("${temp_row[@]}")
      (( row_counter++ ))
   # for the E_row
   elif [ $row_counter == 4 ]; then
      E_row=("${temp_row[@]}")
      (( row_counter++ ))
   # for the C_row
   elif [ $row_counter == 5 ]; then
      C_row=("${temp_row[@]}")
   # check the max rows
   elif [ $row_counter == 6 ]; then
      echo "too many rows in input file, there should only be 5"
   fi

done < $input_file

# write output file
# header row
echo -e "x0"'\t'"x1"'\t'"y0"'\t'"y1"'\t'"z0"'\t'"z1" > $output_file

if [ "$output_type" == "all" ] || [ "$output_type"  == "vec" ] ; then
   # connect point B to each other point
   echo -e "${B_row[2]}"'\t'"${A_row[2]}"'\t'"${B_row[3]}"'\t'"${A_row[3]}"'\t'"${B_row[4]}"'\t'"${A_row[4]}" >>
$output_file
   echo -e "${B_row[2]}"'\t'"${D_row[2]}"'\t'"${B_row[3]}"'\t'"${D_row[3]}"'\t'"${B_row[4]}"'\t'"${D_row[4]}" >>
$output_file
   echo -e "${B_row[2]}"'\t'"${E_row[2]}"'\t'"${B_row[3]}"'\t'"${E_row[3]}"'\t'"${B_row[4]}"'\t'"${E_row[4]}" >>
$output_file
   echo -e "${B_row[2]}"'\t'"${C_row[2]}"'\t'"${B_row[3]}"'\t'"${C_row[3]}"'\t'"${B_row[4]}"'\t'"${C_row[4]}" >>
$output_file
fi

if [ "$output_type" == "all" ] || [ "$output_type"  == "tet" ] ; then
   # connect point A to each other point except A,B
   echo -e "${A_row[2]}"'\t'"${D_row[2]}"'\t'"${A_row[3]}"'\t'"${D_row[3]}"'\t'"${A_row[4]}"'\t'"${D_row[4]}" >>
$output_file
   echo -e "${A_row[2]}"'\t'"${E_row[2]}"'\t'"${A_row[3]}"'\t'"${E_row[3]}"'\t'"${A_row[4]}"'\t'"${E_row[4]}" >>
$output_file
   echo -e "${A_row[2]}"'\t'"${C_row[2]}"'\t'"${A_row[3]}"'\t'"${C_row[3]}"'\t'"${A_row[4]}"'\t'"${C_row[4]}" >>
$output_file
   # connect point D to point C,E
   echo -e "${D_row[2]}"'\t'"${E_row[2]}"'\t'"${D_row[3]}"'\t'"${E_row[3]}"'\t'"${D_row[4]}"'\t'"${E_row[4]}" >>
$output_file
   echo -e "${D_row[2]}"'\t'"${C_row[2]}"'\t'"${D_row[3]}"'\t'"${C_row[3]}"'\t'"${D_row[4]}"'\t'"${C_row[4]}" >>
$output_file
   # connect point E to point C
   echo -e "${E_row[2]}"'\t'"${C_row[2]}"'\t'"${E_row[3]}"'\t'"${C_row[3]}"'\t'"${E_row[4]}"'\t'"${C_row[4]}" >>
$output_file
fi









Bert Gunter wrote:
> " I have attached a .zip with some sample data and a list of R
> terminal commands..."
> 
> Maybe to Ek, but not to the list. The server strips most attachments.
> 
> Bert Gunter
> 
> "The trouble with having an open mind is that people keep coming along
> and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> 
> On Thu, Mar 26, 2020 at 10:04 AM LMH <lmh_users-groups at molconn.com> wrote:
>>
>> I have attached a .zip with some sample data and a list of R terminal commands. This
>> is not very interactive by does create a useful 3D plot. The data that I used was
>> generally not very large.
>>
>> In the sample commands "R_terminal_input.txt", the working directory is given as
>> "C:/rgl_test". Line 14 in the terminal commands sets the working directory location,
>> so edit that line if you are going to use a different location. If you just copy the
>> entire file with select all | copy and paste it into the R terminal you should get
>> the plot (as long as pwd is correct). Make sure to key "enter" after you paste or you
>> will not get the last line of code.
>>
>> You will see a plot of 5 points (5,57,55,41,sum) which are all connected by lines.
>> You can rotate the plot with left-click, pan the plot with right-click, and zoom with
>> the scroll wheel. The color of the data point is governed by the value of the "class"
>> column in the input file.
>>
>> The input data input is spreadsheet like and you should be able to add your own data
>> without too much difficulty.
>>
>> The format for the connecting lines is in the file
>> "connections_5,57,55,41,sum_all.txt" and is in the format,
>>
>> x0      x1      y0      y1      z0      z1
>>
>> Each line in the file is a vector where columns 0,2,4 are the xyz coordinates for the
>> tail of the vector and columns 1,3,5 are the xyz coordinates for the tip.
>>
>> I have included a little script "_make_connect.sh". I wrote this to generate the
>> connection rows from the input file. The first argument to the script is the input
>> file name. The second argument specifies one of three types of connection sets.
>>
>> all -> all points are connected
>> vec -> creates a vector from the first row to each other row
>> tet -> creates in irregular tetrahedron connection all points except the first row
>>
>> This was all created for something I was working on and I don't know how directly it
>> will apply to what you need.
>>
>> Feel free to ask questions. It is probably easier to do that than for me to
>> anticipate all possible areas of confusion.
>>
>> LMH
>>
>>
>>
>> EK Esawi wrote:
>>>
>>> Thank you Ista and LMH.
>>> I want to plot 3D scatter with options to connect the surface with lines;that's just like points connected with a  line in 2D and i may want to fit a surface to the data for soem of teh plots. LMH pointed out to what concerned me and the reason for the question which was i don't want to spend time in a package and then find out that t doesn't do what i want to.
>>> Thanks again and best of luckEK
>>>     On Monday, March 23, 2020, 6:02:33 PM EDT, LMH <lmh_users-groups at molconn.com> wrote:
>>>
>>>  Hello,
>>>
>>> I use rgl for 3D plots.
>>>
>>> Mostly I use this for a 3D scatter plot where I can zoom and pan for closer analyses
>>> of the data. I also can manually connect any points with lines. It took me a bit to
>>> get the options right so the plot appears the way I want it to. In my opinion, there
>>> are a few unresolved issues with the units and labels on the axis, but most of the
>>> data I looked at was in principle components so x, y, and z were in the same units.
>>>
>>> I can post a sample of the terminal input that I used if that would help.
>>>
>>> LMH
>>>
>>>
>>> Ek Esawi wrote:
>>>> Hi All--
>>>>
>>>> I have been looking into 2D and 3D graphing packages. Based on what i
>>>> read, it seems that ggplot2 is the best and I like it too, but ggplot2
>>>> doesn't have 3D plotting capabilities. I read that other packages
>>>> (plot_ly, rgl, rayshader) can be used with ggplot2 to create 3D
>>>> charts, but not sure if that?s the way to go.
>>>>
>>>> The question is: what is/are the best 2D and 3D graphing packages? I
>>>> read that lattice, and a few others, has ?limited? 3D charting
>>>> capabilities.
>>>>
>>>> Thanks in advance--EK
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>>
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Thu Mar 26 22:48:43 2020
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Thu, 26 Mar 2020 22:48:43 +0100
Subject: [R] Add labels to dendogram
In-Reply-To: <CA+hbrhXes1-TrrkT45_UaD+UMzzNDkt7d-gD5HDBq9dFW-5Ocg@mail.gmail.com>
References: <CAMk+s2TG75SPi5YrXP=pOA-5APpOqZyL9DYQE-LfQBjeoc=AMw@mail.gmail.com>
 <CA+hbrhXes1-TrrkT45_UaD+UMzzNDkt7d-gD5HDBq9dFW-5Ocg@mail.gmail.com>
Message-ID: <CAMk+s2RXfJUT-KZyjq7Gs0WnCFgFK6rWU135pfn=z=O_YGfwrA@mail.gmail.com>

Thank you!

On Thu, Mar 26, 2020 at 5:07 PM Peter Langfelder <peter.langfelder at gmail.com>
wrote:

> Your code does not work because Tag is not numeric. You need to exclude
> Tag from the data frame df and instead assign it as rownames. Also, dist
> requires a numeric matrix, not data frame.
>
> df = as.matrix(data.frame(Healthy, Tumour, Metastasis))
> or
> df = cbind(Healthy, Tumour, Metastasis)
>
> rownames(df) = Tag
>
> Then continue as in your code.
>
> Peter
>
>
>
> On Thu, Mar 26, 2020 at 8:10 AM Luigi Marongiu <marongiu.luigi at gmail.com>
> wrote:
>
>> Dear all,
>> I have built a hierarchical clustering on some data as follows:
>> ```
>> Tag = c(
>>   "YP_008603282", "NP_054035",    "BAA00606",     "NP_054034",
>>  "NP_054033",
>>   "AAC17846" ,    "NP_054036",    "YP_073767" ,   "BAQ20411",
>>  "P52455")
>> Healthy = c(
>>   12.15540751,  2.33103008,  1.46924258,  0.26274009,  0.95217008,
>>   -0.08197491,  0.09038259, -0.08197491, -0.25433241, -0.08197491)
>> Tumour = c(
>>   12.51939026,  1.20983671,  0.61459705,  0.61459705,  0.81301027,
>>   0.21777061,  -0.17905583, -0.17905583, -0.17905583,  0.01935739)
>> Metastasis = c(
>>   12.55328882,  1.04722513,  1.04722513,  0.70881149,  0.37039785,
>>   0.20119103, 0.20119103,    0.20119103,  0.20119103,  0.03198422)
>> df = data.frame(Tag, Healthy, Tumour, Metastasis, stringsAsFactors =
>> FALSE)
>> d <- dist(df, method = "euclidean")
>> hc1 <- hclust(d, method = "complete" )
>> plot(hc1)
>> ```
>>
>> Is there a way to add the Tag column instead of the numbers to the leaves
>> of the dendrogram?
>> Thank you
>>
>> --
>> Best regards,
>> Luigi
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

-- 
Best regards,
Luigi

	[[alternative HTML version deleted]]


From eke@@w| @end|ng |rom y@hoo@com  Fri Mar 27 01:48:15 2020
From: eke@@w| @end|ng |rom y@hoo@com (EK Esawi)
Date: Fri, 27 Mar 2020 00:48:15 +0000 (UTC)
Subject: [R] 2D and 3D graphing
In-Reply-To: <2c2bc053-166d-36b0-02c1-a100c04fa86e@molconn.com>
References: <CA+ZkTxuiipCU8Bxyd+DCtswepgwzoWrMkaR1K54aRX6EqDAE_Q@mail.gmail.com>
 <108031af-1ab5-d536-c323-c1b8f6cbf1b6@molconn.com>
 <503206243.1017838.1585018444372@mail.yahoo.com>
 <6fe18bd7-1b1c-8a69-d278-e1934d38acb6@molconn.com>
 <CAGxFJbSYo8Zmhyw4==kyxKuTsznNvtLO2zCpU=6PAXYkD46kPg@mail.gmail.com>
 <2c2bc053-166d-36b0-02c1-a100c04fa86e@molconn.com>
Message-ID: <749771663.2854796.1585270095295@mail.yahoo.com>

 
Thank you all; Bert, LMH, Duncan and others. I think i have a good idea now to resolve the problem i have.
Wish you all the best and and hope you're all safe
EK
    On Thursday, March 26, 2020, 5:24:03 PM EDT, LMH <lmh_users-groups at molconn.com> wrote:  
 
 Bert Gunter wrote:
> " I have attached a .zip with some sample data and a list of R
> terminal commands..."
>
> Maybe to Ek, but not to the list. The server strips most attachments.
>
> Bert Gunter

Well that is annoying.

I have included the data below. There are 4 files.

If you start under the line below with the file name and copy, you should be
able to past into individual files. This is one reason I often prefer forums
to mailing lists.

LMH


file: point-set_5,57,55,41,sum.txt (tab delimited)
id??? class??? x??? y??? z
5??? 1??? 0??? 0??? 0
57??? 2??? 0.182546??? -0.47885??? 0.35814
55??? 2??? 1.96957??? 2.39455??? -0.523553
41??? 2??? -3.79805??? -1.21401??? 0.167462
sum??? 3??? -5.84668125??? 4.57091875??? -1.13686875


file: connections_5,57,55,41,sum_all.txt (tab delimited)
x0??? x1??? y0??? y1??? z0??? z1
0??? 0.182546??? 0??? -0.47885??? 0??? 0.35814
0??? 1.96957??? 0??? 2.39455??? 0??? -0.523553
0??? -3.79805??? 0??? -1.21401??? 0??? 0.167462
0??? -5.84668125??? 0??? 4.57091875??? 0??? -1.13686875
0.182546??? 1.96957??? -0.47885??? 2.39455??? 0.35814??? -0.523553
0.182546??? -3.79805??? -0.47885??? -1.21401??? 0.35814??? 0.167462
0.182546??? -5.84668125??? -0.47885??? 4.57091875??? 0.35814??? -1.13686875
1.96957??? -3.79805??? 2.39455??? -1.21401??? -0.523553??? 0.167462
1.96957??? -5.84668125??? 2.39455??? 4.57091875??? -0.523553??? -1.13686875
-3.79805??? -5.84668125??? -1.21401??? 4.57091875??? 0.167462??? -1.13686875


file: R_terminal_input.txt
# this is the list of R terminal input to creat the 3D plot
# all of the inputs can be made at once by select all | copy
# and then paste in the terminal

# this implies that you have created a directory containing the files
# point-set_5,57,55,41,sum.txt
# point-set_5,57,55,41,sum_all_connect.txt
# and set that as your working directory in setwd() below

# load rgl library
library(rgl)

# set working directory
setwd("C:/rgl_test")

# remove any existing objects
rm(list=ls())

# read in the table of points for plot
points <- read.table("point-set_5,57,55,41,sum.txt", header = TRUE)

# read in the values for the points that will be connected
connect <- read.table("connections_5,57,55,41,sum_all.txt", header = TRUE)

# create the "class" category
class <- as.factor(points[,2])

# create the plot of colums x,y,z
# the color of the points is indicated by the "class" column value
# change the boolean of "box" or "axes" to remove that feature from the plot
plot3d(points$x, points$y, points$z, col=class, size=7, box = TRUE, axes = TRUE)

# add the connections
segments3d(x=t(connect[,c(1,2)]), y=t(connect[,c(3,4)]), z=t(connect[,c(5,6)]))

# add text labels to the plot
# you can skip this if you don't want labels
# this adds value of the id column read into the points object
text3d(points$x, points$y, points$z, text=points$id, adj = c(1, 1), cex=1)

# add the pan function
# right click will now all the user to pan across the plot

pan3d <- function(button) {
start <- list()

begin <- function(x, y) {
 start$userMatrix <<- par3d("userMatrix")
? start$viewport <<- par3d("viewport")
? start$scale <<- par3d("scale")
? start$projection <<- rgl.projection()
? start$pos <<- rgl.window2user( x/start$viewport[3], 1 - y/start$viewport[4], 0.5,
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? projection=start$projection)
}

update <- function(x, y) {
 xlat <- (rgl.window2user( x/start$viewport[3], 1 - y/start$viewport[4], 0.5,
? ? ? ? ? ? ? ? ? ? ? ? projection = start$projection) - start$pos)*start$scale
mouseMatrix <- translationMatrix(xlat[1], xlat[2], xlat[3])
par3d(userMatrix = start$userMatrix %*% t(mouseMatrix) )
}
rgl.setMouseCallbacks(button, begin, update)
cat("Callbacks set on button", button, "of rgl device",rgl.cur(),"\n")
}
pan3d(2)


file: _make_connect.sh
#!/bin/bash

# input file is first argument
input_file=$1
# which connections to output, all, vec, tet
output_type=$2
# create output file name
output_file=$(echo $input_file | sed 's/.txt//1')
# add output type
output_file=$output_file'_'$output_type'_connect.txt'

# make sure the output type is supported
if [ "$output_type" != "all" ] && [ "$output_type"? != "vec" ] && [ "$output_type"? != "tet" ]; then
? echo ""
? echo "output types are,"
? echo ""
? echo "all: connect all points"
? echo "vec: show vectors, connect point B to A,D,E,C"
? echo "tet: show tetrahedron, connect A to D,E,C, D to E,C, E to C"
? echo ""
? echo "use second argument to specify output type"
? echo ""
? exit 1
fi

# storage for row data
declare -a header
declare -a B_row
declare -a A_row
declare -a D_row
declare -a E_row
declare -a C_row
# to know what row is being read
row_counter=0

# loop through tabe delimited input file and store each row
while IFS=$'\t' read -a temp_row
do

? # for the header row
? if [ $row_counter == 0 ]; then
? ? ? header=("${temp_row[@]}")
? ? ? (( row_counter++ ))
? # for the B_row
? elif [ $row_counter == 1 ]; then
? ? ? B_row=("${temp_row[@]}")
? ? ? (( row_counter++ ))
? # for the A_row
? elif [ $row_counter == 2 ]; then
? ? ? A_row=("${temp_row[@]}")
? ? ? (( row_counter++ ))
? # for the D_row
? elif [ $row_counter == 3 ]; then
? ? ? D_row=("${temp_row[@]}")
? ? ? (( row_counter++ ))
? # for the E_row
? elif [ $row_counter == 4 ]; then
? ? ? E_row=("${temp_row[@]}")
? ? ? (( row_counter++ ))
? # for the C_row
? elif [ $row_counter == 5 ]; then
? ? ? C_row=("${temp_row[@]}")
? # check the max rows
? elif [ $row_counter == 6 ]; then
? ? ? echo "too many rows in input file, there should only be 5"
? fi

done < $input_file

# write output file
# header row
echo -e "x0"'\t'"x1"'\t'"y0"'\t'"y1"'\t'"z0"'\t'"z1" > $output_file

if [ "$output_type" == "all" ] || [ "$output_type"? == "vec" ] ; then
? # connect point B to each other point
? echo -e "${B_row[2]}"'\t'"${A_row[2]}"'\t'"${B_row[3]}"'\t'"${A_row[3]}"'\t'"${B_row[4]}"'\t'"${A_row[4]}" >>
$output_file
? echo -e "${B_row[2]}"'\t'"${D_row[2]}"'\t'"${B_row[3]}"'\t'"${D_row[3]}"'\t'"${B_row[4]}"'\t'"${D_row[4]}" >>
$output_file
? echo -e "${B_row[2]}"'\t'"${E_row[2]}"'\t'"${B_row[3]}"'\t'"${E_row[3]}"'\t'"${B_row[4]}"'\t'"${E_row[4]}" >>
$output_file
? echo -e "${B_row[2]}"'\t'"${C_row[2]}"'\t'"${B_row[3]}"'\t'"${C_row[3]}"'\t'"${B_row[4]}"'\t'"${C_row[4]}" >>
$output_file
fi

if [ "$output_type" == "all" ] || [ "$output_type"? == "tet" ] ; then
? # connect point A to each other point except A,B
? echo -e "${A_row[2]}"'\t'"${D_row[2]}"'\t'"${A_row[3]}"'\t'"${D_row[3]}"'\t'"${A_row[4]}"'\t'"${D_row[4]}" >>
$output_file
? echo -e "${A_row[2]}"'\t'"${E_row[2]}"'\t'"${A_row[3]}"'\t'"${E_row[3]}"'\t'"${A_row[4]}"'\t'"${E_row[4]}" >>
$output_file
? echo -e "${A_row[2]}"'\t'"${C_row[2]}"'\t'"${A_row[3]}"'\t'"${C_row[3]}"'\t'"${A_row[4]}"'\t'"${C_row[4]}" >>
$output_file
? # connect point D to point C,E
? echo -e "${D_row[2]}"'\t'"${E_row[2]}"'\t'"${D_row[3]}"'\t'"${E_row[3]}"'\t'"${D_row[4]}"'\t'"${E_row[4]}" >>
$output_file
? echo -e "${D_row[2]}"'\t'"${C_row[2]}"'\t'"${D_row[3]}"'\t'"${C_row[3]}"'\t'"${D_row[4]}"'\t'"${C_row[4]}" >>
$output_file
? # connect point E to point C
? echo -e "${E_row[2]}"'\t'"${C_row[2]}"'\t'"${E_row[3]}"'\t'"${C_row[3]}"'\t'"${E_row[4]}"'\t'"${C_row[4]}" >>
$output_file
fi









Bert Gunter wrote:
> " I have attached a .zip with some sample data and a list of R
> terminal commands..."
> 
> Maybe to Ek, but not to the list. The server strips most attachments.
> 
> Bert Gunter
> 
> "The trouble with having an open mind is that people keep coming along
> and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> 
> On Thu, Mar 26, 2020 at 10:04 AM LMH <lmh_users-groups at molconn.com> wrote:
>>
>> I have attached a .zip with some sample data and a list of R terminal commands. This
>> is not very interactive by does create a useful 3D plot. The data that I used was
>> generally not very large.
>>
>> In the sample commands "R_terminal_input.txt", the working directory is given as
>> "C:/rgl_test". Line 14 in the terminal commands sets the working directory location,
>> so edit that line if you are going to use a different location. If you just copy the
>> entire file with select all | copy and paste it into the R terminal you should get
>> the plot (as long as pwd is correct). Make sure to key "enter" after you paste or you
>> will not get the last line of code.
>>
>> You will see a plot of 5 points (5,57,55,41,sum) which are all connected by lines.
>> You can rotate the plot with left-click, pan the plot with right-click, and zoom with
>> the scroll wheel. The color of the data point is governed by the value of the "class"
>> column in the input file.
>>
>> The input data input is spreadsheet like and you should be able to add your own data
>> without too much difficulty.
>>
>> The format for the connecting lines is in the file
>> "connections_5,57,55,41,sum_all.txt" and is in the format,
>>
>> x0? ? ? x1? ? ? y0? ? ? y1? ? ? z0? ? ? z1
>>
>> Each line in the file is a vector where columns 0,2,4 are the xyz coordinates for the
>> tail of the vector and columns 1,3,5 are the xyz coordinates for the tip.
>>
>> I have included a little script "_make_connect.sh". I wrote this to generate the
>> connection rows from the input file. The first argument to the script is the input
>> file name. The second argument specifies one of three types of connection sets.
>>
>> all -> all points are connected
>> vec -> creates a vector from the first row to each other row
>> tet -> creates in irregular tetrahedron connection all points except the first row
>>
>> This was all created for something I was working on and I don't know how directly it
>> will apply to what you need.
>>
>> Feel free to ask questions. It is probably easier to do that than for me to
>> anticipate all possible areas of confusion.
>>
>> LMH
>>
>>
>>
>> EK Esawi wrote:
>>>
>>> Thank you Ista and LMH.
>>> I want to plot 3D scatter with options to connect the surface with lines;that's just like points connected with a? line in 2D and i may want to fit a surface to the data for soem of teh plots. LMH pointed out to what concerned me and the reason for the question which was i don't want to spend time in a package and then find out that t doesn't do what i want to.
>>> Thanks again and best of luckEK
>>>? ? On Monday, March 23, 2020, 6:02:33 PM EDT, LMH <lmh_users-groups at molconn.com> wrote:
>>>
>>>? Hello,
>>>
>>> I use rgl for 3D plots.
>>>
>>> Mostly I use this for a 3D scatter plot where I can zoom and pan for closer analyses
>>> of the data. I also can manually connect any points with lines. It took me a bit to
>>> get the options right so the plot appears the way I want it to. In my opinion, there
>>> are a few unresolved issues with the units and labels on the axis, but most of the
>>> data I looked at was in principle components so x, y, and z were in the same units.
>>>
>>> I can post a sample of the terminal input that I used if that would help.
>>>
>>> LMH
>>>
>>>
>>> Ek Esawi wrote:
>>>> Hi All--
>>>>
>>>> I have been looking into 2D and 3D graphing packages. Based on what i
>>>> read, it seems that ggplot2 is the best and I like it too, but ggplot2
>>>> doesn't have 3D plotting capabilities. I read that other packages
>>>> (plot_ly, rgl, rayshader) can be used with ggplot2 to create 3D
>>>> charts, but not sure if that?s the way to go.
>>>>
>>>> The question is: what is/are the best 2D and 3D graphing packages? I
>>>> read that lattice, and a few others, has ?limited? 3D charting
>>>> capabilities.
>>>>
>>>> Thanks in advance--EK
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>>
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 

  
	[[alternative HTML version deleted]]


From ch@|@b|@e|@he @end|ng |rom y@hoo@de  Fri Mar 27 12:17:57 2020
From: ch@|@b|@e|@he @end|ng |rom y@hoo@de (Elahe chalabi)
Date: Fri, 27 Mar 2020 11:17:57 +0000 (UTC)
Subject: [R] dplyr filter function returns all the levels
References: <970793189.5880942.1585307877491.ref@mail.yahoo.com>
Message-ID: <970793189.5880942.1585307877491@mail.yahoo.com>

Hello everyone,

I have the following dataframe?

? ? ? ??
? ? library(dplyr)
? ? dput(df)
? ? structure(list(Freq = c(19L, 19L, 18L, 15L, 14L, 13L, 13L, 12L,?
? ?11L, 11L, 11L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 9L), word1 = structure(c(3L,?
? ?11L, 5L, 6L, 11L, 3L, 7L, 10L, 8L, 11L, 13L, 1L, 1L, 4L, 5L,?
? ?9L, 12L, 14L, 2L), .Label = c("a", "art", "at", "by", "for",?
? ?"for ", "i", "is", "on", "said", "the", "there", "to", "when"
? ), class = "factor"), word2 = structure(c(13L, 12L, 13L, 13L,?
? 6L, 13L, 5L, 8L, 11L, 4L, 2L, 3L, 10L, 13L, 13L, 13L, 1L, 9L,?
? 7L), .Label = c("are", "be", "bit", "bottom", "dont", "end",?
? "hotel", "in", "it", "little", "one", "rest", "the"), class = "factor"),?
? word3 = structure(c(5L, 9L, 6L, 7L, 9L, 11L, 13L, 1L, 9L,?
? 9L, 2L, 9L, 3L, 5L, 6L, 10L, 12L, 4L, 8L), .Label = c("a",?
? "able", "bit", "comes", "end", "first", "first ", "florence",?
? "of", "other", "same", "so", "want"), class = "factor"),?
? word4 = structure(c(5L, 9L, 10L, 8L, 9L, 10L, 11L, 7L, 9L,?
? 9L, 11L, 1L, 5L, 5L, 6L, 2L, 4L, 11L, 3L), .Label = c("a",?
? "hand", "italy", "many", "of", "place", "statement", "states",?
? "the", "time", "to"), class = "factor")), class = "data.frame", row.names = c(NA,?
? -19L))


Is there a way to modify the following command so that the filter function doesn't return all the Levels?



? ?filter(df,(word1 == 'for' & word2 == 'the' & word3 == 'first')) $ word4
? ?[1] time? place
? ?Levels: a hand italy many of place statement states the time to



Thanks a lot!?
Elahe?


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Mar 27 13:41:12 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Fri, 27 Mar 2020 05:41:12 -0700
Subject: [R] dplyr filter function returns all the levels
In-Reply-To: <970793189.5880942.1585307877491@mail.yahoo.com>
References: <970793189.5880942.1585307877491.ref@mail.yahoo.com>
 <970793189.5880942.1585307877491@mail.yahoo.com>
Message-ID: <BC8A23DF-68D7-4085-A6AC-3D4B8EEADFE0@dcn.davis.ca.us>

Don't use factors in the first place? Use character data.

On March 27, 2020 4:17:57 AM PDT, Elahe chalabi via R-help <r-help at r-project.org> wrote:
>Hello everyone,
>
>I have the following dataframe?
>
>? ? ? ??
>? ? library(dplyr)
>? ? dput(df)
>? ? structure(list(Freq = c(19L, 19L, 18L, 15L, 14L, 13L, 13L, 12L,?
>? ?11L, 11L, 11L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 9L), word1 =
>structure(c(3L,?
>? ?11L, 5L, 6L, 11L, 3L, 7L, 10L, 8L, 11L, 13L, 1L, 1L, 4L, 5L,?
>? ?9L, 12L, 14L, 2L), .Label = c("a", "art", "at", "by", "for",?
>? ?"for ", "i", "is", "on", "said", "the", "there", "to", "when"
>? ), class = "factor"), word2 = structure(c(13L, 12L, 13L, 13L,?
>? 6L, 13L, 5L, 8L, 11L, 4L, 2L, 3L, 10L, 13L, 13L, 13L, 1L, 9L,?
>? 7L), .Label = c("are", "be", "bit", "bottom", "dont", "end",?
>? "hotel", "in", "it", "little", "one", "rest", "the"), class =
>"factor"),?
>? word3 = structure(c(5L, 9L, 6L, 7L, 9L, 11L, 13L, 1L, 9L,?
>? 9L, 2L, 9L, 3L, 5L, 6L, 10L, 12L, 4L, 8L), .Label = c("a",?
>? "able", "bit", "comes", "end", "first", "first ", "florence",?
>? "of", "other", "same", "so", "want"), class = "factor"),?
>? word4 = structure(c(5L, 9L, 10L, 8L, 9L, 10L, 11L, 7L, 9L,?
>? 9L, 11L, 1L, 5L, 5L, 6L, 2L, 4L, 11L, 3L), .Label = c("a",?
>? "hand", "italy", "many", "of", "place", "statement", "states",?
>? "the", "time", "to"), class = "factor")), class = "data.frame",
>row.names = c(NA,?
>? -19L))
>
>
>Is there a way to modify the following command so that the filter
>function doesn't return all the Levels?
>
>
>
>? ?filter(df,(word1 == 'for' & word2 == 'the' & word3 == 'first')) $
>word4
>? ?[1] time? place
>? ?Levels: a hand italy many of place statement states the time to
>
>
>
>Thanks a lot!?
>Elahe?
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Fri Mar 27 14:02:19 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Fri, 27 Mar 2020 13:02:19 +0000
Subject: [R] dplyr filter function returns all the levels
In-Reply-To: <BC8A23DF-68D7-4085-A6AC-3D4B8EEADFE0@dcn.davis.ca.us>
References: <970793189.5880942.1585307877491.ref@mail.yahoo.com>
 <970793189.5880942.1585307877491@mail.yahoo.com>
 <BC8A23DF-68D7-4085-A6AC-3D4B8EEADFE0@dcn.davis.ca.us>
Message-ID: <99acb053-dd71-7a0d-7713-79971117ea23@sapo.pt>

Hello,

Here are two ways. The first keeps word4 as factor, the second coerces 
to character first, like Jeff said.

df %>%
   filter(word1 == 'for' & word2 == 'the' & word3 == 'first') %>%
   pull(word4) %>%
   droplevels()


df %>%
   mutate_if(is.factor, as.character) %>%
   filter(word1 == 'for' & word2 == 'the' & word3 == 'first') %>%
   pull(word4)



Hope this helps,

Rui Barradas

?s 12:41 de 27/03/20, Jeff Newmiller escreveu:
> Don't use factors in the first place? Use character data.
> 
> On March 27, 2020 4:17:57 AM PDT, Elahe chalabi via R-help <r-help at r-project.org> wrote:
>> Hello everyone,
>>
>> I have the following dataframe
>>
>>          
>>  ? ? library(dplyr)
>>  ? ? dput(df)
>>  ? ? structure(list(Freq = c(19L, 19L, 18L, 15L, 14L, 13L, 13L, 12L,
>>  ? ?11L, 11L, 11L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 9L), word1 =
>> structure(c(3L,
>>  ? ?11L, 5L, 6L, 11L, 3L, 7L, 10L, 8L, 11L, 13L, 1L, 1L, 4L, 5L,
>>  ? ?9L, 12L, 14L, 2L), .Label = c("a", "art", "at", "by", "for",
>>  ? ?"for ", "i", "is", "on", "said", "the", "there", "to", "when"
>>  ? ), class = "factor"), word2 = structure(c(13L, 12L, 13L, 13L,
>>  ? 6L, 13L, 5L, 8L, 11L, 4L, 2L, 3L, 10L, 13L, 13L, 13L, 1L, 9L,
>>  ? 7L), .Label = c("are", "be", "bit", "bottom", "dont", "end",
>>  ? "hotel", "in", "it", "little", "one", "rest", "the"), class =
>> "factor"),
>>  ? word3 = structure(c(5L, 9L, 6L, 7L, 9L, 11L, 13L, 1L, 9L,
>>  ? 9L, 2L, 9L, 3L, 5L, 6L, 10L, 12L, 4L, 8L), .Label = c("a",
>>  ? "able", "bit", "comes", "end", "first", "first ", "florence",
>>  ? "of", "other", "same", "so", "want"), class = "factor"),
>>  ? word4 = structure(c(5L, 9L, 10L, 8L, 9L, 10L, 11L, 7L, 9L,
>>  ? 9L, 11L, 1L, 5L, 5L, 6L, 2L, 4L, 11L, 3L), .Label = c("a",
>>  ? "hand", "italy", "many", "of", "place", "statement", "states",
>>  ? "the", "time", "to"), class = "factor")), class = "data.frame",
>> row.names = c(NA,
>>  ? -19L))
>>
>>
>> Is there a way to modify the following command so that the filter
>> function doesn't return all the Levels?
>>
>>
>>
>>  ? ?filter(df,(word1 == 'for' & word2 == 'the' & word3 == 'first')) $
>> word4
>>  ? ?[1] time? place
>>  ? ?Levels: a hand italy many of place statement states the time to
>>
>>
>>
>> Thanks a lot!
>> Elahe
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>


From wjm1 @end|ng |rom c@@@co|umb|@@edu  Fri Mar 27 18:38:53 2020
From: wjm1 @end|ng |rom c@@@co|umb|@@edu (William Michels)
Date: Fri, 27 Mar 2020 10:38:53 -0700
Subject: [R] Tidyverse Question
In-Reply-To: <CA+vqiLFndLLehDw35piJN5OrWcVayjzRfNHBSHnrLNeBezpKGw@mail.gmail.com>
References: <8F8C98D19A4A4B7389E5EED4FBFC8822@OWNERPC>
 <CA+vqiLFndLLehDw35piJN5OrWcVayjzRfNHBSHnrLNeBezpKGw@mail.gmail.com>
Message-ID: <CAA99HCz+J74on+DobHpWzMxZs=NeW4vfGtMmev6O71v0dq8tzQ@mail.gmail.com>

Dear Ista (and Phillip),

Ista, that's the exact same advice I gave Phillip over a week ago:

https://stat.ethz.ch/pipermail/r-help/2020-March/465994.html

Phillip, it doesn't make sense to post the same question under
different subject headings. While I'm convinced you're making a
sincere effort to learn R on your own--i.e. this isn't
homework--anyone trying to help you (Ista, Jeff, Bert, John, Stefan,
Duncan, etc.) will need feedback on what advice you've taken from
people on this list, and what the outcome was. So please provide it.

I do have one last suggestion, that you contact the author of the book
you're using to see if there has been an error in his/her coding
instructions. You can file an "Issue" on Github, and/or find the
author's email there and email him/her directly:

https://github.com/maxtoki/baseball_R
https://github.com/maxtoki

HTH, Bill.

W. Michels, Ph.D.





On Mon, Mar 23, 2020 at 3:37 PM Ista Zahn <istazahn at gmail.com> wrote:
>
> Hi Phillip,
>
> On Mon, Mar 23, 2020 at 6:33 PM Phillip Heinrich <herd_dog at cox.net> wrote:
> >
> > Can someone out there run the following code from the book Analyzing Baseball Data with R ? Chapter 7 page 164?
> >
> >     library(tidyverse)
> >     db <- src_sqlite(?data/pitchrx.sqlite?,create=TRUE)
> >
> > Over the past two weeks this code has run correctly twice but I have gotten the following error dozens of times:
> >
> >     Error: Could not connect to database:
> >     unable to open database file
>
> Probably you working directory has no sub-directory named 'data'.
>
> Best,
> Ista
> >
> > I?m trying to figure out if the problem is with my computer or if the tidyverse package has been revised since this book was written.  I got the same error when I loaded R onto my wife?s Mac.
> >
> > The file pitchrx.sqlite loaded into my directory C:/Users/Owner/Documents.  The data file db contains four xml files used later in the analysis.
> >
> > Thanks.
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From 13917987541 @end|ng |rom 163@com  Sat Mar 28 04:00:09 2020
From: 13917987541 @end|ng |rom 163@com (=?GBK?B?wdbOsOi0?=)
Date: Sat, 28 Mar 2020 11:00:09 +0800 (CST)
Subject: [R] About the multiprecision computing package in R
In-Reply-To: <57549f5f.20af.1711f0f50a7.Coremail.13917987541@163.com>
References: <6fbfe09c.1042.170d6f5f0b3.Coremail.13917987541@163.com>
 <CAGgJW75fz5y7oXfFbgGyn5FZzGsdrL1LntD0Um39oeibKzu8Lg@mail.gmail.com>
 <57549f5f.20af.1711f0f50a7.Coremail.13917987541@163.com>
Message-ID: <48318647.2161.1711f151b82.Coremail.13917987541@163.com>

Thanks! I installed Rmpfr now.


But it does NOT support eigen function ?


x  <- array(1:16, dim=c(4,4))
ev <- eigen(x)
********************************
mat <- mpfrArray(1:25, 64, dim = c(5,5))
ev <- eigen(mat)
Error in `dimnames<-`(`*tmp*`, value = NULL) : non-list RHS
********************************


WL




At 2020-03-15 01:57:36, "Eric Berger" <ericjberger at gmail.com> 
CRAN Rmpfr


On Sat, Mar 14, 2020 at 7:36 PM ???? <13917987541 at 163.com> wrote:

Dear all


I need a multiprecision computing package in R, if anyone in the list knows, please let me known...


Many thanks


Weilu Lin
        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.






 
	[[alternative HTML version deleted]]


From r@turner @end|ng |rom @uck|@nd@@c@nz  Sat Mar 28 07:16:11 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Sat, 28 Mar 2020 19:16:11 +1300
Subject: [R] Puzzled by the "call" component of object returned by xyplot()
 from lattice.
Message-ID: <ed93b451-e3e4-db82-c6f7-e48f482f82f7@auckland.ac.nz>


I have written a function that calls xyplot() from the lattice package.
In this function (which is actually a method for plot(), I assign a value

    plotObj <- xyplot(fmla,groups=.......)

and then either either do print(plotObj) --- to display a plot as well 
as returning plotObj, to be kept for future use/reference.

I have just noticed that if I do

     p1 <- plot(X)
and

    p2 <- plot(X,transform=FALSE)

where X is of course an object of the class for which my method gets 
used, I get p1$call to be

    xyplot(X)

and p2$call to be

     xyplot(X, transform = TRUE)

That is, it gives the arguments supplied to the calling function (my 
plot method) in the call component, and not the arguments to xyplot().

This seems strange to me.  Should I have, uh, expected this?  *Why* 
should I have expected this?  Can anyone explain?

I guess it's just idle curiosity; nothing really riding on it.

Thanks.

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From @zwj|08 @end|ng |rom gm@||@com  Sat Mar 28 08:54:24 2020
From: @zwj|08 @end|ng |rom gm@||@com (Wang Jiefei)
Date: Sat, 28 Mar 2020 03:54:24 -0400
Subject: [R] About the multiprecision computing package in R
In-Reply-To: <48318647.2161.1711f151b82.Coremail.13917987541@163.com>
References: <6fbfe09c.1042.170d6f5f0b3.Coremail.13917987541@163.com>
 <CAGgJW75fz5y7oXfFbgGyn5FZzGsdrL1LntD0Um39oeibKzu8Lg@mail.gmail.com>
 <57549f5f.20af.1711f0f50a7.Coremail.13917987541@163.com>
 <48318647.2161.1711f151b82.Coremail.13917987541@163.com>
Message-ID: <CAGiFhPOUB+Eo_5MeEDurvWV=YM0gBR4mrd=E97H-VK5rhdvPHw@mail.gmail.com>

If you want to do a fancy matrix operation, you may need to invent the
wheel yourself. Rmpfr only supports limited matrix operations. There may
exist some C++ library that can do this job, I will suggest finding a
matrix library whose elements are of a template type, then combine it with
a multi-precision library so that you can do matrix operations in a very
high precision.

Best,
Jiefei

On Sat, Mar 28, 2020 at 12:32 AM ??? <13917987541 at 163.com> wrote:

> Thanks! I installed Rmpfr now.
>
>
> But it does NOT support eigen function ?
>
>
> x  <- array(1:16, dim=c(4,4))
> ev <- eigen(x)
> ********************************
> mat <- mpfrArray(1:25, 64, dim = c(5,5))
> ev <- eigen(mat)
> Error in `dimnames<-`(`*tmp*`, value = NULL) : non-list RHS
> ********************************
>
>
> WL
>
>
>
>
> At 2020-03-15 01:57:36, "Eric Berger" <ericjberger at gmail.com>
> CRAN Rmpfr
>
>
> On Sat, Mar 14, 2020 at 7:36 PM ??? <13917987541 at 163.com> wrote:
>
> Dear all
>
>
> I need a multiprecision computing package in R, if anyone in the list
> knows, please let me known...
>
>
> Many thanks
>
>
> Weilu Lin
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
>
>
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Sat Mar 28 16:15:03 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 28 Mar 2020 08:15:03 -0700
Subject: [R] 
 Puzzled by the "call" component of object returned by xyplot()
 from lattice.
In-Reply-To: <ed93b451-e3e4-db82-c6f7-e48f482f82f7@auckland.ac.nz>
References: <ed93b451-e3e4-db82-c6f7-e48f482f82f7@auckland.ac.nz>
Message-ID: <CAGxFJbSrCQSOAHa2jvO0YppTKDBPSpecLoUWLqj6=5wAZ5UwMQ@mail.gmail.com>

Rolf:

This behavior has nothing to do with S3 methods:

> f <- function(x,y,...) xyplot(y~x, col = "red",...)
> x <- 1:5; y <- runif(5)
> z <- f(x,y)
> z$call
xyplot(x, y)

I have **not** studied the lattice code, but assuming that it is using
match.call() to get the call it returns, it looks like the sys.call
argument it (i.e. match.call()) is given is looking up higher in the
call stack than sys.parent().

Hopefully Deepayan or a suitable someone else can provide a definitive answer.

Cheers,
Bert

On Fri, Mar 27, 2020 at 11:16 PM Rolf Turner <r.turner at auckland.ac.nz> wrote:
>
>
> I have written a function that calls xyplot() from the lattice package.
> In this function (which is actually a method for plot(), I assign a value
>
>     plotObj <- xyplot(fmla,groups=.......)
>
> and then either either do print(plotObj) --- to display a plot as well
> as returning plotObj, to be kept for future use/reference.
>
> I have just noticed that if I do
>
>      p1 <- plot(X)
> and
>
>     p2 <- plot(X,transform=FALSE)
>
> where X is of course an object of the class for which my method gets
> used, I get p1$call to be
>
>     xyplot(X)
>
> and p2$call to be
>
>      xyplot(X, transform = TRUE)
>
> That is, it gives the arguments supplied to the calling function (my
> plot method) in the call component, and not the arguments to xyplot().
>
> This seems strange to me.  Should I have, uh, expected this?  *Why*
> should I have expected this?  Can anyone explain?
>
> I guess it's just idle curiosity; nothing really riding on it.
>
> Thanks.
>
> cheers,
>
> Rolf
>
> --
> Honorary Research Fellow
> Department of Statistics
> University of Auckland
> Phone: +64-9-373-7599 ext. 88276
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Sat Mar 28 20:25:35 2020
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Sat, 28 Mar 2020 19:25:35 +0000 (UTC)
Subject: [R] Error message using boot.ci function
References: <1886232711.620054.1585423535507.ref@mail.yahoo.com>
Message-ID: <1886232711.620054.1585423535507@mail.yahoo.com>

Dear R-experts,

Here below my "toy" reproducible example showing many warnings and an error message. What I am interested in is the error message.
Of course I can access and view the results doing : summary(results$t) to give me an idea of what is going on. But I don't know how to correct/solve my problem. Any help to solve my problem would be highly appreciated.

# # # # # # # # # # # # # # # # # # # ## # # # # # # # # # # # # # # 
bmi=c(23,43,21,23,45,65,45,11,12,13,23,34,NA,NA)
glucose=c(NA,12,23,11,12,21,23,21,23,43,23,12,NA,23)
crp=c(123,212,154,342,123,111,121,765,453,123,213,211,NA,NA)
age=c(67,45,34,56,87,NA,NA,23,18,65,45,87,65,33)
sex=c(0,1,1,0,1,0,1,0,0,1,1,1,NA,NA)

Dataset=data.frame("bmi","glucose","crp","age","sex")
newdata=na.omit(Dataset) 

#install.packages( "robustbase",dependencies=TRUE )
#install.packages( "boot",dependencies=TRUE )
library(boot)
library(robustbase)

?# function to obtain MSE
?MSE <- function(data, indices, formula,method) {
fastMM <- lmrob( crp ~ bmi+glucose+age+sex, data=newdata)
??? d <- data[indices, ] # allows boot to select sample
??? fit <- lmrob(formula, data = d, method="MM")
??? ypred <- predict(fit)
?? mean((d[["fastMM"]]-ypred)^2)
?}

?# bootstrapping with 1000 replications
?results <- boot(data = newdata, statistic = MSE,
????????????????? R = 1000, formula = crp ~ bmi+glucose+age+sex,method="MM")

str(results)
boot.ci(results, type="norm" )

summary(results$t)
# # # # # # # # # # # # # # # # # # # # # # # # #


From r@turner @end|ng |rom @uck|@nd@@c@nz  Sun Mar 29 01:46:25 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Sun, 29 Mar 2020 13:46:25 +1300
Subject: [R] Syntax for geom_point in ggplot2, distinguishing point types.
Message-ID: <24880972-a0b1-799a-2433-971a75743e8d@auckland.ac.nz>


I have an application in which I want to plot points with different 
colours and symbols to distinguish (three) types of point.  I thought I 
had it figured out, mostly by a trial-and-error approach and by 
simple-mindedly following instructions from others, without (sad to say) 
really understanding what I was doing.

I have now encountered an example where my syntax screws up, and I can't 
see how to fix it in a coherent and generally applicable way.  The 
problem arises if the data column (factor) specifying the point types is 
missing one level.  When this happens, the types get out of synch.

I have attached a source-able file "demo.txt" and the two data sets upon 
which it depends as "data1.txt" and "data2.txt" (dput() format).

The result from using the data from "data1.txt" (plotObj1) demonstrates 
the problem, i.e. the unwanted phenomenon.  The result from using the 
data from "data2.txt" (plotObj2) is "as it should be".

In the data from data1.txt the "extremes" column, which specifies the 
point type, is missing the level "0":

>        table(Dat1$extremes)
> 
>        0 intermed        1 
>        0       39       43 

As you will be able to see, the plot of these data has the "0" symbol (a 
triangle) where there should be an "intermed" symbol (a solid dot), and 
the "intermed" symbol where there should be a "1" symbol (an upside-down 
triangle).

The data from data2.txt have an extremes column with all three levels 
and the corresponding plot is as desired.

I'm pretty sure that the solution to my problem is quite simple, but I 
am too stupid to figure it out.  Can anyone guide me in the right direction?

Thanks.

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: demo.txt
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200329/c9433604/attachment.txt>

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: data1.txt
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200329/c9433604/attachment-0001.txt>

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: data2.txt
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200329/c9433604/attachment-0002.txt>

From phii m@iii@g oii phiiipsmith@c@  Sun Mar 29 03:18:51 2020
From: phii m@iii@g oii phiiipsmith@c@ (phii m@iii@g oii phiiipsmith@c@)
Date: Sat, 28 Mar 2020 21:18:51 -0400
Subject: [R] Duplicate names in the pivot column
Message-ID: <3395075d64fa50e787ee0f09d8b71af0@philipsmith.ca>

I have a problem involving inefficient coding. My code works, but in my 
actual application it takes a very long time to execute. I have included 
a reprex here that uses the same code, but with a much smaller-scale 
application.

The data frame I am working with (df in my reprex) is in long form and I 
want to change it to wide form. My problem is that the pivot column, 
column 2 in my reprex, has some duplicate strings, so the pivot doesn't 
work well (df1 in my reprex). I want to find all the duplicates and tag 
them so they are no longer duplicates. My code succeeds (df3 in my 
reprex). But in the real application there can be over 100 "cases" and 
the for loops grind on far too long.

I encounter this problem frequently in the datasets I use, so I am 
looking for a general solution that is as efficient as possible. Any 
help will be much appreciated.

Philip

``` r
library(tidyverse)
df <- data.frame(time=c(1,1,1,1,1,1,2,2,2,2,2,2),
                  y=c("A","B","C","B","D","C","A","B","C","B","D","C"),
                  z=sample(1:100,12,replace=TRUE),stringsAsFactors=FALSE)
df1 <- pivot_wider(df,id_cols=1,names_from=y,values_from=z)
#> Warning: Values in `z` are not uniquely identified; output will 
contain list-cols.
#> * Use `values_fn = list(z = list)` to suppress this warning.
#> * Use `values_fn = list(z = length)` to identify where the duplicates 
arise
#> * Use `values_fn = list(z = summary_fun)` to summarise duplicates
fixcol <- function(dfm,cases,per,s,tag) {
   # dfm is the data frame
   # s is the target column number, containing character names
   # tag is a string to be added to a duplicate name
   # cases is the number of rows for a single time period
   # per is the number of time periods
   # all time periods must have the same number of rows
   for (k in 1:per) {
     for (i in (1+(k-1)*cases):(k*cases-1)) {
       for (j in (i+1):(k*cases)) {
         if (dfm[j,s]==dfm[i,s]) { # found a duplicate
           dfm[j,s] <- paste0(dfm[i,s],tag) # fix the duplicate
           dfm[j,s]
         }
       }
     }
   }
   return(dfm)
}
df2 <- fixcol(df,6,2,2,"_dup")
df3 <- pivot_wider(df2,id_cols=1,names_from=y,values_from=z)
```

<sup>Created on 2020-03-28 by the [reprex 
package](https://reprex.tidyverse.org) (v0.3.0)</sup>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: pivot_col_duplicates.txt
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200328/38719199/attachment.txt>

From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Mar 29 03:52:29 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 28 Mar 2020 18:52:29 -0700
Subject: [R] 
 Syntax for geom_point in ggplot2, distinguishing point types.
In-Reply-To: <24880972-a0b1-799a-2433-971a75743e8d@auckland.ac.nz>
References: <24880972-a0b1-799a-2433-971a75743e8d@auckland.ac.nz>
Message-ID: <BC58D5DE-9A16-4691-B441-BCDBF97FD6F3@dcn.davis.ca.us>

My general approach is to import data without letting the import convert to factors. Then I explicitly create my factors with the levels I want them to have, with explicit vectors specified for the levels. Fixing this after the analysis is possible but a headache.

On March 28, 2020 5:46:25 PM PDT, Rolf Turner <r.turner at auckland.ac.nz> wrote:
>
>I have an application in which I want to plot points with different 
>colours and symbols to distinguish (three) types of point.  I thought I
>
>had it figured out, mostly by a trial-and-error approach and by 
>simple-mindedly following instructions from others, without (sad to
>say) 
>really understanding what I was doing.
>
>I have now encountered an example where my syntax screws up, and I
>can't 
>see how to fix it in a coherent and generally applicable way.  The 
>problem arises if the data column (factor) specifying the point types
>is 
>missing one level.  When this happens, the types get out of synch.
>
>I have attached a source-able file "demo.txt" and the two data sets
>upon 
>which it depends as "data1.txt" and "data2.txt" (dput() format).
>
>The result from using the data from "data1.txt" (plotObj1) demonstrates
>
>the problem, i.e. the unwanted phenomenon.  The result from using the 
>data from "data2.txt" (plotObj2) is "as it should be".
>
>In the data from data1.txt the "extremes" column, which specifies the 
>point type, is missing the level "0":
>
>>        table(Dat1$extremes)
>> 
>>        0 intermed        1 
>>        0       39       43 
>
>As you will be able to see, the plot of these data has the "0" symbol
>(a 
>triangle) where there should be an "intermed" symbol (a solid dot), and
>
>the "intermed" symbol where there should be a "1" symbol (an
>upside-down 
>triangle).
>
>The data from data2.txt have an extremes column with all three levels 
>and the corresponding plot is as desired.
>
>I'm pretty sure that the solution to my problem is quite simple, but I 
>am too stupid to figure it out.  Can anyone guide me in the right
>direction?
>
>Thanks.
>
>cheers,
>
>Rolf Turner

-- 
Sent from my phone. Please excuse my brevity.


From drj|m|emon @end|ng |rom gm@||@com  Sun Mar 29 08:25:07 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Sun, 29 Mar 2020 17:25:07 +1100
Subject: [R] Duplicate names in the pivot column
In-Reply-To: <3395075d64fa50e787ee0f09d8b71af0@philipsmith.ca>
References: <3395075d64fa50e787ee0f09d8b71af0@philipsmith.ca>
Message-ID: <CA+8X3fXhdPTSB-Em52-HF7brJhiCxMvyrYOmaVN0LdCVbMgBEQ@mail.gmail.com>

Hi Phil,
Sorry it's not in the environment you are using, but perhaps this will help:

taby<-table(df$y)
ynames<-names(taby)
for(yval in 1:length(taby)) {
 if(taby[yval] > 1) {
  cat(paste(ynames[yval],1:taby[yval],sep=""),"\n")
  df$y[which(df$y == ynames[yval])]<-paste(ynames[yval],1:taby[yval],sep="")
 }
}

Jim

On Sun, Mar 29, 2020 at 12:19 PM <phil at philipsmith.ca> wrote:
>
> I have a problem involving inefficient coding. My code works, but in my
> actual application it takes a very long time to execute. I have included
> a reprex here that uses the same code, but with a much smaller-scale
> application.
>
> The data frame I am working with (df in my reprex) is in long form and I
> want to change it to wide form. My problem is that the pivot column,
> column 2 in my reprex, has some duplicate strings, so the pivot doesn't
> work well (df1 in my reprex). I want to find all the duplicates and tag
> them so they are no longer duplicates. My code succeeds (df3 in my
> reprex). But in the real application there can be over 100 "cases" and
> the for loops grind on far too long.
>
> I encounter this problem frequently in the datasets I use, so I am
> looking for a general solution that is as efficient as possible. Any
> help will be much appreciated.
>
> Philip
>
> ``` r
> library(tidyverse)
> df <- data.frame(time=c(1,1,1,1,1,1,2,2,2,2,2,2),
>                   y=c("A","B","C","B","D","C","A","B","C","B","D","C"),
>                   z=sample(1:100,12,replace=TRUE),stringsAsFactors=FALSE)
> df1 <- pivot_wider(df,id_cols=1,names_from=y,values_from=z)
> #> Warning: Values in `z` are not uniquely identified; output will
> contain list-cols.
> #> * Use `values_fn = list(z = list)` to suppress this warning.
> #> * Use `values_fn = list(z = length)` to identify where the duplicates
> arise
> #> * Use `values_fn = list(z = summary_fun)` to summarise duplicates
> fixcol <- function(dfm,cases,per,s,tag) {
>    # dfm is the data frame
>    # s is the target column number, containing character names
>    # tag is a string to be added to a duplicate name
>    # cases is the number of rows for a single time period
>    # per is the number of time periods
>    # all time periods must have the same number of rows
>    for (k in 1:per) {
>      for (i in (1+(k-1)*cases):(k*cases-1)) {
>        for (j in (i+1):(k*cases)) {
>          if (dfm[j,s]==dfm[i,s]) { # found a duplicate
>            dfm[j,s] <- paste0(dfm[i,s],tag) # fix the duplicate
>            dfm[j,s]
>          }
>        }
>      }
>    }
>    return(dfm)
> }
> df2 <- fixcol(df,6,2,2,"_dup")
> df3 <- pivot_wider(df2,id_cols=1,names_from=y,values_from=z)
> ```
>
> <sup>Created on 2020-03-28 by the [reprex
> package](https://reprex.tidyverse.org) (v0.3.0)</sup>______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Mar 29 09:24:38 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 29 Mar 2020 00:24:38 -0700
Subject: [R] Duplicate names in the pivot column
In-Reply-To: <3395075d64fa50e787ee0f09d8b71af0@philipsmith.ca>
References: <3395075d64fa50e787ee0f09d8b71af0@philipsmith.ca>
Message-ID: <377B8144-7FCD-45A1-899A-3EF99C7F315F@dcn.davis.ca.us>

Does this help?

df4 <- (   df
       %>% group_by( time, y )
       %>% mutate( lvl = seq.int( n() ) )
       %>% ungroup()
       %>% mutate( y = ifelse( 1==lvl
                             , y
                             , paste( y, "dup" )
                             )
                 )
       )

On March 28, 2020 6:18:51 PM PDT, phil at philipsmith.ca wrote:
>I have a problem involving inefficient coding. My code works, but in my
>
>actual application it takes a very long time to execute. I have
>included 
>a reprex here that uses the same code, but with a much smaller-scale 
>application.
>
>The data frame I am working with (df in my reprex) is in long form and
>I 
>want to change it to wide form. My problem is that the pivot column, 
>column 2 in my reprex, has some duplicate strings, so the pivot doesn't
>
>work well (df1 in my reprex). I want to find all the duplicates and tag
>
>them so they are no longer duplicates. My code succeeds (df3 in my 
>reprex). But in the real application there can be over 100 "cases" and 
>the for loops grind on far too long.
>
>I encounter this problem frequently in the datasets I use, so I am 
>looking for a general solution that is as efficient as possible. Any 
>help will be much appreciated.
>
>Philip
>
>``` r
>library(tidyverse)
>df <- data.frame(time=c(1,1,1,1,1,1,2,2,2,2,2,2),
>                  y=c("A","B","C","B","D","C","A","B","C","B","D","C"),
>                z=sample(1:100,12,replace=TRUE),stringsAsFactors=FALSE)
>df1 <- pivot_wider(df,id_cols=1,names_from=y,values_from=z)
>#> Warning: Values in `z` are not uniquely identified; output will 
>contain list-cols.
>#> * Use `values_fn = list(z = list)` to suppress this warning.
>#> * Use `values_fn = list(z = length)` to identify where the
>duplicates 
>arise
>#> * Use `values_fn = list(z = summary_fun)` to summarise duplicates
>fixcol <- function(dfm,cases,per,s,tag) {
>   # dfm is the data frame
>   # s is the target column number, containing character names
>   # tag is a string to be added to a duplicate name
>   # cases is the number of rows for a single time period
>   # per is the number of time periods
>   # all time periods must have the same number of rows
>   for (k in 1:per) {
>     for (i in (1+(k-1)*cases):(k*cases-1)) {
>       for (j in (i+1):(k*cases)) {
>         if (dfm[j,s]==dfm[i,s]) { # found a duplicate
>           dfm[j,s] <- paste0(dfm[i,s],tag) # fix the duplicate
>           dfm[j,s]
>         }
>       }
>     }
>   }
>   return(dfm)
>}
>df2 <- fixcol(df,6,2,2,"_dup")
>df3 <- pivot_wider(df2,id_cols=1,names_from=y,values_from=z)
>```
>
><sup>Created on 2020-03-28 by the [reprex 
>package](https://reprex.tidyverse.org) (v0.3.0)</sup>

-- 
Sent from my phone. Please excuse my brevity.


From r@turner @end|ng |rom @uck|@nd@@c@nz  Sun Mar 29 10:19:00 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Sun, 29 Mar 2020 21:19:00 +1300
Subject: [R] My ggplot question is more-or-less solved.
Message-ID: <70616981-1be6-9635-1ec5-b87567e16f9f@auckland.ac.nz>


Following Jeff Newmiller's advice, I set to work and adjusted the levels 
of the "extremes" factor in the data, and correspondingly the values of 
the vectors "shps", "culs" and "tkst" that are used to effect the 
plotting of points of different types with different shapes and colours. 
  I'd hoped to avoid doing this, and hoped that there might be some sort 
of ggplot syntax to obviate the need for doing this.  However it turned 
out not be as messy as I'd feared and it seems to work.  (Said he with 
his fingers crossed.)

I would just like to add that I was *going* to ask another question, 
about a mysterious warning that I was getting (in the same context).
This warning did not go away when I implemented the fix referred to above.

HOWEVER in the process of putting together a clear formulation of my 
question I was compelled to examine something that I had not previously 
considered --- and the penny dropped!!!  I saw what I was doing wrong, 
and it was easy to fix.

Thanks everybody!!! :-)

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: ggpData.txt
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200329/e59109cc/attachment.txt>

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: rData.txt
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200329/e59109cc/attachment-0001.txt>

From r@turner @end|ng |rom @uck|@nd@@c@nz  Sun Mar 29 10:23:44 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Sun, 29 Mar 2020 21:23:44 +1300
Subject: [R] My ggplot question is more-or-less solved --- whoops.
In-Reply-To: <70616981-1be6-9635-1ec5-b87567e16f9f@auckland.ac.nz>
References: <70616981-1be6-9635-1ec5-b87567e16f9f@auckland.ac.nz>
Message-ID: <6979b782-5aff-516d-4806-98172f7b94a2@auckland.ac.nz>


Whoops.

Please ignore those attached *.txt files in my previous email.  They 
pertain to the question that I was *going* to ask, but wound up managing 
to answer myself, after being careful to formulate the question
in a meticulously clear manner.  For fear of getting Ripleyed! :-)

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From 13917987541 @end|ng |rom 163@com  Sun Mar 29 11:19:12 2020
From: 13917987541 @end|ng |rom 163@com (=?GBK?B?wdbOsOi0?=)
Date: Sun, 29 Mar 2020 17:19:12 +0800 (CST)
Subject: [R] About package the GNU C++ library into R package
In-Reply-To: <6fbfe09c.1042.170d6f5f0b3.Coremail.13917987541@163.com>
References: <6fbfe09c.1042.170d6f5f0b3.Coremail.13917987541@163.com>
Message-ID: <4675ab07.3b4d.17125968029.Coremail.13917987541@163.com>

Dear all


Does anyone knwon how to package a GNU C++ library into R package ? Thanks !


WL



















	[[alternative HTML version deleted]]


From peter@br@|om@@ @end|ng |rom gm@||@com  Sun Mar 29 11:49:01 2020
From: peter@br@|om@@ @end|ng |rom gm@||@com (Peter Lomas)
Date: Sun, 29 Mar 2020 09:49:01 +0000
Subject: [R] GMM twoStep vs Stata's ivreg2 gmm2s or ivregress coefficients
Message-ID: <CAOHXzyWTdUtnXm7zdmGeQUGZHxqp9wEOS4pTCyqkx1U4-Byppw@mail.gmail.com>

Hi R-Help,

I'm replicating IV-GMM models from Stata in R, but get small differences in
coefficients (eg 100.0 vs 100.3); I'm hoping somebody can share anything
they've learned attempting the same thing.  The linear models match
exactly, so there isn't a data problem. With both help files I've matched
the arguments I think I can (Bartlett, bandwidth, errors), and experimented
with others, but can't close the gap.

Suggestions appreciated if people have knowledge of Stata's methods in R-
I'm not sure if this is something that should be expected from numerical
solvers.

Thanks again
Peter

	[[alternative HTML version deleted]]


From phii m@iii@g oii phiiipsmith@c@  Sun Mar 29 17:45:40 2020
From: phii m@iii@g oii phiiipsmith@c@ (phii m@iii@g oii phiiipsmith@c@)
Date: Sun, 29 Mar 2020 11:45:40 -0400
Subject: [R] Duplicate names in the pivot column
In-Reply-To: <CA+8X3fXhdPTSB-Em52-HF7brJhiCxMvyrYOmaVN0LdCVbMgBEQ@mail.gmail.com>
References: <3395075d64fa50e787ee0f09d8b71af0@philipsmith.ca>
 <CA+8X3fXhdPTSB-Em52-HF7brJhiCxMvyrYOmaVN0LdCVbMgBEQ@mail.gmail.com>
Message-ID: <ceb9465eb13cd47ae55558339e8fcf2d@philipsmith.ca>

Thank you very much, Jim and Jeff. Both of your solutions work 
splendidly.

Philip

On 2020-03-29 02:25, Jim Lemon wrote:
> Hi Phil,
> Sorry it's not in the environment you are using, but perhaps this will 
> help:
> 
> taby<-table(df$y)
> ynames<-names(taby)
> for(yval in 1:length(taby)) {
>  if(taby[yval] > 1) {
>   cat(paste(ynames[yval],1:taby[yval],sep=""),"\n")
>   df$y[which(df$y == 
> ynames[yval])]<-paste(ynames[yval],1:taby[yval],sep="")
>  }
> }
> 
> Jim
> 
> On Sun, Mar 29, 2020 at 12:19 PM <phil at philipsmith.ca> wrote:
>> 
>> I have a problem involving inefficient coding. My code works, but in 
>> my
>> actual application it takes a very long time to execute. I have 
>> included
>> a reprex here that uses the same code, but with a much smaller-scale
>> application.
>> 
>> The data frame I am working with (df in my reprex) is in long form and 
>> I
>> want to change it to wide form. My problem is that the pivot column,
>> column 2 in my reprex, has some duplicate strings, so the pivot 
>> doesn't
>> work well (df1 in my reprex). I want to find all the duplicates and 
>> tag
>> them so they are no longer duplicates. My code succeeds (df3 in my
>> reprex). But in the real application there can be over 100 "cases" and
>> the for loops grind on far too long.
>> 
>> I encounter this problem frequently in the datasets I use, so I am
>> looking for a general solution that is as efficient as possible. Any
>> help will be much appreciated.
>> 
>> Philip
>> 
>> ``` r
>> library(tidyverse)
>> df <- data.frame(time=c(1,1,1,1,1,1,2,2,2,2,2,2),
>>                   
>> y=c("A","B","C","B","D","C","A","B","C","B","D","C"),
>>                   
>> z=sample(1:100,12,replace=TRUE),stringsAsFactors=FALSE)
>> df1 <- pivot_wider(df,id_cols=1,names_from=y,values_from=z)
>> #> Warning: Values in `z` are not uniquely identified; output will
>> contain list-cols.
>> #> * Use `values_fn = list(z = list)` to suppress this warning.
>> #> * Use `values_fn = list(z = length)` to identify where the 
>> duplicates
>> arise
>> #> * Use `values_fn = list(z = summary_fun)` to summarise duplicates
>> fixcol <- function(dfm,cases,per,s,tag) {
>>    # dfm is the data frame
>>    # s is the target column number, containing character names
>>    # tag is a string to be added to a duplicate name
>>    # cases is the number of rows for a single time period
>>    # per is the number of time periods
>>    # all time periods must have the same number of rows
>>    for (k in 1:per) {
>>      for (i in (1+(k-1)*cases):(k*cases-1)) {
>>        for (j in (i+1):(k*cases)) {
>>          if (dfm[j,s]==dfm[i,s]) { # found a duplicate
>>            dfm[j,s] <- paste0(dfm[i,s],tag) # fix the duplicate
>>            dfm[j,s]
>>          }
>>        }
>>      }
>>    }
>>    return(dfm)
>> }
>> df2 <- fixcol(df,6,2,2,"_dup")
>> df3 <- pivot_wider(df2,id_cols=1,names_from=y,values_from=z)
>> ```
>> 
>> <sup>Created on 2020-03-28 by the [reprex
>> package](https://reprex.tidyverse.org) 
>> (v0.3.0)</sup>______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From dw|n@em|u@ @end|ng |rom comc@@t@net  Mon Mar 30 00:40:24 2020
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Sun, 29 Mar 2020 15:40:24 -0700
Subject: [R] Error message using boot.ci function
In-Reply-To: <1886232711.620054.1585423535507@mail.yahoo.com>
References: <1886232711.620054.1585423535507.ref@mail.yahoo.com>
 <1886232711.620054.1585423535507@mail.yahoo.com>
Message-ID: <ff0ce444-5dfd-3e02-ef1f-799b05acabfc@comcast.net>


On 3/28/20 12:25 PM, varin sacha via R-help wrote:
> Dear R-experts,
>
> Here below my "toy" reproducible example showing many warnings and an error message. What I am interested in is the error message.
> Of course I can access and view the results doing : summary(results$t) to give me an idea of what is going on. But I don't know how to correct/solve my problem. Any help to solve my problem would be highly appreciated.


I do suggest you look at:


str(Dataset)

str(newdata)


The problem is actually in your construction of Dataset. Do not quote 
object names next time.

-- 

David

>
> # # # # # # # # # # # # # # # # # # # ## # # # # # # # # # # # # # #
> bmi=c(23,43,21,23,45,65,45,11,12,13,23,34,NA,NA)
> glucose=c(NA,12,23,11,12,21,23,21,23,43,23,12,NA,23)
> crp=c(123,212,154,342,123,111,121,765,453,123,213,211,NA,NA)
> age=c(67,45,34,56,87,NA,NA,23,18,65,45,87,65,33)
> sex=c(0,1,1,0,1,0,1,0,0,1,1,1,NA,NA)
>
> Dataset=data.frame("bmi","glucose","crp","age","sex")
> newdata=na.omit(Dataset)
>
> #install.packages( "robustbase",dependencies=TRUE )
> #install.packages( "boot",dependencies=TRUE )
> library(boot)
> library(robustbase)
>
>  ?# function to obtain MSE
>  ?MSE <- function(data, indices, formula,method) {
> fastMM <- lmrob( crp ~ bmi+glucose+age+sex, data=newdata)
>  ??? d <- data[indices, ] # allows boot to select sample
>  ??? fit <- lmrob(formula, data = d, method="MM")
>  ??? ypred <- predict(fit)
>  ?? mean((d[["fastMM"]]-ypred)^2)
>  ?}
>
>  ?# bootstrapping with 1000 replications
>  ?results <- boot(data = newdata, statistic = MSE,
>  ????????????????? R = 1000, formula = crp ~ bmi+glucose+age+sex,method="MM")
>
> str(results)
> boot.ci(results, type="norm" )
>
> summary(results$t)
> # # # # # # # # # # # # # # # # # # # # # # # # #
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From Seb@@t|en@B|hore| @end|ng |rom cogn|gencorp@com  Mon Mar 30 02:03:14 2020
From: Seb@@t|en@B|hore| @end|ng |rom cogn|gencorp@com (Sebastien Bihorel)
Date: Mon, 30 Mar 2020 00:03:14 +0000
Subject: [R] POSIX system oddities
Message-ID: <CH2PR19MB38643ADC65A8AB063370B98A92CA0@CH2PR19MB3864.namprd19.prod.outlook.com>

Hi,

Why is there less number of seconds on 03/10/2019 in the internal POSIX system? The difference between the previous or the next day eems to be exactly 1 hour. I could not find anything in the manuals on CRAN.

> dates <- as.POSIXct(sprintf('03/%s/2019',9:12), format = '%m/%d/%Y')
> dates
[1] "2019-03-09 EST" "2019-03-10 EST" "2019-03-11 EDT" "2019-03-12 EDT"
> diff(as.numeric(dates[1:2]))
[1] 86400
> diff(as.numeric(dates[2:3]))
[1] 82800
> diff(as.numeric(dates[3:4]))
[1] 86400



	[[alternative HTML version deleted]]


From peter@|@ng|e|der @end|ng |rom gm@||@com  Mon Mar 30 02:12:07 2020
From: peter@|@ng|e|der @end|ng |rom gm@||@com (Peter Langfelder)
Date: Sun, 29 Mar 2020 17:12:07 -0700
Subject: [R] POSIX system oddities
In-Reply-To: <CH2PR19MB38643ADC65A8AB063370B98A92CA0@CH2PR19MB3864.namprd19.prod.outlook.com>
References: <CH2PR19MB38643ADC65A8AB063370B98A92CA0@CH2PR19MB3864.namprd19.prod.outlook.com>
Message-ID: <CA+hbrhXCTMkmvjH3MOuuuE=xRvD++G+uxSFKt6XbbhNuaygWxQ@mail.gmail.com>

The time has changed from "standard" (EST) to "Daylight saving" (EDT) which
shaves off 1 hour.

Peter

On Sun, Mar 29, 2020 at 5:03 PM Sebastien Bihorel via R-help <
r-help at r-project.org> wrote:

> Hi,
>
> Why is there less number of seconds on 03/10/2019 in the internal POSIX
> system? The difference between the previous or the next day eems to be
> exactly 1 hour. I could not find anything in the manuals on CRAN.
>
> > dates <- as.POSIXct(sprintf('03/%s/2019',9:12), format = '%m/%d/%Y')
> > dates
> [1] "2019-03-09 EST" "2019-03-10 EST" "2019-03-11 EDT" "2019-03-12 EDT"
> > diff(as.numeric(dates[1:2]))
> [1] 86400
> > diff(as.numeric(dates[2:3]))
> [1] 82800
> > diff(as.numeric(dates[3:4]))
> [1] 86400
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From Seb@@t|en@B|hore| @end|ng |rom cogn|gencorp@com  Mon Mar 30 02:15:04 2020
From: Seb@@t|en@B|hore| @end|ng |rom cogn|gencorp@com (Sebastien Bihorel)
Date: Mon, 30 Mar 2020 00:15:04 +0000
Subject: [R] POSIX system oddities
In-Reply-To: <CA+hbrhXCTMkmvjH3MOuuuE=xRvD++G+uxSFKt6XbbhNuaygWxQ@mail.gmail.com>
References: <CH2PR19MB38643ADC65A8AB063370B98A92CA0@CH2PR19MB3864.namprd19.prod.outlook.com>,
 <CA+hbrhXCTMkmvjH3MOuuuE=xRvD++G+uxSFKt6XbbhNuaygWxQ@mail.gmail.com>
Message-ID: <CH2PR19MB38643C8C06EC2D5335B45D5992CB0@CH2PR19MB3864.namprd19.prod.outlook.com>

Duh !!!

Thanks.

________________________________
From: Peter Langfelder <peter.langfelder at gmail.com>
Sent: Sunday, March 29, 2020 20:12
To: Sebastien Bihorel <Sebastien.Bihorel at cognigencorp.com>
Cc: r-help at r-project.org <r-help at r-project.org>
Subject: Re: [R] POSIX system oddities

The time has changed from "standard" (EST) to "Daylight saving" (EDT) which shaves off 1 hour.

Peter

On Sun, Mar 29, 2020 at 5:03 PM Sebastien Bihorel via R-help <r-help at r-project.org<mailto:r-help at r-project.org>> wrote:
Hi,

Why is there less number of seconds on 03/10/2019 in the internal POSIX system? The difference between the previous or the next day eems to be exactly 1 hour. I could not find anything in the manuals on CRAN.

> dates <- as.POSIXct(sprintf('03/%s/2019',9:12), format = '%m/%d/%Y')
> dates
[1] "2019-03-09 EST" "2019-03-10 EST" "2019-03-11 EDT" "2019-03-12 EDT"
> diff(as.numeric(dates[1:2]))
[1] 86400
> diff(as.numeric(dates[2:3]))
[1] 82800
> diff(as.numeric(dates[3:4]))
[1] 86400



        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Mon Mar 30 11:45:02 2020
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Mon, 30 Mar 2020 09:45:02 +0000 (UTC)
Subject: [R] Error message using boot.ci function
In-Reply-To: <ff0ce444-5dfd-3e02-ef1f-799b05acabfc@comcast.net>
References: <1886232711.620054.1585423535507.ref@mail.yahoo.com>
 <1886232711.620054.1585423535507@mail.yahoo.com>
 <ff0ce444-5dfd-3e02-ef1f-799b05acabfc@comcast.net>
Message-ID: <556953200.1684243.1585561502244@mail.yahoo.com>

Many thanks David,

But I am not sure the Dataset and newdata are the real problem. I have solved, at least I think so, what you were asking. Here below my new R code but still the same error message. IMHO the problem is with "boot.ci" function...

# # # # # # # # # # # # # # # # # # # ## # # # # # # # # # # # # # #
bmi=c(23,43,21,23,45,65,45,11,12,13,23,34,NA,NA,34,35,45,65,43,23,12,11,15,43,23,88,78,79,89,89,99,43,21,34,32,45,65,76,56,45,34,23,12,32)
glucose=c(NA,12,23,11,12,21,23,21,23,43,23,12,NA,23,11,12,32,12,14,12,11,10,9,8,9,8,7,90,76,32,12,11,12,23,11,123,32,12,14,34,54,65,76,87)
crp=c(123,212,154,342,123,111,121,765,453,123,213,211,NA,NA,32,123,213,145,143,123,132,143,165,176,181,123,87,567,342,123,143,132,143,234,345,32,123,132,143,345,321,543,231,123)
age=c(67,45,34,56,87,NA,NA,23,18,65,45,87,65,33,23,65,43,23,43,12,132,56,76,87,98,78,76,56,78,54,34,56,76,99,12,45,34,65,76,87,98,97,64,53)
sex=c(0,1,1,0,1,0,1,0,0,1,1,1,NA,NA,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,0,0)

Dataset=data.frame( bmi,glucose,crp,age,sex)
newdata=na.omit(Dataset)

#install.packages( "robustbase",dependencies=TRUE )
#install.packages( "boot",dependencies=TRUE )
library(boot)
library(robustbase)

?# function to obtain MSE
?MSE <- function(data, indices, formula,method) {
??? d <- data[indices, ] # allows boot to select sample
??? fastMM <- lmrob( crp ~ bmi+glucose+age+sex,data=newdata)
??? fit <- lmrob(formula, data = d, method="MM")
??? ypred <- predict(fit)
?? mean((d[["fastMM"]]-ypred)^2)

?}

?# bootstrapping with 100 replications
?results <- boot(data = newdata, statistic = MSE,
????????????????? R = 100, formula = crp ~ bmi+glucose+age+sex,method="MM")

str(results)
boot.ci(results, type="norm" )

str(Dataset)
str(newdata)
summary(results$t)
# # # # # # # # # # # # # # # # # # # # # # # # #







Le lundi 30 mars 2020 ? 00:40:33 UTC+2, David Winsemius <dwinsemius at comcast.net> a ?crit : 






On 3/28/20 12:25 PM, varin sacha via R-help wrote:
> Dear R-experts,
>
> Here below my "toy" reproducible example showing many warnings and an error message. What I am interested in is the error message.
> Of course I can access and view the results doing : summary(results$t) to give me an idea of what is going on. But I don't know how to correct/solve my problem. Any help to solve my problem would be highly appreciated.


I do suggest you look at:


str(Dataset)

str(newdata)


The problem is actually in your construction of Dataset. Do not quote 
object names next time.

-- 

David


>
> # # # # # # # # # # # # # # # # # # # ## # # # # # # # # # # # # # #
> bmi=c(23,43,21,23,45,65,45,11,12,13,23,34,NA,NA)
> glucose=c(NA,12,23,11,12,21,23,21,23,43,23,12,NA,23)
> crp=c(123,212,154,342,123,111,121,765,453,123,213,211,NA,NA)
> age=c(67,45,34,56,87,NA,NA,23,18,65,45,87,65,33)
> sex=c(0,1,1,0,1,0,1,0,0,1,1,1,NA,NA)
>
> Dataset=data.frame("bmi","glucose","crp","age","sex")
> newdata=na.omit(Dataset)
>
> #install.packages( "robustbase",dependencies=TRUE )
> #install.packages( "boot",dependencies=TRUE )
> library(boot)
> library(robustbase)
>
>? ?# function to obtain MSE
>? ?MSE <- function(data, indices, formula,method) {
> fastMM <- lmrob( crp ~ bmi+glucose+age+sex, data=newdata)
>? ??? d <- data[indices, ] # allows boot to select sample
>? ??? fit <- lmrob(formula, data = d, method="MM")
>? ??? ypred <- predict(fit)
>? ?? mean((d[["fastMM"]]-ypred)^2)
>? ?}
>
>? ?# bootstrapping with 1000 replications
>? ?results <- boot(data = newdata, statistic = MSE,
>? ????????????????? R = 1000, formula = crp ~ bmi+glucose+age+sex,method="MM")
>
> str(results)
> boot.ci(results, type="norm" )
>
> summary(results$t)
> # # # # # # # # # # # # # # # # # # # # # # # # #
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From N|co|@@@SIMON @end|ng |rom @p-hm@|r  Mon Mar 30 15:21:45 2020
From: N|co|@@@SIMON @end|ng |rom @p-hm@|r (SIMON Nicolas)
Date: Mon, 30 Mar 2020 13:21:45 +0000
Subject: [R] custom function insite dlys::mutate
Message-ID: <a1b15240cd4b4178b242b3ae6ecb4644@SCWPR-EXDAG1-2B.aphm.ap-hm.fr>

Hi,

I tried to use mutate from dplyr with a personal function to create a new variable of a data.frame.

All examples I found are such as myfunction(x){...}.

In my script, the function calls:
- one variable coming from the data.frame
- variables coming from lists or constant outside the data.frame

My function is something like:

var1 <- seq(0,20,1)
dat <- data.frame(var1)
var2 <- c(0,2,4,8)
var3 <- 44.44
var4 <- 0.5

Myfunction <- function(var1, var2, var3,var4){
   obs <- 0
   obs1 <- 0
   for (i in 1:length(var2)) {
         tt <- var2[i]
         if ( var1 > tt ){
             obs1 <- var3 * exp(-var4*var1)
         }
         else obs1 <- 0.0
         obs <- obs + obs1
   }
  return(obs)
}
dat2 <- mutate(dat, obs = Myfunction(var1=var1,var2=var2,var3=var3))

Apparently the condition " if ( var1 > tt ) " cannot be evaluated correcty.

Could you please give me an advice to write it properly?



Best regards
Nicolas


	[[alternative HTML version deleted]]


From p@rkhur@ @end|ng |rom |nd|@n@@edu  Sun Mar 29 20:55:44 2020
From: p@rkhur@ @end|ng |rom |nd|@n@@edu (David)
Date: Sun, 29 Mar 2020 14:55:44 -0400
Subject: [R] Not seeing the results of a function
Message-ID: <6bcc5252-848c-12a9-f672-49200cf9db3a@indiana.edu>

I?m trying to write a function that will add items to two vectors, and 
then to create a third vector that is of the form 1, 2, 3, ?, length of 
one of the newly modified vectors.? My problem is that what I?ve written 
doesn?t seem to return any of those modifications.? How can I get the 
new values to be returned? Here?s the function below.? I want to add a 
value, stp, to the end of the stpos vector, a value mcp to the end of 
the mcpos vector, and the to create that days vector.? When I call this 
function with numerical values for stp and mcp, and then ask to see 
stpos, mcpos, and days, nothing has been changed.? How can I fix this?

Here?s the function:
 > addday <- function(stp,mcp,stpos,mcpos){stpos<-c(stpos,stp)
+ mcpos<-c(mcpos,mcp)
+ days<-c(1:length(stpos))}

David


From jbug@yong1 @end|ng |rom gm@||@com  Mon Mar 30 02:16:17 2020
From: jbug@yong1 @end|ng |rom gm@||@com (Jastine bugayong)
Date: Sun, 29 Mar 2020 17:16:17 -0700
Subject: [R] Posting: R-Project Code/Package for a Stepwise Multiple
 Regression Analysis
Message-ID: <CAOSXkSKcs8WwJa=V3DX30YjfNAaMxLA_hAs6rhzDG1rEjmMHrQ@mail.gmail.com>

Statistics newbie over here getting her feet wet into the research realm.

I will be using the R-project to analyze the predictability of some data
using a stepwise multiple regression analysis. I would also like to have a
forced entry method option to avoid any methodology flaws, if possible,
too. Is there any existing R code or r-project add-on packages for this?

Details: 2 or more dependent variables, 5 or more independent variables.
These variables will be in the form of numbers such as age, height, etc.
There will be 2 steps. I am happy to provide any additional details for you
to better understand my situation as well.

Thank you in advance for your help! I'm open to any insights you have.

	[[alternative HTML version deleted]]


From p@rkhur@ @end|ng |rom |nd|@n@@edu  Mon Mar 30 03:07:17 2020
From: p@rkhur@ @end|ng |rom |nd|@n@@edu (David)
Date: Sun, 29 Mar 2020 21:07:17 -0400
Subject: [R] Program to produce multiple plots
Message-ID: <32a8d3aa-6a7e-3353-85e6-91d62641695c@indiana.edu>

I wrote a little program that asked to produce two plots, but when I ran 
it, I saw only the second plot.? Is there a way to write a program that 
will produce multiple visible plots?

David


From @@h|mk@poor @end|ng |rom gm@||@com  Mon Mar 30 16:03:02 2020
From: @@h|mk@poor @end|ng |rom gm@||@com (Ashim Kapoor)
Date: Mon, 30 Mar 2020 19:33:02 +0530
Subject: [R] Program to produce multiple plots
In-Reply-To: <32a8d3aa-6a7e-3353-85e6-91d62641695c@indiana.edu>
References: <32a8d3aa-6a7e-3353-85e6-91d62641695c@indiana.edu>
Message-ID: <CAC8=1eodGU_ALbfGFpPjUSRaf7bY7kXJ5ON8Msy7qVf0jLA96A@mail.gmail.com>

Dear David,

Try this :-
par(mfrow=c(1,2))
hist(rnorm(100))
hist(rnorm(100,100,1))

Best Regards,
Ashim


On Mon, Mar 30, 2020 at 7:16 PM David <parkhurs at indiana.edu> wrote:

> I wrote a little program that asked to produce two plots, but when I ran
> it, I saw only the second plot.  Is there a way to write a program that
> will produce multiple visible plots?
>
> David
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From rmh @end|ng |rom temp|e@edu  Mon Mar 30 16:38:36 2020
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Mon, 30 Mar 2020 10:38:36 -0400
Subject: [R] Program to produce multiple plots
In-Reply-To: <CAC8=1eodGU_ALbfGFpPjUSRaf7bY7kXJ5ON8Msy7qVf0jLA96A@mail.gmail.com>
References: <32a8d3aa-6a7e-3353-85e6-91d62641695c@indiana.edu>
 <CAC8=1eodGU_ALbfGFpPjUSRaf7bY7kXJ5ON8Msy7qVf0jLA96A@mail.gmail.com>
Message-ID: <CAGx1TMBJfpgSHa=c=pnwiripyoyr8+Wg2FOTpyh5f-05DNkOnw@mail.gmail.com>

you probably forgot the print() statement.
Both lattice and ggplot require a print() in this situation.

See the help files.

On Mon, Mar 30, 2020 at 10:04 Ashim Kapoor <ashimkapoor at gmail.com> wrote:

> Dear David,
>
> Try this :-
> par(mfrow=c(1,2))
> hist(rnorm(100))
> hist(rnorm(100,100,1))
>
> Best Regards,
> Ashim
>
>
> On Mon, Mar 30, 2020 at 7:16 PM David <parkhurs at indiana.edu> wrote:
>
> > I wrote a little program that asked to produce two plots, but when I ran
> > it, I saw only the second plot.  Is there a way to write a program that
> > will produce multiple visible plots?
> >
> > David
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From rmh @end|ng |rom temp|e@edu  Mon Mar 30 16:45:19 2020
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Mon, 30 Mar 2020 10:45:19 -0400
Subject: [R] Not seeing the results of a function
In-Reply-To: <6bcc5252-848c-12a9-f672-49200cf9db3a@indiana.edu>
References: <6bcc5252-848c-12a9-f672-49200cf9db3a@indiana.edu>
Message-ID: <CAGx1TMC_CWjzuA1OEgntEVK2vUHZLEh=3HqUNCqtEWF0W++iDQ@mail.gmail.com>

You need one more line In your function.

 addday <- function(stp,mcp,stpos,mcpos){
stpos<-c(stpos,stp)
mcpos<-c(mcpos,mcp)
days<-c(1:length(stpos))
list(mcpos=mcpos, days=days)
}

This and the other question I just answered together say that you need to
re-read an introduction to R.




On Mon, Mar 30, 2020 at 09:45 David <parkhurs at indiana.edu> wrote:

> I?m trying to write a function that will add items to two vectors, and
> then to create a third vector that is of the form 1, 2, 3, ?, length of
> one of the newly modified vectors.  My problem is that what I?ve written
> doesn?t seem to return any of those modifications.  How can I get the
> new values to be returned? Here?s the function below.  I want to add a
> value, stp, to the end of the stpos vector, a value mcp to the end of
> the mcpos vector, and the to create that days vector.  When I call this
> function with numerical values for stp and mcp, and then ask to see
> stpos, mcpos, and days, nothing has been changed.  How can I fix this?
>
> Here?s the function:
>  > addday <- function(stp,mcp,stpos,mcpos){stpos<-c(stpos,stp)
> + mcpos<-c(mcpos,mcp)
> + days<-c(1:length(stpos))}
>
> David
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From er|cjberger @end|ng |rom gm@||@com  Mon Mar 30 16:54:30 2020
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Mon, 30 Mar 2020 17:54:30 +0300
Subject: [R] Program to produce multiple plots
In-Reply-To: <CAC8=1eodGU_ALbfGFpPjUSRaf7bY7kXJ5ON8Msy7qVf0jLA96A@mail.gmail.com>
References: <32a8d3aa-6a7e-3353-85e6-91d62641695c@indiana.edu>
 <CAC8=1eodGU_ALbfGFpPjUSRaf7bY7kXJ5ON8Msy7qVf0jLA96A@mail.gmail.com>
Message-ID: <CAGgJW75guwzCZ9Oa=Nyj7p2+m6dLX1p=dSsxk5UwspgNGT2xBA@mail.gmail.com>

Another comment: if you are running your program in RStudio, it will create
the sequence
of plots but you need to "page back" to see them. Click the "Plots" tab and
notice there are
two arrows: back (pointing to the left) and forward (pointing to the right)

HTH,
Eric


On Mon, Mar 30, 2020 at 5:04 PM Ashim Kapoor <ashimkapoor at gmail.com> wrote:

> Dear David,
>
> Try this :-
> par(mfrow=c(1,2))
> hist(rnorm(100))
> hist(rnorm(100,100,1))
>
> Best Regards,
> Ashim
>
>
> On Mon, Mar 30, 2020 at 7:16 PM David <parkhurs at indiana.edu> wrote:
>
> > I wrote a little program that asked to produce two plots, but when I ran
> > it, I saw only the second plot.  Is there a way to write a program that
> > will produce multiple visible plots?
> >
> > David
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Mon Mar 30 16:56:50 2020
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Mon, 30 Mar 2020 07:56:50 -0700
Subject: [R] Error message using boot.ci function
In-Reply-To: <556953200.1684243.1585561502244@mail.yahoo.com>
References: <1886232711.620054.1585423535507.ref@mail.yahoo.com>
 <1886232711.620054.1585423535507@mail.yahoo.com>
 <ff0ce444-5dfd-3e02-ef1f-799b05acabfc@comcast.net>
 <556953200.1684243.1585561502244@mail.yahoo.com>
Message-ID: <40bea456-3e38-f4a4-85ec-c5c031eb4b09@comcast.net>


On 3/30/20 2:45 AM, varin sacha wrote:
> Many thanks David,
>
> But I am not sure the Dataset and newdata are the real problem. I have solved, at least I think so, what you were asking. Here below my new R code but still the same error message. IMHO the problem is with "boot.ci" function...
>
> # # # # # # # # # # # # # # # # # # # ## # # # # # # # # # # # # # #
> bmi=c(23,43,21,23,45,65,45,11,12,13,23,34,NA,NA,34,35,45,65,43,23,12,11,15,43,23,88,78,79,89,89,99,43,21,34,32,45,65,76,56,45,34,23,12,32)
> glucose=c(NA,12,23,11,12,21,23,21,23,43,23,12,NA,23,11,12,32,12,14,12,11,10,9,8,9,8,7,90,76,32,12,11,12,23,11,123,32,12,14,34,54,65,76,87)
> crp=c(123,212,154,342,123,111,121,765,453,123,213,211,NA,NA,32,123,213,145,143,123,132,143,165,176,181,123,87,567,342,123,143,132,143,234,345,32,123,132,143,345,321,543,231,123)
> age=c(67,45,34,56,87,NA,NA,23,18,65,45,87,65,33,23,65,43,23,43,12,132,56,76,87,98,78,76,56,78,54,34,56,76,99,12,45,34,65,76,87,98,97,64,53)
> sex=c(0,1,1,0,1,0,1,0,0,1,1,1,NA,NA,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,0,0)
>
> Dataset=data.frame( bmi,glucose,crp,age,sex)
> newdata=na.omit(Dataset)
>
> #install.packages( "robustbase",dependencies=TRUE )
> #install.packages( "boot",dependencies=TRUE )
> library(boot)
> library(robustbase)
>
>  ?# function to obtain MSE
>  ?MSE <- function(data, indices, formula,method) {
>  ??? d <- data[indices, ] # allows boot to select sample
>  ??? fastMM <- lmrob( crp ~ bmi+glucose+age+sex,data=newdata)
>  ??? fit <- lmrob(formula, data = d, method="MM")
>  ??? ypred <- predict(fit)
>  ?? mean((d[["fastMM"]]-ypred)^2)

At this point I do not see any reason for assuming there is a column in 
the d-object with the name "fastMM".


-- 

David

>
>  ?}
>
>  ?# bootstrapping with 100 replications
>  ?results <- boot(data = newdata, statistic = MSE,
>  ????????????????? R = 100, formula = crp ~ bmi+glucose+age+sex,method="MM")
>
> str(results)
> boot.ci(results, type="norm" )
>
> str(Dataset)
> str(newdata)
> summary(results$t)
> # # # # # # # # # # # # # # # # # # # # # # # # #
>
>
>
>
>
>
>
> Le lundi 30 mars 2020 ? 00:40:33 UTC+2, David Winsemius <dwinsemius at comcast.net> a ?crit :
>
>
>
>
>
>
> On 3/28/20 12:25 PM, varin sacha via R-help wrote:
>> Dear R-experts,
>>
>> Here below my "toy" reproducible example showing many warnings and an error message. What I am interested in is the error message.
>> Of course I can access and view the results doing : summary(results$t) to give me an idea of what is going on. But I don't know how to correct/solve my problem. Any help to solve my problem would be highly appreciated.
>
> I do suggest you look at:
>
>
> str(Dataset)
>
> str(newdata)
>
>
> The problem is actually in your construction of Dataset. Do not quote
> object names next time.
>


From er|cjberger @end|ng |rom gm@||@com  Mon Mar 30 16:56:49 2020
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Mon, 30 Mar 2020 17:56:49 +0300
Subject: [R] Not seeing the results of a function
In-Reply-To: <CAGx1TMC_CWjzuA1OEgntEVK2vUHZLEh=3HqUNCqtEWF0W++iDQ@mail.gmail.com>
References: <6bcc5252-848c-12a9-f672-49200cf9db3a@indiana.edu>
 <CAGx1TMC_CWjzuA1OEgntEVK2vUHZLEh=3HqUNCqtEWF0W++iDQ@mail.gmail.com>
Message-ID: <CAGgJW770F76xxbTdcAL5wHr=v-U0KQOe0Z3oZruk_TwHypc4UQ@mail.gmail.com>

There is also the possibility that the OP believes that the function calls
are passing by reference.

On Mon, Mar 30, 2020 at 5:55 PM Richard M. Heiberger <rmh at temple.edu> wrote:

> You need one more line In your function.
>
>  addday <- function(stp,mcp,stpos,mcpos){
> stpos<-c(stpos,stp)
> mcpos<-c(mcpos,mcp)
> days<-c(1:length(stpos))
> list(mcpos=mcpos, days=days)
> }
>
> This and the other question I just answered together say that you need to
> re-read an introduction to R.
>
>
>
>
> On Mon, Mar 30, 2020 at 09:45 David <parkhurs at indiana.edu> wrote:
>
> > I?m trying to write a function that will add items to two vectors, and
> > then to create a third vector that is of the form 1, 2, 3, ?, length of
> > one of the newly modified vectors.  My problem is that what I?ve written
> > doesn?t seem to return any of those modifications.  How can I get the
> > new values to be returned? Here?s the function below.  I want to add a
> > value, stp, to the end of the stpos vector, a value mcp to the end of
> > the mcpos vector, and the to create that days vector.  When I call this
> > function with numerical values for stp and mcp, and then ask to see
> > stpos, mcpos, and days, nothing has been changed.  How can I fix this?
> >
> > Here?s the function:
> >  > addday <- function(stp,mcp,stpos,mcpos){stpos<-c(stpos,stp)
> > + mcpos<-c(mcpos,mcp)
> > + days<-c(1:length(stpos))}
> >
> > David
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Mar 30 17:07:27 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 30 Mar 2020 08:07:27 -0700
Subject: [R] custom function insite dlys::mutate
In-Reply-To: <a1b15240cd4b4178b242b3ae6ecb4644@SCWPR-EXDAG1-2B.aphm.ap-hm.fr>
References: <a1b15240cd4b4178b242b3ae6ecb4644@SCWPR-EXDAG1-2B.aphm.ap-hm.fr>
Message-ID: <EB887EA2-D529-4ED1-AC76-61F2D95FF37B@dcn.davis.ca.us>

You are comparing a 21-element vector with a 1-element vector, which gives you 21 answers. Which one of those answers are you actually interested in?

I am not sure what you are trying to accomplish here, so cannot offer further advice.

On March 30, 2020 6:21:45 AM PDT, SIMON Nicolas <Nicolas.SIMON at ap-hm.fr> wrote:
>Hi,
>
>I tried to use mutate from dplyr with a personal function to create a
>new variable of a data.frame.
>
>All examples I found are such as myfunction(x){...}.
>
>In my script, the function calls:
>- one variable coming from the data.frame
>- variables coming from lists or constant outside the data.frame
>
>My function is something like:
>
>var1 <- seq(0,20,1)
>dat <- data.frame(var1)
>var2 <- c(0,2,4,8)
>var3 <- 44.44
>var4 <- 0.5
>
>Myfunction <- function(var1, var2, var3,var4){
>   obs <- 0
>   obs1 <- 0
>   for (i in 1:length(var2)) {
>         tt <- var2[i]
>         if ( var1 > tt ){
>             obs1 <- var3 * exp(-var4*var1)
>         }
>         else obs1 <- 0.0
>         obs <- obs + obs1
>   }
>  return(obs)
>}
>dat2 <- mutate(dat, obs = Myfunction(var1=var1,var2=var2,var3=var3))
>
>Apparently the condition " if ( var1 > tt ) " cannot be evaluated
>correcty.
>
>Could you please give me an advice to write it properly?
>
>
>
>Best regards
>Nicolas
>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Mon Mar 30 17:40:33 2020
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Mon, 30 Mar 2020 15:40:33 +0000 (UTC)
Subject: [R] Error message using boot.ci function
In-Reply-To: <40bea456-3e38-f4a4-85ec-c5c031eb4b09@comcast.net>
References: <1886232711.620054.1585423535507.ref@mail.yahoo.com>
 <1886232711.620054.1585423535507@mail.yahoo.com>
 <ff0ce444-5dfd-3e02-ef1f-799b05acabfc@comcast.net>
 <556953200.1684243.1585561502244@mail.yahoo.com>
 <40bea456-3e38-f4a4-85ec-c5c031eb4b09@comcast.net>
Message-ID: <327782999.2291134.1585582833665@mail.yahoo.com>

Hi David,

Yes, you are right but it does not change anything to my problem. According to the error message, what I understand is that there is/are NAs values in "t". Using newdata <- na.omit(Dataset) I create new dataset without missing data, so I don't understand what is going on with these NAs values. 
I found on the Net (google search) Brian D. Ripley answers this : "Correct your 'statistic' function not to return NaN."
Ben Bolker in another website answers this : "This is caused by the combination of the default na.omit setting and the fact that refit is trying to account for omitted values."
So, instead of na.omit(Dataset) I have tried with newdata<- na.exclude(Dataset). It does not work !

I am lost ...

?
# # # # # # # # # # # # # # # # # # # ## # # # # # # # # # # # # # #
bmi=c(23,43,21,23,45,65,45,11,12,13,23,34,NA,NA,34,35,45,65,43,23,12,11,15,43,23,88,78,79,89,89,99,43,21,34,32,45,65,76,56,45,34,23,12,32)
glucose=c(NA,12,23,11,12,21,23,21,23,43,23,12,NA,23,11,12,32,12,14,12,11,10,9,8,9,8,7,90,76,32,12,11,12,23,11,123,32,12,14,34,54,65,76,87)
crp=c(123,212,154,342,123,111,121,765,453,123,213,211,NA,NA,32,123,213,145,143,123,132,143,165,176,181,123,87,567,342,123,143,132,143,234,345,32,123,132,143,345,321,543,231,123)
age=c(67,45,34,56,87,NA,NA,23,18,65,45,87,65,33,23,65,43,23,43,12,132,56,76,87,98,78,76,56,78,54,34,56,76,99,12,45,34,65,76,87,98,97,64,53)
sex=c(0,1,1,0,1,0,1,0,0,1,1,1,NA,NA,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,0,0)

Dataset=data.frame( bmi,glucose,crp,age,sex)
newdata=na.omit(Dataset)

#install.packages( "robustbase",dependencies=TRUE )
#install.packages( "boot",dependencies=TRUE )
library(boot)
library(robustbase)

?# function to obtain MSE
?MSE <- function(data, indices, formula,method) {
??? d <- data[indices, ] # allows boot to select sample
??? fit <- lmrob(formula, data = d, method="MM")
??? ypred <- predict(fit)
?? mean((d[["fastMM"]]-ypred)^2)

?}

?# bootstrapping with 100 replications
?results <- boot(data = newdata, statistic = MSE,
????????????????? R = 100, formula = crp ~ bmi+glucose+age+sex,method="MM")

str(results)
boot.ci(results, type="norm" )

str(Dataset)
str(newdata)
summary(results$t)
# # # # # # # # # # # # # # # # # # # # # # # # #






Le lundi 30 mars 2020 ? 16:56:57 UTC+2, David Winsemius <dwinsemius at comcast.net> a ?crit : 






On 3/30/20 2:45 AM, varin sacha wrote:
> Many thanks David,
>
> But I am not sure the Dataset and newdata are the real problem. I have solved, at least I think so, what you were asking. Here below my new R code but still the same error message. IMHO the problem is with "boot.ci" function...
>
> # # # # # # # # # # # # # # # # # # # ## # # # # # # # # # # # # # #
> bmi=c(23,43,21,23,45,65,45,11,12,13,23,34,NA,NA,34,35,45,65,43,23,12,11,15,43,23,88,78,79,89,89,99,43,21,34,32,45,65,76,56,45,34,23,12,32)
> glucose=c(NA,12,23,11,12,21,23,21,23,43,23,12,NA,23,11,12,32,12,14,12,11,10,9,8,9,8,7,90,76,32,12,11,12,23,11,123,32,12,14,34,54,65,76,87)
> crp=c(123,212,154,342,123,111,121,765,453,123,213,211,NA,NA,32,123,213,145,143,123,132,143,165,176,181,123,87,567,342,123,143,132,143,234,345,32,123,132,143,345,321,543,231,123)
> age=c(67,45,34,56,87,NA,NA,23,18,65,45,87,65,33,23,65,43,23,43,12,132,56,76,87,98,78,76,56,78,54,34,56,76,99,12,45,34,65,76,87,98,97,64,53)
> sex=c(0,1,1,0,1,0,1,0,0,1,1,1,NA,NA,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,0,0)
>
> Dataset=data.frame( bmi,glucose,crp,age,sex)
> newdata=na.omit(Dataset)
>
> #install.packages( "robustbase",dependencies=TRUE )
> #install.packages( "boot",dependencies=TRUE )
> library(boot)
> library(robustbase)
>
>? ?# function to obtain MSE
>? ?MSE <- function(data, indices, formula,method) {
>? ??? d <- data[indices, ] # allows boot to select sample
>? ??? fastMM <- lmrob( crp ~ bmi+glucose+age+sex,data=newdata)
>? ??? fit <- lmrob(formula, data = d, method="MM")
>? ??? ypred <- predict(fit)
>? ?? mean((d[["fastMM"]]-ypred)^2)

At this point I do not see any reason for assuming there is a column in 
the d-object with the name "fastMM".



-- 

David

>
>? ?}
>
>? ?# bootstrapping with 100 replications
>? ?results <- boot(data = newdata, statistic = MSE,
>? ????????????????? R = 100, formula = crp ~ bmi+glucose+age+sex,method="MM")
>
> str(results)
> boot.ci(results, type="norm" )
>
> str(Dataset)
> str(newdata)
> summary(results$t)
> # # # # # # # # # # # # # # # # # # # # # # # # #
>
>
>
>
>
>
>
> Le lundi 30 mars 2020 ? 00:40:33 UTC+2, David Winsemius <dwinsemius at comcast.net> a ?crit :
>
>
>
>
>
>
> On 3/28/20 12:25 PM, varin sacha via R-help wrote:
>> Dear R-experts,
>>
>> Here below my "toy" reproducible example showing many warnings and an error message. What I am interested in is the error message.
>> Of course I can access and view the results doing : summary(results$t) to give me an idea of what is going on. But I don't know how to correct/solve my problem. Any help to solve my problem would be highly appreciated.
>
> I do suggest you look at:
>
>
> str(Dataset)
>
> str(newdata)
>
>
> The problem is actually in your construction of Dataset. Do not quote
> object names next time.
>


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Mon Mar 30 17:48:40 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Mon, 30 Mar 2020 16:48:40 +0100
Subject: [R] Error message using boot.ci function
In-Reply-To: <40bea456-3e38-f4a4-85ec-c5c031eb4b09@comcast.net>
References: <1886232711.620054.1585423535507.ref@mail.yahoo.com>
 <1886232711.620054.1585423535507@mail.yahoo.com>
 <ff0ce444-5dfd-3e02-ef1f-799b05acabfc@comcast.net>
 <556953200.1684243.1585561502244@mail.yahoo.com>
 <40bea456-3e38-f4a4-85ec-c5c031eb4b09@comcast.net>
Message-ID: <9717da01-5120-2df5-ff3a-7c8c5fd5af26@sapo.pt>

Hello,

David is right, the response is named 'crp', not 'fastMM'. And there is 
no need to run the regression twice.

Try

# function to obtain MSE
MSE <- function(data, indices, formula, method) {
   d <- data[indices, ] # allows boot to select sample
   fit <- lmrob(formula, data = d, method = method)
   ypred <- predict(fit)
   mean((d[["crp"]] - ypred)^2)

}


Hope this helps,

Rui Barradas

?s 15:56 de 30/03/20, David Winsemius escreveu:
> 
> On 3/30/20 2:45 AM, varin sacha wrote:
>> Many thanks David,
>>
>> But I am not sure the Dataset and newdata are the real problem. I have 
>> solved, at least I think so, what you were asking. Here below my new R 
>> code but still the same error message. IMHO the problem is with 
>> "boot.ci" function...
>>
>> # # # # # # # # # # # # # # # # # # # ## # # # # # # # # # # # # # #
>> bmi=c(23,43,21,23,45,65,45,11,12,13,23,34,NA,NA,34,35,45,65,43,23,12,11,15,43,23,88,78,79,89,89,99,43,21,34,32,45,65,76,56,45,34,23,12,32) 
>>
>> glucose=c(NA,12,23,11,12,21,23,21,23,43,23,12,NA,23,11,12,32,12,14,12,11,10,9,8,9,8,7,90,76,32,12,11,12,23,11,123,32,12,14,34,54,65,76,87) 
>>
>> crp=c(123,212,154,342,123,111,121,765,453,123,213,211,NA,NA,32,123,213,145,143,123,132,143,165,176,181,123,87,567,342,123,143,132,143,234,345,32,123,132,143,345,321,543,231,123) 
>>
>> age=c(67,45,34,56,87,NA,NA,23,18,65,45,87,65,33,23,65,43,23,43,12,132,56,76,87,98,78,76,56,78,54,34,56,76,99,12,45,34,65,76,87,98,97,64,53) 
>>
>> sex=c(0,1,1,0,1,0,1,0,0,1,1,1,NA,NA,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,0,0) 
>>
>>
>> Dataset=data.frame( bmi,glucose,crp,age,sex)
>> newdata=na.omit(Dataset)
>>
>> #install.packages( "robustbase",dependencies=TRUE )
>> #install.packages( "boot",dependencies=TRUE )
>> library(boot)
>> library(robustbase)
>>
>> ??# function to obtain MSE
>> ??MSE <- function(data, indices, formula,method) {
>> ???? d <- data[indices, ] # allows boot to select sample
>> ???? fastMM <- lmrob( crp ~ bmi+glucose+age+sex,data=newdata)
>> ???? fit <- lmrob(formula, data = d, method="MM")
>> ???? ypred <- predict(fit)
>> ??? mean((d[["fastMM"]]-ypred)^2)
> 
> At this point I do not see any reason for assuming there is a column in 
> the d-object with the name "fastMM".
> 
>


From @@e||ck @end|ng |rom gm@||@com  Mon Mar 30 17:50:00 2020
From: @@e||ck @end|ng |rom gm@||@com (stephen sefick)
Date: Mon, 30 Mar 2020 11:50:00 -0400
Subject: [R] Posting: R-Project Code/Package for a Stepwise Multiple
 Regression Analysis
In-Reply-To: <CAOSXkSKcs8WwJa=V3DX30YjfNAaMxLA_hAs6rhzDG1rEjmMHrQ@mail.gmail.com>
References: <CAOSXkSKcs8WwJa=V3DX30YjfNAaMxLA_hAs6rhzDG1rEjmMHrQ@mail.gmail.com>
Message-ID: <CADKEMqiNqwytRiu_n5UjNcFfPT876yNhFiuCb3NMUG73cO6VCw@mail.gmail.com>

Please search archives and Google. There are many resources. I think that
the MASS package has stepwise regression, but please confirm yourself.

On Mon, Mar 30, 2020, 09:45 Jastine bugayong <jbugayong1 at gmail.com> wrote:

> Statistics newbie over here getting her feet wet into the research realm.
>
> I will be using the R-project to analyze the predictability of some data
> using a stepwise multiple regression analysis. I would also like to have a
> forced entry method option to avoid any methodology flaws, if possible,
> too. Is there any existing R code or r-project add-on packages for this?
>
> Details: 2 or more dependent variables, 5 or more independent variables.
> These variables will be in the form of numbers such as age, height, etc.
> There will be 2 steps. I am happy to provide any additional details for you
> to better understand my situation as well.
>
> Thank you in advance for your help! I'm open to any insights you have.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From mm@|ten @end|ng |rom gm@||@com  Mon Mar 30 18:01:02 2020
From: mm@|ten @end|ng |rom gm@||@com (Mitchell Maltenfort)
Date: Mon, 30 Mar 2020 12:01:02 -0400
Subject: [R] Posting: R-Project Code/Package for a Stepwise Multiple
 Regression Analysis
In-Reply-To: <CADKEMqiNqwytRiu_n5UjNcFfPT876yNhFiuCb3NMUG73cO6VCw@mail.gmail.com>
References: <CAOSXkSKcs8WwJa=V3DX30YjfNAaMxLA_hAs6rhzDG1rEjmMHrQ@mail.gmail.com>
 <CADKEMqiNqwytRiu_n5UjNcFfPT876yNhFiuCb3NMUG73cO6VCw@mail.gmail.com>
Message-ID: <CANOgrHZBRqE2BNBDcnZBVJQ1ogE=B=1d8xtUNNE_6N1nx0cCKA@mail.gmail.com>

Also see the 'rms' package.

If you use validate with bw=TRUE you can see often a given predictor will
be retained.

On Mon, Mar 30, 2020 at 11:57 AM stephen sefick <ssefick at gmail.com> wrote:

> Please search archives and Google. There are many resources. I think that
> the MASS package has stepwise regression, but please confirm yourself.
>
> On Mon, Mar 30, 2020, 09:45 Jastine bugayong <jbugayong1 at gmail.com> wrote:
>
> > Statistics newbie over here getting her feet wet into the research realm.
> >
> > I will be using the R-project to analyze the predictability of some data
> > using a stepwise multiple regression analysis. I would also like to have
> a
> > forced entry method option to avoid any methodology flaws, if possible,
> > too. Is there any existing R code or r-project add-on packages for this?
> >
> > Details: 2 or more dependent variables, 5 or more independent variables.
> > These variables will be in the form of numbers such as age, height, etc.
> > There will be 2 steps. I am happy to provide any additional details for
> you
> > to better understand my situation as well.
> >
> > Thank you in advance for your help! I'm open to any insights you have.
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From J@@on@L@w @end|ng |rom port|@ndoregon@gov  Mon Mar 30 21:05:39 2020
From: J@@on@L@w @end|ng |rom port|@ndoregon@gov (Law, Jason)
Date: Mon, 30 Mar 2020 19:05:39 +0000
Subject: [R] RODBC Multiple Results
In-Reply-To: <CAGxFJbTabPA6iLnyE4acfJ0hZj5yjsaa3FSbrUQYEyFeDYu7rA@mail.gmail.com>
References: <BL0PR05MB4818DDBDD7EE81BC23215455CACE0@BL0PR05MB4818.namprd05.prod.outlook.com>
 <CAGxFJbTabPA6iLnyE4acfJ0hZj5yjsaa3FSbrUQYEyFeDYu7rA@mail.gmail.com>
Message-ID: <MN2PR09MB596364E1B362103F6F6F710187CB0@MN2PR09MB5963.namprd09.prod.outlook.com>

Harold,

I have dealt with this problem over the years and after much experimenting, I can say that I *think* what you want is impossible. For RODBC, you need a stored proc that uses SET NOCOUNT ON and that only returns a single result set. You may want to try experimenting with the odbc package (https://github.com/r-dbi/odbc), although there it appears that it isn?t possible there yet, there is a pull request which adds this functionality for sqlServer. You may want to try hitting up the author of the pull request.

Regards,

Jason

From: R-help <r-help-bounces at r-project.org> On Behalf Of Bert Gunter
Sent: Wednesday, March 25, 2020 12:39 PM
To: Doran, Harold <HDoran at air.org>
Cc: r-help at r-project.org
Subject: Re: [R] RODBC Multiple Results

?
The City's email systems have identified this email as potentially suspicious. Please click responsibly and be cautious if asked to provide sensitive information.

You might wish to post this on r-sig-db if you do not get a

satisfactory reply here.



Also, have you checked the databases task view on :

https://cran.r-project.org/ ?



Bert Gunter



"The trouble with having an open mind is that people keep coming along

and sticking things into it."

-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )



On Wed, Mar 25, 2020 at 9:54 AM Doran, Harold  wrote:

>

> I'm calling a stored procedure that returns multiple tables and my current framework uses RODBC and sqlQuery() to communicate between R and the databases we connect to. A new stored procedure returns multiple tables and I found this on SO indicating that RODBC "may not" be able to retrieve multiple tables.

>

> https://stackoverflow.com/questions/41494419/how-to-read-multiple-result-sets-returned-from-a-sql-server-stored-procedure-in

>

> I'd very much like to continue within the structure of code I have using RODBC, so am asking if RODBC in fact *cannot* retrieve multiple tables as noted in the SO responses or if anyone has insight on how it might be feasible within the context of RODBC using  sqlQuery()?

>

> Thanks

> Harold

>

>

>         [[alternative HTML version deleted]]

>

> ______________________________________________

> R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see

> https://stat.ethz.ch/mailman/listinfo/r-help

> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html

> and provide commented, minimal, self-contained, reproducible code.



______________________________________________

R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see

https://stat.ethz.ch/mailman/listinfo/r-help

PLEASE do read the posting guide http://www.R-project.org/posting-guide.html

and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Mon Mar 30 21:09:34 2020
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Mon, 30 Mar 2020 19:09:34 +0000 (UTC)
Subject: [R] Error in robdist.hbrfit(x) : x is probably collinear
References: <84677569.2579050.1585595374484.ref@mail.yahoo.com>
Message-ID: <84677569.2579050.1585595374484@mail.yahoo.com>

Hi,

A google search does not give me any hint :=( 
Maybe somebody can help me to fix the error message I get : Error in robdist.hbrfit(x) : x is probably collinear


# # # # # # # # # # # # # # # # # # # ## # # # # # # # # # # # # # #
bmi=c(23,43,21,23,45,65,45,11,12,13,23,34,NA,NA,34,35,45,65,43,23,12,11,15,43,23,88,78,79,89,89,99,43,21,34,32,45,65,76,56,45,34,23,12,32)
glucose=c(NA,12,23,11,12,21,23,21,23,43,23,12,NA,23,11,12,32,12,14,12,11,10,9,8,9,8,7,90,76,32,12,11,12,23,11,123,32,12,14,34,54,65,76,87)
crp=c(123,212,154,342,123,111,121,765,453,123,213,211,NA,NA,32,123,213,145,143,123,132,143,165,176,181,123,87,567,342,123,143,132,143,234,345,32,123,132,143,345,321,543,231,123)
age=c(67,45,34,56,87,NA,NA,23,18,65,45,87,65,33,23,65,43,23,43,12,132,56,76,87,98,78,76,56,78,54,34,56,76,99,12,45,34,65,76,87,98,97,64,53)
sex=c(0,1,1,0,1,0,1,0,0,1,1,1,NA,NA,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,0,0)

Dataset=data.frame( bmi,glucose,crp,age,sex)
newdata=na.omit(Dataset)

install.packages( "boot",dependencies=TRUE )
install.packages("remotes")
remotes?:: install_github("kloke/hbrfit",force=TRUE) 
install.packages( "quantreg",dependencies=TRUE? )

library(boot)
library(hbrfit)
library(quantreg)

??# function to obtain MSE
?MSE <- function(data, indices, formula) {
? ? d <- data[indices, ] # allows boot to select sample
? ? fit <- hbrfit(formula, data = d)
? ? ypred <- fit$fitted.values
? ?mean((d[["crp"]]-ypred)^2)
?}

# bootstrapping with 100 replications 
results <- boot(data = newdata, statistic = MSE, R = 100, formula = crp ~ bmi+glucose+age+sex)

str(results)
boot.ci(results, type="norm" )
# # # # # # # # # # # # # # # # # # # ## # # # # # # # # # # # # # #


From bgunter@4567 @end|ng |rom gm@||@com  Mon Mar 30 22:00:26 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 30 Mar 2020 13:00:26 -0700
Subject: [R] Error in robdist.hbrfit(x) : x is probably collinear
In-Reply-To: <84677569.2579050.1585595374484@mail.yahoo.com>
References: <84677569.2579050.1585595374484.ref@mail.yahoo.com>
 <84677569.2579050.1585595374484@mail.yahoo.com>
Message-ID: <CAGxFJbT=4ev1Nd3752ZFX1gzH2U=cLPkeYdDvE-nNeqCbfwp_w@mail.gmail.com>

I know nothing about the packages in question, but do you know what
"collinear" means and how/why it can mess up model fitting? If no,
that may be the problem. See also "overfitting."

Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

On Mon, Mar 30, 2020 at 12:10 PM varin sacha via R-help
<r-help at r-project.org> wrote:
>
> Hi,
>
> A google search does not give me any hint :=(
> Maybe somebody can help me to fix the error message I get : Error in robdist.hbrfit(x) : x is probably collinear
>
>
> # # # # # # # # # # # # # # # # # # # ## # # # # # # # # # # # # # #
> bmi=c(23,43,21,23,45,65,45,11,12,13,23,34,NA,NA,34,35,45,65,43,23,12,11,15,43,23,88,78,79,89,89,99,43,21,34,32,45,65,76,56,45,34,23,12,32)
> glucose=c(NA,12,23,11,12,21,23,21,23,43,23,12,NA,23,11,12,32,12,14,12,11,10,9,8,9,8,7,90,76,32,12,11,12,23,11,123,32,12,14,34,54,65,76,87)
> crp=c(123,212,154,342,123,111,121,765,453,123,213,211,NA,NA,32,123,213,145,143,123,132,143,165,176,181,123,87,567,342,123,143,132,143,234,345,32,123,132,143,345,321,543,231,123)
> age=c(67,45,34,56,87,NA,NA,23,18,65,45,87,65,33,23,65,43,23,43,12,132,56,76,87,98,78,76,56,78,54,34,56,76,99,12,45,34,65,76,87,98,97,64,53)
> sex=c(0,1,1,0,1,0,1,0,0,1,1,1,NA,NA,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,0,0)
>
> Dataset=data.frame( bmi,glucose,crp,age,sex)
> newdata=na.omit(Dataset)
>
> install.packages( "boot",dependencies=TRUE )
> install.packages("remotes")
> remotes :: install_github("kloke/hbrfit",force=TRUE)
> install.packages( "quantreg",dependencies=TRUE  )
>
> library(boot)
> library(hbrfit)
> library(quantreg)
>
>   # function to obtain MSE
>  MSE <- function(data, indices, formula) {
>     d <- data[indices, ] # allows boot to select sample
>     fit <- hbrfit(formula, data = d)
>     ypred <- fit$fitted.values
>    mean((d[["crp"]]-ypred)^2)
>  }
>
> # bootstrapping with 100 replications
> results <- boot(data = newdata, statistic = MSE, R = 100, formula = crp ~ bmi+glucose+age+sex)
>
> str(results)
> boot.ci(results, type="norm" )
> # # # # # # # # # # # # # # # # # # # ## # # # # # # # # # # # # # #
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Tue Mar 31 00:03:24 2020
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Mon, 30 Mar 2020 22:03:24 +0000 (UTC)
Subject: [R] Error in robdist.hbrfit(x) : x is probably collinear
In-Reply-To: <CAGxFJbT=4ev1Nd3752ZFX1gzH2U=cLPkeYdDvE-nNeqCbfwp_w@mail.gmail.com>
References: <84677569.2579050.1585595374484.ref@mail.yahoo.com>
 <84677569.2579050.1585595374484@mail.yahoo.com>
 <CAGxFJbT=4ev1Nd3752ZFX1gzH2U=cLPkeYdDvE-nNeqCbfwp_w@mail.gmail.com>
Message-ID: <389540372.2687327.1585605804629@mail.yahoo.com>

Hi Bert,

Many thanks for your response. 

Yes, my toy example is not representative of the reality. You are right without colinearity my R code works.
As you say, it may be overfitting and there must be colinearity, even if for me colinearity is not really a problem it is more a nuisance. It may be important but it is not a problem (except if there is perfect collinearity). I mean if there is a high collinearity, the properties of the estimators are not modified (unbiased and minimum variance). What happens is that the variance is inflated.?

Anyway, I would like to know if it is possible to overcome this colinearity problem using this R code (hbrfit). This is my question and it may be interesting on this list because it concerns R programming and not statistical worries about overfitting and/or colinearity...

Best,







Le lundi 30 mars 2020 ? 22:00:39 UTC+2, Bert Gunter <bgunter.4567 at gmail.com> a ?crit : 





I know nothing about the packages in question, but do you know what
"collinear" means and how/why it can mess up model fitting? If no,
that may be the problem. See also "overfitting."

Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

On Mon, Mar 30, 2020 at 12:10 PM varin sacha via R-help
<r-help at r-project.org> wrote:
>
> Hi,
>
> A google search does not give me any hint :=(
> Maybe somebody can help me to fix the error message I get : Error in robdist.hbrfit(x) : x is probably collinear
>
>
> # # # # # # # # # # # # # # # # # # # ## # # # # # # # # # # # # # #
> bmi=c(23,43,21,23,45,65,45,11,12,13,23,34,NA,NA,34,35,45,65,43,23,12,11,15,43,23,88,78,79,89,89,99,43,21,34,32,45,65,76,56,45,34,23,12,32)
> glucose=c(NA,12,23,11,12,21,23,21,23,43,23,12,NA,23,11,12,32,12,14,12,11,10,9,8,9,8,7,90,76,32,12,11,12,23,11,123,32,12,14,34,54,65,76,87)
> crp=c(123,212,154,342,123,111,121,765,453,123,213,211,NA,NA,32,123,213,145,143,123,132,143,165,176,181,123,87,567,342,123,143,132,143,234,345,32,123,132,143,345,321,543,231,123)
> age=c(67,45,34,56,87,NA,NA,23,18,65,45,87,65,33,23,65,43,23,43,12,132,56,76,87,98,78,76,56,78,54,34,56,76,99,12,45,34,65,76,87,98,97,64,53)
> sex=c(0,1,1,0,1,0,1,0,0,1,1,1,NA,NA,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,0,0)
>
> Dataset=data.frame( bmi,glucose,crp,age,sex)
> newdata=na.omit(Dataset)
>
> install.packages( "boot",dependencies=TRUE )
> install.packages("remotes")
> remotes :: install_github("kloke/hbrfit",force=TRUE)
> install.packages( "quantreg",dependencies=TRUE? )
>
> library(boot)
> library(hbrfit)
> library(quantreg)
>
>? # function to obtain MSE
>? MSE <- function(data, indices, formula) {
>? ? d <- data[indices, ] # allows boot to select sample
>? ? fit <- hbrfit(formula, data = d)
>? ? ypred <- fit$fitted.values
>? ? mean((d[["crp"]]-ypred)^2)
>? }
>
> # bootstrapping with 100 replications
> results <- boot(data = newdata, statistic = MSE, R = 100, formula = crp ~ bmi+glucose+age+sex)
>
> str(results)
> boot.ci(results, type="norm" )
> # # # # # # # # # # # # # # # # # # # ## # # # # # # # # # # # # # #
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From r@turner @end|ng |rom @uck|@nd@@c@nz  Tue Mar 31 00:42:18 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Tue, 31 Mar 2020 11:42:18 +1300
Subject: [R] [FORGED]  Not seeing the results of a function
In-Reply-To: <6bcc5252-848c-12a9-f672-49200cf9db3a@indiana.edu>
References: <6bcc5252-848c-12a9-f672-49200cf9db3a@indiana.edu>
Message-ID: <475efdc7-597c-c806-5aed-d5d492c64fd7@auckland.ac.nz>


On 30/03/20 7:55 am, David wrote:

> I?m trying to write a function that will add items to two vectors, and 
> then to create a third vector that is of the form 1, 2, 3, ?, length of 
> one of the newly modified vectors.? My problem is that what I?ve written 
> doesn?t seem to return any of those modifications.? How can I get the 
> new values to be returned? Here?s the function below.? I want to add a 
> value, stp, to the end of the stpos vector, a value mcp to the end of 
> the mcpos vector, and the to create that days vector.? When I call this 
> function with numerical values for stp and mcp, and then ask to see 
> stpos, mcpos, and days, nothing has been changed.? How can I fix this?
> 
> Here?s the function:
>  > addday <- function(stp,mcp,stpos,mcpos){stpos<-c(stpos,stp)
> + mcpos<-c(mcpos,mcp)
> + days<-c(1:length(stpos))}

You are probably thinking in terms of "macro languages" rather than in R 
terms.

An R function returns, essentially, the last assigned value.  So your 
function will return the "days" vector; all else disappears into a black 
hole in cyberspace.

Something like the following should do what you want:

addday <- function(stp,mcp,stpos,mcpos){
     stpos<-c(stpos,stp)
     mcpos<-c(mcpos,mcp)
     days<-c(1:length(stpos))
     rslt <- list(stpos=stpos,mcpos=mcpos,days=days)
     rslt
}

As is so often said on this list, you would do well to spend some time 
reading and inwardly digesting a basic R tutorial, such as "An 
Introduction to R", readily available from the R web page (under "Manuals").

HTH

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From jen@r|| @end|ng |rom @tudent@|ko@@u|o@no  Mon Mar 30 21:25:45 2020
From: jen@r|| @end|ng |rom @tudent@|ko@@u|o@no (Rasmus Liland)
Date: Mon, 30 Mar 2020 21:25:45 +0200
Subject: [R] custom function insite dlys::mutate
In-Reply-To: <a1b15240cd4b4178b242b3ae6ecb4644@SCWPR-EXDAG1-2B.aphm.ap-hm.fr>
References: <a1b15240cd4b4178b242b3ae6ecb4644@SCWPR-EXDAG1-2B.aphm.ap-hm.fr>
Message-ID: <20200330192545.GA498099@jrl.uk.to>

On 2020-03-30 13:21 +0000, SIMON Nicolas wrote:
> Could you please give me an advice to write it 
> properly?

Hi!  To understand what you wanted to do, I tried 
to recreate your example in classic R indexing of 
a data.frame, then converting it to a tibble:

    var1 <- seq(0, 20, 1)
    var2 <- c(0, 2, 4, 8)
    var3 <- 44.44
    var4 <- 0.5
    
    dat <- cbind(var1, var2)
    dat <- as.data.frame(dat)
    idx <- dat$var1 > dat$var2
    dat[idx, "obs1"] <-
      var3 * exp(-var4 * dat[idx, "var1"])
    dat[!idx, "obs1"] <- 0
    dat <- tibble::as_tibble(dat)
    dat

Apparently there is a dplyr::if_else function you 
can use with dplyr::mutate like you wanted to end 
up in the same place:

    var1 <- seq(0, 20, 1)
    var2 <- c(0, 2, 4, 8)
    var3 <- 44.44
    var4 <- 0.5
    
    dat <- cbind(var1, var2)
    dat <- as.data.frame(dat)
    dat <- tibble::as_tibble(dat)
    dat <-
      dplyr::mutate(.data=dat,
        obs=dplyr::if_else(
          var1>var2,
          var3*exp(-var4 * var1),
          0)
      )
    dat

Might this be close to what you were looking to 
do?

/Rasmus


From jen@r|| @end|ng |rom @tudent@|ko@@u|o@no  Mon Mar 30 21:47:42 2020
From: jen@r|| @end|ng |rom @tudent@|ko@@u|o@no (Rasmus Liland)
Date: Mon, 30 Mar 2020 21:47:42 +0200
Subject: [R] custom function insite dlys::mutate
In-Reply-To: <a1b15240cd4b4178b242b3ae6ecb4644@SCWPR-EXDAG1-2B.aphm.ap-hm.fr>
References: <a1b15240cd4b4178b242b3ae6ecb4644@SCWPR-EXDAG1-2B.aphm.ap-hm.fr>
Message-ID: <20200330194742.GB498099@jrl.uk.to>

On 2020-03-30 13:21 +0000, SIMON Nicolas wrote:
| Apparently the condition " if ( var1 > tt ) " 
| cannot be evaluated correcty.
| 
| Could you please give me an advice to write it 
| properly?

Hi!  To understand what you wanted to do, I tried 
to recreate your example in classic R indexing of 
a data.frame, then converting it to a tibble:

    var1 <- seq(0, 20, 1)
    var2 <- c(0, 2, 4, 8)
    var3 <- 44.44
    var4 <- 0.5
    
    dat <- cbind(var1, var2)
    dat <- as.data.frame(dat)
    idx <- dat$var1 > dat$var2
    dat[idx, "obs1"] <-
      var3 * exp(-var4 * dat[idx, "var1"])
    dat[!idx, "obs1"] <- 0
    dat <- tibble::as_tibble(dat)
    dat

Apparently there is a dplyr::if_else function you 
can use with dplyr::mutate like you wanted to end 
up in the same place:

    var1 <- seq(0, 20, 1)
    var2 <- c(0, 2, 4, 8)
    var3 <- 44.44
    var4 <- 0.5
    
    dat <- cbind(var1, var2)
    dat <- as.data.frame(dat)
    dat <- tibble::as_tibble(dat)
    dat <-
      dplyr::mutate(.data=dat,
        obs=dplyr::if_else(
          var1>var2,
          var3*exp(-var4 * var1),
          0)
      )
    dat

Might this be close to what you were looking to 
do?

/Rasmus


From @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com  Tue Mar 31 02:08:44 2020
From: @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com (Ana Marija)
Date: Mon, 30 Mar 2020 19:08:44 -0500
Subject: [R] How to match strings in two files and replace strings?
Message-ID: <CAF9-5jOTxXFB81PLfqS_w9=Jx5yy_bMHkrUQDFvhmKphAP303g@mail.gmail.com>

I have a file like this: (has 308545 lines)

    head output11.frq
     CHR               SNP   A1   A2          MAF  NCHROBS
       1      1:775852:T:C    T    C       0.1707     3444
       1     1:1120590:A:C    C    A      0.08753     3496
       1     1:1145994:T:C    C    T       0.1765     3496
       1     1:1148494:A:G    A    G       0.1059     3464
       1     1:1201155:C:T    T    C      0.07923     3496
    ...

And another file (marker-info) which has the first 24 commented lines
and is comma separated that looks like this (has total of 500593
lines):

    1,742429,SNP_A-1909444,ss66079302,rs3094315,36.2,G,A,C,T,A,GCACAGCAAGAGAAAC[A/G]TTTGACAGAGAATACA,Sty,+,-,y,,,127,phs000018
    1,769185,SNP_A-4303947,ss66273559,rs4040617,36.2,A,G,A,G,A,GCTGTGAGAGAGAACA[A/G]TGTCCCAATTTTGCCC,Sty,+,+,n,,,127,phs000018
    1,775852,SNP_A-1886933,ss66317030,rs2980300,36.2,T,C,A,G,A,GAATGACTGTGTCTCT[C/T]TGAGTTAGTGAAGTCA,Nsp,-,+,y,,,127,phs000018
    1,782343,SNP_A-2236359,ss66185183,rs2905036,36.2,C,T,C,T,A,CTCGATTTGTGTTCAA[C/T]ATATTTCATTTGTACC,Sty,-,-,n,,,127,phs000018
    1,1201155,SNP_A-2205441,ss66174584,rs4245756,36.2,C,T,C,T,A,CCAGTGCTTTCAACCA[C/T]ACTCACTTTTCACTGT,Sty,+,+,n,,,127,phs000018
    ...

I want to replace in output11.frq second column with the 5th column in
marker-info that has the matching value in 1st and 2nd column so for
this example the result of the output11.frq would look like this:

    1      rs2980300    T    C       0.1707     3444
    1      rs4245756    T    C      0.07923     3496

I tried doing this in bash but I got empty file:

    vi tst.awk
    NR==FNR { map[$1,$2]=$5; next }
    ($1,$4) in map { $2=map[$1,$4]; print }
    awk -f tst.awk FS=',' marker-info FS='\t' output11.frq  > output11X.frq

Can this be done in R?

Thanks
Ana


From george@br|d@ @end|ng |rom gm@||@com  Tue Mar 31 03:38:31 2020
From: george@br|d@ @end|ng |rom gm@||@com (george brida)
Date: Tue, 31 Mar 2020 03:38:31 +0200
Subject: [R] Mapping of countries
Message-ID: <CAGsroM29gXKXRNURDAmzotgnMtDLqAZgGoc66iuoJ4zBcmNm0A@mail.gmail.com>

Dear R users,

i would like to plot the maps of the Gulf Cooperation Council (GCC)
countries (KSA, Qatar, Bahrain, Kuwait, UAE and Oman) with these
constraints: i/ KSA , Qatar and Bahrain have the same face color , ii/
Kuweit and UAE with the same face color and iii/Oman  with another face
color. Is there any code in R doing this task.

Many thanks.

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Tue Mar 31 04:24:18 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Tue, 31 Mar 2020 13:24:18 +1100
Subject: [R] How to match strings in two files and replace strings?
In-Reply-To: <CAF9-5jOTxXFB81PLfqS_w9=Jx5yy_bMHkrUQDFvhmKphAP303g@mail.gmail.com>
References: <CAF9-5jOTxXFB81PLfqS_w9=Jx5yy_bMHkrUQDFvhmKphAP303g@mail.gmail.com>
Message-ID: <CA+8X3fWDycMX8yCMKeiFbKP+jG=EOK8SEUUekEVRsy=1RgjBAg@mail.gmail.com>

Hi Ana,
This seems to work. It shouldn't be too hard to do the renaming and
reordering of columns.

output11.frq<-read.table(text="CHR  SNP A1 A2  MAF  NCHROBS
1      1:775852:T:C    T    C       0.1707     3444
1     1:1120590:A:C    C    A      0.08753     3496
1     1:1145994:T:C    C    T       0.1765     3496
1     1:1148494:A:G    A    G       0.1059     3464
1     1:1201155:C:T    T    C      0.07923     3496",
header=TRUE,stringsAsFactors=FALSE)

marker_info<-read.csv(text="1,742429,SNP_A-1909444,ss66079302,rs3094315,36.2,G,A,C,T,A,GCACAGCAAGAGAAAC[A/G]TTTGACAGAGAATACA,Sty,+,-,y,,,127,phs000018
1,769185,SNP_A-4303947,ss66273559,rs4040617,36.2,A,G,A,G,A,GCTGTGAGAGAGAACA[A/G]TGTCCCAATTTTGCCC,Sty,+,+,n,,,127,phs000018
1,775852,SNP_A-1886933,ss66317030,rs2980300,36.2,T,C,A,G,A,GAATGACTGTGTCTCT[C/T]TGAGTTAGTGAAGTCA,Nsp,-,+,y,,,127,phs000018
1,782343,SNP_A-2236359,ss66185183,rs2905036,36.2,C,T,C,T,A,CTCGATTTGTGTTCAA[C/T]ATATTTCATTTGTACC,Sty,-,-,n,,,127,phs000018
1,1201155,SNP_A-2205441,ss66174584,rs4245756,36.2,C,T,C,T,A,CCAGTGCTTTCAACCA[C/T]ACTCACTTTTCACTGT,Sty,+,+,n,,,127,phs000018",
header=FALSE,stringsAsFactors=FALSE)
# create new columns for the merge
output11.frq$match_col<-unlist(lapply(lapply(strsplit(output11.frq$SNP,":"),"[",
 1:2), paste,collapse=":"))
marker_info$match_col<-apply(t(marker_info[,1:2]),2,paste,collapse=":")
# merge to get the result
newout<-merge(output11.frq,marker_info[,c("V5","match_col")],by="match_col")

Jim

On Tue, Mar 31, 2020 at 11:09 AM Ana Marija <sokovic.anamarija at gmail.com> wrote:
>
> I have a file like this: (has 308545 lines)
>
>     head output11.frq
>      CHR               SNP   A1   A2          MAF  NCHROBS
>        1      1:775852:T:C    T    C       0.1707     3444
>        1     1:1120590:A:C    C    A      0.08753     3496
>        1     1:1145994:T:C    C    T       0.1765     3496
>        1     1:1148494:A:G    A    G       0.1059     3464
>        1     1:1201155:C:T    T    C      0.07923     3496
>     ...
>
> And another file (marker-info) which has the first 24 commented lines
> and is comma separated that looks like this (has total of 500593
> lines):
>
>     1,742429,SNP_A-1909444,ss66079302,rs3094315,36.2,G,A,C,T,A,GCACAGCAAGAGAAAC[A/G]TTTGACAGAGAATACA,Sty,+,-,y,,,127,phs000018
>     1,769185,SNP_A-4303947,ss66273559,rs4040617,36.2,A,G,A,G,A,GCTGTGAGAGAGAACA[A/G]TGTCCCAATTTTGCCC,Sty,+,+,n,,,127,phs000018
>     1,775852,SNP_A-1886933,ss66317030,rs2980300,36.2,T,C,A,G,A,GAATGACTGTGTCTCT[C/T]TGAGTTAGTGAAGTCA,Nsp,-,+,y,,,127,phs000018
>     1,782343,SNP_A-2236359,ss66185183,rs2905036,36.2,C,T,C,T,A,CTCGATTTGTGTTCAA[C/T]ATATTTCATTTGTACC,Sty,-,-,n,,,127,phs000018
>     1,1201155,SNP_A-2205441,ss66174584,rs4245756,36.2,C,T,C,T,A,CCAGTGCTTTCAACCA[C/T]ACTCACTTTTCACTGT,Sty,+,+,n,,,127,phs000018
>     ...
>
> I want to replace in output11.frq second column with the 5th column in
> marker-info that has the matching value in 1st and 2nd column so for
> this example the result of the output11.frq would look like this:
>
>     1      rs2980300    T    C       0.1707     3444
>     1      rs4245756    T    C      0.07923     3496
>
> I tried doing this in bash but I got empty file:
>
>     vi tst.awk
>     NR==FNR { map[$1,$2]=$5; next }
>     ($1,$4) in map { $2=map[$1,$4]; print }
>     awk -f tst.awk FS=',' marker-info FS='\t' output11.frq  > output11X.frq
>
> Can this be done in R?
>
> Thanks
> Ana
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com  Tue Mar 31 04:43:45 2020
From: @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com (Ana Marija)
Date: Mon, 30 Mar 2020 21:43:45 -0500
Subject: [R] How to match strings in two files and replace strings?
In-Reply-To: <CA+8X3fWDycMX8yCMKeiFbKP+jG=EOK8SEUUekEVRsy=1RgjBAg@mail.gmail.com>
References: <CAF9-5jOTxXFB81PLfqS_w9=Jx5yy_bMHkrUQDFvhmKphAP303g@mail.gmail.com>
 <CA+8X3fWDycMX8yCMKeiFbKP+jG=EOK8SEUUekEVRsy=1RgjBAg@mail.gmail.com>
Message-ID: <CAF9-5jPaBP94dRWmo2TrXW1x8Qg=iDtxttgDv4fP5wFWJBF7=Q@mail.gmail.com>

HI Jim,

thank you so much for getting back to me, I think the issue is with
reading that csv file

> marker_info<-read.csv("marker-info",header=F,stringsAsFactors=FALSE)
> head(marker_info)

                               V1
1
             #Column Description:
2
        #Column is separated by '
3                                                           #Chr:
Chromosome on NCBI reference genome.
4 #Pos:   chromosome position when snp has unique hit on reference
genome. Otherwise this field is NULL.
5 #Submitter_snp_name:    The string identifier of snp on the
platform.  This is the dbSNP local_snp_id.
6                   #Ss#:   dbSNP submitted snp Id. Each snp sequence
on the platform gets a unique ss#.
  V2
1
2 '.
3
4
5
6

the file starts with 24 commented lines...

I did run your workflow and this is what I got:

> newout<-merge(output11.frq,marker_info[,c("V5","match_col")],by="match_col")
Error in `[.data.frame`(marker_info, , c("V5", "match_col")) :
  undefined columns selected

this is how marker-info looks like:

#Column Description:
#Column is separated by ','.
#Chr:   Chromosome on NCBI reference genome.
#Pos:   chromosome position when snp has unique hit on reference
genome. Otherwise this field is NULL.
#Submitter_snp_name:    The string identifier of snp on the platform.
This is the dbSNP local_snp_id.
#Ss#:   dbSNP submitted snp Id. Each snp sequence on the platform gets
a unique ss#.
#Rs#:   refSNP cluster accession. Rs# for the dbSNP refSNP cluster
that the sequence for this ss# maps to.
#Genome_build_id:       Genome build used to map the SNP (a string)
#ALLELE1_genome_orient: genome orientation allele1, same as which
genotypes are reported.
#ALLELE2_genome_orient: genome orientation allele2, same as which
genotypes are reported.
#ALLELE1_orig_assay_orient:     original reported orientation for the
SNP assay, will correspond to CEL files and the ss_id.
#ALLELE2_orig_assay_orient:     original reported orientation for the
SNP assay, will correspond to CEL files and the ss_id.
#QC_TYPE:       A-autosomal and P-pseudo-autosomal; X: X-linked;
Y-Y-linked;NA-disable QC for this snp.
#SNP_flank_sequence:    snp sequence on the reference genome
orientation. 40bp on each side of variation.
#SOURCE:         Platform specific string identifying assay (e.g. HBA_CHIP)
#Ss2rs_orientation:     ss to rs orientation. +: same; -: opposite strand.
#Rs2genome_orienation:  Orientation of rs flanking sequence to
reference genome. +: same orientation, -: opposite.
#Orien_flipped_assay_to_genome: y/n: this column would be the value of
the exclusive OR from ss2rs_orientation  XOR rs2genome_orientation.
#Probe_id:       NCBI probe_id.
#neighbor_snp_list:     List of neighbor snp and position within 40kb
up/downstream.
#dbSNP_build_id:        dbSNP build id.
#study_id:      unique id with prefix: phs.
#
# Chr,Pos,Submitter_snp_name,Ss#,Rs#,Genome_build_id,ALLELE1_genome_orient,ALLELE2_genome_orient,ALLELE1_orig_assay_orient,ALLELE2_orig_assay_orient,QC_TYPE,SNP_flank_sequence,SOURCE,Ss2rs_orientation,Rs2genome_orienation,Orien_flipped_assay_to_genome,Probe_id,neighbor_snp_list,dbSNP_build_id,study_id
1,742429,SNP_A-1909444,ss66079302,rs3094315,36.2,G,A,C,T,A,GCACAGCAAGAGAAAC[A/G]TTTGACAGAGAATACA,Sty,+,-,y,,,127,phs000018
1,769185,SNP_A-4303947,ss66273559,rs4040617,36.2,A,G,A,G,A,GCTGTGAGAGAGAACA[A/G]TGTCCCAATTTTGCCC,Sty,+,+,n,,,127,phs000018
1,775852,SNP_A-1886933,ss66317030,rs2980300,36.2,T,C,A,G,A,GAATGACTGTGTCTCT[C/T]TGAGTTAGTGAAGTCA,Nsp,-,+,y,,,127,phs000018
...


Please advise,
Ana

On Mon, Mar 30, 2020 at 9:24 PM Jim Lemon <drjimlemon at gmail.com> wrote:
>
> Hi Ana,
> This seems to work. It shouldn't be too hard to do the renaming and
> reordering of columns.
>
> output11.frq<-read.table(text="CHR  SNP A1 A2  MAF  NCHROBS
> 1      1:775852:T:C    T    C       0.1707     3444
> 1     1:1120590:A:C    C    A      0.08753     3496
> 1     1:1145994:T:C    C    T       0.1765     3496
> 1     1:1148494:A:G    A    G       0.1059     3464
> 1     1:1201155:C:T    T    C      0.07923     3496",
> header=TRUE,stringsAsFactors=FALSE)
>
> marker_info<-read.csv(text="1,742429,SNP_A-1909444,ss66079302,rs3094315,36.2,G,A,C,T,A,GCACAGCAAGAGAAAC[A/G]TTTGACAGAGAATACA,Sty,+,-,y,,,127,phs000018
> 1,769185,SNP_A-4303947,ss66273559,rs4040617,36.2,A,G,A,G,A,GCTGTGAGAGAGAACA[A/G]TGTCCCAATTTTGCCC,Sty,+,+,n,,,127,phs000018
> 1,775852,SNP_A-1886933,ss66317030,rs2980300,36.2,T,C,A,G,A,GAATGACTGTGTCTCT[C/T]TGAGTTAGTGAAGTCA,Nsp,-,+,y,,,127,phs000018
> 1,782343,SNP_A-2236359,ss66185183,rs2905036,36.2,C,T,C,T,A,CTCGATTTGTGTTCAA[C/T]ATATTTCATTTGTACC,Sty,-,-,n,,,127,phs000018
> 1,1201155,SNP_A-2205441,ss66174584,rs4245756,36.2,C,T,C,T,A,CCAGTGCTTTCAACCA[C/T]ACTCACTTTTCACTGT,Sty,+,+,n,,,127,phs000018",
> header=FALSE,stringsAsFactors=FALSE)
> # create new columns for the merge
> output11.frq$match_col<-unlist(lapply(lapply(strsplit(output11.frq$SNP,":"),"[",
>  1:2), paste,collapse=":"))
> marker_info$match_col<-apply(t(marker_info[,1:2]),2,paste,collapse=":")
> # merge to get the result
> newout<-merge(output11.frq,marker_info[,c("V5","match_col")],by="match_col")
>
> Jim
>
> On Tue, Mar 31, 2020 at 11:09 AM Ana Marija <sokovic.anamarija at gmail.com> wrote:
> >
> > I have a file like this: (has 308545 lines)
> >
> >     head output11.frq
> >      CHR               SNP   A1   A2          MAF  NCHROBS
> >        1      1:775852:T:C    T    C       0.1707     3444
> >        1     1:1120590:A:C    C    A      0.08753     3496
> >        1     1:1145994:T:C    C    T       0.1765     3496
> >        1     1:1148494:A:G    A    G       0.1059     3464
> >        1     1:1201155:C:T    T    C      0.07923     3496
> >     ...
> >
> > And another file (marker-info) which has the first 24 commented lines
> > and is comma separated that looks like this (has total of 500593
> > lines):
> >
> >     1,742429,SNP_A-1909444,ss66079302,rs3094315,36.2,G,A,C,T,A,GCACAGCAAGAGAAAC[A/G]TTTGACAGAGAATACA,Sty,+,-,y,,,127,phs000018
> >     1,769185,SNP_A-4303947,ss66273559,rs4040617,36.2,A,G,A,G,A,GCTGTGAGAGAGAACA[A/G]TGTCCCAATTTTGCCC,Sty,+,+,n,,,127,phs000018
> >     1,775852,SNP_A-1886933,ss66317030,rs2980300,36.2,T,C,A,G,A,GAATGACTGTGTCTCT[C/T]TGAGTTAGTGAAGTCA,Nsp,-,+,y,,,127,phs000018
> >     1,782343,SNP_A-2236359,ss66185183,rs2905036,36.2,C,T,C,T,A,CTCGATTTGTGTTCAA[C/T]ATATTTCATTTGTACC,Sty,-,-,n,,,127,phs000018
> >     1,1201155,SNP_A-2205441,ss66174584,rs4245756,36.2,C,T,C,T,A,CCAGTGCTTTCAACCA[C/T]ACTCACTTTTCACTGT,Sty,+,+,n,,,127,phs000018
> >     ...
> >
> > I want to replace in output11.frq second column with the 5th column in
> > marker-info that has the matching value in 1st and 2nd column so for
> > this example the result of the output11.frq would look like this:
> >
> >     1      rs2980300    T    C       0.1707     3444
> >     1      rs4245756    T    C      0.07923     3496
> >
> > I tried doing this in bash but I got empty file:
> >
> >     vi tst.awk
> >     NR==FNR { map[$1,$2]=$5; next }
> >     ($1,$4) in map { $2=map[$1,$4]; print }
> >     awk -f tst.awk FS=',' marker-info FS='\t' output11.frq  > output11X.frq
> >
> > Can this be done in R?
> >
> > Thanks
> > Ana
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.


From er|nm@hodge@@ @end|ng |rom gm@||@com  Tue Mar 31 05:02:38 2020
From: er|nm@hodge@@ @end|ng |rom gm@||@com (Erin Hodgess)
Date: Mon, 30 Mar 2020 21:02:38 -0600
Subject: [R] Mapping of countries
In-Reply-To: <CAGsroM29gXKXRNURDAmzotgnMtDLqAZgGoc66iuoJ4zBcmNm0A@mail.gmail.com>
References: <CAGsroM29gXKXRNURDAmzotgnMtDLqAZgGoc66iuoJ4zBcmNm0A@mail.gmail.com>
Message-ID: <CACxE24nzYyfbmwkpH3OXCAhtxah0ZfCoPYSwPxwR0ZNDCn8tVA@mail.gmail.com>

Hello George!

Do you mean to have a map of the world with these countries filled in, or
to have just those countries on the map, please?

Thanks,
Erin

Erin Hodgess, PhD
mailto: erinm.hodgess at gmail.com


On Mon, Mar 30, 2020 at 7:38 PM george brida <george.brida at gmail.com> wrote:

> Dear R users,
>
> i would like to plot the maps of the Gulf Cooperation Council (GCC)
> countries (KSA, Qatar, Bahrain, Kuwait, UAE and Oman) with these
> constraints: i/ KSA , Qatar and Bahrain have the same face color , ii/
> Kuweit and UAE with the same face color and iii/Oman  with another face
> color. Is there any code in R doing this task.
>
> Many thanks.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Mar 31 06:04:17 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 30 Mar 2020 21:04:17 -0700
Subject: [R] Mapping of countries
In-Reply-To: <CACxE24nzYyfbmwkpH3OXCAhtxah0ZfCoPYSwPxwR0ZNDCn8tVA@mail.gmail.com>
References: <CAGsroM29gXKXRNURDAmzotgnMtDLqAZgGoc66iuoJ4zBcmNm0A@mail.gmail.com>
 <CACxE24nzYyfbmwkpH3OXCAhtxah0ZfCoPYSwPxwR0ZNDCn8tVA@mail.gmail.com>
Message-ID: <CAGxFJbS9d5rHxwaRVMhw7Or3jn-zFb6R8w9iHchezf01WMiwZw@mail.gmail.com>

Probably better posted to the r-sig-geo list, where you are more
likely to find the relevant expertise.

Perhaps see also https://cran.r-project.org/web/views/Spatial.html,
depending on what you plan to do with your maps.

Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

On Mon, Mar 30, 2020 at 8:03 PM Erin Hodgess <erinm.hodgess at gmail.com> wrote:
>
> Hello George!
>
> Do you mean to have a map of the world with these countries filled in, or
> to have just those countries on the map, please?
>
> Thanks,
> Erin
>
> Erin Hodgess, PhD
> mailto: erinm.hodgess at gmail.com
>
>
> On Mon, Mar 30, 2020 at 7:38 PM george brida <george.brida at gmail.com> wrote:
>
> > Dear R users,
> >
> > i would like to plot the maps of the Gulf Cooperation Council (GCC)
> > countries (KSA, Qatar, Bahrain, Kuwait, UAE and Oman) with these
> > constraints: i/ KSA , Qatar and Bahrain have the same face color , ii/
> > Kuweit and UAE with the same face color and iii/Oman  with another face
> > color. Is there any code in R doing this task.
> >
> > Many thanks.
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From drj|m|emon @end|ng |rom gm@||@com  Tue Mar 31 08:07:19 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Tue, 31 Mar 2020 17:07:19 +1100
Subject: [R] How to match strings in two files and replace strings?
In-Reply-To: <CAF9-5jPaBP94dRWmo2TrXW1x8Qg=iDtxttgDv4fP5wFWJBF7=Q@mail.gmail.com>
References: <CAF9-5jOTxXFB81PLfqS_w9=Jx5yy_bMHkrUQDFvhmKphAP303g@mail.gmail.com>
 <CA+8X3fWDycMX8yCMKeiFbKP+jG=EOK8SEUUekEVRsy=1RgjBAg@mail.gmail.com>
 <CAF9-5jPaBP94dRWmo2TrXW1x8Qg=iDtxttgDv4fP5wFWJBF7=Q@mail.gmail.com>
Message-ID: <CA+8X3fWAc2F3xF_vqxFpw5jGJ5DYf3oT2is6QQyHhOsoRKmX9A@mail.gmail.com>

Ah, my mistake. Should be:

marker_info<-read.csv("marker-info",header=FALSE,stringsAsFactors=FALSE,skip=24)

Jim

On Tue, Mar 31, 2020 at 1:43 PM Ana Marija <sokovic.anamarija at gmail.com> wrote:
>
> HI Jim,
>
> thank you so much for getting back to me, I think the issue is with
> reading that csv file
>
> > marker_info<-read.csv("marker-info",header=F,stringsAsFactors=FALSE)
> > head(marker_info)
>
>                                V1
> 1
>              #Column Description:
> 2
>         #Column is separated by '
> 3                                                           #Chr:
> Chromosome on NCBI reference genome.
> 4 #Pos:   chromosome position when snp has unique hit on reference
> genome. Otherwise this field is NULL.
> 5 #Submitter_snp_name:    The string identifier of snp on the
> platform.  This is the dbSNP local_snp_id.
> 6                   #Ss#:   dbSNP submitted snp Id. Each snp sequence
> on the platform gets a unique ss#.
>   V2
> 1
> 2 '.
> 3
> 4
> 5
> 6
>
> the file starts with 24 commented lines...
>
> I did run your workflow and this is what I got:
>
> > newout<-merge(output11.frq,marker_info[,c("V5","match_col")],by="match_col")
> Error in `[.data.frame`(marker_info, , c("V5", "match_col")) :
>   undefined columns selected
>
> this is how marker-info looks like:
>
> #Column Description:
> #Column is separated by ','.
> #Chr:   Chromosome on NCBI reference genome.
> #Pos:   chromosome position when snp has unique hit on reference
> genome. Otherwise this field is NULL.
> #Submitter_snp_name:    The string identifier of snp on the platform.
> This is the dbSNP local_snp_id.
> #Ss#:   dbSNP submitted snp Id. Each snp sequence on the platform gets
> a unique ss#.
> #Rs#:   refSNP cluster accession. Rs# for the dbSNP refSNP cluster
> that the sequence for this ss# maps to.
> #Genome_build_id:       Genome build used to map the SNP (a string)
> #ALLELE1_genome_orient: genome orientation allele1, same as which
> genotypes are reported.
> #ALLELE2_genome_orient: genome orientation allele2, same as which
> genotypes are reported.
> #ALLELE1_orig_assay_orient:     original reported orientation for the
> SNP assay, will correspond to CEL files and the ss_id.
> #ALLELE2_orig_assay_orient:     original reported orientation for the
> SNP assay, will correspond to CEL files and the ss_id.
> #QC_TYPE:       A-autosomal and P-pseudo-autosomal; X: X-linked;
> Y-Y-linked;NA-disable QC for this snp.
> #SNP_flank_sequence:    snp sequence on the reference genome
> orientation. 40bp on each side of variation.
> #SOURCE:         Platform specific string identifying assay (e.g. HBA_CHIP)
> #Ss2rs_orientation:     ss to rs orientation. +: same; -: opposite strand.
> #Rs2genome_orienation:  Orientation of rs flanking sequence to
> reference genome. +: same orientation, -: opposite.
> #Orien_flipped_assay_to_genome: y/n: this column would be the value of
> the exclusive OR from ss2rs_orientation  XOR rs2genome_orientation.
> #Probe_id:       NCBI probe_id.
> #neighbor_snp_list:     List of neighbor snp and position within 40kb
> up/downstream.
> #dbSNP_build_id:        dbSNP build id.
> #study_id:      unique id with prefix: phs.
> #
> # Chr,Pos,Submitter_snp_name,Ss#,Rs#,Genome_build_id,ALLELE1_genome_orient,ALLELE2_genome_orient,ALLELE1_orig_assay_orient,ALLELE2_orig_assay_orient,QC_TYPE,SNP_flank_sequence,SOURCE,Ss2rs_orientation,Rs2genome_orienation,Orien_flipped_assay_to_genome,Probe_id,neighbor_snp_list,dbSNP_build_id,study_id
> 1,742429,SNP_A-1909444,ss66079302,rs3094315,36.2,G,A,C,T,A,GCACAGCAAGAGAAAC[A/G]TTTGACAGAGAATACA,Sty,+,-,y,,,127,phs000018
> 1,769185,SNP_A-4303947,ss66273559,rs4040617,36.2,A,G,A,G,A,GCTGTGAGAGAGAACA[A/G]TGTCCCAATTTTGCCC,Sty,+,+,n,,,127,phs000018
> 1,775852,SNP_A-1886933,ss66317030,rs2980300,36.2,T,C,A,G,A,GAATGACTGTGTCTCT[C/T]TGAGTTAGTGAAGTCA,Nsp,-,+,y,,,127,phs000018
> ...
>
>
> Please advise,
> Ana
>
> On Mon, Mar 30, 2020 at 9:24 PM Jim Lemon <drjimlemon at gmail.com> wrote:
> >
> > Hi Ana,
> > This seems to work. It shouldn't be too hard to do the renaming and
> > reordering of columns.
> >
> > output11.frq<-read.table(text="CHR  SNP A1 A2  MAF  NCHROBS
> > 1      1:775852:T:C    T    C       0.1707     3444
> > 1     1:1120590:A:C    C    A      0.08753     3496
> > 1     1:1145994:T:C    C    T       0.1765     3496
> > 1     1:1148494:A:G    A    G       0.1059     3464
> > 1     1:1201155:C:T    T    C      0.07923     3496",
> > header=TRUE,stringsAsFactors=FALSE)
> >
> > marker_info<-read.csv(text="1,742429,SNP_A-1909444,ss66079302,rs3094315,36.2,G,A,C,T,A,GCACAGCAAGAGAAAC[A/G]TTTGACAGAGAATACA,Sty,+,-,y,,,127,phs000018
> > 1,769185,SNP_A-4303947,ss66273559,rs4040617,36.2,A,G,A,G,A,GCTGTGAGAGAGAACA[A/G]TGTCCCAATTTTGCCC,Sty,+,+,n,,,127,phs000018
> > 1,775852,SNP_A-1886933,ss66317030,rs2980300,36.2,T,C,A,G,A,GAATGACTGTGTCTCT[C/T]TGAGTTAGTGAAGTCA,Nsp,-,+,y,,,127,phs000018
> > 1,782343,SNP_A-2236359,ss66185183,rs2905036,36.2,C,T,C,T,A,CTCGATTTGTGTTCAA[C/T]ATATTTCATTTGTACC,Sty,-,-,n,,,127,phs000018
> > 1,1201155,SNP_A-2205441,ss66174584,rs4245756,36.2,C,T,C,T,A,CCAGTGCTTTCAACCA[C/T]ACTCACTTTTCACTGT,Sty,+,+,n,,,127,phs000018",
> > header=FALSE,stringsAsFactors=FALSE)
> > # create new columns for the merge
> > output11.frq$match_col<-unlist(lapply(lapply(strsplit(output11.frq$SNP,":"),"[",
> >  1:2), paste,collapse=":"))
> > marker_info$match_col<-apply(t(marker_info[,1:2]),2,paste,collapse=":")
> > # merge to get the result
> > newout<-merge(output11.frq,marker_info[,c("V5","match_col")],by="match_col")
> >
> > Jim
> >
> > On Tue, Mar 31, 2020 at 11:09 AM Ana Marija <sokovic.anamarija at gmail.com> wrote:
> > >
> > > I have a file like this: (has 308545 lines)
> > >
> > >     head output11.frq
> > >      CHR               SNP   A1   A2          MAF  NCHROBS
> > >        1      1:775852:T:C    T    C       0.1707     3444
> > >        1     1:1120590:A:C    C    A      0.08753     3496
> > >        1     1:1145994:T:C    C    T       0.1765     3496
> > >        1     1:1148494:A:G    A    G       0.1059     3464
> > >        1     1:1201155:C:T    T    C      0.07923     3496
> > >     ...
> > >
> > > And another file (marker-info) which has the first 24 commented lines
> > > and is comma separated that looks like this (has total of 500593
> > > lines):
> > >
> > >     1,742429,SNP_A-1909444,ss66079302,rs3094315,36.2,G,A,C,T,A,GCACAGCAAGAGAAAC[A/G]TTTGACAGAGAATACA,Sty,+,-,y,,,127,phs000018
> > >     1,769185,SNP_A-4303947,ss66273559,rs4040617,36.2,A,G,A,G,A,GCTGTGAGAGAGAACA[A/G]TGTCCCAATTTTGCCC,Sty,+,+,n,,,127,phs000018
> > >     1,775852,SNP_A-1886933,ss66317030,rs2980300,36.2,T,C,A,G,A,GAATGACTGTGTCTCT[C/T]TGAGTTAGTGAAGTCA,Nsp,-,+,y,,,127,phs000018
> > >     1,782343,SNP_A-2236359,ss66185183,rs2905036,36.2,C,T,C,T,A,CTCGATTTGTGTTCAA[C/T]ATATTTCATTTGTACC,Sty,-,-,n,,,127,phs000018
> > >     1,1201155,SNP_A-2205441,ss66174584,rs4245756,36.2,C,T,C,T,A,CCAGTGCTTTCAACCA[C/T]ACTCACTTTTCACTGT,Sty,+,+,n,,,127,phs000018
> > >     ...
> > >
> > > I want to replace in output11.frq second column with the 5th column in
> > > marker-info that has the matching value in 1st and 2nd column so for
> > > this example the result of the output11.frq would look like this:
> > >
> > >     1      rs2980300    T    C       0.1707     3444
> > >     1      rs4245756    T    C      0.07923     3496
> > >
> > > I tried doing this in bash but I got empty file:
> > >
> > >     vi tst.awk
> > >     NR==FNR { map[$1,$2]=$5; next }
> > >     ($1,$4) in map { $2=map[$1,$4]; print }
> > >     awk -f tst.awk FS=',' marker-info FS='\t' output11.frq  > output11X.frq
> > >
> > > Can this be done in R?
> > >
> > > Thanks
> > > Ana
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.


From drj|m|emon @end|ng |rom gm@||@com  Tue Mar 31 10:10:13 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Tue, 31 Mar 2020 19:10:13 +1100
Subject: [R] Mapping of countries
In-Reply-To: <CAGsroM29gXKXRNURDAmzotgnMtDLqAZgGoc66iuoJ4zBcmNm0A@mail.gmail.com>
References: <CAGsroM29gXKXRNURDAmzotgnMtDLqAZgGoc66iuoJ4zBcmNm0A@mail.gmail.com>
Message-ID: <CA+8X3fXDjKjCyceJUyJPkgQnmVbEzNFLuqJCPsyDbRwYEM8hGA@mail.gmail.com>

Hi George,
Try this:

library(maps)
map("world",xlim=c(34.353,60.369),ylim=c(16.7,32.193),
 regions="Saudi Arabia",col="yellow",fill=TRUE)
map("world",regions="Bahrain",col="yellow",fill=TRUE,add=TRUE)
map("world",regions="Kuwait",col="lightblue",fill=TRUE,add=TRUE)
map("world",regions="Qatar",col="yellow",fill=TRUE,add=TRUE)
map("world",regions="United Arab Emirates",col="lightblue",fill=TRUE,add=TRUE)
map("world",regions="Oman",col="lightgreen",fill=TRUE,add=TRUE)

Jim

On Tue, Mar 31, 2020 at 12:39 PM george brida <george.brida at gmail.com> wrote:
>
> Dear R users,
>
> i would like to plot the maps of the Gulf Cooperation Council (GCC)
> countries (KSA, Qatar, Bahrain, Kuwait, UAE and Oman) with these
> constraints: i/ KSA , Qatar and Bahrain have the same face color , ii/
> Kuweit and UAE with the same face color and iii/Oman  with another face
> color. Is there any code in R doing this task.
>
> Many thanks.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From george@br|d@ @end|ng |rom gm@||@com  Tue Mar 31 14:23:06 2020
From: george@br|d@ @end|ng |rom gm@||@com (george brida)
Date: Tue, 31 Mar 2020 14:23:06 +0200
Subject: [R] Mapping of countries
In-Reply-To: <CACxE24nzYyfbmwkpH3OXCAhtxah0ZfCoPYSwPxwR0ZNDCn8tVA@mail.gmail.com>
References: <CAGsroM29gXKXRNURDAmzotgnMtDLqAZgGoc66iuoJ4zBcmNm0A@mail.gmail.com>
 <CACxE24nzYyfbmwkpH3OXCAhtxah0ZfCoPYSwPxwR0ZNDCn8tVA@mail.gmail.com>
Message-ID: <CAGsroM0YVf=FabLV=LtDPpD3pn0f6Ppa0bsOK6R-VSFE6F4fDg@mail.gmail.com>

Hi Erin,

Thanks for the reply. I would like to have just those countries on the map.

Best

George

On Tue, Mar 31, 2020 at 5:02 AM Erin Hodgess <erinm.hodgess at gmail.com>
wrote:

> Hello George!
>
> Do you mean to have a map of the world with these countries filled in, or
> to have just those countries on the map, please?
>
> Thanks,
> Erin
>
> Erin Hodgess, PhD
> mailto: erinm.hodgess at gmail.com
>
>
> On Mon, Mar 30, 2020 at 7:38 PM george brida <george.brida at gmail.com>
> wrote:
>
>> Dear R users,
>>
>> i would like to plot the maps of the Gulf Cooperation Council (GCC)
>> countries (KSA, Qatar, Bahrain, Kuwait, UAE and Oman) with these
>> constraints: i/ KSA , Qatar and Bahrain have the same face color , ii/
>> Kuweit and UAE with the same face color and iii/Oman  with another face
>> color. Is there any code in R doing this task.
>>
>> Many thanks.
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From george@br|d@ @end|ng |rom gm@||@com  Tue Mar 31 14:25:02 2020
From: george@br|d@ @end|ng |rom gm@||@com (george brida)
Date: Tue, 31 Mar 2020 14:25:02 +0200
Subject: [R] Mapping of countries
In-Reply-To: <CAGxFJbS9d5rHxwaRVMhw7Or3jn-zFb6R8w9iHchezf01WMiwZw@mail.gmail.com>
References: <CAGsroM29gXKXRNURDAmzotgnMtDLqAZgGoc66iuoJ4zBcmNm0A@mail.gmail.com>
 <CACxE24nzYyfbmwkpH3OXCAhtxah0ZfCoPYSwPxwR0ZNDCn8tVA@mail.gmail.com>
 <CAGxFJbS9d5rHxwaRVMhw7Or3jn-zFb6R8w9iHchezf01WMiwZw@mail.gmail.com>
Message-ID: <CAGsroM2gEM5waB98JGzVTxuyMcOumJELKOA70L7h7OSQ-=CFZQ@mail.gmail.com>

Dear Gunter,

It is noted. Thanks

Best

On Tue, Mar 31, 2020 at 6:04 AM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> Probably better posted to the r-sig-geo list, where you are more
> likely to find the relevant expertise.
>
> Perhaps see also https://cran.r-project.org/web/views/Spatial.html,
> depending on what you plan to do with your maps.
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along
> and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
> On Mon, Mar 30, 2020 at 8:03 PM Erin Hodgess <erinm.hodgess at gmail.com>
> wrote:
> >
> > Hello George!
> >
> > Do you mean to have a map of the world with these countries filled in, or
> > to have just those countries on the map, please?
> >
> > Thanks,
> > Erin
> >
> > Erin Hodgess, PhD
> > mailto: erinm.hodgess at gmail.com
> >
> >
> > On Mon, Mar 30, 2020 at 7:38 PM george brida <george.brida at gmail.com>
> wrote:
> >
> > > Dear R users,
> > >
> > > i would like to plot the maps of the Gulf Cooperation Council (GCC)
> > > countries (KSA, Qatar, Bahrain, Kuwait, UAE and Oman) with these
> > > constraints: i/ KSA , Qatar and Bahrain have the same face color , ii/
> > > Kuweit and UAE with the same face color and iii/Oman  with another face
> > > color. Is there any code in R doing this task.
> > >
> > > Many thanks.
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> > >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From er|nm@hodge@@ @end|ng |rom gm@||@com  Tue Mar 31 14:25:53 2020
From: er|nm@hodge@@ @end|ng |rom gm@||@com (Erin Hodgess)
Date: Tue, 31 Mar 2020 06:25:53 -0600
Subject: [R] Mapping of countries
In-Reply-To: <CA+8X3fXDjKjCyceJUyJPkgQnmVbEzNFLuqJCPsyDbRwYEM8hGA@mail.gmail.com>
References: <CAGsroM29gXKXRNURDAmzotgnMtDLqAZgGoc66iuoJ4zBcmNm0A@mail.gmail.com>
 <CA+8X3fXDjKjCyceJUyJPkgQnmVbEzNFLuqJCPsyDbRwYEM8hGA@mail.gmail.com>
Message-ID: <CACxE24kowGyCPAHJuEg3WzGd7kw43Axe1yOaE6s5=61+9p0FLA@mail.gmail.com>

That would have been my code too!


On Tue, Mar 31, 2020 at 2:10 AM Jim Lemon <drjimlemon at gmail.com> wrote:

> Hi George,
> Try this:
>
> library(maps)
> map("world",xlim=c(34.353,60.369),ylim=c(16.7,32.193),
>  regions="Saudi Arabia",col="yellow",fill=TRUE)
> map("world",regions="Bahrain",col="yellow",fill=TRUE,add=TRUE)
> map("world",regions="Kuwait",col="lightblue",fill=TRUE,add=TRUE)
> map("world",regions="Qatar",col="yellow",fill=TRUE,add=TRUE)
> map("world",regions="United Arab
> Emirates",col="lightblue",fill=TRUE,add=TRUE)
> map("world",regions="Oman",col="lightgreen",fill=TRUE,add=TRUE)
>
> Jim
>
> On Tue, Mar 31, 2020 at 12:39 PM george brida <george.brida at gmail.com>
> wrote:
> >
> > Dear R users,
> >
> > i would like to plot the maps of the Gulf Cooperation Council (GCC)
> > countries (KSA, Qatar, Bahrain, Kuwait, UAE and Oman) with these
> > constraints: i/ KSA , Qatar and Bahrain have the same face color , ii/
> > Kuweit and UAE with the same face color and iii/Oman  with another face
> > color. Is there any code in R doing this task.
> >
> > Many thanks.
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
-- 
Erin Hodgess, PhD
mailto: erinm.hodgess at gmail.com

	[[alternative HTML version deleted]]


From george@br|d@ @end|ng |rom gm@||@com  Tue Mar 31 14:29:46 2020
From: george@br|d@ @end|ng |rom gm@||@com (george brida)
Date: Tue, 31 Mar 2020 14:29:46 +0200
Subject: [R] Mapping of countries
In-Reply-To: <CA+8X3fXDjKjCyceJUyJPkgQnmVbEzNFLuqJCPsyDbRwYEM8hGA@mail.gmail.com>
References: <CAGsroM29gXKXRNURDAmzotgnMtDLqAZgGoc66iuoJ4zBcmNm0A@mail.gmail.com>
 <CA+8X3fXDjKjCyceJUyJPkgQnmVbEzNFLuqJCPsyDbRwYEM8hGA@mail.gmail.com>
Message-ID: <CAGsroM1hppxCmg3xfmdsWGP=XvEHjyVAaHAboOwF=FcyhrZzeg@mail.gmail.com>

Dear Jim,

Thank you very much. I obtained now the required map. I would like to know
how to add the names of the countries.

Best
George

On Tue, Mar 31, 2020 at 10:10 AM Jim Lemon <drjimlemon at gmail.com> wrote:

> Hi George,
> Try this:
>
> library(maps)
> map("world",xlim=c(34.353,60.369),ylim=c(16.7,32.193),
>  regions="Saudi Arabia",col="yellow",fill=TRUE)
> map("world",regions="Bahrain",col="yellow",fill=TRUE,add=TRUE)
> map("world",regions="Kuwait",col="lightblue",fill=TRUE,add=TRUE)
> map("world",regions="Qatar",col="yellow",fill=TRUE,add=TRUE)
> map("world",regions="United Arab
> Emirates",col="lightblue",fill=TRUE,add=TRUE)
> map("world",regions="Oman",col="lightgreen",fill=TRUE,add=TRUE)
>
> Jim
>
> On Tue, Mar 31, 2020 at 12:39 PM george brida <george.brida at gmail.com>
> wrote:
> >
> > Dear R users,
> >
> > i would like to plot the maps of the Gulf Cooperation Council (GCC)
> > countries (KSA, Qatar, Bahrain, Kuwait, UAE and Oman) with these
> > constraints: i/ KSA , Qatar and Bahrain have the same face color , ii/
> > Kuweit and UAE with the same face color and iii/Oman  with another face
> > color. Is there any code in R doing this task.
> >
> > Many thanks.
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From c@|@ndr@ @end|ng |rom rgzm@de  Tue Mar 31 14:47:54 2020
From: c@|@ndr@ @end|ng |rom rgzm@de (Ivan Calandra)
Date: Tue, 31 Mar 2020 14:47:54 +0200
Subject: [R] ncol() vs. length() on data.frames
Message-ID: <a355b6f4-5bc5-6e32-ba5c-ae4993b65d08@rgzm.de>

Dear useRs,

I have a very simple question:
On a simple data.frame (i.e. each element is a vector), ncol() and
length() will give the same result.

Are they just equivalent on such objects, or are they differences in
some cases?
Is one of them to be preferred for whatever reason?

Thanks you,
Ivan

-- 
Dr. Ivan Calandra
TraCEr, laboratory for Traceology and Controlled Experiments
MONREPOS Archaeological Research Centre and
Museum for Human Behavioural Evolution
Schloss Monrepos
56567 Neuwied, Germany
+49 (0) 2631 9772-243
https://www.researchgate.net/profile/Ivan_Calandra


From er|cjberger @end|ng |rom gm@||@com  Tue Mar 31 15:26:53 2020
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Tue, 31 Mar 2020 16:26:53 +0300
Subject: [R] ncol() vs. length() on data.frames
In-Reply-To: <a355b6f4-5bc5-6e32-ba5c-ae4993b65d08@rgzm.de>
References: <a355b6f4-5bc5-6e32-ba5c-ae4993b65d08@rgzm.de>
Message-ID: <CAGgJW75awWd+ebqGuXEEaXg3i-7z3U5FpgWUxOuz7HauvFCXxw@mail.gmail.com>

A data frame is a special case of a list. It is a list of its columns.

> is.list( your_data_frame )

# TRUE


On Tue, Mar 31, 2020 at 4:04 PM Ivan Calandra <calandra at rgzm.de> wrote:

> Dear useRs,
>
> I have a very simple question:
> On a simple data.frame (i.e. each element is a vector), ncol() and
> length() will give the same result.
>
> Are they just equivalent on such objects, or are they differences in
> some cases?
> Is one of them to be preferred for whatever reason?
>
> Thanks you,
> Ivan
>
> --
> Dr. Ivan Calandra
> TraCEr, laboratory for Traceology and Controlled Experiments
> MONREPOS Archaeological Research Centre and
> Museum for Human Behavioural Evolution
> Schloss Monrepos
> 56567 Neuwied, Germany
> +49 (0) 2631 9772-243
> https://www.researchgate.net/profile/Ivan_Calandra
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From c@|@ndr@ @end|ng |rom rgzm@de  Tue Mar 31 15:32:24 2020
From: c@|@ndr@ @end|ng |rom rgzm@de (Ivan Calandra)
Date: Tue, 31 Mar 2020 15:32:24 +0200
Subject: [R] ncol() vs. length() on data.frames
In-Reply-To: <CAGgJW75awWd+ebqGuXEEaXg3i-7z3U5FpgWUxOuz7HauvFCXxw@mail.gmail.com>
References: <a355b6f4-5bc5-6e32-ba5c-ae4993b65d08@rgzm.de>
 <CAGgJW75awWd+ebqGuXEEaXg3i-7z3U5FpgWUxOuz7HauvFCXxw@mail.gmail.com>
Message-ID: <6838c19f-5d00-bc0d-5a08-c1ba26fe1705@rgzm.de>

Thanks Eric,

I know that, but that doesn't really answer my question, does it?

Ivan

--
Dr. Ivan Calandra
TraCEr, laboratory for Traceology and Controlled Experiments
MONREPOS Archaeological Research Centre and
Museum for Human Behavioural Evolution
Schloss Monrepos
56567 Neuwied, Germany
+49 (0) 2631 9772-243
https://www.researchgate.net/profile/Ivan_Calandra

On 31/03/2020 15:26, Eric Berger wrote:
> A data frame is a special case of a list. It is a list of its columns.
>
> > is.list( your_data_frame )
>
> # TRUE
>
>
> On Tue, Mar 31, 2020 at 4:04 PM Ivan Calandra <calandra at rgzm.de
> <mailto:calandra at rgzm.de>> wrote:
>
>     Dear useRs,
>
>     I have a very simple question:
>     On a simple data.frame (i.e. each element is a vector), ncol() and
>     length() will give the same result.
>
>     Are they just equivalent on such objects, or are they differences in
>     some cases?
>     Is one of them to be preferred for whatever reason?
>
>     Thanks you,
>     Ivan
>
>     -- 
>     Dr. Ivan Calandra
>     TraCEr, laboratory for Traceology and Controlled Experiments
>     MONREPOS Archaeological Research Centre and
>     Museum for Human Behavioural Evolution
>     Schloss Monrepos
>     56567 Neuwied, Germany
>     +49 (0) 2631 9772-243
>     https://www.researchgate.net/profile/Ivan_Calandra
>
>     ______________________________________________
>     R-help at r-project.org <mailto:R-help at r-project.org> mailing list --
>     To UNSUBSCRIBE and more, see
>     https://stat.ethz.ch/mailman/listinfo/r-help
>     PLEASE do read the posting guide
>     http://www.R-project.org/posting-guide.html
>     and provide commented, minimal, self-contained, reproducible code.
>


From er|cjberger @end|ng |rom gm@||@com  Tue Mar 31 15:39:19 2020
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Tue, 31 Mar 2020 16:39:19 +0300
Subject: [R] ncol() vs. length() on data.frames
In-Reply-To: <6838c19f-5d00-bc0d-5a08-c1ba26fe1705@rgzm.de>
References: <a355b6f4-5bc5-6e32-ba5c-ae4993b65d08@rgzm.de>
 <CAGgJW75awWd+ebqGuXEEaXg3i-7z3U5FpgWUxOuz7HauvFCXxw@mail.gmail.com>
 <6838c19f-5d00-bc0d-5a08-c1ba26fe1705@rgzm.de>
Message-ID: <CAGgJW77jmY4=YhOt2Ye=1x2niLx-nBS9O0+kd8tfNdXuZE_t2Q@mail.gmail.com>

Yes it does because length(list) gives you the number of elements of the
list. And in the case of a data frame object that is the number of columns,
or ncol().

On Tue, Mar 31, 2020 at 4:37 PM Ivan Calandra <calandra at rgzm.de> wrote:

> Thanks Eric,
>
> I know that, but that doesn't really answer my question, does it?
>
> Ivan
>
> --
> Dr. Ivan Calandra
> TraCEr, laboratory for Traceology and Controlled Experiments
> MONREPOS Archaeological Research Centre and
> Museum for Human Behavioural Evolution
> Schloss Monrepos
> 56567 Neuwied, Germany
> +49 (0) 2631 9772-243
> https://www.researchgate.net/profile/Ivan_Calandra
>
> On 31/03/2020 15:26, Eric Berger wrote:
> > A data frame is a special case of a list. It is a list of its columns.
> >
> > > is.list( your_data_frame )
> >
> > # TRUE
> >
> >
> > On Tue, Mar 31, 2020 at 4:04 PM Ivan Calandra <calandra at rgzm.de
> > <mailto:calandra at rgzm.de>> wrote:
> >
> >     Dear useRs,
> >
> >     I have a very simple question:
> >     On a simple data.frame (i.e. each element is a vector), ncol() and
> >     length() will give the same result.
> >
> >     Are they just equivalent on such objects, or are they differences in
> >     some cases?
> >     Is one of them to be preferred for whatever reason?
> >
> >     Thanks you,
> >     Ivan
> >
> >     --
> >     Dr. Ivan Calandra
> >     TraCEr, laboratory for Traceology and Controlled Experiments
> >     MONREPOS Archaeological Research Centre and
> >     Museum for Human Behavioural Evolution
> >     Schloss Monrepos
> >     56567 Neuwied, Germany
> >     +49 (0) 2631 9772-243
> >     https://www.researchgate.net/profile/Ivan_Calandra
> >
> >     ______________________________________________
> >     R-help at r-project.org <mailto:R-help at r-project.org> mailing list --
> >     To UNSUBSCRIBE and more, see
> >     https://stat.ethz.ch/mailman/listinfo/r-help
> >     PLEASE do read the posting guide
> >     http://www.R-project.org/posting-guide.html
> >     and provide commented, minimal, self-contained, reproducible code.
> >
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From c@|@ndr@ @end|ng |rom rgzm@de  Tue Mar 31 15:44:42 2020
From: c@|@ndr@ @end|ng |rom rgzm@de (Ivan Calandra)
Date: Tue, 31 Mar 2020 15:44:42 +0200
Subject: [R] ncol() vs. length() on data.frames
In-Reply-To: <CAGgJW77jmY4=YhOt2Ye=1x2niLx-nBS9O0+kd8tfNdXuZE_t2Q@mail.gmail.com>
References: <a355b6f4-5bc5-6e32-ba5c-ae4993b65d08@rgzm.de>
 <CAGgJW75awWd+ebqGuXEEaXg3i-7z3U5FpgWUxOuz7HauvFCXxw@mail.gmail.com>
 <6838c19f-5d00-bc0d-5a08-c1ba26fe1705@rgzm.de>
 <CAGgJW77jmY4=YhOt2Ye=1x2niLx-nBS9O0+kd8tfNdXuZE_t2Q@mail.gmail.com>
Message-ID: <eca60220-bc69-09b0-163a-73c7427a4296@rgzm.de>

That's exactly why I was asking if it really is equivalent and if there
are issues using one function or the other

--
Dr. Ivan Calandra
TraCEr, laboratory for Traceology and Controlled Experiments
MONREPOS Archaeological Research Centre and
Museum for Human Behavioural Evolution
Schloss Monrepos
56567 Neuwied, Germany
+49 (0) 2631 9772-243
https://www.researchgate.net/profile/Ivan_Calandra

On 31/03/2020 15:39, Eric Berger wrote:
> Yes it does because?length(list) gives you the number of elements of
> the list. And in the case of a data frame object that is the number of
> columns, or ncol().
>
> On Tue, Mar 31, 2020 at 4:37 PM Ivan Calandra <calandra at rgzm.de
> <mailto:calandra at rgzm.de>> wrote:
>
>     Thanks Eric,
>
>     I know that, but that doesn't really answer my question, does it?
>
>     Ivan
>
>     --
>     Dr. Ivan Calandra
>     TraCEr, laboratory for Traceology and Controlled Experiments
>     MONREPOS Archaeological Research Centre and
>     Museum for Human Behavioural Evolution
>     Schloss Monrepos
>     56567 Neuwied, Germany
>     +49 (0) 2631 9772-243
>     https://www.researchgate.net/profile/Ivan_Calandra
>
>     On 31/03/2020 15:26, Eric Berger wrote:
>     > A data frame is a special case of a list. It is a list of its
>     columns.
>     >
>     > > is.list( your_data_frame )
>     >
>     > # TRUE
>     >
>     >
>     > On Tue, Mar 31, 2020 at 4:04 PM Ivan Calandra <calandra at rgzm.de
>     <mailto:calandra at rgzm.de>
>     > <mailto:calandra at rgzm.de <mailto:calandra at rgzm.de>>> wrote:
>     >
>     >? ? ?Dear useRs,
>     >
>     >? ? ?I have a very simple question:
>     >? ? ?On a simple data.frame (i.e. each element is a vector),
>     ncol() and
>     >? ? ?length() will give the same result.
>     >
>     >? ? ?Are they just equivalent on such objects, or are they
>     differences in
>     >? ? ?some cases?
>     >? ? ?Is one of them to be preferred for whatever reason?
>     >
>     >? ? ?Thanks you,
>     >? ? ?Ivan
>     >
>     >? ? ?--
>     >? ? ?Dr. Ivan Calandra
>     >? ? ?TraCEr, laboratory for Traceology and Controlled Experiments
>     >? ? ?MONREPOS Archaeological Research Centre and
>     >? ? ?Museum for Human Behavioural Evolution
>     >? ? ?Schloss Monrepos
>     >? ? ?56567 Neuwied, Germany
>     >? ? ?+49 (0) 2631 9772-243
>     >? ? ?https://www.researchgate.net/profile/Ivan_Calandra
>     >
>     >? ? ?______________________________________________
>     >? ? ?R-help at r-project.org <mailto:R-help at r-project.org>
>     <mailto:R-help at r-project.org <mailto:R-help at r-project.org>>
>     mailing list --
>     >? ? ?To UNSUBSCRIBE and more, see
>     >? ? ?https://stat.ethz.ch/mailman/listinfo/r-help
>     >? ? ?PLEASE do read the posting guide
>     >? ? ?http://www.R-project.org/posting-guide.html
>     >? ? ?and provide commented, minimal, self-contained, reproducible
>     code.
>     >
>
>     ______________________________________________
>     R-help at r-project.org <mailto:R-help at r-project.org> mailing list --
>     To UNSUBSCRIBE and more, see
>     https://stat.ethz.ch/mailman/listinfo/r-help
>     PLEASE do read the posting guide
>     http://www.R-project.org/posting-guide.html
>     and provide commented, minimal, self-contained, reproducible code.
>


From george@br|d@ @end|ng |rom gm@||@com  Tue Mar 31 15:49:44 2020
From: george@br|d@ @end|ng |rom gm@||@com (george brida)
Date: Tue, 31 Mar 2020 15:49:44 +0200
Subject: [R] Mapping of countries
In-Reply-To: <CAGsroM1hppxCmg3xfmdsWGP=XvEHjyVAaHAboOwF=FcyhrZzeg@mail.gmail.com>
References: <CAGsroM29gXKXRNURDAmzotgnMtDLqAZgGoc66iuoJ4zBcmNm0A@mail.gmail.com>
 <CA+8X3fXDjKjCyceJUyJPkgQnmVbEzNFLuqJCPsyDbRwYEM8hGA@mail.gmail.com>
 <CAGsroM1hppxCmg3xfmdsWGP=XvEHjyVAaHAboOwF=FcyhrZzeg@mail.gmail.com>
Message-ID: <CAGsroM3Hxq9xx-YgLqpOsE9fY2dAvPfNQmOWwDKigCd3TZOdRQ@mail.gmail.com>

Dear Jim,

Is it possible to add also a title to this map?

Many thanks



On Tue, Mar 31, 2020 at 2:29 PM george brida <george.brida at gmail.com> wrote:

> Dear Jim,
>
> Thank you very much. I obtained now the required map. I would like to know
> how to add the names of the countries.
>
> Best
> George
>
> On Tue, Mar 31, 2020 at 10:10 AM Jim Lemon <drjimlemon at gmail.com> wrote:
>
>> Hi George,
>> Try this:
>>
>> library(maps)
>> map("world",xlim=c(34.353,60.369),ylim=c(16.7,32.193),
>>  regions="Saudi Arabia",col="yellow",fill=TRUE)
>> map("world",regions="Bahrain",col="yellow",fill=TRUE,add=TRUE)
>> map("world",regions="Kuwait",col="lightblue",fill=TRUE,add=TRUE)
>> map("world",regions="Qatar",col="yellow",fill=TRUE,add=TRUE)
>> map("world",regions="United Arab
>> Emirates",col="lightblue",fill=TRUE,add=TRUE)
>> map("world",regions="Oman",col="lightgreen",fill=TRUE,add=TRUE)
>>
>> Jim
>>
>> On Tue, Mar 31, 2020 at 12:39 PM george brida <george.brida at gmail.com>
>> wrote:
>> >
>> > Dear R users,
>> >
>> > i would like to plot the maps of the Gulf Cooperation Council (GCC)
>> > countries (KSA, Qatar, Bahrain, Kuwait, UAE and Oman) with these
>> > constraints: i/ KSA , Qatar and Bahrain have the same face color , ii/
>> > Kuweit and UAE with the same face color and iii/Oman  with another face
>> > color. Is there any code in R doing this task.
>> >
>> > Many thanks.
>> >
>> >         [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Tue Mar 31 16:00:09 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 31 Mar 2020 17:00:09 +0300
Subject: [R] ncol() vs. length() on data.frames
In-Reply-To: <a355b6f4-5bc5-6e32-ba5c-ae4993b65d08@rgzm.de>
References: <a355b6f4-5bc5-6e32-ba5c-ae4993b65d08@rgzm.de>
Message-ID: <20200331170009.6240febb@Tarkus>

On Tue, 31 Mar 2020 14:47:54 +0200
Ivan Calandra <calandra at rgzm.de> wrote:

> On a simple data.frame (i.e. each element is a vector), ncol() and
> length() will give the same result.

> Are they just equivalent on such objects, or are they differences in
> some cases?

I am not aware of any exceptions to ncol(dataframe)==length(dataframe)
(in fact, ncol(x) is dim(x)[2L] and ?dim says that dim(dataframe)
returns c(length(attr(dataframe, 'row.names')), length(dataframe))), but
watch out for AsIs columns which can have columns of their own:

x <- data.frame(I(volcano))
dim(x)
# [1] 87  1
length(x)
# [1] 1
dim(x[,1])
# [1] 87 61


-- 
Best regards,
Ivan


From c@|@ndr@ @end|ng |rom rgzm@de  Tue Mar 31 16:10:58 2020
From: c@|@ndr@ @end|ng |rom rgzm@de (Ivan Calandra)
Date: Tue, 31 Mar 2020 16:10:58 +0200
Subject: [R] ncol() vs. length() on data.frames
In-Reply-To: <20200331170009.6240febb@Tarkus>
References: <a355b6f4-5bc5-6e32-ba5c-ae4993b65d08@rgzm.de>
 <20200331170009.6240febb@Tarkus>
Message-ID: <1df86ec9-c3c1-3c65-160c-17b7b4d75547@rgzm.de>

Thanks Ivan for the answer.

So it confirms my first thought that these two functions are equivalent
when applied to a "simple" data.frame.

The reason I was asking is because I have gotten used to use length() in
my scripts. It works perfectly and I understand it easily. But to be
honest, ncol() is more intuitive to most users (especially the novice)
so I was thinking about switching to using this function instead (all my
data.frames are created from read.csv() or similar functions so there
should not be any issue). But before doing that, I want to be sure that
it is not going to create unexpected results.

Thank you,
Ivan

--
Dr. Ivan Calandra
TraCEr, laboratory for Traceology and Controlled Experiments
MONREPOS Archaeological Research Centre and
Museum for Human Behavioural Evolution
Schloss Monrepos
56567 Neuwied, Germany
+49 (0) 2631 9772-243
https://www.researchgate.net/profile/Ivan_Calandra

On 31/03/2020 16:00, Ivan Krylov wrote:
> On Tue, 31 Mar 2020 14:47:54 +0200
> Ivan Calandra <calandra at rgzm.de> wrote:
>
>> On a simple data.frame (i.e. each element is a vector), ncol() and
>> length() will give the same result.
>> Are they just equivalent on such objects, or are they differences in
>> some cases?
> I am not aware of any exceptions to ncol(dataframe)==length(dataframe)
> (in fact, ncol(x) is dim(x)[2L] and ?dim says that dim(dataframe)
> returns c(length(attr(dataframe, 'row.names')), length(dataframe))), but
> watch out for AsIs columns which can have columns of their own:
>
> x <- data.frame(I(volcano))
> dim(x)
> # [1] 87  1
> length(x)
> # [1] 1
> dim(x[,1])
> # [1] 87 61
>
>


From M@tth|@@@Koh| @end|ng |rom @t@m@t@@de  Tue Mar 31 16:21:42 2020
From: M@tth|@@@Koh| @end|ng |rom @t@m@t@@de (Prof. Dr. Matthias Kohl)
Date: Tue, 31 Mar 2020 16:21:42 +0200
Subject: [R] ncol() vs. length() on data.frames
In-Reply-To: <1df86ec9-c3c1-3c65-160c-17b7b4d75547@rgzm.de>
References: <a355b6f4-5bc5-6e32-ba5c-ae4993b65d08@rgzm.de>
 <20200331170009.6240febb@Tarkus>
 <1df86ec9-c3c1-3c65-160c-17b7b4d75547@rgzm.de>
Message-ID: <9ff89652-5e72-f7a6-c3dd-eb9c1c625841@stamats.de>

Dear Ivan,

if I enter ncol in the console, I get

function (x)
dim(x)[2L]
<bytecode: 0x5559e9429030>
<environment: namespace:base>

indicating that function dim is called. Function dim has a method for 
data.frame; see methods("dim").

The dim-method for data.frame is

dim.data.frame
function (x)
c(.row_names_info(x, 2L), length(x))
<bytecode: 0x5559eb80da40>
<environment: namespace:base>

Hence, it calls length on the provided data.frame. In addition, some 
"magic" with .row_names_info is performed, where

base:::.row_names_info
function (x, type = 1L)
.Internal(shortRowNames(x, type))
<bytecode: 0x5559ece50160>
<environment: namespace:base>

Best
Matthias

Am 31.03.20 um 16:10 schrieb Ivan Calandra:
> Thanks Ivan for the answer.
> 
> So it confirms my first thought that these two functions are equivalent
> when applied to a "simple" data.frame.
> 
> The reason I was asking is because I have gotten used to use length() in
> my scripts. It works perfectly and I understand it easily. But to be
> honest, ncol() is more intuitive to most users (especially the novice)
> so I was thinking about switching to using this function instead (all my
> data.frames are created from read.csv() or similar functions so there
> should not be any issue). But before doing that, I want to be sure that
> it is not going to create unexpected results.
> 
> Thank you,
> Ivan
> 
> --
> Dr. Ivan Calandra
> TraCEr, laboratory for Traceology and Controlled Experiments
> MONREPOS Archaeological Research Centre and
> Museum for Human Behavioural Evolution
> Schloss Monrepos
> 56567 Neuwied, Germany
> +49 (0) 2631 9772-243
> https://www.researchgate.net/profile/Ivan_Calandra
> 
> On 31/03/2020 16:00, Ivan Krylov wrote:
>> On Tue, 31 Mar 2020 14:47:54 +0200
>> Ivan Calandra <calandra at rgzm.de> wrote:
>>
>>> On a simple data.frame (i.e. each element is a vector), ncol() and
>>> length() will give the same result.
>>> Are they just equivalent on such objects, or are they differences in
>>> some cases?
>> I am not aware of any exceptions to ncol(dataframe)==length(dataframe)
>> (in fact, ncol(x) is dim(x)[2L] and ?dim says that dim(dataframe)
>> returns c(length(attr(dataframe, 'row.names')), length(dataframe))), but
>> watch out for AsIs columns which can have columns of their own:
>>
>> x <- data.frame(I(volcano))
>> dim(x)
>> # [1] 87  1
>> length(x)
>> # [1] 1
>> dim(x[,1])
>> # [1] 87 61
>>
>>
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

-- 
Prof. Dr. Matthias Kohl
www.stamats.de


From M@tth|@@@Koh| @end|ng |rom @t@m@t@@de  Tue Mar 31 16:30:53 2020
From: M@tth|@@@Koh| @end|ng |rom @t@m@t@@de (Prof. Dr. Matthias Kohl)
Date: Tue, 31 Mar 2020 16:30:53 +0200
Subject: [R] ncol() vs. length() on data.frames
In-Reply-To: <9ff89652-5e72-f7a6-c3dd-eb9c1c625841@stamats.de>
References: <a355b6f4-5bc5-6e32-ba5c-ae4993b65d08@rgzm.de>
 <20200331170009.6240febb@Tarkus>
 <1df86ec9-c3c1-3c65-160c-17b7b4d75547@rgzm.de>
 <9ff89652-5e72-f7a6-c3dd-eb9c1c625841@stamats.de>
Message-ID: <9280e189-0a6e-d184-5e49-8804639b02bf@stamats.de>

should have added: dim(x)[2L] -> length(x)

Am 31.03.20 um 16:21 schrieb Prof. Dr. Matthias Kohl:
> Dear Ivan,
> 
> if I enter ncol in the console, I get
> 
> function (x)
> dim(x)[2L]
> <bytecode: 0x5559e9429030>
> <environment: namespace:base>
> 
> indicating that function dim is called. Function dim has a method for 
> data.frame; see methods("dim").
> 
> The dim-method for data.frame is
> 
> dim.data.frame
> function (x)
> c(.row_names_info(x, 2L), length(x))
> <bytecode: 0x5559eb80da40>
> <environment: namespace:base>
> 
> Hence, it calls length on the provided data.frame. In addition, some 
> "magic" with .row_names_info is performed, where
> 
> base:::.row_names_info
> function (x, type = 1L)
> .Internal(shortRowNames(x, type))
> <bytecode: 0x5559ece50160>
> <environment: namespace:base>
> 
> Best
> Matthias
> 
> Am 31.03.20 um 16:10 schrieb Ivan Calandra:
>> Thanks Ivan for the answer.
>>
>> So it confirms my first thought that these two functions are equivalent
>> when applied to a "simple" data.frame.
>>
>> The reason I was asking is because I have gotten used to use length() in
>> my scripts. It works perfectly and I understand it easily. But to be
>> honest, ncol() is more intuitive to most users (especially the novice)
>> so I was thinking about switching to using this function instead (all my
>> data.frames are created from read.csv() or similar functions so there
>> should not be any issue). But before doing that, I want to be sure that
>> it is not going to create unexpected results.
>>
>> Thank you,
>> Ivan
>>
>> -- 
>> Dr. Ivan Calandra
>> TraCEr, laboratory for Traceology and Controlled Experiments
>> MONREPOS Archaeological Research Centre and
>> Museum for Human Behavioural Evolution
>> Schloss Monrepos
>> 56567 Neuwied, Germany
>> +49 (0) 2631 9772-243
>> https://www.researchgate.net/profile/Ivan_Calandra
>>
>> On 31/03/2020 16:00, Ivan Krylov wrote:
>>> On Tue, 31 Mar 2020 14:47:54 +0200
>>> Ivan Calandra <calandra at rgzm.de> wrote:
>>>
>>>> On a simple data.frame (i.e. each element is a vector), ncol() and
>>>> length() will give the same result.
>>>> Are they just equivalent on such objects, or are they differences in
>>>> some cases?
>>> I am not aware of any exceptions to ncol(dataframe)==length(dataframe)
>>> (in fact, ncol(x) is dim(x)[2L] and ?dim says that dim(dataframe)
>>> returns c(length(attr(dataframe, 'row.names')), length(dataframe))), but
>>> watch out for AsIs columns which can have columns of their own:
>>>
>>> x <- data.frame(I(volcano))
>>> dim(x)
>>> # [1] 87? 1
>>> length(x)
>>> # [1] 1
>>> dim(x[,1])
>>> # [1] 87 61
>>>
>>>
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 

-- 
Prof. Dr. Matthias Kohl
www.stamats.de


From c@|@ndr@ @end|ng |rom rgzm@de  Tue Mar 31 16:41:00 2020
From: c@|@ndr@ @end|ng |rom rgzm@de (Ivan Calandra)
Date: Tue, 31 Mar 2020 16:41:00 +0200
Subject: [R] ncol() vs. length() on data.frames
In-Reply-To: <9280e189-0a6e-d184-5e49-8804639b02bf@stamats.de>
References: <a355b6f4-5bc5-6e32-ba5c-ae4993b65d08@rgzm.de>
 <20200331170009.6240febb@Tarkus>
 <1df86ec9-c3c1-3c65-160c-17b7b4d75547@rgzm.de>
 <9ff89652-5e72-f7a6-c3dd-eb9c1c625841@stamats.de>
 <9280e189-0a6e-d184-5e49-8804639b02bf@stamats.de>
Message-ID: <71ff60d8-fa8b-9bed-aed9-de08948ea4b5@rgzm.de>

Thanks Matthias for the details!

Ivan

--
Dr. Ivan Calandra
TraCEr, laboratory for Traceology and Controlled Experiments
MONREPOS Archaeological Research Centre and
Museum for Human Behavioural Evolution
Schloss Monrepos
56567 Neuwied, Germany
+49 (0) 2631 9772-243
https://www.researchgate.net/profile/Ivan_Calandra

On 31/03/2020 16:30, Prof. Dr. Matthias Kohl wrote:
> should have added: dim(x)[2L] -> length(x)
>
> Am 31.03.20 um 16:21 schrieb Prof. Dr. Matthias Kohl:
>> Dear Ivan,
>>
>> if I enter ncol in the console, I get
>>
>> function (x)
>> dim(x)[2L]
>> <bytecode: 0x5559e9429030>
>> <environment: namespace:base>
>>
>> indicating that function dim is called. Function dim has a method for
>> data.frame; see methods("dim").
>>
>> The dim-method for data.frame is
>>
>> dim.data.frame
>> function (x)
>> c(.row_names_info(x, 2L), length(x))
>> <bytecode: 0x5559eb80da40>
>> <environment: namespace:base>
>>
>> Hence, it calls length on the provided data.frame. In addition, some
>> "magic" with .row_names_info is performed, where
>>
>> base:::.row_names_info
>> function (x, type = 1L)
>> .Internal(shortRowNames(x, type))
>> <bytecode: 0x5559ece50160>
>> <environment: namespace:base>
>>
>> Best
>> Matthias
>>
>> Am 31.03.20 um 16:10 schrieb Ivan Calandra:
>>> Thanks Ivan for the answer.
>>>
>>> So it confirms my first thought that these two functions are equivalent
>>> when applied to a "simple" data.frame.
>>>
>>> The reason I was asking is because I have gotten used to use
>>> length() in
>>> my scripts. It works perfectly and I understand it easily. But to be
>>> honest, ncol() is more intuitive to most users (especially the novice)
>>> so I was thinking about switching to using this function instead
>>> (all my
>>> data.frames are created from read.csv() or similar functions so there
>>> should not be any issue). But before doing that, I want to be sure that
>>> it is not going to create unexpected results.
>>>
>>> Thank you,
>>> Ivan
>>>
>>> --?
>>> Dr. Ivan Calandra
>>> TraCEr, laboratory for Traceology and Controlled Experiments
>>> MONREPOS Archaeological Research Centre and
>>> Museum for Human Behavioural Evolution
>>> Schloss Monrepos
>>> 56567 Neuwied, Germany
>>> +49 (0) 2631 9772-243
>>> https://www.researchgate.net/profile/Ivan_Calandra
>>>
>>> On 31/03/2020 16:00, Ivan Krylov wrote:
>>>> On Tue, 31 Mar 2020 14:47:54 +0200
>>>> Ivan Calandra <calandra at rgzm.de> wrote:
>>>>
>>>>> On a simple data.frame (i.e. each element is a vector), ncol() and
>>>>> length() will give the same result.
>>>>> Are they just equivalent on such objects, or are they differences in
>>>>> some cases?
>>>> I am not aware of any exceptions to ncol(dataframe)==length(dataframe)
>>>> (in fact, ncol(x) is dim(x)[2L] and ?dim says that dim(dataframe)
>>>> returns c(length(attr(dataframe, 'row.names')),
>>>> length(dataframe))), but
>>>> watch out for AsIs columns which can have columns of their own:
>>>>
>>>> x <- data.frame(I(volcano))
>>>> dim(x)
>>>> # [1] 87? 1
>>>> length(x)
>>>> # [1] 1
>>>> dim(x[,1])
>>>> # [1] 87 61
>>>>
>>>>
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>


From wjm1 @end|ng |rom c@@@co|umb|@@edu  Tue Mar 31 17:35:27 2020
From: wjm1 @end|ng |rom c@@@co|umb|@@edu (William Michels)
Date: Tue, 31 Mar 2020 08:35:27 -0700
Subject: [R] ncol() vs. length() on data.frames
In-Reply-To: <1df86ec9-c3c1-3c65-160c-17b7b4d75547@rgzm.de>
References: <a355b6f4-5bc5-6e32-ba5c-ae4993b65d08@rgzm.de>
 <20200331170009.6240febb@Tarkus>
 <1df86ec9-c3c1-3c65-160c-17b7b4d75547@rgzm.de>
Message-ID: <CAA99HCzm6ZRFVJXU223HX5VPnJ+Sokh=73JhygY_PFLD5dGZpA@mail.gmail.com>

Hi Ivan,

Like Ivan Krylov, I'm not aware of circumstances for simple dataframes
where ncol(DF) does not equal length(DF).

As I understand it, using ncol() versus length() is important when
you're examining an object returned from a function like sapply(),
since sapply() will simplify one-column dataframes to vectors. Much
has been made of this sapply() feature, but it's simple enough in your
code to test whether or not an object returned by sapply() has NULL
columns:

> dim(testDF)
[1] 14  8
> length(testDF)
[1] 8
> length(testDF[1])
[1] 1
> length(testDF[, 1])
[1] 14
>
> ncol(testDF)
[1] 8
> ncol(testDF[1])
[1] 1
> ncol(testDF[, 1])
NULL
> is.null(ncol(testDF[, 1]))
[1] TRUE
>

HTH, Bill.

W. Michels, Ph.D.






On Tue, Mar 31, 2020 at 7:11 AM Ivan Calandra <calandra at rgzm.de> wrote:
>
> Thanks Ivan for the answer.
>
> So it confirms my first thought that these two functions are equivalent
> when applied to a "simple" data.frame.
>
> The reason I was asking is because I have gotten used to use length() in
> my scripts. It works perfectly and I understand it easily. But to be
> honest, ncol() is more intuitive to most users (especially the novice)
> so I was thinking about switching to using this function instead (all my
> data.frames are created from read.csv() or similar functions so there
> should not be any issue). But before doing that, I want to be sure that
> it is not going to create unexpected results.
>
> Thank you,
> Ivan
>
> --
> Dr. Ivan Calandra
> TraCEr, laboratory for Traceology and Controlled Experiments
> MONREPOS Archaeological Research Centre and
> Museum for Human Behavioural Evolution
> Schloss Monrepos
> 56567 Neuwied, Germany
> +49 (0) 2631 9772-243
> https://www.researchgate.net/profile/Ivan_Calandra
>
> On 31/03/2020 16:00, Ivan Krylov wrote:
> > On Tue, 31 Mar 2020 14:47:54 +0200
> > Ivan Calandra <calandra at rgzm.de> wrote:
> >
> >> On a simple data.frame (i.e. each element is a vector), ncol() and
> >> length() will give the same result.
> >> Are they just equivalent on such objects, or are they differences in
> >> some cases?
> > I am not aware of any exceptions to ncol(dataframe)==length(dataframe)
> > (in fact, ncol(x) is dim(x)[2L] and ?dim says that dim(dataframe)
> > returns c(length(attr(dataframe, 'row.names')), length(dataframe))), but
> > watch out for AsIs columns which can have columns of their own:
> >
> > x <- data.frame(I(volcano))
> > dim(x)
> > # [1] 87  1
> > length(x)
> > # [1] 1
> > dim(x[,1])
> > # [1] 87 61
> >
> >
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jen@r|| @end|ng |rom @tudent@|ko@@u|o@no  Tue Mar 31 05:42:55 2020
From: jen@r|| @end|ng |rom @tudent@|ko@@u|o@no (Rasmus Liland)
Date: Tue, 31 Mar 2020 05:42:55 +0200
Subject: [R] How to match strings in two files and replace strings?
In-Reply-To: <CAF9-5jPaBP94dRWmo2TrXW1x8Qg=iDtxttgDv4fP5wFWJBF7=Q@mail.gmail.com>
References: <CAF9-5jOTxXFB81PLfqS_w9=Jx5yy_bMHkrUQDFvhmKphAP303g@mail.gmail.com>
 <CA+8X3fWDycMX8yCMKeiFbKP+jG=EOK8SEUUekEVRsy=1RgjBAg@mail.gmail.com>
 <CAF9-5jPaBP94dRWmo2TrXW1x8Qg=iDtxttgDv4fP5wFWJBF7=Q@mail.gmail.com>
Message-ID: <20200331034255.GC498099@jrl.uk.to>

On 2020-03-30 21:43 -0500, Ana Marija wrote:
> I did run your workflow and this is what I got:
> 
> > newout<-merge(output11.frq,marker_info[,c("V5","match_col")],by="match_col")
> Error in `[.data.frame`(marker_info, , c("V5", "match_col")) :
>   undefined columns selected
> 
> this is how marker-info looks like:

Hi Ana,

perhaps adding comment.char="#" as an argument to read.csv might 
help?

Making the output11.frq$match_col column might perhaps be easier
using gsub, have a look:

marker_info <- "#Column Description:
#Column is separated by ','.
#Chr:   Chromosome on NCBI reference genome.
#Pos:   chromosome position when snp has unique hit on reference genome. Otherwise this field is NULL.
#Submitter_snp_name:    The string identifier of snp on the platform.  This is the dbSNP local_snp_id.
#Ss#:   dbSNP submitted snp Id. Each snp sequence on the platform gets a unique ss#.
#Rs#:   refSNP cluster accession. Rs# for the dbSNP refSNP cluster that the sequence for this ss# maps to.
#Genome_build_id:       Genome build used to map the SNP (a string)
#ALLELE1_genome_orient: genome orientation allele1, same as which genotypes are reported.
#ALLELE2_genome_orient: genome orientation allele2, same as which genotypes are reported.
#ALLELE1_orig_assay_orient:     original reported orientation for the SNP assay, will correspond to CEL files and the ss_id.
#ALLELE2_orig_assay_orient:     original reported orientation for the SNP assay, will correspond to CEL files and the ss_id.
#QC_TYPE:       A-autosomal and P-pseudo-autosomal; X: X-linked; Y-Y-linked;NA-disable QC for this snp.
#SNP_flank_sequence:    snp sequence on the reference genome orientation. 40bp on each side of variation.
#SOURCE:         Platform specific string identifying assay (e.g. HBA_CHIP)
#Ss2rs_orientation:     ss to rs orientation. +: same; -: opposite strand.
#Rs2genome_orienation:  Orientation of rs flanking sequence to reference genome. +: same orientation, -: opposite.
#Orien_flipped_assay_to_genome: y/n: this column would be the value of the exclusive OR from ss2rs_orientation  XOR rs2genome_orientation.
#Probe_id:       NCBI probe_id.
#neighbor_snp_list:     List of neighbor snp and position within 40kb up/downstream.
#dbSNP_build_id:        dbSNP build id.
#study_id:      unique id with prefix: phs.
#
# Chr,Pos,Submitter_snp_name,Ss#,Rs#,Genome_build_id,ALLELE1_genome_orient,ALLELE2_genome_orient,ALLELE1_orig_assay_orient,ALLELE2_orig_assay_orient,QC_TYPE,SNP_flank_sequence,SOURCE,Ss2rs_orientation,Rs2genome_orienation,Orien_flipped_assay_to_genome,Probe_id,neighbor_snp_list,dbSNP_build_id,study_id
1,742429,SNP_A-1909444,ss66079302,rs3094315,36.2,G,A,C,T,A,GCACAGCAAGAGAAAC[A/G]TTTGACAGAGAATACA,Sty,+,-,y,,,127,phs000018
1,769185,SNP_A-4303947,ss66273559,rs4040617,36.2,A,G,A,G,A,GCTGTGAGAGAGAACA[A/G]TGTCCCAATTTTGCCC,Sty,+,+,n,,,127,phs000018
1,775852,SNP_A-1886933,ss66317030,rs2980300,36.2,T,C,A,G,A,GAATGACTGTGTCTCT[C/T]TGAGTTAGTGAAGTCA,Nsp,-,+,y,,,127,phs000018
"
marker_info <-
  read.csv(text=marker_info,
    header=FALSE,
    stringsAsFactors=FALSE,
    comment.char="#")

output11.frq <-
"CHR  SNP A1 A2  MAF  NCHROBS
1      1:775852:T:C    T    C       0.1707     3444
1     1:1120590:A:C    C    A      0.08753     3496
1     1:1145994:T:C    C    T       0.1765     3496
1     1:1148494:A:G    A    G       0.1059     3464
1     1:1201155:C:T    T    C      0.07923     3496"
output11.frq <- 
  read.table(text=output11.frq, header=TRUE,
    stringsAsFactors=FALSE)

output11.frq$match_col <-
  gsub("^([0-9]+):([0-9]+).*", "\\1:\\2",
       output11.frq$SNP)

marker_info$match_col <-
  apply(marker_info[,1:2], 1, paste,
        collapse=":")

merge(x=output11.frq,
      y=marker_info[,c("V5", "match_col")],
      by="match_col")


Regards,
Rasmus


From jen@r|| @end|ng |rom @tudent@|ko@@u|o@no  Tue Mar 31 07:37:40 2020
From: jen@r|| @end|ng |rom @tudent@|ko@@u|o@no (Rasmus Liland)
Date: Tue, 31 Mar 2020 07:37:40 +0200
Subject: [R] Mapping of countries
In-Reply-To: <CAGsroM29gXKXRNURDAmzotgnMtDLqAZgGoc66iuoJ4zBcmNm0A@mail.gmail.com>
References: <CAGsroM29gXKXRNURDAmzotgnMtDLqAZgGoc66iuoJ4zBcmNm0A@mail.gmail.com>
Message-ID: <20200331053740.GA1504@jrl.uk.to>

On 2020-03-31 03:38 +0200, george brida wrote:
> i would like to plot the maps of the Gulf Cooperation Council (GCC)
> countries (KSA, Qatar, Bahrain, Kuwait, UAE and Oman) with these
> constraints: i/ KSA , Qatar and Bahrain have the same face color , ii/
> Kuweit and UAE with the same face color and iii/Oman  with another face
> color.

Hi!  Perhaps by using rnaturalearth, sf, and ggplot2:

world <- rnaturalearth::ne_countries(
  scale = "medium",
  returnclass = "sf")
grp1 <- c("Saudi Arabia", "Qatar", "Bahrain")
grp2 <- c("Kuwait", "United Arab Emirates")
grp3 <- c("Oman")
world$GCC <- rep(NA, length(world$name))
idx <- world$name %in% c(grp1, grp2, grp3)
world$GCC[idx] <- world$name[idx]
world$GCC
world$CountryGroup <- rep(NA, length(world$name))
world$CountryGroup[world$name %in% grp1] <- "i/ KSA, Qatar and Bahrain"
world$CountryGroup[world$name %in% grp2] <- "ii/ Kuwait and UAE"
world$CountryGroup[world$name %in% grp3] <- "iii/ Oman"
names(world)
world <- cbind(world, sf::st_coordinates(sf::st_centroid(world$geometry)))
ggplot2::ggplot(data = world) +
  ggplot2::theme_bw() +
  ggplot2::geom_sf() +
  ggplot2::geom_sf(fill = NA, color = gray(.5)) +
  ggplot2::geom_sf(ggplot2::aes(fill=CountryGroup)) +
#  ggrepel::geom_text_repel(ggplot2::aes(x=X, y=Y, label=GCC)) +
#  ggplot2::geom_sf(ggplot2::aes(fill=CountryGroup, label=CountryGroup)) +
ggplot2::coord_sf(xlim = c(32, 61),
  ylim = c(10, 33),
  expand = FALSE) +
ggplot2::xlab("Longitude") +
ggplot2::ylab("Latitude") +
  ggplot2::ggtitle("Gulf Cooperation Council (GCC)")


Regards,
Rasmus


From dw|n@em|u@ @end|ng |rom comc@@t@net  Tue Mar 31 18:23:21 2020
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Tue, 31 Mar 2020 09:23:21 -0700
Subject: [R] Mapping of countries
In-Reply-To: <CAGsroM3Hxq9xx-YgLqpOsE9fY2dAvPfNQmOWwDKigCd3TZOdRQ@mail.gmail.com>
References: <CAGsroM29gXKXRNURDAmzotgnMtDLqAZgGoc66iuoJ4zBcmNm0A@mail.gmail.com>
 <CA+8X3fXDjKjCyceJUyJPkgQnmVbEzNFLuqJCPsyDbRwYEM8hGA@mail.gmail.com>
 <CAGsroM1hppxCmg3xfmdsWGP=XvEHjyVAaHAboOwF=FcyhrZzeg@mail.gmail.com>
 <CAGsroM3Hxq9xx-YgLqpOsE9fY2dAvPfNQmOWwDKigCd3TZOdRQ@mail.gmail.com>
Message-ID: <8aeb3e40-d666-ccc9-3e32-38b64106717c@comcast.net>


On 3/31/20 6:49 AM, george brida wrote:
> Dear Jim,
>
> Is it possible to add also a title to this map?
>
> Many thanks


When I look at the? ?map help page, I see all these questions answered 
in the Examples section.


-- 

David

>
>
>
> On Tue, Mar 31, 2020 at 2:29 PM george brida <george.brida at gmail.com> wrote:
>
>> Dear Jim,
>>
>> Thank you very much. I obtained now the required map. I would like to know
>> how to add the names of the countries.
>>
>> Best
>> George
>>
>> On Tue, Mar 31, 2020 at 10:10 AM Jim Lemon <drjimlemon at gmail.com> wrote:
>>
>>> Hi George,
>>> Try this:
>>>
>>> library(maps)
>>> map("world",xlim=c(34.353,60.369),ylim=c(16.7,32.193),
>>>   regions="Saudi Arabia",col="yellow",fill=TRUE)
>>> map("world",regions="Bahrain",col="yellow",fill=TRUE,add=TRUE)
>>> map("world",regions="Kuwait",col="lightblue",fill=TRUE,add=TRUE)
>>> map("world",regions="Qatar",col="yellow",fill=TRUE,add=TRUE)
>>> map("world",regions="United Arab
>>> Emirates",col="lightblue",fill=TRUE,add=TRUE)
>>> map("world",regions="Oman",col="lightgreen",fill=TRUE,add=TRUE)
>>>
>>> Jim
>>>
>>> On Tue, Mar 31, 2020 at 12:39 PM george brida <george.brida at gmail.com>
>>> wrote:
>>>> Dear R users,
>>>>
>>>> i would like to plot the maps of the Gulf Cooperation Council (GCC)
>>>> countries (KSA, Qatar, Bahrain, Kuwait, UAE and Oman) with these
>>>> constraints: i/ KSA , Qatar and Bahrain have the same face color , ii/
>>>> Kuweit and UAE with the same face color and iii/Oman  with another face
>>>> color. Is there any code in R doing this task.
>>>>
>>>> Many thanks.
>>>>
>>>>          [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


