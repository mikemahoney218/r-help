From ev@@|eun|@@en @end|ng |rom gm@||@com  Tue Nov  1 20:50:56 2022
From: ev@@|eun|@@en @end|ng |rom gm@||@com (Eva Maria Leunissen)
Date: Wed, 2 Nov 2022 08:50:56 +1300
Subject: [R] Unsubscribe from mailing list please
Message-ID: <CAFSxBJ7hU_6kD3rRpNKxUJSK-TEb-BR7FktoMgiTeQhUhCdP5w@mail.gmail.com>

Hi,

Could I please unsubscribe from the R-help mailing list?

Thanks

Eva

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Nov  1 20:53:47 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 1 Nov 2022 12:53:47 -0700
Subject: [R] Unsubscribe from mailing list please
In-Reply-To: <CAFSxBJ7hU_6kD3rRpNKxUJSK-TEb-BR7FktoMgiTeQhUhCdP5w@mail.gmail.com>
References: <CAFSxBJ7hU_6kD3rRpNKxUJSK-TEb-BR7FktoMgiTeQhUhCdP5w@mail.gmail.com>
Message-ID: <CAGxFJbRyCUAeTSstTfXQ-WNOCp7j24ciC22ydqq8=n0CFK1k8Q@mail.gmail.com>

Follow the instructions in the UNSUBSCRIBE link below to unsubscribe.
-- Bert

On Tue, Nov 1, 2022 at 12:51 PM Eva Maria Leunissen <eva.leunissen at gmail.com>
wrote:

> Hi,
>
> Could I please unsubscribe from the R-help mailing list?
>
> Thanks
>
> Eva
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Tue Nov  1 20:55:53 2022
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Wed, 2 Nov 2022 06:55:53 +1100
Subject: [R] Unsubscribe from mailing list please
In-Reply-To: <CAFSxBJ7hU_6kD3rRpNKxUJSK-TEb-BR7FktoMgiTeQhUhCdP5w@mail.gmail.com>
References: <CAFSxBJ7hU_6kD3rRpNKxUJSK-TEb-BR7FktoMgiTeQhUhCdP5w@mail.gmail.com>
Message-ID: <CA+8X3fXWhb-gA1Bf0F9YoYh_xNLX0-iY-cF0SdkvFDzxJvDrBw@mail.gmail.com>

Hi Eva,
As it says in the footer, go here:

https://stat.ethz.ch/mailman/listinfo/r-help

Jim

On Wed, Nov 2, 2022 at 6:51 AM Eva Maria Leunissen
<eva.leunissen at gmail.com> wrote:
>
> Hi,
>
> Could I please unsubscribe from the R-help mailing list?
>
> Thanks
>
> Eva
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From deep@y@n@@@rk@r @end|ng |rom gm@||@com  Wed Nov  2 08:48:22 2022
From: deep@y@n@@@rk@r @end|ng |rom gm@||@com (Deepayan Sarkar)
Date: Wed, 2 Nov 2022 13:18:22 +0530
Subject: [R] pairwise.var.test
In-Reply-To: <1072047486.2250763.1667174402828@mail.yahoo.com>
References: <2106973898.2175278.1667158279204.ref@mail.yahoo.com>
 <2106973898.2175278.1667158279204@mail.yahoo.com>
 <CA+8X3fW18ikb5aXkLC5HrFZo5N93sG=OmdM3i940Nr+3wsgvGA@mail.gmail.com>
 <b1a0082d-8d00-24e4-11a7-3f13572660ce@sapo.pt>
 <1072047486.2250763.1667174402828@mail.yahoo.com>
Message-ID: <CADfFDC6htyoPMaW2c0O+No4XfBhgbSczyEBfnmT9pMJ1qoXjCw@mail.gmail.com>

On Mon, Oct 31, 2022 at 5:30 AM Thomas Subia via R-help
<r-help at r-project.org> wrote:
>
> Colleagues,
>
> Thank you all for the timely suggestions. That is appreciated.
>
> What I am really looking for a way to identify difference in group level variance by using multiple comparison intervals. Minitab displays those results in a graph.
>
> This method is described in:
> https://support.minitab.com/en-us/minitab/20/media/pdfs/translate/Multiple_Comparisons_Method_Test_for_Equal_Variances.pdf
>
> I was hoping that R had something similar.

Perhaps you are looking for something like the plot produced by

example(TukeyHSD)

For this you would need confidence intervals for each pairwise
comparison, not just the p-values. Once you have those, recreating the
plot should not be difficult, but I don't know if there is any package
that already does this for you. E.g., car::leveneTest() etc. are
designed for multiple groups and won't give you confidence intervals.

Best,
-Deepayan

>
> I tried a Google search on this but to no avail.
>
> Thomas Subia
>
>
>
>
>
>
> On Sunday, October 30, 2022 at 03:44:54 PM PDT, Rui Barradas <ruipbarradas at sapo.pt> wrote:
>
>
>
>
>
> ?s 21:47 de 30/10/2022, Jim Lemon escreveu:
> > Hi Thomas,
> > I have assumed the format of your p-value matrix. This may require
> > some adjustment.
> >
> >    A          B          C        D          E          F
> > A 1          0.7464    0.0187    0.0865      0.0122      0.4693
> > B 0.7464    1          0.0358    0.1502      0.0173      0.3240
> > C 0.0187    0.0358    1        0.5131      0.7185      0.0050
> > D 0.0865    0.1502    0.5131    1          0.3240      0.0173
> > E 0.0122    0.0173    0.7185    0.3240      1          0.0029
> > F 0.4693    0.3240    0.0050    0.0173      0.0029      1
> >
> > pvar.mat<-as.matrix(read.table(text=
> >  "1          0.7464    0.0187    0.0865      0.0122      0.4693
> >  0.7464    1          0.0358    0.1502      0.0173      0.3240
> >  0.0187    0.0358    1        0.5131      0.7185      0.0050
> >  0.0865    0.1502    0.5131    1          0.3240      0.0173
> >  0.0122    0.0173    0.7185    0.3240      1          0.0029
> >  0.4693    0.3240    0.0050    0.0173      0.0029      1",
> >  stringsAsFactors=FALSE))
> > rownames(pvar.mat)<-colnames(pvar.mat)<-LETTERS[1:6]
> > pvar.col<-matrix(NA,nrow=6,ncol=6)
> > pvar.col[pvar.mat < 1]<-"red"
> > pvar.col[pvar.mat < 0.05]<-"orange"
> > pvar.col[pvar.mat < 0.01]<-"green"
> > library(plotrix)
> > par(mar=c(6,4,4,2))
> > color2D.matplot(pvar.mat,cellcolors=pvar.col,
> >  main="P-values for matrix",axes=FALSE)
> > axis(1,at=seq(0.5,5.5,by=1),labels=LETTERS[1:6])
> > axis(2,at=seq(0.5,5.5,by=1),labels=rev(LETTERS[1:6]))
> > color.legend(0,-1.3,2.5,-0.7,c("NA","NS","<0.05","<0.01"),
> >  rect.col=c(NA,"red","orange","green"))
> >
> > Jim
> >
> > On Mon, Oct 31, 2022 at 6:34 AM Thomas Subia via R-help
> > <r-help at r-project.org> wrote:
> >>
> >> Colleagues,
> >>
> >> The RVAideMemoire package has a pairwise variance test which one can use to identify variance differences between group levels.
> >>
> >> Using the example from this package, pairwise.var.test(InsectSprays$count,InsectSprays$spray), we get this output:
> >>
> >>      Pairwise comparisons using F tests to compare two variances
> >>
> >> data:  InsectSprays$count and InsectSprays$spray
> >>
> >>    A              B            C            D            E
> >> B 0.7464    -              -              -              -
> >> C 0.0187    0.0358    -      -      -
> >> D 0.0865    0.1502    0.5131    -            -
> >> E 0.0122    0.0173    0.7185    0.3240    -
> >> F 0.4693    0.3240    0.0050    0.0173    0.0029
> >>
> >> P value adjustment method: fdr
> >>
> >> Is there a way to graph the pairwise variance differences so that users can easily identify the statistically significant variance differences between group levels?
> >>
> >> I can do this using Minitab but I'd prefer using R for this.
> >>
> >> Thomas Subia
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
>
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
>
> Hello,
>
> With Jim's data creation code, here is a ggplot graph.
>
> First coerce to data.frame, then reshape to long format.
> Now bin the p-values with the cutpoints 0.01, 0.05 and 1. This is dne
> with ?findInterval.
>
> The colors are assigned in the plot code, based on the binned p.values
> above.
>
>
> library(ggplot2)
>
> pvar.mat |> as.data.frame() -> pvar.df
> pvar.df$id <- row.names(pvar.df)
>
> pvar.df |> tidyr::pivot_longer(-id, values_to = "p.value") -> pvar.long
> i <- findInterval(pvar.long$p.value, c(0, 0.01, 0.05, 1))
> pvar.long$p.value <- c("<0.01", "<0.05", "NS", "NA")[i]
> clrs <- setNames(c("green", "blue", "lightgrey", "white"),
>                   c("<0.01", "<0.05", "NS", "NA"))
>
> ggplot(pvar.long, aes(id, name, fill = p.value)) +
>   geom_tile() +
>   scale_y_discrete(limits = rev) +
>   scale_fill_manual(values = clrs) +
>   theme_bw()
>
>
> Hope this helps,
>
> Rui Barradas
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From kry|ov@r00t @end|ng |rom gm@||@com  Fri Nov  4 08:40:00 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Fri, 4 Nov 2022 10:40:00 +0300
Subject: [R] R-package imputeTS / warning messages
In-Reply-To: <a50e3024-bebe-1648-3a96-7c425ca7cc09@infolink.com.br>
References: <a50e3024-bebe-1648-3a96-7c425ca7cc09@infolink.com.br>
Message-ID: <20221104104000.68dd9310@Tarkus>

Dear Paulo Barata,

On Wed, 26 Oct 2022 11:27:54 -0300
Paulo Barata <pb at infolink.com.br> wrote:

> In stats::StructTS(data, ...) :
>    possible convergence problem: 'optim' gave code = 52 and message
> ?ERROR: ABNORMAL_TERMINATION_IN_LNSRCH?
> 
> The function StructTS is called by the function na_kalman of the 
> imputeTS package.

Since you're not getting replies here, it might help to contact
maintainer('imputeTS').

I think that ABNORMAL_TERMINATION_IN_LNSRCH happens when the line
search part of the L-BFGS-B algorithm determines that the directional
derivative of the function being optimised along the direction of the
previous step turns out to be positive, meaning that the step direction
was bad in the first place. There may be many reasons for this to
happen.

It might also help to look at the optimisation process by passing the
optim.control = list(trace = 3) argument (available levels are 1 to 6,
with 6 being very verbose).

-- 
Best regards,
Ivan


From @@ch@ndh|@| @end|ng |rom bt|nternet@com  Thu Nov  3 20:08:27 2022
From: @@ch@ndh|@| @end|ng |rom bt|nternet@com (Amarjit Chandhial)
Date: Thu, 3 Nov 2022 19:08:27 +0000 (GMT)
Subject: [R] Associate a .R file with the RGui
Message-ID: <3095309c.153f5.1843ee50418.Webtop.109@btinternet.com>


Hi,


My OS is Windows 11 Pro 64-Bit, I have R 4.2.2 and RStudio installed.

If I double-click on a .R file in File Explorer the OS gives me the 
option of opening the .R in RStudio, or Look for an app in the Microsoft 
Store, or More Apps. Similarly with a right-click.

I would like to associate a .R file with the RGui, not RStudio, thus 
when I double-click on a .R file in File Explorer the .R file opens in 
the R Editor in RGui.

On my PC R 4.2.2 is located in "C:/Program Files/R/R-4.2.2/etc"

Please can someone provide step-by-step instructions on how to 
associate?


thanks,
Amarjit

	[[alternative HTML version deleted]]


From @kw@|mmo @end|ng |rom gm@||@com  Fri Nov  4 10:08:50 2022
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Fri, 4 Nov 2022 05:08:50 -0400
Subject: [R] Associate a .R file with the RGui
In-Reply-To: <3095309c.153f5.1843ee50418.Webtop.109@btinternet.com>
References: <3095309c.153f5.1843ee50418.Webtop.109@btinternet.com>
Message-ID: <CAPcHnpRXz6vgf9M93quk48pudJ+9ntb-2hiTryE3itrB80X-ow@mail.gmail.com>

In an R session, run this:

writeLines(normalizePath(R.home("bin")))

Right click your .R file > Open with > Choose another app > Check the box
"Always use this app to open .R files" > Look for another app on this PC
Paste the directory found above, then select "Rgui.exe"

On Fri, Nov 4, 2022, 04:49 Amarjit Chandhial via R-help <
r-help at r-project.org> wrote:

>
> Hi,
>
>
> My OS is Windows 11 Pro 64-Bit, I have R 4.2.2 and RStudio installed.
>
> If I double-click on a .R file in File Explorer the OS gives me the
> option of opening the .R in RStudio, or Look for an app in the Microsoft
> Store, or More Apps. Similarly with a right-click.
>
> I would like to associate a .R file with the RGui, not RStudio, thus
> when I double-click on a .R file in File Explorer the .R file opens in
> the R Editor in RGui.
>
> On my PC R 4.2.2 is located in "C:/Program Files/R/R-4.2.2/etc"
>
> Please can someone provide step-by-step instructions on how to
> associate?
>
>
> thanks,
> Amarjit
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From petr@p|k@| @end|ng |rom prechez@@cz  Fri Nov  4 12:28:47 2022
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Fri, 4 Nov 2022 11:28:47 +0000
Subject: [R] Associate a .R file with the RGui
In-Reply-To: <CAPcHnpRXz6vgf9M93quk48pudJ+9ntb-2hiTryE3itrB80X-ow@mail.gmail.com>
References: <3095309c.153f5.1843ee50418.Webtop.109@btinternet.com>
 <CAPcHnpRXz6vgf9M93quk48pudJ+9ntb-2hiTryE3itrB80X-ow@mail.gmail.com>
Message-ID: <29273f33bf3a48bf924134053aacc871@SRVEXCHCM1302.precheza.cz>

Hi 

another option is to use SendTo folder. This was easy to find in older
Windows versions. Now the easiest way is:

Press the Windows Key + R to trigger the Run window. At the Open field in
the window, type shell:SendTo and then click OK

And SendTo folder should open.

You can then add link to any application here so add RGui link

After that, rightclick on file .RData file and menu with option SendTo opens
with RGui one of the options.

I learned it before ages and it is quite usefull not only in this case.

Here is link to another explanation.

https://www.pcmag.com/how-to/how-to-customize-the-send-to-menu-in-windows

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Andrew Simmons
> Sent: Friday, November 4, 2022 10:09 AM
> To: Amarjit Chandhial <a.chandhial at btinternet.com>
> Cc: R-help Mailing List <r-help at r-project.org>
> Subject: Re: [R] Associate a .R file with the RGui
> 
> In an R session, run this:
> 
> writeLines(normalizePath(R.home("bin")))
> 
> Right click your .R file > Open with > Choose another app > Check the box
> "Always use this app to open .R files" > Look for another app on this PC
Paste
> the directory found above, then select "Rgui.exe"
> 
> On Fri, Nov 4, 2022, 04:49 Amarjit Chandhial via R-help < r-help at r-
> project.org> wrote:
> 
> >
> > Hi,
> >
> >
> > My OS is Windows 11 Pro 64-Bit, I have R 4.2.2 and RStudio installed.
> >
> > If I double-click on a .R file in File Explorer the OS gives me the
> > option of opening the .R in RStudio, or Look for an app in the
> > Microsoft Store, or More Apps. Similarly with a right-click.
> >
> > I would like to associate a .R file with the RGui, not RStudio, thus
> > when I double-click on a .R file in File Explorer the .R file opens in
> > the R Editor in RGui.
> >
> > On my PC R 4.2.2 is located in "C:/Program Files/R/R-4.2.2/etc"
> >
> > Please can someone provide step-by-step instructions on how to
> > associate?
> >
> >
> > thanks,
> > Amarjit
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

From petr@p|k@| @end|ng |rom prechez@@cz  Fri Nov  4 13:19:09 2022
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Fri, 4 Nov 2022 12:19:09 +0000
Subject: [R] data frame returned from sapply but vector expected
Message-ID: <eba27eb500454f08b5d7c647f3c4cb64@SRVEXCHCM1302.precheza.cz>

Hallo all

 

I found a strange problem for coding if part of list is NULL. 

In this case, sapply result is ***list of data frames*** but if there is no
NULL leaf, the result is ***list of vectors***. 

I tried simplify option but it did not help me neither I found anything in
help page. 

 

The code is part of bigger project where I fill list by reading in data and
if it fails, the leaf is set to NULL. Then the the boxplot is created simply
by

boxplot(sapply(mylist2, "[", "b")) and the user is asked to select if values
should be rbinded or not.

 

Is it possible to perform some *apply without getting data frame as result
in case NULL leaf?

 

Here is an example (without boxplot)

 

df1 <- data.frame(a=rnorm(5), b=runif(5), c=rlnorm(5))

df2 <- data.frame(a=rnorm(5), b=runif(5), c=rlnorm(5))

mylist1 <- list(df1,df2, df3)

mylist2 <- list(NULL,df2, df3)

> str(sapply(mylist1, "[", "b"))

List of 3

$ b: num [1:5] 0.387 0.69 0.876 0.836 0.819

$ b: num [1:5] 0.01733 0.46055 0.19421 0.11609 0.00789

$ b: num [1:5] 0.593 0.478 0.299 0.185 0.847

> str(sapply(mylist2, "[", "b"))

List of 3

$ : NULL

$ :'data.frame':       5 obs. of  1 variable:

  ..$ b: num [1:5] 0.01733 0.46055 0.19421 0.11609 0.00789

$ :'data.frame':       5 obs. of  1 variable:

  ..$ b: num [1:5] 0.593 0.478 0.299 0.185 0.847

 

S pozdravem | Best Regards

RNDr. Petr PIKAL
Vedouc? V?zkumu a v?voje | Research Manager

PRECHEZA a.s.
n?b?. Dr. Edvarda Bene?e 1170/24 | 750 02 P?erov | Czech Republic
Tel: +420 581 252 256 | GSM: +420 724 008 364
 <mailto:petr.pikal at precheza.cz> petr.pikal at precheza.cz |
<https://www.precheza.cz/> www.precheza.cz

Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch
partner? PRECHEZA a.s. jsou zve?ejn?ny na:
<https://www.precheza.cz/zasady-ochrany-osobnich-udaju/>
https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information about
processing and protection of business partner's personal data are available
on website:
<https://www.precheza.cz/en/personal-data-protection-principles/>
https://www.precheza.cz/en/personal-data-protection-principles/

D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn?
a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti:
<https://www.precheza.cz/01-dovetek/> https://www.precheza.cz/01-dovetek/ |
This email and any documents attached to it may be confidential and are
subject to the legally binding disclaimer:
<https://www.precheza.cz/en/01-disclaimer/>
https://www.precheza.cz/en/01-disclaimer/

 


From kry|ov@r00t @end|ng |rom gm@||@com  Fri Nov  4 13:30:27 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Fri, 4 Nov 2022 15:30:27 +0300
Subject: [R] data frame returned from sapply but vector expected
In-Reply-To: <eba27eb500454f08b5d7c647f3c4cb64@SRVEXCHCM1302.precheza.cz>
References: <eba27eb500454f08b5d7c647f3c4cb64@SRVEXCHCM1302.precheza.cz>
Message-ID: <20221104153027.58376688@Tarkus>

On Fri, 4 Nov 2022 12:19:09 +0000
PIKAL Petr <petr.pikal at precheza.cz> wrote:

> > str(sapply(mylist2, "[", "b"))  
> 
> List of 3
> 
> $ : NULL
> 
> $ :'data.frame':       5 obs. of  1 variable:
> 
>   ..$ b: num [1:5] 0.01733 0.46055 0.19421 0.11609 0.00789
> 
> $ :'data.frame':       5 obs. of  1 variable:
> 
>   ..$ b: num [1:5] 0.593 0.478 0.299 0.185 0.847

Is sapply(mylist2, `[[`, 'b') closer to what you'd like to see, i.e. a
list of vectors or NULLs?

-- 
Best regards,
Ivan


From kry|ov@r00t @end|ng |rom gm@||@com  Fri Nov  4 13:36:46 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Fri, 4 Nov 2022 15:36:46 +0300
Subject: [R] data frame returned from sapply but vector expected
In-Reply-To: <20221104153027.58376688@Tarkus>
References: <eba27eb500454f08b5d7c647f3c4cb64@SRVEXCHCM1302.precheza.cz>
 <20221104153027.58376688@Tarkus>
Message-ID: <20221104153646.54abd951@Tarkus>

On Fri, 4 Nov 2022 15:30:27 +0300
Ivan Krylov <krylov.r00t at gmail.com> wrote:

> sapply(mylist2, `[[`, 'b')

Wait, that would simplify the return value into a matrix when there are
no NULLs. But lapply(mylist2, `[[`, 'b') should work in both cases,
which in my opinion goes to show the dangers of using simplifying
functions in to-be-library code.

Sorry for the double-post!

-- 
Best regards,
Ivan


From petr@p|k@| @end|ng |rom prechez@@cz  Fri Nov  4 13:57:04 2022
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Fri, 4 Nov 2022 12:57:04 +0000
Subject: [R] data frame returned from sapply but vector expected
In-Reply-To: <20221104153646.54abd951@Tarkus>
References: <eba27eb500454f08b5d7c647f3c4cb64@SRVEXCHCM1302.precheza.cz>
 <20221104153027.58376688@Tarkus> <20221104153646.54abd951@Tarkus>
Message-ID: <991e2310edb8478ebdc4e570330fbf0c@SRVEXCHCM1302.precheza.cz>

Hallo Ivan

Thanks, yes it seems to be working. I thought also removing NULL by

mylist2[sapply(mylist2, is.null)] <- NULL

but your approach is probably better (in any case simpler)

Thanks again.

Petr

> -----Original Message-----
> From: Ivan Krylov <krylov.r00t at gmail.com>
> Sent: Friday, November 4, 2022 1:37 PM
> To: PIKAL Petr <petr.pikal at precheza.cz>
> Cc: R-help Mailing List <r-help at r-project.org>
> Subject: Re: [R] data frame returned from sapply but vector expected
> 
> On Fri, 4 Nov 2022 15:30:27 +0300
> Ivan Krylov <krylov.r00t at gmail.com> wrote:
> 
> > sapply(mylist2, `[[`, 'b')
> 
> Wait, that would simplify the return value into a matrix when there are no
> NULLs. But lapply(mylist2, `[[`, 'b') should work in both cases, which in
my
> opinion goes to show the dangers of using simplifying functions in
to-be-library
> code.
> 
> Sorry for the double-post!
> 
> --
> Best regards,
> Ivan

From @k@h@y_e4 @end|ng |rom hotm@||@com  Fri Nov  4 20:35:11 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Fri, 4 Nov 2022 19:35:11 +0000
Subject: [R] on parallel processing...
Message-ID: <PU4P216MB1568536BCB9BF18690898F1BC83B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear members,
                              I want to send the same function with different arguments to different processors. This solution was provided in Stack Overflow https://stackoverflow.com/questions/25045998/send-function-calls-with-different-arguments-to-different-processors-in-r-using
[https://cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon at 2.png?v=73d79a89bded]<https://stackoverflow.com/questions/25045998/send-function-calls-with-different-arguments-to-different-processors-in-r-using>
Send function calls with different arguments to different processors in R using parallel package - Stack Overflow<https://stackoverflow.com/questions/25045998/send-function-calls-with-different-arguments-to-different-processors-in-r-using>
Teams. Q&A for work. Connect and share knowledge within a single location that is structured and easy to search. Learn more about Teams
stackoverflow.com
I have a 48 core processor. My question is, how do i loop through the cores without explicitly mentioning the core numbers?
Will this work?



library(parallel)
cl <- makeCluster(4)
clusterExport(cl, "foo")
cores <- seq_along(cl)
r <- clusterApply(cl[cores], cores, function(core) {

  for(i in 1:48) {

      if (core ==i) {

        foo( x[i] )

}
}
})

Many thanks in advance......

Thanking you,
Your sincerely,
AKSHAY M KULKARNI

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Nov  4 20:54:10 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Fri, 04 Nov 2022 12:54:10 -0700
Subject: [R] on parallel processing...
In-Reply-To: <PU4P216MB1568536BCB9BF18690898F1BC83B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB1568536BCB9BF18690898F1BC83B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <2358A5EA-B207-4A02-97DF-2AB97962CF3B@dcn.davis.ca.us>

You don't specify processors. Just invoke the worker functions with the relevant packages and they will be allocated according to how you defined the cluster object... typically automatically. Processors are usually specified (to the cluster object) according to IP address. Cores within the processors are allocated according to how many processes are created.

Maybe you should read some documentation (vignettes), and/or look into R-sig-hpc (https://stat.ethz.ch/mailman/listinfo/r-sig-hpc). This is probably not the best place to pursue this.

On November 4, 2022 12:35:11 PM PDT, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>Dear members,
>                              I want to send the same function with different arguments to different processors. This solution was provided in Stack Overflow https://stackoverflow.com/questions/25045998/send-function-calls-with-different-arguments-to-different-processors-in-r-using
>[https://cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon at 2.png?v=73d79a89bded]<https://stackoverflow.com/questions/25045998/send-function-calls-with-different-arguments-to-different-processors-in-r-using>
>Send function calls with different arguments to different processors in R using parallel package - Stack Overflow<https://stackoverflow.com/questions/25045998/send-function-calls-with-different-arguments-to-different-processors-in-r-using>
>Teams. Q&A for work. Connect and share knowledge within a single location that is structured and easy to search. Learn more about Teams
>stackoverflow.com
>I have a 48 core processor. My question is, how do i loop through the cores without explicitly mentioning the core numbers?
>Will this work?
>
>
>
>library(parallel)
>cl <- makeCluster(4)
>clusterExport(cl, "foo")
>cores <- seq_along(cl)
>r <- clusterApply(cl[cores], cores, function(core) {
>
>  for(i in 1:48) {
>
>      if (core ==i) {
>
>        foo( x[i] )
>
>}
>}
>})
>
>Many thanks in advance......
>
>Thanking you,
>Your sincerely,
>AKSHAY M KULKARNI
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Fri Nov  4 21:12:12 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Fri, 4 Nov 2022 20:12:12 +0000
Subject: [R] on parallel processing...
In-Reply-To: <2358A5EA-B207-4A02-97DF-2AB97962CF3B@dcn.davis.ca.us>
References: <PU4P216MB1568536BCB9BF18690898F1BC83B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <2358A5EA-B207-4A02-97DF-2AB97962CF3B@dcn.davis.ca.us>
Message-ID: <PU4P216MB1568EA9317DF386626A39645C83B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

dear Jeff,
                 Yeah, you are right.....just went through the documentation and found out that clusterApplyLB() from parallel package does the job... Thanks again....

THanking you,
Yours sincerely
AKSHAY M KULKARNI
________________________________
From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
Sent: Saturday, November 5, 2022 1:24 AM
To: r-help at r-project.org <r-help at r-project.org>; akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
Subject: Re: [R] on parallel processing...

You don't specify processors. Just invoke the worker functions with the relevant packages and they will be allocated according to how you defined the cluster object... typically automatically. Processors are usually specified (to the cluster object) according to IP address. Cores within the processors are allocated according to how many processes are created.

Maybe you should read some documentation (vignettes), and/or look into R-sig-hpc (https://stat.ethz.ch/mailman/listinfo/r-sig-hpc). This is probably not the best place to pursue this.

On November 4, 2022 12:35:11 PM PDT, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>Dear members,
>                              I want to send the same function with different arguments to different processors. This solution was provided in Stack Overflow https://stackoverflow.com/questions/25045998/send-function-calls-with-different-arguments-to-different-processors-in-r-using
>[https://cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon at 2.png?v=73d79a89bded]<https://stackoverflow.com/questions/25045998/send-function-calls-with-different-arguments-to-different-processors-in-r-using>
>Send function calls with different arguments to different processors in R using parallel package - Stack Overflow<https://stackoverflow.com/questions/25045998/send-function-calls-with-different-arguments-to-different-processors-in-r-using>
>Teams. Q&A for work. Connect and share knowledge within a single location that is structured and easy to search. Learn more about Teams
>stackoverflow.com
>I have a 48 core processor. My question is, how do i loop through the cores without explicitly mentioning the core numbers?
>Will this work?
>
>
>
>library(parallel)
>cl <- makeCluster(4)
>clusterExport(cl, "foo")
>cores <- seq_along(cl)
>r <- clusterApply(cl[cores], cores, function(core) {
>
>  for(i in 1:48) {
>
>      if (core ==i) {
>
>        foo( x[i] )
>
>}
>}
>})
>
>Many thanks in advance......
>
>Thanking you,
>Your sincerely,
>AKSHAY M KULKARNI
>
>       [[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

--
Sent from my phone. Please excuse my brevity.

	[[alternative HTML version deleted]]


From T|||@ny@Duh| @end|ng |rom tu|t@@edu  Fri Nov  4 16:13:54 2022
From: T|||@ny@Duh| @end|ng |rom tu|t@@edu (Duhl, Tiffany R.)
Date: Fri, 4 Nov 2022 15:13:54 +0000
Subject: [R] Selecting a minimum value of an attribute associated with point
 values neighboring a given point and assigning it as a new attribute
Message-ID: <BN6PR05MB35887EFE01222DBF7C359AAB903B9@BN6PR05MB3588.namprd05.prod.outlook.com>

Hello,

I have sets of spatial points with LAT, LON coords (unprojected, WGS84 datum) and several value attributes associated with each point, from numerous csv files (with an average of 6,000-9,000 points in each file) as shown in the following example:

data<- read.csv("R_find_pts_testdata.csv")

> data
    ID      Date         Time        LAT            LON           Conc    Leg.Speed    CO2  H2O BC61 Hr Min Sec
1   76 4/19/2021 21:25:38 42.40066 -70.98802 99300   0.0 mph 428.39 9.57  578 21  25  38
2   77 4/19/2021 21:25:39 42.40066 -70.98802 96730   0.0 mph 428.04 9.57  617 21  25  39
3   79 4/19/2021 21:25:41 42.40066 -70.98802 98800   0.2 mph 427.10 9.57 1027 21  25  41
4   80 4/19/2021 21:25:42 42.40066 -70.98802 96510     2 mph 427.99 9.58 1381 21  25  42
5   81 4/19/2021 21:25:43 42.40067 -70.98801 95540     3 mph 427.99 9.58 1271 21  25  43
6   82 4/19/2021 21:25:44 42.40068 -70.98799 94720     4 mph 427.20 9.57  910 21  25  44
7   83 4/19/2021 21:25:45 42.40069 -70.98797 94040     5 mph 427.18 9.57  652 21  25  45
8   84 4/19/2021 21:25:46 42.40072 -70.98795 95710     7 mph 427.07 9.57  943 21  25  46
9   85 4/19/2021 21:25:47 42.40074 -70.98792 96200     8 mph 427.44 9.56  650 21  25  47
10  86 4/19/2021 21:25:48 42.40078 -70.98789 93750    10 mph 428.76 9.57  761 21  25  48
11  87 4/19/2021 21:25:49 42.40081 -70.98785 93360    11 mph 429.25 9.56 1158 21  25  49
12  88 4/19/2021 21:25:50 42.40084 -70.98781 94340    12 mph 429.56 9.57  107 21  25  50
13  89 4/19/2021 21:25:51 42.40087 -70.98775 92780    12 mph 428.62 9.56  720 21  25  51


What I want to do is, for each point, identify all points within 50m of that point, find the minimum value of the "Conc" attribute of each nearby set of points (including the original point) and then create a new variable ("Conc_min") and assign this minimum value to a new variable added to "data".

So far, I have the following code:

library(spdep)
library(sf)

setwd("C:\\mydirectory\\")
data<- read.csv("R_find_pts_testdata.csv")

#make sure the data is a data frame
pts <- data.frame(data)

#create spatial data frame and define projection
pts_coords <- cbind(pts$LON, pts$LAT)
data_pts <- SpatialPointsDataFrame(coords= pts_coords,
data=pts, proj4string = CRS("+proj=longlat +datum=WGS84"))

#Re-project to WGS 84 / UTM zone 18N, so the analysis is in units of m
ptsUTM  <- sf::st_as_sf(data_pts, coords = c("LAT", "LON"), remove = F)%>% st_transform(32618)

#create 50 m buffer around each point then intersect with points and finally find neighbors within the buffers
pts_buf <- sf::st_buffer(ptsUTM, 50)
coords  <- sf::st_coordinates(ptsUTM)
int <- sf::st_intersects(pts_buf, ptsUTM)
x   <- spdep::dnearneigh(coords, 0, 50)

Now at this point, I'm not sure what to either the "int" (a sgbp list) or "x" (nb object) objects (or even if I need them both)

> int
Sparse geometry binary predicate list of length 974, where the predicate was `intersects'
first 10 elements:
 1: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
 2: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
 3: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
 4: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
 5: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
 6: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
 7: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
 8: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
 9: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...

> x
Neighbour list object:
Number of regions: 974
Number of nonzero links: 34802
Percentage nonzero weights: 3.668481
Average number of links: 35.73101

One thought is that maybe I don't need the dnearneigh function and can instead convert "int" into a dataframe and somehow merge or associate (perhaps with an inner join) the ID fields of the buffered and intersecting points and then compute the minimum value of "Conc" grouping by ID:

> as.data.frame(int)
    row.id col.id
1        1      1
2        1      2
3        1      3
4        1      4
5        1      5
6        1      6
7        1      7
8        1      8
9        1      9
10       1     10
11       1     11
12       1     12
13       1     13
14       1     14
15       1     15
16       1     16
17       1     17
18       1     18
19       2      1
20       2      2
21       2      3
22       2      4
23       2      5
24       2      6
25       2      7
26       2      8
27       2      9
28       2     10


So in the above example I'd like to take the minimum of "Conc" among the col.id points grouped with row.id 1 (i.e., col.ids 1-18) and assign the  minimum value of this group as a new variable in data (Data$Conc_min), and do the same for row.id 2 and all the rest of the rows.

I'm just not sure how to do this and I appreciate any help folks might have on this matter!

Many thanks,
-Tiffany

	[[alternative HTML version deleted]]


From @|gbert @end|ng |rom w|w|@hu-ber||n@de  Sat Nov  5 09:04:23 2022
From: @|gbert @end|ng |rom w|w|@hu-ber||n@de (Sigbert Klinke)
Date: Sat, 5 Nov 2022 09:04:23 +0100
Subject: [R] rio: list of extensions for supported formats
Message-ID: <419a5ed0-ac91-65c0-838f-a05307f9bbc0@wiwi.hu-berlin.de>

Hi,

is there a function in the package rio to get the file extensions listed 
in the vignette under supported formats?

Thanks Sigbert


From @@ch@ndh|@| @end|ng |rom bt|nternet@com  Sat Nov  5 14:47:54 2022
From: @@ch@ndh|@| @end|ng |rom bt|nternet@com (Amarjit Chandhial)
Date: Sat, 5 Nov 2022 13:47:54 +0000 (GMT)
Subject: [R] Associate a .R file with the RGui
Message-ID: <6c894531.98c9.184480c446a.Webtop.100@btinternet.com>




Hi Andrew/Petr,


Thanks for the replies.

In R Console if I run:

R.home("bin")

I get the following

"C:/PROGRA~1/R/R-42~1.2/bin/x64"

which is where

Rgui.exe is (within the x64 folder there are 13 files in total: 8 . exe 
and 5 .dll).


In file Explorer if I right-click on a .R file -> Open With -> R for 
Windows GUI Front-End

RGui (64-bit) opens but the .R file does not appear in the editor.


Amarjit


------ Original Message ------
From: "Andrew Simmons" <akwsimmo at gmail.com>
To: "Amarjit Chandhial" <a.chandhial at btinternet.com>
Cc: "R-help Mailing List" <r-help at r-project.org>
Sent: Friday, 4 Nov, 2022 At 09:08
Subject: Re: [R] Associate a .R file with the RGui

In an R session, run this:

writeLines(normalizePath(R.home("bin")))


Right click your .R file > Open with > Choose another app > Check the 
box "Always use this app to open .R files" > Look for another app on 
this PC
Paste the directory found above, then select "Rgui.exe"


On Fri, Nov 4, 2022, 04:49 Amarjit Chandhial via R-help 
<r-help at r-project.org <mailto:r-help at r-project.org> > wrote:

  Hi,


  My OS is Windows 11 Pro 64-Bit, I have R 4.2.2 and RStudio installed.

  If I double-click on a .R file in File Explorer the OS gives me the
  option of opening the .R in RStudio, or Look for an app in the 
Microsoft
  Store, or More Apps. Similarly with a right-click.

  I would like to associate a .R file with the RGui, not RStudio, thus
  when I double-click on a .R file in File Explorer the .R file opens in
  the R Editor in RGui.

  On my PC R 4.2.2 is located in "C:/Program Files/R/R-4.2.2/etc"

  Please can someone provide step-by-step instructions on how to
  associate?


  thanks,
  Amarjit

          [[alternative HTML version deleted]]

  ______________________________________________
  R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To 
UNSUBSCRIBE and more, see
  https://stat.ethz.ch/mailman/listinfo/r-help 
<https://stat.ethz.ch/mailman/listinfo/r-help>
  PLEASE do read the posting guide 
http://www.R-project.org/posting-guide.html 
<http://www.R-project.org/posting-guide.html>
  and provide commented, minimal, self-contained, reproducible code.




	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Nov  5 16:03:49 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 05 Nov 2022 08:03:49 -0700
Subject: [R] Associate a .R file with the RGui
In-Reply-To: <6c894531.98c9.184480c446a.Webtop.100@btinternet.com>
References: <6c894531.98c9.184480c446a.Webtop.100@btinternet.com>
Message-ID: <8F61167A-345F-4615-9C55-1C486A8DE0B1@dcn.davis.ca.us>

RGui is not an editor. It is a console (aka REPL, https://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop).

When using RGui, it is up to you to edit your R file in an external editor like Notepad++ and copy paste code snippets or use source("yourfile.R") as desired.

On November 5, 2022 6:47:54 AM PDT, Amarjit Chandhial via R-help <r-help at r-project.org> wrote:
>
>
>
>Hi Andrew/Petr,
>
>
>Thanks for the replies.
>
>In R Console if I run:
>
>R.home("bin")
>
>I get the following
>
>"C:/PROGRA~1/R/R-42~1.2/bin/x64"
>
>which is where
>
>Rgui.exe is (within the x64 folder there are 13 files in total: 8 . exe 
>and 5 .dll).
>
>
>In file Explorer if I right-click on a .R file -> Open With -> R for 
>Windows GUI Front-End
>
>RGui (64-bit) opens but the .R file does not appear in the editor.
>
>
>Amarjit
>
>
>------ Original Message ------
>From: "Andrew Simmons" <akwsimmo at gmail.com>
>To: "Amarjit Chandhial" <a.chandhial at btinternet.com>
>Cc: "R-help Mailing List" <r-help at r-project.org>
>Sent: Friday, 4 Nov, 2022 At 09:08
>Subject: Re: [R] Associate a .R file with the RGui
>
>In an R session, run this:
>
>writeLines(normalizePath(R.home("bin")))
>
>
>Right click your .R file > Open with > Choose another app > Check the 
>box "Always use this app to open .R files" > Look for another app on 
>this PC
>Paste the directory found above, then select "Rgui.exe"
>
>
>On Fri, Nov 4, 2022, 04:49 Amarjit Chandhial via R-help 
><r-help at r-project.org <mailto:r-help at r-project.org> > wrote:
>
>  Hi,
>
>
>  My OS is Windows 11 Pro 64-Bit, I have R 4.2.2 and RStudio installed.
>
>  If I double-click on a .R file in File Explorer the OS gives me the
>  option of opening the .R in RStudio, or Look for an app in the 
>Microsoft
>  Store, or More Apps. Similarly with a right-click.
>
>  I would like to associate a .R file with the RGui, not RStudio, thus
>  when I double-click on a .R file in File Explorer the .R file opens in
>  the R Editor in RGui.
>
>  On my PC R 4.2.2 is located in "C:/Program Files/R/R-4.2.2/etc"
>
>  Please can someone provide step-by-step instructions on how to
>  associate?
>
>
>  thanks,
>  Amarjit
>
>          [[alternative HTML version deleted]]
>
>  ______________________________________________
>  R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To 
>UNSUBSCRIBE and more, see
>  https://stat.ethz.ch/mailman/listinfo/r-help 
><https://stat.ethz.ch/mailman/listinfo/r-help>
>  PLEASE do read the posting guide 
>http://www.R-project.org/posting-guide.html 
><http://www.R-project.org/posting-guide.html>
>  and provide commented, minimal, self-contained, reproducible code.
>
>
>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From bgunter@4567 @end|ng |rom gm@||@com  Sat Nov  5 16:08:31 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 5 Nov 2022 08:08:31 -0700
Subject: [R] 
 Selecting a minimum value of an attribute associated with point
 values neighboring a given point and assigning it as a new attribute
In-Reply-To: <BN6PR05MB35887EFE01222DBF7C359AAB903B9@BN6PR05MB3588.namprd05.prod.outlook.com>
References: <BN6PR05MB35887EFE01222DBF7C359AAB903B9@BN6PR05MB3588.namprd05.prod.outlook.com>
Message-ID: <CAGxFJbSkg9zAqk0dGcr3qJe2z2C04NEZFdHN8hWQA3oSbfHukQ@mail.gmail.com>

Probably better posted on R-sig-geo.

-- Bert

On Sat, Nov 5, 2022 at 12:36 AM Duhl, Tiffany R. <Tiffany.Duhl at tufts.edu>
wrote:

> Hello,
>
> I have sets of spatial points with LAT, LON coords (unprojected, WGS84
> datum) and several value attributes associated with each point, from
> numerous csv files (with an average of 6,000-9,000 points in each file) as
> shown in the following example:
>
> data<- read.csv("R_find_pts_testdata.csv")
>
> > data
>     ID      Date         Time        LAT            LON           Conc
> Leg.Speed    CO2  H2O BC61 Hr Min Sec
> 1   76 4/19/2021 21:25:38 42.40066 -70.98802 99300   0.0 mph 428.39 9.57
> 578 21  25  38
> 2   77 4/19/2021 21:25:39 42.40066 -70.98802 96730   0.0 mph 428.04 9.57
> 617 21  25  39
> 3   79 4/19/2021 21:25:41 42.40066 -70.98802 98800   0.2 mph 427.10 9.57
> 1027 21  25  41
> 4   80 4/19/2021 21:25:42 42.40066 -70.98802 96510     2 mph 427.99 9.58
> 1381 21  25  42
> 5   81 4/19/2021 21:25:43 42.40067 -70.98801 95540     3 mph 427.99 9.58
> 1271 21  25  43
> 6   82 4/19/2021 21:25:44 42.40068 -70.98799 94720     4 mph 427.20 9.57
> 910 21  25  44
> 7   83 4/19/2021 21:25:45 42.40069 -70.98797 94040     5 mph 427.18 9.57
> 652 21  25  45
> 8   84 4/19/2021 21:25:46 42.40072 -70.98795 95710     7 mph 427.07 9.57
> 943 21  25  46
> 9   85 4/19/2021 21:25:47 42.40074 -70.98792 96200     8 mph 427.44 9.56
> 650 21  25  47
> 10  86 4/19/2021 21:25:48 42.40078 -70.98789 93750    10 mph 428.76 9.57
> 761 21  25  48
> 11  87 4/19/2021 21:25:49 42.40081 -70.98785 93360    11 mph 429.25 9.56
> 1158 21  25  49
> 12  88 4/19/2021 21:25:50 42.40084 -70.98781 94340    12 mph 429.56 9.57
> 107 21  25  50
> 13  89 4/19/2021 21:25:51 42.40087 -70.98775 92780    12 mph 428.62 9.56
> 720 21  25  51
>
>
> What I want to do is, for each point, identify all points within 50m of
> that point, find the minimum value of the "Conc" attribute of each nearby
> set of points (including the original point) and then create a new variable
> ("Conc_min") and assign this minimum value to a new variable added to
> "data".
>
> So far, I have the following code:
>
> library(spdep)
> library(sf)
>
> setwd("C:\\mydirectory\\")
> data<- read.csv("R_find_pts_testdata.csv")
>
> #make sure the data is a data frame
> pts <- data.frame(data)
>
> #create spatial data frame and define projection
> pts_coords <- cbind(pts$LON, pts$LAT)
> data_pts <- SpatialPointsDataFrame(coords= pts_coords,
> data=pts, proj4string = CRS("+proj=longlat +datum=WGS84"))
>
> #Re-project to WGS 84 / UTM zone 18N, so the analysis is in units of m
> ptsUTM  <- sf::st_as_sf(data_pts, coords = c("LAT", "LON"), remove = F)%>%
> st_transform(32618)
>
> #create 50 m buffer around each point then intersect with points and
> finally find neighbors within the buffers
> pts_buf <- sf::st_buffer(ptsUTM, 50)
> coords  <- sf::st_coordinates(ptsUTM)
> int <- sf::st_intersects(pts_buf, ptsUTM)
> x   <- spdep::dnearneigh(coords, 0, 50)
>
> Now at this point, I'm not sure what to either the "int" (a sgbp list) or
> "x" (nb object) objects (or even if I need them both)
>
> > int
> Sparse geometry binary predicate list of length 974, where the predicate
> was `intersects'
> first 10 elements:
>  1: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
>  2: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
>  3: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
>  4: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
>  5: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
>  6: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
>  7: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
>  8: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
>  9: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
>
> > x
> Neighbour list object:
> Number of regions: 974
> Number of nonzero links: 34802
> Percentage nonzero weights: 3.668481
> Average number of links: 35.73101
>
> One thought is that maybe I don't need the dnearneigh function and can
> instead convert "int" into a dataframe and somehow merge or associate
> (perhaps with an inner join) the ID fields of the buffered and intersecting
> points and then compute the minimum value of "Conc" grouping by ID:
>
> > as.data.frame(int)
>     row.id col.id
> 1        1      1
> 2        1      2
> 3        1      3
> 4        1      4
> 5        1      5
> 6        1      6
> 7        1      7
> 8        1      8
> 9        1      9
> 10       1     10
> 11       1     11
> 12       1     12
> 13       1     13
> 14       1     14
> 15       1     15
> 16       1     16
> 17       1     17
> 18       1     18
> 19       2      1
> 20       2      2
> 21       2      3
> 22       2      4
> 23       2      5
> 24       2      6
> 25       2      7
> 26       2      8
> 27       2      9
> 28       2     10
>
>
> So in the above example I'd like to take the minimum of "Conc" among the
> col.id points grouped with row.id 1 (i.e., col.ids 1-18) and assign the
> minimum value of this group as a new variable in data (Data$Conc_min), and
> do the same for row.id 2 and all the rest of the rows.
>
> I'm just not sure how to do this and I appreciate any help folks might
> have on this matter!
>
> Many thanks,
> -Tiffany
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @@ch@ndh|@| @end|ng |rom bt|nternet@com  Sat Nov  5 17:58:49 2022
From: @@ch@ndh|@| @end|ng |rom bt|nternet@com (Amarjit Chandhial)
Date: Sat, 5 Nov 2022 16:58:49 +0000
Subject: [R] Associate a .R file with the RGui
In-Reply-To: <8F61167A-345F-4615-9C55-1C486A8DE0B1@dcn.davis.ca.us>
References: <6c894531.98c9.184480c446a.Webtop.100@btinternet.com>
 <8F61167A-345F-4615-9C55-1C486A8DE0B1@dcn.davis.ca.us>
Message-ID: <69B40FD3-25AC-4180-9DC4-737C82BBFA85@btinternet.com>

Hi Jeff,


Please see my original question.


Thanks,
Amarjiit 



> On 5 Nov 2022, at 15:03, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
> 
> RGui is not an editor. It is a console (aka REPL, https://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop).
> 
> When using RGui, it is up to you to edit your R file in an external editor like Notepad++ and copy paste code snippets or use source("yourfile.R") as desired.
> 
>> On November 5, 2022 6:47:54 AM PDT, Amarjit Chandhial via R-help <r-help at r-project.org> wrote:
>> 
>> 
>> 
>> Hi Andrew/Petr,
>> 
>> 
>> Thanks for the replies.
>> 
>> In R Console if I run:
>> 
>> R.home("bin")
>> 
>> I get the following
>> 
>> "C:/PROGRA~1/R/R-42~1.2/bin/x64"
>> 
>> which is where
>> 
>> Rgui.exe is (within the x64 folder there are 13 files in total: 8 . exe 
>> and 5 .dll).
>> 
>> 
>> In file Explorer if I right-click on a .R file -> Open With -> R for 
>> Windows GUI Front-End
>> 
>> RGui (64-bit) opens but the .R file does not appear in the editor.
>> 
>> 
>> Amarjit
>> 
>> 
>> ------ Original Message ------
>> From: "Andrew Simmons" <akwsimmo at gmail.com>
>> To: "Amarjit Chandhial" <a.chandhial at btinternet.com>
>> Cc: "R-help Mailing List" <r-help at r-project.org>
>> Sent: Friday, 4 Nov, 2022 At 09:08
>> Subject: Re: [R] Associate a .R file with the RGui
>> 
>> In an R session, run this:
>> 
>> writeLines(normalizePath(R.home("bin")))
>> 
>> 
>> Right click your .R file > Open with > Choose another app > Check the 
>> box "Always use this app to open .R files" > Look for another app on 
>> this PC
>> Paste the directory found above, then select "Rgui.exe"
>> 
>> 
>> On Fri, Nov 4, 2022, 04:49 Amarjit Chandhial via R-help 
>> <r-help at r-project.org <mailto:r-help at r-project.org> > wrote:
>> 
>> Hi,
>> 
>> 
>> My OS is Windows 11 Pro 64-Bit, I have R 4.2.2 and RStudio installed.
>> 
>> If I double-click on a .R file in File Explorer the OS gives me the
>> option of opening the .R in RStudio, or Look for an app in the 
>> Microsoft
>> Store, or More Apps. Similarly with a right-click.
>> 
>> I would like to associate a .R file with the RGui, not RStudio, thus
>> when I double-click on a .R file in File Explorer the .R file opens in
>> the R Editor in RGui.
>> 
>> On my PC R 4.2.2 is located in "C:/Program Files/R/R-4.2.2/etc"
>> 
>> Please can someone provide step-by-step instructions on how to
>> associate?
>> 
>> 
>> thanks,
>> Amarjit
>> 
>>         [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To 
>> UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help 
>> <https://stat.ethz.ch/mailman/listinfo/r-help>
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html 
>> <http://www.R-project.org/posting-guide.html>
>> and provide commented, minimal, self-contained, reproducible code.
>> 
>> 
>> 
>> 
>>    [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> -- 
> Sent from my phone. Please excuse my brevity.


From th|erry@ze|| @end|ng |rom gm@||@com  Sat Nov  5 18:36:52 2022
From: th|erry@ze|| @end|ng |rom gm@||@com (Thierry Zell)
Date: Sat, 5 Nov 2022 13:36:52 -0400
Subject: [R] Is this *always* the intended R^2 value for no intercept in lm?
Message-ID: <CALAJGyCDBnYiaEFfOOBtkvWgxaSb=+hE1beDk6AOBFaoLswYPw@mail.gmail.com>

I am puzzled by the computation of R^2 with intercept omitted that is
already illustrated by the following example taken from help("lm")

## Annette Dobson (1990) "An Introduction to Generalized Linear Models".
## Page 9: Plant Weight Data.
ctl <- c(4.17,5.58,5.18,6.11,4.50,4.61,5.17,4.53,5.33,5.14)
trt <- c(4.81,4.17,4.41,3.59,5.87,3.83,6.03,4.89,4.32,4.69)
group <- gl(2, 10, 20, labels = c("Ctl","Trt"))
weight <- c(ctl, trt)
lm.D9 <- lm(weight ~ group)
lm.D90 <- lm(weight ~ group - 1) # omitting intercept

The calculations for the R^2 for both models  are consistent with the
help("summary.lm") description:
"y* is the mean of y[i] if there is an intercept and zero otherwise."
Which causes a dramatic difference in the resulting R^2 values.

r2.D9 <- summary(lm.D9)$r.squared
r2.D90 <- summary(lm.D90)$r.squared

all.equal(r2.D9, 0.0730775989903856) #TRUE
all.equal(r2.D90, 0.981783272435264) #TRUE

This is counter-intuitive to say the least since the two models have
identical predictions and both models could be described more
accurately as two intercepts rather than zero. I see three
possibilities:

1. This is the intended result, in which case no fix is required, but
I?d be curious to understand the argument better.
2. This is an unfortunate outcome but not worth fixing as the user can
easily compute the correct R^2. In this case, I'd suggest that this
unintuitive behavior should be explicitly called out in the
documentation.
3. This is a bug worth fixing.

I look forward to hearing the community?s opinion on this.
Thanks in advance!


From jrkr|de@u @end|ng |rom gm@||@com  Sat Nov  5 20:39:21 2022
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Sat, 5 Nov 2022 15:39:21 -0400
Subject: [R] rio: list of extensions for supported formats
In-Reply-To: <419a5ed0-ac91-65c0-838f-a05307f9bbc0@wiwi.hu-berlin.de>
References: <419a5ed0-ac91-65c0-838f-a05307f9bbc0@wiwi.hu-berlin.de>
Message-ID: <CAKZQJMCRtXHy1TtfyGXpK8cZk_38roeBDidabRvWt6r2RNCGZw@mail.gmail.com>

nnnnnnnnnnnnnnnno idea but there is a list here
https://thomasleeper.com/rio/articles/rio.html

On Sat, 5 Nov 2022 at 04:04, Sigbert Klinke <sigbert at wiwi.hu-berlin.de>
wrote:

> Hi,
>
> is there a function in the package rio to get the file extensions listed
> in the vignette under supported formats?
>
> Thanks Sigbert
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
John Kane
Kingston ON Canada

	[[alternative HTML version deleted]]


From jrkr|de@u @end|ng |rom gm@||@com  Sat Nov  5 20:40:00 2022
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Sat, 5 Nov 2022 15:40:00 -0400
Subject: [R] rio: list of extensions for supported formats
In-Reply-To: <CAKZQJMCRtXHy1TtfyGXpK8cZk_38roeBDidabRvWt6r2RNCGZw@mail.gmail.com>
References: <419a5ed0-ac91-65c0-838f-a05307f9bbc0@wiwi.hu-berlin.de>
 <CAKZQJMCRtXHy1TtfyGXpK8cZk_38roeBDidabRvWt6r2RNCGZw@mail.gmail.com>
Message-ID: <CAKZQJMAD8nGBdcuqYydajKhwe0KjZtYsC5MYDH5s03SezG5DUw@mail.gmail.com>

Cat was being helpful.

On Sat, 5 Nov 2022 at 15:39, John Kane <jrkrideau at gmail.com> wrote:

> nnnnnnnnnnnnnnnno idea but there is a list here
> https://thomasleeper.com/rio/articles/rio.html
>
> On Sat, 5 Nov 2022 at 04:04, Sigbert Klinke <sigbert at wiwi.hu-berlin.de>
> wrote:
>
>> Hi,
>>
>> is there a function in the package rio to get the file extensions listed
>> in the vignette under supported formats?
>>
>> Thanks Sigbert
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>
> --
> John Kane
> Kingston ON Canada
>


-- 
John Kane
Kingston ON Canada

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Sat Nov  5 20:40:35 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 5 Nov 2022 12:40:35 -0700
Subject: [R] 
 Is this *always* the intended R^2 value for no intercept in lm?
In-Reply-To: <CALAJGyCDBnYiaEFfOOBtkvWgxaSb=+hE1beDk6AOBFaoLswYPw@mail.gmail.com>
References: <CALAJGyCDBnYiaEFfOOBtkvWgxaSb=+hE1beDk6AOBFaoLswYPw@mail.gmail.com>
Message-ID: <CAGxFJbQTzxLtALLdcChx0dBhGRuEBvZBTrmebqVSmEqxNBE2ag@mail.gmail.com>

FAQ 7.41
and
https://stackoverflow.com/questions/57415793/r-squared-in-lm-for-zero-intercept-model

(among numerous others that could no doubt be found with a bit of
searching).

In short, the "null models" against which you are comparing the fitted
model are different with and without an intercept.

--Bert



On Sat, Nov 5, 2022 at 11:52 AM Thierry Zell <thierry.zell at gmail.com> wrote:

> I am puzzled by the computation of R^2 with intercept omitted that is
> already illustrated by the following example taken from help("lm")
>
> ## Annette Dobson (1990) "An Introduction to Generalized Linear Models".
> ## Page 9: Plant Weight Data.
> ctl <- c(4.17,5.58,5.18,6.11,4.50,4.61,5.17,4.53,5.33,5.14)
> trt <- c(4.81,4.17,4.41,3.59,5.87,3.83,6.03,4.89,4.32,4.69)
> group <- gl(2, 10, 20, labels = c("Ctl","Trt"))
> weight <- c(ctl, trt)
> lm.D9 <- lm(weight ~ group)
> lm.D90 <- lm(weight ~ group - 1) # omitting intercept
>
> The calculations for the R^2 for both models  are consistent with the
> help("summary.lm") description:
> "y* is the mean of y[i] if there is an intercept and zero otherwise."
> Which causes a dramatic difference in the resulting R^2 values.
>
> r2.D9 <- summary(lm.D9)$r.squared
> r2.D90 <- summary(lm.D90)$r.squared
>
> all.equal(r2.D9, 0.0730775989903856) #TRUE
> all.equal(r2.D90, 0.981783272435264) #TRUE
>
> This is counter-intuitive to say the least since the two models have
> identical predictions and both models could be described more
> accurately as two intercepts rather than zero. I see three
> possibilities:
>
> 1. This is the intended result, in which case no fix is required, but
> I?d be curious to understand the argument better.
> 2. This is an unfortunate outcome but not worth fixing as the user can
> easily compute the correct R^2. In this case, I'd suggest that this
> unintuitive behavior should be explicitly called out in the
> documentation.
> 3. This is a bug worth fixing.
>
> I look forward to hearing the community?s opinion on this.
> Thanks in advance!
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Sun Nov  6 01:40:40 2022
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Sat, 5 Nov 2022 17:40:40 -0700
Subject: [R] Associate a .R file with the RGui
In-Reply-To: <69B40FD3-25AC-4180-9DC4-737C82BBFA85@btinternet.com>
References: <6c894531.98c9.184480c446a.Webtop.100@btinternet.com>
 <8F61167A-345F-4615-9C55-1C486A8DE0B1@dcn.davis.ca.us>
 <69B40FD3-25AC-4180-9DC4-737C82BBFA85@btinternet.com>
Message-ID: <4da62093-4035-7401-2d80-d47cc319a468@comcast.net>


On 11/5/22 09:58, Amarjit Chandhial via R-help wrote:
> Hi Jeff,
>
>
> Please see my original question.

You were told that RGui is not an editor.

Are you implying that your initial message contained an implicit request 
for instructions on how to get R code in an .R file to be opened 
automagically when double-clicked or to have "open in <some editor>" 
appear when right-clicked? (I didn't see that clearly expressed.)

If you want something else to happen with a file that has a .R extension 
when double-clicked or right-clicked in a GUI file manager, then you 
need to configure your OS to do whatever else it is that you expect. 
This is not really an R question. It's an OS question. There are many 
editors that can also bring up R consoles when the right? key combo is 
pressed. They do require some study for their specific actions, but this 
is not really the place to get guidance on the fine details.

-- 

David.

>
>
> Thanks,
> Amarjiit
>
>
>
>> On 5 Nov 2022, at 15:03, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>>
>> RGui is not an editor. It is a console (aka REPL, https://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop).
>>
>> When using RGui, it is up to you to edit your R file in an external editor like Notepad++ and copy paste code snippets or use source("yourfile.R") as desired.
>>
>>> On November 5, 2022 6:47:54 AM PDT, Amarjit Chandhial via R-help <r-help at r-project.org> wrote:
>>>
>>>
>>>
>>> Hi Andrew/Petr,
>>>
>>>
>>> Thanks for the replies.
>>>
>>> In R Console if I run:
>>>
>>> R.home("bin")
>>>
>>> I get the following
>>>
>>> "C:/PROGRA~1/R/R-42~1.2/bin/x64"
>>>
>>> which is where
>>>
>>> Rgui.exe is (within the x64 folder there are 13 files in total: 8 . exe
>>> and 5 .dll).
>>>
>>>
>>> In file Explorer if I right-click on a .R file -> Open With -> R for
>>> Windows GUI Front-End
>>>
>>> RGui (64-bit) opens but the .R file does not appear in the editor.
>>>
>>>
>>> Amarjit
>>>
>>>
>>> ------ Original Message ------
>>> From: "Andrew Simmons" <akwsimmo at gmail.com>
>>> To: "Amarjit Chandhial" <a.chandhial at btinternet.com>
>>> Cc: "R-help Mailing List" <r-help at r-project.org>
>>> Sent: Friday, 4 Nov, 2022 At 09:08
>>> Subject: Re: [R] Associate a .R file with the RGui
>>>
>>> In an R session, run this:
>>>
>>> writeLines(normalizePath(R.home("bin")))
>>>
>>>
>>> Right click your .R file > Open with > Choose another app > Check the
>>> box "Always use this app to open .R files" > Look for another app on
>>> this PC
>>> Paste the directory found above, then select "Rgui.exe"
>>>
>>>
>>> On Fri, Nov 4, 2022, 04:49 Amarjit Chandhial via R-help
>>> <r-help at r-project.org <mailto:r-help at r-project.org> > wrote:
>>>
>>> Hi,
>>>
>>>
>>> My OS is Windows 11 Pro 64-Bit, I have R 4.2.2 and RStudio installed.
>>>
>>> If I double-click on a .R file in File Explorer the OS gives me the
>>> option of opening the .R in RStudio, or Look for an app in the
>>> Microsoft
>>> Store, or More Apps. Similarly with a right-click.
>>>
>>> I would like to associate a .R file with the RGui, not RStudio, thus
>>> when I double-click on a .R file in File Explorer the .R file opens in
>>> the R Editor in RGui.
>>>
>>> On my PC R 4.2.2 is located in "C:/Program Files/R/R-4.2.2/etc"
>>>
>>> Please can someone provide step-by-step instructions on how to
>>> associate?
>>>
>>>
>>> thanks,
>>> Amarjit
>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To
>>> UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> <https://stat.ethz.ch/mailman/listinfo/r-help>
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> <http://www.R-project.org/posting-guide.html>
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>>
>>>
>>>
>>>     [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> -- 
>> Sent from my phone. Please excuse my brevity.
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @@ch@ndh|@| @end|ng |rom bt|nternet@com  Sun Nov  6 09:17:21 2022
From: @@ch@ndh|@| @end|ng |rom bt|nternet@com (Amarjit Chandhial)
Date: Sun, 6 Nov 2022 08:17:21 +0000
Subject: [R] Associate a .R file with the RGui
In-Reply-To: <4da62093-4035-7401-2d80-d47cc319a468@comcast.net>
References: <6c894531.98c9.184480c446a.Webtop.100@btinternet.com>
 <8F61167A-345F-4615-9C55-1C486A8DE0B1@dcn.davis.ca.us>
 <69B40FD3-25AC-4180-9DC4-737C82BBFA85@btinternet.com>
 <4da62093-4035-7401-2d80-d47cc319a468@comcast.net>
Message-ID: <5C67C76C-039A-4B61-A9D1-AABD02F4A06D@btinternet.com>

David,

Thanks.

Amarjiit 


> On 6 Nov 2022, at 00:40, David Winsemius <dwinsemius at comcast.net> wrote:
> 
> 
>> On 11/5/22 09:58, Amarjit Chandhial via R-help wrote:
>> Hi Jeff,
>> 
>> 
>> Please see my original question.
> 
> You were told that RGui is not an editor.
> 
> Are you implying that your initial message contained an implicit request for instructions on how to get R code in an .R file to be opened automagically when double-clicked or to have "open in <some editor>" appear when right-clicked? (I didn't see that clearly expressed.)
> 
> If you want something else to happen with a file that has a .R extension when double-clicked or right-clicked in a GUI file manager, then you need to configure your OS to do whatever else it is that you expect. This is not really an R question. It's an OS question. There are many editors that can also bring up R consoles when the right  key combo is pressed. They do require some study for their specific actions, but this is not really the place to get guidance on the fine details.
> 
> -- 
> 
> David.
> 
>> 
>> 
>> Thanks,
>> Amarjiit
>> 
>> 
>> 
>>> On 5 Nov 2022, at 15:03, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>>> 
>>> RGui is not an editor. It is a console (aka REPL, https://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop).
>>> 
>>> When using RGui, it is up to you to edit your R file in an external editor like Notepad++ and copy paste code snippets or use source("yourfile.R") as desired.
>>> 
>>>> On November 5, 2022 6:47:54 AM PDT, Amarjit Chandhial via R-help <r-help at r-project.org> wrote:
>>>> 
>>>> 
>>>> 
>>>> Hi Andrew/Petr,
>>>> 
>>>> 
>>>> Thanks for the replies.
>>>> 
>>>> In R Console if I run:
>>>> 
>>>> R.home("bin")
>>>> 
>>>> I get the following
>>>> 
>>>> "C:/PROGRA~1/R/R-42~1.2/bin/x64"
>>>> 
>>>> which is where
>>>> 
>>>> Rgui.exe is (within the x64 folder there are 13 files in total: 8 . exe
>>>> and 5 .dll).
>>>> 
>>>> 
>>>> In file Explorer if I right-click on a .R file -> Open With -> R for
>>>> Windows GUI Front-End
>>>> 
>>>> RGui (64-bit) opens but the .R file does not appear in the editor.
>>>> 
>>>> 
>>>> Amarjit
>>>> 
>>>> 
>>>> ------ Original Message ------
>>>> From: "Andrew Simmons" <akwsimmo at gmail.com>
>>>> To: "Amarjit Chandhial" <a.chandhial at btinternet.com>
>>>> Cc: "R-help Mailing List" <r-help at r-project.org>
>>>> Sent: Friday, 4 Nov, 2022 At 09:08
>>>> Subject: Re: [R] Associate a .R file with the RGui
>>>> 
>>>> In an R session, run this:
>>>> 
>>>> writeLines(normalizePath(R.home("bin")))
>>>> 
>>>> 
>>>> Right click your .R file > Open with > Choose another app > Check the
>>>> box "Always use this app to open .R files" > Look for another app on
>>>> this PC
>>>> Paste the directory found above, then select "Rgui.exe"
>>>> 
>>>> 
>>>> On Fri, Nov 4, 2022, 04:49 Amarjit Chandhial via R-help
>>>> <r-help at r-project.org <mailto:r-help at r-project.org> > wrote:
>>>> 
>>>> Hi,
>>>> 
>>>> 
>>>> My OS is Windows 11 Pro 64-Bit, I have R 4.2.2 and RStudio installed.
>>>> 
>>>> If I double-click on a .R file in File Explorer the OS gives me the
>>>> option of opening the .R in RStudio, or Look for an app in the
>>>> Microsoft
>>>> Store, or More Apps. Similarly with a right-click.
>>>> 
>>>> I would like to associate a .R file with the RGui, not RStudio, thus
>>>> when I double-click on a .R file in File Explorer the .R file opens in
>>>> the R Editor in RGui.
>>>> 
>>>> On my PC R 4.2.2 is located in "C:/Program Files/R/R-4.2.2/etc"
>>>> 
>>>> Please can someone provide step-by-step instructions on how to
>>>> associate?
>>>> 
>>>> 
>>>> thanks,
>>>> Amarjit
>>>> 
>>>>         [[alternative HTML version deleted]]
>>>> 
>>>> ______________________________________________
>>>> R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To
>>>> UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> <https://stat.ethz.ch/mailman/listinfo/r-help>
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> <http://www.R-project.org/posting-guide.html>
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>> 
>>>> 
>>>> 
>>>> 
>>>>    [[alternative HTML version deleted]]
>>>> 
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>> -- 
>>> Sent from my phone. Please excuse my brevity.
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Sun Nov  6 16:15:57 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Sun, 6 Nov 2022 16:15:57 +0100
Subject: [R] Associate a .R file with the RGui
In-Reply-To: <4da62093-4035-7401-2d80-d47cc319a468@comcast.net>
References: <6c894531.98c9.184480c446a.Webtop.100@btinternet.com>
 <8F61167A-345F-4615-9C55-1C486A8DE0B1@dcn.davis.ca.us>
 <69B40FD3-25AC-4180-9DC4-737C82BBFA85@btinternet.com>
 <4da62093-4035-7401-2d80-d47cc319a468@comcast.net>
Message-ID: <85b95db6-b62e-14f3-2f6f-1d38734efe81@statistik.tu-dortmund.de>



On 06.11.2022 01:40, David Winsemius wrote:
> 
> On 11/5/22 09:58, Amarjit Chandhial via R-help wrote:
>> Hi Jeff,
>>
>>
>> Please see my original question.
> 
> You were told that RGui is not an editor.
> 
> Are you implying that your initial message contained an implicit request 
> for instructions on how to get R code in an .R file to be opened 
> automagically when double-clicked or to have "open in <some editor>" 
> appear when right-clicked? (I didn't see that clearly expressed.)
> 
> If you want something else to happen with a file that has a .R extension 
> when double-clicked or right-clicked in a GUI file manager, then you 
> need to configure your OS to do whatever else it is that you expect. 
> This is not really an R question. It's an OS question. There are many 
> editors that can also bring up R consoles when the right? key combo is 
> pressed. They do require some study for their specific actions, but this 
> is not really the place to get guidance on the fine details.
> 

Friends, RGui contains an editor. It allows to send lines / code blocks 
to the R concole. We know users who need braille displays use the RGui 
internal editor as that apparently cooperates better with braille 
displays + R as many other editors.
And as it does not hide half of R by its own functions, I'd pefer that 
over some very popular other editors if I had no other choice.


To answer the OP's question, R does not have a built in way to get this 
task directly done, but searching the web suggests a rather simple way 
(well,m a hack as starting R with other command args may fail now, but 
you can extend this and look for a specific naming scheme):

<https://stat.ethz.ch/pipermail/r-help/2007-August/138064.html>

let is adapt this for the recent version of R:


1. Add the line

if ( length(z <- commandArgs(TRUE)) ) utils::file.edit(z[1])

to the Rprofile.site file; and

2. Edit the registry to associate the .R extension with the command

C:\Program Files\R\R-4.2.2\bin\x64\Rgui.exe --args "%1"


I think we should implement this in R anyway.

Best,
Uwe Ligges


From er|cjberger @end|ng |rom gm@||@com  Sun Nov  6 16:19:51 2022
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Sun, 6 Nov 2022 17:19:51 +0200
Subject: [R] 
 Selecting a minimum value of an attribute associated with point
 values neighboring a given point and assigning it as a new attribute
In-Reply-To: <CAGxFJbSkg9zAqk0dGcr3qJe2z2C04NEZFdHN8hWQA3oSbfHukQ@mail.gmail.com>
References: <BN6PR05MB35887EFE01222DBF7C359AAB903B9@BN6PR05MB3588.namprd05.prod.outlook.com>
 <CAGxFJbSkg9zAqk0dGcr3qJe2z2C04NEZFdHN8hWQA3oSbfHukQ@mail.gmail.com>
Message-ID: <CAGgJW767Ein1S+MSywb57B2UtmE0EJodDVokPEx5_-c5BTFR1Q@mail.gmail.com>

Hi Tiffany,
Here is some code that might help with your problem. I solve a "toy"
problem that is conceptually the same.
Part 1 sets up my toy problem. You would have to replace Part 1 with
your real case. The main point is to define
a function f(i, j, data) which returns 0 or 1 depending on whether the
observations in rows i and j in your dataset 'data'
are within your cutoff distance (i.e. 50m).

You can then use Part 2 almost without changes (except for changing
'myData' to the correct name of your data).

I hope this helps,
Eric

library(dplyr)

## PART 1: create fake data for minimal example
set.seed(123) ## for reproducibility
N <- 5       ## replace by number of locations (approx 9000 in your case)
MAX_DISTANCE <- 2  ## 50 in your case
myData <- data.frame(x=rnorm(N),y=rnorm(N),Conc=sample(1:N,N))

## The function which you must re-define for your actual case.
f <- function(i,j,a) {
 dist <- sqrt(sum((a[i,1:2] - a[j,1:2])^2)) ## Euclidean distance
 as.integer(dist < MAX_DISTANCE)
}

## PART 2: You can use this code on the real data with f() defined appropriately
A <- matrix(0,N,N)
## get the indices (j,k) where j < k (as columns in a data.frame)
idx <- expand.grid(v,v) |> rename(j=Var1,k=Var2) |> filter(j < k)
u <- sapply(1:nrow(idx),\(i){ j <- idx$j[i]; k <- idx$k[i]; A[j,k] <<-
f(j,k,myData) })
B <- A + t(A) + diag(N)
C <- diag(myData$Conc)
D <- B %*% C
D[D==0] <- NA
myData$Conc_min <- apply(D,MAR=1,\(v){min(v,na.rm=TRUE)})
print(head(myData))


On Sat, Nov 5, 2022 at 5:14 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>
> Probably better posted on R-sig-geo.
>
> -- Bert
>
> On Sat, Nov 5, 2022 at 12:36 AM Duhl, Tiffany R. <Tiffany.Duhl at tufts.edu>
> wrote:
>
> > Hello,
> >
> > I have sets of spatial points with LAT, LON coords (unprojected, WGS84
> > datum) and several value attributes associated with each point, from
> > numerous csv files (with an average of 6,000-9,000 points in each file) as
> > shown in the following example:
> >
> > data<- read.csv("R_find_pts_testdata.csv")
> >
> > > data
> >     ID      Date         Time        LAT            LON           Conc
> > Leg.Speed    CO2  H2O BC61 Hr Min Sec
> > 1   76 4/19/2021 21:25:38 42.40066 -70.98802 99300   0.0 mph 428.39 9.57
> > 578 21  25  38
> > 2   77 4/19/2021 21:25:39 42.40066 -70.98802 96730   0.0 mph 428.04 9.57
> > 617 21  25  39
> > 3   79 4/19/2021 21:25:41 42.40066 -70.98802 98800   0.2 mph 427.10 9.57
> > 1027 21  25  41
> > 4   80 4/19/2021 21:25:42 42.40066 -70.98802 96510     2 mph 427.99 9.58
> > 1381 21  25  42
> > 5   81 4/19/2021 21:25:43 42.40067 -70.98801 95540     3 mph 427.99 9.58
> > 1271 21  25  43
> > 6   82 4/19/2021 21:25:44 42.40068 -70.98799 94720     4 mph 427.20 9.57
> > 910 21  25  44
> > 7   83 4/19/2021 21:25:45 42.40069 -70.98797 94040     5 mph 427.18 9.57
> > 652 21  25  45
> > 8   84 4/19/2021 21:25:46 42.40072 -70.98795 95710     7 mph 427.07 9.57
> > 943 21  25  46
> > 9   85 4/19/2021 21:25:47 42.40074 -70.98792 96200     8 mph 427.44 9.56
> > 650 21  25  47
> > 10  86 4/19/2021 21:25:48 42.40078 -70.98789 93750    10 mph 428.76 9.57
> > 761 21  25  48
> > 11  87 4/19/2021 21:25:49 42.40081 -70.98785 93360    11 mph 429.25 9.56
> > 1158 21  25  49
> > 12  88 4/19/2021 21:25:50 42.40084 -70.98781 94340    12 mph 429.56 9.57
> > 107 21  25  50
> > 13  89 4/19/2021 21:25:51 42.40087 -70.98775 92780    12 mph 428.62 9.56
> > 720 21  25  51
> >
> >
> > What I want to do is, for each point, identify all points within 50m of
> > that point, find the minimum value of the "Conc" attribute of each nearby
> > set of points (including the original point) and then create a new variable
> > ("Conc_min") and assign this minimum value to a new variable added to
> > "data".
> >
> > So far, I have the following code:
> >
> > library(spdep)
> > library(sf)
> >
> > setwd("C:\\mydirectory\\")
> > data<- read.csv("R_find_pts_testdata.csv")
> >
> > #make sure the data is a data frame
> > pts <- data.frame(data)
> >
> > #create spatial data frame and define projection
> > pts_coords <- cbind(pts$LON, pts$LAT)
> > data_pts <- SpatialPointsDataFrame(coords= pts_coords,
> > data=pts, proj4string = CRS("+proj=longlat +datum=WGS84"))
> >
> > #Re-project to WGS 84 / UTM zone 18N, so the analysis is in units of m
> > ptsUTM  <- sf::st_as_sf(data_pts, coords = c("LAT", "LON"), remove = F)%>%
> > st_transform(32618)
> >
> > #create 50 m buffer around each point then intersect with points and
> > finally find neighbors within the buffers
> > pts_buf <- sf::st_buffer(ptsUTM, 50)
> > coords  <- sf::st_coordinates(ptsUTM)
> > int <- sf::st_intersects(pts_buf, ptsUTM)
> > x   <- spdep::dnearneigh(coords, 0, 50)
> >
> > Now at this point, I'm not sure what to either the "int" (a sgbp list) or
> > "x" (nb object) objects (or even if I need them both)
> >
> > > int
> > Sparse geometry binary predicate list of length 974, where the predicate
> > was `intersects'
> > first 10 elements:
> >  1: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> >  2: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> >  3: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> >  4: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> >  5: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> >  6: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> >  7: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> >  8: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> >  9: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> >
> > > x
> > Neighbour list object:
> > Number of regions: 974
> > Number of nonzero links: 34802
> > Percentage nonzero weights: 3.668481
> > Average number of links: 35.73101
> >
> > One thought is that maybe I don't need the dnearneigh function and can
> > instead convert "int" into a dataframe and somehow merge or associate
> > (perhaps with an inner join) the ID fields of the buffered and intersecting
> > points and then compute the minimum value of "Conc" grouping by ID:
> >
> > > as.data.frame(int)
> >     row.id col.id
> > 1        1      1
> > 2        1      2
> > 3        1      3
> > 4        1      4
> > 5        1      5
> > 6        1      6
> > 7        1      7
> > 8        1      8
> > 9        1      9
> > 10       1     10
> > 11       1     11
> > 12       1     12
> > 13       1     13
> > 14       1     14
> > 15       1     15
> > 16       1     16
> > 17       1     17
> > 18       1     18
> > 19       2      1
> > 20       2      2
> > 21       2      3
> > 22       2      4
> > 23       2      5
> > 24       2      6
> > 25       2      7
> > 26       2      8
> > 27       2      9
> > 28       2     10
> >
> >
> > So in the above example I'd like to take the minimum of "Conc" among the
> > col.id points grouped with row.id 1 (i.e., col.ids 1-18) and assign the
> > minimum value of this group as a new variable in data (Data$Conc_min), and
> > do the same for row.id 2 and all the rest of the rows.
> >
> > I'm just not sure how to do this and I appreciate any help folks might
> > have on this matter!
> >
> > Many thanks,
> > -Tiffany
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From er|cjberger @end|ng |rom gm@||@com  Sun Nov  6 16:27:46 2022
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Sun, 6 Nov 2022 17:27:46 +0200
Subject: [R] 
 Selecting a minimum value of an attribute associated with point
 values neighboring a given point and assigning it as a new attribute
In-Reply-To: <CAGgJW767Ein1S+MSywb57B2UtmE0EJodDVokPEx5_-c5BTFR1Q@mail.gmail.com>
References: <BN6PR05MB35887EFE01222DBF7C359AAB903B9@BN6PR05MB3588.namprd05.prod.outlook.com>
 <CAGxFJbSkg9zAqk0dGcr3qJe2z2C04NEZFdHN8hWQA3oSbfHukQ@mail.gmail.com>
 <CAGgJW767Ein1S+MSywb57B2UtmE0EJodDVokPEx5_-c5BTFR1Q@mail.gmail.com>
Message-ID: <CAGgJW77yY0_GDQWEAxzSdRh0N3kXgj9zrSEYUzuVsFnHyeE=aA@mail.gmail.com>

Whoops ... left out a line in Part 2. Resending with the correction

## PART 2: You can use this code on the real data with f() defined appropriately
A <- matrix(0,N,N)
v <- 1:N
## get the indices (j,k) where j < k (as columns in a data.frame)
idx <- expand.grid(v,v) |> rename(j=Var1,k=Var2) |> filter(j < k)
u <- sapply(1:nrow(idx),
           \(i){ j <- idx$j[i]; k <- idx$k[i]; A[j,k] <<- f(j,k,myData) })
B <- A + t(A) + diag(N)
C <- diag(myData$Conc)
D <- B %*% C
D[D==0] <- NA
myData$Conc_min <- apply(D,MAR=1,\(v){min(v,na.rm=TRUE)})
print(head(myData))

On Sun, Nov 6, 2022 at 5:19 PM Eric Berger <ericjberger at gmail.com> wrote:
>
> Hi Tiffany,
> Here is some code that might help with your problem. I solve a "toy"
> problem that is conceptually the same.
> Part 1 sets up my toy problem. You would have to replace Part 1 with
> your real case. The main point is to define
> a function f(i, j, data) which returns 0 or 1 depending on whether the
> observations in rows i and j in your dataset 'data'
> are within your cutoff distance (i.e. 50m).
>
> You can then use Part 2 almost without changes (except for changing
> 'myData' to the correct name of your data).
>
> I hope this helps,
> Eric
>
> library(dplyr)
>
> ## PART 1: create fake data for minimal example
> set.seed(123) ## for reproducibility
> N <- 5       ## replace by number of locations (approx 9000 in your case)
> MAX_DISTANCE <- 2  ## 50 in your case
> myData <- data.frame(x=rnorm(N),y=rnorm(N),Conc=sample(1:N,N))
>
> ## The function which you must re-define for your actual case.
> f <- function(i,j,a) {
>  dist <- sqrt(sum((a[i,1:2] - a[j,1:2])^2)) ## Euclidean distance
>  as.integer(dist < MAX_DISTANCE)
> }
>
> ## PART 2: You can use this code on the real data with f() defined appropriately
> A <- matrix(0,N,N)
> ## get the indices (j,k) where j < k (as columns in a data.frame)
> idx <- expand.grid(v,v) |> rename(j=Var1,k=Var2) |> filter(j < k)
> u <- sapply(1:nrow(idx),\(i){ j <- idx$j[i]; k <- idx$k[i]; A[j,k] <<-
> f(j,k,myData) })
> B <- A + t(A) + diag(N)
> C <- diag(myData$Conc)
> D <- B %*% C
> D[D==0] <- NA
> myData$Conc_min <- apply(D,MAR=1,\(v){min(v,na.rm=TRUE)})
> print(head(myData))
>
>
> On Sat, Nov 5, 2022 at 5:14 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
> >
> > Probably better posted on R-sig-geo.
> >
> > -- Bert
> >
> > On Sat, Nov 5, 2022 at 12:36 AM Duhl, Tiffany R. <Tiffany.Duhl at tufts.edu>
> > wrote:
> >
> > > Hello,
> > >
> > > I have sets of spatial points with LAT, LON coords (unprojected, WGS84
> > > datum) and several value attributes associated with each point, from
> > > numerous csv files (with an average of 6,000-9,000 points in each file) as
> > > shown in the following example:
> > >
> > > data<- read.csv("R_find_pts_testdata.csv")
> > >
> > > > data
> > >     ID      Date         Time        LAT            LON           Conc
> > > Leg.Speed    CO2  H2O BC61 Hr Min Sec
> > > 1   76 4/19/2021 21:25:38 42.40066 -70.98802 99300   0.0 mph 428.39 9.57
> > > 578 21  25  38
> > > 2   77 4/19/2021 21:25:39 42.40066 -70.98802 96730   0.0 mph 428.04 9.57
> > > 617 21  25  39
> > > 3   79 4/19/2021 21:25:41 42.40066 -70.98802 98800   0.2 mph 427.10 9.57
> > > 1027 21  25  41
> > > 4   80 4/19/2021 21:25:42 42.40066 -70.98802 96510     2 mph 427.99 9.58
> > > 1381 21  25  42
> > > 5   81 4/19/2021 21:25:43 42.40067 -70.98801 95540     3 mph 427.99 9.58
> > > 1271 21  25  43
> > > 6   82 4/19/2021 21:25:44 42.40068 -70.98799 94720     4 mph 427.20 9.57
> > > 910 21  25  44
> > > 7   83 4/19/2021 21:25:45 42.40069 -70.98797 94040     5 mph 427.18 9.57
> > > 652 21  25  45
> > > 8   84 4/19/2021 21:25:46 42.40072 -70.98795 95710     7 mph 427.07 9.57
> > > 943 21  25  46
> > > 9   85 4/19/2021 21:25:47 42.40074 -70.98792 96200     8 mph 427.44 9.56
> > > 650 21  25  47
> > > 10  86 4/19/2021 21:25:48 42.40078 -70.98789 93750    10 mph 428.76 9.57
> > > 761 21  25  48
> > > 11  87 4/19/2021 21:25:49 42.40081 -70.98785 93360    11 mph 429.25 9.56
> > > 1158 21  25  49
> > > 12  88 4/19/2021 21:25:50 42.40084 -70.98781 94340    12 mph 429.56 9.57
> > > 107 21  25  50
> > > 13  89 4/19/2021 21:25:51 42.40087 -70.98775 92780    12 mph 428.62 9.56
> > > 720 21  25  51
> > >
> > >
> > > What I want to do is, for each point, identify all points within 50m of
> > > that point, find the minimum value of the "Conc" attribute of each nearby
> > > set of points (including the original point) and then create a new variable
> > > ("Conc_min") and assign this minimum value to a new variable added to
> > > "data".
> > >
> > > So far, I have the following code:
> > >
> > > library(spdep)
> > > library(sf)
> > >
> > > setwd("C:\\mydirectory\\")
> > > data<- read.csv("R_find_pts_testdata.csv")
> > >
> > > #make sure the data is a data frame
> > > pts <- data.frame(data)
> > >
> > > #create spatial data frame and define projection
> > > pts_coords <- cbind(pts$LON, pts$LAT)
> > > data_pts <- SpatialPointsDataFrame(coords= pts_coords,
> > > data=pts, proj4string = CRS("+proj=longlat +datum=WGS84"))
> > >
> > > #Re-project to WGS 84 / UTM zone 18N, so the analysis is in units of m
> > > ptsUTM  <- sf::st_as_sf(data_pts, coords = c("LAT", "LON"), remove = F)%>%
> > > st_transform(32618)
> > >
> > > #create 50 m buffer around each point then intersect with points and
> > > finally find neighbors within the buffers
> > > pts_buf <- sf::st_buffer(ptsUTM, 50)
> > > coords  <- sf::st_coordinates(ptsUTM)
> > > int <- sf::st_intersects(pts_buf, ptsUTM)
> > > x   <- spdep::dnearneigh(coords, 0, 50)
> > >
> > > Now at this point, I'm not sure what to either the "int" (a sgbp list) or
> > > "x" (nb object) objects (or even if I need them both)
> > >
> > > > int
> > > Sparse geometry binary predicate list of length 974, where the predicate
> > > was `intersects'
> > > first 10 elements:
> > >  1: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> > >  2: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> > >  3: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> > >  4: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> > >  5: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> > >  6: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> > >  7: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> > >  8: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> > >  9: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> > >
> > > > x
> > > Neighbour list object:
> > > Number of regions: 974
> > > Number of nonzero links: 34802
> > > Percentage nonzero weights: 3.668481
> > > Average number of links: 35.73101
> > >
> > > One thought is that maybe I don't need the dnearneigh function and can
> > > instead convert "int" into a dataframe and somehow merge or associate
> > > (perhaps with an inner join) the ID fields of the buffered and intersecting
> > > points and then compute the minimum value of "Conc" grouping by ID:
> > >
> > > > as.data.frame(int)
> > >     row.id col.id
> > > 1        1      1
> > > 2        1      2
> > > 3        1      3
> > > 4        1      4
> > > 5        1      5
> > > 6        1      6
> > > 7        1      7
> > > 8        1      8
> > > 9        1      9
> > > 10       1     10
> > > 11       1     11
> > > 12       1     12
> > > 13       1     13
> > > 14       1     14
> > > 15       1     15
> > > 16       1     16
> > > 17       1     17
> > > 18       1     18
> > > 19       2      1
> > > 20       2      2
> > > 21       2      3
> > > 22       2      4
> > > 23       2      5
> > > 24       2      6
> > > 25       2      7
> > > 26       2      8
> > > 27       2      9
> > > 28       2     10
> > >
> > >
> > > So in the above example I'd like to take the minimum of "Conc" among the
> > > col.id points grouped with row.id 1 (i.e., col.ids 1-18) and assign the
> > > minimum value of this group as a new variable in data (Data$Conc_min), and
> > > do the same for row.id 2 and all the rest of the rows.
> > >
> > > I'm just not sure how to do this and I appreciate any help folks might
> > > have on this matter!
> > >
> > > Many thanks,
> > > -Tiffany
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> > >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.


From @@ch@ndh|@| @end|ng |rom bt|nternet@com  Sun Nov  6 17:21:23 2022
From: @@ch@ndh|@| @end|ng |rom bt|nternet@com (Amarjit Chandhial)
Date: Sun, 6 Nov 2022 16:21:23 +0000 (GMT)
Subject: [R] Associate a .R file with the RGui
Message-ID: <34bacfdd.1275e.1844dbf23cd.Webtop.107@btinternet.com>




Hi Uwe,


RGui does have advantages vs. RStudio, and vice-versa.

RStudio is much faster than it used to be.

I currently have .R files associated with RStudio, i.e. in File Explorer 
if I double-click on a .R file it opens in the editor in RStudio as an R 
script.

In File Explorer if I right-click on a .R file, Open with, I get the 
options: R for Windows GUI Front-end or RStudio or Search the Microsoft 
Store or choose another app.
If I choose R for Windows GUI Front-end, RGui (64-bit) opens, but no .R 
file, in the editor.
If I choose RStudio the .R file opens in the editor in RStudio as an R 
script.

 From the adaptation, if I choose R for Windows GUI Front-end, will the 
.R file open in RGui (64-bit) within the editor?


I have a new Windows PC and maybe, at least for the time being, it's 
best for me to have them associated with RStudio.

Although, yes, I agree, it should be naturally implemented in R, having 
installed RStudio.


thanks,
Amarjit




------ Original Message ------
From: "Uwe Ligges" <ligges at statistik.tu-dortmund.de>
To: "David Winsemius" <dwinsemius at comcast.net>; "Amarjit Chandhial" 
<a.chandhial at btinternet.com>; "Jeff Newmiller" 
<jdnewmil at dcn.davis.ca.us>
Cc: "Amarjit Chandhial via R-help" <r-help at r-project.org>
Sent: Sunday, 6 Nov, 2022 At 15:15
Subject: Re: [R] Associate a .R file with the RGui


  On 06.11.2022 01:40, David Winsemius wrote:

  On 11/5/22 09:58, Amarjit Chandhial via R-help wrote:
  Hi Jeff,


  Please see my original question.

  You were told that RGui is not an editor.

  Are you implying that your initial message contained an implicit 
request for instructions on how to get R code in an .R file to be opened 
automagically when double-clicked or to have "open in <some editor>" 
appear when right-clicked? (I didn't see that clearly expressed.)

  If you want something else to happen with a file that has a .R 
extension when double-clicked or right-clicked in a GUI file manager, 
then you need to configure your OS to do whatever else it is that you 
expect. This is not really an R question. It's an OS question. There are 
many editors that can also bring up R consoles when the right  key combo 
is pressed. They do require some study for their specific actions, but 
this is not really the place to get guidance on the fine details.


  Friends, RGui contains an editor. It allows to send lines / code 
blocks to the R concole. We know users who need braille displays use the 
RGui internal editor as that apparently cooperates better with braille 
displays + R as many other editors.
  And as it does not hide half of R by its own functions, I'd pefer that 
over some very popular other editors if I had no other choice.


  To answer the OP's question, R does not have a built in way to get 
this task directly done, but searching the web suggests a rather simple 
way (well,m a hack as starting R with other command args may fail now, 
but you can extend this and look for a specific naming scheme):

  <https://stat.ethz.ch/pipermail/r-help/2007-August/138064.html 
<https://stat.ethz.ch/pipermail/r-help/2007-August/138064.html> >

  let is adapt this for the recent version of R:


  1. Add the line

  if ( length(z <- commandArgs(TRUE)) ) utils::file.edit(z[1])

  to the Rprofile.site file; and

  2. Edit the registry to associate the .R extension with the command

  C:\Program Files\R\R-4.2.2\bin\x64\Rgui.exe --args "%1"


  I think we should implement this in R anyway.

  Best,
  Uwe Ligges







	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Sun Nov  6 18:19:36 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Sun, 6 Nov 2022 18:19:36 +0100
Subject: [R] Associate a .R file with the RGui
In-Reply-To: <34bacfdd.1275e.1844dbf23cd.Webtop.107@btinternet.com>
References: <34bacfdd.1275e.1844dbf23cd.Webtop.107@btinternet.com>
Message-ID: <ff45beb8-bdb2-4b0b-d7a7-2c985c58cb49@statistik.tu-dortmund.de>



On 06.11.2022 17:21, Amarjit Chandhial via R-help wrote:
> 
> 
> 
> Hi Uwe,
> 
> 
> RGui does have advantages vs. RStudio, and vice-versa.
> 
> RStudio is much faster than it used to be.
> 
> I currently have .R files associated with RStudio, i.e. in File Explorer
> if I double-click on a .R file it opens in the editor in RStudio as an R
> script.
> 
> In File Explorer if I right-click on a .R file, Open with, I get the
> options: R for Windows GUI Front-end or RStudio or Search the Microsoft
> Store or choose another app.
> If I choose R for Windows GUI Front-end, RGui (64-bit) opens, but no .R
> file, in the editor.
> If I choose RStudio the .R file opens in the editor in RStudio as an R
> script.
> 
>   From the adaptation, if I choose R for Windows GUI Front-end, will the
> .R file open in RGui (64-bit) within the editor?

Yes.


> 
> 
> I have a new Windows PC and maybe, at least for the time being, it's
> best for me to have them associated with RStudio.
> 
> Although, yes, I agree, it should be naturally implemented in R, having
> installed RStudio.

I meant to implement that one can choose the internal editor to open .R 
files. File associations can be set by RStudio, too, but that is not an 
R(-core) matter.

Best,
Uwe Ligges



> 
> thanks,
> Amarjit
> 
> 
> 
> 
> ------ Original Message ------
> From: "Uwe Ligges" <ligges at statistik.tu-dortmund.de>
> To: "David Winsemius" <dwinsemius at comcast.net>; "Amarjit Chandhial"
> <a.chandhial at btinternet.com>; "Jeff Newmiller"
> <jdnewmil at dcn.davis.ca.us>
> Cc: "Amarjit Chandhial via R-help" <r-help at r-project.org>
> Sent: Sunday, 6 Nov, 2022 At 15:15
> Subject: Re: [R] Associate a .R file with the RGui
> 
> 
>    On 06.11.2022 01:40, David Winsemius wrote:
> 
>    On 11/5/22 09:58, Amarjit Chandhial via R-help wrote:
>    Hi Jeff,
> 
> 
>    Please see my original question.
> 
>    You were told that RGui is not an editor.
> 
>    Are you implying that your initial message contained an implicit
> request for instructions on how to get R code in an .R file to be opened
> automagically when double-clicked or to have "open in <some editor>"
> appear when right-clicked? (I didn't see that clearly expressed.)
> 
>    If you want something else to happen with a file that has a .R
> extension when double-clicked or right-clicked in a GUI file manager,
> then you need to configure your OS to do whatever else it is that you
> expect. This is not really an R question. It's an OS question. There are
> many editors that can also bring up R consoles when the right  key combo
> is pressed. They do require some study for their specific actions, but
> this is not really the place to get guidance on the fine details.
> 
> 
>    Friends, RGui contains an editor. It allows to send lines / code
> blocks to the R concole. We know users who need braille displays use the
> RGui internal editor as that apparently cooperates better with braille
> displays + R as many other editors.
>    And as it does not hide half of R by its own functions, I'd pefer that
> over some very popular other editors if I had no other choice.
> 
> 
>    To answer the OP's question, R does not have a built in way to get
> this task directly done, but searching the web suggests a rather simple
> way (well,m a hack as starting R with other command args may fail now,
> but you can extend this and look for a specific naming scheme):
> 
>    <https://stat.ethz.ch/pipermail/r-help/2007-August/138064.html
> <https://stat.ethz.ch/pipermail/r-help/2007-August/138064.html> >
> 
>    let is adapt this for the recent version of R:
> 
> 
>    1. Add the line
> 
>    if ( length(z <- commandArgs(TRUE)) ) utils::file.edit(z[1])
> 
>    to the Rprofile.site file; and
> 
>    2. Edit the registry to associate the .R extension with the command
> 
>    C:\Program Files\R\R-4.2.2\bin\x64\Rgui.exe --args "%1"
> 
> 
>    I think we should implement this in R anyway.
> 
>    Best,
>    Uwe Ligges
> 
> 
> 
> 
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @@ch@ndh|@| @end|ng |rom bt|nternet@com  Sun Nov  6 19:43:12 2022
From: @@ch@ndh|@| @end|ng |rom bt|nternet@com (Amarjit Chandhial)
Date: Sun, 6 Nov 2022 18:43:12 +0000 (GMT)
Subject: [R] Associate a .R file with the RGui
In-Reply-To: <ff45beb8-bdb2-4b0b-d7a7-2c985c58cb49@statistik.tu-dortmund.de>
References: <34bacfdd.1275e.1844dbf23cd.Webtop.107@btinternet.com>
 <ff45beb8-bdb2-4b0b-d7a7-2c985c58cb49@statistik.tu-dortmund.de>
Message-ID: <166d95ad.1a1a4.1844e40fb34.Webtop.84@btinternet.com>




Hi Uwe,



I can do 1.


   1. Add the line
    if ( length(z <- commandArgs(TRUE)) ) utils::file.edit(z[1])
    to the Rprofile.site file; and

My Rprofile.site file is: "C:/PROGRA~1/R/R-42~1.2/etc/Rprofile.site"

How do I do 2, step-by-step?

    2. Edit the registry to associate the .R extension with the command
    C:\Program Files\R\R-4.2.2\bin\x64\Rgui.exe --args "%1"



Amarjit



------ Original Message ------
From: "Uwe Ligges" <ligges at statistik.tu-dortmund.de>
To: "Amarjit Chandhial" <a.chandhial at btinternet.com>; "David Winsemius" 
<dwinsemius at comcast.net>; "Jeff Newmiller" <jdnewmil at dcn.davis.ca.us>
Cc: "Amarjit Chandhial via R-help" <r-help at r-project.org>
Sent: Sunday, 6 Nov, 2022 At 17:19
Subject: Re: [R] Associate a .R file with the RGui

On 06.11.2022 17:21, Amarjit Chandhial via R-help wrote:

Hi Uwe,

RGui does have advantages vs. RStudio, and vice-versa.
RStudio is much faster than it used to be.
I currently have .R files associated with RStudio, i.e. in File Explorer
if I double-click on a .R file it opens in the editor in RStudio as an R
script.
In File Explorer if I right-click on a .R file, Open with, I get the
options: R for Windows GUI Front-end or RStudio or Search the Microsoft
Store or choose another app.
If I choose R for Windows GUI Front-end, RGui (64-bit) opens, but no .R
file, in the editor.
If I choose RStudio the .R file opens in the editor in RStudio as an R
script.
   From the adaptation, if I choose R for Windows GUI Front-end, will 
the
.R file open in RGui (64-bit) within the editor?
Yes.


I have a new Windows PC and maybe, at least for the time being, it's
best for me to have them associated with RStudio.
Although, yes, I agree, it should be naturally implemented in R, having
installed RStudio.
I meant to implement that one can choose the internal editor to open .R 
files. File associations can be set by RStudio, too, but that is not an 
R(-core) matter.
Best,
Uwe Ligges


thanks,
Amarjit


------ Original Message ------
From: "Uwe Ligges" <ligges at statistik.tu-dortmund.de>
To: "David Winsemius" <dwinsemius at comcast.net>; "Amarjit Chandhial"
<a.chandhial at btinternet.com>; "Jeff Newmiller"
<jdnewmil at dcn.davis.ca.us>
Cc: "Amarjit Chandhial via R-help" <r-help at r-project.org>
Sent: Sunday, 6 Nov, 2022 At 15:15
Subject: Re: [R] Associate a .R file with the RGui

    On 06.11.2022 01:40, David Winsemius wrote:
    On 11/5/22 09:58, Amarjit Chandhial via R-help wrote:
    Hi Jeff,

    Please see my original question.
    You were told that RGui is not an editor.
    Are you implying that your initial message contained an implicit
request for instructions on how to get R code in an .R file to be opened
automagically when double-clicked or to have "open in <some editor>"
appear when right-clicked? (I didn't see that clearly expressed.)
    If you want something else to happen with a file that has a .R
extension when double-clicked or right-clicked in a GUI file manager,
then you need to configure your OS to do whatever else it is that you
expect. This is not really an R question. It's an OS question. There are
many editors that can also bring up R consoles when the right  key combo
is pressed. They do require some study for their specific actions, but
this is not really the place to get guidance on the fine details.

    Friends, RGui contains an editor. It allows to send lines / code
blocks to the R concole. We know users who need braille displays use the
RGui internal editor as that apparently cooperates better with braille
displays + R as many other editors.
    And as it does not hide half of R by its own functions, I'd pefer 
that
over some very popular other editors if I had no other choice.

    To answer the OP's question, R does not have a built in way to get
this task directly done, but searching the web suggests a rather simple
way (well,m a hack as starting R with other command args may fail now,
but you can extend this and look for a specific naming scheme):
    <https://stat.ethz.ch/pipermail/r-help/2007-August/138064.html 
<https://stat.ethz.ch/pipermail/r-help/2007-August/138064.html>
<https://stat.ethz.ch/pipermail/r-help/2007-August/138064.html 
<https://stat.ethz.ch/pipermail/r-help/2007-August/138064.html> > >
    let is adapt this for the recent version of R:

    1. Add the line
    if ( length(z <- commandArgs(TRUE)) ) utils::file.edit(z[1])
    to the Rprofile.site file; and
    2. Edit the registry to associate the .R extension with the command
    C:\Program Files\R\R-4.2.2\bin\x64\Rgui.exe --args "%1"

    I think we should implement this in R anyway.
    Best,
    Uwe Ligges



	[[alternative HTML version deleted]]
______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help 
<https://stat.ethz.ch/mailman/listinfo/r-help>
PLEASE do read the posting guide 
http://www.R-project.org/posting-guide.html 
<http://www.R-project.org/posting-guide.html>
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From n|ckmwr@y @end|ng |rom gm@||@com  Mon Nov  7 00:34:46 2022
From: n|ckmwr@y @end|ng |rom gm@||@com (Nick Wray)
Date: Sun, 6 Nov 2022 23:34:46 +0000
Subject: [R] (no subject)
Message-ID: <CABxY9BMoH17OD1e5eLRN8H0SNv1=LJKtRoRGeABLzAtxVxcw=w@mail.gmail.com>

Hello - I am using the MICE package to impute missing values - the input
data are up to six vectors of parallel hourly temperature measurements for
Scottish weather stations across a calendar year. None of the vectors have
more than 5% NAs as I have filtered ones with more out.  Most of the sets
work fine with MICE but with a few I get an error message:

This data set, which generated the error message has five columns

iter imp variable
  1   1  986Error in terms.formula(tmp, simplify = TRUE) :
  invalid term in model formula


986 is the station number which is the column name here for the first
column.  The third to fifth columns don't have any NAs and the first and
second have fewer than 1% - but they do have the NAs concentrated as
strings of 20 or so near the beginning of the data set.

I am puzzled as to why certain datasets, which don't seem very different
from the others provoke the error message - the only thing which I am
wondering is whether MICE has a problem with a too large concentration of
the NAs in particular regions but I can't find any reference to this in the
literature.  Has anyone else come across this as a problem, and if so, what
did they do about it?  Thanks Nick Wray

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Mon Nov  7 07:46:56 2022
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Sun, 6 Nov 2022 22:46:56 -0800
Subject: [R] 
 Is this *always* the intended R^2 value for no intercept in lm?
In-Reply-To: <CAGxFJbQTzxLtALLdcChx0dBhGRuEBvZBTrmebqVSmEqxNBE2ag@mail.gmail.com>
References: <CAGxFJbQTzxLtALLdcChx0dBhGRuEBvZBTrmebqVSmEqxNBE2ag@mail.gmail.com>
Message-ID: <C45C714C-B662-48B8-AC65-5DD6793DA5DB@comcast.net>

To Thierry; When you omit an intercept you require that the line in multivariate space that represents the ?predictions? go through the (0,0,0,?) I.e. the origin. It?s a fairly restrictive requirement. There IS an intercept, even though it?s not explicitly seen in the model. If it?s not required by theory in your domain of investigation, you are advised to avoid such a practice.

? 
David. 

Sent from my iPhone

> On Nov 5, 2022, at 12:41 PM, Bert Gunter <bgunter.4567 at gmail.com> wrote:
> 
> ?FAQ 7.41
> and
> https://stackoverflow.com/questions/57415793/r-squared-in-lm-for-ero-intercept-model
> 
> (among numerous others that could no doubt be found with a bit of
> searching).
> 
> In short, the "null models" against which you are comparing the fitted
> model are different with and without an intercept.
> 
> --Bert
> 
> 
> 
>> On Sat, Nov 5, 2022 at 11:52 AM Thierry Zell <thierry.zell at gmail.com> wrote:
>> 
>> I am puzzled by the computation of R^2 with intercept omitted that is
>> already illustrated by the following example taken from help("lm")
>> 
>> ## Annette Dobson (1990) "An Introduction to Generalized Linear Models".
>> ## Page 9: Plant Weight Data.
>> ctl <- c(4.17,5.58,5.18,6.11,4.50,4.61,5.17,4.53,5.33,5.14)
>> trt <- c(4.81,4.17,4.41,3.59,5.87,3.83,6.03,4.89,4.32,4.69)
>> group <- gl(2, 10, 20, labels = c("Ctl","Trt"))
>> weight <- c(ctl, trt)
>> lm.D9 <- lm(weight ~ group)
>> lm.D90 <- lm(weight ~ group - 1) # omitting intercept
>> 
>> The calculations for the R^2 for both models  are consistent with the
>> help("summary.lm") description:
>> "y* is the mean of y[i] if there is an intercept and zero otherwise."
>> Which causes a dramatic difference in the resulting R^2 values.
>> 
>> r2.D9 <- summary(lm.D9)$r.squared
>> r2.D90 <- summary(lm.D90)$r.squared
>> 
>> all.equal(r2.D9, 0.0730775989903856) #TRUE
>> all.equal(r2.D90, 0.981783272435264) #TRUE
>> 
>> This is counter-intuitive to say the least since the two models have
>> identical predictions and both models could be described more
>> accurately as two intercepts rather than zero. I see three
>> possibilities:
>> 
>> 1. This is the intended result, in which case no fix is required, but
>> I?d be curious to understand the argument better.
>> 2. This is an unfortunate outcome but not worth fixing as the user can
>> easily compute the correct R^2. In this case, I'd suggest that this
>> unintuitive behavior should be explicitly called out in the
>> documentation.
>> 3. This is a bug worth fixing.
>> 
>> I look forward to hearing the community?s opinion on this.
>> Thanks in advance!
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>> 
> 
>    [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From kry|ov@r00t @end|ng |rom gm@||@com  Mon Nov  7 09:20:58 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Mon, 7 Nov 2022 11:20:58 +0300
Subject: [R] (no subject)
In-Reply-To: <CABxY9BMoH17OD1e5eLRN8H0SNv1=LJKtRoRGeABLzAtxVxcw=w@mail.gmail.com>
References: <CABxY9BMoH17OD1e5eLRN8H0SNv1=LJKtRoRGeABLzAtxVxcw=w@mail.gmail.com>
Message-ID: <20221107112058.0bd0d8ea@Tarkus>

On Sun, 6 Nov 2022 23:34:46 +0000
Nick Wray <nickmwray at gmail.com> wrote:

> Most of the sets work fine with MICE but with a few I get an error
> message:
> 
> This data set, which generated the error message has five columns
> 
> iter imp variable
>   1   1  986Error in terms.formula(tmp, simplify = TRUE) :
>   invalid term in model formula

Currently, there doesn't seem to be any issues [*] related to your
problem, so you could be the first to report it. (This does look like a
bug in mice; at the very least, the error message could be improved.)
How could the maintainer reproduce your problem in order to debug it?
[**]

traceback() and options(error = recover) are invaluable when trying to
find out what is going on before a crash (see ?traceback, ?recover and
?browser for more information; also the free book R Inferno [***]).

For example, if you set options(error = recover) and then reproduce the
crash, you'll be able to print(tmp) at the time of the crash and see
the term that terms.formula is having a problem with. The next step
would be finding out how this formula came to be, and so on.

> 	[[alternative HTML version deleted]]

Please post in plain text to R mailing lists. This particular message
came through mostly fine, but in many cases, the plain text version
automatically generated by the sender's mailer from the user-composed
HTML version makes for very unpleasant reading.

-- 
Best regards,
Ivan

[*]
https://github.com/amices/mice/issues?q=invalid+term+in+model+formula

[**]
See also: https://www.chiark.greenend.org.uk/~sgtatham/bugs.html

[***]
https://www.burns-stat.com/documents/books/the-r-inferno/


From T|||@ny@Duh| @end|ng |rom tu|t@@edu  Sun Nov  6 17:40:18 2022
From: T|||@ny@Duh| @end|ng |rom tu|t@@edu (Duhl, Tiffany R.)
Date: Sun, 6 Nov 2022 16:40:18 +0000
Subject: [R] [External] Re: Selecting a minimum value of an attribute
 associated with point values neighboring a given point and assigning it as
 a new attribute
In-Reply-To: <CAGgJW77yY0_GDQWEAxzSdRh0N3kXgj9zrSEYUzuVsFnHyeE=aA@mail.gmail.com>
References: <BN6PR05MB35887EFE01222DBF7C359AAB903B9@BN6PR05MB3588.namprd05.prod.outlook.com>
 <CAGxFJbSkg9zAqk0dGcr3qJe2z2C04NEZFdHN8hWQA3oSbfHukQ@mail.gmail.com>
 <CAGgJW767Ein1S+MSywb57B2UtmE0EJodDVokPEx5_-c5BTFR1Q@mail.gmail.com>
 <CAGgJW77yY0_GDQWEAxzSdRh0N3kXgj9zrSEYUzuVsFnHyeE=aA@mail.gmail.com>
Message-ID: <BN6PR05MB3588015F46997E64D5F8F138903D9@BN6PR05MB3588.namprd05.prod.outlook.com>

Thanks so much Eric!

 I'm going to play around with your toy code (pun intended) & see if I can make it work for my application.

Cheers,
-Tiffany
________________________________
From: Eric Berger <ericjberger at gmail.com>
Sent: Sunday, November 6, 2022 10:27 AM
To: Bert Gunter <bgunter.4567 at gmail.com>
Cc: Duhl, Tiffany R. <Tiffany.Duhl at tufts.edu>; R-help <R-help at r-project.org>
Subject: [External] Re: [R] Selecting a minimum value of an attribute associated with point values neighboring a given point and assigning it as a new attribute

Whoops ... left out a line in Part 2. Resending with the correction

## PART 2: You can use this code on the real data with f() defined appropriately
A <- matrix(0,N,N)
v <- 1:N
## get the indices (j,k) where j < k (as columns in a data.frame)
idx <- expand.grid(v,v) |> rename(j=Var1,k=Var2) |> filter(j < k)
u <- sapply(1:nrow(idx),
           \(i){ j <- idx$j[i]; k <- idx$k[i]; A[j,k] <<- f(j,k,myData) })
B <- A + t(A) + diag(N)
C <- diag(myData$Conc)
D <- B %*% C
D[D==0] <- NA
myData$Conc_min <- apply(D,MAR=1,\(v){min(v,na.rm=TRUE)})
print(head(myData))

On Sun, Nov 6, 2022 at 5:19 PM Eric Berger <ericjberger at gmail.com> wrote:
>
> Hi Tiffany,
> Here is some code that might help with your problem. I solve a "toy"
> problem that is conceptually the same.
> Part 1 sets up my toy problem. You would have to replace Part 1 with
> your real case. The main point is to define
> a function f(i, j, data) which returns 0 or 1 depending on whether the
> observations in rows i and j in your dataset 'data'
> are within your cutoff distance (i.e. 50m).
>
> You can then use Part 2 almost without changes (except for changing
> 'myData' to the correct name of your data).
>
> I hope this helps,
> Eric
>
> library(dplyr)
>
> ## PART 1: create fake data for minimal example
> set.seed(123) ## for reproducibility
> N <- 5       ## replace by number of locations (approx 9000 in your case)
> MAX_DISTANCE <- 2  ## 50 in your case
> myData <- data.frame(x=rnorm(N),y=rnorm(N),Conc=sample(1:N,N))
>
> ## The function which you must re-define for your actual case.
> f <- function(i,j,a) {
>  dist <- sqrt(sum((a[i,1:2] - a[j,1:2])^2)) ## Euclidean distance
>  as.integer(dist < MAX_DISTANCE)
> }
>
> ## PART 2: You can use this code on the real data with f() defined appropriately
> A <- matrix(0,N,N)
> ## get the indices (j,k) where j < k (as columns in a data.frame)
> idx <- expand.grid(v,v) |> rename(j=Var1,k=Var2) |> filter(j < k)
> u <- sapply(1:nrow(idx),\(i){ j <- idx$j[i]; k <- idx$k[i]; A[j,k] <<-
> f(j,k,myData) })
> B <- A + t(A) + diag(N)
> C <- diag(myData$Conc)
> D <- B %*% C
> D[D==0] <- NA
> myData$Conc_min <- apply(D,MAR=1,\(v){min(v,na.rm=TRUE)})
> print(head(myData))
>
>
> On Sat, Nov 5, 2022 at 5:14 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
> >
> > Probably better posted on R-sig-geo.
> >
> > -- Bert
> >
> > On Sat, Nov 5, 2022 at 12:36 AM Duhl, Tiffany R. <Tiffany.Duhl at tufts.edu>
> > wrote:
> >
> > > Hello,
> > >
> > > I have sets of spatial points with LAT, LON coords (unprojected, WGS84
> > > datum) and several value attributes associated with each point, from
> > > numerous csv files (with an average of 6,000-9,000 points in each file) as
> > > shown in the following example:
> > >
> > > data<- read.csv("R_find_pts_testdata.csv")
> > >
> > > > data
> > >     ID      Date         Time        LAT            LON           Conc
> > > Leg.Speed    CO2  H2O BC61 Hr Min Sec
> > > 1   76 4/19/2021 21:25:38 42.40066 -70.98802 99300   0.0 mph 428.39 9.57
> > > 578 21  25  38
> > > 2   77 4/19/2021 21:25:39 42.40066 -70.98802 96730   0.0 mph 428.04 9.57
> > > 617 21  25  39
> > > 3   79 4/19/2021 21:25:41 42.40066 -70.98802 98800   0.2 mph 427.10 9.57
> > > 1027 21  25  41
> > > 4   80 4/19/2021 21:25:42 42.40066 -70.98802 96510     2 mph 427.99 9.58
> > > 1381 21  25  42
> > > 5   81 4/19/2021 21:25:43 42.40067 -70.98801 95540     3 mph 427.99 9.58
> > > 1271 21  25  43
> > > 6   82 4/19/2021 21:25:44 42.40068 -70.98799 94720     4 mph 427.20 9.57
> > > 910 21  25  44
> > > 7   83 4/19/2021 21:25:45 42.40069 -70.98797 94040     5 mph 427.18 9.57
> > > 652 21  25  45
> > > 8   84 4/19/2021 21:25:46 42.40072 -70.98795 95710     7 mph 427.07 9.57
> > > 943 21  25  46
> > > 9   85 4/19/2021 21:25:47 42.40074 -70.98792 96200     8 mph 427.44 9.56
> > > 650 21  25  47
> > > 10  86 4/19/2021 21:25:48 42.40078 -70.98789 93750    10 mph 428.76 9.57
> > > 761 21  25  48
> > > 11  87 4/19/2021 21:25:49 42.40081 -70.98785 93360    11 mph 429.25 9.56
> > > 1158 21  25  49
> > > 12  88 4/19/2021 21:25:50 42.40084 -70.98781 94340    12 mph 429.56 9.57
> > > 107 21  25  50
> > > 13  89 4/19/2021 21:25:51 42.40087 -70.98775 92780    12 mph 428.62 9.56
> > > 720 21  25  51
> > >
> > >
> > > What I want to do is, for each point, identify all points within 50m of
> > > that point, find the minimum value of the "Conc" attribute of each nearby
> > > set of points (including the original point) and then create a new variable
> > > ("Conc_min") and assign this minimum value to a new variable added to
> > > "data".
> > >
> > > So far, I have the following code:
> > >
> > > library(spdep)
> > > library(sf)
> > >
> > > setwd("C:\\mydirectory\\")
> > > data<- read.csv("R_find_pts_testdata.csv")
> > >
> > > #make sure the data is a data frame
> > > pts <- data.frame(data)
> > >
> > > #create spatial data frame and define projection
> > > pts_coords <- cbind(pts$LON, pts$LAT)
> > > data_pts <- SpatialPointsDataFrame(coords= pts_coords,
> > > data=pts, proj4string = CRS("+proj=longlat +datum=WGS84"))
> > >
> > > #Re-project to WGS 84 / UTM zone 18N, so the analysis is in units of m
> > > ptsUTM  <- sf::st_as_sf(data_pts, coords = c("LAT", "LON"), remove = F)%>%
> > > st_transform(32618)
> > >
> > > #create 50 m buffer around each point then intersect with points and
> > > finally find neighbors within the buffers
> > > pts_buf <- sf::st_buffer(ptsUTM, 50)
> > > coords  <- sf::st_coordinates(ptsUTM)
> > > int <- sf::st_intersects(pts_buf, ptsUTM)
> > > x   <- spdep::dnearneigh(coords, 0, 50)
> > >
> > > Now at this point, I'm not sure what to either the "int" (a sgbp list) or
> > > "x" (nb object) objects (or even if I need them both)
> > >
> > > > int
> > > Sparse geometry binary predicate list of length 974, where the predicate
> > > was `intersects'
> > > first 10 elements:
> > >  1: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> > >  2: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> > >  3: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> > >  4: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> > >  5: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> > >  6: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> > >  7: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> > >  8: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> > >  9: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> > >
> > > > x
> > > Neighbour list object:
> > > Number of regions: 974
> > > Number of nonzero links: 34802
> > > Percentage nonzero weights: 3.668481
> > > Average number of links: 35.73101
> > >
> > > One thought is that maybe I don't need the dnearneigh function and can
> > > instead convert "int" into a dataframe and somehow merge or associate
> > > (perhaps with an inner join) the ID fields of the buffered and intersecting
> > > points and then compute the minimum value of "Conc" grouping by ID:
> > >
> > > > as.data.frame(int)
> > >     row.id col.id
> > > 1        1      1
> > > 2        1      2
> > > 3        1      3
> > > 4        1      4
> > > 5        1      5
> > > 6        1      6
> > > 7        1      7
> > > 8        1      8
> > > 9        1      9
> > > 10       1     10
> > > 11       1     11
> > > 12       1     12
> > > 13       1     13
> > > 14       1     14
> > > 15       1     15
> > > 16       1     16
> > > 17       1     17
> > > 18       1     18
> > > 19       2      1
> > > 20       2      2
> > > 21       2      3
> > > 22       2      4
> > > 23       2      5
> > > 24       2      6
> > > 25       2      7
> > > 26       2      8
> > > 27       2      9
> > > 28       2     10
> > >
> > >
> > > So in the above example I'd like to take the minimum of "Conc" among the
> > > col.id points grouped with row.id 1 (i.e., col.ids 1-18) and assign the
> > > minimum value of this group as a new variable in data (Data$Conc_min), and
> > > do the same for row.id 2 and all the rest of the rows.
> > >
> > > I'm just not sure how to do this and I appreciate any help folks might
> > > have on this matter!
> > >
> > > Many thanks,
> > > -Tiffany
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> > >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.

Caution: This message originated from outside of the Tufts University organization. Please exercise caution when clicking links or opening attachments. When in doubt, email the TTS Service Desk at it at tufts.edu<mailto:it at tufts.edu> or call them directly at 617-627-3376.


	[[alternative HTML version deleted]]


From t@v|b@r @end|ng |rom gm@||@com  Mon Nov  7 14:11:18 2022
From: t@v|b@r @end|ng |rom gm@||@com (Micha Silver)
Date: Mon, 7 Nov 2022 15:11:18 +0200
Subject: [R] [External] Re: Selecting a minimum value of an attribute
 associated with point values neighboring a given point and assigning it as
 a new attribute
In-Reply-To: <BN6PR05MB3588015F46997E64D5F8F138903D9@BN6PR05MB3588.namprd05.prod.outlook.com>
References: <BN6PR05MB35887EFE01222DBF7C359AAB903B9@BN6PR05MB3588.namprd05.prod.outlook.com>
 <CAGxFJbSkg9zAqk0dGcr3qJe2z2C04NEZFdHN8hWQA3oSbfHukQ@mail.gmail.com>
 <CAGgJW767Ein1S+MSywb57B2UtmE0EJodDVokPEx5_-c5BTFR1Q@mail.gmail.com>
 <CAGgJW77yY0_GDQWEAxzSdRh0N3kXgj9zrSEYUzuVsFnHyeE=aA@mail.gmail.com>
 <BN6PR05MB3588015F46997E64D5F8F138903D9@BN6PR05MB3588.namprd05.prod.outlook.com>
Message-ID: <3247be10-6d5c-12d5-1634-2a9e934f431e@gmail.com>

Eric's solution notwithstanding, here's a more "spatial" approach.


I first create a fictitious set of 1000 points (and save to CSV to 
replicate your workflow)

library(sf)
library(spdep)

# Prepare fictitious data
# Create a data.frame with 1000 random points, and save to CSV
LON <- runif(1000, -70.0, -69.0)
LAT <- runif(1000, 42.0, 43.0)
Conc <- runif(1000, 90000, 100000)
df <- data.frame(LON, LAT, Conc)
csv_file = "/tmp/pts_testdata.csv"
write.csv(df, csv_file)


Now read that CSV back in directly as an sf object (No need for the old 
SpatialPointsDataFrame). THen create a distance matrix for all points, 
which contains indicies to those points within a certain buffer 
distance, just as you did in your example.


# Read back in as sf object, including row index
pts <- st_as_sf(read.csv(csv_file), coords=c('LON', 'LAT'), crs=4326)
dist_matrix <- dnearneigh(pts, 0, 100, use_s2=TRUE) # use_s2 since these 
are lon/lat

Now I prepare a function to get the minimum Conv value among all points 
within the buffer distance to a given single point:
# Function to get minimum Conc values for one row of distance matrix
MinConc <- function(x, lst, pts) {
 ? # x is an index to a single point,
 ? # lst is a list of point indices from distance matrix
 ? # that are within the buffer distance
 ? Concs <- lapply(lst, function(p) {
 ??? pts$Conc[p]
 ? })
 ? return(min(Concs[[1]]))
}

Next run that function on all points to get a list of minimum Conv 
values for all points, and merge back to pts.


# Now apply this function to all points in pts
Conc_min <- lapply(pts$X, function(i){
 ? MinConc(i, dist_matrix[i], pts)
})
Conc_min <- data.frame("Conc_min" = as.integer(Conc_min))

# Add back as new attrib to original points sf object
pts_with_min <- do.call(cbind, c(pts, Conc_min))

HTH,

Micha



On 06/11/2022 18:40, Duhl, Tiffany R. wrote:
> Thanks so much Eric!
>
>   I'm going to play around with your toy code (pun intended) & see if I can make it work for my application.
>
> Cheers,
> -Tiffany
> ________________________________
> From: Eric Berger <ericjberger at gmail.com>
> Sent: Sunday, November 6, 2022 10:27 AM
> To: Bert Gunter <bgunter.4567 at gmail.com>
> Cc: Duhl, Tiffany R. <Tiffany.Duhl at tufts.edu>; R-help <R-help at r-project.org>
> Subject: [External] Re: [R] Selecting a minimum value of an attribute associated with point values neighboring a given point and assigning it as a new attribute
>
> Whoops ... left out a line in Part 2. Resending with the correction
>
> ## PART 2: You can use this code on the real data with f() defined appropriately
> A <- matrix(0,N,N)
> v <- 1:N
> ## get the indices (j,k) where j < k (as columns in a data.frame)
> idx <- expand.grid(v,v) |> rename(j=Var1,k=Var2) |> filter(j < k)
> u <- sapply(1:nrow(idx),
>             \(i){ j <- idx$j[i]; k <- idx$k[i]; A[j,k] <<- f(j,k,myData) })
> B <- A + t(A) + diag(N)
> C <- diag(myData$Conc)
> D <- B %*% C
> D[D==0] <- NA
> myData$Conc_min <- apply(D,MAR=1,\(v){min(v,na.rm=TRUE)})
> print(head(myData))
>
> On Sun, Nov 6, 2022 at 5:19 PM Eric Berger <ericjberger at gmail.com> wrote:
>> Hi Tiffany,
>> Here is some code that might help with your problem. I solve a "toy"
>> problem that is conceptually the same.
>> Part 1 sets up my toy problem. You would have to replace Part 1 with
>> your real case. The main point is to define
>> a function f(i, j, data) which returns 0 or 1 depending on whether the
>> observations in rows i and j in your dataset 'data'
>> are within your cutoff distance (i.e. 50m).
>>
>> You can then use Part 2 almost without changes (except for changing
>> 'myData' to the correct name of your data).
>>
>> I hope this helps,
>> Eric
>>
>> library(dplyr)
>>
>> ## PART 1: create fake data for minimal example
>> set.seed(123) ## for reproducibility
>> N <- 5       ## replace by number of locations (approx 9000 in your case)
>> MAX_DISTANCE <- 2  ## 50 in your case
>> myData <- data.frame(x=rnorm(N),y=rnorm(N),Conc=sample(1:N,N))
>>
>> ## The function which you must re-define for your actual case.
>> f <- function(i,j,a) {
>>   dist <- sqrt(sum((a[i,1:2] - a[j,1:2])^2)) ## Euclidean distance
>>   as.integer(dist < MAX_DISTANCE)
>> }
>>
>> ## PART 2: You can use this code on the real data with f() defined appropriately
>> A <- matrix(0,N,N)
>> ## get the indices (j,k) where j < k (as columns in a data.frame)
>> idx <- expand.grid(v,v) |> rename(j=Var1,k=Var2) |> filter(j < k)
>> u <- sapply(1:nrow(idx),\(i){ j <- idx$j[i]; k <- idx$k[i]; A[j,k] <<-
>> f(j,k,myData) })
>> B <- A + t(A) + diag(N)
>> C <- diag(myData$Conc)
>> D <- B %*% C
>> D[D==0] <- NA
>> myData$Conc_min <- apply(D,MAR=1,\(v){min(v,na.rm=TRUE)})
>> print(head(myData))
>>
>>
>> On Sat, Nov 5, 2022 at 5:14 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>>> Probably better posted on R-sig-geo.
>>>
>>> -- Bert
>>>
>>> On Sat, Nov 5, 2022 at 12:36 AM Duhl, Tiffany R. <Tiffany.Duhl at tufts.edu>
>>> wrote:
>>>
>>>> Hello,
>>>>
>>>> I have sets of spatial points with LAT, LON coords (unprojected, WGS84
>>>> datum) and several value attributes associated with each point, from
>>>> numerous csv files (with an average of 6,000-9,000 points in each file) as
>>>> shown in the following example:
>>>>
>>>> data<- read.csv("R_find_pts_testdata.csv")
>>>>
>>>>> data
>>>>      ID      Date         Time        LAT            LON           Conc
>>>> Leg.Speed    CO2  H2O BC61 Hr Min Sec
>>>> 1   76 4/19/2021 21:25:38 42.40066 -70.98802 99300   0.0 mph 428.39 9.57
>>>> 578 21  25  38
>>>> 2   77 4/19/2021 21:25:39 42.40066 -70.98802 96730   0.0 mph 428.04 9.57
>>>> 617 21  25  39
>>>> 3   79 4/19/2021 21:25:41 42.40066 -70.98802 98800   0.2 mph 427.10 9.57
>>>> 1027 21  25  41
>>>> 4   80 4/19/2021 21:25:42 42.40066 -70.98802 96510     2 mph 427.99 9.58
>>>> 1381 21  25  42
>>>> 5   81 4/19/2021 21:25:43 42.40067 -70.98801 95540     3 mph 427.99 9.58
>>>> 1271 21  25  43
>>>> 6   82 4/19/2021 21:25:44 42.40068 -70.98799 94720     4 mph 427.20 9.57
>>>> 910 21  25  44
>>>> 7   83 4/19/2021 21:25:45 42.40069 -70.98797 94040     5 mph 427.18 9.57
>>>> 652 21  25  45
>>>> 8   84 4/19/2021 21:25:46 42.40072 -70.98795 95710     7 mph 427.07 9.57
>>>> 943 21  25  46
>>>> 9   85 4/19/2021 21:25:47 42.40074 -70.98792 96200     8 mph 427.44 9.56
>>>> 650 21  25  47
>>>> 10  86 4/19/2021 21:25:48 42.40078 -70.98789 93750    10 mph 428.76 9.57
>>>> 761 21  25  48
>>>> 11  87 4/19/2021 21:25:49 42.40081 -70.98785 93360    11 mph 429.25 9.56
>>>> 1158 21  25  49
>>>> 12  88 4/19/2021 21:25:50 42.40084 -70.98781 94340    12 mph 429.56 9.57
>>>> 107 21  25  50
>>>> 13  89 4/19/2021 21:25:51 42.40087 -70.98775 92780    12 mph 428.62 9.56
>>>> 720 21  25  51
>>>>
>>>>
>>>> What I want to do is, for each point, identify all points within 50m of
>>>> that point, find the minimum value of the "Conc" attribute of each nearby
>>>> set of points (including the original point) and then create a new variable
>>>> ("Conc_min") and assign this minimum value to a new variable added to
>>>> "data".
>>>>
>>>> So far, I have the following code:
>>>>
>>>> library(spdep)
>>>> library(sf)
>>>>
>>>> setwd("C:\\mydirectory\\")
>>>> data<- read.csv("R_find_pts_testdata.csv")
>>>>
>>>> #make sure the data is a data frame
>>>> pts <- data.frame(data)
>>>>
>>>> #create spatial data frame and define projection
>>>> pts_coords <- cbind(pts$LON, pts$LAT)
>>>> data_pts <- SpatialPointsDataFrame(coords= pts_coords,
>>>> data=pts, proj4string = CRS("+proj=longlat +datum=WGS84"))
>>>>
>>>> #Re-project to WGS 84 / UTM zone 18N, so the analysis is in units of m
>>>> ptsUTM  <- sf::st_as_sf(data_pts, coords = c("LAT", "LON"), remove = F)%>%
>>>> st_transform(32618)
>>>>
>>>> #create 50 m buffer around each point then intersect with points and
>>>> finally find neighbors within the buffers
>>>> pts_buf <- sf::st_buffer(ptsUTM, 50)
>>>> coords  <- sf::st_coordinates(ptsUTM)
>>>> int <- sf::st_intersects(pts_buf, ptsUTM)
>>>> x   <- spdep::dnearneigh(coords, 0, 50)
>>>>
>>>> Now at this point, I'm not sure what to either the "int" (a sgbp list) or
>>>> "x" (nb object) objects (or even if I need them both)
>>>>
>>>>> int
>>>> Sparse geometry binary predicate list of length 974, where the predicate
>>>> was `intersects'
>>>> first 10 elements:
>>>>   1: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
>>>>   2: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
>>>>   3: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
>>>>   4: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
>>>>   5: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
>>>>   6: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
>>>>   7: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
>>>>   8: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
>>>>   9: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
>>>>
>>>>> x
>>>> Neighbour list object:
>>>> Number of regions: 974
>>>> Number of nonzero links: 34802
>>>> Percentage nonzero weights: 3.668481
>>>> Average number of links: 35.73101
>>>>
>>>> One thought is that maybe I don't need the dnearneigh function and can
>>>> instead convert "int" into a dataframe and somehow merge or associate
>>>> (perhaps with an inner join) the ID fields of the buffered and intersecting
>>>> points and then compute the minimum value of "Conc" grouping by ID:
>>>>
>>>>> as.data.frame(int)
>>>>      row.id col.id
>>>> 1        1      1
>>>> 2        1      2
>>>> 3        1      3
>>>> 4        1      4
>>>> 5        1      5
>>>> 6        1      6
>>>> 7        1      7
>>>> 8        1      8
>>>> 9        1      9
>>>> 10       1     10
>>>> 11       1     11
>>>> 12       1     12
>>>> 13       1     13
>>>> 14       1     14
>>>> 15       1     15
>>>> 16       1     16
>>>> 17       1     17
>>>> 18       1     18
>>>> 19       2      1
>>>> 20       2      2
>>>> 21       2      3
>>>> 22       2      4
>>>> 23       2      5
>>>> 24       2      6
>>>> 25       2      7
>>>> 26       2      8
>>>> 27       2      9
>>>> 28       2     10
>>>>
>>>>
>>>> So in the above example I'd like to take the minimum of "Conc" among the
>>>> col.id points grouped with row.id 1 (i.e., col.ids 1-18) and assign the
>>>> minimum value of this group as a new variable in data (Data$Conc_min), and
>>>> do the same for row.id 2 and all the rest of the rows.
>>>>
>>>> I'm just not sure how to do this and I appreciate any help folks might
>>>> have on this matter!
>>>>
>>>> Many thanks,
>>>> -Tiffany
>>>>
>>>>          [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
> Caution: This message originated from outside of the Tufts University organization. Please exercise caution when clicking links or opening attachments. When in doubt, email the TTS Service Desk at it at tufts.edu<mailto:it at tufts.edu> or call them directly at 617-627-3376.
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Micha Silver
Ben Gurion Univ.
Sde Boker, Remote Sensing Lab
cell: +972-523-665918


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Nov  7 15:00:18 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 7 Nov 2022 15:00:18 +0100
Subject: [R] Associate a .R file with the RGui
In-Reply-To: <166d95ad.1a1a4.1844e40fb34.Webtop.84@btinternet.com>
References: <34bacfdd.1275e.1844dbf23cd.Webtop.107@btinternet.com>
 <ff45beb8-bdb2-4b0b-d7a7-2c985c58cb49@statistik.tu-dortmund.de>
 <166d95ad.1a1a4.1844e40fb34.Webtop.84@btinternet.com>
Message-ID: <8633438b-e1e3-5cf9-9e87-8fe197a1bf94@statistik.tu-dortmund.de>



On 06.11.2022 19:43, Amarjit Chandhial wrote:
> 
> Hi Uwe,
> 
> 
> 
> 
> I can do 1.
> 
> 
> 
> 1. Add the line
> 
> if ( length(z <- commandArgs(TRUE)) ) utils::file.edit(z[1])
> 
> to the Rprofile.site file; and
> 
> 
> My Rprofile.site file is: "C:/PROGRA~1/R/R-42~1.2/etc/Rprofile.site"
> 
> 
> 
> How do I do 2, step-by-step?
> 
> 
> 2. Edit the registry to associate the .R extension with the command
> 
> C:\Program Files\R\R-4.2.2\bin\x64\Rgui.exe --args "%1"

If you have not .R file association yet, you can add the line above when 
being asked.
If you have one, simply change the registry key

Computer\HKEY_CLASSES_ROOT\R_auto_file\shell\open\command

There is a standard value as extendable string (REG_EXPAND_SZ) and you 
simply replace its content by

"C:\Program Files\R\R-4.2.2\bin\x64\Rgui.exe" --args "%1"


and in

Computer\HKEY_CLASSES_ROOT\.R

there shoudl be a standard string (REG_SZ)
R_auto_file

Best,
Uwe Ligges





> 
> 
> 
> Amarjit
> 
> 
> 
> 
> 
> 
>     ------ Original Message ------
>     From: "Uwe Ligges" <ligges at statistik.tu-dortmund.de>
>     To: "Amarjit Chandhial" <a.chandhial at btinternet.com>; "David
>     Winsemius" <dwinsemius at comcast.net>; "Jeff Newmiller"
>     <jdnewmil at dcn.davis.ca.us>
>     Cc: "Amarjit Chandhial via R-help" <r-help at r-project.org>
>     Sent: Sunday, 6 Nov, 2022 At 17:19
>     Subject: Re: [R] Associate a .R file with the RGui
> 
> 
> 
>     On 06.11.2022 17:21, Amarjit Chandhial via R-help wrote:
>     			
> 
> 
>     Hi Uwe,
> 
> 
>     RGui does have advantages vs. RStudio, and vice-versa.
> 
>     RStudio is much faster than it used to be.
> 
>     I currently have .R files associated with RStudio, i.e. in File Explorer
>     if I double-click on a .R file it opens in the editor in RStudio as an R
>     script.
> 
>     In File Explorer if I right-click on a .R file, Open with, I get the
>     options: R for Windows GUI Front-end or RStudio or Search the Microsoft
>     Store or choose another app.
>     If I choose R for Windows GUI Front-end, RGui (64-bit) opens, but no .R
>     file, in the editor.
>     If I choose RStudio the .R file opens in the editor in RStudio as an R
>     script.
> 
>      From the adaptation, if I choose R for Windows GUI Front-end, will the
>     .R file open in RGui (64-bit) within the editor?
> 
> 
>     Yes.
> 
> 
>     			
> 
>     I have a new Windows PC and maybe, at least for the time being, it's
>     best for me to have them associated with RStudio.
> 
>     Although, yes, I agree, it should be naturally implemented in R, having
>     installed RStudio.
> 
> 
>     I meant to implement that one can choose the internal editor to open
>     .R files. File associations can be set by RStudio, too, but that is
>     not an R(-core) matter.
> 
>     Best,
>     Uwe Ligges
> 
> 
> 
>     			
>     thanks,
>     Amarjit
> 
> 
> 
> 
>     ------ Original Message ------
>     From: "Uwe Ligges" <ligges at statistik.tu-dortmund.de>
>     To: "David Winsemius" <dwinsemius at comcast.net>; "Amarjit Chandhial"
>     <a.chandhial at btinternet.com>; "Jeff Newmiller"
>     <jdnewmil at dcn.davis.ca.us>
>     Cc: "Amarjit Chandhial via R-help" <r-help at r-project.org>
>     Sent: Sunday, 6 Nov, 2022 At 15:15
>     Subject: Re: [R] Associate a .R file with the RGui
> 
> 
>     On 06.11.2022 01:40, David Winsemius wrote:
> 
>     On 11/5/22 09:58, Amarjit Chandhial via R-help wrote:
>     Hi Jeff,
> 
> 
>     Please see my original question.
> 
>     You were told that RGui is not an editor.
> 
>     Are you implying that your initial message contained an implicit
>     request for instructions on how to get R code in an .R file to be opened
>     automagically when double-clicked or to have "open in <some editor>"
>     appear when right-clicked? (I didn't see that clearly expressed.)
> 
>     If you want something else to happen with a file that has a .R
>     extension when double-clicked or right-clicked in a GUI file manager,
>     then you need to configure your OS to do whatever else it is that you
>     expect. This is not really an R question. It's an OS question. There are
>     many editors that can also bring up R consoles when the right key combo
>     is pressed. They do require some study for their specific actions, but
>     this is not really the place to get guidance on the fine details.
> 
> 
>     Friends, RGui contains an editor. It allows to send lines / code
>     blocks to the R concole. We know users who need braille displays use the
>     RGui internal editor as that apparently cooperates better with braille
>     displays + R as many other editors.
>     And as it does not hide half of R by its own functions, I'd pefer that
>     over some very popular other editors if I had no other choice.
> 
> 
>     To answer the OP's question, R does not have a built in way to get
>     this task directly done, but searching the web suggests a rather simple
>     way (well,m a hack as starting R with other command args may fail now,
>     but you can extend this and look for a specific naming scheme):
> 
>     <https://stat.ethz.ch/pipermail/r-help/2007-August/138064.html
>     <https://stat.ethz.ch/pipermail/r-help/2007-August/138064.html>
>     <https://stat.ethz.ch/pipermail/r-help/2007-August/138064.html
>     <https://stat.ethz.ch/pipermail/r-help/2007-August/138064.html>> >
> 
>     let is adapt this for the recent version of R:
> 
> 
>     1. Add the line
> 
>     if ( length(z <- commandArgs(TRUE)) ) utils::file.edit(z[1])
> 
>     to the Rprofile.site file; and
> 
>     2. Edit the registry to associate the .R extension with the command
> 
>     C:\Program Files\R\R-4.2.2\bin\x64\Rgui.exe --args "%1"
> 
> 
>     I think we should implement this in R anyway.
> 
>     Best,
>     Uwe Ligges
> 
> 
> 
> 
> 
> 
> 
>     [[alternative HTML version deleted]]
> 
>     ______________________________________________
>     R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>     https://stat.ethz.ch/mailman/listinfo/r-help
>     <https://stat.ethz.ch/mailman/listinfo/r-help>
>     PLEASE do read the posting guide
>     http://www.R-project.org/posting-guide.html
>     <http://www.R-project.org/posting-guide.html>
>     and provide commented, minimal, self-contained, reproducible code.
>


From @@ch@ndh|@| @end|ng |rom bt|nternet@com  Mon Nov  7 15:26:02 2022
From: @@ch@ndh|@| @end|ng |rom bt|nternet@com (Amarjit Chandhial)
Date: Mon, 7 Nov 2022 14:26:02 +0000
Subject: [R] Associate a .R file with the RGui
In-Reply-To: <8633438b-e1e3-5cf9-9e87-8fe197a1bf94@statistik.tu-dortmund.de>
References: <34bacfdd.1275e.1844dbf23cd.Webtop.107@btinternet.com>
 <ff45beb8-bdb2-4b0b-d7a7-2c985c58cb49@statistik.tu-dortmund.de>
 <166d95ad.1a1a4.1844e40fb34.Webtop.84@btinternet.com>
 <8633438b-e1e3-5cf9-9e87-8fe197a1bf94@statistik.tu-dortmund.de>
Message-ID: <5717D41F-2BA5-4D8E-9777-05016FD9B916@btinternet.com>


Hi Uwe,


Many Thanks.


Amarjiit 



> On 7 Nov 2022, at 14:00, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
> 
> 
> 
>> On 06.11.2022 19:43, Amarjit Chandhial wrote:
>> Hi Uwe,
>> I can do 1.
>> 1. Add the line
>> if ( length(z <- commandArgs(TRUE)) ) utils::file.edit(z[1])
>> to the Rprofile.site file; and
>> My Rprofile.site file is: "C:/PROGRA~1/R/R-42~1.2/etc/Rprofile.site"
>> How do I do 2, step-by-step?
>> 2. Edit the registry to associate the .R extension with the command
>> C:\Program Files\R\R-4.2.2\bin\x64\Rgui.exe --args "%1"
> 
> If you have not .R file association yet, you can add the line above when being asked.
> If you have one, simply change the registry key
> 
> Computer\HKEY_CLASSES_ROOT\R_auto_file\shell\open\command
> 
> There is a standard value as extendable string (REG_EXPAND_SZ) and you simply replace its content by
> 
> "C:\Program Files\R\R-4.2.2\bin\x64\Rgui.exe" --args "%1"
> 
> 
> and in
> 
> Computer\HKEY_CLASSES_ROOT\.R
> 
> there shoudl be a standard string (REG_SZ)
> R_auto_file
> 
> Best,
> Uwe Ligges
> 
> 
> 
> 
> 
>> Amarjit
>>    ------ Original Message ------
>>    From: "Uwe Ligges" <ligges at statistik.tu-dortmund.de>
>>    To: "Amarjit Chandhial" <a.chandhial at btinternet.com>; "David
>>    Winsemius" <dwinsemius at comcast.net>; "Jeff Newmiller"
>>    <jdnewmil at dcn.davis.ca.us>
>>    Cc: "Amarjit Chandhial via R-help" <r-help at r-project.org>
>>    Sent: Sunday, 6 Nov, 2022 At 17:19
>>    Subject: Re: [R] Associate a .R file with the RGui
>>    On 06.11.2022 17:21, Amarjit Chandhial via R-help wrote:
>>                
>>    Hi Uwe,
>>    RGui does have advantages vs. RStudio, and vice-versa.
>>    RStudio is much faster than it used to be.
>>    I currently have .R files associated with RStudio, i.e. in File Explorer
>>    if I double-click on a .R file it opens in the editor in RStudio as an R
>>    script.
>>    In File Explorer if I right-click on a .R file, Open with, I get the
>>    options: R for Windows GUI Front-end or RStudio or Search the Microsoft
>>    Store or choose another app.
>>    If I choose R for Windows GUI Front-end, RGui (64-bit) opens, but no .R
>>    file, in the editor.
>>    If I choose RStudio the .R file opens in the editor in RStudio as an R
>>    script.
>>     From the adaptation, if I choose R for Windows GUI Front-end, will the
>>    .R file open in RGui (64-bit) within the editor?
>>    Yes.
>>                
>>    I have a new Windows PC and maybe, at least for the time being, it's
>>    best for me to have them associated with RStudio.
>>    Although, yes, I agree, it should be naturally implemented in R, having
>>    installed RStudio.
>>    I meant to implement that one can choose the internal editor to open
>>    .R files. File associations can be set by RStudio, too, but that is
>>    not an R(-core) matter.
>>    Best,
>>    Uwe Ligges
>>                
>>    thanks,
>>    Amarjit
>>    ------ Original Message ------
>>    From: "Uwe Ligges" <ligges at statistik.tu-dortmund.de>
>>    To: "David Winsemius" <dwinsemius at comcast.net>; "Amarjit Chandhial"
>>    <a.chandhial at btinternet.com>; "Jeff Newmiller"
>>    <jdnewmil at dcn.davis.ca.us>
>>    Cc: "Amarjit Chandhial via R-help" <r-help at r-project.org>
>>    Sent: Sunday, 6 Nov, 2022 At 15:15
>>    Subject: Re: [R] Associate a .R file with the RGui
>>    On 06.11.2022 01:40, David Winsemius wrote:
>>    On 11/5/22 09:58, Amarjit Chandhial via R-help wrote:
>>    Hi Jeff,
>>    Please see my original question.
>>    You were told that RGui is not an editor.
>>    Are you implying that your initial message contained an implicit
>>    request for instructions on how to get R code in an .R file to be opened
>>    automagically when double-clicked or to have "open in <some editor>"
>>    appear when right-clicked? (I didn't see that clearly expressed.)
>>    If you want something else to happen with a file that has a .R
>>    extension when double-clicked or right-clicked in a GUI file manager,
>>    then you need to configure your OS to do whatever else it is that you
>>    expect. This is not really an R question. It's an OS question. There are
>>    many editors that can also bring up R consoles when the right key combo
>>    is pressed. They do require some study for their specific actions, but
>>    this is not really the place to get guidance on the fine details.
>>    Friends, RGui contains an editor. It allows to send lines / code
>>    blocks to the R concole. We know users who need braille displays use the
>>    RGui internal editor as that apparently cooperates better with braille
>>    displays + R as many other editors.
>>    And as it does not hide half of R by its own functions, I'd pefer that
>>    over some very popular other editors if I had no other choice.
>>    To answer the OP's question, R does not have a built in way to get
>>    this task directly done, but searching the web suggests a rather simple
>>    way (well,m a hack as starting R with other command args may fail now,
>>    but you can extend this and look for a specific naming scheme):
>>    <https://stat.ethz.ch/pipermail/r-help/2007-August/138064.html
>>    <https://stat.ethz.ch/pipermail/r-help/2007-August/138064.html>
>>    <https://stat.ethz.ch/pipermail/r-help/2007-August/138064.html
>>    <https://stat.ethz.ch/pipermail/r-help/2007-August/138064.html>> >
>>    let is adapt this for the recent version of R:
>>    1. Add the line
>>    if ( length(z <- commandArgs(TRUE)) ) utils::file.edit(z[1])
>>    to the Rprofile.site file; and
>>    2. Edit the registry to associate the .R extension with the command
>>    C:\Program Files\R\R-4.2.2\bin\x64\Rgui.exe --args "%1"
>>    I think we should implement this in R anyway.
>>    Best,
>>    Uwe Ligges
>>    [[alternative HTML version deleted]]
>>    ______________________________________________
>>    R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>    https://stat.ethz.ch/mailman/listinfo/r-help
>>    <https://stat.ethz.ch/mailman/listinfo/r-help>
>>    PLEASE do read the posting guide
>>    http://www.R-project.org/posting-guide.html
>>    <http://www.R-project.org/posting-guide.html>
>>    and provide commented, minimal, self-contained, reproducible code.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Mon Nov  7 18:17:30 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Mon, 7 Nov 2022 17:17:30 +0000
Subject: [R] print and lapply....
Message-ID: <PU4P216MB1568A360DA25F1A43E00F62AC83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear members,
                             I have the following code and output:

> TP <- 1:4
> lapply(TP,function(x){print(x);x^2})
[1] 1
[1] 2
[1] 3
[1] 4
[[1]]
[1] 1

[[2]]
[1] 4

[[3]]
[1] 9

[[4]]
[1] 16

How do I make the print function output x along with x^2, i.e not at the beginning but before each of x^2?

Many thanks in advance....

THanking you,
Yours sincerely
AKSHAY M KULKARNI

	[[alternative HTML version deleted]]


From @kw@|mmo @end|ng |rom gm@||@com  Mon Nov  7 18:20:35 2022
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Mon, 7 Nov 2022 12:20:35 -0500
Subject: [R] print and lapply....
In-Reply-To: <PU4P216MB1568A360DA25F1A43E00F62AC83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB1568A360DA25F1A43E00F62AC83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAPcHnpRxP9O1_EF81-9-+J+OOTePty3peRXgUVvW=_YYcXrstQ@mail.gmail.com>

put print() around x^2

On Mon, Nov 7, 2022, 12:18 akshay kulkarni <akshay_e4 at hotmail.com> wrote:

> Dear members,
>                              I have the following code and output:
>
> > TP <- 1:4
> > lapply(TP,function(x){print(x);x^2})
> [1] 1
> [1] 2
> [1] 3
> [1] 4
> [[1]]
> [1] 1
>
> [[2]]
> [1] 4
>
> [[3]]
> [1] 9
>
> [[4]]
> [1] 16
>
> How do I make the print function output x along with x^2, i.e not at the
> beginning but before each of x^2?
>
> Many thanks in advance....
>
> THanking you,
> Yours sincerely
> AKSHAY M KULKARNI
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From tebert @end|ng |rom u||@edu  Mon Nov  7 18:37:33 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Mon, 7 Nov 2022 17:37:33 +0000
Subject: [R] print and lapply....
In-Reply-To: <CAPcHnpRxP9O1_EF81-9-+J+OOTePty3peRXgUVvW=_YYcXrstQ@mail.gmail.com>
References: <PU4P216MB1568A360DA25F1A43E00F62AC83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAPcHnpRxP9O1_EF81-9-+J+OOTePty3peRXgUVvW=_YYcXrstQ@mail.gmail.com>
Message-ID: <BN6PR2201MB1553EC96BC36708A4480A7E9CF3C9@BN6PR2201MB1553.namprd22.prod.outlook.com>

Another option is use paste() within print()

lapply(TP,function(x){print(paste("x= ",x, " x^2 = ", x^2))})


Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Andrew Simmons
Sent: Monday, November 7, 2022 12:21 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] print and lapply....

[External Email]

put print() around x^2

On Mon, Nov 7, 2022, 12:18 akshay kulkarni <akshay_e4 at hotmail.com> wrote:

> Dear members,
>                              I have the following code and output:
>
> > TP <- 1:4
> > lapply(TP,function(x){print(x);x^2})
> [1] 1
> [1] 2
> [1] 3
> [1] 4
> [[1]]
> [1] 1
>
> [[2]]
> [1] 4
>
> [[3]]
> [1] 9
>
> [[4]]
> [1] 16
>
> How do I make the print function output x along with x^2, i.e not at 
> the beginning but before each of x^2?
>
> Many thanks in advance....
>
> THanking you,
> Yours sincerely
> AKSHAY M KULKARNI
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat
> .ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl
> .edu%7C28ae59febb2d43ce03b108dac0e46e79%7C0d4da0f84a314d76ace60a62331e
> 1b84%7C0%7C0%7C638034384601744085%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4w
> LjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C
> &amp;sdata=1D8FQ07q2NcYL8PaJW84PqdUAte3pZJy8XJuJXENbJ4%3D&amp;reserved
> =0
> PLEASE do read the posting guide
> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r
> -project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%
> 7C28ae59febb2d43ce03b108dac0e46e79%7C0d4da0f84a314d76ace60a62331e1b84%
> 7C0%7C0%7C638034384601744085%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwM
> DAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;
> sdata=aEeZJ8FHVKGX%2BqOJaKskC1onjqKcON2Ux5cj3MimTGw%3D&amp;reserved=0
> and provide commented, minimal, self-contained, reproducible code.
>

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C28ae59febb2d43ce03b108dac0e46e79%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638034384601744085%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=1D8FQ07q2NcYL8PaJW84PqdUAte3pZJy8XJuJXENbJ4%3D&amp;reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C28ae59febb2d43ce03b108dac0e46e79%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638034384601744085%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=aEeZJ8FHVKGX%2BqOJaKskC1onjqKcON2Ux5cj3MimTGw%3D&amp;reserved=0
and provide commented, minimal, self-contained, reproducible code.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Mon Nov  7 18:38:12 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Mon, 7 Nov 2022 17:38:12 +0000
Subject: [R] print and lapply....
In-Reply-To: <CAPcHnpRxP9O1_EF81-9-+J+OOTePty3peRXgUVvW=_YYcXrstQ@mail.gmail.com>
References: <PU4P216MB1568A360DA25F1A43E00F62AC83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAPcHnpRxP9O1_EF81-9-+J+OOTePty3peRXgUVvW=_YYcXrstQ@mail.gmail.com>
Message-ID: <PU4P216MB156851AA3E94D3486008ACC1C83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Andrew
                         It doesn't work:

> lapply(TP,function(x){print(x^2)})
[1] 1
[1] 4
[1] 9
[1] 16
[[1]]
[1] 1

[[2]]
[1] 4

[[3]]
[1] 9

[[4]]
[1] 16

Basically, lapply() is implemented by a for loop. So there must be some way right?

tHanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Andrew Simmons <akwsimmo at gmail.com>
Sent: Monday, November 7, 2022 10:50 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] print and lapply....

put print() around x^2

On Mon, Nov 7, 2022, 12:18 akshay kulkarni <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>> wrote:
Dear members,
                             I have the following code and output:

> TP <- 1:4
> lapply(TP,function(x){print(x);x^2})
[1] 1
[1] 2
[1] 3
[1] 4
[[1]]
[1] 1

[[2]]
[1] 4

[[3]]
[1] 9

[[4]]
[1] 16

How do I make the print function output x along with x^2, i.e not at the beginning but before each of x^2?

Many thanks in advance....

THanking you,
Yours sincerely
AKSHAY M KULKARNI

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Mon Nov  7 18:46:05 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 7 Nov 2022 09:46:05 -0800
Subject: [R] print and lapply....
In-Reply-To: <CAPcHnpRxP9O1_EF81-9-+J+OOTePty3peRXgUVvW=_YYcXrstQ@mail.gmail.com>
References: <PU4P216MB1568A360DA25F1A43E00F62AC83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAPcHnpRxP9O1_EF81-9-+J+OOTePty3peRXgUVvW=_YYcXrstQ@mail.gmail.com>
Message-ID: <CAGxFJbSyM8XmQ+8s7mQRChMgJj6+qJO+OD==ML8No8yCA8SjaA@mail.gmail.com>

Well... yes, of course. But assuming the sole purpose is to print the
results and not to save them for further processing, the OP's approach
seems rather painful. My preference would be to vectorize:

> print(cbind(TP, TPsq =TP^2), print.gap = 3)
       TP   TPsq
[1,]    1      1
[2,]    2      4
[3,]    3      9
[4,]    4     16

See ?print.default for details

-- Bert


On Mon, Nov 7, 2022 at 9:20 AM Andrew Simmons <akwsimmo at gmail.com> wrote:
>
> put print() around x^2
>
> On Mon, Nov 7, 2022, 12:18 akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> > Dear members,
> >                              I have the following code and output:
> >
> > > TP <- 1:4
> > > lapply(TP,function(x){print(x);x^2})
> > [1] 1
> > [1] 2
> > [1] 3
> > [1] 4
> > [[1]]
> > [1] 1
> >
> > [[2]]
> > [1] 4
> >
> > [[3]]
> > [1] 9
> >
> > [[4]]
> > [1] 16
> >
> > How do I make the print function output x along with x^2, i.e not at the
> > beginning but before each of x^2?
> >
> > Many thanks in advance....
> >
> > THanking you,
> > Yours sincerely
> > AKSHAY M KULKARNI
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Mon Nov  7 18:49:14 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Mon, 7 Nov 2022 17:49:14 +0000
Subject: [R] print and lapply....
In-Reply-To: <BN6PR2201MB1553EC96BC36708A4480A7E9CF3C9@BN6PR2201MB1553.namprd22.prod.outlook.com>
References: <PU4P216MB1568A360DA25F1A43E00F62AC83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAPcHnpRxP9O1_EF81-9-+J+OOTePty3peRXgUVvW=_YYcXrstQ@mail.gmail.com>
 <BN6PR2201MB1553EC96BC36708A4480A7E9CF3C9@BN6PR2201MB1553.namprd22.prod.outlook.com>
Message-ID: <PU4P216MB15688E0E68644C2515587FF3C83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Tim,
                   Actually, I am replacing a big for loop by the lapply() function, and report the progress:

lapply(TP, function(i) { BODY; print(i)})

Can you please adjust your solution in this light?

THanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Ebert,Timothy Aaron <tebert at ufl.edu>
Sent: Monday, November 7, 2022 11:07 PM
To: Andrew Simmons <akwsimmo at gmail.com>; akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: RE: [R] print and lapply....

Another option is use paste() within print()

lapply(TP,function(x){print(paste("x= ",x, " x^2 = ", x^2))})


Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Andrew Simmons
Sent: Monday, November 7, 2022 12:21 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] print and lapply....

[External Email]

put print() around x^2

On Mon, Nov 7, 2022, 12:18 akshay kulkarni <akshay_e4 at hotmail.com> wrote:

> Dear members,
>                              I have the following code and output:
>
> > TP <- 1:4
> > lapply(TP,function(x){print(x);x^2})
> [1] 1
> [1] 2
> [1] 3
> [1] 4
> [[1]]
> [1] 1
>
> [[2]]
> [1] 4
>
> [[3]]
> [1] 9
>
> [[4]]
> [1] 16
>
> How do I make the print function output x along with x^2, i.e not at
> the beginning but before each of x^2?
>
> Many thanks in advance....
>
> THanking you,
> Yours sincerely
> AKSHAY M KULKARNI
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat
> .ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl
> .edu%7C28ae59febb2d43ce03b108dac0e46e79%7C0d4da0f84a314d76ace60a62331e
> 1b84%7C0%7C0%7C638034384601744085%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4w
> LjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C
> &amp;sdata=1D8FQ07q2NcYL8PaJW84PqdUAte3pZJy8XJuJXENbJ4%3D&amp;reserved
> =0
> PLEASE do read the posting guide
> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r
> -project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%
> 7C28ae59febb2d43ce03b108dac0e46e79%7C0d4da0f84a314d76ace60a62331e1b84%
> 7C0%7C0%7C638034384601744085%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwM
> DAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;
> sdata=aEeZJ8FHVKGX%2BqOJaKskC1onjqKcON2Ux5cj3MimTGw%3D&amp;reserved=0
> and provide commented, minimal, self-contained, reproducible code.
>

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C28ae59febb2d43ce03b108dac0e46e79%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638034384601744085%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=1D8FQ07q2NcYL8PaJW84PqdUAte3pZJy8XJuJXENbJ4%3D&amp;reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C28ae59febb2d43ce03b108dac0e46e79%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638034384601744085%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=aEeZJ8FHVKGX%2BqOJaKskC1onjqKcON2Ux5cj3MimTGw%3D&amp;reserved=0
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From @kw@|mmo @end|ng |rom gm@||@com  Mon Nov  7 18:57:46 2022
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Mon, 7 Nov 2022 12:57:46 -0500
Subject: [R] print and lapply....
In-Reply-To: <PU4P216MB156851AA3E94D3486008ACC1C83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB1568A360DA25F1A43E00F62AC83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAPcHnpRxP9O1_EF81-9-+J+OOTePty3peRXgUVvW=_YYcXrstQ@mail.gmail.com>
 <PU4P216MB156851AA3E94D3486008ACC1C83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAPcHnpTb3PQt+y7mm+71w9oUeB9C9TOB_VHO7EFpdg_H+Rbf2w@mail.gmail.com>

I meant something like:

TP <- 1:4
lapply(TP, function(x) {
    print(x)
    print(x^2)
})

You may wish to add cat("\n") after print(x^2) so that your results
from each iteration are separated.
You may also wish to add invisible() around lapply() if you're not
saving / / using the return list in any way.

On Mon, Nov 7, 2022 at 12:38 PM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> Dear Andrew
>                          It doesn't work:
>
> > lapply(TP,function(x){print(x^2)})
> [1] 1
> [1] 4
> [1] 9
> [1] 16
> [[1]]
> [1] 1
>
> [[2]]
> [1] 4
>
> [[3]]
> [1] 9
>
> [[4]]
> [1] 16
>
> Basically, lapply() is implemented by a for loop. So there must be some way right?
>
> tHanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
> ________________________________
> From: Andrew Simmons <akwsimmo at gmail.com>
> Sent: Monday, November 7, 2022 10:50 PM
> To: akshay kulkarni <akshay_e4 at hotmail.com>
> Cc: R help Mailing list <r-help at r-project.org>
> Subject: Re: [R] print and lapply....
>
> put print() around x^2
>
> On Mon, Nov 7, 2022, 12:18 akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> Dear members,
>                              I have the following code and output:
>
> > TP <- 1:4
> > lapply(TP,function(x){print(x);x^2})
> [1] 1
> [1] 2
> [1] 3
> [1] 4
> [[1]]
> [1] 1
>
> [[2]]
> [1] 4
>
> [[3]]
> [1] 9
>
> [[4]]
> [1] 16
>
> How do I make the print function output x along with x^2, i.e not at the beginning but before each of x^2?
>
> Many thanks in advance....
>
> THanking you,
> Yours sincerely
> AKSHAY M KULKARNI
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Mon Nov  7 19:10:10 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Mon, 7 Nov 2022 18:10:10 +0000
Subject: [R] print and lapply....
In-Reply-To: <CAGxFJbSyM8XmQ+8s7mQRChMgJj6+qJO+OD==ML8No8yCA8SjaA@mail.gmail.com>
References: <PU4P216MB1568A360DA25F1A43E00F62AC83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAPcHnpRxP9O1_EF81-9-+J+OOTePty3peRXgUVvW=_YYcXrstQ@mail.gmail.com>
 <CAGxFJbSyM8XmQ+8s7mQRChMgJj6+qJO+OD==ML8No8yCA8SjaA@mail.gmail.com>
Message-ID: <PU4P216MB15688AD15B43427708CE42AEC83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Bert,
                   Actually, I am replacing a big for loop by the lapply() function, and report the progress:

lapply(TP, function(i) { BODY; print(i)})

Can you please adjust your solution in this light?

THanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Bert Gunter <bgunter.4567 at gmail.com>
Sent: Monday, November 7, 2022 11:16 PM
To: Andrew Simmons <akwsimmo at gmail.com>
Cc: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
Subject: Re: [R] print and lapply....

Well... yes, of course. But assuming the sole purpose is to print the
results and not to save them for further processing, the OP's approach
seems rather painful. My preference would be to vectorize:

> print(cbind(TP, TPsq =TP^2), print.gap = 3)
       TP   TPsq
[1,]    1      1
[2,]    2      4
[3,]    3      9
[4,]    4     16

See ?print.default for details

-- Bert


On Mon, Nov 7, 2022 at 9:20 AM Andrew Simmons <akwsimmo at gmail.com> wrote:
>
> put print() around x^2
>
> On Mon, Nov 7, 2022, 12:18 akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> > Dear members,
> >                              I have the following code and output:
> >
> > > TP <- 1:4
> > > lapply(TP,function(x){print(x);x^2})
> > [1] 1
> > [1] 2
> > [1] 3
> > [1] 4
> > [[1]]
> > [1] 1
> >
> > [[2]]
> > [1] 4
> >
> > [[3]]
> > [1] 9
> >
> > [[4]]
> > [1] 16
> >
> > How do I make the print function output x along with x^2, i.e not at the
> > beginning but before each of x^2?
> >
> > Many thanks in advance....
> >
> > THanking you,
> > Yours sincerely
> > AKSHAY M KULKARNI
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Mon Nov  7 19:29:37 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Mon, 7 Nov 2022 18:29:37 +0000
Subject: [R] print and lapply....
In-Reply-To: <PU4P216MB1568A360DA25F1A43E00F62AC83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB1568A360DA25F1A43E00F62AC83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <85d70330-d644-9ad6-1c6f-e6ef21c4cd7f@sapo.pt>

?s 17:17 de 07/11/2022, akshay kulkarni escreveu:
> Dear members,
>                               I have the following code and output:
> 
>> TP <- 1:4
>> lapply(TP,function(x){print(x);x^2})
> [1] 1
> [1] 2
> [1] 3
> [1] 4
> [[1]]
> [1] 1
> 
> [[2]]
> [1] 4
> 
> [[3]]
> [1] 9
> 
> [[4]]
> [1] 16
> 
> How do I make the print function output x along with x^2, i.e not at the beginning but before each of x^2?
> 
> Many thanks in advance....
> 
> THanking you,
> Yours sincerely
> AKSHAY M KULKARNI
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

Here are two options, with ?cat and with ?message.


TP <- 1:4
lapply(TP, function(x){
   cat("x =", x, "x^2 =", x^2, "\n")
})

lapply(TP, function(x){
   msg <- paste("x =", x, "x^2 =", x^2)
   message(msg)
})


Hope this helps,

Rui Barradas


From @k@h@y_e4 @end|ng |rom hotm@||@com  Mon Nov  7 19:33:39 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Mon, 7 Nov 2022 18:33:39 +0000
Subject: [R] print and lapply....
In-Reply-To: <85d70330-d644-9ad6-1c6f-e6ef21c4cd7f@sapo.pt>
References: <PU4P216MB1568A360DA25F1A43E00F62AC83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <85d70330-d644-9ad6-1c6f-e6ef21c4cd7f@sapo.pt>
Message-ID: <PU4P216MB1568124CE102CB3A02D058F1C83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Rui,
                   Actually, I am replacing a big for loop by the lapply() function, and report the progress:

lapply(TP, function(i) { BODY; print(i)})

Can you please adjust your solution in this light?

THanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Rui Barradas <ruipbarradas at sapo.pt>
Sent: Monday, November 7, 2022 11:59 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
Subject: Re: [R] print and lapply....

?s 17:17 de 07/11/2022, akshay kulkarni escreveu:
> Dear members,
>                               I have the following code and output:
>
>> TP <- 1:4
>> lapply(TP,function(x){print(x);x^2})
> [1] 1
> [1] 2
> [1] 3
> [1] 4
> [[1]]
> [1] 1
>
> [[2]]
> [1] 4
>
> [[3]]
> [1] 9
>
> [[4]]
> [1] 16
>
> How do I make the print function output x along with x^2, i.e not at the beginning but before each of x^2?
>
> Many thanks in advance....
>
> THanking you,
> Yours sincerely
> AKSHAY M KULKARNI
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

Here are two options, with ?cat and with ?message.


TP <- 1:4
lapply(TP, function(x){
   cat("x =", x, "x^2 =", x^2, "\n")
})

lapply(TP, function(x){
   msg <- paste("x =", x, "x^2 =", x^2)
   message(msg)
})


Hope this helps,

Rui Barradas



	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Mon Nov  7 19:54:32 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Mon, 7 Nov 2022 18:54:32 +0000
Subject: [R] print and lapply....
In-Reply-To: <PU4P216MB1568124CE102CB3A02D058F1C83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB1568A360DA25F1A43E00F62AC83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <85d70330-d644-9ad6-1c6f-e6ef21c4cd7f@sapo.pt>
 <PU4P216MB1568124CE102CB3A02D058F1C83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <28f820bf-feef-b45f-a2e2-400374efe20f@sapo.pt>

?s 18:33 de 07/11/2022, akshay kulkarni escreveu:
> Dear Rui,
>                     Actually, I am replacing a big for loop by the lapply() function, and report the progress:
> 
> lapply(TP, function(i) { BODY; print(i)})
> 
> Can you please adjust your solution in this light?
> 
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
> ________________________________
> From: Rui Barradas <ruipbarradas at sapo.pt>
> Sent: Monday, November 7, 2022 11:59 PM
> To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
> Subject: Re: [R] print and lapply....
> 
> ?s 17:17 de 07/11/2022, akshay kulkarni escreveu:
>> Dear members,
>>                                I have the following code and output:
>>
>>> TP <- 1:4
>>> lapply(TP,function(x){print(x);x^2})
>> [1] 1
>> [1] 2
>> [1] 3
>> [1] 4
>> [[1]]
>> [1] 1
>>
>> [[2]]
>> [1] 4
>>
>> [[3]]
>> [1] 9
>>
>> [[4]]
>> [1] 16
>>
>> How do I make the print function output x along with x^2, i.e not at the beginning but before each of x^2?
>>
>> Many thanks in advance....
>>
>> THanking you,
>> Yours sincerely
>> AKSHAY M KULKARNI
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> Hello,
> 
> Here are two options, with ?cat and with ?message.
> 
> 
> TP <- 1:4
> lapply(TP, function(x){
>     cat("x =", x, "x^2 =", x^2, "\n")
> })
> 
> lapply(TP, function(x){
>     msg <- paste("x =", x, "x^2 =", x^2)
>     message(msg)
> })
> 
> 
> Hope this helps,
> 
> Rui Barradas
> 
> 
> 
Hello,


What do you want the lapply loop to return? If you have a BODY doing 
computations, do you want the lapply to return those values and report 
the progress?

I have chosen cat or message over print because

  - cat returns invisible(NULL),
  - message returns invisible()
  - print returns a value, what it prints.

Can you adapt the code below to your use case?



TP <- 1:4
lapply(TP, function(x, verbose = TRUE){
   # BODY
   y <- rnorm(100, mean = x)

   # show progress
   if(verbose)
     cat("x =", x, "x^2 =", x^2, "\n")

   #return value
   c(x = x, mean = mean(y))
})

lapply(TP, function(x, verbose = TRUE){
   # BODY
   y <- rnorm(100, mean = x)

   # show progress
   if(verbose) {
     msg <- paste("x =", x, "x^2 =", x^2)
     message(msg)
   }

   #return value
   c(x = x, mean = mean(y))
})



Hope this helps,

Rui Barradas


From @k@h@y_e4 @end|ng |rom hotm@||@com  Mon Nov  7 20:22:21 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Mon, 7 Nov 2022 19:22:21 +0000
Subject: [R] print and lapply....
In-Reply-To: <28f820bf-feef-b45f-a2e2-400374efe20f@sapo.pt>
References: <PU4P216MB1568A360DA25F1A43E00F62AC83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <85d70330-d644-9ad6-1c6f-e6ef21c4cd7f@sapo.pt>
 <PU4P216MB1568124CE102CB3A02D058F1C83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <28f820bf-feef-b45f-a2e2-400374efe20f@sapo.pt>
Message-ID: <PU4P216MB1568284562B6403E256F76DDC83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Rui,
                 THanks for your reply...The point is the loop is a scraping code, and in your examples you have assumed that the body acts on i, the loop variable. Can you adapt your code to JUST PRINT the loop variable i ?

By the by, I think I have stumbled upon the answer: The lapply() caches the result, and prints the output of the function in question  immediately after printing the final i. The i's get printed serially, as the function progresses....

> lapply(1:4,function(x){print(x);Sys.sleep(x^2);x^2})
[1] 1
[1] 2
[1] 3
[1] 4
[[1]]
[1] 1

[[2]]
[1] 4

[[3]]
[1] 9

[[4]]
[1] 16

Here x^2 's print only after 4 is printed on the console....

tHanks anyways for your reply....

THanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Rui Barradas <ruipbarradas at sapo.pt>
Sent: Tuesday, November 8, 2022 12:24 AM
To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
Subject: Re: [R] print and lapply....

?s 18:33 de 07/11/2022, akshay kulkarni escreveu:
> Dear Rui,
>                     Actually, I am replacing a big for loop by the lapply() function, and report the progress:
>
> lapply(TP, function(i) { BODY; print(i)})
>
> Can you please adjust your solution in this light?
>
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
> ________________________________
> From: Rui Barradas <ruipbarradas at sapo.pt>
> Sent: Monday, November 7, 2022 11:59 PM
> To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
> Subject: Re: [R] print and lapply....
>
> ?s 17:17 de 07/11/2022, akshay kulkarni escreveu:
>> Dear members,
>>                                I have the following code and output:
>>
>>> TP <- 1:4
>>> lapply(TP,function(x){print(x);x^2})
>> [1] 1
>> [1] 2
>> [1] 3
>> [1] 4
>> [[1]]
>> [1] 1
>>
>> [[2]]
>> [1] 4
>>
>> [[3]]
>> [1] 9
>>
>> [[4]]
>> [1] 16
>>
>> How do I make the print function output x along with x^2, i.e not at the beginning but before each of x^2?
>>
>> Many thanks in advance....
>>
>> THanking you,
>> Yours sincerely
>> AKSHAY M KULKARNI
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> Hello,
>
> Here are two options, with ?cat and with ?message.
>
>
> TP <- 1:4
> lapply(TP, function(x){
>     cat("x =", x, "x^2 =", x^2, "\n")
> })
>
> lapply(TP, function(x){
>     msg <- paste("x =", x, "x^2 =", x^2)
>     message(msg)
> })
>
>
> Hope this helps,
>
> Rui Barradas
>
>
>
Hello,


What do you want the lapply loop to return? If you have a BODY doing
computations, do you want the lapply to return those values and report
the progress?

I have chosen cat or message over print because

  - cat returns invisible(NULL),
  - message returns invisible()
  - print returns a value, what it prints.

Can you adapt the code below to your use case?



TP <- 1:4
lapply(TP, function(x, verbose = TRUE){
   # BODY
   y <- rnorm(100, mean = x)

   # show progress
   if(verbose)
     cat("x =", x, "x^2 =", x^2, "\n")

   #return value
   c(x = x, mean = mean(y))
})

lapply(TP, function(x, verbose = TRUE){
   # BODY
   y <- rnorm(100, mean = x)

   # show progress
   if(verbose) {
     msg <- paste("x =", x, "x^2 =", x^2)
     message(msg)
   }

   #return value
   c(x = x, mean = mean(y))
})



Hope this helps,

Rui Barradas


	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Mon Nov  7 21:45:30 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 7 Nov 2022 12:45:30 -0800
Subject: [R] print and lapply....
In-Reply-To: <PU4P216MB1568284562B6403E256F76DDC83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB1568A360DA25F1A43E00F62AC83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <85d70330-d644-9ad6-1c6f-e6ef21c4cd7f@sapo.pt>
 <PU4P216MB1568124CE102CB3A02D058F1C83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <28f820bf-feef-b45f-a2e2-400374efe20f@sapo.pt>
 <PU4P216MB1568284562B6403E256F76DDC83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAGxFJbTF4KDzQq3PQBXhpLx87gWszVPy6Wta6XK1XdOwriWcHA@mail.gmail.com>

" The lapply() caches the result, and prints the output of the
function in question  immediately after printing the final i. "

I don't believe you understand how lists or lapply works. You seem to
be trying to intuit from empirical behavior. Bad idea, if so. You need
to read the docs or spend time with suitable tutorials.

Consider:
lapply produces a **list,** each component of which is the result of
applying a function, FUN, to the components of its first argument
(here 1:4), which is itself a list. Results are **not** cached in the
sense you seem to think they are. The list object that is produced by
the function is **only** printed if you ask it to be (via cat, print,
or whatever) or, by default, if the result is unassigned. The default
printing can be turned off via the invisible() function.

So:

> res <- lapply(TP, function(x){
+    print(x)
+    x^2}
+    )
[1] 1
[1] 2
[1] 3
[1] 4
[1] 5
## Nothing printed, but the results are the components of **list**
res, which can be printed on the console by print(res) or simply:

> res ## note the list syntax below
[[1]]
[1] 1

[[2]]
[1] 4

[[3]]
[1] 9

[[4]]
[1] 16

[[5]]
[1] 25

Now can you explain what happens here:

> invisible(lapply(TP, function(x){
+    print(x)
+    x^2}
+    ))
[1] 1
[1] 2
[1] 3
[1] 4
[1] 5
> ## results not printed; nothing assigned. Where can you find them? (See below)

or here:

> lapply(TP, function(x){
+    print(x)
+    x^2}
+    )
[1] 1
[1] 2
[1] 3
[1] 4
[1] 5
[[1]]
[1] 1

[[2]]
[1] 4

[[3]]
[1] 9

[[4]]
[1] 16

[[5]]
[1] 25

## How could you recover the results of the lapply and not just look
at the console printout if the results have not been assigned?
## Hint:  See ?.Last.value

-- Bert

On Mon, Nov 7, 2022 at 11:22 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> Dear Rui,
>                  THanks for your reply...The point is the loop is a scraping code, and in your examples you have assumed that the body acts on i, the loop variable. Can you adapt your code to JUST PRINT the loop variable i ?
>
> By the by, I think I have stumbled upon the answer: The lapply() caches the result, and prints the output of the function in question  immediately after printing the final i. The i's get printed serially, as the function progresses....
>
> > lapply(1:4,function(x){print(x);Sys.sleep(x^2);x^2})
> [1] 1
> [1] 2
> [1] 3
> [1] 4
> [[1]]
> [1] 1
>
> [[2]]
> [1] 4
>
> [[3]]
> [1] 9
>
> [[4]]
> [1] 16
>
> Here x^2 's print only after 4 is printed on the console....
>
> tHanks anyways for your reply....
>
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
> ________________________________
> From: Rui Barradas <ruipbarradas at sapo.pt>
> Sent: Tuesday, November 8, 2022 12:24 AM
> To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
> Subject: Re: [R] print and lapply....
>
> ?s 18:33 de 07/11/2022, akshay kulkarni escreveu:
> > Dear Rui,
> >                     Actually, I am replacing a big for loop by the lapply() function, and report the progress:
> >
> > lapply(TP, function(i) { BODY; print(i)})
> >
> > Can you please adjust your solution in this light?
> >
> > THanking you,
> > Yours sincerely,
> > AKSHAY M KULKARNI
> > ________________________________
> > From: Rui Barradas <ruipbarradas at sapo.pt>
> > Sent: Monday, November 7, 2022 11:59 PM
> > To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
> > Subject: Re: [R] print and lapply....
> >
> > ?s 17:17 de 07/11/2022, akshay kulkarni escreveu:
> >> Dear members,
> >>                                I have the following code and output:
> >>
> >>> TP <- 1:4
> >>> lapply(TP,function(x){print(x);x^2})
> >> [1] 1
> >> [1] 2
> >> [1] 3
> >> [1] 4
> >> [[1]]
> >> [1] 1
> >>
> >> [[2]]
> >> [1] 4
> >>
> >> [[3]]
> >> [1] 9
> >>
> >> [[4]]
> >> [1] 16
> >>
> >> How do I make the print function output x along with x^2, i.e not at the beginning but before each of x^2?
> >>
> >> Many thanks in advance....
> >>
> >> THanking you,
> >> Yours sincerely
> >> AKSHAY M KULKARNI
> >>
> >>         [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> > Hello,
> >
> > Here are two options, with ?cat and with ?message.
> >
> >
> > TP <- 1:4
> > lapply(TP, function(x){
> >     cat("x =", x, "x^2 =", x^2, "\n")
> > })
> >
> > lapply(TP, function(x){
> >     msg <- paste("x =", x, "x^2 =", x^2)
> >     message(msg)
> > })
> >
> >
> > Hope this helps,
> >
> > Rui Barradas
> >
> >
> >
> Hello,
>
>
> What do you want the lapply loop to return? If you have a BODY doing
> computations, do you want the lapply to return those values and report
> the progress?
>
> I have chosen cat or message over print because
>
>   - cat returns invisible(NULL),
>   - message returns invisible()
>   - print returns a value, what it prints.
>
> Can you adapt the code below to your use case?
>
>
>
> TP <- 1:4
> lapply(TP, function(x, verbose = TRUE){
>    # BODY
>    y <- rnorm(100, mean = x)
>
>    # show progress
>    if(verbose)
>      cat("x =", x, "x^2 =", x^2, "\n")
>
>    #return value
>    c(x = x, mean = mean(y))
> })
>
> lapply(TP, function(x, verbose = TRUE){
>    # BODY
>    y <- rnorm(100, mean = x)
>
>    # show progress
>    if(verbose) {
>      msg <- paste("x =", x, "x^2 =", x^2)
>      message(msg)
>    }
>
>    #return value
>    c(x = x, mean = mean(y))
> })
>
>
>
> Hope this helps,
>
> Rui Barradas
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From tebert @end|ng |rom u||@edu  Mon Nov  7 21:45:42 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Mon, 7 Nov 2022 20:45:42 +0000
Subject: [R] print and lapply....
In-Reply-To: <PU4P216MB15688AD15B43427708CE42AEC83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB1568A360DA25F1A43E00F62AC83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAPcHnpRxP9O1_EF81-9-+J+OOTePty3peRXgUVvW=_YYcXrstQ@mail.gmail.com>
 <CAGxFJbSyM8XmQ+8s7mQRChMgJj6+qJO+OD==ML8No8yCA8SjaA@mail.gmail.com>
 <PU4P216MB15688AD15B43427708CE42AEC83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <BN6PR2201MB155366AA16C4F596735677B8CF3C9@BN6PR2201MB1553.namprd22.prod.outlook.com>

Dear Akshay,
    I think we have provided several solutions to the question asked. Can you please adjust your question to more closely align with what you need. It would be nice if you can provide sufficient detail so that we can see how you have adapted our solutions and how these have not quite addressed this problem. 

Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of akshay kulkarni
Sent: Monday, November 7, 2022 1:10 PM
To: Bert Gunter <bgunter.4567 at gmail.com>; Andrew Simmons <akwsimmo at gmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] print and lapply....

[External Email]

Dear Bert,
                   Actually, I am replacing a big for loop by the lapply() function, and report the progress:

lapply(TP, function(i) { BODY; print(i)})

Can you please adjust your solution in this light?

THanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Bert Gunter <bgunter.4567 at gmail.com>
Sent: Monday, November 7, 2022 11:16 PM
To: Andrew Simmons <akwsimmo at gmail.com>
Cc: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
Subject: Re: [R] print and lapply....

Well... yes, of course. But assuming the sole purpose is to print the results and not to save them for further processing, the OP's approach seems rather painful. My preference would be to vectorize:

> print(cbind(TP, TPsq =TP^2), print.gap = 3)
       TP   TPsq
[1,]    1      1
[2,]    2      4
[3,]    3      9
[4,]    4     16

See ?print.default for details

-- Bert


On Mon, Nov 7, 2022 at 9:20 AM Andrew Simmons <akwsimmo at gmail.com> wrote:
>
> put print() around x^2
>
> On Mon, Nov 7, 2022, 12:18 akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> > Dear members,
> >                              I have the following code and output:
> >
> > > TP <- 1:4
> > > lapply(TP,function(x){print(x);x^2})
> > [1] 1
> > [1] 2
> > [1] 3
> > [1] 4
> > [[1]]
> > [1] 1
> >
> > [[2]]
> > [1] 4
> >
> > [[3]]
> > [1] 9
> >
> > [[4]]
> > [1] 16
> >
> > How do I make the print function output x along with x^2, i.e not at 
> > the beginning but before each of x^2?
> >
> > Many thanks in advance....
> >
> > THanking you,
> > Yours sincerely
> > AKSHAY M KULKARNI
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fst
> > at.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%4
> > 0ufl.edu%7Cb726a89349ed4860265708dac0eb5d0a%7C0d4da0f84a314d76ace60a
> > 62331e1b84%7C0%7C0%7C638034414365456384%7CUnknown%7CTWFpbGZsb3d8eyJW
> > IjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C300
> > 0%7C%7C%7C&amp;sdata=dQk1JPxWI4D0D6%2FSoC8LWw56749ulaFrGQc6affgBeM%3
> > D&amp;reserved=0
> > PLEASE do read the posting guide
> > https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww
> > .r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.
> > edu%7Cb726a89349ed4860265708dac0eb5d0a%7C0d4da0f84a314d76ace60a62331
> > e1b84%7C0%7C0%7C638034414365456384%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiM
> > C4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%
> > 7C%7C&amp;sdata=KDskHBxmxe0DV9XO7GvkESemUNTq2w%2BT%2Fro%2Bgb4DS2w%3D
> > &amp;reserved=0 and provide commented, minimal, self-contained, 
> > reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat
> .ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl
> .edu%7Cb726a89349ed4860265708dac0eb5d0a%7C0d4da0f84a314d76ace60a62331e
> 1b84%7C0%7C0%7C638034414365456384%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4w
> LjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C
> &amp;sdata=dQk1JPxWI4D0D6%2FSoC8LWw56749ulaFrGQc6affgBeM%3D&amp;reserv
> ed=0 PLEASE do read the posting guide 
> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r
> -project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%
> 7Cb726a89349ed4860265708dac0eb5d0a%7C0d4da0f84a314d76ace60a62331e1b84%
> 7C0%7C0%7C638034414365612626%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwM
> DAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;
> sdata=OxZmpA4ORbfUq0gqM8ebZvK5bQTaiCwo0Y1ekn%2F3zBE%3D&amp;reserved=0
> and provide commented, minimal, self-contained, reproducible code.

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7Cb726a89349ed4860265708dac0eb5d0a%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638034414365612626%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=OCyLwP3YBC3kfih9kaX6vEbPdzvAq1a48LeDRyqlYd0%3D&amp;reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7Cb726a89349ed4860265708dac0eb5d0a%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638034414365612626%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=OxZmpA4ORbfUq0gqM8ebZvK5bQTaiCwo0Y1ekn%2F3zBE%3D&amp;reserved=0
and provide commented, minimal, self-contained, reproducible code.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Mon Nov  7 21:50:03 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Mon, 7 Nov 2022 20:50:03 +0000
Subject: [R] print and lapply....
In-Reply-To: <PU4P216MB1568284562B6403E256F76DDC83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB1568A360DA25F1A43E00F62AC83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <85d70330-d644-9ad6-1c6f-e6ef21c4cd7f@sapo.pt>
 <PU4P216MB1568124CE102CB3A02D058F1C83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <28f820bf-feef-b45f-a2e2-400374efe20f@sapo.pt>
 <PU4P216MB1568284562B6403E256F76DDC83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <77cc1472-cb84-e953-f978-ebecaca7c4a9@sapo.pt>

?s 19:22 de 07/11/2022, akshay kulkarni escreveu:
> Dear Rui,
>                   THanks for your reply...The point is the loop is a scraping code, and in your examples you have assumed that the body acts on i, the loop variable. Can you adapt your code to JUST PRINT the loop variable i ?
> 
> By the by, I think I have stumbled upon the answer: The lapply() caches the result, and prints the output of the function in question  immediately after printing the final i. The i's get printed serially, as the function progresses....
> 
>> lapply(1:4,function(x){print(x);Sys.sleep(x^2);x^2})
> [1] 1
> [1] 2
> [1] 3
> [1] 4
> [[1]]
> [1] 1
> 
> [[2]]
> [1] 4
> 
> [[3]]
> [1] 9
> 
> [[4]]
> [1] 16
> 
> Here x^2 's print only after 4 is printed on the console....
> 
> tHanks anyways for your reply....
> 
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
> ________________________________
> From: Rui Barradas <ruipbarradas at sapo.pt>
> Sent: Tuesday, November 8, 2022 12:24 AM
> To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
> Subject: Re: [R] print and lapply....
> 
> ?s 18:33 de 07/11/2022, akshay kulkarni escreveu:
>> Dear Rui,
>>                      Actually, I am replacing a big for loop by the lapply() function, and report the progress:
>>
>> lapply(TP, function(i) { BODY; print(i)})
>>
>> Can you please adjust your solution in this light?
>>
>> THanking you,
>> Yours sincerely,
>> AKSHAY M KULKARNI
>> ________________________________
>> From: Rui Barradas <ruipbarradas at sapo.pt>
>> Sent: Monday, November 7, 2022 11:59 PM
>> To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
>> Subject: Re: [R] print and lapply....
>>
>> ?s 17:17 de 07/11/2022, akshay kulkarni escreveu:
>>> Dear members,
>>>                                 I have the following code and output:
>>>
>>>> TP <- 1:4
>>>> lapply(TP,function(x){print(x);x^2})
>>> [1] 1
>>> [1] 2
>>> [1] 3
>>> [1] 4
>>> [[1]]
>>> [1] 1
>>>
>>> [[2]]
>>> [1] 4
>>>
>>> [[3]]
>>> [1] 9
>>>
>>> [[4]]
>>> [1] 16
>>>
>>> How do I make the print function output x along with x^2, i.e not at the beginning but before each of x^2?
>>>
>>> Many thanks in advance....
>>>
>>> THanking you,
>>> Yours sincerely
>>> AKSHAY M KULKARNI
>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> Hello,
>>
>> Here are two options, with ?cat and with ?message.
>>
>>
>> TP <- 1:4
>> lapply(TP, function(x){
>>      cat("x =", x, "x^2 =", x^2, "\n")
>> })
>>
>> lapply(TP, function(x){
>>      msg <- paste("x =", x, "x^2 =", x^2)
>>      message(msg)
>> })
>>
>>
>> Hope this helps,
>>
>> Rui Barradas
>>
>>
>>
> Hello,
> 
> 
> What do you want the lapply loop to return? If you have a BODY doing
> computations, do you want the lapply to return those values and report
> the progress?
> 
> I have chosen cat or message over print because
> 
>    - cat returns invisible(NULL),
>    - message returns invisible()
>    - print returns a value, what it prints.
> 
> Can you adapt the code below to your use case?
> 
> 
> 
> TP <- 1:4
> lapply(TP, function(x, verbose = TRUE){
>     # BODY
>     y <- rnorm(100, mean = x)
> 
>     # show progress
>     if(verbose)
>       cat("x =", x, "x^2 =", x^2, "\n")
> 
>     #return value
>     c(x = x, mean = mean(y))
> })
> 
> lapply(TP, function(x, verbose = TRUE){
>     # BODY
>     y <- rnorm(100, mean = x)
> 
>     # show progress
>     if(verbose) {
>       msg <- paste("x =", x, "x^2 =", x^2)
>       message(msg)
>     }
> 
>     #return value
>     c(x = x, mean = mean(y))
> })
> 
> 
> 
> Hope this helps,
> 
> Rui Barradas
> 
> 
Hello,

No, the x^2 are not printed after the i's. The x^2 are the function's 
return values. The function prints the i's, then returns x^2.

As for your problem, it is now more clerar.
I would write a function accepting a url to take care of scraping and 
call it in the lapply loop. The progress report can be in the loop, like 
below.

This is a complete working example, scraping the Wikipedia list of 
countries by GDP. The urls are in a list (it's always the same, I'm not 
complicating things) and in a real scraping function I would wrap 
tryCatch around it, just in case.

First the function, then the urls list, then the lapply loop.



library(rvest)

scrape <- function(url) {
   page <- read_html(url)
   gdp <- page |>
     html_element(".wikitable") |>
     html_table() |>
     as.data.frame()
   names(gdp) <- unlist(gdp[1,, drop = TRUE])
   gdp <- gdp[-1,]
   row.names(gdp) <- NULL

   #return value
   gdp
}

wiki_gdp_url <- 
"https://en.wikipedia.org/wiki/List_of_countries_by_GDP_(nominal)"
urls_list <- list(wiki_gdp_url, wiki_gdp_url)
TP <- seq_along(urls_list)

TP
# [1] 1 2

df_list <- lapply(TP, \(i) {
   URL <- urls_list[[i]]
   data <- scrape(URL)
   # show progress
   message("iteration: ", i)
   #return value
   data
})

str(df_list)


Hope this helps,

Rui Barradas


From er|cjberger @end|ng |rom gm@||@com  Tue Nov  8 07:52:10 2022
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Tue, 8 Nov 2022 08:52:10 +0200
Subject: [R] [External] Re: Selecting a minimum value of an attribute
 associated with point values neighboring a given point and assigning it as
 a new attribute
In-Reply-To: <3247be10-6d5c-12d5-1634-2a9e934f431e@gmail.com>
References: <BN6PR05MB35887EFE01222DBF7C359AAB903B9@BN6PR05MB3588.namprd05.prod.outlook.com>
 <CAGxFJbSkg9zAqk0dGcr3qJe2z2C04NEZFdHN8hWQA3oSbfHukQ@mail.gmail.com>
 <CAGgJW767Ein1S+MSywb57B2UtmE0EJodDVokPEx5_-c5BTFR1Q@mail.gmail.com>
 <CAGgJW77yY0_GDQWEAxzSdRh0N3kXgj9zrSEYUzuVsFnHyeE=aA@mail.gmail.com>
 <BN6PR05MB3588015F46997E64D5F8F138903D9@BN6PR05MB3588.namprd05.prod.outlook.com>
 <3247be10-6d5c-12d5-1634-2a9e934f431e@gmail.com>
Message-ID: <CAGgJW76LXFdbQFuqE1b-HCrQKNn08DB7voOGzN0cnkromYK0NQ@mail.gmail.com>

## Some further comments and approaches, divided into 3 sections
##
## Section 1: Micha's modified code
## Section 2: Eric's modified code:
##    a) uses Micha's dist_matrix from dnearneigh instead of the f() function
##    b) add check that it gets the same solution as Micha's modified code
## Section 3: Solution explicitly using a graph (via package igraph)

## ###########################################################

## Section 1: Micha's modified code
##
## Major change: OP wanted the Min Conc value
##               to include the Conc of the point itself
## Minor Changes: no need to write/read csv file;
##                change MAX_DIST to 50 for fewer neighbors

library(sf)
library(spdep)

## Prepare fictitious data
## Create a data.frame with n random points
set.seed(234) ## for reproducibility
N <- 1000L

LON <- runif(N, -70.0, -69.0)
LAT <- runif(N, 42.0, 43.0)
Conc <- runif(N, 90000, 100000)
df <- data.frame(LON, LAT, Conc)

## Create a distance matrix for all points,
## which contains indices to those points within
## a certain buffer distance, just as you did in your example.

MAX_DIST <- 50
pts <- st_as_sf(df, coords=c('LON', 'LAT'), crs=4326)
dist_matrix <- dnearneigh(pts, 0, MAX_DIST, use_s2=TRUE)

cat("Average number of neighbors within cutoff = ",
    mean(unlist(lapply(dist_matrix,length))),"\n")

## Function to get minimum Conc values for one row of distance matrix
MinConc <- function(x, lst, pts) {
    ## x is an index to a single point,
    ## lst is a list of point indices from distance matrix
    ## that are within the buffer distance
    Concs <- lapply(lst, function(p) {
        pts$Conc[p]
    })
    ## return(min(c(Concs[[1]])) - ## original code - forgets to
include the point itself
    return(min(c(Concs[[1]], pts$Conc[x]))) ## modified code
}

## Now apply this function to all points in pts
Conc_min <- lapply(1:N, function(i) {
  MinConc(i, dist_matrix[i], pts)
})

Conc_min <- data.frame("Conc_min" = as.numeric(Conc_min))

# Add back as new attrib to original points sf object
pts_with_min <- do.call(cbind, c(pts, Conc_min))

## ###########################################################

## Section 2: Eric's modified code:

A <- matrix(0,N,N)
z <- sapply(1:N, \(i) A[i, dist_matrix[[i]]] <<- 1) ## z is ignored
B <- A + diag(N)
C <- diag(Conc)
D <- B %*% C
D[D==0] <- NA
Conc_min.eric <- apply(D,MAR=1,\(v) min(v,na.rm=TRUE) )
test <- identical(Conc_min$Conc_min, Conc_min.eric)
cat("test = ", test, "\n")

## ###########################################################

## Section 3: Solution explicitly using a graph (via package igraph)

## For those with some familiarity with graphs, the matrix 'B' is
## an adjacency matrix. This suggests using graphs explicitly to solve
## the problem. Here is how to rewrite my code using graphs.

library(igraph)
g <- graph_from_adjacency_matrix(B,"undirected")
g <- set_vertex_attr(g, "Conc", 1:N, Conc )

Conc_min.igraph <- sapply(1:N, \(i) min(vertex_attr(g,"Conc",neighbors(g,i))))
test.igraph <- identical(Conc_min$Conc_min, Conc_min.igraph)
cat("test.igraph = ", test.igraph, "\n")

Eric

On Mon, Nov 7, 2022 at 3:11 PM Micha Silver <tsvibar at gmail.com> wrote:
>
> Eric's solution notwithstanding, here's a more "spatial" approach.
>
>
> I first create a fictitious set of 1000 points (and save to CSV to
> replicate your workflow)
>
> library(sf)
> library(spdep)
>
> # Prepare fictitious data
> # Create a data.frame with 1000 random points, and save to CSV
> LON <- runif(1000, -70.0, -69.0)
> LAT <- runif(1000, 42.0, 43.0)
> Conc <- runif(1000, 90000, 100000)
> df <- data.frame(LON, LAT, Conc)
> csv_file = "/tmp/pts_testdata.csv"
> write.csv(df, csv_file)
>
>
> Now read that CSV back in directly as an sf object (No need for the old
> SpatialPointsDataFrame). THen create a distance matrix for all points,
> which contains indicies to those points within a certain buffer
> distance, just as you did in your example.
>
>
> # Read back in as sf object, including row index
> pts <- st_as_sf(read.csv(csv_file), coords=c('LON', 'LAT'), crs=4326)
> dist_matrix <- dnearneigh(pts, 0, 100, use_s2=TRUE) # use_s2 since these
> are lon/lat
>
> Now I prepare a function to get the minimum Conv value among all points
> within the buffer distance to a given single point:
> # Function to get minimum Conc values for one row of distance matrix
> MinConc <- function(x, lst, pts) {
>    # x is an index to a single point,
>    # lst is a list of point indices from distance matrix
>    # that are within the buffer distance
>    Concs <- lapply(lst, function(p) {
>      pts$Conc[p]
>    })
>    return(min(Concs[[1]]))
> }
>
> Next run that function on all points to get a list of minimum Conv
> values for all points, and merge back to pts.
>
>
> # Now apply this function to all points in pts
> Conc_min <- lapply(pts$X, function(i){
>    MinConc(i, dist_matrix[i], pts)
> })
> Conc_min <- data.frame("Conc_min" = as.integer(Conc_min))
>
> # Add back as new attrib to original points sf object
> pts_with_min <- do.call(cbind, c(pts, Conc_min))
>
> HTH,
>
> Micha
>
>
>
> On 06/11/2022 18:40, Duhl, Tiffany R. wrote:
> > Thanks so much Eric!
> >
> >   I'm going to play around with your toy code (pun intended) & see if I can make it work for my application.
> >
> > Cheers,
> > -Tiffany
> > ________________________________
> > From: Eric Berger <ericjberger at gmail.com>
> > Sent: Sunday, November 6, 2022 10:27 AM
> > To: Bert Gunter <bgunter.4567 at gmail.com>
> > Cc: Duhl, Tiffany R. <Tiffany.Duhl at tufts.edu>; R-help <R-help at r-project.org>
> > Subject: [External] Re: [R] Selecting a minimum value of an attribute associated with point values neighboring a given point and assigning it as a new attribute
> >
> > Whoops ... left out a line in Part 2. Resending with the correction
> >
> > ## PART 2: You can use this code on the real data with f() defined appropriately
> > A <- matrix(0,N,N)
> > v <- 1:N
> > ## get the indices (j,k) where j < k (as columns in a data.frame)
> > idx <- expand.grid(v,v) |> rename(j=Var1,k=Var2) |> filter(j < k)
> > u <- sapply(1:nrow(idx),
> >             \(i){ j <- idx$j[i]; k <- idx$k[i]; A[j,k] <<- f(j,k,myData) })
> > B <- A + t(A) + diag(N)
> > C <- diag(myData$Conc)
> > D <- B %*% C
> > D[D==0] <- NA
> > myData$Conc_min <- apply(D,MAR=1,\(v){min(v,na.rm=TRUE)})
> > print(head(myData))
> >
> > On Sun, Nov 6, 2022 at 5:19 PM Eric Berger <ericjberger at gmail.com> wrote:
> >> Hi Tiffany,
> >> Here is some code that might help with your problem. I solve a "toy"
> >> problem that is conceptually the same.
> >> Part 1 sets up my toy problem. You would have to replace Part 1 with
> >> your real case. The main point is to define
> >> a function f(i, j, data) which returns 0 or 1 depending on whether the
> >> observations in rows i and j in your dataset 'data'
> >> are within your cutoff distance (i.e. 50m).
> >>
> >> You can then use Part 2 almost without changes (except for changing
> >> 'myData' to the correct name of your data).
> >>
> >> I hope this helps,
> >> Eric
> >>
> >> library(dplyr)
> >>
> >> ## PART 1: create fake data for minimal example
> >> set.seed(123) ## for reproducibility
> >> N <- 5       ## replace by number of locations (approx 9000 in your case)
> >> MAX_DISTANCE <- 2  ## 50 in your case
> >> myData <- data.frame(x=rnorm(N),y=rnorm(N),Conc=sample(1:N,N))
> >>
> >> ## The function which you must re-define for your actual case.
> >> f <- function(i,j,a) {
> >>   dist <- sqrt(sum((a[i,1:2] - a[j,1:2])^2)) ## Euclidean distance
> >>   as.integer(dist < MAX_DISTANCE)
> >> }
> >>
> >> ## PART 2: You can use this code on the real data with f() defined appropriately
> >> A <- matrix(0,N,N)
> >> ## get the indices (j,k) where j < k (as columns in a data.frame)
> >> idx <- expand.grid(v,v) |> rename(j=Var1,k=Var2) |> filter(j < k)
> >> u <- sapply(1:nrow(idx),\(i){ j <- idx$j[i]; k <- idx$k[i]; A[j,k] <<-
> >> f(j,k,myData) })
> >> B <- A + t(A) + diag(N)
> >> C <- diag(myData$Conc)
> >> D <- B %*% C
> >> D[D==0] <- NA
> >> myData$Conc_min <- apply(D,MAR=1,\(v){min(v,na.rm=TRUE)})
> >> print(head(myData))
> >>
> >>
> >> On Sat, Nov 5, 2022 at 5:14 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
> >>> Probably better posted on R-sig-geo.
> >>>
> >>> -- Bert
> >>>
> >>> On Sat, Nov 5, 2022 at 12:36 AM Duhl, Tiffany R. <Tiffany.Duhl at tufts.edu>
> >>> wrote:
> >>>
> >>>> Hello,
> >>>>
> >>>> I have sets of spatial points with LAT, LON coords (unprojected, WGS84
> >>>> datum) and several value attributes associated with each point, from
> >>>> numerous csv files (with an average of 6,000-9,000 points in each file) as
> >>>> shown in the following example:
> >>>>
> >>>> data<- read.csv("R_find_pts_testdata.csv")
> >>>>
> >>>>> data
> >>>>      ID      Date         Time        LAT            LON           Conc
> >>>> Leg.Speed    CO2  H2O BC61 Hr Min Sec
> >>>> 1   76 4/19/2021 21:25:38 42.40066 -70.98802 99300   0.0 mph 428.39 9.57
> >>>> 578 21  25  38
> >>>> 2   77 4/19/2021 21:25:39 42.40066 -70.98802 96730   0.0 mph 428.04 9.57
> >>>> 617 21  25  39
> >>>> 3   79 4/19/2021 21:25:41 42.40066 -70.98802 98800   0.2 mph 427.10 9.57
> >>>> 1027 21  25  41
> >>>> 4   80 4/19/2021 21:25:42 42.40066 -70.98802 96510     2 mph 427.99 9.58
> >>>> 1381 21  25  42
> >>>> 5   81 4/19/2021 21:25:43 42.40067 -70.98801 95540     3 mph 427.99 9.58
> >>>> 1271 21  25  43
> >>>> 6   82 4/19/2021 21:25:44 42.40068 -70.98799 94720     4 mph 427.20 9.57
> >>>> 910 21  25  44
> >>>> 7   83 4/19/2021 21:25:45 42.40069 -70.98797 94040     5 mph 427.18 9.57
> >>>> 652 21  25  45
> >>>> 8   84 4/19/2021 21:25:46 42.40072 -70.98795 95710     7 mph 427.07 9.57
> >>>> 943 21  25  46
> >>>> 9   85 4/19/2021 21:25:47 42.40074 -70.98792 96200     8 mph 427.44 9.56
> >>>> 650 21  25  47
> >>>> 10  86 4/19/2021 21:25:48 42.40078 -70.98789 93750    10 mph 428.76 9.57
> >>>> 761 21  25  48
> >>>> 11  87 4/19/2021 21:25:49 42.40081 -70.98785 93360    11 mph 429.25 9.56
> >>>> 1158 21  25  49
> >>>> 12  88 4/19/2021 21:25:50 42.40084 -70.98781 94340    12 mph 429.56 9.57
> >>>> 107 21  25  50
> >>>> 13  89 4/19/2021 21:25:51 42.40087 -70.98775 92780    12 mph 428.62 9.56
> >>>> 720 21  25  51
> >>>>
> >>>>
> >>>> What I want to do is, for each point, identify all points within 50m of
> >>>> that point, find the minimum value of the "Conc" attribute of each nearby
> >>>> set of points (including the original point) and then create a new variable
> >>>> ("Conc_min") and assign this minimum value to a new variable added to
> >>>> "data".
> >>>>
> >>>> So far, I have the following code:
> >>>>
> >>>> library(spdep)
> >>>> library(sf)
> >>>>
> >>>> setwd("C:\\mydirectory\\")
> >>>> data<- read.csv("R_find_pts_testdata.csv")
> >>>>
> >>>> #make sure the data is a data frame
> >>>> pts <- data.frame(data)
> >>>>
> >>>> #create spatial data frame and define projection
> >>>> pts_coords <- cbind(pts$LON, pts$LAT)
> >>>> data_pts <- SpatialPointsDataFrame(coords= pts_coords,
> >>>> data=pts, proj4string = CRS("+proj=longlat +datum=WGS84"))
> >>>>
> >>>> #Re-project to WGS 84 / UTM zone 18N, so the analysis is in units of m
> >>>> ptsUTM  <- sf::st_as_sf(data_pts, coords = c("LAT", "LON"), remove = F)%>%
> >>>> st_transform(32618)
> >>>>
> >>>> #create 50 m buffer around each point then intersect with points and
> >>>> finally find neighbors within the buffers
> >>>> pts_buf <- sf::st_buffer(ptsUTM, 50)
> >>>> coords  <- sf::st_coordinates(ptsUTM)
> >>>> int <- sf::st_intersects(pts_buf, ptsUTM)
> >>>> x   <- spdep::dnearneigh(coords, 0, 50)
> >>>>
> >>>> Now at this point, I'm not sure what to either the "int" (a sgbp list) or
> >>>> "x" (nb object) objects (or even if I need them both)
> >>>>
> >>>>> int
> >>>> Sparse geometry binary predicate list of length 974, where the predicate
> >>>> was `intersects'
> >>>> first 10 elements:
> >>>>   1: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> >>>>   2: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> >>>>   3: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> >>>>   4: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> >>>>   5: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> >>>>   6: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> >>>>   7: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> >>>>   8: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> >>>>   9: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> >>>>
> >>>>> x
> >>>> Neighbour list object:
> >>>> Number of regions: 974
> >>>> Number of nonzero links: 34802
> >>>> Percentage nonzero weights: 3.668481
> >>>> Average number of links: 35.73101
> >>>>
> >>>> One thought is that maybe I don't need the dnearneigh function and can
> >>>> instead convert "int" into a dataframe and somehow merge or associate
> >>>> (perhaps with an inner join) the ID fields of the buffered and intersecting
> >>>> points and then compute the minimum value of "Conc" grouping by ID:
> >>>>
> >>>>> as.data.frame(int)
> >>>>      row.id col.id
> >>>> 1        1      1
> >>>> 2        1      2
> >>>> 3        1      3
> >>>> 4        1      4
> >>>> 5        1      5
> >>>> 6        1      6
> >>>> 7        1      7
> >>>> 8        1      8
> >>>> 9        1      9
> >>>> 10       1     10
> >>>> 11       1     11
> >>>> 12       1     12
> >>>> 13       1     13
> >>>> 14       1     14
> >>>> 15       1     15
> >>>> 16       1     16
> >>>> 17       1     17
> >>>> 18       1     18
> >>>> 19       2      1
> >>>> 20       2      2
> >>>> 21       2      3
> >>>> 22       2      4
> >>>> 23       2      5
> >>>> 24       2      6
> >>>> 25       2      7
> >>>> 26       2      8
> >>>> 27       2      9
> >>>> 28       2     10
> >>>>
> >>>>
> >>>> So in the above example I'd like to take the minimum of "Conc" among the
> >>>> col.id points grouped with row.id 1 (i.e., col.ids 1-18) and assign the
> >>>> minimum value of this group as a new variable in data (Data$Conc_min), and
> >>>> do the same for row.id 2 and all the rest of the rows.
> >>>>
> >>>> I'm just not sure how to do this and I appreciate any help folks might
> >>>> have on this matter!
> >>>>
> >>>> Many thanks,
> >>>> -Tiffany
> >>>>
> >>>>          [[alternative HTML version deleted]]
> >>>>
> >>>> ______________________________________________
> >>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>> PLEASE do read the posting guide
> >>>> http://www.R-project.org/posting-guide.html
> >>>> and provide commented, minimal, self-contained, reproducible code.
> >>>>
> >>>          [[alternative HTML version deleted]]
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> > Caution: This message originated from outside of the Tufts University organization. Please exercise caution when clicking links or opening attachments. When in doubt, email the TTS Service Desk at it at tufts.edu<mailto:it at tufts.edu> or call them directly at 617-627-3376.
> >
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> --
> Micha Silver
> Ben Gurion Univ.
> Sde Boker, Remote Sensing Lab
> cell: +972-523-665918
>


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Nov  8 15:44:31 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 8 Nov 2022 14:44:31 +0000
Subject: [R] print and lapply....
In-Reply-To: <CAGxFJbTF4KDzQq3PQBXhpLx87gWszVPy6Wta6XK1XdOwriWcHA@mail.gmail.com>
References: <PU4P216MB1568A360DA25F1A43E00F62AC83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <85d70330-d644-9ad6-1c6f-e6ef21c4cd7f@sapo.pt>
 <PU4P216MB1568124CE102CB3A02D058F1C83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <28f820bf-feef-b45f-a2e2-400374efe20f@sapo.pt>
 <PU4P216MB1568284562B6403E256F76DDC83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAGxFJbTF4KDzQq3PQBXhpLx87gWszVPy6Wta6XK1XdOwriWcHA@mail.gmail.com>
Message-ID: <PU4P216MB1568C694EEABC190FB8A3B06C83F9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Bert,
                     Amazing! Very informative...THanks a lot.
________________________________
From: Bert Gunter <bgunter.4567 at gmail.com>
Sent: Tuesday, November 8, 2022 2:15 AM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: Rui Barradas <ruipbarradas at sapo.pt>; R help Mailing list <r-help at r-project.org>
Subject: Re: [R] print and lapply....

" The lapply() caches the result, and prints the output of the
function in question  immediately after printing the final i. "

I don't believe you understand how lists or lapply works. You seem to
be trying to intuit from empirical behavior. Bad idea, if so. You need
to read the docs or spend time with suitable tutorials.

Consider:
lapply produces a **list,** each component of which is the result of
applying a function, FUN, to the components of its first argument
(here 1:4), which is itself a list. Results are **not** cached in the
sense you seem to think they are. The list object that is produced by
the function is **only** printed if you ask it to be (via cat, print,
or whatever) or, by default, if the result is unassigned. The default
printing can be turned off via the invisible() function.

So:

> res <- lapply(TP, function(x){
+    print(x)
+    x^2}
+    )
[1] 1
[1] 2
[1] 3
[1] 4
[1] 5
## Nothing printed, but the results are the components of **list**
res, which can be printed on the console by print(res) or simply:

> res ## note the list syntax below
[[1]]
[1] 1

[[2]]
[1] 4

[[3]]
[1] 9

[[4]]
[1] 16

[[5]]
[1] 25

Now can you explain what happens here:

> invisible(lapply(TP, function(x){
+    print(x)
+    x^2}
+    ))
[1] 1
[1] 2
[1] 3
[1] 4
[1] 5
> ## results not printed; nothing assigned. Where can you find them? (See below)

or here:

> lapply(TP, function(x){
+    print(x)
+    x^2}
+    )
[1] 1
[1] 2
[1] 3
[1] 4
[1] 5
[[1]]
[1] 1

[[2]]
[1] 4

[[3]]
[1] 9

[[4]]
[1] 16

[[5]]
[1] 25

## How could you recover the results of the lapply and not just look
at the console printout if the results have not been assigned?
## Hint:  See ?.Last.value

-- Bert

On Mon, Nov 7, 2022 at 11:22 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> Dear Rui,
>                  THanks for your reply...The point is the loop is a scraping code, and in your examples you have assumed that the body acts on i, the loop variable. Can you adapt your code to JUST PRINT the loop variable i ?
>
> By the by, I think I have stumbled upon the answer: The lapply() caches the result, and prints the output of the function in question  immediately after printing the final i. The i's get printed serially, as the function progresses....
>
> > lapply(1:4,function(x){print(x);Sys.sleep(x^2);x^2})
> [1] 1
> [1] 2
> [1] 3
> [1] 4
> [[1]]
> [1] 1
>
> [[2]]
> [1] 4
>
> [[3]]
> [1] 9
>
> [[4]]
> [1] 16
>
> Here x^2 's print only after 4 is printed on the console....
>
> tHanks anyways for your reply....
>
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
> ________________________________
> From: Rui Barradas <ruipbarradas at sapo.pt>
> Sent: Tuesday, November 8, 2022 12:24 AM
> To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
> Subject: Re: [R] print and lapply....
>
> ?s 18:33 de 07/11/2022, akshay kulkarni escreveu:
> > Dear Rui,
> >                     Actually, I am replacing a big for loop by the lapply() function, and report the progress:
> >
> > lapply(TP, function(i) { BODY; print(i)})
> >
> > Can you please adjust your solution in this light?
> >
> > THanking you,
> > Yours sincerely,
> > AKSHAY M KULKARNI
> > ________________________________
> > From: Rui Barradas <ruipbarradas at sapo.pt>
> > Sent: Monday, November 7, 2022 11:59 PM
> > To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
> > Subject: Re: [R] print and lapply....
> >
> > ?s 17:17 de 07/11/2022, akshay kulkarni escreveu:
> >> Dear members,
> >>                                I have the following code and output:
> >>
> >>> TP <- 1:4
> >>> lapply(TP,function(x){print(x);x^2})
> >> [1] 1
> >> [1] 2
> >> [1] 3
> >> [1] 4
> >> [[1]]
> >> [1] 1
> >>
> >> [[2]]
> >> [1] 4
> >>
> >> [[3]]
> >> [1] 9
> >>
> >> [[4]]
> >> [1] 16
> >>
> >> How do I make the print function output x along with x^2, i.e not at the beginning but before each of x^2?
> >>
> >> Many thanks in advance....
> >>
> >> THanking you,
> >> Yours sincerely
> >> AKSHAY M KULKARNI
> >>
> >>         [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> > Hello,
> >
> > Here are two options, with ?cat and with ?message.
> >
> >
> > TP <- 1:4
> > lapply(TP, function(x){
> >     cat("x =", x, "x^2 =", x^2, "\n")
> > })
> >
> > lapply(TP, function(x){
> >     msg <- paste("x =", x, "x^2 =", x^2)
> >     message(msg)
> > })
> >
> >
> > Hope this helps,
> >
> > Rui Barradas
> >
> >
> >
> Hello,
>
>
> What do you want the lapply loop to return? If you have a BODY doing
> computations, do you want the lapply to return those values and report
> the progress?
>
> I have chosen cat or message over print because
>
>   - cat returns invisible(NULL),
>   - message returns invisible()
>   - print returns a value, what it prints.
>
> Can you adapt the code below to your use case?
>
>
>
> TP <- 1:4
> lapply(TP, function(x, verbose = TRUE){
>    # BODY
>    y <- rnorm(100, mean = x)
>
>    # show progress
>    if(verbose)
>      cat("x =", x, "x^2 =", x^2, "\n")
>
>    #return value
>    c(x = x, mean = mean(y))
> })
>
> lapply(TP, function(x, verbose = TRUE){
>    # BODY
>    y <- rnorm(100, mean = x)
>
>    # show progress
>    if(verbose) {
>      msg <- paste("x =", x, "x^2 =", x^2)
>      message(msg)
>    }
>
>    #return value
>    c(x = x, mean = mean(y))
> })
>
>
>
> Hope this helps,
>
> Rui Barradas
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Nov  8 15:47:21 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 8 Nov 2022 14:47:21 +0000
Subject: [R] print and lapply....
In-Reply-To: <77cc1472-cb84-e953-f978-ebecaca7c4a9@sapo.pt>
References: <PU4P216MB1568A360DA25F1A43E00F62AC83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <85d70330-d644-9ad6-1c6f-e6ef21c4cd7f@sapo.pt>
 <PU4P216MB1568124CE102CB3A02D058F1C83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <28f820bf-feef-b45f-a2e2-400374efe20f@sapo.pt>
 <PU4P216MB1568284562B6403E256F76DDC83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <77cc1472-cb84-e953-f978-ebecaca7c4a9@sapo.pt>
Message-ID: <PU4P216MB1568B071D6953887BFF56AB5C83F9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Rui,
                  The replies from you, Bert, Tim and solved my problem. My last question: what if I put print inside the body of the function passed on to lapply, instead of separately in the function argument of apply? Is this what you insinuated in your reply?

THanking you,
yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Rui Barradas <ruipbarradas at sapo.pt>
Sent: Tuesday, November 8, 2022 2:20 AM
To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
Subject: Re: [R] print and lapply....

?s 19:22 de 07/11/2022, akshay kulkarni escreveu:
> Dear Rui,
>                   THanks for your reply...The point is the loop is a scraping code, and in your examples you have assumed that the body acts on i, the loop variable. Can you adapt your code to JUST PRINT the loop variable i ?
>
> By the by, I think I have stumbled upon the answer: The lapply() caches the result, and prints the output of the function in question  immediately after printing the final i. The i's get printed serially, as the function progresses....
>
>> lapply(1:4,function(x){print(x);Sys.sleep(x^2);x^2})
> [1] 1
> [1] 2
> [1] 3
> [1] 4
> [[1]]
> [1] 1
>
> [[2]]
> [1] 4
>
> [[3]]
> [1] 9
>
> [[4]]
> [1] 16
>
> Here x^2 's print only after 4 is printed on the console....
>
> tHanks anyways for your reply....
>
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
> ________________________________
> From: Rui Barradas <ruipbarradas at sapo.pt>
> Sent: Tuesday, November 8, 2022 12:24 AM
> To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
> Subject: Re: [R] print and lapply....
>
> ?s 18:33 de 07/11/2022, akshay kulkarni escreveu:
>> Dear Rui,
>>                      Actually, I am replacing a big for loop by the lapply() function, and report the progress:
>>
>> lapply(TP, function(i) { BODY; print(i)})
>>
>> Can you please adjust your solution in this light?
>>
>> THanking you,
>> Yours sincerely,
>> AKSHAY M KULKARNI
>> ________________________________
>> From: Rui Barradas <ruipbarradas at sapo.pt>
>> Sent: Monday, November 7, 2022 11:59 PM
>> To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
>> Subject: Re: [R] print and lapply....
>>
>> ?s 17:17 de 07/11/2022, akshay kulkarni escreveu:
>>> Dear members,
>>>                                 I have the following code and output:
>>>
>>>> TP <- 1:4
>>>> lapply(TP,function(x){print(x);x^2})
>>> [1] 1
>>> [1] 2
>>> [1] 3
>>> [1] 4
>>> [[1]]
>>> [1] 1
>>>
>>> [[2]]
>>> [1] 4
>>>
>>> [[3]]
>>> [1] 9
>>>
>>> [[4]]
>>> [1] 16
>>>
>>> How do I make the print function output x along with x^2, i.e not at the beginning but before each of x^2?
>>>
>>> Many thanks in advance....
>>>
>>> THanking you,
>>> Yours sincerely
>>> AKSHAY M KULKARNI
>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> Hello,
>>
>> Here are two options, with ?cat and with ?message.
>>
>>
>> TP <- 1:4
>> lapply(TP, function(x){
>>      cat("x =", x, "x^2 =", x^2, "\n")
>> })
>>
>> lapply(TP, function(x){
>>      msg <- paste("x =", x, "x^2 =", x^2)
>>      message(msg)
>> })
>>
>>
>> Hope this helps,
>>
>> Rui Barradas
>>
>>
>>
> Hello,
>
>
> What do you want the lapply loop to return? If you have a BODY doing
> computations, do you want the lapply to return those values and report
> the progress?
>
> I have chosen cat or message over print because
>
>    - cat returns invisible(NULL),
>    - message returns invisible()
>    - print returns a value, what it prints.
>
> Can you adapt the code below to your use case?
>
>
>
> TP <- 1:4
> lapply(TP, function(x, verbose = TRUE){
>     # BODY
>     y <- rnorm(100, mean = x)
>
>     # show progress
>     if(verbose)
>       cat("x =", x, "x^2 =", x^2, "\n")
>
>     #return value
>     c(x = x, mean = mean(y))
> })
>
> lapply(TP, function(x, verbose = TRUE){
>     # BODY
>     y <- rnorm(100, mean = x)
>
>     # show progress
>     if(verbose) {
>       msg <- paste("x =", x, "x^2 =", x^2)
>       message(msg)
>     }
>
>     #return value
>     c(x = x, mean = mean(y))
> })
>
>
>
> Hope this helps,
>
> Rui Barradas
>
>
Hello,

No, the x^2 are not printed after the i's. The x^2 are the function's
return values. The function prints the i's, then returns x^2.

As for your problem, it is now more clerar.
I would write a function accepting a url to take care of scraping and
call it in the lapply loop. The progress report can be in the loop, like
below.

This is a complete working example, scraping the Wikipedia list of
countries by GDP. The urls are in a list (it's always the same, I'm not
complicating things) and in a real scraping function I would wrap
tryCatch around it, just in case.

First the function, then the urls list, then the lapply loop.



library(rvest)

scrape <- function(url) {
   page <- read_html(url)
   gdp <- page |>
     html_element(".wikitable") |>
     html_table() |>
     as.data.frame()
   names(gdp) <- unlist(gdp[1,, drop = TRUE])
   gdp <- gdp[-1,]
   row.names(gdp) <- NULL

   #return value
   gdp
}

wiki_gdp_url <-
"https://en.wikipedia.org/wiki/List_of_countries_by_GDP_(nominal)"
urls_list <- list(wiki_gdp_url, wiki_gdp_url)
TP <- seq_along(urls_list)

TP
# [1] 1 2

df_list <- lapply(TP, \(i) {
   URL <- urls_list[[i]]
   data <- scrape(URL)
   # show progress
   message("iteration: ", i)
   #return value
   data
})

str(df_list)


Hope this helps,

Rui Barradas


	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Nov  8 15:48:44 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 8 Nov 2022 14:48:44 +0000
Subject: [R] print and lapply....
In-Reply-To: <BN6PR2201MB155366AA16C4F596735677B8CF3C9@BN6PR2201MB1553.namprd22.prod.outlook.com>
References: <PU4P216MB1568A360DA25F1A43E00F62AC83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAPcHnpRxP9O1_EF81-9-+J+OOTePty3peRXgUVvW=_YYcXrstQ@mail.gmail.com>
 <CAGxFJbSyM8XmQ+8s7mQRChMgJj6+qJO+OD==ML8No8yCA8SjaA@mail.gmail.com>
 <PU4P216MB15688AD15B43427708CE42AEC83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <BN6PR2201MB155366AA16C4F596735677B8CF3C9@BN6PR2201MB1553.namprd22.prod.outlook.com>
Message-ID: <PU4P216MB1568C75ADFFA7722DBE33C61C83F9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Tim,
                   I think the recent replies from you, Bert and Rui cleared everything ...
THanks a lot..

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Ebert,Timothy Aaron <tebert at ufl.edu>
Sent: Tuesday, November 8, 2022 2:15 AM
To: akshay kulkarni <akshay_e4 at hotmail.com>; Bert Gunter <bgunter.4567 at gmail.com>; Andrew Simmons <akwsimmo at gmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: RE: [R] print and lapply....

Dear Akshay,
    I think we have provided several solutions to the question asked. Can you please adjust your question to more closely align with what you need. It would be nice if you can provide sufficient detail so that we can see how you have adapted our solutions and how these have not quite addressed this problem.

Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of akshay kulkarni
Sent: Monday, November 7, 2022 1:10 PM
To: Bert Gunter <bgunter.4567 at gmail.com>; Andrew Simmons <akwsimmo at gmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] print and lapply....

[External Email]

Dear Bert,
                   Actually, I am replacing a big for loop by the lapply() function, and report the progress:

lapply(TP, function(i) { BODY; print(i)})

Can you please adjust your solution in this light?

THanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Bert Gunter <bgunter.4567 at gmail.com>
Sent: Monday, November 7, 2022 11:16 PM
To: Andrew Simmons <akwsimmo at gmail.com>
Cc: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
Subject: Re: [R] print and lapply....

Well... yes, of course. But assuming the sole purpose is to print the results and not to save them for further processing, the OP's approach seems rather painful. My preference would be to vectorize:

> print(cbind(TP, TPsq =TP^2), print.gap = 3)
       TP   TPsq
[1,]    1      1
[2,]    2      4
[3,]    3      9
[4,]    4     16

See ?print.default for details

-- Bert


On Mon, Nov 7, 2022 at 9:20 AM Andrew Simmons <akwsimmo at gmail.com> wrote:
>
> put print() around x^2
>
> On Mon, Nov 7, 2022, 12:18 akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> > Dear members,
> >                              I have the following code and output:
> >
> > > TP <- 1:4
> > > lapply(TP,function(x){print(x);x^2})
> > [1] 1
> > [1] 2
> > [1] 3
> > [1] 4
> > [[1]]
> > [1] 1
> >
> > [[2]]
> > [1] 4
> >
> > [[3]]
> > [1] 9
> >
> > [[4]]
> > [1] 16
> >
> > How do I make the print function output x along with x^2, i.e not at
> > the beginning but before each of x^2?
> >
> > Many thanks in advance....
> >
> > THanking you,
> > Yours sincerely
> > AKSHAY M KULKARNI
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fst
> > at.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%4
> > 0ufl.edu%7Cb726a89349ed4860265708dac0eb5d0a%7C0d4da0f84a314d76ace60a
> > 62331e1b84%7C0%7C0%7C638034414365456384%7CUnknown%7CTWFpbGZsb3d8eyJW
> > IjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C300
> > 0%7C%7C%7C&amp;sdata=dQk1JPxWI4D0D6%2FSoC8LWw56749ulaFrGQc6affgBeM%3
> > D&amp;reserved=0
> > PLEASE do read the posting guide
> > https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww
> > .r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.
> > edu%7Cb726a89349ed4860265708dac0eb5d0a%7C0d4da0f84a314d76ace60a62331
> > e1b84%7C0%7C0%7C638034414365456384%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiM
> > C4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%
> > 7C%7C&amp;sdata=KDskHBxmxe0DV9XO7GvkESemUNTq2w%2BT%2Fro%2Bgb4DS2w%3D
> > &amp;reserved=0 and provide commented, minimal, self-contained,
> > reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat
> .ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl
> .edu%7Cb726a89349ed4860265708dac0eb5d0a%7C0d4da0f84a314d76ace60a62331e
> 1b84%7C0%7C0%7C638034414365456384%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4w
> LjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C
> &amp;sdata=dQk1JPxWI4D0D6%2FSoC8LWw56749ulaFrGQc6affgBeM%3D&amp;reserv
> ed=0 PLEASE do read the posting guide
> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r
> -project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%
> 7Cb726a89349ed4860265708dac0eb5d0a%7C0d4da0f84a314d76ace60a62331e1b84%
> 7C0%7C0%7C638034414365612626%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwM
> DAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;
> sdata=OxZmpA4ORbfUq0gqM8ebZvK5bQTaiCwo0Y1ekn%2F3zBE%3D&amp;reserved=0
> and provide commented, minimal, self-contained, reproducible code.

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7Cb726a89349ed4860265708dac0eb5d0a%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638034414365612626%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=OCyLwP3YBC3kfih9kaX6vEbPdzvAq1a48LeDRyqlYd0%3D&amp;reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7Cb726a89349ed4860265708dac0eb5d0a%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638034414365612626%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=OxZmpA4ORbfUq0gqM8ebZvK5bQTaiCwo0Y1ekn%2F3zBE%3D&amp;reserved=0
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Tue Nov  8 16:21:56 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Tue, 8 Nov 2022 15:21:56 +0000
Subject: [R] print and lapply....
In-Reply-To: <PU4P216MB1568B071D6953887BFF56AB5C83F9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB1568A360DA25F1A43E00F62AC83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <85d70330-d644-9ad6-1c6f-e6ef21c4cd7f@sapo.pt>
 <PU4P216MB1568124CE102CB3A02D058F1C83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <28f820bf-feef-b45f-a2e2-400374efe20f@sapo.pt>
 <PU4P216MB1568284562B6403E256F76DDC83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <77cc1472-cb84-e953-f978-ebecaca7c4a9@sapo.pt>
 <PU4P216MB1568B071D6953887BFF56AB5C83F9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <4228c15d-4dfb-34be-2ce8-ee3241f03e19@sapo.pt>

?s 14:47 de 08/11/2022, akshay kulkarni escreveu:
> Dear Rui,
>                    The replies from you, Bert, Tim and solved my problem. My last question: what if I put print inside the body of the function passed on to lapply, instead of separately in the function argument of apply? Is this what you insinuated in your reply?
> 
> THanking you,
> yours sincerely,
> AKSHAY M KULKARNI
> ________________________________
> From: Rui Barradas <ruipbarradas at sapo.pt>
> Sent: Tuesday, November 8, 2022 2:20 AM
> To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
> Subject: Re: [R] print and lapply....
> 
> ?s 19:22 de 07/11/2022, akshay kulkarni escreveu:
>> Dear Rui,
>>                    THanks for your reply...The point is the loop is a scraping code, and in your examples you have assumed that the body acts on i, the loop variable. Can you adapt your code to JUST PRINT the loop variable i ?
>>
>> By the by, I think I have stumbled upon the answer: The lapply() caches the result, and prints the output of the function in question  immediately after printing the final i. The i's get printed serially, as the function progresses....
>>
>>> lapply(1:4,function(x){print(x);Sys.sleep(x^2);x^2})
>> [1] 1
>> [1] 2
>> [1] 3
>> [1] 4
>> [[1]]
>> [1] 1
>>
>> [[2]]
>> [1] 4
>>
>> [[3]]
>> [1] 9
>>
>> [[4]]
>> [1] 16
>>
>> Here x^2 's print only after 4 is printed on the console....
>>
>> tHanks anyways for your reply....
>>
>> THanking you,
>> Yours sincerely,
>> AKSHAY M KULKARNI
>> ________________________________
>> From: Rui Barradas <ruipbarradas at sapo.pt>
>> Sent: Tuesday, November 8, 2022 12:24 AM
>> To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
>> Subject: Re: [R] print and lapply....
>>
>> ?s 18:33 de 07/11/2022, akshay kulkarni escreveu:
>>> Dear Rui,
>>>                       Actually, I am replacing a big for loop by the lapply() function, and report the progress:
>>>
>>> lapply(TP, function(i) { BODY; print(i)})
>>>
>>> Can you please adjust your solution in this light?
>>>
>>> THanking you,
>>> Yours sincerely,
>>> AKSHAY M KULKARNI
>>> ________________________________
>>> From: Rui Barradas <ruipbarradas at sapo.pt>
>>> Sent: Monday, November 7, 2022 11:59 PM
>>> To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
>>> Subject: Re: [R] print and lapply....
>>>
>>> ?s 17:17 de 07/11/2022, akshay kulkarni escreveu:
>>>> Dear members,
>>>>                                  I have the following code and output:
>>>>
>>>>> TP <- 1:4
>>>>> lapply(TP,function(x){print(x);x^2})
>>>> [1] 1
>>>> [1] 2
>>>> [1] 3
>>>> [1] 4
>>>> [[1]]
>>>> [1] 1
>>>>
>>>> [[2]]
>>>> [1] 4
>>>>
>>>> [[3]]
>>>> [1] 9
>>>>
>>>> [[4]]
>>>> [1] 16
>>>>
>>>> How do I make the print function output x along with x^2, i.e not at the beginning but before each of x^2?
>>>>
>>>> Many thanks in advance....
>>>>
>>>> THanking you,
>>>> Yours sincerely
>>>> AKSHAY M KULKARNI
>>>>
>>>>           [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>> Hello,
>>>
>>> Here are two options, with ?cat and with ?message.
>>>
>>>
>>> TP <- 1:4
>>> lapply(TP, function(x){
>>>       cat("x =", x, "x^2 =", x^2, "\n")
>>> })
>>>
>>> lapply(TP, function(x){
>>>       msg <- paste("x =", x, "x^2 =", x^2)
>>>       message(msg)
>>> })
>>>
>>>
>>> Hope this helps,
>>>
>>> Rui Barradas
>>>
>>>
>>>
>> Hello,
>>
>>
>> What do you want the lapply loop to return? If you have a BODY doing
>> computations, do you want the lapply to return those values and report
>> the progress?
>>
>> I have chosen cat or message over print because
>>
>>     - cat returns invisible(NULL),
>>     - message returns invisible()
>>     - print returns a value, what it prints.
>>
>> Can you adapt the code below to your use case?
>>
>>
>>
>> TP <- 1:4
>> lapply(TP, function(x, verbose = TRUE){
>>      # BODY
>>      y <- rnorm(100, mean = x)
>>
>>      # show progress
>>      if(verbose)
>>        cat("x =", x, "x^2 =", x^2, "\n")
>>
>>      #return value
>>      c(x = x, mean = mean(y))
>> })
>>
>> lapply(TP, function(x, verbose = TRUE){
>>      # BODY
>>      y <- rnorm(100, mean = x)
>>
>>      # show progress
>>      if(verbose) {
>>        msg <- paste("x =", x, "x^2 =", x^2)
>>        message(msg)
>>      }
>>
>>      #return value
>>      c(x = x, mean = mean(y))
>> })
>>
>>
>>
>> Hope this helps,
>>
>> Rui Barradas
>>
>>
> Hello,
> 
> No, the x^2 are not printed after the i's. The x^2 are the function's
> return values. The function prints the i's, then returns x^2.
> 
> As for your problem, it is now more clerar.
> I would write a function accepting a url to take care of scraping and
> call it in the lapply loop. The progress report can be in the loop, like
> below.
> 
> This is a complete working example, scraping the Wikipedia list of
> countries by GDP. The urls are in a list (it's always the same, I'm not
> complicating things) and in a real scraping function I would wrap
> tryCatch around it, just in case.
> 
> First the function, then the urls list, then the lapply loop.
> 
> 
> 
> library(rvest)
> 
> scrape <- function(url) {
>     page <- read_html(url)
>     gdp <- page |>
>       html_element(".wikitable") |>
>       html_table() |>
>       as.data.frame()
>     names(gdp) <- unlist(gdp[1,, drop = TRUE])
>     gdp <- gdp[-1,]
>     row.names(gdp) <- NULL
> 
>     #return value
>     gdp
> }
> 
> wiki_gdp_url <-
> "https://en.wikipedia.org/wiki/List_of_countries_by_GDP_(nominal)"
> urls_list <- list(wiki_gdp_url, wiki_gdp_url)
> TP <- seq_along(urls_list)
> 
> TP
> # [1] 1 2
> 
> df_list <- lapply(TP, \(i) {
>     URL <- urls_list[[i]]
>     data <- scrape(URL)
>     # show progress
>     message("iteration: ", i)
>     #return value
>     data
> })
> 
> str(df_list)
> 
> 
> Hope this helps,
> 
> Rui Barradas
> 
> 
Hello,

Yes, you can put it in the function. I have separated the function from 
printing the progress because I thought it might make things more clear, 
that's all.

Hope this helps,

Rui Barradas


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Nov  8 16:23:55 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 8 Nov 2022 15:23:55 +0000
Subject: [R] print and lapply....
In-Reply-To: <4228c15d-4dfb-34be-2ce8-ee3241f03e19@sapo.pt>
References: <PU4P216MB1568A360DA25F1A43E00F62AC83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <85d70330-d644-9ad6-1c6f-e6ef21c4cd7f@sapo.pt>
 <PU4P216MB1568124CE102CB3A02D058F1C83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <28f820bf-feef-b45f-a2e2-400374efe20f@sapo.pt>
 <PU4P216MB1568284562B6403E256F76DDC83C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <77cc1472-cb84-e953-f978-ebecaca7c4a9@sapo.pt>
 <PU4P216MB1568B071D6953887BFF56AB5C83F9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <4228c15d-4dfb-34be-2ce8-ee3241f03e19@sapo.pt>
Message-ID: <PU4P216MB15682DD6A2516A6DFBAD8BBCC83F9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Rui,
                  THanks a lot!

THanking you,
Yours sincerely
AKSHAY M KULKARNI
________________________________
From: Rui Barradas <ruipbarradas at sapo.pt>
Sent: Tuesday, November 8, 2022 8:51 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
Subject: Re: [R] print and lapply....

?s 14:47 de 08/11/2022, akshay kulkarni escreveu:
> Dear Rui,
>                    The replies from you, Bert, Tim and solved my problem. My last question: what if I put print inside the body of the function passed on to lapply, instead of separately in the function argument of apply? Is this what you insinuated in your reply?
>
> THanking you,
> yours sincerely,
> AKSHAY M KULKARNI
> ________________________________
> From: Rui Barradas <ruipbarradas at sapo.pt>
> Sent: Tuesday, November 8, 2022 2:20 AM
> To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
> Subject: Re: [R] print and lapply....
>
> ?s 19:22 de 07/11/2022, akshay kulkarni escreveu:
>> Dear Rui,
>>                    THanks for your reply...The point is the loop is a scraping code, and in your examples you have assumed that the body acts on i, the loop variable. Can you adapt your code to JUST PRINT the loop variable i ?
>>
>> By the by, I think I have stumbled upon the answer: The lapply() caches the result, and prints the output of the function in question  immediately after printing the final i. The i's get printed serially, as the function progresses....
>>
>>> lapply(1:4,function(x){print(x);Sys.sleep(x^2);x^2})
>> [1] 1
>> [1] 2
>> [1] 3
>> [1] 4
>> [[1]]
>> [1] 1
>>
>> [[2]]
>> [1] 4
>>
>> [[3]]
>> [1] 9
>>
>> [[4]]
>> [1] 16
>>
>> Here x^2 's print only after 4 is printed on the console....
>>
>> tHanks anyways for your reply....
>>
>> THanking you,
>> Yours sincerely,
>> AKSHAY M KULKARNI
>> ________________________________
>> From: Rui Barradas <ruipbarradas at sapo.pt>
>> Sent: Tuesday, November 8, 2022 12:24 AM
>> To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
>> Subject: Re: [R] print and lapply....
>>
>> ?s 18:33 de 07/11/2022, akshay kulkarni escreveu:
>>> Dear Rui,
>>>                       Actually, I am replacing a big for loop by the lapply() function, and report the progress:
>>>
>>> lapply(TP, function(i) { BODY; print(i)})
>>>
>>> Can you please adjust your solution in this light?
>>>
>>> THanking you,
>>> Yours sincerely,
>>> AKSHAY M KULKARNI
>>> ________________________________
>>> From: Rui Barradas <ruipbarradas at sapo.pt>
>>> Sent: Monday, November 7, 2022 11:59 PM
>>> To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
>>> Subject: Re: [R] print and lapply....
>>>
>>> ?s 17:17 de 07/11/2022, akshay kulkarni escreveu:
>>>> Dear members,
>>>>                                  I have the following code and output:
>>>>
>>>>> TP <- 1:4
>>>>> lapply(TP,function(x){print(x);x^2})
>>>> [1] 1
>>>> [1] 2
>>>> [1] 3
>>>> [1] 4
>>>> [[1]]
>>>> [1] 1
>>>>
>>>> [[2]]
>>>> [1] 4
>>>>
>>>> [[3]]
>>>> [1] 9
>>>>
>>>> [[4]]
>>>> [1] 16
>>>>
>>>> How do I make the print function output x along with x^2, i.e not at the beginning but before each of x^2?
>>>>
>>>> Many thanks in advance....
>>>>
>>>> THanking you,
>>>> Yours sincerely
>>>> AKSHAY M KULKARNI
>>>>
>>>>           [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>> Hello,
>>>
>>> Here are two options, with ?cat and with ?message.
>>>
>>>
>>> TP <- 1:4
>>> lapply(TP, function(x){
>>>       cat("x =", x, "x^2 =", x^2, "\n")
>>> })
>>>
>>> lapply(TP, function(x){
>>>       msg <- paste("x =", x, "x^2 =", x^2)
>>>       message(msg)
>>> })
>>>
>>>
>>> Hope this helps,
>>>
>>> Rui Barradas
>>>
>>>
>>>
>> Hello,
>>
>>
>> What do you want the lapply loop to return? If you have a BODY doing
>> computations, do you want the lapply to return those values and report
>> the progress?
>>
>> I have chosen cat or message over print because
>>
>>     - cat returns invisible(NULL),
>>     - message returns invisible()
>>     - print returns a value, what it prints.
>>
>> Can you adapt the code below to your use case?
>>
>>
>>
>> TP <- 1:4
>> lapply(TP, function(x, verbose = TRUE){
>>      # BODY
>>      y <- rnorm(100, mean = x)
>>
>>      # show progress
>>      if(verbose)
>>        cat("x =", x, "x^2 =", x^2, "\n")
>>
>>      #return value
>>      c(x = x, mean = mean(y))
>> })
>>
>> lapply(TP, function(x, verbose = TRUE){
>>      # BODY
>>      y <- rnorm(100, mean = x)
>>
>>      # show progress
>>      if(verbose) {
>>        msg <- paste("x =", x, "x^2 =", x^2)
>>        message(msg)
>>      }
>>
>>      #return value
>>      c(x = x, mean = mean(y))
>> })
>>
>>
>>
>> Hope this helps,
>>
>> Rui Barradas
>>
>>
> Hello,
>
> No, the x^2 are not printed after the i's. The x^2 are the function's
> return values. The function prints the i's, then returns x^2.
>
> As for your problem, it is now more clerar.
> I would write a function accepting a url to take care of scraping and
> call it in the lapply loop. The progress report can be in the loop, like
> below.
>
> This is a complete working example, scraping the Wikipedia list of
> countries by GDP. The urls are in a list (it's always the same, I'm not
> complicating things) and in a real scraping function I would wrap
> tryCatch around it, just in case.
>
> First the function, then the urls list, then the lapply loop.
>
>
>
> library(rvest)
>
> scrape <- function(url) {
>     page <- read_html(url)
>     gdp <- page |>
>       html_element(".wikitable") |>
>       html_table() |>
>       as.data.frame()
>     names(gdp) <- unlist(gdp[1,, drop = TRUE])
>     gdp <- gdp[-1,]
>     row.names(gdp) <- NULL
>
>     #return value
>     gdp
> }
>
> wiki_gdp_url <-
> "https://en.wikipedia.org/wiki/List_of_countries_by_GDP_(nominal)"
> urls_list <- list(wiki_gdp_url, wiki_gdp_url)
> TP <- seq_along(urls_list)
>
> TP
> # [1] 1 2
>
> df_list <- lapply(TP, \(i) {
>     URL <- urls_list[[i]]
>     data <- scrape(URL)
>     # show progress
>     message("iteration: ", i)
>     #return value
>     data
> })
>
> str(df_list)
>
>
> Hope this helps,
>
> Rui Barradas
>
>
Hello,

Yes, you can put it in the function. I have separated the function from
printing the progress because I thought it might make things more clear,
that's all.

Hope this helps,

Rui Barradas


	[[alternative HTML version deleted]]


From er|cjberger @end|ng |rom gm@||@com  Wed Nov  9 07:22:18 2022
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Wed, 9 Nov 2022 08:22:18 +0200
Subject: [R] [External] Re: Selecting a minimum value of an attribute
 associated with point values neighboring a given point and assigning it as
 a new attribute
In-Reply-To: <BN6PR05MB3588DCB2A66A6048CD9D7645903E9@BN6PR05MB3588.namprd05.prod.outlook.com>
References: <BN6PR05MB35887EFE01222DBF7C359AAB903B9@BN6PR05MB3588.namprd05.prod.outlook.com>
 <CAGxFJbSkg9zAqk0dGcr3qJe2z2C04NEZFdHN8hWQA3oSbfHukQ@mail.gmail.com>
 <CAGgJW767Ein1S+MSywb57B2UtmE0EJodDVokPEx5_-c5BTFR1Q@mail.gmail.com>
 <CAGgJW77yY0_GDQWEAxzSdRh0N3kXgj9zrSEYUzuVsFnHyeE=aA@mail.gmail.com>
 <BN6PR05MB3588015F46997E64D5F8F138903D9@BN6PR05MB3588.namprd05.prod.outlook.com>
 <3247be10-6d5c-12d5-1634-2a9e934f431e@gmail.com>
 <BN6PR05MB3588DCB2A66A6048CD9D7645903E9@BN6PR05MB3588.namprd05.prod.outlook.com>
Message-ID: <CAGgJW74vd+et3_ShdyXxL8bxWUknviy3i2kAfumAL79+_1JeaQ@mail.gmail.com>

Hi Tiffany,
You can replace

Conc_min <- lapply(1:N, function(i) { ...

by

Conc_min <- lapply(seq_len(nrow(pts)), function(i) { ..

Best,
Eric

On Wed, Nov 9, 2022 at 4:38 AM Duhl, Tiffany R. <Tiffany.Duhl at tufts.edu> wrote:
>
> First off, thanks SO much Eric and Micha for your help on this problem!  I think Micha's spatially-oriented solution with Eric's slight modifications will work best for my application but there is one snag (see the commented section near the end of the following code)-- basically I don't know how to apply the lapply operator to a list with a variable length (namely the length of my input csv files) rather than the fixed length that Eric used:
>
> library(sf)
> library(spdep)
> data<- read.csv("R_find_pts_testdata.csv")
>
> MAX_DIST <- 0.05  #50 m in km, the units of dnearneigh when coords are in degrees
> pts <- st_as_sf(data, coords=c('LON', 'LAT'), crs=4326)
> dist_matrix <- dnearneigh(pts, 0, MAX_DIST, use_s2=TRUE)
>
> #Micha's function to get the minimum Conc value among all points
> #within the buffer distance to a given single point:
> # Function to get minimum Conc values for one row of distance matrix
>
> MinConc <- function(x, lst, pts) {
>    Concs <- lapply(lst, function(p) {
>      pts$Conc[p]
>    })
>    return(min(Concs[[1]]))
> }
>
> # above, x is an index to a single point, lst is a list of point indices
> #from distance matrix within the buffer distance
>
> #Next run function on all points to get list of minimum Conc
> #values for all points, and merge back to pts.
> #...modified by Eric to include original point
>
> return(min(c(Concs[[1]], pts$Conc[x])))
>
> # Now apply this function to all points in pts
> ###This is where the problem is, I think:
> ###Eric had used N <- 1000L and later
> ###Conc_min <- lapply(1:N, function(i) {
> ### MinConc(i, dist_matrix[i], pts)})
> ###But I need the length of the list the function is applied to
> ###to be variable, depending on the length of the input csv file
> ###unlike the dummy variable dataframe that Eric used with a set length
> ###So I changed the "x" argument in lapply to "pts$X" but that generates an empty list
>
> Conc_min <- lapply(pts$X, function(i){
>    MinConc(i, dist_matrix[i], pts)
> #})
> Conc_min <- data.frame("Conc_min" = as.integer(Conc_min))
>
> # Add back as new attrib to original points sf object
> pts_with_min <- do.call(cbind, c(pts, Conc_min))
>
>
>
> Many thanks again for your help on this!
> Best regards,
> -Tiffany
> ________________________________
> From: Micha Silver <tsvibar at gmail.com>
> Sent: Monday, November 7, 2022 8:11 AM
> To: Duhl, Tiffany R. <Tiffany.Duhl at tufts.edu>; Eric Berger <ericjberger at gmail.com>
> Cc: R-help <R-help at r-project.org>
> Subject: Re: [R] [External] Re: Selecting a minimum value of an attribute associated with point values neighboring a given point and assigning it as a new attribute
>
> Eric's solution notwithstanding, here's a more "spatial" approach.
>
>
> I first create a fictitious set of 1000 points (and save to CSV to
> replicate your workflow)
>
> library(sf)
> library(spdep)
>
> # Prepare fictitious data
> # Create a data.frame with 1000 random points, and save to CSV
> LON <- runif(1000, -70.0, -69.0)
> LAT <- runif(1000, 42.0, 43.0)
> Conc <- runif(1000, 90000, 100000)
> df <- data.frame(LON, LAT, Conc)
> csv_file = "/tmp/pts_testdata.csv"
> write.csv(df, csv_file)
>
>
> Now read that CSV back in directly as an sf object (No need for the old
> SpatialPointsDataFrame). THen create a distance matrix for all points,
> which contains indicies to those points within a certain buffer
> distance, just as you did in your example.
>
>
> # Read back in as sf object, including row index
> pts <- st_as_sf(read.csv(csv_file), coords=c('LON', 'LAT'), crs=4326)
> dist_matrix <- dnearneigh(pts, 0, 100, use_s2=TRUE) # use_s2 since these
> are lon/lat
>
> Now I prepare a function to get the minimum Conv value among all points
> within the buffer distance to a given single point:
> # Function to get minimum Conc values for one row of distance matrix
> MinConc <- function(x, lst, pts) {
>    # x is an index to a single point,
>    # lst is a list of point indices from distance matrix
>    # that are within the buffer distance
>    Concs <- lapply(lst, function(p) {
>      pts$Conc[p]
>    })
>    return(min(Concs[[1]]))
> }
>
> Next run that function on all points to get a list of minimum Conv
> values for all points, and merge back to pts.
>
>
> # Now apply this function to all points in pts
> Conc_min <- lapply(pts$X, function(i){
>    MinConc(i, dist_matrix[i], pts)
> })
> Conc_min <- data.frame("Conc_min" = as.integer(Conc_min))
>
> # Add back as new attrib to original points sf object
> pts_with_min <- do.call(cbind, c(pts, Conc_min))
>
> HTH,
>
> Micha
>
>
>
> On 06/11/2022 18:40, Duhl, Tiffany R. wrote:
> > Thanks so much Eric!
> >
> >   I'm going to play around with your toy code (pun intended) & see if I can make it work for my application.
> >
> > Cheers,
> > -Tiffany
> > ________________________________
> > From: Eric Berger <ericjberger at gmail.com>
> > Sent: Sunday, November 6, 2022 10:27 AM
> > To: Bert Gunter <bgunter.4567 at gmail.com>
> > Cc: Duhl, Tiffany R. <Tiffany.Duhl at tufts.edu>; R-help <R-help at r-project.org>
> > Subject: [External] Re: [R] Selecting a minimum value of an attribute associated with point values neighboring a given point and assigning it as a new attribute
> >
> > Whoops ... left out a line in Part 2. Resending with the correction
> >
> > ## PART 2: You can use this code on the real data with f() defined appropriately
> > A <- matrix(0,N,N)
> > v <- 1:N
> > ## get the indices (j,k) where j < k (as columns in a data.frame)
> > idx <- expand.grid(v,v) |> rename(j=Var1,k=Var2) |> filter(j < k)
> > u <- sapply(1:nrow(idx),
> >             \(i){ j <- idx$j[i]; k <- idx$k[i]; A[j,k] <<- f(j,k,myData) })
> > B <- A + t(A) + diag(N)
> > C <- diag(myData$Conc)
> > D <- B %*% C
> > D[D==0] <- NA
> > myData$Conc_min <- apply(D,MAR=1,\(v){min(v,na.rm=TRUE)})
> > print(head(myData))
> >
> > On Sun, Nov 6, 2022 at 5:19 PM Eric Berger <ericjberger at gmail.com> wrote:
> >> Hi Tiffany,
> >> Here is some code that might help with your problem. I solve a "toy"
> >> problem that is conceptually the same.
> >> Part 1 sets up my toy problem. You would have to replace Part 1 with
> >> your real case. The main point is to define
> >> a function f(i, j, data) which returns 0 or 1 depending on whether the
> >> observations in rows i and j in your dataset 'data'
> >> are within your cutoff distance (i.e. 50m).
> >>
> >> You can then use Part 2 almost without changes (except for changing
> >> 'myData' to the correct name of your data).
> >>
> >> I hope this helps,
> >> Eric
> >>
> >> library(dplyr)
> >>
> >> ## PART 1: create fake data for minimal example
> >> set.seed(123) ## for reproducibility
> >> N <- 5       ## replace by number of locations (approx 9000 in your case)
> >> MAX_DISTANCE <- 2  ## 50 in your case
> >> myData <- data.frame(x=rnorm(N),y=rnorm(N),Conc=sample(1:N,N))
> >>
> >> ## The function which you must re-define for your actual case.
> >> f <- function(i,j,a) {
> >>   dist <- sqrt(sum((a[i,1:2] - a[j,1:2])^2)) ## Euclidean distance
> >>   as.integer(dist < MAX_DISTANCE)
> >> }
> >>
> >> ## PART 2: You can use this code on the real data with f() defined appropriately
> >> A <- matrix(0,N,N)
> >> ## get the indices (j,k) where j < k (as columns in a data.frame)
> >> idx <- expand.grid(v,v) |> rename(j=Var1,k=Var2) |> filter(j < k)
> >> u <- sapply(1:nrow(idx),\(i){ j <- idx$j[i]; k <- idx$k[i]; A[j,k] <<-
> >> f(j,k,myData) })
> >> B <- A + t(A) + diag(N)
> >> C <- diag(myData$Conc)
> >> D <- B %*% C
> >> D[D==0] <- NA
> >> myData$Conc_min <- apply(D,MAR=1,\(v){min(v,na.rm=TRUE)})
> >> print(head(myData))
> >>
> >>
> >> On Sat, Nov 5, 2022 at 5:14 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
> >>> Probably better posted on R-sig-geo.
> >>>
> >>> -- Bert
> >>>
> >>> On Sat, Nov 5, 2022 at 12:36 AM Duhl, Tiffany R. <Tiffany.Duhl at tufts.edu>
> >>> wrote:
> >>>
> >>>> Hello,
> >>>>
> >>>> I have sets of spatial points with LAT, LON coords (unprojected, WGS84
> >>>> datum) and several value attributes associated with each point, from
> >>>> numerous csv files (with an average of 6,000-9,000 points in each file) as
> >>>> shown in the following example:
> >>>>
> >>>> data<- read.csv("R_find_pts_testdata.csv")
> >>>>
> >>>>> data
> >>>>      ID      Date         Time        LAT            LON           Conc
> >>>> Leg.Speed    CO2  H2O BC61 Hr Min Sec
> >>>> 1   76 4/19/2021 21:25:38 42.40066 -70.98802 99300   0.0 mph 428.39 9.57
> >>>> 578 21  25  38
> >>>> 2   77 4/19/2021 21:25:39 42.40066 -70.98802 96730   0.0 mph 428.04 9.57
> >>>> 617 21  25  39
> >>>> 3   79 4/19/2021 21:25:41 42.40066 -70.98802 98800   0.2 mph 427.10 9.57
> >>>> 1027 21  25  41
> >>>> 4   80 4/19/2021 21:25:42 42.40066 -70.98802 96510     2 mph 427.99 9.58
> >>>> 1381 21  25  42
> >>>> 5   81 4/19/2021 21:25:43 42.40067 -70.98801 95540     3 mph 427.99 9.58
> >>>> 1271 21  25  43
> >>>> 6   82 4/19/2021 21:25:44 42.40068 -70.98799 94720     4 mph 427.20 9.57
> >>>> 910 21  25  44
> >>>> 7   83 4/19/2021 21:25:45 42.40069 -70.98797 94040     5 mph 427.18 9.57
> >>>> 652 21  25  45
> >>>> 8   84 4/19/2021 21:25:46 42.40072 -70.98795 95710     7 mph 427.07 9.57
> >>>> 943 21  25  46
> >>>> 9   85 4/19/2021 21:25:47 42.40074 -70.98792 96200     8 mph 427.44 9.56
> >>>> 650 21  25  47
> >>>> 10  86 4/19/2021 21:25:48 42.40078 -70.98789 93750    10 mph 428.76 9.57
> >>>> 761 21  25  48
> >>>> 11  87 4/19/2021 21:25:49 42.40081 -70.98785 93360    11 mph 429.25 9.56
> >>>> 1158 21  25  49
> >>>> 12  88 4/19/2021 21:25:50 42.40084 -70.98781 94340    12 mph 429.56 9.57
> >>>> 107 21  25  50
> >>>> 13  89 4/19/2021 21:25:51 42.40087 -70.98775 92780    12 mph 428.62 9.56
> >>>> 720 21  25  51
> >>>>
> >>>>
> >>>> What I want to do is, for each point, identify all points within 50m of
> >>>> that point, find the minimum value of the "Conc" attribute of each nearby
> >>>> set of points (including the original point) and then create a new variable
> >>>> ("Conc_min") and assign this minimum value to a new variable added to
> >>>> "data".
> >>>>
> >>>> So far, I have the following code:
> >>>>
> >>>> library(spdep)
> >>>> library(sf)
> >>>>
> >>>> setwd("C:\\mydirectory\\")
> >>>> data<- read.csv("R_find_pts_testdata.csv")
> >>>>
> >>>> #make sure the data is a data frame
> >>>> pts <- data.frame(data)
> >>>>
> >>>> #create spatial data frame and define projection
> >>>> pts_coords <- cbind(pts$LON, pts$LAT)
> >>>> data_pts <- SpatialPointsDataFrame(coords= pts_coords,
> >>>> data=pts, proj4string = CRS("+proj=longlat +datum=WGS84"))
> >>>>
> >>>> #Re-project to WGS 84 / UTM zone 18N, so the analysis is in units of m
> >>>> ptsUTM  <- sf::st_as_sf(data_pts, coords = c("LAT", "LON"), remove = F)%>%
> >>>> st_transform(32618)
> >>>>
> >>>> #create 50 m buffer around each point then intersect with points and
> >>>> finally find neighbors within the buffers
> >>>> pts_buf <- sf::st_buffer(ptsUTM, 50)
> >>>> coords  <- sf::st_coordinates(ptsUTM)
> >>>> int <- sf::st_intersects(pts_buf, ptsUTM)
> >>>> x   <- spdep::dnearneigh(coords, 0, 50)
> >>>>
> >>>> Now at this point, I'm not sure what to either the "int" (a sgbp list) or
> >>>> "x" (nb object) objects (or even if I need them both)
> >>>>
> >>>>> int
> >>>> Sparse geometry binary predicate list of length 974, where the predicate
> >>>> was `intersects'
> >>>> first 10 elements:
> >>>>   1: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> >>>>   2: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> >>>>   3: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> >>>>   4: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> >>>>   5: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> >>>>   6: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> >>>>   7: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> >>>>   8: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> >>>>   9: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
> >>>>
> >>>>> x
> >>>> Neighbour list object:
> >>>> Number of regions: 974
> >>>> Number of nonzero links: 34802
> >>>> Percentage nonzero weights: 3.668481
> >>>> Average number of links: 35.73101
> >>>>
> >>>> One thought is that maybe I don't need the dnearneigh function and can
> >>>> instead convert "int" into a dataframe and somehow merge or associate
> >>>> (perhaps with an inner join) the ID fields of the buffered and intersecting
> >>>> points and then compute the minimum value of "Conc" grouping by ID:
> >>>>
> >>>>> as.data.frame(int)
> >>>>      row.id col.id
> >>>> 1        1      1
> >>>> 2        1      2
> >>>> 3        1      3
> >>>> 4        1      4
> >>>> 5        1      5
> >>>> 6        1      6
> >>>> 7        1      7
> >>>> 8        1      8
> >>>> 9        1      9
> >>>> 10       1     10
> >>>> 11       1     11
> >>>> 12       1     12
> >>>> 13       1     13
> >>>> 14       1     14
> >>>> 15       1     15
> >>>> 16       1     16
> >>>> 17       1     17
> >>>> 18       1     18
> >>>> 19       2      1
> >>>> 20       2      2
> >>>> 21       2      3
> >>>> 22       2      4
> >>>> 23       2      5
> >>>> 24       2      6
> >>>> 25       2      7
> >>>> 26       2      8
> >>>> 27       2      9
> >>>> 28       2     10
> >>>>
> >>>>
> >>>> So in the above example I'd like to take the minimum of "Conc" among the
> >>>> col.id points grouped with row.id 1 (i.e., col.ids 1-18) and assign the
> >>>> minimum value of this group as a new variable in data (Data$Conc_min), and
> >>>> do the same for row.id 2 and all the rest of the rows.
> >>>>
> >>>> I'm just not sure how to do this and I appreciate any help folks might
> >>>> have on this matter!
> >>>>
> >>>> Many thanks,
> >>>> -Tiffany
> >>>>
> >>>>          [[alternative HTML version deleted]]
> >>>>
> >>>> ______________________________________________
> >>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>> PLEASE do read the posting guide
> >>>> http://www.R-project.org/posting-guide.html
> >>>> and provide commented, minimal, self-contained, reproducible code.
> >>>>
> >>>          [[alternative HTML version deleted]]
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> > Caution: This message originated from outside of the Tufts University organization. Please exercise caution when clicking links or opening attachments. When in doubt, email the TTS Service Desk at it at tufts.edu<mailto:it at tufts.edu> or call them directly at 617-627-3376.
> >
> >
> >        [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> --
> Micha Silver
> Ben Gurion Univ.
> Sde Boker, Remote Sensing Lab
> cell: +972-523-665918
>


From T|||@ny@Duh| @end|ng |rom tu|t@@edu  Wed Nov  9 03:38:15 2022
From: T|||@ny@Duh| @end|ng |rom tu|t@@edu (Duhl, Tiffany R.)
Date: Wed, 9 Nov 2022 02:38:15 +0000
Subject: [R] [External] Re: Selecting a minimum value of an attribute
 associated with point values neighboring a given point and assigning it as
 a new attribute
In-Reply-To: <3247be10-6d5c-12d5-1634-2a9e934f431e@gmail.com>
References: <BN6PR05MB35887EFE01222DBF7C359AAB903B9@BN6PR05MB3588.namprd05.prod.outlook.com>
 <CAGxFJbSkg9zAqk0dGcr3qJe2z2C04NEZFdHN8hWQA3oSbfHukQ@mail.gmail.com>
 <CAGgJW767Ein1S+MSywb57B2UtmE0EJodDVokPEx5_-c5BTFR1Q@mail.gmail.com>
 <CAGgJW77yY0_GDQWEAxzSdRh0N3kXgj9zrSEYUzuVsFnHyeE=aA@mail.gmail.com>
 <BN6PR05MB3588015F46997E64D5F8F138903D9@BN6PR05MB3588.namprd05.prod.outlook.com>
 <3247be10-6d5c-12d5-1634-2a9e934f431e@gmail.com>
Message-ID: <BN6PR05MB3588DCB2A66A6048CD9D7645903E9@BN6PR05MB3588.namprd05.prod.outlook.com>

First off, thanks SO much Eric and Micha for your help on this problem!  I think Micha's spatially-oriented solution with Eric's slight modifications will work best for my application but there is one snag (see the commented section near the end of the following code)-- basically I don't know how to apply the lapply operator to a list with a variable length (namely the length of my input csv files) rather than the fixed length that Eric used:

library(sf)
library(spdep)
data<- read.csv("R_find_pts_testdata.csv")

MAX_DIST <- 0.05  #50 m in km, the units of dnearneigh when coords are in degrees
pts <- st_as_sf(data, coords=c('LON', 'LAT'), crs=4326)
dist_matrix <- dnearneigh(pts, 0, MAX_DIST, use_s2=TRUE)

#Micha's function to get the minimum Conc value among all points
#within the buffer distance to a given single point:
# Function to get minimum Conc values for one row of distance matrix

MinConc <- function(x, lst, pts) {
   Concs <- lapply(lst, function(p) {
     pts$Conc[p]
   })
   return(min(Concs[[1]]))
}

# above, x is an index to a single point, lst is a list of point indices
#from distance matrix within the buffer distance

#Next run function on all points to get list of minimum Conc
#values for all points, and merge back to pts.
#...modified by Eric to include original point

return(min(c(Concs[[1]], pts$Conc[x])))

# Now apply this function to all points in pts
###This is where the problem is, I think:
###Eric had used N <- 1000L and later
###Conc_min <- lapply(1:N, function(i) {
### MinConc(i, dist_matrix[i], pts)})
###But I need the length of the list the function is applied to
###to be variable, depending on the length of the input csv file
###unlike the dummy variable dataframe that Eric used with a set length
###So I changed the "x" argument in lapply to "pts$X" but that generates an empty list

Conc_min <- lapply(pts$X, function(i){
   MinConc(i, dist_matrix[i], pts)
#})
Conc_min <- data.frame("Conc_min" = as.integer(Conc_min))

# Add back as new attrib to original points sf object
pts_with_min <- do.call(cbind, c(pts, Conc_min))



Many thanks again for your help on this!
Best regards,
-Tiffany
________________________________
From: Micha Silver <tsvibar at gmail.com>
Sent: Monday, November 7, 2022 8:11 AM
To: Duhl, Tiffany R. <Tiffany.Duhl at tufts.edu>; Eric Berger <ericjberger at gmail.com>
Cc: R-help <R-help at r-project.org>
Subject: Re: [R] [External] Re: Selecting a minimum value of an attribute associated with point values neighboring a given point and assigning it as a new attribute

Eric's solution notwithstanding, here's a more "spatial" approach.


I first create a fictitious set of 1000 points (and save to CSV to
replicate your workflow)

library(sf)
library(spdep)

# Prepare fictitious data
# Create a data.frame with 1000 random points, and save to CSV
LON <- runif(1000, -70.0, -69.0)
LAT <- runif(1000, 42.0, 43.0)
Conc <- runif(1000, 90000, 100000)
df <- data.frame(LON, LAT, Conc)
csv_file = "/tmp/pts_testdata.csv"
write.csv(df, csv_file)


Now read that CSV back in directly as an sf object (No need for the old
SpatialPointsDataFrame). THen create a distance matrix for all points,
which contains indicies to those points within a certain buffer
distance, just as you did in your example.


# Read back in as sf object, including row index
pts <- st_as_sf(read.csv(csv_file), coords=c('LON', 'LAT'), crs=4326)
dist_matrix <- dnearneigh(pts, 0, 100, use_s2=TRUE) # use_s2 since these
are lon/lat

Now I prepare a function to get the minimum Conv value among all points
within the buffer distance to a given single point:
# Function to get minimum Conc values for one row of distance matrix
MinConc <- function(x, lst, pts) {
   # x is an index to a single point,
   # lst is a list of point indices from distance matrix
   # that are within the buffer distance
   Concs <- lapply(lst, function(p) {
     pts$Conc[p]
   })
   return(min(Concs[[1]]))
}

Next run that function on all points to get a list of minimum Conv
values for all points, and merge back to pts.


# Now apply this function to all points in pts
Conc_min <- lapply(pts$X, function(i){
   MinConc(i, dist_matrix[i], pts)
})
Conc_min <- data.frame("Conc_min" = as.integer(Conc_min))

# Add back as new attrib to original points sf object
pts_with_min <- do.call(cbind, c(pts, Conc_min))

HTH,

Micha



On 06/11/2022 18:40, Duhl, Tiffany R. wrote:
> Thanks so much Eric!
>
>   I'm going to play around with your toy code (pun intended) & see if I can make it work for my application.
>
> Cheers,
> -Tiffany
> ________________________________
> From: Eric Berger <ericjberger at gmail.com>
> Sent: Sunday, November 6, 2022 10:27 AM
> To: Bert Gunter <bgunter.4567 at gmail.com>
> Cc: Duhl, Tiffany R. <Tiffany.Duhl at tufts.edu>; R-help <R-help at r-project.org>
> Subject: [External] Re: [R] Selecting a minimum value of an attribute associated with point values neighboring a given point and assigning it as a new attribute
>
> Whoops ... left out a line in Part 2. Resending with the correction
>
> ## PART 2: You can use this code on the real data with f() defined appropriately
> A <- matrix(0,N,N)
> v <- 1:N
> ## get the indices (j,k) where j < k (as columns in a data.frame)
> idx <- expand.grid(v,v) |> rename(j=Var1,k=Var2) |> filter(j < k)
> u <- sapply(1:nrow(idx),
>             \(i){ j <- idx$j[i]; k <- idx$k[i]; A[j,k] <<- f(j,k,myData) })
> B <- A + t(A) + diag(N)
> C <- diag(myData$Conc)
> D <- B %*% C
> D[D==0] <- NA
> myData$Conc_min <- apply(D,MAR=1,\(v){min(v,na.rm=TRUE)})
> print(head(myData))
>
> On Sun, Nov 6, 2022 at 5:19 PM Eric Berger <ericjberger at gmail.com> wrote:
>> Hi Tiffany,
>> Here is some code that might help with your problem. I solve a "toy"
>> problem that is conceptually the same.
>> Part 1 sets up my toy problem. You would have to replace Part 1 with
>> your real case. The main point is to define
>> a function f(i, j, data) which returns 0 or 1 depending on whether the
>> observations in rows i and j in your dataset 'data'
>> are within your cutoff distance (i.e. 50m).
>>
>> You can then use Part 2 almost without changes (except for changing
>> 'myData' to the correct name of your data).
>>
>> I hope this helps,
>> Eric
>>
>> library(dplyr)
>>
>> ## PART 1: create fake data for minimal example
>> set.seed(123) ## for reproducibility
>> N <- 5       ## replace by number of locations (approx 9000 in your case)
>> MAX_DISTANCE <- 2  ## 50 in your case
>> myData <- data.frame(x=rnorm(N),y=rnorm(N),Conc=sample(1:N,N))
>>
>> ## The function which you must re-define for your actual case.
>> f <- function(i,j,a) {
>>   dist <- sqrt(sum((a[i,1:2] - a[j,1:2])^2)) ## Euclidean distance
>>   as.integer(dist < MAX_DISTANCE)
>> }
>>
>> ## PART 2: You can use this code on the real data with f() defined appropriately
>> A <- matrix(0,N,N)
>> ## get the indices (j,k) where j < k (as columns in a data.frame)
>> idx <- expand.grid(v,v) |> rename(j=Var1,k=Var2) |> filter(j < k)
>> u <- sapply(1:nrow(idx),\(i){ j <- idx$j[i]; k <- idx$k[i]; A[j,k] <<-
>> f(j,k,myData) })
>> B <- A + t(A) + diag(N)
>> C <- diag(myData$Conc)
>> D <- B %*% C
>> D[D==0] <- NA
>> myData$Conc_min <- apply(D,MAR=1,\(v){min(v,na.rm=TRUE)})
>> print(head(myData))
>>
>>
>> On Sat, Nov 5, 2022 at 5:14 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>>> Probably better posted on R-sig-geo.
>>>
>>> -- Bert
>>>
>>> On Sat, Nov 5, 2022 at 12:36 AM Duhl, Tiffany R. <Tiffany.Duhl at tufts.edu>
>>> wrote:
>>>
>>>> Hello,
>>>>
>>>> I have sets of spatial points with LAT, LON coords (unprojected, WGS84
>>>> datum) and several value attributes associated with each point, from
>>>> numerous csv files (with an average of 6,000-9,000 points in each file) as
>>>> shown in the following example:
>>>>
>>>> data<- read.csv("R_find_pts_testdata.csv")
>>>>
>>>>> data
>>>>      ID      Date         Time        LAT            LON           Conc
>>>> Leg.Speed    CO2  H2O BC61 Hr Min Sec
>>>> 1   76 4/19/2021 21:25:38 42.40066 -70.98802 99300   0.0 mph 428.39 9.57
>>>> 578 21  25  38
>>>> 2   77 4/19/2021 21:25:39 42.40066 -70.98802 96730   0.0 mph 428.04 9.57
>>>> 617 21  25  39
>>>> 3   79 4/19/2021 21:25:41 42.40066 -70.98802 98800   0.2 mph 427.10 9.57
>>>> 1027 21  25  41
>>>> 4   80 4/19/2021 21:25:42 42.40066 -70.98802 96510     2 mph 427.99 9.58
>>>> 1381 21  25  42
>>>> 5   81 4/19/2021 21:25:43 42.40067 -70.98801 95540     3 mph 427.99 9.58
>>>> 1271 21  25  43
>>>> 6   82 4/19/2021 21:25:44 42.40068 -70.98799 94720     4 mph 427.20 9.57
>>>> 910 21  25  44
>>>> 7   83 4/19/2021 21:25:45 42.40069 -70.98797 94040     5 mph 427.18 9.57
>>>> 652 21  25  45
>>>> 8   84 4/19/2021 21:25:46 42.40072 -70.98795 95710     7 mph 427.07 9.57
>>>> 943 21  25  46
>>>> 9   85 4/19/2021 21:25:47 42.40074 -70.98792 96200     8 mph 427.44 9.56
>>>> 650 21  25  47
>>>> 10  86 4/19/2021 21:25:48 42.40078 -70.98789 93750    10 mph 428.76 9.57
>>>> 761 21  25  48
>>>> 11  87 4/19/2021 21:25:49 42.40081 -70.98785 93360    11 mph 429.25 9.56
>>>> 1158 21  25  49
>>>> 12  88 4/19/2021 21:25:50 42.40084 -70.98781 94340    12 mph 429.56 9.57
>>>> 107 21  25  50
>>>> 13  89 4/19/2021 21:25:51 42.40087 -70.98775 92780    12 mph 428.62 9.56
>>>> 720 21  25  51
>>>>
>>>>
>>>> What I want to do is, for each point, identify all points within 50m of
>>>> that point, find the minimum value of the "Conc" attribute of each nearby
>>>> set of points (including the original point) and then create a new variable
>>>> ("Conc_min") and assign this minimum value to a new variable added to
>>>> "data".
>>>>
>>>> So far, I have the following code:
>>>>
>>>> library(spdep)
>>>> library(sf)
>>>>
>>>> setwd("C:\\mydirectory\\")
>>>> data<- read.csv("R_find_pts_testdata.csv")
>>>>
>>>> #make sure the data is a data frame
>>>> pts <- data.frame(data)
>>>>
>>>> #create spatial data frame and define projection
>>>> pts_coords <- cbind(pts$LON, pts$LAT)
>>>> data_pts <- SpatialPointsDataFrame(coords= pts_coords,
>>>> data=pts, proj4string = CRS("+proj=longlat +datum=WGS84"))
>>>>
>>>> #Re-project to WGS 84 / UTM zone 18N, so the analysis is in units of m
>>>> ptsUTM  <- sf::st_as_sf(data_pts, coords = c("LAT", "LON"), remove = F)%>%
>>>> st_transform(32618)
>>>>
>>>> #create 50 m buffer around each point then intersect with points and
>>>> finally find neighbors within the buffers
>>>> pts_buf <- sf::st_buffer(ptsUTM, 50)
>>>> coords  <- sf::st_coordinates(ptsUTM)
>>>> int <- sf::st_intersects(pts_buf, ptsUTM)
>>>> x   <- spdep::dnearneigh(coords, 0, 50)
>>>>
>>>> Now at this point, I'm not sure what to either the "int" (a sgbp list) or
>>>> "x" (nb object) objects (or even if I need them both)
>>>>
>>>>> int
>>>> Sparse geometry binary predicate list of length 974, where the predicate
>>>> was `intersects'
>>>> first 10 elements:
>>>>   1: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
>>>>   2: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
>>>>   3: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
>>>>   4: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
>>>>   5: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
>>>>   6: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
>>>>   7: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
>>>>   8: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
>>>>   9: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
>>>>
>>>>> x
>>>> Neighbour list object:
>>>> Number of regions: 974
>>>> Number of nonzero links: 34802
>>>> Percentage nonzero weights: 3.668481
>>>> Average number of links: 35.73101
>>>>
>>>> One thought is that maybe I don't need the dnearneigh function and can
>>>> instead convert "int" into a dataframe and somehow merge or associate
>>>> (perhaps with an inner join) the ID fields of the buffered and intersecting
>>>> points and then compute the minimum value of "Conc" grouping by ID:
>>>>
>>>>> as.data.frame(int)
>>>>      row.id col.id
>>>> 1        1      1
>>>> 2        1      2
>>>> 3        1      3
>>>> 4        1      4
>>>> 5        1      5
>>>> 6        1      6
>>>> 7        1      7
>>>> 8        1      8
>>>> 9        1      9
>>>> 10       1     10
>>>> 11       1     11
>>>> 12       1     12
>>>> 13       1     13
>>>> 14       1     14
>>>> 15       1     15
>>>> 16       1     16
>>>> 17       1     17
>>>> 18       1     18
>>>> 19       2      1
>>>> 20       2      2
>>>> 21       2      3
>>>> 22       2      4
>>>> 23       2      5
>>>> 24       2      6
>>>> 25       2      7
>>>> 26       2      8
>>>> 27       2      9
>>>> 28       2     10
>>>>
>>>>
>>>> So in the above example I'd like to take the minimum of "Conc" among the
>>>> col.id points grouped with row.id 1 (i.e., col.ids 1-18) and assign the
>>>> minimum value of this group as a new variable in data (Data$Conc_min), and
>>>> do the same for row.id 2 and all the rest of the rows.
>>>>
>>>> I'm just not sure how to do this and I appreciate any help folks might
>>>> have on this matter!
>>>>
>>>> Many thanks,
>>>> -Tiffany
>>>>
>>>>          [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
> Caution: This message originated from outside of the Tufts University organization. Please exercise caution when clicking links or opening attachments. When in doubt, email the TTS Service Desk at it at tufts.edu<mailto:it at tufts.edu> or call them directly at 617-627-3376.
>
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

--
Micha Silver
Ben Gurion Univ.
Sde Boker, Remote Sensing Lab
cell: +972-523-665918


	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Nov  9 09:27:30 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 9 Nov 2022 11:27:30 +0300
Subject: [R] [External] Re: Selecting a minimum value of an attribute
 associated with point values neighboring a given point and assigning it as
 a new attribute
In-Reply-To: <BN6PR05MB3588DCB2A66A6048CD9D7645903E9@BN6PR05MB3588.namprd05.prod.outlook.com>
References: <BN6PR05MB35887EFE01222DBF7C359AAB903B9@BN6PR05MB3588.namprd05.prod.outlook.com>
 <CAGxFJbSkg9zAqk0dGcr3qJe2z2C04NEZFdHN8hWQA3oSbfHukQ@mail.gmail.com>
 <CAGgJW767Ein1S+MSywb57B2UtmE0EJodDVokPEx5_-c5BTFR1Q@mail.gmail.com>
 <CAGgJW77yY0_GDQWEAxzSdRh0N3kXgj9zrSEYUzuVsFnHyeE=aA@mail.gmail.com>
 <BN6PR05MB3588015F46997E64D5F8F138903D9@BN6PR05MB3588.namprd05.prod.outlook.com>
 <3247be10-6d5c-12d5-1634-2a9e934f431e@gmail.com>
 <BN6PR05MB3588DCB2A66A6048CD9D7645903E9@BN6PR05MB3588.namprd05.prod.outlook.com>
Message-ID: <20221109112730.58e405fa@Tarkus>

? Wed, 9 Nov 2022 02:38:15 +0000
"Duhl, Tiffany R." <Tiffany.Duhl at tufts.edu> ?????:

> MinConc <- function(x, lst, pts) {
>    Concs <- lapply(lst, function(p) {
>      pts$Conc[p]
>    })
>    return(min(Concs[[1]]))
> }

This function doesn't seem to use its first argument, x. Moreover,
its return value seems to only depend on the first element of its
second argument, lst.

> ###But I need the length of the list the function is applied to
> ###to be variable, depending on the length of the input csv file
> ###unlike the dummy variable dataframe that Eric used with a set
> ###length
> ###So I changed the "x" argument in lapply to "pts$X" but
> ###that generates an empty list
> 
> Conc_min <- lapply(pts$X, function(i){
>    MinConc(i, dist_matrix[i], pts)
> })

So instead of doing extra work to obtain the list indices (use
seq_along if you do need them) and to subset the one-element lists
returned by dist_matrix[i] (use dist_matrix[[i]] to get the value
instead of one-element list containing the value), it should be
possible to perform

Conc_min <- sapply(
 dist_matrix,
 function(neighbours) min(pts$Conc[neighbours])
)

This assumes that dist_matrix is of the same length as pts$X.

Admittedly, the example above can't consider each point by itself,
which isn't mentioned in dist_matrix (as far as I'm aware), so to
include the original point, we can run

mapply(
 function(point, neighbours) min(pts$Conc[point], pts$Conc[neighbours]),
 seq_along(pts$X), dist_matrix
)

-- 
Best regards,
Ivan


From @h@e|ebrown @end|ng |rom gm@||@com  Wed Nov  9 14:17:06 2022
From: @h@e|ebrown @end|ng |rom gm@||@com (Shael Brown)
Date: Wed, 9 Nov 2022 09:17:06 -0400
Subject: [R] [R-pkgs] TDApplied version 2.0.0
Message-ID: <CAESJsLuT6TdnaUATFV6pddbzxSLBqbQgGLGdmynwQoK9dZ_JRA@mail.gmail.com>

Dear R users,

I am very excited to announce TDApplied version 2.0.0 is now available on
CRAN, with some significant improvements to the previous version.

Topological data analysis is a powerful tool for finding non-linear global
structure in whole datasets. 'TDApplied' aims to bridge topological data
analysis with data, statistical and machine learning practitioners so that
more analyses may benefit from the power of topological data analysis. The
main tool of topological data analysis is persistent homology, which
computes a shape descriptor of a dataset, called a persistence diagram.

There are five goals of this package:

(1) convert persistence diagrams computed using the two main R packages for
topological data analysis into a data frame,
(2) implement fast versions of both distance and kernel calculations
    for pairs of persistence diagrams,
(3) provide methods for machine learning and inference for persistence
diagrams which scale well,
(4) deliver a fast implementation of persistent homology via a python
interface, and
(5) contribute tools for the interpretation of persistence diagrams.

For details and examples please check out the github page
https://github.com/shaelebrown/TDApplied or the README file on CRAN
https://cran.r-project.org/web/packages/TDApplied/readme/README.html

I sincerely hope that you will enjoy using this updated version and that it
helps the field of topological data analysis progress in both academia and
industry.

Best regards,
Shael

	[[alternative HTML version deleted]]

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From er|nm@hodge@@ @end|ng |rom gm@||@com  Fri Nov 11 02:45:50 2022
From: er|nm@hodge@@ @end|ng |rom gm@||@com (Erin Hodgess)
Date: Thu, 10 Nov 2022 18:45:50 -0700
Subject: [R] Plotting a triangular prism
Message-ID: <CACxE24kOTD4W_5D1Q4z-6T=TVPc4fJtshnpo+JXygArA72v6=w@mail.gmail.com>

Hello!

I?m trying to draw a triangular prism.  I have used rgl, plot3d, and it?s
still not working as I would like.

Has anyone done this, please?

Thanks for any help.

Sincerely,
Erin
-- 
Erin Hodgess, PhD
mailto: erinm.hodgess at gmail.com

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Fri Nov 11 06:32:09 2022
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Thu, 10 Nov 2022 21:32:09 -0800
Subject: [R] Plotting a triangular prism
In-Reply-To: <CACxE24kOTD4W_5D1Q4z-6T=TVPc4fJtshnpo+JXygArA72v6=w@mail.gmail.com>
References: <CACxE24kOTD4W_5D1Q4z-6T=TVPc4fJtshnpo+JXygArA72v6=w@mail.gmail.com>
Message-ID: <A0472FAD-E586-4982-B9F5-1D1EAEFF6E59@comcast.net>

One might think that after all these years you would have understood that ?it?s not working? is an excessively imprecise description of, well, anything. 

Also html is deprecated severely on Rhelp. 

? 
David. 

Sent from my iPhone

> On Nov 10, 2022, at 5:46 PM, Erin Hodgess <erinm.hodgess at gmail.com> wrote:
> 
> ?Hello!
> 
> I?m trying to draw a triangular prism.  I have used rgl, plot3d, and it?s
> still not working as I would like.
> 
> Has anyone done this, please?
> 
> Thanks for any help.
> 
> Sincerely,
> Erin
> -- 
> Erin Hodgess, PhD
> mailto: erinm.hodgess at gmail.com
> 
>    [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From drj|m|emon @end|ng |rom gm@||@com  Fri Nov 11 07:56:20 2022
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Fri, 11 Nov 2022 17:56:20 +1100
Subject: [R] Plotting a triangular prism
In-Reply-To: <A0472FAD-E586-4982-B9F5-1D1EAEFF6E59@comcast.net>
References: <CACxE24kOTD4W_5D1Q4z-6T=TVPc4fJtshnpo+JXygArA72v6=w@mail.gmail.com>
 <A0472FAD-E586-4982-B9F5-1D1EAEFF6E59@comcast.net>
Message-ID: <CA+8X3fU09PSn+FbMXJuaU2WEqoyD8oNYe+3aS=05J-USizFghg@mail.gmail.com>

Hi Erin,
If you want a realistic 3D prism, I would use something like POVRay or
other rendering software. You have to know your geometry, but you can
get a very realistic image. I suspect that you want more than just a
picture of a prism, so you can then generate a PNG image and use it as
a layer in a composite image in something like the GIMP.

Jim

> > On Nov 10, 2022, at 5:46 PM, Erin Hodgess <erinm.hodgess at gmail.com> wrote:
> >
> > ?Hello!
> >
> > I?m trying to draw a triangular prism.  I have used rgl, plot3d, and it?s
> > still not working as I would like.
> >
> > Has anyone done this, please?
> >
> > Thanks for any help.
> >
> > Sincerely,
> > Erin


From er|nm@hodge@@ @end|ng |rom gm@||@com  Fri Nov 11 14:57:24 2022
From: er|nm@hodge@@ @end|ng |rom gm@||@com (Erin Hodgess)
Date: Fri, 11 Nov 2022 06:57:24 -0700
Subject: [R] Plotting a triangular prism
In-Reply-To: <CA+8X3fU09PSn+FbMXJuaU2WEqoyD8oNYe+3aS=05J-USizFghg@mail.gmail.com>
References: <CACxE24kOTD4W_5D1Q4z-6T=TVPc4fJtshnpo+JXygArA72v6=w@mail.gmail.com>
 <A0472FAD-E586-4982-B9F5-1D1EAEFF6E59@comcast.net>
 <CA+8X3fU09PSn+FbMXJuaU2WEqoyD8oNYe+3aS=05J-USizFghg@mail.gmail.com>
Message-ID: <CACxE24mLPku2gUEZd8oxoYFPr-GM_pgaFpcz2JcPutPva1YdYA@mail.gmail.com>

Great, thank you!

Sincerely,
Erin

On Thu, Nov 10, 2022 at 11:56 PM Jim Lemon <drjimlemon at gmail.com> wrote:

> Hi Erin,
> If you want a realistic 3D prism, I would use something like POVRay or
> other rendering software. You have to know your geometry, but you can
> get a very realistic image. I suspect that you want more than just a
> picture of a prism, so you can then generate a PNG image and use it as
> a layer in a composite image in something like the GIMP.
>
> Jim
>
> > > On Nov 10, 2022, at 5:46 PM, Erin Hodgess <erinm.hodgess at gmail.com>
> wrote:
> > >
> > > ?Hello!
> > >
> > > I?m trying to draw a triangular prism.  I have used rgl, plot3d, and
> it?s
> > > still not working as I would like.
> > >
> > > Has anyone done this, please?
> > >
> > > Thanks for any help.
> > >
> > > Sincerely,
> > > Erin
>
-- 
Erin Hodgess, PhD
mailto: erinm.hodgess at gmail.com

	[[alternative HTML version deleted]]


From tebert @end|ng |rom u||@edu  Fri Nov 11 15:39:54 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Fri, 11 Nov 2022 14:39:54 +0000
Subject: [R] Plotting a triangular prism
In-Reply-To: <CACxE24kOTD4W_5D1Q4z-6T=TVPc4fJtshnpo+JXygArA72v6=w@mail.gmail.com>
References: <CACxE24kOTD4W_5D1Q4z-6T=TVPc4fJtshnpo+JXygArA72v6=w@mail.gmail.com>
Message-ID: <BN6PR2201MB1553449E9551D3DC5B5A6704CF009@BN6PR2201MB1553.namprd22.prod.outlook.com>

Hi Erin,
   Note that the HTML version was deleted in RHelp. Whatever was there was not seen by anyone else.
   Not sure this is what you want, but try "mixture designs in R" as a google search. There are a number of options therein. 

Regards,
Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Erin Hodgess
Sent: Thursday, November 10, 2022 8:46 PM
To: r-help at r-project.org
Subject: [R] Plotting a triangular prism

[External Email]

Hello!

I'm trying to draw a triangular prism.  I have used rgl, plot3d, and it's still not working as I would like.

Has anyone done this, please?

Thanks for any help.

Sincerely,
Erin
--
Erin Hodgess, PhD
mailto: erinm.hodgess at gmail.com

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7Ccfbe4571548b4011129008dac38689c2%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638037279861726183%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=dQLlGf5Uf236fx75pj1PyyxV%2Fth6PWIoDxMQqfjzhYk%3D&amp;reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7Ccfbe4571548b4011129008dac38689c2%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638037279861726183%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=cvvGeOQDrPdZ7iRm8lPRKRiS4PF2q%2F4hdJYnUw34hQs%3D&amp;reserved=0
and provide commented, minimal, self-contained, reproducible code.


From georgebr|d@94 @end|ng |rom gm@||@com  Fri Nov 11 22:17:14 2022
From: georgebr|d@94 @end|ng |rom gm@||@com (George Brida)
Date: Fri, 11 Nov 2022 22:17:14 +0100
Subject: [R] Logistic regression for large data
Message-ID: <CAA6O3ziAbEHc3-zAu6Rw7UzuxeJNqroSbe04O_r--wrTj=yvZQ@mail.gmail.com>

Dear R users,

I have a database  called Base.csv   (attached to this email) which
contains 13 columns and 8257 rows and whose the first 8 columns are dummy
variables which take 1 or 0. The problem is when I wrote the following
instructions to do a logistic regression , R runs for hours and hours
without giving an output:

Base=read.csv("C:\\Users\\HP\\Desktop\\New\\Base.csv",header=FALSE,sep=";")
fit_1=glm(Base[,2]~Base[,1]+Base[,10]+Base[,11]+Base[,12]+Base[,13],family=binomial(link="logit"))

Apparently, there is not enough memory to have the requested output. Is
there any other function for logistic regression that handle large data and
return output in reasonable time.

Many thanks

Kind regards

George

From dw|n@em|u@ @end|ng |rom comc@@t@net  Sat Nov 12 08:36:01 2022
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Fri, 11 Nov 2022 23:36:01 -0800
Subject: [R] Logistic regression for large data
In-Reply-To: <CAA6O3ziAbEHc3-zAu6Rw7UzuxeJNqroSbe04O_r--wrTj=yvZQ@mail.gmail.com>
References: <CAA6O3ziAbEHc3-zAu6Rw7UzuxeJNqroSbe04O_r--wrTj=yvZQ@mail.gmail.com>
Message-ID: <3D3BBAC8-7D6F-4AB9-B7D6-6A754E21BFBE@comcast.net>

That?s not a large data set. Something else besides memory limits is going on. You should post output of summary(Base). 

? 
David
Sent from my iPhone

> On Nov 11, 2022, at 11:29 PM, George Brida <georgebrida94 at gmail.com> wrote:
> 
> ?Dear R users,
> 
> I have a database  called Base.csv   (attached to this email) which
> contains 13 columns and 8257 rows and whose the first 8 columns are dummy
> variables which take 1 or 0. The problem is when I wrote the following
> instructions to do a logistic regression , R runs for hours and hours
> without giving an output:
> 
> Base=read.csv("C:\\Users\\HP\\Desktop\\New\\Base.csv",header=FALSE,sep=";")
> fit_1=glm(Base[,2]~Base[,1]+Base[,10]+Base[,11]+Base[,12]+Base[,13],family=binomial(link="logit"))
> 
> Apparently, there is not enough memory to have the requested output. Is
> there any other function for logistic regression that handle large data and
> return output in reasonable time.
> 
> Many thanks
> 
> Kind regards
> 
> George
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From tebert @end|ng |rom u||@edu  Sat Nov 12 14:37:03 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Sat, 12 Nov 2022 13:37:03 +0000
Subject: [R] Logistic regression for large data
In-Reply-To: <CAA6O3ziAbEHc3-zAu6Rw7UzuxeJNqroSbe04O_r--wrTj=yvZQ@mail.gmail.com>
References: <CAA6O3ziAbEHc3-zAu6Rw7UzuxeJNqroSbe04O_r--wrTj=yvZQ@mail.gmail.com>
Message-ID: <BN6PR2201MB15538F30F924C2F830756F4ECF039@BN6PR2201MB1553.namprd22.prod.outlook.com>

Hi George,
   I did not get an attachment.
   My first step would be to try simplifying things. Do all of these work?

fit_1=glm(Base[,2]~Base[,1],family=binomial(link="logit"))
fit_1=glm(Base[,2]~Base[,10],family=binomial(link="logit"))
fit_1=glm(Base[,2]~Base[,11],family=binomial(link="logit"))
fit_1=glm(Base[,2]~Base[,12],family=binomial(link="logit"))
fit_1=glm(Base[,2]~Base[,13],family=binomial(link="logit"))

This is not a large dataset. That said, if your computer is nearly out of memory, even a small dataset might be too much. It might have plenty of physical memory, but also lots of (open files, cookies, applications, other stuff) that eat memory.

Regards,
Tim



-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of George Brida
Sent: Friday, November 11, 2022 4:17 PM
To: r-help at r-project.org
Subject: [R] Logistic regression for large data

[External Email]

Dear R users,

I have a database  called Base.csv   (attached to this email) which
contains 13 columns and 8257 rows and whose the first 8 columns are dummy variables which take 1 or 0. The problem is when I wrote the following instructions to do a logistic regression , R runs for hours and hours without giving an output:

Base=read.csv("C:\\Users\\HP\\Desktop\\New\\Base.csv",header=FALSE,sep=";")
fit_1=glm(Base[,2]~Base[,1]+Base[,10]+Base[,11]+Base[,12]+Base[,13],family=binomial(link="logit"))

Apparently, there is not enough memory to have the requested output. Is there any other function for logistic regression that handle large data and return output in reasonable time.

Many thanks

Kind regards

George
______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7Cb0af80b8620648fcc1ab08dac47fb19e%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638038350110240752%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C2000%7C%7C%7C&amp;sdata=oxeFwGCpH%2B9Ha%2BDFaWRygEcvOJ2O6AngSKNhMwE%2FczI%3D&amp;reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7Cb0af80b8620648fcc1ab08dac47fb19e%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638038350110240752%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C2000%7C%7C%7C&amp;sdata=FtLW709kbnkMLzylkRRtR1Y%2Fw5oehodb0dmS8DqwGig%3D&amp;reserved=0
and provide commented, minimal, self-contained, reproducible code.


From gpetr|@ @end|ng |rom u@rk@edu  Sat Nov 12 21:04:57 2022
From: gpetr|@ @end|ng |rom u@rk@edu (Giovanni Petris)
Date: Sat, 12 Nov 2022 20:04:57 +0000
Subject: [R] How to make a deep copy of a list?
Message-ID: <SN4PR0401MB3549D2490609EBE15BDDD7FDC3039@SN4PR0401MB3549.namprd04.prod.outlook.com>

Hello everybody,

Does anybody know how to obtain a deep copy of a list?

The context is the following. I am passing a list to a function which, in turn, passes it to compiled C code via .Call. The problem is that the C code modifies elements of the list so that, after the R function returns, I end up with a modified version of the list argument. I believe passing to the function a deep copy of the list argument would solve my problem.

Thank you in advance for the help!

Giovanni

--
Giovanni Petris
Professor and Director of Statistics
Department of Mathematical Sciences
University of Arkansas
Fayetteville, AR 72701
USA



	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Nov 12 21:19:36 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 12 Nov 2022 12:19:36 -0800
Subject: [R] How to make a deep copy of a list?
In-Reply-To: <SN4PR0401MB3549D2490609EBE15BDDD7FDC3039@SN4PR0401MB3549.namprd04.prod.outlook.com>
References: <SN4PR0401MB3549D2490609EBE15BDDD7FDC3039@SN4PR0401MB3549.namprd04.prod.outlook.com>
Message-ID: <6211589B-7312-4B33-956C-9BDA89E9F033@dcn.davis.ca.us>

Or modifying the C code to conform with the usual functional copy-on-write paradigm used throughout most of R.

On November 12, 2022 12:04:57 PM PST, Giovanni Petris <gpetris at uark.edu> wrote:
>Hello everybody,
>
>Does anybody know how to obtain a deep copy of a list?
>
>The context is the following. I am passing a list to a function which, in turn, passes it to compiled C code via .Call. The problem is that the C code modifies elements of the list so that, after the R function returns, I end up with a modified version of the list argument. I believe passing to the function a deep copy of the list argument would solve my problem.
>
>Thank you in advance for the help!
>
>Giovanni
>
>--
>Giovanni Petris
>Professor and Director of Statistics
>Department of Mathematical Sciences
>University of Arkansas
>Fayetteville, AR 72701
>USA
>
>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From kry|ov@r00t @end|ng |rom gm@||@com  Sat Nov 12 21:20:03 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Sat, 12 Nov 2022 23:20:03 +0300
Subject: [R] How to make a deep copy of a list?
In-Reply-To: <SN4PR0401MB3549D2490609EBE15BDDD7FDC3039@SN4PR0401MB3549.namprd04.prod.outlook.com>
References: <SN4PR0401MB3549D2490609EBE15BDDD7FDC3039@SN4PR0401MB3549.namprd04.prod.outlook.com>
Message-ID: <20221112232003.31242f93@Tarkus>

? Sat, 12 Nov 2022 20:04:57 +0000
Giovanni Petris <gpetris at uark.edu> ?????:

> The problem is that the C code modifies elements of the list so that,
> after the R function returns, I end up with a modified version of the
> list argument. I believe passing to the function a deep copy of the
> list argument would solve my problem.

Is it an option to change the C code? I think that the fault lies with
it, not with its caller. Except when using reference types, it should
be safe to make the assumption that variables in R are passed as if by
copy.

In the interest of getting a quick workaround, does
unserialize(serialize(L, NULL)) help? I would expect that to work unless
your list contains something like environments.

-- 
Best regards,
Ivan


From d@t@|owe @end|ng |rom po@teo@de  Fri Nov 11 18:27:55 2022
From: d@t@|owe @end|ng |rom po@teo@de (Lowe Wilsson)
Date: Fri, 11 Nov 2022 17:27:55 +0000
Subject: [R] [R-pkgs] synr: Analyze stimulus-color consistency test data
Message-ID: <eecad148a1987e4f8b053b564c614158@posteo.de>

 Dear fellow useRs,

synr is an R package for working with data resulting from so-called
consistency tests, aimed at studying associations between stimuli and
colors. A simple example of such an association is if someone
experiences the color blue when hearing a particular word, or seeing the
letter 7 as red even if it is printed in black. The package, like
consistency tests, is especially relevant for synesthesia research but
may be of use to others researching color experiences. Yet others might
be interested in how the package utilizes the DBSCAN clustering
algorithm to evaluate variation in 3D space point coordinates.

You can learn more in an article just published in Behavior Research
Methods, "synr: An R package for handling synesthesia consistency test
data": https://rdcu.be/cZrrh [1]

The package itself also includes comprehensive vignettes explaining its
use. CRAN link: https://cran.r-project.org/web/packages/synr/index.html
[2]

Issue reports and contributions are very welcome on GitHub:
https://github.com/datalowe/synr [3] I've also created a GitHub page
with Packrat which includes nicely-formatted versions of the vignettes:
https://datalowe.github.io/synr [4]

I hope you'll find the package useful!

Sincerely,
Lowe Wilsson 

Links:
------
[1] https://rdcu.be/cZrrh
[2] https://cran.r-project.org/web/packages/synr/index.html
[3] https://github.com/datalowe/synr
[4] https://datalowe.github.io/synr

	[[alternative HTML version deleted]]

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From n|ckmwr@y @end|ng |rom gm@||@com  Mon Nov 14 14:04:31 2022
From: n|ckmwr@y @end|ng |rom gm@||@com (Nick Wray)
Date: Mon, 14 Nov 2022 13:04:31 +0000
Subject: [R] Rate of Reading into R from net
Message-ID: <CABxY9BPdUBp_jxQHi9+u4h_1fMgLd862SkoQQff7jw6jHKOqYA@mail.gmail.com>

Hello I am trying read  nc rainfall  files directly from the UK centre for
hydrology and ecology website -
hourly:about 300Mb
https://catalogue.ceh.ac.uk/datastore/eidchub/fc9423d6-3d54-467f-bb2b-fc7357a3941f/
and daily about 90Mb
https://catalogue.ceh.ac.uk/datastore/eidchub/2ab15bf0-ad08-415c-ba64-831168be7293/precip/

I can download them "by hand" no problem using the ncdf4 package but
there's lots and I wanted to streamline the process

code I've used (which works for "by hand" downloading) is (for example)

nc_data<-nc_open("
https://catalogue.ceh.ac.uk/datastore/eidchub/2ab15bf0-ad08-415c-ba64-831168be7293/precip/chess-met_precip_gb_1km_daily_19610301-19610331.nc
")

However, when I run this I don't get an error message but R just sits there
with the little red circle (at least 30 minutes for the 90Mb files)

What I'm wondering is two things - a)is the data in fact downloading but
it's just taking ages and I need to let it run and go and have a coffee
                                                   b)is there (I can't find
anything) within R which allows me to monitor the progress of the download,
if in fact it is taking place?
Thanks Nick Wray

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Mon Nov 14 14:25:31 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Mon, 14 Nov 2022 16:25:31 +0300
Subject: [R] Rate of Reading into R from net
In-Reply-To: <CABxY9BPdUBp_jxQHi9+u4h_1fMgLd862SkoQQff7jw6jHKOqYA@mail.gmail.com>
References: <CABxY9BPdUBp_jxQHi9+u4h_1fMgLd862SkoQQff7jw6jHKOqYA@mail.gmail.com>
Message-ID: <20221114162531.7df503b8@arachnoid>

? Mon, 14 Nov 2022 13:04:31 +0000
Nick Wray <nickmwray at gmail.com> ?????:

> nc_data<-nc_open("
> https://catalogue.ceh.ac.uk/datastore/eidchub/2ab15bf0-ad08-415c-ba64-831168be7293/precip/chess-met_precip_gb_1km_daily_19610301-19610331.nc
> ")
> 
> However, when I run this I don't get an error message but R just sits
> there with the little red circle (at least 30 minutes for the 90Mb
> files)

Not sure why it just sits there, but looking at the package source
code, I can see that ncdf4::nc_open eventually forwards its arguments
to the nc_open function from the netcdf library:

https://github.com/cran/ncdf4/blob/1.19/R/ncdf4.R#L568
https://github.com/cran/ncdf4/blob/1.19/src/ncdf.c#L862
https://docs.unidata.ucar.edu/netcdf-c/current/group__datasets.html#gaccbdb128a1640e204831256dbbc24d3e

netcdf does support some form of remote file access, but only
OPeNDAP-compatible URLs are supposed to work. Your links ask me to log
in, which may mean that they won't work with netcdf. It might be easier
to use one of the R packages that let you work with libcurl and give
them the cookies from your browser in order to download the files
first, then access them.

See also: https://stackoverflow.com/a/70368135

What does ncdump say about these URLs?

-- 
Best regards,
Ivan

[1] 


From e@ @end|ng |rom enr|co@chum@nn@net  Mon Nov 14 14:37:58 2022
From: e@ @end|ng |rom enr|co@chum@nn@net (Enrico Schumann)
Date: Mon, 14 Nov 2022 14:37:58 +0100
Subject: [R] Rate of Reading into R from net
In-Reply-To: <CABxY9BPdUBp_jxQHi9+u4h_1fMgLd862SkoQQff7jw6jHKOqYA@mail.gmail.com>
 (Nick Wray's message of "Mon, 14 Nov 2022 13:04:31 +0000")
References: <CABxY9BPdUBp_jxQHi9+u4h_1fMgLd862SkoQQff7jw6jHKOqYA@mail.gmail.com>
Message-ID: <877czxbqrt.fsf@enricoschumann.net>

On Mon, 14 Nov 2022, Nick Wray writes:

> Hello I am trying read  nc rainfall  files directly from the UK centre for
> hydrology and ecology website -
> hourly:about 300Mb
> https://catalogue.ceh.ac.uk/datastore/eidchub/fc9423d6-3d54-467f-bb2b-fc7357a3941f/
> and daily about 90Mb
> https://catalogue.ceh.ac.uk/datastore/eidchub/2ab15bf0-ad08-415c-ba64-831168be7293/precip/
>
> I can download them "by hand" no problem using the ncdf4 package but
> there's lots and I wanted to streamline the process
>
> code I've used (which works for "by hand" downloading) is (for example)
>
> nc_data<-nc_open("
> https://catalogue.ceh.ac.uk/datastore/eidchub/2ab15bf0-ad08-415c-ba64-831168be7293/precip/chess-met_precip_gb_1km_daily_19610301-19610331.nc
> ")
>
> However, when I run this I don't get an error message but R just sits there
> with the little red circle (at least 30 minutes for the 90Mb files)
>
> What I'm wondering is two things - a)is the data in fact downloading but
> it's just taking ages and I need to let it run and go and have a coffee
>                                                    b)is there (I can't find
> anything) within R which allows me to monitor the progress of the download,
> if in fact it is taking place?
> Thanks Nick Wray
>

Have you tried 'download.file'?  It should provide a
progress bar if the file size is known.  I'd first
download the file, and then read it.


-- 
Enrico Schumann
Lucerne, Switzerland
http://enricoschumann.net


From w||||@mwdun|@p @end|ng |rom gm@||@com  Mon Nov 14 16:44:45 2022
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Mon, 14 Nov 2022 07:44:45 -0800
Subject: [R] Logistic regression for large data
In-Reply-To: <CAA6O3ziAbEHc3-zAu6Rw7UzuxeJNqroSbe04O_r--wrTj=yvZQ@mail.gmail.com>
References: <CAA6O3ziAbEHc3-zAu6Rw7UzuxeJNqroSbe04O_r--wrTj=yvZQ@mail.gmail.com>
Message-ID: <CAHqSRuQRDMPNbHk0C_iTCUb5mJhNh9tVg0jd-czJB+paOLjp3Q@mail.gmail.com>

summary(Base)

would show if one of columns of Base was read as character data instead of
the expected numeric.  That could cause an explosion in the number of dummy
variables, hence a huge design matrix.

-Bill


On Fri, Nov 11, 2022 at 11:30 PM George Brida <georgebrida94 at gmail.com>
wrote:

> Dear R users,
>
> I have a database  called Base.csv   (attached to this email) which
> contains 13 columns and 8257 rows and whose the first 8 columns are dummy
> variables which take 1 or 0. The problem is when I wrote the following
> instructions to do a logistic regression , R runs for hours and hours
> without giving an output:
>
> Base=read.csv("C:\\Users\\HP\\Desktop\\New\\Base.csv",header=FALSE,sep=";")
>
> fit_1=glm(Base[,2]~Base[,1]+Base[,10]+Base[,11]+Base[,12]+Base[,13],family=binomial(link="logit"))
>
> Apparently, there is not enough memory to have the requested output. Is
> there any other function for logistic regression that handle large data and
> return output in reasonable time.
>
> Many thanks
>
> Kind regards
>
> George
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From r@g|@11 @end|ng |rom hotm@||@com  Tue Nov 15 00:22:51 2022
From: r@g|@11 @end|ng |rom hotm@||@com (Ragia .)
Date: Mon, 14 Nov 2022 23:22:51 +0000
Subject: [R] ubuntu 22
Message-ID: <PAXP194MB1502217BBC0B17AC3EDF9297B3059@PAXP194MB1502.EURP194.PROD.OUTLOOK.COM>


  dear group ,
cant install r base into ubuntu 22.
the msg is
The following packages have unmet dependencies:
 r-base-core : Depends: libicu70 (>= 70.1-1~) but it is not installable
               Recommends: r-recommended but it is not going to be installed
               Recommends: r-doc-html but it is not going to be installed
E: Unable to correct problems, you have held broken packages.
thanks in advance

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Tue Nov 15 00:53:58 2022
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Mon, 14 Nov 2022 15:53:58 -0800
Subject: [R] unmet dependency for r-base-core ... was Re:  ubuntu 22
In-Reply-To: <PAXP194MB1502217BBC0B17AC3EDF9297B3059@PAXP194MB1502.EURP194.PROD.OUTLOOK.COM>
References: <PAXP194MB1502217BBC0B17AC3EDF9297B3059@PAXP194MB1502.EURP194.PROD.OUTLOOK.COM>
Message-ID: <95531558-04de-2279-a465-e74cfa5e3e76@comcast.net>


On 11/14/22 15:22, Ragia . wrote:
>    dear group ,
> cant install r base into ubuntu 22.
> the msg is
> The following packages have unmet dependencies:
>   r-base-core : Depends: libicu70 (>= 70.1-1~) but it is not installable


Have you tried looking up the package that would contain libicu70?? I 
had no problem locating a copy of libicu70_70.1-2_amd64.deb 
<https://ubuntu.pkgs.org/22.04/ubuntu-main-amd64/libicu70_70.1-2_amd64.deb.html> 
with search terms: "libicu70 ubuntu 22".


>                 Recommends: r-recommended but it is not going to be installed
>                 Recommends: r-doc-html but it is not going to be installed
> E: Unable to correct problems, you have held broken packages.
> thanks in advance
>
> 	[[alternative HTML version deleted]]


Do note that Rhelp is a plain text mailing list. And further note that 
the proper mailing list (also plain text) would have been R-SIG-debian.


-- 

David.

>
> ______________________________________________
> R-help at r-project.org  mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guidehttp://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Nov 15 00:58:22 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 14 Nov 2022 15:58:22 -0800
Subject: [R] ubuntu 22
In-Reply-To: <PAXP194MB1502217BBC0B17AC3EDF9297B3059@PAXP194MB1502.EURP194.PROD.OUTLOOK.COM>
References: <PAXP194MB1502217BBC0B17AC3EDF9297B3059@PAXP194MB1502.EURP194.PROD.OUTLOOK.COM>
Message-ID: <930ECF3E-940B-4A9B-B4BB-147E2DFDB63E@dcn.davis.ca.us>

Seems like a problem with your system package manager repository configuration. Maybe better pursued on the R-sig-debian mailing list (Ubuntu is derived from Debian). Be sure to describe exactly what you did (e.g. which web page instructions did you follow).

On November 14, 2022 3:22:51 PM PST, "Ragia ." <ragia11 at hotmail.com> wrote:
>
>  dear group ,
>cant install r base into ubuntu 22.
>the msg is
>The following packages have unmet dependencies:
> r-base-core : Depends: libicu70 (>= 70.1-1~) but it is not installable
>               Recommends: r-recommended but it is not going to be installed
>               Recommends: r-doc-html but it is not going to be installed
>E: Unable to correct problems, you have held broken packages.
>thanks in advance
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From m|r@n|p@r@@t @end|ng |rom uw@ter|oo@c@  Mon Nov 14 19:07:29 2022
From: m|r@n|p@r@@t @end|ng |rom uw@ter|oo@c@ (Maryam Iraniparast)
Date: Mon, 14 Nov 2022 18:07:29 +0000
Subject: [R] Importing data with value labels into R
Message-ID: <YTBPR01MB3760167BC87023F4FAE89583AF059@YTBPR01MB3760.CANPRD01.PROD.OUTLOOK.COM>

Hello!

I want to read SPSS data into R and I want to carry the value labels with my dataset.
Based on my research, only Stata file can transfer the value labels to R (It is easy to save SPSS data with Stata format).
The last time I did that successfully, I was using R4.2.1 and the following code. But it does not work anymore.


install.packages("tidyverse")

install.packages("haven")
library(tidyverse)

library(haven)

df=file.choose() *Note: Select the STATA file from the folder where it is saved.

dataset=read.dta(df)

I appreciate any thoughts or suggestion.

Thanks,
Mary

	[[alternative HTML version deleted]]


From |@go@g|ne @end|ng |rom @jd@e@  Tue Nov 15 08:21:12 2022
From: |@go@g|ne @end|ng |rom @jd@e@ (=?iso-8859-1?Q?IAGO_GIN=C9_V=C1ZQUEZ?=)
Date: Tue, 15 Nov 2022 07:21:12 +0000
Subject: [R] Rare behaviour for nlme::reStruct example and question about
 ?lmeObject
Message-ID: <AM6PR02MB44232C6D8D918F8C9AC136F394049@AM6PR02MB4423.eurprd02.prod.outlook.com>

Dear developers,

When I run the example code in the help of reStruct, I get


> library(nlme)
> rs1 <- reStruct(list(Dog = ~day, Side = ~1), data = Pixel)
> rs1
Uninitialized random effects structure
> str(rs1)
List of 2
 $ Side:Error in pdMatrix.pdSymm(x) :
  cannot extract matrix from an uninitialized object


Is it expected?

In addition to that I would like to ask if shouldn't be `terms` documented in `?lmeObject`.


Kind regards,

Iago




	[[alternative HTML version deleted]]


From |@go@g|ne @end|ng |rom @jd@e@  Tue Nov 15 08:35:57 2022
From: |@go@g|ne @end|ng |rom @jd@e@ (=?iso-8859-1?Q?IAGO_GIN=C9_V=C1ZQUEZ?=)
Date: Tue, 15 Nov 2022 07:35:57 +0000
Subject: [R] Importing data with value labels into R
In-Reply-To: <YTBPR01MB3760167BC87023F4FAE89583AF059@YTBPR01MB3760.CANPRD01.PROD.OUTLOOK.COM>
References: <YTBPR01MB3760167BC87023F4FAE89583AF059@YTBPR01MB3760.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <AM6PR02MB44239B32A48875269B126E8594049@AM6PR02MB4423.eurprd02.prod.outlook.com>

Hello Maryam,

The haven function for reading Stata files is read_dta (not read.dta!!!). May this be your issue?

Iago

________________________________
De: R-help <r-help-bounces at r-project.org> de part de Maryam Iraniparast <miraniparast at uwaterloo.ca>
Enviat el: dilluns, 14 de novembre de 2022 19:07
Per a: r-help at r-project.org <r-help at r-project.org>
Tema: [R] Importing data with value labels into R

Hello!

I want to read SPSS data into R and I want to carry the value labels with my dataset.
Based on my research, only Stata file can transfer the value labels to R (It is easy to save SPSS data with Stata format).
The last time I did that successfully, I was using R4.2.1 and the following code. But it does not work anymore.


install.packages("tidyverse")

install.packages("haven")
library(tidyverse)

library(haven)

df=file.choose() *Note: Select the STATA file from the folder where it is saved.

dataset=read.dta(df)

I appreciate any thoughts or suggestion.

Thanks,
Mary

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From chr|@t|@n@henn|g @end|ng |rom un|bo@|t  Tue Nov 15 12:53:30 2022
From: chr|@t|@n@henn|g @end|ng |rom un|bo@|t (Christian Hennig)
Date: Tue, 15 Nov 2022 12:53:30 +0100
Subject: [R] Axis scaling for PCA biplot
Message-ID: <70ffd30e-7ad8-f1c4-142a-65a6b89bbf91@unibo.it>

Hi there,

I'm puzzled about the axis scaling in the PCA biplot.

Here's an example.

library(pdfCluster) # package cepp seems to have the same data set.

data(oliveoil) # 572 observations 10 variables

olive <- oliveoil[,3:10] # numerical variables

prolive <- princomp(olive)
summary(prolive)
# Importance of components:
#???????????????????????????? Comp.1?????? Comp.2 Comp.3?????? Comp.4
# Standard deviation???? 479.7299024 150.82827868 45.394449751 27.522646558
# Proportion of Variance?? 0.8970072?? 0.08866821? 0.008031707 0.002952451
# Cumulative Proportion??? 0.8970072?? 0.98567544? 0.993707152 0.996659603
#???????????????????????????? Comp.5?????? Comp.6 Comp.7?????? Comp.8
# Standard deviation???? 24.78169442 1.196956e+01 7.1390744088 6.9756965249
# Proportion of Variance? 0.00239367 5.584168e-04 0.0001986489 0.0001896608
# Cumulative Proportion?? 0.99905327 9.996117e-01 0.9998103392 1.0000000000

plot(prolive$scores)

# Scaling of this plot reproduces the variances of the components given 
in the summary,

# as does cov(prolive$scores). This seems all fine, however...

biplot(prolive)

I have no idea what the numbers on the axes of the biplot are, at least 
not the larger ones. Chances are the smaller ones indicate the loadings. 
The larger ones are neither the same as in the first plot, nor are they 
standardised to one, but they seem to be standardised somehow, as the 
range on x- and y-axis looks the same, which it shouldn't be if 
variances represented the PCA eigenvalues.

Can anyone explain this to me?

Actually the help page of biplot.princomp says something on this, but I 
don't get my head around it:

"scale

The variables are scaled by |lambda ^ scale| and the observations are 
scaled by |lambda ^ (1-scale)| where |lambda| are the singular values as 
computed by |princomp 
<https://www.rdocumentation.org/link/princomp?package=stats&version=3.6.2>|. 
Normally |0 <= scale <= 1|, and a warning will be issued if the 
specified |scale| is outside this range."

The default value of scale seems to be 1, but then (1-scale) is zero so 
I'd assume data to be unscaled, but that should have reproduced the 
"plot" scale, shouldn't it?

Thanks,

Christian

-- 
Christian Hennig
Dipartimento di Scienze Statistiche "Paolo Fortunati",
Universita di Bologna, phone +39 05120 98163
christian.hennig at unibo.it

	[[alternative HTML version deleted]]


From P|erre@Nede|ec @end|ng |rom uc@|@edu  Mon Nov 14 21:48:13 2022
From: P|erre@Nede|ec @end|ng |rom uc@|@edu (Nedelec, Pierre)
Date: Mon, 14 Nov 2022 20:48:13 +0000
Subject: [R] Issue installing gamm4 for R v4.2.2
Message-ID: <BY3PR05MB85633C9229319C71B0161E26F4059@BY3PR05MB8563.namprd05.prod.outlook.com>

Hello,

I'm having issues installing the package gamm4 with R v4.2.2. It seems to fail because of the required package minqa. (ERROR: compilation failed for package ?minqa? below). minqa is not listed as a requirement on the gamm4 package<https://cran.r-project.org/package=gamm4>, but maybe it is a requirement for one of the other required packages? Anyway, I'm not sure how to debug this, and any help would be appreciated.

Thank you!

Here's the session info and detail log:


> sessionInfo()

R version 4.2.2 (2022-10-31)

Platform: x86_64-apple-darwin21.6.0 (64-bit)

Running under: macOS Monterey 12.6.1


Matrix products: default

BLAS:   /usr/local/Cellar/openblas/0.3.21/lib/libopenblasp-r0.3.21.dylib

LAPACK: /usr/local/Cellar/r/4.2.2/lib/R/lib/libRlapack.dylib


locale:

[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8


attached base packages:

[1] stats     graphics  grDevices utils     datasets  methods   base


loaded via a namespace (and not attached):

[1] compiler_4.2.2 tools_4.2.2



> install.packages('gamm4')

Installing package into ?/usr/local/lib/R/4.2/site-library?

(as ?lib? is unspecified)

also installing the dependencies ?minqa?, ?lme4?


trying URL 'https://cran.case.edu/src/contrib/minqa_1.2.5.tar.gz'

Content type 'application/x-gzip' length 54415 bytes (53 KB)

==================================================

downloaded 53 KB


trying URL 'https://cran.case.edu/src/contrib/lme4_1.1-31.tar.gz'

Content type 'application/x-gzip' length 2947739 bytes (2.8 MB)

==================================================

downloaded 2.8 MB


trying URL 'https://cran.case.edu/src/contrib/gamm4_0.2-6.tar.gz'

Content type 'application/x-gzip' length 14969 bytes (14 KB)

==================================================

downloaded 14 KB


* installing *source* package ?minqa? ...

** package ?minqa? successfully unpacked and MD5 sums checked

** using staged installation

** libs

/usr/local/opt/gcc/bin/gfortran -fno-optimize-sibling-calls  -fPIC  -g -O2  -c altmov.f -o altmov.o

altmov.f:42:72:


   42 |    10 HCOL(K)=ZERO

      |                                                                        1

Warning: Fortran 2018 deleted feature: DO termination statement which is not END DO or CONTINUE with label 10 at (1)

altmov.f:45:72:


   45 |       DO 20 K=1,NPT

      |                                                                        1

Warning: Fortran 2018 deleted feature: Shared DO termination label 20 at (1)

altmov.f:46:72:


   46 |    20 HCOL(K)=HCOL(K)+TEMP*ZMAT(K,J)

      |                                                                        1

Warning: Fortran 2018 deleted feature: DO termination statement which is not END DO or CONTINUE with label 20 at (1)

altmov.f:53:72:


   53 |    30 GLAG(I)=BMAT(KNEW,I)

      |                                                                        1

Warning: Fortran 2018 deleted feature: DO termination statement which is not END DO or CONTINUE with label 30 at (1)

altmov.f:57:72:


   57 |    40 TEMP=TEMP+XPT(K,J)*XOPT(J)

      |                                                                        1

Warning: Fortran 2018 deleted feature: DO termination statement which is not END DO or CONTINUE with label 40 at (1)

altmov.f:59:72:


   59 |       DO 50 I=1,N

      |                                                                        1

Warning: Fortran 2018 deleted feature: Shared DO termination label 50 at (1)

altmov.f:60:72:


   60 |    50 GLAG(I)=GLAG(I)+TEMP*XPT(K,I)

      |                                                                        1

Warning: Fortran 2018 deleted feature: DO termination statement which is not END DO or CONTINUE with label 50 at (1)

altmov.f:76:72:


   76 |    60 DISTSQ=DISTSQ+TEMP*TEMP

      |                                                                        1

Warning: Fortran 2018 deleted feature: DO termination statement which is not END DO or CONTINUE with label 60 at (1)

altmov.f:173:72:


  173 |    90 XNEW(I)=DMAX1(SL(I),DMIN1(SU(I),TEMP))

      |                                                                        1

Warning: Fortran 2018 deleted feature: DO termination statement which is not END DO or CONTINUE with label 90 at (1)

altmov.f:238:72:


  238 |   140 GW=GW+GLAG(I)*W(I)

      |                                                                        1

Warning: Fortran 2018 deleted feature: DO termination statement which is not END DO or CONTINUE with label 140 at (1)

altmov.f:249:72:


  249 |   150 TEMP=TEMP+XPT(K,J)*W(J)

      |                                                                        1

Warning: Fortran 2018 deleted feature: DO termination statement which is not END DO or CONTINUE with label 150 at (1)

altmov.f:250:72:


  250 |   160 CURV=CURV+HCOL(K)*TEMP*TEMP

      |                                                                        1

Warning: Fortran 2018 deleted feature: DO termination statement which is not END DO or CONTINUE with label 160 at (1)

altmov.f:256:72:


  256 |   170     XALT(I)=DMAX1(SL(I),DMIN1(SU(I),TEMP))

      |                                                                        1

Warning: Fortran 2018 deleted feature: DO termination statement which is not END DO or CONTINUE with label 170 at (1)

altmov.f:269:72:


  269 |   180     W(N+I)=XALT(I)

      |                                                                        1

Warning: Fortran 2018 deleted feature: DO termination statement which is not END DO or CONTINUE with label 180 at (1)

altmov.f:276:72:


  276 |   190     XALT(I)=W(N+I)

      |                                                                        1

Warning: Fortran 2018 deleted feature: DO termination statement which is not END DO or CONTINUE with label 190 at (1)

clang (LLVM option parsing): Unknown command line argument '-x86-pad-for-align=false'.  Try: 'clang (LLVM option parsing) --help'

clang (LLVM option parsing): Did you mean '--x86-slh-loads=false'?

make: *** [altmov.o] Error 1

ERROR: compilation failed for package ?minqa?

* removing ?/usr/local/lib/R/4.2/site-library/minqa?

ERROR: dependency ?minqa? is not available for package ?lme4?

* removing ?/usr/local/lib/R/4.2/site-library/lme4?

ERROR: dependency ?lme4? is not available for package ?gamm4?

* removing ?/usr/local/lib/R/4.2/site-library/gamm4?


The downloaded source packages are in

?/private/var/folders/2q/qbb1m4q52md022yt2cqbd9mm0000gn/T/RtmpYkdEv8/downloaded_packages?

Warning messages:

1: In install.packages("gamm4") :

  installation of package ?minqa? had non-zero exit status

2: In install.packages("gamm4") :

  installation of package ?lme4? had non-zero exit status

3: In install.packages("gamm4") :

  installation of package ?gamm4? had non-zero exit status

--
Pierre

	[[alternative HTML version deleted]]


From @@h||nv@rkey @end|ng |rom gm@||@com  Tue Nov 15 08:49:02 2022
From: @@h||nv@rkey @end|ng |rom gm@||@com (ASHLIN VARKEY)
Date: Tue, 15 Nov 2022 13:19:02 +0530
Subject: [R] Initial value choosing in nleqslv package
Message-ID: <CAKwZBoyeSVw4j97JmGFdJXgicPJEJxk-=r7B33NbNmumOSQ0ow@mail.gmail.com>

In my work, I use l-moments for estimation and obtain a system of
nonlinear equations. I am using the 'nleqslv' package in the R- program to
solve these equations but am struggling to choose initial values. Is there
any criteria to choose initial values in this package or is there any other
method to solve these equations?  My system of equations are given below.

 simeqn=function(x){

  y=numeric(4)

  y[1]=x[1]*(((gamma(1+x[2])*gamma(x[3]-x[2]))/gamma(x[3]))+((gamma(1-
x[2])*gamma(x[4]+x[2]))/gamma(x[4])))- 38353


y[2]=x[1]*gamma(1+x[2])*((gamma(x[3]-x[2])/gamma(x[3]))-(gamma(2*x[3]-x[2])/gamma(2*x[3]))-(gamma(x[4]+x[2])/gamma(x[4]))+(gamma(2*x[4]+x[2])/gamma(2*x[4])))-
3759.473


y[3]=x[1]*gamma(1+x[2])*((gamma(x[3]-x[2])/gamma(x[3]))-(3*gamma(2*x[3]-x[2])/gamma(2*x[3]))+(2*gamma(3*x[3]-x[2])/gamma(3*x[3]))+(gamma(x[4]+x[2])/gamma(x[4]))-(3*gamma(2*x[4]+x[2])/gamma(2*x[4]))+(2*gamma(3*x[4]+x[2])/gamma(3*x[4])))-
966.3958

  y[4]=
x[1]*gamma(1+x[2])*((gamma(x[3]-x[2])/gamma(x[3]))-(6*gamma(2*x[3]-x[2])/gamma(2*x[3]))+(10*gamma(3*x[3]-x[2])/gamma(3*x[3]))-(5*gamma(4*x[3]-x[2])/gamma(4*x[3]))-(gamma(x[4]+x[2])/gamma(x[4]))+(6*gamma(2*x[4]+x[2])/gamma(2*x[4]))-(10*gamma(3*x[4]+x[2])/gamma(3*x[4]))+(5*gamma(4*x[4]+x[2])/gamma(4*x[4])))-
500.952

  y

}

	[[alternative HTML version deleted]]


From tebert @end|ng |rom u||@edu  Tue Nov 15 15:38:56 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Tue, 15 Nov 2022 14:38:56 +0000
Subject: [R] Initial value choosing in nleqslv package
In-Reply-To: <CAKwZBoyeSVw4j97JmGFdJXgicPJEJxk-=r7B33NbNmumOSQ0ow@mail.gmail.com>
References: <CAKwZBoyeSVw4j97JmGFdJXgicPJEJxk-=r7B33NbNmumOSQ0ow@mail.gmail.com>
Message-ID: <BN6PR2201MB1553BE96387D83A8C1B4D2C6CF049@BN6PR2201MB1553.namprd22.prod.outlook.com>

I would suggest treating initial values as hyperparameters. Try a range of values to understand how your choice influences your outcome. Plot the result. Eventually (I hope) you will get a feel for the right answer for your specific type of data and you will be able to reduce the time needed for this activity.

If you want to be safe I would use the microbenchmark package to determine program run time. If runtimes are short then 
I might try a range of 0 to 10 in steps of 0.01 and see what happens. If there is an interesting region I might then focus on that in finer steps. 

Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of ASHLIN VARKEY
Sent: Tuesday, November 15, 2022 2:49 AM
To: r-help at r-project.org
Subject: [R] Initial value choosing in nleqslv package

[External Email]

In my work, I use l-moments for estimation and obtain a system of nonlinear equations. I am using the 'nleqslv' package in the R- program to solve these equations but am struggling to choose initial values. Is there any criteria to choose initial values in this package or is there any other method to solve these equations?  My system of equations are given below.

 simeqn=function(x){

  y=numeric(4)

  y[1]=x[1]*(((gamma(1+x[2])*gamma(x[3]-x[2]))/gamma(x[3]))+((gamma(1-
x[2])*gamma(x[4]+x[2]))/gamma(x[4])))- 38353


y[2]=x[1]*gamma(1+x[2])*((gamma(x[3]-x[2])/gamma(x[3]))-(gamma(2*x[3]-x[2])/gamma(2*x[3]))-(gamma(x[4]+x[2])/gamma(x[4]))+(gamma(2*x[4]+x[2])/gamma(2*x[4])))-
3759.473


y[3]=x[1]*gamma(1+x[2])*((gamma(x[3]-x[2])/gamma(x[3]))-(3*gamma(2*x[3]-x[2])/gamma(2*x[3]))+(2*gamma(3*x[3]-x[2])/gamma(3*x[3]))+(gamma(x[4]+x[2])/gamma(x[4]))-(3*gamma(2*x[4]+x[2])/gamma(2*x[4]))+(2*gamma(3*x[4]+x[2])/gamma(3*x[4])))-
966.3958

  y[4]=
x[1]*gamma(1+x[2])*((gamma(x[3]-x[2])/gamma(x[3]))-(6*gamma(2*x[3]-x[2])/gamma(2*x[3]))+(10*gamma(3*x[3]-x[2])/gamma(3*x[3]))-(5*gamma(4*x[3]-x[2])/gamma(4*x[3]))-(gamma(x[4]+x[2])/gamma(x[4]))+(6*gamma(2*x[4]+x[2])/gamma(2*x[4]))-(10*gamma(3*x[4]+x[2])/gamma(3*x[4]))+(5*gamma(4*x[4]+x[2])/gamma(4*x[4])))-
500.952

  y

}

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C7119f0c53d984aed0be908dac7156d81%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638041192349108654%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=E%2FVs%2FPCFnXV9LVsgg24SqBmb7LXB890OaIdqfoHjuFM%3D&amp;reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C7119f0c53d984aed0be908dac7156d81%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638041192349108654%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=A9pn7JDIrGgJJO0g2bdHmrYRo2UCO9yxMiGiOORO8HY%3D&amp;reserved=0
and provide commented, minimal, self-contained, reproducible code.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Nov 15 16:00:50 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 15 Nov 2022 07:00:50 -0800
Subject: [R] Initial value choosing in nleqslv package
In-Reply-To: <CAKwZBoyeSVw4j97JmGFdJXgicPJEJxk-=r7B33NbNmumOSQ0ow@mail.gmail.com>
References: <CAKwZBoyeSVw4j97JmGFdJXgicPJEJxk-=r7B33NbNmumOSQ0ow@mail.gmail.com>
Message-ID: <B45DF778-FF93-4287-A1C7-D5725D45FAFE@dcn.davis.ca.us>

There is a reason linear algebra techniques are so popular... they are much more deterministic than nonlinear techniques. Deriving a method of starting a nonlinear optimization is highly specific to the equations, not to the optimization algorithm. In some cases you can create an approximation using linear algebra to find a reasonable starting point. In others, people develop other heuristics by studying asymptotes of the equations. In orhers, there is just always some chance that the user will have to try and fail until they get something that works.

On November 14, 2022 11:49:02 PM PST, ASHLIN VARKEY <ashlinvarkey at gmail.com> wrote:
>In my work, I use l-moments for estimation and obtain a system of
>nonlinear equations. I am using the 'nleqslv' package in the R- program to
>solve these equations but am struggling to choose initial values. Is there
>any criteria to choose initial values in this package or is there any other
>method to solve these equations?  My system of equations are given below.
>
> simeqn=function(x){
>
>  y=numeric(4)
>
>  y[1]=x[1]*(((gamma(1+x[2])*gamma(x[3]-x[2]))/gamma(x[3]))+((gamma(1-
>x[2])*gamma(x[4]+x[2]))/gamma(x[4])))- 38353
>
>
>y[2]=x[1]*gamma(1+x[2])*((gamma(x[3]-x[2])/gamma(x[3]))-(gamma(2*x[3]-x[2])/gamma(2*x[3]))-(gamma(x[4]+x[2])/gamma(x[4]))+(gamma(2*x[4]+x[2])/gamma(2*x[4])))-
>3759.473
>
>
>y[3]=x[1]*gamma(1+x[2])*((gamma(x[3]-x[2])/gamma(x[3]))-(3*gamma(2*x[3]-x[2])/gamma(2*x[3]))+(2*gamma(3*x[3]-x[2])/gamma(3*x[3]))+(gamma(x[4]+x[2])/gamma(x[4]))-(3*gamma(2*x[4]+x[2])/gamma(2*x[4]))+(2*gamma(3*x[4]+x[2])/gamma(3*x[4])))-
>966.3958
>
>  y[4]=
>x[1]*gamma(1+x[2])*((gamma(x[3]-x[2])/gamma(x[3]))-(6*gamma(2*x[3]-x[2])/gamma(2*x[3]))+(10*gamma(3*x[3]-x[2])/gamma(3*x[3]))-(5*gamma(4*x[3]-x[2])/gamma(4*x[3]))-(gamma(x[4]+x[2])/gamma(x[4]))+(6*gamma(2*x[4]+x[2])/gamma(2*x[4]))-(10*gamma(3*x[4]+x[2])/gamma(3*x[4]))+(5*gamma(4*x[4]+x[2])/gamma(4*x[4])))-
>500.952
>
>  y
>
>}
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From r@ywong @end|ng |rom t@mu@edu  Tue Nov 15 16:05:05 2022
From: r@ywong @end|ng |rom t@mu@edu (Raymond Wong)
Date: Tue, 15 Nov 2022 09:05:05 -0600
Subject: [R] 2023 John M. Chambers Software Award
In-Reply-To: <924184f0-14aa-4eec-9be7-d71b55da5b92@Spark>
References: <924184f0-14aa-4eec-9be7-d71b55da5b92@Spark>
Message-ID: <ac7f0278-e8df-4815-b98b-5fae9890a753@Spark>

Dear R-help listers,

The Statistical Computing Section of the American Statistical Association announces the competition for the John M. Chambers Statistical Software Award. In 1998 the Association for Computing Machinery (ACM) presented the ACM Software System Award to John Chambers for the design and development of S. Dr. Chambers generously donated his award to the Statistical Computing Section to endow an annual prize for statistical software written by, or in collaboration with, an undergraduate or graduate student.

Please visit http://asa.stat.uconn.edu for more information.

Best regards,

Raymond Wong

Awards Chair
ASA Section on Statistical Computing
ASA Section on Statistical Graphics

Associate Professor
Department of Statistics
Texas A&M University

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Tue Nov 15 16:08:20 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 15 Nov 2022 18:08:20 +0300
Subject: [R] Issue installing gamm4 for R v4.2.2
In-Reply-To: <BY3PR05MB85633C9229319C71B0161E26F4059@BY3PR05MB8563.namprd05.prod.outlook.com>
References: <BY3PR05MB85633C9229319C71B0161E26F4059@BY3PR05MB8563.namprd05.prod.outlook.com>
Message-ID: <20221115180820.17d89bf5@arachnoid>

Hello Pierre,

Thank you for providing both sessionInfo() and the installation log,
it's very helpful!

? Mon, 14 Nov 2022 20:48:13 +0000
"Nedelec, Pierre via R-help" <r-help at r-project.org> ?????:

> /usr/local/opt/gcc/bin/gfortran -fno-optimize-sibling-calls  -fPIC
> -g -O2  -c altmov.f -o altmov.o
...
> clang (LLVM option parsing): Unknown command line argument
> '-x86-pad-for-align=false'.

It looks like your Fortran compiler installation might be not fully
functional. Can you compile and run a Fortran "Hello World"?

program hello
print *, 'Hello'
end program

The following command line should compile and run the program stored in
a file named "hello.f90":
/usr/local/opt/gcc/bin/gfortran -o hello hello.f90 && ./hello

I see that you're using some libraries installed from Homebrew. Is your
GNU Fortran installation from <https://mac.r-project.org/tools/> or
from somewhere else? How did you install R itself?

I don't have a Mac and may be unable to help you further, but your
answers should be useful to other more experienced people. If you don't
get an answer here soon, consider asking at r-sig-mac at r-project.org,
because this looks like a Mac-specific problem.

> 	[[alternative HTML version deleted]]

Your message reached us almost undamaged, but not all messages composed
in HTML are so lucky:
https://stat.ethz.ch/pipermail/r-help/2022-November/476282.html

Please post to R mailing lists in plain text.

-- 
Best regards,
Ivan


From pro|jcn@@h @end|ng |rom gm@||@com  Tue Nov 15 16:19:31 2022
From: pro|jcn@@h @end|ng |rom gm@||@com (J C Nash)
Date: Tue, 15 Nov 2022 10:19:31 -0500
Subject: [R] Initial value choosing in nleqslv package
In-Reply-To: <CAKwZBoyeSVw4j97JmGFdJXgicPJEJxk-=r7B33NbNmumOSQ0ow@mail.gmail.com>
References: <CAKwZBoyeSVw4j97JmGFdJXgicPJEJxk-=r7B33NbNmumOSQ0ow@mail.gmail.com>
Message-ID: <4a13a40e-688a-0ba7-276b-8a9ce8b8d032@gmail.com>

A rather crude approach to solving nonlinear equations is to rewrite the
equations as residuals and minimize the sum of squares. A zero sumsquares
gives a solution. It is NOT guaranteed to work, of course.

I recommend a Marquardt approach  minpack.lm::nlslm or my nlsr::nlfb. You
will need to specify a function for the jacobian (derivatives of the residuals
w.r.t. the parameters) for the latter package, but it does handle bounds
correctly. Bounds in minpack.lm can be specified but I've a couple of failed
cases, though I'll caution that in this area the scaling is such that all
packages can be made to fail in some cases.

I can send the latest developmental version of the nlsr package with some
updates to make use of jacobians easier if you take that route.

JN


On 2022-11-15 02:49, ASHLIN VARKEY wrote:
> In my work, I use l-moments for estimation and obtain a system of
> nonlinear equations. I am using the 'nleqslv' package in the R- program to
> solve these equations but am struggling to choose initial values. Is there
> any criteria to choose initial values in this package or is there any other
> method to solve these equations?  My system of equations are given below.
> 
>   simeqn=function(x){
> 
>    y=numeric(4)
> 
>    y[1]=x[1]*(((gamma(1+x[2])*gamma(x[3]-x[2]))/gamma(x[3]))+((gamma(1-
> x[2])*gamma(x[4]+x[2]))/gamma(x[4])))- 38353
> 
> 
> y[2]=x[1]*gamma(1+x[2])*((gamma(x[3]-x[2])/gamma(x[3]))-(gamma(2*x[3]-x[2])/gamma(2*x[3]))-(gamma(x[4]+x[2])/gamma(x[4]))+(gamma(2*x[4]+x[2])/gamma(2*x[4])))-
> 3759.473
> 
> 
> y[3]=x[1]*gamma(1+x[2])*((gamma(x[3]-x[2])/gamma(x[3]))-(3*gamma(2*x[3]-x[2])/gamma(2*x[3]))+(2*gamma(3*x[3]-x[2])/gamma(3*x[3]))+(gamma(x[4]+x[2])/gamma(x[4]))-(3*gamma(2*x[4]+x[2])/gamma(2*x[4]))+(2*gamma(3*x[4]+x[2])/gamma(3*x[4])))-
> 966.3958
> 
>    y[4]=
> x[1]*gamma(1+x[2])*((gamma(x[3]-x[2])/gamma(x[3]))-(6*gamma(2*x[3]-x[2])/gamma(2*x[3]))+(10*gamma(3*x[3]-x[2])/gamma(3*x[3]))-(5*gamma(4*x[3]-x[2])/gamma(4*x[3]))-(gamma(x[4]+x[2])/gamma(x[4]))+(6*gamma(2*x[4]+x[2])/gamma(2*x[4]))-(10*gamma(3*x[4]+x[2])/gamma(3*x[4]))+(5*gamma(4*x[4]+x[2])/gamma(4*x[4])))-
> 500.952
> 
>    y
> 
> }
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Tue Nov 15 16:26:48 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 15 Nov 2022 07:26:48 -0800
Subject: [R] Initial value choosing in nleqslv package
In-Reply-To: <BN6PR2201MB1553BE96387D83A8C1B4D2C6CF049@BN6PR2201MB1553.namprd22.prod.outlook.com>
References: <CAKwZBoyeSVw4j97JmGFdJXgicPJEJxk-=r7B33NbNmumOSQ0ow@mail.gmail.com>
 <BN6PR2201MB1553BE96387D83A8C1B4D2C6CF049@BN6PR2201MB1553.namprd22.prod.outlook.com>
Message-ID: <CAGxFJbQU3AvTvXKk+v6raFT4C2GXjo4U4FohXzqxUCjSGeJfHA@mail.gmail.com>

I addition to the advice you have already received, you might have a look
here,
https://cran.r-project.org/web/views/Optimization.html
to see if there might be tools to assist in your 'metasearch' . I wouldn't
be surprised if that is a vain hope for the reasons you have already been
given, but it can't hurt to look, right?

Cheers,
Bert

On Tue, Nov 15, 2022 at 6:46 AM Ebert,Timothy Aaron <tebert at ufl.edu> wrote:

> I would suggest treating initial values as hyperparameters. Try a range of
> values to understand how your choice influences your outcome. Plot the
> result. Eventually (I hope) you will get a feel for the right answer for
> your specific type of data and you will be able to reduce the time needed
> for this activity.
>
> If you want to be safe I would use the microbenchmark package to determine
> program run time. If runtimes are short then
> I might try a range of 0 to 10 in steps of 0.01 and see what happens. If
> there is an interesting region I might then focus on that in finer steps.
>
> Tim
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of ASHLIN VARKEY
> Sent: Tuesday, November 15, 2022 2:49 AM
> To: r-help at r-project.org
> Subject: [R] Initial value choosing in nleqslv package
>
> [External Email]
>
> In my work, I use l-moments for estimation and obtain a system of
> nonlinear equations. I am using the 'nleqslv' package in the R- program to
> solve these equations but am struggling to choose initial values. Is there
> any criteria to choose initial values in this package or is there any other
> method to solve these equations?  My system of equations are given below.
>
>  simeqn=function(x){
>
>   y=numeric(4)
>
>   y[1]=x[1]*(((gamma(1+x[2])*gamma(x[3]-x[2]))/gamma(x[3]))+((gamma(1-
> x[2])*gamma(x[4]+x[2]))/gamma(x[4])))- 38353
>
>
>
> y[2]=x[1]*gamma(1+x[2])*((gamma(x[3]-x[2])/gamma(x[3]))-(gamma(2*x[3]-x[2])/gamma(2*x[3]))-(gamma(x[4]+x[2])/gamma(x[4]))+(gamma(2*x[4]+x[2])/gamma(2*x[4])))-
> 3759.473
>
>
>
> y[3]=x[1]*gamma(1+x[2])*((gamma(x[3]-x[2])/gamma(x[3]))-(3*gamma(2*x[3]-x[2])/gamma(2*x[3]))+(2*gamma(3*x[3]-x[2])/gamma(3*x[3]))+(gamma(x[4]+x[2])/gamma(x[4]))-(3*gamma(2*x[4]+x[2])/gamma(2*x[4]))+(2*gamma(3*x[4]+x[2])/gamma(3*x[4])))-
> 966.3958
>
>   y[4]=
>
> x[1]*gamma(1+x[2])*((gamma(x[3]-x[2])/gamma(x[3]))-(6*gamma(2*x[3]-x[2])/gamma(2*x[3]))+(10*gamma(3*x[3]-x[2])/gamma(3*x[3]))-(5*gamma(4*x[3]-x[2])/gamma(4*x[3]))-(gamma(x[4]+x[2])/gamma(x[4]))+(6*gamma(2*x[4]+x[2])/gamma(2*x[4]))-(10*gamma(3*x[4]+x[2])/gamma(3*x[4]))+(5*gamma(4*x[4]+x[2])/gamma(4*x[4])))-
> 500.952
>
>   y
>
> }
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C7119f0c53d984aed0be908dac7156d81%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638041192349108654%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=E%2FVs%2FPCFnXV9LVsgg24SqBmb7LXB890OaIdqfoHjuFM%3D&amp;reserved=0
> PLEASE do read the posting guide
> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C7119f0c53d984aed0be908dac7156d81%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638041192349108654%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=A9pn7JDIrGgJJO0g2bdHmrYRo2UCO9yxMiGiOORO8HY%3D&amp;reserved=0
> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Nov 15 16:20:39 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 15 Nov 2022 07:20:39 -0800
Subject: [R] 
 Rare behaviour for nlme::reStruct example and question about
 ?lmeObject
In-Reply-To: <AM6PR02MB44232C6D8D918F8C9AC136F394049@AM6PR02MB4423.eurprd02.prod.outlook.com>
References: <AM6PR02MB44232C6D8D918F8C9AC136F394049@AM6PR02MB4423.eurprd02.prod.outlook.com>
Message-ID: <CAGxFJbShFmWJVv61q2pdEeCuENtpgSGPYr8sYqTXYgg5C4rMxQ@mail.gmail.com>

1. Not developers, helpers (though there may be some developers among us,
too). Ergo, we don't make changes to code or man pages either.

2. If no satisfactory reply here, R-Sig-mixed-models is where you should
post. And post there first for mixed models questions in future.

Cheers,
Bert


On Mon, Nov 14, 2022 at 11:24 PM IAGO GIN? V?ZQUEZ <iago.gine at sjd.es> wrote:

> Dear developers,
>
> When I run the example code in the help of reStruct, I get
>
>
> > library(nlme)
> > rs1 <- reStruct(list(Dog = ~day, Side = ~1), data = Pixel)
> > rs1
> Uninitialized random effects structure
> > str(rs1)
> List of 2
>  $ Side:Error in pdMatrix.pdSymm(x) :
>   cannot extract matrix from an uninitialized object
>
>
> Is it expected?
>
> In addition to that I would like to ask if shouldn't be `terms` documented
> in `?lmeObject`.
>
>
> Kind regards,
>
> Iago
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From y@ngk@|9999 @end|ng |rom y@hoo@com  Tue Nov 15 17:18:27 2022
From: y@ngk@|9999 @end|ng |rom y@hoo@com (Kai Yang)
Date: Tue, 15 Nov 2022 16:18:27 +0000 (UTC)
Subject: [R] add specific fields in for loop
References: <984984759.289705.1668529107147.ref@mail.yahoo.com>
Message-ID: <984984759.289705.1668529107147@mail.yahoo.com>

Hi Team,
I can write a for loop like this:
for (i in columns(df)){
? ......
}

But it will working on all column in dataframe df. If I want to work on some of specific fields (say: the fields' name content 'date'), how should I modify the for loop? I changed the code below, but it doesn't work.
for (i in columns(df) %in% 'date' ){
? .....
}


Thank you,
Kai

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Nov 15 18:08:43 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 15 Nov 2022 09:08:43 -0800
Subject: [R] add specific fields in for loop
In-Reply-To: <984984759.289705.1668529107147@mail.yahoo.com>
References: <984984759.289705.1668529107147.ref@mail.yahoo.com>
 <984984759.289705.1668529107147@mail.yahoo.com>
Message-ID: <CAGxFJbQ6Jt6RZk40WfNstkZGJ7+mBdqGgaOnE=Mi+7yojumYCQ@mail.gmail.com>

There is no function columns() in base R.
Is 'date' an object that contains column names or indices? Or do you mean
that it is a string that appears in the column names you wish to loop over?

A small reprex should be easy to provide to show us explicitly what you
want. Please do so -- unless, of course, someone with greater insight than
I provides you a satisfactory answer.

Cheers,
Bert

On Tue, Nov 15, 2022 at 8:19 AM Kai Yang via R-help <r-help at r-project.org>
wrote:

> Hi Team,
> I can write a for loop like this:
> for (i in columns(df)){
>   ......
> }
>
> But it will working on all column in dataframe df. If I want to work on
> some of specific fields (say: the fields' name content 'date'), how should
> I modify the for loop? I changed the code below, but it doesn't work.
> for (i in columns(df) %in% 'date' ){
>   .....
> }
>
>
> Thank you,
> Kai
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @vi@e@gross m@iii@g oii gm@ii@com  Tue Nov 15 18:22:22 2022
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Tue, 15 Nov 2022 12:22:22 -0500
Subject: [R] add specific fields in for loop
In-Reply-To: <984984759.289705.1668529107147@mail.yahoo.com>
References: <984984759.289705.1668529107147.ref@mail.yahoo.com>
 <984984759.289705.1668529107147@mail.yahoo.com>
Message-ID: <004201d8f916$d2d2b290$787817b0$@gmail.com>

Kai,

As Bert pointed out, it may not be clear what you want.

As a GUESS, you have some arbitrary data.frame object with multiple columns and you want to do something on selected columns. Consider changing your idea to be in several stages for simplicity and then optionally later rewriting it.

So step 1 is to get a vector of column names. The normal way to do this in base R is not with a function called columns(df) but colnames(df) ...

Step 2 is to use one of many techniques that take that vector of names and select the ones you want to keep. In base R there are many ways to do that including using regular expressions as in the "grep" family of functions. You may end up with a new vector of names perhaps shorter or in a different order.

Step 3 is to use those names in your loop. If you want say to convert a column from character to numeric, and your loop index is "current" you might write something like:
	df[current] <- as.numeric(df[current])

There are many ways and it depends on what exactly you want to do. There are packages designed to make some of these things fairly simple, such as dplyr where you can ask to match names that start or end a certain way or that are of certain types.

Avi

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Kai Yang via R-help
Sent: Tuesday, November 15, 2022 11:18 AM
To: R-help Mailing List <r-help at r-project.org>
Subject: [R] add specific fields in for loop

Hi Team,
I can write a for loop like this:
for (i in columns(df)){
  ......
}

But it will working on all column in dataframe df. If I want to work on some of specific fields (say: the fields' name content 'date'), how should I modify the for loop? I changed the code below, but it doesn't work.
for (i in columns(df) %in% 'date' ){
  .....
}


Thank you,
Kai

	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From y@ngk@|9999 @end|ng |rom y@hoo@com  Tue Nov 15 19:52:48 2022
From: y@ngk@|9999 @end|ng |rom y@hoo@com (Kai Yang)
Date: Tue, 15 Nov 2022 18:52:48 +0000 (UTC)
Subject: [R] add specific fields in for loop
In-Reply-To: <004201d8f916$d2d2b290$787817b0$@gmail.com>
References: <984984759.289705.1668529107147.ref@mail.yahoo.com>
 <984984759.289705.1668529107147@mail.yahoo.com>
 <004201d8f916$d2d2b290$787817b0$@gmail.com>
Message-ID: <383846966.334734.1668538368721@mail.yahoo.com>

 Hello Bert and Avi,Sorry, it is typo. it should be:
for (i in colnames(df)){
? ......
}
below is the code I'm currently using
try2.un$ab2 <-
? ifelse(grepl("ab2",try2.un$data1), try2.un$data1,
? ? ? ? ?ifelse(grepl("ab2",try2.un$data2), try2.un$data2,
? ? ? ? ? ? ? ? ifelse(grepl("ab2",try2.un$data3), try2.un$data3,
? ? ? ? ? ? ? ? ? ? ? ?ifelse(grepl("ab2",try2.un$data4), try2.un$data4,
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ifelse(grepl("ab2",try2.un$data5), try2.un$data5,NA
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ) ) ) ) )


As you can see, it uses 5 fields (data1 -- 5 ) in ifelse function. I want to turn it to for loop, because the number of data(s) fields is dynamic. In this sample is 5, But it maybe more than 15 in some of situation. So, I want use loop to solve it and avoid to write those many ifelse statement. Also, in try2.un data frame, there are many other fields that I don't need to use in the loop.?
I'm not sure if the loop is a correct solution. But I'm willing to learn any more suggestion from you.
Thanks,
Kai
    On Tuesday, November 15, 2022 at 09:23:03 AM PST, avi.e.gross at gmail.com <avi.e.gross at gmail.com> wrote:  
 
 Kai,

As Bert pointed out, it may not be clear what you want.

As a GUESS, you have some arbitrary data.frame object with multiple columns and you want to do something on selected columns. Consider changing your idea to be in several stages for simplicity and then optionally later rewriting it.

So step 1 is to get a vector of column names. The normal way to do this in base R is not with a function called columns(df) but colnames(df) ...

Step 2 is to use one of many techniques that take that vector of names and select the ones you want to keep. In base R there are many ways to do that including using regular expressions as in the "grep" family of functions. You may end up with a new vector of names perhaps shorter or in a different order.

Step 3 is to use those names in your loop. If you want say to convert a column from character to numeric, and your loop index is "current" you might write something like:
??? df[current] <- as.numeric(df[current])

There are many ways and it depends on what exactly you want to do. There are packages designed to make some of these things fairly simple, such as dplyr where you can ask to match names that start or end a certain way or that are of certain types.

Avi

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Kai Yang via R-help
Sent: Tuesday, November 15, 2022 11:18 AM
To: R-help Mailing List <r-help at r-project.org>
Subject: [R] add specific fields in for loop

Hi Team,
I can write a for loop like this:
for (i in columns(df)){
? ......
}

But it will working on all column in dataframe df. If I want to work on some of specific fields (say: the fields' name content 'date'), how should I modify the for loop? I changed the code below, but it doesn't work.
for (i in columns(df) %in% 'date' ){
? .....
}


Thank you,
Kai

??? [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.
  
	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Tue Nov 15 19:53:58 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Tue, 15 Nov 2022 18:53:58 +0000
Subject: [R] add specific fields in for loop
In-Reply-To: <984984759.289705.1668529107147@mail.yahoo.com>
References: <984984759.289705.1668529107147.ref@mail.yahoo.com>
 <984984759.289705.1668529107147@mail.yahoo.com>
Message-ID: <4a0562a2-5aab-9e6b-66dc-b9233ac62861@sapo.pt>

?s 16:18 de 15/11/2022, Kai Yang via R-help escreveu:
> Hi Team,
> I can write a for loop like this:
> for (i in columns(df)){
>  ? ......
> }
> 
> But it will working on all column in dataframe df. If I want to work on some of specific fields (say: the fields' name content 'date'), how should I modify the for loop? I changed the code below, but it doesn't work.
> for (i in columns(df) %in% 'date' ){
>  ? .....
> }
> 
> 
> Thank you,
> Kai
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

Something like this?


for(i in grep("date", names(df))) {
   #
}


Hope this helps,

Rui Barradas


From y@ngk@|9999 @end|ng |rom y@hoo@com  Tue Nov 15 20:39:19 2022
From: y@ngk@|9999 @end|ng |rom y@hoo@com (Kai Yang)
Date: Tue, 15 Nov 2022 19:39:19 +0000 (UTC)
Subject: [R] add specific fields in for loop
In-Reply-To: <4a0562a2-5aab-9e6b-66dc-b9233ac62861@sapo.pt>
References: <984984759.289705.1668529107147.ref@mail.yahoo.com>
 <984984759.289705.1668529107147@mail.yahoo.com>
 <4a0562a2-5aab-9e6b-66dc-b9233ac62861@sapo.pt>
Message-ID: <1248526272.354966.1668541159145@mail.yahoo.com>

Hello Rui,
Yes, it should be the one I want. I modified the code as:

for(i in grep("data", names(df))) {
? try2.un$ab2 <-
? ? ifelse(grepl("ab2",? [i]),? ?[i], NA)
}

But I got error message:?
Error: unexpected '[' in:
"? try2.un$ab2 <-
? ? ifelse(grepl("ab2",["

I think I use [i] in a wrong way. Do you have any suggestion?
Thanks,
Kai   On Tuesday, November 15, 2022 at 10:54:08 AM PST, Rui Barradas <ruipbarradas at sapo.pt> wrote:  
 
 ?s 16:18 de 15/11/2022, Kai Yang via R-help escreveu:
> Hi Team,
> I can write a for loop like this:
> for (i in columns(df)){
>? ? ......
> }
> 
> But it will working on all column in dataframe df. If I want to work on some of specific fields (say: the fields' name content 'date'), how should I modify the for loop? I changed the code below, but it doesn't work.
> for (i in columns(df) %in% 'date' ){
>? ? .....
> }
> 
> 
> Thank you,
> Kai
> 
> ??? [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

Something like this?


for(i in grep("date", names(df))) {
? #
}


Hope this helps,

Rui Barradas

  
	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Tue Nov 15 20:48:08 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Tue, 15 Nov 2022 19:48:08 +0000
Subject: [R] add specific fields in for loop
In-Reply-To: <1248526272.354966.1668541159145@mail.yahoo.com>
References: <984984759.289705.1668529107147.ref@mail.yahoo.com>
 <984984759.289705.1668529107147@mail.yahoo.com>
 <4a0562a2-5aab-9e6b-66dc-b9233ac62861@sapo.pt>
 <1248526272.354966.1668541159145@mail.yahoo.com>
Message-ID: <2fb4a86d-fd5f-e65d-b0bc-c8ba74789805@sapo.pt>

?s 19:39 de 15/11/2022, Kai Yang escreveu:
> Hello Rui,
> Yes, it should be the one I want. I modified the code as:
> 
> for(i in grep("data", names(df))) {
>  ? try2.un$ab2 <-
>  ? ? ifelse(grepl("ab2",? [i]),? ?[i], NA)
> }
> 
> But I got error message:
> Error: unexpected '[' in:
> "? try2.un$ab2 <-
>  ? ? ifelse(grepl("ab2",["
> 
> I think I use [i] in a wrong way. Do you have any suggestion?
> Thanks,
> Kai   On Tuesday, November 15, 2022 at 10:54:08 AM PST, Rui Barradas <ruipbarradas at sapo.pt> wrote:
>   
>   ?s 16:18 de 15/11/2022, Kai Yang via R-help escreveu:
>> Hi Team,
>> I can write a for loop like this:
>> for (i in columns(df)){
>>  ? ? ......
>> }
>>
>> But it will working on all column in dataframe df. If I want to work on some of specific fields (say: the fields' name content 'date'), how should I modify the for loop? I changed the code below, but it doesn't work.
>> for (i in columns(df) %in% 'date' ){
>>  ? ? .....
>> }
>>
>>
>> Thank you,
>> Kai
>>
>>  ??? [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> Hello,
> 
> Something like this?
> 
> 
> for(i in grep("date", names(df))) {
>  ? #
> }
> 
> 
> Hope this helps,
> 
> Rui Barradas
> 
>    
Hello,


For what I understand of the problem any of the two below does what the 
posted code seems to be trying to do. The first is better, no ifelse.


for(i in grep("data", names(df))) {
   is.na(try2.un$ab2) <- !grepl("ab2", df[[i]])
}

for(i in grep("data", names(df))) {
   try2.un$ab2 <- ifelse(grepl("ab2", df[[i]]), df[[i]], NA)
}


Hope this helps,

Rui Barradas


From y@ngk@|9999 @end|ng |rom y@hoo@com  Tue Nov 15 21:40:27 2022
From: y@ngk@|9999 @end|ng |rom y@hoo@com (Kai Yang)
Date: Tue, 15 Nov 2022 20:40:27 +0000 (UTC)
Subject: [R] add specific fields in for loop
In-Reply-To: <2fb4a86d-fd5f-e65d-b0bc-c8ba74789805@sapo.pt>
References: <984984759.289705.1668529107147.ref@mail.yahoo.com>
 <984984759.289705.1668529107147@mail.yahoo.com>
 <4a0562a2-5aab-9e6b-66dc-b9233ac62861@sapo.pt>
 <1248526272.354966.1668541159145@mail.yahoo.com>
 <2fb4a86d-fd5f-e65d-b0bc-c8ba74789805@sapo.pt>
Message-ID: <481150035.363639.1668544827828@mail.yahoo.com>

 Hi Rui,
This is a great help.
Thank you,
Kai
    On Tuesday, November 15, 2022 at 11:48:12 AM PST, Rui Barradas <ruipbarradas at sapo.pt> wrote:  
 
 ?s 19:39 de 15/11/2022, Kai Yang escreveu:
> Hello Rui,
> Yes, it should be the one I want. I modified the code as:
> 
> for(i in grep("data", names(df))) {
>? ? try2.un$ab2 <-
>? ? ? ifelse(grepl("ab2",? [i]),? ?[i], NA)
> }
> 
> But I got error message:
> Error: unexpected '[' in:
> "? try2.un$ab2 <-
>? ? ? ifelse(grepl("ab2",["
> 
> I think I use [i] in a wrong way. Do you have any suggestion?
> Thanks,
> Kai? On Tuesday, November 15, 2022 at 10:54:08 AM PST, Rui Barradas <ruipbarradas at sapo.pt> wrote:
>? 
>? ?s 16:18 de 15/11/2022, Kai Yang via R-help escreveu:
>> Hi Team,
>> I can write a for loop like this:
>> for (i in columns(df)){
>>? ? ? ......
>> }
>>
>> But it will working on all column in dataframe df. If I want to work on some of specific fields (say: the fields' name content 'date'), how should I modify the for loop? I changed the code below, but it doesn't work.
>> for (i in columns(df) %in% 'date' ){
>>? ? ? .....
>> }
>>
>>
>> Thank you,
>> Kai
>>
>>? ??? [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> Hello,
> 
> Something like this?
> 
> 
> for(i in grep("date", names(df))) {
>? ? #
> }
> 
> 
> Hope this helps,
> 
> Rui Barradas
> 
>? ? 
Hello,


For what I understand of the problem any of the two below does what the 
posted code seems to be trying to do. The first is better, no ifelse.


for(i in grep("data", names(df))) {
? is.na(try2.un$ab2) <- !grepl("ab2", df[[i]])
}

for(i in grep("data", names(df))) {
? try2.un$ab2 <- ifelse(grepl("ab2", df[[i]]), df[[i]], NA)
}


Hope this helps,

Rui Barradas

  
	[[alternative HTML version deleted]]


From m|ch@e|@e|@enr|ng @end|ng |rom gmx@ch  Tue Nov 15 22:23:30 2022
From: m|ch@e|@e|@enr|ng @end|ng |rom gmx@ch (Michael Eisenring)
Date: Tue, 15 Nov 2022 22:23:30 +0100
Subject: [R] picewiseSEM undefined columns selected
Message-ID: <001d01d8f938$82c2d100$88487300$@gmx.ch>

Dear r-help list members,
I would like to run a pathway analysis using the R-package piecewiseSEM (v.2.12). I used a very simple model structure that is  similar to the example in the piecewiseSEM description. Unfortunatley, once I execute the "as.psem" function I get the error "Error in `[.data.frame`(x$data, , vars) : undefined columns selected" . This souns like a simple error message. Yet, I checked my data and the model structure several times and I can't figure out why the error appears. Does anybody know why I still get the error? I posted a simple code example and the data set that goes with it below.
Many thanks in advance
Michi
 
CODE:
data2$Year<-as.factor(data2$Year)
data2$Drought<-as.factor(data2$Drought)
data2$Stratum<-as.factor(data2$Stratum)
mod1x<-lmer(N_pc~Stratum:Drought+Year:Drought+(1|Tree.ID),data2)

mod11a<-glmer(cbind(branch_suck_Yes,branch_suck_No)~N_pc+(1|Tree.ID),
              data=data2, family = binomial(link = "logit"))
modlist = list(
  mod1x, mod11a)
model<-as.psem(modlist)#Error: Error in `[.data.frame`(x$data, , vars) : undefined columns selected

model<-psem(modlist, data2)
coefs(modlist, data2, standardize = "none", intercept = FALSE)
model<-psem(mod1x, mod11a)
 
 
DATA:
structure(list(N_pc = c(2.39, 2.81, 2.48, 1.83, 1.91, 1.96, 2.32,
2.54, 2.19, 1.97, 2.29, 1.64, 2.03, 1.68, 2.145, 2.08, 1.99,
1.99, 2.83, 2.83, 2.91, 2.61, 2.73, 2.54, 2.87, 1.91, 2.84, 2.74,
2.87, 2.6, 2.12, 2.64, 2.46, 1.83, 2.06, 2.77, 2.41, 2.74, 2.83,
2.51, 2.79, 2.66, 2.44, 2.26, 2.85, 2.39, 2.52, 2.13, 2.63, 2,
2.43, 2.36, 2.98, 2.28, 2.12, 2.2, 2.54, 1.28, 2.57, 2.17, 2.32,
2.41, 3.11, 2.591, 2.77, 2.53, 2.67, 2.45, 2.5, 2.52, 2.9, 3.03,
2.83, 2.52, 2.57, 2.62, 2.82, 2.62, 2.98, 3.01, 2.33, 2.11, 2.68,
2.74, 2.53, 2.43), Stratum = structure(c(1L, 1L, 1L, 1L, 1L,
1L, 1L, 2L, 1L, 2L, 2L, 1L, 2L, 1L, 1L, 2L, 2L, 1L, 1L, 2L, 1L,
2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 1L, 2L,
1L, 2L, 1L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L,
2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L,
2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L,
2L), .Label = c("shade", "sun"), class = "factor"), Drought = structure(c(1L,
2L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 1L,
1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
1L, 1L, 1L, 1L, 1L), .Label = c("no", "yes"), class = "factor"),
Year = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
2L), .Label = c("1", "2"), class = "factor"), Tree.ID = structure(c(2L,
15L, 19L, 21L, 22L, 23L, 25L, 28L, 29L, 29L, 30L, 31L, 32L,
33L, 34L, 34L, 35L, 36L, 1L, 1L, 2L, 2L, 3L, 3L, 4L, 4L,
5L, 5L, 6L, 6L, 7L, 7L, 8L, 8L, 9L, 10L, 10L, 11L, 11L, 12L,
13L, 13L, 14L, 14L, 15L, 15L, 16L, 16L, 17L, 17L, 18L, 18L,
19L, 19L, 20L, 20L, 21L, 21L, 22L, 22L, 23L, 23L, 24L, 24L,
25L, 25L, 26L, 26L, 27L, 27L, 28L, 28L, 29L, 29L, 32L, 32L,
33L, 33L, 34L, 34L, 35L, 35L, 36L, 36L, 37L, 37L), .Label = c("102_6",
"102_7", "102_8", "113_2", "113_4", "113_5", "114_7", "114_8",
"114_9", "116_6", "116_7", "116_9", "122_3", "122_5", "132_3",
"132_4", "132_5", "242_2", "242_4", "242_5", "243_1", "243_2",
"243_4", "245_1", "245_2", "245_5", "251_10", "251_8", "251_9",
"253_7", "253_8", "254_6", "254_7", "254_8", "267_10", "267_6",
"267_8"), class = "factor"), branch_suck_Yes = c(2L, 3L,
1L, 6L, 6L, 5L, 4L, 8L, 2L, 2L, 2L, 48L, 3L, 22L, 14L, 2L,
1L, 1L, 27L, 25L, 16L, 13L, 31L, 18L, 31L, 2L, 25L, 16L,
36L, 21L, 8L, 23L, 13L, 11L, 7L, 35L, 7L, 17L, 4L, 40L, 48L,
17L, 16L, 10L, 34L, 6L, 46L, 7L, 26L, 12L, 24L, 27L, 31L,
25L, 34L, 21L, 44L, 23L, 40L, 30L, 25L, 18L, 35L, 10L, 6L,
10L, 29L, 5L, 24L, 16L, 19L, 11L, 21L, 10L, 18L, 18L, 42L,
33L, 16L, 31L, 16L, 38L, 37L, 28L, 9L, 35L), branch_suck_No = c(48L,
47L, 49L, 44L, 44L, 45L, 46L, 42L, 48L, 48L, 48L, 2L, 47L,
28L, 36L, 48L, 49L, 49L, 23L, 25L, 34L, 37L, 19L, 32L, 19L,
48L, 25L, 34L, 14L, 29L, 42L, 27L, 37L, 39L, 43L, 15L, 43L,
33L, 46L, 10L, 2L, 33L, 34L, 40L, 16L, 44L, 4L, 43L, 24L,
38L, 26L, 23L, 19L, 25L, 16L, 29L, 6L, 27L, 10L, 20L, 25L,
32L, 15L, 40L, 44L, 40L, 21L, 45L, 26L, 34L, 31L, 39L, 29L,
40L, 32L, 32L, 8L, 17L, 34L, 19L, 34L, 12L, 13L, 22L, 41L,
15L)), row.names = c(3L, 43L, 51L, 55L, 57L, 59L, 63L, 76L,
77L, 78L, 80L, 81L, 86L, 87L, 89L, 90L, 92L, 93L, 97L, 98L, 99L,
100L, 101L, 102L, 103L, 104L, 105L, 106L, 107L, 108L, 109L, 110L,
111L, 112L, 113L, 115L, 116L, 117L, 118L, 119L, 121L, 122L, 123L,
124L, 125L, 126L, 127L, 128L, 129L, 130L, 131L, 132L, 133L, 134L,
135L, 136L, 137L, 138L, 139L, 140L, 141L, 142L, 143L, 144L, 145L,
146L, 147L, 148L, 149L, 150L, 151L, 152L, 153L, 154L, 155L, 156L,
157L, 158L, 159L, 160L, 161L, 162L, 163L, 164L, 165L, 166L), na.action = structure(c(`1` = 1L,
`2` = 2L, `4` = 4L, `5` = 5L, `6` = 6L, `7` = 7L, `8` = 8L, `9` = 9L,
`10` = 10L, `11` = 11L, `12` = 12L, `13` = 13L, `14` = 14L, `15` = 15L,
`16` = 16L, `17` = 17L, `18` = 18L, `19` = 19L, `20` = 20L, `21` = 21L,
`22` = 22L, `23` = 23L, `24` = 24L, `25` = 25L, `26` = 26L, `27` = 27L,
`28` = 28L, `29` = 29L, `30` = 30L, `31` = 31L, `32` = 32L, `33` = 33L,
`34` = 34L, `35` = 35L, `36` = 36L, `37` = 37L, `38` = 38L, `39` = 39L,
`40` = 40L, `41` = 41L, `42` = 42L, `44` = 44L, `45` = 45L, `46` = 46L,
`47` = 47L, `48` = 48L, `49` = 49L, `50` = 50L, `52` = 52L, `53` = 53L,
`54` = 54L, `56` = 56L, `58` = 58L, `60` = 60L, `61` = 61L, `62` = 62L,
`64` = 64L, `65` = 65L, `66` = 66L, `67` = 67L, `68` = 68L, `69` = 69L,
`70` = 70L, `71` = 71L, `72` = 72L, `73` = 73L, `74` = 74L, `75` = 75L,
`79` = 79L, `82` = 82L, `83` = 83L, `84` = 84L, `85` = 85L, `88` = 88L,
`91` = 91L, `94` = 94L, `95` = 95L, `96` = 96L, `114` = 114L,
`120` = 120L), class = "omit"), class = "data.frame")


From |@go@g|ne @end|ng |rom @jd@e@  Tue Nov 15 23:19:38 2022
From: |@go@g|ne @end|ng |rom @jd@e@ (Iago)
Date: Tue, 15 Nov 2022 23:19:38 +0100
Subject: [R] 
 Rare behaviour for nlme::reStruct example and question about
 ?lmeObject
In-Reply-To: <CAGxFJbShFmWJVv61q2pdEeCuENtpgSGPYr8sYqTXYgg5C4rMxQ@mail.gmail.com>
References: <AM6PR02MB44232C6D8D918F8C9AC136F394049@AM6PR02MB4423.eurprd02.prod.outlook.com>
 <CAGxFJbShFmWJVv61q2pdEeCuENtpgSGPYr8sYqTXYgg5C4rMxQ@mail.gmail.com>
Message-ID: <8fb0fcda-31ff-6d48-1539-24e6d503968a@sjd.es>

Dear Bert and all other "helpers",


I agree that not all of you are developers. If I look at the DESCRIPTION 
of the nlme package I can see the next:

    Contact: see 'MailingList'

    BugReports: https://bugs.r-project.org
    MailingList: R-help at r-project.org

    Maintainer: R Core Team <R-core at R-project.org>

As I do not have bugs.r-project account, first I emailed to 
R-core at R-project.org, from where I got the next answer

    "Non-members are typically*NOT*  allowed to post messages to this
    private developers' list. Please use an appropriate mailing list (from
    http://www.r-project.org/mail.html). For R packages, use
    maintainer("<pkg>") in R (and if that is R-core at .., use the R-help
    address).

    --> i.e. for nlme  use  R-help

by Martin Maechler. Therefore, I used R-help.

Best,

Iago


On 15/11/2022 16:20, Bert Gunter wrote:
> 1. Not developers, helpers (though there may be some developers among 
> us, too). Ergo, we don't make changes to code or man pages either.
>
> 2. If no satisfactory reply here, R-Sig-mixed-models is where you 
> should post. And post there first for mixed models questions in future.
>
> Cheers,
> Bert
>
>
> On Mon, Nov 14, 2022 at 11:24 PM IAGO GIN? V?ZQUEZ <iago.gine at sjd.es> 
> wrote:
>
>     Dear developers,
>
>     When I run the example code in the help of reStruct, I get
>
>
>     > library(nlme)
>     > rs1 <- reStruct(list(Dog = ~day, Side = ~1), data = Pixel)
>     > rs1
>     Uninitialized random effects structure
>     > str(rs1)
>     List of 2
>     ?$ Side:Error in pdMatrix.pdSymm(x) :
>     ? cannot extract matrix from an uninitialized object
>
>
>     Is it expected?
>
>     In addition to that I would like to ask if shouldn't be `terms`
>     documented in `?lmeObject`.
>
>
>     Kind regards,
>
>     Iago
>
>
>
>
>     ? ? ? ? [[alternative HTML version deleted]]
>
>     ______________________________________________
>     R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>     https://stat.ethz.ch/mailman/listinfo/r-help
>     PLEASE do read the posting guide
>     http://www.R-project.org/posting-guide.html
>     <http://www.R-project.org/posting-guide.html>
>     and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @vi@e@gross m@iii@g oii gm@ii@com  Tue Nov 15 23:54:07 2022
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Tue, 15 Nov 2022 17:54:07 -0500
Subject: [R] add specific fields in for loop
In-Reply-To: <383846966.334734.1668538368721@mail.yahoo.com>
References: <984984759.289705.1668529107147.ref@mail.yahoo.com>
 <984984759.289705.1668529107147@mail.yahoo.com>
 <004201d8f916$d2d2b290$787817b0$@gmail.com>
 <383846966.334734.1668538368721@mail.yahoo.com>
Message-ID: <003f01d8f945$2b515600$81f40200$@gmail.com>

Kai,

 

I have read all the messages exchanged so far and what I have not yet seen is a clear explanation of what you want to do. I mean not as R code that may have mistakes, but as what your goal is.

 

Your code below was a gigantic set of nested if statements that is not trivial to parse. 

 

So help explain a bit or you may keep getting great solutions to problems you are not trying to solve.

 

You have a data.frame you called ?df? that seems to currently have no relation to the rest of the code. You do seem to have a data.frame called ?try2.un? instead so I assume you want an answer using that.

 

Your code seems to want to make a new column called ?ab2? by using info currently held in columns ?data1? through ?data5? but you want a solution that is more general. First I want to see what your code does do and make sure that is what you want.

 

Your code starts like this (see below for the complete code):

 

  ifelse(grepl("ab2",try2.un$data1), try2.un$data1, # else clauses below

 

The above uses the logical version of grep, lgrep, and it seems that you are asking for all of the items in the column vector data1 to be searched for the unanchored presence of the string ?ab2? and the first result is a vector of TRUE/FALSE. For those that are TRUE, meaning ?ab2? was found, you want the actual result copied into the new column named ?ab2? and for those marked as FALSE, continue with the next code line. I note you do not show any initialization for the new column to something like NA and depend on the final nested ifelse to set that as a default.

 

If what I wrote above is correct, then for any rows where data1 did not contain the specified text, you now search in data2:

    

         ifelse(grepl("ab2",try2.un$data2), try2.un$data2,

 

In this design, anything found in multiple places will only match the first place found. Anything not found anywhere ends up with an NA.

 

So in English, IFF the above is what you want, you want a search across all columns for the designated search string of ?ab2? but only keep the first.

 

To make a loop I suggest something like this:

 

  try2.un$ab2 <- NA

 

Then choose what columns you want but do NOT choose ?ab2?. If you want ALL other columns, then BEFORE the above line, save the current names as in:

 

  loop.cols <- names(try2.un)

 

If you only want a subset, use some code that narrows down what you want. You have not told us enough to make a suggestion. The point remains to have a variable (vector) that can be used in a loop that holds exactly the columns you want and in the right order. Unless I read you wrong, the order MATTERS as the first match wins and if the columns have different matches like ?I am ab2? and ?ab2 was my mother? you get the idea that you are keeping the exact text of the first match.

 

If my guess of your need was wrong, the rest is not going to make much sense.

 

So here is a loop:

 

  for (i in loop.cols) { print(i)}

 

I used ?i? because you seem to like it. I prefer a more useful name. All the above does is print the names so you see if what you are doing makes sense.

 

Now rewrite that to do what you want and find a way to only update an NA value. You may want to think about what that means.

 

One idea is 

  try2.un$ab2 <-

    ifelse(is.na(try2.un$ab2) && grepl("ab2",try2.un[i]), 

           try2.un[i], 

           try2.un$ab2)

 

The above, which I have not tried, would be run in a loop and checks both whether an entry is still NA, and whether the current ith column has what you want. If both are true, it selects the value for those entries/rows from the column being looped on. If not, it retains the current non-NA setting from an earlier iteration of the loop.

 

You need to flesh this out for yourself as I am not supplying complete and tested code.

 

But note this is a very different meaning that some of us guessed and may still not be what you want. There are many such questions about doing something the same to each of the selected columns in a data.frame as in replacing all values of 999 with NA. In many such cases the order does not matter. Other such questions may want to check if any of the columns matches and simply return TRUE/FALSE in a new column or externally. Some of such requests are potentially simpler and easier. 

 

So you need to be very clear on what you want. I am going by what I think your sample code DOES and am not too sure it is exactly what you want.

 

 

From: Kai Yang <yangkai9999 at yahoo.com> 
Sent: Tuesday, November 15, 2022 1:53 PM
To: 'R-help Mailing List' <r-help at r-project.org>; avi.e.gross at gmail.com
Subject: Re: [R] add specific fields in for loop

 

Hello Bert and Avi,

Sorry, it is typo. it should be:

 

for (i in colnames(df)){
  ......
}

 

below is the code I'm currently using

 

try2.un$ab2 <-

 

  ifelse(grepl("ab2",try2.un$data1), try2.un$data1,

 

         ifelse(grepl("ab2",try2.un$data2), try2.un$data2,

 

                ifelse(grepl("ab2",try2.un$data3), try2.un$data3,

 

                       ifelse(grepl("ab2",try2.un$data4), try2.un$data4,

 

                              ifelse(grepl("ab2",try2.un$data5), try2.un$data5,NA

 

                              ) ) ) ) )

 

 

As you can see, it uses 5 fields (data1 -- 5 ) in ifelse function. I want to turn it to for loop, because the number of data(s) fields is dynamic. In this sample is 5, But it maybe more than 15 in some of situation. So, I want use loop to solve it and avoid to write those many ifelse statement. Also, in try2.un data frame, there are many other fields that I don't need to use in the loop. 

 

I'm not sure if the loop is a correct solution. But I'm willing to learn any more suggestion from you.

 

Thanks,

 

Kai

 

On Tuesday, November 15, 2022 at 09:23:03 AM PST, avi.e.gross at gmail.com <mailto:avi.e.gross at gmail.com>  <avi.e.gross at gmail.com <mailto:avi.e.gross at gmail.com> > wrote: 

 

 

Kai,

 

As Bert pointed out, it may not be clear what you want.

 

As a GUESS, you have some arbitrary data.frame object with multiple columns and you want to do something on selected columns. Consider changing your idea to be in several stages for simplicity and then optionally later rewriting it.

 

So step 1 is to get a vector of column names. The normal way to do this in base R is not with a function called columns(df) but colnames(df) ...

 

Step 2 is to use one of many techniques that take that vector of names and select the ones you want to keep. In base R there are many ways to do that including using regular expressions as in the "grep" family of functions. You may end up with a new vector of names perhaps shorter or in a different order.

 

Step 3 is to use those names in your loop. If you want say to convert a column from character to numeric, and your loop index is "current" you might write something like:

    df[current] <- as.numeric(df[current])

 

There are many ways and it depends on what exactly you want to do. There are packages designed to make some of these things fairly simple, such as dplyr where you can ask to match names that start or end a certain way or that are of certain types.

 

Avi

 

-----Original Message-----

From: R-help <r-help-bounces at r-project.org <mailto:r-help-bounces at r-project.org> > On Behalf Of Kai Yang via R-help

Sent: Tuesday, November 15, 2022 11:18 AM

To: R-help Mailing List <r-help at r-project.org <mailto:r-help at r-project.org> >

Subject: [R] add specific fields in for loop

 

Hi Team,

I can write a for loop like this:

for (i in columns(df)){

  ......

}

 

But it will working on all column in dataframe df. If I want to work on some of specific fields (say: the fields' name content 'date'), how should I modify the for loop? I changed the code below, but it doesn't work.

for (i in columns(df) %in% 'date' ){

  .....

}

 

 

Thank you,

Kai

 

    [[alternative HTML version deleted]]

 

______________________________________________

R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help

PLEASE do read the posting guide http://www.R-project.org/posting-guide.html

and provide commented, minimal, self-contained, reproducible code.



______________________________________________

R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see

https://stat.ethz.ch/mailman/listinfo/r-help

PLEASE do read the posting guide http://www.R-project.org/posting-guide.html

and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From @kw@|mmo @end|ng |rom gm@||@com  Wed Nov 16 00:01:55 2022
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Tue, 15 Nov 2022 18:01:55 -0500
Subject: [R] 
 Rare behaviour for nlme::reStruct example and question about
 ?lmeObject
In-Reply-To: <8fb0fcda-31ff-6d48-1539-24e6d503968a@sjd.es>
References: <AM6PR02MB44232C6D8D918F8C9AC136F394049@AM6PR02MB4423.eurprd02.prod.outlook.com>
 <CAGxFJbShFmWJVv61q2pdEeCuENtpgSGPYr8sYqTXYgg5C4rMxQ@mail.gmail.com>
 <8fb0fcda-31ff-6d48-1539-24e6d503968a@sjd.es>
Message-ID: <CAPcHnpSVOdiYX+iwE8ypewcxnyprZm9vqnaNRKoQPnn8RnnETw@mail.gmail.com>

This seems to be a bug. I tried creating this function in the global
environment:

str.pdMat <- function (object, ...)
{
    if (nlme::isInitialized(object)) {
        NextMethod()
    }
    else {
        cat(" Uninitialized positive definite matrix structure of class ",
            class(object)[1], ".\n", sep = "")
    }
}

and the code you sent works:

> library(nlme)
> rs1 <- reStruct(list(Dog = ~day, Side = ~1), data = Pixel)
> rs1
Uninitialized random effects structure
> str(rs1)
List of 2
 $ Side: Uninitialized positive definite matrix structure of class pdLogChol.
 $ Dog : Uninitialized positive definite matrix structure of class pdLogChol.
 - attr(*, "settings")= int [1:5] 0 1 0 4 4
 - attr(*, "class")= chr "reStruct"
>

I'll suggest adding it, hopefully it will appear in the next update.
In the meantime, you could add the function to your Rprofile,
something like:

con <- file("~/.Rprofile", "a")
writeLines(r"(str.pdMat <- function (object, ...)
{
    if (nlme::isInitialized(object)) {
        NextMethod()
    }
    else {
        cat(" Uninitialized positive definite matrix structure of class ",
            class(object)[1], ".\n", sep = "")
    }
})", con)
close(con)

so that every time you start a new R session, this function is added
to your global environment.

On Tue, Nov 15, 2022 at 5:20 PM Iago <iago.gine at sjd.es> wrote:
>
> Dear Bert and all other "helpers",
>
>
> I agree that not all of you are developers. If I look at the DESCRIPTION
> of the nlme package I can see the next:
>
>     Contact: see 'MailingList'
>
>     BugReports: https://bugs.r-project.org
>     MailingList: R-help at r-project.org
>
>     Maintainer: R Core Team <R-core at R-project.org>
>
> As I do not have bugs.r-project account, first I emailed to
> R-core at R-project.org, from where I got the next answer
>
>     "Non-members are typically*NOT*  allowed to post messages to this
>     private developers' list. Please use an appropriate mailing list (from
>     http://www.r-project.org/mail.html). For R packages, use
>     maintainer("<pkg>") in R (and if that is R-core at .., use the R-help
>     address).
>
>     --> i.e. for nlme  use  R-help
>
> by Martin Maechler. Therefore, I used R-help.
>
> Best,
>
> Iago
>
>
> On 15/11/2022 16:20, Bert Gunter wrote:
> > 1. Not developers, helpers (though there may be some developers among
> > us, too). Ergo, we don't make changes to code or man pages either.
> >
> > 2. If no satisfactory reply here, R-Sig-mixed-models is where you
> > should post. And post there first for mixed models questions in future.
> >
> > Cheers,
> > Bert
> >
> >
> > On Mon, Nov 14, 2022 at 11:24 PM IAGO GIN? V?ZQUEZ <iago.gine at sjd.es>
> > wrote:
> >
> >     Dear developers,
> >
> >     When I run the example code in the help of reStruct, I get
> >
> >
> >     > library(nlme)
> >     > rs1 <- reStruct(list(Dog = ~day, Side = ~1), data = Pixel)
> >     > rs1
> >     Uninitialized random effects structure
> >     > str(rs1)
> >     List of 2
> >      $ Side:Error in pdMatrix.pdSymm(x) :
> >       cannot extract matrix from an uninitialized object
> >
> >
> >     Is it expected?
> >
> >     In addition to that I would like to ask if shouldn't be `terms`
> >     documented in `?lmeObject`.
> >
> >
> >     Kind regards,
> >
> >     Iago
> >
> >
> >
> >
> >             [[alternative HTML version deleted]]
> >
> >     ______________________________________________
> >     R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >     https://stat.ethz.ch/mailman/listinfo/r-help
> >     PLEASE do read the posting guide
> >     http://www.R-project.org/posting-guide.html
> >     <http://www.R-project.org/posting-guide.html>
> >     and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From y@ngk@|9999 @end|ng |rom y@hoo@com  Wed Nov 16 00:05:50 2022
From: y@ngk@|9999 @end|ng |rom y@hoo@com (Kai Yang)
Date: Tue, 15 Nov 2022 23:05:50 +0000 (UTC)
Subject: [R] add specific fields in for loop
In-Reply-To: <003f01d8f945$2b515600$81f40200$@gmail.com>
References: <984984759.289705.1668529107147.ref@mail.yahoo.com>
 <984984759.289705.1668529107147@mail.yahoo.com>
 <004201d8f916$d2d2b290$787817b0$@gmail.com>
 <383846966.334734.1668538368721@mail.yahoo.com>
 <003f01d8f945$2b515600$81f40200$@gmail.com>
Message-ID: <648293241.398442.1668553550104@mail.yahoo.com>

 Hi Avi,
Thank you spent time for my question. Your explanations is very clear and abundant. I use R for a shot time and still keep learning. So, my question may not very clear for your guys. sorry about that.
Thank you again,

Kai    On Tuesday, November 15, 2022 at 02:54:38 PM PST, avi.e.gross at gmail.com <avi.e.gross at gmail.com> wrote:  
 
 Kai,

 

I have read all the messages exchanged so far and what I have not yet seen is a clear explanation of what you want to do. I mean not as R code that may have mistakes, but as what your goal is.

 

Your code below was a gigantic set of nested if statements that is not trivial to parse. 

 

So help explain a bit or you may keep getting great solutions to problems you are not trying to solve.

 

You have a data.frame you called ?df? that seems to currently have no relation to the rest of the code. You do seem to have a data.frame called ?try2.un? instead so I assume you want an answer using that.

 

Your code seems to want to make a new column called ?ab2? by using info currently held in columns ?data1? through ?data5? but you want a solution that is more general. First I want to see what your code does do and make sure that is what you want.

 

Your code starts like this (see below for the complete code):

 

? ifelse(grepl("ab2",try2.un$data1), try2.un$data1, # else clauses below

 

The above uses the logical version of grep, lgrep, and it seems that you are asking for all of the items in the column vector data1 to be searched for the unanchored presence of the string ?ab2? and the first result is a vector of TRUE/FALSE. For those that are TRUE, meaning ?ab2? was found, you want the actual result copied into the new column named ?ab2? and for those marked as FALSE, continue with the next code line. I note you do not show any initialization for the new column to something like NA and depend on the final nested ifelse to set that as a default.

 

If what I wrote above is correct, then for any rows where data1 did not contain the specified text, you now search in data2:

? ? 

? ? ? ? ifelse(grepl("ab2",try2.un$data2), try2.un$data2,

 

In this design, anything found in multiple places will only match the first place found. Anything not found anywhere ends up with an NA.

 

So in English, IFF the above is what you want, you want a search across all columns for the designated search string of ?ab2? but only keep the first.

 

To make a loop I suggest something like this:

 

? try2.un$ab2 <- NA

 

Then choose what columns you want but do NOT choose ?ab2?. If you want ALL other columns, then BEFORE the above line, save the current names as in:

 

? loop.cols <- names(try2.un)

 

If you only want a subset, use some code that narrows down what you want. You have not told us enough to make a suggestion. The point remains to have a variable (vector) that can be used in a loop that holds exactly the columns you want and in the right order. Unless I read you wrong, the order MATTERS as the first match wins and if the columns have different matches like ?I am ab2? and ?ab2 was my mother? you get the idea that you are keeping the exact text of the first match.

 

If my guess of your need was wrong, the rest is not going to make much sense.

 

So here is a loop:

 

? for (i in loop.cols) { print(i)}

 

I used ?i? because you seem to like it. I prefer a more useful name. All the above does is print the names so you see if what you are doing makes sense.

 

Now rewrite that to do what you want and find a way to only update an NA value. You may want to think about what that means.

 

One idea is 

? try2.un$ab2 <-

? ? ifelse(is.na(try2.un$ab2) && grepl("ab2",try2.un[i]), 

? ? ? ? ? try2.un[i], 

? ? ? ? ? try2.un$ab2)

 

The above, which I have not tried, would be run in a loop and checks both whether an entry is still NA, and whether the current ith column has what you want. If both are true, it selects the value for those entries/rows from the column being looped on. If not, it retains the current non-NA setting from an earlier iteration of the loop.

 

You need to flesh this out for yourself as I am not supplying complete and tested code.

 

But note this is a very different meaning that some of us guessed and may still not be what you want. There are many such questions about doing something the same to each of the selected columns in a data.frame as in replacing all values of 999 with NA. In many such cases the order does not matter. Other such questions may want to check if any of the columns matches and simply return TRUE/FALSE in a new column or externally. Some of such requests are potentially simpler and easier. 

 

So you need to be very clear on what you want. I am going by what I think your sample code DOES and am not too sure it is exactly what you want.

 

 

From: Kai Yang <yangkai9999 at yahoo.com> 
Sent: Tuesday, November 15, 2022 1:53 PM
To: 'R-help Mailing List' <r-help at r-project.org>; avi.e.gross at gmail.com
Subject: Re: [R] add specific fields in for loop

 

Hello Bert and Avi,

Sorry, it is typo. it should be:

 

for (i in colnames(df)){
? ......
}

 

below is the code I'm currently using

 

try2.un$ab2 <-

 

? ifelse(grepl("ab2",try2.un$data1), try2.un$data1,

 

? ? ? ? ifelse(grepl("ab2",try2.un$data2), try2.un$data2,

 

? ? ? ? ? ? ? ? ifelse(grepl("ab2",try2.un$data3), try2.un$data3,

 

? ? ? ? ? ? ? ? ? ? ? ifelse(grepl("ab2",try2.un$data4), try2.un$data4,

 

? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ifelse(grepl("ab2",try2.un$data5), try2.un$data5,NA

 

? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ) ) ) ) )

 

 

As you can see, it uses 5 fields (data1 -- 5 ) in ifelse function. I want to turn it to for loop, because the number of data(s) fields is dynamic. In this sample is 5, But it maybe more than 15 in some of situation. So, I want use loop to solve it and avoid to write those many ifelse statement. Also, in try2.un data frame, there are many other fields that I don't need to use in the loop. 

 

I'm not sure if the loop is a correct solution. But I'm willing to learn any more suggestion from you.

 

Thanks,

 

Kai

 

On Tuesday, November 15, 2022 at 09:23:03 AM PST, avi.e.gross at gmail.com <mailto:avi.e.gross at gmail.com>? <avi.e.gross at gmail.com <mailto:avi.e.gross at gmail.com> > wrote: 

 

 

Kai,

 

As Bert pointed out, it may not be clear what you want.

 

As a GUESS, you have some arbitrary data.frame object with multiple columns and you want to do something on selected columns. Consider changing your idea to be in several stages for simplicity and then optionally later rewriting it.

 

So step 1 is to get a vector of column names. The normal way to do this in base R is not with a function called columns(df) but colnames(df) ...

 

Step 2 is to use one of many techniques that take that vector of names and select the ones you want to keep. In base R there are many ways to do that including using regular expressions as in the "grep" family of functions. You may end up with a new vector of names perhaps shorter or in a different order.

 

Step 3 is to use those names in your loop. If you want say to convert a column from character to numeric, and your loop index is "current" you might write something like:

? ? df[current] <- as.numeric(df[current])

 

There are many ways and it depends on what exactly you want to do. There are packages designed to make some of these things fairly simple, such as dplyr where you can ask to match names that start or end a certain way or that are of certain types.

 

Avi

 

-----Original Message-----

From: R-help <r-help-bounces at r-project.org <mailto:r-help-bounces at r-project.org> > On Behalf Of Kai Yang via R-help

Sent: Tuesday, November 15, 2022 11:18 AM

To: R-help Mailing List <r-help at r-project.org <mailto:r-help at r-project.org> >

Subject: [R] add specific fields in for loop

 

Hi Team,

I can write a for loop like this:

for (i in columns(df)){

? ......

}

 

But it will working on all column in dataframe df. If I want to work on some of specific fields (say: the fields' name content 'date'), how should I modify the for loop? I changed the code below, but it doesn't work.

for (i in columns(df) %in% 'date' ){

? .....

}

 

 

Thank you,

Kai

 

? ? [[alternative HTML version deleted]]

 

______________________________________________

R-help at r-project.org <mailto:R-help at r-project.org>? mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help

PLEASE do read the posting guide http://www.R-project.org/posting-guide.html

and provide commented, minimal, self-contained, reproducible code.



______________________________________________

R-help at r-project.org <mailto:R-help at r-project.org>? mailing list -- To UNSUBSCRIBE and more, see

https://stat.ethz.ch/mailman/listinfo/r-help

PLEASE do read the posting guide http://www.R-project.org/posting-guide.html

and provide commented, minimal, self-contained, reproducible code.


??? [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.
  
	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Nov 16 11:30:49 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 16 Nov 2022 13:30:49 +0300
Subject: [R] Axis scaling for PCA biplot
In-Reply-To: <70ffd30e-7ad8-f1c4-142a-65a6b89bbf91@unibo.it>
References: <70ffd30e-7ad8-f1c4-142a-65a6b89bbf91@unibo.it>
Message-ID: <20221116133049.7c67880f@arachnoid>

? Tue, 15 Nov 2022 12:53:30 +0100
Christian Hennig <christian.hennig at unibo.it> ?????:

> The default value of scale seems to be 1, but then (1-scale) is zero
> so I'd assume data to be unscaled, but that should have reproduced
> the "plot" scale, shouldn't it?

I think this might be a documentation error. What actually happens
inside biplot.princomp is a bit different [1]:

   lam <- x$sdev[choices]
   n <- x$n.obs %||% 1
   lam <- lam * sqrt(n)
   
   if(scale != 0) lam <- lam^scale else lam <- 1
   
   biplot.default(t(t(scores[, choices]) / lam),
		   t(t(x$loadings[, choices]) * lam), ...)

Every score is divided by standard deviations (square roots of the
eigenvalues of the covariance matrix) and the square root of the number
of samples to the power of `scale`, while the loadings are multiplied
by the same numbers.

I am not sure why the singular values have to be multiplied by sqrt(n)
(the same thing happens in biplot.prcomp), but other than that, I think
that the documentation should say "the observations are scaled by
|lambda ^ -scale|", not (1-scale).

Passing scale = 0, on the other hand, should reproduce the "plot" scale.

-- 
Best regards,
Ivan

[1]:
https://github.com/r-devel/r-svn/blob/c5f16db96ad76504893a1070d3b46b4093bb49c4/src/library/stats/R/biplot.R#L80-L95


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Nov 16 11:57:46 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 16 Nov 2022 13:57:46 +0300
Subject: [R] picewiseSEM undefined columns selected
In-Reply-To: <001d01d8f938$82c2d100$88487300$@gmx.ch>
References: <001d01d8f938$82c2d100$88487300$@gmx.ch>
Message-ID: <20221116135746.3145121f@arachnoid>

Hello Michael and thank you for providing a small reproducible example!

? Tue, 15 Nov 2022 22:23:30 +0100
"Michael Eisenring" <michael.eisenring at gmx.ch> ?????:

> model<-as.psem(modlist)#Error: Error in `[.data.frame`(x$data, ,
> vars) : undefined columns selected

If you set options(error = recover) before reproducing the error, you
can use the debugger to see the values of both x$data and vars at the
moment of crash. See ?recover, ?browser and the free book "R Inferno"
for more information.

I've taken a look, and I think that it's a bug in some of the functions
called by the internal function piecewiseSEM:::formatpsem. The internal
function GetData() returns a data.frame with column names of
c("Stratum", "Drought", "Year", "cbind(branch_suck_Yes,
branch_suck_No)",  "N_pc", "Tree.ID"), which gets stored in x$data,
after which the function tries to extract variables named c("N_pc",
"branch_suck_Yes,branch_suck_No") from x$data.

I think you'll have to report this to the maintainer.

-- 
Best regards,
Ivan


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Thu Nov 17 09:16:04 2022
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Thu, 17 Nov 2022 09:16:04 +0100
Subject: [R] 
 Rare behaviour for nlme::reStruct example and question about
 ?lmeObject
In-Reply-To: <CAPcHnpSVOdiYX+iwE8ypewcxnyprZm9vqnaNRKoQPnn8RnnETw@mail.gmail.com>
References: <AM6PR02MB44232C6D8D918F8C9AC136F394049@AM6PR02MB4423.eurprd02.prod.outlook.com>
 <CAGxFJbShFmWJVv61q2pdEeCuENtpgSGPYr8sYqTXYgg5C4rMxQ@mail.gmail.com>
 <8fb0fcda-31ff-6d48-1539-24e6d503968a@sjd.es>
 <CAPcHnpSVOdiYX+iwE8ypewcxnyprZm9vqnaNRKoQPnn8RnnETw@mail.gmail.com>
Message-ID: <25461.60868.778802.975454@stat.math.ethz.ch>

>>>>> Andrew Simmons 
>>>>>     on Tue, 15 Nov 2022 18:01:55 -0500 writes:

   > This seems to be a bug. I tried creating this function in the global
   > environment:

   > str.pdMat <- function (object, ...)
   > {
   >     if (nlme::isInitialized(object)) {
   >         NextMethod()
   >     }
   >     else {
   >         cat(" Uninitialized positive definite matrix structure of class ",
   >             class(object)[1], ".\n", sep = "")
   >     }
   > }

Thank you, Iago, for the question and Andrew for your proposal.

Yes, I agree that something like the above -- which is derived from the
print.pdMat method --  should be added to nlme and will do this
myself.

   > and the code you sent works:
   > 
   > > library(nlme)
   > > rs1 <- reStruct(list(Dog = ~day, Side = ~1), data = Pixel)
   > > rs1
   > Uninitialized random effects structure
   > > str(rs1)
   > List of 2
   >  $ Side: Uninitialized positive definite matrix structure of class pdLogChol.
   >  $ Dog : Uninitialized positive definite matrix structure of class pdLogChol.
   >  - attr(*, "settings")= int [1:5] 0 1 0 4 4
   >  - attr(*, "class")= chr "reStruct"

In addition, Iago, asked

   > > >     In addition to that I would like to ask if shouldn't be `terms`
   > > >     documented in `?lmeObject`.

I probably have misunderstood the question completely (?)

I've now searched through ?lmeObject 
which was written under the assumption that the reader has
already read (parts of) the  ?lme  help page.

Now "terms" only appears in  ?lmeObject in this paragraph

   fixDF: a list with components ?X? and ?terms? specifying the
          denominator degrees of freedom for, respectively, t-tests for
          the individual fixed effects and F-tests for the
          fixed-effects terms in the models.

and I don't think that there needs to be more explanation.

(??)

Martin


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Thu Nov 17 10:02:18 2022
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Thu, 17 Nov 2022 10:02:18 +0100
Subject: [R] 
 Rare behaviour for nlme::reStruct example and question about
 ?lmeObject
In-Reply-To: <25461.60868.778802.975454@stat.math.ethz.ch>
References: <AM6PR02MB44232C6D8D918F8C9AC136F394049@AM6PR02MB4423.eurprd02.prod.outlook.com>
 <CAGxFJbShFmWJVv61q2pdEeCuENtpgSGPYr8sYqTXYgg5C4rMxQ@mail.gmail.com>
 <8fb0fcda-31ff-6d48-1539-24e6d503968a@sjd.es>
 <CAPcHnpSVOdiYX+iwE8ypewcxnyprZm9vqnaNRKoQPnn8RnnETw@mail.gmail.com>
 <25461.60868.778802.975454@stat.math.ethz.ch>
Message-ID: <25461.63642.691254.783986@stat.math.ethz.ch>

>>>>> Martin Maechler 
>>>>>     on Thu, 17 Nov 2022 09:16:04 +0100 writes:

>>>>> Andrew Simmons 
>>>>>     on Tue, 15 Nov 2022 18:01:55 -0500 writes:

    >> This seems to be a bug. I tried creating this function in the global
    >> environment:

    >> str.pdMat <- function (object, ...)
    >> {
    >> if (nlme::isInitialized(object)) {
    >> NextMethod()
    >> }
    >> else {
    >> cat(" Uninitialized positive definite matrix structure of class ",
    >> class(object)[1], ".\n", sep = "")
    >> }
    >> }

    > Thank you, Iago, for the question and Andrew for your proposal.

    > Yes, I agree that something like the above -- which is derived from the
    > print.pdMat method --  should be added to nlme and will do this
    > myself.

My current working proposal gives this:

> (rs <- reStruct(list(Dog = ~day, Side = ~1), data = Pixel))
Uninitialized random effects structure
> str(rs)
List of 2
 $ Side:Uninitialized 'pdLogChol', 'pdSymm', 'pdMat': ~1
 $ Dog :Uninitialized 'pdLogChol', 'pdSymm', 'pdMat': ~day
 - attr(*, "settings")= int [1:5] 0 1 0 4 4
 - attr(*, "class")= chr "reStruct"
>

Martin


From |@go@g|ne @end|ng |rom @jd@e@  Thu Nov 17 11:53:31 2022
From: |@go@g|ne @end|ng |rom @jd@e@ (Iago)
Date: Thu, 17 Nov 2022 11:53:31 +0100
Subject: [R] 
 Rare behaviour for nlme::reStruct example and question about
 ?lmeObject
In-Reply-To: <25461.60868.778802.975454@stat.math.ethz.ch>
References: <AM6PR02MB44232C6D8D918F8C9AC136F394049@AM6PR02MB4423.eurprd02.prod.outlook.com>
 <CAGxFJbShFmWJVv61q2pdEeCuENtpgSGPYr8sYqTXYgg5C4rMxQ@mail.gmail.com>
 <8fb0fcda-31ff-6d48-1539-24e6d503968a@sjd.es>
 <CAPcHnpSVOdiYX+iwE8ypewcxnyprZm9vqnaNRKoQPnn8RnnETw@mail.gmail.com>
 <25461.60868.778802.975454@stat.math.ethz.ch>
Message-ID: <bcfe9c4c-1efb-08b3-e87d-9e14e3a9776e@sjd.es>

Thank you Martin,


Regarding my question about `terms`, I meant the `terms` component of 
the `lme` output. For example, for

fm1 <- lme(distance ~ age, data = Orthodont)

I can see through str(fm1), the next:

$ terms?????? :Classes 'terms', 'formula'? language distance ~ age
 ? .. ..- attr(*, "variables")= language list(distance, age)
 ? .. ..- attr(*, "factors")= int [1:2, 1] 0 1
 ? .. .. ..- attr(*, "dimnames")=List of 2
 ? .. .. .. ..$ : chr [1:2] "distance" "age"
 ? .. .. .. ..$ : chr "age"
 ? .. ..- attr(*, "term.labels")= chr "age"
 ? .. ..- attr(*, "order")= int 1
 ? .. ..- attr(*, "intercept")= int 1
 ? .. ..- attr(*, "response")= int 1
 ? .. ..- attr(*, ".Environment")=<environment: R_GlobalEnv>
 ? .. ..- attr(*, "predvars")= language list(distance, age)
 ? .. ..- attr(*, "dataClasses")= Named chr [1:2] "numeric" "numeric"
 ? .. .. ..- attr(*, "names")= chr [1:2] "distance" "age"

However, there is no paragraph for this component among those in 
?lmeObject (in the Value section) as there is for fixDF, apVar, call, 
etc.. If not needed, I assume the explanation would be that `terms` does 
not need to be included in a legitimate ?"lme"? object'.


Kind regards,

Iago

On 17/11/2022 09:16, Martin Maechler wrote:
>>>>>> Andrew Simmons
>>>>>>      on Tue, 15 Nov 2022 18:01:55 -0500 writes:
>     > This seems to be a bug. I tried creating this function in the global
>     > environment:
>
>     > str.pdMat <- function (object, ...)
>     > {
>     >     if (nlme::isInitialized(object)) {
>     >         NextMethod()
>     >     }
>     >     else {
>     >         cat(" Uninitialized positive definite matrix structure of class ",
>     >             class(object)[1], ".\n", sep = "")
>     >     }
>     > }
>
> Thank you, Iago, for the question and Andrew for your proposal.
>
> Yes, I agree that something like the above -- which is derived from the
> print.pdMat method --  should be added to nlme and will do this
> myself.
>
>     > and the code you sent works:
>     >
>     > > library(nlme)
>     > > rs1 <- reStruct(list(Dog = ~day, Side = ~1), data = Pixel)
>     > > rs1
>     > Uninitialized random effects structure
>     > > str(rs1)
>     > List of 2
>     >  $ Side: Uninitialized positive definite matrix structure of class pdLogChol.
>     >  $ Dog : Uninitialized positive definite matrix structure of class pdLogChol.
>     >  - attr(*, "settings")= int [1:5] 0 1 0 4 4
>     >  - attr(*, "class")= chr "reStruct"
>
> In addition, Iago, asked
>
>     > > >     In addition to that I would like to ask if shouldn't be `terms`
>     > > >     documented in `?lmeObject`.
>
> I probably have misunderstood the question completely (?)
>
> I've now searched through ?lmeObject
> which was written under the assumption that the reader has
> already read (parts of) the  ?lme  help page.
>
> Now "terms" only appears in  ?lmeObject in this paragraph
>
>     fixDF: a list with components ?X? and ?terms? specifying the
>            denominator degrees of freedom for, respectively, t-tests for
>            the individual fixed effects and F-tests for the
>            fixed-effects terms in the models.
>
> and I don't think that there needs to be more explanation.
>
> (??)
>
> Martin
>
>


From ||@| @end|ng |rom m@||@n|h@gov  Tue Nov 15 17:12:52 2022
From: ||@| @end|ng |rom m@||@n|h@gov (Li, Aiguo (NIH/NCI) [E])
Date: Tue, 15 Nov 2022 16:12:52 +0000
Subject: [R] A question related to extracting peptides from indels for mouse
Message-ID: <1D552FEB-B4E2-4B2D-81E6-D39B32635961@nih.gov>

Dear all,

I need to extract peptides from a long list of indels of mouse for neoantigen analysis.  Does anyone know a tool that will do it?

Thanks,

Anna

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Thu Nov 17 17:48:13 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 17 Nov 2022 08:48:13 -0800
Subject: [R] 
 A question related to extracting peptides from indels for mouse
In-Reply-To: <1D552FEB-B4E2-4B2D-81E6-D39B32635961@nih.gov>
References: <1D552FEB-B4E2-4B2D-81E6-D39B32635961@nih.gov>
Message-ID: <CAGxFJbS10QseTXYy+ejOVRV3dVkOBaLK_Wtd3hgkRXDp4PrBjg@mail.gmail.com>

Probably not here. Better here: https://bioconductor.org/help/

-- Bert

On Thu, Nov 17, 2022 at 6:43 AM Li, Aiguo (NIH/NCI) [E] via R-help <
r-help at r-project.org> wrote:

> Dear all,
>
> I need to extract peptides from a long list of indels of mouse for
> neoantigen analysis.  Does anyone know a tool that will do it?
>
> Thanks,
>
> Anna
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Fri Nov 18 10:45:50 2022
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Fri, 18 Nov 2022 10:45:50 +0100
Subject: [R] 
 Rare behaviour for nlme::reStruct example and question about
 ?lmeObject
In-Reply-To: <bcfe9c4c-1efb-08b3-e87d-9e14e3a9776e@sjd.es>
References: <AM6PR02MB44232C6D8D918F8C9AC136F394049@AM6PR02MB4423.eurprd02.prod.outlook.com>
 <CAGxFJbShFmWJVv61q2pdEeCuENtpgSGPYr8sYqTXYgg5C4rMxQ@mail.gmail.com>
 <8fb0fcda-31ff-6d48-1539-24e6d503968a@sjd.es>
 <CAPcHnpSVOdiYX+iwE8ypewcxnyprZm9vqnaNRKoQPnn8RnnETw@mail.gmail.com>
 <25461.60868.778802.975454@stat.math.ethz.ch>
 <bcfe9c4c-1efb-08b3-e87d-9e14e3a9776e@sjd.es>
Message-ID: <25463.21582.487787.168361@stat.math.ethz.ch>

>>>>> Iago  
>>>>>     on Thu, 17 Nov 2022 11:53:31 +0100 writes:

    > Thank you Martin,
    > Regarding my question about `terms`, I meant the `terms` component of 
    > the `lme` output. For example, for

    > fm1 <- lme(distance ~ age, data = Orthodont)

    > I can see through str(fm1), the next:

    > $ terms?????? :Classes 'terms', 'formula'? language distance ~ age
    > ? .. ..- attr(*, "variables")= language list(distance, age)
    > ? .. ..- attr(*, "factors")= int [1:2, 1] 0 1
    > ? .. .. ..- attr(*, "dimnames")=List of 2
    > ? .. .. .. ..$ : chr [1:2] "distance" "age"
    > ? .. .. .. ..$ : chr "age"
    > ? .. ..- attr(*, "term.labels")= chr "age"
    > ? .. ..- attr(*, "order")= int 1
    > ? .. ..- attr(*, "intercept")= int 1
    > ? .. ..- attr(*, "response")= int 1
    > ? .. ..- attr(*, ".Environment")=<environment: R_GlobalEnv>
    > ? .. ..- attr(*, "predvars")= language list(distance, age)
    > ? .. ..- attr(*, "dataClasses")= Named chr [1:2] "numeric" "numeric"
    > ? .. .. ..- attr(*, "names")= chr [1:2] "distance" "age"

    > However, there is no paragraph for this component among those in 
    > ?lmeObject (in the Value section) as there is for fixDF, apVar, call, 
    > etc.. If not needed, I assume the explanation would be that `terms` does 
    > not need to be included in a legitimate ?"lme"? object'.

    > Kind regards,
    > Iago

I see; now I understand what you meant. I've taken time to check and
found that the 'terms' part *is* needed, even though not for the
simplest methods such as summary(), residuals(), ..  and so have
added it to the  ?lmeObject  help page for the next version of
nlme.

Thank you, Iago!

Best,
Martin


From rk3199 @end|ng |rom co|umb|@@edu  Fri Nov 18 22:45:14 2022
From: rk3199 @end|ng |rom co|umb|@@edu (Rob Kudyba)
Date: Fri, 18 Nov 2022 16:45:14 -0500
Subject: [R] make install libgfortran.so.5: cannot open shared object file:
 No such file or directory;
 conftest.c:1:10: fatal error: jni.h: No such file or directory
Message-ID: <CAD6rq1WED=BsyCidHqBiTXpMvsAHKTfW+GddP5tMmrQXwtmozg@mail.gmail.com>

On RHEL 8 with GCC 11.2.0 loaded as a module in a non-standard location I'm
the below error with make install. libgfortran.so is definitely in
$LD_LIBRARY_PATH, i.e., /path/to/gcc-11.2/lib64

ls -l /path/to/gcc-11.2/lib64/*fortran.so*
lrwxrwxrwx 1 rk3199 user        20 Mar 24  2022 libgfortran.so ->
libgfortran.so.5.0.0
lrwxrwxrwx 1 rk3199 user        20 Mar 24  2022 libgfortran.so.5 ->
libgfortran.so.5.0.0
-rwxr-xr-x 1 rk3199 user   8595744 Mar 24  2022 libgfortran.so.5.0.0
Here is where the error occurs in make install:
[...]
installing packages ...
  building HTML index ...
/path/to/R-4.2.2/bin/exec/R: error while loading shared libraries:
libgfortran.so.5: cannot open shared object file: No such file or directory
make[2]: *** [install] Error 127
make[2]: Leaving directory `/path/to/R-4.2.2/src/library'
make[1]: *** [install] Error 1
make[1]: Leaving directory `/path/to/rk3199/R-4.2.2/src'
make: *** [install] Error 1


During make I see this error with Java:
configuring Java ...
Java interpreter : /usr/bin/java
Java version     : 1.8.0_161
Java home path   :
/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.161-2.b14.el7.x86_64/jre
Java compiler    : not present
Java headers gen.:
Java archive tool:

trying to compile and link a JNI program
detected JNI cpp flags    :
detected JNI linker flags : -L$(JAVA_HOME)/lib/amd64/server -ljvm
make[2]: Entering directory `/tmp/Rjavareconf.3sImDz'
gcc -I"/path/to/R-4.2.2/include" -DNDEBUG   -I/usr/local/include   -fpic
 -O3 -march=native -c conftest.c -o conftest.o
conftest.c:1:10: fatal error: jni.h: No such file or directory
    1 | #include <jni.h>
      |          ^~~~~~~
compilation terminated.
make[2]: *** [conftest.o] Error 1
make[2]: Leaving directory `/tmp/Rjavareconf.3sImDz'
Unable to compile a JNI program

JAVA_HOME        :
/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.161-2.b14.el7.x86_64/jre
Java library path:
JNI cpp flags    :
JNI linker flags :
Updating Java configuration in /path/to/R-4.2.2
Done.

That seems a little more straight forward in that our Java 1.7.0 nor 1.8.0
have a jni.h file. Looks like we'd need the devel package installed.

Thanks for any suggestions for the former.

	[[alternative HTML version deleted]]


From gm@|om@ok|1980 @end|ng |rom gm@||@com  Sun Nov 20 16:01:41 2022
From: gm@|om@ok|1980 @end|ng |rom gm@||@com (=?UTF-8?Q?G=C3=A1bor_Malomsoki?=)
Date: Sun, 20 Nov 2022 16:01:41 +0100
Subject: [R] test logistic regression model
Message-ID: <CAEJRAFZPbW=eXYMXG1jL1N-vQ2UXuKNzYu9yA-cErdBU24yYCg@mail.gmail.com>

Dear all,

i have created a logistic regression model,
 on the train df:
mymodel1 <- glm(book_state ~ TG_KraftF5, data = train, family = "binomial")

then i try to predict with the test df
Predict<- predict(mymodel1, newdata = test, type = "response")
then iget this error message:
Error in model.frame.default(Terms, newdata, na.action = na.action, xlev =
object$xlevels)
Factor  "TG_KraftF5" has new levels

i have tried different proposals from stackoverflow, but unfortunately they
did not solved the problem.
Do you have any idea how to test a logistic regression model when you have
different levels in train and in test df?

thank you in advance
Regards,
Gabor

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Sun Nov 20 16:19:56 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 20 Nov 2022 07:19:56 -0800
Subject: [R] test logistic regression model
In-Reply-To: <CAEJRAFZPbW=eXYMXG1jL1N-vQ2UXuKNzYu9yA-cErdBU24yYCg@mail.gmail.com>
References: <CAEJRAFZPbW=eXYMXG1jL1N-vQ2UXuKNzYu9yA-cErdBU24yYCg@mail.gmail.com>
Message-ID: <CAGxFJbSvDckCW-gqVRs-7oDs63QZ_mRNZ1GHLZ2Z1q6kRjS1ag@mail.gmail.com>

You can't predict results for categories that you've not seen before (think
about it). You will need to remove those cases from your test set (or
convert them to NA and predict them as NA).

-- Bert

On Sun, Nov 20, 2022 at 7:02 AM G?bor Malomsoki <gmalomsoki1980 at gmail.com>
wrote:

> Dear all,
>
> i have created a logistic regression model,
>  on the train df:
> mymodel1 <- glm(book_state ~ TG_KraftF5, data = train, family = "binomial")
>
> then i try to predict with the test df
> Predict<- predict(mymodel1, newdata = test, type = "response")
> then iget this error message:
> Error in model.frame.default(Terms, newdata, na.action = na.action, xlev =
> object$xlevels)
> Factor  "TG_KraftF5" has new levels
>
> i have tried different proposals from stackoverflow, but unfortunately they
> did not solved the problem.
> Do you have any idea how to test a logistic regression model when you have
> different levels in train and in test df?
>
> thank you in advance
> Regards,
> Gabor
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From gm@|om@ok|1980 @end|ng |rom gm@||@com  Sun Nov 20 16:29:30 2022
From: gm@|om@ok|1980 @end|ng |rom gm@||@com (=?UTF-8?Q?G=C3=A1bor_Malomsoki?=)
Date: Sun, 20 Nov 2022 16:29:30 +0100
Subject: [R] test logistic regression model
In-Reply-To: <CAGxFJbSvDckCW-gqVRs-7oDs63QZ_mRNZ1GHLZ2Z1q6kRjS1ag@mail.gmail.com>
References: <CAEJRAFZPbW=eXYMXG1jL1N-vQ2UXuKNzYu9yA-cErdBU24yYCg@mail.gmail.com>
 <CAGxFJbSvDckCW-gqVRs-7oDs63QZ_mRNZ1GHLZ2Z1q6kRjS1ag@mail.gmail.com>
Message-ID: <CAEJRAFb67LfZWing6=ixo27Up2tuTTecciLmuWVN841qJEqEcA@mail.gmail.com>

Dear Bert,

Yes, was trying to fill the not existing categories with NAs, but the
suggested solutions in stackoverflow.com unfortunately did not work.

Best regards
Gabor


Bert Gunter <bgunter.4567 at gmail.com> schrieb am So., 20. Nov. 2022, 16:20:

> You can't predict results for categories that you've not seen before
> (think about it). You will need to remove those cases from your test set
> (or convert them to NA and predict them as NA).
>
> -- Bert
>
> On Sun, Nov 20, 2022 at 7:02 AM G?bor Malomsoki <gmalomsoki1980 at gmail.com>
> wrote:
>
>> Dear all,
>>
>> i have created a logistic regression model,
>>  on the train df:
>> mymodel1 <- glm(book_state ~ TG_KraftF5, data = train, family =
>> "binomial")
>>
>> then i try to predict with the test df
>> Predict<- predict(mymodel1, newdata = test, type = "response")
>> then iget this error message:
>> Error in model.frame.default(Terms, newdata, na.action = na.action, xlev =
>> object$xlevels)
>> Factor  "TG_KraftF5" has new levels
>>
>> i have tried different proposals from stackoverflow, but unfortunately
>> they
>> did not solved the problem.
>> Do you have any idea how to test a logistic regression model when you have
>> different levels in train and in test df?
>>
>> thank you in advance
>> Regards,
>> Gabor
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sun Nov 20 16:45:58 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sun, 20 Nov 2022 15:45:58 +0000
Subject: [R] test logistic regression model
In-Reply-To: <CAEJRAFb67LfZWing6=ixo27Up2tuTTecciLmuWVN841qJEqEcA@mail.gmail.com>
References: <CAEJRAFZPbW=eXYMXG1jL1N-vQ2UXuKNzYu9yA-cErdBU24yYCg@mail.gmail.com>
 <CAGxFJbSvDckCW-gqVRs-7oDs63QZ_mRNZ1GHLZ2Z1q6kRjS1ag@mail.gmail.com>
 <CAEJRAFb67LfZWing6=ixo27Up2tuTTecciLmuWVN841qJEqEcA@mail.gmail.com>
Message-ID: <ed065c3a-0191-71df-aa39-e50905bbf889@sapo.pt>

?s 15:29 de 20/11/2022, G?bor Malomsoki escreveu:
> Dear Bert,
> 
> Yes, was trying to fill the not existing categories with NAs, but the
> suggested solutions in stackoverflow.com unfortunately did not work.
> 
> Best regards
> Gabor
> 
> 
> Bert Gunter <bgunter.4567 at gmail.com> schrieb am So., 20. Nov. 2022, 16:20:
> 
>> You can't predict results for categories that you've not seen before
>> (think about it). You will need to remove those cases from your test set
>> (or convert them to NA and predict them as NA).
>>
>> -- Bert
>>
>> On Sun, Nov 20, 2022 at 7:02 AM G?bor Malomsoki <gmalomsoki1980 at gmail.com>
>> wrote:
>>
>>> Dear all,
>>>
>>> i have created a logistic regression model,
>>>   on the train df:
>>> mymodel1 <- glm(book_state ~ TG_KraftF5, data = train, family =
>>> "binomial")
>>>
>>> then i try to predict with the test df
>>> Predict<- predict(mymodel1, newdata = test, type = "response")
>>> then iget this error message:
>>> Error in model.frame.default(Terms, newdata, na.action = na.action, xlev =
>>> object$xlevels)
>>> Factor  "TG_KraftF5" has new levels
>>>
>>> i have tried different proposals from stackoverflow, but unfortunately
>>> they
>>> did not solved the problem.
>>> Do you have any idea how to test a logistic regression model when you have
>>> different levels in train and in test df?
>>>
>>> thank you in advance
>>> Regards,
>>> Gabor
>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

hello,

What exactly didn't work? You say you have tried the solutions found in 
stackoverflow but without a link, we don't know which answers to which 
questions you are talking about.
Like Bert said, if you assign NA to the new levels, present only in 
test, it should work.

Can you post links to what you have tried?

Hope this helps,

Rui Barradas


From bgunter@4567 @end|ng |rom gm@||@com  Sun Nov 20 17:40:39 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 20 Nov 2022 08:40:39 -0800
Subject: [R] test logistic regression model
In-Reply-To: <ed065c3a-0191-71df-aa39-e50905bbf889@sapo.pt>
References: <CAEJRAFZPbW=eXYMXG1jL1N-vQ2UXuKNzYu9yA-cErdBU24yYCg@mail.gmail.com>
 <CAGxFJbSvDckCW-gqVRs-7oDs63QZ_mRNZ1GHLZ2Z1q6kRjS1ag@mail.gmail.com>
 <CAEJRAFb67LfZWing6=ixo27Up2tuTTecciLmuWVN841qJEqEcA@mail.gmail.com>
 <ed065c3a-0191-71df-aa39-e50905bbf889@sapo.pt>
Message-ID: <CAGxFJbRW3=RTGojmRyfJypXgzEyW=nUy+CkaRozPRNsEFFi0Gg@mail.gmail.com>

small reprex:

set.seed(5)
dat <- data.frame(f = rep(c('r','g'),4), y = runif(8))
newdat <- data.frame(f =rep(c('r','g','b'),2))
## convert values in newdat not seen in dat to NA
is.na(newdat$f) <-!( newdat$f %in% dat$f)
lmfit <- lm(y~f, data = dat)

##Result:
> predict(lmfit,newdat)
        1         2         3         4         5         6
0.4374251 0.6196527        NA 0.4374251 0.6196527        NA

If this does not suffice, as Rui said, we need details of what you did.
(predict.glm works like predict.lm)


-- Bert


On Sun, Nov 20, 2022 at 7:46 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:
>
> ?s 15:29 de 20/11/2022, G?bor Malomsoki escreveu:
> > Dear Bert,
> >
> > Yes, was trying to fill the not existing categories with NAs, but the
> > suggested solutions in stackoverflow.com unfortunately did not work.
> >
> > Best regards
> > Gabor
> >
> >
> > Bert Gunter <bgunter.4567 at gmail.com> schrieb am So., 20. Nov. 2022, 16:20:
> >
> >> You can't predict results for categories that you've not seen before
> >> (think about it). You will need to remove those cases from your test set
> >> (or convert them to NA and predict them as NA).
> >>
> >> -- Bert
> >>
> >> On Sun, Nov 20, 2022 at 7:02 AM G?bor Malomsoki <gmalomsoki1980 at gmail.com>
> >> wrote:
> >>
> >>> Dear all,
> >>>
> >>> i have created a logistic regression model,
> >>>   on the train df:
> >>> mymodel1 <- glm(book_state ~ TG_KraftF5, data = train, family =
> >>> "binomial")
> >>>
> >>> then i try to predict with the test df
> >>> Predict<- predict(mymodel1, newdata = test, type = "response")
> >>> then iget this error message:
> >>> Error in model.frame.default(Terms, newdata, na.action = na.action, xlev =
> >>> object$xlevels)
> >>> Factor  "TG_KraftF5" has new levels
> >>>
> >>> i have tried different proposals from stackoverflow, but unfortunately
> >>> they
> >>> did not solved the problem.
> >>> Do you have any idea how to test a logistic regression model when you have
> >>> different levels in train and in test df?
> >>>
> >>> thank you in advance
> >>> Regards,
> >>> Gabor
> >>>
> >>>          [[alternative HTML version deleted]]
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide
> >>> http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >>>
> >>
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> hello,
>
> What exactly didn't work? You say you have tried the solutions found in
> stackoverflow but without a link, we don't know which answers to which
> questions you are talking about.
> Like Bert said, if you assign NA to the new levels, present only in
> test, it should work.
>
> Can you post links to what you have tried?
>
> Hope this helps,
>
> Rui Barradas


From kry|ov@r00t @end|ng |rom gm@||@com  Sun Nov 20 18:37:45 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Sun, 20 Nov 2022 20:37:45 +0300
Subject: [R] 
 make install libgfortran.so.5: cannot open shared object file:
 No such file or directory;
 conftest.c:1:10: fatal error: jni.h: No such file or directory
In-Reply-To: <CAD6rq1WED=BsyCidHqBiTXpMvsAHKTfW+GddP5tMmrQXwtmozg@mail.gmail.com>
References: <CAD6rq1WED=BsyCidHqBiTXpMvsAHKTfW+GddP5tMmrQXwtmozg@mail.gmail.com>
Message-ID: <20221120203745.1d429604@Tarkus>

On Fri, 18 Nov 2022 16:45:14 -0500
Rob Kudyba <rk3199 at columbia.edu> wrote:

> Here is where the error occurs in make install:
> [...]
> installing packages ...
>   building HTML index ...
> /path/to/R-4.2.2/bin/exec/R: error while loading shared libraries:
> libgfortran.so.5: cannot open shared object file: No such file or
> directory make[2]: *** [install] Error 127
> make[2]: Leaving directory `/path/to/R-4.2.2/src/library'
> make[1]: *** [install] Error 1
> make[1]: Leaving directory `/path/to/rk3199/R-4.2.2/src'
> make: *** [install] Error 1

It should be possible to run R without installing it, as
/path/to/R-4.2.2/bin/R (strictly speaking, as bin/R under the build
directory, if you're building R separately from the source tree). Does
it work?

Does /path/to/R-4.2.2/bin/R -d ldd give you any useful information? Can
you use strace -f -e openat /path/to/R-4.2.2/bin/R to confirm that the
dynamic library loader is looking in /path/to/gcc-11.2/lib64 for the
shared objects?

If /path/to/gcc-11.2/lib64 is missing from both /etc/ld.so.conf and the
environment variable LD_LIBRARY_PATH and you don't want to set it
manually every time, you can either edit /path/to/R-4.2.2/etc/ldpaths
or pass the -Wl,-rpath=/path/to/gcc-11.2/lib64 flag to the linker.

> During make I see this error with Java:

This error is not fatal. rJava won't work, but the rest of R should be
fine.

-- 
Best regards,
Ivan


From mm@|ten @end|ng |rom gm@||@com  Sun Nov 20 18:49:26 2022
From: mm@|ten @end|ng |rom gm@||@com (Mitchell Maltenfort)
Date: Sun, 20 Nov 2022 12:49:26 -0500
Subject: [R] test logistic regression model
In-Reply-To: <CAGxFJbRW3=RTGojmRyfJypXgzEyW=nUy+CkaRozPRNsEFFi0Gg@mail.gmail.com>
References: <CAEJRAFZPbW=eXYMXG1jL1N-vQ2UXuKNzYu9yA-cErdBU24yYCg@mail.gmail.com>
 <CAGxFJbSvDckCW-gqVRs-7oDs63QZ_mRNZ1GHLZ2Z1q6kRjS1ag@mail.gmail.com>
 <CAEJRAFb67LfZWing6=ixo27Up2tuTTecciLmuWVN841qJEqEcA@mail.gmail.com>
 <ed065c3a-0191-71df-aa39-e50905bbf889@sapo.pt>
 <CAGxFJbRW3=RTGojmRyfJypXgzEyW=nUy+CkaRozPRNsEFFi0Gg@mail.gmail.com>
Message-ID: <CANOgrHa5oUjtp7kZkN18crgexOj84C16739J+4=Gm_O8E+zfKg@mail.gmail.com>

Two possible fixes occur to me

1) Redo the test/training split but within levels of factor - so you have
the same split within each level and each level accounted for in training
and testing

2) if you have a lot of levels, and perhaps sparse representation in a few,
consider recoding levels to pool the rare ones into an ?other? category

On Sun, Nov 20, 2022 at 11:41 AM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> small reprex:
>
> set.seed(5)
> dat <- data.frame(f = rep(c('r','g'),4), y = runif(8))
> newdat <- data.frame(f =rep(c('r','g','b'),2))
> ## convert values in newdat not seen in dat to NA
> is.na(newdat$f) <-!( newdat$f %in% dat$f)
> lmfit <- lm(y~f, data = dat)
>
> ##Result:
> > predict(lmfit,newdat)
>         1         2         3         4         5         6
> 0.4374251 0.6196527        NA 0.4374251 0.6196527        NA
>
> If this does not suffice, as Rui said, we need details of what you did.
> (predict.glm works like predict.lm)
>
>
> -- Bert
>
>
> On Sun, Nov 20, 2022 at 7:46 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:
> >
> > ?s 15:29 de 20/11/2022, G?bor Malomsoki escreveu:
> > > Dear Bert,
> > >
> > > Yes, was trying to fill the not existing categories with NAs, but the
> > > suggested solutions in stackoverflow.com unfortunately did not work.
> > >
> > > Best regards
> > > Gabor
> > >
> > >
> > > Bert Gunter <bgunter.4567 at gmail.com> schrieb am So., 20. Nov. 2022,
> 16:20:
> > >
> > >> You can't predict results for categories that you've not seen before
> > >> (think about it). You will need to remove those cases from your test
> set
> > >> (or convert them to NA and predict them as NA).
> > >>
> > >> -- Bert
> > >>
> > >> On Sun, Nov 20, 2022 at 7:02 AM G?bor Malomsoki <
> gmalomsoki1980 at gmail.com>
> > >> wrote:
> > >>
> > >>> Dear all,
> > >>>
> > >>> i have created a logistic regression model,
> > >>>   on the train df:
> > >>> mymodel1 <- glm(book_state ~ TG_KraftF5, data = train, family =
> > >>> "binomial")
> > >>>
> > >>> then i try to predict with the test df
> > >>> Predict<- predict(mymodel1, newdata = test, type = "response")
> > >>> then iget this error message:
> > >>> Error in model.frame.default(Terms, newdata, na.action = na.action,
> xlev =
> > >>> object$xlevels)
> > >>> Factor  "TG_KraftF5" has new levels
> > >>>
> > >>> i have tried different proposals from stackoverflow, but
> unfortunately
> > >>> they
> > >>> did not solved the problem.
> > >>> Do you have any idea how to test a logistic regression model when
> you have
> > >>> different levels in train and in test df?
> > >>>
> > >>> thank you in advance
> > >>> Regards,
> > >>> Gabor
> > >>>
> > >>>          [[alternative HTML version deleted]]
> > >>>
> > >>> ______________________________________________
> > >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >>> https://stat.ethz.ch/mailman/listinfo/r-help
> > >>> PLEASE do read the posting guide
> > >>> http://www.R-project.org/posting-guide.html
> > >>> and provide commented, minimal, self-contained, reproducible code.
> > >>>
> > >>
> > >
> > >       [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> >
> > hello,
> >
> > What exactly didn't work? You say you have tried the solutions found in
> > stackoverflow but without a link, we don't know which answers to which
> > questions you are talking about.
> > Like Bert said, if you assign NA to the new levels, present only in
> > test, it should work.
> >
> > Can you post links to what you have tried?
> >
> > Hope this helps,
> >
> > Rui Barradas
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
-- 
Sent from Gmail Mobile

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Sun Nov 20 19:06:09 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 20 Nov 2022 10:06:09 -0800
Subject: [R] test logistic regression model
In-Reply-To: <CANOgrHa5oUjtp7kZkN18crgexOj84C16739J+4=Gm_O8E+zfKg@mail.gmail.com>
References: <CAEJRAFZPbW=eXYMXG1jL1N-vQ2UXuKNzYu9yA-cErdBU24yYCg@mail.gmail.com>
 <CAGxFJbSvDckCW-gqVRs-7oDs63QZ_mRNZ1GHLZ2Z1q6kRjS1ag@mail.gmail.com>
 <CAEJRAFb67LfZWing6=ixo27Up2tuTTecciLmuWVN841qJEqEcA@mail.gmail.com>
 <ed065c3a-0191-71df-aa39-e50905bbf889@sapo.pt>
 <CAGxFJbRW3=RTGojmRyfJypXgzEyW=nUy+CkaRozPRNsEFFi0Gg@mail.gmail.com>
 <CANOgrHa5oUjtp7kZkN18crgexOj84C16739J+4=Gm_O8E+zfKg@mail.gmail.com>
Message-ID: <CAGxFJbQ1WT0p2i_ZoFsJP92eLWMbjEB9poL3EX-sjhuOL1ttLw@mail.gmail.com>

I think (2) might be a bad idea if one of the "sparse"categories has
high predictive power. You'll lose it when you pool, will you not?
Also, there is the problem of subjectively defining "sparse."

However, 1) seems quite sensible to me. But IANAE.

-- Bert

On Sun, Nov 20, 2022 at 9:49 AM Mitchell Maltenfort <mmalten at gmail.com> wrote:
>
> Two possible fixes occur to me
>
> 1) Redo the test/training split but within levels of factor - so you have the same split within each level and each level accounted for in training and testing
>
> 2) if you have a lot of levels, and perhaps sparse representation in a few, consider recoding levels to pool the rare ones into an ?other? category
>
> On Sun, Nov 20, 2022 at 11:41 AM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>>
>> small reprex:
>>
>> set.seed(5)
>> dat <- data.frame(f = rep(c('r','g'),4), y = runif(8))
>> newdat <- data.frame(f =rep(c('r','g','b'),2))
>> ## convert values in newdat not seen in dat to NA
>> is.na(newdat$f) <-!( newdat$f %in% dat$f)
>> lmfit <- lm(y~f, data = dat)
>>
>> ##Result:
>> > predict(lmfit,newdat)
>>         1         2         3         4         5         6
>> 0.4374251 0.6196527        NA 0.4374251 0.6196527        NA
>>
>> If this does not suffice, as Rui said, we need details of what you did.
>> (predict.glm works like predict.lm)
>>
>>
>> -- Bert
>>
>>
>> On Sun, Nov 20, 2022 at 7:46 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:
>> >
>> > ?s 15:29 de 20/11/2022, G?bor Malomsoki escreveu:
>> > > Dear Bert,
>> > >
>> > > Yes, was trying to fill the not existing categories with NAs, but the
>> > > suggested solutions in stackoverflow.com unfortunately did not work.
>> > >
>> > > Best regards
>> > > Gabor
>> > >
>> > >
>> > > Bert Gunter <bgunter.4567 at gmail.com> schrieb am So., 20. Nov. 2022, 16:20:
>> > >
>> > >> You can't predict results for categories that you've not seen before
>> > >> (think about it). You will need to remove those cases from your test set
>> > >> (or convert them to NA and predict them as NA).
>> > >>
>> > >> -- Bert
>> > >>
>> > >> On Sun, Nov 20, 2022 at 7:02 AM G?bor Malomsoki <gmalomsoki1980 at gmail.com>
>> > >> wrote:
>> > >>
>> > >>> Dear all,
>> > >>>
>> > >>> i have created a logistic regression model,
>> > >>>   on the train df:
>> > >>> mymodel1 <- glm(book_state ~ TG_KraftF5, data = train, family =
>> > >>> "binomial")
>> > >>>
>> > >>> then i try to predict with the test df
>> > >>> Predict<- predict(mymodel1, newdata = test, type = "response")
>> > >>> then iget this error message:
>> > >>> Error in model.frame.default(Terms, newdata, na.action = na.action, xlev =
>> > >>> object$xlevels)
>> > >>> Factor  "TG_KraftF5" has new levels
>> > >>>
>> > >>> i have tried different proposals from stackoverflow, but unfortunately
>> > >>> they
>> > >>> did not solved the problem.
>> > >>> Do you have any idea how to test a logistic regression model when you have
>> > >>> different levels in train and in test df?
>> > >>>
>> > >>> thank you in advance
>> > >>> Regards,
>> > >>> Gabor
>> > >>>
>> > >>>          [[alternative HTML version deleted]]
>> > >>>
>> > >>> ______________________________________________
>> > >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > >>> https://stat.ethz.ch/mailman/listinfo/r-help
>> > >>> PLEASE do read the posting guide
>> > >>> http://www.R-project.org/posting-guide.html
>> > >>> and provide commented, minimal, self-contained, reproducible code.
>> > >>>
>> > >>
>> > >
>> > >       [[alternative HTML version deleted]]
>> > >
>> > > ______________________________________________
>> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > > https://stat.ethz.ch/mailman/listinfo/r-help
>> > > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> > > and provide commented, minimal, self-contained, reproducible code.
>> >
>> > hello,
>> >
>> > What exactly didn't work? You say you have tried the solutions found in
>> > stackoverflow but without a link, we don't know which answers to which
>> > questions you are talking about.
>> > Like Bert said, if you assign NA to the new levels, present only in
>> > test, it should work.
>> >
>> > Can you post links to what you have tried?
>> >
>> > Hope this helps,
>> >
>> > Rui Barradas
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from Gmail Mobile


From tebert @end|ng |rom u||@edu  Sun Nov 20 19:30:16 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Sun, 20 Nov 2022 18:30:16 +0000
Subject: [R] test logistic regression model
In-Reply-To: <CAGxFJbQ1WT0p2i_ZoFsJP92eLWMbjEB9poL3EX-sjhuOL1ttLw@mail.gmail.com>
References: <CAEJRAFZPbW=eXYMXG1jL1N-vQ2UXuKNzYu9yA-cErdBU24yYCg@mail.gmail.com>
 <CAGxFJbSvDckCW-gqVRs-7oDs63QZ_mRNZ1GHLZ2Z1q6kRjS1ag@mail.gmail.com>
 <CAEJRAFb67LfZWing6=ixo27Up2tuTTecciLmuWVN841qJEqEcA@mail.gmail.com>
 <ed065c3a-0191-71df-aa39-e50905bbf889@sapo.pt>
 <CAGxFJbRW3=RTGojmRyfJypXgzEyW=nUy+CkaRozPRNsEFFi0Gg@mail.gmail.com>
 <CANOgrHa5oUjtp7kZkN18crgexOj84C16739J+4=Gm_O8E+zfKg@mail.gmail.com>
 <CAGxFJbQ1WT0p2i_ZoFsJP92eLWMbjEB9poL3EX-sjhuOL1ttLw@mail.gmail.com>
Message-ID: <BN6PR2201MB15537BD9568788407EDF7123CF0B9@BN6PR2201MB1553.namprd22.prod.outlook.com>

I like option 1. Option 2 may cause problems if you are pooling groups that do not go together. This is especially a problem if you know that the data is missing some groups. I would consider dropping rare groups - or compare results between pooling and dropping options. If the answer is the same in both cases then use the approach that makes your life easier with reviewers/clients. If the answer is different then I would go with dropping rare categories, or present both and highlight the difference in outcome. A third option is to gather more data.

Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Bert Gunter
Sent: Sunday, November 20, 2022 1:06 PM
To: Mitchell Maltenfort <mmalten at gmail.com>
Cc: R-help <R-help at r-project.org>
Subject: Re: [R] test logistic regression model

[External Email]

I think (2) might be a bad idea if one of the "sparse"categories has high predictive power. You'll lose it when you pool, will you not?
Also, there is the problem of subjectively defining "sparse."

However, 1) seems quite sensible to me. But IANAE.

-- Bert

On Sun, Nov 20, 2022 at 9:49 AM Mitchell Maltenfort <mmalten at gmail.com> wrote:
>
> Two possible fixes occur to me
>
> 1) Redo the test/training split but within levels of factor - so you 
> have the same split within each level and each level accounted for in 
> training and testing
>
> 2) if you have a lot of levels, and perhaps sparse representation in a 
> few, consider recoding levels to pool the rare ones into an "other" 
> category
>
> On Sun, Nov 20, 2022 at 11:41 AM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>>
>> small reprex:
>>
>> set.seed(5)
>> dat <- data.frame(f = rep(c('r','g'),4), y = runif(8)) newdat <- 
>> data.frame(f =rep(c('r','g','b'),2)) ## convert values in newdat not 
>> seen in dat to NA
>> is.na(newdat$f) <-!( newdat$f %in% dat$f) lmfit <- lm(y~f, data = 
>> dat)
>>
>> ##Result:
>> > predict(lmfit,newdat)
>>         1         2         3         4         5         6
>> 0.4374251 0.6196527        NA 0.4374251 0.6196527        NA
>>
>> If this does not suffice, as Rui said, we need details of what you did.
>> (predict.glm works like predict.lm)
>>
>>
>> -- Bert
>>
>>
>> On Sun, Nov 20, 2022 at 7:46 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:
>> >
>> > ?s 15:29 de 20/11/2022, G?bor Malomsoki escreveu:
>> > > Dear Bert,
>> > >
>> > > Yes, was trying to fill the not existing categories with NAs, but 
>> > > the suggested solutions in stackoverflow.com unfortunately did not work.
>> > >
>> > > Best regards
>> > > Gabor
>> > >
>> > >
>> > > Bert Gunter <bgunter.4567 at gmail.com> schrieb am So., 20. Nov. 2022, 16:20:
>> > >
>> > >> You can't predict results for categories that you've not seen 
>> > >> before (think about it). You will need to remove those cases 
>> > >> from your test set (or convert them to NA and predict them as NA).
>> > >>
>> > >> -- Bert
>> > >>
>> > >> On Sun, Nov 20, 2022 at 7:02 AM G?bor Malomsoki 
>> > >> <gmalomsoki1980 at gmail.com>
>> > >> wrote:
>> > >>
>> > >>> Dear all,
>> > >>>
>> > >>> i have created a logistic regression model,
>> > >>>   on the train df:
>> > >>> mymodel1 <- glm(book_state ~ TG_KraftF5, data = train, family =
>> > >>> "binomial")
>> > >>>
>> > >>> then i try to predict with the test df
>> > >>> Predict<- predict(mymodel1, newdata = test, type = "response") 
>> > >>> then iget this error message:
>> > >>> Error in model.frame.default(Terms, newdata, na.action = 
>> > >>> na.action, xlev =
>> > >>> object$xlevels)
>> > >>> Factor  "TG_KraftF5" has new levels
>> > >>>
>> > >>> i have tried different proposals from stackoverflow, but 
>> > >>> unfortunately they did not solved the problem.
>> > >>> Do you have any idea how to test a logistic regression model 
>> > >>> when you have different levels in train and in test df?
>> > >>>
>> > >>> thank you in advance
>> > >>> Regards,
>> > >>> Gabor
>> > >>>
>> > >>>          [[alternative HTML version deleted]]
>> > >>>
>> > >>> ______________________________________________
>> > >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, 
>> > >>> see
>> > >>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F
>> > >>> %2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%
>> > >>> 7Ctebert%40ufl.edu%7C32b7b7b6a5d6428e728e08dacb21f524%7C0d4da0f
>> > >>> 84a314d76ace60a62331e1b84%7C0%7C0%7C638045643951801851%7CUnknow
>> > >>> n%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1
>> > >>> haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=Ceyiq3LmFfHRlfnrw
>> > >>> 87wzELUGTHLSv7qvuv1tyqGruU%3D&amp;reserved=0
>> > >>> PLEASE do read the posting guide
>> > >>> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%
>> > >>> 2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Cteb
>> > >>> ert%40ufl.edu%7C32b7b7b6a5d6428e728e08dacb21f524%7C0d4da0f84a31
>> > >>> 4d76ace60a62331e1b84%7C0%7C0%7C638045643951958086%7CUnknown%7CT
>> > >>> WFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwi
>> > >>> LCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=swql970slrq8f9bAwP%2FE
>> > >>> s7PbWm5EQvFHWNga2JwHWeY%3D&amp;reserved=0
>> > >>> and provide commented, minimal, self-contained, reproducible code.
>> > >>>
>> > >>
>> > >
>> > >       [[alternative HTML version deleted]]
>> > >
>> > > ______________________________________________
>> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > > https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2
>> > > Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Cte
>> > > bert%40ufl.edu%7C32b7b7b6a5d6428e728e08dacb21f524%7C0d4da0f84a314
>> > > d76ace60a62331e1b84%7C0%7C0%7C638045643951958086%7CUnknown%7CTWFp
>> > > bGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXV
>> > > CI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=N2g%2Fx2IMW4OL0HSmq6pP2pxymP0
>> > > FUAQbciQXRPOe7KM%3D&amp;reserved=0
>> > > PLEASE do read the posting guide 
>> > > https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2F
>> > > www.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%
>> > > 40ufl.edu%7C32b7b7b6a5d6428e728e08dacb21f524%7C0d4da0f84a314d76ac
>> > > e60a62331e1b84%7C0%7C0%7C638045643951958086%7CUnknown%7CTWFpbGZsb
>> > > 3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn
>> > > 0%3D%7C3000%7C%7C%7C&amp;sdata=swql970slrq8f9bAwP%2FEs7PbWm5EQvFH
>> > > WNga2JwHWeY%3D&amp;reserved=0 and provide commented, minimal, 
>> > > self-contained, reproducible code.
>> >
>> > hello,
>> >
>> > What exactly didn't work? You say you have tried the solutions 
>> > found in stackoverflow but without a link, we don't know which 
>> > answers to which questions you are talking about.
>> > Like Bert said, if you assign NA to the new levels, present only in 
>> > test, it should work.
>> >
>> > Can you post links to what you have tried?
>> >
>> > Hope this helps,
>> >
>> > Rui Barradas
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fsta
>> t.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40u
>> fl.edu%7C32b7b7b6a5d6428e728e08dacb21f524%7C0d4da0f84a314d76ace60a623
>> 31e1b84%7C0%7C0%7C638045643951958086%7CUnknown%7CTWFpbGZsb3d8eyJWIjoi
>> MC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%
>> 7C%7C&amp;sdata=N2g%2Fx2IMW4OL0HSmq6pP2pxymP0FUAQbciQXRPOe7KM%3D&amp;
>> reserved=0 PLEASE do read the posting guide 
>> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.
>> r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.ed
>> u%7C32b7b7b6a5d6428e728e08dacb21f524%7C0d4da0f84a314d76ace60a62331e1b
>> 84%7C0%7C0%7C638045643951958086%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wL
>> jAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C
>> &amp;sdata=swql970slrq8f9bAwP%2FEs7PbWm5EQvFHWNga2JwHWeY%3D&amp;reser
>> ved=0 and provide commented, minimal, self-contained, reproducible 
>> code.
>
> --
> Sent from Gmail Mobile

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C32b7b7b6a5d6428e728e08dacb21f524%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638045643951958086%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=N2g%2Fx2IMW4OL0HSmq6pP2pxymP0FUAQbciQXRPOe7KM%3D&amp;reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C32b7b7b6a5d6428e728e08dacb21f524%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638045643951958086%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=swql970slrq8f9bAwP%2FEs7PbWm5EQvFHWNga2JwHWeY%3D&amp;reserved=0
and provide commented, minimal, self-contained, reproducible code.


From mm@|ten @end|ng |rom gm@||@com  Sun Nov 20 19:38:18 2022
From: mm@|ten @end|ng |rom gm@||@com (Mitchell Maltenfort)
Date: Sun, 20 Nov 2022 13:38:18 -0500
Subject: [R] test logistic regression model
In-Reply-To: <BN6PR2201MB15537BD9568788407EDF7123CF0B9@BN6PR2201MB1553.namprd22.prod.outlook.com>
References: <CAEJRAFZPbW=eXYMXG1jL1N-vQ2UXuKNzYu9yA-cErdBU24yYCg@mail.gmail.com>
 <CAGxFJbSvDckCW-gqVRs-7oDs63QZ_mRNZ1GHLZ2Z1q6kRjS1ag@mail.gmail.com>
 <CAEJRAFb67LfZWing6=ixo27Up2tuTTecciLmuWVN841qJEqEcA@mail.gmail.com>
 <ed065c3a-0191-71df-aa39-e50905bbf889@sapo.pt>
 <CAGxFJbRW3=RTGojmRyfJypXgzEyW=nUy+CkaRozPRNsEFFi0Gg@mail.gmail.com>
 <CANOgrHa5oUjtp7kZkN18crgexOj84C16739J+4=Gm_O8E+zfKg@mail.gmail.com>
 <CAGxFJbQ1WT0p2i_ZoFsJP92eLWMbjEB9poL3EX-sjhuOL1ttLw@mail.gmail.com>
 <BN6PR2201MB15537BD9568788407EDF7123CF0B9@BN6PR2201MB1553.namprd22.prod.outlook.com>
Message-ID: <CANOgrHYD38W7TDr_jn6Parz5eboe2hsMG_-HWCxhxYrhCWi44w@mail.gmail.com>

Agreed on the ranking of (1) vs (2)



On Sun, Nov 20, 2022 at 1:30 PM Ebert,Timothy Aaron <tebert at ufl.edu> wrote:

> I like option 1. Option 2 may cause problems if you are pooling groups
> that do not go together. This is especially a problem if you know that the
> data is missing some groups. I would consider dropping rare groups - or
> compare results between pooling and dropping options. If the answer is the
> same in both cases then use the approach that makes your life easier with
> reviewers/clients. If the answer is different then I would go with dropping
> rare categories, or present both and highlight the difference in outcome. A
> third option is to gather more data.
>
> Tim
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Bert Gunter
> Sent: Sunday, November 20, 2022 1:06 PM
> To: Mitchell Maltenfort <mmalten at gmail.com>
> Cc: R-help <R-help at r-project.org>
> Subject: Re: [R] test logistic regression model
>
> [External Email]
>
> I think (2) might be a bad idea if one of the "sparse"categories has high
> predictive power. You'll lose it when you pool, will you not?
> Also, there is the problem of subjectively defining "sparse."
>
> However, 1) seems quite sensible to me. But IANAE.
>
> -- Bert
>
> On Sun, Nov 20, 2022 at 9:49 AM Mitchell Maltenfort <mmalten at gmail.com>
> wrote:
> >
> > Two possible fixes occur to me
> >
> > 1) Redo the test/training split but within levels of factor - so you
> > have the same split within each level and each level accounted for in
> > training and testing
> >
> > 2) if you have a lot of levels, and perhaps sparse representation in a
> > few, consider recoding levels to pool the rare ones into an "other"
> > category
> >
> > On Sun, Nov 20, 2022 at 11:41 AM Bert Gunter <bgunter.4567 at gmail.com>
> wrote:
> >>
> >> small reprex:
> >>
> >> set.seed(5)
> >> dat <- data.frame(f = rep(c('r','g'),4), y = runif(8)) newdat <-
> >> data.frame(f =rep(c('r','g','b'),2)) ## convert values in newdat not
> >> seen in dat to NA
> >> is.na(newdat$f) <-!( newdat$f %in% dat$f) lmfit <- lm(y~f, data =
> >> dat)
> >>
> >> ##Result:
> >> > predict(lmfit,newdat)
> >>         1         2         3         4         5         6
> >> 0.4374251 0.6196527        NA 0.4374251 0.6196527        NA
> >>
> >> If this does not suffice, as Rui said, we need details of what you did.
> >> (predict.glm works like predict.lm)
> >>
> >>
> >> -- Bert
> >>
> >>
> >> On Sun, Nov 20, 2022 at 7:46 AM Rui Barradas <ruipbarradas at sapo.pt>
> wrote:
> >> >
> >> > ?s 15:29 de 20/11/2022, G?bor Malomsoki escreveu:
> >> > > Dear Bert,
> >> > >
> >> > > Yes, was trying to fill the not existing categories with NAs, but
> >> > > the suggested solutions in stackoverflow.com unfortunately did not
> work.
> >> > >
> >> > > Best regards
> >> > > Gabor
> >> > >
> >> > >
> >> > > Bert Gunter <bgunter.4567 at gmail.com> schrieb am So., 20. Nov.
> 2022, 16:20:
> >> > >
> >> > >> You can't predict results for categories that you've not seen
> >> > >> before (think about it). You will need to remove those cases
> >> > >> from your test set (or convert them to NA and predict them as NA).
> >> > >>
> >> > >> -- Bert
> >> > >>
> >> > >> On Sun, Nov 20, 2022 at 7:02 AM G?bor Malomsoki
> >> > >> <gmalomsoki1980 at gmail.com>
> >> > >> wrote:
> >> > >>
> >> > >>> Dear all,
> >> > >>>
> >> > >>> i have created a logistic regression model,
> >> > >>>   on the train df:
> >> > >>> mymodel1 <- glm(book_state ~ TG_KraftF5, data = train, family =
> >> > >>> "binomial")
> >> > >>>
> >> > >>> then i try to predict with the test df
> >> > >>> Predict<- predict(mymodel1, newdata = test, type = "response")
> >> > >>> then iget this error message:
> >> > >>> Error in model.frame.default(Terms, newdata, na.action =
> >> > >>> na.action, xlev =
> >> > >>> object$xlevels)
> >> > >>> Factor  "TG_KraftF5" has new levels
> >> > >>>
> >> > >>> i have tried different proposals from stackoverflow, but
> >> > >>> unfortunately they did not solved the problem.
> >> > >>> Do you have any idea how to test a logistic regression model
> >> > >>> when you have different levels in train and in test df?
> >> > >>>
> >> > >>> thank you in advance
> >> > >>> Regards,
> >> > >>> Gabor
> >> > >>>
> >> > >>>          [[alternative HTML version deleted]]
> >> > >>>
> >> > >>> ______________________________________________
> >> > >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
> >> > >>> see
> >> > >>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F
> >> > >>> %2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%
> >> > >>> 7Ctebert%40ufl.edu%7C32b7b7b6a5d6428e728e08dacb21f524%7C0d4da0f
> >> > >>> 84a314d76ace60a62331e1b84%7C0%7C0%7C638045643951801851%7CUnknow
> >> > >>> n%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1
> >> > >>> haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=Ceyiq3LmFfHRlfnrw
> >> > >>> 87wzELUGTHLSv7qvuv1tyqGruU%3D&amp;reserved=0
> >> > >>> PLEASE do read the posting guide
> >> > >>> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%
> >> > >>> 2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Cteb
> >> > >>> ert%40ufl.edu%7C32b7b7b6a5d6428e728e08dacb21f524%7C0d4da0f84a31
> >> > >>> 4d76ace60a62331e1b84%7C0%7C0%7C638045643951958086%7CUnknown%7CT
> >> > >>> WFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwi
> >> > >>> LCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=swql970slrq8f9bAwP%2FE
> >> > >>> s7PbWm5EQvFHWNga2JwHWeY%3D&amp;reserved=0
> >> > >>> and provide commented, minimal, self-contained, reproducible code.
> >> > >>>
> >> > >>
> >> > >
> >> > >       [[alternative HTML version deleted]]
> >> > >
> >> > > ______________________________________________
> >> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> > > https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2
> >> > > Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Cte
> >> > > bert%40ufl.edu%7C32b7b7b6a5d6428e728e08dacb21f524%7C0d4da0f84a314
> >> > > d76ace60a62331e1b84%7C0%7C0%7C638045643951958086%7CUnknown%7CTWFp
> >> > > bGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXV
> >> > > CI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=N2g%2Fx2IMW4OL0HSmq6pP2pxymP0
> >> > > FUAQbciQXRPOe7KM%3D&amp;reserved=0
> >> > > PLEASE do read the posting guide
> >> > > https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2F
> >> > > www.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%
> >> > > 40ufl.edu%7C32b7b7b6a5d6428e728e08dacb21f524%7C0d4da0f84a314d76ac
> >> > > e60a62331e1b84%7C0%7C0%7C638045643951958086%7CUnknown%7CTWFpbGZsb
> >> > > 3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn
> >> > > 0%3D%7C3000%7C%7C%7C&amp;sdata=swql970slrq8f9bAwP%2FEs7PbWm5EQvFH
> >> > > WNga2JwHWeY%3D&amp;reserved=0 and provide commented, minimal,
> >> > > self-contained, reproducible code.
> >> >
> >> > hello,
> >> >
> >> > What exactly didn't work? You say you have tried the solutions
> >> > found in stackoverflow but without a link, we don't know which
> >> > answers to which questions you are talking about.
> >> > Like Bert said, if you assign NA to the new levels, present only in
> >> > test, it should work.
> >> >
> >> > Can you post links to what you have tried?
> >> >
> >> > Hope this helps,
> >> >
> >> > Rui Barradas
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fsta
> >> t.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40u
> >> fl.edu%7C32b7b7b6a5d6428e728e08dacb21f524%7C0d4da0f84a314d76ace60a623
> >> 31e1b84%7C0%7C0%7C638045643951958086%7CUnknown%7CTWFpbGZsb3d8eyJWIjoi
> >> MC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%
> >> 7C%7C&amp;sdata=N2g%2Fx2IMW4OL0HSmq6pP2pxymP0FUAQbciQXRPOe7KM%3D&amp;
> >> reserved=0 PLEASE do read the posting guide
> >> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.
> >> r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.ed
> >> u%7C32b7b7b6a5d6428e728e08dacb21f524%7C0d4da0f84a314d76ace60a62331e1b
> >> 84%7C0%7C0%7C638045643951958086%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wL
> >> jAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C
> >> &amp;sdata=swql970slrq8f9bAwP%2FEs7PbWm5EQvFHWNga2JwHWeY%3D&amp;reser
> >> ved=0 and provide commented, minimal, self-contained, reproducible
> >> code.
> >
> > --
> > Sent from Gmail Mobile
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C32b7b7b6a5d6428e728e08dacb21f524%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638045643951958086%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=N2g%2Fx2IMW4OL0HSmq6pP2pxymP0FUAQbciQXRPOe7KM%3D&amp;reserved=0
> PLEASE do read the posting guide
> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C32b7b7b6a5d6428e728e08dacb21f524%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638045643951958086%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=swql970slrq8f9bAwP%2FEs7PbWm5EQvFHWNga2JwHWeY%3D&amp;reserved=0
> and provide commented, minimal, self-contained, reproducible code.
>
-- 
Sent from Gmail Mobile

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Sun Nov 20 20:26:23 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Sun, 20 Nov 2022 22:26:23 +0300
Subject: [R] 
 make install libgfortran.so.5: cannot open shared object file:
 No such file or directory;
 conftest.c:1:10: fatal error: jni.h: No such file or directory
In-Reply-To: <CAD6rq1VLQqS7XjeT9nEYXvWgMNqTBoiE4V9_DAS1ktNskvWoKQ@mail.gmail.com>
References: <CAD6rq1WED=BsyCidHqBiTXpMvsAHKTfW+GddP5tMmrQXwtmozg@mail.gmail.com>
 <20221120203745.1d429604@Tarkus>
 <CAD6rq1VLQqS7XjeT9nEYXvWgMNqTBoiE4V9_DAS1ktNskvWoKQ@mail.gmail.com>
Message-ID: <20221120222623.24c39285@Tarkus>

On Sun, 20 Nov 2022 14:03:34 -0500
Rob Kudyba <rk3199 at columbia.edu> wrote:

> /path/to/gcc-11.2/lib is definitely in LD_LIBRARY_PATH when loading
> the GCC 11.2 module.
> 
> If using the /path/to/R-4.2.2/etc/ldpaths where would I put the
> correct path? I would've hoped the configure/make process would've
> found this automatically.

Interesting that bin/R works but calling bin/R from what amounts to
`make -C src/library install` doesn't. I think that the failing step is
the following command:

@$(ECHO) "  building HTML index ..."
@$(ECHO) "utils:::make.packages.html(.Library, verbose=FALSE,
docdir=\"$(DESTDIR)${rdocdir}\")" | \
 R_DEFAULT_PACKAGES=NULL LC_ALL=C ${R_EXE} >/dev/null

I don't see a reason for Make to lose the LD_LIBRARY_PATH when
launching R like this.

Can you see the failing step in the `make -d install` output? There
will be a lot of text, most of it unrelated, unfortunately.

If something loses the LD_LIBRARY_PATH environment variable on the way
from Make to R, hard-coding it in etc/ldpaths should work around the
problem, but it may be hard to find out what went wrong.

If you run `mkfifo /tmp/1` and insert `read foo </tmp/1` into
etc/ldpaths, it should hang until you write something into /tmp/1.
Using this, it should be possible to inspect /proc/${pid}/environ for
the whole process tree from the parent Make process to the shell that's
about to launch R. Can you find the first process that lacks the proper
LD_LIBRARY_PATH environment variable?

-- 
Best regards,
Ivan


From rk3199 @end|ng |rom co|umb|@@edu  Sun Nov 20 20:03:34 2022
From: rk3199 @end|ng |rom co|umb|@@edu (Rob Kudyba)
Date: Sun, 20 Nov 2022 14:03:34 -0500
Subject: [R] 
 make install libgfortran.so.5: cannot open shared object file:
 No such file or directory;
 conftest.c:1:10: fatal error: jni.h: No such file or directory
In-Reply-To: <20221120203745.1d429604@Tarkus>
References: <CAD6rq1WED=BsyCidHqBiTXpMvsAHKTfW+GddP5tMmrQXwtmozg@mail.gmail.com>
 <20221120203745.1d429604@Tarkus>
Message-ID: <CAD6rq1VLQqS7XjeT9nEYXvWgMNqTBoiE4V9_DAS1ktNskvWoKQ@mail.gmail.com>

> It should be possible to run R without installing it, as
> /path/to/R-4.2.2/bin/R (strictly speaking, as bin/R under the build
> directory, if you're building R separately from the source tree). Does
> it work?
>

So far R does seem to be working and I've tested installing some packages.
Is there any sample R program I can run to test against this error?

>
> Does /path/to/R-4.2.2/bin/R -d ldd give you any useful information?


R -d ldd
linux-vdso.so.1 =>  (0x00002aaaaaacd000)
libRblas.so => /path/to/R-4.2/lib64/R/lib/libRblas.so (0x00002aaaaaccf000)
libgfortran.so.5 => /path/to/gcc-11.2/lib64/libgfortran.so.5
(0x00002aaaaaef9000)
libm.so.6 => /lib64/libm.so.6 (0x00002aaaab3a0000)
libquadmath.so.0 => /path/to/gcc-11.2/lib64/libquadmath.so.0
(0x00002aaaab6a2000)
libreadline.so.6 => /lib64/libreadline.so.6 (0x00002aaaab8e9000)
libpcre2-8.so.0 => /path/to/pcre2-10.35/lib/libpcre2-8.so.0
(0x00002aaaabb2f000)
liblzma.so.5 => /lib64/liblzma.so.5 (0x00002aaaabd88000)
libbz2.so.1 => /lib64/libbz2.so.1 (0x00002aaaabfae000)
libz.so.1 => /lib64/libz.so.1 (0x00002aaaac1be000)
librt.so.1 => /lib64/librt.so.1 (0x00002aaaac3d4000)
libdl.so.2 => /lib64/libdl.so.2 (0x00002aaaac5dc000)
libgomp.so.1 => /path/to/gcc-11.2/lib64/libgomp.so.1 (0x00002aaaac7e0000)
libpthread.so.0 => /lib64/libpthread.so.0 (0x00002aaaaca21000)
libc.so.6 => /lib64/libc.so.6 (0x00002aaaacc3d000)
/lib64/ld-linux-x86-64.so.2 (0x00002aaaaaaab000)
libgcc_s.so.1 => /path/to/gcc-11.2/lib64/libgcc_s.so.1 (0x00002aaaad00a000)
libtinfo.so.5 => /lib64/libtinfo.so.5 (0x00002aaaad222000)


> Can
> you use strace -f -e openat /path/to/R-4.2.2/bin/R to confirm that the
> dynamic library loader is looking in /path/to/gcc-11.2/lib64 for the
> shared objects?
>

[pid 241836] +++ exited with 0 +++
--- SIGCHLD {si_signo=SIGCHLD, si_code=CLD_EXITED, si_pid=241836,
si_uid=547289, si_status=0, si_utime=0, si_stime=0} ---
openat(AT_FDCWD, "/sys/devices/system/cpu",
O_RDONLY|O_NONBLOCK|O_DIRECTORY|O_CLOEXEC) = 3

R version 4.2.2 (2022-10-31) -- "Innocent and Trusting"
Copyright (C) 2022 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

[Previously saved workspace restored]

strace: Process 241837 attached
strace: Process 241838 attached
[pid 241838] +++ exited with 0 +++
[pid 241837] --- SIGCHLD {si_signo=SIGCHLD, si_code=CLD_EXITED,
si_pid=241838, si_uid=547289, si_status=0, si_utime=0, si_stime=0} ---
[pid 241837] +++ exited with 0 +++
--- SIGCHLD {si_signo=SIGCHLD, si_code=CLD_EXITED, si_pid=241837,
si_uid=547289, si_status=0, si_utime=0, si_stime=0} ---
strace: Process 241839 attached
[pid 241839] +++ exited with 0 +++
--- SIGCHLD {si_signo=SIGCHLD, si_code=CLD_EXITED, si_pid=241839,
si_uid=547289, si_status=0, si_utime=0, si_stime=0} ---

If /path/to/gcc-11.2/lib64 is missing from both /etc/ld.so.conf and the
> environment variable LD_LIBRARY_PATH and you don't want to set it
> manually every time, you can either edit /path/to/R-4.2.2/etc/ldpaths
> or pass the -Wl,-rpath=/path/to/gcc-11.2/lib64 flag to the linker.
>

/path/to/gcc-11.2/lib is definitely in LD_LIBRARY_PATH when loading the GCC
11.2 module.

If using the /path/to/R-4.2.2/etc/ldpaths where would I put the correct
path? I would've hoped the configure/make process would've found this
automatically.

if test -n "/usr/local/lib64"; then
: ${R_LD_LIBRARY_PATH=${R_HOME}/lib:/usr/local/lib64}
else
: ${R_LD_LIBRARY_PATH=${R_HOME}/lib}
fi
if test -n "${R_JAVA_LD_LIBRARY_PATH}"; then
  R_LD_LIBRARY_PATH="${R_LD_LIBRARY_PATH}:${R_JAVA_LD_LIBRARY_PATH}"
fi
## This is DYLD_FALLBACK_LIBRARY_PATH on Darwin (macOS) and
## LD_LIBRARY_PATH elsewhere.
## However, on macOS >=10.11 (if SIP is enabled, the default), the
## environment value will not be passed to a script such as R.sh, so
## would not seen here.
if test -z "${LD_LIBRARY_PATH}"; then
  LD_LIBRARY_PATH="${R_LD_LIBRARY_PATH}"
else
  LD_LIBRARY_PATH="${R_LD_LIBRARY_PATH}:${LD_LIBRARY_PATH}"
fi
export LD_LIBRARY_PATH

> During make I see this error with Java:
>
> This error is not fatal. rJava won't work, but the rest of R should be
> fine.
>

On RHEL from what I see openjdk-devel provides jni.h.

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Mon Nov 21 17:13:24 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Mon, 21 Nov 2022 19:13:24 +0300
Subject: [R] 
 make install libgfortran.so.5: cannot open shared object file:
 No such file or directory;
 conftest.c:1:10: fatal error: jni.h: No such file or directory
In-Reply-To: <CAD6rq1XW_=RBKbtcf0q1Qqf0Onhfdtjx+qyhoaD4CK7P3s8ceQ@mail.gmail.com>
References: <CAD6rq1WED=BsyCidHqBiTXpMvsAHKTfW+GddP5tMmrQXwtmozg@mail.gmail.com>
 <20221120203745.1d429604@Tarkus>
 <CAD6rq1VLQqS7XjeT9nEYXvWgMNqTBoiE4V9_DAS1ktNskvWoKQ@mail.gmail.com>
 <20221120222623.24c39285@Tarkus>
 <CAD6rq1XW_=RBKbtcf0q1Qqf0Onhfdtjx+qyhoaD4CK7P3s8ceQ@mail.gmail.com>
Message-ID: <20221121191324.18fc3628@arachnoid>

? Mon, 21 Nov 2022 10:19:36 -0500
Rob Kudyba <rk3199 at columbia.edu> ?????:

> I edited the last line to be:
> export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/path/to/gcc-11.2/lib64 then
> make install errored with:
> /path/to/R-4.2.2/bin/exec/R: error while loading shared libraries:
> libpcre2-8.so.0: cannot open shared object file: No such file or
> directory
> 
> So it appears that the same issue happens for PCRE! I then edited the
> line to be:
> export
> LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/path/to/gcc-11.2/lib64:/path/to/pcre2-10.35/lib
> 
> Then make install finished with:
> Successfully remade target file `install'.

Does the installed copy of R work?

Are you running make install as root? Programs starting as root are wary
of environment variables such as LD_LIBRARY_PATH and may ignore or
unset them while starting up (otherwise it would be trivial to load user
code into setuid root binaries and take over the system). You may have
to load the module again after you obtain the superuser privileges.

> I ran the 1st command and then added the 'read' to the file. I'm not
> following what should've happened? I didn't need to include the back
> ticks,`, in the file, correct?

Yes, I meant to omit the backticks.

What I'm suggesting to perform is Linux process debugging:

1) Make etc/ldpaths hang just before R is (unsuccessfully) launched by
adding an I/O operation that you can control.

2) While make install -> (lots of child processes) -> bin/R is hung,
run `top`, `htop`, or any other process manager to have a look at the
process tree. There should be your shell process, the Make process, and
a number of child shell processes. The grand-(grand-...)child should be
sleeping in I/O.

3) Using either your process manager or the command

 </proc/${pid}/environ tr '\0' '\n' | grep LD_LIBRARY_PATH

(substituting the PID instead of ${pid}), see which processes in the
tree you observed in (2) have the correct value of LD_LIBRARY_PATH and
which don't.

Once you know which process is responsible for losing LD_LIBRARY_PATH,
it should be possible to take a look at its command line, source code,
documentation to find out why it does that and whether it's possible to
prevent it from doing that.

"R Installation and Administration" [1] says that the R build process
remembers the library paths to put into LD_LIBRARY_PATH, but only if
they are specified in the LDFLAGS parameter, so if there's a set of
library paths that's not expected to be normally present in
LD_LIBRARY_PATH, perhaps it's best to mention them explicitly in the
./configure call.

-- 
Best regards,
Ivan

[1] https://cran.r-project.org/doc/manuals/R-admin.html


From rmh @end|ng |rom temp|e@edu  Mon Nov 21 19:03:14 2022
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Mon, 21 Nov 2022 18:03:14 +0000
Subject: [R] linux, emacs, R on iPhone/iPad
Message-ID: <53A61029-F68D-46C3-AC7E-BE6377582195@temple.edu>

I discovered that the "iSH shell" is available for the iPhone/iPad from the Applications app.
this is Alpine linux
Once iSH is loaded from the App store, then open it to a shell and download

apk add emacs
apk add R

emacs works well for writing files and sending them to a bigger computer by airdrop or email etc.
This is the real Emacs, not the "Not Emacs" app.
The emacs uses a variant of the iPhone keyboard augmented with tab, control, escape, arrows keys
and allows swiping for typing.

R works sometimes in the linux shell outside emacs, but not yet from the emacs *shell*.
I haven't figures out how to download ESS.

iSH's help page for R
https://github.com/ish-app/ish/wiki/Installing-R-and-any-package-from-the-CRAN
gives a long docker-related way of getting arbitrary packages to work.

Is there interest in forming R-sig-iOS and CRAN support for an iOS binary repository?

Rich

From er|nm@hodge@@ @end|ng |rom gm@||@com  Mon Nov 21 19:36:09 2022
From: er|nm@hodge@@ @end|ng |rom gm@||@com (Erin Hodgess)
Date: Mon, 21 Nov 2022 11:36:09 -0700
Subject: [R] linux, emacs, R on iPhone/iPad
In-Reply-To: <53A61029-F68D-46C3-AC7E-BE6377582195@temple.edu>
References: <53A61029-F68D-46C3-AC7E-BE6377582195@temple.edu>
Message-ID: <CACxE24ne2i0oaJvy_EkBFg5L3q=sZRkur_=4c9ysnH+63z=sBg@mail.gmail.com>

Hi Dr. H:

I tried this a couple of months ago on my iPad.  Everything would load, but
when I tried to run R, it would never open.  However, my iPad is about 6
years old.  Do you need a particular model for the iPad, please?

Thanks
Erin


On Mon, Nov 21, 2022 at 11:03 AM Richard M. Heiberger <rmh at temple.edu>
wrote:

> I discovered that the "iSH shell" is available for the iPhone/iPad from
> the Applications app.
> this is Alpine linux
> Once iSH is loaded from the App store, then open it to a shell and download
>
> apk add emacs
> apk add R
>
> emacs works well for writing files and sending them to a bigger computer
> by airdrop or email etc.
> This is the real Emacs, not the "Not Emacs" app.
> The emacs uses a variant of the iPhone keyboard augmented with tab,
> control, escape, arrows keys
> and allows swiping for typing.
>
> R works sometimes in the linux shell outside emacs, but not yet from the
> emacs *shell*.
> I haven't figures out how to download ESS.
>
> iSH's help page for R
>
> https://github.com/ish-app/ish/wiki/Installing-R-and-any-package-from-the-CRAN
> gives a long docker-related way of getting arbitrary packages to work.
>
> Is there interest in forming R-sig-iOS and CRAN support for an iOS binary
> repository?
>
> Rich
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
-- 
Erin Hodgess, PhD
mailto: erinm.hodgess at gmail.com

	[[alternative HTML version deleted]]


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Mon Nov 21 19:59:59 2022
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Mon, 21 Nov 2022 19:59:59 +0100
Subject: [R] IGCI implemented in R package ?
References: <5D60578F-ED96-471F-8ABD-B399B6799291.ref@yahoo.fr>
Message-ID: <5D60578F-ED96-471F-8ABD-B399B6799291@yahoo.fr>

Dear R experts,

Google is very often my friend but this time it does not !
Are you aware of an R package in which the directed causal discovery algorithm called the Information Geometric Causal Inference (IGCI) of (Daniusis et al., 2010) is implemented ?

Best,
Sacha 

Envoy? de mon iPhone

From er|cjberger @end|ng |rom gm@||@com  Mon Nov 21 20:36:24 2022
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Mon, 21 Nov 2022 21:36:24 +0200
Subject: [R] IGCI implemented in R package ?
In-Reply-To: <5D60578F-ED96-471F-8ABD-B399B6799291@yahoo.fr>
References: <5D60578F-ED96-471F-8ABD-B399B6799291.ref@yahoo.fr>
 <5D60578F-ED96-471F-8ABD-B399B6799291@yahoo.fr>
Message-ID: <CAGgJW75r2JwpVKC4nVxhA3aXv-NoUObAZDLzYmW_p-rzRitETw@mail.gmail.com>

Hi Sacha,
My search turned up the Causal Discovery Toolbox which includes IGCI among
10 (or more) methods.
This site includes both Python and R resources and seems to be quite rich -
hopefully you will find something useful.
Here's the link:
https://fentechsolutions.github.io/CausalDiscoveryToolbox/html/index.html

HTH,
Eric


On Mon, Nov 21, 2022 at 9:00 PM varin sacha via R-help <r-help at r-project.org>
wrote:

> Dear R experts,
>
> Google is very often my friend but this time it does not !
> Are you aware of an R package in which the directed causal discovery
> algorithm called the Information Geometric Causal Inference (IGCI) of
> (Daniusis et al., 2010) is implemented ?
>
> Best,
> Sacha
>
> Envoy? de mon iPhone
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @tyen @end|ng |rom ntu@edu@tw  Mon Nov 21 21:40:43 2022
From: @tyen @end|ng |rom ntu@edu@tw (Steven T. Yen)
Date: Tue, 22 Nov 2022 04:40:43 +0800
Subject: [R] Format printing with R
Message-ID: <aa7ff442-3e7b-35b3-273a-569dfaa2cfae@ntu.edu.tw>

Hi, I have two variables with 86 observations each. Below I print with 
the print command with digit=2. But, I am getting three decimal places 
for my first variable and two for the second. Please help. Thanks.

 > cbind(Mean,Std.dev)
 ??????????? Mean?? Std.dev
 ?[1,]? 0.3107966? 0.462820
 ?[2,]? 0.1880302? 0.390736
 ?[3,] 45.3185794 16.313635
 ?[4,]? 0.5066370? 0.499956
 ?[5,]? 0.4933630? 0.499956
 ?[6,]? 0.7029150? 0.456974
 ?[7,]? 0.2970850? 0.456974
 ?[8,]? 0.7967066? 0.402449
 ?[9,]? 0.2032934? 0.402449
[10,]? 0.6582301? 0.474303
[11,]? 0.3417699? 0.474303
[12,]? 0.7262913? 0.445861
[13,]? 0.2737087? 0.445861
[14,]? 0.6415484? 0.479546
[15,]? 0.3584516? 0.479546
[16,]? 0.9110264? 0.284706
[17,]? 0.0889736? 0.284706
[18,]? 0.5211453? 0.499553
[19,]? 0.4788547? 0.499553
[20,]? 0.5481055? 0.497680
[21,]? 0.4518945? 0.497680
[22,]? 0.9135090? 0.281088
[23,]? 0.0864910? 0.281088
[24,]? 0.8727269? 0.333279
[25,]? 0.1272731? 0.333279
[26,]? 0.1015717? 0.302084
[27,]? 0.6043692? 0.488986
[28,]? 0.2940592? 0.455619
[29,]? 0.2735274? 0.445769
[30,]? 0.3777426? 0.484823
[31,]? 0.3487300? 0.476568
[32,]? 0.1603127? 0.366896
[33,]? 0.1723783? 0.377709
[34,]? 0.1230961? 0.328547
[35,]? 0.1779381? 0.382461
[36,]? 0.0964334? 0.295185
[37,]? 0.1584698? 0.365181
[38,]? 0.1113717? 0.314592
[39,]? 0.3349813? 0.471984
[40,]? 0.4081109? 0.491484
[41,]? 0.2569078? 0.436928
[42,]? 0.1034356? 0.304527
[43,]? 0.6741233? 0.468701
[44,]? 0.1254412? 0.331218
[45,]? 0.0969999? 0.295958
[46,]? 0.0587457? 0.235148
[47,]? 0.4401115? 0.496400
[48,]? 0.4689114? 0.499033
[49,]? 0.0322313? 0.176614
[50,]? 0.5907618? 0.491693
[51,]? 0.1591195? 0.365787
[52,]? 0.1132923? 0.316950
[53,]? 0.1124207? 0.315883
[54,]? 0.0244058? 0.154305
[55,]? 0.7058787? 0.455647
[56,]? 0.2941213? 0.455647
[57,]? 0.0746892? 0.262889
[58,]? 0.4749110? 0.499370
[59,]? 0.3471837? 0.476075
[60,]? 0.0435036? 0.203988
[61,]? 0.0597126? 0.236954
[62,]? 0.0478775? 0.213507
[63,]? 0.1152615? 0.319337
[64,]? 0.2074968? 0.405514
[65,]? 0.2440626? 0.429530
[66,]? 0.1605995? 0.367161
[67,]? 0.0804598? 0.272004
[68,]? 0.1442422? 0.351335
[69,]? 0.3443231? 0.475147
[70,]? 0.4280560? 0.494797
[71,]? 0.0528221? 0.223678
[72,]? 0.0805222? 0.272100
[73,]? 0.0457169? 0.208870
[74,]? 0.0485596? 0.214945
[75,]? 0.1333443? 0.339946
[76,]? 0.0932917? 0.290841
[77,]? 0.0653987? 0.247228
[78,]? 0.0573934? 0.232593
[79,]? 0.1399086? 0.346892
[80,]? 0.0887337? 0.284359
[81,]? 0.0984479? 0.297919
[82,]? 0.0914421? 0.288237
[83,]? 0.1155505? 0.319685
[84,]? 0.1363764? 0.343188
[85,]? 0.1134570? 0.317151
[86,]? 1.2985286? 0.739096
 > print(cbind(Mean,Std.dev),digits=2)
 ??????? Mean Std.dev
 ?[1,]? 0.311??? 0.46
 ?[2,]? 0.188??? 0.39
 ?[3,] 45.319?? 16.31
 ?[4,]? 0.507??? 0.50
 ?[5,]? 0.493??? 0.50
 ?[6,]? 0.703??? 0.46
 ?[7,]? 0.297??? 0.46
 ?[8,]? 0.797??? 0.40
 ?[9,]? 0.203??? 0.40
[10,]? 0.658??? 0.47
[11,]? 0.342??? 0.47
[12,]? 0.726??? 0.45
[13,]? 0.274??? 0.45
[14,]? 0.642??? 0.48
[15,]? 0.358??? 0.48
[16,]? 0.911??? 0.28
[17,]? 0.089??? 0.28
[18,]? 0.521??? 0.50
[19,]? 0.479??? 0.50
[20,]? 0.548??? 0.50
[21,]? 0.452??? 0.50
[22,]? 0.914??? 0.28
[23,]? 0.086??? 0.28
[24,]? 0.873??? 0.33
[25,]? 0.127??? 0.33
[26,]? 0.102??? 0.30
[27,]? 0.604??? 0.49
[28,]? 0.294??? 0.46
[29,]? 0.274??? 0.45
[30,]? 0.378??? 0.48
[31,]? 0.349??? 0.48
[32,]? 0.160??? 0.37
[33,]? 0.172??? 0.38
[34,]? 0.123??? 0.33
[35,]? 0.178??? 0.38
[36,]? 0.096??? 0.30
[37,]? 0.158??? 0.37
[38,]? 0.111??? 0.31
[39,]? 0.335??? 0.47
[40,]? 0.408??? 0.49
[41,]? 0.257??? 0.44
[42,]? 0.103??? 0.30
[43,]? 0.674??? 0.47
[44,]? 0.125??? 0.33
[45,]? 0.097??? 0.30
[46,]? 0.059??? 0.24
[47,]? 0.440??? 0.50
[48,]? 0.469??? 0.50
[49,]? 0.032??? 0.18
[50,]? 0.591??? 0.49
[51,]? 0.159??? 0.37
[52,]? 0.113??? 0.32
[53,]? 0.112??? 0.32
[54,]? 0.024??? 0.15
[55,]? 0.706??? 0.46
[56,]? 0.294??? 0.46
[57,]? 0.075??? 0.26
[58,]? 0.475??? 0.50
[59,]? 0.347??? 0.48
[60,]? 0.044??? 0.20
[61,]? 0.060??? 0.24
[62,]? 0.048??? 0.21
[63,]? 0.115??? 0.32
[64,]? 0.207??? 0.41
[65,]? 0.244??? 0.43
[66,]? 0.161??? 0.37
[67,]? 0.080??? 0.27
[68,]? 0.144??? 0.35
[69,]? 0.344??? 0.48
[70,]? 0.428??? 0.49
[71,]? 0.053??? 0.22
[72,]? 0.081??? 0.27
[73,]? 0.046??? 0.21
[74,]? 0.049??? 0.21
[75,]? 0.133??? 0.34
[76,]? 0.093??? 0.29
[77,]? 0.065??? 0.25
[78,]? 0.057??? 0.23
[79,]? 0.140??? 0.35
[80,]? 0.089??? 0.28
[81,]? 0.098??? 0.30
[82,]? 0.091??? 0.29
[83,]? 0.116??? 0.32
[84,]? 0.136??? 0.34
[85,]? 0.113??? 0.32
[86,]? 1.299??? 0.74
 >


From drj|m|emon @end|ng |rom gm@||@com  Mon Nov 21 22:09:55 2022
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Tue, 22 Nov 2022 08:09:55 +1100
Subject: [R] Format printing with R
In-Reply-To: <aa7ff442-3e7b-35b3-273a-569dfaa2cfae@ntu.edu.tw>
References: <aa7ff442-3e7b-35b3-273a-569dfaa2cfae@ntu.edu.tw>
Message-ID: <CA+8X3fWc5v4b=oLtRFtqT22P5h8QvNCqu5Z9P85pahESk478qQ@mail.gmail.com>

Hi Steven,
I thought that the problem might be in the two large numbers, but
using a subset (I didn't want to edit out all the line numbers), I get
what I expected:

sydf<-read.table(text="Mean   Std.dev
 [1,]  0.3107966  0.462820
 [2,]  0.1880302  0.390736
 [3,] 45.3185794 16.313635
 [4,]  0.5066370  0.499956
 [5,]  0.4933630  0.499956
 [6,]  0.7029150  0.456974
 [7,]  0.2970850  0.456974
 [8,]  0.7967066  0.402449
 [9,]  0.2032934  0.402449",
stringsAsFactors=FALSE,header=TRUE)
> print(sydf,digits=2)
     Mean Std.dev
[1,]  0.31    0.46
[2,]  0.19    0.39
[3,] 45.32   16.31
[4,]  0.51    0.50
[5,]  0.49    0.50
[6,]  0.70    0.46
[7,]  0.30    0.46
[8,]  0.80    0.40
[9,]  0.20    0.40

I don't think it is your use of "cbind", but I didn't edit out Mean
and Std.dev and try it.

Jim

On Tue, Nov 22, 2022 at 7:41 AM Steven T. Yen via R-help
<r-help at r-project.org> wrote:
>
> Hi, I have two variables with 86 observations each. Below I print with
> the print command with digit=2. But, I am getting three decimal places
> for my first variable and two for the second. Please help. Thanks.
>
>  > cbind(Mean,Std.dev)
>              Mean   Std.dev
>   [1,]  0.3107966  0.462820
>   [2,]  0.1880302  0.390736
>   [3,] 45.3185794 16.313635
>   [4,]  0.5066370  0.499956
>   [5,]  0.4933630  0.499956
>   [6,]  0.7029150  0.456974
>   [7,]  0.2970850  0.456974
>   [8,]  0.7967066  0.402449
>   [9,]  0.2032934  0.402449
> [10,]  0.6582301  0.474303
> [11,]  0.3417699  0.474303
> [12,]  0.7262913  0.445861
> [13,]  0.2737087  0.445861
> [14,]  0.6415484  0.479546
> [15,]  0.3584516  0.479546
> [16,]  0.9110264  0.284706
> [17,]  0.0889736  0.284706
> [18,]  0.5211453  0.499553
> [19,]  0.4788547  0.499553
> [20,]  0.5481055  0.497680
> [21,]  0.4518945  0.497680
> [22,]  0.9135090  0.281088
> [23,]  0.0864910  0.281088
> [24,]  0.8727269  0.333279
> [25,]  0.1272731  0.333279
> [26,]  0.1015717  0.302084
> [27,]  0.6043692  0.488986
> [28,]  0.2940592  0.455619
> [29,]  0.2735274  0.445769
> [30,]  0.3777426  0.484823
> [31,]  0.3487300  0.476568
> [32,]  0.1603127  0.366896
> [33,]  0.1723783  0.377709
> [34,]  0.1230961  0.328547
> [35,]  0.1779381  0.382461
> [36,]  0.0964334  0.295185
> [37,]  0.1584698  0.365181
> [38,]  0.1113717  0.314592
> [39,]  0.3349813  0.471984
> [40,]  0.4081109  0.491484
> [41,]  0.2569078  0.436928
> [42,]  0.1034356  0.304527
> [43,]  0.6741233  0.468701
> [44,]  0.1254412  0.331218
> [45,]  0.0969999  0.295958
> [46,]  0.0587457  0.235148
> [47,]  0.4401115  0.496400
> [48,]  0.4689114  0.499033
> [49,]  0.0322313  0.176614
> [50,]  0.5907618  0.491693
> [51,]  0.1591195  0.365787
> [52,]  0.1132923  0.316950
> [53,]  0.1124207  0.315883
> [54,]  0.0244058  0.154305
> [55,]  0.7058787  0.455647
> [56,]  0.2941213  0.455647
> [57,]  0.0746892  0.262889
> [58,]  0.4749110  0.499370
> [59,]  0.3471837  0.476075
> [60,]  0.0435036  0.203988
> [61,]  0.0597126  0.236954
> [62,]  0.0478775  0.213507
> [63,]  0.1152615  0.319337
> [64,]  0.2074968  0.405514
> [65,]  0.2440626  0.429530
> [66,]  0.1605995  0.367161
> [67,]  0.0804598  0.272004
> [68,]  0.1442422  0.351335
> [69,]  0.3443231  0.475147
> [70,]  0.4280560  0.494797
> [71,]  0.0528221  0.223678
> [72,]  0.0805222  0.272100
> [73,]  0.0457169  0.208870
> [74,]  0.0485596  0.214945
> [75,]  0.1333443  0.339946
> [76,]  0.0932917  0.290841
> [77,]  0.0653987  0.247228
> [78,]  0.0573934  0.232593
> [79,]  0.1399086  0.346892
> [80,]  0.0887337  0.284359
> [81,]  0.0984479  0.297919
> [82,]  0.0914421  0.288237
> [83,]  0.1155505  0.319685
> [84,]  0.1363764  0.343188
> [85,]  0.1134570  0.317151
> [86,]  1.2985286  0.739096
>  > print(cbind(Mean,Std.dev),digits=2)
>          Mean Std.dev
>   [1,]  0.311    0.46
>   [2,]  0.188    0.39
>   [3,] 45.319   16.31
>   [4,]  0.507    0.50
>   [5,]  0.493    0.50
>   [6,]  0.703    0.46
>   [7,]  0.297    0.46
>   [8,]  0.797    0.40
>   [9,]  0.203    0.40
> [10,]  0.658    0.47
> [11,]  0.342    0.47
> [12,]  0.726    0.45
> [13,]  0.274    0.45
> [14,]  0.642    0.48
> [15,]  0.358    0.48
> [16,]  0.911    0.28
> [17,]  0.089    0.28
> [18,]  0.521    0.50
> [19,]  0.479    0.50
> [20,]  0.548    0.50
> [21,]  0.452    0.50
> [22,]  0.914    0.28
> [23,]  0.086    0.28
> [24,]  0.873    0.33
> [25,]  0.127    0.33
> [26,]  0.102    0.30
> [27,]  0.604    0.49
> [28,]  0.294    0.46
> [29,]  0.274    0.45
> [30,]  0.378    0.48
> [31,]  0.349    0.48
> [32,]  0.160    0.37
> [33,]  0.172    0.38
> [34,]  0.123    0.33
> [35,]  0.178    0.38
> [36,]  0.096    0.30
> [37,]  0.158    0.37
> [38,]  0.111    0.31
> [39,]  0.335    0.47
> [40,]  0.408    0.49
> [41,]  0.257    0.44
> [42,]  0.103    0.30
> [43,]  0.674    0.47
> [44,]  0.125    0.33
> [45,]  0.097    0.30
> [46,]  0.059    0.24
> [47,]  0.440    0.50
> [48,]  0.469    0.50
> [49,]  0.032    0.18
> [50,]  0.591    0.49
> [51,]  0.159    0.37
> [52,]  0.113    0.32
> [53,]  0.112    0.32
> [54,]  0.024    0.15
> [55,]  0.706    0.46
> [56,]  0.294    0.46
> [57,]  0.075    0.26
> [58,]  0.475    0.50
> [59,]  0.347    0.48
> [60,]  0.044    0.20
> [61,]  0.060    0.24
> [62,]  0.048    0.21
> [63,]  0.115    0.32
> [64,]  0.207    0.41
> [65,]  0.244    0.43
> [66,]  0.161    0.37
> [67,]  0.080    0.27
> [68,]  0.144    0.35
> [69,]  0.344    0.48
> [70,]  0.428    0.49
> [71,]  0.053    0.22
> [72,]  0.081    0.27
> [73,]  0.046    0.21
> [74,]  0.049    0.21
> [75,]  0.133    0.34
> [76,]  0.093    0.29
> [77,]  0.065    0.25
> [78,]  0.057    0.23
> [79,]  0.140    0.35
> [80,]  0.089    0.28
> [81,]  0.098    0.30
> [82,]  0.091    0.29
> [83,]  0.116    0.32
> [84,]  0.136    0.34
> [85,]  0.113    0.32
> [86,]  1.299    0.74
>  >
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Nov 21 22:29:19 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 21 Nov 2022 13:29:19 -0800
Subject: [R] Format printing with R
In-Reply-To: <CA+8X3fWc5v4b=oLtRFtqT22P5h8QvNCqu5Z9P85pahESk478qQ@mail.gmail.com>
References: <aa7ff442-3e7b-35b3-273a-569dfaa2cfae@ntu.edu.tw>
 <CA+8X3fWc5v4b=oLtRFtqT22P5h8QvNCqu5Z9P85pahESk478qQ@mail.gmail.com>
Message-ID: <3FD1C0EE-C04E-4C79-93E8-F7599776DC46@dcn.davis.ca.us>

For better reproducibility, use dput to share data. A matrix and a data frame look similar, but they can act differently.

On November 21, 2022 1:09:55 PM PST, Jim Lemon <drjimlemon at gmail.com> wrote:
>Hi Steven,
>I thought that the problem might be in the two large numbers, but
>using a subset (I didn't want to edit out all the line numbers), I get
>what I expected:
>
>sydf<-read.table(text="Mean   Std.dev
> [1,]  0.3107966  0.462820
> [2,]  0.1880302  0.390736
> [3,] 45.3185794 16.313635
> [4,]  0.5066370  0.499956
> [5,]  0.4933630  0.499956
> [6,]  0.7029150  0.456974
> [7,]  0.2970850  0.456974
> [8,]  0.7967066  0.402449
> [9,]  0.2032934  0.402449",
>stringsAsFactors=FALSE,header=TRUE)
>> print(sydf,digits=2)
>     Mean Std.dev
>[1,]  0.31    0.46
>[2,]  0.19    0.39
>[3,] 45.32   16.31
>[4,]  0.51    0.50
>[5,]  0.49    0.50
>[6,]  0.70    0.46
>[7,]  0.30    0.46
>[8,]  0.80    0.40
>[9,]  0.20    0.40
>
>I don't think it is your use of "cbind", but I didn't edit out Mean
>and Std.dev and try it.
>
>Jim
>
>On Tue, Nov 22, 2022 at 7:41 AM Steven T. Yen via R-help
><r-help at r-project.org> wrote:
>>
>> Hi, I have two variables with 86 observations each. Below I print with
>> the print command with digit=2. But, I am getting three decimal places
>> for my first variable and two for the second. Please help. Thanks.
>>
>>  > cbind(Mean,Std.dev)
>>              Mean   Std.dev
>>   [1,]  0.3107966  0.462820
>>   [2,]  0.1880302  0.390736
>>   [3,] 45.3185794 16.313635
>>   [4,]  0.5066370  0.499956
>>   [5,]  0.4933630  0.499956
>>   [6,]  0.7029150  0.456974
>>   [7,]  0.2970850  0.456974
>>   [8,]  0.7967066  0.402449
>>   [9,]  0.2032934  0.402449
>> [10,]  0.6582301  0.474303
>> [11,]  0.3417699  0.474303
>> [12,]  0.7262913  0.445861
>> [13,]  0.2737087  0.445861
>> [14,]  0.6415484  0.479546
>> [15,]  0.3584516  0.479546
>> [16,]  0.9110264  0.284706
>> [17,]  0.0889736  0.284706
>> [18,]  0.5211453  0.499553
>> [19,]  0.4788547  0.499553
>> [20,]  0.5481055  0.497680
>> [21,]  0.4518945  0.497680
>> [22,]  0.9135090  0.281088
>> [23,]  0.0864910  0.281088
>> [24,]  0.8727269  0.333279
>> [25,]  0.1272731  0.333279
>> [26,]  0.1015717  0.302084
>> [27,]  0.6043692  0.488986
>> [28,]  0.2940592  0.455619
>> [29,]  0.2735274  0.445769
>> [30,]  0.3777426  0.484823
>> [31,]  0.3487300  0.476568
>> [32,]  0.1603127  0.366896
>> [33,]  0.1723783  0.377709
>> [34,]  0.1230961  0.328547
>> [35,]  0.1779381  0.382461
>> [36,]  0.0964334  0.295185
>> [37,]  0.1584698  0.365181
>> [38,]  0.1113717  0.314592
>> [39,]  0.3349813  0.471984
>> [40,]  0.4081109  0.491484
>> [41,]  0.2569078  0.436928
>> [42,]  0.1034356  0.304527
>> [43,]  0.6741233  0.468701
>> [44,]  0.1254412  0.331218
>> [45,]  0.0969999  0.295958
>> [46,]  0.0587457  0.235148
>> [47,]  0.4401115  0.496400
>> [48,]  0.4689114  0.499033
>> [49,]  0.0322313  0.176614
>> [50,]  0.5907618  0.491693
>> [51,]  0.1591195  0.365787
>> [52,]  0.1132923  0.316950
>> [53,]  0.1124207  0.315883
>> [54,]  0.0244058  0.154305
>> [55,]  0.7058787  0.455647
>> [56,]  0.2941213  0.455647
>> [57,]  0.0746892  0.262889
>> [58,]  0.4749110  0.499370
>> [59,]  0.3471837  0.476075
>> [60,]  0.0435036  0.203988
>> [61,]  0.0597126  0.236954
>> [62,]  0.0478775  0.213507
>> [63,]  0.1152615  0.319337
>> [64,]  0.2074968  0.405514
>> [65,]  0.2440626  0.429530
>> [66,]  0.1605995  0.367161
>> [67,]  0.0804598  0.272004
>> [68,]  0.1442422  0.351335
>> [69,]  0.3443231  0.475147
>> [70,]  0.4280560  0.494797
>> [71,]  0.0528221  0.223678
>> [72,]  0.0805222  0.272100
>> [73,]  0.0457169  0.208870
>> [74,]  0.0485596  0.214945
>> [75,]  0.1333443  0.339946
>> [76,]  0.0932917  0.290841
>> [77,]  0.0653987  0.247228
>> [78,]  0.0573934  0.232593
>> [79,]  0.1399086  0.346892
>> [80,]  0.0887337  0.284359
>> [81,]  0.0984479  0.297919
>> [82,]  0.0914421  0.288237
>> [83,]  0.1155505  0.319685
>> [84,]  0.1363764  0.343188
>> [85,]  0.1134570  0.317151
>> [86,]  1.2985286  0.739096
>>  > print(cbind(Mean,Std.dev),digits=2)
>>          Mean Std.dev
>>   [1,]  0.311    0.46
>>   [2,]  0.188    0.39
>>   [3,] 45.319   16.31
>>   [4,]  0.507    0.50
>>   [5,]  0.493    0.50
>>   [6,]  0.703    0.46
>>   [7,]  0.297    0.46
>>   [8,]  0.797    0.40
>>   [9,]  0.203    0.40
>> [10,]  0.658    0.47
>> [11,]  0.342    0.47
>> [12,]  0.726    0.45
>> [13,]  0.274    0.45
>> [14,]  0.642    0.48
>> [15,]  0.358    0.48
>> [16,]  0.911    0.28
>> [17,]  0.089    0.28
>> [18,]  0.521    0.50
>> [19,]  0.479    0.50
>> [20,]  0.548    0.50
>> [21,]  0.452    0.50
>> [22,]  0.914    0.28
>> [23,]  0.086    0.28
>> [24,]  0.873    0.33
>> [25,]  0.127    0.33
>> [26,]  0.102    0.30
>> [27,]  0.604    0.49
>> [28,]  0.294    0.46
>> [29,]  0.274    0.45
>> [30,]  0.378    0.48
>> [31,]  0.349    0.48
>> [32,]  0.160    0.37
>> [33,]  0.172    0.38
>> [34,]  0.123    0.33
>> [35,]  0.178    0.38
>> [36,]  0.096    0.30
>> [37,]  0.158    0.37
>> [38,]  0.111    0.31
>> [39,]  0.335    0.47
>> [40,]  0.408    0.49
>> [41,]  0.257    0.44
>> [42,]  0.103    0.30
>> [43,]  0.674    0.47
>> [44,]  0.125    0.33
>> [45,]  0.097    0.30
>> [46,]  0.059    0.24
>> [47,]  0.440    0.50
>> [48,]  0.469    0.50
>> [49,]  0.032    0.18
>> [50,]  0.591    0.49
>> [51,]  0.159    0.37
>> [52,]  0.113    0.32
>> [53,]  0.112    0.32
>> [54,]  0.024    0.15
>> [55,]  0.706    0.46
>> [56,]  0.294    0.46
>> [57,]  0.075    0.26
>> [58,]  0.475    0.50
>> [59,]  0.347    0.48
>> [60,]  0.044    0.20
>> [61,]  0.060    0.24
>> [62,]  0.048    0.21
>> [63,]  0.115    0.32
>> [64,]  0.207    0.41
>> [65,]  0.244    0.43
>> [66,]  0.161    0.37
>> [67,]  0.080    0.27
>> [68,]  0.144    0.35
>> [69,]  0.344    0.48
>> [70,]  0.428    0.49
>> [71,]  0.053    0.22
>> [72,]  0.081    0.27
>> [73,]  0.046    0.21
>> [74,]  0.049    0.21
>> [75,]  0.133    0.34
>> [76,]  0.093    0.29
>> [77,]  0.065    0.25
>> [78,]  0.057    0.23
>> [79,]  0.140    0.35
>> [80,]  0.089    0.28
>> [81,]  0.098    0.30
>> [82,]  0.091    0.29
>> [83,]  0.116    0.32
>> [84,]  0.136    0.34
>> [85,]  0.113    0.32
>> [86,]  1.299    0.74
>>  >
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From @kw@|mmo @end|ng |rom gm@||@com  Mon Nov 21 22:41:37 2022
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Mon, 21 Nov 2022 16:41:37 -0500
Subject: [R] Format printing with R
In-Reply-To: <aa7ff442-3e7b-35b3-273a-569dfaa2cfae@ntu.edu.tw>
References: <aa7ff442-3e7b-35b3-273a-569dfaa2cfae@ntu.edu.tw>
Message-ID: <CAPcHnpSSEe0=Gio0MqZV1LOmFG=22qxUZmtLxdZHQoVonfCPcQ@mail.gmail.com>

For print(), digits is the minimal number of significant digits. In
your case, rounding the first column to the 3rd decimal place gives at
least 2 sigfigs and rounding the second column to the 2nd decimal
place.

If you want to print all numbers to two significant digits, regardless
of what other numbers are in the column, use signif() before print():

Mean <- c(0.3107966, 0.1880302, 45.3185794, 0.506637, 0.493363,
    0.702915, 0.297085, 0.7967066, 0.2032934, 0.6582301, 0.3417699,
    0.7262913, 0.2737087, 0.6415484, 0.3584516, 0.9110264, 0.0889736,
    0.5211453, 0.4788547, 0.5481055, 0.4518945, 0.913509, 0.086491,
    0.8727269, 0.1272731, 0.1015717, 0.6043692, 0.2940592, 0.2735274,
    0.3777426, 0.34873, 0.1603127, 0.1723783, 0.1230961, 0.1779381,
    0.0964334, 0.1584698, 0.1113717, 0.3349813, 0.4081109, 0.2569078,
    0.1034356, 0.6741233, 0.1254412, 0.0969999, 0.0587457, 0.4401115,
    0.4689114, 0.0322313, 0.5907618, 0.1591195, 0.1132923, 0.1124207,
    0.0244058, 0.7058787, 0.2941213, 0.0746892, 0.474911, 0.3471837,
    0.0435036, 0.0597126, 0.0478775, 0.1152615, 0.2074968, 0.2440626,
    0.1605995, 0.0804598, 0.1442422, 0.3443231, 0.428056, 0.0528221,
    0.0805222, 0.0457169, 0.0485596, 0.1333443, 0.0932917, 0.0653987,
    0.0573934, 0.1399086, 0.0887337, 0.0984479, 0.0914421, 0.1155505,
    0.1363764, 0.113457, 1.2985286)
Std.dev <- c(0.46282, 0.390736, 16.313635, 0.499956, 0.499956,
    0.456974, 0.456974, 0.402449, 0.402449, 0.474303, 0.474303, 0.445861,
    0.445861, 0.479546, 0.479546, 0.284706, 0.284706, 0.499553, 0.499553,
    0.49768, 0.49768, 0.281088, 0.281088, 0.333279, 0.333279, 0.302084,
    0.488986, 0.455619, 0.445769, 0.484823, 0.476568, 0.366896, 0.377709,
    0.328547, 0.382461, 0.295185, 0.365181, 0.314592, 0.471984, 0.491484,
    0.436928, 0.304527, 0.468701, 0.331218, 0.295958, 0.235148, 0.4964,
    0.499033, 0.176614, 0.491693, 0.365787, 0.31695, 0.315883, 0.154305,
    0.455647, 0.455647, 0.262889, 0.49937, 0.476075, 0.203988, 0.236954,
    0.213507, 0.319337, 0.405514, 0.42953, 0.367161, 0.272004, 0.351335,
    0.475147, 0.494797, 0.223678, 0.2721, 0.20887, 0.214945, 0.339946,
    0.290841, 0.247228, 0.232593, 0.346892, 0.284359, 0.297919, 0.288237,
    0.319685, 0.343188, 0.317151, 0.739096)
print(signif(cbind(Mean, Std.dev), 2))

which looks like:

> print(signif(cbind(Mean, Std.dev), 2))
        Mean Std.dev
 [1,]  0.310    0.46
 [2,]  0.190    0.39
 [3,] 45.000   16.00
 [4,]  0.510    0.50
 [5,]  0.490    0.50
 [6,]  0.700    0.46
 [7,]  0.300    0.46
 [8,]  0.800    0.40
 [9,]  0.200    0.40
[10,]  0.660    0.47
[11,]  0.340    0.47
[12,]  0.730    0.45
[13,]  0.270    0.45
[14,]  0.640    0.48
[15,]  0.360    0.48
[16,]  0.910    0.28
[17,]  0.089    0.28
[18,]  0.520    0.50
[19,]  0.480    0.50
[20,]  0.550    0.50
[21,]  0.450    0.50
[22,]  0.910    0.28
[23,]  0.086    0.28
[24,]  0.870    0.33
[25,]  0.130    0.33
[26,]  0.100    0.30
[27,]  0.600    0.49
[28,]  0.290    0.46
[29,]  0.270    0.45
[30,]  0.380    0.48
[31,]  0.350    0.48
[32,]  0.160    0.37
[33,]  0.170    0.38
[34,]  0.120    0.33
[35,]  0.180    0.38
[36,]  0.096    0.30
[37,]  0.160    0.37
[38,]  0.110    0.31
[39,]  0.330    0.47
[40,]  0.410    0.49
[41,]  0.260    0.44
[42,]  0.100    0.30
[43,]  0.670    0.47
[44,]  0.130    0.33
[45,]  0.097    0.30
[46,]  0.059    0.24
[47,]  0.440    0.50
[48,]  0.470    0.50
[49,]  0.032    0.18
[50,]  0.590    0.49
[51,]  0.160    0.37
[52,]  0.110    0.32
[53,]  0.110    0.32
[54,]  0.024    0.15
[55,]  0.710    0.46
[56,]  0.290    0.46
[57,]  0.075    0.26
[58,]  0.470    0.50
[59,]  0.350    0.48
[60,]  0.044    0.20
[61,]  0.060    0.24
[62,]  0.048    0.21
[63,]  0.120    0.32
[64,]  0.210    0.41
[65,]  0.240    0.43
[66,]  0.160    0.37
[67,]  0.080    0.27
[68,]  0.140    0.35
[69,]  0.340    0.48
[70,]  0.430    0.49
[71,]  0.053    0.22
[72,]  0.081    0.27
[73,]  0.046    0.21
[74,]  0.049    0.21
[75,]  0.130    0.34
[76,]  0.093    0.29
[77,]  0.065    0.25
[78,]  0.057    0.23
[79,]  0.140    0.35
[80,]  0.089    0.28
[81,]  0.098    0.30
[82,]  0.091    0.29
[83,]  0.120    0.32
[84,]  0.140    0.34
[85,]  0.110    0.32
[86,]  1.300    0.74
>

R will still print 3 decimal places for the third column since it
wants them to be of the same format, but each number is 2 sigfigs.

On Mon, Nov 21, 2022 at 3:41 PM Steven T. Yen via R-help
<r-help at r-project.org> wrote:
>
> Hi, I have two variables with 86 observations each. Below I print with
> the print command with digit=2. But, I am getting three decimal places
> for my first variable and two for the second. Please help. Thanks.
>
>  > cbind(Mean,Std.dev)
>              Mean   Std.dev
>   [1,]  0.3107966  0.462820
>   [2,]  0.1880302  0.390736
>   [3,] 45.3185794 16.313635
>   [4,]  0.5066370  0.499956
>   [5,]  0.4933630  0.499956
>   [6,]  0.7029150  0.456974
>   [7,]  0.2970850  0.456974
>   [8,]  0.7967066  0.402449
>   [9,]  0.2032934  0.402449
> [10,]  0.6582301  0.474303
> [11,]  0.3417699  0.474303
> [12,]  0.7262913  0.445861
> [13,]  0.2737087  0.445861
> [14,]  0.6415484  0.479546
> [15,]  0.3584516  0.479546
> [16,]  0.9110264  0.284706
> [17,]  0.0889736  0.284706
> [18,]  0.5211453  0.499553
> [19,]  0.4788547  0.499553
> [20,]  0.5481055  0.497680
> [21,]  0.4518945  0.497680
> [22,]  0.9135090  0.281088
> [23,]  0.0864910  0.281088
> [24,]  0.8727269  0.333279
> [25,]  0.1272731  0.333279
> [26,]  0.1015717  0.302084
> [27,]  0.6043692  0.488986
> [28,]  0.2940592  0.455619
> [29,]  0.2735274  0.445769
> [30,]  0.3777426  0.484823
> [31,]  0.3487300  0.476568
> [32,]  0.1603127  0.366896
> [33,]  0.1723783  0.377709
> [34,]  0.1230961  0.328547
> [35,]  0.1779381  0.382461
> [36,]  0.0964334  0.295185
> [37,]  0.1584698  0.365181
> [38,]  0.1113717  0.314592
> [39,]  0.3349813  0.471984
> [40,]  0.4081109  0.491484
> [41,]  0.2569078  0.436928
> [42,]  0.1034356  0.304527
> [43,]  0.6741233  0.468701
> [44,]  0.1254412  0.331218
> [45,]  0.0969999  0.295958
> [46,]  0.0587457  0.235148
> [47,]  0.4401115  0.496400
> [48,]  0.4689114  0.499033
> [49,]  0.0322313  0.176614
> [50,]  0.5907618  0.491693
> [51,]  0.1591195  0.365787
> [52,]  0.1132923  0.316950
> [53,]  0.1124207  0.315883
> [54,]  0.0244058  0.154305
> [55,]  0.7058787  0.455647
> [56,]  0.2941213  0.455647
> [57,]  0.0746892  0.262889
> [58,]  0.4749110  0.499370
> [59,]  0.3471837  0.476075
> [60,]  0.0435036  0.203988
> [61,]  0.0597126  0.236954
> [62,]  0.0478775  0.213507
> [63,]  0.1152615  0.319337
> [64,]  0.2074968  0.405514
> [65,]  0.2440626  0.429530
> [66,]  0.1605995  0.367161
> [67,]  0.0804598  0.272004
> [68,]  0.1442422  0.351335
> [69,]  0.3443231  0.475147
> [70,]  0.4280560  0.494797
> [71,]  0.0528221  0.223678
> [72,]  0.0805222  0.272100
> [73,]  0.0457169  0.208870
> [74,]  0.0485596  0.214945
> [75,]  0.1333443  0.339946
> [76,]  0.0932917  0.290841
> [77,]  0.0653987  0.247228
> [78,]  0.0573934  0.232593
> [79,]  0.1399086  0.346892
> [80,]  0.0887337  0.284359
> [81,]  0.0984479  0.297919
> [82,]  0.0914421  0.288237
> [83,]  0.1155505  0.319685
> [84,]  0.1363764  0.343188
> [85,]  0.1134570  0.317151
> [86,]  1.2985286  0.739096
>  > print(cbind(Mean,Std.dev),digits=2)
>          Mean Std.dev
>   [1,]  0.311    0.46
>   [2,]  0.188    0.39
>   [3,] 45.319   16.31
>   [4,]  0.507    0.50
>   [5,]  0.493    0.50
>   [6,]  0.703    0.46
>   [7,]  0.297    0.46
>   [8,]  0.797    0.40
>   [9,]  0.203    0.40
> [10,]  0.658    0.47
> [11,]  0.342    0.47
> [12,]  0.726    0.45
> [13,]  0.274    0.45
> [14,]  0.642    0.48
> [15,]  0.358    0.48
> [16,]  0.911    0.28
> [17,]  0.089    0.28
> [18,]  0.521    0.50
> [19,]  0.479    0.50
> [20,]  0.548    0.50
> [21,]  0.452    0.50
> [22,]  0.914    0.28
> [23,]  0.086    0.28
> [24,]  0.873    0.33
> [25,]  0.127    0.33
> [26,]  0.102    0.30
> [27,]  0.604    0.49
> [28,]  0.294    0.46
> [29,]  0.274    0.45
> [30,]  0.378    0.48
> [31,]  0.349    0.48
> [32,]  0.160    0.37
> [33,]  0.172    0.38
> [34,]  0.123    0.33
> [35,]  0.178    0.38
> [36,]  0.096    0.30
> [37,]  0.158    0.37
> [38,]  0.111    0.31
> [39,]  0.335    0.47
> [40,]  0.408    0.49
> [41,]  0.257    0.44
> [42,]  0.103    0.30
> [43,]  0.674    0.47
> [44,]  0.125    0.33
> [45,]  0.097    0.30
> [46,]  0.059    0.24
> [47,]  0.440    0.50
> [48,]  0.469    0.50
> [49,]  0.032    0.18
> [50,]  0.591    0.49
> [51,]  0.159    0.37
> [52,]  0.113    0.32
> [53,]  0.112    0.32
> [54,]  0.024    0.15
> [55,]  0.706    0.46
> [56,]  0.294    0.46
> [57,]  0.075    0.26
> [58,]  0.475    0.50
> [59,]  0.347    0.48
> [60,]  0.044    0.20
> [61,]  0.060    0.24
> [62,]  0.048    0.21
> [63,]  0.115    0.32
> [64,]  0.207    0.41
> [65,]  0.244    0.43
> [66,]  0.161    0.37
> [67,]  0.080    0.27
> [68,]  0.144    0.35
> [69,]  0.344    0.48
> [70,]  0.428    0.49
> [71,]  0.053    0.22
> [72,]  0.081    0.27
> [73,]  0.046    0.21
> [74,]  0.049    0.21
> [75,]  0.133    0.34
> [76,]  0.093    0.29
> [77,]  0.065    0.25
> [78,]  0.057    0.23
> [79,]  0.140    0.35
> [80,]  0.089    0.28
> [81,]  0.098    0.30
> [82,]  0.091    0.29
> [83,]  0.116    0.32
> [84,]  0.136    0.34
> [85,]  0.113    0.32
> [86,]  1.299    0.74
>  >
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From rk3199 @end|ng |rom co|umb|@@edu  Mon Nov 21 16:19:36 2022
From: rk3199 @end|ng |rom co|umb|@@edu (Rob Kudyba)
Date: Mon, 21 Nov 2022 10:19:36 -0500
Subject: [R] 
 make install libgfortran.so.5: cannot open shared object file:
 No such file or directory;
 conftest.c:1:10: fatal error: jni.h: No such file or directory
In-Reply-To: <20221120222623.24c39285@Tarkus>
References: <CAD6rq1WED=BsyCidHqBiTXpMvsAHKTfW+GddP5tMmrQXwtmozg@mail.gmail.com>
 <20221120203745.1d429604@Tarkus>
 <CAD6rq1VLQqS7XjeT9nEYXvWgMNqTBoiE4V9_DAS1ktNskvWoKQ@mail.gmail.com>
 <20221120222623.24c39285@Tarkus>
Message-ID: <CAD6rq1XW_=RBKbtcf0q1Qqf0Onhfdtjx+qyhoaD4CK7P3s8ceQ@mail.gmail.com>

On Sun, Nov 20, 2022 at 2:26 PM Ivan Krylov <krylov.r00t at gmail.com> wrote:

> On Sun, 20 Nov 2022 14:03:34 -0500
> Rob Kudyba <rk3199 at columbia.edu> wrote:
>
> > /path/to/gcc-11.2/lib is definitely in LD_LIBRARY_PATH when loading
> > the GCC 11.2 module.
> >
> > If using the /path/to/R-4.2.2/etc/ldpaths where would I put the
> > correct path? I would've hoped the configure/make process would've
> > found this automatically.
>
> Interesting that bin/R works but calling bin/R from what amounts to
> `make -C src/library install` doesn't. I think that the failing step is
> the following command:
>
> @$(ECHO) "  building HTML index ..."
> @$(ECHO) "utils:::make.packages.html(.Library, verbose=FALSE,
> docdir=\"$(DESTDIR)${rdocdir}\")" | \
>  R_DEFAULT_PACKAGES=NULL LC_ALL=C ${R_EXE} >/dev/null
>
> I don't see a reason for Make to lose the LD_LIBRARY_PATH when
> launching R like this.
>
> Can you see the failing step in the `make -d install` output? There
> will be a lot of text, most of it unrelated, unfortunately.
>

I've uploaded the output to https://easyupload.io/scuujn
The gcc-related part has this:
  Considering target file `install-main'.
   File `install-main' does not exist.
    Considering target file `install-Rscript'.
     File `install-Rscript' does not exist.
     Finished prerequisites of target file `install-Rscript'.
    Must remake target `install-Rscript'.
Invoking recipe from Makefile:71 to update target `install-Rscript'.
make[2]: Entering directory `/path/to/me/R-4.2.2/src/unix'
gcc -I. -I../../src/include -I../../src/include  -I/usr/local/include
-DHAVE_CONFIG_H    -g -O2  -L/usr/local/lib64
-DR_HOME='"/path/to/R-4.2/lib64/R"' \
  -o Rscript ./Rscript.c
Putting child 0x65bc00 (install-Rscript) PID 240122 on the chain.
Live child 0x65bc00 (install-Rscript) PID 240122

If something loses the LD_LIBRARY_PATH environment variable on the way
> from Make to R, hard-coding it in etc/ldpaths should work around the
> problem, but it may be hard to find out what went wrong.
>

I edited the last line to be:
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/path/to/gcc-11.2/lib64 then make
install errored with:
/path/to/R-4.2.2/bin/exec/R: error while loading shared libraries:
libpcre2-8.so.0: cannot open shared object file: No such file or directory

So it appears that the same issue happens for PCRE! I then edited the line
to be:
export
LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/path/to/gcc-11.2/lib64:/path/to/pcre2-10.35/lib

Then make install finished with:
Successfully remade target file `install'.


>
> If you run `mkfifo /tmp/1` and insert `read foo </tmp/1` into
> etc/ldpaths, it should hang until you write something into /tmp/1.
> Using this, it should be possible to inspect /proc/${pid}/environ for
> the whole process tree from the parent Make process to the shell that's
> about to launch R. Can you find the first process that lacks the proper
> LD_LIBRARY_PATH environment variable?
>

I ran the 1st command and then added the 'read' to the file. I'm not
following what should've happened? I didn't need to include the back
ticks,`, in the file, correct? Perhaps the debug from make install will
provide you more info?

Would this be considered a bug or enhancement?

Thanks for your help on this.

Rob

	[[alternative HTML version deleted]]


From rk3199 @end|ng |rom co|umb|@@edu  Mon Nov 21 19:19:22 2022
From: rk3199 @end|ng |rom co|umb|@@edu (Rob Kudyba)
Date: Mon, 21 Nov 2022 13:19:22 -0500
Subject: [R] 
 make install libgfortran.so.5: cannot open shared object file:
 No such file or directory;
 conftest.c:1:10: fatal error: jni.h: No such file or directory
In-Reply-To: <20221121191324.18fc3628@arachnoid>
References: <CAD6rq1WED=BsyCidHqBiTXpMvsAHKTfW+GddP5tMmrQXwtmozg@mail.gmail.com>
 <20221120203745.1d429604@Tarkus>
 <CAD6rq1VLQqS7XjeT9nEYXvWgMNqTBoiE4V9_DAS1ktNskvWoKQ@mail.gmail.com>
 <20221120222623.24c39285@Tarkus>
 <CAD6rq1XW_=RBKbtcf0q1Qqf0Onhfdtjx+qyhoaD4CK7P3s8ceQ@mail.gmail.com>
 <20221121191324.18fc3628@arachnoid>
Message-ID: <CAD6rq1W1CsPvfwnQaN_f83fhvf=mhCMfB1RrZj6=dhFHgAEm=A@mail.gmail.com>

> ? Mon, 21 Nov 2022 10:19:36 -0500
> Rob Kudyba <rk3199 at columbia.edu> ?????:
>
> > I edited the last line to be:
> > export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/path/to/gcc-11.2/lib64 then
> > make install errored with:
> > /path/to/R-4.2.2/bin/exec/R: error while loading shared libraries:
> > libpcre2-8.so.0: cannot open shared object file: No such file or
> > directory
> >
> > So it appears that the same issue happens for PCRE! I then edited the
> > line to be:
> > export
> >
> LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/path/to/gcc-11.2/lib64:/path/to/pcre2-10.35/lib
> >
> > Then make install finished with:
> > Successfully remade target file `install'.
>
> Does the installed copy of R work?
>

Yes

Are you running make install as root? Programs starting as root are wary
> of environment variables such as LD_LIBRARY_PATH and may ignore or
> unset them while starting up (otherwise it would be trivial to load user
> code into setuid root binaries and take over the system). You may have
> to load the module again after you obtain the superuser privileges.
>

Ah I should've mentioned this. I did use sudo to install as the program
modules are shared and installed by root. That has to be the reason.


> "R Installation and Administration" [1] says that the R build process
> remembers the library paths to put into LD_LIBRARY_PATH, but only if
> they are specified in the LDFLAGS parameter, so if there's a set of
> library paths that's not expected to be normally present in
> LD_LIBRARY_PATH, perhaps it's best to mention them explicitly in the
> ./configure call.
>
> --
> Best regards,
> Ivan
>
> [1] https://cran.r-project.org/doc/manuals/R-admin.html


What would the ./configure options look like?

	[[alternative HTML version deleted]]


From du|c@|m@ @end|ng |rom b|gpond@com  Tue Nov 22 01:07:17 2022
From: du|c@|m@ @end|ng |rom b|gpond@com (dulcalma dulcalma)
Date: Tue, 22 Nov 2022 11:07:17 +1100 (AEDT)
Subject: [R] Format printing with R
In-Reply-To: <CA+8X3fWc5v4b=oLtRFtqT22P5h8QvNCqu5Z9P85pahESk478qQ@mail.gmail.com>
References: <aa7ff442-3e7b-35b3-273a-569dfaa2cfae@ntu.edu.tw>
 <CA+8X3fWc5v4b=oLtRFtqT22P5h8QvNCqu5Z9P85pahESk478qQ@mail.gmail.com>
Message-ID: <2ad854ae.1af71d.1849ca91379.Webtop.91@bigpond.com>

Hi All

How about data.frame or zapsmall.
Apologies for the small set but it seems to show the point

Mean = c(0.311,0.188,45.319)
sdd = c(0.36,0.39,16.31)

data.frame(Mean = Mean, St.dev = sdd)
     Mean St.dev
1  0.311   0.36
2  0.188   0.39
3 45.319  16.31

print(data.frame(Mean = Mean, St.dev = sdd),digits = 2)
    Mean St.dev
1  0.31   0.36
2  0.19   0.39
3 45.32  16.31

zapsmall(data.frame(Mean = Mean, St.dev = sdd),digits = 4)
    Mean St.dev
1  0.31   0.36
2  0.19   0.39
3 45.32  16.31

zapsmall(cbind(Mean = Mean,sdd),digits = 4)
       Mean   sdd
[1,]  0.31  0.36
[2,]  0.19  0.39
[3,] 45.32 16.31

Regards

Duncan Mackay

------ Original Message ------
From: "Jim Lemon" <drjimlemon at gmail.com>
To: "Steven T. Yen" <styen at ntu.edu.tw>
Cc: "R-help Mailing List" <r-help at r-project.org>
Sent: Tuesday, 22 Nov, 2022 At 8:09 AM
Subject: Re: [R] Format printing with R

Hi Steven,
I thought that the problem might be in the two large numbers, but
using a subset (I didn't want to edit out all the line numbers), I get
what I expected:

sydf<-read.table(text="Mean   Std.dev
  [1,]  0.3107966  0.462820
  [2,]  0.1880302  0.390736
  [3,] 45.3185794 16.313635
  [4,]  0.5066370  0.499956
  [5,]  0.4933630  0.499956
  [6,]  0.7029150  0.456974
  [7,]  0.2970850  0.456974
  [8,]  0.7967066  0.402449
  [9,]  0.2032934  0.402449",
stringsAsFactors=FALSE,header=TRUE)
> print(sydf,digits=2)
      Mean Std.dev
[1,]  0.31    0.46
[2,]  0.19    0.39
[3,] 45.32   16.31
[4,]  0.51    0.50
[5,]  0.49    0.50
[6,]  0.70    0.46
[7,]  0.30    0.46
[8,]  0.80    0.40
[9,]  0.20    0.40

I don't think it is your use of "cbind", but I didn't edit out Mean
and Std.dev and try it.

Jim

On Tue, Nov 22, 2022 at 7:41 AM Steven T. Yen via R-help
<r-help at r-project.org> wrote:
>
> Hi, I have two variables with 86 observations each. Below I print with
> the print command with digit=2. But, I am getting three decimal places
> for my first variable and two for the second. Please help. Thanks.
>
>> cbind(Mean,Std.dev)
>              Mean   Std.dev
>   [1,]  0.3107966  0.462820
>   [2,]  0.1880302  0.390736
>   [3,] 45.3185794 16.313635
>   [4,]  0.5066370  0.499956
>   [5,]  0.4933630  0.499956
>   [6,]  0.7029150  0.456974
>   [7,]  0.2970850  0.456974
>   [8,]  0.7967066  0.402449
>   [9,]  0.2032934  0.402449
> [10,]  0.6582301  0.474303
> [11,]  0.3417699  0.474303
> [12,]  0.7262913  0.445861
> [13,]  0.2737087  0.445861
> [14,]  0.6415484  0.479546
> [15,]  0.3584516  0.479546
> [16,]  0.9110264  0.284706
> [17,]  0.0889736  0.284706
> [18,]  0.5211453  0.499553
> [19,]  0.4788547  0.499553
> [20,]  0.5481055  0.497680
> [21,]  0.4518945  0.497680
> [22,]  0.9135090  0.281088
> [23,]  0.0864910  0.281088
> [24,]  0.8727269  0.333279
> [25,]  0.1272731  0.333279
> [26,]  0.1015717  0.302084
> [27,]  0.6043692  0.488986
> [28,]  0.2940592  0.455619
> [29,]  0.2735274  0.445769
> [30,]  0.3777426  0.484823
> [31,]  0.3487300  0.476568
> [32,]  0.1603127  0.366896
> [33,]  0.1723783  0.377709
> [34,]  0.1230961  0.328547
> [35,]  0.1779381  0.382461
> [36,]  0.0964334  0.295185
> [37,]  0.1584698  0.365181
> [38,]  0.1113717  0.314592
> [39,]  0.3349813  0.471984
> [40,]  0.4081109  0.491484
> [41,]  0.2569078  0.436928
> [42,]  0.1034356  0.304527
> [43,]  0.6741233  0.468701
> [44,]  0.1254412  0.331218
> [45,]  0.0969999  0.295958
> [46,]  0.0587457  0.235148
> [47,]  0.4401115  0.496400
> [48,]  0.4689114  0.499033
> [49,]  0.0322313  0.176614
> [50,]  0.5907618  0.491693
> [51,]  0.1591195  0.365787
> [52,]  0.1132923  0.316950
> [53,]  0.1124207  0.315883
> [54,]  0.0244058  0.154305
> [55,]  0.7058787  0.455647
> [56,]  0.2941213  0.455647
> [57,]  0.0746892  0.262889
> [58,]  0.4749110  0.499370
> [59,]  0.3471837  0.476075
> [60,]  0.0435036  0.203988
> [61,]  0.0597126  0.236954
> [62,]  0.0478775  0.213507
> [63,]  0.1152615  0.319337
> [64,]  0.2074968  0.405514
> [65,]  0.2440626  0.429530
> [66,]  0.1605995  0.367161
> [67,]  0.0804598  0.272004
> [68,]  0.1442422  0.351335
> [69,]  0.3443231  0.475147
> [70,]  0.4280560  0.494797
> [71,]  0.0528221  0.223678
> [72,]  0.0805222  0.272100
> [73,]  0.0457169  0.208870
> [74,]  0.0485596  0.214945
> [75,]  0.1333443  0.339946
> [76,]  0.0932917  0.290841
> [77,]  0.0653987  0.247228
> [78,]  0.0573934  0.232593
> [79,]  0.1399086  0.346892
> [80,]  0.0887337  0.284359
> [81,]  0.0984479  0.297919
> [82,]  0.0914421  0.288237
> [83,]  0.1155505  0.319685
> [84,]  0.1363764  0.343188
> [85,]  0.1134570  0.317151
> [86,]  1.2985286  0.739096
>> print(cbind(Mean,Std.dev),digits=2)
>          Mean Std.dev
>   [1,]  0.311    0.46
>   [2,]  0.188    0.39
>   [3,] 45.319   16.31
>   [4,]  0.507    0.50
>   [5,]  0.493    0.50
>   [6,]  0.703    0.46
>   [7,]  0.297    0.46
>   [8,]  0.797    0.40
>   [9,]  0.203    0.40
> [10,]  0.658    0.47
> [11,]  0.342    0.47
> [12,]  0.726    0.45
> [13,]  0.274    0.45
> [14,]  0.642    0.48
> [15,]  0.358    0.48
> [16,]  0.911    0.28
> [17,]  0.089    0.28
> [18,]  0.521    0.50
> [19,]  0.479    0.50
> [20,]  0.548    0.50
> [21,]  0.452    0.50
> [22,]  0.914    0.28
> [23,]  0.086    0.28
> [24,]  0.873    0.33
> [25,]  0.127    0.33
> [26,]  0.102    0.30
> [27,]  0.604    0.49
> [28,]  0.294    0.46
> [29,]  0.274    0.45
> [30,]  0.378    0.48
> [31,]  0.349    0.48
> [32,]  0.160    0.37
> [33,]  0.172    0.38
> [34,]  0.123    0.33
> [35,]  0.178    0.38
> [36,]  0.096    0.30
> [37,]  0.158    0.37
> [38,]  0.111    0.31
> [39,]  0.335    0.47
> [40,]  0.408    0.49
> [41,]  0.257    0.44
> [42,]  0.103    0.30
> [43,]  0.674    0.47
> [44,]  0.125    0.33
> [45,]  0.097    0.30
> [46,]  0.059    0.24
> [47,]  0.440    0.50
> [48,]  0.469    0.50
> [49,]  0.032    0.18
> [50,]  0.591    0.49
> [51,]  0.159    0.37
> [52,]  0.113    0.32
> [53,]  0.112    0.32
> [54,]  0.024    0.15
> [55,]  0.706    0.46
> [56,]  0.294    0.46
> [57,]  0.075    0.26
> [58,]  0.475    0.50
> [59,]  0.347    0.48
> [60,]  0.044    0.20
> [61,]  0.060    0.24
> [62,]  0.048    0.21
> [63,]  0.115    0.32
> [64,]  0.207    0.41
> [65,]  0.244    0.43
> [66,]  0.161    0.37
> [67,]  0.080    0.27
> [68,]  0.144    0.35
> [69,]  0.344    0.48
> [70,]  0.428    0.49
> [71,]  0.053    0.22
> [72,]  0.081    0.27
> [73,]  0.046    0.21
> [74,]  0.049    0.21
> [75,]  0.133    0.34
> [76,]  0.093    0.29
> [77,]  0.065    0.25
> [78,]  0.057    0.23
> [79,]  0.140    0.35
> [80,]  0.089    0.28
> [81,]  0.098    0.30
> [82,]  0.091    0.29
> [83,]  0.116    0.32
> [84,]  0.136    0.34
> [85,]  0.113    0.32
> [86,]  1.299    0.74
>>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide 
http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From @tyen @end|ng |rom ntu@edu@tw  Tue Nov 22 01:15:57 2022
From: @tyen @end|ng |rom ntu@edu@tw (Steven T. Yen)
Date: Tue, 22 Nov 2022 08:15:57 +0800
Subject: [R] Format printing with R
In-Reply-To: <CAPcHnpSSEe0=Gio0MqZV1LOmFG=22qxUZmtLxdZHQoVonfCPcQ@mail.gmail.com>
References: <aa7ff442-3e7b-35b3-273a-569dfaa2cfae@ntu.edu.tw>
 <CAPcHnpSSEe0=Gio0MqZV1LOmFG=22qxUZmtLxdZHQoVonfCPcQ@mail.gmail.com>
Message-ID: <75813398-2ce9-60ce-d7a5-c1224b648425@ntu.edu.tw>

Thanks to all, but no, signif() did not work:

 > print(signif(cbind(Mean,Std.dev),digits=2))
 ??????? Mean Std.dev
 ?[1,]? 0.310??? 0.46
 ?[2,]? 0.190??? 0.39
 ?[3,] 45.000?? 16.00
 ?[4,]? 0.510??? 0.50
 ?[5,]? 0.490??? 0.50
 ?[6,]? 0.700??? 0.46

On 11/22/2022 5:41 AM, Andrew Simmons wrote:
> For print(), digits is the minimal number of significant digits. In
> your case, rounding the first column to the 3rd decimal place gives at
> least 2 sigfigs and rounding the second column to the 2nd decimal
> place.
>
> If you want to print all numbers to two significant digits, regardless
> of what other numbers are in the column, use signif() before print():
>
> Mean <- c(0.3107966, 0.1880302, 45.3185794, 0.506637, 0.493363,
>      0.702915, 0.297085, 0.7967066, 0.2032934, 0.6582301, 0.3417699,
>      0.7262913, 0.2737087, 0.6415484, 0.3584516, 0.9110264, 0.0889736,
>      0.5211453, 0.4788547, 0.5481055, 0.4518945, 0.913509, 0.086491,
>      0.8727269, 0.1272731, 0.1015717, 0.6043692, 0.2940592, 0.2735274,
>      0.3777426, 0.34873, 0.1603127, 0.1723783, 0.1230961, 0.1779381,
>      0.0964334, 0.1584698, 0.1113717, 0.3349813, 0.4081109, 0.2569078,
>      0.1034356, 0.6741233, 0.1254412, 0.0969999, 0.0587457, 0.4401115,
>      0.4689114, 0.0322313, 0.5907618, 0.1591195, 0.1132923, 0.1124207,
>      0.0244058, 0.7058787, 0.2941213, 0.0746892, 0.474911, 0.3471837,
>      0.0435036, 0.0597126, 0.0478775, 0.1152615, 0.2074968, 0.2440626,
>      0.1605995, 0.0804598, 0.1442422, 0.3443231, 0.428056, 0.0528221,
>      0.0805222, 0.0457169, 0.0485596, 0.1333443, 0.0932917, 0.0653987,
>      0.0573934, 0.1399086, 0.0887337, 0.0984479, 0.0914421, 0.1155505,
>      0.1363764, 0.113457, 1.2985286)
> Std.dev <- c(0.46282, 0.390736, 16.313635, 0.499956, 0.499956,
>      0.456974, 0.456974, 0.402449, 0.402449, 0.474303, 0.474303, 0.445861,
>      0.445861, 0.479546, 0.479546, 0.284706, 0.284706, 0.499553, 0.499553,
>      0.49768, 0.49768, 0.281088, 0.281088, 0.333279, 0.333279, 0.302084,
>      0.488986, 0.455619, 0.445769, 0.484823, 0.476568, 0.366896, 0.377709,
>      0.328547, 0.382461, 0.295185, 0.365181, 0.314592, 0.471984, 0.491484,
>      0.436928, 0.304527, 0.468701, 0.331218, 0.295958, 0.235148, 0.4964,
>      0.499033, 0.176614, 0.491693, 0.365787, 0.31695, 0.315883, 0.154305,
>      0.455647, 0.455647, 0.262889, 0.49937, 0.476075, 0.203988, 0.236954,
>      0.213507, 0.319337, 0.405514, 0.42953, 0.367161, 0.272004, 0.351335,
>      0.475147, 0.494797, 0.223678, 0.2721, 0.20887, 0.214945, 0.339946,
>      0.290841, 0.247228, 0.232593, 0.346892, 0.284359, 0.297919, 0.288237,
>      0.319685, 0.343188, 0.317151, 0.739096)
> print(signif(cbind(Mean, Std.dev), 2))
>
> which looks like:
>
>> print(signif(cbind(Mean, Std.dev), 2))
>          Mean Std.dev
>   [1,]  0.310    0.46
>   [2,]  0.190    0.39
>   [3,] 45.000   16.00
>   [4,]  0.510    0.50
>   [5,]  0.490    0.50
>   [6,]  0.700    0.46
>   [7,]  0.300    0.46
>   [8,]  0.800    0.40
>   [9,]  0.200    0.40
> [10,]  0.660    0.47
> [11,]  0.340    0.47
> [12,]  0.730    0.45
> [13,]  0.270    0.45
> [14,]  0.640    0.48
> [15,]  0.360    0.48
> [16,]  0.910    0.28
> [17,]  0.089    0.28
> [18,]  0.520    0.50
> [19,]  0.480    0.50
> [20,]  0.550    0.50
> [21,]  0.450    0.50
> [22,]  0.910    0.28
> [23,]  0.086    0.28
> [24,]  0.870    0.33
> [25,]  0.130    0.33
> [26,]  0.100    0.30
> [27,]  0.600    0.49
> [28,]  0.290    0.46
> [29,]  0.270    0.45
> [30,]  0.380    0.48
> [31,]  0.350    0.48
> [32,]  0.160    0.37
> [33,]  0.170    0.38
> [34,]  0.120    0.33
> [35,]  0.180    0.38
> [36,]  0.096    0.30
> [37,]  0.160    0.37
> [38,]  0.110    0.31
> [39,]  0.330    0.47
> [40,]  0.410    0.49
> [41,]  0.260    0.44
> [42,]  0.100    0.30
> [43,]  0.670    0.47
> [44,]  0.130    0.33
> [45,]  0.097    0.30
> [46,]  0.059    0.24
> [47,]  0.440    0.50
> [48,]  0.470    0.50
> [49,]  0.032    0.18
> [50,]  0.590    0.49
> [51,]  0.160    0.37
> [52,]  0.110    0.32
> [53,]  0.110    0.32
> [54,]  0.024    0.15
> [55,]  0.710    0.46
> [56,]  0.290    0.46
> [57,]  0.075    0.26
> [58,]  0.470    0.50
> [59,]  0.350    0.48
> [60,]  0.044    0.20
> [61,]  0.060    0.24
> [62,]  0.048    0.21
> [63,]  0.120    0.32
> [64,]  0.210    0.41
> [65,]  0.240    0.43
> [66,]  0.160    0.37
> [67,]  0.080    0.27
> [68,]  0.140    0.35
> [69,]  0.340    0.48
> [70,]  0.430    0.49
> [71,]  0.053    0.22
> [72,]  0.081    0.27
> [73,]  0.046    0.21
> [74,]  0.049    0.21
> [75,]  0.130    0.34
> [76,]  0.093    0.29
> [77,]  0.065    0.25
> [78,]  0.057    0.23
> [79,]  0.140    0.35
> [80,]  0.089    0.28
> [81,]  0.098    0.30
> [82,]  0.091    0.29
> [83,]  0.120    0.32
> [84,]  0.140    0.34
> [85,]  0.110    0.32
> [86,]  1.300    0.74
> R will still print 3 decimal places for the third column since it
> wants them to be of the same format, but each number is 2 sigfigs.
>
> On Mon, Nov 21, 2022 at 3:41 PM Steven T. Yen via R-help
> <r-help at r-project.org> wrote:
>> Hi, I have two variables with 86 observations each. Below I print with
>> the print command with digit=2. But, I am getting three decimal places
>> for my first variable and two for the second. Please help. Thanks.
>>
>>   > cbind(Mean,Std.dev)
>>               Mean   Std.dev
>>    [1,]  0.3107966  0.462820
>>    [2,]  0.1880302  0.390736
>>    [3,] 45.3185794 16.313635
>>    [4,]  0.5066370  0.499956
>>    [5,]  0.4933630  0.499956
>>    [6,]  0.7029150  0.456974
>>    [7,]  0.2970850  0.456974
>>    [8,]  0.7967066  0.402449
>>    [9,]  0.2032934  0.402449
>> [10,]  0.6582301  0.474303
>> [11,]  0.3417699  0.474303
>> [12,]  0.7262913  0.445861
>> [13,]  0.2737087  0.445861
>> [14,]  0.6415484  0.479546
>> [15,]  0.3584516  0.479546
>> [16,]  0.9110264  0.284706
>> [17,]  0.0889736  0.284706
>> [18,]  0.5211453  0.499553
>> [19,]  0.4788547  0.499553
>> [20,]  0.5481055  0.497680
>> [21,]  0.4518945  0.497680
>> [22,]  0.9135090  0.281088
>> [23,]  0.0864910  0.281088
>> [24,]  0.8727269  0.333279
>> [25,]  0.1272731  0.333279
>> [26,]  0.1015717  0.302084
>> [27,]  0.6043692  0.488986
>> [28,]  0.2940592  0.455619
>> [29,]  0.2735274  0.445769
>> [30,]  0.3777426  0.484823
>> [31,]  0.3487300  0.476568
>> [32,]  0.1603127  0.366896
>> [33,]  0.1723783  0.377709
>> [34,]  0.1230961  0.328547
>> [35,]  0.1779381  0.382461
>> [36,]  0.0964334  0.295185
>> [37,]  0.1584698  0.365181
>> [38,]  0.1113717  0.314592
>> [39,]  0.3349813  0.471984
>> [40,]  0.4081109  0.491484
>> [41,]  0.2569078  0.436928
>> [42,]  0.1034356  0.304527
>> [43,]  0.6741233  0.468701
>> [44,]  0.1254412  0.331218
>> [45,]  0.0969999  0.295958
>> [46,]  0.0587457  0.235148
>> [47,]  0.4401115  0.496400
>> [48,]  0.4689114  0.499033
>> [49,]  0.0322313  0.176614
>> [50,]  0.5907618  0.491693
>> [51,]  0.1591195  0.365787
>> [52,]  0.1132923  0.316950
>> [53,]  0.1124207  0.315883
>> [54,]  0.0244058  0.154305
>> [55,]  0.7058787  0.455647
>> [56,]  0.2941213  0.455647
>> [57,]  0.0746892  0.262889
>> [58,]  0.4749110  0.499370
>> [59,]  0.3471837  0.476075
>> [60,]  0.0435036  0.203988
>> [61,]  0.0597126  0.236954
>> [62,]  0.0478775  0.213507
>> [63,]  0.1152615  0.319337
>> [64,]  0.2074968  0.405514
>> [65,]  0.2440626  0.429530
>> [66,]  0.1605995  0.367161
>> [67,]  0.0804598  0.272004
>> [68,]  0.1442422  0.351335
>> [69,]  0.3443231  0.475147
>> [70,]  0.4280560  0.494797
>> [71,]  0.0528221  0.223678
>> [72,]  0.0805222  0.272100
>> [73,]  0.0457169  0.208870
>> [74,]  0.0485596  0.214945
>> [75,]  0.1333443  0.339946
>> [76,]  0.0932917  0.290841
>> [77,]  0.0653987  0.247228
>> [78,]  0.0573934  0.232593
>> [79,]  0.1399086  0.346892
>> [80,]  0.0887337  0.284359
>> [81,]  0.0984479  0.297919
>> [82,]  0.0914421  0.288237
>> [83,]  0.1155505  0.319685
>> [84,]  0.1363764  0.343188
>> [85,]  0.1134570  0.317151
>> [86,]  1.2985286  0.739096
>>   > print(cbind(Mean,Std.dev),digits=2)
>>           Mean Std.dev
>>    [1,]  0.311    0.46
>>    [2,]  0.188    0.39
>>    [3,] 45.319   16.31
>>    [4,]  0.507    0.50
>>    [5,]  0.493    0.50
>>    [6,]  0.703    0.46
>>    [7,]  0.297    0.46
>>    [8,]  0.797    0.40
>>    [9,]  0.203    0.40
>> [10,]  0.658    0.47
>> [11,]  0.342    0.47
>> [12,]  0.726    0.45
>> [13,]  0.274    0.45
>> [14,]  0.642    0.48
>> [15,]  0.358    0.48
>> [16,]  0.911    0.28
>> [17,]  0.089    0.28
>> [18,]  0.521    0.50
>> [19,]  0.479    0.50
>> [20,]  0.548    0.50
>> [21,]  0.452    0.50
>> [22,]  0.914    0.28
>> [23,]  0.086    0.28
>> [24,]  0.873    0.33
>> [25,]  0.127    0.33
>> [26,]  0.102    0.30
>> [27,]  0.604    0.49
>> [28,]  0.294    0.46
>> [29,]  0.274    0.45
>> [30,]  0.378    0.48
>> [31,]  0.349    0.48
>> [32,]  0.160    0.37
>> [33,]  0.172    0.38
>> [34,]  0.123    0.33
>> [35,]  0.178    0.38
>> [36,]  0.096    0.30
>> [37,]  0.158    0.37
>> [38,]  0.111    0.31
>> [39,]  0.335    0.47
>> [40,]  0.408    0.49
>> [41,]  0.257    0.44
>> [42,]  0.103    0.30
>> [43,]  0.674    0.47
>> [44,]  0.125    0.33
>> [45,]  0.097    0.30
>> [46,]  0.059    0.24
>> [47,]  0.440    0.50
>> [48,]  0.469    0.50
>> [49,]  0.032    0.18
>> [50,]  0.591    0.49
>> [51,]  0.159    0.37
>> [52,]  0.113    0.32
>> [53,]  0.112    0.32
>> [54,]  0.024    0.15
>> [55,]  0.706    0.46
>> [56,]  0.294    0.46
>> [57,]  0.075    0.26
>> [58,]  0.475    0.50
>> [59,]  0.347    0.48
>> [60,]  0.044    0.20
>> [61,]  0.060    0.24
>> [62,]  0.048    0.21
>> [63,]  0.115    0.32
>> [64,]  0.207    0.41
>> [65,]  0.244    0.43
>> [66,]  0.161    0.37
>> [67,]  0.080    0.27
>> [68,]  0.144    0.35
>> [69,]  0.344    0.48
>> [70,]  0.428    0.49
>> [71,]  0.053    0.22
>> [72,]  0.081    0.27
>> [73,]  0.046    0.21
>> [74,]  0.049    0.21
>> [75,]  0.133    0.34
>> [76,]  0.093    0.29
>> [77,]  0.065    0.25
>> [78,]  0.057    0.23
>> [79,]  0.140    0.35
>> [80,]  0.089    0.28
>> [81,]  0.098    0.30
>> [82,]  0.091    0.29
>> [83,]  0.116    0.32
>> [84,]  0.136    0.34
>> [85,]  0.113    0.32
>> [86,]  1.299    0.74
>>   >
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Nov 22 01:57:56 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 21 Nov 2022 16:57:56 -0800
Subject: [R] Format printing with R
In-Reply-To: <75813398-2ce9-60ce-d7a5-c1224b648425@ntu.edu.tw>
References: <aa7ff442-3e7b-35b3-273a-569dfaa2cfae@ntu.edu.tw>
 <CAPcHnpSSEe0=Gio0MqZV1LOmFG=22qxUZmtLxdZHQoVonfCPcQ@mail.gmail.com>
 <75813398-2ce9-60ce-d7a5-c1224b648425@ntu.edu.tw>
Message-ID: <0641AC31-867D-41B7-9267-90100B8294D3@dcn.davis.ca.us>

Andrew's example works for him and for me.

If you want help, provide the output of

dput(head(Mean))
dput(head(Std.dev))


On November 21, 2022 4:15:57 PM PST, "Steven T. Yen" <styen at ntu.edu.tw> wrote:
>Thanks to all, but no, signif() did not work:
>
>> print(signif(cbind(Mean,Std.dev),digits=2))
>??????? Mean Std.dev
>?[1,]? 0.310??? 0.46
>?[2,]? 0.190??? 0.39
>?[3,] 45.000?? 16.00
>?[4,]? 0.510??? 0.50
>?[5,]? 0.490??? 0.50
>?[6,]? 0.700??? 0.46
>
>On 11/22/2022 5:41 AM, Andrew Simmons wrote:
>> For print(), digits is the minimal number of significant digits. In
>> your case, rounding the first column to the 3rd decimal place gives at
>> least 2 sigfigs and rounding the second column to the 2nd decimal
>> place.
>> 
>> If you want to print all numbers to two significant digits, regardless
>> of what other numbers are in the column, use signif() before print():
>> 
>> Mean <- c(0.3107966, 0.1880302, 45.3185794, 0.506637, 0.493363,
>>      0.702915, 0.297085, 0.7967066, 0.2032934, 0.6582301, 0.3417699,
>>      0.7262913, 0.2737087, 0.6415484, 0.3584516, 0.9110264, 0.0889736,
>>      0.5211453, 0.4788547, 0.5481055, 0.4518945, 0.913509, 0.086491,
>>      0.8727269, 0.1272731, 0.1015717, 0.6043692, 0.2940592, 0.2735274,
>>      0.3777426, 0.34873, 0.1603127, 0.1723783, 0.1230961, 0.1779381,
>>      0.0964334, 0.1584698, 0.1113717, 0.3349813, 0.4081109, 0.2569078,
>>      0.1034356, 0.6741233, 0.1254412, 0.0969999, 0.0587457, 0.4401115,
>>      0.4689114, 0.0322313, 0.5907618, 0.1591195, 0.1132923, 0.1124207,
>>      0.0244058, 0.7058787, 0.2941213, 0.0746892, 0.474911, 0.3471837,
>>      0.0435036, 0.0597126, 0.0478775, 0.1152615, 0.2074968, 0.2440626,
>>      0.1605995, 0.0804598, 0.1442422, 0.3443231, 0.428056, 0.0528221,
>>      0.0805222, 0.0457169, 0.0485596, 0.1333443, 0.0932917, 0.0653987,
>>      0.0573934, 0.1399086, 0.0887337, 0.0984479, 0.0914421, 0.1155505,
>>      0.1363764, 0.113457, 1.2985286)
>> Std.dev <- c(0.46282, 0.390736, 16.313635, 0.499956, 0.499956,
>>      0.456974, 0.456974, 0.402449, 0.402449, 0.474303, 0.474303, 0.445861,
>>      0.445861, 0.479546, 0.479546, 0.284706, 0.284706, 0.499553, 0.499553,
>>      0.49768, 0.49768, 0.281088, 0.281088, 0.333279, 0.333279, 0.302084,
>>      0.488986, 0.455619, 0.445769, 0.484823, 0.476568, 0.366896, 0.377709,
>>      0.328547, 0.382461, 0.295185, 0.365181, 0.314592, 0.471984, 0.491484,
>>      0.436928, 0.304527, 0.468701, 0.331218, 0.295958, 0.235148, 0.4964,
>>      0.499033, 0.176614, 0.491693, 0.365787, 0.31695, 0.315883, 0.154305,
>>      0.455647, 0.455647, 0.262889, 0.49937, 0.476075, 0.203988, 0.236954,
>>      0.213507, 0.319337, 0.405514, 0.42953, 0.367161, 0.272004, 0.351335,
>>      0.475147, 0.494797, 0.223678, 0.2721, 0.20887, 0.214945, 0.339946,
>>      0.290841, 0.247228, 0.232593, 0.346892, 0.284359, 0.297919, 0.288237,
>>      0.319685, 0.343188, 0.317151, 0.739096)
>> print(signif(cbind(Mean, Std.dev), 2))
>> 
>> which looks like:
>> 
>>> print(signif(cbind(Mean, Std.dev), 2))
>>          Mean Std.dev
>>   [1,]  0.310    0.46
>>   [2,]  0.190    0.39
>>   [3,] 45.000   16.00
>>   [4,]  0.510    0.50
>>   [5,]  0.490    0.50
>>   [6,]  0.700    0.46
>>   [7,]  0.300    0.46
>>   [8,]  0.800    0.40
>>   [9,]  0.200    0.40
>> [10,]  0.660    0.47
>> [11,]  0.340    0.47
>> [12,]  0.730    0.45
>> [13,]  0.270    0.45
>> [14,]  0.640    0.48
>> [15,]  0.360    0.48
>> [16,]  0.910    0.28
>> [17,]  0.089    0.28
>> [18,]  0.520    0.50
>> [19,]  0.480    0.50
>> [20,]  0.550    0.50
>> [21,]  0.450    0.50
>> [22,]  0.910    0.28
>> [23,]  0.086    0.28
>> [24,]  0.870    0.33
>> [25,]  0.130    0.33
>> [26,]  0.100    0.30
>> [27,]  0.600    0.49
>> [28,]  0.290    0.46
>> [29,]  0.270    0.45
>> [30,]  0.380    0.48
>> [31,]  0.350    0.48
>> [32,]  0.160    0.37
>> [33,]  0.170    0.38
>> [34,]  0.120    0.33
>> [35,]  0.180    0.38
>> [36,]  0.096    0.30
>> [37,]  0.160    0.37
>> [38,]  0.110    0.31
>> [39,]  0.330    0.47
>> [40,]  0.410    0.49
>> [41,]  0.260    0.44
>> [42,]  0.100    0.30
>> [43,]  0.670    0.47
>> [44,]  0.130    0.33
>> [45,]  0.097    0.30
>> [46,]  0.059    0.24
>> [47,]  0.440    0.50
>> [48,]  0.470    0.50
>> [49,]  0.032    0.18
>> [50,]  0.590    0.49
>> [51,]  0.160    0.37
>> [52,]  0.110    0.32
>> [53,]  0.110    0.32
>> [54,]  0.024    0.15
>> [55,]  0.710    0.46
>> [56,]  0.290    0.46
>> [57,]  0.075    0.26
>> [58,]  0.470    0.50
>> [59,]  0.350    0.48
>> [60,]  0.044    0.20
>> [61,]  0.060    0.24
>> [62,]  0.048    0.21
>> [63,]  0.120    0.32
>> [64,]  0.210    0.41
>> [65,]  0.240    0.43
>> [66,]  0.160    0.37
>> [67,]  0.080    0.27
>> [68,]  0.140    0.35
>> [69,]  0.340    0.48
>> [70,]  0.430    0.49
>> [71,]  0.053    0.22
>> [72,]  0.081    0.27
>> [73,]  0.046    0.21
>> [74,]  0.049    0.21
>> [75,]  0.130    0.34
>> [76,]  0.093    0.29
>> [77,]  0.065    0.25
>> [78,]  0.057    0.23
>> [79,]  0.140    0.35
>> [80,]  0.089    0.28
>> [81,]  0.098    0.30
>> [82,]  0.091    0.29
>> [83,]  0.120    0.32
>> [84,]  0.140    0.34
>> [85,]  0.110    0.32
>> [86,]  1.300    0.74
>> R will still print 3 decimal places for the third column since it
>> wants them to be of the same format, but each number is 2 sigfigs.
>> 
>> On Mon, Nov 21, 2022 at 3:41 PM Steven T. Yen via R-help
>> <r-help at r-project.org> wrote:
>>> Hi, I have two variables with 86 observations each. Below I print with
>>> the print command with digit=2. But, I am getting three decimal places
>>> for my first variable and two for the second. Please help. Thanks.
>>> 
>>>   > cbind(Mean,Std.dev)
>>>               Mean   Std.dev
>>>    [1,]  0.3107966  0.462820
>>>    [2,]  0.1880302  0.390736
>>>    [3,] 45.3185794 16.313635
>>>    [4,]  0.5066370  0.499956
>>>    [5,]  0.4933630  0.499956
>>>    [6,]  0.7029150  0.456974
>>>    [7,]  0.2970850  0.456974
>>>    [8,]  0.7967066  0.402449
>>>    [9,]  0.2032934  0.402449
>>> [10,]  0.6582301  0.474303
>>> [11,]  0.3417699  0.474303
>>> [12,]  0.7262913  0.445861
>>> [13,]  0.2737087  0.445861
>>> [14,]  0.6415484  0.479546
>>> [15,]  0.3584516  0.479546
>>> [16,]  0.9110264  0.284706
>>> [17,]  0.0889736  0.284706
>>> [18,]  0.5211453  0.499553
>>> [19,]  0.4788547  0.499553
>>> [20,]  0.5481055  0.497680
>>> [21,]  0.4518945  0.497680
>>> [22,]  0.9135090  0.281088
>>> [23,]  0.0864910  0.281088
>>> [24,]  0.8727269  0.333279
>>> [25,]  0.1272731  0.333279
>>> [26,]  0.1015717  0.302084
>>> [27,]  0.6043692  0.488986
>>> [28,]  0.2940592  0.455619
>>> [29,]  0.2735274  0.445769
>>> [30,]  0.3777426  0.484823
>>> [31,]  0.3487300  0.476568
>>> [32,]  0.1603127  0.366896
>>> [33,]  0.1723783  0.377709
>>> [34,]  0.1230961  0.328547
>>> [35,]  0.1779381  0.382461
>>> [36,]  0.0964334  0.295185
>>> [37,]  0.1584698  0.365181
>>> [38,]  0.1113717  0.314592
>>> [39,]  0.3349813  0.471984
>>> [40,]  0.4081109  0.491484
>>> [41,]  0.2569078  0.436928
>>> [42,]  0.1034356  0.304527
>>> [43,]  0.6741233  0.468701
>>> [44,]  0.1254412  0.331218
>>> [45,]  0.0969999  0.295958
>>> [46,]  0.0587457  0.235148
>>> [47,]  0.4401115  0.496400
>>> [48,]  0.4689114  0.499033
>>> [49,]  0.0322313  0.176614
>>> [50,]  0.5907618  0.491693
>>> [51,]  0.1591195  0.365787
>>> [52,]  0.1132923  0.316950
>>> [53,]  0.1124207  0.315883
>>> [54,]  0.0244058  0.154305
>>> [55,]  0.7058787  0.455647
>>> [56,]  0.2941213  0.455647
>>> [57,]  0.0746892  0.262889
>>> [58,]  0.4749110  0.499370
>>> [59,]  0.3471837  0.476075
>>> [60,]  0.0435036  0.203988
>>> [61,]  0.0597126  0.236954
>>> [62,]  0.0478775  0.213507
>>> [63,]  0.1152615  0.319337
>>> [64,]  0.2074968  0.405514
>>> [65,]  0.2440626  0.429530
>>> [66,]  0.1605995  0.367161
>>> [67,]  0.0804598  0.272004
>>> [68,]  0.1442422  0.351335
>>> [69,]  0.3443231  0.475147
>>> [70,]  0.4280560  0.494797
>>> [71,]  0.0528221  0.223678
>>> [72,]  0.0805222  0.272100
>>> [73,]  0.0457169  0.208870
>>> [74,]  0.0485596  0.214945
>>> [75,]  0.1333443  0.339946
>>> [76,]  0.0932917  0.290841
>>> [77,]  0.0653987  0.247228
>>> [78,]  0.0573934  0.232593
>>> [79,]  0.1399086  0.346892
>>> [80,]  0.0887337  0.284359
>>> [81,]  0.0984479  0.297919
>>> [82,]  0.0914421  0.288237
>>> [83,]  0.1155505  0.319685
>>> [84,]  0.1363764  0.343188
>>> [85,]  0.1134570  0.317151
>>> [86,]  1.2985286  0.739096
>>>   > print(cbind(Mean,Std.dev),digits=2)
>>>           Mean Std.dev
>>>    [1,]  0.311    0.46
>>>    [2,]  0.188    0.39
>>>    [3,] 45.319   16.31
>>>    [4,]  0.507    0.50
>>>    [5,]  0.493    0.50
>>>    [6,]  0.703    0.46
>>>    [7,]  0.297    0.46
>>>    [8,]  0.797    0.40
>>>    [9,]  0.203    0.40
>>> [10,]  0.658    0.47
>>> [11,]  0.342    0.47
>>> [12,]  0.726    0.45
>>> [13,]  0.274    0.45
>>> [14,]  0.642    0.48
>>> [15,]  0.358    0.48
>>> [16,]  0.911    0.28
>>> [17,]  0.089    0.28
>>> [18,]  0.521    0.50
>>> [19,]  0.479    0.50
>>> [20,]  0.548    0.50
>>> [21,]  0.452    0.50
>>> [22,]  0.914    0.28
>>> [23,]  0.086    0.28
>>> [24,]  0.873    0.33
>>> [25,]  0.127    0.33
>>> [26,]  0.102    0.30
>>> [27,]  0.604    0.49
>>> [28,]  0.294    0.46
>>> [29,]  0.274    0.45
>>> [30,]  0.378    0.48
>>> [31,]  0.349    0.48
>>> [32,]  0.160    0.37
>>> [33,]  0.172    0.38
>>> [34,]  0.123    0.33
>>> [35,]  0.178    0.38
>>> [36,]  0.096    0.30
>>> [37,]  0.158    0.37
>>> [38,]  0.111    0.31
>>> [39,]  0.335    0.47
>>> [40,]  0.408    0.49
>>> [41,]  0.257    0.44
>>> [42,]  0.103    0.30
>>> [43,]  0.674    0.47
>>> [44,]  0.125    0.33
>>> [45,]  0.097    0.30
>>> [46,]  0.059    0.24
>>> [47,]  0.440    0.50
>>> [48,]  0.469    0.50
>>> [49,]  0.032    0.18
>>> [50,]  0.591    0.49
>>> [51,]  0.159    0.37
>>> [52,]  0.113    0.32
>>> [53,]  0.112    0.32
>>> [54,]  0.024    0.15
>>> [55,]  0.706    0.46
>>> [56,]  0.294    0.46
>>> [57,]  0.075    0.26
>>> [58,]  0.475    0.50
>>> [59,]  0.347    0.48
>>> [60,]  0.044    0.20
>>> [61,]  0.060    0.24
>>> [62,]  0.048    0.21
>>> [63,]  0.115    0.32
>>> [64,]  0.207    0.41
>>> [65,]  0.244    0.43
>>> [66,]  0.161    0.37
>>> [67,]  0.080    0.27
>>> [68,]  0.144    0.35
>>> [69,]  0.344    0.48
>>> [70,]  0.428    0.49
>>> [71,]  0.053    0.22
>>> [72,]  0.081    0.27
>>> [73,]  0.046    0.21
>>> [74,]  0.049    0.21
>>> [75,]  0.133    0.34
>>> [76,]  0.093    0.29
>>> [77,]  0.065    0.25
>>> [78,]  0.057    0.23
>>> [79,]  0.140    0.35
>>> [80,]  0.089    0.28
>>> [81,]  0.098    0.30
>>> [82,]  0.091    0.29
>>> [83,]  0.116    0.32
>>> [84,]  0.136    0.34
>>> [85,]  0.113    0.32
>>> [86,]  1.299    0.74
>>>   >
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From bgunter@4567 @end|ng |rom gm@||@com  Tue Nov 22 02:38:18 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 21 Nov 2022 17:38:18 -0800
Subject: [R] Format printing with R
In-Reply-To: <0641AC31-867D-41B7-9267-90100B8294D3@dcn.davis.ca.us>
References: <aa7ff442-3e7b-35b3-273a-569dfaa2cfae@ntu.edu.tw>
 <CAPcHnpSSEe0=Gio0MqZV1LOmFG=22qxUZmtLxdZHQoVonfCPcQ@mail.gmail.com>
 <75813398-2ce9-60ce-d7a5-c1224b648425@ntu.edu.tw>
 <0641AC31-867D-41B7-9267-90100B8294D3@dcn.davis.ca.us>
Message-ID: <CAGxFJbTQ96Xwx4YHr7ze3zb7mZ+jYQJRqSwQ5WfQiDoJXBqJ5A@mail.gmail.com>

???
> vals <- signif(cbind(c(.123,.0123), c(1.23,.00123)), digits = 2)
> print(vals)
      [,1]   [,2]
[1,] 0.120 1.2000
[2,] 0.012 0.0012

2 *significant* digits, but enough digits to right of decimal point to
**allow** the two significant digits to appear and have all numbers in
a column line up neatly. If you don't want them to line up, you will
probably have to use cat()  to print row by row.

> for(i in 1:2)cat(vals[i,],"\n",sep = '  ')
0.12  1.2
0.012  0.0012

Further nuances can be found in ?format, which again tries to line
things up in columns.

-- Bert

On Mon, Nov 21, 2022 at 4:58 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>
> Andrew's example works for him and for me.
>
> If you want help, provide the output of
>
> dput(head(Mean))
> dput(head(Std.dev))
>
>
> On November 21, 2022 4:15:57 PM PST, "Steven T. Yen" <styen at ntu.edu.tw> wrote:
> >Thanks to all, but no, signif() did not work:
> >
> >> print(signif(cbind(Mean,Std.dev),digits=2))
> >        Mean Std.dev
> > [1,]  0.310    0.46
> > [2,]  0.190    0.39
> > [3,] 45.000   16.00
> > [4,]  0.510    0.50
> > [5,]  0.490    0.50
> > [6,]  0.700    0.46
> >
> >On 11/22/2022 5:41 AM, Andrew Simmons wrote:
> >> For print(), digits is the minimal number of significant digits. In
> >> your case, rounding the first column to the 3rd decimal place gives at
> >> least 2 sigfigs and rounding the second column to the 2nd decimal
> >> place.
> >>
> >> If you want to print all numbers to two significant digits, regardless
> >> of what other numbers are in the column, use signif() before print():
> >>
> >> Mean <- c(0.3107966, 0.1880302, 45.3185794, 0.506637, 0.493363,
> >>      0.702915, 0.297085, 0.7967066, 0.2032934, 0.6582301, 0.3417699,
> >>      0.7262913, 0.2737087, 0.6415484, 0.3584516, 0.9110264, 0.0889736,
> >>      0.5211453, 0.4788547, 0.5481055, 0.4518945, 0.913509, 0.086491,
> >>      0.8727269, 0.1272731, 0.1015717, 0.6043692, 0.2940592, 0.2735274,
> >>      0.3777426, 0.34873, 0.1603127, 0.1723783, 0.1230961, 0.1779381,
> >>      0.0964334, 0.1584698, 0.1113717, 0.3349813, 0.4081109, 0.2569078,
> >>      0.1034356, 0.6741233, 0.1254412, 0.0969999, 0.0587457, 0.4401115,
> >>      0.4689114, 0.0322313, 0.5907618, 0.1591195, 0.1132923, 0.1124207,
> >>      0.0244058, 0.7058787, 0.2941213, 0.0746892, 0.474911, 0.3471837,
> >>      0.0435036, 0.0597126, 0.0478775, 0.1152615, 0.2074968, 0.2440626,
> >>      0.1605995, 0.0804598, 0.1442422, 0.3443231, 0.428056, 0.0528221,
> >>      0.0805222, 0.0457169, 0.0485596, 0.1333443, 0.0932917, 0.0653987,
> >>      0.0573934, 0.1399086, 0.0887337, 0.0984479, 0.0914421, 0.1155505,
> >>      0.1363764, 0.113457, 1.2985286)
> >> Std.dev <- c(0.46282, 0.390736, 16.313635, 0.499956, 0.499956,
> >>      0.456974, 0.456974, 0.402449, 0.402449, 0.474303, 0.474303, 0.445861,
> >>      0.445861, 0.479546, 0.479546, 0.284706, 0.284706, 0.499553, 0.499553,
> >>      0.49768, 0.49768, 0.281088, 0.281088, 0.333279, 0.333279, 0.302084,
> >>      0.488986, 0.455619, 0.445769, 0.484823, 0.476568, 0.366896, 0.377709,
> >>      0.328547, 0.382461, 0.295185, 0.365181, 0.314592, 0.471984, 0.491484,
> >>      0.436928, 0.304527, 0.468701, 0.331218, 0.295958, 0.235148, 0.4964,
> >>      0.499033, 0.176614, 0.491693, 0.365787, 0.31695, 0.315883, 0.154305,
> >>      0.455647, 0.455647, 0.262889, 0.49937, 0.476075, 0.203988, 0.236954,
> >>      0.213507, 0.319337, 0.405514, 0.42953, 0.367161, 0.272004, 0.351335,
> >>      0.475147, 0.494797, 0.223678, 0.2721, 0.20887, 0.214945, 0.339946,
> >>      0.290841, 0.247228, 0.232593, 0.346892, 0.284359, 0.297919, 0.288237,
> >>      0.319685, 0.343188, 0.317151, 0.739096)
> >> print(signif(cbind(Mean, Std.dev), 2))
> >>
> >> which looks like:
> >>
> >>> print(signif(cbind(Mean, Std.dev), 2))
> >>          Mean Std.dev
> >>   [1,]  0.310    0.46
> >>   [2,]  0.190    0.39
> >>   [3,] 45.000   16.00
> >>   [4,]  0.510    0.50
> >>   [5,]  0.490    0.50
> >>   [6,]  0.700    0.46
> >>   [7,]  0.300    0.46
> >>   [8,]  0.800    0.40
> >>   [9,]  0.200    0.40
> >> [10,]  0.660    0.47
> >> [11,]  0.340    0.47
> >> [12,]  0.730    0.45
> >> [13,]  0.270    0.45
> >> [14,]  0.640    0.48
> >> [15,]  0.360    0.48
> >> [16,]  0.910    0.28
> >> [17,]  0.089    0.28
> >> [18,]  0.520    0.50
> >> [19,]  0.480    0.50
> >> [20,]  0.550    0.50
> >> [21,]  0.450    0.50
> >> [22,]  0.910    0.28
> >> [23,]  0.086    0.28
> >> [24,]  0.870    0.33
> >> [25,]  0.130    0.33
> >> [26,]  0.100    0.30
> >> [27,]  0.600    0.49
> >> [28,]  0.290    0.46
> >> [29,]  0.270    0.45
> >> [30,]  0.380    0.48
> >> [31,]  0.350    0.48
> >> [32,]  0.160    0.37
> >> [33,]  0.170    0.38
> >> [34,]  0.120    0.33
> >> [35,]  0.180    0.38
> >> [36,]  0.096    0.30
> >> [37,]  0.160    0.37
> >> [38,]  0.110    0.31
> >> [39,]  0.330    0.47
> >> [40,]  0.410    0.49
> >> [41,]  0.260    0.44
> >> [42,]  0.100    0.30
> >> [43,]  0.670    0.47
> >> [44,]  0.130    0.33
> >> [45,]  0.097    0.30
> >> [46,]  0.059    0.24
> >> [47,]  0.440    0.50
> >> [48,]  0.470    0.50
> >> [49,]  0.032    0.18
> >> [50,]  0.590    0.49
> >> [51,]  0.160    0.37
> >> [52,]  0.110    0.32
> >> [53,]  0.110    0.32
> >> [54,]  0.024    0.15
> >> [55,]  0.710    0.46
> >> [56,]  0.290    0.46
> >> [57,]  0.075    0.26
> >> [58,]  0.470    0.50
> >> [59,]  0.350    0.48
> >> [60,]  0.044    0.20
> >> [61,]  0.060    0.24
> >> [62,]  0.048    0.21
> >> [63,]  0.120    0.32
> >> [64,]  0.210    0.41
> >> [65,]  0.240    0.43
> >> [66,]  0.160    0.37
> >> [67,]  0.080    0.27
> >> [68,]  0.140    0.35
> >> [69,]  0.340    0.48
> >> [70,]  0.430    0.49
> >> [71,]  0.053    0.22
> >> [72,]  0.081    0.27
> >> [73,]  0.046    0.21
> >> [74,]  0.049    0.21
> >> [75,]  0.130    0.34
> >> [76,]  0.093    0.29
> >> [77,]  0.065    0.25
> >> [78,]  0.057    0.23
> >> [79,]  0.140    0.35
> >> [80,]  0.089    0.28
> >> [81,]  0.098    0.30
> >> [82,]  0.091    0.29
> >> [83,]  0.120    0.32
> >> [84,]  0.140    0.34
> >> [85,]  0.110    0.32
> >> [86,]  1.300    0.74
> >> R will still print 3 decimal places for the third column since it
> >> wants them to be of the same format, but each number is 2 sigfigs.
> >>
> >> On Mon, Nov 21, 2022 at 3:41 PM Steven T. Yen via R-help
> >> <r-help at r-project.org> wrote:
> >>> Hi, I have two variables with 86 observations each. Below I print with
> >>> the print command with digit=2. But, I am getting three decimal places
> >>> for my first variable and two for the second. Please help. Thanks.
> >>>
> >>>   > cbind(Mean,Std.dev)
> >>>               Mean   Std.dev
> >>>    [1,]  0.3107966  0.462820
> >>>    [2,]  0.1880302  0.390736
> >>>    [3,] 45.3185794 16.313635
> >>>    [4,]  0.5066370  0.499956
> >>>    [5,]  0.4933630  0.499956
> >>>    [6,]  0.7029150  0.456974
> >>>    [7,]  0.2970850  0.456974
> >>>    [8,]  0.7967066  0.402449
> >>>    [9,]  0.2032934  0.402449
> >>> [10,]  0.6582301  0.474303
> >>> [11,]  0.3417699  0.474303
> >>> [12,]  0.7262913  0.445861
> >>> [13,]  0.2737087  0.445861
> >>> [14,]  0.6415484  0.479546
> >>> [15,]  0.3584516  0.479546
> >>> [16,]  0.9110264  0.284706
> >>> [17,]  0.0889736  0.284706
> >>> [18,]  0.5211453  0.499553
> >>> [19,]  0.4788547  0.499553
> >>> [20,]  0.5481055  0.497680
> >>> [21,]  0.4518945  0.497680
> >>> [22,]  0.9135090  0.281088
> >>> [23,]  0.0864910  0.281088
> >>> [24,]  0.8727269  0.333279
> >>> [25,]  0.1272731  0.333279
> >>> [26,]  0.1015717  0.302084
> >>> [27,]  0.6043692  0.488986
> >>> [28,]  0.2940592  0.455619
> >>> [29,]  0.2735274  0.445769
> >>> [30,]  0.3777426  0.484823
> >>> [31,]  0.3487300  0.476568
> >>> [32,]  0.1603127  0.366896
> >>> [33,]  0.1723783  0.377709
> >>> [34,]  0.1230961  0.328547
> >>> [35,]  0.1779381  0.382461
> >>> [36,]  0.0964334  0.295185
> >>> [37,]  0.1584698  0.365181
> >>> [38,]  0.1113717  0.314592
> >>> [39,]  0.3349813  0.471984
> >>> [40,]  0.4081109  0.491484
> >>> [41,]  0.2569078  0.436928
> >>> [42,]  0.1034356  0.304527
> >>> [43,]  0.6741233  0.468701
> >>> [44,]  0.1254412  0.331218
> >>> [45,]  0.0969999  0.295958
> >>> [46,]  0.0587457  0.235148
> >>> [47,]  0.4401115  0.496400
> >>> [48,]  0.4689114  0.499033
> >>> [49,]  0.0322313  0.176614
> >>> [50,]  0.5907618  0.491693
> >>> [51,]  0.1591195  0.365787
> >>> [52,]  0.1132923  0.316950
> >>> [53,]  0.1124207  0.315883
> >>> [54,]  0.0244058  0.154305
> >>> [55,]  0.7058787  0.455647
> >>> [56,]  0.2941213  0.455647
> >>> [57,]  0.0746892  0.262889
> >>> [58,]  0.4749110  0.499370
> >>> [59,]  0.3471837  0.476075
> >>> [60,]  0.0435036  0.203988
> >>> [61,]  0.0597126  0.236954
> >>> [62,]  0.0478775  0.213507
> >>> [63,]  0.1152615  0.319337
> >>> [64,]  0.2074968  0.405514
> >>> [65,]  0.2440626  0.429530
> >>> [66,]  0.1605995  0.367161
> >>> [67,]  0.0804598  0.272004
> >>> [68,]  0.1442422  0.351335
> >>> [69,]  0.3443231  0.475147
> >>> [70,]  0.4280560  0.494797
> >>> [71,]  0.0528221  0.223678
> >>> [72,]  0.0805222  0.272100
> >>> [73,]  0.0457169  0.208870
> >>> [74,]  0.0485596  0.214945
> >>> [75,]  0.1333443  0.339946
> >>> [76,]  0.0932917  0.290841
> >>> [77,]  0.0653987  0.247228
> >>> [78,]  0.0573934  0.232593
> >>> [79,]  0.1399086  0.346892
> >>> [80,]  0.0887337  0.284359
> >>> [81,]  0.0984479  0.297919
> >>> [82,]  0.0914421  0.288237
> >>> [83,]  0.1155505  0.319685
> >>> [84,]  0.1363764  0.343188
> >>> [85,]  0.1134570  0.317151
> >>> [86,]  1.2985286  0.739096
> >>>   > print(cbind(Mean,Std.dev),digits=2)
> >>>           Mean Std.dev
> >>>    [1,]  0.311    0.46
> >>>    [2,]  0.188    0.39
> >>>    [3,] 45.319   16.31
> >>>    [4,]  0.507    0.50
> >>>    [5,]  0.493    0.50
> >>>    [6,]  0.703    0.46
> >>>    [7,]  0.297    0.46
> >>>    [8,]  0.797    0.40
> >>>    [9,]  0.203    0.40
> >>> [10,]  0.658    0.47
> >>> [11,]  0.342    0.47
> >>> [12,]  0.726    0.45
> >>> [13,]  0.274    0.45
> >>> [14,]  0.642    0.48
> >>> [15,]  0.358    0.48
> >>> [16,]  0.911    0.28
> >>> [17,]  0.089    0.28
> >>> [18,]  0.521    0.50
> >>> [19,]  0.479    0.50
> >>> [20,]  0.548    0.50
> >>> [21,]  0.452    0.50
> >>> [22,]  0.914    0.28
> >>> [23,]  0.086    0.28
> >>> [24,]  0.873    0.33
> >>> [25,]  0.127    0.33
> >>> [26,]  0.102    0.30
> >>> [27,]  0.604    0.49
> >>> [28,]  0.294    0.46
> >>> [29,]  0.274    0.45
> >>> [30,]  0.378    0.48
> >>> [31,]  0.349    0.48
> >>> [32,]  0.160    0.37
> >>> [33,]  0.172    0.38
> >>> [34,]  0.123    0.33
> >>> [35,]  0.178    0.38
> >>> [36,]  0.096    0.30
> >>> [37,]  0.158    0.37
> >>> [38,]  0.111    0.31
> >>> [39,]  0.335    0.47
> >>> [40,]  0.408    0.49
> >>> [41,]  0.257    0.44
> >>> [42,]  0.103    0.30
> >>> [43,]  0.674    0.47
> >>> [44,]  0.125    0.33
> >>> [45,]  0.097    0.30
> >>> [46,]  0.059    0.24
> >>> [47,]  0.440    0.50
> >>> [48,]  0.469    0.50
> >>> [49,]  0.032    0.18
> >>> [50,]  0.591    0.49
> >>> [51,]  0.159    0.37
> >>> [52,]  0.113    0.32
> >>> [53,]  0.112    0.32
> >>> [54,]  0.024    0.15
> >>> [55,]  0.706    0.46
> >>> [56,]  0.294    0.46
> >>> [57,]  0.075    0.26
> >>> [58,]  0.475    0.50
> >>> [59,]  0.347    0.48
> >>> [60,]  0.044    0.20
> >>> [61,]  0.060    0.24
> >>> [62,]  0.048    0.21
> >>> [63,]  0.115    0.32
> >>> [64,]  0.207    0.41
> >>> [65,]  0.244    0.43
> >>> [66,]  0.161    0.37
> >>> [67,]  0.080    0.27
> >>> [68,]  0.144    0.35
> >>> [69,]  0.344    0.48
> >>> [70,]  0.428    0.49
> >>> [71,]  0.053    0.22
> >>> [72,]  0.081    0.27
> >>> [73,]  0.046    0.21
> >>> [74,]  0.049    0.21
> >>> [75,]  0.133    0.34
> >>> [76,]  0.093    0.29
> >>> [77,]  0.065    0.25
> >>> [78,]  0.057    0.23
> >>> [79,]  0.140    0.35
> >>> [80,]  0.089    0.28
> >>> [81,]  0.098    0.30
> >>> [82,]  0.091    0.29
> >>> [83,]  0.116    0.32
> >>> [84,]  0.136    0.34
> >>> [85,]  0.113    0.32
> >>> [86,]  1.299    0.74
> >>>   >
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my phone. Please excuse my brevity.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From |eo@m@d@ @end|ng |rom @yon|c@eu  Tue Nov 22 04:28:07 2022
From: |eo@m@d@ @end|ng |rom @yon|c@eu (Leonard Mada)
Date: Tue, 22 Nov 2022 05:28:07 +0200
Subject: [R] Hidden Problems with Clustering Algorithms
Message-ID: <500236d3-af3e-e851-2c6b-3d8ec246e22f@syonic.eu>

Dear R-Users,

Hidden Problems with Clustering Algorithms

I stumbled recently upon a presentation about hierarchical clustering. 
Unfortunately, it contains a hidden problem of clustering algorithms. 
The problem is deeper and I think that it warrants a closer inspection 
by the statistical community.

The presentation is available online. Both the scaled & non-scaled 
versions show the problem.

de.NBI course - Advanced analysis of quantitative proteomics data using 
R: 03b Clustering Part2
[Note: it's more like introductory notes to basic statistics]
https://www.youtube.com/watch?v=7e1uW_BhljA
times:
- at 6:15 - 6:28 & 6:29 - 7:10 [2 versions, both non-scaled]
- at 5:51 - 6:10 [the scaled version]
- same problem at 7:56;

PROBLEM

Non-Scaled Version: (e.g. the one at 6:15)
- the upper 2 rows are split into various sub-clusters;
- the top tree: a cluster is formed by the right-right sub-tree (some 17 
"genes" or similar "activities" / "expressions");
- the left-most 2 "genes" are actually over-expressed "genes" and 
functionally really belong to the previous/right sub-cluster;

Scaled-Version: (at 5:52)
- the left-most 2 "genes" are over-expressed at the same time with the 
right cluster, and not otherwise;

Unfortunately, the 2 over-expressed (outliers or extreme-values) are 
split off from the relevant cluster and inserted as a separate 
main-branch in the top dendrogram. Switching only the main left & right 
branches in the top tree would only mask this problem. The 2 
pseudo-outliers are really the (probably) upper values in the larger 
cluster of over-expressed "genes" (all the dark genes should belong to 
the same cluster).

The middle sub-cluster shows really NO activity (some 16 "genes"). The 
main branches in the top tree should really split between this 
*NO*-activity cluster and the cluster showing activity (including the 2 
massively over-expressed genes). The problem is present in the scaled 
version as well.

The hierarchical clustering algorithm fails. I have not analysed the 
data, but some problems may contribute to this:
- "gene expression" or "activity" may not be linear, but exponential or 
follow some power rule: a logarithmic transformation (or some other 
transformation) may have been useful;
- simple distances between clusters may be too inaccurate;
- the variance in the low-activity (middle) cluster may be very low 
(almost 0!), while the variance in the high-activity cluster may be much 
higher: the Mahalanobis distance or joining the sub-clusters based on 
some z/t-test taking into account the different variances may be more 
robust;

These questions should be addressed by more senior statisticians.

I hope that the presentation remains on-line as is, as the clustering 
problem is really easy to see and to analyse. It is impossible to detect 
and visualise such anomalies in a heatmap with 1,000 gene-expressions or 
with 10,000 genes, or with 500-1000 samples. It is very obvious on this 
small heatmap.

I do not know if there are any robust tools to validate the generated 
trees. Inspecting by "eye" a dendrogram with > 1,000 genes and hundreds 
of samples is really futile.

Sincerely,

Leonard


From bgunter@4567 @end|ng |rom gm@||@com  Tue Nov 22 05:26:14 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 21 Nov 2022 20:26:14 -0800
Subject: [R] Hidden Problems with Clustering Algorithms
In-Reply-To: <500236d3-af3e-e851-2c6b-3d8ec246e22f@syonic.eu>
References: <500236d3-af3e-e851-2c6b-3d8ec246e22f@syonic.eu>
Message-ID: <CAGxFJbTfzSrtcujgYx_G=gtqVXtxrGu37mg2WH5HQcuJcweUWw@mail.gmail.com>

Most clustering algorithms are just heuristic and exploratory, well known
to be subject to the sorts of issues that you are concerned with. There are
no universal fixes ... just tradeoffs. You need to choose that which is
most appropriate for your situation and data,.

Bert

On Mon, Nov 21, 2022, 19:28 Leonard Mada via R-help <r-help at r-project.org>
wrote:

> Dear R-Users,
>
> Hidden Problems with Clustering Algorithms
>
> I stumbled recently upon a presentation about hierarchical clustering.
> Unfortunately, it contains a hidden problem of clustering algorithms.
> The problem is deeper and I think that it warrants a closer inspection
> by the statistical community.
>
> The presentation is available online. Both the scaled & non-scaled
> versions show the problem.
>
> de.NBI course - Advanced analysis of quantitative proteomics data using
> R: 03b Clustering Part2
> [Note: it's more like introductory notes to basic statistics]
> https://www.youtube.com/watch?v=7e1uW_BhljA
> times:
> - at 6:15 - 6:28 & 6:29 - 7:10 [2 versions, both non-scaled]
> - at 5:51 - 6:10 [the scaled version]
> - same problem at 7:56;
>
> PROBLEM
>
> Non-Scaled Version: (e.g. the one at 6:15)
> - the upper 2 rows are split into various sub-clusters;
> - the top tree: a cluster is formed by the right-right sub-tree (some 17
> "genes" or similar "activities" / "expressions");
> - the left-most 2 "genes" are actually over-expressed "genes" and
> functionally really belong to the previous/right sub-cluster;
>
> Scaled-Version: (at 5:52)
> - the left-most 2 "genes" are over-expressed at the same time with the
> right cluster, and not otherwise;
>
> Unfortunately, the 2 over-expressed (outliers or extreme-values) are
> split off from the relevant cluster and inserted as a separate
> main-branch in the top dendrogram. Switching only the main left & right
> branches in the top tree would only mask this problem. The 2
> pseudo-outliers are really the (probably) upper values in the larger
> cluster of over-expressed "genes" (all the dark genes should belong to
> the same cluster).
>
> The middle sub-cluster shows really NO activity (some 16 "genes"). The
> main branches in the top tree should really split between this
> *NO*-activity cluster and the cluster showing activity (including the 2
> massively over-expressed genes). The problem is present in the scaled
> version as well.
>
> The hierarchical clustering algorithm fails. I have not analysed the
> data, but some problems may contribute to this:
> - "gene expression" or "activity" may not be linear, but exponential or
> follow some power rule: a logarithmic transformation (or some other
> transformation) may have been useful;
> - simple distances between clusters may be too inaccurate;
> - the variance in the low-activity (middle) cluster may be very low
> (almost 0!), while the variance in the high-activity cluster may be much
> higher: the Mahalanobis distance or joining the sub-clusters based on
> some z/t-test taking into account the different variances may be more
> robust;
>
> These questions should be addressed by more senior statisticians.
>
> I hope that the presentation remains on-line as is, as the clustering
> problem is really easy to see and to analyse. It is impossible to detect
> and visualise such anomalies in a heatmap with 1,000 gene-expressions or
> with 10,000 genes, or with 500-1000 samples. It is very obvious on this
> small heatmap.
>
> I do not know if there are any robust tools to validate the generated
> trees. Inspecting by "eye" a dendrogram with > 1,000 genes and hundreds
> of samples is really futile.
>
> Sincerely,
>
> Leonard
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Tue Nov 22 08:08:52 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 22 Nov 2022 10:08:52 +0300
Subject: [R] Format printing with R
In-Reply-To: <75813398-2ce9-60ce-d7a5-c1224b648425@ntu.edu.tw>
References: <aa7ff442-3e7b-35b3-273a-569dfaa2cfae@ntu.edu.tw>
 <CAPcHnpSSEe0=Gio0MqZV1LOmFG=22qxUZmtLxdZHQoVonfCPcQ@mail.gmail.com>
 <75813398-2ce9-60ce-d7a5-c1224b648425@ntu.edu.tw>
Message-ID: <20221122100852.7ae8c081@Tarkus>

On Tue, 22 Nov 2022 08:15:57 +0800
"Steven T. Yen" <styen at ntu.edu.tw> wrote:

> Thanks to all, but no, signif() did not work:

It worked, just didn't do what you wanted it to do. I think you want
round(), not signif(). Some of your numbers (45.3185794) will be rounded
to 4 significant digits and others (0.0969999) will be rounded to 1
significant digit, but the number of decimal places will be 2.

-- 
Best regards,
Ivan


From kry|ov@r00t @end|ng |rom gm@||@com  Tue Nov 22 09:05:56 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 22 Nov 2022 11:05:56 +0300
Subject: [R] 
 make install libgfortran.so.5: cannot open shared object file:
 No such file or directory;
 conftest.c:1:10: fatal error: jni.h: No such file or directory
In-Reply-To: <CAD6rq1W1CsPvfwnQaN_f83fhvf=mhCMfB1RrZj6=dhFHgAEm=A@mail.gmail.com>
References: <CAD6rq1WED=BsyCidHqBiTXpMvsAHKTfW+GddP5tMmrQXwtmozg@mail.gmail.com>
 <20221120203745.1d429604@Tarkus>
 <CAD6rq1VLQqS7XjeT9nEYXvWgMNqTBoiE4V9_DAS1ktNskvWoKQ@mail.gmail.com>
 <20221120222623.24c39285@Tarkus>
 <CAD6rq1XW_=RBKbtcf0q1Qqf0Onhfdtjx+qyhoaD4CK7P3s8ceQ@mail.gmail.com>
 <20221121191324.18fc3628@arachnoid>
 <CAD6rq1W1CsPvfwnQaN_f83fhvf=mhCMfB1RrZj6=dhFHgAEm=A@mail.gmail.com>
Message-ID: <20221122110556.48063d6f@Tarkus>

On Mon, 21 Nov 2022 13:19:22 -0500
Rob Kudyba <rk3199 at columbia.edu> wrote:

> What would the ./configure options look like?

./configure LDFLAGS="-L/path/to/gcc -L/path/to/pcre"

Here's where LDFLAGS is interpreted and appended to LD_LIBRARY_PATH:
https://github.com/r-devel/r-svn/blob/d6fc5e0a983eaa61439d67cfff4dc4097698c831/configure.ac#L821-L828

-- 
Best regards,
Ivan


From @tyen @end|ng |rom ntu@edu@tw  Tue Nov 22 11:24:15 2022
From: @tyen @end|ng |rom ntu@edu@tw (Steven T. Yen)
Date: Tue, 22 Nov 2022 18:24:15 +0800
Subject: [R] Format printing with R
In-Reply-To: <20221122100852.7ae8c081@Tarkus>
References: <aa7ff442-3e7b-35b3-273a-569dfaa2cfae@ntu.edu.tw>
 <CAPcHnpSSEe0=Gio0MqZV1LOmFG=22qxUZmtLxdZHQoVonfCPcQ@mail.gmail.com>
 <75813398-2ce9-60ce-d7a5-c1224b648425@ntu.edu.tw>
 <20221122100852.7ae8c081@Tarkus>
Message-ID: <8f0d2e61-a3cd-a485-ba25-7ed68182cb57@ntu.edu.tw>

Thanks to all. And yes, Ivan, round() did it:

 > dput(head(Mean))
c(afactfem = 0.310796641158209, afactblk = 0.188030178893171,
age = 45.3185794338312, nodiscfem = 0.506637018185968, discfem = 
0.493362981814032,
notradgrol = 0.702915000493879)
 > dput(head(Std.dev))
c(afactfem = 0.462819715443265, afactblk = 0.390736267472797,
age = 16.3136348021933, nodiscfem = 0.499955948049025, discfem = 
0.499955948049025,
notradgrol = 0.456974290933931)
 > round(cbind(Mean,Std.dev),2)[1:10,]
 ??????????? Mean Std.dev
afactfem??? 0.31??? 0.46
afactblk??? 0.19??? 0.39
age??????? 45.32?? 16.31
nodiscfem?? 0.51??? 0.50
discfem???? 0.49??? 0.50
notradgrol? 0.70??? 0.46
tradgrol??? 0.30??? 0.46
nofemnopol? 0.80??? 0.40
femnopol??? 0.20??? 0.40
nopreshurt? 0.66??? 0.47

On 11/22/2022 3:08 PM, Ivan Krylov wrote:
> On Tue, 22 Nov 2022 08:15:57 +0800
> "Steven T. Yen" <styen at ntu.edu.tw> wrote:
>
>> Thanks to all, but no, signif() did not work:
> It worked, just didn't do what you wanted it to do. I think you want
> round(), not signif(). Some of your numbers (45.3185794) will be rounded
> to 4 significant digits and others (0.0969999) will be rounded to 1
> significant digit, but the number of decimal places will be 2.
>


From P|erre@Nede|ec @end|ng |rom uc@|@edu  Tue Nov 22 21:22:26 2022
From: P|erre@Nede|ec @end|ng |rom uc@|@edu (Nedelec, Pierre)
Date: Tue, 22 Nov 2022 20:22:26 +0000
Subject: [R] Issue installing gamm4 for R v4.2.2
In-Reply-To: <20221115180820.17d89bf5@arachnoid>
References: <BY3PR05MB85633C9229319C71B0161E26F4059@BY3PR05MB8563.namprd05.prod.outlook.com>
 <20221115180820.17d89bf5@arachnoid>
Message-ID: <BY3PR05MB85637F689CB587A6E084AA03F40D9@BY3PR05MB8563.namprd05.prod.outlook.com>


Hi All,

Thank you for your help. It was an issue with Mac packages indeed. I found that thread and it resolved it in my case also.
https://stackoverflow.com/questions/72409270/getting-error-while-installing-lme4-package-in-r-in-macosx-monterey

Best,
Pierre
________________________________
From: Ivan Krylov <krylov.r00t at gmail.com>
Sent: Tuesday, November 15, 2022 07:08
To: Nedelec, Pierre via R-help <r-help at r-project.org>
Cc: Nedelec, Pierre <Pierre.Nedelec at ucsf.edu>
Subject: Re: [R] Issue installing gamm4 for R v4.2.2

Hello Pierre,

Thank you for providing both sessionInfo() and the installation log,
it's very helpful!

? Mon, 14 Nov 2022 20:48:13 +0000
"Nedelec, Pierre via R-help" <r-help at r-project.org> ?????:

> /usr/local/opt/gcc/bin/gfortran -fno-optimize-sibling-calls  -fPIC
> -g -O2  -c altmov.f -o altmov.o
...
> clang (LLVM option parsing): Unknown command line argument
> '-x86-pad-for-align=false'.

It looks like your Fortran compiler installation might be not fully
functional. Can you compile and run a Fortran "Hello World"?

program hello
print *, 'Hello'
end program

The following command line should compile and run the program stored in
a file named "hello.f90":
/usr/local/opt/gcc/bin/gfortran -o hello hello.f90 && ./hello

I see that you're using some libraries installed from Homebrew. Is your
GNU Fortran installation from <https://urldefense.com/v3/__https://mac.r-project.org/tools/__;!!LQC6Cpwp!pHAM5QGrV-a4-JM_BIoO-odhgI2Fy_UOjXk9cScYP39CddwrOd2sfrJ6U-Dbo-biMwBrZePGo2tRHhFi5geVQBYNSQ$ > or
from somewhere else? How did you install R itself?

I don't have a Mac and may be unable to help you further, but your
answers should be useful to other more experienced people. If you don't
get an answer here soon, consider asking at r-sig-mac at r-project.org,
because this looks like a Mac-specific problem.

>        [[alternative HTML version deleted]]

Your message reached us almost undamaged, but not all messages composed
in HTML are so lucky:
https://urldefense.com/v3/__https://stat.ethz.ch/pipermail/r-help/2022-November/476282.html__;!!LQC6Cpwp!pHAM5QGrV-a4-JM_BIoO-odhgI2Fy_UOjXk9cScYP39CddwrOd2sfrJ6U-Dbo-biMwBrZePGo2tRHhFi5gf4jYN04g$

Please post to R mailing lists in plain text.

--
Best regards,
Ivan

	[[alternative HTML version deleted]]


From btyner @end|ng |rom gm@||@com  Wed Nov 23 16:41:39 2022
From: btyner @end|ng |rom gm@||@com (Benjamin Tyner)
Date: Wed, 23 Nov 2022 10:41:39 -0500
Subject: [R] .BaseNamespaceEnv locking in non-interactive mode
Message-ID: <6c11818c-4244-facd-62e3-4e4c8dba101d@gmail.com>

Greetings,

Noticed that starting with R version 4.1.0, the base environment is 
locked by default. So for example in interactive mode, we have

 > .BaseNamespaceEnv$foo <- "bar"
Error in .BaseNamespaceEnv$foo <- "bar" :
 ? cannot add binding of 'foo' to the base environment

However it appears that when operating in non-interactive mode, the 
locking is not actually enforced:

$ ~/R422/bin/Rscript -e "environmentIsLocked(.BaseNamespaceEnv)"
[1] TRUE

$ ~/R422/bin/Rscript -e ".BaseNamespaceEnv$foo <- 'bar'; 
.BaseNamespaceEnv$foo"
[1] "bar"

Just wondering if this is intentional, and if not, should I file a bug 
report?

Regards,

Ben


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Wed Nov 23 17:46:31 2022
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Wed, 23 Nov 2022 17:46:31 +0100
Subject: [R] IGCI implemented in R package ?
In-Reply-To: <CAGgJW75r2JwpVKC4nVxhA3aXv-NoUObAZDLzYmW_p-rzRitETw@mail.gmail.com>
References: <CAGgJW75r2JwpVKC4nVxhA3aXv-NoUObAZDLzYmW_p-rzRitETw@mail.gmail.com>
Message-ID: <9AEC235D-62E0-43FC-A9C5-E7D0FDDA00A8@yahoo.fr>

Eric,

I really thank you a lot for your response.
However, if I am not wrong, it is implemented in python. The implementation is available on github; I would need an R wrapper. Does it exist ? 

Best
Sacha 

Envoy? de mon iPhone

> Le 21 nov. 2022 ? 20:36, Eric Berger <ericjberger at gmail.com> a ?crit :
> 
> ?
> Hi Sacha,
> My search turned up the Causal Discovery Toolbox which includes IGCI among 10 (or more) methods.
> This site includes both Python and R resources and seems to be quite rich - hopefully you will find something useful.
> Here's the link:
> https://fentechsolutions.github.io/CausalDiscoveryToolbox/html/index.html
> 
> HTH,
> Eric
> 
> 
>> On Mon, Nov 21, 2022 at 9:00 PM varin sacha via R-help <r-help at r-project.org> wrote:
>> Dear R experts,
>> 
>> Google is very often my friend but this time it does not !
>> Are you aware of an R package in which the directed causal discovery algorithm called the Information Geometric Causal Inference (IGCI) of (Daniusis et al., 2010) is implemented ?
>> 
>> Best,
>> Sacha 
>> 
>> Envoy? de mon iPhone
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Wed Nov 23 18:17:07 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 23 Nov 2022 09:17:07 -0800
Subject: [R] IGCI implemented in R package ?
In-Reply-To: <9AEC235D-62E0-43FC-A9C5-E7D0FDDA00A8@yahoo.fr>
References: <CAGgJW75r2JwpVKC4nVxhA3aXv-NoUObAZDLzYmW_p-rzRitETw@mail.gmail.com>
 <9AEC235D-62E0-43FC-A9C5-E7D0FDDA00A8@yahoo.fr>
Message-ID: <CAGxFJbQYFS6rXMVG6SbqbyTJEyZbtWvpCz++21UqqJ7S61g-Tg@mail.gmail.com>

Well, see the 'reticulate' package and various support/hints for using it
via an rseek.org search, e.g. on 'R python packages'. This *might* enable
you to use the python code. Or not -- you may have already considered this
and found it unworkable. I can say for sure that installing python is
simple if you need to do that.

Bert


On Wed, Nov 23, 2022 at 8:47 AM varin sacha via R-help <r-help at r-project.org>
wrote:

> Eric,
>
> I really thank you a lot for your response.
> However, if I am not wrong, it is implemented in python. The
> implementation is available on github; I would need an R wrapper. Does it
> exist ?
>
> Best
> Sacha
>
> Envoy? de mon iPhone
>
> > Le 21 nov. 2022 ? 20:36, Eric Berger <ericjberger at gmail.com> a ?crit :
> >
> > ?
> > Hi Sacha,
> > My search turned up the Causal Discovery Toolbox which includes IGCI
> among 10 (or more) methods.
> > This site includes both Python and R resources and seems to be quite
> rich - hopefully you will find something useful.
> > Here's the link:
> >
> https://fentechsolutions.github.io/CausalDiscoveryToolbox/html/index.html
> >
> > HTH,
> > Eric
> >
> >
> >> On Mon, Nov 21, 2022 at 9:00 PM varin sacha via R-help <
> r-help at r-project.org> wrote:
> >> Dear R experts,
> >>
> >> Google is very often my friend but this time it does not !
> >> Are you aware of an R package in which the directed causal discovery
> algorithm called the Information Geometric Causal Inference (IGCI) of
> (Daniusis et al., 2010) is implemented ?
> >>
> >> Best,
> >> Sacha
> >>
> >> Envoy? de mon iPhone
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Nov 23 18:47:29 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 23 Nov 2022 09:47:29 -0800
Subject: [R] IGCI implemented in R package ?
In-Reply-To: <CAGxFJbQYFS6rXMVG6SbqbyTJEyZbtWvpCz++21UqqJ7S61g-Tg@mail.gmail.com>
References: <CAGgJW75r2JwpVKC4nVxhA3aXv-NoUObAZDLzYmW_p-rzRitETw@mail.gmail.com>
 <9AEC235D-62E0-43FC-A9C5-E7D0FDDA00A8@yahoo.fr>
 <CAGxFJbQYFS6rXMVG6SbqbyTJEyZbtWvpCz++21UqqJ7S61g-Tg@mail.gmail.com>
Message-ID: <847508C3-76D3-476D-A5BB-37172DC0B9C3@dcn.davis.ca.us>

Ahhh, but _using_ it... there's the rub. Gotta learn about virtual environments or you could break the base python install.

On November 23, 2022 9:17:07 AM PST, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>Well, see the 'reticulate' package and various support/hints for using it
>via an rseek.org search, e.g. on 'R python packages'. This *might* enable
>you to use the python code. Or not -- you may have already considered this
>and found it unworkable. I can say for sure that installing python is
>simple if you need to do that.
>
>Bert
>
>
>On Wed, Nov 23, 2022 at 8:47 AM varin sacha via R-help <r-help at r-project.org>
>wrote:
>
>> Eric,
>>
>> I really thank you a lot for your response.
>> However, if I am not wrong, it is implemented in python. The
>> implementation is available on github; I would need an R wrapper. Does it
>> exist ?
>>
>> Best
>> Sacha
>>
>> Envoy? de mon iPhone
>>
>> > Le 21 nov. 2022 ? 20:36, Eric Berger <ericjberger at gmail.com> a ?crit :
>> >
>> > ?
>> > Hi Sacha,
>> > My search turned up the Causal Discovery Toolbox which includes IGCI
>> among 10 (or more) methods.
>> > This site includes both Python and R resources and seems to be quite
>> rich - hopefully you will find something useful.
>> > Here's the link:
>> >
>> https://fentechsolutions.github.io/CausalDiscoveryToolbox/html/index.html
>> >
>> > HTH,
>> > Eric
>> >
>> >
>> >> On Mon, Nov 21, 2022 at 9:00 PM varin sacha via R-help <
>> r-help at r-project.org> wrote:
>> >> Dear R experts,
>> >>
>> >> Google is very often my friend but this time it does not !
>> >> Are you aware of an R package in which the directed causal discovery
>> algorithm called the Information Geometric Causal Inference (IGCI) of
>> (Daniusis et al., 2010) is implemented ?
>> >>
>> >> Best,
>> >> Sacha
>> >>
>> >> Envoy? de mon iPhone
>> >> ______________________________________________
>> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> >> https://stat.ethz.ch/mailman/listinfo/r-help
>> >> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> >> and provide commented, minimal, self-contained, reproducible code.
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From @@h||nv@rkey @end|ng |rom gm@||@com  Fri Nov 25 07:34:10 2022
From: @@h||nv@rkey @end|ng |rom gm@||@com (ASHLIN VARKEY)
Date: Fri, 25 Nov 2022 12:04:10 +0530
Subject: [R] (no subject)
Message-ID: <CAKwZBowFNd+FvamT9op2Yg+SzJUAO1nHAHzvt1T4DYp+kdiM3A@mail.gmail.com>

How to calculate AIC , when the distribution have only quantile function

	[[alternative HTML version deleted]]


From r@turner @end|ng |rom @uck|@nd@@c@nz  Sat Nov 26 01:44:53 2022
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Sat, 26 Nov 2022 13:44:53 +1300
Subject: [R] AIC
In-Reply-To: <CAKwZBowFNd+FvamT9op2Yg+SzJUAO1nHAHzvt1T4DYp+kdiM3A@mail.gmail.com>
References: <CAKwZBowFNd+FvamT9op2Yg+SzJUAO1nHAHzvt1T4DYp+kdiM3A@mail.gmail.com>
Message-ID: <20221126134453.3062933c@rolf-Latitude-E7470>

On Fri, 25 Nov 2022 12:04:10 +0530
ASHLIN VARKEY <ashlinvarkey at gmail.com> wrote:

> How to calculate AIC , when the distribution have only quantile
> function

This mailing list is for questions about the R language.  It is not
for questions about statistical theory.  You might get some useful
information from stackexchange, but you will have to make your
question much clearer and much more explicit.  Give a reasonably
detailed example.  Do not expect your readers to be telepathic.

It is not at all clear to me that your question actually makes any
sense at all.

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From bobby@kn|ght @end|ng |rom gm@||@com  Sat Nov 26 01:59:29 2022
From: bobby@kn|ght @end|ng |rom gm@||@com (Robert Knight)
Date: Fri, 25 Nov 2022 18:59:29 -0600
Subject: [R] AIC
In-Reply-To: <20221126134453.3062933c@rolf-Latitude-E7470>
References: <CAKwZBowFNd+FvamT9op2Yg+SzJUAO1nHAHzvt1T4DYp+kdiM3A@mail.gmail.com>
 <20221126134453.3062933c@rolf-Latitude-E7470>
Message-ID: <CAKBFG3bh5z5jMHKRZ3UL8-TvbcDLYQSnE3Y4FQMoAk4wKGUdqw@mail.gmail.com>

https://cran.r-project.org/web/packages/quantreg/quantreg.pdf

Seems to be by the guy who has been writing about A1c and quantile
regression since at least 1978.  His work is cited in several papers on the
subject.  I would copy-paste his name here, but this from an iPhone.

On Fri, Nov 25, 2022 at 6:45 PM Rolf Turner <r.turner at auckland.ac.nz> wrote:

> On Fri, 25 Nov 2022 12:04:10 +0530
> ASHLIN VARKEY <ashlinvarkey at gmail.com> wrote:
>
> > How to calculate AIC , when the distribution have only quantile
> > function
>
> This mailing list is for questions about the R language.  It is not
> for questions about statistical theory.  You might get some useful
> information from stackexchange, but you will have to make your
> question much clearer and much more explicit.  Give a reasonably
> detailed example.  Do not expect your readers to be telepathic.
>
> It is not at all clear to me that your question actually makes any
> sense at all.
>
> cheers,
>
> Rolf Turner
>
> --
> Honorary Research Fellow
> Department of Statistics
> University of Auckland
> Phone: +64-9-373-7599 ext. 88276
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
-- 
Robert Knight

Developer of Meal Plan and Grocery List maker
https://play.google.com/store/apps/details?id=io.robertknight.MPGL

	[[alternative HTML version deleted]]


From tebert @end|ng |rom u||@edu  Sat Nov 26 02:03:17 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Sat, 26 Nov 2022 01:03:17 +0000
Subject: [R] (no subject)
In-Reply-To: <CAKwZBowFNd+FvamT9op2Yg+SzJUAO1nHAHzvt1T4DYp+kdiM3A@mail.gmail.com>
References: <CAKwZBowFNd+FvamT9op2Yg+SzJUAO1nHAHzvt1T4DYp+kdiM3A@mail.gmail.com>
Message-ID: <BN6PR2201MB1553FA5D9B2F2CE7C8F1F2A5CF119@BN6PR2201MB1553.namprd22.prod.outlook.com>

1) Any HTML content you intended to share did not make it past the filters. All I get is [[alternative HTML version deleted]
2) AIC is for comparing models where lower AIC indicates a better model, though please see a statistics reference for additional details. No models were presented.
3) Distributions have quantiles. Quantiles can be calculated from data. There is no quantile distribution. It would not be possible to calculate quantiles from a function that lacked other statistical attributes (mean, median, mode, variance, etc...). I cannot interpret "distribution have only quantile function."

Please clarify the question.
Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of ASHLIN VARKEY
Sent: Friday, November 25, 2022 1:34 AM
To: r-help at r-project.org
Subject: [R] (no subject)

[External Email]

How to calculate AIC , when the distribution have only quantile function

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C1412d0c214ca47b72c3a08dacf42af21%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638050182572115235%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=C26VbfYv6B8DJTUbgR2%2BvmlBZswHWYkDC50bG%2Bf0j5s%3D&amp;reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C1412d0c214ca47b72c3a08dacf42af21%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638050182572115235%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=zD4yMbhpaLGO8p4KUHSH8quKHFmkmtwSLptF55KLeWY%3D&amp;reserved=0
and provide commented, minimal, self-contained, reproducible code.


From dgr|@bdu||@h @end|ng |rom gm@||@com  Sat Nov 26 20:58:50 2022
From: dgr|@bdu||@h @end|ng |rom gm@||@com (=?UTF-8?Q?Abdullah_DO=C4=9ERUL?=)
Date: Sat, 26 Nov 2022 22:58:50 +0300
Subject: [R] What is new in R especially about Tidyverse.
Message-ID: <CAOSMT7bOuLp9rX=6PMP8Wq5sy+c-hYmn6Pvj1uQKC0+1OV5PPw@mail.gmail.com>

To whom it may concern,

Currently I'm doing my MSc in Turkey. My department is Industrial
Engineering. I'm going to do my thesis about Tidyverse in R. I'm looking
for articles which contain what is new, what changed and what is
Tidyverse's contributions?

I need a help about how to find those articles. I have found some of
articles. But, probably they'll not help much.

Thank you for your help.
Best regards.

Abdullah DO?RUL

	[[alternative HTML version deleted]]


From er|cjberger @end|ng |rom gm@||@com  Sun Nov 27 09:49:31 2022
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Sun, 27 Nov 2022 10:49:31 +0200
Subject: [R] What is new in R especially about Tidyverse.
In-Reply-To: <CAOSMT7bOuLp9rX=6PMP8Wq5sy+c-hYmn6Pvj1uQKC0+1OV5PPw@mail.gmail.com>
References: <CAOSMT7bOuLp9rX=6PMP8Wq5sy+c-hYmn6Pvj1uQKC0+1OV5PPw@mail.gmail.com>
Message-ID: <CAGgJW75a9E4ePFYbUxTJ+yjVT3A0_yizWHEr9Fu=nrXn-=u9fA@mail.gmail.com>

Hi Abdullah,
The Tidyverse is a set of R packages that are designed to work well
together for handling a variety of common tasks in data science. Many of
these packages are written by Hadley Wickham, chief scientist at
RStudio.com.

https://en.wikipedia.org/wiki/Hadley_Wickham

RStudio.com is a commercial company which provides both free and non-free
products for data science. Many R users use the free IDE RStudio provided
by them. The company recently changed its name from RStudio.com to Posit,
as it wants to emphasize that its tools are not restricted to R (e.g.
Python is supported, Quarto for documents, etc)

I suggest you look at the resources available at https::/posit.co as a
start.

Besides the tidyverse packages, you might want to investigate how different
groups have used the tidyverse philosophy (and packages) to provide groups
of packages for handling specific sub-disciplines in data science. For
example, Rob Hyndman's group has created the tidyverts (the 'ts' refers to
time series) which extends the tidyverse packages and also contributed
additional packages. The tidyverts facilitates time series forecasting.

Good luck,
Eric



On Sun, Nov 27, 2022 at 10:16 AM Abdullah DO?RUL <dgrlabdullah at gmail.com>
wrote:

> To whom it may concern,
>
> Currently I'm doing my MSc in Turkey. My department is Industrial
> Engineering. I'm going to do my thesis about Tidyverse in R. I'm looking
> for articles which contain what is new, what changed and what is
> Tidyverse's contributions?
>
> I need a help about how to find those articles. I have found some of
> articles. But, probably they'll not help much.
>
> Thank you for your help.
> Best regards.
>
> Abdullah DO?RUL
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From tebert @end|ng |rom u||@edu  Sun Nov 27 15:26:45 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Sun, 27 Nov 2022 14:26:45 +0000
Subject: [R] What is new in R especially about Tidyverse.
In-Reply-To: <CAGgJW75a9E4ePFYbUxTJ+yjVT3A0_yizWHEr9Fu=nrXn-=u9fA@mail.gmail.com>
References: <CAOSMT7bOuLp9rX=6PMP8Wq5sy+c-hYmn6Pvj1uQKC0+1OV5PPw@mail.gmail.com>
 <CAGgJW75a9E4ePFYbUxTJ+yjVT3A0_yizWHEr9Fu=nrXn-=u9fA@mail.gmail.com>
Message-ID: <BN6PR2201MB15537AB89721C8F4A4B10687CF109@BN6PR2201MB1553.namprd22.prod.outlook.com>

I suggest starting with a browser (I used Google), and search for "Tidyverse". Some pages there should help. I would check out the github link. Before going too far I would also check out the Wikipedia page, and the references cited therein. Using key words from these resources and using citations in these resources should get you much closer to your goal.
   I had thought that github kept track of versions. I am not super familiar with github. While I could not find the version histories, I might not have general access to that information or I simply did not know where to look. There is a possibility that the detailed version histories might be information overload and you will have to sift through many small tweaks to find important developments. You might need to clearly define what constitutes an "important update" or the audience that found the update important. 

Tim 

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Eric Berger
Sent: Sunday, November 27, 2022 3:50 AM
To: Abdullah DO?RUL <dgrlabdullah at gmail.com>
Cc: r-help at r-project.org
Subject: Re: [R] What is new in R especially about Tidyverse.

[External Email]

Hi Abdullah,
The Tidyverse is a set of R packages that are designed to work well together for handling a variety of common tasks in data science. Many of these packages are written by Hadley Wickham, chief scientist at RStudio.com.

https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FHadley_Wickham&amp;data=05%7C01%7Ctebert%40ufl.edu%7Ca473eece3c93493f8b7d08dad0546547%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638051358176015383%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=yWWonY9jWhq9NE9I7BQ7eEQ%2B8u39hjxktaQvtXTkQoY%3D&amp;reserved=0

RStudio.com is a commercial company which provides both free and non-free products for data science. Many R users use the free IDE RStudio provided by them. The company recently changed its name from RStudio.com to Posit, as it wants to emphasize that its tools are not restricted to R (e.g.
Python is supported, Quarto for documents, etc)

I suggest you look at the resources available at https::/posit.co as a start.

Besides the tidyverse packages, you might want to investigate how different groups have used the tidyverse philosophy (and packages) to provide groups of packages for handling specific sub-disciplines in data science. For example, Rob Hyndman's group has created the tidyverts (the 'ts' refers to time series) which extends the tidyverse packages and also contributed additional packages. The tidyverts facilitates time series forecasting.

Good luck,
Eric



On Sun, Nov 27, 2022 at 10:16 AM Abdullah DO?RUL <dgrlabdullah at gmail.com>
wrote:

> To whom it may concern,
>
> Currently I'm doing my MSc in Turkey. My department is Industrial 
> Engineering. I'm going to do my thesis about Tidyverse in R. I'm 
> looking for articles which contain what is new, what changed and what 
> is Tidyverse's contributions?
>
> I need a help about how to find those articles. I have found some of 
> articles. But, probably they'll not help much.
>
> Thank you for your help.
> Best regards.
>
> Abdullah DO?RUL
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat
> .ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl
> .edu%7Ca473eece3c93493f8b7d08dad0546547%7C0d4da0f84a314d76ace60a62331e
> 1b84%7C0%7C0%7C638051358176015383%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4w
> LjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C
> &amp;sdata=cPJFkNJfLjyipJXzJSsgP6tsZbuxoZSDSKicG4jrBqg%3D&amp;reserved
> =0
> PLEASE do read the posting guide
> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r
> -project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%
> 7Ca473eece3c93493f8b7d08dad0546547%7C0d4da0f84a314d76ace60a62331e1b84%
> 7C0%7C0%7C638051358176015383%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwM
> DAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;
> sdata=GJRLQ9rc9R71FWpzrc0RA1z87sNvh6jhBIVKlws1HeE%3D&amp;reserved=0
> and provide commented, minimal, self-contained, reproducible code.
>

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7Ca473eece3c93493f8b7d08dad0546547%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638051358176015383%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=cPJFkNJfLjyipJXzJSsgP6tsZbuxoZSDSKicG4jrBqg%3D&amp;reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7Ca473eece3c93493f8b7d08dad0546547%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638051358176171621%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=O3Mf5vIfnKotRFRTSqvHLhsdV0fvxvW8AcawXC%2F1XQ4%3D&amp;reserved=0
and provide commented, minimal, self-contained, reproducible code.


From v|noddh@mnek@r11 @end|ng |rom gm@||@com  Tue Nov 29 13:45:49 2022
From: v|noddh@mnek@r11 @end|ng |rom gm@||@com (Winod Dhamnekar)
Date: Tue, 29 Nov 2022 18:15:49 +0530
Subject: [R] Explanation required for the examples given for the 'curl'
 function in the 'r' package 'calculus'
Message-ID: <CADL+Ce2=yY=ysQZVoM9MHPbAQwaL2pdhQJH3qtdHN9pLGQX2gQ@mail.gmail.com>

Hello sir,

In the Reference manual given by Cran.r-project.org, the following examples
for the function 'curl' are given.

I know how to compute 'curl' in octave. I can use HP 50g calculator to
compute curl of a vector field to compute line integrals using Stokes's
theorem.

I compute curl of a vector field manually as well.

But I don't understand these examples. The results after running the
examples in 'R' are given below:
  curl> ### symbolic curl of a 2-d vector field
curl> f <- c("x^3*y^2","x")

curl> curl(f, var = c("x","y"))
[1] "(1) * 1 + (x^3 * (2 * y)) * -1"

curl> ### numerical curl of a 2-d vector field in (x=1, y=1)
curl> f <- function(x,y) c(x^3*y^2, x)

curl> curl(f, var = c(x=1, y=1))
[1] -1

curl> ### numerical curl of a 3-d vector field in (x=1, y=1, z=1)
curl> f <- function(x,y,z) c(x^3*y^2, x, z)

curl> curl(f, var = c(x=1, y=1, z=1))
[1]  0  0 -1

curl> ### vectorized interface
curl> f <- function(x) c(x[1]^3*x[2]^2, x[1], x[3])

curl> curl(f, var = c(1,1,1))
[1]  0  0 -1

curl> ### symbolic array of vector-valued 3-d functions
curl> f <- array(c("x*y","x","y*z","y","x*z","z"), dim = c(2,3))

curl> curl(f, var = c("x","y","z"))
     [,1]       [,2]       [,3]
[1,] "(y) * -1" "(z) * -1" "(x) * -1"
[2,] "0"        "0"        "0"

curl> ### numeric array of vector-valued 3-d functions in (x=1, y=1, z=1)
curl> f <- function(x,y,z) array(c(x*y,x,y*z,y,x*z,z), dim = c(2,3))

curl> curl(f, var = c(x=1, y=1, z=1))
     [,1] [,2] [,3]
[1,]   -1   -1   -1
[2,]    0    0    0

curl> ### binary operator
curl> c("x*y","y*z","x*z") %curl% c("x","y","z")
[1] "(y) * -1" "(z) * -1" "(x) * -1"

Yours R-help subscriber
Winod Dhamnekar

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Tue Nov 29 21:14:53 2022
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Tue, 29 Nov 2022 12:14:53 -0800
Subject: [R] What is new in R especially about Tidyverse.
In-Reply-To: <BN6PR2201MB15537AB89721C8F4A4B10687CF109@BN6PR2201MB1553.namprd22.prod.outlook.com>
References: <CAOSMT7bOuLp9rX=6PMP8Wq5sy+c-hYmn6Pvj1uQKC0+1OV5PPw@mail.gmail.com>
 <CAGgJW75a9E4ePFYbUxTJ+yjVT3A0_yizWHEr9Fu=nrXn-=u9fA@mail.gmail.com>
 <BN6PR2201MB15537AB89721C8F4A4B10687CF109@BN6PR2201MB1553.namprd22.prod.outlook.com>
Message-ID: <7368ceac-cb21-cb05-f74a-3a3509e999c0@comcast.net>

The OP should familiarize him/her-self with the `news()` function. It 
would allow reading what the authors of packages including those of the 
base packages have to say about material changes.


#First, type:

?news

#Then perhaps:

news(package="R") news(package="tidyverse") -- David.

On 11/27/22 06:26, Ebert,Timothy Aaron wrote:
> I suggest starting with a browser (I used Google), and search for "Tidyverse". Some pages there should help. I would check out the github link. Before going too far I would also check out the Wikipedia page, and the references cited therein. Using key words from these resources and using citations in these resources should get you much closer to your goal.
>     I had thought that github kept track of versions. I am not super familiar with github. While I could not find the version histories, I might not have general access to that information or I simply did not know where to look. There is a possibility that the detailed version histories might be information overload and you will have to sift through many small tweaks to find important developments. You might need to clearly define what constitutes an "important update" or the audience that found the update important.
>
> Tim
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Eric Berger
> Sent: Sunday, November 27, 2022 3:50 AM
> To: Abdullah DO?RUL <dgrlabdullah at gmail.com>
> Cc: r-help at r-project.org
> Subject: Re: [R] What is new in R especially about Tidyverse.
>
> [External Email]
>
> Hi Abdullah,
> The Tidyverse is a set of R packages that are designed to work well together for handling a variety of common tasks in data science. Many of these packages are written by Hadley Wickham, chief scientist at RStudio.com.
>
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FHadley_Wickham&amp;data=05%7C01%7Ctebert%40ufl.edu%7Ca473eece3c93493f8b7d08dad0546547%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638051358176015383%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=yWWonY9jWhq9NE9I7BQ7eEQ%2B8u39hjxktaQvtXTkQoY%3D&amp;reserved=0
>
> RStudio.com is a commercial company which provides both free and non-free products for data science. Many R users use the free IDE RStudio provided by them. The company recently changed its name from RStudio.com to Posit, as it wants to emphasize that its tools are not restricted to R (e.g.
> Python is supported, Quarto for documents, etc)
>
> I suggest you look at the resources available at https::/posit.co as a start.
>
> Besides the tidyverse packages, you might want to investigate how different groups have used the tidyverse philosophy (and packages) to provide groups of packages for handling specific sub-disciplines in data science. For example, Rob Hyndman's group has created the tidyverts (the 'ts' refers to time series) which extends the tidyverse packages and also contributed additional packages. The tidyverts facilitates time series forecasting.
>
> Good luck,
> Eric
>
>
>
> On Sun, Nov 27, 2022 at 10:16 AM Abdullah DO?RUL <dgrlabdullah at gmail.com>
> wrote:
>
>> To whom it may concern,
>>
>> Currently I'm doing my MSc in Turkey. My department is Industrial
>> Engineering. I'm going to do my thesis about Tidyverse in R. I'm
>> looking for articles which contain what is new, what changed and what
>> is Tidyverse's contributions?
>>
>> I need a help about how to find those articles. I have found some of
>> articles. But, probably they'll not help much.
>>
>> Thank you for your help.
>> Best regards.
>>
>> Abdullah DO?RUL
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat
>> .ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl
>> .edu%7Ca473eece3c93493f8b7d08dad0546547%7C0d4da0f84a314d76ace60a62331e
>> 1b84%7C0%7C0%7C638051358176015383%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4w
>> LjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C
>> &amp;sdata=cPJFkNJfLjyipJXzJSsgP6tsZbuxoZSDSKicG4jrBqg%3D&amp;reserved
>> =0
>> PLEASE do read the posting guide
>> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r
>> -project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%
>> 7Ca473eece3c93493f8b7d08dad0546547%7C0d4da0f84a314d76ace60a62331e1b84%
>> 7C0%7C0%7C638051358176015383%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwM
>> DAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;
>> sdata=GJRLQ9rc9R71FWpzrc0RA1z87sNvh6jhBIVKlws1HeE%3D&amp;reserved=0
>> and provide commented, minimal, self-contained, reproducible code.
>>
>          [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7Ca473eece3c93493f8b7d08dad0546547%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638051358176015383%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=cPJFkNJfLjyipJXzJSsgP6tsZbuxoZSDSKicG4jrBqg%3D&amp;reserved=0
> PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7Ca473eece3c93493f8b7d08dad0546547%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638051358176171621%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=O3Mf5vIfnKotRFRTSqvHLhsdV0fvxvW8AcawXC%2F1XQ4%3D&amp;reserved=0
> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Wed Nov 30 13:40:50 2022
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Wed, 30 Nov 2022 13:40:50 +0100
Subject: [R] Select dataframe row containing a digit
Message-ID: <CAMk+s2SbBEZVU6ey_Ua3vzmwdtfNnatfYRXJ0_ecV-hpBKfdPw@mail.gmail.com>

Hello,
I have a data frame where some lines containing strings including digits.
How do I select those rows and change their values?

In essence, I have a data frame with different values assigned to the
column "val". I am formatting everything to either "POS" and "NEG",
but values entered as number should get the value "NUM".
How do I change such values?

-- 
Best regards,
Luigi


```
df = data.frame(id = runif(10, 1, 100),
                val = c("", "POs", "Pos", "P", "Y",
                        "13.6", "Neg", "N", "0.5", "58.4"),
                stringsAsFactors = FALSE)
df$val[df$val == ""] = NA
df$val[df$val == "POs"] = "POS"
df$val[df$val == "Pos"] = "POS"
df$val[df$val == "P"] = "POS"
df$val[df$val == "Y"] = "POS"
df$val[df$val == "Neg"] = "NEG"
df$val[df$val == "N"] = "NEG"
```


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Nov 30 14:02:42 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 30 Nov 2022 16:02:42 +0300
Subject: [R] Select dataframe row containing a digit
In-Reply-To: <CAMk+s2SbBEZVU6ey_Ua3vzmwdtfNnatfYRXJ0_ecV-hpBKfdPw@mail.gmail.com>
References: <CAMk+s2SbBEZVU6ey_Ua3vzmwdtfNnatfYRXJ0_ecV-hpBKfdPw@mail.gmail.com>
Message-ID: <20221130160242.31c175d4@arachnoid>

? Wed, 30 Nov 2022 13:40:50 +0100
Luigi Marongiu <marongiu.luigi at gmail.com> ?????:

> I am formatting everything to either "POS" and "NEG",
> but values entered as number should get the value "NUM".
> How do I change such values?

Thanks for providing an example!

One idea would be to use a regular expression to locate numbers. For
example, grepl('[0-9]', df$val) will return a logical vector indexing
the rows containing digits. Alternatively, grepl('^[0-9.]+$', df$val,
perl = TRUE) will index all strings consisting solely of digits and
decimal separators.

Another idea would be to parse all of the strings as numbers and filter
out those that didn't succeed. Use as.numeric() to perform the parsing,
suppressWarnings() to silence the messages telling you that the parsing
failed for some of the strings and is.na() to get the logical vector
indexing those entries that failed to parse.

-- 
Best regards,
Ivan


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Wed Nov 30 14:04:59 2022
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Wed, 30 Nov 2022 14:04:59 +0100
Subject: [R] Select dataframe row containing a digit
In-Reply-To: <20221130160242.31c175d4@arachnoid>
References: <CAMk+s2SbBEZVU6ey_Ua3vzmwdtfNnatfYRXJ0_ecV-hpBKfdPw@mail.gmail.com>
 <20221130160242.31c175d4@arachnoid>
Message-ID: <CAMk+s2RpZ08U0sPWr=DcOktL519yX1YoHv_yQDPuLLnHV0wqUA@mail.gmail.com>

Thank you,
I have been trying with [:digit:] but did not work. It worked with
`df$val[grepl('[0-9]', df$val)] = "NUM"`

On Wed, Nov 30, 2022 at 2:02 PM Ivan Krylov <krylov.r00t at gmail.com> wrote:
>
> ? Wed, 30 Nov 2022 13:40:50 +0100
> Luigi Marongiu <marongiu.luigi at gmail.com> ?????:
>
> > I am formatting everything to either "POS" and "NEG",
> > but values entered as number should get the value "NUM".
> > How do I change such values?
>
> Thanks for providing an example!
>
> One idea would be to use a regular expression to locate numbers. For
> example, grepl('[0-9]', df$val) will return a logical vector indexing
> the rows containing digits. Alternatively, grepl('^[0-9.]+$', df$val,
> perl = TRUE) will index all strings consisting solely of digits and
> decimal separators.
>
> Another idea would be to parse all of the strings as numbers and filter
> out those that didn't succeed. Use as.numeric() to perform the parsing,
> suppressWarnings() to silence the messages telling you that the parsing
> failed for some of the strings and is.na() to get the logical vector
> indexing those entries that failed to parse.
>
> --
> Best regards,
> Ivan



-- 
Best regards,
Luigi


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Wed Nov 30 14:15:20 2022
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Wed, 30 Nov 2022 13:15:20 +0000
Subject: [R] Select dataframe row containing a digit
In-Reply-To: <CAMk+s2RpZ08U0sPWr=DcOktL519yX1YoHv_yQDPuLLnHV0wqUA@mail.gmail.com>
References: <CAMk+s2SbBEZVU6ey_Ua3vzmwdtfNnatfYRXJ0_ecV-hpBKfdPw@mail.gmail.com>
 <20221130160242.31c175d4@arachnoid>
 <CAMk+s2RpZ08U0sPWr=DcOktL519yX1YoHv_yQDPuLLnHV0wqUA@mail.gmail.com>
Message-ID: <431ec269-b8ac-67e0-5f12-ec282e044c9d@dewey.myzen.co.uk>

I suspect [[:digit:]] might have done what you want.

Michael

On 30/11/2022 13:04, Luigi Marongiu wrote:
> Thank you,
> I have been trying with [:digit:] but did not work. It worked with
> `df$val[grepl('[0-9]', df$val)] = "NUM"`
> 
> On Wed, Nov 30, 2022 at 2:02 PM Ivan Krylov <krylov.r00t at gmail.com> wrote:
>>
>> ? Wed, 30 Nov 2022 13:40:50 +0100
>> Luigi Marongiu <marongiu.luigi at gmail.com> ?????:
>>
>>> I am formatting everything to either "POS" and "NEG",
>>> but values entered as number should get the value "NUM".
>>> How do I change such values?
>>
>> Thanks for providing an example!
>>
>> One idea would be to use a regular expression to locate numbers. For
>> example, grepl('[0-9]', df$val) will return a logical vector indexing
>> the rows containing digits. Alternatively, grepl('^[0-9.]+$', df$val,
>> perl = TRUE) will index all strings consisting solely of digits and
>> decimal separators.
>>
>> Another idea would be to parse all of the strings as numbers and filter
>> out those that didn't succeed. Use as.numeric() to perform the parsing,
>> suppressWarnings() to silence the messages telling you that the parsing
>> failed for some of the strings and is.na() to get the logical vector
>> indexing those entries that failed to parse.
>>
>> --
>> Best regards,
>> Ivan
> 
> 
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Nov 30 15:38:16 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 30 Nov 2022 14:38:16 +0000
Subject: [R] Select dataframe row containing a digit
In-Reply-To: <CAMk+s2SbBEZVU6ey_Ua3vzmwdtfNnatfYRXJ0_ecV-hpBKfdPw@mail.gmail.com>
References: <CAMk+s2SbBEZVU6ey_Ua3vzmwdtfNnatfYRXJ0_ecV-hpBKfdPw@mail.gmail.com>
Message-ID: <7c247dff-8375-e265-ed88-c85b674831d7@sapo.pt>

?s 12:40 de 30/11/2022, Luigi Marongiu escreveu:
> Hello,
> I have a data frame where some lines containing strings including digits.
> How do I select those rows and change their values?
> 
> In essence, I have a data frame with different values assigned to the
> column "val". I am formatting everything to either "POS" and "NEG",
> but values entered as number should get the value "NUM".
> How do I change such values?
> 

Hello,

Here is a way with grep.


i <- grep("^P|^Y", df$val, ignore.case = TRUE)
df$val[i] <- "POS"
i <- grep("^N", df$val, ignore.case = TRUE)
df$val[i] <- "NEG"
i <- grep("\\d+", df$val)
df$val[i] <- "NUM"
is.na(df$val) <- df$val == ""
df


Hope this helps,

Rui Barradas


From bgunter@4567 @end|ng |rom gm@||@com  Wed Nov 30 16:25:33 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 30 Nov 2022 07:25:33 -0800
Subject: [R] Select dataframe row containing a digit
In-Reply-To: <7c247dff-8375-e265-ed88-c85b674831d7@sapo.pt>
References: <CAMk+s2SbBEZVU6ey_Ua3vzmwdtfNnatfYRXJ0_ecV-hpBKfdPw@mail.gmail.com>
 <7c247dff-8375-e265-ed88-c85b674831d7@sapo.pt>
Message-ID: <CAGxFJbRjUW_M8D=WegpM7S+ND7e2a+cCLiv0-G8_fgrw6C2EQw@mail.gmail.com>

... or, if you wanted to do it all in one go:


within(df, val <-
      ifelse(grepl("P|Y", val, ignore.case = TRUE), "POS",
             ifelse(grepl("N", val, ignore.case = TRUE), "NEG","NUM")))

## which gives
 [1] "NUM" "POS" "POS" "POS" "POS" "NUM" "NEG" "NEG" "NUM" "NUM"

for the "val" column

-- Bert

On Wed, Nov 30, 2022 at 6:38 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:

> ?s 12:40 de 30/11/2022, Luigi Marongiu escreveu:
> > Hello,
> > I have a data frame where some lines containing strings including digits.
> > How do I select those rows and change their values?
> >
> > In essence, I have a data frame with different values assigned to the
> > column "val". I am formatting everything to either "POS" and "NEG",
> > but values entered as number should get the value "NUM".
> > How do I change such values?
> >
>
> Hello,
>
> Here is a way with grep.
>
>
> i <- grep("^P|^Y", df$val, ignore.case = TRUE)
> df$val[i] <- "POS"
> i <- grep("^N", df$val, ignore.case = TRUE)
> df$val[i] <- "NEG"
> i <- grep("\\d+", df$val)
> df$val[i] <- "NUM"
> is.na(df$val) <- df$val == ""
> df
>
>
> Hope this helps,
>
> Rui Barradas
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Wed Nov 30 17:03:26 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 30 Nov 2022 08:03:26 -0800
Subject: [R] Select dataframe row containing a digit
In-Reply-To: <CAGxFJbRjUW_M8D=WegpM7S+ND7e2a+cCLiv0-G8_fgrw6C2EQw@mail.gmail.com>
References: <CAMk+s2SbBEZVU6ey_Ua3vzmwdtfNnatfYRXJ0_ecV-hpBKfdPw@mail.gmail.com>
 <7c247dff-8375-e265-ed88-c85b674831d7@sapo.pt>
 <CAGxFJbRjUW_M8D=WegpM7S+ND7e2a+cCLiv0-G8_fgrw6C2EQw@mail.gmail.com>
Message-ID: <CAGxFJbSbf0sk-K4XZRz44w8K2TiR9jjfChzpGQRcem=O-+BjRw@mail.gmail.com>

I just noticed that I forgot about the "" <-> NA clause. So my "onego"
solution should be:

df <-   ## to assign back to df or perhaps a new frame
within(df, val <-
   ifelse(val == "", NA,
     ifelse(grepl("P|Y", val, ignore.case = TRUE), "POS",
            ifelse(grepl("N", val, ignore.case = TRUE), "NEG","NUM"))))

## and this then gives for val:

 [1] NA    "POS" "POS" "POS" "POS" "NUM" "NEG" "NEG" "NUM" "NUM"

-- Bert


On Wed, Nov 30, 2022 at 7:25 AM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> ... or, if you wanted to do it all in one go:
>
>
> within(df, val <-
>       ifelse(grepl("P|Y", val, ignore.case = TRUE), "POS",
>              ifelse(grepl("N", val, ignore.case = TRUE), "NEG","NUM")))
>
> ## which gives
>  [1] "NUM" "POS" "POS" "POS" "POS" "NUM" "NEG" "NEG" "NUM" "NUM"
>
> for the "val" column
>
> -- Bert
>
> On Wed, Nov 30, 2022 at 6:38 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:
>
>> ?s 12:40 de 30/11/2022, Luigi Marongiu escreveu:
>> > Hello,
>> > I have a data frame where some lines containing strings including
>> digits.
>> > How do I select those rows and change their values?
>> >
>> > In essence, I have a data frame with different values assigned to the
>> > column "val". I am formatting everything to either "POS" and "NEG",
>> > but values entered as number should get the value "NUM".
>> > How do I change such values?
>> >
>>
>> Hello,
>>
>> Here is a way with grep.
>>
>>
>> i <- grep("^P|^Y", df$val, ignore.case = TRUE)
>> df$val[i] <- "POS"
>> i <- grep("^N", df$val, ignore.case = TRUE)
>> df$val[i] <- "NEG"
>> i <- grep("\\d+", df$val)
>> df$val[i] <- "NUM"
>> is.na(df$val) <- df$val == ""
>> df
>>
>>
>> Hope this helps,
>>
>> Rui Barradas
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From r@turner @end|ng |rom @uck|@nd@@c@nz  Wed Nov 30 20:59:28 2022
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Thu, 1 Dec 2022 08:59:28 +1300
Subject: [R] Select dataframe row containing a digit
In-Reply-To: <CAMk+s2SbBEZVU6ey_Ua3vzmwdtfNnatfYRXJ0_ecV-hpBKfdPw@mail.gmail.com>
References: <CAMk+s2SbBEZVU6ey_Ua3vzmwdtfNnatfYRXJ0_ecV-hpBKfdPw@mail.gmail.com>
Message-ID: <20221201085928.18573b32@rolf-Latitude-E7470>


On Wed, 30 Nov 2022 13:40:50 +0100
Luigi Marongiu <marongiu.luigi at gmail.com> wrote:

> Hello,
> I have a data frame where some lines containing strings including
> digits. How do I select those rows and change their values?
> 
> In essence, I have a data frame with different values assigned to the
> column "val". I am formatting everything to either "POS" and "NEG",
> but values entered as number should get the value "NUM".
> How do I change such values?
> 

What I do in such circumstances:

suppressWarnings(X$val[!is.na(as.numeric(X$val))] <- "NUM")

The "suppressWarnings()" bit is just included due to my OCD.

This avoids fooling about with regular expressions, which always
requires a huge amount of trial and error, and a great diminishment of
the amount of hair on one's head (as a result of tearing out).

Note that I have changed the name of your data frame from "df" to "X",
since df() is a built-in R function (density of the F-distribution).

See fortunes::fortune("might clash").

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


