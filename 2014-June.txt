From r.turner at auckland.ac.nz  Sun Jun  1 00:08:19 2014
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Sun, 1 Jun 2014 10:08:19 +1200
Subject: [R] Skipping .Rd files and using Org-mode instead?
In-Reply-To: <87tx86q72i.fsf@gmail.com>
References: <87tx86q72i.fsf@gmail.com>
Message-ID: <538A52D3.8000904@auckland.ac.nz>

On 01/06/14 03:52, Thorsten Jolitz wrote:
>
> Hi List,
>
> it seems that .Rd files are just an intermediary format used for
> exporting to txt, html and latex when creating an R package.
>
> How flexible is the R package mechanism? Would it possible to skip .Rd
> files alltogether, write the docs with another tool (e.g. Emacs
> Org-mode), export them to txt, html and latex, and include these
> exported files in the package?
>
> Or does the R package mechanism simply expect the .Rd files to be there,
> so that there is no way avoiding the .Rd format?

(1) I am not an expert, but my reading of "Writing R Extension Packages" 
indicates to me that, yes, .Rd format is necessary.

(2) Why would you want to fuck things up by dodging around .Rd ("R 
documentation") files?  Amongst other things, these allow for 
consistency cross-checking by the package checking facility.

(3) The .Rd syntax is easy to learn and quite powerful.  Get off your 
duff and learn it.

cheers,

Rolf Turner


From tjolitz at gmail.com  Sun Jun  1 00:28:29 2014
From: tjolitz at gmail.com (Thorsten Jolitz)
Date: Sun, 1 Jun 2014 00:28:29 +0200
Subject: [R] Skipping .Rd files and using Org-mode instead?
References: <87tx86q72i.fsf@gmail.com> <538A52D3.8000904@auckland.ac.nz>
Message-ID: <87d2etr3aq.fsf@gmail.com>

Rolf Turner <r.turner at auckland.ac.nz> writes:

> On 01/06/14 03:52, Thorsten Jolitz wrote:
>>
>> Hi List,
>>
>> it seems that .Rd files are just an intermediary format used for
>> exporting to txt, html and latex when creating an R package.
>>
>> How flexible is the R package mechanism? Would it possible to skip .Rd
>> files alltogether, write the docs with another tool (e.g. Emacs
>> Org-mode), export them to txt, html and latex, and include these
>> exported files in the package?
>>
>> Or does the R package mechanism simply expect the .Rd files to be there,
>> so that there is no way avoiding the .Rd format?
>
> (1) I am not an expert, but my reading of "Writing R Extension
> Packages" indicates to me that, yes, .Rd format is necessary.

I thought that too, but wasn't completely sure

> (2) Why would you want to fuck things up by dodging around .Rd ("R
> documentation") files?  Amongst other things, these allow for
> consistency cross-checking by the package checking facility.

Thats indeed a good reason to stick with the .Rd files

> (3) The .Rd syntax is easy to learn and quite powerful.  Get off your
> duff and learn it.

.Rd syntax in not really intimidating, thats not the problem. Thanks for
the answer anyway.

-- 
cheers,
Thorsten


From ystrilets at gmail.com  Sun Jun  1 00:17:43 2014
From: ystrilets at gmail.com (Yuriy Strilets)
Date: Sun, 1 Jun 2014 00:17:43 +0200
Subject: [R] Creating a "very long" function in R
Message-ID: <CAFRrSvbH8T0SpM3cjb0tS+YD-r-6ZrRZJFa+JSpoD00fzh87yQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140601/e334b10b/attachment.pl>

From dwinsemius at comcast.net  Sun Jun  1 01:24:32 2014
From: dwinsemius at comcast.net (David Winsemius)
Date: Sat, 31 May 2014 16:24:32 -0700
Subject: [R] Creating a "very long" function in R
In-Reply-To: <CAFRrSvbH8T0SpM3cjb0tS+YD-r-6ZrRZJFa+JSpoD00fzh87yQ@mail.gmail.com>
References: <CAFRrSvbH8T0SpM3cjb0tS+YD-r-6ZrRZJFa+JSpoD00fzh87yQ@mail.gmail.com>
Message-ID: <387B40E9-3651-4CDB-AB57-559357C1B427@comcast.net>


On May 31, 2014, at 3:17 PM, Yuriy Strilets wrote:

> Dear All,
> 
> 
> 
> I would appreciate if someone could give any hint/ provide a solution if
> it's possible in R to create such a function where many similar
> mathematical expressions organized in a given way.
> 
> For example, to create a function: f(x)=(...(((x^x)^x)^x)...^x)^x (x is
> encountered n times). Or another example:
> g(x)=sin(x)*sin(x^2)*sin(x^3)*...*sin(x^n).

You should look at:

?funprog


There are several example of repeated applications of a functional argument. Also composition of list of functions.

One instance:

Iterate <- function(f, n = 1)
    function(x) Reduce(Funcall, rep.int(list(f), n), x, right = TRUE)

Iterate(function(x) x^1.1, 30)(1.01)

-- 
David
> 
> 
> When we are interested in a computation of any specific value of that
> function given a particular value of x, there is no any issue, and
> corresponding function value is computed in a straightforward way. For
> example of f(x) defined above:
> 
> f<-function(x, n) {
> 
> p<-x
> 
> for (i in 1:n) {
> 
> p<-p^x
> 
> }
> 
> print(p)
> 
> }
> 
> 
> 
> The issue is when we want to use a function "in general" with no particular
> x given.
> 
> 
> The whole question can be converted to a very short question (solution for
> which one is assumed to be a solution for primary question):
> 
> - to integrate a function  f(x)=(...(((x^x)^x)^x)...^x)^x (x is encountered
> n times) on the interval (0,1).
> 
> 
> 
> Thanks a lot in advance for any ideas.
> 
> I really believe that this doable with R syntax.
> 
> 
> 
> Best Regards,
> 
> Yuriy
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

David Winsemius
Alameda, CA, USA


From smartpink111 at yahoo.com  Sun Jun  1 03:37:45 2014
From: smartpink111 at yahoo.com (arun)
Date: Sat, 31 May 2014 18:37:45 -0700 (PDT)
Subject: [R] split string and count
Message-ID: <1401586665.30955.YahooMailNeo@web142602.mail.bf1.yahoo.com>

Hi,

May be this helps:
vec1 <- c("Humanities, Multidisciplinary; Social Sciences, Interdisciplinary; History",
"History","Sociology; Religion","Humanities, Multidisciplinary;","Social Sciences, Interdisciplinary","Literature","Sociology; Religion") 

res1 <- as.data.frame(table(unlist(strsplit(vec1,split="; ?"))))
#or
?res2 <- as.data.frame(table(strsplit(gsub(";+",";",paste(vec1,collapse="; ")),"; ?")[[1]]))
?identical(res1, res2)
#[1] TRUE

Regarding sorting, check ?sort() or ?order.

res2[order(res2$Var1),]


A.K.




Hi, I'm new user to R.
I've a list of terms in vector x, for example:
1 Humanities, Multidisciplinary; Social Sciences, Interdisciplinary; History
2 History
3 Sociology; Religion
4 Humanities, Multidisciplinary; Social Sciences, Interdisciplinary
5 Literature
6 Sociology; Religion

I need split for ';' the variable x, sort by name or by count, into new variable and count. For example:
Humanities, Multidisciplinary 2
History 2
Sociology 2
Religion 2
Literature 1
Social Sciences, Interdisciplinary 2

I don't know how many time ";" appears

Thanks. 



From dwinsemius at comcast.net  Sun Jun  1 08:52:30 2014
From: dwinsemius at comcast.net (David Winsemius)
Date: Sat, 31 May 2014 23:52:30 -0700
Subject: [R] Creating a "very long" function in R
In-Reply-To: <387B40E9-3651-4CDB-AB57-559357C1B427@comcast.net>
References: <CAFRrSvbH8T0SpM3cjb0tS+YD-r-6ZrRZJFa+JSpoD00fzh87yQ@mail.gmail.com>
	<387B40E9-3651-4CDB-AB57-559357C1B427@comcast.net>
Message-ID: <83A60A4C-B77E-44F3-B67D-9A5B876EC6C9@comcast.net>


On May 31, 2014, at 4:24 PM, David Winsemius wrote:

> 
> On May 31, 2014, at 3:17 PM, Yuriy Strilets wrote:
> 
>> Dear All,
>> 
>> 
>> 
>> I would appreciate if someone could give any hint/ provide a solution if
>> it's possible in R to create such a function where many similar
>> mathematical expressions organized in a given way.
>> 
>> For example, to create a function: f(x)=(...(((x^x)^x)^x)...^x)^x (x is
>> encountered n times). Or another example:
>> g(x)=sin(x)*sin(x^2)*sin(x^3)*...*sin(x^n).
> 
> You should look at:
> 
> ?funprog
> 

Despite the help page having an upper left-hand corner title of "funprog", one actually needs to use one of :

?Reduce
?Map
?Negate
?Filter

> 
> There are several example of repeated applications of a functional argument. Also composition of list of functions.
> 
> One instance:
> 
> Iterate <- function(f, n = 1)
>    function(x) Reduce(Funcall, rep.int(list(f), n), x, right = TRUE)
> 
> Iterate(function(x) x^1.1, 30)(1.01)
> 
> -- 
> David
>> 
>> 
>> When we are interested in a computation of any specific value of that
>> function given a particular value of x, there is no any issue, and
>> corresponding function value is computed in a straightforward way. For
>> example of f(x) defined above:
>> 
>> f<-function(x, n) {
>> 
>> p<-x
>> 
>> for (i in 1:n) {
>> 
>> p<-p^x
>> 
>> }
>> 
>> print(p)
>> 
>> }
>> 
>> 
>> 
>> The issue is when we want to use a function "in general" with no particular
>> x given.
>> 
>> 
>> The whole question can be converted to a very short question (solution for
>> which one is assumed to be a solution for primary question):
>> 
>> - to integrate a function  f(x)=(...(((x^x)^x)^x)...^x)^x (x is encountered
>> n times) on the interval (0,1).
>> 
>> 
>> 
>> Thanks a lot in advance for any ideas.
>> 
>> I really believe that this doable with R syntax.
>> 
>> 
>> 
>> Best Regards,
>> 
>> Yuriy
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> David Winsemius
> Alameda, CA, USA
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

David Winsemius
Alameda, CA, USA


From muditfool at gmail.com  Sun Jun  1 11:29:15 2014
From: muditfool at gmail.com (mudit gupta)
Date: Sun, 1 Jun 2014 14:59:15 +0530
Subject: [R] copula fitting
Message-ID: <CAOqgmySM=4Z6QvQE4TcG9DtNKbOpa7LNY+q_dkvqVhaG7VOhEA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140601/987b4b10/attachment.pl>

From Jonas.Ulbrich at ruhr-uni-bochum.de  Sun Jun  1 13:51:01 2014
From: Jonas.Ulbrich at ruhr-uni-bochum.de (Jonas Ulbrich)
Date: Sun, 01 Jun 2014 13:51:01 +0200
Subject: [R] Loop Autoregression
Message-ID: <7ee68d2374d5d0aeb4b3359b95891626@mpx2.rz.ruhr-uni-bochum.de>

Hello everybody, I have to confess that I am relatively new to R.

My problem is the following one:

I have a data set of 500 values. For each value I wanna make prediction 
of four steps ahead via autogregression. Because I have to repeat this 
procedure on three other data sets I wanna make a loop. (Manual 
calculation would take ages.)
My idea which does not work looks is as follows:

x<-NULL
for (i in 1:500){
   
x[i]<-predict(ar(y[i],order.max=1,method="yule-walker",intercept=TRUE, 
n.used=500, n.ahead=4))
}

Doing this I only get an error request that the value of "order.maX" 
needs to be smaller than "n.used". But this is the case. Isn't it?

Best Regards


From clivelists at googlemail.com  Sun Jun  1 22:20:45 2014
From: clivelists at googlemail.com (Clive Nicholas)
Date: Sun, 1 Jun 2014 21:20:45 +0100
Subject: [R] Plotting issues with -par(mfrow=c(r,c))- after -boot-
Message-ID: <CAHs5aTgoYRvLKCm0yU=B=Ed2qVEtdLUt_EGepLBS5gy45b9JSQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140601/b0690b32/attachment.pl>

From jdnewmil at dcn.davis.CA.us  Sun Jun  1 23:07:26 2014
From: jdnewmil at dcn.davis.CA.us (Jeff Newmiller)
Date: Sun, 01 Jun 2014 14:07:26 -0700
Subject: [R] Plotting issues with -par(mfrow=c(r,c))- after -boot-
In-Reply-To: <CAHs5aTgoYRvLKCm0yU=B=Ed2qVEtdLUt_EGepLBS5gy45b9JSQ@mail.gmail.com>
References: <CAHs5aTgoYRvLKCm0yU=B=Ed2qVEtdLUt_EGepLBS5gy45b9JSQ@mail.gmail.com>
Message-ID: <f7f4e8ef-9aeb-4b8a-8d82-76c08e0985fa@email.android.com>

Read ?plot.boot, in particular the Side Effects section. Not a very friendly function... you will have to modify it if you wish to proceed.
---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                      Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
--------------------------------------------------------------------------- 
Sent from my phone. Please excuse my brevity.

On June 1, 2014 1:20:45 PM PDT, Clive Nicholas <clivelists at googlemail.com> wrote:
>R 3.1.0 / RStudio 0.98.507 / OpenSUSE Linux 13.1
>
>I'm having difficulties getting -par(mfrow=c(r,c))- to work as it
>should
>after running bootstrapped regression models using -boot-. An example
>(tested):
>
>test=data.frame(A=rnorm(500, mean=2.72, sd=5.36),
>B=sample(c(12,20,24,28,32),size=500,prob=c(0.333,0.026,0.026,0.436,0.179),replace=TRUE),
>C=sample(c(0,1),size=500,prob=c(0.5,0.5),replace=TRUE),D=sample(c(0,1),size=500,prob=c(0.564,0.436),replace=TRUE))
>library(boot)
>bs=function(formula, data, indices) {
> test=data[indices,]
> fit=lm(formula, data=test)
> return(coef(fit))
>}
>results=boot(data=test, statistic=bs, R=10000, formula=A~B+C+D+C*D)
>results
>
>When I run
>
>par(mfrow=c(2,2))
>
>and then
>
>plot(results, index=2)
>plot(results, index=3)
>plot(results, index=4)
>plot(results, index=5)
>
>the plots display in full size only, as they are called, and not as one
>combined image of four plots. This problem also happened to me last
>year
>under earlier versions of R in Kubuntu Linux.
>
>This command worked fine when I first started using R in Linux, I don't
>think I'm doing much wrong in this instance and I would welcome any
>explanation as to what exactly is going on here, as well as a solution.


From smartpink111 at yahoo.com  Mon Jun  2 02:37:53 2014
From: smartpink111 at yahoo.com (arun)
Date: Sun, 1 Jun 2014 17:37:53 -0700 (PDT)
Subject: [R] Conditional mean for groups, new variables
Message-ID: <1401669473.77596.YahooMailNeo@web142605.mail.bf1.yahoo.com>

Hi,
May be this helps:


set.seed(42)
rev1 <- data.frame(SCHOOLID=sample(LETTERS[1:4],20,replace=TRUE), matrix(sample(25, 20*5,replace=TRUE), ncol=5, dimnames=list(NULL, c("MATH", "AGE", "STO2Q01", "BFMJ", "BMMJ"))),stringsAsFactors=FALSE)? 
res1 <- aggregate(rev1[,-1], list(SCHOOLID=rev1[,1]), mean,na.rm=TRUE)
res1
#if you need to change the names
res2 <- setNames(aggregate(rev1[,-1], list(SCHOOLID=rev1[,1]), mean,na.rm=TRUE), c("SCHOOLID", paste(colnames(rev1)[-1], "MEAN",sep="_")))
res2

A.K.


Hello! I have a problem, I want to calculate conditional mean for my dataset. First, I attach it:
rev<-read.csv("MATH1.csv", header=T, sep=";", dec=",")
attach(rev)
I have 650000 observations (test score) and 36000 groups (schoolid)
I need to calculate the mean for every group (schoolid) for the all my variables (MATH, AGE, ST02Q01,BFMJ,BMMJ. Actually, I have 34 varables, I just don't want to list them here)? and then to create new variables for obtained new columns, because I want to estimate a new regression for the new obtained average values.
The following method is not appropriate for me, because it gives me in result a table with schoolid and the average for one variables, and I don't know how to extract the MATH coulmn with average values from the table with results to the worklist separately(environment).
aggregate( MATH~SCHOOLID, rev, mean)
How can I solve this problem? Thank for help! 



From greta.puravida at gmail.com  Sun Jun  1 22:22:49 2014
From: greta.puravida at gmail.com (Greta)
Date: Sun, 1 Jun 2014 14:22:49 -0600
Subject: [R] Fwd: consultation
In-Reply-To: <CAB92=A+9kCHS_bpWg48HZVc6aHrzQ5pXe5=UFjwXZFxTcO6QPQ@mail.gmail.com>
References: <CAB92=A+9kCHS_bpWg48HZVc6aHrzQ5pXe5=UFjwXZFxTcO6QPQ@mail.gmail.com>
Message-ID: <CAB92=A+UYAZCEJ3daG2B1VaZx+Crxs6s+4sHR5fQoxbNznMm+Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: no disponible
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140601/cbf3138b/attachment.pl>

From kustka at andromeda.rutgers.edu  Sun Jun  1 18:39:27 2014
From: kustka at andromeda.rutgers.edu (Adam Kustka)
Date: Sun, 1 Jun 2014 12:39:27 -0400
Subject: [R] adonis output not significant even with dummy input?
Message-ID: <CACBS=yjjc84mGJOuemvYJX5z2N6CiDZtQooTuQv3r-uyH05dmA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140601/1f5a0451/attachment.pl>

From tomelaurita at yahoo.es  Sun Jun  1 20:29:45 2014
From: tomelaurita at yahoo.es (=?iso-8859-1?Q?laura_tom=E9?=)
Date: Sun, 1 Jun 2014 19:29:45 +0100 (BST)
Subject: [R] Cargar csv 16 GB en R
Message-ID: <1401647385.33904.YahooMailNeo@web171406.mail.ir2.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: no disponible
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140601/d645814f/attachment.pl>

From valuetrain at gmail.com  Sun Jun  1 19:49:59 2014
From: valuetrain at gmail.com (Bill Bentley)
Date: Sun, 1 Jun 2014 11:49:59 -0600
Subject: [R] Problem with rbind.fill
Message-ID: <001b01cf7dc1$ea6a7840$bf3f68c0$@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140601/0fd4e1e2/attachment.pl>

From JSorkin at grecc.umaryland.edu  Mon Jun  2 03:52:25 2014
From: JSorkin at grecc.umaryland.edu (John Sorkin)
Date: Sun, 01 Jun 2014 21:52:25 -0400
Subject: [R] Cargar csv 16 GB en R
In-Reply-To: <1401647385.33904.YahooMailNeo@web171406.mail.ir2.yahoo.com>
References: <1401647385.33904.YahooMailNeo@web171406.mail.ir2.yahoo.com>
Message-ID: <538BA099020000CB0010B72A@smtp.medicine.umaryland.edu>

Laura,
Si pudes escribir en Engles, vas a recibir mas ayuda; el mejor parte de
personas (incluendo yo) no podemos hablar Espanol.
 
Has tratado usando su programa con un parte pequeno de su dato? Si
haces esto todavia tienes su problema? Puedes enviarnos un copia de su
programa, y un subset (por ejemplo los premeros ciento lineas) de su
datos? 
 
Favor de desculpir me Espanol. Yo se solo palabras mas utiles, te amo,
te quiero, te hecho de menos . . .
 
John
 


John David Sorkin M.D., Ph.D.
Professor of Medicine
Chief, Biostatistics and Informatics
University of Maryland School of Medicine Division of Gerontology and
Geriatric Medicine
Baltimore VA Medical Center
10 North Greene Street
GRECC (BT/18/GR)
Baltimore, MD 21201-1524
(Phone) 410-605-7119
(Fax) 410-605-7913 (Please call phone number above prior to faxing) 


>>> laura tom?<tomelaurita at yahoo.es> 6/1/2014 2:29 PM >>>
Hola,

Estoy todav?a dando mis primeros pasos en R y una de las cosas que
tengo que hacer es trabajar con un csv de 16 GB. Consta de 10 columnas,
7 n?mericas
He probado varias cosas entre ellas  'colbycol' pero nada, mi ordenador
de queda frito.
Mi ordenador tiene 8GB de RAM y Windows 8

?Debo trocear previamente el csv,me recomendais alg?n paquete en
especial, etc para trabajar con un fichero tan pesado? Estoy
desesperada...

Muchas gracias
	[[alternative HTML version deleted]]


Confidentiality Statement:
This email message, including any attachments, is for the sole use of
the intended recipient(s) and may contain confidential and privileged
information.  Any unauthorized use, disclosure or distribution is
prohibited.  If you are not the intended recipient, please contact the
sender by reply email and destroy all copies of the original message. 

From roy.mendelssohn at noaa.gov  Mon Jun  2 03:53:00 2014
From: roy.mendelssohn at noaa.gov (Roy Mendelssohn)
Date: Sun, 1 Jun 2014 18:53:00 -0700
Subject: [R] Fwd: consultation
In-Reply-To: <CAB92=A+UYAZCEJ3daG2B1VaZx+Crxs6s+4sHR5fQoxbNznMm+Q@mail.gmail.com>
References: <CAB92=A+9kCHS_bpWg48HZVc6aHrzQ5pXe5=UFjwXZFxTcO6QPQ@mail.gmail.com>
	<CAB92=A+UYAZCEJ3daG2B1VaZx+Crxs6s+4sHR5fQoxbNznMm+Q@mail.gmail.com>
Message-ID: <8AEA29E1-E01D-42D0-9C26-FA4909899C92@noaa.gov>

Hi Greta:

Sometimes the old saying that 'GIYF  (Google is your friend) applies.  Try googling

R package MODIS  

or 

R package MODIS NDVI EVI

There are quite a few examples.  In particular you might look at:

http://stevemosher.wordpress.com/?s=MODIS


HTH,

-Roy

On Jun 1, 2014, at 1:22 PM, Greta <greta.puravida at gmail.com> wrote:

> Hello
> 
> I'm working on my final project race with MODIS images, the idea is to use
> the R program to make the process which is to select a tile download these
> pictures in different years (time series) for an area specific and keep them
> repository, then extract the NDVI and EVI information for that area and then
> generate a map that will be displayed on a screen, you can tell me if you
> know of anyone who has done this kind of code in R, I would appreciate.
> 
> Grettel Vargas
> Universidad de Granada, Espa?a
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
1352 Lighthouse Avenue
Pacific Grove, CA 93950-2097

e-mail: Roy.Mendelssohn at noaa.gov (Note new e-mail address)
voice: (831)-648-9029
fax: (831)-648-8440
www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From dwinsemius at comcast.net  Mon Jun  2 06:44:18 2014
From: dwinsemius at comcast.net (David Winsemius)
Date: Sun, 1 Jun 2014 21:44:18 -0700
Subject: [R] Problem with rbind.fill
In-Reply-To: <001b01cf7dc1$ea6a7840$bf3f68c0$@gmail.com>
References: <001b01cf7dc1$ea6a7840$bf3f68c0$@gmail.com>
Message-ID: <9A71D9C2-6553-4085-BFA5-8988EAD16ED8@comcast.net>


On Jun 1, 2014, at 10:49 AM, Bill Bentley wrote:

> The following works as it should...
> 
>> both<-rbind(females,males)
> 
>> both
> 
>  workshop gender q1 q2 q3 q4
> 
> 1        1      f  1  1  5  1
> 
> 2        2      f  2  1  4  1
> 
> 3        1      f  2  2  4  3
> 
> 5        1      m  4  5  2  4
> 
> 6        2      m  5  4  5  5
> 
> 8        2      m  4  5  5  5
> 
> 
> 
> Next I changed the objects males and females so they had different numbers
> of variables and used rbind again and got an error which I expected.
> 
> 
> 
>> both <- rbind(females, males)
> 
> Error in rbind(deparse.level, ...) : 
> 
>  numbers of columns of arguments do not match
> 
> 
> 
> Next I attached the 'reshape' library and tried to use rbind.fill but as the
> code below shows, it does NOT work.   The library seems to load ok (no error
> message) and appears in the list when I use the library() command.
> 
> 
> 
>> library("reshape")

Try:

help(pack="reshape")

Do you see  a listing for rbind.fill? I don't.


> 
>> both <- rbind.fill(females, males)
> 
> Error: could not find function "rbind.fill"

If you cannot find a function then try:

??rbind.fill

> 
> The book I'm following does this the same way and it works for them.

Maybe they loaded a different package? Or perhaps one that attached the package that has rbind.fill?




>   I've
> re-downloaded and installed the reshape package but to no avail.  Not sure
> what to do.  Can't find an answer in help.  I'm a brand new R user.   Any
> suggestions what I'm doing wrong?   Thanks!

My suggestion ( which is only slightly disingenuous, since I do know what package has the forenamed function), is to "learn to fish":

# Either:

install.packages("sos")
library(sos)
findFn("rbind.fill")

# Or:
Google it.


> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

David Winsemius
Alameda, CA, USA


From jorgeivanvelez at gmail.com  Mon Jun  2 06:49:14 2014
From: jorgeivanvelez at gmail.com (Jorge I Velez)
Date: Mon, 2 Jun 2014 14:49:14 +1000
Subject: [R] Problem with rbind.fill
In-Reply-To: <001b01cf7dc1$ea6a7840$bf3f68c0$@gmail.com>
References: <001b01cf7dc1$ea6a7840$bf3f68c0$@gmail.com>
Message-ID: <CAKL8G3GjWwO+09Ypi+RMB-ZmQBOhy-eqTUJ6q0QNzs3x_6UT7Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140602/efdb3fa1/attachment.pl>

From kridox at ymail.com  Mon Jun  2 06:54:59 2014
From: kridox at ymail.com (Pascal Oettli)
Date: Mon, 2 Jun 2014 13:54:59 +0900
Subject: [R] Problem with rbind.fill
In-Reply-To: <001b01cf7dc1$ea6a7840$bf3f68c0$@gmail.com>
References: <001b01cf7dc1$ea6a7840$bf3f68c0$@gmail.com>
Message-ID: <CAAcyNCziOq7CQ7Efmd8aRkdYjcGZ+9Rc_FANqcLURoX5xEne5Q@mail.gmail.com>

Hello,

Yes, but... "rbind.fill" is a function of the "plyr" package.

HTH,
Pascal

On Mon, Jun 2, 2014 at 2:49 AM, Bill Bentley <valuetrain at gmail.com> wrote:
> The following works as it should...
>
>> both<-rbind(females,males)
>
>> both
>
>   workshop gender q1 q2 q3 q4
>
> 1        1      f  1  1  5  1
>
> 2        2      f  2  1  4  1
>
> 3        1      f  2  2  4  3
>
> 5        1      m  4  5  2  4
>
> 6        2      m  5  4  5  5
>
> 8        2      m  4  5  5  5
>
>
>
> Next I changed the objects males and females so they had different numbers
> of variables and used rbind again and got an error which I expected.
>
>
>
>> both <- rbind(females, males)
>
> Error in rbind(deparse.level, ...) :
>
>   numbers of columns of arguments do not match
>
>
>
> Next I attached the 'reshape' library and tried to use rbind.fill but as the
> code below shows, it does NOT work.   The library seems to load ok (no error
> message) and appears in the list when I use the library() command.
>
>
>
>> library("reshape")
>
>> both <- rbind.fill(females, males)
>
> Error: could not find function "rbind.fill"
>
>
>
> The book I'm following does this the same way and it works for them.   I've
> re-downloaded and installed the reshape package but to no avail.  Not sure
> what to do.  Can't find an answer in help.  I'm a brand new R user.   Any
> suggestions what I'm doing wrong?   Thanks!
>
>
>
>
>
>
>
>
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Pascal Oettli
Project Scientist
JAMSTEC
Yokohama, Japan


From petr.pikal at precheza.cz  Mon Jun  2 08:25:56 2014
From: petr.pikal at precheza.cz (PIKAL Petr)
Date: Mon, 2 Jun 2014 06:25:56 +0000
Subject: [R] Loop Autoregression
In-Reply-To: <7ee68d2374d5d0aeb4b3359b95891626@mpx2.rz.ruhr-uni-bochum.de>
References: <7ee68d2374d5d0aeb4b3359b95891626@mpx2.rz.ruhr-uni-bochum.de>
Message-ID: <6E8D8DFDE5FA5D4ABCB8508389D1BF8802BD2BBB@SRVEXCHMBX.precheza.cz>

Hi

> -----Original Message-----
> From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-
> project.org] On Behalf Of Jonas Ulbrich
> Sent: Sunday, June 01, 2014 1:51 PM
> To: R-help at r-project.org
> Subject: [R] Loop Autoregression
>
> Hello everybody, I have to confess that I am relatively new to R.
>
> My problem is the following one:
>
> I have a data set of 500 values. For each value I wanna make prediction
> of four steps ahead via autogregression. Because I have to repeat this
> procedure on three other data sets I wanna make a loop. (Manual
> calculation would take ages.) My idea which does not work looks is as
> follows:
>
> x<-NULL
> for (i in 1:500){
>
> x[i]<-predict(ar(y[i],order.max=1,method="yule-walker",intercept=TRUE,
> n.used=500, n.ahead=4))
> }

We have no idea what is y and y[i]. I presume that y is vector and y[i] is one item from this vector, hence the error as n.used is actually 1 and order.max is also 1.

> ar((lh)[1])
Error in ar.yw.default(x, aic = aic, order.max = order.max, na.action = na.action,  :
  'order.max' must be >= 1
>

you can find how to use ar in its help page.
?ar

Also your parentheses are mismatched. Most probably you want

predict(ar(y,order.max=1,method="yule-walker",intercept=TRUE,n.used=500), n.ahead=4)

Regards
Petr



>
> Doing this I only get an error request that the value of "order.maX"
> needs to be smaller than "n.used". But this is the case. Isn't it?
>
> Best Regards
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.

________________________________
Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou ur?eny pouze jeho adres?t?m.
Jestli?e jste obdr?el(a) tento e-mail omylem, informujte laskav? neprodlen? jeho odes?latele. Obsah tohoto emailu i s p??lohami a jeho kopie vyma?te ze sv?ho syst?mu.
Nejste-li zam??len?m adres?tem tohoto emailu, nejste opr?vn?ni tento email jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu zp?sobenou modifikacemi ?i zpo?d?n?m p?enosu e-mailu.

V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
- vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o uzav?en? smlouvy, a to z jak?hokoliv d?vodu i bez uveden? d?vodu.
- a obsahuje-li nab?dku, je adres?t opr?vn?n nab?dku bezodkladn? p?ijmout; Odes?latel tohoto e-mailu (nab?dky) vylu?uje p?ijet? nab?dky ze strany p??jemce s dodatkem ?i odchylkou.
- trv? odes?latel na tom, ?e p??slu?n? smlouva je uzav?ena teprve v?slovn?m dosa?en?m shody na v?ech jej?ch n?le?itostech.
- odes?latel tohoto emailu informuje, ?e nen? opr?vn?n uzav?rat za spole?nost ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn? zmocn?n nebo p?semn? pov??en a takov? pov??en? nebo pln? moc byly adres?tovi tohoto emailu p??padn? osob?, kterou adres?t zastupuje, p?edlo?eny nebo jejich existence je adres?tovi ?i osob? j?m zastoupen? zn?m?.

This e-mail and any documents attached to it may be confidential and are intended only for its intended recipients.
If you received this e-mail by mistake, please immediately inform its sender. Delete the contents of this e-mail with all attachments and its copies from your system.
If you are not the intended recipient of this e-mail, you are not authorized to use, disseminate, copy or disclose this e-mail in any manner.
The sender of this e-mail shall not be liable for any possible damage caused by modifications of the e-mail or by delay with transfer of the email.

In case that this e-mail forms part of business dealings:
- the sender reserves the right to end negotiations about entering into a contract in any time, for any reason, and without stating any reasoning.
- if the e-mail contains an offer, the recipient is entitled to immediately accept such offer; The sender of this e-mail (offer) excludes any acceptance of the offer on the part of the recipient containing any amendment or variation.
- the sender insists on that the respective contract is concluded only upon an express mutual agreement on all its aspects.
- the sender of this e-mail informs that he/she is not authorized to enter into any contracts on behalf of the company except for cases in which he/she is expressly authorized to do so in writing, and such authorization or power of attorney is submitted to the recipient or the person represented by the recipient, or the existence of such authorization is known to the recipient of the person represented by the recipient.

From raphael.paebst at gmail.com  Mon Jun  2 08:57:42 2014
From: raphael.paebst at gmail.com (=?ISO-8859-1?Q?Raphael_P=E4bst?=)
Date: Mon, 2 Jun 2014 08:57:42 +0200
Subject: [R] Question about setdiff()
Message-ID: <CADuMfoG=MOLF7Y+c9qD8Y+O=vYV0VNxif4tugC9UE-mTVUOuBw@mail.gmail.com>

Hello everyone, I have a question which is probably rooted in my lack
of understanding when it comes to math.

I just did the following:

v <- c(1:20)
w <- c(11:30)
setdiff(v, w)

and got:
1 2 3 4 5 6 7 8 9 10

Then I did the following:
setdiff(w, v)
and got, not surprisingly:
21 22 23 24 25 26 27 28 29 30

Now I was originally expecting to get bot with the first call of
setdiff(v, w) and couldn't find any reason not to expect this from
?setdiff()

Am I missing somethin vital here or does setdiff() always give me the
elements of the first set that are not in the second one and not those
which are exclusive to either one, just dropping the ones in the
intersection of both sets?

Many Thanks in advance

Raphael


From jdnewmil at dcn.davis.CA.us  Mon Jun  2 09:33:55 2014
From: jdnewmil at dcn.davis.CA.us (Jeff Newmiller)
Date: Mon, 02 Jun 2014 00:33:55 -0700
Subject: [R] Question about setdiff()
In-Reply-To: <CADuMfoG=MOLF7Y+c9qD8Y+O=vYV0VNxif4tugC9UE-mTVUOuBw@mail.gmail.com>
References: <CADuMfoG=MOLF7Y+c9qD8Y+O=vYV0VNxif4tugC9UE-mTVUOuBw@mail.gmail.com>
Message-ID: <fb50835a-0dca-4677-8fca-920d3de3b5b1@email.android.com>

About time for you to adjust your expectations... looks right to me from both a mathematical sense and as the functions are designed.
---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                      Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
--------------------------------------------------------------------------- 
Sent from my phone. Please excuse my brevity.

On June 1, 2014 11:57:42 PM PDT, "Raphael P?bst" <raphael.paebst at gmail.com> wrote:
>Hello everyone, I have a question which is probably rooted in my lack
>of understanding when it comes to math.
>
>I just did the following:
>
>v <- c(1:20)
>w <- c(11:30)
>setdiff(v, w)
>
>and got:
>1 2 3 4 5 6 7 8 9 10
>
>Then I did the following:
>setdiff(w, v)
>and got, not surprisingly:
>21 22 23 24 25 26 27 28 29 30
>
>Now I was originally expecting to get bot with the first call of
>setdiff(v, w) and couldn't find any reason not to expect this from
>?setdiff()
>
>Am I missing somethin vital here or does setdiff() always give me the
>elements of the first set that are not in the second one and not those
>which are exclusive to either one, just dropping the ones in the
>intersection of both sets?
>
>Many Thanks in advance
>
>Raphael
>
>______________________________________________
>R-help at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From kridox at ymail.com  Mon Jun  2 09:41:05 2014
From: kridox at ymail.com (Pascal Oettli)
Date: Mon, 2 Jun 2014 16:41:05 +0900
Subject: [R] Question about setdiff()
In-Reply-To: <CADuMfoG=MOLF7Y+c9qD8Y+O=vYV0VNxif4tugC9UE-mTVUOuBw@mail.gmail.com>
References: <CADuMfoG=MOLF7Y+c9qD8Y+O=vYV0VNxif4tugC9UE-mTVUOuBw@mail.gmail.com>
Message-ID: <CAAcyNCwgZ-JeY_+Sx1pp5pURzdw7PeTRnbFKv-NaVnsOwQQ9CA@mail.gmail.com>

Hello,

>From the help page: "Performs *set* union, intersection, (asymmetric!)
difference, equality and membership on two vectors."

Hope this helps,
Pascal


On Mon, Jun 2, 2014 at 3:57 PM, Raphael P?bst <raphael.paebst at gmail.com> wrote:
> Hello everyone, I have a question which is probably rooted in my lack
> of understanding when it comes to math.
>
> I just did the following:
>
> v <- c(1:20)
> w <- c(11:30)
> setdiff(v, w)
>
> and got:
> 1 2 3 4 5 6 7 8 9 10
>
> Then I did the following:
> setdiff(w, v)
> and got, not surprisingly:
> 21 22 23 24 25 26 27 28 29 30
>
> Now I was originally expecting to get bot with the first call of
> setdiff(v, w) and couldn't find any reason not to expect this from
> ?setdiff()
>
> Am I missing somethin vital here or does setdiff() always give me the
> elements of the first set that are not in the second one and not those
> which are exclusive to either one, just dropping the ones in the
> intersection of both sets?
>
> Many Thanks in advance
>
> Raphael
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Pascal Oettli
Project Scientist
JAMSTEC
Yokohama, Japan


From smartpink111 at yahoo.com  Mon Jun  2 10:02:36 2014
From: smartpink111 at yahoo.com (arun)
Date: Mon, 2 Jun 2014 01:02:36 -0700 (PDT)
Subject: [R] Conditional mean for groups, new variables
In-Reply-To: <1401669473.77596.YahooMailNeo@web142605.mail.bf1.yahoo.com>
References: <1401669473.77596.YahooMailNeo@web142605.mail.bf1.yahoo.com>
Message-ID: <1401696156.16575.YahooMailNeo@web142603.mail.bf1.yahoo.com>



Hi,
Regarding your first comment, you didn't provide any reproducible example. So I created one with SCHOOLID's as alphabets.? According to your original post, you had a read dataset with 36000 SCHOOLIDs.? Suppose, if I created the SCHOOLIDs using:
?length(outer(LETTERS,1:2000,paste,sep=""))
#[1] 52000

#Please note that I am creating only 6 columns as an example
set.seed(42)
rev1 <- data.frame(SCHOOLID = sample(outer(LETTERS,1:1000,paste,sep=""),36e3, replace=TRUE), matrix(sample(180, 36e3*5,replace=TRUE), ncol=5, dimnames=list(NULL, c("MATH", "AGE", "STO2Q01", "BFMJ", "BMMJ"))),stringsAsFactors=FALSE)? ? ? 
?dim(rev1)
#[1] 36000???? 6


res1 <- aggregate(rev1[,-1], list(SCHOOLID=rev1[,1]), mean,na.rm=TRUE)
?dim(res1)
#[1] 26010???? 6
?head(res1,2)
# SCHOOLID? MATH AGE STO2Q01 BFMJ BMMJ
#1?????? A1 107.5? 30??? 41.5?? 75? 149
#2???? A100 159.5 132?? 107.0?? 66?? 15
colMeans(rev1[rev1$SCHOOLID=="A1",-1])
#?? MATH???? AGE STO2Q01??? BFMJ??? BMMJ 
#? 107.5??? 30.0??? 41.5??? 75.0?? 149.0 


#I am not following the second statement.? Please provide a reproducible example using ?dput().
May be you want results in this form:

rev2 <- data.frame(SCHOOLID=rev1[,1], sapply(rev1[-1],function(x) ave(x, rev1[,1], FUN= mean, na.rm=TRUE)))

A.K.


I'm sorry, but it does not :(
It gives results maximum only for first 26 schools (according to the number of letters in the alphabet). And according to the result it counts not an avreage values of the factors. 


On Sunday, June 1, 2014 8:37 PM, arun <smartpink111 at yahoo.com> wrote:
Hi,
May be this helps:


set.seed(42)
rev1 <- data.frame(SCHOOLID=sample(LETTERS[1:4],20,replace=TRUE), matrix(sample(25, 20*5,replace=TRUE), ncol=5, dimnames=list(NULL, c("MATH", "AGE", "STO2Q01", "BFMJ", "BMMJ"))),stringsAsFactors=FALSE)? 
res1 <- aggregate(rev1[,-1], list(SCHOOLID=rev1[,1]), mean,na.rm=TRUE)
res1
#if you need to change the names
res2 <- setNames(aggregate(rev1[,-1], list(SCHOOLID=rev1[,1]), mean,na.rm=TRUE), c("SCHOOLID", paste(colnames(rev1)[-1], "MEAN",sep="_")))
res2

A.K.


Hello! I have a problem, I want to calculate conditional mean for my dataset. First, I attach it:
rev<-read.csv("MATH1.csv", header=T, sep=";", dec=",")
attach(rev)
I have 650000 observations (test score) and 36000 groups (schoolid)
I need to calculate the mean for every group (schoolid) for the all my variables (MATH, AGE, ST02Q01,BFMJ,BMMJ. Actually, I have 34 varables, I just don't want to list them here)? and then to create new variables for obtained new columns, because I want to estimate a new regression for the new obtained average values.
The following method is not appropriate for me, because it gives me in result a table with schoolid and the average for one variables, and I don't know how to extract the MATH coulmn with average values from the table with results to the worklist separately(environment).
aggregate( MATH~SCHOOLID, rev, mean)
How can I solve this problem? Thank for help!


From raphael.paebst at gmail.com  Mon Jun  2 10:28:41 2014
From: raphael.paebst at gmail.com (=?ISO-8859-1?Q?Raphael_P=E4bst?=)
Date: Mon, 2 Jun 2014 10:28:41 +0200
Subject: [R] Question about setdiff()
In-Reply-To: <CAAcyNCwgZ-JeY_+Sx1pp5pURzdw7PeTRnbFKv-NaVnsOwQQ9CA@mail.gmail.com>
References: <CADuMfoG=MOLF7Y+c9qD8Y+O=vYV0VNxif4tugC9UE-mTVUOuBw@mail.gmail.com>
	<CAAcyNCwgZ-JeY_+Sx1pp5pURzdw7PeTRnbFKv-NaVnsOwQQ9CA@mail.gmail.com>
Message-ID: <CADuMfoHKe_B=4HOgCz+erC6cmVyLLUuGorgvBjCLxk+c_v8S+w@mail.gmail.com>

Thanks everyone!
It is just as I expected, I just didn't understand how setdiff() works.

Raphael

On 6/2/14, Pascal Oettli <kridox at ymail.com> wrote:
> Hello,
>
> From the help page: "Performs *set* union, intersection, (asymmetric!)
> difference, equality and membership on two vectors."
>
> Hope this helps,
> Pascal
>
>
> On Mon, Jun 2, 2014 at 3:57 PM, Raphael P?bst <raphael.paebst at gmail.com>
> wrote:
>> Hello everyone, I have a question which is probably rooted in my lack
>> of understanding when it comes to math.
>>
>> I just did the following:
>>
>> v <- c(1:20)
>> w <- c(11:30)
>> setdiff(v, w)
>>
>> and got:
>> 1 2 3 4 5 6 7 8 9 10
>>
>> Then I did the following:
>> setdiff(w, v)
>> and got, not surprisingly:
>> 21 22 23 24 25 26 27 28 29 30
>>
>> Now I was originally expecting to get bot with the first call of
>> setdiff(v, w) and couldn't find any reason not to expect this from
>> ?setdiff()
>>
>> Am I missing somethin vital here or does setdiff() always give me the
>> elements of the first set that are not in the second one and not those
>> which are exclusive to either one, just dropping the ones in the
>> intersection of both sets?
>>
>> Many Thanks in advance
>>
>> Raphael
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>
>
> --
> Pascal Oettli
> Project Scientist
> JAMSTEC
> Yokohama, Japan
>


From jeroen.ooms at stat.ucla.edu  Mon Jun  2 06:31:07 2014
From: jeroen.ooms at stat.ucla.edu (Jeroen Ooms)
Date: Sun, 1 Jun 2014 21:31:07 -0700
Subject: [R] Updates from the useR! 2014 organizing committee
Message-ID: <CABFfbXsw5X7=Zsw_awy3XWYYtQ1-rc2qC+H9Bws+A0NGcwoMJg@mail.gmail.com>

Hi all,

We are exactly one month away from the useR! 2014 conference [1]. Time
for an update from the organizing committee.

This weekend, registrations passed the 500 mark, which is a new record
for useR! according to data collected by Gergely Dar?czi [2]. Yet,
there is plenty of additional capacity, both for the conference
itself, as well as the beautiful on-campus housing at UCLA. We hope to
see many more registrations over the upcoming weeks and appreciate all
help in spreading the word to friends and colleagues that (should) use
R, but might not be actively following the blogs or mailing lists.

To those who are unsure whether to attend, we want to emphasize that
useR! is not just for seasoned professionals, but has lots to offer to
any R user. Abstracts and (free) tutorials cover a great diversity of
topics in both research and industry applications, ranging from
introductory to very advanced. The conference provides a great
opportunity to learn and mingle with the community, and is interesting
for beginner as well as experienced R users.

Tutorials this year are included with the conference ticket and no
separate registration is required. All registrants will receive an
email survey asking which tutorial they would like to attend, if any.
This information will be used for scheduling purposes and to
facilitate communication between presenters and participants (e.g.
distribution of preparation material).

Finally, we urge international guests to verify that their visa or
visa-waiver documents are valid to enter the United States. Citizens
from visa-waiver countries [3] that do not already have a US visa,
must apply online for an ESTA travel authorization at least 72 hours
prior to departure. Once approved, the ESTA is generally valid for a
period of 2 years, so now would be a good time to complete this
process.

We look forward to seeing all of you in California! Please keep an eye
on the conference website, which is continuously updated with most
recent news and information as it becomes available.

Best,

Jeroen, on behalf of the organizing committee


[1] http://user2014.stat.ucla.edu/
[2] http://rapporter.net/custom/R-activity/data/Rstats.csv
[3] http://www.esta.us/visa_waiver_countries.html

_______________________________________________
R-announce at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-announce

From clivelists at googlemail.com  Mon Jun  2 13:22:11 2014
From: clivelists at googlemail.com (Clive Nicholas)
Date: Mon, 2 Jun 2014 12:22:11 +0100
Subject: [R] Plotting issues with -par(mfrow=c(r,c))- after -boot-
In-Reply-To: <f7f4e8ef-9aeb-4b8a-8d82-76c08e0985fa@email.android.com>
References: <CAHs5aTgoYRvLKCm0yU=B=Ed2qVEtdLUt_EGepLBS5gy45b9JSQ@mail.gmail.com>
	<f7f4e8ef-9aeb-4b8a-8d82-76c08e0985fa@email.android.com>
Message-ID: <CAHs5aTjCVMcOj=Gnik-0UBhH=jAMFxQ_jCv9f_xcgRBBX_f+8g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140602/28a6e586/attachment.pl>

From clivelists at googlemail.com  Mon Jun  2 13:33:14 2014
From: clivelists at googlemail.com (Clive Nicholas)
Date: Mon, 2 Jun 2014 12:33:14 +0100
Subject: [R] Plotting issues with -par(mfrow=c(r,c))- after -boot-
In-Reply-To: <f7f4e8ef-9aeb-4b8a-8d82-76c08e0985fa@email.android.com>
References: <CAHs5aTgoYRvLKCm0yU=B=Ed2qVEtdLUt_EGepLBS5gy45b9JSQ@mail.gmail.com>
	<f7f4e8ef-9aeb-4b8a-8d82-76c08e0985fa@email.android.com>
Message-ID: <CAHs5aTgjzPsHNQMT5ZQzDUEP3F0yc06HBD0uUTg6ERg7z86Opg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140602/58e5c716/attachment.pl>

From therneau at mayo.edu  Mon Jun  2 15:59:46 2014
From: therneau at mayo.edu (Therneau, Terry M., Ph.D.)
Date: Mon, 02 Jun 2014 08:59:46 -0500
Subject: [R] Smoothed HR for interaction term in coxph model
In-Reply-To: <mailman.29.1401444010.25333.r-help@r-project.org>
References: <mailman.29.1401444010.25333.r-help@r-project.org>
Message-ID: <d46aec$h4ulus@ironport9.mayo.edu>



On 05/30/2014 05:00 AM, r-help-request at r-project.org wrote:
>
>
> I have a dataset with 2 treatments and want to assess the effect of a
> continous covariate on the Hazard ratio between treatment A and B.  I want a
> smoothed interaction term which I have modelled below with the following
> code:
>
>
>
> surv.fit <- coxph(my.surv ~ pspline(CONTINUOUS, df=0) + factor(DICHOTOMOUS)
> +  pspline(CONTINUOUS, df=0)*factor(DICHOTOMOUS), data = datanew2)
>
>
>
> and consequently I would like to obtain a smoothed plot of the hazard ratio
> between treatment A and B on the y-axis with the continuous covariate on the
> x-axis.  As termplot ignores interaction terms, I was wondering if anyone
> has seen anything like this before and can advise on the best way to do it.
>
>

You have 2 problems.
  1. The pspline code's maximization routine simply can't cope with two terms that both 
have "df=0", i.e., asking it to find the best degrees of freedom.  You have to choose df 
yourself.  (Making the code smarter has been on my TODO list for years, and will likely 
remain there a while longer.)

  2. What you want to do is harder than you think.  For definiteness assume that we have 
CONTINUOUS= age and DICHO= sex.  Then one wants a smooth curve of risk vs age for the 
males, and a separate one for the females.
For a smoothing spline, that means two penalties, one attached to each term.
    People get sloppy about the term "interaction".  For two categorical variables what 
needs to be done is clear, namely to have one coefficient for each unique combination. 
Software will add the batch of coefficients for us automatically when a "*" is placed in 
the formula.  For continuous variables the use of "*" in a formula adds the product of the 
two terms, which is not an interaction except in very special circumstances.

   Between the two of these, an interaction times a pspline term is doomed to fail. 
(Another update for the package -- I need to print an error message in this case).

  Products of coefficients will work for ns() terms and an interaction.

Terry T.


From joseleopoldo1792 at gmail.com  Mon Jun  2 08:50:59 2014
From: joseleopoldo1792 at gmail.com (Igor Sosa Mayor)
Date: Mon, 2 Jun 2014 08:50:59 +0200
Subject: [R] Cargar csv 16 GB en R
References: <1401647385.33904.YahooMailNeo@web171406.mail.ir2.yahoo.com>
Message-ID: <87ha433iuk.fsf@gmail.com>

laura tom? <tomelaurita at yahoo.es> writes:

> Hola,
>
> Estoy todav?a dando mis primeros pasos en R y una de las cosas que
> tengo que hacer es trabajar con un csv de 16 GB. Consta de 10
> columnas, 7 n?mericas

escribe a la lista en espa?ol, que est? aqu?: 
https://stat.ethz.ch/mailman/listinfo/r-help-es


From smartpink111 at yahoo.com  Mon Jun  2 09:32:24 2014
From: smartpink111 at yahoo.com (arun)
Date: Mon, 2 Jun 2014 00:32:24 -0700 (PDT)
Subject: [R] Question about setdiff()
In-Reply-To: <CADuMfoG=MOLF7Y+c9qD8Y+O=vYV0VNxif4tugC9UE-mTVUOuBw@mail.gmail.com>
References: <CADuMfoG=MOLF7Y+c9qD8Y+O=vYV0VNxif4tugC9UE-mTVUOuBw@mail.gmail.com>
Message-ID: <1401694344.78296.YahooMailNeo@web142604.mail.bf1.yahoo.com>

Hi,
Please check this link:
http://r.789695.n4.nabble.com/meaning-of-asymmetric-on-help-page-for-intersect-td877408.html

union(setdiff(v,w), setdiff(w,v))


#or in this case

setdiff(union(v,w),intersect(v,w))
#or
?setdiff(c(v,w),c(v,w)[duplicated(c(v,w))])
A.K.


.paebst at gmail.com> wrote:

Hello everyone, I have a question which is probably rooted in my lack
of understanding when it comes to math.

I just did the following:

v <- c(1:20)
w <- c(11:30)
setdiff(v, w)

and got:
1 2 3 4 5 6 7 8 9 10

Then I did the following:
setdiff(w, v)
and got, not surprisingly:
21 22 23 24 25 26 27 28 29 30

Now I was originally expecting to get bot with the first call of
setdiff(v, w) and couldn't find any reason not to expect this from
?setdiff()

Am I missing somethin vital here or does setdiff() always give me the
elements of the first set that are not in the second one and not those
which are exclusive to either one, just dropping the ones in the
intersection of both sets?

Many Thanks in advance

Raphael

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From aurore.desgroux at rennes.inra.fr  Mon Jun  2 14:00:12 2014
From: aurore.desgroux at rennes.inra.fr (adesgroux)
Date: Mon, 2 Jun 2014 05:00:12 -0700 (PDT)
Subject: [R] Error clmm(){ordinal}
Message-ID: <1401710397402-4691592.post@n4.nabble.com>

Dear all,

I am trying to run the function clmm() on a data table composed as following
:
<http://r.789695.n4.nabble.com/file/n4691592/datatable.png> 

I have 187 pea lines assessed on 4 years * 2 locations * 3 blocs * 15
plantes for disease resistance. Disease resistance is assessed with a 0-to-5
scale which made an ordinal variable.
Here is the script a wrote :

>Tab.INRCh=read.csv("INRChamp201013.csv",sep=";")
>Tab.INRCh$Year=as.factor(Tab.INRCh$Year)
>Tab.INRCh$RRI<-factor(Tab.INRCh$RRI,levels=c("5","4","3","2","1","0"),ordered=TRUE)
>Tab.INRCh$RRI_DHW1<-factor(Tab.INRCh$RRI_DHW1,levels=c("5","4","3","2","1","0"),ordered=TRUE)
>Tab.INRCh$RRI_DHW2<-factor(Tab.INRCh$RRI_DHW2,levels=c("5","4","3","2","1","0"),ordered=TRUE)

>Modele=clmm(RRI~Line+RRI_DHW1+RRI_DHW2+(1|Year)+(1|Location)+(1|Not)+(1|Bloc)+(1|Plante),data=Tab.INRCh,na.action=na.omit)

I want to create this modele to run function Anova() to know if disease
resistance is different among lines.

When I run the script, I have an error : 
Erreur : all(sapply(gfl, nlevels) > 2) is not TRUE
I can't find anything about it on the internet...
Can someone help me on this?

Thanks
Best regards
Aurore



--
View this message in context: http://r.789695.n4.nabble.com/Error-clmm-ordinal-tp4691592.html
Sent from the R help mailing list archive at Nabble.com.


From rune.haubo at gmail.com  Mon Jun  2 18:55:00 2014
From: rune.haubo at gmail.com (Rune Haubo)
Date: Mon, 2 Jun 2014 18:55:00 +0200
Subject: [R] Error clmm(){ordinal}
In-Reply-To: <1401710397402-4691592.post@n4.nabble.com>
References: <1401710397402-4691592.post@n4.nabble.com>
Message-ID: <CAG_uk92nmV77NJcZupkE1yG=O=WPwd=HLpXdoQDqvqwd97-i1Q@mail.gmail.com>

It's telling you that one or more of the grouping factors for the
random-effect terms has less than three levels. From what you write,
this seems to apply to Location: you may want to treat it as a
fixed-effect instead.

Hope this helps,
Rune

On 2 June 2014 14:00, adesgroux <aurore.desgroux at rennes.inra.fr> wrote:
> Dear all,
>
> I am trying to run the function clmm() on a data table composed as following
> :
> <http://r.789695.n4.nabble.com/file/n4691592/datatable.png>
>
> I have 187 pea lines assessed on 4 years * 2 locations * 3 blocs * 15
> plantes for disease resistance. Disease resistance is assessed with a 0-to-5
> scale which made an ordinal variable.
> Here is the script a wrote :
>
>>Tab.INRCh=read.csv("INRChamp201013.csv",sep=";")
>>Tab.INRCh$Year=as.factor(Tab.INRCh$Year)
>>Tab.INRCh$RRI<-factor(Tab.INRCh$RRI,levels=c("5","4","3","2","1","0"),ordered=TRUE)
>>Tab.INRCh$RRI_DHW1<-factor(Tab.INRCh$RRI_DHW1,levels=c("5","4","3","2","1","0"),ordered=TRUE)
>>Tab.INRCh$RRI_DHW2<-factor(Tab.INRCh$RRI_DHW2,levels=c("5","4","3","2","1","0"),ordered=TRUE)
>
>>Modele=clmm(RRI~Line+RRI_DHW1+RRI_DHW2+(1|Year)+(1|Location)+(1|Not)+(1|Bloc)+(1|Plante),data=Tab.INRCh,na.action=na.omit)
>
> I want to create this modele to run function Anova() to know if disease
> resistance is different among lines.
>
> When I run the script, I have an error :
> Erreur : all(sapply(gfl, nlevels) > 2) is not TRUE
> I can't find anything about it on the internet...
> Can someone help me on this?
>
> Thanks
> Best regards
> Aurore
>
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/Error-clmm-ordinal-tp4691592.html
> Sent from the R help mailing list archive at Nabble.com.
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From valuetrain at gmail.com  Mon Jun  2 18:55:00 2014
From: valuetrain at gmail.com (Bill Bentley)
Date: Mon, 2 Jun 2014 10:55:00 -0600
Subject: [R] Problem with rbind.fill
In-Reply-To: <CAKL8G3GjWwO+09Ypi+RMB-ZmQBOhy-eqTUJ6q0QNzs3x_6UT7Q@mail.gmail.com>
References: <001b01cf7dc1$ea6a7840$bf3f68c0$@gmail.com>
	<CAKL8G3GjWwO+09Ypi+RMB-ZmQBOhy-eqTUJ6q0QNzs3x_6UT7Q@mail.gmail.com>
Message-ID: <003301cf7e83$66ee69f0$34cb3dd0$@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140602/05cb4404/attachment.pl>

From schmtzway at yahoo.com  Mon Jun  2 17:06:33 2014
From: schmtzway at yahoo.com (wayne schlemitz)
Date: Mon, 2 Jun 2014 08:06:33 -0700 (PDT)
Subject: [R] Time Series
In-Reply-To: <539BF98A871.0000089Cjrkrideau@inbox.com>
References: <1400857351.79463.YahooMailNeo@web140906.mail.bf1.yahoo.com>
	<539BF98A871.0000089Cjrkrideau@inbox.com>
Message-ID: <1401721593.81982.YahooMailNeo@web120905.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140602/ba9c55af/attachment.pl>

From d.stoffers at gmail.com  Mon Jun  2 17:15:56 2014
From: d.stoffers at gmail.com (Diederick Stoffers)
Date: Mon, 2 Jun 2014 17:15:56 +0200
Subject: [R] testing and comparing transformations to get a gaussian
	distribution
Message-ID: <1EF09A03-CA0D-45DE-BA94-B377366D09D7@gmail.com>

Hi guys,

I distinctly remember having used an R toolbox that compared different transformation with regard to normality stats in the past, can?t find anything on google. Does anybody have a clue?

Thanks,

Diederick

From alexiscbillings at gmail.com  Mon Jun  2 20:12:15 2014
From: alexiscbillings at gmail.com (Alexis Billings)
Date: Mon, 2 Jun 2014 12:12:15 -0600
Subject: [R] Bootstrapping Tukey Kramer:
Message-ID: <CAPRPc08ivvWHNs2DqSKU=NB-Q1_AxtN-2XzB5RTMKixohAG6tQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140602/33677022/attachment.pl>

From 538280 at gmail.com  Mon Jun  2 20:55:10 2014
From: 538280 at gmail.com (Greg Snow)
Date: Mon, 2 Jun 2014 12:55:10 -0600
Subject: [R] testing and comparing transformations to get a gaussian
	distribution
In-Reply-To: <1EF09A03-CA0D-45DE-BA94-B377366D09D7@gmail.com>
References: <1EF09A03-CA0D-45DE-BA94-B377366D09D7@gmail.com>
Message-ID: <CAFEqCdwS4tiLSjMKLk6HcTVm46EMvT0YfupUXvM4-Fk7gQSLuQ@mail.gmail.com>

There is the boxcox function in the MASS package that will look at the
Box Cox family of transformations.

On Mon, Jun 2, 2014 at 9:15 AM, Diederick Stoffers <d.stoffers at gmail.com> wrote:
> Hi guys,
>
> I distinctly remember having used an R toolbox that compared different transformation with regard to normality stats in the past, can?t find anything on google. Does anybody have a clue?
>
> Thanks,
>
> Diederick
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com


From kw.stat at gmail.com  Mon Jun  2 22:33:28 2014
From: kw.stat at gmail.com (Kevin Wright)
Date: Mon, 2 Jun 2014 15:33:28 -0500
Subject: [R] Skipping .Rd files and using Org-mode instead?
In-Reply-To: <87d2etr3aq.fsf@gmail.com>
References: <87tx86q72i.fsf@gmail.com> <538A52D3.8000904@auckland.ac.nz>
	<87d2etr3aq.fsf@gmail.com>
Message-ID: <CAKFxdiRBEmVRSNkWVqfEWEdYcUCnf04F=j0sPG0y36AQFO8N5Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140602/bd7e9901/attachment.pl>

From npretnar at gmail.com  Mon Jun  2 21:56:20 2014
From: npretnar at gmail.com (Nick Pretnar)
Date: Mon, 2 Jun 2014 14:56:20 -0500
Subject: [R] HAC standard errors
Message-ID: <937ECB6B-6F35-4E27-AD77-6435BA57CA72@gmail.com>

Hello,

I am having a great amount of difficulty running a simple linear regression model with entity and time fixed effects and HAC standard errors. I have a data set with 3 million observations and 30 variables. My data is structured as follows:

NAME	STATE	YEAR	Y	X1	X2
1		1		2012	1	1	1
2		1		2012	1	2	7
3		1		2012	1	1	2	
4		2		2012	2	4	5	

etc. ... For every state in every year, there are about 10,000 row vectors corresponding to individual observations. This is not a longitudinal dataset: an individual surveyed in year 2000 in state 1 is never spoken to again. Nonetheless, I still wish to control for geographical and time fixed effects. To do so, I run the following:
	
> load("data.frame.rda")
> library(sandwich)
> library(pcse)
> model <- lm(data.frame$Y ~ data.frame$X1 + data.frame$X2 + as.factor(data.frame$state) + as.factor(data.frame$year))
> vcovHAC(model, prewhite = FALSE, adjust = FALSE, sandwich = TRUE, ar.method = "ols")

R will not return any results, yet acts as if it is computing the results. This goes on for 4 hours or more. 

I wanted to run the following:

> library(pcse)
> model <- lm(data.frame$Y ~ data.frame$X1 + data.frame$X2 + as.factor(data.frame$state) + as.factor(data.frame$year))
> model.pcse <- pcse(model, groupN = data.frame$state, groupT = data.frame$year)

But I get the error:
> Error in pcse(model, groupN = BRFSS_OBESEBALANCED$X_STATE, groupT = BRFSS_OBESEBALANCED$YEAR) : 
  There cannot be more than nCS*nTS rows in the using data!

If there are any workarounds for this problem, I would greatly appreciate learning about them. 

Thanks,

Nicholas Pretnar
University of Missouri, Economics
npretnar at gmail.com


From sjkiss at gmail.com  Mon Jun  2 22:49:08 2014
From: sjkiss at gmail.com (Simon Kiss)
Date: Mon, 2 Jun 2014 16:49:08 -0400
Subject: [R] Help with polychoric correlation in psych library
Message-ID: <D7D6DEFC-62E3-4526-8BD2-67736F87202C@gmail.com>

Hello I have a data.frame of 32 variables, all are ordered factors. str(dat) returns the following
'data.frame':	32 obs. of  43 variables:
 $ q1a: Ord.factor w/ 6 levels "Strongly Disagree"<..: 3 4 2 5 NA NA 5 5 3 5 ...
 $ q1b: Ord.factor w/ 6 levels "Strongly Disagree"<..: 3 NA 4 NA NA NA NA 5 4 4 ...
 $ q1c: Ord.factor w/ 6 levels "Strongly Disagree"<..: NA NA 5 5 NA 4 NA 5 NA 5 ...
 $ q1d: Ord.factor w/ 6 levels "Strongly Disagree"<..: 5 NA 5 NA NA 5 NA 5 NA 4 ...
 $ q1e: Ord.factor w/ 6 levels "Strongly Disagree"<..: 5 NA NA 5 5 NA NA 5 5 NA ...
 $ q1f: Ord.factor w/ 6 levels "Strongly Disagree"<..: 4 5 5 5 5 5 5 4 5 5 ...

I'm trying to come up with a polychoric correlation matrix for these, and so I convert them to numeric values:
'data.frame':	32 obs. of  43 variables:
 $ q1a: num  3 4 2 5 NA NA 5 5 3 5 ...
 $ q1b: num  3 NA 4 NA NA NA NA 5 4 4 ...
 $ q1c: num  NA NA 5 5 NA 4 NA 5 NA 5 ...
 $ q1d: num  5 NA 5 NA NA 5 NA 5 NA 4 ...

and try: 
library(psych)
polychoric(values, na.rm=TRUE), but this returns the following error


The items do not have an equal number of response alternatives, global set to FALSE
Error in poly[1, ] : incorrect number of dimensions
In addition: Warning message:
In mclapply(seq_len(n), do_one, mc.preschedule = mc.preschedule,  :
  all scheduled cores encountered errors in user code

Can anyone provide any guidance?
Thanks, Simon Kiss

*********************************
Simon J. Kiss, PhD
Assistant Professor, Wilfrid Laurier University
73 George Street
Brantford, Ontario, Canada
N3T 2C9
Cell: +1 905 746 7606


From ccberry at ucsd.edu  Mon Jun  2 23:49:40 2014
From: ccberry at ucsd.edu (Charles Berry)
Date: Mon, 2 Jun 2014 21:49:40 +0000
Subject: [R] Skipping .Rd files and using Org-mode instead?
References: <87tx86q72i.fsf@gmail.com> <538A52D3.8000904@auckland.ac.nz>
	<87d2etr3aq.fsf@gmail.com>
	<CAKFxdiRBEmVRSNkWVqfEWEdYcUCnf04F=j0sPG0y36AQFO8N5Q@mail.gmail.com>
Message-ID: <loom.20140602T231114-668@post.gmane.org>

Kevin Wright <kw.stat <at> gmail.com> writes:

> 
> Have you tried the roxygen2 package?
> 

I have.

org-mode + roxygen2 + inline is what was used to make this package:

http://www.bioconductor.org/packages/release/bioc/html/geneRxCluster.html

Everything from the DESCRIPTION file to the C-code to the vignette reside 
in a single org-mode file. Tangling and running a few src-blocks to 
roxygenize() (the documentation and other directives) and to create the
.Call() wrappers (for the C-code) creates the package. 

(I exported the vignette using org-ravel --- that's another story.)

---

And if it isn't obvious from what Kevin said, something like this:

#+BEGIN_SRC R :tangle foo.R :dir <path-to-package-R-dir>
  ##' foo, but not bar
  ##'
  ##' execute the identity op
  ##' @title foo
  ##' @param x any variable
  ##' @return the input value unaltered
  ##' @author Mee Myself Andaye
  foo <-
      function(x) x
#+END_SRC


will serve as a start. `M-x ess-roxy-update-entry' will generate a 
template for all the comment lines, which roxygen2 uses to create Rd and 
other package components.

When in a src-edit buffer, ESS has a bunch of ess-roxy-* functions, like 
ess-roxy-update-entry to generate the template, and ess-roxy-preview-* to 
see how things render. Pulldown the ESS-Roxygen menu to see some good 
choices.

HTH,

Chuck


From lists at revelle.net  Tue Jun  3 02:29:54 2014
From: lists at revelle.net (William Revelle)
Date: Mon, 2 Jun 2014 19:29:54 -0500
Subject: [R] Help with polychoric correlation in psych library
In-Reply-To: <D7D6DEFC-62E3-4526-8BD2-67736F87202C@gmail.com>
References: <D7D6DEFC-62E3-4526-8BD2-67736F87202C@gmail.com>
Message-ID: <F245F020-9342-4CF0-B99C-7EEABDD18642@revelle.net>

Simon,
As is usually the case with problems with a package, if you write the author/maintainer, you are more likely to get an answer.

In this case, I just happened to be readiing R-help (t is the end of the term and I am relaxing).

I am happy to look at this if you would send me the data set.

What version of the psych package are you using?



Bill

On Jun 2, 2014, at 3:49 PM, Simon Kiss <sjkiss at gmail.com> wrote:

> Hello I have a data.frame of 32 variables, all are ordered factors. str(dat) returns the following
> 'data.frame':	32 obs. of  43 variables:
> $ q1a: Ord.factor w/ 6 levels "Strongly Disagree"<..: 3 4 2 5 NA NA 5 5 3 5 ...
> $ q1b: Ord.factor w/ 6 levels "Strongly Disagree"<..: 3 NA 4 NA NA NA NA 5 4 4 ...
> $ q1c: Ord.factor w/ 6 levels "Strongly Disagree"<..: NA NA 5 5 NA 4 NA 5 NA 5 ...
> $ q1d: Ord.factor w/ 6 levels "Strongly Disagree"<..: 5 NA 5 NA NA 5 NA 5 NA 4 ...
> $ q1e: Ord.factor w/ 6 levels "Strongly Disagree"<..: 5 NA NA 5 5 NA NA 5 5 NA ...
> $ q1f: Ord.factor w/ 6 levels "Strongly Disagree"<..: 4 5 5 5 5 5 5 4 5 5 ...
> 
> I'm trying to come up with a polychoric correlation matrix for these, and so I convert them to numeric values:
> 'data.frame':	32 obs. of  43 variables:
> $ q1a: num  3 4 2 5 NA NA 5 5 3 5 ...
> $ q1b: num  3 NA 4 NA NA NA NA 5 4 4 ...
> $ q1c: num  NA NA 5 5 NA 4 NA 5 NA 5 ...
> $ q1d: num  5 NA 5 NA NA 5 NA 5 NA 4 ...
> 
> and try: 
> library(psych)
> polychoric(values, na.rm=TRUE), but this returns the following error
> 
> 
> The items do not have an equal number of response alternatives, global set to FALSE
> Error in poly[1, ] : incorrect number of dimensions
> In addition: Warning message:
> In mclapply(seq_len(n), do_one, mc.preschedule = mc.preschedule,  :
>  all scheduled cores encountered errors in user code
> 
> Can anyone provide any guidance?
> Thanks, Simon Kiss
> 
> *********************************
> Simon J. Kiss, PhD
> Assistant Professor, Wilfrid Laurier University
> 73 George Street
> Brantford, Ontario, Canada
> N3T 2C9
> Cell: +1 905 746 7606
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

William Revelle		           http://personality-project.org/revelle.html
Professor			           http://personality-project.org
Department of Psychology   http://www.wcas.northwestern.edu/psych/
Northwestern University	   http://www.northwestern.edu/
Use R for psychology             http://personality-project.org/r
It is 5 minutes to midnight	   http://www.thebulletin.org


From smartpink111 at yahoo.com  Tue Jun  3 03:45:25 2014
From: smartpink111 at yahoo.com (arun)
Date: Mon, 2 Jun 2014 18:45:25 -0700 (PDT)
Subject: [R] Conditional mean for groups, new variables
In-Reply-To: <1401696156.16575.YahooMailNeo@web142603.mail.bf1.yahoo.com>
References: <1401669473.77596.YahooMailNeo@web142605.mail.bf1.yahoo.com>
	<1401696156.16575.YahooMailNeo@web142603.mail.bf1.yahoo.com>
Message-ID: <1401759925.77056.YahooMailNeo@web142602.mail.bf1.yahoo.com>

Hi,
If you want to extract only particular variables, check ?subset, ?Extract.
Using my first example:
aggregate(MATH~SCHOOLID,rev1, mean)[,-1,drop=FALSE]
#????? MATH
#1 14.50000
#2 17.20000
#3 13.71429
#4 13.83333
# more than one variable
res1 <- 

aggregate(rev1[,-1], list(SCHOOLID=rev1[,1]), mean,na.rm=TRUE) ##Column1 is "SCHOOLID"
res1New <- res1[,-1] 
res1New
#????? MATH????? AGE?? STO2Q01????? BFMJ???? BMMJ
#1 14.50000 10.50000 15.500000? 8.000000 14.00000
#2 17.20000? 7.60000 10.200000 18.600000 12.80000
#3 13.71429 17.28571? 9.142857? 9.857143 17.85714
#4 13.83333 15.33333 13.666667 11.666667 11.00000
#or
?res1[!grepl("SCHOOLID", colnames(res1))]
A.K.


I tried to explain all the things that I want to do in this picture :) Sorry, if it's not so understandable, but I tried :) 




On Monday, June 2, 2014 4:02 AM, arun <smartpink111 at yahoo.com> wrote:


Hi,
Regarding your first comment, you didn't provide any reproducible example. So I created one with SCHOOLID's as alphabets.? According to your original post, you had a read dataset with 36000 SCHOOLIDs.? Suppose, if I created the SCHOOLIDs using:
?length(outer(LETTERS,1:2000,paste,sep=""))
#[1] 52000

#Please note that I am creating only 6 columns as an example
set.seed(42)
rev1 <- data.frame(SCHOOLID = sample(outer(LETTERS,1:1000,paste,sep=""),36e3, replace=TRUE), matrix(sample(180, 36e3*5,replace=TRUE), ncol=5, dimnames=list(NULL, c("MATH", "AGE", "STO2Q01", "BFMJ", "BMMJ"))),stringsAsFactors=FALSE)? ? ? 
?dim(rev1)
#[1] 36000???? 6


res1 <- aggregate(rev1[,-1], list(SCHOOLID=rev1[,1]), mean,na.rm=TRUE)
?dim(res1)
#[1] 26010???? 6
?head(res1,2)
# SCHOOLID? MATH AGE STO2Q01 BFMJ BMMJ
#1?????? A1 107.5? 30??? 41.5?? 75? 149
#2???? A100 159.5 132?? 107.0?? 66?? 15
colMeans(rev1[rev1$SCHOOLID=="A1",-1])
#?? MATH???? AGE STO2Q01??? BFMJ??? BMMJ 
#? 107.5??? 30.0??? 41.5??? 75.0?? 149.0 


#I am not following the second statement.? Please provide a reproducible example using ?dput().
May be you want results in this form:

rev2 <- data.frame(SCHOOLID=rev1[,1], sapply(rev1[-1],function(x) ave(x, rev1[,1], FUN= mean, na.rm=TRUE)))

A.K.


I'm sorry, but it does not :(
It gives results maximum only for first 26 schools (according to the number of letters in the alphabet). And according to the result it counts not an avreage values of the factors. 





On Sunday, June 1, 2014 8:37 PM, arun <smartpink111 at yahoo.com> wrote:
Hi,
May be this helps:


set.seed(42)
rev1 <- data.frame(SCHOOLID=sample(LETTERS[1:4],20,replace=TRUE), matrix(sample(25, 20*5,replace=TRUE), ncol=5, dimnames=list(NULL, c("MATH", "AGE", "STO2Q01", "BFMJ", "BMMJ"))),stringsAsFactors=FALSE)? 
res1 <- aggregate(rev1[,-1], list(SCHOOLID=rev1[,1]), mean,na.rm=TRUE)
res1
#if you need to change the names
res2 <- setNames(aggregate(rev1[,-1], list(SCHOOLID=rev1[,1]), mean,na.rm=TRUE), c("SCHOOLID", paste(colnames(rev1)[-1], "MEAN",sep="_")))
res2

A.K.


Hello! I have a problem, I want to calculate conditional mean for my dataset. First, I attach it:
rev<-read.csv("MATH1.csv", header=T, sep=";", dec=",")
attach(rev)
I have 650000 observations (test score) and 36000 groups (schoolid)
I need to calculate the mean for every group (schoolid) for the all my variables (MATH, AGE, ST02Q01,BFMJ,BMMJ. Actually, I have 34 varables, I just don't want to list them here)? and then to create new variables for obtained new columns, because I want to estimate a new regression for the new obtained average values.
The following method is not appropriate for me, because it gives me in result a table with schoolid and the average for one variables, and I don't know how to extract the MATH coulmn with average values from the table with results to the worklist separately(environment).
aggregate( MATH~SCHOOLID, rev, mean)
How can I solve this problem? Thank for help!


From wolfgang.raffelsberger at gmail.com  Tue Jun  3 11:09:16 2014
From: wolfgang.raffelsberger at gmail.com (Wolfgang Raffelsberger)
Date: Tue, 3 Jun 2014 11:09:16 +0200
Subject: [R] ECCB 2014
Message-ID: <CALDESV9-BRnxJZ=Or8kEQOVxpsKwuR4Cd+741xor=+iPp_VPNw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140603/f58ef3ef/attachment.pl>

From Achim.Zeileis at uibk.ac.at  Tue Jun  3 11:27:41 2014
From: Achim.Zeileis at uibk.ac.at (Achim Zeileis)
Date: Tue, 3 Jun 2014 11:27:41 +0200 (CEST)
Subject: [R] HAC standard errors
In-Reply-To: <937ECB6B-6F35-4E27-AD77-6435BA57CA72@gmail.com>
References: <937ECB6B-6F35-4E27-AD77-6435BA57CA72@gmail.com>
Message-ID: <alpine.DEB.2.10.1406031123130.22076@paninaro.uibk.ac.at>

On Mon, 2 Jun 2014, Nick Pretnar wrote:

> Hello,
>
> I am having a great amount of difficulty running a simple linear regression model with entity and time fixed effects and HAC standard errors. I have a data set with 3 million observations and 30 variables. My data is structured as follows:
>
> NAME	STATE	YEAR	Y	X1	X2
> 1		1		2012	1	1	1
> 2		1		2012	1	2	7
> 3		1		2012	1	1	2
> 4		2		2012	2	4	5
>
> etc. ... For every state in every year, there are about 10,000 row 
> vectors corresponding to individual observations. This is not a 
> longitudinal dataset: an individual surveyed in year 2000 in state 1 is 
> never spoken to again. Nonetheless, I still wish to control for 
> geographical and time fixed effects. To do so, I run the following:

If you haven't got a longitudinal or time series data, then I wonder why 
you want to consider HAC standard errors (which explicitly try to adjust 
for autocorrelation). I guess that it would be more natural to simply use 
clustered standard errors, some of which are also robust against certain 
types of autocorrelation.

I would recommend that you use the "plm" package for your panel data. If 
you want to employ OLS estimation, you can use plm(..., model = "pooling") 
and adding certain id or time effects. And then plm has a number of vcov* 
functions for certain robust covariances: vcovBK, vcovHC, vcovSCC. See the 
corresponding manual pages for more details.

hth,
Z

>> load("data.frame.rda")
>> library(sandwich)
>> library(pcse)
>> model <- lm(data.frame$Y ~ data.frame$X1 + data.frame$X2 + as.factor(data.frame$state) + as.factor(data.frame$year))
>> vcovHAC(model, prewhite = FALSE, adjust = FALSE, sandwich = TRUE, ar.method = "ols")
>
> R will not return any results, yet acts as if it is computing the results. This goes on for 4 hours or more.
>
> I wanted to run the following:
>
>> library(pcse)
>> model <- lm(data.frame$Y ~ data.frame$X1 + data.frame$X2 + as.factor(data.frame$state) + as.factor(data.frame$year))
>> model.pcse <- pcse(model, groupN = data.frame$state, groupT = data.frame$year)
>
> But I get the error:
>> Error in pcse(model, groupN = BRFSS_OBESEBALANCED$X_STATE, groupT = BRFSS_OBESEBALANCED$YEAR) :
>  There cannot be more than nCS*nTS rows in the using data!
>
> If there are any workarounds for this problem, I would greatly appreciate learning about them.
>
> Thanks,
>
> Nicholas Pretnar
> University of Missouri, Economics
> npretnar at gmail.com
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From acos at dpi.inpe.br  Tue Jun  3 13:42:59 2014
From: acos at dpi.inpe.br (=?iso-8859-1?Q?Alexsandro_C=E2ndido_de_Oliveira_Silva?=)
Date: Tue, 3 Jun 2014 08:42:59 -0300
Subject: [R] Change the raster data extent
Message-ID: <003801cf7f20$f7f567d0$e7e03770$@dpi.inpe.br>

Um texto embutido e sem conjunto de caracteres especificado foi limpo...
Nome: n?o dispon?vel
Url: <https://stat.ethz.ch/pipermail/r-help/attachments/20140603/8d07e9d4/attachment.pl>

From smartpink111 at yahoo.com  Tue Jun  3 14:40:43 2014
From: smartpink111 at yahoo.com (arun)
Date: Tue, 3 Jun 2014 05:40:43 -0700 (PDT)
Subject: [R] Descriptive Stat
In-Reply-To: <1401315519.69340.YahooMailNeo@web141703.mail.bf1.yahoo.com>
References: <1401234202.76239.YahooMailNeo@web141703.mail.bf1.yahoo.com>
	<1401245216.73953.YahooMailNeo@web142604.mail.bf1.yahoo.com>
	<1401315519.69340.YahooMailNeo@web141703.mail.bf1.yahoo.com>
Message-ID: <1401799243.43178.YahooMailNeo@web142603.mail.bf1.yahoo.com>

HI Farnoosh,

May be this helps:

set.seed(497)
dat <- data.frame(Unit=sample(10, 200,replace=TRUE), MD= sample(5,200,replace=TRUE), Response=sample(3, 200, replace=TRUE))
library(reshape2)
res <- dcast(dat, Unit+MD~Response, value.var="Response", length)
?res[,-(1:2)] <- round((res[,-(1:2)]/rowSums(res[,-(1:2)]))*100,2)
res1 <- res
res1[,-(1:2)] <- lapply(res1[-(1:2)],paste0,"%")
?head(res1)
#? Unit MD????? 1????? 2????? 3
#1??? 1? 1???? 0% 33.33% 66.67%
#2??? 1? 2 33.33% 33.33% 33.33%
#3??? 1? 3???? 0%??? 50%??? 50%
#4??? 1? 4??? 40%??? 40%??? 20%
#5??? 1? 5???? 0%?? 100%???? 0%
#6??? 2? 1??? 60%??? 20%??? 20%
A.K.



I think I want to have something like this:


Unit, MD, Response 1, Response 2, Response 3
11 ? ? ? ? 90%8%2%
1280%10% ? ? ? ? ? ? ? ? 10%
2395%3%2%

Does this make sense to you?


Regards,?Farnoosh Sheikhi


On Tuesday, May 27, 2014 7:49 PM, arun <smartpink111 at yahoo.com> wrote:



Hi Farnoosh,

I am not sure whether this is what you wanted.
library(plyr)

freq1 <- acast(data,MD~Unit, value.var="Response",length)
?round((freq1/colSums(freq1))*100,2)

Regarding the barplots, there would be some options.
?barplot
library(lattice)
?barchart
If you have any particular format (e.g. online reference) in mind, let me know.

Tx.
Arun







On Tuesday, May 27, 2014 7:43 PM, farnoosh sheikhi <farnoosh_81 at yahoo.com> wrote:



Hi Arun,

I hope you are doing well.
I have a data set similar to below:

Response = rep((1:3), 560)
MD<-rep(1:112, each=15)
Unit<-rep(1:12, 140)
data<-as.data.frame(cbind(Unit, MD,Response ))


I want to get frequencies and proportion of Response for each MD within Unit. I also wanted to plot (bar plot) Response frequencies within Units in one plot.

Any help would be appreciated.
Thanks tons.

Regards,?Farnoosh Sheikhi


From alhajibukar2 at yahoo.com  Tue Jun  3 11:17:01 2014
From: alhajibukar2 at yahoo.com (Bukar Alhaji)
Date: Tue, 3 Jun 2014 02:17:01 -0700 (PDT)
Subject: [R] Code for generating states and observations for HMM
Message-ID: <1401787021.65536.YahooMailNeo@web140304.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140603/b8b771a0/attachment.pl>

From Mark.Fowler at dfo-mpo.gc.ca  Tue Jun  3 14:32:06 2014
From: Mark.Fowler at dfo-mpo.gc.ca (Fowler, Mark)
Date: Tue, 3 Jun 2014 09:32:06 -0300
Subject: [R] tkbind (callback)
Message-ID: <CB5182AD107F0943AEF20FD01FB8A7F80682C8D7@marbioexc02.mar.dfo-mpo.ca>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140603/310d5b04/attachment.pl>

From hanhtham.tran at yahoo.com.vn  Tue Jun  3 08:28:19 2014
From: hanhtham.tran at yahoo.com.vn (Tham Tran)
Date: Mon, 2 Jun 2014 23:28:19 -0700 (PDT)
Subject: [R] plot in package psych with function error.bars.by
Message-ID: <1401776898895-4691632.post@n4.nabble.com>

Hi, 

I have a problem with the function "error.bars.by" in package "psych".
This is the code for example of a graph:

keys.list=list(Agree=c(-1,2:5),Conscientious=c(6:8,-9,-10),Extraversion=c(-11,-12,13:15),Neuroticism=c(16:20),Openness
= c(21,-22,23,24,-25))
keys = make.keys(28,keys.list,item.labels=colnames(bfi))
scores = score.items(keys,bfi,min=1,max=6)
require(psych)
error.bars.by(scores$scores,round(bfi$age/10)*10,by.var=TRUE,
main="BFI age trends",legend=3,labels=colnames(scores$scores),
xlab="Age",ylab="Mean item score")

I need to change the plotting character and line type of the graph according
to the scores (Agree,Conscientious,Extraticism,Openness).

I have tried with: 
error.bars.by(scores$scores,round(bfi$age/10)*10,by.var=TRUE,
main="BFI age trends",legend=3,labels=colnames(scores$scores),
pch=c(1,2,3,4), lty=1
,xlab="Age",ylab="Mean item score")

But there is a problem: 
Error in localWindow(xlim, ylim, log, asp, ...) :  formal argument "pch"
matched by multiple actual arguments

Anyone can help me for this problem. 
Many thanks.

Tham Tran



--
View this message in context: http://r.789695.n4.nabble.com/plot-in-package-psych-with-function-error-bars-by-tp4691632.html
Sent from the R help mailing list archive at Nabble.com.


From jrkrideau at inbox.com  Tue Jun  3 15:26:38 2014
From: jrkrideau at inbox.com (John Kane)
Date: Tue, 3 Jun 2014 05:26:38 -0800
Subject: [R] Time Series
In-Reply-To: <1401721593.81982.YahooMailNeo@web120905.mail.ne1.yahoo.com>
References: <1400857351.79463.yahoomailneo@web140906.mail.bf1.yahoo.com>
	<539bf98a871.0000089cjrkrideau@inbox.com>
Message-ID: <D0387240A37.000002A6jrkrideau@inbox.com>

I know essentially nothing about plotting time series so so I just let it pass hoping someone with knowledge of time series would help

What were you expecting to get? Just plotting the time series without labels etc, since I am getting some weird error messages about pch having a ?unexpected ',' in " pch="16" and I am too lazy to bother debugging it I get a four panel plot (see attached). This does not seem make any sense to me since I don't see why Date is plotted, but as I say I know nothing about time series.

However the data did come through okay. Presumably test$Date is a date. It reads in as a factor for me which is one reason for using dput() which maintains the structure of the data.

Below is what I think your data looks like in dput() format.

Sorry not to be of more help.

test <- structure(list(Date = structure(c(15657, 15664, 15678, 15700, 15713, 15720, 15734, 15741, 15755, 15769, 15783, 15790, 15811, 15832, 15839, 15853, 15867, 15880, 15895, 15902, 15916, 15930, 15944, 15951, 15958, 15965, 15972, 15979, 15986, 16000, 16014, 16021, 16028, 16035, 16042, 16049, 16056, 16065, 16077, 16084, 16091, 16105, 16112, 16126, 16141, 16147, 16154, 16161, 16175, 16189, 16203), class = "Date"), Inr = c(2.2, 2.5, 2.4, 2.3, 2.1, 1.9, 1.9, 3.3, 2.6, 2.7, 3.1, 2.4, 2, 2.5, 2.3, 2.4, 2.3, 2.3, 2.1, 2.4, 3.6, 3, 1.3, 2.6, 1.9, 3.4, 2.4, 2.2, 2.9, 2.8, 2.1, 2.2, 2.2, 3, 2.7, 2.3, 2.7, 2.9, 2.7, 2.6, 2.6, 3.3, 2.6, 2.8, 2.9, 3.5, 2.8, 2.7, 2.5, 2.8, 2.3), Wdose = c(30, 32.5, 32.5, 35, 35, 35, 25, 40, 37.5, 37.5, 37.5, 32.5, 37.5, 35, 35, 35, 35, 35, 35, 42.5, 40, 35, 25, 40, 32.5, 35, 32.5, 35, 37.5, 35, 35, 37.5, 37.5, 40, 37.5, 37.5, 40, 40, 40, 40, 37.5, 37.5, 40, 37.5, 40, 40, 32.5, 35, 35, 35, 35), Deldose = c(NA, 2.5, 0, 2.5, 0, 0, -10, 15, -2.7, 0, 0, -5, 5, -2.5, 0, 0, 0, 0, 0, 7.5, -2.5, -5, -10, 15, -7.5, 2.5, -2.5, 2.5, 2.5, -2.5, 0, 2.5, 0, 2.5, -2.5, 0, 2.5, 0, 0, 0, -2.5, 0, 2.5, -2.5, 2.5, 0, -7.5, 2.5, 0, 0, 0)), .Names = c("Date", "Inr", "Wdose", "Deldose"), row.names = c(NA, -51L), class = "data.frame")


John Kane
Kingston ON Canada

-----Original Message-----
From: schmtzway at yahoo.com
Sent: Mon, 2 Jun 2014 08:06:33 -0700 (PDT)
To: jrkrideau at inbox.com, r-help at r-project.org
Subject: Re: [R] Time Series

John:

The data that I sent you did you receive it? If so what thoughts or suggestions do you have for plotting the time series?

I am not sure what is going wrong and getting multi plot of same.

Thank you

Wayne Schlemitz

schmtzway at yahoo.com

  On Saturday, May 24, 2014 11:34 AM, John Kane <jrkrideau at inbox.com> wrote:

No raw data.? Sent is as text (csv) or use dput() to include it in the email.

John Kane
Kingston ON Canada

> -----Original Message-----
> From: schmtzway at yahoo.com
> Sent: Fri, 23 May 2014 08:02:31 -0700 (PDT)
> To: r-help at r-project.org
> Subject: [R] Time Series
> 
> Dear Sir:
> I am trying to plot a time series from the following code:
> 
> test <- read.table("/home/wayne/inr2a.txt", header = TRUE, quote="", sep
> = ";")
> x2 <- ts(data=test, frequency = 80, start = c(2012,11), end = c(2014,5))
> plot.ts(x2, xlab="Date", ylab="Inr", main="X2 - Time Series",
> ylim=c(1.0,4.0),pch=16, col="black")
> 
> What I get is multi plots that print 3x across the plot.
> 
> Using R 2.15.2-1 on Ubuntu Natty
> Attached is the raw data.
> 
> Thank you for any suggestions.
> Wayne
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help [https://stat.ethz.ch/mailman/listinfo/r-help]
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html [http://www.r-project.org/posting-guide.html]
> and provide commented, minimal, self-contained, reproducible code.

____________________________________________________________
Protect your computer files with professional cloud backup.
Get PCRx Backup and upload unlimited files automatically. 
Learn more at http://backup.pcrx.com/mail [http://backup.pcrx.com/mail]

____________________________________________________________
Protect your computer files with professional cloud backup.
Get PCRx Backup and upload unlimited files automatically. 
Learn more at http://backup.pcrx.com/mail
-------------- next part --------------
A non-text attachment was scrubbed...
Name: wayne.ts.png
Type: image/png
Size: 17761 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140603/75e8aa88/attachment.png>

From bstan0578 at gmail.com  Tue Jun  3 16:11:21 2014
From: bstan0578 at gmail.com (=?UTF-8?Q?Bastian_P=C3=B6schl?=)
Date: Tue, 3 Jun 2014 16:11:21 +0200
Subject: [R] Time Series
In-Reply-To: <D0387240A37.000002A6jrkrideau@inbox.com>
References: <1400857351.79463.yahoomailneo@web140906.mail.bf1.yahoo.com>
	<539bf98a871.0000089cjrkrideau@inbox.com>
	<1401721593.81982.YahooMailNeo@web120905.mail.ne1.yahoo.com>
	<D0387240A37.000002A6jrkrideau@inbox.com>
Message-ID: <CAH091-TRP8Pyh0T8P23kjsTVZv7+SZTmbcMtFtFZtZDLP0cNRA@mail.gmail.com>

Ein eingebundener Text mit undefiniertem Zeichensatz wurde abgetrennt.
Name: nicht verf?gbar
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140603/fe8ae1df/attachment.pl>

From caroline.lustenberger at hotmail.com  Tue Jun  3 16:42:20 2014
From: caroline.lustenberger at hotmail.com (Caroline Lustenberger)
Date: Tue, 3 Jun 2014 16:42:20 +0200
Subject: [R] control for repeated observations in a simple correlation design
Message-ID: <DUB122-W9FE1CA9D17BC08C375CABE0230@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140603/09c181a1/attachment.pl>

From caroline.lustenberger at hotmail.com  Tue Jun  3 16:42:33 2014
From: caroline.lustenberger at hotmail.com (Caroline Lustenberger)
Date: Tue, 3 Jun 2014 16:42:33 +0200
Subject: [R] control for repeated observations in a simple correlation design
Message-ID: <DUB122-W46676587E03753D774A0C3E0230@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140603/41898449/attachment.pl>

From macrakis at alum.mit.edu  Tue Jun  3 16:44:15 2014
From: macrakis at alum.mit.edu (=?UTF-8?B?U3RhdnJvcyBNYWNyYWtpcyAozqPPhM6x4b+mz4HOv8+CIM6czrHOus+BzqzOus63z4Ip?=)
Date: Tue, 3 Jun 2014 10:44:15 -0400
Subject: [R] Question about setdiff()
In-Reply-To: <CADuMfoG=MOLF7Y+c9qD8Y+O=vYV0VNxif4tugC9UE-mTVUOuBw@mail.gmail.com>
References: <CADuMfoG=MOLF7Y+c9qD8Y+O=vYV0VNxif4tugC9UE-mTVUOuBw@mail.gmail.com>
Message-ID: <CACLVabV=FmrvDCer=3MAULk-5ZjFw4UnqmDtf5b+6T8u_9mCdg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140603/a05980d5/attachment.pl>

From dulcalma at bigpond.com  Tue Jun  3 17:06:50 2014
From: dulcalma at bigpond.com (Duncan Mackay)
Date: Wed, 4 Jun 2014 01:06:50 +1000
Subject: [R] Time Series
In-Reply-To: <D0387240A37.000002A6jrkrideau@inbox.com>
References: <1400857351.79463.yahoomailneo@web140906.mail.bf1.yahoo.com>	<539bf98a871.0000089cjrkrideau@inbox.com>
	<D0387240A37.000002A6jrkrideau@inbox.com>
Message-ID: <001b01cf7f3d$733c2d90$59b488b0$@bigpond.com>

Not sure where things are up to in the thread but this may illuminate things
Using the test data.frame
from an old thread I was just looking at
https://stat.ethz.ch/pipermail/r-help/2007-May/133033.html

ylabGrob <-
function(...) { # ...is lab1, lab2, etc
labs <- lapply(list(...), textGrob, rot = 90)
nlabs <- length(labs)
lab.widths <-
lapply(labs,
function(lab) unit(1, "grobwidth", data = list(lab)))
lab.layout <-
grid.layout(ncol = 1,
nrow = nlabs,
heights = unit(1, "null"),
widths = do.call(max, lab.widths), respect = TRUE)
lab.gf <- frameGrob(layout = lab.layout)
for (i in seq_len(nlabs)) {
lab.gf <- placeGrob(lab.gf, labs[[i]], row = i, col = 1)
}
lab.gf
}

xyplot(Wdose+Deldose ~ Date, test,
       outer = T,
       strip.left = T,
       strip = F,
       layout = c(1,2),
       ylab = ylabGrob("Del units","Win units"),
       par.settings = list(strip.background = list(col = "transparent")),
       scales   = list(x = list(alternating = FALSE,
                                relation    = "same",
                                rot         = 0),
                       y = list(alternating = FALSE,
                                 relation    = "same",
                                 rot         = 0)
                  ))

Regards

Duncan

Duncan Mackay
Department of Agronomy and Soil Science
University of New England
Armidale NSW 2351
Email: home: mackay at northnet.com.au


-----Original Message-----
From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On Behalf Of John Kane
Sent: Tuesday, 3 June 2014 23:27
To: wayne schlemitz; r-help at R-project.org
Subject: Re: [R] Time Series

I know essentially nothing about plotting time series so so I just let it pass hoping someone with knowledge of time series would help

What were you expecting to get? Just plotting the time series without labels etc, since I am getting some weird error messages about pch having a ?unexpected ',' in " pch="16" and I am too lazy to bother debugging it I get a four panel plot (see attached). This does not seem make any sense to me since I don't see why Date is plotted, but as I say I know nothing about time series.

However the data did come through okay. Presumably test$Date is a date. It reads in as a factor for me which is one reason for using dput() which maintains the structure of the data.

Below is what I think your data looks like in dput() format.

Sorry not to be of more help.

test <- structure(list(Date = structure(c(15657, 15664, 15678, 15700, 15713, 15720, 15734, 15741, 15755, 15769, 15783, 15790, 15811, 15832, 15839, 15853, 15867, 15880, 15895, 15902, 15916, 15930, 15944, 15951, 15958, 15965, 15972, 15979, 15986, 16000, 16014, 16021, 16028, 16035, 16042, 16049, 16056, 16065, 16077, 16084, 16091, 16105, 16112, 16126, 16141, 16147, 16154, 16161, 16175, 16189, 16203), class = "Date"), Inr = c(2.2, 2.5, 2.4, 2.3, 2.1, 1.9, 1.9, 3.3, 2.6, 2.7, 3.1, 2.4, 2, 2.5, 2.3, 2.4, 2.3, 2.3, 2.1, 2.4, 3.6, 3, 1.3, 2.6, 1.9, 3.4, 2.4, 2.2, 2.9, 2.8, 2.1, 2.2, 2.2, 3, 2.7, 2.3, 2.7, 2.9, 2.7, 2.6, 2.6, 3.3, 2.6, 2.8, 2.9, 3.5, 2.8, 2.7, 2.5, 2.8, 2.3), Wdose = c(30, 32.5, 32.5, 35, 35, 35, 25, 40, 37.5, 37.5, 37.5, 32.5, 37.5, 35, 35, 35, 35, 35, 35, 42.5, 40, 35, 25, 40, 32.5, 35, 32.5, 35, 37.5, 35, 35, 37.5, 37.5, 40, 37.5, 37.5, 40, 40, 40, 40, 37.5, 37.5, 40, 37.5, 40, 40, 32.5, 35, 35, 35, 35), Deldose = c(NA, 2.5, 0, 2.5, 0, 0, -10, 15, -2.7, 0, 0, -5, 5, -2.5, 0, 0, 0, 0, 0, 7.5, -2.5, -5, -10, 15, -7.5, 2.5, -2.5, 2.5, 2.5, -2.5, 0, 2.5, 0, 2.5, -2.5, 0, 2.5, 0, 0, 0, -2.5, 0, 2.5, -2.5, 2.5, 0, -7.5, 2.5, 0, 0, 0)), .Names = c("Date", "Inr", "Wdose", "Deldose"), row.names = c(NA, -51L), class = "data.frame")


John Kane
Kingston ON Canada

-----Original Message-----
From: schmtzway at yahoo.com
Sent: Mon, 2 Jun 2014 08:06:33 -0700 (PDT)
To: jrkrideau at inbox.com, r-help at r-project.org
Subject: Re: [R] Time Series

John:

The data that I sent you did you receive it? If so what thoughts or suggestions do you have for plotting the time series?

I am not sure what is going wrong and getting multi plot of same.

Thank you

Wayne Schlemitz

schmtzway at yahoo.com

  On Saturday, May 24, 2014 11:34 AM, John Kane <jrkrideau at inbox.com> wrote:

No raw data.  Sent is as text (csv) or use dput() to include it in the email.

John Kane
Kingston ON Canada

> -----Original Message-----
> From: schmtzway at yahoo.com
> Sent: Fri, 23 May 2014 08:02:31 -0700 (PDT)
> To: r-help at r-project.org
> Subject: [R] Time Series
> 
> Dear Sir:
> I am trying to plot a time series from the following code:
> 
> test <- read.table("/home/wayne/inr2a.txt", header = TRUE, quote="", sep
> = ";")
> x2 <- ts(data=test, frequency = 80, start = c(2012,11), end = c(2014,5))
> plot.ts(x2, xlab="Date", ylab="Inr", main="X2 - Time Series",
> ylim=c(1.0,4.0),pch=16, col="black")
> 
> What I get is multi plots that print 3x across the plot.
> 
> Using R 2.15.2-1 on Ubuntu Natty
> Attached is the raw data.
> 
> Thank you for any suggestions.
> Wayne
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help [https://stat.ethz.ch/mailman/listinfo/r-help]
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html [http://www.r-project.org/posting-guide.html]
> and provide commented, minimal, self-contained, reproducible code.

____________________________________________________________
Protect your computer files with professional cloud backup.

Learn more at http://backup.pcrx.com/mail [http://backup.pcrx.com/mail]

____________________________________________________________
Protect your computer files with professional cloud backup.

Learn more at http://backup.pcrx.com/mail


From pensterfuzzer at yahoo.de  Tue Jun  3 17:25:08 2014
From: pensterfuzzer at yahoo.de (Werner W.)
Date: Tue, 3 Jun 2014 16:25:08 +0100
Subject: [R] Online, automatic evaluation of class assessment R scripts
Message-ID: <1401809108.20729.YahooMailNeo@web172903.mail.ir2.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140603/8bd214ba/attachment.pl>

From frankieboytje at hotmail.com  Tue Jun  3 16:05:39 2014
From: frankieboytje at hotmail.com (Frank van Berkum)
Date: Tue, 3 Jun 2014 14:05:39 +0000
Subject: [R] R-memory: clearing memory within a function?
Message-ID: <DUB111-W81881EC9226E2A4FB1273DBC230@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140603/0df65539/attachment.pl>

From Jonas.Ulbrich at ruhr-uni-bochum.de  Tue Jun  3 15:05:12 2014
From: Jonas.Ulbrich at ruhr-uni-bochum.de (Jonas Ulbrich)
Date: Tue, 03 Jun 2014 15:05:12 +0200
Subject: [R] Yield Curve Package Svensson
Message-ID: <e263f1cb42b4a6064a739b99a50ffce2@mpx2.rz.ruhr-uni-bochum.de>


Hi,

thank you for your rapid answer. The problem is solved.

My second and last question is as follows:


I use the yield curve package and I want to calculate the fitted yields 
via the Svensson approach.
The I have already calculated the six required parameters. At first I 
read them in from a CSV-file.
NSSParameter<-(read.csv("C:/Users/admin/Desktop/Universit?t/SeminarinFinance/R/ParameterSvensson.csv",sep=";",dec=".",header=TRUE)

Now I want to plug them in in the function.
Srates(NSSParameter,maturity,whichRate = "Spot").

NSSParameter is defined as mentioned above looks like for 500 values:

beta_0    beta_1       beta_2     beta_3      tau1     tau2
   1 3.824276 -3.726540 -1.878026723  -3.856153 1.1617407 1.672910
   2 3.786777 -3.688137 -1.929259408  -3.780010 1.1617407 1.672910

Maturity is maturity<-c(1/12,3/12,6/12,1,2,3,5,7,10,20,30).
Spot is the sort of interest rate I want to determine.

The error request I receive now is: Error in hasTsp(x) : invalid time 
series parameters specified. How fix this concrete case? I have not 
found an example to that.

Best Regards Jonas


From smartpink111 at yahoo.com  Tue Jun  3 15:46:17 2014
From: smartpink111 at yahoo.com (arun)
Date: Tue, 3 Jun 2014 06:46:17 -0700 (PDT)
Subject: [R] Time Series
In-Reply-To: <D0387240A37.000002A6jrkrideau@inbox.com>
References: <1400857351.79463.yahoomailneo@web140906.mail.bf1.yahoo.com>	<539bf98a871.0000089cjrkrideau@inbox.com>
	<D0387240A37.000002A6jrkrideau@inbox.com>
Message-ID: <1401803177.91397.YahooMailNeo@web142603.mail.bf1.yahoo.com>



Hi Wayne,

As John mentioned, it is not clear about your expectations.? May be this helps:
library(xts)
x2New <- xts(test[,-1], order.by=test[,1])
library(xtsExtra)
plot(x2New,screens=1,auto.legend=TRUE)

A.K.




On Tuesday, June 3, 2014 9:29 AM, John Kane <jrkrideau at inbox.com> wrote:
I know essentially nothing about plotting time series so so I just let it pass hoping someone with knowledge of time series would help

What were you expecting to get? Just plotting the time series without labels etc, since I am getting some weird error messages about pch having a ?unexpected ',' in " pch="16" and I am too lazy to bother debugging it I get a four panel plot (see attached). This does not seem make any sense to me since I don't see why Date is plotted, but as I say I know nothing about time series.

However the data did come through okay. Presumably test$Date is a date. It reads in as a factor for me which is one reason for using dput() which maintains the structure of the data.

Below is what I think your data looks like in dput() format.

Sorry not to be of more help.

test <- structure(list(Date = structure(c(15657, 15664, 15678, 15700, 15713, 15720, 15734, 15741, 15755, 15769, 15783, 15790, 15811, 15832, 15839, 15853, 15867, 15880, 15895, 15902, 15916, 15930, 15944, 15951, 15958, 15965, 15972, 15979, 15986, 16000, 16014, 16021, 16028, 16035, 16042, 16049, 16056, 16065, 16077, 16084, 16091, 16105, 16112, 16126, 16141, 16147, 16154, 16161, 16175, 16189, 16203), class = "Date"), Inr = c(2.2, 2.5, 2.4, 2.3, 2.1, 1.9, 1.9, 3.3, 2.6, 2.7, 3.1, 2.4, 2, 2.5, 2.3, 2.4, 2.3, 2.3, 2.1, 2.4, 3.6, 3, 1.3, 2.6, 1.9, 3.4, 2.4, 2.2, 2.9, 2.8, 2.1, 2.2, 2.2, 3, 2.7, 2.3, 2.7, 2.9, 2.7, 2.6, 2.6, 3.3, 2.6, 2.8, 2.9, 3.5, 2.8, 2.7, 2.5, 2.8, 2.3), Wdose = c(30, 32.5, 32.5, 35, 35, 35, 25, 40, 37.5, 37.5, 37.5, 32.5, 37.5, 35, 35, 35, 35, 35, 35, 42.5, 40, 35, 25, 40, 32.5, 35, 32.5, 35, 37.5, 35, 35, 37.5, 37.5, 40, 37.5, 37.5, 40, 40, 40, 40, 37.5, 37.5, 40, 37.5, 40, 40, 32.5, 35, 35, 35, 35), Deldose = c(NA, 2.5, 0, 2.5, 0, 0, -10,
 15, -2.7, 0, 0, -5, 5, -2.5, 0, 0, 0, 0, 0, 7.5, -2.5, -5, -10, 15, -7.5, 2.5, -2.5, 2.5, 2.5, -2.5, 0, 2.5, 0, 2.5, -2.5, 0, 2.5, 0, 0, 0, -2.5, 0, 2.5, -2.5, 2.5, 0, -7.5, 2.5, 0, 0, 0)), .Names = c("Date", "Inr", "Wdose", "Deldose"), row.names = c(NA, -51L), class = "data.frame")


John Kane
Kingston ON Canada

-----Original Message-----
From: schmtzway at yahoo.com
Sent: Mon, 2 Jun 2014 08:06:33 -0700 (PDT)
To: jrkrideau at inbox.com, r-help at r-project.org
Subject: Re: [R] Time Series

John:

The data that I sent you did you receive it? If so what thoughts or suggestions do you have for plotting the time series?

I am not sure what is going wrong and getting multi plot of same.

Thank you

Wayne Schlemitz

schmtzway at yahoo.com

? On Saturday, May 24, 2014 11:34 AM, John Kane <jrkrideau at inbox.com> wrote:

No raw data.? Sent is as text (csv) or use dput() to include it in the email.

John Kane
Kingston ON Canada

> -----Original Message-----
> From: schmtzway at yahoo.com
> Sent: Fri, 23 May 2014 08:02:31 -0700 (PDT)
> To: r-help at r-project.org
> Subject: [R] Time Series
> 
> Dear Sir:
> I am trying to plot a time series from the following code:
> 
> test <- read.table("/home/wayne/inr2a.txt", header = TRUE, quote="", sep
> = ";")
> x2 <- ts(data=test, frequency = 80, start = c(2012,11), end = c(2014,5))
> plot.ts(x2, xlab="Date", ylab="Inr", main="X2 - Time Series",
> ylim=c(1.0,4.0),pch=16, col="black")
> 
> What I get is multi plots that print 3x across the plot.
> 
> Using R 2.15.2-1 on Ubuntu Natty
> Attached is the raw data.
> 
> Thank you for any suggestions.
> Wayne
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help [https://stat.ethz.ch/mailman/listinfo/r-help]
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html [http://www.r-project.org/posting-guide.html]
> and provide commented, minimal, self-contained, reproducible code.

____________________________________________________________
Protect your computer files with professional cloud backup.
Get PCRx Backup and upload unlimited files automatically. 
Learn more at http://backup.pcrx.com/mail [http://backup.pcrx.com/mail]

____________________________________________________________
Protect your computer files with professional cloud backup.
Get PCRx Backup and upload unlimited files automatically. 
Learn more at http://backup.pcrx.com/mail
______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From zofia.taranu at gmail.com  Tue Jun  3 16:52:23 2014
From: zofia.taranu at gmail.com (Zofia Ecaterina Taranu)
Date: Tue, 3 Jun 2014 10:52:23 -0400
Subject: [R] Prediction interval with GAM?
Message-ID: <3EC91C9D-8EB4-403C-8399-B3A33A14F837@gmail.com>

I apologize in advance for my very basic question. I would like to plot prediction intervals for my GAM model, however, instead of using a Gamma GAM, I assumed a Gaussian distribution (I standardized my response variable, which resulted in negative values).

To create the prediction interval for my model, I simply changed the code below:

yr <- matrix(rgamma(fv*0,shape=1/b$scale,scale=fv*scale),nrow(fv),ncol(fv))

To:

yr <- matrix(rnorm(fv*0,mean=mean(data$Y),sd=sd(data$Y)),nrow(fv),ncol(fv)) # where Y is my response variable

However, the prediction interval created does not capture the trend in my data (see attached figure). I imagine I also should have changed:

fv <- exp(lp)

where 

Xp <- predict(b,newdata=data.frame(x=xp),type="lpmatrix")
lp <- Xp%*%br

Any suggestions would be greatly appreciated!

Best regards,

Zofia



Stagiaire Postdoctoral Universit? de Montr?al
D?partement de sciences biologiques
Pavillon Marie-Victorin
90, av. Vincent-d'Indy
Outremont, QC H2V 2S9




From 538280 at gmail.com  Tue Jun  3 18:41:14 2014
From: 538280 at gmail.com (Greg Snow)
Date: Tue, 3 Jun 2014 10:41:14 -0600
Subject: [R] tkbind (callback)
In-Reply-To: <CB5182AD107F0943AEF20FD01FB8A7F80682C8D7@marbioexc02.mar.dfo-mpo.ca>
References: <CB5182AD107F0943AEF20FD01FB8A7F80682C8D7@marbioexc02.mar.dfo-mpo.ca>
Message-ID: <CAFEqCdxZ6qdm66eML_EUpuipKpi+7PVzznF1kZm72uBxkbDPDw@mail.gmail.com>

I think the problem is that the tkbind function is expecting the 3rd
argument to be a function and the arguments of functions passed to
tkbind need to have specific names.  In your call when you do the
binding the OtoFanCallback function is called at that time (hence the
initial print) and its return value (which is the return value of the
final cat call) is used as the binding function, which ends up doing
nothing as you see.

I changed your bind command to:

tkbind(detlist,"<<ListboxSelect>>", OtofanCallback)

and I changed the OtofanCallback function to have no arguments and ran
the script and everything looks much more like it is working, at least
when I changed the selection in the list box I saw the new value
'cat'ed to the screen.

hope this helps


On Tue, Jun 3, 2014 at 6:32 AM, Fowler, Mark <Mark.Fowler at dfo-mpo.gc.ca> wrote:
> Hello,
>
>
>
> I've migrated an ADMB application with a user dialog from S to R. The
> script below will produce a dialog in R, and don't need data to address
> this issue. It works in terms of capturing user inputs to pass along, no
> problem running the ADMB program. However some of the options have
> dependencies. E.g. if we fix a parameter it should not have an
> estimation phase, but we want the full suite of phases available to the
> user when the parameter is active. Thus the selection of one listbox is
> constrained by the selection of another listbox. I had callback
> functionality in S for this, and am now trying to implement callbacks in
> tcltk2 using tkbind. At the bottom of the dialog function below I
> include an attempt at a callback function. Just for one parameter-phase
> pair and scenario to illustrate. It includes a troubleshooting cat to
> tell if it works. When I run this it immediately cats the correct value,
> although this is premature, as I haven't interacted with the dialog yet.
> More importantly, it subsequently ignores interactions. If I change the
> parameter definition in one listbox, the callback should verify that the
> estimation phase is appropriate in the other listbox and change it if
> not. But beyond running the callback function when the dialog is
> created, it does not appear to be active after that. Anybody know what
> I'm doing wrong?
>
>
>
> require(tcltk2)
>
> OtofanGUI=function() {
>
> OtofanR=tktoplevel()
>
> tktitle(OtofanR) <- "Age-Related Data Analysis with OTOFAN"
>
> tkgrid(tklabel(OtofanR,text="DATA SELECTION & DEFINITION"),stick="we")
>
> tkgrid(tklabel(OtofanR,text="If you already have files of ADMB-formatted
> data, and/or optional PIN, click button(s) to retrieve them"))
>
> ADMBdata <- tk2button(OtofanR, text = "ADMB Data", width = 10, command =
> function() tkgetOpenFile())
>
> ADMBfile <- tk2button(OtofanR, text = "ADMB Pin", width = 10, command =
> function() tkgetOpenFile())
>
> tkgrid(ADMBdata)
>
> tkgrid(ADMBfile)
>
> tkgrid(tklabel(OtofanR,text=""))
>
> tkgrid(tklabel(OtofanR,text="If you have a dataframe in R,
> confirm/identify it, and the variables to build the ADMB inputs"))
>
> CustomFile <- tclVar("AgeData")
>
> tkgrid(tklabel(OtofanR,text="Dataframe name"),tk2entry(OtofanR,
> textvariable=CustomFile, width=20))
>
> Ages <- tclVar("AgeYears")
>
> tkgrid(tklabel(OtofanR,text="Age variable"),tk2entry(OtofanR,
> textvariable=Ages, width=20))
>
> FishLens <- tclVar("FishLength")
>
> tkgrid(tklabel(OtofanR,text="Fish Length variable"),tk2entry(OtofanR,
> textvariable=FishLens, width=20))
>
> OtoWts <- tclVar("NA")
>
> tkgrid(tklabel(OtofanR,text="Otolith Weight variable"),tk2entry(OtofanR,
> textvariable=OtoWts, width=20))
>
> OtoLens <- tclVar("NA")
>
> tkgrid(tklabel(OtofanR,text="Otolith Length variable"),tk2entry(OtofanR,
> textvariable=OtoLens, width=20))
>
> FishWts <- tclVar("NA")
>
> tkgrid(tklabel(OtofanR,text="Fish Weight variable"),tk2entry(OtofanR,
> textvariable=FishWts, width=20))
>
> GroupID <- tclVar("NA")
>
> tkgrid(tklabel(OtofanR,text="Group ID variable"),tk2entry(OtofanR,
> textvariable=GroupID, width=20))
>
> YearID <- tclVar("NA")
>
> tkgrid(tklabel(OtofanR,text="Year ID variable"),tk2entry(OtofanR,
> textvariable=YearID, width=20))
>
> Sex <- tclVar("NA")
>
> tkgrid(tklabel(OtofanR,text="Sex variable"),tk2entry(OtofanR,
> textvariable=Sex, width=20))
>
> LFdata <- tclVar("NA")
>
> tkgrid(tklabel(OtofanR,text="Separate Length-Frequency Dataframe
> name"),tk2entry(OtofanR, textvariable=LFdata, width=20))
>
> FreqVar <- tclVar("NA")
>
> tkgrid(tklabel(OtofanR,text="Frequency variable"),tk2entry(OtofanR,
> textvariable=FreqVar, width=20))
>
> OSTypes <- c("Random at Length", "Simple Random")
>
> OSlist=tk2listbox(OtofanR, values=OSTypes, selection=1, selectmode =
> "single", height = 2, scroll = "none", autoscroll = "x", enabled = TRUE)
>
> tkgrid(tklabel(OtofanR,text="Otolith Sample Type"),OSlist)
>
> ASTypes <- c("Random at Length", "Simple Random")
>
> ASlist=tk2listbox(OtofanR, values=ASTypes, selection=1, selectmode =
> "single", height = 2, scroll = "none", autoscroll = "x", enabled = TRUE)
>
> tkgrid(tklabel(OtofanR,text="Age Sample Type"),ASlist)
>
> AppApply <- tk2button(OtofanR, text = "Apply", width = 7, command =
> function()
> OtofanDT(tclvalue(ADMBdata),tclvalue(ADMBFile),tclvalue(ADMBPin),ADMBF="
> NA",ADMBP="NA",tclvalue(GS),
>
>
> Regdata="NA",tclvalue(CustomFile),tclvalue(Ages),tclvalue(FishLens),tclv
> alue(OtoWts),tclvalue(OtoLens),tclvalue(FishWts),tclvalue(GroupID),tclva
> lue(YearID),
>
>                 tclvalue(Sex),tclvalue(LFdata),tclvalue(FreqVar),
>
>
> tclvalue(tclVar(OSTypes[as.numeric(tkcurselection(OSlist))+1])),tclvalue
> (tclVar(ASTypes[as.numeric(tkcurselection(ASlist))+1])),
>
>
> tclvalue(tclVar(LAAdet[as.numeric(tkcurselection(detlist))+1])),tclvalue
> (tclVar(LPhase[as.numeric(tkcurselection(LPlist))+1])),
>
>
> tclvalue(tclVar(Ldist[as.numeric(tkcurselection(Ldlist))+1])),tclvalue(t
> clVar(LAAstdev[as.numeric(tkcurselection(LAASDlist))+1])),
>
>
> tclvalue(tclVar(LSDPhase[as.numeric(tkcurselection(LSDlist))+1])),tclval
> ue(tclVar(LSDdist[as.numeric(tkcurselection(LSDdlist))+1])),
>
>
> tclvalue(tclVar(LSDcov[as.numeric(tkcurselection(LSDcovlist))+1])),OAA="
> NA",tclvalue(tclVar(OAAdet[as.numeric(tkcurselection(odetlist))+1])),
>
>
> tclvalue(tclVar(OPhase[as.numeric(tkcurselection(OPlist))+1])),tclvalue(
> tclVar(Odist[as.numeric(tkcurselection(Odlist))+1])),
>
>
> tclvalue(tclVar(OAAstdev[as.numeric(tkcurselection(OAASDlist))+1])),tclv
> alue(tclVar(OSDPhase[as.numeric(tkcurselection(OSDlist))+1])),
>
>
> tclvalue(tclVar(OSDdist[as.numeric(tkcurselection(OSDdlist))+1])),CORR="
> NA",tclvalue(tclVar(CORest[as.numeric(tkcurselection(CORRlist))+1])),
>
>
> tclvalue(tclVar(CPhase[as.numeric(tkcurselection(CPlist))+1])),GS2="NA",
> tclvalue(tclVar(PAAPhase[as.numeric(tkcurselection(PAAlist))+1]))))
>
> AppCancel <- tk2button(OtofanR, text = "Cancel", width = 7, command =
> function() tkdestroy(OtofanR))
>
> tkgrid(AppApply,sticky="w")
>
> tkgrid(AppCancel,sticky="w")
>
> #Length at Age Tab
>
> tkgrid(tklabel(OtofanR,text="LENGTH AT AGE
> FITTING"),sticky="we",column=2,row=1)
>
> LAAdet <- c("Mean, Estimated", "Constrained BY VBGF, Estimated",
> "Constrained TO VBGF, Fixed")
>
> detlist=tk2listbox(OtofanR, values=c("Mean, Estimated", "Constrained BY
> VBGF, Estimated", "Constrained TO VBGF, Fixed"), selection=1, selectmode
> = "single", height = 3, scroll = "none", autoscroll = "x", enabled =
> TRUE, width=30)
>
> tkgrid(tklabel(OtofanR,text="Determination Method"),column=2,row=2)
>
> tkgrid(detlist,column=2,row=3)
>
> LPhase <- c("0", "1", "2", "3")
>
> LPlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), selection=3,
> selectmode = "single", height = 4, scroll = "none", autoscroll = "x",
> enabled = TRUE)
>
> tkgrid(tklabel(OtofanR,text="Activation Phase (0 = Fixed, do not
> estimate)"),column=2,row=5)
>
> tkgrid(LPlist,column=2,row=6)
>
> Ldist <- c("0", "1", "2", "3")
>
> Ldlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), selection=1,
> selectmode = "single", height = 4, scroll = "none", autoscroll = "x",
> enabled = TRUE)
>
> tkgrid(tklabel(OtofanR,text="Estimate Distribution in Phase (0 = Fixed,
> do not estimate)"),column=2,row=8)
>
> tkgrid(Ldlist,column=2,row=9)
>
> LAAstdev <- c("Traditional Calculation, Fixed", "Constrained BY
> regression, Estimated", "Constrained TO regression, Fixed")
>
> LAASDlist=tk2listbox(OtofanR, values=c("Traditional Calculation, Fixed",
> "Constrained BY regression, Estimated", "Constrained TO regression,
> Fixed"), selection=1, selectmode = "single", height = 4, scroll =
> "none", autoscroll = "x", enabled = TRUE, width=35)
>
> tkgrid(tklabel(OtofanR,text="Standard Deviation"),column=2,row=11)
>
> tkgrid(LAASDlist,column=2,row=12)
>
> LSDPhase <- c("0", "1", "2", "3")
>
> LSDlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), selection=4,
> selectmode = "single", height = 4, scroll = "none", autoscroll = "x",
> enabled = TRUE)
>
> tkgrid(tklabel(OtofanR,text="St Dev Activation Phase (0 = Fixed, do not
> estimate)"),column=2,row=14)
>
> tkgrid(LSDlist,column=2,row=15)
>
> LSDdist <- c("0", "1", "2", "3")
>
> LSDdlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), selection=1,
> selectmode = "single", height = 4, scroll = "none", autoscroll = "x",
> enabled = TRUE)
>
> tkgrid(tklabel(OtofanR,text="Estimate St Dev Distribution in Phase (0 =
> do not estimate)"),column=2,row=17)
>
> tkgrid(LSDdlist,column=2,row=18)
>
> LSDcov <- c("0", "1", "2", "3")
>
> LSDcovlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"),
> selection=1, selectmode = "single", height = 4, scroll = "none",
> autoscroll = "x", enabled = TRUE)
>
> tkgrid(tklabel(OtofanR,text="Estimate CV in Phase (0 = Fixed, do not
> estimate)"),column=2,row=20)
>
> tkgrid(LSDcovlist,column=2,row=21)
>
> #Otolith at Age Tab
>
> tkgrid(tklabel(OtofanR,text="OTOLITH METRICS AT AGE
> FITTING"),sticky="we",column=3,row=1)
>
> OAAdet <- c("Mean, Estimated", "Constrained BY regression, Estimated",
> "Constrained TO regression, Fixed")
>
> odetlist=tk2listbox(OtofanR, values=c("Mean, Estimated", "Constrained BY
> regression, Estimated", "Constrained TO regression, Fixed"),
> selection=1, selectmode = "single", height = 3, scroll = "none",
> autoscroll = "x", enabled = TRUE, width=30)
>
> tkgrid(tklabel(OtofanR,text="Determination Method"),column=3,row=2)
>
> tkgrid(odetlist,column=3,row=3)
>
> OPhase <- c("0", "1", "2", "3")
>
> OPlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), selection=3,
> selectmode = "single", height = 4, scroll = "none", autoscroll = "x",
> enabled = TRUE)
>
> tkgrid(tklabel(OtofanR,text="Activation Phase (0 = Fixed, do not
> estimate)"),column=3,row=5)
>
> tkgrid(OPlist,column=3,row=6)
>
> Odist <- c("0", "1", "2", "3")
>
> Odlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), selection=1,
> selectmode = "single", height = 4, scroll = "none", autoscroll = "x",
> enabled = TRUE)
>
> tkgrid(tklabel(OtofanR,text="Estimate Distribution in Phase (0 = Fixed,
> do not estimate)"),column=3,row=8)
>
> tkgrid(Odlist,column=3,row=9)
>
> OAAstdev <- c("Traditional Calculation, Fixed", "Constrained BY
> regression, Estimated", "Constrained TO regression, Fixed")
>
> OAASDlist=tk2listbox(OtofanR, values=c("Traditional Calculation, Fixed",
> "Constrained BY regression, Estimated", "Constrained TO regression,
> Fixed"), selection=1, selectmode = "single", height = 4, scroll =
> "none", autoscroll = "x", enabled = TRUE, width=35)
>
> tkgrid(tklabel(OtofanR,text="Standard Deviation"),column=3,row=11)
>
> tkgrid(OAASDlist,column=3,row=12)
>
> OSDPhase <- c("0", "1", "2", "3")
>
> OSDlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), selection=4,
> selectmode = "single", height = 4, scroll = "none", autoscroll = "x",
> enabled = TRUE)
>
> tkgrid(tklabel(OtofanR,text="St Dev Activation Phase (0 = Fixed, do not
> estimate)"),column=3,row=14)
>
> tkgrid(OSDlist,column=3,row=15)
>
> OSDdist <- c("0", "1", "2", "3")
>
> OSDdlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), selection=1,
> selectmode = "single", height = 4, scroll = "none", autoscroll = "x",
> enabled = TRUE)
>
> tkgrid(tklabel(OtofanR,text="Estimate St Dev Distribution in Phase (0 =
> do not estimate)"),column=3,row=17)
>
> tkgrid(OSDdlist,column=3,row=18)
>
> #Dependencies Tab
>
> tkgrid(tklabel(OtofanR,text="DEPENDENCIES"),sticky="we",column=4,row=1)
>
> tkgrid(tklabel(OtofanR,text="Correlations"),sticky="we",column=4,row=2)
>
> CORest <- c("Age-Specific", "Age-Invariant")
>
> CORRlist=tk2listbox(OtofanR, values=c("Age-Specific", "Age-Invariant"),
> selection=1, selectmode = "single", height = 4, scroll = "none",
> autoscroll = "x", enabled = TRUE)
>
> tkgrid(tklabel(OtofanR,text="Method"),column=4,row=3)
>
> tkgrid(CORRlist,column=4,row=3)
>
> CPhase <- c("1", "2", "3")
>
> CPlist=tk2listbox(OtofanR, values=c("1", "2", "3"), selection=3,
> selectmode = "single", height = 4, scroll = "none", autoscroll = "x",
> enabled = TRUE)
>
> tkgrid(tklabel(OtofanR,text="Activation Phase"),column=4,row=5)
>
> tkgrid(CPlist,column=4,row=6)
>
> PAAPhase <- c("1", "2", "3")
>
> PAAlist=tk2listbox(OtofanR, values=c("1", "2", "3"), selection=1,
> selectmode = "single", height = 4, scroll = "none", autoscroll = "x",
> enabled = TRUE)
>
> tkgrid(tklabel(OtofanR,text="Activation Phase to Estimate Proportions at
> Age"),column=4,row=8)
>
> tkgrid(PAAlist,column=4,row=9)
>
> OtofanCallback = function(detlist,LAAdet,LPhase,LPlist) {
>
>                                 if
> (tclvalue(tclVar(LAAdet[as.numeric(tkcurselection(detlist))+1]))!="3" &
> tclvalue(tclVar(LPhase[as.numeric(tkcurselection(LPlist))+1]))=="0")tkse
> lection.set(detlist, 2)
>
> cat(tclvalue(tclVar(LAAdet[as.numeric(tkcurselection(detlist))+1])))
>
> }
>
> tkbind(detlist,"<Key>", OtofanCallback(detlist,LAAdet,LPhase,LPlist))
>
> }
>
> OtofanGUI()
>
>
>
> [immediately outputs as below]
>
> Mean, Estimated<Tcl>
>
>
>
> Mark Fowler
> Population Ecology Division
> Bedford Inst of Oceanography
> Dept Fisheries & Oceans
> Dartmouth NS Canada
> B2Y 4A2
> Tel. (902) 426-3529
> Fax (902) 426-9710
> Email Mark.Fowler at dfo-mpo.gc.ca <mailto:Mark.Fowler at dfo-mpo.gc.ca>
>
>
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com


From dusa.adrian at unibuc.ro  Tue Jun  3 20:03:31 2014
From: dusa.adrian at unibuc.ro (=?UTF-8?B?QWRyaWFuIER1yJlh?=)
Date: Tue, 3 Jun 2014 14:03:31 -0400
Subject: [R] detect escape character
Message-ID: <CAJ=0CtD0ECAFzL9_fKAkfRua4xvME1U67y9G6=3=972gx4vCBQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140603/e1987a6b/attachment.pl>

From sarah.goslee at gmail.com  Tue Jun  3 20:18:14 2014
From: sarah.goslee at gmail.com (Sarah Goslee)
Date: Tue, 3 Jun 2014 14:18:14 -0400
Subject: [R] detect escape character
In-Reply-To: <CAJ=0CtD0ECAFzL9_fKAkfRua4xvME1U67y9G6=3=972gx4vCBQ@mail.gmail.com>
References: <CAJ=0CtD0ECAFzL9_fKAkfRua4xvME1U67y9G6=3=972gx4vCBQ@mail.gmail.com>
Message-ID: <CAM_vju=csx6SsiGRTZFfccZJxzjwzT_M4L7xMvg8g+pAD0ejwA@mail.gmail.com>

Hi,

R uses \ as a metacharacter, so you need a non-intuitive number of \:


mystring <- "Man\\Woman"
# \\ is a metacharacter and a \, so it's equivalent to \ in normal text
sub("\\\\", "/", mystring)


Sarah


On Tue, Jun 3, 2014 at 2:03 PM, Adrian Du?a <dusa.adrian at unibuc.ro> wrote:
> Dear All,
>
> I should be knowing this, but not get it right... For a string like this:
>
> "Man\Woman"
>
> I would like to detect the escape character "\" and replace it with "/".
>
> Tried various ways using gsub(), but don't get it right yet. Any suggestion
> would be highly welcomed...
>
> Thank you,
> Adrian
>

-- 
Sarah Goslee
http://www.functionaldiversity.org


From frtog at vestas.com  Tue Jun  3 20:29:23 2014
From: frtog at vestas.com (=?utf-8?B?RnJlZGUgQWFrbWFubiBUw7hnZXJzZW4=?=)
Date: Tue, 3 Jun 2014 20:29:23 +0200
Subject: [R] detect escape character
In-Reply-To: <CAM_vju=csx6SsiGRTZFfccZJxzjwzT_M4L7xMvg8g+pAD0ejwA@mail.gmail.com>
References: <CAJ=0CtD0ECAFzL9_fKAkfRua4xvME1U67y9G6=3=972gx4vCBQ@mail.gmail.com>
	<CAM_vju=csx6SsiGRTZFfccZJxzjwzT_M4L7xMvg8g+pAD0ejwA@mail.gmail.com>
Message-ID: <B078CDF40DFE4045AF172A8B4F68FC4857C6398AF7@DKRDSEXC016.vestas.net>

Hhhhhmmmhhhhmm. 

> mystring <- "Man\\Woman"
> cat(mystring)
Man\Woman> 
> 
> mystring <- "Man\Woman"
Fejl: '\W' is an unrecognized escape in character string starting ""Man\W"
>

So was the OP asking about?

We need some more information, thank you!.

Yours sincerely / Med venlig hilsen


Frede Aakmann T?gersen
Specialist, M.Sc., Ph.D.
Plant Performance & Modeling

Technology & Service Solutions
T +45 9730 5135
M +45 2547 6050
frtog at vestas.com
http://www.vestas.com

Company reg. name: Vestas Wind Systems A/S
This e-mail is subject to our e-mail disclaimer statement.
Please refer to www.vestas.com/legal/notice
If you have received this e-mail in error please contact the sender. 


> -----Original Message-----
> From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org]
> On Behalf Of Sarah Goslee
> Sent: 3. juni 2014 20:18
> To: Adrian Du?a
> Cc: r-help at r-project.org
> Subject: Re: [R] detect escape character
> 
> Hi,
> 
> R uses \ as a metacharacter, so you need a non-intuitive number of \:
> 
> 
> mystring <- "Man\\Woman"
> # \\ is a metacharacter and a \, so it's equivalent to \ in normal text
> sub("\\\\", "/", mystring)
> 
> 
> Sarah
> 
> 
> On Tue, Jun 3, 2014 at 2:03 PM, Adrian Du?a <dusa.adrian at unibuc.ro> wrote:
> > Dear All,
> >
> > I should be knowing this, but not get it right... For a string like this:
> >
> > "Man\Woman"
> >
> > I would like to detect the escape character "\" and replace it with "/".
> >
> > Tried various ways using gsub(), but don't get it right yet. Any suggestion
> > would be highly welcomed...
> >
> > Thank you,
> > Adrian
> >
> 
> --
> Sarah Goslee
> http://www.functionaldiversity.org
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.

From sarah.goslee at gmail.com  Tue Jun  3 20:37:34 2014
From: sarah.goslee at gmail.com (Sarah Goslee)
Date: Tue, 3 Jun 2014 14:37:34 -0400
Subject: [R] detect escape character
In-Reply-To: <B078CDF40DFE4045AF172A8B4F68FC4857C6398AF7@DKRDSEXC016.vestas.net>
References: <CAJ=0CtD0ECAFzL9_fKAkfRua4xvME1U67y9G6=3=972gx4vCBQ@mail.gmail.com>
	<CAM_vju=csx6SsiGRTZFfccZJxzjwzT_M4L7xMvg8g+pAD0ejwA@mail.gmail.com>
	<B078CDF40DFE4045AF172A8B4F68FC4857C6398AF7@DKRDSEXC016.vestas.net>
Message-ID: <CAM_vjuk1dsD2rcyCT_PRJ8NAbt5UwHMVo3LWV7E0+m1_sYzXgg@mail.gmail.com>

On Tue, Jun 3, 2014 at 2:29 PM, Frede Aakmann T?gersen <frtog at vestas.com> wrote:
> Hhhhhmmmhhhhmm.
>
>> mystring <- "Man\\Woman"
>> cat(mystring)
> Man\Woman>
>>
>> mystring <- "Man\Woman"
> Fejl: '\W' is an unrecognized escape in character string starting ""Man\W"

Right. As the comment in my code indicated, \ is a metacharacter, so
you need to escape it with a metacharacter, which happens to be \.

\\ in a string in R represents a single \ in plain text.

And if you read in a file that contains \, it is displayed as \\ in R,
even though it's really a single \.

> Frede Aakmann T?gersen
> Specialist, M.Sc., Ph.D.
> Plant Performance & Modeling

I find this very entertaining, because that's exactly what I do --
Plant Performance and Modeling -- but when I do it it involves botany.
:)

Sarah

>
>
>> -----Original Message-----
>> From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org]
>> On Behalf Of Sarah Goslee
>> Sent: 3. juni 2014 20:18
>> To: Adrian Du?a
>> Cc: r-help at r-project.org
>> Subject: Re: [R] detect escape character
>>
>> Hi,
>>
>> R uses \ as a metacharacter, so you need a non-intuitive number of \:
>>
>>
>> mystring <- "Man\\Woman"
>> # \\ is a metacharacter and a \, so it's equivalent to \ in normal text
>> sub("\\\\", "/", mystring)
>>
>>
>> Sarah
>>
>>
>> On Tue, Jun 3, 2014 at 2:03 PM, Adrian Du?a <dusa.adrian at unibuc.ro> wrote:
>> > Dear All,
>> >
>> > I should be knowing this, but not get it right... For a string like this:
>> >
>> > "Man\Woman"
>> >
>> > I would like to detect the escape character "\" and replace it with "/".
>> >
>> > Tried various ways using gsub(), but don't get it right yet. Any suggestion
>> > would be highly welcomed...
>> >
>> > Thank you,
>> > Adrian
>> >
>>


-- 
Sarah Goslee
http://www.functionaldiversity.org


From jdnewmil at dcn.davis.CA.us  Tue Jun  3 20:50:57 2014
From: jdnewmil at dcn.davis.CA.us (Jeff Newmiller)
Date: Tue, 03 Jun 2014 11:50:57 -0700
Subject: [R] detect escape character
In-Reply-To: <CAM_vju=csx6SsiGRTZFfccZJxzjwzT_M4L7xMvg8g+pAD0ejwA@mail.gmail.com>
References: <CAJ=0CtD0ECAFzL9_fKAkfRua4xvME1U67y9G6=3=972gx4vCBQ@mail.gmail.com>
	<CAM_vju=csx6SsiGRTZFfccZJxzjwzT_M4L7xMvg8g+pAD0ejwA@mail.gmail.com>
Message-ID: <adc690ac-2811-4413-bd70-d071738a844c@email.android.com>

With the right mental model, though, it can become intuitive. That is, keep in mind that the R interpreter uses \ as a metacharacter, and so does the regex library. You want to search for a \, which regex thinks is special, so you have to escape it for regex functions (\\). Then, because R thinks \ is special, you have to escape each of those ("\\\\") in your source file to get a pair of backslashes in memory to give to regex functions.

To practice, always think of an opening quote mark as an opportunity watch for backslashes and mentally remove the first one and change the following character to whatever it should be  to picture what is in memory. Use the print function to see how R wants you to toe it in, and use the cat function to see how it looks in memory.
---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                      Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
--------------------------------------------------------------------------- 
Sent from my phone. Please excuse my brevity.

On June 3, 2014 11:18:14 AM PDT, Sarah Goslee <sarah.goslee at gmail.com> wrote:
>Hi,
>
>R uses \ as a metacharacter, so you need a non-intuitive number of \:
>
>
>mystring <- "Man\\Woman"
># \\ is a metacharacter and a \, so it's equivalent to \ in normal text
>sub("\\\\", "/", mystring)
>
>
>Sarah
>
>
>On Tue, Jun 3, 2014 at 2:03 PM, Adrian Du?a <dusa.adrian at unibuc.ro>
>wrote:
>> Dear All,
>>
>> I should be knowing this, but not get it right... For a string like
>this:
>>
>> "Man\Woman"
>>
>> I would like to detect the escape character "\" and replace it with
>"/".
>>
>> Tried various ways using gsub(), but don't get it right yet. Any
>suggestion
>> would be highly welcomed...
>>
>> Thank you,
>> Adrian
>>
>
>-- 
>Sarah Goslee
>http://www.functionaldiversity.org
>
>______________________________________________
>R-help at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From kylepolich at gmail.com  Tue Jun  3 20:31:04 2014
From: kylepolich at gmail.com (kyle polich)
Date: Tue, 3 Jun 2014 11:31:04 -0700
Subject: [R] Star schema
Message-ID: <CAP=rpUqHzbyQ0Zmy=DS1cLb00cL=R7WudFh2frHkscmTsFq8Mw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140603/75f9c195/attachment.pl>

From chrissair at gmx.net  Tue Jun  3 22:19:33 2014
From: chrissair at gmx.net (ChrisR)
Date: Tue, 3 Jun 2014 13:19:33 -0700 (PDT)
Subject: [R] ICL for betamix()
In-Reply-To: <1401222344249-4691328.post@n4.nabble.com>
References: <1401222344249-4691328.post@n4.nabble.com>
Message-ID: <1401826773212-4691671.post@n4.nabble.com>

I found a way to manually calculate the ICL for a betamix() result, using the
entropy.empirical() command from the 'entropy' package. Here is the code:

model=betamix(y~x)
BIC(model)+entropy.empirical(posterior(model))

Cheers,
Chris



--
View this message in context: http://r.789695.n4.nabble.com/ICL-for-betamix-tp4691328p4691671.html
Sent from the R help mailing list archive at Nabble.com.


From sarah.goslee at gmail.com  Tue Jun  3 22:21:28 2014
From: sarah.goslee at gmail.com (Sarah Goslee)
Date: Tue, 3 Jun 2014 16:21:28 -0400
Subject: [R] Star schema
In-Reply-To: <CAP=rpUqHzbyQ0Zmy=DS1cLb00cL=R7WudFh2frHkscmTsFq8Mw@mail.gmail.com>
References: <CAP=rpUqHzbyQ0Zmy=DS1cLb00cL=R7WudFh2frHkscmTsFq8Mw@mail.gmail.com>
Message-ID: <CAM_vju=ATQSy76BqBq-Lqq=KYLxfinME8Foj0Z_AxxZ4nrviBQ@mail.gmail.com>

On Tue, Jun 3, 2014 at 2:31 PM, kyle polich <kylepolich at gmail.com> wrote:
> Are there any libraries for R that would enable the import of data stored
> in star schema?

As I understand it star schema is an organizational concept, not a
file format. How are the data actually stored? In a RDBMS? As csv
files? What are you trying to do with them?

There's no reason R can't import data of pretty much any form, but
this question doesn't contain enough information to actually help you.

Sarah

-- 
Sarah Goslee
http://www.functionaldiversity.org


From jim at bitwrit.com.au  Tue Jun  3 23:10:37 2014
From: jim at bitwrit.com.au (Jim Lemon)
Date: Wed, 04 Jun 2014 07:10:37 +1000
Subject: [R] plot in package psych with function error.bars.by
In-Reply-To: <1401776898895-4691632.post@n4.nabble.com>
References: <1401776898895-4691632.post@n4.nabble.com>
Message-ID: <107834395.A8ZI0oDvek@localhost.localdomain>

On Mon, 2 Jun 2014 11:28:19 PM Tham Tran wrote:
> Hi,
> 
> I have a problem with the function "error.bars.by" in package 
"psych".
> This is the code for example of a graph:
> 
> 
keys.list=list(Agree=c(-1,2:5),Conscientious=c(6:8,-9,-10),Extraversion=c(-1
> 1,-12,13:15),Neuroticism=c(16:20),Openness = 
c(21,-22,23,24,-25))
> keys = make.keys(28,keys.list,item.labels=colnames(bfi))
> scores = score.items(keys,bfi,min=1,max=6)
> require(psych)
> error.bars.by(scores$scores,round(bfi$age/10)*10,by.var=TRUE,
> main="BFI age trends",legend=3,labels=colnames(scores$scores),
> xlab="Age",ylab="Mean item score")
> 
> I need to change the plotting character and line type of the graph 
according
> to the scores (Agree,Conscientious,Extraticism,Openness).
> 
> I have tried with:
> error.bars.by(scores$scores,round(bfi$age/10)*10,by.var=TRUE,
> main="BFI age trends",legend=3,labels=colnames(scores$scores),
> pch=c(1,2,3,4), lty=1
> ,xlab="Age",ylab="Mean item score")
> 
> But there is a problem:
> Error in localWindow(xlim, ylim, log, asp, ...) :  formal argument "pch"
> matched by multiple actual arguments
> 
> Anyone can help me for this problem.

Hi Tham,
When I run your example, I get the following error:

Error in seq.default(clim, -clim, 0.01) : 
  'from' cannot be NA, NaN or infinite
In addition: Warning messages:
1: In qt(1 - alpha/2, group.stats[[g]]$n - 1) : NaNs produced
2: In dt(ln, n - 1) : NaNs produced
3: In qt(alpha/2, n - 1) : NaNs produced

As I don't know what is happening here, I can't do anything about the 
pch problem.

Jim


From iuri at ufrgs.br  Tue Jun  3 23:54:52 2014
From: iuri at ufrgs.br (Iuri Gavronski)
Date: Tue, 3 Jun 2014 18:54:52 -0300
Subject: [R] Multiplicative Heterogeneous DIFFusion (mhdiff) models in R
Message-ID: <CA+YqJQCALww-53AuSkeSTtKRuPP6tBohNmFWJwzZs11Duy3_dg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140603/d76d61a2/attachment.pl>

From r.turner at auckland.ac.nz  Wed Jun  4 00:32:02 2014
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Wed, 04 Jun 2014 10:32:02 +1200
Subject: [R] Code for generating states and observations for HMM
In-Reply-To: <1401787021.65536.YahooMailNeo@web140304.mail.bf1.yahoo.com>
References: <1401787021.65536.YahooMailNeo@web140304.mail.bf1.yahoo.com>
Message-ID: <538E4CE2.4000709@auckland.ac.nz>


You might find it helpful to look at the sim.hmm() function in the 
"hmm.discnp" package, or the simHMM() function in the "HMM" package.

cheers,

Rolf Turner

On 03/06/14 21:17, Bukar Alhaji wrote:
> Dear R buddies,
>
> Sorry for this silly question but am new to R. I am trying to
> generate states and observations to be use for Bayesian Hidden Markov
> Models analysis where i intend using mixture of Poisson and Negative
> binomial as emulsion. I use the code below to generate states and
> observations for homogeneous HMM . I would like to know if i
> correctly generated the data.
>
>
> pii = c(0.6,0.4)
> p1 <- matrix(c(0.8,0.2,0.3,0.7),byrow=TRUE,nrow=2)
>
>
>      NUM = 200
>      theta<-rep(0, NUM)
>      x<-rep(0, NUM)
>
>      ## generating the states
>      # initial state
>      theta[1]<-rbinom(1, 1, pii[1])
>      # other states
>      for (i in 2:NUM)
>      {
>        if (theta[i-1]==0)
>          theta[i]<-rbinom(1, 1, p1[1, 1])
>        else
>          theta[i]<-rbinom(1, 1, p1[2, 1])
>      }
>
>      ## generating the observations
>
>      for (i in 1:NUM)
>      {
>        if (theta[i]==0)
>        {
>          x[i]<-rpois(1, 5)
>        }
>        else
>        {
>          x[i]<-rnbinom(1, 3, 0.3)
>        }
>      }
>      data<-list(s=theta, o=x, p1 = p1, pii = pii)


From shidaxia at yahoo.com  Wed Jun  4 01:47:58 2014
From: shidaxia at yahoo.com (Shi, Tao)
Date: Tue, 3 Jun 2014 16:47:58 -0700 (PDT)
Subject: [R] tab auto-fill and arrow keys are not working in R on a linux
	cluster
Message-ID: <1401839278.65398.YahooMailNeo@web124706.mail.ne1.yahoo.com>

Hi List,

We have R 3.1.0 installed on the head node of our linux cluster, but the tab auto-complete and the arrow keys are not working.? When I was trying to use the up/down arrow key to scroll through the old command history I got something like this.? Any ideas on what's going on here?

Many thanks!

Tao


> sessionInfo()
R version 3.1.0 (2014-04-10)
Platform: x86_64-unknown-linux-gnu (64-bit)

locale:
?[1] LC_CTYPE=en_US.iso885915?????? LC_NUMERIC=C
?[3] LC_TIME=en_US.iso885915??????? LC_COLLATE=en_US.iso885915
?[5] LC_MONETARY=en_US.iso885915??? LC_MESSAGES=en_US.iso885915
?[7] LC_PAPER=en_US.iso885915?????? LC_NAME=C
?[9] LC_ADDRESS=C?????????????????? LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_US.iso885915 LC_IDENTIFICATION=C

attached base packages:
[1] stats???? graphics? grDevices utils???? datasets? methods?? base
> ^[[A^[[A^[[A^[[A
Error: unexpected input in "


From jdnewmil at dcn.davis.CA.us  Wed Jun  4 02:22:11 2014
From: jdnewmil at dcn.davis.CA.us (Jeff Newmiller)
Date: Tue, 03 Jun 2014 17:22:11 -0700
Subject: [R] tab auto-fill and arrow keys are not working in R on a
	linux	cluster
In-Reply-To: <1401839278.65398.YahooMailNeo@web124706.mail.ne1.yahoo.com>
References: <1401839278.65398.YahooMailNeo@web124706.mail.ne1.yahoo.com>
Message-ID: <6f36b5f1-4fce-4cc7-9011-ff0c2f4d789b@email.android.com>

FAQ 7.20
---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                      Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
--------------------------------------------------------------------------- 
Sent from my phone. Please excuse my brevity.

On June 3, 2014 4:47:58 PM PDT, "Shi, Tao" <shidaxia at yahoo.com> wrote:
>Hi List,
>
>We have R 3.1.0 installed on the head node of our linux cluster, but
>the tab auto-complete and the arrow keys are not working.? When I was
>trying to use the up/down arrow key to scroll through the old command
>history I got something like this.? Any ideas on what's going on here?
>
>Many thanks!
>
>Tao
>
>
>> sessionInfo()
>R version 3.1.0 (2014-04-10)
>Platform: x86_64-unknown-linux-gnu (64-bit)
>
>locale:
>?[1] LC_CTYPE=en_US.iso885915?????? LC_NUMERIC=C
>?[3] LC_TIME=en_US.iso885915??????? LC_COLLATE=en_US.iso885915
>?[5] LC_MONETARY=en_US.iso885915??? LC_MESSAGES=en_US.iso885915
>?[7] LC_PAPER=en_US.iso885915?????? LC_NAME=C
>?[9] LC_ADDRESS=C?????????????????? LC_TELEPHONE=C
>[11] LC_MEASUREMENT=en_US.iso885915 LC_IDENTIFICATION=C
>
>attached base packages:
>[1] stats???? graphics? grDevices utils???? datasets? methods?? base
>> ^[[A^[[A^[[A^[[A
>Error: unexpected input in "
>
>______________________________________________
>R-help at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From istazahn at gmail.com  Wed Jun  4 02:35:58 2014
From: istazahn at gmail.com (Ista Zahn)
Date: Tue, 3 Jun 2014 20:35:58 -0400
Subject: [R] R-memory: clearing memory within a function?
In-Reply-To: <DUB111-W81881EC9226E2A4FB1273DBC230@phx.gbl>
References: <DUB111-W81881EC9226E2A4FB1273DBC230@phx.gbl>
Message-ID: <CA+vqiLGiY+p7xFnhONsjWVUR8LFj+cfvkXThRaoOJ8XzacBBvw@mail.gmail.com>

Hi Frank,

I don't think it is possible to state a general rule about which will
be faster. For example this

system.time({
    for(i in 1:10000) {
        x <- matrix(rnorm(10), ncol = 10)
        y <- mean(x)
        #rm(x)
        z <- matrix(runif(10), ncol = 100)
        #rm(z)
    }
})

gets a lot slower if I uncomment the "rm()" lines, but this

system.time({
    for(i in 1:5) {
        x <- matrix(rnorm(10000000), ncol = 10)
        y <- mean(x)
        rm(x)
        z <- matrix(runif(10000000), ncol = 100)
        rm(z)
    }
})

is slightly faster than it would be without the rm() lines. I think
you'll have to run a smaller version of the simulation both ways and
see which is faster.

Best,
Ista

On Tue, Jun 3, 2014 at 10:05 AM, Frank van Berkum
<frankieboytje at hotmail.com> wrote:
> Dear R-users,
>
> I'm working on a project in which many simulations have to be performed within functions. The simulations are quite time consuming. I thought that in general an empty memory is better for speed performance than a full memory.
>
> If I call a function which performs simulations within the function, than the memory will temporarily increase (while the function is executed and objects are created within the function), but as soon as the function is finished, temporarily objects are flushed. It seems as if it might be beneficial for speed performance to clear objects from the memory within the function if they are no longer needed in the remainder of the function. Does anyone know whether this is actually the case?
>
> Thanks in advance!
>
> Frank
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From dwinsemius at comcast.net  Wed Jun  4 02:44:33 2014
From: dwinsemius at comcast.net (David Winsemius)
Date: Tue, 3 Jun 2014 17:44:33 -0700
Subject: [R] detect escape character
In-Reply-To: <CAJ=0CtD0ECAFzL9_fKAkfRua4xvME1U67y9G6=3=972gx4vCBQ@mail.gmail.com>
References: <CAJ=0CtD0ECAFzL9_fKAkfRua4xvME1U67y9G6=3=972gx4vCBQ@mail.gmail.com>
Message-ID: <BD7ED9E9-98BE-427E-9599-659221283155@comcast.net>


On Jun 3, 2014, at 11:03 AM, Adrian Du?a wrote:

> Dear All,
> 
> I should be knowing this, but not get it right...

I'm a little surprised to see you ask this, too, but we each have lacunae in our R knowledge, so I hope this helps:

> s <- scan(what="")  # Assuming you were asking about items coming in from ASCII data files
1: Man\Woman
2: 
Read 1 item
> s
[1] "Man\\Woman"
> gsub("\\", "/", s)
Error in gsub("\\", "/", s) : 
  invalid regular expression '\', reason 'Trailing backslash'

> gsub("\\\\", "/", s)
[1] "Man/Woman"

_Each_ of the backslashes in what you might have thought would succeed ("\\") also needed their own backslash. The first doubled backslash becomes a real "escape"-character in the pattern and the second doubled backslash becomes an ordinary ASCII backslash character.

-- 
David.

> For a string like this:
> 
> "Man\Woman"
> 
> I would like to detect the escape character "\" and replace it with "/".
> 
> Tried various ways using gsub(), but don't get it right yet. Any suggestion
> would be highly welcomed...
> 
> Thank you,
> Adrian
> 
> -- 
> Adrian Dusa
> University of Bucharest
> Romanian Social Data Archive
> 1, Schitu Magureanu Bd.
> 050025 Bucharest sector 5
> Romania
> Tel.:+40 21 3126618 \
>        +40 21 3120210 / int.101
> Fax: +40 21 3158391
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

David Winsemius
Alameda, CA, USA


From hb at biostat.ucsf.edu  Wed Jun  4 03:21:05 2014
From: hb at biostat.ucsf.edu (Henrik Bengtsson)
Date: Tue, 3 Jun 2014 18:21:05 -0700
Subject: [R] R-memory: clearing memory within a function?
In-Reply-To: <CA+vqiLGiY+p7xFnhONsjWVUR8LFj+cfvkXThRaoOJ8XzacBBvw@mail.gmail.com>
References: <DUB111-W81881EC9226E2A4FB1273DBC230@phx.gbl>
	<CA+vqiLGiY+p7xFnhONsjWVUR8LFj+cfvkXThRaoOJ8XzacBBvw@mail.gmail.com>
Message-ID: <CAFDcVCSwZrLuWNzeuFNPZu0++42BSXe_i-=k_df58GCYCi4hLg@mail.gmail.com>

See blog post 'Speed trick: Assigning large object NULL is much faster
than using rm()!':

  http://www.jottr.org/2013/05/speed-trick-assigning-large-object-null.html

/Henrik

On Tue, Jun 3, 2014 at 5:35 PM, Ista Zahn <istazahn at gmail.com> wrote:
> Hi Frank,
>
> I don't think it is possible to state a general rule about which will
> be faster. For example this
>
> system.time({
>     for(i in 1:10000) {
>         x <- matrix(rnorm(10), ncol = 10)
>         y <- mean(x)
>         #rm(x)
>         z <- matrix(runif(10), ncol = 100)
>         #rm(z)
>     }
> })
>
> gets a lot slower if I uncomment the "rm()" lines, but this
>
> system.time({
>     for(i in 1:5) {
>         x <- matrix(rnorm(10000000), ncol = 10)
>         y <- mean(x)
>         rm(x)
>         z <- matrix(runif(10000000), ncol = 100)
>         rm(z)
>     }
> })
>
> is slightly faster than it would be without the rm() lines. I think
> you'll have to run a smaller version of the simulation both ways and
> see which is faster.
>
> Best,
> Ista
>
> On Tue, Jun 3, 2014 at 10:05 AM, Frank van Berkum
> <frankieboytje at hotmail.com> wrote:
>> Dear R-users,
>>
>> I'm working on a project in which many simulations have to be performed within functions. The simulations are quite time consuming. I thought that in general an empty memory is better for speed performance than a full memory.
>>
>> If I call a function which performs simulations within the function, than the memory will temporarily increase (while the function is executed and objects are created within the function), but as soon as the function is finished, temporarily objects are flushed. It seems as if it might be beneficial for speed performance to clear objects from the memory within the function if they are no longer needed in the remainder of the function. Does anyone know whether this is actually the case?
>>
>> Thanks in advance!
>>
>> Frank
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From clivelists at googlemail.com  Wed Jun  4 04:10:21 2014
From: clivelists at googlemail.com (Clive Nicholas)
Date: Wed, 4 Jun 2014 03:10:21 +0100
Subject: [R] Plotting issues with -par(mfrow=c(r,c))- after -boot-
In-Reply-To: <f7f4e8ef-9aeb-4b8a-8d82-76c08e0985fa@email.android.com>
References: <CAHs5aTgoYRvLKCm0yU=B=Ed2qVEtdLUt_EGepLBS5gy45b9JSQ@mail.gmail.com>
	<f7f4e8ef-9aeb-4b8a-8d82-76c08e0985fa@email.android.com>
Message-ID: <CAHs5aTj_XsgHDbUaXCYJ9wA9n4GxNLaOxt5u419=QFWJOk47UA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140604/2977f14a/attachment.pl>

From jdnewmil at dcn.davis.CA.us  Wed Jun  4 04:22:17 2014
From: jdnewmil at dcn.davis.CA.us (Jeff Newmiller)
Date: Tue, 03 Jun 2014 19:22:17 -0700
Subject: [R] Plotting issues with -par(mfrow=c(r,c))- after -boot-
In-Reply-To: <CAHs5aTj_XsgHDbUaXCYJ9wA9n4GxNLaOxt5u419=QFWJOk47UA@mail.gmail.com>
References: <CAHs5aTgoYRvLKCm0yU=B=Ed2qVEtdLUt_EGepLBS5gy45b9JSQ@mail.gmail.com>
	<f7f4e8ef-9aeb-4b8a-8d82-76c08e0985fa@email.android.com>
	<CAHs5aTj_XsgHDbUaXCYJ9wA9n4GxNLaOxt5u419=QFWJOk47UA@mail.gmail.com>
Message-ID: <749e86d0-e56c-4488-8118-6936b952eb68@email.android.com>

No, because I have never used Boot, or tried to use plot.boot... I just know that there are three main styles of plotting in R and the manual pages are usually informative on which is in use. I am glad you figured out a better solution though, and thanks for reporting back.
---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                      Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
--------------------------------------------------------------------------- 
Sent from my phone. Please excuse my brevity.

On June 3, 2014 7:10:21 PM PDT, Clive Nicholas <clivelists at googlemail.com> wrote:
>On 1 June 2014 22:07, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>
>Read ?plot.boot, in particular the Side Effects section. Not a very
>> friendly function... you will have to modify it if you wish to
>proceed.
>>
>
>I guess you were expecting me to come back at some stage to say that
>I'd
>figured out the -Boot- package of routines from the -car- library does
>exactly what I'm looking for and more, weren't you?
>
>Fox and Weisberg's 17-page 'manual' on -Boot- from 2012 is a very good
>guide to its usage and it turns out that -Boot- actually delivers
>better
>graphics than those fired up by -boot-.
>
>C


From spencer.graves at structuremonitoring.com  Wed Jun  4 05:07:50 2014
From: spencer.graves at structuremonitoring.com (Spencer Graves)
Date: Tue, 03 Jun 2014 20:07:50 -0700
Subject: [R] as.character.call?
Message-ID: <538E8D86.1070402@structuremonitoring.com>

       How can I get a call object as a character string?


Example:

 > cl <- quote(round(10.5))
 > str(cl)
  language round(10.5)
 > as.character(cl)
[1] "round" "10.5"


       How can I get "round(10.5)"?


        I can get this answer for this toy problem with 
paste0(paste(as.character(cl), collapse='('), ')').  However, that's not 
a general solution.


       Thanks,
       Spencer


From hb at biostat.ucsf.edu  Wed Jun  4 05:13:58 2014
From: hb at biostat.ucsf.edu (Henrik Bengtsson)
Date: Tue, 3 Jun 2014 20:13:58 -0700
Subject: [R] as.character.call?
In-Reply-To: <538E8D86.1070402@structuremonitoring.com>
References: <538E8D86.1070402@structuremonitoring.com>
Message-ID: <CAFDcVCSgUZc8hA8mj=xAtr2P2WGoVLZiEpMDCreSHOQt0TdKrA@mail.gmail.com>

> cl <- quote(round(10.5))
> deparse(cl)
[1] "round(10.5)"

/Henrik

On Tue, Jun 3, 2014 at 8:07 PM, Spencer Graves
<spencer.graves at structuremonitoring.com> wrote:
>       How can I get a call object as a character string?
>
>
> Example:
>
>> cl <- quote(round(10.5))
>> str(cl)
>  language round(10.5)
>> as.character(cl)
> [1] "round" "10.5"
>
>
>       How can I get "round(10.5)"?
>
>
>        I can get this answer for this toy problem with
> paste0(paste(as.character(cl), collapse='('), ')').  However, that's not a
> general solution.
>
>
>       Thanks,
>       Spencer
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From spencer.graves at structuremonitoring.com  Wed Jun  4 05:26:01 2014
From: spencer.graves at structuremonitoring.com (Spencer Graves)
Date: Tue, 03 Jun 2014 20:26:01 -0700
Subject: [R] as.character.call?
In-Reply-To: <CAFDcVCSgUZc8hA8mj=xAtr2P2WGoVLZiEpMDCreSHOQt0TdKrA@mail.gmail.com>
References: <538E8D86.1070402@structuremonitoring.com>
	<CAFDcVCSgUZc8hA8mj=xAtr2P2WGoVLZiEpMDCreSHOQt0TdKrA@mail.gmail.com>
Message-ID: <538E91C9.3030406@structuremonitoring.com>

Hi, Henrik:  Thanks.  I should probably know that by now ... but it 
didn't come to mind just now.  Thanks again.  Spencer.


On 6/3/2014 8:13 PM, Henrik Bengtsson wrote:
>> cl <- quote(round(10.5))
>> deparse(cl)
> [1] "round(10.5)"
>
> /Henrik
>
> On Tue, Jun 3, 2014 at 8:07 PM, Spencer Graves
> <spencer.graves at structuremonitoring.com> wrote:
>>        How can I get a call object as a character string?
>>
>>
>> Example:
>>
>>> cl <- quote(round(10.5))
>>> str(cl)
>>   language round(10.5)
>>> as.character(cl)
>> [1] "round" "10.5"
>>
>>
>>        How can I get "round(10.5)"?
>>
>>
>>         I can get this answer for this toy problem with
>> paste0(paste(as.character(cl), collapse='('), ')').  However, that's not a
>> general solution.
>>
>>
>>        Thanks,
>>        Spencer
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


-- 
Spencer Graves, PE, PhD
President and Chief Technology Officer
Structure Inspection and Monitoring, Inc.
751 Emerson Ct.
San Jos?, CA 95126
ph:  408-655-4567
web:  www.structuremonitoring.com


From Jonas.Ulbrich at ruhr-uni-bochum.de  Tue Jun  3 23:46:03 2014
From: Jonas.Ulbrich at ruhr-uni-bochum.de (Jonas Ulbrich)
Date: Tue, 03 Jun 2014 23:46:03 +0200
Subject: [R] Extraction of forecats from VAR prediction
Message-ID: <e294454f31a7551ab88159b69d7ae7fc@mpx2.rz.ruhr-uni-bochum.de>

Hi,

my question is the following one:

predict(VAR(y,p=1,type="none"),n.ahead=500)

How can I extract the forecasts of this prediction? y is a dataset of 
four parameters with 500 values each.One parameter for instance is 
lambda the head looks like this:

$lambda
             fcst         lower     upper         CI
   [1,] 0.3228936  0.2506636043 0.3951235 0.07222995

Thank you in advance.


From ripley at stats.ox.ac.uk  Wed Jun  4 07:33:15 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 04 Jun 2014 06:33:15 +0100
Subject: [R] R-memory: clearing memory within a function?
In-Reply-To: <CA+vqiLGiY+p7xFnhONsjWVUR8LFj+cfvkXThRaoOJ8XzacBBvw@mail.gmail.com>
References: <DUB111-W81881EC9226E2A4FB1273DBC230@phx.gbl>
	<CA+vqiLGiY+p7xFnhONsjWVUR8LFj+cfvkXThRaoOJ8XzacBBvw@mail.gmail.com>
Message-ID: <538EAF9B.4080409@stats.ox.ac.uk>

On 04/06/2014 01:35, Ista Zahn wrote:
> Hi Frank,
>
> I don't think it is possible to state a general rule about which will
> be faster. For example this
>
> system.time({
>      for(i in 1:10000) {
>          x <- matrix(rnorm(10), ncol = 10)
>          y <- mean(x)
>          #rm(x)
>          z <- matrix(runif(10), ncol = 100)
>          #rm(z)
>      }
> })
>
> gets a lot slower if I uncomment the "rm()" lines, but this
>
> system.time({
>      for(i in 1:5) {
>          x <- matrix(rnorm(10000000), ncol = 10)
>          y <- mean(x)
>          rm(x)
>          z <- matrix(runif(10000000), ncol = 100)
>          rm(z)
>      }
> })
>
> is slightly faster than it would be without the rm() lines. I think
> you'll have to run a smaller version of the simulation both ways and
> see which is faster.

Unfortunately, you cannot generalize from smaller examples.  One issue 
is that rm(x) does not actually remove the object: that is done at the 
next garbage collection and the frequency of GCs varies with the object 
sizes.

The one place I have encountered benefits is on the benighted 32-bit OS 
with a 2GB per-process address space.  There fragmentation of the 
address space can be a serious issue with tasks using at least a third 
of the address space, leading to frequent GCs and slow allocation (as 
the allocator searches for a large enough contiguous block).

But then we were not told the 'at a minimum' information requested by 
the posting guide.

>
> Best,
> Ista
>
> On Tue, Jun 3, 2014 at 10:05 AM, Frank van Berkum
> <frankieboytje at hotmail.com> wrote:
>> Dear R-users,
>>
>> I'm working on a project in which many simulations have to be performed within functions. The simulations are quite time consuming. I thought that in general an empty memory is better for speed performance than a full memory.
>>
>> If I call a function which performs simulations within the function, than the memory will temporarily increase (while the function is executed and objects are created within the function), but as soon as the function is finished, temporarily objects are flushed. It seems as if it might be beneficial for speed performance to clear objects from the memory within the function if they are no longer needed in the remainder of the function. Does anyone know whether this is actually the case?
>>
>> Thanks in advance!
>>
>> Frank

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From petr.pikal at precheza.cz  Wed Jun  4 09:12:51 2014
From: petr.pikal at precheza.cz (PIKAL Petr)
Date: Wed, 4 Jun 2014 07:12:51 +0000
Subject: [R] Loop Autoregression
In-Reply-To: <aef5b4821b9ca7565184bd1e8ffe2827@mpx2.rz.ruhr-uni-bochum.de>
References: <7ee68d2374d5d0aeb4b3359b95891626@mpx2.rz.ruhr-uni-bochum.de>
	<6E8D8DFDE5FA5D4ABCB8508389D1BF8802BD2BBB@SRVEXCHMBX.precheza.cz>
	<aef5b4821b9ca7565184bd1e8ffe2827@mpx2.rz.ruhr-uni-bochum.de>
Message-ID: <6E8D8DFDE5FA5D4ABCB8508389D1BF8802BD42F2@SRVEXCHMBX.precheza.cz>

Hi Jonas

Actually I am a poor chemist and so I do not know what you are talkin' about. On stackoverflow I found that the error is probably due to wrong format of NSSParameter which probably is data frame and it shall be xts.

Maybe others can help you more but I believe they will expect more info from your side (at least what object is NSSParameter).

Regards
Petr


> -----Original Message-----
> From: Jonas Ulbrich [mailto:Jonas.Ulbrich at ruhr-uni-bochum.de]
> Sent: Tuesday, June 03, 2014 3:02 PM
> To: PIKAL Petr
> Subject: RE: [R] Loop Autoregression
>
>
> Dear Petr,
>
> thank you for your rapid answer. The problem is solved.
>
> My second and last question is as follows:
>
>
> I use the yield curve package and I want to calculate the fitted yields
> via the Svensson approach.
> The I have already calculated the six required parameters. At first I
> read them in from a CSV-file.
> NSSParameter<-
> (read.csv("C:/Users/admin/Desktop/Universit?t/SeminarinFinance/R/Parame
> terSvensson.csv",sep=";",dec=".",header=TRUE)
>
> Now I want to plug them in in the function.
> Srates(NSSParameter,maturity,whichRate = "Spot").
>
> NSSParameter is defined as mentioned above looks like for 500 values:
>
> beta_0    beta_1       beta_2     beta_3      tau1     tau2
>    1 3.824276 -3.726540 -1.878026723  -3.856153 1.1617407 1.672910
>    2 3.786777 -3.688137 -1.929259408  -3.780010 1.1617407 1.672910
>
> Maturity is maturity<-c(1/12,3/12,6/12,1,2,3,5,7,10,20,30).
> Spot is the sort of interest rate I want to determine.
>
> The error request I receive now is: Error in hasTsp(x) : invalid time
> series parameters specified. How fix this concrete case? I have not
> found an example to that.
>
> Best Regards Jonas

________________________________
Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou ur?eny pouze jeho adres?t?m.
Jestli?e jste obdr?el(a) tento e-mail omylem, informujte laskav? neprodlen? jeho odes?latele. Obsah tohoto emailu i s p??lohami a jeho kopie vyma?te ze sv?ho syst?mu.
Nejste-li zam??len?m adres?tem tohoto emailu, nejste opr?vn?ni tento email jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu zp?sobenou modifikacemi ?i zpo?d?n?m p?enosu e-mailu.

V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
- vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o uzav?en? smlouvy, a to z jak?hokoliv d?vodu i bez uveden? d?vodu.
- a obsahuje-li nab?dku, je adres?t opr?vn?n nab?dku bezodkladn? p?ijmout; Odes?latel tohoto e-mailu (nab?dky) vylu?uje p?ijet? nab?dky ze strany p??jemce s dodatkem ?i odchylkou.
- trv? odes?latel na tom, ?e p??slu?n? smlouva je uzav?ena teprve v?slovn?m dosa?en?m shody na v?ech jej?ch n?le?itostech.
- odes?latel tohoto emailu informuje, ?e nen? opr?vn?n uzav?rat za spole?nost ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn? zmocn?n nebo p?semn? pov??en a takov? pov??en? nebo pln? moc byly adres?tovi tohoto emailu p??padn? osob?, kterou adres?t zastupuje, p?edlo?eny nebo jejich existence je adres?tovi ?i osob? j?m zastoupen? zn?m?.

This e-mail and any documents attached to it may be confidential and are intended only for its intended recipients.
If you received this e-mail by mistake, please immediately inform its sender. Delete the contents of this e-mail with all attachments and its copies from your system.
If you are not the intended recipient of this e-mail, you are not authorized to use, disseminate, copy or disclose this e-mail in any manner.
The sender of this e-mail shall not be liable for any possible damage caused by modifications of the e-mail or by delay with transfer of the email.

In case that this e-mail forms part of business dealings:
- the sender reserves the right to end negotiations about entering into a contract in any time, for any reason, and without stating any reasoning.
- if the e-mail contains an offer, the recipient is entitled to immediately accept such offer; The sender of this e-mail (offer) excludes any acceptance of the offer on the part of the recipient containing any amendment or variation.
- the sender insists on that the respective contract is concluded only upon an express mutual agreement on all its aspects.
- the sender of this e-mail informs that he/she is not authorized to enter into any contracts on behalf of the company except for cases in which he/she is expressly authorized to do so in writing, and such authorization or power of attorney is submitted to the recipient or the person represented by the recipient, or the existence of such authorization is known to the recipient of the person represented by the recipient.

From aurore.desgroux at rennes.inra.fr  Wed Jun  4 09:18:37 2014
From: aurore.desgroux at rennes.inra.fr (adesgroux)
Date: Wed, 4 Jun 2014 00:18:37 -0700 (PDT)
Subject: [R] Error clmm(){ordinal}
In-Reply-To: <1401710397402-4691592.post@n4.nabble.com>
References: <1401710397402-4691592.post@n4.nabble.com>
Message-ID: <1401866317088-4691693.post@n4.nabble.com>

Dear Rune,

Thanks a lot for your comment!
I tried with "Location" as a fixed-effect and clmm() ran! It take quiet a
long time but I have approximatively 67000 observations in my datatable so I
guess it's quiet normal!

I want to run function Anova{car} on Modele but it gave my another error :
>Anova(Modele)
/Error in eval(expr, envir, enclos) : object 'RRI' not found/

any idea?
Thanks again

Aurore



--
View this message in context: http://r.789695.n4.nabble.com/Error-clmm-ordinal-tp4691592p4691693.html
Sent from the R help mailing list archive at Nabble.com.


From rune.haubo at gmail.com  Wed Jun  4 10:21:37 2014
From: rune.haubo at gmail.com (Rune Haubo)
Date: Wed, 4 Jun 2014 10:21:37 +0200
Subject: [R] Error clmm(){ordinal}
In-Reply-To: <1401866317088-4691693.post@n4.nabble.com>
References: <1401710397402-4691592.post@n4.nabble.com>
	<1401866317088-4691693.post@n4.nabble.com>
Message-ID: <CAG_uk92Oo1ZZaHStd+Dy8KpTnQBVN8JqC922Mc1nXDkMh3io9g@mail.gmail.com>

Aurore,

I don't know if car::Anova is able/should be able to produce anova
tables for clmm objects; I usually use drop1() (and sometimes add1) to
test terms in CLMMS:

> library(ordinal)
> fm1 <- clmm(rating ~ temp + contact + (1|judge), data=wine)
> drop1(fm1, test="Chi")
Single term deletions

Model:
rating ~ temp + contact + (1 | judge)
        Df    AIC    LRT  Pr(>Chi)
<none>     177.13
temp     1 209.59 34.464 4.343e-09 ***
contact  1 189.48 14.347  0.000152 ***
---
Signif. codes:  0 ?***? 0.001 ?**? 0.01 ?*? 0.05 ?.? 0.1 ? ? 1

Here you get the more accurate likelihood ratio tests instead of the
faster and more convenient Wald tests that (if I recall correctly)
car::Anova can provide.

HTH,
Rune


On 4 June 2014 09:18, adesgroux <aurore.desgroux at rennes.inra.fr> wrote:
> Dear Rune,
>
> Thanks a lot for your comment!
> I tried with "Location" as a fixed-effect and clmm() ran! It take quiet a
> long time but I have approximatively 67000 observations in my datatable so I
> guess it's quiet normal!
>
> I want to run function Anova{car} on Modele but it gave my another error :
>>Anova(Modele)
> /Error in eval(expr, envir, enclos) : object 'RRI' not found/
>
> any idea?
> Thanks again
>
> Aurore
>
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/Error-clmm-ordinal-tp4691592p4691693.html
> Sent from the R help mailing list archive at Nabble.com.
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From petr.pikal at precheza.cz  Wed Jun  4 10:57:37 2014
From: petr.pikal at precheza.cz (PIKAL Petr)
Date: Wed, 4 Jun 2014 08:57:37 +0000
Subject: [R] Loop Autoregression
In-Reply-To: <da17df05203723c5baf1f6e3bd9b421d@mpx2.rz.ruhr-uni-bochum.de>
References: <7ee68d2374d5d0aeb4b3359b95891626@mpx2.rz.ruhr-uni-bochum.de>
	<6E8D8DFDE5FA5D4ABCB8508389D1BF8802BD2BBB@SRVEXCHMBX.precheza.cz>
	<aef5b4821b9ca7565184bd1e8ffe2827@mpx2.rz.ruhr-uni-bochum.de>
	<6E8D8DFDE5FA5D4ABCB8508389D1BF8802BD42F2@SRVEXCHMBX.precheza.cz>
	<da17df05203723c5baf1f6e3bd9b421d@mpx2.rz.ruhr-uni-bochum.de>
Message-ID: <6E8D8DFDE5FA5D4ABCB8508389D1BF8802BD4381@SRVEXCHMBX.precheza.cz>

Hi

I am not sure if Srates is a function I found in R-Forge. If yes, NSSParameter has to be time series as there is command

time(x) in the function which, in case of data frame, gives this error.

> time(sadr)
Error in hasTsp(x) : invalid time series parameters specified

Regards
Petr

> -----Original Message-----
> From: Jonas Ulbrich [mailto:Jonas.Ulbrich at ruhr-uni-bochum.de]
> Sent: Wednesday, June 04, 2014 10:48 AM
> To: PIKAL Petr
> Subject: Re: [R] Loop Autoregression
>
> Thanks for the answer. The class of NSS Parameter is data frame.
>
> On 2014-06-04 09:12, PIKAL Petr wrote:
> > Hi Jonas
> >
> > Actually I am a poor chemist and so I do not know what you are
> talkin'
> > about. On stackoverflow I found that the error is probably due to
> > wrong format of NSSParameter which probably is data frame and it
> shall
> > be xts.
> >
> > Maybe others can help you more but I believe they will expect more
> > info from your side (at least what object is NSSParameter).
> >
> > Regards
> > Petr
> >
> >
> >> -----Original Message-----
> >> From: Jonas Ulbrich [mailto:Jonas.Ulbrich at ruhr-uni-bochum.de]
> >> Sent: Tuesday, June 03, 2014 3:02 PM
> >> To: PIKAL Petr
> >> Subject: RE: [R] Loop Autoregression
> >>
> >>
> >> Dear Petr,
> >>
> >> thank you for your rapid answer. The problem is solved.
> >>
> >> My second and last question is as follows:
> >>
> >>
> >> I use the yield curve package and I want to calculate the fitted
> >> yields via the Svensson approach.
> >> The I have already calculated the six required parameters. At first
> I
> >> read them in from a CSV-file.
> >> NSSParameter<-
> >>
> >>
> (read.csv("C:/Users/admin/Desktop/Universit?t/SeminarinFinance/R/Para
> >> me
> >> terSvensson.csv",sep=";",dec=".",header=TRUE)
> >>
> >> Now I want to plug them in in the function.
> >> Srates(NSSParameter,maturity,whichRate = "Spot").
> >>
> >> NSSParameter is defined as mentioned above looks like for 500
> >> values:
> >>
> >> beta_0    beta_1       beta_2     beta_3      tau1     tau2
> >>    1 3.824276 -3.726540 -1.878026723  -3.856153 1.1617407 1.672910
> >>    2 3.786777 -3.688137 -1.929259408  -3.780010 1.1617407 1.672910
> >>
> >> Maturity is maturity<-c(1/12,3/12,6/12,1,2,3,5,7,10,20,30).
> >> Spot is the sort of interest rate I want to determine.
> >>
> >> The error request I receive now is: Error in hasTsp(x) : invalid
> time
> >> series parameters specified. How fix this concrete case? I have not
> >> found an example to that.
> >>
> >> Best Regards Jonas
> >
> > ________________________________
> > Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a
> > jsou ur?eny pouze jeho adres?t?m.
> > Jestli?e jste obdr?el(a) tento e-mail omylem, informujte laskav?
> > neprodlen? jeho odes?latele. Obsah tohoto emailu i s p??lohami a jeho
> > kopie vyma?te ze sv?ho syst?mu.
> > Nejste-li zam??len?m adres?tem tohoto emailu, nejste opr?vn?ni tento
> > email jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
> > Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu zp?sobenou
> > modifikacemi ?i zpo?d?n?m p?enosu e-mailu.
> >
> > V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
> > - vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o uzav?en?
> > smlouvy, a to z jak?hokoliv d?vodu i bez uveden? d?vodu.
> > - a obsahuje-li nab?dku, je adres?t opr?vn?n nab?dku bezodkladn?
> > p?ijmout; Odes?latel tohoto e-mailu (nab?dky) vylu?uje p?ijet?
> nab?dky
> > ze strany p??jemce s dodatkem ?i odchylkou.
> > - trv? odes?latel na tom, ?e p??slu?n? smlouva je uzav?ena teprve
> > v?slovn?m dosa?en?m shody na v?ech jej?ch n?le?itostech.
> > - odes?latel tohoto emailu informuje, ?e nen? opr?vn?n uzav?rat za
> > spole?nost ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn?
> > zmocn?n nebo p?semn? pov??en a takov? pov??en? nebo pln? moc byly
> > adres?tovi tohoto emailu p??padn? osob?, kterou adres?t zastupuje,
> > p?edlo?eny nebo jejich existence je adres?tovi ?i osob? j?m
> zastoupen?
> > zn?m?.
> >
> > This e-mail and any documents attached to it may be confidential and
> > are intended only for its intended recipients.
> > If you received this e-mail by mistake, please immediately inform its
> > sender. Delete the contents of this e-mail with all attachments and
> > its copies from your system.
> > If you are not the intended recipient of this e-mail, you are not
> > authorized to use, disseminate, copy or disclose this e-mail in any
> > manner.
> > The sender of this e-mail shall not be liable for any possible damage
> > caused by modifications of the e-mail or by delay with transfer of
> the
> > email.
> >
> > In case that this e-mail forms part of business dealings:
> > - the sender reserves the right to end negotiations about entering
> > into a contract in any time, for any reason, and without stating any
> > reasoning.
> > - if the e-mail contains an offer, the recipient is entitled to
> > immediately accept such offer; The sender of this e-mail (offer)
> > excludes any acceptance of the offer on the part of the recipient
> > containing any amendment or variation.
> > - the sender insists on that the respective contract is concluded
> only
> > upon an express mutual agreement on all its aspects.
> > - the sender of this e-mail informs that he/she is not authorized to
> > enter into any contracts on behalf of the company except for cases in
> > which he/she is expressly authorized to do so in writing, and such
> > authorization or power of attorney is submitted to the recipient or
> > the person represented by the recipient, or the existence of such
> > authorization is known to the recipient of the person represented by
> > the recipient.
> > ______________________________________________
> > R-help at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.

________________________________
Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou ur?eny pouze jeho adres?t?m.
Jestli?e jste obdr?el(a) tento e-mail omylem, informujte laskav? neprodlen? jeho odes?latele. Obsah tohoto emailu i s p??lohami a jeho kopie vyma?te ze sv?ho syst?mu.
Nejste-li zam??len?m adres?tem tohoto emailu, nejste opr?vn?ni tento email jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu zp?sobenou modifikacemi ?i zpo?d?n?m p?enosu e-mailu.

V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
- vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o uzav?en? smlouvy, a to z jak?hokoliv d?vodu i bez uveden? d?vodu.
- a obsahuje-li nab?dku, je adres?t opr?vn?n nab?dku bezodkladn? p?ijmout; Odes?latel tohoto e-mailu (nab?dky) vylu?uje p?ijet? nab?dky ze strany p??jemce s dodatkem ?i odchylkou.
- trv? odes?latel na tom, ?e p??slu?n? smlouva je uzav?ena teprve v?slovn?m dosa?en?m shody na v?ech jej?ch n?le?itostech.
- odes?latel tohoto emailu informuje, ?e nen? opr?vn?n uzav?rat za spole?nost ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn? zmocn?n nebo p?semn? pov??en a takov? pov??en? nebo pln? moc byly adres?tovi tohoto emailu p??padn? osob?, kterou adres?t zastupuje, p?edlo?eny nebo jejich existence je adres?tovi ?i osob? j?m zastoupen? zn?m?.

This e-mail and any documents attached to it may be confidential and are intended only for its intended recipients.
If you received this e-mail by mistake, please immediately inform its sender. Delete the contents of this e-mail with all attachments and its copies from your system.
If you are not the intended recipient of this e-mail, you are not authorized to use, disseminate, copy or disclose this e-mail in any manner.
The sender of this e-mail shall not be liable for any possible damage caused by modifications of the e-mail or by delay with transfer of the email.

In case that this e-mail forms part of business dealings:
- the sender reserves the right to end negotiations about entering into a contract in any time, for any reason, and without stating any reasoning.
- if the e-mail contains an offer, the recipient is entitled to immediately accept such offer; The sender of this e-mail (offer) excludes any acceptance of the offer on the part of the recipient containing any amendment or variation.
- the sender insists on that the respective contract is concluded only upon an express mutual agreement on all its aspects.
- the sender of this e-mail informs that he/she is not authorized to enter into any contracts on behalf of the company except for cases in which he/she is expressly authorized to do so in writing, and such authorization or power of attorney is submitted to the recipient or the person represented by the recipient, or the existence of such authorization is known to the recipient of the person represented by the recipient.

From hanhtham.tran at yahoo.com.vn  Wed Jun  4 09:37:21 2014
From: hanhtham.tran at yahoo.com.vn (Tham Tran)
Date: Wed, 4 Jun 2014 00:37:21 -0700 (PDT)
Subject: [R] plot in package psych with function error.bars.by
In-Reply-To: <107834395.A8ZI0oDvek@localhost.localdomain>
References: <1401776898895-4691632.post@n4.nabble.com>
	<107834395.A8ZI0oDvek@localhost.localdomain>
Message-ID: <1401867441056-4691694.post@n4.nabble.com>

Hi Jim,

Thank you for your answers.

I also don't know where does the error like you mentioned come from. But for
me, R works normally with the codes following:

require(psych)
keys.list=list(Agree=c(-1,2:5),Conscientious=c(6:8,-9,-10),Extraversion=c(-11,-12,13:15),Neuroticism=c(16:20),Openness
= c(21,-22,23,24,-25))
keys = make.keys(28,keys.list,item.labels=colnames(bfi))
scores = score.items(keys,bfi,min=1,max=6)
error.bars.by(scores$scores,round(bfi$age/10)*10,by.var=TRUE,main="BFI age
trends",legend=3,labels=colnames(scores$scores),xlab="Age",ylab="Mean item
score")

I have retried and it is running
Except when i want to change the plotting character and line type of the
graph by the code below: 

error.bars.by(scores$scores,round(bfi$age/10)*10,by.var=TRUE,main="BFI age
trends",legend=3,labels=colnames(scores$scores),xlab="Age",ylab="Mean item
score",pch=c(1,2,3,4), lty=1)

i get the error. 

Tham.   



--
View this message in context: http://r.789695.n4.nabble.com/plot-in-package-psych-with-function-error-bars-by-tp4691632p4691694.html
Sent from the R help mailing list archive at Nabble.com.


From monaly.mistry at gmail.com  Wed Jun  4 13:52:28 2014
From: monaly.mistry at gmail.com (Monaly Mistry)
Date: Wed, 4 Jun 2014 12:52:28 +0100
Subject: [R] question about how the mantel test is run in the ade4 package
Message-ID: <CANpv+65f1_QQ8Hx9BLj4j9W9uz4Z94ydm4TmaHMyLhnQWxpRtA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140604/187d8386/attachment.pl>

From Mark.Fowler at dfo-mpo.gc.ca  Wed Jun  4 18:42:11 2014
From: Mark.Fowler at dfo-mpo.gc.ca (Fowler, Mark)
Date: Wed, 4 Jun 2014 13:42:11 -0300
Subject: [R] tkbind (callback)
In-Reply-To: <CAFEqCdxZ6qdm66eML_EUpuipKpi+7PVzznF1kZm72uBxkbDPDw@mail.gmail.com>
References: <CB5182AD107F0943AEF20FD01FB8A7F80682C8D7@marbioexc02.mar.dfo-mpo.ca>
	<CAFEqCdxZ6qdm66eML_EUpuipKpi+7PVzznF1kZm72uBxkbDPDw@mail.gmail.com>
Message-ID: <CB5182AD107F0943AEF20FD01FB8A7F80682CB14@marbioexc02.mar.dfo-mpo.ca>

Thanks for responding, Greg. That works. Plus I wasn't aware of a ListboxSelect option, which is much more convenient. Trivial question if you know off the top of your head - why  <<ListboxSelect>> rather than < ListboxSelect>? I never saw any examples of that type of enclosure.

I cced the list. Ran into a lot of dead end threads related to my question, and callbacks in general, using tcltk or tcltk2. Might spare others some headaches.



-----Original Message-----
From: Greg Snow [mailto:538280 at gmail.com] 
Sent: June 3, 2014 1:41 PM
To: Fowler, Mark
Cc: R help
Subject: Re: [R] tkbind (callback)

I think the problem is that the tkbind function is expecting the 3rd argument to be a function and the arguments of functions passed to tkbind need to have specific names.  In your call when you do the binding the OtoFanCallback function is called at that time (hence the initial print) and its return value (which is the return value of the final cat call) is used as the binding function, which ends up doing nothing as you see.

I changed your bind command to:

tkbind(detlist,"<<ListboxSelect>>", OtofanCallback)

and I changed the OtofanCallback function to have no arguments and ran the script and everything looks much more like it is working, at least when I changed the selection in the list box I saw the new value 'cat'ed to the screen.

hope this helps


On Tue, Jun 3, 2014 at 6:32 AM, Fowler, Mark <Mark.Fowler at dfo-mpo.gc.ca> wrote:
> Hello,
>
>
>
> I've migrated an ADMB application with a user dialog from S to R. The 
> script below will produce a dialog in R, and don't need data to 
> address this issue. It works in terms of capturing user inputs to pass 
> along, no problem running the ADMB program. However some of the 
> options have dependencies. E.g. if we fix a parameter it should not 
> have an estimation phase, but we want the full suite of phases 
> available to the user when the parameter is active. Thus the selection 
> of one listbox is constrained by the selection of another listbox. I 
> had callback functionality in S for this, and am now trying to 
> implement callbacks in
> tcltk2 using tkbind. At the bottom of the dialog function below I 
> include an attempt at a callback function. Just for one 
> parameter-phase pair and scenario to illustrate. It includes a 
> troubleshooting cat to tell if it works. When I run this it 
> immediately cats the correct value, although this is premature, as I haven't interacted with the dialog yet.
> More importantly, it subsequently ignores interactions. If I change 
> the parameter definition in one listbox, the callback should verify 
> that the estimation phase is appropriate in the other listbox and 
> change it if not. But beyond running the callback function when the 
> dialog is created, it does not appear to be active after that. Anybody 
> know what I'm doing wrong?
>
>
>
> require(tcltk2)
>
> OtofanGUI=function() {
>
> OtofanR=tktoplevel()
>
> tktitle(OtofanR) <- "Age-Related Data Analysis with OTOFAN"
>
> tkgrid(tklabel(OtofanR,text="DATA SELECTION & DEFINITION"),stick="we")
>
> tkgrid(tklabel(OtofanR,text="If you already have files of 
> ADMB-formatted data, and/or optional PIN, click button(s) to retrieve 
> them"))
>
> ADMBdata <- tk2button(OtofanR, text = "ADMB Data", width = 10, command 
> =
> function() tkgetOpenFile())
>
> ADMBfile <- tk2button(OtofanR, text = "ADMB Pin", width = 10, command 
> =
> function() tkgetOpenFile())
>
> tkgrid(ADMBdata)
>
> tkgrid(ADMBfile)
>
> tkgrid(tklabel(OtofanR,text=""))
>
> tkgrid(tklabel(OtofanR,text="If you have a dataframe in R, 
> confirm/identify it, and the variables to build the ADMB inputs"))
>
> CustomFile <- tclVar("AgeData")
>
> tkgrid(tklabel(OtofanR,text="Dataframe name"),tk2entry(OtofanR, 
> textvariable=CustomFile, width=20))
>
> Ages <- tclVar("AgeYears")
>
> tkgrid(tklabel(OtofanR,text="Age variable"),tk2entry(OtofanR, 
> textvariable=Ages, width=20))
>
> FishLens <- tclVar("FishLength")
>
> tkgrid(tklabel(OtofanR,text="Fish Length variable"),tk2entry(OtofanR, 
> textvariable=FishLens, width=20))
>
> OtoWts <- tclVar("NA")
>
> tkgrid(tklabel(OtofanR,text="Otolith Weight 
> variable"),tk2entry(OtofanR, textvariable=OtoWts, width=20))
>
> OtoLens <- tclVar("NA")
>
> tkgrid(tklabel(OtofanR,text="Otolith Length 
> variable"),tk2entry(OtofanR, textvariable=OtoLens, width=20))
>
> FishWts <- tclVar("NA")
>
> tkgrid(tklabel(OtofanR,text="Fish Weight variable"),tk2entry(OtofanR, 
> textvariable=FishWts, width=20))
>
> GroupID <- tclVar("NA")
>
> tkgrid(tklabel(OtofanR,text="Group ID variable"),tk2entry(OtofanR, 
> textvariable=GroupID, width=20))
>
> YearID <- tclVar("NA")
>
> tkgrid(tklabel(OtofanR,text="Year ID variable"),tk2entry(OtofanR, 
> textvariable=YearID, width=20))
>
> Sex <- tclVar("NA")
>
> tkgrid(tklabel(OtofanR,text="Sex variable"),tk2entry(OtofanR, 
> textvariable=Sex, width=20))
>
> LFdata <- tclVar("NA")
>
> tkgrid(tklabel(OtofanR,text="Separate Length-Frequency Dataframe 
> name"),tk2entry(OtofanR, textvariable=LFdata, width=20))
>
> FreqVar <- tclVar("NA")
>
> tkgrid(tklabel(OtofanR,text="Frequency variable"),tk2entry(OtofanR, 
> textvariable=FreqVar, width=20))
>
> OSTypes <- c("Random at Length", "Simple Random")
>
> OSlist=tk2listbox(OtofanR, values=OSTypes, selection=1, selectmode = 
> "single", height = 2, scroll = "none", autoscroll = "x", enabled = 
> TRUE)
>
> tkgrid(tklabel(OtofanR,text="Otolith Sample Type"),OSlist)
>
> ASTypes <- c("Random at Length", "Simple Random")
>
> ASlist=tk2listbox(OtofanR, values=ASTypes, selection=1, selectmode = 
> "single", height = 2, scroll = "none", autoscroll = "x", enabled = 
> TRUE)
>
> tkgrid(tklabel(OtofanR,text="Age Sample Type"),ASlist)
>
> AppApply <- tk2button(OtofanR, text = "Apply", width = 7, command =
> function()
> OtofanDT(tclvalue(ADMBdata),tclvalue(ADMBFile),tclvalue(ADMBPin),ADMBF="
> NA",ADMBP="NA",tclvalue(GS),
>
>
> Regdata="NA",tclvalue(CustomFile),tclvalue(Ages),tclvalue(FishLens),tc
> lv 
> alue(OtoWts),tclvalue(OtoLens),tclvalue(FishWts),tclvalue(GroupID),tcl
> va
> lue(YearID),
>
>                 tclvalue(Sex),tclvalue(LFdata),tclvalue(FreqVar),
>
>
> tclvalue(tclVar(OSTypes[as.numeric(tkcurselection(OSlist))+1])),tclval
> ue (tclVar(ASTypes[as.numeric(tkcurselection(ASlist))+1])),
>
>
> tclvalue(tclVar(LAAdet[as.numeric(tkcurselection(detlist))+1])),tclval
> ue (tclVar(LPhase[as.numeric(tkcurselection(LPlist))+1])),
>
>
> tclvalue(tclVar(Ldist[as.numeric(tkcurselection(Ldlist))+1])),tclvalue
> (t clVar(LAAstdev[as.numeric(tkcurselection(LAASDlist))+1])),
>
>
> tclvalue(tclVar(LSDPhase[as.numeric(tkcurselection(LSDlist))+1])),tclv
> al ue(tclVar(LSDdist[as.numeric(tkcurselection(LSDdlist))+1])),
>
>
> tclvalue(tclVar(LSDcov[as.numeric(tkcurselection(LSDcovlist))+1])),OAA="
> NA",tclvalue(tclVar(OAAdet[as.numeric(tkcurselection(odetlist))+1])),
>
>
> tclvalue(tclVar(OPhase[as.numeric(tkcurselection(OPlist))+1])),tclvalu
> e( tclVar(Odist[as.numeric(tkcurselection(Odlist))+1])),
>
>
> tclvalue(tclVar(OAAstdev[as.numeric(tkcurselection(OAASDlist))+1])),tc
> lv alue(tclVar(OSDPhase[as.numeric(tkcurselection(OSDlist))+1])),
>
>
> tclvalue(tclVar(OSDdist[as.numeric(tkcurselection(OSDdlist))+1])),CORR="
> NA",tclvalue(tclVar(CORest[as.numeric(tkcurselection(CORRlist))+1])),
>
>
> tclvalue(tclVar(CPhase[as.numeric(tkcurselection(CPlist))+1])),GS2="NA
> ",
> tclvalue(tclVar(PAAPhase[as.numeric(tkcurselection(PAAlist))+1]))))
>
> AppCancel <- tk2button(OtofanR, text = "Cancel", width = 7, command =
> function() tkdestroy(OtofanR))
>
> tkgrid(AppApply,sticky="w")
>
> tkgrid(AppCancel,sticky="w")
>
> #Length at Age Tab
>
> tkgrid(tklabel(OtofanR,text="LENGTH AT AGE
> FITTING"),sticky="we",column=2,row=1)
>
> LAAdet <- c("Mean, Estimated", "Constrained BY VBGF, Estimated", 
> "Constrained TO VBGF, Fixed")
>
> detlist=tk2listbox(OtofanR, values=c("Mean, Estimated", "Constrained 
> BY VBGF, Estimated", "Constrained TO VBGF, Fixed"), selection=1, 
> selectmode = "single", height = 3, scroll = "none", autoscroll = "x", 
> enabled = TRUE, width=30)
>
> tkgrid(tklabel(OtofanR,text="Determination Method"),column=2,row=2)
>
> tkgrid(detlist,column=2,row=3)
>
> LPhase <- c("0", "1", "2", "3")
>
> LPlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), selection=3, 
> selectmode = "single", height = 4, scroll = "none", autoscroll = "x", 
> enabled = TRUE)
>
> tkgrid(tklabel(OtofanR,text="Activation Phase (0 = Fixed, do not
> estimate)"),column=2,row=5)
>
> tkgrid(LPlist,column=2,row=6)
>
> Ldist <- c("0", "1", "2", "3")
>
> Ldlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), selection=1, 
> selectmode = "single", height = 4, scroll = "none", autoscroll = "x", 
> enabled = TRUE)
>
> tkgrid(tklabel(OtofanR,text="Estimate Distribution in Phase (0 = 
> Fixed, do not estimate)"),column=2,row=8)
>
> tkgrid(Ldlist,column=2,row=9)
>
> LAAstdev <- c("Traditional Calculation, Fixed", "Constrained BY 
> regression, Estimated", "Constrained TO regression, Fixed")
>
> LAASDlist=tk2listbox(OtofanR, values=c("Traditional Calculation, 
> Fixed", "Constrained BY regression, Estimated", "Constrained TO 
> regression, Fixed"), selection=1, selectmode = "single", height = 4, 
> scroll = "none", autoscroll = "x", enabled = TRUE, width=35)
>
> tkgrid(tklabel(OtofanR,text="Standard Deviation"),column=2,row=11)
>
> tkgrid(LAASDlist,column=2,row=12)
>
> LSDPhase <- c("0", "1", "2", "3")
>
> LSDlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), selection=4, 
> selectmode = "single", height = 4, scroll = "none", autoscroll = "x", 
> enabled = TRUE)
>
> tkgrid(tklabel(OtofanR,text="St Dev Activation Phase (0 = Fixed, do 
> not
> estimate)"),column=2,row=14)
>
> tkgrid(LSDlist,column=2,row=15)
>
> LSDdist <- c("0", "1", "2", "3")
>
> LSDdlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), 
> selection=1, selectmode = "single", height = 4, scroll = "none", 
> autoscroll = "x", enabled = TRUE)
>
> tkgrid(tklabel(OtofanR,text="Estimate St Dev Distribution in Phase (0 
> = do not estimate)"),column=2,row=17)
>
> tkgrid(LSDdlist,column=2,row=18)
>
> LSDcov <- c("0", "1", "2", "3")
>
> LSDcovlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), 
> selection=1, selectmode = "single", height = 4, scroll = "none", 
> autoscroll = "x", enabled = TRUE)
>
> tkgrid(tklabel(OtofanR,text="Estimate CV in Phase (0 = Fixed, do not
> estimate)"),column=2,row=20)
>
> tkgrid(LSDcovlist,column=2,row=21)
>
> #Otolith at Age Tab
>
> tkgrid(tklabel(OtofanR,text="OTOLITH METRICS AT AGE
> FITTING"),sticky="we",column=3,row=1)
>
> OAAdet <- c("Mean, Estimated", "Constrained BY regression, Estimated", 
> "Constrained TO regression, Fixed")
>
> odetlist=tk2listbox(OtofanR, values=c("Mean, Estimated", "Constrained 
> BY regression, Estimated", "Constrained TO regression, Fixed"), 
> selection=1, selectmode = "single", height = 3, scroll = "none", 
> autoscroll = "x", enabled = TRUE, width=30)
>
> tkgrid(tklabel(OtofanR,text="Determination Method"),column=3,row=2)
>
> tkgrid(odetlist,column=3,row=3)
>
> OPhase <- c("0", "1", "2", "3")
>
> OPlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), selection=3, 
> selectmode = "single", height = 4, scroll = "none", autoscroll = "x", 
> enabled = TRUE)
>
> tkgrid(tklabel(OtofanR,text="Activation Phase (0 = Fixed, do not
> estimate)"),column=3,row=5)
>
> tkgrid(OPlist,column=3,row=6)
>
> Odist <- c("0", "1", "2", "3")
>
> Odlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), selection=1, 
> selectmode = "single", height = 4, scroll = "none", autoscroll = "x", 
> enabled = TRUE)
>
> tkgrid(tklabel(OtofanR,text="Estimate Distribution in Phase (0 = 
> Fixed, do not estimate)"),column=3,row=8)
>
> tkgrid(Odlist,column=3,row=9)
>
> OAAstdev <- c("Traditional Calculation, Fixed", "Constrained BY 
> regression, Estimated", "Constrained TO regression, Fixed")
>
> OAASDlist=tk2listbox(OtofanR, values=c("Traditional Calculation, 
> Fixed", "Constrained BY regression, Estimated", "Constrained TO 
> regression, Fixed"), selection=1, selectmode = "single", height = 4, 
> scroll = "none", autoscroll = "x", enabled = TRUE, width=35)
>
> tkgrid(tklabel(OtofanR,text="Standard Deviation"),column=3,row=11)
>
> tkgrid(OAASDlist,column=3,row=12)
>
> OSDPhase <- c("0", "1", "2", "3")
>
> OSDlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), selection=4, 
> selectmode = "single", height = 4, scroll = "none", autoscroll = "x", 
> enabled = TRUE)
>
> tkgrid(tklabel(OtofanR,text="St Dev Activation Phase (0 = Fixed, do 
> not
> estimate)"),column=3,row=14)
>
> tkgrid(OSDlist,column=3,row=15)
>
> OSDdist <- c("0", "1", "2", "3")
>
> OSDdlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), 
> selection=1, selectmode = "single", height = 4, scroll = "none", 
> autoscroll = "x", enabled = TRUE)
>
> tkgrid(tklabel(OtofanR,text="Estimate St Dev Distribution in Phase (0 
> = do not estimate)"),column=3,row=17)
>
> tkgrid(OSDdlist,column=3,row=18)
>
> #Dependencies Tab
>
> tkgrid(tklabel(OtofanR,text="DEPENDENCIES"),sticky="we",column=4,row=1
> )
>
> tkgrid(tklabel(OtofanR,text="Correlations"),sticky="we",column=4,row=2
> )
>
> CORest <- c("Age-Specific", "Age-Invariant")
>
> CORRlist=tk2listbox(OtofanR, values=c("Age-Specific", 
> "Age-Invariant"), selection=1, selectmode = "single", height = 4, 
> scroll = "none", autoscroll = "x", enabled = TRUE)
>
> tkgrid(tklabel(OtofanR,text="Method"),column=4,row=3)
>
> tkgrid(CORRlist,column=4,row=3)
>
> CPhase <- c("1", "2", "3")
>
> CPlist=tk2listbox(OtofanR, values=c("1", "2", "3"), selection=3, 
> selectmode = "single", height = 4, scroll = "none", autoscroll = "x", 
> enabled = TRUE)
>
> tkgrid(tklabel(OtofanR,text="Activation Phase"),column=4,row=5)
>
> tkgrid(CPlist,column=4,row=6)
>
> PAAPhase <- c("1", "2", "3")
>
> PAAlist=tk2listbox(OtofanR, values=c("1", "2", "3"), selection=1, 
> selectmode = "single", height = 4, scroll = "none", autoscroll = "x", 
> enabled = TRUE)
>
> tkgrid(tklabel(OtofanR,text="Activation Phase to Estimate Proportions 
> at
> Age"),column=4,row=8)
>
> tkgrid(PAAlist,column=4,row=9)
>
> OtofanCallback = function(detlist,LAAdet,LPhase,LPlist) {
>
>                                 if
> (tclvalue(tclVar(LAAdet[as.numeric(tkcurselection(detlist))+1]))!="3" 
> & 
> tclvalue(tclVar(LPhase[as.numeric(tkcurselection(LPlist))+1]))=="0")tk
> se
> lection.set(detlist, 2)
>
> cat(tclvalue(tclVar(LAAdet[as.numeric(tkcurselection(detlist))+1])))
>
> }
>
> tkbind(detlist,"<Key>", OtofanCallback(detlist,LAAdet,LPhase,LPlist))
>
> }
>
> OtofanGUI()
>
>
>
> [immediately outputs as below]
>
> Mean, Estimated<Tcl>
>
>
>
> Mark Fowler
> Population Ecology Division
> Bedford Inst of Oceanography
> Dept Fisheries & Oceans
> Dartmouth NS Canada
> B2Y 4A2
> Tel. (902) 426-3529
> Fax (902) 426-9710
> Email Mark.Fowler at dfo-mpo.gc.ca <mailto:Mark.Fowler at dfo-mpo.gc.ca>
>
>
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



--
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com

From 538280 at gmail.com  Wed Jun  4 19:30:48 2014
From: 538280 at gmail.com (Greg Snow)
Date: Wed, 4 Jun 2014 11:30:48 -0600
Subject: [R] tkbind (callback)
In-Reply-To: <CB5182AD107F0943AEF20FD01FB8A7F80682CB14@marbioexc02.mar.dfo-mpo.ca>
References: <CB5182AD107F0943AEF20FD01FB8A7F80682C8D7@marbioexc02.mar.dfo-mpo.ca>
	<CAFEqCdxZ6qdm66eML_EUpuipKpi+7PVzznF1kZm72uBxkbDPDw@mail.gmail.com>
	<CB5182AD107F0943AEF20FD01FB8A7F80682CB14@marbioexc02.mar.dfo-mpo.ca>
Message-ID: <CAFEqCdzG+XH=RQMQ49dco0E+J=MM5dQpHJWQ1h6Kh2rYCZ+Lhw@mail.gmail.com>

Installed with R is the documentation for tcl/tk (the original
language), on my computer it is in the Doc folder/dir of the TCL
folder/dir under the R folder.  In that documentation on listbox, near
the bottom in the "Default Bindings" section it mentions the virtual
event "<<ListboxSelect>>", so I tried that and it worked.  It looks
like the double angle brackets are because it is a virtual event
rather than a regular (real, non-virtual, ...?) event.  Virtual events
are not tied to a direct interaction like keypress or mouse click, but
rather a given widget can generate a virtual event at a time when it
makes sense to do so, e.g. <<ListboxSelect>>.

On Wed, Jun 4, 2014 at 10:42 AM, Fowler, Mark <Mark.Fowler at dfo-mpo.gc.ca> wrote:
> Thanks for responding, Greg. That works. Plus I wasn't aware of a ListboxSelect option, which is much more convenient. Trivial question if you know off the top of your head - why  <<ListboxSelect>> rather than < ListboxSelect>? I never saw any examples of that type of enclosure.
>
> I cced the list. Ran into a lot of dead end threads related to my question, and callbacks in general, using tcltk or tcltk2. Might spare others some headaches.
>
>
>
> -----Original Message-----
> From: Greg Snow [mailto:538280 at gmail.com]
> Sent: June 3, 2014 1:41 PM
> To: Fowler, Mark
> Cc: R help
> Subject: Re: [R] tkbind (callback)
>
> I think the problem is that the tkbind function is expecting the 3rd argument to be a function and the arguments of functions passed to tkbind need to have specific names.  In your call when you do the binding the OtoFanCallback function is called at that time (hence the initial print) and its return value (which is the return value of the final cat call) is used as the binding function, which ends up doing nothing as you see.
>
> I changed your bind command to:
>
> tkbind(detlist,"<<ListboxSelect>>", OtofanCallback)
>
> and I changed the OtofanCallback function to have no arguments and ran the script and everything looks much more like it is working, at least when I changed the selection in the list box I saw the new value 'cat'ed to the screen.
>
> hope this helps
>
>
> On Tue, Jun 3, 2014 at 6:32 AM, Fowler, Mark <Mark.Fowler at dfo-mpo.gc.ca> wrote:
>> Hello,
>>
>>
>>
>> I've migrated an ADMB application with a user dialog from S to R. The
>> script below will produce a dialog in R, and don't need data to
>> address this issue. It works in terms of capturing user inputs to pass
>> along, no problem running the ADMB program. However some of the
>> options have dependencies. E.g. if we fix a parameter it should not
>> have an estimation phase, but we want the full suite of phases
>> available to the user when the parameter is active. Thus the selection
>> of one listbox is constrained by the selection of another listbox. I
>> had callback functionality in S for this, and am now trying to
>> implement callbacks in
>> tcltk2 using tkbind. At the bottom of the dialog function below I
>> include an attempt at a callback function. Just for one
>> parameter-phase pair and scenario to illustrate. It includes a
>> troubleshooting cat to tell if it works. When I run this it
>> immediately cats the correct value, although this is premature, as I haven't interacted with the dialog yet.
>> More importantly, it subsequently ignores interactions. If I change
>> the parameter definition in one listbox, the callback should verify
>> that the estimation phase is appropriate in the other listbox and
>> change it if not. But beyond running the callback function when the
>> dialog is created, it does not appear to be active after that. Anybody
>> know what I'm doing wrong?
>>
>>
>>
>> require(tcltk2)
>>
>> OtofanGUI=function() {
>>
>> OtofanR=tktoplevel()
>>
>> tktitle(OtofanR) <- "Age-Related Data Analysis with OTOFAN"
>>
>> tkgrid(tklabel(OtofanR,text="DATA SELECTION & DEFINITION"),stick="we")
>>
>> tkgrid(tklabel(OtofanR,text="If you already have files of
>> ADMB-formatted data, and/or optional PIN, click button(s) to retrieve
>> them"))
>>
>> ADMBdata <- tk2button(OtofanR, text = "ADMB Data", width = 10, command
>> =
>> function() tkgetOpenFile())
>>
>> ADMBfile <- tk2button(OtofanR, text = "ADMB Pin", width = 10, command
>> =
>> function() tkgetOpenFile())
>>
>> tkgrid(ADMBdata)
>>
>> tkgrid(ADMBfile)
>>
>> tkgrid(tklabel(OtofanR,text=""))
>>
>> tkgrid(tklabel(OtofanR,text="If you have a dataframe in R,
>> confirm/identify it, and the variables to build the ADMB inputs"))
>>
>> CustomFile <- tclVar("AgeData")
>>
>> tkgrid(tklabel(OtofanR,text="Dataframe name"),tk2entry(OtofanR,
>> textvariable=CustomFile, width=20))
>>
>> Ages <- tclVar("AgeYears")
>>
>> tkgrid(tklabel(OtofanR,text="Age variable"),tk2entry(OtofanR,
>> textvariable=Ages, width=20))
>>
>> FishLens <- tclVar("FishLength")
>>
>> tkgrid(tklabel(OtofanR,text="Fish Length variable"),tk2entry(OtofanR,
>> textvariable=FishLens, width=20))
>>
>> OtoWts <- tclVar("NA")
>>
>> tkgrid(tklabel(OtofanR,text="Otolith Weight
>> variable"),tk2entry(OtofanR, textvariable=OtoWts, width=20))
>>
>> OtoLens <- tclVar("NA")
>>
>> tkgrid(tklabel(OtofanR,text="Otolith Length
>> variable"),tk2entry(OtofanR, textvariable=OtoLens, width=20))
>>
>> FishWts <- tclVar("NA")
>>
>> tkgrid(tklabel(OtofanR,text="Fish Weight variable"),tk2entry(OtofanR,
>> textvariable=FishWts, width=20))
>>
>> GroupID <- tclVar("NA")
>>
>> tkgrid(tklabel(OtofanR,text="Group ID variable"),tk2entry(OtofanR,
>> textvariable=GroupID, width=20))
>>
>> YearID <- tclVar("NA")
>>
>> tkgrid(tklabel(OtofanR,text="Year ID variable"),tk2entry(OtofanR,
>> textvariable=YearID, width=20))
>>
>> Sex <- tclVar("NA")
>>
>> tkgrid(tklabel(OtofanR,text="Sex variable"),tk2entry(OtofanR,
>> textvariable=Sex, width=20))
>>
>> LFdata <- tclVar("NA")
>>
>> tkgrid(tklabel(OtofanR,text="Separate Length-Frequency Dataframe
>> name"),tk2entry(OtofanR, textvariable=LFdata, width=20))
>>
>> FreqVar <- tclVar("NA")
>>
>> tkgrid(tklabel(OtofanR,text="Frequency variable"),tk2entry(OtofanR,
>> textvariable=FreqVar, width=20))
>>
>> OSTypes <- c("Random at Length", "Simple Random")
>>
>> OSlist=tk2listbox(OtofanR, values=OSTypes, selection=1, selectmode =
>> "single", height = 2, scroll = "none", autoscroll = "x", enabled =
>> TRUE)
>>
>> tkgrid(tklabel(OtofanR,text="Otolith Sample Type"),OSlist)
>>
>> ASTypes <- c("Random at Length", "Simple Random")
>>
>> ASlist=tk2listbox(OtofanR, values=ASTypes, selection=1, selectmode =
>> "single", height = 2, scroll = "none", autoscroll = "x", enabled =
>> TRUE)
>>
>> tkgrid(tklabel(OtofanR,text="Age Sample Type"),ASlist)
>>
>> AppApply <- tk2button(OtofanR, text = "Apply", width = 7, command =
>> function()
>> OtofanDT(tclvalue(ADMBdata),tclvalue(ADMBFile),tclvalue(ADMBPin),ADMBF="
>> NA",ADMBP="NA",tclvalue(GS),
>>
>>
>> Regdata="NA",tclvalue(CustomFile),tclvalue(Ages),tclvalue(FishLens),tc
>> lv
>> alue(OtoWts),tclvalue(OtoLens),tclvalue(FishWts),tclvalue(GroupID),tcl
>> va
>> lue(YearID),
>>
>>                 tclvalue(Sex),tclvalue(LFdata),tclvalue(FreqVar),
>>
>>
>> tclvalue(tclVar(OSTypes[as.numeric(tkcurselection(OSlist))+1])),tclval
>> ue (tclVar(ASTypes[as.numeric(tkcurselection(ASlist))+1])),
>>
>>
>> tclvalue(tclVar(LAAdet[as.numeric(tkcurselection(detlist))+1])),tclval
>> ue (tclVar(LPhase[as.numeric(tkcurselection(LPlist))+1])),
>>
>>
>> tclvalue(tclVar(Ldist[as.numeric(tkcurselection(Ldlist))+1])),tclvalue
>> (t clVar(LAAstdev[as.numeric(tkcurselection(LAASDlist))+1])),
>>
>>
>> tclvalue(tclVar(LSDPhase[as.numeric(tkcurselection(LSDlist))+1])),tclv
>> al ue(tclVar(LSDdist[as.numeric(tkcurselection(LSDdlist))+1])),
>>
>>
>> tclvalue(tclVar(LSDcov[as.numeric(tkcurselection(LSDcovlist))+1])),OAA="
>> NA",tclvalue(tclVar(OAAdet[as.numeric(tkcurselection(odetlist))+1])),
>>
>>
>> tclvalue(tclVar(OPhase[as.numeric(tkcurselection(OPlist))+1])),tclvalu
>> e( tclVar(Odist[as.numeric(tkcurselection(Odlist))+1])),
>>
>>
>> tclvalue(tclVar(OAAstdev[as.numeric(tkcurselection(OAASDlist))+1])),tc
>> lv alue(tclVar(OSDPhase[as.numeric(tkcurselection(OSDlist))+1])),
>>
>>
>> tclvalue(tclVar(OSDdist[as.numeric(tkcurselection(OSDdlist))+1])),CORR="
>> NA",tclvalue(tclVar(CORest[as.numeric(tkcurselection(CORRlist))+1])),
>>
>>
>> tclvalue(tclVar(CPhase[as.numeric(tkcurselection(CPlist))+1])),GS2="NA
>> ",
>> tclvalue(tclVar(PAAPhase[as.numeric(tkcurselection(PAAlist))+1]))))
>>
>> AppCancel <- tk2button(OtofanR, text = "Cancel", width = 7, command =
>> function() tkdestroy(OtofanR))
>>
>> tkgrid(AppApply,sticky="w")
>>
>> tkgrid(AppCancel,sticky="w")
>>
>> #Length at Age Tab
>>
>> tkgrid(tklabel(OtofanR,text="LENGTH AT AGE
>> FITTING"),sticky="we",column=2,row=1)
>>
>> LAAdet <- c("Mean, Estimated", "Constrained BY VBGF, Estimated",
>> "Constrained TO VBGF, Fixed")
>>
>> detlist=tk2listbox(OtofanR, values=c("Mean, Estimated", "Constrained
>> BY VBGF, Estimated", "Constrained TO VBGF, Fixed"), selection=1,
>> selectmode = "single", height = 3, scroll = "none", autoscroll = "x",
>> enabled = TRUE, width=30)
>>
>> tkgrid(tklabel(OtofanR,text="Determination Method"),column=2,row=2)
>>
>> tkgrid(detlist,column=2,row=3)
>>
>> LPhase <- c("0", "1", "2", "3")
>>
>> LPlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), selection=3,
>> selectmode = "single", height = 4, scroll = "none", autoscroll = "x",
>> enabled = TRUE)
>>
>> tkgrid(tklabel(OtofanR,text="Activation Phase (0 = Fixed, do not
>> estimate)"),column=2,row=5)
>>
>> tkgrid(LPlist,column=2,row=6)
>>
>> Ldist <- c("0", "1", "2", "3")
>>
>> Ldlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), selection=1,
>> selectmode = "single", height = 4, scroll = "none", autoscroll = "x",
>> enabled = TRUE)
>>
>> tkgrid(tklabel(OtofanR,text="Estimate Distribution in Phase (0 =
>> Fixed, do not estimate)"),column=2,row=8)
>>
>> tkgrid(Ldlist,column=2,row=9)
>>
>> LAAstdev <- c("Traditional Calculation, Fixed", "Constrained BY
>> regression, Estimated", "Constrained TO regression, Fixed")
>>
>> LAASDlist=tk2listbox(OtofanR, values=c("Traditional Calculation,
>> Fixed", "Constrained BY regression, Estimated", "Constrained TO
>> regression, Fixed"), selection=1, selectmode = "single", height = 4,
>> scroll = "none", autoscroll = "x", enabled = TRUE, width=35)
>>
>> tkgrid(tklabel(OtofanR,text="Standard Deviation"),column=2,row=11)
>>
>> tkgrid(LAASDlist,column=2,row=12)
>>
>> LSDPhase <- c("0", "1", "2", "3")
>>
>> LSDlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), selection=4,
>> selectmode = "single", height = 4, scroll = "none", autoscroll = "x",
>> enabled = TRUE)
>>
>> tkgrid(tklabel(OtofanR,text="St Dev Activation Phase (0 = Fixed, do
>> not
>> estimate)"),column=2,row=14)
>>
>> tkgrid(LSDlist,column=2,row=15)
>>
>> LSDdist <- c("0", "1", "2", "3")
>>
>> LSDdlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"),
>> selection=1, selectmode = "single", height = 4, scroll = "none",
>> autoscroll = "x", enabled = TRUE)
>>
>> tkgrid(tklabel(OtofanR,text="Estimate St Dev Distribution in Phase (0
>> = do not estimate)"),column=2,row=17)
>>
>> tkgrid(LSDdlist,column=2,row=18)
>>
>> LSDcov <- c("0", "1", "2", "3")
>>
>> LSDcovlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"),
>> selection=1, selectmode = "single", height = 4, scroll = "none",
>> autoscroll = "x", enabled = TRUE)
>>
>> tkgrid(tklabel(OtofanR,text="Estimate CV in Phase (0 = Fixed, do not
>> estimate)"),column=2,row=20)
>>
>> tkgrid(LSDcovlist,column=2,row=21)
>>
>> #Otolith at Age Tab
>>
>> tkgrid(tklabel(OtofanR,text="OTOLITH METRICS AT AGE
>> FITTING"),sticky="we",column=3,row=1)
>>
>> OAAdet <- c("Mean, Estimated", "Constrained BY regression, Estimated",
>> "Constrained TO regression, Fixed")
>>
>> odetlist=tk2listbox(OtofanR, values=c("Mean, Estimated", "Constrained
>> BY regression, Estimated", "Constrained TO regression, Fixed"),
>> selection=1, selectmode = "single", height = 3, scroll = "none",
>> autoscroll = "x", enabled = TRUE, width=30)
>>
>> tkgrid(tklabel(OtofanR,text="Determination Method"),column=3,row=2)
>>
>> tkgrid(odetlist,column=3,row=3)
>>
>> OPhase <- c("0", "1", "2", "3")
>>
>> OPlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), selection=3,
>> selectmode = "single", height = 4, scroll = "none", autoscroll = "x",
>> enabled = TRUE)
>>
>> tkgrid(tklabel(OtofanR,text="Activation Phase (0 = Fixed, do not
>> estimate)"),column=3,row=5)
>>
>> tkgrid(OPlist,column=3,row=6)
>>
>> Odist <- c("0", "1", "2", "3")
>>
>> Odlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), selection=1,
>> selectmode = "single", height = 4, scroll = "none", autoscroll = "x",
>> enabled = TRUE)
>>
>> tkgrid(tklabel(OtofanR,text="Estimate Distribution in Phase (0 =
>> Fixed, do not estimate)"),column=3,row=8)
>>
>> tkgrid(Odlist,column=3,row=9)
>>
>> OAAstdev <- c("Traditional Calculation, Fixed", "Constrained BY
>> regression, Estimated", "Constrained TO regression, Fixed")
>>
>> OAASDlist=tk2listbox(OtofanR, values=c("Traditional Calculation,
>> Fixed", "Constrained BY regression, Estimated", "Constrained TO
>> regression, Fixed"), selection=1, selectmode = "single", height = 4,
>> scroll = "none", autoscroll = "x", enabled = TRUE, width=35)
>>
>> tkgrid(tklabel(OtofanR,text="Standard Deviation"),column=3,row=11)
>>
>> tkgrid(OAASDlist,column=3,row=12)
>>
>> OSDPhase <- c("0", "1", "2", "3")
>>
>> OSDlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), selection=4,
>> selectmode = "single", height = 4, scroll = "none", autoscroll = "x",
>> enabled = TRUE)
>>
>> tkgrid(tklabel(OtofanR,text="St Dev Activation Phase (0 = Fixed, do
>> not
>> estimate)"),column=3,row=14)
>>
>> tkgrid(OSDlist,column=3,row=15)
>>
>> OSDdist <- c("0", "1", "2", "3")
>>
>> OSDdlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"),
>> selection=1, selectmode = "single", height = 4, scroll = "none",
>> autoscroll = "x", enabled = TRUE)
>>
>> tkgrid(tklabel(OtofanR,text="Estimate St Dev Distribution in Phase (0
>> = do not estimate)"),column=3,row=17)
>>
>> tkgrid(OSDdlist,column=3,row=18)
>>
>> #Dependencies Tab
>>
>> tkgrid(tklabel(OtofanR,text="DEPENDENCIES"),sticky="we",column=4,row=1
>> )
>>
>> tkgrid(tklabel(OtofanR,text="Correlations"),sticky="we",column=4,row=2
>> )
>>
>> CORest <- c("Age-Specific", "Age-Invariant")
>>
>> CORRlist=tk2listbox(OtofanR, values=c("Age-Specific",
>> "Age-Invariant"), selection=1, selectmode = "single", height = 4,
>> scroll = "none", autoscroll = "x", enabled = TRUE)
>>
>> tkgrid(tklabel(OtofanR,text="Method"),column=4,row=3)
>>
>> tkgrid(CORRlist,column=4,row=3)
>>
>> CPhase <- c("1", "2", "3")
>>
>> CPlist=tk2listbox(OtofanR, values=c("1", "2", "3"), selection=3,
>> selectmode = "single", height = 4, scroll = "none", autoscroll = "x",
>> enabled = TRUE)
>>
>> tkgrid(tklabel(OtofanR,text="Activation Phase"),column=4,row=5)
>>
>> tkgrid(CPlist,column=4,row=6)
>>
>> PAAPhase <- c("1", "2", "3")
>>
>> PAAlist=tk2listbox(OtofanR, values=c("1", "2", "3"), selection=1,
>> selectmode = "single", height = 4, scroll = "none", autoscroll = "x",
>> enabled = TRUE)
>>
>> tkgrid(tklabel(OtofanR,text="Activation Phase to Estimate Proportions
>> at
>> Age"),column=4,row=8)
>>
>> tkgrid(PAAlist,column=4,row=9)
>>
>> OtofanCallback = function(detlist,LAAdet,LPhase,LPlist) {
>>
>>                                 if
>> (tclvalue(tclVar(LAAdet[as.numeric(tkcurselection(detlist))+1]))!="3"
>> &
>> tclvalue(tclVar(LPhase[as.numeric(tkcurselection(LPlist))+1]))=="0")tk
>> se
>> lection.set(detlist, 2)
>>
>> cat(tclvalue(tclVar(LAAdet[as.numeric(tkcurselection(detlist))+1])))
>>
>> }
>>
>> tkbind(detlist,"<Key>", OtofanCallback(detlist,LAAdet,LPhase,LPlist))
>>
>> }
>>
>> OtofanGUI()
>>
>>
>>
>> [immediately outputs as below]
>>
>> Mean, Estimated<Tcl>
>>
>>
>>
>> Mark Fowler
>> Population Ecology Division
>> Bedford Inst of Oceanography
>> Dept Fisheries & Oceans
>> Dartmouth NS Canada
>> B2Y 4A2
>> Tel. (902) 426-3529
>> Fax (902) 426-9710
>> Email Mark.Fowler at dfo-mpo.gc.ca <mailto:Mark.Fowler at dfo-mpo.gc.ca>
>>
>>
>>
>>
>>
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>
>
> --
> Gregory (Greg) L. Snow Ph.D.
> 538280 at gmail.com



-- 
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com


From ripley at stats.ox.ac.uk  Wed Jun  4 19:52:43 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 4 Jun 2014 18:52:43 +0100
Subject: [R] tkbind (callback)
In-Reply-To: <CAFEqCdzG+XH=RQMQ49dco0E+J=MM5dQpHJWQ1h6Kh2rYCZ+Lhw@mail.gmail.com>
References: <CB5182AD107F0943AEF20FD01FB8A7F80682C8D7@marbioexc02.mar.dfo-mpo.ca>	<CAFEqCdxZ6qdm66eML_EUpuipKpi+7PVzznF1kZm72uBxkbDPDw@mail.gmail.com>	<CB5182AD107F0943AEF20FD01FB8A7F80682CB14@marbioexc02.mar.dfo-mpo.ca>
	<CAFEqCdzG+XH=RQMQ49dco0E+J=MM5dQpHJWQ1h6Kh2rYCZ+Lhw@mail.gmail.com>
Message-ID: <538F5CEB.1000003@stats.ox.ac.uk>

On 04/06/2014 18:30, Greg Snow wrote:
> Installed with R is the documentation for tcl/tk (the original
> language), on my computer it is in the Doc folder/dir of the TCL
> folder/dir under the R folder.  In that documentation on listbox, near

That will only be the case on Windows.  On other OSes you need to invoke 
one of

man listbox
man Tk::Listbox

or perhaps something similar.



> the bottom in the "Default Bindings" section it mentions the virtual
> event "<<ListboxSelect>>", so I tried that and it worked.  It looks
> like the double angle brackets are because it is a virtual event
> rather than a regular (real, non-virtual, ...?) event.  Virtual events
> are not tied to a direct interaction like keypress or mouse click, but
> rather a given widget can generate a virtual event at a time when it
> makes sense to do so, e.g. <<ListboxSelect>>.
>
> On Wed, Jun 4, 2014 at 10:42 AM, Fowler, Mark <Mark.Fowler at dfo-mpo.gc.ca> wrote:
>> Thanks for responding, Greg. That works. Plus I wasn't aware of a ListboxSelect option, which is much more convenient. Trivial question if you know off the top of your head - why  <<ListboxSelect>> rather than < ListboxSelect>? I never saw any examples of that type of enclosure.
>>
>> I cced the list. Ran into a lot of dead end threads related to my question, and callbacks in general, using tcltk or tcltk2. Might spare others some headaches.
>>
>>
>>
>> -----Original Message-----
>> From: Greg Snow [mailto:538280 at gmail.com]
>> Sent: June 3, 2014 1:41 PM
>> To: Fowler, Mark
>> Cc: R help
>> Subject: Re: [R] tkbind (callback)
>>
>> I think the problem is that the tkbind function is expecting the 3rd argument to be a function and the arguments of functions passed to tkbind need to have specific names.  In your call when you do the binding the OtoFanCallback function is called at that time (hence the initial print) and its return value (which is the return value of the final cat call) is used as the binding function, which ends up doing nothing as you see.
>>
>> I changed your bind command to:
>>
>> tkbind(detlist,"<<ListboxSelect>>", OtofanCallback)
>>
>> and I changed the OtofanCallback function to have no arguments and ran the script and everything looks much more like it is working, at least when I changed the selection in the list box I saw the new value 'cat'ed to the screen.
>>
>> hope this helps
>>
>>
>> On Tue, Jun 3, 2014 at 6:32 AM, Fowler, Mark <Mark.Fowler at dfo-mpo.gc.ca> wrote:
>>> Hello,
>>>
>>>
>>>
>>> I've migrated an ADMB application with a user dialog from S to R. The
>>> script below will produce a dialog in R, and don't need data to
>>> address this issue. It works in terms of capturing user inputs to pass
>>> along, no problem running the ADMB program. However some of the
>>> options have dependencies. E.g. if we fix a parameter it should not
>>> have an estimation phase, but we want the full suite of phases
>>> available to the user when the parameter is active. Thus the selection
>>> of one listbox is constrained by the selection of another listbox. I
>>> had callback functionality in S for this, and am now trying to
>>> implement callbacks in
>>> tcltk2 using tkbind. At the bottom of the dialog function below I
>>> include an attempt at a callback function. Just for one
>>> parameter-phase pair and scenario to illustrate. It includes a
>>> troubleshooting cat to tell if it works. When I run this it
>>> immediately cats the correct value, although this is premature, as I haven't interacted with the dialog yet.
>>> More importantly, it subsequently ignores interactions. If I change
>>> the parameter definition in one listbox, the callback should verify
>>> that the estimation phase is appropriate in the other listbox and
>>> change it if not. But beyond running the callback function when the
>>> dialog is created, it does not appear to be active after that. Anybody
>>> know what I'm doing wrong?
>>>
>>>
>>>
>>> require(tcltk2)
>>>
>>> OtofanGUI=function() {
>>>
>>> OtofanR=tktoplevel()
>>>
>>> tktitle(OtofanR) <- "Age-Related Data Analysis with OTOFAN"
>>>
>>> tkgrid(tklabel(OtofanR,text="DATA SELECTION & DEFINITION"),stick="we")
>>>
>>> tkgrid(tklabel(OtofanR,text="If you already have files of
>>> ADMB-formatted data, and/or optional PIN, click button(s) to retrieve
>>> them"))
>>>
>>> ADMBdata <- tk2button(OtofanR, text = "ADMB Data", width = 10, command
>>> =
>>> function() tkgetOpenFile())
>>>
>>> ADMBfile <- tk2button(OtofanR, text = "ADMB Pin", width = 10, command
>>> =
>>> function() tkgetOpenFile())
>>>
>>> tkgrid(ADMBdata)
>>>
>>> tkgrid(ADMBfile)
>>>
>>> tkgrid(tklabel(OtofanR,text=""))
>>>
>>> tkgrid(tklabel(OtofanR,text="If you have a dataframe in R,
>>> confirm/identify it, and the variables to build the ADMB inputs"))
>>>
>>> CustomFile <- tclVar("AgeData")
>>>
>>> tkgrid(tklabel(OtofanR,text="Dataframe name"),tk2entry(OtofanR,
>>> textvariable=CustomFile, width=20))
>>>
>>> Ages <- tclVar("AgeYears")
>>>
>>> tkgrid(tklabel(OtofanR,text="Age variable"),tk2entry(OtofanR,
>>> textvariable=Ages, width=20))
>>>
>>> FishLens <- tclVar("FishLength")
>>>
>>> tkgrid(tklabel(OtofanR,text="Fish Length variable"),tk2entry(OtofanR,
>>> textvariable=FishLens, width=20))
>>>
>>> OtoWts <- tclVar("NA")
>>>
>>> tkgrid(tklabel(OtofanR,text="Otolith Weight
>>> variable"),tk2entry(OtofanR, textvariable=OtoWts, width=20))
>>>
>>> OtoLens <- tclVar("NA")
>>>
>>> tkgrid(tklabel(OtofanR,text="Otolith Length
>>> variable"),tk2entry(OtofanR, textvariable=OtoLens, width=20))
>>>
>>> FishWts <- tclVar("NA")
>>>
>>> tkgrid(tklabel(OtofanR,text="Fish Weight variable"),tk2entry(OtofanR,
>>> textvariable=FishWts, width=20))
>>>
>>> GroupID <- tclVar("NA")
>>>
>>> tkgrid(tklabel(OtofanR,text="Group ID variable"),tk2entry(OtofanR,
>>> textvariable=GroupID, width=20))
>>>
>>> YearID <- tclVar("NA")
>>>
>>> tkgrid(tklabel(OtofanR,text="Year ID variable"),tk2entry(OtofanR,
>>> textvariable=YearID, width=20))
>>>
>>> Sex <- tclVar("NA")
>>>
>>> tkgrid(tklabel(OtofanR,text="Sex variable"),tk2entry(OtofanR,
>>> textvariable=Sex, width=20))
>>>
>>> LFdata <- tclVar("NA")
>>>
>>> tkgrid(tklabel(OtofanR,text="Separate Length-Frequency Dataframe
>>> name"),tk2entry(OtofanR, textvariable=LFdata, width=20))
>>>
>>> FreqVar <- tclVar("NA")
>>>
>>> tkgrid(tklabel(OtofanR,text="Frequency variable"),tk2entry(OtofanR,
>>> textvariable=FreqVar, width=20))
>>>
>>> OSTypes <- c("Random at Length", "Simple Random")
>>>
>>> OSlist=tk2listbox(OtofanR, values=OSTypes, selection=1, selectmode =
>>> "single", height = 2, scroll = "none", autoscroll = "x", enabled =
>>> TRUE)
>>>
>>> tkgrid(tklabel(OtofanR,text="Otolith Sample Type"),OSlist)
>>>
>>> ASTypes <- c("Random at Length", "Simple Random")
>>>
>>> ASlist=tk2listbox(OtofanR, values=ASTypes, selection=1, selectmode =
>>> "single", height = 2, scroll = "none", autoscroll = "x", enabled =
>>> TRUE)
>>>
>>> tkgrid(tklabel(OtofanR,text="Age Sample Type"),ASlist)
>>>
>>> AppApply <- tk2button(OtofanR, text = "Apply", width = 7, command =
>>> function()
>>> OtofanDT(tclvalue(ADMBdata),tclvalue(ADMBFile),tclvalue(ADMBPin),ADMBF="
>>> NA",ADMBP="NA",tclvalue(GS),
>>>
>>>
>>> Regdata="NA",tclvalue(CustomFile),tclvalue(Ages),tclvalue(FishLens),tc
>>> lv
>>> alue(OtoWts),tclvalue(OtoLens),tclvalue(FishWts),tclvalue(GroupID),tcl
>>> va
>>> lue(YearID),
>>>
>>>                  tclvalue(Sex),tclvalue(LFdata),tclvalue(FreqVar),
>>>
>>>
>>> tclvalue(tclVar(OSTypes[as.numeric(tkcurselection(OSlist))+1])),tclval
>>> ue (tclVar(ASTypes[as.numeric(tkcurselection(ASlist))+1])),
>>>
>>>
>>> tclvalue(tclVar(LAAdet[as.numeric(tkcurselection(detlist))+1])),tclval
>>> ue (tclVar(LPhase[as.numeric(tkcurselection(LPlist))+1])),
>>>
>>>
>>> tclvalue(tclVar(Ldist[as.numeric(tkcurselection(Ldlist))+1])),tclvalue
>>> (t clVar(LAAstdev[as.numeric(tkcurselection(LAASDlist))+1])),
>>>
>>>
>>> tclvalue(tclVar(LSDPhase[as.numeric(tkcurselection(LSDlist))+1])),tclv
>>> al ue(tclVar(LSDdist[as.numeric(tkcurselection(LSDdlist))+1])),
>>>
>>>
>>> tclvalue(tclVar(LSDcov[as.numeric(tkcurselection(LSDcovlist))+1])),OAA="
>>> NA",tclvalue(tclVar(OAAdet[as.numeric(tkcurselection(odetlist))+1])),
>>>
>>>
>>> tclvalue(tclVar(OPhase[as.numeric(tkcurselection(OPlist))+1])),tclvalu
>>> e( tclVar(Odist[as.numeric(tkcurselection(Odlist))+1])),
>>>
>>>
>>> tclvalue(tclVar(OAAstdev[as.numeric(tkcurselection(OAASDlist))+1])),tc
>>> lv alue(tclVar(OSDPhase[as.numeric(tkcurselection(OSDlist))+1])),
>>>
>>>
>>> tclvalue(tclVar(OSDdist[as.numeric(tkcurselection(OSDdlist))+1])),CORR="
>>> NA",tclvalue(tclVar(CORest[as.numeric(tkcurselection(CORRlist))+1])),
>>>
>>>
>>> tclvalue(tclVar(CPhase[as.numeric(tkcurselection(CPlist))+1])),GS2="NA
>>> ",
>>> tclvalue(tclVar(PAAPhase[as.numeric(tkcurselection(PAAlist))+1]))))
>>>
>>> AppCancel <- tk2button(OtofanR, text = "Cancel", width = 7, command =
>>> function() tkdestroy(OtofanR))
>>>
>>> tkgrid(AppApply,sticky="w")
>>>
>>> tkgrid(AppCancel,sticky="w")
>>>
>>> #Length at Age Tab
>>>
>>> tkgrid(tklabel(OtofanR,text="LENGTH AT AGE
>>> FITTING"),sticky="we",column=2,row=1)
>>>
>>> LAAdet <- c("Mean, Estimated", "Constrained BY VBGF, Estimated",
>>> "Constrained TO VBGF, Fixed")
>>>
>>> detlist=tk2listbox(OtofanR, values=c("Mean, Estimated", "Constrained
>>> BY VBGF, Estimated", "Constrained TO VBGF, Fixed"), selection=1,
>>> selectmode = "single", height = 3, scroll = "none", autoscroll = "x",
>>> enabled = TRUE, width=30)
>>>
>>> tkgrid(tklabel(OtofanR,text="Determination Method"),column=2,row=2)
>>>
>>> tkgrid(detlist,column=2,row=3)
>>>
>>> LPhase <- c("0", "1", "2", "3")
>>>
>>> LPlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), selection=3,
>>> selectmode = "single", height = 4, scroll = "none", autoscroll = "x",
>>> enabled = TRUE)
>>>
>>> tkgrid(tklabel(OtofanR,text="Activation Phase (0 = Fixed, do not
>>> estimate)"),column=2,row=5)
>>>
>>> tkgrid(LPlist,column=2,row=6)
>>>
>>> Ldist <- c("0", "1", "2", "3")
>>>
>>> Ldlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), selection=1,
>>> selectmode = "single", height = 4, scroll = "none", autoscroll = "x",
>>> enabled = TRUE)
>>>
>>> tkgrid(tklabel(OtofanR,text="Estimate Distribution in Phase (0 =
>>> Fixed, do not estimate)"),column=2,row=8)
>>>
>>> tkgrid(Ldlist,column=2,row=9)
>>>
>>> LAAstdev <- c("Traditional Calculation, Fixed", "Constrained BY
>>> regression, Estimated", "Constrained TO regression, Fixed")
>>>
>>> LAASDlist=tk2listbox(OtofanR, values=c("Traditional Calculation,
>>> Fixed", "Constrained BY regression, Estimated", "Constrained TO
>>> regression, Fixed"), selection=1, selectmode = "single", height = 4,
>>> scroll = "none", autoscroll = "x", enabled = TRUE, width=35)
>>>
>>> tkgrid(tklabel(OtofanR,text="Standard Deviation"),column=2,row=11)
>>>
>>> tkgrid(LAASDlist,column=2,row=12)
>>>
>>> LSDPhase <- c("0", "1", "2", "3")
>>>
>>> LSDlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), selection=4,
>>> selectmode = "single", height = 4, scroll = "none", autoscroll = "x",
>>> enabled = TRUE)
>>>
>>> tkgrid(tklabel(OtofanR,text="St Dev Activation Phase (0 = Fixed, do
>>> not
>>> estimate)"),column=2,row=14)
>>>
>>> tkgrid(LSDlist,column=2,row=15)
>>>
>>> LSDdist <- c("0", "1", "2", "3")
>>>
>>> LSDdlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"),
>>> selection=1, selectmode = "single", height = 4, scroll = "none",
>>> autoscroll = "x", enabled = TRUE)
>>>
>>> tkgrid(tklabel(OtofanR,text="Estimate St Dev Distribution in Phase (0
>>> = do not estimate)"),column=2,row=17)
>>>
>>> tkgrid(LSDdlist,column=2,row=18)
>>>
>>> LSDcov <- c("0", "1", "2", "3")
>>>
>>> LSDcovlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"),
>>> selection=1, selectmode = "single", height = 4, scroll = "none",
>>> autoscroll = "x", enabled = TRUE)
>>>
>>> tkgrid(tklabel(OtofanR,text="Estimate CV in Phase (0 = Fixed, do not
>>> estimate)"),column=2,row=20)
>>>
>>> tkgrid(LSDcovlist,column=2,row=21)
>>>
>>> #Otolith at Age Tab
>>>
>>> tkgrid(tklabel(OtofanR,text="OTOLITH METRICS AT AGE
>>> FITTING"),sticky="we",column=3,row=1)
>>>
>>> OAAdet <- c("Mean, Estimated", "Constrained BY regression, Estimated",
>>> "Constrained TO regression, Fixed")
>>>
>>> odetlist=tk2listbox(OtofanR, values=c("Mean, Estimated", "Constrained
>>> BY regression, Estimated", "Constrained TO regression, Fixed"),
>>> selection=1, selectmode = "single", height = 3, scroll = "none",
>>> autoscroll = "x", enabled = TRUE, width=30)
>>>
>>> tkgrid(tklabel(OtofanR,text="Determination Method"),column=3,row=2)
>>>
>>> tkgrid(odetlist,column=3,row=3)
>>>
>>> OPhase <- c("0", "1", "2", "3")
>>>
>>> OPlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), selection=3,
>>> selectmode = "single", height = 4, scroll = "none", autoscroll = "x",
>>> enabled = TRUE)
>>>
>>> tkgrid(tklabel(OtofanR,text="Activation Phase (0 = Fixed, do not
>>> estimate)"),column=3,row=5)
>>>
>>> tkgrid(OPlist,column=3,row=6)
>>>
>>> Odist <- c("0", "1", "2", "3")
>>>
>>> Odlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), selection=1,
>>> selectmode = "single", height = 4, scroll = "none", autoscroll = "x",
>>> enabled = TRUE)
>>>
>>> tkgrid(tklabel(OtofanR,text="Estimate Distribution in Phase (0 =
>>> Fixed, do not estimate)"),column=3,row=8)
>>>
>>> tkgrid(Odlist,column=3,row=9)
>>>
>>> OAAstdev <- c("Traditional Calculation, Fixed", "Constrained BY
>>> regression, Estimated", "Constrained TO regression, Fixed")
>>>
>>> OAASDlist=tk2listbox(OtofanR, values=c("Traditional Calculation,
>>> Fixed", "Constrained BY regression, Estimated", "Constrained TO
>>> regression, Fixed"), selection=1, selectmode = "single", height = 4,
>>> scroll = "none", autoscroll = "x", enabled = TRUE, width=35)
>>>
>>> tkgrid(tklabel(OtofanR,text="Standard Deviation"),column=3,row=11)
>>>
>>> tkgrid(OAASDlist,column=3,row=12)
>>>
>>> OSDPhase <- c("0", "1", "2", "3")
>>>
>>> OSDlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), selection=4,
>>> selectmode = "single", height = 4, scroll = "none", autoscroll = "x",
>>> enabled = TRUE)
>>>
>>> tkgrid(tklabel(OtofanR,text="St Dev Activation Phase (0 = Fixed, do
>>> not
>>> estimate)"),column=3,row=14)
>>>
>>> tkgrid(OSDlist,column=3,row=15)
>>>
>>> OSDdist <- c("0", "1", "2", "3")
>>>
>>> OSDdlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"),
>>> selection=1, selectmode = "single", height = 4, scroll = "none",
>>> autoscroll = "x", enabled = TRUE)
>>>
>>> tkgrid(tklabel(OtofanR,text="Estimate St Dev Distribution in Phase (0
>>> = do not estimate)"),column=3,row=17)
>>>
>>> tkgrid(OSDdlist,column=3,row=18)
>>>
>>> #Dependencies Tab
>>>
>>> tkgrid(tklabel(OtofanR,text="DEPENDENCIES"),sticky="we",column=4,row=1
>>> )
>>>
>>> tkgrid(tklabel(OtofanR,text="Correlations"),sticky="we",column=4,row=2
>>> )
>>>
>>> CORest <- c("Age-Specific", "Age-Invariant")
>>>
>>> CORRlist=tk2listbox(OtofanR, values=c("Age-Specific",
>>> "Age-Invariant"), selection=1, selectmode = "single", height = 4,
>>> scroll = "none", autoscroll = "x", enabled = TRUE)
>>>
>>> tkgrid(tklabel(OtofanR,text="Method"),column=4,row=3)
>>>
>>> tkgrid(CORRlist,column=4,row=3)
>>>
>>> CPhase <- c("1", "2", "3")
>>>
>>> CPlist=tk2listbox(OtofanR, values=c("1", "2", "3"), selection=3,
>>> selectmode = "single", height = 4, scroll = "none", autoscroll = "x",
>>> enabled = TRUE)
>>>
>>> tkgrid(tklabel(OtofanR,text="Activation Phase"),column=4,row=5)
>>>
>>> tkgrid(CPlist,column=4,row=6)
>>>
>>> PAAPhase <- c("1", "2", "3")
>>>
>>> PAAlist=tk2listbox(OtofanR, values=c("1", "2", "3"), selection=1,
>>> selectmode = "single", height = 4, scroll = "none", autoscroll = "x",
>>> enabled = TRUE)
>>>
>>> tkgrid(tklabel(OtofanR,text="Activation Phase to Estimate Proportions
>>> at
>>> Age"),column=4,row=8)
>>>
>>> tkgrid(PAAlist,column=4,row=9)
>>>
>>> OtofanCallback = function(detlist,LAAdet,LPhase,LPlist) {
>>>
>>>                                  if
>>> (tclvalue(tclVar(LAAdet[as.numeric(tkcurselection(detlist))+1]))!="3"
>>> &
>>> tclvalue(tclVar(LPhase[as.numeric(tkcurselection(LPlist))+1]))=="0")tk
>>> se
>>> lection.set(detlist, 2)
>>>
>>> cat(tclvalue(tclVar(LAAdet[as.numeric(tkcurselection(detlist))+1])))
>>>
>>> }
>>>
>>> tkbind(detlist,"<Key>", OtofanCallback(detlist,LAAdet,LPhase,LPlist))
>>>
>>> }
>>>
>>> OtofanGUI()
>>>
>>>
>>>
>>> [immediately outputs as below]
>>>
>>> Mean, Estimated<Tcl>
>>>
>>>
>>>
>>> Mark Fowler
>>> Population Ecology Division
>>> Bedford Inst of Oceanography
>>> Dept Fisheries & Oceans
>>> Dartmouth NS Canada
>>> B2Y 4A2
>>> Tel. (902) 426-3529
>>> Fax (902) 426-9710
>>> Email Mark.Fowler at dfo-mpo.gc.ca <mailto:Mark.Fowler at dfo-mpo.gc.ca>
>>>
>>>
>>>
>>>
>>>
>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>>
>>
>> --
>> Gregory (Greg) L. Snow Ph.D.
>> 538280 at gmail.com
>
>
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From smartpink111 at yahoo.com  Wed Jun  4 19:54:42 2014
From: smartpink111 at yahoo.com (arun)
Date: Wed, 4 Jun 2014 10:54:42 -0700 (PDT)
Subject: [R] How to extract data for the week ending on Friday from date
	column.
Message-ID: <1401904482.51529.YahooMailNeo@web142601.mail.bf1.yahoo.com>

Hi,

Using the example data,
library(zoo) 
z1 <- read.zoo("dfRaw_20140509.csv",sep="",index.column=2,format="%Y%m%d")
z1
#?????????? P_num??? P_ID Totalvalue
#2013-05-10 25193 1230238????? 1.203
#2013-05-24 25190 1230238????? 1.201
#2013-07-05 25191 1230238????? 1.208
#2013-08-02 25194 1230238????? 1.195
#2013-09-06 25192 1230238????? 1.209
#2013-09-20?? 915 1230238????? 1.124
#2013-10-25 17980 1230238????? 1.276
#2013-11-08 23316 1230238????? 1.431
#2013-11-29? 3817 1230238????? 2.082
#2014-01-10 17901 1230238????? 1.053
#2014-01-24 23315 1230238????? 1.106
#2014-02-14 32554 1230238????? 1.493
#2014-03-14 23311 1230238????? 1.072
#2014-03-14 25885 1230238????? 1.000
#2014-03-21 32550 1230238????? 1.383
#2014-05-09 32551 1230238????? 1.309

time(z1)[8] <- "2013-10-28"
format(time(z1), "%w")
?#[1] "5" "5" "5" "5" "5" "5" "5" "1" "5" "5" "5" "5" "5" "5" "5" "5"

?z1[format(time(z1), "%w") %in% 5,]


A.K.


The data loks like this 
? ? ? ? P_num???? ? Date???? ?P_ID ? ? ?Totalvalue 
1????00915????20130920????1230238????1.124 
2????17901????20140110????1230238????1.053 
3????17980????20131025????1230238????1.276 
4????23311????20140314????1230238????1.072 
5????23315????20140124????1230238????1.106 
6????23316????20131108????1230238????1.431 
7????25190????20130524????1230238????1.201 
8????25191????20130705????1230238????1.208 
9????25192????20130906????1230238????1.209 
10????25193????20130510????1230238????1.203 
11????25194????20130802????1230238????1.195 
12????25885????20140314????1230238????1 
13????32550????20140321????1230238????1.383 
14????32551????20140509????1230238????1.309 
15????32554????20140214????1230238????1.493 
16????3817????20131129????1230238????2.082 

I have used the ZOO package but still I am getting an error. Can you please help. 

library(zoo) 
z <- read.zoo("dfRaw_20140509.csv", header = TRUE, sep = 
",",format = "%d-%b-%y",colClasses = c("numeric", "numeric", 
"character", "character", "numeric", "numeric")) 
z[format(time(z), "%w") %in% 2,] 
Error in `[.data.frame`(rval, , j) : undefined columns selected


From Mark.Fowler at dfo-mpo.gc.ca  Wed Jun  4 20:24:28 2014
From: Mark.Fowler at dfo-mpo.gc.ca (Fowler, Mark)
Date: Wed, 4 Jun 2014 15:24:28 -0300
Subject: [R] tkbind (callback)
In-Reply-To: <538F5CEB.1000003@stats.ox.ac.uk>
References: <CB5182AD107F0943AEF20FD01FB8A7F80682C8D7@marbioexc02.mar.dfo-mpo.ca>
	<CAFEqCdxZ6qdm66eML_EUpuipKpi+7PVzznF1kZm72uBxkbDPDw@mail.gmail.com>
	<CB5182AD107F0943AEF20FD01FB8A7F80682CB14@marbioexc02.mar.dfo-mpo.ca>
	<CAFEqCdzG+XH=RQMQ49dco0E+J=MM5dQpHJWQ1h6Kh2rYCZ+Lhw@mail.gmail.com>
	<538F5CEB.1000003@stats.ox.ac.uk>
Message-ID: <CB5182AD107F0943AEF20FD01FB8A7F80682CB75@marbioexc02.mar.dfo-mpo.ca>

And the path may vary a bit between installations within Windows, but
'somewhere in the R folder' is close enough to find it.

-----Original Message-----
From: Prof Brian Ripley [mailto:ripley at stats.ox.ac.uk] 
Sent: June 4, 2014 2:53 PM
To: Greg Snow; Fowler, Mark
Cc: R help
Subject: Re: [R] tkbind (callback)

On 04/06/2014 18:30, Greg Snow wrote:
> Installed with R is the documentation for tcl/tk (the original 
> language), on my computer it is in the Doc folder/dir of the TCL 
> folder/dir under the R folder.  In that documentation on listbox, near

That will only be the case on Windows.  On other OSes you need to invoke
one of

man listbox
man Tk::Listbox

or perhaps something similar.



> the bottom in the "Default Bindings" section it mentions the virtual 
> event "<<ListboxSelect>>", so I tried that and it worked.  It looks 
> like the double angle brackets are because it is a virtual event 
> rather than a regular (real, non-virtual, ...?) event.  Virtual events

> are not tied to a direct interaction like keypress or mouse click, but

> rather a given widget can generate a virtual event at a time when it 
> makes sense to do so, e.g. <<ListboxSelect>>.
>
> On Wed, Jun 4, 2014 at 10:42 AM, Fowler, Mark
<Mark.Fowler at dfo-mpo.gc.ca> wrote:
>> Thanks for responding, Greg. That works. Plus I wasn't aware of a
ListboxSelect option, which is much more convenient. Trivial question if
you know off the top of your head - why  <<ListboxSelect>> rather than <
ListboxSelect>? I never saw any examples of that type of enclosure.
>>
>> I cced the list. Ran into a lot of dead end threads related to my
question, and callbacks in general, using tcltk or tcltk2. Might spare
others some headaches.
>>
>>
>>
>> -----Original Message-----
>> From: Greg Snow [mailto:538280 at gmail.com]
>> Sent: June 3, 2014 1:41 PM
>> To: Fowler, Mark
>> Cc: R help
>> Subject: Re: [R] tkbind (callback)
>>
>> I think the problem is that the tkbind function is expecting the 3rd
argument to be a function and the arguments of functions passed to
tkbind need to have specific names.  In your call when you do the
binding the OtoFanCallback function is called at that time (hence the
initial print) and its return value (which is the return value of the
final cat call) is used as the binding function, which ends up doing
nothing as you see.
>>
>> I changed your bind command to:
>>
>> tkbind(detlist,"<<ListboxSelect>>", OtofanCallback)
>>
>> and I changed the OtofanCallback function to have no arguments and
ran the script and everything looks much more like it is working, at
least when I changed the selection in the list box I saw the new value
'cat'ed to the screen.
>>
>> hope this helps
>>
>>
>> On Tue, Jun 3, 2014 at 6:32 AM, Fowler, Mark
<Mark.Fowler at dfo-mpo.gc.ca> wrote:
>>> Hello,
>>>
>>>
>>>
>>> I've migrated an ADMB application with a user dialog from S to R. 
>>> The script below will produce a dialog in R, and don't need data to 
>>> address this issue. It works in terms of capturing user inputs to 
>>> pass along, no problem running the ADMB program. However some of the

>>> options have dependencies. E.g. if we fix a parameter it should not 
>>> have an estimation phase, but we want the full suite of phases 
>>> available to the user when the parameter is active. Thus the 
>>> selection of one listbox is constrained by the selection of another 
>>> listbox. I had callback functionality in S for this, and am now 
>>> trying to implement callbacks in
>>> tcltk2 using tkbind. At the bottom of the dialog function below I 
>>> include an attempt at a callback function. Just for one 
>>> parameter-phase pair and scenario to illustrate. It includes a 
>>> troubleshooting cat to tell if it works. When I run this it 
>>> immediately cats the correct value, although this is premature, as I
haven't interacted with the dialog yet.
>>> More importantly, it subsequently ignores interactions. If I change 
>>> the parameter definition in one listbox, the callback should verify 
>>> that the estimation phase is appropriate in the other listbox and 
>>> change it if not. But beyond running the callback function when the 
>>> dialog is created, it does not appear to be active after that. 
>>> Anybody know what I'm doing wrong?
>>>
>>>
>>>
>>> require(tcltk2)
>>>
>>> OtofanGUI=function() {
>>>
>>> OtofanR=tktoplevel()
>>>
>>> tktitle(OtofanR) <- "Age-Related Data Analysis with OTOFAN"
>>>
>>> tkgrid(tklabel(OtofanR,text="DATA SELECTION & 
>>> DEFINITION"),stick="we")
>>>
>>> tkgrid(tklabel(OtofanR,text="If you already have files of 
>>> ADMB-formatted data, and/or optional PIN, click button(s) to 
>>> retrieve
>>> them"))
>>>
>>> ADMBdata <- tk2button(OtofanR, text = "ADMB Data", width = 10, 
>>> command =
>>> function() tkgetOpenFile())
>>>
>>> ADMBfile <- tk2button(OtofanR, text = "ADMB Pin", width = 10, 
>>> command =
>>> function() tkgetOpenFile())
>>>
>>> tkgrid(ADMBdata)
>>>
>>> tkgrid(ADMBfile)
>>>
>>> tkgrid(tklabel(OtofanR,text=""))
>>>
>>> tkgrid(tklabel(OtofanR,text="If you have a dataframe in R, 
>>> confirm/identify it, and the variables to build the ADMB inputs"))
>>>
>>> CustomFile <- tclVar("AgeData")
>>>
>>> tkgrid(tklabel(OtofanR,text="Dataframe name"),tk2entry(OtofanR, 
>>> textvariable=CustomFile, width=20))
>>>
>>> Ages <- tclVar("AgeYears")
>>>
>>> tkgrid(tklabel(OtofanR,text="Age variable"),tk2entry(OtofanR, 
>>> textvariable=Ages, width=20))
>>>
>>> FishLens <- tclVar("FishLength")
>>>
>>> tkgrid(tklabel(OtofanR,text="Fish Length 
>>> variable"),tk2entry(OtofanR, textvariable=FishLens, width=20))
>>>
>>> OtoWts <- tclVar("NA")
>>>
>>> tkgrid(tklabel(OtofanR,text="Otolith Weight 
>>> variable"),tk2entry(OtofanR, textvariable=OtoWts, width=20))
>>>
>>> OtoLens <- tclVar("NA")
>>>
>>> tkgrid(tklabel(OtofanR,text="Otolith Length 
>>> variable"),tk2entry(OtofanR, textvariable=OtoLens, width=20))
>>>
>>> FishWts <- tclVar("NA")
>>>
>>> tkgrid(tklabel(OtofanR,text="Fish Weight 
>>> variable"),tk2entry(OtofanR, textvariable=FishWts, width=20))
>>>
>>> GroupID <- tclVar("NA")
>>>
>>> tkgrid(tklabel(OtofanR,text="Group ID variable"),tk2entry(OtofanR, 
>>> textvariable=GroupID, width=20))
>>>
>>> YearID <- tclVar("NA")
>>>
>>> tkgrid(tklabel(OtofanR,text="Year ID variable"),tk2entry(OtofanR, 
>>> textvariable=YearID, width=20))
>>>
>>> Sex <- tclVar("NA")
>>>
>>> tkgrid(tklabel(OtofanR,text="Sex variable"),tk2entry(OtofanR, 
>>> textvariable=Sex, width=20))
>>>
>>> LFdata <- tclVar("NA")
>>>
>>> tkgrid(tklabel(OtofanR,text="Separate Length-Frequency Dataframe 
>>> name"),tk2entry(OtofanR, textvariable=LFdata, width=20))
>>>
>>> FreqVar <- tclVar("NA")
>>>
>>> tkgrid(tklabel(OtofanR,text="Frequency variable"),tk2entry(OtofanR, 
>>> textvariable=FreqVar, width=20))
>>>
>>> OSTypes <- c("Random at Length", "Simple Random")
>>>
>>> OSlist=tk2listbox(OtofanR, values=OSTypes, selection=1, selectmode =

>>> "single", height = 2, scroll = "none", autoscroll = "x", enabled =
>>> TRUE)
>>>
>>> tkgrid(tklabel(OtofanR,text="Otolith Sample Type"),OSlist)
>>>
>>> ASTypes <- c("Random at Length", "Simple Random")
>>>
>>> ASlist=tk2listbox(OtofanR, values=ASTypes, selection=1, selectmode =

>>> "single", height = 2, scroll = "none", autoscroll = "x", enabled =
>>> TRUE)
>>>
>>> tkgrid(tklabel(OtofanR,text="Age Sample Type"),ASlist)
>>>
>>> AppApply <- tk2button(OtofanR, text = "Apply", width = 7, command =
>>> function()
>>>
OtofanDT(tclvalue(ADMBdata),tclvalue(ADMBFile),tclvalue(ADMBPin),ADMBF="
>>> NA",ADMBP="NA",tclvalue(GS),
>>>
>>>
>>> Regdata="NA",tclvalue(CustomFile),tclvalue(Ages),tclvalue(FishLens),
>>> tc
>>> lv
>>> alue(OtoWts),tclvalue(OtoLens),tclvalue(FishWts),tclvalue(GroupID),t
>>> cl
>>> va
>>> lue(YearID),
>>>
>>>                  tclvalue(Sex),tclvalue(LFdata),tclvalue(FreqVar),
>>>
>>>
>>> tclvalue(tclVar(OSTypes[as.numeric(tkcurselection(OSlist))+1])),tclv
>>> al ue (tclVar(ASTypes[as.numeric(tkcurselection(ASlist))+1])),
>>>
>>>
>>> tclvalue(tclVar(LAAdet[as.numeric(tkcurselection(detlist))+1])),tclv
>>> al ue (tclVar(LPhase[as.numeric(tkcurselection(LPlist))+1])),
>>>
>>>
>>> tclvalue(tclVar(Ldist[as.numeric(tkcurselection(Ldlist))+1])),tclval
>>> ue (t clVar(LAAstdev[as.numeric(tkcurselection(LAASDlist))+1])),
>>>
>>>
>>> tclvalue(tclVar(LSDPhase[as.numeric(tkcurselection(LSDlist))+1])),tc
>>> lv al ue(tclVar(LSDdist[as.numeric(tkcurselection(LSDdlist))+1])),
>>>
>>>
>>>
tclvalue(tclVar(LSDcov[as.numeric(tkcurselection(LSDcovlist))+1])),OAA="
>>> NA",tclvalue(tclVar(OAAdet[as.numeric(tkcurselection(odetlist))+1]))
>>> ,
>>>
>>>
>>> tclvalue(tclVar(OPhase[as.numeric(tkcurselection(OPlist))+1])),tclva
>>> lu e( tclVar(Odist[as.numeric(tkcurselection(Odlist))+1])),
>>>
>>>
>>> tclvalue(tclVar(OAAstdev[as.numeric(tkcurselection(OAASDlist))+1])),
>>> tc lv alue(tclVar(OSDPhase[as.numeric(tkcurselection(OSDlist))+1])),
>>>
>>>
>>>
tclvalue(tclVar(OSDdist[as.numeric(tkcurselection(OSDdlist))+1])),CORR="
>>> NA",tclvalue(tclVar(CORest[as.numeric(tkcurselection(CORRlist))+1]))
>>> ,
>>>
>>>
>>> tclvalue(tclVar(CPhase[as.numeric(tkcurselection(CPlist))+1])),GS2="
>>> NA
>>> ",
>>> tclvalue(tclVar(PAAPhase[as.numeric(tkcurselection(PAAlist))+1]))))
>>>
>>> AppCancel <- tk2button(OtofanR, text = "Cancel", width = 7, command 
>>> =
>>> function() tkdestroy(OtofanR))
>>>
>>> tkgrid(AppApply,sticky="w")
>>>
>>> tkgrid(AppCancel,sticky="w")
>>>
>>> #Length at Age Tab
>>>
>>> tkgrid(tklabel(OtofanR,text="LENGTH AT AGE
>>> FITTING"),sticky="we",column=2,row=1)
>>>
>>> LAAdet <- c("Mean, Estimated", "Constrained BY VBGF, Estimated", 
>>> "Constrained TO VBGF, Fixed")
>>>
>>> detlist=tk2listbox(OtofanR, values=c("Mean, Estimated", "Constrained

>>> BY VBGF, Estimated", "Constrained TO VBGF, Fixed"), selection=1, 
>>> selectmode = "single", height = 3, scroll = "none", autoscroll = 
>>> "x", enabled = TRUE, width=30)
>>>
>>> tkgrid(tklabel(OtofanR,text="Determination Method"),column=2,row=2)
>>>
>>> tkgrid(detlist,column=2,row=3)
>>>
>>> LPhase <- c("0", "1", "2", "3")
>>>
>>> LPlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), 
>>> selection=3, selectmode = "single", height = 4, scroll = "none", 
>>> autoscroll = "x", enabled = TRUE)
>>>
>>> tkgrid(tklabel(OtofanR,text="Activation Phase (0 = Fixed, do not
>>> estimate)"),column=2,row=5)
>>>
>>> tkgrid(LPlist,column=2,row=6)
>>>
>>> Ldist <- c("0", "1", "2", "3")
>>>
>>> Ldlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), 
>>> selection=1, selectmode = "single", height = 4, scroll = "none", 
>>> autoscroll = "x", enabled = TRUE)
>>>
>>> tkgrid(tklabel(OtofanR,text="Estimate Distribution in Phase (0 = 
>>> Fixed, do not estimate)"),column=2,row=8)
>>>
>>> tkgrid(Ldlist,column=2,row=9)
>>>
>>> LAAstdev <- c("Traditional Calculation, Fixed", "Constrained BY 
>>> regression, Estimated", "Constrained TO regression, Fixed")
>>>
>>> LAASDlist=tk2listbox(OtofanR, values=c("Traditional Calculation, 
>>> Fixed", "Constrained BY regression, Estimated", "Constrained TO 
>>> regression, Fixed"), selection=1, selectmode = "single", height = 4,

>>> scroll = "none", autoscroll = "x", enabled = TRUE, width=35)
>>>
>>> tkgrid(tklabel(OtofanR,text="Standard Deviation"),column=2,row=11)
>>>
>>> tkgrid(LAASDlist,column=2,row=12)
>>>
>>> LSDPhase <- c("0", "1", "2", "3")
>>>
>>> LSDlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), 
>>> selection=4, selectmode = "single", height = 4, scroll = "none", 
>>> autoscroll = "x", enabled = TRUE)
>>>
>>> tkgrid(tklabel(OtofanR,text="St Dev Activation Phase (0 = Fixed, do 
>>> not
>>> estimate)"),column=2,row=14)
>>>
>>> tkgrid(LSDlist,column=2,row=15)
>>>
>>> LSDdist <- c("0", "1", "2", "3")
>>>
>>> LSDdlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), 
>>> selection=1, selectmode = "single", height = 4, scroll = "none", 
>>> autoscroll = "x", enabled = TRUE)
>>>
>>> tkgrid(tklabel(OtofanR,text="Estimate St Dev Distribution in Phase 
>>> (0 = do not estimate)"),column=2,row=17)
>>>
>>> tkgrid(LSDdlist,column=2,row=18)
>>>
>>> LSDcov <- c("0", "1", "2", "3")
>>>
>>> LSDcovlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), 
>>> selection=1, selectmode = "single", height = 4, scroll = "none", 
>>> autoscroll = "x", enabled = TRUE)
>>>
>>> tkgrid(tklabel(OtofanR,text="Estimate CV in Phase (0 = Fixed, do not
>>> estimate)"),column=2,row=20)
>>>
>>> tkgrid(LSDcovlist,column=2,row=21)
>>>
>>> #Otolith at Age Tab
>>>
>>> tkgrid(tklabel(OtofanR,text="OTOLITH METRICS AT AGE
>>> FITTING"),sticky="we",column=3,row=1)
>>>
>>> OAAdet <- c("Mean, Estimated", "Constrained BY regression, 
>>> Estimated", "Constrained TO regression, Fixed")
>>>
>>> odetlist=tk2listbox(OtofanR, values=c("Mean, Estimated", 
>>> "Constrained BY regression, Estimated", "Constrained TO regression, 
>>> Fixed"), selection=1, selectmode = "single", height = 3, scroll = 
>>> "none", autoscroll = "x", enabled = TRUE, width=30)
>>>
>>> tkgrid(tklabel(OtofanR,text="Determination Method"),column=3,row=2)
>>>
>>> tkgrid(odetlist,column=3,row=3)
>>>
>>> OPhase <- c("0", "1", "2", "3")
>>>
>>> OPlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), 
>>> selection=3, selectmode = "single", height = 4, scroll = "none", 
>>> autoscroll = "x", enabled = TRUE)
>>>
>>> tkgrid(tklabel(OtofanR,text="Activation Phase (0 = Fixed, do not
>>> estimate)"),column=3,row=5)
>>>
>>> tkgrid(OPlist,column=3,row=6)
>>>
>>> Odist <- c("0", "1", "2", "3")
>>>
>>> Odlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), 
>>> selection=1, selectmode = "single", height = 4, scroll = "none", 
>>> autoscroll = "x", enabled = TRUE)
>>>
>>> tkgrid(tklabel(OtofanR,text="Estimate Distribution in Phase (0 = 
>>> Fixed, do not estimate)"),column=3,row=8)
>>>
>>> tkgrid(Odlist,column=3,row=9)
>>>
>>> OAAstdev <- c("Traditional Calculation, Fixed", "Constrained BY 
>>> regression, Estimated", "Constrained TO regression, Fixed")
>>>
>>> OAASDlist=tk2listbox(OtofanR, values=c("Traditional Calculation, 
>>> Fixed", "Constrained BY regression, Estimated", "Constrained TO 
>>> regression, Fixed"), selection=1, selectmode = "single", height = 4,

>>> scroll = "none", autoscroll = "x", enabled = TRUE, width=35)
>>>
>>> tkgrid(tklabel(OtofanR,text="Standard Deviation"),column=3,row=11)
>>>
>>> tkgrid(OAASDlist,column=3,row=12)
>>>
>>> OSDPhase <- c("0", "1", "2", "3")
>>>
>>> OSDlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), 
>>> selection=4, selectmode = "single", height = 4, scroll = "none", 
>>> autoscroll = "x", enabled = TRUE)
>>>
>>> tkgrid(tklabel(OtofanR,text="St Dev Activation Phase (0 = Fixed, do 
>>> not
>>> estimate)"),column=3,row=14)
>>>
>>> tkgrid(OSDlist,column=3,row=15)
>>>
>>> OSDdist <- c("0", "1", "2", "3")
>>>
>>> OSDdlist=tk2listbox(OtofanR, values=c("0", "1", "2", "3"), 
>>> selection=1, selectmode = "single", height = 4, scroll = "none", 
>>> autoscroll = "x", enabled = TRUE)
>>>
>>> tkgrid(tklabel(OtofanR,text="Estimate St Dev Distribution in Phase 
>>> (0 = do not estimate)"),column=3,row=17)
>>>
>>> tkgrid(OSDdlist,column=3,row=18)
>>>
>>> #Dependencies Tab
>>>
>>> tkgrid(tklabel(OtofanR,text="DEPENDENCIES"),sticky="we",column=4,row
>>> =1
>>> )
>>>
>>> tkgrid(tklabel(OtofanR,text="Correlations"),sticky="we",column=4,row
>>> =2
>>> )
>>>
>>> CORest <- c("Age-Specific", "Age-Invariant")
>>>
>>> CORRlist=tk2listbox(OtofanR, values=c("Age-Specific", 
>>> "Age-Invariant"), selection=1, selectmode = "single", height = 4, 
>>> scroll = "none", autoscroll = "x", enabled = TRUE)
>>>
>>> tkgrid(tklabel(OtofanR,text="Method"),column=4,row=3)
>>>
>>> tkgrid(CORRlist,column=4,row=3)
>>>
>>> CPhase <- c("1", "2", "3")
>>>
>>> CPlist=tk2listbox(OtofanR, values=c("1", "2", "3"), selection=3, 
>>> selectmode = "single", height = 4, scroll = "none", autoscroll = 
>>> "x", enabled = TRUE)
>>>
>>> tkgrid(tklabel(OtofanR,text="Activation Phase"),column=4,row=5)
>>>
>>> tkgrid(CPlist,column=4,row=6)
>>>
>>> PAAPhase <- c("1", "2", "3")
>>>
>>> PAAlist=tk2listbox(OtofanR, values=c("1", "2", "3"), selection=1, 
>>> selectmode = "single", height = 4, scroll = "none", autoscroll = 
>>> "x", enabled = TRUE)
>>>
>>> tkgrid(tklabel(OtofanR,text="Activation Phase to Estimate 
>>> Proportions at
>>> Age"),column=4,row=8)
>>>
>>> tkgrid(PAAlist,column=4,row=9)
>>>
>>> OtofanCallback = function(detlist,LAAdet,LPhase,LPlist) {
>>>
>>>                                  if
>>>
(tclvalue(tclVar(LAAdet[as.numeric(tkcurselection(detlist))+1]))!="3"
>>> &
>>> tclvalue(tclVar(LPhase[as.numeric(tkcurselection(LPlist))+1]))=="0")
>>> tk
>>> se
>>> lection.set(detlist, 2)
>>>
>>> cat(tclvalue(tclVar(LAAdet[as.numeric(tkcurselection(detlist))+1])))
>>>
>>> }
>>>
>>> tkbind(detlist,"<Key>", 
>>> OtofanCallback(detlist,LAAdet,LPhase,LPlist))
>>>
>>> }
>>>
>>> OtofanGUI()
>>>
>>>
>>>
>>> [immediately outputs as below]
>>>
>>> Mean, Estimated<Tcl>
>>>
>>>
>>>
>>> Mark Fowler
>>> Population Ecology Division
>>> Bedford Inst of Oceanography
>>> Dept Fisheries & Oceans
>>> Dartmouth NS Canada
>>> B2Y 4A2
>>> Tel. (902) 426-3529
>>> Fax (902) 426-9710
>>> Email Mark.Fowler at dfo-mpo.gc.ca <mailto:Mark.Fowler at dfo-mpo.gc.ca>
>>>
>>>
>>>
>>>
>>>
>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>>
>>
>> --
>> Gregory (Greg) L. Snow Ph.D.
>> 538280 at gmail.com
>
>
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From smartpink111 at yahoo.com  Wed Jun  4 20:28:26 2014
From: smartpink111 at yahoo.com (arun)
Date: Wed, 4 Jun 2014 11:28:26 -0700 (PDT)
Subject: [R] Selecting first and last row for each date
Message-ID: <1401906506.85654.YahooMailNeo@web142602.mail.bf1.yahoo.com>

Hi,
May be this helps:
dat <- read.table(text="DATE???????????? Price
01.01.2010???? 2
01.01.2010???? 3
01.01.2010???? 2
01.01.2010???? 7
02.01.2010???? 3
02.01.2010???? 9
02.01.2010???? 0
03.01.2010???? 2
03.01.2010???? 4
03.01.2010???? 3
03.01.2010???? 6
03.01.2010???? 8",sep="",header=TRUE,stringsAsFactors=FALSE)
#If the data is ordered by "DATE"
? indx <- with(dat, DATE[-1]!=DATE[-length(DATE)]) 
dat[sort(c(which(c(TRUE,indx)),which(c(indx,TRUE)))),]

#or
library(data.table)
dt1 <- data.table(dat, key="DATE")
dt1[,list(Price=c(Price[1],Price[.N])), by="DATE"]
A.K.


Hi Everybody.

My dataset is as follows:


DATE???????????? Price
01.01.2010???? 2
01.01.2010???? 3
01.01.2010???? 2
01.01.2010???? 7
02.01.2010???? 3
02.01.2010???? 9
02.01.2010???? 0
03.01.2010???? 2
03.01.2010???? 4
03.01.2010???? 3
03.01.2010???? 6
03.01.2010???? 8
?
I therefore have 2 columns.

I would like to extract the first and last row for each date. In other words, I would like to obtain:

DATE???????????? Price
01.01.2010???? 2
01.01.2010???? 7
02.01.2010???? 3
02.01.2010???? 0
03.01.2010???? 2
03.01.2010???? 8

Does someone know what is the necessary code to do this?

Thank you very much !

Greetings 



From smartpink111 at yahoo.com  Wed Jun  4 20:34:36 2014
From: smartpink111 at yahoo.com (arun)
Date: Wed, 4 Jun 2014 11:34:36 -0700 (PDT)
Subject: [R] recode the ID with sequential order of a dataset
In-Reply-To: <1400899801.97460.YahooMailNeo@web142606.mail.bf1.yahoo.com>
References: <1400899801.97460.YahooMailNeo@web142606.mail.bf1.yahoo.com>
Message-ID: <1401906876.17415.YahooMailNeo@web142604.mail.bf1.yahoo.com>

Hi York,
Using "dat" (assuming that the data is ordered by "ID")
dat$NEWID <- cumsum(c(TRUE,with(dat, ID[-1]!= ID[-length(ID)])))

A.K.




Hi arun,

Thanks for your reply. I think you misunderstood my question, for the new ID, I would like to have the following pattern,
ID???? TIME NEWID
1254 0????? 1
1254 1????? 1
1254 3????? 1
1254 5????? 1
1254 14???? 1
3236 0????? 2
3236 36??? 2
3236 93??? 2
1598 0????? 3
1598 0.5??? 3
1598 1?????? 3
1598 2????? 3
1598 3????? 3
1598 12??? 3
1598 36??? 3
1598 75??? 3
1598 95??? 3
1598 120? 3


How can I do this? Thanks again for your help.

York 



On Friday, May 23, 2014 10:50 PM, arun <smartpink111 at yahoo.com> wrote:
Hi,
May be this helps:
#if the data is ordered for the "TIME" column as in the example

dat <- read.table(text="ID TIME 
1254 0
1254 1
1254 3
1254 5
1254 14
3236 0
3236 36
3236 93
1598 0
1598 0.5
1598 1
1598 2
1598 3
1598 12
1598 36
1598 75
1598 95
1598 120",sep="",header=TRUE)

?dat$NewID <- with(dat, ave(rep(1,nrow(dat)),ID,FUN=cumsum))

#if your dataset is not ordered
dat1 <- structure(list(ID = c(1254L, 1254L, 1254L, 1254L, 1254L, 3236L, 
3236L, 3236L, 1598L, 1598L, 1598L, 1598L, 1598L, 1598L, 1598L, 
1598L, 1598L, 1598L), TIME = c(0, 1, 3, 5, 14, 0, 93, 36, 0, 
0.5, 1, 2, 3, 12, 36, 95, 75, 120)), .Names = c("ID", "TIME"), class = "data.frame", row.names = c(NA, 
-18L))

dat1$NewID <- with(dat1,ave(TIME,ID,FUN=order))

A.K.


?hi all,


I have the following dataset:
ID TIME DV
1254 0 .
1254 1 .
1254 3 .
1254 5 .
1254 14 .
3236 0 .
3236 36 .
3236 93 .
1598 0 .
1598 0.5 .
1598 1 .
1598 2 .
1598 3 .
1598 12 .
1598 36 .
1598 75 .
1598 95 .
1598 120 .
. . .
. . .
. . .

I want to generate a new ID column with the ID sequentially like 1,2,3,...... It would be easy to do it with equal time points for each individuals, however, right now, the data have different time points for different individuals, how can I do this to be able get the dataset I wanted?

Thanks,

York 



From shidaxia at yahoo.com  Wed Jun  4 20:59:49 2014
From: shidaxia at yahoo.com (Shi, Tao)
Date: Wed, 4 Jun 2014 11:59:49 -0700 (PDT)
Subject: [R] tab auto-fill and arrow keys are not working in R on a
	linux	cluster
In-Reply-To: <6f36b5f1-4fce-4cc7-9011-ff0c2f4d789b@email.android.com>
References: <1401839278.65398.YahooMailNeo@web124706.mail.ne1.yahoo.com>
	<6f36b5f1-4fce-4cc7-9011-ff0c2f4d789b@email.android.com>
Message-ID: <1401908389.64909.YahooMailNeo@web124703.mail.ne1.yahoo.com>


Thank you, Jeff!? I'll try that.

Tao




On Tuesday, June 3, 2014 5:22 PM, Jeff Newmiller <jdnewmil at dcn.davis.CA.us> wrote:
FAQ 7.20
---------------------------------------------------------------------------
Jeff Newmiller? ? ? ? ? ? ? ? ? ? ? ? The? ?  .....? ? ?  .....? Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>? ? ? ? Basics: ##.#.? ? ?  ##.#.? Live Go...
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? Live:?  OO#.. Dead: OO#..? Playing
Research Engineer (Solar/Batteries? ? ? ? ? ? O.O#.? ? ?  #.O#.? with
/Software/Embedded Controllers)? ? ? ? ? ? ?  .OO#.? ? ?  .OO#.? rocks...1k
--------------------------------------------------------------------------- 
Sent from my phone. Please excuse my brevity.




On June 3, 2014 4:47:58 PM PDT, "Shi, Tao" <shidaxia at yahoo.com> wrote:
>Hi List,
>
>We have R 3.1.0 installed on the head node of our linux cluster, but
>the tab auto-complete and the arrow keys are not working.? When I was
>trying to use the up/down arrow key to scroll through the old command
>history I got something like this.? Any ideas on what's going on here?
>
>Many thanks!
>
>Tao
>
>
>> sessionInfo()
>R version 3.1.0 (2014-04-10)
>Platform: x86_64-unknown-linux-gnu (64-bit)
>
>locale:
>?[1] LC_CTYPE=en_US.iso885915?????? LC_NUMERIC=C
>?[3] LC_TIME=en_US.iso885915??????? LC_COLLATE=en_US.iso885915
>?[5] LC_MONETARY=en_US.iso885915??? LC_MESSAGES=en_US.iso885915
>?[7] LC_PAPER=en_US.iso885915?????? LC_NAME=C
>?[9] LC_ADDRESS=C?????????????????? LC_TELEPHONE=C
>[11] LC_MEASUREMENT=en_US.iso885915 LC_IDENTIFICATION=C
>
>attached base packages:
>[1] stats???? graphics? grDevices utils???? datasets? methods?? base
>> ^[[A^[[A^[[A^[[A
>Error: unexpected input in "
>
>______________________________________________
>R-help at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From george_parish at hotmail.co.uk  Wed Jun  4 16:45:44 2014
From: george_parish at hotmail.co.uk (George Parish)
Date: Wed, 4 Jun 2014 15:45:44 +0100
Subject: [R] SEM specify RAM model
Message-ID: <DUB127-W18B096A9F44B37AF082373C1220@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140604/eb6afc7f/attachment.pl>

From procterw at gmail.com  Wed Jun  4 19:41:04 2014
From: procterw at gmail.com (Will Leahy)
Date: Wed, 4 Jun 2014 10:41:04 -0700
Subject: [R] Preserving topology when simplifying Spatial Polygons
Message-ID: <CAJg3qJh8KdnOAW=OCZENBk=-hqQ_qQQh8T6TJzs2Y42LPqgy4g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140604/2d1d27b5/attachment.pl>

From heba.elkholy at algoproviders.com  Wed Jun  4 15:13:36 2014
From: heba.elkholy at algoproviders.com (Heba Elkholy)
Date: Wed, 4 Jun 2014 15:13:36 +0200
Subject: [R]  StarCluster + R
Message-ID: <CAEUtzAAeSaFh3U3OGhrqEP13YF-u_Yo5k6t8S1ODerVRnWC+UA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140604/10e5c643/attachment.pl>

From costas.vorlow at gmail.com  Wed Jun  4 22:52:25 2014
From: costas.vorlow at gmail.com (Costas Vorlow)
Date: Wed, 4 Jun 2014 23:52:25 +0300
Subject: [R] Collapsing data.frame to its or xts
Message-ID: <CABfqsR9xY-6vNURtG=wnZ3q4F9DeDJTNcwdk2CA1HF7Zu6Z5GQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140604/1ad95ba0/attachment.pl>

From tgs.public.mail at gmail.com  Wed Jun  4 23:11:39 2014
From: tgs.public.mail at gmail.com (Thomas Stewart)
Date: Wed, 4 Jun 2014 17:11:39 -0400
Subject: [R] Confusing behavior when using gsub to insert unicode
 character (minimal working example provided)
In-Reply-To: <CA+vqiLGNT5bo01ViJdi+m5QZQGgxtBNrze4P=BC_vNPLGT=wDA@mail.gmail.com>
References: <CAHJ=y95ZnBF6N9F3bybToyxamJM0WMsTchAvXUOz5o0GDk2yLg@mail.gmail.com>
	<CA+vqiLGNT5bo01ViJdi+m5QZQGgxtBNrze4P=BC_vNPLGT=wDA@mail.gmail.com>
Message-ID: <CAHJ=y950pHCHDWv=0U_TJ8s_2onV5n2NKww621qNryDEC2OAOg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140604/f78a0354/attachment.pl>

From r.turner at auckland.ac.nz  Wed Jun  4 23:27:18 2014
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Thu, 05 Jun 2014 09:27:18 +1200
Subject: [R] Code for generating states and observations for HMM
In-Reply-To: <1401913330.92004.YahooMailNeo@web140302.mail.bf1.yahoo.com>
References: <1401787021.65536.YahooMailNeo@web140304.mail.bf1.yahoo.com>
	<538E4CE2.4000709@auckland.ac.nz>
	<1401913330.92004.YahooMailNeo@web140302.mail.bf1.yahoo.com>
Message-ID: <538F8F36.7070103@auckland.ac.nz>


Sorry, I haven't the time at the moment to delve into this in detail, 
but at a quick reading, your question makes no sense.  If you are trying 
to simulate a hidden Markov chain, the states have a distribution as 
determined by the transition probability matrix and
the initial state probability distribution.

I have no idea what you mean by "state "0" to come from
Poisson and state "1" from NB distributions".  As far as I can discern 
this is complete gibberish.

Good luck.

On 05/06/14 08:22, Bukar Alhaji wrote:
> Dear Dr Rolf,
>
> Thank you for your response and suggestion. But i still find it very
> difficult to relate my own problem to the sim.hmm() function you
> suggested. Because the states and the observations should come from
> Poisson and Negative Binomial distributions where state "0" to come from
> Poisson and state "1" from NB distributions. However, i run the code and
> have the states and the observations but not sure if it has been done
> correctly.
>
> Please can you explain how i should make use of sim.hmm() function to
> apply to my case, or can improvement be made on my code?
>
> Thank you so much for givig me your time.
>
> Regards
> Zakir
>
>
>
> On Tuesday, June 3, 2014 11:32 PM, Rolf Turner <r.turner at auckland.ac.nz>
> wrote:
>
>
>
> You might find it helpful to look at the sim.hmm() function in the
> "hmm.discnp" package, or the simHMM() function in the "HMM" package.
>
> cheers,
>
> Rolf Turner
>
> On 03/06/14 21:17, Bukar Alhaji wrote:
>  > Dear R buddies,
>  >
>  > Sorry for this silly question but am new to R. I am trying to
>  > generate states and observations to be use for Bayesian Hidden Markov
>  > Models analysis where i intend using mixture of Poisson and Negative
>  > binomial as emulsion. I use the code below to generate states and
>  > observations for homogeneous HMM . I would like to know if i
>  > correctly generated the data.
>  >
>  >
>  > pii = c(0.6,0.4)
>  > p1 <- matrix(c(0.8,0.2,0.3,0.7),byrow=TRUE,nrow=2)
>  >
>  >
>  >      NUM = 200
>  >      theta<-rep(0, NUM)
>  >      x<-rep(0, NUM)
>  >
>  >      ## generating the states
>  >      # initial state
>  >      theta[1]<-rbinom(1, 1, pii[1])
>  >      # other states
>  >      for (i in 2:NUM)
>  >   {
>  >        if (theta[i-1]==0)
>  >          theta[i]<-rbinom(1, 1, p1[1, 1])
>  >        else
>  >          theta[i]<-rbinom(1, 1, p1[2, 1])
>  >      }
>  >
>  >      ## generating the observations
>  >
>  >      for (i in 1:NUM)
>  >      {
>  >        if (theta[i]==0)
>  >        {
>  >          x[i]<-rpois(1, 5)
>  >        }
>  >        else
>  >        {
>  > x[i]<-rnbinom(1, 3, 0.3)
>  >        }
>  >      }
>  >      data<-list(s=theta, o=x, p1 = p1, pii = pii)
>
>
>


From alhajibukar2 at yahoo.com  Wed Jun  4 22:22:10 2014
From: alhajibukar2 at yahoo.com (Bukar Alhaji)
Date: Wed, 4 Jun 2014 13:22:10 -0700 (PDT)
Subject: [R] Code for generating states and observations for HMM
In-Reply-To: <538E4CE2.4000709@auckland.ac.nz>
References: <1401787021.65536.YahooMailNeo@web140304.mail.bf1.yahoo.com>
	<538E4CE2.4000709@auckland.ac.nz>
Message-ID: <1401913330.92004.YahooMailNeo@web140302.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140604/f76a5ef9/attachment.pl>

From bernardo_brandaum at yahoo.com.br  Wed Jun  4 22:29:00 2014
From: bernardo_brandaum at yahoo.com.br (Bernardo Santos)
Date: Wed, 4 Jun 2014 13:29:00 -0700 (PDT)
Subject: [R] SEM specify RAM model
In-Reply-To: <DUB127-W18B096A9F44B37AF082373C1220@phx.gbl>
References: <DUB127-W18B096A9F44B37AF082373C1220@phx.gbl>
Message-ID: <1401913740.3826.YahooMailNeo@web126205.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140604/4b675723/attachment.pl>

From xicogoes at hotmail.com  Thu Jun  5 01:05:03 2014
From: xicogoes at hotmail.com (Francisco Goes)
Date: Thu, 5 Jun 2014 00:05:03 +0100
Subject: [R] I need help computing PRESS statistics (qpcR package) of a
	nlsLM model (minpack.lm package)
Message-ID: <DUB121-DS17AE06C99A297DDA23B6A5CC220@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140605/1bd3b634/attachment.pl>

From fneiman at monticello.org  Thu Jun  5 00:51:00 2014
From: fneiman at monticello.org (Fraser D. Neiman)
Date: Wed, 4 Jun 2014 22:51:00 +0000
Subject: [R] RODBC and  PosgreSQL problems
In-Reply-To: <2176AD174D58CB4ABBDA99F3458C20171BE55EAA@GRANGER.monticello.org>
References: <2176AD174D58CB4ABBDA99F3458C20171BE55EAA@GRANGER.monticello.org>
Message-ID: <2176AD174D58CB4ABBDA99F3458C20171BE586C1@GRANGER.monticello.org>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140604/9971dd52/attachment.pl>

From josh.m.ulrich at gmail.com  Thu Jun  5 11:09:26 2014
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Thu, 5 Jun 2014 04:09:26 -0500
Subject: [R] Collapsing data.frame to its or xts
In-Reply-To: <CABfqsR9xY-6vNURtG=wnZ3q4F9DeDJTNcwdk2CA1HF7Zu6Z5GQ@mail.gmail.com>
References: <CABfqsR9xY-6vNURtG=wnZ3q4F9DeDJTNcwdk2CA1HF7Zu6Z5GQ@mail.gmail.com>
Message-ID: <CAPPM_gTLVes+Mr11RrgfBj0qNrh=303Rn2nME0V5jwqzzaZ4sQ@mail.gmail.com>

On Wed, Jun 4, 2014 at 3:52 PM, Costas Vorlow <costas.vorlow at gmail.com> wrote:
> Hello,
>
> I have a data.frame of a time series sampled every 15 minutes. Also the
> data are in reverse order (recent to older). It looks like the following:
>
<snip lots of data>

> Each row has 96 elements (excluding the date column), i.e., there are 96
> columns of 15 minute intervals from 0:00 time to 23:45 apart from the 1st
> column that has the dates in dd/mm/yy format. The data start on the 30th of
> June, 2011, 0:00.
>
> I made a rudimentary function to read the data.frame from its csv file,
> reverse it and create a single time series (xts) that has a 15min frequency.
>
> preparehfdata<-function(x,ISOdate=ISOdatetime(2011,06,29,23,45,0))
> {
>   mydata<-x[nrow(x):1,]
>   temp<-(as.matrix(mydata))
>   temp2<-temp[,-1]
>   temp3<-as.numeric(apply(temp2, MARGIN=1, FUN=as.vector))
>   hoursminutes <- ISOdate + seq(0:(length(temp3)-1))*15*60
>   temp4<-xts(temp3, order.by=hoursminutes)
>   return(temp4)
> }
>
> which works fine except from the part that the data.frame is missing some
> days and my time alignment overshoots. I.e., although there should have
> been observations (96 15-minute prices) for every day since June 30th 2011,
> some days are missing and some days are repeated (see rows 3, 4 and 5 for
> example above) in the data.frame, with the same prices...
>
> Is there an easier way to omit copies of same date data and account for the
> missing days when collapsing the dataframe to a single time series (xts or
> zoo)?
>
> Preferably I would like to avoid treating this as an irrelevantly spaced
> time series (its) if possible...
>
> Many thanks in advance for your input,
>
> Best,
> Costas
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

It will be a lot easier, and therefore more likely, for others to help
you if you follow the instructions in the footer.  Here are some
suggestions of how to create a *minimal*, reproducible example:
http://stackoverflow.com/q/5963269/271616

Best,
--
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From pdalgd at gmail.com  Thu Jun  5 13:15:54 2014
From: pdalgd at gmail.com (peter dalgaard)
Date: Thu, 5 Jun 2014 13:15:54 +0200
Subject: [R] detect escape character
In-Reply-To: <CAM_vjuk1dsD2rcyCT_PRJ8NAbt5UwHMVo3LWV7E0+m1_sYzXgg@mail.gmail.com>
References: <CAJ=0CtD0ECAFzL9_fKAkfRua4xvME1U67y9G6=3=972gx4vCBQ@mail.gmail.com>
	<CAM_vju=csx6SsiGRTZFfccZJxzjwzT_M4L7xMvg8g+pAD0ejwA@mail.gmail.com>
	<B078CDF40DFE4045AF172A8B4F68FC4857C6398AF7@DKRDSEXC016.vestas.net>
	<CAM_vjuk1dsD2rcyCT_PRJ8NAbt5UwHMVo3LWV7E0+m1_sYzXgg@mail.gmail.com>
Message-ID: <57E0459F-0ADE-4DEB-AFFD-CD2D34144759@gmail.com>

You'll find it even more entertaining to realize that Frede's _previous_ position (at Department of Genetics and Biotechnology, Faculty of Agricultural Sciences, Aarhus University) was quite a bit closer to yours. ;-)

-pd

On 03 Jun 2014, at 20:37 , Sarah Goslee <sarah.goslee at gmail.com> wrote:

>> 
>> Frede Aakmann T?gersen
>> Specialist, M.Sc., Ph.D.
>> Plant Performance & Modeling
> 
> I find this very entertaining, because that's exactly what I do --
> Plant Performance and Modeling -- but when I do it it involves botany.
> :)
> 
> Sarah

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From email8889 at gmail.com  Thu Jun  5 11:11:40 2014
From: email8889 at gmail.com (email)
Date: Thu, 5 Jun 2014 12:11:40 +0300
Subject: [R] access scopus data
Message-ID: <CAJMZ3cfANV2_TTA8TEzGOuU5af5B+WjjMgzxokTScap_fbwxYA@mail.gmail.com>

Hello,

The Scopus bibliographic database allows one to manually download
publications. Is there any R package for accessing scopus data ? How
can it be accessed in R?

Thanks:
John


From thanoon.younis80 at gmail.com  Thu Jun  5 14:10:28 2014
From: thanoon.younis80 at gmail.com (thanoon younis)
Date: Thu, 5 Jun 2014 15:10:28 +0300
Subject: [R] Trucated Normal Function
Message-ID: <CABLo8nEsTox_ysryi_G4gZLogzw64CQbOXc8_mQKOa5wo73EJw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140605/10960495/attachment.pl>

From frtog at vestas.com  Thu Jun  5 15:02:24 2014
From: frtog at vestas.com (=?utf-8?B?RnJlZGUgQWFrbWFubiBUw7hnZXJzZW4=?=)
Date: Thu, 5 Jun 2014 15:02:24 +0200
Subject: [R] detect escape character
Message-ID: <1wa6ul06oi25wq21s139bl0k.1401973195181@email.android.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140605/b5cbbdad/attachment.pl>

From giuliafassio at gmail.com  Thu Jun  5 14:58:11 2014
From: giuliafassio at gmail.com (Giulia Fassio)
Date: Thu, 5 Jun 2014 14:58:11 +0200
Subject: [R] distance by sea
Message-ID: <CAD0LQxD2e9s+RvBFCPQasAu6=mT2hzN1YxZdega4uhUeuN=5UA@mail.gmail.com>

? stato filtrato un testo allegato il cui set di caratteri non era
indicato...
Nome: non disponibile
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140605/2558d084/attachment.pl>

From amwootte at ncsu.edu  Thu Jun  5 15:26:27 2014
From: amwootte at ncsu.edu (Adrienne Wootten)
Date: Thu, 5 Jun 2014 09:26:27 -0400
Subject: [R] big matrix reading and writing
Message-ID: <CAOV3wDAGu8Do8R7EQb7xuQ_8pJXc0hbDm+RT2i7CTFVervLytA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140605/c10b0c4e/attachment.pl>

From jholtman at gmail.com  Thu Jun  5 15:37:28 2014
From: jholtman at gmail.com (jim holtman)
Date: Thu, 5 Jun 2014 09:37:28 -0400
Subject: [R] big matrix reading and writing
In-Reply-To: <CAOV3wDAGu8Do8R7EQb7xuQ_8pJXc0hbDm+RT2i7CTFVervLytA@mail.gmail.com>
References: <CAOV3wDAGu8Do8R7EQb7xuQ_8pJXc0hbDm+RT2i7CTFVervLytA@mail.gmail.com>
Message-ID: <CAAxdm-5Q4GgFTOb9XXxBiamG-L=2LLyT+SPA6vVAO2usZdK85g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140605/ebd2b543/attachment.pl>

From deter088 at umn.edu  Thu Jun  5 15:45:08 2014
From: deter088 at umn.edu (Charles Determan Jr)
Date: Thu, 5 Jun 2014 08:45:08 -0500
Subject: [R] error in R program
In-Reply-To: <CABLo8nEYXwbuEwSgLu1=d9FWsDAV3au74W1_wr1ZDD-T68xP_g@mail.gmail.com>
References: <CABLo8nEYXwbuEwSgLu1=d9FWsDAV3au74W1_wr1ZDD-T68xP_g@mail.gmail.com>
Message-ID: <CAOLJphkOJYH0-WWjjZrVR6UT4opF3idYq7XcjL+2W3spVD0O1A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140605/74ac7e6c/attachment.pl>

From amwootte at ncsu.edu  Thu Jun  5 15:48:35 2014
From: amwootte at ncsu.edu (Adrienne Wootten)
Date: Thu, 5 Jun 2014 09:48:35 -0400
Subject: [R] big matrix reading and writing
In-Reply-To: <CAAxdm-5Q4GgFTOb9XXxBiamG-L=2LLyT+SPA6vVAO2usZdK85g@mail.gmail.com>
References: <CAOV3wDAGu8Do8R7EQb7xuQ_8pJXc0hbDm+RT2i7CTFVervLytA@mail.gmail.com>
	<CAAxdm-5Q4GgFTOb9XXxBiamG-L=2LLyT+SPA6vVAO2usZdK85g@mail.gmail.com>
Message-ID: <CAOV3wDDFBV90s9QKC2s5Cip3y40zfyBGYkCetWgPh1N1nNuYSA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140605/94c85817/attachment.pl>

From jholtman at gmail.com  Thu Jun  5 16:00:25 2014
From: jholtman at gmail.com (jim holtman)
Date: Thu, 5 Jun 2014 10:00:25 -0400
Subject: [R] big matrix reading and writing
In-Reply-To: <CAOV3wDDFBV90s9QKC2s5Cip3y40zfyBGYkCetWgPh1N1nNuYSA@mail.gmail.com>
References: <CAOV3wDAGu8Do8R7EQb7xuQ_8pJXc0hbDm+RT2i7CTFVervLytA@mail.gmail.com>
	<CAAxdm-5Q4GgFTOb9XXxBiamG-L=2LLyT+SPA6vVAO2usZdK85g@mail.gmail.com>
	<CAOV3wDDFBV90s9QKC2s5Cip3y40zfyBGYkCetWgPh1N1nNuYSA@mail.gmail.com>
Message-ID: <CAAxdm-7=cu1rBSdVtaEtBEeNM5GX4f5pkoZ+xC3Zsdss+C3NLQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140605/78911254/attachment.pl>

From jdnewmil at dcn.davis.CA.us  Thu Jun  5 16:16:17 2014
From: jdnewmil at dcn.davis.CA.us (Jeff Newmiller)
Date: Thu, 05 Jun 2014 07:16:17 -0700
Subject: [R] distance by sea
In-Reply-To: <CAD0LQxD2e9s+RvBFCPQasAu6=mT2hzN1YxZdega4uhUeuN=5UA@mail.gmail.com>
References: <CAD0LQxD2e9s+RvBFCPQasAu6=mT2hzN1YxZdega4uhUeuN=5UA@mail.gmail.com>
Message-ID: <d988ec0d-66ee-48ab-923e-be5bc0c38436@email.android.com>

If it is possible at all (and I suspect it is) then it should be possible in R. However, your question is lazy... you should not be asking about black boxes that magically solve your problem, but rather do a search for algorithms that accomplish your goals (wouldn't you want to know if someone had found a solution that handled staying on land?), and then search for (using Google or RSiteSearch or package sos) implementations of the algorithm. At least that way you would encounter options to help do it yourself or use a different tool for that task if no canned solution were available.
Also, the R-sig-geo list would be more likely to have expertise in this area, especially if you described some algorithms you had already looked at.
---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                      Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
--------------------------------------------------------------------------- 
Sent from my phone. Please excuse my brevity.

On June 5, 2014 5:58:11 AM PDT, Giulia Fassio <giuliafassio at gmail.com> wrote:
>Hello,
>
>someone know if it is possible to use R to calculate distance by sea
>between two geographic coordinates? I have many points in the sea and I
>want to create a matrix using R of the length of trajectories that pass
>only trough sea.
>
>Thanks
>
>Giulia


From amwootte at ncsu.edu  Thu Jun  5 16:56:37 2014
From: amwootte at ncsu.edu (Adrienne Wootten)
Date: Thu, 5 Jun 2014 10:56:37 -0400
Subject: [R] big matrix reading and writing
In-Reply-To: <CAAxdm-7=cu1rBSdVtaEtBEeNM5GX4f5pkoZ+xC3Zsdss+C3NLQ@mail.gmail.com>
References: <CAOV3wDAGu8Do8R7EQb7xuQ_8pJXc0hbDm+RT2i7CTFVervLytA@mail.gmail.com>
	<CAAxdm-5Q4GgFTOb9XXxBiamG-L=2LLyT+SPA6vVAO2usZdK85g@mail.gmail.com>
	<CAOV3wDDFBV90s9QKC2s5Cip3y40zfyBGYkCetWgPh1N1nNuYSA@mail.gmail.com>
	<CAAxdm-7=cu1rBSdVtaEtBEeNM5GX4f5pkoZ+xC3Zsdss+C3NLQ@mail.gmail.com>
Message-ID: <CAOV3wDDaPfjCK6Jwz-d84TU0BcGdzXpNh2EG6c6jKnKwoynOAw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140605/c2088969/attachment.pl>

From dcarlson at tamu.edu  Thu Jun  5 16:59:37 2014
From: dcarlson at tamu.edu (David L Carlson)
Date: Thu, 5 Jun 2014 14:59:37 +0000
Subject: [R] distance by sea
In-Reply-To: <d988ec0d-66ee-48ab-923e-be5bc0c38436@email.android.com>
References: <CAD0LQxD2e9s+RvBFCPQasAu6=mT2hzN1YxZdega4uhUeuN=5UA@mail.gmail.com>
	<d988ec0d-66ee-48ab-923e-be5bc0c38436@email.android.com>
Message-ID: <53BF8FB63FAF2E4A9455EF1EE94DA726F743A5@mb02.ads.tamu.edu>

Package geosphere has functions to compute the great circle distance between any two points given the latitude and longitude. It does not care if they are at sea, but does not take topography into account.

-------------------------------------
David L Carlson
Department of Anthropology
Texas A&M University
College Station, TX 77840-4352

-----Original Message-----
From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On Behalf Of Jeff Newmiller
Sent: Thursday, June 5, 2014 9:16 AM
To: Giulia Fassio; r-help at r-project.org
Subject: Re: [R] distance by sea

If it is possible at all (and I suspect it is) then it should be possible in R. However, your question is lazy... you should not be asking about black boxes that magically solve your problem, but rather do a search for algorithms that accomplish your goals (wouldn't you want to know if someone had found a solution that handled staying on land?), and then search for (using Google or RSiteSearch or package sos) implementations of the algorithm. At least that way you would encounter options to help do it yourself or use a different tool for that task if no canned solution were available.
Also, the R-sig-geo list would be more likely to have expertise in this area, especially if you described some algorithms you had already looked at.
---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                      Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
---------------------------------------------------------------------------
Sent from my phone. Please excuse my brevity.

On June 5, 2014 5:58:11 AM PDT, Giulia Fassio <giuliafassio at gmail.com> wrote:
>Hello,
>
>someone know if it is possible to use R to calculate distance by sea
>between two geographic coordinates? I have many points in the sea and I
>want to create a matrix using R of the length of trajectories that pass
>only trough sea.
>
>Thanks
>
>Giulia

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From dvrbts at ecology.msu.montana.edu  Thu Jun  5 17:20:10 2014
From: dvrbts at ecology.msu.montana.edu (Dave Roberts)
Date: Thu, 05 Jun 2014 09:20:10 -0600
Subject: [R] big matrix reading and writing
In-Reply-To: <CAOV3wDDaPfjCK6Jwz-d84TU0BcGdzXpNh2EG6c6jKnKwoynOAw@mail.gmail.com>
References: <CAOV3wDAGu8Do8R7EQb7xuQ_8pJXc0hbDm+RT2i7CTFVervLytA@mail.gmail.com>
	<CAAxdm-5Q4GgFTOb9XXxBiamG-L=2LLyT+SPA6vVAO2usZdK85g@mail.gmail.com>
	<CAOV3wDDFBV90s9QKC2s5Cip3y40zfyBGYkCetWgPh1N1nNuYSA@mail.gmail.com>
	<CAAxdm-7=cu1rBSdVtaEtBEeNM5GX4f5pkoZ+xC3Zsdss+C3NLQ@mail.gmail.com>
	<CAOV3wDDaPfjCK6Jwz-d84TU0BcGdzXpNh2EG6c6jKnKwoynOAw@mail.gmail.com>
Message-ID: <53908AAA.6070800@ecology.msu.montana.edu>

Adrienne,

    I have a crew just starting work on this problem this week, but I 
think in your case the best solution is more memory.  R stores the 
distance matrix as a vector with (n^2-n)/2 entries.  It's perfectly 
dense and immune to sparse matrix compaction.  It would be quite 
possible to multiply your values by 1000 and store as integers (given 
your range of values) and reduce the space required significantly, but 
the regression function you ultimately pass this to expects doubles and 
you would have to cast the values back to double on the fly, resulting 
in wasted time and a matrix that is as big as it would have been anyway.

    Our view is that while it's possible to store the distance matrix on 
disk rather than memory, all the functions that accept this matrix as an 
argument also have to re-written to work with the distances on disk. 
We're looking into doing this for PCO and NMDS, but someone would have 
to do the same for the geographically weighted regression.  I'm sure 
that's doable, but certainly not trivial.

Dave

On 06/05/2014 08:56 AM, Adrienne Wootten wrote:
> Jim,
>
> There are not going to be additional copies of the distance matrix.  The
> distance matrix is what is needed for a geographically weighted regression,
> so I can estimate the results from that to be a SpatialPointsDataFrame at
> roughly 30000 rows by 7 columns.  Much smaller size than the distance
> matrix, though I'm not sure given the class of that object.
>
> Potentially lots of room taken up, at the moment the machine in question
> has 32GB to work with, but we may be able to shift this onto machines with
> more RAM.
>
> A
>
>
> On Thu, Jun 5, 2014 at 10:00 AM, jim holtman <jholtman at gmail.com> wrote:
>
>> The real question is how much memory does the machine that you are working
>> on have.  The 32000x32000 matrix will take up ~8GB of physical memory, so
>> how much memory will the rest of your objects take up.  Are any of them
>> going to be copies of the distance matrix, or is it always going to be
>> unchanged?  Normally my rule of thumb is that I should have 3-4 times the
>> largest object I am working with since I may be making copies of it.  So it
>> is important to understand how the rest of your program will be using this
>> large matrix and what type of operations you will be doing on it.
>>
>>
>> Jim Holtman
>> Data Munger Guru
>>
>> What is the problem that you are trying to solve?
>> Tell me what you want to do, not how you want to do it.
>>
>>
>> On Thu, Jun 5, 2014 at 9:48 AM, Adrienne Wootten <amwootte at ncsu.edu>
>> wrote:
>>
>>> Jim
>>>
>>> At the moment I'm using write.table.  I tried using write.matrix from the
>>> MASS package, but that failed.  Integers are not appropriate here because
>>> we are working with fractions of miles for some locations and that needs to
>>> be retained.  The range is from 0 to about 3.5 (it's a little less than
>>> that with the digits)
>>>
>>> I haven't tried the save function yet, but I wasn't aware of that one
>>> previously. Thanks for pointing that out.
>>>
>>> The bigger concern is reading and working with that dataset in the other
>>> calculation though.
>>>
>>> Adrienne
>>>
>>>
>>> On Thu, Jun 5, 2014 at 9:37 AM, jim holtman <jholtman at gmail.com> wrote:
>>>
>>>> How are you writing it out now?  Are you using 'save' which will
>>>> compress the file?  What are the range of numbers in the matrix?  Can you
>>>> scale them to integers (what is the range of the numbers) which might save
>>>> some space?  You did not provide enough information to make a definitive
>>>> solution.
>>>>
>>>>
>>>> Jim Holtman
>>>> Data Munger Guru
>>>>
>>>> What is the problem that you are trying to solve?
>>>> Tell me what you want to do, not how you want to do it.
>>>>
>>>>
>>>> On Thu, Jun 5, 2014 at 9:26 AM, Adrienne Wootten <amwootte at ncsu.edu>
>>>> wrote:
>>>>
>>>>> All,
>>>>>
>>>>> Got a tricky situation and unfortunately because it's a big file I can't
>>>>> exactly provide an example, so I'll describe this as best I can for
>>>>> everyone.
>>>>>
>>>>> I have a distance matrix that we are using for a modeling calculation in
>>>>> space for multiple days.  Since the matrix is never going to change for
>>>>> different dates, I want to keep the matrix in a file and refer to that
>>>>> so I
>>>>> don't have to repeat the calculation over and over again for that.  The
>>>>> problem is it's a 32000 X 32000 matrix and roughly works out to 15GB of
>>>>> storage.  This makes it a trick to read the file back into R, but it
>>>>> leaves
>>>>> me with two questions for the group.
>>>>>
>>>>> Is there anyway to have R write this out so that it takes up less
>>>>> space?  I
>>>>> know R primarily treats numbers as doubles, but I'm trying to find a
>>>>> way to
>>>>> get R to write the values as floats or singles.
>>>>>
>>>>> with how big it is, it may not be wise to save it as an object in R when
>>>>> read in, so I'm wondering is there anyway to have R do the calculation
>>>>> it
>>>>> needs to do without saving the matrix as an object in R?  Basically can
>>>>> I
>>>>> have it run the calculation off the file itself?
>>>>>
>>>>> Thanks!
>>>>>
>>>>> Adrienne
>>>>>
>>>>>
>>>>> --
>>>>> Adrienne Wootten
>>>>> Graduate Research Assistant
>>>>> State Climate Office of North Carolina
>>>>> Department of Marine, Earth and Atmospheric Sciences
>>>>> North Carolina State University
>>>>>
>>>>>          [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide
>>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>
>>>>
>>>>
>>>
>>>
>>> --
>>> Adrienne Wootten
>>> Graduate Research Assistant
>>> State Climate Office of North Carolina
>>> Department of Marine, Earth and Atmospheric Sciences
>>> North Carolina State University
>>>
>>
>>
>
>

-- 
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
David W. Roberts                                     office 406-994-4548
Professor and Head                                      FAX 406-994-3190
Department of Ecology                         email droberts at montana.edu
Montana State University
Bozeman, MT 59717-3460


From spencer.graves at structuremonitoring.com  Thu Jun  5 18:52:14 2014
From: spencer.graves at structuremonitoring.com (Spencer Graves)
Date: Thu, 05 Jun 2014 09:52:14 -0700
Subject: [R] Trucated Normal Function
In-Reply-To: <CABLo8nEsTox_ysryi_G4gZLogzw64CQbOXc8_mQKOa5wo73EJw@mail.gmail.com>
References: <CABLo8nEsTox_ysryi_G4gZLogzw64CQbOXc8_mQKOa5wo73EJw@mail.gmail.com>
Message-ID: <5390A03E.1000604@structuremonitoring.com>

 > library(sos)
 > tn <- findFn('truncated normal', 999)
found 421 matches;  retrieving 22 pages
2 3 4 5 6 7 8 9 10
11 12 13 14 15 16 17 18 19 20
21 22
Downloaded 305 links in 138 packages.
 > tn # opens the list of 305 links in a web browser
 > installPackages(tn) # installs the packages with the most links
 > writeFindFn2xls(tn) # creates an Excel file in
 > getwd() # the working directory
# the first sheet is a package summary
# providing more info for installed packages
# See also
 > sos <- vignette('sos')
 > sos


NOTES:

       1.  Many of the 305 links may not reference a "truncated 
normal",  but some of them do.


       2.  The directory "sos$Dir" contains "doc/sos.R", which contains 
the lines of code that appear in "sos.pdf", which the print method for 
"sos" above opens in a PDF reader.


       Hope this helps.
       Spencer


On 6/5/2014 5:10 AM, thanoon younis wrote:
> Dear all members
> The following function is truncated normal distribution function i wrote it
> by using winbugs so now i want to write it by using R - program.
>
> for(j in
> 1:P){y[i,j]~djl.dnorm.trunc(mu[i,j],psi[j],thd[j,z[i,j]],thd[j,z[i,j]+1])}
>
> where   y:underlying continuous variables and treated as a missing variable
> and augmented wit the posterior analysis.
> mu: mean
> psi: variance
> z:ordered categorical variables
> the : preassigned values for thresholds and represent matrix(10*6)
> dimention.
>
> I hope anyone help me
> Many thanks in advance
>
> Thanoon
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From John.Pfuntner at Teradata.com  Thu Jun  5 15:43:20 2014
From: John.Pfuntner at Teradata.com (Pfuntner, John)
Date: Thu, 5 Jun 2014 13:43:20 +0000
Subject: [R] R 3.1.0 interpreting large negative seconds since epoch as LMT?
Message-ID: <F50C41C1AF491549BDAC07CBE3CAA4B016C77C44@SUSHDC8002.TD.TERADATA.COM>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140605/d810c861/attachment.pl>

From stephen at umw.edu  Thu Jun  5 16:18:49 2014
From: stephen at umw.edu (Stephen Davies)
Date: Thu, 5 Jun 2014 10:18:49 -0400
Subject: [R] .Rprofile: "contains invalid line(s)"
Message-ID: <20140605141849.GG3088@umw.edu>


    At some point in the recent past, my local .Rprofile has ceased to be
executed on startup. I've upgraded R several times in the last few months, and
am unsure which version caused this problem. Currently I'm running version
3.1.0 (2014-04-10) "Spring Dance" on 64-bit Ubuntu.

    My symptoms and fix attempts:

    1) Changes I make to .Rprofile are no longer automatically recognized by R
on startup.

    2) After some Googling, I was led to believe that I need to set the
environment variable R_ENVIRON to "/home/stephen/.Rprofile." But after doing
so, when I start R, I get an error message: "File /home/stephen/.Rprofile
contains invalid line(s)". Then it lists the contents of .Rprofile, which are
now simply:

.First <- function() { 
    joe <<- function(x) x*2
}

    This file is perfectly valid, however, which I know because when I
explicitly source() it, it loads .First just fine, and if I run ".First()", I
can then successfully run "joe(3)".

    Why does R say this .Rprofile is invalid on startup? Is setting R_ENVIRON,
as described, the correct procedure? And why did this suddenly become
necessary?

- Stephen Davies, Ph.D.
  (stephen at umw.edu)


From istazahn at gmail.com  Thu Jun  5 19:58:39 2014
From: istazahn at gmail.com (Ista Zahn)
Date: Thu, 5 Jun 2014 13:58:39 -0400
Subject: [R] .Rprofile: "contains invalid line(s)"
In-Reply-To: <20140605141849.GG3088@umw.edu>
References: <20140605141849.GG3088@umw.edu>
Message-ID: <CA+vqiLFJAfXWMWzyVXJWa4kQYQ6VGAuCgvJFXXioE843-_Jg8A@mail.gmail.com>

Hi Stephan,

R_ENVIRON should not point to your .Rpofile, use R_PROFILE_USER for
that. See ?Startup for details.

Best,
Ista

On Thu, Jun 5, 2014 at 10:18 AM, Stephen Davies <stephen at umw.edu> wrote:
>
>     At some point in the recent past, my local .Rprofile has ceased to be
> executed on startup. I've upgraded R several times in the last few months, and
> am unsure which version caused this problem. Currently I'm running version
> 3.1.0 (2014-04-10) "Spring Dance" on 64-bit Ubuntu.
>
>     My symptoms and fix attempts:
>
>     1) Changes I make to .Rprofile are no longer automatically recognized by R
> on startup.
>
>     2) After some Googling, I was led to believe that I need to set the
> environment variable R_ENVIRON to "/home/stephen/.Rprofile." But after doing
> so, when I start R, I get an error message: "File /home/stephen/.Rprofile
> contains invalid line(s)". Then it lists the contents of .Rprofile, which are
> now simply:
>
> .First <- function() {
>     joe <<- function(x) x*2
> }
>
>     This file is perfectly valid, however, which I know because when I
> explicitly source() it, it loads .First just fine, and if I run ".First()", I
> can then successfully run "joe(3)".
>
>     Why does R say this .Rprofile is invalid on startup? Is setting R_ENVIRON,
> as described, the correct procedure? And why did this suddenly become
> necessary?
>
> - Stephen Davies, Ph.D.
>   (stephen at umw.edu)
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From navingoyal at gmail.com  Thu Jun  5 21:17:33 2014
From: navingoyal at gmail.com (Navin Goyal)
Date: Thu, 5 Jun 2014 15:17:33 -0400
Subject: [R] Reading specific lines from a text file in r
Message-ID: <CAEoEPfztb7weSVqRdouG15prPi9iu+Zrwn-pCv-ku8+v_O_GhQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140605/a980469e/attachment.pl>

From kou.genious at gmail.com  Thu Jun  5 20:43:38 2014
From: kou.genious at gmail.com (Koustubh Bagade)
Date: Thu, 5 Jun 2014 11:43:38 -0700
Subject: [R] Bitwise operations on large numbers
Message-ID: <CAJ61pDodU0q=8g=F=SpG9+MNuLXsVci66pXN73AedwHUcSaesw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140605/302c3ad2/attachment.pl>

From Tom.Detzel at propublica.org  Thu Jun  5 22:00:32 2014
From: Tom.Detzel at propublica.org (Tom Detzel)
Date: Thu, 5 Jun 2014 20:00:32 +0000
Subject: [R] Mapping
Message-ID: <3CE283438D61254EB1B079377E23FE052BE8AC@PRO01MAIL.propublica.local>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140605/cfd356df/attachment.pl>

From johnson.cheryl625 at gmail.com  Thu Jun  5 22:12:42 2014
From: johnson.cheryl625 at gmail.com (Cheryl Johnson)
Date: Thu, 5 Jun 2014 16:12:42 -0400
Subject: [R] Run R Code Continuously in the Background of HTML
Message-ID: <CAJJ9dtsgjA-wszmXdkrrv4cDy5Oo0omnE3=yX8nsPfDar1rriQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140605/e7f2f0fa/attachment.pl>

From 538280 at gmail.com  Thu Jun  5 23:12:39 2014
From: 538280 at gmail.com (Greg Snow)
Date: Thu, 5 Jun 2014 15:12:39 -0600
Subject: [R] Mapping
In-Reply-To: <3CE283438D61254EB1B079377E23FE052BE8AC@PRO01MAIL.propublica.local>
References: <3CE283438D61254EB1B079377E23FE052BE8AC@PRO01MAIL.propublica.local>
Message-ID: <CAFEqCdxWC=b5FqtXB3_LfKSkH26wnwUJwmV2U8N_YjR3jgFzmA@mail.gmail.com>

What type of mapping?

Do you want to add points to an existing map?  Color in polygons of a
downloaded map?  Create a completely new map? other?

our advice to you depends on what you want to do.

Also please read the posting guide linked to at the bottom of all
emails and don't post in HTML, this is a plain text list.

On Thu, Jun 5, 2014 at 2:00 PM, Tom Detzel <Tom.Detzel at propublica.org> wrote:
> Hey Folks,
>
> Apologies in advance if this has been covered.
>
> I'm taking on a simple mapping project. What packages, tutorials and examples would you recommend for a beginning mapper in R?
>
> Thanks, Tom
>
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com


From ryan.devera.03 at gmail.com  Thu Jun  5 22:13:26 2014
From: ryan.devera.03 at gmail.com (Ryan de Vera)
Date: Thu, 5 Jun 2014 16:13:26 -0400
Subject: [R] Understanding survey design (svydesign)
Message-ID: <CAKcMNBKA6kDhoLWADaBFgDJKiaGR0P+3rS72Oi78-gasAMKoRQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140605/8a6281a0/attachment.pl>

From hb at biostat.ucsf.edu  Thu Jun  5 23:51:11 2014
From: hb at biostat.ucsf.edu (Henrik Bengtsson)
Date: Thu, 5 Jun 2014 14:51:11 -0700
Subject: [R] .Rprofile: "contains invalid line(s)"
In-Reply-To: <CA+vqiLFJAfXWMWzyVXJWa4kQYQ6VGAuCgvJFXXioE843-_Jg8A@mail.gmail.com>
References: <20140605141849.GG3088@umw.edu>
	<CA+vqiLFJAfXWMWzyVXJWa4kQYQ6VGAuCgvJFXXioE843-_Jg8A@mail.gmail.com>
Message-ID: <CAFDcVCSjSDHSb9iRKU5gXtfMB+2oCFKhndPfNb--OU=fWnVsPg@mail.gmail.com>

Make sure that the last line has a newline at the end, otherwise that
expression will be silently ignored, cf. R-devel thread '[Rd] Last
line in .Rprofile must have newline (PR#4056)' on 2003-09-03
[https://stat.ethz.ch/pipermail/r-devel/2003-September/027455.html].
I'm pretty sure many many people have been bitten by this "feature".

Other than that, add a message(".Rprofile...") and the very top and a
message(".Rprofile...done") at the very bottom to confirm that
~/.Rprofile is loaded/evaluated.

/Henrik

On Thu, Jun 5, 2014 at 10:58 AM, Ista Zahn <istazahn at gmail.com> wrote:
> Hi Stephan,
>
> R_ENVIRON should not point to your .Rpofile, use R_PROFILE_USER for
> that. See ?Startup for details.
>
> Best,
> Ista
>
> On Thu, Jun 5, 2014 at 10:18 AM, Stephen Davies <stephen at umw.edu> wrote:
>>
>>     At some point in the recent past, my local .Rprofile has ceased to be
>> executed on startup. I've upgraded R several times in the last few months, and
>> am unsure which version caused this problem. Currently I'm running version
>> 3.1.0 (2014-04-10) "Spring Dance" on 64-bit Ubuntu.
>>
>>     My symptoms and fix attempts:
>>
>>     1) Changes I make to .Rprofile are no longer automatically recognized by R
>> on startup.
>>
>>     2) After some Googling, I was led to believe that I need to set the
>> environment variable R_ENVIRON to "/home/stephen/.Rprofile." But after doing
>> so, when I start R, I get an error message: "File /home/stephen/.Rprofile
>> contains invalid line(s)". Then it lists the contents of .Rprofile, which are
>> now simply:
>>
>> .First <- function() {
>>     joe <<- function(x) x*2
>> }
>>
>>     This file is perfectly valid, however, which I know because when I
>> explicitly source() it, it loads .First just fine, and if I run ".First()", I
>> can then successfully run "joe(3)".
>>
>>     Why does R say this .Rprofile is invalid on startup? Is setting R_ENVIRON,
>> as described, the correct procedure? And why did this suddenly become
>> necessary?
>>
>> - Stephen Davies, Ph.D.
>>   (stephen at umw.edu)
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ryan.devera.03 at gmail.com  Thu Jun  5 23:50:09 2014
From: ryan.devera.03 at gmail.com (Ryan de Vera)
Date: Thu, 5 Jun 2014 17:50:09 -0400
Subject: [R] Understanding svymean
Message-ID: <CAKcMNBLMUztOOKs=NMJrOw_K_sGpfD--eR0YsgJ30oQ8R-HvVQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140605/60b75b24/attachment.pl>

From wdunlap at tibco.com  Fri Jun  6 00:31:04 2014
From: wdunlap at tibco.com (William Dunlap)
Date: Thu, 5 Jun 2014 15:31:04 -0700
Subject: [R] Bitwise operations on large numbers
In-Reply-To: <CAJ61pDodU0q=8g=F=SpG9+MNuLXsVci66pXN73AedwHUcSaesw@mail.gmail.com>
References: <CAJ61pDodU0q=8g=F=SpG9+MNuLXsVci66pXN73AedwHUcSaesw@mail.gmail.com>
Message-ID: <CAF8bMcZX-cQbE+SFyz9X=2CpPNRn1YyH81ZO7-ThOFCBLsoaSw@mail.gmail.com>

> Double allows me to
> store large numbers but I can not perform bitwise shifting.

It is a nuisance that bitwShiftL and bitwShitR don't just shift (and
wrap around to negative) for integers so you could use all 32 bits.
You could use doubles and multiply (*) and divide (%/%) by 2^n instead
of shifting left and right by n bits.  That would give you 52 bits.
Bitwise 'and' and 'or' with doubles is harder to do efficiently at the
R level but you can get it done with the following:

shiftL <- function(x, n) x * 2^n
shiftR <- function(x, n) x %/% 2^n
or <- function(x, y) .bitOp(x, y, bitwOr)
and <- function(x, y) .bitOp(x, y, bitwAnd)
bitSlice <- function(x, from, length) shiftR(x, from) %% 2^(from+length)
.bitOp <- function(x, y, bitwOp) bitwOp(bitSlice(x, 0, 26),bitSlice(y,
0, 26)) + shiftL(bitwOp(bitSlice(x, 26, 26), bitSlice(y, 26, 26)), 26)
Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Thu, Jun 5, 2014 at 11:43 AM, Koustubh Bagade <kou.genious at gmail.com> wrote:
> Hi
>
> I am working on numbers between 0 - 2^32. I want to perform bit-wise shift
> operations on these numbers. Integer allows me to do bitwise shift
> operations but number range is limited to 0 - 2^31. Double allows me to
> store large numbers but I can not perform bitwise shifting.
>
> I can not change programming language as it is part of larger project.
>
> Is there a way to solve this problem? Perhaps using data types similar to
> unsigned integer or long integer?
>
> Thanks
>
> Koustubh Bagade
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bentleygcoffey at gmail.com  Fri Jun  6 00:45:17 2014
From: bentleygcoffey at gmail.com (Bentley Coffey)
Date: Thu, 5 Jun 2014 18:45:17 -0400
Subject: [R] Error Correction Model on Panel Data
Message-ID: <CAN0O1YZ8dnxfYBfMpD-jRHyb0+Mw7cstN9RqrwWxD44jwA=Obg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140605/7f56d9eb/attachment.pl>

From wdunlap at tibco.com  Fri Jun  6 00:49:53 2014
From: wdunlap at tibco.com (William Dunlap)
Date: Thu, 5 Jun 2014 15:49:53 -0700
Subject: [R] Bitwise operations on large numbers
In-Reply-To: <CAF8bMcZX-cQbE+SFyz9X=2CpPNRn1YyH81ZO7-ThOFCBLsoaSw@mail.gmail.com>
References: <CAJ61pDodU0q=8g=F=SpG9+MNuLXsVci66pXN73AedwHUcSaesw@mail.gmail.com>
	<CAF8bMcZX-cQbE+SFyz9X=2CpPNRn1YyH81ZO7-ThOFCBLsoaSw@mail.gmail.com>
Message-ID: <CAF8bMcb2LHhQVka0nern5aayeLWmptyWWKc1ekTaow82LcY_mQ@mail.gmail.com>

Oops, I got bitSlice wrong, hence and and or won't be right.  bitSlice
should be:

bitSlice <- function(x, from, length) shiftR(x, from) %% 2^length
Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Thu, Jun 5, 2014 at 3:31 PM, William Dunlap <wdunlap at tibco.com> wrote:
>> Double allows me to
>> store large numbers but I can not perform bitwise shifting.
>
> It is a nuisance that bitwShiftL and bitwShitR don't just shift (and
> wrap around to negative) for integers so you could use all 32 bits.
> You could use doubles and multiply (*) and divide (%/%) by 2^n instead
> of shifting left and right by n bits.  That would give you 52 bits.
> Bitwise 'and' and 'or' with doubles is harder to do efficiently at the
> R level but you can get it done with the following:
>
> shiftL <- function(x, n) x * 2^n
> shiftR <- function(x, n) x %/% 2^n
> or <- function(x, y) .bitOp(x, y, bitwOr)
> and <- function(x, y) .bitOp(x, y, bitwAnd)
> bitSlice <- function(x, from, length) shiftR(x, from) %% 2^(from+length)
> .bitOp <- function(x, y, bitwOp) bitwOp(bitSlice(x, 0, 26),bitSlice(y,
> 0, 26)) + shiftL(bitwOp(bitSlice(x, 26, 26), bitSlice(y, 26, 26)), 26)
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
>
>
> On Thu, Jun 5, 2014 at 11:43 AM, Koustubh Bagade <kou.genious at gmail.com> wrote:
>> Hi
>>
>> I am working on numbers between 0 - 2^32. I want to perform bit-wise shift
>> operations on these numbers. Integer allows me to do bitwise shift
>> operations but number range is limited to 0 - 2^31. Double allows me to
>> store large numbers but I can not perform bitwise shifting.
>>
>> I can not change programming language as it is part of larger project.
>>
>> Is there a way to solve this problem? Perhaps using data types similar to
>> unsigned integer or long integer?
>>
>> Thanks
>>
>> Koustubh Bagade
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From deter088 at umn.edu  Fri Jun  6 01:42:02 2014
From: deter088 at umn.edu (Charles Determan Jr)
Date: Thu, 5 Jun 2014 18:42:02 -0500
Subject: [R] Fwd: error in R program
In-Reply-To: <CABLo8nEvjPATjDox3Fno-D-3Ojo1MMmwM42E9mr_tJHpMzj-PA@mail.gmail.com>
References: <CABLo8nEYXwbuEwSgLu1=d9FWsDAV3au74W1_wr1ZDD-T68xP_g@mail.gmail.com>
	<CAOLJphkOJYH0-WWjjZrVR6UT4opF3idYq7XcjL+2W3spVD0O1A@mail.gmail.com>
	<CABLo8nEvjPATjDox3Fno-D-3Ojo1MMmwM42E9mr_tJHpMzj-PA@mail.gmail.com>
Message-ID: <CAOLJph=GWU441EvB6Sn=uYfT_=NFifo_4iQWpy9KXh60EJv-2g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140605/47936ed0/attachment.pl>

From tlumley at uw.edu  Fri Jun  6 03:17:48 2014
From: tlumley at uw.edu (Thomas Lumley)
Date: Fri, 6 Jun 2014 13:17:48 +1200
Subject: [R] Understanding svymean
In-Reply-To: <CAKcMNBLMUztOOKs=NMJrOw_K_sGpfD--eR0YsgJ30oQ8R-HvVQ@mail.gmail.com>
References: <CAKcMNBLMUztOOKs=NMJrOw_K_sGpfD--eR0YsgJ30oQ8R-HvVQ@mail.gmail.com>
Message-ID: <CAJ55+dLd3VkVOK+6_cEKfWZGZZ4T_swGMHUvOBrLucmVWwZjzg@mail.gmail.com>

On Fri, Jun 6, 2014 at 9:50 AM, Ryan de Vera <ryan.devera.03 at gmail.com> wrote:
> Hello all,
>
> I am trying to understand how svymean is calulated with svydesign.
>
> I have the code:
>
> dstrat1<-svydesign(id=~PSU, strata=~STRATUM,weights=~Sample_Weight,
> data=subset25k, nest=TRUE)
> and I am using svymean to compute the mean.
>
> My main question is how are the sampling probabilities created?

If you supply weights to svydesign(), those weights are used in the
mean calculation.  If you supply probabilities, those are used to
compute the weights.  If you supply population sizes, those are used
to compute probabilities, which are then used to compute weights.

The code works in terms of probabilities because that's fairly
standard in textbooks. It makes it easier for me to get the formulas
right.

   -thomas


-- 
Thomas Lumley
Professor of Biostatistics
University of Auckland


From heather.baldwin at uni-ulm.de  Fri Jun  6 00:13:57 2014
From: heather.baldwin at uni-ulm.de (Heather Baldwin)
Date: Fri, 6 Jun 2014 00:13:57 +0200
Subject: [R] Why have my glmms stopped converging (lme4)
Message-ID: <CACRapKOagqyiJNsyE-z-wjxXZUSMbLpzvozB6e0qhGQfktT=Fg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140606/bccaeb08/attachment.pl>

From tlumley at uw.edu  Fri Jun  6 03:22:24 2014
From: tlumley at uw.edu (Thomas Lumley)
Date: Fri, 6 Jun 2014 13:22:24 +1200
Subject: [R] Understanding survey design (svydesign)
In-Reply-To: <CAKcMNBKA6kDhoLWADaBFgDJKiaGR0P+3rS72Oi78-gasAMKoRQ@mail.gmail.com>
References: <CAKcMNBKA6kDhoLWADaBFgDJKiaGR0P+3rS72Oi78-gasAMKoRQ@mail.gmail.com>
Message-ID: <CAJ55+dLFGkyYQ4wvA1euvntJh4SaS=bhbm2Dqdp6a==Vq4Hn5A@mail.gmail.com>

If you have zeros in the supplied sample weights, the display in the
summary() function will look like this. Nothing is actually wrong with
the calculations, though.

If the zero weights are because of restriction to a subpopulation, you
will get better-looking summaries if you put the whole design into
svydesign() and then use subset() to restrict to the subpopulation.
That way R knows what's going on. It won't affect the answers, though.


   -thomas

On Fri, Jun 6, 2014 at 8:13 AM, Ryan de Vera <ryan.devera.03 at gmail.com> wrote:
> Hi all,
>
>
> I am trying to understand the output of the svydesign function. My question
> is, is there documentation on how the probabilities are computer? Or could
> someone please explain to me how they are? I have this
>
>
> d<-svydesign(id=~PSU, strata=~STRATUM,weights=~w, data=s, nest=TRUE)
>
>
> And this output with summary(d)
>
>
> Stratified 1 - level Cluster Sampling design (with replacement)
>
> With (783) clusters.
>
> svydesign(id = ~PSU, strata = ~STRATUM, weights = ~Sample_Weight,
>
>     data = subset25k, nest = TRUE)
>
> Probabilities:
>
>    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
>
>       0       0       0     Inf       0     Inf
>
>
> I have read the documentation about the code but it doesn't actually say
> anything about the probabilities. Thank you in advance.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Thomas Lumley
Professor of Biostatistics
University of Auckland


From dusa.adrian at unibuc.ro  Fri Jun  6 04:38:53 2014
From: dusa.adrian at unibuc.ro (=?UTF-8?B?QWRyaWFuIER1yJlh?=)
Date: Thu, 5 Jun 2014 22:38:53 -0400
Subject: [R] detect escape character
In-Reply-To: <BD7ED9E9-98BE-427E-9599-659221283155@comcast.net>
References: <CAJ=0CtD0ECAFzL9_fKAkfRua4xvME1U67y9G6=3=972gx4vCBQ@mail.gmail.com>
	<BD7ED9E9-98BE-427E-9599-659221283155@comcast.net>
Message-ID: <CAJ=0CtAuVL3o9+CpztnCstgB8V0gMuQuQ__b5HZy-8NW_MQQFQ@mail.gmail.com>

On Tue, Jun 3, 2014 at 8:44 PM, David Winsemius <dwinsemius at comcast.net> wrote:
>
> On Jun 3, 2014, at 11:03 AM, Adrian Du?a wrote:
>
>> Dear All,
>>
>> I should be knowing this, but not get it right...
>
> I'm a little surprised to see you ask this, too, but we each have lacunae in our R knowledge, so I hope this helps:

Thanks very much David, yes indeed sometimes even the most basic
things can slip out... but I am grateful for this r-help list.
Apologies for the late reply, I am attending a conference all the way
in Toronto and the difference in time plus the activity here makes it
a bit more difficult to catch up.

Best wishes,
Adrian


-- 
Adrian Dusa
University of Bucharest
Romanian Social Data Archive
1, Schitu Magureanu Bd.
050025 Bucharest sector 5
Romania
Tel.:+40 21 3126618 \
        +40 21 3120210 / int.101
Fax: +40 21 3158391


From smartpink111 at yahoo.com  Fri Jun  6 05:09:29 2014
From: smartpink111 at yahoo.com (arun)
Date: Thu, 5 Jun 2014 20:09:29 -0700 (PDT)
Subject: [R] How do I do a conditional sum which only looks between
	certain date criteria
Message-ID: <1402024169.49550.YahooMailBasic@web142605.mail.bf1.yahoo.com>

Hi,
The expected output is confusing.
dat1 <- read.table(text="date, user, items_bought
2013-01-01, x, 2
2013-01-02, x, 1
2013-01-03, x, 0
2013-01-04, x, 0
2013-01-05, x, 3
2013-01-06, x, 1
2013-01-01, y, 1
2013-01-02, y, 1
2013-01-03, y, 0
2013-01-04, y, 5
2013-01-05, y, 6
2013-01-06, y, 1",sep=",",header=TRUE,stringsAsFactors=FALSE)

##Assuming that the data is ordered by date and no gaps in date
res1 <- unsplit(lapply(split(dat1, dat1$user), function(x) {
    indx <- (seq(nrow(x)) - 1)%/%3
    x$cum_items_bought_3_days <- ave(x$items_bought, indx, FUN = cumsum)
    x
}), dat1$user)



##expected output
res2 <- unsplit(lapply(split(dat1, dat1$user), function(x) {
    indx <- (seq(nrow(x)) - 1)%/%3
    x$cum_items_bought_3_days <- ave(x$items_bought, indx, FUN = cumsum)
    indx2 <- seq(0, length(indx), by = 4)
    x[indx2, 4] <- x[indx2, 4] + indx[indx2]
    x
}), dat1$user)

A.K.


Say I have data that looks like
date, user, items_bought
2013-01-01, x, 2
2013-01-02, x, 1
2013-01-03, x, 0
2013-01-04, x, 0
2013-01-05, x, 3
2013-01-06, x, 1
2013-01-01, y, 1
2013-01-02, y, 1
2013-01-03, y, 0
2013-01-04, y, 5
2013-01-05, y, 6
2013-01-06, y, 1

to get the cumulative sum per user per data point I was doing
data.frame(cum_items_bought=unlist(tapply(as.numeric(data$items_bought), data$user, FUN = cumsum)))

output from this looks like
date, user, items_bought
2013-01-01, x, 2
2013-01-02, x, 3
2013-01-03, x, 3
2013-01-04, x, 3
2013-01-05, x, 6
2013-01-06, x, 7
2013-01-01, y, 1
2013-01-02, y, 2
2013-01-03, y, 2
2013-01-04, y, 7
2013-01-05, y, 13
2013-01-06, y, 14

However I want to restrict my sum to only add up those that happened within 3 days of each row (relative to the user). i.e. the output needs to look like this:
date, user, cum_items_bought_3_days
2013-01-01, x, 2
2013-01-02, x, 3
2013-01-03, x, 3
2013-01-04, x, 1
2013-01-05, x, 3
2013-01-06, x, 4
2013-01-01, y, 1
2013-01-02, y, 2
2013-01-03, y, 2
2013-01-04, y, 6
2013-01-05, y, 11
2013-01-06, y, 12


From jfox at mcmaster.ca  Fri Jun  6 08:17:00 2014
From: jfox at mcmaster.ca (John Fox)
Date: Fri, 06 Jun 2014 02:17:00 -0400
Subject: [R] SEM specify RAM model
In-Reply-To: <DUB127-W18B096A9F44B37AF082373C1220@phx.gbl>
References: <DUB127-W18B096A9F44B37AF082373C1220@phx.gbl>
Message-ID: <web-513437536@cgpsrv2.cis.mcmaster.ca>

Dear George,

It's not entirely clear to me what you're trying to do, and where the loop comes in. 

As has already been suggested, you can store the model specification in a file or files. Also, the "RAM" form of the model can be specified as a character matrix, a numeric matrix, or a "semmod" object. These are documented in ?sem. You could look at the internal structure of a "semmod" object produced by specifyEquations() or specifyModel() to see how it works.

I hope that this helps,
 John

------------------------------------------------
John Fox, Professor
McMaster University
Hamilton, Ontario, Canada
http://socserv.mcmaster.ca/jfox/
	
	
On Wed, 4 Jun 2014 15:45:44 +0100
 George Parish <george_parish at hotmail.co.uk> wrote:
> Dear all,
> I am trying to create multiple SEM models in a loop - so that if I change the data they can easily be re-created rather than re-creating each RAM model line by line - therein lies my problem.
> I have a dataframe set out as follows1                 Duration -> RC1      cov1 -0.2563002                      MMSE -> RC1      cov2 -0.0309003                RC1 -> Aggression      npi1  0.2310004                    RC1 -> Apathy      npi2  0.1043005             RC1 -> Disinhibition      npi3  0.279800 ...
> the specifyModel() and specifyEquations() methods need you to manually input each line individually. Can I simply supply the SEM method with a matrix like the one I have above?
> Thanks,George 		 	   		  
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From pdalgd at gmail.com  Fri Jun  6 11:03:30 2014
From: pdalgd at gmail.com (peter dalgaard)
Date: Fri, 6 Jun 2014 11:03:30 +0200
Subject: [R] R 3.1.0 interpreting large negative seconds since epoch as
	LMT?
In-Reply-To: <F50C41C1AF491549BDAC07CBE3CAA4B016C77C44@SUSHDC8002.TD.TERADATA.COM>
References: <F50C41C1AF491549BDAC07CBE3CAA4B016C77C44@SUSHDC8002.TD.TERADATA.COM>
Message-ID: <CDF052AA-77D2-47CC-A160-5126389A2472@gmail.com>


On 05 Jun 2014, at 15:43 , Pfuntner, John <John.Pfuntner at teradata.com> wrote:

> I'm seeing a weird difference in behavior between R versions 3.0.2 and 3.1.0.  Consider this session from version 3.0.2:
> 
>> secs = c(-6327530133, -632753013, -63275301, -6327530, -632753, -63275, -6327, -632, -63)
>> class(secs) = c('POSIXt', 'POSIXct')
>> secs
> [1] "1769-06-27 11:44:27 EST" "1949-12-13 06:16:27 EST" "1967-12-30 10:31:39 EST" "1969-10-19 14:21:10 EDT"
> [5] "1969-12-24 11:14:07 EST" "1969-12-31 01:25:25 EST" "1969-12-31 17:14:33 EST" "1969-12-31 18:49:28 EST"
> [9] "1969-12-31 18:58:57 EST"
>> 
> 
> This looks pretty good but if I run the exact same statements on version 3.1.0, I get a different timezone for the first time:
> 
>> secs = c(-6327530133, -632753013, -63275301, -6327530, -632753, -63275, -6327, -632, -63)
>> class(secs) = c('POSIXt', 'POSIXct')
>> secs
> [1] "1769-06-27 11:48:25 LMT" "1949-12-13 06:16:27 EST" "1967-12-30 10:31:39 EST" "1969-10-19 14:21:10 EDT"
> [5] "1969-12-24 11:14:07 EST" "1969-12-31 01:25:25 EST" "1969-12-31 17:14:33 EST" "1969-12-31 18:49:28 EST"
> [9] "1969-12-31 18:58:57 EST"
>> 
> 
> I've never even heard of LMT before!!  I found a page on Wikipedia (http://en.wikipedia.org/wiki/Local_mean_time) that talks about "local mean time" which was used in the 19th century before standard times were adopted.
> 
> Is this a bug or a deliberate change in R 3.1.0?
> 

It's not likely a bug, nor a particularly deliberate change to R, but NEWS.Rd reads:

      \item Platforms with a 64-bit \code{time_t} type are allowed to
      handle conversions between the \code{"POSIXct"} and
      \code{"POSIXlt"} classes for date-times outside the 32-bit range
      (before 1902 or after 2037): the existing workarounds are used on
      other platforms.  (Note that time-zone information for post-2037
      is speculative at best, and the OS services are tested for known
      errors and so not used on OS X.)

      Currently \code{time_t} is usually \code{long} and hence 64-bit on
      Unix-alike 64-bit platforms: however it several cases the
      time-zone database is 32-bit.  On \R for Windows it is 64-bit (for
      both architectures as from this version).

so presumably, your (unstated) OS has particular ideas of what the times were like in 1769, and those ideas have kicked in starting with R-3.1.0.

The 4:02 minute shift is curious though. It's close to a meridian shift of 1 degree of arc (1? is 24h/360 = 4 minutes). 

On OSX Mavericks, in Copenhagen, I get a shift in the opposite direction of almost 10 minutes, from "1769-06-27 17:44:27 CET" to "1769-06-27 17:34:47 LMT". One might speculate that this comes from the Copenhagen Meridian at 12? 34? 32.25? E being about 2.5 degrees of arc short of GMT+1 (at 15? 0? E). If you're at about 74W (e.g., New York time), it sort of all figures.

-- 
Peter Dalgaard, Professor
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From careyshan at gmail.com  Fri Jun  6 11:38:24 2014
From: careyshan at gmail.com (Shane Carey)
Date: Fri, 6 Jun 2014 10:38:24 +0100
Subject: [R] halfwidth in twoord.plot
Message-ID: <CA+jRDxCFVnvWLaAcYW3yCRNvWwcjeu2R6PAoPqm=CrC7Gw_dag@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140606/1f1ea4ac/attachment.pl>

From Roger.Bivand at nhh.no  Fri Jun  6 12:15:41 2014
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 6 Jun 2014 10:15:41 +0000
Subject: [R] Mapping
References: <3CE283438D61254EB1B079377E23FE052BE8AC@PRO01MAIL.propublica.local>
Message-ID: <loom.20140606T121132-743@post.gmane.org>

Tom Detzel <Tom.Detzel <at> propublica.org> writes:

> 
> Hey Folks,
> 
> Apologies in advance if this has been covered.
> 
> I'm taking on a simple mapping project. What packages, tutorials and
> examples would you recommend for a
> beginning mapper in R?

The general advice is to look for CRAN Task Views, and in your case the
Spatial one is probably the most helpful, as it gives a dense overview to
start from. Also look at the R-bloggers aggregation service, for example
blogs by Oscar Perpig??n or James Cheshire, and others. The examples will
vary a lot depending on your application area.

Roger

> 
> Thanks, Tom
>


From jim at bitwrit.com.au  Fri Jun  6 12:45:53 2014
From: jim at bitwrit.com.au (Jim Lemon)
Date: Fri, 06 Jun 2014 20:45:53 +1000
Subject: [R] halfwidth in twoord.plot
In-Reply-To: <CA+jRDxCFVnvWLaAcYW3yCRNvWwcjeu2R6PAoPqm=CrC7Gw_dag@mail.gmail.com>
References: <CA+jRDxCFVnvWLaAcYW3yCRNvWwcjeu2R6PAoPqm=CrC7Gw_dag@mail.gmail.com>
Message-ID: <1919326.rupj6OXRGk@localhost.localdomain>

On Fri, 6 Jun 2014 10:38:24 AM Shane Carey wrote:
> Hi,
> 
> Could someone please explain (in lay mans terms) what the halfwidth
> variable in the twoord.plot does. I dont understand it.
> 
Hi Shane,
The halfwidth argument is used to set the width of bars if any are 
displayed. As the x units of a plot are often successive integers, the 
default halfwidth argument leaves spaces of about one fifth the width of 
the bars. If other explicit x values are passed, the spaces may be too 
narrow or the bars may overlap. It is up to the user to set halfwidth to a 
value that "looks nice".

Jim


From f.harrell at Vanderbilt.Edu  Fri Jun  6 14:41:56 2014
From: f.harrell at Vanderbilt.Edu (Frank Harrell)
Date: Fri, 6 Jun 2014 07:41:56 -0500
Subject: [R] SAS VS R - What type of analysis is better?
Message-ID: <5391B714.4070701@vanderbilt.edu>

I can't think of an example where R does not work better than SAS except 
for a few cases of mixed effects regression models and for processing 
enormous datasets when the R user does not want to learn about the 
latest R tools for large datasets.  I quit using SAS in 1991 (in favor 
of S-Plus and transitioned to R around 2000) and have never looked back. 
  Lately what has really made R powerful is its ability to interface 
with other languages and especially the way it works in a reproducible 
analysis/dynamic report document context.

Frank
-- 
Frank E Harrell Jr Professor and Chairman      School of Medicine
                    Department of Biostatistics Vanderbilt University


From frtog at vestas.com  Fri Jun  6 15:21:21 2014
From: frtog at vestas.com (=?iso-8859-1?Q?Frede_Aakmann_T=F8gersen?=)
Date: Fri, 6 Jun 2014 15:21:21 +0200
Subject: [R] SAS VS R - What type of analysis is better?
Message-ID: <2eqp25f3oj74o7thrml48qhy.1402060586570@email.android.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140606/462acfc0/attachment.pl>

From gunter.berton at gene.com  Fri Jun  6 15:36:24 2014
From: gunter.berton at gene.com (Bert Gunter)
Date: Fri, 6 Jun 2014 06:36:24 -0700
Subject: [R] SAS VS R - What type of analysis is better?
In-Reply-To: <2eqp25f3oj74o7thrml48qhy.1402060586570@email.android.com>
References: <2eqp25f3oj74o7thrml48qhy.1402060586570@email.android.com>
Message-ID: <CACk-te1VPzA-TqQNO41VyOrD6-Ycdgv3+U8UWMd7UP2sE7mV=A@mail.gmail.com>

Please do your homework.

The place to start for questions like this is the CRAN Task Views
page, where you will find a High Performance Computing topic that
links here:

http://cran.r-project.org/web/views/HighPerformanceComputing.html

If nothing there suits, then re-post with details as to why not and
what you think you are looking for.

Cheers,
Bert

Bert Gunter
Genentech Nonclinical Biostatistics
(650) 467-7374

"Data is not information. Information is not knowledge. And knowledge
is certainly not wisdom."
H. Gilbert Welch




On Fri, Jun 6, 2014 at 6:21 AM, Frede Aakmann T?gersen <frtog at vestas.com> wrote:
> Hi
>
> SAS is famous for handling large data sets. For more than 10 years ago S+ introduced a module for large data sets. Never used it, more money for license for a poor research institute.
>
> Today I have a laptop with 8 Gb. If that's not enough then the head nodes on our cluster has 64 Gb and some nodes 196 Gb.
>
> But from time to time it could be an advantage to do some analysis using the laptop.
>
> So my question is: which kind of functionality for large data sets do the R community offers?
>
> Br.
>
> Frede
>
>
>
>
> Sendt fra Samsung mobil
>
>
> -------- Oprindelig meddelelse --------
> Fra: Frank Harrell
> Dato:06/06/2014 14.43 (GMT+01:00)
> Til: RHELP
> Emne: Re: [R] SAS VS R - What type of analysis is better?
>
> I can't think of an example where R does not work better than SAS except
> for a few cases of mixed effects regression models and for processing
> enormous datasets when the R user does not want to learn about the
> latest R tools for large datasets.  I quit using SAS in 1991 (in favor
> of S-Plus and transitioned to R around 2000) and have never looked back.
>   Lately what has really made R powerful is its ability to interface
> with other languages and especially the way it works in a reproducible
> analysis/dynamic report document context.
>
> Frank
> --
> Frank E Harrell Jr Professor and Chairman      School of Medicine
>                     Department of Biostatistics Vanderbilt University
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ryan.devera.03 at gmail.com  Fri Jun  6 16:03:47 2014
From: ryan.devera.03 at gmail.com (Ryan de Vera)
Date: Fri, 6 Jun 2014 10:03:47 -0400
Subject: [R] What is SE and how do you calculate it in svymean()?
Message-ID: <CAKcMNBLBRsivc-CeH-HBXqfyKj-JUYKnoibwCzJQgeTQAjMoGw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140606/db9eaf01/attachment.pl>

From smartpink111 at yahoo.com  Fri Jun  6 16:25:47 2014
From: smartpink111 at yahoo.com (arun)
Date: Fri, 6 Jun 2014 07:25:47 -0700 (PDT)
Subject: [R] How do I do a conditional sum which only looks between
	certain date criteria
In-Reply-To: <1402024169.49550.YahooMailBasic@web142605.mail.bf1.yahoo.com>
References: <1402024169.49550.YahooMailBasic@web142605.mail.bf1.yahoo.com>
Message-ID: <1402064747.33734.YahooMailNeo@web142602.mail.bf1.yahoo.com>

If the data is like:
dat1 <- read.table(text="date, user, items_bought
2013-01-01, x, 2
2013-01-02, x, 1
2013-01-05, x, 1
2013-01-06, x, 5
2013-01-11, x, 3
2013-01-14, x, 1
2013-01-01, y, 1
2013-01-02, y, 1
2013-01-03, y, 0
2013-01-04, y, 5
2013-01-05, y, 6
2013-01-06, y, 1",sep=",",header=TRUE,stringsAsFactors=FALSE)
dat1$date <- as.Date(dat1$date)

res3 <- unsplit(lapply(split(dat1, dat1$user), function(x) {
??? date1 <- seq(min(x$date), max(x$date), by = "1 day")
??? indx <- (seq_along(date1) - 1)%/%3
??? indx1 <- date1 %in% x$date
??? x$cum_times_bought_3_days <- ave(x$items_bought, indx[indx1], FUN = cumsum)
??? indx2 <- seq(0, length(indx), 4)
??? indx3 <- c(FALSE, diff(indx[indx1]) > 0)
??? x[indx3, 4] <- x[indx3, 4] + indx[indx2]
??? x
}), dat1$user)
##Here also, the same confusion persists.


A.K.


On Thursday, June 5, 2014 11:09 PM, arun <smartpink111 at yahoo.com> wrote:
Hi,
The expected output is confusing.
dat1 <- read.table(text="date, user, items_bought
2013-01-01, x, 2
2013-01-02, x, 1
2013-01-03, x, 0
2013-01-04, x, 0
2013-01-05, x, 3
2013-01-06, x, 1
2013-01-01, y, 1
2013-01-02, y, 1
2013-01-03, y, 0
2013-01-04, y, 5
2013-01-05, y, 6
2013-01-06, y, 1",sep=",",header=TRUE,stringsAsFactors=FALSE)

##Assuming that the data is ordered by date and no gaps in date
res1 <- unsplit(lapply(split(dat1, dat1$user), function(x) {
? ? indx <- (seq(nrow(x)) - 1)%/%3
? ? x$cum_items_bought_3_days <- ave(x$items_bought, indx, FUN = cumsum)
? ? x
}), dat1$user)



##expected output
res2 <- unsplit(lapply(split(dat1, dat1$user), function(x) {
? ? indx <- (seq(nrow(x)) - 1)%/%3
? ? x$cum_items_bought_3_days <- ave(x$items_bought, indx, FUN = cumsum)
? ? indx2 <- seq(0, length(indx), by = 4)
? ? x[indx2, 4] <- x[indx2, 4] + indx[indx2]
? ? x
}), dat1$user)

A.K.


Say I have data that looks like
date, user, items_bought
2013-01-01, x, 2
2013-01-02, x, 1
2013-01-03, x, 0
2013-01-04, x, 0
2013-01-05, x, 3
2013-01-06, x, 1
2013-01-01, y, 1
2013-01-02, y, 1
2013-01-03, y, 0
2013-01-04, y, 5
2013-01-05, y, 6
2013-01-06, y, 1

to get the cumulative sum per user per data point I was doing
data.frame(cum_items_bought=unlist(tapply(as.numeric(data$items_bought), data$user, FUN = cumsum)))

output from this looks like
date, user, items_bought
2013-01-01, x, 2
2013-01-02, x, 3
2013-01-03, x, 3
2013-01-04, x, 3
2013-01-05, x, 6
2013-01-06, x, 7
2013-01-01, y, 1
2013-01-02, y, 2
2013-01-03, y, 2
2013-01-04, y, 7
2013-01-05, y, 13
2013-01-06, y, 14

However I want to restrict my sum to only add up those that happened within 3 days of each row (relative to the user). i.e. the output needs to look like this:
date, user, cum_items_bought_3_days
2013-01-01, x, 2
2013-01-02, x, 3
2013-01-03, x, 3
2013-01-04, x, 1
2013-01-05, x, 3
2013-01-06, x, 4
2013-01-01, y, 1
2013-01-02, y, 2
2013-01-03, y, 2
2013-01-04, y, 6
2013-01-05, y, 11
2013-01-06, y, 12 



From ripley at stats.ox.ac.uk  Fri Jun  6 16:46:19 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 06 Jun 2014 15:46:19 +0100
Subject: [R] R 3.1.0 interpreting large negative seconds since epoch as
 LMT?
In-Reply-To: <CDF052AA-77D2-47CC-A160-5126389A2472@gmail.com>
References: <F50C41C1AF491549BDAC07CBE3CAA4B016C77C44@SUSHDC8002.TD.TERADATA.COM>
	<CDF052AA-77D2-47CC-A160-5126389A2472@gmail.com>
Message-ID: <5391D43B.9030804@stats.ox.ac.uk>

On 06/06/2014 10:03, peter dalgaard wrote:
>
> On 05 Jun 2014, at 15:43 , Pfuntner, John <John.Pfuntner at teradata.com> wrote:
>
>> I'm seeing a weird difference in behavior between R versions 3.0.2 and 3.1.0.  Consider this session from version 3.0.2:
>>
>>> secs = c(-6327530133, -632753013, -63275301, -6327530, -632753, -63275, -6327, -632, -63)
>>> class(secs) = c('POSIXt', 'POSIXct')
>>> secs
>> [1] "1769-06-27 11:44:27 EST" "1949-12-13 06:16:27 EST" "1967-12-30 10:31:39 EST" "1969-10-19 14:21:10 EDT"
>> [5] "1969-12-24 11:14:07 EST" "1969-12-31 01:25:25 EST" "1969-12-31 17:14:33 EST" "1969-12-31 18:49:28 EST"
>> [9] "1969-12-31 18:58:57 EST"
>>>
>>
>> This looks pretty good but if I run the exact same statements on version 3.1.0, I get a different timezone for the first time:
>>
>>> secs = c(-6327530133, -632753013, -63275301, -6327530, -632753, -63275, -6327, -632, -63)
>>> class(secs) = c('POSIXt', 'POSIXct')
>>> secs
>> [1] "1769-06-27 11:48:25 LMT" "1949-12-13 06:16:27 EST" "1967-12-30 10:31:39 EST" "1969-10-19 14:21:10 EDT"
>> [5] "1969-12-24 11:14:07 EST" "1969-12-31 01:25:25 EST" "1969-12-31 17:14:33 EST" "1969-12-31 18:49:28 EST"
>> [9] "1969-12-31 18:58:57 EST"
>>>
>>
>> I've never even heard of LMT before!!  I found a page on Wikipedia (http://en.wikipedia.org/wiki/Local_mean_time) that talks about "local mean time" which was used in the 19th century before standard times were adopted.
>>
>> Is this a bug or a deliberate change in R 3.1.0?
>>
>
> It's not likely a bug, nor a particularly deliberate change to R, but NEWS.Rd reads:
>
>        \item Platforms with a 64-bit \code{time_t} type are allowed to
>        handle conversions between the \code{"POSIXct"} and
>        \code{"POSIXlt"} classes for date-times outside the 32-bit range
>        (before 1902 or after 2037): the existing workarounds are used on
>        other platforms.  (Note that time-zone information for post-2037
>        is speculative at best, and the OS services are tested for known
>        errors and so not used on OS X.)
>
>        Currently \code{time_t} is usually \code{long} and hence 64-bit on
>        Unix-alike 64-bit platforms: however it several cases the
>        time-zone database is 32-bit.  On \R for Windows it is 64-bit (for
>        both architectures as from this version).
>
> so presumably, your (unstated) OS has particular ideas of what the times were like in 1769, and those ideas have kicked in starting with R-3.1.0.
>
> The 4:02 minute shift is curious though. It's close to a meridian shift of 1 degree of arc (1?? is 24h/360 = 4 minutes).
>
> On OSX Mavericks, in Copenhagen, I get a shift in the opposite direction of almost 10 minutes, from "1769-06-27 17:44:27 CET" to "1769-06-27 17:34:47 LMT". One might speculate that this comes from the Copenhagen Meridian at 12?? 34??? 32.25??? E being about 2.5 degrees of arc short of GMT+1 (at 15?? 0?? E). If you're at about 74W (e.g., New York time), it sort of all figures.
>

As almost all platforms are using the IANA (formerly Olson) database, 
this is the most likely explanation.  That has

# Zone  NAME            GMTOFF  RULES   FORMAT  [UNTIL]
Zone Europe/Copenhagen   0:50:20 -      LMT     1890
                          0:50:20 -      CMT     1894 Jan  1 # Copenhagen MT
                          1:00   Denmark CE%sT   1942 Nov  2 2:00s
                          1:00   C-Eur   CE%sT   1945 Apr  2 2:00
                          1:00   Denmark CE%sT   1980
                          1:00   EU      CE%sT

# US eastern time, represented by New York

# Zone  NAME            GMTOFF  RULES   FORMAT  [UNTIL]
Zone America/New_York   -4:56:02 -      LMT     1883 Nov 18 12:03:58
                         -5:00   US      E%sT    1920
                         -5:00   NYC     E%sT    1942
                         -5:00   US      E%sT    1946
                         -5:00   NYC     E%sT    1967
                         -5:00   US      E%sT

so that says New York switched to EST in 1883 by 3:58 (not 4:02).


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From bbolker at gmail.com  Fri Jun  6 17:11:34 2014
From: bbolker at gmail.com (Ben Bolker)
Date: Fri, 6 Jun 2014 15:11:34 +0000
Subject: [R] Why have my glmms stopped converging (lme4)
References: <CACRapKOagqyiJNsyE-z-wjxXZUSMbLpzvozB6e0qhGQfktT=Fg@mail.gmail.com>
Message-ID: <loom.20140606T164522-676@post.gmane.org>

Heather Baldwin <heather.baldwin <at> uni-ulm.de> writes:

> 
>  I have four sets of glmms (binomial, logit-linked) which I have run in
> various incarnations with no problems over the last weeks. All converged,
> data assumptions checked, reasonable goodness-of-fit (0.75-85). They are
> based on three different data sets. Today, I wanted to rerun one of them
> after amending the data set slightly, and I got the
>  following error message:
> 
> Warning message:In checkConv(attr(opt, "derivs"), opt$par, ctrl =
> control$checkConv,  :   Hessian is numerically 
> singular: parameters are not
> uniquely determined
> 
> I tried re-running the model with the older unchanged version of the data
> on which the model previously converged, and got the same message. I have
> not change the model specification at all. I then re-ran my other models
> which use different data sets to see what would happen, and I got the
> following message for each:
> 
> Warning message:
> In checkConv(attr(opt, "derivs"), opt$par, ctrl = control$checkConv,  :
>   Model failed to converge with max|grad| = 0.00846421 (tol = 0.001)
> 
> I went back to previous versions of the model and  older versions of the
> data sets and I'm still getting these error messages, but only for mixed
> models. For models with only fixed effects, they are as before. But the
> point is that my mixed models were converging before.
> 
> Any ideas on what is going on? I might be missing something obvious, but it
> really seems like this came out of nowhere.

   You probably updated your version of lme4 to 1.1-6, which has
stronger tests for convergence, some of which are false positives.  In
other words, it's not that your models stopped converging (if you were
to compare to older results I strongly suspect you would see precisely
the same fits), but that they started complaining about convergence.

  The max|grad| warning is completely expected and most likely
a false positive: see https://github.com/lme4/lme4/blob/master/README.md .

  The singular Hessian warnings are a bit more interesting. They
_might_ be caused by strongly different scaling in different 
predictor variables, or they might actually indicate a real convergence
issue.  If you'd like to follow this up, please contact me off-list
(or post a message with a link to data on r-sig-mixed-models
@ r-project.org)
   

 > > Further
information about my models: > I used the following commands: >
library(lme4) > mod<- glmer(y ~ x1 + x2 + x3 + x4 + x5 + (1|x6) +
(1|x7) +(1|x8) , data = > data, family = binomial (logit)) > I am
looking at the effects of ecological factors on the presence of >
pathogens in wildlife. Most of my variables are categorical. Fixed
factors > are reproductive status, month, presence of particular
ectoparasites, and a > body condition index. Random factors are site,
year, and observer (to > account for potential observer-biased
condition index).  > > I???m running R 3.1.0 in Mavericks.  > >
This is my first time posting in this list, so I hope my question is >
acceptably formulated. 

  You should try to avoid posting in HTML, and you should probably
have selected the r-sig-mixed-models (@r-project.org) mailing list.


From kafi_dano at yahoo.com  Fri Jun  6 10:42:39 2014
From: kafi_dano at yahoo.com (kafi dano)
Date: Fri, 6 Jun 2014 01:42:39 -0700 (PDT)
Subject: [R] command
Message-ID: <1402044159.11482.YahooMailNeo@web124706.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140606/d2e46edd/attachment.pl>

From pabloemilio.verde at hhu.de  Fri Jun  6 13:37:28 2014
From: pabloemilio.verde at hhu.de (Dr. Pablo E. Verde)
Date: Fri, 06 Jun 2014 13:37:28 +0200
Subject: [R] Course: Introduction to Bayesian Data Analysis using WinBUGS
	and R
Message-ID: <5391A7F8.8050004@hhu.de>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140606/caeae111/attachment.pl>

From marcos.takahashi at mobly.com.br  Fri Jun  6 14:56:12 2014
From: marcos.takahashi at mobly.com.br (marcos.takahashi)
Date: Fri, 6 Jun 2014 05:56:12 -0700 (PDT)
Subject: [R] RODBC - address 0x407, cause 'memory not mapped'
Message-ID: <1402059372188-4691806.post@n4.nabble.com>

Hi guys,

I am running a simple R script using RODBC that follows:

----

library(RODBC)
ch <- odbcConnect("con")

cust<- sqlQuery(ch, "select
    id_customer,
    first_name
from
    customers
limit 100")

sales<- sqlQuery(ch, "select
    id_order,
    revenue
from
    sales
limit 100")

-----

And it returns the following error:

 *** caught segfault ***
address 0x407, cause 'memory not mapped'

Traceback:
 1: .Call(C_RODBCQuery, attr(channel, "handle_ptr"), as.character(query),    
as.integer(rows_at_time))
 2: odbcQuery(channel, query, rows_at_time)
 3: sqlQuery(ch, "select\n    id_order,\n    revenue\nfrom\n    sales\nlimit
100")

Possible actions:
1: abort (with core dump, if enabled)
2: normal R exit
3: exit R without saving workspace
4: exit R saving workspace

------

Does somebody have any idea about this issue?



--
View this message in context: http://r.789695.n4.nabble.com/RODBC-address-0x407-cause-memory-not-mapped-tp4691806.html
Sent from the R help mailing list archive at Nabble.com.


From kasterma at kasterma.net  Fri Jun  6 16:26:12 2014
From: kasterma at kasterma.net (Bart Kastermans)
Date: Fri, 6 Jun 2014 16:26:12 +0200
Subject: [R] Use of library(X) in the code of library X.
Message-ID: <E8341397-C30F-4579-94D0-1D126C2FE9F9@kasterma.net>

To improve my R skills I try to understand some R code written by others.  Mostly
I am looking at the code of packages I use.  Today I looked at the code for the
caret package

http://cran.r-project.org/src/contrib/caret_6.0-30.tar.gz

in particular at the file R/adaptive.R

This file starts with:

adaptiveWorkflow <- function(x, y, wts, info, method, ppOpts, ctrl, lev, 
                             metric, maximize, testing = FALSE, ...) {
  library(caret)
  loadNamespace("caret?)

From ?library and googling I can?t figure out what this code would do.

Why would you call library(caret) in the caret package?

Best regards,
Bart
? 
http://kasterma.net

From pdalgd at gmail.com  Fri Jun  6 17:33:20 2014
From: pdalgd at gmail.com (peter dalgaard)
Date: Fri, 6 Jun 2014 17:33:20 +0200
Subject: [R] R 3.1.0 interpreting large negative seconds since epoch as
	LMT?
In-Reply-To: <5391D43B.9030804@stats.ox.ac.uk>
References: <F50C41C1AF491549BDAC07CBE3CAA4B016C77C44@SUSHDC8002.TD.TERADATA.COM>
	<CDF052AA-77D2-47CC-A160-5126389A2472@gmail.com>
	<5391D43B.9030804@stats.ox.ac.uk>
Message-ID: <F4BE4E29-D4D0-4A09-AFA0-3D6C75E6AD61@gmail.com>


On 06 Jun 2014, at 16:46 , Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:

> so that says New York switched to EST in 1883 by 3:58 (not 4:02).

As I also would have gotten, had I been able to subtract 44:27 from 48:25 properly.... Tnx

-- 
Peter Dalgaard, Professor
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From jdnewmil at dcn.davis.CA.us  Fri Jun  6 17:45:09 2014
From: jdnewmil at dcn.davis.CA.us (Jeff Newmiller)
Date: Fri, 06 Jun 2014 08:45:09 -0700
Subject: [R] RODBC - address 0x407, cause 'memory not mapped'
In-Reply-To: <1402059372188-4691806.post@n4.nabble.com>
References: <1402059372188-4691806.post@n4.nabble.com>
Message-ID: <2160dad0-10fa-482e-8cc7-adf4e07465bb@email.android.com>

"con" is probably not a valid ODBC DSN. You need to study how ODBC works independently of R... we cannot tell you what you should be putting there instead.
---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                      Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
--------------------------------------------------------------------------- 
Sent from my phone. Please excuse my brevity.

On June 6, 2014 5:56:12 AM PDT, "marcos.takahashi" <marcos.takahashi at mobly.com.br> wrote:
>Hi guys,
>
>I am running a simple R script using RODBC that follows:
>
>----
>
>library(RODBC)
>ch <- odbcConnect("con")
>
>cust<- sqlQuery(ch, "select
>    id_customer,
>    first_name
>from
>    customers
>limit 100")
>
>sales<- sqlQuery(ch, "select
>    id_order,
>    revenue
>from
>    sales
>limit 100")
>
>-----
>
>And it returns the following error:
>
> *** caught segfault ***
>address 0x407, cause 'memory not mapped'
>
>Traceback:
>1: .Call(C_RODBCQuery, attr(channel, "handle_ptr"),
>as.character(query),    
>as.integer(rows_at_time))
> 2: odbcQuery(channel, query, rows_at_time)
>3: sqlQuery(ch, "select\n    id_order,\n    revenue\nfrom\n   
>sales\nlimit
>100")
>
>Possible actions:
>1: abort (with core dump, if enabled)
>2: normal R exit
>3: exit R without saving workspace
>4: exit R saving workspace
>
>------
>
>Does somebody have any idea about this issue?
>
>
>
>--
>View this message in context:
>http://r.789695.n4.nabble.com/RODBC-address-0x407-cause-memory-not-mapped-tp4691806.html
>Sent from the R help mailing list archive at Nabble.com.
>
>______________________________________________
>R-help at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From david at revolutionanalytics.com  Fri Jun  6 18:53:56 2014
From: david at revolutionanalytics.com (David Smith)
Date: Fri, 6 Jun 2014 11:53:56 -0500
Subject: [R] Revolutions blog: May 2014 roundup
Message-ID: <CABgvEC_=G2YVhKZg_tNNbWRfU_1egagwXqGwRzkz3hCaPt-2=A@mail.gmail.com>

Revolution Analytics staff write about R every weekday at the Revolutions blog:
 http://blog.revolutionanalytics.com
and every month I post a summary of articles from the previous month
of particular interest to readers of r-help.

In case you missed them, here are some articles related to R from the
month of May:

Karl Broman's hipsteR guide lists some new(ish) features of R that
early adopters may have missed: http://bit.ly/1mki3ZJ

Joseph Rickert reviews the R/Finance 2014 conference and summarizes
the R packages presented there: http://bit.ly/1mki3ZK . Plus, a review
of R's impact on computational finance, with links to many resources:
http://bit.ly/1mki7bT

A webinar presentation compares the speed of Revolution R Enterprise
and SAS for statistical calculations on large data sets:
http://bit.ly/1mki3ZI

A tutorial on the "plotly" R package to generate online plotly
graphics from R graphics commands: http://bit.ly/1mki7bU . If you're
new to plotly, here's an introduction: http://bit.ly/1mki7bS .

My new presentation describes how more than 20 companies and
organizations use R to analyze data: http://bit.ly/1mki3ZM

A review of Generalized Linear Models in R: the glm function
(http://bit.ly/1mki3ZL), and R packages for fitting GLMs to large data
sets (http://bit.ly/1mki7bX).

A Microsoft paper describes the Bayesian model behind multiplayer
matchmaking in online Xbox games: http://bit.ly/1mki3ZN

Continuing his series of posts about ensemble models, Mike Bowles
looks at big-data random forests with Revolution R Enterprise:
http://bit.ly/1mki7bY

R will be used to design the T-shirt for the useR! 2014 conference:
http://bit.ly/1mki7bZ

Data scientists at Facebook present an online course on exploratory
data analysis with R: http://bit.ly/1mki3ZO

A scientist uses self-experimentation and R to find the worst place to
be stung by a bee: http://bit.ly/1mki3ZP

Scott Chamberlain's "R for Cats" is a fun introduction to the R
language: http://bit.ly/1mki7c0

A feature article in Fast Company Labs looks at how R is used at
companies: http://bit.ly/1mki3ZR

Using Rcpp to speed up code investigating the Collatz Conjecture:
http://bit.ly/1mki7c1

Revolution Analytics introduces AdviseR, a service offering technical
support to all R users: http://bit.ly/1fVDy6p

R used to evaluate strategies for playing the games "2048" and
"Threes": http://bit.ly/1mki7c3

Importing semistructured data with the rxImport function of Revolution
R Enterprise: http://bit.ly/1mki7c2

General interest stories (not related to R) in the past month
included: fast-running robots (http://bit.ly/1mki3ZU), gravity-defying
magnets (http://bit.ly/1mki3ZT) and a self-destructing washing machine
(http://bit.ly/1mki7c4).

Meeting times for local R user groups (http://bit.ly/eC5YQe) can be
found on the updated R Community Calendar at: http://bit.ly/bb3naW

If you're looking for more articles about R, you can find summaries
from previous months at http://blog.revolutionanalytics.com/roundups/.
You can receive daily blog posts via email using services like
blogtrottr.com, or join the Revolution Analytics mailing list at
http://revolutionanalytics.com/newsletter to be alerted to new
articles on a monthly basis.

As always, thanks for the comments and please keep sending suggestions
to me at david at revolutionanalytics.com or via Twitter (I'm
@revodavid).

Cheers,
# David

-- 
David M Smith <david at revolutionanalytics.com>
Chief Community Officer, Revolution Analytics
http://blog.revolutionanalytics.com
Tel: +1 (650) 646-9523 (Chicago IL, USA)
Twitter: @revodavid

-- 
Try Enterprise R Now!  
<https://aws.amazon.com/marketplace/seller-profile/ref=_ptnr_emailfooter?ie=UTF8&id=3c6536d3-8115-4bc0-a713-be58e257a7be>
Get a 14 Day Free Trial of Revolution R Enterprise on AWS Marketplace


From dwinsemius at comcast.net  Fri Jun  6 20:29:03 2014
From: dwinsemius at comcast.net (David Winsemius)
Date: Fri, 6 Jun 2014 11:29:03 -0700
Subject: [R] RODBC - address 0x407, cause 'memory not mapped'
In-Reply-To: <2160dad0-10fa-482e-8cc7-adf4e07465bb@email.android.com>
References: <1402059372188-4691806.post@n4.nabble.com>
	<2160dad0-10fa-482e-8cc7-adf4e07465bb@email.android.com>
Message-ID: <2D0E2024-E4FD-472F-B9AC-98D646A2B9F8@comcast.net>


On Jun 6, 2014, at 8:45 AM, Jeff Newmiller wrote:

> "con" is probably not a valid ODBC DSN. You need to study how ODBC works independently of R... we cannot tell you what you should be putting there instead.

But what ever would be the correct answer, it should not segfault. I'm reasonable sure the maintainer will see this:

> maintainer("RODBC")
[1] "Brian Ripley <ripley at stats.ox.ac.uk>"

It might assist in the debugging process if results of sessionInfo() were included in any followup.

-- 
David.

> ---------------------------------------------------------------------------
> Jeff Newmiller                        The     .....       .....  Go Live...
> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
>                                      Live:   OO#.. Dead: OO#..  Playing
> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
> /Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
> --------------------------------------------------------------------------- 
> Sent from my phone. Please excuse my brevity.
> 
> On June 6, 2014 5:56:12 AM PDT, "marcos.takahashi" <marcos.takahashi at mobly.com.br> wrote:
>> Hi guys,
>> 
>> I am running a simple R script using RODBC that follows:
>> 
>> ----
>> 
>> library(RODBC)
>> ch <- odbcConnect("con")
>> 
>> cust<- sqlQuery(ch, "select
>>   id_customer,
>>   first_name
>> from
>>   customers
>> limit 100")
>> 
>> sales<- sqlQuery(ch, "select
>>   id_order,
>>   revenue
>> from
>>   sales
>> limit 100")
>> 
>> -----
>> 
>> And it returns the following error:
>> 
>> *** caught segfault ***
>> address 0x407, cause 'memory not mapped'
>> 
>> Traceback:
>> 1: .Call(C_RODBCQuery, attr(channel, "handle_ptr"),
>> as.character(query),    
>> as.integer(rows_at_time))
>> 2: odbcQuery(channel, query, rows_at_time)
>> 3: sqlQuery(ch, "select\n    id_order,\n    revenue\nfrom\n   
>> sales\nlimit
>> 100")
>> 
>> Possible actions:
>> 1: abort (with core dump, if enabled)
>> 2: normal R exit
>> 3: exit R without saving workspace
>> 4: exit R saving workspace
>> 
>> ------
>> 
>> Does somebody have any idea about this issue?
>> 
> 


David Winsemius
Alameda, CA, USA


From dwinsemius at comcast.net  Fri Jun  6 20:35:25 2014
From: dwinsemius at comcast.net (David Winsemius)
Date: Fri, 6 Jun 2014 11:35:25 -0700
Subject: [R] Mapping
In-Reply-To: <loom.20140606T121132-743@post.gmane.org>
References: <3CE283438D61254EB1B079377E23FE052BE8AC@PRO01MAIL.propublica.local>
	<loom.20140606T121132-743@post.gmane.org>
Message-ID: <C9C918E4-EE62-44A8-AF16-58DCD4B14DDB@comcast.net>


On Jun 6, 2014, at 3:15 AM, Roger Bivand wrote:

> Tom Detzel <Tom.Detzel <at> propublica.org> writes:
> 
>> 
>> Hey Folks,
>> 
>> Apologies in advance if this has been covered.
>> 
>> I'm taking on a simple mapping project. What packages, tutorials and
>> examples would you recommend for a
>> beginning mapper in R?
> 
> The general advice is to look for CRAN Task Views, and in your case the
> Spatial one is probably the most helpful, as it gives a dense overview to
> start from. Also look at the R-bloggers aggregation service, for example
> blogs by Oscar Perpig??n or James Cheshire, and others. The examples will
> vary a lot depending on your application area.
> 
> Roger

Roger is perhaps being too modest. I think many people would say that the first resource to acquire would be "Applied Spatial Data Analysis with R", for which Bivand is the first author. The first half of the book lays out the data structures in the 'sp' package which forms the core of most other spatial/mapping packages and presents the technical background that will be needed.

-- 

David Winsemius
Alameda, CA, USA


From murdoch.duncan at gmail.com  Fri Jun  6 20:42:19 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Fri, 06 Jun 2014 14:42:19 -0400
Subject: [R] Use of library(X) in the code of library X.
In-Reply-To: <E8341397-C30F-4579-94D0-1D126C2FE9F9@kasterma.net>
References: <E8341397-C30F-4579-94D0-1D126C2FE9F9@kasterma.net>
Message-ID: <53920B8B.4070306@gmail.com>

On 06/06/2014 10:26 AM, Bart Kastermans wrote:
> To improve my R skills I try to understand some R code written by others.  Mostly
> I am looking at the code of packages I use.  Today I looked at the code for the
> caret package
>
> http://cran.r-project.org/src/contrib/caret_6.0-30.tar.gz
>
> in particular at the file R/adaptive.R
>
> This file starts with:
>
> adaptiveWorkflow <- function(x, y, wts, info, method, ppOpts, ctrl, lev,
>                               metric, maximize, testing = FALSE, ...) {
>    library(caret)
>    loadNamespace("caret?)
>
>  From ?library and googling I can?t figure out what this code would do.
>
> Why would you call library(caret) in the caret package?

I don't know that package, and since adaptiveWorkflow is not documented 
at the user level, I can't tell exactly what the author had in mind.  
However, code like that could be present for debugging purposes (and is 
unintentionally present in the CRAN copy), or could be intentional.  The 
library(caret) call has the effect of ensuring that the package is on 
the search list.  (It might have been loaded invisibly by another 
package.)   This is generally considered to be bad form nowadays; 
packages should function properly without being on the search list.

I can't think of a situation where loadNamespace() would do anything --- 
it would have been called by library().

Duncan Murdoch


From mxkuhn at gmail.com  Fri Jun  6 21:14:13 2014
From: mxkuhn at gmail.com (Max Kuhn)
Date: Fri, 6 Jun 2014 15:14:13 -0400
Subject: [R] Use of library(X) in the code of library X.
In-Reply-To: <53920B8B.4070306@gmail.com>
References: <E8341397-C30F-4579-94D0-1D126C2FE9F9@kasterma.net>
	<53920B8B.4070306@gmail.com>
Message-ID: <CAJ9CoWmz8U8+xLWZzGhOS5scKkUVzjGKjrKXH+ODkwu1aAk6sA@mail.gmail.com>

That is legacy code but there was a good reason back then.

caret is written to use parallel processing via the foreach package.
There were some cases where the worker processes did not load the
required packages (even when I used foreach's ".packages" argument) so
I would do it explicitly. I don't recall which parallel backend had
the issue.

The more important lesson is that if you want to "understand some R
code written by others" you'll learn more bad habits than good ones if
you examine my packages?

Max

On Fri, Jun 6, 2014 at 2:42 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> On 06/06/2014 10:26 AM, Bart Kastermans wrote:
>>
>> To improve my R skills I try to understand some R code written by others.
>> Mostly
>> I am looking at the code of packages I use.  Today I looked at the code
>> for the
>> caret package
>>
>> http://cran.r-project.org/src/contrib/caret_6.0-30.tar.gz
>>
>> in particular at the file R/adaptive.R
>>
>> This file starts with:
>>
>> adaptiveWorkflow <- function(x, y, wts, info, method, ppOpts, ctrl, lev,
>>                               metric, maximize, testing = FALSE, ...) {
>>    library(caret)
>>    loadNamespace("caret?)
>>
>>  From ?library and googling I can?t figure out what this code would do.
>>
>> Why would you call library(caret) in the caret package?
>
>
> I don't know that package, and since adaptiveWorkflow is not documented at
> the user level, I can't tell exactly what the author had in mind.  However,
> code like that could be present for debugging purposes (and is
> unintentionally present in the CRAN copy), or could be intentional.  The
> library(caret) call has the effect of ensuring that the package is on the
> search list.  (It might have been loaded invisibly by another package.)
> This is generally considered to be bad form nowadays; packages should
> function properly without being on the search list.
>
> I can't think of a situation where loadNamespace() would do anything --- it
> would have been called by library().
>
> Duncan Murdoch
>
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From tim at mlhim.org  Fri Jun  6 22:53:55 2014
From: tim at mlhim.org (Timothy W. Cook)
Date: Fri, 6 Jun 2014 17:53:55 -0300
Subject: [R] command
In-Reply-To: <1402044159.11482.YahooMailNeo@web124706.mail.ne1.yahoo.com>
References: <1402044159.11482.YahooMailNeo@web124706.mail.ne1.yahoo.com>
Message-ID: <CA+=OU3VmRGCx-ZYJ1DpP2Tc=zhJrs1DKN5yOFWRWEJhWH1qQdg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140606/ba0bf3a7/attachment.pl>

From fisher at plessthan.com  Fri Jun  6 23:45:09 2014
From: fisher at plessthan.com (Fisher Dennis)
Date: Fri, 6 Jun 2014 14:45:09 -0700
Subject: [R] Identifying one or more TRUE in the middle of an array
Message-ID: <CDDD8DD5-F955-45F1-B339-724FAA6A209E@plessthan.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140606/6739981c/attachment.pl>

From peter.langfelder at gmail.com  Sat Jun  7 00:10:42 2014
From: peter.langfelder at gmail.com (Peter Langfelder)
Date: Fri, 6 Jun 2014 15:10:42 -0700
Subject: [R] Identifying one or more TRUE in the middle of an array
In-Reply-To: <CDDD8DD5-F955-45F1-B339-724FAA6A209E@plessthan.com>
References: <CDDD8DD5-F955-45F1-B339-724FAA6A209E@plessthan.com>
Message-ID: <CA+hbrhX2ZeER9Jw3bW+OyYkP5u8U-BfeTNyCxNtAZGwu6JsqvA@mail.gmail.com>

Not sure if this is better than your "brute force" and you may be able
to simplify it...

notStart = function(x)
{
  n = length(x)
  i0 = which(x);
  n0 = length(i0);
  i0!=c(1:n)[1:n0];
}

notStartNorEnd = function(x) { which(x)[notStart(x) & rev(notStart(rev(x)))] }

notStartNorEnd(c(F, F, F))
##integer(0)
notStartNorEnd(c(F, F, F, T))
##integer(0)
notStartNorEnd(c(T, F, F, F, T))
##integer(0)
notStartNorEnd(c(T, F, T, T, F, F, T))
[1] 3 4
notStartNorEnd(c(T, T, F, T, T, F, F, T, T, T))
[1] 4 5
notStartNorEnd(c(T, T, F, T, T, F, F))
[1] 4 5

Peter

On Fri, Jun 6, 2014 at 2:45 PM, Fisher Dennis <fisher at plessthan.com> wrote:
> R 3.1.0
> OS X
>
> Colleagues
>
> I have an array (I am using T/F rather than TRUE/FALSE for convenience) that could have patterns like:
>         c(T, T, T, F, F, F, T, F, T, T, T)              ## T at either end, a single T in the middle
>         c(F, F, F, F, F, T, F, F, T, T, T)              ## T at the tail end, a single T in the middle
>         c(T, T, T, F, F, T, T, F, F, F, F)              ## T at the front end, two T in the middle
>         c(T, T, T, F, F, T, T, F, T, F, F)              ## T at the front end, three T in the middle (not contiguous)
>         c(F, F, F, F, F, T, F, F, F, F, F)              ## no T at either end, a single T in the middle
> There might (or might not) be one or more T at the beginning (or the end).
> There might or might not be one or more T in the middle (not in a series that continues to either end) and the position of these T values varies.
>
> I am trying to identify the indices (if any) of these T values in the middle
> A brute force approach would be to strip off any contiguous T values from each end, then look for any remaining T values.  Can anyone propose a more clever approach?
>
> Dennis
>
> Dennis Fisher MD
> P < (The "P Less Than" Company)
> Phone: 1-866-PLessThan (1-866-753-7784)
> Fax: 1-866-PLessThan (1-866-753-7784)
> www.PLessThan.com
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From Thierry.ONKELINX at inbo.be  Sat Jun  7 00:27:48 2014
From: Thierry.ONKELINX at inbo.be (ONKELINX, Thierry)
Date: Fri, 6 Jun 2014 22:27:48 +0000
Subject: [R] Identifying one or more TRUE in the middle of an array
In-Reply-To: <CDDD8DD5-F955-45F1-B339-724FAA6A209E@plessthan.com>
References: <CDDD8DD5-F955-45F1-B339-724FAA6A209E@plessthan.com>
Message-ID: <AA818EAD2576BC488B4F623941DA7427F3A767D3@inbomail.inbo.be>

Here is my solution.

falses <- which(!x)
first.false <- head(falses, 1)
last.false <- tail(falses, 1)
which(x[first.false:last.false]) + first.false - 1


Best regards,

ir. Thierry Onkelinx
Instituut voor natuur- en bosonderzoek / Research Institute for Nature and Forest
team Biometrie & Kwaliteitszorg / team Biometrics & Quality Assurance
Kliniekstraat 25
1070 Anderlecht
Belgium
+ 32 2 525 02 51
+ 32 54 43 61 85
Thierry.Onkelinx at inbo.be
www.inbo.be
To call in the statistician after the experiment is done may be no more than asking him to perform a post-mortem examination: he may be able to say what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does not ensure that a reasonable answer can be extracted from a given body of data. ~ John Tukey

________________________________________
Van: r-help-bounces at r-project.org [r-help-bounces at r-project.org] namens Fisher Dennis [fisher at plessthan.com]
Verzonden: vrijdag 6 juni 2014 23:45
Aan: r-help at stat.math.ethz.ch
Onderwerp: [R] Identifying one or more TRUE in the middle of an array

R 3.1.0
OS X

Colleagues

I have an array (I am using T/F rather than TRUE/FALSE for convenience) that could have patterns like:
        c(T, T, T, F, F, F, T, F, T, T, T)              ## T at either end, a single T in the middle
        c(F, F, F, F, F, T, F, F, T, T, T)              ## T at the tail end, a single T in the middle
        c(T, T, T, F, F, T, T, F, F, F, F)              ## T at the front end, two T in the middle
        c(T, T, T, F, F, T, T, F, T, F, F)              ## T at the front end, three T in the middle (not contiguous)
        c(F, F, F, F, F, T, F, F, F, F, F)              ## no T at either end, a single T in the middle
There might (or might not) be one or more T at the beginning (or the end).
There might or might not be one or more T in the middle (not in a series that continues to either end) and the position of these T values varies.

I am trying to identify the indices (if any) of these T values in the middle
A brute force approach would be to strip off any contiguous T values from each end, then look for any remaining T values.  Can anyone propose a more clever approach?

Dennis

Dennis Fisher MD
P < (The "P Less Than" Company)
Phone: 1-866-PLessThan (1-866-753-7784)
Fax: 1-866-PLessThan (1-866-753-7784)
www.PLessThan.com




        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.
* * * * * * * * * * * * * D I S C L A I M E R * * * * * * * * * * * * *
Dit bericht en eventuele bijlagen geven enkel de visie van de schrijver weer en binden het INBO onder geen enkel beding, zolang dit bericht niet bevestigd is door een geldig ondertekend document.
The views expressed in this message and any annex are purely those of the writer and may not be regarded as stating an official position of INBO, as long as the message is not confirmed by a duly signed document.


From ajdamico at gmail.com  Sat Jun  7 02:26:30 2014
From: ajdamico at gmail.com (Anthony Damico)
Date: Fri, 6 Jun 2014 20:26:30 -0400
Subject: [R] What is SE and how do you calculate it in svymean()?
In-Reply-To: <CAKcMNBLBRsivc-CeH-HBXqfyKj-JUYKnoibwCzJQgeTQAjMoGw@mail.gmail.com>
References: <CAKcMNBLBRsivc-CeH-HBXqfyKj-JUYKnoibwCzJQgeTQAjMoGw@mail.gmail.com>
Message-ID: <CAOwvMDx+BKUajsi+iaO8tAr6MJ+nK2m4bd+A_t5VKQipvF7fGw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140606/8b22b69d/attachment.pl>

From nicholas.winters at mail.mcgill.ca  Fri Jun  6 17:28:57 2014
From: nicholas.winters at mail.mcgill.ca (Nwinters)
Date: Fri, 6 Jun 2014 08:28:57 -0700 (PDT)
Subject: [R] Package 'effects' plotting allEffects question
Message-ID: <1402068537052-4691817.post@n4.nabble.com>

Is there a way to plot just the response function for one variable, instead
of every variable on the same plot?

my model has 13 variables and the plot produces a graph for each of these on
the same plot, which is useless.



--
View this message in context: http://r.789695.n4.nabble.com/Package-effects-plotting-allEffects-question-tp4691817.html
Sent from the R help mailing list archive at Nabble.com.


From nicholas.winters at mail.mcgill.ca  Fri Jun  6 17:29:21 2014
From: nicholas.winters at mail.mcgill.ca (Nwinters)
Date: Fri, 6 Jun 2014 08:29:21 -0700 (PDT)
Subject: [R] Package 'effects' plotting allEffects question
Message-ID: <1402068561400-4691818.post@n4.nabble.com>

Is there a way to plot just the response function for one variable, instead
of every variable on the same plot?

my model has 13 variables and the plot produces a graph for each of these on
the same plot, which is useless.



--
View this message in context: http://r.789695.n4.nabble.com/Package-effects-plotting-allEffects-question-tp4691818.html
Sent from the R help mailing list archive at Nabble.com.


From marcos.takahashi at mobly.com.br  Fri Jun  6 18:06:22 2014
From: marcos.takahashi at mobly.com.br (marcos.takahashi)
Date: Fri, 6 Jun 2014 09:06:22 -0700 (PDT)
Subject: [R] RODBC - address 0x407, cause 'memory not mapped'
In-Reply-To: <1402059372188-4691806.post@n4.nabble.com>
References: <1402059372188-4691806.post@n4.nabble.com>
Message-ID: <1402070782548-4691821.post@n4.nabble.com>

Oh, forgot telling the specifications:

R version 3.0.2 (2013-09-25)
Platform: x86_64-pc-linux-gnu (64-bit)
Database: Mysql
ODBC Connector: libmyodbc

I've configured ODBC Connection using this hot-to:
https://help.ubuntu.com/community/ODBC



--
View this message in context: http://r.789695.n4.nabble.com/RODBC-address-0x407-cause-memory-not-mapped-tp4691806p4691821.html
Sent from the R help mailing list archive at Nabble.com.


From nicholas.winters at mail.mcgill.ca  Fri Jun  6 20:16:11 2014
From: nicholas.winters at mail.mcgill.ca (Nwinters)
Date: Fri, 6 Jun 2014 11:16:11 -0700 (PDT)
Subject: [R] Help with factor levels and reference level
Message-ID: <1402078571681-4691823.post@n4.nabble.com>

I have a variable coded in Stata as follows:
**
*gen sat_pm25cat_=.
replace sat_pm25cat_= 1 if (sat_pm25>=4 & sat_pm25<=7.1 & sat_pm25!=.)
replace sat_pm25cat_= 2 if (sat_pm25>=7.1 & sat_pm25<=10)
replace sat_pm25cat_= 3 if (sat_pm25>=10.1 & sat_pm25<=11.3)
replace sat_pm25cat_= 4 if (sat_pm25>=11.4 & sat_pm25<=12.1)
replace sat_pm25cat_= 5 if (sat_pm25>=12.2 & sat_pm25<=17.1)

gen satpm25catR= "A" if sat_pm25cat_==1
replace satpm25catR= "B" if sat_pm25cat_==2
replace satpm25catR= "C" if sat_pm25cat_==3
replace satpm25catR= "D" if sat_pm25cat_==4
replace satpm25catR= "E" if sat_pm25cat_==5
***

my model for R is:
##
*glm.PM25linB <-glm(leuk ~ satpm25catR + sex + ageR, data=leuk,
family=binomial, epsilon=1e-15, maxit=1000)*
##

In the summary, satpm25catR is being reported as all levels:

<http://r.789695.n4.nabble.com/file/n4691823/Screen_Shot_2014-06-06_at_2.png> 

*What I want is to make "A" the reference level, how do I do this??*
Thank you



--
View this message in context: http://r.789695.n4.nabble.com/Help-with-factor-levels-and-reference-level-tp4691823.html
Sent from the R help mailing list archive at Nabble.com.


From smartpink111 at yahoo.com  Sat Jun  7 04:47:54 2014
From: smartpink111 at yahoo.com (arun)
Date: Fri, 6 Jun 2014 19:47:54 -0700 (PDT)
Subject: [R] Data framing question
Message-ID: <1402109274.98011.YahooMailNeo@web142603.mail.bf1.yahoo.com>

Hi,
May be this helps:
dat1 <- read.table(text="identif roa eta
1 7 5
2 8 9
2 9 8
2 10 7
3 11 6
3 1 4
3 2 2
4 3 3
4 6 5",sep="",header=TRUE)


dat2 <-within(dat1, {
??? eta1 <- ave(eta, identif, FUN = function(x) c(NA, diff(x)))
??? roa1 <- ave(roa, identif, FUN = function(x) c(NA, x[-length(x)]))
})

A.K.


So here is my little problem. I don't know how to compute a new variable roa1, such that first data is split by identif then roa 1 will take the value of the line just before. so it will be something like roa1=(NA,NA,8,9,NA,11,1,NA,3)
?and the same for eta just that for this one first data is split by identif then deta will take the value of the difference between the actual value of eta with the previous something like (NA,NA,-1,-1,NA,-2,2,NA,-2)
21 mins ? Like 



From dwinsemius at comcast.net  Sat Jun  7 05:35:55 2014
From: dwinsemius at comcast.net (David Winsemius)
Date: Fri, 6 Jun 2014 20:35:55 -0700
Subject: [R] Help with factor levels and reference level
In-Reply-To: <1402078571681-4691823.post@n4.nabble.com>
References: <1402078571681-4691823.post@n4.nabble.com>
Message-ID: <3DCCEBA3-82E2-4D8C-880E-6061290F2FC1@comcast.net>


On Jun 6, 2014, at 11:16 AM, Nwinters wrote:

> I have a variable coded in Stata as follows:
> **
> *gen sat_pm25cat_=.
> replace sat_pm25cat_= 1 if (sat_pm25>=4 & sat_pm25<=7.1 & sat_pm25!=.)
> replace sat_pm25cat_= 2 if (sat_pm25>=7.1 & sat_pm25<=10)
> replace sat_pm25cat_= 3 if (sat_pm25>=10.1 & sat_pm25<=11.3)
> replace sat_pm25cat_= 4 if (sat_pm25>=11.4 & sat_pm25<=12.1)
> replace sat_pm25cat_= 5 if (sat_pm25>=12.2 & sat_pm25<=17.1)

Apparently Stata handles overlapping definitions somehow. (7.1 items would be ambiguously define.)  I suspect you can duplicate that intended effect with:

sat_pm25cat_  <- findInterval(sat_pm25, c(4, 7.1 ,10, 11.4,12.2, 17.1) )


> 
> gen satpm25catR= "A" if sat_pm25cat_==1
> replace satpm25catR= "B" if sat_pm25cat_==2
> replace satpm25catR= "C" if sat_pm25cat_==3
> replace satpm25catR= "D" if sat_pm25cat_==4
> replace satpm25catR= "E" if sat_pm25cat_==5


satpm25catR <- factor( LETTERS[1:5][ sat_pm25cat_ ] )


> ***
> 
> my model for R is:
> ##
> *glm.PM25linB <-glm(leuk ~ satpm25catR + sex + ageR, data=leuk,
> family=binomial, epsilon=1e-15, maxit=1000)*
> ##
> 
> In the summary, satpm25catR is being reported as all levels:
> 
> <http://r.789695.n4.nabble.com/file/n4691823/Screen_Shot_2014-06-06_at_2.png> 
> 
> *What I want is to make "A" the reference level, how do I do this??*

It would be the reference level by default since factors are sorted lexically.

-- 
David Winsemius
Alameda, CA, USA


From gunter.berton at gene.com  Sat Jun  7 07:40:07 2014
From: gunter.berton at gene.com (Bert Gunter)
Date: Fri, 6 Jun 2014 22:40:07 -0700
Subject: [R] Help with factor levels and reference level
In-Reply-To: <3DCCEBA3-82E2-4D8C-880E-6061290F2FC1@comcast.net>
References: <1402078571681-4691823.post@n4.nabble.com>
	<3DCCEBA3-82E2-4D8C-880E-6061290F2FC1@comcast.net>
Message-ID: <CACk-te1pMn=Z_2yrypD3HRt3pGHyVmjcCtPMFkLiZ1d2wUyhQg@mail.gmail.com>

... But I think the OP should consult his/her local statistician and
not do this.

1. Categorizing a continuous variable generally loses information.
While there may be times when this may be appropriate, generally
continuous variables should be modeled as such.

2. You also lose the ordering with the categorization to letters,
probably a further loss of potentially useful information. At the
least, it should probably be modeled as an ordered factor (?ordered),
which is not what  has been done.

Just because one can easily do this does not mean that one should.

... with the obvious caveat that I am just guessing, having no
knowledge of the context.

Cheers,
Bert



Bert Gunter
Genentech Nonclinical Biostatistics
(650) 467-7374

"Data is not information. Information is not knowledge. And knowledge
is certainly not wisdom."
Clifford Stoll




On Fri, Jun 6, 2014 at 8:35 PM, David Winsemius <dwinsemius at comcast.net> wrote:
>
> On Jun 6, 2014, at 11:16 AM, Nwinters wrote:
>
>> I have a variable coded in Stata as follows:
>> **
>> *gen sat_pm25cat_=.
>> replace sat_pm25cat_= 1 if (sat_pm25>=4 & sat_pm25<=7.1 & sat_pm25!=.)
>> replace sat_pm25cat_= 2 if (sat_pm25>=7.1 & sat_pm25<=10)
>> replace sat_pm25cat_= 3 if (sat_pm25>=10.1 & sat_pm25<=11.3)
>> replace sat_pm25cat_= 4 if (sat_pm25>=11.4 & sat_pm25<=12.1)
>> replace sat_pm25cat_= 5 if (sat_pm25>=12.2 & sat_pm25<=17.1)
>
> Apparently Stata handles overlapping definitions somehow. (7.1 items would be ambiguously define.)  I suspect you can duplicate that intended effect with:
>
> sat_pm25cat_  <- findInterval(sat_pm25, c(4, 7.1 ,10, 11.4,12.2, 17.1) )
>
>
>>
>> gen satpm25catR= "A" if sat_pm25cat_==1
>> replace satpm25catR= "B" if sat_pm25cat_==2
>> replace satpm25catR= "C" if sat_pm25cat_==3
>> replace satpm25catR= "D" if sat_pm25cat_==4
>> replace satpm25catR= "E" if sat_pm25cat_==5
>
>
> satpm25catR <- factor( LETTERS[1:5][ sat_pm25cat_ ] )
>
>
>> ***
>>
>> my model for R is:
>> ##
>> *glm.PM25linB <-glm(leuk ~ satpm25catR + sex + ageR, data=leuk,
>> family=binomial, epsilon=1e-15, maxit=1000)*
>> ##
>>
>> In the summary, satpm25catR is being reported as all levels:
>>
>> <http://r.789695.n4.nabble.com/file/n4691823/Screen_Shot_2014-06-06_at_2.png>
>>
>> *What I want is to make "A" the reference level, how do I do this??*
>
> It would be the reference level by default since factors are sorted lexically.
>
> --
> David Winsemius
> Alameda, CA, USA
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From smartpink111 at yahoo.com  Sat Jun  7 10:07:08 2014
From: smartpink111 at yahoo.com (arun)
Date: Sat, 7 Jun 2014 01:07:08 -0700 (PDT)
Subject: [R] Data framing question
In-Reply-To: <1402109274.98011.YahooMailNeo@web142603.mail.bf1.yahoo.com>
References: <1402109274.98011.YahooMailNeo@web142603.mail.bf1.yahoo.com>
Message-ID: <1402128428.14275.YahooMailNeo@web142605.mail.bf1.yahoo.com>

Hi,
You may also try:
library(data.table)
dt1 <- data.table(dat1, key = "identif")
dt2 <- copy(dt1)
dt3 <- copy(dt1)

dt1[,c("roa1", "eta1") := list(c(NA, roa[-.N]),c(NA, diff(eta))), by=identif]
#or 

dt2[, `:=`(c("roa1", "eta1"), list(c(NA, roa[-.N]), c(NA, diff(eta)))), by = identif]
# or
dt3[, `:=`(roa1 = c(NA, roa[-.N]), eta1 = c(NA, diff(eta))), by = identif]

identical(dt1, dt2)
# [1] TRUE
identical(dt1,dt3)
#[1] TRUE


identical(dat2, as.data.frame(dt1))
# [1] TRUE

A.K.


On Friday, June 6, 2014 10:47 PM, arun <smartpink111 at yahoo.com> wrote:
Hi,
May be this helps:
dat1 <- read.table(text="identif roa eta
1 7 5
2 8 9
2 9 8
2 10 7
3 11 6
3 1 4
3 2 2
4 3 3
4 6 5",sep="",header=TRUE)


dat2 <-within(dat1, {
??? eta1 <- ave(eta, identif, FUN = function(x) c(NA, diff(x)))
??? roa1 <- ave(roa, identif, FUN = function(x) c(NA, x[-length(x)]))
})

A.K.


So here is my little problem. I don't know how to compute a new variable roa1, such that first data is split by identif then roa 1 will take the value of the line just before. so it will be something like roa1=(NA,NA,8,9,NA,11,1,NA,3)
?and the same for eta just that for this one first data is split by identif then deta will take the value of the difference between the actual value of eta with the previous something like (NA,NA,-1,-1,NA,-2,2,NA,-2)
21 mins ? Like


From smartpink111 at yahoo.com  Sat Jun  7 10:39:10 2014
From: smartpink111 at yahoo.com (arun)
Date: Sat, 7 Jun 2014 01:39:10 -0700 (PDT)
Subject: [R] finding average of entire rows to equal values in a vector
Message-ID: <1402130350.72792.YahooMailNeo@web142601.mail.bf1.yahoo.com>

Hi,
This is not clear.

If this is a combination of rows using a specific formula as you showed, use ?combn
dat <- read.table(text="0.7, 0.3, 0.6, 0.9
1.0, 0.1, 0.4, 0.7
1.2, 0.8, 0.3, 0.1",sep=",",header=FALSE) 

indx <- combn(seq(dim(dat)[1]), 2)
vec1 <- c(0.86, 0.46, 0.5, 0.63)
indx1 <- sapply(seq_len(ncol(indx)), function(i) {
??? ind <- indx[, i]
??? val <- unlist(round((2 * dat[ind[1], ] + dat[ind[2], ])/3, 2))
??? tol <- 0.015
??? all(abs(val - vec1) <= tol)
})
dat[indx[, indx1], ]
#?? V1? V2? V3? V4
#1 0.7 0.3 0.6 0.9
#3 1.2 0.8 0.3 0.1


A.K.? 



Hi,

I'm looking for a way to find the average of several rows, of a 4 x 7 matrix, that will eventually reach a fixed set of values in a vector while always averaging the entire row from the 4x7 to get there. So... in a matrix of 4 columns and 7 rows with values like

0.7, 0.3, 0.6, 0.9
1.0, 0.1, 0.4, 0.7
1.2, 0.8, 0.3, 0.1
...
..
.

how can i write it to find the possible combinations of rows 1, 2, and 3 so that it matches the vector: 0.86, 0.46, 0.5, 0.63 with some small margin of error?

in this case the answer is (2x(row 1)+(row 3))/3

best,
-sunny0 



From istazahn at gmail.com  Sat Jun  7 12:34:50 2014
From: istazahn at gmail.com (Ista Zahn)
Date: Sat, 7 Jun 2014 06:34:50 -0400
Subject: [R] Package 'effects' plotting allEffects question
In-Reply-To: <1402068537052-4691817.post@n4.nabble.com>
References: <1402068537052-4691817.post@n4.nabble.com>
Message-ID: <CA+vqiLFPXx6iaEowwP0Ar=mfjE4bFrr9f0yo1o=wpf1QzapBDA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140607/5ce03e9c/attachment.pl>

From jim at bitwrit.com.au  Sat Jun  7 13:39:35 2014
From: jim at bitwrit.com.au (Jim Lemon)
Date: Sat, 07 Jun 2014 21:39:35 +1000
Subject: [R] Help with factor levels and reference level
In-Reply-To: <1402078571681-4691823.post@n4.nabble.com>
References: <1402078571681-4691823.post@n4.nabble.com>
Message-ID: <2922461.ZXOVTlIH7x@localhost.localdomain>

On Fri, 6 Jun 2014 11:16:11 AM Nwinters wrote:
> I have a variable coded in Stata as follows:
> **
> *gen sat_pm25cat_=.
> replace sat_pm25cat_= 1 if (sat_pm25>=4 & sat_pm25<=7.1 & 
sat_pm25!=.)
> replace sat_pm25cat_= 2 if (sat_pm25>=7.1 & sat_pm25<=10)
> replace sat_pm25cat_= 3 if (sat_pm25>=10.1 & 
sat_pm25<=11.3)
> replace sat_pm25cat_= 4 if (sat_pm25>=11.4 & 
sat_pm25<=12.1)
> replace sat_pm25cat_= 5 if (sat_pm25>=12.2 & 
sat_pm25<=17.1)
> 
> gen satpm25catR= "A" if sat_pm25cat_==1
> replace satpm25catR= "B" if sat_pm25cat_==2
> replace satpm25catR= "C" if sat_pm25cat_==3
> replace satpm25catR= "D" if sat_pm25cat_==4
> replace satpm25catR= "E" if sat_pm25cat_==5
> ***
> 
> my model for R is:
> ##
> *glm.PM25linB <-glm(leuk ~ satpm25catR + sex + ageR, 
data=leuk,
> family=binomial, epsilon=1e-15, maxit=1000)*
> ##
> 
> In the summary, satpm25catR is being reported as all levels:
> 
> 
<http://r.789695.n4.nabble.com/file/n4691823/Screen_Shot_2014-06-06_at_2.png
> >
> 
> *What I want is to make "A" the reference level, how do I do this??*

Hi Nwinters,
I get what you want with this example:

leukdf<-
data.frame(leuk=sample(0:1,100,TRUE),sat_pm25=runif(100,0,17.1),
  sex=sample(c("M","F"),100,TRUE),ageR=sample(20:75,100,TRUE))
leukdf$satpm25catR<-factor(NA,levels=LETTERS[1:5])
leukdf$satpm25catR<-factor(rep(NA,100),levels=LETTERS[1:5])
leukdf$satpm25catR[leukdf$sat_pm25 < 7.1]<-"A"
leukdf$satpm25catR[leukdf$sat_pm25 >= 7.1 &
 leukdf$sat_pm25 < 10.1]<-"B"
leukdf$satpm25catR[leukdf$sat_pm25 >= 10.1 &
 leukdf$sat_pm25 < 11.3]<-"C"
leukdf$satpm25catR[leukdf$sat_pm25 >= 11.3 &
 leukdf$sat_pm25 < 12.1]<-"D"
leukdf$satpm25catR[leukdf$sat_pm25 >= 12.1 &
 leukdf$sat_pm25 < 17.1]<-"E"
summary(glm(leuk ~ satpm25catR + sex + ageR, data=leukdf,
 family=binomial, epsilon=1e-15, maxit=1000))

Call:
glm(formula = leuk ~ satpm25catR + sex + ageR, family = binomial, 
    data = leukdf, epsilon = 1e-15, maxit = 1000)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-1.4813  -1.1798   0.7631   1.1347   1.5195  

Coefficients:
             Estimate Std. Error z value Pr(>|z|)
(Intercept)   1.67565    0.87205   1.922   0.0547
satpm25catRB -0.52289    0.58578  -0.893   0.3721
satpm25catRC -0.79998    0.78405  -1.020   0.3076
satpm25catRD -0.36488    0.88162  -0.414   0.6790
satpm25catRE -0.65372    0.51461  -1.270   0.2040
sexM         -0.54063    0.42073  -1.285   0.1988
ageR         -0.02095    0.01455  -1.440   0.1500

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 138.59  on 99  degrees of freedom
Residual deviance: 133.74  on 93  degrees of freedom
AIC: 147.74

Number of Fisher Scoring iterations: 5

It may be a problem with the way you have calculated the categorical 
variable as David noted. However, if you haven't read a paper I had 
published a few years ago titled "On the perils of categorizing 
responses", you might want to have a look.

Jim


From deter088 at umn.edu  Sat Jun  7 15:41:07 2014
From: deter088 at umn.edu (Charles Determan Jr)
Date: Sat, 7 Jun 2014 08:41:07 -0500
Subject: [R] error in R program
In-Reply-To: <CABLo8nEvjPATjDox3Fno-D-3Ojo1MMmwM42E9mr_tJHpMzj-PA@mail.gmail.com>
References: <CABLo8nEYXwbuEwSgLu1=d9FWsDAV3au74W1_wr1ZDD-T68xP_g@mail.gmail.com>
	<CAOLJphkOJYH0-WWjjZrVR6UT4opF3idYq7XcjL+2W3spVD0O1A@mail.gmail.com>
	<CABLo8nEvjPATjDox3Fno-D-3Ojo1MMmwM42E9mr_tJHpMzj-PA@mail.gmail.com>
Message-ID: <CAOLJphmmfq=+VuKQR8MDTVzXx4bSg+sCWQiQRRW6mCqsqkpvfA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140607/f551416c/attachment.pl>

From lists at revelle.net  Sat Jun  7 22:10:18 2014
From: lists at revelle.net (William Revelle)
Date: Sat, 7 Jun 2014 15:10:18 -0500
Subject: [R] plot in package psych with function error.bars.by
In-Reply-To: <107834395.A8ZI0oDvek@localhost.localdomain>
References: <1401776898895-4691632.post@n4.nabble.com>
	<107834395.A8ZI0oDvek@localhost.localdomain>
Message-ID: <177721B3-887B-40EE-8A89-9EA39EE95A5D@revelle.net>

Tham and Jim,
  As usual, my first response to this is when you find a problem with the psych package, write me (as author) as well as the R-help list.

In addition, always include which version of psych you are running.  That will help in the debugging.  The current version 1.4.5 on CRAN draws ?cats eyes? instead of error bars, unless you turn off that option.
You might find that useful.


Then, my comment to Tham,

Yes, you have found a weakness (some would say a bug) in that I currently default the base plot character to be 15. I will correct this in the next release (which won?t be shipped to CRAN until mid to late July).  In the interim, I will try to get a fix up on the personality-project.org/r  repository by early next week.

To Jim,  I can not get your error at all.  Tham was finding a problem with the basic example, which works, unless you try to specify the pch, which doesn?t work.

Bill





On Jun 3, 2014, at 4:10 PM, Jim Lemon <jim at bitwrit.com.au> wrote:

> On Mon, 2 Jun 2014 11:28:19 PM Tham Tran wrote:
>> Hi,
>> 
>> I have a problem with the function "error.bars.by" in package 
> "psych".
>> This is the code for example of a graph:
>> 
>> 
> keys.list=list(Agree=c(-1,2:5),Conscientious=c(6:8,-9,-10),Extraversion=c(-1
>> 1,-12,13:15),Neuroticism=c(16:20),Openness = 
> c(21,-22,23,24,-25))
>> keys = make.keys(28,keys.list,item.labels=colnames(bfi))
>> scores = score.items(keys,bfi,min=1,max=6)
>> require(psych)
>> error.bars.by(scores$scores,round(bfi$age/10)*10,by.var=TRUE,
>> main="BFI age trends",legend=3,labels=colnames(scores$scores),
>> xlab="Age",ylab="Mean item score")
>> 
>> I need to change the plotting character and line type of the graph 
> according
>> to the scores (Agree,Conscientious,Extraticism,Openness).
>> 
>> I have tried with:
>> error.bars.by(scores$scores,round(bfi$age/10)*10,by.var=TRUE,
>> main="BFI age trends",legend=3,labels=colnames(scores$scores),
>> pch=c(1,2,3,4), lty=1
>> ,xlab="Age",ylab="Mean item score")
>> 
>> But there is a problem:
>> Error in localWindow(xlim, ylim, log, asp, ...) :  formal argument "pch"
>> matched by multiple actual arguments
>> 
>> Anyone can help me for this problem.
> 
> Hi Tham,
> When I run your example, I get the following error:
> 
> Error in seq.default(clim, -clim, 0.01) : 
>  'from' cannot be NA, NaN or infinite
> In addition: Warning messages:
> 1: In qt(1 - alpha/2, group.stats[[g]]$n - 1) : NaNs produced
> 2: In dt(ln, n - 1) : NaNs produced
> 3: In qt(alpha/2, n - 1) : NaNs produced
> 
> As I don't know what is happening here, I can't do anything about the 
> pch problem.
> 
> Jim
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

William Revelle		           http://personality-project.org/revelle.html
Professor			           http://personality-project.org
Department of Psychology   http://www.wcas.northwestern.edu/psych/
Northwestern University	   http://www.northwestern.edu/
Use R for psychology             http://personality-project.org/r
It is 5 minutes to midnight	   http://www.thebulletin.org


From friendly at yorku.ca  Sat Jun  7 23:07:14 2014
From: friendly at yorku.ca (Michael Friendly)
Date: Sat, 07 Jun 2014 17:07:14 -0400
Subject: [R] Package 'effects' plotting allEffects question
In-Reply-To: <1402068537052-4691817.post@n4.nabble.com>
References: <1402068537052-4691817.post@n4.nabble.com>
Message-ID: <53937F02.9090908@yorku.ca>

just use
plot(Effect("myvar", mymodel))


On 6/6/2014 11:28 AM, Nwinters wrote:
> Is there a way to plot just the response function for one variable, instead
> of every variable on the same plot?
>
> my model has 13 variables and the plot produces a graph for each of these on
> the same plot, which is useless.
>
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/Package-effects-plotting-allEffects-question-tp4691817.html
> Sent from the R help mailing list archive at Nabble.com.
>


-- 
Michael Friendly     Email: friendly AT yorku DOT ca
Professor, Psychology Dept. & Chair, Quantitative Methods
York University      Voice: 416 736-2100 x66249 Fax: 416 736-5814
4700 Keele Street    Web:   http://www.datavis.ca
Toronto, ONT  M3J 1P3 CANADA


From yw1468 at nyu.edu  Sat Jun  7 15:48:49 2014
From: yw1468 at nyu.edu (Yijia Wang)
Date: Sat, 7 Jun 2014 06:48:49 -0700
Subject: [R] Help on postscript
Message-ID: <CAHwbKs2zPHL++3abakAp8vtGN9=GfLv=x=mB-cpHFBtq7o9y1g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140607/99916473/attachment.pl>

From muditfool at gmail.com  Sat Jun  7 16:04:42 2014
From: muditfool at gmail.com (mudit gupta)
Date: Sat, 7 Jun 2014 19:34:42 +0530
Subject: [R] copula fitting
Message-ID: <CAOqgmySyc59BL1p4OO0WAybAn6Xuz2PGyWM+8d1SyqbvMLowqw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140607/053d97f5/attachment.pl>

From a0906257 at unet.univie.ac.at  Sat Jun  7 16:23:48 2014
From: a0906257 at unet.univie.ac.at (zagreus)
Date: Sat, 7 Jun 2014 07:23:48 -0700 (PDT)
Subject: [R] Interval for rnorm command?
Message-ID: <1402151028393-4691856.post@n4.nabble.com>

Hello everyone!

I want to create a data vector using the "rnorm" command. Let's say /x <-
rnorm(100, 1, 2)/. This gives me 100 values from the specific normal
distribution. However, I want to generate a variable that has a certain
range of values, e.g. values can't exceed the interval /[-3.7; 3.7]/. How
can I implement such an interval? 

Thanks for your help and sorry if this is totally trivial, I am new to R. 



--
View this message in context: http://r.789695.n4.nabble.com/Interval-for-rnorm-command-tp4691856.html
Sent from the R help mailing list archive at Nabble.com.


From MWillmorth at clearwater-research.com  Sat Jun  7 17:22:32 2014
From: MWillmorth at clearwater-research.com (Michael Willmorth)
Date: Sat, 7 Jun 2014 09:22:32 -0600
Subject: [R] rake() error message
Message-ID: <8A87EADD0D346340A30257AADF83D364089B26@cwr103.clearwater.lcl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140607/6a10d9a3/attachment.pl>

From alves011 at umn.edu  Sat Jun  7 19:59:17 2014
From: alves011 at umn.edu (tmalves)
Date: Sat, 7 Jun 2014 10:59:17 -0700 (PDT)
Subject: [R] Discrete distributions in R
Message-ID: <1402163957159-4691859.post@n4.nabble.com>

Hello there,

I am a new R user. I would like to test eight discrete distributions as
Barrigossi et al. 2001. Goodness-of-fit was indicated by chi-square test.
They used a Fortran program for fitting the discrete frequency
distributions:

<http://r.789695.n4.nabble.com/file/n4691859/discrete_distributions.png> 

Please, can you guide me to obtain similar tests for other data sets? 

Barrigossi, JAF, et al. "Spatial and probability distribution of Mexican
bean beetle (Coleoptera: Coccinellidae) egg mass populations in dry bean."
Environmental entomology 30.2 (2001): 244-253.

Thank you.



--
View this message in context: http://r.789695.n4.nabble.com/Discrete-distributions-in-R-tp4691859.html
Sent from the R help mailing list archive at Nabble.com.


From bimali.milan at gmail.com  Sat Jun  7 23:34:04 2014
From: bimali.milan at gmail.com (Milan Bimali)
Date: Sat, 7 Jun 2014 16:34:04 -0500
Subject: [R] Help with R package
Message-ID: <CANAaPg-+WuumjQuBBNv0F1aSTtJaSX4b_0-HyQm4mHULsZw-7w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140607/24ac4b6f/attachment.pl>

From jim at bitwrit.com.au  Sun Jun  8 05:00:42 2014
From: jim at bitwrit.com.au (Jim Lemon)
Date: Sun, 08 Jun 2014 13:00:42 +1000
Subject: [R] Help on postscript
In-Reply-To: <CAHwbKs2zPHL++3abakAp8vtGN9=GfLv=x=mB-cpHFBtq7o9y1g@mail.gmail.com>
References: <CAHwbKs2zPHL++3abakAp8vtGN9=GfLv=x=mB-cpHFBtq7o9y1g@mail.gmail.com>
Message-ID: <3560202.lzd29CndHS@localhost.localdomain>

On Sat, 7 Jun 2014 06:48:49 AM Yijia Wang wrote:
> Hello everyone,
> 
> I'm a beginner on R, and I recently met a paragraph of code that I 
don't
> quite understand, anyone could nicely offer me some detailed 
explanation on
> it? Many thanks, and I'll wait on-line. Here is the code:
> 
> postscript("SPreturns_tplot.ps",width=6,height=5)  # Figure 19.2
> par(mfrow=c(1,1))
> qqplot(SPreturn, qt(grid,df=2.9837),main="t-probability plot,
> df=2.9837",xlab="data",ylab="t-quantiles")
> abline(lm(qt(c(.25,.75),df=2.9837)~quantile(SPreturn,c(.25,.75))))
> graphics.off()
> 
> I suppose this to be a plotting process, however, after I run it in
> RStudio, there is no response like plotting, so I can't figure out what
> exactly is this code telling about.
> 
Hi Yijia,
The above should create a file named "SPreturns_tplot.ps" in the working 
directory of your R session (use getwd() to find it). You should be able to 
see the image using a Postscript display manager like Ghostview - "gs" in 
Linux, GSview in Windows.

Jim


From r.turner at auckland.ac.nz  Sun Jun  8 05:32:56 2014
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Sun, 08 Jun 2014 15:32:56 +1200
Subject: [R] Interval for rnorm command?
In-Reply-To: <1402151028393-4691856.post@n4.nabble.com>
References: <1402151028393-4691856.post@n4.nabble.com>
Message-ID: <5393D968.3030702@auckland.ac.nz>

On 08/06/14 02:23, zagreus wrote:
> Hello everyone!
>
> I want to create a data vector using the "rnorm" command. Let's say /x <-
> rnorm(100, 1, 2)/. This gives me 100 values from the specific normal
> distribution. However, I want to generate a variable that has a certain
> range of values, e.g. values can't exceed the interval /[-3.7; 3.7]/. How
> can I implement such an interval?

What you are asking for amounts to drawing a sample from a *truncated* 
normal distribution.

Try

	RSiteSearch("truncated normal")

to find appropriate functions to effect this procedure.

cheers,

Rolf Turner


From jwd at surewest.net  Sun Jun  8 08:00:20 2014
From: jwd at surewest.net (jwd)
Date: Sat, 7 Jun 2014 23:00:20 -0700
Subject: [R] distance by sea
In-Reply-To: <CAD0LQxD2e9s+RvBFCPQasAu6=mT2hzN1YxZdega4uhUeuN=5UA@mail.gmail.com>
References: <CAD0LQxD2e9s+RvBFCPQasAu6=mT2hzN1YxZdega4uhUeuN=5UA@mail.gmail.com>
Message-ID: <20140607230020.0e8f8087@draco>

On Thu, 5 Jun 2014 14:58:11 +0200
Giulia Fassio <giuliafassio at gmail.com> wrote:

> Hello,
> 
> someone know if it is possible to use R to calculate distance by sea
> between two geographic coordinates? I have many points in the sea and
> I want to create a matrix using R of the length of trajectories that
> pass only trough sea.
> 
> Thanks
> 
> Giulia
> 

You need to be a great deal more detailed before you are likely to get
useful advice.  Are you trying to track a sea mammal for example?  Or
are you working out the course for a sea vessel to travel?

JWDougehrty


From yvan at dragonfly.co.nz  Sun Jun  8 08:23:53 2014
From: yvan at dragonfly.co.nz (Yvan Richard)
Date: Sun, 8 Jun 2014 18:23:53 +1200
Subject: [R] distance by sea
In-Reply-To: <20140607230020.0e8f8087@draco>
References: <CAD0LQxD2e9s+RvBFCPQasAu6=mT2hzN1YxZdega4uhUeuN=5UA@mail.gmail.com>
	<20140607230020.0e8f8087@draco>
Message-ID: <CAMrYPbEFot-YMyGU-7LH6kfYOdmErtCSheH+g9WEpW6N+5A8RA@mail.gmail.com>

Tell me if I'm wrong, but I am guessing that you are trying to
calculate the minimum distance between two points, given the presence
of barriers between them. For this problem, I have been using cost
distances.  By giving a raster representing the cost of crossing one
cell of the landscape, the minimum distance that minimises the cost of
movement between two locations can be found.  If you assign the cells
of a projected raster that represent the sea with a value of 1, and
the cells that represent land with a very high value (or infinite),
the resulting cost distance will be the minimum distance over sea,
without going over land.

I have been using GRASS for this, but cost distances can also be
calculated in R with the gdistance package. But I don't have much
experience with it.

Cheers,
-Yvan


On 8 June 2014 18:00, jwd <jwd at surewest.net> wrote:
> On Thu, 5 Jun 2014 14:58:11 +0200
> Giulia Fassio <giuliafassio at gmail.com> wrote:
>
>> Hello,
>>
>> someone know if it is possible to use R to calculate distance by sea
>> between two geographic coordinates? I have many points in the sea and
>> I want to create a matrix using R of the length of trajectories that
>> pass only trough sea.
>>
>> Thanks
>>
>> Giulia
>>
>
> You need to be a great deal more detailed before you are likely to get
> useful advice.  Are you trying to track a sea mammal for example?  Or
> are you working out the course for a sea vessel to travel?
>
> JWDougehrty
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Yvan Richard

      DRAGONFLY Science

Physical address: Level 5, 158 Victoria St, Te Aro, Wellington
Postal address: PO Box 27535, Wellington 6141
New Zealand
Ph: 04.385.9285
web page


From smartpink111 at yahoo.com  Sun Jun  8 09:17:45 2014
From: smartpink111 at yahoo.com (arun)
Date: Sun, 8 Jun 2014 00:17:45 -0700 (PDT)
Subject: [R] Standard Deviation in R
Message-ID: <1402211865.16504.YahooMailNeo@web142601.mail.bf1.yahoo.com>

Hi,
Please check this link:
http://stats.stackexchange.com/questions/25956/what-formula-is-used-for-standard-deviation-in-r

A.K.


It is my understanding that the R function SD finds the standard deviation of a random variable or a list. Please consider the following list: { 1, 2, 3 }. I claim that the standard deviation of this list is not 1. However, the following R statement returns 1:
???????? sd ( seq(1:3) )
What am I missing?

I thank the group in advance for their responses.

Bob 



From ajdamico at gmail.com  Sun Jun  8 14:48:00 2014
From: ajdamico at gmail.com (Anthony Damico)
Date: Sun, 8 Jun 2014 08:48:00 -0400
Subject: [R] rake() error message
In-Reply-To: <8A87EADD0D346340A30257AADF83D364089B26@cwr103.clearwater.lcl>
References: <8A87EADD0D346340A30257AADF83D364089B26@cwr103.clearwater.lcl>
Message-ID: <CAOwvMDwynPUr1AZi0UJ90o93qSftvPcY-sWxSFyR_WjJUpMQ7w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140608/1b515955/attachment.pl>

From deter088 at umn.edu  Sun Jun  8 15:21:18 2014
From: deter088 at umn.edu (Charles Determan Jr)
Date: Sun, 8 Jun 2014 08:21:18 -0500
Subject: [R] error in R program
In-Reply-To: <CAHwbKs3O1Fs9ASa=84RZG5NEUM-cyq4gQ7-24LkbbraVOezakA@mail.gmail.com>
References: <CABLo8nEYXwbuEwSgLu1=d9FWsDAV3au74W1_wr1ZDD-T68xP_g@mail.gmail.com>
	<CAOLJphkOJYH0-WWjjZrVR6UT4opF3idYq7XcjL+2W3spVD0O1A@mail.gmail.com>
	<CABLo8nEvjPATjDox3Fno-D-3Ojo1MMmwM42E9mr_tJHpMzj-PA@mail.gmail.com>
	<CAOLJphmmfq=+VuKQR8MDTVzXx4bSg+sCWQiQRRW6mCqsqkpvfA@mail.gmail.com>
	<CAHwbKs3O1Fs9ASa=84RZG5NEUM-cyq4gQ7-24LkbbraVOezakA@mail.gmail.com>
Message-ID: <CAOLJphnZik_3vArfv0Tng=Bd-NSoYuVoY8vM+EBgpPKSTxZFvg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140608/b059261d/attachment.pl>

From ligges at statistik.tu-dortmund.de  Sun Jun  8 15:39:53 2014
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Sun, 08 Jun 2014 15:39:53 +0200
Subject: [R] Help with R package
In-Reply-To: <CANAaPg-+WuumjQuBBNv0F1aSTtJaSX4b_0-HyQm4mHULsZw-7w@mail.gmail.com>
References: <CANAaPg-+WuumjQuBBNv0F1aSTtJaSX4b_0-HyQm4mHULsZw-7w@mail.gmail.com>
Message-ID: <539467A9.4070802@statistik.tu-dortmund.de>



On 07.06.2014 23:34, Milan Bimali wrote:
> Dear R Community,
>    I am in process of developing an R package which in turn depends on a
> package that is not available in CRAN but has to be downloaded from a web
> source (as follows). Could someone guide me on how to include the package
> listed in "Depends" of the Description file. I have the package installed
> in my computer:
>
> Source of Package:
> source(???http://bioconductor.org/biocLite.R???)
> biocLite(???Packagename???)
> library(Packagename)


A user just need to set BioC as a default repository as in

setRepositories()

and then install.package("yourPackage") will also automatically install 
the dependencies from BioC.

Best,
Uwe Ligges



> Thank you in advance,
> Milan
>
> 	[[alternative HTML version deleted]]
>
>
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From lists at revelle.net  Sun Jun  8 18:25:00 2014
From: lists at revelle.net (William Revelle)
Date: Sun, 8 Jun 2014 11:25:00 -0500
Subject: [R] Identifying one or more TRUE in the middle of an array
In-Reply-To: <AA818EAD2576BC488B4F623941DA7427F3A767D3@inbomail.inbo.be>
References: <CDDD8DD5-F955-45F1-B339-724FAA6A209E@plessthan.com>
	<AA818EAD2576BC488B4F623941DA7427F3A767D3@inbomail.inbo.be>
Message-ID: <4EC69A23-17AA-477B-B9C5-F0A1E498DBE0@revelle.net>

Yet another way which returns the row and column of the items you want

rc <- which(t(x[,-c(1,ncol(x))]),arr.ind=TRUE)  #this identifies the rows and columns but is one column off
rc[,1] <- rc[,1] +1 #this adjusts the columns
colnames(rc) <- c("col","row")
rc   #show them

Bill




On Jun 6, 2014, at 5:27 PM, ONKELINX, Thierry <Thierry.ONKELINX at inbo.be> wrote:

> Here is my solution.
> 
> falses <- which(!x)
> first.false <- head(falses, 1)
> last.false <- tail(falses, 1)
> which(x[first.false:last.false]) + first.false - 1
> 
> 
> Best regards,
> 
> ir. Thierry Onkelinx
> Instituut voor natuur- en bosonderzoek / Research Institute for Nature and Forest
> team Biometrie & Kwaliteitszorg / team Biometrics & Quality Assurance
> Kliniekstraat 25
> 1070 Anderlecht
> Belgium
> + 32 2 525 02 51
> + 32 54 43 61 85
> Thierry.Onkelinx at inbo.be
> www.inbo.be
> To call in the statistician after the experiment is done may be no more than asking him to perform a post-mortem examination: he may be able to say what the experiment died of. ~ Sir Ronald Aylmer Fisher
> The plural of anecdote is not data. ~ Roger Brinner
> The combination of some data and an aching desire for an answer does not ensure that a reasonable answer can be extracted from a given body of data. ~ John Tukey
> 
> ________________________________________
> Van: r-help-bounces at r-project.org [r-help-bounces at r-project.org] namens Fisher Dennis [fisher at plessthan.com]
> Verzonden: vrijdag 6 juni 2014 23:45
> Aan: r-help at stat.math.ethz.ch
> Onderwerp: [R] Identifying one or more TRUE in the middle of an array
> 
> R 3.1.0
> OS X
> 
> Colleagues
> 
> I have an array (I am using T/F rather than TRUE/FALSE for convenience) that could have patterns like:
>        c(T, T, T, F, F, F, T, F, T, T, T)              ## T at either end, a single T in the middle
>        c(F, F, F, F, F, T, F, F, T, T, T)              ## T at the tail end, a single T in the middle
>        c(T, T, T, F, F, T, T, F, F, F, F)              ## T at the front end, two T in the middle
>        c(T, T, T, F, F, T, T, F, T, F, F)              ## T at the front end, three T in the middle (not contiguous)
>        c(F, F, F, F, F, T, F, F, F, F, F)              ## no T at either end, a single T in the middle
> There might (or might not) be one or more T at the beginning (or the end).
> There might or might not be one or more T in the middle (not in a series that continues to either end) and the position of these T values varies.
> 
> I am trying to identify the indices (if any) of these T values in the middle
> A brute force approach would be to strip off any contiguous T values from each end, then look for any remaining T values.  Can anyone propose a more clever approach?
> 
> Dennis
> 
> Dennis Fisher MD
> P < (The "P Less Than" Company)
> Phone: 1-866-PLessThan (1-866-753-7784)
> Fax: 1-866-PLessThan (1-866-753-7784)
> www.PLessThan.com
> 
> 
> 
> 
>        [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> * * * * * * * * * * * * * D I S C L A I M E R * * * * * * * * * * * * *
> Dit bericht en eventuele bijlagen geven enkel de visie van de schrijver weer en binden het INBO onder geen enkel beding, zolang dit bericht niet bevestigd is door een geldig ondertekend document.
> The views expressed in this message and any annex are purely those of the writer and may not be regarded as stating an official position of INBO, as long as the message is not confirmed by a duly signed document.
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

William Revelle		           http://personality-project.org/revelle.html
Professor			           http://personality-project.org
Department of Psychology   http://www.wcas.northwestern.edu/psych/
Northwestern University	   http://www.northwestern.edu/
Use R for psychology             http://personality-project.org/r
It is 5 minutes to midnight	   http://www.thebulletin.org


From motyocska at yahoo.com  Sun Jun  8 18:55:13 2014
From: motyocska at yahoo.com (Andras Farkas)
Date: Sun, 8 Jun 2014 09:55:13 -0700 (PDT)
Subject: [R] optFederov question
Message-ID: <1402246513.85869.YahooMailBasic@web161602.mail.bf1.yahoo.com>

Dear All,

seeking input (or assurance) that I am using the optFederov in AlgDesign apropriatelly...

I have:

require(AlgDesign)
c <-seq(1,64,by=0.1)
econ=9.16
ic=4.796
hill=1.217
x=5.618

eff <-econ-(ic*(c^hill/(x^hill+c^hill)))

cand.list <-data.frame(c=c,eff=eff,econ=econ,ic=ic,hill=hill,x=x)


my goal here is to select the values in c that are most "sensitive" to most accuratelly estimating econ, ic, hill and x. These parameters will be estimated based on the relationship eff <-econ-(ic*(c^hill/(x^hill+c^hill))) using nls. To my knowledge D optimal design is one of the ways to go, thus I have started experimenting with optFederov. My qestion is if writing the code this way is optimal (or not):


optFederov(~ I(econ-(ic*(c^hill/(x^hill+c^hill)))),data=cand.list),

all of your help is greatly appreciated,

thanks,

Andras


From marc_grt at yahoo.fr  Sun Jun  8 20:59:32 2014
From: marc_grt at yahoo.fr (Marc Girondot)
Date: Sun, 08 Jun 2014 20:59:32 +0200
Subject: [R] How to use fixed parameter in mle2() function from bbmle
	package?
Message-ID: <5394B294.2000204@yahoo.fr>

Dear list-members,

I discover recently bbmle package from an answer in r-list. It makes 
some analyses more easily to solve. However I have one problem using 
fixed parameter of mle2 and one question about parametrization of mle2.
I send the question directly to the maintainer of the package but I get 
no answer still.
If anyone has solution, it would be great. Thanks.
Sincerely,

Marc Girondot

I make a very simplified version of the problem I have:
First, a version that works perfectly. It fits simply a Gaussian 
distribution from a set of data:
# generate data from Gaussian distribution
set.seed(1001)
df <- data.frame(A=rnorm(50, 10, 2))

# the function that return log L
knorm <- function(x, mean, sd, log=FALSE) {
   l <- dnorm(x, mean, sd, log=TRUE)
     if (log) l else exp(l)
}

# fit data using mle2. All is ok
r <- mle2(A ~ knorm(mean=m, sd=s), data=df, start=list(m=10, s=2), 
control=list(maxit=5000))

Then I try to fix one parameter, here sd; and I have problem:
# does not work
r <- mle2(A ~ knorm(mean=m), fixed=list(sd=2), data=df, 
start=list(m=10), control=list(maxit=5000))

Probably I make an error but I cant find what is wrong.

Second, I try to implement parameters as a vector within the list. I 
don't know if it is possible. But at least with this try, it does not work:
knorm <- function(x, par, log=FALSE) {
   l <- dnorm(x, par["mean"], par["sd"], log=TRUE)
     if (log) l else exp(l)
}

# does not work
r <- mle2(A ~ knorm(par=p), data=df, start=list(p=structure(c(10, 12), 
.Names = c("mean", "sd"))), control=list(maxit=5000))

Is it not possible or I make a mistake ?


From hanhtham.tran at yahoo.com.vn  Sun Jun  8 17:53:48 2014
From: hanhtham.tran at yahoo.com.vn (Tham Tran)
Date: Sun, 8 Jun 2014 08:53:48 -0700 (PDT)
Subject: [R] plot in package psych with function error.bars.by
In-Reply-To: <177721B3-887B-40EE-8A89-9EA39EE95A5D@revelle.net>
References: <1401776898895-4691632.post@n4.nabble.com>
	<107834395.A8ZI0oDvek@localhost.localdomain>
	<177721B3-887B-40EE-8A89-9EA39EE95A5D@revelle.net>
Message-ID: <1402242828846-4691877.post@n4.nabble.com>

Dear William,

Thanks to your answer, i no longer waste time trying to get a solution for
this question. I'm waiting your next release.

Tham





--
View this message in context: http://r.789695.n4.nabble.com/plot-in-package-psych-with-function-error-bars-by-tp4691632p4691877.html
Sent from the R help mailing list archive at Nabble.com.


From kasterma at kasterma.net  Sun Jun  8 10:15:18 2014
From: kasterma at kasterma.net (Bart Kastermans)
Date: Sun, 8 Jun 2014 10:15:18 +0200
Subject: [R] Use of library(X) in the code of library X.
In-Reply-To: <CAJ9CoWmz8U8+xLWZzGhOS5scKkUVzjGKjrKXH+ODkwu1aAk6sA@mail.gmail.com>
References: <E8341397-C30F-4579-94D0-1D126C2FE9F9@kasterma.net>
	<53920B8B.4070306@gmail.com>
	<CAJ9CoWmz8U8+xLWZzGhOS5scKkUVzjGKjrKXH+ODkwu1aAk6sA@mail.gmail.com>
Message-ID: <0E673EBF-5540-4515-9B32-94DB9DCC2E42@kasterma.net>

Thanks Max and Duncan for the replies.

To Max in particular I would say that ready code written in possibly non-optimal
style (though I did not read enough of caret to have an opinion on that code
in particular) would be good practice too.

When I was a professor and I got complaints about other professors lecturing
I always answered the same; if you want to be a good mathematician you
better learn to get the best from bad lectures since in conferences most talks
are like that.  I can only hope other people would say something similar when
they had students complain to them about my bad lectures.

Best,
Bart
http://kasterma.net/

On 06 Jun 2014, at 21:14, Max Kuhn <mxkuhn at gmail.com> wrote:

> That is legacy code but there was a good reason back then.
> 
> caret is written to use parallel processing via the foreach package.
> There were some cases where the worker processes did not load the
> required packages (even when I used foreach's ".packages" argument) so
> I would do it explicitly. I don't recall which parallel backend had
> the issue.
> 
> The more important lesson is that if you want to "understand some R
> code written by others" you'll learn more bad habits than good ones if
> you examine my packages?
> 
> Max
> 
> On Fri, Jun 6, 2014 at 2:42 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>> On 06/06/2014 10:26 AM, Bart Kastermans wrote:
>>> 
>>> To improve my R skills I try to understand some R code written by others.
>>> Mostly
>>> I am looking at the code of packages I use.  Today I looked at the code
>>> for the
>>> caret package
>>> 
>>> http://cran.r-project.org/src/contrib/caret_6.0-30.tar.gz
>>> 
>>> in particular at the file R/adaptive.R
>>> 
>>> This file starts with:
>>> 
>>> adaptiveWorkflow <- function(x, y, wts, info, method, ppOpts, ctrl, lev,
>>>                              metric, maximize, testing = FALSE, ...) {
>>>   library(caret)
>>>   loadNamespace("caret?)
>>> 
>>> From ?library and googling I can?t figure out what this code would do.
>>> 
>>> Why would you call library(caret) in the caret package?
>> 
>> 
>> I don't know that package, and since adaptiveWorkflow is not documented at
>> the user level, I can't tell exactly what the author had in mind.  However,
>> code like that could be present for debugging purposes (and is
>> unintentionally present in the CRAN copy), or could be intentional.  The
>> library(caret) call has the effect of ensuring that the package is on the
>> search list.  (It might have been loaded invisibly by another package.)
>> This is generally considered to be bad form nowadays; packages should
>> function properly without being on the search list.
>> 
>> I can't think of a situation where loadNamespace() would do anything --- it
>> would have been called by library().
>> 
>> Duncan Murdoch
>> 
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From lijiamingforever at gmail.com  Sun Jun  8 18:17:32 2014
From: lijiamingforever at gmail.com (lijiaming)
Date: Mon, 9 Jun 2014 00:17:32 +0800
Subject: [R] Error in x@coords[i, , drop = FALSE] : subscript out of bounds
Message-ID: <2014060900172817090719@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140609/cceba434/attachment.pl>

From MWillmorth at clearwater-research.com  Sun Jun  8 21:12:19 2014
From: MWillmorth at clearwater-research.com (Michael Willmorth)
Date: Sun, 8 Jun 2014 13:12:19 -0600
Subject: [R] rake() error message
In-Reply-To: <8A87EADD0D346340A30257AADF83D364089B26@cwr103.clearwater.lcl>
References: <8A87EADD0D346340A30257AADF83D364089B26@cwr103.clearwater.lcl>
Message-ID: <8A87EADD0D346340A30257AADF83D364136E7B46@cwr103.clearwater.lcl>

Here is some code with a subset of 50 cases that produces a similar set
of errors to what I got with the full data set (31,690 cases):

##########
# Load "survey" package
#########

library(survey)

##########
# Create raking margins
##########

pop.m01 <- data.frame(m01=1:14,
  Freq=c(1013620, 1366250, 1246162, 1380230, 1148476, 668834, 486537,
         984026, 1390836, 1293432, 1460100, 1266403, 812223, 789978))
pop.m02 <- data.frame(m02=1:6,
  Freq=c(9134953, 2168974, 2561303, 1222942, 42514, 176421))
pop.m03 <- data.frame(m03=1:4,
  Freq=c(2347607, 4225178, 4124366, 4609957))
pop.m04 <- data.frame(m04=1:3, Freq=c(6855946, 5094143, 3357017))
pop.m05 <- data.frame(m05=1:2, Freq=c(8311759.101, 6995347.899))
pop.m06 <- data.frame(m06c=c(1, 2, 3, 4, 7, 8, 9, 10),
  Freq=c(4405337, 975699, 1248910, 680163, 4729616, 1193275, 1312393,
         761714))
pop.m07 <- data.frame(m07c=c(1, 2, 3, 4, 7, 8, 9, 10, 13, 14, 15, 16),
  Freq=c(2457662, 733975, 1030595, 532500, 3088896, 796220, 956879,
         537929, 3588395, 638779, 573829, 371448))
pop.m08 <- data.frame(m08=1:2, Freq=c(12291607, 3015500))
pop.m09 <- data.frame(m09=1:8,
  Freq=c(1215876, 1002016, 1138654, 237269, 1201567, 1760980,
         6551511, 2199234))
pop.m10 <- data.frame(
  m10c=c(1, 3, 4, 5, 6, 7, 8, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19,
        20, 21, 22, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36,
        38, 39, 40, 41, 42, 43, 45, 47, 50, 53, 55),
  Freq=c(346455, 177926, 231670, 210245, 128888, 120692, 291243,
         150882, 192203, 171500, 105349, 90839, 184875, 178779,
         166734, 210432, 185412, 112573, 99849, 99772, 45332, 40956,
         26492, 24717, 161902, 178638, 181969, 230485, 209149,
         129941, 109483, 475277, 297864, 360707, 293674, 179154,
         154304, 2300506, 2269687, 1981318, 939737, 829522, 429975))
pop.m11 <- data.frame(m11=1:16,
  Freq=c(586940, 628936, 483989, 518027, 559004, 579650, 115631,
         121638, 591331, 610236, 852971, 908009, 3061203, 3490308,
         1059040, 1140194))
pop.m12 <- data.frame(
  m12c=c(1, 2, 3, 4, 5, 6, 7, 9, 10, 11, 12, 13, 14, 15, 16),
  Freq=c(1032707, 183169, 837901, 164115, 1002380, 136274, 237269,
         1057294, 144273, 1208839, 552141, 2355498, 4196013, 1572446,
         626788))
pop.m13 <- data.frame(
  m13=c(1, 2, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,
        19, 20, 21, 22, 23, 25, 26, 27, 28, 29, 30, 32, 33, 34, 35,
        36, 37, 38, 39, 40, 42, 44, 45, 46, 47, 48, 49, 50, 51, 52,
        53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63),
  Freq=c(246865, 38202, 159105, 61255, 62872, 105191, 69317, 39045,
         66392, 50337, 39510, 38257, 234133, 726116, 31810, 41440,
         43168, 47212, 39748, 4038, 50728, 90352, 20743, 52311,
         57355, 584496, 38543, 1045866, 170388, 183670, 363158,
         85188, 276129, 33867, 94775, 50888, 77361, 126755, 230003,
         88963, 173956, 120663, 25884, 14790, 28074, 76630, 1153368,
         60013, 39119, 86528, 146917, 52673, 50150, 71815, 736424,
         33645, 19395, 6551511))
pop.m14 <- data.frame(
  m14c=c(1, 3, 7, 9, 11, 13, 15, 17, 19, 21, 23, 25, 27, 29, 31, 33,
         35, 37, 39, 41, 43, 45, 49, 51, 53, 55, 57, 59, 63, 65, 67,
         69, 71, 73, 75, 77, 79, 83, 87, 89, 91, 93, 95, 97, 99, 101,
         103, 105, 107, 109, 111, 113, 115, 117, 119, 120, 121, 123,
         125, 126),
  Freq=c(246865, 38202, 159105, 61255, 62872, 105191, 69317, 39045,
         66392, 50337, 39510, 38257, 234133, 726116, 31810, 41440,
         43168, 47212, 39748, 4038, 50728, 90352, 20743, 52311,
         57355, 584496, 38543, 1045866, 170388, 183670, 363158,
         85188, 276129, 33867, 94775, 50888, 77361, 126755, 230003,
         88963, 173956, 120663, 25884, 14790, 28074, 76630, 1153368,
         60013, 39119, 86528, 146917, 52673, 50150, 71815, 442624,
         293800, 33645, 19395, 2351378, 4200133))
pop.m15 <- data.frame(
  m15c=c(1, 3, 5, 8, 22, 26, 29, 36, 43, 50, 57, 64, 71, 78, 85, 92,
         99, 102, 104, 106, 113, 120, 127, 134, 141, 148, 155, 169,
         176, 183, 190, 192, 194, 197, 204, 218, 225, 229, 232, 236,
         239, 246, 250, 253, 260, 267, 274, 288, 292, 302, 309, 316,
         319, 321, 323, 327, 330, 337, 344, 351, 356, 358, 362, 365,
         372, 379, 386, 393, 400, 407, 414, 418, 421, 428, 435, 437,
         440),
  Freq=c(83110, 78832, 84923, 38202, 98781, 60324, 61255, 62872,
         105191, 69317, 39045, 66392, 50337, 39510, 38257, 234133,
         318650, 259522, 147944, 31810, 41440, 43168, 47212, 39748,
         4038, 50728, 90352, 20743, 52311, 57355, 181148, 197737,
         205611, 38543, 1045866, 170388, 113287, 70383, 234455,
         128703, 85188, 187670, 88459, 33867, 94775, 50888, 77361,
         82095, 44660, 230003, 88963, 74361, 66803, 32792, 76814,
         43849, 25884, 14790, 28074, 60060, 16570, 749637, 403731,
         60013, 39119, 86528, 146917, 52673, 50150, 71815, 469711,
         266713, 33645, 19395, 2300506, 2269687, 1981318))
pop.m16 <- data.frame(
  m16c=c(1, 2, 3, 7, 8, 9, 11, 13, 15, 17, 19, 21, 23, 25, 27, 29,
         30, 31, 33, 35, 37, 39, 41, 43, 45, 49, 51, 53, 55, 56, 57,
         59, 63, 65, 66, 67, 68, 69, 71, 73, 75, 77, 79, 83, 87, 89,
         91, 92, 93, 95, 97, 99, 101, 102, 103, 105, 107, 109, 111,
         113, 115, 117, 119, 120, 121, 123, 125, 126),
  Freq=c(117698, 129167, 38202, 77086, 82019, 61255, 62872, 105191,
         69317, 39045, 66392, 50337, 39510, 38257, 234133, 345807,
         380309, 31810, 41440, 43168, 47212, 39748, 4038, 50728,
         90352, 20743, 52311, 57355, 277767, 306729, 38543, 1045866,
         170388, 90719, 92951, 172428, 190730, 85188, 276129, 33867,
         94775, 50888, 77361, 126755, 230003, 88963, 84847, 89109,
         120663, 25884, 14790, 28074, 37793, 38837, 1153368, 60013,
         39119, 86528, 146917, 52673, 50150, 71815, 348252, 388172,
         33645, 19395, 3061203, 3490308))

##########
# Create test data
##########

data473t <- structure(list(UNIQUEID = c(1012014089180, 1022013238298,
1042013241039, 
1052013004507, 1072013249467, 1082014008028, 1102013092794,
1122013259076, 
1132013100359, 1152013102251, 1162013104498, 1182013273804,
1192013114724, 
1212014031349, 1232013123973, 1242014037607, 1262013294983,
1272013033924, 
1292013037388, 1312013148206, 1322013154681, 1342013161674,
1352013315374, 
1372013177797, 1382013322571, 1402014055466, 1412013328023,
1432014101258, 
1442013334151, 1462013338479, 1482014069742, 1492013206558,
1512013212611, 
1522014076485, 1542013358421, 1562014082968, 1572013366565,
2012013001961, 
2012014000821, 2022013048057, 2022013086770, 2032014011659,
2032013103103, 
2042013120142, 2052014014716, 2052013025234, 2052014005041,
2062013097623, 
2062013080902, 2082013084666), wt2ctr = c(325.795101348449,
70.583847491458, 
53.5737152891645, 87.3420548804146, 97.7774085298657, 55.7519795014608, 
54.9473333894856, 129.432485616598, 83.6325849328425, 236.156871839518, 
93.8174699019665, 155.458343257822, 1120.17376408564, 101.74176747363, 
160.940587929738, 121.569937640962, 134.943277024256, 596.666876414474, 
741.828100861109, 130.455392502077, 96.6389182239747, 26.4247473045969, 
105.630503418385, 43.9170425271054, 23.0636168826181, 95.6396766959478, 
49.0569303152236, 414.236075685919, 112.887129394625, 154.760416704869, 
569.501845222299, 46.3700705303052, 88.3535743322299, 279.097109402007, 
232.787696027288, 180.928665939598, 103.020256291952, 106.979086343284, 
1063.72009129969, 700.758625136715, 898.276244958075, 695.86666592582, 
871.431921393644, 387.322293202373, 701.031310697548, 420.535216267998, 
649.03695813162, 1393.79948753652, 1282.55016779916, 4924.88352884971
), m02 = c(1L, 1L, 1L, 1L, 1L, 5L, 1L, 1L, 1L, 1L, 1L, 1L, 3L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 6L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
2L, 1L, 1L, 2L, 4L), m03 = c(4L, 3L, 3L, 1L, 2L, 3L, 3L, 4L, 
3L, 2L, 2L, 4L, 4L, 2L, 4L, 4L, 2L, 4L, 1L, 2L, 3L, 2L, 2L, 4L, 
4L, 2L, 3L, 4L, 3L, 4L, 3L, 2L, 3L, 3L, 3L, 4L, 4L, 4L, 3L, 4L, 
3L, 2L, 3L, 4L, 2L, 3L, 2L, 2L, 4L, 4L), m04 = c(1L, 3L, 3L, 
3L, 2L, 1L, 3L, 1L, 1L, 1L, 3L, 1L, 3L, 1L, 1L, 1L, 1L, 1L, 3L, 
2L, 1L, 3L, 1L, 2L, 3L, 1L, 3L, 1L, 3L, 1L, 1L, 3L, 1L, 1L, 3L, 
3L, 1L, 1L, 3L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 3L, 1L, 3L, 1L), 
    m05 = c(2L, 2L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
    1L, 1L, 1L, 2L, 1L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 
    2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 2L, 
    1L, 2L, 2L, 1L, 2L, 1L, 1L), m08 = c(1L, 1L, 1L, 1L, 1L, 
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
    1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L
    ), m09 = c(1L, 3L, 5L, 5L, 3L, 6L, 5L, 3L, 5L, 5L, 5L, 5L, 
    7L, 6L, 6L, 6L, 6L, 6L, 8L, 3L, 4L, 4L, 3L, 2L, 2L, 3L, 3L, 
    3L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 3L, 
    3L, 4L, 5L, 5L, 5L, 6L, 6L, 8L), m01 = c(11L, 12L, 5L, 14L, 
    9L, 12L, 12L, 5L, 14L, 6L, 14L, 6L, 13L, 11L, 4L, 13L, 8L, 
    11L, 14L, 7L, 14L, 5L, 14L, 4L, 12L, 6L, 14L, 10L, 10L, 12L, 
    5L, 13L, 6L, 4L, 12L, 4L, 12L, 10L, 10L, 2L, 11L, 3L, 10L, 
    4L, 2L, 1L, 11L, 1L, 11L, 12L), m11 = c(2L, 6L, 9L, 10L, 
    6L, 12L, 10L, 5L, 10L, 9L, 10L, 9L, 14L, 12L, 11L, 12L, 12L, 
    12L, 16L, 5L, 8L, 7L, 6L, 3L, 4L, 5L, 6L, 6L, 4L, 4L, 3L, 
    4L, 1L, 1L, 2L, 1L, 2L, 2L, 2L, 3L, 4L, 5L, 6L, 7L, 9L, 9L, 
    10L, 11L, 12L, 16L), m13 = c(15L, 45L, 17L, 10L, 22L, 14L, 
    18L, 33L, 57L, 58L, 1L, 42L, 63L, 53L, 14L, 40L, 44L, 36L, 
    30L, 34L, 9L, 54L, 55L, 51L, 51L, 12L, 6L, 38L, 50L, 35L, 
    28L, 26L, 19L, 37L, 15L, 7L, 2L, 2L, 7L, 59L, 28L, 38L, 33L, 
    4L, 1L, 10L, 42L, 14L, 60L, 30L), m06c = c(7L, 7L, 1L, 7L, 
    7L, 10L, 7L, 1L, 7L, 1L, 7L, 1L, 9L, 7L, 1L, 7L, 7L, 7L, 
    7L, 1L, 7L, 1L, 7L, 4L, 7L, 1L, 7L, 7L, 7L, 7L, 1L, 7L, 1L, 
    1L, 7L, 1L, 7L, 7L, 7L, 1L, 7L, 1L, 7L, 1L, 1L, 2L, 7L, 1L, 
    8L, 10L), m07c = c(7L, 13L, 13L, 13L, 1L, 16L, 13L, 13L, 
    13L, 13L, 13L, 13L, 15L, 7L, 7L, 13L, 1L, 7L, 13L, 13L, 13L, 
    13L, 13L, 10L, 13L, 13L, 13L, 7L, 7L, 13L, 13L, 13L, 13L, 
    7L, 13L, 7L, 13L, 7L, 7L, 1L, 7L, 7L, 7L, 7L, 1L, 2L, 7L, 
    1L, 8L, 16L), m10c = c(4L, 19L, 33L, 35L, 16L, 40L, 33L, 
    19L, 35L, 34L, 35L, 34L, 47L, 39L, 39L, 41L, 36L, 39L, 55L, 
    21L, 28L, 26L, 21L, 11L, 12L, 20L, 21L, 17L, 10L, 12L, 12L, 
    13L, 6L, 4L, 5L, 4L, 5L, 3L, 3L, 8L, 11L, 17L, 17L, 25L, 
    30L, 29L, 32L, 36L, 39L, 53L), m12c = c(1L, 5L, 9L, 9L, 5L, 
    12L, 9L, 5L, 9L, 9L, 9L, 9L, 14L, 11L, 11L, 11L, 11L, 11L, 
    15L, 5L, 7L, 7L, 5L, 4L, 3L, 5L, 5L, 5L, 3L, 3L, 3L, 3L, 
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 3L, 3L, 5L, 5L, 7L, 9L, 10L, 
    9L, 11L, 12L, 16L), m14c = c(29L, 89L, 33L, 19L, 43L, 27L, 
    35L, 65L, 113L, 115L, 1L, 83L, 126L, 105L, 27L, 79L, 87L, 
    71L, 59L, 67L, 17L, 107L, 109L, 101L, 101L, 23L, 11L, 75L, 
    99L, 69L, 55L, 51L, 37L, 73L, 29L, 13L, 3L, 3L, 13L, 117L, 
    55L, 75L, 65L, 7L, 1L, 19L, 83L, 27L, 120L, 59L), m15c = c(99L, 
    309L, 113L, 64L, 148L, 92L, 120L, 225L, 393L, 400L, 5L, 288L, 
    439L, 365L, 92L, 274L, 302L, 246L, 204L, 232L, 57L, 372L, 
    379L, 351L, 351L, 78L, 36L, 260L, 344L, 239L, 190L, 176L, 
    127L, 253L, 99L, 43L, 8L, 8L, 43L, 407L, 190L, 260L, 225L, 
    22L, 1L, 64L, 288L, 92L, 414L, 204L), m16c = c(30L, 89L, 
    33L, 19L, 43L, 27L, 35L, 65L, 113L, 115L, 2L, 83L, 126L, 
    105L, 27L, 79L, 87L, 71L, 59L, 67L, 17L, 107L, 109L, 101L, 
    102L, 23L, 11L, 75L, 99L, 69L, 55L, 51L, 37L, 73L, 30L, 13L, 
    3L, 3L, 13L, 117L, 56L, 75L, 66L, 7L, 1L, 19L, 83L, 27L, 
    120L, 59L), ststr = c(361011L, 361021L, 361041L, 361051L, 
    361071L, 361081L, 361101L, 361121L, 361131L, 361151L, 361161L, 
    361181L, 361191L, 361211L, 361231L, 361241L, 361261L, 361272L, 
    361291L, 361311L, 361321L, 361341L, 361351L, 361371L, 361381L, 
    361401L, 361411L, 361431L, 361442L, 361461L, 361481L, 361491L, 
    361511L, 361522L, 361541L, 361561L, 361571L, 362012L, 362019L, 
    362029L, 362029L, 362039L, 362039L, 362049L, 362059L, 362059L, 
    362059L, 362069L, 362069L, 362089L)), .Names = c("UNIQUEID", 
"wt2ctr", "m02", "m03", "m04", "m05", "m08", "m09", "m01", "m11", 
"m13", "m06c", "m07c", "m10c", "m12c", "m14c", "m15c", "m16c", 
"ststr"), row.names = c(1L, 647L, 1294L, 1941L, 2587L, 3234L, 
3881L, 4528L, 5174L, 5821L, 6468L, 7114L, 7761L, 8408L, 9055L, 
9701L, 10348L, 10995L, 11641L, 12288L, 12935L, 13581L, 14228L, 
14875L, 15522L, 16168L, 16815L, 17462L, 18109L, 18755L, 19402L, 
20049L, 20695L, 21342L, 21989L, 22636L, 23282L, 23929L, 24576L, 
25222L, 25869L, 26516L, 27162L, 27809L, 28456L, 29103L, 29749L, 
30396L, 31043L, 31690L), class = "data.frame")

##########
# Check first few cases of test data
##########

head(testd473t)

##########
# Create survey object
##########

sdes473t <- svydesign(id=~UNIQUEID, strata=~ststr, weights=~wt2ctr,
  data=data473t)

##########
# Create new survey object with raked weights
##########

d473.raked <- rake(sdes473t,
  sample=list(~m01, ~m02, ~m03, ~m04, ~m05, ~m06c, ~m07c, ~m08, ~m09,
              ~m10c, ~m11, ~m12c, ~m13, ~m14c, ~m15c, ~m16c),
  population=list(pop.m01, pop.m02, pop.m03, pop.m04, pop.m05,
                  pop.m06, pop.m07, pop.m08, pop.m09, pop.m10,
                  pop.m11, pop.m12, pop.m13, pop.m14, pop.m15,
                  pop.m16))


-----Original Message-----
From: Michael Willmorth 
Sent: Saturday, June 07, 2014 9:23 AM
To: r-help at R-project.org
Subject: rake() error message

I'm teaching myself how to use rake() in the R "survey" package, using
Thomas Lumley's "Complex Surveys" book. Working with one of my data
sets, I received an error that has me stumped.

Here is the code I used:

d473.raked <- rake(sdes473,
  sample=list(~m01, ~m02, ~m03, ~m04, ~m05, ~m06c, ~m07c, ~m08, ~m09,
              ~m10c, ~m11, ~m12c, ~m13, ~m14c, ~m15c, ~m16c),
  population=list(pop.m01, pop.m02, pop.m03, pop.m04, pop.m05,
                  pop.m06, pop.m07, pop.m08, pop.m09, pop.m10,
                  pop.m11, pop.m12, pop.m13, pop.m14, pop.m15,
                  pop.m16))

Here is the error I received:

Error in array(dim = extent, dimnames = namelist) : vector is too large
In addition: Warning messages:
1: In ngroup * (as.integer(index) - one) :
  NAs produced by integer overflow
2: In group + ngroup * (as.integer(index) - one) :
  NAs produced by integer overflow
3: In ngroup * nlevels(index) : NAs produced by integer overflow

Any guidance on this would be much appreciated.

Thanks,

Michael Willmorth


From a0906257 at unet.univie.ac.at  Sun Jun  8 10:51:39 2014
From: a0906257 at unet.univie.ac.at (zagreus)
Date: Sun, 8 Jun 2014 01:51:39 -0700 (PDT)
Subject: [R] Interval for rnorm command?
In-Reply-To: <5393D968.3030702@auckland.ac.nz>
References: <1402151028393-4691856.post@n4.nabble.com>
	<5393D968.3030702@auckland.ac.nz>
Message-ID: <1402217499750-4691873.post@n4.nabble.com>

Thanks so much! 
The 'truncnorm' package did the trick for me! Such variables are uncommon in
my field (psychology), so this is the first time I stumbled across this kind
of distribution. 



--
View this message in context: http://r.789695.n4.nabble.com/Interval-for-rnorm-command-tp4691856p4691873.html
Sent from the R help mailing list archive at Nabble.com.


From smartpink111 at yahoo.com  Sun Jun  8 08:34:27 2014
From: smartpink111 at yahoo.com (arun)
Date: Sat, 7 Jun 2014 23:34:27 -0700 (PDT)
Subject: [R] Interval for rnorm command?
In-Reply-To: <1402151028393-4691856.post@n4.nabble.com>
References: <1402151028393-4691856.post@n4.nabble.com> 
Message-ID: <1402209267.70256.YahooMailNeo@web142605.mail.bf1.yahoo.com>

Hi,

You may try:
fun1 <- function(len, low, high, mean, sd) {
??? x <- rnorm(len * 2, mean, sd)
??? x <- x[x < high & x > low]
??? x[1:len]
}

##slow
fun2 <- function(len, low, high, mean, sd) {
??? i <- 1
??? while (i < len) {
??????? x <- rnorm(1, mean, sd)
??????? if (x < high & x > low) {
??????????? i <- i + 1
??????? }
??? }
??? x
}


set.seed(42)
?res1 <- fun1(100,-3.7, 3.7, 1,2)
?set.seed(42)
?res2 <- fun1(100,-3.7, 3.7, 1,2)


identical(res1,res2)
#[1] TRUE
range(res1)
#[1] -2.562617? 3.640227
A.K.












On Saturday, June 7, 2014 10:28 PM, zagreus <a0906257 at unet.univie.ac.at> wrote:
Hello everyone!

I want to create a data vector using the "rnorm" command. Let's say /x <-
rnorm(100, 1, 2)/. This gives me 100 values from the specific normal
distribution. However, I want to generate a variable that has a certain
range of values, e.g. values can't exceed the interval /[-3.7; 3.7]/. How
can I implement such an interval? 

Thanks for your help and sorry if this is totally trivial, I am new to R. 



--
View this message in context: http://r.789695.n4.nabble.com/Interval-for-rnorm-command-tp4691856.html
Sent from the R help mailing list archive at Nabble.com.

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.



From smartpink111 at yahoo.com  Sun Jun  8 09:11:39 2014
From: smartpink111 at yahoo.com (arun)
Date: Sun, 8 Jun 2014 00:11:39 -0700 (PDT)
Subject: [R] algo trading mcx india
In-Reply-To: <5664974.265811.1402165006150.JavaMail.nabble@joe.nabble.com>
References: <5664974.265811.1402165006150.JavaMail.nabble@joe.nabble.com>
Message-ID: <1402211499.43990.YahooMailNeo@web142601.mail.bf1.yahoo.com>

Hi VP,
Not sure what you wanted.? 
Perhaps:
library(XML)
URL <-
"http://money.securebank.in/index.php?option=com_dashboard&view=history&Itemid=56&startdate=01/01/2013&enddate=6/9/2014&exchange=MCX&sid=1"
?doc <- htmlParse(URL)
?tableNodes <- getNodeSet(doc, "//table")
?dat1 <- readHTMLTable(tableNodes[[4]], colClasses=c("numeric","character", "character", "numeric", "character", "numeric", "numeric", "character", "numeric"),stringsAsFactors=FALSE)
?dat1$DATE <- as.Date(dat1$DATE, "%d-%m-%Y")
str(dat1)
#'data.frame':??? 6910 obs. of? 9 variables:
# $ TRADE NO.??????? : num? 59084 59085 59063 59059 59054 ...
# $ DATE???????????? : Date, format: "2014-06-05" "2014-06-05" ...
# $ SCRIP??????????? : chr? "Nickel" "Natural Gas" "Natural Gas" "Aluminium" ...
# $ LOT SIZE???????? : num? 250 1250 1250 5000 5000 250 100 1000 250 1250 ...
# $ TRADE??????????? : chr? "SHORT" "LONG" "SHORT" "SHORT" ...
# $ TRADE EXECUTED AT: num? 1126 278 276 109 124 ...
# $ TRADE CLOSED AT? : num? 1124 278 275 109 124 ...
# $ PROFIT TAKEN AT? : chr? "1123.8-EOD" "278.50-EOD" "274.10-T2" "108.55-T1" ...
# $ PROFIT PER LOT?? : num? 1500 1500 3000 2250 -750 ...

?A.K.




On Saturday, June 7, 2014 2:17 PM, "veepsirtt at gmail.com" <veepsirtt at gmail.com> wrote:


Hi AK
http://money.securebank.in/index.php?option=com_dashboard&view=history&Itemid=56&startdate=01/01/2013&enddate=6/9/2014&exchange=MCX&sid=1
How you could help me?

thanks
vp

_____________________________________
Sent from http://r.789695.n4.nabble.com


From acos at dpi.inpe.br  Sun Jun  8 22:30:09 2014
From: acos at dpi.inpe.br (Alexsandro =?iso-8859-1?b?Q+JuZGlkbw==?= de Oliveira Silva)
Date: Sun, 08 Jun 2014 17:30:09 -0300
Subject: [R] Split a string vector with '[ ]'
Message-ID: <20140608173009.ptq46w3nyo844c0w@agenda.dpi.inpe.br>

Hi,

I have a string something like that:

nw.str <- "[D][A|D][T|A:D][C|T]"

And I need to split it in this way:

"[D]" "[A|D]" "[T|A:D]" "[C|T]"

Thanks!!

Regards.
Alexsandro C?ndido


From jholtman at gmail.com  Sun Jun  8 22:41:32 2014
From: jholtman at gmail.com (jim holtman)
Date: Sun, 8 Jun 2014 16:41:32 -0400
Subject: [R] Split a string vector with '[ ]'
In-Reply-To: <20140608173009.ptq46w3nyo844c0w@agenda.dpi.inpe.br>
References: <20140608173009.ptq46w3nyo844c0w@agenda.dpi.inpe.br>
Message-ID: <CAAxdm-6sY_LddixeEJPaSX6NenEeoJq8pVT+8a2d-Unn4vYMDg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140608/36be667a/attachment.pl>

From murdoch.duncan at gmail.com  Sun Jun  8 22:46:43 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sun, 08 Jun 2014 16:46:43 -0400
Subject: [R] Split a string vector with '[ ]'
In-Reply-To: <20140608173009.ptq46w3nyo844c0w@agenda.dpi.inpe.br>
References: <20140608173009.ptq46w3nyo844c0w@agenda.dpi.inpe.br>
Message-ID: <5394CBB3.9080702@gmail.com>

On 08/06/2014, 4:30 PM, Alexsandro C?ndido de Oliveira Silva wrote:
> Hi,
> 
> I have a string something like that:
> 
> nw.str <- "[D][A|D][T|A:D][C|T]"
> 
> And I need to split it in this way:
> 
> "[D]" "[A|D]" "[T|A:D]" "[C|T]"

You could probably use lookahead and lookbehind Perl regular
expressions, but this might be easier:

readLines(textConnection(gsub("\\]\\[", "]\n[", nw.str)))

This just inserts a newline between each pair of brackets, and then
reads the resulting string.

Duncan Murdoch


From dwinsemius at comcast.net  Sun Jun  8 22:56:40 2014
From: dwinsemius at comcast.net (David Winsemius)
Date: Sun, 8 Jun 2014 13:56:40 -0700
Subject: [R] Split a string vector with '[ ]'
In-Reply-To: <5394CBB3.9080702@gmail.com>
References: <20140608173009.ptq46w3nyo844c0w@agenda.dpi.inpe.br>
	<5394CBB3.9080702@gmail.com>
Message-ID: <C1CBC3FF-B4AF-4AF6-A041-ABE9C3AA57DC@comcast.net>


On Jun 8, 2014, at 1:46 PM, Duncan Murdoch wrote:

> On 08/06/2014, 4:30 PM, Alexsandro C?ndido de Oliveira Silva wrote:
>> Hi,
>> 
>> I have a string something like that:
>> 
>> nw.str <- "[D][A|D][T|A:D][C|T]"
>> 
>> And I need to split it in this way:
>> 
>> "[D]" "[A|D]" "[T|A:D]" "[C|T]"
> 
> You could probably use lookahead and lookbehind Perl regular
> expressions, but this might be easier:
> 
> readLines(textConnection(gsub("\\]\\[", "]\n[", nw.str)))
> 
> This just inserts a newline between each pair of brackets, and then
> reads the resulting string.

Same idea with scan() using space as separator:

scan(what="", text=gsub("\\]\\[", "\\] \\[", nw.str))

-- 
David Winsemius
Alameda, CA, USA


From tonygarcia_asturias at hotmail.com  Mon Jun  9 01:56:28 2014
From: tonygarcia_asturias at hotmail.com (Tony Garcia)
Date: Mon, 9 Jun 2014 01:56:28 +0200
Subject: [R] ltm package: how to calculate ability
Message-ID: <DUB124-W23F2E9AE48EA3CD872BBC2992E0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140609/2c36eb47/attachment.pl>

From mdsumner at gmail.com  Mon Jun  9 02:33:32 2014
From: mdsumner at gmail.com (Michael Sumner)
Date: Mon, 9 Jun 2014 10:33:32 +1000
Subject: [R] Error in x@coords[i, ,
	drop = FALSE] : subscript out of bounds
In-Reply-To: <2014060900172817090719@gmail.com>
References: <2014060900172817090719@gmail.com>
Message-ID: <CAAcGz98oX1DeUq2uR+YFA7N_a8k+jROu1fD0rAweO1yfvDt-CA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140609/f4e3a988/attachment.pl>

From acos at dpi.inpe.br  Mon Jun  9 03:27:17 2014
From: acos at dpi.inpe.br (Alexsandro =?iso-8859-1?b?Q+JuZGlkbw==?= de Oliveira Silva)
Date: Sun, 08 Jun 2014 22:27:17 -0300
Subject: [R] NA/NaN values in bnlearn package R
Message-ID: <20140608222717.wydg4ysjvo8gwgok@agenda.dpi.inpe.br>

Hello,

I am using the bnlearn package in R to handle large amounts of data in  
Bayesian networks. The variables are discrete and have more than 3  
million observations.
With bn.fit function I could easily get the conditional probability  
distribution. However, some variables have unobserved values ??(i.e.,  
NA or NaN). In some variables, unobserved values ??are almost 1  
million. This is a lot to just delete them.

In tests, I've got this:

> nw.fit <-bn.fit (nw, date, method = 'bayes')
Error in check.data (date): the data set contains null / NaN / NA values??.

So, how could I deal with the data and get the conditional probability  
distribution?
Could someone help me?


Regards.
Alexsandro C?ndido de Oliveira Silva


From smartpink111 at yahoo.com  Mon Jun  9 04:25:29 2014
From: smartpink111 at yahoo.com (arun)
Date: Sun, 8 Jun 2014 19:25:29 -0700 (PDT)
Subject: [R] Split a string vector with '[ ]'
In-Reply-To: <20140608173009.ptq46w3nyo844c0w@agenda.dpi.inpe.br>
References: <20140608173009.ptq46w3nyo844c0w@agenda.dpi.inpe.br>
Message-ID: <1402280729.96815.YahooMailNeo@web142601.mail.bf1.yahoo.com>

Hi,

If you have library(qdap) installed:
library(qdap)
as.vector(bracketXtract(nw.str,"square",with=T))
#[1] "[D]"???? "[A|D]"?? "[T|A:D]" "[C|T]"? 


A.K.


On Sunday, June 8, 2014 4:31 PM, Alexsandro C?ndido de Oliveira Silva <acos at dpi.inpe.br> wrote:
Hi,

I have a string something like that:

nw.str <- "[D][A|D][T|A:D][C|T]"

And I need to split it in this way:

"[D]" "[A|D]" "[T|A:D]" "[C|T]"

Thanks!!

Regards.
Alexsandro C?ndido

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From 538280 at gmail.com  Mon Jun  9 04:33:45 2014
From: 538280 at gmail.com (Greg Snow)
Date: Sun, 8 Jun 2014 20:33:45 -0600
Subject: [R] Standard Deviation in R
In-Reply-To: <1402211865.16504.YahooMailNeo@web142601.mail.bf1.yahoo.com>
References: <1402211865.16504.YahooMailNeo@web142601.mail.bf1.yahoo.com>
Message-ID: <CAFEqCdzmHKG9_YcgYjVqzbBv03hRrayvaAM15s59NxpOSKEr1w@mail.gmail.com>

Which formula for standard deviation are you using?

If you know the population mean then you should divide by n (3 in this
case), but if you don't know the population mean and use the mean
calculated from the sample then it is more usual to use n-1 as the
denominator (this makes the variance an unbiased estimator of the
population variance).  That is what the R sd function does since it is
much more common to use it on a sample rather than an entire
population.

On Sun, Jun 8, 2014 at 1:17 AM, arun <smartpink111 at yahoo.com> wrote:
> Hi,
> Please check this link:
> http://stats.stackexchange.com/questions/25956/what-formula-is-used-for-standard-deviation-in-r
>
> A.K.
>
>
> It is my understanding that the R function SD finds the standard deviation of a random variable or a list. Please consider the following list: { 1, 2, 3 }. I claim that the standard deviation of this list is not 1. However, the following R statement returns 1:
>          sd ( seq(1:3) )
> What am I missing?
>
> I thank the group in advance for their responses.
>
> Bob
>
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com


From craemuletz at gmail.com  Mon Jun  9 05:29:02 2014
From: craemuletz at gmail.com (Carly Muletz)
Date: Sun, 8 Jun 2014 23:29:02 -0400
Subject: [R] Map insets and par(usr) values
Message-ID: <CA+jYcmtGoqw5gyzA58xE2BT2N5ctsHZN=S3xY2JN_VnXjJDA7g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140608/3e9ac3a4/attachment.pl>

From ajdamico at gmail.com  Mon Jun  9 06:41:03 2014
From: ajdamico at gmail.com (Anthony Damico)
Date: Mon, 9 Jun 2014 00:41:03 -0400
Subject: [R] rake() error message
In-Reply-To: <8A87EADD0D346340A30257AADF83D364136E7B46@cwr103.clearwater.lcl>
References: <8A87EADD0D346340A30257AADF83D364089B26@cwr103.clearwater.lcl>
	<8A87EADD0D346340A30257AADF83D364136E7B46@cwr103.clearwater.lcl>
Message-ID: <CAOwvMDx6LR1cAAGwXtVtzjLkpps+=S-1dA=627syULDuMUcf6w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140609/32adcd56/attachment.pl>

From dwinsemius at comcast.net  Mon Jun  9 07:13:40 2014
From: dwinsemius at comcast.net (David Winsemius)
Date: Sun, 8 Jun 2014 22:13:40 -0700
Subject: [R] NA/NaN values in bnlearn package R
In-Reply-To: <20140608222717.wydg4ysjvo8gwgok@agenda.dpi.inpe.br>
References: <20140608222717.wydg4ysjvo8gwgok@agenda.dpi.inpe.br>
Message-ID: <596FF58A-9D89-4D8F-A948-6B205B151185@comcast.net>


On Jun 8, 2014, at 6:27 PM, Alexsandro C?ndido de Oliveira Silva wrote:

> Hello,
> 
> I am using the bnlearn package in R to handle large amounts of data in Bayesian networks. The variables are discrete and have more than 3 million observations.
> With bn.fit function I could easily get the conditional probability distribution. However, some variables have unobserved values ??(i.e., NA or NaN). In some variables, unobserved values ??are almost 1 million. This is a lot to just delete them.
> 
> In tests, I've got this:
> 
>> nw.fit <-bn.fit (nw, date, method = 'bayes')
> Error in check.data (date): the data set contains null / NaN / NA values??.
> 
> So, how could I deal with the data and get the conditional probability distribution?
> Could someone help me?


You are requested not to crosspost at multiple R mailing lists (and by extension of the reasoning behind that request, crossposting on Rhelp and StackOverflow is also considered discourteous.)

Both Rhelp and SO expect yopu to provide enough information to comment intelligently, but you have not lived up to that expectation.

-- 
David Winsemius
Alameda, CA, USA


From jdnewmil at dcn.davis.CA.us  Mon Jun  9 08:31:15 2014
From: jdnewmil at dcn.davis.CA.us (Jeff Newmiller)
Date: Mon, 09 Jun 2014 00:31:15 -0600
Subject: [R] Map insets and par(usr) values
In-Reply-To: <CA+jYcmtGoqw5gyzA58xE2BT2N5ctsHZN=S3xY2JN_VnXjJDA7g@mail.gmail.com>
References: <CA+jYcmtGoqw5gyzA58xE2BT2N5ctsHZN=S3xY2JN_VnXjJDA7g@mail.gmail.com>
Message-ID: <6ea9a88e-9510-4aa3-8aa1-1eaaab9c87b1@email.android.com>

Please don't post HTML email.. we don't necessarily see what you see when you do that. Read the Posting Guide for more list etiquette.

Have you played with the "usr" coordinates? Have you read the help for the par function? 
The par(usr=...) call is telling base graphics what the x and y coordinates of the corners of the graphics window should be. If you subtract the same number from x1 and x2 you will shift the inset to the right because the coordinates of the left edge of the window will be further to the left of the map and the right edge of the window will be closer to the map on the right.

---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                      Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
--------------------------------------------------------------------------- 
Sent from my phone. Please excuse my brevity.

On June 8, 2014 9:29:02 PM MDT, Carly Muletz <craemuletz at gmail.com> wrote:
>This is in reference to the post here by Ray Brownrigg:
>http://r.789695.n4.nabble.com/inset-one-map-on-top-of-another-map-td3848752.html
>
>using this code with the maps package:
>
>map("state", region= "ohio", xlim=c(-85, -80), ylim=c(38, 42))
>par(usr=c(-216, -66, 24, 144))   # you should be able to 'automate'
>this
>calculation
>map("state", add=T)
>map("state", region="ohio", fill=T, add=T)
>
>*MY issue*: I can't figure out how to determine which values to specify
>for
>par(usr=c(______))
>
>I can get the values of the plot area using
>
>par("usr")
>
>But I don't know how to resize the second map or move it to another
>location. When I adjust the values specified it just seems to stretch
>the second map out.
>
>Here is a basic idea of what I am trying to do
>
>library(maps)
>map('state', xlim = c(-86.5,-74), ylim= c(32,41.25), col = "white",
>fill =
>T)
>
>par(usr=c(-216, -66, 24, 144))
>par(xpd=T)
>
>map("state",  xlim = c(-105,-70), ylim= c(25,48), add = T)
>
>---but I would like the US map to be larger and moved to the right
>
>Thanks!
>
>Carly
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From p_connolly at slingshot.co.nz  Mon Jun  9 08:54:25 2014
From: p_connolly at slingshot.co.nz (Patrick Connolly)
Date: Mon, 9 Jun 2014 18:54:25 +1200
Subject: [R] Trellis devices and pointize
Message-ID: <20140609065424.GD4710@slingshot.co.nz>

How is the pointsize set in trellis.devices?

>From my reading of the trellis.device help file, I understood that the
pointsize arg would be referenced to the call to the pdf function.

So I set up a trellis pdf device as so:

  trellis.device(device = pdf, file = "Singers.pdf", height = 160/25.4,
                 width = 160/25.4, pointsize = 28)

A base R graphics plot works as I'd expected.

  plot(1:10, 50:59) # silly plot with huge plotting characters and letters

However, pointsize is ignored in trellis plots;

  pik <- bwplot(voice.part ~ height, data = singer)# pointsize ignored
  print(pik)
  dev.off()

There are many trellis cex-type settings, but FWIU they're all
relative to the default size.  My question is: How do I set that
default?


R version 3.0.2 (2013-09-25)
Platform: i686-pc-linux-gnu (32-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
 [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] grDevices utils     stats     graphics  methods   base     

other attached packages:
[1] RColorBrewer_1.0-5 lattice_0.20-24   

loaded via a namespace (and not attached):
[1] grid_3.0.2  plyr_1.8    tools_3.0.2

I've tried with R-3.1.0 on another machine so I don't think the
problem is with an old version.

I doubt it has much to do with pdf specifically.  Attempts to use png,
bitmap, postscript devices all produce equivalent results.



(Here's all the example code uninterrupted:)

  trellis.device(device = pdf, file = "Singers.pdf", height = 160/25.4,
                 width = 160/25.4, pointsize = 28)
  plot(1:10, 50:59) # silly plot with huge plotting characters and letters
  pik <- bwplot(voice.part ~ height, data = singer)# pointsize ignored
  print(pik)
  dev.off()


TIA


-- 
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.   
   ___    Patrick Connolly   
 {~._.~}                   Great minds discuss ideas    
 _( Y )_  	         Average minds discuss events 
(:_~*~_:)                  Small minds discuss people  
 (_)-(_)  	                      ..... Eleanor Roosevelt
	  
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.


From ripley at stats.ox.ac.uk  Mon Jun  9 09:33:35 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 09 Jun 2014 08:33:35 +0100
Subject: [R] Trellis devices and pointize
In-Reply-To: <20140609065424.GD4710@slingshot.co.nz>
References: <20140609065424.GD4710@slingshot.co.nz>
Message-ID: <5395634F.9080105@stats.ox.ac.uk>

The issue here is not trellis.device.

You are using lattice plots (without mentioning lattice), which are 
based on package 'grid' and so using the grid sub-system of a device. 
That sub-system does not use the 'pointsize' of the device as its 
initial font size.  So you need to use

grid::gpar(fontsize = 28)

If I call that after opening the device I get what I guess you expected.


On 09/06/2014 07:54, Patrick Connolly wrote:
> How is the pointsize set in trellis.devices?
>
>>From my reading of the trellis.device help file, I understood that the
> pointsize arg would be referenced to the call to the pdf function.
>
> So I set up a trellis pdf device as so:
>
>    trellis.device(device = pdf, file = "Singers.pdf", height = 160/25.4,
>                   width = 160/25.4, pointsize = 28)
>
> A base R graphics plot works as I'd expected.
>
>    plot(1:10, 50:59) # silly plot with huge plotting characters and letters
>
> However, pointsize is ignored in trellis plots;
>
>    pik <- bwplot(voice.part ~ height, data = singer)# pointsize ignored
>    print(pik)
>    dev.off()
>
> There are many trellis cex-type settings, but FWIU they're all
> relative to the default size.  My question is: How do I set that
> default?
>
>
> R version 3.0.2 (2013-09-25)
> Platform: i686-pc-linux-gnu (32-bit)
>
> locale:
>   [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>   [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>   [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>   [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
>   [9] LC_ADDRESS=C               LC_TELEPHONE=C
> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>
> attached base packages:
> [1] grDevices utils     stats     graphics  methods   base
>
> other attached packages:
> [1] RColorBrewer_1.0-5 lattice_0.20-24
>
> loaded via a namespace (and not attached):
> [1] grid_3.0.2  plyr_1.8    tools_3.0.2
>
> I've tried with R-3.1.0 on another machine so I don't think the
> problem is with an old version.
>
> I doubt it has much to do with pdf specifically.  Attempts to use png,
> bitmap, postscript devices all produce equivalent results.
>
>
>
> (Here's all the example code uninterrupted:)
>
>    trellis.device(device = pdf, file = "Singers.pdf", height = 160/25.4,
>                   width = 160/25.4, pointsize = 28)
>    plot(1:10, 50:59) # silly plot with huge plotting characters and letters
>    pik <- bwplot(voice.part ~ height, data = singer)# pointsize ignored
>    print(pik)
>    dev.off()
>
>
> TIA
>
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From pdalgd at gmail.com  Mon Jun  9 11:39:39 2014
From: pdalgd at gmail.com (peter dalgaard)
Date: Mon, 9 Jun 2014 11:39:39 +0200
Subject: [R] Interval for rnorm command?
In-Reply-To: <1402209267.70256.YahooMailNeo@web142605.mail.bf1.yahoo.com>
References: <1402151028393-4691856.post@n4.nabble.com>
	<1402209267.70256.YahooMailNeo@web142605.mail.bf1.yahoo.com>
Message-ID: <673A7B12-620E-4960-9B5C-1AF2301A3619@gmail.com>

It's usually easier to use the inversion method on a truncated uniform:

fun3 <- function(n, low, high, mean, sd) 
	qnorm(runif(n, 
	  pnorm(low, mean, sd), 
	  pnorm(high, mean, sd)), mean, sd)
res3 <- fun3(100,-3.7, 3.7, 1,2)
hist(res3)


On 08 Jun 2014, at 08:34 , arun <smartpink111 at yahoo.com> wrote:

> Hi,
> 
> You may try:
> fun1 <- function(len, low, high, mean, sd) {
>     x <- rnorm(len * 2, mean, sd)
>     x <- x[x < high & x > low]
>     x[1:len]
> }
> 
> ##slow
> fun2 <- function(len, low, high, mean, sd) {
>     i <- 1
>     while (i < len) {
>         x <- rnorm(1, mean, sd)
>         if (x < high & x > low) {
>             i <- i + 1
>         }
>     }
>     x
> }
> 
> 
> set.seed(42)
>  res1 <- fun1(100,-3.7, 3.7, 1,2)
>  set.seed(42)
>  res2 <- fun1(100,-3.7, 3.7, 1,2)
> 
> 
> identical(res1,res2)
> #[1] TRUE
> range(res1)
> #[1] -2.562617  3.640227
> A.K.
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> On Saturday, June 7, 2014 10:28 PM, zagreus <a0906257 at unet.univie.ac.at> wrote:
> Hello everyone!
> 
> I want to create a data vector using the "rnorm" command. Let's say /x <-
> rnorm(100, 1, 2)/. This gives me 100 values from the specific normal
> distribution. However, I want to generate a variable that has a certain
> range of values, e.g. values can't exceed the interval /[-3.7; 3.7]/. How
> can I implement such an interval? 
> 
> Thanks for your help and sorry if this is totally trivial, I am new to R. 
> 
> 
> 
> --
> View this message in context: http://r.789695.n4.nabble.com/Interval-for-rnorm-command-tp4691856.html
> Sent from the R help mailing list archive at Nabble.com.
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From marco.scutari at gmail.com  Mon Jun  9 12:56:38 2014
From: marco.scutari at gmail.com (Marco Scutari)
Date: Mon, 9 Jun 2014 11:56:38 +0100
Subject: [R] NA/NaN values in bnlearn package R
In-Reply-To: <20140608222717.wydg4ysjvo8gwgok@agenda.dpi.inpe.br>
References: <20140608222717.wydg4ysjvo8gwgok@agenda.dpi.inpe.br>
Message-ID: <CA+RJqXV=32pQudCDrBhs4xGwQ17tmfvQUWHW7q6Aq84K7ECx5Q@mail.gmail.com>

Dear Alexsandro,

On 9 June 2014 02:27, Alexsandro C?ndido de Oliveira Silva
<acos at dpi.inpe.br> wrote:
> So, how could I deal with the data and get the conditional probability
> distribution?

As of the current release (3.5), all functions in bnlearn require
complete data so that error message is expected. However, you can
estimate the CPTs from incomplete data using table() and prop.table()
and assemble them in a fitted BN with custom.fit(). On the other hand,
maybe it would be better to write an EM wrapper around bn.fit() to
make the best of the dependence structure of the data?

Cheers,
    Marco

-- 
Marco Scutari, Ph.D.
Research Associate, Genetics Institute (UGI)
University College London (UCL), United Kingdom


From smartpink111 at yahoo.com  Mon Jun  9 13:05:55 2014
From: smartpink111 at yahoo.com (arun)
Date: Mon, 9 Jun 2014 04:05:55 -0700 (PDT)
Subject: [R] Split a string vector with '[ ]'
In-Reply-To: <C1CBC3FF-B4AF-4AF6-A041-ABE9C3AA57DC@comcast.net>
References: <20140608173009.ptq46w3nyo844c0w@agenda.dpi.inpe.br>	<5394CBB3.9080702@gmail.com>
	<C1CBC3FF-B4AF-4AF6-A041-ABE9C3AA57DC@comcast.net>
Message-ID: <1402311955.60936.YahooMailNeo@web142602.mail.bf1.yahoo.com>

Hi Alexsandro,
Suppose if you have strings

nw.str1 <- "[D][A|D]A:F[T|A:D]N[C|T]"
nw.str2 <- "[D][A|D]A[T|A:D][C|T]NA{DG]P"

you could use:
library(qdap)

as.vector(bracketXtract(nw.str1,"square",T)) 
#[1] "[D]"???? "[A|D]"?? "[T|A:D]" "[C|T]"? 
?as.vector(bracketXtract(nw.str2,"square",T)) 
#[1] "[D]"???? "[A|D]"?? "[T|A:D]" "[C|T]"? 


#or
regmatches(nw.str1, gregexpr("(\\[).*?(\\])", nw.str1))[[1]]
#[1] "[D]"???? "[A|D]"?? "[T|A:D]" "[C|T]"? 
regmatches(nw.str2, gregexpr("(\\[).*?(\\])", nw.str2))[[1]]
#[1] "[D]"???? "[A|D]"?? "[T|A:D]" "[C|T]"? 

#or modifying David's and Duncan's codes for the first case:
scan(what="",text=gsub("\\].*?\\[","] [", nw.str1))
#Read 4 items
#[1] "[D]"???? "[A|D]"?? "[T|A:D]" "[C|T]"? 

readLines(textConnection(gsub("\\].*?\\[", "]\n[", nw.str1))) 
#[1] "[D]"???? "[A|D]"?? "[T|A:D]" "[C|T]"? 

##I couldn't get it right with ?gsub() for the second case.

A.K.



On Sunday, June 8, 2014 4:57 PM, David Winsemius <dwinsemius at comcast.net> wrote:

On Jun 8, 2014, at 1:46 PM, Duncan Murdoch wrote:

> On 08/06/2014, 4:30 PM, Alexsandro C?ndido de Oliveira Silva wrote:
>> Hi,
>> 
>> I have a string something like that:
>> 
>> nw.str <- "[D][A|D][T|A:D][C|T]"
>> 
>> And I need to split it in this way:
>> 
>> "[D]" "[A|D]" "[T|A:D]" "[C|T]"
> 
> You could probably use lookahead and lookbehind Perl regular
> expressions, but this might be easier:
> 
> readLines(textConnection(gsub("\\]\\[", "]\n[", nw.str)))
> 
> This just inserts a newline between each pair of brackets, and then
> reads the resulting string.

Same idea with scan() using space as separator:

scan(what="", text=gsub("\\]\\[", "\\] \\[", nw.str))

-- 
David Winsemius
Alameda, CA, USA




______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From smartpink111 at yahoo.com  Mon Jun  9 13:59:43 2014
From: smartpink111 at yahoo.com (arun)
Date: Mon, 9 Jun 2014 04:59:43 -0700 (PDT)
Subject: [R] Convert the column values to frequencies
Message-ID: <1402315183.29718.YahooMailNeo@web142603.mail.bf1.yahoo.com>

Hi,

Please use ?dput() to show the data.
Assuming that the data is:
dat <- structure(list(X = c("ks", "ks", "tk", "tk", "tk", "ks", "eq", 
"eq", "ks"), Y = c("dr", "zw", "dr", "", "zw", "zw", "", "zw", 
"zw"), Z = c("tq", "tq", "tq", "", "tz", "", "tz", "tz", "tz"
)), .Names = c("X", "Y", "Z"), class = "data.frame", row.names = c(NA, 
-9L))

dat[] <- lapply(dat, function(x) table(x)[x])
dat
A.K.



Hi,
I try to convert the column values to the number of the different column values (factor levels) - so as the frequency of each column value. Here my_table data including missing values:

??????????????????????????? X???????? Y?????? Z
?????????????????????????? ks???????? dr????? tq
?????????????????????????? ks???????? zw????? tq
?????????????????????????? tk???????? dr????? tq
?????????????????????????? tk??? 
?????????????????????????? tk??????? zw????? tz
?????????????????????????? ks??????? zw??? 
?????????????????????????? eq??????????? tz
?????????????????????????? eq?????? zw???????? tz? 
?????????????????????????? ks?????? zw??????? tz


So I want:
????????????????????????? X?? Y????????? Z
????????????????????????? 4?? 2????????? 3
????????????????????????? 4?????? 5?????? 3
????????????????????????? 3?????? 2?????? 3
????????????????????????? 3? 
????????????????????????? 3?????? 5?????? 4
????????????????????????? 4?????? 5? 
????????????????????????? 2?????? 4
????????????????????????? 2?????? 5?????? 4
????????????????????????? 4?????? 5?????? 4

I tried lapply(my_table, table). But that is not what I want to have. How can I solve this problem? 



From m15972031039 at 163.com  Mon Jun  9 10:12:07 2014
From: m15972031039 at 163.com (=?gb2312?B?u8bG6w==?=)
Date: Mon, 9 Jun 2014 16:12:07 +0800
Subject: [R] how to get information of many stocks by using loop cycling in R
Message-ID: <000001cf83ba$823830b0$86a89210$@163.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140609/971c3537/attachment.pl>

From wdunlap at tibco.com  Mon Jun  9 16:40:28 2014
From: wdunlap at tibco.com (William Dunlap)
Date: Mon, 9 Jun 2014 07:40:28 -0700
Subject: [R] how to get information of many stocks by using loop cycling
 in R
In-Reply-To: <000001cf83ba$823830b0$86a89210$@163.com>
References: <000001cf83ba$823830b0$86a89210$@163.com>
Message-ID: <CAF8bMcbJsOMFw7Y2XSfkCbKUT+X10nH6xQ-dxGaH_0bj841umg@mail.gmail.com>

Make 'S' either an environment or a list.  E.g.,
   SymList <- lapply(c("TIBX","X","IBM"), getSymbols,
auto.assign=FALSE) # lapply returns a list
or
   SymEnv <- new.env() # or SymList <- list()
   for(sym in c("TIBX", "X", "IBM")) SymEnv[[sym]] <- getSymbols(sym,
auto.assign=FALSE)
Use SymList[["TIBX"]] or SymEnv[["TIBX"]] to extract the information for TIBX.

Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Mon, Jun 9, 2014 at 1:12 AM, ?? <m15972031039 at 163.com> wrote:
> Dear R-core :
>
> I am a user of R language from China. I have some problems when I use
> function ?getSymbols? which belongs to package ?quantmod?,and I hope I
> can get some help from you.
>
> I can get some information of one stock just by entering
> ?s1<-getSymbols("600016.ss",from = "2011-05-01",to =
> "2014-05-01",auto.assign=FALSE)?in the R workspace, but if I want to get
> some information of 100 stocks, it is inconvenient for me to enter similar
> order hundred times. So I want to use loop cycling.
>
>
>
> stock<-c("600016.ss","600059.ss","600060.ss","600069.ss")
>
> for(i in seq(stock))
>
> {
>
> S[i]<-getSymbols(stock[i],from="2011-05-01",to="2014-05-01",auto.assign=FALS
> E)
>
> }
>
>
>
> But I do not know how to define S because the class of S[i] are ?xts? and
> ?zoo?.
>
> Could you give some help, thank you very much.
>
>
> One of users of R in China
>
>
>
>
>
>
>
>
>         [[alternative HTML version deleted]]
>
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From 538280 at gmail.com  Mon Jun  9 20:25:39 2014
From: 538280 at gmail.com (Greg Snow)
Date: Mon, 9 Jun 2014 12:25:39 -0600
Subject: [R] Map insets and par(usr) values
In-Reply-To: <6ea9a88e-9510-4aa3-8aa1-1eaaab9c87b1@email.android.com>
References: <CA+jYcmtGoqw5gyzA58xE2BT2N5ctsHZN=S3xY2JN_VnXjJDA7g@mail.gmail.com>
	<6ea9a88e-9510-4aa3-8aa1-1eaaab9c87b1@email.android.com>
Message-ID: <CAFEqCdzZb77gv2tzOJ16wa1xSvwt202x3WE2GNMFqHFopd5RtA@mail.gmail.com>

Here is an example using the subplot function.

library(TeachingDemos)
map("state", region= "ohio", xlim=c(-85, -80), ylim=c(38, 42))
tmp <- subplot(map("state",add=TRUE), 'bottomright', type='fig',
size=c(0.2,0.2), inset=0.1)
op <- par(fig=tmp$fig)
map("state", region="ohio", fill=T, add=T)
par(op)

With maps trying to redo the graphics parameters you need to play
around with the settings a little.  subplot works better with
type='fig' with maps.


On Mon, Jun 9, 2014 at 12:31 AM, Jeff Newmiller
<jdnewmil at dcn.davis.ca.us> wrote:
> Please don't post HTML email.. we don't necessarily see what you see when you do that. Read the Posting Guide for more list etiquette.
>
> Have you played with the "usr" coordinates? Have you read the help for the par function?
> The par(usr=...) call is telling base graphics what the x and y coordinates of the corners of the graphics window should be. If you subtract the same number from x1 and x2 you will shift the inset to the right because the coordinates of the left edge of the window will be further to the left of the map and the right edge of the window will be closer to the map on the right.
>
> ---------------------------------------------------------------------------
> Jeff Newmiller                        The     .....       .....  Go Live...
> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
>                                       Live:   OO#.. Dead: OO#..  Playing
> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
> /Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
> ---------------------------------------------------------------------------
> Sent from my phone. Please excuse my brevity.
>
> On June 8, 2014 9:29:02 PM MDT, Carly Muletz <craemuletz at gmail.com> wrote:
>>This is in reference to the post here by Ray Brownrigg:
>>http://r.789695.n4.nabble.com/inset-one-map-on-top-of-another-map-td3848752.html
>>
>>using this code with the maps package:
>>
>>map("state", region= "ohio", xlim=c(-85, -80), ylim=c(38, 42))
>>par(usr=c(-216, -66, 24, 144))   # you should be able to 'automate'
>>this
>>calculation
>>map("state", add=T)
>>map("state", region="ohio", fill=T, add=T)
>>
>>*MY issue*: I can't figure out how to determine which values to specify
>>for
>>par(usr=c(______))
>>
>>I can get the values of the plot area using
>>
>>par("usr")
>>
>>But I don't know how to resize the second map or move it to another
>>location. When I adjust the values specified it just seems to stretch
>>the second map out.
>>
>>Here is a basic idea of what I am trying to do
>>
>>library(maps)
>>map('state', xlim = c(-86.5,-74), ylim= c(32,41.25), col = "white",
>>fill =
>>T)
>>
>>par(usr=c(-216, -66, 24, 144))
>>par(xpd=T)
>>
>>map("state",  xlim = c(-105,-70), ylim= c(25,48), add = T)
>>
>>---but I would like the US map to be larger and moved to the right
>>
>>Thanks!
>>
>>Carly
>>
>>       [[alternative HTML version deleted]]
>>
>>______________________________________________
>>R-help at r-project.org mailing list
>>https://stat.ethz.ch/mailman/listinfo/r-help
>>PLEASE do read the posting guide
>>http://www.R-project.org/posting-guide.html
>>and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com


From tlumley at uw.edu  Tue Jun 10 04:56:00 2014
From: tlumley at uw.edu (Thomas Lumley)
Date: Mon, 9 Jun 2014 19:56:00 -0700
Subject: [R] rake() error message
In-Reply-To: <CAOwvMDx6LR1cAAGwXtVtzjLkpps+=S-1dA=627syULDuMUcf6w@mail.gmail.com>
References: <8A87EADD0D346340A30257AADF83D364089B26@cwr103.clearwater.lcl>
	<8A87EADD0D346340A30257AADF83D364136E7B46@cwr103.clearwater.lcl>
	<CAOwvMDx6LR1cAAGwXtVtzjLkpps+=S-1dA=627syULDuMUcf6w@mail.gmail.com>
Message-ID: <CAJ55+dLPQZq8O+teoXL6evBLDLP3RUe0TMOpM+eOodGzw6W2Zw@mail.gmail.com>

Anthony is right about the cause. The lack of partial=TRUE option in
rake is deliberate, and there's really only such an option in
postStratify() for debugging or simulation purposes.  What
partial=TRUE allows is the situation where an observation in your
sample has a combination of values that does not occur in the
population. There's something wrong if this happens.

   -thomas

On Sun, Jun 8, 2014 at 9:41 PM, Anthony Damico <ajdamico at gmail.com> wrote:
> (1) you hit a memory error, because you are including too many variable
> levels.  even if you narrowed your 16 variables down to these four, the
> `rake` function would need room for matricies containing as much data as a
> 6-million record table:
>
> nrow( expand.grid( data473t[ , c( 'm11' , 'm12c' , 'm13' , 'm14c' ) ] ) )
> [1] 6250000
>
> you can view where it breaks if you set `debug(rake);debug(svytable)`
>
> have a beer, put on your sunglasses, watch the xtabs() function explosion
>
>
> (2) `rake` does not accept the postStratify function's partial=TRUE so
> variables like this will cause the function to break
>
>> table(data473t$m06c)
>
>  1  2  4  7  8  9 10
> 17  1  1 27  1  1  2
>> pop.m06
>   m06c    Freq
> 1    1 4405337
> 2    2  975699
> 3    3 1248910
> 4    4  680163
> 5    7 4729616
> 6    8 1193275
> 7    9 1312393
> 8   10  761714
>>
>
>
>
> On Sun, Jun 8, 2014 at 3:12 PM, Michael Willmorth <
> MWillmorth at clearwater-research.com> wrote:
>
>> Here is some code with a subset of 50 cases that produces a similar set
>> of errors to what I got with the full data set (31,690 cases):
>>
>> ##########
>> # Load "survey" package
>> #########
>>
>> library(survey)
>>
>> ##########
>> # Create raking margins
>> ##########
>>
>> pop.m01 <- data.frame(m01=1:14,
>>   Freq=c(1013620, 1366250, 1246162, 1380230, 1148476, 668834, 486537,
>>          984026, 1390836, 1293432, 1460100, 1266403, 812223, 789978))
>> pop.m02 <- data.frame(m02=1:6,
>>   Freq=c(9134953, 2168974, 2561303, 1222942, 42514, 176421))
>> pop.m03 <- data.frame(m03=1:4,
>>   Freq=c(2347607, 4225178, 4124366, 4609957))
>> pop.m04 <- data.frame(m04=1:3, Freq=c(6855946, 5094143, 3357017))
>> pop.m05 <- data.frame(m05=1:2, Freq=c(8311759.101, 6995347.899))
>> pop.m06 <- data.frame(m06c=c(1, 2, 3, 4, 7, 8, 9, 10),
>>   Freq=c(4405337, 975699, 1248910, 680163, 4729616, 1193275, 1312393,
>>          761714))
>> pop.m07 <- data.frame(m07c=c(1, 2, 3, 4, 7, 8, 9, 10, 13, 14, 15, 16),
>>   Freq=c(2457662, 733975, 1030595, 532500, 3088896, 796220, 956879,
>>          537929, 3588395, 638779, 573829, 371448))
>> pop.m08 <- data.frame(m08=1:2, Freq=c(12291607, 3015500))
>> pop.m09 <- data.frame(m09=1:8,
>>   Freq=c(1215876, 1002016, 1138654, 237269, 1201567, 1760980,
>>          6551511, 2199234))
>> pop.m10 <- data.frame(
>>   m10c=c(1, 3, 4, 5, 6, 7, 8, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19,
>>         20, 21, 22, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36,
>>         38, 39, 40, 41, 42, 43, 45, 47, 50, 53, 55),
>>   Freq=c(346455, 177926, 231670, 210245, 128888, 120692, 291243,
>>          150882, 192203, 171500, 105349, 90839, 184875, 178779,
>>          166734, 210432, 185412, 112573, 99849, 99772, 45332, 40956,
>>          26492, 24717, 161902, 178638, 181969, 230485, 209149,
>>          129941, 109483, 475277, 297864, 360707, 293674, 179154,
>>          154304, 2300506, 2269687, 1981318, 939737, 829522, 429975))
>> pop.m11 <- data.frame(m11=1:16,
>>   Freq=c(586940, 628936, 483989, 518027, 559004, 579650, 115631,
>>          121638, 591331, 610236, 852971, 908009, 3061203, 3490308,
>>          1059040, 1140194))
>> pop.m12 <- data.frame(
>>   m12c=c(1, 2, 3, 4, 5, 6, 7, 9, 10, 11, 12, 13, 14, 15, 16),
>>   Freq=c(1032707, 183169, 837901, 164115, 1002380, 136274, 237269,
>>          1057294, 144273, 1208839, 552141, 2355498, 4196013, 1572446,
>>          626788))
>> pop.m13 <- data.frame(
>>   m13=c(1, 2, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,
>>         19, 20, 21, 22, 23, 25, 26, 27, 28, 29, 30, 32, 33, 34, 35,
>>         36, 37, 38, 39, 40, 42, 44, 45, 46, 47, 48, 49, 50, 51, 52,
>>         53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63),
>>   Freq=c(246865, 38202, 159105, 61255, 62872, 105191, 69317, 39045,
>>          66392, 50337, 39510, 38257, 234133, 726116, 31810, 41440,
>>          43168, 47212, 39748, 4038, 50728, 90352, 20743, 52311,
>>          57355, 584496, 38543, 1045866, 170388, 183670, 363158,
>>          85188, 276129, 33867, 94775, 50888, 77361, 126755, 230003,
>>          88963, 173956, 120663, 25884, 14790, 28074, 76630, 1153368,
>>          60013, 39119, 86528, 146917, 52673, 50150, 71815, 736424,
>>          33645, 19395, 6551511))
>> pop.m14 <- data.frame(
>>   m14c=c(1, 3, 7, 9, 11, 13, 15, 17, 19, 21, 23, 25, 27, 29, 31, 33,
>>          35, 37, 39, 41, 43, 45, 49, 51, 53, 55, 57, 59, 63, 65, 67,
>>          69, 71, 73, 75, 77, 79, 83, 87, 89, 91, 93, 95, 97, 99, 101,
>>          103, 105, 107, 109, 111, 113, 115, 117, 119, 120, 121, 123,
>>          125, 126),
>>   Freq=c(246865, 38202, 159105, 61255, 62872, 105191, 69317, 39045,
>>          66392, 50337, 39510, 38257, 234133, 726116, 31810, 41440,
>>          43168, 47212, 39748, 4038, 50728, 90352, 20743, 52311,
>>          57355, 584496, 38543, 1045866, 170388, 183670, 363158,
>>          85188, 276129, 33867, 94775, 50888, 77361, 126755, 230003,
>>          88963, 173956, 120663, 25884, 14790, 28074, 76630, 1153368,
>>          60013, 39119, 86528, 146917, 52673, 50150, 71815, 442624,
>>          293800, 33645, 19395, 2351378, 4200133))
>> pop.m15 <- data.frame(
>>   m15c=c(1, 3, 5, 8, 22, 26, 29, 36, 43, 50, 57, 64, 71, 78, 85, 92,
>>          99, 102, 104, 106, 113, 120, 127, 134, 141, 148, 155, 169,
>>          176, 183, 190, 192, 194, 197, 204, 218, 225, 229, 232, 236,
>>          239, 246, 250, 253, 260, 267, 274, 288, 292, 302, 309, 316,
>>          319, 321, 323, 327, 330, 337, 344, 351, 356, 358, 362, 365,
>>          372, 379, 386, 393, 400, 407, 414, 418, 421, 428, 435, 437,
>>          440),
>>   Freq=c(83110, 78832, 84923, 38202, 98781, 60324, 61255, 62872,
>>          105191, 69317, 39045, 66392, 50337, 39510, 38257, 234133,
>>          318650, 259522, 147944, 31810, 41440, 43168, 47212, 39748,
>>          4038, 50728, 90352, 20743, 52311, 57355, 181148, 197737,
>>          205611, 38543, 1045866, 170388, 113287, 70383, 234455,
>>          128703, 85188, 187670, 88459, 33867, 94775, 50888, 77361,
>>          82095, 44660, 230003, 88963, 74361, 66803, 32792, 76814,
>>          43849, 25884, 14790, 28074, 60060, 16570, 749637, 403731,
>>          60013, 39119, 86528, 146917, 52673, 50150, 71815, 469711,
>>          266713, 33645, 19395, 2300506, 2269687, 1981318))
>> pop.m16 <- data.frame(
>>   m16c=c(1, 2, 3, 7, 8, 9, 11, 13, 15, 17, 19, 21, 23, 25, 27, 29,
>>          30, 31, 33, 35, 37, 39, 41, 43, 45, 49, 51, 53, 55, 56, 57,
>>          59, 63, 65, 66, 67, 68, 69, 71, 73, 75, 77, 79, 83, 87, 89,
>>          91, 92, 93, 95, 97, 99, 101, 102, 103, 105, 107, 109, 111,
>>          113, 115, 117, 119, 120, 121, 123, 125, 126),
>>   Freq=c(117698, 129167, 38202, 77086, 82019, 61255, 62872, 105191,
>>          69317, 39045, 66392, 50337, 39510, 38257, 234133, 345807,
>>          380309, 31810, 41440, 43168, 47212, 39748, 4038, 50728,
>>          90352, 20743, 52311, 57355, 277767, 306729, 38543, 1045866,
>>          170388, 90719, 92951, 172428, 190730, 85188, 276129, 33867,
>>          94775, 50888, 77361, 126755, 230003, 88963, 84847, 89109,
>>          120663, 25884, 14790, 28074, 37793, 38837, 1153368, 60013,
>>          39119, 86528, 146917, 52673, 50150, 71815, 348252, 388172,
>>          33645, 19395, 3061203, 3490308))
>>
>> ##########
>> # Create test data
>> ##########
>>
>> data473t <- structure(list(UNIQUEID = c(1012014089180, 1022013238298,
>> 1042013241039,
>> 1052013004507, 1072013249467, 1082014008028, 1102013092794,
>> 1122013259076,
>> 1132013100359, 1152013102251, 1162013104498, 1182013273804,
>> 1192013114724,
>> 1212014031349, 1232013123973, 1242014037607, 1262013294983,
>> 1272013033924,
>> 1292013037388, 1312013148206, 1322013154681, 1342013161674,
>> 1352013315374,
>> 1372013177797, 1382013322571, 1402014055466, 1412013328023,
>> 1432014101258,
>> 1442013334151, 1462013338479, 1482014069742, 1492013206558,
>> 1512013212611,
>> 1522014076485, 1542013358421, 1562014082968, 1572013366565,
>> 2012013001961,
>> 2012014000821, 2022013048057, 2022013086770, 2032014011659,
>> 2032013103103,
>> 2042013120142, 2052014014716, 2052013025234, 2052014005041,
>> 2062013097623,
>> 2062013080902, 2082013084666), wt2ctr = c(325.795101348449,
>> 70.583847491458,
>> 53.5737152891645, 87.3420548804146, 97.7774085298657, 55.7519795014608,
>> 54.9473333894856, 129.432485616598, 83.6325849328425, 236.156871839518,
>> 93.8174699019665, 155.458343257822, 1120.17376408564, 101.74176747363,
>> 160.940587929738, 121.569937640962, 134.943277024256, 596.666876414474,
>> 741.828100861109, 130.455392502077, 96.6389182239747, 26.4247473045969,
>> 105.630503418385, 43.9170425271054, 23.0636168826181, 95.6396766959478,
>> 49.0569303152236, 414.236075685919, 112.887129394625, 154.760416704869,
>> 569.501845222299, 46.3700705303052, 88.3535743322299, 279.097109402007,
>> 232.787696027288, 180.928665939598, 103.020256291952, 106.979086343284,
>> 1063.72009129969, 700.758625136715, 898.276244958075, 695.86666592582,
>> 871.431921393644, 387.322293202373, 701.031310697548, 420.535216267998,
>> 649.03695813162, 1393.79948753652, 1282.55016779916, 4924.88352884971
>> ), m02 = c(1L, 1L, 1L, 1L, 1L, 5L, 1L, 1L, 1L, 1L, 1L, 1L, 3L,
>> 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 6L, 1L, 1L, 1L, 1L, 1L,
>> 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
>> 2L, 1L, 1L, 2L, 4L), m03 = c(4L, 3L, 3L, 1L, 2L, 3L, 3L, 4L,
>> 3L, 2L, 2L, 4L, 4L, 2L, 4L, 4L, 2L, 4L, 1L, 2L, 3L, 2L, 2L, 4L,
>> 4L, 2L, 3L, 4L, 3L, 4L, 3L, 2L, 3L, 3L, 3L, 4L, 4L, 4L, 3L, 4L,
>> 3L, 2L, 3L, 4L, 2L, 3L, 2L, 2L, 4L, 4L), m04 = c(1L, 3L, 3L,
>> 3L, 2L, 1L, 3L, 1L, 1L, 1L, 3L, 1L, 3L, 1L, 1L, 1L, 1L, 1L, 3L,
>> 2L, 1L, 3L, 1L, 2L, 3L, 1L, 3L, 1L, 3L, 1L, 1L, 3L, 1L, 1L, 3L,
>> 3L, 1L, 1L, 3L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 3L, 1L, 3L, 1L),
>>     m05 = c(2L, 2L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
>>     1L, 1L, 1L, 2L, 1L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L,
>>     2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 2L,
>>     1L, 2L, 2L, 1L, 2L, 1L, 1L), m08 = c(1L, 1L, 1L, 1L, 1L,
>>     1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
>>     1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
>>     1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L
>>     ), m09 = c(1L, 3L, 5L, 5L, 3L, 6L, 5L, 3L, 5L, 5L, 5L, 5L,
>>     7L, 6L, 6L, 6L, 6L, 6L, 8L, 3L, 4L, 4L, 3L, 2L, 2L, 3L, 3L,
>>     3L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 3L,
>>     3L, 4L, 5L, 5L, 5L, 6L, 6L, 8L), m01 = c(11L, 12L, 5L, 14L,
>>     9L, 12L, 12L, 5L, 14L, 6L, 14L, 6L, 13L, 11L, 4L, 13L, 8L,
>>     11L, 14L, 7L, 14L, 5L, 14L, 4L, 12L, 6L, 14L, 10L, 10L, 12L,
>>     5L, 13L, 6L, 4L, 12L, 4L, 12L, 10L, 10L, 2L, 11L, 3L, 10L,
>>     4L, 2L, 1L, 11L, 1L, 11L, 12L), m11 = c(2L, 6L, 9L, 10L,
>>     6L, 12L, 10L, 5L, 10L, 9L, 10L, 9L, 14L, 12L, 11L, 12L, 12L,
>>     12L, 16L, 5L, 8L, 7L, 6L, 3L, 4L, 5L, 6L, 6L, 4L, 4L, 3L,
>>     4L, 1L, 1L, 2L, 1L, 2L, 2L, 2L, 3L, 4L, 5L, 6L, 7L, 9L, 9L,
>>     10L, 11L, 12L, 16L), m13 = c(15L, 45L, 17L, 10L, 22L, 14L,
>>     18L, 33L, 57L, 58L, 1L, 42L, 63L, 53L, 14L, 40L, 44L, 36L,
>>     30L, 34L, 9L, 54L, 55L, 51L, 51L, 12L, 6L, 38L, 50L, 35L,
>>     28L, 26L, 19L, 37L, 15L, 7L, 2L, 2L, 7L, 59L, 28L, 38L, 33L,
>>     4L, 1L, 10L, 42L, 14L, 60L, 30L), m06c = c(7L, 7L, 1L, 7L,
>>     7L, 10L, 7L, 1L, 7L, 1L, 7L, 1L, 9L, 7L, 1L, 7L, 7L, 7L,
>>     7L, 1L, 7L, 1L, 7L, 4L, 7L, 1L, 7L, 7L, 7L, 7L, 1L, 7L, 1L,
>>     1L, 7L, 1L, 7L, 7L, 7L, 1L, 7L, 1L, 7L, 1L, 1L, 2L, 7L, 1L,
>>     8L, 10L), m07c = c(7L, 13L, 13L, 13L, 1L, 16L, 13L, 13L,
>>     13L, 13L, 13L, 13L, 15L, 7L, 7L, 13L, 1L, 7L, 13L, 13L, 13L,
>>     13L, 13L, 10L, 13L, 13L, 13L, 7L, 7L, 13L, 13L, 13L, 13L,
>>     7L, 13L, 7L, 13L, 7L, 7L, 1L, 7L, 7L, 7L, 7L, 1L, 2L, 7L,
>>     1L, 8L, 16L), m10c = c(4L, 19L, 33L, 35L, 16L, 40L, 33L,
>>     19L, 35L, 34L, 35L, 34L, 47L, 39L, 39L, 41L, 36L, 39L, 55L,
>>     21L, 28L, 26L, 21L, 11L, 12L, 20L, 21L, 17L, 10L, 12L, 12L,
>>     13L, 6L, 4L, 5L, 4L, 5L, 3L, 3L, 8L, 11L, 17L, 17L, 25L,
>>     30L, 29L, 32L, 36L, 39L, 53L), m12c = c(1L, 5L, 9L, 9L, 5L,
>>     12L, 9L, 5L, 9L, 9L, 9L, 9L, 14L, 11L, 11L, 11L, 11L, 11L,
>>     15L, 5L, 7L, 7L, 5L, 4L, 3L, 5L, 5L, 5L, 3L, 3L, 3L, 3L,
>>     1L, 1L, 1L, 1L, 1L, 1L, 1L, 3L, 3L, 5L, 5L, 7L, 9L, 10L,
>>     9L, 11L, 12L, 16L), m14c = c(29L, 89L, 33L, 19L, 43L, 27L,
>>     35L, 65L, 113L, 115L, 1L, 83L, 126L, 105L, 27L, 79L, 87L,
>>     71L, 59L, 67L, 17L, 107L, 109L, 101L, 101L, 23L, 11L, 75L,
>>     99L, 69L, 55L, 51L, 37L, 73L, 29L, 13L, 3L, 3L, 13L, 117L,
>>     55L, 75L, 65L, 7L, 1L, 19L, 83L, 27L, 120L, 59L), m15c = c(99L,
>>     309L, 113L, 64L, 148L, 92L, 120L, 225L, 393L, 400L, 5L, 288L,
>>     439L, 365L, 92L, 274L, 302L, 246L, 204L, 232L, 57L, 372L,
>>     379L, 351L, 351L, 78L, 36L, 260L, 344L, 239L, 190L, 176L,
>>     127L, 253L, 99L, 43L, 8L, 8L, 43L, 407L, 190L, 260L, 225L,
>>     22L, 1L, 64L, 288L, 92L, 414L, 204L), m16c = c(30L, 89L,
>>     33L, 19L, 43L, 27L, 35L, 65L, 113L, 115L, 2L, 83L, 126L,
>>     105L, 27L, 79L, 87L, 71L, 59L, 67L, 17L, 107L, 109L, 101L,
>>     102L, 23L, 11L, 75L, 99L, 69L, 55L, 51L, 37L, 73L, 30L, 13L,
>>     3L, 3L, 13L, 117L, 56L, 75L, 66L, 7L, 1L, 19L, 83L, 27L,
>>     120L, 59L), ststr = c(361011L, 361021L, 361041L, 361051L,
>>     361071L, 361081L, 361101L, 361121L, 361131L, 361151L, 361161L,
>>     361181L, 361191L, 361211L, 361231L, 361241L, 361261L, 361272L,
>>     361291L, 361311L, 361321L, 361341L, 361351L, 361371L, 361381L,
>>     361401L, 361411L, 361431L, 361442L, 361461L, 361481L, 361491L,
>>     361511L, 361522L, 361541L, 361561L, 361571L, 362012L, 362019L,
>>     362029L, 362029L, 362039L, 362039L, 362049L, 362059L, 362059L,
>>     362059L, 362069L, 362069L, 362089L)), .Names = c("UNIQUEID",
>> "wt2ctr", "m02", "m03", "m04", "m05", "m08", "m09", "m01", "m11",
>> "m13", "m06c", "m07c", "m10c", "m12c", "m14c", "m15c", "m16c",
>> "ststr"), row.names = c(1L, 647L, 1294L, 1941L, 2587L, 3234L,
>> 3881L, 4528L, 5174L, 5821L, 6468L, 7114L, 7761L, 8408L, 9055L,
>> 9701L, 10348L, 10995L, 11641L, 12288L, 12935L, 13581L, 14228L,
>> 14875L, 15522L, 16168L, 16815L, 17462L, 18109L, 18755L, 19402L,
>> 20049L, 20695L, 21342L, 21989L, 22636L, 23282L, 23929L, 24576L,
>> 25222L, 25869L, 26516L, 27162L, 27809L, 28456L, 29103L, 29749L,
>> 30396L, 31043L, 31690L), class = "data.frame")
>>
>> ##########
>> # Check first few cases of test data
>> ##########
>>
>> head(testd473t)
>>
>> ##########
>> # Create survey object
>> ##########
>>
>> sdes473t <- svydesign(id=~UNIQUEID, strata=~ststr, weights=~wt2ctr,
>>   data=data473t)
>>
>> ##########
>> # Create new survey object with raked weights
>> ##########
>>
>> d473.raked <- rake(sdes473t,
>>   sample=list(~m01, ~m02, ~m03, ~m04, ~m05, ~m06c, ~m07c, ~m08, ~m09,
>>               ~m10c, ~m11, ~m12c, ~m13, ~m14c, ~m15c, ~m16c),
>>   population=list(pop.m01, pop.m02, pop.m03, pop.m04, pop.m05,
>>                   pop.m06, pop.m07, pop.m08, pop.m09, pop.m10,
>>                   pop.m11, pop.m12, pop.m13, pop.m14, pop.m15,
>>                   pop.m16))
>>
>>
>> -----Original Message-----
>> From: Michael Willmorth
>> Sent: Saturday, June 07, 2014 9:23 AM
>> To: r-help at R-project.org
>> Subject: rake() error message
>>
>> I'm teaching myself how to use rake() in the R "survey" package, using
>> Thomas Lumley's "Complex Surveys" book. Working with one of my data
>> sets, I received an error that has me stumped.
>>
>> Here is the code I used:
>>
>> d473.raked <- rake(sdes473,
>>   sample=list(~m01, ~m02, ~m03, ~m04, ~m05, ~m06c, ~m07c, ~m08, ~m09,
>>               ~m10c, ~m11, ~m12c, ~m13, ~m14c, ~m15c, ~m16c),
>>   population=list(pop.m01, pop.m02, pop.m03, pop.m04, pop.m05,
>>                   pop.m06, pop.m07, pop.m08, pop.m09, pop.m10,
>>                   pop.m11, pop.m12, pop.m13, pop.m14, pop.m15,
>>                   pop.m16))
>>
>> Here is the error I received:
>>
>> Error in array(dim = extent, dimnames = namelist) : vector is too large
>> In addition: Warning messages:
>> 1: In ngroup * (as.integer(index) - one) :
>>   NAs produced by integer overflow
>> 2: In group + ngroup * (as.integer(index) - one) :
>>   NAs produced by integer overflow
>> 3: In ngroup * nlevels(index) : NAs produced by integer overflow
>>
>> Any guidance on this would be much appreciated.
>>
>> Thanks,
>>
>> Michael Willmorth
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Thomas Lumley
Professor of Biostatistics
University of Auckland


From bgreen at dyson.brisnet.org.au  Tue Jun 10 08:31:30 2014
From: bgreen at dyson.brisnet.org.au (Bob Green)
Date: Tue, 10 Jun 2014 16:31:30 +1000
Subject: [R] Recurrent analysis survival analysis data format question
Message-ID: <20140610063207.339DD890791@borg.pacgate.com>

Hello,

I'm hoping for advice regarding how to set up a recurrent event 
survival analysis data file. My data consists of people released from 
custody, with survival time being measured as days before re 
imprisonment or end of the study. In the example below, id 5155 is 
released 5 times and jailed five times. All events are therefore 
true. Daysfree is the difference in days between release and return 
to custody.  Id 7155 is released 3 times and only re-imprisoned 
twice, so the third event value is false.

id <- c(5155, 5155,5155,5155, 7155, 7155,7155)
Release <- c("29/10/10","9/01/11", "25/03/12", "15/10/13", "9/01/10", 
"16/12/12","29/10/13")
JailNew <- c("1/12/10","01/12/11", "27/09/12", "24/01/14", 
"22/09/12","24/01/12","24/01/14")
DaysFree <- c(24,234,134,74,709,29,64)
Event <- c("true", "true", "true", "true", "true", "true", "false" )
DF1<- data.frame(id,  Release, JailNew, DaysFree, Event)
DF1

  After speaking to a statistician today I'm not sure if I my method 
of formatting the data is correct. Should all time intervals be 
included, not just the period from release to event/end of study 
period.  Currently period imprisoned is not counted.  For example, 
for id 5155, would I also include  1/12/10 - 9/01/11 etc, which would 
be FALSE for event and have a duration of 39 days; and then include 
all the other similar intervals as well. The statistican thought 
including this additional information more closely resembled the 
bladder1 data in the Survival package.

Any assistance is appreciated,

Regards

Bob


From vweinbir at gmail.com  Tue Jun 10 12:03:55 2014
From: vweinbir at gmail.com (Verena Weinbir)
Date: Tue, 10 Jun 2014 12:03:55 +0200
Subject: [R] Forst Plot: Multipage Output
Message-ID: <CAMuCtg4JGPRcP4D=oT1kFnU8FQgZxtDP2ocjYH57Su2LgZawDA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140610/e2a91160/attachment.pl>

From jim at bitwrit.com.au  Tue Jun 10 12:44:05 2014
From: jim at bitwrit.com.au (Jim Lemon)
Date: Tue, 10 Jun 2014 20:44:05 +1000
Subject: [R] Forst Plot: Multipage Output
In-Reply-To: <CAMuCtg4JGPRcP4D=oT1kFnU8FQgZxtDP2ocjYH57Su2LgZawDA@mail.gmail.com>
References: <CAMuCtg4JGPRcP4D=oT1kFnU8FQgZxtDP2ocjYH57Su2LgZawDA@mail.gmail.com>
Message-ID: <1415035.dtyzGGb1IP@localhost.localdomain>

On Tue, 10 Jun 2014 12:03:55 PM Verena Weinbir wrote:
> Hey guys,
> 
> I have a huge forest plot, which is to big to put it on one page (you 
cant
> read a thing in this case ;-))  Is there a way to let it run over several
> pages?
> 
> forest(resultges, main="forest plot of included studies")
> 
Hi Verena,
One easy way is to use the "pdf" device for output and specify a very 
large page. You can then scroll around it in a PDF viewer and if you want 
a hard copy, have it printed at a print shop.

Jim


From vweinbir at gmail.com  Tue Jun 10 12:57:23 2014
From: vweinbir at gmail.com (Verena Weinbir)
Date: Tue, 10 Jun 2014 12:57:23 +0200
Subject: [R] Forst Plot: Multipage Output
In-Reply-To: <1415035.dtyzGGb1IP@localhost.localdomain>
References: <CAMuCtg4JGPRcP4D=oT1kFnU8FQgZxtDP2ocjYH57Su2LgZawDA@mail.gmail.com>
	<1415035.dtyzGGb1IP@localhost.localdomain>
Message-ID: <CAMuCtg7uScUvLd+gh+RYYYO8B-B+PpK3oojDpgDBmNyP3fnsEA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140610/ca801f11/attachment.pl>

From b.taylor1 at lancaster.ac.uk  Tue Jun 10 10:36:58 2014
From: b.taylor1 at lancaster.ac.uk (BenTaylor)
Date: Tue, 10 Jun 2014 01:36:58 -0700 (PDT)
Subject: [R] Problem with R CMD check and the inconsolata font business.
In-Reply-To: <4EB3241F.2060608@ohsu.edu>
References: <4EB244BE.7010905@xtra.co.nz> <4EB307C0.9080602@xtra.co.nz>
	<4EB31606.7000702@ohsu.edu> <4EB3241F.2060608@ohsu.edu>
Message-ID: <1402389418763-4691935.post@n4.nabble.com>

Not sure if this is because things have changed with MikTeX, but I had to do 

updmap

rather than 

initexmf --mkmaps



--
View this message in context: http://r.789695.n4.nabble.com/Problem-with-R-CMD-check-and-the-inconsolata-font-business-tp3984596p4691935.html
Sent from the R help mailing list archive at Nabble.com.


From aidan.corcoran11 at gmail.com  Tue Jun 10 15:52:58 2014
From: aidan.corcoran11 at gmail.com (Aidan Corcoran)
Date: Tue, 10 Jun 2014 14:52:58 +0100
Subject: [R] r internet connection is very slow
Message-ID: <CADv5Py42WKEmEK7wMiA3kSvGB+KSA9-2YHuVKrmWoxm7-+hE=Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140610/233fd83b/attachment.pl>

From ligges at statistik.tu-dortmund.de  Tue Jun 10 15:58:44 2014
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Tue, 10 Jun 2014 15:58:44 +0200
Subject: [R] r internet connection is very slow
In-Reply-To: <CADv5Py42WKEmEK7wMiA3kSvGB+KSA9-2YHuVKrmWoxm7-+hE=Q@mail.gmail.com>
References: <CADv5Py42WKEmEK7wMiA3kSvGB+KSA9-2YHuVKrmWoxm7-+hE=Q@mail.gmail.com>
Message-ID: <53970F14.6060901@statistik.tu-dortmund.de>

Probably you used a slow mirror and did not tell us which one ... or you 
have lots of packages installed on a very slow drive (such as a network 
connected location).

Best,
Uwe Ligges


On 10.06.2014 15:52, Aidan Corcoran wrote:
> Dear all,
>
> I have a fresh install of R on a virtual desktop running Win 7 64 bit and
> when I try to install packages it is extremely slow.
>
> I typed
> install.packages("ggplot2",dependencies=TRUE)
>
> and it takes about 1 minute for the mirror select box to open. After that I
> waited about 20 minutes for the ggplot package and then cancelled it
> (smaller packages are quicker than that but still exceptionally slow).
>
> Not sure where to start as other programs work fine and the internet
> connection is fine apart from in R. I have pasted Sessioninfo below. Any
> help is very much appreciated.
>
> many thanks
> Aidan.
>
>> sessionInfo()
> R version 3.1.0 (2014-04-10)
> Platform: x86_64-w64-mingw32/x64 (64-bit)
>
> locale:
> [1] LC_COLLATE=English_United Kingdom.1252
> [2] LC_CTYPE=English_United Kingdom.1252
> [3] LC_MONETARY=English_United Kingdom.1252
> [4] LC_NUMERIC=C
> [5] LC_TIME=English_United Kingdom.1252
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From dcarlson at tamu.edu  Tue Jun 10 16:31:32 2014
From: dcarlson at tamu.edu (David L Carlson)
Date: Tue, 10 Jun 2014 14:31:32 +0000
Subject: [R] Forst Plot: Multipage Output
In-Reply-To: <CAMuCtg7uScUvLd+gh+RYYYO8B-B+PpK3oojDpgDBmNyP3fnsEA@mail.gmail.com>
References: <CAMuCtg4JGPRcP4D=oT1kFnU8FQgZxtDP2ocjYH57Su2LgZawDA@mail.gmail.com>
	<1415035.dtyzGGb1IP@localhost.localdomain>
	<CAMuCtg7uScUvLd+gh+RYYYO8B-B+PpK3oojDpgDBmNyP3fnsEA@mail.gmail.com>
Message-ID: <53BF8FB63FAF2E4A9455EF1EE94DA726F75A0D@mb02.ads.tamu.edu>

If you have a pdf driver such as CutePDF (free), you can use it to divide the large plot Jim suggested into smaller sheets using poster mode. You can open the multipage pdf in Word and it will convert the pdf pages but you will lose any labelling that is not horizontal. The alternative would be to open the multipage pdf file using Irfanview (free) and save the pages as raster files (tif or png) for import into Word.

e.g.

> pdf("Test.pdf", width=22, height=17)
> plot(runif(100), runif(100), pch=16, las=1)
> dev.off()

Using las=1 will print the y-axis labels horizontally. Now open Test.pdf in Acrobat Reader and print to CutePDF using the poster mode.

-------------------------------------
David L Carlson
Department of Anthropology
Texas A&M University
College Station, TX 77840-4352

-----Original Message-----
From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On Behalf Of Verena Weinbir
Sent: Tuesday, June 10, 2014 5:57 AM
To: Jim Lemon
Cc: r-help
Subject: Re: [R] Forst Plot: Multipage Output

thank you for your answer, Jim!

I want to embed the forest plot in a word document :-)  So I probably have
to make some specifiations within the forest () function (like landscape
and mulitpage format), if possible at all ?

Best,

Verena


On Tue, Jun 10, 2014 at 12:44 PM, Jim Lemon <jim at bitwrit.com.au> wrote:

> On Tue, 10 Jun 2014 12:03:55 PM Verena Weinbir wrote:
> > Hey guys,
> >
> > I have a huge forest plot, which is to big to put it on one page (you
> cant
> > read a thing in this case ;-))  Is there a way to let it run over several
> > pages?
> >
> > forest(resultges, main="forest plot of included studies")
> >
> Hi Verena,
> One easy way is to use the "pdf" device for output and specify a very
> large page. You can then scroll around it in a PDF viewer and if you want
> a hard copy, have it printed at a print shop.
>
> Jim
>
>

	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From aidan.corcoran11 at gmail.com  Tue Jun 10 16:32:08 2014
From: aidan.corcoran11 at gmail.com (Aidan Corcoran)
Date: Tue, 10 Jun 2014 15:32:08 +0100
Subject: [R] r internet connection is very slow
In-Reply-To: <53970F14.6060901@statistik.tu-dortmund.de>
References: <CADv5Py42WKEmEK7wMiA3kSvGB+KSA9-2YHuVKrmWoxm7-+hE=Q@mail.gmail.com>
	<53970F14.6060901@statistik.tu-dortmund.de>
Message-ID: <CADv5Py46dZa6UQds=DMKUJWodg0O7FfSkg+T=OAtEYerW7Rp7g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140610/493a1839/attachment.pl>

From peter.salzmanuser at gmail.com  Tue Jun 10 17:32:32 2014
From: peter.salzmanuser at gmail.com (peter salzman)
Date: Tue, 10 Jun 2014 11:32:32 -0400
Subject: [R] NA/NaN values in bnlearn package R
In-Reply-To: <20140608222717.wydg4ysjvo8gwgok@agenda.dpi.inpe.br>
References: <20140608222717.wydg4ysjvo8gwgok@agenda.dpi.inpe.br>
Message-ID: <CAHdoti=e07pvxd2+D5KG9qfwzVu8oFhBp7S4u_WOP7nj_N=dVQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140610/ed04b846/attachment.pl>

From ashenkin at ufl.edu  Tue Jun 10 17:50:49 2014
From: ashenkin at ufl.edu (Alexander Shenkin)
Date: Tue, 10 Jun 2014 08:50:49 -0700
Subject: [R] dimensions of polyhedrons
Message-ID: <53972959.108@ufl.edu>

Hello all,

I have sets of points in (x,y,z) that represent polyhedron vertices 
(actually tree crowns).  I have used convhulln to estimate volumes (the 
shapes are not necessarily convex, but good enough for now). Now I would 
like to extract various dimensions of these shapes - horizontal width 
(max, mean), vertical depth (max, mean), and other metrics.

Are there any packages/tools in R that might help me do this?  A look 
around didn't come up with anything.

Thanks in advance,
Allie


From ferra.xu at yahoo.com  Tue Jun 10 18:28:58 2014
From: ferra.xu at yahoo.com (Ferra Xu)
Date: Tue, 10 Jun 2014 09:28:58 -0700 (PDT)
Subject: [R] Spatio-Temporal marked Hawkes (self-exciting) point processes
Message-ID: <1402417738.50363.YahooMailNeo@web125102.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140610/8303b6a9/attachment.pl>

From chrisaa at med.umich.edu  Tue Jun 10 21:02:30 2014
From: chrisaa at med.umich.edu (Andrews, Chris)
Date: Tue, 10 Jun 2014 19:02:30 +0000
Subject: [R] Recurrent analysis survival analysis data format question
In-Reply-To: <20140610063207.339DD890791@borg.pacgate.com>
References: <20140610063207.339DD890791@borg.pacgate.com>
Message-ID: <30411786F64EEF46856EFBA2CD9177992C2D12B8@UHEXMBSPR03.umhs.med.umich.edu>

I wouldn't consider the person at risk for re incarceration if he is currently imprisoned.  So I wouldn't use those intervals as part of the response variable.  Perhaps time in custody would be a covariate used to model the time until re incarceration.  One variable that is commonly needed for analysis of recurrent data is the number of previous events.  It can be used to, e.g., stratify.

Chris


-----Original Message-----
From: Bob Green [mailto:bgreen at dyson.brisnet.org.au] 
Sent: Tuesday, June 10, 2014 2:32 AM
To: r-help at r-project.org
Subject: [R] Recurrent analysis survival analysis data format question

Hello,

I'm hoping for advice regarding how to set up a recurrent event 
survival analysis data file. My data consists of people released from 
custody, with survival time being measured as days before re 
imprisonment or end of the study. In the example below, id 5155 is 
released 5 times and jailed five times. All events are therefore 
true. Daysfree is the difference in days between release and return 
to custody.  Id 7155 is released 3 times and only re-imprisoned 
twice, so the third event value is false.

id <- c(5155, 5155,5155,5155, 7155, 7155,7155)
Release <- c("29/10/10","9/01/11", "25/03/12", "15/10/13", "9/01/10", 
"16/12/12","29/10/13")
JailNew <- c("1/12/10","01/12/11", "27/09/12", "24/01/14", 
"22/09/12","24/01/12","24/01/14")
DaysFree <- c(24,234,134,74,709,29,64)
Event <- c("true", "true", "true", "true", "true", "true", "false" )
DF1<- data.frame(id,  Release, JailNew, DaysFree, Event)
DF1

  After speaking to a statistician today I'm not sure if I my method 
of formatting the data is correct. Should all time intervals be 
included, not just the period from release to event/end of study 
period.  Currently period imprisoned is not counted.  For example, 
for id 5155, would I also include  1/12/10 - 9/01/11 etc, which would 
be FALSE for event and have a duration of 39 days; and then include 
all the other similar intervals as well. The statistican thought 
including this additional information more closely resembled the 
bladder1 data in the Survival package.

Any assistance is appreciated,

Regards

Bob


**********************************************************
Electronic Mail is not secure, may not be read every day, and should not be used for urgent or sensitive issues 


From mentus at gmail.com  Tue Jun 10 20:33:42 2014
From: mentus at gmail.com (Fernando Henrique Ferraz Pereira da Rosa)
Date: Tue, 10 Jun 2014 15:33:42 -0300
Subject: [R] Deploying R in a corporate environment
Message-ID: <CADL-ygYfoLXZ9C-URtqv95N8q5Ek1Jp9D7p4fdsWhFwCkDfFMQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140610/e48d1af1/attachment.pl>

From msuzen at gmail.com  Wed Jun 11 00:36:57 2014
From: msuzen at gmail.com (Suzen, Mehmet)
Date: Wed, 11 Jun 2014 00:36:57 +0200
Subject: [R] copula fitting
In-Reply-To: <CAOqgmySyc59BL1p4OO0WAybAn6Xuz2PGyWM+8d1SyqbvMLowqw@mail.gmail.com>
References: <CAOqgmySyc59BL1p4OO0WAybAn6Xuz2PGyWM+8d1SyqbvMLowqw@mail.gmail.com>
Message-ID: <CAPtbhHwKFCo=chgkjfHNjqeB4do3nYDuqhjcscwgtxLxp=iZYw@mail.gmail.com>

yes you can.

On 7 June 2014 16:04, mudit gupta <muditfool at gmail.com> wrote:
> Hi guys,
>
> can i fit  a copula to two marginal  distributions with different sample
> size?
> like one has 2340 observations and other has 1912.
>
> thanks
> Mudit
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From msuzen at gmail.com  Wed Jun 11 00:38:15 2014
From: msuzen at gmail.com (Suzen, Mehmet)
Date: Wed, 11 Jun 2014 00:38:15 +0200
Subject: [R] copula fitting
In-Reply-To: <CAPtbhHwKFCo=chgkjfHNjqeB4do3nYDuqhjcscwgtxLxp=iZYw@mail.gmail.com>
References: <CAOqgmySyc59BL1p4OO0WAybAn6Xuz2PGyWM+8d1SyqbvMLowqw@mail.gmail.com>
	<CAPtbhHwKFCo=chgkjfHNjqeB4do3nYDuqhjcscwgtxLxp=iZYw@mail.gmail.com>
Message-ID: <CAPtbhHwkc3cyY7QWC7d4wnk7zudZLvtReUj-_eRXxDaTPO=fqQ@mail.gmail.com>

Have you checked out 'copula' package?

On 11 June 2014 00:36, Suzen, Mehmet <msuzen at gmail.com> wrote:
> yes you can.
>
> On 7 June 2014 16:04, mudit gupta <muditfool at gmail.com> wrote:
>> Hi guys,
>>
>> can i fit  a copula to two marginal  distributions with different sample
>> size?
>> like one has 2340 observations and other has 1912.
>>
>> thanks
>> Mudit
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From ligges at statistik.tu-dortmund.de  Wed Jun 11 02:43:30 2014
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Wed, 11 Jun 2014 02:43:30 +0200
Subject: [R] r internet connection is very slow
In-Reply-To: <CADv5Py46dZa6UQds=DMKUJWodg0O7FfSkg+T=OAtEYerW7Rp7g@mail.gmail.com>
References: <CADv5Py42WKEmEK7wMiA3kSvGB+KSA9-2YHuVKrmWoxm7-+hE=Q@mail.gmail.com>	<53970F14.6060901@statistik.tu-dortmund.de>
	<CADv5Py46dZa6UQds=DMKUJWodg0O7FfSkg+T=OAtEYerW7Rp7g@mail.gmail.com>
Message-ID: <5397A632.4070300@statistik.tu-dortmund.de>



On 10.06.2014 16:32, Aidan Corcoran wrote:
> thanks Uwe. I have tried a few mirrors, it makes no difference.
> I don't have lots of packages, as it's a fresh install.
> I am installing to the C drive, but as I mentioned it's a virtual desktop.
> However other programs don't show anything like the kind of delay I see in
> R.
> Also, just getting the prompt to choose a mirror takes a minute - could
> that be a network drive issue too?

Hard to say without access to the machine.
Sounds more like timeouts or so .....

Best,
Uwe Ligges



>
> many thanks
> Aidan.
>
>
> On Tue, Jun 10, 2014 at 2:58 PM, Uwe Ligges <ligges at statistik.tu-dortmund.de
>> wrote:
>
>> Probably you used a slow mirror and did not tell us which one ... or you
>> have lots of packages installed on a very slow drive (such as a network
>> connected location).
>>
>> Best,
>> Uwe Ligges
>>
>>
>>
>> On 10.06.2014 15:52, Aidan Corcoran wrote:
>>
>>> Dear all,
>>>
>>> I have a fresh install of R on a virtual desktop running Win 7 64 bit and
>>> when I try to install packages it is extremely slow.
>>>
>>> I typed
>>> install.packages("ggplot2",dependencies=TRUE)
>>>
>>> and it takes about 1 minute for the mirror select box to open. After that
>>> I
>>> waited about 20 minutes for the ggplot package and then cancelled it
>>> (smaller packages are quicker than that but still exceptionally slow).
>>>
>>> Not sure where to start as other programs work fine and the internet
>>> connection is fine apart from in R. I have pasted Sessioninfo below. Any
>>> help is very much appreciated.
>>>
>>> many thanks
>>> Aidan.
>>>
>>>   sessionInfo()
>>>>
>>> R version 3.1.0 (2014-04-10)
>>> Platform: x86_64-w64-mingw32/x64 (64-bit)
>>>
>>> locale:
>>> [1] LC_COLLATE=English_United Kingdom.1252
>>> [2] LC_CTYPE=English_United Kingdom.1252
>>> [3] LC_MONETARY=English_United Kingdom.1252
>>> [4] LC_NUMERIC=C
>>> [5] LC_TIME=English_United Kingdom.1252
>>>
>>> attached base packages:
>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/
>>> posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From andreas at maunz.de  Wed Jun 11 10:01:55 2014
From: andreas at maunz.de (Andreas Maunz)
Date: Wed, 11 Jun 2014 10:01:55 +0200
Subject: [R] aov + pairwise.t.test: only selected pairs
Message-ID: <CAJHOUEN9ZELcFiVc0fXvgWcuATW-bVRuWQYM4noiKHJz-My5zA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140611/83acbc5d/attachment.pl>

From Thierry.ONKELINX at inbo.be  Wed Jun 11 10:28:59 2014
From: Thierry.ONKELINX at inbo.be (ONKELINX, Thierry)
Date: Wed, 11 Jun 2014 08:28:59 +0000
Subject: [R] aov + pairwise.t.test: only selected pairs
In-Reply-To: <CAJHOUEN9ZELcFiVc0fXvgWcuATW-bVRuWQYM4noiKHJz-My5zA@mail.gmail.com>
References: <CAJHOUEN9ZELcFiVc0fXvgWcuATW-bVRuWQYM4noiKHJz-My5zA@mail.gmail.com>
Message-ID: <AA818EAD2576BC488B4F623941DA7427F3A7730D@inbomail.inbo.be>

Have a look at the multcomp package. The examples in glht() demonstrate how to specify the required contrasts.

Best regards,

ir. Thierry Onkelinx
Instituut voor natuur- en bosonderzoek / Research Institute for Nature and Forest
team Biometrie & Kwaliteitszorg / team Biometrics & Quality Assurance
Kliniekstraat 25
1070 Anderlecht
Belgium
+ 32 2 525 02 51
+ 32 54 43 61 85
Thierry.Onkelinx at inbo.be
www.inbo.be

To call in the statistician after the experiment is done may be no more than asking him to perform a post-mortem examination: he may be able to say what the experiment died of.
~ Sir Ronald Aylmer Fisher

The plural of anecdote is not data.
~ Roger Brinner

The combination of some data and an aching desire for an answer does not ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey


-----Oorspronkelijk bericht-----
Van: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] Namens Andreas Maunz
Verzonden: woensdag 11 juni 2014 10:02
Aan: r-help at r-project.org
Onderwerp: [R] aov + pairwise.t.test: only selected pairs

Hi,

I have a 1-way anova result and want to do a post test.

I want to do pairwise t-tests where the global variance is taken into account (i.e. a real post test on the anova result, not multiple simple t tests on the samples).

I understand I should use pairwise.t.test() for that. However, it does not allow me to select specific pairs, it always analyzes all pairs. How can I analyze specific pairs only?

Thanks
Andreas

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.
* * * * * * * * * * * * * D I S C L A I M E R * * * * * * * * * * * * *
Dit bericht en eventuele bijlagen geven enkel de visie van de schrijver weer en binden het INBO onder geen enkel beding, zolang dit bericht niet bevestigd is door een geldig ondertekend document.
The views expressed in this message and any annex are purely those of the writer and may not be regarded as stating an official position of INBO, as long as the message is not confirmed by a duly signed document.


From aidan.corcoran11 at gmail.com  Wed Jun 11 12:05:50 2014
From: aidan.corcoran11 at gmail.com (Aidan Corcoran)
Date: Wed, 11 Jun 2014 11:05:50 +0100
Subject: [R] r internet connection is very slow
In-Reply-To: <5397A632.4070300@statistik.tu-dortmund.de>
References: <CADv5Py42WKEmEK7wMiA3kSvGB+KSA9-2YHuVKrmWoxm7-+hE=Q@mail.gmail.com>
	<53970F14.6060901@statistik.tu-dortmund.de>
	<CADv5Py46dZa6UQds=DMKUJWodg0O7FfSkg+T=OAtEYerW7Rp7g@mail.gmail.com>
	<5397A632.4070300@statistik.tu-dortmund.de>
Message-ID: <CADv5Py5uTaZHNGjyKUmpDLraGY6vncARfKzv=LrnWju0tGCe_g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140611/6a3b80e5/attachment.pl>

From teepe24 at hotmail.com  Wed Jun 11 11:02:39 2014
From: teepe24 at hotmail.com (=?iso-8859-1?B?Q+lsaW5lIGI=?=)
Date: Wed, 11 Jun 2014 11:02:39 +0200
Subject: [R] Rgl: set trackball behavior
Message-ID: <DUB111-W56E898BEFBA1DC447D7B7EA82B0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140611/213aeb87/attachment.pl>

From smartpink111 at yahoo.com  Wed Jun 11 12:04:20 2014
From: smartpink111 at yahoo.com (arun)
Date: Wed, 11 Jun 2014 03:04:20 -0700 (PDT)
Subject: [R] Standard Deviation in R
In-Reply-To: <CAFEqCdzmHKG9_YcgYjVqzbBv03hRrayvaAM15s59NxpOSKEr1w@mail.gmail.com>
References: <1402211865.16504.YahooMailNeo@web142601.mail.bf1.yahoo.com>
	<CAFEqCdzmHKG9_YcgYjVqzbBv03hRrayvaAM15s59NxpOSKEr1w@mail.gmail.com>
Message-ID: <1402481060.18376.YahooMailNeo@web142601.mail.bf1.yahoo.com>

Hi Bob,
You may check:
library(multicon)
?popsd()

sd(1:3)
#[1] 1
?popsd(1:3)
#[1] 0.8164966
?sd(1:3)*sqrt(2/3)
#[1] 0.8164966
A.K.



The formula I generally use to compute the standard deviation is the square root of the variance where the variance is E(X^2) - (E(x))^2. That is, the divisor is n , not n-1. I think it would have been better if the R documentation would have explicitly told me that it was using n-1 not n. By the way, is there another standard function in R, that will compute either the variance or the standard deviation by dividing by n instead of n-1?

Thanks

Bob 




On Sunday, June 8, 2014 10:33 PM, Greg Snow <538280 at gmail.com> wrote:
Which formula for standard deviation are you using?

If you know the population mean then you should divide by n (3 in this
case), but if you don't know the population mean and use the mean
calculated from the sample then it is more usual to use n-1 as the
denominator (this makes the variance an unbiased estimator of the
population variance).? That is what the R sd function does since it is
much more common to use it on a sample rather than an entire
population.




On Sun, Jun 8, 2014 at 1:17 AM, arun <smartpink111 at yahoo.com> wrote:
> Hi,
> Please check this link:
> http://stats.stackexchange.com/questions/25956/what-formula-is-used-for-standard-deviation-in-r
>
> A.K.
>
>
> It is my understanding that the R function SD finds the standard deviation of a random variable or a list. Please consider the following list: { 1, 2, 3 }. I claim that the standard deviation of this list is not 1. However, the following R statement returns 1:
>? ? ? ? ? sd ( seq(1:3) )
> What am I missing?
>
> I thank the group in advance for their responses.
>
> Bob
>
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com


From njindian at gmail.com  Wed Jun 11 12:15:58 2014
From: njindian at gmail.com (Nitin Jain)
Date: Wed, 11 Jun 2014 18:15:58 +0800
Subject: [R] R function for Step-wise Panel Regression
Message-ID: <0d2401cf855e$25467bf0$6fd373d0$@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140611/fcf456ea/attachment.pl>

From murdoch.duncan at gmail.com  Wed Jun 11 13:43:53 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Wed, 11 Jun 2014 07:43:53 -0400
Subject: [R] Rgl: set trackball behavior
In-Reply-To: <DUB111-W56E898BEFBA1DC447D7B7EA82B0@phx.gbl>
References: <DUB111-W56E898BEFBA1DC447D7B7EA82B0@phx.gbl>
Message-ID: <539840F9.7000305@gmail.com>

On 11/06/2014, 5:02 AM, C?line b wrote:
> I would like to set  zoom mouse control in rgl in order to redraw the map with more or less details depending of the zoom coefficient (such as google maps or openstreetmap do).
> 
> I already tried the rgl.setMouseCallbacks(button, begin = NULL, update = NULL, end = NULL) function but this function do not seem to work with  trackball (only left, middle and right click).
> 
> Thus the question is :is it possible to modify trackball function using rgl ? 


When you say "trackball", do you mean the mouse wheel?  If so, the
answer is no, it can't be modified, but it does seem like it would be a
good idea. I'll add it to the to-do list.

Duncan Murdoch


From jrkrideau at inbox.com  Wed Jun 11 15:12:53 2014
From: jrkrideau at inbox.com (John Kane)
Date: Wed, 11 Jun 2014 05:12:53 -0800
Subject: [R] Recurrent analysis survival analysis data format question
In-Reply-To: <30411786F64EEF46856EFBA2CD9177992C2D12B8@UHEXMBSPR03.umhs.med.umich.edu>
References: <20140610063207.339dd890791@borg.pacgate.com>
Message-ID: <34AEED28A39.00000288jrkrideau@inbox.com>

Hi Chris,
 Why would you not consider the person at risk for re incarceration if he is currently imprisoned?

Symantically I'd agree, he or she is already behind bars.  But from the point of view of extra sentences it is quite possible to commit an offence while in prision and recieve another sequential sentence.  

We have a current case here where three people, already incarcerated, are just been charged with attempted murder.

John Kane
Kingston ON Canada


> -----Original Message-----
> From: chrisaa at med.umich.edu
> Sent: Tue, 10 Jun 2014 19:02:30 +0000
> To: bgreen at dyson.brisnet.org.au
> Subject: Re: [R] Recurrent analysis survival analysis data format
> question
> 
> I wouldn't consider the person at risk for re incarceration if he is
> currently imprisoned.  So I wouldn't use those intervals as part of the
> response variable.  Perhaps time in custody would be a covariate used to
> model the time until re incarceration.  One variable that is commonly
> needed for analysis of recurrent data is the number of previous events.
> It can be used to, e.g., stratify.
> 
> Chris
> 
> 
> -----Original Message-----
> From: Bob Green [mailto:bgreen at dyson.brisnet.org.au]
> Sent: Tuesday, June 10, 2014 2:32 AM
> To: r-help at r-project.org
> Subject: [R] Recurrent analysis survival analysis data format question
> 
> Hello,
> 
> I'm hoping for advice regarding how to set up a recurrent event
> survival analysis data file. My data consists of people released from
> custody, with survival time being measured as days before re
> imprisonment or end of the study. In the example below, id 5155 is
> released 5 times and jailed five times. All events are therefore
> true. Daysfree is the difference in days between release and return
> to custody.  Id 7155 is released 3 times and only re-imprisoned
> twice, so the third event value is false.
> 
> id <- c(5155, 5155,5155,5155, 7155, 7155,7155)
> Release <- c("29/10/10","9/01/11", "25/03/12", "15/10/13", "9/01/10",
> "16/12/12","29/10/13")
> JailNew <- c("1/12/10","01/12/11", "27/09/12", "24/01/14",
> "22/09/12","24/01/12","24/01/14")
> DaysFree <- c(24,234,134,74,709,29,64)
> Event <- c("true", "true", "true", "true", "true", "true", "false" )
> DF1<- data.frame(id,  Release, JailNew, DaysFree, Event)
> DF1
> 
>   After speaking to a statistician today I'm not sure if I my method
> of formatting the data is correct. Should all time intervals be
> included, not just the period from release to event/end of study
> period.  Currently period imprisoned is not counted.  For example,
> for id 5155, would I also include  1/12/10 - 9/01/11 etc, which would
> be FALSE for event and have a duration of 39 days; and then include
> all the other similar intervals as well. The statistican thought
> including this additional information more closely resembled the
> bladder1 data in the Survival package.
> 
> Any assistance is appreciated,
> 
> Regards
> 
> Bob
> 
> 
> **********************************************************
> Electronic Mail is not secure, may not be read every day, and should not
> be used for urgent or sensitive issues
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

____________________________________________________________
Publish your photos in seconds for FREE
TRY IM TOOLPACK at http://www.imtoolpack.com/default.aspx?rc=if4


From chrisaa at med.umich.edu  Wed Jun 11 15:24:28 2014
From: chrisaa at med.umich.edu (Andrews, Chris)
Date: Wed, 11 Jun 2014 13:24:28 +0000
Subject: [R] Recurrent analysis survival analysis data format question
In-Reply-To: <34AEED28A39.00000288jrkrideau@inbox.com>
References: <20140610063207.339dd890791@borg.pacgate.com>
	<34AEED28A39.00000288jrkrideau@inbox.com>
Message-ID: <30411786F64EEF46856EFBA2CD9177992C2D13B9@UHEXMBSPR03.umhs.med.umich.edu>

Hi John,
That must be in Canada, where everyone is a thug, unlike here in the US.  :-)

But seriously, you make a good point.  I guess it depends on what the event variable is: commission of a new crime, start of a new sentence, reincarceration after a period of freedom, etc. (and what data Bob has).  If a person is found guilty of two crimes (e.g. two robberies in a single spree) and the jail terms are to be served consecutively, is that one event or two?

Chris

-----Original Message-----
From: John Kane [mailto:jrkrideau at inbox.com] 
Sent: Wednesday, June 11, 2014 9:13 AM
To: Andrews, Chris; Bob Green
Cc: r-help at r-project.org
Subject: Re: [R] Recurrent analysis survival analysis data format question

Hi Chris,
 Why would you not consider the person at risk for re incarceration if he is currently imprisoned?

Symantically I'd agree, he or she is already behind bars.  But from the point of view of extra sentences it is quite possible to commit an offence while in prision and recieve another sequential sentence.  

We have a current case here where three people, already incarcerated, are just been charged with attempted murder.

John Kane
Kingston ON Canada


> -----Original Message-----
> From: chrisaa at med.umich.edu
> Sent: Tue, 10 Jun 2014 19:02:30 +0000
> To: bgreen at dyson.brisnet.org.au
> Subject: Re: [R] Recurrent analysis survival analysis data format
> question
> 
> I wouldn't consider the person at risk for re incarceration if he is
> currently imprisoned.  So I wouldn't use those intervals as part of the
> response variable.  Perhaps time in custody would be a covariate used to
> model the time until re incarceration.  One variable that is commonly
> needed for analysis of recurrent data is the number of previous events.
> It can be used to, e.g., stratify.
> 
> Chris
> 
> 
> -----Original Message-----
> From: Bob Green [mailto:bgreen at dyson.brisnet.org.au]
> Sent: Tuesday, June 10, 2014 2:32 AM
> To: r-help at r-project.org
> Subject: [R] Recurrent analysis survival analysis data format question
> 
> Hello,
> 
> I'm hoping for advice regarding how to set up a recurrent event
> survival analysis data file. My data consists of people released from
> custody, with survival time being measured as days before re
> imprisonment or end of the study. In the example below, id 5155 is
> released 5 times and jailed five times. All events are therefore
> true. Daysfree is the difference in days between release and return
> to custody.  Id 7155 is released 3 times and only re-imprisoned
> twice, so the third event value is false.
> 
> id <- c(5155, 5155,5155,5155, 7155, 7155,7155)
> Release <- c("29/10/10","9/01/11", "25/03/12", "15/10/13", "9/01/10",
> "16/12/12","29/10/13")
> JailNew <- c("1/12/10","01/12/11", "27/09/12", "24/01/14",
> "22/09/12","24/01/12","24/01/14")
> DaysFree <- c(24,234,134,74,709,29,64)
> Event <- c("true", "true", "true", "true", "true", "true", "false" )
> DF1<- data.frame(id,  Release, JailNew, DaysFree, Event)
> DF1
> 
>   After speaking to a statistician today I'm not sure if I my method
> of formatting the data is correct. Should all time intervals be
> included, not just the period from release to event/end of study
> period.  Currently period imprisoned is not counted.  For example,
> for id 5155, would I also include  1/12/10 - 9/01/11 etc, which would
> be FALSE for event and have a duration of 39 days; and then include
> all the other similar intervals as well. The statistican thought
> including this additional information more closely resembled the
> bladder1 data in the Survival package.
> 
> Any assistance is appreciated,
> 
> Regards
> 
> Bob
> 
> 
> **********************************************************
> Electronic Mail is not secure, may not be read every day, and should not
> be used for urgent or sensitive issues
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

____________________________________________________________
Publish your photos in seconds for FREE
TRY IM TOOLPACK at http://www.imtoolpack.com/default.aspx?rc=if4


**********************************************************
Electronic Mail is not secure, may not be read every day, and should not be used for urgent or sensitive issues 


From smartpink111 at yahoo.com  Wed Jun 11 16:19:56 2014
From: smartpink111 at yahoo.com (arun)
Date: Wed, 11 Jun 2014 07:19:56 -0700 (PDT)
Subject: [R] Pulling data based on the quater
Message-ID: <1402496396.63207.YahooMailNeo@web142604.mail.bf1.yahoo.com>

Hi,
Please Check ?as.yearqtr() fromlibrary(zoo) 

dat <- read.table(text="ID? Phase RESEARCH Area?? Date Result
100?? IV???????? S_Care A&P 7/23/2013 Positive
1001?? IV???????? P_Care EU 12/20/2012 Positive
2001?? IV???????? Car??????? AS 9/13/2012 Positive
20003?? III???????? Spec???? IN 10/6/2011 NA
2005??? IV???????? Speci?? TH 8/4/2011 NA
2006? III???????? Speci???? BN 7/13/2011 Positive
21345? II???????? Pri???? HY 2/3/2011 Positive",sep="",header=TRUE,stringsAsFactors=FALSE) 


library(zoo)
Qtr1 <- as.yearqtr(dat$Date, format="%m/%d/%Y")
dat[grep("Q3",Qtr1),]
#??? ID Phase RESEARCH Area????? Date?? Result
#1? 100??? IV?? S_Care? A&P 7/23/2013 Positive
#3 2001??? IV????? Car?? AS 9/13/2012 Positive
#5 2005??? IV??? Speci?? TH? 8/4/2011???? <NA>
#6 2006?? III??? Speci?? BN 7/13/2011 Positive
A.K.




Hi ,

I have a dataset as below,

ID? Phase RESEARCH Area?? Date Result
100?? IV???????? S_Care A&P 7/23/2013 Positive
1001?? IV???????? P_Care EU 12/20/2012 Positive
2001?? IV???????? Car??????? AS 9/13/2012 Positive
20003?? III???????? Spec???? IN 10/6/2011 NA
2005??? IV???????? Speci?? TH 8/4/2011 NA
2006? III???????? Speci???? BN 7/13/2011 Positive
21345? II???????? Pri???? HY 2/3/2011 Positive

I would like to pull data based on the Quarter, for example say if i want data for 3rd quarter based on the date column how do i do it.

I tried the lubridate package but was not able to get the required result.

can any one of you assist me on this.

Your help is very much appreciated. 



From smartpink111 at yahoo.com  Wed Jun 11 16:42:51 2014
From: smartpink111 at yahoo.com (arun)
Date: Wed, 11 Jun 2014 07:42:51 -0700 (PDT)
Subject: [R] rbind multiple data sets (.csv)
Message-ID: <1402497771.41429.YahooMailNeo@web142604.mail.bf1.yahoo.com>

Hi,
If your working directory is "data 3" which has only two folders C1 and C2.
May be this helps:

lsF1 <- list.files(recursive=TRUE)
lst1 <- lapply(split(lsF1,gsub(".*\\_(\\d+)\\..*","\\1",lsF1)),function(x) do.call(rbind,lapply(x,function(y) read.csv(y, header=TRUE))))

A.K.



Hello,
I am trying to rbind two data sets into one data set.But my two data sets are from different folders, which are C:\Users\yw12\Desktop\data 3\C1 and C:\Users\yw12\Desktop\data 3\C2. And each folder has 100 data sets. In the C1 folder, it has C1_1,C1_2,...,C1_100;in the C2 folder , it has C2_1,C2_2,...,C2_100.
I want to rbind C1_1 vs C2_1,C1_2, vs C2_2,....

All of data sets are .csv.
How can I do that ?
Than you


From lists at revelle.net  Wed Jun 11 17:44:57 2014
From: lists at revelle.net (William Revelle)
Date: Wed, 11 Jun 2014 10:44:57 -0500
Subject: [R] plot in package psych with function error.bars.by
In-Reply-To: <177721B3-887B-40EE-8A89-9EA39EE95A5D@revelle.net>
References: <1401776898895-4691632.post@n4.nabble.com>
	<107834395.A8ZI0oDvek@localhost.localdomain>
	<177721B3-887B-40EE-8A89-9EA39EE95A5D@revelle.net>
Message-ID: <C3066D7C-B838-4EDA-BCBE-E6B0F0433F3D@revelle.net>

Tham and Jim,

The Mac version of psych_1.4.6.11 is now on the personalty.project.org/r   server  repository.  The PC version  is at personality-project/r/src/contrib/  as a zip file:  psych_1.4.6.11.zip

For a Mac, just set your other repository to personalty.project.org/r and install the source version.  For a PC you need to ftp or http to personality-project/r/src/contrib/ to get the zip file.

This partially fixes the pch request from Tham.  (That is to say, you can set the first pch.  The others are just the sequence above that one.).

Let me know if you have problems.

Bill

 
On Jun 7, 2014, at 3:10 PM, William Revelle <lists at revelle.net> wrote:

> Tham and Jim,
>  As usual, my first response to this is when you find a problem with the psych package, write me (as author) as well as the R-help list.
> 
> In addition, always include which version of psych you are running.  That will help in the debugging.  The current version 1.4.5 on CRAN draws ?cats eyes? instead of error bars, unless you turn off that option.
> You might find that useful.
> 
> 
> Then, my comment to Tham,
> 
> Yes, you have found a weakness (some would say a bug) in that I currently default the base plot character to be 15. I will correct this in the next release (which won?t be shipped to CRAN until mid to late July).  In the interim, I will try to get a fix up on the personality-project.org/r  repository by early next week.
> 
> To Jim,  I can not get your error at all.  Tham was finding a problem with the basic example, which works, unless you try to specify the pch, which doesn?t work.
> 
> Bill
> 
> 
> 
> 
> 
> On Jun 3, 2014, at 4:10 PM, Jim Lemon <jim at bitwrit.com.au> wrote:
> 
>> On Mon, 2 Jun 2014 11:28:19 PM Tham Tran wrote:
>>> Hi,
>>> 
>>> I have a problem with the function "error.bars.by" in package 
>> "psych".
>>> This is the code for example of a graph:
>>> 
>>> 
>> keys.list=list(Agree=c(-1,2:5),Conscientious=c(6:8,-9,-10),Extraversion=c(-1
>>> 1,-12,13:15),Neuroticism=c(16:20),Openness = 
>> c(21,-22,23,24,-25))
>>> keys = make.keys(28,keys.list,item.labels=colnames(bfi))
>>> scores = score.items(keys,bfi,min=1,max=6)
>>> require(psych)
>>> error.bars.by(scores$scores,round(bfi$age/10)*10,by.var=TRUE,
>>> main="BFI age trends",legend=3,labels=colnames(scores$scores),
>>> xlab="Age",ylab="Mean item score")
>>> 
>>> I need to change the plotting character and line type of the graph 
>> according
>>> to the scores (Agree,Conscientious,Extraticism,Openness).
>>> 
>>> I have tried with:
>>> error.bars.by(scores$scores,round(bfi$age/10)*10,by.var=TRUE,
>>> main="BFI age trends",legend=3,labels=colnames(scores$scores),
>>> pch=c(1,2,3,4), lty=1
>>> ,xlab="Age",ylab="Mean item score")
>>> 
>>> But there is a problem:
>>> Error in localWindow(xlim, ylim, log, asp, ...) :  formal argument "pch"
>>> matched by multiple actual arguments
>>> 
>>> Anyone can help me for this problem.
>> 
>> Hi Tham,
>> When I run your example, I get the following error:
>> 
>> Error in seq.default(clim, -clim, 0.01) : 
>> 'from' cannot be NA, NaN or infinite
>> In addition: Warning messages:
>> 1: In qt(1 - alpha/2, group.stats[[g]]$n - 1) : NaNs produced
>> 2: In dt(ln, n - 1) : NaNs produced
>> 3: In qt(alpha/2, n - 1) : NaNs produced
>> 
>> As I don't know what is happening here, I can't do anything about the 
>> pch problem.
>> 
>> Jim
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>> 
> 
> William Revelle		           http://personality-project.org/revelle.html
> Professor			           http://personality-project.org
> Department of Psychology   http://www.wcas.northwestern.edu/psych/
> Northwestern University	   http://www.northwestern.edu/
> Use R for psychology             http://personality-project.org/r
> It is 5 minutes to midnight	   http://www.thebulletin.org
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

William Revelle		           http://personality-project.org/revelle.html
Professor			           http://personality-project.org
Department of Psychology   http://www.wcas.northwestern.edu/psych/
Northwestern University	   http://www.northwestern.edu/
Use R for psychology             http://personality-project.org/r
It is 5 minutes to midnight	   http://www.thebulletin.org


From bgreen at dyson.brisnet.org.au  Wed Jun 11 17:46:27 2014
From: bgreen at dyson.brisnet.org.au (bgreen at dyson.brisnet.org.au)
Date: Thu, 12 Jun 2014 01:46:27 +1000 (EST)
Subject: [R] Recurrent analysis survival analysis data format question
In-Reply-To: <30411786F64EEF46856EFBA2CD9177992C2D13B9@UHEXMBSPR03.umhs.med.umich.e
	du>
References: <20140610063207.339dd890791@borg.pacgate.com>
	<34AEED28A39.00000288jrkrideau@inbox.com>
	<30411786F64EEF46856EFBA2CD9177992C2D13B9@UHEXMBSPR03.umhs.med.umich.edu>
Message-ID: <49433.12.203.195.114.1402501587.squirrel@12.203.195.114>

Hello Chris,

Thanks. This is not as straight forward as it seems.

Given an index release date, I have dates of prior and subsequent
imprisonment, offending that results in re-incarceration and hospital
admission dates, pre and post.

There are some additional complexities, such as people released from
custody straight to a psychiatric hospital, and transfers the other way,
which can inflate the recidivism rates.

Regards

Bob


> Hi John,
> That must be in Canada, where everyone is a thug, unlike here in the US.
> :-)
>
> But seriously, you make a good point.  I guess it depends on what the
> event variable is: commission of a new crime, start of a new sentence,
> reincarceration after a period of freedom, etc. (and what data Bob has).
> If a person is found guilty of two crimes (e.g. two robberies in a single
> spree) and the jail terms are to be served consecutively, is that one
> event or two?
>
> Chris
>
> -----Original Message-----
> From: John Kane [mailto:jrkrideau at inbox.com]
> Sent: Wednesday, June 11, 2014 9:13 AM
> To: Andrews, Chris; Bob Green
> Cc: r-help at r-project.org
> Subject: Re: [R] Recurrent analysis survival analysis data format question
>
> Hi Chris,
>  Why would you not consider the person at risk for re incarceration if he
> is currently imprisoned?
>
> Symantically I'd agree, he or she is already behind bars.  But from the
> point of view of extra sentences it is quite possible to commit an offence
> while in prision and recieve another sequential sentence.
>
> We have a current case here where three people, already incarcerated, are
> just been charged with attempted murder.
>
> John Kane
> Kingston ON Canada
>
>
>> -----Original Message-----
>> From: chrisaa at med.umich.edu
>> Sent: Tue, 10 Jun 2014 19:02:30 +0000
>> To: bgreen at dyson.brisnet.org.au
>> Subject: Re: [R] Recurrent analysis survival analysis data format
>> question
>>
>> I wouldn't consider the person at risk for re incarceration if he is
>> currently imprisoned.  So I wouldn't use those intervals as part of the
>> response variable.  Perhaps time in custody would be a covariate used to
>> model the time until re incarceration.  One variable that is commonly
>> needed for analysis of recurrent data is the number of previous events.
>> It can be used to, e.g., stratify.
>>
>> Chris
>>
>>
>> -----Original Message-----
>> From: Bob Green [mailto:bgreen at dyson.brisnet.org.au]
>> Sent: Tuesday, June 10, 2014 2:32 AM
>> To: r-help at r-project.org
>> Subject: [R] Recurrent analysis survival analysis data format question
>>
>> Hello,
>>
>> I'm hoping for advice regarding how to set up a recurrent event
>> survival analysis data file. My data consists of people released from
>> custody, with survival time being measured as days before re
>> imprisonment or end of the study. In the example below, id 5155 is
>> released 5 times and jailed five times. All events are therefore
>> true. Daysfree is the difference in days between release and return
>> to custody.  Id 7155 is released 3 times and only re-imprisoned
>> twice, so the third event value is false.
>>
>> id <- c(5155, 5155,5155,5155, 7155, 7155,7155)
>> Release <- c("29/10/10","9/01/11", "25/03/12", "15/10/13", "9/01/10",
>> "16/12/12","29/10/13")
>> JailNew <- c("1/12/10","01/12/11", "27/09/12", "24/01/14",
>> "22/09/12","24/01/12","24/01/14")
>> DaysFree <- c(24,234,134,74,709,29,64)
>> Event <- c("true", "true", "true", "true", "true", "true", "false" )
>> DF1<- data.frame(id,  Release, JailNew, DaysFree, Event)
>> DF1
>>
>>   After speaking to a statistician today I'm not sure if I my method
>> of formatting the data is correct. Should all time intervals be
>> included, not just the period from release to event/end of study
>> period.  Currently period imprisoned is not counted.  For example,
>> for id 5155, would I also include  1/12/10 - 9/01/11 etc, which would
>> be FALSE for event and have a duration of 39 days; and then include
>> all the other similar intervals as well. The statistican thought
>> including this additional information more closely resembled the
>> bladder1 data in the Survival package.
>>
>> Any assistance is appreciated,
>>
>> Regards
>>
>> Bob
>>
>>
>> **********************************************************
>> Electronic Mail is not secure, may not be read every day, and should not
>> be used for urgent or sensitive issues
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
> ____________________________________________________________
> Publish your photos in seconds for FREE
> TRY IM TOOLPACK at http://www.imtoolpack.com/default.aspx?rc=if4
>
>
> **********************************************************
> Electronic Mail is not secure, may not be read every day, and should not
> be used for urgent or sensitive issues
>
>


From 538280 at gmail.com  Wed Jun 11 21:05:10 2014
From: 538280 at gmail.com (Greg Snow)
Date: Wed, 11 Jun 2014 13:05:10 -0600
Subject: [R] Standard Deviation in R
In-Reply-To: <1402481060.18376.YahooMailNeo@web142601.mail.bf1.yahoo.com>
References: <1402211865.16504.YahooMailNeo@web142601.mail.bf1.yahoo.com>
	<CAFEqCdzmHKG9_YcgYjVqzbBv03hRrayvaAM15s59NxpOSKEr1w@mail.gmail.com>
	<1402481060.18376.YahooMailNeo@web142601.mail.bf1.yahoo.com>
Message-ID: <CAFEqCdyVCwu5k9pShc+fNgK_ob5FsUk=LqRi6f=Dmm0P1sRw6w@mail.gmail.com>

The help page ?sd (I only checked version 3.1.0) has as the 1st
sentence in the details section: "Like ?var? this uses denominator n -
1." and on the help page ?var in the details section (though down in
the 3rd paragraph from the end) there is this sentence: "The
denominator n - 1 is used which gives an unbiased estimator of the
(co)variance for i.i.d. observations."

How can the R documentation state it more explicitly than that?


On Wed, Jun 11, 2014 at 4:04 AM, arun <smartpink111 at yahoo.com> wrote:
> Hi Bob,
> You may check:
> library(multicon)
> ?popsd()
>
> sd(1:3)
> #[1] 1
>  popsd(1:3)
> #[1] 0.8164966
>  sd(1:3)*sqrt(2/3)
> #[1] 0.8164966
> A.K.
>
>
>
> The formula I generally use to compute the standard deviation is the square root of the variance where the variance is E(X^2) - (E(x))^2. That is, the divisor is n , not n-1. I think it would have been better if the R documentation would have explicitly told me that it was using n-1 not n. By the way, is there another standard function in R, that will compute either the variance or the standard deviation by dividing by n instead of n-1?
>
> Thanks
>
> Bob
>
>
>
>
> On Sunday, June 8, 2014 10:33 PM, Greg Snow <538280 at gmail.com> wrote:
> Which formula for standard deviation are you using?
>
> If you know the population mean then you should divide by n (3 in this
> case), but if you don't know the population mean and use the mean
> calculated from the sample then it is more usual to use n-1 as the
> denominator (this makes the variance an unbiased estimator of the
> population variance).  That is what the R sd function does since it is
> much more common to use it on a sample rather than an entire
> population.
>
>
>
>
> On Sun, Jun 8, 2014 at 1:17 AM, arun <smartpink111 at yahoo.com> wrote:
>> Hi,
>> Please check this link:
>> http://stats.stackexchange.com/questions/25956/what-formula-is-used-for-standard-deviation-in-r
>>
>> A.K.
>>
>>
>> It is my understanding that the R function SD finds the standard deviation of a random variable or a list. Please consider the following list: { 1, 2, 3 }. I claim that the standard deviation of this list is not 1. However, the following R statement returns 1:
>>          sd ( seq(1:3) )
>> What am I missing?
>>
>> I thank the group in advance for their responses.
>>
>> Bob
>>
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>
>
> --
> Gregory (Greg) L. Snow Ph.D.
> 538280 at gmail.com



-- 
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com


From el.samuels at csi.cuny.edu  Wed Jun 11 22:02:55 2014
From: el.samuels at csi.cuny.edu (El Samuels, Ph.D.)
Date: Wed, 11 Jun 2014 16:02:55 -0400
Subject: [R] Help using Rwinsteps
Message-ID: <CAPbPsZaY8N5kyEPdqh3y7e3yRnmeCS=HtQw1taq2PFNngogbTA@mail.gmail.com>

Does anyone have experience using Rwinsteps?

I think my issue could be resolved simply by someone with experience
using it guiding me on it.

Falling back to understand it through simple examples, I used the
example code on page 12 of the manual
(http://cran.r-project.org/web/packages/Rwinsteps/Rwinsteps.pdf) to
submit the folllowing:

# Simulate scores for 15 items and 100 people
set.seed(82911)
b <- seq(-3, 3, length = 15)
theta <- rnorm(100, 1)
rmat <- data.frame(ifelse(rirf(b, theta)$p > runif(1500), 1, 0))
# Item and person labels
colnames(rmat) <- paste("i", 1:15, sep = "")
rmat$name <- paste("p", 1:100, sep = "")
# Create a command file object
cmd <- wcmd(title = "R2Winsteps Example", data = "example.dat",
item1 = 1, ni = 15, name1 = 16, namelen = 5,
labels = paste("i", 1:15, sep = ""), hlines = "Y")
# Write the data to file
write.wdat(rmat, cmd)
# Run Winsteps, with default filenames, not saving the
# command file or other output to file
out <- winsteps(cmd, windir = "~/winsteps/Winsteps.exe")

Which returns this error:

Error in varcheck(x, c("entry", "measure")) :
  Missing or misnamed variables:entry, measure

There's some jag in the function, but I'm not sure what or how to
troubleshoot/overcome it.

Thank you in advance!

El


-----------
W. Ellery Samuels, Ph.D.
College of Staten Island
The City University of New York
Bldg. 3S - Rm. 207A
2800 Victory Boulevard
Staten Island, New York 10314-6609
(o) 718-982-4130
(f) 718-982-3743
http://wesamuels.net

Please consider more ecologically-friendly alternatives before
printing this email.

CONFIDENTIALITY NOTICE: This e-mail, including any attac...{{dropped:9}}


From aurore.desgroux at rennes.inra.fr  Wed Jun 11 12:19:05 2014
From: aurore.desgroux at rennes.inra.fr (adesgroux)
Date: Wed, 11 Jun 2014 03:19:05 -0700 (PDT)
Subject: [R] Error clmm(){ordinal}
In-Reply-To: <CAG_uk92Oo1ZZaHStd+Dy8KpTnQBVN8JqC922Mc1nXDkMh3io9g@mail.gmail.com>
References: <1401710397402-4691592.post@n4.nabble.com>
	<1401866317088-4691693.post@n4.nabble.com>
	<CAG_uk92Oo1ZZaHStd+Dy8KpTnQBVN8JqC922Mc1nXDkMh3io9g@mail.gmail.com>
Message-ID: <1402481945992-4691969.post@n4.nabble.com>

Dear Rune,

Thanks for your script using drop1()! It worked well! Now I know I have
significant effects for my predictors.

Best regards
Aurore



--
View this message in context: http://r.789695.n4.nabble.com/Error-clmm-ordinal-tp4691592p4691969.html
Sent from the R help mailing list archive at Nabble.com.


From leonardsquall15 at hotmail.com  Wed Jun 11 14:17:02 2014
From: leonardsquall15 at hotmail.com (Pat-74100)
Date: Wed, 11 Jun 2014 12:17:02 +0000
Subject: [R] Average value in a particular range of a matrix
Message-ID: <DUB111-W114C17869BD4EBACE75917EA22B0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140611/1cc086f8/attachment.pl>

From eugene.dedits at gmail.com  Wed Jun 11 22:53:25 2014
From: eugene.dedits at gmail.com (eugene)
Date: Wed, 11 Jun 2014 16:53:25 -0400
Subject: [R] install.packages problem with R 3.1.0 on a multiuser linux
	system
Message-ID: <53C4FBAB-2B3E-4774-85CC-6830D3EB7AEE@gmail.com>

Hello R users. 


I have a problem with R installation on one of my systems: install.packages returns 
different errors. Here is an example: 

*********************************************************************
~# /share/apps/r/3.1.0/bin/R

R version 3.1.0 (2014-04-10) -- "Spring Dance"
Copyright (C) 2014 The R Foundation for Statistical Computing
Platform: x86_64-unknown-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> install.packages('animation')
Warning in install.packages("animation") :
  'lib = "/share/apps/r/3.1.0/lib64/R/library"' is not writable
Would you like to use a personal library instead?  (y/n) y
Would you like to create a personal library
~/R/x86_64-unknown-linux-gnu-library/3.1
to install packages into?  (y/n) y
--- Please select a CRAN mirror for use in this session ---
CRAN mirror
????..
?.. list of mirrors ??
???..
89: USA (PA 2)                   90: USA (TN)
91: USA (TX 1)                   92: USA (WA 1)
93: USA (WA 2)                   94: Venezuela
95: Vietnam

Selection: 89
trying URL 'http://cran.mirrors.hoobly.com/src/contrib/animation_2.2.tar.gz'
Content type 'application/x-gzip' length 321316 bytes (313 Kb)
opened URL
==================================================
downloaded 313 Kb

* installing *source* package ?animation? ...
** package ?animation? successfully unpacked and MD5 sums checked
** R
** data
*** moving datasets to lazyload DB
Error in load(zfile, envir = envir) : empty (zero-byte) input file
ERROR: lazydata failed for package ?animation?
* removing ?/home/user.name/R/x86_64-unknown-linux-gnu-library/3.1/animation?

The downloaded source packages are in
	?/tmp/RtmpP4ug6j/downloaded_packages?
Warning message:
In install.packages("animation") :
  installation of package ?animation? had non-zero exit status
*********************************************************************


If I try to install different package, I get different error:
*********************************************************************
> install.packages('car')
Installing package into ?/home/user.name/R/x86_64-unknown-linux-gnu-library/3.1?
(as ?lib? is unspecified)
trying URL 'http://cran.mirrors.hoobly.com/src/contrib/car_2.0-20.tar.gz'
Content type 'application/x-gzip' length 582567 bytes (568 Kb)
opened URL
==================================================
downloaded 568 Kb

* installing *source* package ?car? ...
** package ?car? successfully unpacked and MD5 sums checked
** R
** data
*** moving datasets to lazyload DB
Error in readRDS(pfile) : error reading from connection
ERROR: lazydata failed for package ?car?
* removing ?/home/user.name/R/x86_64-unknown-linux-gnu-library/3.1/car?

The downloaded source packages are in
	?/tmp/RtmpP4ug6j/downloaded_packages?
Warning message:
In install.packages("car") :
  installation of package ?car? had non-zero exit status
*********************************************************************

The most weird part: as another user on the same system I can install all these packages 
without any problems. 

So it looks like there is something about user environment that breaks install.packages. 


I would appreciate any help with this issue. 


Thanks,
E. 


From r.turner at auckland.ac.nz  Thu Jun 12 06:02:43 2014
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Thu, 12 Jun 2014 16:02:43 +1200
Subject: [R] Average value in a particular range of a matrix
In-Reply-To: <DUB111-W114C17869BD4EBACE75917EA22B0@phx.gbl>
References: <DUB111-W114C17869BD4EBACE75917EA22B0@phx.gbl>
Message-ID: <53992663.2040000@auckland.ac.nz>

On 12/06/14 00:17, Pat-74100 wrote:
> Hi
>
> I have a matrix with values of size 1*500  i have to find the avg
> value of first 1 to 100 ,avg value of 100 - 200 and so on up to 400-500.
>   is there any function to find the average of 1 -100 and 100 - 200, 200 -
>   300,300 - 400,400 - 500 ??

This looks very much like homework.  The r-help list has a "no homework" 
policy.  Do your own homework.  That way you might actually learn something!

cheers,

Rolf Turner


From d.stanley at cqu.edu.au  Thu Jun 12 06:21:53 2014
From: d.stanley at cqu.edu.au (Dragana Stanley)
Date: Thu, 12 Jun 2014 14:21:53 +1000
Subject: [R] multiple groups anova
Message-ID: <5433FF3844BEB84BA4321707B2F83A6513E94198A2@CQUMAIL.staff.ad.cqu.edu.au>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140612/0cc5e5c4/attachment.pl>

From olivier.crouzet at univ-nantes.fr  Thu Jun 12 09:10:52 2014
From: olivier.crouzet at univ-nantes.fr (Olivier Crouzet)
Date: Thu, 12 Jun 2014 07:10:52 +0000
Subject: [R] multiple groups anova
In-Reply-To: <5433FF3844BEB84BA4321707B2F83A6513E94198A2@CQUMAIL.staff.ad.cqu.edu.au>
References: <5433FF3844BEB84BA4321707B2F83A6513E94198A2@CQUMAIL.staff.ad.cqu.edu.au>
Message-ID: <2011560229-1402557053-cardhu_decombobulator_blackberry.rim.net-794903760-@b3.c6.bise7.blackberry>

Hi Stanley,

You need to convert your dataframe (it's'not a matrix obviously) to a "long format". Each measurement will then be a single line within this "table".

Each column will then be viewed as a single statistical variable. Then you will learn to apply relevant anovas on such data.

Essentially, you need to read an introduction to R.

Olivier.

--
Olivier Crouzet
LLING - Laboratoire de Linguistique de Nantes - EA3827
Universit? de Nantes

-----Original Message-----
From: Dragana Stanley <d.stanley at cqu.edu.au>
Sender: r-help-bounces at r-project.orgDate: Thu, 12 Jun 2014 14:21:53 
To: r-help at r-project.org<r-help at r-project.org>
Subject: [R] multiple groups anova

Hi All

I have a matrix on which I want to do ANOVA between different Groups. My matrix looks something like this

Sample      Group        Mes1          Mes2          Mes3
sample1    Group1      10     0       5
sample2    Group1      2       0       1
sample3    Group1      2       0       1
sample4    Group1      2       0       3
sample5    Group2      6       2       1
sample6    Group2      10     1       0
sample7    Group2      4       0       10
sample8    Group2      7       0       2
sample9    Group3      7       5       2
sample10  Group3      0       4       2
sample11  Group3      3       0       6
sample12  Group3      4       0       5


where Mes1-Mes100 columns are numerous measurements (like for example different genes or sequence counts) taken on each sample

Is there simple way to do anova between different groups and effect size measure (ie summary)

Thanks



	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

From p_connolly at slingshot.co.nz  Thu Jun 12 11:01:20 2014
From: p_connolly at slingshot.co.nz (Patrick Connolly)
Date: Thu, 12 Jun 2014 21:01:20 +1200
Subject: [R] Trellis devices and pointize
In-Reply-To: <5395634F.9080105@stats.ox.ac.uk>
References: <20140609065424.GD4710@slingshot.co.nz>
	<5395634F.9080105@stats.ox.ac.uk>
Message-ID: <20140612090120.GE4710@slingshot.co.nz>

On Mon, 09-Jun-2014 at 08:33AM +0100, Prof Brian Ripley wrote:

|> The issue here is not trellis.device.
|> 
|> You are using lattice plots (without mentioning lattice), which are
|> based on package 'grid' and so using the grid sub-system of a
|> device. That sub-system does not use the 'pointsize' of the device
|> as its initial font size.  So you need to use
|> 
|> grid::gpar(fontsize = 28)
|> 
|> If I call that after opening the device I get what I guess you expected.

I don't see it making any difference at all.  At one time I supposed that some clever inner
workings rescaled everything to something more sensible for a plotting
region that size, but that is not the case.

>   trellis.device(device = pdf, file = "Singers.pdf", height = 160/25.4,
+                  width = 160/25.4)

> grid::get.gpar()$fontsize
[1] 12
> grid::gpar(fontsize = 8)
$fontsize
[1] 8

> grid::get.gpar()$fontsize
[1] 12
>   

Evidently I missed something somewhere.  Grid graphics is sometimes a
bit too subtle for me.  I know gpar() doesn't work exactly analogously
to the way par() works.  I can't find any examples in Paul's "R
Graphics" book or Deepayan's "Lattice" book (but that might just be
lack of searching skills).

Then I tried putting it in the call to print.trellis:

  print(pik, plot.args = grid::gpar(fontsize = 8))

and in the bwplot() call similar to the way I'd done in panel functions
with an argument called gp but I get no error message or any
difference in my resulting plot.

I know I can fiddle with trellis.par.get() and trellis.par.set() but
that's a bit long-winded when it's so simple to do in base graphics.

TA

|> 
|> 
|> On 09/06/2014 07:54, Patrick Connolly wrote:
|> >How is the pointsize set in trellis.devices?
|> >
|> >>From my reading of the trellis.device help file, I understood that the
|> >pointsize arg would be referenced to the call to the pdf function.
|> >
|> >So I set up a trellis pdf device as so:
|> >
|> >   trellis.device(device = pdf, file = "Singers.pdf", height = 160/25.4,
|> >                  width = 160/25.4, pointsize = 28)
|> >
|> >A base R graphics plot works as I'd expected.
|> >
|> >   plot(1:10, 50:59) # silly plot with huge plotting characters and letters
|> >
|> >However, pointsize is ignored in trellis plots;
|> >
|> >   pik <- bwplot(voice.part ~ height, data = singer)# pointsize ignored
|> >   print(pik)
|> >   dev.off()
|> >
|> >There are many trellis cex-type settings, but FWIU they're all
|> >relative to the default size.  My question is: How do I set that
|> >default?
|> >
|> >
|> >R version 3.0.2 (2013-09-25)
|> >Platform: i686-pc-linux-gnu (32-bit)
|> >
|> >locale:
|> >  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
|> >  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
|> >  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
|> >  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
|> >  [9] LC_ADDRESS=C               LC_TELEPHONE=C
|> >[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
|> >
|> >attached base packages:
|> >[1] grDevices utils     stats     graphics  methods   base
|> >
|> >other attached packages:
|> >[1] RColorBrewer_1.0-5 lattice_0.20-24
|> >
|> >loaded via a namespace (and not attached):
|> >[1] grid_3.0.2  plyr_1.8    tools_3.0.2
|> >
|> >I've tried with R-3.1.0 on another machine so I don't think the
|> >problem is with an old version.
|> >
|> >I doubt it has much to do with pdf specifically.  Attempts to use png,
|> >bitmap, postscript devices all produce equivalent results.
|> >
|> >
|> >
|> >(Here's all the example code uninterrupted:)
|> >
|> >   trellis.device(device = pdf, file = "Singers.pdf", height = 160/25.4,
|> >                  width = 160/25.4, pointsize = 28)
|> >   plot(1:10, 50:59) # silly plot with huge plotting characters and letters
|> >   pik <- bwplot(voice.part ~ height, data = singer)# pointsize ignored
|> >   print(pik)
|> >   dev.off()
|> >
|> >
|> >TIA
|> >
|> >
|> 
|> 
|> -- 
|> Brian D. Ripley,                  ripley at stats.ox.ac.uk
|> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
|> University of Oxford,             Tel:  +44 1865 272861 (self)
|> 1 South Parks Road,                     +44 1865 272866 (PA)
|> Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-- 
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.   
   ___    Patrick Connolly   
 {~._.~}                   Great minds discuss ideas    
 _( Y )_  	         Average minds discuss events 
(:_~*~_:)                  Small minds discuss people  
 (_)-(_)  	                      ..... Eleanor Roosevelt
	  
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.


From S.Ellison at LGCGroup.com  Thu Jun 12 12:18:08 2014
From: S.Ellison at LGCGroup.com (S Ellison)
Date: Thu, 12 Jun 2014 11:18:08 +0100
Subject: [R] Standard Deviation in R
In-Reply-To: <CAFEqCdyVCwu5k9pShc+fNgK_ob5FsUk=LqRi6f=Dmm0P1sRw6w@mail.gmail.com>
References: <1402211865.16504.YahooMailNeo@web142601.mail.bf1.yahoo.com>
	<CAFEqCdzmHKG9_YcgYjVqzbBv03hRrayvaAM15s59NxpOSKEr1w@mail.gmail.com>
	<1402481060.18376.YahooMailNeo@web142601.mail.bf1.yahoo.com>
	<CAFEqCdyVCwu5k9pShc+fNgK_ob5FsUk=LqRi6f=Dmm0P1sRw6w@mail.gmail.com>
Message-ID: <A4E5A0B016B8CB41A485FC629B633CED5E9DBE36BD@GOLD.corp.lgc-group.com>

> > The formula I generally use to compute the standard deviation is the
> square root of the variance where the variance is E(X^2) - (E(x))^2. 

Even if that is what you want, I hope you don't _implement_ it that way (eg as mean(x^2)-mean(x)^2.  _Serious_ numerical rounding issues...

#Example: 
set.seed(1023)
x<-rnorm(200, 1e9)
# Compare 
199*var(x)/200 #"Population" variance

#with
mean(x^2)-mean(x)^2

#Other seeds give differently wrong numbers.
#See  FAQ 7.31 for why

S Ellison



*******************************************************************
This email and any attachments are confidential. Any use, copying or
disclosure other than by the intended recipient is unauthorised. If 
you have received this message in error, please notify the sender 
immediately via +44(0)20 8943 7000 or notify postmaster at lgcgroup.com 
and delete this message and any copies from your computer and network. 
LGC Limited. Registered in England 2991879. 
Registered office: Queens Road, Teddington, Middlesex, TW11 0LY, UK

From lmramba at ufl.edu  Thu Jun 12 12:35:16 2014
From: lmramba at ufl.edu (Laz)
Date: Thu, 12 Jun 2014 06:35:16 -0400
Subject: [R] help in writing an R-function for Residual correlated structures
Message-ID: <53998264.6050301@ufl.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140612/415d6703/attachment.pl>

From jhernandezcabrera at gmail.com  Thu Jun 12 12:49:19 2014
From: jhernandezcabrera at gmail.com (Juan Andres Hernandez)
Date: Thu, 12 Jun 2014 11:49:19 +0100
Subject: [R] How to print something in the same location in console?
Message-ID: <CAL79i+SCHH3ZvMFvDMd3vedqmo1ZQ15e8Ar-JQ9E1fGadjNzWA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: no disponible
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140612/6284747e/attachment.pl>

From jorgeivanvelez at gmail.com  Thu Jun 12 13:04:39 2014
From: jorgeivanvelez at gmail.com (Jorge I Velez)
Date: Thu, 12 Jun 2014 21:04:39 +1000
Subject: [R] How to print something in the same location in console?
In-Reply-To: <CAL79i+SCHH3ZvMFvDMd3vedqmo1ZQ15e8Ar-JQ9E1fGadjNzWA@mail.gmail.com>
References: <CAL79i+SCHH3ZvMFvDMd3vedqmo1ZQ15e8Ar-JQ9E1fGadjNzWA@mail.gmail.com>
Message-ID: <CAKL8G3EQFC8ngzLSK1y=PCN5ES4M0KfBZUEwMOEkACpbo1j0tQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140612/c0ed0b27/attachment.pl>

From Thierry.ONKELINX at inbo.be  Thu Jun 12 13:53:47 2014
From: Thierry.ONKELINX at inbo.be (ONKELINX, Thierry)
Date: Thu, 12 Jun 2014 11:53:47 +0000
Subject: [R] help in writing an R-function for Residual correlated
 structures
In-Reply-To: <53998264.6050301@ufl.edu>
References: <53998264.6050301@ufl.edu>
Message-ID: <AA818EAD2576BC488B4F623941DA7427F3A78851@inbomail.inbo.be>

R works faster if you can avoid loops the loops. There is an example. Note that it required global variables (like your function). You better avoid that.

rspat <- function(rhox, rhoy, s2e = 1){
  require(matlab)
  R <- s2e * eye(N)
  i <- rep(seq_len(N), each = N)
  j <- rep(seq_len(N), N)
  j <- j[j > 1]
  R[cbind(i, j)] <- s2e*(rhox^abs(x[j] - x[i]))*(rhoy^abs(y[j] - y[i])) # Core AR(1)*AR(1)
  R[cbind(j, i)] <- R[cbind(i, j)]
  IR <- ginv(R) # use the Penrose Generalized inverse
  IR
}


ir. Thierry Onkelinx
Instituut voor natuur- en bosonderzoek / Research Institute for Nature and Forest
team Biometrie & Kwaliteitszorg / team Biometrics & Quality Assurance
Kliniekstraat 25
1070 Anderlecht
Belgium
+ 32 2 525 02 51
+ 32 54 43 61 85
Thierry.Onkelinx at inbo.be
www.inbo.be

To call in the statistician after the experiment is done may be no more than asking him to perform a post-mortem examination: he may be able to say what the experiment died of.
~ Sir Ronald Aylmer Fisher

The plural of anecdote is not data.
~ Roger Brinner

The combination of some data and an aching desire for an answer does not ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey


-----Oorspronkelijk bericht-----
Van: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] Namens Laz
Verzonden: donderdag 12 juni 2014 12:35
Aan: r-help at r-project.org
Onderwerp: [R] help in writing an R-function for Residual correlated structures

Hi R users,

I need to write a function that considers the row and column autoregressive residual correlation structures. Usually R=sigma^2_e*Identity matrix of order n, where n is the number of observations and sigma^2_e is the usual residual error. I have to consider an AR1 * AR1 where * stands for the Kronecker product. The formula  is R=sigma^2_e times Vc(phi_c) * Vr(phi_r) where
* is Kronecker product as explained above, Vc(phi_c) is the AR1 correlated structure (matrix) on the columns (y coordinate) of order n*n and Vc(phi_r) is the AR1 correlated structure (matrix) on the rows (x
coordinate) of order n*n with phi_r and phi_c denoting  the spatial correlation value in the AR1 structure.

For example. If I have a field experimental design called des1 with x and y coordinates given, number of blocks and the genotypes applied to each of these blocks:

des1
   x y block genotypes
1 1 1     1         4
2 2 1     1         3
3 1 2     1         1
4 2 2     1         2
5 3 1     2         4
6 4 1     2         2
7 3 2     2         3
8 4 2     2         1

If I  assume that sigma^2_e =1, phi_c=phi_r = 0.1, then the Residual structure should be

[,1]     [,2]     [,3]     [,4]     [,5]     [,6]     [,7]     [,8]
[1,]  1.02030 -0.10203 -0.10203  0.01020  0.00000  0.00000  0.00000  0.00000 [2,] -0.10203  1.03051  0.01020 -0.10305 -0.10203  0.00000  0.01020  0.00000 [3,] -0.10203  0.01020  1.02030 -0.10203  0.00000  0.00000  0.00000  0.00000 [4,]  0.01020 -0.10305 -0.10203  1.03051  0.01020  0.00000 -0.10203  0.00000 [5,]  0.00000 -0.10203  0.00000  0.01020  1.03051 -0.10203 -0.10305  0.01020 [6,]  0.00000  0.00000  0.00000  0.00000 -0.10203  1.02030  0.01020 -0.10203 [7,]  0.00000  0.01020  0.00000 -0.10203 -0.10305  0.01020  1.03051 -0.10203 [8,]  0.00000  0.00000  0.00000  0.00000  0.01020 -0.10203 -0.10203  1.02030


I wrote an R function which works well and takes a second or less to give me the above matrix. However, it takes too long time (about 30 minutes) when I have very large dataset (e.g. with n=5000 observations).
Here is the code I wrote.

# An R function to calculate R and R_inverse from spatial data
rspat<-function(rhox,rhoy,s2e=1)
{
require matlab
   R<-s2e*eye(N) # library(matlab required)
   for(i in 1:N) {
     for (j in i:N){
       y1<-y[i]
       y2<-y[j]
       x1<-x[i]
       x2<-x[j]
       R[i,j]<-s2e*(rhox^abs(x2-x1))*(rhoy^abs(y2-y1)) # Core AR(1)*AR(1)
       R[j,i]<-R[i,j]
     }
   }
   IR<-ginv(R) # use the Penrose Generalized inverse
   IR
}

Is there an existing/in built R code that does the same in a more efficient and faster than my code?

Thanks

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.
* * * * * * * * * * * * * D I S C L A I M E R * * * * * * * * * * * * *
Dit bericht en eventuele bijlagen geven enkel de visie van de schrijver weer en binden het INBO onder geen enkel beding, zolang dit bericht niet bevestigd is door een geldig ondertekend document.
The views expressed in this message and any annex are purely those of the writer and may not be regarded as stating an official position of INBO, as long as the message is not confirmed by a duly signed document.


From jrkrideau at inbox.com  Thu Jun 12 16:00:52 2014
From: jrkrideau at inbox.com (John Kane)
Date: Thu, 12 Jun 2014 06:00:52 -0800
Subject: [R] Average value in a particular range of a matrix
In-Reply-To: <DUB111-W114C17869BD4EBACE75917EA22B0@phx.gbl>
Message-ID: <41ACD309875.000002B9jrkrideau@inbox.com>

?mean

You need to read tutorial or two, particularly with reference to indexing.

The CRAN site has any number of useful papers and books that you can download.

John Kane
Kingston ON Canada


> -----Original Message-----
> From: leonardsquall15 at hotmail.com
> Sent: Wed, 11 Jun 2014 12:17:02 +0000
> To: r-help at r-project.org
> Subject: [R] Average value in a particular range of a matrix
> 
> Hi
> 
> I have a matrix with values of size 1*500  i have to find the avg
> value of first 1 to 100 ,avg value of 100 - 200 and so on up to 400-500.
>  is there any function to find the average of 1 -100 and 100 - 200, 200 -
>  300,300 - 400,400 - 500 ??
> 
> Thanks
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

____________________________________________________________
FREE 3D MARINE AQUARIUM SCREENSAVER - Watch dolphins, sharks & orcas on your desktop!


From luca.cerone at gmail.com  Thu Jun 12 17:06:25 2014
From: luca.cerone at gmail.com (Luca Cerone)
Date: Thu, 12 Jun 2014 17:06:25 +0200
Subject: [R] Add points to subplots
Message-ID: <CAFnz2-9Ljo6y2LM_BUvGosYtyt2yZ0Bjx9K93PifNySgC6djKA@mail.gmail.com>

Dear all,
I am running some analysis using the pamr package (available on CRAN).

One of the plots I produce is made using the function "pamr.plotcv".
This displays two plots in the same figure (using par(mfrow=c(2,1)).

When the figure is created, I would like to be able to add some points
and lines, to the top plot.

After producing the plot with pamr.cvplot, I have tried to add a line
doing something like:

par(mfg=c(1,1))
lines(c(3,3), c(0,1), col = "blue", lty = 3)

However this doesn't work and the line is shown in the bottom plot.
How can I add points and lines to the top plot?

Thanks a lot in advance for the help,

Cheers,
Luca


From jim.silverton at gmail.com  Thu Jun 12 17:21:35 2014
From: jim.silverton at gmail.com (Jim Silverton)
Date: Thu, 12 Jun 2014 11:21:35 -0400
Subject: [R] Block Recursion and Structural Vector Autoregressions
Message-ID: <CAGPwjHy9RA=NH365UFot55Vy0+C4op6RDj5wCDXi73Tb9uJ3Sg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140612/29f44b8f/attachment.pl>

From sibylle.stoeckli at gmx.ch  Thu Jun 12 17:58:51 2014
From: sibylle.stoeckli at gmx.ch (=?iso-8859-1?Q?Sibylle_St=F6ckli?=)
Date: Thu, 12 Jun 2014 17:58:51 +0200
Subject: [R] Vegan pca and cor
Message-ID: <CBB07E59-F86A-4FA4-911E-090C927C9BB4@gmx.ch>

Dear R colleagues,

I applied a pca to 130 farms (sites) and 25 variables (species) using the R package vegan. Besides analyzing the variation explained by the different pca axes and the variables the pca axis are correlated with, I am also interested to analyze the correlation between the variables (e.g. groups within the pca biplot).

I used rda(variables, scale=TRUE), so the angles between the variables and/or the pca axis represent their correlation (pearson correlation coefficient, loadings). pca output offers the scores to analyze the correlation between variables and pca axis. For the correlation between the variables I used cor (variables, method="pearson"). I expected that these correlation coefficient would be similar to the angles between the variables in the pca biplot. Indeed for most of the cases it is true, but why are there some evident differences? Is there a possibility to directly extract the correlation coefficients between the variables from the pca biplot?

Thanks a lot
Sibylle


From motyocska at yahoo.com  Thu Jun 12 18:37:48 2014
From: motyocska at yahoo.com (Andras Farkas)
Date: Thu, 12 Jun 2014 09:37:48 -0700 (PDT)
Subject: [R] help with apply and nleqslv
Message-ID: <1402591068.34169.YahooMailNeo@web161604.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140612/5a49f966/attachment.pl>

From aurore.desgroux at rennes.inra.fr  Thu Jun 12 11:24:11 2014
From: aurore.desgroux at rennes.inra.fr (adesgroux)
Date: Thu, 12 Jun 2014 02:24:11 -0700 (PDT)
Subject: [R] Error clmm(){ordinal}
In-Reply-To: <1402481945992-4691969.post@n4.nabble.com>
References: <1401710397402-4691592.post@n4.nabble.com>
	<1401866317088-4691693.post@n4.nabble.com>
	<CAG_uk92Oo1ZZaHStd+Dy8KpTnQBVN8JqC922Mc1nXDkMh3io9g@mail.gmail.com>
	<1402481945992-4691969.post@n4.nabble.com>
Message-ID: <1402565051056-4692001.post@n4.nabble.com>

Dear all,

I want now to class my lines (Line) regarding to the model ceated with
drop1()

I installes packages lsmeans, multcompView, ordinal and RVAideMemoire which
permit together to analyse data from clmm model.

I ran the following script and had an error. I could find nothing about it
on the internet... Any idea?

> LSM=lsmeans(Modele,"Line",contr="cld")
Error in V %*% x : non-conformable arguments
 
Summary of Modele : 
________________
Cumulative Link Mixed Model fitted with the Laplace approximation

formula: 
RRI ~ Line + RRI_DHW1 + RRI_DHW2 + (1 | Year) + Location + (1 |  
    Not) + (1 | Bloc) + (1 | Plante)
data:    Tab.INRCh

 link  threshold nobs 
 logit flexible  40820
 logLik    AIC     
 -38927.36 78266.72
 niter          max.grad
 133765(422327) 9.73e-03

Random effects:
 Groups Name        Variance
 Plante (Intercept) 1.29253 
 Year   (Intercept) 0.84251 
 Bloc   (Intercept) 0.08741 
 Not    (Intercept) 0.09812 
 Std.Dev.
 1.1369  
 0.9179  
 0.2957  
 0.3132  
Number of groups:  Plante 15,  Year 4,  Bloc 3,  Not 3 

Coefficients:
    LineA002     LineA003 
    0.214753     3.161216 
    ...
    LineMR25     LineMR26 
    1.724986    -0.739813 
  RRI_DHW1.L   RRI_DHW1.Q 
    3.939464     0.473873 
  RRI_DHW1.C   RRI_DHW1^4 
    0.294406    -0.493893 
  RRI_DHW1^5   RRI_DHW2.L 
   -0.132295     4.112967 
  RRI_DHW2.Q   RRI_DHW2.C 
    1.095455     0.787843 
  RRI_DHW2^4   RRI_DHW2^5 
   -0.092328    -0.012149 
LocationRiec 
   -0.902709 

Thresholds:
    5|4     4|3     3|2 
-6.5232 -2.6175 -0.2349 
    2|1     1|0 
 2.7375  9.4322 
(26500 observations deleted due to missingness)
________________

Thanks
Best regards
Aurore



--
View this message in context: http://r.789695.n4.nabble.com/Error-clmm-ordinal-tp4691592p4692001.html
Sent from the R help mailing list archive at Nabble.com.


From leonardsquall15 at hotmail.com  Thu Jun 12 14:11:44 2014
From: leonardsquall15 at hotmail.com (Pat-74100)
Date: Thu, 12 Jun 2014 12:11:44 +0000
Subject: [R] Average value in a particular range of a matrix
In-Reply-To: <1402563866.14161.YahooMailNeo@web142602.mail.bf1.yahoo.com>
References: <DUB111-W114C17869BD4EBACE75917EA22B0@phx.gbl>,
	<1402563866.14161.YahooMailNeo@web142602.mail.bf1.yahoo.com>
Message-ID: <DUB111-W42BC97C66253F5730A7F1EA22A0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140612/a44d4180/attachment.pl>

From smartpink111 at yahoo.com  Thu Jun 12 14:29:59 2014
From: smartpink111 at yahoo.com (arun)
Date: Thu, 12 Jun 2014 05:29:59 -0700 (PDT)
Subject: [R] Average value in a particular range of a matrix
In-Reply-To: <DUB111-W42BC97C66253F5730A7F1EA22A0@phx.gbl>
References: <DUB111-W114C17869BD4EBACE75917EA22B0@phx.gbl>,
	<1402563866.14161.YahooMailNeo@web142602.mail.bf1.yahoo.com>
	<DUB111-W42BC97C66253F5730A7F1EA22A0@phx.gbl>
Message-ID: <1402576199.44246.YahooMailNeo@web142605.mail.bf1.yahoo.com>

Hi,
Try:

set.seed(45)
mat1 <- matrix(rnorm(500), ncol=1)
?n <- dim(mat1)[1]
indx <- as.numeric(gl(n,100,n))
?tapply(mat1[,1], indx, FUN= mean, na.rm=TRUE)
#????????? 1?????????? 2?????????? 3?????????? 4?????????? 5 
# 0.08118335 -0.05222418 -0.20042223 -0.03530833 -0.06093053 

If you have more than one column:
set.seed(49)
?dat1 <- as.data.frame(matrix(rnorm(1000), ncol=2))
library(plyr)
ddply(dat1,.(indx), numcolwise(mean, na.rm=TRUE))

A.K.





On Thursday, June 12, 2014 8:11 AM, Pat-74100 <leonardsquall15 at hotmail.com> wrote:




Hi

@Rolf Turner: So you're wrong, I can guaranty you this is not homework ... but just for a graph I'm trying do plot.

@Arun: Yes I've done a mistake, it is 1-100 , 101-200 etc .. or even 1-50,51-100 etc. The range is not important.

Thanks



> Date: Thu, 12 Jun 2014 02:04:26 -0700
> From: smartpink111 at yahoo.com
> Subject: Re: [R] Average value in a particular range of a matrix
> To: leonardsquall15 at hotmail.com
> 
> Hi Pat,
> Is it 1-100, 101-200, 201-300,.. or just the way you described?
> A.K.
> 
> 
> 
> 
> On Wednesday, June 11, 2014 11:45 PM, Pat-74100 <leonardsquall15 at hotmail.com> wrote:
> Hi
> 
> I have a matrix with values of size 1*500? i have to find the avg 
> value of first 1 to 100 ,avg value of 100 - 200 and so on up to 400-500.
> is there any function to find the average of 1 -100 and 100 - 200, 200 -
> 300,300 - 400,400 - 500 ??
> 
> Thanks
> ??? ???????? ?????? ??? ? 
> ??? [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From cnyinyi at vols.utk.edu  Thu Jun 12 17:34:08 2014
From: cnyinyi at vols.utk.edu (Chatcher)
Date: Thu, 12 Jun 2014 08:34:08 -0700 (PDT)
Subject: [R] Experiment Design
Message-ID: <1402587248193-4692015.post@n4.nabble.com>

Good Morning,
I would like help with code that creates a RBD experiment. That is I have 18
treatments and I will need three blocks. I cannot seem to find an easy way
to do this in R.
I think it is a relatively easy thing to do but i tried Agricolae and seem
to be getting so "lost" I cannot even get started.

Thanks.



--
View this message in context: http://r.789695.n4.nabble.com/Experiment-Design-tp4692015.html
Sent from the R help mailing list archive at Nabble.com.


From jholtman at gmail.com  Thu Jun 12 19:04:20 2014
From: jholtman at gmail.com (jim holtman)
Date: Thu, 12 Jun 2014 13:04:20 -0400
Subject: [R] How to print something in the same location in console?
In-Reply-To: <CAKL8G3EQFC8ngzLSK1y=PCN5ES4M0KfBZUEwMOEkACpbo1j0tQ@mail.gmail.com>
References: <CAL79i+SCHH3ZvMFvDMd3vedqmo1ZQ15e8Ar-JQ9E1fGadjNzWA@mail.gmail.com>
	<CAKL8G3EQFC8ngzLSK1y=PCN5ES4M0KfBZUEwMOEkACpbo1j0tQ@mail.gmail.com>
Message-ID: <CAAxdm-6Tv4R8jjwKLF53JxbzcEHFyQsQahFhY_cB_86d8=_+Hg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140612/d28ee35e/attachment.pl>

From kate.ignatius at gmail.com  Thu Jun 12 19:16:46 2014
From: kate.ignatius at gmail.com (Kate Ignatius)
Date: Thu, 12 Jun 2014 13:16:46 -0400
Subject: [R] Using reduce to merge multiple files
Message-ID: <CAE6QMsafnyTdWtUH0QqF03w=_pLVwmbGnO6qq_vE4A2yNx4_XA@mail.gmail.com>

I have a list of files that I have called like so:

main_dir <- '/path/to/files/'
directories <- list.files(main_dir, pattern = '[[:alnum:]]', full.names=T)

filenames <- list.files(file.path(directories,"/tmpdir/"),  pattern =
'[[:alnum:][:punct:]]_eat.txt+$', recursive = TRUE, full.names=T)

This lists around 35 Files.  Each has multiple columns but they all
have three columns in common: Burger, Stall and Cost which I want to
merge on using:

m1 <- Reduce(function(a, b) { merge(a, b,
by=c("Burger",Stall","Cost")) }, filenames)

However, I get the error:

Error in fix.by(by.x, x) : 'by' must specify uniquely valid columns

Is there something that I have obviously overlooked here?

Thanks in advance!


From sarah.goslee at gmail.com  Thu Jun 12 19:59:31 2014
From: sarah.goslee at gmail.com (Sarah Goslee)
Date: Thu, 12 Jun 2014 13:59:31 -0400
Subject: [R] Experiment Design
In-Reply-To: <1402587248193-4692015.post@n4.nabble.com>
References: <1402587248193-4692015.post@n4.nabble.com>
Message-ID: <CAM_vjuko-ecTUb1Cc+QOsoY3yKPZ9+rqqAe5qTjbD7G5mtT0Jw@mail.gmail.com>

Sorry, try this again.

Does this help:

http://www2.warwick.ac.uk/fac/sci/moac/degrees/moac/ch923/lectures/moac_-_designing_experiments_in_r.pdf

If not, we need some more specifics about what you've tried and where
you are running into problems.

Sarah


On Thu, Jun 12, 2014 at 11:34 AM, Chatcher <cnyinyi at vols.utk.edu> wrote:
> Good Morning,
> I would like help with code that creates a RBD experiment. That is I have 18
> treatments and I will need three blocks. I cannot seem to find an easy way
> to do this in R.
> I think it is a relatively easy thing to do but i tried Agricolae and seem
> to be getting so "lost" I cannot even get started.
>
> Thanks.
>
>
-- 
Sarah Goslee
http://www.sarahgoslee.com
http://www.functionaldiversity.org


From Stephen.Bond at cibc.com  Thu Jun 12 21:22:07 2014
From: Stephen.Bond at cibc.com (Bond, Stephen)
Date: Thu, 12 Jun 2014 19:22:07 +0000
Subject: [R] Rscript fails where Rterm works
Message-ID: <624EC9773CAB044ABA65327271BED9B60535AED7@CBMCC-X10-MA01.ad.cibc.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140612/8b0d6ef9/attachment.pl>

From jdnewmil at dcn.davis.CA.us  Thu Jun 12 21:46:31 2014
From: jdnewmil at dcn.davis.CA.us (Jeff Newmiller)
Date: Thu, 12 Jun 2014 13:46:31 -0600
Subject: [R] Rscript fails where Rterm works
In-Reply-To: <624EC9773CAB044ABA65327271BED9B60535AED7@CBMCC-X10-MA01.ad.cibc.com>
References: <624EC9773CAB044ABA65327271BED9B60535AED7@CBMCC-X10-MA01.ad.cibc.com>
Message-ID: <518c6c94-969d-492f-9ebd-c1d947632200@email.android.com>

You seem to be using different versions of R for these two trials.
---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                      Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
--------------------------------------------------------------------------- 
Sent from my phone. Please excuse my brevity.

On June 12, 2014 1:22:07 PM MDT, "Bond, Stephen" <Stephen.Bond at cibc.com> wrote:
>I have a script which loads
>
>library(XLConnect)
>wb <- loadWorkbook("wbname")
>
>the code works without errors when run from ESS which uses
>R version 3.0.1 (2013-05-16) -- "Good Sport"
>Copyright (C) 2013 The R Foundation for Statistical Computing
>Platform: i386-w64-mingw32/i386 (32-bit)
>
>But fails when run from Rscript
>which Rscript
>C:\Program Files\R\R-3.0.1\bin\i386\Rscript.EXE
>
>Rscript updatevols.R
>
>Warning message:
>package 'RODBC' was built under R version 3.0.2
>XLConnect 0.2-7 by Mirai Solutions GmbH
>http://www.mirai-solutions.com ,
>http://miraisolutions.wordpress.com
>Warning message:
>package 'XLConnect' was built under R version 3.0.3
>Error in .jfield(x, "Ljava/lang/Class;", "TYPE") :
>  could not find function "getClass"
>Calls: loadWorkbook ... ._java_class_list -> lapply -> FUN -> .jfield
>-> .Call
>Execution halted
>Warning message:
>closing unused RODBC handle 1
>
>Any clues?
>
>Stephen B
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From h.wickham at gmail.com  Thu Jun 12 23:18:28 2014
From: h.wickham at gmail.com (Hadley Wickham)
Date: Thu, 12 Jun 2014 16:18:28 -0500
Subject: [R] Rscript fails where Rterm works
In-Reply-To: <624EC9773CAB044ABA65327271BED9B60535AED7@CBMCC-X10-MA01.ad.cibc.com>
References: <624EC9773CAB044ABA65327271BED9B60535AED7@CBMCC-X10-MA01.ad.cibc.com>
Message-ID: <CABdHhvGcgygnbQ0HP-24gfjm9hQvHPWYjBEMoHhkyJVZQSrzow@mail.gmail.com>

Explicitly load the methods package: library(methods)

Hadley

On Thu, Jun 12, 2014 at 2:22 PM, Bond, Stephen <Stephen.Bond at cibc.com> wrote:
> I have a script which loads
>
> library(XLConnect)
> wb <- loadWorkbook("wbname")
>
> the code works without errors when run from ESS which uses
> R version 3.0.1 (2013-05-16) -- "Good Sport"
> Copyright (C) 2013 The R Foundation for Statistical Computing
> Platform: i386-w64-mingw32/i386 (32-bit)
>
> But fails when run from Rscript
> which Rscript
> C:\Program Files\R\R-3.0.1\bin\i386\Rscript.EXE
>
> Rscript updatevols.R
>
> Warning message:
> package 'RODBC' was built under R version 3.0.2
> XLConnect 0.2-7 by Mirai Solutions GmbH
> http://www.mirai-solutions.com ,
> http://miraisolutions.wordpress.com
> Warning message:
> package 'XLConnect' was built under R version 3.0.3
> Error in .jfield(x, "Ljava/lang/Class;", "TYPE") :
>   could not find function "getClass"
> Calls: loadWorkbook ... ._java_class_list -> lapply -> FUN -> .jfield -> .Call
> Execution halted
> Warning message:
> closing unused RODBC handle 1
>
> Any clues?
>
> Stephen B
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
http://had.co.nz/


From hb at biostat.ucsf.edu  Fri Jun 13 02:13:29 2014
From: hb at biostat.ucsf.edu (Henrik Bengtsson)
Date: Thu, 12 Jun 2014 17:13:29 -0700
Subject: [R] Using reduce to merge multiple files
In-Reply-To: <CAE6QMsafnyTdWtUH0QqF03w=_pLVwmbGnO6qq_vE4A2yNx4_XA@mail.gmail.com>
References: <CAE6QMsafnyTdWtUH0QqF03w=_pLVwmbGnO6qq_vE4A2yNx4_XA@mail.gmail.com>
Message-ID: <CAFDcVCSa3dZ+t==KmnjTqFaRYB04oCMN4uExWPFkCbeOJGxLNg@mail.gmail.com>

On Thu, Jun 12, 2014 at 10:16 AM, Kate Ignatius <kate.ignatius at gmail.com> wrote:
> I have a list of files that I have called like so:
>
> main_dir <- '/path/to/files/'
> directories <- list.files(main_dir, pattern = '[[:alnum:]]', full.names=T)
>
> filenames <- list.files(file.path(directories,"/tmpdir/"),  pattern =
> '[[:alnum:][:punct:]]_eat.txt+$', recursive = TRUE, full.names=T)
>
> This lists around 35 Files.  Each has multiple columns but they all
> have three columns in common: Burger, Stall and Cost which I want to
> merge on using:
>
> m1 <- Reduce(function(a, b) { merge(a, b,
> by=c("Burger",Stall","Cost")) }, filenames)
>
> However, I get the error:
>
> Error in fix.by(by.x, x) : 'by' must specify uniquely valid columns
>
> Is there something that I have obviously overlooked here?

You're forgetting to read the data, i.e. you need to call read.table()
before merging.

Here's an alternative (that does the same internally):

library("R.filesets")
m1 <- readDataFrame(filenames, colClasses=c("(Burger|Stall|Cost)"=NA))

If you know what data types the different column hold, then you can
guide R to the same faster and more memory efficient, e.g.

m1 <- readDataFrame(filenames, colClasses=c("(Burger|Stall)"="factor",
"Cost"="double"))

/Henrik


>
> Thanks in advance!
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From dwinsemius at comcast.net  Fri Jun 13 03:02:26 2014
From: dwinsemius at comcast.net (David Winsemius)
Date: Thu, 12 Jun 2014 18:02:26 -0700
Subject: [R] Average value in a particular range of a matrix
In-Reply-To: <DUB111-W42BC97C66253F5730A7F1EA22A0@phx.gbl>
References: <DUB111-W114C17869BD4EBACE75917EA22B0@phx.gbl>,
	<1402563866.14161.YahooMailNeo@web142602.mail.bf1.yahoo.com>
	<DUB111-W42BC97C66253F5730A7F1EA22A0@phx.gbl>
Message-ID: <DA95A8A0-D47D-40CF-AFA0-CEAB0F1FC6C8@comcast.net>


On Jun 12, 2014, at 5:11 AM, Pat-74100 wrote:

> 
> Hi
> 
> @Rolf Turner: So you're wrong, I can guaranty you this is not homework ... but just for a graph I'm trying do plot.
> 
> @Arun: Yes I've done a mistake, it is 1-100 , 101-200 etc .. or even 1-50,51-100 etc. The range is not important.
> 

In that case,  something along the lines of :

  sapply( seq(1, maxval, by=50), function (x) mean( some_object[x:(x+49)] ) )

Pretty basic. The advice to read more basic tutorials and play around with the common loop idioms on their help page examples might be worth your effort.

-- 
david.



> Thanks
> 
> 
>> Date: Thu, 12 Jun 2014 02:04:26 -0700
>> From: smartpink111 at yahoo.com
>> Subject: Re: [R] Average value in a particular range of a matrix
>> To: leonardsquall15 at hotmail.com
>> 
>> Hi Pat,
>> Is it 1-100, 101-200, 201-300,.. or just the way you described?
>> A.K.
>> 
>> 
>> 
>> 
>> On Wednesday, June 11, 2014 11:45 PM, Pat-74100 <leonardsquall15 at hotmail.com> wrote:
>> Hi
>> 
>> I have a matrix with values of size 1*500  i have to find the avg 
>> value of first 1 to 100 ,avg value of 100 - 200 and so on up to 400-500.
>> is there any function to find the average of 1 -100 and 100 - 200, 200 -
>> 300,300 - 400,400 - 500 ??
>> 
>> Thanks


David Winsemius
Alameda, CA, USA


From dwinsemius at comcast.net  Fri Jun 13 03:12:32 2014
From: dwinsemius at comcast.net (David Winsemius)
Date: Thu, 12 Jun 2014 18:12:32 -0700
Subject: [R] Add points to subplots
In-Reply-To: <CAFnz2-9Ljo6y2LM_BUvGosYtyt2yZ0Bjx9K93PifNySgC6djKA@mail.gmail.com>
References: <CAFnz2-9Ljo6y2LM_BUvGosYtyt2yZ0Bjx9K93PifNySgC6djKA@mail.gmail.com>
Message-ID: <296D24F9-67F5-4534-932B-8891B7200672@comcast.net>


On Jun 12, 2014, at 8:06 AM, Luca Cerone wrote:

> Dear all,
> I am running some analysis using the pamr package (available on CRAN).
> 
> One of the plots I produce is made using the function "pamr.plotcv".
> This displays two plots in the same figure (using par(mfrow=c(2,1)).
> 
> When the figure is created, I would like to be able to add some points
> and lines, to the top plot.
> 
> After producing the plot with pamr.cvplot, I have tried to add a line
> doing something like:
> 
> par(mfg=c(1,1))
> lines(c(3,3), c(0,1), col = "blue", lty = 3)
> 
> However this doesn't work and the line is shown in the bottom plot.
> How can I add points and lines to the top plot?

I think you would be better off hacking the code and inserting your desired annotations before the focus is moved to the second region. There are split screen methods that allow changing focus for base graphics, but I'm not aware of ones that use the par() controls.

-- 

David Winsemius
Alameda, CA, USA


From denis.haine at gmail.com  Thu Jun 12 20:31:58 2014
From: denis.haine at gmail.com (Denis Haine)
Date: Thu, 12 Jun 2014 14:31:58 -0400
Subject: [R] Experiment Design
In-Reply-To: <CAM_vjuko-ecTUb1Cc+QOsoY3yKPZ9+rqqAe5qTjbD7G5mtT0Jw@mail.gmail.com>
References: <1402587248193-4692015.post@n4.nabble.com>
	<CAM_vjuko-ecTUb1Cc+QOsoY3yKPZ9+rqqAe5qTjbD7G5mtT0Jw@mail.gmail.com>
Message-ID: <CAO1JZaORsY+x1EArqE_Z0By0oaVoXT05tVCk-Uby92O8AxsELw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140612/6be07e76/attachment.pl>

From cnyinyi at vols.utk.edu  Thu Jun 12 22:17:59 2014
From: cnyinyi at vols.utk.edu (Chatcher)
Date: Thu, 12 Jun 2014 13:17:59 -0700 (PDT)
Subject: [R] Experiment Design
In-Reply-To: <CAM_vjuko-ecTUb1Cc+QOsoY3yKPZ9+rqqAe5qTjbD7G5mtT0Jw@mail.gmail.com>
References: <1402587248193-4692015.post@n4.nabble.com>
	<CAM_vjuko-ecTUb1Cc+QOsoY3yKPZ9+rqqAe5qTjbD7G5mtT0Jw@mail.gmail.com>
Message-ID: <1402604279200-4692028.post@n4.nabble.com>

Thanks for the comments.
I think i phrased my question incorrectly but the following gave me what I
wanted. 18 treatments(plants) , 3 blocks, a total of 54 plots. I could not
figure out exac

> library(agricolae)
> trt<-
> c("1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18")
> design.rcbd(trt, 3, serie = 2, seed = 0, kinds = "Super-Duper",
> first=TRUE)
$parameters
$parameters$design
[1] "rcbd"

$parameters$trt
 [1] "1"  "2"  "3"  "4"  "5"  "6"  "7"  "8"  "9"  "10" "11" "12" "13" "14"
"15" "16" "17"
[18] "18"

$parameters$r
[1] 3

$parameters$serie
[1] 2

$parameters$seed
[1] 942260715

$parameters$kinds
[1] "Super-Duper"


$book
   plots block trt
1    101     1   3
2    102     1  17
3    103     1   4
4    104     1  18
5    105     1   6
6    106     1   5
7    107     1   9
8    108     1   2
9    109     1  16
10   110     1  10
11   111     1   8
12   112     1   7
13   113     1  13
14   114     1  12
15   115     1  11
16   116     1   1
17   117     1  14
18   118     1  15
19   201     2  13
20   202     2   6
21   203     2  18
22   204     2  10
23   205     2   4
24   206     2   3
25   207     2   8
26   208     2  14
27   209     2  16
28   210     2   5
29   211     2  15
30   212     2   7
31   213     2  12
32   214     2   2
33   215     2   1
34   216     2  17
35   217     2  11
36   218     2   9
37   301     3  10
38   302     3   4
39   303     3   2
40   304     3   8
41   305     3   5
42   306     3   7
43   307     3  16
44   308     3  15
45   309     3  13
46   310     3   1
47   311     3  12
48   312     3  18
49   313     3   6
50   314     3  14
51   315     3  11
52   316     3   3
53   317     3  17
54   318     3   9

> 




--
View this message in context: http://r.789695.n4.nabble.com/Experiment-Design-tp4692015p4692028.html
Sent from the R help mailing list archive at Nabble.com.


From matthewnewland at gauge.com.au  Fri Jun 13 04:47:04 2014
From: matthewnewland at gauge.com.au (MKN)
Date: Thu, 12 Jun 2014 19:47:04 -0700 (PDT)
Subject: [R] no x label using axis.Date
Message-ID: <1402627624926-4692034.post@n4.nabble.com>

I have tried multiple different methods to figure out how to get a date axis
of my preference (start date of each month). Any assistance would be
appreciated.
The below section is not producing a date axis:

plot(totaldays$totaldays,totaldays$y,type="n",ylim=c(0,Emax),xaxt="n")
*xlabels<-(strptime(totaldays$totaldays,"%Y-%m-%d",tz=""))
xlabels<-xlabels[xlabels$mday==1]
axis.Date(1,at=xlabels,format="%b-%Y")*

The above section is used in the following plot:

par(mfrow=c(4,1))
par(mar=c(0.8,0,0,0))
par(oma=c(2,4.5,3,2))

plot(totaldays$totaldays,totaldays$y,type="n",ylim=c(0,Dmax),xaxt="n")
points(D$date,D$TSP,col=Dcol,type="p",pch=16,lwd=2,xaxt="n")
text(mdate,Dmax-20,labels="DM1'",cex=1)
legend("topright",pch=16,cex=0.8,col=colLegend,
       legend=ALegend)
abline(h=Target,col="red",lwd=2)

plot(totaldays$totaldays,totaldays$y,type="n",ylim=c(0,Bmax),xaxt="n")
points(B$date,B$TSP,col=Bcol,type="p",pch=16,lwd=2,xaxt="n")
text(mdate,Bmax-20,labels="DM2",cex=1)
abline(h=Target,col="red",lwd=2)

plot(totaldays$totaldays,totaldays$y,type="n",ylim=c(0,Amax),xaxt="n")
points(A$date,A$TSP,col=Acol,type="p",pch=16,lwd=2,xaxt="n")
text(mdate,Amax-20,labels="DM3",cex=1)
abline(h=Target,col="red",lwd=2)

plot(totaldays$totaldays,totaldays$y,type="n",ylim=c(0,Emax),xaxt="n")
*xlabels<-(strptime(totaldays$totaldays,"%Y-%m-%d",tz=""))
xlabels<-xlabels[xlabels$mday==1]
axis.Date(1,at=xlabels,format="%b-%Y")*
points(E$date,E$TSP,col=Ecol,type="p",pch=16,lwd=2)
text(mdate,Emax-20,labels="DM4'",cex=1)
abline(h=Target,col="red",lwd=2)

title(main=Amain, ylab=Labely,
      outer=TRUE,cex.lab=1, cex.main=1.5)

Below is an excerpt of the total days data:

	totaldays	        y
1	2013-11-01	1
2	2013-11-02	1
3	2013-11-03	1
4	2013-11-04	1
5	2013-11-05	1
6	2013-11-06	1
7	2013-11-07	1
8	2013-11-08	1
9	2013-11-09	1
10	2013-11-10	1




--
View this message in context: http://r.789695.n4.nabble.com/no-x-label-using-axis-Date-tp4692034.html
Sent from the R help mailing list archive at Nabble.com.


From parimallokhande at gmail.com  Fri Jun 13 05:25:48 2014
From: parimallokhande at gmail.com (Parimal Lokhande)
Date: Fri, 13 Jun 2014 08:55:48 +0530
Subject: [R] Extracting data from density plots
Message-ID: <CABkSJE5hwQkuRzjzDPh=0dnLsSdKrmr9395bAqRgjMa69BLSRA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140613/a0ce05af/attachment.pl>

From ferra.xu at yahoo.com  Thu Jun 12 21:55:35 2014
From: ferra.xu at yahoo.com (Ferra Xu)
Date: Thu, 12 Jun 2014 12:55:35 -0700 (PDT)
Subject: [R] Simulating spatio-temporal marked ETAS point process
Message-ID: <1402602935.54308.YahooMailNeo@web125101.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140612/9d05a2db/attachment.pl>

From kridox at ymail.com  Fri Jun 13 11:50:59 2014
From: kridox at ymail.com (Pascal Oettli)
Date: Fri, 13 Jun 2014 18:50:59 +0900
Subject: [R] barp {plotrix} Start bars at 0 with a vector of positive values
Message-ID: <CAAcyNCznu3wZ=2hv1-5VuRQM7YOoM7SisvJHTFiXsPBkHWrBZA@mail.gmail.com>

Dear list,

Please consider the following example:

library(plotrix)
barp(c(2,3,4,5,6,7,8), ylim=c(-10,10))

How to force the bars to start at 0? I could not find the way to do it.

Regards,
Pascal


From luca.cerone at gmail.com  Fri Jun 13 12:02:34 2014
From: luca.cerone at gmail.com (Luca Cerone)
Date: Fri, 13 Jun 2014 12:02:34 +0200
Subject: [R] Add points to subplots
In-Reply-To: <296D24F9-67F5-4534-932B-8891B7200672@comcast.net>
References: <CAFnz2-9Ljo6y2LM_BUvGosYtyt2yZ0Bjx9K93PifNySgC6djKA@mail.gmail.com>
	<296D24F9-67F5-4534-932B-8891B7200672@comcast.net>
Message-ID: <CAFnz2-_oyd7SqQW3JXpYYRv43fSyYncba=+MZyeBBjT95yp8Yg@mail.gmail.com>

Thanks David,
I already did this, but in case the code gets updated I will have to
re-add the annotation, which I do not think it is ideal.

I was just wondering if there is an easy solution to this.
Thanks a lot for the help,

Cheers,
Luca

2014-06-13 3:12 GMT+02:00 David Winsemius <dwinsemius at comcast.net>:
>
> On Jun 12, 2014, at 8:06 AM, Luca Cerone wrote:
>
>> Dear all,
>> I am running some analysis using the pamr package (available on CRAN).
>>
>> One of the plots I produce is made using the function "pamr.plotcv".
>> This displays two plots in the same figure (using par(mfrow=c(2,1)).
>>
>> When the figure is created, I would like to be able to add some points
>> and lines, to the top plot.
>>
>> After producing the plot with pamr.cvplot, I have tried to add a line
>> doing something like:
>>
>> par(mfg=c(1,1))
>> lines(c(3,3), c(0,1), col = "blue", lty = 3)
>>
>> However this doesn't work and the line is shown in the bottom plot.
>> How can I add points and lines to the top plot?
>
> I think you would be better off hacking the code and inserting your desired annotations before the focus is moved to the second region. There are split screen methods that allow changing focus for base graphics, but I'm not aware of ones that use the par() controls.
>
> --
>
> David Winsemius
> Alameda, CA, USA
>



-- 
Luca Cerone

Tel: +34 692 06 71 28
Skype: luca.cerone


From jim at bitwrit.com.au  Fri Jun 13 12:09:33 2014
From: jim at bitwrit.com.au (Jim Lemon)
Date: Fri, 13 Jun 2014 20:09:33 +1000
Subject: [R] barp {plotrix} Start bars at 0 with a vector of positive
	values
In-Reply-To: <CAAcyNCznu3wZ=2hv1-5VuRQM7YOoM7SisvJHTFiXsPBkHWrBZA@mail.gmail.com>
References: <CAAcyNCznu3wZ=2hv1-5VuRQM7YOoM7SisvJHTFiXsPBkHWrBZA@mail.gmail.com>
Message-ID: <1554653.nXDXzJchko@localhost.localdomain>

On Fri, 13 Jun 2014 06:50:59 PM Pascal Oettli wrote:
> Dear list,
> 
> Please consider the following example:
> 
> library(plotrix)
> barp(c(2,3,4,5,6,7,8), ylim=c(-10,10))
> 
> How to force the bars to start at 0? I could not find the way to do it.
> 
Hi Pascal,
You are right, I had not considered the idea of setting a negative y limit 
when there were no negative values. I think you can fix this by changing:

 negy<-any(height<0,na.rm=TRUE)
 
 to

negy<-any(height<0,na.rm=TRUE) || ylim[1] < 0

I'll check this later (I'm just going out) and if it doesn't work, I'll send 
another email with something that does.

Jim


From jorgeivanvelez at gmail.com  Fri Jun 13 12:11:47 2014
From: jorgeivanvelez at gmail.com (Jorge I Velez)
Date: Fri, 13 Jun 2014 20:11:47 +1000
Subject: [R] barp {plotrix} Start bars at 0 with a vector of positive
	values
In-Reply-To: <CAAcyNCznu3wZ=2hv1-5VuRQM7YOoM7SisvJHTFiXsPBkHWrBZA@mail.gmail.com>
References: <CAAcyNCznu3wZ=2hv1-5VuRQM7YOoM7SisvJHTFiXsPBkHWrBZA@mail.gmail.com>
Message-ID: <CAKL8G3FW1s5Z=UmO=AfUPJ-OMfVryrvkNytxAjeh-Ejm+-Om3Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140613/096babff/attachment.pl>

From kridox at ymail.com  Fri Jun 13 12:17:05 2014
From: kridox at ymail.com (Pascal Oettli)
Date: Fri, 13 Jun 2014 19:17:05 +0900
Subject: [R] barp {plotrix} Start bars at 0 with a vector of positive
	values
In-Reply-To: <1554653.nXDXzJchko@localhost.localdomain>
References: <CAAcyNCznu3wZ=2hv1-5VuRQM7YOoM7SisvJHTFiXsPBkHWrBZA@mail.gmail.com>
	<1554653.nXDXzJchko@localhost.localdomain>
Message-ID: <CAAcyNCzowNthoqayRK50FOfZUB89_fDCtWPQ__uxNgYtR4bCww@mail.gmail.com>

Hi Jim,

Thank you for the suggestion. I will try it.

Pascal

On Fri, Jun 13, 2014 at 7:09 PM, Jim Lemon <jim at bitwrit.com.au> wrote:
> On Fri, 13 Jun 2014 06:50:59 PM Pascal Oettli wrote:
>> Dear list,
>>
>> Please consider the following example:
>>
>> library(plotrix)
>> barp(c(2,3,4,5,6,7,8), ylim=c(-10,10))
>>
>> How to force the bars to start at 0? I could not find the way to do it.
>>
> Hi Pascal,
> You are right, I had not considered the idea of setting a negative y limit
> when there were no negative values. I think you can fix this by changing:
>
>  negy<-any(height<0,na.rm=TRUE)
>
>  to
>
> negy<-any(height<0,na.rm=TRUE) || ylim[1] < 0
>
> I'll check this later (I'm just going out) and if it doesn't work, I'll send
> another email with something that does.
>
> Jim
>



-- 
Pascal Oettli
Project Scientist
JAMSTEC
Yokohama, Japan


From kridox at ymail.com  Fri Jun 13 12:19:05 2014
From: kridox at ymail.com (Pascal Oettli)
Date: Fri, 13 Jun 2014 19:19:05 +0900
Subject: [R] barp {plotrix} Start bars at 0 with a vector of positive
	values
In-Reply-To: <CAKL8G3FW1s5Z=UmO=AfUPJ-OMfVryrvkNytxAjeh-Ejm+-Om3Q@mail.gmail.com>
References: <CAAcyNCznu3wZ=2hv1-5VuRQM7YOoM7SisvJHTFiXsPBkHWrBZA@mail.gmail.com>
	<CAKL8G3FW1s5Z=UmO=AfUPJ-OMfVryrvkNytxAjeh-Ejm+-Om3Q@mail.gmail.com>
Message-ID: <CAAcyNCxvq9df8M-jvWv1J34LkZtma2naVC6WetG+c6auWBQh-A@mail.gmail.com>

Hi Jorge,

It is in order to have different barplots with the same range of
limits, to keep them easily comparable. Some have negative values,
some others no.

Pascal

On Fri, Jun 13, 2014 at 7:11 PM, Jorge I Velez <jorgeivanvelez at gmail.com> wrote:
> Hi Pascal,
>
> Perhaps I am missing something, but what about changing passing ylim = c(0,
> 10) to barp()?
>
> Best,
> Jorge.-
>
>
> On Fri, Jun 13, 2014 at 7:50 PM, Pascal Oettli <kridox at ymail.com> wrote:
>>
>> Dear list,
>>
>> Please consider the following example:
>>
>> library(plotrix)
>> barp(c(2,3,4,5,6,7,8), ylim=c(-10,10))
>>
>> How to force the bars to start at 0? I could not find the way to do it.
>>
>> Regards,
>> Pascal
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>



-- 
Pascal Oettli
Project Scientist
JAMSTEC
Yokohama, Japan


From luca.cerone at gmail.com  Fri Jun 13 12:20:06 2014
From: luca.cerone at gmail.com (Luca Cerone)
Date: Fri, 13 Jun 2014 12:20:06 +0200
Subject: [R] Defining default method for S3, S4 and R5 classes
Message-ID: <CAFnz2-89ZJDAxTvWqhNGij=ULDN3rHADGO1i5BM2DUsiiffpCg@mail.gmail.com>

Dear all,

I am writing a script implementing a pipeline to analyze some of the
data we receive.

One of the steps in this pipeline involves clustering the data, and I
am interested
in studying the effects of different clustering algorithms on the final results.

I am having issues making my code general enough because the
clustering algorithms we are interested all return different types of
objects (S3, S4 and R5 classes, as well as simple named lists).

>From the output of these algorithms I need to extract a list with as many
elements as the number of clusters and such that each element contains the ids
of the elements in each cluster.

I have easily done this for each of the cluster algorithms,
the problem is: how can I make so that rather than having to check for
classes and
types this is done automatically?

For example, for the algorithms that return S3 classes I have defined
a method "get_cluster_list.default" and then created the methods for
the individual classes, which is used in the main body of the
pipeline.

I have no idea how I can do this for S4 and R5 classes and,  more
importantly, I would
like an approach that works when using all S3, S4 and R5 classes.

Do you know how I could do this?

Thanks for the help,
Luca


From Stephen.Bond at cibc.com  Fri Jun 13 14:44:10 2014
From: Stephen.Bond at cibc.com (Bond, Stephen)
Date: Fri, 13 Jun 2014 12:44:10 +0000
Subject: [R] Rscript fails where Rterm works
In-Reply-To: <CABdHhvGcgygnbQ0HP-24gfjm9hQvHPWYjBEMoHhkyJVZQSrzow@mail.gmail.com>
References: <624EC9773CAB044ABA65327271BED9B60535AED7@CBMCC-X10-MA01.ad.cibc.com>
	<CABdHhvGcgygnbQ0HP-24gfjm9hQvHPWYjBEMoHhkyJVZQSrzow@mail.gmail.com>
Message-ID: <624EC9773CAB044ABA65327271BED9B60535AF54@CBMCC-X10-MA01.ad.cibc.com>

Hadley,

You are a genius.

Stephen B
-----Original Message-----
From: Hadley Wickham [mailto:h.wickham at gmail.com] 
Sent: Thursday, June 12, 2014 5:18 PM
To: Bond, Stephen
Cc: r-help at r-project.org
Subject: Re: [R] Rscript fails where Rterm works

Explicitly load the methods package: library(methods)

Hadley

On Thu, Jun 12, 2014 at 2:22 PM, Bond, Stephen <Stephen.Bond at cibc.com> wrote:
> I have a script which loads
>
> library(XLConnect)
> wb <- loadWorkbook("wbname")
>
> the code works without errors when run from ESS which uses
> R version 3.0.1 (2013-05-16) -- "Good Sport"
> Copyright (C) 2013 The R Foundation for Statistical Computing
> Platform: i386-w64-mingw32/i386 (32-bit)
>
> But fails when run from Rscript
> which Rscript
> C:\Program Files\R\R-3.0.1\bin\i386\Rscript.EXE
>
> Rscript updatevols.R
>
> Warning message:
> package 'RODBC' was built under R version 3.0.2
> XLConnect 0.2-7 by Mirai Solutions GmbH
> http://www.mirai-solutions.com ,
> http://miraisolutions.wordpress.com
> Warning message:
> package 'XLConnect' was built under R version 3.0.3
> Error in .jfield(x, "Ljava/lang/Class;", "TYPE") :
>   could not find function "getClass"
> Calls: loadWorkbook ... ._java_class_list -> lapply -> FUN -> .jfield -> .Call
> Execution halted
> Warning message:
> closing unused RODBC handle 1
>
> Any clues?
>
> Stephen B
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
http://had.co.nz/

From pd.mes at cbs.dk  Fri Jun 13 16:18:23 2014
From: pd.mes at cbs.dk (Peter Dalgaard)
Date: Fri, 13 Jun 2014 16:18:23 +0200
Subject: [R] Release of R 3.1.1 scheduled for July 10
Message-ID: <812FE86A-84B4-493E-9BDE-4A22F6339E93@cbs.dk>

Just a quick notice that we intend to have a patch release on July 10. Nickname is still undecided.

Due to calendar conflicts, the binaries for some platforms may be delayed by a week or so. 

-pd

-- 
Peter Dalgaard, Professor
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com

_______________________________________________
R-announce at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-announce


From jvadams at usgs.gov  Fri Jun 13 16:44:15 2014
From: jvadams at usgs.gov (Adams, Jean)
Date: Fri, 13 Jun 2014 09:44:15 -0500
Subject: [R] Extracting data from density plots
In-Reply-To: <CABkSJE5hwQkuRzjzDPh=0dnLsSdKrmr9395bAqRgjMa69BLSRA@mail.gmail.com>
References: <CABkSJE5hwQkuRzjzDPh=0dnLsSdKrmr9395bAqRgjMa69BLSRA@mail.gmail.com>
Message-ID: <CAN5YmCGTyaJSStOhrpYxJMHVWeEn86ObG5DZcb1ZApYr+UopNg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140613/9a7747d8/attachment.pl>

From eliza_botto at hotmail.com  Fri Jun 13 17:55:29 2014
From: eliza_botto at hotmail.com (eliza botto)
Date: Fri, 13 Jun 2014 15:55:29 +0000
Subject: [R] data format setting
Message-ID: <BLU170-W311D9BB03A76E1641D26BE89150@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140613/d71782f9/attachment.pl>

From clint at ecy.wa.gov  Fri Jun 13 18:38:25 2014
From: clint at ecy.wa.gov (Clint Bowman)
Date: Fri, 13 Jun 2014 09:38:25 -0700 (PDT)
Subject: [R] data format setting
In-Reply-To: <BLU170-W311D9BB03A76E1641D26BE89150@phx.gbl>
References: <BLU170-W311D9BB03A76E1641D26BE89150@phx.gbl>
Message-ID: <alpine.LRH.2.11.1406130937370.5819@aeolus.ecy.wa.gov>

?sort,
?unique, and
subset come to mind.

Clint Bowman			INTERNET:	clint at ecy.wa.gov
Air Quality Modeler		INTERNET:	clint at math.utah.edu
Department of Ecology		VOICE:		(360) 407-6815
PO Box 47600			FAX:		(360) 407-7534
Olympia, WA 98504-7600

         USPS:           PO Box 47600, Olympia, WA 98504-7600
         Parcels:        300 Desmond Drive, Lacey, WA 98503-1274

On Fri, 13 Jun 2014, eliza botto wrote:

>
> Dear R family,
> I hope you all be doing great. I have a dataset of following format. The data file is of the following format.
>
>      st year month day discharge
> 1  A     2004     1   1  6.752828
> 2  A     2004     1   2  7.602053
> 3  A     2004     1   3  5.583619
> 4  A     2004     1   4  5.019562
> 5  A     2004     1   5  4.804489
> 6  A     2004     1   6  4.363541
> 7  A     2004     1   7  3.801333
> 8  A     2004     1   8  3.455991
> 9  A     2004     1   9  3.402634
> 10 A     2004     1  10  3.250693
> ......
> ......
> continue
> ......
> ......
>         st year month day discharge
> 20000    AY 1967    10   3      0.56
> 20001    AY 1967    10   4      0.56
> 20002    AY 1967    10   5      0.48
> 20003    AY 1967    10   6      0.56
> 20004    AY 1967    10   7      0.48
> 20005    AY 1967    10   8      0.40
> 20006    AY 1967    10   9      0.40
> 20007    AY 1967    10  10      0.56
> 20008    AY 1967    10  11      0.56
> 20009    AY 1967    10  12      0.65
> 20010    AY 1967    10  13      0.85
>
> you can see that there are five columns.
> The first column has the name of the station. I want to split the data w.r.t the names of the stations. Each station has data for certain years. for example "A" has data for years from 2004 to 2010 and for "AY" its from 1967 to 2000.similarly for other years there is data for different number of years.
> I want to make a list of matrices each containing the data for that station in the following format
> $A
> 2004	2005	2006	2007	2008	2009	2010
> ..
> ...
> ...
> ..
> ...
>
> $AY
>
> 1967	1968	....	2000
>
> each column should have 365 to 366 values depending on whether there is a leap year or not. obviously for non-leap years 366th row should be an NA.
> kindly help me on it.
> Thankyou very much in advance.
> Eliza
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From macqueen1 at llnl.gov  Fri Jun 13 19:03:35 2014
From: macqueen1 at llnl.gov (MacQueen, Don)
Date: Fri, 13 Jun 2014 17:03:35 +0000
Subject: [R] no x label using axis.Date
In-Reply-To: <1402627624926-4692034.post@n4.nabble.com>
References: <1402627624926-4692034.post@n4.nabble.com>
Message-ID: <CFC07AA4.FBBF4%macqueen1@llnl.gov>

I'd suggest a different strategy for calculating your axis. You may also
be using the axis.Date() function incorrectly. See this example:

tmpd <- data.frame(dt=seq.Date( as.Date('2014-1-7'),
as.Date('2014-08-13'), len=15),
                   y=runif(15)
                   )
xax <- seq.Date(min(tmpd$dt), max(tmpd$dt), by='mon')

plot(tmpd$dt, tmpd$y, xaxt='n')axis(1, at=xax, lab=format(xax,'%b-%Y'))


By the way, most of the information in your post does not appear to be
relevant to your question (all the stuff starting with and following the
first par() statement), and it is distracting. It's always best to pare
things down to the minimum, as it makes it easier for potential helpers.
Also, it's hard to figure out why your attempt doesn't work, because you
haven't provided a reproducible example, which is easily done.

-Don


-- 
Don MacQueen

Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062





On 6/12/14 7:47 PM, "MKN" <matthewnewland at gauge.com.au> wrote:

>I have tried multiple different methods to figure out how to get a date
>axis
>of my preference (start date of each month). Any assistance would be
>appreciated.
>The below section is not producing a date axis:
>
>plot(totaldays$totaldays,totaldays$y,type="n",ylim=c(0,Emax),xaxt="n")
>*xlabels<-(strptime(totaldays$totaldays,"%Y-%m-%d",tz=""))
>xlabels<-xlabels[xlabels$mday==1]
>axis.Date(1,at=xlabels,format="%b-%Y")*
>
>The above section is used in the following plot:
>
>par(mfrow=c(4,1))
>par(mar=c(0.8,0,0,0))
>par(oma=c(2,4.5,3,2))
>
>plot(totaldays$totaldays,totaldays$y,type="n",ylim=c(0,Dmax),xaxt="n")
>points(D$date,D$TSP,col=Dcol,type="p",pch=16,lwd=2,xaxt="n")
>text(mdate,Dmax-20,labels="DM1'",cex=1)
>legend("topright",pch=16,cex=0.8,col=colLegend,
>       legend=ALegend)
>abline(h=Target,col="red",lwd=2)
>
>plot(totaldays$totaldays,totaldays$y,type="n",ylim=c(0,Bmax),xaxt="n")
>points(B$date,B$TSP,col=Bcol,type="p",pch=16,lwd=2,xaxt="n")
>text(mdate,Bmax-20,labels="DM2",cex=1)
>abline(h=Target,col="red",lwd=2)
>
>plot(totaldays$totaldays,totaldays$y,type="n",ylim=c(0,Amax),xaxt="n")
>points(A$date,A$TSP,col=Acol,type="p",pch=16,lwd=2,xaxt="n")
>text(mdate,Amax-20,labels="DM3",cex=1)
>abline(h=Target,col="red",lwd=2)
>
>plot(totaldays$totaldays,totaldays$y,type="n",ylim=c(0,Emax),xaxt="n")
>*xlabels<-(strptime(totaldays$totaldays,"%Y-%m-%d",tz=""))
>xlabels<-xlabels[xlabels$mday==1]
>axis.Date(1,at=xlabels,format="%b-%Y")*
>points(E$date,E$TSP,col=Ecol,type="p",pch=16,lwd=2)
>text(mdate,Emax-20,labels="DM4'",cex=1)
>abline(h=Target,col="red",lwd=2)
>
>title(main=Amain, ylab=Labely,
>      outer=TRUE,cex.lab=1, cex.main=1.5)
>
>Below is an excerpt of the total days data:
>
>	totaldays	        y
>1	2013-11-01	1
>2	2013-11-02	1
>3	2013-11-03	1
>4	2013-11-04	1
>5	2013-11-05	1
>6	2013-11-06	1
>7	2013-11-07	1
>8	2013-11-08	1
>9	2013-11-09	1
>10	2013-11-10	1
>
>
>
>
>--
>View this message in context:
>http://r.789695.n4.nabble.com/no-x-label-using-axis-Date-tp4692034.html
>Sent from the R help mailing list archive at Nabble.com.
>
>______________________________________________
>R-help at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From eliza_botto at hotmail.com  Fri Jun 13 20:46:01 2014
From: eliza_botto at hotmail.com (eliza botto)
Date: Fri, 13 Jun 2014 18:46:01 +0000
Subject: [R] data format setting
In-Reply-To: <CADv2QyFJT0c6BMnBii7ksPwzBoSxBs4z+DOpt9DRgUxUS2TLuA@mail.gmail.com>
References: <BLU170-W311D9BB03A76E1641D26BE89150@phx.gbl>,
	<CADv2QyFJT0c6BMnBii7ksPwzBoSxBs4z+DOpt9DRgUxUS2TLuA@mail.gmail.com>
Message-ID: <BLU170-W41A5C906B556FDAD0056BB89150@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140613/dbf1c43e/attachment.pl>

From roxannesnook at hotmail.com  Fri Jun 13 17:52:07 2014
From: roxannesnook at hotmail.com (Roxanne Snook)
Date: Fri, 13 Jun 2014 15:52:07 +0000
Subject: [R] =?utf-8?q?Error_message_in_varimp_function=3A_=22Party=22_pac?=
	=?utf-8?q?kage?=
Message-ID: <COL401-EAS3408286BEBB25C642D0DC2ED8150@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140613/b9e52adc/attachment.pl>

From jdnewmil at dcn.davis.CA.us  Fri Jun 13 22:30:35 2014
From: jdnewmil at dcn.davis.CA.us (Jeff Newmiller)
Date: Fri, 13 Jun 2014 14:30:35 -0600
Subject: [R] data format setting
In-Reply-To: <BLU170-W41A5C906B556FDAD0056BB89150@phx.gbl>
References: <BLU170-W311D9BB03A76E1641D26BE89150@phx.gbl>,
	<CADv2QyFJT0c6BMnBii7ksPwzBoSxBs4z+DOpt9DRgUxUS2TLuA@mail.gmail.com>
	<BLU170-W41A5C906B556FDAD0056BB89150@phx.gbl>
Message-ID: <faceb54a-c334-4102-8a49-9a6a4a09cefe@email.android.com>

As always, you are requested to post in plain text and to provide a reproducible example. "Messed things up" is quite vague.
FWIW: In general, processing in sequence is best done BEFORE you cast your data to wide format.
---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                      Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
--------------------------------------------------------------------------- 
Sent from my phone. Please excuse my brevity.

On June 13, 2014 12:46:01 PM MDT, eliza botto <eliza_botto at hotmail.com> wrote:
>Thanks dennis,
>It worked but I had to do some simple modifications to get to the
>ultimate format.
>Now I have a list in the following format
>$A
>2004	2005	2006	2007	2008	2009	2010
>..
>...
>...
>..
>...
>
>$AY
>
>1967	1968	....	2000...........
>
>some columns had 365 rows and some 366. those with 365 rows had their
>366 row as NA. 
>Now I want to apply approx. command to interpolate 366 values to 365,
>but when I apply approx command I gives out something 
>which is with $x and $y, and frankly speaking it messed up everything.
>Is their a way that i do it neatly without getting the format
>deteriorated?
>
>
>In any way, thank-you very much indeed.
>
>Eliza
>
>> Date: Fri, 13 Jun 2014 11:11:37 -0700
>> Subject: Re: [R] data format setting
>> From: djmuser at gmail.com
>> To: eliza_botto at hotmail.com
>> 
>> Hi:
>> 
>> Maybe something like this:
>> 
>> library(reshape2)
>> L <- split(DF, DF$year)
>> L2 <- llply(L, function(d) dcast(d, month + day ~ year, value.var =
>> "discharge"))
>> 
>> Obviously untested, so caveat emptor. The idea is to use the dcast
>> function to reshape the data from long to wide format within year.
>> 
>> Dennis
>> 
>> On Fri, Jun 13, 2014 at 8:55 AM, eliza botto
><eliza_botto at hotmail.com> wrote:
>> >
>> > Dear R family,
>> > I hope you all be doing great. I have a dataset of following
>format. The data file is of the following format.
>> >
>> >       st year month day discharge
>> > 1  A     2004     1   1  6.752828
>> > 2  A     2004     1   2  7.602053
>> > 3  A     2004     1   3  5.583619
>> > 4  A     2004     1   4  5.019562
>> > 5  A     2004     1   5  4.804489
>> > 6  A     2004     1   6  4.363541
>> > 7  A     2004     1   7  3.801333
>> > 8  A     2004     1   8  3.455991
>> > 9  A     2004     1   9  3.402634
>> > 10 A     2004     1  10  3.250693
>> > ......
>> > ......
>> > continue
>> > ......
>> > ......
>> >          st year month day discharge
>> > 20000    AY 1967    10   3      0.56
>> > 20001    AY 1967    10   4      0.56
>> > 20002    AY 1967    10   5      0.48
>> > 20003    AY 1967    10   6      0.56
>> > 20004    AY 1967    10   7      0.48
>> > 20005    AY 1967    10   8      0.40
>> > 20006    AY 1967    10   9      0.40
>> > 20007    AY 1967    10  10      0.56
>> > 20008    AY 1967    10  11      0.56
>> > 20009    AY 1967    10  12      0.65
>> > 20010    AY 1967    10  13      0.85
>> >
>> > you can see that there are five columns.
>> > The first column has the name of the station. I want to split the
>data w.r.t the names of the stations. Each station has data for certain
>years. for example "A" has data for years from 2004 to 2010 and for
>"AY" its from 1967 to 2000.similarly for other years there is data for
>different number of years.
>> > I want to make a list of matrices each containing the data for that
>station in the following format
>> > $A
>> > 2004    2005    2006    2007    2008    2009    2010
>> > ..
>> > ...
>> > ...
>> > ..
>> > ...
>> >
>> > $AY
>> >
>> > 1967    1968    ....    2000
>> >
>> > each column should have 365 to 366 values depending on whether
>there is a leap year or not. obviously for non-leap years 366th row
>should be an NA.
>> > kindly help me on it.
>> > Thankyou very much in advance.
>> > Eliza
>> >
>> >
>> >         [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
> 		 	   		  
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From dulcalma at bigpond.com  Sat Jun 14 01:50:31 2014
From: dulcalma at bigpond.com (Duncan Mackay)
Date: Sat, 14 Jun 2014 09:50:31 +1000
Subject: [R] no x label using axis.Date
In-Reply-To: <1402627624926-4692034.post@n4.nabble.com>
References: <1402627624926-4692034.post@n4.nabble.com>
Message-ID: <000c01cf8762$43f1f970$cbd5ec50$@bigpond.com>

Dates are a problem in any language because they are irregular
As you have not provided a reproducible example

here are 2 solutions

totaldays <- seq.Date(as.Date("2013-11-01"), by = 7, length = 10)
 str(totaldays)
 Date[1:10], format: "2013-11-01" "2013-11-08" "2013-11-15" "2013-11-22"
"2013-11-29" "2013-12-06" "2013-12-13" "2013-12-20" "2013-12-27"
"2014-01-03"

 plot(totaldays, rep(1,10), axes = F)
 axis(1, at =  seq.Date(as.Date("2013-11-01"), by = "month", length = 3),
labels = format(seq.Date(as.Date("2013-11-01"), by = "month", length = 3),
"%b %Y"))
 axis(2, at = seq(0,2,0.5), labels = paste(seq(0,2,0.5)))
 box()
 
 
library(lattice)
xyplot(rep(1,10)~ totaldays,
       scales = list(x= list(at =  seq.Date(as.Date("2013-11-01"), by =
"month", length = 3),
                             labels = format(seq.Date(as.Date("2013-11-01"),
by = "month", length = 3), "%b %Y"))))

If you have more data you may get away without having to format the xaxis in
lattice.

xyplot(rep(1,10)~ totaldays,
            xlim =c(as.Date("2013-10-01"), as.Date("2014-02-01")) )

HTH

Duncan

Duncan Mackay
Department of Agronomy and Soil Science
University of New England
Armidale NSW 2351
Email: home: mackay at northnet.com.au

-----Original Message-----
From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On
Behalf Of MKN
Sent: Friday, 13 June 2014 12:47
To: r-help at r-project.org
Subject: [R] no x label using axis.Date

I have tried multiple different methods to figure out how to get a date axis
of my preference (start date of each month). Any assistance would be
appreciated.
The below section is not producing a date axis:

plot(totaldays$totaldays,totaldays$y,type="n",ylim=c(0,Emax),xaxt="n")
*xlabels<-(strptime(totaldays$totaldays,"%Y-%m-%d",tz=""))
xlabels<-xlabels[xlabels$mday==1]
axis.Date(1,at=xlabels,format="%b-%Y")*

The above section is used in the following plot:

par(mfrow=c(4,1))
par(mar=c(0.8,0,0,0))
par(oma=c(2,4.5,3,2))

plot(totaldays$totaldays,totaldays$y,type="n",ylim=c(0,Dmax),xaxt="n")
points(D$date,D$TSP,col=Dcol,type="p",pch=16,lwd=2,xaxt="n")
text(mdate,Dmax-20,labels="DM1'",cex=1)
legend("topright",pch=16,cex=0.8,col=colLegend,
       legend=ALegend)
abline(h=Target,col="red",lwd=2)

plot(totaldays$totaldays,totaldays$y,type="n",ylim=c(0,Bmax),xaxt="n")
points(B$date,B$TSP,col=Bcol,type="p",pch=16,lwd=2,xaxt="n")
text(mdate,Bmax-20,labels="DM2",cex=1)
abline(h=Target,col="red",lwd=2)

plot(totaldays$totaldays,totaldays$y,type="n",ylim=c(0,Amax),xaxt="n")
points(A$date,A$TSP,col=Acol,type="p",pch=16,lwd=2,xaxt="n")
text(mdate,Amax-20,labels="DM3",cex=1)
abline(h=Target,col="red",lwd=2)

plot(totaldays$totaldays,totaldays$y,type="n",ylim=c(0,Emax),xaxt="n")
*xlabels<-(strptime(totaldays$totaldays,"%Y-%m-%d",tz=""))
xlabels<-xlabels[xlabels$mday==1]
axis.Date(1,at=xlabels,format="%b-%Y")*
points(E$date,E$TSP,col=Ecol,type="p",pch=16,lwd=2)
text(mdate,Emax-20,labels="DM4'",cex=1)
abline(h=Target,col="red",lwd=2)

title(main=Amain, ylab=Labely,
      outer=TRUE,cex.lab=1, cex.main=1.5)

Below is an excerpt of the total days data:

	totaldays	        y
1	2013-11-01	1
2	2013-11-02	1
3	2013-11-03	1
4	2013-11-04	1
5	2013-11-05	1
6	2013-11-06	1
7	2013-11-07	1
8	2013-11-08	1
9	2013-11-09	1
10	2013-11-10	1




--
View this message in context:
http://r.789695.n4.nabble.com/no-x-label-using-axis-Date-tp4692034.html
Sent from the R help mailing list archive at Nabble.com.

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From jim at bitwrit.com.au  Sat Jun 14 02:13:45 2014
From: jim at bitwrit.com.au (Jim Lemon)
Date: Sat, 14 Jun 2014 10:13:45 +1000
Subject: [R] Add points to subplots
In-Reply-To: <CAFnz2-_oyd7SqQW3JXpYYRv43fSyYncba=+MZyeBBjT95yp8Yg@mail.gmail.com>
References: <CAFnz2-9Ljo6y2LM_BUvGosYtyt2yZ0Bjx9K93PifNySgC6djKA@mail.gmail.com>
	<296D24F9-67F5-4534-932B-8891B7200672@comcast.net>
	<CAFnz2-_oyd7SqQW3JXpYYRv43fSyYncba=+MZyeBBjT95yp8Yg@mail.gmail.com>
Message-ID: <3301789.5C8nDfJLaq@localhost.localdomain>

On Fri, 13 Jun 2014 12:02:34 PM Luca Cerone wrote:
> Thanks David,
> I already did this, but in case the code gets updated I will have to
> re-add the annotation, which I do not think it is ideal.
> 
> I was just wondering if there is an easy solution to this.
> Thanks a lot for the help,
> 
Hi Luca,
I decided to try using the split.screen function, which I had previously 
tried without getting what I wanted. This example:

split.screen(c(2,1))
screen(1)
screen()
plot(1:7)
screen(2)
plot(1:6)
screen(1,FALSE)
screen()
points(x=7:1,y=1:7,col="red")

when run with no graphics devices currently open, seems to work and do 
what you want. When I first tried it on an open device (x11) it would not 
switch screens properly, remaining on the top (first) screen despite calls 
to screen() that reported that the screen had changed. I tried this after 
opening a png device and it also worked correctly, so I think that if you 
are careful to initialize the graphics device immediately before 
split.screen it should do it.

Jim


From gunfifa12 at gmail.com  Sat Jun 14 03:59:07 2014
From: gunfifa12 at gmail.com (=?UTF-8?B?7Jik6rG07Z2s?=)
Date: Sat, 14 Jun 2014 10:59:07 +0900
Subject: [R] I have a question
Message-ID: <CAJbv6rDumsfKamLvhOsG9vT_Pusk=2DU6oQ96V_rta77PmxwnA@mail.gmail.com>

Hi

I got a wrong graph when I typed " qplot(names(termFrequency),termFrequency,
geom="bar", xlab="Terms",stat="bin")+coord_flip() "

The frequency weren't displayed on the graph. what's the problem?

I attached the screen shot to this e-mail.

Hope your answer.

Thank you

Best,
-------------- next part --------------
A non-text attachment was scrubbed...
Name: qplot graph error.PNG
Type: image/png
Size: 52921 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140614/018792de/attachment.png>

From kridox at ymail.com  Sat Jun 14 05:57:12 2014
From: kridox at ymail.com (Pascal Oettli)
Date: Sat, 14 Jun 2014 12:57:12 +0900
Subject: [R] barp {plotrix} Start bars at 0 with a vector of positive
	values
In-Reply-To: <1554653.nXDXzJchko@localhost.localdomain>
References: <CAAcyNCznu3wZ=2hv1-5VuRQM7YOoM7SisvJHTFiXsPBkHWrBZA@mail.gmail.com>
	<1554653.nXDXzJchko@localhost.localdomain>
Message-ID: <CAAcyNCy=7YitgR+hQwMruiV10B7ab0G1eSci=-VFkkWhXmAJ-w@mail.gmail.com>

Hi Jim,

I tried your fix.

This one works:
barp(c(2,3,4,5,6,7,8), ylim=c(-10,10))

This one fails:
barp(c(2,3,4,5,6,7,8))

Regards,
Pascal

On Fri, Jun 13, 2014 at 7:09 PM, Jim Lemon <jim at bitwrit.com.au> wrote:
> On Fri, 13 Jun 2014 06:50:59 PM Pascal Oettli wrote:
>> Dear list,
>>
>> Please consider the following example:
>>
>> library(plotrix)
>> barp(c(2,3,4,5,6,7,8), ylim=c(-10,10))
>>
>> How to force the bars to start at 0? I could not find the way to do it.
>>
> Hi Pascal,
> You are right, I had not considered the idea of setting a negative y limit
> when there were no negative values. I think you can fix this by changing:
>
>  negy<-any(height<0,na.rm=TRUE)
>
>  to
>
> negy<-any(height<0,na.rm=TRUE) || ylim[1] < 0
>
> I'll check this later (I'm just going out) and if it doesn't work, I'll send
> another email with something that does.
>
> Jim
>



-- 
Pascal Oettli
Project Scientist
JAMSTEC
Yokohama, Japan


From frtog at vestas.com  Sat Jun 14 06:09:08 2014
From: frtog at vestas.com (=?iso-8859-1?Q?Frede_Aakmann_T=F8gersen?=)
Date: Sat, 14 Jun 2014 06:09:08 +0200
Subject: [R] data format setting
Message-ID: <ifpejd7desyjq0jun1qqjt3l.1402718944406@email.android.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140614/59ba4748/attachment.pl>

From jim at bitwrit.com.au  Sat Jun 14 07:03:46 2014
From: jim at bitwrit.com.au (Jim Lemon)
Date: Sat, 14 Jun 2014 15:03:46 +1000
Subject: [R] barp {plotrix} Start bars at 0 with a vector of positive
	values
In-Reply-To: <CAAcyNCy=7YitgR+hQwMruiV10B7ab0G1eSci=-VFkkWhXmAJ-w@mail.gmail.com>
References: <CAAcyNCznu3wZ=2hv1-5VuRQM7YOoM7SisvJHTFiXsPBkHWrBZA@mail.gmail.com>
	<1554653.nXDXzJchko@localhost.localdomain>
	<CAAcyNCy=7YitgR+hQwMruiV10B7ab0G1eSci=-VFkkWhXmAJ-w@mail.gmail.com>
Message-ID: <7666456.hu2h47qG83@localhost.localdomain>

On Sat, 14 Jun 2014 12:57:12 PM you wrote:
> Hi Jim,
> 
> I tried your fix.
> 
> This one works:
> barp(c(2,3,4,5,6,7,8), ylim=c(-10,10))
> 
> This one fails:
> barp(c(2,3,4,5,6,7,8))
> 
> Regards,
> Pascal
> 
Hi Pascal,
Right again. This seems to work for both and I think handles the problem 
correctly:

 if(is.null(ylim)) {
  negy<-any(height<0,na.rm=TRUE)
  if(negy) miny<-min(height,na.rm=TRUE)*1.05
  else miny<-ifelse(ylog,min(height)/10,0)
  ylim<-c(miny,max(height,na.rm=TRUE)*1.05)
 }
 else {
  miny<-ylim[1]
  negy<-miny<0
 }

Remove the line:

negy<-any(height<0,na.rm=TRUE)

and modify the succeeding conditional clause as above. This will appear 
in version 3.5-8.

Jim


From jim at bitwrit.com.au  Sat Jun 14 07:13:05 2014
From: jim at bitwrit.com.au (Jim Lemon)
Date: Sat, 14 Jun 2014 15:13:05 +1000
Subject: [R] I have a question
In-Reply-To: <CAJbv6rDumsfKamLvhOsG9vT_Pusk=2DU6oQ96V_rta77PmxwnA@mail.gmail.com>
References: <CAJbv6rDumsfKamLvhOsG9vT_Pusk=2DU6oQ96V_rta77PmxwnA@mail.gmail.com>
Message-ID: <107903060.7rjb0UX9V9@localhost.localdomain>

On Sat, 14 Jun 2014 10:59:07 AM ??? wrote:
> Hi
> 
> I got a wrong graph when I typed " 
qplot(names(termFrequency),termFrequency,
> geom="bar", xlab="Terms",stat="bin")+coord_flip() "
> 
> The frequency weren't displayed on the graph. what's the problem?
> 
> I attached the screen shot to this e-mail.
> 
Hi ??? ,
You seem to be supplying a character vector - names(termFrequency) - 
as the "x" argument to qplot. Making a wild guess that these names are 
actually numbers, perhaps:

as.numeric(names(termFrequency))

will work. If the wild guess was wrong, perhaps you want to specify 
termFrequency as the first argument. When something like this happens, 
it is often helpful to explicitly name your arguments:

qplot(x=names(termFrequency),y=termFrequency,
 geom="bar", xlab="Terms",stat="bin")+coord_flip()

This will sometimes give a meaningful error message that helps to 
identify what has gone wrong.

Jim


From kridox at ymail.com  Sat Jun 14 08:19:39 2014
From: kridox at ymail.com (Pascal Oettli)
Date: Sat, 14 Jun 2014 15:19:39 +0900
Subject: [R] barp {plotrix} Start bars at 0 with a vector of positive
	values
In-Reply-To: <7666456.hu2h47qG83@localhost.localdomain>
References: <CAAcyNCznu3wZ=2hv1-5VuRQM7YOoM7SisvJHTFiXsPBkHWrBZA@mail.gmail.com>
	<1554653.nXDXzJchko@localhost.localdomain>
	<CAAcyNCy=7YitgR+hQwMruiV10B7ab0G1eSci=-VFkkWhXmAJ-w@mail.gmail.com>
	<7666456.hu2h47qG83@localhost.localdomain>
Message-ID: <CAAcyNCzE=JuRM4DTg+KgDCO0pzcZHLy5v8DWjfxh2g+7q_AVTg@mail.gmail.com>

Hi Jim,

Yes, it seems to work. Thanks.

Regards,
Pascal

On Sat, Jun 14, 2014 at 2:03 PM, Jim Lemon <jim at bitwrit.com.au> wrote:
> On Sat, 14 Jun 2014 12:57:12 PM you wrote:
>> Hi Jim,
>>
>> I tried your fix.
>>
>> This one works:
>> barp(c(2,3,4,5,6,7,8), ylim=c(-10,10))
>>
>> This one fails:
>> barp(c(2,3,4,5,6,7,8))
>>
>> Regards,
>> Pascal
>>
> Hi Pascal,
> Right again. This seems to work for both and I think handles the problem
> correctly:
>
>  if(is.null(ylim)) {
>   negy<-any(height<0,na.rm=TRUE)
>   if(negy) miny<-min(height,na.rm=TRUE)*1.05
>   else miny<-ifelse(ylog,min(height)/10,0)
>   ylim<-c(miny,max(height,na.rm=TRUE)*1.05)
>  }
>  else {
>   miny<-ylim[1]
>   negy<-miny<0
>  }
>
> Remove the line:
>
> negy<-any(height<0,na.rm=TRUE)
>
> and modify the succeeding conditional clause as above. This will appear
> in version 3.5-8.
>
> Jim
>



-- 
Pascal Oettli
Project Scientist
JAMSTEC
Yokohama, Japan


From luysgarcia at gmail.com  Sat Jun 14 10:01:20 2014
From: luysgarcia at gmail.com (=?UTF-8?Q?Luis_Fernando_Garc=C3=ADa?=)
Date: Sat, 14 Jun 2014 05:01:20 -0300
Subject: [R] question about chi values GLM
Message-ID: <CANxP2S6-9jjK2SPEsaUo7kRFuMe=3d3hWHOwN2JQM2Cbw=H0PA@mail.gmail.com>

Dear all,

I am making an analysis using a GLM using three explanatory variables and a
response variable. I need to obtain a table similar to this one,
http://postimg.org/image/5sau79wlt/r

 nevertheless, I have not been able to do it. I am having a hard time
specially getting the chi square values. I would like to know how to obatin
them. I have used the function ANOVA, but it shows me the deviance but not
the Chi-Square values, can be used these values?

I also would like to know what function could help me to make ad hoc
comparisons for single variables and interactions.

If any of you knows how to do both estimations, I would really appreciate
it.

All the best!!!

This is my script
a=read.table("ricis3.txt",header=T)
attach(a)
model7=glm(Count~Sex+Time+Behaviour+Sex*Time+Sex*Behaviour+Time+Behaviour*Sex,family=poisson)
summary(model7)
anova(model7,test="Chi")
-------------- next part --------------
Sex	Time	Behaviour	Count
Male	Night	Exploring	189
Male	Night	Interacting	11
Male	Night	Feeding	170
Male	Night	Mating	13
Male	Night	Resting	240
Male	Day	Exploring	58
Male	Day	Interacting	1
Male	Day	Feeding	12
Male	Day	Mating	3
Male	Day	Resting	399
Female	Night	Exploring	187
Female	Night	Interacting	10
Female	Night	Feeding	95
Female	Night	Mating	8
Female	Night	Resting	175
Female	Day	Exploring	45
Female	Day	Interacting	6
Female	Day	Feeding	10
Female	Day	Mating	4
Female	Day	Resting	406
Immature	Night	Exploring	186
Immature	Night	Interacting	15
Immature	Night	Feeding	175
Immature	Night	Resting	200
Immature	Day	Exploring	68
Immature	Day	Interacting	8
Immature	Day	Feeding	6

From pdalgd at gmail.com  Sat Jun 14 10:45:18 2014
From: pdalgd at gmail.com (peter dalgaard)
Date: Sat, 14 Jun 2014 10:45:18 +0200
Subject: [R] question about chi values GLM
In-Reply-To: <CANxP2S6-9jjK2SPEsaUo7kRFuMe=3d3hWHOwN2JQM2Cbw=H0PA@mail.gmail.com>
References: <CANxP2S6-9jjK2SPEsaUo7kRFuMe=3d3hWHOwN2JQM2Cbw=H0PA@mail.gmail.com>
Message-ID: <2314283A-B71E-472E-878C-A388260F5082@gmail.com>

The column labeled "Deviance" pretty much _is_ the chi-square, specifically the likelihood ratio test statistic, which has an asymptotic chi-square distribution. (Using test="Rao" gives you the alternative Rao efficient score test, which in your case doesn't make much of a difference.) 

Notice though, that those displays are sequential and it is not clear that the one in the image you attach is made in the same way (or in a sensible way for that matter).  In particular, you have highly significant interaction terms, in which case the main effects tests are mostly irrelevant. You may need to consult a textbook on Poisson modelling or generalized linear modelling -- the discussion is a bit too long to be fitted into a mailing list.

-pd

On 14 Jun 2014, at 10:01 , Luis Fernando Garc?a <luysgarcia at gmail.com> wrote:

> Dear all,
> 
> I am making an analysis using a GLM using three explanatory variables and a
> response variable. I need to obtain a table similar to this one,
> http://postimg.org/image/5sau79wlt/r
> 
> nevertheless, I have not been able to do it. I am having a hard time
> specially getting the chi square values. I would like to know how to obatin
> them. I have used the function ANOVA, but it shows me the deviance but not
> the Chi-Square values, can be used these values?
> 
> I also would like to know what function could help me to make ad hoc
> comparisons for single variables and interactions.
> 
> If any of you knows how to do both estimations, I would really appreciate
> it.
> 
> All the best!!!
> 
> This is my script
> a=read.table("ricis3.txt",header=T)
> attach(a)
> model7=glm(Count~Sex+Time+Behaviour+Sex*Time+Sex*Behaviour+Time+Behaviour*Sex,family=poisson)
> summary(model7)
> anova(model7,test="Chi")
> <ricis3.txt>______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From raphael.paebst at gmail.com  Sat Jun 14 11:04:41 2014
From: raphael.paebst at gmail.com (=?ISO-8859-1?Q?Raphael_P=E4bst?=)
Date: Sat, 14 Jun 2014 11:04:41 +0200
Subject: [R] .Internal(filledcontour()) - ancient history or just plain
	wrong?
Message-ID: <CADuMfoFiSzkMc97a4ph-h5tHwGbZBELHDWaMqxDbyEUP+oab-A@mail.gmail.com>

Hello everyone!
In my ongoing odyssey through badly dokumented and sparingly commented
R-code, I've come across something that baffles me.
The following line of code

.Internal(filledcontour(as.double(x), as.double(y), z,
as.double(levels), col = col))
 not surprisingly results in an error, telling me that there is no
such function as filledcontour().
The code this comes from has been written for an older version of R,
probably 2.5.x so I was wondering, if the error results from me using
a current version (3.1.0) or if the author wanted to use
filled.contour() and forgot the '.'.

Would that in fact help or was there something called filledcontour()
that has changed into something else nowadays?

I've tried to contact the author, but he hasn't used R for at least
five years and hasn't replied so far, so I'm hoping soeone here can
give me a hint to the solution of this problem.

Many thanks in advance!

Raphael


From ripley at stats.ox.ac.uk  Sat Jun 14 11:18:46 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat, 14 Jun 2014 10:18:46 +0100
Subject: [R] .Internal(filledcontour()) - ancient history or just plain
 wrong?
In-Reply-To: <CADuMfoFiSzkMc97a4ph-h5tHwGbZBELHDWaMqxDbyEUP+oab-A@mail.gmail.com>
References: <CADuMfoFiSzkMc97a4ph-h5tHwGbZBELHDWaMqxDbyEUP+oab-A@mail.gmail.com>
Message-ID: <539C1376.3000401@stats.ox.ac.uk>

On 14/06/2014 10:04, Raphael P?bst wrote:
> Hello everyone!
> In my ongoing odyssey through badly dokumented and sparingly commented
> R-code, I've come across something that baffles me.
> The following line of code
>
> .Internal(filledcontour(as.double(x), as.double(y), z,
> as.double(levels), col = col))
>   not surprisingly results in an error, telling me that there is no
> such function as filledcontour().

But that passes a call to .Internal: it does not say what you say it 
does.  I suspect you saw

   there is no .Internal function 'filledcontour'

which is quite a different matter.

> The code this comes from has been written for an older version of R,
> probably 2.5.x so I was wondering, if the error results from me using
> a current version (3.1.0) or if the author wanted to use
> filled.contour() and forgot the '.'.
>
> Would that in fact help or was there something called filledcontour()
> that has changed into something else nowadays?

It has.  But it was never in the API, so should never have been used in 
user code and was never documented in R itself.

You should be able to rewrite this using .filled.contour in package 
graphics: it might be a drop-in replacement.

>
> I've tried to contact the author, but he hasn't used R for at least
> five years and hasn't replied so far, so I'm hoping soeone here can
> give me a hint to the solution of this problem.
>
> Many thanks in advance!
>
> Raphael



-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From raphael.paebst at gmail.com  Sat Jun 14 11:30:00 2014
From: raphael.paebst at gmail.com (=?ISO-8859-1?Q?Raphael_P=E4bst?=)
Date: Sat, 14 Jun 2014 11:30:00 +0200
Subject: [R] .Internal(filledcontour()) - ancient history or just plain
	wrong?
In-Reply-To: <539C1376.3000401@stats.ox.ac.uk>
References: <CADuMfoFiSzkMc97a4ph-h5tHwGbZBELHDWaMqxDbyEUP+oab-A@mail.gmail.com>
	<539C1376.3000401@stats.ox.ac.uk>
Message-ID: <CADuMfoGRDgb2TuALcU_+08q06g34eVBkBZzzxpi67b3H8x3mBw@mail.gmail.com>

You are right, it was
? there is no .Internal function 'filledcontour'


and changing it to .filled.contour() removed the problem.

Just out of curiosity, would the old version with
.Internal(filledcontour()) have worked on older R-Versions?

Not that I fully understand how .Internal() works and should (or
should not) be used, but I'm always willing to understand more about
the code I'm working with.

Thanks again!

Raphael

On 6/14/14, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
> On 14/06/2014 10:04, Raphael P?bst wrote:
>> Hello everyone!
>> In my ongoing odyssey through badly dokumented and sparingly commented
>> R-code, I've come across something that baffles me.
>> The following line of code
>>
>> .Internal(filledcontour(as.double(x), as.double(y), z,
>> as.double(levels), col = col))
>>   not surprisingly results in an error, telling me that there is no
>> such function as filledcontour().
>
> But that passes a call to .Internal: it does not say what you say it
> does.  I suspect you saw
>
>    there is no .Internal function 'filledcontour'
>
> which is quite a different matter.
>
>> The code this comes from has been written for an older version of R,
>> probably 2.5.x so I was wondering, if the error results from me using
>> a current version (3.1.0) or if the author wanted to use
>> filled.contour() and forgot the '.'.
>>
>> Would that in fact help or was there something called filledcontour()
>> that has changed into something else nowadays?
>
> It has.  But it was never in the API, so should never have been used in
> user code and was never documented in R itself.
>
> You should be able to rewrite this using .filled.contour in package
> graphics: it might be a drop-in replacement.
>
>>
>> I've tried to contact the author, but he hasn't used R for at least
>> five years and hasn't replied so far, so I'm hoping soeone here can
>> give me a hint to the solution of this problem.
>>
>> Many thanks in advance!
>>
>> Raphael
>
>
>
> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From ripley at stats.ox.ac.uk  Sat Jun 14 11:38:18 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat, 14 Jun 2014 10:38:18 +0100
Subject: [R] .Internal(filledcontour()) - ancient history or just plain
 wrong?
In-Reply-To: <CADuMfoGRDgb2TuALcU_+08q06g34eVBkBZzzxpi67b3H8x3mBw@mail.gmail.com>
References: <CADuMfoFiSzkMc97a4ph-h5tHwGbZBELHDWaMqxDbyEUP+oab-A@mail.gmail.com>	<539C1376.3000401@stats.ox.ac.uk>
	<CADuMfoGRDgb2TuALcU_+08q06g34eVBkBZzzxpi67b3H8x3mBw@mail.gmail.com>
Message-ID: <539C180A.20605@stats.ox.ac.uk>

On 14/06/2014 10:30, Raphael P?bst wrote:
> You are right, it was
>    there is no .Internal function 'filledcontour'
>
>
> and changing it to .filled.contour() removed the problem.
>
> Just out of curiosity, would the old version with
> .Internal(filledcontour()) have worked on older R-Versions?

Possibly.  Note that the internals of that undocumented .Internal did 
change over the years.

>
> Not that I fully understand how .Internal() works and should (or
> should not) be used, but I'm always willing to understand more about
> the code I'm working with.
>
> Thanks again!
>
> Raphael
>
> On 6/14/14, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
>> On 14/06/2014 10:04, Raphael P?bst wrote:
>>> Hello everyone!
>>> In my ongoing odyssey through badly dokumented and sparingly commented
>>> R-code, I've come across something that baffles me.
>>> The following line of code
>>>
>>> .Internal(filledcontour(as.double(x), as.double(y), z,
>>> as.double(levels), col = col))
>>>    not surprisingly results in an error, telling me that there is no
>>> such function as filledcontour().
>>
>> But that passes a call to .Internal: it does not say what you say it
>> does.  I suspect you saw
>>
>>     there is no .Internal function 'filledcontour'
>>
>> which is quite a different matter.
>>
>>> The code this comes from has been written for an older version of R,
>>> probably 2.5.x so I was wondering, if the error results from me using
>>> a current version (3.1.0) or if the author wanted to use
>>> filled.contour() and forgot the '.'.
>>>
>>> Would that in fact help or was there something called filledcontour()
>>> that has changed into something else nowadays?
>>
>> It has.  But it was never in the API, so should never have been used in
>> user code and was never documented in R itself.
>>
>> You should be able to rewrite this using .filled.contour in package
>> graphics: it might be a drop-in replacement.
>>
>>>
>>> I've tried to contact the author, but he hasn't used R for at least
>>> five years and hasn't replied so far, so I'm hoping soeone here can
>>> give me a hint to the solution of this problem.
>>>
>>> Many thanks in advance!
>>>
>>> Raphael
>>
>>
>>
>> --
>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>> University of Oxford,             Tel:  +44 1865 272861 (self)
>> 1 South Parks Road,                     +44 1865 272866 (PA)
>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From bogaso.christofer at gmail.com  Sat Jun 14 16:40:35 2014
From: bogaso.christofer at gmail.com (Christofer Bogaso)
Date: Sat, 14 Jun 2014 20:25:35 +0545
Subject: [R] Numerical integration with R
Message-ID: <CA+dpOJ=9NUd=QWQ+HqOmNjRT0J4qm26q03QSb5AFeOvQ6vqnYQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140614/64e3f51c/attachment.pl>

From ripley at stats.ox.ac.uk  Sat Jun 14 16:58:55 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat, 14 Jun 2014 15:58:55 +0100
Subject: [R] question about chi values GLM
In-Reply-To: <2314283A-B71E-472E-878C-A388260F5082@gmail.com>
References: <CANxP2S6-9jjK2SPEsaUo7kRFuMe=3d3hWHOwN2JQM2Cbw=H0PA@mail.gmail.com>
	<2314283A-B71E-472E-878C-A388260F5082@gmail.com>
Message-ID: <539C632F.4070006@stats.ox.ac.uk>

On 14/06/2014 09:45, peter dalgaard wrote:
> The column labeled "Deviance" pretty much _is_ the chi-square, specifically the likelihood ratio test statistic, which has an asymptotic chi-square distribution. (Using test="Rao" gives you the alternative Rao efficient score test, which in your case doesn't make much of a difference.)
>
> Notice though, that those displays are sequential and it is not clear that the one in the image you attach is made in the same way (or in a sensible way for that matter).  In particular, you have highly significant interaction terms, in which case the main effects tests are mostly irrelevant. You may need to consult a textbook on Poisson modelling or generalized linear modelling -- the discussion is a bit too long to be fitted into a mailing list.

We do not know what is meant by the entries in those tables.  Many years 
ago (before even the term 'deviance' was coined) H.O. Lancaster and 
others partitioned chi-squared tests, with a similar table to an 
analysis of deviance but different numerical quantities.  Although 
Peter's guess is the most likely one, it is not the only possible one.

As an overall test of fit in a Poisson log-linear model there is a 
likelihood-ratio aka deviance test (sometimes called a G^2 test or 
G-test) and a Chi-squared test (which is different).

The 'df' in the table make no sense.  For three binary variables, Season 
x sex has more df than Season or Sex, and Time x Sex has fewer .... 
Even if we had the reference (and the OP really should have given us 
that to allow him to reproduce it under 'fair use' copyright law) I 
guess we would be little the wiser.

> -pd
>
> On 14 Jun 2014, at 10:01 , Luis Fernando Garc?a <luysgarcia at gmail.com> wrote:
>
>> Dear all,
>>
>> I am making an analysis using a GLM using three explanatory variables and a
>> response variable. I need to obtain a table similar to this one,
>> http://postimg.org/image/5sau79wlt/r
>>
>> nevertheless, I have not been able to do it. I am having a hard time
>> specially getting the chi square values. I would like to know how to obatin
>> them. I have used the function ANOVA, but it shows me the deviance but not
>> the Chi-Square values, can be used these values?
>>
>> I also would like to know what function could help me to make ad hoc
>> comparisons for single variables and interactions.
>>
>> If any of you knows how to do both estimations, I would really appreciate
>> it.
>>
>> All the best!!!
>>
>> This is my script
>> a=read.table("ricis3.txt",header=T)
>> attach(a)
>> model7=glm(Count~Sex+Time+Behaviour+Sex*Time+Sex*Behaviour+Time+Behaviour*Sex,family=poisson)
>> summary(model7)
>> anova(model7,test="Chi")
>> <ricis3.txt>______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From dwinsemius at comcast.net  Sat Jun 14 22:18:22 2014
From: dwinsemius at comcast.net (David Winsemius)
Date: Sat, 14 Jun 2014 13:18:22 -0700
Subject: [R] Numerical integration with R
In-Reply-To: <CA+dpOJ=9NUd=QWQ+HqOmNjRT0J4qm26q03QSb5AFeOvQ6vqnYQ@mail.gmail.com>
References: <CA+dpOJ=9NUd=QWQ+HqOmNjRT0J4qm26q03QSb5AFeOvQ6vqnYQ@mail.gmail.com>
Message-ID: <A08A5755-AAA9-49BF-BAAE-D7A56459818A@comcast.net>


On Jun 14, 2014, at 7:40 AM, Christofer Bogaso wrote:

> Hi again,
> 
> I was tying to solve following 2-fold integration with package cubature.
> However spending approximately 2 hours it failed to generate any number. I
> am using latest R with win-7 machine having 4gb ram.
> 
>> library(cubature)
>> f <- function(x) {
> + z1 <- x[1]
> + z2 <- x[2]
> +
> + Rho = 1
> +
> + L <- log(1 - pnorm(z1)) * log(1 - pnorm(Rho * z1 + sqrt(1 - Rho^2) * z2))
> * dnorm(z1) * dnorm(z2)
> +
> + return(L)
> + }; adaptIntegrate(f, lowerLimit = c(-Inf, -Inf), upperLimit = c(Inf, Inf))
> Error in adaptIntegrate(f, lowerLimit = c(-Inf, -Inf), upperLimit = c(Inf,
> :
>  'Realloc' could not re-allocate memory (1006632880 bytes)
> In addition: Warning messages:
> 1: In adaptIntegrate(f, lowerLimit = c(-Inf, -Inf), upperLimit = c(Inf,  :
>  Reached total allocation of 1535Mb: see help(memory.size)
> 2: In adaptIntegrate(f, lowerLimit = c(-Inf, -Inf), upperLimit = c(Inf,  :
>  Reached total allocation of 1535Mb: see help(memory.size)
> 
> 
> Would really appreciate if someone helps me to sort out this problem.

You are posting a problem with no data. You are also not explaining what you are trying to do. In particular, what was your intent when you wrote:

    upperLimit = c(Inf, Inf)   # ????

When I run this with finite limits that are increasing in range  and several values for a length 2 "x"-vector

x <- c(0.1,0.1)
x <-c(.1, 0 )
x <- c(10,10)
x <- c(10, -10)

I consistently get:

#------------
> adaptIntegrate(f, lowerLimit = c(-1000, 1000), upperLimit = c(-1000, 1000))
$integral
[1] 0

$error
[1] 0

$functionEvaluations
[1] 17

$returnCode
[1] 0
#---------------

Which makes me think there is something mathematically degenerate about your "L" expression.

> 
> Thanks and regards,
> 
> 	[[alternative HTML version deleted]]


Arrrgh. Pray tell, exactly how many years have you been posting to R-help? I've checked... and it's really not that difficult to get gmail to send plain text.

-- 
David Winsemius
Alameda, CA, USA


From j.bayat194 at gmail.com  Sat Jun 14 19:53:26 2014
From: j.bayat194 at gmail.com (javad bayat)
Date: Sat, 14 Jun 2014 22:23:26 +0430
Subject: [R] Logistic Regression
Message-ID: <CANTxAmJ0is-4GS-ko4WA0Ad245GFVvEOLSrzhqkuwpj+1wM10A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140614/dee4a32e/attachment.pl>

From dkh3466 at gmail.com  Sat Jun 14 10:15:45 2014
From: dkh3466 at gmail.com (Dan Hughes)
Date: Sat, 14 Jun 2014 09:15:45 +0100
Subject: [R] Output for Boot function in Car package
Message-ID: <CA+-9A=eMhsi72ZGThkZ01n9R1vFMCG_5bHheahQ=hyFmaJgERg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140614/d07639bf/attachment.pl>

From eliza_botto at hotmail.com  Sat Jun 14 16:19:44 2014
From: eliza_botto at hotmail.com (eliza botto)
Date: Sat, 14 Jun 2014 14:19:44 +0000
Subject: [R] data format setting
In-Reply-To: <ifpejd7desyjq0jun1qqjt3l.1402718944406@email.android.com>
References: <ifpejd7desyjq0jun1qqjt3l.1402718944406@email.android.com>
Message-ID: <BLU170-W93799A8095A1A48ABAF68589140@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140614/b69e328d/attachment.pl>

From agony_jah at yahoo.com  Sat Jun 14 22:03:21 2014
From: agony_jah at yahoo.com (Agony)
Date: Sat, 14 Jun 2014 13:03:21 -0700 (PDT)
Subject: [R] How to draw Bubble chart with mini pie charts as bubbles in R
Message-ID: <1402776201.7516.YahooMailBasic@web120401.mail.ne1.yahoo.com>

Dear all,
Good day!

Could anybody help me how to draw a bubble chart with mini pie charts as bubbles in R ?
Introducing any experiences, books, booklet or source code will appreciated.

Bunch of thanks.

Best,
Amir


From dwinsemius at comcast.net  Sun Jun 15 00:08:21 2014
From: dwinsemius at comcast.net (David Winsemius)
Date: Sat, 14 Jun 2014 15:08:21 -0700
Subject: [R] Output for Boot function in Car package
In-Reply-To: <CA+-9A=eMhsi72ZGThkZ01n9R1vFMCG_5bHheahQ=hyFmaJgERg@mail.gmail.com>
References: <CA+-9A=eMhsi72ZGThkZ01n9R1vFMCG_5bHheahQ=hyFmaJgERg@mail.gmail.com>
Message-ID: <F16A40E0-6B97-4AF0-B1C5-3A69B6F5A9FA@comcast.net>


On Jun 14, 2014, at 1:15 AM, Dan Hughes wrote:

> Dear users,
> 
> Can anyone help with a rather simplistic question about the interpretation
> of output using the Boot ( ) function in the Car package?
> 
> I am trying to bootstrap a simple univariate linear regression in order to
> look at the bootstrap regression coefficients e.g.
> 
> mod1 <- lm (y~x)
> mod1.b <- Boot(mod1, R=999)
> summary (mod1.b)
> 
> This returns output like this:
> 
>                  R      original       bootBias      bootSE       bootMed
>  (Intercept) 999   5.365528   -8.0960e-05   0.0501306   5.365241
>  x              999   0.032211    7.3683e-05   0.0029743   0.032158
> 
> I'm having trouble finding out what "bootMed" means. If 'original' is the
> non-bootstrapped regression coefficient, is bootMed the bootstrapped
> regression coefficient?
> 
> I presume this is a frighteningly simple question for regular car package
> users, but I can't seem to find an explanation what this means.

I'm not a regular or even an intermittent user of `car` but offhand I would suspect it is the median. 

Do read the Posting Guide, 
and the help page for Boot and the tutorial that is linked from that help page,  
and please learn to post in plain text.

> 
> Best wishes
> 
> Dan Hughes
> 
> 	[[alternative HTML version deleted]]

-- 

David Winsemius
Alameda, CA, USA


From msuzen at gmail.com  Sun Jun 15 02:13:13 2014
From: msuzen at gmail.com (Suzen, Mehmet)
Date: Sun, 15 Jun 2014 02:13:13 +0200
Subject: [R] Logistic Regression
In-Reply-To: <CANTxAmJ0is-4GS-ko4WA0Ad245GFVvEOLSrzhqkuwpj+1wM10A@mail.gmail.com>
References: <CANTxAmJ0is-4GS-ko4WA0Ad245GFVvEOLSrzhqkuwpj+1wM10A@mail.gmail.com>
Message-ID: <CAPtbhHx4pbQuFSZa3Yg_hu-YG_=BFM7gyZE8wBVAY3avRN7Fgw@mail.gmail.com>

You might want to read this vignette:
http://cran.r-project.org/web/packages/HSAUR/vignettes/Ch_logistic_regression_glm.pdf

On 14 June 2014 19:53, javad bayat <j.bayat194 at gmail.com> wrote:
> Dear all, I have to use "Zelig" package for doing logistic regression.
> How can I use Zelig package for logistic regression?
>
> I did this code by glm function:
>
> glm1 = glm(kod~Curv+Elev+Out.c+Slope+Aspect,data=data,
>            family=binomial)
> summary(glm1)
>
> But the results were not appropriate for my data.
>
> Many thanks for your helps.
>
>
>
>
>
>
>
> --
> Best Regards
> Javad Bayat
> M.Sc. Environment Engineering
> Shahid Beheshti (National) University (SBU)
> Alternative Mail: bayat194 at yahoo.com
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From msuzen at gmail.com  Sun Jun 15 02:34:02 2014
From: msuzen at gmail.com (Suzen, Mehmet)
Date: Sun, 15 Jun 2014 02:34:02 +0200
Subject: [R] Defining default method for S3, S4 and R5 classes
In-Reply-To: <CAFnz2-89ZJDAxTvWqhNGij=ULDN3rHADGO1i5BM2DUsiiffpCg@mail.gmail.com>
References: <CAFnz2-89ZJDAxTvWqhNGij=ULDN3rHADGO1i5BM2DUsiiffpCg@mail.gmail.com>
Message-ID: <CAPtbhHyYoNggOvUsLxn0+vFJmHy+ehqG++zuA-GcFykLBSv0wg@mail.gmail.com>

There is a nice tutorial on this:
http://adv-r.had.co.nz/OO-essentials.html

For an in depth guide, have a look at the book from John Chambers,
Software for data analysis programming with R.

On 13 June 2014 12:20, Luca Cerone <luca.cerone at gmail.com> wrote:
> Dear all,
>
> I am writing a script implementing a pipeline to analyze some of the
> data we receive.
>
> One of the steps in this pipeline involves clustering the data, and I
> am interested
> in studying the effects of different clustering algorithms on the final results.
>
> I am having issues making my code general enough because the
> clustering algorithms we are interested all return different types of
> objects (S3, S4 and R5 classes, as well as simple named lists).
>
> >From the output of these algorithms I need to extract a list with as many
> elements as the number of clusters and such that each element contains the ids
> of the elements in each cluster.
>
> I have easily done this for each of the cluster algorithms,
> the problem is: how can I make so that rather than having to check for
> classes and
> types this is done automatically?
>
> For example, for the algorithms that return S3 classes I have defined
> a method "get_cluster_list.default" and then created the methods for
> the individual classes, which is used in the main body of the
> pipeline.
>
> I have no idea how I can do this for S4 and R5 classes and,  more
> importantly, I would
> like an approach that works when using all S3, S4 and R5 classes.
>
> Do you know how I could do this?
>
> Thanks for the help,
> Luca
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jim at bitwrit.com.au  Sun Jun 15 02:40:08 2014
From: jim at bitwrit.com.au (Jim Lemon)
Date: Sun, 15 Jun 2014 10:40:08 +1000
Subject: [R] How to draw Bubble chart with mini pie charts as bubbles in
	R
In-Reply-To: <1402776201.7516.YahooMailBasic@web120401.mail.ne1.yahoo.com>
References: <1402776201.7516.YahooMailBasic@web120401.mail.ne1.yahoo.com>
Message-ID: <2762716.I7EE9ZieQi@localhost.localdomain>

On Sat, 14 Jun 2014 01:03:21 PM Agony wrote:
> Dear all,
> Good day!
> 
> Could anybody help me how to draw a bubble chart with mini pie 
charts as
> bubbles in R ? Introducing any experiences, books, booklet or source 
code
> will appreciated.
> 
Hi Amir,
The floating.pie function (plotrix) might do what you want. For 
example:

# first create a simple function to do the chart
pie_bubbles<-function(xpos,ypos,radii,sectors,
 sector_col=NULL,main="",xlab="",ylab="") {

 xlim<-c(min(xpos-radii),max(xpos+radii))
 ylim<-c(min(ypos-radii),max(ypos+radii))
 nbubbles<-length(xpos)
 if(is.null(sector_col)) {
  sector_col<-list()
  for(scol in 1:nbubbles)
   sector_col[[scol]]<-rainbow(length(sectors[[scol]]))
 }
 plot(0,xlim=xlim,ylim=ylim,type="n",
  main=main,xlab=xlab,ylab=ylab)
 for(bubble in 1:nbubbles)
  floating.pie(xpos=xpos[bubble],ypos=ypos[bubble],
   x=sectors[[bubble]],radius=radii[bubble],
   col=sector_col[[bubble]])
}
# set the x positions
xpos<-c(2,4,6,8,10)
# and the y positions
ypos<-c(4,8,6,10,2)
# the radii are the "bubble" radii
radii<-c(1,0.5,1.2,0.7,1.3)
# these are the sector extents of the pies
sectors<-list(1:4,c(5,3,8,6,2),c(3,2,1),c(3,7,5,8),c(2.5,3.7))
# get the plotrix package
library(plotrix)
pie_bubbles(xpos,ypos,radii,sectors,main="Pie bubbles")

The above is pretty basic, but it should get you started.

Jim


From marius.hofert at math.ethz.ch  Sun Jun 15 07:15:17 2014
From: marius.hofert at math.ethz.ch (Marius Hofert)
Date: Sat, 14 Jun 2014 22:15:17 -0700
Subject: [R] sort() depends on locale
Message-ID: <CAM3-KjaYfqL2MdAr5Ksx9v_-fC01UG8giyq6cO8uyuUyxv6pEA@mail.gmail.com>

Hi,

If I use invisible(Sys.setlocale("LC_COLLATE", "C")) in ~/.Rprofile, then

> sort(c("L.Y", "Lu", "L.Q"))
[1] "L.Q" "L.Y" "Lu"

whereas using invisible(Sys.setlocale("LC_COLLATE", "en_US.UTF-8")) results in

> sort(c("L.Y", "Lu", "L.Q"))
[1] "L.Q" "Lu"  "L.Y"

I know this issue has appeared already
(https://stat.ethz.ch/pipermail/r-help//2012-February/304089.html), I
just don't see a reason for the second output: either '.' comes before
letters, then the result should be
"L.Q" "L.Y" "Lu" or it comes afterwards, then it should be "Lu" "L.Q"
"L.Y" -- the above result thus seems inconsistent to any useful notion
of 'sort' (?)

Cheers,

Marius


From kridox at ymail.com  Sun Jun 15 08:45:01 2014
From: kridox at ymail.com (Pascal Oettli)
Date: Sun, 15 Jun 2014 15:45:01 +0900
Subject: [R] sort() depends on locale
In-Reply-To: <CAM3-KjaYfqL2MdAr5Ksx9v_-fC01UG8giyq6cO8uyuUyxv6pEA@mail.gmail.com>
References: <CAM3-KjaYfqL2MdAr5Ksx9v_-fC01UG8giyq6cO8uyuUyxv6pEA@mail.gmail.com>
Message-ID: <CAAcyNCxQJ5oENHE0gtJdLsAyE5jdDgrxKZQ3fpHgE2hmy2B22w@mail.gmail.com>

Hello,

Please provide your sessionInfo(). I don't see this issue with R 3.1.0
Patched on Linux.

Regards,
Pascal

On Sun, Jun 15, 2014 at 2:15 PM, Marius Hofert
<marius.hofert at math.ethz.ch> wrote:
> Hi,
>
> If I use invisible(Sys.setlocale("LC_COLLATE", "C")) in ~/.Rprofile, then
>
>> sort(c("L.Y", "Lu", "L.Q"))
> [1] "L.Q" "L.Y" "Lu"
>
> whereas using invisible(Sys.setlocale("LC_COLLATE", "en_US.UTF-8")) results in
>
>> sort(c("L.Y", "Lu", "L.Q"))
> [1] "L.Q" "Lu"  "L.Y"
>
> I know this issue has appeared already
> (https://stat.ethz.ch/pipermail/r-help//2012-February/304089.html), I
> just don't see a reason for the second output: either '.' comes before
> letters, then the result should be
> "L.Q" "L.Y" "Lu" or it comes afterwards, then it should be "Lu" "L.Q"
> "L.Y" -- the above result thus seems inconsistent to any useful notion
> of 'sort' (?)
>
> Cheers,
>
> Marius
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Pascal Oettli
Project Scientist
JAMSTEC
Yokohama, Japan


From ripley at stats.ox.ac.uk  Sun Jun 15 08:55:39 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun, 15 Jun 2014 07:55:39 +0100
Subject: [R] sort() depends on locale (and platform and build)
In-Reply-To: <CAAcyNCxQJ5oENHE0gtJdLsAyE5jdDgrxKZQ3fpHgE2hmy2B22w@mail.gmail.com>
References: <CAM3-KjaYfqL2MdAr5Ksx9v_-fC01UG8giyq6cO8uyuUyxv6pEA@mail.gmail.com>
	<CAAcyNCxQJ5oENHE0gtJdLsAyE5jdDgrxKZQ3fpHgE2hmy2B22w@mail.gmail.com>
Message-ID: <539D436B.2090903@stats.ox.ac.uk>

On 15/06/2014 07:45, Pascal Oettli wrote:
> Hello,
>
> Please provide your sessionInfo(). I don't see this issue with R 3.1.0
> Patched on Linux.

Nor on any of my platforms.

We would also need to know if ICU was found when R was installed: see 
?Comparison .

>
> Regards,
> Pascal
>
> On Sun, Jun 15, 2014 at 2:15 PM, Marius Hofert
> <marius.hofert at math.ethz.ch> wrote:
>> Hi,
>>
>> If I use invisible(Sys.setlocale("LC_COLLATE", "C")) in ~/.Rprofile, then
>>
>>> sort(c("L.Y", "Lu", "L.Q"))
>> [1] "L.Q" "L.Y" "Lu"
>>
>> whereas using invisible(Sys.setlocale("LC_COLLATE", "en_US.UTF-8")) results in
>>
>>> sort(c("L.Y", "Lu", "L.Q"))
>> [1] "L.Q" "Lu"  "L.Y"
>>
>> I know this issue has appeared already
>> (https://stat.ethz.ch/pipermail/r-help//2012-February/304089.html), I
>> just don't see a reason for the second output: either '.' comes before
>> letters, then the result should be
>> "L.Q" "L.Y" "Lu" or it comes afterwards, then it should be "Lu" "L.Q"
>> "L.Y" -- the above result thus seems inconsistent to any useful notion
>> of 'sort' (?)
>>
>> Cheers,
>>
>> Marius
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From K.Ropkins at its.leeds.ac.uk  Sun Jun 15 12:51:41 2014
From: K.Ropkins at its.leeds.ac.uk (Karl Ropkins)
Date: Sun, 15 Jun 2014 11:51:41 +0100
Subject: [R] How to draw Bubble chart with mini pie charts as bubbles
In-Reply-To: <mailman.13.1402826406.27225.r-help@r-project.org>
References: <mailman.13.1402826406.27225.r-help@r-project.org>
Message-ID: <928C4F7877280844B906D12D63A3F15B01C8A65A09D0@HERMES8.ds.leeds.ac.uk>

Dear Amir,

There are a couple of panel functions in loa, a package of lattice add-ins, that might be of help:
 
require(loa)
# Use a subsample of lat.lon.meuse dataset in loa
temp <- lat.lon.meuse[sample(1:155, 15),]
# plot Cu/Pb/Zn pie plots at sampling locations 
loaPlot(copper+lead+zinc~longitude*latitude, panel=panel.zcasePiePlot, data=temp)
# then rescale smaller pie segments on the fly
loaPlot(copper*10+lead*4+zinc~longitude*latitude, panel=panel.zcasePiePlot, data=temp)

Best Wishes,

Karl

------------------------------

Message: 5
Date: Sat, 14 Jun 2014 13:03:21 -0700 (PDT)
From: Agony <agony_jah at yahoo.com>
To: r-help at r-project.org
Subject: [R] How to draw Bubble chart with mini pie charts as bubbles
        in R
Message-ID:
        <1402776201.7516.YahooMailBasic at web120401.mail.ne1.yahoo.com>
Content-Type: text/plain; charset=us-ascii

Dear all,
Good day!

Could anybody help me how to draw a bubble chart with mini pie charts as bubbles in R ?
Introducing any experiences, books, booklet or source code will appreciated.

Bunch of thanks.

Best,
Amir

From murdoch.duncan at gmail.com  Sun Jun 15 13:16:55 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sun, 15 Jun 2014 07:16:55 -0400
Subject: [R] sort() depends on locale
In-Reply-To: <CAM3-KjaYfqL2MdAr5Ksx9v_-fC01UG8giyq6cO8uyuUyxv6pEA@mail.gmail.com>
References: <CAM3-KjaYfqL2MdAr5Ksx9v_-fC01UG8giyq6cO8uyuUyxv6pEA@mail.gmail.com>
Message-ID: <539D80A7.2080505@gmail.com>

On 15/06/2014, 1:15 AM, Marius Hofert wrote:
> Hi,
> 
> If I use invisible(Sys.setlocale("LC_COLLATE", "C")) in ~/.Rprofile, then
> 
>> sort(c("L.Y", "Lu", "L.Q"))
> [1] "L.Q" "L.Y" "Lu"
> 
> whereas using invisible(Sys.setlocale("LC_COLLATE", "en_US.UTF-8")) results in
> 
>> sort(c("L.Y", "Lu", "L.Q"))
> [1] "L.Q" "Lu"  "L.Y"
> 
> I know this issue has appeared already
> (https://stat.ethz.ch/pipermail/r-help//2012-February/304089.html), I
> just don't see a reason for the second output: either '.' comes before
> letters, then the result should be
> "L.Q" "L.Y" "Lu" or it comes afterwards, then it should be "Lu" "L.Q"
> "L.Y" -- the above result thus seems inconsistent to any useful notion
> of 'sort' (?)

I don't see this either, but it appears that on your platform the "." is
simply being ignored, which might be a useful kind of sorting in some
contexts.

Duncan Murdoch


From ripley at stats.ox.ac.uk  Sun Jun 15 13:33:07 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun, 15 Jun 2014 12:33:07 +0100
Subject: [R] sort() depends on locale
In-Reply-To: <539D80A7.2080505@gmail.com>
References: <CAM3-KjaYfqL2MdAr5Ksx9v_-fC01UG8giyq6cO8uyuUyxv6pEA@mail.gmail.com>
	<539D80A7.2080505@gmail.com>
Message-ID: <539D8473.1010603@stats.ox.ac.uk>

On 15/06/2014 12:16, Duncan Murdoch wrote:
> On 15/06/2014, 1:15 AM, Marius Hofert wrote:
>> Hi,
>>
>> If I use invisible(Sys.setlocale("LC_COLLATE", "C")) in ~/.Rprofile, then
>>
>>> sort(c("L.Y", "Lu", "L.Q"))
>> [1] "L.Q" "L.Y" "Lu"
>>
>> whereas using invisible(Sys.setlocale("LC_COLLATE", "en_US.UTF-8")) results in
>>
>>> sort(c("L.Y", "Lu", "L.Q"))
>> [1] "L.Q" "Lu"  "L.Y"
>>
>> I know this issue has appeared already
>> (https://stat.ethz.ch/pipermail/r-help//2012-February/304089.html), I
>> just don't see a reason for the second output: either '.' comes before
>> letters, then the result should be
>> "L.Q" "L.Y" "Lu" or it comes afterwards, then it should be "Lu" "L.Q"
>> "L.Y" -- the above result thus seems inconsistent to any useful notion
>> of 'sort' (?)
>
> I don't see this either, but it appears that on your platform the "." is
> simply being ignored, which might be a useful kind of sorting in some
> contexts.

ICU implements that:

icuSetCollate(locale="en_US", alternate_handling="shifted")
sort(c("L.Y", "Lu", "L.Q"))

See ?icuSetCollate and the references there and in ?Comparison.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From jfox at mcmaster.ca  Sun Jun 15 13:59:24 2014
From: jfox at mcmaster.ca (John Fox)
Date: Sun, 15 Jun 2014 07:59:24 -0400
Subject: [R] Output for Boot function in Car package
In-Reply-To: <F16A40E0-6B97-4AF0-B1C5-3A69B6F5A9FA@comcast.net>
References: <CA+-9A=eMhsi72ZGThkZ01n9R1vFMCG_5bHheahQ=hyFmaJgERg@mail.gmail.com>
	<F16A40E0-6B97-4AF0-B1C5-3A69B6F5A9FA@comcast.net>
Message-ID: <web-514659944@cgpsrv2.cis.mcmaster.ca>

Dear David and Dan,

Yes, the column labelled "bootMed" is the median of the bootstrapped values. As it turns out, this isn't documented in the help for the car package, nor in the on-line appendix on bootstrapping from the CAR book. It's easy, however, to print car:::summary.boot to see the straight-forward things that it does.

I hope this helps,
 John

------------------------------------------------
John Fox, Professor
McMaster University
Hamilton, Ontario, Canada
http://socserv.mcmaster.ca/jfox/

On Sat, 14 Jun 2014 15:08:21 -0700
 David Winsemius <dwinsemius at comcast.net> wrote:
> 
> On Jun 14, 2014, at 1:15 AM, Dan Hughes wrote:
> 
> > Dear users,
> > 
> > Can anyone help with a rather simplistic question about the interpretation
> > of output using the Boot ( ) function in the Car package?
> > 
> > I am trying to bootstrap a simple univariate linear regression in order to
> > look at the bootstrap regression coefficients e.g.
> > 
> > mod1 <- lm (y~x)
> > mod1.b <- Boot(mod1, R=999)
> > summary (mod1.b)
> > 
> > This returns output like this:
> > 
> >                  R      original       bootBias      bootSE       bootMed
> >  (Intercept) 999   5.365528   -8.0960e-05   0.0501306   5.365241
> >  x              999   0.032211    7.3683e-05   0.0029743   0.032158
> > 
> > I'm having trouble finding out what "bootMed" means. If 'original' is the
> > non-bootstrapped regression coefficient, is bootMed the bootstrapped
> > regression coefficient?
> > 
> > I presume this is a frighteningly simple question for regular car package
> > users, but I can't seem to find an explanation what this means.
> 
> I'm not a regular or even an intermittent user of `car` but offhand I would suspect it is the median. 
> 
> Do read the Posting Guide, 
> and the help page for Boot and the tutorial that is linked from that help page,  
> and please learn to post in plain text.
> 
> > 
> > Best wishes
> > 
> > Dan Hughes
> > 
> > 	[[alternative HTML version deleted]]
> 
> -- 
> 
> David Winsemius
> Alameda, CA, USA
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From prydelek at carnegiescience.edu  Sun Jun 15 05:34:46 2014
From: prydelek at carnegiescience.edu (Paul Rydelek)
Date: Sat, 14 Jun 2014 22:34:46 -0500
Subject: [R] abline; setting plot limits
Message-ID: <CFC27E86.C755%prydelek@carnegiescience.edu>

Relatively new user with a question regarding abline.

I want to draw a st. line fit to some data but I want the line to span the
range of the x-data and NOT the plot limits.
In short the line spans xmin to xmax(of plot axis) but I want it to span
xmin to xmax (of x data).
Can this but done with abline or do I have to use lines and construct the
line from a+bx?


Paul Rydelek, Ph.D.
5232 Dorset Dr.
Memphis, TN  38117





From minshall at acm.org  Sun Jun 15 06:53:36 2014
From: minshall at acm.org (Greg Minshall)
Date: Sun, 15 Jun 2014 07:53:36 +0300
Subject: [R] imlib2, pixmap?
Message-ID: <97646.1402808016@greg-minshalls-mbp.local>

hi.  i'm doing some statistical analysis on image files.  the pixmap
package is great, but has the limitation that it is only able to read
(and write) data in PNM format.

there's a nice unix/linux/... library known as imlib2 that is able to
read and write image data in many different formats.

i'm wondering if anyone has written (in C, presumably) code to allow
creating a pixmap from any image format known to imlib2?

(i know about ImageMagick's convert program, and have been doing things
this way, but it is somewhat inefficient, and aesthetically not as
pleasing).

if no one has done this, i'll probably do it (at least for my own use,
never having produced a "public" package).

cheers, Greg Minshall


From agony_jah at yahoo.com  Sun Jun 15 15:25:01 2014
From: agony_jah at yahoo.com (Agony)
Date: Sun, 15 Jun 2014 06:25:01 -0700 (PDT)
Subject: [R] How to draw Bubble chart with mini pie charts as bubbles in
	R
In-Reply-To: <2762716.I7EE9ZieQi@localhost.localdomain>
Message-ID: <1402838701.75838.YahooMailBasic@web120402.mail.ne1.yahoo.com>

Hi Jim,
Very great help.
Bunch of thanks.

Yours,
Amir
--------------------------------------------
On Sun, 6/15/14, Jim Lemon <jim at bitwrit.com.au> wrote:

 Subject: Re: [R] How to draw Bubble chart with mini pie charts as bubbles in R
 To: r-help at r-project.org

 Date: Sunday, June 15, 2014, 5:10 AM

 On Sat, 14 Jun 2014
 01:03:21 PM Agony wrote:
 > Dear all,
 > Good day!
 > 
 > Could anybody help me how to draw a bubble
 chart with mini pie 
 charts as
 > bubbles in R ? Introducing any
 experiences, books, booklet or source 
 code
 > will
 appreciated.
 > 
 Hi
 Amir,
 The floating.pie function (plotrix)
 might do what you want. For 
 example:

 # first create a simple
 function to do the chart
 pie_bubbles<-function(xpos,ypos,radii,sectors,

 sector_col=NULL,main="",xlab="",ylab="")
 {


 xlim<-c(min(xpos-radii),max(xpos+radii))

 ylim<-c(min(ypos-radii),max(ypos+radii))

 nbubbles<-length(xpos)

 if(is.null(sector_col)) {
 ?
 sector_col<-list()
 ? for(scol in
 1:nbubbles)
 ???sector_col[[scol]]<-rainbow(length(sectors[[scol]]))
  }

 plot(0,xlim=xlim,ylim=ylim,type="n",
 ? main=main,xlab=xlab,ylab=ylab)
  for(bubble in 1:nbubbles)
 ?
 floating.pie(xpos=xpos[bubble],ypos=ypos[bubble],
 ???x=sectors[[bubble]],radius=radii[bubble],
 ???col=sector_col[[bubble]])
 }
 # set the x positions
 xpos<-c(2,4,6,8,10)
 # and
 the y positions
 ypos<-c(4,8,6,10,2)
 # the radii are the "bubble" radii
 radii<-c(1,0.5,1.2,0.7,1.3)
 # these are the sector extents of the pies
 sectors<-list(1:4,c(5,3,8,6,2),c(3,2,1),c(3,7,5,8),c(2.5,3.7))
 # get the plotrix package
 library(plotrix)
 pie_bubbles(xpos,ypos,radii,sectors,main="Pie
 bubbles")

 The above is
 pretty basic, but it should get you started.

 Jim


From Pinkert at students.uni-marburg.de  Sun Jun 15 17:04:19 2014
From: Pinkert at students.uni-marburg.de (TypeTwo)
Date: Sun, 15 Jun 2014 08:04:19 -0700 (PDT)
Subject: [R] Problem with converting a list of grids to a list of polygons
Message-ID: <1402844659685-4692142.post@n4.nabble.com>

Hi. 

For a spatial analysis (its visualization) I need to produce a map of
conditions and traits. 
When I used SpatialPixelsDataFrame (sp package) my grid cells were regular
and between each row was a small gap, which is not only messy but incorrect.
So I generated the coords of each grid from the centroids in order to
elongate the cells manually (or does anybody know another way to solve
this?). 

But I got stuck when I tried to convert the XMIN, XMAX, YMIN, YMAX - corner
points to a list of polygons (and keeping at least the ID as individuell
reference). 


I really don?t get it, how can I read data of this format as a list of
polygons? 
?head"(ID, XMIN, XMAX, YMIN, YMAX,  lat, lng, altc_mean) 

polys <- Polygons(list(Polygon(assemblage[,c("XMIN", "XMAX", "YMIN",
"YMAX?)])), ID=assemblage$ID) 
SP <- SpatialPolygons(polys) 
SPDF <- SpatialPolygonsDataFrame(SP, data=data.frame(x= assemblage$lng, y=
assemblage$lat, row.names=row.names(SP))) 




Already thanks for your help, 
Stefan         



--
View this message in context: http://r.789695.n4.nabble.com/Problem-with-converting-a-list-of-grids-to-a-list-of-polygons-tp4692142.html
Sent from the R help mailing list archive at Nabble.com.


From murdoch.duncan at gmail.com  Sun Jun 15 17:54:52 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sun, 15 Jun 2014 11:54:52 -0400
Subject: [R] abline; setting plot limits
In-Reply-To: <CFC27E86.C755%prydelek@carnegiescience.edu>
References: <CFC27E86.C755%prydelek@carnegiescience.edu>
Message-ID: <539DC1CC.5070204@gmail.com>

On 14/06/2014, 11:34 PM, Paul Rydelek wrote:
> Relatively new user with a question regarding abline.
> 
> I want to draw a st. line fit to some data but I want the line to span the
> range of the x-data and NOT the plot limits.
> In short the line spans xmin to xmax(of plot axis) but I want it to span
> xmin to xmax (of x data).
> Can this but done with abline or do I have to use lines and construct the
> line from a+bx?

You can use lines() or segments(), you can't use abline().

Duncan Murdoch

> 
> 
> Paul Rydelek, Ph.D.
> 5232 Dorset Dr.
> Memphis, TN  38117
> 
> 
> 
> 
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From marius.hofert at math.ethz.ch  Sun Jun 15 18:34:28 2014
From: marius.hofert at math.ethz.ch (Marius Hofert)
Date: Sun, 15 Jun 2014 09:34:28 -0700
Subject: [R] sort() depends on locale (and platform and build)
In-Reply-To: <539D436B.2090903@stats.ox.ac.uk>
References: <CAM3-KjaYfqL2MdAr5Ksx9v_-fC01UG8giyq6cO8uyuUyxv6pEA@mail.gmail.com>
	<CAAcyNCxQJ5oENHE0gtJdLsAyE5jdDgrxKZQ3fpHgE2hmy2B22w@mail.gmail.com>
	<539D436B.2090903@stats.ox.ac.uk>
Message-ID: <CAM3-KjZ6tWX=aKLvhCbbKvb_4WsH8PFe=6mFUyCH7sXsMJcbgQ@mail.gmail.com>

Hi,

Thanks for you help. I use R-devel under Ubuntu 14.04, here is the output of
sessionInfo():

> sessionInfo()
R Under development (unstable) (2014-06-02 r65832)
Platform: x86_64-unknown-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
 [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] compiler_3.2.0 tools_3.2.0


I assume ICU was not found/installed when R was installed as executing the first
couple of lines of the examples section of ?icuSetCollate leads to:

Warning message:
In icuSetCollate(case_first = "upper") : ICU is not supported on this build
[1] "aarhus" "Aarhus" "safe"   "test"   "Zoo"


Since only the (default) locale "C" gives the order I expected, I consider
changing my ~/.Rprofile. But it certainly had a reason why I changed it to
"en_US.UTF-8" at some point... hope that does not break anything else. Is there
any "recommendation" what to use in ~/.Rprofile (the default?)? And is the
'recommended approach' to have ICU installed and change the sorting order via
icuSetCollate if necessary?

I would have not expected any influence of the locale on the sorting order,
that's quite good to know. In fact, the example came up after I tried to sort
students' grades in a class with several students having the same last name
(which I made unique by adding the first names with a '.' separator)... quite a
'delicate' issue...

Cheers,

Marius


From ripley at stats.ox.ac.uk  Sun Jun 15 18:47:24 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun, 15 Jun 2014 17:47:24 +0100
Subject: [R] sort() depends on locale (and platform and build)
In-Reply-To: <CAM3-KjZ6tWX=aKLvhCbbKvb_4WsH8PFe=6mFUyCH7sXsMJcbgQ@mail.gmail.com>
References: <CAM3-KjaYfqL2MdAr5Ksx9v_-fC01UG8giyq6cO8uyuUyxv6pEA@mail.gmail.com>
	<CAAcyNCxQJ5oENHE0gtJdLsAyE5jdDgrxKZQ3fpHgE2hmy2B22w@mail.gmail.com>
	<539D436B.2090903@stats.ox.ac.uk>
	<CAM3-KjZ6tWX=aKLvhCbbKvb_4WsH8PFe=6mFUyCH7sXsMJcbgQ@mail.gmail.com>
Message-ID: <539DCE1C.6080703@stats.ox.ac.uk>

On 15/06/2014 17:34, Marius Hofert wrote:
> Hi,
>
> Thanks for you help. I use R-devel under Ubuntu 14.04, here is the output of
> sessionInfo():
>
>> sessionInfo()
> R Under development (unstable) (2014-06-02 r65832)
> Platform: x86_64-unknown-linux-gnu (64-bit)
>
> locale:
>   [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>   [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>   [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>   [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
>   [9] LC_ADDRESS=C               LC_TELEPHONE=C
> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> loaded via a namespace (and not attached):
> [1] compiler_3.2.0 tools_3.2.0
>
>
> I assume ICU was not found/installed when R was installed as executing the first
> couple of lines of the examples section of ?icuSetCollate leads to:
>
> Warning message:
> In icuSetCollate(case_first = "upper") : ICU is not supported on this build
> [1] "aarhus" "Aarhus" "safe"   "test"   "Zoo"
>
>
> Since only the (default) locale "C" gives the order I expected, I consider
> changing my ~/.Rprofile. But it certainly had a reason why I changed it to
> "en_US.UTF-8" at some point... hope that does not break anything else. Is there
> any "recommendation" what to use in ~/.Rprofile (the default?)? And is the
> 'recommended approach' to have ICU installed and change the sorting order via
> icuSetCollate if necessary?

Yes.  (You can use the locale category LC_COLLATE or icuSetCollate, but 
the recommended way to do the first is via the environment variables, 
not in .Rprofile.)

>
> I would have not expected any influence of the locale on the sorting order,
> that's quite good to know. In fact, the example came up after I tried to sort
> students' grades in a class with several students having the same last name
> (which I made unique by adding the first names with a '.' separator)... quite a
> 'delicate' issue...
>
> Cheers,
>
> Marius
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From marius.hofert at math.ethz.ch  Sun Jun 15 18:48:58 2014
From: marius.hofert at math.ethz.ch (Marius Hofert)
Date: Sun, 15 Jun 2014 09:48:58 -0700
Subject: [R] sort() depends on locale (and platform and build)
In-Reply-To: <539DCE1C.6080703@stats.ox.ac.uk>
References: <CAM3-KjaYfqL2MdAr5Ksx9v_-fC01UG8giyq6cO8uyuUyxv6pEA@mail.gmail.com>
	<CAAcyNCxQJ5oENHE0gtJdLsAyE5jdDgrxKZQ3fpHgE2hmy2B22w@mail.gmail.com>
	<539D436B.2090903@stats.ox.ac.uk>
	<CAM3-KjZ6tWX=aKLvhCbbKvb_4WsH8PFe=6mFUyCH7sXsMJcbgQ@mail.gmail.com>
	<539DCE1C.6080703@stats.ox.ac.uk>
Message-ID: <CAM3-KjZ2JpneaObmJn8TO9oJcPkCw3NOsPHhqS7x6ii=tr66JA@mail.gmail.com>

Hi,

... so something like this? [in foo.R]

old.coll <- Sys.getlocale("LC_COLLATE")
Sys.setlocale("LC_COLLATE", locale="C")
<do_your_sorting_here>
Sys.setlocale("LC_COLLATE", locale=old.coll)

Cheers,

Marius


From dcarlson at tamu.edu  Sun Jun 15 19:00:21 2014
From: dcarlson at tamu.edu (David L Carlson)
Date: Sun, 15 Jun 2014 17:00:21 +0000
Subject: [R] abline; setting plot limits
In-Reply-To: <539DC1CC.5070204@gmail.com>
References: <CFC27E86.C755%prydelek@carnegiescience.edu>
	<539DC1CC.5070204@gmail.com>
Message-ID: <53BF8FB63FAF2E4A9455EF1EE94DA726F76F25@mb02.ads.tamu.edu>

You can also use clip() before abline():

> x <- rnorm(25)
> y <- rnorm(25)
> plot(y~x)
> clip(min(x), max(x), min(y), max(y))
> abline(lm(y~x))

But the clipping region will affect anything else you add to the plot after the clip command. In package plotrix, ablineclip() sets and resets the clipping region.

David Carlson

-----Original Message-----
From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On Behalf Of Duncan Murdoch
Sent: Sunday, June 15, 2014 10:55 AM
To: Paul Rydelek; r-help at r-project.org
Subject: Re: [R] abline; setting plot limits

On 14/06/2014, 11:34 PM, Paul Rydelek wrote:
> Relatively new user with a question regarding abline.
> 
> I want to draw a st. line fit to some data but I want the line to span 
> the range of the x-data and NOT the plot limits.
> In short the line spans xmin to xmax(of plot axis) but I want it to 
> span xmin to xmax (of x data).
> Can this but done with abline or do I have to use lines and construct 
> the line from a+bx?

You can use lines() or segments(), you can't use abline().

Duncan Murdoch

> 
> 
> Paul Rydelek, Ph.D.
> 5232 Dorset Dr.
> Memphis, TN  38117
> 
> 
> 
> 
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From hccoles at lbl.gov  Sun Jun 15 20:39:25 2014
From: hccoles at lbl.gov (Henry)
Date: Sun, 15 Jun 2014 11:39:25 -0700 (PDT)
Subject: [R] reading time series csv file with read.zoo issues,
 then align time stamps
Message-ID: <1402857565677-4692157.post@n4.nabble.com>

Goal: get time series data interpolated on to desired time stamps.
I have two or more data sets that have time stamps that vary from 5 mins to
3-5 hours.
I want to get all the data put on common time stamps e.g. "00:05:00"
intervals.

I asked Gabor and got some very good code ( zoo aggregate, na.spline,
na.approx) but I'm having trouble getting the csv file read in and converted
to a zoo object so I can try getting these functions going again.  Here is
what Gabor sent last time.

_____________________start of what Gabor sent ______________________
If you are using zoo then the zoo FAQ discusses grids
   http://cran.r-project.org/web/packages/zoo/index.html
and the other 4 vignettes (pdf documents) and reference manual on that
page discuss more.

zoo does not supply its own time classes except where classes are
elsewhere missing.   Its design is completely independent of the time
class and it works with any time class that supports certain methods
(and that includes all popular ones).  See R News 4/1 for more on date
and time classes.

Here is some code:

Lines <- "10/11/2011 23:30:01     432.22
10/11/2011 23:31:17     432.32
10/11/2011 23:35:00     432.32
10/11/2011 23:36:18     432.22
10/11/2011 23:37:18     432.72
10/11/2011 23:39:19     432.23
10/11/2011 23:40:02     432.23
10/11/2011 23:45:00     432.23
10/11/2011 23:45:20     429.75
10/11/2011 23:46:20     429.65
10/11/2011 23:50:00     429.65
10/11/2011 23:51:22     429.75
10/11/2011 23:55:01     429.75
10/11/2011 23:56:23     429.55
10/12/2011 0:00:07      429.55
10/12/2011 0:01:24      429.95
10/12/2011 0:05:00      429.95
10/12/2011 0:06:25      429.85
10/12/2011 0:10:00      429.85
10/12/2011 0:11:26      428.85
10/12/2011 0:15:00      428.85
10/12/2011 0:20:03      428.85
10/12/2011 0:21:29      428.75
10/12/2011 0:25:01      428.75
10/12/2011 0:30:01      428.75
10/12/2011 0:31:31      428.75"

library(zoo)
library(chron)

fmt <- "%m/%d/%Y %H:%M:%S"
toChron <- function(d, t) as.chron(paste(d, t), format = fmt)

z <- read.zoo(text = Lines, index = 1:2, FUN = toChron)

# 5 minute aggregates
m5 <- times("00:05:00")
ag5 <- aggregate(z, trunc(time(z), m5), mean)

# 5 minute spline fit
g <- seq(trunc(start(z), m5), end(z), by = m5)
na.spline(z, xout = g)

# 5 minute linear approx
na.approx(z, xout = g)
________________end of what Gabor sent_________________

My csv data looks like this.....when I look at the file with NotePad++ I see
the commas.


TimeStamp	Sea_Temperature_F
12/31/2011 13:24:00	52
12/31/2011 16:44:06	52
12/31/2011 20:44:06	53
01/01/2012 00:44:06	53
01/01/2012 04:44:06	53
01/01/2012 08:44:07	54
01/01/2012 12:26:00	54
01/01/2012 12:44:07	53
01/01/2012 16:44:07	53
01/01/2012 20:44:06	54
01/02/2012 00:44:09	54
01/02/2012 04:44:06	55
01/02/2012 08:44:07	55
01/02/2012 12:44:06	56
01/02/2012 13:04:00	56
01/02/2012 16:44:07	57
01/02/2012 20:44:07	58
01/03/2012 00:44:07	58
01/03/2012 04:44:06	59
01/03/2012 08:44:06	59
01/03/2012 10:48:00	59
01/03/2012 12:44:06	58
01/03/2012 16:44:06	58
01/03/2012 20:44:07	59
01/04/2012 00:44:06	59
01/04/2012 04:44:07	58
01/04/2012 08:44:07	58
01/04/2012 12:44:07	57
01/04/2012 15:30:00	57
01/04/2012 16:44:07	57
01/04/2012 20:44:06	57
01/05/2012 00:44:06	57


The R code I'm trying to get working is as follows: (I'm trying to follow
code provided by Gabor) but I'm too embarrassed to ask him directly again.

fmt <- "%M/%D/%Y %H:%M:%S"
toChron <- function(d, t) as.chron(paste(d, t), format = fmt)
seatemp <- read.zoo ("SampleSeaTempData-2.csv", sep=",", header=TRUE,
FUN=toChron)

I get errors:

> fmt <- "%M/%D/%Y %H:%M:%S"
> toChron <- function(d, t) as.chron(paste(d, t), format = fmt)
> seatemp <- read.zoo ("SampleSeaTempData-2.csv", sep=",", header=TRUE,
> FUN=toChron)
Error in paste(d, t) : argument "t" is missing, with no default
> 

If I take the "FUN=toChron" out I get this error. There are 542 rows of
data.

> seatemp <- read.zoo ("SampleSeaTempData-2.csv", sep=",", header=TRUE)
Error in read.zoo("SampleSeaTempData-2.csv", sep = ",", header = TRUE) : 
  index has 542 bad entries at data rows: 1 2 3 4 5 6 7 8 9 10 11 12 13 14
15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39
40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64
65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89
90 91 92 93 94 95 96 97 98 99 100 ...
> 

I guess there is too much going on that I don't understand:
- what does the toChron line do?  how are "d" and "t" defined?
- why does the Gabor read.zoo line have "index=1:2" ?
- why does the Gabor code have " FUN=toChron"  ?


The idea is to get two or more data streams "converted" to exact timestamp
csv files with interpolated values and then I guess cbind the data into one
data frame so I can plot together.

I've read re. zoo csv file read issues/posts - e.g. getting the seconds
(":00") to appear in the csv file to eliminate duplicate row index entries.

Maybe it would be easier/cleaner to read the csv file into a regular R
dataframe and then "convert" to a zoo object?

In my analysis and plotting I use POSIXlt for time.


Help appreciated.  Thanks.








--
View this message in context: http://r.789695.n4.nabble.com/reading-time-series-csv-file-with-read-zoo-issues-then-align-time-stamps-tp4692157.html
Sent from the R help mailing list archive at Nabble.com.


From ggrothendieck at gmail.com  Sun Jun 15 21:19:19 2014
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Sun, 15 Jun 2014 15:19:19 -0400
Subject: [R] reading time series csv file with read.zoo issues,
 then align time stamps
In-Reply-To: <1402857565677-4692157.post@n4.nabble.com>
References: <1402857565677-4692157.post@n4.nabble.com>
Message-ID: <CAP01uR=0LqZ5asEws6+HoZyET8w1epxAC7r8WA4H5NjCB_n+3Q@mail.gmail.com>

index = 1:2 is missing.

On Sun, Jun 15, 2014 at 2:39 PM, Henry <hccoles at lbl.gov> wrote:
> Goal: get time series data interpolated on to desired time stamps.
> I have two or more data sets that have time stamps that vary from 5 mins to
> 3-5 hours.
> I want to get all the data put on common time stamps e.g. "00:05:00"
> intervals.
>
> I asked Gabor and got some very good code ( zoo aggregate, na.spline,
> na.approx) but I'm having trouble getting the csv file read in and converted
> to a zoo object so I can try getting these functions going again.  Here is
> what Gabor sent last time.
>
> _____________________start of what Gabor sent ______________________
> If you are using zoo then the zoo FAQ discusses grids
>    http://cran.r-project.org/web/packages/zoo/index.html
> and the other 4 vignettes (pdf documents) and reference manual on that
> page discuss more.
>
> zoo does not supply its own time classes except where classes are
> elsewhere missing.   Its design is completely independent of the time
> class and it works with any time class that supports certain methods
> (and that includes all popular ones).  See R News 4/1 for more on date
> and time classes.
>
> Here is some code:
>
> Lines <- "10/11/2011 23:30:01     432.22
> 10/11/2011 23:31:17     432.32
> 10/11/2011 23:35:00     432.32
> 10/11/2011 23:36:18     432.22
> 10/11/2011 23:37:18     432.72
> 10/11/2011 23:39:19     432.23
> 10/11/2011 23:40:02     432.23
> 10/11/2011 23:45:00     432.23
> 10/11/2011 23:45:20     429.75
> 10/11/2011 23:46:20     429.65
> 10/11/2011 23:50:00     429.65
> 10/11/2011 23:51:22     429.75
> 10/11/2011 23:55:01     429.75
> 10/11/2011 23:56:23     429.55
> 10/12/2011 0:00:07      429.55
> 10/12/2011 0:01:24      429.95
> 10/12/2011 0:05:00      429.95
> 10/12/2011 0:06:25      429.85
> 10/12/2011 0:10:00      429.85
> 10/12/2011 0:11:26      428.85
> 10/12/2011 0:15:00      428.85
> 10/12/2011 0:20:03      428.85
> 10/12/2011 0:21:29      428.75
> 10/12/2011 0:25:01      428.75
> 10/12/2011 0:30:01      428.75
> 10/12/2011 0:31:31      428.75"
>
> library(zoo)
> library(chron)
>
> fmt <- "%m/%d/%Y %H:%M:%S"
> toChron <- function(d, t) as.chron(paste(d, t), format = fmt)
>
> z <- read.zoo(text = Lines, index = 1:2, FUN = toChron)
>
> # 5 minute aggregates
> m5 <- times("00:05:00")
> ag5 <- aggregate(z, trunc(time(z), m5), mean)
>
> # 5 minute spline fit
> g <- seq(trunc(start(z), m5), end(z), by = m5)
> na.spline(z, xout = g)
>
> # 5 minute linear approx
> na.approx(z, xout = g)
> ________________end of what Gabor sent_________________
>
> My csv data looks like this.....when I look at the file with NotePad++ I see
> the commas.
>
>
> TimeStamp       Sea_Temperature_F
> 12/31/2011 13:24:00     52
> 12/31/2011 16:44:06     52
> 12/31/2011 20:44:06     53
> 01/01/2012 00:44:06     53
> 01/01/2012 04:44:06     53
> 01/01/2012 08:44:07     54
> 01/01/2012 12:26:00     54
> 01/01/2012 12:44:07     53
> 01/01/2012 16:44:07     53
> 01/01/2012 20:44:06     54
> 01/02/2012 00:44:09     54
> 01/02/2012 04:44:06     55
> 01/02/2012 08:44:07     55
> 01/02/2012 12:44:06     56
> 01/02/2012 13:04:00     56
> 01/02/2012 16:44:07     57
> 01/02/2012 20:44:07     58
> 01/03/2012 00:44:07     58
> 01/03/2012 04:44:06     59
> 01/03/2012 08:44:06     59
> 01/03/2012 10:48:00     59
> 01/03/2012 12:44:06     58
> 01/03/2012 16:44:06     58
> 01/03/2012 20:44:07     59
> 01/04/2012 00:44:06     59
> 01/04/2012 04:44:07     58
> 01/04/2012 08:44:07     58
> 01/04/2012 12:44:07     57
> 01/04/2012 15:30:00     57
> 01/04/2012 16:44:07     57
> 01/04/2012 20:44:06     57
> 01/05/2012 00:44:06     57
>
>
> The R code I'm trying to get working is as follows: (I'm trying to follow
> code provided by Gabor) but I'm too embarrassed to ask him directly again.
>
> fmt <- "%M/%D/%Y %H:%M:%S"
> toChron <- function(d, t) as.chron(paste(d, t), format = fmt)
> seatemp <- read.zoo ("SampleSeaTempData-2.csv", sep=",", header=TRUE,
> FUN=toChron)
>
> I get errors:
>
>> fmt <- "%M/%D/%Y %H:%M:%S"
>> toChron <- function(d, t) as.chron(paste(d, t), format = fmt)
>> seatemp <- read.zoo ("SampleSeaTempData-2.csv", sep=",", header=TRUE,
>> FUN=toChron)
> Error in paste(d, t) : argument "t" is missing, with no default
>>
>
> If I take the "FUN=toChron" out I get this error. There are 542 rows of
> data.
>
>> seatemp <- read.zoo ("SampleSeaTempData-2.csv", sep=",", header=TRUE)
> Error in read.zoo("SampleSeaTempData-2.csv", sep = ",", header = TRUE) :
>   index has 542 bad entries at data rows: 1 2 3 4 5 6 7 8 9 10 11 12 13 14
> 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39
> 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64
> 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89
> 90 91 92 93 94 95 96 97 98 99 100 ...
>>
>
> I guess there is too much going on that I don't understand:
> - what does the toChron line do?  how are "d" and "t" defined?
> - why does the Gabor read.zoo line have "index=1:2" ?
> - why does the Gabor code have " FUN=toChron"  ?
>
>
> The idea is to get two or more data streams "converted" to exact timestamp
> csv files with interpolated values and then I guess cbind the data into one
> data frame so I can plot together.
>
> I've read re. zoo csv file read issues/posts - e.g. getting the seconds
> (":00") to appear in the csv file to eliminate duplicate row index entries.
>
> Maybe it would be easier/cleaner to read the csv file into a regular R
> dataframe and then "convert" to a zoo object?
>
> In my analysis and plotting I use POSIXlt for time.
>
>
> Help appreciated.  Thanks.
>
>
>
>
>
>
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/reading-time-series-csv-file-with-read-zoo-issues-then-align-time-stamps-tp4692157.html
> Sent from the R help mailing list archive at Nabble.com.
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com


From r.turner at auckland.ac.nz  Sun Jun 15 22:54:41 2014
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Mon, 16 Jun 2014 08:54:41 +1200
Subject: [R] abline; setting plot limits
In-Reply-To: <CFC27E86.C755%prydelek@carnegiescience.edu>
References: <CFC27E86.C755%prydelek@carnegiescience.edu>
Message-ID: <539E0811.9060107@auckland.ac.nz>

On 15/06/14 15:34, Paul Rydelek wrote:
> Relatively new user with a question regarding abline.
>
> I want to draw a st. line fit to some data but I want the line to span the
> range of the x-data and NOT the plot limits.
> In short the line spans xmin to xmax(of plot axis) but I want it to span
> xmin to xmax (of x data).
> Can this but done with abline or do I have to use lines and construct the
> line from a+bx?

A function with this capability was posted by Remko Duursma on 22/1/09. See:

> http://article.gmane.org/gmane.comp.lang.r.general/137344/match=ablinepiece

cheers,

Rolf Turner

P. S.  Jim: Perhaps this function could/should be added to plotrix.  If 
you are interested, I have written a help file for it.

R. T.


From jim at bitwrit.com.au  Mon Jun 16 02:35:36 2014
From: jim at bitwrit.com.au (Jim Lemon)
Date: Mon, 16 Jun 2014 10:35:36 +1000
Subject: [R] abline; setting plot limits
In-Reply-To: <539E0811.9060107@auckland.ac.nz>
References: <CFC27E86.C755%prydelek@carnegiescience.edu>
	<539E0811.9060107@auckland.ac.nz>
Message-ID: <2948553.MehXDAnAaZ@localhost.localdomain>

On Mon, 16 Jun 2014 08:54:41 AM Rolf Turner wrote:
> On 15/06/14 15:34, Paul Rydelek wrote:
> > Relatively new user with a question regarding abline.
> > 
> > I want to draw a st. line fit to some data but I want the line to span 
the
> > range of the x-data and NOT the plot limits.
> > In short the line spans xmin to xmax(of plot axis) but I want it to 
span
> > xmin to xmax (of x data).
> > Can this but done with abline or do I have to use lines and construct 
the
> > line from a+bx?
> 
> A function with this capability was posted by Remko Duursma on 
22/1/09. See:
> > 
http://article.gmane.org/gmane.comp.lang.r.general/137344/match=ablinepiec
> > e
> 
> cheers,
> 
> Rolf Turner
> 
> P. S.  Jim: Perhaps this function could/should be added to plotrix.  If
> you are interested, I have written a help file for it.
> 
> R. T.
Hi Rolf and others,
In fact Remko contributed that function to plotrix - ablineclip.

Jim


From r.turner at auckland.ac.nz  Mon Jun 16 04:39:37 2014
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Mon, 16 Jun 2014 14:39:37 +1200
Subject: [R] abline; setting plot limits
In-Reply-To: <2948553.MehXDAnAaZ@localhost.localdomain>
References: <CFC27E86.C755%prydelek@carnegiescience.edu>
	<539E0811.9060107@auckland.ac.nz>
	<2948553.MehXDAnAaZ@localhost.localdomain>
Message-ID: <539E58E9.5030306@auckland.ac.nz>

On 16/06/14 12:35, Jim Lemon wrote:
> On Mon, 16 Jun 2014 08:54:41 AM Rolf Turner wrote:
>> On 15/06/14 15:34, Paul Rydelek wrote:
>>> Relatively new user with a question regarding abline.
>>>
>>> I want to draw a st. line fit to some data but I want the line to span
> the
>>> range of the x-data and NOT the plot limits.
>>> In short the line spans xmin to xmax(of plot axis) but I want it to
> span
>>> xmin to xmax (of x data).
>>> Can this but done with abline or do I have to use lines and construct
> the
>>> line from a+bx?
>>
>> A function with this capability was posted by Remko Duursma on
> 22/1/09. See:
>>>
> http://article.gmane.org/gmane.comp.lang.r.general/137344/match=ablinepiec
>>> e
>>
>> cheers,
>>
>> Rolf Turner
>>
>> P. S.  Jim: Perhaps this function could/should be added to plotrix.  If
>> you are interested, I have written a help file for it.
>>
>> R. T.
> Hi Rolf and others,
> In fact Remko contributed that function to plotrix - ablineclip.

Sorry.  Wasn't aware of ablineclip().  Actually that function seems to 
use a quite different approach from that of ablinepiece(), and to be a 
substantial improvement.  Thanks for pointing it out to us.

cheers,

Rolf


From bernardo_brandaum at yahoo.com.br  Mon Jun 16 05:15:31 2014
From: bernardo_brandaum at yahoo.com.br (Bernardo Santos)
Date: Sun, 15 Jun 2014 20:15:31 -0700 (PDT)
Subject: [R] Help with SEM package - model significance
Message-ID: <1402888531.88041.YahooMailNeo@web126206.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140615/1c2a8683/attachment.pl>

From arrayprofile at yahoo.com  Mon Jun 16 05:22:26 2014
From: arrayprofile at yahoo.com (array chip)
Date: Sun, 15 Jun 2014 20:22:26 -0700 (PDT)
Subject: [R] prediction based on conditional logistic regression clogit
Message-ID: <1402888946.86544.YahooMailNeo@web122903.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140615/42840f0f/attachment.pl>

From hanhtham.tran at yahoo.com.vn  Mon Jun 16 09:52:57 2014
From: hanhtham.tran at yahoo.com.vn (Tham Tran)
Date: Mon, 16 Jun 2014 00:52:57 -0700 (PDT)
Subject: [R] plot in package psych with function error.bars.by
In-Reply-To: <C3066D7C-B838-4EDA-BCBE-E6B0F0433F3D@revelle.net>
References: <1401776898895-4691632.post@n4.nabble.com>
	<107834395.A8ZI0oDvek@localhost.localdomain>
	<177721B3-887B-40EE-8A89-9EA39EE95A5D@revelle.net>
	<C3066D7C-B838-4EDA-BCBE-E6B0F0433F3D@revelle.net>
Message-ID: <1402905177769-4692177.post@n4.nabble.com>

Hi William,

I've just updated your latest package "psych_1.4.6.11.zip" from server
"personality-project/r/src/contrib/". One time the updating process was
finished, i tried to run based samples code:

require(psych)
keys.list=list(Agree=c(-1,2:5),Conscientious=c(6:8,-9,-10),Extraversion=c(-11,-12,13:15),Neuroticism=c(16:20),Openness
= c(21,-22,23,24,-25))
keys = make.keys(28,keys.list,item.labels=colnames(bfi))
scores = scoreItems(keys,bfi,min=1,max=6) 
error.bars.by(scores$scores,round(bfi$age/10)*10,by.var=TRUE,main="BFI age
trends",legend=3,labels=colnames(scores$scores),xlab="Age",ylab="Mean item
score")

then i had an error following: 

Erreur dans if (del == 0 && to == 0) return(to) : 
  valeur manquante l? o? TRUE / FALSE est requis
De plus : Messages d'avis :
1: In qt(1 - alpha/2, group.stats[[g]]$n - 1) : production de NaN
2: In dt(ln, n - 1) : production de NaN
3: In qt(alpha/2, n - 1) : production de NaN

Could you tell me how to fix these issues? May i had a mistake of updating
your lasted package?

Sincerly
Tham






--
View this message in context: http://r.789695.n4.nabble.com/plot-in-package-psych-with-function-error-bars-by-tp4691632p4692177.html
Sent from the R help mailing list archive at Nabble.com.


From costas.vorlow at gmail.com  Mon Jun 16 10:41:20 2014
From: costas.vorlow at gmail.com (Costas Vorlow)
Date: Mon, 16 Jun 2014 11:41:20 +0300
Subject: [R] Aggregating 15 minute xts sequence to hourly
Message-ID: <CABfqsR_6FJXvCecMPoJRi=dtX1LGmt-seHxyvjBk=mSre9GgbA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140616/90b0936c/attachment.pl>

From pdalgd at gmail.com  Mon Jun 16 11:22:42 2014
From: pdalgd at gmail.com (peter dalgaard)
Date: Mon, 16 Jun 2014 11:22:42 +0200
Subject: [R] prediction based on conditional logistic regression clogit
In-Reply-To: <1402888946.86544.YahooMailNeo@web122903.mail.ne1.yahoo.com>
References: <1402888946.86544.YahooMailNeo@web122903.mail.ne1.yahoo.com>
Message-ID: <A86A1C77-CF60-4B20-852C-A6F4B95E22E4@gmail.com>


On 16 Jun 2014, at 05:22 , array chip <arrayprofile at yahoo.com> wrote:

> Hi, I am using clogit() from survival package to do conditional logistic regression. I also need to make prediction on an independent dataset to calculate predicted probability. Here is an example:
> 
> 
>> dat <- data.frame(set=rep(1:50,each=3), status=rep(c(1,0,0),50), x1=rnorm(150,5,1), x2=rnorm(150,7,1.5))
>> dat.test <- data.frame(set=rep(1:30,each=3), status=rep(c(1,0,0),30), x1=rnorm(90,5,1), x2=rnorm(90,7,1.5))
>> fit<-clogit(status~x1+x2+strata(set),dat)
>> predict(fit,newdata=dat.test,type='expected')
> Error in Surv(rep(1, 150L), status) : 
>   Time and status are different lengths
> 
> Can anyone suggest what's wrong here?
> 


The direct cause is that clogit() works by using the fact that the likelihood is equivalent to a coxph() likelihood with stratification and all observation lengths set to 1. Therefore the analysis is formally on Surv(rep(1, 150L), status) and that goes belly-up if you apply the same formula to a data set of different length. 

However, notice that there is no such thing as predict.clogit(), so you are attempting predict.coxph() on a purely formal Cox model. It is unclear to what extent predicted values, in the sense of coxph() are compatible with predictions in conditional logit models.

I'm rusty on this, but I think what you want is something like

m <- model.matrix(~ x1 + x2 - 1, data=dat.test)
pp <- exp(m %*% coef(fit))
pps <- ave(pp, dat.test$set, FUN=sum)
pp/pps

i.e. the conditional probability that an observation is a case given covariates and that there is on case in each set (in the data given, you have sets of three with one being a case, so all predicted probabilities are close to 0.33). For more general matched sets, I'm not really sure what one wants. Real experts are welcome to chime in.

-pd

> Thanks!
> 
> John
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From wewolski at gmail.com  Mon Jun 16 11:23:51 2014
From: wewolski at gmail.com (Witold E Wolski)
Date: Mon, 16 Jun 2014 11:23:51 +0200
Subject: [R] correlation given p value and sample size
Message-ID: <CAAjnpdiq=M66vBFUB3wcx_1iWVoBJzXojSMSk2og4OFv3LKUHw@mail.gmail.com>

Hi,


Looking for and function which produces the minimum r (pearson
correlation) so that H0 (r=0) can be rejected, given sample size and
p-value?


Witold

-- 
Witold Eryk Wolski


From luca.cerone at gmail.com  Mon Jun 16 12:09:57 2014
From: luca.cerone at gmail.com (Luca Cerone)
Date: Mon, 16 Jun 2014 12:09:57 +0200
Subject: [R] Defining default method for S3, S4 and R5 classes
In-Reply-To: <CAPtbhHyYoNggOvUsLxn0+vFJmHy+ehqG++zuA-GcFykLBSv0wg@mail.gmail.com>
References: <CAFnz2-89ZJDAxTvWqhNGij=ULDN3rHADGO1i5BM2DUsiiffpCg@mail.gmail.com>
	<CAPtbhHyYoNggOvUsLxn0+vFJmHy+ehqG++zuA-GcFykLBSv0wg@mail.gmail.com>
Message-ID: <CAFnz2-8ya6nOJomCUybZtVR0Zn-7PhyRLg6u0gR8o4w9ozm5OA@mail.gmail.com>

thanks  Suzen

2014-06-15 2:34 GMT+02:00 Suzen, Mehmet <msuzen at gmail.com>:
> There is a nice tutorial on this:
> http://adv-r.had.co.nz/OO-essentials.html
>
> For an in depth guide, have a look at the book from John Chambers,
> Software for data analysis programming with R.
>
> On 13 June 2014 12:20, Luca Cerone <luca.cerone at gmail.com> wrote:
>> Dear all,
>>
>> I am writing a script implementing a pipeline to analyze some of the
>> data we receive.
>>
>> One of the steps in this pipeline involves clustering the data, and I
>> am interested
>> in studying the effects of different clustering algorithms on the final results.
>>
>> I am having issues making my code general enough because the
>> clustering algorithms we are interested all return different types of
>> objects (S3, S4 and R5 classes, as well as simple named lists).
>>
>> >From the output of these algorithms I need to extract a list with as many
>> elements as the number of clusters and such that each element contains the ids
>> of the elements in each cluster.
>>
>> I have easily done this for each of the cluster algorithms,
>> the problem is: how can I make so that rather than having to check for
>> classes and
>> types this is done automatically?
>>
>> For example, for the algorithms that return S3 classes I have defined
>> a method "get_cluster_list.default" and then created the methods for
>> the individual classes, which is used in the main body of the
>> pipeline.
>>
>> I have no idea how I can do this for S4 and R5 classes and,  more
>> importantly, I would
>> like an approach that works when using all S3, S4 and R5 classes.
>>
>> Do you know how I could do this?
>>
>> Thanks for the help,
>> Luca
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.



-- 
Luca Cerone

Tel: +34 692 06 71 28
Skype: luca.cerone


From josh.m.ulrich at gmail.com  Mon Jun 16 12:31:55 2014
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Mon, 16 Jun 2014 05:31:55 -0500
Subject: [R] Aggregating 15 minute xts sequence to hourly
In-Reply-To: <CABfqsR_6FJXvCecMPoJRi=dtX1LGmt-seHxyvjBk=mSre9GgbA@mail.gmail.com>
References: <CABfqsR_6FJXvCecMPoJRi=dtX1LGmt-seHxyvjBk=mSre9GgbA@mail.gmail.com>
Message-ID: <CAPPM_gQJcYtntTTYASuT2PMULv57MO2MEq=70LLnf0egNKxyQw@mail.gmail.com>

On Mon, Jun 16, 2014 at 3:41 AM, Costas Vorlow <costas.vorlow at gmail.com> wrote:
> Dear all,
>
> Why aggregation of 15 minute xts data happens on the 45th (3rd quarter) and
> not the exact hour close (i.e., 00) time?
>
The "00" time is the beginning of the hour, not the end.  E.g.,
10:00:00 is the beginning of the 10-o'clock hour.

> For example, temp below is an xts sequence with 15-minute frequency:
>
>> quarters <- ISOdatetime(2012,05,02,9,0,0) + seq(0:39)*15*60;
>> set.seed(42);
>> observation <- xts(1:40, order.by=as.POSIXct(quarters));
>> head(observation);
>                     [,1]
> 2012-05-02 09:15:00    1
> 2012-05-02 09:30:00    2
> 2012-05-02 09:45:00    3
> 2012-05-02 10:00:00    4
> 2012-05-02 10:15:00    5
> 2012-05-02 10:30:00    6
>
>> ends<-endpoints(observation,'hours');
>> temp<-period.apply(observation, ends,sum);
>> temp
>                     [,1]
> 2012-05-02 09:45:00    6
> 2012-05-02 10:45:00   22
> 2012-05-02 11:45:00   38
> 2012-05-02 12:45:00   54
> 2012-05-02 13:45:00   70
> 2012-05-02 14:45:00   86
> 2012-05-02 15:45:00  102
> 2012-05-02 16:45:00  118
> 2012-05-02 17:45:00  134
> 2012-05-02 18:45:00  150
> 2012-05-02 19:00:00   40
>>
>
> I get the sum of every quarter within the hour on the third quarter. How
> can I implicitly calculate the sum of the quarterly data on the hour's
> close (10:00, 11:00, 12:00 and so on) ?
>
Again, those are the beginnings of the hours.  endpoints() and
period.apply() only use the timestamps in your data.  If you want to
round up to the beginning of the next hour, use align.time().

> align.time(temp, 3600)
                    [,1]
2012-05-02 10:00:00    6
2012-05-02 11:00:00   22
2012-05-02 12:00:00   38
2012-05-02 13:00:00   54
2012-05-02 14:00:00   70
2012-05-02 15:00:00   86
2012-05-02 16:00:00  102
2012-05-02 17:00:00  118
2012-05-02 18:00:00  134
2012-05-02 19:00:00  150
2012-05-02 20:00:00   40

> Many thanks in advance,
> Costas
>
> __________________________________________________________________
>
> *Costas Vorlow
> <http://www.gravatar.com/avatar/49a9dee59073b1ed4a36440a06aeb81b> *
> *http://www.linkedin.com/in/costasvorlow
> <http://www.linkedin.com/in/costasvorlow>*
> *http://www.vorlow.com* <http://www.vorlow.com>
>
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
>

Best,
--
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From pdalgd at gmail.com  Mon Jun 16 13:17:06 2014
From: pdalgd at gmail.com (peter dalgaard)
Date: Mon, 16 Jun 2014 13:17:06 +0200
Subject: [R] correlation given p value and sample size
In-Reply-To: <CAAjnpdiq=M66vBFUB3wcx_1iWVoBJzXojSMSk2og4OFv3LKUHw@mail.gmail.com>
References: <CAAjnpdiq=M66vBFUB3wcx_1iWVoBJzXojSMSk2og4OFv3LKUHw@mail.gmail.com>
Message-ID: <750080E2-8C7E-4A6C-B5A5-B97E2EF28D4E@gmail.com>

There's a simple relation 

t = r / sqrt(1 - r^2) * sqrt(n - 2)
r = t / sqrt(n - 2 + t^2)

where t has a t distribution on n-2 df. Insert t = +-qt(p/2, n-2).

-pd


On 16 Jun 2014, at 11:23 , Witold E Wolski <wewolski at gmail.com> wrote:

> Hi,
> 
> 
> Looking for and function which produces the minimum r (pearson
> correlation) so that H0 (r=0) can be rejected, given sample size and
> p-value?
> 
> 
> Witold
> 
> -- 
> Witold Eryk Wolski
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From jfox at mcmaster.ca  Mon Jun 16 13:40:06 2014
From: jfox at mcmaster.ca (John Fox)
Date: Mon, 16 Jun 2014 07:40:06 -0400
Subject: [R] Help with SEM package - model significance
In-Reply-To: <1402888531.88041.YahooMailNeo@web126206.mail.ne1.yahoo.com>
References: <1402888531.88041.YahooMailNeo@web126206.mail.ne1.yahoo.com>
Message-ID: <web-514722018@cgpsrv2.cis.mcmaster.ca>

Dear Bernardo,

The df for the LR chisquare over-identification test come not from the number of observations, but from the difference between the number of observable variances and covariances, on the one hand, and free parameters to estimate, on the other. In your case, these numbers are equal, and so df = 0. The LR chisquare for a just-identified model is also necessarily 0: the model perfectly reproduces the covariational structure of the observed variables. 

R (and most statistical software) by default writes very small and very large numbers in scientific format. In your case, -2.873188e-13 = -2.87*10^-13, that is, 0 within rounding error. You can change the way numbers are printed with the R scipen option.

Some other observations:

(1) Your model is recursive and has no latent variables; you would get the same estimates from OLS regression using lm().

(2) For quite some time now, the sem package has included specifyEquations() as a more convenient way of specifying a model, in preference to specifyModel(). See ?specifyEquations.

(3) You don't have to specify the error variances directly; specifyEquations(), or specifyModel(), will supply them.

I hope this helps,
 John

------------------------------------------------
John Fox, Professor
McMaster University
Hamilton, Ontario, Canada
http://socserv.mcmaster.ca/jfox/
	
	
On Sun, 15 Jun 2014 20:15:31 -0700 (PDT)
 Bernardo Santos <bernardo_brandaum at yahoo.com.br> wrote:
> Dear all,?
> 
> I used "sem" function from the package SEM to fit a model. However, I cannot say if the model is correspondent to the data or not (chisquare test).
> I used the commands:
> 
> model1 <- specifyModel()
> estadio -> compflora, a1, NA
> estadio -> compfauna, a2, NA
> estadio -> interacoesobs, a3, NA
> compflora -> compfauna, b1, NA
> compflora -> interacoesobs, b2, NA
> compfauna -> interacoesobs, c1, NA
> estadio <-> estadio, e1, NA
> compflora <-> compflora, e2, NA
> compfauna <-> compfauna, e3, NA
> interacoesobs <-> interacoesobs, e4, NA
> 
> sem1 <- sem(model1, cov.matrix, length(samples))
> summary(sem1)
> 
> and I got the result:
> 
> Model Chisquare =  -2.873188e-13   Df =  0 Pr(>Chisq) = NA AIC =  20 BIC =  -2.873188e-13 Normalized Residuals Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
> 0.000e+00 0.000e+00 2.957e-16 3.193e-16 5.044e-16 8.141e-16  R-square for Endogenous Variables compflora     compfauna interacoesobs  0.0657        0.1056        0.2319  Parameter Estimates Estimate     Std Error    z value    Pr(>|z|)                                     
> a1 3.027344e-01 1.665395e-01 1.81779316 6.909575e-02 compflora <--- estadio          
> a2 2.189427e-01 1.767404e-01 1.23878105 2.154266e-01 compfauna <--- estadio          
> a3 7.314192e-03 1.063613e-01 0.06876742 9.451748e-01 interacoesobs <--- estadio      
> b1 2.422906e-01 1.496290e-01 1.61927587 1.053879e-01 compfauna <--- compflora        
> b2 3.029933e-01 9.104901e-02 3.32780446 8.753328e-04 interacoesobs <--- compflora    
> c1 4.863368e-02 8.638177e-02 0.56300857 5.734290e-01 interacoesobs <--- compfauna    
> e1 6.918133e+04 1.427102e+04 4.84767986 1.249138e-06 estadio <--> estadio            
> e2 9.018230e+04 1.860319e+04 4.84767986 1.249138e-06 compflora <--> compflora        
> e3 9.489661e+04 1.957568e+04 4.84767986 1.249138e-06 compfauna <--> compfauna        
> e4 3.328072e+04 6.865289e+03 4.84767986 1.249138e-06 interacoesobs <--> interacoesobs Iterations =  0 
> 
> I understand the results, but I do not know how to interpret the first line that tells me about the model:
> Model Chisquare =  -2.873188e-13   Df =  0 Pr(>Chisq) = NA
> 
> How can DF be zero, if the number of observations I used in sem funcition was 48 and I have only 4 variables? What is the p value?
> 
> Thanks in advance.
> Bernardo Niebuhr
> 	[[alternative HTML version deleted]]
>


From costas.vorlow at gmail.com  Mon Jun 16 14:04:13 2014
From: costas.vorlow at gmail.com (Costas Vorlow)
Date: Mon, 16 Jun 2014 15:04:13 +0300
Subject: [R] Aggregating 15 minute xts sequence to hourly
In-Reply-To: <CAPPM_gQJcYtntTTYASuT2PMULv57MO2MEq=70LLnf0egNKxyQw@mail.gmail.com>
References: <CABfqsR_6FJXvCecMPoJRi=dtX1LGmt-seHxyvjBk=mSre9GgbA@mail.gmail.com>
	<CAPPM_gQJcYtntTTYASuT2PMULv57MO2MEq=70LLnf0egNKxyQw@mail.gmail.com>
Message-ID: <CABfqsR-4HS+ES28evstAyD9vAcrK6UGRwUs4+uddiFZYz5XRCQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140616/790ba172/attachment.pl>

From Martin.Loos at eawag.ch  Mon Jun 16 12:05:29 2014
From: Martin.Loos at eawag.ch (Loos, Martin)
Date: Mon, 16 Jun 2014 10:05:29 +0000
Subject: [R] xml package - free document / memory leak
Message-ID: <B2D94AFE47219A4D88A56BC8BF655429298CEFA2@EE-MBX1.ee.emp-eaw.ch>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140616/9bf0eaf3/attachment.pl>

From fuhrmann.eva at web.de  Mon Jun 16 15:05:03 2014
From: fuhrmann.eva at web.de (serena1234)
Date: Mon, 16 Jun 2014 06:05:03 -0700 (PDT)
Subject: [R] Determination lag order - problem with daily data and AR / ARIMA
Message-ID: <1402923903458-4692194.post@n4.nabble.com>

Hello,

I am trying to determine a lag order for my data with the help of AIC and/
or BIC in order to conduct further tests. It is about prices measured at a
daily frequency (weekends and holidays excluded).

My first approach was to approximate the process with an AR model using the
function ar(x, ...) and a loop to try several lags and then determine the
AIC and BIC values for each lag to determine the lowest one.
However, when I try to use the BIC function or the AIC, setting k =
log(length(time series)), it does not work. The error says that the model is
of the class ar and AIC cannot work with that.
[This is not the loop, but just the general problem when inserting an ar
model into AIC]
> model=ar(price, aic = FALSE, method="ols")
> AIC(model, k = 2)
Error in UseMethod("logLik") : 
  no applicable method for 'logLik' applied to an object of class "ar"
> AIC(model, k = log(length(price_G)))
Error in UseMethod("logLik") : 
  no applicable method for 'logLik' applied to an object of class "ar"

Alternatively, I know that ar selects by default he lag order via the AIC
criterion, but it suggests 40 lags, which appears quite high to me.
Therefore, I wanted to check this result for robustness by applying BIC. But
that doesn't work due to the problem explained above.

Another option was to use an ARIMA model with order = c(lags, 0, 0) and then
determine the AIC and BIC values. That does generally work, but it
calculates AICs and BICs of zero for every kind of lag. That doesn't make
sense to me.

So that is why I think I may have a problem in classifying my daily data. I
just inserted the numeric vector for calculating the models. But how can I
classify the daily data as a time series correctly? (Because weekends and
holidays are missing.) I've tried the zoo package, but then I can't use the
ARIMA function any more.

Can anyone offer any help to make on of the three approaches work?

Thanks in advance!



--
View this message in context: http://r.789695.n4.nabble.com/Determination-lag-order-problem-with-daily-data-and-AR-ARIMA-tp4692194.html
Sent from the R help mailing list archive at Nabble.com.


From fuhrmann.eva at web.de  Mon Jun 16 15:49:27 2014
From: fuhrmann.eva at web.de (serena1234)
Date: Mon, 16 Jun 2014 06:49:27 -0700 (PDT)
Subject: [R] Determination lag order - problem with daily data and AR / ARIMA
Message-ID: <1402926567287-4692195.post@n4.nabble.com>

Hello,
I am trying to determine a lag order for my data with the help of AIC and/
or BIC in order to conduct further tests. It is about prices measured at a
daily frequency (weekends and holidays excluded).  

1) My first approach was to approximate the process with an AR model using
the function ar(x, ...) and a loop to try several lags and then determine
the AIC and BIC values for each lag to determine the lowest one. However,
when I try to use the BIC function or the AIC, setting k = log(length(time
series)), it does not work. The error says that the model is of the class ar
and AIC cannot work with that. 
[This is not the loop, but just the general problem when inserting an ar
model into AIC]
 > model=ar(price, aic = FALSE, method="ols") 
> AIC(model, k = 2) Error in UseMethod("logLik") :   
no applicable method for 'logLik' applied to an object of class "ar" 
> AIC(model, k = log(length(price_G))) Error in UseMethod("logLik") :  
 no applicable method for 'logLik' applied to an object of class "ar"  

2) Alternatively, I know that ar selects by default he lag order via the AIC
criterion, but it suggests 40 lags, which appears quite high to me.
Therefore, I wanted to check this result for robustness by applying BIC. But
that doesn't work due to the problem explained above. 

3) Another option was to use an ARIMA model with order = c(lags, 0, 0) and
then determine the AIC and BIC values. That does generally work, but it
calculates AICs and BICs of zero for every kind of lag. That doesn't make
sense to me.  

So that is why I think I may have a problem in classifying my daily data. I
just inserted the numeric vector for calculating the models. But how can I
classify the daily data as a time series correctly? (Because weekends and
holidays are missing.) I've tried the zoo package, but then I can't use the
ARIMA function any more.  

Can anyone offer any help to make one of the three approaches work?  
Thanks in advance! 



--
View this message in context: http://r.789695.n4.nabble.com/Determination-lag-order-problem-with-daily-data-and-AR-ARIMA-tp4692195.html
Sent from the R help mailing list archive at Nabble.com.


From suganthie13 at yahoo.ca  Mon Jun 16 17:44:46 2014
From: suganthie13 at yahoo.ca (Suganthie Jeyaganth)
Date: Mon, 16 Jun 2014 08:44:46 -0700
Subject: [R] Power graph for two Proportion
Message-ID: <1402933486.4234.YahooMailNeo@web142606.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140616/1492a721/attachment.pl>

From lecastillom at udistrital.edu.co  Mon Jun 16 19:10:43 2014
From: lecastillom at udistrital.edu.co (Luis Eduardo Castillo =?iso-8859-1?Q?M=E9ndez?=)
Date: Mon, 16 Jun 2014 12:10:43 -0500 (COT)
Subject: [R] Question on JAVA and R
Message-ID: <27767.190.27.73.65.1402938643.squirrel@mail.udistrital.edu.co>

As I discuss today we are trying to do with my partner Steven Penaloza and
a small program of supervised classification of images with unconventional
using R methods, connecting libraries and own code of R to an environment
of JAVA, in our case we are using NETBEANS to interface, the connection
was a success, performs the functions and classification, but purely
procedural way, the problem occurs when we try to implement a small
interface to variables called methods R you are saved in JAVA although the
Double data eg can "maneuver" between a language and another, do not know
how to do it with an image. TIFF, which is our case, the following are a
few lines of code that opens a window buscardor type, in this case an
image is opened. Tiff and assigned to the img variable, but is within R,
is when for example we can not assign it to a button and is called the
variable to be used in a class or event.



????????code.addRCode ("fileName <- tclvalue (tkgetOpenFile ())");

????????code.addRCode ("img <-brick (fileName)");




Thank you very much


*************************************************************




Como le comente el d?a de hoy estamos intentando realizar con  mi
compa?ero Steven Pe?aloza y yo un peque?o programa de clasificaci?n
supervisada de im?genes con m?todos no convencionales usando R, conectando
las librer?as y c?digo propio de R a un ambiente de JAVA, en nuestro caso
estamos usando NETBEANS para realizar la interfaz, la conexi?n ya fue un
?xito, realiza las funciones y la clasificaci?n, pero de manera netamente
procedimental, el problema ocurre cuando intentamos implementarlo en una
peque?a interfaz, para que las variables llamadas con m?todos R sean
guardadas en JAVA, aunque con datos tipo Double por ejemplo es posible
?maniobrarlo? entre un lenguaje y otro, no sabemos como hacerlo con una
imagen . TIFF, que es nuestro caso, las siguientes son unas lineas de
codigo que abre una ventana tipo buscardor, en este caso se abre una
imagen . Tiff y se le asigna a la variable img, pero queda dentro de R, es
aqu? cuando no podemos por ejemplo asignarlo a un bot?n y que sea llamado 
para ser usada la variable en una clase o evento.



        code.addRCode("fileName <- tclvalue(tkgetOpenFile())");

        code.addRCode("img<-brick(fileName)");




Muchas gracias

-- 
         Luis Eduardo Castillo M?ndez
Matem?tico - Mag?ster en Ciencias Estad?stica
     Docente Asociado de Tiempo Completo
       Ingenier?a Catastral y Geodesia


---------------------------------------------------------------------------------
                  ***********************************                    
Este correo y cualquier archivo anexo son confidenciales y para uso exclusivo  de
la persona o entidad de destino.  Esta  comunicacion  puede  contener informaci?n 
protegida por el privilegio de cliente-abogado. Si usted ha recibido  este correo
por error, equivocacion u omision queda estrictamente prohibido  la  utilizacion,
copia, reimpresion o reenvio del mismo. En tal caso,  favor  notificar  en  forma
inmediata al remitente.  

Protejase de los fraudes por internet ! 
http://www.udistrital.edu.co/alertaSeguridad.php


From gangchen6 at gmail.com  Mon Jun 16 19:56:41 2014
From: gangchen6 at gmail.com (Gang Chen)
Date: Mon, 16 Jun 2014 13:56:41 -0400
Subject: [R] Any refit function available for 'car' package?
Message-ID: <CAHmzXO6npu_6mnHrnTkZOX6FzCz_qR=PtA+FOkrFH5+0PdTfHw@mail.gmail.com>

Suppose that I need to run a multivariate linear model

Y = X B + E

many times with the same model matrix X but each time with different
response matrix Y. Is there a function available in 'car' package
similar to refit() in lme4 package so that the model matrix X would
not be reassembled each time? Also, runtime can be saved without
repeatedly performing the same matrix computations such as
(X'X)^(-1)X'.

Thanks,
Gang


From hemaseshadri at gmail.com  Mon Jun 16 20:11:33 2014
From: hemaseshadri at gmail.com (Hema Seshadri)
Date: Mon, 16 Jun 2014 14:11:33 -0400
Subject: [R] R, Rserve logging
Message-ID: <CAGhkaHJ76pR3FzBkD2fH_UBA7iCSpperhH76CvGQJUGT5S3+iw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140616/2f8d92bc/attachment.pl>

From nicholas.winters at mail.mcgill.ca  Mon Jun 16 21:34:44 2014
From: nicholas.winters at mail.mcgill.ca (Nwinters)
Date: Mon, 16 Jun 2014 12:34:44 -0700 (PDT)
Subject: [R] glm.fit: fitted probabilities numerically 0 or 1 occurred for a
 continuous variable?
Message-ID: <1402947284982-4692211.post@n4.nabble.com>

I have gotten the this error before: "glm.fit: fitted probabilities
numerically 0 or 1 occurred"

and the problem was usually solved by combining one or more categories were
there were no observations.

I am now having this error show up for a variable that is continuous (not
categorical).

What could be the cause of this for a continuous variable??

Thanks, 
Nick



--
View this message in context: http://r.789695.n4.nabble.com/glm-fit-fitted-probabilities-numerically-0-or-1-occurred-for-a-continuous-variable-tp4692211.html
Sent from the R help mailing list archive at Nabble.com.


From marc_schwartz at me.com  Mon Jun 16 22:33:11 2014
From: marc_schwartz at me.com (Marc Schwartz)
Date: Mon, 16 Jun 2014 15:33:11 -0500
Subject: [R] glm.fit: fitted probabilities numerically 0 or 1 occurred
 for a continuous variable?
In-Reply-To: <1402947284982-4692211.post@n4.nabble.com>
References: <1402947284982-4692211.post@n4.nabble.com>
Message-ID: <35F97817-1B38-4E5F-8824-4BC4788163A4@me.com>


On Jun 16, 2014, at 2:34 PM, Nwinters <nicholas.winters at mail.mcgill.ca> wrote:

> I have gotten the this error before: "glm.fit: fitted probabilities
> numerically 0 or 1 occurred"
> 
> and the problem was usually solved by combining one or more categories were
> there were no observations.
> 
> I am now having this error show up for a variable that is continuous (not
> categorical).
> 
> What could be the cause of this for a continuous variable??
> 
> Thanks, 
> Nick


Presuming that this is logistic regression (family = binomial), the error is suggestive of complete or near complete separation in the association between your continuous IV and your binary response. This can occur if there is a breakpoint within the range of your IV where the dichotomous event is present on one side of the break and is absent on the other side of the break.

The resolution for the problem will depend upon first confirming the etiology of it and then, within the context of subject matter expertise, making some decisions on how to proceed. 

If you Google "logistic regression separation", you will get some resources that can be helpful.

Regards,

Marc Schwartz


From arrayprofile at yahoo.com  Tue Jun 17 00:19:30 2014
From: arrayprofile at yahoo.com (array chip)
Date: Mon, 16 Jun 2014 15:19:30 -0700
Subject: [R] prediction based on conditional logistic regression clogit
In-Reply-To: <A86A1C77-CF60-4B20-852C-A6F4B95E22E4@gmail.com>
References: <1402888946.86544.YahooMailNeo@web122903.mail.ne1.yahoo.com>
	<A86A1C77-CF60-4B20-852C-A6F4B95E22E4@gmail.com>
Message-ID: <1402957170.53548.YahooMailNeo@web122906.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140616/c29d432b/attachment.pl>

From kate.ignatius at gmail.com  Tue Jun 17 00:21:58 2014
From: kate.ignatius at gmail.com (Kate Ignatius)
Date: Mon, 16 Jun 2014 18:21:58 -0400
Subject: [R] Error in merge [negative length vectors are not allowed]
Message-ID: <CAE6QMsaKG5iW-723K9N9Xeit_sAOq5ioNcFT2Pc=wwJD4nGn2A@mail.gmail.com>

Hi All,

I'm trying to merge two files together using:

combinedfiles <- merge(comb1,comb2,by=c("Place","Stall","Menu"))

comb1 is about 2 million + rows (158MB) and comb2 is about 600K+ rows (52MB).

When I try to merge using the above syntax I get the error:

Error in merge.data.frame(comb1, comb2, by = c("Place","Stall","Menu")) :
  negative length vectors are not allowed

Is there is something that I'm doing wrong?  I've merged larger files
together in the past without a problem so am curious what might be the
problem here...

Thanks in advance!

~K


From ccberry at ucsd.edu  Tue Jun 17 02:48:28 2014
From: ccberry at ucsd.edu (Charles Berry)
Date: Tue, 17 Jun 2014 00:48:28 +0000
Subject: [R] prediction based on conditional logistic regression clogit
References: <1402888946.86544.YahooMailNeo@web122903.mail.ne1.yahoo.com>
	<A86A1C77-CF60-4B20-852C-A6F4B95E22E4@gmail.com>
Message-ID: <loom.20140617T020915-119@post.gmane.org>

peter dalgaard <pdalgd <at> gmail.com> writes:

> 
> 
> On 16 Jun 2014, at 05:22 , array chip <arrayprofile <at> yahoo.com> wrote:
> 

> > Hi, I am using clogit() from survival package to do conditional
> > logistic regression. I also need to make prediction on an
> > independent dataset to calculate predicted probability. Here is an
> > example:

[snip]

> > Can anyone suggest what's wrong here?
> > 

>  The direct cause is that clogit() works by using the fact that the
> likelihood is equivalent to a coxph() likelihood with stratification
> and all observation lengths set to 1. Therefore the analysis is
> formally on Surv(rep(1, 150L), status) and that goes belly-up if you
> apply the same formula to a data set of different length.

>  However, notice that there is no such thing as predict.clogit(), so
> you are attempting predict.coxph() on a purely formal Cox model. It
> is unclear to what extent predicted values, in the sense of coxph()
> are compatible with predictions in conditional logit models.

> 
> I'm rusty on this, but I think what you want is something like
> 
> m <- model.matrix(~ x1 + x2 - 1, data=dat.test)
> pp <- exp(m %*% coef(fit))
> pps <- ave(pp, dat.test$set, FUN=sum)
> pp/pps
> 

> i.e. the conditional probability that an observation is a case given
> covariates and that there is on case in each set (in the data given,
> you have sets of three with one being a case, so all predicted
> probabilities are close to 0.33). For more general matched sets, I'm
> not really sure what one wants. Real experts are welcome to chime
> in.

For the general situation of n cases in a stratum of size N, you want the
probability that the unit in question is one of n units drawn from a
stratum of size N without replacement with unequal probabilities of
selection over the units.

I am *not* an expert on that, but there is plenty written on it.

 Horvitz, Daniel G., and Donovan J. Thompson. "A generalization of
 sampling without replacement from a finite universe." Journal of the
 American Statistical Association 47.260 (1952): 663-685.

is a place to start.

The probability in question is a sum over the

    factorial(n)*choose(N-1,n-1)) 

elements corresponding to the number of samples (and orders) that
include a chosen element.

Of course, for n=1 there is just the one element, pp/pps.

HTH,

Chuck


From ripley at stats.ox.ac.uk  Tue Jun 17 06:45:27 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 17 Jun 2014 05:45:27 +0100
Subject: [R] Error in merge [negative length vectors are not allowed]
In-Reply-To: <CAE6QMsaKG5iW-723K9N9Xeit_sAOq5ioNcFT2Pc=wwJD4nGn2A@mail.gmail.com>
References: <CAE6QMsaKG5iW-723K9N9Xeit_sAOq5ioNcFT2Pc=wwJD4nGn2A@mail.gmail.com>
Message-ID: <539FC7E7.4080202@stats.ox.ac.uk>

On 16/06/2014 23:21, Kate Ignatius wrote:
> Hi All,
>
> I'm trying to merge two files together using:
>
> combinedfiles <- merge(comb1,comb2,by=c("Place","Stall","Menu"))
>
> comb1 is about 2 million + rows (158MB) and comb2 is about 600K+ rows (52MB).
>
> When I try to merge using the above syntax I get the error:
>
> Error in merge.data.frame(comb1, comb2, by = c("Place","Stall","Menu")) :
>    negative length vectors are not allowed
>
> Is there is something that I'm doing wrong?  I've merged larger files

Not telling us the the 'at a minimum' information asked for in the 
posting guide.

> together in the past without a problem so am curious what might be the
> problem here...
>
> Thanks in advance!
>
> ~K

This is usually an indication that you are trying to create more than 
2^31 rows in the result, which looks plausible given your data set 
sizes. AFAICS merge does not allow long vectors on a 64-bit system in 
released versions of R.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From radhakrishnan.mohan at gmail.com  Tue Jun 17 05:27:07 2014
From: radhakrishnan.mohan at gmail.com (Mohan Radhakrishnan)
Date: Tue, 17 Jun 2014 08:57:07 +0530
Subject: [R] Error: C stack usage
Message-ID: <CAOoXFP8i5+34t2RXExmaY+PsdxUngP=a3JikEptHZja3+p9PvQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140617/bbeb2af0/attachment.pl>

From ripley at stats.ox.ac.uk  Tue Jun 17 07:52:25 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 17 Jun 2014 06:52:25 +0100
Subject: [R] Error: C stack usage
In-Reply-To: <CAOoXFP8i5+34t2RXExmaY+PsdxUngP=a3JikEptHZja3+p9PvQ@mail.gmail.com>
References: <CAOoXFP8i5+34t2RXExmaY+PsdxUngP=a3JikEptHZja3+p9PvQ@mail.gmail.com>
Message-ID: <539FD799.6070801@stats.ox.ac.uk>

On 17/06/2014 04:27, Mohan Radhakrishnan wrote:
> Hi,
>         I am not relating this to shiny but this error was thrown by my
> shiny server code. Does it have anything to do with low memory settings ?

No.  It is an error in the C code in a package you are using which has 
corrupted R internals and the C stack.  Please follow the posting guide 
and report to its maintainer.

And see the posting guide:

'Questions likely to prompt discussion unintelligible to non-programmers 
should go to to R-devel.'

and of course, no HTML postings.

> I am spawning a JVM using rJava. That JVM is using the attach API to
> connect to another JVM
>
> Thanks,
> Mohan
>
> Error: C stack usage  140730070087404 is too close to the limit
> Error: C stack usage  140730070156700 is too close to the limit
>> Warning: stack imbalance in '.Call', 59 then -1
> Warning: stack imbalance in '{', 56 then -4
>
>   *** caught bus error ***
> address 0x100583fd8, cause 'non-existent physical address'
>
>
>   *** caught bus error ***
> address 0x100583fd8, cause 'non-existent physical address'
>>
> Traceback:
>   1: run(timeoutMs)
>   2: service(timeout)
>
> Possible actions:
> 1: abort (with core dump, if enabled)
> 2: normal R exit
> 3: exit R without saving workspace
> 4: exit R saving workspace
> Selection: run(10)
>
>
>   *** caught segfault ***
> address 0x20057ea40, cause 'memory not mapped'
>
> Traceback:
>   1: run(timeoutMs)
>   2: service(timeout)
>
> Possible actions:
> 1: abort (with core dump, if enabled)
> 2: normal R exit
> 3: exit R without saving workspace
> 4: exit R saving workspace
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From thpe at simecol.de  Tue Jun 17 09:50:54 2014
From: thpe at simecol.de (Thomas Petzoldt)
Date: Tue, 17 Jun 2014 09:50:54 +0200
Subject: [R] fitting grid-based models
In-Reply-To: <CA+qSynzQvo2B-5QH8-FMrVMp0bigJe0wNjazFLq0Mqm=veFb=Q@mail.gmail.com>
References: <CA+qSynzQvo2B-5QH8-FMrVMp0bigJe0wNjazFLq0Mqm=veFb=Q@mail.gmail.com>
Message-ID: <539FF35E.6080208@simecol.de>

Hi,

I have no example at hand, but the usual way could be indeed to
calculate a time series of an adequate statistic (e.g. spatial
statistic) from both, the observed and the simulated data and then to
apply standard model fitting.

Thomas


From dilaradi21 at gmail.com  Tue Jun 17 08:51:44 2014
From: dilaradi21 at gmail.com (dila radi)
Date: Mon, 16 Jun 2014 23:51:44 -0700
Subject: [R] to extract extreme data for specified period
Message-ID: <CAMgoKB+YRNVoqhD3T8isb_sk9f81gPigEuiArDMkHvMLfA8YYw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140616/ec3b7477/attachment.pl>

From jvr.rodriguez at gmail.com  Tue Jun 17 09:39:32 2014
From: jvr.rodriguez at gmail.com (=?UTF-8?B?SmF2aWVyIFJvZHLDrWd1ZXogUMOpcmV6?=)
Date: Tue, 17 Jun 2014 09:39:32 +0200
Subject: [R] fitting grid-based models
Message-ID: <CA+qSynzQvo2B-5QH8-FMrVMp0bigJe0wNjazFLq0Mqm=veFb=Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140617/50aeb843/attachment.pl>

From ayako.hiyoshi.09 at alumni.ucl.ac.uk  Tue Jun 17 09:49:30 2014
From: ayako.hiyoshi.09 at alumni.ucl.ac.uk (Hiyoshi, Ayako)
Date: Tue, 17 Jun 2014 07:49:30 +0000
Subject: [R] C: drive memory full
Message-ID: <1402991370388.32533@alumni.ucl.ac.uk>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140617/63702071/attachment.pl>

From thpe at simecol.de  Tue Jun 17 10:47:54 2014
From: thpe at simecol.de (Thomas Petzoldt)
Date: Tue, 17 Jun 2014 10:47:54 +0200
Subject: [R] fitting grid-based models
In-Reply-To: <CA+qSynzmz_RXXCE-Y+myqoFppV2nUNur8JS47tLOgKRqdx9kww@mail.gmail.com>
References: <CA+qSynzQvo2B-5QH8-FMrVMp0bigJe0wNjazFLq0Mqm=veFb=Q@mail.gmail.com>
	<539FF35E.6080208@simecol.de>
	<CA+qSynzmz_RXXCE-Y+myqoFppV2nUNur8JS47tLOgKRqdx9kww@mail.gmail.com>
Message-ID: <53A000BA.8070306@simecol.de>

On 17.06.2014 10:37, Javier Rodr?guez P?rez wrote:
> Hi Thomas, Thank you very much for your help. I will try to calculate
> some summary statistics and fit observed and simulated data using a
> time series (as your examples). With observed data, I would use two
> values (e.g. 0 and 10), because I do not have intermediate values.
> Thanks! Javier

Fitting models is often more an art than a science, but there are also
approaches to overcome the dilemma, cf.:

Piou, C. Berger, U., Gririmm, V. (2009) Proposing an information
criterion for individual-based models developed in a pattern-oriented
modelling framework. Ecological modelling 220(17) 1957-1967. DOI:
10.1016/j.ecolmodel.2009.05.003

... and related work about individual-based models and pattern oriented
modelling, e.g. the book of Grimm and Railsback.

Thomas


From rh at knut-krueger.de  Tue Jun 17 11:19:38 2014
From: rh at knut-krueger.de (Knut Krueger)
Date: Tue, 17 Jun 2014 11:19:38 +0200
Subject: [R] Matrix Tests
Message-ID: <53A0082A.3020707@knut-krueger.de>


  There is a Mtrix Tester on the pages of Charlotte K. Hemelrijk, with 
TauKr-Test Partial TAU Kr-TEst , MantelZ, R-Test andK TEst
Is there a similar package on R for that?
(
http://www.rug.nl/research/behavioural-ecology-and-self-organization/people/hemelrijk
scroll down to MatrixTester
> Social interaction matrices are often analysed with the help of matrix-statistics, such as the TauKr test (Hemelrijk, 1990a; Hemelrijk, 1990b). The program for such analyses, MatrixTester, can be downloaded here [manual]. For questions regarding matrix statistics for social interaction matrices or the program MatrixTester, contact Charlotte Hemelrijk.

Kind Regards Knut


From ripley at stats.ox.ac.uk  Tue Jun 17 11:37:21 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 17 Jun 2014 10:37:21 +0100
Subject: [R] C: drive memory full
In-Reply-To: <1402991370388.32533@alumni.ucl.ac.uk>
References: <1402991370388.32533@alumni.ucl.ac.uk>
Message-ID: <53A00C51.7040503@stats.ox.ac.uk>

tempdir() is specific to an R session.

Start up R and run

dirname(tempdir())

and look at that directory.  Shut down R, then remove all old 
files/folders in that directory, especially those beginning with 'Rtmp'.

An R process tries to clean up after itself but

- it cannot do so if it segfaults ....
- Windows has rules which no other OS has which can result in files 
being locked and hence not deletable.


On 17/06/2014 08:49, Hiyoshi, Ayako wrote:
> Dear R users,
>
>
>
> Hello, I am new to R and confused about my PC's memory space after using R a while.
>
>
>
> My PC is Windows 8, RAM 8GB. I have run some analyses using commands like "vglm", "aalen(Sruv())", lm()... some regressions.
>
>
>
> I also use Stata, and when I tried to run Stata (big file), Stata could not do something which used to do because of the lack of memory space. I suspect R's something because R is the only new activity I did recently.
>
>
>
> I tried to google and found 'tempdir()'.
>
> I checked my temporary file but it was empty.
>
> Just in case, after running 'unlink(tempdir(),recursive=TRUE)', I restarted my computer, but memory space did not change. But there seems still something big in my C: drive storage and nearly 12GB is eaten.
>
>
>
> Could it be possible that R saved something somewhere?
>
> As I finished analyses, all I need is to erase everything stored so that I can get my memory space back.
>
>
>
> Thank you so much for your help.
>
>
>
> Best wishes,
>
> Ayako
>
>
>
>
>
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ayako.hiyoshi.09 at alumni.ucl.ac.uk  Tue Jun 17 12:39:41 2014
From: ayako.hiyoshi.09 at alumni.ucl.ac.uk (Hiyoshi, Ayako)
Date: Tue, 17 Jun 2014 10:39:41 +0000
Subject: [R] C: drive memory full
In-Reply-To: <53A00C51.7040503@stats.ox.ac.uk>
References: <1402991370388.32533@alumni.ucl.ac.uk>,
	<53A00C51.7040503@stats.ox.ac.uk>
Message-ID: <1403001581203.14992@alumni.ucl.ac.uk>

Dear Professor Ripley,

Thank you so much for your quick reply.

I tried 'dianame(tempdir())' and removed several 'Rtemp' and all other files. Unfortunately it did not changed C: drive space much. 

I am really sorry, but could there be other things stored in somewhere in C: drive ?

I called IT support, but they could not spot either.

Kind regards,
Ayako

________________________________________
From: Prof Brian Ripley <ripley at stats.ox.ac.uk>
Sent: 17 June 2014 10:37
To: Hiyoshi, Ayako; r-help at R-project.org
Subject: Re: [R] C: drive memory full

tempdir() is specific to an R session.

Start up R and run

dirname(tempdir())

and look at that directory.  Shut down R, then remove all old
files/folders in that directory, especially those beginning with 'Rtmp'.

An R process tries to clean up after itself but

- it cannot do so if it segfaults ....
- Windows has rules which no other OS has which can result in files
being locked and hence not deletable.


On 17/06/2014 08:49, Hiyoshi, Ayako wrote:
> Dear R users,
>
>
>
> Hello, I am new to R and confused about my PC's memory space after using R a while.
>
>
>
> My PC is Windows 8, RAM 8GB. I have run some analyses using commands like "vglm", "aalen(Sruv())", lm()... some regressions.
>
>
>
> I also use Stata, and when I tried to run Stata (big file), Stata could not do something which used to do because of the lack of memory space. I suspect R's something because R is the only new activity I did recently.
>
>
>
> I tried to google and found 'tempdir()'.
>
> I checked my temporary file but it was empty.
>
> Just in case, after running 'unlink(tempdir(),recursive=TRUE)', I restarted my computer, but memory space did not change. But there seems still something big in my C: drive storage and nearly 12GB is eaten.
>
>
>
> Could it be possible that R saved something somewhere?
>
> As I finished analyses, all I need is to erase everything stored so that I can get my memory space back.
>
>
>
> Thank you so much for your help.
>
>
>
> Best wishes,
>
> Ayako
>
>
>
>
>
>
>
>       [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


--
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595



From ripley at stats.ox.ac.uk  Tue Jun 17 12:42:11 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 17 Jun 2014 11:42:11 +0100
Subject: [R] C: drive memory full
In-Reply-To: <1403001581203.14992@alumni.ucl.ac.uk>
References: <1402991370388.32533@alumni.ucl.ac.uk>,
	<53A00C51.7040503@stats.ox.ac.uk>
	<1403001581203.14992@alumni.ucl.ac.uk>
Message-ID: <53A01B83.2030908@stats.ox.ac.uk>

On 17/06/2014 11:39, Hiyoshi, Ayako wrote:
> Dear Professor Ripley,
>
> Thank you so much for your quick reply.
>
> I tried 'dianame(tempdir())' and removed several 'Rtemp' and all other files. Unfortunately it did not changed C: drive space much.
>
> I am really sorry, but could there be other things stored in somewhere in C: drive ?

Yes, as R is a programming language.  You can do many things to create 
files.

> I called IT support, but they could not spot either.

>
> Kind regards,
> Ayako
>
> ________________________________________
> From: Prof Brian Ripley <ripley at stats.ox.ac.uk>
> Sent: 17 June 2014 10:37
> To: Hiyoshi, Ayako; r-help at R-project.org
> Subject: Re: [R] C: drive memory full
>
> tempdir() is specific to an R session.
>
> Start up R and run
>
> dirname(tempdir())
>
> and look at that directory.  Shut down R, then remove all old
> files/folders in that directory, especially those beginning with 'Rtmp'.
>
> An R process tries to clean up after itself but
>
> - it cannot do so if it segfaults ....
> - Windows has rules which no other OS has which can result in files
> being locked and hence not deletable.
>
>
> On 17/06/2014 08:49, Hiyoshi, Ayako wrote:
>> Dear R users,
>>
>>
>>
>> Hello, I am new to R and confused about my PC's memory space after using R a while.
>>
>>
>>
>> My PC is Windows 8, RAM 8GB. I have run some analyses using commands like "vglm", "aalen(Sruv())", lm()... some regressions.
>>
>>
>>
>> I also use Stata, and when I tried to run Stata (big file), Stata could not do something which used to do because of the lack of memory space. I suspect R's something because R is the only new activity I did recently.
>>
>>
>>
>> I tried to google and found 'tempdir()'.
>>
>> I checked my temporary file but it was empty.
>>
>> Just in case, after running 'unlink(tempdir(),recursive=TRUE)', I restarted my computer, but memory space did not change. But there seems still something big in my C: drive storage and nearly 12GB is eaten.
>>
>>
>>
>> Could it be possible that R saved something somewhere?
>>
>> As I finished analyses, all I need is to erase everything stored so that I can get my memory space back.
>>
>>
>>
>> Thank you so much for your help.
>>
>>
>>
>> Best wishes,
>>
>> Ayako
>>
>>
>>
>>
>>
>>
>>
>>        [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>
> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From martyn.byng at nag.co.uk  Tue Jun 17 13:10:04 2014
From: martyn.byng at nag.co.uk (Martyn Byng)
Date: Tue, 17 Jun 2014 11:10:04 +0000
Subject: [R] C: drive memory full
In-Reply-To: <1403001581203.14992@alumni.ucl.ac.uk>
References: <1402991370388.32533@alumni.ucl.ac.uk>,
	<53A00C51.7040503@stats.ox.ac.uk>
	<1403001581203.14992@alumni.ucl.ac.uk>
Message-ID: <7e9aa8e0926d443db608b57b99d4dfd9@AM3PR05MB545.eurprd05.prod.outlook.com>

Hi,

Try

http://social.technet.microsoft.com/wiki/contents/articles/19295.windows-8-how-to-search-for-large-files.aspx

Martyn

-----Original Message-----
From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On Behalf Of Hiyoshi, Ayako
Sent: 17 June 2014 11:40
To: Prof Brian Ripley; r-help at R-project.org
Subject: Re: [R] C: drive memory full

Dear Professor Ripley,

Thank you so much for your quick reply.

I tried 'dianame(tempdir())' and removed several 'Rtemp' and all other files. Unfortunately it did not changed C: drive space much. 

I am really sorry, but could there be other things stored in somewhere in C: drive ?

I called IT support, but they could not spot either.

Kind regards,
Ayako

________________________________________
From: Prof Brian Ripley <ripley at stats.ox.ac.uk>
Sent: 17 June 2014 10:37
To: Hiyoshi, Ayako; r-help at R-project.org
Subject: Re: [R] C: drive memory full

tempdir() is specific to an R session.

Start up R and run

dirname(tempdir())

and look at that directory.  Shut down R, then remove all old files/folders in that directory, especially those beginning with 'Rtmp'.

An R process tries to clean up after itself but

- it cannot do so if it segfaults ....
- Windows has rules which no other OS has which can result in files being locked and hence not deletable.


On 17/06/2014 08:49, Hiyoshi, Ayako wrote:
> Dear R users,
>
>
>
> Hello, I am new to R and confused about my PC's memory space after using R a while.
>
>
>
> My PC is Windows 8, RAM 8GB. I have run some analyses using commands like "vglm", "aalen(Sruv())", lm()... some regressions.
>
>
>
> I also use Stata, and when I tried to run Stata (big file), Stata could not do something which used to do because of the lack of memory space. I suspect R's something because R is the only new activity I did recently.
>
>
>
> I tried to google and found 'tempdir()'.
>
> I checked my temporary file but it was empty.
>
> Just in case, after running 'unlink(tempdir(),recursive=TRUE)', I restarted my computer, but memory space did not change. But there seems still something big in my C: drive storage and nearly 12GB is eaten.
>
>
>
> Could it be possible that R saved something somewhere?
>
> As I finished analyses, all I need is to erase everything stored so that I can get my memory space back.
>
>
>
> Thank you so much for your help.
>
>
>
> Best wishes,
>
> Ayako
>
>
>
>
>
>
>
>       [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


--
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

________________________________________________________________________
This e-mail has been scanned for all viruses by Star.\ _...{{dropped:3}}


From jvr.rodriguez at gmail.com  Tue Jun 17 10:37:03 2014
From: jvr.rodriguez at gmail.com (=?UTF-8?B?SmF2aWVyIFJvZHLDrWd1ZXogUMOpcmV6?=)
Date: Tue, 17 Jun 2014 10:37:03 +0200
Subject: [R] fitting grid-based models
In-Reply-To: <539FF35E.6080208@simecol.de>
References: <CA+qSynzQvo2B-5QH8-FMrVMp0bigJe0wNjazFLq0Mqm=veFb=Q@mail.gmail.com>
	<539FF35E.6080208@simecol.de>
Message-ID: <CA+qSynzmz_RXXCE-Y+myqoFppV2nUNur8JS47tLOgKRqdx9kww@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140617/2cc03519/attachment.pl>

From chuse22 at gmail.com  Tue Jun 17 14:32:54 2014
From: chuse22 at gmail.com (Xuse Chuse)
Date: Tue, 17 Jun 2014 14:32:54 +0200
Subject: [R] hypergeometric integral
Message-ID: <CANZw-E51VtzKTDsxR5N9BKDatL1tVn_dNCAnhwUSUuM5qJNZ1g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140617/cdb93299/attachment.pl>

From jim at bitwrit.com.au  Tue Jun 17 14:35:52 2014
From: jim at bitwrit.com.au (Jim Lemon)
Date: Tue, 17 Jun 2014 22:35:52 +1000
Subject: [R] to extract extreme data for specified period
In-Reply-To: <CAMgoKB+YRNVoqhD3T8isb_sk9f81gPigEuiArDMkHvMLfA8YYw@mail.gmail.com>
References: <CAMgoKB+YRNVoqhD3T8isb_sk9f81gPigEuiArDMkHvMLfA8YYw@mail.gmail.com>
Message-ID: <10317568.rfG9JNEIQf@localhost.localdomain>

On Mon, 16 Jun 2014 11:51:44 PM dila radi wrote:
> Dear R users,
> 
> I used this codes to find the 1-day annual rainfall maximum
> 
> bmFort <- blockmaxxer(Fort, blocks = Fort$year, 
which="Prec");bmFort
> 
>  and the output is given below:
> 
> structure(list(obs = c(119, 507, 994, 1398, 1583, 1917), tobs = 
c(119,
> 142, 264, 303, 123, 91), month = c(4, 5, 9, 10, 5, 4), day = c(29,
> 22, 21, 30, 2, 1), year = c(1900, 1901, 1902, 1903, 1904, 1905
> ), Prec = c(2.39, 2.32, 4.34, 0.85, 3.02, 1.74)), .Names = c("obs",
> "tobs", "month", "day", "year", "Prec"), row.names = c(119L,
> 507L, 994L, 1398L, 1583L, 1917L), class = "data.frame")
> 
> however, I would also like to find the 7-days annual rainfall 
maximum by
> months within a year. I tried changing ' Fort$year' to ' Fort$day' and I
> got the following:
> 
> structure(list(obs = c(28610, 1583, 14125, 18052, 18905, 32937
> ), tobs = c(121, 123, 246, 155, 278, 65), month = c(5, 5, 9,
> 6, 10, 3), day = c(1, 2, 3, 4, 5, 6), year = c(1978, 1904, 1938,
> 1949, 1951, 1990), Prec = c(1.85, 3.02, 3.54, 3.54, 1.67, 3.48
> )), .Names = c("obs", "tobs", "month", "day", "year", "Prec"), 
row.names =
> c(28610L,
> 1583L, 14125L, 18052L, 18905L, 32937L), class = "data.frame")
> 
> what I want is the 7-days maximum within a year that is maximum 
value for
> eg. from 1/1/1990 to 7/1/1990 then another maximum is 8/1/1990 
to 14/1/1990
> and so on.
> 
> this is some sample data:
> structure(list(obs = c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12,
> 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28,
> 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40), tobs = c(1,
> 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19,
> 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,
> 36, 37, 38, 39, 40), month = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> 2, 2, 2, 2, 2, 2, 2, 2, 2), day = c(1, 2, 3, 4, 5, 6, 7, 8, 9,
> 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25,
> 26, 27, 28, 29, 30, 31, 1, 2, 3, 4, 5, 6, 7, 8, 9), year = c(1900,
> 1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900,
> 1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900,
> 1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900,
> 1900, 1900, 1900, 1900, 1900, 1900), Prec = c(0, 0, 0, 0, 0,
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.1, 0.03, 0, 0, 0, 0, 0, 0, 0, 0,
> 0, 0, 0, 0.08, 0.04, 0, 0, 0, 0, 0, 0, 0, 0, 0.02, 0, 0)), .Names =
> c("obs",
> "tobs", "month", "day", "year", "Prec"), row.names = c(NA, 40L
> ), class = "data.frame")
> 
Hi Dila,
As you seem to want to divide the year into seven day intervals 
regardless of months, try this:

dr.df<-structure(list(obs = c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12,
13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28,
29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40), tobs = c(1,
2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19,
20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,
36, 37, 38, 39, 40), month = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
2, 2, 2, 2, 2, 2, 2, 2, 2), day = c(1, 2, 3, 4, 5, 6, 7, 8, 9,
10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25,
26, 27, 28, 29, 30, 31, 1, 2, 3, 4, 5, 6, 7, 8, 9), year = c(1900,
1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900,
1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900,
1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900,
1900, 1900, 1900, 1900, 1900, 1900), Prec = c(0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0.1, 0.03, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0.08, 0.04, 0, 0, 0, 0, 0, 0, 0, 0, 0.02, 0, 0)), .Names =
c("obs",
"tobs", "month", "day", "year", "Prec"), row.names = c(NA, 40L
), class = "data.frame")
# create a grouping variable with the appropriate length
dr.df$byweek<-rep(1:52,each=7)[1:length(dr.df$Prec)]
# get the sum of each successive seven days
weeksums<-by(dr.df$Prec,dr.df$byweek,sum)

Then you can just get the max of weeksums.

Jim


From ayako.hiyoshi.09 at alumni.ucl.ac.uk  Tue Jun 17 14:48:54 2014
From: ayako.hiyoshi.09 at alumni.ucl.ac.uk (Hiyoshi, Ayako)
Date: Tue, 17 Jun 2014 12:48:54 +0000
Subject: [R] C: drive memory full
In-Reply-To: <7e9aa8e0926d443db608b57b99d4dfd9@AM3PR05MB545.eurprd05.prod.outlook.com>
References: <1402991370388.32533@alumni.ucl.ac.uk>,
	<53A00C51.7040503@stats.ox.ac.uk>
	<1403001581203.14992@alumni.ucl.ac.uk>,
	<7e9aa8e0926d443db608b57b99d4dfd9@AM3PR05MB545.eurprd05.prod.outlook.com>
Message-ID: <1403009334347.67169@alumni.ucl.ac.uk>

Dear Martyn and Professor Ripley,

Thank you so much for your help. I used Window's large file search (it was useful! thank you), but there is no big files detected in C: drive .
Perhaps I will have to reinstall Windows..

Thank you so much for your replies.

Best wishes,
Ayako
________________________________________
From: Martyn Byng <martyn.byng at nag.co.uk>
Sent: 17 June 2014 12:10
To: Hiyoshi, Ayako; Prof Brian Ripley; r-help at R-project.org
Subject: RE: [R] C: drive memory full

Hi,

Try

http://social.technet.microsoft.com/wiki/contents/articles/19295.windows-8-how-to-search-for-large-files.aspx

Martyn

-----Original Message-----
From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On Behalf Of Hiyoshi, Ayako
Sent: 17 June 2014 11:40
To: Prof Brian Ripley; r-help at R-project.org
Subject: Re: [R] C: drive memory full

Dear Professor Ripley,

Thank you so much for your quick reply.

I tried 'dianame(tempdir())' and removed several 'Rtemp' and all other files. Unfortunately it did not changed C: drive space much.

I am really sorry, but could there be other things stored in somewhere in C: drive ?

I called IT support, but they could not spot either.

Kind regards,
Ayako

________________________________________
From: Prof Brian Ripley <ripley at stats.ox.ac.uk>
Sent: 17 June 2014 10:37
To: Hiyoshi, Ayako; r-help at R-project.org
Subject: Re: [R] C: drive memory full

tempdir() is specific to an R session.

Start up R and run

dirname(tempdir())

and look at that directory.  Shut down R, then remove all old files/folders in that directory, especially those beginning with 'Rtmp'.

An R process tries to clean up after itself but

- it cannot do so if it segfaults ....
- Windows has rules which no other OS has which can result in files being locked and hence not deletable.


On 17/06/2014 08:49, Hiyoshi, Ayako wrote:
> Dear R users,
>
>
>
> Hello, I am new to R and confused about my PC's memory space after using R a while.
>
>
>
> My PC is Windows 8, RAM 8GB. I have run some analyses using commands like "vglm", "aalen(Sruv())", lm()... some regressions.
>
>
>
> I also use Stata, and when I tried to run Stata (big file), Stata could not do something which used to do because of the lack of memory space. I suspect R's something because R is the only new activity I did recently.
>
>
>
> I tried to google and found 'tempdir()'.
>
> I checked my temporary file but it was empty.
>
> Just in case, after running 'unlink(tempdir(),recursive=TRUE)', I restarted my computer, but memory space did not change. But there seems still something big in my C: drive storage and nearly 12GB is eaten.
>
>
>
> Could it be possible that R saved something somewhere?
>
> As I finished analyses, all I need is to erase everything stored so that I can get my memory space back.
>
>
>
> Thank you so much for your help.
>
>
>
> Best wishes,
>
> Ayako
>
>
>
>
>
>
>
>       [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


--
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

________________________________________________________________________
This e-mail has been scanned for all viruses by Star.
...{{dropped:4}}


From Ted.Harding at wlandres.net  Tue Jun 17 15:14:44 2014
From: Ted.Harding at wlandres.net ( (Ted Harding))
Date: Tue, 17 Jun 2014 14:14:44 +0100 (BST)
Subject: [R] C: drive memory full
In-Reply-To: <1403009334347.67169@alumni.ucl.ac.uk>
Message-ID: <XFMail.20140617141444.Ted.Harding@wlandres.net>

Don't forget the possibility of "hidden files", which will not be
shown using normal file-listing procedures. It may be that R has
stored those files as hidden files.

See, for example:

http://windows.microsoft.com/en-gb/windows/show-hidden-files

http://www.sevenforums.com/tutorials/394-hidden-files-folders-show-hide.html

[NB: These are the results of a google search. I am no expert on
Windows myself ... ]

Hoping this helps,
Ted.

On 17-Jun-2014 12:48:54 Hiyoshi, Ayako wrote:
> Dear Martyn and Professor Ripley,
> 
> Thank you so much for your help. I used Window's large file search (it was
> useful! thank you), but there is no big files detected in C: drive .
> Perhaps I will have to reinstall Windows..
> 
> Thank you so much for your replies.
> 
> Best wishes,
> Ayako
> ________________________________________
> From: Martyn Byng <martyn.byng at nag.co.uk>
> Sent: 17 June 2014 12:10
> To: Hiyoshi, Ayako; Prof Brian Ripley; r-help at R-project.org
> Subject: RE: [R] C: drive memory full
> 
> Hi,
> 
> Try
> 
> http://social.technet.microsoft.com/wiki/contents/articles/19295.windows-8-how
> -to-search-for-large-files.aspx
> 
> Martyn
> 
> -----Original Message-----
> From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On
> Behalf Of Hiyoshi, Ayako
> Sent: 17 June 2014 11:40
> To: Prof Brian Ripley; r-help at R-project.org
> Subject: Re: [R] C: drive memory full
> 
> Dear Professor Ripley,
> 
> Thank you so much for your quick reply.
> 
> I tried 'dianame(tempdir())' and removed several 'Rtemp' and all other files.
> Unfortunately it did not changed C: drive space much.
> 
> I am really sorry, but could there be other things stored in somewhere in C:
> drive ?
> 
> I called IT support, but they could not spot either.
> 
> Kind regards,
> Ayako
> 
> ________________________________________
> From: Prof Brian Ripley <ripley at stats.ox.ac.uk>
> Sent: 17 June 2014 10:37
> To: Hiyoshi, Ayako; r-help at R-project.org
> Subject: Re: [R] C: drive memory full
> 
> tempdir() is specific to an R session.
> 
> Start up R and run
> 
> dirname(tempdir())
> 
> and look at that directory.  Shut down R, then remove all old files/folders
> in that directory, especially those beginning with 'Rtmp'.
> 
> An R process tries to clean up after itself but
> 
> - it cannot do so if it segfaults ....
> - Windows has rules which no other OS has which can result in files being
> locked and hence not deletable.
> 
> 
> On 17/06/2014 08:49, Hiyoshi, Ayako wrote:
>> Dear R users,
>>
>> Hello, I am new to R and confused about my PC's memory space after
>> using R a while.
>>
>> My PC is Windows 8, RAM 8GB. I have run some analyses using commands
>> like "vglm", "aalen(Sruv())", lm()... some regressions.
>>
>> I also use Stata, and when I tried to run Stata (big file), Stata
>> could not do something which used to do because of the lack of memory
>> space. I suspect R's something because R is the only new activity I
>> did recently.
>>
>> I tried to google and found 'tempdir()'.
>>
>> I checked my temporary file but it was empty.
>>
>> Just in case, after running 'unlink(tempdir(),recursive=TRUE)', I
>> restarted my computer, but memory space did not change. But there
>> seems still something big in my C: drive storage and nearly 12GB
>> is eaten.
>>
>> Could it be possible that R saved something somewhere?
>>
>> As I finished analyses, all I need is to erase everything stored
>> so that I can get my memory space back.
>> 
>> Ayako
>>       [[alternative HTML version deleted]]

-------------------------------------------------
E-Mail: (Ted Harding) <Ted.Harding at wlandres.net>
Date: 17-Jun-2014  Time: 14:14:40
This message was sent by XFMail


From JLucke at ria.buffalo.edu  Tue Jun 17 16:24:12 2014
From: JLucke at ria.buffalo.edu (JLucke at ria.buffalo.edu)
Date: Tue, 17 Jun 2014 10:24:12 -0400
Subject: [R] hypergeometric integral
In-Reply-To: <CANZw-E51VtzKTDsxR5N9BKDatL1tVn_dNCAnhwUSUuM5qJNZ1g@mail.gmail.com>
References: <CANZw-E51VtzKTDsxR5N9BKDatL1tVn_dNCAnhwUSUuM5qJNZ1g@mail.gmail.com>
Message-ID: <OF81796682.368CBE52-ON85257CFA.004D101F-85257CFA.004F2159@ria.buffalo.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140617/bcb9db53/attachment.pl>

From therneau at mayo.edu  Tue Jun 17 16:38:46 2014
From: therneau at mayo.edu (Therneau, Terry M., Ph.D.)
Date: Tue, 17 Jun 2014 09:38:46 -0500
Subject: [R] prediction based on conditional logistic regression, clogit
In-Reply-To: <mailman.23.1402999208.32588.r-help@r-project.org>
References: <mailman.23.1402999208.32588.r-help@r-project.org>
Message-ID: <d46aec$hd2r61@ironport9.mayo.edu>

I ususally scan the digest for "surv", so missed your question on the first round.
You caught predict with a case that I never thought of; I'll look into making it smarter.

As Peter D said, the clogit function simply sets up a special data set and then calls 
coxph, and is based on an identity that the likelihood for the conditional logistic is 
identical to the likelihood of a Cox model for a specially structured data set.  I 
vacillate on whether this identity is just a mathematical accident or the mark of some 
deep truth.  However it did allow us to use existing code rather than write new routine 
from scratch.

In this special data set all of the follow-up times are set to 1 (any constant value would 
do).  For normal Cox regression a predicted "expected number of events" depends on the 
length of follow-up for the subject, so the predict routine expects to find a follow-up 
time variable in your newdata.  In my code, "rep(1, 150L)" is being mistaken for the name 
of the time variable, and failure of the confused routine ensues in due course.

For the interim: in a conditional logistic the "expected number of events" is just 
exp(eta)/(1 + exp(eta)) where eta is the linear predictor.  There is no follow-up time to 
worry about and predict.coxph would have done way too much work, even if it hadn't gotton 
confused.  Use

	risk <- predict(fit, newdata=dat.test, type='risk')
	risk / (1+risk)

Terry Therneau

>
>> >Hi, I am using clogit() from survival package to do conditional logistic regression. I also need to make prediction on an independent dataset to calculate predicted probability. Here is an example:
>> >
>> >
>>> >>dat <- data.frame(set=rep(1:50,each=3), status=rep(c(1,0,0),50), x1=rnorm(150,5,1), x2=rnorm(150,7,1.5))
>>> >>dat.test <- data.frame(set=rep(1:30,each=3), status=rep(c(1,0,0),30), x1=rnorm(90,5,1), x2=rnorm(90,7,1.5))
>>> >>fit<-clogit(status~x1+x2+strata(set),dat)
>>> >>predict(fit,newdata=dat.test,type='expected')
>> >Error in Surv(rep(1, 150L), status) :
>> >?  Time and status are different lengths
>> >
>> >Can anyone suggest what's wrong here?
>> >


From alex at chaotic-neutral.de  Tue Jun 17 16:40:24 2014
From: alex at chaotic-neutral.de (Alexander Engelhardt)
Date: Tue, 17 Jun 2014 16:40:24 +0200
Subject: [R] mgcv: I can't manually reconstruct a P-spline from a GAM's
	coefficients
Message-ID: <53A05358.2020100@chaotic-neutral.de>

Hello R-helpers,

I am working through Simon Wood's GAM book and want to specify my own 
knot locations (on even tens, i.e. 10, 20, 30, etc.). Then, I want to 
compute a GAM on that area, and given the coefficients, reconstruct the 
same P-spline that is drawn in plot(my_gam).

I'm failing.
Here is what I am doing. I think the two plot calls at the end should 
produce the same line, but they don't:


bspline <- function(x,k,i,m=2){
     ## "draws" one B-spline basis function
     ## order of splines is m+1, i.e. m=2 means cubic splines of order 3
     if(m==-1){
         res <- as.numeric(x<k[i+1] & x>=k[i])
     } else {
         z0 <- (x-k[i]) / (k[i+m+1]-k[i])
         z1 <- (k[i+m+2]-x)/(k[i+m+2]-k[i+1])
         res <- z0*bspline(x,k,i,m-1) + z1*bspline(x,k,i+1,m-1)
     }
     res
}

construct_bspline <- function(x, knots, coefs, m){
     ## Constructs a complete spline from a set of knots and coefficients
     y <- rep(0, times=length(x))
     for(i in seq(coefs)){
         coef <- coefs[i]
         y <- y + coefs[i] * bspline(x, knots, i, m)
     }
     y
}

span_knots <- function(start, end, h, m){
     ## create knots of distance 'h' from 'start' to 'end',
     ##  to use with B-splines of order m+1
     first_knot <- start - start%%h - (m+1)*h
     last_knot <- end-1 + (h - (end-1)%%h) + (m+1)*h

     knots <- seq(first_knot, last_knot, by=h)
     knots
}

## create data:
x <- 125:197
y <- cos(sqrt(40*x)/3) + 3  # mean=3, s(0)=4
plot(x,y)

m <- 2  # use cubic splines of order m+1=3

myknots <- span_knots(start=min(x), end=max(x), h=10, m=m)

## Why do I have to set 'k' to length(myknots)-m-2 here? According to 
the book, it should be length(myknots)-m-1.
my_gam <- gam(y~s(x, bs="ps", m=m, k=length(myknots)-m-2), 
knots=list(x=myknots))

## Here, I construct my own spline with the coefficients of the GAM, 
except coef()[1] which is the intercept
spline_y <- construct_bspline(x, my_gam$smooth[[1]]$knots, 
coef(my_gam)[-1], mm)

plot(my_gam)
lines(x,spline_y)  # why is this different? It seems shifted on the x- 
and y-axis


From JLucke at ria.buffalo.edu  Tue Jun 17 16:52:24 2014
From: JLucke at ria.buffalo.edu (JLucke at ria.buffalo.edu)
Date: Tue, 17 Jun 2014 10:52:24 -0400
Subject: [R] hypergeometric integral
In-Reply-To: <OF81796682.368CBE52-ON85257CFA.004D101F-85257CFA.004F2159@ria.buffalo.edu>
References: <CANZw-E51VtzKTDsxR5N9BKDatL1tVn_dNCAnhwUSUuM5qJNZ1g@mail.gmail.com>
	<OF81796682.368CBE52-ON85257CFA.004D101F-85257CFA.004F2159@ria.buffalo.edu>
Message-ID: <OFF1A605D7.B650E984-ON85257CFA.00511235-85257CFA.0051B699@ria.buffalo.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140617/09b72b8e/attachment.pl>

From cryan at binghamton.edu  Tue Jun 17 17:49:06 2014
From: cryan at binghamton.edu (Christopher W Ryan)
Date: Tue, 17 Jun 2014 11:49:06 -0400
Subject: [R] empty density plot for point pattern in spatstat
In-Reply-To: <CAM+rpYnjg_SGnyGrVcwuakX1xmXd7ysy1gZntdn7m2zD=kqong@mail.gmail.com>
References: <CAM+rpYnjg_SGnyGrVcwuakX1xmXd7ysy1gZntdn7m2zD=kqong@mail.gmail.com>
Message-ID: <CAM+rpYmz8zWkZvpNX6--a+F6vu6p2JkjzzTeoWta+PZ1oKh6jA@mail.gmail.com>

I upgraded to version 3.1.0 of R, still on Win XP, but that did not
solve the problem:

library(spatstat)
data(redwood)
str(redwood)
plot(redwood)  # works OK
plot(Kest(redwood))  # works OK
plot(density(redwood))  # produces an "empty" plot
                                       # with just the figure border
                                       # and a thin vertical box for
the color ramp
                                       # but no color ramp in it

Any other ideas? I'd be much obliged.

Thanks.

--Chris Ryan



On Tue, May 20, 2014 at 4:31 PM, Christopher W Ryan
<cryan at binghamton.edu> wrote:
> I'm running R-3.0.3 on Windows XP Professional on an institutional PC.
> (My freedom to update to a more recent version of R is limited,
> although I might be able to prevail upon the powers that be, if that
> would solve the problem.)
>
> I installed spatstat via install.packages() and received version 1.37-0.
>
> Here is some code:
>
> library(spatstat)
> data(redwood)
> plot(redwoods)  # works OK
> plot(Kest(redwood))  # works OK
> plot(density(redwood))  # produces an "empty" plot as described above
>
> Any suggestions? What am I missing?
>
> Thanks.
>
> --Chris Ryan


From 538280 at gmail.com  Tue Jun 17 18:00:44 2014
From: 538280 at gmail.com (Greg Snow)
Date: Tue, 17 Jun 2014 10:00:44 -0600
Subject: [R] Add points to subplots
In-Reply-To: <CAFnz2-9Ljo6y2LM_BUvGosYtyt2yZ0Bjx9K93PifNySgC6djKA@mail.gmail.com>
References: <CAFnz2-9Ljo6y2LM_BUvGosYtyt2yZ0Bjx9K93PifNySgC6djKA@mail.gmail.com>
Message-ID: <CAFEqCdwvn=KnFmfPy3DyVtO3FQYHyKAXoRD6qdyVwDNyRrYQLg@mail.gmail.com>

I am not familiar with the pamr.plotcv function, but in general if it
uses par(mfrow=c(2,1)) to set up for the multiple plots then your
problem with going back to the first plot is that you have lost the
other information (such as user coordinates) needed to add to the 1st
plot.  You can see that with the following base graphics commands:

par(mfrow=c(2,1))
plot(runif(25),rnorm(25))
tmp <- par(no.readonly=TRUE)
hist(rnorm(1000))

par(mfg=c(1,1))
abline(h=0, col='red')

The horizontal line is at what would be 0 in the lower plot, not the
upper.  Since I saved the graphics parameters I can do the correct
thing with a command like:

par(mfg=c(1,1), plt=tmp$plt, usr=tmp$usr)
abline(h=0, col='blue')

You can see the new line is in the correct place.

Looking at the help for pamr.plotcv it does not look like it has any
nice built-in ways to save the plotting parameters (some functions
would let you plot just the top, edit, then plot just the bottom).
Bot there is a hook to the plot.new function that can let us work
around this.  Try the following:

mypars <- list()
updatepars <- function() {
n <- length( .GlobalEnv$mypars )
.GlobalEnv$mypars[[ n + 1 ]] <- par(no.readonly=TRUE)
}
setHook('before.plot.new', updatepars)

par(mfrow=c(2,1))
plot(runif(25),rnorm(25))
hist(rnorm(1000))

setHook('before.plot.new',NULL, 'replace' ) ## clean up

par( mfg=c(1,1), plt=mypars[[2]]$plt, usr=mypars[[2]]$usr )
abline( h=0, col='blue' )


This creates a global variable "mypars" that is an empty list (we
should really figure out a way without using the global, but my
current thoughts would make this much more complicated, any
suggestions are welcome).  Then it creates a small function that will
add the current results of 'par' to that list.  Then this function is
set as a hook to be run before 'plot.new' so that any new plot will
first save the previous parameter settings.  Now we run the plotting
commands and use the parameters that were saved into 'mypars'.  I
chose to save all the parameters from every old plot in case more than
what is shown is needed, this could be used to go back 3 or 4 plots if
more than just 2 are plotted.

Try this with pamr.plotcv to see if it works (you may need to set some
additional parameters depending on what all pamr.plotcv does).


Whether this is the easy solution or not can be debated.  Hope it helps,




On Thu, Jun 12, 2014 at 9:06 AM, Luca Cerone <luca.cerone at gmail.com> wrote:
> Dear all,
> I am running some analysis using the pamr package (available on CRAN).
>
> One of the plots I produce is made using the function "pamr.plotcv".
> This displays two plots in the same figure (using par(mfrow=c(2,1)).
>
> When the figure is created, I would like to be able to add some points
> and lines, to the top plot.
>
> After producing the plot with pamr.cvplot, I have tried to add a line
> doing something like:
>
> par(mfg=c(1,1))
> lines(c(3,3), c(0,1), col = "blue", lty = 3)
>
> However this doesn't work and the line is shown in the bottom plot.
> How can I add points and lines to the top plot?
>
> Thanks a lot in advance for the help,
>
> Cheers,
> Luca
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com


From rh at knut-krueger.de  Tue Jun 17 18:20:03 2014
From: rh at knut-krueger.de (Knut Krueger)
Date: Tue, 17 Jun 2014 18:20:03 +0200
Subject: [R] writeWorksheet(....,rownames..) warning
Message-ID: <53A06AB3.3080500@knut-krueger.de>

Any Idea to prevent the warning message?

library(XLConnect)
wb <- loadWorkbook("writeWorksheet.xlsx", create = TRUE)
createSheet(wb, name = "CO2")
writeWorksheet(wb, CO2, sheet = "CO2",rownames=c("",1:84))
saveWorkbook(wb)

Warning message:
In names(res)[1] <- colname :
   number of items to replace is not a multiple of replacement length


From jvadams at usgs.gov  Tue Jun 17 20:02:03 2014
From: jvadams at usgs.gov (Adams, Jean)
Date: Tue, 17 Jun 2014 13:02:03 -0500
Subject: [R] Power graph for two Proportion
In-Reply-To: <1402933486.4234.YahooMailNeo@web142606.mail.bf1.yahoo.com>
References: <1402933486.4234.YahooMailNeo@web142606.mail.bf1.yahoo.com>
Message-ID: <CAN5YmCF-NbO9X8DVMBa1McNhwxYEX7kkyYG_Bc4RF0xzDxDt_w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140617/b7bf7edb/attachment.pl>

From davies.trevor at gmail.com  Tue Jun 17 20:10:44 2014
From: davies.trevor at gmail.com (Trevor Davies)
Date: Tue, 17 Jun 2014 11:10:44 -0700
Subject: [R] mgcv: BAM convergence conflicting messages
Message-ID: <CAJhyqViTvvwHPkDMzm04p6nRZg1uz3KMTZoayMubG9qY1PCV=A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140617/ae7698f5/attachment.pl>

From jvadams at usgs.gov  Tue Jun 17 20:36:37 2014
From: jvadams at usgs.gov (Adams, Jean)
Date: Tue, 17 Jun 2014 13:36:37 -0500
Subject: [R] ASA Conference on Statistical Practice
Message-ID: <CAN5YmCGOu57diFoBbG20Pvk3RWPhxTuLWyL7mmNuxdsTzoxTiQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140617/d2ea5fb7/attachment.pl>

From dwinsemius at comcast.net  Tue Jun 17 21:43:32 2014
From: dwinsemius at comcast.net (David Winsemius)
Date: Tue, 17 Jun 2014 12:43:32 -0700
Subject: [R] writeWorksheet(....,rownames..) warning
In-Reply-To: <53A06AB3.3080500@knut-krueger.de>
References: <53A06AB3.3080500@knut-krueger.de>
Message-ID: <86682DFE-900E-4330-95D2-66FCAF9714D7@comcast.net>


On Jun 17, 2014, at 9:20 AM, Knut Krueger wrote:

> Any Idea to prevent the warning message?
> 
> library(XLConnect)
> wb <- loadWorkbook("writeWorksheet.xlsx", create = TRUE)
> createSheet(wb, name = "CO2")
> writeWorksheet(wb, CO2, sheet = "CO2",rownames=c("",1:84))
> saveWorkbook(wb)
> 
> Warning message:
> In names(res)[1] <- colname :
>  number of items to replace is not a multiple of replacement length

?suppressWarnings

-- 

David Winsemius
Alameda, CA, USA


From dwinsemius at comcast.net  Tue Jun 17 21:55:07 2014
From: dwinsemius at comcast.net (David Winsemius)
Date: Tue, 17 Jun 2014 12:55:07 -0700
Subject: [R] to extract extreme data for specified period
In-Reply-To: <CAMgoKB+YRNVoqhD3T8isb_sk9f81gPigEuiArDMkHvMLfA8YYw@mail.gmail.com>
References: <CAMgoKB+YRNVoqhD3T8isb_sk9f81gPigEuiArDMkHvMLfA8YYw@mail.gmail.com>
Message-ID: <B7CB8D23-0FB5-4011-95B3-2E1DF7A0981D@comcast.net>


On Jun 16, 2014, at 11:51 PM, dila radi wrote:

> Dear R users,
> 
> I used this codes to find the 1-day annual rainfall maximum
> 
> bmFort <- blockmaxxer(Fort, blocks = Fort$year, which="Prec");bmFort
> 
> and the output is given below:
> 
> structure(list(obs = c(119, 507, 994, 1398, 1583, 1917), tobs = c(119,
> 142, 264, 303, 123, 91), month = c(4, 5, 9, 10, 5, 4), day = c(29,
> 22, 21, 30, 2, 1), year = c(1900, 1901, 1902, 1903, 1904, 1905
> ), Prec = c(2.39, 2.32, 4.34, 0.85, 3.02, 1.74)), .Names = c("obs",
> "tobs", "month", "day", "year", "Prec"), row.names = c(119L,
> 507L, 994L, 1398L, 1583L, 1917L), class = "data.frame")
> 
> however, I would also like to find the 7-days annual rainfall maximum by
> months within a year. I tried changing ' Fort$year' to ' Fort$day' and I
> got the following:
> 
> structure(list(obs = c(28610, 1583, 14125, 18052, 18905, 32937
> ), tobs = c(121, 123, 246, 155, 278, 65), month = c(5, 5, 9,
> 6, 10, 3), day = c(1, 2, 3, 4, 5, 6), year = c(1978, 1904, 1938,
> 1949, 1951, 1990), Prec = c(1.85, 3.02, 3.54, 3.54, 1.67, 3.48
> )), .Names = c("obs", "tobs", "month", "day", "year", "Prec"), row.names =
> c(28610L,
> 1583L, 14125L, 18052L, 18905L, 32937L), class = "data.frame")
> 
> what I want is the 7-days maximum within a year that is maximum value for
> eg. from 1/1/1990 to 7/1/1990 then another maximum is 8/1/1990 to 14/1/1990
> and so on.
> 
> this is some sample data:
> structure(list(obs = c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12,
> 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28,
> 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40), tobs = c(1,
> 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19,
> 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,
> 36, 37, 38, 39, 40), month = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> 2, 2, 2, 2, 2, 2, 2, 2, 2), day = c(1, 2, 3, 4, 5, 6, 7, 8, 9,
> 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25,
> 26, 27, 28, 29, 30, 31, 1, 2, 3, 4, 5, 6, 7, 8, 9), year = c(1900,
> 1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900,
> 1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900,
> 1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900,
> 1900, 1900, 1900, 1900, 1900, 1900), Prec = c(0, 0, 0, 0, 0,
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.1, 0.03, 0, 0, 0, 0, 0, 0, 0, 0,
> 0, 0, 0, 0.08, 0.04, 0, 0, 0, 0, 0, 0, 0, 0, 0.02, 0, 0)), .Names =
> c("obs",
> "tobs", "month", "day", "year", "Prec"), row.names = c(NA, 40L
> ), class = "data.frame")
> 
> Thank you very much for any help given.

There is a `cut` method for datetime objects.  You don't yet seem to have your data in a Date-classed column, but after you did so, it would be fairly easy to use that function. It is only set up to start weeks with Sunday or Monday boundaries. Your problem specification seems difficult to implement since you want weekly maxima within months. Why would that no be just monthly maxima?

?cut.POSIXt

> cut(as.Date("2000/01/01")+0:60, breaks="week")
 [1] 1999-12-27 1999-12-27 2000-01-03 2000-01-03 2000-01-03 2000-01-03 2000-01-03 2000-01-03
 [9] 2000-01-03 2000-01-10 2000-01-10 2000-01-10 2000-01-10 2000-01-10 2000-01-10 2000-01-10
[17] 2000-01-17 2000-01-17 2000-01-17 2000-01-17 2000-01-17 2000-01-17 2000-01-17 2000-01-24
[25] 2000-01-24 2000-01-24 2000-01-24 2000-01-24 2000-01-24 2000-01-24 2000-01-31 2000-01-31
[33] 2000-01-31 2000-01-31 2000-01-31 2000-01-31 2000-01-31 2000-02-07 2000-02-07 2000-02-07
[41] 2000-02-07 2000-02-07 2000-02-07 2000-02-07 2000-02-14 2000-02-14 2000-02-14 2000-02-14
[49] 2000-02-14 2000-02-14 2000-02-14 2000-02-21 2000-02-21 2000-02-21 2000-02-21 2000-02-21
[57] 2000-02-21 2000-02-21 2000-02-28 2000-02-28 2000-02-28
10 Levels: 1999-12-27 2000-01-03 2000-01-10 2000-01-17 2000-01-24 2000-01-31 ... 2000-02-28


> 
> Dila
> 
> 	[[alternative HTML version deleted]]

This is a plain text mailing list.
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

David Winsemius
Alameda, CA, USA


From stbarningham at gmail.com  Tue Jun 17 14:00:44 2014
From: stbarningham at gmail.com (Thomas Barningham)
Date: Tue, 17 Jun 2014 13:00:44 +0100
Subject: [R] Writing "monthly" .txt or .csv files from a long time series
Message-ID: <CAM5qaWdeL7ati659uw_KOn59_QBTn8DaBWLjVecjYmT3kPC4Sg@mail.gmail.com>

Dear R users,

I have a .txt file of time series data from the middle of 1999 through
to the end of 2012. There are two columns in the file, the first is a
decimal date, the second is an atmospheric tracer value and looks like
this:

Date  APO
1999.47945560  -168.48
1999.47948410  -158.08
1999.47951270  -163.79
1999.47956990  -164.38
1999.47959850  -173.94
1999.47962700  -161.92
1999.47965560  -154.36
1999.47968420  -147.55
1999.47971280  -157.06
1999.47974140  -151.21
1999.47976990  -141.63
1999.47979850  -147.97

What I'd now like to do is write new .txt (or .csv) files based on the
month of the year so that I have separate text files for Jan, Feb, Mar
etc for each year 1999, 2000, 2001 etc. using either the write.table
or write.csv function. Is there an easy way to do this in R?

Google key word searches have not been fruitful and the only other way
I can see to do this is "manually" in excel, which would take a long
time. I'm hoping there's a neat bit of code to do this.

Many thanks
Thomas

-- 
Thomas Barningham
Centre for Ocean and Atmospheric Sciences
School of Environmental Sciences
University of East Anglia
Norwich Research Park
Norwich
NR4 7TJ


From suganthinycumarasamy at gmail.com  Tue Jun 17 16:30:17 2014
From: suganthinycumarasamy at gmail.com (suganthiny cumarasamy)
Date: Tue, 17 Jun 2014 10:30:17 -0400
Subject: [R] Power graph for two Proportion
Message-ID: <CAMB1ux52gtwQwObq7aA=Rh5EOphhsERQi4R1=oDGFHBikjr7UA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140617/f4c94f9e/attachment.pl>

From plalehzari at platinumlp.com  Tue Jun 17 22:30:57 2014
From: plalehzari at platinumlp.com (Pooya Lalehzari)
Date: Tue, 17 Jun 2014 20:30:57 +0000
Subject: [R] apply switch to a table
Message-ID: <92FD11F467D9CA41A8AEA01FE4D76DEB268C5C11@EX02.platinum.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140617/66d9104e/attachment.pl>

From dwinsemius at comcast.net  Tue Jun 17 22:35:16 2014
From: dwinsemius at comcast.net (David Winsemius)
Date: Tue, 17 Jun 2014 13:35:16 -0700
Subject: [R] Writing "monthly" .txt or .csv files from a long time series
In-Reply-To: <CAM5qaWdeL7ati659uw_KOn59_QBTn8DaBWLjVecjYmT3kPC4Sg@mail.gmail.com>
References: <CAM5qaWdeL7ati659uw_KOn59_QBTn8DaBWLjVecjYmT3kPC4Sg@mail.gmail.com>
Message-ID: <FCFDDA71-0F5D-4EF5-8BFA-C2A0F67A099A@comcast.net>


On Jun 17, 2014, at 5:00 AM, Thomas Barningham wrote:

> Dear R users,
> 
> I have a .txt file of time series data from the middle of 1999 through
> to the end of 2012. There are two columns in the file, the first is a
> decimal date, the second is an atmospheric tracer value and looks like
> this:
> 
> Date  APO
> 1999.47945560  -168.48
> 1999.47948410  -158.08
> 1999.47951270  -163.79
> 1999.47956990  -164.38
> 1999.47959850  -173.94
> 1999.47962700  -161.92
> 1999.47965560  -154.36
> 1999.47968420  -147.55
> 1999.47971280  -157.06
> 1999.47974140  -151.21
> 1999.47976990  -141.63
> 1999.47979850  -147.97
> 
> What I'd now like to do is write new .txt (or .csv) files based on the
> month of the year so that I have separate text files for Jan, Feb, Mar
> etc for each year 1999, 2000, 2001 etc. using either the write.table
> or write.csv function. Is there an easy way to do this in R?

There is a breaks argument to cut.POSIXt function that will accept "month" as an argument.
 With a suitable offset that 'Date' column looks like it would be suitable for `as.Date.numeric`.

Try something along these lines:

dat$dt <- as.Date(dat$Date)
dat$mon <- cut(dat$dt, breaks="month")
lapply( split(dat, dat$mon), function(dts) 
             write.csv( dts, file=as.character(dts$mon[1]) ))

> 
> Google key word searches have not been fruitful and the only other way
> I can see to do this is "manually" in excel, which would take a long
> time. I'm hoping there's a neat bit of code to do this.

The above seemed acceptably "neat" to me, although it remains only modestly tested.

-- 

David Winsemius
Alameda, CA, USA


From berryboessenkool at hotmail.com  Tue Jun 17 22:42:49 2014
From: berryboessenkool at hotmail.com (Berry Boessenkool)
Date: Tue, 17 Jun 2014 22:42:49 +0200
Subject: [R] LA useR ride
Message-ID: <DUB123-W40E7BC8999EB26F331F9D8D5110@phx.gbl>


Hi,

Is anyone travelling north after the useR! conference in Los Angeles and could give me a ride?
I need to get to Medford, which is located along I5 in southern Oregon.

Thanks ahead,
Berry
PS: sorry to bother the help list, but I could not find anything specific for useR.

 		 	   		  

From jdnewmil at dcn.davis.CA.us  Tue Jun 17 23:03:51 2014
From: jdnewmil at dcn.davis.CA.us (Jeff Newmiller)
Date: Tue, 17 Jun 2014 14:03:51 -0700
Subject: [R] apply switch to a table
In-Reply-To: <92FD11F467D9CA41A8AEA01FE4D76DEB268C5C11@EX02.platinum.com>
References: <92FD11F467D9CA41A8AEA01FE4D76DEB268C5C11@EX02.platinum.com>
Message-ID: <4a6c5e1f-e65b-4871-839f-fb6e83ff306f@email.android.com>

That would depend on the actual type of object that your Data variable is. Use the dput function so we can get your example days in a reproducible way [1].

[1] http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example

---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                      Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
--------------------------------------------------------------------------- 
Sent from my phone. Please excuse my brevity.

On June 17, 2014 1:30:57 PM PDT, Pooya Lalehzari <plalehzari at platinumlp.com> wrote:
>Hello,
>
>I have a simple Data table like below:
>> Data
>  V1 V2
>1  1  3
>2  5  4
>
>And I like to apply a switch to all the values of the table.
>Exp for one value:
>switch(as.character(Data[2,1]),
>       "1"="One",
>       "2"="Two",
>       "3"="Three",
>       "4"="Four",
>       "5"="Five"
>)
>
>What would be the best way to do this?
>
>Thank you.
>
>Pooya
>
>
>
>
>
>THIS E-MAIL IS FOR THE SOLE USE OF THE INTENDED RECIPIENT(S) AND MAY
>CONTAIN
>CONFIDENTIAL AND PRIVILEGED INFORMATION.ANY UNAUTHORIZED REVIEW, USE,
>DISCLOSURE
>OR DISTRIBUTION IS PROHIBITED. IF YOU ARE NOT THE INTENDED RECIPIENT,
>PLEASE
>CONTACT THE SENDER BY REPLY E-MAIL AND DESTROY ALL COPIES OF THE
>ORIGINAL E-MAIL.
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From jholtman at gmail.com  Tue Jun 17 23:11:14 2014
From: jholtman at gmail.com (jim holtman)
Date: Tue, 17 Jun 2014 17:11:14 -0400
Subject: [R] writeWorksheet(....,rownames..) warning
In-Reply-To: <53A06AB3.3080500@knut-krueger.de>
References: <53A06AB3.3080500@knut-krueger.de>
Message-ID: <CAAxdm-7s0ahqubUBnX03oTv56d+_Undi0AatKNA-hKYvAOzDMw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140617/196755f9/attachment.pl>

From r.turner at auckland.ac.nz  Tue Jun 17 23:23:17 2014
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Wed, 18 Jun 2014 09:23:17 +1200
Subject: [R] empty density plot for point pattern in spatstat
In-Reply-To: <CAM+rpYmz8zWkZvpNX6--a+F6vu6p2JkjzzTeoWta+PZ1oKh6jA@mail.gmail.com>
References: <CAM+rpYnjg_SGnyGrVcwuakX1xmXd7ysy1gZntdn7m2zD=kqong@mail.gmail.com>
	<CAM+rpYmz8zWkZvpNX6--a+F6vu6p2JkjzzTeoWta+PZ1oKh6jA@mail.gmail.com>
Message-ID: <53A0B1C5.2080008@auckland.ac.nz>

On 18/06/14 03:49, Christopher W Ryan wrote:
> I upgraded to version 3.1.0 of R, still on Win XP, but that did not
> solve the problem:
>
> library(spatstat)
> data(redwood)
> str(redwood)
> plot(redwood)  # works OK
> plot(Kest(redwood))  # works OK
> plot(density(redwood))  # produces an "empty" plot
>                                         # with just the figure border
>                                         # and a thin vertical box for
> the color ramp
>                                         # but no color ramp in it
>
> Any other ideas? I'd be much obliged.

I have had an inquiry of this nature previously and sad to say was 
completely unable to find a solution.  I made numerous suggestions to 
the inquirer, e.g.:

*looking for a plot.im() function masking the "real"
plot.im() function from spatstat

* cleaning out the global environment
(.RData) in case there were some "artefacts" hanging around that had an 
impact on plot.im()

* completely *removing* .RData and starting again,...

Nothing worked.

It is very difficult to diagnose a problem like this remotely.  If you 
could find an R guru who was able to come and sit with you at your 
computer it is ***just possible*** that they could track down what is 
going wrong.

However it seems to me that the problem is due to some sort of 
recalcitrance of the Windoze system and is thus probably insoluble.

I am cc-ing this to the person who made the previous inquiry.  Pablo, 
have there been any further developments since we last communicated 
about this problem?

cheers,

Rolf Turner

P. S. BTW Chris:  Does plot.im() screw up with other images?  E.g. what 
happens if you do

with(bei.extra,plot(elev))

???

R. T.


From dcarlson at tamu.edu  Tue Jun 17 23:46:40 2014
From: dcarlson at tamu.edu (David L Carlson)
Date: Tue, 17 Jun 2014 21:46:40 +0000
Subject: [R] apply switch to a table
In-Reply-To: <92FD11F467D9CA41A8AEA01FE4D76DEB268C5C11@EX02.platinum.com>
References: <92FD11F467D9CA41A8AEA01FE4D76DEB268C5C11@EX02.platinum.com>
Message-ID: <53BF8FB63FAF2E4A9455EF1EE94DA726F77BD0@mb02.ads.tamu.edu>

If you are not determined to apply switch(), you can apply apply():

Data <- data.frame(V1=c(1, 5), V2=c(3, 4))
Data
##   V1 V2
## 1  1  3
## 2  5  4
label <- data.frame(freq=c(1:5), lbl=c("One", "Two", "Three", "Four", "Five"))
label
##  freq   lbl
## 1    1   One
## 2    2   Two
## 3    3 Three
## 4    4  Four
## 5    5  Five
Data2 <- as.data.frame(apply(Data, 2, function(x) label[x, 2]))
Data2
##      V1     V2     
## [1,] "One"  "Three"
## [2,] "Five" "Four"

This will work if Data is a data.frame, a matrix, or a table.

David Carlson

-----Original Message-----
From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On Behalf Of Pooya Lalehzari
Sent: Tuesday, June 17, 2014 3:31 PM
To: R help
Subject: [R] apply switch to a table

Hello,

I have a simple Data table like below:
> Data
  V1 V2
1  1  3
2  5  4

And I like to apply a switch to all the values of the table.
Exp for one value:
switch(as.character(Data[2,1]),
       "1"="One",
       "2"="Two",
       "3"="Three",
       "4"="Four",
       "5"="Five"
)

What would be the best way to do this?

Thank you.

Pooya





THIS E-MAIL IS FOR THE SOLE USE OF THE INTENDED RECIPIENT(S) AND MAY CONTAIN CONFIDENTIAL AND PRIVILEGED INFORMATION.ANY UNAUTHORIZED REVIEW, USE, DISCLOSURE OR DISTRIBUTION IS PROHIBITED. IF YOU ARE NOT THE INTENDED RECIPIENT, PLEASE CONTACT THE SENDER BY REPLY E-MAIL AND DESTROY ALL COPIES OF THE ORIGINAL E-MAIL.
	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From jim at bitwrit.com.au  Tue Jun 17 23:59:22 2014
From: jim at bitwrit.com.au (Jim Lemon)
Date: Wed, 18 Jun 2014 07:59:22 +1000
Subject: [R] Power graph for two Proportion
In-Reply-To: <CAMB1ux52gtwQwObq7aA=Rh5EOphhsERQi4R1=oDGFHBikjr7UA@mail.gmail.com>
References: <CAMB1ux52gtwQwObq7aA=Rh5EOphhsERQi4R1=oDGFHBikjr7UA@mail.gmail.com>
Message-ID: <1551648.4rj4HAQndo@localhost.localdomain>

On Tue, 17 Jun 2014 10:30:17 AM suganthiny cumarasamy wrote:
> Dear R mailing listers,
> 
> I am try to find the different power calculation for
> p1=0.2 and p2=0.4 , with significant level=0.05  (one sided test)
> I would like to  have a graph   y -axis as a power and
> x-axis as a sample size .
> 
> I run this command for different value of power. and get the n and 
power
> pwr.2p.test(h=ES.h(0.4,0.2), power = 0.87,
> sig.level=0.05,alternative="greater")
> 
>  Is there is any easy way i can do power graph using the two proportion 
in
> R.
> 
Hi Suga,
I'm not familiar with pwr.2p.test, but if it takes a vector of power values, 
you could do something like this:

# get a vector of sample sizes for different values of power
# it probably won't be this straightforward
powers<-seq(0.5,0.95,by=0.05)
sample_sizes<-pwr.2p.test(h=ES.h(0.4,0.2),power=powers,
 sig.level=0.05,alternative="greater")
plot(sample_sizes,powers)

Jim


From cleberchaves at gmail.com  Wed Jun 18 01:58:12 2014
From: cleberchaves at gmail.com (Cleber Chaves)
Date: Tue, 17 Jun 2014 20:58:12 -0300
Subject: [R] Pairwise Tukey test with letter in descending order
Message-ID: <CAF-5dnsQxT1UeJ9s=DRi_5ZPYJp64hoDO_19pKEn5unV=_aaDg@mail.gmail.com>

Um texto embutido e sem conjunto de caracteres especificado foi limpo...
Nome: n?o dispon?vel
Url: <https://stat.ethz.ch/pipermail/r-help/attachments/20140617/0577fd82/attachment.pl>

From jim at bitwrit.com.au  Wed Jun 18 02:22:45 2014
From: jim at bitwrit.com.au (Jim Lemon)
Date: Wed, 18 Jun 2014 10:22:45 +1000
Subject: [R] Pairwise Tukey test with letter in descending order
In-Reply-To: <CAF-5dnsQxT1UeJ9s=DRi_5ZPYJp64hoDO_19pKEn5unV=_aaDg@mail.gmail.com>
References: <CAF-5dnsQxT1UeJ9s=DRi_5ZPYJp64hoDO_19pKEn5unV=_aaDg@mail.gmail.com>
Message-ID: <2906192.6Ob95qt3K8@localhost.localdomain>

On Tue, 17 Jun 2014 08:58:12 PM Cleber Chaves wrote:
> Dear all,
> has a long time that I unsuccessfully try to obtain letters of each 
equal
> means in a Tukey test of a GLM object, in a descending order. Could
> someone, please, help me?
> 
> I try this:
> 
> m1 <- glm(comp~pop)
> anova(m1,test="F")
> lsmeans(m1, cld~pop, adjust='tukey')
> 
> But the letters I obtain are not in descendig order, and I dispend a 
lot of
> time to organize it when the outcome have many letters (e.c. A to F
> letters).
> 
Hi Cleber,
You may be able to do something like the following that is from the 
example for TukeyHSD:

summary(fm1 <- aov(breaks ~ wool + tension, data = warpbreaks))
...
TukeyHSD(fm1, "tension", ordered = TRUE)
  Tukey multiple comparisons of means
    95% family-wise confidence level
    factor levels have been ordered

Fit: aov(formula = breaks ~ wool + tension, data = warpbreaks)

$tension
         diff        lwr      upr     p adj
M-H  4.722222 -4.6311985 14.07564 0.4474210
L-H 14.722222  5.3688015 24.07564 0.0011218
L-M 10.000000  0.6465793 19.35342 0.0336262

# assign this to an object
thsd<-TukeyHSD(fm1, "tension", ordered = TRUE)

# see if there is a way to reorder the comparisons
str(thsd)
List of 1
 $ tension: num [1:3, 1:4] 4.72 14.72 10 -4.63 5.37 ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : chr [1:3] "M-H" "L-H" "L-M"
  .. ..$ : chr [1:4] "diff" "lwr" "upr" "p adj"
 - attr(*, "class")= chr [1:2] "TukeyHSD" "multicomp"
 - attr(*, "orig.call")= language aov(formula = breaks ~ wool + 
tension, data = warpbreaks)
 - attr(*, "conf.level")= num 0.95
 - attr(*, "ordered")= logi TRUE

# reorder the matrix of comparisons
thsd$tension<-thsd$tension[order(rownames(thsd$tension)),]

thsd
  Tukey multiple comparisons of means
    95% family-wise confidence level
    factor levels have been ordered

Fit: aov(formula = breaks ~ wool + tension, data = warpbreaks)

$tension
         diff        lwr      upr     p adj
L-H 14.722222  5.3688015 24.07564 0.0011218
L-M 10.000000  0.6465793 19.35342 0.0336262
M-H  4.722222 -4.6311985 14.07564 0.4474210

Jim


From jwd at surewest.net  Wed Jun 18 03:09:31 2014
From: jwd at surewest.net (jwd)
Date: Tue, 17 Jun 2014 18:09:31 -0700
Subject: [R] C: drive memory full
In-Reply-To: <1403009334347.67169@alumni.ucl.ac.uk>
References: <1402991370388.32533@alumni.ucl.ac.uk>
	<53A00C51.7040503@stats.ox.ac.uk>
	<1403001581203.14992@alumni.ucl.ac.uk>
	<7e9aa8e0926d443db608b57b99d4dfd9@AM3PR05MB545.eurprd05.prod.outlook.com>
	<1403009334347.67169@alumni.ucl.ac.uk>
Message-ID: <20140617180931.4f3e06a6@draco>

On Tue, 17 Jun 2014 12:48:54 +0000
"Hiyoshi, Ayako" <ayako.hiyoshi.09 at alumni.ucl.ac.uk> wrote:

> Dear Martyn and Professor Ripley,
> 
> Thank you so much for your help. I used Window's large file search
> (it was useful! thank you), but there is no big files detected in C:
> drive . Perhaps I will have to reinstall Windows..
> 
The problem may not be R at all, but rather Windows.  How large is your
drive, not RAM but the actual drive?

If you can, examine your drive to see if there are either fragmentation
problems or hidden files taking up excess space.  Look at the
drive properties for C:\ and run disk clean-up if possible.  Another
problem, MS may have fixed this at some point - I don't run Win 8, is
that if your deleted files are not removed, you can run out of space.
Usually, the space occupied by a file marked for deletion should
be scavenged as Windows needs space, but sometimes that may not happen,
especially with a very full drive. So, if there are files in the
"Wastebasket" remove them completely.  Another space-use that can grow
to excess is a print spool. Even Windows uses a print spool and that can
grow too large for the system to function efficiently.  

JWdougherty


From andreas at maunz.de  Wed Jun 18 09:10:32 2014
From: andreas at maunz.de (Andreas Maunz)
Date: Wed, 18 Jun 2014 09:10:32 +0200
Subject: [R] multcomp: Contrasts for Tukey
Message-ID: <CAJHOUEPYKGQr3pKUFfRMSuDaF7QEqyh-8gxgu=g2CH=upgnnUQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140618/5605d18c/attachment.pl>

From wht_crl at yahoo.com  Wed Jun 18 09:14:16 2014
From: wht_crl at yahoo.com (carol white)
Date: Wed, 18 Jun 2014 00:14:16 -0700
Subject: [R] title size problem
Message-ID: <1403075656.31058.YahooMailNeo@web121505.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140618/56334695/attachment.pl>

From yzhlinscau at gmail.com  Wed Jun 18 10:24:58 2014
From: yzhlinscau at gmail.com (yzh lin)
Date: Wed, 18 Jun 2014 16:24:58 +0800
Subject: [R] How to output name of object
Message-ID: <CACfGrH1y+A8UzNswt02YV0cRUF1g6hywUTL4M7ZCHmLyUAbPOg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140618/0093ce54/attachment.pl>

From tcmuigai at gmail.com  Wed Jun 18 10:50:36 2014
From: tcmuigai at gmail.com (Charles Thuo)
Date: Wed, 18 Jun 2014 11:50:36 +0300
Subject: [R] how to decompose a daily time series
Message-ID: <CAAJc=rN0sNLo1W6vQ2xeEdSKjOAD1t0gGu=ajmRuW1cTHJCNvQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140618/0bbab65b/attachment.pl>

From s.wood at bath.ac.uk  Wed Jun 18 11:03:31 2014
From: s.wood at bath.ac.uk (Simon Wood)
Date: Wed, 18 Jun 2014 10:03:31 +0100
Subject: [R] mgcv: I can't manually reconstruct a P-spline from a GAM's
 coefficients
In-Reply-To: <53A05358.2020100@chaotic-neutral.de>
References: <53A05358.2020100@chaotic-neutral.de>
Message-ID: <53A155E3.2090509@bath.ac.uk>

mgcv:gam automatically imposes sum-to-zero constraints on the smooths in 
a model (even if there is only one smooth). This is to avoid lack of 
identifiability with the intercept. The constraint removes one 
coefficient and shifts the curve...

best,
Simon

On 17/06/14 15:40, Alexander Engelhardt wrote:
> Hello R-helpers,
>
> I am working through Simon Wood's GAM book and want to specify my own
> knot locations (on even tens, i.e. 10, 20, 30, etc.). Then, I want to
> compute a GAM on that area, and given the coefficients, reconstruct the
> same P-spline that is drawn in plot(my_gam).
>
> I'm failing.
> Here is what I am doing. I think the two plot calls at the end should
> produce the same line, but they don't:
>
>
> bspline <- function(x,k,i,m=2){
>      ## "draws" one B-spline basis function
>      ## order of splines is m+1, i.e. m=2 means cubic splines of order 3
>      if(m==-1){
>          res <- as.numeric(x<k[i+1] & x>=k[i])
>      } else {
>          z0 <- (x-k[i]) / (k[i+m+1]-k[i])
>          z1 <- (k[i+m+2]-x)/(k[i+m+2]-k[i+1])
>          res <- z0*bspline(x,k,i,m-1) + z1*bspline(x,k,i+1,m-1)
>      }
>      res
> }
>
> construct_bspline <- function(x, knots, coefs, m){
>      ## Constructs a complete spline from a set of knots and coefficients
>      y <- rep(0, times=length(x))
>      for(i in seq(coefs)){
>          coef <- coefs[i]
>          y <- y + coefs[i] * bspline(x, knots, i, m)
>      }
>      y
> }
>
> span_knots <- function(start, end, h, m){
>      ## create knots of distance 'h' from 'start' to 'end',
>      ##  to use with B-splines of order m+1
>      first_knot <- start - start%%h - (m+1)*h
>      last_knot <- end-1 + (h - (end-1)%%h) + (m+1)*h
>
>      knots <- seq(first_knot, last_knot, by=h)
>      knots
> }
>
> ## create data:
> x <- 125:197
> y <- cos(sqrt(40*x)/3) + 3  # mean=3, s(0)=4
> plot(x,y)
>
> m <- 2  # use cubic splines of order m+1=3
>
> myknots <- span_knots(start=min(x), end=max(x), h=10, m=m)
>
> ## Why do I have to set 'k' to length(myknots)-m-2 here? According to
> the book, it should be length(myknots)-m-1.
> my_gam <- gam(y~s(x, bs="ps", m=m, k=length(myknots)-m-2),
> knots=list(x=myknots))
>
> ## Here, I construct my own spline with the coefficients of the GAM,
> except coef()[1] which is the intercept
> spline_y <- construct_bspline(x, my_gam$smooth[[1]]$knots,
> coef(my_gam)[-1], mm)
>
> plot(my_gam)
> lines(x,spline_y)  # why is this different? It seems shifted on the x-
> and y-axis
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


-- 
Simon Wood, Mathematical Science, University of Bath BA2 7AY UK
+44 (0)1225 386603               http://people.bath.ac.uk/sw283


From s.wood at bath.ac.uk  Wed Jun 18 11:07:22 2014
From: s.wood at bath.ac.uk (Simon Wood)
Date: Wed, 18 Jun 2014 10:07:22 +0100
Subject: [R] mgcv: BAM convergence conflicting messages
In-Reply-To: <CAJhyqViTvvwHPkDMzm04p6nRZg1uz3KMTZoayMubG9qY1PCV=A@mail.gmail.com>
References: <CAJhyqViTvvwHPkDMzm04p6nRZg1uz3KMTZoayMubG9qY1PCV=A@mail.gmail.com>
Message-ID: <53A156CA.1030909@bath.ac.uk>

I think it didn't converge. The warning message is for the whole fitting 
iteration, whereas mod07.3.BASE.bam5.1$converged indicates whether 
smoothing parameter selection converged at the final step of the iteration.

best,
Simon

On 17/06/14 19:10, Trevor Davies wrote:
> I'm running some spatial GAMs and am using the bam call (negbin family) and
> am getting conflicting information on whether the model is converging or
> not.  When the model completes its run, I get a warning message that the
> model did not converge.  When I look at the object itself, I'm told that it
> did.  See below.
>
> Warning message:
> In bgam.fit(G, mf, chunk.size, gp, scale, gamma, method = method,  :
>    algorithm did not converge
>
>> mod07.3.BASE.bam5.1$converged
> [1] TRUE
>
> Am I missing something?
> Thank you,
> Trevor
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
Simon Wood, Mathematical Science, University of Bath BA2 7AY UK
+44 (0)1225 386603               http://people.bath.ac.uk/sw283


From bhh at xs4all.nl  Wed Jun 18 11:08:34 2014
From: bhh at xs4all.nl (Berend Hasselman)
Date: Wed, 18 Jun 2014 11:08:34 +0200
Subject: [R] how to decompose a daily time series
In-Reply-To: <CAAJc=rN0sNLo1W6vQ2xeEdSKjOAD1t0gGu=ajmRuW1cTHJCNvQ@mail.gmail.com>
References: <CAAJc=rN0sNLo1W6vQ2xeEdSKjOAD1t0gGu=ajmRuW1cTHJCNvQ@mail.gmail.com>
Message-ID: <0F218FA3-B421-4411-91BC-A7B8018575B0@xs4all.nl>


On 18-06-2014, at 10:50, Charles Thuo <tcmuigai at gmail.com> wrote:

> # I have a daily  series of  count of transactions data i want to decompose
> and forecast.
> d<-c(723, 772, 967, 897, 621, 684, 722, 764, 856, 819,
> 678, 708, 698, 832, 928, 834, 649, 676, 635, 729, 778, 817, 616,
> 598, 605, 851, 822, 791, 678, 703, 716, 834, 872, 831, 641, 610,
> 699, 840, 901, 789, 620, 744, 644, 816, 805, 726, 565, 613, 733,
> 802, 744, 791, 624, 671, 729, 756, 828, 782, 545, 640, 691, 786,
> 818, 795, 622, 661, 644, 748, 805, 793, 615, 597, 584, 634, 655,
> 497, 330, 789, 668, 659, 779, 678, 524, 623, 592, 710, 703, 660,
> 586, 721, 1509, 925, 962, 690, 610, 772, 752, 609, 572, 926,
> 843, 737, 672, 617, 535, 611, 629, 781, 617, 534, 527, 552, 723,
> 777, 640, 592, 540, 584, 756, 801, 676, 618, 509, 530, 746, 739)
> 
> # I convert it into a time series as follows'
> 
> d.ts<-ts(d,start=c(2014,as.POSIXlt("2014-01-02")$yday+1),frequency=365)
> 
> decompose(d.ts)
> Error in decompose(d.ts) : time series has no or less than 2 periods
> 

If you had done d.ts in R you would have seen that the result was not what you expected.

Search in Google for "R daily timeseries?
The second hit is http://stat.ethz.ch/R-manual/R-devel/library/stats/html/ts.html
which is the manual page for ts.

So in R issue a ?ts command.

Look in Details and you should see that frequency must be set to 7 in your case.


> # How do i fix the period issue if i want to fix the period as weekly to
> coincide with  6 days operation in a week where the data was extracted.
> 

That will have to be answered by someone else.

Berend

> Charles.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ripley at stats.ox.ac.uk  Wed Jun 18 11:20:35 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 18 Jun 2014 10:20:35 +0100
Subject: [R] title size problem
In-Reply-To: <1403075656.31058.YahooMailNeo@web121505.mail.ne1.yahoo.com>
References: <1403075656.31058.YahooMailNeo@web121505.mail.ne1.yahoo.com>
Message-ID: <53A159E3.1050404@stats.ox.ac.uk>

On 18/06/2014 08:14, carol white wrote:
> Hi,
> When I use any value greater than 2 for cex.main in title, I get
>
>
>   title("myTitle", cex.main= 5)
> Error in title("myTitle", cex.main = 5) :
>    X11 font -adobe-helvetica-%s-%s-*-*-%d-*-*-*-*-*-*-*, face 2 at size 60 could not be loaded
>
>
> How to fix it?

Install the appropriate fonts.

Given that you have ignored the request for 'at a minimum information' 
in the posting guide and not even told us what device you are using, we 
cannot help in more detail.

[Clearly this is a version of the X11() device, but there are two and 
how one of those does font selection varies between OS X and other 
Unix-alikes.  As a guess you are not using a cairographics-based device, 
and should be.  See capabilities("cairo").]

>
> Thanks
>
> Carol
>
> 	[[alternative HTML version deleted]]
>
>
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
PLEASE do!

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From josh.m.ulrich at gmail.com  Wed Jun 18 13:12:18 2014
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Wed, 18 Jun 2014 06:12:18 -0500
Subject: [R] Aggregating 15 minute xts sequence to hourly
In-Reply-To: <CABfqsR-4HS+ES28evstAyD9vAcrK6UGRwUs4+uddiFZYz5XRCQ@mail.gmail.com>
References: <CABfqsR_6FJXvCecMPoJRi=dtX1LGmt-seHxyvjBk=mSre9GgbA@mail.gmail.com>
	<CAPPM_gQJcYtntTTYASuT2PMULv57MO2MEq=70LLnf0egNKxyQw@mail.gmail.com>
	<CABfqsR-4HS+ES28evstAyD9vAcrK6UGRwUs4+uddiFZYz5XRCQ@mail.gmail.com>
Message-ID: <CAPPM_gQ5iLXsTr9RcRfsgaBoSyFPBQdrFe+Xn5mhGCmCiwA6Eg@mail.gmail.com>

On Mon, Jun 16, 2014 at 7:04 AM, Costas Vorlow <costas.vorlow at gmail.com> wrote:
> Dear Joshua,
>
> Thanks for your reply. As I see, the solution you suggest aligns the time
> stamps as required but leaves the aggregation results as is.
>
> Hence, the last quarter data of every hour are not aggregated still...
>
> Am I right or am I understanding something wrongly?
>
You still seem to think the "00" time is the end of the hour, but it's
not; it's the beginning.  The first 3 rows of 'observation' contain
data for the first hour (9 o'clock).  The fourth row is the beginning
of the second hour (10 o'clock).

> I tried to "move" ahead ends by one (ends<-ends+1) but this does not work
> either. It seems that if you change the endpoints, still aggregation happens
> every 45 minutes as you pointed out, although the ends variable points to
> the round hour time stamp...
>
ends <- endpoints(observation,'hours')+1

The above doesn't work because endpoints always includes the last
observation, which is now out of bounds.  You would need to adjust the
first and last 'ends' values.

ends <- endpoints(observation,'hours')+1
ends[1] <- 0
ends[length(ends)] <- nrow(observation)
ends <- unique(ends)
temp <- period.apply(observation, ends, sum)

Be very careful with the results in this 'temp' object though.  If you
merge it with another xts object, you will have a look-ahead bias
because you will know the aggregate for the time period before it has
occurred.

>
>
> __________________________________________________________________
> Costas Vorlow
> http://www.linkedin.com/in/costasvorlow
> http://www.vorlow.com
>
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
>
>
> On 16 June 2014 13:31, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
>>
>> On Mon, Jun 16, 2014 at 3:41 AM, Costas Vorlow <costas.vorlow at gmail.com>
>> wrote:
>> > Dear all,
>> >
>> > Why aggregation of 15 minute xts data happens on the 45th (3rd quarter)
>> > and
>> > not the exact hour close (i.e., 00) time?
>> >
>> The "00" time is the beginning of the hour, not the end.  E.g.,
>> 10:00:00 is the beginning of the 10-o'clock hour.
>>
>> > For example, temp below is an xts sequence with 15-minute frequency:
>> >
>> >> quarters <- ISOdatetime(2012,05,02,9,0,0) + seq(0:39)*15*60;
>> >> set.seed(42);
>> >> observation <- xts(1:40, order.by=as.POSIXct(quarters));
>> >> head(observation);
>> >                     [,1]
>> > 2012-05-02 09:15:00    1
>> > 2012-05-02 09:30:00    2
>> > 2012-05-02 09:45:00    3
>> > 2012-05-02 10:00:00    4
>> > 2012-05-02 10:15:00    5
>> > 2012-05-02 10:30:00    6
>> >
>> >> ends<-endpoints(observation,'hours');
>> >> temp<-period.apply(observation, ends,sum);
>> >> temp
>> >                     [,1]
>> > 2012-05-02 09:45:00    6
>> > 2012-05-02 10:45:00   22
>> > 2012-05-02 11:45:00   38
>> > 2012-05-02 12:45:00   54
>> > 2012-05-02 13:45:00   70
>> > 2012-05-02 14:45:00   86
>> > 2012-05-02 15:45:00  102
>> > 2012-05-02 16:45:00  118
>> > 2012-05-02 17:45:00  134
>> > 2012-05-02 18:45:00  150
>> > 2012-05-02 19:00:00   40
>> >>
>> >
>> > I get the sum of every quarter within the hour on the third quarter. How
>> > can I implicitly calculate the sum of the quarterly data on the hour's
>> > close (10:00, 11:00, 12:00 and so on) ?
>> >
>> Again, those are the beginnings of the hours.  endpoints() and
>> period.apply() only use the timestamps in your data.  If you want to
>> round up to the beginning of the next hour, use align.time().
>>
>> > align.time(temp, 3600)
>>                     [,1]
>> 2012-05-02 10:00:00    6
>> 2012-05-02 11:00:00   22
>> 2012-05-02 12:00:00   38
>> 2012-05-02 13:00:00   54
>> 2012-05-02 14:00:00   70
>> 2012-05-02 15:00:00   86
>> 2012-05-02 16:00:00  102
>> 2012-05-02 17:00:00  118
>> 2012-05-02 18:00:00  134
>> 2012-05-02 19:00:00  150
>> 2012-05-02 20:00:00   40
>>
>> > Many thanks in advance,
>> > Costas
>> >
>> > __________________________________________________________________
>> >
>> > *Costas Vorlow
>> > <http://www.gravatar.com/avatar/49a9dee59073b1ed4a36440a06aeb81b> *
>> > *http://www.linkedin.com/in/costasvorlow
>> > <http://www.linkedin.com/in/costasvorlow>*
>> > *http://www.vorlow.com* <http://www.vorlow.com>
>> >
>> > ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
>> >
>>
>> Best,
>> --
>> Joshua Ulrich  |  about.me/joshuaulrich
>> FOSS Trading  |  www.fosstrading.com
>
>


From costas.vorlow at gmail.com  Wed Jun 18 13:34:51 2014
From: costas.vorlow at gmail.com (Costas Vorlow)
Date: Wed, 18 Jun 2014 14:34:51 +0300
Subject: [R] Aggregating 15 minute xts sequence to hourly
In-Reply-To: <CAPPM_gQ5iLXsTr9RcRfsgaBoSyFPBQdrFe+Xn5mhGCmCiwA6Eg@mail.gmail.com>
References: <CABfqsR_6FJXvCecMPoJRi=dtX1LGmt-seHxyvjBk=mSre9GgbA@mail.gmail.com>
	<CAPPM_gQJcYtntTTYASuT2PMULv57MO2MEq=70LLnf0egNKxyQw@mail.gmail.com>
	<CABfqsR-4HS+ES28evstAyD9vAcrK6UGRwUs4+uddiFZYz5XRCQ@mail.gmail.com>
	<CAPPM_gQ5iLXsTr9RcRfsgaBoSyFPBQdrFe+Xn5mhGCmCiwA6Eg@mail.gmail.com>
Message-ID: <CABfqsR_GxWqLh+TpeXMhQj1_sUcZR4NJB-T+7ytsSWXZaDHnnw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140618/56865565/attachment.pl>

From rh at knut-krueger.de  Wed Jun 18 13:47:16 2014
From: rh at knut-krueger.de (Knut Krueger)
Date: Wed, 18 Jun 2014 13:47:16 +0200
Subject: [R] writeWorksheet(....,rownames..) warning
In-Reply-To: <CAAxdm-7s0ahqubUBnX03oTv56d+_Undi0AatKNA-hKYvAOzDMw@mail.gmail.com>
References: <53A06AB3.3080500@knut-krueger.de>
	<CAAxdm-7s0ahqubUBnX03oTv56d+_Undi0AatKNA-hKYvAOzDMw@mail.gmail.com>
Message-ID: <53A17C44.1080105@knut-krueger.de>

Am 17.06.2014 23:11, schrieb jim holtman:
> You were using 'rownames' incorrectly.  Here is the correct way:
>
>
> library(XLConnect)
> wb <- loadWorkbook("writeWorksheet.xlsx", create = TRUE)
> createSheet(wb, name = "CO2")
> writeWorksheet(wb, CO2, sheet = "CO2",rownames="Row Names")
> saveWorkbook(wb)
>
Thank you I misunderstood the man file as I thougt if tehre is no 
rownames=TRUE/FALSE I must support the names .

> Tell me what you want to do,

Supporting the rownames in the ecel file

but it is solved thank you


From jim at bitwrit.com.au  Wed Jun 18 13:54:26 2014
From: jim at bitwrit.com.au (Jim Lemon)
Date: Wed, 18 Jun 2014 21:54:26 +1000
Subject: [R] How to output name of object
In-Reply-To: <CACfGrH1y+A8UzNswt02YV0cRUF1g6hywUTL4M7ZCHmLyUAbPOg@mail.gmail.com>
References: <CACfGrH1y+A8UzNswt02YV0cRUF1g6hywUTL4M7ZCHmLyUAbPOg@mail.gmail.com>
Message-ID: <2813133.fHNVOWVRDq@localhost.localdomain>

On Wed, 18 Jun 2014 04:24:58 PM yzh lin wrote:
> Hi, every R user,
> 
>    I wanna output  names of objects, I googled codes from website, 
but it
> was not what I wanted.
> 
> the codes are as following:
> 
> f <- function (...)
> {
>   unevaluatedArgs <- substitute(...())
>   evaluatedArgs <- list(...)
>   stopifnot(length(unevaluatedArgs) == length(evaluatedArgs))
>   tags <- vapply(unevaluatedArgs, FUN=function(x) deparse(x)[1],
>                  FUN.VALUE=character(1))
>   if (!is.null(tmp <- names(evaluatedArgs))) {
>     # if argument is tagged, tag=expr, use the tag
>     i <- !is.na(tmp) & tmp != ""
>     tags[i] <- tmp[i]
>   }
>   tags
> }
> 
> f(a1=log(1:4), m1=1:4, c1=pi)
> 
> results:
> > f(a1=log(1:4), m1=1:4, c1=pi)
> 
>   a1   m1   c1
> "a1" "m1" "c1"
> 
> 
> what I wanted is outputting "log(1:4) " "1:4", "pi" , while not "a1" "m1"
> "c1" .
> 
> Coulde someone tell me how to get the results I wanted?
> 
Hi Yuanzhen,
This may be of some help:

f<-function (...) {
  unevaluatedArgs <- unlist(substitute(...()))
  tags<-NA
  for(arg in 1:length(unevaluatedArgs))
   tags[arg]<-deparse(unevaluatedArgs[[arg]])
  tags
}

f(a1=log(1:4), m1=1:4, c1=pi)
[1] "log(1:4)" "1:4"      "pi"      

Jim


From ripley at stats.ox.ac.uk  Wed Jun 18 14:41:55 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 18 Jun 2014 13:41:55 +0100
Subject: [R] How to output name of object
In-Reply-To: <2813133.fHNVOWVRDq@localhost.localdomain>
References: <CACfGrH1y+A8UzNswt02YV0cRUF1g6hywUTL4M7ZCHmLyUAbPOg@mail.gmail.com>
	<2813133.fHNVOWVRDq@localhost.localdomain>
Message-ID: <53A18913.3080102@stats.ox.ac.uk>

On 18/06/2014 12:54, Jim Lemon wrote:
> On Wed, 18 Jun 2014 04:24:58 PM yzh lin wrote:
>> Hi, every R user,
>>
>>     I wanna output  names of objects, I googled codes from website,
> but it
>> was not what I wanted.
>>
>> the codes are as following:
>>
>> f <- function (...)
>> {
>>    unevaluatedArgs <- substitute(...())
>>    evaluatedArgs <- list(...)
>>    stopifnot(length(unevaluatedArgs) == length(evaluatedArgs))
>>    tags <- vapply(unevaluatedArgs, FUN=function(x) deparse(x)[1],
>>                   FUN.VALUE=character(1))
>>    if (!is.null(tmp <- names(evaluatedArgs))) {
>>      # if argument is tagged, tag=expr, use the tag
>>      i <- !is.na(tmp) & tmp != ""
>>      tags[i] <- tmp[i]
>>    }
>>    tags
>> }
>>
>> f(a1=log(1:4), m1=1:4, c1=pi)
>>
>> results:
>>> f(a1=log(1:4), m1=1:4, c1=pi)
>>
>>    a1   m1   c1
>> "a1" "m1" "c1"
>>
>>
>> what I wanted is outputting "log(1:4) " "1:4", "pi" , while not "a1" "m1"
>> "c1" .
>>
>> Coulde someone tell me how to get the results I wanted?
>>
> Hi Yuanzhen,
> This may be of some help:
>
> f<-function (...) {
>    unevaluatedArgs <- unlist(substitute(...()))
>    tags<-NA
>    for(arg in 1:length(unevaluatedArgs))
>     tags[arg]<-deparse(unevaluatedArgs[[arg]])
>    tags
> }
>
> f(a1=log(1:4), m1=1:4, c1=pi)
> [1] "log(1:4)" "1:4"      "pi"

Or simply

f <- function(...) sapply(subsitute(...()), deparse)

which even keeps the names.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From gunter.berton at gene.com  Wed Jun 18 16:01:07 2014
From: gunter.berton at gene.com (Bert Gunter)
Date: Wed, 18 Jun 2014 07:01:07 -0700
Subject: [R] How to output name of object
In-Reply-To: <53A18913.3080102@stats.ox.ac.uk>
References: <CACfGrH1y+A8UzNswt02YV0cRUF1g6hywUTL4M7ZCHmLyUAbPOg@mail.gmail.com>
	<2813133.fHNVOWVRDq@localhost.localdomain>
	<53A18913.3080102@stats.ox.ac.uk>
Message-ID: <CACk-te0ARqH_4ns_973XEEdN+KNK3MQR1DDgcMrqc0MGYVOKYw@mail.gmail.com>

Would

f <- function (...)
{
  sapply(substitute(list(...)),deparse)[-1]
}

> f(a1=log(1:4), m1=1:4, c1=pi)
        a1         m1         c1
"log(1:4)"      "1:4"       "pi"

be equivalent?
I find the substitute(...()) construction completely mysterious, while
substitute(list(...)) makes sense to me.

Cheers,
Bert




Bert Gunter
Genentech Nonclinical Biostatistics
(650) 467-7374

"Data is not information. Information is not knowledge. And knowledge
is certainly not wisdom."
Clifford Stoll




On Wed, Jun 18, 2014 at 5:41 AM, Prof Brian Ripley
<ripley at stats.ox.ac.uk> wrote:
> On 18/06/2014 12:54, Jim Lemon wrote:
>>
>> On Wed, 18 Jun 2014 04:24:58 PM yzh lin wrote:
>>>
>>> Hi, every R user,
>>>
>>>     I wanna output  names of objects, I googled codes from website,
>>
>> but it
>>>
>>> was not what I wanted.
>>>
>>> the codes are as following:
>>>
>>> f <- function (...)
>>> {
>>>    unevaluatedArgs <- substitute(...())
>>>    evaluatedArgs <- list(...)
>>>    stopifnot(length(unevaluatedArgs) == length(evaluatedArgs))
>>>    tags <- vapply(unevaluatedArgs, FUN=function(x) deparse(x)[1],
>>>                   FUN.VALUE=character(1))
>>>    if (!is.null(tmp <- names(evaluatedArgs))) {
>>>      # if argument is tagged, tag=expr, use the tag
>>>      i <- !is.na(tmp) & tmp != ""
>>>      tags[i] <- tmp[i]
>>>    }
>>>    tags
>>> }
>>>
>>> f(a1=log(1:4), m1=1:4, c1=pi)
>>>
>>> results:
>>>>
>>>> f(a1=log(1:4), m1=1:4, c1=pi)
>>>
>>>
>>>    a1   m1   c1
>>> "a1" "m1" "c1"
>>>
>>>
>>> what I wanted is outputting "log(1:4) " "1:4", "pi" , while not "a1" "m1"
>>> "c1" .
>>>
>>> Coulde someone tell me how to get the results I wanted?
>>>
>> Hi Yuanzhen,
>> This may be of some help:
>>
>> f<-function (...) {
>>    unevaluatedArgs <- unlist(substitute(...()))
>>    tags<-NA
>>    for(arg in 1:length(unevaluatedArgs))
>>     tags[arg]<-deparse(unevaluatedArgs[[arg]])
>>    tags
>> }
>>
>> f(a1=log(1:4), m1=1:4, c1=pi)
>> [1] "log(1:4)" "1:4"      "pi"
>
>
> Or simply
>
> f <- function(...) sapply(subsitute(...()), deparse)
>
> which even keeps the names.
>
> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From dcarlson at tamu.edu  Wed Jun 18 16:05:48 2014
From: dcarlson at tamu.edu (David L Carlson)
Date: Wed, 18 Jun 2014 14:05:48 +0000
Subject: [R] C: drive memory full
In-Reply-To: <20140617180931.4f3e06a6@draco>
References: <1402991370388.32533@alumni.ucl.ac.uk>
	<53A00C51.7040503@stats.ox.ac.uk>	<1403001581203.14992@alumni.ucl.ac.uk>
	<7e9aa8e0926d443db608b57b99d4dfd9@AM3PR05MB545.eurprd05.prod.outlook.com>
	<1403009334347.67169@alumni.ucl.ac.uk> <20140617180931.4f3e06a6@draco>
Message-ID: <53BF8FB63FAF2E4A9455EF1EE94DA726F77D13@mb02.ads.tamu.edu>

Windows 8 (and earlier versions) has a disk cleanup tool that will let you delete temporary files that might help. At the bottom of the screen on the taskbar, click the folder icon to bring up a windows showing your drives and folders. On the left side click on the drive you are interested in (probably "C:"). On the top title bar of the window showing the folders in drive C: on the left is an icon showing a sheet of paper with a red checkmark. That brings up a properties window that shows you how much space you are using and how much is free. Close that window and then click on the Manage tab on the line just below the title bar. Click on Cleanup and that will let you select temporary files of various kinds for deletion if your drive is getting full.

-------------------------------------
David L Carlson
Department of Anthropology
Texas A&M University
College Station, TX 77840-4352

-----Original Message-----
From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On Behalf Of jwd
Sent: Tuesday, June 17, 2014 8:10 PM
To: r-help at r-project.org
Subject: Re: [R] C: drive memory full

On Tue, 17 Jun 2014 12:48:54 +0000
"Hiyoshi, Ayako" <ayako.hiyoshi.09 at alumni.ucl.ac.uk> wrote:

> Dear Martyn and Professor Ripley,
> 
> Thank you so much for your help. I used Window's large file search
> (it was useful! thank you), but there is no big files detected in C:
> drive . Perhaps I will have to reinstall Windows..
> 
The problem may not be R at all, but rather Windows.  How large is your
drive, not RAM but the actual drive?

If you can, examine your drive to see if there are either fragmentation
problems or hidden files taking up excess space.  Look at the
drive properties for C:\ and run disk clean-up if possible.  Another
problem, MS may have fixed this at some point - I don't run Win 8, is
that if your deleted files are not removed, you can run out of space.
Usually, the space occupied by a file marked for deletion should
be scavenged as Windows needs space, but sometimes that may not happen,
especially with a very full drive. So, if there are files in the
"Wastebasket" remove them completely.  Another space-use that can grow
to excess is a print spool. Even Windows uses a print spool and that can
grow too large for the system to function efficiently.  

JWdougherty

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From jholtman at gmail.com  Wed Jun 18 16:14:39 2014
From: jholtman at gmail.com (jim holtman)
Date: Wed, 18 Jun 2014 10:14:39 -0400
Subject: [R] C: drive memory full
In-Reply-To: <53BF8FB63FAF2E4A9455EF1EE94DA726F77D13@mb02.ads.tamu.edu>
References: <1402991370388.32533@alumni.ucl.ac.uk>
	<53A00C51.7040503@stats.ox.ac.uk>
	<1403001581203.14992@alumni.ucl.ac.uk>
	<7e9aa8e0926d443db608b57b99d4dfd9@AM3PR05MB545.eurprd05.prod.outlook.com>
	<1403009334347.67169@alumni.ucl.ac.uk>
	<20140617180931.4f3e06a6@draco>
	<53BF8FB63FAF2E4A9455EF1EE94DA726F77D13@mb02.ads.tamu.edu>
Message-ID: <CAAxdm-6zDU7uBjha_Cd6Uk5ws0C7bmoJDyKyoG-0F0pz-XDgTg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140618/96be4315/attachment.pl>

From ripley at stats.ox.ac.uk  Wed Jun 18 16:15:25 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 18 Jun 2014 15:15:25 +0100
Subject: [R] How to output name of object
In-Reply-To: <CACk-te0ARqH_4ns_973XEEdN+KNK3MQR1DDgcMrqc0MGYVOKYw@mail.gmail.com>
References: <CACfGrH1y+A8UzNswt02YV0cRUF1g6hywUTL4M7ZCHmLyUAbPOg@mail.gmail.com>	<2813133.fHNVOWVRDq@localhost.localdomain>	<53A18913.3080102@stats.ox.ac.uk>
	<CACk-te0ARqH_4ns_973XEEdN+KNK3MQR1DDgcMrqc0MGYVOKYw@mail.gmail.com>
Message-ID: <53A19EFD.5080406@stats.ox.ac.uk>

On 18/06/2014 15:01, Bert Gunter wrote:
> Would
>
> f <- function (...)
> {
>    sapply(substitute(list(...)),deparse)[-1]
> }
>
>> f(a1=log(1:4), m1=1:4, c1=pi)
>          a1         m1         c1
> "log(1:4)"      "1:4"       "pi"
>
> be equivalent?
> I find the substitute(...()) construction completely mysterious, while
> substitute(list(...)) makes sense to me.

It would give the same result.  If starting from scratch I would 
probably have used

f <- function(...) as.character(match.call()[-1])

but that does not give names (if wanted) whereas

f <- function(...) sapply(match.call(), deparse)[-1]

does


My main point was that a for() loop (and extending a logical vector 
initialized to NA and then coerced to character) seems rather unnatural. 
  And seq_along would be clearer if you really must use a loop.

>
> Cheers,
> Bert
>
>
>
>
> Bert Gunter
> Genentech Nonclinical Biostatistics
> (650) 467-7374
>
> "Data is not information. Information is not knowledge. And knowledge
> is certainly not wisdom."
> Clifford Stoll
>
>
>
>
> On Wed, Jun 18, 2014 at 5:41 AM, Prof Brian Ripley
> <ripley at stats.ox.ac.uk> wrote:
>> On 18/06/2014 12:54, Jim Lemon wrote:
>>>
>>> On Wed, 18 Jun 2014 04:24:58 PM yzh lin wrote:
>>>>
>>>> Hi, every R user,
>>>>
>>>>      I wanna output  names of objects, I googled codes from website,
>>>
>>> but it
>>>>
>>>> was not what I wanted.
>>>>
>>>> the codes are as following:
>>>>
>>>> f <- function (...)
>>>> {
>>>>     unevaluatedArgs <- substitute(...())
>>>>     evaluatedArgs <- list(...)
>>>>     stopifnot(length(unevaluatedArgs) == length(evaluatedArgs))
>>>>     tags <- vapply(unevaluatedArgs, FUN=function(x) deparse(x)[1],
>>>>                    FUN.VALUE=character(1))
>>>>     if (!is.null(tmp <- names(evaluatedArgs))) {
>>>>       # if argument is tagged, tag=expr, use the tag
>>>>       i <- !is.na(tmp) & tmp != ""
>>>>       tags[i] <- tmp[i]
>>>>     }
>>>>     tags
>>>> }
>>>>
>>>> f(a1=log(1:4), m1=1:4, c1=pi)
>>>>
>>>> results:
>>>>>
>>>>> f(a1=log(1:4), m1=1:4, c1=pi)
>>>>
>>>>
>>>>     a1   m1   c1
>>>> "a1" "m1" "c1"
>>>>
>>>>
>>>> what I wanted is outputting "log(1:4) " "1:4", "pi" , while not "a1" "m1"
>>>> "c1" .
>>>>
>>>> Coulde someone tell me how to get the results I wanted?
>>>>
>>> Hi Yuanzhen,
>>> This may be of some help:
>>>
>>> f<-function (...) {
>>>     unevaluatedArgs <- unlist(substitute(...()))
>>>     tags<-NA
>>>     for(arg in 1:length(unevaluatedArgs))
>>>      tags[arg]<-deparse(unevaluatedArgs[[arg]])
>>>     tags
>>> }
>>>
>>> f(a1=log(1:4), m1=1:4, c1=pi)
>>> [1] "log(1:4)" "1:4"      "pi"
>>
>>
>> Or simply
>>
>> f <- function(...) sapply(subsitute(...()), deparse)
>>
>> which even keeps the names.
>>
>> --
>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>> University of Oxford,             Tel:  +44 1865 272861 (self)
>> 1 South Parks Road,                     +44 1865 272866 (PA)
>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From gunter.berton at gene.com  Wed Jun 18 16:26:40 2014
From: gunter.berton at gene.com (Bert Gunter)
Date: Wed, 18 Jun 2014 07:26:40 -0700
Subject: [R] How to output name of object
In-Reply-To: <53A19EFD.5080406@stats.ox.ac.uk>
References: <CACfGrH1y+A8UzNswt02YV0cRUF1g6hywUTL4M7ZCHmLyUAbPOg@mail.gmail.com>
	<2813133.fHNVOWVRDq@localhost.localdomain>
	<53A18913.3080102@stats.ox.ac.uk>
	<CACk-te0ARqH_4ns_973XEEdN+KNK3MQR1DDgcMrqc0MGYVOKYw@mail.gmail.com>
	<53A19EFD.5080406@stats.ox.ac.uk>
Message-ID: <CACk-te3Lsa58TkwDgB-Na2KKENhgzdKWvUSVefizz9ee0=0tUg@mail.gmail.com>

Ah, yes. Much better -- that is what match.call() is for.
As always, thanks for the insight,

Best,
Bert

Bert Gunter
Genentech Nonclinical Biostatistics
(650) 467-7374

"Data is not information. Information is not knowledge. And knowledge
is certainly not wisdom."
Clifford Stoll




On Wed, Jun 18, 2014 at 7:15 AM, Prof Brian Ripley
<ripley at stats.ox.ac.uk> wrote:
> On 18/06/2014 15:01, Bert Gunter wrote:
>>
>> Would
>>
>> f <- function (...)
>> {
>>    sapply(substitute(list(...)),deparse)[-1]
>> }
>>
>>> f(a1=log(1:4), m1=1:4, c1=pi)
>>
>>          a1         m1         c1
>> "log(1:4)"      "1:4"       "pi"
>>
>> be equivalent?
>> I find the substitute(...()) construction completely mysterious, while
>> substitute(list(...)) makes sense to me.
>
>
> It would give the same result.  If starting from scratch I would probably
> have used
>
> f <- function(...) as.character(match.call()[-1])
>
> but that does not give names (if wanted) whereas
>
> f <- function(...) sapply(match.call(), deparse)[-1]
>
> does
>
>
> My main point was that a for() loop (and extending a logical vector
> initialized to NA and then coerced to character) seems rather unnatural.
> And seq_along would be clearer if you really must use a loop.
>
>>
>> Cheers,
>> Bert
>>
>>
>>
>>
>> Bert Gunter
>> Genentech Nonclinical Biostatistics
>> (650) 467-7374
>>
>> "Data is not information. Information is not knowledge. And knowledge
>> is certainly not wisdom."
>> Clifford Stoll
>>
>>
>>
>>
>> On Wed, Jun 18, 2014 at 5:41 AM, Prof Brian Ripley
>> <ripley at stats.ox.ac.uk> wrote:
>>>
>>> On 18/06/2014 12:54, Jim Lemon wrote:
>>>>
>>>>
>>>> On Wed, 18 Jun 2014 04:24:58 PM yzh lin wrote:
>>>>>
>>>>>
>>>>> Hi, every R user,
>>>>>
>>>>>      I wanna output  names of objects, I googled codes from website,
>>>>
>>>>
>>>> but it
>>>>>
>>>>>
>>>>> was not what I wanted.
>>>>>
>>>>> the codes are as following:
>>>>>
>>>>> f <- function (...)
>>>>> {
>>>>>     unevaluatedArgs <- substitute(...())
>>>>>     evaluatedArgs <- list(...)
>>>>>     stopifnot(length(unevaluatedArgs) == length(evaluatedArgs))
>>>>>     tags <- vapply(unevaluatedArgs, FUN=function(x) deparse(x)[1],
>>>>>                    FUN.VALUE=character(1))
>>>>>     if (!is.null(tmp <- names(evaluatedArgs))) {
>>>>>       # if argument is tagged, tag=expr, use the tag
>>>>>       i <- !is.na(tmp) & tmp != ""
>>>>>       tags[i] <- tmp[i]
>>>>>     }
>>>>>     tags
>>>>> }
>>>>>
>>>>> f(a1=log(1:4), m1=1:4, c1=pi)
>>>>>
>>>>> results:
>>>>>>
>>>>>>
>>>>>> f(a1=log(1:4), m1=1:4, c1=pi)
>>>>>
>>>>>
>>>>>
>>>>>     a1   m1   c1
>>>>> "a1" "m1" "c1"
>>>>>
>>>>>
>>>>> what I wanted is outputting "log(1:4) " "1:4", "pi" , while not "a1"
>>>>> "m1"
>>>>> "c1" .
>>>>>
>>>>> Coulde someone tell me how to get the results I wanted?
>>>>>
>>>> Hi Yuanzhen,
>>>> This may be of some help:
>>>>
>>>> f<-function (...) {
>>>>     unevaluatedArgs <- unlist(substitute(...()))
>>>>     tags<-NA
>>>>     for(arg in 1:length(unevaluatedArgs))
>>>>      tags[arg]<-deparse(unevaluatedArgs[[arg]])
>>>>     tags
>>>> }
>>>>
>>>> f(a1=log(1:4), m1=1:4, c1=pi)
>>>> [1] "log(1:4)" "1:4"      "pi"
>>>
>>>
>>>
>>> Or simply
>>>
>>> f <- function(...) sapply(subsitute(...()), deparse)
>>>
>>> which even keeps the names.
>>>
>>> --
>>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>>> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>>> University of Oxford,             Tel:  +44 1865 272861 (self)
>>> 1 South Parks Road,                     +44 1865 272866 (PA)
>>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>
>
>
> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From stbarningham at gmail.com  Wed Jun 18 16:48:15 2014
From: stbarningham at gmail.com (Thomas Barningham)
Date: Wed, 18 Jun 2014 15:48:15 +0100
Subject: [R] Writing "monthly" .txt or .csv files from a long time series
In-Reply-To: <FCFDDA71-0F5D-4EF5-8BFA-C2A0F67A099A@comcast.net>
References: <CAM5qaWdeL7ati659uw_KOn59_QBTn8DaBWLjVecjYmT3kPC4Sg@mail.gmail.com>
	<FCFDDA71-0F5D-4EF5-8BFA-C2A0F67A099A@comcast.net>
Message-ID: <CAM5qaWcDDi+T+cs3TcfROh38Od1PUnYq6F-qAvgyV_1jRjWpoA@mail.gmail.com>

Hi David,

Thank you for your help. The code you supplied is working, to an
extent. However, i'm only outputting the first monthly file into my
working directory.

Apologies as I'm a relatively new to R, so please bear with my
ignorance, have I not set up a loop correctly? Also, what is the
purpose of the function(x) argument within the lapply function?

Here's what I have now:

> input <- read.table("BHD_APO.txt", header=TRUE)
> head(input)
      Date     APO
1 1999.479 -168.48
2 1999.479 -158.08
3 1999.480 -163.79
4 1999.480 -164.38
5 1999.480 -173.94
6 1999.480 -161.92
>
> ##### This package and the "date_decimal" function reads my decimal date correctly
> library(lubridate)
>
> input$date <- date_decimal(input$Date)
> input$mon <- cut(input$date, breaks="month")
> head(input)
      Date     APO                date        mon
1 1999.479 -168.48 1999-06-25 00:01:51 1999-06-01
2 1999.479 -158.08 1999-06-25 00:16:50 1999-06-01
3 1999.480 -163.79 1999-06-25 00:31:52 1999-06-01
4 1999.480 -164.38 1999-06-25 01:01:56 1999-06-01
5 1999.480 -173.94 1999-06-25 01:16:58 1999-06-01
6 1999.480 -161.92 1999-06-25 01:31:57 1999-06-01
> lapply(split(input, input$mon), function(x)
+ write.table(x, file=as.character(input$mon[1])))
$`1999-06-01`
NULL

$`1999-07-01`
NULL


The $ "date" NULL then repeats for all months.

Many thanks
Thomas

On Tue, Jun 17, 2014 at 9:35 PM, David Winsemius <dwinsemius at comcast.net> wrote:
>
> On Jun 17, 2014, at 5:00 AM, Thomas Barningham wrote:
>
>> Dear R users,
>>
>> I have a .txt file of time series data from the middle of 1999 through
>> to the end of 2012. There are two columns in the file, the first is a
>> decimal date, the second is an atmospheric tracer value and looks like
>> this:
>>
>> Date  APO
>> 1999.47945560  -168.48
>> 1999.47948410  -158.08
>> 1999.47951270  -163.79
>> 1999.47956990  -164.38
>> 1999.47959850  -173.94
>> 1999.47962700  -161.92
>> 1999.47965560  -154.36
>> 1999.47968420  -147.55
>> 1999.47971280  -157.06
>> 1999.47974140  -151.21
>> 1999.47976990  -141.63
>> 1999.47979850  -147.97
>>
>> What I'd now like to do is write new .txt (or .csv) files based on the
>> month of the year so that I have separate text files for Jan, Feb, Mar
>> etc for each year 1999, 2000, 2001 etc. using either the write.table
>> or write.csv function. Is there an easy way to do this in R?
>
> There is a breaks argument to cut.POSIXt function that will accept "month" as an argument.
>  With a suitable offset that 'Date' column looks like it would be suitable for `as.Date.numeric`.
>
> Try something along these lines:
>
> dat$dt <- as.Date(dat$Date)
> dat$mon <- cut(dat$dt, breaks="month")
> lapply( split(dat, dat$mon), function(dts)
>              write.csv( dts, file=as.character(dts$mon[1]) ))
>
>>
>> Google key word searches have not been fruitful and the only other way
>> I can see to do this is "manually" in excel, which would take a long
>> time. I'm hoping there's a neat bit of code to do this.
>
> The above seemed acceptably "neat" to me, although it remains only modestly tested.
>
> --
>
> David Winsemius
> Alameda, CA, USA
>



-- 
Thomas Barningham
Centre for Ocean and Atmospheric Sciences
School of Environmental Sciences
University of East Anglia
Norwich Research Park
Norwich
NR4 7TJ


From bsmith030465 at gmail.com  Wed Jun 18 16:48:23 2014
From: bsmith030465 at gmail.com (Brian Smith)
Date: Wed, 18 Jun 2014 10:48:23 -0400
Subject: [R] Basic plot density question
Message-ID: <CAEQKoCHqDrsWr3D5sP_nKyQwfmgkaXWPProtSuco713V721wkQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140618/0a335dfc/attachment.pl>

From pdalgd at gmail.com  Wed Jun 18 16:51:48 2014
From: pdalgd at gmail.com (peter dalgaard)
Date: Wed, 18 Jun 2014 16:51:48 +0200
Subject: [R] prediction based on conditional logistic regression, clogit
In-Reply-To: <d46aec$hd2r61@ironport9.mayo.edu>
References: <mailman.23.1402999208.32588.r-help@r-project.org>
	<d46aec$hd2r61@ironport9.mayo.edu>
Message-ID: <D7DEE222-5507-4D14-A97C-8C7D6C580EAF@gmail.com>


On 17 Jun 2014, at 16:38 , Therneau, Terry M., Ph.D. <therneau at mayo.edu> wrote:

> As Peter D said, the clogit function simply sets up a special data set and then calls coxph, and is based on an identity that the likelihood for the conditional logistic is identical to the likelihood of a Cox model for a specially structured data set.  I vacillate on whether this identity is just a mathematical accident or the mark of some deep truth.


My take on this is that it is the latter, but in reverse: The Cox likelihood works by splitting the event history into a series of conditional experiments: Given a risk set and that one member must die, work out the likelihood that it is the member that is observed to die. These experiments are clearly not independent since the risk set of one experiment depends on the outcome of the previous ones. However, arguably, it is still sensible to cumulate the information represented by the log-likelihood contributions. 

I.e. you can do condtional logistic regression with a Cox likelihood because the Cox likelihood _is_ a conditional logistic regression likelihood.

-- 
Peter Dalgaard, Professor
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From gunter.berton at gene.com  Wed Jun 18 17:09:56 2014
From: gunter.berton at gene.com (Bert Gunter)
Date: Wed, 18 Jun 2014 08:09:56 -0700
Subject: [R] Basic plot density question
In-Reply-To: <CAEQKoCHqDrsWr3D5sP_nKyQwfmgkaXWPProtSuco713V721wkQ@mail.gmail.com>
References: <CAEQKoCHqDrsWr3D5sP_nKyQwfmgkaXWPProtSuco713V721wkQ@mail.gmail.com>
Message-ID: <CACk-te1sy9Y9GY2goEbOE+S1MB_C1AjcREjNzgEODBgGEtmNbA@mail.gmail.com>

Try reading the docs!

?plot.default

... and note the xllim and ylim arguments.

Have you read "An Introduction to R" or some other R tutorial. If not,
you should do so before posting further.

Cheers,
Bert



Bert Gunter
Genentech Nonclinical Biostatistics
(650) 467-7374

"Data is not information. Information is not knowledge. And knowledge
is certainly not wisdom."
Clifford Stoll




On Wed, Jun 18, 2014 at 7:48 AM, Brian Smith <bsmith030465 at gmail.com> wrote:
> Hi,
>
> I wanted to plot two different density profiles. My code looks like:
>
>
> x1 <- rnorm(100,mean=0,sd=1)
> x2 <- rnorm(100,mean=1,sd=1)
>
> plot(density(x1),xlab="",col="red",main="")
> par(new=T)
> plot(density(x2),xlab="",col="blue",main="")
>
>
> However, the x-axis values don't match up for the two plots. Is there a way
> I can fix the axis so that the two plots are comparable? Similarly for the
> y-axis...
>
> thanks!
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From 538280 at gmail.com  Wed Jun 18 17:15:42 2014
From: 538280 at gmail.com (Greg Snow)
Date: Wed, 18 Jun 2014 09:15:42 -0600
Subject: [R] Basic plot density question
In-Reply-To: <CAEQKoCHqDrsWr3D5sP_nKyQwfmgkaXWPProtSuco713V721wkQ@mail.gmail.com>
References: <CAEQKoCHqDrsWr3D5sP_nKyQwfmgkaXWPProtSuco713V721wkQ@mail.gmail.com>
Message-ID: <CAFEqCdzHHxu3QDsUDTDnoCi8xtr9ecw9hNV_BQ_13F09NaArfg@mail.gmail.com>

First you should do your best to forget that you ever saw the command
"par(new=T)", rip that page out of any book you saw it in, blacklist
any webpage etc.  In general (as you see) it causes more problems than
it solves.

Now to do what you want there are a couple of options, one of the
simplest is to use the lines function:

d1 <- density(x1)
d2 <- density(x2)
plot(d1, xlab='', col='red',main='', ylim=range(d1$y,d2$y),
xlim=range(d1$x,d2$x) )
lines(d2, col='blue')

Other options include the matplot function or tools in the lattice and
ggplot2 packages.

On Wed, Jun 18, 2014 at 8:48 AM, Brian Smith <bsmith030465 at gmail.com> wrote:
> Hi,
>
> I wanted to plot two different density profiles. My code looks like:
>
>
> x1 <- rnorm(100,mean=0,sd=1)
> x2 <- rnorm(100,mean=1,sd=1)
>
> plot(density(x1),xlab="",col="red",main="")
> par(new=T)
> plot(density(x2),xlab="",col="blue",main="")
>
>
> However, the x-axis values don't match up for the two plots. Is there a way
> I can fix the axis so that the two plots are comparable? Similarly for the
> y-axis...
>
> thanks!
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com


From ayako.hiyoshi.09 at alumni.ucl.ac.uk  Wed Jun 18 17:27:24 2014
From: ayako.hiyoshi.09 at alumni.ucl.ac.uk (Hiyoshi, Ayako)
Date: Wed, 18 Jun 2014 15:27:24 +0000
Subject: [R] C: drive memory full
In-Reply-To: <CAAxdm-6zDU7uBjha_Cd6Uk5ws0C7bmoJDyKyoG-0F0pz-XDgTg@mail.gmail.com>
References: <1402991370388.32533@alumni.ucl.ac.uk>
	<53A00C51.7040503@stats.ox.ac.uk>	<1403001581203.14992@alumni.ucl.ac.uk>
	<7e9aa8e0926d443db608b57b99d4dfd9@AM3PR05MB545.eurprd05.prod.outlook.com>
	<1403009334347.67169@alumni.ucl.ac.uk>	<20140617180931.4f3e06a6@draco>
	<53BF8FB63FAF2E4A9455EF1EE94DA726F77D13@mb02.ads.tamu.edu>,
	<CAAxdm-6zDU7uBjha_Cd6Uk5ws0C7bmoJDyKyoG-0F0pz-XDgTg@mail.gmail.com>
Message-ID: <1403105244061.16118@alumni.ucl.ac.uk>

Dear R users,

Thank you so much for your help. 
I got deleted all files in my C:\xxx\AppData\Local\Temp file and also run suggested R codes to erase files. 
I list them below as somebody may be interested in.

All in all, I got some space (1 GB) back, and compressing Stata data, I achieved what I needed to do with Stata. 

Also, Windows tips for finding hidden files and big size files were very helpful. Unfortunately I could not run SequoiaView because of the security issue of my PC at office, but it sounded very useful.  

Thank you so much for considering my problem.

Best wishes,
Ayako 

--- some R codes I used : 

tempdir()
dirname(tempdir())
unlink(tempdir(),recursive=TRUE)
rm(list=ls(all=TRUE))

________________________________________
From: r-help-bounces at r-project.org <r-help-bounces at r-project.org> on behalf of jim holtman <jholtman at gmail.com>
Sent: 18 June 2014 15:14
To: David L Carlson
Cc: r-help at r-project.org
Subject: Re: [R] C: drive memory full

One program that I have found valuable in looking at the size of files on
disk is SequoiaView.  It creates a 'treemap' of the sizes of the files and
lets you zoom in to specific directories and such.


Jim Holtman
Data Munger Guru

What is the problem that you are trying to solve?
Tell me what you want to do, not how you want to do it.


On Wed, Jun 18, 2014 at 10:05 AM, David L Carlson <dcarlson at tamu.edu> wrote:

> Windows 8 (and earlier versions) has a disk cleanup tool that will let you
> delete temporary files that might help. At the bottom of the screen on the
> taskbar, click the folder icon to bring up a windows showing your drives
> and folders. On the left side click on the drive you are interested in
> (probably "C:"). On the top title bar of the window showing the folders in
> drive C: on the left is an icon showing a sheet of paper with a red
> checkmark. That brings up a properties window that shows you how much space
> you are using and how much is free. Close that window and then click on the
> Manage tab on the line just below the title bar. Click on Cleanup and that
> will let you select temporary files of various kinds for deletion if your
> drive is getting full.
>
> -------------------------------------
> David L Carlson
> Department of Anthropology
> Texas A&M University
> College Station, TX 77840-4352
>
> -----Original Message-----
> From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org]
> On Behalf Of jwd
> Sent: Tuesday, June 17, 2014 8:10 PM
> To: r-help at r-project.org
> Subject: Re: [R] C: drive memory full
>
> On Tue, 17 Jun 2014 12:48:54 +0000
> "Hiyoshi, Ayako" <ayako.hiyoshi.09 at alumni.ucl.ac.uk> wrote:
>
> > Dear Martyn and Professor Ripley,
> >
> > Thank you so much for your help. I used Window's large file search
> > (it was useful! thank you), but there is no big files detected in C:
> > drive . Perhaps I will have to reinstall Windows..
> >
> The problem may not be R at all, but rather Windows.  How large is your
> drive, not RAM but the actual drive?
>
> If you can, examine your drive to see if there are either fragmentation
> problems or hidden files taking up excess space.  Look at the
> drive properties for C:\ and run disk clean-up if possible.  Another
> problem, MS may have fixed this at some point - I don't run Win 8, is
> that if your deleted files are not removed, you can run out of space.
> Usually, the space occupied by a file marked for deletion should
> be scavenged as Windows needs space, but sometimes that may not happen,
> especially with a very full drive. So, if there are files in the
> "Wastebasket" remove them completely.  Another space-use that can grow
> to excess is a print spool. Even Windows uses a print spool and that can
> grow too large for the system to function efficiently.
>
> JWdougherty
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.



From jholtman at gmail.com  Wed Jun 18 17:38:19 2014
From: jholtman at gmail.com (jim holtman)
Date: Wed, 18 Jun 2014 11:38:19 -0400
Subject: [R] Writing "monthly" .txt or .csv files from a long time series
In-Reply-To: <CAM5qaWcDDi+T+cs3TcfROh38Od1PUnYq6F-qAvgyV_1jRjWpoA@mail.gmail.com>
References: <CAM5qaWdeL7ati659uw_KOn59_QBTn8DaBWLjVecjYmT3kPC4Sg@mail.gmail.com>
	<FCFDDA71-0F5D-4EF5-8BFA-C2A0F67A099A@comcast.net>
	<CAM5qaWcDDi+T+cs3TcfROh38Od1PUnYq6F-qAvgyV_1jRjWpoA@mail.gmail.com>
Message-ID: <CAAxdm-6D2rHrF5ogvb4EHzEbg1780hWrXPKxKNh5hK-Z_G7+RA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140618/14e84f5b/attachment.pl>

From bsmith030465 at gmail.com  Wed Jun 18 17:44:29 2014
From: bsmith030465 at gmail.com (Brian Smith)
Date: Wed, 18 Jun 2014 11:44:29 -0400
Subject: [R] Basic plot density question
In-Reply-To: <CAFEqCdzHHxu3QDsUDTDnoCi8xtr9ecw9hNV_BQ_13F09NaArfg@mail.gmail.com>
References: <CAEQKoCHqDrsWr3D5sP_nKyQwfmgkaXWPProtSuco713V721wkQ@mail.gmail.com>
	<CAFEqCdzHHxu3QDsUDTDnoCi8xtr9ecw9hNV_BQ_13F09NaArfg@mail.gmail.com>
Message-ID: <CAEQKoCF3FpDvpzEzMx0SfKwzX24hfkcLgnC5PEc1ktKmLBkb9g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140618/7445859a/attachment.pl>

From lterlemez at anadolu.edu.tr  Wed Jun 18 17:47:03 2014
From: lterlemez at anadolu.edu.tr (Levent TERLEMEZ)
Date: Wed, 18 Jun 2014 15:47:03 +0000
Subject: [R] Very very small problem...
Message-ID: <CFC78F26.102A2%lterlemez@anadolu.edu.tr>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140618/6e1a7589/attachment.pl>

From luca.cerone at gmail.com  Wed Jun 18 18:15:20 2014
From: luca.cerone at gmail.com (Luca Cerone)
Date: Wed, 18 Jun 2014 18:15:20 +0200
Subject: [R] Add points to subplots
In-Reply-To: <CAFEqCdwvn=KnFmfPy3DyVtO3FQYHyKAXoRD6qdyVwDNyRrYQLg@mail.gmail.com>
References: <CAFnz2-9Ljo6y2LM_BUvGosYtyt2yZ0Bjx9K93PifNySgC6djKA@mail.gmail.com>
	<CAFEqCdwvn=KnFmfPy3DyVtO3FQYHyKAXoRD6qdyVwDNyRrYQLg@mail.gmail.com>
Message-ID: <CAFnz2-8LzVZV6=DK3WdGxrzJaxwsvYqZbUd2SLQunaSdn5Jdug@mail.gmail.com>

Hi Greg and Jim.
In the end I solved by modifying the function.
I was just wondering if there is some function similar to Matlab's subplot,
which let you change the active plot.

Next time I will run in the same issue I will try the split.screen
function proposed by Jim.

Thanks a lot for the help,
Cheers,
Luca

2014-06-17 18:00 GMT+02:00 Greg Snow <538280 at gmail.com>:
> I am not familiar with the pamr.plotcv function, but in general if it
> uses par(mfrow=c(2,1)) to set up for the multiple plots then your
> problem with going back to the first plot is that you have lost the
> other information (such as user coordinates) needed to add to the 1st
> plot.  You can see that with the following base graphics commands:
>
> par(mfrow=c(2,1))
> plot(runif(25),rnorm(25))
> tmp <- par(no.readonly=TRUE)
> hist(rnorm(1000))
>
> par(mfg=c(1,1))
> abline(h=0, col='red')
>
> The horizontal line is at what would be 0 in the lower plot, not the
> upper.  Since I saved the graphics parameters I can do the correct
> thing with a command like:
>
> par(mfg=c(1,1), plt=tmp$plt, usr=tmp$usr)
> abline(h=0, col='blue')
>
> You can see the new line is in the correct place.
>
> Looking at the help for pamr.plotcv it does not look like it has any
> nice built-in ways to save the plotting parameters (some functions
> would let you plot just the top, edit, then plot just the bottom).
> Bot there is a hook to the plot.new function that can let us work
> around this.  Try the following:
>
> mypars <- list()
> updatepars <- function() {
> n <- length( .GlobalEnv$mypars )
> .GlobalEnv$mypars[[ n + 1 ]] <- par(no.readonly=TRUE)
> }
> setHook('before.plot.new', updatepars)
>
> par(mfrow=c(2,1))
> plot(runif(25),rnorm(25))
> hist(rnorm(1000))
>
> setHook('before.plot.new',NULL, 'replace' ) ## clean up
>
> par( mfg=c(1,1), plt=mypars[[2]]$plt, usr=mypars[[2]]$usr )
> abline( h=0, col='blue' )
>
>
> This creates a global variable "mypars" that is an empty list (we
> should really figure out a way without using the global, but my
> current thoughts would make this much more complicated, any
> suggestions are welcome).  Then it creates a small function that will
> add the current results of 'par' to that list.  Then this function is
> set as a hook to be run before 'plot.new' so that any new plot will
> first save the previous parameter settings.  Now we run the plotting
> commands and use the parameters that were saved into 'mypars'.  I
> chose to save all the parameters from every old plot in case more than
> what is shown is needed, this could be used to go back 3 or 4 plots if
> more than just 2 are plotted.
>
> Try this with pamr.plotcv to see if it works (you may need to set some
> additional parameters depending on what all pamr.plotcv does).
>
>
> Whether this is the easy solution or not can be debated.  Hope it helps,
>
>
>
>
> On Thu, Jun 12, 2014 at 9:06 AM, Luca Cerone <luca.cerone at gmail.com> wrote:
>> Dear all,
>> I am running some analysis using the pamr package (available on CRAN).
>>
>> One of the plots I produce is made using the function "pamr.plotcv".
>> This displays two plots in the same figure (using par(mfrow=c(2,1)).
>>
>> When the figure is created, I would like to be able to add some points
>> and lines, to the top plot.
>>
>> After producing the plot with pamr.cvplot, I have tried to add a line
>> doing something like:
>>
>> par(mfg=c(1,1))
>> lines(c(3,3), c(0,1), col = "blue", lty = 3)
>>
>> However this doesn't work and the line is shown in the bottom plot.
>> How can I add points and lines to the top plot?
>>
>> Thanks a lot in advance for the help,
>>
>> Cheers,
>> Luca
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>
>
> --
> Gregory (Greg) L. Snow Ph.D.
> 538280 at gmail.com



-- 
Luca Cerone

Tel: +34 692 06 71 28
Skype: luca.cerone


From macqueen1 at llnl.gov  Wed Jun 18 18:39:45 2014
From: macqueen1 at llnl.gov (MacQueen, Don)
Date: Wed, 18 Jun 2014 16:39:45 +0000
Subject: [R] empty density plot for point pattern in spatstat
In-Reply-To: <53A0B1C5.2080008@auckland.ac.nz>
References: <CAM+rpYnjg_SGnyGrVcwuakX1xmXd7ysy1gZntdn7m2zD=kqong@mail.gmail.com>
	<CAM+rpYmz8zWkZvpNX6--a+F6vu6p2JkjzzTeoWta+PZ1oKh6jA@mail.gmail.com>
	<53A0B1C5.2080008@auckland.ac.nz>
Message-ID: <CFC70B87.FCD63%macqueen1@llnl.gov>

On my system (see info at the end) the plot succeeds.

Can you plot other objects of class "im"?
(see ?im for examples)


Has it even been determined if the problem is with (a) the plotting
process, or (b) the structure of the object being plotted?


To check the structure of the object, you might wish to compare with:

> tmp <- density(redwood)
> class(tmp)
[1] "im"

> str(tmp)
List of 10
 $ v     : num [1:128, 1:128] 12.8 13.2 13.7 14.2 14.7 ...
 $ dim   : int [1:2] 128 128
 $ xrange: num [1:2] 0 1
 $ yrange: num [1:2] -1 0
 $ xstep : num 0.00781
 $ ystep : num 0.00781
 $ xcol  : num [1:128] 0.00391 0.01172 0.01953 0.02734 0.03516 ...
 $ yrow  : num [1:128] -0.996 -0.988 -0.98 -0.973 -0.965 ...
 $ type  : chr "real"
 $ units :List of 3
  ..$ singular  : chr "unit"
  ..$ plural    : chr "units"
  ..$ multiplier: num 1
  ..- attr(*, "class")= chr "units"
 - attr(*, "class")= chr "im"
 - attr(*, "sigma")= num 0.125



Using tmp as created above, does
   image(list(x=tmp$xcol, y=tmp$yrow, z=t(tmp$v)),asp=1)
succeed?




> version
               _   
platform       x86_64-apple-darwin10.8.0
arch           x86_64
os             darwin10.8.0
system         x86_64, darwin10.8.0
status             
major          3   
minor          0.2 
year           2013
month          09  
day            25  
svn rev        63987
language       R   
version.string R version 3.0.2 (2013-09-25)
nickname       Frisbee Sailing

spatstat 1.36-0


-- 
Don MacQueen

Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062





On 6/17/14 2:23 PM, "Rolf Turner" <r.turner at auckland.ac.nz> wrote:

>On 18/06/14 03:49, Christopher W Ryan wrote:
>> I upgraded to version 3.1.0 of R, still on Win XP, but that did not
>> solve the problem:
>>
>> library(spatstat)
>> data(redwood)
>> str(redwood)
>> plot(redwood)  # works OK
>> plot(Kest(redwood))  # works OK
>> plot(density(redwood))  # produces an "empty" plot
>>                                         # with just the figure border
>>                                         # and a thin vertical box for
>> the color ramp
>>                                         # but no color ramp in it
>>
>> Any other ideas? I'd be much obliged.
>
>I have had an inquiry of this nature previously and sad to say was
>completely unable to find a solution.  I made numerous suggestions to
>the inquirer, e.g.:
>
>*looking for a plot.im() function masking the "real"
>plot.im() function from spatstat
>
>* cleaning out the global environment
>(.RData) in case there were some "artefacts" hanging around that had an
>impact on plot.im()
>
>* completely *removing* .RData and starting again,...
>
>Nothing worked.
>
>It is very difficult to diagnose a problem like this remotely.  If you
>could find an R guru who was able to come and sit with you at your
>computer it is ***just possible*** that they could track down what is
>going wrong.
>
>However it seems to me that the problem is due to some sort of
>recalcitrance of the Windoze system and is thus probably insoluble.
>
>I am cc-ing this to the person who made the previous inquiry.  Pablo,
>have there been any further developments since we last communicated
>about this problem?
>
>cheers,
>
>Rolf Turner
>
>P. S. BTW Chris:  Does plot.im() screw up with other images?  E.g. what
>happens if you do
>
>with(bei.extra,plot(elev))
>
>???
>
>R. T.
>
>______________________________________________
>R-help at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From lmramba at ufl.edu  Wed Jun 18 18:41:02 2014
From: lmramba at ufl.edu (Laz)
Date: Wed, 18 Jun 2014 12:41:02 -0400
Subject: [R] How can I avoid the for and If loops in my function?
Message-ID: <53A1C11E.7040109@ufl.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140618/05140369/attachment.pl>

From 538280 at gmail.com  Wed Jun 18 18:58:01 2014
From: 538280 at gmail.com (Greg Snow)
Date: Wed, 18 Jun 2014 10:58:01 -0600
Subject: [R] Add points to subplots
In-Reply-To: <CAFnz2-8LzVZV6=DK3WdGxrzJaxwsvYqZbUd2SLQunaSdn5Jdug@mail.gmail.com>
References: <CAFnz2-9Ljo6y2LM_BUvGosYtyt2yZ0Bjx9K93PifNySgC6djKA@mail.gmail.com>
	<CAFEqCdwvn=KnFmfPy3DyVtO3FQYHyKAXoRD6qdyVwDNyRrYQLg@mail.gmail.com>
	<CAFnz2-8LzVZV6=DK3WdGxrzJaxwsvYqZbUd2SLQunaSdn5Jdug@mail.gmail.com>
Message-ID: <CAFEqCdzA4Mfr6=uhDU4d5bZE7bomjmVzUmtwZfozveXe3kDzrw@mail.gmail.com>

There is a subplot function in the TeachingDemos package, but its
purpose is to put a small plot somewhere inside of a large plot.  You
can use it to position 2 plots on a blank plot.  It does return the
information that you need to then go back and modify the individual
plots.  However, it does not work for a plotting function that itself
splits the plotting area into multiple plots (the split.screen option
will have the same problem).

If the function that you are running does "par(mfrow=c(2,1))"
internally then it will not play nicely with the other options.  If
the function just produces 2 plots and expects you to have run the par
command yourself (either mfrow or ask=TRUE, etc.) then you have more
options.  However if you use the split.screen functions then you will
need to have a way to call screen() before the 2nd plot.  The setHook
option may work for you there.

On Wed, Jun 18, 2014 at 10:15 AM, Luca Cerone <luca.cerone at gmail.com> wrote:
> Hi Greg and Jim.
> In the end I solved by modifying the function.
> I was just wondering if there is some function similar to Matlab's subplot,
> which let you change the active plot.
>
> Next time I will run in the same issue I will try the split.screen
> function proposed by Jim.
>
> Thanks a lot for the help,
> Cheers,
> Luca
>
> 2014-06-17 18:00 GMT+02:00 Greg Snow <538280 at gmail.com>:
>> I am not familiar with the pamr.plotcv function, but in general if it
>> uses par(mfrow=c(2,1)) to set up for the multiple plots then your
>> problem with going back to the first plot is that you have lost the
>> other information (such as user coordinates) needed to add to the 1st
>> plot.  You can see that with the following base graphics commands:
>>
>> par(mfrow=c(2,1))
>> plot(runif(25),rnorm(25))
>> tmp <- par(no.readonly=TRUE)
>> hist(rnorm(1000))
>>
>> par(mfg=c(1,1))
>> abline(h=0, col='red')
>>
>> The horizontal line is at what would be 0 in the lower plot, not the
>> upper.  Since I saved the graphics parameters I can do the correct
>> thing with a command like:
>>
>> par(mfg=c(1,1), plt=tmp$plt, usr=tmp$usr)
>> abline(h=0, col='blue')
>>
>> You can see the new line is in the correct place.
>>
>> Looking at the help for pamr.plotcv it does not look like it has any
>> nice built-in ways to save the plotting parameters (some functions
>> would let you plot just the top, edit, then plot just the bottom).
>> Bot there is a hook to the plot.new function that can let us work
>> around this.  Try the following:
>>
>> mypars <- list()
>> updatepars <- function() {
>> n <- length( .GlobalEnv$mypars )
>> .GlobalEnv$mypars[[ n + 1 ]] <- par(no.readonly=TRUE)
>> }
>> setHook('before.plot.new', updatepars)
>>
>> par(mfrow=c(2,1))
>> plot(runif(25),rnorm(25))
>> hist(rnorm(1000))
>>
>> setHook('before.plot.new',NULL, 'replace' ) ## clean up
>>
>> par( mfg=c(1,1), plt=mypars[[2]]$plt, usr=mypars[[2]]$usr )
>> abline( h=0, col='blue' )
>>
>>
>> This creates a global variable "mypars" that is an empty list (we
>> should really figure out a way without using the global, but my
>> current thoughts would make this much more complicated, any
>> suggestions are welcome).  Then it creates a small function that will
>> add the current results of 'par' to that list.  Then this function is
>> set as a hook to be run before 'plot.new' so that any new plot will
>> first save the previous parameter settings.  Now we run the plotting
>> commands and use the parameters that were saved into 'mypars'.  I
>> chose to save all the parameters from every old plot in case more than
>> what is shown is needed, this could be used to go back 3 or 4 plots if
>> more than just 2 are plotted.
>>
>> Try this with pamr.plotcv to see if it works (you may need to set some
>> additional parameters depending on what all pamr.plotcv does).
>>
>>
>> Whether this is the easy solution or not can be debated.  Hope it helps,
>>
>>
>>
>>
>> On Thu, Jun 12, 2014 at 9:06 AM, Luca Cerone <luca.cerone at gmail.com> wrote:
>>> Dear all,
>>> I am running some analysis using the pamr package (available on CRAN).
>>>
>>> One of the plots I produce is made using the function "pamr.plotcv".
>>> This displays two plots in the same figure (using par(mfrow=c(2,1)).
>>>
>>> When the figure is created, I would like to be able to add some points
>>> and lines, to the top plot.
>>>
>>> After producing the plot with pamr.cvplot, I have tried to add a line
>>> doing something like:
>>>
>>> par(mfg=c(1,1))
>>> lines(c(3,3), c(0,1), col = "blue", lty = 3)
>>>
>>> However this doesn't work and the line is shown in the bottom plot.
>>> How can I add points and lines to the top plot?
>>>
>>> Thanks a lot in advance for the help,
>>>
>>> Cheers,
>>> Luca
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>>
>>
>> --
>> Gregory (Greg) L. Snow Ph.D.
>> 538280 at gmail.com
>
>
>
> --
> Luca Cerone
>
> Tel: +34 692 06 71 28
> Skype: luca.cerone
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com


From cleberchaves at gmail.com  Wed Jun 18 19:28:07 2014
From: cleberchaves at gmail.com (Cleber Chaves)
Date: Wed, 18 Jun 2014 14:28:07 -0300
Subject: [R] Pairwise Tukey test with letter in descending order
In-Reply-To: <2906192.6Ob95qt3K8@localhost.localdomain>
References: <CAF-5dnsQxT1UeJ9s=DRi_5ZPYJp64hoDO_19pKEn5unV=_aaDg@mail.gmail.com>
	<2906192.6Ob95qt3K8@localhost.localdomain>
Message-ID: <CAF-5dnuw-89g-QGOF9JQinr7wDmYWbXQjY3GE4NAd9_vTDkEzA@mail.gmail.com>

Um texto embutido e sem conjunto de caracteres especificado foi limpo...
Nome: n?o dispon?vel
Url: <https://stat.ethz.ch/pipermail/r-help/attachments/20140618/6c0fa840/attachment.pl>

From alex at chaotic-neutral.de  Wed Jun 18 19:36:58 2014
From: alex at chaotic-neutral.de (Alexander Engelhardt)
Date: Wed, 18 Jun 2014 19:36:58 +0200
Subject: [R] mgcv: I can't manually reconstruct a P-spline from a GAM's
 coefficients
In-Reply-To: <53A155E3.2090509@bath.ac.uk>
References: <53A05358.2020100@chaotic-neutral.de> <53A155E3.2090509@bath.ac.uk>
Message-ID: <53A1CE3A.30502@chaotic-neutral.de>

Hello Simon,

thanks for your response!

I incorporated the intercept, i.e. coef(my_gam)[1] into the spline. That 
is, my B-spline coefficients are the intercept for the first one, and 
for all others I added the intercept to them (see the code below if I'm 
not clear)

Now I *almost* reproduce the spline:

http://i.imgur.com/pDZuHev.png

The red line is what plot(gam) does, the black line is my manual 
reproduction.
Could you hint me towards where my mistake is?

Best wishes,
  Alex

New code:

my_gam <- gam(y~s(x, bs="ps", m=m, k=length(myknots)-m-2), 
knots=list(x=myknots))

intercept <- coef(my_gam)[1]
coefs <- rep(NA, length(coef(my_gam)))
coefs[1]  <- intercept
coefs[-1] <- intercept + coef(my_gam)[-1]

spline_y <- construct_bspline(x, my_gam$smooth[[1]]$knots, coefs, m)

plot(my_gam, lwd=2, col="red")
lines(x,spline_y - mean(spline_y))  # subtract mean(spline_y) to have it 
centered around 0


On 06/18/2014 11:03 AM, Simon Wood wrote:
> mgcv:gam automatically imposes sum-to-zero constraints on the smooths in
> a model (even if there is only one smooth). This is to avoid lack of
> identifiability with the intercept. The constraint removes one
> coefficient and shifts the curve...
>
> best,
> Simon
>
> On 17/06/14 15:40, Alexander Engelhardt wrote:
>> Hello R-helpers,
>>
>> I am working through Simon Wood's GAM book and want to specify my own
>> knot locations (on even tens, i.e. 10, 20, 30, etc.). Then, I want to
>> compute a GAM on that area, and given the coefficients, reconstruct the
>> same P-spline that is drawn in plot(my_gam).
>>
>> I'm failing.
>> Here is what I am doing. I think the two plot calls at the end should
>> produce the same line, but they don't:
>>
>>
>> bspline <- function(x,k,i,m=2){
>>      ## "draws" one B-spline basis function
>>      ## order of splines is m+1, i.e. m=2 means cubic splines of order 3
>>      if(m==-1){
>>          res <- as.numeric(x<k[i+1] & x>=k[i])
>>      } else {
>>          z0 <- (x-k[i]) / (k[i+m+1]-k[i])
>>          z1 <- (k[i+m+2]-x)/(k[i+m+2]-k[i+1])
>>          res <- z0*bspline(x,k,i,m-1) + z1*bspline(x,k,i+1,m-1)
>>      }
>>      res
>> }
>>
>> construct_bspline <- function(x, knots, coefs, m){
>>      ## Constructs a complete spline from a set of knots and coefficients
>>      y <- rep(0, times=length(x))
>>      for(i in seq(coefs)){
>>          coef <- coefs[i]
>>          y <- y + coefs[i] * bspline(x, knots, i, m)
>>      }
>>      y
>> }
>>
>> span_knots <- function(start, end, h, m){
>>      ## create knots of distance 'h' from 'start' to 'end',
>>      ##  to use with B-splines of order m+1
>>      first_knot <- start - start%%h - (m+1)*h
>>      last_knot <- end-1 + (h - (end-1)%%h) + (m+1)*h
>>
>>      knots <- seq(first_knot, last_knot, by=h)
>>      knots
>> }
>>
>> ## create data:
>> x <- 125:197
>> y <- cos(sqrt(40*x)/3) + 3  # mean=3, s(0)=4
>> plot(x,y)
>>
>> m <- 2  # use cubic splines of order m+1=3
>>
>> myknots <- span_knots(start=min(x), end=max(x), h=10, m=m)
>>
>> ## Why do I have to set 'k' to length(myknots)-m-2 here? According to
>> the book, it should be length(myknots)-m-1.
>> my_gam <- gam(y~s(x, bs="ps", m=m, k=length(myknots)-m-2),
>> knots=list(x=myknots))
>>
>> ## Here, I construct my own spline with the coefficients of the GAM,
>> except coef()[1] which is the intercept
>> spline_y <- construct_bspline(x, my_gam$smooth[[1]]$knots,
>> coef(my_gam)[-1], mm)
>>
>> plot(my_gam)
>> lines(x,spline_y)  # why is this different? It seems shifted on the x-
>> and y-axis
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>


From lmramba at ufl.edu  Wed Jun 18 21:14:17 2014
From: lmramba at ufl.edu (Mramba,Lazarus K)
Date: Wed, 18 Jun 2014 15:14:17 -0400
Subject: [R] How can I avoid the for and If loops in my function?
In-Reply-To: <7cab8b4d-0293-4de5-8af8-f15e05cc0408@email.android.com>
References: <53A1C11E.7040109@ufl.edu>
	<7cab8b4d-0293-4de5-8af8-f15e05cc0408@email.android.com>
Message-ID: <9ec21daf6bb770e1f20cc2cd3921afba@ufl.edu>

Hi R-users,

### reproducible example:

library(gmp)
library(matlab)
library(Matrix)
library(foreach)
library(MASS)
library(mvtnorm)

#####################################
## A function to create a field experiment
## Returns a data frame, called matdf
######################################

setup<-function(b,g,rb,cb,r,c)
{
   # where
   # b   = number of blocks
   # g   = number of treatments per block
   # rb  = number of rows per block
   # cb  = number of columns per block
   # r   = total number of rows for the layout
   # c   = total number of columns for the layout

   ### Check points
   stopifnot(is.numeric(b),is.whole(b),is.numeric(g),g>1)
   ## Compatibility checks
   genot<<-seq(1,g,1)
   stopifnot(rb*cb==length(genot),r/rb * c/cb == b)
   ## Generate the design
   genotypes<-times(b) %do% sample(genot,g)
   block<-rep(1:b,each=length(genot))
   genotypes<-factor(genotypes)
   block<-factor(block)
   ### generate the base design
   k<-c/cb # number of blocks on the x-axis
   y<-rep(rep(1:r,each=cb),k)  # X-coordinate
   #w<-rb
   l<-cb
   p<-r/rb
   m<-l+1
   d<-l*b/p
   x<-c(rep(1:l,r),rep(m:d,r)) # Y-coordinate
   ## compact
   matdf<-data.frame(x,y,block,genotypes)
   matdf[order(matdf$x),]
}

#########################################################################
## a function to calculate trace from the original data frame
## Returns trace of the variance-covariance matrix, named C22
######################################################################

mainF<-function(matdf,h2=h2,rhox=rhox,rhoy=rhoy,ped="F",s2e=1,c=c,r=r)
{
   N<-nrow(matdf)
   ## Identity matrices
   X<<-model.matrix(~matdf$block)
   s2g<-varG(s2e,h2)
   ## calculate G and Z
   IG<<-(1/s2g)*eye(length(genot))
   z<-model.matrix(~matdf$genotypes-1) # changes everytime there is a 
swap
   ## calculate R and IR
   # rhox=rhoy=0.3;s2e=1

   # # calculate R and IR
   sigx <- diag(c)
   sigx <- rhox^ abs(row(sigx) - col(sigx))
   sigy <- diag(r)
   sigy <- rhoy ^ abs(row(sigy) - col(sigy))
   R<- s2e * kronecker(sigx, sigy)  # takes 0.01 second
   ################
   # find inverse of R by choleski decomposition
   IR<<-chol2inv(chol(R)) # takes about 20 seconds

   ####
   #### brute force matrix multiplication
   C11<-t(X)%*%IR%*%X
   C11inv<-chol2inv(chol(C11))
   k1<<-IR%*%X # 0.2 seconds
   k2<-C11inv%*%t(X) # 0 seconds
   k3<-k2%*%IR # 0.2 seconds
   K<<-k1%*%k3 # 0.16 seconds

   ### Variance covariance matrices
   temp<-t(z)%*%IR%*%z+IG - t(z)%*%K%*%z

   C22<-chol2inv(chol(temp))
   ##########################
   ##   Optimality Criteria
   #########################
   traceI=sum(diag(C22)) # A-Optimality
   traceI
}

## ################################################
### My function to randomly swap two elements in the same block of a 
dataframe
### returns a dataframe, called newmatdf
####################################################
swapsimple<-function(matdf)
{
   ## now, new design after swapping is
   attach(matdf,warn.conflict=FALSE)
   b1<-sample(matdf$block,1,replace=TRUE);b1
   gg1<-matdf$genotypes[block==b1];gg1
   g1<-sample(gg1,2);g1
   samp<-Matrix(c(g1=g1,block=b1),nrow=1,ncol=3,
                dimnames=list(NULL,c("gen1","gen2","block")));samp
   newGen<-matdf$genotypes
   newG<-ifelse(matdf$genotypes==samp[,1] & 
block==samp[,3],samp[,2],matdf$genotypes)
   NewG<-ifelse(matdf$genotypes==samp[,2] & 
block==samp[,3],samp[,1],newG)
   NewG<-factor(NewG)
   ## now, new design after swapping is
   newmatdf<-cbind(matdf,NewG)
   newmatdf<-as.data.frame(newmatdf)
   names(newmatdf)[names(newmatdf)=="genotypes"] <- "old_G"
   names(newmatdf)[names(newmatdf)=="NewG"] <- "genotypes"
   #newmatdf <- remove.vars(newmatdf, "old_G")
   newmatdf$old_G <- newmatdf$old_G <- NULL
   newmatdf[order(newmatdf$x),]
}

#############################################################
### My function to re-calculate trace after swaping the pairs of 
elements
################################################

swapmainF<-function(newmatdf)
{
   Z<-model.matrix(~newmatdf$genotypes-1)
   ### Variance covariance matrices
   temp<-t(Z)%*%IR%*%Z+IG - t(Z)%*%K%*%Z
   C22<-chol2inv(chol(temp))
   ##########################
   ##   Optimality Criteria
   #########################
   traceI=sum(diag(C22)) # A-Optimality
   traceI
}

#######################################
#I need help in the function below
## I need to avoid the for loops and if loops here :
########################################################


########################################################
#Take an original matrix, called matrix0, calculate its trace. Generate
#a new matrix, called newmatdf after  swapping two elements of the  old
#one and  calculate the trace. If the trace of the newmatrix is smaller
#than that of the previous matrix, store both the current trace 
together with
#the older trace and their  iteration values. If the newer matrix has a
#trace larger than the previous trace, drop this trace and drop this
#matrix too (but count its iteration).
#Re-swap the old matrix that you stored previously and recalculate the
#trace. Repeat the process many times, say 10,000. The final results 
should be a list
#with the original initial matrix and its trace, the final best
#matrix that had the smallest trace after the 10000 simulations and a
#dataframe  showing the values of the accepted traces that
#were smaller than the previous and their respective iterations.
####################################################################

funF<- function(newmatdf,n,traceI)
{
   matrix0<-newmatdf
   trace<-traceI
   res <- list(mat = NULL, Design_best = newmatdf, Original_design = 
matrix0)
   res$mat <- rbind(res$mat, c(value = trace, iterations = 0))
   Des<-list()
   for(i in seq_len(n)){
     ifelse(i==1, 
newmatdf<-swapsimple(matrix0),newmatdf<-swapsimple(newmatdf))
     Des[[i]]<-newmatdf
     if(swapmainF(newmatdf) < trace){
       newmatdf<-Des[[i]]
       Des[[i]]<-newmatdf
       trace<- swapmainF(newmatdf)
       res$mat <- rbind(res$mat, c(trace = trace, iterations = i))
       res$Design_best <- newmatdf
     }
     if(swapmainF(newmatdf) > trace & nrow(res$mat)<=1){
       newmatdf<-matrix0
       Des[[i]]<-matrix0
       res$Design_best<-matrix0
     }
     if(swapmainF(newmatdf)> trace & nrow(res$mat)>1){
       newmatdf<-Des[[length(Des)-1]]
       Des[[i]]<-newmatdf
       res$Design_best<-newmatdf
     }
   }
   res
}



######################################
## Call the function setup, generate 100 designs,
## calculate their traces using the function mainF,
## choose the dataframe with the smallest trace
## store only that dataframe and its trace for later use
######################################
M2F<-function(D,ped="F",k=1,b,g,rb,cb,r,c,
               h2,rhox,rhoy,s2e=1)
{
   matrix0<-list()
   start0 <- c()
   value0 <- c()
   for (i in 1:D)
   {
     print(sprintf("generating initial design: %d", i, "complete\n", 
sep=""))
     flush.console()
     matrix0[[i]]<-setup(b=b,g=g,rb=rb,cb=cb,r=r,c=c)
     
start0[i]<-mainF(matdf=matrix0[[i]],h2=h2,rhox=rhox,rhoy=rhoy,s2e=s2e,c=c,r=r)
     s<-which.min(start0)
     newmatdf<-matrix0[s][[1]]
     trace0<-start0[s][[1]]
   }
   list(newmatdf=newmatdf,start0=start0,trace0=trace0,index=s)
}

################################################
####  Test my functions ### works perfectly but takes too long
###########################################

b=16;g=196;rb=14;cb=14;r=56;c=56;h2=0.1;rhox=0.3;rhoy=0.3
h2=0.1;rhox=0.3;rhoy=0.3;s2e=1
#

tic() # takes  42.020000 seconds  for D==2. but for D==100 , takes 
about 30 minutes !!!
res1<-M2F(D=2,ped="F",k=1,b=b,g=g,rb=rb,cb=cb,r=r,c=c,
            h2=0.1,rhox=0.3,rhoy=0.3,s2e=1)
toc()

tic() # takes 37.720000 seconds for n==5 but I need for n==4000 or more 
takes >7hours
ans1<-funF(res1$newmatdf,traceI=res1$trace0,n=5)
toc()

ans1$mat

regards,
Laz


From a.hayward at sheffield.ac.uk  Wed Jun 18 21:17:35 2014
From: a.hayward at sheffield.ac.uk (Adam Hayward)
Date: Wed, 18 Jun 2014 20:17:35 +0100
Subject: [R] Publication-ready figures with two plots
Message-ID: <CALQiR096_SKpnxsNKEssPU_k0QkHf6bpF4ZVNQWGKdtL6QHcWQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140618/fe3f41ed/attachment.pl>

From jdnewmil at dcn.davis.CA.us  Wed Jun 18 20:25:37 2014
From: jdnewmil at dcn.davis.CA.us (Jeff Newmiller)
Date: Wed, 18 Jun 2014 11:25:37 -0700
Subject: [R] How can I avoid the for and If loops in my function?
In-Reply-To: <53A1C11E.7040109@ufl.edu>
References: <53A1C11E.7040109@ufl.edu>
Message-ID: <7cab8b4d-0293-4de5-8af8-f15e05cc0408@email.android.com>

I don't feel any need to help you if you won't read the Posting Guide and follow its guidance... specifically you provide explanation (good) but not a reproducible example (see e.g. [1]) and you are posting in HTML which often corrupts your code (and is definitely not a what-you-see-is-what-we-see format).

[1]  http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example
---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                      Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
--------------------------------------------------------------------------- 
Sent from my phone. Please excuse my brevity.

On June 18, 2014 9:41:02 AM PDT, Laz <lmramba at ufl.edu> wrote:
>Dear R-users,
>
>I have a 3200 by 3200 matrix that was build from a data frame that had 
>180 observations,  with variables: x, y, blocks (6 blocks) and 
>treatments (values range from 1 to 180) I am working on. I build other 
>functions that seem to work well. However, I have one function that has
>
>many If loops and a long For loop that delays my results for over 10 
>hours ! I need your help to avoid these loops.
>
>########################################################
>## I need to avoid these for loops and if loops here :
>########################################################
>### swapsimple() is a function that takes in a dataframe, randomly
>swaps 
>two elements from the same block in a data frame and generates a new 
>dataframe called newmatdf
>
>### swapmainF() is a function that calculates the trace of the final N 
>by N matrix considering the incident matrices and blocks and treatments
>
>and residual errors in a linear mixed model framework using Henderson 
>approach.
>
>funF<- function(newmatdf, n, traceI)
>{
># n = number of iterations (swaps to be made on pairs of elements of
>the 
>dataframe, called newmatdf)
># newmatdf : is the original dataframe with N rows, and 4 variables 
>(x,y,blocks,genotypes)
>   matrix0<-newmatdf
> trace<-traceI  ##  sum of the diagonal elements of the N by N matrix  
>(generated outside this loop) from the original newmatdf dataframe
>   res <- list(mat = NULL, Design_best = newmatdf, Original_design = 
>matrix0) # store our output of interest
>   res$mat <- rbind(res$mat, c(value = trace, iterations = 0)) # 
>initialized values
>   Des<-list()
>   for(i in seq_len(n)){
>     ifelse(i==1, 
>newmatdf<-swapsimple(matrix0),newmatdf<-swapsimple(newmatdf))
>     Des[[i]]<-newmatdf
>     if(swapmainF(newmatdf) < trace){
>       newmatdf<-Des[[i]]
>       Des[[i]]<-newmatdf
>       trace<- swapmainF(newmatdf)
>       res$mat <- rbind(res$mat, c(trace = trace, iterations = i))
>       res$Design_best <- newmatdf
>     }
>     if(swapmainF(newmatdf) > trace & nrow(res$mat)<=1){
>       newmatdf<-matrix0
>       Des[[i]]<-matrix0
>       res$Design_best<-matrix0
>     }
>     if(swapmainF(newmatdf)> trace & nrow(res$mat)>1){
>       newmatdf<-Des[[length(Des)-1]]
>       Des[[i]]<-newmatdf
>       res$Design_best<-newmatdf
>     }
>   }
>   res
>}
>
>
>
>The above function was created to:
>Take an original matrix, called matrix0, calculate its trace. Generate
>a new matrix, called newmatdf after  swapping two elements of the  old
>one and  calculate the trace. If the trace of the newmatrix is smaller
>than
>that of the previous matrix, store both the current trace together with
>the older trace and their  iteration values. If the newer matrix has a
>trace larger than the previous trace, drop this trace and drop this
>matrix too (but count its iteration).
>Re-swap the old matrix that you stored previously and recalculate the
>trace. Repeat the
>     process many times, say 10,000. The final results should be a list
>     with the original initial matrix and its trace, the final best
>   matrix that had the smallest trace after the 10000 simulations and a
>     dataframe  showing the values of the accepted traces that
>     were smaller than the previous and their respective iterations.
>
>$Original_design
>      x  y block genotypes
>1    1  1     1        29
>7    1  2     1         2
>13   1  3     1         8
>19   1  4     1        10
>25   1  5     1         9
>31   1  6     2        29
>37   1  7     2         4
>43   1  8     2        22
>49   1  9     2         3
>55   1 10     2        26
>61   1 11     3        18
>67   1 12     3        19
>73   1 13     3        28
>79   1 14     3        10
>------truncated ----
>
>
>the final results after running  funF<-
>     function(newmatdf,n,traceI)  given below looks like this:
>
>     
>       
>
>ans1
>$mat
>          value iterations
>  [1,] 1.474952          0
>  [2,] 1.474748          1
>  [3,] 1.474590          2
>  [4,] 1.474473          3
>  [5,] 1.474411          5
>  [6,] 1.474294         10
>  [7,] 1.474182         16
>  [8,] 1.474058         17
>  [9,] 1.473998         19
>[10,] 1.473993         22
>
>
>     ---truncated
>
>     
>
>     
>
>     
>       
>
>$Design_best
>      x  y block genotypes
>1    1  1     1        29
>7    1  2     1         2
>13   1  3     1        18
>19   1  4     1        10
>25   1  5     1         9
>31   1  6     2        29
>37   1  7     2        21
>43   1  8     2         6
>49   1  9     2         3
>55   1 10     2        26
>
>
>     ---- truncated
>
>     
>
>     
>       
>
>$Original_design
>      x  y block genotypes
>1    1  1     1        29
>7    1  2     1         2
>13   1  3     1         8
>19   1  4     1        10
>25   1  5     1         9
>31   1  6     2        29
>37   1  7     2         4
>43   1  8     2        22
>49   1  9     2         3
>55   1 10     2        26
>61   1 11     3        18
>67   1 12     3        19
>73   1 13     3        28
>79   1 14     3        10
>------truncated
>
>
>     
>Regards,
>Laz
>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From paramon at utpl.edu.ec  Wed Jun 18 15:36:38 2014
From: paramon at utpl.edu.ec (=?UTF-8?B?UGFibG8gUmFtw7Nu?=)
Date: Wed, 18 Jun 2014 08:36:38 -0500
Subject: [R] empty density plot for point pattern in spatstat
In-Reply-To: <53A0B1C5.2080008@auckland.ac.nz>
References: <CAM+rpYnjg_SGnyGrVcwuakX1xmXd7ysy1gZntdn7m2zD=kqong@mail.gmail.com>
	<CAM+rpYmz8zWkZvpNX6--a+F6vu6p2JkjzzTeoWta+PZ1oKh6jA@mail.gmail.com>
	<53A0B1C5.2080008@auckland.ac.nz>
Message-ID: <CAL7MysnyrphaRcxHUhNT1nuy7By2fHzdHrXyTY7EQ1UxG22kKg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140618/625f0020/attachment.pl>

From kustka at andromeda.rutgers.edu  Wed Jun 18 15:12:24 2014
From: kustka at andromeda.rutgers.edu (Adam Kustka)
Date: Wed, 18 Jun 2014 09:12:24 -0400
Subject: [R] a workaround for indexing a function?
Message-ID: <CACBS=yg2T=nxn6e-f=Q5pR4=8COcZap0wCRSz9F5cMxZpPm_1g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140618/cbc7e1e3/attachment.pl>

From kustka at andromeda.rutgers.edu  Wed Jun 18 19:26:29 2014
From: kustka at andromeda.rutgers.edu (Adam Kustka)
Date: Wed, 18 Jun 2014 13:26:29 -0400
Subject: [R] a workaround for indexing a function?
In-Reply-To: <CACBS=yg2T=nxn6e-f=Q5pR4=8COcZap0wCRSz9F5cMxZpPm_1g@mail.gmail.com>
References: <CACBS=yg2T=nxn6e-f=Q5pR4=8COcZap0wCRSz9F5cMxZpPm_1g@mail.gmail.com>
Message-ID: <CACBS=ygoeYsoGkp1cdzXi4HwGdy4tP2at=GMjpy1=FF=EN9QFA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140618/be658fe7/attachment.pl>

From jholtman at gmail.com  Wed Jun 18 21:49:11 2014
From: jholtman at gmail.com (jim holtman)
Date: Wed, 18 Jun 2014 15:49:11 -0400
Subject: [R] How can I avoid the for and If loops in my function?
In-Reply-To: <53A1C11E.7040109@ufl.edu>
References: <53A1C11E.7040109@ufl.edu>
Message-ID: <CAAxdm-5FZS1UqHzfZ2h7EOemkzqGwtUvaEvdypGkcggbou4hvA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140618/563e8f0f/attachment.pl>

From lmramba at ufl.edu  Wed Jun 18 22:00:15 2014
From: lmramba at ufl.edu (lmramba)
Date: Wed, 18 Jun 2014 20:00:15 GMT
Subject: [R] How can I avoid the for and If loops in my function?
Message-ID: <201406182000.s5IK0HT2003617@smtp.ufl.edu>


   Hi Jim. If I avoid the dataframe, how can use the function model.matrix() to
   build the incident matrices X, And Z? I tried saving the design as matrix
   but ghen I got the wrong design matrix.


   Thanks.

   Laz


   Sent from my LG Optimus G?, an AT&T 4G LTE smartphone
   ------ Original message ------
   From: jim holtman
   Date: 6/18/2014 3:49 PM
   To: Laz;
   Cc: R mailing list;
   Subject:Re: [R] How can I avoid the for and If loops in my function?

   First order of business, without looking in detail at the code, is to avoid
   the use of dataframes.  If all your values are numerics, then use a matrix.
    It will be faster execution.
   I did see the following statements:
          newmatdf<-Des[[i]]
          Des[[i]]<-newmatdf
   why are you just putting back what you pulled out of the list?

   Jim Holtman
   Data Munger Guru

   What is the problem that you are trying to solve?
   Tell me what you want to do, not how you want to do it.
   On Wed, Jun 18, 2014 at 12:41 PM, Laz <[1]lmramba at ufl.edu> wrote:

     Dear R-users,
     I have a 3200 by 3200 matrix that was build from a data frame that had
     180 observations,  with variables: x, y, blocks (6 blocks) and
     treatments (values range from 1 to 180) I am working on. I build other
     functions that seem to work well. However, I have one function that has
     many If loops and a long For loop that delays my results for over 10
     hours ! I need your help to avoid these loops.
     ########################################################
     ## I need to avoid these for loops and if loops here :
     ########################################################
     ### swapsimple() is a function that takes in a dataframe, randomly swaps
     two elements from the same block in a data frame and generates a new
     dataframe called newmatdf
     ### swapmainF() is a function that calculates the trace of the final N
     by N matrix considering the incident matrices and blocks and treatments
     and residual errors in a linear mixed model framework using Henderson
     approach.
     funF<- function(newmatdf, n, traceI)
     {
     # n = number of iterations (swaps to be made on pairs of elements of the
     dataframe, called newmatdf)
     # newmatdf : is the original dataframe with N rows, and 4 variables
     (x,y,blocks,genotypes)
        matrix0<-newmatdf
        trace<-traceI  ##  sum of the diagonal elements of the N by N matrix
     (generated outside this loop) from the original newmatdf dataframe
        res <- list(mat = NULL, Design_best = newmatdf, Original_design =
     matrix0) # store our output of interest
        res$mat <- rbind(res$mat, c(value = trace, iterations = 0)) #
     initialized values
        Des<-list()
        for(i in seq_len(n)){
          ifelse(i==1,
     newmatdf<-swapsimple(matrix0),newmatdf<-swapsimple(newmatdf))
          Des[[i]]<-newmatdf
          if(swapmainF(newmatdf) < trace){
            newmatdf<-Des[[i]]
            Des[[i]]<-newmatdf
            trace<- swapmainF(newmatdf)
            res$mat <- rbind(res$mat, c(trace = trace, iterations = i))
            res$Design_best <- newmatdf
          }
          if(swapmainF(newmatdf) > trace & nrow(res$mat)<=1){
            newmatdf<-matrix0
            Des[[i]]<-matrix0
            res$Design_best<-matrix0
          }
          if(swapmainF(newmatdf)> trace & nrow(res$mat)>1){
            newmatdf<-Des[[length(Des)-1]]
            Des[[i]]<-newmatdf
            res$Design_best<-newmatdf
          }
        }
        res
     }
     The above function was created to:
          Take  an original matrix, called matrix0, calculate its trace.
     Generate a new matrix, called newmatdf after  swapping two elements of the
      old one and  calculate the trace. If the trace of the newmatrix is
     smaller than
          that of the previous matrix, store both the current trace together
     with the older trace and their  iteration values. If the newer matrix has
     a trace larger than the previous trace, drop this trace and drop this
     matrix too (but count its iteration).
          Re-swap the old matrix that you stored previously and recalculate the
     trace. Repeat the
          process many times, say 10,000. The final results should be a list
          with the original initial matrix and its trace, the final best
          matrix that had the smallest trace after the 10000 simulations and a
          dataframe  showing the values of the accepted traces that
          were smaller than the previous and their respective iterations.
     $Original_design
           x  y block genotypes
     1    1  1     1        29
     7    1  2     1         2
     13   1  3     1         8
     19   1  4     1        10
     25   1  5     1         9
     31   1  6     2        29
     37   1  7     2         4
     43   1  8     2        22
     49   1  9     2         3
     55   1 10     2        26
     61   1 11     3        18
     67   1 12     3        19
     73   1 13     3        28
     79   1 14     3        10
     ------truncated ----
     the final results after running  funF<-
          function(newmatdf,n,traceI)  given below looks like this:
     ans1
     $mat
               value iterations
       [1,] 1.474952          0
       [2,] 1.474748          1
       [3,] 1.474590          2
       [4,] 1.474473          3
       [5,] 1.474411          5
       [6,] 1.474294         10
       [7,] 1.474182         16
       [8,] 1.474058         17
       [9,] 1.473998         19
     [10,] 1.473993         22
          ---truncated
     $Design_best
           x  y block genotypes
     1    1  1     1        29
     7    1  2     1         2
     13   1  3     1        18
     19   1  4     1        10
     25   1  5     1         9
     31   1  6     2        29
     37   1  7     2        21
     43   1  8     2         6
     49   1  9     2         3
     55   1 10     2        26
          ---- truncated
     $Original_design
           x  y block genotypes
     1    1  1     1        29
     7    1  2     1         2
     13   1  3     1         8
     19   1  4     1        10
     25   1  5     1         9
     31   1  6     2        29
     37   1  7     2         4
     43   1  8     2        22
     49   1  9     2         3
     55   1 10     2        26
     61   1 11     3        18
     67   1 12     3        19
     73   1 13     3        28
     79   1 14     3        10
     ------truncated
     Regards,
     Laz
             [[alternative HTML version deleted]]
     ______________________________________________
     [2]R-help at r-project.org mailing list
     [3]https://stat.ethz.ch/mailman/listinfo/r-help
     PLEASE do read the posting
     guide [4]http://www.R-project.org/posting-guide.html
     and provide commented, minimal, self-contained, reproducible code.

References

   1. mailto:lmramba at ufl.edu
   2. mailto:R-help at r-project.org
   3. https://stat.ethz.ch/mailman/listinfo/r-help
   4. http://www.R-project.org/posting-guide.html

From ccberry at ucsd.edu  Wed Jun 18 23:28:36 2014
From: ccberry at ucsd.edu (Charles Berry)
Date: Wed, 18 Jun 2014 21:28:36 +0000
Subject: [R] Publication-ready figures with two plots
References: <CALQiR096_SKpnxsNKEssPU_k0QkHf6bpF4ZVNQWGKdtL6QHcWQ@mail.gmail.com>
Message-ID: <loom.20140618T232410-712@post.gmane.org>

Adam Hayward <a.hayward <at> sheffield.ac.uk> writes:

> 
> Hi all,
> 
> I have quite a specific problem with producing 300ppi plots in tiff format
> for publication. I have found ggsave to work beautifully with a single
> plot, which can then be exported to GIMP to compress the resulting large
> tiff file. However, 

[tale of failure to montage two plots deleted]

> 
> I will also have a figure which does not use ggplot, but consists of three
> plots produced with barplot2 and matplot, but presumably this faces a
> similar problem. Essentially, could anyone suggest a way of translating
> what appears in the plot appearing in the plot window (I use RStudio) to a
> high-resolution tiff file with as little fuss as possible?
> 


I you do not get a reply that shows how to do this natively in R, Google

   "GIMP montage"

and follow the directions, or use the 'montage' command line tool from 
imagemagick.

HTH,

Chuck


From r.turner at auckland.ac.nz  Thu Jun 19 00:53:02 2014
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Thu, 19 Jun 2014 10:53:02 +1200
Subject: [R] empty density plot for point pattern in spatstat
In-Reply-To: <CFC70B87.FCD63%macqueen1@llnl.gov>
References: <CAM+rpYnjg_SGnyGrVcwuakX1xmXd7ysy1gZntdn7m2zD=kqong@mail.gmail.com>
	<CAM+rpYmz8zWkZvpNX6--a+F6vu6p2JkjzzTeoWta+PZ1oKh6jA@mail.gmail.com>
	<53A0B1C5.2080008@auckland.ac.nz>
	<CFC70B87.FCD63%macqueen1@llnl.gov>
Message-ID: <53A2184E.1040904@auckland.ac.nz>



Don,

Pablo and I have been through all that.  The structure of the "im" 
object was fine.  I had no problem at all plotting the image on my 
system.  Pablo could get nothing but blank plots on his system.  The 
problem arose, as he said in a post just now, only on his personal machine.

The problem seems to be peculiar to Windoze XP.  I've no idea just how 
or why it arises however.  Without being able to sit down at Pablo's 
machine (or Chris's machine) and experiment, it is very hard to diagnose 
the problem.

cheers,

Rolf

On 19/06/14 04:39, MacQueen, Don wrote:

> On my system (see info at the end) the plot succeeds.
>
> Can you plot other objects of class "im"?
> (see ?im for examples)
>
>
> Has it even been determined if the problem is with (a) the plotting
> process, or (b) the structure of the object being plotted?
>
>
> To check the structure of the object, you might wish to compare with:
>
>> tmp <- density(redwood)
>> class(tmp)
> [1] "im"
>
>> str(tmp)
> List of 10
>   $ v     : num [1:128, 1:128] 12.8 13.2 13.7 14.2 14.7 ...
>   $ dim   : int [1:2] 128 128
>   $ xrange: num [1:2] 0 1
>   $ yrange: num [1:2] -1 0
>   $ xstep : num 0.00781
>   $ ystep : num 0.00781
>   $ xcol  : num [1:128] 0.00391 0.01172 0.01953 0.02734 0.03516 ...
>   $ yrow  : num [1:128] -0.996 -0.988 -0.98 -0.973 -0.965 ...
>   $ type  : chr "real"
>   $ units :List of 3
>    ..$ singular  : chr "unit"
>    ..$ plural    : chr "units"
>    ..$ multiplier: num 1
>    ..- attr(*, "class")= chr "units"
>   - attr(*, "class")= chr "im"
>   - attr(*, "sigma")= num 0.125
>
>
>
> Using tmp as created above, does
>     image(list(x=tmp$xcol, y=tmp$yrow, z=t(tmp$v)),asp=1)
> succeed?
>
>
>
>
>> version
>                 _
> platform       x86_64-apple-darwin10.8.0
> arch           x86_64
> os             darwin10.8.0
> system         x86_64, darwin10.8.0
> status
> major          3
> minor          0.2
> year           2013
> month          09
> day            25
> svn rev        63987
> language       R
> version.string R version 3.0.2 (2013-09-25)
> nickname       Frisbee Sailing
>
> spatstat 1.36-0


From r.turner at auckland.ac.nz  Thu Jun 19 01:10:54 2014
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Thu, 19 Jun 2014 11:10:54 +1200
Subject: [R] empty density plot for point pattern in spatstat
In-Reply-To: <CAL7MysnyrphaRcxHUhNT1nuy7By2fHzdHrXyTY7EQ1UxG22kKg@mail.gmail.com>
References: <CAM+rpYnjg_SGnyGrVcwuakX1xmXd7ysy1gZntdn7m2zD=kqong@mail.gmail.com>
	<CAM+rpYmz8zWkZvpNX6--a+F6vu6p2JkjzzTeoWta+PZ1oKh6jA@mail.gmail.com>
	<53A0B1C5.2080008@auckland.ac.nz>
	<CAL7MysnyrphaRcxHUhNT1nuy7By2fHzdHrXyTY7EQ1UxG22kKg@mail.gmail.com>
Message-ID: <53A21C7E.9050805@auckland.ac.nz>

On 19/06/14 01:36, Pablo Ram?n wrote:
> Dear Rolf,
>
> The problem persists with the function plot.im <http://plot.im>(), or
> plot (density ()), similar to with(bei.extra, plot (elev)). This problem
> occurs only with my personal machine, to another machine this problem
> does not occur. However, when I use another function, such kde2d () in
> the MASS package and perform the plot, the graph is obtained without
> problem.

Thanks for getting back to me Pablo.  I think that we had previously 
established that image() --- which is what you would use to plot the 
object returned by kde2d() --- did produce non-blank plots for you when 
properly applied to "im" objects on your computer.  But somehow when 
image() gets applied inside plot.im() something mysterious --- in fact 
downright impossible!!! --- happens and no plot is produced.

The mystery remains.

cheers,

Rolf


From jholtman at gmail.com  Thu Jun 19 01:59:19 2014
From: jholtman at gmail.com (jim holtman)
Date: Wed, 18 Jun 2014 19:59:19 -0400
Subject: [R] How can I avoid the for and If loops in my function?
In-Reply-To: <201406182000.s5IK0HT2003617@smtp.ufl.edu>
References: <201406182000.s5IK0HT2003617@smtp.ufl.edu>
Message-ID: <CAAxdm-7ESrosh1FTOHEpav8jgyjw_0oAaouB2qwDvJbHVqu_Dg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140618/eb03ea41/attachment.pl>

From dwinsemius at comcast.net  Thu Jun 19 02:03:09 2014
From: dwinsemius at comcast.net (David Winsemius)
Date: Wed, 18 Jun 2014 17:03:09 -0700
Subject: [R] a workaround for indexing a function?
In-Reply-To: <CACBS=ygoeYsoGkp1cdzXi4HwGdy4tP2at=GMjpy1=FF=EN9QFA@mail.gmail.com>
References: <CACBS=yg2T=nxn6e-f=Q5pR4=8COcZap0wCRSz9F5cMxZpPm_1g@mail.gmail.com>
	<CACBS=ygoeYsoGkp1cdzXi4HwGdy4tP2at=GMjpy1=FF=EN9QFA@mail.gmail.com>
Message-ID: <04BF234D-4C59-4F0E-9E18-7D4BA66AFE0B@comcast.net>

See this?

	`[[alternative HTML version deleted]]`

Means your efforts at including data have been sabotaged by failing to read the Posting guide and send plain text.

Then this line:    median[i] = median(normHL)

Gets you:
> Error in median[i] = median(normHL) :
> 
>  object of type 'closure' is not subsettable

Were you under the impression that assignment to an indexed vector with a name would succeed when the vector had not already been pre-defined? R was interpreting that as assignment to an object named 'median' which it was able to find. The error was thrown because the located object is a function (aka closure).

Better would be to chose a more specific object name and not one shared by a regular function. That also means you would have gotten the same error with objects named `df` (the density of the F distribution), `dt` (the t-distribution), `c` (the concatenation function), `C` (the contrasts function), `D` (the derivative function)...... getting the idea that using one or two letter names might be fraught with confusion?

Try using 

 nor_med <- numeric(0)  # before the loop and then in the loop use:

  nor_med[i] = median(normHL)

-- 
david.

On Jun 18, 2014, at 10:26 AM, Adam Kustka wrote:

> I noticed a missing line in the code associated with my question.  I've
> re-supplied the question now with that line.
> 
> Sorry for the trouble,
> Adam
> 
> ************
> 
> 
> 
> I have a dataset of peptide 15N/14N ratios from four experiments (where
> cells are grown under different conditions and were fed either 15N or 14N
> nitrate aka plant food if you are interested) and I want to normalize each
> of these ratios to the median 15N/14N value from all >6000 peptides from
> each experiment.  Then, since these ratios (from 2 or more peptides) are
> used to calculate the protein 15N/14N abundance, I want to take the median
> value of all peptides belonging to one protein to calculate the overall
> protein 15N/14N abundance within that experiment.
> 
> 
> 
> I?ve managed to break the data set into small pieces (by protein and by
> experiment), which will lead to about 500 observations.
> 
> 
> 
> A dummy ? small ? dataset could look like this (below), where V1 lists the
> peptides that make up a protein, V2 is the protein ID, V3 is the metric of
> interest (the 15N/14N ratio of each peptide), and V4 indicates which
> experiment was run.
> 
> 
> 
> The stumbling block here is that I cannot index the median function.
> 
> 
> 
> Here is what I have done so far.
> 
> 
> 
> y<-read.table(?nameoffile.txt?)
> 
> 
> 
> h<-split(y,y$V4)
> 
> 
> 
> for(n in names(h))
> 
> write.table(h[[n]], file=paste(y[[n]][,?V4?][4],?_?,n,?.TXT?,sep=??))
> 
> 
> 
> Then I (not elegantly but OK with brute force method for four files) went
> into each file and calculated the median
> 
> 
> 
> 
> 
> vls1<-read.table(?VLS5584_VLS5584.TXT?)  # for example, but did this four
> times for each file
> 
> 
> 
> newcol=vls1[,3]/median(vls1[,3]) #make a new column of 15N/14N data now
> normalized to median value? here this is shown for one of four experiments.
> 
> 
> 
> 
> normvls1=cbind(vls1,newcol) #added to existing data with global median
> normalized numbers.
> 
> 
> 
> nvls1prot<-split(normvls1,normvls1$V2) #splits up this experiment into many
> files.. one for each protein.
> 
> 
> 
> for(n in
> names(nvls1prot))write.table(nvls1prot[[n]],file=paste(nvls1prot[[n]][,"V4"][1],"_",
> n,".TXT",sep=""))  #writes these files
> 
> 
> 
> Then I took this output in windows explorer and moved it to a new folder.
> Set working directory to that folder.
> 
> 
> 
> 
> 
> And, lifted from a help page and tweaked to my liking..
> 
> 
> 
> # batch import text files (files must be in working directory);
> 'pattern' is case-sensitive
> 
> txtfiles = list.files(pattern="*.TXT")
> 
> 
> 
> for (i in 1:length(txtfiles)){
> 
>  tmp = read.table(txtfiles[i])
> 
>  xyz = data.frame(tmp)
> 
>  normHL = xyz[[5]]
> 
>    median[i] = median(normHL)
> 
> }
> 
> 
> 
> 
> 
> But after that, I get the following error message.
> 
> 
> 
> Error in median[i] = median(normHL) :
> 
>  object of type 'closure' is not subsettable
> 
> 
> 
> Thanks,
> 
> Adam Kustka
> 
> 
> 
> SEAEFVNYQVR
> 
> B5YLU3
> 
> 0.226
> 
> VLS5584
> 
> LLQTEPGTR
> 
> B5YLU3
> 
> 0.199
> 
> VLS5584
> 
> SEAEFVNYQVR
> 
> B5YLU3
> 
> 0.216
> 
> VLS5585
> 
> LLQTEPGTR
> 
> B5YLU3
> 
> 0.183
> 
> VLS5585
> 
> SEAEFVNYQVR
> 
> B5YLU3
> 
> 0.266
> 
> VLS5586
> 
> FAQMAVLGFIIPEK
> 
> B5YLU3
> 
> .2
> 
> VLS5586
> 
> LLQTEPGTR
> 
> B5YLU3
> 
> 0.203
> 
> VLS5586
> 
> SEAEFVNYQVR
> 
> B5YLU3
> 
> 0.516
> 
> VLS5587
> 
> FAQMAVLGFIIPEK
> 
> B5YLU3
> 
> 0.764
> 
> VLS5587
> 
> IEGLGWRPK
> 
> B5YLU3
> 
> .2
> 
> VLS5587
> 
> LLQTEPGTR
> 
> B5YLU3
> 
> 0.338
> 
> VLS5587
> 
> LLQTEPGTR
> 
> B5YLU3
> 
> .2
> 
> VLS5587
> 
> FSCAYLVDNPR
> 
> B5YLV4
> 
> 0.131
> 
> VLS5584
> 
> ITCQDPSDDFPTYR
> 
> B5YLV4
> 
> 0.122
> 
> VLS5584
> 
> SPLPEDLMPEFSFR
> 
> B5YLV4
> 
> 0.105
> 
> VLS5584
> 
> ITCQDPSDDFPTYR
> 
> B5YLV4
> 
> .2
> 
> VLS5585
> 
> FLEVPMYLK
> 
> B5YLV4
> 
> .2
> 
> VLS5585
> 
> ITCQDPSDDFPTYR
> 
> B5YLV4
> 
> 0.113
> 
> VLS5585
> 
> ITCQDPSDDFPTYR
> 
> B5YLV4
> 
> 0.112
> 
> VLS5586
> 
> FSCAYLVDNPR
> 
> B5YLV4
> 
> 0.128
> 
> VLS5586
> 
> SPLPEDLMPEFSFR
> 
> B5YLV4
> 
> 0.126
> 
> VLS5586
> 
> FLEVPMYLKCLDR
> 
> B5YLV4
> 
> 0.406
> 
> VLS5586
> 
> LYYNVETLK
> 
> B5YLV4
> 
> 0.11
> 
> VLS5586
> 
> GEDGYLTTK
> 
> B5YLV4
> 
> 0.144
> 
> VLS5586
> 
> FLEVPMYLK
> 
> B5YLV4
> 
> 0.134
> 
> VLS5586
> 
> ITCQDPSDDFPTYR
> 
> B5YLV4
> 
> .2
> 
> VLS5586
> 
> FSCAYLVDNPR
> 
> B5YLV4
> 
> .2
> 
> VLS5586
> 
> FKDDFFLK
> 
> B5YLV4
> 
> 0.121
> 
> VLS5586
> 
> ITCQDPSDDFPTYRDLEK
> 
> B5YLV4
> 
> 0.138
> 
> VLS5586
> 
> FLEVPMYLK
> 
> B5YLV4
> 
> 0.123
> 
> VLS5586
> 
> CFDDAFVR
> 
> B5YLV4
> 
> 0.15
> 
> VLS5586
> 
> VFFTHGMYYTGGNLVAQVK
> 
> B5YLV4
> 
> 0.25
> 
> VLS5586
> 
> FKDDFFLK
> 
> B5YLV4
> 
> 0.141
> 
> VLS5586
> 
> CGFDEVHAR
> 
> B5YLV4
> 
> 0.108
> 
> VLS5586
> 
> YPENYNIEELPAAGQSYIHPDTYVQR
> 
> B5YLV4
> 
> 0.153
> 
> VLS5587
> 
> SPLPEDLMPEFSFR
> 
> B5YLV4
> 
> 0.153
> 
> VLS5587
> 
> FSCAYLVDNPR
> 
> B5YLV4
> 
> 0.137
> 
> VLS5587
> 
> LYYNVETLK
> 
> B5YLV4
> 
> 0.157
> 
> VLS5587
> 
> CGFDEVHAR
> 
> B5YLV4
> 
> 0.145
> 
> VLS5587
> 
> FLEVPMYLK
> 
> B5YLV4
> 
> 0.142
> 
> VLS5587
> 
> 
> 
> 
> On Wed, Jun 18, 2014 at 9:12 AM, Adam Kustka <kustka at andromeda.rutgers.edu>
> wrote:
> 
>> 
>> 
>> I have a dataset of peptide 15N/14N ratios from four experiments (where
>> cells are grown under different conditions and were fed either 15N or 14N
>> nitrate aka plant food if you are interested) and I want to normalize each
>> of these ratios to the median 15N/14N value from all >6000 peptides from
>> each experiment.  Then, since these ratios (from 2 or more peptides) are
>> used to calculate the protein 15N/14N abundance, I want to take the median
>> value of all peptides belonging to one protein to calculate the overall
>> protein 15N/14N abundance within that experiment.
>> 
>> 
>> 
>> I?ve managed to break the data set into small pieces (by protein and by
>> experiment), which will lead to about 500 observations.
>> 
>> 
>> 
>> A dummy ? small ? dataset could look like this (below), where V1 lists the
>> peptides that make up a protein, V2 is the protein ID, V3 is the metric of
>> interest (the 15N/14N ratio of each peptide), and V4 indicates which
>> experiment was run.
>> 
>> 
>> 
>> The stumbling block here is that I cannot index the median function.
>> 
>> 
>> 
>> Here is what I have done so far.
>> 
>> 
>> 
>> y<-read.table(?nameoffile.txt?)
>> 
>> 
>> 
>> h<-split(y,y$V4)
>> 
>> 
>> 
>> for(n in names(h))
>> 
>> write.table(h[[n]], file=paste(y[[n]][,?V4?][4],?_?,n,?.TXT?,sep=??))
>> 
>> 
>> 
>> Then I (not elegantly but OK with brute force method for four files) went
>> into each file and calculated the median
>> 
>> 
>> 
>> 
>> 
>> vls1<-read.table(?VLS5584_VLS5584.TXT?)  # for example, but did this four
>> times for each file
>> 
>> 
>> 
>> newcol=vls1[,3]/median(vls1[,3])
>> 
>> 
>> 
>> normvls1=cbind(vls1,newcol)
>> 
>> 
>> 
>> nvls1prot<-split(normvls1,normvls1$V2)
>> 
>> 
>> 
>> for(n in
>> names(nvls1prot))write.table(nvls1prot[[n]],file=paste(nvls1prot[[n]][,"V4"][1],"_",
>> n,".TXT",sep=""))
>> 
>> 
>> 
>> Then I took this output in windows explorer and moved it to a new folder.
>> Set working directory to that folder.
>> 
>> 
>> 
>> And, lifted from a help page and tweaked to my liking..
>> 
>> for (i in 1:length(txtfiles)){
>> 
>>  tmp = read.table(txtfiles[i])
>> 
>>  xyz = data.frame(tmp)
>> 
>>  normHL = xyz[[5]]
>> 
>>    median[i] = median(normHL)
>> 
>> }
>> 
>> 
>> 
>> 
>> 
>> But after that, I get the following error message.
>> 
>> 
>> 
>> Error in median[i] = median(normHL) :
>> 
>>  object of type 'closure' is not subsettable
>> 
>> 
>> 
>> Thanks,
>> 
>> Adam Kustka
>> 
>> 
>> 
>> SEAEFVNYQVR
>> 
>> B5YLU3
>> 
>> 0.226
>> 
>> VLS5584
>> 
>> LLQTEPGTR
>> 
>> B5YLU3
>> 
>> 0.199
>> 
>> VLS5584
>> 
>> SEAEFVNYQVR
>> 
>> B5YLU3
>> 
>> 0.216
>> 
>> VLS5585
>> 
>> LLQTEPGTR
>> 
>> B5YLU3
>> 
>> 0.183
>> 
>> VLS5585
>> 
>> SEAEFVNYQVR
>> 
>> B5YLU3
>> 
>> 0.266
>> 
>> VLS5586
>> 
>> FAQMAVLGFIIPEK
>> 
>> B5YLU3
>> 
>> .2
>> 
>> VLS5586
>> 
>> LLQTEPGTR
>> 
>> B5YLU3
>> 
>> 0.203
>> 
>> VLS5586
>> 
>> SEAEFVNYQVR
>> 
>> B5YLU3
>> 
>> 0.516
>> 
>> VLS5587
>> 
>> FAQMAVLGFIIPEK
>> 
>> B5YLU3
>> 
>> 0.764
>> 
>> VLS5587
>> 
>> IEGLGWRPK
>> 
>> B5YLU3
>> 
>> .2
>> 
>> VLS5587
>> 
>> LLQTEPGTR
>> 
>> B5YLU3
>> 
>> 0.338
>> 
>> VLS5587
>> 
>> LLQTEPGTR
>> 
>> B5YLU3
>> 
>> .2
>> 
>> VLS5587
>> 
>> FSCAYLVDNPR
>> 
>> B5YLV4
>> 
>> 0.131
>> 
>> VLS5584
>> 
>> ITCQDPSDDFPTYR
>> 
>> B5YLV4
>> 
>> 0.122
>> 
>> VLS5584
>> 
>> SPLPEDLMPEFSFR
>> 
>> B5YLV4
>> 
>> 0.105
>> 
>> VLS5584
>> 
>> ITCQDPSDDFPTYR
>> 
>> B5YLV4
>> 
>> .2
>> 
>> VLS5585
>> 
>> FLEVPMYLK
>> 
>> B5YLV4
>> 
>> .2
>> 
>> VLS5585
>> 
>> ITCQDPSDDFPTYR
>> 
>> B5YLV4
>> 
>> 0.113
>> 
>> VLS5585
>> 
>> ITCQDPSDDFPTYR
>> 
>> B5YLV4
>> 
>> 0.112
>> 
>> VLS5586
>> 
>> FSCAYLVDNPR
>> 
>> B5YLV4
>> 
>> 0.128
>> 
>> VLS5586
>> 
>> SPLPEDLMPEFSFR
>> 
>> B5YLV4
>> 
>> 0.126
>> 
>> VLS5586
>> 
>> FLEVPMYLKCLDR
>> 
>> B5YLV4
>> 
>> 0.406
>> 
>> VLS5586
>> 
>> LYYNVETLK
>> 
>> B5YLV4
>> 
>> 0.11
>> 
>> VLS5586
>> 
>> GEDGYLTTK
>> 
>> B5YLV4
>> 
>> 0.144
>> 
>> VLS5586
>> 
>> FLEVPMYLK
>> 
>> B5YLV4
>> 
>> 0.134
>> 
>> VLS5586
>> 
>> ITCQDPSDDFPTYR
>> 
>> B5YLV4
>> 
>> .2
>> 
>> VLS5586
>> 
>> FSCAYLVDNPR
>> 
>> B5YLV4
>> 
>> .2
>> 
>> VLS5586
>> 
>> FKDDFFLK
>> 
>> B5YLV4
>> 
>> 0.121
>> 
>> VLS5586
>> 
>> ITCQDPSDDFPTYRDLEK
>> 
>> B5YLV4
>> 
>> 0.138
>> 
>> VLS5586
>> 
>> FLEVPMYLK
>> 
>> B5YLV4
>> 
>> 0.123
>> 
>> VLS5586
>> 
>> CFDDAFVR
>> 
>> B5YLV4
>> 
>> 0.15
>> 
>> VLS5586
>> 
>> VFFTHGMYYTGGNLVAQVK
>> 
>> B5YLV4
>> 
>> 0.25
>> 
>> VLS5586
>> 
>> FKDDFFLK
>> 
>> B5YLV4
>> 
>> 0.141
>> 
>> VLS5586
>> 
>> CGFDEVHAR
>> 
>> B5YLV4
>> 
>> 0.108
>> 
>> VLS5586
>> 
>> YPENYNIEELPAAGQSYIHPDTYVQR
>> 
>> B5YLV4
>> 
>> 0.153
>> 
>> VLS5587
>> 
>> SPLPEDLMPEFSFR
>> 
>> B5YLV4
>> 
>> 0.153
>> 
>> VLS5587
>> 
>> FSCAYLVDNPR
>> 
>> B5YLV4
>> 
>> 0.137
>> 
>> VLS5587
>> 
>> LYYNVETLK
>> 
>> B5YLV4
>> 
>> 0.157
>> 
>> VLS5587
>> 
>> CGFDEVHAR
>> 
>> B5YLV4
>> 
>> 0.145
>> 
>> VLS5587
>> 
>> FLEVPMYLK
>> 
>> B5YLV4
>> 
>> 0.142
>> 
>> VLS5587
>> 
>> 
>> 
>> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

David Winsemius
Alameda, CA, USA


From vkuznet at gmail.com  Thu Jun 19 03:02:45 2014
From: vkuznet at gmail.com (Valentin Kuznetsov)
Date: Wed, 18 Jun 2014 21:02:45 -0400
Subject: [R] RWeka: how to pass arguments to BayesNet for specific search
	method
Message-ID: <20140619010245.GI1836@vklaptop.local>

Hi,

I'm trying to solve simple problem. How to pass arguments to specific search
method in RWeka package using BayesNet classifier. Here is code example:

BNet <- make_Weka_classifier("weka/classifiers/bayes/BayesNet")
K2="weka.classifiers.bayes.net.search.local.K2"
wcontrol <- Weka_control(D=TRUE,Q=list(K2,P=2))
model <- BNet(target~., data=train.df, control=wcontrol)

if I run this code it will complain

Error in .jcall(classifier, "V", "buildClassifier", instances) :
java.lang.Exception: Can't find class called: weka.classifiers.bayes.net.search.local.K2 -P 2
Calls: BNet ... RWeka_build_classifier -> .jcall -> .jcheck -> .Call

I know that arguments can be passed via Weka_control, and it works if I just
use search method, e.g.

wcontrol <- Weka_control(D=T,Q=K2)

and here D=T option works too.

What it should do is to pass additional -- after K2 class.
According to http://www.cs.waikato.ac.nz/~remco/weka.bn.pdf and
using java command it should looks like this:

java weka.classifiers.bayes.BayesNet -t iris.arff -D -Q weka.classifiers.bayes.net.search.local.K2 -- -P 2

I tried to append double dash to K2 definition, e.g.

K2="weka.classifiers.bayes.net.search.local.K2 --"

but still out of luck.

Any suggestions?

Thanks,
Valentin.


From cryan at binghamton.edu  Thu Jun 19 04:29:02 2014
From: cryan at binghamton.edu (Christopher W. Ryan)
Date: Wed, 18 Jun 2014 22:29:02 -0400
Subject: [R] empty density plot for point pattern in spatstat
In-Reply-To: <CF5661163F77A44781208D9AC4FDEA725D6726061A@IS-WIN-376.staffad.uwa.edu.au>
References: <CAM+rpYnjg_SGnyGrVcwuakX1xmXd7ysy1gZntdn7m2zD=kqong@mail.gmail.com>
	<CAM+rpYmz8zWkZvpNX6--a+F6vu6p2JkjzzTeoWta+PZ1oKh6jA@mail.gmail.com>
	<53A0B1C5.2080008@auckland.ac.nz>,
	<CAL7MysnyrphaRcxHUhNT1nuy7By2fHzdHrXyTY7EQ1UxG22kKg@mail.gmail.com>
	<CF5661163F77A44781208D9AC4FDEA725D6726061A@IS-WIN-376.staffad.uwa.edu.au>
Message-ID: <53A24AEE.50601@binghamton.edu>

Let me just say that the expertise and support on this List is amazing,
and I'm very grateful. I'm learning a lot from your discussions.

I will not be at my problematic machine again until Friday 20 June. I
will take these steps then, and try to provide as many details about the
system as I can. It is Win XP, now R 3.1.0, and (IIRC) spatstat 1.37-0
'Model Prisoner'.

I do not encounter the problem on Windows 7, R 3.1.0, spatstat 1.36-0
?Intense Scrutiny?.  Nor on Ubuntu 12.04, R 3.1.0, spatstat 1.36-0.

 Thanks.

--Chris Ryan

Adrian Baddeley wrote:
> Dear Pablo
> 
> Please provide details of the system you are using (Windows - version?  R version? spatstat version?)
> 
> Also, when you issue the plot command, what graphics device are you using?
> [To find out, type dev.cur() after performing the plot, and read the printout]
> 
> Try changing the colour map by running 'example(plot.im)' or 
> setting col=grey(seq(0,1,length=32)) in the call to plot.im
> 
> Try setting 'useRaster=FALSE' in the call to plot.im. 
> 
> Let me know if any of these work. If not, let's talk on skype
> to figure it out.
> 
> regards
> Adrian
> 
> 
> Prof Adrian Baddeley FAA
> University of Western Australia
> ________________________________________
> From: Pablo Ram?n [paramon at utpl.edu.ec]
> Sent: Wednesday, 18 June 2014 9:36 PM
> To: Rolf Turner
> Cc: Christopher W Ryan; R-help; Adrian Baddeley
> Subject: Re: [R] empty density plot for point pattern in spatstat
> 
> Dear Rolf,
> 
> The problem persists with the function plot.im<http://plot.im>(), or plot (density ()), similar to with(bei.extra, plot (elev)). This problem occurs only with my personal machine, to another machine this problem does not occur. However, when I use another function, such kde2d () in the MASS package and perform the plot, the graph is obtained without problem.
> 
> Best wishes
> Pablo
> 
> 
> 
> 
> 
> 2014-06-17 16:23 GMT-05:00 Rolf Turner <r.turner at auckland.ac.nz<mailto:r.turner at auckland.ac.nz>>:
> On 18/06/14 03:49, Christopher W Ryan wrote:
> I upgraded to version 3.1.0 of R, still on Win XP, but that did not
> solve the problem:
> 
> library(spatstat)
> data(redwood)
> str(redwood)
> plot(redwood)  # works OK
> plot(Kest(redwood))  # works OK
> plot(density(redwood))  # produces an "empty" plot
>                                         # with just the figure border
>                                         # and a thin vertical box for
> the color ramp
>                                         # but no color ramp in it
> 
> Any other ideas? I'd be much obliged.
> 
> I have had an inquiry of this nature previously and sad to say was completely unable to find a solution.  I made numerous suggestions to the inquirer, e.g.:
> 
> *looking for a plot.im<http://plot.im>() function masking the "real"
> plot.im<http://plot.im>() function from spatstat
> 
> * cleaning out the global environment
> (.RData) in case there were some "artefacts" hanging around that had an impact on plot.im<http://plot.im>()
> 
> * completely *removing* .RData and starting again,...
> 
> Nothing worked.
> 
> It is very difficult to diagnose a problem like this remotely.  If you could find an R guru who was able to come and sit with you at your computer it is ***just possible*** that they could track down what is going wrong.
> 
> However it seems to me that the problem is due to some sort of recalcitrance of the Windoze system and is thus probably insoluble.
> 
> I am cc-ing this to the person who made the previous inquiry.  Pablo, have there been any further developments since we last communicated about this problem?
> 
> cheers,
> 
> Rolf Turner
> 
> P. S. BTW Chris:  Does plot.im<http://plot.im>() screw up with other images?  E.g. what happens if you do
> 
> with(bei.extra,plot(elev))
> 
> ???
> 
> R. T.
> 
> 
> 
> 
> --
> Mat. Pablo Ram?n
> Secci?n de Ecolog?a
> Departamento de Ciencias Naturales
> Universidad T?cnica Particular de Loja (http://www.utpl.edu.ec/)
> Telf. 593 7 2570275 Ext. 2505, 2258
>


From p_connolly at slingshot.co.nz  Thu Jun 19 06:28:24 2014
From: p_connolly at slingshot.co.nz (p_connolly)
Date: Thu, 19 Jun 2014 16:28:24 +1200
Subject: [R] RWeka: how to pass arguments to BayesNet for specific
 search method
In-Reply-To: <20140619010245.GI1836@vklaptop.local>
References: <20140619010245.GI1836@vklaptop.local>
Message-ID: <b667a56c5657835110c1ea2b5c223876@slingshot.co.nz>

My suggestion is not entirely satisfactory, but it's got me out
of a few jams.

When I can't get the RWeka syntax to work, I resort to using
direct weka code in a system call.  One such example looks like
this and will make sense if you know how Weka does things.

system("java weka.classifiers.bayes.NaiveBayes -t HWlrTrain.arff -T 
HWlrTest.arff -o -threshold-file Threshold.arff")

thresholdNB.df <- read.arff("Threshold.arff")


I know it kind of defeats the purpose somewhat.  But it is making
use of RWeka's ability to make arff files which is quite useful
in itself.

HTH

Patrick



On 2014-06-19 13:02, Valentin Kuznetsov wrote:
> Hi,
> 
> I'm trying to solve simple problem. How to pass arguments to specific 
> search
> method in RWeka package using BayesNet classifier. Here is code 
> example:
> 
> BNet <- make_Weka_classifier("weka/classifiers/bayes/BayesNet")
> K2="weka.classifiers.bayes.net.search.local.K2"
> wcontrol <- Weka_control(D=TRUE,Q=list(K2,P=2))
> model <- BNet(target~., data=train.df, control=wcontrol)
> 
> if I run this code it will complain
> 
> Error in .jcall(classifier, "V", "buildClassifier", instances) :
> java.lang.Exception: Can't find class called:
> weka.classifiers.bayes.net.search.local.K2 -P 2
> Calls: BNet ... RWeka_build_classifier -> .jcall -> .jcheck -> .Call
> 
> I know that arguments can be passed via Weka_control, and it works if I 
> just
> use search method, e.g.
> 
> wcontrol <- Weka_control(D=T,Q=K2)
> 
> and here D=T option works too.
> 
> What it should do is to pass additional -- after K2 class.
> According to http://www.cs.waikato.ac.nz/~remco/weka.bn.pdf and
> using java command it should looks like this:
> 
> java weka.classifiers.bayes.BayesNet -t iris.arff -D -Q
> weka.classifiers.bayes.net.search.local.K2 -- -P 2
> 
> I tried to append double dash to K2 definition, e.g.
> 
> K2="weka.classifiers.bayes.net.search.local.K2 --"
> 
> but still out of luck.
> 
> Any suggestions?
> 
> Thanks,
> Valentin.
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From Thierry.ONKELINX at inbo.be  Thu Jun 19 09:45:06 2014
From: Thierry.ONKELINX at inbo.be (ONKELINX, Thierry)
Date: Thu, 19 Jun 2014 07:45:06 +0000
Subject: [R] Publication-ready figures with two plots
In-Reply-To: <CALQiR096_SKpnxsNKEssPU_k0QkHf6bpF4ZVNQWGKdtL6QHcWQ@mail.gmail.com>
References: <CALQiR096_SKpnxsNKEssPU_k0QkHf6bpF4ZVNQWGKdtL6QHcWQ@mail.gmail.com>
Message-ID: <AA818EAD2576BC488B4F623941DA7427F3A7B528@inbomail.inbo.be>

Dear Adam,

ggsave() works only with single ggplot object. You need the standard R way of saving those plots.
1) open a suitable device
2) plot the figures
3) close the device

tiff(filename = "Figure 1.tiff", scale = 1, width = 10, height = 5, units = "cm", dpi = 300)
grid.arrange(plot1, plot2, ncol=2)
dev.off()

Best regards,

ir. Thierry Onkelinx
Instituut voor natuur- en bosonderzoek / Research Institute for Nature and Forest
team Biometrie & Kwaliteitszorg / team Biometrics & Quality Assurance
Kliniekstraat 25
1070 Anderlecht
Belgium
+ 32 2 525 02 51
+ 32 54 43 61 85
Thierry.Onkelinx at inbo.be
www.inbo.be

To call in the statistician after the experiment is done may be no more than asking him to perform a post-mortem examination: he may be able to say what the experiment died of.
~ Sir Ronald Aylmer Fisher

The plural of anecdote is not data.
~ Roger Brinner

The combination of some data and an aching desire for an answer does not ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey


-----Oorspronkelijk bericht-----
Van: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] Namens Adam Hayward
Verzonden: woensdag 18 juni 2014 21:18
Aan: r-help at r-project.org
Onderwerp: [R] Publication-ready figures with two plots

Hi all,

I have quite a specific problem with producing 300ppi plots in tiff format for publication. I have found ggsave to work beautifully with a single plot, which can then be exported to GIMP to compress the resulting large tiff file. However, it seems to run into trouble when plotting two figures next to each other, e.g.

plot1<-ggplot(.........)
plot2<-ggplot(.........)
grid.arrange(plot1, plot2, ncol=2)

ggsave(filename = "Figure 1.tiff", scale = 1, width = 10, height = 5, units = "cm", dpi = 300)

This results in only plot2 appearing in the resulting tiff file, with plot
1 nowhere to be seen.

I will also have a figure which does not use ggplot, but consists of three plots produced with barplot2 and matplot, but presumably this faces a similar problem. Essentially, could anyone suggest a way of translating what appears in the plot appearing in the plot window (I use RStudio) to a high-resolution tiff file with as little fuss as possible?

Many thanks,

Adam



--
Adam Hayward
Post-Doctoral Research Associate, University of Sheffield http://adhayward.wordpress.com/
https://twitter.com/adhayward18

Department of Animal and Plant Sciences
Alfred Denny Building
University of Sheffield
Western Bank
Sheffield S10 2TN
UK
http://www.huli.group.shef.ac.uk/adam-personal.html

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.
* * * * * * * * * * * * * D I S C L A I M E R * * * * * * * * * * * * *
Dit bericht en eventuele bijlagen geven enkel de visie van de schrijver weer en binden het INBO onder geen enkel beding, zolang dit bericht niet bevestigd is door een geldig ondertekend document.
The views expressed in this message and any annex are purely those of the writer and may not be regarded as stating an official position of INBO, as long as the message is not confirmed by a duly signed document.


From wht_crl at yahoo.com  Thu Jun 19 13:19:27 2014
From: wht_crl at yahoo.com (carol white)
Date: Thu, 19 Jun 2014 04:19:27 -0700
Subject: [R] extract a subset of non-contiguous elements of a matrix
Message-ID: <1403176767.76653.YahooMailNeo@web121504.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140619/c3f69aeb/attachment.pl>

From kasterma at kasterma.net  Thu Jun 19 13:29:09 2014
From: kasterma at kasterma.net (Bart Kastermans)
Date: Thu, 19 Jun 2014 13:29:09 +0200
Subject: [R] extract a subset of non-contiguous elements of a matrix
In-Reply-To: <1403176767.76653.YahooMailNeo@web121504.mail.ne1.yahoo.com>
References: <1403176767.76653.YahooMailNeo@web121504.mail.ne1.yahoo.com>
Message-ID: <106F1E20-6044-4A21-A2B3-8061091C0CFE@kasterma.net>

On 19 Jun 2014, at 13:19, carol white <wht_crl at yahoo.com> wrote:

> Hi,
> Is there a way to extract a subset of non-contiguous elements of a matrix elegantly and with 1 or very few scripts?
> 
> Suppose I have a matrix of positive and negative numbers (m) and I want to retrieve only the positive number. This I can do
> 
> which(m>0, arr.ind=T) which gives the indices of positive elements like (37,1), (80,1), ..., (54,2) etc. How can I extract positive numbers without looping on the indexes provided by which to make a new matrix?

What matrix do you want?  For e.g.

> tm.1 <- matrix(c(11,22,33,-4), ncol=2)
> which(tm.1 > 0, arr.ind=TRUE)
    row col
[1,]   1   1
[2,]   2   1
[3,]   1   2
> tm.1[which(tm.1 > 0, arr.ind=TRUE)]
[1] 11 22 33

The extracted values do not form a matrix.

Either the above contains the answer, or I don?t understand the question.

Best,
Bart

> 
> thanks,
> 
> Carol


From wht_crl at yahoo.com  Thu Jun 19 14:12:29 2014
From: wht_crl at yahoo.com (carol white)
Date: Thu, 19 Jun 2014 05:12:29 -0700
Subject: [R] extract a subset of non-contiguous elements of a matrix
In-Reply-To: <106F1E20-6044-4A21-A2B3-8061091C0CFE@kasterma.net>
References: <1403176767.76653.YahooMailNeo@web121504.mail.ne1.yahoo.com>
	<106F1E20-6044-4A21-A2B3-8061091C0CFE@kasterma.net>
Message-ID: <1403179949.41112.YahooMailNeo@web121502.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140619/0a43b7ee/attachment.pl>

From pdalgd at gmail.com  Thu Jun 19 15:02:00 2014
From: pdalgd at gmail.com (peter dalgaard)
Date: Thu, 19 Jun 2014 15:02:00 +0200
Subject: [R] extract a subset of non-contiguous elements of a matrix
In-Reply-To: <1403179949.41112.YahooMailNeo@web121502.mail.ne1.yahoo.com>
References: <1403176767.76653.YahooMailNeo@web121504.mail.ne1.yahoo.com>
	<106F1E20-6044-4A21-A2B3-8061091C0CFE@kasterma.net>
	<1403179949.41112.YahooMailNeo@web121502.mail.ne1.yahoo.com>
Message-ID: <106AF2A3-069E-45CE-B47D-E577DCB807F7@gmail.com>

This _was_ in the answer you got, but to clarify things, perhaps try this:

(M <- matrix(1:9,3,3))
(ix <- rbind(c(3,2),c(1,3)))
M[3,2]
M[1,3]
M[ix]

-pd

On 19 Jun 2014, at 14:12 , carol white <wht_crl at yahoo.com> wrote:

> The extracted values don't form a matrix and that's the question how to extract because which returns the indexes? that is, from
> 1,1
> 2,1
> 1,2
> 
> how to retrieve values?
> 
> Or if at the position 2,1, there is a negative value, how to retrieve
> 1,1
> 1,2
> 
> 
> 
> Carol
> 
> 
> 
> On Thursday, June 19, 2014 1:29 PM, Bart Kastermans <kasterma at kasterma.net> wrote:
> 
> 
> 
> On 19 Jun 2014, at 13:19, carol white <wht_crl at yahoo.com> wrote:
> 
>> Hi,
>> Is there a way to extract a subset of non-contiguous elements of a matrix elegantly and with 1 or very few scripts?
>> 
>> Suppose I have a matrix of positive and negative numbers (m) and I want to retrieve only the positive number. This I can do
>> 
>> which(m>0, arr.ind=T) which gives the indices of positive elements like (37,1), (80,1), ..., (54,2) etc. How can I extract positive numbers without looping on the indexes provided by which to make a new matrix?
> 
> What matrix do you want?  For e.g.
> 
>> tm.1 <- matrix(c(11,22,33,-4), ncol=2)
>> which(tm.1 > 0, arr.ind=TRUE)
>     row col
> [1,]   1   1
> [2,]   2   1
> [3,]   1   2
>> tm.1[which(tm.1 > 0, arr.ind=TRUE)]
> [1] 11 22 33
> 
> The extracted values do not form a matrix.
> 
> Either the above contains the answer, or I don?t understand the question.
> 
> Best,
> Bart
> 
> 
>> 
>> thanks,
>> 
>> Carol
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From kasterma at kasterma.net  Thu Jun 19 15:07:59 2014
From: kasterma at kasterma.net (Bart Kastermans)
Date: Thu, 19 Jun 2014 15:07:59 +0200
Subject: [R] extract a subset of non-contiguous elements of a matrix
In-Reply-To: <1403183051.66022.YahooMailNeo@web121501.mail.ne1.yahoo.com>
References: <1403176767.76653.YahooMailNeo@web121504.mail.ne1.yahoo.com>
	<106F1E20-6044-4A21-A2B3-8061091C0CFE@kasterma.net>
	<1403179949.41112.YahooMailNeo@web121502.mail.ne1.yahoo.com>
	<85831E45-86EC-4193-9AAA-719C7FAFD145@kasterma.net>
	<1403183051.66022.YahooMailNeo@web121501.mail.ne1.yahoo.com>
Message-ID: <AA2ACD86-F4F2-43C1-A501-7994E2B6D9BF@kasterma.net>

If you give an example of input and desired output I can think about this.  But at this
point I do not understand what you want.  In the example I gave the positive elements do
not form a submatrix in any way I can think of.

On 19 Jun 2014, at 15:04, carol white <wht_crl at yahoo.com> wrote:

> well it gives a vector which is useless as I want a matrix.
> 
> 
> On Thursday, June 19, 2014 2:40 PM, Bart Kastermans <kasterma at kasterma.net> wrote:
> 
> 
> > tm.1 <- matrix(c(11,22,33,-4), ncol=2)
> > which(tm.1 > 0, arr.ind=TRUE)
>   row col
> [1,]  1  1
> [2,]  2  1
> [3,]  1  2
> > tm.1[which(tm.1 > 0, arr.ind=TRUE)]
> [1] 11 22 33
> 
> This last command does what you ask I think.
> 
> On 19 Jun 2014, at 14:12, carol white <wht_crl at yahoo.com> wrote:
> 
> > The extracted values don't form a matrix and that's the question how to extract because which returns the indexes? that is, from
> > 1,1
> > 2,1
> > 1,2
> > 
> > how to retrieve values?
> > 
> > Or if at the position 2,1, there is a negative value, how to retrieve
> > 1,1
> > 1,2
> > 
> > 
> > Carol
> > 
> > 
> > On Thursday, June 19, 2014 1:29 PM, Bart Kastermans <kasterma at kasterma.net> wrote:
> > 
> > 
> > On 19 Jun 2014, at 13:19, carol white <wht_crl at yahoo.com> wrote:
> > 
> > > Hi,
> > > Is there a way to extract a subset of non-contiguous elements of a matrix elegantly and with 1 or very few scripts?
> > > 
> > > Suppose I have a matrix of positive and negative numbers (m) and I want to retrieve only the positive number. This I can do
> > > 
> > > which(m>0, arr.ind=T) which gives the indices of positive elements like (37,1), (80,1), ..., (54,2) etc. How can I extract positive numbers without looping on the indexes provided by which to make a new matrix?
> > 
> > What matrix do you want?  For e.g.
> > 
> > > tm.1 <- matrix(c(11,22,33,-4), ncol=2)
> > > which(tm.1 > 0, arr.ind=TRUE)
> >    row col
> > [1,]  1  1
> > [2,]  2  1
> > [3,]  1  2
> > > tm.1[which(tm.1 > 0, arr.ind=TRUE)]
> > [1] 11 22 33
> > 
> > The extracted values do not form a matrix.
> > 
> > Either the above contains the answer, or I don?t understand the question.
> > 
> > Best,
> > Bart
> > 
> > 
> > > 
> > > thanks,
> > > 
> > > Carol
> > 
> > 
> 
> 


From wht_crl at yahoo.com  Thu Jun 19 15:16:49 2014
From: wht_crl at yahoo.com (carol white)
Date: Thu, 19 Jun 2014 06:16:49 -0700
Subject: [R] extract a subset of non-contiguous elements of a matrix
In-Reply-To: <AA2ACD86-F4F2-43C1-A501-7994E2B6D9BF@kasterma.net>
References: <1403176767.76653.YahooMailNeo@web121504.mail.ne1.yahoo.com>
	<106F1E20-6044-4A21-A2B3-8061091C0CFE@kasterma.net>
	<1403179949.41112.YahooMailNeo@web121502.mail.ne1.yahoo.com>
	<85831E45-86EC-4193-9AAA-719C7FAFD145@kasterma.net>
	<1403183051.66022.YahooMailNeo@web121501.mail.ne1.yahoo.com>
	<AA2ACD86-F4F2-43C1-A501-7994E2B6D9BF@kasterma.net>
Message-ID: <1403183809.76018.YahooMailNeo@web121506.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140619/ede60425/attachment.pl>

From kasterma at kasterma.net  Thu Jun 19 15:24:45 2014
From: kasterma at kasterma.net (Bart Kastermans)
Date: Thu, 19 Jun 2014 15:24:45 +0200
Subject: [R] extract a subset of non-contiguous elements of a matrix
In-Reply-To: <1403183809.76018.YahooMailNeo@web121506.mail.ne1.yahoo.com>
References: <1403176767.76653.YahooMailNeo@web121504.mail.ne1.yahoo.com>
	<106F1E20-6044-4A21-A2B3-8061091C0CFE@kasterma.net>
	<1403179949.41112.YahooMailNeo@web121502.mail.ne1.yahoo.com>
	<85831E45-86EC-4193-9AAA-719C7FAFD145@kasterma.net>
	<1403183051.66022.YahooMailNeo@web121501.mail.ne1.yahoo.com>
	<AA2ACD86-F4F2-43C1-A501-7994E2B6D9BF@kasterma.net>
	<1403183809.76018.YahooMailNeo@web121506.mail.ne1.yahoo.com>
Message-ID: <F4BD69C9-8AA4-403B-8187-A2C7BF97C65B@kasterma.net>


On 19 Jun 2014, at 15:16, carol white <wht_crl at yahoo.com> wrote:

>  tm.1=rbind(c(1,-3,2,-4), c(1,-3,2,-4),c(1,-3,2,-4))
> 
> > which(tm.1 > 0, arr.ind=TRUE)
>      row col
> [1,]   1   1
> [2,]   2   1
> [3,]   3   1
> [4,]   1   3
> [5,]   2   3
> [6,]   3   3
> 
> so the answer should have the elements of tm.1 with the following indexes
> 1,1 1,3
> 2,1 2,3
> 3,1 3,3

In that example:

> t(apply(tm.1, 1, function(x) x[x>0]))
     [,1] [,2]
[1,]    1    2
[2,]    1    2
[3,]    1    2

> class(t(apply(tm.1, 1, function(x) x[x>0])))
[1] "matrix"


> 
> 
> On Thursday, June 19, 2014 3:08 PM, Bart Kastermans <kasterma at kasterma.net> wrote:
> 
> 
> If you give an example of input and desired output I can think about this.  But at this
> point I do not understand what you want.  In the example I gave the positive elements do
> not form a submatrix in any way I can think of.
> 
> On 19 Jun 2014, at 15:04, carol white <wht_crl at yahoo.com> wrote:
> 
> > well it gives a vector which is useless as I want a matrix.
> > 
> > 
> > On Thursday, June 19, 2014 2:40 PM, Bart Kastermans <kasterma at kasterma.net> wrote:
> > 
> > 
> > > tm.1 <- matrix(c(11,22,33,-4), ncol=2)
> > > which(tm.1 > 0, arr.ind=TRUE)
> >  row col
> > [1,]  1  1
> > [2,]  2  1
> > [3,]  1  2
> > > tm.1[which(tm.1 > 0, arr.ind=TRUE)]
> > [1] 11 22 33
> > 
> > This last command does what you ask I think.
> > 
> > On 19 Jun 2014, at 14:12, carol white <wht_crl at yahoo.com> wrote:
> > 
> > > The extracted values don't form a matrix and that's the question how to extract because which returns the indexes? that is, from
> > > 1,1
> > > 2,1
> > > 1,2
> > > 
> > > how to retrieve values?
> > > 
> > > Or if at the position 2,1, there is a negative value, how to retrieve
> > > 1,1
> > > 1,2
> > > 
> > > 
> > > Carol
> > > 
> > > 
> > > On Thursday, June 19, 2014 1:29 PM, Bart Kastermans <kasterma at kasterma.net> wrote:
> > > 
> > > 
> > > On 19 Jun 2014, at 13:19, carol white <wht_crl at yahoo.com> wrote:
> > > 
> > > > Hi,
> > > > Is there a way to extract a subset of non-contiguous elements of a matrix elegantly and with 1 or very few scripts?
> > > > 
> > > > Suppose I have a matrix of positive and negative numbers (m) and I want to retrieve only the positive number. This I can do
> > > > 
> > > > which(m>0, arr.ind=T) which gives the indices of positive elements like (37,1), (80,1), ..., (54,2) etc. How can I extract positive numbers without looping on the indexes provided by which to make a new matrix?
> > > 
> > > What matrix do you want?  For e.g.
> > > 
> > > > tm.1 <- matrix(c(11,22,33,-4), ncol=2)
> > > > which(tm.1 > 0, arr.ind=TRUE)
> > >    row col
> > > [1,]  1  1
> > > [2,]  2  1
> > > [3,]  1  2
> > > > tm.1[which(tm.1 > 0, arr.ind=TRUE)]
> > > [1] 11 22 33
> > > 
> > > The extracted values do not form a matrix.
> > > 
> > > Either the above contains the answer, or I don?t understand the question.
> > > 
> > > Best,
> > > Bart
> > > 
> > > 
> > > > 
> > > > thanks,
> > > > 
> > > > Carol
> > > 
> > > 
> > 
> > 
> 
> 


From j.a.balbuena at uv.es  Thu Jun 19 15:39:16 2014
From: j.a.balbuena at uv.es (Juan Antonio Balbuena)
Date: Thu, 19 Jun 2014 15:39:16 +0200
Subject: [R] How to delete designated sequences in alignment (DNAbin object)
Message-ID: <53A2E804.9090701@uv.es>


   This is a simple question but could not find any specific help information:
   I have a DNAbin object created with read.dna() of ape and would like to
   remove several sequences of "conflicting taxa". How can I do it using a
   vector with the lables of the taxa to remove?
   Thanks in advance for your help.

   --

   Dr. Juan A. Balbuena
   Cavanilles Institute of Biodiversity and Evolutionary Biology
   University of Valencia
   [1]http://www.uv.es/~balbuena
   P.O. Box 22085
   [2]http://www.uv.es/cophylpaco
   46071 Valencia, Spain
   e-mail: [3]j.a.balbuena at uv.es    tel. +34 963 543 658    fax +34 963 543 733
   ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
   NOTE! For shipments by EXPRESS COURIER use the following street address:
   C/ Catedr??tico Jos?? Beltr??n 2, 46980 Paterna (Valencia), Spain.
   ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

References

   1. http://www.uv.es/%7Ebalbuena
   2. http://www.uv.es/cavanilles/zoomarin/index.htm
   3. mailto:j.a.balbuena at uv.es

From frtog at vestas.com  Thu Jun 19 15:38:31 2014
From: frtog at vestas.com (=?utf-8?B?RnJlZGUgQWFrbWFubiBUw7hnZXJzZW4=?=)
Date: Thu, 19 Jun 2014 15:38:31 +0200
Subject: [R] extract a subset of non-contiguous elements of a matrix
Message-ID: <b6wym6nr3jo13n2pqioy1bw4.1403185106859@email.android.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140619/f560f4e0/attachment.pl>

From letter at openmailbox.org  Thu Jun 19 15:41:50 2014
From: letter at openmailbox.org (message)
Date: Thu, 19 Jun 2014 13:41:50 +0000
Subject: [R] apply diff type function to matrix
Message-ID: <f0036292285384cacce6089135d9a0cb@openmailbox.org>

Readers,

For a matrix:
1 10 20 30
2 15 40 60
3 20 80 120

Using a spreadsheet, a differential function can be applied to the data 
as a formula:
|(10-15)/(1-2)| ... repeated for each pair of adjacent values
What is the corresponding function in R please?
Is it better to write a new function, or to use some form of function 
'diff'?


From letter at openmailbox.org  Thu Jun 19 15:42:30 2014
From: letter at openmailbox.org (message)
Date: Thu, 19 Jun 2014 13:42:30 +0000
Subject: [R] bar plot stacked
Message-ID: <6034d78728efab696e76e0abfd05facf@openmailbox.org>

Readers,

For data set:

a, 90, 10
b, 60, 40
c, ,
d, , 50

A plot was attempted:

dataset<-as.matrix(read.csv("datafile.csv",header=FALSE))
barplot<-(dataset,horiz=TRUE)

A warning message is returned, about NAs introduced by coercion and an 
undesirable graph. The desired output is something similar to:

a	---------*
b	------****
c
d	****

Whereby a legend would be produced to describe '*' and '-'. Any help 
please?


From wht_crl at yahoo.com  Thu Jun 19 15:46:16 2014
From: wht_crl at yahoo.com (carol white)
Date: Thu, 19 Jun 2014 06:46:16 -0700
Subject: [R] extract a subset of non-contiguous elements of a matrix
In-Reply-To: <b6wym6nr3jo13n2pqioy1bw4.1403185106859@email.android.com>
References: <b6wym6nr3jo13n2pqioy1bw4.1403185106859@email.android.com>
Message-ID: <1403185576.36345.YahooMailNeo@web121501.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140619/48d0e0a5/attachment.pl>

From lists at revelle.net  Thu Jun 19 15:48:46 2014
From: lists at revelle.net (William Revelle)
Date: Thu, 19 Jun 2014 08:48:46 -0500
Subject: [R] plot in package psych with function error.bars.by
In-Reply-To: <1402905177769-4692177.post@n4.nabble.com>
References: <1401776898895-4691632.post@n4.nabble.com>
	<107834395.A8ZI0oDvek@localhost.localdomain>
	<177721B3-887B-40EE-8A89-9EA39EE95A5D@revelle.net>
	<C3066D7C-B838-4EDA-BCBE-E6B0F0433F3D@revelle.net>
	<1402905177769-4692177.post@n4.nabble.com>
Message-ID: <088F6A61-B49A-42AD-B11E-F4B695E02317@revelle.net>


Dear Tham,

The example you were running was filtering out the subjects less than 10 years old and more than 80.  Somehow you suppressed this filtering which lead to the error message.  The filtering was done to avoid the problem you detected.

I have fixed error.bars.by so that it now will just complain if there is only one case (and thus no error) in a cell.  In this case, it will not draw the ?cats eye? error bars.

The Mac version of psych_1.4.6.18 is now on the personalty.project.org/r   server  repository.  The PC version  is at personality-project/r/src/contrib/  as a zip file:  psych_1.4.6.18.zip

For a Mac, just set your other repository to personalty.project.org/r and install the source version.  For a PC you need to ftp or http to personality-project/r/src/contrib/ to get the zip file.

Once again, when you discover a problem with the psych package, make sure to write me directly as well as the list.  You will get much faster turnaround.

Bill

On Jun 16, 2014, at 2:52 AM, Tham Tran <hanhtham.tran at yahoo.com.vn> wrote:

> Hi William,
> 
> I've just updated your latest package "psych_1.4.6.11.zip" from server
> "personality-project/r/src/contrib/". One time the updating process was
> finished, i tried to run based samples code:
> 
> require(psych)
> keys.list=list(Agree=c(-1,2:5),Conscientious=c(6:8,-9,-10),Extraversion=c(-11,-12,13:15),Neuroticism=c(16:20),Openness
> = c(21,-22,23,24,-25))
> keys = make.keys(28,keys.list,item.labels=colnames(bfi))
> scores = scoreItems(keys,bfi,min=1,max=6) 
> error.bars.by(scores$scores,round(bfi$age/10)*10,by.var=TRUE,main="BFI age
> trends",legend=3,labels=colnames(scores$scores),xlab="Age",ylab="Mean item
> score")
> 
> then i had an error following: 
> 
> Erreur dans if (del == 0 && to == 0) return(to) : 
>  valeur manquante l? o? TRUE / FALSE est requis
> De plus : Messages d'avis :
> 1: In qt(1 - alpha/2, group.stats[[g]]$n - 1) : production de NaN
> 2: In dt(ln, n - 1) : production de NaN
> 3: In qt(alpha/2, n - 1) : production de NaN
> 
> Could you tell me how to fix these issues? May i had a mistake of updating
> your lasted package?
> 
> Sincerly
> Tham
> 
> 
> 
> 
> 
> 
> --
> View this message in context: http://r.789695.n4.nabble.com/plot-in-package-psych-with-function-error-bars-by-tp4691632p4692177.html
> Sent from the R help mailing list archive at Nabble.com.
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

William Revelle		           http://personality-project.org/revelle.html
Professor			           http://personality-project.org
Department of Psychology   http://www.wcas.northwestern.edu/psych/
Northwestern University	   http://www.northwestern.edu/
Use R for psychology             http://personality-project.org/r
It is 5 minutes to midnight	   http://www.thebulletin.org


From frtog at vestas.com  Thu Jun 19 15:52:13 2014
From: frtog at vestas.com (=?utf-8?B?RnJlZGUgQWFrbWFubiBUw7hnZXJzZW4=?=)
Date: Thu, 19 Jun 2014 15:52:13 +0200
Subject: [R] extract a subset of non-contiguous elements of a matrix
Message-ID: <87fhqmy0osq26fkpfuc3rmuh.1403185929184@email.android.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140619/df7847c3/attachment.pl>

From kasterma at kasterma.net  Thu Jun 19 16:39:14 2014
From: kasterma at kasterma.net (Bart Kastermans)
Date: Thu, 19 Jun 2014 16:39:14 +0200
Subject: [R] bar plot stacked
In-Reply-To: <6034d78728efab696e76e0abfd05facf@openmailbox.org>
References: <6034d78728efab696e76e0abfd05facf@openmailbox.org>
Message-ID: <3FC9BC43-6302-4963-B665-43C85864120E@kasterma.net>

On 19 Jun 2014, at 15:42, message <letter at openmailbox.org> wrote:

> Readers,
> 
> For data set:
> 
> a, 90, 10
> b, 60, 40
> c, ,
> d, , 50
> 
> A plot was attempted:

Wonder who attempted this. :-)

> 
> dataset<-as.matrix(read.csv("datafile.csv",header=FALSE))

Look at your dataset; I?d say it is clearly not what you want.

> barplot<-(dataset,horiz=TRUE)
> 
> A warning message is returned, about NAs introduced by coercion and an undesirable graph. The desired output is something similar to:
> 
> a	---------*
> b	------****
> c
> d	****
> 
> Whereby a legend would be produced to describe '*' and '-'. Any help please?

library(ggplot2)
library(reshape2)
ddd <- read.csv("testdata.csv", header=FALSE)
ggplot(melt(ddd, id.vars="V1"), aes(x=V1, y=value, fill=variable)) + geom_bar(stat="identity") + coord_flip()

Best,
Bart


> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From dcarlson at tamu.edu  Thu Jun 19 16:48:29 2014
From: dcarlson at tamu.edu (David L Carlson)
Date: Thu, 19 Jun 2014 14:48:29 +0000
Subject: [R] apply diff type function to matrix
In-Reply-To: <f0036292285384cacce6089135d9a0cb@openmailbox.org>
References: <f0036292285384cacce6089135d9a0cb@openmailbox.org>
Message-ID: <53BF8FB63FAF2E4A9455EF1EE94DA726F78932@mb02.ads.tamu.edu>

I'm not sure we have enough information, but given your matrix:

> mt <- matrix(c(1, 2, 3, 10, 15, 20, 20, 40, 80, 30, 60, 120), 3, 4)
> mt
     [,1] [,2] [,3] [,4]
[1,]    1   10   20   30
[2,]    2   15   40   60
[3,]    3   20   80  120
# Get differences between adjacent values in each column
> mt.d <- abs(diff(mt))
> mt.d
     [,1] [,2] [,3] [,4]
[1,]    1    5   20   30
[2,]    1    5   40   60
# Get ratio of cols 2-4 to col 1
> mt.d[,-1]/mt.d[,1]
     [,1] [,2] [,3]
[1,]    5   20   30
[2,]    5   40   60
# Get ratio of cols 2-4 to cols 1-3
> mt.d[,-1]/mt.d[,1:3]
     [,1] [,2] [,3]
[1,]    5    4  1.5
[2,]    5    8  1.5

-------------------------------------
David L Carlson
Department of Anthropology
Texas A&M University
College Station, TX 77840-4352


-----Original Message-----
From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On Behalf Of message
Sent: Thursday, June 19, 2014 8:42 AM
To: r-help at r-project.org
Subject: [R] apply diff type function to matrix

Readers,

For a matrix:
1 10 20 30
2 15 40 60
3 20 80 120

Using a spreadsheet, a differential function can be applied to the data 
as a formula:
|(10-15)/(1-2)| ... repeated for each pair of adjacent values
What is the corresponding function in R please?
Is it better to write a new function, or to use some form of function 
'diff'?

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From maechler at stat.math.ethz.ch  Thu Jun 19 16:50:15 2014
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Thu, 19 Jun 2014 16:50:15 +0200
Subject: [R] How can I avoid the for and If loops in my function?
In-Reply-To: <201406182000.s5IK0HT2003617@smtp.ufl.edu>
References: <201406182000.s5IK0HT2003617@smtp.ufl.edu>
Message-ID: <21410.63655.912485.28820@stat.math.ethz.ch>

>>>>> lmramba  <lmramba at ufl.edu>
>>>>>     on Wed, 18 Jun 2014 20:00:15 +0000 writes:

    > Hi Jim. If I avoid the dataframe, how can use the function model.matrix() to
    > build the incident matrices X, And Z? I tried saving the design as matrix
    > but ghen I got the wrong design matrix.

I think you are entirely right here, Laz.
That indeed you have data frame and a formula --> model.matrix()
to get the matrix.

I have no time currently to delve into your 
example, and I see 
- it is not reproducible {you use a function
  varG() that is undefined} 
- you use foreach just so you can use %do% in one place which I
  think makes no sense
- you use package 'gmp' which I don't think you'd use, but I
  don't know as your code is not reproducible ....
- you use "<<-" in quite a few places in your code, which is
  considered really bad programming style and makes it very hard
  to understand the code by reading it ...

... *but* .. after all that ...
...
as maintainer of the Matrix package 
I'm close to absolutely sure that you want to work with *sparse*
matrices as Matrix provides.

So in fact, do use

## "require":  just so you are not tempted to call a package a "library"
require(Matrix)

help(sparse.model.matrix)

and then do 
- use  sparse.model.matrix() instead of model.matrix().

Further, do 
- use Diagonal() instead of  diag()  for *constructing* diagonal matrices.

Please let us know if this helps

[and maybe fix your example to become reproducible: do
 
   rm(list=ls(all=TRUE))
 
 before  source(...) ing the reproducible example script...
]

Martin Maechler, ETH Zurich


    > Thanks.

    > Laz


    > Sent from my LG Optimus G?, an AT&T 4G LTE smartphone
    > ------ Original message ------
    > From: jim holtman
    > Date: 6/18/2014 3:49 PM
    > To: Laz;
    > Cc: R mailing list;
    > Subject:Re: [R] How can I avoid the for and If loops in my function?

    > First order of business, without looking in detail at the code, is to avoid
    > the use of dataframes.  If all your values are numerics, then use a matrix.
    > It will be faster execution.
    > I did see the following statements:
    > newmatdf<-Des[[i]]
    > Des[[i]]<-newmatdf
    > why are you just putting back what you pulled out of the list?

    > Jim Holtman
    > Data Munger Guru

    > What is the problem that you are trying to solve?
    > Tell me what you want to do, not how you want to do it.
    > On Wed, Jun 18, 2014 at 12:41 PM, Laz <[1]lmramba at ufl.edu> wrote:

    > Dear R-users,
    > I have a 3200 by 3200 matrix that was build from a data frame that had
    > 180 observations,  with variables: x, y, blocks (6 blocks) and
    > treatments (values range from 1 to 180) I am working on. I build other
    > functions that seem to work well. However, I have one function that has
    > many If loops and a long For loop that delays my results for over 10
    > hours ! I need your help to avoid these loops.
    > ########################################################
    > ## I need to avoid these for loops and if loops here :
    > ########################################################
    > ### swapsimple() is a function that takes in a dataframe, randomly swaps
    > two elements from the same block in a data frame and generates a new
    > dataframe called newmatdf
    > ### swapmainF() is a function that calculates the trace of the final N
    > by N matrix considering the incident matrices and blocks and treatments
    > and residual errors in a linear mixed model framework using Henderson
    > approach.
    > funF<- function(newmatdf, n, traceI)
    > {
    > # n = number of iterations (swaps to be made on pairs of elements of the
    > dataframe, called newmatdf)
    > # newmatdf : is the original dataframe with N rows, and 4 variables
    > (x,y,blocks,genotypes)
    > matrix0<-newmatdf
    > trace<-traceI  ##  sum of the diagonal elements of the N by N matrix
    > (generated outside this loop) from the original newmatdf dataframe
    > res <- list(mat = NULL, Design_best = newmatdf, Original_design =
    > matrix0) # store our output of interest
    > res$mat <- rbind(res$mat, c(value = trace, iterations = 0)) #
    > initialized values
    > Des<-list()
    > for(i in seq_len(n)){
    > ifelse(i==1,
    > newmatdf<-swapsimple(matrix0),newmatdf<-swapsimple(newmatdf))
    > Des[[i]]<-newmatdf
    > if(swapmainF(newmatdf) < trace){
    > newmatdf<-Des[[i]]
    > Des[[i]]<-newmatdf
    > trace<- swapmainF(newmatdf)
    > res$mat <- rbind(res$mat, c(trace = trace, iterations = i))
    > res$Design_best <- newmatdf
    > }
    > if(swapmainF(newmatdf) > trace & nrow(res$mat)<=1){
    > newmatdf<-matrix0
    > Des[[i]]<-matrix0
    > res$Design_best<-matrix0
    > }
    > if(swapmainF(newmatdf)> trace & nrow(res$mat)>1){
    > newmatdf<-Des[[length(Des)-1]]
    > Des[[i]]<-newmatdf
    > res$Design_best<-newmatdf
    > }
    > }
    > res
    > }
    > The above function was created to:
    > Take  an original matrix, called matrix0, calculate its trace.
    > Generate a new matrix, called newmatdf after  swapping two elements of the
    > old one and  calculate the trace. If the trace of the newmatrix is
    > smaller than
    > that of the previous matrix, store both the current trace together
    > with the older trace and their  iteration values. If the newer matrix has
    > a trace larger than the previous trace, drop this trace and drop this
    > matrix too (but count its iteration).
    > Re-swap the old matrix that you stored previously and recalculate the
    > trace. Repeat the
    > process many times, say 10,000. The final results should be a list
    > with the original initial matrix and its trace, the final best
    > matrix that had the smallest trace after the 10000 simulations and a
    > dataframe  showing the values of the accepted traces that
    > were smaller than the previous and their respective iterations.
    > $Original_design
    > x  y block genotypes
    > 1    1  1     1        29
    > 7    1  2     1         2
    > 13   1  3     1         8
    > 19   1  4     1        10
    > 25   1  5     1         9
    > 31   1  6     2        29
    > 37   1  7     2         4
    > 43   1  8     2        22
    > 49   1  9     2         3
    > 55   1 10     2        26
    > 61   1 11     3        18
    > 67   1 12     3        19
    > 73   1 13     3        28
    > 79   1 14     3        10
    > ------truncated ----
    > the final results after running  funF<-
    > function(newmatdf,n,traceI)  given below looks like this:
    > ans1
    > $mat
    > value iterations
    > [1,] 1.474952          0
    > [2,] 1.474748          1
    > [3,] 1.474590          2
    > [4,] 1.474473          3
    > [5,] 1.474411          5
    > [6,] 1.474294         10
    > [7,] 1.474182         16
    > [8,] 1.474058         17
    > [9,] 1.473998         19
    > [10,] 1.473993         22
    > ---truncated
    > $Design_best
    > x  y block genotypes
    > 1    1  1     1        29
    > 7    1  2     1         2
    > 13   1  3     1        18
    > 19   1  4     1        10
    > 25   1  5     1         9
    > 31   1  6     2        29
    > 37   1  7     2        21
    > 43   1  8     2         6
    > 49   1  9     2         3
    > 55   1 10     2        26
    > ---- truncated
    > $Original_design
    > x  y block genotypes
    > 1    1  1     1        29
    > 7    1  2     1         2
    > 13   1  3     1         8
    > 19   1  4     1        10
    > 25   1  5     1         9
    > 31   1  6     2        29
    > 37   1  7     2         4
    > 43   1  8     2        22
    > 49   1  9     2         3
    > 55   1 10     2        26
    > 61   1 11     3        18
    > 67   1 12     3        19
    > 73   1 13     3        28
    > 79   1 14     3        10
    > ------truncated
    > Regards,
    > Laz
    > [[alternative HTML version deleted]]
    > ______________________________________________
    > [2]R-help at r-project.org mailing list
    > [3]https://stat.ethz.ch/mailman/listinfo/r-help
    > PLEASE do read the posting
    > guide [4]http://www.R-project.org/posting-guide.html
    > and provide commented, minimal, self-contained, reproducible code.

    > References

    > 1. mailto:lmramba at ufl.edu
    > 2. mailto:R-help at r-project.org
    > 3. https://stat.ethz.ch/mailman/listinfo/r-help
    > 4. http://www.R-project.org/posting-guide.html
    > ______________________________________________
    > R-help at r-project.org mailing list
    > https://stat.ethz.ch/mailman/listinfo/r-help
    > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    > and provide commented, minimal, self-contained, reproducible code.


From wdunlap at tibco.com  Thu Jun 19 16:57:12 2014
From: wdunlap at tibco.com (William Dunlap)
Date: Thu, 19 Jun 2014 07:57:12 -0700
Subject: [R] bar plot stacked
In-Reply-To: <6034d78728efab696e76e0abfd05facf@openmailbox.org>
References: <6034d78728efab696e76e0abfd05facf@openmailbox.org>
Message-ID: <CAF8bMcb4n7Y-YkZ5iLhY2crTLx55Jos3+xJ+nPwegsvqS7PTnA@mail.gmail.com>

> dataset<-as.matrix(read.csv("datafile.csv",header=FALSE))

You should always inspect the dataset immediately after reading it in, before
doing other manipulations on it.  Converting data from one format to
another is always going to be error-prone.  Plotting it, say with
pairs() or just plot(), is good and so is printing it, say with
summary(), str(), and print().

In your case I get (after copying your file to the clipboard):
R> df <- read.csv("clipboard",header=FALSE)
R> df
  V1 V2 V3
1  a 90 10
2  b 60 40
3  c NA NA
4  d NA 50
R> str(df)
'data.frame':   4 obs. of  3 variables:
 $ V1: Factor w/ 4 levels "a","b","c","d": 1 2 3 4
 $ V2: int  90 60 NA NA
 $ V3: int  10 40 NA 50

Because the first column is not numeric, as.matrix(df) will make a
character matrix and then barplot will get confused.

You can use the row.names=1 argument to read.csv to make the letters
the row names of df or you can convert just the 2nd and 3rd columns to
a matrix.

Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Thu, Jun 19, 2014 at 6:42 AM, message <letter at openmailbox.org> wrote:
> Readers,
>
> For data set:
>
> a, 90, 10
> b, 60, 40
> c, ,
> d, , 50
>
> A plot was attempted:
>
> dataset<-as.matrix(read.csv("datafile.csv",header=FALSE))
> barplot<-(dataset,horiz=TRUE)
>
> A warning message is returned, about NAs introduced by coercion and an
> undesirable graph. The desired output is something similar to:
>
> a       ---------*
> b       ------****
> c
> d       ****
>
> Whereby a legend would be produced to describe '*' and '-'. Any help please?
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From lmramba at ufl.edu  Thu Jun 19 17:04:43 2014
From: lmramba at ufl.edu (Mramba,Lazarus K)
Date: Thu, 19 Jun 2014 11:04:43 -0400
Subject: [R] How can I avoid the for and If loops in my function?
In-Reply-To: <21410.63655.912485.28820@stat.math.ethz.ch>
References: <201406182000.s5IK0HT2003617@smtp.ufl.edu>
	<21410.63655.912485.28820@stat.math.ethz.ch>
Message-ID: <992242aae2f817a4d385b8cb3d82d79a@ufl.edu>

Hi Martin,

Thanks for the useful comments. It has greatly improved the efficiency 
of my functions. I am sorry that I forgot to paste the functions varG 
and others which I have done here for reproducibility.


#############################
## a function to calculate h2
## (heritability)
###############################
herit<-function(varG,varR=1)
{
   h<-4*varG/(varG+varR)
   h
}
###################################
# function to calculate random error
varR<-function(varG,h2)
{
   varR<- varG*(4-h2)/h2
   varR
}

##########################################
# function to calculate treatment variance
varG<-function(varR=1,h2)
{
   varG<-varR*h2/(4-h2)
   varG
}

###############################

I used the package "gmp" so that I can use the function "is.whole()".

I have managed to reduce the complexity of the function that I needed 
help. It now takes half the time it used to take before, but it is 
several hours and wish I can cut these hours down by doing away with the 
for and if loops in this code.
Any help will be appreciated.

newfunF<- function(matrix0,n,traceI)
{
   newmatdf<-matrix0
   trace<-traceI
   mat <- NULL
   Design_best <- newmatdf
   mat <- rbind(mat, c(value = trace, iterations = 0))
   Des<-list()
   newmatdf<-swapsimple(matrix0)
   for(i in 2:n){
      newmatdf<-swapsimple(newmatdf)
     Des[[i]]<-newmatdf
     if(swapmainF(newmatdf) < trace){
       Design_best <- Des[[i]]<-newmatdf
       trace<- swapmainF(newmatdf)
       mat <- rbind(mat, c(trace = trace, iterations = i))
     }
    }
  list(mat=mat,Design_best=Design_best)
}





On Thu, 19 Jun 2014 16:50:15 +0200, Martin Maechler wrote:
>>>>>> lmramba  <lmramba at ufl.edu>
>>>>>>     on Wed, 18 Jun 2014 20:00:15 +0000 writes:
>
>     > Hi Jim. If I avoid the dataframe, how can use the function
> model.matrix() to
>     > build the incident matrices X, And Z? I tried saving the design
> as matrix
>     > but ghen I got the wrong design matrix.
>
> I think you are entirely right here, Laz.
> That indeed you have data frame and a formula --> model.matrix()
> to get the matrix.
>
> I have no time currently to delve into your
> example, and I see
> - it is not reproducible {you use a function
>   varG() that is undefined}
> - you use foreach just so you can use %do% in one place which I
>   think makes no sense
> - you use package 'gmp' which I don't think you'd use, but I
>   don't know as your code is not reproducible ....
> - you use "<<-" in quite a few places in your code, which is
>   considered really bad programming style and makes it very hard
>   to understand the code by reading it ...
>
> ... *but* .. after all that ...
> ...
> as maintainer of the Matrix package
> I'm close to absolutely sure that you want to work with *sparse*
> matrices as Matrix provides.
>
> So in fact, do use
>
> ## "require":  just so you are not tempted to call a package a 
> "library"
> require(Matrix)
>
> help(sparse.model.matrix)
>
> and then do
> - use  sparse.model.matrix() instead of model.matrix().
>
> Further, do
> - use Diagonal() instead of  diag()  for *constructing* diagonal 
> matrices.
>
> Please let us know if this helps
>
> [and maybe fix your example to become reproducible: do
>
>    rm(list=ls(all=TRUE))
>
>  before  source(...) ing the reproducible example script...
> ]
>
> Martin Maechler, ETH Zurich
>
>
>     > Thanks.
>
>     > Laz
>
>
>     > Sent from my LG Optimus G?, an AT&T 4G LTE smartphone
>     > ------ Original message ------
>     > From: jim holtman
>     > Date: 6/18/2014 3:49 PM
>     > To: Laz;
>     > Cc: R mailing list;
>     > Subject:Re: [R] How can I avoid the for and If loops in my 
> function?
>
>     > First order of business, without looking in detail at the code,
> is to avoid
>     > the use of dataframes.  If all your values are numerics, then
> use a matrix.
>     > It will be faster execution.
>     > I did see the following statements:
>     > newmatdf<-Des[[i]]
>     > Des[[i]]<-newmatdf
>     > why are you just putting back what you pulled out of the list?
>
>     > Jim Holtman
>     > Data Munger Guru
>
>     > What is the problem that you are trying to solve?
>     > Tell me what you want to do, not how you want to do it.
>     > On Wed, Jun 18, 2014 at 12:41 PM, Laz <[1]lmramba at ufl.edu> 
> wrote:
>
>     > Dear R-users,
>     > I have a 3200 by 3200 matrix that was build from a data frame 
> that had
>     > 180 observations,  with variables: x, y, blocks (6 blocks) and
>     > treatments (values range from 1 to 180) I am working on. I 
> build other
>     > functions that seem to work well. However, I have one function 
> that has
>     > many If loops and a long For loop that delays my results for 
> over 10
>     > hours ! I need your help to avoid these loops.
>     > ########################################################
>     > ## I need to avoid these for loops and if loops here :
>     > ########################################################
>     > ### swapsimple() is a function that takes in a dataframe,
> randomly swaps
>     > two elements from the same block in a data frame and generates 
> a new
>     > dataframe called newmatdf
>     > ### swapmainF() is a function that calculates the trace of the 
> final N
>     > by N matrix considering the incident matrices and blocks and 
> treatments
>     > and residual errors in a linear mixed model framework using 
> Henderson
>     > approach.
>     > funF<- function(newmatdf, n, traceI)
>     > {
>     > # n = number of iterations (swaps to be made on pairs of
> elements of the
>     > dataframe, called newmatdf)
>     > # newmatdf : is the original dataframe with N rows, and 4 
> variables
>     > (x,y,blocks,genotypes)
>     > matrix0<-newmatdf
>     > trace<-traceI  ##  sum of the diagonal elements of the N by N 
> matrix
>     > (generated outside this loop) from the original newmatdf 
> dataframe
>     > res <- list(mat = NULL, Design_best = newmatdf, Original_design 
> =
>     > matrix0) # store our output of interest
>     > res$mat <- rbind(res$mat, c(value = trace, iterations = 0)) #
>     > initialized values
>     > Des<-list()
>     > for(i in seq_len(n)){
>     > ifelse(i==1,
>     > newmatdf<-swapsimple(matrix0),newmatdf<-swapsimple(newmatdf))
>     > Des[[i]]<-newmatdf
>     > if(swapmainF(newmatdf) < trace){
>     > newmatdf<-Des[[i]]
>     > Des[[i]]<-newmatdf
>     > trace<- swapmainF(newmatdf)
>     > res$mat <- rbind(res$mat, c(trace = trace, iterations = i))
>     > res$Design_best <- newmatdf
>     > }
>     > if(swapmainF(newmatdf) > trace & nrow(res$mat)<=1){
>     > newmatdf<-matrix0
>     > Des[[i]]<-matrix0
>     > res$Design_best<-matrix0
>     > }
>     > if(swapmainF(newmatdf)> trace & nrow(res$mat)>1){
>     > newmatdf<-Des[[length(Des)-1]]
>     > Des[[i]]<-newmatdf
>     > res$Design_best<-newmatdf
>     > }
>     > }
>     > res
>     > }
>     > The above function was created to:
>     > Take  an original matrix, called matrix0, calculate its trace.
>     > Generate a new matrix, called newmatdf after  swapping two
> elements of the
>     > old one and  calculate the trace. If the trace of the newmatrix 
> is
>     > smaller than
>     > that of the previous matrix, store both the current trace 
> together
>     > with the older trace and their  iteration values. If the newer
> matrix has
>     > a trace larger than the previous trace, drop this trace and 
> drop this
>     > matrix too (but count its iteration).
>     > Re-swap the old matrix that you stored previously and 
> recalculate the
>     > trace. Repeat the
>     > process many times, say 10,000. The final results should be a 
> list
>     > with the original initial matrix and its trace, the final best
>     > matrix that had the smallest trace after the 10000 simulations 
> and a
>     > dataframe  showing the values of the accepted traces that
>     > were smaller than the previous and their respective iterations.
>     > $Original_design
>     > x  y block genotypes
>     > 1    1  1     1        29
>     > 7    1  2     1         2
>     > 13   1  3     1         8
>     > 19   1  4     1        10
>     > 25   1  5     1         9
>     > 31   1  6     2        29
>     > 37   1  7     2         4
>     > 43   1  8     2        22
>     > 49   1  9     2         3
>     > 55   1 10     2        26
>     > 61   1 11     3        18
>     > 67   1 12     3        19
>     > 73   1 13     3        28
>     > 79   1 14     3        10
>     > ------truncated ----
>     > the final results after running  funF<-
>     > function(newmatdf,n,traceI)  given below looks like this:
>     > ans1
>     > $mat
>     > value iterations
>     > [1,] 1.474952          0
>     > [2,] 1.474748          1
>     > [3,] 1.474590          2
>     > [4,] 1.474473          3
>     > [5,] 1.474411          5
>     > [6,] 1.474294         10
>     > [7,] 1.474182         16
>     > [8,] 1.474058         17
>     > [9,] 1.473998         19
>     > [10,] 1.473993         22
>     > ---truncated
>     > $Design_best
>     > x  y block genotypes
>     > 1    1  1     1        29
>     > 7    1  2     1         2
>     > 13   1  3     1        18
>     > 19   1  4     1        10
>     > 25   1  5     1         9
>     > 31   1  6     2        29
>     > 37   1  7     2        21
>     > 43   1  8     2         6
>     > 49   1  9     2         3
>     > 55   1 10     2        26
>     > ---- truncated
>     > $Original_design
>     > x  y block genotypes
>     > 1    1  1     1        29
>     > 7    1  2     1         2
>     > 13   1  3     1         8
>     > 19   1  4     1        10
>     > 25   1  5     1         9
>     > 31   1  6     2        29
>     > 37   1  7     2         4
>     > 43   1  8     2        22
>     > 49   1  9     2         3
>     > 55   1 10     2        26
>     > 61   1 11     3        18
>     > 67   1 12     3        19
>     > 73   1 13     3        28
>     > 79   1 14     3        10
>     > ------truncated
>     > Regards,
>     > Laz
>     > [[alternative HTML version deleted]]
>     > ______________________________________________
>     > [2]R-help at r-project.org mailing list
>     > [3]https://stat.ethz.ch/mailman/listinfo/r-help
>     > PLEASE do read the posting
>     > guide [4]http://www.R-project.org/posting-guide.html
>     > and provide commented, minimal, self-contained, reproducible 
> code.
>
>     > References
>
>     > 1. mailto:lmramba at ufl.edu
>     > 2. mailto:R-help at r-project.org
>     > 3. https://stat.ethz.ch/mailman/listinfo/r-help
>     > 4. http://www.R-project.org/posting-guide.html
>     > ______________________________________________
>     > R-help at r-project.org mailing list
>     > https://stat.ethz.ch/mailman/listinfo/r-help
>     > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
>     > and provide commented, minimal, self-contained, reproducible 
> code.


From nelson.e.v.martins at gmail.com  Thu Jun 19 11:52:39 2014
From: nelson.e.v.martins at gmail.com (Nelson Martins)
Date: Thu, 19 Jun 2014 10:52:39 +0100
Subject: [R] Publication-ready figures with two plots
In-Reply-To: <AA818EAD2576BC488B4F623941DA7427F3A7B528@inbomail.inbo.be>
References: <CALQiR096_SKpnxsNKEssPU_k0QkHf6bpF4ZVNQWGKdtL6QHcWQ@mail.gmail.com>
	<AA818EAD2576BC488B4F623941DA7427F3A7B528@inbomail.inbo.be>
Message-ID: <CAES6D9aqSuC0USvOEgB4_aMXhJDve_snXjc2MjDcXgw9_bMrTw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140619/6c8ebd5e/attachment.pl>

From adrian.baddeley at uwa.edu.au  Thu Jun 19 02:50:07 2014
From: adrian.baddeley at uwa.edu.au (Adrian Baddeley)
Date: Thu, 19 Jun 2014 08:50:07 +0800
Subject: [R] empty density plot for point pattern in spatstat
In-Reply-To: <CAL7MysnyrphaRcxHUhNT1nuy7By2fHzdHrXyTY7EQ1UxG22kKg@mail.gmail.com>
References: <CAM+rpYnjg_SGnyGrVcwuakX1xmXd7ysy1gZntdn7m2zD=kqong@mail.gmail.com>
	<CAM+rpYmz8zWkZvpNX6--a+F6vu6p2JkjzzTeoWta+PZ1oKh6jA@mail.gmail.com>
	<53A0B1C5.2080008@auckland.ac.nz>,
	<CAL7MysnyrphaRcxHUhNT1nuy7By2fHzdHrXyTY7EQ1UxG22kKg@mail.gmail.com>
Message-ID: <CF5661163F77A44781208D9AC4FDEA725D6726061A@IS-WIN-376.staffad.uwa.edu.au>

Dear Pablo

Please provide details of the system you are using (Windows - version?  R version? spatstat version?)

Also, when you issue the plot command, what graphics device are you using?
[To find out, type dev.cur() after performing the plot, and read the printout]

Try changing the colour map by running 'example(plot.im)' or 
setting col=grey(seq(0,1,length=32)) in the call to plot.im

Try setting 'useRaster=FALSE' in the call to plot.im. 

Let me know if any of these work. If not, let's talk on skype
to figure it out.

regards
Adrian


Prof Adrian Baddeley FAA
University of Western Australia
________________________________________
From: Pablo Ram?n [paramon at utpl.edu.ec]
Sent: Wednesday, 18 June 2014 9:36 PM
To: Rolf Turner
Cc: Christopher W Ryan; R-help; Adrian Baddeley
Subject: Re: [R] empty density plot for point pattern in spatstat

Dear Rolf,

The problem persists with the function plot.im<http://plot.im>(), or plot (density ()), similar to with(bei.extra, plot (elev)). This problem occurs only with my personal machine, to another machine this problem does not occur. However, when I use another function, such kde2d () in the MASS package and perform the plot, the graph is obtained without problem.

Best wishes
Pablo





2014-06-17 16:23 GMT-05:00 Rolf Turner <r.turner at auckland.ac.nz<mailto:r.turner at auckland.ac.nz>>:
On 18/06/14 03:49, Christopher W Ryan wrote:
I upgraded to version 3.1.0 of R, still on Win XP, but that did not
solve the problem:

library(spatstat)
data(redwood)
str(redwood)
plot(redwood)  # works OK
plot(Kest(redwood))  # works OK
plot(density(redwood))  # produces an "empty" plot
                                        # with just the figure border
                                        # and a thin vertical box for
the color ramp
                                        # but no color ramp in it

Any other ideas? I'd be much obliged.

I have had an inquiry of this nature previously and sad to say was completely unable to find a solution.  I made numerous suggestions to the inquirer, e.g.:

*looking for a plot.im<http://plot.im>() function masking the "real"
plot.im<http://plot.im>() function from spatstat

* cleaning out the global environment
(.RData) in case there were some "artefacts" hanging around that had an impact on plot.im<http://plot.im>()

* completely *removing* .RData and starting again,...

Nothing worked.

It is very difficult to diagnose a problem like this remotely.  If you could find an R guru who was able to come and sit with you at your computer it is ***just possible*** that they could track down what is going wrong.

However it seems to me that the problem is due to some sort of recalcitrance of the Windoze system and is thus probably insoluble.

I am cc-ing this to the person who made the previous inquiry.  Pablo, have there been any further developments since we last communicated about this problem?

cheers,

Rolf Turner

P. S. BTW Chris:  Does plot.im<http://plot.im>() screw up with other images?  E.g. what happens if you do

with(bei.extra,plot(elev))

???

R. T.




--
Mat. Pablo Ram?n
Secci?n de Ecolog?a
Departamento de Ciencias Naturales
Universidad T?cnica Particular de Loja (http://www.utpl.edu.ec/)
Telf. 593 7 2570275 Ext. 2505, 2258


From revelle at northwestern.edu  Thu Jun 19 04:07:34 2014
From: revelle at northwestern.edu (William R Revelle)
Date: Thu, 19 Jun 2014 02:07:34 +0000
Subject: [R] plot in package psych with function error.bars.by
In-Reply-To: <1402905177769-4692177.post@n4.nabble.com>
References: <1401776898895-4691632.post@n4.nabble.com>
	<107834395.A8ZI0oDvek@localhost.localdomain>
	<177721B3-887B-40EE-8A89-9EA39EE95A5D@revelle.net>
	<C3066D7C-B838-4EDA-BCBE-E6B0F0433F3D@revelle.net>
	<1402905177769-4692177.post@n4.nabble.com>
Message-ID: <28271C85-0EEF-4A76-A550-7CA82A73A38B@northwestern.edu>

Tham,
   What you have found is that the cats eyes of the error bars will throw an error if there no variance for a cell (or, just one person in a cell). This I will fix so that it complains but doesn?t quit.

The example you were running was filtering out the subjects less than 10 years old and more than 80.  This was done to avoid the problem you detected.

You can actually draw the plot with error bars and the pch specified as you wanted, if you set eyes=FALSE.  This gives the error bars without the offending cats eyes.

I will have an update on the server in about two days.

Bill

On Jun 16, 2014, at 2:52 AM, Tham Tran <hanhtham.tran at yahoo.com.vn> wrote:

> Hi William,
> 
> I've just updated your latest package "psych_1.4.6.11.zip" from server
> "personality-project/r/src/contrib/". One time the updating process was
> finished, i tried to run based samples code:
> 
> require(psych)
> keys.list=list(Agree=c(-1,2:5),Conscientious=c(6:8,-9,-10),Extraversion=c(-11,-12,13:15),Neuroticism=c(16:20),Openness
> = c(21,-22,23,24,-25))
> keys = make.keys(28,keys.list,item.labels=colnames(bfi))
> scores = scoreItems(keys,bfi,min=1,max=6) 
> error.bars.by(scores$scores,round(bfi$age/10)*10,by.var=TRUE,main="BFI age
> trends",legend=3,labels=colnames(scores$scores),xlab="Age",ylab="Mean item
> score")
> 
> then i had an error following: 
> 
> Erreur dans if (del == 0 && to == 0) return(to) : 
>  valeur manquante l? o? TRUE / FALSE est requis
> De plus : Messages d'avis :
> 1: In qt(1 - alpha/2, group.stats[[g]]$n - 1) : production de NaN
> 2: In dt(ln, n - 1) : production de NaN
> 3: In qt(alpha/2, n - 1) : production de NaN
> 
> Could you tell me how to fix these issues? May i had a mistake of updating
> your lasted package?
> 
> Sincerly
> Tham
> 
> 
> 
> 
> 
> 
> --
> View this message in context: http://r.789695.n4.nabble.com/plot-in-package-psych-with-function-error-bars-by-tp4691632p4692177.html
> Sent from the R help mailing list archive at Nabble.com.
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

William Revelle		           http://personality-project.org/revelle.html
Professor			           http://personality-project.org
Department of Psychology   http://www.wcas.northwestern.edu/psych/
Northwestern University	   http://www.northwestern.edu/
Use R for psychology             http://personality-project.org/r
It is 5 minutes to midnight	   http://www.thebulletin.org


From hafizuddinarshad21 at gmail.com  Thu Jun 19 04:53:13 2014
From: hafizuddinarshad21 at gmail.com (Hafizuddin Arshad)
Date: Wed, 18 Jun 2014 19:53:13 -0700
Subject: [R] Creating a Series of Maxima
Message-ID: <CAAPm8Opi1GfAGtQE5UnPFZ6pnLUQW-YeV6LXwOcTE-oL9N84gw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140618/5db7fd37/attachment.pl>

From das2890 at gmail.com  Thu Jun 19 06:31:48 2014
From: das2890 at gmail.com (Daniel Schwartz)
Date: Wed, 18 Jun 2014 21:31:48 -0700
Subject: [R] Output levels of categorical data to Excel using with()
Message-ID: <CAHY7Kmfy=HagDKpHohaWmgP6sDj-MN6Pfj++jq2HfROX5s2Qpg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140618/8036b47e/attachment.pl>

From adrian.baddeley at uwa.edu.au  Thu Jun 19 08:00:40 2014
From: adrian.baddeley at uwa.edu.au (Adrian Baddeley)
Date: Thu, 19 Jun 2014 14:00:40 +0800
Subject: [R] empty density plot for point pattern in spatstat
In-Reply-To: <53A24AEE.50601@binghamton.edu>
References: <CAM+rpYnjg_SGnyGrVcwuakX1xmXd7ysy1gZntdn7m2zD=kqong@mail.gmail.com>
	<CAM+rpYmz8zWkZvpNX6--a+F6vu6p2JkjzzTeoWta+PZ1oKh6jA@mail.gmail.com>
	<53A0B1C5.2080008@auckland.ac.nz>,
	<CAL7MysnyrphaRcxHUhNT1nuy7By2fHzdHrXyTY7EQ1UxG22kKg@mail.gmail.com>
	<CF5661163F77A44781208D9AC4FDEA725D6726061A@IS-WIN-376.staffad.uwa.edu.au>,
	<53A24AEE.50601@binghamton.edu>
Message-ID: <CF5661163F77A44781208D9AC4FDEA725D67260620@IS-WIN-376.staffad.uwa.edu.au>

I think I have the solution to the problem 
experienced by users of 'spatstat' on Windows machines,
who are finding that plot.im() gives empty colour images.

Short answer: set useRaster=FALSE in the call to plot.im.

Long answer: 
spatstat::plot.im calls graphics::image.default with the argument 'useRaster=TRUE' by default.
When useRaster=TRUE, the image is displayed by the function rasterImage from the graphics package. 
This is done to improve behaviour on *some* Windows systems.
But, for unknown reasons, this does not work on Windows Server and on a few versions of Windows XP. 
On those systems you may need to set useRaster=FALSE to get a plot. 

You can also use the command dev.capabilities() to check whether your current device
supports useRaster=TRUE.

In the next release of spatstat we will automatically detect this and set appropriate defaults.

Adrian

Prof Adrian Baddeley FAA
University of Western Australia
________________________________________
From: Christopher W. Ryan [cryan at binghamton.edu]
Sent: Thursday, 19 June 2014 10:29 AM
To: Adrian Baddeley; Pablo Ram?n; Rolf Turner
Cc: R-help
Subject: Re: [R] empty density plot for point pattern in spatstat

Let me just say that the expertise and support on this List is amazing,
and I'm very grateful. I'm learning a lot from your discussions.

I will not be at my problematic machine again until Friday 20 June. I
will take these steps then, and try to provide as many details about the
system as I can. It is Win XP, now R 3.1.0, and (IIRC) spatstat 1.37-0
'Model Prisoner'.

I do not encounter the problem on Windows 7, R 3.1.0, spatstat 1.36-0
?Intense Scrutiny?.  Nor on Ubuntu 12.04, R 3.1.0, spatstat 1.36-0.

 Thanks.

--Chris Ryan

Adrian Baddeley wrote:
> Dear Pablo
>
> Please provide details of the system you are using (Windows - version?  R version? spatstat version?)
>
> Also, when you issue the plot command, what graphics device are you using?
> [To find out, type dev.cur() after performing the plot, and read the printout]
>
> Try changing the colour map by running 'example(plot.im)' or
> setting col=grey(seq(0,1,length=32)) in the call to plot.im
>
> Try setting 'useRaster=FALSE' in the call to plot.im.
>
> Let me know if any of these work. If not, let's talk on skype
> to figure it out.
>
> regards
> Adrian
>
>
> Prof Adrian Baddeley FAA
> University of Western Australia
> ________________________________________
> From: Pablo Ram?n [paramon at utpl.edu.ec]
> Sent: Wednesday, 18 June 2014 9:36 PM
> To: Rolf Turner
> Cc: Christopher W Ryan; R-help; Adrian Baddeley
> Subject: Re: [R] empty density plot for point pattern in spatstat
>
> Dear Rolf,
>
> The problem persists with the function plot.im<http://plot.im>(), or plot (density ()), similar to with(bei.extra, plot (elev)). This problem occurs only with my personal machine, to another machine this problem does not occur. However, when I use another function, such kde2d () in the MASS package and perform the plot, the graph is obtained without problem.
>
> Best wishes
> Pablo
>
>
>
>
>
> 2014-06-17 16:23 GMT-05:00 Rolf Turner <r.turner at auckland.ac.nz<mailto:r.turner at auckland.ac.nz>>:
> On 18/06/14 03:49, Christopher W Ryan wrote:
> I upgraded to version 3.1.0 of R, still on Win XP, but that did not
> solve the problem:
>
> library(spatstat)
> data(redwood)
> str(redwood)
> plot(redwood)  # works OK
> plot(Kest(redwood))  # works OK
> plot(density(redwood))  # produces an "empty" plot
>                                         # with just the figure border
>                                         # and a thin vertical box for
> the color ramp
>                                         # but no color ramp in it
>
> Any other ideas? I'd be much obliged.
>
> I have had an inquiry of this nature previously and sad to say was completely unable to find a solution.  I made numerous suggestions to the inquirer, e.g.:
>
> *looking for a plot.im<http://plot.im>() function masking the "real"
> plot.im<http://plot.im>() function from spatstat
>
> * cleaning out the global environment
> (.RData) in case there were some "artefacts" hanging around that had an impact on plot.im<http://plot.im>()
>
> * completely *removing* .RData and starting again,...
>
> Nothing worked.
>
> It is very difficult to diagnose a problem like this remotely.  If you could find an R guru who was able to come and sit with you at your computer it is ***just possible*** that they could track down what is going wrong.
>
> However it seems to me that the problem is due to some sort of recalcitrance of the Windoze system and is thus probably insoluble.
>
> I am cc-ing this to the person who made the previous inquiry.  Pablo, have there been any further developments since we last communicated about this problem?
>
> cheers,
>
> Rolf Turner
>
> P. S. BTW Chris:  Does plot.im<http://plot.im>() screw up with other images?  E.g. what happens if you do
>
> with(bei.extra,plot(elev))
>
> ???
>
> R. T.
>
>
>
>
> --
> Mat. Pablo Ram?n
> Secci?n de Ecolog?a
> Departamento de Ciencias Naturales
> Universidad T?cnica Particular de Loja (http://www.utpl.edu.ec/)
> Telf. 593 7 2570275 Ext. 2505, 2258
>


From wagner.fab at gmx.de  Thu Jun 19 09:07:37 2014
From: wagner.fab at gmx.de (Wagner)
Date: Thu, 19 Jun 2014 00:07:37 -0700 (PDT)
Subject: [R] Principal component analysis with EQUAMAX rotation
Message-ID: <1403161657006-4692337.post@n4.nabble.com>

Hello,
I need to do a principal component analysis with EQUAMAX-rotation.
Unfortunately the function principal() I use normally for PCA does not offer
this rotation specification. I could find out that this might be possible
somehow with the package GPArotation but until now I could not figure out
how to use this in the principal component analysis.
Maybe someone can give an example on how to do an equamax-rotation PCA?
Or is there a function in another package that offers the use of
equamax-rotation directly?
Thank you for your help!



--
View this message in context: http://r.789695.n4.nabble.com/Principal-component-analysis-with-EQUAMAX-rotation-tp4692337.html
Sent from the R help mailing list archive at Nabble.com.


From teepe24 at hotmail.com  Thu Jun 19 13:00:32 2014
From: teepe24 at hotmail.com (=?iso-8859-1?B?Q+lsaW5lIGI=?=)
Date: Thu, 19 Jun 2014 13:00:32 +0200
Subject: [R] Rgl: rotation and colorbar
In-Reply-To: <DUB111-W56E898BEFBA1DC447D7B7EA82B0@phx.gbl>
References: <DUB111-W56E898BEFBA1DC447D7B7EA82B0@phx.gbl>
Message-ID: <DUB111-W288F57B37374AF09B71BF6A8130@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140619/605950d6/attachment.pl>

From smartpink111 at yahoo.com  Thu Jun 19 13:12:31 2014
From: smartpink111 at yahoo.com (arun)
Date: Thu, 19 Jun 2014 04:12:31 -0700
Subject: [R] Pulling data based on the quater
In-Reply-To: <1402496396.63207.YahooMailNeo@web142604.mail.bf1.yahoo.com>
References: <1402496396.63207.YahooMailNeo@web142604.mail.bf1.yahoo.com>
Message-ID: <1403176351.38290.YahooMailNeo@web142605.mail.bf1.yahoo.com>

Hi Raghu,
Using the example you provided. If you want Q3 for year 2011 and 2013. 

dat[grep("2011 Q3|2013 Q3", Qtr1),] #change accordingly
#??? ID Phase RESEARCH Area????? Date?? Result
#1? 100??? IV?? S_Care? A&P 7/23/2013 Positive
#5 2005??? IV??? Speci?? TH? 8/4/2011???? <NA>
#6 2006?? III??? Speci?? BN 7/13/2011 Positive

A.K.



Thanks a lot for the reply Arun.

I would like to pull the quarter for that particular year. say i want Q2 for year 2014 r Q2 for year 2013.

You assistance is very much appreciated.

Thanks Raghu 


On Wednesday, June 11, 2014 10:19 AM, arun <smartpink111 at yahoo.com> wrote:



Hi,
Please Check ?as.yearqtr() fromlibrary(zoo) 

dat <- read.table(text="ID? Phase RESEARCH Area?? Date Result
100?? IV???????? S_Care A&P 7/23/2013 Positive
1001?? IV???????? P_Care EU 12/20/2012 Positive
2001?? IV???????? Car??????? AS 9/13/2012 Positive
20003?? III???????? Spec???? IN 10/6/2011 NA
2005??? IV???????? Speci?? TH 8/4/2011 NA
2006? III???????? Speci???? BN 7/13/2011 Positive
21345? II???????? Pri???? HY 2/3/2011 Positive",sep="",header=TRUE,stringsAsFactors=FALSE) 


library(zoo)
Qtr1 <- as.yearqtr(dat$Date, format="%m/%d/%Y")
dat[grep("Q3",Qtr1),]
#??? ID Phase RESEARCH Area????? Date?? Result
#1? 100??? IV?? S_Care? A&P 7/23/2013 Positive
#3 2001??? IV????? Car?? AS 9/13/2012 Positive
#5 2005??? IV??? Speci?? TH? 8/4/2011???? <NA>
#6 2006?? III??? Speci?? BN 7/13/2011 Positive
A.K.




Hi ,

I have a dataset as below,

ID? Phase RESEARCH Area?? Date Result
100?? IV???????? S_Care A&P 7/23/2013 Positive
1001?? IV???????? P_Care EU 12/20/2012 Positive
2001?? IV???????? Car??????? AS 9/13/2012 Positive
20003?? III???????? Spec???? IN 10/6/2011 NA
2005??? IV???????? Speci?? TH 8/4/2011 NA
2006? III???????? Speci???? BN 7/13/2011 Positive
21345? II???????? Pri???? HY 2/3/2011 Positive

I would like to pull data based on the Quarter, for example say if i want data for 3rd quarter based on the date column how do i do it.

I tried the lubridate package but was not able to get the required result.

can any one of you assist me on this.

Your help is very much appreciated.


From rf371 at cam.ac.uk  Thu Jun 19 14:45:33 2014
From: rf371 at cam.ac.uk (Roxane Foulser-Piggott)
Date: Thu, 19 Jun 2014 13:45:33 +0100
Subject: [R] Convert nlme formula to nlmer
Message-ID: <90854403-011C-4BB1-872C-ADCDB1E92274@cam.ac.uk>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140619/d6f2dc79/attachment.pl>

From christian at echoffmann.ch  Thu Jun 19 15:10:12 2014
From: christian at echoffmann.ch (Christian Hoffmann)
Date: Thu, 19 Jun 2014 15:10:12 +0200
Subject: [R] infix paste and package
Message-ID: <53A2E134.1050706@echoffmann.ch>

Hi,

I can successfully define  in .R and in  > R

"%&%" <- function(a,b) { paste(a,b,sep="") }

nd use in R >

  "a" %&% "b"
[1] "ab"

but in a package definition .Rd
....
\name{pasteInfix}
\alias{pasteInfix}
\alias{\%&\%
}
\usage{ a  \%&\% b
}

will fail in R CMD   check --as-cran  saying

"I am" %&%
+  " hungry" # [1] "I am hungry"
Error: could not find function "%&%"
Execution halted.

What is wrong in my .Rd file?

PS:  The placement of the closing } and the escaping of "%" seem also 
critical.

TIA  Christian

-- 
Christian W. Hoffmann
Mathematiker
CH - 8915 Hausen am Albis, Schweiz
Rigiblickstrasse 15 b, Tel.+41-44-7640853
mailto: christian at echoffmann.ch
home: www.echoffmann.ch


From paramon at utpl.edu.ec  Thu Jun 19 15:12:57 2014
From: paramon at utpl.edu.ec (=?UTF-8?B?UGFibG8gUmFtw7Nu?=)
Date: Thu, 19 Jun 2014 08:12:57 -0500
Subject: [R] empty density plot for point pattern in spatstat
In-Reply-To: <CF5661163F77A44781208D9AC4FDEA725D6726061A@IS-WIN-376.staffad.uwa.edu.au>
References: <CAM+rpYnjg_SGnyGrVcwuakX1xmXd7ysy1gZntdn7m2zD=kqong@mail.gmail.com>
	<CAM+rpYmz8zWkZvpNX6--a+F6vu6p2JkjzzTeoWta+PZ1oKh6jA@mail.gmail.com>
	<53A0B1C5.2080008@auckland.ac.nz>
	<CAL7MysnyrphaRcxHUhNT1nuy7By2fHzdHrXyTY7EQ1UxG22kKg@mail.gmail.com>
	<CF5661163F77A44781208D9AC4FDEA725D6726061A@IS-WIN-376.staffad.uwa.edu.au>
Message-ID: <CAL7MyskMQwcTrePrb7Baa3-b0oRZO=_B946UNF7r1hEA4QXgTA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140619/984ba5e2/attachment.pl>

From rmh at temple.edu  Thu Jun 19 17:58:17 2014
From: rmh at temple.edu (Richard M. Heiberger)
Date: Thu, 19 Jun 2014 11:58:17 -0400
Subject: [R] How can I avoid the for and If loops in my function?
In-Reply-To: <992242aae2f817a4d385b8cb3d82d79a@ufl.edu>
References: <201406182000.s5IK0HT2003617@smtp.ufl.edu>
	<21410.63655.912485.28820@stat.math.ethz.ch>
	<992242aae2f817a4d385b8cb3d82d79a@ufl.edu>
Message-ID: <CAGx1TMDvEM7oidbFRZ7WBk412Bjs_-1Hjgqu8d7bkW3JJVCRpA@mail.gmail.com>

Now that it is simplified, we see that you are incrementing the size
of an array at each step.  This is
a very inefficient practice in R.  For comparison,

## what you are doing
system.time({
  tmp <- NULL
  for (i in 1:10000) tmp <- rbind(tmp, 1:2)
})
##   user  system elapsed
##  0.622   0.297   1.256

## much faster
system.time({
  tmp <- matrix(nrow=10000, ncol=2)
  for (i in 1:10000) tmp[i,] <- 1:2
})
##   user  system elapsed
##  0.027   0.002   0.030

On Thu, Jun 19, 2014 at 11:04 AM, Mramba,Lazarus K <lmramba at ufl.edu> wrote:
> Hi Martin,
>
> Thanks for the useful comments. It has greatly improved the efficiency of my
> functions. I am sorry that I forgot to paste the functions varG and others
> which I have done here for reproducibility.
>
>
> #############################
> ## a function to calculate h2
> ## (heritability)
> ###############################
> herit<-function(varG,varR=1)
> {
>   h<-4*varG/(varG+varR)
>   h
> }
> ###################################
> # function to calculate random error
> varR<-function(varG,h2)
> {
>   varR<- varG*(4-h2)/h2
>   varR
> }
>
> ##########################################
> # function to calculate treatment variance
> varG<-function(varR=1,h2)
> {
>   varG<-varR*h2/(4-h2)
>   varG
> }
>
> ###############################
>
> I used the package "gmp" so that I can use the function "is.whole()".
>
> I have managed to reduce the complexity of the function that I needed help.
> It now takes half the time it used to take before, but it is several hours
> and wish I can cut these hours down by doing away with the for and if loops
> in this code.
> Any help will be appreciated.
>
> newfunF<- function(matrix0,n,traceI)
> {
>   newmatdf<-matrix0
>   trace<-traceI
>   mat <- NULL
>   Design_best <- newmatdf
>   mat <- rbind(mat, c(value = trace, iterations = 0))
>   Des<-list()
>   newmatdf<-swapsimple(matrix0)
>   for(i in 2:n){
>      newmatdf<-swapsimple(newmatdf)
>
>     Des[[i]]<-newmatdf
>     if(swapmainF(newmatdf) < trace){
>       Design_best <- Des[[i]]<-newmatdf
>       trace<- swapmainF(newmatdf)
>       mat <- rbind(mat, c(trace = trace, iterations = i))
>     }
>    }
>  list(mat=mat,Design_best=Design_best)
>
> }
>
>
>
>
>
> On Thu, 19 Jun 2014 16:50:15 +0200, Martin Maechler wrote:
>>>>>>>
>>>>>>> lmramba  <lmramba at ufl.edu>
>>>>>>>     on Wed, 18 Jun 2014 20:00:15 +0000 writes:
>>
>>
>>     > Hi Jim. If I avoid the dataframe, how can use the function
>> model.matrix() to
>>     > build the incident matrices X, And Z? I tried saving the design
>> as matrix
>>     > but ghen I got the wrong design matrix.
>>
>> I think you are entirely right here, Laz.
>> That indeed you have data frame and a formula --> model.matrix()
>> to get the matrix.
>>
>> I have no time currently to delve into your
>> example, and I see
>> - it is not reproducible {you use a function
>>   varG() that is undefined}
>> - you use foreach just so you can use %do% in one place which I
>>   think makes no sense
>> - you use package 'gmp' which I don't think you'd use, but I
>>   don't know as your code is not reproducible ....
>> - you use "<<-" in quite a few places in your code, which is
>>   considered really bad programming style and makes it very hard
>>   to understand the code by reading it ...
>>
>> ... *but* .. after all that ...
>> ...
>> as maintainer of the Matrix package
>> I'm close to absolutely sure that you want to work with *sparse*
>> matrices as Matrix provides.
>>
>> So in fact, do use
>>
>> ## "require":  just so you are not tempted to call a package a "library"
>> require(Matrix)
>>
>> help(sparse.model.matrix)
>>
>> and then do
>> - use  sparse.model.matrix() instead of model.matrix().
>>
>> Further, do
>> - use Diagonal() instead of  diag()  for *constructing* diagonal matrices.
>>
>> Please let us know if this helps
>>
>> [and maybe fix your example to become reproducible: do
>>
>>    rm(list=ls(all=TRUE))
>>
>>  before  source(...) ing the reproducible example script...
>> ]
>>
>> Martin Maechler, ETH Zurich
>>
>>
>>     > Thanks.
>>
>>     > Laz
>>
>>
>>     > Sent from my LG Optimus G?, an AT&T 4G LTE smartphone
>>     > ------ Original message ------
>>     > From: jim holtman
>>     > Date: 6/18/2014 3:49 PM
>>     > To: Laz;
>>     > Cc: R mailing list;
>>     > Subject:Re: [R] How can I avoid the for and If loops in my function?
>>
>>     > First order of business, without looking in detail at the code,
>> is to avoid
>>     > the use of dataframes.  If all your values are numerics, then
>> use a matrix.
>>     > It will be faster execution.
>>     > I did see the following statements:
>>     > newmatdf<-Des[[i]]
>>     > Des[[i]]<-newmatdf
>>     > why are you just putting back what you pulled out of the list?
>>
>>     > Jim Holtman
>>     > Data Munger Guru
>>
>>     > What is the problem that you are trying to solve?
>>     > Tell me what you want to do, not how you want to do it.
>>     > On Wed, Jun 18, 2014 at 12:41 PM, Laz <[1]lmramba at ufl.edu> wrote:
>>
>>     > Dear R-users,
>>     > I have a 3200 by 3200 matrix that was build from a data frame that
>> had
>>     > 180 observations,  with variables: x, y, blocks (6 blocks) and
>>     > treatments (values range from 1 to 180) I am working on. I build
>> other
>>     > functions that seem to work well. However, I have one function that
>> has
>>     > many If loops and a long For loop that delays my results for over 10
>>     > hours ! I need your help to avoid these loops.
>>     > ########################################################
>>     > ## I need to avoid these for loops and if loops here :
>>     > ########################################################
>>     > ### swapsimple() is a function that takes in a dataframe,
>> randomly swaps
>>     > two elements from the same block in a data frame and generates a new
>>     > dataframe called newmatdf
>>     > ### swapmainF() is a function that calculates the trace of the final
>> N
>>     > by N matrix considering the incident matrices and blocks and
>> treatments
>>     > and residual errors in a linear mixed model framework using
>> Henderson
>>     > approach.
>>     > funF<- function(newmatdf, n, traceI)
>>     > {
>>     > # n = number of iterations (swaps to be made on pairs of
>> elements of the
>>     > dataframe, called newmatdf)
>>     > # newmatdf : is the original dataframe with N rows, and 4 variables
>>     > (x,y,blocks,genotypes)
>>     > matrix0<-newmatdf
>>     > trace<-traceI  ##  sum of the diagonal elements of the N by N matrix
>>     > (generated outside this loop) from the original newmatdf dataframe
>>     > res <- list(mat = NULL, Design_best = newmatdf, Original_design =
>>     > matrix0) # store our output of interest
>>     > res$mat <- rbind(res$mat, c(value = trace, iterations = 0)) #
>>     > initialized values
>>     > Des<-list()
>>     > for(i in seq_len(n)){
>>     > ifelse(i==1,
>>     > newmatdf<-swapsimple(matrix0),newmatdf<-swapsimple(newmatdf))
>>     > Des[[i]]<-newmatdf
>>     > if(swapmainF(newmatdf) < trace){
>>     > newmatdf<-Des[[i]]
>>     > Des[[i]]<-newmatdf
>>     > trace<- swapmainF(newmatdf)
>>     > res$mat <- rbind(res$mat, c(trace = trace, iterations = i))
>>     > res$Design_best <- newmatdf
>>     > }
>>     > if(swapmainF(newmatdf) > trace & nrow(res$mat)<=1){
>>     > newmatdf<-matrix0
>>     > Des[[i]]<-matrix0
>>     > res$Design_best<-matrix0
>>     > }
>>     > if(swapmainF(newmatdf)> trace & nrow(res$mat)>1){
>>     > newmatdf<-Des[[length(Des)-1]]
>>     > Des[[i]]<-newmatdf
>>     > res$Design_best<-newmatdf
>>     > }
>>     > }
>>     > res
>>     > }
>>     > The above function was created to:
>>     > Take  an original matrix, called matrix0, calculate its trace.
>>     > Generate a new matrix, called newmatdf after  swapping two
>> elements of the
>>     > old one and  calculate the trace. If the trace of the newmatrix is
>>     > smaller than
>>     > that of the previous matrix, store both the current trace together
>>     > with the older trace and their  iteration values. If the newer
>> matrix has
>>     > a trace larger than the previous trace, drop this trace and drop
>> this
>>     > matrix too (but count its iteration).
>>     > Re-swap the old matrix that you stored previously and recalculate
>> the
>>     > trace. Repeat the
>>     > process many times, say 10,000. The final results should be a list
>>     > with the original initial matrix and its trace, the final best
>>     > matrix that had the smallest trace after the 10000 simulations and a
>>     > dataframe  showing the values of the accepted traces that
>>     > were smaller than the previous and their respective iterations.
>>     > $Original_design
>>     > x  y block genotypes
>>     > 1    1  1     1        29
>>     > 7    1  2     1         2
>>     > 13   1  3     1         8
>>     > 19   1  4     1        10
>>     > 25   1  5     1         9
>>     > 31   1  6     2        29
>>     > 37   1  7     2         4
>>     > 43   1  8     2        22
>>     > 49   1  9     2         3
>>     > 55   1 10     2        26
>>     > 61   1 11     3        18
>>     > 67   1 12     3        19
>>     > 73   1 13     3        28
>>     > 79   1 14     3        10
>>     > ------truncated ----
>>     > the final results after running  funF<-
>>     > function(newmatdf,n,traceI)  given below looks like this:
>>     > ans1
>>     > $mat
>>     > value iterations
>>     > [1,] 1.474952          0
>>     > [2,] 1.474748          1
>>     > [3,] 1.474590          2
>>     > [4,] 1.474473          3
>>     > [5,] 1.474411          5
>>     > [6,] 1.474294         10
>>     > [7,] 1.474182         16
>>     > [8,] 1.474058         17
>>     > [9,] 1.473998         19
>>     > [10,] 1.473993         22
>>     > ---truncated
>>     > $Design_best
>>     > x  y block genotypes
>>     > 1    1  1     1        29
>>     > 7    1  2     1         2
>>     > 13   1  3     1        18
>>     > 19   1  4     1        10
>>     > 25   1  5     1         9
>>     > 31   1  6     2        29
>>     > 37   1  7     2        21
>>     > 43   1  8     2         6
>>     > 49   1  9     2         3
>>     > 55   1 10     2        26
>>     > ---- truncated
>>     > $Original_design
>>     > x  y block genotypes
>>     > 1    1  1     1        29
>>     > 7    1  2     1         2
>>     > 13   1  3     1         8
>>     > 19   1  4     1        10
>>     > 25   1  5     1         9
>>     > 31   1  6     2        29
>>     > 37   1  7     2         4
>>     > 43   1  8     2        22
>>     > 49   1  9     2         3
>>     > 55   1 10     2        26
>>     > 61   1 11     3        18
>>     > 67   1 12     3        19
>>     > 73   1 13     3        28
>>     > 79   1 14     3        10
>>     > ------truncated
>>     > Regards,
>>     > Laz
>>     > [[alternative HTML version deleted]]
>>     > ______________________________________________
>>     > [2]R-help at r-project.org mailing list
>>     > [3]https://stat.ethz.ch/mailman/listinfo/r-help
>>     > PLEASE do read the posting
>>     > guide [4]http://www.R-project.org/posting-guide.html
>>     > and provide commented, minimal, self-contained, reproducible code.
>>
>>     > References
>>
>>     > 1. mailto:lmramba at ufl.edu
>>     > 2. mailto:R-help at r-project.org
>>     > 3. https://stat.ethz.ch/mailman/listinfo/r-help
>>     > 4. http://www.R-project.org/posting-guide.html
>>     > ______________________________________________
>>     > R-help at r-project.org mailing list
>>     > https://stat.ethz.ch/mailman/listinfo/r-help
>>     > PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>>     > and provide commented, minimal, self-contained, reproducible code.
>
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From murdoch.duncan at gmail.com  Thu Jun 19 18:11:35 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 19 Jun 2014 18:11:35 +0200
Subject: [R] Rgl: rotation and colorbar
In-Reply-To: <DUB111-W288F57B37374AF09B71BF6A8130@phx.gbl>
References: <DUB111-W56E898BEFBA1DC447D7B7EA82B0@phx.gbl>
	<DUB111-W288F57B37374AF09B71BF6A8130@phx.gbl>
Message-ID: <53A30BB7.4070707@gmail.com>

On 19/06/2014, 1:00 PM, C?line b wrote:
> Hello,
> 
> I'm trying to add a colorbar to a 3d map using rgl.
> For this purpose, I draw the map in a similar way of persp3d example : 
> 
> lat <- matrix(seq(90,-90, len=50)*pi/180, 50, 50, byrow=TRUE)
> long <- matrix(seq(-180, 180, len=50)*pi/180, 50, 50)
> 
> r <- 6378.1 # radius of Earth in km
> x <- r*cos(lat)*cos(long)
> y <- r*cos(lat)*sin(long)
> z <- r*sin(lat)
> 
> open3d()
> persp3d(x, y, z, col="white", 
>        texture=system.file("textures/worldsmall.png",package="rgl"), 
>        specular="black", axes=FALSE, box=FALSE, xlab="", ylab="", zlab="",
>        normal_x=x, normal_y=y, normal_z=z)
> 
> then I add a basic colorbar drawing several 3d colored cubes and label them using text3d
> 
> shapelist3d(cube3d(), x,y,z, col=grey.colors(5),add=T)
> text3d(x+dx,y+dy,z+dz,"label")
> 
> The results is ok (if someone know a better way to do it, please tell me how)
> Now I would like to improve the result and in particular I would like to have a static colorbar (stick to a plan parallel to the window) when I rotate the "earth".
> My first idea is to redefine the rotation button using  rgl.setMouseCallbacks and then pop and redraw colorbar in update fonction of   rgl.setMouseCallback.
> 1/ Is it a good idea ?
> 2/ How to get angle and x,y,z value  to compute rotationMatrix(angle,x,y,z) from window coordinates ?
> 3/ Is it possible, in the same idea,  to have a static colorbar when I zoom on a earth region ?
> 
> I hope my question is clear (as you see I am not a  native english speaker) and thank you for your answers.

Unless you are in a real hurry, I wouldn't recommend doing it this way.
 I am making some additions to rgl that will make this much easier,
though it is likely a month or so before these reach CRAN.

If you would like to try the changes before release, you can find them
on the rgl page on R-forge:  https://r-forge.r-project.org/projects/rgl/
The new changes are in the "subscenes" branch of the svn tree.  This is
not so easy to use, so if you let me know the platform and R version you
are using, I'd be happy to build you a copy that you can install.

Duncan Murdoch


From murdoch.duncan at gmail.com  Thu Jun 19 18:15:45 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 19 Jun 2014 18:15:45 +0200
Subject: [R] infix paste and package
In-Reply-To: <53A2E134.1050706@echoffmann.ch>
References: <53A2E134.1050706@echoffmann.ch>
Message-ID: <53A30CB1.6000708@gmail.com>

On 19/06/2014, 3:10 PM, Christian Hoffmann wrote:
> Hi,
> 
> I can successfully define  in .R and in  > R
> 
> "%&%" <- function(a,b) { paste(a,b,sep="") }
> 
> nd use in R >
> 
>   "a" %&% "b"
> [1] "ab"
> 
> but in a package definition .Rd
> ....
> \name{pasteInfix}
> \alias{pasteInfix}
> \alias{\%&\%
> }
> \usage{ a  \%&\% b
> }
> 
> will fail in R CMD   check --as-cran  saying
> 
> "I am" %&%
> +  " hungry" # [1] "I am hungry"
> Error: could not find function "%&%"
> Execution halted.
> 

Since % is a comment marker in .Rd files, you need to be quite careful
how you enter them.  I would look at examples in the R sources, e.g.

http://svn.r-project.org/R/trunk/src/library/base/man/match.Rd

Duncan Murdoch

> What is wrong in my .Rd file?
> 
> PS:  The placement of the closing } and the escaping of "%" seem also 
> critical.
> 
> TIA  Christian
>


From nicole.ford at me.com  Thu Jun 19 18:21:34 2014
From: nicole.ford at me.com (Nicole Ford)
Date: Thu, 19 Jun 2014 12:21:34 -0400
Subject: [R] HLM time series using Bayesian Inference in R.
Message-ID: <B35D176D-AE89-4996-9C19-015A1055A2E7@me.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140619/afd6a63b/attachment.pl>

From smartpink111 at yahoo.com  Thu Jun 19 18:44:48 2014
From: smartpink111 at yahoo.com (arun)
Date: Thu, 19 Jun 2014 09:44:48 -0700
Subject: [R] Creating a Series of Maxima
In-Reply-To: <CAAPm8Opi1GfAGtQE5UnPFZ6pnLUQW-YeV6LXwOcTE-oL9N84gw@mail.gmail.com>
References: <CAAPm8Opi1GfAGtQE5UnPFZ6pnLUQW-YeV6LXwOcTE-oL9N84gw@mail.gmail.com>
Message-ID: <1403196288.29181.YahooMailNeo@web142604.mail.bf1.yahoo.com>

Hi,
You may try:
df <- structure(list(....)

? lapply(split(df, df$Year), function(x) sapply(1:(nrow(x)-2), function(i) with(x, mean(Amount[i:(i+2)],na.rm=TRUE))))
#$`1985`
# [1] 4.1666667 3.8333333 0.8333333 0.3333333 0.3333333 0.0000000 0.0000000
# [8] 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000
#[15] 0.0000000 0.6666667 1.0000000 1.0000000

A.K.



On Wednesday, June 18, 2014 10:53 PM, Hafizuddin Arshad <hafizuddinarshad21 at gmail.com> wrote:
Dear R users,

I have this kind of data set:

structure(list(Year = c(1985L, 1985L, 1985L, 1985L, 1985L, 1985L,
1985L, 1985L, 1985L, 1985L, 1985L, 1985L, 1985L, 1985L, 1985L,
1985L, 1985L, 1985L, 1985L, 1985L), Day = 1:20, Month = c(1L,
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
1L, 1L, 1L), Amount = c(1, 10, 1.5, 0, 1, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 2, 1, 0)), .Names = c("Year", "Day", "Month",
"Amount"), row.names = c(NA, 20L), class = "data.frame")

I would like to do a block average for every three days i.e.
Average(1Jan-3Jan, 2Jan-4Jan, 3Jan-5Jan,...29Dec-31Dec, 30Dec-1jan). I want
to do this for each year and take the maximum value of the 3 day averages
in each year to create a series of maxima. How to do this in R?

Many thanks for helping me.

Arshad

??? [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From smartpink111 at yahoo.com  Thu Jun 19 18:46:55 2014
From: smartpink111 at yahoo.com (arun)
Date: Thu, 19 Jun 2014 09:46:55 -0700
Subject: [R] Creating a Series of Maxima
In-Reply-To: <1403196288.29181.YahooMailNeo@web142604.mail.bf1.yahoo.com>
References: <CAAPm8Opi1GfAGtQE5UnPFZ6pnLUQW-YeV6LXwOcTE-oL9N84gw@mail.gmail.com>
	<1403196288.29181.YahooMailNeo@web142604.mail.bf1.yahoo.com>
Message-ID: <1403196415.93441.YahooMailNeo@web142606.mail.bf1.yahoo.com>

To get the maximum:

lapply(split(df, df$Year), function(x) max(sapply(1:(nrow(x)-2), function(i) with(x, mean(Amount[i:(i+2)],na.rm=TRUE)))))
#$`1985`
#[1] 4.166667

A.K.




On , arun <smartpink111 at yahoo.com> wrote:
Hi,
You may try:
df <- structure(list(....)

? lapply(split(df, df$Year), function(x) sapply(1:(nrow(x)-2), function(i) with(x, mean(Amount[i:(i+2)],na.rm=TRUE))))
#$`1985`
# [1] 4.1666667 3.8333333 0.8333333 0.3333333 0.3333333 0.0000000 0.0000000
# [8] 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000
#[15] 0.0000000 0.6666667 1.0000000 1.0000000

A.K.






On Wednesday, June 18, 2014 10:53 PM, Hafizuddin Arshad <hafizuddinarshad21 at gmail.com> wrote:
Dear R users,

I have this kind of data set:

structure(list(Year = c(1985L, 1985L, 1985L, 1985L, 1985L, 1985L,
1985L, 1985L, 1985L, 1985L, 1985L, 1985L, 1985L, 1985L, 1985L,
1985L, 1985L, 1985L, 1985L, 1985L), Day = 1:20, Month = c(1L,
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
1L, 1L, 1L), Amount = c(1, 10, 1.5, 0, 1, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 2, 1, 0)), .Names = c("Year", "Day", "Month",
"Amount"), row.names = c(NA, 20L), class = "data.frame")

I would like to do a block average for every three days i.e.
Average(1Jan-3Jan, 2Jan-4Jan, 3Jan-5Jan,...29Dec-31Dec, 30Dec-1jan). I want
to do this for each year and take the maximum value of the 3 day averages
in each year to create a series of maxima. How to do this in R?

Many thanks for helping me.

Arshad

??? [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From marc_schwartz at me.com  Thu Jun 19 18:58:57 2014
From: marc_schwartz at me.com (Marc Schwartz)
Date: Thu, 19 Jun 2014 11:58:57 -0500
Subject: [R] Output levels of categorical data to Excel using with()
In-Reply-To: <CAHY7Kmfy=HagDKpHohaWmgP6sDj-MN6Pfj++jq2HfROX5s2Qpg@mail.gmail.com>
References: <CAHY7Kmfy=HagDKpHohaWmgP6sDj-MN6Pfj++jq2HfROX5s2Qpg@mail.gmail.com>
Message-ID: <6F85CA11-858F-48AE-B3E7-B5277B278BAC@me.com>


On Jun 18, 2014, at 11:31 PM, Daniel Schwartz <das2890 at gmail.com> wrote:

> I have coded qualitative data with many (20+) different codes from a survey
> in an excel file. I am using the with() function to output the codes so we
> know what's there. Is it possible to direct the output from with() to an
> excel file? If not, what's another function that has the same, er,
> functionality?! Thanks, R World!


It is not clear from your description, that the use of with() is really relevant here. with() is typically used as a convenience wrapper to be able to evaluate the names of data frame columns in the environment of the data frame, rather than having to repeat the 'DataFrameName$' prefix over and over.

To export data from R to Excel files, there are various options which are listed both in the R wiki:

  http://rwiki.sciviews.org/doku.php?id=tips:data-io:ms_windows

and in the R Data Import/Export manual:

  http://cran.r-project.org/doc/manuals/r-release/R-data.html#Reading-Excel-spreadsheets

Worst case, you can use ?write.csv to dump the data to a CSV file, which can then be opened with Excel.

The option you may prefer will depend upon your operating system, how comfortable you may or may not be relative to installing additional software, do you want to create a new Excel file with each export or be able to append to existing worksheets and how you may want to structure or format the worksheet(s) in Excel.

Regards,

Marc Schwartz

P.S. I have a cousin Daniel, but different gmail e-mail address.


From ripley at stats.ox.ac.uk  Thu Jun 19 19:04:00 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 19 Jun 2014 18:04:00 +0100
Subject: [R] empty density plot for point pattern in spatstat
In-Reply-To: <CF5661163F77A44781208D9AC4FDEA725D67260620@IS-WIN-376.staffad.uwa.edu.au>
References: <CAM+rpYnjg_SGnyGrVcwuakX1xmXd7ysy1gZntdn7m2zD=kqong@mail.gmail.com>	<CAM+rpYmz8zWkZvpNX6--a+F6vu6p2JkjzzTeoWta+PZ1oKh6jA@mail.gmail.com>	<53A0B1C5.2080008@auckland.ac.nz>,
	<CAL7MysnyrphaRcxHUhNT1nuy7By2fHzdHrXyTY7EQ1UxG22kKg@mail.gmail.com>	<CF5661163F77A44781208D9AC4FDEA725D6726061A@IS-WIN-376.staffad.uwa.edu.au>,
	<53A24AEE.50601@binghamton.edu>
	<CF5661163F77A44781208D9AC4FDEA725D67260620@IS-WIN-376.staffad.uwa.edu.au>
Message-ID: <53A31800.9020804@stats.ox.ac.uk>

On 19/06/2014 07:00, Adrian Baddeley wrote:
> I think I have the solution to the problem
> experienced by users of 'spatstat' on Windows machines,
> who are finding that plot.im() gives empty colour images.
>
> Short answer: set useRaster=FALSE in the call to plot.im.
>
> Long answer:
> spatstat::plot.im calls graphics::image.default with the argument 'useRaster=TRUE' by default.
> When useRaster=TRUE, the image is displayed by the function rasterImage from the graphics package.
> This is done to improve behaviour on *some* Windows systems.
> But, for unknown reasons, this does not work on Windows Server and on a few versions of Windows XP.
> On those systems you may need to set useRaster=FALSE to get a plot.

The likely reason is on ?image.

      limitations on the size of a raster image.  (Problems with the
      rendering of raster images have been reported by users of
      ?windows()? devices under Remote Desktop, at least under its
      default settings.)

People using Windows Server are almost certainly using Remote Desktop to 
access it.   The cause is some Windows GDI bug with low colour depths 
(which Remote Desktop reduces by default).  If people are seeing it on a 
local screen, ensure that the display is set to 24- or 32-bit colours.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From Sebastien.Bihorel at cognigencorp.com  Thu Jun 19 19:39:29 2014
From: Sebastien.Bihorel at cognigencorp.com (Sebastien Bihorel)
Date: Thu, 19 Jun 2014 13:39:29 -0400
Subject: [R] Working with Oracle large objects in R
Message-ID: <53A32051.2020106@cognigencorp.com>

Hi,

I was wondering if anybody could share their experience with interfacing 
R with Oracle databases for extraction of large objects. I would be more 
specifically interested in how to extract large objects storing big text 
files.

Thank you

Sebastien


From chilimaster at web.de  Thu Jun 19 19:21:42 2014
From: chilimaster at web.de (chili)
Date: Thu, 19 Jun 2014 10:21:42 -0700 (PDT)
Subject: [R] Restrict a SVAR A-Model on Matrix A and
	Variance-Covariance-Matrix
Message-ID: <1403198502853-4692387.post@n4.nabble.com>

Hello folks!

I'm using R-Package {vars} and I'm trying to estimate an A-Model.

I have serious problems regarding the restrictions.

1) My A-Matrix needs (!) to have the following form:

# 1 NA  NA  NA  
# 0  1  NA  NA
# 0  0   1  NA
# 0  0   0   1

That is done in R by:

A_Matrix <- diag(4)   # main diagonal = 4 restrictions
A_Matrix [1, 2] <- NA #
A_Matrix [1, 3] <- NA #
A_Matrix [1, 4] <- NA #
A_Matrix [2, 3] <- NA #
A_Matrix [2, 4] <- NA #
A_Matrix [3, 4] <- NA # off diagonal = 6 restrictions


2) The Variance-Covariance-Matrix of the structural residuals needs (!) to
be looking like:

#
# var(X1)        0               0             0
#       0        var(X2)         0             0
#       0          0           var(X3)         0
#       0          0               0       var(X4)

Since cov(xy)=cov(yx) there are 6 more restrictions.
So in total I would have 4+6+6=16 restrictions. The SVAR would be just
identified.

My problem is that I don't know how to implement this
Variance-Covariance-Matrix within R and {vars}.

My Code so far is:

# Prediction SVAR - A-Model (B-Matrix = NULL)
# restrictions:
# 1) Amat = A_Matrix
# 2) ????

VAR.est <- VAR(data.ts, p = 4, type = "none")
SVAR.A.est <- SVAR(x=VAR.est, estmethod = "direct", Amat = A_Matrix , 
                   Bmat = NULL, hessian = TRUE, lrtest = TRUE)

#--------------------------------------------------------------------

I know, that {vars} restrict the Variance-Covariance-Matrix by default to an
identity-matrix but I wondered if I can't restrict it by myself since the
way I need (!) to do that is quite common.

Thank you for any comments. I'm quite desperate right now :/



--
View this message in context: http://r.789695.n4.nabble.com/Restrict-a-SVAR-A-Model-on-Matrix-A-and-Variance-Covariance-Matrix-tp4692387.html
Sent from the R help mailing list archive at Nabble.com.


From bates at stat.wisc.edu  Thu Jun 19 23:47:53 2014
From: bates at stat.wisc.edu (Douglas Bates)
Date: Thu, 19 Jun 2014 16:47:53 -0500
Subject: [R] How to invert a matrix in R?
In-Reply-To: <COL130-W262FC038543B26B5DC7B68AD100@phx.gbl>
References: <COL130-W262FC038543B26B5DC7B68AD100@phx.gbl>
Message-ID: <CAO7JsnQ_WB0oKFbkBwuoFbqM70A2w=fOZoXjzwgpK9UuEkPEtA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140619/3f32a4ba/attachment.pl>

From crdolanc at ucdavis.edu  Thu Jun 19 23:50:20 2014
From: crdolanc at ucdavis.edu (Chris Dolanc)
Date: Thu, 19 Jun 2014 14:50:20 -0700
Subject: [R] selecting columns based on partial names
Message-ID: <53A35B1C.90909@ucdavis.edu>

Hello,

I have a data frame with > 5000 columns and I'd like to be able to make 
subsets of that data frame made up of certain columns by using part of 
the column names. I've had a surprisingly hard time finding something 
that works by searching online.

For example, lets say I have a data frame (df) of 2 obs. of 6 variables. 
The 6 variables are called "1940_tmax", "1940_ppt", "1940_tmin", 
"1941_tmax", "1941_ppt", "1941_tmin". I want to create a new data frame 
with only the variables that have "ppt" in the variable (column) name, 
so that it looks like this:

plot name    1940_ppt    1941_ppt
774-CL                    231               344
778-RW                  228               313

Thanks.

-- 
Christopher R. Dolanc
Post-doctoral Researcher
University of California, Davis &
University of Montana


From rshepard at appl-ecosys.com  Fri Jun 20 00:07:58 2014
From: rshepard at appl-ecosys.com (Rich Shepard)
Date: Thu, 19 Jun 2014 15:07:58 -0700 (PDT)
Subject: [R] CoDA DataFrame: Change Column to Row Name
Message-ID: <alpine.LNX.2.11.1406191504420.21450@localhost>

   I recall reading how to do this somewhere, but I cannot find just where I
read it. I have compositional data frames of this format:

     sampdate filter gather  graze predate  shred
1 2000-07-18 0.0550 0.5596 0.0734  0.2294 0.0826
2 2003-07-08 0.0734 0.6147 0.0183  0.2294 0.0642
3 2005-07-13 0.1161 0.5714 0.0357  0.1696 0.1071
4 2006-06-28 0.1000 0.4667 0.1500  0.1333 0.1500
5 2010-09-14 0.0778 0.6111 0.0444  0.1889 0.0778
6 2011-07-13 0.0879 0.5714 0.0659  0.2747 0.0000
7 2012-07-11 0.1042 0.5313 0.0625  0.2396 0.0625

and the sampdate column should be the row headings rather than the numeric
sequence seen above. What is the command to move the sampdates to row
headers?

Rich


From ligges at statistik.tu-dortmund.de  Fri Jun 20 00:24:32 2014
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Fri, 20 Jun 2014 00:24:32 +0200
Subject: [R] selecting columns based on partial names
In-Reply-To: <53A35B1C.90909@ucdavis.edu>
References: <53A35B1C.90909@ucdavis.edu>
Message-ID: <53A36320.6030706@statistik.tu-dortmund.de>



On 19.06.2014 23:50, Chris Dolanc wrote:
> Hello,
>
> I have a data frame with > 5000 columns and I'd like to be able to make
> subsets of that data frame made up of certain columns by using part of
> the column names. I've had a surprisingly hard time finding something
> that works by searching online.
>
> For example, lets say I have a data frame (df) of 2 obs. of 6 variables.
> The 6 variables are called "1940_tmax", "1940_ppt", "1940_tmin",
> "1941_tmax", "1941_ppt", "1941_tmin". I want to create a new data frame
> with only the variables that have "ppt" in the variable (column) name,
> so that it looks like this:
>
> plot name    1940_ppt    1941_ppt
> 774-CL                    231               344
> 778-RW                  228               313
>
> Thanks.
>

df[ , grepl("_ppt$", names(df))]

Best,
Uwe Ligges


From jim at bitwrit.com.au  Fri Jun 20 00:27:10 2014
From: jim at bitwrit.com.au (Jim Lemon)
Date: Fri, 20 Jun 2014 08:27:10 +1000
Subject: [R] bar plot stacked
In-Reply-To: <6034d78728efab696e76e0abfd05facf@openmailbox.org>
References: <6034d78728efab696e76e0abfd05facf@openmailbox.org>
Message-ID: <2437466.6HqKbOzttp@localhost.localdomain>

On Thu, 19 Jun 2014 01:42:30 PM message wrote:
> Readers,
> 
> For data set:
> 
> a, 90, 10
> b, 60, 40
> c, ,
> d, , 50
> 
> A plot was attempted:
> 
> dataset<-as.matrix(read.csv("datafile.csv",header=FALSE))
> barplot<-(dataset,horiz=TRUE)
> 
> A warning message is returned, about NAs introduced by coercion and 
an
> undesirable graph. The desired output is something similar to:
> 
> a	---------*
> b	------****
> c
> d	****
> 
> Whereby a legend would be produced to describe '*' and '-'. Any help
> please?
> 
Hi message,
Try this:

# this is what you had after reading the data in
testdf<-data.frame(letters[1:4],c(90,60,NA,NA),c(10,40,NA,50))
testmat<-as.matrix(t(testdf[,2:3]))
colnames(testmat)<-testdf[,1]
rownames(testmat)<-NULL
barplot(testmat[,4:1],horiz=TRUE,col=c(NA,"gray"))

Jim


From jim at bitwrit.com.au  Fri Jun 20 00:36:52 2014
From: jim at bitwrit.com.au (Jim Lemon)
Date: Fri, 20 Jun 2014 08:36:52 +1000
Subject: [R] selecting columns based on partial names
In-Reply-To: <53A35B1C.90909@ucdavis.edu>
References: <53A35B1C.90909@ucdavis.edu>
Message-ID: <2324533.CGjxdTQ4g2@localhost.localdomain>

On Thu, 19 Jun 2014 02:50:20 PM Chris Dolanc wrote:
> Hello,
> 
> I have a data frame with > 5000 columns and I'd like to be able to 
make
> subsets of that data frame made up of certain columns by using 
part of
> the column names. I've had a surprisingly hard time finding 
something
> that works by searching online.
> 
> For example, lets say I have a data frame (df) of 2 obs. of 6 
variables.
> The 6 variables are called "1940_tmax", "1940_ppt", "1940_tmin",
> "1941_tmax", "1941_ppt", "1941_tmin". I want to create a new data 
frame
> with only the variables that have "ppt" in the variable (column) 
name,
> so that it looks like this:
> 
> plot name    1940_ppt    1941_ppt
> 774-CL                    231               344
> 778-RW                  228               313
> 
Hi Chris,
One way is to get the column indices:

grep("ppt",names(df))
[1] 2 5

so,

newdf<-df[grep("ppt",names(df))]

and then you apparently want to add a column with some other 
information, so probably:

newdf<-cbind(<something_else>,
 df[grep("ppt",names(df))])

Jim


From crdolanc at ucdavis.edu  Fri Jun 20 00:56:35 2014
From: crdolanc at ucdavis.edu (Chris Dolanc)
Date: Thu, 19 Jun 2014 15:56:35 -0700
Subject: [R] selecting columns based on partial names
In-Reply-To: <53A36320.6030706@statistik.tu-dortmund.de>
References: <53A35B1C.90909@ucdavis.edu>
	<53A36320.6030706@statistik.tu-dortmund.de>
Message-ID: <53A36AA3.7000208@ucdavis.edu>

Thank you. That worked.

On 19-Jun-2014 3:24 PM, Uwe Ligges wrote:
>
>
> On 19.06.2014 23:50, Chris Dolanc wrote:
>> Hello,
>>
>> I have a data frame with > 5000 columns and I'd like to be able to make
>> subsets of that data frame made up of certain columns by using part of
>> the column names. I've had a surprisingly hard time finding something
>> that works by searching online.
>>
>> For example, lets say I have a data frame (df) of 2 obs. of 6 variables.
>> The 6 variables are called "1940_tmax", "1940_ppt", "1940_tmin",
>> "1941_tmax", "1941_ppt", "1941_tmin". I want to create a new data frame
>> with only the variables that have "ppt" in the variable (column) name,
>> so that it looks like this:
>>
>> plot name    1940_ppt    1941_ppt
>> 774-CL                    231               344
>> 778-RW                  228               313
>>
>> Thanks.
>>
>
> df[ , grepl("_ppt$", names(df))]
>
> Best,
> Uwe Ligges
>

-- 
Christopher R. Dolanc
Post-doctoral Researcher
University of California, Davis &
University of Montana


From jvadams at usgs.gov  Fri Jun 20 01:47:21 2014
From: jvadams at usgs.gov (Adams, Jean)
Date: Thu, 19 Jun 2014 18:47:21 -0500
Subject: [R] CoDA DataFrame: Change Column to Row Name
In-Reply-To: <alpine.LNX.2.11.1406191504420.21450@localhost>
References: <alpine.LNX.2.11.1406191504420.21450@localhost>
Message-ID: <CAN5YmCExvhAJ_Yud962nSB63C2nebOhUrHy-aVZwF5GrhEUsRQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140619/52c42778/attachment.pl>

From rshepard at appl-ecosys.com  Fri Jun 20 02:01:46 2014
From: rshepard at appl-ecosys.com (Rich Shepard)
Date: Thu, 19 Jun 2014 17:01:46 -0700 (PDT)
Subject: [R] CoDA DataFrame: Change Column to Row Name [RESOLVED]
In-Reply-To: <CAN5YmCExvhAJ_Yud962nSB63C2nebOhUrHy-aVZwF5GrhEUsRQ@mail.gmail.com>
References: <alpine.LNX.2.11.1406191504420.21450@localhost>
	<CAN5YmCExvhAJ_Yud962nSB63C2nebOhUrHy-aVZwF5GrhEUsRQ@mail.gmail.com>
Message-ID: <alpine.LNX.2.11.1406191701090.21450@localhost>

On Thu, 19 Jun 2014, Adams, Jean wrote:

> If your data frame is called df, try
> row.names(df) <- df$sampdate

Jean,

   Yep. That looks familiar.

Many thanks,

Rich


From rshepard at appl-ecosys.com  Fri Jun 20 03:23:58 2014
From: rshepard at appl-ecosys.com (Rich Shepard)
Date: Thu, 19 Jun 2014 18:23:58 -0700 (PDT)
Subject: [R] CoDA: Count Zeros in Biological Data
Message-ID: <alpine.LNX.2.11.1406191809080.21450@localhost>

   I have several small biological count-based data sets with one or more
rows having zero proportion. The other proportions in the row sum to 1.000
(or 0.9999 in the sixth data row below because of rounding errors in the
computer). An example is:

    sampdate filter gather  graze predate  shred
  2000-07-18 0.0550 0.5596 0.0734  0.2294 0.0826
  2003-07-08 0.0734 0.6147 0.0183  0.2294 0.0642
  2005-07-13 0.1161 0.5714 0.0357  0.1696 0.1071
  2006-06-28 0.1000 0.4667 0.1500  0.1333 0.1500
  2010-09-14 0.0778 0.6111 0.0444  0.1889 0.0778
  2011-07-13 0.0879 0.5714 0.0659  0.2747 0.0000
  2012-07-11 0.1042 0.5313 0.0625  0.2396 0.0625

   My concern is that in most field-biological (ecological/environmental)
data there can be two explanations for zero counts: the organism was not
present on that date or it was present but not collected. There is no way to
determine which case holds true in each instance, but the ecological
interpretations differ.

   The zCompositions package offers several methods of imputing a value to
replace the zeros. As I'm completely new to compositional data analyses
(CoDA) I would appreciate advice on how to select the most appropriate
method for these data sets. The available methods are: Geometric Bayesian
multiplicative, BM, (GBM, default); square root BM (SQ); Bayes-Laplace BM
(BL); count zero multiplicative (CZM); user-specified hyper-parameters
(user).

   These biological data seem to me to be different from geochemical or
economic data I see in package data sets or the CoDA references I've
acquired and read.

   Advice and suggestions (including references to application of CoDA to
ecological/environmental data) will be appreciated.

Rich


From ele0044 at uah.edu  Thu Jun 19 21:08:01 2014
From: ele0044 at uah.edu (efridge)
Date: Thu, 19 Jun 2014 12:08:01 -0700 (PDT)
Subject: [R] R is converting arg input to scientific notation, which is bad!
Message-ID: <1403204881532-4692389.post@n4.nabble.com>

Hello,

Firstly, real new to R here.

I have a function intended to evaluate the values in columns spread over
many tables. I have an argument in the function that allows the user to
input what sequence of tables they want to draw data from. The function
seems to work fine, but when the user inputs a single number (over 9)
instead of a sequence using the : operator, I find an error message:

the input for this example is 30

Error in file(file, "rt") : cannot open the connection

5 file(file, "rt")

4 read.table(file = file, header = header, sep = sep, quote = quote, dec =
dec, fill = fill, comment.char = comment.char, ...)

3 FUN("specdata/3e+01.csv"[[1L]], ...)

2 lapply(filepaths, read.csv)

1 pollutantmean("specdata", "nitrate", 30)

In addition: Warning message:

In file(file, "rt") : cannot open file 'specdata/3e+01.csv': No such file or
directory

*The problem is that when a single number (30, 104, 223) is input, it's
being stored as 3e+01 and no longer corresponds with the .csv file I'm
trying to call (030.csv).*

Below is my code:

pollutantmean <- function(directory, pollutant, id = 1:332){
filenames <- paste0(formatC(id, digits = 0, width = 3, flag = "0"), ".csv")
filepaths <- file.path(directory, filenames)
list_of_data_frames <- lapply(filepaths, read.csv)
big.df<-do.call(rbind,list_of_data_frames)
print(str(big.df))
mean(big.df[,pollutant], na.rm=TRUE)
}

I'm curious if formatC() is converting the number to scientific notation or
is that the default for R if there is no sequence when there could be.

Many of you probably recognize this as a coursera assignment. It's beyond
the due date and I've submitted some (pretty not good) code for it. I just
want to have a good understanding of what's going on here, as this type of
work is directly related to my research.



--
View this message in context: http://r.789695.n4.nabble.com/R-is-converting-arg-input-to-scientific-notation-which-is-bad-tp4692389.html
Sent from the R help mailing list archive at Nabble.com.


From adrian.baddeley at uwa.edu.au  Fri Jun 20 02:31:01 2014
From: adrian.baddeley at uwa.edu.au (Adrian Baddeley)
Date: Fri, 20 Jun 2014 08:31:01 +0800
Subject: [R] empty density plot for point pattern in spatstat
In-Reply-To: <CAL7MyskMQwcTrePrb7Baa3-b0oRZO=_B946UNF7r1hEA4QXgTA@mail.gmail.com>
References: <CAM+rpYnjg_SGnyGrVcwuakX1xmXd7ysy1gZntdn7m2zD=kqong@mail.gmail.com>
	<CAM+rpYmz8zWkZvpNX6--a+F6vu6p2JkjzzTeoWta+PZ1oKh6jA@mail.gmail.com>
	<53A0B1C5.2080008@auckland.ac.nz>
	<CAL7MysnyrphaRcxHUhNT1nuy7By2fHzdHrXyTY7EQ1UxG22kKg@mail.gmail.com>
	<CF5661163F77A44781208D9AC4FDEA725D6726061A@IS-WIN-376.staffad.uwa.edu.au>,
	<CAL7MyskMQwcTrePrb7Baa3-b0oRZO=_B946UNF7r1hEA4QXgTA@mail.gmail.com>
Message-ID: <CF5661163F77A44781208D9AC4FDEA725D67260626@IS-WIN-376.staffad.uwa.edu.au>

Dear Pablo,

> Yes, effectively utilizando useRaster = FALSE, the plot is printed. 

Muy bien!
 
> Only the ribbon appears without color.

Try setting ribargs=list(useRaster=TRUE).

> I'm using R version 3.0.2, Windows 7 system, and spatstat 1.33-0 package version.

Things may improve if you upgrade to the current versions, R 3.1.0 and spatstat 1.37-0.

A

Prof Adrian Baddeley FAA
University of Western Australia
________________________________________
From: Pablo Ram?n [paramon at utpl.edu.ec]
Sent: Thursday, 19 June 2014 9:12 PM
To: Adrian Baddeley
Cc: Rolf Turner; Christopher W Ryan; R-help
Subject: Re: [R] empty density plot for point pattern in spatstat

Dear Adrian,
Yes, effectively utilizanddo useRaster = FALSE, the plot is printed. Only the ribbon appears without color.
I'm using R version 3.0.2, Windows 7 system, and spatstat 1.33-0 package version.

Best wishes
Pablo



2014-06-18 19:50 GMT-05:00 Adrian Baddeley <adrian.baddeley at uwa.edu.au<mailto:adrian.baddeley at uwa.edu.au>>:
Dear Pablo

Please provide details of the system you are using (Windows - version?  R version? spatstat version?)

Also, when you issue the plot command, what graphics device are you using?
[To find out, type dev.cur() after performing the plot, and read the printout]

Try changing the colour map by running 'example(plot.im<http://plot.im>)' or
setting col=grey(seq(0,1,length=32)) in the call to plot.im<http://plot.im>

Try setting 'useRaster=FALSE' in the call to plot.im<http://plot.im>.

Let me know if any of these work. If not, let's talk on skype
to figure it out.

regards
Adrian


Prof Adrian Baddeley FAA
University of Western Australia
________________________________________
From: Pablo Ram?n [paramon at utpl.edu.ec<mailto:paramon at utpl.edu.ec>]
Sent: Wednesday, 18 June 2014 9:36 PM
To: Rolf Turner
Cc: Christopher W Ryan; R-help; Adrian Baddeley
Subject: Re: [R] empty density plot for point pattern in spatstat

Dear Rolf,

The problem persists with the function plot.im<http://plot.im><http://plot.im>(), or plot (density ()), similar to with(bei.extra, plot (elev)). This problem occurs only with my personal machine, to another machine this problem does not occur. However, when I use another function, such kde2d () in the MASS package and perform the plot, the graph is obtained without problem.

Best wishes
Pablo





2014-06-17 16:23 GMT-05:00 Rolf Turner <r.turner at auckland.ac.nz<mailto:r.turner at auckland.ac.nz><mailto:r.turner at auckland.ac.nz<mailto:r.turner at auckland.ac.nz>>>:
On 18/06/14 03:49, Christopher W Ryan wrote:
I upgraded to version 3.1.0 of R, still on Win XP, but that did not
solve the problem:

library(spatstat)
data(redwood)
str(redwood)
plot(redwood)  # works OK
plot(Kest(redwood))  # works OK
plot(density(redwood))  # produces an "empty" plot
                                        # with just the figure border
                                        # and a thin vertical box for
the color ramp
                                        # but no color ramp in it

Any other ideas? I'd be much obliged.

I have had an inquiry of this nature previously and sad to say was completely unable to find a solution.  I made numerous suggestions to the inquirer, e.g.:

*looking for a plot.im<http://plot.im><http://plot.im>() function masking the "real"
plot.im<http://plot.im><http://plot.im>() function from spatstat

* cleaning out the global environment
(.RData) in case there were some "artefacts" hanging around that had an impact on plot.im<http://plot.im><http://plot.im>()

* completely *removing* .RData and starting again,...

Nothing worked.

It is very difficult to diagnose a problem like this remotely.  If you could find an R guru who was able to come and sit with you at your computer it is ***just possible*** that they could track down what is going wrong.

However it seems to me that the problem is due to some sort of recalcitrance of the Windoze system and is thus probably insoluble.

I am cc-ing this to the person who made the previous inquiry.  Pablo, have there been any further developments since we last communicated about this problem?

cheers,

Rolf Turner

P. S. BTW Chris:  Does plot.im<http://plot.im><http://plot.im>() screw up with other images?  E.g. what happens if you do

with(bei.extra,plot(elev))

???

R. T.




--
Mat. Pablo Ram?n
Secci?n de Ecolog?a
Departamento de Ciencias Naturales
Universidad T?cnica Particular de Loja (http://www.utpl.edu.ec/)
Telf. 593 7 2570275 Ext. 2505, 2258



--
Mat. Pablo Ram?n
Secci?n de Ecolog?a
Departamento de Ciencias Naturales
Universidad T?cnica Particular de Loja (http://www.utpl.edu.ec/)
Telf. 593 7 2570275 Ext. 2505, 2258


From zadig_1 at excite.com  Fri Jun 20 04:22:16 2014
From: zadig_1 at excite.com (ce)
Date: Thu, 19 Jun 2014 22:22:16 -0400
Subject: [R] as.Date(Sys.time()) returns tomorrow !
Message-ID: <20140619222216.1791@web002.roc2.bluetie.com>

Dear all,

> Sys.time()
[1] "2014-06-19 22:19:17.976818 EDT"

> as.Date(Sys.time())
[1] "2014-06-20"
> 


why this happens ?


From dwinsemius at comcast.net  Fri Jun 20 04:30:39 2014
From: dwinsemius at comcast.net (David Winsemius)
Date: Thu, 19 Jun 2014 19:30:39 -0700
Subject: [R] R is converting arg input to scientific notation,
	which is bad!
In-Reply-To: <1403204881532-4692389.post@n4.nabble.com>
References: <1403204881532-4692389.post@n4.nabble.com>
Message-ID: <0FB13139-EC28-442A-92C8-494121961902@comcast.net>


On Jun 19, 2014, at 12:08 PM, efridge wrote:

> Hello,
> 
> Firstly, real new to R here.
> 
> I have a function intended to evaluate the values in columns spread over
> many tables. I have an argument in the function that allows the user to
> input what sequence of tables they want to draw data from. The function
> seems to work fine, but when the user inputs a single number (over 9)
> instead of a sequence using the : operator, I find an error message:
> 
> the input for this example is 30
> 
> Error in file(file, "rt") : cannot open the connection
> 
> 5 file(file, "rt")
> 
> 4 read.table(file = file, header = header, sep = sep, quote = quote, dec =
> dec, fill = fill, comment.char = comment.char, ...)
> 
> 3 FUN("specdata/3e+01.csv"[[1L]], ...)
> 
> 2 lapply(filepaths, read.csv)
> 
> 1 pollutantmean("specdata", "nitrate", 30)
> 
> In addition: Warning message:
> 
> In file(file, "rt") : cannot open file 'specdata/3e+01.csv': No such file or
> directory
> 
> *The problem is that when a single number (30, 104, 223) is input, it's
> being stored as 3e+01 and no longer corresponds with the .csv file I'm
> trying to call (030.csv).*
> 
> Below is my code:
> 
> pollutantmean <- function(directory, pollutant, id = 1:332){
> filenames <- paste0(formatC(id, digits = 0, width = 3, flag = "0"), ".csv")
> filepaths <- file.path(directory, filenames)
> list_of_data_frames <- lapply(filepaths, read.csv)
> big.df<-do.call(rbind,list_of_data_frames)
> print(str(big.df))
> mean(big.df[,pollutant], na.rm=TRUE)
> }
> 
> I'm curious if formatC() is converting the number to scientific notation or
> is that the default for R if there is no sequence when there could be.

I think it's your `digits = 0` argument:

> formatC(20, digits = 3, width = 3, flag = "0")
[1] "020"


> 
> Many of you probably recognize this as a coursera assignment. It's beyond
> the due date and I've submitted some (pretty not good) code for it. I just
> want to have a good understanding of what's going on here, as this type of
> work is directly related to my research.
> 
> 

-- 

David Winsemius
Alameda, CA, USA


From gunter.berton at gene.com  Fri Jun 20 04:37:09 2014
From: gunter.berton at gene.com (Bert Gunter)
Date: Thu, 19 Jun 2014 19:37:09 -0700
Subject: [R] CoDA: Count Zeros in Biological Data
In-Reply-To: <alpine.LNX.2.11.1406191809080.21450@localhost>
References: <alpine.LNX.2.11.1406191809080.21450@localhost>
Message-ID: <CACk-te1ejP4ccEWA2qt04rEs1Me_763kFhWPnOGF-gf0ni0pfg@mail.gmail.com>

1. This is a question about statistical methodology, not R. Hence
inappropriate here.

2. Replies should therefore be private.

3. Consult the literature.

Cheers,
Bert

Bert Gunter
Genentech Nonclinical Biostatistics
(650) 467-7374

"Data is not information. Information is not knowledge. And knowledge
is certainly not wisdom."
Clifford Stoll




On Thu, Jun 19, 2014 at 6:23 PM, Rich Shepard <rshepard at appl-ecosys.com> wrote:
>   I have several small biological count-based data sets with one or more
> rows having zero proportion. The other proportions in the row sum to 1.000
> (or 0.9999 in the sixth data row below because of rounding errors in the
> computer). An example is:
>
>    sampdate filter gather  graze predate  shred
>  2000-07-18 0.0550 0.5596 0.0734  0.2294 0.0826
>  2003-07-08 0.0734 0.6147 0.0183  0.2294 0.0642
>  2005-07-13 0.1161 0.5714 0.0357  0.1696 0.1071
>  2006-06-28 0.1000 0.4667 0.1500  0.1333 0.1500
>  2010-09-14 0.0778 0.6111 0.0444  0.1889 0.0778
>  2011-07-13 0.0879 0.5714 0.0659  0.2747 0.0000
>  2012-07-11 0.1042 0.5313 0.0625  0.2396 0.0625
>
>   My concern is that in most field-biological (ecological/environmental)
> data there can be two explanations for zero counts: the organism was not
> present on that date or it was present but not collected. There is no way to
> determine which case holds true in each instance, but the ecological
> interpretations differ.
>
>   The zCompositions package offers several methods of imputing a value to
> replace the zeros. As I'm completely new to compositional data analyses
> (CoDA) I would appreciate advice on how to select the most appropriate
> method for these data sets. The available methods are: Geometric Bayesian
> multiplicative, BM, (GBM, default); square root BM (SQ); Bayes-Laplace BM
> (BL); count zero multiplicative (CZM); user-specified hyper-parameters
> (user).
>
>   These biological data seem to me to be different from geochemical or
> economic data I see in package data sets or the CoDA references I've
> acquired and read.
>
>   Advice and suggestions (including references to application of CoDA to
> ecological/environmental data) will be appreciated.
>
> Rich
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From wdunlap at tibco.com  Fri Jun 20 05:10:36 2014
From: wdunlap at tibco.com (William Dunlap)
Date: Thu, 19 Jun 2014 20:10:36 -0700
Subject: [R] as.Date(Sys.time()) returns tomorrow !
In-Reply-To: <20140619222216.1791@web002.roc2.bluetie.com>
References: <20140619222216.1791@web002.roc2.bluetie.com>
Message-ID: <CAF8bMcY7EHLML4Y4TaLToJSY-N0fSdprFRsFnEx=GNzRNF=jmQ@mail.gmail.com>

Is it a time zone issue?  I get:

R> Sys.time()
[1] "2014-06-19 20:09:25 PDT"
R> as.Date(Sys.time())
[1] "2014-06-20"
R> as.Date(Sys.time(),tz="US/Pacific")
[1] "2014-06-19"
R> as.Date(Sys.time(),tz="PDT")
[1] "2014-06-20"
Warning message:
In as.POSIXlt.POSIXct(x, tz = tz) : unknown timezone 'PDT'
Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Thu, Jun 19, 2014 at 7:22 PM, ce <zadig_1 at excite.com> wrote:
> Dear all,
>
>> Sys.time()
> [1] "2014-06-19 22:19:17.976818 EDT"
>
>> as.Date(Sys.time())
> [1] "2014-06-20"
>>
>
>
> why this happens ?
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From zadig_1 at excite.com  Fri Jun 20 05:24:02 2014
From: zadig_1 at excite.com (ce)
Date: Thu, 19 Jun 2014 23:24:02 -0400
Subject: [R] as.Date(Sys.time()) returns tomorrow !
Message-ID: <20140619232402.24872@web003.roc2.bluetie.com>


I guessed it too, but my command 

as.Date(Sys.time(),tz="EDT")
[1] "2014-06-20"

doesn't give warning message you got for PDT . I thought EDT was a valid TZ !
Now I changed it to :
> as.Date(Sys.time(),tz="America/New_York")
[1] "2014-06-19"

Thanks. 

-----Original Message-----
From: "William Dunlap" [wdunlap at tibco.com]
Date: 06/19/2014 11:10 PM
To: "ce" <zadig_1 at excite.com>
CC: r-help at r-project.org
Subject: Re: [R] as.Date(Sys.time()) returns tomorrow !

Is it a time zone issue?  I get:

R> Sys.time()
[1] "2014-06-19 20:09:25 PDT"
R> as.Date(Sys.time())
[1] "2014-06-20"
R> as.Date(Sys.time(),tz="US/Pacific")
[1] "2014-06-19"
R> as.Date(Sys.time(),tz="PDT")
[1] "2014-06-20"
Warning message:
In as.POSIXlt.POSIXct(x, tz = tz) : unknown timezone 'PDT'
Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Thu, Jun 19, 2014 at 7:22 PM, ce <zadig_1 at excite.com> wrote:
> Dear all,
>
>> Sys.time()
> [1] "2014-06-19 22:19:17.976818 EDT"
>
>> as.Date(Sys.time())
> [1] "2014-06-20"
>>
>
>
> why this happens ?
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From petr.pikal at precheza.cz  Fri Jun 20 09:13:26 2014
From: petr.pikal at precheza.cz (PIKAL Petr)
Date: Fri, 20 Jun 2014 07:13:26 +0000
Subject: [R] extract a subset of non-contiguous elements of a matrix
In-Reply-To: <1403185576.36345.YahooMailNeo@web121501.mail.ne1.yahoo.com>
References: <b6wym6nr3jo13n2pqioy1bw4.1403185106859@email.android.com>
	<1403185576.36345.YahooMailNeo@web121501.mail.ne1.yahoo.com>
Message-ID: <6E8D8DFDE5FA5D4ABCB8508389D1BF8802BD87A2@SRVEXCHMBX.precheza.cz>

Hi

You can pad some NA to the result before transforming it to required matrix but as Frede pointed out, what do you want to do with such result?

tm.1=rbind(c(1,-3,2,-4), c(1,-3,2,-4),c(1,-3,2,-4))
xx<-which(tm.1 > 0, arr.ind=TRUE)
res<-apply(xx, 1, paste0, collapse=",")
dim(res)<-c(3,2)
> res
     [,1]  [,2]
[1,] "1,1" "1,3"
[2,] "2,1" "2,3"
[3,] "3,1" "3,3"

tm.1 <- matrix(c(11,22,33,-4), ncol=2)
xx<-which(tm.1 > 0, arr.ind=TRUE)
res<-apply(xx, 1, paste0, collapse=",")
res<-c(res, NA)
dim(res)<-c(2,2)
res
     [,1]  [,2]
[1,] "1,1" "1,2"
[2,] "2,1" NA

Regards
Petr

> -----Original Message-----
> From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-
> project.org] On Behalf Of carol white
> Sent: Thursday, June 19, 2014 3:46 PM
> To: Frede Aakmann T?gersen; Bart Kastermans
> Cc: r-help at r-project.org
> Subject: Re: [R] extract a subset of non-contiguous elements of a
> matrix
>
> I realize that that the problem arises if there is a different number
> of negative numbers in the rows and columns of the original matrix. In
> this case, the resulting matrix won't have the same number of rows for
> all columns. The problem for ex doesn't arise for my example but for
> Bart's example
>
> > [1,]  1  1
> > [2,]  2  1
> > [3,]  1  2
>
> how to combine these elemnts? If the 2nd col contains the number of the
> resulting matrix, then, the number of rows are different and the matrix
> can't be completed.
>
>
>
> On Thursday, June 19, 2014 3:39 PM, Frede Aakmann T?gersen
> <frtog at vestas.com> wrote:
>
>
>
>
> As Peter and Bart I really have a problem understanding you.
>
> Perhaps if you tell us what your desired result is going to used for we
> can be more helpful. You can do that using your latest example.
>
> In that example you want a matrix of sets of row and column indices.
> This will probably have to be a matrix of characters. There you go from
> a 3?4 matrix to a 3?2 matrix.  What do you want in case of Barts 2?2
> matrix? A 3?1 or 1?3 matrix? And in a more general case?
>
> Best regards
>
> Frede
>
>
> Sendt fra Samsung mobil
>
> -------- Oprindelig meddelelse --------
> Fra: carol white
> Dato:19/06/2014 15.18 (GMT+01:00)
> Til: Bart Kastermans
> Cc: r-help at r-project.org
> Emne: Re: [R] extract a subset of non-contiguous elements of a matrix
>
>  tm.1=rbind(c(1,-3,2,-4), c(1,-3,2,-4),c(1,-3,2,-4))
>
> > which(tm.1 > 0, arr.ind=TRUE)
>      row col
> [1,]   1   1
> [2,]   2   1
> [3,]   3   1
> [4,]   1   3
> [5,]   2   3
> [6,]   3   3
>
> so the answer should have the elements of tm.1 with the following
> indexes
>
> 1,1 1,3
> 2,1 2,3
> 3,1 3,3
>
>
>
> On Thursday, June 19, 2014 3:08 PM, Bart Kastermans
> <kasterma at kasterma.net> wrote:
>
>
>
> If you give an example of input and desired output I can think about
> this.  But at this point I do not understand what you want.  In the
> example I gave the positive elements do not form a submatrix in any way
> I can think of.
>
>
> On 19 Jun 2014, at 15:04, carol white <wht_crl at yahoo.com> wrote:
>
> > well it gives a vector which is useless as I want a matrix.
> >
> >
> > On Thursday, June 19, 2014 2:40 PM, Bart Kastermans
> <kasterma at kasterma.net> wrote:
> >
> >
> > > tm.1 <- matrix(c(11,22,33,-4), ncol=2)
> > > which(tm.1 > 0, arr.ind=TRUE)
> >   row col
> > [1,]  1  1
> > [2,]  2  1
> > [3,]  1  2
> > > tm.1[which(tm.1 > 0, arr.ind=TRUE)]
> > [1] 11 22 33
> >
> > This last command does what you ask I think.
> >
> > On 19 Jun 2014, at 14:12, carol white <wht_crl at yahoo.com> wrote:
> >
> > > The extracted values don't form a matrix and that's the question
> how
> > > to extract because which returns the indexes? that is, from
> > > 1,1
> > > 2,1
> > > 1,2
> > >
> > > how to retrieve values?
> > >
> > > Or if at the position 2,1, there is a negative value, how to
> > > retrieve
> > > 1,1
> > > 1,2
> > >
> > >
> > > Carol
> > >
> > >
> > > On Thursday, June 19, 2014 1:29 PM, Bart Kastermans
> <kasterma at kasterma.net> wrote:
> > >
> > >
> > > On 19 Jun 2014, at 13:19, carol white <wht_crl at yahoo.com> wrote:
> > >
> > > > Hi,
> > > > Is there a way to extract a subset of non-contiguous elements of
> a matrix elegantly and with 1 or very few scripts?
> > > >
> > > > Suppose I have a matrix of positive and negative numbers (m) and
> I
> > > > want to retrieve only the positive number. This I can do
> > > >
> > > > which(m>0, arr.ind=T) which gives the indices of positive
> elements like (37,1), (80,1), ..., (54,2) etc. How can I extract
> positive numbers without looping on the indexes provided by which to
> make a new matrix?
> > >
> > > What matrix do you want?  For e.g.
> > >
> > > > tm.1 <- matrix(c(11,22,33,-4), ncol=2)
> > > > which(tm.1 > 0, arr.ind=TRUE)
> > >    row col
> > > [1,]  1  1
> > > [2,]  2  1
> > > [3,]  1  2
> > > > tm.1[which(tm.1 > 0, arr.ind=TRUE)]
> > > [1] 11 22 33
> > >
> > > The extracted values do not form a matrix.
> > >
> > > Either the above contains the answer, or I don?t understand the
> question.
> > >
> > > Best,
> > > Bart
> > >
> > >
> > > >
> > > > thanks,
> > > >
> > > > Carol
> > >
> > >
> >
> >
>         [[alternative HTML version deleted]]
>       [[alternative HTML version deleted]]


________________________________
Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou ur?eny pouze jeho adres?t?m.
Jestli?e jste obdr?el(a) tento e-mail omylem, informujte laskav? neprodlen? jeho odes?latele. Obsah tohoto emailu i s p??lohami a jeho kopie vyma?te ze sv?ho syst?mu.
Nejste-li zam??len?m adres?tem tohoto emailu, nejste opr?vn?ni tento email jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu zp?sobenou modifikacemi ?i zpo?d?n?m p?enosu e-mailu.

V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
- vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o uzav?en? smlouvy, a to z jak?hokoliv d?vodu i bez uveden? d?vodu.
- a obsahuje-li nab?dku, je adres?t opr?vn?n nab?dku bezodkladn? p?ijmout; Odes?latel tohoto e-mailu (nab?dky) vylu?uje p?ijet? nab?dky ze strany p??jemce s dodatkem ?i odchylkou.
- trv? odes?latel na tom, ?e p??slu?n? smlouva je uzav?ena teprve v?slovn?m dosa?en?m shody na v?ech jej?ch n?le?itostech.
- odes?latel tohoto emailu informuje, ?e nen? opr?vn?n uzav?rat za spole?nost ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn? zmocn?n nebo p?semn? pov??en a takov? pov??en? nebo pln? moc byly adres?tovi tohoto emailu p??padn? osob?, kterou adres?t zastupuje, p?edlo?eny nebo jejich existence je adres?tovi ?i osob? j?m zastoupen? zn?m?.

This e-mail and any documents attached to it may be confidential and are intended only for its intended recipients.
If you received this e-mail by mistake, please immediately inform its sender. Delete the contents of this e-mail with all attachments and its copies from your system.
If you are not the intended recipient of this e-mail, you are not authorized to use, disseminate, copy or disclose this e-mail in any manner.
The sender of this e-mail shall not be liable for any possible damage caused by modifications of the e-mail or by delay with transfer of the email.

In case that this e-mail forms part of business dealings:
- the sender reserves the right to end negotiations about entering into a contract in any time, for any reason, and without stating any reasoning.
- if the e-mail contains an offer, the recipient is entitled to immediately accept such offer; The sender of this e-mail (offer) excludes any acceptance of the offer on the part of the recipient containing any amendment or variation.
- the sender insists on that the respective contract is concluded only upon an express mutual agreement on all its aspects.
- the sender of this e-mail informs that he/she is not authorized to enter into any contracts on behalf of the company except for cases in which he/she is expressly authorized to do so in writing, and such authorization or power of attorney is submitted to the recipient or the person represented by the recipient, or the existence of such authorization is known to the recipient of the person represented by the recipient.

From luca.cerone at gmail.com  Fri Jun 20 11:20:41 2014
From: luca.cerone at gmail.com (Luca Cerone)
Date: Fri, 20 Jun 2014 11:20:41 +0200
Subject: [R] Rstudio: is it possible to create a document out of a working
	script?
Message-ID: <CAFnz2-9qyU6nx_gMvt6a=H6=MDdtZe_dCYtKuSjux=ijX1LCxA@mail.gmail.com>

Dear all,
I am very happy with the new features introduced by Rstudio about how
to create documents embedding R code.

I would like to know though if there is some way to embed code from a
working script into an Rmd document.
I have several working scripts for which I would like to report the
results, but I would like to avoid
copy and paste the code in the Rmd document: the pipeline is still a
work in progress,
and it is likely that I will end up changing the code and parameters
in the script.

As you can imagine, having to copy and paste my code is prone error,
and leads to a lot of code replication.
I would like to avoid this, but couldn?t find a straightforward way so far.


Thanks a lot in advance,
of course if you have other advices, or comments on best practices for
this sort of thing,
I would like to hear them from you.

Cheers,
Luca


From bhh at xs4all.nl  Fri Jun 20 11:27:40 2014
From: bhh at xs4all.nl (Berend Hasselman)
Date: Fri, 20 Jun 2014 11:27:40 +0200
Subject: [R] Rstudio: is it possible to create a document out of a
	working script?
In-Reply-To: <CAFnz2-9qyU6nx_gMvt6a=H6=MDdtZe_dCYtKuSjux=ijX1LCxA@mail.gmail.com>
References: <CAFnz2-9qyU6nx_gMvt6a=H6=MDdtZe_dCYtKuSjux=ijX1LCxA@mail.gmail.com>
Message-ID: <6E5BF7E6-D6EA-41A1-A4AB-B925527B3869@xs4all.nl>


On 20-06-2014, at 11:20, Luca Cerone <luca.cerone at gmail.com> wrote:

> Dear all,
> I am very happy with the new features introduced by Rstudio about how
> to create documents embedding R code.
> 
> I would like to know though if there is some way to embed code from a
> working script into an Rmd document.
> I have several working scripts for which I would like to report the
> results, but I would like to avoid
> copy and paste the code in the Rmd document: the pipeline is still a
> work in progress,
> and it is likely that I will end up changing the code and parameters
> in the script.
> 
> As you can imagine, having to copy and paste my code is prone error,
> and leads to a lot of code replication.
> I would like to avoid this, but couldn?t find a straightforward way so far.
> 
> 
> Thanks a lot in advance,
> of course if you have other advices, or comments on best practices for
> this sort of thing,
> I would like to hear them from you.
> 

This doesn?t belong on the R-help mailinglist.
It is a question about Rstudio and should be directed to Rstudio support.

Berend


From rni.boh at gmail.com  Fri Jun 20 11:28:02 2014
From: rni.boh at gmail.com (Bob O'Hara)
Date: Fri, 20 Jun 2014 11:28:02 +0200
Subject: [R] Rstudio: is it possible to create a document out of a
	working script?
In-Reply-To: <CAFnz2-9qyU6nx_gMvt6a=H6=MDdtZe_dCYtKuSjux=ijX1LCxA@mail.gmail.com>
References: <CAFnz2-9qyU6nx_gMvt6a=H6=MDdtZe_dCYtKuSjux=ijX1LCxA@mail.gmail.com>
Message-ID: <CAN-Z0xVpN_AkNL2ZX-opQczDP34w96H7t0KSEE973y6zmBdZMA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140620/59bd0d67/attachment.pl>

From chilimaster at web.de  Fri Jun 20 11:27:58 2014
From: chilimaster at web.de (chili)
Date: Fri, 20 Jun 2014 02:27:58 -0700 (PDT)
Subject: [R] {vars} SVAR A-Model: Restrictions on Matrix A and
 Variance-Covariance-Matrix
In-Reply-To: <1403198502853-4692387.post@n4.nabble.com>
References: <1403198502853-4692387.post@n4.nabble.com>
Message-ID: <1403256478979-4692424.post@n4.nabble.com>

Thanks to Dennis Murphy   I was able to improve mein R-Code:

1) A-Matrix:

    A_Matrix <- diag(4)   # 4 restrictions
    A_Matrix[upper.tri(A_Matrix)] <- NA    # 6 further restrictions

2) Variance-Covariance-Matrix

    Xmat <- cbind(X1, X2, X3, X4)
    vs <- apply(Xmat, 2, var)
    VC_Matrix<- diag(vs) # final 6 restricions

That worked fine so far.

Now, is there any chance to implement the VC_Matrix it into my
SVAR-estimation?  



--
View this message in context: http://r.789695.n4.nabble.com/vars-SVAR-A-Model-Restrictions-on-Matrix-A-and-Variance-Covariance-Matrix-tp4692387p4692424.html
Sent from the R help mailing list archive at Nabble.com.


From luca.cerone at gmail.com  Fri Jun 20 11:40:23 2014
From: luca.cerone at gmail.com (Luca Cerone)
Date: Fri, 20 Jun 2014 11:40:23 +0200
Subject: [R] Rstudio: is it possible to create a document out of a
	working script?
In-Reply-To: <CAN-Z0xVpN_AkNL2ZX-opQczDP34w96H7t0KSEE973y6zmBdZMA@mail.gmail.com>
References: <CAFnz2-9qyU6nx_gMvt6a=H6=MDdtZe_dCYtKuSjux=ijX1LCxA@mail.gmail.com>
	<CAN-Z0xVpN_AkNL2ZX-opQczDP34w96H7t0KSEE973y6zmBdZMA@mail.gmail.com>
Message-ID: <CAFnz2--_JSpY7FgydUgLDqqrR5zZGjp85mQ68CLnwQY8d8ZUcQ@mail.gmail.com>

Hi Berend, sorry if it OT (though I think that the process is pretty
much Rstudio independent, since what Rstudio does is wrap up knitr and
their package Rmarkdown,
but all the process can be run from the shell).

Bob, so far this is what I do, but it is not ideal for two reasons:
1. I would like my report to be a step by step guide of what the
script does. Wrapping the scripts in small functions, subscripts
doesn?t help,
because in the report what you would see is "source("subscript.r"),
not the content of the subscript.

2. in a way I would need the exact opposite of what knitr and
Rmarkdown do (at least by default). I would like to document my script
in a way that can be run independently of the report and that, when
neede, could use the comments to generate the report, similarly to how
roxygen2 works when writing the documentation.

Thanks a lot for the help,
apologies again if this is OT (if so please remove the thread and I
will ask in the the Rstudio support).

Cheers,
Luca

2014-06-20 11:28 GMT+02:00 Bob O'Hara <rni.boh at gmail.com>:
> How about simply using source() to call the script? If necessary, wrap bits
> of the script in functions, so you source a file with lots of functions, and
> then call the ones you need, as you need them.
>
> Bob
>
> On 20 June 2014 11:20, Luca Cerone <luca.cerone at gmail.com> wrote:
>>
>> Dear all,
>> I am very happy with the new features introduced by Rstudio about how
>> to create documents embedding R code.
>>
>> I would like to know though if there is some way to embed code from a
>> working script into an Rmd document.
>> I have several working scripts for which I would like to report the
>> results, but I would like to avoid
>> copy and paste the code in the Rmd document: the pipeline is still a
>> work in progress,
>> and it is likely that I will end up changing the code and parameters
>> in the script.
>>
>> As you can imagine, having to copy and paste my code is prone error,
>> and leads to a lot of code replication.
>> I would like to avoid this, but couldn?t find a straightforward way so
>> far.
>>
>>
>> Thanks a lot in advance,
>> of course if you have other advices, or comments on best practices for
>> this sort of thing,
>> I would like to hear them from you.
>>
>> Cheers,
>> Luca
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>
>
>
> --
> Bob O'Hara
>
> Biodiversity and Climate Research Centre
> Senckenberganlage 25
> D-60325 Frankfurt am Main,
> Germany
>
> Tel: +49 69 798 40226
> Mobile: +49 1515 888 5440
> WWW:   http://www.bik-f.de/root/index.php?page_id=219
> Blog: http://occamstypewriter.org/boboh/
> Journal of Negative Results - EEB: www.jnr-eeb.org



-- 
Luca Cerone

Tel: +34 692 06 71 28
Skype: luca.cerone


From krishna at primps.com.sg  Fri Jun 20 12:02:12 2014
From: krishna at primps.com.sg (S N V Krishna)
Date: Fri, 20 Jun 2014 10:02:12 +0000
Subject: [R] EOF error reading csv file
Message-ID: <6a0c6fa880364347a6e060fa09e899b2@HKXPR03MB295.apcprd03.prod.outlook.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140620/9443aada/attachment.pl>

From jholtman at gmail.com  Fri Jun 20 12:13:25 2014
From: jholtman at gmail.com (Jim Holtman)
Date: Fri, 20 Jun 2014 06:13:25 -0400
Subject: [R] EOF error reading csv file
In-Reply-To: <6a0c6fa880364347a6e060fa09e899b2@HKXPR03MB295.apcprd03.prod.outlook.com>
References: <6a0c6fa880364347a6e060fa09e899b2@HKXPR03MB295.apcprd03.prod.outlook.com>
Message-ID: <D9F6052E-E6CD-40C5-9A98-CFAD6294F4C0@gmail.com>

it looks like you have unbalanced quotes in the line containing:

DELIVERED/BUYER'S INDEX

try putting the option

quotes = ''

Sent from my iPad

On Jun 20, 2014, at 6:02, S N V Krishna <krishna at primps.com.sg> wrote:

> DELIVERED/BUYER'S INDEX


From pal.praveen11 at gmail.com  Fri Jun 20 09:26:03 2014
From: pal.praveen11 at gmail.com (praveen pal)
Date: Fri, 20 Jun 2014 12:56:03 +0530
Subject: [R] How to process a log file in R ?
Message-ID: <CACbhFuVOuD48DDStpND-+iRQSyOotHZuJ++464_Gwv87rVT=mQ@mail.gmail.com>

Hello

   i am new to R and need help,
   I want to parse a log file using R named tracking.log file.
   i try to read it using "jsonlite" package but not able to get data  in
proper format.


   i entered a sample of file below.
   i also attached a file tracking.log file with this mail


 {
    "username": "lavita",
    "host": "10.105.22.32",
    "event_source": "server",
    "event_type":
"/courses/IITB/CS101/2014_T1/xblock/i4x:;_;_IITB;_CS101;_video;_d333fa637a074b41996dc2fd5e675818/handler/xmodule_handler/save_user_state",
    "context": {
        "course_id": "IITB/CS101/2014_T1",
        "course_user_tags": {},
        "user_id": 42,
        "org_id": "IITB"
    },
    "time": "2014-06-20T05:49:10.468638+00:00",
    "ip": "127.0.0.1",
    "event": "{\"POST\": {\"saved_video_position\": [\"00:02:10\"]},
\"GET\": {}}",
    "agent": "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:18.0) Gecko/20100101
Firefox/18.0",
    "page": null
}

{
    "username": "raeha",
    "host": "10.105.22.32",
    "event_source": "server",
    "event_type": "problem_check",
    "context": {
        "course_id": "IITB/CS101/2014_T1",
        "course_user_tags": {},
        "user_id": 40,
        "org_id": "IITB",
        "module": {
            "display_name": ""
        }
    },
    "time": "2014-06-20T06:43:52.716455+00:00",
    "ip": "127.0.0.1",
    "event": {
        "submission": {
            "i4x-IITB-CS101-problem-33e4aac93dc84f368c93b1d08fa984fc_2_1": {
                "input_type": "choicegroup",
                "question": "",
                "response_type": "multiplechoiceresponse",
                "answer": "MenuInflater.inflate()",
                "variant": "",
                "correct": true
            }
        },
        "success": "correct",
        "grade": 1,
        "correct_map": {
            "i4x-IITB-CS101-problem-33e4aac93dc84f368c93b1d08fa984fc_2_1": {
                "hint": "",
                "hintmode": null,
                "correctness": "correct",
                "npoints": null,
                "msg": "",
                "queuestate": null
            }
        },
        "state": {
            "student_answers": {},
            "seed": 1,
            "done": null,
            "correct_map": {},
            "input_state": {

"i4x-IITB-CS101-problem-33e4aac93dc84f368c93b1d08fa984fc_2_1": {}
            }
        },
        "answers": {
            "i4x-IITB-CS101-problem-33e4aac93dc84f368c93b1d08fa984fc_2_1":
"choice_0"
        },
        "attempts": 1,
        "max_grade": 1,
        "problem_id":
"i4x://IITB/CS101/problem/33e4aac93dc84f368c93b1d08fa984fc"
    },
    "agent": "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:29.0) Gecko/20100101
Firefox/29.0",
    "page": "x_module"
}


{
    "username": "tushars",
    "host": "localhost",
    "event_source": "server",
    "event_type":
"/courses/IITB/CS101/2014_T1/instructor_dashboard/api/list_instructor_tasks",
    "context": {
        "course_id": "IITB/CS101/2014_T1",
        "course_user_tags": {},
        "user_id": 6,
        "org_id": "IITB"
    },
    "time": "2014-06-20T05:49:26.780244+00:00",
    "ip": "127.0.0.1",
    "event": "{\"POST\": {}, \"GET\": {}}",
    "agent": "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:29.0) Gecko/20100101
Firefox/29.0",
    "page": null
}



-- 


*Thank youPraveen Pal*

From schmeier at dfki.de  Fri Jun 20 12:42:32 2014
From: schmeier at dfki.de (svendeswan)
Date: Fri, 20 Jun 2014 03:42:32 -0700 (PDT)
Subject: [R] Reading in a csv - 2 different results
Message-ID: <1403260952933-4692434.post@n4.nabble.com>

Hi,
I am a beginner in R and already read and (thought that I) understood the R
introduction tutorial. However there is this reading .csv which I cant
solve. The question is: Why has data in the both cases a different content?

I have a directory containing one .csv file. 

Version 1:
data <- read.csv(<<dir+filename>>)

Version 2:
temp <- paste(c("dir/"), list.files("dir"), sep = "?)
data <- sapply(temp, read.csv)

Thanks for the replies and sorry if this question has been posted already
and I didn't see it,
Sven 

p.s.: I am asking this because Version 2 gives me the possibility to read a
whole directory with .csv files into one list




--
View this message in context: http://r.789695.n4.nabble.com/Reading-in-a-csv-2-different-results-tp4692434.html
Sent from the R help mailing list archive at Nabble.com.


From petr.pikal at precheza.cz  Fri Jun 20 15:35:05 2014
From: petr.pikal at precheza.cz (PIKAL Petr)
Date: Fri, 20 Jun 2014 13:35:05 +0000
Subject: [R] Reading in a csv - 2 different results
In-Reply-To: <1403260952933-4692434.post@n4.nabble.com>
References: <1403260952933-4692434.post@n4.nabble.com>
Message-ID: <6E8D8DFDE5FA5D4ABCB8508389D1BF8802BD89A8@SRVEXCHMBX.precheza.cz>

Hi

Version one reads one file directly into data.frame named data, output of version 2 is list named data with data.frame(s) nemed "1", ....

Is this a difference? Or you see also a difference in contents of those 2 data.frames?

Regards
Petr


> -----Original Message-----
> From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-
> project.org] On Behalf Of svendeswan
> Sent: Friday, June 20, 2014 12:43 PM
> To: r-help at r-project.org
> Subject: [R] Reading in a csv - 2 different results
>
> Hi,
> I am a beginner in R and already read and (thought that I) understood
> the R introduction tutorial. However there is this reading .csv which I
> cant solve. The question is: Why has data in the both cases a different
> content?
>
> I have a directory containing one .csv file.
>
> Version 1:
> data <- read.csv(<<dir+filename>>)
>
> Version 2:
> temp <- paste(c("dir/"), list.files("dir"), sep = "?) data <-
> sapply(temp, read.csv)
>
> Thanks for the replies and sorry if this question has been posted
> already and I didn't see it, Sven
>
> p.s.: I am asking this because Version 2 gives me the possibility to
> read a whole directory with .csv files into one list
>
>
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/Reading-in-
> a-csv-2-different-results-tp4692434.html
> Sent from the R help mailing list archive at Nabble.com.
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.

________________________________
Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou ur?eny pouze jeho adres?t?m.
Jestli?e jste obdr?el(a) tento e-mail omylem, informujte laskav? neprodlen? jeho odes?latele. Obsah tohoto emailu i s p??lohami a jeho kopie vyma?te ze sv?ho syst?mu.
Nejste-li zam??len?m adres?tem tohoto emailu, nejste opr?vn?ni tento email jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu zp?sobenou modifikacemi ?i zpo?d?n?m p?enosu e-mailu.

V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
- vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o uzav?en? smlouvy, a to z jak?hokoliv d?vodu i bez uveden? d?vodu.
- a obsahuje-li nab?dku, je adres?t opr?vn?n nab?dku bezodkladn? p?ijmout; Odes?latel tohoto e-mailu (nab?dky) vylu?uje p?ijet? nab?dky ze strany p??jemce s dodatkem ?i odchylkou.
- trv? odes?latel na tom, ?e p??slu?n? smlouva je uzav?ena teprve v?slovn?m dosa?en?m shody na v?ech jej?ch n?le?itostech.
- odes?latel tohoto emailu informuje, ?e nen? opr?vn?n uzav?rat za spole?nost ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn? zmocn?n nebo p?semn? pov??en a takov? pov??en? nebo pln? moc byly adres?tovi tohoto emailu p??padn? osob?, kterou adres?t zastupuje, p?edlo?eny nebo jejich existence je adres?tovi ?i osob? j?m zastoupen? zn?m?.

This e-mail and any documents attached to it may be confidential and are intended only for its intended recipients.
If you received this e-mail by mistake, please immediately inform its sender. Delete the contents of this e-mail with all attachments and its copies from your system.
If you are not the intended recipient of this e-mail, you are not authorized to use, disseminate, copy or disclose this e-mail in any manner.
The sender of this e-mail shall not be liable for any possible damage caused by modifications of the e-mail or by delay with transfer of the email.

In case that this e-mail forms part of business dealings:
- the sender reserves the right to end negotiations about entering into a contract in any time, for any reason, and without stating any reasoning.
- if the e-mail contains an offer, the recipient is entitled to immediately accept such offer; The sender of this e-mail (offer) excludes any acceptance of the offer on the part of the recipient containing any amendment or variation.
- the sender insists on that the respective contract is concluded only upon an express mutual agreement on all its aspects.
- the sender of this e-mail informs that he/she is not authorized to enter into any contracts on behalf of the company except for cases in which he/she is expressly authorized to do so in writing, and such authorization or power of attorney is submitted to the recipient or the person represented by the recipient, or the existence of such authorization is known to the recipient of the person represented by the recipient.

From jdnewmil at dcn.davis.CA.us  Fri Jun 20 15:53:22 2014
From: jdnewmil at dcn.davis.CA.us (Jeff Newmiller)
Date: Fri, 20 Jun 2014 06:53:22 -0700
Subject: [R] How to process a log file in R ?
In-Reply-To: <CACbhFuVOuD48DDStpND-+iRQSyOotHZuJ++464_Gwv87rVT=mQ@mail.gmail.com>
References: <CACbhFuVOuD48DDStpND-+iRQSyOotHZuJ++464_Gwv87rVT=mQ@mail.gmail.com>
Message-ID: <c113f9aa-fcd9-42e9-9fca-d442e7b27ae0@email.android.com>

You have not said what your problem is, and you have not shown us the code you have tried. How are we supposed to know what you want?
---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                      Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
--------------------------------------------------------------------------- 
Sent from my phone. Please excuse my brevity.

On June 20, 2014 12:26:03 AM PDT, praveen pal <pal.praveen11 at gmail.com> wrote:
>Hello
>
>   i am new to R and need help,
>   I want to parse a log file using R named tracking.log file.
> i try to read it using "jsonlite" package but not able to get data  in
>proper format.
>
>
>   i entered a sample of file below.
>   i also attached a file tracking.log file with this mail
>
>
> {
>    "username": "lavita",
>    "host": "10.105.22.32",
>    "event_source": "server",
>    "event_type":
>"/courses/IITB/CS101/2014_T1/xblock/i4x:;_;_IITB;_CS101;_video;_d333fa637a074b41996dc2fd5e675818/handler/xmodule_handler/save_user_state",
>    "context": {
>        "course_id": "IITB/CS101/2014_T1",
>        "course_user_tags": {},
>        "user_id": 42,
>        "org_id": "IITB"
>    },
>    "time": "2014-06-20T05:49:10.468638+00:00",
>    "ip": "127.0.0.1",
>    "event": "{\"POST\": {\"saved_video_position\": [\"00:02:10\"]},
>\"GET\": {}}",
>"agent": "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:18.0) Gecko/20100101
>Firefox/18.0",
>    "page": null
>}
>
>{
>    "username": "raeha",
>    "host": "10.105.22.32",
>    "event_source": "server",
>    "event_type": "problem_check",
>    "context": {
>        "course_id": "IITB/CS101/2014_T1",
>        "course_user_tags": {},
>        "user_id": 40,
>        "org_id": "IITB",
>        "module": {
>            "display_name": ""
>        }
>    },
>    "time": "2014-06-20T06:43:52.716455+00:00",
>    "ip": "127.0.0.1",
>    "event": {
>        "submission": {
>       "i4x-IITB-CS101-problem-33e4aac93dc84f368c93b1d08fa984fc_2_1": {
>                "input_type": "choicegroup",
>                "question": "",
>                "response_type": "multiplechoiceresponse",
>                "answer": "MenuInflater.inflate()",
>                "variant": "",
>                "correct": true
>            }
>        },
>        "success": "correct",
>        "grade": 1,
>        "correct_map": {
>       "i4x-IITB-CS101-problem-33e4aac93dc84f368c93b1d08fa984fc_2_1": {
>                "hint": "",
>                "hintmode": null,
>                "correctness": "correct",
>                "npoints": null,
>                "msg": "",
>                "queuestate": null
>            }
>        },
>        "state": {
>            "student_answers": {},
>            "seed": 1,
>            "done": null,
>            "correct_map": {},
>            "input_state": {
>
>"i4x-IITB-CS101-problem-33e4aac93dc84f368c93b1d08fa984fc_2_1": {}
>            }
>        },
>        "answers": {
>         "i4x-IITB-CS101-problem-33e4aac93dc84f368c93b1d08fa984fc_2_1":
>"choice_0"
>        },
>        "attempts": 1,
>        "max_grade": 1,
>        "problem_id":
>"i4x://IITB/CS101/problem/33e4aac93dc84f368c93b1d08fa984fc"
>    },
>"agent": "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:29.0) Gecko/20100101
>Firefox/29.0",
>    "page": "x_module"
>}
>
>
>{
>    "username": "tushars",
>    "host": "localhost",
>    "event_source": "server",
>    "event_type":
>"/courses/IITB/CS101/2014_T1/instructor_dashboard/api/list_instructor_tasks",
>    "context": {
>        "course_id": "IITB/CS101/2014_T1",
>        "course_user_tags": {},
>        "user_id": 6,
>        "org_id": "IITB"
>    },
>    "time": "2014-06-20T05:49:26.780244+00:00",
>    "ip": "127.0.0.1",
>    "event": "{\"POST\": {}, \"GET\": {}}",
>"agent": "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:29.0) Gecko/20100101
>Firefox/29.0",
>    "page": null
>}


From Yan_Li at ibi.com  Fri Jun 20 16:12:46 2014
From: Yan_Li at ibi.com (Li, Yan)
Date: Fri, 20 Jun 2014 10:12:46 -0400
Subject: [R] random forest application
Message-ID: <A29EC196EE32C64389369F6BF03B66C87744D97D7E@IBIUSMBSB.ibi.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140620/34346195/attachment.pl>

From raphael.paebst at gmail.com  Fri Jun 20 17:17:12 2014
From: raphael.paebst at gmail.com (=?ISO-8859-1?Q?Raphael_P=E4bst?=)
Date: Fri, 20 Jun 2014 17:17:12 +0200
Subject: [R] Delaunay Graph, once again
Message-ID: <CADuMfoFs2zKTXbzfyhD5GHyYaFEJmZOo87fAmBRZoOqDfOGhGA@mail.gmail.com>

Hello again,
After playing around with my current problem for some time, I have
once again returned to Delaunay Graphs and after banging my head
against the problem for some time I fear that I can't see the issue
clearly anymore and want to ask for some outside comments, to maybe
shake my thoughts loose again.

So, let me explain my project and then my problem:
 I have a set of points, given as x- and y-coordinates and want to
create the adjacency matrix of the corresponding Delaunay Graph. I
have already removed duplicates in my set of points and to calculate
the matrix, I have hit upon the following procedure, which might not
be the most efficient, but I'm aiming for correct results and
simplicty first, before I can think about efficiency.

# x a vector of length n, containing the x-coordinates of my n points
#y: the same for the y-coordinates
library(deldir)
del <- deldir(x, y) # calculating the tesselation
dels <- del$delsgs[,5:6] # giving me a data.frame with 2 columns,
containing the indices of points connected by an edge in the Delaunay
Graph

adj <- matrix(0, length(x), length(y)) # creating the empty adjacency matrix

for (i in 1:nrow(dels)){ # going through the rows of dels
adj[dels[i,1], dels[i,2]] <- 1; # since the points in a row of dels
are connected, the matrix at that point is set to 1
adj[dels[i,2], dels[i,1]] <- 1; # and this makes it symmetric
}

Now as I see it this should give me the adjacency matrix, right?

So let's come to my problem: The program I'm writing is a translation
of some Matlab-Code and so the results of both versions should be the
same, if at all possible. My adjacency matrix created in the above
mentioned manner however is not the same as the one created with
Matlab. The Matlab-Version uses algorithms based on Qhull, while I use
deldir as a library, could this account for the difference or have I
fundamentally misunderstood some part of the whole plan?

I hope the information is helpful and would very much appreciate any
pointers and thoughts on the matter.

Many thanks and all the best!

Raphael


From sarah.goslee at gmail.com  Fri Jun 20 17:30:39 2014
From: sarah.goslee at gmail.com (Sarah Goslee)
Date: Fri, 20 Jun 2014 11:30:39 -0400
Subject: [R] random forest application
In-Reply-To: <A29EC196EE32C64389369F6BF03B66C87744D97D7E@IBIUSMBSB.ibi.com>
References: <A29EC196EE32C64389369F6BF03B66C87744D97D7E@IBIUSMBSB.ibi.com>
Message-ID: <CAM_vjunc9oGDEmxYd2nx-UQKxWB_rLmnmrZYGGgyi5+B+93QSA@mail.gmail.com>

Hi,

This is not an R question, so really not appropriate for the list.

The answer depends on what "worth it" means to you.

There are many applications:
http://scholar.google.com/scholar?hl=en&q=%22random+forest%22&btnG=&as_sdt=1%2C39&as_sdtp=

Sarah

On Fri, Jun 20, 2014 at 10:12 AM, Li, Yan <Yan_Li at ibi.com> wrote:
> Hi All,
>
> Is anyone using random forest for predicting? Some people claimed that it will give more accurate result than decision tree. But considering it builds 500(by default) full trees, is it worth to use random forest to predict instead of decision tree? What typical applications of this algorithm?
>
> Thank you!
>
> Regards,
> Yan
-- 
Sarah Goslee
http://www.functionaldiversity.org


From Yan_Li at ibi.com  Fri Jun 20 17:35:54 2014
From: Yan_Li at ibi.com (Li, Yan)
Date: Fri, 20 Jun 2014 11:35:54 -0400
Subject: [R] random forest application
In-Reply-To: <CAM_vjunc9oGDEmxYd2nx-UQKxWB_rLmnmrZYGGgyi5+B+93QSA@mail.gmail.com>
References: <A29EC196EE32C64389369F6BF03B66C87744D97D7E@IBIUSMBSB.ibi.com>
	<CAM_vjunc9oGDEmxYd2nx-UQKxWB_rLmnmrZYGGgyi5+B+93QSA@mail.gmail.com>
Message-ID: <A29EC196EE32C64389369F6BF03B66C87744D97EF1@IBIUSMBSB.ibi.com>

Thanks for the reply...Actually you answered my question....I just want to know how people use it...

-----Original Message-----
From: Sarah Goslee [mailto:sarah.goslee at gmail.com] 
Sent: Friday, June 20, 2014 11:31 AM
To: Li, Yan
Cc: r-help at r-project.org
Subject: Re: [R] random forest application

Hi,

This is not an R question, so really not appropriate for the list.

The answer depends on what "worth it" means to you.

There are many applications:
http://scholar.google.com/scholar?hl=en&q=%22random+forest%22&btnG=&as_sdt=1%2C39&as_sdtp=

Sarah

On Fri, Jun 20, 2014 at 10:12 AM, Li, Yan <Yan_Li at ibi.com> wrote:
> Hi All,
>
> Is anyone using random forest for predicting? Some people claimed that it will give more accurate result than decision tree. But considering it builds 500(by default) full trees, is it worth to use random forest to predict instead of decision tree? What typical applications of this algorithm?
>
> Thank you!
>
> Regards,
> Yan
-- 
Sarah Goslee
http://www.functionaldiversity.org

From hb at biostat.ucsf.edu  Fri Jun 20 17:36:56 2014
From: hb at biostat.ucsf.edu (Henrik Bengtsson)
Date: Fri, 20 Jun 2014 08:36:56 -0700
Subject: [R] Rstudio: is it possible to create a document out of a
	working script?
In-Reply-To: <CAFnz2--_JSpY7FgydUgLDqqrR5zZGjp85mQ68CLnwQY8d8ZUcQ@mail.gmail.com>
References: <CAFnz2-9qyU6nx_gMvt6a=H6=MDdtZe_dCYtKuSjux=ijX1LCxA@mail.gmail.com>
	<CAN-Z0xVpN_AkNL2ZX-opQczDP34w96H7t0KSEE973y6zmBdZMA@mail.gmail.com>
	<CAFnz2--_JSpY7FgydUgLDqqrR5zZGjp85mQ68CLnwQY8d8ZUcQ@mail.gmail.com>
Message-ID: <CAFDcVCRvuYG5TNCdSxC9uux0Qfvp8d8BR68ZNrC07YezLxt2kw@mail.gmail.com>

On Fri, Jun 20, 2014 at 2:40 AM, Luca Cerone <luca.cerone at gmail.com> wrote:
> Hi Berend, sorry if it OT (though I think that the process is pretty
> much Rstudio independent, since what Rstudio does is wrap up knitr and
> their package Rmarkdown,
> but all the process can be run from the shell).
>
> Bob, so far this is what I do, but it is not ideal for two reasons:
> 1. I would like my report to be a step by step guide of what the
> script does. Wrapping the scripts in small functions, subscripts
> doesn?t help,
> because in the report what you would see is "source("subscript.r"),
> not the content of the subscript.
>
> 2. in a way I would need the exact opposite of what knitr and
> Rmarkdown do (at least by default). I would like to document my script
> in a way that can be run independently of the report and that, when
> neede, could use the comments to generate the report, similarly to how
> roxygen2 works when writing the documentation.

http://rmarkdown.rstudio.com/r_notebook_format.html

/Henrik

>
> Thanks a lot for the help,
> apologies again if this is OT (if so please remove the thread and I
> will ask in the the Rstudio support).
>
> Cheers,
> Luca
>
> 2014-06-20 11:28 GMT+02:00 Bob O'Hara <rni.boh at gmail.com>:
>> How about simply using source() to call the script? If necessary, wrap bits
>> of the script in functions, so you source a file with lots of functions, and
>> then call the ones you need, as you need them.
>>
>> Bob
>>
>> On 20 June 2014 11:20, Luca Cerone <luca.cerone at gmail.com> wrote:
>>>
>>> Dear all,
>>> I am very happy with the new features introduced by Rstudio about how
>>> to create documents embedding R code.
>>>
>>> I would like to know though if there is some way to embed code from a
>>> working script into an Rmd document.
>>> I have several working scripts for which I would like to report the
>>> results, but I would like to avoid
>>> copy and paste the code in the Rmd document: the pipeline is still a
>>> work in progress,
>>> and it is likely that I will end up changing the code and parameters
>>> in the script.
>>>
>>> As you can imagine, having to copy and paste my code is prone error,
>>> and leads to a lot of code replication.
>>> I would like to avoid this, but couldn?t find a straightforward way so
>>> far.
>>>
>>>
>>> Thanks a lot in advance,
>>> of course if you have other advices, or comments on best practices for
>>> this sort of thing,
>>> I would like to hear them from you.
>>>
>>> Cheers,
>>> Luca
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>>
>>
>>
>> --
>> Bob O'Hara
>>
>> Biodiversity and Climate Research Centre
>> Senckenberganlage 25
>> D-60325 Frankfurt am Main,
>> Germany
>>
>> Tel: +49 69 798 40226
>> Mobile: +49 1515 888 5440
>> WWW:   http://www.bik-f.de/root/index.php?page_id=219
>> Blog: http://occamstypewriter.org/boboh/
>> Journal of Negative Results - EEB: www.jnr-eeb.org
>
>
>
> --
> Luca Cerone
>
> Tel: +34 692 06 71 28
> Skype: luca.cerone
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From lists at revelle.net  Fri Jun 20 17:46:52 2014
From: lists at revelle.net (William Revelle)
Date: Fri, 20 Jun 2014 10:46:52 -0500
Subject: [R] Principal component analysis with EQUAMAX rotation
In-Reply-To: <1403161657006-4692337.post@n4.nabble.com>
References: <1403161657006-4692337.post@n4.nabble.com>
Message-ID: <3FD63DC3-3F70-4CA7-8B42-837C8DDE8CEE@revelle.net>

Dear Wagner,
  I added the equamax rotation option to the psych package in version 1.4.6.  This was requested by Sagnik Chakravarty, with a solution by Gunter Nickel.

Unfortunately, the version on CRAN  is 1.4.5, but you can get 1.4.6 from the alternate repository  http://personality-project.org/r/  (if using a Mac) or  http://personality-project.org/r/src/contrib/   if using a PC.

Thus,

p3 <- principal(Thurstone,3,rotate="equamax?)  #will extract the first three components and rotate them using equamax.


Let me know if this does what you want.

Bill


On Jun 19, 2014, at 2:07 AM, Wagner <wagner.fab at gmx.de> wrote:

> Hello,
> I need to do a principal component analysis with EQUAMAX-rotation.
> Unfortunately the function principal() I use normally for PCA does not offer
> this rotation specification. I could find out that this might be possible
> somehow with the package GPArotation but until now I could not figure out
> how to use this in the principal component analysis.
> Maybe someone can give an example on how to do an equamax-rotation PCA?
> Or is there a function in another package that offers the use of
> equamax-rotation directly?
> Thank you for your help!
> 
> 
> 
> --
> View this message in context: http://r.789695.n4.nabble.com/Principal-component-analysis-with-EQUAMAX-rotation-tp4692337.html
> Sent from the R help mailing list archive at Nabble.com.
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

William Revelle		           http://personality-project.org/revelle.html
Professor			           http://personality-project.org
Department of Psychology   http://www.wcas.northwestern.edu/psych/
Northwestern University	   http://www.northwestern.edu/
Use R for psychology             http://personality-project.org/r
It is 5 minutes to midnight	   http://www.thebulletin.org


From aguitatierra at hotmail.com  Fri Jun 20 18:18:25 2014
From: aguitatierra at hotmail.com (Bea GD)
Date: Fri, 20 Jun 2014 18:18:25 +0200
Subject: [R] Loops to produce plots and leyend
Message-ID: <BLU436-SMTP114810D6DBCCC01069D074DD9120@phx.gbl>

I've tried several things but I don't manage to get this plot right. Any 
help greatly appreciated!
I'm running a for loop to produce 4 plots at once. Each plot should only 
show data points for a specific group (i.e. 4 plots for groups 1 to 4). 
The coordinates of the points should be petal length and width. The 
colour of these points should codify the species variable. Finally I'd 
like to show a legend for the colours on these plots. It's important 
that each species has a unique colour. Thanks you a lot for your input!

     # Data
     dd <- iris

     dd$group <- ifelse(dd$Sepal.Length>=4.3 & dd$Sepal.Length<5.2, 1,
                          ifelse(dd$Sepal.Length>=5.2 & 
dd$Sepal.Length<6.1, 2,
                                 ifelse(dd$Sepal.Length>=6.1 & 
dd$Sepal.Length<7, 3,
                                        ifelse(dd$Sepal.Length>=7, 4, NA))))
     dd$group <- as.integer(dd$group)

     dd$Species <- c(rep("Wild", 12), rep("Pinky", 12), rep("Orangy", 
12), rep("Smelly", 12),
                     rep("Pretty", 12), rep("Blue", 12), rep("Big", 12), 
rep("Rare", 12),
                     rep("Toxic", 12), rep("Danger", 12), 
rep("Abundant", 18), rep("Last", 12))


     # Code to plot 4 graphs. It doesn't work!
     pdf("plot_test.pdf", width=10, height=10)
     par(mfrow=c(2, 2))
     for(b in unique(dd$group)){
       idx <- dd$group==b
       plot(dd$Petal.Length, dd$Petal.Width, ty="n", 
xlim=range(dd$Petal.Length), ylim=range(dd$Petal.Width))
       cols <- as.numeric(unique(dd$Species))
       points(dd$Petal.Length[idx], dd$Petal.Width[idx],
              col=cols[as.numeric(dd$Species[idx])])
       legend("right", legend=unique(dd$Species[idx]), pch=1, 
col=cols[as.numeric(unique(dd$Species[idx]))])
     }
     dev.off()


From lists at revelle.net  Fri Jun 20 18:36:27 2014
From: lists at revelle.net (William Revelle)
Date: Fri, 20 Jun 2014 11:36:27 -0500
Subject: [R] Principal component analysis with EQUAMAX rotation
In-Reply-To: <1403161657006-4692337.post@n4.nabble.com>
References: <1403161657006-4692337.post@n4.nabble.com>
Message-ID: <FE0C2577-1B19-4E34-86BB-671E67DE9E6D@revelle.net>

Dear Wagner,
  I added the equamax rotation option to the psych package in version 1.4.6.  This was requested by Sagnik Chakravarty, with a solution by Gunter Nickel.

Unfortunately, the version on CRAN  is 1.4.5, but you can get the working prerelease of 1.4.6 (1.4.6.20)  from the alternate repository  http://personality-project.org/r/  (if using a Mac) or  http://personality-project.org/r/src/contrib/   if using a PC.

Thus,

 p3e <- principal(Thurstone,3,rotate="equamax")  #will extract the first three components and rotate them using equamax.
 p3n <- principal(Thurstone,3,rotate="none")   #will give you the unrotated 3 component solution
 p3v <- principal(Thurstone,3,rotate="varimax") #for the varimax solution
 
 factor.congruence(list(p3e,p3n,p3v))  #compares the Burt/Tucker congruence coefficients for these three solutions


Let me know if this does what you want.

Bill


On Jun 19, 2014, at 2:07 AM, Wagner <wagner.fab at gmx.de> wrote:

> Hello,
> I need to do a principal component analysis with EQUAMAX-rotation.
> Unfortunately the function principal() I use normally for PCA does not offer
> this rotation specification. I could find out that this might be possible
> somehow with the package GPArotation but until now I could not figure out
> how to use this in the principal component analysis.
> Maybe someone can give an example on how to do an equamax-rotation PCA?
> Or is there a function in another package that offers the use of
> equamax-rotation directly?
> Thank you for your help!
> 
> 
> 
> --
> View this message in context: http://r.789695.n4.nabble.com/Principal-component-analysis-with-EQUAMAX-rotation-tp4692337.html
> Sent from the R help mailing list archive at Nabble.com.
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

William Revelle		           http://personality-project.org/revelle.html
Professor			           http://personality-project.org
Department of Psychology   http://www.wcas.northwestern.edu/psych/
Northwestern University	   http://www.northwestern.edu/
Use R for psychology             http://personality-project.org/r
It is 5 minutes to midnight	   http://www.thebulletin.org


From pdalgd at gmail.com  Fri Jun 20 19:50:30 2014
From: pdalgd at gmail.com (peter dalgaard)
Date: Fri, 20 Jun 2014 19:50:30 +0200
Subject: [R] R is converting arg input to scientific notation,
	which is bad!
In-Reply-To: <0FB13139-EC28-442A-92C8-494121961902@comcast.net>
References: <1403204881532-4692389.post@n4.nabble.com>
	<0FB13139-EC28-442A-92C8-494121961902@comcast.net>
Message-ID: <26002426-6AC7-4ADC-8C5E-899379EE0C12@gmail.com>


On 20 Jun 2014, at 04:30 , David Winsemius <dwinsemius at comcast.net> wrote:

> I think it's your `digits = 0` argument:
> 
>> formatC(20, digits = 3, width = 3, flag = "0")
> [1] "020"

At any rate, sprintf() is often more convenient:

> sprintf("%03d.csv", c(30, 104, 223))
[1] "030.csv" "104.csv" "223.csv"


-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From davies.trevor at gmail.com  Fri Jun 20 20:10:58 2014
From: davies.trevor at gmail.com (Trevor Davies)
Date: Fri, 20 Jun 2014 11:10:58 -0700
Subject: [R] mgcv: BAM convergence conflicting messages
In-Reply-To: <53A156CA.1030909@bath.ac.uk>
References: <CAJhyqViTvvwHPkDMzm04p6nRZg1uz3KMTZoayMubG9qY1PCV=A@mail.gmail.com>
	<53A156CA.1030909@bath.ac.uk>
Message-ID: <CAJhyqVhWDQOsg5yxBw7aD-c-Z-+v6kWwRbdDawBsVvN5az8cxA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140620/3dc4d53e/attachment.pl>

From bbolker at gmail.com  Fri Jun 20 21:12:39 2014
From: bbolker at gmail.com (Ben Bolker)
Date: Fri, 20 Jun 2014 19:12:39 +0000
Subject: [R] Convert nlme formula to nlmer
References: <90854403-011C-4BB1-872C-ADCDB1E92274@cam.ac.uk>
Message-ID: <loom.20140620T210550-815@post.gmane.org>

Roxane Foulser-Piggott <rf371 <at> cam.ac.uk> writes:

>  R version 3.1.0 (2014-04-10) -- "Spring Dance?. Platform:
> x86_64-apple-darwin13.1.0 (64-bit).  

> I would like to convert the following function from nlme to nlmer.
> I am finding it difficult to apply the documentation I can find on
> this procedure to this problem.  The function predicts earthquake
> ground-shaking (lnIa) as a function of M, Rrup, Ztor, Fevent, Vs30
> and e1.  I am converting to nlmer, as once I have it running, I will
> explore crossed and nested mixed effects.
 
> eq1 <- nlme( lnIa ~ c0 + m1*(M-5) + 
  (r1a + r1b*M)*log(sqrt(Rrup^2 + Ztor^2)) + f1*Fevent + v1*log(Vs30/760)  
  + e1,fixed=c0+m1+r1a+r1b+f1+v1~1,random=e1~1|Event,data = data, 
  start = c(c0=11,m1=-0.9,r1a=0.5,r1b=-0.52,f1=0.9,v1=-1.32))
 
You will probably have more luck with this question on the
r-sig-mixed-models at r-project.org mailing list.

Unfortunately one of the things you will also find is that although
the basic computational machinery is in place, nlmer is much less
well developed than nlme.  See http://rpubs.com/bbolker/3423 for
an extended example of a nonlinear model that incorporates 
non-trivial fixed effects ...


From jun.shen.ut at gmail.com  Fri Jun 20 21:42:04 2014
From: jun.shen.ut at gmail.com (Jun Shen)
Date: Fri, 20 Jun 2014 15:42:04 -0400
Subject: [R] Data extraction and assembly from a data frame
Message-ID: <CAMCXXmphRTdJBC2waehMgO6_KAgEmQkZB9fHW+h-ukW_LCz3yQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140620/2b974604/attachment.pl>

From LaurentRHelp at free.fr  Fri Jun 20 21:45:03 2014
From: LaurentRHelp at free.fr (Laurent Rhelp)
Date: Fri, 20 Jun 2014 21:45:03 +0200
Subject: [R] lattice : superpose symbols with a great many points
Message-ID: <53A48F3F.8050405@free.fr>

Hi,

   I like to use with xyplot (package lattice) the groups argument and 
superpose.symbol to compare several curves. But, when there are a great 
many points, the symbols are very close and the graph becomes 
unreadable. Would there be an argument  or a tip not to draw all the 
symbols, for example the symbols could be drawn only every x points, x 
given as an argument ?

Thanks
Best regards
Laurent



---
Ce courrier ?lectronique ne contient aucun virus ou logiciel malveillant parce que la protection avast! Antivirus est active.


From cscherb1 at gwdg.de  Fri Jun 20 21:50:10 2014
From: cscherb1 at gwdg.de (Christoph Scherber)
Date: Fri, 20 Jun 2014 21:50:10 +0200
Subject: [R] lattice : superpose symbols with a great many points
In-Reply-To: <53A48F3F.8050405@free.fr>
References: <53A48F3F.8050405@free.fr>
Message-ID: <53A49072.9070809@gwdg.de>

Dear Laurent

for numeric x variables, you could try jitter:

xyplot(y~jitter(x,0.5))

Cheers
Christoph


Am 20.06.2014 21:45, schrieb Laurent Rhelp:
> Hi,
>
>   I like to use with xyplot (package lattice) the groups argument and 
> superpose.symbol to compare several curves. But, when there are a 
> great many points, the symbols are very close and the graph becomes 
> unreadable. Would there be an argument  or a tip not to draw all the 
> symbols, for example the symbols could be drawn only every x points, x 
> given as an argument ?
>
> Thanks
> Best regards
> Laurent
>
>
>
> ---
> Ce courrier ?lectronique ne contient aucun virus ou logiciel 
> malveillant parce que la protection avast! Antivirus est active.
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From macqueen1 at llnl.gov  Fri Jun 20 21:51:36 2014
From: macqueen1 at llnl.gov (MacQueen, Don)
Date: Fri, 20 Jun 2014 19:51:36 +0000
Subject: [R] Data extraction and assembly from a data frame
In-Reply-To: <CAMCXXmphRTdJBC2waehMgO6_KAgEmQkZB9fHW+h-ukW_LCz3yQ@mail.gmail.com>
References: <CAMCXXmphRTdJBC2waehMgO6_KAgEmQkZB9fHW+h-ukW_LCz3yQ@mail.gmail.com>
Message-ID: <CFC9DEB0.FD5A9%macqueen1@llnl.gov>

How about

aggregate(TestData[,c('VAR1','VAR2','VAR3')], by=list(id=TestData$ID),
FUN=max)




-- 
Don MacQueen

Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062





On 6/20/14 12:42 PM, "Jun Shen" <jun.shen.ut at gmail.com> wrote:

>Hi all,
>
>Here is my situation. I have a dataframe, the structure would be something
>like this,
>
>TestData<-data.frame(ID=rep(1:10,each=10),TIME=rep(seq(0.1,1,0.1),10),VAR1
>=rnorm(100),VAR2=5*rnorm(100),VAR3=10*rnorm(100))
>
>Basically, I want to extract the maximum value from each ID for VAR1,
>VAR2,
>VAR3......
>
>The way I can think of is
>
>do.call(rbind,lapply(split(TestData,TestData$ID),function(x)x[which.max(x$
>VAR1),'VAR1']))
>
>and do this for each of the variables and put the results back. It's kind
>of clumsy but OK for several variables. I have dozens of them. Is there a
>better way to do it?
>
>It would be ideal to produce the results like
>
>   ID VAR1.max VAR2.max VAR3.max  1 1.2828796 8.63276 15.051992  2
>1.1870067
>8.691801 10.736301  3 1.2815352 6.335692 5.827524  4 1.6719411 5.998597
>16.646212  5 1.5631107 6.067457 15.331046  6 0.718989 6.610279 7.306005  7
>0.8734315 13.39844 16.965365  8 2.7447862 10.21613 22.545131  9 3.490395
>10.83543 25.744662  10 0.4719087 11.73021 7.226687
>Thanks for any help.
>
>Jun Shen
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From wdunlap at tibco.com  Fri Jun 20 21:51:55 2014
From: wdunlap at tibco.com (William Dunlap)
Date: Fri, 20 Jun 2014 12:51:55 -0700
Subject: [R] Data extraction and assembly from a data frame
In-Reply-To: <CAMCXXmphRTdJBC2waehMgO6_KAgEmQkZB9fHW+h-ukW_LCz3yQ@mail.gmail.com>
References: <CAMCXXmphRTdJBC2waehMgO6_KAgEmQkZB9fHW+h-ukW_LCz3yQ@mail.gmail.com>
Message-ID: <CAF8bMcYs-P8wE_MdPjpNCi9=YJ_dowMPpdi=fXUtU8ExFO+0QA@mail.gmail.com>

Have you looked at the 'aggregate' function?  E.g.,
  aggregate(TestData[c("VAR1","VAR2","VAR3")], by=TestData["ID"], max)
Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Fri, Jun 20, 2014 at 12:42 PM, Jun Shen <jun.shen.ut at gmail.com> wrote:
> Hi all,
>
> Here is my situation. I have a dataframe, the structure would be something
> like this,
>
> TestData<-data.frame(ID=rep(1:10,each=10),TIME=rep(seq(0.1,1,0.1),10),VAR1=rnorm(100),VAR2=5*rnorm(100),VAR3=10*rnorm(100))
>
> Basically, I want to extract the maximum value from each ID for VAR1, VAR2,
> VAR3......
>
> The way I can think of is
>
> do.call(rbind,lapply(split(TestData,TestData$ID),function(x)x[which.max(x$VAR1),'VAR1']))
>
> and do this for each of the variables and put the results back. It's kind
> of clumsy but OK for several variables. I have dozens of them. Is there a
> better way to do it?
>
> It would be ideal to produce the results like
>
>    ID VAR1.max VAR2.max VAR3.max  1 1.2828796 8.63276 15.051992  2 1.1870067
> 8.691801 10.736301  3 1.2815352 6.335692 5.827524  4 1.6719411 5.998597
> 16.646212  5 1.5631107 6.067457 15.331046  6 0.718989 6.610279 7.306005  7
> 0.8734315 13.39844 16.965365  8 2.7447862 10.21613 22.545131  9 3.490395
> 10.83543 25.744662  10 0.4719087 11.73021 7.226687
> Thanks for any help.
>
> Jun Shen
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From smartpink111 at yahoo.com  Fri Jun 20 21:56:00 2014
From: smartpink111 at yahoo.com (arun)
Date: Fri, 20 Jun 2014 12:56:00 -0700
Subject: [R] Data extraction and assembly from a data frame
In-Reply-To: <CAMCXXmphRTdJBC2waehMgO6_KAgEmQkZB9fHW+h-ukW_LCz3yQ@mail.gmail.com>
References: <CAMCXXmphRTdJBC2waehMgO6_KAgEmQkZB9fHW+h-ukW_LCz3yQ@mail.gmail.com>
Message-ID: <1403294160.4824.YahooMailNeo@web142606.mail.bf1.yahoo.com>

You could try:
library(plyr)
res <- ddply(TestData[,-2],.(ID),numcolwise(max)) 
colnames(res)[-1] <- paste0(colnames(res)[-1],".max")
A.K.




On Friday, June 20, 2014 3:43 PM, Jun Shen <jun.shen.ut at gmail.com> wrote:
Hi all,

Here is my situation. I have a dataframe, the structure would be something
like this,

TestData<-data.frame(ID=rep(1:10,each=10),TIME=rep(seq(0.1,1,0.1),10),VAR1=rnorm(100),VAR2=5*rnorm(100),VAR3=10*rnorm(100))

Basically, I want to extract the maximum value from each ID for VAR1, VAR2,
VAR3......

The way I can think of is

do.call(rbind,lapply(split(TestData,TestData$ID),function(x)x[which.max(x$VAR1),'VAR1']))

and do this for each of the variables and put the results back. It's kind
of clumsy but OK for several variables. I have dozens of them. Is there a
better way to do it?

It would be ideal to produce the results like

?  ID VAR1.max VAR2.max VAR3.max? 1 1.2828796 8.63276 15.051992? 2 1.1870067
8.691801 10.736301? 3 1.2815352 6.335692 5.827524? 4 1.6719411 5.998597
16.646212? 5 1.5631107 6.067457 15.331046? 6 0.718989 6.610279 7.306005? 7
0.8734315 13.39844 16.965365? 8 2.7447862 10.21613 22.545131? 9 3.490395
10.83543 25.744662? 10 0.4719087 11.73021 7.226687
Thanks for any help.

Jun Shen

??? [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.



From jun.shen.ut at gmail.com  Fri Jun 20 22:03:18 2014
From: jun.shen.ut at gmail.com (Jun Shen)
Date: Fri, 20 Jun 2014 16:03:18 -0400
Subject: [R] Data extraction and assembly from a data frame
In-Reply-To: <1403294160.4824.YahooMailNeo@web142606.mail.bf1.yahoo.com>
References: <CAMCXXmphRTdJBC2waehMgO6_KAgEmQkZB9fHW+h-ukW_LCz3yQ@mail.gmail.com>
	<1403294160.4824.YahooMailNeo@web142606.mail.bf1.yahoo.com>
Message-ID: <CAMCXXmocdaDaDBS6EZnvdgDk1dW8FG4rp=DZdQFaQDdDMc7o0Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140620/787fcfce/attachment.pl>

From cryan at binghamton.edu  Fri Jun 20 22:58:47 2014
From: cryan at binghamton.edu (Christopher W Ryan)
Date: Fri, 20 Jun 2014 16:58:47 -0400
Subject: [R] empty density plot for point pattern in spatstat
In-Reply-To: <CF5661163F77A44781208D9AC4FDEA725D67260626@IS-WIN-376.staffad.uwa.edu.au>
References: <CAM+rpYnjg_SGnyGrVcwuakX1xmXd7ysy1gZntdn7m2zD=kqong@mail.gmail.com>
	<CAM+rpYmz8zWkZvpNX6--a+F6vu6p2JkjzzTeoWta+PZ1oKh6jA@mail.gmail.com>
	<53A0B1C5.2080008@auckland.ac.nz>
	<CAL7MysnyrphaRcxHUhNT1nuy7By2fHzdHrXyTY7EQ1UxG22kKg@mail.gmail.com>
	<CF5661163F77A44781208D9AC4FDEA725D6726061A@IS-WIN-376.staffad.uwa.edu.au>
	<CAL7MyskMQwcTrePrb7Baa3-b0oRZO=_B946UNF7r1hEA4QXgTA@mail.gmail.com>
	<CF5661163F77A44781208D9AC4FDEA725D67260626@IS-WIN-376.staffad.uwa.edu.au>
Message-ID: <CAM+rpYktZg28NjBRNnx4xbO2xE1vUGv5Aq6jgRROp3z_sFJjZg@mail.gmail.com>

I'm back in the office with the machine that was giving me trouble.

# fresh start-up of R 3.1.0, installed on the my machine's hard drive,
#under Windows XP Service Pack 3.
# spatstat version 1.37-0

library(spatstat)
data(redwood)
dens <- density(redwood)
str(dens) # everything looks to be in order
plot(dens)  # empty plot with empty ribbon on right side
dev.cur() # yields " null device
          #                    1"
		  # I think I closed the plot window
		  # before issuing this command
		
plot(dens, col=grey(seq(0,1,length=32)))		
# yields an empty density plot with empty ribbon
		
plot(dens, useRaster=FALSE)
# yields a proper density plot in blue/green/yellow,
# with an empty ribbon

plot(dens, useRaster=FALSE, ribargs=list(useRaster=TRUE))
# yields a proper density plot in blue/green/yellow,
# with an empty ribbon

dev.cur()
# yields "windows
#               2 "

example(plot.im)
# yields a series of 8 plot.
#All but one of them is empty--both plot area and ribbon
# the second one has a color ramp in the ribbon
# along the bottom, but again no plot

with(bei.extra,plot(elev))
# yields an empty plot with empty ribbon

with(bei.extra,plot(elev, useRaster=FALSE))
with(bei.extra,plot(elev, useRaster=FALSE,  ribargs=list(useRaster=TRUE)))
# these both yield the same result:
# a colored density plot with an empty ribbon

Thanks

--Chris Ryan

On Thu, Jun 19, 2014 at 8:31 PM, Adrian Baddeley
<adrian.baddeley at uwa.edu.au> wrote:
> Dear Pablo,
>
>> Yes, effectively utilizando useRaster = FALSE, the plot is printed.
>
> Muy bien!
>
>> Only the ribbon appears without color.
>
> Try setting ribargs=list(useRaster=TRUE).
>
>> I'm using R version 3.0.2, Windows 7 system, and spatstat 1.33-0 package version.
>
> Things may improve if you upgrade to the current versions, R 3.1.0 and spatstat 1.37-0.
>
> A
>
> Prof Adrian Baddeley FAA
> University of Western Australia


From zaydfarah at gmail.com  Fri Jun 20 15:58:56 2014
From: zaydfarah at gmail.com (Zayd Farah)
Date: Fri, 20 Jun 2014 09:58:56 -0400
Subject: [R] zuzufarah Help with ggplot 2 error: Aesthetics must either be
 length one, or the same length as the dataProblems
Message-ID: <CAMU6xLf0pYBVsSVtf9FFcTX+LaXodPVO5Ok3FX2U_6S2Qgt+rw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140620/0211c8d6/attachment.pl>

From schmeier at dfki.de  Fri Jun 20 16:27:37 2014
From: schmeier at dfki.de (svendeswan)
Date: Fri, 20 Jun 2014 07:27:37 -0700 (PDT)
Subject: [R] Reading in a csv - 2 different results
In-Reply-To: <6E8D8DFDE5FA5D4ABCB8508389D1BF8802BD89A8@SRVEXCHMBX.precheza.cz>
References: <1403260952933-4692434.post@n4.nabble.com>
	<6E8D8DFDE5FA5D4ABCB8508389D1BF8802BD89A8@SRVEXCHMBX.precheza.cz>
Message-ID: <1403274457599-4692448.post@n4.nabble.com>

Aww thank u !

I had a knot in my brain... thank you for solving it :)

Cheers,
Sven



--
View this message in context: http://r.789695.n4.nabble.com/Reading-in-a-csv-2-different-results-tp4692434p4692448.html
Sent from the R help mailing list archive at Nabble.com.


From ele0044 at uah.edu  Fri Jun 20 18:52:45 2014
From: ele0044 at uah.edu (efridge)
Date: Fri, 20 Jun 2014 09:52:45 -0700 (PDT)
Subject: [R] R is converting arg input to scientific notation,
	which is bad!
In-Reply-To: <0FB13139-EC28-442A-92C8-494121961902@comcast.net>
References: <1403204881532-4692389.post@n4.nabble.com>
	<0FB13139-EC28-442A-92C8-494121961902@comcast.net>
Message-ID: <1403283165842-4692459.post@n4.nabble.com>

The digits argument for formatC is for sigfigs. I found a solution within the
formatC argument list. When I added the format arg to formatC:

filenames <- paste0(formatC(id, digits = 0, width = 3, format = "d", flag =
"0"), ".csv")

..it miraculously worked. d is the format value for integers. Hope someone
else can learn from this!



--
View this message in context: http://r.789695.n4.nabble.com/R-is-converting-arg-input-to-scientific-notation-which-is-bad-tp4692389p4692459.html
Sent from the R help mailing list archive at Nabble.com.


From ferra.xu at yahoo.com  Fri Jun 20 20:45:19 2014
From: ferra.xu at yahoo.com (Ferra Xu)
Date: Fri, 20 Jun 2014 11:45:19 -0700
Subject: [R] Is there anyone who is familiar with PtProcess package?
Message-ID: <1403289919.670.YahooMailNeo@web125106.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140620/c8e21003/attachment.pl>

From paramon at utpl.edu.ec  Fri Jun 20 23:24:36 2014
From: paramon at utpl.edu.ec (=?UTF-8?B?UGFibG8gUmFtw7Nu?=)
Date: Fri, 20 Jun 2014 16:24:36 -0500
Subject: [R] empty density plot for point pattern in spatstat
In-Reply-To: <CAM+rpYktZg28NjBRNnx4xbO2xE1vUGv5Aq6jgRROp3z_sFJjZg@mail.gmail.com>
References: <CAM+rpYnjg_SGnyGrVcwuakX1xmXd7ysy1gZntdn7m2zD=kqong@mail.gmail.com>
	<CAM+rpYmz8zWkZvpNX6--a+F6vu6p2JkjzzTeoWta+PZ1oKh6jA@mail.gmail.com>
	<53A0B1C5.2080008@auckland.ac.nz>
	<CAL7MysnyrphaRcxHUhNT1nuy7By2fHzdHrXyTY7EQ1UxG22kKg@mail.gmail.com>
	<CF5661163F77A44781208D9AC4FDEA725D6726061A@IS-WIN-376.staffad.uwa.edu.au>
	<CAL7MyskMQwcTrePrb7Baa3-b0oRZO=_B946UNF7r1hEA4QXgTA@mail.gmail.com>
	<CF5661163F77A44781208D9AC4FDEA725D67260626@IS-WIN-376.staffad.uwa.edu.au>
	<CAM+rpYktZg28NjBRNnx4xbO2xE1vUGv5Aq6jgRROp3z_sFJjZg@mail.gmail.com>
Message-ID: <CAL7Mys=Bj0j04+gRaoM_hda93A0NMYAKpW6Y5GSnZuMrp9ozDg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140620/d72966fb/attachment.pl>

From r.turner at auckland.ac.nz  Sat Jun 21 01:18:12 2014
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Sat, 21 Jun 2014 11:18:12 +1200
Subject: [R] Delaunay Graph, once again
In-Reply-To: <CADuMfoFs2zKTXbzfyhD5GHyYaFEJmZOo87fAmBRZoOqDfOGhGA@mail.gmail.com>
References: <CADuMfoFs2zKTXbzfyhD5GHyYaFEJmZOo87fAmBRZoOqDfOGhGA@mail.gmail.com>
Message-ID: <53A4C134.2020607@auckland.ac.nz>


You are almost surely being bitten by the issue about which you 
previously made inquiries to me, concerning the delaunayn() function 
from the "geometry" package.  (NOTE: ***PACKAGE***!!!  Not "library".  A 
library is a *collection* of packages.) The delaunayn()
function also uses the qhull algorithm.  By default it treats some 
triples of *collinear* points as triangles.  This is probably causing 
the discrepancy between the results.

Ergo it would seem best to use deldir() unless you *really want* 
collinear triples to be considered as triangles --- and I can't see why 
you would.

Your code for calculating the adjacency list is correct. (Except for the 
fact that you put in unnecessary semi-colons --- this is R, not C --- 
and for the fact that a comment runs over into the next line, causing an 
error to be thrown when one tries to copy and paste your code.)

Try a toy example:

require(deldir)
set.seed(42)
x <- runif(6)
y <- runif(6)
dxy <- deldir(x,y)
ind <- dxy$dirsgs[,5:6]
adj <- matrix(0, length(x), length(y))
for (i in 1:nrow(ind)){
    adj[ind[i,1], ind[i,2]] <- 1
    adj[ind[i,2], ind[i,1]] <- 1
}
adj
      [,1] [,2] [,3] [,4] [,5] [,6]
[1,]    0    1    0    1    0    1
[2,]    1    0    1    1    1    0
[3,]    0    1    0    0    1    1
[4,]    1    1    0    0    1    1
[5,]    0    1    1    1    0    1
[6,]    1    0    1    1    1    0
ind
    ind1 ind2
1     2    1
2     3    2
3     4    1
4     4    2
5     5    2
6     5    3
7     5    4
8     6    1
9     6    3
10    6    4
11    6    5

This looks right.

I'm not a Matlab user so I can't check what Matlab would give, but I'm 
pretty sure the results would be the same in this toy example where 
there are no collinear triples.

cheers,

Rolf Turner

On 21/06/14 03:17, Raphael P?bst wrote:
> Hello again,
> After playing around with my current problem for some time, I have
> once again returned to Delaunay Graphs and after banging my head
> against the problem for some time I fear that I can't see the issue
> clearly anymore and want to ask for some outside comments, to maybe
> shake my thoughts loose again.
>
> So, let me explain my project and then my problem:
>   I have a set of points, given as x- and y-coordinates and want to
> create the adjacency matrix of the corresponding Delaunay Graph. I
> have already removed duplicates in my set of points and to calculate
> the matrix, I have hit upon the following procedure, which might not
> be the most efficient, but I'm aiming for correct results and
> simplicty first, before I can think about efficiency.
>
> # x a vector of length n, containing the x-coordinates of my n points
> #y: the same for the y-coordinates
> library(deldir)
> del <- deldir(x, y) # calculating the tesselation
> dels <- del$delsgs[,5:6] # giving me a data.frame with 2 columns,
> containing the indices of points connected by an edge in the Delaunay
> Graph
>
> adj <- matrix(0, length(x), length(y)) # creating the empty adjacency matrix
>
> for (i in 1:nrow(dels)){ # going through the rows of dels
> adj[dels[i,1], dels[i,2]] <- 1; # since the points in a row of dels
> are connected, the matrix at that point is set to 1
> adj[dels[i,2], dels[i,1]] <- 1; # and this makes it symmetric
> }
>
> Now as I see it this should give me the adjacency matrix, right?
>
> So let's come to my problem: The program I'm writing is a translation
> of some Matlab-Code and so the results of both versions should be the
> same, if at all possible. My adjacency matrix created in the above
> mentioned manner however is not the same as the one created with
> Matlab. The Matlab-Version uses algorithms based on Qhull, while I use
> deldir as a library, could this account for the difference or have I
> fundamentally misunderstood some part of the whole plan?
>
> I hope the information is helpful and would very much appreciate any
> pointers and thoughts on the matter.


From dwinsemius at comcast.net  Sat Jun 21 01:49:37 2014
From: dwinsemius at comcast.net (David Winsemius)
Date: Fri, 20 Jun 2014 16:49:37 -0700
Subject: [R] Loops to produce plots and leyend
In-Reply-To: <BLU436-SMTP114810D6DBCCC01069D074DD9120@phx.gbl>
References: <BLU436-SMTP114810D6DBCCC01069D074DD9120@phx.gbl>
Message-ID: <3CC5F02F-D61D-4B64-8C6A-E52D4DAB340A@comcast.net>


On Jun 20, 2014, at 9:18 AM, Bea GD wrote:

> I've tried several things but I don't manage to get this plot right. Any help greatly appreciated!
> I'm running a for loop to produce 4 plots at once. Each plot should only show data points for a specific group (i.e. 4 plots for groups 1 to 4). The coordinates of the points should be petal length and width. The colour of these points should codify the species variable. Finally I'd like to show a legend for the colours on these plots. It's important that each species has a unique colour. Thanks you a lot for your input!
> 
>    # Data
>    dd <- iris
> 
>    dd$group <- ifelse(dd$Sepal.Length>=4.3 & dd$Sepal.Length<5.2, 1,
>                         ifelse(dd$Sepal.Length>=5.2 & dd$Sepal.Length<6.1, 2,
>                                ifelse(dd$Sepal.Length>=6.1 & dd$Sepal.Length<7, 3,
>                                       ifelse(dd$Sepal.Length>=7, 4, NA))))
>    dd$group <- as.integer(dd$group)
> 
>    dd$Species <- c(rep("Wild", 12), rep("Pinky", 12), rep("Orangy", 12), rep("Smelly", 12),
>                    rep("Pretty", 12), rep("Blue", 12), rep("Big", 12), rep("Rare", 12),
>                    rep("Toxic", 12), rep("Danger", 12), rep("Abundant", 18), rep("Last", 12))
> 
> 
>    # Code to plot 4 graphs. It doesn't work!
>    pdf("plot_test.pdf", width=10, height=10)
>    par(mfrow=c(2, 2))
>    for(b in unique(dd$group)){
>      idx <- dd$group==b
>      plot(dd$Petal.Length, dd$Petal.Width, ty="n", xlim=range(dd$Petal.Length), ylim=range(dd$Petal.Width))
>      cols <- as.numeric(unique(dd$Species))
>      points(dd$Petal.Length[idx], dd$Petal.Width[idx],
>             col=cols[as.numeric(dd$Species[idx])])
>      legend("right", legend=unique(dd$Species[idx]), pch=1, col=cols[as.numeric(unique(dd$Species[idx]))])
>    }
>    dev.off()

This appears to be a duplicate of http://stackoverflow.com/questions/24333076/for-loop-to-produce-plots-with-legend and is already answered. You are requesten not to corss-post to SO and Rhelp.

> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html


-- 
David Winsemius
Alameda, CA, USA


From zhiqiu.hu at gmail.com  Sat Jun 21 01:58:26 2014
From: zhiqiu.hu at gmail.com (Zhiqiu Hu)
Date: Fri, 20 Jun 2014 17:58:26 -0600
Subject: [R] How to define a "nonlin.function" object for the spherical
 function to be used in the gnm model?
Message-ID: <CAJQNJzdTVXiV3Bxg2KREFRvGEP102U4VWX-U26Xcp_5EAVjMmg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140620/bb9f4e82/attachment.pl>

From dwinsemius at comcast.net  Sat Jun 21 03:31:45 2014
From: dwinsemius at comcast.net (David Winsemius)
Date: Fri, 20 Jun 2014 18:31:45 -0700
Subject: [R] Rstudio: is it possible to create a document out of a
	working script?
In-Reply-To: <CAFnz2--_JSpY7FgydUgLDqqrR5zZGjp85mQ68CLnwQY8d8ZUcQ@mail.gmail.com>
References: <CAFnz2-9qyU6nx_gMvt6a=H6=MDdtZe_dCYtKuSjux=ijX1LCxA@mail.gmail.com>
	<CAN-Z0xVpN_AkNL2ZX-opQczDP34w96H7t0KSEE973y6zmBdZMA@mail.gmail.com>
	<CAFnz2--_JSpY7FgydUgLDqqrR5zZGjp85mQ68CLnwQY8d8ZUcQ@mail.gmail.com>
Message-ID: <DCCDE8FA-BDBC-43F4-9403-0F99408A2ED2@comcast.net>


On Jun 20, 2014, at 2:40 AM, Luca Cerone wrote:

> Hi Berend, sorry if it OT (though I think that the process is pretty
> much Rstudio independent, since what Rstudio does is wrap up knitr and
> their package Rmarkdown,
> but all the process can be run from the shell).
> 
> Bob, so far this is what I do, but it is not ideal for two reasons:
> 1. I would like my report to be a step by step guide of what the
> script does. Wrapping the scripts in small functions, subscripts
> doesn?t help,
> because in the report what you would see is "source("subscript.r"),
> not the content of the subscript.

Have you looked at ?source and considered changing the associated option?

> getOption("verbose")
[1] FALSE

> 
> 2. in a way I would need the exact opposite of what knitr and
> Rmarkdown do (at least by default). I would like to document my script
> in a way that can be run independently of the report and that, when
> neede, could use the comments to generate the report, similarly to how
> roxygen2 works when writing the documentation.
> 
> Thanks a lot for the help,
> apologies again if this is OT (if so please remove the thread and I
> will ask in the the Rstudio support).
> 
> Cheers,
> Luca
> 
> 2014-06-20 11:28 GMT+02:00 Bob O'Hara <rni.boh at gmail.com>:
>> How about simply using source() to call the script? If necessary, wrap bits
>> of the script in functions, so you source a file with lots of functions, and
>> then call the ones you need, as you need them.
>> 
>> Bob
>> 
>> On 20 June 2014 11:20, Luca Cerone <luca.cerone at gmail.com> wrote:
>>> 
>>> Dear all,
>>> I am very happy with the new features introduced by Rstudio about how
>>> to create documents embedding R code.
>>> 
>>> I would like to know though if there is some way to embed code from a
>>> working script into an Rmd document.
>>> I have several working scripts for which I would like to report the
>>> results, but I would like to avoid
>>> copy and paste the code in the Rmd document: the pipeline is still a
>>> work in progress,
>>> and it is likely that I will end up changing the code and parameters
>>> in the script.
>>> 
>>> As you can imagine, having to copy and paste my code is prone error,
>>> and leads to a lot of code replication.
>>> I would like to avoid this, but couldn?t find a straightforward way so
>>> far.
>>> 
>>> 
>>> Thanks a lot in advance,
>>> of course if you have other advices, or comments on best practices for
>>> this sort of thing,
>>> I would like to hear them from you.
>>> 
>>> Cheers,
>>> Luca
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> 
>> 
>> 
>> 
>> --
>> Bob O'Hara
>> 
>> Biodiversity and Climate Research Centre
>> Senckenberganlage 25
>> D-60325 Frankfurt am Main,
>> Germany
>> 
>> Tel: +49 69 798 40226
>> Mobile: +49 1515 888 5440
>> WWW:   http://www.bik-f.de/root/index.php?page_id=219
>> Blog: http://occamstypewriter.org/boboh/
>> Journal of Negative Results - EEB: www.jnr-eeb.org
> 
> 
> 
> -- 
> Luca Cerone
> 
> Tel: +34 692 06 71 28
> Skype: luca.cerone
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

David Winsemius
Alameda, CA, USA


From orvaquim at gmail.com  Sat Jun 21 07:36:27 2014
From: orvaquim at gmail.com (Orvalho Augusto)
Date: Sat, 21 Jun 2014 07:36:27 +0200
Subject: [R] Principal component analysis with EQUAMAX rotation
In-Reply-To: <FE0C2577-1B19-4E34-86BB-671E67DE9E6D@revelle.net>
References: <1403161657006-4692337.post@n4.nabble.com>
	<FE0C2577-1B19-4E34-86BB-671E67DE9E6D@revelle.net>
Message-ID: <CAF4WX-ca3GS08TEhOa1SzmAh+vOY-Lh23+LiyQTUZ1GRoYtQqw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140621/41f17c5d/attachment.pl>

From luca.cerone at gmail.com  Sat Jun 21 11:05:08 2014
From: luca.cerone at gmail.com (Luca Cerone)
Date: Sat, 21 Jun 2014 11:05:08 +0200
Subject: [R] Rstudio: is it possible to create a document out of a
	working script?
In-Reply-To: <DCCDE8FA-BDBC-43F4-9403-0F99408A2ED2@comcast.net>
References: <CAFnz2-9qyU6nx_gMvt6a=H6=MDdtZe_dCYtKuSjux=ijX1LCxA@mail.gmail.com>
	<CAN-Z0xVpN_AkNL2ZX-opQczDP34w96H7t0KSEE973y6zmBdZMA@mail.gmail.com>
	<CAFnz2--_JSpY7FgydUgLDqqrR5zZGjp85mQ68CLnwQY8d8ZUcQ@mail.gmail.com>
	<DCCDE8FA-BDBC-43F4-9403-0F99408A2ED2@comcast.net>
Message-ID: <CAFnz2--r+2jwg6UVeWuAb8+2LvH3EUujN5ET0c30GCOb1tGSaA@mail.gmail.com>

Dear all thank you very much for all the advices and help :)
I think that Rstudio formats do what I need!



2014-06-21 3:31 GMT+02:00 David Winsemius <dwinsemius at comcast.net>:
>
> On Jun 20, 2014, at 2:40 AM, Luca Cerone wrote:
>
>> Hi Berend, sorry if it OT (though I think that the process is pretty
>> much Rstudio independent, since what Rstudio does is wrap up knitr and
>> their package Rmarkdown,
>> but all the process can be run from the shell).
>>
>> Bob, so far this is what I do, but it is not ideal for two reasons:
>> 1. I would like my report to be a step by step guide of what the
>> script does. Wrapping the scripts in small functions, subscripts
>> doesn?t help,
>> because in the report what you would see is "source("subscript.r"),
>> not the content of the subscript.
>
> Have you looked at ?source and considered changing the associated option?
>
>> getOption("verbose")
> [1] FALSE
>
>>
>> 2. in a way I would need the exact opposite of what knitr and
>> Rmarkdown do (at least by default). I would like to document my script
>> in a way that can be run independently of the report and that, when
>> neede, could use the comments to generate the report, similarly to how
>> roxygen2 works when writing the documentation.
>>
>> Thanks a lot for the help,
>> apologies again if this is OT (if so please remove the thread and I
>> will ask in the the Rstudio support).
>>
>> Cheers,
>> Luca
>>
>> 2014-06-20 11:28 GMT+02:00 Bob O'Hara <rni.boh at gmail.com>:
>>> How about simply using source() to call the script? If necessary, wrap bits
>>> of the script in functions, so you source a file with lots of functions, and
>>> then call the ones you need, as you need them.
>>>
>>> Bob
>>>
>>> On 20 June 2014 11:20, Luca Cerone <luca.cerone at gmail.com> wrote:
>>>>
>>>> Dear all,
>>>> I am very happy with the new features introduced by Rstudio about how
>>>> to create documents embedding R code.
>>>>
>>>> I would like to know though if there is some way to embed code from a
>>>> working script into an Rmd document.
>>>> I have several working scripts for which I would like to report the
>>>> results, but I would like to avoid
>>>> copy and paste the code in the Rmd document: the pipeline is still a
>>>> work in progress,
>>>> and it is likely that I will end up changing the code and parameters
>>>> in the script.
>>>>
>>>> As you can imagine, having to copy and paste my code is prone error,
>>>> and leads to a lot of code replication.
>>>> I would like to avoid this, but couldn?t find a straightforward way so
>>>> far.
>>>>
>>>>
>>>> Thanks a lot in advance,
>>>> of course if you have other advices, or comments on best practices for
>>>> this sort of thing,
>>>> I would like to hear them from you.
>>>>
>>>> Cheers,
>>>> Luca
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>>
>>>
>>>
>>> --
>>> Bob O'Hara
>>>
>>> Biodiversity and Climate Research Centre
>>> Senckenberganlage 25
>>> D-60325 Frankfurt am Main,
>>> Germany
>>>
>>> Tel: +49 69 798 40226
>>> Mobile: +49 1515 888 5440
>>> WWW:   http://www.bik-f.de/root/index.php?page_id=219
>>> Blog: http://occamstypewriter.org/boboh/
>>> Journal of Negative Results - EEB: www.jnr-eeb.org
>>
>>
>>
>> --
>> Luca Cerone
>>
>> Tel: +34 692 06 71 28
>> Skype: luca.cerone
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
> David Winsemius
> Alameda, CA, USA
>



-- 
Luca Cerone

Tel: +34 692 06 71 28
Skype: luca.cerone


From jrkrideau at inbox.com  Sat Jun 21 15:14:30 2014
From: jrkrideau at inbox.com (John Kane)
Date: Sat, 21 Jun 2014 05:14:30 -0800
Subject: [R] zuzufarah Help with ggplot 2 error: Aesthetics must either
 be length one, or the same length as the dataProblems
In-Reply-To: <CAMU6xLf0pYBVsSVtf9FFcTX+LaXodPVO5Ok3FX2U_6S2Qgt+rw@mail.gmail.com>
Message-ID: <B26D0898BF4.00000277jrkrideau@inbox.com>

Data?  
 Please have a look at https://github.com/hadley/devtools/wiki/Reproducibility and/or http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example

 I don't see where you are tellling R what data.frame you are using.  
 
p1 <- ggplot(NULL, aes(WUA_discharge,WUA_table)) 
seems to be telling ggplot2 not to use any data.frame and then try to find two variables in NULL 

Also WUA_table  is a data.frame [Do str(WUA_table) to see what I mean].AFAIK you cannot plot a data.frame in ggplot2.  

Since you did not supply the requested data it is difficult to know for sure but it looks to me like you can just work with the original WUA.df.

Here is a quick and dirty example of how to get 'something' that may look a bit like what you want. Note "mydata" is a substitute for your WUA.df. 

library(ggplot2)
library(reshape2)
mydata  <-  data.frame(matrix(1:20, ncol = 5))
names(mydata)  <-  letters[1:5]

mdat  <-  melt(mydata, id = "a")
p1 <- ggplot(mdat, aes(a, value, colour = variable)) +
  geom_line() 



it also appears that you are trying to feed ggplot2 a data.frame (WUA_table) for the y-axis values




 Please have a look at https://github.com/hadley/devtools/wiki/Reproducibility and/or http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example



John Kane
Kingston ON Canada


> -----Original Message-----
> From: zaydfarah at gmail.com
> Sent: Fri, 20 Jun 2014 09:58:56 -0400
> To: r-help at r-project.org
> Subject: [R] zuzufarah Help with ggplot 2 error: Aesthetics must either
> be length one, or the same length as the dataProblems
> 
> WUA_table<-WUA.df[,2:dim(WUA.df)[2]]
> WUA_discharge<-WUA.df[,1]
> colour_scheme<-palette(rainbow(dim(WUA_table)[2]))
> 
> # Main scatterplot
> p1 <- ggplot(NULL, aes(WUA_discharge,WUA_table)) +
>   geom_line() +
>   scale_color_manual(values=colour_scheme)+
>   scale_x_continuous(expand = c(0, 0)) +
>   scale_y_continuous(expand = c(0, 0)) +
>   expand_limits(y = c(min(WUA_table) - .1*diff(range(WUA_table)),
>                       max(WUA_table) + .1*diff(range(WUA_table))))  +
>   expand_limits(x = c(min(WUA_discharge) - .1*diff(range(WUA_discharge)),
>                       max(WUA_discharge) +
> .1*diff(range(WUA_discharge))))
>  +
>   theme(plot.margin= unit(c(0, 0, 0.5, 0.5), "lines"))
> 
> # Get the gtables
> gt1 <- ggplot_gtable(ggplot_build(p1))
> 
> 
> the error message from the following code states:
> Error: Aesthetics must either be length one, or the same length as the
> dataProblems:WUA_table
> 
> the error appears after the line:
> gt1 <- ggplot_gtable(ggplot_build(p1))
> 
> I would appreciate some help on the matter, it seems like a small fix,
> however I am very inexperienced with R!
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

____________________________________________________________
Publish your photos in seconds for FREE
TRY IM TOOLPACK at http://www.imtoolpack.com/default.aspx?rc=if4


From jdnewmil at dcn.davis.CA.us  Sat Jun 21 15:47:56 2014
From: jdnewmil at dcn.davis.CA.us (Jeff Newmiller)
Date: Sat, 21 Jun 2014 06:47:56 -0700
Subject: [R] Rstudio: is it possible to create a document out of
	a	working script?
In-Reply-To: <CAFnz2--r+2jwg6UVeWuAb8+2LvH3EUujN5ET0c30GCOb1tGSaA@mail.gmail.com>
References: <CAFnz2-9qyU6nx_gMvt6a=H6=MDdtZe_dCYtKuSjux=ijX1LCxA@mail.gmail.com>
	<CAN-Z0xVpN_AkNL2ZX-opQczDP34w96H7t0KSEE973y6zmBdZMA@mail.gmail.com>
	<CAFnz2--_JSpY7FgydUgLDqqrR5zZGjp85mQ68CLnwQY8d8ZUcQ@mail.gmail.com>
	<DCCDE8FA-BDBC-43F4-9403-0F99408A2ED2@comcast.net>
	<CAFnz2--r+2jwg6UVeWuAb8+2LvH3EUujN5ET0c30GCOb1tGSaA@mail.gmail.com>
Message-ID: <f146b841-f5ad-4d44-8142-4184c4fba9ce@email.android.com>

As much as I admire RStudio for making these documentation formats easy to use, they did not invent any of them. The closest they came to that was hiring Yihui.

Having occupied our time with your questions, it would be polite if you closed the topic by explaining which approach you settled on and why.
---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                      Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
--------------------------------------------------------------------------- 
Sent from my phone. Please excuse my brevity.

On June 21, 2014 2:05:08 AM PDT, Luca Cerone <luca.cerone at gmail.com> wrote:
>Dear all thank you very much for all the advices and help :)
>I think that Rstudio formats do what I need!
>
>
>
>2014-06-21 3:31 GMT+02:00 David Winsemius <dwinsemius at comcast.net>:
>>
>> On Jun 20, 2014, at 2:40 AM, Luca Cerone wrote:
>>
>>> Hi Berend, sorry if it OT (though I think that the process is pretty
>>> much Rstudio independent, since what Rstudio does is wrap up knitr
>and
>>> their package Rmarkdown,
>>> but all the process can be run from the shell).
>>>
>>> Bob, so far this is what I do, but it is not ideal for two reasons:
>>> 1. I would like my report to be a step by step guide of what the
>>> script does. Wrapping the scripts in small functions, subscripts
>>> doesn?t help,
>>> because in the report what you would see is "source("subscript.r"),
>>> not the content of the subscript.
>>
>> Have you looked at ?source and considered changing the associated
>option?
>>
>>> getOption("verbose")
>> [1] FALSE
>>
>>>
>>> 2. in a way I would need the exact opposite of what knitr and
>>> Rmarkdown do (at least by default). I would like to document my
>script
>>> in a way that can be run independently of the report and that, when
>>> neede, could use the comments to generate the report, similarly to
>how
>>> roxygen2 works when writing the documentation.
>>>
>>> Thanks a lot for the help,
>>> apologies again if this is OT (if so please remove the thread and I
>>> will ask in the the Rstudio support).
>>>
>>> Cheers,
>>> Luca
>>>
>>> 2014-06-20 11:28 GMT+02:00 Bob O'Hara <rni.boh at gmail.com>:
>>>> How about simply using source() to call the script? If necessary,
>wrap bits
>>>> of the script in functions, so you source a file with lots of
>functions, and
>>>> then call the ones you need, as you need them.
>>>>
>>>> Bob
>>>>
>>>> On 20 June 2014 11:20, Luca Cerone <luca.cerone at gmail.com> wrote:
>>>>>
>>>>> Dear all,
>>>>> I am very happy with the new features introduced by Rstudio about
>how
>>>>> to create documents embedding R code.
>>>>>
>>>>> I would like to know though if there is some way to embed code
>from a
>>>>> working script into an Rmd document.
>>>>> I have several working scripts for which I would like to report
>the
>>>>> results, but I would like to avoid
>>>>> copy and paste the code in the Rmd document: the pipeline is still
>a
>>>>> work in progress,
>>>>> and it is likely that I will end up changing the code and
>parameters
>>>>> in the script.
>>>>>
>>>>> As you can imagine, having to copy and paste my code is prone
>error,
>>>>> and leads to a lot of code replication.
>>>>> I would like to avoid this, but couldn?t find a straightforward
>way so
>>>>> far.
>>>>>
>>>>>
>>>>> Thanks a lot in advance,
>>>>> of course if you have other advices, or comments on best practices
>for
>>>>> this sort of thing,
>>>>> I would like to hear them from you.
>>>>>
>>>>> Cheers,
>>>>> Luca
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide
>>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> Bob O'Hara
>>>>
>>>> Biodiversity and Climate Research Centre
>>>> Senckenberganlage 25
>>>> D-60325 Frankfurt am Main,
>>>> Germany
>>>>
>>>> Tel: +49 69 798 40226
>>>> Mobile: +49 1515 888 5440
>>>> WWW:   http://www.bik-f.de/root/index.php?page_id=219
>>>> Blog: http://occamstypewriter.org/boboh/
>>>> Journal of Negative Results - EEB: www.jnr-eeb.org
>>>
>>>
>>>
>>> --
>>> Luca Cerone
>>>
>>> Tel: +34 692 06 71 28
>>> Skype: luca.cerone
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>> David Winsemius
>> Alameda, CA, USA
>>
>
>
>
>-- 
>Luca Cerone
>
>Tel: +34 692 06 71 28
>Skype: luca.cerone
>
>______________________________________________
>R-help at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From lists at revelle.net  Sat Jun 21 16:33:44 2014
From: lists at revelle.net (William Revelle)
Date: Sat, 21 Jun 2014 09:33:44 -0500
Subject: [R] Principal component analysis with EQUAMAX rotation
In-Reply-To: <CAF4WX-ca3GS08TEhOa1SzmAh+vOY-Lh23+LiyQTUZ1GRoYtQqw@mail.gmail.com>
References: <1403161657006-4692337.post@n4.nabble.com>
	<FE0C2577-1B19-4E34-86BB-671E67DE9E6D@revelle.net>
	<CAF4WX-ca3GS08TEhOa1SzmAh+vOY-Lh23+LiyQTUZ1GRoYtQqw@mail.gmail.com>
Message-ID: <4F9B0264-1DF3-46E7-9929-6662247C814D@revelle.net>

Dear Orvalo Augusto,
  If you are using a PC, you need to get the zip file, not the tar.gz file.

It is at http://personality-project.org/r/src/contrib/  

For Macs it is an ?other repository?  (source option) at http://personality-project.org/r/

Bill






On Jun 21, 2014, at 12:36 AM, Orvalho Augusto <orvaquim at gmail.com> wrote:

> Dear!
> 
> I get this error when I try to install it on my linux PC:
> root at orvaquimcism:~# R CMD INSTALL /mnt/disco/downloads/R/psych_1.4.6.20.tar.gz 
> Error in rawToChar(block[seq_len(ns)]) : 
>   embedded nul in string: '\037\x8b\b\0\0\0\0\0\0\003\xec\xbdk{\xe3?(\x9c\xaf\xc2\xf3\xf0?\xb4\xa9I\x86\x90 \x8a\0uq\xbc\x86\xf3N&\xb1\xd79\xb6ck\xc6\xde=\xab(\xfb@$$\xc1C\0024 at J\x94gy~\xfb[\xb7\xbe\0\004%\xcdxf\xe2d5\x89E\xa0\xd1]}\xab\xae\xae\xaa\xae\xae\x9aU\xb7\xa3\xab\xfd?\xfd\xf9\xc5\xf3'
> 
> My PC is:
> Xubuntu 12.04 64-bit with R version 3.1.0 (2014-04-10).
> 
> Thanks
> Orvalho
> 
> 
> On Fri, Jun 20, 2014 at 6:36 PM, William Revelle <lists at revelle.net> wrote:
> Dear Wagner,
>   I added the equamax rotation option to the psych package in version 1.4.6.  This was requested by Sagnik Chakravarty, with a solution by Gunter Nickel.
> 
> Unfortunately, the version on CRAN  is 1.4.5, but you can get the working prerelease of 1.4.6 (1.4.6.20)  from the alternate repository  http://personality-project.org/r/  (if using a Mac) or  http://personality-project.org/r/src/contrib/   if using a PC.
> 
> Thus,
> 
>  p3e <- principal(Thurstone,3,rotate="equamax")  #will extract the first three components and rotate them using equamax.
>  p3n <- principal(Thurstone,3,rotate="none")   #will give you the unrotated 3 component solution
>  p3v <- principal(Thurstone,3,rotate="varimax") #for the varimax solution
> 
>  factor.congruence(list(p3e,p3n,p3v))  #compares the Burt/Tucker congruence coefficients for these three solutions
> 
> 
> Let me know if this does what you want.
> 
> Bill
> 
> 
> On Jun 19, 2014, at 2:07 AM, Wagner <wagner.fab at gmx.de> wrote:
> 
> > Hello,
> > I need to do a principal component analysis with EQUAMAX-rotation.
> > Unfortunately the function principal() I use normally for PCA does not offer
> > this rotation specification. I could find out that this might be possible
> > somehow with the package GPArotation but until now I could not figure out
> > how to use this in the principal component analysis.
> > Maybe someone can give an example on how to do an equamax-rotation PCA?
> > Or is there a function in another package that offers the use of
> > equamax-rotation directly?
> > Thank you for your help!
> >
> >
> >
> > --
> > View this message in context: http://r.789695.n4.nabble.com/Principal-component-analysis-with-EQUAMAX-rotation-tp4692337.html
> > Sent from the R help mailing list archive at Nabble.com.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
> 
> William Revelle                    http://personality-project.org/revelle.html
> Professor                                  http://personality-project.org
> Department of Psychology   http://www.wcas.northwestern.edu/psych/
> Northwestern University    http://www.northwestern.edu/
> Use R for psychology             http://personality-project.org/r
> It is 5 minutes to midnight        http://www.thebulletin.org
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

William Revelle		           http://personality-project.org/revelle.html
Professor			           http://personality-project.org
Department of Psychology   http://www.wcas.northwestern.edu/psych/
Northwestern University	   http://www.northwestern.edu/
Use R for psychology             http://personality-project.org/r
It is 5 minutes to midnight	   http://www.thebulletin.org


From kate.ignatius at gmail.com  Sat Jun 21 16:57:35 2014
From: kate.ignatius at gmail.com (Kate Ignatius)
Date: Sat, 21 Jun 2014 10:57:35 -0400
Subject: [R] counting the number of rows that satisfy a certain criteria
Message-ID: <CAE6QMsbo-r9zHrXpyHyHbLU9rzvHs5jm+4sCjp6pB9ex=hsEPw@mail.gmail.com>

I have 4 columns, and about 300K plus rows with 0s and 1s.

I'm trying to count how many rows satisfy a certain criteria... for
instance, how many rows are there that have the first column == 1 as
well as the second column == 1.

I've tried using rowSums and colSums but it keeps giving me this type of error:

Error in rowSums(X[1] == 1 & X[2] == 1) :
  'x' must be an array of at least two dimensions

Thanks in advance!


From jorgeivanvelez at gmail.com  Sat Jun 21 17:05:40 2014
From: jorgeivanvelez at gmail.com (Jorge I Velez)
Date: Sun, 22 Jun 2014 01:05:40 +1000
Subject: [R] counting the number of rows that satisfy a certain criteria
In-Reply-To: <CAE6QMsbo-r9zHrXpyHyHbLU9rzvHs5jm+4sCjp6pB9ex=hsEPw@mail.gmail.com>
References: <CAE6QMsbo-r9zHrXpyHyHbLU9rzvHs5jm+4sCjp6pB9ex=hsEPw@mail.gmail.com>
Message-ID: <CAKL8G3FpAuK-HHEgHhf=E41co43xUUgM-8gCxHwJonsYELUNrg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140622/63ca0242/attachment.pl>

From deepayan.sarkar at gmail.com  Sat Jun 21 17:35:01 2014
From: deepayan.sarkar at gmail.com (Deepayan Sarkar)
Date: Sat, 21 Jun 2014 21:05:01 +0530
Subject: [R] Trellis devices and pointize
In-Reply-To: <20140612090120.GE4710@slingshot.co.nz>
References: <20140609065424.GD4710@slingshot.co.nz>
	<5395634F.9080105@stats.ox.ac.uk>
	<20140612090120.GE4710@slingshot.co.nz>
Message-ID: <CADfFDC7XQR7ge5oLxC7wpeABbsDPuLS3f0Yho8f=PPxGfmj3AQ@mail.gmail.com>

On Thu, Jun 12, 2014 at 2:31 PM, Patrick Connolly
<p_connolly at slingshot.co.nz> wrote:
> On Mon, 09-Jun-2014 at 08:33AM +0100, Prof Brian Ripley wrote:
>
> |> The issue here is not trellis.device.
> |>
> |> You are using lattice plots (without mentioning lattice), which are
> |> based on package 'grid' and so using the grid sub-system of a
> |> device. That sub-system does not use the 'pointsize' of the device
> |> as its initial font size.  So you need to use
> |>
> |> grid::gpar(fontsize = 28)
> |>
> |> If I call that after opening the device I get what I guess you expected.
>
> I don't see it making any difference at all.  At one time I supposed that some clever inner
> workings rescaled everything to something more sensible for a plotting
> region that size, but that is not the case.
>
>>   trellis.device(device = pdf, file = "Singers.pdf", height = 160/25.4,
> +                  width = 160/25.4)
>
>> grid::get.gpar()$fontsize
> [1] 12
>> grid::gpar(fontsize = 8)
> $fontsize
> [1] 8
>
>> grid::get.gpar()$fontsize
> [1] 12
>>
>
> Evidently I missed something somewhere.  Grid graphics is sometimes a
> bit too subtle for me.  I know gpar() doesn't work exactly analogously
> to the way par() works.  I can't find any examples in Paul's "R
> Graphics" book or Deepayan's "Lattice" book (but that might just be
> lack of searching skills).
>
> Then I tried putting it in the call to print.trellis:
>
>   print(pik, plot.args = grid::gpar(fontsize = 8))
>
> and in the bwplot() call similar to the way I'd done in panel functions
> with an argument called gp but I get no error message or any
> difference in my resulting plot.
>
> I know I can fiddle with trellis.par.get() and trellis.par.set() but
> that's a bit long-winded when it's so simple to do in base graphics.

Unfortunately that's what you will need to do. The font sizes for text
and points are taken from

> trellis.par.get("fontsize")
$points
[1] 8

$text
[1] 12

and these are the hard-coded defaults for all devices.

There was a discussion last year:

https://stat.ethz.ch/pipermail/r-help/2013-June/354749.html

which almost convinced me to effectively change the default to the
device fontsize, but on further thought I changed my mind (and I see
now that I forgot to follow-up on the list to say so). What did change
was that you can now explicitly set

trellis.par.set(fontsize = list(text = NULL))

to make the default come from grid (which in turn takes the default
from the device).

So,

trellis.device(device = pdf, file = "Singers.pdf", height = 160/25.4,
      width = 160/25.4, pointsize = 28)
trellis.par.set(fontsize = list(text = NULL)) # new line
pik <- bwplot(voice.part ~ height, data = singer)# pointsize ignored
print(pik)
dev.off()

should give you what you want. And if you want this to be the default
behaviour, set

lattice.options(default.theme = list(fontsize = list(text = NULL)))

in your .Rprofile.

-Deepayan


> TA
>
> |>
> |>
> |> On 09/06/2014 07:54, Patrick Connolly wrote:
> |> >How is the pointsize set in trellis.devices?
> |> >
> |> >>From my reading of the trellis.device help file, I understood that the
> |> >pointsize arg would be referenced to the call to the pdf function.
> |> >
> |> >So I set up a trellis pdf device as so:
> |> >
> |> >   trellis.device(device = pdf, file = "Singers.pdf", height = 160/25.4,
> |> >                  width = 160/25.4, pointsize = 28)
> |> >
> |> >A base R graphics plot works as I'd expected.
> |> >
> |> >   plot(1:10, 50:59) # silly plot with huge plotting characters and letters
> |> >
> |> >However, pointsize is ignored in trellis plots;
> |> >
> |> >   pik <- bwplot(voice.part ~ height, data = singer)# pointsize ignored
> |> >   print(pik)
> |> >   dev.off()
> |> >
> |> >There are many trellis cex-type settings, but FWIU they're all
> |> >relative to the default size.  My question is: How do I set that
> |> >default?
> |> >
> |> >
> |> >R version 3.0.2 (2013-09-25)
> |> >Platform: i686-pc-linux-gnu (32-bit)
> |> >
> |> >locale:
> |> >  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
> |> >  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
> |> >  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
> |> >  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
> |> >  [9] LC_ADDRESS=C               LC_TELEPHONE=C
> |> >[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
> |> >
> |> >attached base packages:
> |> >[1] grDevices utils     stats     graphics  methods   base
> |> >
> |> >other attached packages:
> |> >[1] RColorBrewer_1.0-5 lattice_0.20-24
> |> >
> |> >loaded via a namespace (and not attached):
> |> >[1] grid_3.0.2  plyr_1.8    tools_3.0.2
> |> >
> |> >I've tried with R-3.1.0 on another machine so I don't think the
> |> >problem is with an old version.
> |> >
> |> >I doubt it has much to do with pdf specifically.  Attempts to use png,
> |> >bitmap, postscript devices all produce equivalent results.
> |> >
> |> >
> |> >
> |> >(Here's all the example code uninterrupted:)
> |> >
> |> >   trellis.device(device = pdf, file = "Singers.pdf", height = 160/25.4,
> |> >                  width = 160/25.4, pointsize = 28)
> |> >   plot(1:10, 50:59) # silly plot with huge plotting characters and letters
> |> >   pik <- bwplot(voice.part ~ height, data = singer)# pointsize ignored
> |> >   print(pik)
> |> >   dev.off()
> |> >
> |> >
> |> >TIA
> |> >
> |> >
> |>
> |>
> |> --
> |> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> |> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> |> University of Oxford,             Tel:  +44 1865 272861 (self)
> |> 1 South Parks Road,                     +44 1865 272866 (PA)
> |> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> --
> ~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.
>    ___    Patrick Connolly
>  {~._.~}                   Great minds discuss ideas
>  _( Y )_                 Average minds discuss events
> (:_~*~_:)                  Small minds discuss people
>  (_)-(_)                              ..... Eleanor Roosevelt
>
> ~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From kate.ignatius at gmail.com  Sat Jun 21 17:34:59 2014
From: kate.ignatius at gmail.com (Kate Ignatius)
Date: Sat, 21 Jun 2014 11:34:59 -0400
Subject: [R] counting the number of rows that satisfy a certain criteria
In-Reply-To: <CAKL8G3FpAuK-HHEgHhf=E41co43xUUgM-8gCxHwJonsYELUNrg@mail.gmail.com>
References: <CAE6QMsbo-r9zHrXpyHyHbLU9rzvHs5jm+4sCjp6pB9ex=hsEPw@mail.gmail.com>
	<CAKL8G3FpAuK-HHEgHhf=E41co43xUUgM-8gCxHwJonsYELUNrg@mail.gmail.com>
Message-ID: <CAE6QMsZ98YV4r7TdRpyhX9yN1iHcyU=R+4ZTgjX3pb=TS3uSDA@mail.gmail.com>

Thanks!

On Sat, Jun 21, 2014 at 11:05 AM, Jorge I Velez
<jorgeivanvelez at gmail.com> wrote:
> Hi Kate,
>
> You could try
>
> sum(X[, 1] == 1 &  X[, 2] == 1)
>
> where X is your data set.
>
> HTH,
> Jorge.-
>
>
>
> On Sun, Jun 22, 2014 at 12:57 AM, Kate Ignatius <kate.ignatius at gmail.com>
> wrote:
>>
>> I have 4 columns, and about 300K plus rows with 0s and 1s.
>>
>> I'm trying to count how many rows satisfy a certain criteria... for
>> instance, how many rows are there that have the first column == 1 as
>> well as the second column == 1.
>>
>> I've tried using rowSums and colSums but it keeps giving me this type of
>> error:
>>
>> Error in rowSums(X[1] == 1 & X[2] == 1) :
>>   'x' must be an array of at least two dimensions
>>
>> Thanks in advance!
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>


From kate.ignatius at gmail.com  Sat Jun 21 17:49:46 2014
From: kate.ignatius at gmail.com (Kate Ignatius)
Date: Sat, 21 Jun 2014 11:49:46 -0400
Subject: [R] Layout of two graphs on a page...
Message-ID: <CAE6QMsYp-HazNzFPKKuYX=_dEoZ1ZzKXPmje_au8_hVphxc9NQ@mail.gmail.com>

I'm trying to have a layout of two graphs on a page... this has worked
before... but I changed up the way I do my venn diagrams so now
instead of the Venn Diagram being at the bottom of the page below the
bar/line graph it takes up the whole page and its overlays the
bar/line graph placed on the top half...

Here is my code:

layout(matrix(c(1,2),2,1,byrow=TRUE),widths=c(1,1),heights=c(2,2))
oldmar <- par("mar")
par(oma=c(0,2,0,2),mar=c(5.1,4.1,4.1,3.1))

my_tcks<-pretty(c(0,max(counts)),6)

b <- barplot(counts,col='purple',axes=F,border=FALSE,cex.names = 0.75,
las=2, ylim=c(0,my_tcks[length(my_tcks)]))
axis(2,at=my_tcks, labels=format(my_tcks, scientific = FALSE),
cex.axis=0.75, las=2)
mtext("",side=2,line=4,cex=1)

par(new=TRUE)
barplot(rep(NA,4),ylim=c(0,(max(ratio)+1)),axes=FALSE)
axis(4, cex.axis=0.75, las=2)
mtext("",side=4,line=2,cex=1)
lines(b, ratio,col="black",lwd=2)

par(mar=oldmar)
par(new=FALSE)

library(VennDiagram)
draw.quad.venn(area1=area1,area2=area2,area3=area3,area4=area4,n12=n12,n13=n13,n14=n14,n23=n23,n24=n24,n34=n34,n123=n123,n124=n124,n134=n134,n234=n234,n1234=n1234,
              category=c(A,B,C,D),fill=c("white","white","white","white"),
              alpha=c(0.2,0.2,0.2,0.2), euler.d=FALSE, scaled=FALSE,
cex=2, cat.cex=1.5, main="")
dev.off()

I've changed around the oma and mar settings so much now that I'm a
tad confused and probably over looking something really obvious.

Thanks in advance...

P.S.  Let me know if more details are required (I can substitute some
numbers here if it helps plot some graphs)


From rapela at ucsd.edu  Sat Jun 21 05:54:38 2014
From: rapela at ucsd.edu (Joaquin Rapela)
Date: Fri, 20 Jun 2014 20:54:38 -0700
Subject: [R] ANOVA for proportions with large mass on an extreme of [0, 1]
Message-ID: <20140621035438.GB12874@sccn.ucsd.edu>


I am trying to perform an ANOVA on a dependent variable that has large mass
on the 1 side of the (0, 1] interval. I decided to use Fractional Regression
Models, as implemented in the package frm. This package seems well-suited for
my problem, but I don't see how to perform model comparisons of nested frm
models. Please, see data and code below.

I would like to do:

anova(model1, model2)

There is a function frm.ptest(model1, model2), but does not work with nested
models.

Are there alternatives to the frm package to perform ANOVAs on proportions
(with large mass on an extreme of [0, 1])?

Is there a way to model repeated measures (as in package lme4) when the dependent variable is a  proportion?

Data and code
-------------

con <- url("http://sccn.ucsd.edu/~rapela/avshift/anovaDataFrame.RData")
myData <- get(load(con))
close(con)

myData <- myData[!is.na(myData$alternationRate),]
y <- myData$alternationRate

library(frm)

model1 <- frm(y=y, x=model.matrix(~modality*condition+clusterID, data=myData)[, -1], linkfrac="logit", linkbin="logit", type="2P", inflation=1)
model2 <- frm(y=y, x=model.matrix(~modality+condition+clusterID, data=myData)[, -1], linkfrac="logit", linkbin="logit", type="2P", inflation=1)

# this works
frm.ptest(model2, model3)

# but this does not
# frm.ptest(model1, model2)
#
# Error in frm.ptest(model1, model2) : 
# object 2 is nested in object 1 - no need to use the P test

Thanks, Joaquin


From richardl at uchicago.edu  Sat Jun 21 17:30:21 2014
From: richardl at uchicago.edu (Richard Lerner)
Date: Sat, 21 Jun 2014 11:30:21 -0400
Subject: [R] Using R Studio Version 0.98.507,
 having trouble with read.table and an Excel CSV file, keep getting '+'
Message-ID: <CAEPc0Xfq=Ey=Ju+Y9oAHL-3AeDbSWRZ0pL=DfitvsbHkxZ=nSA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140621/e08da1de/attachment.pl>

From skfglades at gmail.com  Sat Jun 21 18:09:05 2014
From: skfglades at gmail.com (Steve Friedman)
Date: Sat, 21 Jun 2014 12:09:05 -0400
Subject: [R] Using R Studio Version 0.98.507,
 having trouble with read.table and an Excel CSV file, keep getting '+'
In-Reply-To: <CAEPc0Xfq=Ey=Ju+Y9oAHL-3AeDbSWRZ0pL=DfitvsbHkxZ=nSA@mail.gmail.com>
References: <CAEPc0Xfq=Ey=Ju+Y9oAHL-3AeDbSWRZ0pL=DfitvsbHkxZ=nSA@mail.gmail.com>
Message-ID: <CAHB_=Ud9sS2-zGQi_fv+BwUWd1Se3xYUA_bDb5t0h8s5jm93_Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140621/3657ad71/attachment.pl>

From gunter.berton at gene.com  Sat Jun 21 19:27:27 2014
From: gunter.berton at gene.com (Bert Gunter)
Date: Sat, 21 Jun 2014 10:27:27 -0700
Subject: [R] ANOVA for proportions with large mass on an extreme of [0,
	1]
In-Reply-To: <20140621035438.GB12874@sccn.ucsd.edu>
References: <20140621035438.GB12874@sccn.ucsd.edu>
Message-ID: <CACk-te0XP2UoEnW2peBkMyaTgyjXn+epohyVtoNFWf2Ny2-vYw@mail.gmail.com>

Although your queries certainly intersect R, they are primarily about
statistical modeling, which is OT for this list. Your issues also
appear to be complex. I would therefore suggest that you eschew remote
Internet advice and consult a local statistical expert for help.

Cheers,
Bert

Bert Gunter
Genentech Nonclinical Biostatistics
(650) 467-7374

"Data is not information. Information is not knowledge. And knowledge
is certainly not wisdom."
Clifford Stoll




On Fri, Jun 20, 2014 at 8:54 PM, Joaquin Rapela <rapela at ucsd.edu> wrote:
>
> I am trying to perform an ANOVA on a dependent variable that has large mass
> on the 1 side of the (0, 1] interval. I decided to use Fractional Regression
> Models, as implemented in the package frm. This package seems well-suited for
> my problem, but I don't see how to perform model comparisons of nested frm
> models. Please, see data and code below.
>
> I would like to do:
>
> anova(model1, model2)
>
> There is a function frm.ptest(model1, model2), but does not work with nested
> models.
>
> Are there alternatives to the frm package to perform ANOVAs on proportions
> (with large mass on an extreme of [0, 1])?
>
> Is there a way to model repeated measures (as in package lme4) when the dependent variable is a  proportion?
>
> Data and code
> -------------
>
> con <- url("http://sccn.ucsd.edu/~rapela/avshift/anovaDataFrame.RData")
> myData <- get(load(con))
> close(con)
>
> myData <- myData[!is.na(myData$alternationRate),]
> y <- myData$alternationRate
>
> library(frm)
>
> model1 <- frm(y=y, x=model.matrix(~modality*condition+clusterID, data=myData)[, -1], linkfrac="logit", linkbin="logit", type="2P", inflation=1)
> model2 <- frm(y=y, x=model.matrix(~modality+condition+clusterID, data=myData)[, -1], linkfrac="logit", linkbin="logit", type="2P", inflation=1)
>
> # this works
> frm.ptest(model2, model3)
>
> # but this does not
> # frm.ptest(model1, model2)
> #
> # Error in frm.ptest(model1, model2) :
> # object 2 is nested in object 1 - no need to use the P test
>
> Thanks, Joaquin
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From smartpink111 at yahoo.com  Sat Jun 21 19:12:22 2014
From: smartpink111 at yahoo.com (arun)
Date: Sat, 21 Jun 2014 10:12:22 -0700
Subject: [R] counting the number of rows that satisfy a certain criteria
In-Reply-To: <CAE6QMsbo-r9zHrXpyHyHbLU9rzvHs5jm+4sCjp6pB9ex=hsEPw@mail.gmail.com>
References: <CAE6QMsbo-r9zHrXpyHyHbLU9rzvHs5jm+4sCjp6pB9ex=hsEPw@mail.gmail.com>
Message-ID: <1403370742.39730.YahooMailNeo@web142606.mail.bf1.yahoo.com>

Hi,
Try:
set.seed(42)
?X <- as.data.frame(matrix(sample(0:1, 4*50,replace=TRUE), ncol=4))
?table(X[1:2])[4]
#[1] 15

sum(rowSums(X[1:2])==2)
#[1] 15
A.K.




On Saturday, June 21, 2014 10:59 AM, Kate Ignatius <kate.ignatius at gmail.com> wrote:
I have 4 columns, and about 300K plus rows with 0s and 1s.

I'm trying to count how many rows satisfy a certain criteria... for
instance, how many rows are there that have the first column == 1 as
well as the second column == 1.

I've tried using rowSums and colSums but it keeps giving me this type of error:

Error in rowSums(X[1] == 1 & X[2] == 1) :
? 'x' must be an array of at least two dimensions

Thanks in advance!

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.



From dwinsemius at comcast.net  Sat Jun 21 20:13:32 2014
From: dwinsemius at comcast.net (David Winsemius)
Date: Sat, 21 Jun 2014 11:13:32 -0700
Subject: [R] lattice : superpose symbols with a great many points
In-Reply-To: <53A48F3F.8050405@free.fr>
References: <53A48F3F.8050405@free.fr>
Message-ID: <6911F9DE-485C-4AC3-B13A-41E95E904C53@comcast.net>


On Jun 20, 2014, at 12:45 PM, Laurent Rhelp wrote:

> Hi,
> 
>  I like to use with xyplot (package lattice) the groups argument and superpose.symbol to compare several curves. But, when there are a great many points, the symbols are very close and the graph becomes unreadable. Would there be an argument  or a tip not to draw all the symbols, for example the symbols could be drawn only every x points, x given as an argument ?

If decreasing the size of the points is not effective, then you it may be more informative to use densityplot.
> 

-- 

David Winsemius
Alameda, CA, USA


From dwinsemius at comcast.net  Sat Jun 21 20:20:04 2014
From: dwinsemius at comcast.net (David Winsemius)
Date: Sat, 21 Jun 2014 11:20:04 -0700
Subject: [R] Reading in a csv - 2 different results
In-Reply-To: <1403260952933-4692434.post@n4.nabble.com>
References: <1403260952933-4692434.post@n4.nabble.com>
Message-ID: <FBF96EE9-3CFA-4759-9D08-87F7D93BE30A@comcast.net>


On Jun 20, 2014, at 3:42 AM, svendeswan wrote:

> Hi,
> I am a beginner in R and already read and (thought that I) understood the R
> introduction tutorial. However there is this reading .csv which I cant
> solve. The question is: Why has data in the both cases a different content?
> 
> I have a directory containing one .csv file. 
> 
> Version 1:
> data <- read.csv(<<dir+filename>>)
> 
> Version 2:
> temp <- paste(c("dir/"), list.files("dir"), sep = "?)
# In the line above we see non-matching double quotes. I would have guessed that it would throw an error or simple ask you for more input due to the non matching quotes..
> data <- sapply(temp, read.csv)

If that is not the problem (and I suspect is is a typo, then without knowing he specifics of the differences, I do not see it as answerable in it present form.


> Thanks for the replies and sorry if this question has been posted already
> and I didn't see it,
> Sven 
> 
> p.s.: I am asking this because Version 2 gives me the possibility to read a
> whole directory with .csv files into one list
> 
> --
> View this message in context: http://r.789695.n4.nabble.com/Reading-in-a-csv-2-different-results-tp4692434.html
> Sent from the R help mailing list archive at Nabble.com.
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

David Winsemius
Alameda, CA, USA


From jim at bitwrit.com.au  Sun Jun 22 01:52:58 2014
From: jim at bitwrit.com.au (Jim Lemon)
Date: Sun, 22 Jun 2014 09:52:58 +1000
Subject: [R] Layout of two graphs on a page...
In-Reply-To: <CAE6QMsYp-HazNzFPKKuYX=_dEoZ1ZzKXPmje_au8_hVphxc9NQ@mail.gmail.com>
References: <CAE6QMsYp-HazNzFPKKuYX=_dEoZ1ZzKXPmje_au8_hVphxc9NQ@mail.gmail.com>
Message-ID: <2669379.YFBbZ2dWeB@localhost.localdomain>

On Sat, 21 Jun 2014 11:49:46 AM Kate Ignatius wrote:
> I'm trying to have a layout of two graphs on a page... this has 
worked
> before... but I changed up the way I do my venn diagrams so now
> instead of the Venn Diagram being at the bottom of the page below 
the
> bar/line graph it takes up the whole page and its overlays the
> bar/line graph placed on the top half...
> 
> Here is my code:
> 
> 
layout(matrix(c(1,2),2,1,byrow=TRUE),widths=c(1,1),heights=c(2,2))
> oldmar <- par("mar")
> par(oma=c(0,2,0,2),mar=c(5.1,4.1,4.1,3.1))
> 
> my_tcks<-pretty(c(0,max(counts)),6)
> 
> b <- barplot(counts,col='purple',axes=F,border=FALSE,cex.names 
= 0.75,
> las=2, ylim=c(0,my_tcks[length(my_tcks)]))
> axis(2,at=my_tcks, labels=format(my_tcks, scientific = FALSE),
> cex.axis=0.75, las=2)
> mtext("",side=2,line=4,cex=1)
> 
> par(new=TRUE)
> barplot(rep(NA,4),ylim=c(0,(max(ratio)+1)),axes=FALSE)
> axis(4, cex.axis=0.75, las=2)
> mtext("",side=4,line=2,cex=1)
> lines(b, ratio,col="black",lwd=2)
> 
> par(mar=oldmar)
> par(new=FALSE)
> 
> library(VennDiagram)
> 
draw.quad.venn(area1=area1,area2=area2,area3=area3,area4=area4,n12=n12,n13=n
> 
13,n14=n14,n23=n23,n24=n24,n34=n34,n123=n123,n124=n124,n134=n134,n234=n234,n
> 1234=n1234, 
category=c(A,B,C,D),fill=c("white","white","white","white"),
> alpha=c(0.2,0.2,0.2,0.2), euler.d=FALSE, scaled=FALSE, cex=2, 
cat.cex=1.5,
> main="")
> dev.off()
> 
> I've changed around the oma and mar settings so much now that 
I'm a
> tad confused and probably over looking something really obvious.
> 
Hi Kate,
My guess is that the layout() command and the grid graphics used by 
draw.quad.venn are conflicting. I have an idea that inserting a 
grid.frame into the function may restrict the Venn diagram to a portion 
of the graphics device, but I haven't got the time at the moment to 
work out how to do this and it is an awful hack anyway. 

Jim


From cbbaniya at gmail.com  Sun Jun 22 02:15:19 2014
From: cbbaniya at gmail.com (Chitra Baniya)
Date: Sun, 22 Jun 2014 06:00:19 +0545
Subject: [R]  EOF error reading csv file
Message-ID: <CAGu6_6hfN-L0a1+3t2Rz8Bu-5Knh3r2OzWroBAuWx=PAL+pgJQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140622/fb3a2e8f/attachment.pl>

From jim at bitwrit.com.au  Sun Jun 22 02:35:01 2014
From: jim at bitwrit.com.au (Jim Lemon)
Date: Sun, 22 Jun 2014 10:35:01 +1000
Subject: [R] EOF error reading csv file
In-Reply-To: <CAGu6_6hfN-L0a1+3t2Rz8Bu-5Knh3r2OzWroBAuWx=PAL+pgJQ@mail.gmail.com>
References: <CAGu6_6hfN-L0a1+3t2Rz8Bu-5Knh3r2OzWroBAuWx=PAL+pgJQ@mail.gmail.com>
Message-ID: <3943456.TQ7sMJtQPs@localhost.localdomain>

On Sun, 22 Jun 2014 06:00:19 AM Chitra Baniya wrote:
> Can someone go through the same and suggest what I am missing 
out.
> 
> > cftc = read.table("cftcdata_ncn.csv", sep = ',', header = TRUE, fill =
> 
> TRUE)
> Warning message:
> In scan(file, what, nmax, sep, dec, quote, skip, nlines, na.strings,  :
>   EOF within quoted string
> Hi, I guessed you have also tried with function read.csv instead of
> read.table.

Hi Chitra,
Perhaps you have an isolated single quote somewhere in the file, as in 
the name O'Rourke.

Jim


From rapela at ucsd.edu  Sat Jun 21 21:41:30 2014
From: rapela at ucsd.edu (Joaquin Rapela)
Date: Sat, 21 Jun 2014 12:41:30 -0700
Subject: [R] ANOVA for proportions with large mass on an extreme of [0,
	1]
In-Reply-To: <CACk-te0XP2UoEnW2peBkMyaTgyjXn+epohyVtoNFWf2Ny2-vYw@mail.gmail.com>
References: <20140621035438.GB12874@sccn.ucsd.edu>
	<CACk-te0XP2UoEnW2peBkMyaTgyjXn+epohyVtoNFWf2Ny2-vYw@mail.gmail.com>
Message-ID: <20140621194130.GA25822@sccn.ucsd.edu>

Bert,

My queries are directly related to R: 

1. Can the R package frm can be used to compare nested models. If so, how.

2. Are there alternative R packages to perform ANOVAs on a dependent variable
that is a proportion with significant mass one one extreme?

Also, my statistical problem is well defined (i.e., perform an ANOVA, ideally
considering repeated measures, on a dependent variable that is a proportion),
there is substantial literature addressing this problem (see some old and
newer articles below), and I am just looking for help on R packages
implementing the functionality described in this literature.

I believe my statistical problem is not complex. After all, ANOVAs are one of
the most common types of statistical analysis, and proportions frequently
appear in statistical problems.  

I just wanted to get some feedback from R users with expertise performing
ANOVAs on proportions. I trust that my statistical problem is not rare, that
several R users have worked on this problem, and that I will get very useful
feedback from them. If I get this feedback, it will show that my question is
no OT. Let's see what happens ...

Cordially, Joaquin

Papke, L. and J.M. Wooldridge (1996), "Econometric methods for fractional
response variables with an application to 401(K) plan participation rates",
Journal of Applied Econometrics, 11(6), 619-32.

Ramalho, E.A., J.J.S. Ramalho and J.M.R. Murteira (2011), "Alternative
estimating and testing empirical strategies for fractional regression
models", Journal of Economic Surveys, 25(1), 19-68.

On Sat, Jun 21, 2014 at 10:27:27AM -0700, Bert Gunter wrote:
> Although your queries certainly intersect R, they are primarily about
> statistical modeling, which is OT for this list. Your issues also
> appear to be complex. I would therefore suggest that you eschew remote
> Internet advice and consult a local statistical expert for help.
> 
> Cheers,
> Bert
> 
> Bert Gunter
> Genentech Nonclinical Biostatistics
> (650) 467-7374
> 
> "Data is not information. Information is not knowledge. And knowledge
> is certainly not wisdom."
> Clifford Stoll
> 
> 
> 
> 
> On Fri, Jun 20, 2014 at 8:54 PM, Joaquin Rapela <rapela at ucsd.edu> wrote:
> >
> > I am trying to perform an ANOVA on a dependent variable that has large mass
> > on the 1 side of the (0, 1] interval. I decided to use Fractional Regression
> > Models, as implemented in the package frm. This package seems well-suited for
> > my problem, but I don't see how to perform model comparisons of nested frm
> > models. Please, see data and code below.
> >
> > I would like to do:
> >
> > anova(model1, model2)
> >
> > There is a function frm.ptest(model1, model2), but does not work with nested
> > models.
> >
> > Are there alternatives to the frm package to perform ANOVAs on proportions
> > (with large mass on an extreme of [0, 1])?
> >
> > Is there a way to model repeated measures (as in package lme4) when the dependent variable is a  proportion?
> >
> > Data and code
> > -------------
> >
> > con <- url("http://sccn.ucsd.edu/~rapela/avshift/anovaDataFrame.RData")
> > myData <- get(load(con))
> > close(con)
> >
> > myData <- myData[!is.na(myData$alternationRate),]
> > y <- myData$alternationRate
> >
> > library(frm)
> >
> > model1 <- frm(y=y, x=model.matrix(~modality*condition+clusterID, data=myData)[, -1], linkfrac="logit", linkbin="logit", type="2P", inflation=1)
> > model2 <- frm(y=y, x=model.matrix(~modality+condition+clusterID, data=myData)[, -1], linkfrac="logit", linkbin="logit", type="2P", inflation=1)
> >
> > # this works
> > frm.ptest(model2, model3)
> >
> > # but this does not
> > # frm.ptest(model1, model2)
> > #
> > # Error in frm.ptest(model1, model2) :
> > # object 2 is nested in object 1 - no need to use the P test
> >
> > Thanks, Joaquin
> >
> > ______________________________________________
> > R-help at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.

-- 
Joaquin Rapela, PhD
Swartz Center for Computational Neuroscience
University of California San Diego
9500 Gilman Drive,
San Diego, CA 92093-0559
tel: (858) 822-7547
fax: (858) 822-7556
http://sccn.ucsd.edu/~rapela
----------------------------------


                                   Tak fyr, and ber it in the derkeste hous
                                   Bitwix this and the Mount of Caucasus,
                                   And lat men shette the dores and go thenne,
                                   Yet wol the fyr as faire lye and brenne,
                                   As twenty thousand men mighte it biholde:
                                   His office naturel ay wol it holde,
                                   Up peril of my lyf, til that it dye.

                                                         Geoffrey Chaucer
                                                         The Canterbury Tales


From scdavis6 at gmail.com  Sat Jun 21 22:49:44 2014
From: scdavis6 at gmail.com (Scott Davis)
Date: Sat, 21 Jun 2014 13:49:44 -0700
Subject: [R] Error creating daisy matrix in R cluster package - Cannot
 allocate vector of size 66.0 Gb
Message-ID: <CACjGKHL5P4WGsrmuOyfozjYw=-2bRY7i9GtCE+GgDGLUORoQ4A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140621/a316173c/attachment.pl>

From ragia11 at hotmail.com  Sun Jun 22 06:00:53 2014
From: ragia11 at hotmail.com (Ragia Ibrahim)
Date: Sun, 22 Jun 2014 06:00:53 +0200
Subject: [R] local and global variables
In-Reply-To: <mailman.12.1403258406.2446.r-help@r-project.org>
References: <mailman.12.1403258406.2446.r-help@r-project.org>
Message-ID: <DUB125-W83C4B37151C944A7B13314B31C0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140622/57cd1d12/attachment.pl>

From murdoch.duncan at gmail.com  Sun Jun 22 06:11:01 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sun, 22 Jun 2014 06:11:01 +0200
Subject: [R] local and global variables
In-Reply-To: <DUB125-W83C4B37151C944A7B13314B31C0@phx.gbl>
References: <mailman.12.1403258406.2446.r-help@r-project.org>
	<DUB125-W83C4B37151C944A7B13314B31C0@phx.gbl>
Message-ID: <53A65755.5060905@gmail.com>

On 22/06/2014, 6:00 AM, Ragia Ibrahim wrote:
> Dear group 
> I have some thing like the following code...
> ##start
> my_list (global object)
> 
> function 1
> {
> list1<-mylist
> 
> function2(list1)
> function3(list1)
> function4(list1)
> }
> 
> function2(list1)
> {
> assign values via <<- to the object items
> }
> 
> function3(list1)
> {
> assign values via <<- to the object items
> }
> # end
> 
> 
> why after finishing each function the object variable is NULL..how can i keep its values across functions

The reason is that <<- doesn't do what you think it does.  It is useful
in a very narrow context, but not the way you're using it.  For what
you're doing, you don't need it.  Here's a better way to get what you want:

Change function 1 to look like this:

list1 <- function2(list1)
list1 <- function3(list1)
list1 <- function4(list1)

and change functions 2, 3, 4 to not use <<-, but to return the modified
list, e.g.

function2 <- function(list1) {
 list1 <- ...
 list1
}

Duncan Murdoch


From jdnewmil at dcn.davis.CA.us  Sun Jun 22 06:33:43 2014
From: jdnewmil at dcn.davis.CA.us (Jeff Newmiller)
Date: Sat, 21 Jun 2014 21:33:43 -0700
Subject: [R] local and global variables
In-Reply-To: <DUB125-W83C4B37151C944A7B13314B31C0@phx.gbl>
References: <mailman.12.1403258406.2446.r-help@r-project.org>
	<DUB125-W83C4B37151C944A7B13314B31C0@phx.gbl>
Message-ID: <584c1945-9f5f-46db-a9e1-3cff5e2ea343@email.android.com>

You are not following the Posting Guide. This is a plain text mailing list (HTML does not necessarily show us what you see). Also, you should be providing a reproducible example that we can run to understand what you are actually dealing with.

The only general advice I can give you at this point is that you should avoid using <<- at all. Instead, return results or lists of results from the functions and assign them to global variables where you call the functions.
---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                      Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
--------------------------------------------------------------------------- 
Sent from my phone. Please excuse my brevity.

On June 21, 2014 9:00:53 PM PDT, Ragia Ibrahim <ragia11 at hotmail.com> wrote:
>Dear group 
>I have some thing like the following code...
>##start
>my_list (global object)
>
>function 1
>{
>list1<-mylist
>
>function2(list1)
>function3(list1)
>function4(list1)
>}
>
>function2(list1)
>{
>assign values via <<- to the object items
>}
>
>function3(list1)
>{
>assign values via <<- to the object items
>}
># end
>
>
>why after finishing each function the object variable is NULL..how can
>i keep its values across functions.
>
>Regardes
>RAE
> 		 	   		  
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From gunter.berton at gene.com  Sun Jun 22 08:12:50 2014
From: gunter.berton at gene.com (Bert Gunter)
Date: Sat, 21 Jun 2014 23:12:50 -0700
Subject: [R] local and global variables
In-Reply-To: <584c1945-9f5f-46db-a9e1-3cff5e2ea343@email.android.com>
References: <mailman.12.1403258406.2446.r-help@r-project.org>
	<DUB125-W83C4B37151C944A7B13314B31C0@phx.gbl>
	<584c1945-9f5f-46db-a9e1-3cff5e2ea343@email.android.com>
Message-ID: <CACk-te3Ny+FXyQ5rFcBuipodNGggxOXzca1xvikXCUhXnQyqcQ@mail.gmail.com>

What you want here, of course, is pass by reference. It can be done in
R (via environments), but in general, it violates the functional
programming paradigm that mostly underlies R. So you should heed the
advice given to you by Duncan and Jeff.

Cheers,
Bert



Bert Gunter
Genentech Nonclinical Biostatistics
(650) 467-7374

"Data is not information. Information is not knowledge. And knowledge
is certainly not wisdom."
Clifford Stoll




On Sat, Jun 21, 2014 at 9:33 PM, Jeff Newmiller
<jdnewmil at dcn.davis.ca.us> wrote:
> You are not following the Posting Guide. This is a plain text mailing list (HTML does not necessarily show us what you see). Also, you should be providing a reproducible example that we can run to understand what you are actually dealing with.
>
> The only general advice I can give you at this point is that you should avoid using <<- at all. Instead, return results or lists of results from the functions and assign them to global variables where you call the functions.
> ---------------------------------------------------------------------------
> Jeff Newmiller                        The     .....       .....  Go Live...
> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
>                                       Live:   OO#.. Dead: OO#..  Playing
> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
> /Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
> ---------------------------------------------------------------------------
> Sent from my phone. Please excuse my brevity.
>
> On June 21, 2014 9:00:53 PM PDT, Ragia Ibrahim <ragia11 at hotmail.com> wrote:
>>Dear group
>>I have some thing like the following code...
>>##start
>>my_list (global object)
>>
>>function 1
>>{
>>list1<-mylist
>>
>>function2(list1)
>>function3(list1)
>>function4(list1)
>>}
>>
>>function2(list1)
>>{
>>assign values via <<- to the object items
>>}
>>
>>function3(list1)
>>{
>>assign values via <<- to the object items
>>}
>># end
>>
>>
>>why after finishing each function the object variable is NULL..how can
>>i keep its values across functions.
>>
>>Regardes
>>RAE
>>
>>       [[alternative HTML version deleted]]
>>
>>______________________________________________
>>R-help at r-project.org mailing list
>>https://stat.ethz.ch/mailman/listinfo/r-help
>>PLEASE do read the posting guide
>>http://www.R-project.org/posting-guide.html
>>and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From pdalgd at gmail.com  Sun Jun 22 08:23:28 2014
From: pdalgd at gmail.com (peter dalgaard)
Date: Sun, 22 Jun 2014 08:23:28 +0200
Subject: [R] Reading in a csv - 2 different results
In-Reply-To: <FBF96EE9-3CFA-4759-9D08-87F7D93BE30A@comcast.net>
References: <1403260952933-4692434.post@n4.nabble.com>
	<FBF96EE9-3CFA-4759-9D08-87F7D93BE30A@comcast.net>
Message-ID: <3ED07634-ED43-43EC-8BA6-775C985A5DC2@gmail.com>


On 21 Jun 2014, at 20:20 , David Winsemius <dwinsemius at comcast.net> wrote:

> # In the line above we see non-matching double quotes. I would have guessed that it would throw an error or simple ask you for more input due to the non matching quotes..
>> data <- sapply(temp, read.csv)
> 
> If that is not the problem (and I suspect is is a typo, then without knowing he specifics of the differences, I do not see it as answerable in it present form.

Looks like a solution was found anyway. Just let me add that sapply() will _s_implify the list of results, possibly mangling it in in unspeakable ways, or at the very least waste time trying to do so. As you probably don't need that, use lapply().

-pd

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From luca.cerone at gmail.com  Sun Jun 22 09:27:19 2014
From: luca.cerone at gmail.com (Luca Cerone)
Date: Sun, 22 Jun 2014 09:27:19 +0200
Subject: [R] Rstudio: is it possible to create a document out of a
	working script?
In-Reply-To: <f146b841-f5ad-4d44-8142-4184c4fba9ce@email.android.com>
References: <CAFnz2-9qyU6nx_gMvt6a=H6=MDdtZe_dCYtKuSjux=ijX1LCxA@mail.gmail.com>
	<CAN-Z0xVpN_AkNL2ZX-opQczDP34w96H7t0KSEE973y6zmBdZMA@mail.gmail.com>
	<CAFnz2--_JSpY7FgydUgLDqqrR5zZGjp85mQ68CLnwQY8d8ZUcQ@mail.gmail.com>
	<DCCDE8FA-BDBC-43F4-9403-0F99408A2ED2@comcast.net>
	<CAFnz2--r+2jwg6UVeWuAb8+2LvH3EUujN5ET0c30GCOb1tGSaA@mail.gmail.com>
	<f146b841-f5ad-4d44-8142-4184c4fba9ce@email.android.com>
Message-ID: <CAFnz2-8_WgQV1gq9TAp7xA1j_3JMvn8RJEoELhTJVWM76KktrQ@mail.gmail.com>

Hi Jeff,
so far I have used the knitr purl() function, which extracts all the
code chunks in a single R script.
To achieve exactly what I need, the documentation at rmarkdown.rstudio.com seems
to imply that playing with formats would allow me to get the report
out of an existing
script, but I still haven't tested that.

Hope this helps,
Cheers,
Luca

2014-06-21 15:47 GMT+02:00 Jeff Newmiller <jdnewmil at dcn.davis.ca.us>:
> As much as I admire RStudio for making these documentation formats easy to use, they did not invent any of them. The closest they came to that was hiring Yihui.
>
> Having occupied our time with your questions, it would be polite if you closed the topic by explaining which approach you settled on and why.
> ---------------------------------------------------------------------------
> Jeff Newmiller                        The     .....       .....  Go Live...
> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
>                                       Live:   OO#.. Dead: OO#..  Playing
> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
> /Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
> ---------------------------------------------------------------------------
> Sent from my phone. Please excuse my brevity.
>
> On June 21, 2014 2:05:08 AM PDT, Luca Cerone <luca.cerone at gmail.com> wrote:
>>Dear all thank you very much for all the advices and help :)
>>I think that Rstudio formats do what I need!
>>
>>
>>
>>2014-06-21 3:31 GMT+02:00 David Winsemius <dwinsemius at comcast.net>:
>>>
>>> On Jun 20, 2014, at 2:40 AM, Luca Cerone wrote:
>>>
>>>> Hi Berend, sorry if it OT (though I think that the process is pretty
>>>> much Rstudio independent, since what Rstudio does is wrap up knitr
>>and
>>>> their package Rmarkdown,
>>>> but all the process can be run from the shell).
>>>>
>>>> Bob, so far this is what I do, but it is not ideal for two reasons:
>>>> 1. I would like my report to be a step by step guide of what the
>>>> script does. Wrapping the scripts in small functions, subscripts
>>>> doesn?t help,
>>>> because in the report what you would see is "source("subscript.r"),
>>>> not the content of the subscript.
>>>
>>> Have you looked at ?source and considered changing the associated
>>option?
>>>
>>>> getOption("verbose")
>>> [1] FALSE
>>>
>>>>
>>>> 2. in a way I would need the exact opposite of what knitr and
>>>> Rmarkdown do (at least by default). I would like to document my
>>script
>>>> in a way that can be run independently of the report and that, when
>>>> neede, could use the comments to generate the report, similarly to
>>how
>>>> roxygen2 works when writing the documentation.
>>>>
>>>> Thanks a lot for the help,
>>>> apologies again if this is OT (if so please remove the thread and I
>>>> will ask in the the Rstudio support).
>>>>
>>>> Cheers,
>>>> Luca
>>>>
>>>> 2014-06-20 11:28 GMT+02:00 Bob O'Hara <rni.boh at gmail.com>:
>>>>> How about simply using source() to call the script? If necessary,
>>wrap bits
>>>>> of the script in functions, so you source a file with lots of
>>functions, and
>>>>> then call the ones you need, as you need them.
>>>>>
>>>>> Bob
>>>>>
>>>>> On 20 June 2014 11:20, Luca Cerone <luca.cerone at gmail.com> wrote:
>>>>>>
>>>>>> Dear all,
>>>>>> I am very happy with the new features introduced by Rstudio about
>>how
>>>>>> to create documents embedding R code.
>>>>>>
>>>>>> I would like to know though if there is some way to embed code
>>from a
>>>>>> working script into an Rmd document.
>>>>>> I have several working scripts for which I would like to report
>>the
>>>>>> results, but I would like to avoid
>>>>>> copy and paste the code in the Rmd document: the pipeline is still
>>a
>>>>>> work in progress,
>>>>>> and it is likely that I will end up changing the code and
>>parameters
>>>>>> in the script.
>>>>>>
>>>>>> As you can imagine, having to copy and paste my code is prone
>>error,
>>>>>> and leads to a lot of code replication.
>>>>>> I would like to avoid this, but couldn?t find a straightforward
>>way so
>>>>>> far.
>>>>>>
>>>>>>
>>>>>> Thanks a lot in advance,
>>>>>> of course if you have other advices, or comments on best practices
>>for
>>>>>> this sort of thing,
>>>>>> I would like to hear them from you.
>>>>>>
>>>>>> Cheers,
>>>>>> Luca
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-help at r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>> PLEASE do read the posting guide
>>>>>> http://www.R-project.org/posting-guide.html
>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> --
>>>>> Bob O'Hara
>>>>>
>>>>> Biodiversity and Climate Research Centre
>>>>> Senckenberganlage 25
>>>>> D-60325 Frankfurt am Main,
>>>>> Germany
>>>>>
>>>>> Tel: +49 69 798 40226
>>>>> Mobile: +49 1515 888 5440
>>>>> WWW:   http://www.bik-f.de/root/index.php?page_id=219
>>>>> Blog: http://occamstypewriter.org/boboh/
>>>>> Journal of Negative Results - EEB: www.jnr-eeb.org
>>>>
>>>>
>>>>
>>>> --
>>>> Luca Cerone
>>>>
>>>> Tel: +34 692 06 71 28
>>>> Skype: luca.cerone
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>> David Winsemius
>>> Alameda, CA, USA
>>>
>>
>>
>>
>>--
>>Luca Cerone
>>
>>Tel: +34 692 06 71 28
>>Skype: luca.cerone
>>
>>______________________________________________
>>R-help at r-project.org mailing list
>>https://stat.ethz.ch/mailman/listinfo/r-help
>>PLEASE do read the posting guide
>>http://www.R-project.org/posting-guide.html
>>and provide commented, minimal, self-contained, reproducible code.
>



-- 
Luca Cerone

Tel: +34 692 06 71 28
Skype: luca.cerone


From dulcalma at bigpond.com  Sun Jun 22 10:43:49 2014
From: dulcalma at bigpond.com (Duncan Mackay)
Date: Sun, 22 Jun 2014 18:43:49 +1000
Subject: [R] lattice : superpose symbols with a great many points
In-Reply-To: <53A48F3F.8050405@free.fr>
References: <53A48F3F.8050405@free.fr>
Message-ID: <001201cf8df6$175dacc0$46190640$@bigpond.com>

Hi 

Try 

xyplot(y ~ x,  ... pch = ".", cex = 2)

You may be able to get away with cex = 1 on certain drivers but for most
instances cex = 2 will be the smallest size.

Regards

Duncan

Duncan Mackay
Department of Agronomy and Soil Science
University of New England
Armidale NSW 2351
Email: home: mackay at northnet.com.au


-----Original Message-----
From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On
Behalf Of Laurent Rhelp
Sent: Saturday, 21 June 2014 05:45
To: r-help at stat.math.ethz.ch
Subject: [R] lattice : superpose symbols with a great many points

Hi,

   I like to use with xyplot (package lattice) the groups argument and 
superpose.symbol to compare several curves. But, when there are a great 
many points, the symbols are very close and the graph becomes 
unreadable. Would there be an argument  or a tip not to draw all the 
symbols, for example the symbols could be drawn only every x points, x 
given as an argument ?

Thanks
Best regards
Laurent



---
Ce courrier ?lectronique ne contient aucun virus ou logiciel malveillant
parce que la protection avast! Antivirus est active.

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From dcarlson at tamu.edu  Sun Jun 22 18:29:02 2014
From: dcarlson at tamu.edu (David L Carlson)
Date: Sun, 22 Jun 2014 16:29:02 +0000
Subject: [R] EOF error reading csv file
In-Reply-To: <CAGu6_6hfN-L0a1+3t2Rz8Bu-5Knh3r2OzWroBAuWx=PAL+pgJQ@mail.gmail.com>
References: <CAGu6_6hfN-L0a1+3t2Rz8Bu-5Knh3r2OzWroBAuWx=PAL+pgJQ@mail.gmail.com>
Message-ID: <53BF8FB63FAF2E4A9455EF1EE94DA726F79261@mb02.ads.tamu.edu>

The error message "EOF within quoted string" is telling you have an unbalanced " or ' in the .csv file. 

-------------------------------------
David L Carlson
Department of Anthropology
Texas A&M University
College Station, TX 77840-4352

-----Original Message-----
From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On Behalf Of Chitra Baniya
Sent: Saturday, June 21, 2014 7:15 PM
To: krishna at primps.com.sg; r-help at r-project.org
Subject: [R] EOF error reading csv file

Can someone go through the same and suggest what I am missing out.

> cftc = read.table("cftcdata_ncn.csv", sep = ',', header = TRUE, fill =
TRUE)
Warning message:
In scan(file, what, nmax, sep, dec, quote, skip, nlines, na.strings,  :
  EOF within quoted string
Hi, I guessed you have also tried with function read.csv instead of
read.table.
Thanks








*Chitra Bahadur Baniya, PhDAssociate ProfessorCentral Department of
BotanyTribhuvan UniversityKirtipurKathmandu, Nepal*

	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From LaurentRHelp at free.fr  Sun Jun 22 23:09:42 2014
From: LaurentRHelp at free.fr (Laurent Rhelp)
Date: Sun, 22 Jun 2014 23:09:42 +0200
Subject: [R] lattice : superpose symbols with a great many points
In-Reply-To: <53A49072.9070809@gwdg.de>
References: <53A48F3F.8050405@free.fr> <53A49072.9070809@gwdg.de>
Message-ID: <53A74616.5000604@free.fr>

Le 20/06/2014 21:50, Christoph Scherber a ?crit :
> Dear Laurent
>
> for numeric x variables, you could try jitter:
>
> xyplot(y~jitter(x,0.5))
>
> Cheers
> Christoph
>
>
> Am 20.06.2014 21:45, schrieb Laurent Rhelp:
>> Hi,
>>
>>   I like to use with xyplot (package lattice) the groups argument and 
>> superpose.symbol to compare several curves. But, when there are a 
>> great many points, the symbols are very close and the graph becomes 
>> unreadable. Would there be an argument  or a tip not to draw all the 
>> symbols, for example the symbols could be drawn only every x points, 
>> x given as an argument ?
>>
>> Thanks
>> Best regards
>> Laurent
>>
>>
>>
>> ---
>> Ce courrier ?lectronique ne contient aucun virus ou logiciel 
>> malveillant parce que la protection avast! Antivirus est active.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
It is a very good idea !!! The symbols become readable but it is not an 
actual answer to the issue.

I finally wrote the code below which works but I think there is 
certainly something easier (shorter) !!!

Thanks

--o<----------------------------------------------------------------------------------------->o----
##
## 1. mock data
##
n <- 10000
time <- seq(-10*pi,10*pi,length=n)
essai <- c("essai1","essai2","essai3","essai4","essai5")

ll <- list()
for( i in 1:5){
    ll[[i]] <-data.frame(time=time,
                         value=sin(time+(pi/i)),
                         essai=essai[i])
}
data.sim <- do.call("rbind",ll)
##
## 2. lattice initialisation for the colors and the symbols
##
para.liste <- trellis.par.get()
superpose.symbol <- para.liste$superpose.symbol
superpose.symbol$pch <- seq(1,5)
superpose.symbol$col <- seq(1,5)
##
## 3. lattice code
##
xyplot(value ~ time,
        data=data.sim,
        nr=100,
        groups=essai,

        panel = function(x,y,subscripts,groups,nr,...) {
                        panel.abline(v=0, lty = "dotted", col = "black")
                        groupsnames <- levels(groups)
                        ng <- length(groupsnames)
                        for( i in 1:ng){
                             g <- groupsnames[i]
                             idg <- g == groups[subscripts]
                             superpose.symbol <- 
trellis.par.get("superpose.symbol")
                             ncol <- superpose.symbol$col[i]
                             npch <- superpose.symbol$pch[i]

                             ## we draw only the line
panel.xyplot(x[idg],y[idg],type="l",col=ncol,...)

                             ## and then we draw a symbol every nr points
                             idx <- seq(1,length(x[idg]),by=nr)
                             idy <- seq(1,length(y[idg]),by=nr)
panel.points(x[idg][idx],y[idg][idy],col=ncol,pch=npch)
                         }
             },
        par.settings = list(
             superpose.symbol=superpose.symbol
            )
     )

--o<--------------------------------------------------------------------------------------->o----







---
Ce courrier ?lectronique ne contient aucun virus ou logiciel malveillant parce que la protection avast! Antivirus est active.


From cscherb1 at gwdg.de  Mon Jun 23 00:19:20 2014
From: cscherb1 at gwdg.de (Christoph Scherber)
Date: Mon, 23 Jun 2014 00:19:20 +0200
Subject: [R] lattice : superpose symbols with a great many points
In-Reply-To: <53A74616.5000604@free.fr>
References: <53A48F3F.8050405@free.fr> <53A49072.9070809@gwdg.de>
	<53A74616.5000604@free.fr>
Message-ID: <53A75668.6090500@gwdg.de>

Dear Laurent,

Why not use "type="l""?

xyplot(value ~ time,
        data=data.sim,
        nr=100,
        groups=essai,type="l",auto.key=list(columns=5))


You could also use more/better colours using RColorBrewer and/or 
ColorRamp...

Cheers
Christoph


Am 22.06.2014 23:09, schrieb Laurent Rhelp:
> Le 20/06/2014 21:50, Christoph Scherber a ?crit :
>> Dear Laurent
>>
>> for numeric x variables, you could try jitter:
>>
>> xyplot(y~jitter(x,0.5))
>>
>> Cheers
>> Christoph
>>
>>
>> Am 20.06.2014 21:45, schrieb Laurent Rhelp:
>>> Hi,
>>>
>>>   I like to use with xyplot (package lattice) the groups argument 
>>> and superpose.symbol to compare several curves. But, when there are 
>>> a great many points, the symbols are very close and the graph 
>>> becomes unreadable. Would there be an argument or a tip not to draw 
>>> all the symbols, for example the symbols could be drawn only every x 
>>> points, x given as an argument ?
>>>
>>> Thanks
>>> Best regards
>>> Laurent
>>>
>>>
>>>
>>> ---
>>> Ce courrier ?lectronique ne contient aucun virus ou logiciel 
>>> malveillant parce que la protection avast! Antivirus est active.
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide 
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> It is a very good idea !!! The symbols become readable but it is not 
> an actual answer to the issue.
>
> I finally wrote the code below which works but I think there is 
> certainly something easier (shorter) !!!
>
> Thanks
>
> --o<----------------------------------------------------------------------------------------->o---- 
>
> ##
> ## 1. mock data
> ##
> n <- 10000
> time <- seq(-10*pi,10*pi,length=n)
> essai <- c("essai1","essai2","essai3","essai4","essai5")
>
> ll <- list()
> for( i in 1:5){
>    ll[[i]] <-data.frame(time=time,
>                         value=sin(time+(pi/i)),
>                         essai=essai[i])
> }
> data.sim <- do.call("rbind",ll)
> ##
> ## 2. lattice initialisation for the colors and the symbols
> ##
> para.liste <- trellis.par.get()
> superpose.symbol <- para.liste$superpose.symbol
> superpose.symbol$pch <- seq(1,5)
> superpose.symbol$col <- seq(1,5)
> ##
> ## 3. lattice code
> ##
> xyplot(value ~ time,
>        data=data.sim,
>        nr=100,
>        groups=essai,
>
>        panel = function(x,y,subscripts,groups,nr,...) {
>                        panel.abline(v=0, lty = "dotted", col = "black")
>                        groupsnames <- levels(groups)
>                        ng <- length(groupsnames)
>                        for( i in 1:ng){
>                             g <- groupsnames[i]
>                             idg <- g == groups[subscripts]
>                             superpose.symbol <- 
> trellis.par.get("superpose.symbol")
>                             ncol <- superpose.symbol$col[i]
>                             npch <- superpose.symbol$pch[i]
>
>                             ## we draw only the line
> panel.xyplot(x[idg],y[idg],type="l",col=ncol,...)
>
>                             ## and then we draw a symbol every nr points
>                             idx <- seq(1,length(x[idg]),by=nr)
>                             idy <- seq(1,length(y[idg]),by=nr)
> panel.points(x[idg][idx],y[idg][idy],col=ncol,pch=npch)
>                         }
>             },
>        par.settings = list(
>             superpose.symbol=superpose.symbol
>            )
>     )
>
> --o<--------------------------------------------------------------------------------------->o---- 
>
>
>
>
>
>
>
>
> ---
> Ce courrier ?lectronique ne contient aucun virus ou logiciel 
> malveillant parce que la protection avast! Antivirus est active.
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From krishna at primps.com.sg  Mon Jun 23 03:59:21 2014
From: krishna at primps.com.sg (S N V Krishna)
Date: Mon, 23 Jun 2014 01:59:21 +0000
Subject: [R] EOF error reading csv file
In-Reply-To: <53BF8FB63FAF2E4A9455EF1EE94DA726F79261@mb02.ads.tamu.edu>
References: <CAGu6_6hfN-L0a1+3t2Rz8Bu-5Knh3r2OzWroBAuWx=PAL+pgJQ@mail.gmail.com>
	<53BF8FB63FAF2E4A9455EF1EE94DA726F79261@mb02.ads.tamu.edu>
Message-ID: <4701aa85618440569d9cd09bfef17278@HKXPR03MB295.apcprd03.prod.outlook.com>

Hi All,

Thanks for the suggestions. It is the problem with that particular name which has single ' in it. I renamed and able to load the file.

Best regards,

S.N.V. Krishna

-----Original Message-----
From: David L Carlson [mailto:dcarlson at tamu.edu] 
Sent: Monday, June 23, 2014 12:29 AM
To: Chitra Baniya; S N V Krishna; r-help at r-project.org
Subject: RE: [R] EOF error reading csv file

The error message "EOF within quoted string" is telling you have an unbalanced " or ' in the .csv file. 

-------------------------------------
David L Carlson
Department of Anthropology
Texas A&M University
College Station, TX 77840-4352

-----Original Message-----
From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On Behalf Of Chitra Baniya
Sent: Saturday, June 21, 2014 7:15 PM
To: krishna at primps.com.sg; r-help at r-project.org
Subject: [R] EOF error reading csv file

Can someone go through the same and suggest what I am missing out.

> cftc = read.table("cftcdata_ncn.csv", sep = ',', header = TRUE, fill =
TRUE)
Warning message:
In scan(file, what, nmax, sep, dec, quote, skip, nlines, na.strings,  :
  EOF within quoted string
Hi, I guessed you have also tried with function read.csv instead of read.table.
Thanks








*Chitra Bahadur Baniya, PhDAssociate ProfessorCentral Department of BotanyTribhuvan UniversityKirtipurKathmandu, Nepal*

	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From andreas at maunz.de  Mon Jun 23 07:53:58 2014
From: andreas at maunz.de (Andreas Maunz)
Date: Mon, 23 Jun 2014 07:53:58 +0200
Subject: [R] aov + pairwise.t.test: only selected pairs
In-Reply-To: <AA818EAD2576BC488B4F623941DA7427F3A7730D@inbomail.inbo.be>
References: <CAJHOUEN9ZELcFiVc0fXvgWcuATW-bVRuWQYM4noiKHJz-My5zA@mail.gmail.com>
	<AA818EAD2576BC488B4F623941DA7427F3A7730D@inbomail.inbo.be>
Message-ID: <CAJHOUEO8qimf8ngU8p+oMggw8hjRQRKEXP9wY657bufBcd7oOQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140623/530aec14/attachment.pl>

From jane.wong083 at gmail.com  Mon Jun 23 05:28:57 2014
From: jane.wong083 at gmail.com (wong jane)
Date: Mon, 23 Jun 2014 11:28:57 +0800
Subject: [R] Cox regression model for matched data with replacement
Message-ID: <CACnBwQt9zn1eMyUrcX4O=enoQRCuAT2Y6px2R7a=F28wZf+6RQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140623/5711d9a4/attachment.pl>

From bhu at adobe.com  Mon Jun 23 05:58:55 2014
From: bhu at adobe.com (Bhuvneshwar .)
Date: Mon, 23 Jun 2014 03:58:55 +0000
Subject: [R]  LASSO coefficients for a specific s
Message-ID: <c3b66eb7ff704a32afceed2bd664302b@CO1PR02MB144.namprd02.prod.outlook.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140623/c49832ad/attachment.pl>

From jdnewmil at dcn.davis.ca.us  Mon Jun 23 08:35:53 2014
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Sun, 22 Jun 2014 23:35:53 -0700 (PDT)
Subject: [R] How to process a log file in R ?
In-Reply-To: <CACbhFuUWeLOuMMiLU86tK_uDJ3iVns9SWTDqNTgb4k6nnUYSnA@mail.gmail.com>
References: <CACbhFuVOuD48DDStpND-+iRQSyOotHZuJ++464_Gwv87rVT=mQ@mail.gmail.com>
	<c113f9aa-fcd9-42e9-9fca-d442e7b27ae0@email.android.com>
	<CACbhFuUWeLOuMMiLU86tK_uDJ3iVns9SWTDqNTgb4k6nnUYSnA@mail.gmail.com>
Message-ID: <alpine.BSF.2.00.1406222302480.21114@pedal.dcn.davis.ca.us>

Please always "reply-all" so the list stays in the conversation. With the 
details presented below, this question is a perfect example of why you 
should keep the list in the conversation because I don't know how to solve 
your problem.

Also please read and follow the Posting Guide, which warns you not to post 
in HTML since what you see is not necessarily what we see in that format.

I do know that it is quite common for structured input routines that 
process data such as XML and JSON to look for a single "object" and 
convert it. Normally this is an "outermost layer" of structure that 
encompasses the entire contents of the file.  In your case, the log file 
is an indefinite stream of objects. From what I can see this is not a 
standard use case for most JSON (or XML) libraries.

One solution discussed on StackOverflow [1] is to encode each object 
without internal newlines, and separate the objects by newlines.  This 
would require that you have control over the software that was generating 
this stream of data.

[1] 
http://stackoverflow.com/questions/9829811/how-can-i-parse-the-first-json-object-on-a-stream-in-js

On Mon, 23 Jun 2014, praveen pal wrote:

> hi jeff sorry for my late response
> 
> actually i am trying to parse this log file which i attached in my previous
> mail.
> 
> ?this log contains activity of students like
> ??? how many times they login,
> ??? which page they visit,
> ??? which and how much video they watched,
> ??? which quiz they attempted,
> ??? did they give correct or wrong answer.
> and similar other data and clicks.
> 
> ?i want to extract these data of students from log file? and want to store
> it in a table? (table is not necessary if work is done by R only ).
> ?then i want to perform some statistic on the data extracted from log file.
> 
> I am using jsonlite? to parse it and below is code which i used to parse it
> 
> library(jsonlite)
> tracking_json? <-
> fromJSON("/home/praveen/praveen/Cleaning_Data/tracking.log")
> names(tracking_json)
> tracking_json$username
> 
> this code prints only the first data and ignore everything else.
> 
> then i tried
> 
> path <- "/home/praveen/praveen/Cleaning_Data/tracking.log"
> c <- file(path,"r")
> l <- readLines(c,-1L)
> json? <- lapply(X=l,fromJSON)
> json[[1]]
> 
> it parse and store the data from log file to array
> ?i am able to print data with the? json[[1]]
> but i don't know how to collect whole data related to one factor only
> for example if i want to collect all the related to single student .
> 
> if there is any other way to do this or you have a document or link to parse
> a log file.
> 
> 
> and then i want to perform some statistic
> i am new to R may be there is some mistake in my explanation.
> 
> 
> On Fri, Jun 20, 2014 at 7:23 PM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> wrote:
>       You have not said what your problem is, and you have not shown
>       us the code you have tried. How are we supposed to know what you
>       want?
> ---------------------------------------------------------------------------
>
>       Jeff Newmiller ? ? ? ? ? ? ? ? ? ? ? ?The ? ? ..... ? ? ? .....
>       ?Go Live...
>       DCN:<jdnewmil at dcn.davis.ca.us> ? ? ? ?Basics: ##.#. ? ? ? ##.#.
>       ?Live Go...
>       ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? Live: ? OO#.. Dead: OO#..
>       ?Playing
>       Research Engineer (Solar/Batteries ? ? ? ? ? ?O.O#. ? ? ? #.O#.
>       ?with
>       /Software/Embedded Controllers) ? ? ? ? ? ? ? .OO#. ? ? ? .OO#.
>       ?rocks...1k
> ---------------------------------------------------------------------------
>
>       Sent from my phone. Please excuse my brevity.
>
>       On June 20, 2014 12:26:03 AM PDT, praveen pal
>       <pal.praveen11 at gmail.com> wrote:
>       >Hello
>       >
>       > ? i am new to R and need help,
>       > ? I want to parse a log file using R named tracking.log file.
>       > i try to read it using "jsonlite" package but not able to get
>       data ?in
>       >proper format.
>       >
>       >
>       > ? i entered a sample of file below.
>       > ? i also attached a file tracking.log file with this mail
>       >
>       >
>       > {
>       > ? ?"username": "lavita",
>       > ? ?"host": "10.105.22.32",
>       > ? ?"event_source": "server",
>       > ? ?"event_type":
> >"/courses/IITB/CS101/2014_T1/xblock/i4x:;_;_IITB;_CS101;_video;_d333fa637a
>       074b41996dc2fd5e675818/handler/xmodule_handler/save_user_state",
>       > ? ?"context": {
>       > ? ? ? ?"course_id": "IITB/CS101/2014_T1",
>       > ? ? ? ?"course_user_tags": {},
>       > ? ? ? ?"user_id": 42,
>       > ? ? ? ?"org_id": "IITB"
>       > ? ?},
>       > ? ?"time": "2014-06-20T05:49:10.468638+00:00",
>       > ? ?"ip": "127.0.0.1",
>       > ? ?"event": "{\"POST\": {\"saved_video_position\":
>       [\"00:02:10\"]},
>       >\"GET\": {}}",
>       >"agent": "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:18.0)
>       Gecko/20100101
>       >Firefox/18.0",
>       > ? ?"page": null
>       >}
>       >
>       >{
>       > ? ?"username": "raeha",
>       > ? ?"host": "10.105.22.32",
>       > ? ?"event_source": "server",
>       > ? ?"event_type": "problem_check",
>       > ? ?"context": {
>       > ? ? ? ?"course_id": "IITB/CS101/2014_T1",
>       > ? ? ? ?"course_user_tags": {},
>       > ? ? ? ?"user_id": 40,
>       > ? ? ? ?"org_id": "IITB",
>       > ? ? ? ?"module": {
>       > ? ? ? ? ? ?"display_name": ""
>       > ? ? ? ?}
>       > ? ?},
>       > ? ?"time": "2014-06-20T06:43:52.716455+00:00",
>       > ? ?"ip": "127.0.0.1",
>       > ? ?"event": {
>       > ? ? ? ?"submission": {
>       > ? ? ?
>       "i4x-IITB-CS101-problem-33e4aac93dc84f368c93b1d08fa984fc_2_1": {
>       > ? ? ? ? ? ? ? ?"input_type": "choicegroup",
>       > ? ? ? ? ? ? ? ?"question": "",
>       > ? ? ? ? ? ? ? ?"response_type": "multiplechoiceresponse",
>       > ? ? ? ? ? ? ? ?"answer": "MenuInflater.inflate()",
>       > ? ? ? ? ? ? ? ?"variant": "",
>       > ? ? ? ? ? ? ? ?"correct": true
>       > ? ? ? ? ? ?}
>       > ? ? ? ?},
>       > ? ? ? ?"success": "correct",
>       > ? ? ? ?"grade": 1,
>       > ? ? ? ?"correct_map": {
>       > ? ? ?
>       "i4x-IITB-CS101-problem-33e4aac93dc84f368c93b1d08fa984fc_2_1": {
>       > ? ? ? ? ? ? ? ?"hint": "",
>       > ? ? ? ? ? ? ? ?"hintmode": null,
>       > ? ? ? ? ? ? ? ?"correctness": "correct",
>       > ? ? ? ? ? ? ? ?"npoints": null,
>       > ? ? ? ? ? ? ? ?"msg": "",
>       > ? ? ? ? ? ? ? ?"queuestate": null
>       > ? ? ? ? ? ?}
>       > ? ? ? ?},
>       > ? ? ? ?"state": {
>       > ? ? ? ? ? ?"student_answers": {},
>       > ? ? ? ? ? ?"seed": 1,
>       > ? ? ? ? ? ?"done": null,
>       > ? ? ? ? ? ?"correct_map": {},
>       > ? ? ? ? ? ?"input_state": {
>       >
>       >"i4x-IITB-CS101-problem-33e4aac93dc84f368c93b1d08fa984fc_2_1":
>       {}
>       > ? ? ? ? ? ?}
>       > ? ? ? ?},
>       > ? ? ? ?"answers": {
>       > ? ? ? ?
>       "i4x-IITB-CS101-problem-33e4aac93dc84f368c93b1d08fa984fc_2_1":
>       >"choice_0"
>       > ? ? ? ?},
>       > ? ? ? ?"attempts": 1,
>       > ? ? ? ?"max_grade": 1,
>       > ? ? ? ?"problem_id":
>       >"i4x://IITB/CS101/problem/33e4aac93dc84f368c93b1d08fa984fc"
>       > ? ?},
>       >"agent": "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:29.0)
>       Gecko/20100101
>       >Firefox/29.0",
>       > ? ?"page": "x_module"
>       >}
>       >
>       >
>       >{
>       > ? ?"username": "tushars",
>       > ? ?"host": "localhost",
>       > ? ?"event_source": "server",
>       > ? ?"event_type":
> >"/courses/IITB/CS101/2014_T1/instructor_dashboard/api/list_instructor_task
>       s",
>       > ? ?"context": {
>       > ? ? ? ?"course_id": "IITB/CS101/2014_T1",
>       > ? ? ? ?"course_user_tags": {},
>       > ? ? ? ?"user_id": 6,
>       > ? ? ? ?"org_id": "IITB"
>       > ? ?},
>       > ? ?"time": "2014-06-20T05:49:26.780244+00:00",
>       > ? ?"ip": "127.0.0.1",
>       > ? ?"event": "{\"POST\": {}, \"GET\": {}}",
>       >"agent": "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:29.0)
>       Gecko/20100101
>       >Firefox/29.0",
>       > ? ?"page": null
>       >}
> 
> 
> 
> 
> --
> Thank you
> 
> Praveen Pal
> 
>

---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                       Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
---------------------------------------------------------------------------

From may.ka38 at yahoo.de  Mon Jun 23 11:06:29 2014
From: may.ka38 at yahoo.de (Karl May)
Date: Mon, 23 Jun 2014 19:06:29 +1000
Subject: [R] fortran package crashes
Message-ID: <4143675.G7HXkzS4kg@fake>

Hi all,

I have written a small Fortran routine to be attached to R for private use, 
that is reading matrices written to binary files by a Fortran program (I could 
not get "readBin" to read it). Unfortunately, when using the package R crashes 
every now and then, but not always, with a segmentation fault. When restarting 
R, it very often happens that the same read command, parameterised as before, 
is successful. Since the routine compiles without errors when installing it 
into R, I have no idea where to search further for the bug and it would be 
great if you could have a look at the source code below.

Thank you very much.


readfortran <- function(filename,nrows,ncols){
    dat <- matrix(0,ncol=ncols,nrow=nrows)
    ISStat <- c()
    out <- .Fortran("readfortran",
                    csfilename=as.character(filename),
                    ISNCol=as.integer(ncols),
                    ISNRow=as.integer(nrows),
                    RMOut=dat,
                    ISStat=as.integer(ISStat),
                    Package="readfortran")
    return(out)
}

Subroutine readfortran(csfilename,ISNcol,ISNrow,RMOut,ISStat)
  Implicit None
  Integer, Parameter :: IkXL=Selected_Int_Kind(12)
  Integer, Parameter :: IkS=Selected_Int_Kind(2)
  Integer(IkS), Parameter :: RkDbl=Selected_Real_Kind(15,100)
  Character(len=100), intent(inout) :: CSFileName
  Integer(IKXL), intent(inout) ::ISNCol, ISNrow
  Real(rkdbl), Intent(inout), Dimension(ISNRow,ISNCol) :: RMOut
  Character(len=400) :: CSErr
  Integer(ikXL), intent(inout) :: ISStat
  Integer(IkXL) :: c1, c2
  open(unit=200,file=Trim(AdjustL(CSFilename)),status="old",action="&
   &read",form="unformatted",iostat=isstat,iomsg=cserr)
  If(ISSTat==0) Then
    Do c1=1,ISNRow
      read(200,iostat=isstat,iomsg=Cserr) (RMOut(c1,c2),c2=1,ISNCol)
      If(ISStat/=0) Then
        write(*,*) "Reading error"//Trim(AdjustL(CSErr))
        exit
      End If
    End Do
  Else
    write(*,*) "Opening error "//Trim(AdjustL(CSErr))
  End If
  If(ISSTat==0) Then
    write(*,*) "Reading successfull"
  End If
  close(unit=200,status="keep")
End Subroutine readfortran


From ripley at stats.ox.ac.uk  Mon Jun 23 11:35:40 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 23 Jun 2014 10:35:40 +0100
Subject: [R] fortran package crashes
In-Reply-To: <4143675.G7HXkzS4kg@fake>
References: <4143675.G7HXkzS4kg@fake>
Message-ID: <53A7F4EC.9090102@stats.ox.ac.uk>

On 23/06/2014 10:06, Karl May wrote:
> Hi all,
>
> I have written a small Fortran routine to be attached to R for private use,
> that is reading matrices written to binary files by a Fortran program (I could
> not get "readBin" to read it). Unfortunately, when using the package R crashes
> every now and then, but not always, with a segmentation fault. When restarting
> R, it very often happens that the same read command, parameterised as before,
> is successful. Since the routine compiles without errors when installing it
> into R, I have no idea where to search further for the bug and it would be
> great if you could have a look at the source code below.

See the 'Writing R Extensions' manual, 
http://cran.r-project.org/doc/manuals/r-patched/R-exts.html#Debugging

Such things are usually caused by either array overruns or use of 
uninitialized memory.


>
> Thank you very much.
>
>
> readfortran <- function(filename,nrows,ncols){
>      dat <- matrix(0,ncol=ncols,nrow=nrows)
>      ISStat <- c()
>      out <- .Fortran("readfortran",
>                      csfilename=as.character(filename),
>                      ISNCol=as.integer(ncols),
>                      ISNRow=as.integer(nrows),
>                      RMOut=dat,
>                      ISStat=as.integer(ISStat),
>                      Package="readfortran")
>      return(out)
> }
>
> Subroutine readfortran(csfilename,ISNcol,ISNrow,RMOut,ISStat)
>    Implicit None
>    Integer, Parameter :: IkXL=Selected_Int_Kind(12)
>    Integer, Parameter :: IkS=Selected_Int_Kind(2)
>    Integer(IkS), Parameter :: RkDbl=Selected_Real_Kind(15,100)
>    Character(len=100), intent(inout) :: CSFileName
>    Integer(IKXL), intent(inout) ::ISNCol, ISNrow
>    Real(rkdbl), Intent(inout), Dimension(ISNRow,ISNCol) :: RMOut
>    Character(len=400) :: CSErr
>    Integer(ikXL), intent(inout) :: ISStat
>    Integer(IkXL) :: c1, c2
>    open(unit=200,file=Trim(AdjustL(CSFilename)),status="old",action="&
>     &read",form="unformatted",iostat=isstat,iomsg=cserr)
>    If(ISSTat==0) Then
>      Do c1=1,ISNRow
>        read(200,iostat=isstat,iomsg=Cserr) (RMOut(c1,c2),c2=1,ISNCol)
>        If(ISStat/=0) Then
>          write(*,*) "Reading error"//Trim(AdjustL(CSErr))
>          exit
>        End If
>      End Do
>    Else
>      write(*,*) "Opening error "//Trim(AdjustL(CSErr))
>    End If
>    If(ISSTat==0) Then
>      write(*,*) "Reading successfull"
>    End If
>    close(unit=200,status="keep")
> End Subroutine readfortran
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
Please do.  This is not reproducible, you have not told us your platform 
and this is the wrong list ....

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From p_connolly at slingshot.co.nz  Mon Jun 23 11:37:13 2014
From: p_connolly at slingshot.co.nz (Patrick Connolly)
Date: Mon, 23 Jun 2014 21:37:13 +1200
Subject: [R] Fwd;  Trellis devices and pointize
In-Reply-To: <CADfFDC53VMJ-EneSJZ_4DhtwmpBeg1MOwwCc+bpSw=TogJC5cg@mail.gmail.com>
References: <20140621073038.GF4710@slingshot.co.nz>
	<CADfFDC53VMJ-EneSJZ_4DhtwmpBeg1MOwwCc+bpSw=TogJC5cg@mail.gmail.com>
Message-ID: <20140623093713.GG4710@slingshot.co.nz>

Thanks Deepayan,

I'd never have figured that out for myself.


On Sat, 21-Jun-2014 at 08:47PM +0530, Deepayan Sarkar wrote:

|> On Sat, Jun 21, 2014 at 1:00 PM, Patrick Connolly
|> <p_connolly at slingshot.co.nz> wrote:
|> > Hello Deepayan,
|> >
|> > The question below I asked on the Rhelp list.  For the first time in
|> > my experience, what Brian Ripley says seems not to be the case.  No
|> > one else made any comment, hence this direction to the main Lattice
|> > man.
|> >
|> > It might, indeed, be more of a grid issue which you would understand
|> > better than the rest of us.  Please direct me to any documentation
|> > that covers the question.  My searches have been unsuccessful.
|> 
|> Basically, the settings are taken from
|> 
|> > trellis.par.get("fontsize")
|> $text
|> [1] 12
|> 
|> $points
|> [1] 8
|> 
|> I'll give a more detailed response on r-help.
|> 
|> -Deepayan
|> 
|> > Thank you.
|> >
|> >
|> > ----- Forwarded message from Patrick Connolly <p_connolly at slingshot.co.nz> -----
|> >
|> > Date: Thu, 12 Jun 2014 21:01:20 +1200
|> > From: Patrick Connolly <p_connolly at slingshot.co.nz>
|> > To: Prof Brian Ripley <ripley at stats.ox.ac.uk>
|> > Cc: R-help <r-help at r-project.org>
|> > Subject: Re: [R] Trellis devices and pointize
|> > User-Agent: Mutt/1.5.21 (2010-09-15)
|> >
|> > On Mon, 09-Jun-2014 at 08:33AM +0100, Prof Brian Ripley wrote:
|> >
|> > |> The issue here is not trellis.device.
|> > |>
|> > |> You are using lattice plots (without mentioning lattice), which are
|> > |> based on package 'grid' and so using the grid sub-system of a
|> > |> device. That sub-system does not use the 'pointsize' of the device
|> > |> as its initial font size.  So you need to use
|> > |>
|> > |> grid::gpar(fontsize = 28)
|> > |>
|> > |> If I call that after opening the device I get what I guess you expected.
|> >
|> > I don't see it making any difference at all.  At one time I supposed
|> > that some clever inner workings rescaled everything to something more
|> > sensible for a plotting region that size, but that is not the case.
|> >
|> >>   trellis.device(device = pdf, file = "Singers.pdf", height = 160/25.4,
|> > +                  width = 160/25.4)
|> >
|> >> grid::get.gpar()$fontsize
|> > [1] 12
|> >> grid::gpar(fontsize = 8)
|> > $fontsize
|> > [1] 8
|> >
|> >> grid::get.gpar()$fontsize
|> > [1] 12
|> >>
|> >
|> > Evidently I missed something somewhere.  Grid graphics is sometimes a
|> > bit too subtle for me.  I know gpar() doesn't work exactly analogously
|> > to the way par() works.  I can't find any examples in Paul's "R
|> > Graphics" book or Deepayan's "Lattice" book (but that might just be
|> > lack of searching skills).
|> >
|> > Then I tried putting it in the call to print.trellis:
|> >
|> >   print(pik, plot.args = grid::gpar(fontsize = 8))
|> >
|> > and in the bwplot() call similar to the way I'd done in panel functions
|> > with an argument called gp but I get no error message or any
|> > difference in my resulting plot.
|> >
|> > I know I can fiddle with trellis.par.get() and trellis.par.set() but
|> > that's a bit long-winded when it's so simple to do in base graphics.
|> >
|> > TA
|> >
|> > |>
|> > |>
|> > |> On 09/06/2014 07:54, Patrick Connolly wrote:
|> > |> >How is the pointsize set in trellis.devices?
|> > |> >
|> > |> >>From my reading of the trellis.device help file, I understood that the
|> > |> >pointsize arg would be referenced to the call to the pdf function.
|> > |> >
|> > |> >So I set up a trellis pdf device as so:
|> > |> >
|> > |> >   trellis.device(device = pdf, file = "Singers.pdf", height = 160/25.4,
|> > |> >                  width = 160/25.4, pointsize = 28)
|> > |> >
|> > |> >A base R graphics plot works as I'd expected.
|> > |> >
|> > |> >   plot(1:10, 50:59) # silly plot with huge plotting characters and letters
|> > |> >
|> > |> >However, pointsize is ignored in trellis plots;
|> > |> >
|> > |> >   pik <- bwplot(voice.part ~ height, data = singer)# pointsize ignored
|> > |> >   print(pik)
|> > |> >   dev.off()
|> > |> >
|> > |> >There are many trellis cex-type settings, but FWIU they're all
|> > |> >relative to the default size.  My question is: How do I set that
|> > |> >default?
|> > |> >
|> > |> >
|> > |> >R version 3.0.2 (2013-09-25)
|> > |> >Platform: i686-pc-linux-gnu (32-bit)
|> > |> >
|> > |> >locale:
|> > |> >  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
|> > |> >  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
|> > |> >  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
|> > |> >  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
|> > |> >  [9] LC_ADDRESS=C               LC_TELEPHONE=C
|> > |> >[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
|> > |> >
|> > |> >attached base packages:
|> > |> >[1] grDevices utils     stats     graphics  methods   base
|> > |> >
|> > |> >other attached packages:
|> > |> >[1] RColorBrewer_1.0-5 lattice_0.20-24
|> > |> >
|> > |> >loaded via a namespace (and not attached):
|> > |> >[1] grid_3.0.2  plyr_1.8    tools_3.0.2
|> > |> >
|> > |> >I've tried with R-3.1.0 on another machine so I don't think the
|> > |> >problem is with an old version.
|> > |> >
|> > |> >I doubt it has much to do with pdf specifically.  Attempts to use png,
|> > |> >bitmap, postscript devices all produce equivalent results.
|> > |> >
|> > |> >
|> > |> >
|> > |> >(Here's all the example code uninterrupted:)
|> > |> >
|> > |> >   trellis.device(device = pdf, file = "Singers.pdf", height = 160/25.4,
|> > |> >                  width = 160/25.4, pointsize = 28)
|> > |> >   plot(1:10, 50:59) # silly plot with huge plotting characters and letters
|> > |> >   pik <- bwplot(voice.part ~ height, data = singer)# pointsize ignored
|> > |> >   print(pik)
|> > |> >   dev.off()
|> > |> >
|> > |> >
|> > |> >TIA
|> > |> >
|> > |> >
|> > |>
|> > |>
|> > |> --
|> > |> Brian D. Ripley,                  ripley at stats.ox.ac.uk
|> > |> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
|> > |> University of Oxford,             Tel:  +44 1865 272861 (self)
|> > |> 1 South Parks Road,                     +44 1865 272866 (PA)
|> > |> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
|> >
|> > --
|> > ~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.
|> >    ___    Patrick Connolly
|> >  {~._.~}                   Great minds discuss ideas
|> >  _( Y )_                 Average minds discuss events
|> > (:_~*~_:)                  Small minds discuss people
|> >  (_)-(_)                              ..... Eleanor Roosevelt
|> >
|> > ~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.
|> >
|> > ______________________________________________
|> > R-help at r-project.org mailing list
|> > https://stat.ethz.ch/mailman/listinfo/r-help
|> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
|> > and provide commented, minimal, self-contained, reproducible code.
|> >
|> > ----- End forwarded message -----
|> >
|> > --
|> > ~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.
|> >    ___    Patrick Connolly
|> >  {~._.~}                   Great minds discuss ideas
|> >  _( Y )_                 Average minds discuss events
|> > (:_~*~_:)                  Small minds discuss people
|> >  (_)-(_)                              ..... Eleanor Roosevelt
|> >
|> > ~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.
|> >

-- 
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.   
   ___    Patrick Connolly   
 {~._.~}                   Great minds discuss ideas    
 _( Y )_  	         Average minds discuss events 
(:_~*~_:)                  Small minds discuss people  
 (_)-(_)  	                      ..... Eleanor Roosevelt
	  
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.


From therneau at mayo.edu  Mon Jun 23 14:51:41 2014
From: therneau at mayo.edu (Therneau, Terry M., Ph.D.)
Date: Mon, 23 Jun 2014 07:51:41 -0500
Subject: [R] Cox regression model for matched data with replacement
In-Reply-To: <mailman.11.1403517607.6393.r-help@r-project.org>
References: <mailman.11.1403517607.6393.r-help@r-project.org>
Message-ID: <d46aec$hgb0t7@ironport9.mayo.edu>



On 06/23/2014 05:00 AM, r-help-request at r-project.org wrote:
> My problem was how to build a Cox model for the matched data (1:n) with
> replacement. Usually, we can use stratified Cox regression model when the
> data were matched without replacement. However, if the data were matched
> with replacement, due to the re-use of subjects, we should give a weight
> for each pair, then how to incorporate this weight into a Cox model. I also
> checked the "clogit" function in survival package, it seems suitable to the
> logistic model for the matched data with replacement, rather than Cox
> model. Because it sets the time to a constant. Anyone can give me some
> suggestions?

You don't need to worry.  In an ordinary Cox model controls are "reused" at each death 
time; very early on this caused some concern but the theory has been worked out in 
multiple ways.  In your example a random sample is taken from each of the potential 
control sets, which preserves the underlying martingale theory.
   If you are still concerned then add " + cluster(id)" to the model statement to force a 
GEE type variance estimate, where id is a variable that identifies individual subjects.

Terry Therneau


From LaurentRHelp at free.fr  Mon Jun 23 18:35:38 2014
From: LaurentRHelp at free.fr (Laurent Rhelp)
Date: Mon, 23 Jun 2014 18:35:38 +0200
Subject: [R] lattice : superpose symbols with a great many points
In-Reply-To: <CADv2QyF56BWp6aLPu5QBymCZmNSZMr7Bb0DuOEj=Txj0aR0SSQ@mail.gmail.com>
References: <53A48F3F.8050405@free.fr>	<53A49072.9070809@gwdg.de>	<53A74616.5000604@free.fr>
	<CADv2QyF56BWp6aLPu5QBymCZmNSZMr7Bb0DuOEj=Txj0aR0SSQ@mail.gmail.com>
Message-ID: <53A8575A.1030604@free.fr>

Le 23/06/2014 01:03, Dennis Murphy a ?crit :
> Hi:
>
> There are times when lattice is easier than ggplot2 and times when the
> converse is true. This is a case where ggplot2 is easier to code once
> you understand what it is doing. I'm going to try to reproduce your
> lattice graph in ggplot2 as follows:
>
> library(ggplot2)
>
> # Set up the rows of data.sim where points should be plotted
> pidx <- seq(1, nrow(data.sim), by = 100)
>
> # Default appearance, plotting lines and points; the shapes are
> # specified in scale_shape_manual()
> p <- ggplot(data.sim, aes(x = time, y = value, colour = essai, shape = essai)) +
>      geom_vline(xintercept = 0, linetype = "dotted") +
>      geom_line() +
>      geom_point(data = data.sim[pidx, ]) +
>      scale_shape_manual(values = 0:4)
> p      # render it in the graphics window
>
> # Change some background elements to more closely resemble the lattice
> # plot:
> #  * change the colors of ticks and tick labels
> #  * remove grid lines
> #  * put a bounding box on the graphics panel
>
> p + theme_bw() +
>     theme(panel.grid.major = element_blank(),
>           panel.grid.minor = element_blank(),
>           axis.text = element_text(color = "black"),
>           axis.ticks = element_line(color = "black"),
>           panel.border = element_rect(color = "black"))
>
>
>
> After doing this, I realized your lattice code could be simplified
> with the latticeExtra package:
>
> library(latticeExtra)
>
> # Set up the rows of data.sim where points should be plotted
> pidx <- seq(1, nrow(data.sim), by = 100)
>
> # Plot the lines
> p1 <- xyplot(value ~ time, data = data.sim, groups = essai, type = "l",
>               col = 1:5)
>
> # Plot the points - notice the input data frame
> p2 <- xyplot(value ~ time, data = data.sim[pidx, ], groups = essai,
>               type = "p", pch = 1:5, col = 1:5)
>
> # Plot the vertical line
> p3 <- xyplot(value ~ time, data = data.sim,
>               panel = function(x, y, ...)
>                  panel.abline(v = 0, lty = "dotted", col = "black")
>              )
> p1 + p2 + p3
>
> This is a consequence of the layering principles added to latticeExtra
> a while back, which are designed to emulate the layered grammar of
> graphics (ggplot2). Basically, each plot is a different piece, and you
> can see that each trellis object is similar to the plot layers added
> by geom_*() in ggplot2. This works largely because the scaling is the
> same in all three graphs. One advantage of ggplot2 is that it produces
> pretty decent legends by default. You have to work harder to achieve
> that in lattice, particularly when you divide plots into layers like
> this. (I think you'd need to add the same key = ... code to each plot,
> but I didn't try it.) If the legend is irrelevant to you, then this
> should be fine.
>
> HTH,
> Dennis
>
> On Sun, Jun 22, 2014 at 2:09 PM, Laurent Rhelp <LaurentRHelp at free.fr> wrote:
>> Le 20/06/2014 21:50, Christoph Scherber a ?crit :
>>
>>> Dear Laurent
>>>
>>> for numeric x variables, you could try jitter:
>>>
>>> xyplot(y~jitter(x,0.5))
>>>
>>> Cheers
>>> Christoph
>>>
>>>
>>> Am 20.06.2014 21:45, schrieb Laurent Rhelp:
>>>> Hi,
>>>>
>>>>    I like to use with xyplot (package lattice) the groups argument and
>>>> superpose.symbol to compare several curves. But, when there are a great many
>>>> points, the symbols are very close and the graph becomes unreadable. Would
>>>> there be an argument  or a tip not to draw all the symbols, for example the
>>>> symbols could be drawn only every x points, x given as an argument ?
>>>>
>>>> Thanks
>>>> Best regards
>>>> Laurent
>>>>
>>>>
>>>>
>>>> ---
>>>> Ce courrier ?lectronique ne contient aucun virus ou logiciel malveillant
>>>> parce que la protection avast! Antivirus est active.
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>> It is a very good idea !!! The symbols become readable but it is not an
>> actual answer to the issue.
>>
>> I finally wrote the code below which works but I think there is certainly
>> something easier (shorter) !!!
>>
>> Thanks
>>
>> --o<----------------------------------------------------------------------------------------->o----
>> ##
>> ## 1. mock data
>> ##
>> n <- 10000
>> time <- seq(-10*pi,10*pi,length=n)
>> essai <- c("essai1","essai2","essai3","essai4","essai5")
>>
>> ll <- list()
>> for( i in 1:5){
>>     ll[[i]] <-data.frame(time=time,
>>                          value=sin(time+(pi/i)),
>>                          essai=essai[i])
>> }
>> data.sim <- do.call("rbind",ll)
>> ##
>> ## 2. lattice initialisation for the colors and the symbols
>> ##
>> para.liste <- trellis.par.get()
>> superpose.symbol <- para.liste$superpose.symbol
>> superpose.symbol$pch <- seq(1,5)
>> superpose.symbol$col <- seq(1,5)
>> ##
>> ## 3. lattice code
>> ##
>> xyplot(value ~ time,
>>         data=data.sim,
>>         nr=100,
>>         groups=essai,
>>
>>         panel = function(x,y,subscripts,groups,nr,...) {
>>                         panel.abline(v=0, lty = "dotted", col = "black")
>>                         groupsnames <- levels(groups)
>>                         ng <- length(groupsnames)
>>                         for( i in 1:ng){
>>                              g <- groupsnames[i]
>>                              idg <- g == groups[subscripts]
>>                              superpose.symbol <-
>> trellis.par.get("superpose.symbol")
>>                              ncol <- superpose.symbol$col[i]
>>                              npch <- superpose.symbol$pch[i]
>>
>>                              ## we draw only the line
>> panel.xyplot(x[idg],y[idg],type="l",col=ncol,...)
>>
>>                              ## and then we draw a symbol every nr points
>>                              idx <- seq(1,length(x[idg]),by=nr)
>>                              idy <- seq(1,length(y[idg]),by=nr)
>> panel.points(x[idg][idx],y[idg][idy],col=ncol,pch=npch)
>>                          }
>>              },
>>         par.settings = list(
>>              superpose.symbol=superpose.symbol
>>             )
>>      )
>>
>> --o<--------------------------------------------------------------------------------------->o----
>>
>>
>>
>>
>>
>>
>>
>>
>> ---
>> Ce courrier ?lectronique ne contient aucun virus ou logiciel malveillant
>> parce que la protection avast! Antivirus est active.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
very interesting, thank you for these explanations. I didn't know that 
it was possible to add graphs with lattice and I think I will learn 
ggplot ! I will try to add the key on the lattice graph.






---
Ce courrier ?lectronique ne contient aucun virus ou logiciel malveillant parce que la protection avast! Antivirus est active.


From daniel_stahl at operamail.com  Mon Jun 23 19:28:40 2014
From: daniel_stahl at operamail.com (daniel_stahl at operamail.com)
Date: Mon, 23 Jun 2014 10:28:40 -0700 (PDT)
Subject: [R] Help partimat()
In-Reply-To: <5155AFB6.9090603@statistik.tu-dortmund.de>
References: <BB6CB2A7F4526C4EAFCA6B1B9C57F3F219F0DA85CE@ICE-MBX-6.ice.nd.edu>,
	> <4B670290-1930-4010-B585-FF74BACACF61@comcast.net>
	<BB6CB2A7F4526C4EAFCA6B1B9C57F3F219F0DA85CF@ICE-MBX-6.ice.nd.edu>
	<5155AFB6.9090603@statistik.tu-dortmund.de>
Message-ID: <12dec59e-e557-4ed2-8863-6000ce362506@googlegroups.com>

I am  a bit late for this discussion but hope that I might still get an 
answer. I tried to follow your advice and had a look at "drawparti" but 
could not find the relevant section about how to plot specific pairs of 
variables 

I am trying to plot only a few combinations a few several combinations but 
always received an error message: For example here I tried to plot variable 
2 with all other variables (=3 to 10). [,1] is my grouping variable.

 drawparti(mydata[,1] ~ mydata[,2], mydata[,3:10], data = mydata, method = 
"rda", gamma=0,lamda=1)

Error in rda.formula(grouping ~ x + y, data = cbind.data.frame(grouping = 
grouping,  : 
  formal argument "data" matched by multiple actual arguments


Best wishes, Daniel

> 

On Friday, March 29, 2013 3:13:58 PM UTC, Uwe Ligges wrote:
>
>
>
> On 29.03.2013 15:59, Antelmo Aguilar wrote: 
> > Hello David, 
> > 
> > Thank you for letting me know that the partimat() function calls that 
> function.  I am kind of knew to R so I do not know exactly how to describe 
> the structure.  If I understand correctly, what I essentially need to do is 
> pass in all the different data sets into one partimat() function and then 
> the partimat() function will create the different plots and the way the 
> different data sets get passed in is by describing a structure of the 
> different data and passing it into the partimat() function. Is my thinking 
> correct?  Would it also be possible if I could be directed to a website 
> that shows me how to describe a data structure or if someone could be so 
> generous as to tell me how to do this?  I would greatly appreciate it and 
> thank you for the help. 
>
>
> partimat is intended to plot several plots for each combination of 
> explanatory variables in a classification problem. 
>
> If you want to generate such plots separately and/or combine them in 
> another way, see the help page. It says "See Also: for much more fine 
> tuning see drawparti". The latter function allows to generate a single 
> plot that can again be arranged within others by the user. 
>
> Best, 
> Uwe Ligges 
>
>
>
>

From bogaso.christofer at gmail.com  Mon Jun 23 19:42:05 2014
From: bogaso.christofer at gmail.com (Christofer Bogaso)
Date: Mon, 23 Jun 2014 23:27:05 +0545
Subject: [R] Reading CSV file every time when R starts
Message-ID: <CA+dpOJnGLMpDLdw6dQE3VyDV9xpNRQuy0Dut8_D+P42Rg_qNJw@mail.gmail.com>

Hi again,

I am trying to build a procedure such that whenever R starts, it will
read some CSV file.

Therefore I put a code sometime like 'read.csv(...)' in my Rprofile
file. However if I put this function there then I am getting an error
saying 'Error: could not find function "read.csv"', whenever R starts.

So is it the case that, read.csv() function will not work if it put to
run with Rprofile file?

I got similar error with flush.console() function as well.

Can someone tell me how I can achieve that? My goal is to read some
CSV file on startup of R.

Thanks for your pointer.


From 538280 at gmail.com  Mon Jun 23 19:49:01 2014
From: 538280 at gmail.com (Greg Snow)
Date: Mon, 23 Jun 2014 11:49:01 -0600
Subject: [R] Reading CSV file every time when R starts
In-Reply-To: <CA+dpOJnGLMpDLdw6dQE3VyDV9xpNRQuy0Dut8_D+P42Rg_qNJw@mail.gmail.com>
References: <CA+dpOJnGLMpDLdw6dQE3VyDV9xpNRQuy0Dut8_D+P42Rg_qNJw@mail.gmail.com>
Message-ID: <CAFEqCdyRVh-w-hFnoAezLpED1uk1pSOMYSvmMbiOaPuki-9-iw@mail.gmail.com>

The .Rprofile file is processed before all the standard packages are
loaded, that is why you are seeing the error.  If you instead run the
command as utils::read.csv or use library or require to manually load
the utils package before calling read.csv then everything should work
for you.

On Mon, Jun 23, 2014 at 11:42 AM, Christofer Bogaso
<bogaso.christofer at gmail.com> wrote:
> Hi again,
>
> I am trying to build a procedure such that whenever R starts, it will
> read some CSV file.
>
> Therefore I put a code sometime like 'read.csv(...)' in my Rprofile
> file. However if I put this function there then I am getting an error
> saying 'Error: could not find function "read.csv"', whenever R starts.
>
> So is it the case that, read.csv() function will not work if it put to
> run with Rprofile file?
>
> I got similar error with flush.console() function as well.
>
> Can someone tell me how I can achieve that? My goal is to read some
> CSV file on startup of R.
>
> Thanks for your pointer.
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com


From bogaso.christofer at gmail.com  Mon Jun 23 19:51:07 2014
From: bogaso.christofer at gmail.com (Christofer Bogaso)
Date: Mon, 23 Jun 2014 23:36:07 +0545
Subject: [R] Reading CSV file every time when R starts
In-Reply-To: <CAFEqCdyRVh-w-hFnoAezLpED1uk1pSOMYSvmMbiOaPuki-9-iw@mail.gmail.com>
References: <CA+dpOJnGLMpDLdw6dQE3VyDV9xpNRQuy0Dut8_D+P42Rg_qNJw@mail.gmail.com>
	<CAFEqCdyRVh-w-hFnoAezLpED1uk1pSOMYSvmMbiOaPuki-9-iw@mail.gmail.com>
Message-ID: <CA+dpOJkNQGGqsBKU4nEvvFUaYQpinGwoYC85z0pHugmJi_zo9A@mail.gmail.com>

Hi Greg,

Thanks for your prompt reply. I have added 'library(utils)' in my
Rprofile file and now it is working fine.

Thanks and regards,

On Mon, Jun 23, 2014 at 11:34 PM, Greg Snow <538280 at gmail.com> wrote:
> The .Rprofile file is processed before all the standard packages are
> loaded, that is why you are seeing the error.  If you instead run the
> command as utils::read.csv or use library or require to manually load
> the utils package before calling read.csv then everything should work
> for you.
>
> On Mon, Jun 23, 2014 at 11:42 AM, Christofer Bogaso
> <bogaso.christofer at gmail.com> wrote:
>> Hi again,
>>
>> I am trying to build a procedure such that whenever R starts, it will
>> read some CSV file.
>>
>> Therefore I put a code sometime like 'read.csv(...)' in my Rprofile
>> file. However if I put this function there then I am getting an error
>> saying 'Error: could not find function "read.csv"', whenever R starts.
>>
>> So is it the case that, read.csv() function will not work if it put to
>> run with Rprofile file?
>>
>> I got similar error with flush.console() function as well.
>>
>> Can someone tell me how I can achieve that? My goal is to read some
>> CSV file on startup of R.
>>
>> Thanks for your pointer.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>
>
> --
> Gregory (Greg) L. Snow Ph.D.
> 538280 at gmail.com


From raphael.paebst at gmail.com  Mon Jun 23 20:24:19 2014
From: raphael.paebst at gmail.com (=?ISO-8859-1?Q?Raphael_P=E4bst?=)
Date: Mon, 23 Jun 2014 20:24:19 +0200
Subject: [R] Delaunay Graph, once again
In-Reply-To: <53A4C134.2020607@auckland.ac.nz>
References: <CADuMfoFs2zKTXbzfyhD5GHyYaFEJmZOo87fAmBRZoOqDfOGhGA@mail.gmail.com>
	<53A4C134.2020607@auckland.ac.nz>
Message-ID: <CADuMfoEbWkZ5eOAx9fUBUEHc7eofJ0qU9+PShb1sL-i3mRDxXw@mail.gmail.com>

I have the same suspicion, unfortunately I am no Matlab-User either
and only have a adjacency-matrix created by the corresponding matlab
functions to compare with my own output. So, even though I don't see
any use for collinear triples either, is there a way to get them with
deldir as well?

All the best!

Raphael

On 6/21/14, Rolf Turner <r.turner at auckland.ac.nz> wrote:
>
> You are almost surely being bitten by the issue about which you
> previously made inquiries to me, concerning the delaunayn() function
> from the "geometry" package.  (NOTE: ***PACKAGE***!!!  Not "library".  A
> library is a *collection* of packages.) The delaunayn()
> function also uses the qhull algorithm.  By default it treats some
> triples of *collinear* points as triangles.  This is probably causing
> the discrepancy between the results.
>
> Ergo it would seem best to use deldir() unless you *really want*
> collinear triples to be considered as triangles --- and I can't see why
> you would.
>
> Your code for calculating the adjacency list is correct. (Except for the
> fact that you put in unnecessary semi-colons --- this is R, not C ---
> and for the fact that a comment runs over into the next line, causing an
> error to be thrown when one tries to copy and paste your code.)
>
> Try a toy example:
>
> require(deldir)
> set.seed(42)
> x <- runif(6)
> y <- runif(6)
> dxy <- deldir(x,y)
> ind <- dxy$dirsgs[,5:6]
> adj <- matrix(0, length(x), length(y))
> for (i in 1:nrow(ind)){
>     adj[ind[i,1], ind[i,2]] <- 1
>     adj[ind[i,2], ind[i,1]] <- 1
> }
> adj
>       [,1] [,2] [,3] [,4] [,5] [,6]
> [1,]    0    1    0    1    0    1
> [2,]    1    0    1    1    1    0
> [3,]    0    1    0    0    1    1
> [4,]    1    1    0    0    1    1
> [5,]    0    1    1    1    0    1
> [6,]    1    0    1    1    1    0
> ind
>     ind1 ind2
> 1     2    1
> 2     3    2
> 3     4    1
> 4     4    2
> 5     5    2
> 6     5    3
> 7     5    4
> 8     6    1
> 9     6    3
> 10    6    4
> 11    6    5
>
> This looks right.
>
> I'm not a Matlab user so I can't check what Matlab would give, but I'm
> pretty sure the results would be the same in this toy example where
> there are no collinear triples.
>
> cheers,
>
> Rolf Turner
>
> On 21/06/14 03:17, Raphael P?bst wrote:
>> Hello again,
>> After playing around with my current problem for some time, I have
>> once again returned to Delaunay Graphs and after banging my head
>> against the problem for some time I fear that I can't see the issue
>> clearly anymore and want to ask for some outside comments, to maybe
>> shake my thoughts loose again.
>>
>> So, let me explain my project and then my problem:
>>   I have a set of points, given as x- and y-coordinates and want to
>> create the adjacency matrix of the corresponding Delaunay Graph. I
>> have already removed duplicates in my set of points and to calculate
>> the matrix, I have hit upon the following procedure, which might not
>> be the most efficient, but I'm aiming for correct results and
>> simplicty first, before I can think about efficiency.
>>
>> # x a vector of length n, containing the x-coordinates of my n points
>> #y: the same for the y-coordinates
>> library(deldir)
>> del <- deldir(x, y) # calculating the tesselation
>> dels <- del$delsgs[,5:6] # giving me a data.frame with 2 columns,
>> containing the indices of points connected by an edge in the Delaunay
>> Graph
>>
>> adj <- matrix(0, length(x), length(y)) # creating the empty adjacency
>> matrix
>>
>> for (i in 1:nrow(dels)){ # going through the rows of dels
>> adj[dels[i,1], dels[i,2]] <- 1; # since the points in a row of dels
>> are connected, the matrix at that point is set to 1
>> adj[dels[i,2], dels[i,1]] <- 1; # and this makes it symmetric
>> }
>>
>> Now as I see it this should give me the adjacency matrix, right?
>>
>> So let's come to my problem: The program I'm writing is a translation
>> of some Matlab-Code and so the results of both versions should be the
>> same, if at all possible. My adjacency matrix created in the above
>> mentioned manner however is not the same as the one created with
>> Matlab. The Matlab-Version uses algorithms based on Qhull, while I use
>> deldir as a library, could this account for the difference or have I
>> fundamentally misunderstood some part of the whole plan?
>>
>> I hope the information is helpful and would very much appreciate any
>> pointers and thoughts on the matter.
>
>


From macqueen1 at llnl.gov  Mon Jun 23 21:14:18 2014
From: macqueen1 at llnl.gov (MacQueen, Don)
Date: Mon, 23 Jun 2014 19:14:18 +0000
Subject: [R] Reading CSV file every time when R starts
In-Reply-To: <CA+dpOJkNQGGqsBKU4nEvvFUaYQpinGwoYC85z0pHugmJi_zo9A@mail.gmail.com>
References: <CA+dpOJnGLMpDLdw6dQE3VyDV9xpNRQuy0Dut8_D+P42Rg_qNJw@mail.gmail.com>
	<CAFEqCdyRVh-w-hFnoAezLpED1uk1pSOMYSvmMbiOaPuki-9-iw@mail.gmail.com>
	<CA+dpOJkNQGGqsBKU4nEvvFUaYQpinGwoYC85z0pHugmJi_zo9A@mail.gmail.com>
Message-ID: <CFCDC939.FDEB7%macqueen1@llnl.gov>

However, be careful, because .Rprofile runs before any saved .RData file
is loaded. If the object you created in .Rprofile is later saved when you
quit R, then the next time you start R, the saved version will replace the
version created in .Rprofile. (Unless you start R using R --no-restore)
This means that if you create the object in .Rprofile, and then later
change it, then later save it when you quit R, the next time you start R
you will have the modified version, not the original version.

See ?Startup for this information (?Startup also answers your original
question)

-Don

-- 
Don MacQueen

Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062





On 6/23/14 10:51 AM, "Christofer Bogaso" <bogaso.christofer at gmail.com>
wrote:

>Hi Greg,
>
>Thanks for your prompt reply. I have added 'library(utils)' in my
>Rprofile file and now it is working fine.
>
>Thanks and regards,
>
>On Mon, Jun 23, 2014 at 11:34 PM, Greg Snow <538280 at gmail.com> wrote:
>> The .Rprofile file is processed before all the standard packages are
>> loaded, that is why you are seeing the error.  If you instead run the
>> command as utils::read.csv or use library or require to manually load
>> the utils package before calling read.csv then everything should work
>> for you.
>>
>> On Mon, Jun 23, 2014 at 11:42 AM, Christofer Bogaso
>> <bogaso.christofer at gmail.com> wrote:
>>> Hi again,
>>>
>>> I am trying to build a procedure such that whenever R starts, it will
>>> read some CSV file.
>>>
>>> Therefore I put a code sometime like 'read.csv(...)' in my Rprofile
>>> file. However if I put this function there then I am getting an error
>>> saying 'Error: could not find function "read.csv"', whenever R starts.
>>>
>>> So is it the case that, read.csv() function will not work if it put to
>>> run with Rprofile file?
>>>
>>> I got similar error with flush.console() function as well.
>>>
>>> Can someone tell me how I can achieve that? My goal is to read some
>>> CSV file on startup of R.
>>>
>>> Thanks for your pointer.
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>>http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>>
>>
>> --
>> Gregory (Greg) L. Snow Ph.D.
>> 538280 at gmail.com
>
>______________________________________________
>R-help at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From bogaso.christofer at gmail.com  Mon Jun 23 21:41:51 2014
From: bogaso.christofer at gmail.com (Christofer Bogaso)
Date: Tue, 24 Jun 2014 01:26:51 +0545
Subject: [R] Dead link in the help page of as.Date()
Message-ID: <CA+dpOJmYR+uP-Gd69s8sdYhNzgo8vF-gRKR6EU4Snz-h7abb8g@mail.gmail.com>

Hi,

I was reading the help page for as.Date() function for some reason,
and noticed a Matlab link:

http://www.mathworks.com/help/techdoc/matlab_prog/bspgcx2-1.html

It looks like this link is dead. So may be it would be better to put a
correct link or remove this altogether.

Thanks and regards,


From ashwin.ittoo1 at gmail.com  Mon Jun 23 15:11:05 2014
From: ashwin.ittoo1 at gmail.com (ashwin ittoo)
Date: Mon, 23 Jun 2014 15:11:05 +0200
Subject: [R] sparse factor and findAssocs
Message-ID: <CA+1TuBXDh19Cm6tC6CdH9See6MAxLN7DJ2Zr-Xgd5Ew9+QmS_A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140623/56ec691c/attachment.pl>

From ferra.xu at yahoo.com  Mon Jun 23 18:14:23 2014
From: ferra.xu at yahoo.com (Ferra Xu)
Date: Mon, 23 Jun 2014 09:14:23 -0700
Subject: [R] Problem with "nlm" function to minimize the negative log
	likelihood
Message-ID: <1403540063.64234.YahooMailNeo@web125103.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140623/73673579/attachment.pl>

From dan.abner99 at gmail.com  Mon Jun 23 23:11:00 2014
From: dan.abner99 at gmail.com (Dan Abner)
Date: Mon, 23 Jun 2014 17:11:00 -0400
Subject: [R] Custom sampling method in R XXXX
Message-ID: <CAPRGo-n7SevFnN76LvuJ7mtfkFNbPMuCYkc0CcRpqaoRNUtjAQ@mail.gmail.com>

 Hi all,

I have the following situation and a good efficient way to perform
this operation in R has not come to me. Any suggestions/input are
welcome.

I have a user-defined parameter (let's call it x) whose value is
selected from a set of possible values (j). Once the user selects one
of the values of j for x, then I need to map a probability
distribution to the values of j such that the middle probability of
.5385 (see probs below) is associated with the value of x and the tail
probabilities are assigned to the 2 values below x and 2 values above
x in j. Therefore, in the example below:


x<-.250
j<-c(0.000,0.125,0.250,0.375,0.500,0.625,0.750,0.875,1.000)
probs<-c(0.02307692,0.20769231,0.53846154,0.20769231,0.02307692)

probabilities would be assigned to the values of j as such:

value     probability
0            0.023077
0.125     0.207692
0.25       0.538462
0.375     0.207692
0.5         0.023077

And then 1 value of j is selected based on the associated probability.
Any ideas on an efficient way to do this?

An added dimension of complexity is when the value of x is selected
near the parameter boundary of j. If x = 0, then the easiest thing I
can think of is to assign probabilities as:

value      probability
0             0.76923077
0.125      0.207692
0.25        0.023077

However, I am open to other possibilities.

Any assistance is appreciated.

Thanks,

Dan


From 538280 at gmail.com  Mon Jun 23 23:26:17 2014
From: 538280 at gmail.com (Greg Snow)
Date: Mon, 23 Jun 2014 15:26:17 -0600
Subject: [R] Custom sampling method in R XXXX
In-Reply-To: <CAPRGo-n7SevFnN76LvuJ7mtfkFNbPMuCYkc0CcRpqaoRNUtjAQ@mail.gmail.com>
References: <CAPRGo-n7SevFnN76LvuJ7mtfkFNbPMuCYkc0CcRpqaoRNUtjAQ@mail.gmail.com>
Message-ID: <CAFEqCdw_jw8uJf3ydvy=AY03pLEXoK-jWzX4orinThLXhnB-vQ@mail.gmail.com>

The sample function can be used to sample discrete values with
designated probabilities.  I would just construct your list of 5
values based on the selected value (duplicating end values if needed,
so a choice of x=0 would be the vector c(0,0,0, 0.125, 0.25) ), then
sample from this vector with the probabilities that you specify.

On Mon, Jun 23, 2014 at 3:11 PM, Dan Abner <dan.abner99 at gmail.com> wrote:
>  Hi all,
>
> I have the following situation and a good efficient way to perform
> this operation in R has not come to me. Any suggestions/input are
> welcome.
>
> I have a user-defined parameter (let's call it x) whose value is
> selected from a set of possible values (j). Once the user selects one
> of the values of j for x, then I need to map a probability
> distribution to the values of j such that the middle probability of
> .5385 (see probs below) is associated with the value of x and the tail
> probabilities are assigned to the 2 values below x and 2 values above
> x in j. Therefore, in the example below:
>
>
> x<-.250
> j<-c(0.000,0.125,0.250,0.375,0.500,0.625,0.750,0.875,1.000)
> probs<-c(0.02307692,0.20769231,0.53846154,0.20769231,0.02307692)
>
> probabilities would be assigned to the values of j as such:
>
> value     probability
> 0            0.023077
> 0.125     0.207692
> 0.25       0.538462
> 0.375     0.207692
> 0.5         0.023077
>
> And then 1 value of j is selected based on the associated probability.
> Any ideas on an efficient way to do this?
>
> An added dimension of complexity is when the value of x is selected
> near the parameter boundary of j. If x = 0, then the easiest thing I
> can think of is to assign probabilities as:
>
> value      probability
> 0             0.76923077
> 0.125      0.207692
> 0.25        0.023077
>
> However, I am open to other possibilities.
>
> Any assistance is appreciated.
>
> Thanks,
>
> Dan
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com


From sarah.goslee at gmail.com  Mon Jun 23 23:26:36 2014
From: sarah.goslee at gmail.com (Sarah Goslee)
Date: Mon, 23 Jun 2014 17:26:36 -0400
Subject: [R] sparse factor and findAssocs
In-Reply-To: <CA+1TuBXDh19Cm6tC6CdH9See6MAxLN7DJ2Zr-Xgd5Ew9+QmS_A@mail.gmail.com>
References: <CA+1TuBXDh19Cm6tC6CdH9See6MAxLN7DJ2Zr-Xgd5Ew9+QmS_A@mail.gmail.com>
Message-ID: <CAM_vjun80b8yESZCXndLTwGZLGwnNB=qVKbdqd2st91Oh=3nhA@mail.gmail.com>

Hi,

On Mon, Jun 23, 2014 at 9:11 AM, ashwin ittoo <ashwin.ittoo1 at gmail.com> wrote:
> Hello
> I have been using R for some text pre-processing. I have 2 qestions
> concerning the tm package/
> 1)  the function removeSparseTerms takes as parameters a matrix and a
> sparsefactor. Can anyone please tell me how is the sparsefactor calculated?
> I have tried playing around with different values and then inspecting the
> marix. But I could not still grasp the maths behind the sparsefactor

The help says percentage, although since sparse can range from 0 to 1
this is likely proportion instead. But you could always look at the
source yourself if you want to know for certain.

>
> 2) Similarly, the function findAssocs() takes as parameters a matrix , a
> term and an association threshold, e.g. findAssocs(mat, "test",.5) will
> return all the tokens in the matrix mat (created from a corpus) that have
> an association strength of 0.5 with the term "test". Can anyone please tell
> me what association metric is being used, for e.g. chi-squared,mutual
> information,....The documentation,  help.search("findAssocs"), does not say
> anything. I read on a web page (which i cannot retrieve now) that
> findAssocs is a *generic* function, but this is still very vague

The help says correlation, and the vignette "Introduction to the tm
Package" confirms that. Again, you could check the source, or you
could contact the package maintainer, which is the appropriate thing
to do for questions of this sort.

Sarah

--
Sarah Goslee
http://www.functionaldiversity.org


From marc_grt at yahoo.fr  Mon Jun 23 23:52:07 2014
From: marc_grt at yahoo.fr (Marc Girondot)
Date: Mon, 23 Jun 2014 23:52:07 +0200
Subject: [R] c() with POSIXlt objects and their timezone is lost
Message-ID: <53A8A187.9060103@yahoo.fr>

When two POSIXlt objects are combine with c(), they lost their tzone 
attribute, even if they are the same.
I don't know if it is a feature, but I don't like it !

Marc

 > es <- strptime("2010-02-03 10:20:30", format="%Y-%m-%d %H:%M:%S", 
tz="UTC")
 > es
[1] "2010-02-03 10:20:30 UTC"
 > attributes(es)
$names
[1] "sec"   "min"   "hour"  "mday"  "mon"   "year"  "wday"  "yday" "isdst"

$class
[1] "POSIXlt" "POSIXt"

$tzone
[1] "UTC"

 > c(es, es)
[1] "2010-02-03 11:20:30 CET" "2010-02-03 11:20:30 CET"
 > attributes(c(es, es))
$names
  [1] "sec"    "min"    "hour"   "mday"   "mon"    "year"   "wday" 
"yday"   "isdst"  "zone"   "gmtoff"

$class
[1] "POSIXlt" "POSIXt"

$tzone
[1] ""     "CET"  "CEST"


From dan.abner99 at gmail.com  Tue Jun 24 00:18:38 2014
From: dan.abner99 at gmail.com (Dan Abner)
Date: Mon, 23 Jun 2014 18:18:38 -0400
Subject: [R] Custom sampling method in R XXXX
In-Reply-To: <CAFEqCdw_jw8uJf3ydvy=AY03pLEXoK-jWzX4orinThLXhnB-vQ@mail.gmail.com>
References: <CAPRGo-n7SevFnN76LvuJ7mtfkFNbPMuCYkc0CcRpqaoRNUtjAQ@mail.gmail.com>
	<CAFEqCdw_jw8uJf3ydvy=AY03pLEXoK-jWzX4orinThLXhnB-vQ@mail.gmail.com>
Message-ID: <CAPRGo-=oB42gsCwZzhr=YHhUcnoVeG00kNSUsZ3WHke6PAdHgA@mail.gmail.com>

Hi Greg,

Thanks, this makes sense. I can envision the call to the sample fn
like you are discribing. Any ideas on how to construct the vector? I
still am unclear about that.

Thanks,

Dan

On Mon, Jun 23, 2014 at 5:26 PM, Greg Snow <538280 at gmail.com> wrote:
> The sample function can be used to sample discrete values with
> designated probabilities.  I would just construct your list of 5
> values based on the selected value (duplicating end values if needed,
> so a choice of x=0 would be the vector c(0,0,0, 0.125, 0.25) ), then
> sample from this vector with the probabilities that you specify.
>
> On Mon, Jun 23, 2014 at 3:11 PM, Dan Abner <dan.abner99 at gmail.com> wrote:
>>  Hi all,
>>
>> I have the following situation and a good efficient way to perform
>> this operation in R has not come to me. Any suggestions/input are
>> welcome.
>>
>> I have a user-defined parameter (let's call it x) whose value is
>> selected from a set of possible values (j). Once the user selects one
>> of the values of j for x, then I need to map a probability
>> distribution to the values of j such that the middle probability of
>> .5385 (see probs below) is associated with the value of x and the tail
>> probabilities are assigned to the 2 values below x and 2 values above
>> x in j. Therefore, in the example below:
>>
>>
>> x<-.250
>> j<-c(0.000,0.125,0.250,0.375,0.500,0.625,0.750,0.875,1.000)
>> probs<-c(0.02307692,0.20769231,0.53846154,0.20769231,0.02307692)
>>
>> probabilities would be assigned to the values of j as such:
>>
>> value     probability
>> 0            0.023077
>> 0.125     0.207692
>> 0.25       0.538462
>> 0.375     0.207692
>> 0.5         0.023077
>>
>> And then 1 value of j is selected based on the associated probability.
>> Any ideas on an efficient way to do this?
>>
>> An added dimension of complexity is when the value of x is selected
>> near the parameter boundary of j. If x = 0, then the easiest thing I
>> can think of is to assign probabilities as:
>>
>> value      probability
>> 0             0.76923077
>> 0.125      0.207692
>> 0.25        0.023077
>>
>> However, I am open to other possibilities.
>>
>> Any assistance is appreciated.
>>
>> Thanks,
>>
>> Dan
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>
>
> --
> Gregory (Greg) L. Snow Ph.D.
> 538280 at gmail.com


From anirudh.kondaveeti at gmail.com  Tue Jun 24 01:15:15 2014
From: anirudh.kondaveeti at gmail.com (Anirudh Kondaveeti)
Date: Mon, 23 Jun 2014 16:15:15 -0700
Subject: [R] Using RPostgreSQL
Message-ID: <CAGYSssdJv3WWatsw_HFBxjeedr0MRknFfPASsM9Zp=Rd=9r=pA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140623/340d3dc5/attachment.pl>

From anirudh.kondaveeti at gmail.com  Tue Jun 24 01:19:34 2014
From: anirudh.kondaveeti at gmail.com (Anirudh Kondaveeti)
Date: Mon, 23 Jun 2014 16:19:34 -0700
Subject: [R] Using RPostgreSQL
In-Reply-To: <CAGYSssdJv3WWatsw_HFBxjeedr0MRknFfPASsM9Zp=Rd=9r=pA@mail.gmail.com>
References: <CAGYSssdJv3WWatsw_HFBxjeedr0MRknFfPASsM9Zp=Rd=9r=pA@mail.gmail.com>
Message-ID: <CAGYSssf3taFR9CNnd06AKZdB=BzjhT5qaMBHkx6_svrPCZN6vQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140623/af89af58/attachment.pl>

From r.turner at auckland.ac.nz  Tue Jun 24 02:08:15 2014
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Tue, 24 Jun 2014 12:08:15 +1200
Subject: [R] Delaunay Graph, once again
In-Reply-To: <CADuMfoEbWkZ5eOAx9fUBUEHc7eofJ0qU9+PShb1sL-i3mRDxXw@mail.gmail.com>
References: <CADuMfoFs2zKTXbzfyhD5GHyYaFEJmZOo87fAmBRZoOqDfOGhGA@mail.gmail.com>
	<53A4C134.2020607@auckland.ac.nz>
	<CADuMfoEbWkZ5eOAx9fUBUEHc7eofJ0qU9+PShb1sL-i3mRDxXw@mail.gmail.com>
Message-ID: <53A8C16F.60705@auckland.ac.nz>


On 24/06/14 06:24, Raphael P?bst wrote:

> I have the same suspicion, unfortunately I am no Matlab-User either
> and only have a adjacency-matrix created by the corresponding matlab
> functions to compare with my own output. So, even though I don't see
> any use for collinear triples either, is there a way to get them with
> deldir as well?

Uh, no. Fortune fortune(228) springs to mind here.

cheers,

Rolf

>
> On 6/21/14, Rolf Turner <r.turner at auckland.ac.nz> wrote:
>>
>> You are almost surely being bitten by the issue about which you
>> previously made inquiries to me, concerning the delaunayn() function
>> from the "geometry" package.  (NOTE: ***PACKAGE***!!!  Not "library".  A
>> library is a *collection* of packages.) The delaunayn()
>> function also uses the qhull algorithm.  By default it treats some
>> triples of *collinear* points as triangles.  This is probably causing
>> the discrepancy between the results.
>>
>> Ergo it would seem best to use deldir() unless you *really want*
>> collinear triples to be considered as triangles --- and I can't see why
>> you would.

<SNIP>


From djnordlund at frontier.com  Tue Jun 24 02:23:16 2014
From: djnordlund at frontier.com (Daniel Nordlund)
Date: Mon, 23 Jun 2014 17:23:16 -0700
Subject: [R] Custom sampling method in R XXXX
In-Reply-To: <CAPRGo-=oB42gsCwZzhr=YHhUcnoVeG00kNSUsZ3WHke6PAdHgA@mail.gmail.com>
References: <CAPRGo-n7SevFnN76LvuJ7mtfkFNbPMuCYkc0CcRpqaoRNUtjAQ@mail.gmail.com><CAFEqCdw_jw8uJf3ydvy=AY03pLEXoK-jWzX4orinThLXhnB-vQ@mail.gmail.com>
	<CAPRGo-=oB42gsCwZzhr=YHhUcnoVeG00kNSUsZ3WHke6PAdHgA@mail.gmail.com>
Message-ID: <ACB2DEA7C9D14197949592DF44D49AD0@Aragorn>

Something like this could work


x <- 0.250
new_sample <- function(xx) {
  j<-c(0.000,0.125,0.250,0.375,0.500,0.625,0.750,0.875,1.000)
  probs<-c(0.02307692,0.20769231,0.53846154,0.20769231,0.02307692)
  jj <- c(0,0,j,1,1)
  ndx <- which(j == xx)
  sample(jj[ndx:(ndx+4)], size=1, p=probs, replace=TRUE)
}
new_sample(x)



Daniel Nordlund
Bothell, WA USA
 

> -----Original Message-----
> From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org]
> On Behalf Of Dan Abner
> Sent: Monday, June 23, 2014 3:19 PM
> To: Greg Snow
> Cc: r-help at r-project.org
> Subject: Re: [R] Custom sampling method in R XXXX
> 
> Hi Greg,
> 
> Thanks, this makes sense. I can envision the call to the sample fn
> like you are discribing. Any ideas on how to construct the vector? I
> still am unclear about that.
> 
> Thanks,
> 
> Dan
> 
> On Mon, Jun 23, 2014 at 5:26 PM, Greg Snow <538280 at gmail.com> wrote:
> > The sample function can be used to sample discrete values with
> > designated probabilities.  I would just construct your list of 5
> > values based on the selected value (duplicating end values if needed,
> > so a choice of x=0 would be the vector c(0,0,0, 0.125, 0.25) ), then
> > sample from this vector with the probabilities that you specify.
> >
> > On Mon, Jun 23, 2014 at 3:11 PM, Dan Abner <dan.abner99 at gmail.com>
> wrote:
> >>  Hi all,
> >>
> >> I have the following situation and a good efficient way to perform
> >> this operation in R has not come to me. Any suggestions/input are
> >> welcome.
> >>
> >> I have a user-defined parameter (let's call it x) whose value is
> >> selected from a set of possible values (j). Once the user selects one
> >> of the values of j for x, then I need to map a probability
> >> distribution to the values of j such that the middle probability of
> >> .5385 (see probs below) is associated with the value of x and the tail
> >> probabilities are assigned to the 2 values below x and 2 values above
> >> x in j. Therefore, in the example below:
> >>
> >>
> >> x<-.250
> >> j<-c(0.000,0.125,0.250,0.375,0.500,0.625,0.750,0.875,1.000)
> >> probs<-c(0.02307692,0.20769231,0.53846154,0.20769231,0.02307692)
> >>
> >> probabilities would be assigned to the values of j as such:
> >>
> >> value     probability
> >> 0            0.023077
> >> 0.125     0.207692
> >> 0.25       0.538462
> >> 0.375     0.207692
> >> 0.5         0.023077
> >>
> >> And then 1 value of j is selected based on the associated probability.
> >> Any ideas on an efficient way to do this?
> >>
> >> An added dimension of complexity is when the value of x is selected
> >> near the parameter boundary of j. If x = 0, then the easiest thing I
> >> can think of is to assign probabilities as:
> >>
> >> value      probability
> >> 0             0.76923077
> >> 0.125      0.207692
> >> 0.25        0.023077
> >>
> >> However, I am open to other possibilities.
> >>
> >> Any assistance is appreciated.
> >>
> >> Thanks,
> >>
> >> Dan
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >
> >
> >
> > --
> > Gregory (Greg) L. Snow Ph.D.
> > 538280 at gmail.com
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.


From annie.zhang2010 at gmail.com  Tue Jun 24 04:20:23 2014
From: annie.zhang2010 at gmail.com (annie Zhang)
Date: Mon, 23 Jun 2014 21:20:23 -0500
Subject: [R] help plsr function
Message-ID: <CACFy=i4XxKmS5o6mU_S0v6PuxgN9+e035NOLrh586rcdJ9=QMg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140623/05bb8202/attachment.pl>

From manoj.g at isim.net.in  Tue Jun 24 07:16:18 2014
From: manoj.g at isim.net.in (Manoj G)
Date: Tue, 24 Jun 2014 10:46:18 +0530
Subject: [R] Saving Lattice Plots with RInside and Rcpp
Message-ID: <CAG5xmxa-j2WaV8-8izgwB5WyuO0ub0uqtsKMO6J+X0Z75DA2-w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140624/9905e87c/attachment.pl>

From b.h.mevik at usit.uio.no  Tue Jun 24 10:58:59 2014
From: b.h.mevik at usit.uio.no (=?utf-8?Q?Bj=C3=B8rn-Helge_Mevik?=)
Date: Tue, 24 Jun 2014 10:58:59 +0200
Subject: [R] help plsr function
In-Reply-To: <CACFy=i4XxKmS5o6mU_S0v6PuxgN9+e035NOLrh586rcdJ9=QMg@mail.gmail.com>
	(annie Zhang's message of "Mon, 23 Jun 2014 21:20:23 -0500")
References: <CACFy=i4XxKmS5o6mU_S0v6PuxgN9+e035NOLrh586rcdJ9=QMg@mail.gmail.com>
Message-ID: <s3sd2dy7kfg.fsf@slagelg.uio.no>

annie Zhang <annie.zhang2010 at gmail.com> writes:

> ## the predicted scores from the model
> (pred <- predict(data.cpls,n.comp=1:2,newdata=x.new,type="score"))
> ## the predicted scores using x%*%projection
> cbind(x.new.centered%*%data.cpls$projection[,1],x.new.centered%*%data.cpls$projection[,2])
>
> Can someone please tell me why the two predicted scores don't match?

If you look at the code that does the prediction:

> pls:::predict.mvr
function (object, newdata, ncomp = 1:object$ncomp, comps, type = c("response", 
    "scores"), na.action = na.pass, ...) 
{
[...]
           TT <- (newX - rep(object$Xmeans, each = nobs)) %*% 
                object$projection[, comps]

you will see that it subtracts the _old X_ coloumn means from the new X
matrix, not the _new X_ coloumn means.  So

sweep(x.new, 2, data.cpls$Xmeans, "-") %*% data.cpls$projection[,1:2]

will reproduce the values from predict().

-- 
Regards,
Bj?rn-Helge Mevik


From ligges at statistik.tu-dortmund.de  Tue Jun 24 12:11:41 2014
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Tue, 24 Jun 2014 12:11:41 +0200
Subject: [R] Help partimat()
In-Reply-To: <12dec59e-e557-4ed2-8863-6000ce362506@googlegroups.com>
References: <BB6CB2A7F4526C4EAFCA6B1B9C57F3F219F0DA85CE@ICE-MBX-6.ice.nd.edu>,
	> <4B670290-1930-4010-B585-FF74BACACF61@comcast.net>
	<BB6CB2A7F4526C4EAFCA6B1B9C57F3F219F0DA85CF@ICE-MBX-6.ice.nd.edu>
	<5155AFB6.9090603@statistik.tu-dortmund.de>
	<12dec59e-e557-4ed2-8863-6000ce362506@googlegroups.com>
Message-ID: <53A94EDD.2020409@statistik.tu-dortmund.de>

On 23.06.2014 19:28, daniel_stahl at operamail.com wrote:
> I am  a bit late for this discussion but hope that I might still get an
> answer. I tried to follow your advice and had a look at "drawparti" but
> could not find the relevant section about how to plot specific pairs of
> variables
>
> I am trying to plot only a few combinations a few several combinations
> but always received an error message: For example here I tried to plot
> variable 2 with all other variables (=3 to 10). [,1] is my grouping
> variable.
>
>   drawparti(mydata[,1] ~ mydata[,2], mydata[,3:10], data = mydata,
> method = "rda", gamma=0,lamda=1)
>
> Error in rda.formula(grouping ~ x + y, data = cbind.data.frame(grouping
> = grouping,  :
>    formal argument "data" matched by multiple actual arguments
>


As I said a year ago, partimat is the worker for drawparti and hence 
does not have the most convenient interface, hence you want soemthig like:


What you want is something like:

par(mfrow = c(4,2))
for(i in 3:10)
   drawparti(mydata[,1], mydata[,2], mydata[,i], method = "rda", 
gamma=0, lamda=1)

Best,
Uwe Ligges



> Best wishes, Daniel
>
>  >
>
> On Friday, March 29, 2013 3:13:58 PM UTC, Uwe Ligges wrote:
>
>
>
>     On 29.03.2013 15:59, Antelmo Aguilar wrote:
>      > Hello David,
>      >
>      > Thank you for letting me know that the partimat() function calls
>     that function.  I am kind of knew to R so I do not know exactly how
>     to describe the structure.  If I understand correctly, what I
>     essentially need to do is pass in all the different data sets into
>     one partimat() function and then the partimat() function will create
>     the different plots and the way the different data sets get passed
>     in is by describing a structure of the different data and passing it
>     into the partimat() function. Is my thinking correct?  Would it also
>     be possible if I could be directed to a website that shows me how to
>     describe a data structure or if someone could be so generous as to
>     tell me how to do this?  I would greatly appreciate it and thank you
>     for the help.
>
>
>     partimat is intended to plot several plots for each combination of
>     explanatory variables in a classification problem.
>
>     If you want to generate such plots separately and/or combine them in
>     another way, see the help page. It says "See Also: for much more fine
>     tuning see drawparti". The latter function allows to generate a single
>     plot that can again be arranged within others by the user.
>
>     Best,
>     Uwe Ligges
>
>
>


From dan.abner99 at gmail.com  Tue Jun 24 14:06:03 2014
From: dan.abner99 at gmail.com (Dan Abner)
Date: Tue, 24 Jun 2014 08:06:03 -0400
Subject: [R] Custom sampling method in R XXXX
In-Reply-To: <ACB2DEA7C9D14197949592DF44D49AD0@Aragorn>
References: <CAPRGo-n7SevFnN76LvuJ7mtfkFNbPMuCYkc0CcRpqaoRNUtjAQ@mail.gmail.com>
	<CAFEqCdw_jw8uJf3ydvy=AY03pLEXoK-jWzX4orinThLXhnB-vQ@mail.gmail.com>
	<CAPRGo-=oB42gsCwZzhr=YHhUcnoVeG00kNSUsZ3WHke6PAdHgA@mail.gmail.com>
	<ACB2DEA7C9D14197949592DF44D49AD0@Aragorn>
Message-ID: <CAPRGo-mZNxm4h9zas-452aDXxTgvUa5SVHZcZ9UP1_w4BkejgA@mail.gmail.com>

Hi Daniel,

Great! Many thanks!

Dan


On Mon, Jun 23, 2014 at 8:23 PM, Daniel Nordlund
<djnordlund at frontier.com> wrote:
> Something like this could work
>
>
> x <- 0.250
> new_sample <- function(xx) {
>   j<-c(0.000,0.125,0.250,0.375,0.500,0.625,0.750,0.875,1.000)
>   probs<-c(0.02307692,0.20769231,0.53846154,0.20769231,0.02307692)
>   jj <- c(0,0,j,1,1)
>   ndx <- which(j == xx)
>   sample(jj[ndx:(ndx+4)], size=1, p=probs, replace=TRUE)
> }
> new_sample(x)
>
>
>
> Daniel Nordlund
> Bothell, WA USA
>
>
>> -----Original Message-----
>> From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org]
>> On Behalf Of Dan Abner
>> Sent: Monday, June 23, 2014 3:19 PM
>> To: Greg Snow
>> Cc: r-help at r-project.org
>> Subject: Re: [R] Custom sampling method in R XXXX
>>
>> Hi Greg,
>>
>> Thanks, this makes sense. I can envision the call to the sample fn
>> like you are discribing. Any ideas on how to construct the vector? I
>> still am unclear about that.
>>
>> Thanks,
>>
>> Dan
>>
>> On Mon, Jun 23, 2014 at 5:26 PM, Greg Snow <538280 at gmail.com> wrote:
>> > The sample function can be used to sample discrete values with
>> > designated probabilities.  I would just construct your list of 5
>> > values based on the selected value (duplicating end values if needed,
>> > so a choice of x=0 would be the vector c(0,0,0, 0.125, 0.25) ), then
>> > sample from this vector with the probabilities that you specify.
>> >
>> > On Mon, Jun 23, 2014 at 3:11 PM, Dan Abner <dan.abner99 at gmail.com>
>> wrote:
>> >>  Hi all,
>> >>
>> >> I have the following situation and a good efficient way to perform
>> >> this operation in R has not come to me. Any suggestions/input are
>> >> welcome.
>> >>
>> >> I have a user-defined parameter (let's call it x) whose value is
>> >> selected from a set of possible values (j). Once the user selects one
>> >> of the values of j for x, then I need to map a probability
>> >> distribution to the values of j such that the middle probability of
>> >> .5385 (see probs below) is associated with the value of x and the tail
>> >> probabilities are assigned to the 2 values below x and 2 values above
>> >> x in j. Therefore, in the example below:
>> >>
>> >>
>> >> x<-.250
>> >> j<-c(0.000,0.125,0.250,0.375,0.500,0.625,0.750,0.875,1.000)
>> >> probs<-c(0.02307692,0.20769231,0.53846154,0.20769231,0.02307692)
>> >>
>> >> probabilities would be assigned to the values of j as such:
>> >>
>> >> value     probability
>> >> 0            0.023077
>> >> 0.125     0.207692
>> >> 0.25       0.538462
>> >> 0.375     0.207692
>> >> 0.5         0.023077
>> >>
>> >> And then 1 value of j is selected based on the associated probability.
>> >> Any ideas on an efficient way to do this?
>> >>
>> >> An added dimension of complexity is when the value of x is selected
>> >> near the parameter boundary of j. If x = 0, then the easiest thing I
>> >> can think of is to assign probabilities as:
>> >>
>> >> value      probability
>> >> 0             0.76923077
>> >> 0.125      0.207692
>> >> 0.25        0.023077
>> >>
>> >> However, I am open to other possibilities.
>> >>
>> >> Any assistance is appreciated.
>> >>
>> >> Thanks,
>> >>
>> >> Dan
>> >>
>> >> ______________________________________________
>> >> R-help at r-project.org mailing list
>> >> https://stat.ethz.ch/mailman/listinfo/r-help
>> >> PLEASE do read the posting guide http://www.R-project.org/posting-
>> guide.html
>> >> and provide commented, minimal, self-contained, reproducible code.
>> >
>> >
>> >
>> > --
>> > Gregory (Greg) L. Snow Ph.D.
>> > 538280 at gmail.com
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-
>> guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From carlo-giovanni.camarda at ined.fr  Tue Jun 24 14:38:35 2014
From: carlo-giovanni.camarda at ined.fr (CAMARDA Carlo Giovanni)
Date: Tue, 24 Jun 2014 14:38:35 +0200 (CEST)
Subject: [R]  matrix built by diagonal matrices with a given structure
In-Reply-To: <375013995.146659.1403543139114.JavaMail.root@ined.fr>
Message-ID: <246332922.78671.1403613515220.JavaMail.root@ined.fr>

? stato filtrato un testo allegato il cui set di caratteri non era
indicato...
Nome: non disponibile
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140624/c3a7f86d/attachment.pl>

From ripley at stats.ox.ac.uk  Tue Jun 24 14:53:03 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 24 Jun 2014 13:53:03 +0100
Subject: [R] Dead link in the help page of as.Date()
In-Reply-To: <CA+dpOJmYR+uP-Gd69s8sdYhNzgo8vF-gRKR6EU4Snz-h7abb8g@mail.gmail.com>
References: <CA+dpOJmYR+uP-Gd69s8sdYhNzgo8vF-gRKR6EU4Snz-h7abb8g@mail.gmail.com>
Message-ID: <53A974AF.1010602@stats.ox.ac.uk>

On 23/06/2014 20:41, Christofer Bogaso wrote:
> Hi,
>
> I was reading the help page for as.Date() function for some reason,
> and noticed a Matlab link:
>
> http://www.mathworks.com/help/techdoc/matlab_prog/bspgcx2-1.html
>
> It looks like this link is dead. So may be it would be better to put a
> correct link or remove this altogether.

It is not a link ... it is the reference for the value quoted.  Even if 
URLs are removed, the convention is to credit the actual source.

>
> Thanks and regards,
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From nashjc at uottawa.ca  Tue Jun 24 15:06:21 2014
From: nashjc at uottawa.ca (Prof J C Nash (U30A))
Date: Tue, 24 Jun 2014 09:06:21 -0400
Subject: [R] Problem with "nlm" function to minimize the negative
	log	likelihood
In-Reply-To: <mailman.19.1403604008.5283.r-help@r-project.org>
References: <mailman.19.1403604008.5283.r-help@r-project.org>
Message-ID: <53A977CD.50308@uottawa.ca>

This is almost always "user error" in setting up the problem, but
without a reproducible example, you won't get any real help on this list.

JN

On 14-06-24 06:00 AM, r-help-request at r-project.org wrote:
> Message: 11
> Date: Mon, 23 Jun 2014 09:14:23 -0700
> From: Ferra Xu <ferra.xu at yahoo.com>
> To: "r-sig-geo at r-project.org" <r-sig-geo at r-project.org>,
> 	"r-help at r-project.org" <r-help at r-project.org>
> Subject: [R] Problem with "nlm" function to minimize the negative log
> 	likelihood
> Message-ID:
> 	<1403540063.64234.YahooMailNeo at web125103.mail.ne1.yahoo.com>
> Content-Type: text/plain
> 
> Hi all
>  I have a problem in using "nlm" function to minimize the negative log likelihood of a function in R. The problem is that it gives me the same estimated values for all the parameters, except one of them, in each iteration!! Does anyone have any ideas what may cause this mistake? 
> 
> Thank you


From hannah.hlx at gmail.com  Tue Jun 24 15:17:51 2014
From: hannah.hlx at gmail.com (li li)
Date: Tue, 24 Jun 2014 09:17:51 -0400
Subject: [R] Making several plots using a loop function
Message-ID: <CAHLnndah+AjaOrr-VHxASP5GfwH3asqORTcn68UetJU8FNgFNA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140624/6422cf9f/attachment.pl>

From kehld at ktk.pte.hu  Tue Jun 24 15:23:01 2014
From: kehld at ktk.pte.hu (=?iso-8859-2?Q?Kehl_D=E1niel?=)
Date: Tue, 24 Jun 2014 13:23:01 +0000
Subject: [R] Making several plots using a loop function
In-Reply-To: <CAHLnndah+AjaOrr-VHxASP5GfwH3asqORTcn68UetJU8FNgFNA@mail.gmail.com>
References: <CAHLnndah+AjaOrr-VHxASP5GfwH3asqORTcn68UetJU8FNgFNA@mail.gmail.com>
Message-ID: <33D76D77E9AC4B438DA38B348ED6890D0BAEA367@EMAIL.ktkdom.pte.hu>

Hi,


try something like

main=paste("plot",i)

in the plot command.

HTH,
kd
________________________________________
Felad?: r-help-bounces at r-project.org [r-help-bounces at r-project.org] ; meghatalmaz&#243;: li li [hannah.hlx at gmail.com]
K?ldve: 2014. j?nius 24. 15:17
To: r-help
T?rgy: [R] Making several plots using a loop function

Hi all,
   When making a bunch of plots using a loop function, how to add title to
reflect different plots.
Specifically, for the code below, I generated 9 plots.  I would like to add
a title to each plot.
For example, the titles will be respectively, plot1, plot 2, ??? plot 9.
Thank you very much!
    Hanna



par(mfrow=c(3,3), pty="s", pch=16, col="blue")
for ( i in 1:9) {
lm1 <-  lm(log(run_res[2:11, i]) ~ log(level))
plot(log(level), log(run_res[2:11, i]), xlab="dllution levels",
ylab="%PS-80")
abline(lm1)}

        [[alternative HTML version deleted]]



From sarah.goslee at gmail.com  Tue Jun 24 15:23:54 2014
From: sarah.goslee at gmail.com (Sarah Goslee)
Date: Tue, 24 Jun 2014 09:23:54 -0400
Subject: [R] Making several plots using a loop function
In-Reply-To: <CAHLnndah+AjaOrr-VHxASP5GfwH3asqORTcn68UetJU8FNgFNA@mail.gmail.com>
References: <CAHLnndah+AjaOrr-VHxASP5GfwH3asqORTcn68UetJU8FNgFNA@mail.gmail.com>
Message-ID: <CAM_vjukLohc-ifT+er6ywD2FchgENYijN5K-N9-UgLDVcahXmw@mail.gmail.com>

What about

title(paste("plot", i))

?

Sarah

On Tue, Jun 24, 2014 at 9:17 AM, li li <hannah.hlx at gmail.com> wrote:
> Hi all,
>    When making a bunch of plots using a loop function, how to add title to
> reflect different plots.
> Specifically, for the code below, I generated 9 plots.  I would like to add
> a title to each plot.
> For example, the titles will be respectively, plot1, plot 2, ? plot 9.
> Thank you very much!
>     Hanna
>
>
>
> par(mfrow=c(3,3), pty="s", pch=16, col="blue")
> for ( i in 1:9) {
> lm1 <-  lm(log(run_res[2:11, i]) ~ log(level))
> plot(log(level), log(run_res[2:11, i]), xlab="dllution levels",
> ylab="%PS-80")
> abline(lm1)}
>
>         [[alternative HTML version deleted]]
>
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>



-- 
Sarah Goslee
http://www.stringpage.com
http://www.sarahgoslee.com
http://www.functionaldiversity.org


From cindy.guo3 at gmail.com  Tue Jun 24 15:25:30 2014
From: cindy.guo3 at gmail.com (cindy Guo)
Date: Tue, 24 Jun 2014 08:25:30 -0500
Subject: [R] help plsr function
In-Reply-To: <s3sd2dy7kfg.fsf@slagelg.uio.no>
References: <CACFy=i4XxKmS5o6mU_S0v6PuxgN9+e035NOLrh586rcdJ9=QMg@mail.gmail.com>
	<s3sd2dy7kfg.fsf@slagelg.uio.no>
Message-ID: <CAA7sLQnM6FvyB=H739-pPVGt5pMxLqDivNpdSFe-j+G-MGkJ9w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140624/74d164ec/attachment.pl>

From cindy.guo3 at gmail.com  Tue Jun 24 15:25:30 2014
From: cindy.guo3 at gmail.com (cindy Guo)
Date: Tue, 24 Jun 2014 08:25:30 -0500
Subject: [R] help plsr function
In-Reply-To: <s3sd2dy7kfg.fsf@slagelg.uio.no>
References: <CACFy=i4XxKmS5o6mU_S0v6PuxgN9+e035NOLrh586rcdJ9=QMg@mail.gmail.com>
	<s3sd2dy7kfg.fsf@slagelg.uio.no>
Message-ID: <CAA7sLQnM6FvyB=H739-pPVGt5pMxLqDivNpdSFe-j+G-MGkJ9w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140624/74d164ec/attachment-0001.pl>

From frtog at vestas.com  Tue Jun 24 15:30:08 2014
From: frtog at vestas.com (=?Windows-1252?Q?Frede_Aakmann_T=F8gersen?=)
Date: Tue, 24 Jun 2014 15:30:08 +0200
Subject: [R] Making several plots using a loop function
Message-ID: <2ar9eqtutv5q06qs3xvnmgf9.1403616604912@email.android.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140624/1184432e/attachment.pl>

From bchalfant at yahoo.com  Tue Jun 24 15:24:00 2014
From: bchalfant at yahoo.com (Brian Chalfant)
Date: Tue, 24 Jun 2014 06:24:00 -0700
Subject: [R] non-interactive error in .First function
Message-ID: <1403616240.4903.YahooMailNeo@web142304.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140624/23f58831/attachment.pl>

From zhanglun1525 at gmail.com  Tue Jun 24 12:19:14 2014
From: zhanglun1525 at gmail.com (=?GB2312?B?1cXC1w==?=)
Date: Tue, 24 Jun 2014 18:19:14 +0800
Subject: [R] Retaining the original document id in #topicmodels in R
Message-ID: <CAD06_6P7HnCdHcsLkFY0hBxeiy333u4rhAYb0VW6BtL5UugC1Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140624/8bb2f9fd/attachment.pl>

From zhanglun1525 at gmail.com  Tue Jun 24 12:30:16 2014
From: zhanglun1525 at gmail.com (=?GB2312?B?1cXC1w==?=)
Date: Tue, 24 Jun 2014 18:30:16 +0800
Subject: [R] Retaining the original document id in #topicmodels in R
Message-ID: <CAD06_6PAioMFB1-fv5gEJzsiN+FSFp+LoVh=_AkzZVzybNeaAA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140624/43767030/attachment.pl>

From zaydfarah at gmail.com  Tue Jun 24 15:43:07 2014
From: zaydfarah at gmail.com (Zayd Farah)
Date: Tue, 24 Jun 2014 09:43:07 -0400
Subject: [R] (no subject)
Message-ID: <CAMU6xLedPDyzeZ09R4c9wcoKZL8NQAS7F9CbVYsLZmXOBzya8g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140624/42cdf844/attachment.pl>

From ajdamico at gmail.com  Tue Jun 24 16:40:23 2014
From: ajdamico at gmail.com (Anthony Damico)
Date: Tue, 24 Jun 2014 10:40:23 -0400
Subject: [R] (no subject)
In-Reply-To: <CAMU6xLedPDyzeZ09R4c9wcoKZL8NQAS7F9CbVYsLZmXOBzya8g@mail.gmail.com>
References: <CAMU6xLedPDyzeZ09R4c9wcoKZL8NQAS7F9CbVYsLZmXOBzya8g@mail.gmail.com>
Message-ID: <CAOwvMDxWO3KKD4kTjOW17L5OQuvv8vW+G8dq5sCVuNwqgdMVGA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140624/37a837d1/attachment.pl>

From jdnewmil at dcn.davis.ca.us  Tue Jun 24 16:52:34 2014
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Tue, 24 Jun 2014 07:52:34 -0700 (PDT)
Subject: [R] (no subject)
In-Reply-To: <CAMU6xLedPDyzeZ09R4c9wcoKZL8NQAS7F9CbVYsLZmXOBzya8g@mail.gmail.com>
References: <CAMU6xLedPDyzeZ09R4c9wcoKZL8NQAS7F9CbVYsLZmXOBzya8g@mail.gmail.com>
Message-ID: <alpine.BSF.2.00.1406240726540.1190@pedal.dcn.davis.ca.us>

Reproducibility == good (except for mixing in invalid code and failing to 
set RNG seed)
HTML email == bad
Missing subject == bad
Using matrices with ggplot == pushing a rope
Using for loops to build a ggplot == missing the point
Using wide-form data with ggplot == pushing a rope

Study the following (the str() function is your friend, and learning how 
factors work will help you map colors where you want them in more 
complicated examples):

library(ggplot2)
library(reshape2)
set.seed(42)
xaxis <- rnorm( 30 ) + 10
mydata <- replicate( 9, rnorm( 30 ) + 20 )
mydf <- data.frame( xaxis=xaxis, mydata )
colour_scheme <- rainbow( ncol( mydata ) )
mydf.long <- melt( mydf, id.vars="xaxis" )
ggplot( mydf.long, aes( x=xaxis, y=value, color=variable ) ) +
   geom_line() +
   scale_colour_manual( values=colour_scheme, guide=FALSE )


On Tue, 24 Jun 2014, Zayd Farah wrote:

> I hope the following script is reproducible enough to highlight my issue,
> which is to automatically (in this case by loop, but it does not
> necessarily have to be by a loop) add geom_line layers for each column of
> mydata to the ggplot variable p1. for some reason doing this only works by
> manually adding each layer:
>
> library(ggplot2)
> library(gtable)
>
>
> #creates set of reproducible data
> xaxis<-rnorm(30)+10
> xaxis
> mydata<-replicate(9, rnorm(30)+20)
>
> #creates a matrix of colors to identify each line on the final plot of
> #each column of mydata
>
> colour_scheme<-palette(rainbow(dim(mydata)[2]))
>
> # Main scatterplot
> p1 <- ggplot(NULL)
>
> #ideal code that would create a geom_line layer for each column of mydata
> vs. xaxis
> for (i in 1:dim(mydata)[2])
>    {
>      p1=p1+geom_line(aes(xaxis,mydata[,i]),colour=colour_scheme[i])
>    }
> p1
>
> #run the following code to see what it SHOULD look like:
> p1 <- ggplot(NULL)
> p1=p1+geom_line(aes(xaxis,mydata[,1]),colour=colour_scheme[1])
> p1=p1+geom_line(aes(xaxis,mydata[,2]),colour=colour_scheme[2])
> p1=p1+geom_line(aes(xaxis,mydata[,3]),colour=colour_scheme[3])
> p1=p1+geom_line(aes(xaxis,mydata[,4]),colour=colour_scheme[4])
> p1
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                       Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k


From jdnewmil at dcn.davis.ca.us  Tue Jun 24 17:00:44 2014
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Tue, 24 Jun 2014 08:00:44 -0700 (PDT)
Subject: [R] non-interactive error in .First function
In-Reply-To: <1403616240.4903.YahooMailNeo@web142304.mail.bf1.yahoo.com>
References: <1403616240.4903.YahooMailNeo@web142304.mail.bf1.yahoo.com>
Message-ID: <alpine.BSF.2.00.1406240758570.1190@pedal.dcn.davis.ca.us>

Suggestions:
a) Don't post in HTML format... your code appears corrupt.
b) Don't do this. Read the Note in ?.First

On Tue, 24 Jun 2014, Brian Chalfant wrote:

> Hi all -
>
> Long-time user, first-time poster.
>
> I added a .First function to my Rprofile.site file to check for updates, clean the console, and put some fun quotes on startup.? This used to work without error.? I hadn't used R (which I usually play with in RStudio) in a few weeks, but when I started up recently and updated (R 3.1.0+ RStudio v 0.98.945),I got a couple error messages.? For context, here is my .First function:
>
> .First <- function(){
> ??? suppressPackageStartupMessages(library(installr))
> ??? library(installr)
> ??? library(stats)
> ??? old.packages = installed.packages()[,1]
> ??? save(old.packages, file="C:/Users/Owner/Documents/R/installedPackages.Rdata")
> ??? # load("C:/Users/Owner/Documents/R/installedPackages.Rdata")
> ??? # pull.packages = installed.packages()[,1]
> ??? # for (i in setdiff(old.packages, pull.packages))
> ??? # install.packages(i)
> ??? updateR()
> ??? cat("\014")
> ??? if (runif(1,0,1)>0.5) {
> ????? cat("Stately, plump Buck Mulligan...")
> ??? } else cat("as though\nyou were creating\na mathematical sandwich")
> ? }
>
>
> I was getting an error message about installr, but I added the suppress... function as suggested in that error message, which worked like a gem.? However, I can't quite figure out how to address the other error message.? Here it is:
>
> Error installing package: Error in winDialog(type = "ok", message = message_text) :  winDialog() cannot be used non-interactively
> Calls: .First -> updateR -> check.for.updates.R -> winDialog
> Execution halted
> I'm not sure what's going on here, but I'm guessing R runs .First functions in non-interactive mode.? I ham-handedly tried adding an > interactive=T line to the .First function, but this didn't work.
>
> Any suggestions would be much appreciated.
>
> =)? Brian
> ?
> Brian Alexander Chalfant
> Research Assistant & PhD student
> University of Pittsburgh
> www.pitt.edu/~bac84
> bac84 at pitt.edu
> 724.984.7758
> 	[[alternative HTML version deleted]]
>
>

---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                       Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k


From jdnewmil at dcn.davis.ca.us  Tue Jun 24 17:19:00 2014
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Tue, 24 Jun 2014 08:19:00 -0700 (PDT)
Subject: [R] c() with POSIXlt objects and their timezone is lost
In-Reply-To: <53A8A187.9060103@yahoo.fr>
References: <53A8A187.9060103@yahoo.fr>
Message-ID: <alpine.BSF.2.00.1406240805460.1190@pedal.dcn.davis.ca.us>

This is a rope. Don't push it. Been there, been swatted.

The current structure of R cannot support vectors of POSIXt timestamps 
that have different tzones in different elements. You can keep a parallel 
vector of tzones separately and manage environment variable TZ as needed 
if you really must handle each timestamp in a different time zone.

By the way, count yourself lucky that c() works with POSIXlt at all, since 
POSIXlt is a list of vectors.  My practice is to store data in POSIXct 
pretty much exclusively, reserving POSIXlt for temporary time 
manipulations only.

On Mon, 23 Jun 2014, Marc Girondot wrote:

> When two POSIXlt objects are combine with c(), they lost their tzone 
> attribute, even if they are the same.
> I don't know if it is a feature, but I don't like it !
>
> Marc
>
>> es <- strptime("2010-02-03 10:20:30", format="%Y-%m-%d %H:%M:%S", tz="UTC")
>> es
> [1] "2010-02-03 10:20:30 UTC"
>> attributes(es)
> $names
> [1] "sec"   "min"   "hour"  "mday"  "mon"   "year"  "wday"  "yday" "isdst"
>
> $class
> [1] "POSIXlt" "POSIXt"
>
> $tzone
> [1] "UTC"
>
>> c(es, es)
> [1] "2010-02-03 11:20:30 CET" "2010-02-03 11:20:30 CET"
>> attributes(c(es, es))
> $names
> [1] "sec"    "min"    "hour"   "mday"   "mon"    "year"   "wday" "yday" 
> "isdst"  "zone"   "gmtoff"
>
> $class
> [1] "POSIXlt" "POSIXt"
>
> $tzone
> [1] ""     "CET"  "CEST"
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                       Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k


From istazahn at gmail.com  Tue Jun 24 17:24:08 2014
From: istazahn at gmail.com (Ista Zahn)
Date: Tue, 24 Jun 2014 11:24:08 -0400
Subject: [R] Dead link in the help page of as.Date()
In-Reply-To: <53A974AF.1010602@stats.ox.ac.uk>
References: <CA+dpOJmYR+uP-Gd69s8sdYhNzgo8vF-gRKR6EU4Snz-h7abb8g@mail.gmail.com>
	<53A974AF.1010602@stats.ox.ac.uk>
Message-ID: <CA+vqiLE1kvtXfjc=PD_UqNCO1WphRneSVphmEjuznZjSQ+COSg@mail.gmail.com>

Fortunately we have the wayback machine:

https://web.archive.org/web/20120425004417/http://www.mathworks.com/help/techdoc/matlab_prog/bspgcx2-1.html

Best,
Ista

On Tue, Jun 24, 2014 at 8:53 AM, Prof Brian Ripley
<ripley at stats.ox.ac.uk> wrote:
> On 23/06/2014 20:41, Christofer Bogaso wrote:
>>
>> Hi,
>>
>> I was reading the help page for as.Date() function for some reason,
>> and noticed a Matlab link:
>>
>> http://www.mathworks.com/help/techdoc/matlab_prog/bspgcx2-1.html
>>
>> It looks like this link is dead. So may be it would be better to put a
>> correct link or remove this altogether.
>
>
> It is not a link ... it is the reference for the value quoted.  Even if URLs
> are removed, the convention is to credit the actual source.
>
>
>>
>> Thanks and regards,
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>
> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From karch at mpib-berlin.mpg.de  Tue Jun 24 17:32:10 2014
From: karch at mpib-berlin.mpg.de (Julian Karch)
Date: Tue, 24 Jun 2014 08:32:10 -0700 (PDT)
Subject: [R] rfImpute
In-Reply-To: <39B6DDB9048D0F4DAD42CB26AAFF0AFA048C6B23@usctmx1106.merck.com>
References: <a42e7d400708100817v4eef5495o8b9e1c925d4720d7@mail.gmail.com>
	<39B6DDB9048D0F4DAD42CB26AAFF0AFA048C6B23@usctmx1106.merck.com>
Message-ID: <1403623930225-4692929.post@n4.nabble.com>

I am having the same problem
  
trainImp <- rfImpute(train[,!colnames(train)=="score"],train$score)
yields

Error in randomForest.default(xf, y, ntree = ntree, ..., do.trace = ntree, 
:
  NA not permitted in predictors

any ideas?



--
View this message in context: http://r.789695.n4.nabble.com/rfImpute-tp832010p4692929.html
Sent from the R help mailing list archive at Nabble.com.


From nourhenalaya at gmail.com  Tue Jun 24 16:40:21 2014
From: nourhenalaya at gmail.com (=?UTF-8?Q?Nourh=C3=A8ne_Alaya?=)
Date: Tue, 24 Jun 2014 16:40:21 +0200
Subject: [R] Need help to understand ecdf (empirical cumulative distribution
	function)
Message-ID: <CABj2ZXJGJAy-T+LSz3PLcFPgJaobO6ShvJSXzBzCzHjsbtg+qg@mail.gmail.com>

Hi,

I m a new user of R. I need to plot distribution of some computed
centrality metrics of my network.
I used ecdf to compute the cumulative distribution of degrees and then
plotted the resultat. However, i got a different distribution from the one
computed using the degree.distribution function from the igraph package !?
Can you help me figure out which of them is the correct one. The two plots
are joined to this mail.

#The degree Vector of the graph's nodes
dd<-degree(graph)

#degree distribution with igraph
dist<-degree.distribution(graph, cumulative=TRUE)

#degree distribution with ecdf
decdf<- ecdf(degree(dd)



-- 
Cordialement,
Nourh?ne ALAYA
Ing?nieur Informatique,
Doctorant ? la facult? des sciences de Tunis,
Doctorant ? l'universit? de Paris 8

From tahjamil at gmail.com  Tue Jun 24 16:41:12 2014
From: tahjamil at gmail.com (Tahira Jamil)
Date: Tue, 24 Jun 2014 16:41:12 +0200
Subject: [R] Sample all possible contingency tables both margin fixed
Message-ID: <87B9892C-44DD-41B6-B2EE-50092529794E@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140624/40c51bde/attachment.pl>

From jvadams at usgs.gov  Tue Jun 24 18:32:32 2014
From: jvadams at usgs.gov (Adams, Jean)
Date: Tue, 24 Jun 2014 11:32:32 -0500
Subject: [R] ASA Conf. on Stats Practice - deadline THURSDAY
Message-ID: <CAN5YmCGuXFFj+szzyVfvUQPiR2jCgeJEoOeW0FsPGmRws9d=bg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140624/cd214d36/attachment.pl>

From ggrothendieck at gmail.com  Tue Jun 24 19:07:21 2014
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Tue, 24 Jun 2014 13:07:21 -0400
Subject: [R] Sample all possible contingency tables both margin fixed
In-Reply-To: <87B9892C-44DD-41B6-B2EE-50092529794E@gmail.com>
References: <87B9892C-44DD-41B6-B2EE-50092529794E@gmail.com>
Message-ID: <CAP01uRnFV_51SnkrZFL8T3qpP7X4t5w=Yrf_c3mXYy8+BVZKkA@mail.gmail.com>

On Tue, Jun 24, 2014 at 10:41 AM, Tahira Jamil <tahjamil at gmail.com> wrote:
> Hi,
>
> I am interested in generating all possible contingency table (2 by 2) with fixed row margins and column margins. Can anyone help me.
>

If the reason you want this is to sample them then r2dtable can do
that directly.


From pdalgd at gmail.com  Tue Jun 24 19:58:59 2014
From: pdalgd at gmail.com (peter dalgaard)
Date: Tue, 24 Jun 2014 19:58:59 +0200
Subject: [R] Sample all possible contingency tables both margin fixed
In-Reply-To: <87B9892C-44DD-41B6-B2EE-50092529794E@gmail.com>
References: <87B9892C-44DD-41B6-B2EE-50092529794E@gmail.com>
Message-ID: <316FD5A0-DAE9-4730-A9A5-395B9BC67EA6@gmail.com>


On 24 Jun 2014, at 16:41 , Tahira Jamil <tahjamil at gmail.com> wrote:

> Hi,
> 
> I am interested in generating all possible contingency table (2 by 2) with fixed row margins and column margins. Can anyone help me. 
> 


It's pretty easy, just find one compatible solution and add or subtract

1 -1
-1  1

until one of the numbers would go negative. Or put differently, if you know one entry, you know the other three, so it is just a matter of working out the range of (say) possible top-left entries.

With more than 2x2 tables it is much harder, but fisher.test() does it internally.

-pd


> Best regards,
> Tahira 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From baccts at hotmail.com  Tue Jun 24 18:56:34 2014
From: baccts at hotmail.com (C Lin)
Date: Tue, 24 Jun 2014 12:56:34 -0400
Subject: [R] converting a list with named member to a vector maintaining
 original names
Message-ID: <COL129-W6F0FB7A0991A48620B0D1CB1E0@phx.gbl>

Dear R users,

I have a list that I'd like to convert to a vector while preserving the original names.
For example:

test <- list(ABCC2=37280,ABCC5=c(12268,13308));

If I do unlist, it automatically renamed the ABCC5 to ABCC51 and ABCC52
> unlist(test)
?ABCC2 ABCC51 ABCC52?
?37280 ?12268 ?13308?

How do I retained the original names so I'll get:
ABCC2 37280
ABCC5 12268
ABCC5 13308

Thank you in advance for your help.

Lin? 		 	   		  

From bchalfant at yahoo.com  Tue Jun 24 18:16:08 2014
From: bchalfant at yahoo.com (Brian Chalfant)
Date: Tue, 24 Jun 2014 09:16:08 -0700
Subject: [R] non-interactive error in .First function
In-Reply-To: <alpine.BSF.2.00.1406240758570.1190@pedal.dcn.davis.ca.us>
References: <1403616240.4903.YahooMailNeo@web142304.mail.bf1.yahoo.com>
	<alpine.BSF.2.00.1406240758570.1190@pedal.dcn.davis.ca.us>
Message-ID: <1403626568.59319.YahooMailNeo@web142302.mail.bf1.yahoo.com>

(a) Sorry, that was my first post.? I'll be sure to plain text from here on.

(b) Hmm.? "It is not intended that there be interaction with the user during startup code.? Attempting to do so can crash the R process, especially so prior to R 3.0.2."? I had been using this with <3.0.1. with no problems or error messages at all.? What changed?? If I want to risk crashing, is there a workaround?

Thanks much -
Brian


Brian Alexander Chalfant
Research Assistant & PhD student
University of Pittsburgh
www.pitt.edu/~bac84
bac84 at pitt.edu
724.984.7758


________________________________
From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
To: Brian Chalfant <bchalfant at yahoo.com> 
Cc: "r-help at r-project.org" <r-help at r-project.org> 
Sent: Tuesday, June 24, 2014 11:00 AM
Subject: Re: [R] non-interactive error in .First function


Suggestions:
a) Don't post in HTML format... your code appears corrupt.
b) Don't do this. Read the Note in ?.First




On Tue, 24 Jun 2014, Brian Chalfant wrote:

> Hi all -
>
> Long-time user, first-time poster.
>
> I added a .First function to my Rprofile.site file to check for updates, clean the console, and put some fun quotes on startup.? This used to work without error.? I hadn't used R (which I usually play with in RStudio) in a few weeks, but when I started up recently and updated (R 3.1.0+ RStudio v 0.98.945),I got a couple error messages.? For context, here is my .First function:
>
> .First <- function(){
> ??? suppressPackageStartupMessages(library(installr))
> ??? library(installr)
> ??? library(stats)
> ??? old.packages = installed.packages()[,1]
> ??? save(old.packages, file="C:/Users/Owner/Documents/R/installedPackages.Rdata")
> ??? # load("C:/Users/Owner/Documents/R/installedPackages.Rdata")
> ??? # pull.packages = installed.packages()[,1]
> ??? # for (i in setdiff(old.packages, pull.packages))
> ??? # install.packages(i)
> ??? updateR()
> ??? cat("\014")
> ??? if (runif(1,0,1)>0.5) {
> ????? cat("Stately, plump Buck Mulligan...")
> ??? } else cat("as though\nyou were creating\na mathematical sandwich")
> ? }
>
>
> I was getting an error message about installr, but I added the suppress... function as suggested in that error message, which worked like a gem.? However, I can't quite figure out how to address the other error message.? Here it is:
>
> Error installing package: Error in winDialog(type = "ok", message = message_text) :? winDialog() cannot be used non-interactively
> Calls: .First -> updateR -> check.for.updates.R -> winDialog
> Execution halted
> I'm not sure what's going on here, but I'm guessing R runs .First functions in non-interactive mode.? I ham-handedly tried adding an > interactive=T line to the .First function, but this didn't work.
>
> Any suggestions would be much appreciated.
>
> =)? Brian
> ?
> Brian Alexander Chalfant
> Research Assistant & PhD student
> University of Pittsburgh
> www.pitt.edu/~bac84
> bac84 at pitt.edu
> 724.984.7758
> ??? [[alternative HTML version deleted]]
>
>

---------------------------------------------------------------------------
Jeff Newmiller? ? ? ? ? ? ? ? ? ? ? ? The? ???.....? ? ???.....? Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>? ? ? ? Basics: ##.#.? ? ???##.#.? Live Go...
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ???Live:???OO#.. Dead: OO#..? Playing
Research Engineer (Solar/Batteries? ? ? ? ? ? O.O#.? ? ???#.O#.? with
/Software/Embedded Controllers)? ? ? ? ? ? ???.OO#.? ? ???.OO#.? rocks...1k

---------------------------------------------------------------------------?


From garg.anchal at gmail.com  Tue Jun 24 19:49:49 2014
From: garg.anchal at gmail.com (Anchal)
Date: Tue, 24 Jun 2014 23:19:49 +0530
Subject: [R] Query
Message-ID: <CAEvOZqL1=Q4b8QPN6=mANX5x_v0uYwbVoAcUs7moJq5g0JE1MQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140624/33a400b3/attachment.pl>

From dcarlson at tamu.edu  Tue Jun 24 20:18:47 2014
From: dcarlson at tamu.edu (David L Carlson)
Date: Tue, 24 Jun 2014 18:18:47 +0000
Subject: [R] Sample all possible contingency tables both margin fixed
In-Reply-To: <CAP01uRnFV_51SnkrZFL8T3qpP7X4t5w=Yrf_c3mXYy8+BVZKkA@mail.gmail.com>
References: <87B9892C-44DD-41B6-B2EE-50092529794E@gmail.com>
	<CAP01uRnFV_51SnkrZFL8T3qpP7X4t5w=Yrf_c3mXYy8+BVZKkA@mail.gmail.com>
Message-ID: <53BF8FB63FAF2E4A9455EF1EE94DA726F79953@mb02.ads.tamu.edu>

Since a 2x2 table with fixed row and column margins has only one degree of freedom, it is pretty easy to enumerate them:

   A    B  
A  a    c    M[3]
B  b    d    M[4]
   M[1] M[2]   N

Create a vector of the margins:
M <- c(a+b, c+d, a+c, b+d)

The number of possible tables is min(M[c(1, 3)])+1 since a cannot be larger than the first column margin or the first row margin. The +1 recognizes that a can be 0.

Given any vector M of marginal values, the 2x2 tables are as follows:

M <- c(8, 9, 9, 8) # For example
M[1]+M[2]==M[3]+M[4] # Check to make sure these are valid margins
TRUE
all.2x2s <- t(sapply(0:min(M[c(1,3)]), function(i) c(a=i, b=M[1] - i,
            c=M[3] - i, d=M[4] - M[1] + i)))
all.2x2s
      a b c d
 [1,] 0 8 9 0
 [2,] 1 7 8 1
 [3,] 2 6 7 2
 [4,] 3 5 6 3
 [5,] 4 4 5 4
 [6,] 5 3 4 5
 [7,] 6 2 3 6
 [8,] 7 1 2 7
 [9,] 8 0 1 8

-------------------------------------
David L Carlson
Department of Anthropology
Texas A&M University
College Station, TX 77840-4352

----Original Message-----
From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On Behalf Of Gabor Grothendieck
Sent: Tuesday, June 24, 2014 12:07 PM
To: Tahira Jamil
Cc: r-help at r-project.org
Subject: Re: [R] Sample all possible contingency tables both margin fixed

On Tue, Jun 24, 2014 at 10:41 AM, Tahira Jamil <tahjamil at gmail.com> wrote:
> Hi,
>
> I am interested in generating all possible contingency table (2 by 2) with fixed row margins and column margins. Can anyone help me.
>

If the reason you want this is to sample them then r2dtable can do
that directly.

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From sarah.goslee at gmail.com  Tue Jun 24 20:26:51 2014
From: sarah.goslee at gmail.com (Sarah Goslee)
Date: Tue, 24 Jun 2014 14:26:51 -0400
Subject: [R] Query
In-Reply-To: <CAEvOZqL1=Q4b8QPN6=mANX5x_v0uYwbVoAcUs7moJq5g0JE1MQ@mail.gmail.com>
References: <CAEvOZqL1=Q4b8QPN6=mANX5x_v0uYwbVoAcUs7moJq5g0JE1MQ@mail.gmail.com>
Message-ID: <CAM_vju=HkGTG3s8hyfMc0A4__aEop7SckH+6Bf3BzZ9W6kqX3g@mail.gmail.com>

Have you installed it, perhaps with

install.packages("ltm")

???

If you have, and it installed correctly, then we'll need the
information on your system requested in the posting guide linked at
the end of this message.


Sarah

On Tue, Jun 24, 2014 at 1:49 PM, Anchal <garg.anchal at gmail.com> wrote:
> Dear Sir,
>
> I wish to use the ltm package but it gives the following error
>
> Error in library("ltm") : there is no package called ?ltm?
>
> How to resolve this issue in R
>
> Looking forward to your reply.
>
> Thanks & Regards
> anchal



-- 
Sarah Goslee
http://www.functionaldiversity.org


From michael.gang.peng at gmail.com  Tue Jun 24 20:32:03 2014
From: michael.gang.peng at gmail.com (Michael Peng)
Date: Tue, 24 Jun 2014 13:32:03 -0500
Subject: [R] Sample all possible contingency tables both margin fixed
In-Reply-To: <53BF8FB63FAF2E4A9455EF1EE94DA726F79953@mb02.ads.tamu.edu>
References: <87B9892C-44DD-41B6-B2EE-50092529794E@gmail.com>
	<CAP01uRnFV_51SnkrZFL8T3qpP7X4t5w=Yrf_c3mXYy8+BVZKkA@mail.gmail.com>
	<53BF8FB63FAF2E4A9455EF1EE94DA726F79953@mb02.ads.tamu.edu>
Message-ID: <CAMjJGR0SP29TAiqJgv+1qcDZPQ2BLyJA04doAYsbGjyU3BpS_g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140624/124a4d1c/attachment.pl>

From istazahn at gmail.com  Tue Jun 24 20:32:27 2014
From: istazahn at gmail.com (Ista Zahn)
Date: Tue, 24 Jun 2014 14:32:27 -0400
Subject: [R] converting a list with named member to a vector maintaining
 original names
In-Reply-To: <COL129-W6F0FB7A0991A48620B0D1CB1E0@phx.gbl>
References: <COL129-W6F0FB7A0991A48620B0D1CB1E0@phx.gbl>
Message-ID: <CA+vqiLEGwD+9FC-FbDSp0GrXqYKrJ407mqTk1gOmgEHc6jfyOA@mail.gmail.com>

How about

x <- unlist(test)
(names(x) <- rep(names(test), times = sapply(test, length)))

?

See also unlist2 from
http://www.bioconductor.org/packages/release/bioc/html/AnnotationDbi.html

Best,
Ista

On Tue, Jun 24, 2014 at 12:56 PM, C Lin <baccts at hotmail.com> wrote:
> Dear R users,
>
> I have a list that I'd like to convert to a vector while preserving the original names.
> For example:
>
> test <- list(ABCC2=37280,ABCC5=c(12268,13308));
>
> If I do unlist, it automatically renamed the ABCC5 to ABCC51 and ABCC52
>> unlist(test)
>  ABCC2 ABCC51 ABCC52
>  37280  12268  13308
>
> How do I retained the original names so I'll get:
> ABCC2 37280
> ABCC5 12268
> ABCC5 13308
>
> Thank you in advance for your help.
>
> Lin
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From dcarlson at tamu.edu  Tue Jun 24 21:07:24 2014
From: dcarlson at tamu.edu (David L Carlson)
Date: Tue, 24 Jun 2014 19:07:24 +0000
Subject: [R] Sample all possible contingency tables both margin fixed
In-Reply-To: <CAMjJGR0SP29TAiqJgv+1qcDZPQ2BLyJA04doAYsbGjyU3BpS_g@mail.gmail.com>
References: <87B9892C-44DD-41B6-B2EE-50092529794E@gmail.com>
	<CAP01uRnFV_51SnkrZFL8T3qpP7X4t5w=Yrf_c3mXYy8+BVZKkA@mail.gmail.com>
	<53BF8FB63FAF2E4A9455EF1EE94DA726F79953@mb02.ads.tamu.edu>
	<CAMjJGR0SP29TAiqJgv+1qcDZPQ2BLyJA04doAYsbGjyU3BpS_g@mail.gmail.com>
Message-ID: <53BF8FB63FAF2E4A9455EF1EE94DA726F799C8@mb02.ads.tamu.edu>

Michael is correct. I answered too quickly. This will correct the original suggestion:

> M <- c(15, 5, 15, 5) # New example where M[2] and M[4] are smaller
> M[1]+M[2] == M[3]+M[4]
[1] TRUE
> upper <- min(M[c(1,3)])
> lower <- 0
> if (min(M) < upper) lower <- upper - min(M)
> all.2x2s <- t(sapply(lower:upper, function(i) c(a=i, b=M[1] - i, c=M[3] - i,
+ d=M[4] - M[1] + i)))
> all.2x2s
      a b c d
[1,] 10 5 5 0
[2,] 11 4 4 1
[3,] 12 3 3 2
[4,] 13 2 2 3
[5,] 14 1 1 4
[6,] 15 0 0 5

David C

From: Michael Peng [mailto:michael.gang.peng at gmail.com] 
Sent: Tuesday, June 24, 2014 1:32 PM
To: David L Carlson
Cc: Gabor Grothendieck; Tahira Jamil; r-help at r-project.org
Subject: Re: [R] Sample all possible contingency tables both margin fixed

David gave a great solution. I think it is better to start from 0 to min(M) instead of from min(M[c(1,3)]) to avoid negative values in the table. If the minimum is in M[1] or M[3], a = 1:min(M). Otherwise, d=1:min(M). 
Best,
Gang

2014-06-24 13:18 GMT-05:00 David L Carlson <dcarlson at tamu.edu>:
Since a 2x2 table with fixed row and column margins has only one degree of freedom, it is pretty easy to enumerate them:

? ?A ? ?B
A ?a ? ?c ? ?M[3]
B ?b ? ?d ? ?M[4]
? ?M[1] M[2] ? N

Create a vector of the margins:
M <- c(a+b, c+d, a+c, b+d)

The number of possible tables is min(M[c(1, 3)])+1 since a cannot be larger than the first column margin or the first row margin. The +1 recognizes that a can be 0.

Given any vector M of marginal values, the 2x2 tables are as follows:

M <- c(8, 9, 9, 8) # For example
M[1]+M[2]==M[3]+M[4] # Check to make sure these are valid margins
TRUE
all.2x2s <- t(sapply(0:min(M[c(1,3)]), function(i) c(a=i, b=M[1] - i,
? ? ? ? ? ? c=M[3] - i, d=M[4] - M[1] + i)))
all.2x2s
? ? ? a b c d
?[1,] 0 8 9 0
?[2,] 1 7 8 1
?[3,] 2 6 7 2
?[4,] 3 5 6 3
?[5,] 4 4 5 4
?[6,] 5 3 4 5
?[7,] 6 2 3 6
?[8,] 7 1 2 7
?[9,] 8 0 1 8

-------------------------------------
David L Carlson
Department of Anthropology
Texas A&M University
College Station, TX 77840-4352

----Original Message-----
From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On Behalf Of Gabor Grothendieck
Sent: Tuesday, June 24, 2014 12:07 PM
To: Tahira Jamil
Cc: r-help at r-project.org
Subject: Re: [R] Sample all possible contingency tables both margin fixed

On Tue, Jun 24, 2014 at 10:41 AM, Tahira Jamil <tahjamil at gmail.com> wrote:
> Hi,
>
> I am interested in generating all possible contingency table (2 by 2) with fixed row margins and column margins. Can anyone help me.
>

If the reason you want this is to sample them then r2dtable can do
that directly.

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From dwinsemius at comcast.net  Tue Jun 24 21:48:25 2014
From: dwinsemius at comcast.net (David Winsemius)
Date: Tue, 24 Jun 2014 12:48:25 -0700
Subject: [R] Fortune nomination;  was Re:  (no subject)
In-Reply-To: <alpine.BSF.2.00.1406240726540.1190@pedal.dcn.davis.ca.us>
References: <CAMU6xLedPDyzeZ09R4c9wcoKZL8NQAS7F9CbVYsLZmXOBzya8g@mail.gmail.com>
	<alpine.BSF.2.00.1406240726540.1190@pedal.dcn.davis.ca.us>
Message-ID: <071FF44C-FFC5-4554-9973-CB199387C78A@comcast.net>


On Jun 24, 2014, at 7:52 AM, Jeff Newmiller wrote:

Jeff Newmiller's rhelp/ggplot strategy checklist:

> Reproducibility == good (except for mixing in invalid code and failing to set RNG seed)
> HTML email == bad
> Missing subject == bad
> Using matrices with ggplot == pushing a rope
> Using for loops to build a ggplot == missing the point
> Using wide-form data with ggplot == pushing a rope




-- 
Best;
David.

> 
> 
> On Tue, 24 Jun 2014, Zayd Farah wrote:
> 
>> I hope the following script is reproducible enough to highlight my issue,
>> which is to automatically (in this case by loop, but it does not
>> necessarily have to be by a loop) add geom_line layers for each column of
>> mydata to the ggplot variable p1. for some reason doing this only works by
>> manually adding each layer:
>> 
>> library(ggplot2)
>> library(gtable)
>> 
>> 
>> #creates set of reproducible data
>> xaxis<-rnorm(30)+10
>> xaxis
>> mydata<-replicate(9, rnorm(30)+20)
>> 
>> #creates a matrix of colors to identify each line on the final plot of
>> #each column of mydata
>> 
>> colour_scheme<-palette(rainbow(dim(mydata)[2]))
>> 
>> # Main scatterplot
>> p1 <- ggplot(NULL)
>> 
>> #ideal code that would create a geom_line layer for each column of mydata
>> vs. xaxis
>> for (i in 1:dim(mydata)[2])
>>   {
>>     p1=p1+geom_line(aes(xaxis,mydata[,i]),colour=colour_scheme[i])
>>   }
>> p1
>> 
>> #run the following code to see what it SHOULD look like:
>> p1 <- ggplot(NULL)
>> p1=p1+geom_line(aes(xaxis,mydata[,1]),colour=colour_scheme[1])
>> p1=p1+geom_line(aes(xaxis,mydata[,2]),colour=colour_scheme[2])
>> p1=p1+geom_line(aes(xaxis,mydata[,3]),colour=colour_scheme[3])
>> p1=p1+geom_line(aes(xaxis,mydata[,4]),colour=colour_scheme[4])
>> p1
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>> 
> 
> ---------------------------------------------------------------------------
> Jeff Newmiller                        The     .....       .....  Go Live...
> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
>                                      Live:   OO#.. Dead: OO#..  Playing
> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
> /Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

David Winsemius
Alameda, CA, USA


From baccts at hotmail.com  Tue Jun 24 22:21:47 2014
From: baccts at hotmail.com (C Lin)
Date: Tue, 24 Jun 2014 16:21:47 -0400
Subject: [R] converting a list with named member to a vector maintaining
 original names
In-Reply-To: <CA+vqiLEGwD+9FC-FbDSp0GrXqYKrJ407mqTk1gOmgEHc6jfyOA@mail.gmail.com>
References: <COL129-W6F0FB7A0991A48620B0D1CB1E0@phx.gbl>,
	<CA+vqiLEGwD+9FC-FbDSp0GrXqYKrJ407mqTk1gOmgEHc6jfyOA@mail.gmail.com>
Message-ID: <COL129-W580D8E85CFAE571CDFF47FCB1E0@phx.gbl>

You're amazing. Thanks so much! That's exactly what I am looking for.

----------------------------------------
> From: istazahn at gmail.com
> Date: Tue, 24 Jun 2014 14:32:27 -0400
> Subject: Re: [R] converting a list with named member to a vector maintaining original names
> To: baccts at hotmail.com
> CC: r-help at r-project.org
>
> How about
>
> x <- unlist(test)
> (names(x) <- rep(names(test), times = sapply(test, length)))
>
> ?
>
> See also unlist2 from
> http://www.bioconductor.org/packages/release/bioc/html/AnnotationDbi.html
>
> Best,
> Ista
>
> On Tue, Jun 24, 2014 at 12:56 PM, C Lin <baccts at hotmail.com> wrote:
>> Dear R users,
>>
>> I have a list that I'd like to convert to a vector while preserving the original names.
>> For example:
>>
>> test <- list(ABCC2=37280,ABCC5=c(12268,13308));
>>
>> If I do unlist, it automatically renamed the ABCC5 to ABCC51 and ABCC52
>>> unlist(test)
>> ABCC2 ABCC51 ABCC52
>> 37280 12268 13308
>>
>> How do I retained the original names so I'll get:
>> ABCC2 37280
>> ABCC5 12268
>> ABCC5 13308
>>
>> Thank you in advance for your help.
>>
>> Lin
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
 		 	   		  

From david.stevens at usu.edu  Tue Jun 24 22:35:30 2014
From: david.stevens at usu.edu (David Stevens)
Date: Tue, 24 Jun 2014 14:35:30 -0600
Subject: [R] saving a 'get' object in R
In-Reply-To: <CAFEqCdwQYGNi24sK4-7yPPsVAnwNZVdMkdV1evjxBBmyiOVcUw@mail.gmail.com>
References: <70061386623678@web1g.yandex.ru>	<5E1B812FAC2C4A49B3D99593B5A521910D5D548C@PRDEXMBX-08.the-lab.llnl.gov>	<CACk-te036JucUSDoqO=Yb7BfZN=twAq6G-ex-b=cWKu_gTQFOQ@mail.gmail.com>
	<CAFEqCdwQYGNi24sK4-7yPPsVAnwNZVdMkdV1evjxBBmyiOVcUw@mail.gmail.com>
Message-ID: <53A9E112.1030709@usu.edu>

R community,

Apologies if this has been answered. The concept I'm looking for is to 
save() an object retrieved using get() for an object
that resulted from using assign. Something like

save(get(foo),file=paste(foo,'rData',sep=''))

where assign(foo,obj) creates an object named foo with the contents of 
obj assigned. For example, if

x <- data.frame(v1=c(1,2,3,4),v2=c('1','2','3','4'))
foo = 'my.x'
assign(foo,x)
# (... then modify foo as needed)
save(get(foo),file=paste(foo,'.rData',sep=''))

# though this generates " in save(get(foo), file = paste(foo, ".rData", 
sep = "")) :
object ?get(foo)? not found", whereas

get(foo)

at the command prompt yields the contents of my.x

There's a concept I'm missing here. Can anyone help?

Regards

David Stevens

-- 
David K Stevens, P.E., Ph.D.
Professor and Head, Environmental Engineering
Civil and Environmental Engineering
Utah Water Research Laboratory
8200 Old Main Hill
Logan, UT  84322-8200
435 797 3229 - voice
435 797 1363 - fax
david.stevens at usu.edu


From michael.gang.peng at gmail.com  Tue Jun 24 22:43:22 2014
From: michael.gang.peng at gmail.com (Michael Peng)
Date: Tue, 24 Jun 2014 15:43:22 -0500
Subject: [R] saving a 'get' object in R
In-Reply-To: <53A9E112.1030709@usu.edu>
References: <70061386623678@web1g.yandex.ru>
	<5E1B812FAC2C4A49B3D99593B5A521910D5D548C@PRDEXMBX-08.the-lab.llnl.gov>
	<CACk-te036JucUSDoqO=Yb7BfZN=twAq6G-ex-b=cWKu_gTQFOQ@mail.gmail.com>
	<CAFEqCdwQYGNi24sK4-7yPPsVAnwNZVdMkdV1evjxBBmyiOVcUw@mail.gmail.com>
	<53A9E112.1030709@usu.edu>
Message-ID: <CAMjJGR1o6y0yCPJLAh-6t8D1N4VxU5AXHZfHq6BfWPN1-wqwJA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140624/271dd0a2/attachment.pl>

From 538280 at gmail.com  Tue Jun 24 22:45:39 2014
From: 538280 at gmail.com (Greg Snow)
Date: Tue, 24 Jun 2014 14:45:39 -0600
Subject: [R] saving a 'get' object in R
In-Reply-To: <53A9E112.1030709@usu.edu>
References: <70061386623678@web1g.yandex.ru>
	<5E1B812FAC2C4A49B3D99593B5A521910D5D548C@PRDEXMBX-08.the-lab.llnl.gov>
	<CACk-te036JucUSDoqO=Yb7BfZN=twAq6G-ex-b=cWKu_gTQFOQ@mail.gmail.com>
	<CAFEqCdwQYGNi24sK4-7yPPsVAnwNZVdMkdV1evjxBBmyiOVcUw@mail.gmail.com>
	<53A9E112.1030709@usu.edu>
Message-ID: <CAFEqCdxYspF9WdWr+O+HfqaBB3UdBHFxEVsHXzMLRL-jBFBDmA@mail.gmail.com>

I think that you are looking for the `list` argument in `save`.

save( list=foo, file=paste0(foo, '.Rdata') )

In general it is best to avoid using the assign function (and get when
possible).  Usually there are better alternatives.

On Tue, Jun 24, 2014 at 2:35 PM, David Stevens <david.stevens at usu.edu> wrote:
> R community,
>
> Apologies if this has been answered. The concept I'm looking for is to
> save() an object retrieved using get() for an object
> that resulted from using assign. Something like
>
> save(get(foo),file=paste(foo,'rData',sep=''))
>
> where assign(foo,obj) creates an object named foo with the contents of obj
> assigned. For example, if
>
> x <- data.frame(v1=c(1,2,3,4),v2=c('1','2','3','4'))
> foo = 'my.x'
> assign(foo,x)
> # (... then modify foo as needed)
> save(get(foo),file=paste(foo,'.rData',sep=''))
>
> # though this generates " in save(get(foo), file = paste(foo, ".rData", sep
> = "")) :
> object ?get(foo)? not found", whereas
>
> get(foo)
>
> at the command prompt yields the contents of my.x
>
> There's a concept I'm missing here. Can anyone help?
>
> Regards
>
> David Stevens
>
> --
> David K Stevens, P.E., Ph.D.
> Professor and Head, Environmental Engineering
> Civil and Environmental Engineering
> Utah Water Research Laboratory
> 8200 Old Main Hill
> Logan, UT  84322-8200
> 435 797 3229 - voice
> 435 797 1363 - fax
> david.stevens at usu.edu
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com


From bchalfant at yahoo.com  Tue Jun 24 22:30:37 2014
From: bchalfant at yahoo.com (Brian Chalfant)
Date: Tue, 24 Jun 2014 13:30:37 -0700
Subject: [R] force dialog window to front?
In-Reply-To: <1403616240.4903.YahooMailNeo@web142304.mail.bf1.yahoo.com>
References: <1403616240.4903.YahooMailNeo@web142304.mail.bf1.yahoo.com>
Message-ID: <1403641837.94582.YahooMailNeo@web142302.mail.bf1.yahoo.com>

Howdy -

I'm wondering if there is a way to force an R dialog window to "the front" in a Windows OS.? In particular, I defined a .Last function in my Rprofile.site file that consists only of the updateR() function so as to check for R updates on close.? However, the dialog window for this pops up behind the RStudio window, which I don't like.

Any advice would be much appreciated.

Thanks -
Brian


Brian Alexander Chalfant
Research Assistant & PhD student
University of Pittsburgh
www.pitt.edu/~bac84
bac84 at pitt.edu
724.984.7758


From j.bayat194 at gmail.com  Tue Jun 24 20:26:57 2014
From: j.bayat194 at gmail.com (javad bayat)
Date: Tue, 24 Jun 2014 22:56:57 +0430
Subject: [R] Biplot interpretation
Message-ID: <CANTxAmLFj62xLQpe0XGwdXBgcj1yW2em8ZYdSX15Y0EK7PW0XQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140624/6a8e26fd/attachment.pl>

From hb at biostat.ucsf.edu  Tue Jun 24 22:50:08 2014
From: hb at biostat.ucsf.edu (Henrik Bengtsson)
Date: Tue, 24 Jun 2014 13:50:08 -0700
Subject: [R] saving a 'get' object in R
In-Reply-To: <CAFEqCdxYspF9WdWr+O+HfqaBB3UdBHFxEVsHXzMLRL-jBFBDmA@mail.gmail.com>
References: <70061386623678@web1g.yandex.ru>
	<5E1B812FAC2C4A49B3D99593B5A521910D5D548C@PRDEXMBX-08.the-lab.llnl.gov>
	<CACk-te036JucUSDoqO=Yb7BfZN=twAq6G-ex-b=cWKu_gTQFOQ@mail.gmail.com>
	<CAFEqCdwQYGNi24sK4-7yPPsVAnwNZVdMkdV1evjxBBmyiOVcUw@mail.gmail.com>
	<53A9E112.1030709@usu.edu>
	<CAFEqCdxYspF9WdWr+O+HfqaBB3UdBHFxEVsHXzMLRL-jBFBDmA@mail.gmail.com>
Message-ID: <CAFDcVCSOLf1TjWh0+YWv0ET=6U=PuMkhgctz=6Q7DMgTdfo6pw@mail.gmail.com>

I recommend to use saveRDS()/readRDS() instead.  More convenient and
avoids the risk that load() has of overwriting existing variables with
the same name.

/Henrik

On Tue, Jun 24, 2014 at 1:45 PM, Greg Snow <538280 at gmail.com> wrote:
> I think that you are looking for the `list` argument in `save`.
>
> save( list=foo, file=paste0(foo, '.Rdata') )
>
> In general it is best to avoid using the assign function (and get when
> possible).  Usually there are better alternatives.
>
> On Tue, Jun 24, 2014 at 2:35 PM, David Stevens <david.stevens at usu.edu> wrote:
>> R community,
>>
>> Apologies if this has been answered. The concept I'm looking for is to
>> save() an object retrieved using get() for an object
>> that resulted from using assign. Something like
>>
>> save(get(foo),file=paste(foo,'rData',sep=''))
>>
>> where assign(foo,obj) creates an object named foo with the contents of obj
>> assigned. For example, if
>>
>> x <- data.frame(v1=c(1,2,3,4),v2=c('1','2','3','4'))
>> foo = 'my.x'
>> assign(foo,x)
>> # (... then modify foo as needed)
>> save(get(foo),file=paste(foo,'.rData',sep=''))
>>
>> # though this generates " in save(get(foo), file = paste(foo, ".rData", sep
>> = "")) :
>> object ?get(foo)? not found", whereas
>>
>> get(foo)
>>
>> at the command prompt yields the contents of my.x
>>
>> There's a concept I'm missing here. Can anyone help?
>>
>> Regards
>>
>> David Stevens
>>
>> --
>> David K Stevens, P.E., Ph.D.
>> Professor and Head, Environmental Engineering
>> Civil and Environmental Engineering
>> Utah Water Research Laboratory
>> 8200 Old Main Hill
>> Logan, UT  84322-8200
>> 435 797 3229 - voice
>> 435 797 1363 - fax
>> david.stevens at usu.edu
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>
>
> --
> Gregory (Greg) L. Snow Ph.D.
> 538280 at gmail.com
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From tahjamil at gmail.com  Tue Jun 24 22:52:13 2014
From: tahjamil at gmail.com (tahira jamil)
Date: Tue, 24 Jun 2014 22:52:13 +0200
Subject: [R] Sample all possible contingency tables both margin fixed
In-Reply-To: <53BF8FB63FAF2E4A9455EF1EE94DA726F799C8@mb02.ads.tamu.edu>
References: <87B9892C-44DD-41B6-B2EE-50092529794E@gmail.com>
	<CAP01uRnFV_51SnkrZFL8T3qpP7X4t5w=Yrf_c3mXYy8+BVZKkA@mail.gmail.com>
	<53BF8FB63FAF2E4A9455EF1EE94DA726F79953@mb02.ads.tamu.edu>
	<CAMjJGR0SP29TAiqJgv+1qcDZPQ2BLyJA04doAYsbGjyU3BpS_g@mail.gmail.com>
	<53BF8FB63FAF2E4A9455EF1EE94DA726F799C8@mb02.ads.tamu.edu>
Message-ID: <CA+QKzeTfjMQcohkA8OriA-HTD241q8+tenPPjOVrUwb=OSb6vA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140624/c45c8343/attachment.pl>

From david.stevens at usu.edu  Tue Jun 24 22:57:28 2014
From: david.stevens at usu.edu (David Stevens)
Date: Tue, 24 Jun 2014 14:57:28 -0600
Subject: [R] saving a 'get' object in R
In-Reply-To: <CAFDcVCSOLf1TjWh0+YWv0ET=6U=PuMkhgctz=6Q7DMgTdfo6pw@mail.gmail.com>
References: <70061386623678@web1g.yandex.ru>
	<5E1B812FAC2C4A49B3D99593B5A521910D5D548C@PRDEXMBX-08.the-lab.llnl.gov>
	<CACk-te036JucUSDoqO=Yb7BfZN=twAq6G-ex-b=cWKu_gTQFOQ@mail.gmail.com>
	<CAFEqCdwQYGNi24sK4-7yPPsVAnwNZVdMkdV1evjxBBmyiOVcUw@mail.gmail.com>
	<53A9E112.1030709@usu.edu>
	<CAFEqCdxYspF9WdWr+O+HfqaBB3UdBHFxEVsHXzMLRL-jBFBDmA@mail.gmail.com>
	<CAFDcVCSOLf1TjWh0+YWv0ET=6U=PuMkhgctz=6Q7DMgTdfo6pw@mail.gmail.com>
Message-ID: <53A9E638.5010008@usu.edu>

Thanks to all for the replies. I tried all three and they work great. I 
was misinterpreting the list = parameter in save(...) and I get your 
point about overwriting existing objects.  I've heard about not using 
assign/get before. Can anyone point me to why and what alternatives 
there are?

Regards

David

On 6/24/2014 2:50 PM, Henrik Bengtsson wrote:
> I recommend to use saveRDS()/readRDS() instead.  More convenient and
> avoids the risk that load() has of overwriting existing variables with
> the same name.
>
> /Henrik
>
> On Tue, Jun 24, 2014 at 1:45 PM, Greg Snow <538280 at gmail.com> wrote:
>> I think that you are looking for the `list` argument in `save`.
>>
>> save( list=foo, file=paste0(foo, '.Rdata') )
>>
>> In general it is best to avoid using the assign function (and get when
>> possible).  Usually there are better alternatives.
>>
>> On Tue, Jun 24, 2014 at 2:35 PM, David Stevens <david.stevens at usu.edu> wrote:
>>> R community,
>>>
>>> Apologies if this has been answered. The concept I'm looking for is to
>>> save() an object retrieved using get() for an object
>>> that resulted from using assign. Something like
>>>
>>> save(get(foo),file=paste(foo,'rData',sep=''))
>>>
>>> where assign(foo,obj) creates an object named foo with the contents of obj
>>> assigned. For example, if
>>>
>>> x <- data.frame(v1=c(1,2,3,4),v2=c('1','2','3','4'))
>>> foo = 'my.x'
>>> assign(foo,x)
>>> # (... then modify foo as needed)
>>> save(get(foo),file=paste(foo,'.rData',sep=''))
>>>
>>> # though this generates " in save(get(foo), file = paste(foo, ".rData", sep
>>> = "")) :
>>> object ?get(foo)? not found", whereas
>>>
>>> get(foo)
>>>
>>> at the command prompt yields the contents of my.x
>>>
>>> There's a concept I'm missing here. Can anyone help?
>>>
>>> Regards
>>>
>>> David Stevens
>>>
>>> --
>>> David K Stevens, P.E., Ph.D.
>>> Professor and Head, Environmental Engineering
>>> Civil and Environmental Engineering
>>> Utah Water Research Laboratory
>>> 8200 Old Main Hill
>>> Logan, UT  84322-8200
>>> 435 797 3229 - voice
>>> 435 797 1363 - fax
>>> david.stevens at usu.edu
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>>
>> --
>> Gregory (Greg) L. Snow Ph.D.
>> 538280 at gmail.com
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.

-- 
David K Stevens, P.E., Ph.D.
Professor and Head, Environmental Engineering
Civil and Environmental Engineering
Utah Water Research Laboratory
8200 Old Main Hill
Logan, UT  84322-8200
435 797 3229 - voice
435 797 1363 - fax
david.stevens at usu.edu


From gunter.berton at gene.com  Tue Jun 24 23:43:14 2014
From: gunter.berton at gene.com (Bert Gunter)
Date: Tue, 24 Jun 2014 14:43:14 -0700
Subject: [R] saving a 'get' object in R
In-Reply-To: <53A9E638.5010008@usu.edu>
References: <70061386623678@web1g.yandex.ru>
	<5E1B812FAC2C4A49B3D99593B5A521910D5D548C@PRDEXMBX-08.the-lab.llnl.gov>
	<CACk-te036JucUSDoqO=Yb7BfZN=twAq6G-ex-b=cWKu_gTQFOQ@mail.gmail.com>
	<CAFEqCdwQYGNi24sK4-7yPPsVAnwNZVdMkdV1evjxBBmyiOVcUw@mail.gmail.com>
	<53A9E112.1030709@usu.edu>
	<CAFEqCdxYspF9WdWr+O+HfqaBB3UdBHFxEVsHXzMLRL-jBFBDmA@mail.gmail.com>
	<CAFDcVCSOLf1TjWh0+YWv0ET=6U=PuMkhgctz=6Q7DMgTdfo6pw@mail.gmail.com>
	<53A9E638.5010008@usu.edu>
Message-ID: <CACk-te0wwWrd7FD0O94m677CL5WaFhMJMqmYZsZMoX3jOAdaNw@mail.gmail.com>

Have you read "An Introduction to R" (ships with R) or other online R
tutorial (there are many good ones).  Looks to me like you haven't
.... these are pretty basic R basics.

But maybe I misinterpret...

Cheers,
Bert

Bert Gunter
Genentech Nonclinical Biostatistics
(650) 467-7374

"Data is not information. Information is not knowledge. And knowledge
is certainly not wisdom."
Clifford Stoll




On Tue, Jun 24, 2014 at 1:57 PM, David Stevens <david.stevens at usu.edu> wrote:
> Thanks to all for the replies. I tried all three and they work great. I was
> misinterpreting the list = parameter in save(...) and I get your point about
> overwriting existing objects.  I've heard about not using assign/get before.
> Can anyone point me to why and what alternatives there are?
>
> Regards
>
> David
>
> On 6/24/2014 2:50 PM, Henrik Bengtsson wrote:
>>
>> I recommend to use saveRDS()/readRDS() instead.  More convenient and
>> avoids the risk that load() has of overwriting existing variables with
>> the same name.
>>
>> /Henrik
>>
>> On Tue, Jun 24, 2014 at 1:45 PM, Greg Snow <538280 at gmail.com> wrote:
>>>
>>> I think that you are looking for the `list` argument in `save`.
>>>
>>> save( list=foo, file=paste0(foo, '.Rdata') )
>>>
>>> In general it is best to avoid using the assign function (and get when
>>> possible).  Usually there are better alternatives.
>>>
>>> On Tue, Jun 24, 2014 at 2:35 PM, David Stevens <david.stevens at usu.edu>
>>> wrote:
>>>>
>>>> R community,
>>>>
>>>> Apologies if this has been answered. The concept I'm looking for is to
>>>> save() an object retrieved using get() for an object
>>>> that resulted from using assign. Something like
>>>>
>>>> save(get(foo),file=paste(foo,'rData',sep=''))
>>>>
>>>> where assign(foo,obj) creates an object named foo with the contents of
>>>> obj
>>>> assigned. For example, if
>>>>
>>>> x <- data.frame(v1=c(1,2,3,4),v2=c('1','2','3','4'))
>>>> foo = 'my.x'
>>>> assign(foo,x)
>>>> # (... then modify foo as needed)
>>>> save(get(foo),file=paste(foo,'.rData',sep=''))
>>>>
>>>> # though this generates " in save(get(foo), file = paste(foo, ".rData",
>>>> sep
>>>> = "")) :
>>>> object ?get(foo)? not found", whereas
>>>>
>>>> get(foo)
>>>>
>>>> at the command prompt yields the contents of my.x
>>>>
>>>> There's a concept I'm missing here. Can anyone help?
>>>>
>>>> Regards
>>>>
>>>> David Stevens
>>>>
>>>> --
>>>> David K Stevens, P.E., Ph.D.
>>>> Professor and Head, Environmental Engineering
>>>> Civil and Environmental Engineering
>>>> Utah Water Research Laboratory
>>>> 8200 Old Main Hill
>>>> Logan, UT  84322-8200
>>>> 435 797 3229 - voice
>>>> 435 797 1363 - fax
>>>> david.stevens at usu.edu
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>>
>>>
>>> --
>>> Gregory (Greg) L. Snow Ph.D.
>>> 538280 at gmail.com
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>
>
> --
> David K Stevens, P.E., Ph.D.
> Professor and Head, Environmental Engineering
> Civil and Environmental Engineering
> Utah Water Research Laboratory
> 8200 Old Main Hill
> Logan, UT  84322-8200
> 435 797 3229 - voice
> 435 797 1363 - fax
> david.stevens at usu.edu
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From 538280 at gmail.com  Wed Jun 25 00:00:35 2014
From: 538280 at gmail.com (Greg Snow)
Date: Tue, 24 Jun 2014 16:00:35 -0600
Subject: [R] saving a 'get' object in R
In-Reply-To: <53A9E638.5010008@usu.edu>
References: <70061386623678@web1g.yandex.ru>
	<5E1B812FAC2C4A49B3D99593B5A521910D5D548C@PRDEXMBX-08.the-lab.llnl.gov>
	<CACk-te036JucUSDoqO=Yb7BfZN=twAq6G-ex-b=cWKu_gTQFOQ@mail.gmail.com>
	<CAFEqCdwQYGNi24sK4-7yPPsVAnwNZVdMkdV1evjxBBmyiOVcUw@mail.gmail.com>
	<53A9E112.1030709@usu.edu>
	<CAFEqCdxYspF9WdWr+O+HfqaBB3UdBHFxEVsHXzMLRL-jBFBDmA@mail.gmail.com>
	<CAFDcVCSOLf1TjWh0+YWv0ET=6U=PuMkhgctz=6Q7DMgTdfo6pw@mail.gmail.com>
	<53A9E638.5010008@usu.edu>
Message-ID: <CAFEqCdyuQ1fTq0Fa6XQnsmb5Esyn9zGh_zAFqzhOm7MoVPOCHQ@mail.gmail.com>

The main reason to avoid assign/get is that there are better ways.
You can use a list or environment more directly without using
assign/get.  Also the main reason to use assign/get is to work with
global variables which are frowned on in general programming (and
prone to hard to find bugs).

Consider the following code snippet:

x <- 1:10
functionThatUsesAssign(x)

what is the value of x after running this code?  If you use global
variables then the answer is "I don't know", and if x was something
that took several hours to compute and I just accidentally overwrote
it, then I am probably not happy.

Using assign often leads to the temptation to try code like:

assign( "x[5]", 25 )

which does something (no warnings, no errors) but generally not what
was being attempted.

Another common (mis)use of assign/get is to create a sequence of
variables like "data01", "data02", "data03", ...  and then do the same
thing for each of the data objects.  This is much better done by
putting all the objects into a single list, then you can easily
iterate over the list using lapply/sapply or still access the
individual pieces.  Then when it comes time to save these objects, you
only need to save the list, not all the individual objects, same for
deleting, copying, moving, etc.  And you don't have a bunch of
different objects cluttering your workspace, just a single list.

On Tue, Jun 24, 2014 at 2:57 PM, David Stevens <david.stevens at usu.edu> wrote:
> Thanks to all for the replies. I tried all three and they work great. I was
> misinterpreting the list = parameter in save(...) and I get your point about
> overwriting existing objects.  I've heard about not using assign/get before.
> Can anyone point me to why and what alternatives there are?
>
> Regards
>
> David
>
>
> On 6/24/2014 2:50 PM, Henrik Bengtsson wrote:
>>
>> I recommend to use saveRDS()/readRDS() instead.  More convenient and
>> avoids the risk that load() has of overwriting existing variables with
>> the same name.
>>
>> /Henrik
>>
>> On Tue, Jun 24, 2014 at 1:45 PM, Greg Snow <538280 at gmail.com> wrote:
>>>
>>> I think that you are looking for the `list` argument in `save`.
>>>
>>> save( list=foo, file=paste0(foo, '.Rdata') )
>>>
>>> In general it is best to avoid using the assign function (and get when
>>> possible).  Usually there are better alternatives.
>>>
>>> On Tue, Jun 24, 2014 at 2:35 PM, David Stevens <david.stevens at usu.edu>
>>> wrote:
>>>>
>>>> R community,
>>>>
>>>> Apologies if this has been answered. The concept I'm looking for is to
>>>> save() an object retrieved using get() for an object
>>>> that resulted from using assign. Something like
>>>>
>>>> save(get(foo),file=paste(foo,'rData',sep=''))
>>>>
>>>> where assign(foo,obj) creates an object named foo with the contents of
>>>> obj
>>>> assigned. For example, if
>>>>
>>>> x <- data.frame(v1=c(1,2,3,4),v2=c('1','2','3','4'))
>>>> foo = 'my.x'
>>>> assign(foo,x)
>>>> # (... then modify foo as needed)
>>>> save(get(foo),file=paste(foo,'.rData',sep=''))
>>>>
>>>> # though this generates " in save(get(foo), file = paste(foo, ".rData",
>>>> sep
>>>> = "")) :
>>>> object ?get(foo)? not found", whereas
>>>>
>>>> get(foo)
>>>>
>>>> at the command prompt yields the contents of my.x
>>>>
>>>> There's a concept I'm missing here. Can anyone help?
>>>>
>>>> Regards
>>>>
>>>> David Stevens
>>>>
>>>> --
>>>> David K Stevens, P.E., Ph.D.
>>>> Professor and Head, Environmental Engineering
>>>> Civil and Environmental Engineering
>>>> Utah Water Research Laboratory
>>>> 8200 Old Main Hill
>>>> Logan, UT  84322-8200
>>>> 435 797 3229 - voice
>>>> 435 797 1363 - fax
>>>> david.stevens at usu.edu
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>>
>>>
>>> --
>>> Gregory (Greg) L. Snow Ph.D.
>>> 538280 at gmail.com
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>
>
> --
> David K Stevens, P.E., Ph.D.
> Professor and Head, Environmental Engineering
> Civil and Environmental Engineering
> Utah Water Research Laboratory
> 8200 Old Main Hill
> Logan, UT  84322-8200
> 435 797 3229 - voice
> 435 797 1363 - fax
> david.stevens at usu.edu
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com


From jdnewmil at dcn.davis.CA.us  Wed Jun 25 03:42:59 2014
From: jdnewmil at dcn.davis.CA.us (Jeff Newmiller)
Date: Tue, 24 Jun 2014 18:42:59 -0700
Subject: [R] rfImpute
In-Reply-To: <1403623930225-4692929.post@n4.nabble.com>
References: <a42e7d400708100817v4eef5495o8b9e1c925d4720d7@mail.gmail.com>
	<39B6DDB9048D0F4DAD42CB26AAFF0AFA048C6B23@usctmx1106.merck.com>
	<1403623930225-4692929.post@n4.nabble.com>
Message-ID: <33cc7dd0-b8f9-43dc-b920-8e19271f4317@email.android.com>

Ideas:

Read the Posting Guide (http://www.R-project.org/posting-guide.html) for this mailing list (one of the gems in there warns you to not post using HTML email)

Provide a reproducible example (e.g. per [1]) that includes the library/require statements that load your packages

Consider subscribing to the mailing list, as Nabble abuses the email quoting conventions that experienced R answerers expect. If you are really into the web forum thing, consider using the StackOverflow website.

(Re-)read the help file ?rfImpute, which says that the y argument cannot have NAs.

Consider specifying an appropriate subset argument to rfImpute

Disclaimer: I have never used this function or the package (randomForest) that it comes from. These are merely ideas that you might have come upon if you were a little more methodical.

[1] http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example

---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                      Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
--------------------------------------------------------------------------- 
Sent from my phone. Please excuse my brevity.

On June 24, 2014 8:32:10 AM PDT, Julian Karch <karch at mpib-berlin.mpg.de> wrote:
>I am having the same problem
>  
>trainImp <- rfImpute(train[,!colnames(train)=="score"],train$score)
>yields
>
>Error in randomForest.default(xf, y, ntree = ntree, ..., do.trace =
>ntree, 
>:
>  NA not permitted in predictors
>
>any ideas?
>
>
>
>--
>View this message in context:
>http://r.789695.n4.nabble.com/rfImpute-tp832010p4692929.html
>Sent from the R help mailing list archive at Nabble.com.
>
>______________________________________________
>R-help at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From abhinabaroy09 at gmail.com  Wed Jun 25 07:14:51 2014
From: abhinabaroy09 at gmail.com (Abhinaba Roy)
Date: Wed, 25 Jun 2014 10:44:51 +0530
Subject: [R] Generating Patient Data
Message-ID: <CANtKHPW5WgiQkZa8ERWOAN2+dsF1EX-Je+G3AsLKyB0PtUwPXw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140625/e11e2e16/attachment.pl>

From smartpink111 at yahoo.com  Wed Jun 25 04:27:23 2014
From: smartpink111 at yahoo.com (arun)
Date: Tue, 24 Jun 2014 19:27:23 -0700
Subject: [R] converting a list with named member to a vector maintaining
	original names
In-Reply-To: <1403662800.58699.YahooMailNeo@web142606.mail.bf1.yahoo.com>
References: <COL129-W6F0FB7A0991A48620B0D1CB1E0@phx.gbl>
	<1403662800.58699.YahooMailNeo@web142606.mail.bf1.yahoo.com>
Message-ID: <1403663243.83650.YahooMailNeo@web142602.mail.bf1.yahoo.com>

To get the vector
setNames(stack(test)[,1],stack(test)[,2])
#ABCC2 ABCC5 ABCC5 
#37280 12268 13308 

#or
setNames(unlist(test),stack(test)[,2])
#ABCC2 ABCC5 ABCC5 
#37280 12268 13308 
A.K.





On , arun <smartpink111 at yahoo.com> wrote:


You could do:
stack(test)[,2:1]
#??? ind values
#1 ABCC2? 37280
#2 ABCC5? 12268
#3 ABCC5? 13308

A.K.




On Tuesday, June 24, 2014 2:09 PM, C Lin <baccts at hotmail.com> wrote:
Dear R users,

I have a list that I'd like to convert to a vector while preserving the original names.
For example:

test <- list(ABCC2=37280,ABCC5=c(12268,13308));

If I do unlist, it automatically renamed the ABCC5 to ABCC51 and ABCC52
> unlist(test)
?ABCC2 ABCC51 ABCC52?
?37280 ?12268 ?13308?

How do I retained the original names so I'll get:
ABCC2 37280
ABCC5 12268
ABCC5 13308

Thank you in advance for your help.

Lin? ??? ???? ??? ?? ??? ??? ? 
______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From zhanglun1525 at gmail.com  Wed Jun 25 04:43:25 2014
From: zhanglun1525 at gmail.com (=?GB2312?B?1cXC1w==?=)
Date: Wed, 25 Jun 2014 10:43:25 +0800
Subject: [R] Assigning document id to each document containing in the
 Document Term Matrix (R Package "tm")
Message-ID: <CAD06_6PHxSkb=w5uDfx1_sux2fmg5RUTBZnqmjNES7tMaY36Jw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140625/46b22e19/attachment.pl>

From dwinsemius at comcast.net  Wed Jun 25 08:04:19 2014
From: dwinsemius at comcast.net (David Winsemius)
Date: Tue, 24 Jun 2014 23:04:19 -0700
Subject: [R] Generating Patient Data
In-Reply-To: <CANtKHPW5WgiQkZa8ERWOAN2+dsF1EX-Je+G3AsLKyB0PtUwPXw@mail.gmail.com>
References: <CANtKHPW5WgiQkZa8ERWOAN2+dsF1EX-Je+G3AsLKyB0PtUwPXw@mail.gmail.com>
Message-ID: <00D35C5F-981E-4B9C-9012-114B14D97F7E@comcast.net>


On Jun 24, 2014, at 10:14 PM, Abhinaba Roy wrote:

> Dear R helpers,
> 
> I want to generate data for say 1000 patients (i.e., 1000 unique IDs)
> having suffered from various diseases in the past (say diseases
> A,B,C,D,E,F). The only condition imposed is that each patient should've
> suffered from *atleast* two diseases. So my data frame will have two
> columns 'ID' and 'Disease'.
> 
> I want to do a basket analysis with this data, where ID will be the
> identifier and we will establish rules based on the 'Disease' column.
> 
> How can I generate this type of data in R?
> 

Perhaps something along these lines for 20 cases:

> data.frame(patient=1:20, disease = sapply(pmin(2+rpois(20, 2), 6), function(n) paste0( sample( c('A','B','C','D','E','F'), n), collapse="+" ) )
+ )
   patient     disease
1        1         F+D
2        2     F+A+D+E
3        3     F+D+C+E
4        4     B+D+C+A
5        5     D+A+F+C
6        6       E+A+D
7        7 E+F+B+C+A+D
8        8   A+B+C+D+E
9        9     B+E+C+F
10      10         C+A
11      11 B+A+D+E+C+F
12      12         B+C
13      13     A+D+B+E
14      14 D+C+E+F+B+A
15      15   C+F+D+E+A
16      16       A+C+B
17      17     C+D+B+E
18      18         A+B
19      19   C+B+D+E+F
20      20       D+C+F

> -- 
> Regards
> Abhinaba Roy
> 
> 	[[alternative HTML version deleted]]

You should read the Posting Guide and learn to post in HTML.
> 
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


-- 
David Winsemius
Alameda, CA, USA


From abhinabaroy09 at gmail.com  Wed Jun 25 08:18:02 2014
From: abhinabaroy09 at gmail.com (Abhinaba Roy)
Date: Wed, 25 Jun 2014 11:48:02 +0530
Subject: [R] Generating Patient Data
In-Reply-To: <00D35C5F-981E-4B9C-9012-114B14D97F7E@comcast.net>
References: <CANtKHPW5WgiQkZa8ERWOAN2+dsF1EX-Je+G3AsLKyB0PtUwPXw@mail.gmail.com>
	<00D35C5F-981E-4B9C-9012-114B14D97F7E@comcast.net>
Message-ID: <CANtKHPU3Oty9=tKUz6n2-rqYVS6wv9OV1KnRuVg=PKwwwByGJA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140625/82f5e2e2/attachment.pl>

From ajdamico at gmail.com  Wed Jun 25 09:43:05 2014
From: ajdamico at gmail.com (Anthony Damico)
Date: Wed, 25 Jun 2014 03:43:05 -0400
Subject: [R] Generating Patient Data
In-Reply-To: <CANtKHPU3Oty9=tKUz6n2-rqYVS6wv9OV1KnRuVg=PKwwwByGJA@mail.gmail.com>
References: <CANtKHPW5WgiQkZa8ERWOAN2+dsF1EX-Je+G3AsLKyB0PtUwPXw@mail.gmail.com>
	<00D35C5F-981E-4B9C-9012-114B14D97F7E@comcast.net>
	<CANtKHPU3Oty9=tKUz6n2-rqYVS6wv9OV1KnRuVg=PKwwwByGJA@mail.gmail.com>
Message-ID: <CAOwvMDz8a+3pTU6Sm9p9774RoSa1OHf4r6ztvWUbYd_=TY=x5A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140625/8316229d/attachment.pl>

From kmersman at smail.uni-koeln.de  Wed Jun 25 11:35:00 2014
From: kmersman at smail.uni-koeln.de (Katharina Mersmann)
Date: Wed, 25 Jun 2014 11:35:00 +0200
Subject: [R] SD of Residuals by group
Message-ID: <000901cf9058$bca75b40$35f611c0$@uni-koeln.de>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140625/c2fc011a/attachment.pl>

From christoph.schlaechter at gmail.com  Wed Jun 25 15:56:38 2014
From: christoph.schlaechter at gmail.com (=?UTF-8?Q?Christoph_Schl=C3=A4chter?=)
Date: Wed, 25 Jun 2014 15:56:38 +0200
Subject: [R] matlab serial date to r
Message-ID: <CACU-vMgfP979j-+Ec9smOedrDzo4nE_2dEts7HdA1BRzgiK_qA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140625/dc3d8633/attachment.pl>

From david.stevens at usu.edu  Wed Jun 25 16:53:33 2014
From: david.stevens at usu.edu (David Stevens)
Date: Wed, 25 Jun 2014 08:53:33 -0600
Subject: [R] saving a 'get' object in R
In-Reply-To: <CAFEqCdyuQ1fTq0Fa6XQnsmb5Esyn9zGh_zAFqzhOm7MoVPOCHQ@mail.gmail.com>
References: <70061386623678@web1g.yandex.ru>	<5E1B812FAC2C4A49B3D99593B5A521910D5D548C@PRDEXMBX-08.the-lab.llnl.gov>	<CACk-te036JucUSDoqO=Yb7BfZN=twAq6G-ex-b=cWKu_gTQFOQ@mail.gmail.com>	<CAFEqCdwQYGNi24sK4-7yPPsVAnwNZVdMkdV1evjxBBmyiOVcUw@mail.gmail.com>	<53A9E112.1030709@usu.edu>	<CAFEqCdxYspF9WdWr+O+HfqaBB3UdBHFxEVsHXzMLRL-jBFBDmA@mail.gmail.com>	<CAFDcVCSOLf1TjWh0+YWv0ET=6U=PuMkhgctz=6Q7DMgTdfo6pw@mail.gmail.com>	<53A9E638.5010008@usu.edu>
	<CAFEqCdyuQ1fTq0Fa6XQnsmb5Esyn9zGh_zAFqzhOm7MoVPOCHQ@mail.gmail.com>
Message-ID: <53AAE26D.4090607@usu.edu>

Greg - I appreciate your taking the time to explain. This is very 
helpful. My case was a bit unusual as I'm helping a colleague with code 
to use on a regular but individual basis. I want them to name a data set 
once at the top of the script and have that name propagate through 
several objects that end up being saved at the end with file names tied 
to the data set name. Then tomorrow, they'll do the same thing on a 
different data set so each session would be pretty simple, with only 2-3 
named objects at the end, though the data sets are big and cumbersome.

I'll dig into this more and apologize to those who thought this problem 
was too trivial for the r-help forum.

David

On 6/24/2014 4:00 PM, Greg Snow wrote:
> The main reason to avoid assign/get is that there are better ways.
> You can use a list or environment more directly without using
> assign/get.  Also the main reason to use assign/get is to work with
> global variables which are frowned on in general programming (and
> prone to hard to find bugs).
>
> Consider the following code snippet:
>
> x <- 1:10
> functionThatUsesAssign(x)
>
> what is the value of x after running this code?  If you use global
> variables then the answer is "I don't know", and if x was something
> that took several hours to compute and I just accidentally overwrote
> it, then I am probably not happy.
>
> Using assign often leads to the temptation to try code like:
>
> assign( "x[5]", 25 )
>
> which does something (no warnings, no errors) but generally not what
> was being attempted.
>
> Another common (mis)use of assign/get is to create a sequence of
> variables like "data01", "data02", "data03", ...  and then do the same
> thing for each of the data objects.  This is much better done by
> putting all the objects into a single list, then you can easily
> iterate over the list using lapply/sapply or still access the
> individual pieces.  Then when it comes time to save these objects, you
> only need to save the list, not all the individual objects, same for
> deleting, copying, moving, etc.  And you don't have a bunch of
> different objects cluttering your workspace, just a single list.
>
> On Tue, Jun 24, 2014 at 2:57 PM, David Stevens <david.stevens at usu.edu> wrote:
>> Thanks to all for the replies. I tried all three and they work great. I was
>> misinterpreting the list = parameter in save(...) and I get your point about
>> overwriting existing objects.  I've heard about not using assign/get before.
>> Can anyone point me to why and what alternatives there are?
>>
>> Regards
>>
>> David
>>
>>
>> On 6/24/2014 2:50 PM, Henrik Bengtsson wrote:
>>> I recommend to use saveRDS()/readRDS() instead.  More convenient and
>>> avoids the risk that load() has of overwriting existing variables with
>>> the same name.
>>>
>>> /Henrik
>>>
>>> On Tue, Jun 24, 2014 at 1:45 PM, Greg Snow <538280 at gmail.com> wrote:
>>>> I think that you are looking for the `list` argument in `save`.
>>>>
>>>> save( list=foo, file=paste0(foo, '.Rdata') )
>>>>
>>>> In general it is best to avoid using the assign function (and get when
>>>> possible).  Usually there are better alternatives.
>>>>
>>>> On Tue, Jun 24, 2014 at 2:35 PM, David Stevens <david.stevens at usu.edu>
>>>> wrote:
>>>>> R community,
>>>>>
>>>>> Apologies if this has been answered. The concept I'm looking for is to
>>>>> save() an object retrieved using get() for an object
>>>>> that resulted from using assign. Something like
>>>>>
>>>>> save(get(foo),file=paste(foo,'rData',sep=''))
>>>>>
>>>>> where assign(foo,obj) creates an object named foo with the contents of
>>>>> obj
>>>>> assigned. For example, if
>>>>>
>>>>> x <- data.frame(v1=c(1,2,3,4),v2=c('1','2','3','4'))
>>>>> foo = 'my.x'
>>>>> assign(foo,x)
>>>>> # (... then modify foo as needed)
>>>>> save(get(foo),file=paste(foo,'.rData',sep=''))
>>>>>
>>>>> # though this generates " in save(get(foo), file = paste(foo, ".rData",
>>>>> sep
>>>>> = "")) :
>>>>> object ?get(foo)? not found", whereas
>>>>>
>>>>> get(foo)
>>>>>
>>>>> at the command prompt yields the contents of my.x
>>>>>
>>>>> There's a concept I'm missing here. Can anyone help?
>>>>>
>>>>> Regards
>>>>>
>>>>> David Stevens
>>>>>
>>>>> --
>>>>> David K Stevens, P.E., Ph.D.
>>>>> Professor and Head, Environmental Engineering
>>>>> Civil and Environmental Engineering
>>>>> Utah Water Research Laboratory
>>>>> 8200 Old Main Hill
>>>>> Logan, UT  84322-8200
>>>>> 435 797 3229 - voice
>>>>> 435 797 1363 - fax
>>>>> david.stevens at usu.edu
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide
>>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>>
>>>> --
>>>> Gregory (Greg) L. Snow Ph.D.
>>>> 538280 at gmail.com
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>
>> --
>> David K Stevens, P.E., Ph.D.
>> Professor and Head, Environmental Engineering
>> Civil and Environmental Engineering
>> Utah Water Research Laboratory
>> 8200 Old Main Hill
>> Logan, UT  84322-8200
>> 435 797 3229 - voice
>> 435 797 1363 - fax
>> david.stevens at usu.edu
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>

-- 
David K Stevens, P.E., Ph.D.
Professor and Head, Environmental Engineering
Civil and Environmental Engineering
Utah Water Research Laboratory
8200 Old Main Hill
Logan, UT  84322-8200
435 797 3229 - voice
435 797 1363 - fax
david.stevens at usu.edu


From jdnewmil at dcn.davis.CA.us  Wed Jun 25 17:23:02 2014
From: jdnewmil at dcn.davis.CA.us (Jeff Newmiller)
Date: Wed, 25 Jun 2014 08:23:02 -0700
Subject: [R] saving a 'get' object in R
In-Reply-To: <53AAE26D.4090607@usu.edu>
References: <70061386623678@web1g.yandex.ru>
	<5E1B812FAC2C4A49B3D99593B5A521910D5D548C@PRDEXMBX-08.the-lab.llnl.gov>
	<CACk-te036JucUSDoqO=Yb7BfZN=twAq6G-ex-b=cWKu_gTQFOQ@mail.gmail.com>
	<CAFEqCdwQYGNi24sK4-7yPPsVAnwNZVdMkdV1evjxBBmyiOVcUw@mail.gmail.com>
	<53A9E112.1030709@usu.edu>
	<CAFEqCdxYspF9WdWr+O+HfqaBB3UdBHFxEVsHXzMLRL-jBFBDmA@mail.gmail.com>
	<CAFDcVCSOLf1TjWh0+YWv0ET=6U=PuMkhgctz=6Q7DMgTdfo6pw@mail.gmail.com>
	<53A9E638.5010008@usu.edu>
	<CAFEqCdyuQ1fTq0Fa6XQnsmb5Esyn9zGh_zAFqzhOm7MoVPOCHQ@mail.gmail.com>
	<53AAE26D.4090607@usu.edu>
Message-ID: <60c4d29b-f9ea-4eb3-bcc8-a6c59b342f45@email.android.com>

Seems to me you are creating your own troubles in your "requirements". If the analysis is the same from case to case, it makes more sense to use a single set of object names within the analysis and change only the names of the input and output files.
---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                      Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
--------------------------------------------------------------------------- 
Sent from my phone. Please excuse my brevity.

On June 25, 2014 7:53:33 AM PDT, David Stevens <david.stevens at usu.edu> wrote:
>Greg - I appreciate your taking the time to explain. This is very 
>helpful. My case was a bit unusual as I'm helping a colleague with code
>
>to use on a regular but individual basis. I want them to name a data
>set 
>once at the top of the script and have that name propagate through 
>several objects that end up being saved at the end with file names tied
>
>to the data set name. Then tomorrow, they'll do the same thing on a 
>different data set so each session would be pretty simple, with only
>2-3 
>named objects at the end, though the data sets are big and cumbersome.
>
>I'll dig into this more and apologize to those who thought this problem
>
>was too trivial for the r-help forum.
>
>David
>
>On 6/24/2014 4:00 PM, Greg Snow wrote:
>> The main reason to avoid assign/get is that there are better ways.
>> You can use a list or environment more directly without using
>> assign/get.  Also the main reason to use assign/get is to work with
>> global variables which are frowned on in general programming (and
>> prone to hard to find bugs).
>>
>> Consider the following code snippet:
>>
>> x <- 1:10
>> functionThatUsesAssign(x)
>>
>> what is the value of x after running this code?  If you use global
>> variables then the answer is "I don't know", and if x was something
>> that took several hours to compute and I just accidentally overwrote
>> it, then I am probably not happy.
>>
>> Using assign often leads to the temptation to try code like:
>>
>> assign( "x[5]", 25 )
>>
>> which does something (no warnings, no errors) but generally not what
>> was being attempted.
>>
>> Another common (mis)use of assign/get is to create a sequence of
>> variables like "data01", "data02", "data03", ...  and then do the
>same
>> thing for each of the data objects.  This is much better done by
>> putting all the objects into a single list, then you can easily
>> iterate over the list using lapply/sapply or still access the
>> individual pieces.  Then when it comes time to save these objects,
>you
>> only need to save the list, not all the individual objects, same for
>> deleting, copying, moving, etc.  And you don't have a bunch of
>> different objects cluttering your workspace, just a single list.
>>
>> On Tue, Jun 24, 2014 at 2:57 PM, David Stevens
><david.stevens at usu.edu> wrote:
>>> Thanks to all for the replies. I tried all three and they work
>great. I was
>>> misinterpreting the list = parameter in save(...) and I get your
>point about
>>> overwriting existing objects.  I've heard about not using assign/get
>before.
>>> Can anyone point me to why and what alternatives there are?
>>>
>>> Regards
>>>
>>> David
>>>
>>>
>>> On 6/24/2014 2:50 PM, Henrik Bengtsson wrote:
>>>> I recommend to use saveRDS()/readRDS() instead.  More convenient
>and
>>>> avoids the risk that load() has of overwriting existing variables
>with
>>>> the same name.
>>>>
>>>> /Henrik
>>>>
>>>> On Tue, Jun 24, 2014 at 1:45 PM, Greg Snow <538280 at gmail.com>
>wrote:
>>>>> I think that you are looking for the `list` argument in `save`.
>>>>>
>>>>> save( list=foo, file=paste0(foo, '.Rdata') )
>>>>>
>>>>> In general it is best to avoid using the assign function (and get
>when
>>>>> possible).  Usually there are better alternatives.
>>>>>
>>>>> On Tue, Jun 24, 2014 at 2:35 PM, David Stevens
><david.stevens at usu.edu>
>>>>> wrote:
>>>>>> R community,
>>>>>>
>>>>>> Apologies if this has been answered. The concept I'm looking for
>is to
>>>>>> save() an object retrieved using get() for an object
>>>>>> that resulted from using assign. Something like
>>>>>>
>>>>>> save(get(foo),file=paste(foo,'rData',sep=''))
>>>>>>
>>>>>> where assign(foo,obj) creates an object named foo with the
>contents of
>>>>>> obj
>>>>>> assigned. For example, if
>>>>>>
>>>>>> x <- data.frame(v1=c(1,2,3,4),v2=c('1','2','3','4'))
>>>>>> foo = 'my.x'
>>>>>> assign(foo,x)
>>>>>> # (... then modify foo as needed)
>>>>>> save(get(foo),file=paste(foo,'.rData',sep=''))
>>>>>>
>>>>>> # though this generates " in save(get(foo), file = paste(foo,
>".rData",
>>>>>> sep
>>>>>> = "")) :
>>>>>> object ?get(foo)? not found", whereas
>>>>>>
>>>>>> get(foo)
>>>>>>
>>>>>> at the command prompt yields the contents of my.x
>>>>>>
>>>>>> There's a concept I'm missing here. Can anyone help?
>>>>>>
>>>>>> Regards
>>>>>>
>>>>>> David Stevens
>>>>>>
>>>>>> --
>>>>>> David K Stevens, P.E., Ph.D.
>>>>>> Professor and Head, Environmental Engineering
>>>>>> Civil and Environmental Engineering
>>>>>> Utah Water Research Laboratory
>>>>>> 8200 Old Main Hill
>>>>>> Logan, UT  84322-8200
>>>>>> 435 797 3229 - voice
>>>>>> 435 797 1363 - fax
>>>>>> david.stevens at usu.edu
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-help at r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>> PLEASE do read the posting guide
>>>>>> http://www.R-project.org/posting-guide.html
>>>>>> and provide commented, minimal, self-contained, reproducible
>code.
>>>>>
>>>>>
>>>>> --
>>>>> Gregory (Greg) L. Snow Ph.D.
>>>>> 538280 at gmail.com
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide
>>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>> --
>>> David K Stevens, P.E., Ph.D.
>>> Professor and Head, Environmental Engineering
>>> Civil and Environmental Engineering
>>> Utah Water Research Laboratory
>>> 8200 Old Main Hill
>>> Logan, UT  84322-8200
>>> 435 797 3229 - voice
>>> 435 797 1363 - fax
>>> david.stevens at usu.edu
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>>
>
>-- 
>David K Stevens, P.E., Ph.D.
>Professor and Head, Environmental Engineering
>Civil and Environmental Engineering
>Utah Water Research Laboratory
>8200 Old Main Hill
>Logan, UT  84322-8200
>435 797 3229 - voice
>435 797 1363 - fax
>david.stevens at usu.edu
>
>______________________________________________
>R-help at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From gunter.berton at gene.com  Wed Jun 25 17:48:55 2014
From: gunter.berton at gene.com (Bert Gunter)
Date: Wed, 25 Jun 2014 08:48:55 -0700
Subject: [R] saving a 'get' object in R
In-Reply-To: <60c4d29b-f9ea-4eb3-bcc8-a6c59b342f45@email.android.com>
References: <70061386623678@web1g.yandex.ru>
	<5E1B812FAC2C4A49B3D99593B5A521910D5D548C@PRDEXMBX-08.the-lab.llnl.gov>
	<CACk-te036JucUSDoqO=Yb7BfZN=twAq6G-ex-b=cWKu_gTQFOQ@mail.gmail.com>
	<CAFEqCdwQYGNi24sK4-7yPPsVAnwNZVdMkdV1evjxBBmyiOVcUw@mail.gmail.com>
	<53A9E112.1030709@usu.edu>
	<CAFEqCdxYspF9WdWr+O+HfqaBB3UdBHFxEVsHXzMLRL-jBFBDmA@mail.gmail.com>
	<CAFDcVCSOLf1TjWh0+YWv0ET=6U=PuMkhgctz=6Q7DMgTdfo6pw@mail.gmail.com>
	<53A9E638.5010008@usu.edu>
	<CAFEqCdyuQ1fTq0Fa6XQnsmb5Esyn9zGh_zAFqzhOm7MoVPOCHQ@mail.gmail.com>
	<53AAE26D.4090607@usu.edu>
	<60c4d29b-f9ea-4eb3-bcc8-a6c59b342f45@email.android.com>
Message-ID: <CACk-te2kYRFyAqBLbCmHup9h3EExFitkZ6x2FygSyaQNN7jenw@mail.gmail.com>

... and wrap it all up into a single function call that could even
have the user interactively supply the input data file names.

Cheers,
Bert

Bert Gunter
Genentech Nonclinical Biostatistics
(650) 467-7374

"Data is not information. Information is not knowledge. And knowledge
is certainly not wisdom."
Clifford Stoll




On Wed, Jun 25, 2014 at 8:23 AM, Jeff Newmiller
<jdnewmil at dcn.davis.ca.us> wrote:
> Seems to me you are creating your own troubles in your "requirements". If the analysis is the same from case to case, it makes more sense to use a single set of object names within the analysis and change only the names of the input and output files.
> ---------------------------------------------------------------------------
> Jeff Newmiller                        The     .....       .....  Go Live...
> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
>                                       Live:   OO#.. Dead: OO#..  Playing
> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
> /Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
> ---------------------------------------------------------------------------
> Sent from my phone. Please excuse my brevity.
>
> On June 25, 2014 7:53:33 AM PDT, David Stevens <david.stevens at usu.edu> wrote:
>>Greg - I appreciate your taking the time to explain. This is very
>>helpful. My case was a bit unusual as I'm helping a colleague with code
>>
>>to use on a regular but individual basis. I want them to name a data
>>set
>>once at the top of the script and have that name propagate through
>>several objects that end up being saved at the end with file names tied
>>
>>to the data set name. Then tomorrow, they'll do the same thing on a
>>different data set so each session would be pretty simple, with only
>>2-3
>>named objects at the end, though the data sets are big and cumbersome.
>>
>>I'll dig into this more and apologize to those who thought this problem
>>
>>was too trivial for the r-help forum.
>>
>>David
>>
>>On 6/24/2014 4:00 PM, Greg Snow wrote:
>>> The main reason to avoid assign/get is that there are better ways.
>>> You can use a list or environment more directly without using
>>> assign/get.  Also the main reason to use assign/get is to work with
>>> global variables which are frowned on in general programming (and
>>> prone to hard to find bugs).
>>>
>>> Consider the following code snippet:
>>>
>>> x <- 1:10
>>> functionThatUsesAssign(x)
>>>
>>> what is the value of x after running this code?  If you use global
>>> variables then the answer is "I don't know", and if x was something
>>> that took several hours to compute and I just accidentally overwrote
>>> it, then I am probably not happy.
>>>
>>> Using assign often leads to the temptation to try code like:
>>>
>>> assign( "x[5]", 25 )
>>>
>>> which does something (no warnings, no errors) but generally not what
>>> was being attempted.
>>>
>>> Another common (mis)use of assign/get is to create a sequence of
>>> variables like "data01", "data02", "data03", ...  and then do the
>>same
>>> thing for each of the data objects.  This is much better done by
>>> putting all the objects into a single list, then you can easily
>>> iterate over the list using lapply/sapply or still access the
>>> individual pieces.  Then when it comes time to save these objects,
>>you
>>> only need to save the list, not all the individual objects, same for
>>> deleting, copying, moving, etc.  And you don't have a bunch of
>>> different objects cluttering your workspace, just a single list.
>>>
>>> On Tue, Jun 24, 2014 at 2:57 PM, David Stevens
>><david.stevens at usu.edu> wrote:
>>>> Thanks to all for the replies. I tried all three and they work
>>great. I was
>>>> misinterpreting the list = parameter in save(...) and I get your
>>point about
>>>> overwriting existing objects.  I've heard about not using assign/get
>>before.
>>>> Can anyone point me to why and what alternatives there are?
>>>>
>>>> Regards
>>>>
>>>> David
>>>>
>>>>
>>>> On 6/24/2014 2:50 PM, Henrik Bengtsson wrote:
>>>>> I recommend to use saveRDS()/readRDS() instead.  More convenient
>>and
>>>>> avoids the risk that load() has of overwriting existing variables
>>with
>>>>> the same name.
>>>>>
>>>>> /Henrik
>>>>>
>>>>> On Tue, Jun 24, 2014 at 1:45 PM, Greg Snow <538280 at gmail.com>
>>wrote:
>>>>>> I think that you are looking for the `list` argument in `save`.
>>>>>>
>>>>>> save( list=foo, file=paste0(foo, '.Rdata') )
>>>>>>
>>>>>> In general it is best to avoid using the assign function (and get
>>when
>>>>>> possible).  Usually there are better alternatives.
>>>>>>
>>>>>> On Tue, Jun 24, 2014 at 2:35 PM, David Stevens
>><david.stevens at usu.edu>
>>>>>> wrote:
>>>>>>> R community,
>>>>>>>
>>>>>>> Apologies if this has been answered. The concept I'm looking for
>>is to
>>>>>>> save() an object retrieved using get() for an object
>>>>>>> that resulted from using assign. Something like
>>>>>>>
>>>>>>> save(get(foo),file=paste(foo,'rData',sep=''))
>>>>>>>
>>>>>>> where assign(foo,obj) creates an object named foo with the
>>contents of
>>>>>>> obj
>>>>>>> assigned. For example, if
>>>>>>>
>>>>>>> x <- data.frame(v1=c(1,2,3,4),v2=c('1','2','3','4'))
>>>>>>> foo = 'my.x'
>>>>>>> assign(foo,x)
>>>>>>> # (... then modify foo as needed)
>>>>>>> save(get(foo),file=paste(foo,'.rData',sep=''))
>>>>>>>
>>>>>>> # though this generates " in save(get(foo), file = paste(foo,
>>".rData",
>>>>>>> sep
>>>>>>> = "")) :
>>>>>>> object ?get(foo)? not found", whereas
>>>>>>>
>>>>>>> get(foo)
>>>>>>>
>>>>>>> at the command prompt yields the contents of my.x
>>>>>>>
>>>>>>> There's a concept I'm missing here. Can anyone help?
>>>>>>>
>>>>>>> Regards
>>>>>>>
>>>>>>> David Stevens
>>>>>>>
>>>>>>> --
>>>>>>> David K Stevens, P.E., Ph.D.
>>>>>>> Professor and Head, Environmental Engineering
>>>>>>> Civil and Environmental Engineering
>>>>>>> Utah Water Research Laboratory
>>>>>>> 8200 Old Main Hill
>>>>>>> Logan, UT  84322-8200
>>>>>>> 435 797 3229 - voice
>>>>>>> 435 797 1363 - fax
>>>>>>> david.stevens at usu.edu
>>>>>>>
>>>>>>> ______________________________________________
>>>>>>> R-help at r-project.org mailing list
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>> PLEASE do read the posting guide
>>>>>>> http://www.R-project.org/posting-guide.html
>>>>>>> and provide commented, minimal, self-contained, reproducible
>>code.
>>>>>>
>>>>>>
>>>>>> --
>>>>>> Gregory (Greg) L. Snow Ph.D.
>>>>>> 538280 at gmail.com
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-help at r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>> PLEASE do read the posting guide
>>>>>> http://www.R-project.org/posting-guide.html
>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>> --
>>>> David K Stevens, P.E., Ph.D.
>>>> Professor and Head, Environmental Engineering
>>>> Civil and Environmental Engineering
>>>> Utah Water Research Laboratory
>>>> 8200 Old Main Hill
>>>> Logan, UT  84322-8200
>>>> 435 797 3229 - voice
>>>> 435 797 1363 - fax
>>>> david.stevens at usu.edu
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>>
>>
>>--
>>David K Stevens, P.E., Ph.D.
>>Professor and Head, Environmental Engineering
>>Civil and Environmental Engineering
>>Utah Water Research Laboratory
>>8200 Old Main Hill
>>Logan, UT  84322-8200
>>435 797 3229 - voice
>>435 797 1363 - fax
>>david.stevens at usu.edu
>>
>>______________________________________________
>>R-help at r-project.org mailing list
>>https://stat.ethz.ch/mailman/listinfo/r-help
>>PLEASE do read the posting guide
>>http://www.R-project.org/posting-guide.html
>>and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ripley at stats.ox.ac.uk  Wed Jun 25 18:03:31 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 25 Jun 2014 17:03:31 +0100
Subject: [R] matlab serial date to r
In-Reply-To: <CACU-vMgfP979j-+Ec9smOedrDzo4nE_2dEts7HdA1BRzgiK_qA@mail.gmail.com>
References: <CACU-vMgfP979j-+Ec9smOedrDzo4nE_2dEts7HdA1BRzgiK_qA@mail.gmail.com>
Message-ID: <53AAF2D3.8020102@stats.ox.ac.uk>

See ?as.Date.

I am guessing these are days and fractional days.  Try

x <- 7.356000000813091e5
as.POSIXct((x - 719529)*86400, origin = "1970-01-01")




On 25/06/2014 14:56, Christoph Schl?chter wrote:
> Hi,
>
> I have a matlab variable as serial date (class double) in the form
> 'dd-mmm-yyyy HH:MM:SS'.
>
> format long
> disp( tx(40:60,1) )
>
> 1.0e+05 *
>
>     7.356000000813091
>     7.356000000956856
>     7.356000001305921
>     7.356000001654985
>     7.356000002004049
>     7.356000002353113
>     7.356000002702178
>     7.356000003397179
>     7.356000004092182
>     7.356000004787183
>     7.356000005482185
>     7.356000006177187
>     7.356000006940080
>     7.356000007702975
>     7.356000008465869
>     7.356000009228763
>     7.356000009991657
>     7.356000010754551
>     7.356000011517445
>     7.356000012280339
>     7.356000013085329
>
> It should be the same as
>
> datestr( tx(40:60,1), 0)
>
> 01-Jan-2014 00:00:07
> 01-Jan-2014 00:00:08
> 01-Jan-2014 00:00:11
> 01-Jan-2014 00:00:14
> 01-Jan-2014 00:00:17
> 01-Jan-2014 00:00:20
> 01-Jan-2014 00:00:23
> 01-Jan-2014 00:00:29
> 01-Jan-2014 00:00:35
> 01-Jan-2014 00:00:41
> 01-Jan-2014 00:00:47
> 01-Jan-2014 00:00:53
> 01-Jan-2014 00:00:59
> 01-Jan-2014 00:01:06
> 01-Jan-2014 00:01:13
> 01-Jan-2014 00:01:19
> 01-Jan-2014 00:01:26
> 01-Jan-2014 00:01:32
> 01-Jan-2014 00:01:39
> 01-Jan-2014 00:01:46
> 01-Jan-2014 00:01:53
>
> I can easily convert it with Matlab but then I will obtain a character
> format which is useless. I can also make use of cellstr(datestr(tx(:,1),
> 0)) but then I can't save it in ASCII file.
>
> The origin of the Matlab format is supposed to be "0000-00-00". This is the
> only origin which results in "2014-01-01" which is my actual start date.
>
> Can somebody please tell me how I can simply convert serial datetime to
> datetime in R.
>
> Thanks in advance.
>
> All the best,
>
> Christoph
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From jdnewmil at dcn.davis.CA.us  Wed Jun 25 18:25:59 2014
From: jdnewmil at dcn.davis.CA.us (Jeff Newmiller)
Date: Wed, 25 Jun 2014 09:25:59 -0700
Subject: [R] matlab serial date to r
In-Reply-To: <CACU-vMgfP979j-+Ec9smOedrDzo4nE_2dEts7HdA1BRzgiK_qA@mail.gmail.com>
References: <CACU-vMgfP979j-+Ec9smOedrDzo4nE_2dEts7HdA1BRzgiK_qA@mail.gmail.com>
Message-ID: <16fb6820-0893-4d1c-81bc-ab38ada513ef@email.android.com>

I think the character format for this data is the most versatile and clear option. You do have to prevent the R input function (read.csv? read.table?) from converting it to factor when you read it in, but then you can use as.POSIXct with a format argument (see ?strptime) to obtain useful timestamp values in R. You also need to be clear about time zones, but that is true regardless of the software you use.
---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                      Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
--------------------------------------------------------------------------- 
Sent from my phone. Please excuse my brevity.

On June 25, 2014 6:56:38 AM PDT, "Christoph Schl?chter" <christoph.schlaechter at gmail.com> wrote:
>Hi,
>
>I have a matlab variable as serial date (class double) in the form
>'dd-mmm-yyyy HH:MM:SS'.
>
>format long
>disp( tx(40:60,1) )
>
>1.0e+05 *
>
>   7.356000000813091
>   7.356000000956856
>   7.356000001305921
>   7.356000001654985
>   7.356000002004049
>   7.356000002353113
>   7.356000002702178
>   7.356000003397179
>   7.356000004092182
>   7.356000004787183
>   7.356000005482185
>   7.356000006177187
>   7.356000006940080
>   7.356000007702975
>   7.356000008465869
>   7.356000009228763
>   7.356000009991657
>   7.356000010754551
>   7.356000011517445
>   7.356000012280339
>   7.356000013085329
>
>It should be the same as
>
>datestr( tx(40:60,1), 0)
>
>01-Jan-2014 00:00:07
>01-Jan-2014 00:00:08
>01-Jan-2014 00:00:11
>01-Jan-2014 00:00:14
>01-Jan-2014 00:00:17
>01-Jan-2014 00:00:20
>01-Jan-2014 00:00:23
>01-Jan-2014 00:00:29
>01-Jan-2014 00:00:35
>01-Jan-2014 00:00:41
>01-Jan-2014 00:00:47
>01-Jan-2014 00:00:53
>01-Jan-2014 00:00:59
>01-Jan-2014 00:01:06
>01-Jan-2014 00:01:13
>01-Jan-2014 00:01:19
>01-Jan-2014 00:01:26
>01-Jan-2014 00:01:32
>01-Jan-2014 00:01:39
>01-Jan-2014 00:01:46
>01-Jan-2014 00:01:53
>
>I can easily convert it with Matlab but then I will obtain a character
>format which is useless. I can also make use of
>cellstr(datestr(tx(:,1),
>0)) but then I can't save it in ASCII file.
>
>The origin of the Matlab format is supposed to be "0000-00-00". This is
>the
>only origin which results in "2014-01-01" which is my actual start
>date.
>
>Can somebody please tell me how I can simply convert serial datetime to
>datetime in R.
>
>Thanks in advance.
>
>All the best,
>
>Christoph
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From M.Rosario.Garcia at slu.se  Wed Jun 25 12:04:53 2014
From: M.Rosario.Garcia at slu.se (Rosario Garcia Gil)
Date: Wed, 25 Jun 2014 10:04:53 +0000
Subject: [R] Duncan test: 2-way ANOVA without repetition,
 but with multiple subjects
Message-ID: <A1C4DF829DB4AE45BF8447F83C7EAFFE1F2B3ABF@exchange2-3>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140625/434629f2/attachment.pl>

From smartpink111 at yahoo.com  Wed Jun 25 09:44:30 2014
From: smartpink111 at yahoo.com (arun)
Date: Wed, 25 Jun 2014 00:44:30 -0700
Subject: [R] Generating Patient Data
In-Reply-To: <CANtKHPW5WgiQkZa8ERWOAN2+dsF1EX-Je+G3AsLKyB0PtUwPXw@mail.gmail.com>
References: <CANtKHPW5WgiQkZa8ERWOAN2+dsF1EX-Je+G3AsLKyB0PtUwPXw@mail.gmail.com>
Message-ID: <1403682270.78082.YahooMailNeo@web142601.mail.bf1.yahoo.com>




Hi, 

Check if this works:
?set.seed(495)
?dat <- data.frame(ID=sample(1:10,20,replace=TRUE), Disease=sample(LETTERS[1:6], 20, replace=TRUE) )
subset(melt(table(dat)[rowSums(!!table(dat))>1,]), !!value,select=1:2)
?? ID Disease
1?? 2?????? A
3?? 4?????? A
4?? 6?????? A
6? 10?????? A
8?? 3?????? B
15? 4?????? C
16? 6?????? C
20? 3?????? D
22? 6?????? D
24 10?????? D
26? 3?????? E
27? 4?????? E
29? 7?????? E
31? 2?????? F
33? 4?????? F
35? 7?????? F
A.K.



On Wednesday, June 25, 2014 1:17 AM, Abhinaba Roy <abhinabaroy09 at gmail.com> wrote:
Dear R helpers,

I want to generate data for say 1000 patients (i.e., 1000 unique IDs)
having suffered from various diseases in the past (say diseases
A,B,C,D,E,F). The only condition imposed is that each patient should've
suffered from *atleast* two diseases. So my data frame will have two
columns 'ID' and 'Disease'.

I want to do a basket analysis with this data, where ID will be the
identifier and we will establish rules based on the 'Disease' column.

How can I generate this type of data in R?

-- 
Regards
Abhinaba Roy

??? [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From smartpink111 at yahoo.com  Wed Jun 25 09:50:03 2014
From: smartpink111 at yahoo.com (arun)
Date: Wed, 25 Jun 2014 00:50:03 -0700
Subject: [R] Generating Patient Data
In-Reply-To: <1403682300.46430.YahooMailNeo@web142605.mail.bf1.yahoo.com>
References: <CANtKHPW5WgiQkZa8ERWOAN2+dsF1EX-Je+G3AsLKyB0PtUwPXw@mail.gmail.com>
	<1403682270.78082.YahooMailNeo@web142601.mail.bf1.yahoo.com>
	<1403682300.46430.YahooMailNeo@web142605.mail.bf1.yahoo.com>
Message-ID: <1403682603.30732.YahooMailNeo@web142604.mail.bf1.yahoo.com>

Also, you can do:
library(dplyr)
dat%>%group_by(ID)%>%filter(length(unique(Disease))>1)%>%arrange(Disease,ID)
A.K.




On Wednesday, June 25, 2014 3:45 AM, arun <smartpink111 at yahoo.com> wrote:


Forgot about:
library(reshape2)





On , arun <smartpink111 at yahoo.com> wrote:



Hi, 

Check if this works:
?set.seed(495)
?dat <- data.frame(ID=sample(1:10,20,replace=TRUE), Disease=sample(LETTERS[1:6], 20, replace=TRUE) )
subset(melt(table(dat)[rowSums(!!table(dat))>1,]), !!value,select=1:2)
?? ID Disease
1?? 2?????? A
3?? 4?????? A
4?? 6?????? A
6? 10?????? A
8?? 3?????? B
15? 4?????? C
16? 6?????? C
20? 3?????? D
22? 6?????? D
24 10?????? D
26? 3?????? E
27? 4?????? E
29? 7?????? E
31? 2?????? F
33? 4?????? F
35? 7?????? F
A.K.






On Wednesday, June 25, 2014 1:17 AM, Abhinaba Roy <abhinabaroy09 at gmail.com> wrote:
Dear R helpers,

I want to generate data for say 1000 patients (i.e., 1000 unique IDs)
having suffered from various diseases in the past (say diseases
A,B,C,D,E,F). The only condition imposed is that each patient should've
suffered from *atleast* two diseases. So my data frame will have two
columns 'ID' and 'Disease'.

I want to do a basket analysis with this data, where ID will be the
identifier and we will establish rules based on the 'Disease' column.

How can I generate this type of data in R?

-- 
Regards
Abhinaba Roy

??? [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From smartpink111 at yahoo.com  Wed Jun 25 19:01:29 2014
From: smartpink111 at yahoo.com (arun)
Date: Wed, 25 Jun 2014 10:01:29 -0700
Subject: [R] matlab serial date to r
In-Reply-To: <CACU-vMgfP979j-+Ec9smOedrDzo4nE_2dEts7HdA1BRzgiK_qA@mail.gmail.com>
References: <CACU-vMgfP979j-+Ec9smOedrDzo4nE_2dEts7HdA1BRzgiK_qA@mail.gmail.com>
Message-ID: <1403715689.41351.YahooMailNeo@web142604.mail.bf1.yahoo.com>

Hi,
May be this helps:

dat <- read.table(text="7.356000000813091
? 7.356000000956856
? 7.356000001305921
? 7.356000001654985
? 7.356000002004049
? 7.356000002353113
? 7.356000002702178
? 7.356000003397179
? 7.356000004092182
? 7.356000004787183
? 7.356000005482185
? 7.356000006177187
? 7.356000006940080
? 7.356000007702975
? 7.356000008465869
? 7.356000009228763
? 7.356000009991657
? 7.356000010754551
? 7.356000011517445
? 7.356000012280339
? 7.356000013085329",sep="",header=F, colClasses="character")
library(chron)
t1 <- chron(1.0e+05 *as.numeric(dat[,1])) -719529
format(as.POSIXct(paste(as.Date(dates(t1)), times(t1)%%1)),"%m-%b-%Y %H:%M:%S")


A.K.



On Wednesday, June 25, 2014 10:00 AM, Christoph Schl?chter <christoph.schlaechter at gmail.com> wrote:
Hi,

I have a matlab variable as serial date (class double) in the form
'dd-mmm-yyyy HH:MM:SS'.

format long
disp( tx(40:60,1) )

1.0e+05 *

?  7.356000000813091
?  7.356000000956856
?  7.356000001305921
?  7.356000001654985
?  7.356000002004049
?  7.356000002353113
?  7.356000002702178
?  7.356000003397179
?  7.356000004092182
?  7.356000004787183
?  7.356000005482185
?  7.356000006177187
?  7.356000006940080
?  7.356000007702975
?  7.356000008465869
?  7.356000009228763
?  7.356000009991657
?  7.356000010754551
?  7.356000011517445
?  7.356000012280339
?  7.356000013085329

It should be the same as

datestr( tx(40:60,1), 0)

01-Jan-2014 00:00:07
01-Jan-2014 00:00:08
01-Jan-2014 00:00:11
01-Jan-2014 00:00:14
01-Jan-2014 00:00:17
01-Jan-2014 00:00:20
01-Jan-2014 00:00:23
01-Jan-2014 00:00:29
01-Jan-2014 00:00:35
01-Jan-2014 00:00:41
01-Jan-2014 00:00:47
01-Jan-2014 00:00:53
01-Jan-2014 00:00:59
01-Jan-2014 00:01:06
01-Jan-2014 00:01:13
01-Jan-2014 00:01:19
01-Jan-2014 00:01:26
01-Jan-2014 00:01:32
01-Jan-2014 00:01:39
01-Jan-2014 00:01:46
01-Jan-2014 00:01:53

I can easily convert it with Matlab but then I will obtain a character
format which is useless. I can also make use of cellstr(datestr(tx(:,1),
0)) but then I can't save it in ASCII file.

The origin of the Matlab format is supposed to be "0000-00-00". This is the
only origin which results in "2014-01-01" which is my actual start date.

Can somebody please tell me how I can simply convert serial datetime to
datetime in R.

Thanks in advance.

All the best,

Christoph

??? [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From Torsten.Hothorn at uzh.ch  Wed Jun 25 14:20:54 2014
From: Torsten.Hothorn at uzh.ch (Torsten Hothorn)
Date: Wed, 25 Jun 2014 14:20:54 +0200 (CEST)
Subject: [R] partykit ctree: minbucket and case weights
In-Reply-To: <web-22712145@embe2.iup.edu>
References: <alpine.DEB.2.10.1405282359130.9752@paninaro.uibk.ac.at>
	<alpine.DEB.2.02.1405300936470.4370@artemis>
	<web-25422517@embe1.iup.edu>
	<alpine.DEB.2.02.1406040911580.3223@artemis>
	<web-22712145@embe2.iup.edu>
Message-ID: <alpine.DEB.2.02.1406251418370.9911@artemis>


Dear Amber,

your data contains missing values and you don't use surrogate splits to 
deal with them. So, the observations are passed down the tree randomly 
(there is no "majority" argument to "ctree_control"!) and thus it might 
happen that too small terminal nodes are created.

Simply use surrogate split and the tree will be deterministic with 
correct-sized terminal nodes (maxsurrogate = 3, for example).

Best,

Torsten

On Mon, 9 Jun 2014, Amber Dawn Nolder wrote:

> I have attached the data set (cavl) and R code used when I got the results I 
> posted about. I included the code I used at the top of the document. Below 
> that is the version of R used and some of the results I obtained.
> Many thanks!
> Amber?
> On Wed, 4 Jun 2014 09:12:15 +0200 (CEST)
> Torsten Hothorn <Torsten.Hothorn at uzh.ch> wrote:
>> 
>> On Tue, 3 Jun 2014, Amber Dawn Nolder wrote:
>> 
>>> I apologize for my lack of knowledge with R. I usually load my data as a 
>>> csv file. May I send that to you? I was not sure if I could do so on the 
>>> list.
>> 
>> yes, and the R code you used. Thanks,
>> 
>> Torsten
>> 
>>> Thank you?
>>> On Fri, 30 May 2014 09:37:23 +0200 (CEST)
>>> Torsten Hothorn <Torsten.Hothorn at uzh.ch> wrote:
>>>> 
>>>> Amber,
>>>> 
>>>> this looks like an error -- could you pls send me a reproducible example 
>>>> so that I can track the problem down?
>>>> 
>>>> Best,
>>>> 
>>>> Torsten
>>>> 
>>>> 
>>>> ________________________________________________________________
>>>> 
>>>> Prof. Dr. Torsten Hothorn?????????????????????? =========
>>>> ???????????????????????????????????????????????? \\
>>>> Universitaet Zuerich???????????????????????????? \\
>>>> Institut fuer Epidemiologie, Biostatistik und???? \\
>>>> Praevention, Abteilung Biostatistik?????????????? //
>>>> Hirschengraben 84????????????????????????????????//
>>>> CH-8001 Zuerich???????????????????????????????? //
>>>> Schweiz????????????????????????????????????????//
>>>> ????????????????????????????????????????????????==========
>>>> Telephon:??+41 44 634 48 17
>>>> Fax:?????? +41 44 634 43 86
>>>> Web:?????? http://tiny.uzh.ch/6p
>>>> ________________________________________________________________
>>>> 
>>>> On Wed, 28 May 2014, Achim Zeileis wrote:
>>>> 
>>>>> Falls Du es nicht eh gesehen hast...
>>>>> 
>>>>> lg,
>>>>> Z
>>>>> 
>>>>> ---------- Forwarded message ----------
>>>>> Date: Wed, 28 May 2014 17:16:12 -0400
>>>>> From: Amber Dawn Nolder <a.d.nolder at iup.edu>
>>>>> To: r-help at r-project.org
>>>>> Subject: [R] partykit ctree: minbucket and case weights
>>>>> 
>>>>> 
>>>>> ?? Hello,
>>>>> ?? I am an R novice, and I am using the "partykit" package to create
>>>>> ?? regression trees. I used the following to generate the trees:
>>>>> ?? ctree(y~x1+x2+x3+x4,data=my_data,control=ctree_control(testtype =
>>>>> ?? "Bonferroni", mincriterion = 0.90, minsplit = 12, minbucket = 4,
>>>>> ?? majority = TRUE)
>>>>> ?? I thought that "minbucket" set the minimum value for the sum of 
>>>>> weights
>>>>> ?? in each terminal node, and that each case weight is 1, unless 
>>>>> otherwise
>>>>> ?? specified. In which case, the sum of case weights in a node should 
>>>>> equal the
>>>>> ?? number of cases (n) in that node. However, I??sometimes obtain a tree 
>>>>> with
>>>>> ?? a terminal node that contains fewer than 4 cases.
>>>>> ?? My data set has a total of 36 cases. The dependent and all 
>>>>> independent
>>>>> ?? variables are continuous data. Variables x1 and x2 contain missing 
>>>>> (NA)
>>>>> ?? values.
>>>>> ?? Could someone please explain why I am getting these results?
>>>>> ?? Am I??mistaken about the value of case weights or about the use of 
>>>>> minbucket
>>>>> ?? to restrict the size of a terminal node?
>>>>> ?? This is an example of the output:
>>>>> ?? Model formula:
>>>>> ?? y ~ x1 + x2 + x3 + x4
>>>>> ?? Fitted party:
>>>>> ?? [1] root
>>>>> ?? |?? [2] x4 <= 30: 0.927 (n = 17, err = 1.1)
>>>>> ?? |?? [3] x4 > 30
>>>>> ?? |?? |?? [4] x2 <= 43: 0.472 (n = 8, err = 0.4)
>>>>> ?? |?? |?? [5] x2 > 43
>>>>> ?? |?? |?? |?? [6] x3 <= 0.4: 0.282 (n = 3, err = 0.0)
>>>>> ?? |?? |?? |?? [7] x3 > 0.4: 0.020 (n = 8, err = 0.0)
>>>>> ?? Number of inner nodes:????3
>>>>> ?? Number of terminal nodes: 4
>>>>> ?? Many thanks!
>>>>> ?? Amber Nolder
>>>>> ?? Graduate Student
>>>>> ?? Indiana University of Pennsylvania
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide 
>>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>> 
>>> 
>>> 
>
>

From rmh at temple.edu  Wed Jun 25 21:24:32 2014
From: rmh at temple.edu (Richard M. Heiberger)
Date: Wed, 25 Jun 2014 15:24:32 -0400
Subject: [R] Duncan test: 2-way ANOVA without repetition,
 but with multiple subjects
In-Reply-To: <A1C4DF829DB4AE45BF8447F83C7EAFFE1F2B3ABF@exchange2-3>
References: <A1C4DF829DB4AE45BF8447F83C7EAFFE1F2B3ABF@exchange2-3>
Message-ID: <CAGx1TMCmX9wrsB01k=z_+HaOQepabcbR7bOfog5Hwa3vPL57cg@mail.gmail.com>

You didn't say which package Duncan.test is in.  glht has the ability.
glht, and probably any other package's test, cannot work with aovlist objects.
They require aov objects.  That means you must rewrite your Error() statement
into the main model.  Please see the entire maiz example in ?mmc to see how
to rewrite your model.

## install.packages("HH") ## if necessary
require(HH)
?mmc

On Wed, Jun 25, 2014 at 6:04 AM, Rosario Garcia Gil
<M.Rosario.Garcia at slu.se> wrote:
> Hello
>
> I have a question on how to perform a Duncan test after I set a model like this (see below).
>
> The data consist of a dependent variable (PHt) and two dependent variables (REGION (3 levels) AND MANAGEMENT (3 levels)).
>
>
>        MANAGEMENT
> N      P    S
>  REGION     A           196 196          196
>                   V           196 196 196
>                   H       196 196 196
>
> 196 is the number of trees on which PHt was estimated, but we cannot consider them as repetitions, they are subjects. Therefore, only one repetition per REGION*MANAGEMENT factor.
>
> I set a two way ANOVA without repetition. Although within
>
> model <- aov(PHt~REGION*MANAGEMENT+Error(subject_f/(REGION*MANAGEMENT)),data=obsHETf)
>
> Then I try to run a Duncan test for REGION and also for MANAGEMENT. I get this error message.
>
> Error in as.data.frame.default(x[[i]], optional = TRUE, stringsAsFactors = stringsAsFactors) :
>   cannot coerce class "c("aovlist", "listof")" to a data.frame
>
> Is there anyone who could give me a clue on what it is wrong? Maybe it isnot correct to call for a Duncan.test() for such type of model?
>
> If I fit only the mean (mean of the 196 observations) within each REGION*MANAGEMENT factor, then Duncan.test() works as expected. The model then looks as simple as this.
>
> model <- aov(PHt~REGION+MANAGEMENT,data=obsHET)
>
> Thanks in advance.
> R.
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From boblatest at gmail.com  Wed Jun 25 22:22:12 2014
From: boblatest at gmail.com (Robert Latest)
Date: Wed, 25 Jun 2014 22:22:12 +0200
Subject: [R] Simple permutation question
Message-ID: <20140625222212.7b84fd47@dotcom.mfs32>

So my company has hired a few young McKinsey guys from overseas for a
couple of weeks to help us with a production line optimization. They
probably charge what I make in a year, but that's OK because I just
never have the time to really dive into one particular time, and I have
to hand it to the consultants that they came up with one or two really
clever ideas to model the production line. Of course it's up to me to
feed them the real data which they then churn through their Excel
models that they cook up during the nights in their hotel rooms, and
which I then implement back into my experimental system using live data.

Anyway, whenever they need something or come up with something I skip
out of the room, hack it into R, export the CSV and come back in about
half the time it takes Excel to even read in the data, let alone
process it. Of course that gor them curious, and I showed off a couple
of scripts that condense their abysmal Excel convolutions in a few
lean and mean lines of R code.

Anyway, I'm in my office with this really attractive, clever young
McKinsey girl (I'm in my mid-forties, married with kids and all, but I
still enjoyed impressing a woman with computer stuff, of all things!),
and one of her models involves a simple permutation of five letters --
"A" through "E".

And that's when I find out that R doesn't have a permutation function.
How is that possible? R has EVERYTHING, but not that? I'm
flabbergasted. Stumped. And now it's up to me to spend the evening at
home coding that model, and the only thing I really need is that
permutation.

So this is my first attempt:

perm.broken <- function(x) {
    if (length(x) == 1) return(x)
    sapply(1:length(x), function(i) {
        cbind(x[i], perm(x[-i]))
    })
}

But it doesn't work:
> perm.broken(c("A", "B", "C"))
     [,1] [,2] [,3]
[1,] "A"  "B"  "C" 
[2,] "A"  "B"  "C" 
[3,] "B"  "A"  "A" 
[4,] "C"  "C"  "B" 
[5,] "C"  "C"  "B" 
[6,] "B"  "A"  "A" 
> 

And I can't figure out for the life of me why. It should work because I
go through the elements of x in order, use that in the leftmost column,
and slap the permutation of the remaining elements to the right. What
strikes me as particularly odd is that there doesn't even seem to be a
systematic sequence of letters in any of the columns. OK, since I
really need that function I wrote this piece of crap:

perm.stupid <- function(x) {
    b <- as.matrix(expand.grid(rep(list(x), length(x))))
    b[!sapply(1:nrow(b), function(r) any(duplicated(b[r,]))),]
}

It works, but words cannot describe its ugliness. And it gets really
slow really fast with growing x.

So, anyway. My two questions are:
1. Does R really, really, seriously lack a permutation function?
2. OK, stop kidding me. So what's it called?
3. Why doesn't my recursive function work, and what would a
   working version look like?

Thanks,
robert


From cadeb at usgs.gov  Wed Jun 25 22:38:45 2014
From: cadeb at usgs.gov (Cade, Brian)
Date: Wed, 25 Jun 2014 14:38:45 -0600
Subject: [R] Simple permutation question
In-Reply-To: <20140625222212.7b84fd47@dotcom.mfs32>
References: <20140625222212.7b84fd47@dotcom.mfs32>
Message-ID: <CAM5M9BQh72UXr_FC9RD1O3Lqm_+c5wN+6QW+T-XXGmyo6FpTYQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140625/792a9a93/attachment.pl>

From dwinsemius at comcast.net  Wed Jun 25 22:49:51 2014
From: dwinsemius at comcast.net (David Winsemius)
Date: Wed, 25 Jun 2014 13:49:51 -0700
Subject: [R] Generating Patient Data
In-Reply-To: <CANtKHPU3Oty9=tKUz6n2-rqYVS6wv9OV1KnRuVg=PKwwwByGJA@mail.gmail.com>
References: <CANtKHPW5WgiQkZa8ERWOAN2+dsF1EX-Je+G3AsLKyB0PtUwPXw@mail.gmail.com>
	<00D35C5F-981E-4B9C-9012-114B14D97F7E@comcast.net>
	<CANtKHPU3Oty9=tKUz6n2-rqYVS6wv9OV1KnRuVg=PKwwwByGJA@mail.gmail.com>
Message-ID: <C2ACB9D4-2D54-4DC8-BA00-2DDBE740F8D5@comcast.net>


On Jun 24, 2014, at 11:18 PM, Abhinaba Roy wrote:

> Hi David,
> 
> I was thinking something like this:
> 
> ID   Disease
> 1     A
> 2     B
> 3     A
> 1    C
> 2    D
> 5    A
> 4    B
> 3    D
> 2    A
> ..    ..
> 
> How can this be done?

 do.call(rbind,  lapply( 1:20, function(pt) { 
        data.frame( patient=pt, 
                    disease= sample( c('A','B','C','D','E','F'), pmin(2+rpois(1, 2), 6))  )}) )

-- 
David.
> 
> 
> On Wed, Jun 25, 2014 at 11:34 AM, David Winsemius <dwinsemius at comcast.net> wrote:
> 
> On Jun 24, 2014, at 10:14 PM, Abhinaba Roy wrote:
> 
> > Dear R helpers,
> >
> > I want to generate data for say 1000 patients (i.e., 1000 unique IDs)
> > having suffered from various diseases in the past (say diseases
> > A,B,C,D,E,F). The only condition imposed is that each patient should've
> > suffered from *atleast* two diseases. So my data frame will have two
> > columns 'ID' and 'Disease'.
> >
> > I want to do a basket analysis with this data, where ID will be the
> > identifier and we will establish rules based on the 'Disease' column.
> >
> > How can I generate this type of data in R?
> >
> 
> Perhaps something along these lines for 20 cases:
> 
> > data.frame(patient=1:20, disease = sapply(pmin(2+rpois(20, 2), 6), function(n) paste0( sample( c('A','B','C','D','E','F'), n), collapse="+" ) )
> + )
>    patient     disease
> 1        1         F+D
> 2        2     F+A+D+E
> 3        3     F+D+C+E
> 4        4     B+D+C+A
> 5        5     D+A+F+C
> 6        6       E+A+D
> 7        7 E+F+B+C+A+D
> 8        8   A+B+C+D+E
> 9        9     B+E+C+F
> 10      10         C+A
> 11      11 B+A+D+E+C+F
> 12      12         B+C
> 13      13     A+D+B+E
> 14      14 D+C+E+F+B+A
> 15      15   C+F+D+E+A
> 16      16       A+C+B
> 17      17     C+D+B+E
> 18      18         A+B
> 19      19   C+B+D+E+F
> 20      20       D+C+F
> 
> > --
> > Regards
> > Abhinaba Roy
> >
> >       [[alternative HTML version deleted]]
> 
> You should read the Posting Guide and learn to post in HTML.
> >
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> 
> 
> --
> David Winsemius
> Alameda, CA, USA
> 
> 
> 
> 
> -- 
> Regards
> Abhinaba Roy
> Statistician
> Radix Analytics Pvt. Ltd
> Ahmedabad
> 

David Winsemius
Alameda, CA, USA


From Ted.Harding at wlandres.net  Wed Jun 25 22:55:47 2014
From: Ted.Harding at wlandres.net ( (Ted Harding))
Date: Wed, 25 Jun 2014 21:55:47 +0100 (BST)
Subject: [R] Simple permutation question
In-Reply-To: <CAM5M9BQh72UXr_FC9RD1O3Lqm_+c5wN+6QW+T-XXGmyo6FpTYQ@mail.gmail.com>
Message-ID: <XFMail.20140625215547.Ted.Harding@wlandres.net>

I think Robert wants deterministic permutations. In the e1071
package -- load with library(e1071) -- there is a function
permutations():

  Description:
  Returns a matrix containing all permutations of the integers
  '1:n' (one permutation per row).

  Usage:
  permutations(n)

  Arguments:
  n: Number of element to permute.

so, starting with
  x <- c("A","B","C","D","E")
  library(e1071)
  P <- permutations(length(x))

then, for say the 27th of these 120 permutations of x,

  x[P[27,]]

will return it.

Ted.

On 25-Jun-2014 20:38:45 Cade, Brian wrote:
> It is called sample(,replace=F), where the default argument is sampling
> without replacement.
> Try
> x <- c("A","B","C","D","E")
> sample(x)
> 
> Brian
> 
> Brian S. Cade, PhD
> 
> U. S. Geological Survey
> Fort Collins Science Center
> 2150 Centre Ave., Bldg. C
> Fort Collins, CO  80526-8818
> 
> email:  cadeb at usgs.gov <brian_cade at usgs.gov>
> tel:  970 226-9326
> 
> 
> 
> On Wed, Jun 25, 2014 at 2:22 PM, Robert Latest <boblatest at gmail.com> wrote:
> 
>> So my company has hired a few young McKinsey guys from overseas for a
>> couple of weeks to help us with a production line optimization. They
>> probably charge what I make in a year, but that's OK because I just
>> never have the time to really dive into one particular time, and I have
>> to hand it to the consultants that they came up with one or two really
>> clever ideas to model the production line. Of course it's up to me to
>> feed them the real data which they then churn through their Excel
>> models that they cook up during the nights in their hotel rooms, and
>> which I then implement back into my experimental system using live data.
>>
>> Anyway, whenever they need something or come up with something I skip
>> out of the room, hack it into R, export the CSV and come back in about
>> half the time it takes Excel to even read in the data, let alone
>> process it. Of course that gor them curious, and I showed off a couple
>> of scripts that condense their abysmal Excel convolutions in a few
>> lean and mean lines of R code.
>>
>> Anyway, I'm in my office with this really attractive, clever young
>> McKinsey girl (I'm in my mid-forties, married with kids and all, but I
>> still enjoyed impressing a woman with computer stuff, of all things!),
>> and one of her models involves a simple permutation of five letters --
>> "A" through "E".
>>
>> And that's when I find out that R doesn't have a permutation function.
>> How is that possible? R has EVERYTHING, but not that? I'm
>> flabbergasted. Stumped. And now it's up to me to spend the evening at
>> home coding that model, and the only thing I really need is that
>> permutation.
>>
>> So this is my first attempt:
>>
>> perm.broken <- function(x) {
>>     if (length(x) == 1) return(x)
>>     sapply(1:length(x), function(i) {
>>         cbind(x[i], perm(x[-i]))
>>     })
>> }
>>
>> But it doesn't work:
>> > perm.broken(c("A", "B", "C"))
>>      [,1] [,2] [,3]
>> [1,] "A"  "B"  "C"
>> [2,] "A"  "B"  "C"
>> [3,] "B"  "A"  "A"
>> [4,] "C"  "C"  "B"
>> [5,] "C"  "C"  "B"
>> [6,] "B"  "A"  "A"
>> >
>>
>> And I can't figure out for the life of me why. It should work because I
>> go through the elements of x in order, use that in the leftmost column,
>> and slap the permutation of the remaining elements to the right. What
>> strikes me as particularly odd is that there doesn't even seem to be a
>> systematic sequence of letters in any of the columns. OK, since I
>> really need that function I wrote this piece of crap:
>>
>> perm.stupid <- function(x) {
>>     b <- as.matrix(expand.grid(rep(list(x), length(x))))
>>     b[!sapply(1:nrow(b), function(r) any(duplicated(b[r,]))),]
>> }
>>
>> It works, but words cannot describe its ugliness. And it gets really
>> slow really fast with growing x.
>>
>> So, anyway. My two questions are:
>> 1. Does R really, really, seriously lack a permutation function?
>> 2. OK, stop kidding me. So what's it called?
>> 3. Why doesn't my recursive function work, and what would a
>>    working version look like?
>>
>> Thanks,
>> robert
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 
>       [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-------------------------------------------------
E-Mail: (Ted Harding) <Ted.Harding at wlandres.net>
Date: 25-Jun-2014  Time: 21:55:42
This message was sent by XFMail


From lbajuk at tibco.com  Wed Jun 25 22:59:33 2014
From: lbajuk at tibco.com (Louis Bajuk-Yorgan)
Date: Wed, 25 Jun 2014 13:59:33 -0700
Subject: [R] Join the TIBCO TERR team at useR 2014!
Message-ID: <CAHxTkZHVdx5cWSZBO7f3ijNk_xaitsP5ZOGpCyGNFbMt2517zw@mail.gmail.com>

The TERR team will be at useR 2014, June 30th to July 3rd, to share
the latest enhancements and news around TIBCO Enterprise Runtime for
R. In addition to providing demos at the TIBCO TERR table in the
exhibition area, some of the senior members of the TERR team will be
presenting at the conference:

Louis Bajuk-Yorgan, Sr. Dir., Product Management:?Deploying R into
Business Intelligence and Real-time Applications?. Business track,
Session 5, Wednesday 16:00

Stephen Kaluzny, Lead Statistician for TERR: ?Software Testing and the
R Language?
Business track, Session 6, Thursday 10:00

Michael Sannella, Lead Architect for TERR: "The Compatibility
Challenge: Examining R and Developing TERR". Posters 1, Tuesday, 17:30


-- 
Lou Bajuk-Yorgan
Sr. Director, Product Management
Spotfire, TIBCO Software
206-802-2328
lbajuk at tibco.com
Twitter: @LouBajuk
http://spotfire.tibco.com


From dcarlson at tamu.edu  Wed Jun 25 23:02:05 2014
From: dcarlson at tamu.edu (David L Carlson)
Date: Wed, 25 Jun 2014 21:02:05 +0000
Subject: [R] Simple permutation question
In-Reply-To: <CAM5M9BQh72UXr_FC9RD1O3Lqm_+c5wN+6QW+T-XXGmyo6FpTYQ@mail.gmail.com>
References: <20140625222212.7b84fd47@dotcom.mfs32>
	<CAM5M9BQh72UXr_FC9RD1O3Lqm_+c5wN+6QW+T-XXGmyo6FpTYQ@mail.gmail.com>
Message-ID: <53BF8FB63FAF2E4A9455EF1EE94DA726F79FD3@mb02.ads.tamu.edu>

Assuming you want all of the permutations not just a random permutation (such as sample() give you):

> require(e1071)
> indx <- permutations(5)
> head(indx)
     [,1] [,2] [,3] [,4] [,5]
[1,]    1    2    3    4    5
[2,]    2    1    3    4    5
[3,]    2    3    1    4    5
[4,]    1    3    2    4    5
[5,]    3    1    2    4    5
[6,]    3    2    1    4    5
> tail(indx)
       [,1] [,2] [,3] [,4] [,5]
[115,]    5    4    1    2    3
[116,]    5    4    2    1    3
[117,]    5    4    2    3    1
[118,]    5    4    1    3    2
[119,]    5    4    3    1    2
[120,]    5    4    3    2    1

If you want them converted to numbers try
> apply(ind, 1, function(x) paste(LETTERS[x], collapse=" "))
[1] "A B C D E" "B A C D E" "B C A D E" "A C B D E" "C A B D E" "C B A D E"
> tail(perm.ltrs)
[1] "E D A B C" "E D B A C" "E D B C A" "E D A C B" "E D C A B" "E D C B A"

This is not the only permutation function in R, but this one has the advantage of being symmetrical. The last permutation is the reverse of the first, the penultimate the reverse of the second, etc.

-------------------------------------
David L Carlson
Department of Anthropology
Texas A&M University
College Station, TX 77840-4352

-----Original Message-----
From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On Behalf Of Cade, Brian
Sent: Wednesday, June 25, 2014 3:39 PM
To: Robert Latest
Cc: r-help at r-project.org
Subject: Re: [R] Simple permutation question

It is called sample(,replace=F), where the default argument is sampling
without replacement.
Try
x <- c("A","B","C","D","E")
sample(x)

Brian

Brian S. Cade, PhD

U. S. Geological Survey
Fort Collins Science Center
2150 Centre Ave., Bldg. C
Fort Collins, CO  80526-8818

email:  cadeb at usgs.gov <brian_cade at usgs.gov>
tel:  970 226-9326



On Wed, Jun 25, 2014 at 2:22 PM, Robert Latest <boblatest at gmail.com> wrote:

> So my company has hired a few young McKinsey guys from overseas for a
> couple of weeks to help us with a production line optimization. They
> probably charge what I make in a year, but that's OK because I just
> never have the time to really dive into one particular time, and I have
> to hand it to the consultants that they came up with one or two really
> clever ideas to model the production line. Of course it's up to me to
> feed them the real data which they then churn through their Excel
> models that they cook up during the nights in their hotel rooms, and
> which I then implement back into my experimental system using live data.
>
> Anyway, whenever they need something or come up with something I skip
> out of the room, hack it into R, export the CSV and come back in about
> half the time it takes Excel to even read in the data, let alone
> process it. Of course that gor them curious, and I showed off a couple
> of scripts that condense their abysmal Excel convolutions in a few
> lean and mean lines of R code.
>
> Anyway, I'm in my office with this really attractive, clever young
> McKinsey girl (I'm in my mid-forties, married with kids and all, but I
> still enjoyed impressing a woman with computer stuff, of all things!),
> and one of her models involves a simple permutation of five letters --
> "A" through "E".
>
> And that's when I find out that R doesn't have a permutation function.
> How is that possible? R has EVERYTHING, but not that? I'm
> flabbergasted. Stumped. And now it's up to me to spend the evening at
> home coding that model, and the only thing I really need is that
> permutation.
>
> So this is my first attempt:
>
> perm.broken <- function(x) {
>     if (length(x) == 1) return(x)
>     sapply(1:length(x), function(i) {
>         cbind(x[i], perm(x[-i]))
>     })
> }
>
> But it doesn't work:
> > perm.broken(c("A", "B", "C"))
>      [,1] [,2] [,3]
> [1,] "A"  "B"  "C"
> [2,] "A"  "B"  "C"
> [3,] "B"  "A"  "A"
> [4,] "C"  "C"  "B"
> [5,] "C"  "C"  "B"
> [6,] "B"  "A"  "A"
> >
>
> And I can't figure out for the life of me why. It should work because I
> go through the elements of x in order, use that in the leftmost column,
> and slap the permutation of the remaining elements to the right. What
> strikes me as particularly odd is that there doesn't even seem to be a
> systematic sequence of letters in any of the columns. OK, since I
> really need that function I wrote this piece of crap:
>
> perm.stupid <- function(x) {
>     b <- as.matrix(expand.grid(rep(list(x), length(x))))
>     b[!sapply(1:nrow(b), function(r) any(duplicated(b[r,]))),]
> }
>
> It works, but words cannot describe its ugliness. And it gets really
> slow really fast with growing x.
>
> So, anyway. My two questions are:
> 1. Does R really, really, seriously lack a permutation function?
> 2. OK, stop kidding me. So what's it called?
> 3. Why doesn't my recursive function work, and what would a
>    working version look like?
>
> Thanks,
> robert
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From gunter.berton at gene.com  Wed Jun 25 23:07:12 2014
From: gunter.berton at gene.com (Bert Gunter)
Date: Wed, 25 Jun 2014 14:07:12 -0700
Subject: [R] Simple permutation question
In-Reply-To: <CAM5M9BQh72UXr_FC9RD1O3Lqm_+c5wN+6QW+T-XXGmyo6FpTYQ@mail.gmail.com>
References: <20140625222212.7b84fd47@dotcom.mfs32>
	<CAM5M9BQh72UXr_FC9RD1O3Lqm_+c5wN+6QW+T-XXGmyo6FpTYQ@mail.gmail.com>
Message-ID: <CACk-te2oOsVpLHdScE_rhEYWuL8dOvYc-v51=d95de+TSaaR9w@mail.gmail.com>

and further...

See ?Recall for how to do recursion in R.

However, it is my understanding that recursion is not that efficient
in R. A chain of function environments must be created, and this does
not scale well. (Comments from real experts welcome here).

Cheers,
Bert

Bert Gunter
Genentech Nonclinical Biostatistics
(650) 467-7374

"Data is not information. Information is not knowledge. And knowledge
is certainly not wisdom."
Clifford Stoll




On Wed, Jun 25, 2014 at 1:38 PM, Cade, Brian <cadeb at usgs.gov> wrote:
> It is called sample(,replace=F), where the default argument is sampling
> without replacement.
> Try
> x <- c("A","B","C","D","E")
> sample(x)
>
> Brian
>
> Brian S. Cade, PhD
>
> U. S. Geological Survey
> Fort Collins Science Center
> 2150 Centre Ave., Bldg. C
> Fort Collins, CO  80526-8818
>
> email:  cadeb at usgs.gov <brian_cade at usgs.gov>
> tel:  970 226-9326
>
>
>
> On Wed, Jun 25, 2014 at 2:22 PM, Robert Latest <boblatest at gmail.com> wrote:
>
>> So my company has hired a few young McKinsey guys from overseas for a
>> couple of weeks to help us with a production line optimization. They
>> probably charge what I make in a year, but that's OK because I just
>> never have the time to really dive into one particular time, and I have
>> to hand it to the consultants that they came up with one or two really
>> clever ideas to model the production line. Of course it's up to me to
>> feed them the real data which they then churn through their Excel
>> models that they cook up during the nights in their hotel rooms, and
>> which I then implement back into my experimental system using live data.
>>
>> Anyway, whenever they need something or come up with something I skip
>> out of the room, hack it into R, export the CSV and come back in about
>> half the time it takes Excel to even read in the data, let alone
>> process it. Of course that gor them curious, and I showed off a couple
>> of scripts that condense their abysmal Excel convolutions in a few
>> lean and mean lines of R code.
>>
>> Anyway, I'm in my office with this really attractive, clever young
>> McKinsey girl (I'm in my mid-forties, married with kids and all, but I
>> still enjoyed impressing a woman with computer stuff, of all things!),
>> and one of her models involves a simple permutation of five letters --
>> "A" through "E".
>>
>> And that's when I find out that R doesn't have a permutation function.
>> How is that possible? R has EVERYTHING, but not that? I'm
>> flabbergasted. Stumped. And now it's up to me to spend the evening at
>> home coding that model, and the only thing I really need is that
>> permutation.
>>
>> So this is my first attempt:
>>
>> perm.broken <- function(x) {
>>     if (length(x) == 1) return(x)
>>     sapply(1:length(x), function(i) {
>>         cbind(x[i], perm(x[-i]))
>>     })
>> }
>>
>> But it doesn't work:
>> > perm.broken(c("A", "B", "C"))
>>      [,1] [,2] [,3]
>> [1,] "A"  "B"  "C"
>> [2,] "A"  "B"  "C"
>> [3,] "B"  "A"  "A"
>> [4,] "C"  "C"  "B"
>> [5,] "C"  "C"  "B"
>> [6,] "B"  "A"  "A"
>> >
>>
>> And I can't figure out for the life of me why. It should work because I
>> go through the elements of x in order, use that in the leftmost column,
>> and slap the permutation of the remaining elements to the right. What
>> strikes me as particularly odd is that there doesn't even seem to be a
>> systematic sequence of letters in any of the columns. OK, since I
>> really need that function I wrote this piece of crap:
>>
>> perm.stupid <- function(x) {
>>     b <- as.matrix(expand.grid(rep(list(x), length(x))))
>>     b[!sapply(1:nrow(b), function(r) any(duplicated(b[r,]))),]
>> }
>>
>> It works, but words cannot describe its ugliness. And it gets really
>> slow really fast with growing x.
>>
>> So, anyway. My two questions are:
>> 1. Does R really, really, seriously lack a permutation function?
>> 2. OK, stop kidding me. So what's it called?
>> 3. Why doesn't my recursive function work, and what would a
>>    working version look like?
>>
>> Thanks,
>> robert
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From dcarlson at tamu.edu  Wed Jun 25 23:07:34 2014
From: dcarlson at tamu.edu (David L Carlson)
Date: Wed, 25 Jun 2014 21:07:34 +0000
Subject: [R] Simple permutation question
In-Reply-To: <53BF8FB63FAF2E4A9455EF1EE94DA726F79FD3@mb02.ads.tamu.edu>
References: <20140625222212.7b84fd47@dotcom.mfs32>
	<CAM5M9BQh72UXr_FC9RD1O3Lqm_+c5wN+6QW+T-XXGmyo6FpTYQ@mail.gmail.com>
	<53BF8FB63FAF2E4A9455EF1EE94DA726F79FD3@mb02.ads.tamu.edu>
Message-ID: <53BF8FB63FAF2E4A9455EF1EE94DA726F79FF8@mb02.ads.tamu.edu>

A couple of typos in the last section. It should be 

> perm.ltrs <- apply(indx, 1, function(x) paste(LETTERS[x], collapse=" "))
> tail(perm.ltrs)
[1] "E D A B C" "E D B A C" "E D B C A" "E D A C B" "E D C A B" "E D C B A"
> tail(perm.ltrs)
[1] "E D A B C" "E D B A C" "E D B C A" "E D A C B" "E D C A B" "E D C B A"
>

David C

-----Original Message-----
From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On Behalf Of David L Carlson
Sent: Wednesday, June 25, 2014 4:02 PM
To: Cade, Brian; Robert Latest
Cc: r-help at r-project.org
Subject: Re: [R] Simple permutation question

Assuming you want all of the permutations not just a random permutation (such as sample() give you):

> require(e1071)
> indx <- permutations(5)
> head(indx)
     [,1] [,2] [,3] [,4] [,5]
[1,]    1    2    3    4    5
[2,]    2    1    3    4    5
[3,]    2    3    1    4    5
[4,]    1    3    2    4    5
[5,]    3    1    2    4    5
[6,]    3    2    1    4    5
> tail(indx)
       [,1] [,2] [,3] [,4] [,5]
[115,]    5    4    1    2    3
[116,]    5    4    2    1    3
[117,]    5    4    2    3    1
[118,]    5    4    1    3    2
[119,]    5    4    3    1    2
[120,]    5    4    3    2    1

If you want them converted to numbers try
> apply(ind, 1, function(x) paste(LETTERS[x], collapse=" "))
[1] "A B C D E" "B A C D E" "B C A D E" "A C B D E" "C A B D E" "C B A D E"
> tail(perm.ltrs)
[1] "E D A B C" "E D B A C" "E D B C A" "E D A C B" "E D C A B" "E D C B A"

This is not the only permutation function in R, but this one has the advantage of being symmetrical. The last permutation is the reverse of the first, the penultimate the reverse of the second, etc.

-------------------------------------
David L Carlson
Department of Anthropology
Texas A&M University
College Station, TX 77840-4352

-----Original Message-----
From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On Behalf Of Cade, Brian
Sent: Wednesday, June 25, 2014 3:39 PM
To: Robert Latest
Cc: r-help at r-project.org
Subject: Re: [R] Simple permutation question

It is called sample(,replace=F), where the default argument is sampling
without replacement.
Try
x <- c("A","B","C","D","E")
sample(x)

Brian

Brian S. Cade, PhD

U. S. Geological Survey
Fort Collins Science Center
2150 Centre Ave., Bldg. C
Fort Collins, CO  80526-8818

email:  cadeb at usgs.gov <brian_cade at usgs.gov>
tel:  970 226-9326



On Wed, Jun 25, 2014 at 2:22 PM, Robert Latest <boblatest at gmail.com> wrote:

> So my company has hired a few young McKinsey guys from overseas for a
> couple of weeks to help us with a production line optimization. They
> probably charge what I make in a year, but that's OK because I just
> never have the time to really dive into one particular time, and I have
> to hand it to the consultants that they came up with one or two really
> clever ideas to model the production line. Of course it's up to me to
> feed them the real data which they then churn through their Excel
> models that they cook up during the nights in their hotel rooms, and
> which I then implement back into my experimental system using live data.
>
> Anyway, whenever they need something or come up with something I skip
> out of the room, hack it into R, export the CSV and come back in about
> half the time it takes Excel to even read in the data, let alone
> process it. Of course that gor them curious, and I showed off a couple
> of scripts that condense their abysmal Excel convolutions in a few
> lean and mean lines of R code.
>
> Anyway, I'm in my office with this really attractive, clever young
> McKinsey girl (I'm in my mid-forties, married with kids and all, but I
> still enjoyed impressing a woman with computer stuff, of all things!),
> and one of her models involves a simple permutation of five letters --
> "A" through "E".
>
> And that's when I find out that R doesn't have a permutation function.
> How is that possible? R has EVERYTHING, but not that? I'm
> flabbergasted. Stumped. And now it's up to me to spend the evening at
> home coding that model, and the only thing I really need is that
> permutation.
>
> So this is my first attempt:
>
> perm.broken <- function(x) {
>     if (length(x) == 1) return(x)
>     sapply(1:length(x), function(i) {
>         cbind(x[i], perm(x[-i]))
>     })
> }
>
> But it doesn't work:
> > perm.broken(c("A", "B", "C"))
>      [,1] [,2] [,3]
> [1,] "A"  "B"  "C"
> [2,] "A"  "B"  "C"
> [3,] "B"  "A"  "A"
> [4,] "C"  "C"  "B"
> [5,] "C"  "C"  "B"
> [6,] "B"  "A"  "A"
> >
>
> And I can't figure out for the life of me why. It should work because I
> go through the elements of x in order, use that in the leftmost column,
> and slap the permutation of the remaining elements to the right. What
> strikes me as particularly odd is that there doesn't even seem to be a
> systematic sequence of letters in any of the columns. OK, since I
> really need that function I wrote this piece of crap:
>
> perm.stupid <- function(x) {
>     b <- as.matrix(expand.grid(rep(list(x), length(x))))
>     b[!sapply(1:nrow(b), function(r) any(duplicated(b[r,]))),]
> }
>
> It works, but words cannot describe its ugliness. And it gets really
> slow really fast with growing x.
>
> So, anyway. My two questions are:
> 1. Does R really, really, seriously lack a permutation function?
> 2. OK, stop kidding me. So what's it called?
> 3. Why doesn't my recursive function work, and what would a
>    working version look like?
>
> Thanks,
> robert
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From jdnewmil at dcn.davis.ca.us  Wed Jun 25 23:16:08 2014
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Wed, 25 Jun 2014 14:16:08 -0700 (PDT)
Subject: [R] Simple permutation question
In-Reply-To: <20140625222212.7b84fd47@dotcom.mfs32>
References: <20140625222212.7b84fd47@dotcom.mfs32>
Message-ID: <alpine.BSF.2.00.1406251410240.12217@pedal.dcn.davis.ca.us>

The brokenness of your perm.broken function arises from the attempted use 
of sapply to bind matrices together, which is not something sapply does.

perm.fixed <- function( x ) {
   if ( length( x ) == 1 ) return( matrix( x, nrow=1 ) )
   lst <- lapply( seq_along( x )
                , function( i ) {
                    cbind( x[ i ], perm.jdn( x[ -i ] ) )
                  }
                )
   do.call(rbind, lst)
}


On Wed, 25 Jun 2014, Robert Latest wrote:

> So my company has hired a few young McKinsey guys from overseas for a
> couple of weeks to help us with a production line optimization. They
> probably charge what I make in a year, but that's OK because I just
> never have the time to really dive into one particular time, and I have
> to hand it to the consultants that they came up with one or two really
> clever ideas to model the production line. Of course it's up to me to
> feed them the real data which they then churn through their Excel
> models that they cook up during the nights in their hotel rooms, and
> which I then implement back into my experimental system using live data.
>
> Anyway, whenever they need something or come up with something I skip
> out of the room, hack it into R, export the CSV and come back in about
> half the time it takes Excel to even read in the data, let alone
> process it. Of course that gor them curious, and I showed off a couple
> of scripts that condense their abysmal Excel convolutions in a few
> lean and mean lines of R code.
>
> Anyway, I'm in my office with this really attractive, clever young
> McKinsey girl (I'm in my mid-forties, married with kids and all, but I
> still enjoyed impressing a woman with computer stuff, of all things!),
> and one of her models involves a simple permutation of five letters --
> "A" through "E".
>
> And that's when I find out that R doesn't have a permutation function.
> How is that possible? R has EVERYTHING, but not that? I'm
> flabbergasted. Stumped. And now it's up to me to spend the evening at
> home coding that model, and the only thing I really need is that
> permutation.
>
> So this is my first attempt:
>
> perm.broken <- function(x) {
>    if (length(x) == 1) return(x)
>    sapply(1:length(x), function(i) {
>        cbind(x[i], perm(x[-i]))
>    })
> }
>
> But it doesn't work:
>> perm.broken(c("A", "B", "C"))
>     [,1] [,2] [,3]
> [1,] "A"  "B"  "C"
> [2,] "A"  "B"  "C"
> [3,] "B"  "A"  "A"
> [4,] "C"  "C"  "B"
> [5,] "C"  "C"  "B"
> [6,] "B"  "A"  "A"
>>
>
> And I can't figure out for the life of me why. It should work because I
> go through the elements of x in order, use that in the leftmost column,
> and slap the permutation of the remaining elements to the right. What
> strikes me as particularly odd is that there doesn't even seem to be a
> systematic sequence of letters in any of the columns. OK, since I
> really need that function I wrote this piece of crap:
>
> perm.stupid <- function(x) {
>    b <- as.matrix(expand.grid(rep(list(x), length(x))))
>    b[!sapply(1:nrow(b), function(r) any(duplicated(b[r,]))),]
> }
>
> It works, but words cannot describe its ugliness. And it gets really
> slow really fast with growing x.
>
> So, anyway. My two questions are:
> 1. Does R really, really, seriously lack a permutation function?
> 2. OK, stop kidding me. So what's it called?
> 3. Why doesn't my recursive function work, and what would a
>   working version look like?
>
> Thanks,
> robert
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                       Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k


From jdnewmil at dcn.davis.ca.us  Wed Jun 25 23:20:40 2014
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Wed, 25 Jun 2014 14:20:40 -0700 (PDT)
Subject: [R] Simple permutation question
In-Reply-To: <alpine.BSF.2.00.1406251410240.12217@pedal.dcn.davis.ca.us>
References: <20140625222212.7b84fd47@dotcom.mfs32>
	<alpine.BSF.2.00.1406251410240.12217@pedal.dcn.davis.ca.us>
Message-ID: <alpine.BSF.2.00.1406251419140.31016@pedal.dcn.davis.ca.us>

sorry... editing on the fly... try:

perm.fixed <- function( x ) {
   if ( length( x ) == 1 ) return( matrix( x, nrow=1 ) )
   lst <- lapply( seq_along( x )
                , function( i ) {
                    cbind( x[ i ], perm.fixed( x[ -i ] ) )
                  }
                )
   do.call( rbind, lst )
}

On Wed, 25 Jun 2014, Jeff Newmiller wrote:

> The brokenness of your perm.broken function arises from the attempted use of 
> sapply to bind matrices together, which is not something sapply does.
>
> perm.fixed <- function( x ) {
>  if ( length( x ) == 1 ) return( matrix( x, nrow=1 ) )
>  lst <- lapply( seq_along( x )
>               , function( i ) {
>                   cbind( x[ i ], perm.jdn( x[ -i ] ) )
>                 }
>               )
>  do.call(rbind, lst)
> }
>
>
> On Wed, 25 Jun 2014, Robert Latest wrote:
>
>> So my company has hired a few young McKinsey guys from overseas for a
>> couple of weeks to help us with a production line optimization. They
>> probably charge what I make in a year, but that's OK because I just
>> never have the time to really dive into one particular time, and I have
>> to hand it to the consultants that they came up with one or two really
>> clever ideas to model the production line. Of course it's up to me to
>> feed them the real data which they then churn through their Excel
>> models that they cook up during the nights in their hotel rooms, and
>> which I then implement back into my experimental system using live data.
>> 
>> Anyway, whenever they need something or come up with something I skip
>> out of the room, hack it into R, export the CSV and come back in about
>> half the time it takes Excel to even read in the data, let alone
>> process it. Of course that gor them curious, and I showed off a couple
>> of scripts that condense their abysmal Excel convolutions in a few
>> lean and mean lines of R code.
>> 
>> Anyway, I'm in my office with this really attractive, clever young
>> McKinsey girl (I'm in my mid-forties, married with kids and all, but I
>> still enjoyed impressing a woman with computer stuff, of all things!),
>> and one of her models involves a simple permutation of five letters --
>> "A" through "E".
>> 
>> And that's when I find out that R doesn't have a permutation function.
>> How is that possible? R has EVERYTHING, but not that? I'm
>> flabbergasted. Stumped. And now it's up to me to spend the evening at
>> home coding that model, and the only thing I really need is that
>> permutation.
>> 
>> So this is my first attempt:
>> 
>> perm.broken <- function(x) {
>>    if (length(x) == 1) return(x)
>>    sapply(1:length(x), function(i) {
>>        cbind(x[i], perm(x[-i]))
>>    })
>> }
>> 
>> But it doesn't work:
>>> perm.broken(c("A", "B", "C"))
>>     [,1] [,2] [,3]
>> [1,] "A"  "B"  "C"
>> [2,] "A"  "B"  "C"
>> [3,] "B"  "A"  "A"
>> [4,] "C"  "C"  "B"
>> [5,] "C"  "C"  "B"
>> [6,] "B"  "A"  "A"
>>> 
>> 
>> And I can't figure out for the life of me why. It should work because I
>> go through the elements of x in order, use that in the leftmost column,
>> and slap the permutation of the remaining elements to the right. What
>> strikes me as particularly odd is that there doesn't even seem to be a
>> systematic sequence of letters in any of the columns. OK, since I
>> really need that function I wrote this piece of crap:
>> 
>> perm.stupid <- function(x) {
>>    b <- as.matrix(expand.grid(rep(list(x), length(x))))
>>    b[!sapply(1:nrow(b), function(r) any(duplicated(b[r,]))),]
>> }
>> 
>> It works, but words cannot describe its ugliness. And it gets really
>> slow really fast with growing x.
>> 
>> So, anyway. My two questions are:
>> 1. Does R really, really, seriously lack a permutation function?
>> 2. OK, stop kidding me. So what's it called?
>> 3. Why doesn't my recursive function work, and what would a
>>   working version look like?
>> 
>> Thanks,
>> robert
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>> 
>
> ---------------------------------------------------------------------------
> Jeff Newmiller                        The     .....       .....  Go Live...
> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
>                                      Live:   OO#.. Dead: OO#..  Playing
> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
> /Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                       Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k


From ferra.xu at yahoo.com  Wed Jun 25 22:37:49 2014
From: ferra.xu at yahoo.com (Ferra Xu)
Date: Wed, 25 Jun 2014 13:37:49 -0700
Subject: [R] plot a 3-D marked point process
Message-ID: <1403728669.73037.YahooMailNeo@web125106.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140625/c34baa93/attachment.pl>

From slavrenz at purdue.edu  Wed Jun 25 23:02:31 2014
From: slavrenz at purdue.edu (Lavrenz, Steven M)
Date: Wed, 25 Jun 2014 21:02:31 +0000
Subject: [R] How to troubleshoot issue with curve() function?
In-Reply-To: <1403729812917-4692995.post@n4.nabble.com>
References: <1403729812917-4692995.post@n4.nabble.com>
Message-ID: <A6E66984D41D2643B95A86C24AB9BBF32E771FC0@WPVEXCMBX02.purdue.lcl>

I am trying to plot data that I imported with read. table using a Weibull distribution. Here's the code I used for importing the data:

data <- read.table(file =
"C:/Users/Steven/OneDrive/Unfiled/Temp/phase2.csv", header = FALSE, sep = ",", dec = ".", col.names = c("cycle_time", "cycle_length", "red_time", "prot_green", "perm_green", "veh_count", "vc", "max_delay", "prot_occ", "perm_occ", "red5_occ", "gor", "ror", "arrival_time"), na.strings = "NA")

And here's my code for plotting:

curve(dexp(data(arrival_time), rate=0.06), from = 0, to = 60, main = "Exponential distribution")

I keep getting this error message:

Error in curve(dexp(data(arrival_time), rate = 0.06), from = 0, to = 60,  : 
  'expr' must be a function, or a call or an expression containing 'x'

How to I begin to troubleshoot this? The only thing I can think of is that my variable of interest, "arrival_time", does contain a number of rows with blanks, but would that be the underlying cause? If so, can I get the function to ignore blank rows?


From puetz at mpipsykl.mpg.de  Thu Jun 26 00:43:09 2014
From: puetz at mpipsykl.mpg.de (=?windows-1252?Q?Benno_P=FCtz?=)
Date: Thu, 26 Jun 2014 00:43:09 +0200
Subject: [R] How to troubleshoot issue with curve() function?
In-Reply-To: <A6E66984D41D2643B95A86C24AB9BBF32E771FC0@WPVEXCMBX02.purdue.lcl>
References: <1403729812917-4692995.post@n4.nabble.com>
	<A6E66984D41D2643B95A86C24AB9BBF32E771FC0@WPVEXCMBX02.purdue.lcl>
Message-ID: <18ADE1E2-CE53-41C2-BD5F-A484697A5426@mpipsykl.mpg.de>

I?d start trying to understand the error message - it is actually pretty clear (see ?curve).
I suspect curve is not the function you want to use, rather something like

plot(data$arrival_time, dexp(data$arrival_time, rate=0.06), xlim = c(0,  60), type=?l?, main = "Exponential distribution?)

assuming your arrival times lie in the specified window.

Just a wild guess though, as you didn?t provide data (see footer)

On 25 Jun 2014, at 23:02 , Lavrenz, Steven M <slavrenz at purdue.edu> wrote:

> I am trying to plot data that I imported with read. table using a Weibull distribution. Here's the code I used for importing the data:
> 
> data <- read.table(file =
> "C:/Users/Steven/OneDrive/Unfiled/Temp/phase2.csv", header = FALSE, sep = ",", dec = ".", col.names = c("cycle_time", "cycle_length", "red_time", "prot_green", "perm_green", "veh_count", "vc", "max_delay", "prot_occ", "perm_occ", "red5_occ", "gor", "ror", "arrival_time"), na.strings = "NA")
> 
> And here's my code for plotting:
> 
> curve(dexp(data(arrival_time), rate=0.06), from = 0, to = 60, main = "Exponential distribution")
> 
> I keep getting this error message:
> 
> Error in curve(dexp(data(arrival_time), rate = 0.06), from = 0, to = 60,  : 
>  'expr' must be a function, or a call or an expression containing 'x'
> 
> How to I begin to troubleshoot this? The only thing I can think of is that my variable of interest, "arrival_time", does contain a number of rows with blanks, but would that be the underlying cause? If so, can I get the function to ignore blank rows?
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 


From bbolker at gmail.com  Thu Jun 26 02:48:28 2014
From: bbolker at gmail.com (Ben Bolker)
Date: Thu, 26 Jun 2014 00:48:28 +0000
Subject: [R] plot a 3-D marked point process
References: <1403728669.73037.YahooMailNeo@web125106.mail.ne1.yahoo.com>
Message-ID: <loom.20140626T024710-38@post.gmane.org>

Ferra Xu <ferra.xu <at> yahoo.com> writes:

> 
> Hello All
> 
> I intend to plot a 3-D marked point process. 
> Could you please help me to find a code or a related package?

How about scatterplot3d or rgl::plot3d ?
Googling "r 3d point plot" gets you a lot of good starting points.
(The easiest way to indicate the marks would be by modifying colour
according to mark class.)


From ferra.xu at yahoo.com  Thu Jun 26 05:05:29 2014
From: ferra.xu at yahoo.com (Ferra Xu)
Date: Wed, 25 Jun 2014 20:05:29 -0700
Subject: [R] Space-time non-homogeneous Poisson process
Message-ID: <1403751929.43347.YahooMailNeo@web125101.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140625/cfc1a117/attachment.pl>

From ferra.xu at yahoo.com  Thu Jun 26 05:05:29 2014
From: ferra.xu at yahoo.com (Ferra Xu)
Date: Wed, 25 Jun 2014 20:05:29 -0700
Subject: [R] Space-time non-homogeneous Poisson process
Message-ID: <1403751929.43347.YahooMailNeo@web125101.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140625/cfc1a117/attachment-0001.pl>

From wht_crl at yahoo.com  Thu Jun 26 09:32:58 2014
From: wht_crl at yahoo.com (carol white)
Date: Thu, 26 Jun 2014 00:32:58 -0700
Subject: [R] read a file of text with read.table
Message-ID: <1403767978.43512.YahooMailNeo@web121506.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140626/dbe66f23/attachment.pl>

From frtog at vestas.com  Thu Jun 26 10:26:25 2014
From: frtog at vestas.com (=?iso-8859-1?Q?Frede_Aakmann_T=F8gersen?=)
Date: Thu, 26 Jun 2014 10:26:25 +0200
Subject: [R] read a file of text with read.table
In-Reply-To: <1403767978.43512.YahooMailNeo@web121506.mail.ne1.yahoo.com>
References: <1403767978.43512.YahooMailNeo@web121506.mail.ne1.yahoo.com>
Message-ID: <B078CDF40DFE4045AF172A8B4F68FC4857C66A1D02@DKRDSEXC016.vestas.net>

Hi Carol

I cannot reproduce what you're seeing.

> tmp <- read.table(text = "absfjdslf
+ jfdldskjff
+ jfsldfjslk")

> str(tmp)
'data.frame':	3 obs. of  1 variable:
 $ V1: Factor w/ 3 levels "absfjdslf","jfdldskjff",..: 1 2 3

> tmp <- read.table(text = "absfjdslf
+ jfdldskjff
+ jfsldfjslk",
+ colClasses = "character")

> str(tmp)
'data.frame':	3 obs. of  1 variable:
 $ V1: chr  "absfjdslf" "jfdldskjff" "jfsldfjslk"

Yours sincerely / Med venlig hilsen


Frede Aakmann T?gersen
Specialist, M.Sc., Ph.D.
Plant Performance & Modeling

Technology & Service Solutions
T +45 9730 5135
M +45 2547 6050
frtog at vestas.com
http://www.vestas.com

Company reg. name: Vestas Wind Systems A/S
This e-mail is subject to our e-mail disclaimer statement.
Please refer to www.vestas.com/legal/notice
If you have received this e-mail in error please contact the sender. 


> -----Original Message-----
> From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org]
> On Behalf Of carol white
> Sent: 26. juni 2014 09:33
> To: r-help at r-project.org
> Subject: [R] read a file of text with read.table
> 
> It might be a primitive question but I have a file of text and there is no
> separator between character on each line and the strings on each line have
> the same length. The format is like the following
> 
> absfjdslf
> jfdldskjff
> jfsldfjslk
> 
> When I read the file with read.table("myfile",colClasses = "character"),
> instead of putting the strings in a table of number of rows x length of string,
> read.table saves the file in a table of number of rows x 1 and each element
> seems to be a factor. Why does read.table not account for? colClasses =
> "character"?
> 
> thanks,
> 
> Carol
> 	[[alternative HTML version deleted]]


From r.turner at auckland.ac.nz  Thu Jun 26 10:39:09 2014
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Thu, 26 Jun 2014 20:39:09 +1200
Subject: [R] read a file of text with read.table
In-Reply-To: <1403767978.43512.YahooMailNeo@web121506.mail.ne1.yahoo.com>
References: <1403767978.43512.YahooMailNeo@web121506.mail.ne1.yahoo.com>
Message-ID: <53ABDC2D.7050307@auckland.ac.nz>


On 26/06/14 19:32, carol white wrote:

> It might be a primitive question

All questions are primitive; some questions are more primitive than others.

> but I have a file of text and there
> is no separator between character on each line and the strings on
> each line have the same length. The format is like the following
> absfjdslf
> jfdldskjff
> jfsldfjslk
>
> When I read the file with read.table("myfile",colClasses =
> "character"), instead of putting the strings in a table of number of
> rows x length of string, read.table saves the file in a table of
> number of rows x 1 and each element seems to be a factor. Why does
> read.table not account for  colClasses = "character"?

(1) You might try setting stringsAsFactors=FALSE rather than
colClasses = "character".

(2) Since your "table" has only one column you might as well use scan() 
(with what="") and save wear and tear on the system.

(3) In your example the strings do *not* have the same length; the first 
has 9 characters, the next two have 10 each.

(4) Do you want to get a data frame each column of which is a single 
character?  This was not clear from your email.  Do you know how to do 
this?  (It's easy --- when the string lengths are indeed all the same.)
I appended a "g" to the first string and did:

ttt <- scan("temp.txt",what="")
sss <- strsplit(ttt,"")
rrr <- as.data.frame(do.call(rbind,sss))
rrr
   V1 V2 V3 V4 V5 V6 V7 V8 V9 V10
1  a  b  s  f  j  d  s  l  f   g
2  j  f  d  l  d  s  k  j  f   f
3  j  f  s  l  d  f  j  s  l   k

Is this what you want?

cheers,

Rolf Turner


From ruipbarradas at sapo.pt  Thu Jun 26 10:45:15 2014
From: ruipbarradas at sapo.pt (Rui Barradas)
Date: Thu, 26 Jun 2014 10:45:15 +0200
Subject: [R] read a file of text with read.table
In-Reply-To: <1403767978.43512.YahooMailNeo@web121506.mail.ne1.yahoo.com>
References: <1403767978.43512.YahooMailNeo@web121506.mail.ne1.yahoo.com>
Message-ID: <53ABDD9B.1070909@sapo.pt>

Hello,

Try using option stringsAsFactors = FALSE.

Hope this helps,

Rui Barradas

On 26/06/2014 09:32, carol white wrote:
> It might be a primitive question but I have a file of text and there is no separator between character on each line and the strings on each line have the same length. The format is like the following
>
> absfjdslf
> jfdldskjff
> jfsldfjslk
>
> When I read the file with read.table("myfile",colClasses = "character"), instead of putting the strings in a table of number of rows x length of string, read.table saves the file in a table of number of rows x 1 and each element seems to be a factor. Why does read.table not account for  colClasses = "character"?
>
> thanks,
>
> Carol
> 	[[alternative HTML version deleted]]
>
>
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From frtog at vestas.com  Thu Jun 26 10:47:23 2014
From: frtog at vestas.com (=?iso-8859-1?Q?Frede_Aakmann_T=F8gersen?=)
Date: Thu, 26 Jun 2014 10:47:23 +0200
Subject: [R] read a file of text with read.table
In-Reply-To: <53ABDC2D.7050307@auckland.ac.nz>
References: <1403767978.43512.YahooMailNeo@web121506.mail.ne1.yahoo.com>
	<53ABDC2D.7050307@auckland.ac.nz>
Message-ID: <B078CDF40DFE4045AF172A8B4F68FC4857C66A1D32@DKRDSEXC016.vestas.net>

Hi

Actually I had to read the man before answering Carol. Here it goes:

stringsAsFactors: logical: should character vectors be converted to
          factors?  Note that this is overridden by 'as.is' and
          'colClasses', both of which allow finer control.

So setting colClasses should work. Here is instructions for the colClasses argument:

colClasses: character.  A vector of classes to be assumed for the
          columns.  Recycled as necessary, or if the character vector
          is named, unspecified values are taken to be 'NA'.

          Possible values are 'NA' (the default, when 'type.convert' is
          used), '"NULL"' (when the column is skipped), one of the
          atomic vector classes (logical, integer, numeric, complex,
          character, raw), or '"factor"', '"Date"' or '"POSIXct"'.
          Otherwise there needs to be an 'as' method (from package
          'methods') for conversion from '"character"' to the specified
          formal class.

          Note that 'colClasses' is specified per column (not per
          variable) and so includes the column of row names (if any).

And to complete

   as.is: the default behavior of 'read.table' is to convert character
          variables (which are not converted to logical, numeric or
          complex) to factors.  The variable 'as.is' controls the
          conversion of columns not otherwise specified by
          'colClasses'.  Its value is either a vector of logicals
          (values are recycled if necessary), or a vector of numeric or
          character indices which specify which columns should not be
          converted to factors.

          Note: to suppress all conversions including those of numeric
          columns, set 'colClasses = "character"'.

          Note that 'as.is' is specified per column (not per variable)
          and so includes the column of row names (if any) and any
          columns to be skipped.

I think these are the only settings influencing the conversions. 







Yours sincerely / Med venlig hilsen


Frede Aakmann T?gersen
Specialist, M.Sc., Ph.D.
Plant Performance & Modeling

Technology & Service Solutions
T +45 9730 5135
M +45 2547 6050
frtog at vestas.com
http://www.vestas.com

Company reg. name: Vestas Wind Systems A/S
This e-mail is subject to our e-mail disclaimer statement.
Please refer to www.vestas.com/legal/notice
If you have received this e-mail in error please contact the sender. 


> -----Original Message-----
> From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org]
> On Behalf Of Rolf Turner
> Sent: 26. juni 2014 10:39
> To: carol white
> Cc: r-help at r-project.org
> Subject: Re: [R] read a file of text with read.table
> 
> 
> On 26/06/14 19:32, carol white wrote:
> 
> > It might be a primitive question
> 
> All questions are primitive; some questions are more primitive than others.
> 
> > but I have a file of text and there
> > is no separator between character on each line and the strings on
> > each line have the same length. The format is like the following
> > absfjdslf
> > jfdldskjff
> > jfsldfjslk
> >
> > When I read the file with read.table("myfile",colClasses =
> > "character"), instead of putting the strings in a table of number of
> > rows x length of string, read.table saves the file in a table of
> > number of rows x 1 and each element seems to be a factor. Why does
> > read.table not account for  colClasses = "character"?
> 
> (1) You might try setting stringsAsFactors=FALSE rather than
> colClasses = "character".
> 
> (2) Since your "table" has only one column you might as well use scan()
> (with what="") and save wear and tear on the system.
> 
> (3) In your example the strings do *not* have the same length; the first
> has 9 characters, the next two have 10 each.
> 
> (4) Do you want to get a data frame each column of which is a single
> character?  This was not clear from your email.  Do you know how to do
> this?  (It's easy --- when the string lengths are indeed all the same.)
> I appended a "g" to the first string and did:
> 
> ttt <- scan("temp.txt",what="")
> sss <- strsplit(ttt,"")
> rrr <- as.data.frame(do.call(rbind,sss))
> rrr
>    V1 V2 V3 V4 V5 V6 V7 V8 V9 V10
> 1  a  b  s  f  j  d  s  l  f   g
> 2  j  f  d  l  d  s  k  j  f   f
> 3  j  f  s  l  d  f  j  s  l   k
> 
> Is this what you want?
> 
> cheers,
> 
> Rolf Turner
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.


From wht_crl at yahoo.com  Thu Jun 26 11:21:48 2014
From: wht_crl at yahoo.com (carol white)
Date: Thu, 26 Jun 2014 02:21:48 -0700
Subject: [R] read a file of text with read.table
In-Reply-To: <53ABD2CB.2080500@warwick.ac.uk>
References: <1403767978.43512.YahooMailNeo@web121506.mail.ne1.yahoo.com>
	<53ABD2CB.2080500@warwick.ac.uk>
Message-ID: <1403774508.43556.YahooMailNeo@web121506.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140626/16dc417d/attachment.pl>

From r.turner at auckland.ac.nz  Thu Jun 26 11:27:39 2014
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Thu, 26 Jun 2014 21:27:39 +1200
Subject: [R] read a file of text with read.table
In-Reply-To: <B078CDF40DFE4045AF172A8B4F68FC4857C66A1D32@DKRDSEXC016.vestas.net>
References: <1403767978.43512.YahooMailNeo@web121506.mail.ne1.yahoo.com>
	<53ABDC2D.7050307@auckland.ac.nz>
	<B078CDF40DFE4045AF172A8B4F68FC4857C66A1D32@DKRDSEXC016.vestas.net>
Message-ID: <53ABE78B.3080900@auckland.ac.nz>

On 26/06/14 20:47, Frede Aakmann T?gersen wrote:
> Hi
>
> Actually I had to read the man before answering Carol. Here it goes:
>
> stringsAsFactors: logical: should character vectors be converted to
>            factors?  Note that this is overridden by 'as.is' and
>            'colClasses', both of which allow finer control.
>
> So setting colClasses should work.

<SNIP>

You are absolutely correct; setting colClasses *should* work.  So either 
Carol has done something strange about which she is not telling us, or 
the paranoids ***really are*** out to get her! :-)

cheers,

Rolf Turner


From goran.brostrom at umu.se  Thu Jun 26 11:35:23 2014
From: goran.brostrom at umu.se (=?ISO-8859-1?Q?G=F6ran_Brostr=F6m?=)
Date: Thu, 26 Jun 2014 11:35:23 +0200
Subject: [R] read a file of text with read.table
In-Reply-To: <1403774508.43556.YahooMailNeo@web121506.mail.ne1.yahoo.com>
References: <1403767978.43512.YahooMailNeo@web121506.mail.ne1.yahoo.com>	<53ABD2CB.2080500@warwick.ac.uk>
	<1403774508.43556.YahooMailNeo@web121506.mail.ne1.yahoo.com>
Message-ID: <53ABE95B.6090803@umu.se>

Carol,

while sep="" is the default, it really means 'whitespace', see the 
documentation of 'sep'.

G?ran Brostr?m

On 2014-06-26 11:21, carol white wrote:
> Hi,
>
> with read.fwf, it works.
>
>
> But I still don't understand why it doesn't work with read.table
> since the sep by default is "", which is the case and in one trial, I
> used  read.table("myfile",colClasses = "character",
> stringsAsFactors=FALSE, and stil didn't work but it should have.
>
> Regards,
>
>
>
> On Thursday, June 26, 2014 9:59 AM, Ron Crump
> <R.E.Crump at warwick.ac.uk> wrote:
>
>
>
> Hi Carol,
>> It might be a primitive question but I have a file of text and
>> there is no separator between character on each line and the
>> strings on each line have the same length. The format is like the
>> following
>>
>> absfjdslf jfdldskjff jfsldfjslk
>>
>> When I read the file with read.table("myfile",colClasses =
>> "character"), instead of putting the strings in a table of number
>> of rows x length of string, read.table saves the file in a table of
>> number of rows x 1 and each element seems to be a factor. Why does
>> read.table not account for  colClasses = "character"?
> read.table relies on a separator to differentiate between columns, so
> it is not appropriate for your file, read.fwf would do the job.
>
> Setting colClasses (in my understanding) tells read.table how to
> treat input as it comes in - so it disables some testing of data
> types and makes reading quicker, it does not disable the setting of
> character data to be factors, which is the default. You need to use
> the stringsAsFactors=FALSE option for that.
>
> So, for your example (and I have added a letter to the first row to
> make it the same length as the others):
>
> cf <- "absfjdslfx
>
> jfdldskjff jfsldfjslk"
>
> cdf <-
> read.fwf(textConnection(cf),widths=rep(1,10),colClasses="character",stringsAsFactors=FALSE)
>
>  See ?read.fwf for more information. A width is required for each
> column (in this case 1 repeated 10 times).
>
> Hope this helps.
>
> Ron. [[alternative HTML version deleted]]
>


From r.turner at auckland.ac.nz  Thu Jun 26 11:37:08 2014
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Thu, 26 Jun 2014 21:37:08 +1200
Subject: [R] read a file of text with read.table
In-Reply-To: <1403774508.43556.YahooMailNeo@web121506.mail.ne1.yahoo.com>
References: <1403767978.43512.YahooMailNeo@web121506.mail.ne1.yahoo.com>
	<53ABD2CB.2080500@warwick.ac.uk>
	<1403774508.43556.YahooMailNeo@web121506.mail.ne1.yahoo.com>
Message-ID: <53ABE9C4.1020301@auckland.ac.nz>

On 26/06/14 21:21, carol white wrote:
> Hi,
>
> with read.fwf, it works.
>
>
> But I still don't understand why it doesn't work with read.table
> since the sep by default is "", which is the case and in one trial, I
> used  read.table("myfile",colClasses = "character",
> stringsAsFactors=FALSE, and stil didn't work but it should have.

What do you mean "didn't work"?  Do you mean you are still getting a 
factor?  Or just that you are not getting a 10-column data frame?

In respect of the latter:  RTFM.  It says, about "sep":

> If sep = "" (the default for read.table) the separator is ?white space?,
> that is one or more spaces, tabs, newlines or carriage returns.

You *have to* use read.fwf() if you want to go this route.

I also gave you a (somewhat more convoluted but equally valid) procedure 
to achieve what you want.

What I would *really* like to know is:  How did you manage to get 
colClasses="character" *not* to work?  You must have done *something* 
strange.

A ***reproducible*** example would be nice.

cheers,

Rolf Turner


From j.boutet at conservatoirepicardie.org  Thu Jun 26 12:07:47 2014
From: j.boutet at conservatoirepicardie.org (j.boutet at conservatoirepicardie.org)
Date: Thu, 26 Jun 2014 12:07:47 +0200 (CEST)
Subject: [R] =?utf-8?q?_R=C3=A9ponse_automatique?=
Message-ID: <201406261007.s5QA7l1M071743@albane6.nfrance.com>




Bonjour,

Je suis absent jusqu'au 4 ao?t prochain.

En cas d'urgence, merci de contacter Francis Meunier, directeur-adjoint :

f.meunier - at - conservatoirepicardie.org



J. Boutet



> From: r-help-request at r-project.org
> Subject: R-help Digest, Vol 136, Issue 26
> Date: Thu, 26 Jun 2014 12:00:07 +0200


From boblatest at gmail.com  Thu Jun 26 17:36:56 2014
From: boblatest at gmail.com (Robert Latest)
Date: Thu, 26 Jun 2014 17:36:56 +0200
Subject: [R] Simple permutation question
In-Reply-To: <alpine.BSF.2.00.1406251410240.12217@pedal.dcn.davis.ca.us>
References: <20140625222212.7b84fd47@dotcom.mfs32>
	<alpine.BSF.2.00.1406251410240.12217@pedal.dcn.davis.ca.us>
Message-ID: <20140626173656.1affa59a@dotcom.mfs32>

On Wed, 25 Jun 2014 14:16:08 -0700 (PDT)
Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:

> The brokenness of your perm.broken function arises from the attempted
> use of sapply to bind matrices together, which is not something
> sapply does.
> 
> perm.fixed <- function( x ) {
>    if ( length( x ) == 1 ) return( matrix( x, nrow=1 ) )
>    lst <- lapply( seq_along( x )
>                 , function( i ) {
>                     cbind( x[ i ], perm.jdn( x[ -i ] ) )
>                   }
>                 )
>    do.call(rbind, lst)
> }

Nice, exactly what I was looking for (including typo). Thanks!

robert


From ailan.goncalves at hpconsultores.com.br  Thu Jun 26 15:53:13 2014
From: ailan.goncalves at hpconsultores.com.br (=?iso-8859-1?Q?Ailan_Gon=E7alves?=)
Date: Thu, 26 Jun 2014 13:53:13 +0000
Subject: [R] =?iso-8859-1?q?Erro_atualiza=E7=E3o_java?=
Message-ID: <5ffc19d2fba54191b678d3cc344ef183@GRUPR80MB283.lamprd80.prod.outlook.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140626/056c093a/attachment.pl>

From 538280 at gmail.com  Thu Jun 26 17:57:27 2014
From: 538280 at gmail.com (Greg Snow)
Date: Thu, 26 Jun 2014 09:57:27 -0600
Subject: [R] =?utf-8?q?Erro_atualiza=C3=A7=C3=A3o_java?=
In-Reply-To: <5ffc19d2fba54191b678d3cc344ef183@GRUPR80MB283.lamprd80.prod.outlook.com>
References: <5ffc19d2fba54191b678d3cc344ef183@GRUPR80MB283.lamprd80.prod.outlook.com>
Message-ID: <CAFEqCdxNVhWdZ+QkbSqX=oiEyATqm-ohsGCqu4XZ3k=pyqizSA@mail.gmail.com>

Ailan,  Most of the readers of this list speak English and you may
have an easier time getting an answer if you translate to English
(though there may be some native Portuguese speakers on the list that
can help you directly).  This is a text only list so please in the
future post in plain text, not HTML

Ailan, a maioria dos leitores desta lista falam Ingl?s e voc? pode ter
um tempo mais f?cil obter uma resposta se voc? traduzir para Ingl?s
(embora possa haver alguns falantes nativos de portugu?s na lista que
pode ajud?-lo diretamente). Este ? um texto s? lista por isso, no
futuro p?s em texto puro, n?o HTML


For others, here is what Google Translate gives for the original question:

Good morning!

I'm trying to run Rjava R package and does not work. Much of what I
read on the internet suggested updating Java. However, I'm able to run
the process, there is always interrupted. Below is the error that
appears in R.

Error:. OnLoad failed in loadNamespace () for 'Rjava', details:
   call: function (libname, pkgname)
   Error: No CurrentVersion entry in Software / JavaSoft registry! Try
re-installing Java and make sure R and Java have matching
architectures.
Error: package or namespace load failed for 'Rjava'

>From what I read on the internet could be the version of Java 32 and
64 bits, but the error persists even after installing these versions.



2014-06-26 7:53 GMT-06:00 Ailan Gon?alves
<ailan.goncalves at hpconsultores.com.br>:
> Bom dia!
>
> Estou tentando rodar o pacote rjava  do R e n?o funciona. Muito do que li na internet sugeriu atualiza??o do Java. Entretanto, n?o estou conseguindo executar o processo, sempre ? interrompido. Segue abaixo o erro que aparece no R.
>
> Error : .onLoad falhou em loadNamespace() para 'rJava', detalhes:
>   chamada: fun(libname, pkgname)
>   erro: No CurrentVersion entry in Software/JavaSoft registry! Try re-installing Java and make sure R and Java have matching architectures.
> Erro: package or namespace load failed for 'rJava'
>
> Pelo o que li na internet poderia ser a vers?o do Java de 32 e 64 bits, mas o erro persiste mesmo ap?s a instala??o dessas vers?es.
>
>
>
>
>
>         [[alternative HTML version deleted]]
>
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>



-- 
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com


From ashutosh.arun at yahoo.in  Thu Jun 26 09:05:01 2014
From: ashutosh.arun at yahoo.in (Ashutosh Arun)
Date: Thu, 26 Jun 2014 15:05:01 +0800
Subject: [R] Marginal Effects for Hurdle (Two-part) models in R
Message-ID: <1403766301.67028.YahooMailNeo@web190002.mail.sg3.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140626/d7fc99b7/attachment.pl>

From carlosbautistaleon at gmail.com  Thu Jun 26 15:12:08 2014
From: carlosbautistaleon at gmail.com (=?UTF-8?Q?Carlos_Bautista_Le=C3=B3n?=)
Date: Thu, 26 Jun 2014 15:12:08 +0200
Subject: [R] AICc in MuMIn package
Message-ID: <CALTLwxAOojsivJaq2253F9EFVfNU1NezXvqZ0LAQHX3tqjXp6A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140626/3dce0f23/attachment.pl>

From fillipavarino at gmail.com  Thu Jun 26 12:03:16 2014
From: fillipavarino at gmail.com (FV)
Date: Thu, 26 Jun 2014 12:03:16 +0200
Subject: [R] finite differences
Message-ID: <CANbTKP4fiSOR-5dqr3yQru-G6Fjd0nQyYnV_qn8gVOSOsFxABQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140626/b84f29ee/attachment.pl>

From ishaqbaba at yahoo.com  Thu Jun 26 08:47:21 2014
From: ishaqbaba at yahoo.com (IZHAK shabsogh)
Date: Wed, 25 Jun 2014 23:47:21 -0700
Subject: [R] graph
Message-ID: <1403765241.36894.YahooMailNeo@web142501.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140625/dc92d246/attachment.pl>

From pmakananisa at sars.gov.za  Thu Jun 26 12:42:54 2014
From: pmakananisa at sars.gov.za (Mangalani Peter Makananisa)
Date: Thu, 26 Jun 2014 10:42:54 +0000
Subject: [R] Combining character, numeric and dates fields in one data frame
Message-ID: <BBB169C177D06B4E8E650D24548404CEB508EA5C@PTABREXC21N1.sars.gov.za>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140626/ead9acb7/attachment.pl>

From R.E.Crump at warwick.ac.uk  Thu Jun 26 09:59:07 2014
From: R.E.Crump at warwick.ac.uk (Ron Crump)
Date: Thu, 26 Jun 2014 08:59:07 +0100
Subject: [R] read a file of text with read.table
In-Reply-To: <1403767978.43512.YahooMailNeo@web121506.mail.ne1.yahoo.com>
References: <1403767978.43512.YahooMailNeo@web121506.mail.ne1.yahoo.com>
Message-ID: <53ABD2CB.2080500@warwick.ac.uk>

Hi Carol,
> It might be a primitive question but I have a file of text and there is no separator between character on each line and the strings on each line have the same length. The format is like the following
>
> absfjdslf
> jfdldskjff
> jfsldfjslk
>
> When I read the file with read.table("myfile",colClasses = "character"), instead of putting the strings in a table of number of rows x length of string, read.table saves the file in a table of number of rows x 1 and each element seems to be a factor. Why does read.table not account for  colClasses = "character"?
read.table relies on a separator to differentiate between columns, so it 
is not appropriate for your file, read.fwf would do the job.

Setting colClasses (in my understanding) tells read.table how to treat 
input as it comes in - so it disables some testing of data types and 
makes reading quicker, it does not disable the setting of character data 
to be factors, which is the default. You need to use the 
stringsAsFactors=FALSE option for that.

So, for your example (and I have added a letter to the first row to make 
it the same length as the others):

cf <- "absfjdslfx
jfdldskjff
jfsldfjslk"

cdf <- 
read.fwf(textConnection(cf),widths=rep(1,10),colClasses="character",stringsAsFactors=FALSE)

See ?read.fwf for more information. A width is required for each column 
(in this case 1 repeated 10 times).

Hope this helps.

Ron.


From seth at forestadapt.org  Thu Jun 26 13:01:14 2014
From: seth at forestadapt.org (seth at forestadapt.org)
Date: Thu, 26 Jun 2014 06:01:14 -0500
Subject: [R] decreasing blank space in ggplot2 geom_area
Message-ID: <91da144a502ee6371aff99872e76825749c502a9@sitemail.hostway.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140626/93c3a344/attachment.pl>

From ripley at stats.ox.ac.uk  Thu Jun 26 19:00:55 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 26 Jun 2014 18:00:55 +0100
Subject: [R] =?utf-8?q?Erro_atualiza=C3=A7=C3=A3o_java?=
In-Reply-To: <CAFEqCdxNVhWdZ+QkbSqX=oiEyATqm-ohsGCqu4XZ3k=pyqizSA@mail.gmail.com>
References: <5ffc19d2fba54191b678d3cc344ef183@GRUPR80MB283.lamprd80.prod.outlook.com>
	<CAFEqCdxNVhWdZ+QkbSqX=oiEyATqm-ohsGCqu4XZ3k=pyqizSA@mail.gmail.com>
Message-ID: <53AC51C7.8060600@stats.ox.ac.uk>

On 26/06/2014 16:57, Greg Snow wrote:
> Ailan,  Most of the readers of this list speak English and you may
> have an easier time getting an answer if you translate to English
> (though there may be some native Portuguese speakers on the list that
> can help you directly).  This is a text only list so please in the
> future post in plain text, not HTML
>
> Ailan, a maioria dos leitores desta lista falam Ingl?s e voc? pode ter
> um tempo mais f?cil obter uma resposta se voc? traduzir para Ingl?s
> (embora possa haver alguns falantes nativos de portugu?s na lista que
> pode ajud?-lo diretamente). Este ? um texto s? lista por isso, no
> futuro p?s em texto puro, n?o HTML
>
>
> For others, here is what Google Translate gives for the original question:
>
> Good morning!
>
> I'm trying to run Rjava R package and does not work. Much of what I
> read on the internet suggested updating Java. However, I'm able to run
> the process, there is always interrupted. Below is the error that
> appears in R.
>
> Error:. OnLoad failed in loadNamespace () for 'Rjava', details:
>     call: function (libname, pkgname)
>     Error: No CurrentVersion entry in Software / JavaSoft registry! Try
> re-installing Java and make sure R and Java have matching
> architectures.
> Error: package or namespace load failed for 'Rjava'
>
>>From what I read on the internet could be the version of Java 32 and
> 64 bits, but the error persists even after installing these versions.

Yes, and that is what he has to resolve.  It is not an R question but a 
Java-on-Windows one.

Or (marginally) an rJava one, and http://www.rforge.net/rJava/ is its 
home area.

>
>
>
> 2014-06-26 7:53 GMT-06:00 Ailan Gon?alves
> <ailan.goncalves at hpconsultores.com.br>:
>> Bom dia!
>>
>> Estou tentando rodar o pacote rjava  do R e n?o funciona. Muito do que li na internet sugeriu atualiza??o do Java. Entretanto, n?o estou conseguindo executar o processo, sempre ? interrompido. Segue abaixo o erro que aparece no R.
>>
>> Error : .onLoad falhou em loadNamespace() para 'rJava', detalhes:
>>    chamada: fun(libname, pkgname)
>>    erro: No CurrentVersion entry in Software/JavaSoft registry! Try re-installing Java and make sure R and Java have matching architectures.
>> Erro: package or namespace load failed for 'rJava'
>>
>> Pelo o que li na internet poderia ser a vers?o do Java de 32 e 64 bits, mas o erro persiste mesmo ap?s a instala??o dessas vers?es.
>>
>>
>>
>>
>>
>>          [[alternative HTML version deleted]]
>>
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From istazahn at gmail.com  Thu Jun 26 20:35:19 2014
From: istazahn at gmail.com (Ista Zahn)
Date: Thu, 26 Jun 2014 14:35:19 -0400
Subject: [R] decreasing blank space in ggplot2 geom_area
In-Reply-To: <91da144a502ee6371aff99872e76825749c502a9@sitemail.hostway.com>
References: <91da144a502ee6371aff99872e76825749c502a9@sitemail.hostway.com>
Message-ID: <CA+vqiLGUNB1bPLQ-AmTKLtAwH+hA62KBjYF6GN=zuXDs9NvEwQ@mail.gmail.com>

Hi Seth,

See the "expand" argument to ?discrete_scale

Best,
Ista

On Thu, Jun 26, 2014 at 7:01 AM,  <seth at forestadapt.org> wrote:
> I wish to shrink the automatically inserted blank space at either end
> of the x axis of my area plot, so that the colorful graphic in the
> center takes up more of the available space. When I use the
> scale_x_discrete(limits...) command to expand the displayed area, the
> graphic shrinks away from the x-axis ticks so that there is still the
> same amount of blank space at the edges.
>
> An example:
>
> df1
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From 538280 at gmail.com  Thu Jun 26 20:39:27 2014
From: 538280 at gmail.com (Greg Snow)
Date: Thu, 26 Jun 2014 12:39:27 -0600
Subject: [R] Simple permutation question
In-Reply-To: <20140625222212.7b84fd47@dotcom.mfs32>
References: <20140625222212.7b84fd47@dotcom.mfs32>
Message-ID: <CAFEqCdzqnU6GeGP5q3YOiVzm+crx+NasHf4gXee6YuCDWXOP-A@mail.gmail.com>

For your 2nd question (which also answers your first question) I use
the permn function in the combinat package, this function is nice that
in addition to generating all the permutations it will also,
optionally, run a function on each permutation for you:

> t(simplify2array( permn( c("A","B","C") ) ))
     [,1] [,2] [,3]
[1,] "A"  "B"  "C"
[2,] "A"  "C"  "B"
[3,] "C"  "A"  "B"
[4,] "C"  "B"  "A"
[5,] "B"  "C"  "A"
[6,] "B"  "A"  "C"
> unlist( permn( c("A","B","C"), fun=paste, collapse='' ) )
[1] "ABC" "ACB" "CAB" "CBA" "BCA" "BAC"

In addition, running help.search on my computer (RSiteSearch, or the
SOS package may return even more) shows the following functions as
generating permutations:

combinat::permn
e1071::permutations
gtools::permutations
multicool::allPerm
pracma::perms
prob::permsn
sna::numperm




On Wed, Jun 25, 2014 at 2:22 PM, Robert Latest <boblatest at gmail.com> wrote:
> So my company has hired a few young McKinsey guys from overseas for a
> couple of weeks to help us with a production line optimization. They
> probably charge what I make in a year, but that's OK because I just
> never have the time to really dive into one particular time, and I have
> to hand it to the consultants that they came up with one or two really
> clever ideas to model the production line. Of course it's up to me to
> feed them the real data which they then churn through their Excel
> models that they cook up during the nights in their hotel rooms, and
> which I then implement back into my experimental system using live data.
>
> Anyway, whenever they need something or come up with something I skip
> out of the room, hack it into R, export the CSV and come back in about
> half the time it takes Excel to even read in the data, let alone
> process it. Of course that gor them curious, and I showed off a couple
> of scripts that condense their abysmal Excel convolutions in a few
> lean and mean lines of R code.
>
> Anyway, I'm in my office with this really attractive, clever young
> McKinsey girl (I'm in my mid-forties, married with kids and all, but I
> still enjoyed impressing a woman with computer stuff, of all things!),
> and one of her models involves a simple permutation of five letters --
> "A" through "E".
>
> And that's when I find out that R doesn't have a permutation function.
> How is that possible? R has EVERYTHING, but not that? I'm
> flabbergasted. Stumped. And now it's up to me to spend the evening at
> home coding that model, and the only thing I really need is that
> permutation.
>
> So this is my first attempt:
>
> perm.broken <- function(x) {
>     if (length(x) == 1) return(x)
>     sapply(1:length(x), function(i) {
>         cbind(x[i], perm(x[-i]))
>     })
> }
>
> But it doesn't work:
>> perm.broken(c("A", "B", "C"))
>      [,1] [,2] [,3]
> [1,] "A"  "B"  "C"
> [2,] "A"  "B"  "C"
> [3,] "B"  "A"  "A"
> [4,] "C"  "C"  "B"
> [5,] "C"  "C"  "B"
> [6,] "B"  "A"  "A"
>>
>
> And I can't figure out for the life of me why. It should work because I
> go through the elements of x in order, use that in the leftmost column,
> and slap the permutation of the remaining elements to the right. What
> strikes me as particularly odd is that there doesn't even seem to be a
> systematic sequence of letters in any of the columns. OK, since I
> really need that function I wrote this piece of crap:
>
> perm.stupid <- function(x) {
>     b <- as.matrix(expand.grid(rep(list(x), length(x))))
>     b[!sapply(1:nrow(b), function(r) any(duplicated(b[r,]))),]
> }
>
> It works, but words cannot describe its ugliness. And it gets really
> slow really fast with growing x.
>
> So, anyway. My two questions are:
> 1. Does R really, really, seriously lack a permutation function?
> 2. OK, stop kidding me. So what's it called?
> 3. Why doesn't my recursive function work, and what would a
>    working version look like?
>
> Thanks,
> robert
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com


From dcarlson at tamu.edu  Thu Jun 26 20:46:30 2014
From: dcarlson at tamu.edu (David L Carlson)
Date: Thu, 26 Jun 2014 18:46:30 +0000
Subject: [R] graph
In-Reply-To: <1403765241.36894.YahooMailNeo@web142501.mail.bf1.yahoo.com>
References: <1403765241.36894.YahooMailNeo@web142501.mail.bf1.yahoo.com>
Message-ID: <53BF8FB63FAF2E4A9455EF1EE94DA726F7A441@mb02.ads.tamu.edu>

You can do it, but mu1 has a much smaller variance and mu3 and mu4 are almost identical so they overplot.

> xy1 <- density(mu1)
> xy2 <- density(mu2)
> xy3 <- density(mu3)
> xy4 <- density(mu4)
> Density <- cbind(xy1$y, xy2$y, xy3$y, xy4$y)
> x <- cbind(xy1$x, xy2$x, xy3$x, xy4$x)
> matplot(x, Density, type="l")
> legend("topright", c("mu1", "mu2", "mu3", "mu4"), col=1:4, lty=1:4)

-------------------------------------
David L Carlson
Department of Anthropology
Texas A&M University
College Station, TX 77840-4352

-----Original Message-----
From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On Behalf Of IZHAK shabsogh
Sent: Thursday, June 26, 2014 1:47 AM
To: r-help at r-project.org
Subject: [R] graph

kindly guide me on how i can plot the following data on the same graph using the kernel density. i will like to use as to compare performance

mu1<-c(500.0035, 501.2213, 500.7532, 500.2622, 500.3391, 500.1618, 499.9511, 500.1843, 499.8945, 499.8467)
mu2<-c(498.9623, 504.7938, 506.8957, 495.6634, 506.2751, 503.4344, 503.9103, 512.3021,492.3065, 500.8908)
mu3<-c(498.9352, 501.3470, 506.7885, 497.3446, 505.6911, 500.0000, 503.9103, 512.0994,492.3065, 500.0001)
mu4<-c(498.5626, 501.3469, 506.7781, 497.3466, 505.6723, 500.0000, 503.9103, 512.0936,492.3065, 500.0000)
?

thanks
	[[alternative HTML version deleted]]


From 538280 at gmail.com  Thu Jun 26 20:50:53 2014
From: 538280 at gmail.com (Greg Snow)
Date: Thu, 26 Jun 2014 12:50:53 -0600
Subject: [R] graph
In-Reply-To: <1403765241.36894.YahooMailNeo@web142501.mail.bf1.yahoo.com>
References: <1403765241.36894.YahooMailNeo@web142501.mail.bf1.yahoo.com>
Message-ID: <CAFEqCdycPphL7AhMc1qDsc-2keua=Y4AQdmxHUnQra7eLDTUyg@mail.gmail.com>

Does this do what you want?

d1 <- density(mu1)
d2 <- density(mu2)
d3 <- density(mu3)
d4 <- density(mu4)

matplot( cbind( d1$x, d2$x, d3$x, d4$x ), cbind( d1$y, d2$y, d3$y,
d4$y ), type='l')

Or in a more expandable way:

mus <- mget( ls(pat='^mu') )
ds <- lapply( mus, density )
xs <- sapply( ds, `[[`, "x" )
ys <- sapply( ds, `[[`, "y" )
matplot(xs,ys, type='l')

You could also combine the data into a single data frame and use
lattice or ggplot2 tools to create a similar graph.


If not, then please give more details on what you want, what the graph
should look like, what you have tried and how it differs from what you
want.


On Thu, Jun 26, 2014 at 12:47 AM, IZHAK shabsogh <ishaqbaba at yahoo.com> wrote:
> kindly guide me on how i can plot the following data on the same graph using the kernel density. i will like to use as to compare performance
>
> mu1<-c(500.0035, 501.2213, 500.7532, 500.2622, 500.3391, 500.1618, 499.9511, 500.1843, 499.8945, 499.8467)
> mu2<-c(498.9623, 504.7938, 506.8957, 495.6634, 506.2751, 503.4344, 503.9103, 512.3021,492.3065, 500.8908)
> mu3<-c(498.9352, 501.3470, 506.7885, 497.3446, 505.6911, 500.0000, 503.9103, 512.0994,492.3065, 500.0001)
> mu4<-c(498.5626, 501.3469, 506.7781, 497.3466, 505.6723, 500.0000, 503.9103, 512.0936,492.3065, 500.0000)
>
>
> thanks
>         [[alternative HTML version deleted]]
>
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>



-- 
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com


From davies.trevor at gmail.com  Thu Jun 26 21:43:27 2014
From: davies.trevor at gmail.com (Trevor Davies)
Date: Thu, 26 Jun 2014 12:43:27 -0700
Subject: [R] subtracting degree minutes
Message-ID: <CAJhyqVi0knpd28kTEViu8=8DWnA-SqLnLGR5emqr64MvOSkdRQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140626/f93bb993/attachment.pl>

From akh22 at pitt.edu  Thu Jun 26 18:04:09 2014
From: akh22 at pitt.edu (Aki Hoji)
Date: Thu, 26 Jun 2014 12:04:09 -0400
Subject: [R] fitdistrplus : how to get around sigma must be between 0 and 1
Message-ID: <1EF50175-2458-4274-A24C-9BEE9CDB427F@pitt.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140626/ec9d7982/attachment.pl>

From vincentdeanboyce at gmail.com  Thu Jun 26 18:17:26 2014
From: vincentdeanboyce at gmail.com (VINCENT DEAN BOYCE)
Date: Thu, 26 Jun 2014 12:17:26 -0400
Subject: [R] Stringr / Regular Expressions advice
Message-ID: <CAMDKLUxmKLtpGVDBO8oSEeZH121kjJPbAFROKNKdoqo6dZptPA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140626/e1b2333d/attachment.pl>

From peter.kharchenko at gmail.com  Thu Jun 26 18:32:33 2014
From: peter.kharchenko at gmail.com (Peter K)
Date: Thu, 26 Jun 2014 09:32:33 -0700 (PDT)
Subject: [R] [R-pkgs] Rook: software and specification for R web
 applications	and servers
In-Reply-To: <CAD+yNFjm1KPA+rznwr1LD7FHaEbacsRRKv+B8Hw2Arvqp5iTqA@mail.gmail.com>
References: <CAD+yNFjm1KPA+rznwr1LD7FHaEbacsRRKv+B8Hw2Arvqp5iTqA@mail.gmail.com>
Message-ID: <0e301367-b8ff-4a84-bf4a-55c3b70cfd75@googlegroups.com>

Rook apps can be run using the httpd built into R (great feature!), and can 
be deployed using rApache server. 
For those who prefer to deploy the apps under FastRWeb, below is the code 
to do so:

-- in your web.R/myrookapp.R file, we ran the Rook app instance (stored in 
variable app): 

run <- function( ... ) {
  run_rook_app(app);
}

-- somewhere from code/rserve.R source the following definitions:
library(Rook)
run_rook_app <- function(app,env=build_rook_env(request)) {
  res <- app$call(env);
  if (inherits(res,'try-error')){
    warning('App returned try-error object')
    str(res)
    return(paste("ERROR!",res,capture.output(traceback())))
  }
  ctype <- res$headers$`Content-Type`;
  res$headers$`Content-Type` <- NULL;
  headers <- unlist(lapply(names(res$headers),function(nam) paste(nam,": 
",res$headers[[nam]],sep="")))

  if (!is.null(names(res$body)) && names(res$body)[1] == 'file'){
    # send fille
   
 return(WebResult(cmd="file",payload=res$body[1],content.type=ctype,headers=headers))
  } else {
    if ((is.character(res$body) && nchar(res$body)>0)) {
      # plain text response
      
 return(WebResult(cmd="html",payload=res$body,content.type=ctype,headers=headers))
    } else if (is.raw(res$body) && length(res$body)>0) {
     
 return(WebResult(cmd="raw",payload=res$body,content.type=ctype,headers=headers))
    }
  }
}


run_rook_app <- function(app,env=build_rook_env(request)) {
  res <- app$call(env);
  if (inherits(res,'try-error')){
    warning('App returned try-error object')
    str(res)
    return(paste("ERROR!",res,capture.output(traceback())))
  }
  ctype <- res$headers$`Content-Type`;
  res$headers$`Content-Type` <- NULL;
  headers <- unlist(lapply(names(res$headers),function(nam) paste(nam,": 
",res$headers[[nam]],sep="")))

  if (!is.null(names(res$body)) && names(res$body)[1] == 'file'){
    # send fille
    #print("multipart file response")
   
 return(WebResult(cmd="file",payload=res$body[1],content.type=ctype,headers=headers))
    #sendBin(readBin(res$body[1],'raw',n=file.info(res$body[1])$size))
  } else {
    if ((is.character(res$body) && nchar(res$body)>0)) {
      # plain text response
      #print("plaint text response")
     
 return(WebResult(cmd="html",payload=res$body,content.type=ctype,headers=headers))
    } else if (is.raw(res$body) && length(res$body)>0) {
      #print("raw response")
     
 return(WebResult(cmd="raw",payload=res$body,content.type=ctype,headers=headers))
    }
  }
}

.FastRWebInputStream <- setRefClass(
  '.FastRWebInputStream',
  fields=c('con','body'),
  methods = list(
    initialize = function(request) {
      body <<- request$body;
      if(!is.null(body) && is.raw(body)) {
        con <<- rawConnection(request$body)
      } else {
        con <<- NULL;
      }
    },
    read_lines = function(n = -1L){
      if (n<=0 || is.null(body) || is.null(con)) return(character())
      readLines(con,n=n,warn=FALSE)
    },
    read = function(l = -1L){
      if (is.null(body) || is.null(con)) return(character())
      body;
    },
    rewind = function(){
      if(!is.null(body) && is.raw(body))      
        con <<- rawConnection(body)
    })
  )






-peter.

On Wednesday, January 11, 2012 5:20:04 PM UTC-5, Jeffrey Horner wrote:
>
> Dear  useRs,
>
> Rook version 1.0-3 has been submitted to CRAN. In the mean time you
> can get it here:
>
> https://github.com/jeffreyhorner/rRack/blob/master/Rook_1.0-3.tar.gz
>
> The latest release contains support for deployment with rApache. Please see
> 3.6.5 and 3.6.6 under section 'Configuring rApache' in the manual:
>
> http://www.rapache.net/manual.html#Configuring_rapache
>
> What is Rook? A package that does three things:
>
> - It provides a way to run R web applications on your desktop with the
> new internal R web server named Rhttpd. Please see the Rhttpd help page.
>
> - It provides a set of reference classes you can use to write you R
> web applications. The following help pages provide more information:
> Brewery, Builder, File, Middleware, Redirect, Request, Response, Static,
> URLMap, and Utils. Also see the example web applications located in
> 'system("exampleApps",package="Rook")'.
>
> - It provides a specification for writing your R web applications to
> work on any web server that supports the Rook specification.
>
> You may not see the need for web applications written in R, but consider
> using Rook to build a statistical engine that complements a front-end
> web system, or consider creating elegant ggplot2 graphics on-demand from
> a fresh data stream. Also, consider creating dynamic instructional content
> for the classroom.
>
> If you have other examples or ideas, please join in the discussion on
> R-help or here:
>
> http://groups.google.com/group/rrook
>
> --
> Jeffrey Horner
>
> _______________________________________________
> R-packages mailing list
> R-pac... at r-project.org <javascript:>
> https://stat.ethz.ch/mailman/listinfo/r-packages
>
> ______________________________________________
> R-h... at r-project.org <javascript:> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
>

From cderasmo85 at gmail.com  Thu Jun 26 18:37:29 2014
From: cderasmo85 at gmail.com (cderasmo85 at gmail.com)
Date: Thu, 26 Jun 2014 12:37:29 -0400
Subject: [R] QQ - Plot Inconsistency
Message-ID: <CAFp-3o+Gd+kWgRWGj5rs_DeS5zKDBtbwQMuUuemdzpdOmynFsQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140626/457e1366/attachment.pl>

From jvadams at usgs.gov  Thu Jun 26 22:42:49 2014
From: jvadams at usgs.gov (Adams, Jean)
Date: Thu, 26 Jun 2014 15:42:49 -0500
Subject: [R] Stringr / Regular Expressions advice
In-Reply-To: <CAMDKLUxmKLtpGVDBO8oSEeZH121kjJPbAFROKNKdoqo6dZptPA@mail.gmail.com>
References: <CAMDKLUxmKLtpGVDBO8oSEeZH121kjJPbAFROKNKdoqo6dZptPA@mail.gmail.com>
Message-ID: <CAN5YmCHd-1iULcq6Hab1h31n91g1_aD1m_i=TgJ5nA_AizJOJA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140626/4b82af01/attachment.pl>

From sarah.goslee at gmail.com  Thu Jun 26 22:46:14 2014
From: sarah.goslee at gmail.com (Sarah Goslee)
Date: Thu, 26 Jun 2014 16:46:14 -0400
Subject: [R] Stringr / Regular Expressions advice
In-Reply-To: <CAMDKLUxmKLtpGVDBO8oSEeZH121kjJPbAFROKNKdoqo6dZptPA@mail.gmail.com>
References: <CAMDKLUxmKLtpGVDBO8oSEeZH121kjJPbAFROKNKdoqo6dZptPA@mail.gmail.com>
Message-ID: <CAM_vjun5wxdt8S_KLhFoYkiW-NE3dNcJCAQ_UYu+EOtBiODyCg@mail.gmail.com>

Hi,

On Thu, Jun 26, 2014 at 12:17 PM, VINCENT DEAN BOYCE
<vincentdeanboyce at gmail.com> wrote:
> Hello,
>
> Using R,  I've loaded a .cvs file comprised of several hundred rows and 3
> columns of data. The data within maps the output of a triaxial
> accelerometer, a sensor which measures an object's acceleration along the
> x,y and z axes. The data for each respective column sequentially
> oscillates, and ranges numerically from 100 to 500.

If your data are numeric, why are you using stringr?

It would be easier to provide you with an answer if we knew what your
data looked like.

dput(head(yourdata, 20))

and paste that into your non-HTML email.

> I want create a function that parses the data and detects patterns across
> the three columns.
>
> For instance, I would like to detect instances when the values for the x,y
> and z columns equal 150, 200, 300 respectively. Additionally, when a match
> is detected, I would like to know how many times the pattern appears.

That's easy enough:

fakedata <- data.frame(matrix(c(
100, 100, 200,
150, 200, 300,
100, 350, 100,
400, 200, 300,
200, 500, 200,
150, 200, 300,
150, 200, 300),
ncol=3, byrow=TRUE))

v.to.match <- c(150, 200, 300)

v.matches <- apply(fakedata, 1, function(x)all(x == v.to.match))

# which rows match
which(v.matches)

# how many rows match
sum(v.matches)

> I have been successful using str_detect to provide a Boolean, however it
> seems to only work on a single vector, i.e, "400" , not a range of values
> i.e "400 - 450". See below:

This is where I get confused, and where we need sample data. Are your
data numeric, as you state above, or some other format?

If your data are character, and like "400 - 450", you can still match
them with the code I suggested above.

> # this works
>> vals <- str_detect (string = data_log$x_reading, pattern = "400")
>
> # this also works, but doesn't detect the particular range, rather the
> existence of the numbers
>> vals <- str_detect (string = data_log$x_reading, pattern = "[400-450]")

Are you trying to match any numeric value in the range 400-450? Again,
actual data.

> Also, it appears that I can only apply it to a single column, not to all
> three columns. However I may be mistaken.

You answer your own question unwittingly - apply().

Sarah

-- 
Sarah Goslee
http://www.functionaldiversity.org


From dcarlson at tamu.edu  Thu Jun 26 23:43:09 2014
From: dcarlson at tamu.edu (David L Carlson)
Date: Thu, 26 Jun 2014 21:43:09 +0000
Subject: [R] subtracting degree minutes
In-Reply-To: <CAJhyqVi0knpd28kTEViu8=8DWnA-SqLnLGR5emqr64MvOSkdRQ@mail.gmail.com>
References: <CAJhyqVi0knpd28kTEViu8=8DWnA-SqLnLGR5emqr64MvOSkdRQ@mail.gmail.com>
Message-ID: <53BF8FB63FAF2E4A9455EF1EE94DA726F7A511@mb02.ads.tamu.edu>

This probably doesn't count as simple, but you can convert your format, call it degrees.minutes, to decimal degrees, do the math and then convert back. The functions would be simple:

dm2dd <- function(x) trunc(x) + (x - trunc(x))/60*100
dd2dm <- function(x) trunc(x) + (x - trunc(x))*60/100

So your problem would be 

> dd2dm(dm2dd(44.1) - dm2dd(.2))
[1] 43.5

Of course you could wrap that into a function if you are planning to do it frequently.

-------------------------------------
David L Carlson
Department of Anthropology
Texas A&M University
College Station, TX 77840-4352

-----Original Message-----
From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On Behalf Of Trevor Davies
Sent: Thursday, June 26, 2014 2:43 PM
To: r-help at r-project.org
Subject: [R] subtracting degree minutes

Is there a simple way to subtract base-60 (coordinate system) values?

A trivial example:
I have a Lat of 44.1 degrees and I want to subtract 0.2 degrees from it.
 Therefore the answer should be 43.5 degrees (base 60).

I can do a change to character; stringsplit ; change back - deal with the
leading zeros but there must be an easier way.  (?)

Thanks for the help.
Trevor

	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From jim at bitwrit.com.au  Fri Jun 27 00:41:04 2014
From: jim at bitwrit.com.au (Jim Lemon)
Date: Fri, 27 Jun 2014 08:41:04 +1000
Subject: [R] Combining character,
	numeric and dates fields in one data frame
In-Reply-To: <BBB169C177D06B4E8E650D24548404CEB508EA5C@PTABREXC21N1.sars.gov.za>
References: <BBB169C177D06B4E8E650D24548404CEB508EA5C@PTABREXC21N1.sars.gov.za>
Message-ID: <2748515.osX4vjVgWg@localhost.localdomain>

On Thu, 26 Jun 2014 10:42:54 AM Mangalani Peter Makananisa wrote:
> Hi,
> 
> I am try to fix the data frame and I see that we only have two fields
> defined characters and  numeric fields. How do I add date field   on 
the
> same data after using the as.Date  &  as.yearmon and be able to 
manipulate
> the data on the date field(s)?
> 
> Please advise
> 
> 
> Kind regards
> 
> peter
> 
Hi peter,
Let's say the two fields in your data frame are:

mydata$date<-c("2014-06-01","2014-06-02",...,"2014-06-30")
mydata$mintemp<-c(14,17,...,12)

If you want to change the character dates to date objects:

mydata$date<-as.Date(mydata$date,"%Y-%m-%d")

If your data frame doesn't contain the dates already:

mydata$weather<-c("clear","cloudy",...,"rain")
mydata$mintemp<-c(14,17,...,12)

and you have a vector of the dates as character fields:

mydates<-c("2014-06-01","2014-06-02",...,"2014-06-30")

mydata$date<-as.Date(mydates,"%Y-%m-%d")

Jim


From baccts at hotmail.com  Fri Jun 27 02:05:26 2014
From: baccts at hotmail.com (C Lin)
Date: Thu, 26 Jun 2014 20:05:26 -0400
Subject: [R] regular expression help
Message-ID: <COL129-W77308B84F4C44D6A25457ACB1B0@phx.gbl>

Dear R users,

I need to match a string. It can be followed or preceded by whitespace or // or nothing.
How do I code it in R?

For example:
test <- c('AARSD11','AARSD1-','AARSD1//','AARSD1 //','//AARSD1');
grep('AARSD1(\\s*//*)',test);

should return 3,4,5 and 6.

Thanks in advance for your help.

Lin 		 	   		  

From dwinsemius at comcast.net  Fri Jun 27 02:35:45 2014
From: dwinsemius at comcast.net (David Winsemius)
Date: Thu, 26 Jun 2014 17:35:45 -0700
Subject: [R] finite differences
In-Reply-To: <CANbTKP4fiSOR-5dqr3yQru-G6Fjd0nQyYnV_qn8gVOSOsFxABQ@mail.gmail.com>
References: <CANbTKP4fiSOR-5dqr3yQru-G6Fjd0nQyYnV_qn8gVOSOsFxABQ@mail.gmail.com>
Message-ID: <47387D86-949D-437F-B2C1-B8B05AC00D4B@comcast.net>


On Jun 26, 2014, at 3:03 AM, FV wrote:

> Hi
> 
> I have a 2D array and I would like to compute finite differences in each
> dimension!
> Is there any function on R that computes that automatically.
> thanks in advance
> 

It doesn't appear that there is a matrix method for diff but why not these:

t( apply(mat, 1, diff) )

apply(mat, 2, diff)

> 
> 	[[alternative HTML version deleted]]

This is a plain text mailing list

__ 

David Winsemius
Alameda, CA, USA


From dwinsemius at comcast.net  Fri Jun 27 02:40:44 2014
From: dwinsemius at comcast.net (David Winsemius)
Date: Thu, 26 Jun 2014 17:40:44 -0700
Subject: [R] read a file of text with read.table
In-Reply-To: <53ABD2CB.2080500@warwick.ac.uk>
References: <1403767978.43512.YahooMailNeo@web121506.mail.ne1.yahoo.com>
	<53ABD2CB.2080500@warwick.ac.uk>
Message-ID: <E79EC99F-769C-41DB-AFC5-772EF9324FAB@comcast.net>


On Jun 26, 2014, at 12:59 AM, Ron Crump wrote:

> Hi Carol,
>> It might be a primitive question but I have a file of text and there is no separator between character on each line and the strings on each line have the same length. The format is like the following
>> 
>> absfjdslf
>> jfdldskjff
>> jfsldfjslk
>> 
>> When I read the file with read.table("myfile",colClasses = "character"), instead of putting the strings in a table of number of rows x length of string, read.table saves the file in a table of number of rows x 1 and each element seems to be a factor. Why does read.table not account for  colClasses = "character"?
> read.table relies on a separator to differentiate between columns, so it is not appropriate for your file, read.fwf would do the job.
> 
> Setting colClasses (in my understanding) tells read.table how to treat input as it comes in - so it disables some testing of data types and makes reading quicker, it does not disable the setting of character data to be factors, which is the default. You need to use the stringsAsFactors=FALSE option for that.
> 
> So, for your example (and I have added a letter to the first row to make it the same length as the others):
> 
> cf <- "absfjdslfx
> jfdldskjff
> jfsldfjslk"
> 
> cdf <- read.fwf(textConnection(cf),widths=rep(1,10),colClasses="character",stringsAsFactors=FALSE)

You are wrong about colClasses not pre-empting stringsAsFactors, and it's easy enough to prove (or you could have taken the time to read the help page of read.table which the help page of read.fwf refers you to: 


sapply( read.fwf(textConnection(cf),widths=rep(1,10),colClasses="character") ,class)
         V1          V2          V3          V4          V5          V6          V7          V8          V9         V10 
"character" "character" "character" "character" "character" "character" "character" "character" "character" "character" 


> See ?read.fwf for more information. A width is required for each column (in this case 1 repeated 10 times).
> 
> Hope this helps.
> 
> Ron.
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

David Winsemius
Alameda, CA, USA


From dulcalma at bigpond.com  Fri Jun 27 02:46:29 2014
From: dulcalma at bigpond.com (Duncan Mackay)
Date: Fri, 27 Jun 2014 10:46:29 +1000
Subject: [R] graph
In-Reply-To: <1403765241.36894.YahooMailNeo@web142501.mail.bf1.yahoo.com>
References: <1403765241.36894.YahooMailNeo@web142501.mail.bf1.yahoo.com>
Message-ID: <002401cf91a1$3c2bf670$b483e350$@bigpond.com>

As Greg has listed lattice

Here are ways in lattice 

quick 1 panel
library(lattice)
densityplot(~ mu1+mu2+mu3+mu4)

dat = data.frame(mu = c(mu1,mu2,mu3,mu4), gp = rep(1:4,
sapply(list(mu1,mu2,mu3,mu4), length)) )
densityplot(~ mu|gp, data = dat)
densityplot(~ mu|gp, dat, pch = "|")

see
?xyplot
?panel.densityplot

Duncan

Duncan Mackay
Department of Agronomy and Soil Science
University of New England
Armidale NSW 2351
Email: home: mackay at northnet.com.au

-----Original Message-----
From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On
Behalf Of IZHAK shabsogh
Sent: Thursday, 26 June 2014 16:47
To: r-help at r-project.org
Subject: [R] graph

kindly guide me on how i can plot the following data on the same graph using
the kernel density. i will like to use as to compare performance

mu1<-c(500.0035, 501.2213, 500.7532, 500.2622, 500.3391, 500.1618, 499.9511,
500.1843, 499.8945, 499.8467)
mu2<-c(498.9623, 504.7938, 506.8957, 495.6634, 506.2751, 503.4344, 503.9103,
512.3021,492.3065, 500.8908)
mu3<-c(498.9352, 501.3470, 506.7885, 497.3446, 505.6911, 500.0000, 503.9103,
512.0994,492.3065, 500.0001)
mu4<-c(498.5626, 501.3469, 506.7781, 497.3466, 505.6723, 500.0000, 503.9103,
512.0936,492.3065, 500.0000)
 

thanks
	[[alternative HTML version deleted]]


From dulcalma at bigpond.com  Fri Jun 27 02:59:29 2014
From: dulcalma at bigpond.com (Duncan Mackay)
Date: Fri, 27 Jun 2014 10:59:29 +1000
Subject: [R] regular expression help
In-Reply-To: <COL129-W77308B84F4C44D6A25457ACB1B0@phx.gbl>
References: <COL129-W77308B84F4C44D6A25457ACB1B0@phx.gbl>
Message-ID: <002501cf91a3$0d311150$279333f0$@bigpond.com>

Hi

You only have a vector of length 5 and I am not quite sure of the string you
are testing
so try this

grep('[/]*\\<AARSD1\\>[/]*',test)

Duncan

Duncan Mackay
Department of Agronomy and Soil Science
University of New England
Armidale NSW 2351
Email: home: mackay at northnet.com.au

-----Original Message-----
From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On
Behalf Of C Lin
Sent: Friday, 27 June 2014 10:05
To: r-help at r-project.org
Subject: [R] regular expression help

Dear R users,

I need to match a string. It can be followed or preceded by whitespace or //
or nothing.
How do I code it in R?

For example:
test <- c('AARSD11','AARSD1-','AARSD1//','AARSD1 //','//AARSD1');
grep('AARSD1(\\s*//*)',test);

should return 3,4,5 and 6.

Thanks in advance for your help.

Lin 		 	   		  
______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From baccts at hotmail.com  Fri Jun 27 03:11:46 2014
From: baccts at hotmail.com (C Lin)
Date: Thu, 26 Jun 2014 21:11:46 -0400
Subject: [R] regular expression help
In-Reply-To: <002501cf91a3$0d311150$279333f0$@bigpond.com>
References: <COL129-W77308B84F4C44D6A25457ACB1B0@phx.gbl>,
	<002501cf91a3$0d311150$279333f0$@bigpond.com>
Message-ID: <COL129-W955C4F549F251ECEC73BD1CB1B0@phx.gbl>

Hi Duncan,

Thanks for trying to help. Sorry for not being clear.
The string I'd like to get is 'AARSD1'
It can be followed or preceded by white space or // or nothing

so, from test <- c('AARSD11','AARSD1-','AARSD1//','AARSD1 //','//AARSD1','AARSD1');

I want to match only 'AARSD1//','AARSD1 //','//AARSD1','AARSD1'

Thanks,
Lin
?
----------------------------------------
> From: dulcalma at bigpond.com
> To: baccts at hotmail.com; r-help at r-project.org
> Subject: RE: [R] regular expression help
> Date: Fri, 27 Jun 2014 10:59:29 +1000
>
> Hi
>
> You only have a vector of length 5 and I am not quite sure of the string you
> are testing
> so try this
>
> grep('[/]*\\<AARSD1\\>[/]*',test)
>
> Duncan
>
> Duncan Mackay
> Department of Agronomy and Soil Science
> University of New England
> Armidale NSW 2351
> Email: home: mackay at northnet.com.au
>
> -----Original Message-----
> From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On
> Behalf Of C Lin
> Sent: Friday, 27 June 2014 10:05
> To: r-help at r-project.org
> Subject: [R] regular expression help
>
> Dear R users,
>
> I need to match a string. It can be followed or preceded by whitespace or //
> or nothing.
> How do I code it in R?
>
> For example:
> test <- c('AARSD11','AARSD1-','AARSD1//','AARSD1 //','//AARSD1');
> grep('AARSD1(\\s*//*)',test);
>
> should return 3,4,5 and 6.
>
> Thanks in advance for your help.
>
> Lin
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
 		 	   		  

From seth at forestadapt.org  Fri Jun 27 03:17:49 2014
From: seth at forestadapt.org (seth at forestadapt.org)
Date: Thu, 26 Jun 2014 20:17:49 -0500
Subject: [R] decreasing blank space in ggplot2 geom_area
In-Reply-To: <CA+vqiLGUNB1bPLQ-AmTKLtAwH+hA62KBjYF6GN=zuXDs9NvEwQ@mail.gmail.com>
Message-ID: <79f63eadb6afe64cc58ea89353c85fd5568d6db5@sitemail.hostway.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140626/cc369625/attachment.pl>

From btyner at gmail.com  Fri Jun 27 04:08:20 2014
From: btyner at gmail.com (Benjamin Tyner)
Date: Thu, 26 Jun 2014 22:08:20 -0400
Subject: [R] non-interactive subset, `$`, and quotes
Message-ID: <53ACD214.5050801@gmail.com>

Hi

I know that subset() is not intended for use in programming. However I
am still curious to learn why, in non-interactive mode, if I take away
the quotes around 'bar'

   Rscript -e "foo <- list(bar = iris); head(subset(foo$'bar',
Species=='setosa'))"
     Sepal.Length Sepal.Width Petal.Length Petal.Width Species
   1          5.1         3.5          1.4         0.2  setosa
   2          4.9         3.0          1.4         0.2  setosa
   3          4.7         3.2          1.3         0.2  setosa
   4          4.6         3.1          1.5         0.2  setosa
   5          5.0         3.6          1.4         0.2  setosa
   6          5.4         3.9          1.7         0.4  setosa

then it results in an error:

   Rscript -e "foo <- list(bar = iris); head(subset(foo$bar,
Species=='setosa'))"
   Error in subset.default(foo, Species == "setosa") :
     object 'Species' not found
   Calls: head -> subset -> subset.default
   Execution halted

and also why this does not occur in interactive mode? My sessionInfo() is

   R Under development (unstable) (2014-06-26 r66043)
   Platform: x86_64-unknown-linux-gnu (64-bit)

   locale:
    [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C             
    [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8   
    [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8  
    [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                
    [9] LC_ADDRESS=C               LC_TELEPHONE=C           
   [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C      

   attached base packages:
   [1] stats     graphics  grDevices utils     datasets  methods   base

Regards
Ben


From murdoch.duncan at gmail.com  Fri Jun 27 04:25:21 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Fri, 27 Jun 2014 04:25:21 +0200
Subject: [R] non-interactive subset, `$`, and quotes
In-Reply-To: <53ACD214.5050801@gmail.com>
References: <53ACD214.5050801@gmail.com>
Message-ID: <53ACD611.5010606@gmail.com>

On 27/06/2014, 4:08 AM, Benjamin Tyner wrote:
> Hi
> 
> I know that subset() is not intended for use in programming. However I
> am still curious to learn why, in non-interactive mode, if I take away
> the quotes around 'bar'
> 
>    Rscript -e "foo <- list(bar = iris); head(subset(foo$'bar',
> Species=='setosa'))"
>      Sepal.Length Sepal.Width Petal.Length Petal.Width Species
>    1          5.1         3.5          1.4         0.2  setosa
>    2          4.9         3.0          1.4         0.2  setosa
>    3          4.7         3.2          1.3         0.2  setosa
>    4          4.6         3.1          1.5         0.2  setosa
>    5          5.0         3.6          1.4         0.2  setosa
>    6          5.4         3.9          1.7         0.4  setosa
> 
> then it results in an error:
> 
>    Rscript -e "foo <- list(bar = iris); head(subset(foo$bar,
> Species=='setosa'))"
>    Error in subset.default(foo, Species == "setosa") :
>      object 'Species' not found
>    Calls: head -> subset -> subset.default
>    Execution halted
> 
> and also why this does not occur in interactive mode? My sessionInfo() is
> 
>    R Under development (unstable) (2014-06-26 r66043)
>    Platform: x86_64-unknown-linux-gnu (64-bit)
> 
>    locale:
>     [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C             
>     [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8   
>     [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8  
>     [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                
>     [9] LC_ADDRESS=C               LC_TELEPHONE=C           
>    [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C      
> 
>    attached base packages:
>    [1] stats     graphics  grDevices utils     datasets  methods   base
> 

Try replacing "Rscript -e" with "echo" to see what your shell is really
sending as a command to execute.   I suspect it is treating $bar as a
shell variable (see the error message, it has disappeared).


From btyner at gmail.com  Fri Jun 27 04:35:44 2014
From: btyner at gmail.com (Benjamin Tyner)
Date: Thu, 26 Jun 2014 22:35:44 -0400
Subject: [R] non-interactive subset, `$`, and quotes
In-Reply-To: <53ACD611.5010606@gmail.com>
References: <53ACD214.5050801@gmail.com> <53ACD611.5010606@gmail.com>
Message-ID: <53ACD880.6060008@gmail.com>

Duncan,

How embarrassing! Thanks.

-Ben

On 06/26/2014 10:25 PM, Duncan Murdoch wrote:
> On 27/06/2014, 4:08 AM, Benjamin Tyner wrote:
>> Hi
>>
>> I know that subset() is not intended for use in programming. However I
>> am still curious to learn why, in non-interactive mode, if I take away
>> the quotes around 'bar'
>>
>>    Rscript -e "foo <- list(bar = iris); head(subset(foo$'bar',
>> Species=='setosa'))"
>>      Sepal.Length Sepal.Width Petal.Length Petal.Width Species
>>    1          5.1         3.5          1.4         0.2  setosa
>>    2          4.9         3.0          1.4         0.2  setosa
>>    3          4.7         3.2          1.3         0.2  setosa
>>    4          4.6         3.1          1.5         0.2  setosa
>>    5          5.0         3.6          1.4         0.2  setosa
>>    6          5.4         3.9          1.7         0.4  setosa
>>
>> then it results in an error:
>>
>>    Rscript -e "foo <- list(bar = iris); head(subset(foo$bar,
>> Species=='setosa'))"
>>    Error in subset.default(foo, Species == "setosa") :
>>      object 'Species' not found
>>    Calls: head -> subset -> subset.default
>>    Execution halted
>>
>> and also why this does not occur in interactive mode? My sessionInfo() is
>>
>>    R Under development (unstable) (2014-06-26 r66043)
>>    Platform: x86_64-unknown-linux-gnu (64-bit)
>>
>>    locale:
>>     [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C             
>>     [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8   
>>     [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8  
>>     [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                
>>     [9] LC_ADDRESS=C               LC_TELEPHONE=C           
>>    [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C      
>>
>>    attached base packages:
>>    [1] stats     graphics  grDevices utils     datasets  methods   base
>>
> Try replacing "Rscript -e" with "echo" to see what your shell is really
> sending as a command to execute.   I suspect it is treating $bar as a
> shell variable (see the error message, it has disappeared).
>


-- 
<i> </i>



From zadig_1 at excite.com  Fri Jun 27 04:49:01 2014
From: zadig_1 at excite.com (ce)
Date: Thu, 26 Jun 2014 22:49:01 -0400
Subject: [R] Error in foo[[1:3]] : recursive indexing failed at level 2
Message-ID: <20140626224901.23412@web006.roc2.bluetie.com>

Dear all,

I have a list of arrays :

foo<-list(A = c(1,3), B =c(1, 2), C = c(3, 1)) 

> foo
$A
[1] 1 3

$B
[1] 1 2

$C
[1] 3 1

I want to use all foo$A , foo$B and foo$C in a test :

> foo$A[1] == 1 
[1] TRUE
> foo[[1]][1] == 1 
[1] TRUE
> foo[[1:3]][1] == 1 
Error in foo[[1:3]] : recursive indexing failed at level 2


Is there a regular expression I can use ?


From gunter.berton at gene.com  Fri Jun 27 05:29:55 2014
From: gunter.berton at gene.com (Bert Gunter)
Date: Thu, 26 Jun 2014 20:29:55 -0700
Subject: [R] Error in foo[[1:3]] : recursive indexing failed at level 2
In-Reply-To: <20140626224901.23412@web006.roc2.bluetie.com>
References: <20140626224901.23412@web006.roc2.bluetie.com>
Message-ID: <CACk-te1MBWV-VBC2stUkXDRyFS9zodH_8ueugN+MWF3hMxzvNg@mail.gmail.com>

foo[[1:3]] asks for the 3rd member of the second component of the list
 that is nested within the 1st component of the top level list. You
have no nested sublists, so this is clearly nonsense. You need to
re-read ?"[" or consult The Introduction to R or other online tutorial
to understand the semantics of "[["  with a vector of indices as
argument.

Cheers,
Bert

Bert Gunter
Genentech Nonclinical Biostatistics
(650) 467-7374

"Data is not information. Information is not knowledge. And knowledge
is certainly not wisdom."
Clifford Stoll




On Thu, Jun 26, 2014 at 7:49 PM, ce <zadig_1 at excite.com> wrote:
> Dear all,
>
> I have a list of arrays :
>
> foo<-list(A = c(1,3), B =c(1, 2), C = c(3, 1))
>
>> foo
> $A
> [1] 1 3
>
> $B
> [1] 1 2
>
> $C
> [1] 3 1
>
> I want to use all foo$A , foo$B and foo$C in a test :
>
>> foo$A[1] == 1
> [1] TRUE
>> foo[[1]][1] == 1
> [1] TRUE
>> foo[[1:3]][1] == 1
> Error in foo[[1:3]] : recursive indexing failed at level 2
>
>
> Is there a regular expression I can use ?
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From dwinsemius at comcast.net  Fri Jun 27 07:12:05 2014
From: dwinsemius at comcast.net (David Winsemius)
Date: Thu, 26 Jun 2014 22:12:05 -0700
Subject: [R] regular expression help
In-Reply-To: <COL129-W955C4F549F251ECEC73BD1CB1B0@phx.gbl>
References: <COL129-W77308B84F4C44D6A25457ACB1B0@phx.gbl>,
	<002501cf91a3$0d311150$279333f0$@bigpond.com>
	<COL129-W955C4F549F251ECEC73BD1CB1B0@phx.gbl>
Message-ID: <A0BDC150-62E3-4E53-9C24-693DA5C88E56@comcast.net>


On Jun 26, 2014, at 6:11 PM, C Lin wrote:

> Hi Duncan,
> 
> Thanks for trying to help. Sorry for not being clear.
> The string I'd like to get is 'AARSD1'
> It can be followed or preceded by white space or // or nothing
> 
> so, from test <- c('AARSD11','AARSD1-','AARSD1//','AARSD1 //','//AARSD1','AARSD1');
> 
> I want to match only 'AARSD1//','AARSD1 //','//AARSD1','AARSD1'

Perhaps you want jsut 

grepl('^AARSD1//$|^AARSD1 //$|^//AARSD1$|^AARSD1', test)

> grepl('^AARSD1//$|^AARSD1 //$|^//AARSD1$|^AARSD1$', test)
[1] FALSE FALSE  TRUE  TRUE  TRUE  TRUE

-- 
David.

> 

> Thanks,
> Lin
>  
> ----------------------------------------
>> From: dulcalma at bigpond.com
>> To: baccts at hotmail.com; r-help at r-project.org
>> Subject: RE: [R] regular expression help
>> Date: Fri, 27 Jun 2014 10:59:29 +1000
>> 
>> Hi
>> 
>> You only have a vector of length 5 and I am not quite sure of the string you
>> are testing
>> so try this
>> 
>> grep('[/]*\\<AARSD1\\>[/]*',test)
>> 
>> Duncan
>> 
>> Duncan Mackay
>> Department of Agronomy and Soil Science
>> University of New England
>> Armidale NSW 2351
>> Email: home: mackay at northnet.com.au
>> 
>> -----Original Message-----
>> From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On
>> Behalf Of C Lin
>> Sent: Friday, 27 June 2014 10:05
>> To: r-help at r-project.org
>> Subject: [R] regular expression help
>> 
>> Dear R users,
>> 
>> I need to match a string. It can be followed or preceded by whitespace or //
>> or nothing.
>> How do I code it in R?
>> 
>> For example:
>> test <- c('AARSD11','AARSD1-','AARSD1//','AARSD1 //','//AARSD1');
>> grep('AARSD1(\\s*//*)',test);
>> 
>> should return 3,4,5 and 6.
>> 
> 


David Winsemius
Alameda, CA, USA


From a_talebi5855 at yahoo.com  Thu Jun 26 18:37:28 2014
From: a_talebi5855 at yahoo.com (atefeh talebi)
Date: Thu, 26 Jun 2014 09:37:28 -0700
Subject: [R] Question about Entropy
Message-ID: <1403800648.838.YahooMailNeo@web162403.mail.bf1.yahoo.com>

Hi Dear;
I have a question about entropy
In package entropy in R,what shows high(or low) of mutual information?That is,high MI indicates high information or vice versa.
I send entropy package in R.

Thanks a lot.
Best Regards.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: entropy.pdf
Type: application/pdf
Size: 171072 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140626/5d8e8a4b/attachment.pdf>

From smartpink111 at yahoo.com  Fri Jun 27 05:00:51 2014
From: smartpink111 at yahoo.com (arun)
Date: Thu, 26 Jun 2014 20:00:51 -0700
Subject: [R] Stringr / Regular Expressions advice
In-Reply-To: <CAMDKLUxmKLtpGVDBO8oSEeZH121kjJPbAFROKNKdoqo6dZptPA@mail.gmail.com>
References: <CAMDKLUxmKLtpGVDBO8oSEeZH121kjJPbAFROKNKdoqo6dZptPA@mail.gmail.com>
Message-ID: <1403838051.70193.YahooMailNeo@web142603.mail.bf1.yahoo.com>



Hi,
May be you can use ?cut or ?findInterval for the range

dat1 <- read.table(text="100, 100, 200
250, 300, 350
100, 350, 100
400, 250, 300
200, 450, 200
150, 501, 300
150, 250, 300",sep=",",header=F)
sapply(dat1, findInterval, c(400,500))==1
#??????? V1??? V2??? V3
#[1,] FALSE FALSE FALSE
#[2,] FALSE FALSE FALSE
#[3,] FALSE FALSE FALSE
#[4,]? TRUE FALSE FALSE
#[5,] FALSE? TRUE FALSE
#[6,] FALSE FALSE FALSE
#[7,] FALSE FALSE FALSE

A.K.



On Thursday, June 26, 2014 4:11 PM, VINCENT DEAN BOYCE <vincentdeanboyce at gmail.com> wrote:
Hello,

Using R,? I've loaded a .cvs file comprised of several hundred rows and 3
columns of data. The data within maps the output of a triaxial
accelerometer, a sensor which measures an object's acceleration along the
x,y and z axes. The data for each respective column sequentially
oscillates, and ranges numerically from 100 to 500.

I want create a function that parses the data and detects patterns across
the three columns.

For instance, I would like to detect instances when the values for the x,y
and z columns equal 150, 200, 300 respectively. Additionally, when a match
is detected, I would like to know how many times the pattern appears.

I have been successful using str_detect to provide a Boolean, however it
seems to only work on a single vector, i.e, "400" , not a range of values
i.e "400 - 450". See below:


# this works
> vals <- str_detect (string = data_log$x_reading, pattern = "400")

# this also works, but doesn't detect the particular range, rather the
existence of the numbers
> vals <- str_detect (string = data_log$x_reading, pattern = "[400-450]")

Also, it appears that I can only apply it to a single column, not to all
three columns. However I may be mistaken.

Any advice on my current approach or alternativea I should consider is
greatly appreciated.

Many thanks,

Vincent

??? [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From smartpink111 at yahoo.com  Fri Jun 27 05:16:12 2014
From: smartpink111 at yahoo.com (arun)
Date: Thu, 26 Jun 2014 20:16:12 -0700
Subject: [R] Error in foo[[1:3]] : recursive indexing failed at level 2
In-Reply-To: <20140626224901.23412@web006.roc2.bluetie.com>
References: <20140626224901.23412@web006.roc2.bluetie.com>
Message-ID: <1403838972.27808.YahooMailNeo@web142601.mail.bf1.yahoo.com>

You could use:
mapply(`==`, sapply(foo,`[`,1),1)
#??? A???? B???? C 
# TRUE? TRUE FALSE 
A.K.





On Thursday, June 26, 2014 10:50 PM, ce <zadig_1 at excite.com> wrote:
Dear all,

I have a list of arrays :

foo<-list(A = c(1,3), B =c(1, 2), C = c(3, 1)) 

> foo
$A
[1] 1 3

$B
[1] 1 2

$C
[1] 3 1

I want to use all foo$A , foo$B and foo$C in a test :

> foo$A[1] == 1 
[1] TRUE
> foo[[1]][1] == 1 
[1] TRUE
> foo[[1:3]][1] == 1 
Error in foo[[1:3]] : recursive indexing failed at level 2


Is there a regular expression I can use ?

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.



From kellyn.b.wolff at gmail.com  Fri Jun 27 04:34:15 2014
From: kellyn.b.wolff at gmail.com (Kellyn Wolff)
Date: Thu, 26 Jun 2014 19:34:15 -0700
Subject: [R] [HELP] Setting plot colors such that category/color mapping
 persists across plots
Message-ID: <CAJvkv_6h-=nT-S1T83UG1YjwQYn_jtfnYD7cnTxKo8=016RuOg@mail.gmail.com>

Hi all,

I'm creating a set of stacked bar charts, where each bar is colored by
a category.  The problem I'm having is that a given category is being
represented by different colors across plots (category A might be red
in one plot and blue in another).  This is because the number of
categories in a given plot may change, thus getting a different color
assignment from R.

My thought was that I could create a column with the hexadecimal value
for the color I want in each category, and then somehow specify in the
plot that I want it to choose the color specified in that column.
There may be a better way.

I am using RStudio 0.98.945 on Windows 7 64 bit.  I've pasted some
example code below to illustrate the issue I'm having.  You will
notice that categories D, E and F in "plottest2" have different colors
than they do in "plottest".  I want colors for a given category to
persist across plots.

TestData <- data.frame(rep(c("A","B","C","D","E","F"), each=10),
rep(1:10, 6), rnorm(6, 60, 10)*rep(1:10, 6))
names(TestData) <- c("category", "timeline", "rollup")

library(ggplot2)
plottest <- ggplot(TestData, aes(as.factor(timeline), rollup, category))
plottest + geom_bar(stat="identity", aes(fill=category)) +
labs(title="Test rollup data over time") +
  labs(x = "Time measure") + labs(y = "Frequency Totals") +
theme(axis.text.x = element_text(angle = 45, hjust = 1))


plottest2 <- ggplot(subset(TestData, category == "D" | category == "E"
| category == "F"), aes(as.factor(timeline), rollup, category))
plottest2 + geom_bar(stat="identity", aes(fill=category)) +
labs(title="Test rollup data over time subsetted") +
  labs(x = "Time measure") + labs(y = "Frequency Totals") +
theme(axis.text.x = element_text(angle = 45, hjust = 1))


This is my first post to this group, so I hope I've followed the
posting guidelines appropriately.  Please advise if there is anything
I can do to make this more helpful.

Thanks in advance!

-KW


From petr.pikal at precheza.cz  Fri Jun 27 08:07:43 2014
From: petr.pikal at precheza.cz (PIKAL Petr)
Date: Fri, 27 Jun 2014 06:07:43 +0000
Subject: [R] Error in foo[[1:3]] : recursive indexing failed at level 2
In-Reply-To: <1403838972.27808.YahooMailNeo@web142601.mail.bf1.yahoo.com>
References: <20140626224901.23412@web006.roc2.bluetie.com>
	<1403838972.27808.YahooMailNeo@web142601.mail.bf1.yahoo.com>
Message-ID: <6E8D8DFDE5FA5D4ABCB8508389D1BF8802BD9656@SRVEXCHMBX.precheza.cz>

Hi

or
> lapply(foo, "[",1)==1
    A     B     C
 TRUE  TRUE FALSE

Regards
Petr

> -----Original Message-----
> From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-
> project.org] On Behalf Of arun
> Sent: Friday, June 27, 2014 5:16 AM
> To: ce; r-help at r-project.org
> Subject: Re: [R] Error in foo[[1:3]] : recursive indexing failed at
> level 2
>
> You could use:
> mapply(`==`, sapply(foo,`[`,1),1)
> #    A     B     C
> # TRUE  TRUE FALSE
> A.K.
>
>
>
>
>
> On Thursday, June 26, 2014 10:50 PM, ce <zadig_1 at excite.com> wrote:
> Dear all,
>
> I have a list of arrays :
>
> foo<-list(A = c(1,3), B =c(1, 2), C = c(3, 1))
>
> > foo
> $A
> [1] 1 3
>
> $B
> [1] 1 2
>
> $C
> [1] 3 1
>
> I want to use all foo$A , foo$B and foo$C in a test :
>
> > foo$A[1] == 1
> [1] TRUE
> > foo[[1]][1] == 1
> [1] TRUE
> > foo[[1:3]][1] == 1
> Error in foo[[1:3]] : recursive indexing failed at level 2
>
>
> Is there a regular expression I can use ?
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.

________________________________
Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou ur?eny pouze jeho adres?t?m.
Jestli?e jste obdr?el(a) tento e-mail omylem, informujte laskav? neprodlen? jeho odes?latele. Obsah tohoto emailu i s p??lohami a jeho kopie vyma?te ze sv?ho syst?mu.
Nejste-li zam??len?m adres?tem tohoto emailu, nejste opr?vn?ni tento email jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu zp?sobenou modifikacemi ?i zpo?d?n?m p?enosu e-mailu.

V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
- vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o uzav?en? smlouvy, a to z jak?hokoliv d?vodu i bez uveden? d?vodu.
- a obsahuje-li nab?dku, je adres?t opr?vn?n nab?dku bezodkladn? p?ijmout; Odes?latel tohoto e-mailu (nab?dky) vylu?uje p?ijet? nab?dky ze strany p??jemce s dodatkem ?i odchylkou.
- trv? odes?latel na tom, ?e p??slu?n? smlouva je uzav?ena teprve v?slovn?m dosa?en?m shody na v?ech jej?ch n?le?itostech.
- odes?latel tohoto emailu informuje, ?e nen? opr?vn?n uzav?rat za spole?nost ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn? zmocn?n nebo p?semn? pov??en a takov? pov??en? nebo pln? moc byly adres?tovi tohoto emailu p??padn? osob?, kterou adres?t zastupuje, p?edlo?eny nebo jejich existence je adres?tovi ?i osob? j?m zastoupen? zn?m?.

This e-mail and any documents attached to it may be confidential and are intended only for its intended recipients.
If you received this e-mail by mistake, please immediately inform its sender. Delete the contents of this e-mail with all attachments and its copies from your system.
If you are not the intended recipient of this e-mail, you are not authorized to use, disseminate, copy or disclose this e-mail in any manner.
The sender of this e-mail shall not be liable for any possible damage caused by modifications of the e-mail or by delay with transfer of the email.

In case that this e-mail forms part of business dealings:
- the sender reserves the right to end negotiations about entering into a contract in any time, for any reason, and without stating any reasoning.
- if the e-mail contains an offer, the recipient is entitled to immediately accept such offer; The sender of this e-mail (offer) excludes any acceptance of the offer on the part of the recipient containing any amendment or variation.
- the sender insists on that the respective contract is concluded only upon an express mutual agreement on all its aspects.
- the sender of this e-mail informs that he/she is not authorized to enter into any contracts on behalf of the company except for cases in which he/she is expressly authorized to do so in writing, and such authorization or power of attorney is submitted to the recipient or the person represented by the recipient, or the existence of such authorization is known to the recipient of the person represented by the recipient.


From abhinabaroy09 at gmail.com  Fri Jun 27 08:46:35 2014
From: abhinabaroy09 at gmail.com (Abhinaba Roy)
Date: Fri, 27 Jun 2014 12:16:35 +0530
Subject: [R] Basket Analysis in R: extract rules
Message-ID: <CANtKHPURe1a=RS+-4pKg2dJzmxdMY4D-8TjGGPZE853fZXQ=OQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140627/f3d1afba/attachment.pl>

From sigbert at wiwi.hu-berlin.de  Fri Jun 27 09:43:48 2014
From: sigbert at wiwi.hu-berlin.de (Sigbert Klinke)
Date: Fri, 27 Jun 2014 09:43:48 +0200
Subject: [R] Localization of R script output
Message-ID: <53AD20B4.2080100@wiwi.hu-berlin.de>

Hi,

I have written some R scripts for a server which display the result on a
webpage. I would like to localize the output to the webpage depending on
the users choice.

Therefore I prepared some po files. Exist some possibility to utilize
the gettext command of R? As far as I see I can not set the language
from within R.
Or exists a package to read in and handle mo files?

Thanks in advance

Sigbert


From wdunlap at tibco.com  Fri Jun 27 11:35:54 2014
From: wdunlap at tibco.com (William Dunlap)
Date: Fri, 27 Jun 2014 02:35:54 -0700
Subject: [R] regular expression help
In-Reply-To: <A0BDC150-62E3-4E53-9C24-693DA5C88E56@comcast.net>
References: <COL129-W77308B84F4C44D6A25457ACB1B0@phx.gbl>
	<002501cf91a3$0d311150$279333f0$@bigpond.com>
	<COL129-W955C4F549F251ECEC73BD1CB1B0@phx.gbl>
	<A0BDC150-62E3-4E53-9C24-693DA5C88E56@comcast.net>
Message-ID: <CAF8bMcbyU4Ew-E0nJ2P1VtaCZELQV50j73JvFWtzeSn8uS66pg@mail.gmail.com>

You can use parentheses to factor out the common string in David's
pattern, as in
   grep(value=TRUE, "(^|//|[[:space:]]+)AARSD1($|//|[[:space:]]+)", test)

(By 'whitespace' I could not tell if you meant any amount of
whitespace or a single
whitespace character.  I use '+' to match one or more whitespace characters.)

Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Thu, Jun 26, 2014 at 10:12 PM, David Winsemius
<dwinsemius at comcast.net> wrote:
>
> On Jun 26, 2014, at 6:11 PM, C Lin wrote:
>
>> Hi Duncan,
>>
>> Thanks for trying to help. Sorry for not being clear.
>> The string I'd like to get is 'AARSD1'
>> It can be followed or preceded by white space or // or nothing
>>
>> so, from test <- c('AARSD11','AARSD1-','AARSD1//','AARSD1 //','//AARSD1','AARSD1');
>>
>> I want to match only 'AARSD1//','AARSD1 //','//AARSD1','AARSD1'
>
> Perhaps you want jsut
>
> grepl('^AARSD1//$|^AARSD1 //$|^//AARSD1$|^AARSD1', test)
>
>> grepl('^AARSD1//$|^AARSD1 //$|^//AARSD1$|^AARSD1$', test)
> [1] FALSE FALSE  TRUE  TRUE  TRUE  TRUE
>
> --
> David.
>
>>
>
>> Thanks,
>> Lin
>>
>> ----------------------------------------
>>> From: dulcalma at bigpond.com
>>> To: baccts at hotmail.com; r-help at r-project.org
>>> Subject: RE: [R] regular expression help
>>> Date: Fri, 27 Jun 2014 10:59:29 +1000
>>>
>>> Hi
>>>
>>> You only have a vector of length 5 and I am not quite sure of the string you
>>> are testing
>>> so try this
>>>
>>> grep('[/]*\\<AARSD1\\>[/]*',test)
>>>
>>> Duncan
>>>
>>> Duncan Mackay
>>> Department of Agronomy and Soil Science
>>> University of New England
>>> Armidale NSW 2351
>>> Email: home: mackay at northnet.com.au
>>>
>>> -----Original Message-----
>>> From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On
>>> Behalf Of C Lin
>>> Sent: Friday, 27 June 2014 10:05
>>> To: r-help at r-project.org
>>> Subject: [R] regular expression help
>>>
>>> Dear R users,
>>>
>>> I need to match a string. It can be followed or preceded by whitespace or //
>>> or nothing.
>>> How do I code it in R?
>>>
>>> For example:
>>> test <- c('AARSD11','AARSD1-','AARSD1//','AARSD1 //','//AARSD1');
>>> grep('AARSD1(\\s*//*)',test);
>>>
>>> should return 3,4,5 and 6.
>>>
>>
>
>
> David Winsemius
> Alameda, CA, USA
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From sarah.goslee at gmail.com  Fri Jun 27 11:51:49 2014
From: sarah.goslee at gmail.com (Sarah Goslee)
Date: Fri, 27 Jun 2014 05:51:49 -0400
Subject: [R] Stringr / Regular Expressions advice
In-Reply-To: <CAMDKLUxMCZoxo7iahndSaoHEsHk=RkRt5MEdahjFbss9N8HZrw@mail.gmail.com>
References: <CAMDKLUxmKLtpGVDBO8oSEeZH121kjJPbAFROKNKdoqo6dZptPA@mail.gmail.com>
	<CAM_vjun5wxdt8S_KLhFoYkiW-NE3dNcJCAQ_UYu+EOtBiODyCg@mail.gmail.com>
	<CAMDKLUxMCZoxo7iahndSaoHEsHk=RkRt5MEdahjFbss9N8HZrw@mail.gmail.com>
Message-ID: <CAM_vjuk8N3R1qxQKZtYT+SAVeE-Ac121PnzWhcJmumF6TqssYA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140627/05839cb5/attachment.pl>

From j.boutet at conservatoirepicardie.org  Fri Jun 27 12:05:14 2014
From: j.boutet at conservatoirepicardie.org (j.boutet at conservatoirepicardie.org)
Date: Fri, 27 Jun 2014 12:05:14 +0200 (CEST)
Subject: [R] =?utf-8?q?_R=C3=A9ponse_automatique?=
Message-ID: <201406271005.s5RA5Er5077253@albane10.nfrance.com>




Bonjour,

Je suis absent jusqu'au 4 ao?t prochain.

En cas d'urgence, merci de contacter Francis Meunier, directeur-adjoint :

f.meunier - at - conservatoirepicardie.org



J. Boutet



> From: r-help-request at r-project.org
> Subject: R-help Digest, Vol 136, Issue 27
> Date: Fri, 27 Jun 2014 12:00:08 +0200


From k.barton at abdn.ac.uk  Fri Jun 27 12:31:34 2014
From: k.barton at abdn.ac.uk (=?UTF-8?B?S2FtaWwgQmFydG/FhA==?=)
Date: Fri, 27 Jun 2014 11:31:34 +0100
Subject: [R] AICc in MuMIn package
In-Reply-To: <mailman.21.1403863208.10470.r-help@r-project.org>
References: <mailman.21.1403863208.10470.r-help@r-project.org>
Message-ID: <53AD4806.6040007@abdn.ac.uk>

On 2014-06-27 11:00, r-help-request at r-project.org wrote:
> Date: Thu, 26 Jun 2014 15:12:08 +0200
 > From: Carlos Bautista  Le?n <carlosbautistaleon at gmail.com>
 > To: r-help at r-project.org
 > Subject: [R] AICc in MuMIn package
> Hello, I am modelling in glmmADMB count data
> (I??m using a negative binomial distribution to avoid possitive
> overdispersion) with four fixed and one random effect. I??m also using
> MuMIn package to calculate the AICc and also to model averaging using
> the function dredge. What I do not understand is why dredge calculates a
> different value of the AICc and degrees of freedom than the function
> AICc (please see bellow). Also the logLik changes (as expected).
>> >logLik (glmmadmb.Tot.Pr.nb) ---- 12 in model selection table
> 'log Lik.' -379.739 (df=6)
>> >logLik (glmmadmb.Tot.P.nb)------ 16 in model selection table
> 'log Lik.' -379.688 (df=7)
>
>                              df     AICc
> glmmadmb.Tot.Pr.nb  6   772.8113----12 in model selection table
> glmmadmb.Tot.P.nb   7   775.1825---- 16 in model selection table
>
>
> Model selection table
>       (Int)      Agr/100 Brd/100 Frs/100  HD/100 df   logLik  AICc delta
> weight
> 12 0.90850 -10.570   17.08               1.4220  5 -397.992 806.9  0.00
>   0.713
> 16 1.10300 -10.470   17.39 -0.7603   1.5140   6 -397.730 808.8  1.87  0.280
>
>
> Can anyone explain me why this happend? and which values are correct, those
> from dredge function or those from AICc function?
>
> Thank you very much in advace.
>
> Carlos
>

your models 'glmmadmb.Tot.Pr.nb' and 'glmmadmb.Tot.P.nb' do not seem to
be identical to model '12' and '16', since 'df's do not match (5 and 6
vs 6 and 7). You can compare the model calls to see what differs them:

getCall( glmmadmb.Tot.Pr.nb )
getCall( <model.selection.table> , "12")








The University of Aberdeen is a charity registered in Scotland, No SC013683.
Tha Oilthigh Obar Dheathain na charthannas cl?raichte ann an Alba, ?ir. SC013683.


From baccts at hotmail.com  Fri Jun 27 15:27:58 2014
From: baccts at hotmail.com (C Lin)
Date: Fri, 27 Jun 2014 09:27:58 -0400
Subject: [R] regular expression help
In-Reply-To: <CAF8bMcbyU4Ew-E0nJ2P1VtaCZELQV50j73JvFWtzeSn8uS66pg@mail.gmail.com>
References: <COL129-W77308B84F4C44D6A25457ACB1B0@phx.gbl>
	<002501cf91a3$0d311150$279333f0$@bigpond.com>,
	<COL129-W955C4F549F251ECEC73BD1CB1B0@phx.gbl>
	<A0BDC150-62E3-4E53-9C24-693DA5C88E56@comcast.net>,
	<CAF8bMcbyU4Ew-E0nJ2P1VtaCZELQV50j73JvFWtzeSn8uS66pg@mail.gmail.com>
Message-ID: <COL129-W288460DAAE75B85CB055C8CB1B0@phx.gbl>

Thank you all for your help.

Bill, thanks for making it compact and I did mean any amount of whitespace.

To break it down, so I know why this pattern work:
The first parenthesis means that before AARSD1 it can be
^: begins with nothing
|: or
//: double slash or
[[:space:]]+: one or more whitespace character

For the second parenthesis:
$: ending with nothing

Do this sound correct?

I missed the fact that I need the ^ and $ and I always do [:space:]+ instead of [[:space:]]+
what's the difference between [:space:]+ and[[:space:]]+ ?

Thanks so much!
Lin

----------------------------------------
> From: wdunlap at tibco.com
> Date: Fri, 27 Jun 2014 02:35:54 -0700
> Subject: Re: [R] regular expression help
> To: dwinsemius at comcast.net
> CC: baccts at hotmail.com; r-help at r-project.org
>
> You can use parentheses to factor out the common string in David's
> pattern, as in
> grep(value=TRUE, "(^|//|[[:space:]]+)AARSD1($|//|[[:space:]]+)", test)
>
> (By 'whitespace' I could not tell if you meant any amount of
> whitespace or a single
> whitespace character. I use '+' to match one or more whitespace characters.)
>
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
>
>
> On Thu, Jun 26, 2014 at 10:12 PM, David Winsemius
> <dwinsemius at comcast.net> wrote:
>>
>> On Jun 26, 2014, at 6:11 PM, C Lin wrote:
>>
>>> Hi Duncan,
>>>
>>> Thanks for trying to help. Sorry for not being clear.
>>> The string I'd like to get is 'AARSD1'
>>> It can be followed or preceded by white space or // or nothing
>>>
>>> so, from test <- c('AARSD11','AARSD1-','AARSD1//','AARSD1 //','//AARSD1','AARSD1');
>>>
>>> I want to match only 'AARSD1//','AARSD1 //','//AARSD1','AARSD1'
>>
>> Perhaps you want jsut
>>
>> grepl('^AARSD1//$|^AARSD1 //$|^//AARSD1$|^AARSD1', test)
>>
>>> grepl('^AARSD1//$|^AARSD1 //$|^//AARSD1$|^AARSD1$', test)
>> [1] FALSE FALSE TRUE TRUE TRUE TRUE
>>
>> --
>> David.
>>
>>>
>>
>>> Thanks,
>>> Lin
>>>
>>> ----------------------------------------
>>>> From: dulcalma at bigpond.com
>>>> To: baccts at hotmail.com; r-help at r-project.org
>>>> Subject: RE: [R] regular expression help
>>>> Date: Fri, 27 Jun 2014 10:59:29 +1000
>>>>
>>>> Hi
>>>>
>>>> You only have a vector of length 5 and I am not quite sure of the string you
>>>> are testing
>>>> so try this
>>>>
>>>> grep('[/]*\\<AARSD1\\>[/]*',test)
>>>>
>>>> Duncan
>>>>
>>>> Duncan Mackay
>>>> Department of Agronomy and Soil Science
>>>> University of New England
>>>> Armidale NSW 2351
>>>> Email: home: mackay at northnet.com.au
>>>>
>>>> -----Original Message-----
>>>> From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On
>>>> Behalf Of C Lin
>>>> Sent: Friday, 27 June 2014 10:05
>>>> To: r-help at r-project.org
>>>> Subject: [R] regular expression help
>>>>
>>>> Dear R users,
>>>>
>>>> I need to match a string. It can be followed or preceded by whitespace or //
>>>> or nothing.
>>>> How do I code it in R?
>>>>
>>>> For example:
>>>> test <- c('AARSD11','AARSD1-','AARSD1//','AARSD1 //','//AARSD1');
>>>> grep('AARSD1(\\s*//*)',test);
>>>>
>>>> should return 3,4,5 and 6.
>>>>
>>>
>>
>>
>> David Winsemius
>> Alameda, CA, USA
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
 		 	   		  

From rsherry8 at comcast.net  Fri Jun 27 14:53:41 2014
From: rsherry8 at comcast.net (Robert Sherry)
Date: Fri, 27 Jun 2014 08:53:41 -0400
Subject: [R] Data Frame Members
Message-ID: <53AD6955.9080108@comcast.net>

Suppose that a data frame has been created by the user. Perhaps it has been
created using the library quantmod. Is there any command to find out what
the members of the data frame is?

Thanks
Bob


From smartpink111 at yahoo.com  Fri Jun 27 09:37:17 2014
From: smartpink111 at yahoo.com (arun)
Date: Fri, 27 Jun 2014 00:37:17 -0700
Subject: [R] regular expression help
In-Reply-To: <COL129-W955C4F549F251ECEC73BD1CB1B0@phx.gbl>
References: <COL129-W77308B84F4C44D6A25457ACB1B0@phx.gbl>,
	<002501cf91a3$0d311150$279333f0$@bigpond.com>
	<COL129-W955C4F549F251ECEC73BD1CB1B0@phx.gbl>
Message-ID: <1403854637.86540.YahooMailNeo@web142604.mail.bf1.yahoo.com>

Hi,
You may try:
test[!grepl("(?<=AARSD1)[-\\d]", test, perl=T)]

A.K.




On Friday, June 27, 2014 6:43 AM, C Lin <baccts at hotmail.com> wrote:
Hi Duncan,

Thanks for trying to help. Sorry for not being clear.
The string I'd like to get is 'AARSD1'
It can be followed or preceded by white space or // or nothing

so, from test <- c('AARSD11','AARSD1-','AARSD1//','AARSD1 //','//AARSD1','AARSD1');

I want to match only 'AARSD1//','AARSD1 //','//AARSD1','AARSD1'

Thanks,
Lin
?



----------------------------------------
> From: dulcalma at bigpond.com
> To: baccts at hotmail.com; r-help at r-project.org
> Subject: RE: [R] regular expression help
> Date: Fri, 27 Jun 2014 10:59:29 +1000
>
> Hi
>
> You only have a vector of length 5 and I am not quite sure of the string you
> are testing
> so try this
>
> grep('[/]*\\<AARSD1\\>[/]*',test)
>
> Duncan
>
> Duncan Mackay
> Department of Agronomy and Soil Science
> University of New England
> Armidale NSW 2351
> Email: home: mackay at northnet.com.au
>
> -----Original Message-----
> From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On
> Behalf Of C Lin
> Sent: Friday, 27 June 2014 10:05
> To: r-help at r-project.org
> Subject: [R] regular expression help
>
> Dear R users,
>
> I need to match a string. It can be followed or preceded by whitespace or //
> or nothing.
> How do I code it in R?
>
> For example:
> test <- c('AARSD11','AARSD1-','AARSD1//','AARSD1 //','//AARSD1');
> grep('AARSD1(\\s*//*)',test);
>
> should return 3,4,5 and 6.
>
> Thanks in advance for your help.
>
> Lin
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
??? ???  ??? ?  ??? ??? ? 
______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From sarah.goslee at gmail.com  Fri Jun 27 15:39:45 2014
From: sarah.goslee at gmail.com (Sarah Goslee)
Date: Fri, 27 Jun 2014 09:39:45 -0400
Subject: [R] Data Frame Members
In-Reply-To: <53AD6955.9080108@comcast.net>
References: <53AD6955.9080108@comcast.net>
Message-ID: <CAM_vjuk6AQR3RWZTMG_t8=Dh_hJWDWVC1Arn45us2VSRocgjMQ@mail.gmail.com>

I'm not sure what you mean by members.

Some options:

colnames(yourdf)
str(yourdf)
summary(yourdf)

You would probably benefit from reading the Intro to R that came with
your R installation.

Sarah

On Fri, Jun 27, 2014 at 8:53 AM, Robert Sherry <rsherry8 at comcast.net> wrote:
> Suppose that a data frame has been created by the user. Perhaps it has been
> created using the library quantmod. Is there any command to find out what
> the members of the data frame is?
>
> Thanks
> Bob
>


-- 
Sarah Goslee
http://www.functionaldiversity.org


From David.Reiner at xrtrading.com  Fri Jun 27 18:01:08 2014
From: David.Reiner at xrtrading.com (David Reiner)
Date: Fri, 27 Jun 2014 11:01:08 -0500
Subject: [R] Simple permutation question
In-Reply-To: <CAFEqCdzqnU6GeGP5q3YOiVzm+crx+NasHf4gXee6YuCDWXOP-A@mail.gmail.com>
References: <20140625222212.7b84fd47@dotcom.mfs32>
	<CAFEqCdzqnU6GeGP5q3YOiVzm+crx+NasHf4gXee6YuCDWXOP-A@mail.gmail.com>
Message-ID: <9DE405308A6AA24AA794B76282C6C00F4A5F9C2FBB@HQ-POST1>

Just for reference, I like package iterpc, because it allows one to get one permutation or combination at a time.
You can get all if you like, but for large N, it is sometimes better to iterate through the results to avoid creating a large object.
Also, getall function returns a matrix so you don't have to mess around with reformatting.
Kudos to Randy Lai and Martin Broadhurst!
David L. Reiner

-----Original Message-----
From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On Behalf Of Greg Snow
Sent: Thursday, June 26, 2014 1:39 PM
To: Robert Latest
Cc: r-help
Subject: Re: [R] Simple permutation question

For your 2nd question (which also answers your first question) I use
the permn function in the combinat package, this function is nice that
in addition to generating all the permutations it will also,
optionally, run a function on each permutation for you:

> t(simplify2array( permn( c("A","B","C") ) ))
     [,1] [,2] [,3]
[1,] "A"  "B"  "C"
[2,] "A"  "C"  "B"
[3,] "C"  "A"  "B"
[4,] "C"  "B"  "A"
[5,] "B"  "C"  "A"
[6,] "B"  "A"  "C"
> unlist( permn( c("A","B","C"), fun=paste, collapse='' ) )
[1] "ABC" "ACB" "CAB" "CBA" "BCA" "BAC"

In addition, running help.search on my computer (RSiteSearch, or the
SOS package may return even more) shows the following functions as
generating permutations:

combinat::permn
e1071::permutations
gtools::permutations
multicool::allPerm
pracma::perms
prob::permsn
sna::numperm




On Wed, Jun 25, 2014 at 2:22 PM, Robert Latest <boblatest at gmail.com> wrote:
> So my company has hired a few young McKinsey guys from overseas for a
> couple of weeks to help us with a production line optimization. They
> probably charge what I make in a year, but that's OK because I just
> never have the time to really dive into one particular time, and I have
> to hand it to the consultants that they came up with one or two really
> clever ideas to model the production line. Of course it's up to me to
> feed them the real data which they then churn through their Excel
> models that they cook up during the nights in their hotel rooms, and
> which I then implement back into my experimental system using live data.
>
> Anyway, whenever they need something or come up with something I skip
> out of the room, hack it into R, export the CSV and come back in about
> half the time it takes Excel to even read in the data, let alone
> process it. Of course that gor them curious, and I showed off a couple
> of scripts that condense their abysmal Excel convolutions in a few
> lean and mean lines of R code.
>
> Anyway, I'm in my office with this really attractive, clever young
> McKinsey girl (I'm in my mid-forties, married with kids and all, but I
> still enjoyed impressing a woman with computer stuff, of all things!),
> and one of her models involves a simple permutation of five letters --
> "A" through "E".
>
> And that's when I find out that R doesn't have a permutation function.
> How is that possible? R has EVERYTHING, but not that? I'm
> flabbergasted. Stumped. And now it's up to me to spend the evening at
> home coding that model, and the only thing I really need is that
> permutation.
>
> So this is my first attempt:
>
> perm.broken <- function(x) {
>     if (length(x) == 1) return(x)
>     sapply(1:length(x), function(i) {
>         cbind(x[i], perm(x[-i]))
>     })
> }
>
> But it doesn't work:
>> perm.broken(c("A", "B", "C"))
>      [,1] [,2] [,3]
> [1,] "A"  "B"  "C"
> [2,] "A"  "B"  "C"
> [3,] "B"  "A"  "A"
> [4,] "C"  "C"  "B"
> [5,] "C"  "C"  "B"
> [6,] "B"  "A"  "A"
>>
>
> And I can't figure out for the life of me why. It should work because I
> go through the elements of x in order, use that in the leftmost column,
> and slap the permutation of the remaining elements to the right. What
> strikes me as particularly odd is that there doesn't even seem to be a
> systematic sequence of letters in any of the columns. OK, since I
> really need that function I wrote this piece of crap:
>
> perm.stupid <- function(x) {
>     b <- as.matrix(expand.grid(rep(list(x), length(x))))
>     b[!sapply(1:nrow(b), function(r) any(duplicated(b[r,]))),]
> }
>
> It works, but words cannot describe its ugliness. And it gets really
> slow really fast with growing x.
>
> So, anyway. My two questions are:
> 1. Does R really, really, seriously lack a permutation function?
> 2. OK, stop kidding me. So what's it called?
> 3. Why doesn't my recursive function work, and what would a
>    working version look like?
>
> Thanks,
> robert
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



--
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


This e-mail and any materials attached hereto, including, without limitation, all content hereof and thereof (collectively, "XR Content") are confidential and proprietary to XR Trading, LLC ("XR") and/or its affiliates, and are protected by intellectual property laws.  Without the prior written consent of XR, the XR Content may not (i) be disclosed to any third party or (ii) be reproduced or otherwise used by anyone other than current employees of XR or its affiliates, on behalf of XR or its affiliates.

THE XR CONTENT IS PROVIDED AS IS, WITHOUT REPRESENTATIONS OR WARRANTIES OF ANY KIND.  TO THE MAXIMUM EXTENT PERMISSIBLE UNDER APPLICABLE LAW, XR HEREBY DISCLAIMS ANY AND ALL WARRANTIES, EXPRESS AND IMPLIED, RELATING TO THE XR CONTENT, AND NEITHER XR NOR ANY OF ITS AFFILIATES SHALL IN ANY EVENT BE LIABLE FOR ANY DAMAGES OF ANY NATURE WHATSOEVER, INCLUDING, BUT NOT LIMITED TO, DIRECT, INDIRECT, CONSEQUENTIAL, SPECIAL AND PUNITIVE DAMAGES, LOSS OF PROFITS AND TRADING LOSSES, RESULTING FROM ANY PERSON'S USE OR RELIANCE UPON, OR INABILITY TO USE, ANY XR CONTENT, EVEN IF XR IS ADVISED OF THE POSSIBILITY OF SUCH DAMAGES OR IF SUCH DAMAGES WERE FORESEEABLE.


From 538280 at gmail.com  Fri Jun 27 20:31:39 2014
From: 538280 at gmail.com (Greg Snow)
Date: Fri, 27 Jun 2014 12:31:39 -0600
Subject: [R] graph
In-Reply-To: <002401cf91a1$3c2bf670$b483e350$@bigpond.com>
References: <1403765241.36894.YahooMailNeo@web142501.mail.bf1.yahoo.com>
	<002401cf91a1$3c2bf670$b483e350$@bigpond.com>
Message-ID: <CAFEqCdzVhhs5SinKF7=XhS_LWfPeRfT5k_4PsEWtoWXZCsq86w@mail.gmail.com>

Or

densityplot(~mu, dat, group=gp, auto.key=TRUE)

which will be more like the matplot result.

On Thu, Jun 26, 2014 at 6:46 PM, Duncan Mackay <dulcalma at bigpond.com> wrote:
> As Greg has listed lattice
>
> Here are ways in lattice
>
> quick 1 panel
> library(lattice)
> densityplot(~ mu1+mu2+mu3+mu4)
>
> dat = data.frame(mu = c(mu1,mu2,mu3,mu4), gp = rep(1:4,
> sapply(list(mu1,mu2,mu3,mu4), length)) )
> densityplot(~ mu|gp, data = dat)
> densityplot(~ mu|gp, dat, pch = "|")
>
> see
> ?xyplot
> ?panel.densityplot
>
> Duncan
>
> Duncan Mackay
> Department of Agronomy and Soil Science
> University of New England
> Armidale NSW 2351
> Email: home: mackay at northnet.com.au
>
> -----Original Message-----
> From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On
> Behalf Of IZHAK shabsogh
> Sent: Thursday, 26 June 2014 16:47
> To: r-help at r-project.org
> Subject: [R] graph
>
> kindly guide me on how i can plot the following data on the same graph using
> the kernel density. i will like to use as to compare performance
>
> mu1<-c(500.0035, 501.2213, 500.7532, 500.2622, 500.3391, 500.1618, 499.9511,
> 500.1843, 499.8945, 499.8467)
> mu2<-c(498.9623, 504.7938, 506.8957, 495.6634, 506.2751, 503.4344, 503.9103,
> 512.3021,492.3065, 500.8908)
> mu3<-c(498.9352, 501.3470, 506.7885, 497.3446, 505.6911, 500.0000, 503.9103,
> 512.0994,492.3065, 500.0001)
> mu4<-c(498.5626, 501.3469, 506.7781, 497.3466, 505.6723, 500.0000, 503.9103,
> 512.0936,492.3065, 500.0000)
>
>
> thanks
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com


From arrayprofile at yahoo.com  Fri Jun 27 21:39:29 2014
From: arrayprofile at yahoo.com (array chip)
Date: Fri, 27 Jun 2014 12:39:29 -0700
Subject: [R] standard error of survfit.coxph()
Message-ID: <1403897969.91269.YahooMailNeo@web122906.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140627/899b6713/attachment.pl>

From emammendes at gmail.com  Fri Jun 27 22:05:08 2014
From: emammendes at gmail.com (Eduardo M. A. M. Mendes)
Date: Fri, 27 Jun 2014 17:05:08 -0300
Subject: [R] ggplot2 - change title and size of legends - time series.
Message-ID: <017477F8-6E37-4741-8C30-D95CEE5B686A@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140627/124bb04b/attachment.pl>

From emammendes at gmail.com  Fri Jun 27 22:15:19 2014
From: emammendes at gmail.com (Eduardo M. A. M. Mendes)
Date: Fri, 27 Jun 2014 17:15:19 -0300
Subject: [R] ggplot2 - change title and size of legends - time series.
Message-ID: <BB121EA3-B7A2-4C37-8FDB-F31B4ABBF5EF@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140627/ebe10a01/attachment.pl>

From jim at bitwrit.com.au  Sat Jun 28 02:07:55 2014
From: jim at bitwrit.com.au (Jim Lemon)
Date: Sat, 28 Jun 2014 10:07:55 +1000
Subject: [R] [HELP] Setting plot colors such that category/color mapping
	persists across plots
In-Reply-To: <CAJvkv_6h-=nT-S1T83UG1YjwQYn_jtfnYD7cnTxKo8=016RuOg@mail.gmail.com>
References: <CAJvkv_6h-=nT-S1T83UG1YjwQYn_jtfnYD7cnTxKo8=016RuOg@mail.gmail.com>
Message-ID: <6158850.KWpsHlYOz0@localhost.localdomain>

On Thu, 26 Jun 2014 07:34:15 PM Kellyn Wolff wrote:
> Hi all,
> 
> I'm creating a set of stacked bar charts, where each bar is colored 
by
> a category.  The problem I'm having is that a given category is being
> represented by different colors across plots (category A might be 
red
> in one plot and blue in another).  This is because the number of
> categories in a given plot may change, thus getting a different color
> assignment from R.
> 
> My thought was that I could create a column with the hexadecimal 
value
> for the color I want in each category, and then somehow specify in 
the
> plot that I want it to choose the color specified in that column.
> There may be a better way.
> 
> I am using RStudio 0.98.945 on Windows 7 64 bit.  I've pasted some
> example code below to illustrate the issue I'm having.  You will
> notice that categories D, E and F in "plottest2" have different colors
> than they do in "plottest".  I want colors for a given category to
> persist across plots.
> 
> TestData <- data.frame(rep(c("A","B","C","D","E","F"), each=10),
> rep(1:10, 6), rnorm(6, 60, 10)*rep(1:10, 6))
> names(TestData) <- c("category", "timeline", "rollup")
> 
> library(ggplot2)
> plottest <- ggplot(TestData, aes(as.factor(timeline), rollup, 
category))
> plottest + geom_bar(stat="identity", aes(fill=category)) +
> labs(title="Test rollup data over time") +
>   labs(x = "Time measure") + labs(y = "Frequency Totals") +
> theme(axis.text.x = element_text(angle = 45, hjust = 1))
> 
> 
> plottest2 <- ggplot(subset(TestData, category == "D" | category 
== "E"
> 
> | category == "F"), aes(as.factor(timeline), rollup, category))
> 
> plottest2 + geom_bar(stat="identity", aes(fill=category)) +
> labs(title="Test rollup data over time subsetted") +
>   labs(x = "Time measure") + labs(y = "Frequency Totals") +
> theme(axis.text.x = element_text(angle = 45, hjust = 1))
> 
Hi Kellyn,
A useful strategy is to generate a set of colors for all categories, and 
then apply the same subsetting criterion to both categories and colors 
for each plot:

testmat<-matrix(TestData$rollup,nrow=6,byrow=TRUE)
rownames(testmat)<-levels(TestData$category)
barplot(testmat,col=testcol)
rowsDE<-rownames(testmat) %in% c("D","E")
barplot(testmat[rowsDE,],col=testcol[rowsDE])

My apologies, but I couldn't quite work out where to put the color 
argument in ggplot2. However, this trick should work in ggplot2.

Jim


From ferra.xu at yahoo.com  Fri Jun 27 19:59:09 2014
From: ferra.xu at yahoo.com (Ferra Xu)
Date: Fri, 27 Jun 2014 10:59:09 -0700
Subject: [R] Generate data follows space-time clustered inhomogeneous
	Poisson point process in 3D space
Message-ID: <1403891949.82546.YahooMailNeo@web125106.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140627/e4f3c58c/attachment.pl>

From jdnewmil at dcn.davis.CA.us  Sat Jun 28 03:44:35 2014
From: jdnewmil at dcn.davis.CA.us (Jeff Newmiller)
Date: Fri, 27 Jun 2014 18:44:35 -0700
Subject: [R] Generate data follows space-time clustered
	inhomogeneous	Poisson point process in 3D space
In-Reply-To: <1403891949.82546.YahooMailNeo@web125106.mail.ne1.yahoo.com>
References: <1403891949.82546.YahooMailNeo@web125106.mail.ne1.yahoo.com>
Message-ID: <904751c1-8f4b-4d64-a42e-556758f6a572@email.android.com>

Please read the Posting Guide mentioned at the bottom of this out any other email on this list. You have repeatedly abused this list this week.

- posting in HTML
- cross-posting to multiple lists
- duplicate posts
- off-topic subjects

You have not been getting much response due to this behavior, so take a hint.

Re your question: The first step in simulating data is to understand the math of your model. All you have done is mention buzzwords so far, and teaching you the meaning of those words here would be off topic (I am not familiar with your particular combination of buzzwords anyway), so a site like StatsExchange seems more appropriate than this list. When you do understand what you are trying to accomplish, then reading the R help pages for a few functions like ?rnorm or ?rpois should be enough. If you make it far enough to have some reproducible code (which may not even be doing quite what you want yet) then we might be in a position discuss how to get from there to where you want to be.
---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                      Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
--------------------------------------------------------------------------- 
Sent from my phone. Please excuse my brevity.

On June 27, 2014 10:59:09 AM PDT, Ferra Xu <ferra.xu at yahoo.com> wrote:
>I'd like to know how can I generate a data set for space-time
>clustered?inhomogeneous Poisson processin a 3D space without having any
>previous data in R?
>Actually I need to generate points in a rectangle cube, and these
>points are not uniformly distributed in space (they show clusters).
>
>Thanks,
>	[[alternative HTML version deleted]]
>
>
>
>------------------------------------------------------------------------
>
>______________________________________________
>R-help at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From istazahn at gmail.com  Sat Jun 28 04:04:41 2014
From: istazahn at gmail.com (Ista Zahn)
Date: Fri, 27 Jun 2014 22:04:41 -0400
Subject: [R] [HELP] Setting plot colors such that category/color mapping
 persists across plots
In-Reply-To: <6158850.KWpsHlYOz0@localhost.localdomain>
References: <CAJvkv_6h-=nT-S1T83UG1YjwQYn_jtfnYD7cnTxKo8=016RuOg@mail.gmail.com>
	<6158850.KWpsHlYOz0@localhost.localdomain>
Message-ID: <CA+vqiLHy=pd5nn6NdwyA_cVKLs1JQDifkK9oCVR_YO8i_T_3Ww@mail.gmail.com>

In ggplot2 you can create a named vector of colors  and use
scale_fill_manual, like this:

TestData <- data.frame(rep(c("A","B","C","D","E","F"), each=10),
rep(1:10, 6), rnorm(6, 60, 10)*rep(1:10, 6))
names(TestData) <- c("category", "timeline", "rollup")

library(ggplot2)

catlevels <- levels(TestData$category)
plotcolors <- rainbow(length(catlevels))
names(plotcolors) <- catlevels

ggplot(TestData,
       aes(as.factor(timeline), rollup)) +
    geom_bar(stat="identity", aes(fill=category)) +
    scale_fill_manual(values = plotcolors)

dev.new()

ggplot(subset(TestData, category %in% c("D", "E", "F")),
       aes(as.factor(timeline), rollup)) +
       geom_bar(stat="identity", aes(fill=category)) +
       scale_fill_manual(values = plotcolors)

Best,
Ista

On Fri, Jun 27, 2014 at 8:07 PM, Jim Lemon <jim at bitwrit.com.au> wrote:
> On Thu, 26 Jun 2014 07:34:15 PM Kellyn Wolff wrote:
>> Hi all,
>>
>> I'm creating a set of stacked bar charts, where each bar is colored
> by
>> a category.  The problem I'm having is that a given category is being
>> represented by different colors across plots (category A might be
> red
>> in one plot and blue in another).  This is because the number of
>> categories in a given plot may change, thus getting a different color
>> assignment from R.
>>
>> My thought was that I could create a column with the hexadecimal
> value
>> for the color I want in each category, and then somehow specify in
> the
>> plot that I want it to choose the color specified in that column.
>> There may be a better way.
>>
>> I am using RStudio 0.98.945 on Windows 7 64 bit.  I've pasted some
>> example code below to illustrate the issue I'm having.  You will
>> notice that categories D, E and F in "plottest2" have different colors
>> than they do in "plottest".  I want colors for a given category to
>> persist across plots.
>>
>> TestData <- data.frame(rep(c("A","B","C","D","E","F"), each=10),
>> rep(1:10, 6), rnorm(6, 60, 10)*rep(1:10, 6))
>> names(TestData) <- c("category", "timeline", "rollup")
>>
>> library(ggplot2)
>> plottest <- ggplot(TestData, aes(as.factor(timeline), rollup,
> category))
>> plottest + geom_bar(stat="identity", aes(fill=category)) +
>> labs(title="Test rollup data over time") +
>>   labs(x = "Time measure") + labs(y = "Frequency Totals") +
>> theme(axis.text.x = element_text(angle = 45, hjust = 1))
>>
>>
>> plottest2 <- ggplot(subset(TestData, category == "D" | category
> == "E"
>>
>> | category == "F"), aes(as.factor(timeline), rollup, category))
>>
>> plottest2 + geom_bar(stat="identity", aes(fill=category)) +
>> labs(title="Test rollup data over time subsetted") +
>>   labs(x = "Time measure") + labs(y = "Frequency Totals") +
>> theme(axis.text.x = element_text(angle = 45, hjust = 1))
>>
> Hi Kellyn,
> A useful strategy is to generate a set of colors for all categories, and
> then apply the same subsetting criterion to both categories and colors
> for each plot:
>
> testmat<-matrix(TestData$rollup,nrow=6,byrow=TRUE)
> rownames(testmat)<-levels(TestData$category)
> barplot(testmat,col=testcol)
> rowsDE<-rownames(testmat) %in% c("D","E")
> barplot(testmat[rowsDE,],col=testcol[rowsDE])
>
> My apologies, but I couldn't quite work out where to put the color
> argument in ggplot2. However, this trick should work in ggplot2.
>
> Jim
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From arne.henningsen at gmail.com  Sat Jun 28 09:01:49 2014
From: arne.henningsen at gmail.com (Arne Henningsen)
Date: Sat, 28 Jun 2014 09:01:49 +0200
Subject: [R] [R-pkgs] sampleSelection 1.0 released
Message-ID: <CAMTWbJgf8Ts96RDca7PCP=+ZXaad=sf1WVk1AaAZRTmeAmEYVg@mail.gmail.com>

Dear All

The recently released version of the sampleSelection package [1] has
the version number 1.0, because we consider the package now to be
mature and feature-complete. Compared to version 0.6 of the
sampleSelection package (which is described in an article in the
Journal of Statistical Software [2]), the new version has, for
instance, following new features:

* estimation of binary-outcome selection models

* probit models, tobit-2 models, and binary-outcome selection models
can now be estimated with observation-specific weights

* predict() methods for calculating unconditional and conditional expectations

* improved/extended residuals() methods

* logLik() methods

* nobs() and nObs() methods

* default df.residual() method works

* removed the deprecated function tobit2()

Any kind of feedback is--as always--very welcome, preferable via R-Forge [3]!

Best regards,
Ott and Arne

[1] http://cran.r-project.org/package=sampleSelection

[2] http://www.jstatsoft.org/v27/i07/

[3] http://r-forge.r-project.org/projects/sampleselection/

-- 
Arne Henningsen
http://www.arne-henningsen.name

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From j.boutet at conservatoirepicardie.org  Sat Jun 28 12:06:18 2014
From: j.boutet at conservatoirepicardie.org (j.boutet at conservatoirepicardie.org)
Date: Sat, 28 Jun 2014 12:06:18 +0200 (CEST)
Subject: [R] =?utf-8?q?_R=C3=A9ponse_automatique?=
Message-ID: <201406281006.s5SA6IHx022763@albane10.nfrance.com>




Bonjour,

Je suis absent jusqu'au 4 ao?t prochain.

En cas d'urgence, merci de contacter Francis Meunier, directeur-adjoint :

f.meunier - at - conservatoirepicardie.org



J. Boutet



> From: r-help-request at r-project.org
> Subject: R-help Digest, Vol 136, Issue 28
> Date: Sat, 28 Jun 2014 12:00:09 +0200


From dwinsemius at comcast.net  Sat Jun 28 19:30:59 2014
From: dwinsemius at comcast.net (David Winsemius)
Date: Sat, 28 Jun 2014 10:30:59 -0700
Subject: [R] Data Frame Members
In-Reply-To: <53AD6955.9080108@comcast.net>
References: <53AD6955.9080108@comcast.net>
Message-ID: <5A3BC18B-6F7A-4F05-BB78-94588ABC1C09@comcast.net>


On Jun 27, 2014, at 5:53 AM, Robert Sherry wrote:

> Suppose that a data frame has been created by the user. Perhaps it  
> has been
> created using the library quantmod. Is there any command to find out  
> what
> the members of the data frame is?

Most of the objects created by quantmod functions are not dataframes  
but are rather elaborations of zoo, its, and xts objects.

-- 

David Winsemius, MD
Alameda, CA, USA


From emammendes at gmail.com  Sat Jun 28 20:08:23 2014
From: emammendes at gmail.com (Eduardo M. A. M. Mendes)
Date: Sat, 28 Jun 2014 15:08:23 -0300
Subject: [R] ggplot2 - change title and size of legends - time series.
In-Reply-To: <017477F8-6E37-4741-8C30-D95CEE5B686A@gmail.com>
References: <017477F8-6E37-4741-8C30-D95CEE5B686A@gmail.com>
Message-ID: <5319E36E-B60F-4712-BB6E-64778CFC4FFF@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140628/02430a4f/attachment.pl>

From magetade2003 at gmail.com  Sat Jun 28 21:23:42 2014
From: magetade2003 at gmail.com (Megersa)
Date: Sat, 28 Jun 2014 22:23:42 +0300
Subject: [R] quartz() and windows()
Message-ID: <000001cf9306$7b5d9090$7218b1b0$@com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140628/7898e4cb/attachment.pl>

From bretschr at xs4all.nl  Sun Jun 29 00:54:51 2014
From: bretschr at xs4all.nl (Franklin Bretschneider)
Date: Sun, 29 Jun 2014 00:54:51 +0200
Subject: [R] quartz() and windows()
Message-ID: <6C37EA5D-1395-4217-A3AC-163590F9D1A7@xs4all.nl>

Dear Megersa ,

> Which version of R  is used for quartz  function please?
> 

Quartz is the Apple Mac graphics window (device).
On Windows use ... windows()

Best wishes,



Franklin Bretschneider
Dept of Biology
Utrecht University
bretschr at xs4all.nl


From Achim.Zeileis at uibk.ac.at  Sun Jun 29 01:43:25 2014
From: Achim.Zeileis at uibk.ac.at (Achim Zeileis)
Date: Sun, 29 Jun 2014 01:43:25 +0200 (CEST)
Subject: [R] Marginal Effects for Hurdle (Two-part) models in R
In-Reply-To: <1403766301.67028.YahooMailNeo@web190002.mail.sg3.yahoo.com>
References: <1403766301.67028.YahooMailNeo@web190002.mail.sg3.yahoo.com>
Message-ID: <alpine.DEB.2.10.1406290136420.15675@paninaro.uibk.ac.at>

On Thu, 26 Jun 2014, Ashutosh Arun wrote:

> I am very new to R. I am using R package "pscl" for hurdle regression 
> (Binary with "cloglog" link and Poisson with "log" link). My problem is 
> to model road crash frequencies at given locations as a function of road 
> geometry and surface condition. All of my dependent variable are 
> covariates. I want to test their marginal effects on the response.

I'm not sure what exactly you want to test here. The hurdle model has the 
advantage that its two parts can be estimated (and hence also tested) 
separately. The summary() reports the usual marginal Wald tests.

If you want to test whether a certain variable has a significant effect on 
either one of the two parts, then you can fit the model with and without 
the variable and use waldtest() or lrtest() to assess the difference.

If you just want to assess changes in terms of probabilities or means, 
then you can set up auxiliary data sets that vary one variable but keep 
the others fixed and predict() the quantity you are interested in.

hth,
Z

> However, I am hard-pressed to find a way to do that. I just wish to ask 
> if there is a way at all to accomplish this in R? Or is there any other 
> better way to quantify the impact of individual variables on the 
> response for hurdle regression? Thanks in advance.


From Hui.Du at dataventures.com  Sun Jun 29 07:12:29 2014
From: Hui.Du at dataventures.com (Hui Du)
Date: Sun, 29 Jun 2014 05:12:29 +0000
Subject: [R] test if a url exists
Message-ID: <13A371591163EE48BD95F2D2B244AAF4310C2044@TWIX.dataventures.local>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140629/119894ee/attachment.pl>

From murdoch.duncan at gmail.com  Sun Jun 29 08:05:43 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sun, 29 Jun 2014 08:05:43 +0200
Subject: [R] test if a url exists
In-Reply-To: <13A371591163EE48BD95F2D2B244AAF4310C2044@TWIX.dataventures.local>
References: <13A371591163EE48BD95F2D2B244AAF4310C2044@TWIX.dataventures.local>
Message-ID: <53AFACB7.1090005@gmail.com>

On 29/06/2014, 7:12 AM, Hui Du wrote:
> Hi all,
> 
> I need to test if a url exists. I used url.exists() in RCurl package
> 
> library(RCurl)
> 
> however the test result is kind of weird. For example,
> 
>> url.exists("http://www.amazon.com")
> [1] FALSE
> 
> although www.amazon.com<http://www.amazon.com> is a valid url. Does anybody know how to use that function correctly or the other way to test url existence?

You can use the .header = TRUE option to that call to see the error 405
that it gives.

Duncan Murdoch


From j.boutet at conservatoirepicardie.org  Sun Jun 29 12:03:28 2014
From: j.boutet at conservatoirepicardie.org (j.boutet at conservatoirepicardie.org)
Date: Sun, 29 Jun 2014 12:03:28 +0200 (CEST)
Subject: [R] =?utf-8?q?_R=C3=A9ponse_automatique?=
Message-ID: <201406291003.s5TA3SfL051736@albane10.nfrance.com>




Bonjour,

Je suis absent jusqu'au 4 ao?t prochain.

En cas d'urgence, merci de contacter Francis Meunier, directeur-adjoint :

f.meunier - at - conservatoirepicardie.org



J. Boutet



> From: r-help-request at r-project.org
> Subject: R-help Digest, Vol 136, Issue 29
> Date: Sun, 29 Jun 2014 12:00:06 +0200


From nadavsteindler at gmail.com  Sun Jun 29 13:53:12 2014
From: nadavsteindler at gmail.com (Nadav Steindler)
Date: Sun, 29 Jun 2014 14:53:12 +0300
Subject: [R] Monotonic Increasing
Message-ID: <CALg-5Q5T0PBxYJayKrWzmPWEsNqj-AhOUCT8p4aA4S6JYDgFaA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140629/97ab03f8/attachment.pl>

From wattele at hotmail.de  Sun Jun 29 13:12:59 2014
From: wattele at hotmail.de (wat tele)
Date: Sun, 29 Jun 2014 11:12:59 +0000
Subject: [R] Linear Regression Warning after plot: NaNs produced in
Message-ID: <COL128-W92884DCBBE80DF0C61C6A1D5050@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140629/542bd9c2/attachment.pl>

From b.h.willis at bham.ac.uk  Sun Jun 29 14:46:44 2014
From: b.h.willis at bham.ac.uk (Brian Willis)
Date: Sun, 29 Jun 2014 05:46:44 -0700 (PDT)
Subject: [R] Dataframes and text identifier columns
Message-ID: <1404046004960-4693184.post@n4.nabble.com>

I am trying to incrementally add rows to an empty data frame. The data has 7
columns, the last 6 are numeric.

For the first columns I would like to include a text identifier, called
?Case? like Andrew, Burt, Charlie etc. that is also output to a data frame ?
this is where I am having the problem

The identifiers are being input from file which automatically assigns them
to a data frame
Code:

Inp_dat<- read.csv("/File/Input data.csv")

out_put<-data.frame(Case=character(), StdL=numeric(), StdPP=numeric(),
StdSE=numeric(), L=numeric(), MRPP=numeric(), MRSE=numeric(),
stringsAsFactors=FALSE)

for(i in 1:4)
{
if (i==1) b<-Andrew
if (i==2) b<-Burt
if (i==3) b<-Charlie
if (i==4) b<-Dave

pr <- Inp_dat$p[i]
SE_pr <- Inp_dat$SE[i]
r<- Inp_dat$r[i]
n<- Inp_dat$n[i]
Case<- levels(Inp_dat$Case)[i])
?

out_put[i,]<-data.frame(Case, stdL, stdPP, stdSE, L, PP, PP_SE)

}
out_put

  Case     StdL          StdPP           StdSE           L               
MRPP            MRSE
1    1  19.466823   0.16432300   0.03137456   26.002294   0.2080145  
0.03804692
2    1   2.334130    0.22566939   0.08962662    5.095703    0.3888451  
0.08399101
3    1   2.588678    0.05502765   0.00454159   42.058326   0.4861511  
0.02128030
4    1   7.857898    0.18457822   0.04372297    4.705487    0.1193687  
0.01921609


Unfortunately the Case column loses the labels Andrew, Burt ?

I?ve tried always to keep these, but are clearly doing something wrong. Can
anyone help?




--
View this message in context: http://r.789695.n4.nabble.com/Dataframes-and-text-identifier-columns-tp4693184.html
Sent from the R help mailing list archive at Nabble.com.


From dwinsemius at comcast.net  Sun Jun 29 18:28:04 2014
From: dwinsemius at comcast.net (David Winsemius)
Date: Sun, 29 Jun 2014 09:28:04 -0700
Subject: [R] Dataframes and text identifier columns
In-Reply-To: <1404046004960-4693184.post@n4.nabble.com>
References: <1404046004960-4693184.post@n4.nabble.com>
Message-ID: <6B553DD7-B319-4389-BD86-674D3C0A34C1@comcast.net>


On Jun 29, 2014, at 5:46 AM, Brian Willis wrote:

> I am trying to incrementally add rows to an empty data frame. The  
> data has 7
> columns, the last 6 are numeric.
>
> For the first columns I would like to include a text identifier,  
> called
> ?Case? like Andrew, Burt, Charlie etc. that is also output to a data  
> frame ?
> this is where I am having the problem
>
> The identifiers are being input from file which automatically  
> assigns them
> to a data frame
> Code:
>
> Inp_dat<- read.csv("/File/Input data.csv")
>
> out_put<-data.frame(Case=character(), StdL=numeric(), StdPP=numeric(),
> StdSE=numeric(), L=numeric(), MRPP=numeric(), MRSE=numeric(),
> stringsAsFactors=FALSE)
>
> for(i in 1:4)
> {
> if (i==1) b<-Andrew   # these assignments do not appear to ever get  
> used.
> if (i==2) b<-Burt
> if (i==3) b<-Charlie
> if (i==4) b<-Dave
>
> pr <- Inp_dat$p[i]
> SE_pr <- Inp_dat$SE[i]
> r<- Inp_dat$r[i]
> n<- Inp_dat$n[i]
> Case<- levels(Inp_dat$Case)[i])

# Since the question involves failure of this step, there woudn't  
appear to be much we could say unless you provided teh output of  
levels(Inp_dat$Case).
>
> ?
>
> out_put[i,]<-data.frame(Case, stdL, stdPP, stdSE, L, PP, PP_SE)

The values stdL through PP_SE seem to come from someplace else.
>
> }
> out_put
>
>  Case     StdL          StdPP           StdSE           L
> MRPP            MRSE
> 1    1  19.466823   0.16432300   0.03137456   26.002294   0.2080145
> 0.03804692
> 2    1   2.334130    0.22566939   0.08962662    5.095703    0.3888451
> 0.08399101
> 3    1   2.588678    0.05502765   0.00454159   42.058326   0.4861511
> 0.02128030
> 4    1   7.857898    0.18457822   0.04372297    4.705487    0.1193687
> 0.01921609
>
>
> Unfortunately the Case column loses the labels Andrew, Burt ?

If you were thinking that the values Andrew and Burt would come from  
that loop then it's unclear whay tha twould be so since the value of  
"b" is never used after it is defined.
>
> I?ve tried always to keep these, but are clearly doing something  
> wrong. Can
> anyone help?



David Winsemius, MD
Alameda, CA, USA


From wdunlap at tibco.com  Sun Jun 29 18:43:37 2014
From: wdunlap at tibco.com (William Dunlap)
Date: Sun, 29 Jun 2014 09:43:37 -0700
Subject: [R] Linear Regression Warning after plot: NaNs produced in
In-Reply-To: <COL128-W92884DCBBE80DF0C61C6A1D5050@phx.gbl>
References: <COL128-W92884DCBBE80DF0C61C6A1D5050@phx.gbl>
Message-ID: <CAF8bMcYormAbsVxd7aMjyXX+9sVEdopUC-PbB-2JhkJPdkQp9g@mail.gmail.com>

One way to see where the first warning comes from is to turn warnings
into errors with options(warn=2) and when the error happens call
traceback().
Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Sun, Jun 29, 2014 at 4:12 AM, wat tele <wattele at hotmail.de> wrote:
>
>
>
> Hello,
>
> I'm a R beginner and I want to make a Multiple Regression about birds. My data is stord in a .csv file.
> I tried to do this with the following code:
>
> reg.data <- read.table(file.choose(),header=T, sep=";",dec=",")
> attach(reg.data)
> names(reg.data)
> model <- lm(Flights ~ Age + Gender + weight +  CountryGermany + CountryItaly + CountrySpain + CountryAustria + CountrySwiss + CountryGB + CountryFrance + CountryIreland + CountryNL + CountryBelgium + CountrySweden + CountryNorway + CountryUSA + CountryBrasil)
> plot(model)
>
> After the function plot(model), I get the two Warnings:
> 1: NaNs produced in: In sqrt(crit * p * (1 - hh)/hh)
> 2: NaNs produced in: In sqrt(crit * p * (1 - hh)/hh)
>
> Can anybody tell me:
>  - How can I interpret this warnings?
>  - How I can find out at which point this warning apears?
>  - How I can find out which column is responsible for the error?
>  - And if there is a possiblity to avoid this warnings?
>
> Thanks
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From rmh at temple.edu  Sun Jun 29 19:34:08 2014
From: rmh at temple.edu (Richard M. Heiberger)
Date: Sun, 29 Jun 2014 13:34:08 -0400
Subject: [R] Dataframes and text identifier columns
In-Reply-To: <1404046004960-4693184.post@n4.nabble.com>
References: <1404046004960-4693184.post@n4.nabble.com>
Message-ID: <CAGx1TMD3GUXdVVT1g6OJ59636wATangyow_Wy8iwGmyhZ4GkJw@mail.gmail.com>

Inp_dat<- read.csv("/File/Input data.csv")
out_put[i,]<-data.frame(Case, stdL, stdPP, stdSE, L, PP, PP_SE)

These two statements look like the source of the problem.
Add the optional argument
     stringsAsFactors=FALSE
to both.
Rich

On Sun, Jun 29, 2014 at 8:46 AM, Brian Willis <b.h.willis at bham.ac.uk> wrote:
> I am trying to incrementally add rows to an empty data frame. The data has 7
> columns, the last 6 are numeric.
>
> For the first columns I would like to include a text identifier, called
> ?Case? like Andrew, Burt, Charlie etc. that is also output to a data frame ?
> this is where I am having the problem
>
> The identifiers are being input from file which automatically assigns them
> to a data frame
> Code:
>
> Inp_dat<- read.csv("/File/Input data.csv")
>
> out_put<-data.frame(Case=character(), StdL=numeric(), StdPP=numeric(),
> StdSE=numeric(), L=numeric(), MRPP=numeric(), MRSE=numeric(),
> stringsAsFactors=FALSE)
>
> for(i in 1:4)
> {
> if (i==1) b<-Andrew
> if (i==2) b<-Burt
> if (i==3) b<-Charlie
> if (i==4) b<-Dave
>
> pr <- Inp_dat$p[i]
> SE_pr <- Inp_dat$SE[i]
> r<- Inp_dat$r[i]
> n<- Inp_dat$n[i]
> Case<- levels(Inp_dat$Case)[i])
> ?
>
> out_put[i,]<-data.frame(Case, stdL, stdPP, stdSE, L, PP, PP_SE)
>
> }
> out_put
>
>   Case     StdL          StdPP           StdSE           L
> MRPP            MRSE
> 1    1  19.466823   0.16432300   0.03137456   26.002294   0.2080145
> 0.03804692
> 2    1   2.334130    0.22566939   0.08962662    5.095703    0.3888451
> 0.08399101
> 3    1   2.588678    0.05502765   0.00454159   42.058326   0.4861511
> 0.02128030
> 4    1   7.857898    0.18457822   0.04372297    4.705487    0.1193687
> 0.01921609
>
>
> Unfortunately the Case column loses the labels Andrew, Burt ?
>
> I?ve tried always to keep these, but are clearly doing something wrong. Can
> anyone help?
>
>
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/Dataframes-and-text-identifier-columns-tp4693184.html
> Sent from the R help mailing list archive at Nabble.com.
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From rmh at temple.edu  Sun Jun 29 21:19:24 2014
From: rmh at temple.edu (Richard M. Heiberger)
Date: Sun, 29 Jun 2014 15:19:24 -0400
Subject: [R] Dataframes and text identifier columns
In-Reply-To: <BD3EE1322A8A7245893331EBBC6ADC84021CA1@EX3.adf.bham.ac.uk>
References: <1404046004960-4693184.post@n4.nabble.com>
	<CAGx1TMD3GUXdVVT1g6OJ59636wATangyow_Wy8iwGmyhZ4GkJw@mail.gmail.com>
	<BD3EE1322A8A7245893331EBBC6ADC84021CA1@EX3.adf.bham.ac.uk>
Message-ID: <CAGx1TMDBDUZBS3+X7tnBAiWbMsKMZuakimz1DUXyDdyX3q=YOg@mail.gmail.com>

please stay on list.  I am returning this to the list.

David's comment that b is never used might be relevant.
I think the next step is for you to post a small dataset that causes the problem
dput(head(Inp_dat))
might be enough.

Rich

On Sun, Jun 29, 2014 at 3:11 PM, Brian Willis <b.h.willis at bham.ac.uk> wrote:
> Hi
>
> This does not work either. Comes up with same result
>
> Regards
>
> Brian
>
> ******************************
>
> Dr Brian H Willis
> NIHR Clinical Lecturer
> Primary Care Clinical Sciences
> University of Birmingham
> Edgbaston
> Birmingham. B15 2TT
> tel +44 121 414 7979
> b.h.willis at bham.ac.uk
> http://www.birmingham.ac.uk/brian-willis
>
> ________________________________________
> From: Richard M. Heiberger [rmh at temple.edu]
> Sent: 29 June 2014 18:34
> To: Brian Willis
> Cc: r-help
> Subject: Re: [R] Dataframes and text identifier columns
>
> Inp_dat<- read.csv("/File/Input data.csv")
> out_put[i,]<-data.frame(Case, stdL, stdPP, stdSE, L, PP, PP_SE)
>
> These two statements look like the source of the problem.
> Add the optional argument
>      stringsAsFactors=FALSE
> to both.
> Rich
>
> On Sun, Jun 29, 2014 at 8:46 AM, Brian Willis <b.h.willis at bham.ac.uk> wrote:
>> I am trying to incrementally add rows to an empty data frame. The data has 7
>> columns, the last 6 are numeric.
>>
>> For the first columns I would like to include a text identifier, called
>> ?Case? like Andrew, Burt, Charlie etc. that is also output to a data frame ?
>> this is where I am having the problem
>>
>> The identifiers are being input from file which automatically assigns them
>> to a data frame
>> Code:
>>
>> Inp_dat<- read.csv("/File/Input data.csv")
>>
>> out_put<-data.frame(Case=character(), StdL=numeric(), StdPP=numeric(),
>> StdSE=numeric(), L=numeric(), MRPP=numeric(), MRSE=numeric(),
>> stringsAsFactors=FALSE)
>>
>> for(i in 1:4)
>> {
>> if (i==1) b<-Andrew
>> if (i==2) b<-Burt
>> if (i==3) b<-Charlie
>> if (i==4) b<-Dave
>>
>> pr <- Inp_dat$p[i]
>> SE_pr <- Inp_dat$SE[i]
>> r<- Inp_dat$r[i]
>> n<- Inp_dat$n[i]
>> Case<- levels(Inp_dat$Case)[i])
>> ?
>>
>> out_put[i,]<-data.frame(Case, stdL, stdPP, stdSE, L, PP, PP_SE)
>>
>> }
>> out_put
>>
>>   Case     StdL          StdPP           StdSE           L
>> MRPP            MRSE
>> 1    1  19.466823   0.16432300   0.03137456   26.002294   0.2080145
>> 0.03804692
>> 2    1   2.334130    0.22566939   0.08962662    5.095703    0.3888451
>> 0.08399101
>> 3    1   2.588678    0.05502765   0.00454159   42.058326   0.4861511
>> 0.02128030
>> 4    1   7.857898    0.18457822   0.04372297    4.705487    0.1193687
>> 0.01921609
>>
>>
>> Unfortunately the Case column loses the labels Andrew, Burt ?
>>
>> I?ve tried always to keep these, but are clearly doing something wrong. Can
>> anyone help?
>>
>>
>>
>>
>> --
>> View this message in context: http://r.789695.n4.nabble.com/Dataframes-and-text-identifier-columns-tp4693184.html
>> Sent from the R help mailing list archive at Nabble.com.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From nospam at lisse.NA  Sun Jun 29 18:24:39 2014
From: nospam at lisse.NA (Dr Eberhard Lisse)
Date: Sun, 29 Jun 2014 18:24:39 +0200
Subject: [R] merge question
Message-ID: <53B03DC7.4080800@lisse.NA>

I have two data frames like so

> qpiso
    iso requests
1    A1       20
2    A2      199
3    AD        5
4    AE      176
...
189  ZW       82

> qplegit
    iso requests
1    A2       36
2    AE        4
3    AM        2
4    AO        1
...
100  ZW        3


I want to create another dataframe qpspam which contains all pairs
from pqiso with the values for requests of qplegit being subtracted
from those which exist in qpiso,

ie
    iso requests
1    A1       20
2    A2      163
3    AD        5
4    AE      172
...
189  ZW       79

but don't know how to do this, and google isn't too helpful.

As usual, a solution is preferred, but a pointer to where I can
read this up is equally appreciated :-)-O

el


From nickeubank at stanford.edu  Sun Jun 29 20:55:56 2014
From: nickeubank at stanford.edu (Nick Eubank)
Date: Sun, 29 Jun 2014 20:55:56 +0200
Subject: [R] RSQLite -- Stopping / Aborting Queries and Data Integrity
Message-ID: <CAFWQgOkgjxqHT6v+he-L5JBy-ECvZOaSpv9vj3-PdCga311ZCg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140629/ab9cf33d/attachment.pl>

From bravo0123 at me.com  Sun Jun 29 15:41:55 2014
From: bravo0123 at me.com (dhs)
Date: Sun, 29 Jun 2014 09:41:55 -0400
Subject: [R] Analysis using repeated measure mixed effect anova
Message-ID: <76E39691-7BED-4CEB-83AC-1CDF8C6D643C@me.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140629/89f2808c/attachment.pl>

From arrgomes at gmail.com  Sun Jun 29 17:34:47 2014
From: arrgomes at gmail.com (Ana Gomes)
Date: Sun, 29 Jun 2014 17:34:47 +0200
Subject: [R] R Studio Not Working Windows 8.1
Message-ID: <CAA_SVM5004oMjd1=SNme+FkLZeJNusi8OkUZskHapwtz0syXJQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140629/7c88449b/attachment.pl>

From jdnewmil at dcn.davis.CA.us  Sun Jun 29 22:00:42 2014
From: jdnewmil at dcn.davis.CA.us (Jeff Newmiller)
Date: Sun, 29 Jun 2014 13:00:42 -0700
Subject: [R] merge question
In-Reply-To: <53B03DC7.4080800@lisse.NA>
References: <53B03DC7.4080800@lisse.NA>
Message-ID: <d36bd8e5-8aec-40d2-a37f-7c96ab2e646a@email.android.com>

If you really prefer solution code, then provide reproducible example code as the footer requests.

Use ?merge with the all.x=TRUE parameter, and then perform your calculations on the resulting combined data frame, using ?ifelse and ?is.na as needed.
---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                      Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
--------------------------------------------------------------------------- 
Sent from my phone. Please excuse my brevity.

On June 29, 2014 9:24:39 AM PDT, Dr Eberhard Lisse <nospam at lisse.NA> wrote:
>I have two data frames like so
>
>> qpiso
>    iso requests
>1    A1       20
>2    A2      199
>3    AD        5
>4    AE      176
>...
>189  ZW       82
>
>> qplegit
>    iso requests
>1    A2       36
>2    AE        4
>3    AM        2
>4    AO        1
>...
>100  ZW        3
>
>
>I want to create another dataframe qpspam which contains all pairs
>from pqiso with the values for requests of qplegit being subtracted
>from those which exist in qpiso,
>
>ie
>    iso requests
>1    A1       20
>2    A2      163
>3    AD        5
>4    AE      172
>...
>189  ZW       79
>
>but don't know how to do this, and google isn't too helpful.
>
>As usual, a solution is preferred, but a pointer to where I can
>read this up is equally appreciated :-)-O
>
>el
>
>______________________________________________
>R-help at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From jdnewmil at dcn.davis.CA.us  Sun Jun 29 22:04:15 2014
From: jdnewmil at dcn.davis.CA.us (Jeff Newmiller)
Date: Sun, 29 Jun 2014 13:04:15 -0700
Subject: [R] R Studio Not Working Windows 8.1
In-Reply-To: <CAA_SVM5004oMjd1=SNme+FkLZeJNusi8OkUZskHapwtz0syXJQ@mail.gmail.com>
References: <CAA_SVM5004oMjd1=SNme+FkLZeJNusi8OkUZskHapwtz0syXJQ@mail.gmail.com>
Message-ID: <7ec441b4-6248-4206-9664-5af3bba1790b@email.android.com>

Wrong forum. RStudio has its own community support forum at their website.

---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                      Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
--------------------------------------------------------------------------- 
Sent from my phone. Please excuse my brevity.

On June 29, 2014 8:34:47 AM PDT, Ana Gomes <arrgomes at gmail.com> wrote:
>Dear all,
>
>I am a user of R Studio, which I appreciate very much.
>Recently I have changed my pc and I am having some problems to use R
>Studio.
>
>I have finally manage to make RStudio work today.
>However, to do that I am opening it with R x32 as a default. This is a
>bit
>strange for me because I have a OS x64.
>When using R x64 as a default nothing happens. I have a blank window.
>Do you have any idea why is this happening? I am using:
>
>Windows 8.1.
>R version: 3.1.0 (2014-04-10)
>R Studio version: RStudio-0.98.953
>
>I have cheked with an old version of R and R Studio but it is the same.
>
>Best,
>
>Ana
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From wdunlap at tibco.com  Sun Jun 29 22:16:26 2014
From: wdunlap at tibco.com (William Dunlap)
Date: Sun, 29 Jun 2014 13:16:26 -0700
Subject: [R] regular expression help
In-Reply-To: <COL129-W288460DAAE75B85CB055C8CB1B0@phx.gbl>
References: <COL129-W77308B84F4C44D6A25457ACB1B0@phx.gbl>
	<002501cf91a3$0d311150$279333f0$@bigpond.com>
	<COL129-W955C4F549F251ECEC73BD1CB1B0@phx.gbl>
	<A0BDC150-62E3-4E53-9C24-693DA5C88E56@comcast.net>
	<CAF8bMcbyU4Ew-E0nJ2P1VtaCZELQV50j73JvFWtzeSn8uS66pg@mail.gmail.com>
	<COL129-W288460DAAE75B85CB055C8CB1B0@phx.gbl>
Message-ID: <CAF8bMcYfSV_+fgwHEAsYsOPVVrET-c2Z3AOac2kyDtEao65A1g@mail.gmail.com>

> what's the difference between [:space:]+ and[[:space:]]+ ?

The pattern '[:space:]' matches any of ':', 's', 'p', 'a', 'c', and
'e' (the second colon is superfluous).  I.e., it has no magic meaning.
Inside of [] it does have a special meaning.

The pattern '[[:space:]]' matches a space, a newline, and other
whitespace characters.  The pattern '[a-c[:space:]z[:digit:]]' matches
'a', 'b', 'c', any decimal digit, and any whitespace character.
Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Fri, Jun 27, 2014 at 6:27 AM, C Lin <baccts at hotmail.com> wrote:
> Thank you all for your help.
>
> Bill, thanks for making it compact and I did mean any amount of whitespace.
>
> To break it down, so I know why this pattern work:
> The first parenthesis means that before AARSD1 it can be
> ^: begins with nothing
> |: or
> //: double slash or
> [[:space:]]+: one or more whitespace character
>
> For the second parenthesis:
> $: ending with nothing
>
> Do this sound correct?
>
> I missed the fact that I need the ^ and $ and I always do [:space:]+ instead of [[:space:]]+
> what's the difference between [:space:]+ and[[:space:]]+ ?
>
> Thanks so much!
> Lin
>
> ----------------------------------------
>> From: wdunlap at tibco.com
>> Date: Fri, 27 Jun 2014 02:35:54 -0700
>> Subject: Re: [R] regular expression help
>> To: dwinsemius at comcast.net
>> CC: baccts at hotmail.com; r-help at r-project.org
>>
>> You can use parentheses to factor out the common string in David's
>> pattern, as in
>> grep(value=TRUE, "(^|//|[[:space:]]+)AARSD1($|//|[[:space:]]+)", test)
>>
>> (By 'whitespace' I could not tell if you meant any amount of
>> whitespace or a single
>> whitespace character. I use '+' to match one or more whitespace characters.)
>>
>> Bill Dunlap
>> TIBCO Software
>> wdunlap tibco.com
>>
>>
>> On Thu, Jun 26, 2014 at 10:12 PM, David Winsemius
>> <dwinsemius at comcast.net> wrote:
>>>
>>> On Jun 26, 2014, at 6:11 PM, C Lin wrote:
>>>
>>>> Hi Duncan,
>>>>
>>>> Thanks for trying to help. Sorry for not being clear.
>>>> The string I'd like to get is 'AARSD1'
>>>> It can be followed or preceded by white space or // or nothing
>>>>
>>>> so, from test <- c('AARSD11','AARSD1-','AARSD1//','AARSD1 //','//AARSD1','AARSD1');
>>>>
>>>> I want to match only 'AARSD1//','AARSD1 //','//AARSD1','AARSD1'
>>>
>>> Perhaps you want jsut
>>>
>>> grepl('^AARSD1//$|^AARSD1 //$|^//AARSD1$|^AARSD1', test)
>>>
>>>> grepl('^AARSD1//$|^AARSD1 //$|^//AARSD1$|^AARSD1$', test)
>>> [1] FALSE FALSE TRUE TRUE TRUE TRUE
>>>
>>> --
>>> David.
>>>
>>>>
>>>
>>>> Thanks,
>>>> Lin
>>>>
>>>> ----------------------------------------
>>>>> From: dulcalma at bigpond.com
>>>>> To: baccts at hotmail.com; r-help at r-project.org
>>>>> Subject: RE: [R] regular expression help
>>>>> Date: Fri, 27 Jun 2014 10:59:29 +1000
>>>>>
>>>>> Hi
>>>>>
>>>>> You only have a vector of length 5 and I am not quite sure of the string you
>>>>> are testing
>>>>> so try this
>>>>>
>>>>> grep('[/]*\\<AARSD1\\>[/]*',test)
>>>>>
>>>>> Duncan
>>>>>
>>>>> Duncan Mackay
>>>>> Department of Agronomy and Soil Science
>>>>> University of New England
>>>>> Armidale NSW 2351
>>>>> Email: home: mackay at northnet.com.au
>>>>>
>>>>> -----Original Message-----
>>>>> From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On
>>>>> Behalf Of C Lin
>>>>> Sent: Friday, 27 June 2014 10:05
>>>>> To: r-help at r-project.org
>>>>> Subject: [R] regular expression help
>>>>>
>>>>> Dear R users,
>>>>>
>>>>> I need to match a string. It can be followed or preceded by whitespace or //
>>>>> or nothing.
>>>>> How do I code it in R?
>>>>>
>>>>> For example:
>>>>> test <- c('AARSD11','AARSD1-','AARSD1//','AARSD1 //','//AARSD1');
>>>>> grep('AARSD1(\\s*//*)',test);
>>>>>
>>>>> should return 3,4,5 and 6.
>>>>>
>>>>
>>>
>>>
>>> David Winsemius
>>> Alameda, CA, USA
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>


From michael.gang.peng at gmail.com  Sun Jun 29 22:32:39 2014
From: michael.gang.peng at gmail.com (Michael Peng)
Date: Sun, 29 Jun 2014 15:32:39 -0500
Subject: [R] merge question
In-Reply-To: <53B03DC7.4080800@lisse.NA>
References: <53B03DC7.4080800@lisse.NA>
Message-ID: <CAMjJGR37UZk9WCQy2TByOTi96ZqgjOP1SKsd08959kw4e1RPDA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140629/f18f44c7/attachment.pl>

From michael.gang.peng at gmail.com  Sun Jun 29 22:39:02 2014
From: michael.gang.peng at gmail.com (Michael Peng)
Date: Sun, 29 Jun 2014 15:39:02 -0500
Subject: [R] Analysis using repeated measure mixed effect anova
In-Reply-To: <76E39691-7BED-4CEB-83AC-1CDF8C6D643C@me.com>
References: <76E39691-7BED-4CEB-83AC-1CDF8C6D643C@me.com>
Message-ID: <CAMjJGR15VK+3tobOJyibHskzKoykHDdsc2_uaR2g7r5xxfCrQw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140629/6b6be9e8/attachment.pl>

From frainj at gmail.com  Sun Jun 29 23:30:06 2014
From: frainj at gmail.com (John C Frain)
Date: Sun, 29 Jun 2014 22:30:06 +0100
Subject: [R] Fwd:  R Studio Not Working Windows 8.1
In-Reply-To: <CAHrK514UyH0xe26QwR1uQYB8vwiz93kjMtjXt3AmOy8MaaK3sA@mail.gmail.com>
References: <CAA_SVM5004oMjd1=SNme+FkLZeJNusi8OkUZskHapwtz0syXJQ@mail.gmail.com>
	<CAHrK514UyH0xe26QwR1uQYB8vwiz93kjMtjXt3AmOy8MaaK3sA@mail.gmail.com>
Message-ID: <CAHrK514Z4rsq6d2vrGy2KfNfczuaq_Yr4QrpXCpiKvMq47gihg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140629/2167db0f/attachment.pl>

From rsherry8 at comcast.net  Mon Jun 30 00:22:17 2014
From: rsherry8 at comcast.net (Robert Sherry)
Date: Sun, 29 Jun 2014 18:22:17 -0400
Subject: [R] A Question about read.table and Data Frames in R
Message-ID: <53B09199.5000500@comcast.net>

I created the following file:

symbol,shares
XOM,1000
APA,400
CVX,200

I then read the file in R using the command:
	stockList=read.table("/NotesOnR/stockList", header = T, sep=",")

I would then expect the following expression to evaluate to the simple
string APA:
	stockList$symbol[2]
However when I type that in on the command line, I get:
[1] APA
Levels: APA CVX XOM

I would also expect to be able to print out the table by using the command:
	for( i in 1:3 ) {
		print( stockList$symbol[i] )
		print ( stockList$shares[i] )
	}

However, as part of the output I get:
	Levels: APA CVX XOM
I do not understand what is going on. Also, when I try passing the
expression stockList$symbol to a standard function in R, it does not work.

I think that I am missing something here but I am not sure what I am
missing. Should I be writing code like:
	for  ( i in stockList$smybol )
However,  given the symbol, I am not sure how to get the share count that is
in the same row.

I thank the group in advance for their responses.

Bob


From el at lisse.NA  Mon Jun 30 00:32:50 2014
From: el at lisse.NA (Dr Eberhard W Lisse)
Date: Mon, 30 Jun 2014 00:32:50 +0200
Subject: [R] merge question
In-Reply-To: <CAMjJGR37UZk9WCQy2TByOTi96ZqgjOP1SKsd08959kw4e1RPDA@mail.gmail.com>
References: <53B03DC7.4080800@lisse.NA>
	<CAMjJGR37UZk9WCQy2TByOTi96ZqgjOP1SKsd08959kw4e1RPDA@mail.gmail.com>
Message-ID: <53B09412.5050803@lisse.NA>

Thanks,

I then set NA to 0, and can do the sutraction,

great.

el


On 2014-06-29, 22:32 , Michael Peng wrote:
> you can get a new data frame by
> merge(qpiso, qplegit, all.x = TRUE, all.y = TRUE, by = "iso" )
> Take the subtraction on the new data frame.
> 
> 
> 
> 
> 2014-06-29 11:24 GMT-05:00 Dr Eberhard Lisse <nospam at lisse.na
> <mailto:nospam at lisse.na>>:
> 
>     I have two data frames like so
> 
>     > qpiso
>         iso requests
>     1    A1       20
>     2    A2      199
>     3    AD        5
>     4    AE      176
>     ...
>     189  ZW       82
> 
>     > qplegit
>         iso requests
>     1    A2       36
>     2    AE        4
>     3    AM        2
>     4    AO        1
>     ...
>     100  ZW        3
> 
> 
>     I want to create another dataframe qpspam which contains all pairs
>     from pqiso with the values for requests of qplegit being subtracted
>     from those which exist in qpiso,
> 
>     ie
>         iso requests
>     1    A1       20
>     2    A2      163
>     3    AD        5
>     4    AE      172
>     ...
>     189  ZW       79
> 
>     but don't know how to do this, and google isn't too helpful.
> 
>     As usual, a solution is preferred, but a pointer to where I can
>     read this up is equally appreciated :-)-O
> 
>     el
> 
>     ______________________________________________
>     R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-help
>     PLEASE do read the posting guide
>     http://www.R-project.org/posting-guide.html
>     and provide commented, minimal, self-contained, reproducible code.
> 
> 


From dwinsemius at comcast.net  Mon Jun 30 00:57:57 2014
From: dwinsemius at comcast.net (David Winsemius)
Date: Sun, 29 Jun 2014 15:57:57 -0700
Subject: [R] A Question about read.table and Data Frames in R
In-Reply-To: <53B09199.5000500@comcast.net>
References: <53B09199.5000500@comcast.net>
Message-ID: <DD6BC071-B7B2-44E2-966D-76229B62F45E@comcast.net>


On Jun 29, 2014, at 3:22 PM, Robert Sherry wrote:

> I created the following file:
>
> symbol,shares
> XOM,1000
> APA,400
> CVX,200
>
> I then read the file in R using the command:
> 	stockList=read.table("/NotesOnR/stockList", header = T, sep=",")
>
> I would then expect the following expression to evaluate to the simple
> string APA:
> 	stockList$symbol[2]
> However when I type that in on the command line, I get:
> [1] APA
> Levels: APA CVX XOM
>
> I would also expect to be able to print out the table by using the  
> command:
> 	for( i in 1:3 ) {
> 		print( stockList$symbol[i] )
> 		print ( stockList$shares[i] )
> 	}
>
> However, as part of the output I get:
> 	Levels: APA CVX XOM
> I do not understand what is going on. Also, when I try passing the
> expression stockList$symbol to a standard function in R, it does not  
> work.
>
> I think that I am missing something here but I am not sure what I am
> missing.

You are missing the fact that a factor variable was created. If you  
had added stringsAsFactors=FALSE to your read.table code, you would  
ahve gotten what you expected.


> Should I be writing code like:
> 	for  ( i in stockList$smybol )
> However,  given the symbol, I am not sure how to get the share count  
> that is
> in the same row.
>
> I thank the group in advance for their responses.
>
> Bob
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

David Winsemius, MD
Alameda, CA, USA


From r.turner at auckland.ac.nz  Mon Jun 30 00:48:21 2014
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Mon, 30 Jun 2014 10:48:21 +1200
Subject: [R] merge question
In-Reply-To: <53B09412.5050803@lisse.NA>
References: <53B03DC7.4080800@lisse.NA>
	<CAMjJGR37UZk9WCQy2TByOTi96ZqgjOP1SKsd08959kw4e1RPDA@mail.gmail.com>
	<53B09412.5050803@lisse.NA>
Message-ID: <53B097B5.2090204@auckland.ac.nz>


On 30/06/14 10:32, Dr Eberhard W Lisse wrote:

> Thanks,
>
> I then set NA to 0, and can do the sutraction,
>
> great.

Not so great.  I haven't gone through the issues underlying this post, 
but replacing NA by 0 will almost surely yield nonsense.  "Missing" is 
***not*** the same thing as "zero".  Pretending that it is will have 
disastrous consequences.  Think through what you are trying to do more 
clearly.

cheers,

Rolf Turner


From el at lisse.NA  Mon Jun 30 01:28:51 2014
From: el at lisse.NA (Dr Eberhard W Lisse)
Date: Mon, 30 Jun 2014 01:28:51 +0200
Subject: [R] merge question
In-Reply-To: <53B097B5.2090204@auckland.ac.nz>
References: <53B03DC7.4080800@lisse.NA>
	<CAMjJGR37UZk9WCQy2TByOTi96ZqgjOP1SKsd08959kw4e1RPDA@mail.gmail.com>
	<53B09412.5050803@lisse.NA> <53B097B5.2090204@auckland.ac.nz>
Message-ID: <53B0A133.2090200@lisse.NA>

Thank you very much.

el

On 2014-06-30, 00:48 , Rolf Turner wrote:
> 
> On 30/06/14 10:32, Dr Eberhard W Lisse wrote:
> 
>> Thanks,
>>
>> I then set NA to 0, and can do the sutraction,
>>
>> great.
> 
> Not so great.  I haven't gone through the issues underlying this post,
> but replacing NA by 0 will almost surely yield nonsense.  "Missing" is
> ***not*** the same thing as "zero".  Pretending that it is will have
> disastrous consequences.  Think through what you are trying to do more
> clearly.
> 
> cheers,
> 
> Rolf Turner


From spencer.graves at structuremonitoring.com  Mon Jun 30 01:56:41 2014
From: spencer.graves at structuremonitoring.com (Spencer Graves)
Date: Sun, 29 Jun 2014 16:56:41 -0700
Subject: [R] mixing grid and traditional graphics
Message-ID: <53B0A7B9.2000500@structuremonitoring.com>

       I'm confused with the results I'm getting from mixing grid and 
traditional graphics.  A toy example appears below:  The png file 
created by gridFn() shows "a label" over Africa, as expected. However, 
when run interactively, "a label" appears for roughly half a second, 
then disappears.


       Can someone explain these results?


       Thanks,
       Spencer


gridFn <- function(){
   pushViewport(plotViewport())
   grid.text(label='a label')
   popViewport()
   map()
}

library(grid)
library(maps)
gridFn()

png('gridTst.png')
gridFn()
dev.off()


 > sessionInfo()
R version 3.1.0 (2014-04-10)
Platform: i386-w64-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_United States.1252
[2] LC_CTYPE=English_United States.1252
[3] LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C
[5] LC_TIME=English_United States.1252

attached base packages:
[1] grid      stats     graphics  grDevices utils     datasets methods
[8] base

other attached packages:
[1] maps_2.3-7

loaded via a namespace (and not attached):
[1] tools_3.1.0
 >


From irasharenow100 at yahoo.com  Mon Jun 30 03:44:44 2014
From: irasharenow100 at yahoo.com (Ira Sharenow)
Date: Sun, 29 Jun 2014 18:44:44 -0700
Subject: [R] Change database in SQL Server using RODBC
Message-ID: <53B0C10C.7030606@yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140629/61296727/attachment.pl>

From peter.muenzfeld at gmail.com  Mon Jun 30 01:51:57 2014
From: peter.muenzfeld at gmail.com (Peter Muenzfeld)
Date: Sun, 29 Jun 2014 19:51:57 -0400
Subject: [R] R Functional/Failure Errors Questions
Message-ID: <CAFMzws=RqK8Q_u3udFYRaJ4OHptgHiyU_G98Xu5B8sCJ8hX+YA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140629/8181cc6d/attachment.pl>

From jorgeivanvelez at gmail.com  Mon Jun 30 05:46:32 2014
From: jorgeivanvelez at gmail.com (Jorge I Velez)
Date: Mon, 30 Jun 2014 13:46:32 +1000
Subject: [R] From long to wide format
Message-ID: <CAKL8G3HAtkLu0FJFTkYqLn_49EwfgErw_F9ErOGy=82HPjZj0Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140630/6c2e0c4a/attachment.pl>

From frtog at vestas.com  Mon Jun 30 07:17:28 2014
From: frtog at vestas.com (=?iso-8859-1?Q?Frede_Aakmann_T=F8gersen?=)
Date: Mon, 30 Jun 2014 07:17:28 +0200
Subject: [R] Change database in SQL Server using RODBC
In-Reply-To: <53B0C10C.7030606@yahoo.com>
References: <53B0C10C.7030606@yahoo.com>
Message-ID: <B078CDF40DFE4045AF172A8B4F68FC4857C6726CCF@DKRDSEXC016.vestas.net>

Hi

See inline below for my comments.

Yours sincerely / Med venlig hilsen


Frede Aakmann T?gersen
Specialist, M.Sc., Ph.D.
Plant Performance & Modeling

Technology & Service Solutions
T +45 9730 5135
M +45 2547 6050
frtog at vestas.com
http://www.vestas.com

Company reg. name: Vestas Wind Systems A/S
This e-mail is subject to our e-mail disclaimer statement.
Please refer to www.vestas.com/legal/notice
If you have received this e-mail in error please contact the sender. 

> -----Original Message-----
> From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org]
> On Behalf Of Ira Sharenow
> Sent: 30. juni 2014 03:45
> To: r-help at r-project.org
> Subject: [R] Change database in SQL Server using RODBC
> 
> I wish to query tables that are NOT in the default SQL Server 2012 database.
> 
> At work I am using SQL Server 2012 and Windows 7. I tested the following
> on my home set up of Server 2012 and Windows 7. I am using RStudio.
> 
> I wish to connect to several SQL Server 2012 databases from R.
> 
> This page helped me get started.
> 
> http://andersspur.wordpress.com/2013/11/26/connect-r-to-sql-server-
> 2012-and-14/
> 
> 
> I set up my connection with TSQLFundamentals2008 as the default database.
> 
> I then read in the table dbo.orders with the following code.
> 
> > library(RODBC)
> 
> > con = odbcConnect("SQLServer2012")
> 
> > orders1 = sqlFetch(con,"dbo.orders")
> 
> > odbcClose("SQLServer2012")
> 
> Error in odbcClose("SQLServer2012") :
> 
> argument is not an open RODBC channel
> 

"SQLServer2012" is not a connection but the name of your DSN (data source name) you probably created using Windows tools.

Instead do a odbcClose(con) where con is the connection you opened.

> >
> 
> > head(orders1)
> 
> It appears to have worked properly. But I do not know what the error
> message means.
> 
> Now for the problem. I also want to read in the table dbo.sports. That
> table is in the database sportsDB. I did not see any way to do so from
> within R.
> 

Since I don't how you made your DSN I don't know which database you connect to, but it must be a database which holds dbo.orders since you can query that table. 

If dbo.sports is not in the same database but in the sportsDB database one way to be able to query that is to make a DSN for that database as you did for your first DSN.

Perhaps a query like this "select * from [sportsDB].[dbo].[sports]" using the con connection could also work. 


> I could not find the answer in ODBC Connectivity by Brian Ripley,
> November 25, 2013.
> 
> Any ideas?
> 
> Are there alternative strategies such as using dplyr or data.table? The
> work tables may have hundreds of thousands of rows.
> 
> Thanks.
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bodenhofer at bioinf.jku.at  Mon Jun 30 08:43:28 2014
From: bodenhofer at bioinf.jku.at (Ulrich Bodenhofer)
Date: Mon, 30 Jun 2014 08:43:28 +0200
Subject: [R] Version 1.3.5 of apcluster package
Message-ID: <53B10710.2000504@bioinf.jku.at>

Dear colleagues,

This is to inform you that Version 1.3.5 of the R package apclusterhas 
been released on CRAN last Friday. This version is a quick fix of a 
larger update (Version 1.3.4) that was released one day earlier. The 
update to Version 1.3.4 included several internal and user-visible 
improvements and fixes. Most importantly, a sort() method was added that 
allows for rearranging clustering results according to a user-specified 
sorting criterion. For more details, see the following URLs:

http://www.bioinf.jku.at/software/apcluster/
http://cran.r-project.org/web/packages/apcluster/index.html


Best regards,
Ulrich Bodenhofer


------------------------------------------------------------------------
*Dr. Ulrich Bodenhofer*
Associate Professor
Institute of Bioinformatics

*Johannes Kepler University*
Altenberger Str. 69
4040 Linz, Austria

Tel. +43 732 2468 4526
Fax +43 732 2468 4539
bodenhofer at bioinf.jku.at <mailto:bodenhofer at bioinf.jku.at>
http://www.bioinf.jku.at/ <http://www.bioinf.jku.at>


From Sofanitgirma.araya at adelaide.edu.au  Mon Jun 30 07:05:03 2014
From: Sofanitgirma.araya at adelaide.edu.au (So)
Date: Sun, 29 Jun 2014 22:05:03 -0700 (PDT)
Subject: [R] Time series
Message-ID: <1404104703944-4693234.post@n4.nabble.com>

Hi There!
I have a time series data for 13 years with freqency of 23 per year. I have
plot the curve on R.
Is it possible to refer to the point inbetween the nodes... 
eg. say the time series ts1 has ts1[1] 0.25 and ts1[2]=0.4. is it possible
to get the time when ts1 reach to 0.3??



--
View this message in context: http://r.789695.n4.nabble.com/Time-series-tp4693234.html
Sent from the R help mailing list archive at Nabble.com.


From petr.pikal at precheza.cz  Mon Jun 30 10:05:14 2014
From: petr.pikal at precheza.cz (PIKAL Petr)
Date: Mon, 30 Jun 2014 08:05:14 +0000
Subject: [R] Time series
In-Reply-To: <1404104703944-4693234.post@n4.nabble.com>
References: <1404104703944-4693234.post@n4.nabble.com>
Message-ID: <6E8D8DFDE5FA5D4ABCB8508389D1BF8802BD9A23@SRVEXCHMBX.precheza.cz>

Hi

Not much to cook from. Maybe

?approx

Regards
Petr


> -----Original Message-----
> From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-
> project.org] On Behalf Of So
> Sent: Monday, June 30, 2014 7:05 AM
> To: r-help at r-project.org
> Subject: [R] Time series
>
> Hi There!
> I have a time series data for 13 years with freqency of 23 per year. I
> have plot the curve on R.
> Is it possible to refer to the point inbetween the nodes...
> eg. say the time series ts1 has ts1[1] 0.25 and ts1[2]=0.4. is it
> possible to get the time when ts1 reach to 0.3??
>
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/Time-
> series-tp4693234.html
> Sent from the R help mailing list archive at Nabble.com.
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.

________________________________
Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou ur?eny pouze jeho adres?t?m.
Jestli?e jste obdr?el(a) tento e-mail omylem, informujte laskav? neprodlen? jeho odes?latele. Obsah tohoto emailu i s p??lohami a jeho kopie vyma?te ze sv?ho syst?mu.
Nejste-li zam??len?m adres?tem tohoto emailu, nejste opr?vn?ni tento email jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu zp?sobenou modifikacemi ?i zpo?d?n?m p?enosu e-mailu.

V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
- vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o uzav?en? smlouvy, a to z jak?hokoliv d?vodu i bez uveden? d?vodu.
- a obsahuje-li nab?dku, je adres?t opr?vn?n nab?dku bezodkladn? p?ijmout; Odes?latel tohoto e-mailu (nab?dky) vylu?uje p?ijet? nab?dky ze strany p??jemce s dodatkem ?i odchylkou.
- trv? odes?latel na tom, ?e p??slu?n? smlouva je uzav?ena teprve v?slovn?m dosa?en?m shody na v?ech jej?ch n?le?itostech.
- odes?latel tohoto emailu informuje, ?e nen? opr?vn?n uzav?rat za spole?nost ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn? zmocn?n nebo p?semn? pov??en a takov? pov??en? nebo pln? moc byly adres?tovi tohoto emailu p??padn? osob?, kterou adres?t zastupuje, p?edlo?eny nebo jejich existence je adres?tovi ?i osob? j?m zastoupen? zn?m?.

This e-mail and any documents attached to it may be confidential and are intended only for its intended recipients.
If you received this e-mail by mistake, please immediately inform its sender. Delete the contents of this e-mail with all attachments and its copies from your system.
If you are not the intended recipient of this e-mail, you are not authorized to use, disseminate, copy or disclose this e-mail in any manner.
The sender of this e-mail shall not be liable for any possible damage caused by modifications of the e-mail or by delay with transfer of the email.

In case that this e-mail forms part of business dealings:
- the sender reserves the right to end negotiations about entering into a contract in any time, for any reason, and without stating any reasoning.
- if the e-mail contains an offer, the recipient is entitled to immediately accept such offer; The sender of this e-mail (offer) excludes any acceptance of the offer on the part of the recipient containing any amendment or variation.
- the sender insists on that the respective contract is concluded only upon an express mutual agreement on all its aspects.
- the sender of this e-mail informs that he/she is not authorized to enter into any contracts on behalf of the company except for cases in which he/she is expressly authorized to do so in writing, and such authorization or power of attorney is submitted to the recipient or the person represented by the recipient, or the existence of such authorization is known to the recipient of the person represented by the recipient.

From peter.crowther at melandra.com  Mon Jun 30 10:34:39 2014
From: peter.crowther at melandra.com (Peter Crowther)
Date: Mon, 30 Jun 2014 09:34:39 +0100
Subject: [R] Change database in SQL Server using RODBC
In-Reply-To: <53B0C10C.7030606@yahoo.com>
References: <53B0C10C.7030606@yahoo.com>
Message-ID: <CALhdq6tAaR-96MevVZuj5Tjvj3vj_Uu1dRP3w72ywzkNK58brA@mail.gmail.com>

On 30 June 2014 02:44, Ira Sharenow <irasharenow100 at yahoo.com> wrote:
> I wish to query tables that are NOT in the default SQL Server 2012 database.
> Now for the problem. I also want to read in the table dbo.sports. That
> table is in the database sportsDB. I did not see any way to do so from
> within R.

Can you not use sportsDB.dbo.sports to reference the table?

In general, table reference syntax is [ [ [ serverName '.' ]
databaseName '.' ] [schema ] '.' ] tableName, where the names need
only be surrounded by [...] if they are not valid SQL Server
identifiers.  Many people may suggest you reference
[sportsDB].[dbo].[sports]; this is unnecessary verbiage.

Cheers,

- Peter


From wewolski at gmail.com  Mon Jun 30 10:38:38 2014
From: wewolski at gmail.com (Witold E Wolski)
Date: Mon, 30 Jun 2014 10:38:38 +0200
Subject: [R] How to document an S3 class?
Message-ID: <CAAjnpdi1gHc+sGoR5xSwB+BVS3LfDs-ZtLV2UU62qJQvrf_2xw@mail.gmail.com>

Hi,

How do I document an S3 class with roxygen2?


I create the class at the end of the method with:
class(res) <- "myclass"

but how do I create an documentation entry for this class, where I can
describe the fields of the class (in case of myclass these are just
list entries)?

regards





-- 
Witold Eryk Wolski


From ing.robertamarino at gmail.com  Mon Jun 30 10:58:10 2014
From: ing.robertamarino at gmail.com (Roberta Marino)
Date: Mon, 30 Jun 2014 10:58:10 +0200
Subject: [R] perform a double poisson in R
Message-ID: <CA+UOAuLZPQVmiFM1Qk7ae1e95Rvo3ucGX1AJEabnOba5pL8Fjg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140630/ff048977/attachment.pl>

From m_christjani at gmx.de  Mon Jun 30 09:39:45 2014
From: m_christjani at gmx.de (Mark Christjani)
Date: Mon, 30 Jun 2014 09:39:45 +0200
Subject: [R] Population growthrate with Euler-Lotka
Message-ID: <trinity-574d70c2-3996-47b7-83be-c32bc68143ed-1404113985583@3capp-gmx-bs42>


   Hi everybody,

   I`m Mark and I do my PhD in biology. I try using R to calculate a population
   growth rate of animals grown on different types of food. Our workgroup has a
   R-skript to do so, but sadly nobody, who knows how this works. I`ve never
   used R before, but got some stuff figured out myself. The skript goes:

   setwd("c:/Mark")
   table <- read.table("r-TCO-Scene-Kontrolle.csv")
   table
   x <- c(table$x)
   L <- c(table$lx)
   m <- c(table$mx)
   r.range<- c(0, 5)
   eulerlotka <- function(r) sum(L * m * exp(-r * x)) - 1
   res <- uniroot(f = eulerlotka, interval = r.range, tol = 1e-8)
   res$root

   I understood that the first 3 lines are simply to load my data and show it
   in the workspace console. The next 4 lines define variables of my .csv table
   for R. Thus far, everything works fine. Now comes the Euler-Lotka equation,
   but somehow, this does not seem to work out as supposed. I tried to find a
   solution on the internet, but I think this formula is somewhat special so I
   could not find a suitible solution for my special problem. The console says:


   > setwd("c:/Mark")
   >
   > table <- read.table("r-TCO-Scene-Kontrolle.csv")
   >
   > table
              V1
   1     x;lx;mx
   2       1;1;0
   3       2;1;0
   4       3;1;0
   5       4;1;0
   6       5;1;0
   7       6;1;0
   8       7;1;0
   9       8;1;0
   10      9;1;0
   11     10;1;0
   12 11;0.2;3.5
   >
   > x <- c(table$x)
   > L <- c(table$lx)
   > m <- c(table$mx)
   > r.range<- c(0, 5)
   >
   > eulerlotka <- function(r) sum(L * m * exp(-r * x)) - 1
   > res <- uniroot(f = eulerlotka, interval = r.range, tol = 1e-8)
   Error in uniroot(f = eulerlotka, interval = r.range, tol = 1e-08) :
     f() values at end points not of opposite sign
   >
   > res$root

   Does anybody have an idea how to get this running?

   Thanks in advance

   Kind regards
   Mark

From minshall at acm.org  Mon Jun 30 09:06:04 2014
From: minshall at acm.org (Greg Minshall)
Date: Mon, 30 Jun 2014 10:06:04 +0300
Subject: [R] getPairListElement()
Message-ID: <26831.1404111964@greg-minshalls-mbp.local>

hi.  "Writing R Extensions" provides a simple routine getListElement(),
said to be based on a similar routine in the package stats, for C code
to call to find a named element of a list .  however, it doesn't work
for the argument list passed to a .External(), as that is a PairList
rather than a List.

below is a simple reworking (with slightly different semantics) that
appears to work with PairLists.  the argument "cmd" is used in producing
an error() in the case where this the requested element is not found.
(the original getListElement() would return R_NilValue, but for *my* use
i found throwing the error easier at this lower level; possibly i should
have parameterized that behavior.)

here is an example of use:
----
static SEXP
rimageread(SEXP args) {
...
  file = CHAR(STRING_ELT(getPairListElement(args, "file", "rimageread"), 0));
  usemagick = LOGICAL(getPairListElement(args, "usemagickwand", "rimageread"))[0];
...
}
----

anyway, in the hope this may be of some use to someone.

cheers, Greg Minshall
----
/* get the list element named str, or report an error() */
static SEXP
getPairListElement(SEXP pairs, const char *str, const char *cmd) {
    for (pairs = CDR(pairs); pairs != R_NilValue; pairs = CDR(pairs)) {
        if (!isNull(TAG(pairs))) {
            if (strcmp(CHAR(PRINTNAME(TAG(pairs))), str) == 0) {
                return CAR(pairs);
            }
        }
    }
    error("%s: required parameter '%s' not specified", cmd, str);
    /*NOTREACHED*/
}


From smartpink111 at yahoo.com  Mon Jun 30 10:51:00 2014
From: smartpink111 at yahoo.com (arun)
Date: Mon, 30 Jun 2014 01:51:00 -0700
Subject: [R] From long to wide format
In-Reply-To: <CAKL8G3HAtkLu0FJFTkYqLn_49EwfgErw_F9ErOGy=82HPjZj0Q@mail.gmail.com>
References: <CAKL8G3HAtkLu0FJFTkYqLn_49EwfgErw_F9ErOGy=82HPjZj0Q@mail.gmail.com>
Message-ID: <1404118260.82792.YahooMailNeo@web142606.mail.bf1.yahoo.com>



Hi Jorge,

You may try:
library(dplyr)
library(tidyr)

#Looks like this is faster than the other methods.
system.time({wide1 <- x2%>%
??? ??? select(-rate) %>% 
??? ??? mutate(variable=factor(variable, levels=unique(variable)),id=factor(id, levels=unique(id))) %>%????????????????? 
??????????? spread(variable,outcome)
colnames(wide1)[-1] <- paste("outcome",colnames(wide1)[-1],sep=".")
})

?#user? system elapsed 
?#? 0.006??? 0.00??? 0.006



system.time(wide <- reshape(x2[, -4], v.names = "outcome", idvar = "id",
?????????????? timevar = "variable", direction = "wide"))
?#user? system elapsed 
?# 0.169?? 0.000?? 0.169



system.time({
sel <- unique(x2$variable)
id <- unique(x2$id)
X <- matrix(NA, ncol = length(sel) + 1, nrow = length(id))
X[, 1] <- id
colnames(X) <- c('id', sel)
r <- mclapply(seq_along(sel), function(i){
??????????????????????? out <- x2[x2$variable == sel[i], ][, 3]
??????????????????????? }, mc.cores = 4)
X[, -1] <- do.call(rbind, r)
X
})

# user? system elapsed 
#? 0.125?? 0.011?? 0.074


?wide2 <- wide1
wide2$id <- as.character(wide2$id)
?wide$id <- as.character(wide$id)
all.equal(wide, wide2, check.attributes=F)
#[1] TRUE

A.K.



On Sunday, June 29, 2014 11:48 PM, Jorge I Velez <jorgeivanvelez at gmail.com> wrote:
Dear R-help,

I am working with some data stored as "filename.txt.gz" in my working
directory.
After reading the data in using read.table(), I can see that each of them
has four columns (variable, id, outcome, and rate) and the following
structure:

# sample data
x2 <- data.frame(variable = rep(paste0('x', 1:100), each = 100), id =
rep(paste0('p', 1:100), 100), outcome = sample(0:2, 10000, TRUE), rate =
runif(10000, 0.5, 1))
str(x2)

Each variable, i.e., x1, x2,..., x100 is repeated as many times as the
number of unique IDs (100 in this example).? What I would like to do is to
transform the data above
in a long format.? I can do this by using

# reshape
wide <- reshape(x2[, -4], v.names = "outcome", idvar = "id",
? ? ? ? ? ? ? ? timevar = "variable", direction = "wide")
str(wide)

# or a "hack" with mclapply:

require(parallel)
sel <- as.character(unique(x2$variable))
id <- as.character(unique(x2$id))
X <- matrix(NA, ncol = length(sel) + 1, nrow = length(id))
X[, 1] <- id
colnames(X) <- c('id', sel)
r <- mclapply(seq_along(sel), function(i){
? ? ? ? ? ? ? ? ? ? ? ? out <- x2[x2$variable == sel[i], ][, 3]
? ? ? ? ? ? ? ? ? ? ? ? }, mc.cores = 4)
X[, -1] <- do.call(rbind, r)
X

However, I was wondering if it is possible to come up with another solution
, hopefully faster than these
.? Unfortunately, either one of these takes a very long time to process,
specially when the number of variables is very large
(> 250,000) and the number of ids is ~2000.

I would very much appreciate your suggestions.?  At the end of this message
is my sessionInfo().

Thank you very much in advance.

Best regards,
Jorge Velez.-


R>? sessionInfo()

R version 3.0.2 Patched (2013-12-11 r64449)
Platform: x86_64-apple-darwin10.8.0 (64-bit)

locale:
[1] en_AU.UTF-8/en_AU.UTF-8/en_AU.UTF-8/C/en_AU.UTF-8/en_AU.UTF-8

attached base packages:
[1] graphics? grDevices utils? ?  datasets? parallel? compiler? stats
[8] methods?  base

other attached packages:
[1] knitr_1.6.3? ? ? ? ? ? ggplot2_1.0.0? ? ? ? ? slidifyLibraries_0.3.1
[4] slidify_0.3.52

loaded via a namespace (and not attached):
[1] colorspace_1.2-4 digest_0.6.4? ?  evaluate_0.5.5?  formatR_0.10
[5] grid_3.0.2? ? ?  gtable_0.1.2? ?  markdown_0.7.1?  MASS_7.3-33
[9] munsell_0.4.2? ? plyr_1.8.1? ? ?  proto_0.3-10? ?  Rcpp_0.11.2
[13] reshape2_1.4? ?  scales_0.2.4? ?  stringr_0.6.2? ? tools_3.0.2
[17] whisker_0.4? ? ? yaml_2.1.13

??? [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From trichter at uni-bremen.de  Mon Jun 30 10:42:28 2014
From: trichter at uni-bremen.de (Tim Richter-Heitmann)
Date: Mon, 30 Jun 2014 10:42:28 +0200
Subject: [R] x,y scatterplots, with averaging by a column
Message-ID: <53B122F4.1090002@uni-bremen.de>

Hallo!

I have this matrix:

SampleID, Day, Species1, Species2,Species3,...,Speciesn
1,Monday,abundance values
2,Monday,abundance values
11,Tuesday,abundance values
12,Tuesday,abundance values
21,Wednesday,abundance values
22,Wednesday,abundance values

I would like to plot the Days on the x-axis, and the species abundance 
data on the y-axis. Each pair of values (i just have two measurements 
for each day) should be represented by their mean with absolute error 
bars (so we have basically a vertical min,max-range) and whiskers. The 
means for each Species observation should be connected with lines.
Also of interest would be annotating the whispers with their sample ID 
(because the whiskers basically represent the values for y1,2 (11,12; 
21,22)).
Any help is welcome! I am new to R, so please bear with me. Thank you!

-- 
Tim Richter-Heitmann (M.Sc.)
PhD Candidate



International Max-Planck Research School for Marine Microbiology
University of Bremen
Microbial Ecophysiology Group (AG Friedrich)
FB02 - Biologie/Chemie
Leobener Stra?e (NW2 A2130)
D-28359 Bremen
Tel.: 0049(0)421 218-63062
Fax: 0049(0)421 218-63069


From el at lisse.na  Mon Jun 30 12:07:03 2014
From: el at lisse.na (Dr Eberhard W Lisse)
Date: Mon, 30 Jun 2014 12:07:03 +0200
Subject: [R] merge question
In-Reply-To: <53B097B5.2090204@auckland.ac.nz>
References: <53B03DC7.4080800@lisse.NA>
	<CAMjJGR37UZk9WCQy2TByOTi96ZqgjOP1SKsd08959kw4e1RPDA@mail.gmail.com>
	<53B09412.5050803@lisse.NA> <53B097B5.2090204@auckland.ac.nz>
Message-ID: <39BC5FF5-1692-41D8-81CC-1C967AF2493B@lisse.na>

Rolf,

I hear you. 

But, after reflection, ie I looked at my situation again, it is great :-)-O

el


Sent from Dr Lisse's iPad mini

> On Jun 30, 2014, at 0:48, Rolf Turner <r.turner at auckland.ac.nz> wrote:
> 
> 
>> On 30/06/14 10:32, Dr Eberhard W Lisse wrote:
>> 
>> Thanks,
>> 
>> I then set NA to 0, and can do the sutraction,
>> 
>> great.
> 
> Not so great.  I haven't gone through the issues underlying this post, but replacing NA by 0 will almost surely yield nonsense.  "Missing" is ***not*** the same thing as "zero".  Pretending that it is will have disastrous consequences.  Think through what you are trying to do more clearly.
> 
> cheers,
> 
> Rolf Turner


From chrissair at gmx.net  Mon Jun 30 12:07:44 2014
From: chrissair at gmx.net (ChrisR)
Date: Mon, 30 Jun 2014 03:07:44 -0700 (PDT)
Subject: [R] convergence warning in betamix()
Message-ID: <1404122864903-4693249.post@n4.nabble.com>

Hi, I am running some rather complex mixtures of beta regressions using the
betamix() command from the betareg package (V. 3.0-4). If I am doing
exploratory regressions with only one random starting value (nstart=1) I
obtain results which converge after about 100 iterations. However, if I run
regressions with nstart=100 random starting values I obtain solutions
amended with a warning that no convergence resulted after 200 iterations. I
conclude that 1) the initial regression converges to a local optimum, 2) the
likelihood function is flat. However, at least in theory the EM algorithm
should converge to an optimum. Thus, I am wondering about the meaning of the
warning: does it mean "no convergence at all, i.e. after 5000 iterations of
the BFGS algorithm" or convergence but after more than 200 iterations?
Moreover, is there a way out the flat trap? I have started to experiment
with the SANN algorithm within the betamix() function but it is slow (as
expected)...
Thanks for any hints
Chris



--
View this message in context: http://r.789695.n4.nabble.com/convergence-warning-in-betamix-tp4693249.html
Sent from the R help mailing list archive at Nabble.com.


From s.blomberg1 at uq.edu.au  Mon Jun 30 12:41:34 2014
From: s.blomberg1 at uq.edu.au (Simon Blomberg)
Date: Mon, 30 Jun 2014 10:41:34 +0000
Subject: [R] Population growthrate with Euler-Lotka
In-Reply-To: <trinity-574d70c2-3996-47b7-83be-c32bc68143ed-1404113985583@3capp-gmx-bs42>
References: <trinity-574d70c2-3996-47b7-83be-c32bc68143ed-1404113985583@3capp-gmx-bs42>
Message-ID: <23FA8FC6-8FCD-45E6-83BE-5CE59E0F1994@uq.edu.au>

Your script is failing at the first hurdle because you data are not being imported properly. You should include

header=TRUE. sep=";"

In the call to read.table.

Cheers.

Simon.

Sent from my iPhone

Sent from my iPhone
> On 30 Jun 2014, at 7:10 pm, "Mark Christjani" <m_christjani at gmx.de> wrote:
> 
> 
>   Hi everybody,
> 
>   I`m Mark and I do my PhD in biology. I try using R to calculate a population
>   growth rate of animals grown on different types of food. Our workgroup has a
>   R-skript to do so, but sadly nobody, who knows how this works. I`ve never
>   used R before, but got some stuff figured out myself. The skript goes:
> 
>   setwd("c:/Mark")
>   table <- read.table("r-TCO-Scene-Kontrolle.csv")
>   table
>   x <- c(table$x)
>   L <- c(table$lx)
>   m <- c(table$mx)
>   r.range<- c(0, 5)
>   eulerlotka <- function(r) sum(L * m * exp(-r * x)) - 1
>   res <- uniroot(f = eulerlotka, interval = r.range, tol = 1e-8)
>   res$root
> 
>   I understood that the first 3 lines are simply to load my data and show it
>   in the workspace console. The next 4 lines define variables of my .csv table
>   for R. Thus far, everything works fine. Now comes the Euler-Lotka equation,
>   but somehow, this does not seem to work out as supposed. I tried to find a
>   solution on the internet, but I think this formula is somewhat special so I
>   could not find a suitible solution for my special problem. The console says:
> 
> 
>> setwd("c:/Mark")
>> 
>> table <- read.table("r-TCO-Scene-Kontrolle.csv")
>> 
>> table
>              V1
>   1     x;lx;mx
>   2       1;1;0
>   3       2;1;0
>   4       3;1;0
>   5       4;1;0
>   6       5;1;0
>   7       6;1;0
>   8       7;1;0
>   9       8;1;0
>   10      9;1;0
>   11     10;1;0
>   12 11;0.2;3.5
>> 
>> x <- c(table$x)
>> L <- c(table$lx)
>> m <- c(table$mx)
>> r.range<- c(0, 5)
>> 
>> eulerlotka <- function(r) sum(L * m * exp(-r * x)) - 1
>> res <- uniroot(f = eulerlotka, interval = r.range, tol = 1e-8)
>   Error in uniroot(f = eulerlotka, interval = r.range, tol = 1e-08) :
>     f() values at end points not of opposite sign
>> 
>> res$root
> 
>   Does anybody have an idea how to get this running?
> 
>   Thanks in advance
> 
>   Kind regards
>   Mark
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jmigueldelgado at gmail.com  Mon Jun 30 12:47:51 2014
From: jmigueldelgado at gmail.com (=?UTF-8?Q?Z=C3=A9_Miguel?=)
Date: Mon, 30 Jun 2014 11:47:51 +0100
Subject: [R] solving pde with given boundary condition (heat equation)
Message-ID: <CAN1TC-u3MqEqMqF9p01gKqwd41JrNgR8v0hy31mUnNsUTk-t5g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140630/f928b41a/attachment.pl>

From jim at bitwrit.com.au  Mon Jun 30 12:53:36 2014
From: jim at bitwrit.com.au (Jim Lemon)
Date: Mon, 30 Jun 2014 20:53:36 +1000
Subject: [R] x,y scatterplots, with averaging by a column
In-Reply-To: <53B122F4.1090002@uni-bremen.de>
References: <53B122F4.1090002@uni-bremen.de>
Message-ID: <15263564.0PQqXzVpRj@localhost.localdomain>

On Mon, 30 Jun 2014 10:42:28 AM Tim Richter-Heitmann wrote:
> Hallo!
> 
> I have this matrix:
> 
> SampleID, Day, Species1, Species2,Species3,...,Speciesn
> 1,Monday,abundance values
> 2,Monday,abundance values
> 11,Tuesday,abundance values
> 12,Tuesday,abundance values
> 21,Wednesday,abundance values
> 22,Wednesday,abundance values
> 
> I would like to plot the Days on the x-axis, and the species 
abundance
> data on the y-axis. Each pair of values (i just have two 
measurements
> for each day) should be represented by their mean with absolute 
error
> bars (so we have basically a vertical min,max-range) and whiskers. 
The
> means for each Species observation should be connected with lines.
> Also of interest would be annotating the whispers with their sample 
ID
> (because the whiskers basically represent the values for y1,2 
(11,12;
> 21,22)).

Hi Tim,
I think this might get you started:

trhdf<-data.frame(SampleID=seq(0,50,by=10)+(1:2),
 Day=factor(rep( c("Monday","Tuesday","Wednesday",
  "Thursday","Friday","Saturday"),
 each=2),levels=c("Monday","Tuesday","Wednesday",
  "Thursday","Friday","Saturday")),
 Species1=sample(0:20,12),Species2=sample(0:20,12),
 Species3=sample(0:20,12),Species4=sample(0:20,12),
 Species5=sample(0:20,12))

rollfunc<-function(x,FUN="mean",roll=2) {
 lenx<-length(x)
 xmeans<-rep(NA,lenx/2)
 start<-1
 for(xm in 1:(lenx/2)) {
  xmeans[xm]<-do.call(FUN,list(x[start:(start+roll-1)]))
  start<-start+roll
 }
 return(xmeans)
}

xpos<-rep(1:6,5)+seq(-0.4,0.4,by=0.2)
ypos<-as.vector(sapply(trhdf[,3:7],rollfunc))
ymin<-as.vector(sapply(trhdf[,3:7],rollfunc,"min"))
ymax<-as.vector(sapply(trhdf[,3:7],rollfunc,"max"))

library(plotrix)

plot(xpos,ypos,pch=c("1","2","3","4","5"),ylim=c(0,20),
 xaxt="n",xlab="Day",ylab="Abundance")
dispersion(xpos,ypos,ymax,ymin,interval=FALSE)
staxlab(1,at=1:6,
 labels=c("Monday","Tuesday","Wednesday",
  "Thursday","Friday","Saturday"))

Jim


From s.blomberg1 at uq.edu.au  Mon Jun 30 13:06:30 2014
From: s.blomberg1 at uq.edu.au (Simon Blomberg)
Date: Mon, 30 Jun 2014 11:06:30 +0000
Subject: [R] Population growthrate with Euler-Lotka
In-Reply-To: <trinity-8b99e08b-67fd-49d2-9d07-6524a9be76bb-1404125593440@3capp-gmx-bs42>
References: <trinity-574d70c2-3996-47b7-83be-c32bc68143ed-1404113985583@3capp-gmx-bs42>,
	<23FA8FC6-8FCD-45E6-83BE-5CE59E0F1994@uq.edu.au>,
	<trinity-8b99e08b-67fd-49d2-9d07-6524a9be76bb-1404125593440@3capp-gmx-bs42>
Message-ID: <989B3A66-BC9C-4B66-A2BF-10E7B7BB0B72@uq.edu.au>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140630/5951229e/attachment.pl>

From david.stevens at usu.edu  Mon Jun 30 13:11:36 2014
From: david.stevens at usu.edu (David Stevens)
Date: Mon, 30 Jun 2014 05:11:36 -0600
Subject: [R] Population growthrate with Euler-Lotka
In-Reply-To: <trinity-574d70c2-3996-47b7-83be-c32bc68143ed-1404113985583@3capp-gmx-bs42>
References: <trinity-574d70c2-3996-47b7-83be-c32bc68143ed-1404113985583@3capp-gmx-bs42>
Message-ID: <53B145E8.70009@usu.edu>

Mark - good on you for jumping into R with both feet.

In addition to Simon's advice, the error message you are getting means 
that the two endpoints (r.range in your case) do not give function 
values that are of the opposite sign and so either the function has no 
roots on the interval or has and even number of roots on the interval 
(2,4,6,...). Neither situation is good for your case because uniroot 
finds the single root (where the y-value = 0) on the interval. Once the 
reading issues are settled, try narrowing or expanding the r.range. A 
good way to find a proper r.range is to plot the function vs. r and 
locate the range of r where the function crosses zero. Then use the 
region of r around that point as your r.range. You also learn a lot 
about that function by studying that plot.

Regards

David

On 6/30/2014 1:39 AM, Mark Christjani wrote:
>     Hi everybody,
>
>     I`m Mark and I do my PhD in biology. I try using R to calculate a population
>     growth rate of animals grown on different types of food. Our workgroup has a
>     R-skript to do so, but sadly nobody, who knows how this works. I`ve never
>     used R before, but got some stuff figured out myself. The skript goes:
>
>     setwd("c:/Mark")
>     table <- read.table("r-TCO-Scene-Kontrolle.csv")
>     table
>     x <- c(table$x)
>     L <- c(table$lx)
>     m <- c(table$mx)
>     r.range<- c(0, 5)
>     eulerlotka <- function(r) sum(L * m * exp(-r * x)) - 1
>     res <- uniroot(f = eulerlotka, interval = r.range, tol = 1e-8)
>     res$root
>
>     I understood that the first 3 lines are simply to load my data and show it
>     in the workspace console. The next 4 lines define variables of my .csv table
>     for R. Thus far, everything works fine. Now comes the Euler-Lotka equation,
>     but somehow, this does not seem to work out as supposed. I tried to find a
>     solution on the internet, but I think this formula is somewhat special so I
>     could not find a suitible solution for my special problem. The console says:
>
>
>     > setwd("c:/Mark")
>     >
>     > table <- read.table("r-TCO-Scene-Kontrolle.csv")
>     >
>     > table
>                V1
>     1     x;lx;mx
>     2       1;1;0
>     3       2;1;0
>     4       3;1;0
>     5       4;1;0
>     6       5;1;0
>     7       6;1;0
>     8       7;1;0
>     9       8;1;0
>     10      9;1;0
>     11     10;1;0
>     12 11;0.2;3.5
>     >
>     > x <- c(table$x)
>     > L <- c(table$lx)
>     > m <- c(table$mx)
>     > r.range<- c(0, 5)
>     >
>     > eulerlotka <- function(r) sum(L * m * exp(-r * x)) - 1
>     > res <- uniroot(f = eulerlotka, interval = r.range, tol = 1e-8)
>     Error in uniroot(f = eulerlotka, interval = r.range, tol = 1e-08) :
>       f() values at end points not of opposite sign
>     >
>     > res$root
>
>     Does anybody have an idea how to get this running?
>
>     Thanks in advance
>
>     Kind regards
>     Mark
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
David K Stevens, P.E., Ph.D.
Professor and Head, Environmental Engineering
Civil and Environmental Engineering
Utah Water Research Laboratory
8200 Old Main Hill
Logan, UT  84322-8200
435 797 3229 - voice
435 797 1363 - fax
david.stevens at usu.edu


From s.blomberg1 at uq.edu.au  Mon Jun 30 13:19:13 2014
From: s.blomberg1 at uq.edu.au (Simon Blomberg)
Date: Mon, 30 Jun 2014 11:19:13 +0000
Subject: [R] Population growthrate with Euler-Lotka
In-Reply-To: <989B3A66-BC9C-4B66-A2BF-10E7B7BB0B72@uq.edu.au>
References: <trinity-574d70c2-3996-47b7-83be-c32bc68143ed-1404113985583@3capp-gmx-bs42>,
	<23FA8FC6-8FCD-45E6-83BE-5CE59E0F1994@uq.edu.au>,
	<trinity-8b99e08b-67fd-49d2-9d07-6524a9be76bb-1404125593440@3capp-gmx-bs42>,
	<989B3A66-BC9C-4B66-A2BF-10E7B7BB0B72@uq.edu.au>
Message-ID: <CCE840E9-2627-4870-A246-0AA32D860680@uq.edu.au>

There may be something wrong with your data: in all but one case you have lx=1 and mx=0. Uniroot may be having difficulty because of this.

Simon.

Sent from my iPhone

> On 30 Jun 2014, at 9:09 pm, "Simon Blomberg" <s.blomberg1 at uq.edu.au> wrote:
> 
> Hmm. Try setting extendInt="yes" in the call to uniroot. You should also look at the help page for uniroot. help(uniroot) May give you a clue. It's difficult for me to debug code on my iphone. Well, more difficult than usual.
> 
> Best,
> 
> Simon.
> 
> Sent from my iPhone
> 
> On 30 Jun 2014, at 8:53 pm, "Mark Christjani" <m_christjani at gmx.de<mailto:m_christjani at gmx.de>> wrote:
> 
> Thank you, Simon, for your input.
> 
> Data import works fine now, but the final equation still won`t work.
> 
> Console reads now:
> 
>> setwd("c:/Mark")
>> 
>> table <- read.table("r-TCO-Scene-Kontrolle.csv", header=TRUE, sep=";")
>> 
>> table
>    x  lx  mx
> 1   1 1.0 0.0
> 2   2 1.0 0.0
> 3   3 1.0 0.0
> 4   4 1.0 0.0
> 5   5 1.0 0.0
> 6   6 1.0 0.0
> 7   7 1.0 0.0
> 8   8 1.0 0.0
> 9   9 1.0 0.0
> 10 10 1.0 0.0
> 11 11 0.2 3.5
>> 
>> x <- c(table$x)
>> L <- c(table$lx)
>> m <- c(table$mx)
>> r.range<- c(0, 5)
>> 
>> eulerlotka <- function(r) sum(L * m * exp(-r * x)) - 1
>> res <- uniroot(f = eulerlotka, interval = r.range, tol = 1e-8)
> Error in uniroot(f = eulerlotka, interval = r.range, tol = 1e-08) :
>  f() values at end points not of opposite sign
>> 
>> res$root
> Error: object 'res' not found
> 
> Any idea on this "Error in uniroot(f = eulerlotka, interval = r.range, tol = 1e-08) :
>  f() values at end points not of opposite sign"-matter?
> 
> Kind regards,
> Mark
> 
> 
> 
> Gesendet: Montag, 30. Juni 2014 um 12:41 Uhr
> Von: "Simon Blomberg" <s.blomberg1 at uq.edu.au<mailto:s.blomberg1 at uq.edu.au>>
> An: "Mark Christjani" <m_christjani at gmx.de<mailto:m_christjani at gmx.de>>
> Cc: "r-help at r-project.org<mailto:r-help at r-project.org>" <r-help at r-project.org<mailto:r-help at r-project.org>>
> Betreff: Re: [R] Population growthrate with Euler-Lotka
> Your script is failing at the first hurdle because you data are not being imported properly. You should include
> 
> header=TRUE. sep=";"
> 
> In the call to read.table.
> 
> Cheers.
> 
> Simon.
> 
> Sent from my iPhone
> 
> Sent from my iPhone
>> On 30 Jun 2014, at 7:10 pm, "Mark Christjani" <m_christjani at gmx.de<mailto:m_christjani at gmx.de>> wrote:
>> 
>> 
>> Hi everybody,
>> 
>> I`m Mark and I do my PhD in biology. I try using R to calculate a population
>> growth rate of animals grown on different types of food. Our workgroup has a
>> R-skript to do so, but sadly nobody, who knows how this works. I`ve never
>> used R before, but got some stuff figured out myself. The skript goes:
>> 
>> setwd("c:/Mark")
>> table <- read.table("r-TCO-Scene-Kontrolle.csv")
>> table
>> x <- c(table$x)
>> L <- c(table$lx)
>> m <- c(table$mx)
>> r.range<- c(0, 5)
>> eulerlotka <- function(r) sum(L * m * exp(-r * x)) - 1
>> res <- uniroot(f = eulerlotka, interval = r.range, tol = 1e-8)
>> res$root
>> 
>> I understood that the first 3 lines are simply to load my data and show it
>> in the workspace console. The next 4 lines define variables of my .csv table
>> for R. Thus far, everything works fine. Now comes the Euler-Lotka equation,
>> but somehow, this does not seem to work out as supposed. I tried to find a
>> solution on the internet, but I think this formula is somewhat special so I
>> could not find a suitible solution for my special problem. The console says:
>> 
>> 
>>> setwd("c:/Mark")
>>> 
>>> table <- read.table("r-TCO-Scene-Kontrolle.csv")
>>> 
>>> table
>> V1
>> 1 x;lx;mx
>> 2 1;1;0
>> 3 2;1;0
>> 4 3;1;0
>> 5 4;1;0
>> 6 5;1;0
>> 7 6;1;0
>> 8 7;1;0
>> 9 8;1;0
>> 10 9;1;0
>> 11 10;1;0
>> 12 11;0.2;3.5
>>> 
>>> x <- c(table$x)
>>> L <- c(table$lx)
>>> m <- c(table$mx)
>>> r.range<- c(0, 5)
>>> 
>>> eulerlotka <- function(r) sum(L * m * exp(-r * x)) - 1
>>> res <- uniroot(f = eulerlotka, interval = r.range, tol = 1e-8)
>> Error in uniroot(f = eulerlotka, interval = r.range, tol = 1e-08) :
>> f() values at end points not of opposite sign
>>> 
>>> res$root
>> 
>> Does anybody have an idea how to get this running?
>> 
>> Thanks in advance
>> 
>> Kind regards
>> Mark
>> ______________________________________________
>> R-help at r-project.org<mailto:R-help at r-project.org> mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
>    [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From m_christjani at gmx.de  Mon Jun 30 12:53:13 2014
From: m_christjani at gmx.de (Mark Christjani)
Date: Mon, 30 Jun 2014 12:53:13 +0200
Subject: [R] Population growthrate with Euler-Lotka
In-Reply-To: <23FA8FC6-8FCD-45E6-83BE-5CE59E0F1994@uq.edu.au>
References: <trinity-574d70c2-3996-47b7-83be-c32bc68143ed-1404113985583@3capp-gmx-bs42>,
	<23FA8FC6-8FCD-45E6-83BE-5CE59E0F1994@uq.edu.au>
Message-ID: <trinity-8b99e08b-67fd-49d2-9d07-6524a9be76bb-1404125593440@3capp-gmx-bs42>


   Thank you, Simon, for your input.

   Data import works fine now, but the final equation still won`t work.

   Console reads now:

   > setwd("c:/Mark")
   >
   > table <- read.table("r-TCO-Scene-Kontrolle.csv", header=TRUE, sep=";")
   >
   > table
       x  lx  mx
   1   1 1.0 0.0
   2   2 1.0 0.0
   3   3 1.0 0.0
   4   4 1.0 0.0
   5   5 1.0 0.0
   6   6 1.0 0.0
   7   7 1.0 0.0
   8   8 1.0 0.0
   9   9 1.0 0.0
   10 10 1.0 0.0
   11 11 0.2 3.5
   >
   > x <- c(table$x)
   > L <- c(table$lx)
   > m <- c(table$mx)
   > r.range<- c(0, 5)
   >
   > eulerlotka <- function(r) sum(L * m * exp(-r * x)) - 1
   > res <- uniroot(f = eulerlotka, interval = r.range, tol = 1e-8)
   Error in uniroot(f = eulerlotka, interval = r.range, tol = 1e-08) :
     f() values at end points not of opposite sign
   >
   > res$root
   Error: object 'res' not found

   Any idea on this "Error in uniroot(f = eulerlotka, interval = r.range, tol =
   1e-08) :
     f() values at end points not of opposite sign"-matter?

   Kind regards,
   Mark



   Gesendet: Montag, 30. Juni 2014 um 12:41 Uhr
   Von: "Simon Blomberg" <s.blomberg1 at uq.edu.au>
   An: "Mark Christjani" <m_christjani at gmx.de>
   Cc: "r-help at r-project.org" <r-help at r-project.org>
   Betreff: Re: [R] Population growthrate with Euler-Lotka
   Your script is failing at the first hurdle because you data are not being
   imported properly. You should include
   header=TRUE. sep=";"
   In the call to read.table.
   Cheers.
   Simon.
   Sent from my iPhone
   Sent from my iPhone
   > On 30 Jun 2014, at 7:10 pm, "Mark Christjani" <m_christjani at gmx.de> wrote:
   >
   >
   > Hi everybody,
   >
   >  I`m  Mark  and I do my PhD in biology. I try using R to calculate a
   population
   > growth rate of animals grown on different types of food. Our workgroup has
   a
   > R-skript to do so, but sadly nobody, who knows how this works. I`ve never
   > used R before, but got some stuff figured out myself. The skript goes:
   >
   > setwd("c:/Mark")
   > table <- read.table("r-TCO-Scene-Kontrolle.csv")
   > table
   > x <- c(table$x)
   > L <- c(table$lx)
   > m <- c(table$mx)
   > r.range<- c(0, 5)
   > eulerlotka <- function(r) sum(L * m * exp(-r * x)) - 1
   > res <- uniroot(f = eulerlotka, interval = r.range, tol = 1e-8)
   > res$root
   >
   > I understood that the first 3 lines are simply to load my data and show it
   > in the workspace console. The next 4 lines define variables of my .csv
   table
   >  for  R.  Thus far, everything works fine. Now comes the Euler-Lotka
   equation,
   > but somehow, this does not seem to work out as supposed. I tried to find a
   > solution on the internet, but I think this formula is somewhat special so
   I
   > could not find a suitible solution for my special problem. The console
   says:
   >
   >
   >> setwd("c:/Mark")
   >>
   >> table <- read.table("r-TCO-Scene-Kontrolle.csv")
   >>
   >> table
   > V1
   > 1 x;lx;mx
   > 2 1;1;0
   > 3 2;1;0
   > 4 3;1;0
   > 5 4;1;0
   > 6 5;1;0
   > 7 6;1;0
   > 8 7;1;0
   > 9 8;1;0
   > 10 9;1;0
   > 11 10;1;0
   > 12 11;0.2;3.5
   >>
   >> x <- c(table$x)
   >> L <- c(table$lx)
   >> m <- c(table$mx)
   >> r.range<- c(0, 5)
   >>
   >> eulerlotka <- function(r) sum(L * m * exp(-r * x)) - 1
   >> res <- uniroot(f = eulerlotka, interval = r.range, tol = 1e-8)
   > Error in uniroot(f = eulerlotka, interval = r.range, tol = 1e-08) :
   > f() values at end points not of opposite sign
   >>
   >> res$root
   >
   > Does anybody have an idea how to get this running?
   >
   > Thanks in advance
   >
   > Kind regards
   > Mark
   > ______________________________________________
   > R-help at r-project.org mailing list
   > [1]https://stat.ethz.ch/mailman/listinfo/r-help
   > PLEASE do read the posting guide
   [2]http://www.R-project.org/posting-guide.html
   > and provide commented, minimal, self-contained, reproducible code.

References

   1. https://stat.ethz.ch/mailman/listinfo/r-help
   2. http://www.R-project.org/posting-guide.html

From therneau at mayo.edu  Mon Jun 30 15:04:45 2014
From: therneau at mayo.edu (Therneau, Terry M., Ph.D.)
Date: Mon, 30 Jun 2014 08:04:45 -0500
Subject: [R] standard error of survfit.coxph()
In-Reply-To: <mailman.25.1403949609.14791.r-help@r-project.org>
References: <mailman.25.1403949609.14791.r-help@r-project.org>
Message-ID: <27747b$8t0m1t@ironport10.mayo.edu>

1. The computations "behind the scenes" produce the variance of the cumulative hazard. 
This is true for both an ordinary Kaplan-Meier and a Cox model.  Transformations to other 
scales are done using simple Taylor series.

   H = cumulative hazard = log(S);  S=survival
   var(H) = var(log(S))  = the starting point
   S = exp(log(S)), so  var(S) is approx [deriv of exp(x)]^2 * var(log(S)) = S^2 var(H)
   var(log(log(S)) is approx (1/S^2) var(H)

2. At the time it was written, summary.survfit was used only for printing out the survival 
curve at selected times, and the audience for the printout wanted std(S).   True, that was 
20 years ago, but I don't recall anyone ever asking for summary to do anything else.  Your 
request is not a bad idea.
   Note however that the primary impact of using log(S) or S or log(log(S)) scale is is on 
the confidence intervals, and they do appear per request in the summary output.

Terry T.


On 06/28/2014 05:00 AM, r-help-request at r-project.org wrote:
> Message: 9
> Date: Fri, 27 Jun 2014 12:39:29 -0700
> From: array chip<arrayprofile at yahoo.com>
> To:"r-help at r-project.org"  <r-help at r-project.org>
> Subject: [R] standard error of survfit.coxph()
> Message-ID:
> 	<1403897969.91269.YahooMailNeo at web122906.mail.ne1.yahoo.com>
> Content-Type: text/plain
>
> Hi, can anyone help me to understand the standard errors printed in the output of survfit.coxph()?
>
> time<-sample(1:15,100,replace=T)
>
> status<-as.numeric(runif(100,0,1)<0.2)
> x<-rnorm(100,10,2)
>
> fit<-coxph(Surv(time,status)~x)
> ??? ### method 1
>
> survfit(fit, newdata=data.frame(time=time,status=status,x=x)[1:5,], conf.type='log')$std.err
>
> ???????????? [,1]??????? [,2]??????? [,3]??????? [,4]?????? [,5]
> ?[1,] 0.000000000 0.000000000 0.000000000 0.000000000 0.00000000
> ?[2,] 0.008627644 0.008567253 0.008773699 0.009354788 0.01481819
> ?[3,] 0.008627644 0.008567253 0.008773699 0.009354788 0.01481819
> ?[4,] 0.013800603 0.013767977 0.013889971 0.014379928 0.02353371
> ?[5,] 0.013800603 0.013767977 0.013889971 0.014379928 0.02353371
> ?[6,] 0.013800603 0.013767977 0.013889971 0.014379928 0.02353371
> ?[7,] 0.030226811 0.030423883 0.029806263 0.028918817 0.05191161
> ?[8,] 0.030226811 0.030423883 0.029806263 0.028918817 0.05191161
> ?[9,] 0.036852571 0.037159980 0.036186931 0.034645002 0.06485394
> [10,] 0.044181716 0.044621159 0.043221145 0.040872939 0.07931028
> [11,] 0.044181716 0.044621159 0.043221145 0.040872939 0.07931028
> [12,] 0.055452631 0.056018832 0.054236881 0.051586391 0.10800413
> [13,] 0.070665160 0.071363749 0.069208056 0.066655730 0.14976433
> [14,] 0.124140400 0.125564637 0.121281571 0.118002021 0.30971860
> [15,] 0.173132357 0.175309455 0.168821266 0.164860523 0.46393111
>
> survfit(fit, newdata=data.frame(time=time,status=status,x=x)[1:5,], conf.type='log')$time
> ?[1]? 1? 2? 3? 4? 5? 6? 7? 8? 9 10 11 12 13 14 15
>
> ??? ### method 2
>
> summary(survfit(fit, newdata=data.frame(time=time,status=status,x=x)[1:5,], conf.type='log'),time=10)$std.err
>
> ????????????? 1????????? 2????????? 3????????? 4????????? 5
> [1,] 0.04061384 0.04106186 0.03963184 0.03715246 0.06867532
>
> By reading the help of ?survfit.object and ?summary.survfit, the standard error provided in the output of method 1 (survfit()) was for cumulative hazard-log(survival), while the standard error provided in the output of method 2 (summary.survfit()) was for survival itself, regardless of how you choose the value for "conf.type" ('log', 'log-log' or 'plain'). This explains why the standard error output is different between method 1 (10th row) and method 2.
>
> My question is how do I get standard error estimates for log(-log(survival))?
>
> Thanks!
>
> John


From jim at bitwrit.com.au  Mon Jun 30 15:13:18 2014
From: jim at bitwrit.com.au (Jim Lemon)
Date: Mon, 30 Jun 2014 23:13:18 +1000
Subject: [R] yet another regular expression
Message-ID: <2310760.RmipCVWQby@localhost.localdomain>

Hi all,
I have managed, with the help of glob2rx() to get two parts of a text 
manipulation working. I have successfully gotten rid of the first and 
second bits, but I have hit the wall trying to get rid of the last bit. Here's 
an example:

initString<-
 "\"Delete this\":value1,\"Delete this too\":value2},Delete last bit"
sub("\"Delete this too\":","",
 sub(glob2rx("*this\":*"),"",initString),fixed=TRUE)

This gives me:

[1] "value1,value2},Delete last bit"

and glob2rx("},*") just won't get rid of the last bit. I throw myself upon 
the mercy of the regular expression gurus.

Jim


From m_christjani at gmx.de  Mon Jun 30 15:35:46 2014
From: m_christjani at gmx.de (Mark Christjani)
Date: Mon, 30 Jun 2014 15:35:46 +0200
Subject: [R] Population growthrate with Euler-Lotka
In-Reply-To: <989B3A66-BC9C-4B66-A2BF-10E7B7BB0B72@uq.edu.au>
References: <trinity-574d70c2-3996-47b7-83be-c32bc68143ed-1404113985583@3capp-gmx-bs42>,
	<23FA8FC6-8FCD-45E6-83BE-5CE59E0F1994@uq.edu.au>,
	<trinity-8b99e08b-67fd-49d2-9d07-6524a9be76bb-1404125593440@3capp-gmx-bs42>,
	<989B3A66-BC9C-4B66-A2BF-10E7B7BB0B72@uq.edu.au>
Message-ID: <trinity-6a1d96d0-aa03-413b-a0e1-f66e3092313c-1404135346664@3capp-gmx-bs42>


   Thank you Simon and David for your suggestions. They were most helpful. The
   Skript is now working as it was originally planed.

   Greetings
   Mark

   Gesendet: Montag, 30. Juni 2014 um 13:06 Uhr
   Von: "Simon Blomberg" <s.blomberg1 at uq.edu.au>
   An: "Mark Christjani" <m_christjani at gmx.de>
   Cc: "r-help at r-project.org" <r-help at r-project.org>
   Betreff: Re: Aw: Re: [R] Population growthrate with Euler-Lotka
   Hmm. Try setting extendInt="yes" in the call to uniroot. You should also
   look at the help page for uniroot. help(uniroot) May give you a clue. It's
   difficult for me to debug code on my iphone. Well, more difficult than
   usual.

   Best,

   Simon.
   Sent from my iPhone
   On 30 Jun 2014, at 8:53 pm, "Mark Christjani" <[1]m_christjani at gmx.de>
   wrote:

   Thank you, Simon, for your input.

   Data import works fine now, but the final equation still won`t work.

   Console reads now:

   > setwd("c:/Mark")
   >
   > table <- read.table("r-TCO-Scene-Kontrolle.csv", header=TRUE, sep=";")
   >
   > table
       x  lx  mx
   1   1 1.0 0.0
   2   2 1.0 0.0
   3   3 1.0 0.0
   4   4 1.0 0.0
   5   5 1.0 0.0
   6   6 1.0 0.0
   7   7 1.0 0.0
   8   8 1.0 0.0
   9   9 1.0 0.0
   10 10 1.0 0.0
   11 11 0.2 3.5
   >
   > x <- c(table$x)
   > L <- c(table$lx)
   > m <- c(table$mx)
   > r.range<- c(0, 5)
   >
   > eulerlotka <- function(r) sum(L * m * exp(-r * x)) - 1
   > res <- uniroot(f = eulerlotka, interval = r.range, tol = 1e-8)
   Error in uniroot(f = eulerlotka, interval = r.range, tol = 1e-08) :
     f() values at end points not of opposite sign
   >
   > res$root
   Error: object 'res' not found

   Any idea on this "Error in uniroot(f = eulerlotka, interval = r.range, tol =
   1e-08) :
     f() values at end points not of opposite sign"-matter?

   Kind regards,
   Mark



   Gesendet: Montag, 30. Juni 2014 um 12:41 Uhr
   Von: "Simon Blomberg" <[2]s.blomberg1 at uq.edu.au>
   An: "Mark Christjani" <[3]m_christjani at gmx.de>
   Cc: "[4]r-help at r-project.org" <[5]r-help at r-project.org>
   Betreff: Re: [R] Population growthrate with Euler-Lotka
   Your script is failing at the first hurdle because you data are not being
   imported properly. You should include
   header=TRUE. sep=";"
   In the call to read.table.
   Cheers.
   Simon.
   Sent from my iPhone
   Sent from my iPhone
   > On 30 Jun 2014, at 7:10 pm, "Mark Christjani" <[6]m_christjani at gmx.de>
   wrote:
   >
   >
   > Hi everybody,
   >
   >  I`m  Mark  and I do my PhD in biology. I try using R to calculate a
   population
   > growth rate of animals grown on different types of food. Our workgroup has
   a
   > R-skript to do so, but sadly nobody, who knows how this works. I`ve never
   > used R before, but got some stuff figured out myself. The skript goes:
   >
   > setwd("c:/Mark")
   > table <- read.table("r-TCO-Scene-Kontrolle.csv")
   > table
   > x <- c(table$x)
   > L <- c(table$lx)
   > m <- c(table$mx)
   > r.range<- c(0, 5)
   > eulerlotka <- function(r) sum(L * m * exp(-r * x)) - 1
   > res <- uniroot(f = eulerlotka, interval = r.range, tol = 1e-8)
   > res$root
   >
   > I understood that the first 3 lines are simply to load my data and show it
   > in the workspace console. The next 4 lines define variables of my .csv
   table
   >  for  R.  Thus far, everything works fine. Now comes the Euler-Lotka
   equation,
   > but somehow, this does not seem to work out as supposed. I tried to find a
   > solution on the internet, but I think this formula is somewhat special so
   I
   > could not find a suitible solution for my special problem. The console
   says:
   >
   >
   >> setwd("c:/Mark")
   >>
   >> table <- read.table("r-TCO-Scene-Kontrolle.csv")
   >>
   >> table
   > V1
   > 1 x;lx;mx
   > 2 1;1;0
   > 3 2;1;0
   > 4 3;1;0
   > 5 4;1;0
   > 6 5;1;0
   > 7 6;1;0
   > 8 7;1;0
   > 9 8;1;0
   > 10 9;1;0
   > 11 10;1;0
   > 12 11;0.2;3.5
   >>
   >> x <- c(table$x)
   >> L <- c(table$lx)
   >> m <- c(table$mx)
   >> r.range<- c(0, 5)
   >>
   >> eulerlotka <- function(r) sum(L * m * exp(-r * x)) - 1
   >> res <- uniroot(f = eulerlotka, interval = r.range, tol = 1e-8)
   > Error in uniroot(f = eulerlotka, interval = r.range, tol = 1e-08) :
   > f() values at end points not of opposite sign
   >>
   >> res$root
   >
   > Does anybody have an idea how to get this running?
   >
   > Thanks in advance
   >
   > Kind regards
   > Mark
   > ______________________________________________
   > [7]R-help at r-project.org mailing list
   > [8]https://stat.ethz.ch/mailman/listinfo/r-help
   > PLEASE do read the posting guide
   [9]http://www.R-project.org/posting-guide.html
   > and provide commented, minimal, self-contained, reproducible code.

References

   1. file://localhost/tmp/m_christjani at gmx.de
   2. file://localhost/tmp/s.blomberg1 at uq.edu.au
   3. file://localhost/tmp/m_christjani at gmx.de
   4. file://localhost/tmp/r-help at r-project.org
   5. file://localhost/tmp/r-help at r-project.org
   6. file://localhost/tmp/m_christjani at gmx.de
   7. file://localhost/tmp/R-help at r-project.org
   8. https://stat.ethz.ch/mailman/listinfo/r-help
   9. http://www.R-project.org/posting-guide.html

From baccts at hotmail.com  Mon Jun 30 16:00:49 2014
From: baccts at hotmail.com (C Lin)
Date: Mon, 30 Jun 2014 10:00:49 -0400
Subject: [R] regular expression help
In-Reply-To: <CAF8bMcYfSV_+fgwHEAsYsOPVVrET-c2Z3AOac2kyDtEao65A1g@mail.gmail.com>
References: <COL129-W77308B84F4C44D6A25457ACB1B0@phx.gbl>
	<002501cf91a3$0d311150$279333f0$@bigpond.com>,
	<COL129-W955C4F549F251ECEC73BD1CB1B0@phx.gbl>
	<A0BDC150-62E3-4E53-9C24-693DA5C88E56@comcast.net>,
	<CAF8bMcbyU4Ew-E0nJ2P1VtaCZELQV50j73JvFWtzeSn8uS66pg@mail.gmail.com>
	<COL129-W288460DAAE75B85CB055C8CB1B0@phx.gbl>,
	<CAF8bMcYfSV_+fgwHEAsYsOPVVrET-c2Z3AOac2kyDtEao65A1g@mail.gmail.com>
Message-ID: <COL129-W82F212DCEC155A93CAE48FCB040@phx.gbl>

Hi, Bill

Thank you so much for your kind explanation. It's very clear too for someone like me.
I should've remember this but somehow forgot that [] have a special meaning in regular expression.

Lin

----------------------------------------
> From: wdunlap at tibco.com
> Date: Sun, 29 Jun 2014 13:16:26 -0700
> Subject: Re: [R] regular expression help
> To: baccts at hotmail.com
> CC: dwinsemius at comcast.net; r-help at r-project.org
>
>> what's the difference between [:space:]+ and[[:space:]]+ ?
>
> The pattern '[:space:]' matches any of ':', 's', 'p', 'a', 'c', and
> 'e' (the second colon is superfluous). I.e., it has no magic meaning.
> Inside of [] it does have a special meaning.
>
> The pattern '[[:space:]]' matches a space, a newline, and other
> whitespace characters. The pattern '[a-c[:space:]z[:digit:]]' matches
> 'a', 'b', 'c', any decimal digit, and any whitespace character.
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
>
>
> On Fri, Jun 27, 2014 at 6:27 AM, C Lin <baccts at hotmail.com> wrote:
>> Thank you all for your help.
>>
>> Bill, thanks for making it compact and I did mean any amount of whitespace.
>>
>> To break it down, so I know why this pattern work:
>> The first parenthesis means that before AARSD1 it can be
>> ^: begins with nothing
>> |: or
>> //: double slash or
>> [[:space:]]+: one or more whitespace character
>>
>> For the second parenthesis:
>> $: ending with nothing
>>
>> Do this sound correct?
>>
>> I missed the fact that I need the ^ and $ and I always do [:space:]+ instead of [[:space:]]+
>> what's the difference between [:space:]+ and[[:space:]]+ ?
>>
>> Thanks so much!
>> Lin
>>
>> ----------------------------------------
>>> From: wdunlap at tibco.com
>>> Date: Fri, 27 Jun 2014 02:35:54 -0700
>>> Subject: Re: [R] regular expression help
>>> To: dwinsemius at comcast.net
>>> CC: baccts at hotmail.com; r-help at r-project.org
>>>
>>> You can use parentheses to factor out the common string in David's
>>> pattern, as in
>>> grep(value=TRUE, "(^|//|[[:space:]]+)AARSD1($|//|[[:space:]]+)", test)
>>>
>>> (By 'whitespace' I could not tell if you meant any amount of
>>> whitespace or a single
>>> whitespace character. I use '+' to match one or more whitespace characters.)
>>>
>>> Bill Dunlap
>>> TIBCO Software
>>> wdunlap tibco.com
>>>
>>>
>>> On Thu, Jun 26, 2014 at 10:12 PM, David Winsemius
>>> <dwinsemius at comcast.net> wrote:
>>>>
>>>> On Jun 26, 2014, at 6:11 PM, C Lin wrote:
>>>>
>>>>> Hi Duncan,
>>>>>
>>>>> Thanks for trying to help. Sorry for not being clear.
>>>>> The string I'd like to get is 'AARSD1'
>>>>> It can be followed or preceded by white space or // or nothing
>>>>>
>>>>> so, from test <- c('AARSD11','AARSD1-','AARSD1//','AARSD1 //','//AARSD1','AARSD1');
>>>>>
>>>>> I want to match only 'AARSD1//','AARSD1 //','//AARSD1','AARSD1'
>>>>
>>>> Perhaps you want jsut
>>>>
>>>> grepl('^AARSD1//$|^AARSD1 //$|^//AARSD1$|^AARSD1', test)
>>>>
>>>>> grepl('^AARSD1//$|^AARSD1 //$|^//AARSD1$|^AARSD1$', test)
>>>> [1] FALSE FALSE TRUE TRUE TRUE TRUE
>>>>
>>>> --
>>>> David.
>>>>
>>>>>
>>>>
>>>>> Thanks,
>>>>> Lin
>>>>>
>>>>> ----------------------------------------
>>>>>> From: dulcalma at bigpond.com
>>>>>> To: baccts at hotmail.com; r-help at r-project.org
>>>>>> Subject: RE: [R] regular expression help
>>>>>> Date: Fri, 27 Jun 2014 10:59:29 +1000
>>>>>>
>>>>>> Hi
>>>>>>
>>>>>> You only have a vector of length 5 and I am not quite sure of the string you
>>>>>> are testing
>>>>>> so try this
>>>>>>
>>>>>> grep('[/]*\\<AARSD1\\>[/]*',test)
>>>>>>
>>>>>> Duncan
>>>>>>
>>>>>> Duncan Mackay
>>>>>> Department of Agronomy and Soil Science
>>>>>> University of New England
>>>>>> Armidale NSW 2351
>>>>>> Email: home: mackay at northnet.com.au
>>>>>>
>>>>>> -----Original Message-----
>>>>>> From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On
>>>>>> Behalf Of C Lin
>>>>>> Sent: Friday, 27 June 2014 10:05
>>>>>> To: r-help at r-project.org
>>>>>> Subject: [R] regular expression help
>>>>>>
>>>>>> Dear R users,
>>>>>>
>>>>>> I need to match a string. It can be followed or preceded by whitespace or //
>>>>>> or nothing.
>>>>>> How do I code it in R?
>>>>>>
>>>>>> For example:
>>>>>> test <- c('AARSD11','AARSD1-','AARSD1//','AARSD1 //','//AARSD1');
>>>>>> grep('AARSD1(\\s*//*)',test);
>>>>>>
>>>>>> should return 3,4,5 and 6.
>>>>>>
>>>>>
>>>>
>>>>
>>>> David Winsemius
>>>> Alameda, CA, USA
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>
 		 	   		  

From jdnewmil at dcn.davis.CA.us  Mon Jun 30 16:15:18 2014
From: jdnewmil at dcn.davis.CA.us (Jeff Newmiller)
Date: Mon, 30 Jun 2014 07:15:18 -0700
Subject: [R] yet another regular expression
In-Reply-To: <2310760.RmipCVWQby@localhost.localdomain>
References: <2310760.RmipCVWQby@localhost.localdomain>
Message-ID: <e7a31731-2187-4aa8-aeb1-3f2474c55582@email.android.com>

If everything Regular Expressions could do could be done with globbing then RE would likely not exist.

I have interpreted your problem as:

Start at the beginning of the string ("^")
match stuff that is not a colon ("[^:]")
match a colon (":')
keep stuff that is not a comma ("([^,]*)")
match a comma (",")
keep stuff that is not a right brace ("([^}]*)")
match a right brace and comma ("},")
match any characters (".*")
up to the end of the string ("$")

and then substitute that whole matched string with

the first kept match ("\\1")
a comma (",")
the second kept match ("\\2")

which gives

sub("^[^:]*:([^,]*),[^:]*:([^}]*)},.*$","\\1,\\2",initString)

The separator comma could be wrapped with the first and second kept matches in this case to make a single kept match.. I was just methodically working my way through your pattern finding pieces of interest.
---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                      Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
--------------------------------------------------------------------------- 
Sent from my phone. Please excuse my brevity.

On June 30, 2014 6:13:18 AM PDT, Jim Lemon <jim at bitwrit.com.au> wrote:
>Hi all,
>I have managed, with the help of glob2rx() to get two parts of a text 
>manipulation working. I have successfully gotten rid of the first and 
>second bits, but I have hit the wall trying to get rid of the last bit.
>Here's 
>an example:
>
>initString<-
> "\"Delete this\":value1,\"Delete this too\":value2},Delete last bit"
>sub("\"Delete this too\":","",
> sub(glob2rx("*this\":*"),"",initString),fixed=TRUE)
>
>This gives me:
>
>[1] "value1,value2},Delete last bit"
>
>and glob2rx("},*") just won't get rid of the last bit. I throw myself
>upon 
>the mercy of the regular expression gurus.
>
>Jim
>
>______________________________________________
>R-help at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From dulcalma at bigpond.com  Mon Jun 30 16:15:49 2014
From: dulcalma at bigpond.com (Duncan Mackay)
Date: Tue, 1 Jul 2014 00:15:49 +1000
Subject: [R] yet another regular expression
In-Reply-To: <2310760.RmipCVWQby@localhost.localdomain>
References: <2310760.RmipCVWQby@localhost.localdomain>
Message-ID: <000c01cf946d$cbae7d30$630b7790$@bigpond.com>

Hi Jim

What about trying to use what you want to keep

m=gregexpr('\\":value[12]+[}]?,', initString)
regmatches(initString, m)
[[1]]
[1] "\":value1,"  "\":value2},"

Duncan

Duncan Mackay
Department of Agronomy and Soil Science
University of New England
Armidale NSW 2351
Email: home: mackay at northnet.com.au

-----Original Message-----
From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On
Behalf Of Jim Lemon
Sent: Monday, 30 June 2014 23:13
To: r-help at r-project.org
Subject: [R] yet another regular expression

Hi all,
I have managed, with the help of glob2rx() to get two parts of a text 
manipulation working. I have successfully gotten rid of the first and 
second bits, but I have hit the wall trying to get rid of the last bit.
Here's 
an example:

initString<-
 "\"Delete this\":value1,\"Delete this too\":value2},Delete last bit"
sub("\"Delete this too\":","",
 sub(glob2rx("*this\":*"),"",initString),fixed=TRUE)

This gives me:

[1] "value1,value2},Delete last bit"

and glob2rx("},*") just won't get rid of the last bit. I throw myself upon 
the mercy of the regular expression gurus.

Jim

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From irasharenow100 at yahoo.com  Mon Jun 30 16:39:25 2014
From: irasharenow100 at yahoo.com (Ira Sharenow)
Date: Mon, 30 Jun 2014 07:39:25 -0700
Subject: [R] Change database in SQL Server using RODBC
In-Reply-To: <CALhdq6tAaR-96MevVZuj5Tjvj3vj_Uu1dRP3w72ywzkNK58brA@mail.gmail.com>
References: <53B0C10C.7030606@yahoo.com>
	<CALhdq6tAaR-96MevVZuj5Tjvj3vj_Uu1dRP3w72ywzkNK58brA@mail.gmail.com>
Message-ID: <53B1769D.60508@yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140630/0e12c593/attachment.pl>

From jdnewmil at dcn.davis.CA.us  Mon Jun 30 17:17:06 2014
From: jdnewmil at dcn.davis.CA.us (Jeff Newmiller)
Date: Mon, 30 Jun 2014 08:17:06 -0700
Subject: [R] Change database in SQL Server using RODBC
In-Reply-To: <53B1769D.60508@yahoo.com>
References: <53B0C10C.7030606@yahoo.com>
	<CALhdq6tAaR-96MevVZuj5Tjvj3vj_Uu1dRP3w72ywzkNK58brA@mail.gmail.com>
	<53B1769D.60508@yahoo.com>
Message-ID: <687bd15e-8085-4a18-80d1-f1d41dc7fd30@email.android.com>

Please post here using the plain text option in your email software because the HTML is not coming through undamaged.

The first argument to the odbcConnect function is never SQL syntax... for SQL Server it is always a "Data Source Name" (DSN) that has been predefined in the ODBC administration tool (control panel on Windows).

If the databases you are trying to access are managed by the same server and your authentication gives you access to all the databases and tables that you need access to, then you can construct SQL queries that refer to other tables in other databases on that server using the "dot" notation mentioned by Peter, and pass all those queries through the same DSN.

Something like

library(RODBC)
con <- odbcConnect("SQLServer2012")
orders1 <- sqlFetch(con,"sportsDB.dbo.sports")
odbcClose(con)
---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                      Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
--------------------------------------------------------------------------- 
Sent from my phone. Please excuse my brevity.

On June 30, 2014 7:39:25 AM PDT, Ira Sharenow <irasharenow100 at yahoo.com> wrote:
>Thanks for everyone???s feedback.
>
>library(RODBC)
>
>con = odbcConnect("SQLServer2012")
>
>orders1 = sqlFetch(con,"dbo.orders")
>
>odbcClose(con)
>
>Allowed me to close the connection properly. Thanks.
>
>However, I still cannot figure out how to connect to the second
>database 
>and table.
>
>library(RODBC)
>
>>con2 = odbcConnect("[sportsDB].dbo.sports")
>
>Warning messages:
>
>1: In odbcDriverConnect("DSN=[sportsDB].dbo.sports") :
>
>[RODBC] ERROR: state IM002, code 0, message [Microsoft][ODBC Driver
>Manager] Data source name not found and no default driver specified
>
>2: In odbcDriverConnect("DSN=[sportsDB].dbo.sports") :
>
>   ODBC connection failed
>
>>con2 = odbcConnect("[sportsDB].[dbo].sports")
>
>Warning messages:
>
>1: In odbcDriverConnect("DSN=[sportsDB].[dbo].sports") :
>
>[RODBC] ERROR: state IM002, code 0, message [Microsoft][ODBC Driver
>Manager] Data source name not found and no default driver specified
>
>2: In odbcDriverConnect("DSN=[sportsDB].[dbo].sports") :
>
>   ODBC connection failed
>
>>con2 = odbcConnect("[sportsDB].[dbo].[sports]")
>
>Warning messages:
>
>1: In odbcDriverConnect("DSN=[sportsDB].[dbo].[sports]") :
>
>[RODBC] ERROR: state IM002, code 0, message [Microsoft][ODBC Driver
>Manager] Data source name not found and no default driver specified
>
>2: In odbcDriverConnect("DSN=[sportsDB].[dbo].[sports]") :
>
>   ODBC connection failed
>
>>con3 = odbcConnect("SQLServer2012")
>
>>orders3 =   sqlFetch(con3, "sportsDB.dbo.sports")
>
>Error in odbcTableExists(channel, sqtable) :
>
>   ???sportsDB.dbo.sports???: table not found on channel
>
>On 6/30/2014 1:34 AM, Peter Crowther wrote:
>> On 30 June 2014 02:44, Ira Sharenow <irasharenow100 at yahoo.com> wrote:
>>> I wish to query tables that are NOT in the default SQL Server 2012
>database.
>>> Now for the problem. I also want to read in the table dbo.sports.
>That
>>> table is in the database sportsDB. I did not see any way to do so
>from
>>> within R.
>> Can you not use sportsDB.dbo.sports to reference the table?
>>
>> In general, table reference syntax is [ [ [ serverName '.' ]
>> databaseName '.' ] [schema ] '.' ] tableName, where the names need
>> only be surrounded by [...] if they are not valid SQL Server
>> identifiers.  Many people may suggest you reference
>> [sportsDB].[dbo].[sports]; this is unnecessary verbiage.
>>
>> Cheers,
>>
>> - Peter
>>
>
>
>	[[alternative HTML version deleted]]
>
>
>
>------------------------------------------------------------------------
>
>______________________________________________
>R-help at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From frtog at vestas.com  Mon Jun 30 17:17:17 2014
From: frtog at vestas.com (=?utf-8?B?RnJlZGUgQWFrbWFubiBUw7hnZXJzZW4=?=)
Date: Mon, 30 Jun 2014 17:17:17 +0200
Subject: [R] Change database in SQL Server using RODBC
Message-ID: <8mvdhga0jryarb1s4x8lyhi4.1404141433891@email.android.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140630/7b15e58a/attachment.pl>

From dcarlson at tamu.edu  Mon Jun 30 17:48:15 2014
From: dcarlson at tamu.edu (David L Carlson)
Date: Mon, 30 Jun 2014 15:48:15 +0000
Subject: [R] A Question about read.table and Data Frames in R
In-Reply-To: <DD6BC071-B7B2-44E2-966D-76229B62F45E@comcast.net>
References: <53B09199.5000500@comcast.net>
	<DD6BC071-B7B2-44E2-966D-76229B62F45E@comcast.net>
Message-ID: <53BF8FB63FAF2E4A9455EF1EE94DA726F7AB40@mb02.ads.tamu.edu>

You are also missing the fact that loops are often not required in R. In this case print() has a method for printing data frames and that method is automatically used when you simply type the data.frame name or if you explicitly call it with print(stockList):

> stockList <- read.table(text="symbol,shares
+ XOM,1000
+ APA,400
+ CVX,200", header = T, sep=",")
> 
> stockList
  symbol shares
1    XOM   1000
2    APA    400
3    CVX    200

You will save yourself hours of frustration by reading some of the official and unofficial documentation for R:

http://cran.r-project.org/manuals.html
http://www.r-project.org/other-docs.html
http://cran.r-project.org/other-docs.html

David Carlson

-----Original Message-----
From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On Behalf Of David Winsemius
Sent: Sunday, June 29, 2014 5:58 PM
To: Robert Sherry
Cc: r-help at r-project.org
Subject: Re: [R] A Question about read.table and Data Frames in R


On Jun 29, 2014, at 3:22 PM, Robert Sherry wrote:

> I created the following file:
>
> symbol,shares
> XOM,1000
> APA,400
> CVX,200
>
> I then read the file in R using the command:
> 	stockList=read.table("/NotesOnR/stockList", header = T, sep=",")
>
> I would then expect the following expression to evaluate to the simple
> string APA:
> 	stockList$symbol[2]
> However when I type that in on the command line, I get:
> [1] APA
> Levels: APA CVX XOM
>
> I would also expect to be able to print out the table by using the  
> command:
> 	for( i in 1:3 ) {
> 		print( stockList$symbol[i] )
> 		print ( stockList$shares[i] )
> 	}
>
> However, as part of the output I get:
> 	Levels: APA CVX XOM
> I do not understand what is going on. Also, when I try passing the
> expression stockList$symbol to a standard function in R, it does not  
> work.
>
> I think that I am missing something here but I am not sure what I am
> missing.

You are missing the fact that a factor variable was created. If you  
had added stringsAsFactors=FALSE to your read.table code, you would  
ahve gotten what you expected.


> Should I be writing code like:
> 	for  ( i in stockList$smybol )
> However,  given the symbol, I am not sure how to get the share count  
> that is
> in the same row.
>
> I thank the group in advance for their responses.
>
> Bob
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

David Winsemius, MD
Alameda, CA, USA

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From davies.trevor at gmail.com  Mon Jun 30 18:31:49 2014
From: davies.trevor at gmail.com (Trevor Davies)
Date: Mon, 30 Jun 2014 09:31:49 -0700
Subject: [R] Delaunay triangles with LONG/LAT + biomass
Message-ID: <CAJhyqVj1EC+eE3ES4RDiLomJ+peA9VfKf689hq0gbxzCz5dLkA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140630/a4e61035/attachment.pl>

From aguitatierra at hotmail.com  Mon Jun 30 19:23:54 2014
From: aguitatierra at hotmail.com (Bea GD)
Date: Mon, 30 Jun 2014 19:23:54 +0200
Subject: [R] How to plot individual pdf files for each wrapped plot with
	ggplot2?
Message-ID: <BLU436-SMTP121608CDBA28619BD233D71D9040@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140630/8d956842/attachment.pl>

From 538280 at gmail.com  Mon Jun 30 19:24:21 2014
From: 538280 at gmail.com (Greg Snow)
Date: Mon, 30 Jun 2014 11:24:21 -0600
Subject: [R] mixing grid and traditional graphics
In-Reply-To: <53B0A7B9.2000500@structuremonitoring.com>
References: <53B0A7B9.2000500@structuremonitoring.com>
Message-ID: <CAFEqCdx=jyyvn8tfyk7_EysdXBkpgYqbTcqhOspeVSVmqwNvqw@mail.gmail.com>

If you really want to mix base and grid graphics (they don't play
nicely together as you have noticed) then you should really use the
gridBase package.  There is at least one package for doing maps using
grid (ggmap or ggMaps or something similar) and there is the regular
text function for adding text to a base graph, either of those may be
easier than mixing.

Since you are plotting the map after the text, whether the text is
visible or not depends on the background drawn for the map, I expect
that this differs for the different devices.  Would you be surprised
if you wrote some text on a piece of paper, then layed a paper map
over the top and could not read the paper?  If you want the text
visible on top of the map, do the text after the map.

On Sun, Jun 29, 2014 at 5:56 PM, Spencer Graves
<spencer.graves at structuremonitoring.com> wrote:
>       I'm confused with the results I'm getting from mixing grid and
> traditional graphics.  A toy example appears below:  The png file created by
> gridFn() shows "a label" over Africa, as expected. However, when run
> interactively, "a label" appears for roughly half a second, then disappears.
>
>
>       Can someone explain these results?
>
>
>       Thanks,
>       Spencer
>
>
> gridFn <- function(){
>   pushViewport(plotViewport())
>   grid.text(label='a label')
>   popViewport()
>   map()
> }
>
> library(grid)
> library(maps)
> gridFn()
>
> png('gridTst.png')
> gridFn()
> dev.off()
>
>
>> sessionInfo()
> R version 3.1.0 (2014-04-10)
> Platform: i386-w64-mingw32/i386 (32-bit)
>
> locale:
> [1] LC_COLLATE=English_United States.1252
> [2] LC_CTYPE=English_United States.1252
> [3] LC_MONETARY=English_United States.1252
> [4] LC_NUMERIC=C
> [5] LC_TIME=English_United States.1252
>
> attached base packages:
> [1] grid      stats     graphics  grDevices utils     datasets methods
> [8] base
>
> other attached packages:
> [1] maps_2.3-7
>
> loaded via a namespace (and not attached):
> [1] tools_3.1.0
>>
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com


From davies.trevor at gmail.com  Mon Jun 30 19:35:29 2014
From: davies.trevor at gmail.com (Trevor Davies)
Date: Mon, 30 Jun 2014 10:35:29 -0700
Subject: [R] How to plot individual pdf files for each wrapped plot with
	ggplot2?
In-Reply-To: <BLU436-SMTP121608CDBA28619BD233D71D9040@phx.gbl>
References: <BLU436-SMTP121608CDBA28619BD233D71D9040@phx.gbl>
Message-ID: <CAJhyqVjG2Vq-D42rLUNm5EbXkRzmCdS5QKUqGSks=Sni4EBmdQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140630/6c1c024f/attachment.pl>

From arrayprofile at yahoo.com  Mon Jun 30 19:46:18 2014
From: arrayprofile at yahoo.com (array chip)
Date: Mon, 30 Jun 2014 10:46:18 -0700
Subject: [R] standard error of survfit.coxph()
In-Reply-To: <d46aec$hjjlg2@ironport9.mayo.edu>
References: <mailman.25.1403949609.14791.r-help@r-project.org>
	<d46aec$hjjlg2@ironport9.mayo.edu>
Message-ID: <1404150378.93588.YahooMailNeo@web122902.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140630/043228b4/attachment.pl>

From spencer.graves at structuremonitoring.com  Mon Jun 30 20:54:33 2014
From: spencer.graves at structuremonitoring.com (Spencer Graves)
Date: Mon, 30 Jun 2014 11:54:33 -0700
Subject: [R] mixing grid and traditional graphics
In-Reply-To: <CAFEqCdx=jyyvn8tfyk7_EysdXBkpgYqbTcqhOspeVSVmqwNvqw@mail.gmail.com>
References: <53B0A7B9.2000500@structuremonitoring.com>
	<CAFEqCdx=jyyvn8tfyk7_EysdXBkpgYqbTcqhOspeVSVmqwNvqw@mail.gmail.com>
Message-ID: <53B1B269.5040105@structuremonitoring.com>

Hi, Greg:  Thanks.  Just what I asked. Spencer


On 6/30/2014 10:24 AM, Greg Snow wrote:
> If you really want to mix base and grid graphics (they don't play
> nicely together as you have noticed) then you should really use the
> gridBase package.  There is at least one package for doing maps using
> grid (ggmap or ggMaps or something similar) and there is the regular
> text function for adding text to a base graph, either of those may be
> easier than mixing.
>
> Since you are plotting the map after the text, whether the text is
> visible or not depends on the background drawn for the map, I expect
> that this differs for the different devices.  Would you be surprised
> if you wrote some text on a piece of paper, then layed a paper map
> over the top and could not read the paper?  If you want the text
> visible on top of the map, do the text after the map.
>
> On Sun, Jun 29, 2014 at 5:56 PM, Spencer Graves
> <spencer.graves at structuremonitoring.com> wrote:
>>        I'm confused with the results I'm getting from mixing grid and
>> traditional graphics.  A toy example appears below:  The png file created by
>> gridFn() shows "a label" over Africa, as expected. However, when run
>> interactively, "a label" appears for roughly half a second, then disappears.
>>
>>
>>        Can someone explain these results?
>>
>>
>>        Thanks,
>>        Spencer
>>
>>
>> gridFn <- function(){
>>    pushViewport(plotViewport())
>>    grid.text(label='a label')
>>    popViewport()
>>    map()
>> }
>>
>> library(grid)
>> library(maps)
>> gridFn()
>>
>> png('gridTst.png')
>> gridFn()
>> dev.off()
>>
>>
>>> sessionInfo()
>> R version 3.1.0 (2014-04-10)
>> Platform: i386-w64-mingw32/i386 (32-bit)
>>
>> locale:
>> [1] LC_COLLATE=English_United States.1252
>> [2] LC_CTYPE=English_United States.1252
>> [3] LC_MONETARY=English_United States.1252
>> [4] LC_NUMERIC=C
>> [5] LC_TIME=English_United States.1252
>>
>> attached base packages:
>> [1] grid      stats     graphics  grDevices utils     datasets methods
>> [8] base
>>
>> other attached packages:
>> [1] maps_2.3-7
>>
>> loaded via a namespace (and not attached):
>> [1] tools_3.1.0
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From macqueen1 at llnl.gov  Mon Jun 30 21:32:42 2014
From: macqueen1 at llnl.gov (MacQueen, Don)
Date: Mon, 30 Jun 2014 19:32:42 +0000
Subject: [R] Delaunay triangles with LONG/LAT + biomass
In-Reply-To: <CAJhyqVj1EC+eE3ES4RDiLomJ+peA9VfKf689hq0gbxzCz5dLkA@mail.gmail.com>
References: <CAJhyqVj1EC+eE3ES4RDiLomJ+peA9VfKf689hq0gbxzCz5dLkA@mail.gmail.com>
Message-ID: <CFD70714.FF961%macqueen1@llnl.gov>

One place to start would be the "Spatial" task view on CRAN.
The other would be to ask on R-sig-geo, where people who specialize in
spatial data "hang out".

Delaunay triangulation is available in several packages. A simple search
for "delaunay" on the CRAN packages page will easily find at least one.
You will also need the sp package for sure.

Assigning a value to each triangle may or may not be easy, it will depend,
probably among other things, on the data structure returned by whatever
function you end up using to create the triangles.

Based on a quick look at your acon web page, you might be happy with
   akima::interp   Gridded Bivariate Interpolation for Irregular Data

-Don

-- 
Don MacQueen

Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062





On 6/30/14 9:31 AM, "Trevor Davies" <davies.trevor at gmail.com> wrote:

>Hello,
>
>I was hoping someone could point me in the direction towards a package
>where I can use delaunay triangulation to create a polygon set where the
>inside of the triangles are tagged with an estimate of a mean value of the
>points making up the points of the triangle.  This is fisheries trawl data
>if that helps add context.
>
>For those familiar with the system, it's to make plots similar to those
>made by the Dept of Fisheries and Oceans Canada in ACON (which has now
>stopped being maintained).  Although freely available, I'm on a mac and it
>would be nice to just get it sorted out in R going forward.
>
>Ref here:
>http://www2.mar.dfo-mpo.gc.ca/science/acon/Examples/ShadedContours.html
>
>Thanks for the help.
>Cheers,
>Trevor
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From smartpink111 at yahoo.com  Mon Jun 30 17:47:06 2014
From: smartpink111 at yahoo.com (arun)
Date: Mon, 30 Jun 2014 08:47:06 -0700
Subject: [R] yet another regular expression
In-Reply-To: <2310760.RmipCVWQby@localhost.localdomain>
References: <2310760.RmipCVWQby@localhost.localdomain>
Message-ID: <1404143226.70312.YahooMailNeo@web142602.mail.bf1.yahoo.com>

Hi Jim,
May be this helps:

library(stringr)
paste(str_extract_all(initString, perl('(?<=\\:)[[:alnum:]]+,?'))[[1]],collapse="")
#[1] "value1,value2"
A.K.




On Monday, June 30, 2014 9:58 AM, Jim Lemon <jim at bitwrit.com.au> wrote:
Hi all,
I have managed, with the help of glob2rx() to get two parts of a text 
manipulation working. I have successfully gotten rid of the first and 
second bits, but I have hit the wall trying to get rid of the last bit. Here's 
an example:

initString<-
"\"Delete this\":value1,\"Delete this too\":value2},Delete last bit"
sub("\"Delete this too\":","",
sub(glob2rx("*this\":*"),"",initString),fixed=TRUE)

This gives me:

[1] "value1,value2},Delete last bit"

and glob2rx("},*") just won't get rid of the last bit. I throw myself upon 
the mercy of the regular expression gurus.

Jim

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From ishaqbaba at yahoo.com  Mon Jun 30 17:27:38 2014
From: ishaqbaba at yahoo.com (IZHAK shabsogh)
Date: Mon, 30 Jun 2014 08:27:38 -0700
Subject: [R] matrix
Message-ID: <1404142058.68911.YahooMailNeo@web142506.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140630/8ab00e23/attachment.pl>

From jacksonmrodrigues at gmail.com  Mon Jun 30 16:03:27 2014
From: jacksonmrodrigues at gmail.com (Jackson Rodrigues)
Date: Mon, 30 Jun 2014 16:03:27 +0200
Subject: [R] How to combine/join/merge etc PCA and Cluster?
Message-ID: <CAPL76w_9YYRnfxnDF7_UOwMMPCgZXmB+WmGZsWnhR5BPrZ2wqQ@mail.gmail.com>

Um texto embutido e sem conjunto de caracteres especificado foi limpo...
Nome: n?o dispon?vel
Url: <https://stat.ethz.ch/pipermail/r-help/attachments/20140630/00de9e6a/attachment.pl>

From johnson.cheryl625 at gmail.com  Mon Jun 30 19:56:11 2014
From: johnson.cheryl625 at gmail.com (Cheryl Johnson)
Date: Mon, 30 Jun 2014 13:56:11 -0400
Subject: [R] R Console Output
Message-ID: <CAJJ9dtt-AZkRyHh_2yKOFkcUODCD9OOVsZ6H4OTEc_c-ApuyRg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140630/e407686e/attachment.pl>

From jvadams at usgs.gov  Mon Jun 30 22:16:43 2014
From: jvadams at usgs.gov (Adams, Jean)
Date: Mon, 30 Jun 2014 15:16:43 -0500
Subject: [R] matrix
In-Reply-To: <1404142058.68911.YahooMailNeo@web142506.mail.bf1.yahoo.com>
References: <1404142058.68911.YahooMailNeo@web142506.mail.bf1.yahoo.com>
Message-ID: <CAN5YmCGWimAzPCzbvZWj6QUxKwR_Re6NVt1Ydwj+2VMcwQYgqg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140630/9cb45126/attachment.pl>

From jholtman at gmail.com  Mon Jun 30 22:33:09 2014
From: jholtman at gmail.com (jim holtman)
Date: Mon, 30 Jun 2014 13:33:09 -0700
Subject: [R] R Console Output
In-Reply-To: <CAJJ9dtt-AZkRyHh_2yKOFkcUODCD9OOVsZ6H4OTEc_c-ApuyRg@mail.gmail.com>
References: <CAJJ9dtt-AZkRyHh_2yKOFkcUODCD9OOVsZ6H4OTEc_c-ApuyRg@mail.gmail.com>
Message-ID: <CAAxdm-4XcOr-6OYghOhCu0ibQ=_ac6ZAzN2-kXLLgbyW-rNySQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140630/2864d7df/attachment.pl>

From dcarlson at tamu.edu  Mon Jun 30 23:46:50 2014
From: dcarlson at tamu.edu (David L Carlson)
Date: Mon, 30 Jun 2014 21:46:50 +0000
Subject: [R] How to combine/join/merge etc PCA and Cluster?
In-Reply-To: <CAPL76w_9YYRnfxnDF7_UOwMMPCgZXmB+WmGZsWnhR5BPrZ2wqQ@mail.gmail.com>
References: <CAPL76w_9YYRnfxnDF7_UOwMMPCgZXmB+WmGZsWnhR5BPrZ2wqQ@mail.gmail.com>
Message-ID: <53BF8FB63FAF2E4A9455EF1EE94DA726F7AE0D@mb02.ads.tamu.edu>

This is a long way from being a reproducible example with no data. You also don't mention that you are using package vegan. I'll use the dune, dune.env data included in that package:

library(vegan)
mydata.pca <- rda(dune)
mydata.w <- hclust(dist(dune), "ward")
plot(mydata.w, hang=-1)
rect.hclust(mydata.w, 5)
gr <- cutree(mydata.w, k=5)
# Don't need grl <- levels(factor(gr))
sit.sc1 <- scores(mydata.pca, display="w", scaling=3)
p <- plot(mydata.pca,  display="wa", scaling=3, type="n",
           main="Mydata PCA and clusters")
# Don't need either abline() functions since plot() adds these.
# symbol = cluster (5 groups), color = Moisture (4 groups)
# Note, pch=16 and pch=19 are the same symbol so you don't want pch=15:19
points(sit.sc1, pch=as.numeric(gr), col=as.numeric(dune.env$Moisture))
# or 
points(sit.sc1, pch=as.numeric(gr)+20, bg=as.numeric(dune.env$Moisture))
# I'll skip the text labels
The legend will be complicated since there are groups*ecosytems combinations.

-------------------------------------
David L Carlson
Department of Anthropology
Texas A&M University
College Station, TX 77840-4352





-----Original Message-----
From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On Behalf Of Jackson Rodrigues
Sent: Monday, June 30, 2014 9:03 AM
To: r-help at r-project.org
Subject: [R] How to combine/join/merge etc PCA and Cluster?

Hello everybody,

I Would like to get some help to plot together, Principal Components
Analysis (PCA) and clusters.
I am handling environmental data from 25 locations spread across 5
different ecosystems.When grouped into 5 clusters, locations from different
ecosystems are arranged in the same group.

So, I want to plot together PCA and Clusters, in a such way that  locations
belonging to the same ecosystem are displayed with the same COLORS, and
locations grouped in the same cluster, have the same SHAPE. For example:
I have 1 site from Savanna and 1 site from Serengeti  that are in the same
cluster, Thus I would like to plot both with different colors blue and
green, respectively due different ecosystem classification and with the
same shape (triangle) because they are in the same group. So, I would have
a cluster with 2 triangles one green and another blue.

How to make this combination?
There is command lines below that I'm using to make my combination, as
presented by Bocard in Numerical Ecology Analysis with R chapter 4 or 5.
with this code, it is possible to join PCA and Cluster however, without
differentiating the colors of each ecosystem.

#PCA
mydata.pca<-rda(mydata)
#Cluster
mydata.w <- hclust(dist(Sqchord.mydata), "ward")
plot(mydata.w, hang=-1)
rect.hclust(mydata.w, 5)

# Cut the dendrogram to yield 5 groups
gr <- cutree(mydata.w, k=5)
grl <- levels(factor(gr))

# Get the site scores, scaling 1
sit.sc1 <- scores(mydata.pca, display="w", scaling=3)

# Plot the sites with cluster symbols and colours (scaling 3)
p <- plot(mydata.pca,  display="wa", scaling=3, type="n",
          main="Mydata PCA and clusters")
abline(v=0, lty="dotted")
abline(h=0, lty="dotted")
for (i in 1:length(grl))
{  points(sit.sc1[gr==i,], pch=(14+i), cex=2.5, col=i+1)}
text(sit.sc1, row.names(Pre_euro_veg.1.all), cex=0.7, pos=3)

# Add legend interactively
legend(locator(1), paste("Cluster", c(1:length(grl))),
pch=14+c(1:length(grl)),
       col=1+c(1:length(grl)), pt.cex=2)

Thank you for any help.

Jackson Rodrigues

	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From dcarlson at tamu.edu  Mon Jun 30 23:50:42 2014
From: dcarlson at tamu.edu (David L Carlson)
Date: Mon, 30 Jun 2014 21:50:42 +0000
Subject: [R] How to combine/join/merge etc PCA and Cluster?
In-Reply-To: <53BF8FB63FAF2E4A9455EF1EE94DA726F7AE0D@mb02.ads.tamu.edu>
References: <CAPL76w_9YYRnfxnDF7_UOwMMPCgZXmB+WmGZsWnhR5BPrZ2wqQ@mail.gmail.com>
	<53BF8FB63FAF2E4A9455EF1EE94DA726F7AE0D@mb02.ads.tamu.edu>
Message-ID: <53BF8FB63FAF2E4A9455EF1EE94DA726F7AE36@mb02.ads.tamu.edu>

Insert

data(dune)
data(dune.env)

after library(vegan)

David C.

-----Original Message-----
From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On Behalf Of David L Carlson
Sent: Monday, June 30, 2014 4:47 PM
To: Jackson Rodrigues; r-help at r-project.org
Subject: Re: [R] How to combine/join/merge etc PCA and Cluster?

This is a long way from being a reproducible example with no data. You also don't mention that you are using package vegan. I'll use the dune, dune.env data included in that package:

library(vegan)
mydata.pca <- rda(dune)
mydata.w <- hclust(dist(dune), "ward")
plot(mydata.w, hang=-1)
rect.hclust(mydata.w, 5)
gr <- cutree(mydata.w, k=5)
# Don't need grl <- levels(factor(gr))
sit.sc1 <- scores(mydata.pca, display="w", scaling=3)
p <- plot(mydata.pca,  display="wa", scaling=3, type="n",
           main="Mydata PCA and clusters")
# Don't need either abline() functions since plot() adds these.
# symbol = cluster (5 groups), color = Moisture (4 groups)
# Note, pch=16 and pch=19 are the same symbol so you don't want pch=15:19
points(sit.sc1, pch=as.numeric(gr), col=as.numeric(dune.env$Moisture))
# or 
points(sit.sc1, pch=as.numeric(gr)+20, bg=as.numeric(dune.env$Moisture))
# I'll skip the text labels
The legend will be complicated since there are groups*ecosytems combinations.

-------------------------------------
David L Carlson
Department of Anthropology
Texas A&M University
College Station, TX 77840-4352





-----Original Message-----
From: r-help-bounces at r-project.org [mailto:r-help-bounces at r-project.org] On Behalf Of Jackson Rodrigues
Sent: Monday, June 30, 2014 9:03 AM
To: r-help at r-project.org
Subject: [R] How to combine/join/merge etc PCA and Cluster?

Hello everybody,

I Would like to get some help to plot together, Principal Components
Analysis (PCA) and clusters.
I am handling environmental data from 25 locations spread across 5
different ecosystems.When grouped into 5 clusters, locations from different
ecosystems are arranged in the same group.

So, I want to plot together PCA and Clusters, in a such way that  locations
belonging to the same ecosystem are displayed with the same COLORS, and
locations grouped in the same cluster, have the same SHAPE. For example:
I have 1 site from Savanna and 1 site from Serengeti  that are in the same
cluster, Thus I would like to plot both with different colors blue and
green, respectively due different ecosystem classification and with the
same shape (triangle) because they are in the same group. So, I would have
a cluster with 2 triangles one green and another blue.

How to make this combination?
There is command lines below that I'm using to make my combination, as
presented by Bocard in Numerical Ecology Analysis with R chapter 4 or 5.
with this code, it is possible to join PCA and Cluster however, without
differentiating the colors of each ecosystem.

#PCA
mydata.pca<-rda(mydata)
#Cluster
mydata.w <- hclust(dist(Sqchord.mydata), "ward")
plot(mydata.w, hang=-1)
rect.hclust(mydata.w, 5)

# Cut the dendrogram to yield 5 groups
gr <- cutree(mydata.w, k=5)
grl <- levels(factor(gr))

# Get the site scores, scaling 1
sit.sc1 <- scores(mydata.pca, display="w", scaling=3)

# Plot the sites with cluster symbols and colours (scaling 3)
p <- plot(mydata.pca,  display="wa", scaling=3, type="n",
          main="Mydata PCA and clusters")
abline(v=0, lty="dotted")
abline(h=0, lty="dotted")
for (i in 1:length(grl))
{  points(sit.sc1[gr==i,], pch=(14+i), cex=2.5, col=i+1)}
text(sit.sc1, row.names(Pre_euro_veg.1.all), cex=0.7, pos=3)

# Add legend interactively
legend(locator(1), paste("Cluster", c(1:length(grl))),
pch=14+c(1:length(grl)),
       col=1+c(1:length(grl)), pt.cex=2)

Thank you for any help.

Jackson Rodrigues

	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From gayonclarke at yahoo.com  Mon Jun 30 22:57:55 2014
From: gayonclarke at yahoo.com (Shanae Clarke)
Date: Mon, 30 Jun 2014 13:57:55 -0700
Subject: [R] Getting data from Table in RStudio
Message-ID: <1404161875.45790.YahooMailNeo@web141403.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20140630/b6af8994/attachment.pl>

From Rob.Calver at tandf.co.uk  Mon Jun 30 13:59:41 2014
From: Rob.Calver at tandf.co.uk (Calver, Rob)
Date: Mon, 30 Jun 2014 11:59:41 +0000
Subject: [R] New editions of R Books from Chapman & Hall/CRC
Message-ID: <68e1e09bd116405a9f387f750d7520f5@DM2PR04MB671.namprd04.prod.outlook.com>

Take advantage of a 20% discount on new editions of the most recent R books from Chapman & Hall/CRC! 

June and July will be very busy for us, with new editions of some of our most popular R books publishing. We are pleased to offer a 20% discount on these titles through our website. To take advantage of this offer, simply visit www.crcpress.com, choose your titles, and insert code AJL01 in the Promotion Code field at checkout. Standard Shipping is always FREE on all orders from CRCPress.com!

***

Linear Models with R, Second Edition
Julian Faraway

ISBN: 978-1-4398-8733-2
Publication Date: July 17, 2014
Number of pages: 286

New to the Second Edition
* Reorganized material on interpreting linear models, which distinguishes the main applications of prediction and explanation and introduces elementary notions of causality 
* Additional topics, including QR decomposition, splines, additive models, Lasso, multiple imputation, and false discovery rates
* Extensive use of the ggplot2 graphics package in addition to base graphics 

List Price: $89.95 / ?57.99

For more details and to order: http://www.crcpress.com/product/isbn/9781439887332

***

Using R for Introductory Statistics, Second Edition
John Verzani

ISBN: 978-1-4665-9073-1
Publication Date: June 26, 2014
Number of pages: 518

New to the Second Edition:
* Increased emphasis on more idiomatic R provides a grounding in the functionality of base R
* Discussions of the use of RStudio helps new R users avoid as many pitfalls as possible
* Use of knitr package makes code easier to read and therefore easier to reason about
* Additional information on computer-intensive approaches motivates the traditional approach
* Updated examples and data make the information current and topical

List Price: $59.95 / ?38.99

For more details and to order: http://www.crcpress.com/product/isbn/9781466590731

***

A Handbook of Statistical Analyses using R, Third Edition
Torsten Hothorn & Brian S. Everitt

ISBN: 978-1-4822-0458-2
Publication Date: June 25, 2014
Number of pages: 448 Pages

New to the Third Edition:
* Three new chapters on quantile regression, missing values, and Bayesian inference
* Extra material in the logistic regression chapter that describes a regression model for ordered categorical response variables
* Additional exercises
* More detailed explanations of R code
* New section in each chapter summarizing the results of the analyses 
* Updated version of the HSAUR package (HSAUR3), which includes some slides that can be used in introductory statistics courses

List Price: $64.95 / ?39.99

For more details and to order: http://www.crcpress.com/product/isbn/9781482204582

***

SAS and R: Data Management, Statistical Analysis, and Graphics, Second Edition
Ken Kleinman & Nicholas J. Horton

ISBN: 978-1-4665-8449-5
Publication Date: July 9, 2014
Number of pages: 468

New to the Second Edition:
This edition now covers RStudio, a powerful and easy-to-use interface for R. It incorporates a number of additional topics, including using application program interfaces (APIs), accessing data through database management systems, using reproducible analysis tools, and statistical analysis with Markov chain Monte Carlo (MCMC) methods and finite mixture models. It also includes extended examples of simulations and many new examples.

List Price: $79.95 / ?49.99

For more details and to order: http://www.crcpress.com/product/isbn/9781466584495

***

Introduction to Scientific Programming and Simulation Using R, Second Edition
Owen Jones, Robert Maillardet, Andrew Robinson

ISBN: 978-1-4665-6999-7
Publication Date: June 12, 2014
Number of pages: 600

New to the Second Edition:
In a new chapter on systems of ordinary differential equations (ODEs), the authors cover the Euler, midpoint, and fourth-order Runge-Kutta (RK4) schemes for solving systems of first-order ODEs. They compare the numerical efficiency of the different schemes experimentally and show how to improve the RK4 scheme by using an adaptive step size. There is also a new chapter focuses on both discrete- and continuous-time Markov chains. It describes transition and rate matrices, classification of states, limiting behaviour, Kolmogorov forward and backward equations, finite absorbing chains, and expected hitting times. It also presents methods for simulating discrete- and continuous-time chains as well as techniques for defining the state space, including lumping states and supplementary variables.

List Price: $79.95 / ?49.99

For more details and to order: http://www.crcpress.com/product/isbn/9781466569997

***

Linear Mixed Models: A Practical Guide Using Statistical Software, Second Edition
Brady T. West, Kathleen B. Welch, Andrzej T Galecki

ISBN: 978-1-4665-6099-4
Publication Date: July 24, 2014
Number of pages: 440 

New to the Second Edition 
* A new chapter on models with crossed random effects that uses a case study to illustrate software procedures capable of fitting these models 
* Power analysis methods for longitudinal and clustered study designs, including software options for power analyses and suggested approaches to writing simulations
* Use of the lmer() function in the lme4 R package 
* New sections on fitting LMMs to complex sample survey data and Bayesian approaches to making inferences based on LMMs
* Updated graphical procedures in the software packages
* Substantially revised index to enable more efficient reading and easier location of material on selected topics or software options
* More practical recommendations on using the software for analysis
* A new R package (WWGbook) that contains all of the data sets used in the examples

List Price: $89.95 / ?57.99

For more details and to order: http://www.crcpress.com/product/isbn/9781466560994

***

View our new Computational Statistics catalogue at http://issuu.com/crcpress/docs/fzn01_5.5x8.5_mc_issuu_copy.

***


From srisatish at 0xdata.com  Sun Jun 29 03:59:40 2014
From: srisatish at 0xdata.com (SriSatish Ambati)
Date: Sat, 28 Jun 2014 18:59:40 -0700
Subject: [R] [R-pkgs] h2o - fast scalable glm, deeplearning, gbm,
 randomForest, plyr for big datasets
Message-ID: <CAFC-x4a_sp-5LN_KxJnO4w=PR+yn1KS7Na-c1NqVcB4VO33nUg@mail.gmail.com>

http://cran.r-project.org/web/packages/h2o/
Please try h2o,

H2O is fast scalable open source R package for Generalized Linear Modeling,
Deep Learning, Gradient Boosting, RandomForest, k-means for large tera-byte
datasets. This package allows you to scale R over Hadoop like datasets
in-memory on multiple machines.

Under the guidance of a strong scientific advisory council from Stanford,
likes of Stephen Boyd, Rob Tibshirani and Trevor Hastie, our distributed
systems team built an R package that calls fast implementations of GLM,
GBM, DeepLearning, RandomForest to allow modeling on big data in Open
Source. Connectors to Hadoop, S3 and other file formats and extensibility
via R-expressions at scale, plyr and java.

thanks, Sri

-- 
ceo & co-founder, 0 <http://www.0xdata.com/>*x*data Inc
culture.code.customer

	[[alternative HTML version deleted]]

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


