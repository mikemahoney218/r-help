From m@rong|u@|u|g| @end|ng |rom gm@||@com  Thu Dec  1 12:25:40 2022
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Thu, 1 Dec 2022 12:25:40 +0100
Subject: [R] Select dataframe row containing a digit
In-Reply-To: <20221201085928.18573b32@rolf-Latitude-E7470>
References: <CAMk+s2SbBEZVU6ey_Ua3vzmwdtfNnatfYRXJ0_ecV-hpBKfdPw@mail.gmail.com>
 <20221201085928.18573b32@rolf-Latitude-E7470>
Message-ID: <CAMk+s2RSzB+R+KZmvokU=B0ikUan42e-4e1S1kCxrT_QyEZ=rg@mail.gmail.com>

Thank you, those are all viable solutions.
Regards
Luigi

On Wed, Nov 30, 2022 at 8:59 PM Rolf Turner <r.turner at auckland.ac.nz> wrote:
>
>
> On Wed, 30 Nov 2022 13:40:50 +0100
> Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
>
> > Hello,
> > I have a data frame where some lines containing strings including
> > digits. How do I select those rows and change their values?
> >
> > In essence, I have a data frame with different values assigned to the
> > column "val". I am formatting everything to either "POS" and "NEG",
> > but values entered as number should get the value "NUM".
> > How do I change such values?
> >
>
> What I do in such circumstances:
>
> suppressWarnings(X$val[!is.na(as.numeric(X$val))] <- "NUM")
>
> The "suppressWarnings()" bit is just included due to my OCD.
>
> This avoids fooling about with regular expressions, which always
> requires a huge amount of trial and error, and a great diminishment of
> the amount of hair on one's head (as a result of tearing out).
>
> Note that I have changed the name of your data frame from "df" to "X",
> since df() is a built-in R function (density of the F-distribution).
>
> See fortunes::fortune("might clash").
>
> cheers,
>
> Rolf Turner
>
> --
> Honorary Research Fellow
> Department of Statistics
> University of Auckland
> Phone: +64-9-373-7599 ext. 88276
>


-- 
Best regards,
Luigi


From r@ywong @end|ng |rom t@mu@edu  Fri Dec  2 04:55:35 2022
From: r@ywong @end|ng |rom t@mu@edu (Raymond Wong)
Date: Thu, 1 Dec 2022 21:55:35 -0600
Subject: [R] 2023 John M. Chambers Software Award
In-Reply-To: <f8a848c6-7ed0-4196-9cdc-8040b69c9ada@Spark>
References: <f8a848c6-7ed0-4196-9cdc-8040b69c9ada@Spark>
Message-ID: <39017c8b-eab3-4fb8-aaad-cc934ac10578@Spark>

Dear R-help listers,

I would like to let you know that submission window of the John M. Chambers Software Award is now open. The submission deadline is December 15, 2022.

The Statistical Computing Section of the American Statistical Association announces the competition for the John M. Chambers Statistical Software Award. In 1998 the Association for Computing Machinery (ACM) presented the ACM Software System Award to John Chambers for the design and development of S. Dr. Chambers generously donated his award to the Statistical Computing Section to endow an annual prize for statistical software written by, or in collaboration with, an undergraduate or graduate student.

Please visit http://asa.stat.uconn.edu for more information.

Best regards,

Sincerely,

Raymond Wong

Awards Chair
ASA Section on Statistical Computing
ASA Section on Statistical Graphics

	[[alternative HTML version deleted]]


From ev@n@cooch @end|ng |rom gm@||@com  Fri Dec  2 18:18:56 2022
From: ev@n@cooch @end|ng |rom gm@||@com (Evan Cooch)
Date: Fri, 2 Dec 2022 12:18:56 -0500
Subject: [R] interval between specific characters in a string...
Message-ID: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>

Was wondering if there is an 'efficient/elegant' way to do the following 
(without tidyverse). Take a string

abaaabbaaaaabaaab

Its easy enough to count the number of times the character 'b' shows up 
in the string, but...what I'm looking for is outputing the 'intervals' 
between occurrences of 'b' (starting the counter at the beginning of the 
string). So, for the preceding example, 'b' shows up in positions

2, 6, 7, 13, 17

So, the interval data would be: 2, 4, 1, 6, 4

My main approach has been to simply output positions (say, something 
like unlist(gregexpr('b', target_string))), and 'do the math' between 
successive positions. Can anyone suggest a more elegant approach?

Thanks in advance...


From @kw@|mmo @end|ng |rom gm@||@com  Sat Dec  3 01:01:18 2022
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Fri, 2 Dec 2022 19:01:18 -0500
Subject: [R] interval between specific characters in a string...
In-Reply-To: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
References: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
Message-ID: <CAPcHnpSRXU0RLOER+8Jxsxi-LumpK43sr5X-yXAMxuvcqBdKkA@mail.gmail.com>

try

gregexpr('b+', target_string)

which looks for one or more b characters, then get the attribute
"match.length"

On Fri, Dec 2, 2022, 18:56 Evan Cooch <evan.cooch at gmail.com> wrote:

> Was wondering if there is an 'efficient/elegant' way to do the following
> (without tidyverse). Take a string
>
> abaaabbaaaaabaaab
>
> Its easy enough to count the number of times the character 'b' shows up
> in the string, but...what I'm looking for is outputing the 'intervals'
> between occurrences of 'b' (starting the counter at the beginning of the
> string). So, for the preceding example, 'b' shows up in positions
>
> 2, 6, 7, 13, 17
>
> So, the interval data would be: 2, 4, 1, 6, 4
>
> My main approach has been to simply output positions (say, something
> like unlist(gregexpr('b', target_string))), and 'do the math' between
> successive positions. Can anyone suggest a more elegant approach?
>
> Thanks in advance...
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From mtmorg@n@b|oc @end|ng |rom gm@||@com  Sat Dec  3 01:39:20 2022
From: mtmorg@n@b|oc @end|ng |rom gm@||@com (Martin Morgan)
Date: Sat, 3 Dec 2022 00:39:20 +0000
Subject: [R] interval between specific characters in a string...
In-Reply-To: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
References: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
Message-ID: <BY5PR04MB6627BD017DA84DD29C08794DF9169@BY5PR04MB6627.namprd04.prod.outlook.com>

You could split the string into letters and figure out which ones are ?b?

which(strsplit(x, "")[[1]] == "b")

and then find the difference between each position, ?anchoring? at position 0

> diff(c(0, which(strsplit(x, "")[[1]] == "b")))
[1] 2 4 1 6 4

From: R-help <r-help-bounces at r-project.org> on behalf of Evan Cooch <evan.cooch at gmail.com>
Date: Friday, December 2, 2022 at 6:56 PM
To: r-help at r-project.org <r-help at r-project.org>
Subject: [R] interval between specific characters in a string...
Was wondering if there is an 'efficient/elegant' way to do the following
(without tidyverse). Take a string

abaaabbaaaaabaaab

Its easy enough to count the number of times the character 'b' shows up
in the string, but...what I'm looking for is outputing the 'intervals'
between occurrences of 'b' (starting the counter at the beginning of the
string). So, for the preceding example, 'b' shows up in positions

2, 6, 7, 13, 17

So, the interval data would be: 2, 4, 1, 6, 4

My main approach has been to simply output positions (say, something
like unlist(gregexpr('b', target_string))), and 'do the math' between
successive positions. Can anyone suggest a more elegant approach?

Thanks in advance...

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From @h@rt @end|ng |rom d|m@uch||e@c|  Sat Dec  3 02:54:15 2022
From: @h@rt @end|ng |rom d|m@uch||e@c| (Andrew Hart)
Date: Fri, 2 Dec 2022 22:54:15 -0300
Subject: [R] interval between specific characters in a string...
In-Reply-To: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
References: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
Message-ID: <c4927d63-5f39-693c-a123-7edfca1c5b78@dim.uchile.cl>

Here's a function that can get the interval sizes for you.

getStringSegmentLengths <- function(s, delim, ...) {
   nchar(unlist(strsplit(s, delim, ...))) + 1L
}

It uses strsplit to return a list of all the segments of the string 
separated by delim. delim can be a regular expression and with ..., you 
can pass all the extra options to strsplit in order to specify how to 
break up the string.
It then uses unlist to convert the list output of strsplit to a 
character vector. nchar then gives the lengths of all the elements of 
the character vector and finally a 1 is added to each of these in order 
to obtain the correct interval sizes.

Hth,
Andrew.

On 2/12/2022 14:18, Evan Cooch wrote:
> Was wondering if there is an 'efficient/elegant' way to do the following 
> (without tidyverse). Take a string
> 
> abaaabbaaaaabaaab
> 
> Its easy enough to count the number of times the character 'b' shows up 
> in the string, but...what I'm looking for is outputing the 'intervals' 
> between occurrences of 'b' (starting the counter at the beginning of the 
> string). So, for the preceding example, 'b' shows up in positions
> 
> 2, 6, 7, 13, 17
> 
> So, the interval data would be: 2, 4, 1, 6, 4
> 
> My main approach has been to simply output positions (say, something 
> like unlist(gregexpr('b', target_string))), and 'do the math' between 
> successive positions. Can anyone suggest a more elegant approach?
> 
> Thanks in advance...
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From @vi@e@gross m@iii@g oii gm@ii@com  Sat Dec  3 05:01:44 2022
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Fri, 2 Dec 2022 23:01:44 -0500
Subject: [R] interval between specific characters in a string...
In-Reply-To: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
References: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
Message-ID: <00de01d906cb$f57abe10$e0703a30$@gmail.com>

Evan, there are oodles of ways to do many things in R, and mcu of what the
tidyverse supplies can often be done as easily, or easier, outside it.

Before presenting a solution, I need to make sure I am answering the same
question or problem you intend.

Here is the string you have as an example:

st <- "abaaabbaaaaabaaab"

Is the string a string testing for single characters called "b" with any
other characters being either just "a" or at least non-"b" and of any length
but at least a few?

If so, ONE METHOD is to convert the string to a vector for reasons that will
become clear. For oddball reasons, this is a way to do it:

> unlist(strsplit(st,""))
[1] "a" "b" "a" "a" "a" "b" "b" "a" "a" "a" "a" "a" "b" "a" "a" "a" "b"

The result is a vector you can examine to see if they are equal to "b" or
not as a TRUE/FALSE vector:

> unlist(strsplit(st,"")) == "b"
[1] FALSE  TRUE FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE
TRUE FALSE FALSE FALSE
[17]  TRUE

Now you can ask for the indices which are TRUE, meaning at what offset from
the beginning are there instances of the letter "b":

> which(unlist(strsplit(st,"")) == "b")
[1]  2  6  7 13 17

This shows the second the integer offsets for the letter "b" are the second,
sixth and so on to seventeenth. Again, if I understood you, you want a
measure of how far apart instances of "b" are with adjacent ones being 1
apart. Again, many methods but I chose one where I sort of slid over the
above values by sliding in a zero from the front and removing the last
entry. 

So save that in a variable  first:

indices <- which(unlist(strsplit(st,"")) == "b")
indices_shifted <- c(0, head(indices, -1))

The two contain:

> indices
[1]  2  6  7 13 17
> indices_shifted
[1]  0  2  6  7 13
> indices - indices_shifted 
[1] 2 4 1 6 4

The above is the same as your intended result.

If you want to be cautious, handle edge cases like not having any "b" or an
empty string.

Here is the consolidated code:

st <- "abaaabbaaaaabaaab"
indices <- which(unlist(strsplit(st,"")) == "b")
indices_shifted <- c(0, head(indices, -1))
result <- indices - indices_shifted

There are many other ways to do this and of course some are more
straightforward and some more complex.

Consider a loop using a vector version of the string where each time you see
a b", you remember the last index you saw it and put out the number
representing the gap.

Fairly low tech.


-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Evan Cooch
Sent: Friday, December 2, 2022 12:19 PM
To: r-help at r-project.org
Subject: [R] interval between specific characters in a string...

Was wondering if there is an 'efficient/elegant' way to do the following
(without tidyverse). Take a string

abaaabbaaaaabaaab

Its easy enough to count the number of times the character 'b' shows up in
the string, but...what I'm looking for is outputing the 'intervals' 
between occurrences of 'b' (starting the counter at the beginning of the
string). So, for the preceding example, 'b' shows up in positions

2, 6, 7, 13, 17

So, the interval data would be: 2, 4, 1, 6, 4

My main approach has been to simply output positions (say, something like
unlist(gregexpr('b', target_string))), and 'do the math' between successive
positions. Can anyone suggest a more elegant approach?

Thanks in advance...

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sat Dec  3 09:48:36 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sat, 3 Dec 2022 08:48:36 +0000
Subject: [R] interval between specific characters in a string...
In-Reply-To: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
References: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
Message-ID: <ac1bb065-45bb-5bd7-f03a-32c62ca8c9b5@sapo.pt>

?s 17:18 de 02/12/2022, Evan Cooch escreveu:
> Was wondering if there is an 'efficient/elegant' way to do the following 
> (without tidyverse). Take a string
> 
> abaaabbaaaaabaaab
> 
> Its easy enough to count the number of times the character 'b' shows up 
> in the string, but...what I'm looking for is outputing the 'intervals' 
> between occurrences of 'b' (starting the counter at the beginning of the 
> string). So, for the preceding example, 'b' shows up in positions
> 
> 2, 6, 7, 13, 17
> 
> So, the interval data would be: 2, 4, 1, 6, 4
> 
> My main approach has been to simply output positions (say, something 
> like unlist(gregexpr('b', target_string))), and 'do the math' between 
> successive positions. Can anyone suggest a more elegant approach?
> 
> Thanks in advance...
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

I don't find your solution inelegant, it's even easy to write it as a 
one-line function.


char_interval <- function(x, s) {
   lapply(gregexpr(x, s), \(y) c(head(y, 1), diff(y)))
}

target_string <-"abaaabbaaaaabaaab"
char_interval('b', target_string)
#> [[1]]
#> [1] 2 4 1 6 4


Hope this helps,

Rui Barradas


From bgunter@4567 @end|ng |rom gm@||@com  Sat Dec  3 16:21:50 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 3 Dec 2022 07:21:50 -0800
Subject: [R] interval between specific characters in a string...
In-Reply-To: <ac1bb065-45bb-5bd7-f03a-32c62ca8c9b5@sapo.pt>
References: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
 <ac1bb065-45bb-5bd7-f03a-32c62ca8c9b5@sapo.pt>
Message-ID: <CAGxFJbQvd9FqWB6iAw=7d19APR+XO6sdphWqdWk9xoHh=WiBEg@mail.gmail.com>

Perhaps it is worth pointing out that looping constructs like lapply() can
be avoided and the procedure vectorized by mimicking Martin Morgan's
solution:

## s is the string to be searched.
diff(c(0,grep('b',strsplit(s,'')[[1]])))

However, Martin's solution is simpler and likely even faster as the regex
engine is unneeded:

diff(c(0, which(strsplit(s, "")[[1]] == "b"))) ## completely vectorized

This seems much preferable to me.

-- Bert





On Sat, Dec 3, 2022 at 12:49 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:

> ?s 17:18 de 02/12/2022, Evan Cooch escreveu:
> > Was wondering if there is an 'efficient/elegant' way to do the following
> > (without tidyverse). Take a string
> >
> > abaaabbaaaaabaaab
> >
> > Its easy enough to count the number of times the character 'b' shows up
> > in the string, but...what I'm looking for is outputing the 'intervals'
> > between occurrences of 'b' (starting the counter at the beginning of the
> > string). So, for the preceding example, 'b' shows up in positions
> >
> > 2, 6, 7, 13, 17
> >
> > So, the interval data would be: 2, 4, 1, 6, 4
> >
> > My main approach has been to simply output positions (say, something
> > like unlist(gregexpr('b', target_string))), and 'do the math' between
> > successive positions. Can anyone suggest a more elegant approach?
> >
> > Thanks in advance...
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> Hello,
>
> I don't find your solution inelegant, it's even easy to write it as a
> one-line function.
>
>
> char_interval <- function(x, s) {
>    lapply(gregexpr(x, s), \(y) c(head(y, 1), diff(y)))
> }
>
> target_string <-"abaaabbaaaaabaaab"
> char_interval('b', target_string)
> #> [[1]]
> #> [1] 2 4 1 6 4
>
>
> Hope this helps,
>
> Rui Barradas
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From hp@ge@@on@g|thub @end|ng |rom gm@||@com  Sun Dec  4 00:49:35 2022
From: hp@ge@@on@g|thub @end|ng |rom gm@||@com (=?UTF-8?B?SGVydsOpIFBhZ8Oocw==?=)
Date: Sat, 3 Dec 2022 15:49:35 -0800
Subject: [R] interval between specific characters in a string...
In-Reply-To: <CAGxFJbQvd9FqWB6iAw=7d19APR+XO6sdphWqdWk9xoHh=WiBEg@mail.gmail.com>
References: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
 <ac1bb065-45bb-5bd7-f03a-32c62ca8c9b5@sapo.pt>
 <CAGxFJbQvd9FqWB6iAw=7d19APR+XO6sdphWqdWk9xoHh=WiBEg@mail.gmail.com>
Message-ID: <d0882e87-3920-1abb-0880-f00dea2411a2@gmail.com>

On 03/12/2022 07:21, Bert Gunter wrote:
> Perhaps it is worth pointing out that looping constructs like lapply() can
> be avoided and the procedure vectorized by mimicking Martin Morgan's
> solution:
>
> ## s is the string to be searched.
> diff(c(0,grep('b',strsplit(s,'')[[1]])))
>
> However, Martin's solution is simpler and likely even faster as the regex
> engine is unneeded:
>
> diff(c(0, which(strsplit(s, "")[[1]] == "b"))) ## completely vectorized
>
> This seems much preferable to me.

Of all the proposed solutions, Andrew Hart's solution seems the most 
efficient:

 ? big_string <- strrep("abaaabbaaaaabaaabaaaaaaaaaaaaaaaaaaab", 500000)

 ? system.time(nchar(strsplit(big_string, split="b", fixed=TRUE)[[1]]) + 1)
 ? #? ? user? system elapsed
 ? # ? 0.736?? 0.028?? 0.764

 ? system.time(diff(c(0, which(strsplit(big_string, "", fixed=TRUE)[[1]] 
== "b"))))
 ? #? ? user? system elapsed
 ? #? 2.100?? 0.356?? 2.455

The bigger the string, the bigger the gap in performance.

Also, the bigger the average gap between 2 successive b's, the bigger 
the gap in performance.

Finally: always use fixed=TRUE in strsplit() if you don't need to use 
the regex engine.

Cheers,

H.


> -- Bert
>
>
>
>
>
> On Sat, Dec 3, 2022 at 12:49 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:
>
>> ?s 17:18 de 02/12/2022, Evan Cooch escreveu:
>>> Was wondering if there is an 'efficient/elegant' way to do the following
>>> (without tidyverse). Take a string
>>>
>>> abaaabbaaaaabaaab
>>>
>>> Its easy enough to count the number of times the character 'b' shows up
>>> in the string, but...what I'm looking for is outputing the 'intervals'
>>> between occurrences of 'b' (starting the counter at the beginning of the
>>> string). So, for the preceding example, 'b' shows up in positions
>>>
>>> 2, 6, 7, 13, 17
>>>
>>> So, the interval data would be: 2, 4, 1, 6, 4
>>>
>>> My main approach has been to simply output positions (say, something
>>> like unlist(gregexpr('b', target_string))), and 'do the math' between
>>> successive positions. Can anyone suggest a more elegant approach?
>>>
>>> Thanks in advance...
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> Hello,
>>
>> I don't find your solution inelegant, it's even easy to write it as a
>> one-line function.
>>
>>
>> char_interval <- function(x, s) {
>>     lapply(gregexpr(x, s), \(y) c(head(y, 1), diff(y)))
>> }
>>
>> target_string <-"abaaabbaaaaabaaab"
>> char_interval('b', target_string)
>> #> [[1]]
>> #> [1] 2 4 1 6 4
>>
>>
>> Hope this helps,
>>
>> Rui Barradas
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Herv? Pag?s

Bioconductor Core Team
hpages.on.github at gmail.com


From @vi@e@gross m@iii@g oii gm@ii@com  Sun Dec  4 01:21:48 2022
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Sat, 3 Dec 2022 19:21:48 -0500
Subject: [R] interval between specific characters in a string...
In-Reply-To: <d0882e87-3920-1abb-0880-f00dea2411a2@gmail.com>
References: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
 <ac1bb065-45bb-5bd7-f03a-32c62ca8c9b5@sapo.pt>
 <CAGxFJbQvd9FqWB6iAw=7d19APR+XO6sdphWqdWk9xoHh=WiBEg@mail.gmail.com>
 <d0882e87-3920-1abb-0880-f00dea2411a2@gmail.com>
Message-ID: <01ca01d90776$666cc500$33464f00$@gmail.com>

This may be a fairly dumb and often asked question about some functions like strsplit()  that return a list of things, often a list of ONE thing that be another list or a vector and needs to be made into something simpler..

The examples shown below have used various methods to convert the result to a vector but why is this not a built-in option for such a function to simplify the result either when possible or always?

Sure you can subset it with " [[1]]" or use unlist() or as.vector() to coerce it back to a vector. But when you have a very common idiom and a fact that many people waste lots of time figuring out they had a LIST containing a single vector and debug, maybe it would have made sense to have either a sister function like strsplit_v() that returns what is actually wanted or allow strsplit(whatever, output="vector") or something giving the same result.

Yes, I understand that when there is a workaround, it just complicates the base, but there could be a package that consistently does things like this to make the use of such functions easier.



-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Herv? Pag?s
Sent: Saturday, December 3, 2022 6:50 PM
To: Bert Gunter <bgunter.4567 at gmail.com>; Rui Barradas <ruipbarradas at sapo.pt>
Cc: r-help at r-project.org; Evan Cooch <evan.cooch at gmail.com>
Subject: Re: [R] interval between specific characters in a string...

On 03/12/2022 07:21, Bert Gunter wrote:
> Perhaps it is worth pointing out that looping constructs like lapply() 
> can be avoided and the procedure vectorized by mimicking Martin 
> Morgan's
> solution:
>
> ## s is the string to be searched.
> diff(c(0,grep('b',strsplit(s,'')[[1]])))
>
> However, Martin's solution is simpler and likely even faster as the 
> regex engine is unneeded:
>
> diff(c(0, which(strsplit(s, "")[[1]] == "b"))) ## completely 
> vectorized
>
> This seems much preferable to me.

Of all the proposed solutions, Andrew Hart's solution seems the most
efficient:

   big_string <- strrep("abaaabbaaaaabaaabaaaaaaaaaaaaaaaaaaab", 500000)

   system.time(nchar(strsplit(big_string, split="b", fixed=TRUE)[[1]]) + 1)
   #    user  system elapsed
   #   0.736   0.028   0.764

   system.time(diff(c(0, which(strsplit(big_string, "", fixed=TRUE)[[1]] == "b"))))
   #    user  system elapsed
   #  2.100   0.356   2.455

The bigger the string, the bigger the gap in performance.

Also, the bigger the average gap between 2 successive b's, the bigger the gap in performance.

Finally: always use fixed=TRUE in strsplit() if you don't need to use the regex engine.

Cheers,

H.


> -- Bert
>
>
>
>
>
> On Sat, Dec 3, 2022 at 12:49 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:
>
>> ?s 17:18 de 02/12/2022, Evan Cooch escreveu:
>>> Was wondering if there is an 'efficient/elegant' way to do the 
>>> following (without tidyverse). Take a string
>>>
>>> abaaabbaaaaabaaab
>>>
>>> Its easy enough to count the number of times the character 'b' shows 
>>> up in the string, but...what I'm looking for is outputing the 'intervals'
>>> between occurrences of 'b' (starting the counter at the beginning of 
>>> the string). So, for the preceding example, 'b' shows up in 
>>> positions
>>>
>>> 2, 6, 7, 13, 17
>>>
>>> So, the interval data would be: 2, 4, 1, 6, 4
>>>
>>> My main approach has been to simply output positions (say, something 
>>> like unlist(gregexpr('b', target_string))), and 'do the math' 
>>> between successive positions. Can anyone suggest a more elegant approach?
>>>
>>> Thanks in advance...
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> Hello,
>>
>> I don't find your solution inelegant, it's even easy to write it as a 
>> one-line function.
>>
>>
>> char_interval <- function(x, s) {
>>     lapply(gregexpr(x, s), \(y) c(head(y, 1), diff(y))) }
>>
>> target_string <-"abaaabbaaaaabaaab"
>> char_interval('b', target_string)
>> #> [[1]]
>> #> [1] 2 4 1 6 4
>>
>>
>> Hope this helps,
>>
>> Rui Barradas
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

--
Herv? Pag?s

Bioconductor Core Team
hpages.on.github at gmail.com

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Sun Dec  4 03:33:05 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 3 Dec 2022 18:33:05 -0800
Subject: [R] interval between specific characters in a string...
In-Reply-To: <d0882e87-3920-1abb-0880-f00dea2411a2@gmail.com>
References: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
 <ac1bb065-45bb-5bd7-f03a-32c62ca8c9b5@sapo.pt>
 <CAGxFJbQvd9FqWB6iAw=7d19APR+XO6sdphWqdWk9xoHh=WiBEg@mail.gmail.com>
 <d0882e87-3920-1abb-0880-f00dea2411a2@gmail.com>
Message-ID: <CAGxFJbRnWC93Y5mGi5S1Q6F0BTAVbm3Rtihfz6-2f6-5=eJ_wA@mail.gmail.com>

Thanks. Very informative.
I certainly missed this.

-- Bert

On Sat, Dec 3, 2022 at 3:49 PM Herv? Pag?s <hpages.on.github at gmail.com>
wrote:

> On 03/12/2022 07:21, Bert Gunter wrote:
> > Perhaps it is worth pointing out that looping constructs like lapply()
> can
> > be avoided and the procedure vectorized by mimicking Martin Morgan's
> > solution:
> >
> > ## s is the string to be searched.
> > diff(c(0,grep('b',strsplit(s,'')[[1]])))
> >
> > However, Martin's solution is simpler and likely even faster as the regex
> > engine is unneeded:
> >
> > diff(c(0, which(strsplit(s, "")[[1]] == "b"))) ## completely vectorized
> >
> > This seems much preferable to me.
>
> Of all the proposed solutions, Andrew Hart's solution seems the most
> efficient:
>
>    big_string <- strrep("abaaabbaaaaabaaabaaaaaaaaaaaaaaaaaaab", 500000)
>
>    system.time(nchar(strsplit(big_string, split="b", fixed=TRUE)[[1]]) + 1)
>    #    user  system elapsed
>    #   0.736   0.028   0.764
>
>    system.time(diff(c(0, which(strsplit(big_string, "", fixed=TRUE)[[1]]
> == "b"))))
>    #    user  system elapsed
>    #  2.100   0.356   2.455
>
> The bigger the string, the bigger the gap in performance.
>
> Also, the bigger the average gap between 2 successive b's, the bigger
> the gap in performance.
>
> Finally: always use fixed=TRUE in strsplit() if you don't need to use
> the regex engine.
>
> Cheers,
>
> H.
>
>
> > -- Bert
> >
> >
> >
> >
> >
> > On Sat, Dec 3, 2022 at 12:49 AM Rui Barradas <ruipbarradas at sapo.pt>
> wrote:
> >
> >> ?s 17:18 de 02/12/2022, Evan Cooch escreveu:
> >>> Was wondering if there is an 'efficient/elegant' way to do the
> following
> >>> (without tidyverse). Take a string
> >>>
> >>> abaaabbaaaaabaaab
> >>>
> >>> Its easy enough to count the number of times the character 'b' shows up
> >>> in the string, but...what I'm looking for is outputing the 'intervals'
> >>> between occurrences of 'b' (starting the counter at the beginning of
> the
> >>> string). So, for the preceding example, 'b' shows up in positions
> >>>
> >>> 2, 6, 7, 13, 17
> >>>
> >>> So, the interval data would be: 2, 4, 1, 6, 4
> >>>
> >>> My main approach has been to simply output positions (say, something
> >>> like unlist(gregexpr('b', target_string))), and 'do the math' between
> >>> successive positions. Can anyone suggest a more elegant approach?
> >>>
> >>> Thanks in advance...
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide
> >>> http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >> Hello,
> >>
> >> I don't find your solution inelegant, it's even easy to write it as a
> >> one-line function.
> >>
> >>
> >> char_interval <- function(x, s) {
> >>     lapply(gregexpr(x, s), \(y) c(head(y, 1), diff(y)))
> >> }
> >>
> >> target_string <-"abaaabbaaaaabaaab"
> >> char_interval('b', target_string)
> >> #> [[1]]
> >> #> [1] 2 4 1 6 4
> >>
> >>
> >> Hope this helps,
> >>
> >> Rui Barradas
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >>
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> --
> Herv? Pag?s
>
> Bioconductor Core Team
> hpages.on.github at gmail.com
>
>

	[[alternative HTML version deleted]]


From h@w|ckh@m @end|ng |rom gm@||@com  Sun Dec  4 09:25:08 2022
From: h@w|ckh@m @end|ng |rom gm@||@com (Hadley Wickham)
Date: Sun, 4 Dec 2022 21:25:08 +1300
Subject: [R] interval between specific characters in a string...
In-Reply-To: <d0882e87-3920-1abb-0880-f00dea2411a2@gmail.com>
References: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
 <ac1bb065-45bb-5bd7-f03a-32c62ca8c9b5@sapo.pt>
 <CAGxFJbQvd9FqWB6iAw=7d19APR+XO6sdphWqdWk9xoHh=WiBEg@mail.gmail.com>
 <d0882e87-3920-1abb-0880-f00dea2411a2@gmail.com>
Message-ID: <CABdHhvGz22ma5CgcBpJSVLL0NomqjONyz2jGxrQRSRO02iyZ3g@mail.gmail.com>

On Sun, Dec 4, 2022 at 12:50 PM Herv? Pag?s <hpages.on.github at gmail.com> wrote:
>
> On 03/12/2022 07:21, Bert Gunter wrote:
> > Perhaps it is worth pointing out that looping constructs like lapply() can
> > be avoided and the procedure vectorized by mimicking Martin Morgan's
> > solution:
> >
> > ## s is the string to be searched.
> > diff(c(0,grep('b',strsplit(s,'')[[1]])))
> >
> > However, Martin's solution is simpler and likely even faster as the regex
> > engine is unneeded:
> >
> > diff(c(0, which(strsplit(s, "")[[1]] == "b"))) ## completely vectorized
> >
> > This seems much preferable to me.
>
> Of all the proposed solutions, Andrew Hart's solution seems the most
> efficient:
>
>    big_string <- strrep("abaaabbaaaaabaaabaaaaaaaaaaaaaaaaaaab", 500000)
>
>    system.time(nchar(strsplit(big_string, split="b", fixed=TRUE)[[1]]) + 1)
>    #    user  system elapsed
>    #   0.736   0.028   0.764
>
>    system.time(diff(c(0, which(strsplit(big_string, "", fixed=TRUE)[[1]]
> == "b"))))
>    #    user  system elapsed
>    #  2.100   0.356   2.455
>
> The bigger the string, the bigger the gap in performance.
>
> Also, the bigger the average gap between 2 successive b's, the bigger
> the gap in performance.
>
> Finally: always use fixed=TRUE in strsplit() if you don't need to use
> the regex engine.

You can do a bit better if you are willing to use stringr:

library(stringr)
big_string <- strrep("abaaabbaaaaabaaabaaaaaaaaaaaaaaaaaaab", 500000)

system.time(nchar(strsplit(big_string, split="b", fixed=TRUE)[[1]]) + 1)
#>    user  system elapsed
#>   0.126   0.002   0.128

system.time(str_length(str_split(big_string, fixed("b"))[[1]]))
#>    user  system elapsed
#>   0.103   0.004   0.107

(And my timings also suggest that it's time for Herv? to get a new computer :P)

It feels like an approach that uses locations should be faster since
you wouldn't have to construct all the intermediate strings.

system.time(pos <- str_locate_all(big_string, fixed("b"))[[1]][,1])
#>    user  system elapsed
#>   0.075   0.004   0.080
# I suspect this could be optimised with a little thought making this approach
# faster overall
system.time(c(0, diff(pos))
#>    user  system elapsed
#>   0.022   0.006   0.027

Hadley

-- 
http://hadley.nz


From h@w|ckh@m @end|ng |rom gm@||@com  Sun Dec  4 09:25:46 2022
From: h@w|ckh@m @end|ng |rom gm@||@com (Hadley Wickham)
Date: Sun, 4 Dec 2022 21:25:46 +1300
Subject: [R] interval between specific characters in a string...
In-Reply-To: <01ca01d90776$666cc500$33464f00$@gmail.com>
References: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
 <ac1bb065-45bb-5bd7-f03a-32c62ca8c9b5@sapo.pt>
 <CAGxFJbQvd9FqWB6iAw=7d19APR+XO6sdphWqdWk9xoHh=WiBEg@mail.gmail.com>
 <d0882e87-3920-1abb-0880-f00dea2411a2@gmail.com>
 <01ca01d90776$666cc500$33464f00$@gmail.com>
Message-ID: <CABdHhvH5w1k_t5rXnWywFmPoFDD5wF3FSqt2p1c9L7nWubea7w@mail.gmail.com>

On Sun, Dec 4, 2022 at 1:22 PM <avi.e.gross at gmail.com> wrote:
>
> This may be a fairly dumb and often asked question about some functions like strsplit()  that return a list of things, often a list of ONE thing that be another list or a vector and needs to be made into something simpler..
>
> The examples shown below have used various methods to convert the result to a vector but why is this not a built-in option for such a function to simplify the result either when possible or always?
>
> Sure you can subset it with " [[1]]" or use unlist() or as.vector() to coerce it back to a vector. But when you have a very common idiom and a fact that many people waste lots of time figuring out they had a LIST containing a single vector and debug, maybe it would have made sense to have either a sister function like strsplit_v() that returns what is actually wanted or allow strsplit(whatever, output="vector") or something giving the same result.
>
> Yes, I understand that when there is a workaround, it just complicates the base, but there could be a package that consistently does things like this to make the use of such functions easier.

The next version of stringr (currently being processed by CRAN)
provides str_split_1() for exactly this purpose.

Hadley

-- 
http://hadley.nz


From t@v|b@r @end|ng |rom gm@||@com  Sun Dec  4 10:38:56 2022
From: t@v|b@r @end|ng |rom gm@||@com (Micha Silver)
Date: Sun, 4 Dec 2022 11:38:56 +0200
Subject: [R] interval between specific characters in a string...
In-Reply-To: <CABdHhvH5w1k_t5rXnWywFmPoFDD5wF3FSqt2p1c9L7nWubea7w@mail.gmail.com>
References: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
 <ac1bb065-45bb-5bd7-f03a-32c62ca8c9b5@sapo.pt>
 <CAGxFJbQvd9FqWB6iAw=7d19APR+XO6sdphWqdWk9xoHh=WiBEg@mail.gmail.com>
 <d0882e87-3920-1abb-0880-f00dea2411a2@gmail.com>
 <01ca01d90776$666cc500$33464f00$@gmail.com>
 <CABdHhvH5w1k_t5rXnWywFmPoFDD5wF3FSqt2p1c9L7nWubea7w@mail.gmail.com>
Message-ID: <0b8dde95-2279-71f6-c3d5-8ff59be943f9@gmail.com>


On 04/12/2022 10:25, Hadley Wickham wrote:
> On Sun, Dec 4, 2022 at 1:22 PM <avi.e.gross at gmail.com> wrote:
>> This may be a fairly dumb and often asked question about some functions like strsplit()  that return a list of things, often a list of ONE thing that be another list or a vector and needs to be made into something simpler..
>>
>> The examples shown below have used various methods to convert the result to a vector but why is this not a built-in option for such a function to simplify the result either when possible or always?
>>
>> Sure you can subset it with " [[1]]" or use unlist() or as.vector() to coerce it back to a vector. But when you have a very common idiom and a fact that many people waste lots of time figuring out they had a LIST containing a single vector and debug, maybe it would have made sense to have either a sister function like strsplit_v() that returns what is actually wanted or allow strsplit(whatever, output="vector") or something giving the same result.
>>
>> Yes, I understand that when there is a workaround, it just complicates the base, but there could be a package that consistently does things like this to make the use of such functions easier.
> The next version of stringr (currently being processed by CRAN)
> provides str_split_1() for exactly this purpose.


Thanks!

Well appreciated...


>
> Hadley
>
-- 
Micha Silver
Ben Gurion Univ.
Sde Boker, Remote Sensing Lab
cell: +972-523-665918


From hp@ge@@on@g|thub @end|ng |rom gm@||@com  Sun Dec  4 22:42:13 2022
From: hp@ge@@on@g|thub @end|ng |rom gm@||@com (=?UTF-8?B?SGVydsOpIFBhZ8Oocw==?=)
Date: Sun, 4 Dec 2022 13:42:13 -0800
Subject: [R] interval between specific characters in a string...
In-Reply-To: <CABdHhvGz22ma5CgcBpJSVLL0NomqjONyz2jGxrQRSRO02iyZ3g@mail.gmail.com>
References: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
 <ac1bb065-45bb-5bd7-f03a-32c62ca8c9b5@sapo.pt>
 <CAGxFJbQvd9FqWB6iAw=7d19APR+XO6sdphWqdWk9xoHh=WiBEg@mail.gmail.com>
 <d0882e87-3920-1abb-0880-f00dea2411a2@gmail.com>
 <CABdHhvGz22ma5CgcBpJSVLL0NomqjONyz2jGxrQRSRO02iyZ3g@mail.gmail.com>
Message-ID: <7a2b3d38-4697-26a0-eca7-f6ec95f96c66@gmail.com>


On 04/12/2022 00:25, Hadley Wickham wrote:
> On Sun, Dec 4, 2022 at 12:50 PM Herv? Pag?s <hpages.on.github at gmail.com> wrote:
>> On 03/12/2022 07:21, Bert Gunter wrote:
>>> Perhaps it is worth pointing out that looping constructs like lapply() can
>>> be avoided and the procedure vectorized by mimicking Martin Morgan's
>>> solution:
>>>
>>> ## s is the string to be searched.
>>> diff(c(0,grep('b',strsplit(s,'')[[1]])))
>>>
>>> However, Martin's solution is simpler and likely even faster as the regex
>>> engine is unneeded:
>>>
>>> diff(c(0, which(strsplit(s, "")[[1]] == "b"))) ## completely vectorized
>>>
>>> This seems much preferable to me.
>> Of all the proposed solutions, Andrew Hart's solution seems the most
>> efficient:
>>
>>     big_string <- strrep("abaaabbaaaaabaaabaaaaaaaaaaaaaaaaaaab", 500000)
>>
>>     system.time(nchar(strsplit(big_string, split="b", fixed=TRUE)[[1]]) + 1)
>>     #    user  system elapsed
>>     #   0.736   0.028   0.764
>>
>>     system.time(diff(c(0, which(strsplit(big_string, "", fixed=TRUE)[[1]]
>> == "b"))))
>>     #    user  system elapsed
>>     #  2.100   0.356   2.455
>>
>> The bigger the string, the bigger the gap in performance.
>>
>> Also, the bigger the average gap between 2 successive b's, the bigger
>> the gap in performance.
>>
>> Finally: always use fixed=TRUE in strsplit() if you don't need to use
>> the regex engine.
> You can do a bit better if you are willing to use stringr:
>
> library(stringr)
> big_string <- strrep("abaaabbaaaaabaaabaaaaaaaaaaaaaaaaaaab", 500000)
>
> system.time(nchar(strsplit(big_string, split="b", fixed=TRUE)[[1]]) + 1)
> #>    user  system elapsed
> #>   0.126   0.002   0.128
>
> system.time(str_length(str_split(big_string, fixed("b"))[[1]]))
> #>    user  system elapsed
> #>   0.103   0.004   0.107
>
> (And my timings also suggest that it's time for Herv? to get a new computer :P)

LOL

Actually my timings were for

   big_string <- strrep("abaaabbaaaaabaaabaaaaaaaaaaaaaaaaaaab", 1500000)

but I mixed up things when I copy-pasted them in my email.

Even though I still need a new laptop and I'm in the process of getting 
a new one ;-)

H.

-- 
Herv? Pag?s

Bioconductor Core Team
hpages.on.github at gmail.com


From peter@|@ng|e|der @end|ng |rom gm@||@com  Mon Dec  5 14:28:16 2022
From: peter@|@ng|e|der @end|ng |rom gm@||@com (Peter Langfelder)
Date: Mon, 5 Dec 2022 21:28:16 +0800
Subject: [R] confusion about dev.prev()
Message-ID: <CA+hbrhXTs45XYk0J8hXOpq4iSmwnxZ_eWoC6yCNE8etgHyB7Mw@mail.gmail.com>

Hi all,

I'm either confused about dev.prev() or there's a bug in it. Open two
devices, plot a plot, call dev.prev() and plot again. I would expect
the second plot to appear in the first device, but that is not what
happens; both plots appear in the second device. Is this expected
behavior or a bug?
Example (in linux):

x11()
par(mfrow = c(1,2));
x11()
par(mfrow = c(1,2));
plot(1:10)
dev.prev()
plot(10:20)

This happens both in R-4.2.0 (patched) and R-devel from 2022-09-13
(sorry, don't have a newer one handy).

sessionInfo() from the R-devel session:

R Under development (unstable) (2022-09-13 r82849)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Fedora Linux 36 (Thirty Six)

Matrix products: default
BLAS:   /usr/local/lib64/R-devel/lib/libRblas.so
LAPACK: /usr/local/lib64/R-devel/lib/libRlapack.so

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
 [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] compiler_4.3.0


From kry|ov@r00t @end|ng |rom gm@||@com  Mon Dec  5 14:38:34 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Mon, 5 Dec 2022 16:38:34 +0300
Subject: [R] confusion about dev.prev()
In-Reply-To: <CA+hbrhXTs45XYk0J8hXOpq4iSmwnxZ_eWoC6yCNE8etgHyB7Mw@mail.gmail.com>
References: <CA+hbrhXTs45XYk0J8hXOpq4iSmwnxZ_eWoC6yCNE8etgHyB7Mw@mail.gmail.com>
Message-ID: <20221205163834.0c8517ae@arachnoid>

? Mon, 5 Dec 2022 21:28:16 +0800
Peter Langfelder <peter.langfelder at gmail.com> ?????:

> Open two devices, plot a plot, call dev.prev() and plot again. I
> would expect the second plot to appear in the first device, but that
> is not what happens; both plots appear in the second device. 

Unfortunately, dev.prev() and dev.next() only return the number of the
respective device. You need dev.set() to actually make the change.

-- 
Best regards,
Ivan


From peter@|@ng|e|der @end|ng |rom gm@||@com  Mon Dec  5 14:40:13 2022
From: peter@|@ng|e|der @end|ng |rom gm@||@com (Peter Langfelder)
Date: Mon, 5 Dec 2022 21:40:13 +0800
Subject: [R] confusion about dev.prev()
In-Reply-To: <20221205163834.0c8517ae@arachnoid>
References: <CA+hbrhXTs45XYk0J8hXOpq4iSmwnxZ_eWoC6yCNE8etgHyB7Mw@mail.gmail.com>
 <20221205163834.0c8517ae@arachnoid>
Message-ID: <CA+hbrhUOcDixt+B8+bVBRpv+MfyePDS2Jjv48BgaQ_LMmEUpJg@mail.gmail.com>

Ah, thanks, got it. Misread the help again...

Peter

On Mon, Dec 5, 2022 at 9:38 PM Ivan Krylov <krylov.r00t at gmail.com> wrote:
>
> ? Mon, 5 Dec 2022 21:28:16 +0800
> Peter Langfelder <peter.langfelder at gmail.com> ?????:
>
> > Open two devices, plot a plot, call dev.prev() and plot again. I
> > would expect the second plot to appear in the first device, but that
> > is not what happens; both plots appear in the second device.
>
> Unfortunately, dev.prev() and dev.next() only return the number of the
> respective device. You need dev.set() to actually make the change.
>
> --
> Best regards,
> Ivan


From @@h||nv@rkey @end|ng |rom gm@||@com  Mon Dec  5 08:40:51 2022
From: @@h||nv@rkey @end|ng |rom gm@||@com (ASHLIN VARKEY)
Date: Mon, 5 Dec 2022 13:10:51 +0530
Subject: [R] query in loops
Message-ID: <CAKwZBoycX6gtAgmKZtgZ+5baKd=tMioep=fOUj_QYauo_EEJfA@mail.gmail.com>

Sir,
I want to write a loop in R to find the AIC factor. For its calculation, I
need to run an algorithm in the attached file. Here  'x' represents the
dataset and xi denotes the i-th observation after arranging it in ascending
order. Q(u) and q(u) represent the quantile function and quantile density
function respectively. For my distribution Q(u) and q(u) are given below.
Q(u)=-? log?(1-u)+(b-?)u+((r-b))/2 u^2
q(u)=b+u(r-b+?/(1-u)).
Can you please help me to correct this program based on the algorithm?
*R code*
x=c(0.047, 0.296, 0.540, 1.271, 0.115, 0.334, 0.570, 1.326, 0.121, 0.395,
0.641, 1.447, 0.132, 0.458, 0.644, 1.485, 0.164, 0.466, 0.696, 1.553,
0.197, 0.501, 0.841,1.581,
0.203,0.507, 0.863, 1.589, 3.743, 0.260, 0.529, 1.099, 2.178, 0.282, 0.534,
1.219, 2.343, 2.416, 2.444, 2.825, 2.830, 3.578, 3.658, 3.978, 4.033)
xi=sort(x)
xi
n=45
alpha=-1.014
b=.949
r=3.11
u=c()
D=c()
q=c()
Q=c()
for (i in 1:n) {
    u[i]=i/(n+1)
    Q[i]=-alpha*log(1-u[i])+(b-alpha)*u[i]+((r-b)/2)*(u[i]^2)
    q[i]=b+u[i]*(r-b+(alpha/(1-u[i])))
    D[i]=Q[i]-xi[i]
    if (D[i]<(10^-7)) {
      print (q[i])
    }
    else{
      u[i+1]=u[i]+((xi[i]-Q[i])/q[i])
    }
  }

From m@rong|u@|u|g| @end|ng |rom gm@||@com  Mon Dec  5 22:24:19 2022
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Mon, 5 Dec 2022 22:24:19 +0100
Subject: [R] How to draw chemical structures with R?
Message-ID: <CAMk+s2Q2gUOjVdQwjUHxirVLDpRL7ceGkOS0+sVf3yrVUtP=4A@mail.gmail.com>

Hello,'
I have seen from this link
https://cran.r-project.org/web/packages/rcdk/vignettes/using-rcdk.html
that there is a way to draw chemical structures using R via rcdk package.
I tried to draw a simple structure but I got an error. What is it
missing? What is the correct syntax?
Thanks

```
library(rcdk)
smile <- 'c1ccccc1CC(=O)C(N)CC1CCCCOC1'
mol <- parse.smiles(smile)[[1]]
view.molecule.2d(mol)
> Error in view.molecule.2d(mol) : java.lang.NoSuchMethodError: <init>
```


From jho|tm@n @end|ng |rom gm@||@com  Mon Dec  5 23:05:47 2022
From: jho|tm@n @end|ng |rom gm@||@com (jim holtman)
Date: Mon, 5 Dec 2022 14:05:47 -0800
Subject: [R] query in loops
In-Reply-To: <CAKwZBoycX6gtAgmKZtgZ+5baKd=tMioep=fOUj_QYauo_EEJfA@mail.gmail.com>
References: <CAKwZBoycX6gtAgmKZtgZ+5baKd=tMioep=fOUj_QYauo_EEJfA@mail.gmail.com>
Message-ID: <CAAxdm-6WbSS3mzwgqj-=3+MBQFxehmrYDSD1xotfiwpdTgOuOA@mail.gmail.com>

So what is the problem that you would like help in correcting?  The program
seems to run.

Thanks

Jim Holtman
*Data Munger Guru*


*What is the problem that you are trying to solve?Tell me what you want to
do, not how you want to do it.*


On Mon, Dec 5, 2022 at 12:59 PM ASHLIN VARKEY <ashlinvarkey at gmail.com>
wrote:

> Sir,
> I want to write a loop in R to find the AIC factor. For its calculation, I
> need to run an algorithm in the attached file. Here  'x' represents the
> dataset and xi denotes the i-th observation after arranging it in ascending
> order. Q(u) and q(u) represent the quantile function and quantile density
> function respectively. For my distribution Q(u) and q(u) are given below.
> Q(u)=-? log?(1-u)+(b-?)u+((r-b))/2 u^2
> q(u)=b+u(r-b+?/(1-u)).
> Can you please help me to correct this program based on the algorithm?
> *R code*
> x=c(0.047, 0.296, 0.540, 1.271, 0.115, 0.334, 0.570, 1.326, 0.121, 0.395,
> 0.641, 1.447, 0.132, 0.458, 0.644, 1.485, 0.164, 0.466, 0.696, 1.553,
> 0.197, 0.501, 0.841,1.581,
> 0.203,0.507, 0.863, 1.589, 3.743, 0.260, 0.529, 1.099, 2.178, 0.282, 0.534,
> 1.219, 2.343, 2.416, 2.444, 2.825, 2.830, 3.578, 3.658, 3.978, 4.033)
> xi=sort(x)
> xi
> n=45
> alpha=-1.014
> b=.949
> r=3.11
> u=c()
> D=c()
> q=c()
> Q=c()
> for (i in 1:n) {
>     u[i]=i/(n+1)
>     Q[i]=-alpha*log(1-u[i])+(b-alpha)*u[i]+((r-b)/2)*(u[i]^2)
>     q[i]=b+u[i]*(r-b+(alpha/(1-u[i])))
>     D[i]=Q[i]-xi[i]
>     if (D[i]<(10^-7)) {
>       print (q[i])
>     }
>     else{
>       u[i+1]=u[i]+((xi[i]-Q[i])/q[i])
>     }
>   }
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From |mh_u@er@-group@ @end|ng |rom mo|conn@com  Tue Dec  6 03:11:13 2022
From: |mh_u@er@-group@ @end|ng |rom mo|conn@com (LMH)
Date: Mon, 5 Dec 2022 21:11:13 -0500
Subject: [R] How to draw chemical structures with R?
In-Reply-To: <CAMk+s2Q2gUOjVdQwjUHxirVLDpRL7ceGkOS0+sVf3yrVUtP=4A@mail.gmail.com>
References: <CAMk+s2Q2gUOjVdQwjUHxirVLDpRL7ceGkOS0+sVf3yrVUtP=4A@mail.gmail.com>
Message-ID: <b77332fa-74ed-b0e0-1113-7739010478d3@molconn.com>

Just my opinion, but I think you would be better off to draw the structures using a drawing program
like MarvinSketch (free, java based) and save the structure as a SMILES file, MOL file, or SDF. You
should be able to import any of those into R. A program like MarvinSketch will check the structure
for errors as you draw it and keep to standardized formats.

By the way, I see no error in the SMILEA string for the structure in your expamle so your error is
not in the drawing part of the process. Even so, I try to keep to well established tools for basic
tasks and Marvin as is well established as it gets.

I would look for an example of what you are trying and see if you can get the example to work.

LMH


Luigi Marongiu wrote:
> Hello,'
> I have seen from this link
> https://cran.r-project.org/web/packages/rcdk/vignettes/using-rcdk.html
> that there is a way to draw chemical structures using R via rcdk package.
> I tried to draw a simple structure but I got an error. What is it
> missing? What is the correct syntax?
> Thanks
> 
> ```
> library(rcdk)
> smile <- 'c1ccccc1CC(=O)C(N)CC1CCCCOC1'
> mol <- parse.smiles(smile)[[1]]
> view.molecule.2d(mol)
>> Error in view.molecule.2d(mol) : java.lang.NoSuchMethodError: <init>
> ```
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Tue Dec  6 06:59:34 2022
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Tue, 6 Dec 2022 06:59:34 +0100
Subject: [R] How to draw chemical structures with R?
In-Reply-To: <b77332fa-74ed-b0e0-1113-7739010478d3@molconn.com>
References: <CAMk+s2Q2gUOjVdQwjUHxirVLDpRL7ceGkOS0+sVf3yrVUtP=4A@mail.gmail.com>
 <b77332fa-74ed-b0e0-1113-7739010478d3@molconn.com>
Message-ID: <CAMk+s2Sr5Bd+woqgA+FEii5drqUR-UQWV9w8YU93oodFrxv8QQ@mail.gmail.com>

Thanks for the tip! I think the problem is all Java-based, the SMILES
structure comes from the example in the template, it should work.
There is something missing in the execution...

On Tue, Dec 6, 2022 at 3:12 AM LMH <lmh_users-groups at molconn.com> wrote:
>
> Just my opinion, but I think you would be better off to draw the structures using a drawing program
> like MarvinSketch (free, java based) and save the structure as a SMILES file, MOL file, or SDF. You
> should be able to import any of those into R. A program like MarvinSketch will check the structure
> for errors as you draw it and keep to standardized formats.
>
> By the way, I see no error in the SMILEA string for the structure in your expamle so your error is
> not in the drawing part of the process. Even so, I try to keep to well established tools for basic
> tasks and Marvin as is well established as it gets.
>
> I would look for an example of what you are trying and see if you can get the example to work.
>
> LMH
>
>
> Luigi Marongiu wrote:
> > Hello,'
> > I have seen from this link
> > https://cran.r-project.org/web/packages/rcdk/vignettes/using-rcdk.html
> > that there is a way to draw chemical structures using R via rcdk package.
> > I tried to draw a simple structure but I got an error. What is it
> > missing? What is the correct syntax?
> > Thanks
> >
> > ```
> > library(rcdk)
> > smile <- 'c1ccccc1CC(=O)C(N)CC1CCCCOC1'
> > mol <- parse.smiles(smile)[[1]]
> > view.molecule.2d(mol)
> >> Error in view.molecule.2d(mol) : java.lang.NoSuchMethodError: <init>
> > ```
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>


-- 
Best regards,
Luigi


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Dec  6 07:21:27 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 05 Dec 2022 22:21:27 -0800
Subject: [R] How to draw chemical structures with R?
In-Reply-To: <CAMk+s2Sr5Bd+woqgA+FEii5drqUR-UQWV9w8YU93oodFrxv8QQ@mail.gmail.com>
References: <CAMk+s2Q2gUOjVdQwjUHxirVLDpRL7ceGkOS0+sVf3yrVUtP=4A@mail.gmail.com>
 <b77332fa-74ed-b0e0-1113-7739010478d3@molconn.com>
 <CAMk+s2Sr5Bd+woqgA+FEii5drqUR-UQWV9w8YU93oodFrxv8QQ@mail.gmail.com>
Message-ID: <564DF546-0CCF-4796-A96F-F4F6630B1DD6@dcn.davis.ca.us>

I have never seen this package mentioned on this list. You should contact the package maintainer.

On December 5, 2022 9:59:34 PM PST, Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
>Thanks for the tip! I think the problem is all Java-based, the SMILES
>structure comes from the example in the template, it should work.
>There is something missing in the execution...
>
>On Tue, Dec 6, 2022 at 3:12 AM LMH <lmh_users-groups at molconn.com> wrote:
>>
>> Just my opinion, but I think you would be better off to draw the structures using a drawing program
>> like MarvinSketch (free, java based) and save the structure as a SMILES file, MOL file, or SDF. You
>> should be able to import any of those into R. A program like MarvinSketch will check the structure
>> for errors as you draw it and keep to standardized formats.
>>
>> By the way, I see no error in the SMILEA string for the structure in your expamle so your error is
>> not in the drawing part of the process. Even so, I try to keep to well established tools for basic
>> tasks and Marvin as is well established as it gets.
>>
>> I would look for an example of what you are trying and see if you can get the example to work.
>>
>> LMH
>>
>>
>> Luigi Marongiu wrote:
>> > Hello,'
>> > I have seen from this link
>> > https://cran.r-project.org/web/packages/rcdk/vignettes/using-rcdk.html
>> > that there is a way to draw chemical structures using R via rcdk package.
>> > I tried to draw a simple structure but I got an error. What is it
>> > missing? What is the correct syntax?
>> > Thanks
>> >
>> > ```
>> > library(rcdk)
>> > smile <- 'c1ccccc1CC(=O)C(N)CC1CCCCOC1'
>> > mol <- parse.smiles(smile)[[1]]
>> > view.molecule.2d(mol)
>> >> Error in view.molecule.2d(mol) : java.lang.NoSuchMethodError: <init>
>> > ```
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>> >
>>
>
>

-- 
Sent from my phone. Please excuse my brevity.


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Tue Dec  6 07:26:08 2022
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Tue, 6 Dec 2022 07:26:08 +0100
Subject: [R] How to draw chemical structures with R?
In-Reply-To: <564DF546-0CCF-4796-A96F-F4F6630B1DD6@dcn.davis.ca.us>
References: <CAMk+s2Q2gUOjVdQwjUHxirVLDpRL7ceGkOS0+sVf3yrVUtP=4A@mail.gmail.com>
 <b77332fa-74ed-b0e0-1113-7739010478d3@molconn.com>
 <CAMk+s2Sr5Bd+woqgA+FEii5drqUR-UQWV9w8YU93oodFrxv8QQ@mail.gmail.com>
 <564DF546-0CCF-4796-A96F-F4F6630B1DD6@dcn.davis.ca.us>
Message-ID: <CAMk+s2QvZMXfJa--B_56OmeYre7zd3mBFgn00Q5ib3ppWE+kXg@mail.gmail.com>

Thanks, I will.

On Tue, Dec 6, 2022 at 7:21 AM Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>
> I have never seen this package mentioned on this list. You should contact the package maintainer.
>
> On December 5, 2022 9:59:34 PM PST, Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
> >Thanks for the tip! I think the problem is all Java-based, the SMILES
> >structure comes from the example in the template, it should work.
> >There is something missing in the execution...
> >
> >On Tue, Dec 6, 2022 at 3:12 AM LMH <lmh_users-groups at molconn.com> wrote:
> >>
> >> Just my opinion, but I think you would be better off to draw the structures using a drawing program
> >> like MarvinSketch (free, java based) and save the structure as a SMILES file, MOL file, or SDF. You
> >> should be able to import any of those into R. A program like MarvinSketch will check the structure
> >> for errors as you draw it and keep to standardized formats.
> >>
> >> By the way, I see no error in the SMILEA string for the structure in your expamle so your error is
> >> not in the drawing part of the process. Even so, I try to keep to well established tools for basic
> >> tasks and Marvin as is well established as it gets.
> >>
> >> I would look for an example of what you are trying and see if you can get the example to work.
> >>
> >> LMH
> >>
> >>
> >> Luigi Marongiu wrote:
> >> > Hello,'
> >> > I have seen from this link
> >> > https://cran.r-project.org/web/packages/rcdk/vignettes/using-rcdk.html
> >> > that there is a way to draw chemical structures using R via rcdk package.
> >> > I tried to draw a simple structure but I got an error. What is it
> >> > missing? What is the correct syntax?
> >> > Thanks
> >> >
> >> > ```
> >> > library(rcdk)
> >> > smile <- 'c1ccccc1CC(=O)C(N)CC1CCCCOC1'
> >> > mol <- parse.smiles(smile)[[1]]
> >> > view.molecule.2d(mol)
> >> >> Error in view.molecule.2d(mol) : java.lang.NoSuchMethodError: <init>
> >> > ```
> >> >
> >> > ______________________________________________
> >> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> > https://stat.ethz.ch/mailman/listinfo/r-help
> >> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >> > and provide commented, minimal, self-contained, reproducible code.
> >> >
> >>
> >
> >
>
> --
> Sent from my phone. Please excuse my brevity.



-- 
Best regards,
Luigi


From ||or|@n@@|h|er @end|ng |rom un|-u|m@de  Tue Dec  6 15:08:52 2022
From: ||or|@n@@|h|er @end|ng |rom un|-u|m@de (Florian Sihler)
Date: Tue, 6 Dec 2022 15:08:52 +0100
Subject: [R] Preexisting Work on Data- and Control-Flow Analysis
Message-ID: <2d07c25f-e0da-bc87-a030-f3c24efdf677@uni-ulm.de>

Hello R-Help Mailinglist,

I hope I've found the correct mailing list for my question (if not, 
please point me to the correct one).
For my master's thesis I plan on creating and implementing a 
program-slicing algorithm for R-Programs using (probably only static) 
data- and control-flow analysis.
While researching the problem I was unable to find any preexisting work 
on the matter.
Does anyone here know of any preexisting work on data- and control-flow 
analysis (or even program slicing) in the context of R-Programs?
I would be really glad for any pointer in the right direction (or 
reasons for why doing that would be a stupid idea).

Regarding my background: I am a computer science student and usually 
program in C++, Java, TypeScript, and Haskell.
Although I've worked with R for roughly a year now (mostly in my spare 
time), I am still getting used to some constructs.

Thank you,
Florian


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Dec  6 19:19:05 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 6 Dec 2022 18:19:05 +0000
Subject: [R] netstat in R in linux...
Message-ID: <PU4P216MB156855820697E85B1E72E7BAC81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

dear members,

I am using free_port() in netstat package in R. It is working in windows but not in linux. It is throwing an error in linux. ANy help please?

THanking you,
Yours sincerely
AKSHAY M KULKARNI

	[[alternative HTML version deleted]]


From henr|k@bengt@@on @end|ng |rom gm@||@com  Tue Dec  6 19:23:44 2022
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Tue, 6 Dec 2022 10:23:44 -0800
Subject: [R] netstat in R in linux...
In-Reply-To: <PU4P216MB156855820697E85B1E72E7BAC81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB156855820697E85B1E72E7BAC81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAFDcVCSZp6evNZ41OAYur1NbNyYhrt+SDWodFaj_bntbG5iK0w@mail.gmail.com>

What's the error?!?

/Henrik

On Tue, Dec 6, 2022 at 10:19 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> dear members,
>
> I am using free_port() in netstat package in R. It is working in windows but not in linux. It is throwing an error in linux. ANy help please?
>
> THanking you,
> Yours sincerely
> AKSHAY M KULKARNI
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Tue Dec  6 19:32:08 2022
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Tue, 6 Dec 2022 19:32:08 +0100
Subject: [R] confusion about dev.prev()
In-Reply-To: <CA+hbrhUOcDixt+B8+bVBRpv+MfyePDS2Jjv48BgaQ_LMmEUpJg@mail.gmail.com>
References: <CA+hbrhXTs45XYk0J8hXOpq4iSmwnxZ_eWoC6yCNE8etgHyB7Mw@mail.gmail.com>
 <20221205163834.0c8517ae@arachnoid>
 <CA+hbrhUOcDixt+B8+bVBRpv+MfyePDS2Jjv48BgaQ_LMmEUpJg@mail.gmail.com>
Message-ID: <25487.35496.190761.552898@stat.math.ethz.ch>

>>>>> Peter Langfelder 
>>>>>     on Mon, 5 Dec 2022 21:40:13 +0800 writes:

    > Ah, thanks, got it. Misread the help again...

... I think we all had ... and then known for a while  and then
forgot again ...

If you see how to improve the help page, so this happens less, ..
we'd look at it to add the improvement there.

Martin

    > Peter

    > On Mon, Dec 5, 2022 at 9:38 PM Ivan Krylov <krylov.r00t at gmail.com> wrote:
    >> 
    >> ? Mon, 5 Dec 2022 21:28:16 +0800
    >> Peter Langfelder <peter.langfelder at gmail.com> ?????:
    >> 
    >> > Open two devices, plot a plot, call dev.prev() and plot again. I
    >> > would expect the second plot to appear in the first device, but that
    >> > is not what happens; both plots appear in the second device.
    >> 
    >> Unfortunately, dev.prev() and dev.next() only return the number of the
    >> respective device. You need dev.set() to actually make the change.
    >> 
    >> --
    >> Best regards,
    >> Ivan

    > ______________________________________________
    > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    > https://stat.ethz.ch/mailman/listinfo/r-help
    > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    > and provide commented, minimal, self-contained, reproducible code.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Dec  6 19:41:15 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 6 Dec 2022 18:41:15 +0000
Subject: [R] netstat in R in linux...
In-Reply-To: <CAFDcVCSZp6evNZ41OAYur1NbNyYhrt+SDWodFaj_bntbG5iK0w@mail.gmail.com>
References: <PU4P216MB156855820697E85B1E72E7BAC81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAFDcVCSZp6evNZ41OAYur1NbNyYhrt+SDWodFaj_bntbG5iK0w@mail.gmail.com>
Message-ID: <PU4P216MB1568479E11D49AF24959EDA2C81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Henrik,
                        The error is:

> library(netstat)
> free_port()
sh: netstat: command not found
Error in system("netstat -n -a", intern = TRUE) :
  error in running command

Thanking you,
Yours sincerely
AKSHAY M KULKARNI
________________________________
From: Henrik Bengtsson <henrik.bengtsson at gmail.com>
Sent: Tuesday, December 6, 2022 11:53 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] netstat in R in linux...

What's the error?!?

/Henrik

On Tue, Dec 6, 2022 at 10:19 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> dear members,
>
> I am using free_port() in netstat package in R. It is working in windows but not in linux. It is throwing an error in linux. ANy help please?
>
> THanking you,
> Yours sincerely
> AKSHAY M KULKARNI
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From henr|k@bengt@@on @end|ng |rom gm@||@com  Tue Dec  6 19:49:15 2022
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Tue, 6 Dec 2022 10:49:15 -0800
Subject: [R] netstat in R in linux...
In-Reply-To: <PU4P216MB1568479E11D49AF24959EDA2C81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB156855820697E85B1E72E7BAC81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAFDcVCSZp6evNZ41OAYur1NbNyYhrt+SDWodFaj_bntbG5iK0w@mail.gmail.com>
 <PU4P216MB1568479E11D49AF24959EDA2C81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAFDcVCTGRORci+fgsB9ppbYmkRFZgKeuUHwU57tCC7SUnixnJw@mail.gmail.com>

Okay,

that means that the Linux machine where you run this on does not have
the 'netstat' software installed.  That is something that needs to be
installed outside of R.  For example, if it's Ubuntu, I think 'sudo
apt info net-tools' will do.

(Disclaimer: I'm the author)
A cross-platform alternative to netstat::free_port(), is
port4me::port4me(), which is also available from CRAN
(https://cran.r-project.org/package=port4me). It requires no external
tools, but R (>= 4.0.0).

/Henrik

On Tue, Dec 6, 2022 at 10:41 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> Dear Henrik,
>                         The error is:
>
> > library(netstat)
> > free_port()
> sh: netstat: command not found
> Error in system("netstat -n -a", intern = TRUE) :
>   error in running command
>
> Thanking you,
> Yours sincerely
> AKSHAY M KULKARNI
> ________________________________
> From: Henrik Bengtsson <henrik.bengtsson at gmail.com>
> Sent: Tuesday, December 6, 2022 11:53 PM
> To: akshay kulkarni <akshay_e4 at hotmail.com>
> Cc: R help Mailing list <r-help at r-project.org>
> Subject: Re: [R] netstat in R in linux...
>
> What's the error?!?
>
> /Henrik
>
> On Tue, Dec 6, 2022 at 10:19 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
> >
> > dear members,
> >
> > I am using free_port() in netstat package in R. It is working in windows but not in linux. It is throwing an error in linux. ANy help please?
> >
> > THanking you,
> > Yours sincerely
> > AKSHAY M KULKARNI
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Dec  6 20:00:15 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 6 Dec 2022 19:00:15 +0000
Subject: [R] netstat in R in linux...
In-Reply-To: <CAFDcVCTGRORci+fgsB9ppbYmkRFZgKeuUHwU57tCC7SUnixnJw@mail.gmail.com>
References: <PU4P216MB156855820697E85B1E72E7BAC81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAFDcVCSZp6evNZ41OAYur1NbNyYhrt+SDWodFaj_bntbG5iK0w@mail.gmail.com>
 <PU4P216MB1568479E11D49AF24959EDA2C81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAFDcVCTGRORci+fgsB9ppbYmkRFZgKeuUHwU57tCC7SUnixnJw@mail.gmail.com>
Message-ID: <PU4P216MB156872F7954E380FBAD126DDC81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Henrik
                      It is working....thanks a lot! I had actually previously tried this:  sudo yum install netstat rather than sudo yum install net-tools

By the by, what advantages does port4me have as compared to netstat?

THanking you,
Yours sincerely,
AKSHAY M KULKARNI

________________________________
From: Henrik Bengtsson <henrik.bengtsson at gmail.com>
Sent: Wednesday, December 7, 2022 12:19 AM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] netstat in R in linux...

Okay,

that means that the Linux machine where you run this on does not have
the 'netstat' software installed.  That is something that needs to be
installed outside of R.  For example, if it's Ubuntu, I think 'sudo
apt info net-tools' will do.

(Disclaimer: I'm the author)
A cross-platform alternative to netstat::free_port(), is
port4me::port4me(), which is also available from CRAN
(https://cran.r-project.org/package=port4me). It requires no external
tools, but R (>= 4.0.0).

/Henrik

On Tue, Dec 6, 2022 at 10:41 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> Dear Henrik,
>                         The error is:
>
> > library(netstat)
> > free_port()
> sh: netstat: command not found
> Error in system("netstat -n -a", intern = TRUE) :
>   error in running command
>
> Thanking you,
> Yours sincerely
> AKSHAY M KULKARNI
> ________________________________
> From: Henrik Bengtsson <henrik.bengtsson at gmail.com>
> Sent: Tuesday, December 6, 2022 11:53 PM
> To: akshay kulkarni <akshay_e4 at hotmail.com>
> Cc: R help Mailing list <r-help at r-project.org>
> Subject: Re: [R] netstat in R in linux...
>
> What's the error?!?
>
> /Henrik
>
> On Tue, Dec 6, 2022 at 10:19 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
> >
> > dear members,
> >
> > I am using free_port() in netstat package in R. It is working in windows but not in linux. It is throwing an error in linux. ANy help please?
> >
> > THanking you,
> > Yours sincerely
> > AKSHAY M KULKARNI
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From henr|k@bengt@@on @end|ng |rom gm@||@com  Tue Dec  6 20:14:18 2022
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Tue, 6 Dec 2022 11:14:18 -0800
Subject: [R] netstat in R in linux...
In-Reply-To: <PU4P216MB156872F7954E380FBAD126DDC81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB156855820697E85B1E72E7BAC81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAFDcVCSZp6evNZ41OAYur1NbNyYhrt+SDWodFaj_bntbG5iK0w@mail.gmail.com>
 <PU4P216MB1568479E11D49AF24959EDA2C81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAFDcVCTGRORci+fgsB9ppbYmkRFZgKeuUHwU57tCC7SUnixnJw@mail.gmail.com>
 <PU4P216MB156872F7954E380FBAD126DDC81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAFDcVCT0qryUgvjLgtjNB6kS_jj8WTLnXkeF6Sut0mKqEMz78w@mail.gmail.com>

> By the by, what advantages does port4me have as compared to netstat?

As I said in my previous email, it doesn't require external tools, so
it's more likely to work out of the box for more people. But that
wasn't the main reason for this package. For the full motivation
behind port4me, see the vignette
<https://cran.r-project.org/web/packages/port4me/vignettes/port4me-overview.html>.

/Henrik

On Tue, Dec 6, 2022 at 11:00 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> Dear Henrik
>                       It is working....thanks a lot! I had actually previously tried this:  sudo yum install netstat rather than sudo yum install net-tools
>
> By the by, what advantages does port4me have as compared to netstat?
>
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
> ________________________________
> From: Henrik Bengtsson <henrik.bengtsson at gmail.com>
> Sent: Wednesday, December 7, 2022 12:19 AM
> To: akshay kulkarni <akshay_e4 at hotmail.com>
> Cc: R help Mailing list <r-help at r-project.org>
> Subject: Re: [R] netstat in R in linux...
>
> Okay,
>
> that means that the Linux machine where you run this on does not have
> the 'netstat' software installed.  That is something that needs to be
> installed outside of R.  For example, if it's Ubuntu, I think 'sudo
> apt info net-tools' will do.
>
> (Disclaimer: I'm the author)
> A cross-platform alternative to netstat::free_port(), is
> port4me::port4me(), which is also available from CRAN
> (https://cran.r-project.org/package=port4me). It requires no external
> tools, but R (>= 4.0.0).
>
> /Henrik
>
> On Tue, Dec 6, 2022 at 10:41 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
> >
> > Dear Henrik,
> >                         The error is:
> >
> > > library(netstat)
> > > free_port()
> > sh: netstat: command not found
> > Error in system("netstat -n -a", intern = TRUE) :
> >   error in running command
> >
> > Thanking you,
> > Yours sincerely
> > AKSHAY M KULKARNI
> > ________________________________
> > From: Henrik Bengtsson <henrik.bengtsson at gmail.com>
> > Sent: Tuesday, December 6, 2022 11:53 PM
> > To: akshay kulkarni <akshay_e4 at hotmail.com>
> > Cc: R help Mailing list <r-help at r-project.org>
> > Subject: Re: [R] netstat in R in linux...
> >
> > What's the error?!?
> >
> > /Henrik
> >
> > On Tue, Dec 6, 2022 at 10:19 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
> > >
> > > dear members,
> > >
> > > I am using free_port() in netstat package in R. It is working in windows but not in linux. It is throwing an error in linux. ANy help please?
> > >
> > > THanking you,
> > > Yours sincerely
> > > AKSHAY M KULKARNI
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Dec  6 20:16:43 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 6 Dec 2022 19:16:43 +0000
Subject: [R] netstat in R in linux...
In-Reply-To: <CAFDcVCT0qryUgvjLgtjNB6kS_jj8WTLnXkeF6Sut0mKqEMz78w@mail.gmail.com>
References: <PU4P216MB156855820697E85B1E72E7BAC81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAFDcVCSZp6evNZ41OAYur1NbNyYhrt+SDWodFaj_bntbG5iK0w@mail.gmail.com>
 <PU4P216MB1568479E11D49AF24959EDA2C81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAFDcVCTGRORci+fgsB9ppbYmkRFZgKeuUHwU57tCC7SUnixnJw@mail.gmail.com>
 <PU4P216MB156872F7954E380FBAD126DDC81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAFDcVCT0qryUgvjLgtjNB6kS_jj8WTLnXkeF6Sut0mKqEMz78w@mail.gmail.com>
Message-ID: <PU4P216MB156846C44C2005475586CDFFC81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Henrik,
                       OK thanks a lot..

thanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Henrik Bengtsson <henrik.bengtsson at gmail.com>
Sent: Wednesday, December 7, 2022 12:44 AM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] netstat in R in linux...

> By the by, what advantages does port4me have as compared to netstat?

As I said in my previous email, it doesn't require external tools, so
it's more likely to work out of the box for more people. But that
wasn't the main reason for this package. For the full motivation
behind port4me, see the vignette
<https://cran.r-project.org/web/packages/port4me/vignettes/port4me-overview.html>.

/Henrik

On Tue, Dec 6, 2022 at 11:00 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> Dear Henrik
>                       It is working....thanks a lot! I had actually previously tried this:  sudo yum install netstat rather than sudo yum install net-tools
>
> By the by, what advantages does port4me have as compared to netstat?
>
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
> ________________________________
> From: Henrik Bengtsson <henrik.bengtsson at gmail.com>
> Sent: Wednesday, December 7, 2022 12:19 AM
> To: akshay kulkarni <akshay_e4 at hotmail.com>
> Cc: R help Mailing list <r-help at r-project.org>
> Subject: Re: [R] netstat in R in linux...
>
> Okay,
>
> that means that the Linux machine where you run this on does not have
> the 'netstat' software installed.  That is something that needs to be
> installed outside of R.  For example, if it's Ubuntu, I think 'sudo
> apt info net-tools' will do.
>
> (Disclaimer: I'm the author)
> A cross-platform alternative to netstat::free_port(), is
> port4me::port4me(), which is also available from CRAN
> (https://cran.r-project.org/package=port4me). It requires no external
> tools, but R (>= 4.0.0).
>
> /Henrik
>
> On Tue, Dec 6, 2022 at 10:41 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
> >
> > Dear Henrik,
> >                         The error is:
> >
> > > library(netstat)
> > > free_port()
> > sh: netstat: command not found
> > Error in system("netstat -n -a", intern = TRUE) :
> >   error in running command
> >
> > Thanking you,
> > Yours sincerely
> > AKSHAY M KULKARNI
> > ________________________________
> > From: Henrik Bengtsson <henrik.bengtsson at gmail.com>
> > Sent: Tuesday, December 6, 2022 11:53 PM
> > To: akshay kulkarni <akshay_e4 at hotmail.com>
> > Cc: R help Mailing list <r-help at r-project.org>
> > Subject: Re: [R] netstat in R in linux...
> >
> > What's the error?!?
> >
> > /Henrik
> >
> > On Tue, Dec 6, 2022 at 10:19 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
> > >
> > > dear members,
> > >
> > > I am using free_port() in netstat package in R. It is working in windows but not in linux. It is throwing an error in linux. ANy help please?
> > >
> > > THanking you,
> > > Yours sincerely
> > > AKSHAY M KULKARNI
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From petr@p|k@| @end|ng |rom prechez@@cz  Wed Dec  7 08:04:38 2022
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Wed, 7 Dec 2022 07:04:38 +0000
Subject: [R] if documentation
Message-ID: <7ce97d2bfae74ebd987d2d107ccacce2@SRVEXCHCM1302.precheza.cz>

Hallo all

 

Not sure if it is appropriate place but as I am not involved in r-devel list
I post here.

 

Documentation for Control (if, for, while, .) is missing "if else" command.
Although it can be find online elsewhere I believe that adding it either as
an example or as a third entry and paragraph about nested if's could be
beneficial.

 

if(cond) cons.expr  else if (cond) alt.expr else alt2.expr

 

Nested if expressions are better realized with "else if" instead of sequence
of plain "else" control statements especially when using several of them.

Best regards

Petr


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Wed Dec  7 12:16:03 2022
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Wed, 7 Dec 2022 12:16:03 +0100
Subject: [R] if documentation
In-Reply-To: <7ce97d2bfae74ebd987d2d107ccacce2@SRVEXCHCM1302.precheza.cz>
References: <7ce97d2bfae74ebd987d2d107ccacce2@SRVEXCHCM1302.precheza.cz>
Message-ID: <25488.30195.641103.103649@stat.math.ethz.ch>

>>>>> PIKAL Petr 
>>>>>     on Wed, 7 Dec 2022 07:04:38 +0000 writes:

    > Hallo all Not sure if it is appropriate place but as I am
    > not involved in r-devel list I post here.

 

    > Documentation for Control (if, for, while, .) is missing
    > "if else" command.  Although it can be find online
    > elsewhere I believe that adding it either as an example or
    > as a third entry and paragraph about nested if's could be
    > beneficial.

 

    > if(cond) cons.expr else if (cond) alt.expr else alt2.expr

    > Nested if expressions are better realized with "else if"
    > instead of sequence of plain "else" control statements
    > especially when using several of them.

I agree.  However there is no "else if" special.

As everything that *happens* in R is a function call (John Chambers),
indeed, `if` is a function too, with an unusual syntax which may
involve `else`.

If you look more closely, `if` is a function with 3 arguments,
where the last (3rd) is optional and has a default of NULL :

Some code towards proving the above :


(t1 <- if(TRUE)  1:3 )         # is identical to  if(TRUE) 1:3 else NULL
f1  <- if(FALSE) 1:3           # is identical to
f2  <- if(FALSE) 1:3 else NULL
identical(f1,f2)
f3  <- if(FALSE) 1:3 else 111

`if`(TRUE, 1:3)
`if`(TRUE, 1:3, NULL)

`if`(FALSE, 1:3)   # returns invisibly
`if`(FALSE, 1:3, NULL)
`if`(FALSE, 1:3, 111)

--------------

So, 'if(.) else'  or 'if(...) else if(..) ..'
etc are
all just versions of calling the `if` function sometimes, in a
nested way.


From petr@p|k@| @end|ng |rom prechez@@cz  Wed Dec  7 13:40:41 2022
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Wed, 7 Dec 2022 12:40:41 +0000
Subject: [R] if documentation
In-Reply-To: <25488.30195.641103.103649@stat.math.ethz.ch>
References: <7ce97d2bfae74ebd987d2d107ccacce2@SRVEXCHCM1302.precheza.cz>
 <25488.30195.641103.103649@stat.math.ethz.ch>
Message-ID: <a15adfc243a04143b2432b0b74eaec56@SRVEXCHCM1302.precheza.cz>

Hallo Martin

I understand. Anyway, it would not do any harm to add something like

x <- 11
if(x < 0) {print("weird")} else if(x >= 0 & x <= 9) {
print("too low")} else if (x > 9 & x <= 10) {
print("just enough")} else {
print("more than expected")}

to the help page for if.

Regards
Petr

> -----Original Message-----
> From: Martin Maechler <maechler at stat.math.ethz.ch>
> Sent: Wednesday, December 7, 2022 12:16 PM
> To: PIKAL Petr <petr.pikal at precheza.cz>
> Cc: R-help Mailing List <r-help at r-project.org>
> Subject: Re: [R] if documentation
> 
> >>>>> PIKAL Petr
> >>>>>     on Wed, 7 Dec 2022 07:04:38 +0000 writes:
> 
>     > Hallo all Not sure if it is appropriate place but as I am
>     > not involved in r-devel list I post here.
> 
> 
> 
>     > Documentation for Control (if, for, while, .) is missing
>     > "if else" command.  Although it can be find online
>     > elsewhere I believe that adding it either as an example or
>     > as a third entry and paragraph about nested if's could be
>     > beneficial.
> 
> 
> 
>     > if(cond) cons.expr else if (cond) alt.expr else alt2.expr
> 
>     > Nested if expressions are better realized with "else if"
>     > instead of sequence of plain "else" control statements
>     > especially when using several of them.
> 
> I agree.  However there is no "else if" special.
> 
> As everything that *happens* in R is a function call (John Chambers),
indeed, `if`
> is a function too, with an unusual syntax which may involve `else`.
> 
> If you look more closely, `if` is a function with 3 arguments, where the
last (3rd)
> is optional and has a default of NULL :
> 
> Some code towards proving the above :
> 
> 
> (t1 <- if(TRUE)  1:3 )         # is identical to  if(TRUE) 1:3 else NULL
> f1  <- if(FALSE) 1:3           # is identical to
> f2  <- if(FALSE) 1:3 else NULL
> identical(f1,f2)
> f3  <- if(FALSE) 1:3 else 111
> 
> `if`(TRUE, 1:3)
> `if`(TRUE, 1:3, NULL)
> 
> `if`(FALSE, 1:3)   # returns invisibly
> `if`(FALSE, 1:3, NULL)
> `if`(FALSE, 1:3, 111)
> 
> --------------
> 
> So, 'if(.) else'  or 'if(...) else if(..) ..'
> etc are
> all just versions of calling the `if` function sometimes, in a nested way.

From @k@h@y_e4 @end|ng |rom hotm@||@com  Wed Dec  7 17:47:20 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Wed, 7 Dec 2022 16:47:20 +0000
Subject: [R] setting timezone variable permanently...
Message-ID: <PU4P216MB1568A3D864416963C9A032FAC81A9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear members,
                             I am setting the Time zone environment variable by this code:

> Sys.setenv(TZ = "Asia/Kolkata")

But I have to run it every time I open a new R session. How do I set it permanently?

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI

	[[alternative HTML version deleted]]


From m@rc_grt @end|ng |rom y@hoo@|r  Wed Dec  7 18:09:35 2022
From: m@rc_grt @end|ng |rom y@hoo@|r (Marc Girondot)
Date: Wed, 7 Dec 2022 18:09:35 +0100
Subject: [R] setting timezone variable permanently...
In-Reply-To: <PU4P216MB1568A3D864416963C9A032FAC81A9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB1568A3D864416963C9A032FAC81A9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <13c9a79d-b440-1487-bfce-abb0658ec1ff@yahoo.fr>

You can create a file .Rprofile in your home directory with this command.

Each time you will open R, it will run this command.

https://support.posit.co/hc/en-us/articles/360047157094-Managing-R-with-Rprofile-Renviron-Rprofile-site-Renviron-site-rsession-conf-and-repos-conf

Marc

Le 07/12/2022 ? 17:47, akshay kulkarni a ?crit?:
> Dear members,
>                               I am setting the Time zone environment variable by this code:
>
>> Sys.setenv(TZ = "Asia/Kolkata")
> But I have to run it every time I open a new R session. How do I set it permanently?
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Wed Dec  7 18:15:58 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Wed, 7 Dec 2022 17:15:58 +0000
Subject: [R] setting timezone variable permanently...
In-Reply-To: <13c9a79d-b440-1487-bfce-abb0658ec1ff@yahoo.fr>
References: <PU4P216MB1568A3D864416963C9A032FAC81A9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <13c9a79d-b440-1487-bfce-abb0658ec1ff@yahoo.fr>
Message-ID: <PU4P216MB1568067378A78CE0844BCFCBC81A9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Marc,
                     Thanks for the reply. However, the use of usethis package is very handy here: https://stackoverflow.com/questions/49738564/r-set-environment-variable-permanently. How do you compare your solution with that of using usethis package? Which is more effective?

THanking you,
Yours sincerely,
AKSHAY M KULKARNI

________________________________
From: Marc Girondot <marc_grt at yahoo.fr>
Sent: Wednesday, December 7, 2022 10:39 PM
To: r-help at r-project.org <r-help at r-project.org>; akshay_e4 at hotmail.com <akshay_e4 at hotmail.com>
Subject: Re: [R] setting timezone variable permanently...

You can create a file .Rprofile in your home directory with this command.

Each time you will open R, it will run this command.

https://support.posit.co/hc/en-us/articles/360047157094-Managing-R-with-Rprofile-Renviron-Rprofile-site-Renviron-site-rsession-conf-and-repos-conf

Marc

Le 07/12/2022 ? 17:47, akshay kulkarni a ?crit :
> Dear members,
>                               I am setting the Time zone environment variable by this code:
>
>> Sys.setenv(TZ = "Asia/Kolkata")
> But I have to run it every time I open a new R session. How do I set it permanently?
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Dec  7 18:14:24 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 07 Dec 2022 09:14:24 -0800
Subject: [R] setting timezone variable permanently...
In-Reply-To: <PU4P216MB1568A3D864416963C9A032FAC81A9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB1568A3D864416963C9A032FAC81A9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <11BEFF84-195A-47BA-B6A6-62D92D0DC651@dcn.davis.ca.us>

Technically this is a question regarding your operating system, since environment variables are propagated by the OS creation of processes and different OSes include different mechanisms for configuring them.

However, for practical purposes in R you can just put that statement into your .Rprofile file.

I would not recommend it though... rather you should include this statement in every script that depends on this assumption. Otherwise your script will have a hidden configuration dependency. In fact the timezone you set should be linked with the data files you are using... if you work with time data from different places then you should set it appropriately for that data at the point in your script where you do the import.

On December 7, 2022 8:47:20 AM PST, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>Dear members,
>                             I am setting the Time zone environment variable by this code:
>
>> Sys.setenv(TZ = "Asia/Kolkata")
>
>But I have to run it every time I open a new R session. How do I set it permanently?
>
>Thanking you,
>Yours sincerely,
>AKSHAY M KULKARNI
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Wed Dec  7 18:19:40 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Wed, 7 Dec 2022 17:19:40 +0000
Subject: [R] setting timezone variable permanently...
In-Reply-To: <11BEFF84-195A-47BA-B6A6-62D92D0DC651@dcn.davis.ca.us>
References: <PU4P216MB1568A3D864416963C9A032FAC81A9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <11BEFF84-195A-47BA-B6A6-62D92D0DC651@dcn.davis.ca.us>
Message-ID: <PU4P216MB1568CDF0D7EA30B4DAE96D7BC81A9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

dear Jeff,
                 THanks for your reply. Would you not recommend this  solution too : https://stackoverflow.com/questions/49738564/r-set-environment-variable-permanently ?

THanking you,
Yours sincerely,
AKSHAY M KULKARNI

________________________________
From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
Sent: Wednesday, December 7, 2022 10:44 PM
To: r-help at r-project.org <r-help at r-project.org>; akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
Subject: Re: [R] setting timezone variable permanently...

Technically this is a question regarding your operating system, since environment variables are propagated by the OS creation of processes and different OSes include different mechanisms for configuring them.

However, for practical purposes in R you can just put that statement into your .Rprofile file.

I would not recommend it though... rather you should include this statement in every script that depends on this assumption. Otherwise your script will have a hidden configuration dependency. In fact the timezone you set should be linked with the data files you are using... if you work with time data from different places then you should set it appropriately for that data at the point in your script where you do the import.

On December 7, 2022 8:47:20 AM PST, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>Dear members,
>                             I am setting the Time zone environment variable by this code:
>
>> Sys.setenv(TZ = "Asia/Kolkata")
>
>But I have to run it every time I open a new R session. How do I set it permanently?
>
>Thanking you,
>Yours sincerely,
>AKSHAY M KULKARNI
>
>       [[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

--
Sent from my phone. Please excuse my brevity.

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Dec  7 18:33:31 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 07 Dec 2022 09:33:31 -0800
Subject: [R] setting timezone variable permanently...
In-Reply-To: <PU4P216MB1568CDF0D7EA30B4DAE96D7BC81A9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB1568A3D864416963C9A032FAC81A9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <11BEFF84-195A-47BA-B6A6-62D92D0DC651@dcn.davis.ca.us>
 <PU4P216MB1568CDF0D7EA30B4DAE96D7BC81A9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CF6B3EE4-7608-4757-B36C-C9DF578A0EF9@dcn.davis.ca.us>

As I said, the tz is linked to your data, not where you OR your compute server are, so setting TZ in your R code or specifying it as the tz argument when you convert it are the best options.

If you choose to use your OS to set it that is up to you... but your code should not depend on that setting either way.

On December 7, 2022 9:19:40 AM PST, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>dear Jeff,
>                 THanks for your reply. Would you not recommend this  solution too : https://stackoverflow.com/questions/49738564/r-set-environment-variable-permanently ?
>
>THanking you,
>Yours sincerely,
>AKSHAY M KULKARNI
>
>________________________________
>From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>Sent: Wednesday, December 7, 2022 10:44 PM
>To: r-help at r-project.org <r-help at r-project.org>; akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
>Subject: Re: [R] setting timezone variable permanently...
>
>Technically this is a question regarding your operating system, since environment variables are propagated by the OS creation of processes and different OSes include different mechanisms for configuring them.
>
>However, for practical purposes in R you can just put that statement into your .Rprofile file.
>
>I would not recommend it though... rather you should include this statement in every script that depends on this assumption. Otherwise your script will have a hidden configuration dependency. In fact the timezone you set should be linked with the data files you are using... if you work with time data from different places then you should set it appropriately for that data at the point in your script where you do the import.
>
>On December 7, 2022 8:47:20 AM PST, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>>Dear members,
>>                             I am setting the Time zone environment variable by this code:
>>
>>> Sys.setenv(TZ = "Asia/Kolkata")
>>
>>But I have to run it every time I open a new R session. How do I set it permanently?
>>
>>Thanking you,
>>Yours sincerely,
>>AKSHAY M KULKARNI
>>
>>       [[alternative HTML version deleted]]
>>
>>______________________________________________
>>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>https://stat.ethz.ch/mailman/listinfo/r-help
>>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>and provide commented, minimal, self-contained, reproducible code.
>
>--
>Sent from my phone. Please excuse my brevity.

-- 
Sent from my phone. Please excuse my brevity.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Wed Dec  7 18:40:41 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Wed, 7 Dec 2022 17:40:41 +0000
Subject: [R] setting timezone variable permanently...
In-Reply-To: <CF6B3EE4-7608-4757-B36C-C9DF578A0EF9@dcn.davis.ca.us>
References: <PU4P216MB1568A3D864416963C9A032FAC81A9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <11BEFF84-195A-47BA-B6A6-62D92D0DC651@dcn.davis.ca.us>
 <PU4P216MB1568CDF0D7EA30B4DAE96D7BC81A9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CF6B3EE4-7608-4757-B36C-C9DF578A0EF9@dcn.davis.ca.us>
Message-ID: <PU4P216MB15682D532BBC414C88B6439EC81A9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Jeff,
                    thanks a lot....

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
Sent: Wednesday, December 7, 2022 11:03 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>; r-help at r-project.org <r-help at r-project.org>
Subject: Re: [R] setting timezone variable permanently...

As I said, the tz is linked to your data, not where you OR your compute server are, so setting TZ in your R code or specifying it as the tz argument when you convert it are the best options.

If you choose to use your OS to set it that is up to you... but your code should not depend on that setting either way.

On December 7, 2022 9:19:40 AM PST, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>dear Jeff,
>                 THanks for your reply. Would you not recommend this  solution too : https://stackoverflow.com/questions/49738564/r-set-environment-variable-permanently ?
>
>THanking you,
>Yours sincerely,
>AKSHAY M KULKARNI
>
>________________________________
>From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>Sent: Wednesday, December 7, 2022 10:44 PM
>To: r-help at r-project.org <r-help at r-project.org>; akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
>Subject: Re: [R] setting timezone variable permanently...
>
>Technically this is a question regarding your operating system, since environment variables are propagated by the OS creation of processes and different OSes include different mechanisms for configuring them.
>
>However, for practical purposes in R you can just put that statement into your .Rprofile file.
>
>I would not recommend it though... rather you should include this statement in every script that depends on this assumption. Otherwise your script will have a hidden configuration dependency. In fact the timezone you set should be linked with the data files you are using... if you work with time data from different places then you should set it appropriately for that data at the point in your script where you do the import.
>
>On December 7, 2022 8:47:20 AM PST, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>>Dear members,
>>                             I am setting the Time zone environment variable by this code:
>>
>>> Sys.setenv(TZ = "Asia/Kolkata")
>>
>>But I have to run it every time I open a new R session. How do I set it permanently?
>>
>>Thanking you,
>>Yours sincerely,
>>AKSHAY M KULKARNI
>>
>>       [[alternative HTML version deleted]]
>>
>>______________________________________________
>>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>https://stat.ethz.ch/mailman/listinfo/r-help
>>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>and provide commented, minimal, self-contained, reproducible code.
>
>--
>Sent from my phone. Please excuse my brevity.

--
Sent from my phone. Please excuse my brevity.

	[[alternative HTML version deleted]]


From r@oknz @end|ng |rom gm@||@com  Thu Dec  8 06:15:36 2022
From: r@oknz @end|ng |rom gm@||@com (Richard O'Keefe)
Date: Thu, 8 Dec 2022 18:15:36 +1300
Subject: [R] Preexisting Work on Data- and Control-Flow Analysis
In-Reply-To: <2d07c25f-e0da-bc87-a030-f3c24efdf677@uni-ulm.de>
References: <2d07c25f-e0da-bc87-a030-f3c24efdf677@uni-ulm.de>
Message-ID: <CABcYAdLMNkiODjdeBgyN1+v6tXuzjsyBRdUJwdZbdhySaFfcjg@mail.gmail.com>

You should probably look at the compiler.
One issue with data and control flow analysis in R is that
   f <- function (x, y) x + y
   f(ping, pong)
may invoke an S3 (see ?S3groupGeneric, Ops) or S4 (see ?Arith)
method, which might not have existed when f was analysed.
Indeed,
   f <- function (x, y) { foo(x); bar(y); x + y }
may change the method(s) bound to + in foo and/or bar, so the
bindings may change while f is running.

Then there's the whole "imperative programming with lazy
function argument evaluation" thing, which is definitely going
to make analysis a wee bit challenging.

And then there's this little gem:
> x <- 17
> f <- function () {
+   cat(x, "\n")
+   x <- 42
+   cat(x, "\n")
+ }
> f()
The first occurrence of x in f and the last occurrence of
x in f refer to *different* variables.  The last occurrence
of x refers to a local variable, but that local variable
did not exist until it was assigned to.  (Yep, the set of
local variables of a function is *dynamic*.)

While there are oh so many ways that R can make life horrible
for analysis, even R programmers don't go out of their way to
make life difficult for themselves.  It will probably be good
enough to define a "sane" subset of R, and a tool that reports
that an R function is outside that subset will be useful in its
own right because most of the time it won't be intentional.

I set out to write an R compiler 20+ years ago.  I filled
several exercise books with issues.  I suggest you start by
considering the question "what variables are in the environment
at this control point."  Start with ?get, ?assign, ?exists, ?rm.

On Wed, 7 Dec 2022 at 05:20, Florian Sihler <florian.sihler at uni-ulm.de>
wrote:

> Hello R-Help Mailinglist,
>
> I hope I've found the correct mailing list for my question (if not,
> please point me to the correct one).
> For my master's thesis I plan on creating and implementing a
> program-slicing algorithm for R-Programs using (probably only static)
> data- and control-flow analysis.
> While researching the problem I was unable to find any preexisting work
> on the matter.
> Does anyone here know of any preexisting work on data- and control-flow
> analysis (or even program slicing) in the context of R-Programs?
> I would be really glad for any pointer in the right direction (or
> reasons for why doing that would be a stupid idea).
>
> Regarding my background: I am a computer science student and usually
> program in C++, Java, TypeScript, and Haskell.
> Although I've worked with R for roughly a year now (mostly in my spare
> time), I am still getting used to some constructs.
>
> Thank you,
> Florian
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bog@@o@chr|@to|er @end|ng |rom gm@||@com  Thu Dec  8 16:26:12 2022
From: bog@@o@chr|@to|er @end|ng |rom gm@||@com (Christofer Bogaso)
Date: Thu, 8 Dec 2022 20:56:12 +0530
Subject: [R] How to access source code
Message-ID: <CA+dpOJnRSPy8asE+U4S3m7NzpWw9vBUVkrCNnz263AS9FLwMnQ@mail.gmail.com>

Hi,

I am trying to access the source code from package GCPM, where I am
interested to look into the source code of one function called LGD. So
I did below

> LGD

standardGeneric for "LGD" defined from package "GCPM"


function (this)

standardGeneric("LGD")

<bytecode: 0x7f9016a683a8>

<environment: 0x7f9016a91390>

Methods may be defined for arguments: this

Use  showMethods(LGD)  for currently available ones.

> showMethods(LGD)

Function: LGD (package GCPM)

this="GCPM"

However I still could not find the source code using above approach.

It would be very helpful if you can help to find the complete source
code of this function.


From kry|ov@r00t @end|ng |rom gm@||@com  Thu Dec  8 17:22:21 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Thu, 8 Dec 2022 19:22:21 +0300
Subject: [R] How to access source code
In-Reply-To: <CA+dpOJnRSPy8asE+U4S3m7NzpWw9vBUVkrCNnz263AS9FLwMnQ@mail.gmail.com>
References: <CA+dpOJnRSPy8asE+U4S3m7NzpWw9vBUVkrCNnz263AS9FLwMnQ@mail.gmail.com>
Message-ID: <20221208192221.63ff12c2@arachnoid>

? Thu, 8 Dec 2022 20:56:12 +0530
Christofer Bogaso <bogaso.christofer at gmail.com> ?????:

> > showMethods(LGD)  
> 
> Function: LGD (package GCPM)
> 
> this="GCPM"

Almost there! Try getMethod(LGD, signature = 'GCPM').

Not sure if this is going to work as written, but if you need to see an
S4 method definition, getMethod is the way.

-- 
Best regards,
Ivan


From mtmorg@n@b|oc @end|ng |rom gm@||@com  Thu Dec  8 17:26:29 2022
From: mtmorg@n@b|oc @end|ng |rom gm@||@com (Martin Morgan)
Date: Thu, 8 Dec 2022 16:26:29 +0000
Subject: [R] How to access source code
In-Reply-To: <20221208192221.63ff12c2@arachnoid>
References: <CA+dpOJnRSPy8asE+U4S3m7NzpWw9vBUVkrCNnz263AS9FLwMnQ@mail.gmail.com>
 <20221208192221.63ff12c2@arachnoid>
Message-ID: <BY5PR04MB66278B96C55512BDC106E0A3F91D9@BY5PR04MB6627.namprd04.prod.outlook.com>

showMethods(LGD, includeDef = TRUE) shows the implementation of all methods on the LGD generic, and can be a useful fast track to getting an overview of what is going on.

Martin Morgan

From: R-help <r-help-bounces at r-project.org> on behalf of Ivan Krylov <krylov.r00t at gmail.com>
Date: Thursday, December 8, 2022 at 11:23 AM
To: Christofer Bogaso <bogaso.christofer at gmail.com>
Cc: r-help <r-help at r-project.org>
Subject: Re: [R] How to access source code
? Thu, 8 Dec 2022 20:56:12 +0530
Christofer Bogaso <bogaso.christofer at gmail.com> ?????:

> > showMethods(LGD)
>
> Function: LGD (package GCPM)
>
> this="GCPM"

Almost there! Try getMethod(LGD, signature = 'GCPM').

Not sure if this is going to work as written, but if you need to see an
S4 method definition, getMethod is the way.

--
Best regards,
Ivan

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Fri Dec  9 02:05:47 2022
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Fri, 9 Dec 2022 01:05:47 +0000
Subject: [R] Plot a line using ggplot2
Message-ID: <MW4PR03MB63636F4BFB3EA690622689A2E21C9@MW4PR03MB6363.namprd03.prod.outlook.com>

Colleagues,

I am trying to plot a simple line using ggplot2. I get the axes, but I don't get the line. Please let me know what my error I am making.
Thank you,
John

# Define x and y values
PointEstx <- Estx+1.96*SE
PointEsty  <- 1

row2 <- cbind(PointEstx,PointEsty)
linedata<- data_frame(rbind(row1,row2))
linedata
# make sure we have a data frame
class(linedata)

#plot the data
ggplot(linedata,aes(x=PointEstx, y=PointEsty), geom_line())






From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Fri Dec  9 02:17:09 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Fri, 9 Dec 2022 02:17:09 +0100
Subject: [R] How to access source code
In-Reply-To: <BY5PR04MB66278B96C55512BDC106E0A3F91D9@BY5PR04MB6627.namprd04.prod.outlook.com>
References: <CA+dpOJnRSPy8asE+U4S3m7NzpWw9vBUVkrCNnz263AS9FLwMnQ@mail.gmail.com>
 <20221208192221.63ff12c2@arachnoid>
 <BY5PR04MB66278B96C55512BDC106E0A3F91D9@BY5PR04MB6627.namprd04.prod.outlook.com>
Message-ID: <1f5b622f-51be-1325-0014-cc4b54e021ea@statistik.tu-dortmund.de>

Or simply get and unpack the package sources.
Here you will also find the comments that are typically stripped out 
otherwise.

Best,
Uwe Ligges

On 08.12.2022 17:26, Martin Morgan wrote:
> showMethods(LGD, includeDef = TRUE) shows the implementation of all methods on the LGD generic, and can be a useful fast track to getting an overview of what is going on.
> 
> Martin Morgan
> 
> From: R-help <r-help-bounces at r-project.org> on behalf of Ivan Krylov <krylov.r00t at gmail.com>
> Date: Thursday, December 8, 2022 at 11:23 AM
> To: Christofer Bogaso <bogaso.christofer at gmail.com>
> Cc: r-help <r-help at r-project.org>
> Subject: Re: [R] How to access source code
> ? Thu, 8 Dec 2022 20:56:12 +0530
> Christofer Bogaso <bogaso.christofer at gmail.com> ?????:
> 
>>> showMethods(LGD)
>>
>> Function: LGD (package GCPM)
>>
>> this="GCPM"
> 
> Almost there! Try getMethod(LGD, signature = 'GCPM').
> 
> Not sure if this is going to work as written, but if you need to see an
> S4 method definition, getMethod is the way.
> 
> --
> Best regards,
> Ivan
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 
> 	[[alternative HTML version deleted]]
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Dec  9 02:18:12 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 08 Dec 2022 17:18:12 -0800
Subject: [R] Plot a line using ggplot2
In-Reply-To: <MW4PR03MB63636F4BFB3EA690622689A2E21C9@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <MW4PR03MB63636F4BFB3EA690622689A2E21C9@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <111FCC4A-D817-41BE-90A1-65DB194070E8@dcn.davis.ca.us>

Please run your code before you send it. Your example is not reproducible.

library(ggplot2)

linedata<- data.frame(
  PointEstx = c( 1, 2 )
, PointEsty = c( 1, 1.5 )
)
# make sure we have a data frame
str(linedata)

#plot the data
ggplot(
  linedata
, aes( x = PointEstx
     , y = PointEsty
     )
) + geom_line()

On December 8, 2022 5:05:47 PM PST, "Sorkin, John" <jsorkin at som.umaryland.edu> wrote:
>Colleagues,
>
>I am trying to plot a simple line using ggplot2. I get the axes, but I don't get the line. Please let me know what my error I am making.
>Thank you,
>John
>
># Define x and y values
>PointEstx <- Estx+1.96*SE
>PointEsty  <- 1
>
>row2 <- cbind(PointEstx,PointEsty)
>linedata<- data_frame(rbind(row1,row2))
>linedata
># make sure we have a data frame
>class(linedata)
>
>#plot the data
>ggplot(linedata,aes(x=PointEstx, y=PointEsty), geom_line())
>
>
>
>
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From tebert @end|ng |rom u||@edu  Fri Dec  9 05:40:14 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Fri, 9 Dec 2022 04:40:14 +0000
Subject: [R] Plot a line using ggplot2
In-Reply-To: <MW4PR03MB63636F4BFB3EA690622689A2E21C9@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <MW4PR03MB63636F4BFB3EA690622689A2E21C9@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <BN6PR2201MB15539129B13DEEE7E1565409CF1C9@BN6PR2201MB1553.namprd22.prod.outlook.com>

A number of problems.
The variable names are not helpful. PointEstx is not a point it is a value. I need an x and a y coordinate for a point.
row1 is not defined
While there is a function data.frame(), there is no data_frame(). Making this change gives an error that row1 is not defined. I solved the problem with row1<-row2+1.

The ggplot statement looks wrong.

Does this give you what you need?
ggplot(linedata,aes(x=PointEstx, y=PointEsty)) + geom_line()

Note I changed the comma to a plus sign and changed the brackets.

Regards,
Tim


-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Sorkin, John
Sent: Thursday, December 8, 2022 8:06 PM
To: r-help at r-project.org (r-help at r-project.org) <r-help at r-project.org>
Subject: [R] Plot a line using ggplot2

[External Email]

Colleagues,

I am trying to plot a simple line using ggplot2. I get the axes, but I don't get the line. Please let me know what my error I am making.
Thank you,
John

# Define x and y values
PointEstx <- Estx+1.96*SE
PointEsty  <- 1

row2 <- cbind(PointEstx,PointEsty)
linedata<- data_frame(rbind(row1,row2))
linedata
# make sure we have a data frame
class(linedata)

#plot the data
ggplot(linedata,aes(x=PointEstx, y=PointEsty), geom_line())





______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C5695e850b24347d9fcf908dad9818f28%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638061447740857132%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=KhRB4ZHKsoVlPRsAnufXXzfiJyRBEEv32P7bcAAiGBo%3D&amp;reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C5695e850b24347d9fcf908dad9818f28%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638061447740857132%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=DPlvmxCIwlF1WqKWawzSmJbosiFGjnLwFIMKK7hFAco%3D&amp;reserved=0
and provide commented, minimal, self-contained, reproducible code.


From d@v|dhughjone@ @end|ng |rom gm@||@com  Wed Dec  7 17:57:12 2022
From: d@v|dhughjone@ @end|ng |rom gm@||@com (David Hugh-Jones)
Date: Wed, 7 Dec 2022 16:57:12 +0000
Subject: [R] [R-pkgs] onetime 0.1.0: Run Code Only Once
Message-ID: <CAARY7kg9QnxFkNh_MMO1=xa4wMOet=McSFN1y1JTMK1d5F9MPQ@mail.gmail.com>

Dear all,

Onetime 0.1.0, a utility package of interest to package developers, is now
on CRAN:

https://cran.r-project.org/package=onetime

Onetime uses lockfiles to perform an action only once (ever, or with an
expiry date) on a given computer. For example, it can send a message or
warning:

for (i in 1:10) {
  onetime_message("This will be shown only once", id = "my-message")
}

It also lets you send a message and confirm the user doesn't need to see it
again:

onetime_message_confirm("User can opt not to show this message again",
                                             id = "my-confirm-message")

Onetime checks that you have permission to store files on the user's
computer, and allows package authors to ask for this permission using
check_ok_to_store().

Package authors can use onetime to print one-off informative messages for
new users, or to do other one-off actions.

Documentation is available at https://hughjonesd.github.io/onetime/.

Cheers,
David

	[[alternative HTML version deleted]]

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From cry@n @end|ng |rom b|ngh@mton@edu  Fri Dec  9 19:43:58 2022
From: cry@n @end|ng |rom b|ngh@mton@edu (Christopher Ryan)
Date: Fri, 9 Dec 2022 13:43:58 -0500
Subject: [R] increasing the width of dialog box generated by select.list()
Message-ID: <CAM+rpYmeouMRHdEsk=w45oZ_6nvVFTbCpM4qjGA=SRXBVocM6Q@mail.gmail.com>

You can see from the code below that the title of the dialog box is too
long for the width of the selection box. How might I widen the box?  Thanks.

--Chris Ryan

counties <- c("TIOGA", "BROOME", "ONTARIO", "ONONDAGA", "WESTCHESTER")

chosen.county <- select.list(counties, preselect = NULL, multiple = FALSE,
title = "Choose a single county of interest. Only  hospitals found in the
HERDS COVID-19 database are shown. This generally means counties containing
hospitals.", graphics = getOption("menu.graphics"))

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Fri Dec  9 20:36:21 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 9 Dec 2022 11:36:21 -0800
Subject: [R] 
 increasing the width of dialog box generated by select.list()
In-Reply-To: <CAM+rpYmeouMRHdEsk=w45oZ_6nvVFTbCpM4qjGA=SRXBVocM6Q@mail.gmail.com>
References: <CAM+rpYmeouMRHdEsk=w45oZ_6nvVFTbCpM4qjGA=SRXBVocM6Q@mail.gmail.com>
Message-ID: <CAGxFJbT52SHKL=vV5Sq8Lu4XMo3N=WPjhPM_2kEoNBcFf1x5og@mail.gmail.com>

You should use the graphics = TRUE option to make this reproducible. Also,
please post in plain text in future, though it made little difference here.
HTML can get messed up or stripped on this plain text list.

What is your OS and version? Windows and Mac are entirely different. How
are your running R? -- in an IDE like RStudio or Emacs? --  as a script?
-- in RGui?  Versions of all of these that apply?

On my Mac Ventura in RStudio 2022.07.2 Build 576 using the latest Xquartz,
it seems fine: the title doesn't fit in the box title and is truncated, but
it appears beneath it in full in the box, and I can resize the box if I
wish to.

-- Bert



On Fri, Dec 9, 2022 at 10:44 AM Christopher Ryan via R-help <
r-help at r-project.org> wrote:

> You can see from the code below that the title of the dialog box is too
> long for the width of the selection box. How might I widen the box?
> Thanks.
>
> --Chris Ryan
>
> counties <- c("TIOGA", "BROOME", "ONTARIO", "ONONDAGA", "WESTCHESTER")
>
> chosen.county <- select.list(counties, preselect = NULL, multiple = FALSE,
> title = "Choose a single county of interest. Only  hospitals found in the
> HERDS COVID-19 database are shown. This generally means counties containing
> hospitals.", graphics = getOption("menu.graphics"))
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From cry@n @end|ng |rom b|ngh@mton@edu  Fri Dec  9 20:52:49 2022
From: cry@n @end|ng |rom b|ngh@mton@edu (Christopher Ryan)
Date: Fri, 9 Dec 2022 14:52:49 -0500
Subject: [R] [External Email] Re: increasing the width of dialog box
 generated by select.list()
In-Reply-To: <CAGxFJbT52SHKL=vV5Sq8Lu4XMo3N=WPjhPM_2kEoNBcFf1x5og@mail.gmail.com>
References: <CAM+rpYmeouMRHdEsk=w45oZ_6nvVFTbCpM4qjGA=SRXBVocM6Q@mail.gmail.com>
 <CAGxFJbT52SHKL=vV5Sq8Lu4XMo3N=WPjhPM_2kEoNBcFf1x5og@mail.gmail.com>
Message-ID: <CAM+rpY=gW3iALHng4g03kxm=guCAGB2gNcaH38K3mM63TMr+Bw@mail.gmail.com>

Hmm, interesting. My default is to always post in plain text. Methinks
the web interface to our university's gmail might be up to no good;
wouldn't be the first time.  Will have to look into that. Hope this is
better.

At any rate: Windows 10. I use both Rgui and emacs ESS. in both of
those scenarios I'd like the box to open up wide enough be default to
display the entire title; I could put in a couple line breaks if
needed.

Currently, in Rgui or Emacs/ESS, with graphics = TRUE or with my
original code, I cannot resize the ensuing dialog box.

Thanks.

--Chris Ryan


On Fri, Dec 9, 2022 at 2:36 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>
> You should use the graphics = TRUE option to make this reproducible. Also, please post in plain text in future, though it made little difference here. HTML can get messed up or stripped on this plain text list.
>
> What is your OS and version? Windows and Mac are entirely different. How are your running R? -- in an IDE like RStudio or Emacs? --  as a script?  -- in RGui?  Versions of all of these that apply?
>
> On my Mac Ventura in RStudio 2022.07.2 Build 576 using the latest Xquartz, it seems fine: the title doesn't fit in the box title and is truncated, but it appears beneath it in full in the box, and I can resize the box if I wish to.
>
> -- Bert
>
>
>
> On Fri, Dec 9, 2022 at 10:44 AM Christopher Ryan via R-help <r-help at r-project.org> wrote:
>>
>> You can see from the code below that the title of the dialog box is too
>> long for the width of the selection box. How might I widen the box?  Thanks.
>>
>> --Chris Ryan
>>
>> counties <- c("TIOGA", "BROOME", "ONTARIO", "ONONDAGA", "WESTCHESTER")
>>
>> chosen.county <- select.list(counties, preselect = NULL, multiple = FALSE,
>> title = "Choose a single county of interest. Only  hospitals found in the
>> HERDS COVID-19 database are shown. This generally means counties containing
>> hospitals.", graphics = getOption("menu.graphics"))
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From L@urentRHe|p @end|ng |rom |ree@|r  Sat Dec 10 15:15:56 2022
From: L@urentRHe|p @end|ng |rom |ree@|r (Laurent Rhelp)
Date: Sat, 10 Dec 2022 15:15:56 +0100
Subject: [R] lattice: how to use a log scale on the x-axis with the bwplot
 function
Message-ID: <b430486e-3ef3-48bd-beae-a2e528aa6950@free.fr>

Dear R-Help list,

 ?? I would like to use bwplot from the lattice package with a log scale 
both on
the x-axis and the y-axis but I do not know how to do that because I do 
not know
how to change the factor x-axis in a numeric x-axis.

 ?Here is my example:


library(lattice)

# the mock data
y <- runif(100000,min=0, max=500)
x <- seq(0,500,length=length(y))
# I cut the x variable to create a factor variable in order to calculate 
the boxes
groups <- cut(x,10,ordered_result = TRUE)
# creating the dataframe for the lattice functions
DF <- data.frame( x= x , y = y, groups = groups)


## ok for xyplot
xyplot(?? y ~ x
 ????????? , data=DF
 ????????? , scales = list(
 ??????????? y = list(log=T)
 ??????????? , x = list(log=T)

 ????????? )
)

## ok for bwplot with the log scale for the y-axis
bwplot( y ~ groups
 ????????? , data=DF
 ????????? , scales = list(
 ??????????? y = list(log=T)
 ??????????? #???? , x = list(log=T)

 ????????? )
)



## Non ok for bwplot with the log scale for the x-axis
bwplot( y ~ groups
 ??????? , data=DF
 ??????? , scales = list(
 ????????????? y = list(log=T)
 ??????????? , x = list(log=T)

 ??????? )
)
which gives an error because the x-axis is a factor, I would like to 
replace it
for the display by the meddle of every class for example and put a log 
scale on the x-axis.

Thank you for your help
Best regards
Laurent



-- 
Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
www.avast.com


From deep@y@n@@@rk@r @end|ng |rom gm@||@com  Sat Dec 10 17:02:10 2022
From: deep@y@n@@@rk@r @end|ng |rom gm@||@com (Deepayan Sarkar)
Date: Sat, 10 Dec 2022 21:32:10 +0530
Subject: [R] 
 lattice: how to use a log scale on the x-axis with the bwplot
 function
In-Reply-To: <b430486e-3ef3-48bd-beae-a2e528aa6950@free.fr>
References: <b430486e-3ef3-48bd-beae-a2e528aa6950@free.fr>
Message-ID: <CADfFDC5e6zR44HjAG_sV90jkyH2=LkuwogyHFQVHOZqknYn0wQ@mail.gmail.com>

Log-scales for the "factor" variable in bwplot() is not allowed.

You could, however, use the panel function panel.bwplot() with
xyplot(num ~ num). The potential problem with that is the box widths,
which panel.bwplot() will not know how to compute.

See if the following gives you a reasonable starting point:

DF <- within(DF, m <- tapply(y, groups, mean))
xyplot(y ~ m, DF, scales = list(log = TRUE),
       panel = panel.bwplot, horizontal = FALSE,
       box.width = .0001)

Best,
-Deepayan

On Sat, Dec 10, 2022 at 7:46 PM Laurent Rhelp <LaurentRHelp at free.fr> wrote:
>
> Dear R-Help list,
>
>     I would like to use bwplot from the lattice package with a log scale
> both on
> the x-axis and the y-axis but I do not know how to do that because I do
> not know
> how to change the factor x-axis in a numeric x-axis.
>
>   Here is my example:
>
>
> library(lattice)
>
> # the mock data
> y <- runif(100000,min=0, max=500)
> x <- seq(0,500,length=length(y))
> # I cut the x variable to create a factor variable in order to calculate
> the boxes
> groups <- cut(x,10,ordered_result = TRUE)
> # creating the dataframe for the lattice functions
> DF <- data.frame( x= x , y = y, groups = groups)
>
>
> ## ok for xyplot
> xyplot(   y ~ x
>            , data=DF
>            , scales = list(
>              y = list(log=T)
>              , x = list(log=T)
>
>            )
> )
>
> ## ok for bwplot with the log scale for the y-axis
> bwplot( y ~ groups
>            , data=DF
>            , scales = list(
>              y = list(log=T)
>              #     , x = list(log=T)
>
>            )
> )
>
>
>
> ## Non ok for bwplot with the log scale for the x-axis
> bwplot( y ~ groups
>          , data=DF
>          , scales = list(
>                y = list(log=T)
>              , x = list(log=T)
>
>          )
> )
> which gives an error because the x-axis is a factor, I would like to
> replace it
> for the display by the meddle of every class for example and put a log
> scale on the x-axis.
>
> Thank you for your help
> Best regards
> Laurent
>
>
>
> --
> Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
> www.avast.com
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Sat Dec 10 19:20:37 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 10 Dec 2022 10:20:37 -0800
Subject: [R] 
 lattice: how to use a log scale on the x-axis with the bwplot
 function
In-Reply-To: <CADfFDC5e6zR44HjAG_sV90jkyH2=LkuwogyHFQVHOZqknYn0wQ@mail.gmail.com>
References: <b430486e-3ef3-48bd-beae-a2e528aa6950@free.fr>
 <CADfFDC5e6zR44HjAG_sV90jkyH2=LkuwogyHFQVHOZqknYn0wQ@mail.gmail.com>
Message-ID: <CAGxFJbSf8O-+96rOY6sqq2UMgg50Evnu3DtAc9VaJZDGAKQ+SA@mail.gmail.com>

If Deepayan's suggestion does not suit and especially *if* I understand
what you want to do correctly, then it seems to me that it is
straightforward to create the groups and group labels manually:

## in verbose detail to hopefully improve clarity
set.seed(123)  ## for reprex
y <- runif(40,min=0, max= 10)  ##*small* reprex
## cut y into 5 equally spaced groups labeled by log10 of the center
## of the intervals
yrng <- range(y)
eps <- .0001*c(-1,1)*diff(yrng) ## see ?cut
yrng <-yrng + eps
delta <- diff(yrng)/5 # 5 = number of intervals
brks <- seq(yrng[1], yrng[2],length.out =6)
labs <- round(log10(brks[-1] - delta/2), 2) ## log10 (centers)
groups <- cut(y,breaks = brks,
              labels = paste0('10^',labs))
# creating the dataframe for the lattice functions
DF <- data.frame( y = y, groups = groups)

bwplot( y ~ groups
        , data=DF
        , scales = list(
           y = list(log=T)
        ),
)

## Of course, ignore if I have misunderstood.

Cheers,
Bert

On Sat, Dec 10, 2022 at 8:03 AM Deepayan Sarkar <deepayan.sarkar at gmail.com>
wrote:

> Log-scales for the "factor" variable in bwplot() is not allowed.
>
> You could, however, use the panel function panel.bwplot() with
> xyplot(num ~ num). The potential problem with that is the box widths,
> which panel.bwplot() will not know how to compute.
>
> See if the following gives you a reasonable starting point:
>
> DF <- within(DF, m <- tapply(y, groups, mean))
> xyplot(y ~ m, DF, scales = list(log = TRUE),
>        panel = panel.bwplot, horizontal = FALSE,
>        box.width = .0001)
>
> Best,
> -Deepayan
>
> On Sat, Dec 10, 2022 at 7:46 PM Laurent Rhelp <LaurentRHelp at free.fr>
> wrote:
> >
> > Dear R-Help list,
> >
> >     I would like to use bwplot from the lattice package with a log scale
> > both on
> > the x-axis and the y-axis but I do not know how to do that because I do
> > not know
> > how to change the factor x-axis in a numeric x-axis.
> >
> >   Here is my example:
> >
> >
> > library(lattice)
> >
> > # the mock data
> > y <- runif(100000,min=0, max=500)
> > x <- seq(0,500,length=length(y))
> > # I cut the x variable to create a factor variable in order to calculate
> > the boxes
> > groups <- cut(x,10,ordered_result = TRUE)
> > # creating the dataframe for the lattice functions
> > DF <- data.frame( x= x , y = y, groups = groups)
> >
> >
> > ## ok for xyplot
> > xyplot(   y ~ x
> >            , data=DF
> >            , scales = list(
> >              y = list(log=T)
> >              , x = list(log=T)
> >
> >            )
> > )
> >
> > ## ok for bwplot with the log scale for the y-axis
> > bwplot( y ~ groups
> >            , data=DF
> >            , scales = list(
> >              y = list(log=T)
> >              #     , x = list(log=T)
> >
> >            )
> > )
> >
> >
> >
> > ## Non ok for bwplot with the log scale for the x-axis
> > bwplot( y ~ groups
> >          , data=DF
> >          , scales = list(
> >                y = list(log=T)
> >              , x = list(log=T)
> >
> >          )
> > )
> > which gives an error because the x-axis is a factor, I would like to
> > replace it
> > for the display by the meddle of every class for example and put a log
> > scale on the x-axis.
> >
> > Thank you for your help
> > Best regards
> > Laurent
> >
> >
> >
> > --
> > Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
> > www.avast.com
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Sat Dec 10 22:36:18 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 10 Dec 2022 13:36:18 -0800
Subject: [R] 
 lattice: how to use a log scale on the x-axis with the bwplot
 function
In-Reply-To: <CAGxFJbSf8O-+96rOY6sqq2UMgg50Evnu3DtAc9VaJZDGAKQ+SA@mail.gmail.com>
References: <b430486e-3ef3-48bd-beae-a2e528aa6950@free.fr>
 <CADfFDC5e6zR44HjAG_sV90jkyH2=LkuwogyHFQVHOZqknYn0wQ@mail.gmail.com>
 <CAGxFJbSf8O-+96rOY6sqq2UMgg50Evnu3DtAc9VaJZDGAKQ+SA@mail.gmail.com>
Message-ID: <CAGxFJbR5XS3h4gAqFdOxczMaS9tBsNmB2wk9Cbgtg=zMYzGnEQ@mail.gmail.com>

... and here's a version where the x variable is different than y. It's
basically the same.


set.seed(123)
y <- runif(40,min=0, max= 10)
x <- seq(0,10, length = 40)
## 5 equally spaced groups labeled by log10 of the center
## of the intervals
xrng <- range(x)
eps <- .0001*c(-1,1)*diff(xrng) ## see ?cut
xrng <-xrng + eps
delta <- diff(xrng)/5 # 5 = number of intervals
brks <- seq(xrng[1], xrng[2],length.out =6)
labs <- round(log10(brks[-1] - delta/2), 2) ## log10 (centers)
groups <- cut(x,breaks = brks, ordered_result = TRUE,
              labels = paste0('10^',labs))
# creating the dataframe for the lattice functions
DF <- data.frame( y = y, groups = groups)

bwplot( y ~ groups
        , data=DF
        , scales = list(
           y = list(log=T)
        ),
)

On Sat, Dec 10, 2022 at 10:20 AM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> If Deepayan's suggestion does not suit and especially *if* I understand
> what you want to do correctly, then it seems to me that it is
> straightforward to create the groups and group labels manually:
>
> ## in verbose detail to hopefully improve clarity
> set.seed(123)  ## for reprex
> y <- runif(40,min=0, max= 10)  ##*small* reprex
> ## cut y into 5 equally spaced groups labeled by log10 of the center
> ## of the intervals
> yrng <- range(y)
> eps <- .0001*c(-1,1)*diff(yrng) ## see ?cut
> yrng <-yrng + eps
> delta <- diff(yrng)/5 # 5 = number of intervals
> brks <- seq(yrng[1], yrng[2],length.out =6)
> labs <- round(log10(brks[-1] - delta/2), 2) ## log10 (centers)
> groups <- cut(y,breaks = brks,
>               labels = paste0('10^',labs))
> # creating the dataframe for the lattice functions
> DF <- data.frame( y = y, groups = groups)
>
> bwplot( y ~ groups
>         , data=DF
>         , scales = list(
>            y = list(log=T)
>         ),
> )
>
> ## Of course, ignore if I have misunderstood.
>
> Cheers,
> Bert
>
> On Sat, Dec 10, 2022 at 8:03 AM Deepayan Sarkar <deepayan.sarkar at gmail.com>
> wrote:
>
>> Log-scales for the "factor" variable in bwplot() is not allowed.
>>
>> You could, however, use the panel function panel.bwplot() with
>> xyplot(num ~ num). The potential problem with that is the box widths,
>> which panel.bwplot() will not know how to compute.
>>
>> See if the following gives you a reasonable starting point:
>>
>> DF <- within(DF, m <- tapply(y, groups, mean))
>> xyplot(y ~ m, DF, scales = list(log = TRUE),
>>        panel = panel.bwplot, horizontal = FALSE,
>>        box.width = .0001)
>>
>> Best,
>> -Deepayan
>>
>> On Sat, Dec 10, 2022 at 7:46 PM Laurent Rhelp <LaurentRHelp at free.fr>
>> wrote:
>> >
>> > Dear R-Help list,
>> >
>> >     I would like to use bwplot from the lattice package with a log scale
>> > both on
>> > the x-axis and the y-axis but I do not know how to do that because I do
>> > not know
>> > how to change the factor x-axis in a numeric x-axis.
>> >
>> >   Here is my example:
>> >
>> >
>> > library(lattice)
>> >
>> > # the mock data
>> > y <- runif(100000,min=0, max=500)
>> > x <- seq(0,500,length=length(y))
>> > # I cut the x variable to create a factor variable in order to calculate
>> > the boxes
>> > groups <- cut(x,10,ordered_result = TRUE)
>> > # creating the dataframe for the lattice functions
>> > DF <- data.frame( x= x , y = y, groups = groups)
>> >
>> >
>> > ## ok for xyplot
>> > xyplot(   y ~ x
>> >            , data=DF
>> >            , scales = list(
>> >              y = list(log=T)
>> >              , x = list(log=T)
>> >
>> >            )
>> > )
>> >
>> > ## ok for bwplot with the log scale for the y-axis
>> > bwplot( y ~ groups
>> >            , data=DF
>> >            , scales = list(
>> >              y = list(log=T)
>> >              #     , x = list(log=T)
>> >
>> >            )
>> > )
>> >
>> >
>> >
>> > ## Non ok for bwplot with the log scale for the x-axis
>> > bwplot( y ~ groups
>> >          , data=DF
>> >          , scales = list(
>> >                y = list(log=T)
>> >              , x = list(log=T)
>> >
>> >          )
>> > )
>> > which gives an error because the x-axis is a factor, I would like to
>> > replace it
>> > for the display by the meddle of every class for example and put a log
>> > scale on the x-axis.
>> >
>> > Thank you for your help
>> > Best regards
>> > Laurent
>> >
>> >
>> >
>> > --
>> > Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
>> > www.avast.com
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From L@urentRHe|p @end|ng |rom |ree@|r  Sun Dec 11 10:03:13 2022
From: L@urentRHe|p @end|ng |rom |ree@|r (Laurent Rhelp)
Date: Sun, 11 Dec 2022 10:03:13 +0100
Subject: [R] 
 lattice: how to use a log scale on the x-axis with the bwplot
 function
In-Reply-To: <CADfFDC5e6zR44HjAG_sV90jkyH2=LkuwogyHFQVHOZqknYn0wQ@mail.gmail.com>
References: <b430486e-3ef3-48bd-beae-a2e528aa6950@free.fr>
 <CADfFDC5e6zR44HjAG_sV90jkyH2=LkuwogyHFQVHOZqknYn0wQ@mail.gmail.com>
Message-ID: <13b1f87b-cce5-6421-768f-22c90e25289a@free.fr>

I understand the idea but I did not succeed.

Here is what I tried:

## 1. ?? middles of classes calculation

m <- tapply(DF$x, groups, mean)

## 2.???? create a new factor columns with the levels deduced from
##???????? the values of the middles of the classes
##

DF$m <- DF$groups
levels(DF$m) <- as.character(m)
DF$m <- as.numeric(levels(DF$m))[DF$m]

## 3. I verify with xyplot

xyplot(?? y ~ m
 ????????? , type = "p"
 ????????? , data=DF
 ????????? , scales = list(
 ??????????? y = list(log=T)
 ??????????? , x = list(log=T)

 ????????? )
)
## 4. I use the panel.groups and panel.bwplot to display the boxplots 
without success

xyplot(?? y ~ m
 ????????? , groups = groups
 ????????? , type = "p"
 ????????? , data=DF
 ????????? , scales = list(
 ??????????? y = list(log=T)
 ??????????? , x = list(log=T)
 ??????????? , panel = panel.superpose
 ??????????? ,? panel.groups=function(x,y, group.number,...){
 ????????????? panel.xyplot(x,y,...)
 ????????????? panel.bwplot(x,y,...)
 ??????????? }
 ??????????? , horizontal = FALSE
 ??????????? , box.width = .0001
 ????????? )
)


thx



Le 10/12/2022 ? 17:02, Deepayan Sarkar a ?crit?:
> Log-scales for the "factor" variable in bwplot() is not allowed.
>
> You could, however, use the panel function panel.bwplot() with
> xyplot(num ~ num). The potential problem with that is the box widths,
> which panel.bwplot() will not know how to compute.
>
> See if the following gives you a reasonable starting point:
>
> DF <- within(DF, m <- tapply(y, groups, mean))
> xyplot(y ~ m, DF, scales = list(log = TRUE),
>         panel = panel.bwplot, horizontal = FALSE,
>         box.width = .0001)
>
> Best,
> -Deepayan
>
> On Sat, Dec 10, 2022 at 7:46 PM Laurent Rhelp <LaurentRHelp at free.fr> wrote:
>> Dear R-Help list,
>>
>>      I would like to use bwplot from the lattice package with a log scale
>> both on
>> the x-axis and the y-axis but I do not know how to do that because I do
>> not know
>> how to change the factor x-axis in a numeric x-axis.
>>
>>    Here is my example:
>>
>>
>> library(lattice)
>>
>> # the mock data
>> y <- runif(100000,min=0, max=500)
>> x <- seq(0,500,length=length(y))
>> # I cut the x variable to create a factor variable in order to calculate
>> the boxes
>> groups <- cut(x,10,ordered_result = TRUE)
>> # creating the dataframe for the lattice functions
>> DF <- data.frame( x= x , y = y, groups = groups)
>>
>>
>> ## ok for xyplot
>> xyplot(   y ~ x
>>             , data=DF
>>             , scales = list(
>>               y = list(log=T)
>>               , x = list(log=T)
>>
>>             )
>> )
>>
>> ## ok for bwplot with the log scale for the y-axis
>> bwplot( y ~ groups
>>             , data=DF
>>             , scales = list(
>>               y = list(log=T)
>>               #     , x = list(log=T)
>>
>>             )
>> )
>>
>>
>>
>> ## Non ok for bwplot with the log scale for the x-axis
>> bwplot( y ~ groups
>>           , data=DF
>>           , scales = list(
>>                 y = list(log=T)
>>               , x = list(log=T)
>>
>>           )
>> )
>> which gives an error because the x-axis is a factor, I would like to
>> replace it
>> for the display by the meddle of every class for example and put a log
>> scale on the x-axis.
>>
>> Thank you for your help
>> Best regards
>> Laurent
>>
>>
>>
>> --
>> Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
>> www.avast.com
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.



-- 
Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
www.avast.com


From L@urentRHe|p @end|ng |rom |ree@|r  Sun Dec 11 10:05:59 2022
From: L@urentRHe|p @end|ng |rom |ree@|r (Laurent Rhelp)
Date: Sun, 11 Dec 2022 10:05:59 +0100
Subject: [R] 
 lattice: how to use a log scale on the x-axis with the bwplot
 function
In-Reply-To: <CAGxFJbR5XS3h4gAqFdOxczMaS9tBsNmB2wk9Cbgtg=zMYzGnEQ@mail.gmail.com>
References: <b430486e-3ef3-48bd-beae-a2e528aa6950@free.fr>
 <CADfFDC5e6zR44HjAG_sV90jkyH2=LkuwogyHFQVHOZqknYn0wQ@mail.gmail.com>
 <CAGxFJbSf8O-+96rOY6sqq2UMgg50Evnu3DtAc9VaJZDGAKQ+SA@mail.gmail.com>
 <CAGxFJbR5XS3h4gAqFdOxczMaS9tBsNmB2wk9Cbgtg=zMYzGnEQ@mail.gmail.com>
Message-ID: <349fb525-b89e-1ca9-7e97-616a7b068c20@free.fr>

Ok for the labels but the x-axis is not displayed in log scale ?



Le 10/12/2022 ? 22:36, Bert Gunter a ?crit?:
> ... and here's a version where the x variable is different than y. 
> It's basically the same.
>
>
> set.seed(123)
> y <- runif(40,min=0, max= 10)
> x <- seq(0,10, length = 40)
> ## 5 equally spaced groups labeled by log10 of the center
> ## of the intervals
> xrng <- range(x)
> eps <- .0001*c(-1,1)*diff(xrng) ## see ?cut
> xrng <-xrng + eps
> delta <- diff(xrng)/5 # 5 = number of intervals
> brks <- seq(xrng[1], xrng[2],length.out =6)
> labs <- round(log10(brks[-1] - delta/2), 2) ## log10 (centers)
> groups <- cut(x,breaks = brks, ordered_result = TRUE,
> ? ? ? ? ? ? ? labels = paste0('10^',labs))
> # creating the dataframe for the lattice functions
> DF <- data.frame( y = y, groups = groups)
>
> bwplot( y ~ groups
> ? ? ? ? , data=DF
> ? ? ? ? , scales = list(
> ? ? ? ? ? ?y = list(log=T)
> ? ? ? ? ),
> )
>
> On Sat, Dec 10, 2022 at 10:20 AM Bert Gunter <bgunter.4567 at gmail.com> 
> wrote:
>
>     If Deepayan's suggestion does not suit and especially *if* I
>     understand what you want to do correctly, then it seems to me that
>     it is straightforward to create the groups and group labels manually:
>
>     ## in verbose detail to hopefully improve clarity
>     set.seed(123) ## for reprex
>     y <- runif(40,min=0, max= 10)? ##*small* reprex
>     ## cut y into 5 equally spaced groups labeled by log10 of the center
>     ## of the intervals
>     yrng <- range(y)
>     eps <- .0001*c(-1,1)*diff(yrng) ## see ?cut
>     yrng <-yrng + eps
>     delta <- diff(yrng)/5 # 5 = number of intervals
>     brks <- seq(yrng[1], yrng[2],length.out =6)
>     labs <- round(log10(brks[-1] - delta/2), 2) ## log10 (centers)
>     groups <- cut(y,breaks = brks,
>     ? ? ? ? ? ? ? labels = paste0('10^',labs))
>     # creating the dataframe for the lattice functions
>     DF <- data.frame( y = y, groups = groups)
>
>     bwplot( y ~ groups
>     ? ? ? ? , data=DF
>     ? ? ? ? , scales = list(
>     ? ? ? ? ? ?y = list(log=T)
>     ? ? ? ? ),
>     )
>
>     ## Of course, ignore if I have misunderstood.
>
>     Cheers,
>     Bert
>
>     On Sat, Dec 10, 2022 at 8:03 AM Deepayan Sarkar
>     <deepayan.sarkar at gmail.com> wrote:
>
>         Log-scales for the "factor" variable in bwplot() is not allowed.
>
>         You could, however, use the panel function panel.bwplot() with
>         xyplot(num ~ num). The potential problem with that is the box
>         widths,
>         which panel.bwplot() will not know how to compute.
>
>         See if the following gives you a reasonable starting point:
>
>         DF <- within(DF, m <- tapply(y, groups, mean))
>         xyplot(y ~ m, DF, scales = list(log = TRUE),
>         ? ? ? ?panel = panel.bwplot, horizontal = FALSE,
>         ? ? ? ?box.width = .0001)
>
>         Best,
>         -Deepayan
>
>         On Sat, Dec 10, 2022 at 7:46 PM Laurent Rhelp
>         <LaurentRHelp at free.fr> wrote:
>         >
>         > Dear R-Help list,
>         >
>         >? ? ?I would like to use bwplot from the lattice package with
>         a log scale
>         > both on
>         > the x-axis and the y-axis but I do not know how to do that
>         because I do
>         > not know
>         > how to change the factor x-axis in a numeric x-axis.
>         >
>         >? ?Here is my example:
>         >
>         >
>         > library(lattice)
>         >
>         > # the mock data
>         > y <- runif(100000,min=0, max=500)
>         > x <- seq(0,500,length=length(y))
>         > # I cut the x variable to create a factor variable in order
>         to calculate
>         > the boxes
>         > groups <- cut(x,10,ordered_result = TRUE)
>         > # creating the dataframe for the lattice functions
>         > DF <- data.frame( x= x , y = y, groups = groups)
>         >
>         >
>         > ## ok for xyplot
>         > xyplot(? ?y ~ x
>         >? ? ? ? ? ? , data=DF
>         >? ? ? ? ? ? , scales = list(
>         >? ? ? ? ? ? ? y = list(log=T)
>         >? ? ? ? ? ? ? , x = list(log=T)
>         >
>         >? ? ? ? ? ? )
>         > )
>         >
>         > ## ok for bwplot with the log scale for the y-axis
>         > bwplot( y ~ groups
>         >? ? ? ? ? ? , data=DF
>         >? ? ? ? ? ? , scales = list(
>         >? ? ? ? ? ? ? y = list(log=T)
>         >? ? ? ? ? ? ? #? ? ?, x = list(log=T)
>         >
>         >? ? ? ? ? ? )
>         > )
>         >
>         >
>         >
>         > ## Non ok for bwplot with the log scale for the x-axis
>         > bwplot( y ~ groups
>         >? ? ? ? ? , data=DF
>         >? ? ? ? ? , scales = list(
>         >? ? ? ? ? ? ? ? y = list(log=T)
>         >? ? ? ? ? ? ? , x = list(log=T)
>         >
>         >? ? ? ? ? )
>         > )
>         > which gives an error because the x-axis is a factor, I would
>         like to
>         > replace it
>         > for the display by the meddle of every class for example and
>         put a log
>         > scale on the x-axis.
>         >
>         > Thank you for your help
>         > Best regards
>         > Laurent
>         >
>         >
>         >
>         > --
>         > Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
>         > www.avast.com <http://www.avast.com>
>         >
>         > ______________________________________________
>         > R-help at r-project.org mailing list -- To UNSUBSCRIBE and
>         more, see
>         > https://stat.ethz.ch/mailman/listinfo/r-help
>         > PLEASE do read the posting guide
>         http://www.R-project.org/posting-guide.html
>         <http://www.R-project.org/posting-guide.html>
>         > and provide commented, minimal, self-contained, reproducible
>         code.
>
>         ______________________________________________
>         R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>         https://stat.ethz.ch/mailman/listinfo/r-help
>         PLEASE do read the posting guide
>         http://www.R-project.org/posting-guide.html
>         <http://www.R-project.org/posting-guide.html>
>         and provide commented, minimal, self-contained, reproducible code.
>


-- 
Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
www.avast.com
	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Sun Dec 11 16:12:39 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 11 Dec 2022 07:12:39 -0800
Subject: [R] 
 lattice: how to use a log scale on the x-axis with the bwplot
 function
In-Reply-To: <349fb525-b89e-1ca9-7e97-616a7b068c20@free.fr>
References: <b430486e-3ef3-48bd-beae-a2e528aa6950@free.fr>
 <CADfFDC5e6zR44HjAG_sV90jkyH2=LkuwogyHFQVHOZqknYn0wQ@mail.gmail.com>
 <CAGxFJbSf8O-+96rOY6sqq2UMgg50Evnu3DtAc9VaJZDGAKQ+SA@mail.gmail.com>
 <CAGxFJbR5XS3h4gAqFdOxczMaS9tBsNmB2wk9Cbgtg=zMYzGnEQ@mail.gmail.com>
 <349fb525-b89e-1ca9-7e97-616a7b068c20@free.fr>
Message-ID: <CAGxFJbRiFi007zWV2+Qn1RYgNst184pn43va=pU4cxc+X3+vMA@mail.gmail.com>

There can be **no log scale** for the x axis, only labels, if x is a factor
(Groups).

If what you mean is that there are no tick marks o the x-axis, they can be
added in my code in the scales list (for my reprex with 5 levels of group):

scales = list(
          alternating = 1  ## ticls only on bottom
        , y = list(log=T, tck = c(1,0))
        , x = list(at = 1:5, tck = 1)
        )

If this is not what you meant, you'll need to clarify ... or just move on.

-- Bert

On Sun, Dec 11, 2022 at 1:06 AM Laurent Rhelp <LaurentRHelp at free.fr> wrote:

> Ok for the labels but the x-axis is not displayed in log scale ?
>
>
>
> Le 10/12/2022 ? 22:36, Bert Gunter a ?crit :
>
> ... and here's a version where the x variable is different than y. It's
> basically the same.
>
>
> set.seed(123)
> y <- runif(40,min=0, max= 10)
> x <- seq(0,10, length = 40)
> ## 5 equally spaced groups labeled by log10 of the center
> ## of the intervals
> xrng <- range(x)
> eps <- .0001*c(-1,1)*diff(xrng) ## see ?cut
> xrng <-xrng + eps
> delta <- diff(xrng)/5 # 5 = number of intervals
> brks <- seq(xrng[1], xrng[2],length.out =6)
> labs <- round(log10(brks[-1] - delta/2), 2) ## log10 (centers)
> groups <- cut(x,breaks = brks, ordered_result = TRUE,
>               labels = paste0('10^',labs))
> # creating the dataframe for the lattice functions
> DF <- data.frame( y = y, groups = groups)
>
> bwplot( y ~ groups
>         , data=DF
>         , scales = list(
>            y = list(log=T)
>         ),
> )
>
> On Sat, Dec 10, 2022 at 10:20 AM Bert Gunter <bgunter.4567 at gmail.com>
> wrote:
>
>> If Deepayan's suggestion does not suit and especially *if* I understand
>> what you want to do correctly, then it seems to me that it is
>> straightforward to create the groups and group labels manually:
>>
>> ## in verbose detail to hopefully improve clarity
>> set.seed(123)  ## for reprex
>> y <- runif(40,min=0, max= 10)  ##*small* reprex
>> ## cut y into 5 equally spaced groups labeled by log10 of the center
>> ## of the intervals
>> yrng <- range(y)
>> eps <- .0001*c(-1,1)*diff(yrng) ## see ?cut
>> yrng <-yrng + eps
>> delta <- diff(yrng)/5 # 5 = number of intervals
>> brks <- seq(yrng[1], yrng[2],length.out =6)
>> labs <- round(log10(brks[-1] - delta/2), 2) ## log10 (centers)
>> groups <- cut(y,breaks = brks,
>>               labels = paste0('10^',labs))
>> # creating the dataframe for the lattice functions
>> DF <- data.frame( y = y, groups = groups)
>>
>> bwplot( y ~ groups
>>         , data=DF
>>         , scales = list(
>>            y = list(log=T)
>>         ),
>> )
>>
>> ## Of course, ignore if I have misunderstood.
>>
>> Cheers,
>> Bert
>>
>> On Sat, Dec 10, 2022 at 8:03 AM Deepayan Sarkar <
>> deepayan.sarkar at gmail.com> wrote:
>>
>>> Log-scales for the "factor" variable in bwplot() is not allowed.
>>>
>>> You could, however, use the panel function panel.bwplot() with
>>> xyplot(num ~ num). The potential problem with that is the box widths,
>>> which panel.bwplot() will not know how to compute.
>>>
>>> See if the following gives you a reasonable starting point:
>>>
>>> DF <- within(DF, m <- tapply(y, groups, mean))
>>> xyplot(y ~ m, DF, scales = list(log = TRUE),
>>>        panel = panel.bwplot, horizontal = FALSE,
>>>        box.width = .0001)
>>>
>>> Best,
>>> -Deepayan
>>>
>>> On Sat, Dec 10, 2022 at 7:46 PM Laurent Rhelp <LaurentRHelp at free.fr>
>>> wrote:
>>> >
>>> > Dear R-Help list,
>>> >
>>> >     I would like to use bwplot from the lattice package with a log
>>> scale
>>> > both on
>>> > the x-axis and the y-axis but I do not know how to do that because I do
>>> > not know
>>> > how to change the factor x-axis in a numeric x-axis.
>>> >
>>> >   Here is my example:
>>> >
>>> >
>>> > library(lattice)
>>> >
>>> > # the mock data
>>> > y <- runif(100000,min=0, max=500)
>>> > x <- seq(0,500,length=length(y))
>>> > # I cut the x variable to create a factor variable in order to
>>> calculate
>>> > the boxes
>>> > groups <- cut(x,10,ordered_result = TRUE)
>>> > # creating the dataframe for the lattice functions
>>> > DF <- data.frame( x= x , y = y, groups = groups)
>>> >
>>> >
>>> > ## ok for xyplot
>>> > xyplot(   y ~ x
>>> >            , data=DF
>>> >            , scales = list(
>>> >              y = list(log=T)
>>> >              , x = list(log=T)
>>> >
>>> >            )
>>> > )
>>> >
>>> > ## ok for bwplot with the log scale for the y-axis
>>> > bwplot( y ~ groups
>>> >            , data=DF
>>> >            , scales = list(
>>> >              y = list(log=T)
>>> >              #     , x = list(log=T)
>>> >
>>> >            )
>>> > )
>>> >
>>> >
>>> >
>>> > ## Non ok for bwplot with the log scale for the x-axis
>>> > bwplot( y ~ groups
>>> >          , data=DF
>>> >          , scales = list(
>>> >                y = list(log=T)
>>> >              , x = list(log=T)
>>> >
>>> >          )
>>> > )
>>> > which gives an error because the x-axis is a factor, I would like to
>>> > replace it
>>> > for the display by the meddle of every class for example and put a log
>>> > scale on the x-axis.
>>> >
>>> > Thank you for your help
>>> > Best regards
>>> > Laurent
>>> >
>>> >
>>> >
>>> > --
>>> > Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
>>> > www.avast.com
>>> >
>>> > ______________________________________________
>>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> > https://stat.ethz.ch/mailman/listinfo/r-help
>>> > PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> > and provide commented, minimal, self-contained, reproducible code.
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>
>
> <https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=emailclient> Sans
> virus.www.avast.com
> <https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=emailclient>
> <#m_7461191544387978914_DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>
>

	[[alternative HTML version deleted]]


From L@urentRHe|p @end|ng |rom |ree@|r  Sun Dec 11 16:38:34 2022
From: L@urentRHe|p @end|ng |rom |ree@|r (Laurent Rhelp)
Date: Sun, 11 Dec 2022 16:38:34 +0100
Subject: [R] 
 lattice: how to use a log scale on the x-axis with the bwplot
 function
In-Reply-To: <CAGxFJbRiFi007zWV2+Qn1RYgNst184pn43va=pU4cxc+X3+vMA@mail.gmail.com>
References: <b430486e-3ef3-48bd-beae-a2e528aa6950@free.fr>
 <CADfFDC5e6zR44HjAG_sV90jkyH2=LkuwogyHFQVHOZqknYn0wQ@mail.gmail.com>
 <CAGxFJbSf8O-+96rOY6sqq2UMgg50Evnu3DtAc9VaJZDGAKQ+SA@mail.gmail.com>
 <CAGxFJbR5XS3h4gAqFdOxczMaS9tBsNmB2wk9Cbgtg=zMYzGnEQ@mail.gmail.com>
 <349fb525-b89e-1ca9-7e97-616a7b068c20@free.fr>
 <CAGxFJbRiFi007zWV2+Qn1RYgNst184pn43va=pU4cxc+X3+vMA@mail.gmail.com>
Message-ID: <dd835c0b-c3b2-6159-70c0-22f42b10834a@free.fr>

Indeed, I have to clarify my problem.
I have to display? my physical measurements in a log-log representation. 
I can do that with xyplot from the lattice package. But I would like to 
show the dispersion of my measurement. So I wanted to use the bwplot 
function but it is not possible because the x-axis has to be a factor 
(as you say). In fact I would like to be able to draw boxplots on a 
graph according to a numerical location on a x-axis. I understood that I 
cannot use the lattice functions.


Le 11/12/2022 ? 16:12, Bert Gunter a ?crit?:
> There can be **no log scale** for the x axis, only labels, if x is a 
> factor (Groups).
>
> If what you mean is that there are no tick marks o the x-axis, they 
> can be added in my code in the scales list (for my reprex with 5 
> levels of group):
>
> scales = list(
> ? ? ? ? ? alternating = 1? ## ticls only on bottom
> ? ? ? ? , y = list(log=T, tck = c(1,0))
> ? ? ? ? , x = list(at = 1:5, tck = 1)
> ? ? ? ? )
>
> If this is not what you meant, you'll need to clarify ... or just move on.
>
> -- Bert
>
> On Sun, Dec 11, 2022 at 1:06 AM Laurent Rhelp <LaurentRHelp at free.fr> 
> wrote:
>
>     Ok for the labels but the x-axis is not displayed in log scale ?
>
>
>
>     Le 10/12/2022 ? 22:36, Bert Gunter a ?crit?:
>>     ... and here's a version where the x variable is different than
>>     y. It's basically the same.
>>
>>
>>     set.seed(123)
>>     y <- runif(40,min=0, max= 10)
>>     x <- seq(0,10, length = 40)
>>     ## 5 equally spaced groups labeled by log10 of the center
>>     ## of the intervals
>>     xrng <- range(x)
>>     eps <- .0001*c(-1,1)*diff(xrng) ## see ?cut
>>     xrng <-xrng + eps
>>     delta <- diff(xrng)/5 # 5 = number of intervals
>>     brks <- seq(xrng[1], xrng[2],length.out =6)
>>     labs <- round(log10(brks[-1] - delta/2), 2) ## log10 (centers)
>>     groups <- cut(x,breaks = brks, ordered_result = TRUE,
>>     ? ? ? ? ? ? ? labels = paste0('10^',labs))
>>     # creating the dataframe for the lattice functions
>>     DF <- data.frame( y = y, groups = groups)
>>
>>     bwplot( y ~ groups
>>     ? ? ? ? , data=DF
>>     ? ? ? ? , scales = list(
>>     ? ? ? ? ? ?y = list(log=T)
>>     ? ? ? ? ),
>>     )
>>
>>     On Sat, Dec 10, 2022 at 10:20 AM Bert Gunter
>>     <bgunter.4567 at gmail.com> wrote:
>>
>>         If Deepayan's suggestion does not suit and especially *if* I
>>         understand what you want to do correctly, then it seems to me
>>         that it is straightforward to create the groups and group
>>         labels manually:
>>
>>         ## in verbose detail to hopefully improve clarity
>>         set.seed(123) ## for reprex
>>         y <- runif(40,min=0, max= 10)? ##*small* reprex
>>         ## cut y into 5 equally spaced groups labeled by log10 of the
>>         center
>>         ## of the intervals
>>         yrng <- range(y)
>>         eps <- .0001*c(-1,1)*diff(yrng) ## see ?cut
>>         yrng <-yrng + eps
>>         delta <- diff(yrng)/5 # 5 = number of intervals
>>         brks <- seq(yrng[1], yrng[2],length.out =6)
>>         labs <- round(log10(brks[-1] - delta/2), 2) ## log10 (centers)
>>         groups <- cut(y,breaks = brks,
>>         ? ? ? ? ? ? ? labels = paste0('10^',labs))
>>         # creating the dataframe for the lattice functions
>>         DF <- data.frame( y = y, groups = groups)
>>
>>         bwplot( y ~ groups
>>         ? ? ? ? , data=DF
>>         ? ? ? ? , scales = list(
>>         ? ? ? ? ? ?y = list(log=T)
>>         ? ? ? ? ),
>>         )
>>
>>         ## Of course, ignore if I have misunderstood.
>>
>>         Cheers,
>>         Bert
>>
>>         On Sat, Dec 10, 2022 at 8:03 AM Deepayan Sarkar
>>         <deepayan.sarkar at gmail.com> wrote:
>>
>>             Log-scales for the "factor" variable in bwplot() is not
>>             allowed.
>>
>>             You could, however, use the panel function panel.bwplot()
>>             with
>>             xyplot(num ~ num). The potential problem with that is the
>>             box widths,
>>             which panel.bwplot() will not know how to compute.
>>
>>             See if the following gives you a reasonable starting point:
>>
>>             DF <- within(DF, m <- tapply(y, groups, mean))
>>             xyplot(y ~ m, DF, scales = list(log = TRUE),
>>             ? ? ? ?panel = panel.bwplot, horizontal = FALSE,
>>             ? ? ? ?box.width = .0001)
>>
>>             Best,
>>             -Deepayan
>>
>>             On Sat, Dec 10, 2022 at 7:46 PM Laurent Rhelp
>>             <LaurentRHelp at free.fr> wrote:
>>             >
>>             > Dear R-Help list,
>>             >
>>             >? ? ?I would like to use bwplot from the lattice package
>>             with a log scale
>>             > both on
>>             > the x-axis and the y-axis but I do not know how to do
>>             that because I do
>>             > not know
>>             > how to change the factor x-axis in a numeric x-axis.
>>             >
>>             >? ?Here is my example:
>>             >
>>             >
>>             > library(lattice)
>>             >
>>             > # the mock data
>>             > y <- runif(100000,min=0, max=500)
>>             > x <- seq(0,500,length=length(y))
>>             > # I cut the x variable to create a factor variable in
>>             order to calculate
>>             > the boxes
>>             > groups <- cut(x,10,ordered_result = TRUE)
>>             > # creating the dataframe for the lattice functions
>>             > DF <- data.frame( x= x , y = y, groups = groups)
>>             >
>>             >
>>             > ## ok for xyplot
>>             > xyplot(? ?y ~ x
>>             >? ? ? ? ? ? , data=DF
>>             >? ? ? ? ? ? , scales = list(
>>             >? ? ? ? ? ? ? y = list(log=T)
>>             >? ? ? ? ? ? ? , x = list(log=T)
>>             >
>>             >? ? ? ? ? ? )
>>             > )
>>             >
>>             > ## ok for bwplot with the log scale for the y-axis
>>             > bwplot( y ~ groups
>>             >? ? ? ? ? ? , data=DF
>>             >? ? ? ? ? ? , scales = list(
>>             >? ? ? ? ? ? ? y = list(log=T)
>>             >? ? ? ? ? ? ? #? ? ?, x = list(log=T)
>>             >
>>             >? ? ? ? ? ? )
>>             > )
>>             >
>>             >
>>             >
>>             > ## Non ok for bwplot with the log scale for the x-axis
>>             > bwplot( y ~ groups
>>             >? ? ? ? ? , data=DF
>>             >? ? ? ? ? , scales = list(
>>             >? ? ? ? ? ? ? ? y = list(log=T)
>>             >? ? ? ? ? ? ? , x = list(log=T)
>>             >
>>             >? ? ? ? ? )
>>             > )
>>             > which gives an error because the x-axis is a factor, I
>>             would like to
>>             > replace it
>>             > for the display by the meddle of every class for
>>             example and put a log
>>             > scale on the x-axis.
>>             >
>>             > Thank you for your help
>>             > Best regards
>>             > Laurent
>>             >
>>             >
>>             >
>>             > --
>>             > Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
>>             > www.avast.com <http://www.avast.com>
>>             >
>>             > ______________________________________________
>>             > R-help at r-project.org mailing list -- To UNSUBSCRIBE and
>>             more, see
>>             > https://stat.ethz.ch/mailman/listinfo/r-help
>>             > PLEASE do read the posting guide
>>             http://www.R-project.org/posting-guide.html
>>             <http://www.R-project.org/posting-guide.html>
>>             > and provide commented, minimal, self-contained,
>>             reproducible code.
>>
>>             ______________________________________________
>>             R-help at r-project.org mailing list -- To UNSUBSCRIBE and
>>             more, see
>>             https://stat.ethz.ch/mailman/listinfo/r-help
>>             PLEASE do read the posting guide
>>             http://www.R-project.org/posting-guide.html
>>             <http://www.R-project.org/posting-guide.html>
>>             and provide commented, minimal, self-contained,
>>             reproducible code.
>>
>
>
>     <https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=emailclient>
>     	Sans virus.www.avast.com
>     <https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=emailclient>
>
>
>     <#m_7461191544387978914_DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>
>

	[[alternative HTML version deleted]]


From deep@y@n@@@rk@r @end|ng |rom gm@||@com  Sun Dec 11 17:48:37 2022
From: deep@y@n@@@rk@r @end|ng |rom gm@||@com (Deepayan Sarkar)
Date: Sun, 11 Dec 2022 22:18:37 +0530
Subject: [R] 
 lattice: how to use a log scale on the x-axis with the bwplot
 function
In-Reply-To: <13b1f87b-cce5-6421-768f-22c90e25289a@free.fr>
References: <b430486e-3ef3-48bd-beae-a2e528aa6950@free.fr>
 <CADfFDC5e6zR44HjAG_sV90jkyH2=LkuwogyHFQVHOZqknYn0wQ@mail.gmail.com>
 <13b1f87b-cce5-6421-768f-22c90e25289a@free.fr>
Message-ID: <CADfFDC7QjzgALFdR4tyBdaBVTMbSqh17Xrd1EpVXEk=VcvN=oQ@mail.gmail.com>

On Sun, Dec 11, 2022 at 2:33 PM Laurent Rhelp <LaurentRHelp at free.fr> wrote:
>
> I understand the idea but I did not succeed.
>
> Here is what I tried:
>
> ## 1.    middles of classes calculation
>
> m <- tapply(DF$x, groups, mean)
>
> ## 2.     create a new factor columns with the levels deduced from
> ##         the values of the middles of the classes
> ##
>
> DF$m <- DF$groups
> levels(DF$m) <- as.character(m)
> DF$m <- as.numeric(levels(DF$m))[DF$m]
>
> ## 3. I verify with xyplot
>
> xyplot(   y ~ m
>            , type = "p"
>            , data=DF
>            , scales = list(
>              y = list(log=T)
>              , x = list(log=T)
>
>            )
> )
> ## 4. I use the panel.groups and panel.bwplot to display the boxplots
> without success
>
> xyplot(   y ~ m
>            , groups = groups
>            , type = "p"
>            , data=DF
>            , scales = list(
>              y = list(log=T)
>              , x = list(log=T)
>              , panel = panel.superpose
>              ,  panel.groups=function(x,y, group.number,...){
>                panel.xyplot(x,y,...)
>                panel.bwplot(x,y,...)
>              }
>              , horizontal = FALSE
>              , box.width = .0001
>            )
> )

You have a typo here: x = list(log=T) should be followed by a
close-paren to complete scales.

But I don't understand from your specification why you need groups and
panel.superpose etc. What is wrong with

xyplot( y ~ m
     ## , groups = groups # why?
     , data=DF
     , scales = list(
           y = list(log=T)
         , x = list(log=T)
       )
     , panel = panel.bwplot
     , horizontal = FALSE
     , box.width = .0001
       )

?

And sorry for my wrong calculation of m earlier, but you can simplify
your version to

m <- tapply(DF$x, groups, mean)
DF$m <- as.vector(m[DF$groups])

Best,
-Deepayan

>
>
> thx
>
>
>
> Le 10/12/2022 ? 17:02, Deepayan Sarkar a ?crit :
> > Log-scales for the "factor" variable in bwplot() is not allowed.
> >
> > You could, however, use the panel function panel.bwplot() with
> > xyplot(num ~ num). The potential problem with that is the box widths,
> > which panel.bwplot() will not know how to compute.
> >
> > See if the following gives you a reasonable starting point:
> >
> > DF <- within(DF, m <- tapply(y, groups, mean))
> > xyplot(y ~ m, DF, scales = list(log = TRUE),
> >         panel = panel.bwplot, horizontal = FALSE,
> >         box.width = .0001)
> >
> > Best,
> > -Deepayan
> >
> > On Sat, Dec 10, 2022 at 7:46 PM Laurent Rhelp <LaurentRHelp at free.fr> wrote:
> >> Dear R-Help list,
> >>
> >>      I would like to use bwplot from the lattice package with a log scale
> >> both on
> >> the x-axis and the y-axis but I do not know how to do that because I do
> >> not know
> >> how to change the factor x-axis in a numeric x-axis.
> >>
> >>    Here is my example:
> >>
> >>
> >> library(lattice)
> >>
> >> # the mock data
> >> y <- runif(100000,min=0, max=500)
> >> x <- seq(0,500,length=length(y))
> >> # I cut the x variable to create a factor variable in order to calculate
> >> the boxes
> >> groups <- cut(x,10,ordered_result = TRUE)
> >> # creating the dataframe for the lattice functions
> >> DF <- data.frame( x= x , y = y, groups = groups)
> >>
> >>
> >> ## ok for xyplot
> >> xyplot(   y ~ x
> >>             , data=DF
> >>             , scales = list(
> >>               y = list(log=T)
> >>               , x = list(log=T)
> >>
> >>             )
> >> )
> >>
> >> ## ok for bwplot with the log scale for the y-axis
> >> bwplot( y ~ groups
> >>             , data=DF
> >>             , scales = list(
> >>               y = list(log=T)
> >>               #     , x = list(log=T)
> >>
> >>             )
> >> )
> >>
> >>
> >>
> >> ## Non ok for bwplot with the log scale for the x-axis
> >> bwplot( y ~ groups
> >>           , data=DF
> >>           , scales = list(
> >>                 y = list(log=T)
> >>               , x = list(log=T)
> >>
> >>           )
> >> )
> >> which gives an error because the x-axis is a factor, I would like to
> >> replace it
> >> for the display by the meddle of every class for example and put a log
> >> scale on the x-axis.
> >>
> >> Thank you for your help
> >> Best regards
> >> Laurent
> >>
> >>
> >>
> >> --
> >> Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
> >> www.avast.com
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
>
>
>
> --
> Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
> www.avast.com


From @k@h@y_e4 @end|ng |rom hotm@||@com  Sun Dec 11 18:11:07 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sun, 11 Dec 2022 17:11:07 +0000
Subject: [R] remembering the state of an action in R....
Message-ID: <PU4P216MB156881546719112711AA26F7C81E9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear members,
                            I am a stock trader and using R for my research. I am monitoring stock prices in real time. I have the following code:

> if (sock price q, breaches a certain value Q) { expr1; expr2; expr3}

THe point is, expr1,expr2,expr3 should execute only once, i.e when q breaches Q. I thought of something like this:

> if( q >= Q ) { expr1; expr2; expr3;}

But expressions keep repeating as long as q >= Q, NOT when q breaches Q for the first time. I did some research on myself and came up with this:

> f <- function() {expr1; expr2; expr3; j <<- j + 1}
> j <- 1; counter[[j]] <- 1;
> if ((q >= Q)  && length(counter) == 1) {f}

I just want your help to know whether it is logically right or not. ARe not there any other possibility other than using the superassignment operator?

Also, any way how to remember when the real time price q, breaches a value Q, for the first time ( the price may come back to Q again afterwards) ?

THanking you,
Yours sincerely,
AKSHAY M KULKARNI

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sun Dec 11 18:28:50 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sun, 11 Dec 2022 17:28:50 +0000
Subject: [R] remembering the state of an action in R....
In-Reply-To: <PU4P216MB156881546719112711AA26F7C81E9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB156881546719112711AA26F7C81E9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <9ab4aa8b-be47-7f34-f231-2be38fd8faff@sapo.pt>

?s 17:11 de 11/12/2022, akshay kulkarni escreveu:
> Dear members,
>                              I am a stock trader and using R for my research. I am monitoring stock prices in real time. I have the following code:
> 
>> if (sock price q, breaches a certain value Q) { expr1; expr2; expr3}
> 
> THe point is, expr1,expr2,expr3 should execute only once, i.e when q breaches Q. I thought of something like this:
> 
>> if( q >= Q ) { expr1; expr2; expr3;}
> 
> But expressions keep repeating as long as q >= Q, NOT when q breaches Q for the first time. I did some research on myself and came up with this:
> 
>> f <- function() {expr1; expr2; expr3; j <<- j + 1}
>> j <- 1; counter[[j]] <- 1;
>> if ((q >= Q)  && length(counter) == 1) {f}
> 
> I just want your help to know whether it is logically right or not. ARe not there any other possibility other than using the superassignment operator?
> 
> Also, any way how to remember when the real time price q, breaches a value Q, for the first time ( the price may come back to Q again afterwards) ?
> 
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

Use environments. You will assign to a variable living in a special 
place, protected from the rest of the code, that you can access any time 
you want.
Something like the following.



f <- function(envir) {expr1; expr2; expr3; envir$j <- envir$j + 1L}

e <- new.env()
e$j <- 1L
# do you need counter for something else?
# if not delete these two lines
counter <- list()
counter[[e$j]] <- 1L
# this seems to be all you need, not counter
if ((q >= Q)  && e$j == 1L) {f(e)}



Hope this helps,

Rui Barradas


From L@urentRHe|p @end|ng |rom |ree@|r  Sun Dec 11 18:35:44 2022
From: L@urentRHe|p @end|ng |rom |ree@|r (Laurent Rhelp)
Date: Sun, 11 Dec 2022 18:35:44 +0100
Subject: [R] 
 lattice: how to use a log scale on the x-axis with the bwplot
 function
In-Reply-To: <CADfFDC7QjzgALFdR4tyBdaBVTMbSqh17Xrd1EpVXEk=VcvN=oQ@mail.gmail.com>
References: <b430486e-3ef3-48bd-beae-a2e528aa6950@free.fr>
 <CADfFDC5e6zR44HjAG_sV90jkyH2=LkuwogyHFQVHOZqknYn0wQ@mail.gmail.com>
 <13b1f87b-cce5-6421-768f-22c90e25289a@free.fr>
 <CADfFDC7QjzgALFdR4tyBdaBVTMbSqh17Xrd1EpVXEk=VcvN=oQ@mail.gmail.com>
Message-ID: <b223f88d-18f6-411e-842f-938f11791aa5@free.fr>

Excellent, it works.

But, may you please explain me how xyplot knows that it has to apply 
panel.bwplot on every groups according to the groups factor ? Because 
there is only one panel. I introduced the groups argument in order to 
apply the bwplot function only on the values of every group.


Le 11/12/2022 ? 17:48, Deepayan Sarkar a ?crit?:
> On Sun, Dec 11, 2022 at 2:33 PM Laurent Rhelp <LaurentRHelp at free.fr> wrote:
>> I understand the idea but I did not succeed.
>>
>> Here is what I tried:
>>
>> ## 1.    middles of classes calculation
>>
>> m <- tapply(DF$x, groups, mean)
>>
>> ## 2.     create a new factor columns with the levels deduced from
>> ##         the values of the middles of the classes
>> ##
>>
>> DF$m <- DF$groups
>> levels(DF$m) <- as.character(m)
>> DF$m <- as.numeric(levels(DF$m))[DF$m]
>>
>> ## 3. I verify with xyplot
>>
>> xyplot(   y ~ m
>>             , type = "p"
>>             , data=DF
>>             , scales = list(
>>               y = list(log=T)
>>               , x = list(log=T)
>>
>>             )
>> )
>> ## 4. I use the panel.groups and panel.bwplot to display the boxplots
>> without success
>>
>> xyplot(   y ~ m
>>             , groups = groups
>>             , type = "p"
>>             , data=DF
>>             , scales = list(
>>               y = list(log=T)
>>               , x = list(log=T)
>>               , panel = panel.superpose
>>               ,  panel.groups=function(x,y, group.number,...){
>>                 panel.xyplot(x,y,...)
>>                 panel.bwplot(x,y,...)
>>               }
>>               , horizontal = FALSE
>>               , box.width = .0001
>>             )
>> )
> You have a typo here: x = list(log=T) should be followed by a
> close-paren to complete scales.
>
> But I don't understand from your specification why you need groups and
> panel.superpose etc. What is wrong with
>
> xyplot( y ~ m
>       ## , groups = groups # why?
>       , data=DF
>       , scales = list(
>             y = list(log=T)
>           , x = list(log=T)
>         )
>       , panel = panel.bwplot
>       , horizontal = FALSE
>       , box.width = .0001
>         )
>
> ?
>
> And sorry for my wrong calculation of m earlier, but you can simplify
> your version to
>
> m <- tapply(DF$x, groups, mean)
> DF$m <- as.vector(m[DF$groups])
>
> Best,
> -Deepayan
>
>>
>> thx
>>
>>
>>
>> Le 10/12/2022 ? 17:02, Deepayan Sarkar a ?crit :
>>> Log-scales for the "factor" variable in bwplot() is not allowed.
>>>
>>> You could, however, use the panel function panel.bwplot() with
>>> xyplot(num ~ num). The potential problem with that is the box widths,
>>> which panel.bwplot() will not know how to compute.
>>>
>>> See if the following gives you a reasonable starting point:
>>>
>>> DF <- within(DF, m <- tapply(y, groups, mean))
>>> xyplot(y ~ m, DF, scales = list(log = TRUE),
>>>          panel = panel.bwplot, horizontal = FALSE,
>>>          box.width = .0001)
>>>
>>> Best,
>>> -Deepayan
>>>
>>> On Sat, Dec 10, 2022 at 7:46 PM Laurent Rhelp <LaurentRHelp at free.fr> wrote:
>>>> Dear R-Help list,
>>>>
>>>>       I would like to use bwplot from the lattice package with a log scale
>>>> both on
>>>> the x-axis and the y-axis but I do not know how to do that because I do
>>>> not know
>>>> how to change the factor x-axis in a numeric x-axis.
>>>>
>>>>     Here is my example:
>>>>
>>>>
>>>> library(lattice)
>>>>
>>>> # the mock data
>>>> y <- runif(100000,min=0, max=500)
>>>> x <- seq(0,500,length=length(y))
>>>> # I cut the x variable to create a factor variable in order to calculate
>>>> the boxes
>>>> groups <- cut(x,10,ordered_result = TRUE)
>>>> # creating the dataframe for the lattice functions
>>>> DF <- data.frame( x= x , y = y, groups = groups)
>>>>
>>>>
>>>> ## ok for xyplot
>>>> xyplot(   y ~ x
>>>>              , data=DF
>>>>              , scales = list(
>>>>                y = list(log=T)
>>>>                , x = list(log=T)
>>>>
>>>>              )
>>>> )
>>>>
>>>> ## ok for bwplot with the log scale for the y-axis
>>>> bwplot( y ~ groups
>>>>              , data=DF
>>>>              , scales = list(
>>>>                y = list(log=T)
>>>>                #     , x = list(log=T)
>>>>
>>>>              )
>>>> )
>>>>
>>>>
>>>>
>>>> ## Non ok for bwplot with the log scale for the x-axis
>>>> bwplot( y ~ groups
>>>>            , data=DF
>>>>            , scales = list(
>>>>                  y = list(log=T)
>>>>                , x = list(log=T)
>>>>
>>>>            )
>>>> )
>>>> which gives an error because the x-axis is a factor, I would like to
>>>> replace it
>>>> for the display by the meddle of every class for example and put a log
>>>> scale on the x-axis.
>>>>
>>>> Thank you for your help
>>>> Best regards
>>>> Laurent
>>>>
>>>>
>>>>
>>>> --
>>>> Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
>>>> www.avast.com
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>
>>
>> --
>> Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
>> www.avast.com


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sun Dec 11 18:41:28 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sun, 11 Dec 2022 17:41:28 +0000
Subject: [R] remembering the state of an action in R....
In-Reply-To: <9ab4aa8b-be47-7f34-f231-2be38fd8faff@sapo.pt>
References: <PU4P216MB156881546719112711AA26F7C81E9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <9ab4aa8b-be47-7f34-f231-2be38fd8faff@sapo.pt>
Message-ID: <ef8d4197-18c6-d79a-7941-fee0f9785f55@sapo.pt>

?s 17:28 de 11/12/2022, Rui Barradas escreveu:
> ?s 17:11 de 11/12/2022, akshay kulkarni escreveu:
>> Dear members,
>> ???????????????????????????? I am a stock trader and using R for my 
>> research. I am monitoring stock prices in real time. I have the 
>> following code:
>>
>>> if (sock price q, breaches a certain value Q) { expr1; expr2; expr3}
>>
>> THe point is, expr1,expr2,expr3 should execute only once, i.e when q 
>> breaches Q. I thought of something like this:
>>
>>> if( q >= Q ) { expr1; expr2; expr3;}
>>
>> But expressions keep repeating as long as q >= Q, NOT when q breaches 
>> Q for the first time. I did some research on myself and came up with 
>> this:
>>
>>> f <- function() {expr1; expr2; expr3; j <<- j + 1}
>>> j <- 1; counter[[j]] <- 1;
>>> if ((q >= Q)? && length(counter) == 1) {f}
>>
>> I just want your help to know whether it is logically right or not. 
>> ARe not there any other possibility other than using the 
>> superassignment operator?
>>
>> Also, any way how to remember when the real time price q, breaches a 
>> value Q, for the first time ( the price may come back to Q again 
>> afterwards) ?
>>
>> THanking you,
>> Yours sincerely,
>> AKSHAY M KULKARNI
>>
>> ????[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> Hello,
> 
> Use environments. You will assign to a variable living in a special 
> place, protected from the rest of the code, that you can access any time 
> you want.
> Something like the following.
> 
> 
> 
> f <- function(envir) {expr1; expr2; expr3; envir$j <- envir$j + 1L}
> 
> e <- new.env()
> e$j <- 1L
> # do you need counter for something else?
> # if not delete these two lines
> counter <- list()
> counter[[e$j]] <- 1L
> # this seems to be all you need, not counter
> if ((q >= Q)? && e$j == 1L) {f(e)}
> 
> 
> 
> Hope this helps,
> 
> Rui Barradas
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

Or with a counter.


f <- function(envir) {
   envir$counter <- envir$counter + 1L
   x <- pi
   x
}

q <- 10
Q <- 5
e <- new.env()
e$counter <- 0L
#
if ((q >= Q)  && e$counter == 0L) {
   print(f(e))
}
#> [1] 3.141593

if ((q >= Q)  && e$counter == 0L) {
   print(f(e))
} else message("it worked!")
#> it worked!


Hope this helps,

Rui Barradas


From @k@h@y_e4 @end|ng |rom hotm@||@com  Sun Dec 11 18:46:23 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sun, 11 Dec 2022 17:46:23 +0000
Subject: [R] remembering the state of an action in R....
In-Reply-To: <9ab4aa8b-be47-7f34-f231-2be38fd8faff@sapo.pt>
References: <PU4P216MB156881546719112711AA26F7C81E9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <9ab4aa8b-be47-7f34-f231-2be38fd8faff@sapo.pt>
Message-ID: <PU4P216MB1568544B311C3084D6892900C81E9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Rui,
                 Thanks for your reply....your reply covers the first part of my question. What about the second part? i.e remembering the state when the price q breaches Q? Will some thing like this work:

f <- function(envir) {expr1; expr2; expr3; envir$j <- envir$j + 1L}

e <- new.env()
e$j <- 1L
# do you need counter for something else?
# if not delete these two lines
counter <- list()
counter[[e$j]] <- 1L
# this seems to be all you need, not counter
if ((q >= Q)  && e$j == 1L) {f(e); C1 <- "the price Q has been breached!"}

if(C1 != "the price Q has been breached!") { do something }

ANy other method?

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI



________________________________
From: Rui Barradas <ruipbarradas at sapo.pt>
Sent: Sunday, December 11, 2022 10:58 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
Subject: Re: [R] remembering the state of an action in R....

?s 17:11 de 11/12/2022, akshay kulkarni escreveu:
> Dear members,
>                              I am a stock trader and using R for my research. I am monitoring stock prices in real time. I have the following code:
>
>> if (sock price q, breaches a certain value Q) { expr1; expr2; expr3}
>
> THe point is, expr1,expr2,expr3 should execute only once, i.e when q breaches Q. I thought of something like this:
>
>> if( q >= Q ) { expr1; expr2; expr3;}
>
> But expressions keep repeating as long as q >= Q, NOT when q breaches Q for the first time. I did some research on myself and came up with this:
>
>> f <- function() {expr1; expr2; expr3; j <<- j + 1}
>> j <- 1; counter[[j]] <- 1;
>> if ((q >= Q)  && length(counter) == 1) {f}
>
> I just want your help to know whether it is logically right or not. ARe not there any other possibility other than using the superassignment operator?
>
> Also, any way how to remember when the real time price q, breaches a value Q, for the first time ( the price may come back to Q again afterwards) ?
>
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

Use environments. You will assign to a variable living in a special
place, protected from the rest of the code, that you can access any time
you want.
Something like the following.



f <- function(envir) {expr1; expr2; expr3; envir$j <- envir$j + 1L}

e <- new.env()
e$j <- 1L
# do you need counter for something else?
# if not delete these two lines
counter <- list()
counter[[e$j]] <- 1L
# this seems to be all you need, not counter
if ((q >= Q)  && e$j == 1L) {f(e)}



Hope this helps,

Rui Barradas


	[[alternative HTML version deleted]]


From deep@y@n@@@rk@r @end|ng |rom gm@||@com  Sun Dec 11 18:53:26 2022
From: deep@y@n@@@rk@r @end|ng |rom gm@||@com (Deepayan Sarkar)
Date: Sun, 11 Dec 2022 23:23:26 +0530
Subject: [R] 
 lattice: how to use a log scale on the x-axis with the bwplot
 function
In-Reply-To: <b223f88d-18f6-411e-842f-938f11791aa5@free.fr>
References: <b430486e-3ef3-48bd-beae-a2e528aa6950@free.fr>
 <CADfFDC5e6zR44HjAG_sV90jkyH2=LkuwogyHFQVHOZqknYn0wQ@mail.gmail.com>
 <13b1f87b-cce5-6421-768f-22c90e25289a@free.fr>
 <CADfFDC7QjzgALFdR4tyBdaBVTMbSqh17Xrd1EpVXEk=VcvN=oQ@mail.gmail.com>
 <b223f88d-18f6-411e-842f-938f11791aa5@free.fr>
Message-ID: <CADfFDC4p+_PqTq++2J1ycUjyg5eBz+kR2qVhSRxAmB=gegpr-A@mail.gmail.com>

On Sun, Dec 11, 2022 at 11:05 PM Laurent Rhelp <LaurentRHelp at free.fr> wrote:
>
> Excellent, it works.
>
> But, may you please explain me how xyplot knows that it has to apply
> panel.bwplot on every groups according to the groups factor ? Because
> there is only one panel. I introduced the groups argument in order to
> apply the bwplot function only on the values of every group.

xyplot() doesn't know that, but panel.bwplot() does. It chooses one of
the variables as the grouping variable (depending on
horizontal=TRUE|FALSE); see ?panel.bwplot.

Best,
-Deepayan

>
>
> Le 11/12/2022 ? 17:48, Deepayan Sarkar a ?crit :
> > On Sun, Dec 11, 2022 at 2:33 PM Laurent Rhelp <LaurentRHelp at free.fr> wrote:
> >> I understand the idea but I did not succeed.
> >>
> >> Here is what I tried:
> >>
> >> ## 1.    middles of classes calculation
> >>
> >> m <- tapply(DF$x, groups, mean)
> >>
> >> ## 2.     create a new factor columns with the levels deduced from
> >> ##         the values of the middles of the classes
> >> ##
> >>
> >> DF$m <- DF$groups
> >> levels(DF$m) <- as.character(m)
> >> DF$m <- as.numeric(levels(DF$m))[DF$m]
> >>
> >> ## 3. I verify with xyplot
> >>
> >> xyplot(   y ~ m
> >>             , type = "p"
> >>             , data=DF
> >>             , scales = list(
> >>               y = list(log=T)
> >>               , x = list(log=T)
> >>
> >>             )
> >> )
> >> ## 4. I use the panel.groups and panel.bwplot to display the boxplots
> >> without success
> >>
> >> xyplot(   y ~ m
> >>             , groups = groups
> >>             , type = "p"
> >>             , data=DF
> >>             , scales = list(
> >>               y = list(log=T)
> >>               , x = list(log=T)
> >>               , panel = panel.superpose
> >>               ,  panel.groups=function(x,y, group.number,...){
> >>                 panel.xyplot(x,y,...)
> >>                 panel.bwplot(x,y,...)
> >>               }
> >>               , horizontal = FALSE
> >>               , box.width = .0001
> >>             )
> >> )
> > You have a typo here: x = list(log=T) should be followed by a
> > close-paren to complete scales.
> >
> > But I don't understand from your specification why you need groups and
> > panel.superpose etc. What is wrong with
> >
> > xyplot( y ~ m
> >       ## , groups = groups # why?
> >       , data=DF
> >       , scales = list(
> >             y = list(log=T)
> >           , x = list(log=T)
> >         )
> >       , panel = panel.bwplot
> >       , horizontal = FALSE
> >       , box.width = .0001
> >         )
> >
> > ?
> >
> > And sorry for my wrong calculation of m earlier, but you can simplify
> > your version to
> >
> > m <- tapply(DF$x, groups, mean)
> > DF$m <- as.vector(m[DF$groups])
> >
> > Best,
> > -Deepayan
> >
> >>
> >> thx
> >>
> >>
> >>
> >> Le 10/12/2022 ? 17:02, Deepayan Sarkar a ?crit :
> >>> Log-scales for the "factor" variable in bwplot() is not allowed.
> >>>
> >>> You could, however, use the panel function panel.bwplot() with
> >>> xyplot(num ~ num). The potential problem with that is the box widths,
> >>> which panel.bwplot() will not know how to compute.
> >>>
> >>> See if the following gives you a reasonable starting point:
> >>>
> >>> DF <- within(DF, m <- tapply(y, groups, mean))
> >>> xyplot(y ~ m, DF, scales = list(log = TRUE),
> >>>          panel = panel.bwplot, horizontal = FALSE,
> >>>          box.width = .0001)
> >>>
> >>> Best,
> >>> -Deepayan
> >>>
> >>> On Sat, Dec 10, 2022 at 7:46 PM Laurent Rhelp <LaurentRHelp at free.fr> wrote:
> >>>> Dear R-Help list,
> >>>>
> >>>>       I would like to use bwplot from the lattice package with a log scale
> >>>> both on
> >>>> the x-axis and the y-axis but I do not know how to do that because I do
> >>>> not know
> >>>> how to change the factor x-axis in a numeric x-axis.
> >>>>
> >>>>     Here is my example:
> >>>>
> >>>>
> >>>> library(lattice)
> >>>>
> >>>> # the mock data
> >>>> y <- runif(100000,min=0, max=500)
> >>>> x <- seq(0,500,length=length(y))
> >>>> # I cut the x variable to create a factor variable in order to calculate
> >>>> the boxes
> >>>> groups <- cut(x,10,ordered_result = TRUE)
> >>>> # creating the dataframe for the lattice functions
> >>>> DF <- data.frame( x= x , y = y, groups = groups)
> >>>>
> >>>>
> >>>> ## ok for xyplot
> >>>> xyplot(   y ~ x
> >>>>              , data=DF
> >>>>              , scales = list(
> >>>>                y = list(log=T)
> >>>>                , x = list(log=T)
> >>>>
> >>>>              )
> >>>> )
> >>>>
> >>>> ## ok for bwplot with the log scale for the y-axis
> >>>> bwplot( y ~ groups
> >>>>              , data=DF
> >>>>              , scales = list(
> >>>>                y = list(log=T)
> >>>>                #     , x = list(log=T)
> >>>>
> >>>>              )
> >>>> )
> >>>>
> >>>>
> >>>>
> >>>> ## Non ok for bwplot with the log scale for the x-axis
> >>>> bwplot( y ~ groups
> >>>>            , data=DF
> >>>>            , scales = list(
> >>>>                  y = list(log=T)
> >>>>                , x = list(log=T)
> >>>>
> >>>>            )
> >>>> )
> >>>> which gives an error because the x-axis is a factor, I would like to
> >>>> replace it
> >>>> for the display by the meddle of every class for example and put a log
> >>>> scale on the x-axis.
> >>>>
> >>>> Thank you for your help
> >>>> Best regards
> >>>> Laurent
> >>>>
> >>>>
> >>>>
> >>>> --
> >>>> Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
> >>>> www.avast.com
> >>>>
> >>>> ______________________________________________
> >>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >>>> and provide commented, minimal, self-contained, reproducible code.
> >>
> >>
> >> --
> >> Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
> >> www.avast.com
>
>


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sun Dec 11 18:57:31 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sun, 11 Dec 2022 17:57:31 +0000
Subject: [R] remembering the state of an action in R....
In-Reply-To: <PU4P216MB1568544B311C3084D6892900C81E9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB156881546719112711AA26F7C81E9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <9ab4aa8b-be47-7f34-f231-2be38fd8faff@sapo.pt>
 <PU4P216MB1568544B311C3084D6892900C81E9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <7db86a6f-b02c-b318-5ec1-14950f25520c@sapo.pt>

?s 17:46 de 11/12/2022, akshay kulkarni escreveu:
> Dear Rui,
>                   Thanks for your reply....your reply covers the first part of my question. What about the second part? i.e remembering the state when the price q breaches Q? Will some thing like this work:
> 
> f <- function(envir) {expr1; expr2; expr3; envir$j <- envir$j + 1L}
> 
> e <- new.env()
> e$j <- 1L
> # do you need counter for something else?
> # if not delete these two lines
> counter <- list()
> counter[[e$j]] <- 1L
> # this seems to be all you need, not counter
> if ((q >= Q)  && e$j == 1L) {f(e); C1 <- "the price Q has been breached!"}
> 
> if(C1 != "the price Q has been breached!") { do something }
> 
> ANy other method?
> 
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
> 
> 
> 
> ________________________________
> From: Rui Barradas <ruipbarradas at sapo.pt>
> Sent: Sunday, December 11, 2022 10:58 PM
> To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
> Subject: Re: [R] remembering the state of an action in R....
> 
> ?s 17:11 de 11/12/2022, akshay kulkarni escreveu:
>> Dear members,
>>                               I am a stock trader and using R for my research. I am monitoring stock prices in real time. I have the following code:
>>
>>> if (sock price q, breaches a certain value Q) { expr1; expr2; expr3}
>>
>> THe point is, expr1,expr2,expr3 should execute only once, i.e when q breaches Q. I thought of something like this:
>>
>>> if( q >= Q ) { expr1; expr2; expr3;}
>>
>> But expressions keep repeating as long as q >= Q, NOT when q breaches Q for the first time. I did some research on myself and came up with this:
>>
>>> f <- function() {expr1; expr2; expr3; j <<- j + 1}
>>> j <- 1; counter[[j]] <- 1;
>>> if ((q >= Q)  && length(counter) == 1) {f}
>>
>> I just want your help to know whether it is logically right or not. ARe not there any other possibility other than using the superassignment operator?
>>
>> Also, any way how to remember when the real time price q, breaches a value Q, for the first time ( the price may come back to Q again afterwards) ?
>>
>> THanking you,
>> Yours sincerely,
>> AKSHAY M KULKARNI
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> Hello,
> 
> Use environments. You will assign to a variable living in a special
> place, protected from the rest of the code, that you can access any time
> you want.
> Something like the following.
> 
> 
> 
> f <- function(envir) {expr1; expr2; expr3; envir$j <- envir$j + 1L}
> 
> e <- new.env()
> e$j <- 1L
> # do you need counter for something else?
> # if not delete these two lines
> counter <- list()
> counter[[e$j]] <- 1L
> # this seems to be all you need, not counter
> if ((q >= Q)  && e$j == 1L) {f(e)}
> 
> 
> 
> Hope this helps,
> 
> Rui Barradas
> 
> 
Hello,

Envirnments are still the solution for this. You can hold another 
variable in the environment passed to f.


f <- function(real_time_price, Q_breach = Q, envir) {
   envir$counter <- envir$counter + 1L
   envir$breached <- "the price Q has been breached"
   x <- pi
   x
}

q <- 10
Q <- 5
e <- new.env()
e$counter <- 0L
# this seems to be all you need, not counter
if ((q >= Q)  && e$counter == 0L) {
   print(f(q, Q, envir = e))
}

if(e$breached != "the price Q has been breached!") {
   message("do something...")
}


Hope this helps,

Rui Barradas


From L@urentRHe|p @end|ng |rom |ree@|r  Sun Dec 11 19:02:22 2022
From: L@urentRHe|p @end|ng |rom |ree@|r (Laurent Rhelp)
Date: Sun, 11 Dec 2022 19:02:22 +0100
Subject: [R] 
 lattice: how to use a log scale on the x-axis with the bwplot
 function
In-Reply-To: <CADfFDC4p+_PqTq++2J1ycUjyg5eBz+kR2qVhSRxAmB=gegpr-A@mail.gmail.com>
References: <b430486e-3ef3-48bd-beae-a2e528aa6950@free.fr>
 <CADfFDC5e6zR44HjAG_sV90jkyH2=LkuwogyHFQVHOZqknYn0wQ@mail.gmail.com>
 <13b1f87b-cce5-6421-768f-22c90e25289a@free.fr>
 <CADfFDC7QjzgALFdR4tyBdaBVTMbSqh17Xrd1EpVXEk=VcvN=oQ@mail.gmail.com>
 <b223f88d-18f6-411e-842f-938f11791aa5@free.fr>
 <CADfFDC4p+_PqTq++2J1ycUjyg5eBz+kR2qVhSRxAmB=gegpr-A@mail.gmail.com>
Message-ID: <2239ee44-7291-0434-a943-644c1ef47bfa@free.fr>

Thank you very much Deepayan, I will see the help of panel.bwplot.
Best regards
L.


Le 11/12/2022 ? 18:53, Deepayan Sarkar a ?crit?:
> On Sun, Dec 11, 2022 at 11:05 PM Laurent Rhelp <LaurentRHelp at free.fr> wrote:
>> Excellent, it works.
>>
>> But, may you please explain me how xyplot knows that it has to apply
>> panel.bwplot on every groups according to the groups factor ? Because
>> there is only one panel. I introduced the groups argument in order to
>> apply the bwplot function only on the values of every group.
> xyplot() doesn't know that, but panel.bwplot() does. It chooses one of
> the variables as the grouping variable (depending on
> horizontal=TRUE|FALSE); see ?panel.bwplot.
>
> Best,
> -Deepayan
>
>>
>> Le 11/12/2022 ? 17:48, Deepayan Sarkar a ?crit :
>>> On Sun, Dec 11, 2022 at 2:33 PM Laurent Rhelp <LaurentRHelp at free.fr> wrote:
>>>> I understand the idea but I did not succeed.
>>>>
>>>> Here is what I tried:
>>>>
>>>> ## 1.    middles of classes calculation
>>>>
>>>> m <- tapply(DF$x, groups, mean)
>>>>
>>>> ## 2.     create a new factor columns with the levels deduced from
>>>> ##         the values of the middles of the classes
>>>> ##
>>>>
>>>> DF$m <- DF$groups
>>>> levels(DF$m) <- as.character(m)
>>>> DF$m <- as.numeric(levels(DF$m))[DF$m]
>>>>
>>>> ## 3. I verify with xyplot
>>>>
>>>> xyplot(   y ~ m
>>>>              , type = "p"
>>>>              , data=DF
>>>>              , scales = list(
>>>>                y = list(log=T)
>>>>                , x = list(log=T)
>>>>
>>>>              )
>>>> )
>>>> ## 4. I use the panel.groups and panel.bwplot to display the boxplots
>>>> without success
>>>>
>>>> xyplot(   y ~ m
>>>>              , groups = groups
>>>>              , type = "p"
>>>>              , data=DF
>>>>              , scales = list(
>>>>                y = list(log=T)
>>>>                , x = list(log=T)
>>>>                , panel = panel.superpose
>>>>                ,  panel.groups=function(x,y, group.number,...){
>>>>                  panel.xyplot(x,y,...)
>>>>                  panel.bwplot(x,y,...)
>>>>                }
>>>>                , horizontal = FALSE
>>>>                , box.width = .0001
>>>>              )
>>>> )
>>> You have a typo here: x = list(log=T) should be followed by a
>>> close-paren to complete scales.
>>>
>>> But I don't understand from your specification why you need groups and
>>> panel.superpose etc. What is wrong with
>>>
>>> xyplot( y ~ m
>>>        ## , groups = groups # why?
>>>        , data=DF
>>>        , scales = list(
>>>              y = list(log=T)
>>>            , x = list(log=T)
>>>          )
>>>        , panel = panel.bwplot
>>>        , horizontal = FALSE
>>>        , box.width = .0001
>>>          )
>>>
>>> ?
>>>
>>> And sorry for my wrong calculation of m earlier, but you can simplify
>>> your version to
>>>
>>> m <- tapply(DF$x, groups, mean)
>>> DF$m <- as.vector(m[DF$groups])
>>>
>>> Best,
>>> -Deepayan
>>>
>>>> thx
>>>>
>>>>
>>>>
>>>> Le 10/12/2022 ? 17:02, Deepayan Sarkar a ?crit :
>>>>> Log-scales for the "factor" variable in bwplot() is not allowed.
>>>>>
>>>>> You could, however, use the panel function panel.bwplot() with
>>>>> xyplot(num ~ num). The potential problem with that is the box widths,
>>>>> which panel.bwplot() will not know how to compute.
>>>>>
>>>>> See if the following gives you a reasonable starting point:
>>>>>
>>>>> DF <- within(DF, m <- tapply(y, groups, mean))
>>>>> xyplot(y ~ m, DF, scales = list(log = TRUE),
>>>>>           panel = panel.bwplot, horizontal = FALSE,
>>>>>           box.width = .0001)
>>>>>
>>>>> Best,
>>>>> -Deepayan
>>>>>
>>>>> On Sat, Dec 10, 2022 at 7:46 PM Laurent Rhelp <LaurentRHelp at free.fr> wrote:
>>>>>> Dear R-Help list,
>>>>>>
>>>>>>        I would like to use bwplot from the lattice package with a log scale
>>>>>> both on
>>>>>> the x-axis and the y-axis but I do not know how to do that because I do
>>>>>> not know
>>>>>> how to change the factor x-axis in a numeric x-axis.
>>>>>>
>>>>>>      Here is my example:
>>>>>>
>>>>>>
>>>>>> library(lattice)
>>>>>>
>>>>>> # the mock data
>>>>>> y <- runif(100000,min=0, max=500)
>>>>>> x <- seq(0,500,length=length(y))
>>>>>> # I cut the x variable to create a factor variable in order to calculate
>>>>>> the boxes
>>>>>> groups <- cut(x,10,ordered_result = TRUE)
>>>>>> # creating the dataframe for the lattice functions
>>>>>> DF <- data.frame( x= x , y = y, groups = groups)
>>>>>>
>>>>>>
>>>>>> ## ok for xyplot
>>>>>> xyplot(   y ~ x
>>>>>>               , data=DF
>>>>>>               , scales = list(
>>>>>>                 y = list(log=T)
>>>>>>                 , x = list(log=T)
>>>>>>
>>>>>>               )
>>>>>> )
>>>>>>
>>>>>> ## ok for bwplot with the log scale for the y-axis
>>>>>> bwplot( y ~ groups
>>>>>>               , data=DF
>>>>>>               , scales = list(
>>>>>>                 y = list(log=T)
>>>>>>                 #     , x = list(log=T)
>>>>>>
>>>>>>               )
>>>>>> )
>>>>>>
>>>>>>
>>>>>>
>>>>>> ## Non ok for bwplot with the log scale for the x-axis
>>>>>> bwplot( y ~ groups
>>>>>>             , data=DF
>>>>>>             , scales = list(
>>>>>>                   y = list(log=T)
>>>>>>                 , x = list(log=T)
>>>>>>
>>>>>>             )
>>>>>> )
>>>>>> which gives an error because the x-axis is a factor, I would like to
>>>>>> replace it
>>>>>> for the display by the meddle of every class for example and put a log
>>>>>> scale on the x-axis.
>>>>>>
>>>>>> Thank you for your help
>>>>>> Best regards
>>>>>> Laurent
>>>>>>
>>>>>>
>>>>>>
>>>>>> --
>>>>>> Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
>>>>>> www.avast.com
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>> --
>>>> Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
>>>> www.avast.com
>>


From @k@h@y_e4 @end|ng |rom hotm@||@com  Sun Dec 11 19:02:40 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sun, 11 Dec 2022 18:02:40 +0000
Subject: [R] remembering the state of an action in R....
In-Reply-To: <7db86a6f-b02c-b318-5ec1-14950f25520c@sapo.pt>
References: <PU4P216MB156881546719112711AA26F7C81E9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <9ab4aa8b-be47-7f34-f231-2be38fd8faff@sapo.pt>
 <PU4P216MB1568544B311C3084D6892900C81E9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <7db86a6f-b02c-b318-5ec1-14950f25520c@sapo.pt>
Message-ID: <PU4P216MB156804AD0A91E22C25221196C81E9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Rui,
                 Thanks a lot..

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Rui Barradas <ruipbarradas at sapo.pt>
Sent: Sunday, December 11, 2022 11:27 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
Subject: Re: [R] remembering the state of an action in R....

?s 17:46 de 11/12/2022, akshay kulkarni escreveu:
> Dear Rui,
>                   Thanks for your reply....your reply covers the first part of my question. What about the second part? i.e remembering the state when the price q breaches Q? Will some thing like this work:
>
> f <- function(envir) {expr1; expr2; expr3; envir$j <- envir$j + 1L}
>
> e <- new.env()
> e$j <- 1L
> # do you need counter for something else?
> # if not delete these two lines
> counter <- list()
> counter[[e$j]] <- 1L
> # this seems to be all you need, not counter
> if ((q >= Q)  && e$j == 1L) {f(e); C1 <- "the price Q has been breached!"}
>
> if(C1 != "the price Q has been breached!") { do something }
>
> ANy other method?
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>
>
> ________________________________
> From: Rui Barradas <ruipbarradas at sapo.pt>
> Sent: Sunday, December 11, 2022 10:58 PM
> To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
> Subject: Re: [R] remembering the state of an action in R....
>
> ?s 17:11 de 11/12/2022, akshay kulkarni escreveu:
>> Dear members,
>>                               I am a stock trader and using R for my research. I am monitoring stock prices in real time. I have the following code:
>>
>>> if (sock price q, breaches a certain value Q) { expr1; expr2; expr3}
>>
>> THe point is, expr1,expr2,expr3 should execute only once, i.e when q breaches Q. I thought of something like this:
>>
>>> if( q >= Q ) { expr1; expr2; expr3;}
>>
>> But expressions keep repeating as long as q >= Q, NOT when q breaches Q for the first time. I did some research on myself and came up with this:
>>
>>> f <- function() {expr1; expr2; expr3; j <<- j + 1}
>>> j <- 1; counter[[j]] <- 1;
>>> if ((q >= Q)  && length(counter) == 1) {f}
>>
>> I just want your help to know whether it is logically right or not. ARe not there any other possibility other than using the superassignment operator?
>>
>> Also, any way how to remember when the real time price q, breaches a value Q, for the first time ( the price may come back to Q again afterwards) ?
>>
>> THanking you,
>> Yours sincerely,
>> AKSHAY M KULKARNI
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> Hello,
>
> Use environments. You will assign to a variable living in a special
> place, protected from the rest of the code, that you can access any time
> you want.
> Something like the following.
>
>
>
> f <- function(envir) {expr1; expr2; expr3; envir$j <- envir$j + 1L}
>
> e <- new.env()
> e$j <- 1L
> # do you need counter for something else?
> # if not delete these two lines
> counter <- list()
> counter[[e$j]] <- 1L
> # this seems to be all you need, not counter
> if ((q >= Q)  && e$j == 1L) {f(e)}
>
>
>
> Hope this helps,
>
> Rui Barradas
>
>
Hello,

Envirnments are still the solution for this. You can hold another
variable in the environment passed to f.


f <- function(real_time_price, Q_breach = Q, envir) {
   envir$counter <- envir$counter + 1L
   envir$breached <- "the price Q has been breached"
   x <- pi
   x
}

q <- 10
Q <- 5
e <- new.env()
e$counter <- 0L
# this seems to be all you need, not counter
if ((q >= Q)  && e$counter == 0L) {
   print(f(q, Q, envir = e))
}

if(e$breached != "the price Q has been breached!") {
   message("do something...")
}


Hope this helps,

Rui Barradas


	[[alternative HTML version deleted]]


From rb@er @end|ng |rom @t@u@edu  Sun Dec 11 20:27:10 2022
From: rb@er @end|ng |rom @t@u@edu (Robert Baer)
Date: Sun, 11 Dec 2022 13:27:10 -0600
Subject: [R] Format printing with R
In-Reply-To: <8f0d2e61-a3cd-a485-ba25-7ed68182cb57@ntu.edu.tw>
References: <aa7ff442-3e7b-35b3-273a-569dfaa2cfae@ntu.edu.tw>
 <CAPcHnpSSEe0=Gio0MqZV1LOmFG=22qxUZmtLxdZHQoVonfCPcQ@mail.gmail.com>
 <75813398-2ce9-60ce-d7a5-c1224b648425@ntu.edu.tw>
 <20221122100852.7ae8c081@Tarkus>
 <8f0d2e61-a3cd-a485-ba25-7ed68182cb57@ntu.edu.tw>
Message-ID: <fd5338c9-98aa-8d95-2248-d14de3b8a968@atsu.edu>

And you will probably want to read the details of the? ?round help, so 
you understand how it handles 5 rounding.? It is a little more 
complicated than some of us learned in school.


On 11/22/2022 4:24 AM, Steven T. Yen wrote:
> Thanks to all. And yes, Ivan, round() did it:
>
> > dput(head(Mean))
> c(afactfem = 0.310796641158209, afactblk = 0.188030178893171,
> age = 45.3185794338312, nodiscfem = 0.506637018185968, discfem = 
> 0.493362981814032,
> notradgrol = 0.702915000493879)
> > dput(head(Std.dev))
> c(afactfem = 0.462819715443265, afactblk = 0.390736267472797,
> age = 16.3136348021933, nodiscfem = 0.499955948049025, discfem = 
> 0.499955948049025,
> notradgrol = 0.456974290933931)
> > round(cbind(Mean,Std.dev),2)[1:10,]
> ??????????? Mean Std.dev
> afactfem??? 0.31??? 0.46
> afactblk??? 0.19??? 0.39
> age??????? 45.32?? 16.31
> nodiscfem?? 0.51??? 0.50
> discfem???? 0.49??? 0.50
> notradgrol? 0.70??? 0.46
> tradgrol??? 0.30??? 0.46
> nofemnopol? 0.80??? 0.40
> femnopol??? 0.20??? 0.40
> nopreshurt? 0.66??? 0.47
>
> On 11/22/2022 3:08 PM, Ivan Krylov wrote:
>> On Tue, 22 Nov 2022 08:15:57 +0800
>> "Steven T. Yen" <styen at ntu.edu.tw> wrote:
>>
>>> Thanks to all, but no, signif() did not work:
>> It worked, just didn't do what you wanted it to do. I think you want
>> round(), not signif(). Some of your numbers (45.3185794) will be rounded
>> to 4 significant digits and others (0.0969999) will be rounded to 1
>> significant digit, but the number of decimal places will be 2.
>>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From derekog|e51 @end|ng |rom gm@||@com  Tue Dec 13 03:13:47 2022
From: derekog|e51 @end|ng |rom gm@||@com (Derek Ogle)
Date: Mon, 12 Dec 2022 20:13:47 -0600
Subject: [R] bgroup not rendering properly
Message-ID: <CAKKtRk8q+oMHjFaFib-BZmASJ+fimRwq5uvg+i79DJgnptzkDw@mail.gmail.com>

bgroup() from plotmath does not render properly for me. For example

plot(0,xlim=c(0,1),ylim=c(0,1))
text(0.3,0.5,expression(bgroup('(',atop(x,y),')')))
text(0.7,0.5,expression(group('(',atop(x,y),')')))

and

library(ggplot2)
ggplot(mtcars, aes(wt, mpg)) +
  annotate("text", x=2.5, y=25, label="bgroup('(',atop(x,y),')')",
parse=TRUE) +
  annotate("text", x=3.5, y=25, label="group('(',atop(x,y),')')",
parse=TRUE)

both show a proper (though ugly) result from group() (the second text() or
annotation()) but unrecognizable characters (rather than large parentheses)
from bgroup().

This problematic result occurred for me when using v4.2.2, but not when
using 4.2.0, 4.1.2, 4.1.0, or 4.0.5. My sessionInfo is further below.

I did ask this on stackoverflow
<https://stackoverflow.com/questions/74738827/bgroup-does-not-render-properly-on-ggplot>
where the resulting figures can be seen.


----
R version 4.2.2 (2022-10-31 ucrt)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 19044)

Matrix products: default

locale:
[1] LC_COLLATE=English_United States.utf8
[2] LC_CTYPE=English_United States.utf8
[3] LC_MONETARY=English_United States.utf8
[4] LC_NUMERIC=C
[5] LC_TIME=English_United States.utf8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] compiler_4.2.2 tools_4.2.2

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Tue Dec 13 09:38:29 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Tue, 13 Dec 2022 08:38:29 +0000
Subject: [R] bgroup not rendering properly
In-Reply-To: <CAKKtRk8q+oMHjFaFib-BZmASJ+fimRwq5uvg+i79DJgnptzkDw@mail.gmail.com>
References: <CAKKtRk8q+oMHjFaFib-BZmASJ+fimRwq5uvg+i79DJgnptzkDw@mail.gmail.com>
Message-ID: <e04cb6a2-abf2-4b1c-b9f4-55dcd9e359f8@sapo.pt>

?s 02:13 de 13/12/2022, Derek Ogle escreveu:
> bgroup() from plotmath does not render properly for me. For example
> 
> plot(0,xlim=c(0,1),ylim=c(0,1))
> text(0.3,0.5,expression(bgroup('(',atop(x,y),')')))
> text(0.7,0.5,expression(group('(',atop(x,y),')')))
> 
> and
> 
> library(ggplot2)
> ggplot(mtcars, aes(wt, mpg)) +
>    annotate("text", x=2.5, y=25, label="bgroup('(',atop(x,y),')')",
> parse=TRUE) +
>    annotate("text", x=3.5, y=25, label="group('(',atop(x,y),')')",
> parse=TRUE)
> 
> both show a proper (though ugly) result from group() (the second text() or
> annotation()) but unrecognizable characters (rather than large parentheses)
> from bgroup().
> 
> This problematic result occurred for me when using v4.2.2, but not when
> using 4.2.0, 4.1.2, 4.1.0, or 4.0.5. My sessionInfo is further below.
> 
> I did ask this on stackoverflow
> <https://stackoverflow.com/questions/74738827/bgroup-does-not-render-properly-on-ggplot>
> where the resulting figures can be seen.
> 
> 
> ----
> R version 4.2.2 (2022-10-31 ucrt)
> Platform: x86_64-w64-mingw32/x64 (64-bit)
> Running under: Windows 10 x64 (build 19044)
> 
> Matrix products: default
> 
> locale:
> [1] LC_COLLATE=English_United States.utf8
> [2] LC_CTYPE=English_United States.utf8
> [3] LC_MONETARY=English_United States.utf8
> [4] LC_NUMERIC=C
> [5] LC_TIME=English_United States.utf8
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
> 
> loaded via a namespace (and not attached):
> [1] compiler_4.2.2 tools_4.2.2
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

Hello,

I can confirm this behavior. ggplot 3.4.0. Works on R 4.2.0 and 4.2.1, 
doesn't work on R 4.2.2.
I left a comment to that SO question.



sessionInfo()
R version 4.2.0 (2022-04-22 ucrt)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 22621)

Matrix products: default

locale:
[1] LC_COLLATE=Portuguese_Portugal.utf8 
LC_CTYPE=Portuguese_Portugal.utf8
[3] LC_MONETARY=Portuguese_Portugal.utf8 LC_NUMERIC=C 

[5] LC_TIME=Portuguese_Portugal.utf8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] ggplot2_3.4.0

loaded via a namespace (and not attached):
  [1] fansi_1.0.3      withr_2.5.0      assertthat_0.2.1 dplyr_1.0.10
  [5] utf8_1.2.2       grid_4.2.0       R6_2.5.1         DBI_1.1.3
  [9] lifecycle_1.0.3  gtable_0.3.1     magrittr_2.0.3   scales_1.2.1
[13] pillar_1.8.1     rlang_1.0.6      cli_3.4.1        farver_2.1.1
[17] generics_0.1.3   vctrs_0.5.1      labeling_0.4.2   glue_1.6.2
[21] munsell_0.5.0    compiler_4.2.0   pkgconfig_2.0.3  colorspace_2.0-3
[25] tidyselect_1.2.0 tibble_3.1.8



Hope this helps,

Rui Barradas


From j@zh@o @end|ng |rom ye@h@net  Tue Dec 13 10:07:00 2022
From: j@zh@o @end|ng |rom ye@h@net (Jinsong Zhao)
Date: Tue, 13 Dec 2022 17:07:00 +0800
Subject: [R] bgroup not rendering properly
In-Reply-To: <CAKKtRk8q+oMHjFaFib-BZmASJ+fimRwq5uvg+i79DJgnptzkDw@mail.gmail.com>
References: <CAKKtRk8q+oMHjFaFib-BZmASJ+fimRwq5uvg+i79DJgnptzkDw@mail.gmail.com>
Message-ID: <6fa3a345-473d-53b2-d74a-5a1b4f5b5657@yeah.net>

I don

On 2022/12/13 10:13, Derek Ogle wrote:
> bgroup() from plotmath does not render properly for me. For example
>
> plot(0,xlim=c(0,1),ylim=c(0,1))
> text(0.3,0.5,expression(bgroup('(',atop(x,y),')')))
> text(0.7,0.5,expression(group('(',atop(x,y),')')))
>
> and
>
> library(ggplot2)
> ggplot(mtcars, aes(wt, mpg)) +
>    annotate("text", x=2.5, y=25, label="bgroup('(',atop(x,y),')')",
> parse=TRUE) +
>    annotate("text", x=3.5, y=25, label="group('(',atop(x,y),')')",
> parse=TRUE)
>
> both show a proper (though ugly) result from group() (the second text() or
> annotation()) but unrecognizable characters (rather than large parentheses)
> from bgroup().
>
> This problematic result occurred for me when using v4.2.2, but not when
> using 4.2.0, 4.1.2, 4.1.0, or 4.0.5. My sessionInfo is further below.
>
> I did ask this on stackoverflow
> <https://stackoverflow.com/questions/74738827/bgroup-does-not-render-properly-on-ggplot>
> where the resulting figures can be seen.
>
>
> ----
> R version 4.2.2 (2022-10-31 ucrt)
> Platform: x86_64-w64-mingw32/x64 (64-bit)
> Running under: Windows 10 x64 (build 19044)
>
> Matrix products: default
>
> locale:
> [1] LC_COLLATE=English_United States.utf8
> [2] LC_CTYPE=English_United States.utf8
> [3] LC_MONETARY=English_United States.utf8
> [4] LC_NUMERIC=C
> [5] LC_TIME=English_United States.utf8
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> loaded via a namespace (and not attached):
> [1] compiler_4.2.2 tools_4.2.2
I don't see any problem, especially when outputing the plot to a pdf file.

Best,
Jinsong


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Tue Dec 13 11:02:23 2022
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Tue, 13 Dec 2022 11:02:23 +0100
Subject: [R] bgroup not rendering properly
In-Reply-To: <6fa3a345-473d-53b2-d74a-5a1b4f5b5657@yeah.net>
References: <CAKKtRk8q+oMHjFaFib-BZmASJ+fimRwq5uvg+i79DJgnptzkDw@mail.gmail.com>
 <6fa3a345-473d-53b2-d74a-5a1b4f5b5657@yeah.net>
Message-ID: <25496.19887.320573.266495@stat.math.ethz.ch>

>>>>> Jinsong Zhao 
>>>>>     on Tue, 13 Dec 2022 17:07:00 +0800 writes:

    > I don

    >  On 2022/12/13 10:13, Derek Ogle wrote:
    >> bgroup() from plotmath does not render properly for
    >> me. For example
    >> 
    >> plot(0,xlim=c(0,1),ylim=c(0,1))
    >> text(0.3,0.5,expression(bgroup('(',atop(x,y),')')))
    >> text(0.7,0.5,expression(group('(',atop(x,y),')')))

Almost surely a  Windows-only problem i.e. bug,
See also the bug fixed yesterday, PR#18440,
https://bugs.r-project.org/show_bug.cgi?id=18440

Note that "rendering" of graphics strongly depends on your
graphics device (people no longer learn about nowadays).
Hence, use

   .Device
or
   dev.cur()

and report that along with your session info.

I bet that you will see that after

png("bgroup.png")  # or pdf("bgroup.pdf")
expression(bgroup('(',atop(x,y),')')
dev.off()

the resulting PNG or PDF will look fine,
even on Windows in R 4.2.2.

Martin


    >> 
    >> and
    >> 
    >> library(ggplot2) ggplot(mtcars, aes(wt, mpg)) +
    >> annotate("text", x=2.5, y=25,
    >> label="bgroup('(',atop(x,y),')')", parse=TRUE) +
    >> annotate("text", x=3.5, y=25,
    >> label="group('(',atop(x,y),')')", parse=TRUE)
    >> 
    >> both show a proper (though ugly) result from group() (the
    >> second text() or annotation()) but unrecognizable
    >> characters (rather than large parentheses) from bgroup().
    >> 
    >> This problematic result occurred for me when using
    >> v4.2.2, but not when using 4.2.0, 4.1.2, 4.1.0, or
    >> 4.0.5. My sessionInfo is further below.
    >> 
    >> I did ask this on stackoverflow
    >> <https://stackoverflow.com/questions/74738827/bgroup-does-not-render-properly-on-ggplot>
    >> where the resulting figures can be seen.
    >> 
    >> 
    >> ----
    >> R version 4.2.2 (2022-10-31 ucrt) Platform:
    >> x86_64-w64-mingw32/x64 (64-bit) Running under: Windows 10
    >> x64 (build 19044)
    >> 
    >> Matrix products: default
    >> 
    >> locale: [1] LC_COLLATE=English_United States.utf8 [2]
    >> LC_CTYPE=English_United States.utf8 [3]
    >> LC_MONETARY=English_United States.utf8 [4] LC_NUMERIC=C
    >> [5] LC_TIME=English_United States.utf8
    >> 
    >> attached base packages: [1] stats graphics grDevices
    >> utils datasets methods base
    >> 
    >> loaded via a namespace (and not attached): [1]
    >> compiler_4.2.2 tools_4.2.2
    > I don't see any problem, especially when outputing the
    > plot to a pdf file.

    > Best, Jinsong


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Tue Dec 13 11:55:01 2022
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Tue, 13 Dec 2022 11:55:01 +0100
Subject: [R] bgroup not rendering properly
In-Reply-To: <25496.19887.320573.266495@stat.math.ethz.ch>
References: <CAKKtRk8q+oMHjFaFib-BZmASJ+fimRwq5uvg+i79DJgnptzkDw@mail.gmail.com>
 <6fa3a345-473d-53b2-d74a-5a1b4f5b5657@yeah.net>
 <25496.19887.320573.266495@stat.math.ethz.ch>
Message-ID: <25496.23045.546200.518918@stat.math.ethz.ch>

>>>>> Martin Maechler 
>>>>>     on Tue, 13 Dec 2022 11:02:23 +0100 writes:

>>>>> Jinsong Zhao 
>>>>>     on Tue, 13 Dec 2022 17:07:00 +0800 writes:

    >> I don

Jinsong started on top and I did not see his continuation
at the very bottom
(so scroll down there!)


    >> On 2022/12/13 10:13, Derek Ogle wrote:
    >>> bgroup() from plotmath does not render properly for
    >>> me. For example
    >>> 
    >>> plot(0,xlim=c(0,1),ylim=c(0,1))
    >>> text(0.3,0.5,expression(bgroup('(',atop(x,y),')')))
    >>> text(0.7,0.5,expression(group('(',atop(x,y),')')))

    > Almost surely a Windows-only problem i.e. bug, See also
    > the bug fixed yesterday, PR#18440,
    > https://bugs.r-project.org/show_bug.cgi?id=18440

    > Note that "rendering" of graphics strongly depends on your
    > graphics device (people no longer learn about nowadays).
    > Hence, use

    >    .Device or dev.cur()

    > and report that along with your session info.

    > I bet that you will see that after

    > png("bgroup.png") # or pdf("bgroup.pdf")
    > expression(bgroup('(',atop(x,y),')') dev.off()

    > the resulting PNG or PDF will look fine, even on Windows
    > in R 4.2.2.

    > Martin

    >>> 
    >>> and
    >>> 
    >>> library(ggplot2) ggplot(mtcars, aes(wt, mpg)) +
    >>> annotate("text", x=2.5, y=25,
    >>> label="bgroup('(',atop(x,y),')')", parse=TRUE) +
    >>> annotate("text", x=3.5, y=25,
    >>> label="group('(',atop(x,y),')')", parse=TRUE)
    >>> 
    >>> both show a proper (though ugly) result from group()
    >>> (the second text() or annotation()) but unrecognizable
    >>> characters (rather than large parentheses) from
    >>> bgroup().
    >>> 
    >>> This problematic result occurred for me when using
    >>> v4.2.2, but not when using 4.2.0, 4.1.2, 4.1.0, or
    >>> 4.0.5. My sessionInfo is further below.
    >>> 
    >>> I did ask this on stackoverflow
    >>> <https://stackoverflow.com/questions/74738827/bgroup-does-not-render-properly-on-ggplot>
    >>> where the resulting figures can be seen.
    >>> 
    >>> 
    >>> ----
    >>> R version 4.2.2 (2022-10-31 ucrt) Platform:
    >>> x86_64-w64-mingw32/x64 (64-bit) Running under: Windows
    >>> 10 x64 (build 19044)
    >>> 
    >>> Matrix products: default
    >>> 
    >>> locale: [1] LC_COLLATE=English_United States.utf8 [2]
    >>> LC_CTYPE=English_United States.utf8 [3]
    >>> LC_MONETARY=English_United States.utf8 [4] LC_NUMERIC=C
    >>> [5] LC_TIME=English_United States.utf8
    >>> 
    >>> attached base packages: [1] stats graphics grDevices
    >>> utils datasets methods base
    >>> 
    >>> loaded via a namespace (and not attached): [1]
    >>> compiler_4.2.2 tools_4.2.2

    >> I don't see any problem, especially when outputing the
    >> plot to a pdf file.

    >> Best, Jinsong

Interesting, so even on Windows, the problem does not always
show evidently.
The pdf is clearly working (see my own first reply),
but then, could it be that there's a difference between Jinsong's
computer or his way of using R and the others, Rui and Derek ?

The ugly rectangles are typically shown for characters for which
the graphics device does not find any fonts...
and in principle there may be subtle differences.

Is it always within RStudio which I think *does* use R's own
"graphapp" based Windows device. 
It that's still true, then same would probably happen within
bare RGui.

For me, on a (2016!) Windows terminal server,
the bgroup() things also work nicely, at least if I use R from
ESS (-> Rterm). 

Martin


From j@zh@o @end|ng |rom ye@h@net  Tue Dec 13 12:47:33 2022
From: j@zh@o @end|ng |rom ye@h@net (Jinsong Zhao)
Date: Tue, 13 Dec 2022 19:47:33 +0800
Subject: [R] bgroup not rendering properly
In-Reply-To: <25496.19887.320573.266495@stat.math.ethz.ch>
References: <CAKKtRk8q+oMHjFaFib-BZmASJ+fimRwq5uvg+i79DJgnptzkDw@mail.gmail.com>
 <6fa3a345-473d-53b2-d74a-5a1b4f5b5657@yeah.net>
 <25496.19887.320573.266495@stat.math.ethz.ch>
Message-ID: <b0fddc23-b7a9-b56c-ac89-5ae2d4ec80b7@yeah.net>



On 2022/12/13 18:02, Martin Maechler wrote:
>>>>>> Jinsong Zhao
>>>>>>      on Tue, 13 Dec 2022 17:07:00 +0800 writes:
>      > I don
>
>      >  On 2022/12/13 10:13, Derek Ogle wrote:
>      >> bgroup() from plotmath does not render properly for
>      >> me. For example
>      >>
>      >> plot(0,xlim=c(0,1),ylim=c(0,1))
>      >> text(0.3,0.5,expression(bgroup('(',atop(x,y),')')))
>      >> text(0.7,0.5,expression(group('(',atop(x,y),')')))
>
> Almost surely a  Windows-only problem i.e. bug,
> See also the bug fixed yesterday, PR#18440,
> https://bugs.r-project.org/show_bug.cgi?id=18440
>
>
I do not observe the problem in that bug report. All works fine.

Best,
Jinsong


From derekog|e51 @end|ng |rom gm@||@com  Tue Dec 13 14:59:14 2022
From: derekog|e51 @end|ng |rom gm@||@com (Derek Ogle)
Date: Tue, 13 Dec 2022 07:59:14 -0600
Subject: [R] bgroup not rendering properly
In-Reply-To: <b0fddc23-b7a9-b56c-ac89-5ae2d4ec80b7@yeah.net>
References: <CAKKtRk8q+oMHjFaFib-BZmASJ+fimRwq5uvg+i79DJgnptzkDw@mail.gmail.com>
 <6fa3a345-473d-53b2-d74a-5a1b4f5b5657@yeah.net>
 <25496.19887.320573.266495@stat.math.ethz.ch>
 <b0fddc23-b7a9-b56c-ac89-5ae2d4ec80b7@yeah.net>
Message-ID: <CAKKtRk-XxMm+OmOTr8FRfhjZaE_cQ2w_ZogmEu6fSLkQ9S=FJg@mail.gmail.com>

Thank you all for your help. I am using Windows. I ran the following both
in R 4.2.2 using RStudio and not using RStudio (but using the R GUI). In
both runs, plots within the GUI/RStudio and in the PNG output exhibited the
same issue that I reported originally., whereas plots in the PDF output
were perfect (no issue).

As asked, the first dev.cur() or .Device says "null device" whereas the
second says "Windows" when using the R GUI and "RStudioGD" when using
RStudio.

It sounds like this is likely a windows-related bug that will be fixed in
the next version. I can wait for that.

----
dev.cur()
.Device
plot(0,xlim=c(0,1),ylim=c(0,1))
text(0.5,0.5,expression(bgroup('(',atop(x,y),')')))

png("bgroup_R422.png")
plot(0,xlim=c(0,1),ylim=c(0,1))
text(0.5,0.5,expression(bgroup('(',atop(x,y),')')))
dev.off()

pdf("bgroup_R422.pdf")
plot(0,xlim=c(0,1),ylim=c(0,1))
text(0.5,0.5,expression(bgroup('(',atop(x,y),')')))
dev.off()

dev.cur()
.Device
plot(0,xlim=c(0,1),ylim=c(0,1))
text(0.5,0.5,expression(bgroup('(',atop(x,y),')')))


On Tue, Dec 13, 2022 at 5:48 AM Jinsong Zhao <jszhao at yeah.net> wrote:

>
>
> On 2022/12/13 18:02, Martin Maechler wrote:
> >>>>>> Jinsong Zhao
> >>>>>>      on Tue, 13 Dec 2022 17:07:00 +0800 writes:
> >      > I don
> >
> >      >  On 2022/12/13 10:13, Derek Ogle wrote:
> >      >> bgroup() from plotmath does not render properly for
> >      >> me. For example
> >      >>
> >      >> plot(0,xlim=c(0,1),ylim=c(0,1))
> >      >> text(0.3,0.5,expression(bgroup('(',atop(x,y),')')))
> >      >> text(0.7,0.5,expression(group('(',atop(x,y),')')))
> >
> > Almost surely a  Windows-only problem i.e. bug,
> > See also the bug fixed yesterday, PR#18440,
> > https://bugs.r-project.org/show_bug.cgi?id=18440
> >
> >
> I do not observe the problem in that bug report. All works fine.
>
> Best,
> Jinsong
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Dec 13 16:38:59 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 13 Dec 2022 16:38:59 +0100
Subject: [R] bgroup not rendering properly
In-Reply-To: <CAKKtRk-XxMm+OmOTr8FRfhjZaE_cQ2w_ZogmEu6fSLkQ9S=FJg@mail.gmail.com>
References: <CAKKtRk8q+oMHjFaFib-BZmASJ+fimRwq5uvg+i79DJgnptzkDw@mail.gmail.com>
 <6fa3a345-473d-53b2-d74a-5a1b4f5b5657@yeah.net>
 <25496.19887.320573.266495@stat.math.ethz.ch>
 <b0fddc23-b7a9-b56c-ac89-5ae2d4ec80b7@yeah.net>
 <CAKKtRk-XxMm+OmOTr8FRfhjZaE_cQ2w_ZogmEu6fSLkQ9S=FJg@mail.gmail.com>
Message-ID: <2e613a6e-af0d-1668-3b87-fc11a8692347@statistik.tu-dortmund.de>

Fascinating: I see it with R-4.2.2  and R-patched  with the windows() 
device. But all works well with R-4.2.1 and R-devel.

I'll try to investigate.

Best,
Uwe Ligges







On 13.12.2022 14:59, Derek Ogle wrote:
> Thank you all for your help. I am using Windows. I ran the following both
> in R 4.2.2 using RStudio and not using RStudio (but using the R GUI). In
> both runs, plots within the GUI/RStudio and in the PNG output exhibited the
> same issue that I reported originally., whereas plots in the PDF output
> were perfect (no issue).
> 
> As asked, the first dev.cur() or .Device says "null device" whereas the
> second says "Windows" when using the R GUI and "RStudioGD" when using
> RStudio.
> 
> It sounds like this is likely a windows-related bug that will be fixed in
> the next version. I can wait for that.
> 
> ----
> dev.cur()
> .Device
> plot(0,xlim=c(0,1),ylim=c(0,1))
> text(0.5,0.5,expression(bgroup('(',atop(x,y),')')))
> 
> png("bgroup_R422.png")
> plot(0,xlim=c(0,1),ylim=c(0,1))
> text(0.5,0.5,expression(bgroup('(',atop(x,y),')')))
> dev.off()
> 
> pdf("bgroup_R422.pdf")
> plot(0,xlim=c(0,1),ylim=c(0,1))
> text(0.5,0.5,expression(bgroup('(',atop(x,y),')')))
> dev.off()
> 
> dev.cur()
> .Device
> plot(0,xlim=c(0,1),ylim=c(0,1))
> text(0.5,0.5,expression(bgroup('(',atop(x,y),')')))
> 
> 
> On Tue, Dec 13, 2022 at 5:48 AM Jinsong Zhao <jszhao at yeah.net> wrote:
> 
>>
>>
>> On 2022/12/13 18:02, Martin Maechler wrote:
>>>>>>>> Jinsong Zhao
>>>>>>>>       on Tue, 13 Dec 2022 17:07:00 +0800 writes:
>>>       > I don
>>>
>>>       >  On 2022/12/13 10:13, Derek Ogle wrote:
>>>       >> bgroup() from plotmath does not render properly for
>>>       >> me. For example
>>>       >>
>>>       >> plot(0,xlim=c(0,1),ylim=c(0,1))
>>>       >> text(0.3,0.5,expression(bgroup('(',atop(x,y),')')))
>>>       >> text(0.7,0.5,expression(group('(',atop(x,y),')')))
>>>
>>> Almost surely a  Windows-only problem i.e. bug,
>>> See also the bug fixed yesterday, PR#18440,
>>> https://bugs.r-project.org/show_bug.cgi?id=18440
>>>
>>>
>> I do not observe the problem in that bug report. All works fine.
>>
>> Best,
>> Jinsong
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From v@|ent|n @end|ng |rom petze|@@t  Tue Dec 13 17:58:02 2022
From: v@|ent|n @end|ng |rom petze|@@t (Valentin Petzel)
Date: Tue, 13 Dec 2022 17:58:02 +0100
Subject: [R] Enabling s3 methods by attaching environment
Message-ID: <8161072.T7Z3S40VBb@archbox>

Hello everyone!

if we define some S3 method in some environment like this

E <- new.env() 
evalq({ 
  test <- function(x) UseMethod("test") 
  test.character <- function(x) 1 
}, envir = E)

this works

evalq(test("a"), envir = E) 
but this doesn?t:

attach(E) 
test("a")
According to some remarks this now requires the use of .S3method to register the 
method to a method data base. This does work, but if we create two different 
environments with different implementations of the same S3 method this will always 
default to the last defined method (as the method data base is only updated on 
declaration).

This makes a workflow where we use environments to enable and disable certain functions 
impossible.

So I want to ask if there is currently any way to use S3 methods in a currently attached 
environment while allowing to switch the method by attaching a different environment?

Kind Regards,
Valentin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: This is a digitally signed message part.
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20221213/1bc984b5/attachment.sig>

From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Dec 14 09:37:50 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 14 Dec 2022 09:37:50 +0100
Subject: [R] bgroup not rendering properly
In-Reply-To: <2e613a6e-af0d-1668-3b87-fc11a8692347@statistik.tu-dortmund.de>
References: <CAKKtRk8q+oMHjFaFib-BZmASJ+fimRwq5uvg+i79DJgnptzkDw@mail.gmail.com>
 <6fa3a345-473d-53b2-d74a-5a1b4f5b5657@yeah.net>
 <25496.19887.320573.266495@stat.math.ethz.ch>
 <b0fddc23-b7a9-b56c-ac89-5ae2d4ec80b7@yeah.net>
 <CAKKtRk-XxMm+OmOTr8FRfhjZaE_cQ2w_ZogmEu6fSLkQ9S=FJg@mail.gmail.com>
 <2e613a6e-af0d-1668-3b87-fc11a8692347@statistik.tu-dortmund.de>
Message-ID: <d8ef7bbc-7369-a7e4-642f-54f586cb6711@statistik.tu-dortmund.de>

And this has been fixed by Tomas Kalibera on Dec 12 in R-devel already. 
Shortly to be ported to R-patched.

Best,
Uwe Ligges


On 13.12.2022 16:38, Uwe Ligges wrote:
> Fascinating: I see it with R-4.2.2? and R-patched? with the windows() 
> device. But all works well with R-4.2.1 and R-devel.
> 
> I'll try to investigate.
> 
> Best,
> Uwe Ligges
> 
> 
> 
> 
> 
> 
> 
> On 13.12.2022 14:59, Derek Ogle wrote:
>> Thank you all for your help. I am using Windows. I ran the following both
>> in R 4.2.2 using RStudio and not using RStudio (but using the R GUI). In
>> both runs, plots within the GUI/RStudio and in the PNG output 
>> exhibited the
>> same issue that I reported originally., whereas plots in the PDF output
>> were perfect (no issue).
>>
>> As asked, the first dev.cur() or .Device says "null device" whereas the
>> second says "Windows" when using the R GUI and "RStudioGD" when using
>> RStudio.
>>
>> It sounds like this is likely a windows-related bug that will be fixed in
>> the next version. I can wait for that.
>>
>> ----
>> dev.cur()
>> .Device
>> plot(0,xlim=c(0,1),ylim=c(0,1))
>> text(0.5,0.5,expression(bgroup('(',atop(x,y),')')))
>>
>> png("bgroup_R422.png")
>> plot(0,xlim=c(0,1),ylim=c(0,1))
>> text(0.5,0.5,expression(bgroup('(',atop(x,y),')')))
>> dev.off()
>>
>> pdf("bgroup_R422.pdf")
>> plot(0,xlim=c(0,1),ylim=c(0,1))
>> text(0.5,0.5,expression(bgroup('(',atop(x,y),')')))
>> dev.off()
>>
>> dev.cur()
>> .Device
>> plot(0,xlim=c(0,1),ylim=c(0,1))
>> text(0.5,0.5,expression(bgroup('(',atop(x,y),')')))
>>
>>
>> On Tue, Dec 13, 2022 at 5:48 AM Jinsong Zhao <jszhao at yeah.net> wrote:
>>
>>>
>>>
>>> On 2022/12/13 18:02, Martin Maechler wrote:
>>>>>>>>> Jinsong Zhao
>>>>>>>>> ????? on Tue, 13 Dec 2022 17:07:00 +0800 writes:
>>>> ????? > I don
>>>>
>>>> ????? >? On 2022/12/13 10:13, Derek Ogle wrote:
>>>> ????? >> bgroup() from plotmath does not render properly for
>>>> ????? >> me. For example
>>>> ????? >>
>>>> ????? >> plot(0,xlim=c(0,1),ylim=c(0,1))
>>>> ????? >> text(0.3,0.5,expression(bgroup('(',atop(x,y),')')))
>>>> ????? >> text(0.7,0.5,expression(group('(',atop(x,y),')')))
>>>>
>>>> Almost surely a? Windows-only problem i.e. bug,
>>>> See also the bug fixed yesterday, PR#18440,
>>>> https://bugs.r-project.org/show_bug.cgi?id=18440
>>>>
>>>>
>>> I do not observe the problem in that bug report. All works fine.
>>>
>>> Best,
>>> Jinsong
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>> ????[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ro@||n@ump @end|ng |rom gm@||@com  Thu Dec 15 04:04:28 2022
From: ro@||n@ump @end|ng |rom gm@||@com (roslinazairimah zakaria)
Date: Thu, 15 Dec 2022 11:04:28 +0800
Subject: [R] library(tseries) - spellng error in output
Message-ID: <CANTvJZJMRghiYpvRm98fFhE9HAk0zKLdsWeCVLwo1_Ssdg34oQ@mail.gmail.com>

Hi R-users,

Just to inform that there is one spelling error in the output for *Jarque-Bera
test in R.*

*library(tseries)*











*> #Jarque-Bera normality test> normalTest(dt_i, method='jb')Title: Jarque
- Bera Normalality TestTest Results:  STATISTIC:    X-squared: 16.8853  P
VALUE:    Asymptotic p Value: 0.0002155 *

-- 
*Roslinazairimah Zakaria*
*Tel: +609-5492370; Fax. No.+609-5492766*

*Email: roslinazairimah at ump.edu.my <roslinazairimah at ump.edu.my>;
roslinaump at gmail.com <roslinaump at gmail.com>*
Faculty of Industrial Sciences & Technology
University Malaysia Pahang
Lebuhraya Tun Razak, 26300 Gambang, Pahang, Malaysia

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Dec 15 04:11:25 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 14 Dec 2022 19:11:25 -0800
Subject: [R] library(tseries) - spellng error in output
In-Reply-To: <CANTvJZJMRghiYpvRm98fFhE9HAk0zKLdsWeCVLwo1_Ssdg34oQ@mail.gmail.com>
References: <CANTvJZJMRghiYpvRm98fFhE9HAk0zKLdsWeCVLwo1_Ssdg34oQ@mail.gmail.com>
Message-ID: <9C26C449-DDD0-4E56-8E37-A3D5F6E6464F@dcn.davis.ca.us>

Contact the package maintainer. See maintainer().

On December 14, 2022 7:04:28 PM PST, roslinazairimah zakaria <roslinaump at gmail.com> wrote:
>Hi R-users,
>
>Just to inform that there is one spelling error in the output for *Jarque-Bera
>test in R.*
>
>*library(tseries)*
>
>
>
>
>
>
>
>
>
>
>
>*> #Jarque-Bera normality test> normalTest(dt_i, method='jb')Title: Jarque
>- Bera Normalality TestTest Results:  STATISTIC:    X-squared: 16.8853  P
>VALUE:    Asymptotic p Value: 0.0002155 *
>

-- 
Sent from my phone. Please excuse my brevity.


From @te|@no@@o||@ @end|ng |rom reg|one@m@rche@|t  Thu Dec 15 14:52:35 2022
From: @te|@no@@o||@ @end|ng |rom reg|one@m@rche@|t (Stefano Sofia)
Date: Thu, 15 Dec 2022 13:52:35 +0000
Subject: [R] Get data from a list of data frames
Message-ID: <fe9017cbd4ba49328e150061032068a7@regione.marche.it>

Dear R-list users,

I have a list of n data frames built as follows:


Station1 <- data.frame(sensor = c("thermometer", "raingauge", "snowgauge", "anemometer"), code = c(2583, 1478, 3178, NA))
Station2 <- data.frame(sensor = c("thermometer", "raingauge", "snowgauge", "anemometer"), code = c(2584, 1479, 3179, 4453))
....

Total <- list("Station1"=Station1, "Station2"=Station2, ...)

I would need to have a vector with the sensor codes of the thermometers of some stations, let's say of Station1, Station2 and Station5 (i.e. c(2583, 2584, 2587)).
I tried with lapply, but I have not been able to get what I need.
Could you please help me?

Thank you

Stefano



         (oo)
--oOO--( )--OOo--------------------------------------
Stefano Sofia PhD
Civil Protection - Marche Region - Italy
Meteo Section
Snow Section
Via del Colle Ameno 5
60126 Torrette di Ancona, Ancona (AN)
Uff: +39 071 806 7743
E-mail: stefano.sofia at regione.marche.it
---Oo---------oO----------------------------------------

________________________________

AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell'art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.

--
Questo messaggio  stato analizzato da Libraesva ESG ed  risultato non infetto.
This message was scanned by Libraesva ESG and is believed to be clean.


	[[alternative HTML version deleted]]


From gerr|t@e|chner @end|ng |rom m@th@un|-g|e@@en@de  Thu Dec 15 15:10:22 2022
From: gerr|t@e|chner @end|ng |rom m@th@un|-g|e@@en@de (Gerrit Eichner)
Date: Thu, 15 Dec 2022 15:10:22 +0100
Subject: [R] Get data from a list of data frames
In-Reply-To: <fe9017cbd4ba49328e150061032068a7@regione.marche.it>
References: <fe9017cbd4ba49328e150061032068a7@regione.marche.it>
Message-ID: <8715921b-7d33-aad0-2b05-91a0fd1c32d8@math.uni-giessen.de>

Hello, Stefano,

maybe the following example contains what you want to achieve:

Station1 <- data.frame(sensor = c("thermometer", "raingauge", 
"snowgauge", "anemometer"),
                        code = c(2583, 1478, 3178, NA))
Station2 <- data.frame(sensor = c("thermometer", "raingauge", 
"snowgauge", "anemometer"),
                        code = c(2584, 1479, 3179, 4453))
Station3 <- data.frame(sensor = c("thermometer", "raingauge", 
"snowgauge", "anemometer"),
                        code = c(2584, 1479, 3179, 4453))
Station4 <- data.frame(sensor = rev(c("thermometer", "raingauge", 
"snowgauge", "anemometer")),
                        code = c(2584, 1479, 3179, 4453))
Station5 <- data.frame(sensor = c("raingauge", "snowgauge", 
"thermometer", "anemometer"),
                        code = c(2584, 1479, 3179, 4453))

Total <- list("Station1"=Station1, "Station2"=Station2,
               Station3 = Station3, Station4 = Station4,
               Station5 = Station5)

select.stat <- paste0("Station", c(1, 4, 5))
select.sens <- "thermometer"

sapply(Total[select.stat], function(x, sens)
   x$code[x$sensor == sens], sens = select.sens)



  Hth --  Gerrit

---------------------------------------------------------------------
Dr. Gerrit Eichner                   Mathematical Institute, Room 212
gerrit.eichner at math.uni-giessen.de   Justus-Liebig-University Giessen
Tel: +49-(0)641-99-32104          Arndtstr. 2, 35392 Giessen, Germany
http://www.uni-giessen.de/eichner
---------------------------------------------------------------------

Am 15.12.2022 um 14:52 schrieb Stefano Sofia:
> Dear R-list users,
> 
> I have a list of n data frames built as follows:
> 
> 
> Station1 <- data.frame(sensor = c("thermometer", "raingauge", "snowgauge", "anemometer"), code = c(2583, 1478, 3178, NA))
> Station2 <- data.frame(sensor = c("thermometer", "raingauge", "snowgauge", "anemometer"), code = c(2584, 1479, 3179, 4453))
> ....
> 
> Total <- list("Station1"=Station1, "Station2"=Station2, ...)
> 
> I would need to have a vector with the sensor codes of the thermometers of some stations, let's say of Station1, Station2 and Station5 (i.e. c(2583, 2584, 2587)).
> I tried with lapply, but I have not been able to get what I need.
> Could you please help me?
> 
> Thank you
> 
> Stefano
> 
> 
> 
>           (oo)
> --oOO--( )--OOo--------------------------------------
> Stefano Sofia PhD
> Civil Protection - Marche Region - Italy
> Meteo Section
> Snow Section
> Via del Colle Ameno 5
> 60126 Torrette di Ancona, Ancona (AN)
> Uff: +39 071 806 7743
> E-mail: stefano.sofia at regione.marche.it
> ---Oo---------oO----------------------------------------
> 
> ________________________________
> 
> AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell'art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
> IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.
> 
> --
> 
> Questo messaggio  stato analizzato da Libraesva ESG ed  risultato non infetto.
> 
> This message was scanned by Libraesva ESG and is believed to be clean.
> 
> 
> 	[[alternative HTML version deleted]]
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From pd@|gd @end|ng |rom gm@||@com  Thu Dec 15 15:30:13 2022
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Thu, 15 Dec 2022 15:30:13 +0100
Subject: [R] library(tseries) - spellng error in output
In-Reply-To: <9C26C449-DDD0-4E56-8E37-A3D5F6E6464F@dcn.davis.ca.us>
References: <CANTvJZJMRghiYpvRm98fFhE9HAk0zKLdsWeCVLwo1_Ssdg34oQ@mail.gmail.com>
 <9C26C449-DDD0-4E56-8E37-A3D5F6E6464F@dcn.davis.ca.us>
Message-ID: <C9F128F4-19D5-4B21-AF13-1F4E6CFC69D8@gmail.com>

And normalTest is not in tseries, but in fBasics.

- pd

> On 15 Dec 2022, at 04:11 , Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
> 
> Contact the package maintainer. See maintainer().
> 
> On December 14, 2022 7:04:28 PM PST, roslinazairimah zakaria <roslinaump at gmail.com> wrote:
>> Hi R-users,
>> 
>> Just to inform that there is one spelling error in the output for *Jarque-Bera
>> test in R.*
>> 
>> *library(tseries)*
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> *> #Jarque-Bera normality test> normalTest(dt_i, method='jb')Title: Jarque
>> - Bera Normalality TestTest Results:  STATISTIC:    X-squared: 16.8853  P
>> VALUE:    Asymptotic p Value: 0.0002155 *
>> 
> 
> -- 
> Sent from my phone. Please excuse my brevity.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From bgunter@4567 @end|ng |rom gm@||@com  Thu Dec 15 18:31:51 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 15 Dec 2022 09:31:51 -0800
Subject: [R] Get data from a list of data frames
In-Reply-To: <8715921b-7d33-aad0-2b05-91a0fd1c32d8@math.uni-giessen.de>
References: <fe9017cbd4ba49328e150061032068a7@regione.marche.it>
 <8715921b-7d33-aad0-2b05-91a0fd1c32d8@math.uni-giessen.de>
Message-ID: <CAGxFJbTgwQ2Nop0bjCzcT7Ri6FhDmOrXiXv+o2-2m_-sqZ6H_w@mail.gmail.com>

Well, just for giggles, Gerrit's solution can be easily vectorized (i.e. no
apply()-type stuff needed) IFF the structure of all the data frames are
identical so that rbind() works:

d <-do.call('rbind',Total[select.stat]) ## one data frame to combine them
all ;-)
d[d$sensor == 'thermometer','code']

Whether this is better, worse, or unneeded, I cannot say.

Cheers,
Bert


On Thu, Dec 15, 2022 at 6:11 AM Gerrit Eichner <
gerrit.eichner at math.uni-giessen.de> wrote:

> Hello, Stefano,
>
> maybe the following example contains what you want to achieve:
>
> Station1 <- data.frame(sensor = c("thermometer", "raingauge",
> "snowgauge", "anemometer"),
>                         code = c(2583, 1478, 3178, NA))
> Station2 <- data.frame(sensor = c("thermometer", "raingauge",
> "snowgauge", "anemometer"),
>                         code = c(2584, 1479, 3179, 4453))
> Station3 <- data.frame(sensor = c("thermometer", "raingauge",
> "snowgauge", "anemometer"),
>                         code = c(2584, 1479, 3179, 4453))
> Station4 <- data.frame(sensor = rev(c("thermometer", "raingauge",
> "snowgauge", "anemometer")),
>                         code = c(2584, 1479, 3179, 4453))
> Station5 <- data.frame(sensor = c("raingauge", "snowgauge",
> "thermometer", "anemometer"),
>                         code = c(2584, 1479, 3179, 4453))
>
> Total <- list("Station1"=Station1, "Station2"=Station2,
>                Station3 = Station3, Station4 = Station4,
>                Station5 = Station5)
>
> select.stat <- paste0("Station", c(1, 4, 5))
> select.sens <- "thermometer"
>
> sapply(Total[select.stat], function(x, sens)
>    x$code[x$sensor == sens], sens = select.sens)
>
>
>
>   Hth --  Gerrit
>
> ---------------------------------------------------------------------
> Dr. Gerrit Eichner                   Mathematical Institute, Room 212
> gerrit.eichner at math.uni-giessen.de   Justus-Liebig-University Giessen
> Tel: +49-(0)641-99-32104          Arndtstr. 2, 35392 Giessen, Germany
> http://www.uni-giessen.de/eichner
> ---------------------------------------------------------------------
>
> Am 15.12.2022 um 14:52 schrieb Stefano Sofia:
> > Dear R-list users,
> >
> > I have a list of n data frames built as follows:
> >
> >
> > Station1 <- data.frame(sensor = c("thermometer", "raingauge",
> "snowgauge", "anemometer"), code = c(2583, 1478, 3178, NA))
> > Station2 <- data.frame(sensor = c("thermometer", "raingauge",
> "snowgauge", "anemometer"), code = c(2584, 1479, 3179, 4453))
> > ....
> >
> > Total <- list("Station1"=Station1, "Station2"=Station2, ...)
> >
> > I would need to have a vector with the sensor codes of the thermometers
> of some stations, let's say of Station1, Station2 and Station5 (i.e.
> c(2583, 2584, 2587)).
> > I tried with lapply, but I have not been able to get what I need.
> > Could you please help me?
> >
> > Thank you
> >
> > Stefano
> >
> >
> >
> >           (oo)
> > --oOO--( )--OOo--------------------------------------
> > Stefano Sofia PhD
> > Civil Protection - Marche Region - Italy
> > Meteo Section
> > Snow Section
> > Via del Colle Ameno 5
> > 60126 Torrette di Ancona, Ancona (AN)
> > Uff: +39 071 806 7743
> > E-mail: stefano.sofia at regione.marche.it
> > ---Oo---------oO----------------------------------------
> >
> > ________________________________
> >
> > AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere
> informazioni confidenziali, pertanto ? destinato solo a persone autorizzate
> alla ricezione. I messaggi di posta elettronica per i client di Regione
> Marche possono contenere informazioni confidenziali e con privilegi legali.
> Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o
> archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore,
> inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio
> computer. Ai sensi dell'art. 6 della DGR n. 1394/2008 si segnala che, in
> caso di necessit? ed urgenza, la risposta al presente messaggio di posta
> elettronica pu? essere visionata da persone estranee al destinatario.
> > IMPORTANT NOTICE: This e-mail message is intended to be received only by
> persons entitled to receive the confidential information it may contain.
> E-mail messages to clients of Regione Marche may contain information that
> is confidential and legally privileged. Please do not read, copy, forward,
> or store this message unless you are an intended recipient of it. If you
> have received this message in error, please forward it to the sender and
> delete it completely from your computer system.
> >
> > --
> >
> > Questo messaggio  stato analizzato da Libraesva ESG ed  risultato non
> infetto.
> >
> > This message was scanned by Libraesva ESG and is believed to be clean.
> >
> >
> >       [[alternative HTML version deleted]]
> >
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From wewo|@k| @end|ng |rom gm@||@com  Thu Dec 15 19:01:38 2022
From: wewo|@k| @end|ng |rom gm@||@com (Witold E Wolski)
Date: Thu, 15 Dec 2022 19:01:38 +0100
Subject: [R] I do not want that R CMD build removes temp directory
Message-ID: <CAAjnpdg8uLOBBEHWEWq81R+t0sUy=TiTPN_fy2WrgTn2-AWRqA@mail.gmail.com>

I am getting a package build error, and can not figure out the problem.
The error is
"
ERROR: lazy loading failed for package 'prolfqua'
* removing 'C:/Users/
"
However since R CMD build removes the temp directory and does not give
any other errors how can I find out what the build problem is?

Is there a way to disable the temp directory removal?

Best Regards
Witek
-- 
Witold Eryk Wolski


From @|mon@urb@nek @end|ng |rom R-project@org  Thu Dec 15 19:09:34 2022
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Fri, 16 Dec 2022 07:09:34 +1300
Subject: [R] [Rd] I do not want that R CMD build removes temp directory
In-Reply-To: <CAAjnpdg8uLOBBEHWEWq81R+t0sUy=TiTPN_fy2WrgTn2-AWRqA@mail.gmail.com>
References: <CAAjnpdg8uLOBBEHWEWq81R+t0sUy=TiTPN_fy2WrgTn2-AWRqA@mail.gmail.com>
Message-ID: <24A51D24-B62A-42E2-94C4-6842EFC87D50@R-project.org>

Yes:

$ R CMD INSTALL --help | grep error
      --no-clean-on-error	do not remove installed package on error

But probably more commonly used way is to install the package from its unpacked directory as that avoids the use of temporary directories in the first place.

In you case you can also use --no-test-load and the non-functional package will still be installed so you can inspect it.

Cheers,
Simon

PS: please don't cross-post


> On Dec 16, 2022, at 7:01 AM, Witold E Wolski <wewolski at gmail.com> wrote:
> 
> I am getting a package build error, and can not figure out the problem.
> The error is
> "
> ERROR: lazy loading failed for package 'prolfqua'
> * removing 'C:/Users/
> "
> However since R CMD build removes the temp directory and does not give
> any other errors how can I find out what the build problem is?
> 
> Is there a way to disable the temp directory removal?
> 
> Best Regards
> Witek
> -- 
> Witold Eryk Wolski
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 


From wewo|@k| @end|ng |rom gm@||@com  Thu Dec 15 21:47:24 2022
From: wewo|@k| @end|ng |rom gm@||@com (Witold E Wolski)
Date: Thu, 15 Dec 2022 21:47:24 +0100
Subject: [R] [Rd] I do not want that R CMD build removes temp directory
In-Reply-To: <24A51D24-B62A-42E2-94C4-6842EFC87D50@R-project.org>
References: <CAAjnpdg8uLOBBEHWEWq81R+t0sUy=TiTPN_fy2WrgTn2-AWRqA@mail.gmail.com>
 <24A51D24-B62A-42E2-94C4-6842EFC87D50@R-project.org>
Message-ID: <CAAjnpdhUb6eJ78wZd501AH0CnkDYN7TQ0U=sP7RXpYjQTd0Reg@mail.gmail.com>

Thank you Simon,

It seems not to be related to the R package but rather to the OS,
(just got the same error when installing the shiny R package from
CRAN).
I am on an M1 mac running Windows ARM in Parallels. Installed a
x86_64-w64 R version.



"** byte-compile and prepare package for lazy loading
ERROR: lazy loading failed for package 'shiny'
* removing 'C:/Users/witoldwolski/AppData/Local/R/win-library/4.2/shiny'
Warning in install.packages :"

On Thu, 15 Dec 2022 at 19:09, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>
> Yes:
>
> $ R CMD INSTALL --help | grep error
>       --no-clean-on-error       do not remove installed package on error
>
> But probably more commonly used way is to install the package from its unpacked directory as that avoids the use of temporary directories in the first place.
>
> In you case you can also use --no-test-load and the non-functional package will still be installed so you can inspect it.
>
> Cheers,
> Simon
>
> PS: please don't cross-post
>
>
> > On Dec 16, 2022, at 7:01 AM, Witold E Wolski <wewolski at gmail.com> wrote:
> >
> > I am getting a package build error, and can not figure out the problem.
> > The error is
> > "
> > ERROR: lazy loading failed for package 'prolfqua'
> > * removing 'C:/Users/
> > "
> > However since R CMD build removes the temp directory and does not give
> > any other errors how can I find out what the build problem is?
> >
> > Is there a way to disable the temp directory removal?
> >
> > Best Regards
> > Witek
> > --
> > Witold Eryk Wolski
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> >
>


-- 
Witold Eryk Wolski


