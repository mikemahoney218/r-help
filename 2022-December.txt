From m@rong|u@|u|g| @end|ng |rom gm@||@com  Thu Dec  1 12:25:40 2022
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Thu, 1 Dec 2022 12:25:40 +0100
Subject: [R] Select dataframe row containing a digit
In-Reply-To: <20221201085928.18573b32@rolf-Latitude-E7470>
References: <CAMk+s2SbBEZVU6ey_Ua3vzmwdtfNnatfYRXJ0_ecV-hpBKfdPw@mail.gmail.com>
 <20221201085928.18573b32@rolf-Latitude-E7470>
Message-ID: <CAMk+s2RSzB+R+KZmvokU=B0ikUan42e-4e1S1kCxrT_QyEZ=rg@mail.gmail.com>

Thank you, those are all viable solutions.
Regards
Luigi

On Wed, Nov 30, 2022 at 8:59 PM Rolf Turner <r.turner at auckland.ac.nz> wrote:
>
>
> On Wed, 30 Nov 2022 13:40:50 +0100
> Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
>
> > Hello,
> > I have a data frame where some lines containing strings including
> > digits. How do I select those rows and change their values?
> >
> > In essence, I have a data frame with different values assigned to the
> > column "val". I am formatting everything to either "POS" and "NEG",
> > but values entered as number should get the value "NUM".
> > How do I change such values?
> >
>
> What I do in such circumstances:
>
> suppressWarnings(X$val[!is.na(as.numeric(X$val))] <- "NUM")
>
> The "suppressWarnings()" bit is just included due to my OCD.
>
> This avoids fooling about with regular expressions, which always
> requires a huge amount of trial and error, and a great diminishment of
> the amount of hair on one's head (as a result of tearing out).
>
> Note that I have changed the name of your data frame from "df" to "X",
> since df() is a built-in R function (density of the F-distribution).
>
> See fortunes::fortune("might clash").
>
> cheers,
>
> Rolf Turner
>
> --
> Honorary Research Fellow
> Department of Statistics
> University of Auckland
> Phone: +64-9-373-7599 ext. 88276
>


-- 
Best regards,
Luigi


From r@ywong @end|ng |rom t@mu@edu  Fri Dec  2 04:55:35 2022
From: r@ywong @end|ng |rom t@mu@edu (Raymond Wong)
Date: Thu, 1 Dec 2022 21:55:35 -0600
Subject: [R] 2023 John M. Chambers Software Award
In-Reply-To: <f8a848c6-7ed0-4196-9cdc-8040b69c9ada@Spark>
References: <f8a848c6-7ed0-4196-9cdc-8040b69c9ada@Spark>
Message-ID: <39017c8b-eab3-4fb8-aaad-cc934ac10578@Spark>

Dear R-help listers,

I would like to let you know that submission window of the John M. Chambers Software Award is now open. The submission deadline is December 15, 2022.

The Statistical Computing Section of the American Statistical Association announces the competition for the John M. Chambers Statistical Software Award. In 1998 the Association for Computing Machinery (ACM) presented the ACM Software System Award to John Chambers for the design and development of S. Dr. Chambers generously donated his award to the Statistical Computing Section to endow an annual prize for statistical software written by, or in collaboration with, an undergraduate or graduate student.

Please visit http://asa.stat.uconn.edu for more information.

Best regards,

Sincerely,

Raymond Wong

Awards Chair
ASA Section on Statistical Computing
ASA Section on Statistical Graphics

	[[alternative HTML version deleted]]


From ev@n@cooch @end|ng |rom gm@||@com  Fri Dec  2 18:18:56 2022
From: ev@n@cooch @end|ng |rom gm@||@com (Evan Cooch)
Date: Fri, 2 Dec 2022 12:18:56 -0500
Subject: [R] interval between specific characters in a string...
Message-ID: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>

Was wondering if there is an 'efficient/elegant' way to do the following 
(without tidyverse). Take a string

abaaabbaaaaabaaab

Its easy enough to count the number of times the character 'b' shows up 
in the string, but...what I'm looking for is outputing the 'intervals' 
between occurrences of 'b' (starting the counter at the beginning of the 
string). So, for the preceding example, 'b' shows up in positions

2, 6, 7, 13, 17

So, the interval data would be: 2, 4, 1, 6, 4

My main approach has been to simply output positions (say, something 
like unlist(gregexpr('b', target_string))), and 'do the math' between 
successive positions. Can anyone suggest a more elegant approach?

Thanks in advance...


From @kw@|mmo @end|ng |rom gm@||@com  Sat Dec  3 01:01:18 2022
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Fri, 2 Dec 2022 19:01:18 -0500
Subject: [R] interval between specific characters in a string...
In-Reply-To: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
References: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
Message-ID: <CAPcHnpSRXU0RLOER+8Jxsxi-LumpK43sr5X-yXAMxuvcqBdKkA@mail.gmail.com>

try

gregexpr('b+', target_string)

which looks for one or more b characters, then get the attribute
"match.length"

On Fri, Dec 2, 2022, 18:56 Evan Cooch <evan.cooch at gmail.com> wrote:

> Was wondering if there is an 'efficient/elegant' way to do the following
> (without tidyverse). Take a string
>
> abaaabbaaaaabaaab
>
> Its easy enough to count the number of times the character 'b' shows up
> in the string, but...what I'm looking for is outputing the 'intervals'
> between occurrences of 'b' (starting the counter at the beginning of the
> string). So, for the preceding example, 'b' shows up in positions
>
> 2, 6, 7, 13, 17
>
> So, the interval data would be: 2, 4, 1, 6, 4
>
> My main approach has been to simply output positions (say, something
> like unlist(gregexpr('b', target_string))), and 'do the math' between
> successive positions. Can anyone suggest a more elegant approach?
>
> Thanks in advance...
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From mtmorg@n@b|oc @end|ng |rom gm@||@com  Sat Dec  3 01:39:20 2022
From: mtmorg@n@b|oc @end|ng |rom gm@||@com (Martin Morgan)
Date: Sat, 3 Dec 2022 00:39:20 +0000
Subject: [R] interval between specific characters in a string...
In-Reply-To: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
References: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
Message-ID: <BY5PR04MB6627BD017DA84DD29C08794DF9169@BY5PR04MB6627.namprd04.prod.outlook.com>

You could split the string into letters and figure out which ones are ?b?

which(strsplit(x, "")[[1]] == "b")

and then find the difference between each position, ?anchoring? at position 0

> diff(c(0, which(strsplit(x, "")[[1]] == "b")))
[1] 2 4 1 6 4

From: R-help <r-help-bounces at r-project.org> on behalf of Evan Cooch <evan.cooch at gmail.com>
Date: Friday, December 2, 2022 at 6:56 PM
To: r-help at r-project.org <r-help at r-project.org>
Subject: [R] interval between specific characters in a string...
Was wondering if there is an 'efficient/elegant' way to do the following
(without tidyverse). Take a string

abaaabbaaaaabaaab

Its easy enough to count the number of times the character 'b' shows up
in the string, but...what I'm looking for is outputing the 'intervals'
between occurrences of 'b' (starting the counter at the beginning of the
string). So, for the preceding example, 'b' shows up in positions

2, 6, 7, 13, 17

So, the interval data would be: 2, 4, 1, 6, 4

My main approach has been to simply output positions (say, something
like unlist(gregexpr('b', target_string))), and 'do the math' between
successive positions. Can anyone suggest a more elegant approach?

Thanks in advance...

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From @h@rt @end|ng |rom d|m@uch||e@c|  Sat Dec  3 02:54:15 2022
From: @h@rt @end|ng |rom d|m@uch||e@c| (Andrew Hart)
Date: Fri, 2 Dec 2022 22:54:15 -0300
Subject: [R] interval between specific characters in a string...
In-Reply-To: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
References: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
Message-ID: <c4927d63-5f39-693c-a123-7edfca1c5b78@dim.uchile.cl>

Here's a function that can get the interval sizes for you.

getStringSegmentLengths <- function(s, delim, ...) {
   nchar(unlist(strsplit(s, delim, ...))) + 1L
}

It uses strsplit to return a list of all the segments of the string 
separated by delim. delim can be a regular expression and with ..., you 
can pass all the extra options to strsplit in order to specify how to 
break up the string.
It then uses unlist to convert the list output of strsplit to a 
character vector. nchar then gives the lengths of all the elements of 
the character vector and finally a 1 is added to each of these in order 
to obtain the correct interval sizes.

Hth,
Andrew.

On 2/12/2022 14:18, Evan Cooch wrote:
> Was wondering if there is an 'efficient/elegant' way to do the following 
> (without tidyverse). Take a string
> 
> abaaabbaaaaabaaab
> 
> Its easy enough to count the number of times the character 'b' shows up 
> in the string, but...what I'm looking for is outputing the 'intervals' 
> between occurrences of 'b' (starting the counter at the beginning of the 
> string). So, for the preceding example, 'b' shows up in positions
> 
> 2, 6, 7, 13, 17
> 
> So, the interval data would be: 2, 4, 1, 6, 4
> 
> My main approach has been to simply output positions (say, something 
> like unlist(gregexpr('b', target_string))), and 'do the math' between 
> successive positions. Can anyone suggest a more elegant approach?
> 
> Thanks in advance...
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From @vi@e@gross m@iii@g oii gm@ii@com  Sat Dec  3 05:01:44 2022
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Fri, 2 Dec 2022 23:01:44 -0500
Subject: [R] interval between specific characters in a string...
In-Reply-To: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
References: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
Message-ID: <00de01d906cb$f57abe10$e0703a30$@gmail.com>

Evan, there are oodles of ways to do many things in R, and mcu of what the
tidyverse supplies can often be done as easily, or easier, outside it.

Before presenting a solution, I need to make sure I am answering the same
question or problem you intend.

Here is the string you have as an example:

st <- "abaaabbaaaaabaaab"

Is the string a string testing for single characters called "b" with any
other characters being either just "a" or at least non-"b" and of any length
but at least a few?

If so, ONE METHOD is to convert the string to a vector for reasons that will
become clear. For oddball reasons, this is a way to do it:

> unlist(strsplit(st,""))
[1] "a" "b" "a" "a" "a" "b" "b" "a" "a" "a" "a" "a" "b" "a" "a" "a" "b"

The result is a vector you can examine to see if they are equal to "b" or
not as a TRUE/FALSE vector:

> unlist(strsplit(st,"")) == "b"
[1] FALSE  TRUE FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE
TRUE FALSE FALSE FALSE
[17]  TRUE

Now you can ask for the indices which are TRUE, meaning at what offset from
the beginning are there instances of the letter "b":

> which(unlist(strsplit(st,"")) == "b")
[1]  2  6  7 13 17

This shows the second the integer offsets for the letter "b" are the second,
sixth and so on to seventeenth. Again, if I understood you, you want a
measure of how far apart instances of "b" are with adjacent ones being 1
apart. Again, many methods but I chose one where I sort of slid over the
above values by sliding in a zero from the front and removing the last
entry. 

So save that in a variable  first:

indices <- which(unlist(strsplit(st,"")) == "b")
indices_shifted <- c(0, head(indices, -1))

The two contain:

> indices
[1]  2  6  7 13 17
> indices_shifted
[1]  0  2  6  7 13
> indices - indices_shifted 
[1] 2 4 1 6 4

The above is the same as your intended result.

If you want to be cautious, handle edge cases like not having any "b" or an
empty string.

Here is the consolidated code:

st <- "abaaabbaaaaabaaab"
indices <- which(unlist(strsplit(st,"")) == "b")
indices_shifted <- c(0, head(indices, -1))
result <- indices - indices_shifted

There are many other ways to do this and of course some are more
straightforward and some more complex.

Consider a loop using a vector version of the string where each time you see
a b", you remember the last index you saw it and put out the number
representing the gap.

Fairly low tech.


-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Evan Cooch
Sent: Friday, December 2, 2022 12:19 PM
To: r-help at r-project.org
Subject: [R] interval between specific characters in a string...

Was wondering if there is an 'efficient/elegant' way to do the following
(without tidyverse). Take a string

abaaabbaaaaabaaab

Its easy enough to count the number of times the character 'b' shows up in
the string, but...what I'm looking for is outputing the 'intervals' 
between occurrences of 'b' (starting the counter at the beginning of the
string). So, for the preceding example, 'b' shows up in positions

2, 6, 7, 13, 17

So, the interval data would be: 2, 4, 1, 6, 4

My main approach has been to simply output positions (say, something like
unlist(gregexpr('b', target_string))), and 'do the math' between successive
positions. Can anyone suggest a more elegant approach?

Thanks in advance...

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sat Dec  3 09:48:36 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sat, 3 Dec 2022 08:48:36 +0000
Subject: [R] interval between specific characters in a string...
In-Reply-To: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
References: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
Message-ID: <ac1bb065-45bb-5bd7-f03a-32c62ca8c9b5@sapo.pt>

?s 17:18 de 02/12/2022, Evan Cooch escreveu:
> Was wondering if there is an 'efficient/elegant' way to do the following 
> (without tidyverse). Take a string
> 
> abaaabbaaaaabaaab
> 
> Its easy enough to count the number of times the character 'b' shows up 
> in the string, but...what I'm looking for is outputing the 'intervals' 
> between occurrences of 'b' (starting the counter at the beginning of the 
> string). So, for the preceding example, 'b' shows up in positions
> 
> 2, 6, 7, 13, 17
> 
> So, the interval data would be: 2, 4, 1, 6, 4
> 
> My main approach has been to simply output positions (say, something 
> like unlist(gregexpr('b', target_string))), and 'do the math' between 
> successive positions. Can anyone suggest a more elegant approach?
> 
> Thanks in advance...
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

I don't find your solution inelegant, it's even easy to write it as a 
one-line function.


char_interval <- function(x, s) {
   lapply(gregexpr(x, s), \(y) c(head(y, 1), diff(y)))
}

target_string <-"abaaabbaaaaabaaab"
char_interval('b', target_string)
#> [[1]]
#> [1] 2 4 1 6 4


Hope this helps,

Rui Barradas


From bgunter@4567 @end|ng |rom gm@||@com  Sat Dec  3 16:21:50 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 3 Dec 2022 07:21:50 -0800
Subject: [R] interval between specific characters in a string...
In-Reply-To: <ac1bb065-45bb-5bd7-f03a-32c62ca8c9b5@sapo.pt>
References: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
 <ac1bb065-45bb-5bd7-f03a-32c62ca8c9b5@sapo.pt>
Message-ID: <CAGxFJbQvd9FqWB6iAw=7d19APR+XO6sdphWqdWk9xoHh=WiBEg@mail.gmail.com>

Perhaps it is worth pointing out that looping constructs like lapply() can
be avoided and the procedure vectorized by mimicking Martin Morgan's
solution:

## s is the string to be searched.
diff(c(0,grep('b',strsplit(s,'')[[1]])))

However, Martin's solution is simpler and likely even faster as the regex
engine is unneeded:

diff(c(0, which(strsplit(s, "")[[1]] == "b"))) ## completely vectorized

This seems much preferable to me.

-- Bert





On Sat, Dec 3, 2022 at 12:49 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:

> ?s 17:18 de 02/12/2022, Evan Cooch escreveu:
> > Was wondering if there is an 'efficient/elegant' way to do the following
> > (without tidyverse). Take a string
> >
> > abaaabbaaaaabaaab
> >
> > Its easy enough to count the number of times the character 'b' shows up
> > in the string, but...what I'm looking for is outputing the 'intervals'
> > between occurrences of 'b' (starting the counter at the beginning of the
> > string). So, for the preceding example, 'b' shows up in positions
> >
> > 2, 6, 7, 13, 17
> >
> > So, the interval data would be: 2, 4, 1, 6, 4
> >
> > My main approach has been to simply output positions (say, something
> > like unlist(gregexpr('b', target_string))), and 'do the math' between
> > successive positions. Can anyone suggest a more elegant approach?
> >
> > Thanks in advance...
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> Hello,
>
> I don't find your solution inelegant, it's even easy to write it as a
> one-line function.
>
>
> char_interval <- function(x, s) {
>    lapply(gregexpr(x, s), \(y) c(head(y, 1), diff(y)))
> }
>
> target_string <-"abaaabbaaaaabaaab"
> char_interval('b', target_string)
> #> [[1]]
> #> [1] 2 4 1 6 4
>
>
> Hope this helps,
>
> Rui Barradas
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From hp@ge@@on@g|thub @end|ng |rom gm@||@com  Sun Dec  4 00:49:35 2022
From: hp@ge@@on@g|thub @end|ng |rom gm@||@com (=?UTF-8?B?SGVydsOpIFBhZ8Oocw==?=)
Date: Sat, 3 Dec 2022 15:49:35 -0800
Subject: [R] interval between specific characters in a string...
In-Reply-To: <CAGxFJbQvd9FqWB6iAw=7d19APR+XO6sdphWqdWk9xoHh=WiBEg@mail.gmail.com>
References: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
 <ac1bb065-45bb-5bd7-f03a-32c62ca8c9b5@sapo.pt>
 <CAGxFJbQvd9FqWB6iAw=7d19APR+XO6sdphWqdWk9xoHh=WiBEg@mail.gmail.com>
Message-ID: <d0882e87-3920-1abb-0880-f00dea2411a2@gmail.com>

On 03/12/2022 07:21, Bert Gunter wrote:
> Perhaps it is worth pointing out that looping constructs like lapply() can
> be avoided and the procedure vectorized by mimicking Martin Morgan's
> solution:
>
> ## s is the string to be searched.
> diff(c(0,grep('b',strsplit(s,'')[[1]])))
>
> However, Martin's solution is simpler and likely even faster as the regex
> engine is unneeded:
>
> diff(c(0, which(strsplit(s, "")[[1]] == "b"))) ## completely vectorized
>
> This seems much preferable to me.

Of all the proposed solutions, Andrew Hart's solution seems the most 
efficient:

 ? big_string <- strrep("abaaabbaaaaabaaabaaaaaaaaaaaaaaaaaaab", 500000)

 ? system.time(nchar(strsplit(big_string, split="b", fixed=TRUE)[[1]]) + 1)
 ? #? ? user? system elapsed
 ? # ? 0.736?? 0.028?? 0.764

 ? system.time(diff(c(0, which(strsplit(big_string, "", fixed=TRUE)[[1]] 
== "b"))))
 ? #? ? user? system elapsed
 ? #? 2.100?? 0.356?? 2.455

The bigger the string, the bigger the gap in performance.

Also, the bigger the average gap between 2 successive b's, the bigger 
the gap in performance.

Finally: always use fixed=TRUE in strsplit() if you don't need to use 
the regex engine.

Cheers,

H.


> -- Bert
>
>
>
>
>
> On Sat, Dec 3, 2022 at 12:49 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:
>
>> ?s 17:18 de 02/12/2022, Evan Cooch escreveu:
>>> Was wondering if there is an 'efficient/elegant' way to do the following
>>> (without tidyverse). Take a string
>>>
>>> abaaabbaaaaabaaab
>>>
>>> Its easy enough to count the number of times the character 'b' shows up
>>> in the string, but...what I'm looking for is outputing the 'intervals'
>>> between occurrences of 'b' (starting the counter at the beginning of the
>>> string). So, for the preceding example, 'b' shows up in positions
>>>
>>> 2, 6, 7, 13, 17
>>>
>>> So, the interval data would be: 2, 4, 1, 6, 4
>>>
>>> My main approach has been to simply output positions (say, something
>>> like unlist(gregexpr('b', target_string))), and 'do the math' between
>>> successive positions. Can anyone suggest a more elegant approach?
>>>
>>> Thanks in advance...
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> Hello,
>>
>> I don't find your solution inelegant, it's even easy to write it as a
>> one-line function.
>>
>>
>> char_interval <- function(x, s) {
>>     lapply(gregexpr(x, s), \(y) c(head(y, 1), diff(y)))
>> }
>>
>> target_string <-"abaaabbaaaaabaaab"
>> char_interval('b', target_string)
>> #> [[1]]
>> #> [1] 2 4 1 6 4
>>
>>
>> Hope this helps,
>>
>> Rui Barradas
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Herv? Pag?s

Bioconductor Core Team
hpages.on.github at gmail.com


From @vi@e@gross m@iii@g oii gm@ii@com  Sun Dec  4 01:21:48 2022
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Sat, 3 Dec 2022 19:21:48 -0500
Subject: [R] interval between specific characters in a string...
In-Reply-To: <d0882e87-3920-1abb-0880-f00dea2411a2@gmail.com>
References: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
 <ac1bb065-45bb-5bd7-f03a-32c62ca8c9b5@sapo.pt>
 <CAGxFJbQvd9FqWB6iAw=7d19APR+XO6sdphWqdWk9xoHh=WiBEg@mail.gmail.com>
 <d0882e87-3920-1abb-0880-f00dea2411a2@gmail.com>
Message-ID: <01ca01d90776$666cc500$33464f00$@gmail.com>

This may be a fairly dumb and often asked question about some functions like strsplit()  that return a list of things, often a list of ONE thing that be another list or a vector and needs to be made into something simpler..

The examples shown below have used various methods to convert the result to a vector but why is this not a built-in option for such a function to simplify the result either when possible or always?

Sure you can subset it with " [[1]]" or use unlist() or as.vector() to coerce it back to a vector. But when you have a very common idiom and a fact that many people waste lots of time figuring out they had a LIST containing a single vector and debug, maybe it would have made sense to have either a sister function like strsplit_v() that returns what is actually wanted or allow strsplit(whatever, output="vector") or something giving the same result.

Yes, I understand that when there is a workaround, it just complicates the base, but there could be a package that consistently does things like this to make the use of such functions easier.



-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Herv? Pag?s
Sent: Saturday, December 3, 2022 6:50 PM
To: Bert Gunter <bgunter.4567 at gmail.com>; Rui Barradas <ruipbarradas at sapo.pt>
Cc: r-help at r-project.org; Evan Cooch <evan.cooch at gmail.com>
Subject: Re: [R] interval between specific characters in a string...

On 03/12/2022 07:21, Bert Gunter wrote:
> Perhaps it is worth pointing out that looping constructs like lapply() 
> can be avoided and the procedure vectorized by mimicking Martin 
> Morgan's
> solution:
>
> ## s is the string to be searched.
> diff(c(0,grep('b',strsplit(s,'')[[1]])))
>
> However, Martin's solution is simpler and likely even faster as the 
> regex engine is unneeded:
>
> diff(c(0, which(strsplit(s, "")[[1]] == "b"))) ## completely 
> vectorized
>
> This seems much preferable to me.

Of all the proposed solutions, Andrew Hart's solution seems the most
efficient:

   big_string <- strrep("abaaabbaaaaabaaabaaaaaaaaaaaaaaaaaaab", 500000)

   system.time(nchar(strsplit(big_string, split="b", fixed=TRUE)[[1]]) + 1)
   #    user  system elapsed
   #   0.736   0.028   0.764

   system.time(diff(c(0, which(strsplit(big_string, "", fixed=TRUE)[[1]] == "b"))))
   #    user  system elapsed
   #  2.100   0.356   2.455

The bigger the string, the bigger the gap in performance.

Also, the bigger the average gap between 2 successive b's, the bigger the gap in performance.

Finally: always use fixed=TRUE in strsplit() if you don't need to use the regex engine.

Cheers,

H.


> -- Bert
>
>
>
>
>
> On Sat, Dec 3, 2022 at 12:49 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:
>
>> ?s 17:18 de 02/12/2022, Evan Cooch escreveu:
>>> Was wondering if there is an 'efficient/elegant' way to do the 
>>> following (without tidyverse). Take a string
>>>
>>> abaaabbaaaaabaaab
>>>
>>> Its easy enough to count the number of times the character 'b' shows 
>>> up in the string, but...what I'm looking for is outputing the 'intervals'
>>> between occurrences of 'b' (starting the counter at the beginning of 
>>> the string). So, for the preceding example, 'b' shows up in 
>>> positions
>>>
>>> 2, 6, 7, 13, 17
>>>
>>> So, the interval data would be: 2, 4, 1, 6, 4
>>>
>>> My main approach has been to simply output positions (say, something 
>>> like unlist(gregexpr('b', target_string))), and 'do the math' 
>>> between successive positions. Can anyone suggest a more elegant approach?
>>>
>>> Thanks in advance...
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> Hello,
>>
>> I don't find your solution inelegant, it's even easy to write it as a 
>> one-line function.
>>
>>
>> char_interval <- function(x, s) {
>>     lapply(gregexpr(x, s), \(y) c(head(y, 1), diff(y))) }
>>
>> target_string <-"abaaabbaaaaabaaab"
>> char_interval('b', target_string)
>> #> [[1]]
>> #> [1] 2 4 1 6 4
>>
>>
>> Hope this helps,
>>
>> Rui Barradas
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

--
Herv? Pag?s

Bioconductor Core Team
hpages.on.github at gmail.com

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Sun Dec  4 03:33:05 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 3 Dec 2022 18:33:05 -0800
Subject: [R] interval between specific characters in a string...
In-Reply-To: <d0882e87-3920-1abb-0880-f00dea2411a2@gmail.com>
References: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
 <ac1bb065-45bb-5bd7-f03a-32c62ca8c9b5@sapo.pt>
 <CAGxFJbQvd9FqWB6iAw=7d19APR+XO6sdphWqdWk9xoHh=WiBEg@mail.gmail.com>
 <d0882e87-3920-1abb-0880-f00dea2411a2@gmail.com>
Message-ID: <CAGxFJbRnWC93Y5mGi5S1Q6F0BTAVbm3Rtihfz6-2f6-5=eJ_wA@mail.gmail.com>

Thanks. Very informative.
I certainly missed this.

-- Bert

On Sat, Dec 3, 2022 at 3:49 PM Herv? Pag?s <hpages.on.github at gmail.com>
wrote:

> On 03/12/2022 07:21, Bert Gunter wrote:
> > Perhaps it is worth pointing out that looping constructs like lapply()
> can
> > be avoided and the procedure vectorized by mimicking Martin Morgan's
> > solution:
> >
> > ## s is the string to be searched.
> > diff(c(0,grep('b',strsplit(s,'')[[1]])))
> >
> > However, Martin's solution is simpler and likely even faster as the regex
> > engine is unneeded:
> >
> > diff(c(0, which(strsplit(s, "")[[1]] == "b"))) ## completely vectorized
> >
> > This seems much preferable to me.
>
> Of all the proposed solutions, Andrew Hart's solution seems the most
> efficient:
>
>    big_string <- strrep("abaaabbaaaaabaaabaaaaaaaaaaaaaaaaaaab", 500000)
>
>    system.time(nchar(strsplit(big_string, split="b", fixed=TRUE)[[1]]) + 1)
>    #    user  system elapsed
>    #   0.736   0.028   0.764
>
>    system.time(diff(c(0, which(strsplit(big_string, "", fixed=TRUE)[[1]]
> == "b"))))
>    #    user  system elapsed
>    #  2.100   0.356   2.455
>
> The bigger the string, the bigger the gap in performance.
>
> Also, the bigger the average gap between 2 successive b's, the bigger
> the gap in performance.
>
> Finally: always use fixed=TRUE in strsplit() if you don't need to use
> the regex engine.
>
> Cheers,
>
> H.
>
>
> > -- Bert
> >
> >
> >
> >
> >
> > On Sat, Dec 3, 2022 at 12:49 AM Rui Barradas <ruipbarradas at sapo.pt>
> wrote:
> >
> >> ?s 17:18 de 02/12/2022, Evan Cooch escreveu:
> >>> Was wondering if there is an 'efficient/elegant' way to do the
> following
> >>> (without tidyverse). Take a string
> >>>
> >>> abaaabbaaaaabaaab
> >>>
> >>> Its easy enough to count the number of times the character 'b' shows up
> >>> in the string, but...what I'm looking for is outputing the 'intervals'
> >>> between occurrences of 'b' (starting the counter at the beginning of
> the
> >>> string). So, for the preceding example, 'b' shows up in positions
> >>>
> >>> 2, 6, 7, 13, 17
> >>>
> >>> So, the interval data would be: 2, 4, 1, 6, 4
> >>>
> >>> My main approach has been to simply output positions (say, something
> >>> like unlist(gregexpr('b', target_string))), and 'do the math' between
> >>> successive positions. Can anyone suggest a more elegant approach?
> >>>
> >>> Thanks in advance...
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide
> >>> http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >> Hello,
> >>
> >> I don't find your solution inelegant, it's even easy to write it as a
> >> one-line function.
> >>
> >>
> >> char_interval <- function(x, s) {
> >>     lapply(gregexpr(x, s), \(y) c(head(y, 1), diff(y)))
> >> }
> >>
> >> target_string <-"abaaabbaaaaabaaab"
> >> char_interval('b', target_string)
> >> #> [[1]]
> >> #> [1] 2 4 1 6 4
> >>
> >>
> >> Hope this helps,
> >>
> >> Rui Barradas
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >>
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> --
> Herv? Pag?s
>
> Bioconductor Core Team
> hpages.on.github at gmail.com
>
>

	[[alternative HTML version deleted]]


From h@w|ckh@m @end|ng |rom gm@||@com  Sun Dec  4 09:25:08 2022
From: h@w|ckh@m @end|ng |rom gm@||@com (Hadley Wickham)
Date: Sun, 4 Dec 2022 21:25:08 +1300
Subject: [R] interval between specific characters in a string...
In-Reply-To: <d0882e87-3920-1abb-0880-f00dea2411a2@gmail.com>
References: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
 <ac1bb065-45bb-5bd7-f03a-32c62ca8c9b5@sapo.pt>
 <CAGxFJbQvd9FqWB6iAw=7d19APR+XO6sdphWqdWk9xoHh=WiBEg@mail.gmail.com>
 <d0882e87-3920-1abb-0880-f00dea2411a2@gmail.com>
Message-ID: <CABdHhvGz22ma5CgcBpJSVLL0NomqjONyz2jGxrQRSRO02iyZ3g@mail.gmail.com>

On Sun, Dec 4, 2022 at 12:50 PM Herv? Pag?s <hpages.on.github at gmail.com> wrote:
>
> On 03/12/2022 07:21, Bert Gunter wrote:
> > Perhaps it is worth pointing out that looping constructs like lapply() can
> > be avoided and the procedure vectorized by mimicking Martin Morgan's
> > solution:
> >
> > ## s is the string to be searched.
> > diff(c(0,grep('b',strsplit(s,'')[[1]])))
> >
> > However, Martin's solution is simpler and likely even faster as the regex
> > engine is unneeded:
> >
> > diff(c(0, which(strsplit(s, "")[[1]] == "b"))) ## completely vectorized
> >
> > This seems much preferable to me.
>
> Of all the proposed solutions, Andrew Hart's solution seems the most
> efficient:
>
>    big_string <- strrep("abaaabbaaaaabaaabaaaaaaaaaaaaaaaaaaab", 500000)
>
>    system.time(nchar(strsplit(big_string, split="b", fixed=TRUE)[[1]]) + 1)
>    #    user  system elapsed
>    #   0.736   0.028   0.764
>
>    system.time(diff(c(0, which(strsplit(big_string, "", fixed=TRUE)[[1]]
> == "b"))))
>    #    user  system elapsed
>    #  2.100   0.356   2.455
>
> The bigger the string, the bigger the gap in performance.
>
> Also, the bigger the average gap between 2 successive b's, the bigger
> the gap in performance.
>
> Finally: always use fixed=TRUE in strsplit() if you don't need to use
> the regex engine.

You can do a bit better if you are willing to use stringr:

library(stringr)
big_string <- strrep("abaaabbaaaaabaaabaaaaaaaaaaaaaaaaaaab", 500000)

system.time(nchar(strsplit(big_string, split="b", fixed=TRUE)[[1]]) + 1)
#>    user  system elapsed
#>   0.126   0.002   0.128

system.time(str_length(str_split(big_string, fixed("b"))[[1]]))
#>    user  system elapsed
#>   0.103   0.004   0.107

(And my timings also suggest that it's time for Herv? to get a new computer :P)

It feels like an approach that uses locations should be faster since
you wouldn't have to construct all the intermediate strings.

system.time(pos <- str_locate_all(big_string, fixed("b"))[[1]][,1])
#>    user  system elapsed
#>   0.075   0.004   0.080
# I suspect this could be optimised with a little thought making this approach
# faster overall
system.time(c(0, diff(pos))
#>    user  system elapsed
#>   0.022   0.006   0.027

Hadley

-- 
http://hadley.nz


From h@w|ckh@m @end|ng |rom gm@||@com  Sun Dec  4 09:25:46 2022
From: h@w|ckh@m @end|ng |rom gm@||@com (Hadley Wickham)
Date: Sun, 4 Dec 2022 21:25:46 +1300
Subject: [R] interval between specific characters in a string...
In-Reply-To: <01ca01d90776$666cc500$33464f00$@gmail.com>
References: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
 <ac1bb065-45bb-5bd7-f03a-32c62ca8c9b5@sapo.pt>
 <CAGxFJbQvd9FqWB6iAw=7d19APR+XO6sdphWqdWk9xoHh=WiBEg@mail.gmail.com>
 <d0882e87-3920-1abb-0880-f00dea2411a2@gmail.com>
 <01ca01d90776$666cc500$33464f00$@gmail.com>
Message-ID: <CABdHhvH5w1k_t5rXnWywFmPoFDD5wF3FSqt2p1c9L7nWubea7w@mail.gmail.com>

On Sun, Dec 4, 2022 at 1:22 PM <avi.e.gross at gmail.com> wrote:
>
> This may be a fairly dumb and often asked question about some functions like strsplit()  that return a list of things, often a list of ONE thing that be another list or a vector and needs to be made into something simpler..
>
> The examples shown below have used various methods to convert the result to a vector but why is this not a built-in option for such a function to simplify the result either when possible or always?
>
> Sure you can subset it with " [[1]]" or use unlist() or as.vector() to coerce it back to a vector. But when you have a very common idiom and a fact that many people waste lots of time figuring out they had a LIST containing a single vector and debug, maybe it would have made sense to have either a sister function like strsplit_v() that returns what is actually wanted or allow strsplit(whatever, output="vector") or something giving the same result.
>
> Yes, I understand that when there is a workaround, it just complicates the base, but there could be a package that consistently does things like this to make the use of such functions easier.

The next version of stringr (currently being processed by CRAN)
provides str_split_1() for exactly this purpose.

Hadley

-- 
http://hadley.nz


From t@v|b@r @end|ng |rom gm@||@com  Sun Dec  4 10:38:56 2022
From: t@v|b@r @end|ng |rom gm@||@com (Micha Silver)
Date: Sun, 4 Dec 2022 11:38:56 +0200
Subject: [R] interval between specific characters in a string...
In-Reply-To: <CABdHhvH5w1k_t5rXnWywFmPoFDD5wF3FSqt2p1c9L7nWubea7w@mail.gmail.com>
References: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
 <ac1bb065-45bb-5bd7-f03a-32c62ca8c9b5@sapo.pt>
 <CAGxFJbQvd9FqWB6iAw=7d19APR+XO6sdphWqdWk9xoHh=WiBEg@mail.gmail.com>
 <d0882e87-3920-1abb-0880-f00dea2411a2@gmail.com>
 <01ca01d90776$666cc500$33464f00$@gmail.com>
 <CABdHhvH5w1k_t5rXnWywFmPoFDD5wF3FSqt2p1c9L7nWubea7w@mail.gmail.com>
Message-ID: <0b8dde95-2279-71f6-c3d5-8ff59be943f9@gmail.com>


On 04/12/2022 10:25, Hadley Wickham wrote:
> On Sun, Dec 4, 2022 at 1:22 PM <avi.e.gross at gmail.com> wrote:
>> This may be a fairly dumb and often asked question about some functions like strsplit()  that return a list of things, often a list of ONE thing that be another list or a vector and needs to be made into something simpler..
>>
>> The examples shown below have used various methods to convert the result to a vector but why is this not a built-in option for such a function to simplify the result either when possible or always?
>>
>> Sure you can subset it with " [[1]]" or use unlist() or as.vector() to coerce it back to a vector. But when you have a very common idiom and a fact that many people waste lots of time figuring out they had a LIST containing a single vector and debug, maybe it would have made sense to have either a sister function like strsplit_v() that returns what is actually wanted or allow strsplit(whatever, output="vector") or something giving the same result.
>>
>> Yes, I understand that when there is a workaround, it just complicates the base, but there could be a package that consistently does things like this to make the use of such functions easier.
> The next version of stringr (currently being processed by CRAN)
> provides str_split_1() for exactly this purpose.


Thanks!

Well appreciated...


>
> Hadley
>
-- 
Micha Silver
Ben Gurion Univ.
Sde Boker, Remote Sensing Lab
cell: +972-523-665918


From hp@ge@@on@g|thub @end|ng |rom gm@||@com  Sun Dec  4 22:42:13 2022
From: hp@ge@@on@g|thub @end|ng |rom gm@||@com (=?UTF-8?B?SGVydsOpIFBhZ8Oocw==?=)
Date: Sun, 4 Dec 2022 13:42:13 -0800
Subject: [R] interval between specific characters in a string...
In-Reply-To: <CABdHhvGz22ma5CgcBpJSVLL0NomqjONyz2jGxrQRSRO02iyZ3g@mail.gmail.com>
References: <4d5418e3-0c41-43c0-e124-d735dbd707a4@gmail.com>
 <ac1bb065-45bb-5bd7-f03a-32c62ca8c9b5@sapo.pt>
 <CAGxFJbQvd9FqWB6iAw=7d19APR+XO6sdphWqdWk9xoHh=WiBEg@mail.gmail.com>
 <d0882e87-3920-1abb-0880-f00dea2411a2@gmail.com>
 <CABdHhvGz22ma5CgcBpJSVLL0NomqjONyz2jGxrQRSRO02iyZ3g@mail.gmail.com>
Message-ID: <7a2b3d38-4697-26a0-eca7-f6ec95f96c66@gmail.com>


On 04/12/2022 00:25, Hadley Wickham wrote:
> On Sun, Dec 4, 2022 at 12:50 PM Herv? Pag?s <hpages.on.github at gmail.com> wrote:
>> On 03/12/2022 07:21, Bert Gunter wrote:
>>> Perhaps it is worth pointing out that looping constructs like lapply() can
>>> be avoided and the procedure vectorized by mimicking Martin Morgan's
>>> solution:
>>>
>>> ## s is the string to be searched.
>>> diff(c(0,grep('b',strsplit(s,'')[[1]])))
>>>
>>> However, Martin's solution is simpler and likely even faster as the regex
>>> engine is unneeded:
>>>
>>> diff(c(0, which(strsplit(s, "")[[1]] == "b"))) ## completely vectorized
>>>
>>> This seems much preferable to me.
>> Of all the proposed solutions, Andrew Hart's solution seems the most
>> efficient:
>>
>>     big_string <- strrep("abaaabbaaaaabaaabaaaaaaaaaaaaaaaaaaab", 500000)
>>
>>     system.time(nchar(strsplit(big_string, split="b", fixed=TRUE)[[1]]) + 1)
>>     #    user  system elapsed
>>     #   0.736   0.028   0.764
>>
>>     system.time(diff(c(0, which(strsplit(big_string, "", fixed=TRUE)[[1]]
>> == "b"))))
>>     #    user  system elapsed
>>     #  2.100   0.356   2.455
>>
>> The bigger the string, the bigger the gap in performance.
>>
>> Also, the bigger the average gap between 2 successive b's, the bigger
>> the gap in performance.
>>
>> Finally: always use fixed=TRUE in strsplit() if you don't need to use
>> the regex engine.
> You can do a bit better if you are willing to use stringr:
>
> library(stringr)
> big_string <- strrep("abaaabbaaaaabaaabaaaaaaaaaaaaaaaaaaab", 500000)
>
> system.time(nchar(strsplit(big_string, split="b", fixed=TRUE)[[1]]) + 1)
> #>    user  system elapsed
> #>   0.126   0.002   0.128
>
> system.time(str_length(str_split(big_string, fixed("b"))[[1]]))
> #>    user  system elapsed
> #>   0.103   0.004   0.107
>
> (And my timings also suggest that it's time for Herv? to get a new computer :P)

LOL

Actually my timings were for

   big_string <- strrep("abaaabbaaaaabaaabaaaaaaaaaaaaaaaaaaab", 1500000)

but I mixed up things when I copy-pasted them in my email.

Even though I still need a new laptop and I'm in the process of getting 
a new one ;-)

H.

-- 
Herv? Pag?s

Bioconductor Core Team
hpages.on.github at gmail.com


From peter@|@ng|e|der @end|ng |rom gm@||@com  Mon Dec  5 14:28:16 2022
From: peter@|@ng|e|der @end|ng |rom gm@||@com (Peter Langfelder)
Date: Mon, 5 Dec 2022 21:28:16 +0800
Subject: [R] confusion about dev.prev()
Message-ID: <CA+hbrhXTs45XYk0J8hXOpq4iSmwnxZ_eWoC6yCNE8etgHyB7Mw@mail.gmail.com>

Hi all,

I'm either confused about dev.prev() or there's a bug in it. Open two
devices, plot a plot, call dev.prev() and plot again. I would expect
the second plot to appear in the first device, but that is not what
happens; both plots appear in the second device. Is this expected
behavior or a bug?
Example (in linux):

x11()
par(mfrow = c(1,2));
x11()
par(mfrow = c(1,2));
plot(1:10)
dev.prev()
plot(10:20)

This happens both in R-4.2.0 (patched) and R-devel from 2022-09-13
(sorry, don't have a newer one handy).

sessionInfo() from the R-devel session:

R Under development (unstable) (2022-09-13 r82849)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Fedora Linux 36 (Thirty Six)

Matrix products: default
BLAS:   /usr/local/lib64/R-devel/lib/libRblas.so
LAPACK: /usr/local/lib64/R-devel/lib/libRlapack.so

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
 [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] compiler_4.3.0


From kry|ov@r00t @end|ng |rom gm@||@com  Mon Dec  5 14:38:34 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Mon, 5 Dec 2022 16:38:34 +0300
Subject: [R] confusion about dev.prev()
In-Reply-To: <CA+hbrhXTs45XYk0J8hXOpq4iSmwnxZ_eWoC6yCNE8etgHyB7Mw@mail.gmail.com>
References: <CA+hbrhXTs45XYk0J8hXOpq4iSmwnxZ_eWoC6yCNE8etgHyB7Mw@mail.gmail.com>
Message-ID: <20221205163834.0c8517ae@arachnoid>

? Mon, 5 Dec 2022 21:28:16 +0800
Peter Langfelder <peter.langfelder at gmail.com> ?????:

> Open two devices, plot a plot, call dev.prev() and plot again. I
> would expect the second plot to appear in the first device, but that
> is not what happens; both plots appear in the second device. 

Unfortunately, dev.prev() and dev.next() only return the number of the
respective device. You need dev.set() to actually make the change.

-- 
Best regards,
Ivan


From peter@|@ng|e|der @end|ng |rom gm@||@com  Mon Dec  5 14:40:13 2022
From: peter@|@ng|e|der @end|ng |rom gm@||@com (Peter Langfelder)
Date: Mon, 5 Dec 2022 21:40:13 +0800
Subject: [R] confusion about dev.prev()
In-Reply-To: <20221205163834.0c8517ae@arachnoid>
References: <CA+hbrhXTs45XYk0J8hXOpq4iSmwnxZ_eWoC6yCNE8etgHyB7Mw@mail.gmail.com>
 <20221205163834.0c8517ae@arachnoid>
Message-ID: <CA+hbrhUOcDixt+B8+bVBRpv+MfyePDS2Jjv48BgaQ_LMmEUpJg@mail.gmail.com>

Ah, thanks, got it. Misread the help again...

Peter

On Mon, Dec 5, 2022 at 9:38 PM Ivan Krylov <krylov.r00t at gmail.com> wrote:
>
> ? Mon, 5 Dec 2022 21:28:16 +0800
> Peter Langfelder <peter.langfelder at gmail.com> ?????:
>
> > Open two devices, plot a plot, call dev.prev() and plot again. I
> > would expect the second plot to appear in the first device, but that
> > is not what happens; both plots appear in the second device.
>
> Unfortunately, dev.prev() and dev.next() only return the number of the
> respective device. You need dev.set() to actually make the change.
>
> --
> Best regards,
> Ivan


From @@h||nv@rkey @end|ng |rom gm@||@com  Mon Dec  5 08:40:51 2022
From: @@h||nv@rkey @end|ng |rom gm@||@com (ASHLIN VARKEY)
Date: Mon, 5 Dec 2022 13:10:51 +0530
Subject: [R] query in loops
Message-ID: <CAKwZBoycX6gtAgmKZtgZ+5baKd=tMioep=fOUj_QYauo_EEJfA@mail.gmail.com>

Sir,
I want to write a loop in R to find the AIC factor. For its calculation, I
need to run an algorithm in the attached file. Here  'x' represents the
dataset and xi denotes the i-th observation after arranging it in ascending
order. Q(u) and q(u) represent the quantile function and quantile density
function respectively. For my distribution Q(u) and q(u) are given below.
Q(u)=-? log?(1-u)+(b-?)u+((r-b))/2 u^2
q(u)=b+u(r-b+?/(1-u)).
Can you please help me to correct this program based on the algorithm?
*R code*
x=c(0.047, 0.296, 0.540, 1.271, 0.115, 0.334, 0.570, 1.326, 0.121, 0.395,
0.641, 1.447, 0.132, 0.458, 0.644, 1.485, 0.164, 0.466, 0.696, 1.553,
0.197, 0.501, 0.841,1.581,
0.203,0.507, 0.863, 1.589, 3.743, 0.260, 0.529, 1.099, 2.178, 0.282, 0.534,
1.219, 2.343, 2.416, 2.444, 2.825, 2.830, 3.578, 3.658, 3.978, 4.033)
xi=sort(x)
xi
n=45
alpha=-1.014
b=.949
r=3.11
u=c()
D=c()
q=c()
Q=c()
for (i in 1:n) {
    u[i]=i/(n+1)
    Q[i]=-alpha*log(1-u[i])+(b-alpha)*u[i]+((r-b)/2)*(u[i]^2)
    q[i]=b+u[i]*(r-b+(alpha/(1-u[i])))
    D[i]=Q[i]-xi[i]
    if (D[i]<(10^-7)) {
      print (q[i])
    }
    else{
      u[i+1]=u[i]+((xi[i]-Q[i])/q[i])
    }
  }

From m@rong|u@|u|g| @end|ng |rom gm@||@com  Mon Dec  5 22:24:19 2022
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Mon, 5 Dec 2022 22:24:19 +0100
Subject: [R] How to draw chemical structures with R?
Message-ID: <CAMk+s2Q2gUOjVdQwjUHxirVLDpRL7ceGkOS0+sVf3yrVUtP=4A@mail.gmail.com>

Hello,'
I have seen from this link
https://cran.r-project.org/web/packages/rcdk/vignettes/using-rcdk.html
that there is a way to draw chemical structures using R via rcdk package.
I tried to draw a simple structure but I got an error. What is it
missing? What is the correct syntax?
Thanks

```
library(rcdk)
smile <- 'c1ccccc1CC(=O)C(N)CC1CCCCOC1'
mol <- parse.smiles(smile)[[1]]
view.molecule.2d(mol)
> Error in view.molecule.2d(mol) : java.lang.NoSuchMethodError: <init>
```


From jho|tm@n @end|ng |rom gm@||@com  Mon Dec  5 23:05:47 2022
From: jho|tm@n @end|ng |rom gm@||@com (jim holtman)
Date: Mon, 5 Dec 2022 14:05:47 -0800
Subject: [R] query in loops
In-Reply-To: <CAKwZBoycX6gtAgmKZtgZ+5baKd=tMioep=fOUj_QYauo_EEJfA@mail.gmail.com>
References: <CAKwZBoycX6gtAgmKZtgZ+5baKd=tMioep=fOUj_QYauo_EEJfA@mail.gmail.com>
Message-ID: <CAAxdm-6WbSS3mzwgqj-=3+MBQFxehmrYDSD1xotfiwpdTgOuOA@mail.gmail.com>

So what is the problem that you would like help in correcting?  The program
seems to run.

Thanks

Jim Holtman
*Data Munger Guru*


*What is the problem that you are trying to solve?Tell me what you want to
do, not how you want to do it.*


On Mon, Dec 5, 2022 at 12:59 PM ASHLIN VARKEY <ashlinvarkey at gmail.com>
wrote:

> Sir,
> I want to write a loop in R to find the AIC factor. For its calculation, I
> need to run an algorithm in the attached file. Here  'x' represents the
> dataset and xi denotes the i-th observation after arranging it in ascending
> order. Q(u) and q(u) represent the quantile function and quantile density
> function respectively. For my distribution Q(u) and q(u) are given below.
> Q(u)=-? log?(1-u)+(b-?)u+((r-b))/2 u^2
> q(u)=b+u(r-b+?/(1-u)).
> Can you please help me to correct this program based on the algorithm?
> *R code*
> x=c(0.047, 0.296, 0.540, 1.271, 0.115, 0.334, 0.570, 1.326, 0.121, 0.395,
> 0.641, 1.447, 0.132, 0.458, 0.644, 1.485, 0.164, 0.466, 0.696, 1.553,
> 0.197, 0.501, 0.841,1.581,
> 0.203,0.507, 0.863, 1.589, 3.743, 0.260, 0.529, 1.099, 2.178, 0.282, 0.534,
> 1.219, 2.343, 2.416, 2.444, 2.825, 2.830, 3.578, 3.658, 3.978, 4.033)
> xi=sort(x)
> xi
> n=45
> alpha=-1.014
> b=.949
> r=3.11
> u=c()
> D=c()
> q=c()
> Q=c()
> for (i in 1:n) {
>     u[i]=i/(n+1)
>     Q[i]=-alpha*log(1-u[i])+(b-alpha)*u[i]+((r-b)/2)*(u[i]^2)
>     q[i]=b+u[i]*(r-b+(alpha/(1-u[i])))
>     D[i]=Q[i]-xi[i]
>     if (D[i]<(10^-7)) {
>       print (q[i])
>     }
>     else{
>       u[i+1]=u[i]+((xi[i]-Q[i])/q[i])
>     }
>   }
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From |mh_u@er@-group@ @end|ng |rom mo|conn@com  Tue Dec  6 03:11:13 2022
From: |mh_u@er@-group@ @end|ng |rom mo|conn@com (LMH)
Date: Mon, 5 Dec 2022 21:11:13 -0500
Subject: [R] How to draw chemical structures with R?
In-Reply-To: <CAMk+s2Q2gUOjVdQwjUHxirVLDpRL7ceGkOS0+sVf3yrVUtP=4A@mail.gmail.com>
References: <CAMk+s2Q2gUOjVdQwjUHxirVLDpRL7ceGkOS0+sVf3yrVUtP=4A@mail.gmail.com>
Message-ID: <b77332fa-74ed-b0e0-1113-7739010478d3@molconn.com>

Just my opinion, but I think you would be better off to draw the structures using a drawing program
like MarvinSketch (free, java based) and save the structure as a SMILES file, MOL file, or SDF. You
should be able to import any of those into R. A program like MarvinSketch will check the structure
for errors as you draw it and keep to standardized formats.

By the way, I see no error in the SMILEA string for the structure in your expamle so your error is
not in the drawing part of the process. Even so, I try to keep to well established tools for basic
tasks and Marvin as is well established as it gets.

I would look for an example of what you are trying and see if you can get the example to work.

LMH


Luigi Marongiu wrote:
> Hello,'
> I have seen from this link
> https://cran.r-project.org/web/packages/rcdk/vignettes/using-rcdk.html
> that there is a way to draw chemical structures using R via rcdk package.
> I tried to draw a simple structure but I got an error. What is it
> missing? What is the correct syntax?
> Thanks
> 
> ```
> library(rcdk)
> smile <- 'c1ccccc1CC(=O)C(N)CC1CCCCOC1'
> mol <- parse.smiles(smile)[[1]]
> view.molecule.2d(mol)
>> Error in view.molecule.2d(mol) : java.lang.NoSuchMethodError: <init>
> ```
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Tue Dec  6 06:59:34 2022
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Tue, 6 Dec 2022 06:59:34 +0100
Subject: [R] How to draw chemical structures with R?
In-Reply-To: <b77332fa-74ed-b0e0-1113-7739010478d3@molconn.com>
References: <CAMk+s2Q2gUOjVdQwjUHxirVLDpRL7ceGkOS0+sVf3yrVUtP=4A@mail.gmail.com>
 <b77332fa-74ed-b0e0-1113-7739010478d3@molconn.com>
Message-ID: <CAMk+s2Sr5Bd+woqgA+FEii5drqUR-UQWV9w8YU93oodFrxv8QQ@mail.gmail.com>

Thanks for the tip! I think the problem is all Java-based, the SMILES
structure comes from the example in the template, it should work.
There is something missing in the execution...

On Tue, Dec 6, 2022 at 3:12 AM LMH <lmh_users-groups at molconn.com> wrote:
>
> Just my opinion, but I think you would be better off to draw the structures using a drawing program
> like MarvinSketch (free, java based) and save the structure as a SMILES file, MOL file, or SDF. You
> should be able to import any of those into R. A program like MarvinSketch will check the structure
> for errors as you draw it and keep to standardized formats.
>
> By the way, I see no error in the SMILEA string for the structure in your expamle so your error is
> not in the drawing part of the process. Even so, I try to keep to well established tools for basic
> tasks and Marvin as is well established as it gets.
>
> I would look for an example of what you are trying and see if you can get the example to work.
>
> LMH
>
>
> Luigi Marongiu wrote:
> > Hello,'
> > I have seen from this link
> > https://cran.r-project.org/web/packages/rcdk/vignettes/using-rcdk.html
> > that there is a way to draw chemical structures using R via rcdk package.
> > I tried to draw a simple structure but I got an error. What is it
> > missing? What is the correct syntax?
> > Thanks
> >
> > ```
> > library(rcdk)
> > smile <- 'c1ccccc1CC(=O)C(N)CC1CCCCOC1'
> > mol <- parse.smiles(smile)[[1]]
> > view.molecule.2d(mol)
> >> Error in view.molecule.2d(mol) : java.lang.NoSuchMethodError: <init>
> > ```
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>


-- 
Best regards,
Luigi


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Dec  6 07:21:27 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 05 Dec 2022 22:21:27 -0800
Subject: [R] How to draw chemical structures with R?
In-Reply-To: <CAMk+s2Sr5Bd+woqgA+FEii5drqUR-UQWV9w8YU93oodFrxv8QQ@mail.gmail.com>
References: <CAMk+s2Q2gUOjVdQwjUHxirVLDpRL7ceGkOS0+sVf3yrVUtP=4A@mail.gmail.com>
 <b77332fa-74ed-b0e0-1113-7739010478d3@molconn.com>
 <CAMk+s2Sr5Bd+woqgA+FEii5drqUR-UQWV9w8YU93oodFrxv8QQ@mail.gmail.com>
Message-ID: <564DF546-0CCF-4796-A96F-F4F6630B1DD6@dcn.davis.ca.us>

I have never seen this package mentioned on this list. You should contact the package maintainer.

On December 5, 2022 9:59:34 PM PST, Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
>Thanks for the tip! I think the problem is all Java-based, the SMILES
>structure comes from the example in the template, it should work.
>There is something missing in the execution...
>
>On Tue, Dec 6, 2022 at 3:12 AM LMH <lmh_users-groups at molconn.com> wrote:
>>
>> Just my opinion, but I think you would be better off to draw the structures using a drawing program
>> like MarvinSketch (free, java based) and save the structure as a SMILES file, MOL file, or SDF. You
>> should be able to import any of those into R. A program like MarvinSketch will check the structure
>> for errors as you draw it and keep to standardized formats.
>>
>> By the way, I see no error in the SMILEA string for the structure in your expamle so your error is
>> not in the drawing part of the process. Even so, I try to keep to well established tools for basic
>> tasks and Marvin as is well established as it gets.
>>
>> I would look for an example of what you are trying and see if you can get the example to work.
>>
>> LMH
>>
>>
>> Luigi Marongiu wrote:
>> > Hello,'
>> > I have seen from this link
>> > https://cran.r-project.org/web/packages/rcdk/vignettes/using-rcdk.html
>> > that there is a way to draw chemical structures using R via rcdk package.
>> > I tried to draw a simple structure but I got an error. What is it
>> > missing? What is the correct syntax?
>> > Thanks
>> >
>> > ```
>> > library(rcdk)
>> > smile <- 'c1ccccc1CC(=O)C(N)CC1CCCCOC1'
>> > mol <- parse.smiles(smile)[[1]]
>> > view.molecule.2d(mol)
>> >> Error in view.molecule.2d(mol) : java.lang.NoSuchMethodError: <init>
>> > ```
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>> >
>>
>
>

-- 
Sent from my phone. Please excuse my brevity.


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Tue Dec  6 07:26:08 2022
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Tue, 6 Dec 2022 07:26:08 +0100
Subject: [R] How to draw chemical structures with R?
In-Reply-To: <564DF546-0CCF-4796-A96F-F4F6630B1DD6@dcn.davis.ca.us>
References: <CAMk+s2Q2gUOjVdQwjUHxirVLDpRL7ceGkOS0+sVf3yrVUtP=4A@mail.gmail.com>
 <b77332fa-74ed-b0e0-1113-7739010478d3@molconn.com>
 <CAMk+s2Sr5Bd+woqgA+FEii5drqUR-UQWV9w8YU93oodFrxv8QQ@mail.gmail.com>
 <564DF546-0CCF-4796-A96F-F4F6630B1DD6@dcn.davis.ca.us>
Message-ID: <CAMk+s2QvZMXfJa--B_56OmeYre7zd3mBFgn00Q5ib3ppWE+kXg@mail.gmail.com>

Thanks, I will.

On Tue, Dec 6, 2022 at 7:21 AM Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>
> I have never seen this package mentioned on this list. You should contact the package maintainer.
>
> On December 5, 2022 9:59:34 PM PST, Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
> >Thanks for the tip! I think the problem is all Java-based, the SMILES
> >structure comes from the example in the template, it should work.
> >There is something missing in the execution...
> >
> >On Tue, Dec 6, 2022 at 3:12 AM LMH <lmh_users-groups at molconn.com> wrote:
> >>
> >> Just my opinion, but I think you would be better off to draw the structures using a drawing program
> >> like MarvinSketch (free, java based) and save the structure as a SMILES file, MOL file, or SDF. You
> >> should be able to import any of those into R. A program like MarvinSketch will check the structure
> >> for errors as you draw it and keep to standardized formats.
> >>
> >> By the way, I see no error in the SMILEA string for the structure in your expamle so your error is
> >> not in the drawing part of the process. Even so, I try to keep to well established tools for basic
> >> tasks and Marvin as is well established as it gets.
> >>
> >> I would look for an example of what you are trying and see if you can get the example to work.
> >>
> >> LMH
> >>
> >>
> >> Luigi Marongiu wrote:
> >> > Hello,'
> >> > I have seen from this link
> >> > https://cran.r-project.org/web/packages/rcdk/vignettes/using-rcdk.html
> >> > that there is a way to draw chemical structures using R via rcdk package.
> >> > I tried to draw a simple structure but I got an error. What is it
> >> > missing? What is the correct syntax?
> >> > Thanks
> >> >
> >> > ```
> >> > library(rcdk)
> >> > smile <- 'c1ccccc1CC(=O)C(N)CC1CCCCOC1'
> >> > mol <- parse.smiles(smile)[[1]]
> >> > view.molecule.2d(mol)
> >> >> Error in view.molecule.2d(mol) : java.lang.NoSuchMethodError: <init>
> >> > ```
> >> >
> >> > ______________________________________________
> >> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> > https://stat.ethz.ch/mailman/listinfo/r-help
> >> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >> > and provide commented, minimal, self-contained, reproducible code.
> >> >
> >>
> >
> >
>
> --
> Sent from my phone. Please excuse my brevity.



-- 
Best regards,
Luigi


From ||or|@n@@|h|er @end|ng |rom un|-u|m@de  Tue Dec  6 15:08:52 2022
From: ||or|@n@@|h|er @end|ng |rom un|-u|m@de (Florian Sihler)
Date: Tue, 6 Dec 2022 15:08:52 +0100
Subject: [R] Preexisting Work on Data- and Control-Flow Analysis
Message-ID: <2d07c25f-e0da-bc87-a030-f3c24efdf677@uni-ulm.de>

Hello R-Help Mailinglist,

I hope I've found the correct mailing list for my question (if not, 
please point me to the correct one).
For my master's thesis I plan on creating and implementing a 
program-slicing algorithm for R-Programs using (probably only static) 
data- and control-flow analysis.
While researching the problem I was unable to find any preexisting work 
on the matter.
Does anyone here know of any preexisting work on data- and control-flow 
analysis (or even program slicing) in the context of R-Programs?
I would be really glad for any pointer in the right direction (or 
reasons for why doing that would be a stupid idea).

Regarding my background: I am a computer science student and usually 
program in C++, Java, TypeScript, and Haskell.
Although I've worked with R for roughly a year now (mostly in my spare 
time), I am still getting used to some constructs.

Thank you,
Florian


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Dec  6 19:19:05 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 6 Dec 2022 18:19:05 +0000
Subject: [R] netstat in R in linux...
Message-ID: <PU4P216MB156855820697E85B1E72E7BAC81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

dear members,

I am using free_port() in netstat package in R. It is working in windows but not in linux. It is throwing an error in linux. ANy help please?

THanking you,
Yours sincerely
AKSHAY M KULKARNI

	[[alternative HTML version deleted]]


From henr|k@bengt@@on @end|ng |rom gm@||@com  Tue Dec  6 19:23:44 2022
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Tue, 6 Dec 2022 10:23:44 -0800
Subject: [R] netstat in R in linux...
In-Reply-To: <PU4P216MB156855820697E85B1E72E7BAC81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB156855820697E85B1E72E7BAC81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAFDcVCSZp6evNZ41OAYur1NbNyYhrt+SDWodFaj_bntbG5iK0w@mail.gmail.com>

What's the error?!?

/Henrik

On Tue, Dec 6, 2022 at 10:19 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> dear members,
>
> I am using free_port() in netstat package in R. It is working in windows but not in linux. It is throwing an error in linux. ANy help please?
>
> THanking you,
> Yours sincerely
> AKSHAY M KULKARNI
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Tue Dec  6 19:32:08 2022
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Tue, 6 Dec 2022 19:32:08 +0100
Subject: [R] confusion about dev.prev()
In-Reply-To: <CA+hbrhUOcDixt+B8+bVBRpv+MfyePDS2Jjv48BgaQ_LMmEUpJg@mail.gmail.com>
References: <CA+hbrhXTs45XYk0J8hXOpq4iSmwnxZ_eWoC6yCNE8etgHyB7Mw@mail.gmail.com>
 <20221205163834.0c8517ae@arachnoid>
 <CA+hbrhUOcDixt+B8+bVBRpv+MfyePDS2Jjv48BgaQ_LMmEUpJg@mail.gmail.com>
Message-ID: <25487.35496.190761.552898@stat.math.ethz.ch>

>>>>> Peter Langfelder 
>>>>>     on Mon, 5 Dec 2022 21:40:13 +0800 writes:

    > Ah, thanks, got it. Misread the help again...

... I think we all had ... and then known for a while  and then
forgot again ...

If you see how to improve the help page, so this happens less, ..
we'd look at it to add the improvement there.

Martin

    > Peter

    > On Mon, Dec 5, 2022 at 9:38 PM Ivan Krylov <krylov.r00t at gmail.com> wrote:
    >> 
    >> ? Mon, 5 Dec 2022 21:28:16 +0800
    >> Peter Langfelder <peter.langfelder at gmail.com> ?????:
    >> 
    >> > Open two devices, plot a plot, call dev.prev() and plot again. I
    >> > would expect the second plot to appear in the first device, but that
    >> > is not what happens; both plots appear in the second device.
    >> 
    >> Unfortunately, dev.prev() and dev.next() only return the number of the
    >> respective device. You need dev.set() to actually make the change.
    >> 
    >> --
    >> Best regards,
    >> Ivan

    > ______________________________________________
    > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    > https://stat.ethz.ch/mailman/listinfo/r-help
    > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    > and provide commented, minimal, self-contained, reproducible code.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Dec  6 19:41:15 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 6 Dec 2022 18:41:15 +0000
Subject: [R] netstat in R in linux...
In-Reply-To: <CAFDcVCSZp6evNZ41OAYur1NbNyYhrt+SDWodFaj_bntbG5iK0w@mail.gmail.com>
References: <PU4P216MB156855820697E85B1E72E7BAC81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAFDcVCSZp6evNZ41OAYur1NbNyYhrt+SDWodFaj_bntbG5iK0w@mail.gmail.com>
Message-ID: <PU4P216MB1568479E11D49AF24959EDA2C81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Henrik,
                        The error is:

> library(netstat)
> free_port()
sh: netstat: command not found
Error in system("netstat -n -a", intern = TRUE) :
  error in running command

Thanking you,
Yours sincerely
AKSHAY M KULKARNI
________________________________
From: Henrik Bengtsson <henrik.bengtsson at gmail.com>
Sent: Tuesday, December 6, 2022 11:53 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] netstat in R in linux...

What's the error?!?

/Henrik

On Tue, Dec 6, 2022 at 10:19 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> dear members,
>
> I am using free_port() in netstat package in R. It is working in windows but not in linux. It is throwing an error in linux. ANy help please?
>
> THanking you,
> Yours sincerely
> AKSHAY M KULKARNI
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From henr|k@bengt@@on @end|ng |rom gm@||@com  Tue Dec  6 19:49:15 2022
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Tue, 6 Dec 2022 10:49:15 -0800
Subject: [R] netstat in R in linux...
In-Reply-To: <PU4P216MB1568479E11D49AF24959EDA2C81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB156855820697E85B1E72E7BAC81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAFDcVCSZp6evNZ41OAYur1NbNyYhrt+SDWodFaj_bntbG5iK0w@mail.gmail.com>
 <PU4P216MB1568479E11D49AF24959EDA2C81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAFDcVCTGRORci+fgsB9ppbYmkRFZgKeuUHwU57tCC7SUnixnJw@mail.gmail.com>

Okay,

that means that the Linux machine where you run this on does not have
the 'netstat' software installed.  That is something that needs to be
installed outside of R.  For example, if it's Ubuntu, I think 'sudo
apt info net-tools' will do.

(Disclaimer: I'm the author)
A cross-platform alternative to netstat::free_port(), is
port4me::port4me(), which is also available from CRAN
(https://cran.r-project.org/package=port4me). It requires no external
tools, but R (>= 4.0.0).

/Henrik

On Tue, Dec 6, 2022 at 10:41 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> Dear Henrik,
>                         The error is:
>
> > library(netstat)
> > free_port()
> sh: netstat: command not found
> Error in system("netstat -n -a", intern = TRUE) :
>   error in running command
>
> Thanking you,
> Yours sincerely
> AKSHAY M KULKARNI
> ________________________________
> From: Henrik Bengtsson <henrik.bengtsson at gmail.com>
> Sent: Tuesday, December 6, 2022 11:53 PM
> To: akshay kulkarni <akshay_e4 at hotmail.com>
> Cc: R help Mailing list <r-help at r-project.org>
> Subject: Re: [R] netstat in R in linux...
>
> What's the error?!?
>
> /Henrik
>
> On Tue, Dec 6, 2022 at 10:19 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
> >
> > dear members,
> >
> > I am using free_port() in netstat package in R. It is working in windows but not in linux. It is throwing an error in linux. ANy help please?
> >
> > THanking you,
> > Yours sincerely
> > AKSHAY M KULKARNI
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Dec  6 20:00:15 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 6 Dec 2022 19:00:15 +0000
Subject: [R] netstat in R in linux...
In-Reply-To: <CAFDcVCTGRORci+fgsB9ppbYmkRFZgKeuUHwU57tCC7SUnixnJw@mail.gmail.com>
References: <PU4P216MB156855820697E85B1E72E7BAC81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAFDcVCSZp6evNZ41OAYur1NbNyYhrt+SDWodFaj_bntbG5iK0w@mail.gmail.com>
 <PU4P216MB1568479E11D49AF24959EDA2C81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAFDcVCTGRORci+fgsB9ppbYmkRFZgKeuUHwU57tCC7SUnixnJw@mail.gmail.com>
Message-ID: <PU4P216MB156872F7954E380FBAD126DDC81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Henrik
                      It is working....thanks a lot! I had actually previously tried this:  sudo yum install netstat rather than sudo yum install net-tools

By the by, what advantages does port4me have as compared to netstat?

THanking you,
Yours sincerely,
AKSHAY M KULKARNI

________________________________
From: Henrik Bengtsson <henrik.bengtsson at gmail.com>
Sent: Wednesday, December 7, 2022 12:19 AM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] netstat in R in linux...

Okay,

that means that the Linux machine where you run this on does not have
the 'netstat' software installed.  That is something that needs to be
installed outside of R.  For example, if it's Ubuntu, I think 'sudo
apt info net-tools' will do.

(Disclaimer: I'm the author)
A cross-platform alternative to netstat::free_port(), is
port4me::port4me(), which is also available from CRAN
(https://cran.r-project.org/package=port4me). It requires no external
tools, but R (>= 4.0.0).

/Henrik

On Tue, Dec 6, 2022 at 10:41 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> Dear Henrik,
>                         The error is:
>
> > library(netstat)
> > free_port()
> sh: netstat: command not found
> Error in system("netstat -n -a", intern = TRUE) :
>   error in running command
>
> Thanking you,
> Yours sincerely
> AKSHAY M KULKARNI
> ________________________________
> From: Henrik Bengtsson <henrik.bengtsson at gmail.com>
> Sent: Tuesday, December 6, 2022 11:53 PM
> To: akshay kulkarni <akshay_e4 at hotmail.com>
> Cc: R help Mailing list <r-help at r-project.org>
> Subject: Re: [R] netstat in R in linux...
>
> What's the error?!?
>
> /Henrik
>
> On Tue, Dec 6, 2022 at 10:19 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
> >
> > dear members,
> >
> > I am using free_port() in netstat package in R. It is working in windows but not in linux. It is throwing an error in linux. ANy help please?
> >
> > THanking you,
> > Yours sincerely
> > AKSHAY M KULKARNI
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From henr|k@bengt@@on @end|ng |rom gm@||@com  Tue Dec  6 20:14:18 2022
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Tue, 6 Dec 2022 11:14:18 -0800
Subject: [R] netstat in R in linux...
In-Reply-To: <PU4P216MB156872F7954E380FBAD126DDC81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB156855820697E85B1E72E7BAC81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAFDcVCSZp6evNZ41OAYur1NbNyYhrt+SDWodFaj_bntbG5iK0w@mail.gmail.com>
 <PU4P216MB1568479E11D49AF24959EDA2C81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAFDcVCTGRORci+fgsB9ppbYmkRFZgKeuUHwU57tCC7SUnixnJw@mail.gmail.com>
 <PU4P216MB156872F7954E380FBAD126DDC81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAFDcVCT0qryUgvjLgtjNB6kS_jj8WTLnXkeF6Sut0mKqEMz78w@mail.gmail.com>

> By the by, what advantages does port4me have as compared to netstat?

As I said in my previous email, it doesn't require external tools, so
it's more likely to work out of the box for more people. But that
wasn't the main reason for this package. For the full motivation
behind port4me, see the vignette
<https://cran.r-project.org/web/packages/port4me/vignettes/port4me-overview.html>.

/Henrik

On Tue, Dec 6, 2022 at 11:00 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> Dear Henrik
>                       It is working....thanks a lot! I had actually previously tried this:  sudo yum install netstat rather than sudo yum install net-tools
>
> By the by, what advantages does port4me have as compared to netstat?
>
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
> ________________________________
> From: Henrik Bengtsson <henrik.bengtsson at gmail.com>
> Sent: Wednesday, December 7, 2022 12:19 AM
> To: akshay kulkarni <akshay_e4 at hotmail.com>
> Cc: R help Mailing list <r-help at r-project.org>
> Subject: Re: [R] netstat in R in linux...
>
> Okay,
>
> that means that the Linux machine where you run this on does not have
> the 'netstat' software installed.  That is something that needs to be
> installed outside of R.  For example, if it's Ubuntu, I think 'sudo
> apt info net-tools' will do.
>
> (Disclaimer: I'm the author)
> A cross-platform alternative to netstat::free_port(), is
> port4me::port4me(), which is also available from CRAN
> (https://cran.r-project.org/package=port4me). It requires no external
> tools, but R (>= 4.0.0).
>
> /Henrik
>
> On Tue, Dec 6, 2022 at 10:41 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
> >
> > Dear Henrik,
> >                         The error is:
> >
> > > library(netstat)
> > > free_port()
> > sh: netstat: command not found
> > Error in system("netstat -n -a", intern = TRUE) :
> >   error in running command
> >
> > Thanking you,
> > Yours sincerely
> > AKSHAY M KULKARNI
> > ________________________________
> > From: Henrik Bengtsson <henrik.bengtsson at gmail.com>
> > Sent: Tuesday, December 6, 2022 11:53 PM
> > To: akshay kulkarni <akshay_e4 at hotmail.com>
> > Cc: R help Mailing list <r-help at r-project.org>
> > Subject: Re: [R] netstat in R in linux...
> >
> > What's the error?!?
> >
> > /Henrik
> >
> > On Tue, Dec 6, 2022 at 10:19 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
> > >
> > > dear members,
> > >
> > > I am using free_port() in netstat package in R. It is working in windows but not in linux. It is throwing an error in linux. ANy help please?
> > >
> > > THanking you,
> > > Yours sincerely
> > > AKSHAY M KULKARNI
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Dec  6 20:16:43 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 6 Dec 2022 19:16:43 +0000
Subject: [R] netstat in R in linux...
In-Reply-To: <CAFDcVCT0qryUgvjLgtjNB6kS_jj8WTLnXkeF6Sut0mKqEMz78w@mail.gmail.com>
References: <PU4P216MB156855820697E85B1E72E7BAC81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAFDcVCSZp6evNZ41OAYur1NbNyYhrt+SDWodFaj_bntbG5iK0w@mail.gmail.com>
 <PU4P216MB1568479E11D49AF24959EDA2C81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAFDcVCTGRORci+fgsB9ppbYmkRFZgKeuUHwU57tCC7SUnixnJw@mail.gmail.com>
 <PU4P216MB156872F7954E380FBAD126DDC81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAFDcVCT0qryUgvjLgtjNB6kS_jj8WTLnXkeF6Sut0mKqEMz78w@mail.gmail.com>
Message-ID: <PU4P216MB156846C44C2005475586CDFFC81B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Henrik,
                       OK thanks a lot..

thanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Henrik Bengtsson <henrik.bengtsson at gmail.com>
Sent: Wednesday, December 7, 2022 12:44 AM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] netstat in R in linux...

> By the by, what advantages does port4me have as compared to netstat?

As I said in my previous email, it doesn't require external tools, so
it's more likely to work out of the box for more people. But that
wasn't the main reason for this package. For the full motivation
behind port4me, see the vignette
<https://cran.r-project.org/web/packages/port4me/vignettes/port4me-overview.html>.

/Henrik

On Tue, Dec 6, 2022 at 11:00 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> Dear Henrik
>                       It is working....thanks a lot! I had actually previously tried this:  sudo yum install netstat rather than sudo yum install net-tools
>
> By the by, what advantages does port4me have as compared to netstat?
>
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
> ________________________________
> From: Henrik Bengtsson <henrik.bengtsson at gmail.com>
> Sent: Wednesday, December 7, 2022 12:19 AM
> To: akshay kulkarni <akshay_e4 at hotmail.com>
> Cc: R help Mailing list <r-help at r-project.org>
> Subject: Re: [R] netstat in R in linux...
>
> Okay,
>
> that means that the Linux machine where you run this on does not have
> the 'netstat' software installed.  That is something that needs to be
> installed outside of R.  For example, if it's Ubuntu, I think 'sudo
> apt info net-tools' will do.
>
> (Disclaimer: I'm the author)
> A cross-platform alternative to netstat::free_port(), is
> port4me::port4me(), which is also available from CRAN
> (https://cran.r-project.org/package=port4me). It requires no external
> tools, but R (>= 4.0.0).
>
> /Henrik
>
> On Tue, Dec 6, 2022 at 10:41 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
> >
> > Dear Henrik,
> >                         The error is:
> >
> > > library(netstat)
> > > free_port()
> > sh: netstat: command not found
> > Error in system("netstat -n -a", intern = TRUE) :
> >   error in running command
> >
> > Thanking you,
> > Yours sincerely
> > AKSHAY M KULKARNI
> > ________________________________
> > From: Henrik Bengtsson <henrik.bengtsson at gmail.com>
> > Sent: Tuesday, December 6, 2022 11:53 PM
> > To: akshay kulkarni <akshay_e4 at hotmail.com>
> > Cc: R help Mailing list <r-help at r-project.org>
> > Subject: Re: [R] netstat in R in linux...
> >
> > What's the error?!?
> >
> > /Henrik
> >
> > On Tue, Dec 6, 2022 at 10:19 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
> > >
> > > dear members,
> > >
> > > I am using free_port() in netstat package in R. It is working in windows but not in linux. It is throwing an error in linux. ANy help please?
> > >
> > > THanking you,
> > > Yours sincerely
> > > AKSHAY M KULKARNI
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From petr@p|k@| @end|ng |rom prechez@@cz  Wed Dec  7 08:04:38 2022
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Wed, 7 Dec 2022 07:04:38 +0000
Subject: [R] if documentation
Message-ID: <7ce97d2bfae74ebd987d2d107ccacce2@SRVEXCHCM1302.precheza.cz>

Hallo all

 

Not sure if it is appropriate place but as I am not involved in r-devel list
I post here.

 

Documentation for Control (if, for, while, .) is missing "if else" command.
Although it can be find online elsewhere I believe that adding it either as
an example or as a third entry and paragraph about nested if's could be
beneficial.

 

if(cond) cons.expr  else if (cond) alt.expr else alt2.expr

 

Nested if expressions are better realized with "else if" instead of sequence
of plain "else" control statements especially when using several of them.

Best regards

Petr


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Wed Dec  7 12:16:03 2022
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Wed, 7 Dec 2022 12:16:03 +0100
Subject: [R] if documentation
In-Reply-To: <7ce97d2bfae74ebd987d2d107ccacce2@SRVEXCHCM1302.precheza.cz>
References: <7ce97d2bfae74ebd987d2d107ccacce2@SRVEXCHCM1302.precheza.cz>
Message-ID: <25488.30195.641103.103649@stat.math.ethz.ch>

>>>>> PIKAL Petr 
>>>>>     on Wed, 7 Dec 2022 07:04:38 +0000 writes:

    > Hallo all Not sure if it is appropriate place but as I am
    > not involved in r-devel list I post here.

 

    > Documentation for Control (if, for, while, .) is missing
    > "if else" command.  Although it can be find online
    > elsewhere I believe that adding it either as an example or
    > as a third entry and paragraph about nested if's could be
    > beneficial.

 

    > if(cond) cons.expr else if (cond) alt.expr else alt2.expr

    > Nested if expressions are better realized with "else if"
    > instead of sequence of plain "else" control statements
    > especially when using several of them.

I agree.  However there is no "else if" special.

As everything that *happens* in R is a function call (John Chambers),
indeed, `if` is a function too, with an unusual syntax which may
involve `else`.

If you look more closely, `if` is a function with 3 arguments,
where the last (3rd) is optional and has a default of NULL :

Some code towards proving the above :


(t1 <- if(TRUE)  1:3 )         # is identical to  if(TRUE) 1:3 else NULL
f1  <- if(FALSE) 1:3           # is identical to
f2  <- if(FALSE) 1:3 else NULL
identical(f1,f2)
f3  <- if(FALSE) 1:3 else 111

`if`(TRUE, 1:3)
`if`(TRUE, 1:3, NULL)

`if`(FALSE, 1:3)   # returns invisibly
`if`(FALSE, 1:3, NULL)
`if`(FALSE, 1:3, 111)

--------------

So, 'if(.) else'  or 'if(...) else if(..) ..'
etc are
all just versions of calling the `if` function sometimes, in a
nested way.


From petr@p|k@| @end|ng |rom prechez@@cz  Wed Dec  7 13:40:41 2022
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Wed, 7 Dec 2022 12:40:41 +0000
Subject: [R] if documentation
In-Reply-To: <25488.30195.641103.103649@stat.math.ethz.ch>
References: <7ce97d2bfae74ebd987d2d107ccacce2@SRVEXCHCM1302.precheza.cz>
 <25488.30195.641103.103649@stat.math.ethz.ch>
Message-ID: <a15adfc243a04143b2432b0b74eaec56@SRVEXCHCM1302.precheza.cz>

Hallo Martin

I understand. Anyway, it would not do any harm to add something like

x <- 11
if(x < 0) {print("weird")} else if(x >= 0 & x <= 9) {
print("too low")} else if (x > 9 & x <= 10) {
print("just enough")} else {
print("more than expected")}

to the help page for if.

Regards
Petr

> -----Original Message-----
> From: Martin Maechler <maechler at stat.math.ethz.ch>
> Sent: Wednesday, December 7, 2022 12:16 PM
> To: PIKAL Petr <petr.pikal at precheza.cz>
> Cc: R-help Mailing List <r-help at r-project.org>
> Subject: Re: [R] if documentation
> 
> >>>>> PIKAL Petr
> >>>>>     on Wed, 7 Dec 2022 07:04:38 +0000 writes:
> 
>     > Hallo all Not sure if it is appropriate place but as I am
>     > not involved in r-devel list I post here.
> 
> 
> 
>     > Documentation for Control (if, for, while, .) is missing
>     > "if else" command.  Although it can be find online
>     > elsewhere I believe that adding it either as an example or
>     > as a third entry and paragraph about nested if's could be
>     > beneficial.
> 
> 
> 
>     > if(cond) cons.expr else if (cond) alt.expr else alt2.expr
> 
>     > Nested if expressions are better realized with "else if"
>     > instead of sequence of plain "else" control statements
>     > especially when using several of them.
> 
> I agree.  However there is no "else if" special.
> 
> As everything that *happens* in R is a function call (John Chambers),
indeed, `if`
> is a function too, with an unusual syntax which may involve `else`.
> 
> If you look more closely, `if` is a function with 3 arguments, where the
last (3rd)
> is optional and has a default of NULL :
> 
> Some code towards proving the above :
> 
> 
> (t1 <- if(TRUE)  1:3 )         # is identical to  if(TRUE) 1:3 else NULL
> f1  <- if(FALSE) 1:3           # is identical to
> f2  <- if(FALSE) 1:3 else NULL
> identical(f1,f2)
> f3  <- if(FALSE) 1:3 else 111
> 
> `if`(TRUE, 1:3)
> `if`(TRUE, 1:3, NULL)
> 
> `if`(FALSE, 1:3)   # returns invisibly
> `if`(FALSE, 1:3, NULL)
> `if`(FALSE, 1:3, 111)
> 
> --------------
> 
> So, 'if(.) else'  or 'if(...) else if(..) ..'
> etc are
> all just versions of calling the `if` function sometimes, in a nested way.

From @k@h@y_e4 @end|ng |rom hotm@||@com  Wed Dec  7 17:47:20 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Wed, 7 Dec 2022 16:47:20 +0000
Subject: [R] setting timezone variable permanently...
Message-ID: <PU4P216MB1568A3D864416963C9A032FAC81A9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear members,
                             I am setting the Time zone environment variable by this code:

> Sys.setenv(TZ = "Asia/Kolkata")

But I have to run it every time I open a new R session. How do I set it permanently?

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI

	[[alternative HTML version deleted]]


From m@rc_grt @end|ng |rom y@hoo@|r  Wed Dec  7 18:09:35 2022
From: m@rc_grt @end|ng |rom y@hoo@|r (Marc Girondot)
Date: Wed, 7 Dec 2022 18:09:35 +0100
Subject: [R] setting timezone variable permanently...
In-Reply-To: <PU4P216MB1568A3D864416963C9A032FAC81A9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB1568A3D864416963C9A032FAC81A9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <13c9a79d-b440-1487-bfce-abb0658ec1ff@yahoo.fr>

You can create a file .Rprofile in your home directory with this command.

Each time you will open R, it will run this command.

https://support.posit.co/hc/en-us/articles/360047157094-Managing-R-with-Rprofile-Renviron-Rprofile-site-Renviron-site-rsession-conf-and-repos-conf

Marc

Le 07/12/2022 ? 17:47, akshay kulkarni a ?crit?:
> Dear members,
>                               I am setting the Time zone environment variable by this code:
>
>> Sys.setenv(TZ = "Asia/Kolkata")
> But I have to run it every time I open a new R session. How do I set it permanently?
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Wed Dec  7 18:15:58 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Wed, 7 Dec 2022 17:15:58 +0000
Subject: [R] setting timezone variable permanently...
In-Reply-To: <13c9a79d-b440-1487-bfce-abb0658ec1ff@yahoo.fr>
References: <PU4P216MB1568A3D864416963C9A032FAC81A9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <13c9a79d-b440-1487-bfce-abb0658ec1ff@yahoo.fr>
Message-ID: <PU4P216MB1568067378A78CE0844BCFCBC81A9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Marc,
                     Thanks for the reply. However, the use of usethis package is very handy here: https://stackoverflow.com/questions/49738564/r-set-environment-variable-permanently. How do you compare your solution with that of using usethis package? Which is more effective?

THanking you,
Yours sincerely,
AKSHAY M KULKARNI

________________________________
From: Marc Girondot <marc_grt at yahoo.fr>
Sent: Wednesday, December 7, 2022 10:39 PM
To: r-help at r-project.org <r-help at r-project.org>; akshay_e4 at hotmail.com <akshay_e4 at hotmail.com>
Subject: Re: [R] setting timezone variable permanently...

You can create a file .Rprofile in your home directory with this command.

Each time you will open R, it will run this command.

https://support.posit.co/hc/en-us/articles/360047157094-Managing-R-with-Rprofile-Renviron-Rprofile-site-Renviron-site-rsession-conf-and-repos-conf

Marc

Le 07/12/2022 ? 17:47, akshay kulkarni a ?crit :
> Dear members,
>                               I am setting the Time zone environment variable by this code:
>
>> Sys.setenv(TZ = "Asia/Kolkata")
> But I have to run it every time I open a new R session. How do I set it permanently?
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Dec  7 18:14:24 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 07 Dec 2022 09:14:24 -0800
Subject: [R] setting timezone variable permanently...
In-Reply-To: <PU4P216MB1568A3D864416963C9A032FAC81A9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB1568A3D864416963C9A032FAC81A9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <11BEFF84-195A-47BA-B6A6-62D92D0DC651@dcn.davis.ca.us>

Technically this is a question regarding your operating system, since environment variables are propagated by the OS creation of processes and different OSes include different mechanisms for configuring them.

However, for practical purposes in R you can just put that statement into your .Rprofile file.

I would not recommend it though... rather you should include this statement in every script that depends on this assumption. Otherwise your script will have a hidden configuration dependency. In fact the timezone you set should be linked with the data files you are using... if you work with time data from different places then you should set it appropriately for that data at the point in your script where you do the import.

On December 7, 2022 8:47:20 AM PST, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>Dear members,
>                             I am setting the Time zone environment variable by this code:
>
>> Sys.setenv(TZ = "Asia/Kolkata")
>
>But I have to run it every time I open a new R session. How do I set it permanently?
>
>Thanking you,
>Yours sincerely,
>AKSHAY M KULKARNI
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Wed Dec  7 18:19:40 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Wed, 7 Dec 2022 17:19:40 +0000
Subject: [R] setting timezone variable permanently...
In-Reply-To: <11BEFF84-195A-47BA-B6A6-62D92D0DC651@dcn.davis.ca.us>
References: <PU4P216MB1568A3D864416963C9A032FAC81A9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <11BEFF84-195A-47BA-B6A6-62D92D0DC651@dcn.davis.ca.us>
Message-ID: <PU4P216MB1568CDF0D7EA30B4DAE96D7BC81A9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

dear Jeff,
                 THanks for your reply. Would you not recommend this  solution too : https://stackoverflow.com/questions/49738564/r-set-environment-variable-permanently ?

THanking you,
Yours sincerely,
AKSHAY M KULKARNI

________________________________
From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
Sent: Wednesday, December 7, 2022 10:44 PM
To: r-help at r-project.org <r-help at r-project.org>; akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
Subject: Re: [R] setting timezone variable permanently...

Technically this is a question regarding your operating system, since environment variables are propagated by the OS creation of processes and different OSes include different mechanisms for configuring them.

However, for practical purposes in R you can just put that statement into your .Rprofile file.

I would not recommend it though... rather you should include this statement in every script that depends on this assumption. Otherwise your script will have a hidden configuration dependency. In fact the timezone you set should be linked with the data files you are using... if you work with time data from different places then you should set it appropriately for that data at the point in your script where you do the import.

On December 7, 2022 8:47:20 AM PST, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>Dear members,
>                             I am setting the Time zone environment variable by this code:
>
>> Sys.setenv(TZ = "Asia/Kolkata")
>
>But I have to run it every time I open a new R session. How do I set it permanently?
>
>Thanking you,
>Yours sincerely,
>AKSHAY M KULKARNI
>
>       [[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

--
Sent from my phone. Please excuse my brevity.

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Dec  7 18:33:31 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 07 Dec 2022 09:33:31 -0800
Subject: [R] setting timezone variable permanently...
In-Reply-To: <PU4P216MB1568CDF0D7EA30B4DAE96D7BC81A9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB1568A3D864416963C9A032FAC81A9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <11BEFF84-195A-47BA-B6A6-62D92D0DC651@dcn.davis.ca.us>
 <PU4P216MB1568CDF0D7EA30B4DAE96D7BC81A9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CF6B3EE4-7608-4757-B36C-C9DF578A0EF9@dcn.davis.ca.us>

As I said, the tz is linked to your data, not where you OR your compute server are, so setting TZ in your R code or specifying it as the tz argument when you convert it are the best options.

If you choose to use your OS to set it that is up to you... but your code should not depend on that setting either way.

On December 7, 2022 9:19:40 AM PST, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>dear Jeff,
>                 THanks for your reply. Would you not recommend this  solution too : https://stackoverflow.com/questions/49738564/r-set-environment-variable-permanently ?
>
>THanking you,
>Yours sincerely,
>AKSHAY M KULKARNI
>
>________________________________
>From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>Sent: Wednesday, December 7, 2022 10:44 PM
>To: r-help at r-project.org <r-help at r-project.org>; akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
>Subject: Re: [R] setting timezone variable permanently...
>
>Technically this is a question regarding your operating system, since environment variables are propagated by the OS creation of processes and different OSes include different mechanisms for configuring them.
>
>However, for practical purposes in R you can just put that statement into your .Rprofile file.
>
>I would not recommend it though... rather you should include this statement in every script that depends on this assumption. Otherwise your script will have a hidden configuration dependency. In fact the timezone you set should be linked with the data files you are using... if you work with time data from different places then you should set it appropriately for that data at the point in your script where you do the import.
>
>On December 7, 2022 8:47:20 AM PST, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>>Dear members,
>>                             I am setting the Time zone environment variable by this code:
>>
>>> Sys.setenv(TZ = "Asia/Kolkata")
>>
>>But I have to run it every time I open a new R session. How do I set it permanently?
>>
>>Thanking you,
>>Yours sincerely,
>>AKSHAY M KULKARNI
>>
>>       [[alternative HTML version deleted]]
>>
>>______________________________________________
>>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>https://stat.ethz.ch/mailman/listinfo/r-help
>>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>and provide commented, minimal, self-contained, reproducible code.
>
>--
>Sent from my phone. Please excuse my brevity.

-- 
Sent from my phone. Please excuse my brevity.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Wed Dec  7 18:40:41 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Wed, 7 Dec 2022 17:40:41 +0000
Subject: [R] setting timezone variable permanently...
In-Reply-To: <CF6B3EE4-7608-4757-B36C-C9DF578A0EF9@dcn.davis.ca.us>
References: <PU4P216MB1568A3D864416963C9A032FAC81A9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <11BEFF84-195A-47BA-B6A6-62D92D0DC651@dcn.davis.ca.us>
 <PU4P216MB1568CDF0D7EA30B4DAE96D7BC81A9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CF6B3EE4-7608-4757-B36C-C9DF578A0EF9@dcn.davis.ca.us>
Message-ID: <PU4P216MB15682D532BBC414C88B6439EC81A9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Jeff,
                    thanks a lot....

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
Sent: Wednesday, December 7, 2022 11:03 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>; r-help at r-project.org <r-help at r-project.org>
Subject: Re: [R] setting timezone variable permanently...

As I said, the tz is linked to your data, not where you OR your compute server are, so setting TZ in your R code or specifying it as the tz argument when you convert it are the best options.

If you choose to use your OS to set it that is up to you... but your code should not depend on that setting either way.

On December 7, 2022 9:19:40 AM PST, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>dear Jeff,
>                 THanks for your reply. Would you not recommend this  solution too : https://stackoverflow.com/questions/49738564/r-set-environment-variable-permanently ?
>
>THanking you,
>Yours sincerely,
>AKSHAY M KULKARNI
>
>________________________________
>From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>Sent: Wednesday, December 7, 2022 10:44 PM
>To: r-help at r-project.org <r-help at r-project.org>; akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
>Subject: Re: [R] setting timezone variable permanently...
>
>Technically this is a question regarding your operating system, since environment variables are propagated by the OS creation of processes and different OSes include different mechanisms for configuring them.
>
>However, for practical purposes in R you can just put that statement into your .Rprofile file.
>
>I would not recommend it though... rather you should include this statement in every script that depends on this assumption. Otherwise your script will have a hidden configuration dependency. In fact the timezone you set should be linked with the data files you are using... if you work with time data from different places then you should set it appropriately for that data at the point in your script where you do the import.
>
>On December 7, 2022 8:47:20 AM PST, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>>Dear members,
>>                             I am setting the Time zone environment variable by this code:
>>
>>> Sys.setenv(TZ = "Asia/Kolkata")
>>
>>But I have to run it every time I open a new R session. How do I set it permanently?
>>
>>Thanking you,
>>Yours sincerely,
>>AKSHAY M KULKARNI
>>
>>       [[alternative HTML version deleted]]
>>
>>______________________________________________
>>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>https://stat.ethz.ch/mailman/listinfo/r-help
>>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>and provide commented, minimal, self-contained, reproducible code.
>
>--
>Sent from my phone. Please excuse my brevity.

--
Sent from my phone. Please excuse my brevity.

	[[alternative HTML version deleted]]


From r@oknz @end|ng |rom gm@||@com  Thu Dec  8 06:15:36 2022
From: r@oknz @end|ng |rom gm@||@com (Richard O'Keefe)
Date: Thu, 8 Dec 2022 18:15:36 +1300
Subject: [R] Preexisting Work on Data- and Control-Flow Analysis
In-Reply-To: <2d07c25f-e0da-bc87-a030-f3c24efdf677@uni-ulm.de>
References: <2d07c25f-e0da-bc87-a030-f3c24efdf677@uni-ulm.de>
Message-ID: <CABcYAdLMNkiODjdeBgyN1+v6tXuzjsyBRdUJwdZbdhySaFfcjg@mail.gmail.com>

You should probably look at the compiler.
One issue with data and control flow analysis in R is that
   f <- function (x, y) x + y
   f(ping, pong)
may invoke an S3 (see ?S3groupGeneric, Ops) or S4 (see ?Arith)
method, which might not have existed when f was analysed.
Indeed,
   f <- function (x, y) { foo(x); bar(y); x + y }
may change the method(s) bound to + in foo and/or bar, so the
bindings may change while f is running.

Then there's the whole "imperative programming with lazy
function argument evaluation" thing, which is definitely going
to make analysis a wee bit challenging.

And then there's this little gem:
> x <- 17
> f <- function () {
+   cat(x, "\n")
+   x <- 42
+   cat(x, "\n")
+ }
> f()
The first occurrence of x in f and the last occurrence of
x in f refer to *different* variables.  The last occurrence
of x refers to a local variable, but that local variable
did not exist until it was assigned to.  (Yep, the set of
local variables of a function is *dynamic*.)

While there are oh so many ways that R can make life horrible
for analysis, even R programmers don't go out of their way to
make life difficult for themselves.  It will probably be good
enough to define a "sane" subset of R, and a tool that reports
that an R function is outside that subset will be useful in its
own right because most of the time it won't be intentional.

I set out to write an R compiler 20+ years ago.  I filled
several exercise books with issues.  I suggest you start by
considering the question "what variables are in the environment
at this control point."  Start with ?get, ?assign, ?exists, ?rm.

On Wed, 7 Dec 2022 at 05:20, Florian Sihler <florian.sihler at uni-ulm.de>
wrote:

> Hello R-Help Mailinglist,
>
> I hope I've found the correct mailing list for my question (if not,
> please point me to the correct one).
> For my master's thesis I plan on creating and implementing a
> program-slicing algorithm for R-Programs using (probably only static)
> data- and control-flow analysis.
> While researching the problem I was unable to find any preexisting work
> on the matter.
> Does anyone here know of any preexisting work on data- and control-flow
> analysis (or even program slicing) in the context of R-Programs?
> I would be really glad for any pointer in the right direction (or
> reasons for why doing that would be a stupid idea).
>
> Regarding my background: I am a computer science student and usually
> program in C++, Java, TypeScript, and Haskell.
> Although I've worked with R for roughly a year now (mostly in my spare
> time), I am still getting used to some constructs.
>
> Thank you,
> Florian
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bog@@o@chr|@to|er @end|ng |rom gm@||@com  Thu Dec  8 16:26:12 2022
From: bog@@o@chr|@to|er @end|ng |rom gm@||@com (Christofer Bogaso)
Date: Thu, 8 Dec 2022 20:56:12 +0530
Subject: [R] How to access source code
Message-ID: <CA+dpOJnRSPy8asE+U4S3m7NzpWw9vBUVkrCNnz263AS9FLwMnQ@mail.gmail.com>

Hi,

I am trying to access the source code from package GCPM, where I am
interested to look into the source code of one function called LGD. So
I did below

> LGD

standardGeneric for "LGD" defined from package "GCPM"


function (this)

standardGeneric("LGD")

<bytecode: 0x7f9016a683a8>

<environment: 0x7f9016a91390>

Methods may be defined for arguments: this

Use  showMethods(LGD)  for currently available ones.

> showMethods(LGD)

Function: LGD (package GCPM)

this="GCPM"

However I still could not find the source code using above approach.

It would be very helpful if you can help to find the complete source
code of this function.


From kry|ov@r00t @end|ng |rom gm@||@com  Thu Dec  8 17:22:21 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Thu, 8 Dec 2022 19:22:21 +0300
Subject: [R] How to access source code
In-Reply-To: <CA+dpOJnRSPy8asE+U4S3m7NzpWw9vBUVkrCNnz263AS9FLwMnQ@mail.gmail.com>
References: <CA+dpOJnRSPy8asE+U4S3m7NzpWw9vBUVkrCNnz263AS9FLwMnQ@mail.gmail.com>
Message-ID: <20221208192221.63ff12c2@arachnoid>

? Thu, 8 Dec 2022 20:56:12 +0530
Christofer Bogaso <bogaso.christofer at gmail.com> ?????:

> > showMethods(LGD)  
> 
> Function: LGD (package GCPM)
> 
> this="GCPM"

Almost there! Try getMethod(LGD, signature = 'GCPM').

Not sure if this is going to work as written, but if you need to see an
S4 method definition, getMethod is the way.

-- 
Best regards,
Ivan


From mtmorg@n@b|oc @end|ng |rom gm@||@com  Thu Dec  8 17:26:29 2022
From: mtmorg@n@b|oc @end|ng |rom gm@||@com (Martin Morgan)
Date: Thu, 8 Dec 2022 16:26:29 +0000
Subject: [R] How to access source code
In-Reply-To: <20221208192221.63ff12c2@arachnoid>
References: <CA+dpOJnRSPy8asE+U4S3m7NzpWw9vBUVkrCNnz263AS9FLwMnQ@mail.gmail.com>
 <20221208192221.63ff12c2@arachnoid>
Message-ID: <BY5PR04MB66278B96C55512BDC106E0A3F91D9@BY5PR04MB6627.namprd04.prod.outlook.com>

showMethods(LGD, includeDef = TRUE) shows the implementation of all methods on the LGD generic, and can be a useful fast track to getting an overview of what is going on.

Martin Morgan

From: R-help <r-help-bounces at r-project.org> on behalf of Ivan Krylov <krylov.r00t at gmail.com>
Date: Thursday, December 8, 2022 at 11:23 AM
To: Christofer Bogaso <bogaso.christofer at gmail.com>
Cc: r-help <r-help at r-project.org>
Subject: Re: [R] How to access source code
? Thu, 8 Dec 2022 20:56:12 +0530
Christofer Bogaso <bogaso.christofer at gmail.com> ?????:

> > showMethods(LGD)
>
> Function: LGD (package GCPM)
>
> this="GCPM"

Almost there! Try getMethod(LGD, signature = 'GCPM').

Not sure if this is going to work as written, but if you need to see an
S4 method definition, getMethod is the way.

--
Best regards,
Ivan

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Fri Dec  9 02:05:47 2022
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Fri, 9 Dec 2022 01:05:47 +0000
Subject: [R] Plot a line using ggplot2
Message-ID: <MW4PR03MB63636F4BFB3EA690622689A2E21C9@MW4PR03MB6363.namprd03.prod.outlook.com>

Colleagues,

I am trying to plot a simple line using ggplot2. I get the axes, but I don't get the line. Please let me know what my error I am making.
Thank you,
John

# Define x and y values
PointEstx <- Estx+1.96*SE
PointEsty  <- 1

row2 <- cbind(PointEstx,PointEsty)
linedata<- data_frame(rbind(row1,row2))
linedata
# make sure we have a data frame
class(linedata)

#plot the data
ggplot(linedata,aes(x=PointEstx, y=PointEsty), geom_line())






From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Fri Dec  9 02:17:09 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Fri, 9 Dec 2022 02:17:09 +0100
Subject: [R] How to access source code
In-Reply-To: <BY5PR04MB66278B96C55512BDC106E0A3F91D9@BY5PR04MB6627.namprd04.prod.outlook.com>
References: <CA+dpOJnRSPy8asE+U4S3m7NzpWw9vBUVkrCNnz263AS9FLwMnQ@mail.gmail.com>
 <20221208192221.63ff12c2@arachnoid>
 <BY5PR04MB66278B96C55512BDC106E0A3F91D9@BY5PR04MB6627.namprd04.prod.outlook.com>
Message-ID: <1f5b622f-51be-1325-0014-cc4b54e021ea@statistik.tu-dortmund.de>

Or simply get and unpack the package sources.
Here you will also find the comments that are typically stripped out 
otherwise.

Best,
Uwe Ligges

On 08.12.2022 17:26, Martin Morgan wrote:
> showMethods(LGD, includeDef = TRUE) shows the implementation of all methods on the LGD generic, and can be a useful fast track to getting an overview of what is going on.
> 
> Martin Morgan
> 
> From: R-help <r-help-bounces at r-project.org> on behalf of Ivan Krylov <krylov.r00t at gmail.com>
> Date: Thursday, December 8, 2022 at 11:23 AM
> To: Christofer Bogaso <bogaso.christofer at gmail.com>
> Cc: r-help <r-help at r-project.org>
> Subject: Re: [R] How to access source code
> ? Thu, 8 Dec 2022 20:56:12 +0530
> Christofer Bogaso <bogaso.christofer at gmail.com> ?????:
> 
>>> showMethods(LGD)
>>
>> Function: LGD (package GCPM)
>>
>> this="GCPM"
> 
> Almost there! Try getMethod(LGD, signature = 'GCPM').
> 
> Not sure if this is going to work as written, but if you need to see an
> S4 method definition, getMethod is the way.
> 
> --
> Best regards,
> Ivan
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 
> 	[[alternative HTML version deleted]]
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Dec  9 02:18:12 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 08 Dec 2022 17:18:12 -0800
Subject: [R] Plot a line using ggplot2
In-Reply-To: <MW4PR03MB63636F4BFB3EA690622689A2E21C9@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <MW4PR03MB63636F4BFB3EA690622689A2E21C9@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <111FCC4A-D817-41BE-90A1-65DB194070E8@dcn.davis.ca.us>

Please run your code before you send it. Your example is not reproducible.

library(ggplot2)

linedata<- data.frame(
  PointEstx = c( 1, 2 )
, PointEsty = c( 1, 1.5 )
)
# make sure we have a data frame
str(linedata)

#plot the data
ggplot(
  linedata
, aes( x = PointEstx
     , y = PointEsty
     )
) + geom_line()

On December 8, 2022 5:05:47 PM PST, "Sorkin, John" <jsorkin at som.umaryland.edu> wrote:
>Colleagues,
>
>I am trying to plot a simple line using ggplot2. I get the axes, but I don't get the line. Please let me know what my error I am making.
>Thank you,
>John
>
># Define x and y values
>PointEstx <- Estx+1.96*SE
>PointEsty  <- 1
>
>row2 <- cbind(PointEstx,PointEsty)
>linedata<- data_frame(rbind(row1,row2))
>linedata
># make sure we have a data frame
>class(linedata)
>
>#plot the data
>ggplot(linedata,aes(x=PointEstx, y=PointEsty), geom_line())
>
>
>
>
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From tebert @end|ng |rom u||@edu  Fri Dec  9 05:40:14 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Fri, 9 Dec 2022 04:40:14 +0000
Subject: [R] Plot a line using ggplot2
In-Reply-To: <MW4PR03MB63636F4BFB3EA690622689A2E21C9@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <MW4PR03MB63636F4BFB3EA690622689A2E21C9@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <BN6PR2201MB15539129B13DEEE7E1565409CF1C9@BN6PR2201MB1553.namprd22.prod.outlook.com>

A number of problems.
The variable names are not helpful. PointEstx is not a point it is a value. I need an x and a y coordinate for a point.
row1 is not defined
While there is a function data.frame(), there is no data_frame(). Making this change gives an error that row1 is not defined. I solved the problem with row1<-row2+1.

The ggplot statement looks wrong.

Does this give you what you need?
ggplot(linedata,aes(x=PointEstx, y=PointEsty)) + geom_line()

Note I changed the comma to a plus sign and changed the brackets.

Regards,
Tim


-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Sorkin, John
Sent: Thursday, December 8, 2022 8:06 PM
To: r-help at r-project.org (r-help at r-project.org) <r-help at r-project.org>
Subject: [R] Plot a line using ggplot2

[External Email]

Colleagues,

I am trying to plot a simple line using ggplot2. I get the axes, but I don't get the line. Please let me know what my error I am making.
Thank you,
John

# Define x and y values
PointEstx <- Estx+1.96*SE
PointEsty  <- 1

row2 <- cbind(PointEstx,PointEsty)
linedata<- data_frame(rbind(row1,row2))
linedata
# make sure we have a data frame
class(linedata)

#plot the data
ggplot(linedata,aes(x=PointEstx, y=PointEsty), geom_line())





______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C5695e850b24347d9fcf908dad9818f28%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638061447740857132%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=KhRB4ZHKsoVlPRsAnufXXzfiJyRBEEv32P7bcAAiGBo%3D&amp;reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C5695e850b24347d9fcf908dad9818f28%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638061447740857132%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=DPlvmxCIwlF1WqKWawzSmJbosiFGjnLwFIMKK7hFAco%3D&amp;reserved=0
and provide commented, minimal, self-contained, reproducible code.


From d@v|dhughjone@ @end|ng |rom gm@||@com  Wed Dec  7 17:57:12 2022
From: d@v|dhughjone@ @end|ng |rom gm@||@com (David Hugh-Jones)
Date: Wed, 7 Dec 2022 16:57:12 +0000
Subject: [R] [R-pkgs] onetime 0.1.0: Run Code Only Once
Message-ID: <CAARY7kg9QnxFkNh_MMO1=xa4wMOet=McSFN1y1JTMK1d5F9MPQ@mail.gmail.com>

Dear all,

Onetime 0.1.0, a utility package of interest to package developers, is now
on CRAN:

https://cran.r-project.org/package=onetime

Onetime uses lockfiles to perform an action only once (ever, or with an
expiry date) on a given computer. For example, it can send a message or
warning:

for (i in 1:10) {
  onetime_message("This will be shown only once", id = "my-message")
}

It also lets you send a message and confirm the user doesn't need to see it
again:

onetime_message_confirm("User can opt not to show this message again",
                                             id = "my-confirm-message")

Onetime checks that you have permission to store files on the user's
computer, and allows package authors to ask for this permission using
check_ok_to_store().

Package authors can use onetime to print one-off informative messages for
new users, or to do other one-off actions.

Documentation is available at https://hughjonesd.github.io/onetime/.

Cheers,
David

	[[alternative HTML version deleted]]

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From cry@n @end|ng |rom b|ngh@mton@edu  Fri Dec  9 19:43:58 2022
From: cry@n @end|ng |rom b|ngh@mton@edu (Christopher Ryan)
Date: Fri, 9 Dec 2022 13:43:58 -0500
Subject: [R] increasing the width of dialog box generated by select.list()
Message-ID: <CAM+rpYmeouMRHdEsk=w45oZ_6nvVFTbCpM4qjGA=SRXBVocM6Q@mail.gmail.com>

You can see from the code below that the title of the dialog box is too
long for the width of the selection box. How might I widen the box?  Thanks.

--Chris Ryan

counties <- c("TIOGA", "BROOME", "ONTARIO", "ONONDAGA", "WESTCHESTER")

chosen.county <- select.list(counties, preselect = NULL, multiple = FALSE,
title = "Choose a single county of interest. Only  hospitals found in the
HERDS COVID-19 database are shown. This generally means counties containing
hospitals.", graphics = getOption("menu.graphics"))

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Fri Dec  9 20:36:21 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 9 Dec 2022 11:36:21 -0800
Subject: [R] 
 increasing the width of dialog box generated by select.list()
In-Reply-To: <CAM+rpYmeouMRHdEsk=w45oZ_6nvVFTbCpM4qjGA=SRXBVocM6Q@mail.gmail.com>
References: <CAM+rpYmeouMRHdEsk=w45oZ_6nvVFTbCpM4qjGA=SRXBVocM6Q@mail.gmail.com>
Message-ID: <CAGxFJbT52SHKL=vV5Sq8Lu4XMo3N=WPjhPM_2kEoNBcFf1x5og@mail.gmail.com>

You should use the graphics = TRUE option to make this reproducible. Also,
please post in plain text in future, though it made little difference here.
HTML can get messed up or stripped on this plain text list.

What is your OS and version? Windows and Mac are entirely different. How
are your running R? -- in an IDE like RStudio or Emacs? --  as a script?
-- in RGui?  Versions of all of these that apply?

On my Mac Ventura in RStudio 2022.07.2 Build 576 using the latest Xquartz,
it seems fine: the title doesn't fit in the box title and is truncated, but
it appears beneath it in full in the box, and I can resize the box if I
wish to.

-- Bert



On Fri, Dec 9, 2022 at 10:44 AM Christopher Ryan via R-help <
r-help at r-project.org> wrote:

> You can see from the code below that the title of the dialog box is too
> long for the width of the selection box. How might I widen the box?
> Thanks.
>
> --Chris Ryan
>
> counties <- c("TIOGA", "BROOME", "ONTARIO", "ONONDAGA", "WESTCHESTER")
>
> chosen.county <- select.list(counties, preselect = NULL, multiple = FALSE,
> title = "Choose a single county of interest. Only  hospitals found in the
> HERDS COVID-19 database are shown. This generally means counties containing
> hospitals.", graphics = getOption("menu.graphics"))
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From cry@n @end|ng |rom b|ngh@mton@edu  Fri Dec  9 20:52:49 2022
From: cry@n @end|ng |rom b|ngh@mton@edu (Christopher Ryan)
Date: Fri, 9 Dec 2022 14:52:49 -0500
Subject: [R] [External Email] Re: increasing the width of dialog box
 generated by select.list()
In-Reply-To: <CAGxFJbT52SHKL=vV5Sq8Lu4XMo3N=WPjhPM_2kEoNBcFf1x5og@mail.gmail.com>
References: <CAM+rpYmeouMRHdEsk=w45oZ_6nvVFTbCpM4qjGA=SRXBVocM6Q@mail.gmail.com>
 <CAGxFJbT52SHKL=vV5Sq8Lu4XMo3N=WPjhPM_2kEoNBcFf1x5og@mail.gmail.com>
Message-ID: <CAM+rpY=gW3iALHng4g03kxm=guCAGB2gNcaH38K3mM63TMr+Bw@mail.gmail.com>

Hmm, interesting. My default is to always post in plain text. Methinks
the web interface to our university's gmail might be up to no good;
wouldn't be the first time.  Will have to look into that. Hope this is
better.

At any rate: Windows 10. I use both Rgui and emacs ESS. in both of
those scenarios I'd like the box to open up wide enough be default to
display the entire title; I could put in a couple line breaks if
needed.

Currently, in Rgui or Emacs/ESS, with graphics = TRUE or with my
original code, I cannot resize the ensuing dialog box.

Thanks.

--Chris Ryan


On Fri, Dec 9, 2022 at 2:36 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>
> You should use the graphics = TRUE option to make this reproducible. Also, please post in plain text in future, though it made little difference here. HTML can get messed up or stripped on this plain text list.
>
> What is your OS and version? Windows and Mac are entirely different. How are your running R? -- in an IDE like RStudio or Emacs? --  as a script?  -- in RGui?  Versions of all of these that apply?
>
> On my Mac Ventura in RStudio 2022.07.2 Build 576 using the latest Xquartz, it seems fine: the title doesn't fit in the box title and is truncated, but it appears beneath it in full in the box, and I can resize the box if I wish to.
>
> -- Bert
>
>
>
> On Fri, Dec 9, 2022 at 10:44 AM Christopher Ryan via R-help <r-help at r-project.org> wrote:
>>
>> You can see from the code below that the title of the dialog box is too
>> long for the width of the selection box. How might I widen the box?  Thanks.
>>
>> --Chris Ryan
>>
>> counties <- c("TIOGA", "BROOME", "ONTARIO", "ONONDAGA", "WESTCHESTER")
>>
>> chosen.county <- select.list(counties, preselect = NULL, multiple = FALSE,
>> title = "Choose a single county of interest. Only  hospitals found in the
>> HERDS COVID-19 database are shown. This generally means counties containing
>> hospitals.", graphics = getOption("menu.graphics"))
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From L@urentRHe|p @end|ng |rom |ree@|r  Sat Dec 10 15:15:56 2022
From: L@urentRHe|p @end|ng |rom |ree@|r (Laurent Rhelp)
Date: Sat, 10 Dec 2022 15:15:56 +0100
Subject: [R] lattice: how to use a log scale on the x-axis with the bwplot
 function
Message-ID: <b430486e-3ef3-48bd-beae-a2e528aa6950@free.fr>

Dear R-Help list,

 ?? I would like to use bwplot from the lattice package with a log scale 
both on
the x-axis and the y-axis but I do not know how to do that because I do 
not know
how to change the factor x-axis in a numeric x-axis.

 ?Here is my example:


library(lattice)

# the mock data
y <- runif(100000,min=0, max=500)
x <- seq(0,500,length=length(y))
# I cut the x variable to create a factor variable in order to calculate 
the boxes
groups <- cut(x,10,ordered_result = TRUE)
# creating the dataframe for the lattice functions
DF <- data.frame( x= x , y = y, groups = groups)


## ok for xyplot
xyplot(?? y ~ x
 ????????? , data=DF
 ????????? , scales = list(
 ??????????? y = list(log=T)
 ??????????? , x = list(log=T)

 ????????? )
)

## ok for bwplot with the log scale for the y-axis
bwplot( y ~ groups
 ????????? , data=DF
 ????????? , scales = list(
 ??????????? y = list(log=T)
 ??????????? #???? , x = list(log=T)

 ????????? )
)



## Non ok for bwplot with the log scale for the x-axis
bwplot( y ~ groups
 ??????? , data=DF
 ??????? , scales = list(
 ????????????? y = list(log=T)
 ??????????? , x = list(log=T)

 ??????? )
)
which gives an error because the x-axis is a factor, I would like to 
replace it
for the display by the meddle of every class for example and put a log 
scale on the x-axis.

Thank you for your help
Best regards
Laurent



-- 
Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
www.avast.com


From deep@y@n@@@rk@r @end|ng |rom gm@||@com  Sat Dec 10 17:02:10 2022
From: deep@y@n@@@rk@r @end|ng |rom gm@||@com (Deepayan Sarkar)
Date: Sat, 10 Dec 2022 21:32:10 +0530
Subject: [R] 
 lattice: how to use a log scale on the x-axis with the bwplot
 function
In-Reply-To: <b430486e-3ef3-48bd-beae-a2e528aa6950@free.fr>
References: <b430486e-3ef3-48bd-beae-a2e528aa6950@free.fr>
Message-ID: <CADfFDC5e6zR44HjAG_sV90jkyH2=LkuwogyHFQVHOZqknYn0wQ@mail.gmail.com>

Log-scales for the "factor" variable in bwplot() is not allowed.

You could, however, use the panel function panel.bwplot() with
xyplot(num ~ num). The potential problem with that is the box widths,
which panel.bwplot() will not know how to compute.

See if the following gives you a reasonable starting point:

DF <- within(DF, m <- tapply(y, groups, mean))
xyplot(y ~ m, DF, scales = list(log = TRUE),
       panel = panel.bwplot, horizontal = FALSE,
       box.width = .0001)

Best,
-Deepayan

On Sat, Dec 10, 2022 at 7:46 PM Laurent Rhelp <LaurentRHelp at free.fr> wrote:
>
> Dear R-Help list,
>
>     I would like to use bwplot from the lattice package with a log scale
> both on
> the x-axis and the y-axis but I do not know how to do that because I do
> not know
> how to change the factor x-axis in a numeric x-axis.
>
>   Here is my example:
>
>
> library(lattice)
>
> # the mock data
> y <- runif(100000,min=0, max=500)
> x <- seq(0,500,length=length(y))
> # I cut the x variable to create a factor variable in order to calculate
> the boxes
> groups <- cut(x,10,ordered_result = TRUE)
> # creating the dataframe for the lattice functions
> DF <- data.frame( x= x , y = y, groups = groups)
>
>
> ## ok for xyplot
> xyplot(   y ~ x
>            , data=DF
>            , scales = list(
>              y = list(log=T)
>              , x = list(log=T)
>
>            )
> )
>
> ## ok for bwplot with the log scale for the y-axis
> bwplot( y ~ groups
>            , data=DF
>            , scales = list(
>              y = list(log=T)
>              #     , x = list(log=T)
>
>            )
> )
>
>
>
> ## Non ok for bwplot with the log scale for the x-axis
> bwplot( y ~ groups
>          , data=DF
>          , scales = list(
>                y = list(log=T)
>              , x = list(log=T)
>
>          )
> )
> which gives an error because the x-axis is a factor, I would like to
> replace it
> for the display by the meddle of every class for example and put a log
> scale on the x-axis.
>
> Thank you for your help
> Best regards
> Laurent
>
>
>
> --
> Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
> www.avast.com
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Sat Dec 10 19:20:37 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 10 Dec 2022 10:20:37 -0800
Subject: [R] 
 lattice: how to use a log scale on the x-axis with the bwplot
 function
In-Reply-To: <CADfFDC5e6zR44HjAG_sV90jkyH2=LkuwogyHFQVHOZqknYn0wQ@mail.gmail.com>
References: <b430486e-3ef3-48bd-beae-a2e528aa6950@free.fr>
 <CADfFDC5e6zR44HjAG_sV90jkyH2=LkuwogyHFQVHOZqknYn0wQ@mail.gmail.com>
Message-ID: <CAGxFJbSf8O-+96rOY6sqq2UMgg50Evnu3DtAc9VaJZDGAKQ+SA@mail.gmail.com>

If Deepayan's suggestion does not suit and especially *if* I understand
what you want to do correctly, then it seems to me that it is
straightforward to create the groups and group labels manually:

## in verbose detail to hopefully improve clarity
set.seed(123)  ## for reprex
y <- runif(40,min=0, max= 10)  ##*small* reprex
## cut y into 5 equally spaced groups labeled by log10 of the center
## of the intervals
yrng <- range(y)
eps <- .0001*c(-1,1)*diff(yrng) ## see ?cut
yrng <-yrng + eps
delta <- diff(yrng)/5 # 5 = number of intervals
brks <- seq(yrng[1], yrng[2],length.out =6)
labs <- round(log10(brks[-1] - delta/2), 2) ## log10 (centers)
groups <- cut(y,breaks = brks,
              labels = paste0('10^',labs))
# creating the dataframe for the lattice functions
DF <- data.frame( y = y, groups = groups)

bwplot( y ~ groups
        , data=DF
        , scales = list(
           y = list(log=T)
        ),
)

## Of course, ignore if I have misunderstood.

Cheers,
Bert

On Sat, Dec 10, 2022 at 8:03 AM Deepayan Sarkar <deepayan.sarkar at gmail.com>
wrote:

> Log-scales for the "factor" variable in bwplot() is not allowed.
>
> You could, however, use the panel function panel.bwplot() with
> xyplot(num ~ num). The potential problem with that is the box widths,
> which panel.bwplot() will not know how to compute.
>
> See if the following gives you a reasonable starting point:
>
> DF <- within(DF, m <- tapply(y, groups, mean))
> xyplot(y ~ m, DF, scales = list(log = TRUE),
>        panel = panel.bwplot, horizontal = FALSE,
>        box.width = .0001)
>
> Best,
> -Deepayan
>
> On Sat, Dec 10, 2022 at 7:46 PM Laurent Rhelp <LaurentRHelp at free.fr>
> wrote:
> >
> > Dear R-Help list,
> >
> >     I would like to use bwplot from the lattice package with a log scale
> > both on
> > the x-axis and the y-axis but I do not know how to do that because I do
> > not know
> > how to change the factor x-axis in a numeric x-axis.
> >
> >   Here is my example:
> >
> >
> > library(lattice)
> >
> > # the mock data
> > y <- runif(100000,min=0, max=500)
> > x <- seq(0,500,length=length(y))
> > # I cut the x variable to create a factor variable in order to calculate
> > the boxes
> > groups <- cut(x,10,ordered_result = TRUE)
> > # creating the dataframe for the lattice functions
> > DF <- data.frame( x= x , y = y, groups = groups)
> >
> >
> > ## ok for xyplot
> > xyplot(   y ~ x
> >            , data=DF
> >            , scales = list(
> >              y = list(log=T)
> >              , x = list(log=T)
> >
> >            )
> > )
> >
> > ## ok for bwplot with the log scale for the y-axis
> > bwplot( y ~ groups
> >            , data=DF
> >            , scales = list(
> >              y = list(log=T)
> >              #     , x = list(log=T)
> >
> >            )
> > )
> >
> >
> >
> > ## Non ok for bwplot with the log scale for the x-axis
> > bwplot( y ~ groups
> >          , data=DF
> >          , scales = list(
> >                y = list(log=T)
> >              , x = list(log=T)
> >
> >          )
> > )
> > which gives an error because the x-axis is a factor, I would like to
> > replace it
> > for the display by the meddle of every class for example and put a log
> > scale on the x-axis.
> >
> > Thank you for your help
> > Best regards
> > Laurent
> >
> >
> >
> > --
> > Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
> > www.avast.com
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Sat Dec 10 22:36:18 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 10 Dec 2022 13:36:18 -0800
Subject: [R] 
 lattice: how to use a log scale on the x-axis with the bwplot
 function
In-Reply-To: <CAGxFJbSf8O-+96rOY6sqq2UMgg50Evnu3DtAc9VaJZDGAKQ+SA@mail.gmail.com>
References: <b430486e-3ef3-48bd-beae-a2e528aa6950@free.fr>
 <CADfFDC5e6zR44HjAG_sV90jkyH2=LkuwogyHFQVHOZqknYn0wQ@mail.gmail.com>
 <CAGxFJbSf8O-+96rOY6sqq2UMgg50Evnu3DtAc9VaJZDGAKQ+SA@mail.gmail.com>
Message-ID: <CAGxFJbR5XS3h4gAqFdOxczMaS9tBsNmB2wk9Cbgtg=zMYzGnEQ@mail.gmail.com>

... and here's a version where the x variable is different than y. It's
basically the same.


set.seed(123)
y <- runif(40,min=0, max= 10)
x <- seq(0,10, length = 40)
## 5 equally spaced groups labeled by log10 of the center
## of the intervals
xrng <- range(x)
eps <- .0001*c(-1,1)*diff(xrng) ## see ?cut
xrng <-xrng + eps
delta <- diff(xrng)/5 # 5 = number of intervals
brks <- seq(xrng[1], xrng[2],length.out =6)
labs <- round(log10(brks[-1] - delta/2), 2) ## log10 (centers)
groups <- cut(x,breaks = brks, ordered_result = TRUE,
              labels = paste0('10^',labs))
# creating the dataframe for the lattice functions
DF <- data.frame( y = y, groups = groups)

bwplot( y ~ groups
        , data=DF
        , scales = list(
           y = list(log=T)
        ),
)

On Sat, Dec 10, 2022 at 10:20 AM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> If Deepayan's suggestion does not suit and especially *if* I understand
> what you want to do correctly, then it seems to me that it is
> straightforward to create the groups and group labels manually:
>
> ## in verbose detail to hopefully improve clarity
> set.seed(123)  ## for reprex
> y <- runif(40,min=0, max= 10)  ##*small* reprex
> ## cut y into 5 equally spaced groups labeled by log10 of the center
> ## of the intervals
> yrng <- range(y)
> eps <- .0001*c(-1,1)*diff(yrng) ## see ?cut
> yrng <-yrng + eps
> delta <- diff(yrng)/5 # 5 = number of intervals
> brks <- seq(yrng[1], yrng[2],length.out =6)
> labs <- round(log10(brks[-1] - delta/2), 2) ## log10 (centers)
> groups <- cut(y,breaks = brks,
>               labels = paste0('10^',labs))
> # creating the dataframe for the lattice functions
> DF <- data.frame( y = y, groups = groups)
>
> bwplot( y ~ groups
>         , data=DF
>         , scales = list(
>            y = list(log=T)
>         ),
> )
>
> ## Of course, ignore if I have misunderstood.
>
> Cheers,
> Bert
>
> On Sat, Dec 10, 2022 at 8:03 AM Deepayan Sarkar <deepayan.sarkar at gmail.com>
> wrote:
>
>> Log-scales for the "factor" variable in bwplot() is not allowed.
>>
>> You could, however, use the panel function panel.bwplot() with
>> xyplot(num ~ num). The potential problem with that is the box widths,
>> which panel.bwplot() will not know how to compute.
>>
>> See if the following gives you a reasonable starting point:
>>
>> DF <- within(DF, m <- tapply(y, groups, mean))
>> xyplot(y ~ m, DF, scales = list(log = TRUE),
>>        panel = panel.bwplot, horizontal = FALSE,
>>        box.width = .0001)
>>
>> Best,
>> -Deepayan
>>
>> On Sat, Dec 10, 2022 at 7:46 PM Laurent Rhelp <LaurentRHelp at free.fr>
>> wrote:
>> >
>> > Dear R-Help list,
>> >
>> >     I would like to use bwplot from the lattice package with a log scale
>> > both on
>> > the x-axis and the y-axis but I do not know how to do that because I do
>> > not know
>> > how to change the factor x-axis in a numeric x-axis.
>> >
>> >   Here is my example:
>> >
>> >
>> > library(lattice)
>> >
>> > # the mock data
>> > y <- runif(100000,min=0, max=500)
>> > x <- seq(0,500,length=length(y))
>> > # I cut the x variable to create a factor variable in order to calculate
>> > the boxes
>> > groups <- cut(x,10,ordered_result = TRUE)
>> > # creating the dataframe for the lattice functions
>> > DF <- data.frame( x= x , y = y, groups = groups)
>> >
>> >
>> > ## ok for xyplot
>> > xyplot(   y ~ x
>> >            , data=DF
>> >            , scales = list(
>> >              y = list(log=T)
>> >              , x = list(log=T)
>> >
>> >            )
>> > )
>> >
>> > ## ok for bwplot with the log scale for the y-axis
>> > bwplot( y ~ groups
>> >            , data=DF
>> >            , scales = list(
>> >              y = list(log=T)
>> >              #     , x = list(log=T)
>> >
>> >            )
>> > )
>> >
>> >
>> >
>> > ## Non ok for bwplot with the log scale for the x-axis
>> > bwplot( y ~ groups
>> >          , data=DF
>> >          , scales = list(
>> >                y = list(log=T)
>> >              , x = list(log=T)
>> >
>> >          )
>> > )
>> > which gives an error because the x-axis is a factor, I would like to
>> > replace it
>> > for the display by the meddle of every class for example and put a log
>> > scale on the x-axis.
>> >
>> > Thank you for your help
>> > Best regards
>> > Laurent
>> >
>> >
>> >
>> > --
>> > Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
>> > www.avast.com
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From L@urentRHe|p @end|ng |rom |ree@|r  Sun Dec 11 10:03:13 2022
From: L@urentRHe|p @end|ng |rom |ree@|r (Laurent Rhelp)
Date: Sun, 11 Dec 2022 10:03:13 +0100
Subject: [R] 
 lattice: how to use a log scale on the x-axis with the bwplot
 function
In-Reply-To: <CADfFDC5e6zR44HjAG_sV90jkyH2=LkuwogyHFQVHOZqknYn0wQ@mail.gmail.com>
References: <b430486e-3ef3-48bd-beae-a2e528aa6950@free.fr>
 <CADfFDC5e6zR44HjAG_sV90jkyH2=LkuwogyHFQVHOZqknYn0wQ@mail.gmail.com>
Message-ID: <13b1f87b-cce5-6421-768f-22c90e25289a@free.fr>

I understand the idea but I did not succeed.

Here is what I tried:

## 1. ?? middles of classes calculation

m <- tapply(DF$x, groups, mean)

## 2.???? create a new factor columns with the levels deduced from
##???????? the values of the middles of the classes
##

DF$m <- DF$groups
levels(DF$m) <- as.character(m)
DF$m <- as.numeric(levels(DF$m))[DF$m]

## 3. I verify with xyplot

xyplot(?? y ~ m
 ????????? , type = "p"
 ????????? , data=DF
 ????????? , scales = list(
 ??????????? y = list(log=T)
 ??????????? , x = list(log=T)

 ????????? )
)
## 4. I use the panel.groups and panel.bwplot to display the boxplots 
without success

xyplot(?? y ~ m
 ????????? , groups = groups
 ????????? , type = "p"
 ????????? , data=DF
 ????????? , scales = list(
 ??????????? y = list(log=T)
 ??????????? , x = list(log=T)
 ??????????? , panel = panel.superpose
 ??????????? ,? panel.groups=function(x,y, group.number,...){
 ????????????? panel.xyplot(x,y,...)
 ????????????? panel.bwplot(x,y,...)
 ??????????? }
 ??????????? , horizontal = FALSE
 ??????????? , box.width = .0001
 ????????? )
)


thx



Le 10/12/2022 ? 17:02, Deepayan Sarkar a ?crit?:
> Log-scales for the "factor" variable in bwplot() is not allowed.
>
> You could, however, use the panel function panel.bwplot() with
> xyplot(num ~ num). The potential problem with that is the box widths,
> which panel.bwplot() will not know how to compute.
>
> See if the following gives you a reasonable starting point:
>
> DF <- within(DF, m <- tapply(y, groups, mean))
> xyplot(y ~ m, DF, scales = list(log = TRUE),
>         panel = panel.bwplot, horizontal = FALSE,
>         box.width = .0001)
>
> Best,
> -Deepayan
>
> On Sat, Dec 10, 2022 at 7:46 PM Laurent Rhelp <LaurentRHelp at free.fr> wrote:
>> Dear R-Help list,
>>
>>      I would like to use bwplot from the lattice package with a log scale
>> both on
>> the x-axis and the y-axis but I do not know how to do that because I do
>> not know
>> how to change the factor x-axis in a numeric x-axis.
>>
>>    Here is my example:
>>
>>
>> library(lattice)
>>
>> # the mock data
>> y <- runif(100000,min=0, max=500)
>> x <- seq(0,500,length=length(y))
>> # I cut the x variable to create a factor variable in order to calculate
>> the boxes
>> groups <- cut(x,10,ordered_result = TRUE)
>> # creating the dataframe for the lattice functions
>> DF <- data.frame( x= x , y = y, groups = groups)
>>
>>
>> ## ok for xyplot
>> xyplot(   y ~ x
>>             , data=DF
>>             , scales = list(
>>               y = list(log=T)
>>               , x = list(log=T)
>>
>>             )
>> )
>>
>> ## ok for bwplot with the log scale for the y-axis
>> bwplot( y ~ groups
>>             , data=DF
>>             , scales = list(
>>               y = list(log=T)
>>               #     , x = list(log=T)
>>
>>             )
>> )
>>
>>
>>
>> ## Non ok for bwplot with the log scale for the x-axis
>> bwplot( y ~ groups
>>           , data=DF
>>           , scales = list(
>>                 y = list(log=T)
>>               , x = list(log=T)
>>
>>           )
>> )
>> which gives an error because the x-axis is a factor, I would like to
>> replace it
>> for the display by the meddle of every class for example and put a log
>> scale on the x-axis.
>>
>> Thank you for your help
>> Best regards
>> Laurent
>>
>>
>>
>> --
>> Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
>> www.avast.com
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.



-- 
Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
www.avast.com


From L@urentRHe|p @end|ng |rom |ree@|r  Sun Dec 11 10:05:59 2022
From: L@urentRHe|p @end|ng |rom |ree@|r (Laurent Rhelp)
Date: Sun, 11 Dec 2022 10:05:59 +0100
Subject: [R] 
 lattice: how to use a log scale on the x-axis with the bwplot
 function
In-Reply-To: <CAGxFJbR5XS3h4gAqFdOxczMaS9tBsNmB2wk9Cbgtg=zMYzGnEQ@mail.gmail.com>
References: <b430486e-3ef3-48bd-beae-a2e528aa6950@free.fr>
 <CADfFDC5e6zR44HjAG_sV90jkyH2=LkuwogyHFQVHOZqknYn0wQ@mail.gmail.com>
 <CAGxFJbSf8O-+96rOY6sqq2UMgg50Evnu3DtAc9VaJZDGAKQ+SA@mail.gmail.com>
 <CAGxFJbR5XS3h4gAqFdOxczMaS9tBsNmB2wk9Cbgtg=zMYzGnEQ@mail.gmail.com>
Message-ID: <349fb525-b89e-1ca9-7e97-616a7b068c20@free.fr>

Ok for the labels but the x-axis is not displayed in log scale ?



Le 10/12/2022 ? 22:36, Bert Gunter a ?crit?:
> ... and here's a version where the x variable is different than y. 
> It's basically the same.
>
>
> set.seed(123)
> y <- runif(40,min=0, max= 10)
> x <- seq(0,10, length = 40)
> ## 5 equally spaced groups labeled by log10 of the center
> ## of the intervals
> xrng <- range(x)
> eps <- .0001*c(-1,1)*diff(xrng) ## see ?cut
> xrng <-xrng + eps
> delta <- diff(xrng)/5 # 5 = number of intervals
> brks <- seq(xrng[1], xrng[2],length.out =6)
> labs <- round(log10(brks[-1] - delta/2), 2) ## log10 (centers)
> groups <- cut(x,breaks = brks, ordered_result = TRUE,
> ? ? ? ? ? ? ? labels = paste0('10^',labs))
> # creating the dataframe for the lattice functions
> DF <- data.frame( y = y, groups = groups)
>
> bwplot( y ~ groups
> ? ? ? ? , data=DF
> ? ? ? ? , scales = list(
> ? ? ? ? ? ?y = list(log=T)
> ? ? ? ? ),
> )
>
> On Sat, Dec 10, 2022 at 10:20 AM Bert Gunter <bgunter.4567 at gmail.com> 
> wrote:
>
>     If Deepayan's suggestion does not suit and especially *if* I
>     understand what you want to do correctly, then it seems to me that
>     it is straightforward to create the groups and group labels manually:
>
>     ## in verbose detail to hopefully improve clarity
>     set.seed(123) ## for reprex
>     y <- runif(40,min=0, max= 10)? ##*small* reprex
>     ## cut y into 5 equally spaced groups labeled by log10 of the center
>     ## of the intervals
>     yrng <- range(y)
>     eps <- .0001*c(-1,1)*diff(yrng) ## see ?cut
>     yrng <-yrng + eps
>     delta <- diff(yrng)/5 # 5 = number of intervals
>     brks <- seq(yrng[1], yrng[2],length.out =6)
>     labs <- round(log10(brks[-1] - delta/2), 2) ## log10 (centers)
>     groups <- cut(y,breaks = brks,
>     ? ? ? ? ? ? ? labels = paste0('10^',labs))
>     # creating the dataframe for the lattice functions
>     DF <- data.frame( y = y, groups = groups)
>
>     bwplot( y ~ groups
>     ? ? ? ? , data=DF
>     ? ? ? ? , scales = list(
>     ? ? ? ? ? ?y = list(log=T)
>     ? ? ? ? ),
>     )
>
>     ## Of course, ignore if I have misunderstood.
>
>     Cheers,
>     Bert
>
>     On Sat, Dec 10, 2022 at 8:03 AM Deepayan Sarkar
>     <deepayan.sarkar at gmail.com> wrote:
>
>         Log-scales for the "factor" variable in bwplot() is not allowed.
>
>         You could, however, use the panel function panel.bwplot() with
>         xyplot(num ~ num). The potential problem with that is the box
>         widths,
>         which panel.bwplot() will not know how to compute.
>
>         See if the following gives you a reasonable starting point:
>
>         DF <- within(DF, m <- tapply(y, groups, mean))
>         xyplot(y ~ m, DF, scales = list(log = TRUE),
>         ? ? ? ?panel = panel.bwplot, horizontal = FALSE,
>         ? ? ? ?box.width = .0001)
>
>         Best,
>         -Deepayan
>
>         On Sat, Dec 10, 2022 at 7:46 PM Laurent Rhelp
>         <LaurentRHelp at free.fr> wrote:
>         >
>         > Dear R-Help list,
>         >
>         >? ? ?I would like to use bwplot from the lattice package with
>         a log scale
>         > both on
>         > the x-axis and the y-axis but I do not know how to do that
>         because I do
>         > not know
>         > how to change the factor x-axis in a numeric x-axis.
>         >
>         >? ?Here is my example:
>         >
>         >
>         > library(lattice)
>         >
>         > # the mock data
>         > y <- runif(100000,min=0, max=500)
>         > x <- seq(0,500,length=length(y))
>         > # I cut the x variable to create a factor variable in order
>         to calculate
>         > the boxes
>         > groups <- cut(x,10,ordered_result = TRUE)
>         > # creating the dataframe for the lattice functions
>         > DF <- data.frame( x= x , y = y, groups = groups)
>         >
>         >
>         > ## ok for xyplot
>         > xyplot(? ?y ~ x
>         >? ? ? ? ? ? , data=DF
>         >? ? ? ? ? ? , scales = list(
>         >? ? ? ? ? ? ? y = list(log=T)
>         >? ? ? ? ? ? ? , x = list(log=T)
>         >
>         >? ? ? ? ? ? )
>         > )
>         >
>         > ## ok for bwplot with the log scale for the y-axis
>         > bwplot( y ~ groups
>         >? ? ? ? ? ? , data=DF
>         >? ? ? ? ? ? , scales = list(
>         >? ? ? ? ? ? ? y = list(log=T)
>         >? ? ? ? ? ? ? #? ? ?, x = list(log=T)
>         >
>         >? ? ? ? ? ? )
>         > )
>         >
>         >
>         >
>         > ## Non ok for bwplot with the log scale for the x-axis
>         > bwplot( y ~ groups
>         >? ? ? ? ? , data=DF
>         >? ? ? ? ? , scales = list(
>         >? ? ? ? ? ? ? ? y = list(log=T)
>         >? ? ? ? ? ? ? , x = list(log=T)
>         >
>         >? ? ? ? ? )
>         > )
>         > which gives an error because the x-axis is a factor, I would
>         like to
>         > replace it
>         > for the display by the meddle of every class for example and
>         put a log
>         > scale on the x-axis.
>         >
>         > Thank you for your help
>         > Best regards
>         > Laurent
>         >
>         >
>         >
>         > --
>         > Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
>         > www.avast.com <http://www.avast.com>
>         >
>         > ______________________________________________
>         > R-help at r-project.org mailing list -- To UNSUBSCRIBE and
>         more, see
>         > https://stat.ethz.ch/mailman/listinfo/r-help
>         > PLEASE do read the posting guide
>         http://www.R-project.org/posting-guide.html
>         <http://www.R-project.org/posting-guide.html>
>         > and provide commented, minimal, self-contained, reproducible
>         code.
>
>         ______________________________________________
>         R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>         https://stat.ethz.ch/mailman/listinfo/r-help
>         PLEASE do read the posting guide
>         http://www.R-project.org/posting-guide.html
>         <http://www.R-project.org/posting-guide.html>
>         and provide commented, minimal, self-contained, reproducible code.
>


-- 
Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
www.avast.com
	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Sun Dec 11 16:12:39 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 11 Dec 2022 07:12:39 -0800
Subject: [R] 
 lattice: how to use a log scale on the x-axis with the bwplot
 function
In-Reply-To: <349fb525-b89e-1ca9-7e97-616a7b068c20@free.fr>
References: <b430486e-3ef3-48bd-beae-a2e528aa6950@free.fr>
 <CADfFDC5e6zR44HjAG_sV90jkyH2=LkuwogyHFQVHOZqknYn0wQ@mail.gmail.com>
 <CAGxFJbSf8O-+96rOY6sqq2UMgg50Evnu3DtAc9VaJZDGAKQ+SA@mail.gmail.com>
 <CAGxFJbR5XS3h4gAqFdOxczMaS9tBsNmB2wk9Cbgtg=zMYzGnEQ@mail.gmail.com>
 <349fb525-b89e-1ca9-7e97-616a7b068c20@free.fr>
Message-ID: <CAGxFJbRiFi007zWV2+Qn1RYgNst184pn43va=pU4cxc+X3+vMA@mail.gmail.com>

There can be **no log scale** for the x axis, only labels, if x is a factor
(Groups).

If what you mean is that there are no tick marks o the x-axis, they can be
added in my code in the scales list (for my reprex with 5 levels of group):

scales = list(
          alternating = 1  ## ticls only on bottom
        , y = list(log=T, tck = c(1,0))
        , x = list(at = 1:5, tck = 1)
        )

If this is not what you meant, you'll need to clarify ... or just move on.

-- Bert

On Sun, Dec 11, 2022 at 1:06 AM Laurent Rhelp <LaurentRHelp at free.fr> wrote:

> Ok for the labels but the x-axis is not displayed in log scale ?
>
>
>
> Le 10/12/2022 ? 22:36, Bert Gunter a ?crit :
>
> ... and here's a version where the x variable is different than y. It's
> basically the same.
>
>
> set.seed(123)
> y <- runif(40,min=0, max= 10)
> x <- seq(0,10, length = 40)
> ## 5 equally spaced groups labeled by log10 of the center
> ## of the intervals
> xrng <- range(x)
> eps <- .0001*c(-1,1)*diff(xrng) ## see ?cut
> xrng <-xrng + eps
> delta <- diff(xrng)/5 # 5 = number of intervals
> brks <- seq(xrng[1], xrng[2],length.out =6)
> labs <- round(log10(brks[-1] - delta/2), 2) ## log10 (centers)
> groups <- cut(x,breaks = brks, ordered_result = TRUE,
>               labels = paste0('10^',labs))
> # creating the dataframe for the lattice functions
> DF <- data.frame( y = y, groups = groups)
>
> bwplot( y ~ groups
>         , data=DF
>         , scales = list(
>            y = list(log=T)
>         ),
> )
>
> On Sat, Dec 10, 2022 at 10:20 AM Bert Gunter <bgunter.4567 at gmail.com>
> wrote:
>
>> If Deepayan's suggestion does not suit and especially *if* I understand
>> what you want to do correctly, then it seems to me that it is
>> straightforward to create the groups and group labels manually:
>>
>> ## in verbose detail to hopefully improve clarity
>> set.seed(123)  ## for reprex
>> y <- runif(40,min=0, max= 10)  ##*small* reprex
>> ## cut y into 5 equally spaced groups labeled by log10 of the center
>> ## of the intervals
>> yrng <- range(y)
>> eps <- .0001*c(-1,1)*diff(yrng) ## see ?cut
>> yrng <-yrng + eps
>> delta <- diff(yrng)/5 # 5 = number of intervals
>> brks <- seq(yrng[1], yrng[2],length.out =6)
>> labs <- round(log10(brks[-1] - delta/2), 2) ## log10 (centers)
>> groups <- cut(y,breaks = brks,
>>               labels = paste0('10^',labs))
>> # creating the dataframe for the lattice functions
>> DF <- data.frame( y = y, groups = groups)
>>
>> bwplot( y ~ groups
>>         , data=DF
>>         , scales = list(
>>            y = list(log=T)
>>         ),
>> )
>>
>> ## Of course, ignore if I have misunderstood.
>>
>> Cheers,
>> Bert
>>
>> On Sat, Dec 10, 2022 at 8:03 AM Deepayan Sarkar <
>> deepayan.sarkar at gmail.com> wrote:
>>
>>> Log-scales for the "factor" variable in bwplot() is not allowed.
>>>
>>> You could, however, use the panel function panel.bwplot() with
>>> xyplot(num ~ num). The potential problem with that is the box widths,
>>> which panel.bwplot() will not know how to compute.
>>>
>>> See if the following gives you a reasonable starting point:
>>>
>>> DF <- within(DF, m <- tapply(y, groups, mean))
>>> xyplot(y ~ m, DF, scales = list(log = TRUE),
>>>        panel = panel.bwplot, horizontal = FALSE,
>>>        box.width = .0001)
>>>
>>> Best,
>>> -Deepayan
>>>
>>> On Sat, Dec 10, 2022 at 7:46 PM Laurent Rhelp <LaurentRHelp at free.fr>
>>> wrote:
>>> >
>>> > Dear R-Help list,
>>> >
>>> >     I would like to use bwplot from the lattice package with a log
>>> scale
>>> > both on
>>> > the x-axis and the y-axis but I do not know how to do that because I do
>>> > not know
>>> > how to change the factor x-axis in a numeric x-axis.
>>> >
>>> >   Here is my example:
>>> >
>>> >
>>> > library(lattice)
>>> >
>>> > # the mock data
>>> > y <- runif(100000,min=0, max=500)
>>> > x <- seq(0,500,length=length(y))
>>> > # I cut the x variable to create a factor variable in order to
>>> calculate
>>> > the boxes
>>> > groups <- cut(x,10,ordered_result = TRUE)
>>> > # creating the dataframe for the lattice functions
>>> > DF <- data.frame( x= x , y = y, groups = groups)
>>> >
>>> >
>>> > ## ok for xyplot
>>> > xyplot(   y ~ x
>>> >            , data=DF
>>> >            , scales = list(
>>> >              y = list(log=T)
>>> >              , x = list(log=T)
>>> >
>>> >            )
>>> > )
>>> >
>>> > ## ok for bwplot with the log scale for the y-axis
>>> > bwplot( y ~ groups
>>> >            , data=DF
>>> >            , scales = list(
>>> >              y = list(log=T)
>>> >              #     , x = list(log=T)
>>> >
>>> >            )
>>> > )
>>> >
>>> >
>>> >
>>> > ## Non ok for bwplot with the log scale for the x-axis
>>> > bwplot( y ~ groups
>>> >          , data=DF
>>> >          , scales = list(
>>> >                y = list(log=T)
>>> >              , x = list(log=T)
>>> >
>>> >          )
>>> > )
>>> > which gives an error because the x-axis is a factor, I would like to
>>> > replace it
>>> > for the display by the meddle of every class for example and put a log
>>> > scale on the x-axis.
>>> >
>>> > Thank you for your help
>>> > Best regards
>>> > Laurent
>>> >
>>> >
>>> >
>>> > --
>>> > Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
>>> > www.avast.com
>>> >
>>> > ______________________________________________
>>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> > https://stat.ethz.ch/mailman/listinfo/r-help
>>> > PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> > and provide commented, minimal, self-contained, reproducible code.
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>
>
> <https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=emailclient> Sans
> virus.www.avast.com
> <https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=emailclient>
> <#m_7461191544387978914_DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>
>

	[[alternative HTML version deleted]]


From L@urentRHe|p @end|ng |rom |ree@|r  Sun Dec 11 16:38:34 2022
From: L@urentRHe|p @end|ng |rom |ree@|r (Laurent Rhelp)
Date: Sun, 11 Dec 2022 16:38:34 +0100
Subject: [R] 
 lattice: how to use a log scale on the x-axis with the bwplot
 function
In-Reply-To: <CAGxFJbRiFi007zWV2+Qn1RYgNst184pn43va=pU4cxc+X3+vMA@mail.gmail.com>
References: <b430486e-3ef3-48bd-beae-a2e528aa6950@free.fr>
 <CADfFDC5e6zR44HjAG_sV90jkyH2=LkuwogyHFQVHOZqknYn0wQ@mail.gmail.com>
 <CAGxFJbSf8O-+96rOY6sqq2UMgg50Evnu3DtAc9VaJZDGAKQ+SA@mail.gmail.com>
 <CAGxFJbR5XS3h4gAqFdOxczMaS9tBsNmB2wk9Cbgtg=zMYzGnEQ@mail.gmail.com>
 <349fb525-b89e-1ca9-7e97-616a7b068c20@free.fr>
 <CAGxFJbRiFi007zWV2+Qn1RYgNst184pn43va=pU4cxc+X3+vMA@mail.gmail.com>
Message-ID: <dd835c0b-c3b2-6159-70c0-22f42b10834a@free.fr>

Indeed, I have to clarify my problem.
I have to display? my physical measurements in a log-log representation. 
I can do that with xyplot from the lattice package. But I would like to 
show the dispersion of my measurement. So I wanted to use the bwplot 
function but it is not possible because the x-axis has to be a factor 
(as you say). In fact I would like to be able to draw boxplots on a 
graph according to a numerical location on a x-axis. I understood that I 
cannot use the lattice functions.


Le 11/12/2022 ? 16:12, Bert Gunter a ?crit?:
> There can be **no log scale** for the x axis, only labels, if x is a 
> factor (Groups).
>
> If what you mean is that there are no tick marks o the x-axis, they 
> can be added in my code in the scales list (for my reprex with 5 
> levels of group):
>
> scales = list(
> ? ? ? ? ? alternating = 1? ## ticls only on bottom
> ? ? ? ? , y = list(log=T, tck = c(1,0))
> ? ? ? ? , x = list(at = 1:5, tck = 1)
> ? ? ? ? )
>
> If this is not what you meant, you'll need to clarify ... or just move on.
>
> -- Bert
>
> On Sun, Dec 11, 2022 at 1:06 AM Laurent Rhelp <LaurentRHelp at free.fr> 
> wrote:
>
>     Ok for the labels but the x-axis is not displayed in log scale ?
>
>
>
>     Le 10/12/2022 ? 22:36, Bert Gunter a ?crit?:
>>     ... and here's a version where the x variable is different than
>>     y. It's basically the same.
>>
>>
>>     set.seed(123)
>>     y <- runif(40,min=0, max= 10)
>>     x <- seq(0,10, length = 40)
>>     ## 5 equally spaced groups labeled by log10 of the center
>>     ## of the intervals
>>     xrng <- range(x)
>>     eps <- .0001*c(-1,1)*diff(xrng) ## see ?cut
>>     xrng <-xrng + eps
>>     delta <- diff(xrng)/5 # 5 = number of intervals
>>     brks <- seq(xrng[1], xrng[2],length.out =6)
>>     labs <- round(log10(brks[-1] - delta/2), 2) ## log10 (centers)
>>     groups <- cut(x,breaks = brks, ordered_result = TRUE,
>>     ? ? ? ? ? ? ? labels = paste0('10^',labs))
>>     # creating the dataframe for the lattice functions
>>     DF <- data.frame( y = y, groups = groups)
>>
>>     bwplot( y ~ groups
>>     ? ? ? ? , data=DF
>>     ? ? ? ? , scales = list(
>>     ? ? ? ? ? ?y = list(log=T)
>>     ? ? ? ? ),
>>     )
>>
>>     On Sat, Dec 10, 2022 at 10:20 AM Bert Gunter
>>     <bgunter.4567 at gmail.com> wrote:
>>
>>         If Deepayan's suggestion does not suit and especially *if* I
>>         understand what you want to do correctly, then it seems to me
>>         that it is straightforward to create the groups and group
>>         labels manually:
>>
>>         ## in verbose detail to hopefully improve clarity
>>         set.seed(123) ## for reprex
>>         y <- runif(40,min=0, max= 10)? ##*small* reprex
>>         ## cut y into 5 equally spaced groups labeled by log10 of the
>>         center
>>         ## of the intervals
>>         yrng <- range(y)
>>         eps <- .0001*c(-1,1)*diff(yrng) ## see ?cut
>>         yrng <-yrng + eps
>>         delta <- diff(yrng)/5 # 5 = number of intervals
>>         brks <- seq(yrng[1], yrng[2],length.out =6)
>>         labs <- round(log10(brks[-1] - delta/2), 2) ## log10 (centers)
>>         groups <- cut(y,breaks = brks,
>>         ? ? ? ? ? ? ? labels = paste0('10^',labs))
>>         # creating the dataframe for the lattice functions
>>         DF <- data.frame( y = y, groups = groups)
>>
>>         bwplot( y ~ groups
>>         ? ? ? ? , data=DF
>>         ? ? ? ? , scales = list(
>>         ? ? ? ? ? ?y = list(log=T)
>>         ? ? ? ? ),
>>         )
>>
>>         ## Of course, ignore if I have misunderstood.
>>
>>         Cheers,
>>         Bert
>>
>>         On Sat, Dec 10, 2022 at 8:03 AM Deepayan Sarkar
>>         <deepayan.sarkar at gmail.com> wrote:
>>
>>             Log-scales for the "factor" variable in bwplot() is not
>>             allowed.
>>
>>             You could, however, use the panel function panel.bwplot()
>>             with
>>             xyplot(num ~ num). The potential problem with that is the
>>             box widths,
>>             which panel.bwplot() will not know how to compute.
>>
>>             See if the following gives you a reasonable starting point:
>>
>>             DF <- within(DF, m <- tapply(y, groups, mean))
>>             xyplot(y ~ m, DF, scales = list(log = TRUE),
>>             ? ? ? ?panel = panel.bwplot, horizontal = FALSE,
>>             ? ? ? ?box.width = .0001)
>>
>>             Best,
>>             -Deepayan
>>
>>             On Sat, Dec 10, 2022 at 7:46 PM Laurent Rhelp
>>             <LaurentRHelp at free.fr> wrote:
>>             >
>>             > Dear R-Help list,
>>             >
>>             >? ? ?I would like to use bwplot from the lattice package
>>             with a log scale
>>             > both on
>>             > the x-axis and the y-axis but I do not know how to do
>>             that because I do
>>             > not know
>>             > how to change the factor x-axis in a numeric x-axis.
>>             >
>>             >? ?Here is my example:
>>             >
>>             >
>>             > library(lattice)
>>             >
>>             > # the mock data
>>             > y <- runif(100000,min=0, max=500)
>>             > x <- seq(0,500,length=length(y))
>>             > # I cut the x variable to create a factor variable in
>>             order to calculate
>>             > the boxes
>>             > groups <- cut(x,10,ordered_result = TRUE)
>>             > # creating the dataframe for the lattice functions
>>             > DF <- data.frame( x= x , y = y, groups = groups)
>>             >
>>             >
>>             > ## ok for xyplot
>>             > xyplot(? ?y ~ x
>>             >? ? ? ? ? ? , data=DF
>>             >? ? ? ? ? ? , scales = list(
>>             >? ? ? ? ? ? ? y = list(log=T)
>>             >? ? ? ? ? ? ? , x = list(log=T)
>>             >
>>             >? ? ? ? ? ? )
>>             > )
>>             >
>>             > ## ok for bwplot with the log scale for the y-axis
>>             > bwplot( y ~ groups
>>             >? ? ? ? ? ? , data=DF
>>             >? ? ? ? ? ? , scales = list(
>>             >? ? ? ? ? ? ? y = list(log=T)
>>             >? ? ? ? ? ? ? #? ? ?, x = list(log=T)
>>             >
>>             >? ? ? ? ? ? )
>>             > )
>>             >
>>             >
>>             >
>>             > ## Non ok for bwplot with the log scale for the x-axis
>>             > bwplot( y ~ groups
>>             >? ? ? ? ? , data=DF
>>             >? ? ? ? ? , scales = list(
>>             >? ? ? ? ? ? ? ? y = list(log=T)
>>             >? ? ? ? ? ? ? , x = list(log=T)
>>             >
>>             >? ? ? ? ? )
>>             > )
>>             > which gives an error because the x-axis is a factor, I
>>             would like to
>>             > replace it
>>             > for the display by the meddle of every class for
>>             example and put a log
>>             > scale on the x-axis.
>>             >
>>             > Thank you for your help
>>             > Best regards
>>             > Laurent
>>             >
>>             >
>>             >
>>             > --
>>             > Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
>>             > www.avast.com <http://www.avast.com>
>>             >
>>             > ______________________________________________
>>             > R-help at r-project.org mailing list -- To UNSUBSCRIBE and
>>             more, see
>>             > https://stat.ethz.ch/mailman/listinfo/r-help
>>             > PLEASE do read the posting guide
>>             http://www.R-project.org/posting-guide.html
>>             <http://www.R-project.org/posting-guide.html>
>>             > and provide commented, minimal, self-contained,
>>             reproducible code.
>>
>>             ______________________________________________
>>             R-help at r-project.org mailing list -- To UNSUBSCRIBE and
>>             more, see
>>             https://stat.ethz.ch/mailman/listinfo/r-help
>>             PLEASE do read the posting guide
>>             http://www.R-project.org/posting-guide.html
>>             <http://www.R-project.org/posting-guide.html>
>>             and provide commented, minimal, self-contained,
>>             reproducible code.
>>
>
>
>     <https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=emailclient>
>     	Sans virus.www.avast.com
>     <https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=emailclient>
>
>
>     <#m_7461191544387978914_DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>
>

	[[alternative HTML version deleted]]


From deep@y@n@@@rk@r @end|ng |rom gm@||@com  Sun Dec 11 17:48:37 2022
From: deep@y@n@@@rk@r @end|ng |rom gm@||@com (Deepayan Sarkar)
Date: Sun, 11 Dec 2022 22:18:37 +0530
Subject: [R] 
 lattice: how to use a log scale on the x-axis with the bwplot
 function
In-Reply-To: <13b1f87b-cce5-6421-768f-22c90e25289a@free.fr>
References: <b430486e-3ef3-48bd-beae-a2e528aa6950@free.fr>
 <CADfFDC5e6zR44HjAG_sV90jkyH2=LkuwogyHFQVHOZqknYn0wQ@mail.gmail.com>
 <13b1f87b-cce5-6421-768f-22c90e25289a@free.fr>
Message-ID: <CADfFDC7QjzgALFdR4tyBdaBVTMbSqh17Xrd1EpVXEk=VcvN=oQ@mail.gmail.com>

On Sun, Dec 11, 2022 at 2:33 PM Laurent Rhelp <LaurentRHelp at free.fr> wrote:
>
> I understand the idea but I did not succeed.
>
> Here is what I tried:
>
> ## 1.    middles of classes calculation
>
> m <- tapply(DF$x, groups, mean)
>
> ## 2.     create a new factor columns with the levels deduced from
> ##         the values of the middles of the classes
> ##
>
> DF$m <- DF$groups
> levels(DF$m) <- as.character(m)
> DF$m <- as.numeric(levels(DF$m))[DF$m]
>
> ## 3. I verify with xyplot
>
> xyplot(   y ~ m
>            , type = "p"
>            , data=DF
>            , scales = list(
>              y = list(log=T)
>              , x = list(log=T)
>
>            )
> )
> ## 4. I use the panel.groups and panel.bwplot to display the boxplots
> without success
>
> xyplot(   y ~ m
>            , groups = groups
>            , type = "p"
>            , data=DF
>            , scales = list(
>              y = list(log=T)
>              , x = list(log=T)
>              , panel = panel.superpose
>              ,  panel.groups=function(x,y, group.number,...){
>                panel.xyplot(x,y,...)
>                panel.bwplot(x,y,...)
>              }
>              , horizontal = FALSE
>              , box.width = .0001
>            )
> )

You have a typo here: x = list(log=T) should be followed by a
close-paren to complete scales.

But I don't understand from your specification why you need groups and
panel.superpose etc. What is wrong with

xyplot( y ~ m
     ## , groups = groups # why?
     , data=DF
     , scales = list(
           y = list(log=T)
         , x = list(log=T)
       )
     , panel = panel.bwplot
     , horizontal = FALSE
     , box.width = .0001
       )

?

And sorry for my wrong calculation of m earlier, but you can simplify
your version to

m <- tapply(DF$x, groups, mean)
DF$m <- as.vector(m[DF$groups])

Best,
-Deepayan

>
>
> thx
>
>
>
> Le 10/12/2022 ? 17:02, Deepayan Sarkar a ?crit :
> > Log-scales for the "factor" variable in bwplot() is not allowed.
> >
> > You could, however, use the panel function panel.bwplot() with
> > xyplot(num ~ num). The potential problem with that is the box widths,
> > which panel.bwplot() will not know how to compute.
> >
> > See if the following gives you a reasonable starting point:
> >
> > DF <- within(DF, m <- tapply(y, groups, mean))
> > xyplot(y ~ m, DF, scales = list(log = TRUE),
> >         panel = panel.bwplot, horizontal = FALSE,
> >         box.width = .0001)
> >
> > Best,
> > -Deepayan
> >
> > On Sat, Dec 10, 2022 at 7:46 PM Laurent Rhelp <LaurentRHelp at free.fr> wrote:
> >> Dear R-Help list,
> >>
> >>      I would like to use bwplot from the lattice package with a log scale
> >> both on
> >> the x-axis and the y-axis but I do not know how to do that because I do
> >> not know
> >> how to change the factor x-axis in a numeric x-axis.
> >>
> >>    Here is my example:
> >>
> >>
> >> library(lattice)
> >>
> >> # the mock data
> >> y <- runif(100000,min=0, max=500)
> >> x <- seq(0,500,length=length(y))
> >> # I cut the x variable to create a factor variable in order to calculate
> >> the boxes
> >> groups <- cut(x,10,ordered_result = TRUE)
> >> # creating the dataframe for the lattice functions
> >> DF <- data.frame( x= x , y = y, groups = groups)
> >>
> >>
> >> ## ok for xyplot
> >> xyplot(   y ~ x
> >>             , data=DF
> >>             , scales = list(
> >>               y = list(log=T)
> >>               , x = list(log=T)
> >>
> >>             )
> >> )
> >>
> >> ## ok for bwplot with the log scale for the y-axis
> >> bwplot( y ~ groups
> >>             , data=DF
> >>             , scales = list(
> >>               y = list(log=T)
> >>               #     , x = list(log=T)
> >>
> >>             )
> >> )
> >>
> >>
> >>
> >> ## Non ok for bwplot with the log scale for the x-axis
> >> bwplot( y ~ groups
> >>           , data=DF
> >>           , scales = list(
> >>                 y = list(log=T)
> >>               , x = list(log=T)
> >>
> >>           )
> >> )
> >> which gives an error because the x-axis is a factor, I would like to
> >> replace it
> >> for the display by the meddle of every class for example and put a log
> >> scale on the x-axis.
> >>
> >> Thank you for your help
> >> Best regards
> >> Laurent
> >>
> >>
> >>
> >> --
> >> Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
> >> www.avast.com
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
>
>
>
> --
> Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
> www.avast.com


From @k@h@y_e4 @end|ng |rom hotm@||@com  Sun Dec 11 18:11:07 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sun, 11 Dec 2022 17:11:07 +0000
Subject: [R] remembering the state of an action in R....
Message-ID: <PU4P216MB156881546719112711AA26F7C81E9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear members,
                            I am a stock trader and using R for my research. I am monitoring stock prices in real time. I have the following code:

> if (sock price q, breaches a certain value Q) { expr1; expr2; expr3}

THe point is, expr1,expr2,expr3 should execute only once, i.e when q breaches Q. I thought of something like this:

> if( q >= Q ) { expr1; expr2; expr3;}

But expressions keep repeating as long as q >= Q, NOT when q breaches Q for the first time. I did some research on myself and came up with this:

> f <- function() {expr1; expr2; expr3; j <<- j + 1}
> j <- 1; counter[[j]] <- 1;
> if ((q >= Q)  && length(counter) == 1) {f}

I just want your help to know whether it is logically right or not. ARe not there any other possibility other than using the superassignment operator?

Also, any way how to remember when the real time price q, breaches a value Q, for the first time ( the price may come back to Q again afterwards) ?

THanking you,
Yours sincerely,
AKSHAY M KULKARNI

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sun Dec 11 18:28:50 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sun, 11 Dec 2022 17:28:50 +0000
Subject: [R] remembering the state of an action in R....
In-Reply-To: <PU4P216MB156881546719112711AA26F7C81E9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB156881546719112711AA26F7C81E9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <9ab4aa8b-be47-7f34-f231-2be38fd8faff@sapo.pt>

?s 17:11 de 11/12/2022, akshay kulkarni escreveu:
> Dear members,
>                              I am a stock trader and using R for my research. I am monitoring stock prices in real time. I have the following code:
> 
>> if (sock price q, breaches a certain value Q) { expr1; expr2; expr3}
> 
> THe point is, expr1,expr2,expr3 should execute only once, i.e when q breaches Q. I thought of something like this:
> 
>> if( q >= Q ) { expr1; expr2; expr3;}
> 
> But expressions keep repeating as long as q >= Q, NOT when q breaches Q for the first time. I did some research on myself and came up with this:
> 
>> f <- function() {expr1; expr2; expr3; j <<- j + 1}
>> j <- 1; counter[[j]] <- 1;
>> if ((q >= Q)  && length(counter) == 1) {f}
> 
> I just want your help to know whether it is logically right or not. ARe not there any other possibility other than using the superassignment operator?
> 
> Also, any way how to remember when the real time price q, breaches a value Q, for the first time ( the price may come back to Q again afterwards) ?
> 
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

Use environments. You will assign to a variable living in a special 
place, protected from the rest of the code, that you can access any time 
you want.
Something like the following.



f <- function(envir) {expr1; expr2; expr3; envir$j <- envir$j + 1L}

e <- new.env()
e$j <- 1L
# do you need counter for something else?
# if not delete these two lines
counter <- list()
counter[[e$j]] <- 1L
# this seems to be all you need, not counter
if ((q >= Q)  && e$j == 1L) {f(e)}



Hope this helps,

Rui Barradas


From L@urentRHe|p @end|ng |rom |ree@|r  Sun Dec 11 18:35:44 2022
From: L@urentRHe|p @end|ng |rom |ree@|r (Laurent Rhelp)
Date: Sun, 11 Dec 2022 18:35:44 +0100
Subject: [R] 
 lattice: how to use a log scale on the x-axis with the bwplot
 function
In-Reply-To: <CADfFDC7QjzgALFdR4tyBdaBVTMbSqh17Xrd1EpVXEk=VcvN=oQ@mail.gmail.com>
References: <b430486e-3ef3-48bd-beae-a2e528aa6950@free.fr>
 <CADfFDC5e6zR44HjAG_sV90jkyH2=LkuwogyHFQVHOZqknYn0wQ@mail.gmail.com>
 <13b1f87b-cce5-6421-768f-22c90e25289a@free.fr>
 <CADfFDC7QjzgALFdR4tyBdaBVTMbSqh17Xrd1EpVXEk=VcvN=oQ@mail.gmail.com>
Message-ID: <b223f88d-18f6-411e-842f-938f11791aa5@free.fr>

Excellent, it works.

But, may you please explain me how xyplot knows that it has to apply 
panel.bwplot on every groups according to the groups factor ? Because 
there is only one panel. I introduced the groups argument in order to 
apply the bwplot function only on the values of every group.


Le 11/12/2022 ? 17:48, Deepayan Sarkar a ?crit?:
> On Sun, Dec 11, 2022 at 2:33 PM Laurent Rhelp <LaurentRHelp at free.fr> wrote:
>> I understand the idea but I did not succeed.
>>
>> Here is what I tried:
>>
>> ## 1.    middles of classes calculation
>>
>> m <- tapply(DF$x, groups, mean)
>>
>> ## 2.     create a new factor columns with the levels deduced from
>> ##         the values of the middles of the classes
>> ##
>>
>> DF$m <- DF$groups
>> levels(DF$m) <- as.character(m)
>> DF$m <- as.numeric(levels(DF$m))[DF$m]
>>
>> ## 3. I verify with xyplot
>>
>> xyplot(   y ~ m
>>             , type = "p"
>>             , data=DF
>>             , scales = list(
>>               y = list(log=T)
>>               , x = list(log=T)
>>
>>             )
>> )
>> ## 4. I use the panel.groups and panel.bwplot to display the boxplots
>> without success
>>
>> xyplot(   y ~ m
>>             , groups = groups
>>             , type = "p"
>>             , data=DF
>>             , scales = list(
>>               y = list(log=T)
>>               , x = list(log=T)
>>               , panel = panel.superpose
>>               ,  panel.groups=function(x,y, group.number,...){
>>                 panel.xyplot(x,y,...)
>>                 panel.bwplot(x,y,...)
>>               }
>>               , horizontal = FALSE
>>               , box.width = .0001
>>             )
>> )
> You have a typo here: x = list(log=T) should be followed by a
> close-paren to complete scales.
>
> But I don't understand from your specification why you need groups and
> panel.superpose etc. What is wrong with
>
> xyplot( y ~ m
>       ## , groups = groups # why?
>       , data=DF
>       , scales = list(
>             y = list(log=T)
>           , x = list(log=T)
>         )
>       , panel = panel.bwplot
>       , horizontal = FALSE
>       , box.width = .0001
>         )
>
> ?
>
> And sorry for my wrong calculation of m earlier, but you can simplify
> your version to
>
> m <- tapply(DF$x, groups, mean)
> DF$m <- as.vector(m[DF$groups])
>
> Best,
> -Deepayan
>
>>
>> thx
>>
>>
>>
>> Le 10/12/2022 ? 17:02, Deepayan Sarkar a ?crit :
>>> Log-scales for the "factor" variable in bwplot() is not allowed.
>>>
>>> You could, however, use the panel function panel.bwplot() with
>>> xyplot(num ~ num). The potential problem with that is the box widths,
>>> which panel.bwplot() will not know how to compute.
>>>
>>> See if the following gives you a reasonable starting point:
>>>
>>> DF <- within(DF, m <- tapply(y, groups, mean))
>>> xyplot(y ~ m, DF, scales = list(log = TRUE),
>>>          panel = panel.bwplot, horizontal = FALSE,
>>>          box.width = .0001)
>>>
>>> Best,
>>> -Deepayan
>>>
>>> On Sat, Dec 10, 2022 at 7:46 PM Laurent Rhelp <LaurentRHelp at free.fr> wrote:
>>>> Dear R-Help list,
>>>>
>>>>       I would like to use bwplot from the lattice package with a log scale
>>>> both on
>>>> the x-axis and the y-axis but I do not know how to do that because I do
>>>> not know
>>>> how to change the factor x-axis in a numeric x-axis.
>>>>
>>>>     Here is my example:
>>>>
>>>>
>>>> library(lattice)
>>>>
>>>> # the mock data
>>>> y <- runif(100000,min=0, max=500)
>>>> x <- seq(0,500,length=length(y))
>>>> # I cut the x variable to create a factor variable in order to calculate
>>>> the boxes
>>>> groups <- cut(x,10,ordered_result = TRUE)
>>>> # creating the dataframe for the lattice functions
>>>> DF <- data.frame( x= x , y = y, groups = groups)
>>>>
>>>>
>>>> ## ok for xyplot
>>>> xyplot(   y ~ x
>>>>              , data=DF
>>>>              , scales = list(
>>>>                y = list(log=T)
>>>>                , x = list(log=T)
>>>>
>>>>              )
>>>> )
>>>>
>>>> ## ok for bwplot with the log scale for the y-axis
>>>> bwplot( y ~ groups
>>>>              , data=DF
>>>>              , scales = list(
>>>>                y = list(log=T)
>>>>                #     , x = list(log=T)
>>>>
>>>>              )
>>>> )
>>>>
>>>>
>>>>
>>>> ## Non ok for bwplot with the log scale for the x-axis
>>>> bwplot( y ~ groups
>>>>            , data=DF
>>>>            , scales = list(
>>>>                  y = list(log=T)
>>>>                , x = list(log=T)
>>>>
>>>>            )
>>>> )
>>>> which gives an error because the x-axis is a factor, I would like to
>>>> replace it
>>>> for the display by the meddle of every class for example and put a log
>>>> scale on the x-axis.
>>>>
>>>> Thank you for your help
>>>> Best regards
>>>> Laurent
>>>>
>>>>
>>>>
>>>> --
>>>> Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
>>>> www.avast.com
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>
>>
>> --
>> Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
>> www.avast.com


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sun Dec 11 18:41:28 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sun, 11 Dec 2022 17:41:28 +0000
Subject: [R] remembering the state of an action in R....
In-Reply-To: <9ab4aa8b-be47-7f34-f231-2be38fd8faff@sapo.pt>
References: <PU4P216MB156881546719112711AA26F7C81E9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <9ab4aa8b-be47-7f34-f231-2be38fd8faff@sapo.pt>
Message-ID: <ef8d4197-18c6-d79a-7941-fee0f9785f55@sapo.pt>

?s 17:28 de 11/12/2022, Rui Barradas escreveu:
> ?s 17:11 de 11/12/2022, akshay kulkarni escreveu:
>> Dear members,
>> ???????????????????????????? I am a stock trader and using R for my 
>> research. I am monitoring stock prices in real time. I have the 
>> following code:
>>
>>> if (sock price q, breaches a certain value Q) { expr1; expr2; expr3}
>>
>> THe point is, expr1,expr2,expr3 should execute only once, i.e when q 
>> breaches Q. I thought of something like this:
>>
>>> if( q >= Q ) { expr1; expr2; expr3;}
>>
>> But expressions keep repeating as long as q >= Q, NOT when q breaches 
>> Q for the first time. I did some research on myself and came up with 
>> this:
>>
>>> f <- function() {expr1; expr2; expr3; j <<- j + 1}
>>> j <- 1; counter[[j]] <- 1;
>>> if ((q >= Q)? && length(counter) == 1) {f}
>>
>> I just want your help to know whether it is logically right or not. 
>> ARe not there any other possibility other than using the 
>> superassignment operator?
>>
>> Also, any way how to remember when the real time price q, breaches a 
>> value Q, for the first time ( the price may come back to Q again 
>> afterwards) ?
>>
>> THanking you,
>> Yours sincerely,
>> AKSHAY M KULKARNI
>>
>> ????[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> Hello,
> 
> Use environments. You will assign to a variable living in a special 
> place, protected from the rest of the code, that you can access any time 
> you want.
> Something like the following.
> 
> 
> 
> f <- function(envir) {expr1; expr2; expr3; envir$j <- envir$j + 1L}
> 
> e <- new.env()
> e$j <- 1L
> # do you need counter for something else?
> # if not delete these two lines
> counter <- list()
> counter[[e$j]] <- 1L
> # this seems to be all you need, not counter
> if ((q >= Q)? && e$j == 1L) {f(e)}
> 
> 
> 
> Hope this helps,
> 
> Rui Barradas
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

Or with a counter.


f <- function(envir) {
   envir$counter <- envir$counter + 1L
   x <- pi
   x
}

q <- 10
Q <- 5
e <- new.env()
e$counter <- 0L
#
if ((q >= Q)  && e$counter == 0L) {
   print(f(e))
}
#> [1] 3.141593

if ((q >= Q)  && e$counter == 0L) {
   print(f(e))
} else message("it worked!")
#> it worked!


Hope this helps,

Rui Barradas


From @k@h@y_e4 @end|ng |rom hotm@||@com  Sun Dec 11 18:46:23 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sun, 11 Dec 2022 17:46:23 +0000
Subject: [R] remembering the state of an action in R....
In-Reply-To: <9ab4aa8b-be47-7f34-f231-2be38fd8faff@sapo.pt>
References: <PU4P216MB156881546719112711AA26F7C81E9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <9ab4aa8b-be47-7f34-f231-2be38fd8faff@sapo.pt>
Message-ID: <PU4P216MB1568544B311C3084D6892900C81E9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Rui,
                 Thanks for your reply....your reply covers the first part of my question. What about the second part? i.e remembering the state when the price q breaches Q? Will some thing like this work:

f <- function(envir) {expr1; expr2; expr3; envir$j <- envir$j + 1L}

e <- new.env()
e$j <- 1L
# do you need counter for something else?
# if not delete these two lines
counter <- list()
counter[[e$j]] <- 1L
# this seems to be all you need, not counter
if ((q >= Q)  && e$j == 1L) {f(e); C1 <- "the price Q has been breached!"}

if(C1 != "the price Q has been breached!") { do something }

ANy other method?

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI



________________________________
From: Rui Barradas <ruipbarradas at sapo.pt>
Sent: Sunday, December 11, 2022 10:58 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
Subject: Re: [R] remembering the state of an action in R....

?s 17:11 de 11/12/2022, akshay kulkarni escreveu:
> Dear members,
>                              I am a stock trader and using R for my research. I am monitoring stock prices in real time. I have the following code:
>
>> if (sock price q, breaches a certain value Q) { expr1; expr2; expr3}
>
> THe point is, expr1,expr2,expr3 should execute only once, i.e when q breaches Q. I thought of something like this:
>
>> if( q >= Q ) { expr1; expr2; expr3;}
>
> But expressions keep repeating as long as q >= Q, NOT when q breaches Q for the first time. I did some research on myself and came up with this:
>
>> f <- function() {expr1; expr2; expr3; j <<- j + 1}
>> j <- 1; counter[[j]] <- 1;
>> if ((q >= Q)  && length(counter) == 1) {f}
>
> I just want your help to know whether it is logically right or not. ARe not there any other possibility other than using the superassignment operator?
>
> Also, any way how to remember when the real time price q, breaches a value Q, for the first time ( the price may come back to Q again afterwards) ?
>
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

Use environments. You will assign to a variable living in a special
place, protected from the rest of the code, that you can access any time
you want.
Something like the following.



f <- function(envir) {expr1; expr2; expr3; envir$j <- envir$j + 1L}

e <- new.env()
e$j <- 1L
# do you need counter for something else?
# if not delete these two lines
counter <- list()
counter[[e$j]] <- 1L
# this seems to be all you need, not counter
if ((q >= Q)  && e$j == 1L) {f(e)}



Hope this helps,

Rui Barradas


	[[alternative HTML version deleted]]


From deep@y@n@@@rk@r @end|ng |rom gm@||@com  Sun Dec 11 18:53:26 2022
From: deep@y@n@@@rk@r @end|ng |rom gm@||@com (Deepayan Sarkar)
Date: Sun, 11 Dec 2022 23:23:26 +0530
Subject: [R] 
 lattice: how to use a log scale on the x-axis with the bwplot
 function
In-Reply-To: <b223f88d-18f6-411e-842f-938f11791aa5@free.fr>
References: <b430486e-3ef3-48bd-beae-a2e528aa6950@free.fr>
 <CADfFDC5e6zR44HjAG_sV90jkyH2=LkuwogyHFQVHOZqknYn0wQ@mail.gmail.com>
 <13b1f87b-cce5-6421-768f-22c90e25289a@free.fr>
 <CADfFDC7QjzgALFdR4tyBdaBVTMbSqh17Xrd1EpVXEk=VcvN=oQ@mail.gmail.com>
 <b223f88d-18f6-411e-842f-938f11791aa5@free.fr>
Message-ID: <CADfFDC4p+_PqTq++2J1ycUjyg5eBz+kR2qVhSRxAmB=gegpr-A@mail.gmail.com>

On Sun, Dec 11, 2022 at 11:05 PM Laurent Rhelp <LaurentRHelp at free.fr> wrote:
>
> Excellent, it works.
>
> But, may you please explain me how xyplot knows that it has to apply
> panel.bwplot on every groups according to the groups factor ? Because
> there is only one panel. I introduced the groups argument in order to
> apply the bwplot function only on the values of every group.

xyplot() doesn't know that, but panel.bwplot() does. It chooses one of
the variables as the grouping variable (depending on
horizontal=TRUE|FALSE); see ?panel.bwplot.

Best,
-Deepayan

>
>
> Le 11/12/2022 ? 17:48, Deepayan Sarkar a ?crit :
> > On Sun, Dec 11, 2022 at 2:33 PM Laurent Rhelp <LaurentRHelp at free.fr> wrote:
> >> I understand the idea but I did not succeed.
> >>
> >> Here is what I tried:
> >>
> >> ## 1.    middles of classes calculation
> >>
> >> m <- tapply(DF$x, groups, mean)
> >>
> >> ## 2.     create a new factor columns with the levels deduced from
> >> ##         the values of the middles of the classes
> >> ##
> >>
> >> DF$m <- DF$groups
> >> levels(DF$m) <- as.character(m)
> >> DF$m <- as.numeric(levels(DF$m))[DF$m]
> >>
> >> ## 3. I verify with xyplot
> >>
> >> xyplot(   y ~ m
> >>             , type = "p"
> >>             , data=DF
> >>             , scales = list(
> >>               y = list(log=T)
> >>               , x = list(log=T)
> >>
> >>             )
> >> )
> >> ## 4. I use the panel.groups and panel.bwplot to display the boxplots
> >> without success
> >>
> >> xyplot(   y ~ m
> >>             , groups = groups
> >>             , type = "p"
> >>             , data=DF
> >>             , scales = list(
> >>               y = list(log=T)
> >>               , x = list(log=T)
> >>               , panel = panel.superpose
> >>               ,  panel.groups=function(x,y, group.number,...){
> >>                 panel.xyplot(x,y,...)
> >>                 panel.bwplot(x,y,...)
> >>               }
> >>               , horizontal = FALSE
> >>               , box.width = .0001
> >>             )
> >> )
> > You have a typo here: x = list(log=T) should be followed by a
> > close-paren to complete scales.
> >
> > But I don't understand from your specification why you need groups and
> > panel.superpose etc. What is wrong with
> >
> > xyplot( y ~ m
> >       ## , groups = groups # why?
> >       , data=DF
> >       , scales = list(
> >             y = list(log=T)
> >           , x = list(log=T)
> >         )
> >       , panel = panel.bwplot
> >       , horizontal = FALSE
> >       , box.width = .0001
> >         )
> >
> > ?
> >
> > And sorry for my wrong calculation of m earlier, but you can simplify
> > your version to
> >
> > m <- tapply(DF$x, groups, mean)
> > DF$m <- as.vector(m[DF$groups])
> >
> > Best,
> > -Deepayan
> >
> >>
> >> thx
> >>
> >>
> >>
> >> Le 10/12/2022 ? 17:02, Deepayan Sarkar a ?crit :
> >>> Log-scales for the "factor" variable in bwplot() is not allowed.
> >>>
> >>> You could, however, use the panel function panel.bwplot() with
> >>> xyplot(num ~ num). The potential problem with that is the box widths,
> >>> which panel.bwplot() will not know how to compute.
> >>>
> >>> See if the following gives you a reasonable starting point:
> >>>
> >>> DF <- within(DF, m <- tapply(y, groups, mean))
> >>> xyplot(y ~ m, DF, scales = list(log = TRUE),
> >>>          panel = panel.bwplot, horizontal = FALSE,
> >>>          box.width = .0001)
> >>>
> >>> Best,
> >>> -Deepayan
> >>>
> >>> On Sat, Dec 10, 2022 at 7:46 PM Laurent Rhelp <LaurentRHelp at free.fr> wrote:
> >>>> Dear R-Help list,
> >>>>
> >>>>       I would like to use bwplot from the lattice package with a log scale
> >>>> both on
> >>>> the x-axis and the y-axis but I do not know how to do that because I do
> >>>> not know
> >>>> how to change the factor x-axis in a numeric x-axis.
> >>>>
> >>>>     Here is my example:
> >>>>
> >>>>
> >>>> library(lattice)
> >>>>
> >>>> # the mock data
> >>>> y <- runif(100000,min=0, max=500)
> >>>> x <- seq(0,500,length=length(y))
> >>>> # I cut the x variable to create a factor variable in order to calculate
> >>>> the boxes
> >>>> groups <- cut(x,10,ordered_result = TRUE)
> >>>> # creating the dataframe for the lattice functions
> >>>> DF <- data.frame( x= x , y = y, groups = groups)
> >>>>
> >>>>
> >>>> ## ok for xyplot
> >>>> xyplot(   y ~ x
> >>>>              , data=DF
> >>>>              , scales = list(
> >>>>                y = list(log=T)
> >>>>                , x = list(log=T)
> >>>>
> >>>>              )
> >>>> )
> >>>>
> >>>> ## ok for bwplot with the log scale for the y-axis
> >>>> bwplot( y ~ groups
> >>>>              , data=DF
> >>>>              , scales = list(
> >>>>                y = list(log=T)
> >>>>                #     , x = list(log=T)
> >>>>
> >>>>              )
> >>>> )
> >>>>
> >>>>
> >>>>
> >>>> ## Non ok for bwplot with the log scale for the x-axis
> >>>> bwplot( y ~ groups
> >>>>            , data=DF
> >>>>            , scales = list(
> >>>>                  y = list(log=T)
> >>>>                , x = list(log=T)
> >>>>
> >>>>            )
> >>>> )
> >>>> which gives an error because the x-axis is a factor, I would like to
> >>>> replace it
> >>>> for the display by the meddle of every class for example and put a log
> >>>> scale on the x-axis.
> >>>>
> >>>> Thank you for your help
> >>>> Best regards
> >>>> Laurent
> >>>>
> >>>>
> >>>>
> >>>> --
> >>>> Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
> >>>> www.avast.com
> >>>>
> >>>> ______________________________________________
> >>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >>>> and provide commented, minimal, self-contained, reproducible code.
> >>
> >>
> >> --
> >> Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
> >> www.avast.com
>
>


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sun Dec 11 18:57:31 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sun, 11 Dec 2022 17:57:31 +0000
Subject: [R] remembering the state of an action in R....
In-Reply-To: <PU4P216MB1568544B311C3084D6892900C81E9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB156881546719112711AA26F7C81E9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <9ab4aa8b-be47-7f34-f231-2be38fd8faff@sapo.pt>
 <PU4P216MB1568544B311C3084D6892900C81E9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <7db86a6f-b02c-b318-5ec1-14950f25520c@sapo.pt>

?s 17:46 de 11/12/2022, akshay kulkarni escreveu:
> Dear Rui,
>                   Thanks for your reply....your reply covers the first part of my question. What about the second part? i.e remembering the state when the price q breaches Q? Will some thing like this work:
> 
> f <- function(envir) {expr1; expr2; expr3; envir$j <- envir$j + 1L}
> 
> e <- new.env()
> e$j <- 1L
> # do you need counter for something else?
> # if not delete these two lines
> counter <- list()
> counter[[e$j]] <- 1L
> # this seems to be all you need, not counter
> if ((q >= Q)  && e$j == 1L) {f(e); C1 <- "the price Q has been breached!"}
> 
> if(C1 != "the price Q has been breached!") { do something }
> 
> ANy other method?
> 
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
> 
> 
> 
> ________________________________
> From: Rui Barradas <ruipbarradas at sapo.pt>
> Sent: Sunday, December 11, 2022 10:58 PM
> To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
> Subject: Re: [R] remembering the state of an action in R....
> 
> ?s 17:11 de 11/12/2022, akshay kulkarni escreveu:
>> Dear members,
>>                               I am a stock trader and using R for my research. I am monitoring stock prices in real time. I have the following code:
>>
>>> if (sock price q, breaches a certain value Q) { expr1; expr2; expr3}
>>
>> THe point is, expr1,expr2,expr3 should execute only once, i.e when q breaches Q. I thought of something like this:
>>
>>> if( q >= Q ) { expr1; expr2; expr3;}
>>
>> But expressions keep repeating as long as q >= Q, NOT when q breaches Q for the first time. I did some research on myself and came up with this:
>>
>>> f <- function() {expr1; expr2; expr3; j <<- j + 1}
>>> j <- 1; counter[[j]] <- 1;
>>> if ((q >= Q)  && length(counter) == 1) {f}
>>
>> I just want your help to know whether it is logically right or not. ARe not there any other possibility other than using the superassignment operator?
>>
>> Also, any way how to remember when the real time price q, breaches a value Q, for the first time ( the price may come back to Q again afterwards) ?
>>
>> THanking you,
>> Yours sincerely,
>> AKSHAY M KULKARNI
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> Hello,
> 
> Use environments. You will assign to a variable living in a special
> place, protected from the rest of the code, that you can access any time
> you want.
> Something like the following.
> 
> 
> 
> f <- function(envir) {expr1; expr2; expr3; envir$j <- envir$j + 1L}
> 
> e <- new.env()
> e$j <- 1L
> # do you need counter for something else?
> # if not delete these two lines
> counter <- list()
> counter[[e$j]] <- 1L
> # this seems to be all you need, not counter
> if ((q >= Q)  && e$j == 1L) {f(e)}
> 
> 
> 
> Hope this helps,
> 
> Rui Barradas
> 
> 
Hello,

Envirnments are still the solution for this. You can hold another 
variable in the environment passed to f.


f <- function(real_time_price, Q_breach = Q, envir) {
   envir$counter <- envir$counter + 1L
   envir$breached <- "the price Q has been breached"
   x <- pi
   x
}

q <- 10
Q <- 5
e <- new.env()
e$counter <- 0L
# this seems to be all you need, not counter
if ((q >= Q)  && e$counter == 0L) {
   print(f(q, Q, envir = e))
}

if(e$breached != "the price Q has been breached!") {
   message("do something...")
}


Hope this helps,

Rui Barradas


From L@urentRHe|p @end|ng |rom |ree@|r  Sun Dec 11 19:02:22 2022
From: L@urentRHe|p @end|ng |rom |ree@|r (Laurent Rhelp)
Date: Sun, 11 Dec 2022 19:02:22 +0100
Subject: [R] 
 lattice: how to use a log scale on the x-axis with the bwplot
 function
In-Reply-To: <CADfFDC4p+_PqTq++2J1ycUjyg5eBz+kR2qVhSRxAmB=gegpr-A@mail.gmail.com>
References: <b430486e-3ef3-48bd-beae-a2e528aa6950@free.fr>
 <CADfFDC5e6zR44HjAG_sV90jkyH2=LkuwogyHFQVHOZqknYn0wQ@mail.gmail.com>
 <13b1f87b-cce5-6421-768f-22c90e25289a@free.fr>
 <CADfFDC7QjzgALFdR4tyBdaBVTMbSqh17Xrd1EpVXEk=VcvN=oQ@mail.gmail.com>
 <b223f88d-18f6-411e-842f-938f11791aa5@free.fr>
 <CADfFDC4p+_PqTq++2J1ycUjyg5eBz+kR2qVhSRxAmB=gegpr-A@mail.gmail.com>
Message-ID: <2239ee44-7291-0434-a943-644c1ef47bfa@free.fr>

Thank you very much Deepayan, I will see the help of panel.bwplot.
Best regards
L.


Le 11/12/2022 ? 18:53, Deepayan Sarkar a ?crit?:
> On Sun, Dec 11, 2022 at 11:05 PM Laurent Rhelp <LaurentRHelp at free.fr> wrote:
>> Excellent, it works.
>>
>> But, may you please explain me how xyplot knows that it has to apply
>> panel.bwplot on every groups according to the groups factor ? Because
>> there is only one panel. I introduced the groups argument in order to
>> apply the bwplot function only on the values of every group.
> xyplot() doesn't know that, but panel.bwplot() does. It chooses one of
> the variables as the grouping variable (depending on
> horizontal=TRUE|FALSE); see ?panel.bwplot.
>
> Best,
> -Deepayan
>
>>
>> Le 11/12/2022 ? 17:48, Deepayan Sarkar a ?crit :
>>> On Sun, Dec 11, 2022 at 2:33 PM Laurent Rhelp <LaurentRHelp at free.fr> wrote:
>>>> I understand the idea but I did not succeed.
>>>>
>>>> Here is what I tried:
>>>>
>>>> ## 1.    middles of classes calculation
>>>>
>>>> m <- tapply(DF$x, groups, mean)
>>>>
>>>> ## 2.     create a new factor columns with the levels deduced from
>>>> ##         the values of the middles of the classes
>>>> ##
>>>>
>>>> DF$m <- DF$groups
>>>> levels(DF$m) <- as.character(m)
>>>> DF$m <- as.numeric(levels(DF$m))[DF$m]
>>>>
>>>> ## 3. I verify with xyplot
>>>>
>>>> xyplot(   y ~ m
>>>>              , type = "p"
>>>>              , data=DF
>>>>              , scales = list(
>>>>                y = list(log=T)
>>>>                , x = list(log=T)
>>>>
>>>>              )
>>>> )
>>>> ## 4. I use the panel.groups and panel.bwplot to display the boxplots
>>>> without success
>>>>
>>>> xyplot(   y ~ m
>>>>              , groups = groups
>>>>              , type = "p"
>>>>              , data=DF
>>>>              , scales = list(
>>>>                y = list(log=T)
>>>>                , x = list(log=T)
>>>>                , panel = panel.superpose
>>>>                ,  panel.groups=function(x,y, group.number,...){
>>>>                  panel.xyplot(x,y,...)
>>>>                  panel.bwplot(x,y,...)
>>>>                }
>>>>                , horizontal = FALSE
>>>>                , box.width = .0001
>>>>              )
>>>> )
>>> You have a typo here: x = list(log=T) should be followed by a
>>> close-paren to complete scales.
>>>
>>> But I don't understand from your specification why you need groups and
>>> panel.superpose etc. What is wrong with
>>>
>>> xyplot( y ~ m
>>>        ## , groups = groups # why?
>>>        , data=DF
>>>        , scales = list(
>>>              y = list(log=T)
>>>            , x = list(log=T)
>>>          )
>>>        , panel = panel.bwplot
>>>        , horizontal = FALSE
>>>        , box.width = .0001
>>>          )
>>>
>>> ?
>>>
>>> And sorry for my wrong calculation of m earlier, but you can simplify
>>> your version to
>>>
>>> m <- tapply(DF$x, groups, mean)
>>> DF$m <- as.vector(m[DF$groups])
>>>
>>> Best,
>>> -Deepayan
>>>
>>>> thx
>>>>
>>>>
>>>>
>>>> Le 10/12/2022 ? 17:02, Deepayan Sarkar a ?crit :
>>>>> Log-scales for the "factor" variable in bwplot() is not allowed.
>>>>>
>>>>> You could, however, use the panel function panel.bwplot() with
>>>>> xyplot(num ~ num). The potential problem with that is the box widths,
>>>>> which panel.bwplot() will not know how to compute.
>>>>>
>>>>> See if the following gives you a reasonable starting point:
>>>>>
>>>>> DF <- within(DF, m <- tapply(y, groups, mean))
>>>>> xyplot(y ~ m, DF, scales = list(log = TRUE),
>>>>>           panel = panel.bwplot, horizontal = FALSE,
>>>>>           box.width = .0001)
>>>>>
>>>>> Best,
>>>>> -Deepayan
>>>>>
>>>>> On Sat, Dec 10, 2022 at 7:46 PM Laurent Rhelp <LaurentRHelp at free.fr> wrote:
>>>>>> Dear R-Help list,
>>>>>>
>>>>>>        I would like to use bwplot from the lattice package with a log scale
>>>>>> both on
>>>>>> the x-axis and the y-axis but I do not know how to do that because I do
>>>>>> not know
>>>>>> how to change the factor x-axis in a numeric x-axis.
>>>>>>
>>>>>>      Here is my example:
>>>>>>
>>>>>>
>>>>>> library(lattice)
>>>>>>
>>>>>> # the mock data
>>>>>> y <- runif(100000,min=0, max=500)
>>>>>> x <- seq(0,500,length=length(y))
>>>>>> # I cut the x variable to create a factor variable in order to calculate
>>>>>> the boxes
>>>>>> groups <- cut(x,10,ordered_result = TRUE)
>>>>>> # creating the dataframe for the lattice functions
>>>>>> DF <- data.frame( x= x , y = y, groups = groups)
>>>>>>
>>>>>>
>>>>>> ## ok for xyplot
>>>>>> xyplot(   y ~ x
>>>>>>               , data=DF
>>>>>>               , scales = list(
>>>>>>                 y = list(log=T)
>>>>>>                 , x = list(log=T)
>>>>>>
>>>>>>               )
>>>>>> )
>>>>>>
>>>>>> ## ok for bwplot with the log scale for the y-axis
>>>>>> bwplot( y ~ groups
>>>>>>               , data=DF
>>>>>>               , scales = list(
>>>>>>                 y = list(log=T)
>>>>>>                 #     , x = list(log=T)
>>>>>>
>>>>>>               )
>>>>>> )
>>>>>>
>>>>>>
>>>>>>
>>>>>> ## Non ok for bwplot with the log scale for the x-axis
>>>>>> bwplot( y ~ groups
>>>>>>             , data=DF
>>>>>>             , scales = list(
>>>>>>                   y = list(log=T)
>>>>>>                 , x = list(log=T)
>>>>>>
>>>>>>             )
>>>>>> )
>>>>>> which gives an error because the x-axis is a factor, I would like to
>>>>>> replace it
>>>>>> for the display by the meddle of every class for example and put a log
>>>>>> scale on the x-axis.
>>>>>>
>>>>>> Thank you for your help
>>>>>> Best regards
>>>>>> Laurent
>>>>>>
>>>>>>
>>>>>>
>>>>>> --
>>>>>> Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
>>>>>> www.avast.com
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>> --
>>>> Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
>>>> www.avast.com
>>


From @k@h@y_e4 @end|ng |rom hotm@||@com  Sun Dec 11 19:02:40 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sun, 11 Dec 2022 18:02:40 +0000
Subject: [R] remembering the state of an action in R....
In-Reply-To: <7db86a6f-b02c-b318-5ec1-14950f25520c@sapo.pt>
References: <PU4P216MB156881546719112711AA26F7C81E9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <9ab4aa8b-be47-7f34-f231-2be38fd8faff@sapo.pt>
 <PU4P216MB1568544B311C3084D6892900C81E9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <7db86a6f-b02c-b318-5ec1-14950f25520c@sapo.pt>
Message-ID: <PU4P216MB156804AD0A91E22C25221196C81E9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Rui,
                 Thanks a lot..

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Rui Barradas <ruipbarradas at sapo.pt>
Sent: Sunday, December 11, 2022 11:27 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
Subject: Re: [R] remembering the state of an action in R....

?s 17:46 de 11/12/2022, akshay kulkarni escreveu:
> Dear Rui,
>                   Thanks for your reply....your reply covers the first part of my question. What about the second part? i.e remembering the state when the price q breaches Q? Will some thing like this work:
>
> f <- function(envir) {expr1; expr2; expr3; envir$j <- envir$j + 1L}
>
> e <- new.env()
> e$j <- 1L
> # do you need counter for something else?
> # if not delete these two lines
> counter <- list()
> counter[[e$j]] <- 1L
> # this seems to be all you need, not counter
> if ((q >= Q)  && e$j == 1L) {f(e); C1 <- "the price Q has been breached!"}
>
> if(C1 != "the price Q has been breached!") { do something }
>
> ANy other method?
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>
>
> ________________________________
> From: Rui Barradas <ruipbarradas at sapo.pt>
> Sent: Sunday, December 11, 2022 10:58 PM
> To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
> Subject: Re: [R] remembering the state of an action in R....
>
> ?s 17:11 de 11/12/2022, akshay kulkarni escreveu:
>> Dear members,
>>                               I am a stock trader and using R for my research. I am monitoring stock prices in real time. I have the following code:
>>
>>> if (sock price q, breaches a certain value Q) { expr1; expr2; expr3}
>>
>> THe point is, expr1,expr2,expr3 should execute only once, i.e when q breaches Q. I thought of something like this:
>>
>>> if( q >= Q ) { expr1; expr2; expr3;}
>>
>> But expressions keep repeating as long as q >= Q, NOT when q breaches Q for the first time. I did some research on myself and came up with this:
>>
>>> f <- function() {expr1; expr2; expr3; j <<- j + 1}
>>> j <- 1; counter[[j]] <- 1;
>>> if ((q >= Q)  && length(counter) == 1) {f}
>>
>> I just want your help to know whether it is logically right or not. ARe not there any other possibility other than using the superassignment operator?
>>
>> Also, any way how to remember when the real time price q, breaches a value Q, for the first time ( the price may come back to Q again afterwards) ?
>>
>> THanking you,
>> Yours sincerely,
>> AKSHAY M KULKARNI
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> Hello,
>
> Use environments. You will assign to a variable living in a special
> place, protected from the rest of the code, that you can access any time
> you want.
> Something like the following.
>
>
>
> f <- function(envir) {expr1; expr2; expr3; envir$j <- envir$j + 1L}
>
> e <- new.env()
> e$j <- 1L
> # do you need counter for something else?
> # if not delete these two lines
> counter <- list()
> counter[[e$j]] <- 1L
> # this seems to be all you need, not counter
> if ((q >= Q)  && e$j == 1L) {f(e)}
>
>
>
> Hope this helps,
>
> Rui Barradas
>
>
Hello,

Envirnments are still the solution for this. You can hold another
variable in the environment passed to f.


f <- function(real_time_price, Q_breach = Q, envir) {
   envir$counter <- envir$counter + 1L
   envir$breached <- "the price Q has been breached"
   x <- pi
   x
}

q <- 10
Q <- 5
e <- new.env()
e$counter <- 0L
# this seems to be all you need, not counter
if ((q >= Q)  && e$counter == 0L) {
   print(f(q, Q, envir = e))
}

if(e$breached != "the price Q has been breached!") {
   message("do something...")
}


Hope this helps,

Rui Barradas


	[[alternative HTML version deleted]]


From rb@er @end|ng |rom @t@u@edu  Sun Dec 11 20:27:10 2022
From: rb@er @end|ng |rom @t@u@edu (Robert Baer)
Date: Sun, 11 Dec 2022 13:27:10 -0600
Subject: [R] Format printing with R
In-Reply-To: <8f0d2e61-a3cd-a485-ba25-7ed68182cb57@ntu.edu.tw>
References: <aa7ff442-3e7b-35b3-273a-569dfaa2cfae@ntu.edu.tw>
 <CAPcHnpSSEe0=Gio0MqZV1LOmFG=22qxUZmtLxdZHQoVonfCPcQ@mail.gmail.com>
 <75813398-2ce9-60ce-d7a5-c1224b648425@ntu.edu.tw>
 <20221122100852.7ae8c081@Tarkus>
 <8f0d2e61-a3cd-a485-ba25-7ed68182cb57@ntu.edu.tw>
Message-ID: <fd5338c9-98aa-8d95-2248-d14de3b8a968@atsu.edu>

And you will probably want to read the details of the? ?round help, so 
you understand how it handles 5 rounding.? It is a little more 
complicated than some of us learned in school.


On 11/22/2022 4:24 AM, Steven T. Yen wrote:
> Thanks to all. And yes, Ivan, round() did it:
>
> > dput(head(Mean))
> c(afactfem = 0.310796641158209, afactblk = 0.188030178893171,
> age = 45.3185794338312, nodiscfem = 0.506637018185968, discfem = 
> 0.493362981814032,
> notradgrol = 0.702915000493879)
> > dput(head(Std.dev))
> c(afactfem = 0.462819715443265, afactblk = 0.390736267472797,
> age = 16.3136348021933, nodiscfem = 0.499955948049025, discfem = 
> 0.499955948049025,
> notradgrol = 0.456974290933931)
> > round(cbind(Mean,Std.dev),2)[1:10,]
> ??????????? Mean Std.dev
> afactfem??? 0.31??? 0.46
> afactblk??? 0.19??? 0.39
> age??????? 45.32?? 16.31
> nodiscfem?? 0.51??? 0.50
> discfem???? 0.49??? 0.50
> notradgrol? 0.70??? 0.46
> tradgrol??? 0.30??? 0.46
> nofemnopol? 0.80??? 0.40
> femnopol??? 0.20??? 0.40
> nopreshurt? 0.66??? 0.47
>
> On 11/22/2022 3:08 PM, Ivan Krylov wrote:
>> On Tue, 22 Nov 2022 08:15:57 +0800
>> "Steven T. Yen" <styen at ntu.edu.tw> wrote:
>>
>>> Thanks to all, but no, signif() did not work:
>> It worked, just didn't do what you wanted it to do. I think you want
>> round(), not signif(). Some of your numbers (45.3185794) will be rounded
>> to 4 significant digits and others (0.0969999) will be rounded to 1
>> significant digit, but the number of decimal places will be 2.
>>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From derekog|e51 @end|ng |rom gm@||@com  Tue Dec 13 03:13:47 2022
From: derekog|e51 @end|ng |rom gm@||@com (Derek Ogle)
Date: Mon, 12 Dec 2022 20:13:47 -0600
Subject: [R] bgroup not rendering properly
Message-ID: <CAKKtRk8q+oMHjFaFib-BZmASJ+fimRwq5uvg+i79DJgnptzkDw@mail.gmail.com>

bgroup() from plotmath does not render properly for me. For example

plot(0,xlim=c(0,1),ylim=c(0,1))
text(0.3,0.5,expression(bgroup('(',atop(x,y),')')))
text(0.7,0.5,expression(group('(',atop(x,y),')')))

and

library(ggplot2)
ggplot(mtcars, aes(wt, mpg)) +
  annotate("text", x=2.5, y=25, label="bgroup('(',atop(x,y),')')",
parse=TRUE) +
  annotate("text", x=3.5, y=25, label="group('(',atop(x,y),')')",
parse=TRUE)

both show a proper (though ugly) result from group() (the second text() or
annotation()) but unrecognizable characters (rather than large parentheses)
from bgroup().

This problematic result occurred for me when using v4.2.2, but not when
using 4.2.0, 4.1.2, 4.1.0, or 4.0.5. My sessionInfo is further below.

I did ask this on stackoverflow
<https://stackoverflow.com/questions/74738827/bgroup-does-not-render-properly-on-ggplot>
where the resulting figures can be seen.


----
R version 4.2.2 (2022-10-31 ucrt)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 19044)

Matrix products: default

locale:
[1] LC_COLLATE=English_United States.utf8
[2] LC_CTYPE=English_United States.utf8
[3] LC_MONETARY=English_United States.utf8
[4] LC_NUMERIC=C
[5] LC_TIME=English_United States.utf8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] compiler_4.2.2 tools_4.2.2

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Tue Dec 13 09:38:29 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Tue, 13 Dec 2022 08:38:29 +0000
Subject: [R] bgroup not rendering properly
In-Reply-To: <CAKKtRk8q+oMHjFaFib-BZmASJ+fimRwq5uvg+i79DJgnptzkDw@mail.gmail.com>
References: <CAKKtRk8q+oMHjFaFib-BZmASJ+fimRwq5uvg+i79DJgnptzkDw@mail.gmail.com>
Message-ID: <e04cb6a2-abf2-4b1c-b9f4-55dcd9e359f8@sapo.pt>

?s 02:13 de 13/12/2022, Derek Ogle escreveu:
> bgroup() from plotmath does not render properly for me. For example
> 
> plot(0,xlim=c(0,1),ylim=c(0,1))
> text(0.3,0.5,expression(bgroup('(',atop(x,y),')')))
> text(0.7,0.5,expression(group('(',atop(x,y),')')))
> 
> and
> 
> library(ggplot2)
> ggplot(mtcars, aes(wt, mpg)) +
>    annotate("text", x=2.5, y=25, label="bgroup('(',atop(x,y),')')",
> parse=TRUE) +
>    annotate("text", x=3.5, y=25, label="group('(',atop(x,y),')')",
> parse=TRUE)
> 
> both show a proper (though ugly) result from group() (the second text() or
> annotation()) but unrecognizable characters (rather than large parentheses)
> from bgroup().
> 
> This problematic result occurred for me when using v4.2.2, but not when
> using 4.2.0, 4.1.2, 4.1.0, or 4.0.5. My sessionInfo is further below.
> 
> I did ask this on stackoverflow
> <https://stackoverflow.com/questions/74738827/bgroup-does-not-render-properly-on-ggplot>
> where the resulting figures can be seen.
> 
> 
> ----
> R version 4.2.2 (2022-10-31 ucrt)
> Platform: x86_64-w64-mingw32/x64 (64-bit)
> Running under: Windows 10 x64 (build 19044)
> 
> Matrix products: default
> 
> locale:
> [1] LC_COLLATE=English_United States.utf8
> [2] LC_CTYPE=English_United States.utf8
> [3] LC_MONETARY=English_United States.utf8
> [4] LC_NUMERIC=C
> [5] LC_TIME=English_United States.utf8
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
> 
> loaded via a namespace (and not attached):
> [1] compiler_4.2.2 tools_4.2.2
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

Hello,

I can confirm this behavior. ggplot 3.4.0. Works on R 4.2.0 and 4.2.1, 
doesn't work on R 4.2.2.
I left a comment to that SO question.



sessionInfo()
R version 4.2.0 (2022-04-22 ucrt)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 22621)

Matrix products: default

locale:
[1] LC_COLLATE=Portuguese_Portugal.utf8 
LC_CTYPE=Portuguese_Portugal.utf8
[3] LC_MONETARY=Portuguese_Portugal.utf8 LC_NUMERIC=C 

[5] LC_TIME=Portuguese_Portugal.utf8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] ggplot2_3.4.0

loaded via a namespace (and not attached):
  [1] fansi_1.0.3      withr_2.5.0      assertthat_0.2.1 dplyr_1.0.10
  [5] utf8_1.2.2       grid_4.2.0       R6_2.5.1         DBI_1.1.3
  [9] lifecycle_1.0.3  gtable_0.3.1     magrittr_2.0.3   scales_1.2.1
[13] pillar_1.8.1     rlang_1.0.6      cli_3.4.1        farver_2.1.1
[17] generics_0.1.3   vctrs_0.5.1      labeling_0.4.2   glue_1.6.2
[21] munsell_0.5.0    compiler_4.2.0   pkgconfig_2.0.3  colorspace_2.0-3
[25] tidyselect_1.2.0 tibble_3.1.8



Hope this helps,

Rui Barradas


From j@zh@o @end|ng |rom ye@h@net  Tue Dec 13 10:07:00 2022
From: j@zh@o @end|ng |rom ye@h@net (Jinsong Zhao)
Date: Tue, 13 Dec 2022 17:07:00 +0800
Subject: [R] bgroup not rendering properly
In-Reply-To: <CAKKtRk8q+oMHjFaFib-BZmASJ+fimRwq5uvg+i79DJgnptzkDw@mail.gmail.com>
References: <CAKKtRk8q+oMHjFaFib-BZmASJ+fimRwq5uvg+i79DJgnptzkDw@mail.gmail.com>
Message-ID: <6fa3a345-473d-53b2-d74a-5a1b4f5b5657@yeah.net>

I don

On 2022/12/13 10:13, Derek Ogle wrote:
> bgroup() from plotmath does not render properly for me. For example
>
> plot(0,xlim=c(0,1),ylim=c(0,1))
> text(0.3,0.5,expression(bgroup('(',atop(x,y),')')))
> text(0.7,0.5,expression(group('(',atop(x,y),')')))
>
> and
>
> library(ggplot2)
> ggplot(mtcars, aes(wt, mpg)) +
>    annotate("text", x=2.5, y=25, label="bgroup('(',atop(x,y),')')",
> parse=TRUE) +
>    annotate("text", x=3.5, y=25, label="group('(',atop(x,y),')')",
> parse=TRUE)
>
> both show a proper (though ugly) result from group() (the second text() or
> annotation()) but unrecognizable characters (rather than large parentheses)
> from bgroup().
>
> This problematic result occurred for me when using v4.2.2, but not when
> using 4.2.0, 4.1.2, 4.1.0, or 4.0.5. My sessionInfo is further below.
>
> I did ask this on stackoverflow
> <https://stackoverflow.com/questions/74738827/bgroup-does-not-render-properly-on-ggplot>
> where the resulting figures can be seen.
>
>
> ----
> R version 4.2.2 (2022-10-31 ucrt)
> Platform: x86_64-w64-mingw32/x64 (64-bit)
> Running under: Windows 10 x64 (build 19044)
>
> Matrix products: default
>
> locale:
> [1] LC_COLLATE=English_United States.utf8
> [2] LC_CTYPE=English_United States.utf8
> [3] LC_MONETARY=English_United States.utf8
> [4] LC_NUMERIC=C
> [5] LC_TIME=English_United States.utf8
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> loaded via a namespace (and not attached):
> [1] compiler_4.2.2 tools_4.2.2
I don't see any problem, especially when outputing the plot to a pdf file.

Best,
Jinsong


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Tue Dec 13 11:02:23 2022
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Tue, 13 Dec 2022 11:02:23 +0100
Subject: [R] bgroup not rendering properly
In-Reply-To: <6fa3a345-473d-53b2-d74a-5a1b4f5b5657@yeah.net>
References: <CAKKtRk8q+oMHjFaFib-BZmASJ+fimRwq5uvg+i79DJgnptzkDw@mail.gmail.com>
 <6fa3a345-473d-53b2-d74a-5a1b4f5b5657@yeah.net>
Message-ID: <25496.19887.320573.266495@stat.math.ethz.ch>

>>>>> Jinsong Zhao 
>>>>>     on Tue, 13 Dec 2022 17:07:00 +0800 writes:

    > I don

    >  On 2022/12/13 10:13, Derek Ogle wrote:
    >> bgroup() from plotmath does not render properly for
    >> me. For example
    >> 
    >> plot(0,xlim=c(0,1),ylim=c(0,1))
    >> text(0.3,0.5,expression(bgroup('(',atop(x,y),')')))
    >> text(0.7,0.5,expression(group('(',atop(x,y),')')))

Almost surely a  Windows-only problem i.e. bug,
See also the bug fixed yesterday, PR#18440,
https://bugs.r-project.org/show_bug.cgi?id=18440

Note that "rendering" of graphics strongly depends on your
graphics device (people no longer learn about nowadays).
Hence, use

   .Device
or
   dev.cur()

and report that along with your session info.

I bet that you will see that after

png("bgroup.png")  # or pdf("bgroup.pdf")
expression(bgroup('(',atop(x,y),')')
dev.off()

the resulting PNG or PDF will look fine,
even on Windows in R 4.2.2.

Martin


    >> 
    >> and
    >> 
    >> library(ggplot2) ggplot(mtcars, aes(wt, mpg)) +
    >> annotate("text", x=2.5, y=25,
    >> label="bgroup('(',atop(x,y),')')", parse=TRUE) +
    >> annotate("text", x=3.5, y=25,
    >> label="group('(',atop(x,y),')')", parse=TRUE)
    >> 
    >> both show a proper (though ugly) result from group() (the
    >> second text() or annotation()) but unrecognizable
    >> characters (rather than large parentheses) from bgroup().
    >> 
    >> This problematic result occurred for me when using
    >> v4.2.2, but not when using 4.2.0, 4.1.2, 4.1.0, or
    >> 4.0.5. My sessionInfo is further below.
    >> 
    >> I did ask this on stackoverflow
    >> <https://stackoverflow.com/questions/74738827/bgroup-does-not-render-properly-on-ggplot>
    >> where the resulting figures can be seen.
    >> 
    >> 
    >> ----
    >> R version 4.2.2 (2022-10-31 ucrt) Platform:
    >> x86_64-w64-mingw32/x64 (64-bit) Running under: Windows 10
    >> x64 (build 19044)
    >> 
    >> Matrix products: default
    >> 
    >> locale: [1] LC_COLLATE=English_United States.utf8 [2]
    >> LC_CTYPE=English_United States.utf8 [3]
    >> LC_MONETARY=English_United States.utf8 [4] LC_NUMERIC=C
    >> [5] LC_TIME=English_United States.utf8
    >> 
    >> attached base packages: [1] stats graphics grDevices
    >> utils datasets methods base
    >> 
    >> loaded via a namespace (and not attached): [1]
    >> compiler_4.2.2 tools_4.2.2
    > I don't see any problem, especially when outputing the
    > plot to a pdf file.

    > Best, Jinsong


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Tue Dec 13 11:55:01 2022
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Tue, 13 Dec 2022 11:55:01 +0100
Subject: [R] bgroup not rendering properly
In-Reply-To: <25496.19887.320573.266495@stat.math.ethz.ch>
References: <CAKKtRk8q+oMHjFaFib-BZmASJ+fimRwq5uvg+i79DJgnptzkDw@mail.gmail.com>
 <6fa3a345-473d-53b2-d74a-5a1b4f5b5657@yeah.net>
 <25496.19887.320573.266495@stat.math.ethz.ch>
Message-ID: <25496.23045.546200.518918@stat.math.ethz.ch>

>>>>> Martin Maechler 
>>>>>     on Tue, 13 Dec 2022 11:02:23 +0100 writes:

>>>>> Jinsong Zhao 
>>>>>     on Tue, 13 Dec 2022 17:07:00 +0800 writes:

    >> I don

Jinsong started on top and I did not see his continuation
at the very bottom
(so scroll down there!)


    >> On 2022/12/13 10:13, Derek Ogle wrote:
    >>> bgroup() from plotmath does not render properly for
    >>> me. For example
    >>> 
    >>> plot(0,xlim=c(0,1),ylim=c(0,1))
    >>> text(0.3,0.5,expression(bgroup('(',atop(x,y),')')))
    >>> text(0.7,0.5,expression(group('(',atop(x,y),')')))

    > Almost surely a Windows-only problem i.e. bug, See also
    > the bug fixed yesterday, PR#18440,
    > https://bugs.r-project.org/show_bug.cgi?id=18440

    > Note that "rendering" of graphics strongly depends on your
    > graphics device (people no longer learn about nowadays).
    > Hence, use

    >    .Device or dev.cur()

    > and report that along with your session info.

    > I bet that you will see that after

    > png("bgroup.png") # or pdf("bgroup.pdf")
    > expression(bgroup('(',atop(x,y),')') dev.off()

    > the resulting PNG or PDF will look fine, even on Windows
    > in R 4.2.2.

    > Martin

    >>> 
    >>> and
    >>> 
    >>> library(ggplot2) ggplot(mtcars, aes(wt, mpg)) +
    >>> annotate("text", x=2.5, y=25,
    >>> label="bgroup('(',atop(x,y),')')", parse=TRUE) +
    >>> annotate("text", x=3.5, y=25,
    >>> label="group('(',atop(x,y),')')", parse=TRUE)
    >>> 
    >>> both show a proper (though ugly) result from group()
    >>> (the second text() or annotation()) but unrecognizable
    >>> characters (rather than large parentheses) from
    >>> bgroup().
    >>> 
    >>> This problematic result occurred for me when using
    >>> v4.2.2, but not when using 4.2.0, 4.1.2, 4.1.0, or
    >>> 4.0.5. My sessionInfo is further below.
    >>> 
    >>> I did ask this on stackoverflow
    >>> <https://stackoverflow.com/questions/74738827/bgroup-does-not-render-properly-on-ggplot>
    >>> where the resulting figures can be seen.
    >>> 
    >>> 
    >>> ----
    >>> R version 4.2.2 (2022-10-31 ucrt) Platform:
    >>> x86_64-w64-mingw32/x64 (64-bit) Running under: Windows
    >>> 10 x64 (build 19044)
    >>> 
    >>> Matrix products: default
    >>> 
    >>> locale: [1] LC_COLLATE=English_United States.utf8 [2]
    >>> LC_CTYPE=English_United States.utf8 [3]
    >>> LC_MONETARY=English_United States.utf8 [4] LC_NUMERIC=C
    >>> [5] LC_TIME=English_United States.utf8
    >>> 
    >>> attached base packages: [1] stats graphics grDevices
    >>> utils datasets methods base
    >>> 
    >>> loaded via a namespace (and not attached): [1]
    >>> compiler_4.2.2 tools_4.2.2

    >> I don't see any problem, especially when outputing the
    >> plot to a pdf file.

    >> Best, Jinsong

Interesting, so even on Windows, the problem does not always
show evidently.
The pdf is clearly working (see my own first reply),
but then, could it be that there's a difference between Jinsong's
computer or his way of using R and the others, Rui and Derek ?

The ugly rectangles are typically shown for characters for which
the graphics device does not find any fonts...
and in principle there may be subtle differences.

Is it always within RStudio which I think *does* use R's own
"graphapp" based Windows device. 
It that's still true, then same would probably happen within
bare RGui.

For me, on a (2016!) Windows terminal server,
the bgroup() things also work nicely, at least if I use R from
ESS (-> Rterm). 

Martin


From j@zh@o @end|ng |rom ye@h@net  Tue Dec 13 12:47:33 2022
From: j@zh@o @end|ng |rom ye@h@net (Jinsong Zhao)
Date: Tue, 13 Dec 2022 19:47:33 +0800
Subject: [R] bgroup not rendering properly
In-Reply-To: <25496.19887.320573.266495@stat.math.ethz.ch>
References: <CAKKtRk8q+oMHjFaFib-BZmASJ+fimRwq5uvg+i79DJgnptzkDw@mail.gmail.com>
 <6fa3a345-473d-53b2-d74a-5a1b4f5b5657@yeah.net>
 <25496.19887.320573.266495@stat.math.ethz.ch>
Message-ID: <b0fddc23-b7a9-b56c-ac89-5ae2d4ec80b7@yeah.net>



On 2022/12/13 18:02, Martin Maechler wrote:
>>>>>> Jinsong Zhao
>>>>>>      on Tue, 13 Dec 2022 17:07:00 +0800 writes:
>      > I don
>
>      >  On 2022/12/13 10:13, Derek Ogle wrote:
>      >> bgroup() from plotmath does not render properly for
>      >> me. For example
>      >>
>      >> plot(0,xlim=c(0,1),ylim=c(0,1))
>      >> text(0.3,0.5,expression(bgroup('(',atop(x,y),')')))
>      >> text(0.7,0.5,expression(group('(',atop(x,y),')')))
>
> Almost surely a  Windows-only problem i.e. bug,
> See also the bug fixed yesterday, PR#18440,
> https://bugs.r-project.org/show_bug.cgi?id=18440
>
>
I do not observe the problem in that bug report. All works fine.

Best,
Jinsong


From derekog|e51 @end|ng |rom gm@||@com  Tue Dec 13 14:59:14 2022
From: derekog|e51 @end|ng |rom gm@||@com (Derek Ogle)
Date: Tue, 13 Dec 2022 07:59:14 -0600
Subject: [R] bgroup not rendering properly
In-Reply-To: <b0fddc23-b7a9-b56c-ac89-5ae2d4ec80b7@yeah.net>
References: <CAKKtRk8q+oMHjFaFib-BZmASJ+fimRwq5uvg+i79DJgnptzkDw@mail.gmail.com>
 <6fa3a345-473d-53b2-d74a-5a1b4f5b5657@yeah.net>
 <25496.19887.320573.266495@stat.math.ethz.ch>
 <b0fddc23-b7a9-b56c-ac89-5ae2d4ec80b7@yeah.net>
Message-ID: <CAKKtRk-XxMm+OmOTr8FRfhjZaE_cQ2w_ZogmEu6fSLkQ9S=FJg@mail.gmail.com>

Thank you all for your help. I am using Windows. I ran the following both
in R 4.2.2 using RStudio and not using RStudio (but using the R GUI). In
both runs, plots within the GUI/RStudio and in the PNG output exhibited the
same issue that I reported originally., whereas plots in the PDF output
were perfect (no issue).

As asked, the first dev.cur() or .Device says "null device" whereas the
second says "Windows" when using the R GUI and "RStudioGD" when using
RStudio.

It sounds like this is likely a windows-related bug that will be fixed in
the next version. I can wait for that.

----
dev.cur()
.Device
plot(0,xlim=c(0,1),ylim=c(0,1))
text(0.5,0.5,expression(bgroup('(',atop(x,y),')')))

png("bgroup_R422.png")
plot(0,xlim=c(0,1),ylim=c(0,1))
text(0.5,0.5,expression(bgroup('(',atop(x,y),')')))
dev.off()

pdf("bgroup_R422.pdf")
plot(0,xlim=c(0,1),ylim=c(0,1))
text(0.5,0.5,expression(bgroup('(',atop(x,y),')')))
dev.off()

dev.cur()
.Device
plot(0,xlim=c(0,1),ylim=c(0,1))
text(0.5,0.5,expression(bgroup('(',atop(x,y),')')))


On Tue, Dec 13, 2022 at 5:48 AM Jinsong Zhao <jszhao at yeah.net> wrote:

>
>
> On 2022/12/13 18:02, Martin Maechler wrote:
> >>>>>> Jinsong Zhao
> >>>>>>      on Tue, 13 Dec 2022 17:07:00 +0800 writes:
> >      > I don
> >
> >      >  On 2022/12/13 10:13, Derek Ogle wrote:
> >      >> bgroup() from plotmath does not render properly for
> >      >> me. For example
> >      >>
> >      >> plot(0,xlim=c(0,1),ylim=c(0,1))
> >      >> text(0.3,0.5,expression(bgroup('(',atop(x,y),')')))
> >      >> text(0.7,0.5,expression(group('(',atop(x,y),')')))
> >
> > Almost surely a  Windows-only problem i.e. bug,
> > See also the bug fixed yesterday, PR#18440,
> > https://bugs.r-project.org/show_bug.cgi?id=18440
> >
> >
> I do not observe the problem in that bug report. All works fine.
>
> Best,
> Jinsong
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Dec 13 16:38:59 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 13 Dec 2022 16:38:59 +0100
Subject: [R] bgroup not rendering properly
In-Reply-To: <CAKKtRk-XxMm+OmOTr8FRfhjZaE_cQ2w_ZogmEu6fSLkQ9S=FJg@mail.gmail.com>
References: <CAKKtRk8q+oMHjFaFib-BZmASJ+fimRwq5uvg+i79DJgnptzkDw@mail.gmail.com>
 <6fa3a345-473d-53b2-d74a-5a1b4f5b5657@yeah.net>
 <25496.19887.320573.266495@stat.math.ethz.ch>
 <b0fddc23-b7a9-b56c-ac89-5ae2d4ec80b7@yeah.net>
 <CAKKtRk-XxMm+OmOTr8FRfhjZaE_cQ2w_ZogmEu6fSLkQ9S=FJg@mail.gmail.com>
Message-ID: <2e613a6e-af0d-1668-3b87-fc11a8692347@statistik.tu-dortmund.de>

Fascinating: I see it with R-4.2.2  and R-patched  with the windows() 
device. But all works well with R-4.2.1 and R-devel.

I'll try to investigate.

Best,
Uwe Ligges







On 13.12.2022 14:59, Derek Ogle wrote:
> Thank you all for your help. I am using Windows. I ran the following both
> in R 4.2.2 using RStudio and not using RStudio (but using the R GUI). In
> both runs, plots within the GUI/RStudio and in the PNG output exhibited the
> same issue that I reported originally., whereas plots in the PDF output
> were perfect (no issue).
> 
> As asked, the first dev.cur() or .Device says "null device" whereas the
> second says "Windows" when using the R GUI and "RStudioGD" when using
> RStudio.
> 
> It sounds like this is likely a windows-related bug that will be fixed in
> the next version. I can wait for that.
> 
> ----
> dev.cur()
> .Device
> plot(0,xlim=c(0,1),ylim=c(0,1))
> text(0.5,0.5,expression(bgroup('(',atop(x,y),')')))
> 
> png("bgroup_R422.png")
> plot(0,xlim=c(0,1),ylim=c(0,1))
> text(0.5,0.5,expression(bgroup('(',atop(x,y),')')))
> dev.off()
> 
> pdf("bgroup_R422.pdf")
> plot(0,xlim=c(0,1),ylim=c(0,1))
> text(0.5,0.5,expression(bgroup('(',atop(x,y),')')))
> dev.off()
> 
> dev.cur()
> .Device
> plot(0,xlim=c(0,1),ylim=c(0,1))
> text(0.5,0.5,expression(bgroup('(',atop(x,y),')')))
> 
> 
> On Tue, Dec 13, 2022 at 5:48 AM Jinsong Zhao <jszhao at yeah.net> wrote:
> 
>>
>>
>> On 2022/12/13 18:02, Martin Maechler wrote:
>>>>>>>> Jinsong Zhao
>>>>>>>>       on Tue, 13 Dec 2022 17:07:00 +0800 writes:
>>>       > I don
>>>
>>>       >  On 2022/12/13 10:13, Derek Ogle wrote:
>>>       >> bgroup() from plotmath does not render properly for
>>>       >> me. For example
>>>       >>
>>>       >> plot(0,xlim=c(0,1),ylim=c(0,1))
>>>       >> text(0.3,0.5,expression(bgroup('(',atop(x,y),')')))
>>>       >> text(0.7,0.5,expression(group('(',atop(x,y),')')))
>>>
>>> Almost surely a  Windows-only problem i.e. bug,
>>> See also the bug fixed yesterday, PR#18440,
>>> https://bugs.r-project.org/show_bug.cgi?id=18440
>>>
>>>
>> I do not observe the problem in that bug report. All works fine.
>>
>> Best,
>> Jinsong
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From v@|ent|n @end|ng |rom petze|@@t  Tue Dec 13 17:58:02 2022
From: v@|ent|n @end|ng |rom petze|@@t (Valentin Petzel)
Date: Tue, 13 Dec 2022 17:58:02 +0100
Subject: [R] Enabling s3 methods by attaching environment
Message-ID: <8161072.T7Z3S40VBb@archbox>

Hello everyone!

if we define some S3 method in some environment like this

E <- new.env() 
evalq({ 
  test <- function(x) UseMethod("test") 
  test.character <- function(x) 1 
}, envir = E)

this works

evalq(test("a"), envir = E) 
but this doesn?t:

attach(E) 
test("a")
According to some remarks this now requires the use of .S3method to register the 
method to a method data base. This does work, but if we create two different 
environments with different implementations of the same S3 method this will always 
default to the last defined method (as the method data base is only updated on 
declaration).

This makes a workflow where we use environments to enable and disable certain functions 
impossible.

So I want to ask if there is currently any way to use S3 methods in a currently attached 
environment while allowing to switch the method by attaching a different environment?

Kind Regards,
Valentin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: This is a digitally signed message part.
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20221213/1bc984b5/attachment.sig>

From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Dec 14 09:37:50 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 14 Dec 2022 09:37:50 +0100
Subject: [R] bgroup not rendering properly
In-Reply-To: <2e613a6e-af0d-1668-3b87-fc11a8692347@statistik.tu-dortmund.de>
References: <CAKKtRk8q+oMHjFaFib-BZmASJ+fimRwq5uvg+i79DJgnptzkDw@mail.gmail.com>
 <6fa3a345-473d-53b2-d74a-5a1b4f5b5657@yeah.net>
 <25496.19887.320573.266495@stat.math.ethz.ch>
 <b0fddc23-b7a9-b56c-ac89-5ae2d4ec80b7@yeah.net>
 <CAKKtRk-XxMm+OmOTr8FRfhjZaE_cQ2w_ZogmEu6fSLkQ9S=FJg@mail.gmail.com>
 <2e613a6e-af0d-1668-3b87-fc11a8692347@statistik.tu-dortmund.de>
Message-ID: <d8ef7bbc-7369-a7e4-642f-54f586cb6711@statistik.tu-dortmund.de>

And this has been fixed by Tomas Kalibera on Dec 12 in R-devel already. 
Shortly to be ported to R-patched.

Best,
Uwe Ligges


On 13.12.2022 16:38, Uwe Ligges wrote:
> Fascinating: I see it with R-4.2.2? and R-patched? with the windows() 
> device. But all works well with R-4.2.1 and R-devel.
> 
> I'll try to investigate.
> 
> Best,
> Uwe Ligges
> 
> 
> 
> 
> 
> 
> 
> On 13.12.2022 14:59, Derek Ogle wrote:
>> Thank you all for your help. I am using Windows. I ran the following both
>> in R 4.2.2 using RStudio and not using RStudio (but using the R GUI). In
>> both runs, plots within the GUI/RStudio and in the PNG output 
>> exhibited the
>> same issue that I reported originally., whereas plots in the PDF output
>> were perfect (no issue).
>>
>> As asked, the first dev.cur() or .Device says "null device" whereas the
>> second says "Windows" when using the R GUI and "RStudioGD" when using
>> RStudio.
>>
>> It sounds like this is likely a windows-related bug that will be fixed in
>> the next version. I can wait for that.
>>
>> ----
>> dev.cur()
>> .Device
>> plot(0,xlim=c(0,1),ylim=c(0,1))
>> text(0.5,0.5,expression(bgroup('(',atop(x,y),')')))
>>
>> png("bgroup_R422.png")
>> plot(0,xlim=c(0,1),ylim=c(0,1))
>> text(0.5,0.5,expression(bgroup('(',atop(x,y),')')))
>> dev.off()
>>
>> pdf("bgroup_R422.pdf")
>> plot(0,xlim=c(0,1),ylim=c(0,1))
>> text(0.5,0.5,expression(bgroup('(',atop(x,y),')')))
>> dev.off()
>>
>> dev.cur()
>> .Device
>> plot(0,xlim=c(0,1),ylim=c(0,1))
>> text(0.5,0.5,expression(bgroup('(',atop(x,y),')')))
>>
>>
>> On Tue, Dec 13, 2022 at 5:48 AM Jinsong Zhao <jszhao at yeah.net> wrote:
>>
>>>
>>>
>>> On 2022/12/13 18:02, Martin Maechler wrote:
>>>>>>>>> Jinsong Zhao
>>>>>>>>> ????? on Tue, 13 Dec 2022 17:07:00 +0800 writes:
>>>> ????? > I don
>>>>
>>>> ????? >? On 2022/12/13 10:13, Derek Ogle wrote:
>>>> ????? >> bgroup() from plotmath does not render properly for
>>>> ????? >> me. For example
>>>> ????? >>
>>>> ????? >> plot(0,xlim=c(0,1),ylim=c(0,1))
>>>> ????? >> text(0.3,0.5,expression(bgroup('(',atop(x,y),')')))
>>>> ????? >> text(0.7,0.5,expression(group('(',atop(x,y),')')))
>>>>
>>>> Almost surely a? Windows-only problem i.e. bug,
>>>> See also the bug fixed yesterday, PR#18440,
>>>> https://bugs.r-project.org/show_bug.cgi?id=18440
>>>>
>>>>
>>> I do not observe the problem in that bug report. All works fine.
>>>
>>> Best,
>>> Jinsong
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>> ????[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ro@||n@ump @end|ng |rom gm@||@com  Thu Dec 15 04:04:28 2022
From: ro@||n@ump @end|ng |rom gm@||@com (roslinazairimah zakaria)
Date: Thu, 15 Dec 2022 11:04:28 +0800
Subject: [R] library(tseries) - spellng error in output
Message-ID: <CANTvJZJMRghiYpvRm98fFhE9HAk0zKLdsWeCVLwo1_Ssdg34oQ@mail.gmail.com>

Hi R-users,

Just to inform that there is one spelling error in the output for *Jarque-Bera
test in R.*

*library(tseries)*











*> #Jarque-Bera normality test> normalTest(dt_i, method='jb')Title: Jarque
- Bera Normalality TestTest Results:  STATISTIC:    X-squared: 16.8853  P
VALUE:    Asymptotic p Value: 0.0002155 *

-- 
*Roslinazairimah Zakaria*
*Tel: +609-5492370; Fax. No.+609-5492766*

*Email: roslinazairimah at ump.edu.my <roslinazairimah at ump.edu.my>;
roslinaump at gmail.com <roslinaump at gmail.com>*
Faculty of Industrial Sciences & Technology
University Malaysia Pahang
Lebuhraya Tun Razak, 26300 Gambang, Pahang, Malaysia

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Dec 15 04:11:25 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 14 Dec 2022 19:11:25 -0800
Subject: [R] library(tseries) - spellng error in output
In-Reply-To: <CANTvJZJMRghiYpvRm98fFhE9HAk0zKLdsWeCVLwo1_Ssdg34oQ@mail.gmail.com>
References: <CANTvJZJMRghiYpvRm98fFhE9HAk0zKLdsWeCVLwo1_Ssdg34oQ@mail.gmail.com>
Message-ID: <9C26C449-DDD0-4E56-8E37-A3D5F6E6464F@dcn.davis.ca.us>

Contact the package maintainer. See maintainer().

On December 14, 2022 7:04:28 PM PST, roslinazairimah zakaria <roslinaump at gmail.com> wrote:
>Hi R-users,
>
>Just to inform that there is one spelling error in the output for *Jarque-Bera
>test in R.*
>
>*library(tseries)*
>
>
>
>
>
>
>
>
>
>
>
>*> #Jarque-Bera normality test> normalTest(dt_i, method='jb')Title: Jarque
>- Bera Normalality TestTest Results:  STATISTIC:    X-squared: 16.8853  P
>VALUE:    Asymptotic p Value: 0.0002155 *
>

-- 
Sent from my phone. Please excuse my brevity.


From @te|@no@@o||@ @end|ng |rom reg|one@m@rche@|t  Thu Dec 15 14:52:35 2022
From: @te|@no@@o||@ @end|ng |rom reg|one@m@rche@|t (Stefano Sofia)
Date: Thu, 15 Dec 2022 13:52:35 +0000
Subject: [R] Get data from a list of data frames
Message-ID: <fe9017cbd4ba49328e150061032068a7@regione.marche.it>

Dear R-list users,

I have a list of n data frames built as follows:


Station1 <- data.frame(sensor = c("thermometer", "raingauge", "snowgauge", "anemometer"), code = c(2583, 1478, 3178, NA))
Station2 <- data.frame(sensor = c("thermometer", "raingauge", "snowgauge", "anemometer"), code = c(2584, 1479, 3179, 4453))
....

Total <- list("Station1"=Station1, "Station2"=Station2, ...)

I would need to have a vector with the sensor codes of the thermometers of some stations, let's say of Station1, Station2 and Station5 (i.e. c(2583, 2584, 2587)).
I tried with lapply, but I have not been able to get what I need.
Could you please help me?

Thank you

Stefano



         (oo)
--oOO--( )--OOo--------------------------------------
Stefano Sofia PhD
Civil Protection - Marche Region - Italy
Meteo Section
Snow Section
Via del Colle Ameno 5
60126 Torrette di Ancona, Ancona (AN)
Uff: +39 071 806 7743
E-mail: stefano.sofia at regione.marche.it
---Oo---------oO----------------------------------------

________________________________

AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell'art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.

--
Questo messaggio  stato analizzato da Libraesva ESG ed  risultato non infetto.
This message was scanned by Libraesva ESG and is believed to be clean.


	[[alternative HTML version deleted]]


From gerr|t@e|chner @end|ng |rom m@th@un|-g|e@@en@de  Thu Dec 15 15:10:22 2022
From: gerr|t@e|chner @end|ng |rom m@th@un|-g|e@@en@de (Gerrit Eichner)
Date: Thu, 15 Dec 2022 15:10:22 +0100
Subject: [R] Get data from a list of data frames
In-Reply-To: <fe9017cbd4ba49328e150061032068a7@regione.marche.it>
References: <fe9017cbd4ba49328e150061032068a7@regione.marche.it>
Message-ID: <8715921b-7d33-aad0-2b05-91a0fd1c32d8@math.uni-giessen.de>

Hello, Stefano,

maybe the following example contains what you want to achieve:

Station1 <- data.frame(sensor = c("thermometer", "raingauge", 
"snowgauge", "anemometer"),
                        code = c(2583, 1478, 3178, NA))
Station2 <- data.frame(sensor = c("thermometer", "raingauge", 
"snowgauge", "anemometer"),
                        code = c(2584, 1479, 3179, 4453))
Station3 <- data.frame(sensor = c("thermometer", "raingauge", 
"snowgauge", "anemometer"),
                        code = c(2584, 1479, 3179, 4453))
Station4 <- data.frame(sensor = rev(c("thermometer", "raingauge", 
"snowgauge", "anemometer")),
                        code = c(2584, 1479, 3179, 4453))
Station5 <- data.frame(sensor = c("raingauge", "snowgauge", 
"thermometer", "anemometer"),
                        code = c(2584, 1479, 3179, 4453))

Total <- list("Station1"=Station1, "Station2"=Station2,
               Station3 = Station3, Station4 = Station4,
               Station5 = Station5)

select.stat <- paste0("Station", c(1, 4, 5))
select.sens <- "thermometer"

sapply(Total[select.stat], function(x, sens)
   x$code[x$sensor == sens], sens = select.sens)



  Hth --  Gerrit

---------------------------------------------------------------------
Dr. Gerrit Eichner                   Mathematical Institute, Room 212
gerrit.eichner at math.uni-giessen.de   Justus-Liebig-University Giessen
Tel: +49-(0)641-99-32104          Arndtstr. 2, 35392 Giessen, Germany
http://www.uni-giessen.de/eichner
---------------------------------------------------------------------

Am 15.12.2022 um 14:52 schrieb Stefano Sofia:
> Dear R-list users,
> 
> I have a list of n data frames built as follows:
> 
> 
> Station1 <- data.frame(sensor = c("thermometer", "raingauge", "snowgauge", "anemometer"), code = c(2583, 1478, 3178, NA))
> Station2 <- data.frame(sensor = c("thermometer", "raingauge", "snowgauge", "anemometer"), code = c(2584, 1479, 3179, 4453))
> ....
> 
> Total <- list("Station1"=Station1, "Station2"=Station2, ...)
> 
> I would need to have a vector with the sensor codes of the thermometers of some stations, let's say of Station1, Station2 and Station5 (i.e. c(2583, 2584, 2587)).
> I tried with lapply, but I have not been able to get what I need.
> Could you please help me?
> 
> Thank you
> 
> Stefano
> 
> 
> 
>           (oo)
> --oOO--( )--OOo--------------------------------------
> Stefano Sofia PhD
> Civil Protection - Marche Region - Italy
> Meteo Section
> Snow Section
> Via del Colle Ameno 5
> 60126 Torrette di Ancona, Ancona (AN)
> Uff: +39 071 806 7743
> E-mail: stefano.sofia at regione.marche.it
> ---Oo---------oO----------------------------------------
> 
> ________________________________
> 
> AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell'art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
> IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.
> 
> --
> 
> Questo messaggio  stato analizzato da Libraesva ESG ed  risultato non infetto.
> 
> This message was scanned by Libraesva ESG and is believed to be clean.
> 
> 
> 	[[alternative HTML version deleted]]
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From pd@|gd @end|ng |rom gm@||@com  Thu Dec 15 15:30:13 2022
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Thu, 15 Dec 2022 15:30:13 +0100
Subject: [R] library(tseries) - spellng error in output
In-Reply-To: <9C26C449-DDD0-4E56-8E37-A3D5F6E6464F@dcn.davis.ca.us>
References: <CANTvJZJMRghiYpvRm98fFhE9HAk0zKLdsWeCVLwo1_Ssdg34oQ@mail.gmail.com>
 <9C26C449-DDD0-4E56-8E37-A3D5F6E6464F@dcn.davis.ca.us>
Message-ID: <C9F128F4-19D5-4B21-AF13-1F4E6CFC69D8@gmail.com>

And normalTest is not in tseries, but in fBasics.

- pd

> On 15 Dec 2022, at 04:11 , Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
> 
> Contact the package maintainer. See maintainer().
> 
> On December 14, 2022 7:04:28 PM PST, roslinazairimah zakaria <roslinaump at gmail.com> wrote:
>> Hi R-users,
>> 
>> Just to inform that there is one spelling error in the output for *Jarque-Bera
>> test in R.*
>> 
>> *library(tseries)*
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> *> #Jarque-Bera normality test> normalTest(dt_i, method='jb')Title: Jarque
>> - Bera Normalality TestTest Results:  STATISTIC:    X-squared: 16.8853  P
>> VALUE:    Asymptotic p Value: 0.0002155 *
>> 
> 
> -- 
> Sent from my phone. Please excuse my brevity.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From bgunter@4567 @end|ng |rom gm@||@com  Thu Dec 15 18:31:51 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 15 Dec 2022 09:31:51 -0800
Subject: [R] Get data from a list of data frames
In-Reply-To: <8715921b-7d33-aad0-2b05-91a0fd1c32d8@math.uni-giessen.de>
References: <fe9017cbd4ba49328e150061032068a7@regione.marche.it>
 <8715921b-7d33-aad0-2b05-91a0fd1c32d8@math.uni-giessen.de>
Message-ID: <CAGxFJbTgwQ2Nop0bjCzcT7Ri6FhDmOrXiXv+o2-2m_-sqZ6H_w@mail.gmail.com>

Well, just for giggles, Gerrit's solution can be easily vectorized (i.e. no
apply()-type stuff needed) IFF the structure of all the data frames are
identical so that rbind() works:

d <-do.call('rbind',Total[select.stat]) ## one data frame to combine them
all ;-)
d[d$sensor == 'thermometer','code']

Whether this is better, worse, or unneeded, I cannot say.

Cheers,
Bert


On Thu, Dec 15, 2022 at 6:11 AM Gerrit Eichner <
gerrit.eichner at math.uni-giessen.de> wrote:

> Hello, Stefano,
>
> maybe the following example contains what you want to achieve:
>
> Station1 <- data.frame(sensor = c("thermometer", "raingauge",
> "snowgauge", "anemometer"),
>                         code = c(2583, 1478, 3178, NA))
> Station2 <- data.frame(sensor = c("thermometer", "raingauge",
> "snowgauge", "anemometer"),
>                         code = c(2584, 1479, 3179, 4453))
> Station3 <- data.frame(sensor = c("thermometer", "raingauge",
> "snowgauge", "anemometer"),
>                         code = c(2584, 1479, 3179, 4453))
> Station4 <- data.frame(sensor = rev(c("thermometer", "raingauge",
> "snowgauge", "anemometer")),
>                         code = c(2584, 1479, 3179, 4453))
> Station5 <- data.frame(sensor = c("raingauge", "snowgauge",
> "thermometer", "anemometer"),
>                         code = c(2584, 1479, 3179, 4453))
>
> Total <- list("Station1"=Station1, "Station2"=Station2,
>                Station3 = Station3, Station4 = Station4,
>                Station5 = Station5)
>
> select.stat <- paste0("Station", c(1, 4, 5))
> select.sens <- "thermometer"
>
> sapply(Total[select.stat], function(x, sens)
>    x$code[x$sensor == sens], sens = select.sens)
>
>
>
>   Hth --  Gerrit
>
> ---------------------------------------------------------------------
> Dr. Gerrit Eichner                   Mathematical Institute, Room 212
> gerrit.eichner at math.uni-giessen.de   Justus-Liebig-University Giessen
> Tel: +49-(0)641-99-32104          Arndtstr. 2, 35392 Giessen, Germany
> http://www.uni-giessen.de/eichner
> ---------------------------------------------------------------------
>
> Am 15.12.2022 um 14:52 schrieb Stefano Sofia:
> > Dear R-list users,
> >
> > I have a list of n data frames built as follows:
> >
> >
> > Station1 <- data.frame(sensor = c("thermometer", "raingauge",
> "snowgauge", "anemometer"), code = c(2583, 1478, 3178, NA))
> > Station2 <- data.frame(sensor = c("thermometer", "raingauge",
> "snowgauge", "anemometer"), code = c(2584, 1479, 3179, 4453))
> > ....
> >
> > Total <- list("Station1"=Station1, "Station2"=Station2, ...)
> >
> > I would need to have a vector with the sensor codes of the thermometers
> of some stations, let's say of Station1, Station2 and Station5 (i.e.
> c(2583, 2584, 2587)).
> > I tried with lapply, but I have not been able to get what I need.
> > Could you please help me?
> >
> > Thank you
> >
> > Stefano
> >
> >
> >
> >           (oo)
> > --oOO--( )--OOo--------------------------------------
> > Stefano Sofia PhD
> > Civil Protection - Marche Region - Italy
> > Meteo Section
> > Snow Section
> > Via del Colle Ameno 5
> > 60126 Torrette di Ancona, Ancona (AN)
> > Uff: +39 071 806 7743
> > E-mail: stefano.sofia at regione.marche.it
> > ---Oo---------oO----------------------------------------
> >
> > ________________________________
> >
> > AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere
> informazioni confidenziali, pertanto ? destinato solo a persone autorizzate
> alla ricezione. I messaggi di posta elettronica per i client di Regione
> Marche possono contenere informazioni confidenziali e con privilegi legali.
> Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o
> archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore,
> inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio
> computer. Ai sensi dell'art. 6 della DGR n. 1394/2008 si segnala che, in
> caso di necessit? ed urgenza, la risposta al presente messaggio di posta
> elettronica pu? essere visionata da persone estranee al destinatario.
> > IMPORTANT NOTICE: This e-mail message is intended to be received only by
> persons entitled to receive the confidential information it may contain.
> E-mail messages to clients of Regione Marche may contain information that
> is confidential and legally privileged. Please do not read, copy, forward,
> or store this message unless you are an intended recipient of it. If you
> have received this message in error, please forward it to the sender and
> delete it completely from your computer system.
> >
> > --
> >
> > Questo messaggio  stato analizzato da Libraesva ESG ed  risultato non
> infetto.
> >
> > This message was scanned by Libraesva ESG and is believed to be clean.
> >
> >
> >       [[alternative HTML version deleted]]
> >
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From wewo|@k| @end|ng |rom gm@||@com  Thu Dec 15 19:01:38 2022
From: wewo|@k| @end|ng |rom gm@||@com (Witold E Wolski)
Date: Thu, 15 Dec 2022 19:01:38 +0100
Subject: [R] I do not want that R CMD build removes temp directory
Message-ID: <CAAjnpdg8uLOBBEHWEWq81R+t0sUy=TiTPN_fy2WrgTn2-AWRqA@mail.gmail.com>

I am getting a package build error, and can not figure out the problem.
The error is
"
ERROR: lazy loading failed for package 'prolfqua'
* removing 'C:/Users/
"
However since R CMD build removes the temp directory and does not give
any other errors how can I find out what the build problem is?

Is there a way to disable the temp directory removal?

Best Regards
Witek
-- 
Witold Eryk Wolski


From @|mon@urb@nek @end|ng |rom R-project@org  Thu Dec 15 19:09:34 2022
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Fri, 16 Dec 2022 07:09:34 +1300
Subject: [R] [Rd] I do not want that R CMD build removes temp directory
In-Reply-To: <CAAjnpdg8uLOBBEHWEWq81R+t0sUy=TiTPN_fy2WrgTn2-AWRqA@mail.gmail.com>
References: <CAAjnpdg8uLOBBEHWEWq81R+t0sUy=TiTPN_fy2WrgTn2-AWRqA@mail.gmail.com>
Message-ID: <24A51D24-B62A-42E2-94C4-6842EFC87D50@R-project.org>

Yes:

$ R CMD INSTALL --help | grep error
      --no-clean-on-error	do not remove installed package on error

But probably more commonly used way is to install the package from its unpacked directory as that avoids the use of temporary directories in the first place.

In you case you can also use --no-test-load and the non-functional package will still be installed so you can inspect it.

Cheers,
Simon

PS: please don't cross-post


> On Dec 16, 2022, at 7:01 AM, Witold E Wolski <wewolski at gmail.com> wrote:
> 
> I am getting a package build error, and can not figure out the problem.
> The error is
> "
> ERROR: lazy loading failed for package 'prolfqua'
> * removing 'C:/Users/
> "
> However since R CMD build removes the temp directory and does not give
> any other errors how can I find out what the build problem is?
> 
> Is there a way to disable the temp directory removal?
> 
> Best Regards
> Witek
> -- 
> Witold Eryk Wolski
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 


From wewo|@k| @end|ng |rom gm@||@com  Thu Dec 15 21:47:24 2022
From: wewo|@k| @end|ng |rom gm@||@com (Witold E Wolski)
Date: Thu, 15 Dec 2022 21:47:24 +0100
Subject: [R] [Rd] I do not want that R CMD build removes temp directory
In-Reply-To: <24A51D24-B62A-42E2-94C4-6842EFC87D50@R-project.org>
References: <CAAjnpdg8uLOBBEHWEWq81R+t0sUy=TiTPN_fy2WrgTn2-AWRqA@mail.gmail.com>
 <24A51D24-B62A-42E2-94C4-6842EFC87D50@R-project.org>
Message-ID: <CAAjnpdhUb6eJ78wZd501AH0CnkDYN7TQ0U=sP7RXpYjQTd0Reg@mail.gmail.com>

Thank you Simon,

It seems not to be related to the R package but rather to the OS,
(just got the same error when installing the shiny R package from
CRAN).
I am on an M1 mac running Windows ARM in Parallels. Installed a
x86_64-w64 R version.



"** byte-compile and prepare package for lazy loading
ERROR: lazy loading failed for package 'shiny'
* removing 'C:/Users/witoldwolski/AppData/Local/R/win-library/4.2/shiny'
Warning in install.packages :"

On Thu, 15 Dec 2022 at 19:09, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>
> Yes:
>
> $ R CMD INSTALL --help | grep error
>       --no-clean-on-error       do not remove installed package on error
>
> But probably more commonly used way is to install the package from its unpacked directory as that avoids the use of temporary directories in the first place.
>
> In you case you can also use --no-test-load and the non-functional package will still be installed so you can inspect it.
>
> Cheers,
> Simon
>
> PS: please don't cross-post
>
>
> > On Dec 16, 2022, at 7:01 AM, Witold E Wolski <wewolski at gmail.com> wrote:
> >
> > I am getting a package build error, and can not figure out the problem.
> > The error is
> > "
> > ERROR: lazy loading failed for package 'prolfqua'
> > * removing 'C:/Users/
> > "
> > However since R CMD build removes the temp directory and does not give
> > any other errors how can I find out what the build problem is?
> >
> > Is there a way to disable the temp directory removal?
> >
> > Best Regards
> > Witek
> > --
> > Witold Eryk Wolski
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> >
>


-- 
Witold Eryk Wolski


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Fri Dec 16 11:24:49 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Fri, 16 Dec 2022 11:24:49 +0100
Subject: [R] [Rd] I do not want that R CMD build removes temp directory
In-Reply-To: <CAAjnpdhUb6eJ78wZd501AH0CnkDYN7TQ0U=sP7RXpYjQTd0Reg@mail.gmail.com>
References: <CAAjnpdg8uLOBBEHWEWq81R+t0sUy=TiTPN_fy2WrgTn2-AWRqA@mail.gmail.com>
 <24A51D24-B62A-42E2-94C4-6842EFC87D50@R-project.org>
 <CAAjnpdhUb6eJ78wZd501AH0CnkDYN7TQ0U=sP7RXpYjQTd0Reg@mail.gmail.com>
Message-ID: <b2825ce6-6601-eb65-fffd-981db52feb58@statistik.tu-dortmund.de>



On 15.12.2022 21:47, Witold E Wolski wrote:
> Thank you Simon,
> 
> It seems not to be related to the R package but rather to the OS,
> (just got the same error when installing the shiny R package from
> CRAN).
> I am on an M1 mac running Windows ARM in Parallels. Installed a
> x86_64-w64 R version.
> 
> 
> 
> "** byte-compile and prepare package for lazy loading
> ERROR: lazy loading failed for package 'shiny'
> * removing 'C:/Users/witoldwolski/AppData/Local/R/win-library/4.2/shiny'
> Warning in install.packages :"

Can we please have the full output?

Best,
Uwe Ligges



> On Thu, 15 Dec 2022 at 19:09, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>>
>> Yes:
>>
>> $ R CMD INSTALL --help | grep error
>>        --no-clean-on-error       do not remove installed package on error
>>
>> But probably more commonly used way is to install the package from its unpacked directory as that avoids the use of temporary directories in the first place.
>>
>> In you case you can also use --no-test-load and the non-functional package will still be installed so you can inspect it.
>>
>> Cheers,
>> Simon
>>
>> PS: please don't cross-post
>>
>>
>>> On Dec 16, 2022, at 7:01 AM, Witold E Wolski <wewolski at gmail.com> wrote:
>>>
>>> I am getting a package build error, and can not figure out the problem.
>>> The error is
>>> "
>>> ERROR: lazy loading failed for package 'prolfqua'
>>> * removing 'C:/Users/
>>> "
>>> However since R CMD build removes the temp directory and does not give
>>> any other errors how can I find out what the build problem is?
>>>
>>> Is there a way to disable the temp directory removal?
>>>
>>> Best Regards
>>> Witek
>>> --
>>> Witold Eryk Wolski
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>>
> 
>


From JH@rm@e @end|ng |rom roku@com  Fri Dec 16 16:15:58 2022
From: JH@rm@e @end|ng |rom roku@com (Jorgen Harmse)
Date: Fri, 16 Dec 2022 15:15:58 +0000
Subject: [R] Get data from a list of data frames (Stefano Sofia)
In-Reply-To: <mailman.368458.1.1671188401.35452.r-help@r-project.org>
References: <mailman.368458.1.1671188401.35452.r-help@r-project.org>
Message-ID: <MW4PR01MB64652E29C6209FB2AB99416DDCE69@MW4PR01MB6465.prod.exchangelabs.com>

Following Bert Gunter's suggestion, I wonder why the data are in separate frames (with hard-coded values) in the first place. You could put them in a text file and call read.table. If you provide a header and put a meaningful station name at the start of each data row then rownames of your data frame will be meaningful.

Regards,
Jorgen Harmse.

From: R-help <r-help-bounces at r-project.org> on behalf of r-help-request at r-project.org <r-help-request at r-project.org>
Date: Friday, 16December, 2022 at 05:00
To: r-help at r-project.org <r-help at r-project.org>
Subject: [EXTERNAL] R-help Digest, Vol 238, Issue 16

Message: 1
Date: Thu, 15 Dec 2022 13:52:35 +0000
From: Stefano Sofia <stefano.sofia at regione.marche.it>
To: "r-help at R-project.org" <r-help at R-project.org>
Subject: [R] Get data from a list of data frames
Message-ID: <fe9017cbd4ba49328e150061032068a7 at regione.marche.it>
Content-Type: text/plain; charset="utf-8"

Dear R-list users,

I have a list of n data frames built as follows:


Station1 <- data.frame(sensor = c("thermometer", "raingauge", "snowgauge", "anemometer"), code = c(2583, 1478, 3178, NA))
Station2 <- data.frame(sensor = c("thermometer", "raingauge", "snowgauge", "anemometer"), code = c(2584, 1479, 3179, 4453))
....

Total <- list("Station1"=Station1, "Station2"=Station2, ...)

I would need to have a vector with the sensor codes of the thermometers of some stations, let's say of Station1, Station2 and Station5 (i.e. c(2583, 2584, 2587)).
I tried with lapply, but I have not been able to get what I need.
Could you please help me?

Thank you

Stefano



         (oo)
--oOO--( )--OOo--------------------------------------
Stefano Sofia PhD
Civil Protection - Marche Region - Italy
Meteo Section
Snow Section
Via del Colle Ameno 5
60126 Torrette di Ancona, Ancona (AN)
Uff: +39 071 806 7743
E-mail: stefano.sofia at regione.marche.it
---Oo---------oO----------------------------------------

________________________________

AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell'art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.

--
Questo messaggio  stato analizzato da Libraesva ESG ed  risultato non infetto.
This message was scanned by Libraesva ESG and is believed to be clean.


        [[alternative HTML version deleted]]





------------------------------

Message: 4
Date: Thu, 15 Dec 2022 09:31:51 -0800
From: Bert Gunter <bgunter.4567 at gmail.com>
To: Gerrit Eichner <gerrit.eichner at math.uni-giessen.de>,
        stefano.sofia at regione.marche.it
Cc: r-help at r-project.org
Subject: Re: [R] Get data from a list of data frames
Message-ID:
        <CAGxFJbTgwQ2Nop0bjCzcT7Ri6FhDmOrXiXv+o2-2m_-sqZ6H_w at mail.gmail.com>
Content-Type: text/plain; charset="utf-8"

Well, just for giggles, Gerrit's solution can be easily vectorized (i.e. no
apply()-type stuff needed) IFF the structure of all the data frames are
identical so that rbind() works:

d <-do.call('rbind',Total[select.stat]) ## one data frame to combine them
all ;-)
d[d$sensor == 'thermometer','code']

Whether this is better, worse, or unneeded, I cannot say.

Cheers,
Bert



	[[alternative HTML version deleted]]


From gor@n@bro@trom @end|ng |rom umu@@e  Fri Dec 16 19:28:52 2022
From: gor@n@bro@trom @end|ng |rom umu@@e (=?utf-8?B?R8O2cmFuIEJyb3N0csO2bQ==?=)
Date: Fri, 16 Dec 2022 18:28:52 +0000
Subject: [R] is.na()<- on a character vector
Message-ID: <82963314-1FD8-48AF-9D2D-311256A3A8FD@umu.se>

I'm confused:

> x <- 1:2
> is.na(x) <- 1
> x
[1] NA  2

OK, but

> x <- c("A", "B")
> is.na(x) <- "A"
> x
               A 
"A" "B"  NA  

What happens?

G_ran


From er|cjberger @end|ng |rom gm@||@com  Fri Dec 16 19:43:00 2022
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Fri, 16 Dec 2022 20:43:00 +0200
Subject: [R] is.na()<- on a character vector
In-Reply-To: <82963314-1FD8-48AF-9D2D-311256A3A8FD@umu.se>
References: <82963314-1FD8-48AF-9D2D-311256A3A8FD@umu.se>
Message-ID: <CAGgJW74Rh1iGF2kJDMQQKP0zkDPVz7U=3fC0+pUBhoJGL=WKcQ@mail.gmail.com>

maybe this will make it clear

x <- c(a=1, b=5)
is.na(x) <- "b"

i.e. your second case is dealing with a named vector

HTH,
Eric


On Fri, Dec 16, 2022 at 8:29 PM G?ran Brostr?m <goran.brostrom at umu.se>
wrote:

> I'm confused:
>
> > x <- 1:2
> > is.na(x) <- 1
> > x
> [1] NA  2
>
> OK, but
>
> > x <- c("A", "B")
> > is.na(x) <- "A"
> > x
>                A
> "A" "B"  NA
>
> What happens?
>
> G_ran
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Dec 16 19:44:40 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Fri, 16 Dec 2022 10:44:40 -0800
Subject: [R] is.na()<- on a character vector
In-Reply-To: <82963314-1FD8-48AF-9D2D-311256A3A8FD@umu.se>
References: <82963314-1FD8-48AF-9D2D-311256A3A8FD@umu.se>
Message-ID: <1850D922-C9A8-4421-B7E1-5A33C1C47DCE@dcn.davis.ca.us>

I don't find _either_ of these acceptable.

On the other hand,

    x[ is.na( x ) ] <- 1

should have no effect on x.

On December 16, 2022 10:28:52 AM PST, "G?ran Brostr?m" <goran.brostrom at umu.se> wrote:
>I'm confused:
>
>> x <- 1:2
>> is.na(x) <- 1
>> x
>[1] NA  2
>
>OK, but
>
>> x <- c("A", "B")
>> is.na(x) <- "A"
>> x
>               A 
>"A" "B"  NA  
>
>What happens?
>
>G_ran
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From bgunter@4567 @end|ng |rom gm@||@com  Fri Dec 16 19:49:23 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 16 Dec 2022 10:49:23 -0800
Subject: [R] Get data from a list of data frames (Stefano Sofia)
In-Reply-To: <MW4PR01MB64652E29C6209FB2AB99416DDCE69@MW4PR01MB6465.prod.exchangelabs.com>
References: <mailman.368458.1.1671188401.35452.r-help@r-project.org>
 <MW4PR01MB64652E29C6209FB2AB99416DDCE69@MW4PR01MB6465.prod.exchangelabs.com>
Message-ID: <CAGxFJbQF2Lf4HPpvV3JB-NuWfPgk7-pMBhgw=LC6XYMkxut6Bg@mail.gmail.com>

... and note that my previous version can be simplified using R's pipe
syntax to:

do.call('rbind',Total[select.stat]) |>
   subset(sensor == 'thermometer', code)

## which calls the subset.data.frame() method that gives:
                 code
Station1.1 2583
Station4.4 4453
Station5.3 3179

close to the form that you suggested.
Same caveats as my previous post.

Cheers,
Bert


On Fri, Dec 16, 2022 at 7:16 AM Jorgen Harmse via R-help <
r-help at r-project.org> wrote:

> Following Bert Gunter's suggestion, I wonder why the data are in separate
> frames (with hard-coded values) in the first place. You could put them in a
> text file and call read.table. If you provide a header and put a meaningful
> station name at the start of each data row then rownames of your data frame
> will be meaningful.
>
> Regards,
> Jorgen Harmse.
>
> From: R-help <r-help-bounces at r-project.org> on behalf of
> r-help-request at r-project.org <r-help-request at r-project.org>
> Date: Friday, 16December, 2022 at 05:00
> To: r-help at r-project.org <r-help at r-project.org>
> Subject: [EXTERNAL] R-help Digest, Vol 238, Issue 16
>
> Message: 1
> Date: Thu, 15 Dec 2022 13:52:35 +0000
> From: Stefano Sofia <stefano.sofia at regione.marche.it>
> To: "r-help at R-project.org" <r-help at R-project.org>
> Subject: [R] Get data from a list of data frames
> Message-ID: <fe9017cbd4ba49328e150061032068a7 at regione.marche.it>
> Content-Type: text/plain; charset="utf-8"
>
> Dear R-list users,
>
> I have a list of n data frames built as follows:
>
>
> Station1 <- data.frame(sensor = c("thermometer", "raingauge", "snowgauge",
> "anemometer"), code = c(2583, 1478, 3178, NA))
> Station2 <- data.frame(sensor = c("thermometer", "raingauge", "snowgauge",
> "anemometer"), code = c(2584, 1479, 3179, 4453))
> ....
>
> Total <- list("Station1"=Station1, "Station2"=Station2, ...)
>
> I would need to have a vector with the sensor codes of the thermometers of
> some stations, let's say of Station1, Station2 and Station5 (i.e. c(2583,
> 2584, 2587)).
> I tried with lapply, but I have not been able to get what I need.
> Could you please help me?
>
> Thank you
>
> Stefano
>
>
>
>          (oo)
> --oOO--( )--OOo--------------------------------------
> Stefano Sofia PhD
> Civil Protection - Marche Region - Italy
> Meteo Section
> Snow Section
> Via del Colle Ameno 5
> 60126 Torrette di Ancona, Ancona (AN)
> Uff: +39 071 806 7743
> E-mail: stefano.sofia at regione.marche.it
> ---Oo---------oO----------------------------------------
>
> ________________________________
>
> AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere
> informazioni confidenziali, pertanto ? destinato solo a persone autorizzate
> alla ricezione. I messaggi di posta elettronica per i client di Regione
> Marche possono contenere informazioni confidenziali e con privilegi legali.
> Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o
> archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore,
> inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio
> computer. Ai sensi dell'art. 6 della DGR n. 1394/2008 si segnala che, in
> caso di necessit? ed urgenza, la risposta al presente messaggio di posta
> elettronica pu? essere visionata da persone estranee al destinatario.
> IMPORTANT NOTICE: This e-mail message is intended to be received only by
> persons entitled to receive the confidential information it may contain.
> E-mail messages to clients of Regione Marche may contain information that
> is confidential and legally privileged. Please do not read, copy, forward,
> or store this message unless you are an intended recipient of it. If you
> have received this message in error, please forward it to the sender and
> delete it completely from your computer system.
>
> --
> Questo messaggio  stato analizzato da Libraesva ESG ed  risultato non
> infetto.
> This message was scanned by Libraesva ESG and is believed to be clean.
>
>
>         [[alternative HTML version deleted]]
>
>
>
>
>
> ------------------------------
>
> Message: 4
> Date: Thu, 15 Dec 2022 09:31:51 -0800
> From: Bert Gunter <bgunter.4567 at gmail.com>
> To: Gerrit Eichner <gerrit.eichner at math.uni-giessen.de>,
>         stefano.sofia at regione.marche.it
> Cc: r-help at r-project.org
> Subject: Re: [R] Get data from a list of data frames
> Message-ID:
>         <
> CAGxFJbTgwQ2Nop0bjCzcT7Ri6FhDmOrXiXv+o2-2m_-sqZ6H_w at mail.gmail.com>
> Content-Type: text/plain; charset="utf-8"
>
> Well, just for giggles, Gerrit's solution can be easily vectorized (i.e. no
> apply()-type stuff needed) IFF the structure of all the data frames are
> identical so that rbind() works:
>
> d <-do.call('rbind',Total[select.stat]) ## one data frame to combine them
> all ;-)
> d[d$sensor == 'thermometer','code']
>
> Whether this is better, worse, or unneeded, I cannot say.
>
> Cheers,
> Bert
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Fri Dec 16 20:01:27 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 16 Dec 2022 11:01:27 -0800
Subject: [R] is.na()<- on a character vector
In-Reply-To: <CAGgJW74Rh1iGF2kJDMQQKP0zkDPVz7U=3fC0+pUBhoJGL=WKcQ@mail.gmail.com>
References: <82963314-1FD8-48AF-9D2D-311256A3A8FD@umu.se>
 <CAGgJW74Rh1iGF2kJDMQQKP0zkDPVz7U=3fC0+pUBhoJGL=WKcQ@mail.gmail.com>
Message-ID: <CAGxFJbQJhny8r=DjEEav8_B-oGF8+XYUOR8SkpO2KVR5fRs04Q@mail.gmail.com>

To do what the OP wanted, one can use:

x <- c('A', 'B')
is.na(x) <- x=='A'  ## rhs is a logical index vector

## yielding
> x
[1] NA  "B"

Cheers,
Bert

On Fri, Dec 16, 2022 at 10:43 AM Eric Berger <ericjberger at gmail.com> wrote:

> maybe this will make it clear
>
> x <- c(a=1, b=5)
> is.na(x) <- "b"
>
> i.e. your second case is dealing with a named vector
>
> HTH,
> Eric
>
>
> On Fri, Dec 16, 2022 at 8:29 PM G?ran Brostr?m <goran.brostrom at umu.se>
> wrote:
>
> > I'm confused:
> >
> > > x <- 1:2
> > > is.na(x) <- 1
> > > x
> > [1] NA  2
> >
> > OK, but
> >
> > > x <- c("A", "B")
> > > is.na(x) <- "A"
> > > x
> >                A
> > "A" "B"  NA
> >
> > What happens?
> >
> > G_ran
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From w||||@mwdun|@p @end|ng |rom gm@||@com  Fri Dec 16 20:14:24 2022
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Fri, 16 Dec 2022 11:14:24 -0800
Subject: [R] is.na()<- on a character vector
In-Reply-To: <82963314-1FD8-48AF-9D2D-311256A3A8FD@umu.se>
References: <82963314-1FD8-48AF-9D2D-311256A3A8FD@umu.se>
Message-ID: <CAHqSRuTmGTut3DzJKY0coyJy_miC4=uXCgi5vXeM9GXCLLC4Fw@mail.gmail.com>

I think that
   is.na(x) <- i
generally does the same to x as does
   x[i] <- NA

I say 'generally' because some classes (e.g., numeric_version) do not allow
x[i]<-NA but do allow is.na(x)<-i.  It is possible that some classes mess
up this equivalence, but I think that would be considered a bug.

-Bill

On Fri, Dec 16, 2022 at 10:29 AM G?ran Brostr?m <goran.brostrom at umu.se>
wrote:

> I'm confused:
>
> > x <- 1:2
> > is.na(x) <- 1
> > x
> [1] NA  2
>
> OK, but
>
> > x <- c("A", "B")
> > is.na(x) <- "A"
> > x
>                A
> "A" "B"  NA
>
> What happens?
>
> G_ran
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From gor@n@bro@trom @end|ng |rom umu@@e  Fri Dec 16 20:38:57 2022
From: gor@n@bro@trom @end|ng |rom umu@@e (=?Windows-1252?Q?G=F6ran_Brostr=F6m?=)
Date: Fri, 16 Dec 2022 19:38:57 +0000
Subject: [R] is.na()<- on a character vector
In-Reply-To: <CAHqSRuTmGTut3DzJKY0coyJy_miC4=uXCgi5vXeM9GXCLLC4Fw@mail.gmail.com>
References: <82963314-1FD8-48AF-9D2D-311256A3A8FD@umu.se>
 <CAHqSRuTmGTut3DzJKY0coyJy_miC4=uXCgi5vXeM9GXCLLC4Fw@mail.gmail.com>
Message-ID: <MM0P280MB0754D3D0860385177007762DFCE69@MM0P280MB0754.SWEP280.PROD.OUTLOOK.COM>

Yes, I was confused: In is.na(x) <-value, value is supposed to be an index vector, clearly stated on the help page. So Bert?s suggestion is the way to go.

Thanks to all, G?ran

-----Ursprungligt meddelande-----
Fr?n: Bill Dunlap <williamwdunlap at gmail.com>
Datum: fredag, 16 december 2022 20:15
Till: G?ran Brostr?m <goran.brostrom at umu.se>
Kopia: r-help at r-project.org <r-help at r-project.org>
?mne: Re: [R] is.na()<- on a character vector
I think that is.na <http://is.na/><http://is.na/%3e>(x) <- i
generally does the same to x as does
x[i] <- NA


I say 'generally' because some classes (e.g., numeric_version) do not allow x[i]<-NA but do allow is.na <http://is.na/><http://is.na/%3e>(x)<-i. It is possible that some classes mess up this equivalence, but I think that would be considered a bug.


-Bill


On Fri, Dec 16, 2022 at 10:29 AM G?ran Brostr?m <goran.brostrom at umu.se<mailto:goran.brostrom at umu.se> <mailto:goran.brostrom at umu.se<mailto:goran.brostrom at umu.se>>> wrote:

I'm confused:

> x <- 1:2
> is.na <http://is.na/><http://is.na/%3e>(x) <- 1
> x
[1] NA 2

OK, but

> x <- c("A", "B")
> is.na <http://is.na/><http://is.na/%3e>(x) <- "A"
> x
A
"A" "B" NA

What happens?

G_ran

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> <_blank> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help <https://stat.ethz.ch/mailman/listinfo/r-help><https://stat.ethz.ch/mailman/listinfo/r-help%3e>
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html <http://www.r-project.org/posting-guide.html><http://www.r-project.org/posting-guide.html%3e>
and provide commented, minimal, self-contained, reproducible code.



	[[alternative HTML version deleted]]


From bog@@o@chr|@to|er @end|ng |rom gm@||@com  Sat Dec 17 00:32:33 2022
From: bog@@o@chr|@to|er @end|ng |rom gm@||@com (Christofer Bogaso)
Date: Sat, 17 Dec 2022 05:02:33 +0530
Subject: [R] Adding comment in C++ code for debugging purpose
Message-ID: <CA+dpOJk+v_=KkYUDgc4NsWeTmOXk8TmLbAJOeuBt0YXLzF-pMg@mail.gmail.com>

Hi,

I am using an R package where there are some C++ code.

To check some intermediate values generated by that C++ code, I added
a line like

std::cout << "My values";

Now with this modification, I next build a modified package (source) using

R CMD build

Next I install this modified package using install.packages() function

However during the run-time of the C++ code with above modification, I
dont get any print with "My values"

Can you please help to understand why am not getting that printed?


From MP|rr|t@no @end|ng |rom |@c@re@org  Sat Dec 17 01:20:47 2022
From: MP|rr|t@no @end|ng |rom |@c@re@org (Matthew Pirritano)
Date: Sat, 17 Dec 2022 00:20:47 +0000
Subject: [R] datatable using dt not able to print background colors
Message-ID: <e3679aa262a44098af02aac2eaa5a453@lacare.org>

Hey, all!

I've got a report that uses datatable from DT to create an rmarkdown html that looks great as an html but when I try to print it, to a printer, or to a pdf the colors I've assigned to cells are not displaying. I'm using chrome and I've clicked on the Background graphics button there, but that doesn't help print the colors. I have tried to run the datatable section of the code using results = 'asis' and eliminating results = 'asis'. Neither seems to help with the

My css style at the top of the rmarkdown is

<style type="text/css">
.main-container {
  max-width: 1500px;
  margin-left: auto;
  margin-right: auto;
  table.display td { white-space: wrap; }

}
td{
  -webkit-print-color-adjust:exact !important;
  print-color-adjust:exact !important;
}
</style>

I added the webkit bit based on what I've found online. Maybe I have something set up incorrectly there? Any ideas or thoughts on how to get this to print the background colors?

Thanks
matt




________________________________

This communication is intended for the use of the individual or entity to which it is addressed and may contain information that is privileged, confidential or otherwise exempt from disclosure under applicable law. If you are not the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this communication in error, please notify the sender and delete any copies. Thank you.

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Dec 17 01:35:16 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Fri, 16 Dec 2022 16:35:16 -0800
Subject: [R] Adding comment in C++ code for debugging purpose
In-Reply-To: <CA+dpOJk+v_=KkYUDgc4NsWeTmOXk8TmLbAJOeuBt0YXLzF-pMg@mail.gmail.com>
References: <CA+dpOJk+v_=KkYUDgc4NsWeTmOXk8TmLbAJOeuBt0YXLzF-pMg@mail.gmail.com>
Message-ID: <596ED8D0-0BE3-4FBD-A125-B77B7996D71E@dcn.davis.ca.us>

a) This is not the Rcpp help list.

b) Writing to stdout without going through R is not supported in packages. Do read the Writing R Extensions manual.

On December 16, 2022 3:32:33 PM PST, Christofer Bogaso <bogaso.christofer at gmail.com> wrote:
>Hi,
>
>I am using an R package where there are some C++ code.
>
>To check some intermediate values generated by that C++ code, I added
>a line like
>
>std::cout << "My values";
>
>Now with this modification, I next build a modified package (source) using
>
>R CMD build
>
>Next I install this modified package using install.packages() function
>
>However during the run-time of the C++ code with above modification, I
>dont get any print with "My values"
>
>Can you please help to understand why am not getting that printed?
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sat Dec 17 07:09:31 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sat, 17 Dec 2022 06:09:31 +0000
Subject: [R] Adding comment in C++ code for debugging purpose
In-Reply-To: <CA+dpOJk+v_=KkYUDgc4NsWeTmOXk8TmLbAJOeuBt0YXLzF-pMg@mail.gmail.com>
References: <CA+dpOJk+v_=KkYUDgc4NsWeTmOXk8TmLbAJOeuBt0YXLzF-pMg@mail.gmail.com>
Message-ID: <eb5af383-59ee-eb75-df1d-9a7341a4c59f@sapo.pt>

?s 23:32 de 16/12/2022, Christofer Bogaso escreveu:
> Hi,
> 
> I am using an R package where there are some C++ code.
> 
> To check some intermediate values generated by that C++ code, I added
> a line like
> 
> std::cout << "My values";
> 
> Now with this modification, I next build a modified package (source) using
> 
> R CMD build
> 
> Next I install this modified package using install.packages() function
> 
> However during the run-time of the C++ code with above modification, I
> dont get any print with "My values"
> 
> Can you please help to understand why am not getting that printed?
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

Hello,

If the package uses Rcpp try instead


Rcpp::Rcout << "My values" << "\n";   // or std::endl


More generally, there is also


R_Print("My values\n");



Hope this helps,

Rui Barradas


From kry|ov@r00t @end|ng |rom gm@||@com  Sat Dec 17 09:23:41 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Sat, 17 Dec 2022 11:23:41 +0300
Subject: [R] Adding comment in C++ code for debugging purpose
In-Reply-To: <CA+dpOJk+v_=KkYUDgc4NsWeTmOXk8TmLbAJOeuBt0YXLzF-pMg@mail.gmail.com>
References: <CA+dpOJk+v_=KkYUDgc4NsWeTmOXk8TmLbAJOeuBt0YXLzF-pMg@mail.gmail.com>
Message-ID: <20221217112341.7204441f@Tarkus>

On Sat, 17 Dec 2022 05:02:33 +0530
Christofer Bogaso <bogaso.christofer at gmail.com> wrote:

> I am using an R package where there are some C++ code.
> 
> To check some intermediate values generated by that C++ code, I added
> a line like
> 
> std::cout << "My values";

A more efficient way of debugging C++ code running under R could be
with the use of a C++ debugger. For example,

0) Make sure you have GDB (or a different debugger, e.g. lldb on a Mac)
installed. You probably do, since you already have a working C++
toolchain.

1) Run R using the command line: R -g gdb. The debugger will start and
wait for your commands. Type: run. This will start R.

2) Type library(YOUR_PACKAGE_NAME) to load the package. You don't have
to do it in this order (GDB can remember to set a breakpoint on a
function that's not yet loaded in the address space), but this way you
can be sure about the name of the function.

3) Press Ctrl-C, sending an interrupt to the application. GDB handles
the interrupt and presents you with its prompt again. Type:
break YOUR_FUNCTION_NAME. If the function name is right, GDB will tell
you that a breakpoint is set. If not, it will ask you whether to
postpone setting a breakpoint until the function shows up. Since the
shared library should have been loaded by this time, the correct answer
would be probably "no".

4) Type: continue. The debugger will give the control back to R. You
can press Enter once and see R print the prompt symbol (">") again. Run
your code that uses the package.

5) Eventually, you'll hit the breakpoint and find yourself in the
debugger again. Like in the R browser, you can use "n" to step line by
line, "s" to step inside function calls, and "c" to continue execution
uninterrupted. You can also use "bt" and "frame NUMBER" to inspect the
call stack and "print EXPRESSION" to see the values of various objects.

A longer guide to GDB can be found at <https://beej.us/guide/bggdb/>.
Telling GDB where the package source code is [*] will ease the process
even further, as would obtaining debugging symbols and the source code
for R itself.

-- 
Best regards,
Ivan

[*]
https://sourceware.org/gdb/onlinedocs/gdb/Source-Path.html
https://alex.dzyoba.com/blog/gdb-source-path/


From po|c1410 @end|ng |rom gm@||@com  Sat Dec 17 09:27:56 2022
From: po|c1410 @end|ng |rom gm@||@com (CALUM POLWART)
Date: Sat, 17 Dec 2022 08:27:56 +0000
Subject: [R] datatable using dt not able to print background colors
In-Reply-To: <e3679aa262a44098af02aac2eaa5a453@lacare.org>
References: <e3679aa262a44098af02aac2eaa5a453@lacare.org>
Message-ID: <CA+etgP=en37_jvGqRb=ybw13+kYrk5G+RiQDVzVd2MS3gzdJUw@mail.gmail.com>

I don't think this is an R issue, it's a HTML tables issue // browser issue.

There are some hacks using background image (not R specific).

BUT before you do any of this... Consider if colour is your answer!  8% of
males are colour blind, so your table isn't as accessible as you may think
it is. That's before you get to people who print in B&W etc

On Sat, 17 Dec 2022, 00:21 Matthew Pirritano, <MPirritano at lacare.org> wrote:

> Hey, all!
>
> I've got a report that uses datatable from DT to create an rmarkdown html
> that looks great as an html but when I try to print it, to a printer, or to
> a pdf the colors I've assigned to cells are not displaying. I'm using
> chrome and I've clicked on the Background graphics button there, but that
> doesn't help print the colors. I have tried to run the datatable section of
> the code using results = 'asis' and eliminating results = 'asis'. Neither
> seems to help with the
>
> My css style at the top of the rmarkdown is
>
> <style type="text/css">
> .main-container {
>   max-width: 1500px;
>   margin-left: auto;
>   margin-right: auto;
>   table.display td { white-space: wrap; }
>
> }
> td{
>   -webkit-print-color-adjust:exact !important;
>   print-color-adjust:exact !important;
> }
> </style>
>
> I added the webkit bit based on what I've found online. Maybe I have
> something set up incorrectly there? Any ideas or thoughts on how to get
> this to print the background colors?
>
> Thanks
> matt
>
>
>
>
> ________________________________
>
> This communication is intended for the use of the individual or entity to
> which it is addressed and may contain information that is privileged,
> confidential or otherwise exempt from disclosure under applicable law. If
> you are not the intended recipient, you are hereby notified that any
> dissemination, distribution or copying of this communication is strictly
> prohibited. If you have received this communication in error, please notify
> the sender and delete any copies. Thank you.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From gb @end|ng |rom eh@r@@e  Fri Dec 16 20:12:56 2022
From: gb @end|ng |rom eh@r@@e (=?UTF-8?Q?G=c3=b6ran_Brostr=c3=b6m?=)
Date: Fri, 16 Dec 2022 20:12:56 +0100
Subject: [R] is.na()<- on a character vector
In-Reply-To: <1850D922-C9A8-4421-B7E1-5A33C1C47DCE@dcn.davis.ca.us>
References: <82963314-1FD8-48AF-9D2D-311256A3A8FD@umu.se>
 <1850D922-C9A8-4421-B7E1-5A33C1C47DCE@dcn.davis.ca.us>
Message-ID: <2054dd7a-099a-e728-075a-fc2604bcf63f@ehar.se>

Thanks to all. I was cofused and forgot that in is.na(x) <- value,
value is an index vector. Clearly stated on the help page. So Bert's 
suggestion is the right one.


Den 2022-12-16 kl. 19:44, skrev Jeff Newmiller:
> I don't find _either_ of these acceptable.
> 
> On the other hand,
> 
>      x[ is.na( x ) ] <- 1
> 
> should have no effect on x.
> 
> On December 16, 2022 10:28:52 AM PST, "G?ran Brostr?m" <goran.brostrom at umu.se> wrote:
>> I'm confused:
>>
>>> x <- 1:2
>>> is.na(x) <- 1
>>> x
>> [1] NA  2
>>
>> OK, but
>>
>>> x <- c("A", "B")
>>> is.na(x) <- "A"
>>> x
>>                A
>> "A" "B"  NA
>>
>> What happens?
>>
>> G_ran
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>


From bog@@o@chr|@to|er @end|ng |rom gm@||@com  Sat Dec 17 11:56:06 2022
From: bog@@o@chr|@to|er @end|ng |rom gm@||@com (Christofer Bogaso)
Date: Sat, 17 Dec 2022 16:26:06 +0530
Subject: [R] Adding comment in C++ code for debugging purpose
In-Reply-To: <20221217112341.7204441f@Tarkus>
References: <CA+dpOJk+v_=KkYUDgc4NsWeTmOXk8TmLbAJOeuBt0YXLzF-pMg@mail.gmail.com>
 <20221217112341.7204441f@Tarkus>
Message-ID: <CA+dpOJ=P=w2if9XMNSEa=7zMUg87DcJ+sJdV8dm=pb7BC2ydnA@mail.gmail.com>

Hi Ivan,

This is a very nice point. I will check this out.

Thanks and regards,

On Sat, Dec 17, 2022 at 1:53 PM Ivan Krylov <krylov.r00t at gmail.com> wrote:
>
> On Sat, 17 Dec 2022 05:02:33 +0530
> Christofer Bogaso <bogaso.christofer at gmail.com> wrote:
>
> > I am using an R package where there are some C++ code.
> >
> > To check some intermediate values generated by that C++ code, I added
> > a line like
> >
> > std::cout << "My values";
>
> A more efficient way of debugging C++ code running under R could be
> with the use of a C++ debugger. For example,
>
> 0) Make sure you have GDB (or a different debugger, e.g. lldb on a Mac)
> installed. You probably do, since you already have a working C++
> toolchain.
>
> 1) Run R using the command line: R -g gdb. The debugger will start and
> wait for your commands. Type: run. This will start R.
>
> 2) Type library(YOUR_PACKAGE_NAME) to load the package. You don't have
> to do it in this order (GDB can remember to set a breakpoint on a
> function that's not yet loaded in the address space), but this way you
> can be sure about the name of the function.
>
> 3) Press Ctrl-C, sending an interrupt to the application. GDB handles
> the interrupt and presents you with its prompt again. Type:
> break YOUR_FUNCTION_NAME. If the function name is right, GDB will tell
> you that a breakpoint is set. If not, it will ask you whether to
> postpone setting a breakpoint until the function shows up. Since the
> shared library should have been loaded by this time, the correct answer
> would be probably "no".
>
> 4) Type: continue. The debugger will give the control back to R. You
> can press Enter once and see R print the prompt symbol (">") again. Run
> your code that uses the package.
>
> 5) Eventually, you'll hit the breakpoint and find yourself in the
> debugger again. Like in the R browser, you can use "n" to step line by
> line, "s" to step inside function calls, and "c" to continue execution
> uninterrupted. You can also use "bt" and "frame NUMBER" to inspect the
> call stack and "print EXPRESSION" to see the values of various objects.
>
> A longer guide to GDB can be found at <https://beej.us/guide/bggdb/>.
> Telling GDB where the package source code is [*] will ease the process
> even further, as would obtaining debugging symbols and the source code
> for R itself.
>
> --
> Best regards,
> Ivan
>
> [*]
> https://sourceware.org/gdb/onlinedocs/gdb/Source-Path.html
> https://alex.dzyoba.com/blog/gdb-source-path/


From bog@@o@chr|@to|er @end|ng |rom gm@||@com  Sat Dec 17 12:05:20 2022
From: bog@@o@chr|@to|er @end|ng |rom gm@||@com (Christofer Bogaso)
Date: Sat, 17 Dec 2022 16:35:20 +0530
Subject: [R] Adding comment in C++ code for debugging purpose
In-Reply-To: <eb5af383-59ee-eb75-df1d-9a7341a4c59f@sapo.pt>
References: <CA+dpOJk+v_=KkYUDgc4NsWeTmOXk8TmLbAJOeuBt0YXLzF-pMg@mail.gmail.com>
 <eb5af383-59ee-eb75-df1d-9a7341a4c59f@sapo.pt>
Message-ID: <CA+dpOJ=4Crs7dywYzxOPVjhHj+_2LfrP3BPKVNWGbk-ZXeyhZA@mail.gmail.com>

Hi Rui,

Unfortunately, the code Rcpp::Rcout << "---------->>>>>.My values" <<
"\n"; still not printing the value.

Regarding your second suggestion, R_Print("My values\n"); - where
should I put this statement?

On Sat, Dec 17, 2022 at 11:39 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:
>
> ?s 23:32 de 16/12/2022, Christofer Bogaso escreveu:
> > Hi,
> >
> > I am using an R package where there are some C++ code.
> >
> > To check some intermediate values generated by that C++ code, I added
> > a line like
> >
> > std::cout << "My values";
> >
> > Now with this modification, I next build a modified package (source) using
> >
> > R CMD build
> >
> > Next I install this modified package using install.packages() function
> >
> > However during the run-time of the C++ code with above modification, I
> > dont get any print with "My values"
> >
> > Can you please help to understand why am not getting that printed?
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> Hello,
>
> If the package uses Rcpp try instead
>
>
> Rcpp::Rcout << "My values" << "\n";   // or std::endl
>
>
> More generally, there is also
>
>
> R_Print("My values\n");
>
>
>
> Hope this helps,
>
> Rui Barradas
>
>
>
>


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sat Dec 17 14:27:00 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sat, 17 Dec 2022 13:27:00 +0000
Subject: [R] Adding comment in C++ code for debugging purpose
In-Reply-To: <CA+dpOJ=4Crs7dywYzxOPVjhHj+_2LfrP3BPKVNWGbk-ZXeyhZA@mail.gmail.com>
References: <CA+dpOJk+v_=KkYUDgc4NsWeTmOXk8TmLbAJOeuBt0YXLzF-pMg@mail.gmail.com>
 <eb5af383-59ee-eb75-df1d-9a7341a4c59f@sapo.pt>
 <CA+dpOJ=4Crs7dywYzxOPVjhHj+_2LfrP3BPKVNWGbk-ZXeyhZA@mail.gmail.com>
Message-ID: <c6e3ca17-b248-e2a9-3434-ccf84f76eebb@sapo.pt>

?s 11:05 de 17/12/2022, Christofer Bogaso escreveu:
> Hi Rui,
> 
> Unfortunately, the code Rcpp::Rcout << "---------->>>>>.My values" <<
> "\n"; still not printing the value.
> 
> Regarding your second suggestion, R_Print("My values\n"); - where
> should I put this statement?
> 
> On Sat, Dec 17, 2022 at 11:39 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:
>>
>> ?s 23:32 de 16/12/2022, Christofer Bogaso escreveu:
>>> Hi,
>>>
>>> I am using an R package where there are some C++ code.
>>>
>>> To check some intermediate values generated by that C++ code, I added
>>> a line like
>>>
>>> std::cout << "My values";
>>>
>>> Now with this modification, I next build a modified package (source) using
>>>
>>> R CMD build
>>>
>>> Next I install this modified package using install.packages() function
>>>
>>> However during the run-time of the C++ code with above modification, I
>>> dont get any print with "My values"
>>>
>>> Can you please help to understand why am not getting that printed?
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>> Hello,
>>
>> If the package uses Rcpp try instead
>>
>>
>> Rcpp::Rcout << "My values" << "\n";   // or std::endl
>>
>>
>> More generally, there is also
>>
>>
>> R_Print("My values\n");
>>
>>
>>
>> Hope this helps,
>>
>> Rui Barradas
>>
>>
>>
>>

Hello,

Put R_Print where your cout is and instead of it.

As for Rcpp::Rcout, instead of "\n" try ending the line with std::endl 
to immediately flush the buffer.

Hope this helps,

Rui Barradas


From bog@@o@chr|@to|er @end|ng |rom gm@||@com  Sat Dec 17 14:38:51 2022
From: bog@@o@chr|@to|er @end|ng |rom gm@||@com (Christofer Bogaso)
Date: Sat, 17 Dec 2022 19:08:51 +0530
Subject: [R] Adding comment in C++ code for debugging purpose
In-Reply-To: <c6e3ca17-b248-e2a9-3434-ccf84f76eebb@sapo.pt>
References: <CA+dpOJk+v_=KkYUDgc4NsWeTmOXk8TmLbAJOeuBt0YXLzF-pMg@mail.gmail.com>
 <eb5af383-59ee-eb75-df1d-9a7341a4c59f@sapo.pt>
 <CA+dpOJ=4Crs7dywYzxOPVjhHj+_2LfrP3BPKVNWGbk-ZXeyhZA@mail.gmail.com>
 <c6e3ca17-b248-e2a9-3434-ccf84f76eebb@sapo.pt>
Message-ID: <CA+dpOJnBHfU_S1AakhgOJRqGEGnTM6civCHzdoEWbr7+e6ND6A@mail.gmail.com>

Hi,

Below is the position of Rcout and underlying C++ function

#ifdef _OPENMP
#include <omp.h>
#endif
// [[Rcpp::depends(RcppProgress)]]
#include <progress.hpp>
#include "cpploss.h"
#include <Rcpp.h>
#include <Rmath.h>
#include <iostream>

using namespace Rcpp;

// [[Rcpp::export]]
SEXP  GCPM_cpploss(SEXP default_distr_a,SEXP link_function_a, SEXP
S_a,SEXP Sigma_a, SEXP W_a, SEXP PD_a, SEXP PL_a, SEXP calc_rc_a, SEXP
loss_thr_a, SEXP max_entries_a){
  Rcpp::Rcout << "Some Value" << std::endl << 1.23 << std::endl;
  NumericMatrix S(S_a), W(W_a),Sigma(Sigma_a);
  NumericVector PD(PD_a),
PL(PL_a),max_entries(max_entries_a),default_distr(default_distr_a),link_function(link_function_a),calc_rc(calc_rc_a),loss_thr(loss_thr_a);
  List ret;

etc

This still does not print in the console.

Not sure if I am missing something.

Thanks and regards,

On Sat, Dec 17, 2022 at 6:57 PM Rui Barradas <ruipbarradas at sapo.pt> wrote:
>
> ?s 11:05 de 17/12/2022, Christofer Bogaso escreveu:
> > Hi Rui,
> >
> > Unfortunately, the code Rcpp::Rcout << "---------->>>>>.My values" <<
> > "\n"; still not printing the value.
> >
> > Regarding your second suggestion, R_Print("My values\n"); - where
> > should I put this statement?
> >
> > On Sat, Dec 17, 2022 at 11:39 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:
> >>
> >> ?s 23:32 de 16/12/2022, Christofer Bogaso escreveu:
> >>> Hi,
> >>>
> >>> I am using an R package where there are some C++ code.
> >>>
> >>> To check some intermediate values generated by that C++ code, I added
> >>> a line like
> >>>
> >>> std::cout << "My values";
> >>>
> >>> Now with this modification, I next build a modified package (source) using
> >>>
> >>> R CMD build
> >>>
> >>> Next I install this modified package using install.packages() function
> >>>
> >>> However during the run-time of the C++ code with above modification, I
> >>> dont get any print with "My values"
> >>>
> >>> Can you please help to understand why am not getting that printed?
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >>
> >> Hello,
> >>
> >> If the package uses Rcpp try instead
> >>
> >>
> >> Rcpp::Rcout << "My values" << "\n";   // or std::endl
> >>
> >>
> >> More generally, there is also
> >>
> >>
> >> R_Print("My values\n");
> >>
> >>
> >>
> >> Hope this helps,
> >>
> >> Rui Barradas
> >>
> >>
> >>
> >>
>
> Hello,
>
> Put R_Print where your cout is and instead of it.
>
> As for Rcpp::Rcout, instead of "\n" try ending the line with std::endl
> to immediately flush the buffer.
>
> Hope this helps,
>
> Rui Barradas
>
>


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sat Dec 17 19:47:33 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sat, 17 Dec 2022 18:47:33 +0000
Subject: [R] Adding comment in C++ code for debugging purpose
In-Reply-To: <CA+dpOJnBHfU_S1AakhgOJRqGEGnTM6civCHzdoEWbr7+e6ND6A@mail.gmail.com>
References: <CA+dpOJk+v_=KkYUDgc4NsWeTmOXk8TmLbAJOeuBt0YXLzF-pMg@mail.gmail.com>
 <eb5af383-59ee-eb75-df1d-9a7341a4c59f@sapo.pt>
 <CA+dpOJ=4Crs7dywYzxOPVjhHj+_2LfrP3BPKVNWGbk-ZXeyhZA@mail.gmail.com>
 <c6e3ca17-b248-e2a9-3434-ccf84f76eebb@sapo.pt>
 <CA+dpOJnBHfU_S1AakhgOJRqGEGnTM6civCHzdoEWbr7+e6ND6A@mail.gmail.com>
Message-ID: <21a97733-7138-b36b-ba0f-67b313697521@sapo.pt>

?s 13:38 de 17/12/2022, Christofer Bogaso escreveu:
> Hi,
> 
> Below is the position of Rcout and underlying C++ function
> 
> #ifdef _OPENMP
> #include <omp.h>
> #endif
> // [[Rcpp::depends(RcppProgress)]]
> #include <progress.hpp>
> #include "cpploss.h"
> #include <Rcpp.h>
> #include <Rmath.h>
> #include <iostream>
> 
> using namespace Rcpp;
> 
> // [[Rcpp::export]]
> SEXP  GCPM_cpploss(SEXP default_distr_a,SEXP link_function_a, SEXP
> S_a,SEXP Sigma_a, SEXP W_a, SEXP PD_a, SEXP PL_a, SEXP calc_rc_a, SEXP
> loss_thr_a, SEXP max_entries_a){
>    Rcpp::Rcout << "Some Value" << std::endl << 1.23 << std::endl;
>    NumericMatrix S(S_a), W(W_a),Sigma(Sigma_a);
>    NumericVector PD(PD_a),
> PL(PL_a),max_entries(max_entries_a),default_distr(default_distr_a),link_function(link_function_a),calc_rc(calc_rc_a),loss_thr(loss_thr_a);
>    List ret;
> 
> etc
> 
> This still does not print in the console.
> 
> Not sure if I am missing something.
> 
> Thanks and regards,
> 
> On Sat, Dec 17, 2022 at 6:57 PM Rui Barradas <ruipbarradas at sapo.pt> wrote:
>>
>> ?s 11:05 de 17/12/2022, Christofer Bogaso escreveu:
>>> Hi Rui,
>>>
>>> Unfortunately, the code Rcpp::Rcout << "---------->>>>>.My values" <<
>>> "\n"; still not printing the value.
>>>
>>> Regarding your second suggestion, R_Print("My values\n"); - where
>>> should I put this statement?
>>>
>>> On Sat, Dec 17, 2022 at 11:39 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:
>>>>
>>>> ?s 23:32 de 16/12/2022, Christofer Bogaso escreveu:
>>>>> Hi,
>>>>>
>>>>> I am using an R package where there are some C++ code.
>>>>>
>>>>> To check some intermediate values generated by that C++ code, I added
>>>>> a line like
>>>>>
>>>>> std::cout << "My values";
>>>>>
>>>>> Now with this modification, I next build a modified package (source) using
>>>>>
>>>>> R CMD build
>>>>>
>>>>> Next I install this modified package using install.packages() function
>>>>>
>>>>> However during the run-time of the C++ code with above modification, I
>>>>> dont get any print with "My values"
>>>>>
>>>>> Can you please help to understand why am not getting that printed?
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>> Hello,
>>>>
>>>> If the package uses Rcpp try instead
>>>>
>>>>
>>>> Rcpp::Rcout << "My values" << "\n";   // or std::endl
>>>>
>>>>
>>>> More generally, there is also
>>>>
>>>>
>>>> R_Print("My values\n");
>>>>
>>>>
>>>>
>>>> Hope this helps,
>>>>
>>>> Rui Barradas
>>>>
>>>>
>>>>
>>>>
>>
>> Hello,
>>
>> Put R_Print where your cout is and instead of it.
>>
>> As for Rcpp::Rcout, instead of "\n" try ending the line with std::endl
>> to immediately flush the buffer.
>>
>> Hope this helps,
>>
>> Rui Barradas
>>
>>
Hello,

1. Forget R_print, it is meant for C code, not for Rcpp.
    Besides, it is also an error of mine, I was thinking about Rprintf, 
see below.

2. The following works as expected.
    It's the first example in

vignette("Rcpp-introduction", package = "Rcpp")

    with the if/Rcout and Rprintf instructions added.



File: convolve_rcpp.cpp



#include "Rcpp.h"

using namespace Rcpp;
// [[Rcpp::export]]
NumericVector convolve_cpp(const NumericVector& a, const NumericVector& b) {
   // Declare loop counters, and vector sizes
   int i, j,
	na = a.size(), nb = b.size(),
	nab = na + nb - 1;
	// Create vector filled with 0
	NumericVector ab(nab);
	// Crux of the algorithm
	for(i = 0; i < na; i++) {
		// this works as expected, it prints to the console
		// printing is on every 10 times through the loop
		if(i % 10 == 0)  {
			Rcpp::Rcout << "Some Value " << i << "\n";
			Rcpp::Rcout << "     Value " << a[i] << std::endl;
		}
		for(j = 0; j < nb; j++) {
			ab[i + j] += a[i] * b[j];
		}
	}
	Rprintf("Done\n");
	// Return result
	return ab;
}



Then run the R script


path <- "~/path/to/Rcpp/code"
fl <- list.files(path, pattern = "convolve\\.cpp")
fl <- file.path(path, fl)

Rcpp::sourceCpp(fl)

x <- 1:1e4
y <- 10:1

z <- convolve_cpp(x, y)
str(z)
# num [1:10009] 10 29 56 90 130 175 224 276 330 385 ...


Hope this helps,

Rui Barradas


From m|ch@e|@e|@enr|ng @end|ng |rom gmx@ch  Sat Dec 17 21:22:42 2022
From: m|ch@e|@e|@enr|ng @end|ng |rom gmx@ch (Michael Eisenring)
Date: Sat, 17 Dec 2022 21:22:42 +0100
Subject: [R] piecewiseSEM two errors: arguments imply different numbers of
 rows / object 'ret' not found
Message-ID: <004b01d91255$519cf020$f4d6d060$@gmx.ch>

Dear Rlist members,

We are trying to run a SEM with your package. Unfortunaley while running our
code two error messages popped up. For the life of us we could not figure
out how to solve these errors . We are hoping very much that somebody can
help us: Why do we get these error messages? We built our model structure
using an example from the piecewiseSEM  package and we double checked the
that we do not have any "NAs" in our data set. Thanks a ton!



Error1:
Error in data.frame(..., check.names = FALSE) :
arguments imply different numbers of rows: 166, 0



Error2: (we ran the model with a smaller,simpler SEM)
Error in cbind(ret, isSig(ret[, 5])) : object 'ret' not found





Below is our code and the data (as "dput()")



# dataCode: (see dput(dataCode) at the very end



library (glmmTMB)
library(lme4)
library(DHARMa)#check for Overdispersion
library(piecewiseSEM)
library(lavaan)

str(dataCode)
summary(dataCode)



#define factors
dataCode$Year<-factor(dataCode$Year)
#relevel(dataCode$Year,ref="2019")
dataCode$Stand<-as.factor(dataCode$Stand)
dataCode$TreeNo <-as.factor(dataCode$TreeNo)
dataCode$Drought <-as.factor(dataCode$Drought)
#relevel(dataCode$Drought,ref="0")
dataCode$Stratum <-as.factor(dataCode$Stratum)
levels(dataCode$Stratum) <- list(lower = "shade", upper = "sun")
#relevel(dataCode$Stratum,ref="sun")
dataCode$Location <-as.factor(dataCode$Location)
dataCode$Tree.ID <-as.factor(dataCode$Tree.ID)



# Models for SEM

mod1x<-lmer(N_pc~StratumDrought+YearDrought+(1|Tree.ID),data)
#Check assumptions
simulationOutput <- simulateResiduals(fittedModel = mod1x)
plot(simulationOutput)
summary(mod1x)

mod2x<-lmer(log(Fiber)~StratumDrought+YearDrought+(1|Tree.ID),data)
#Check assumptions
simulationOutput <- simulateResiduals(fittedModel = mod2x)
plot(simulationOutput)
summary(mod2x)

mod3x<-lmer(Lignin~StratumDrought+YearDrought+(1|Tree.ID),data)
#Check assumptions
simulationOutput <- simulateResiduals(fittedModel = mod3x)
plot(simulationOutput)
summary(mod3x)

mod11a<-glmer(prop_suck~N_pc+(1|Tree.ID),
data=data, family=binomial(link = "logit"), weights=weight_suck)

mod12a<-glmmTMB(prop_suck~Fiber+(1|Tree.ID),
data=data, family=betabinomial(link = "logit"), weights=weight_suck)

mod13a<-glmmTMB(prop_suck~Lignin+(1|Tree.ID),
data=data, family=betabinomial(link = "logit"), weights=weight_suck)

newlist2 = list(
mod1x, mod2x, mod3x, mod11a, mod12a, mod13a)
model<-as.psem(newlist2)#Error1:-------------------!



#We then ran a model with a simpler model structure, to double check if the
error occured due to the model structure
#Error 1 did not appear anymore. However, error 2 popped up-------------!

modlist = list(
mod1x, mod11a)
model<-as.psem(modlist)
summary(model) #Error1:





#DATA

    dput(dataCode)
    structure(list(Tree.ID = structure(c(1L, 1L, 2L, 2L, 3L, 3L,
    4L, 4L, 5L, 5L, 6L, 6L, 7L, 7L, 8L, 8L, 9L, 9L, 10L, 10L, 11L,
    11L, 12L, 12L, 13L, 13L, 14L, 14L, 15L, 15L, 16L, 16L, 17L, 17L,
    18L, 18L, 19L, 19L, 20L, 20L, 21L, 21L, 22L, 22L, 23L, 23L, 24L,
    24L, 25L, 25L, 26L, 26L, 27L, 27L, 28L, 28L, 29L, 29L, 30L, 30L,
    31L, 31L, 32L, 32L, 33L, 33L, 34L, 34L, 35L, 35L, 36L, 36L, 37L,
    37L, 38L, 38L, 39L, 39L, 40L, 40L, 41L, 41L, 42L, 42L, 43L, 43L,
    44L, 44L, 45L, 45L, 46L, 46L, 47L, 47L, 48L, 48L, 1L, 1L, 2L,
    2L, 3L, 3L, 10L, 10L, 11L, 11L, 12L, 12L, 13L, 13L, 14L, 14L,
    15L, 15L, 16L, 16L, 17L, 17L, 18L, 18L, 19L, 19L, 21L, 21L, 22L,
    22L, 23L, 23L, 24L, 24L, 25L, 25L, 26L, 26L, 27L, 27L, 28L, 28L,
    29L, 29L, 30L, 30L, 31L, 31L, 32L, 32L, 33L, 33L, 37L, 37L, 38L,
    38L, 39L, 39L, 43L, 43L, 44L, 44L, 45L, 45L, 46L, 46L, 47L, 47L,
    48L, 48L), .Label = c("102_6", "102_7", "102_8", "105_1", "105_2",
    "105_4", "111_7", "111_8", "111_9", "113_2", "113_4", "113_5",
    "114_7", "114_8", "114_9", "116_6", "116_7", "116_9", "122_3",
    "122_4", "122_5", "132_3", "132_4", "132_5", "242_2", "242_4",
    "242_5", "243_1", "243_2", "243_4", "245_1", "245_2", "245_5",
    "246_1", "246_2", "246_3", "251_10", "251_8", "251_9", "253_7",
    "253_8", "253_9", "254_6", "254_7", "254_8", "267_10", "267_6",
    "267_8"), class = "factor"), Year = structure(c(1L, 1L, 1L, 1L,
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L,
    2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
    2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
    2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
    2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
    2L, 2L), .Label = c("1", "2"), class = "factor"), Drought =
structure(c(1L,
    1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L,
    1L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
    1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
    2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
    2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
    1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L,
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
    2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
    2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
    1L, 1L, 1L, 1L, 1L), .Label = c("no", "yes"), class = "factor"),
    Stratum = structure(c(1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L,
    2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L,
    1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L,
    2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L,
    1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L,
    2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L,
    1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L,
    2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L,
    1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L,
    2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L,
    1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L,
    2L, 1L, 2L, 1L, 2L, 1L, 2L), .Label = c("lower", "upper"), class =
"factor"),
    prop_suck = c(0, 0, 0.04, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.08, 0.02, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0.08, 0, 0, 0, 0.06, 0, 0, 0, 0, 0,
    0, 0, 0.02, 0, 0, 0, 0.12, 0, 0.12, 0.04, 0.1, 0, 0.4, 0.7,
    0.08, 0, 0.16, 0, 0, 0, 0, 0, 0, 0.02, 0, 0, 0, 0.16, 0.04,
    0.04, 0, 0.04, 0.96, 0, 0, 0, 0, 0.06, 0.44, 0.46, 0.28,
    0.04, 0, 0.02, 0.02, 0, 0, 0, 0.54, 0.5, 0.32, 0.26, 0.62,
    0.36, 0.62, 0.04, 0.5, 0.32, 0.72, 0.42, 0.16, 0.46, 0.26,
    0.22, 0.14, 0, 0.7, 0.14, 0.34, 0.08, 0.8, 0, 0.96, 0.34,
    0.32, 0.2, 0.68, 0.12, 0.92, 0.14, 0.52, 0.24, 0.48, 0.54,
    0.62, 0.5, 0.68, 0.42, 0.88, 0.46, 0.8, 0.6, 0.5, 0.36, 0.7,
    0.2, 0.12, 0.2, 0.58, 0.1, 0.48, 0.32, 0.38, 0.22, 0.42,
    0.2, 0.36, 0.36, 0.84, 0.66, 0.32, 0.62, 0.32, 0.76, 0.74,
    0.56, 0.18, 0.7), N_pc = c(2.27, 2.37, 2.39, 1.9, 2.08, 2.65,
    2.25, 2.04, 2.04, 1.81, 3.03, 2.9, 2.11, 2.26, 2.38, 2.51,
    2, 2.31, 2.71, 2.02, 2.37, 2.04, 1.95, 2.21, 2.31, 2.39,
    2.24, 2.2, 1.94, 2.12, 2.27, 2.15, 2.5, 2.36, 2.1, 2.29,
    2.55, 2.39, 2.96, 2.26, 2.75, 2.71, 2.81, 2.79, 2.68, 2.51,
    2.17, 2.18, 2.41, 2.19, 2.48, 2.19, 2.42, 1.82, 1.83, 1.65,
    1.91, 2.04, 1.96, 1.88, 2.59, 1.85, 2.32, 1.95, 2.09, 1.97,
    2.65, 1.8, 2.2, 2.26, 2.32, 1.5, 2.16, 2.37, 2.13, 2.54,
    2.19, 1.97, 1.78, 2.29, 1.64, 1.67, 1.98, 1.79, 1.77, 2.03,
    1.68, 2.08, 2.145, 2.08, 1.8, 1.99, 1.99, 2.07, 1.98, 2.41,
    2.83, 2.83, 2.91, 2.61, 2.73, 2.54, 2.87, 1.91, 2.84, 2.74,
    2.87, 2.6, 2.12, 2.64, 2.46, 1.83, 2.06, 2.01, 2.77, 2.41,
    2.74, 2.83, 2.51, 2.23, 2.79, 2.66, 2.44, 2.26, 2.85, 2.39,
    2.52, 2.13, 2.63, 2, 2.43, 2.36, 2.98, 2.28, 2.12, 2.2, 2.54,
    1.28, 2.57, 2.17, 2.32, 2.41, 3.11, 2.591, 2.77, 2.53, 2.67,
    2.45, 2.5, 2.52, 2.9, 3.03, 2.83, 2.52, 2.57, 2.62, 2.82,
    2.62, 2.98, 3.01, 2.33, 2.11, 2.68, 2.74, 2.53, 2.43), weight_suck =
c(50L,
    50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L,
    50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L,
    50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L,
    50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L,
    50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L,
    50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L,
    50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L,
    50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L,
    50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L,
    50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L,
    50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L,
    50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L,
    50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L,
    50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L), Fiber = c(34.40884091,
    35.2306534, 42.52377866, 42.6239323, 41.37861255, 39.60850525,
    40.77050193, 43.93561888, 39.85530862, 47.96389221, 33.0164353,
    30.40923171, 35.80926768, 38.81499295, 39.78981471, 37.98513805,
    37.573016, 39.75442555, 43.30493722, 39.75062718, 42.44068598,
    35.17589695, 35.56906323, 37.34316461, 40.01927247, 39.99513562,
    36.10434999, 31.57573919, 37.76346099, 37.01815172, 35.59629643,
    33.81374455, 37.7827112, 41.28445751, 44.78743608, 34.6394122,
    36.30284612, 34.97437449, 41.00523545, 30.91747143, 32.55332568,
    32.79375305, 37.51461304, 32.62951938, 40.22559027, 35.43271959,
    39.22368591, 34.32029979, 36.41313697, 36.69822326, 37.82870726,
    37.85527277, 33.87219095, 36.98176526, 38.04943022, 33.45063417,
    36.48627741, 34.46249903, 40.17607643, 36.77713573, 37.98619139,
    35.84260289, 37.21843053, 34.84469437, 34.85470551, 33.62314136,
    35.04788627, 30.45543443, 43.14168551, 32.23039161, 37.60287057,
    34.1427031, 36.52037605, 37.12821519, 43.96781779, 33.21707461,
    43.03781432, 38.29479565, 40.07726219, 37.64961992, 48.82421591,
    39.26134049, 37.62558769, 36.19289482, 41.39539765, 38.87860666,
    36.05830446, 32.07757032, 42.788655, 33.86701205, 38.23211694,
    37.89539959, 40.83433837, 38.98175173, 42.83170351, 32.28967624,
    33.40239455, 30.92484799, 41.56156442, 34.52930045, 37.75300976,
    35.11156393, 39.77687654, 37.98805055, 41.70620266, 31.89415684,
    37.68184859, 34.08114509, 34.06411083, 32.23348721, 35.77634719,
    21.0576573, 37.76348306, 33.53117231, 40.82264211, 31.19388514,
    40.52910082, 27.5031154, 44.50618538, 34.4669349, 30.43628015,
    29.89229346, 32.01075647, 35.07254143, 36.57868878, 28.81559417,
    36.08462737, 32.86246536, 39.9152505, 36.25423072, 33.51569525,
    34.1055226, 38.99118341, 34.53641033, 33.31288766, 31.55618034,
    39.31931333, 33.72025274, 34.7083208, 26.84760505, 39.14884466,
    34.79548574, 32.81360389, 27.78493879, 30.66829851, 31.03727751,
    35.11616534, 29.20690552, 37.48964989, 39.94816985, 41.784186,
    36.40317336, 38.77327649, 33.47088406, 35.79855367, 32.94104157,
    37.22816497, 29.32884218, 41.30883178, 28.85842064, 39.21708069,
    29.93973518, 33.68385156, 25.26360465, 40.07343771, 31.24653541
    ), Lignin = c(15.77477865, 16.42526338, 17.81644946, 20.06733454,
    17.33068939, 14.46313636, 19.26461698, 22.46710162, 18.35008435,
    18.43243391, 13.03248943, 11.61623759, 15.40895691, 16.9786809,
    16.54312915, 18.33763105, 12.25320976, 16.10339902, 16.68427585,
    17.37699268, 11.72959086, 17.82961819, 10.33102761, 8.329309218,
    16.75329644, 16.79263461, 14.56578061, 15.69875657, 9.275559568,
    16.18115984, 13.28899644, 14.52231091, 14.33797056, 19.388317,
    14.28128214, 12.86508109, 16.54174245, 16.88950337, 16.45236853,
    7.719036205, 13.6909977, 11.48255674, 15.13737491, 15.3591499,
    16.54946312, 16.14769987, 13.06144297, 11.9173863, 13.43299545,
    16.00143957, 17.2118779, 18.19980232, 10.99738867, 13.63569839,
    15.48144654, 16.1216259, 16.15568311, 17.6101268, 17.30451969,
    14.02253261, 15.43141658, 16.181513, 17.15827242, 17.52861195,
    12.35996713, 15.49034533, 13.97079366, 13.28841472, 17.82642197,
    14.89135477, 15.27588696, 16.19873246, 11.99168197, 17.9882092,
    18.70442548, 16.92756747, 17.30466149, 16.84557327, 16.57039627,
    17.50814734, 21.76822852, 20.26882409, 9.727735965, 15.00439034,
    17.12361186, 16.14717619, 12.68400834, 15.64995633, 17.8633547,
    12.42028546, 14.25760982, 17.83796088, 18.18472772, 19.53135651,
    18.08016466, 14.49582092, 13.52200059, 13.59905485, 18.16177538,
    16.35014138, 14.96662393, 17.79704702, 14.62402094, 21.42942615,
    16.86764575, 13.75565413, 14.82599948, 15.76083246, 11.45566254,
    13.43780268, 12.93398942, 13.48983266, 15.65273017, 15.51102512,
    16.26246545, 13.86332043, 16.06911693, 12.6946718, 18.10567384,
    16.67871224, 10.8869382, 15.31810574, 14.50440655, 18.1268646,
    14.02630853, 9.166241719, 14.59336183, 16.33293006, 16.055571,
    18.51528605, 11.34765726, 15.06734566, 16.87036405, 17.46982479,
    15.66135144, 13.71222274, 16.19165545, 16.624473, 15.57975641,
    13.00605673, 14.73386658, 15.76925648, 14.04065352, 12.18372012,
    12.05766404, 14.54563609, 14.26939499, 14.72744808, 14.11437465,
    18.4789298, 18.01551264, 16.10259417, 14.02537363, 14.58450423,
    11.04102835, 13.40957054, 16.8431013, 9.535932181, 16.83859843,
    13.05088673, 15.5745046, 14.46076877, 11.98007904, 11.38534032,
    15.20342847, 11.4316122)), class = "data.frame", row.names = c(NA,
    -166L))




	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Sat Dec 17 21:46:26 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 17 Dec 2022 12:46:26 -0800
Subject: [R] 
 piecewiseSEM two errors: arguments imply different numbers of
 rows / object 'ret' not found
In-Reply-To: <004b01d91255$519cf020$f4d6d060$@gmx.ch>
References: <004b01d91255$519cf020$f4d6d060$@gmx.ch>
Message-ID: <CAGxFJbRJhgtPYNF4C6ioT4=oM-T_M8pqbvQEuMZBJCRKX=hdWw@mail.gmail.com>

Someone may be able to help (but not I); but please see ?debug,  ?recover,
?traceback.
Debugging is an essential task for any programming language. You should
learn how to use R's tools to do this. I believe you would be able to find
the error yourself if you did so.

Cheers,
Bert



On Sat, Dec 17, 2022 at 12:23 PM Michael Eisenring <michael.eisenring at gmx.ch>
wrote:

> Dear Rlist members,
>
> We are trying to run a SEM with your package. Unfortunaley while running
> our
> code two error messages popped up. For the life of us we could not figure
> out how to solve these errors . We are hoping very much that somebody can
> help us: Why do we get these error messages? We built our model structure
> using an example from the piecewiseSEM  package and we double checked the
> that we do not have any "NAs" in our data set. Thanks a ton!
>
>
>
> Error1:
> Error in data.frame(..., check.names = FALSE) :
> arguments imply different numbers of rows: 166, 0
>
>
>
> Error2: (we ran the model with a smaller,simpler SEM)
> Error in cbind(ret, isSig(ret[, 5])) : object 'ret' not found
>
>
>
>
>
> Below is our code and the data (as "dput()")
>
>
>
> # dataCode: (see dput(dataCode) at the very end
>
>
>
> library (glmmTMB)
> library(lme4)
> library(DHARMa)#check for Overdispersion
> library(piecewiseSEM)
> library(lavaan)
>
> str(dataCode)
> summary(dataCode)
>
>
>
> #define factors
> dataCode$Year<-factor(dataCode$Year)
> #relevel(dataCode$Year,ref="2019")
> dataCode$Stand<-as.factor(dataCode$Stand)
> dataCode$TreeNo <-as.factor(dataCode$TreeNo)
> dataCode$Drought <-as.factor(dataCode$Drought)
> #relevel(dataCode$Drought,ref="0")
> dataCode$Stratum <-as.factor(dataCode$Stratum)
> levels(dataCode$Stratum) <- list(lower = "shade", upper = "sun")
> #relevel(dataCode$Stratum,ref="sun")
> dataCode$Location <-as.factor(dataCode$Location)
> dataCode$Tree.ID <-as.factor(dataCode$Tree.ID)
>
>
>
> # Models for SEM
>
> mod1x<-lmer(N_pc~StratumDrought+YearDrought+(1|Tree.ID),data)
> #Check assumptions
> simulationOutput <- simulateResiduals(fittedModel = mod1x)
> plot(simulationOutput)
> summary(mod1x)
>
> mod2x<-lmer(log(Fiber)~StratumDrought+YearDrought+(1|Tree.ID),data)
> #Check assumptions
> simulationOutput <- simulateResiduals(fittedModel = mod2x)
> plot(simulationOutput)
> summary(mod2x)
>
> mod3x<-lmer(Lignin~StratumDrought+YearDrought+(1|Tree.ID),data)
> #Check assumptions
> simulationOutput <- simulateResiduals(fittedModel = mod3x)
> plot(simulationOutput)
> summary(mod3x)
>
> mod11a<-glmer(prop_suck~N_pc+(1|Tree.ID),
> data=data, family=binomial(link = "logit"), weights=weight_suck)
>
> mod12a<-glmmTMB(prop_suck~Fiber+(1|Tree.ID),
> data=data, family=betabinomial(link = "logit"), weights=weight_suck)
>
> mod13a<-glmmTMB(prop_suck~Lignin+(1|Tree.ID),
> data=data, family=betabinomial(link = "logit"), weights=weight_suck)
>
> newlist2 = list(
> mod1x, mod2x, mod3x, mod11a, mod12a, mod13a)
> model<-as.psem(newlist2)#Error1:-------------------!
>
>
>
> #We then ran a model with a simpler model structure, to double check if the
> error occured due to the model structure
> #Error 1 did not appear anymore. However, error 2 popped up-------------!
>
> modlist = list(
> mod1x, mod11a)
> model<-as.psem(modlist)
> summary(model) #Error1:
>
>
>
>
>
> #DATA
>
>     dput(dataCode)
>     structure(list(Tree.ID = structure(c(1L, 1L, 2L, 2L, 3L, 3L,
>     4L, 4L, 5L, 5L, 6L, 6L, 7L, 7L, 8L, 8L, 9L, 9L, 10L, 10L, 11L,
>     11L, 12L, 12L, 13L, 13L, 14L, 14L, 15L, 15L, 16L, 16L, 17L, 17L,
>     18L, 18L, 19L, 19L, 20L, 20L, 21L, 21L, 22L, 22L, 23L, 23L, 24L,
>     24L, 25L, 25L, 26L, 26L, 27L, 27L, 28L, 28L, 29L, 29L, 30L, 30L,
>     31L, 31L, 32L, 32L, 33L, 33L, 34L, 34L, 35L, 35L, 36L, 36L, 37L,
>     37L, 38L, 38L, 39L, 39L, 40L, 40L, 41L, 41L, 42L, 42L, 43L, 43L,
>     44L, 44L, 45L, 45L, 46L, 46L, 47L, 47L, 48L, 48L, 1L, 1L, 2L,
>     2L, 3L, 3L, 10L, 10L, 11L, 11L, 12L, 12L, 13L, 13L, 14L, 14L,
>     15L, 15L, 16L, 16L, 17L, 17L, 18L, 18L, 19L, 19L, 21L, 21L, 22L,
>     22L, 23L, 23L, 24L, 24L, 25L, 25L, 26L, 26L, 27L, 27L, 28L, 28L,
>     29L, 29L, 30L, 30L, 31L, 31L, 32L, 32L, 33L, 33L, 37L, 37L, 38L,
>     38L, 39L, 39L, 43L, 43L, 44L, 44L, 45L, 45L, 46L, 46L, 47L, 47L,
>     48L, 48L), .Label = c("102_6", "102_7", "102_8", "105_1", "105_2",
>     "105_4", "111_7", "111_8", "111_9", "113_2", "113_4", "113_5",
>     "114_7", "114_8", "114_9", "116_6", "116_7", "116_9", "122_3",
>     "122_4", "122_5", "132_3", "132_4", "132_5", "242_2", "242_4",
>     "242_5", "243_1", "243_2", "243_4", "245_1", "245_2", "245_5",
>     "246_1", "246_2", "246_3", "251_10", "251_8", "251_9", "253_7",
>     "253_8", "253_9", "254_6", "254_7", "254_8", "267_10", "267_6",
>     "267_8"), class = "factor"), Year = structure(c(1L, 1L, 1L, 1L,
>     1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
>     1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
>     1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
>     1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
>     1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
>     1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L,
>     2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
>     2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
>     2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
>     2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
>     2L, 2L), .Label = c("1", "2"), class = "factor"), Drought =
> structure(c(1L,
>     1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L,
>     1L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
>     1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
>     2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
>     2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
>     1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
>     1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L,
>     1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
>     2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
>     2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
>     1L, 1L, 1L, 1L, 1L), .Label = c("no", "yes"), class = "factor"),
>     Stratum = structure(c(1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L,
>     2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L,
>     1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L,
>     2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L,
>     1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L,
>     2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L,
>     1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L,
>     2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L,
>     1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L,
>     2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L,
>     1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L,
>     2L, 1L, 2L, 1L, 2L, 1L, 2L), .Label = c("lower", "upper"), class =
> "factor"),
>     prop_suck = c(0, 0, 0.04, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
>     0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.08, 0.02, 0, 0, 0, 0, 0,
>     0, 0, 0, 0, 0, 0, 0, 0.08, 0, 0, 0, 0.06, 0, 0, 0, 0, 0,
>     0, 0, 0.02, 0, 0, 0, 0.12, 0, 0.12, 0.04, 0.1, 0, 0.4, 0.7,
>     0.08, 0, 0.16, 0, 0, 0, 0, 0, 0, 0.02, 0, 0, 0, 0.16, 0.04,
>     0.04, 0, 0.04, 0.96, 0, 0, 0, 0, 0.06, 0.44, 0.46, 0.28,
>     0.04, 0, 0.02, 0.02, 0, 0, 0, 0.54, 0.5, 0.32, 0.26, 0.62,
>     0.36, 0.62, 0.04, 0.5, 0.32, 0.72, 0.42, 0.16, 0.46, 0.26,
>     0.22, 0.14, 0, 0.7, 0.14, 0.34, 0.08, 0.8, 0, 0.96, 0.34,
>     0.32, 0.2, 0.68, 0.12, 0.92, 0.14, 0.52, 0.24, 0.48, 0.54,
>     0.62, 0.5, 0.68, 0.42, 0.88, 0.46, 0.8, 0.6, 0.5, 0.36, 0.7,
>     0.2, 0.12, 0.2, 0.58, 0.1, 0.48, 0.32, 0.38, 0.22, 0.42,
>     0.2, 0.36, 0.36, 0.84, 0.66, 0.32, 0.62, 0.32, 0.76, 0.74,
>     0.56, 0.18, 0.7), N_pc = c(2.27, 2.37, 2.39, 1.9, 2.08, 2.65,
>     2.25, 2.04, 2.04, 1.81, 3.03, 2.9, 2.11, 2.26, 2.38, 2.51,
>     2, 2.31, 2.71, 2.02, 2.37, 2.04, 1.95, 2.21, 2.31, 2.39,
>     2.24, 2.2, 1.94, 2.12, 2.27, 2.15, 2.5, 2.36, 2.1, 2.29,
>     2.55, 2.39, 2.96, 2.26, 2.75, 2.71, 2.81, 2.79, 2.68, 2.51,
>     2.17, 2.18, 2.41, 2.19, 2.48, 2.19, 2.42, 1.82, 1.83, 1.65,
>     1.91, 2.04, 1.96, 1.88, 2.59, 1.85, 2.32, 1.95, 2.09, 1.97,
>     2.65, 1.8, 2.2, 2.26, 2.32, 1.5, 2.16, 2.37, 2.13, 2.54,
>     2.19, 1.97, 1.78, 2.29, 1.64, 1.67, 1.98, 1.79, 1.77, 2.03,
>     1.68, 2.08, 2.145, 2.08, 1.8, 1.99, 1.99, 2.07, 1.98, 2.41,
>     2.83, 2.83, 2.91, 2.61, 2.73, 2.54, 2.87, 1.91, 2.84, 2.74,
>     2.87, 2.6, 2.12, 2.64, 2.46, 1.83, 2.06, 2.01, 2.77, 2.41,
>     2.74, 2.83, 2.51, 2.23, 2.79, 2.66, 2.44, 2.26, 2.85, 2.39,
>     2.52, 2.13, 2.63, 2, 2.43, 2.36, 2.98, 2.28, 2.12, 2.2, 2.54,
>     1.28, 2.57, 2.17, 2.32, 2.41, 3.11, 2.591, 2.77, 2.53, 2.67,
>     2.45, 2.5, 2.52, 2.9, 3.03, 2.83, 2.52, 2.57, 2.62, 2.82,
>     2.62, 2.98, 3.01, 2.33, 2.11, 2.68, 2.74, 2.53, 2.43), weight_suck =
> c(50L,
>     50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L,
>     50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L,
>     50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L,
>     50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L,
>     50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L,
>     50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L,
>     50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L,
>     50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L,
>     50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L,
>     50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L,
>     50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L,
>     50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L,
>     50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L,
>     50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L, 50L), Fiber = c(34.40884091,
>     35.2306534, 42.52377866, 42.6239323, 41.37861255, 39.60850525,
>     40.77050193, 43.93561888, 39.85530862, 47.96389221, 33.0164353,
>     30.40923171, 35.80926768, 38.81499295, 39.78981471, 37.98513805,
>     37.573016, 39.75442555, 43.30493722, 39.75062718, 42.44068598,
>     35.17589695, 35.56906323, 37.34316461, 40.01927247, 39.99513562,
>     36.10434999, 31.57573919, 37.76346099, 37.01815172, 35.59629643,
>     33.81374455, 37.7827112, 41.28445751, 44.78743608, 34.6394122,
>     36.30284612, 34.97437449, 41.00523545, 30.91747143, 32.55332568,
>     32.79375305, 37.51461304, 32.62951938, 40.22559027, 35.43271959,
>     39.22368591, 34.32029979, 36.41313697, 36.69822326, 37.82870726,
>     37.85527277, 33.87219095, 36.98176526, 38.04943022, 33.45063417,
>     36.48627741, 34.46249903, 40.17607643, 36.77713573, 37.98619139,
>     35.84260289, 37.21843053, 34.84469437, 34.85470551, 33.62314136,
>     35.04788627, 30.45543443, 43.14168551, 32.23039161, 37.60287057,
>     34.1427031, 36.52037605, 37.12821519, 43.96781779, 33.21707461,
>     43.03781432, 38.29479565, 40.07726219, 37.64961992, 48.82421591,
>     39.26134049, 37.62558769, 36.19289482, 41.39539765, 38.87860666,
>     36.05830446, 32.07757032, 42.788655, 33.86701205, 38.23211694,
>     37.89539959, 40.83433837, 38.98175173, 42.83170351, 32.28967624,
>     33.40239455, 30.92484799, 41.56156442, 34.52930045, 37.75300976,
>     35.11156393, 39.77687654, 37.98805055, 41.70620266, 31.89415684,
>     37.68184859, 34.08114509, 34.06411083, 32.23348721, 35.77634719,
>     21.0576573, 37.76348306, 33.53117231, 40.82264211, 31.19388514,
>     40.52910082, 27.5031154, 44.50618538, 34.4669349, 30.43628015,
>     29.89229346, 32.01075647, 35.07254143, 36.57868878, 28.81559417,
>     36.08462737, 32.86246536, 39.9152505, 36.25423072, 33.51569525,
>     34.1055226, 38.99118341, 34.53641033, 33.31288766, 31.55618034,
>     39.31931333, 33.72025274, 34.7083208, 26.84760505, 39.14884466,
>     34.79548574, 32.81360389, 27.78493879, 30.66829851, 31.03727751,
>     35.11616534, 29.20690552, 37.48964989, 39.94816985, 41.784186,
>     36.40317336, 38.77327649, 33.47088406, 35.79855367, 32.94104157,
>     37.22816497, 29.32884218, 41.30883178, 28.85842064, 39.21708069,
>     29.93973518, 33.68385156, 25.26360465, 40.07343771, 31.24653541
>     ), Lignin = c(15.77477865, 16.42526338, 17.81644946, 20.06733454,
>     17.33068939, 14.46313636, 19.26461698, 22.46710162, 18.35008435,
>     18.43243391, 13.03248943, 11.61623759, 15.40895691, 16.9786809,
>     16.54312915, 18.33763105, 12.25320976, 16.10339902, 16.68427585,
>     17.37699268, 11.72959086, 17.82961819, 10.33102761, 8.329309218,
>     16.75329644, 16.79263461, 14.56578061, 15.69875657, 9.275559568,
>     16.18115984, 13.28899644, 14.52231091, 14.33797056, 19.388317,
>     14.28128214, 12.86508109, 16.54174245, 16.88950337, 16.45236853,
>     7.719036205, 13.6909977, 11.48255674, 15.13737491, 15.3591499,
>     16.54946312, 16.14769987, 13.06144297, 11.9173863, 13.43299545,
>     16.00143957, 17.2118779, 18.19980232, 10.99738867, 13.63569839,
>     15.48144654, 16.1216259, 16.15568311, 17.6101268, 17.30451969,
>     14.02253261, 15.43141658, 16.181513, 17.15827242, 17.52861195,
>     12.35996713, 15.49034533, 13.97079366, 13.28841472, 17.82642197,
>     14.89135477, 15.27588696, 16.19873246, 11.99168197, 17.9882092,
>     18.70442548, 16.92756747, 17.30466149, 16.84557327, 16.57039627,
>     17.50814734, 21.76822852, 20.26882409, 9.727735965, 15.00439034,
>     17.12361186, 16.14717619, 12.68400834, 15.64995633, 17.8633547,
>     12.42028546, 14.25760982, 17.83796088, 18.18472772, 19.53135651,
>     18.08016466, 14.49582092, 13.52200059, 13.59905485, 18.16177538,
>     16.35014138, 14.96662393, 17.79704702, 14.62402094, 21.42942615,
>     16.86764575, 13.75565413, 14.82599948, 15.76083246, 11.45566254,
>     13.43780268, 12.93398942, 13.48983266, 15.65273017, 15.51102512,
>     16.26246545, 13.86332043, 16.06911693, 12.6946718, 18.10567384,
>     16.67871224, 10.8869382, 15.31810574, 14.50440655, 18.1268646,
>     14.02630853, 9.166241719, 14.59336183, 16.33293006, 16.055571,
>     18.51528605, 11.34765726, 15.06734566, 16.87036405, 17.46982479,
>     15.66135144, 13.71222274, 16.19165545, 16.624473, 15.57975641,
>     13.00605673, 14.73386658, 15.76925648, 14.04065352, 12.18372012,
>     12.05766404, 14.54563609, 14.26939499, 14.72744808, 14.11437465,
>     18.4789298, 18.01551264, 16.10259417, 14.02537363, 14.58450423,
>     11.04102835, 13.40957054, 16.8431013, 9.535932181, 16.83859843,
>     13.05088673, 15.5745046, 14.46076877, 11.98007904, 11.38534032,
>     15.20342847, 11.4316122)), class = "data.frame", row.names = c(NA,
>     -166L))
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From v@|ent|n @end|ng |rom petze|@@t  Sat Dec 17 16:12:31 2022
From: v@|ent|n @end|ng |rom petze|@@t (Valentin Petzel)
Date: Sat, 17 Dec 2022 15:12:31 +0000 (UTC)
Subject: [R] datatable using dt not able to print background colors
In-Reply-To: <e3679aa262a44098af02aac2eaa5a453@lacare.org>
References: <e3679aa262a44098af02aac2eaa5a453@lacare.org>
Message-ID: <c11a9b70-d0e8-4fa6-a95a-f1e592fd211d@petzel.at>

Hello Matt,

I do not think that this is the best place for troubleshooting Chrome issues. If your html file shows the colors but print doesn't then the page probably uses different stylesheets for display and print. You might want to inspect the html for something like this. If you need help, the answers to this should get you there:

https://superuser.com/questions/456700/how-do-i-print-with-the-screen-stylesheet

Regards,
Valentin

17.12.2022 01:21:25 Matthew Pirritano <MPirritano at lacare.org>:

> Hey, all!
> 
> I've got a report that uses datatable from DT to create an rmarkdown html that looks great as an html but when I try to print it, to a printer, or to a pdf the colors I've assigned to cells are not displaying. I'm using chrome and I've clicked on the Background graphics button there, but that doesn't help print the colors. I have tried to run the datatable section of the code using results = 'asis' and eliminating results = 'asis'. Neither seems to help with the
> 
> My css style at the top of the rmarkdown is
> 
> <style type="text/css">
> .main-container {
> ? max-width: 1500px;
> ? margin-left: auto;
> ? margin-right: auto;
> ? table.display td { white-space: wrap; }
> 
> }
> td{
> ? -webkit-print-color-adjust:exact !important;
> ? print-color-adjust:exact !important;
> }
> </style>
> 
> I added the webkit bit based on what I've found online. Maybe I have something set up incorrectly there? Any ideas or thoughts on how to get this to print the background colors?
> 
> Thanks
> matt
> 
> 
> 
> 
> ________________________________
> 
> This communication is intended for the use of the individual or entity to which it is addressed and may contain information that is privileged, confidential or otherwise exempt from disclosure under applicable law. If you are not the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this communication in error, please notify the sender and delete any copies. Thank you.
> 
> ? [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bor|@@@te|pe @end|ng |rom utoronto@c@  Sun Dec 18 20:01:02 2022
From: bor|@@@te|pe @end|ng |rom utoronto@c@ (Boris Steipe)
Date: Sun, 18 Dec 2022 19:01:02 +0000
Subject: [R] Amazing AI
Message-ID: <E3D88833-62F2-4908-9094-7881B76BCBF9@utoronto.ca>

Technically not a help question. But crucial to be aware of, especially for those of us in academia, or otherwise teaching R. I am not aware of a suitable alternate forum. If this does not interest you, please simply ignore - I already know that this may be somewhat OT.

Thanks.
------------------------------------------------------

You very likely have heard of ChatGPT, the conversation interface on top of the GPT-3 large language model and that it can generate code. I thought it doesn't do R - I was wrong. Here is a little experiment:

MY PROMPT:
==========
Please write me some R code that will read a tsv file, remove all rows that have duplicates in the column "names", and store the median values of the remaining rows in a variable called "Medians". Of course, that calculation should only be done with columns that are numeric. Print the last variable in order from largest to smallest.


AI RESPONSE:
============

Here is some R code that should accomplish what you've described:

(Note: the code is formatted in a little terminal window, complete with a button to "copy code" at the top.)

----
# Read the tsv file
data <- read.table("file.tsv", header = TRUE, sep = "\t")

# Remove rows with duplicates in the "names" column
data <- data[!duplicated(data$names), ]

# Select only the numeric columns
num_columns <- sapply(data, is.numeric)
numeric_data <- data[, num_columns]

# Calculate the medians for each column
Medians <- apply(numeric_data, 1, median)

# Sort Medians in descending order
Medians <- sort(Medians, decreasing = TRUE)

# Print Medians
print(Medians)
----

This code assumes that the tsv file is called "file.tsv" and is stored in the current working directory. It also assumes that the first row of the file contains the column names.



MY PROMPT:
==========
Can you provide me with a bit of sample data that I can use to test this code?

AI RESPONSE:
============
Certainly! Here is some sample data that you can use to test the code I provided:

----
name	age	height	weight
Alice	23	5.6	120
Bob	32	6.2	180
Charlie	29	5.9	160
Alice	23	5.6	120
David	25	5.8	140
Eve	27	5.5	110
----

You can save this data as a tsv file and use it to test the code.


------------------------------------------------------

Notes: 
1) The code, as written does not work with the test data. The reason is that the test data specifies a column "name", but the code assumes "names" (which I specified in the instructions). Once this is fixed in the test data, the code executes.

2) The instructions are not accurately translated: I had asked for row means. But changing the margin in the apply() statement from 2 to 1 does the correct thing.

3) Note that the test data contains both numeric and non-numeric columns. Also, the name "Alice" is duplicated in the test data, which is subtle, and the right thing to do.


------------------------------------------------------

A similar experiment, run on the beta-site of OpenAI's Codex code-completion tool gives the following code (complete with the comments.):

----
# Read in the data
data <- read.table("mydata.tsv", sep = "\t", header = TRUE)

# Remove all rows that have duplicates in the column "names"
unique_names <- unique(data$names)
data_unique <- data[data$names %in% unique_names,]

# Calculate medians 
Medians <- sapply(data_unique[, sapply(data_unique, is.numeric)], median, na.rm = TRUE)

# Print last variable in order form largest to smallest
rev(sort(Medians[length(Medians)]))
----

Note that the strategy is quite different (e.g using %in%, not duplicated() ), the interpretation of "last variable" is technically correct but not what I had in mind (ChatGPT got that right though).


Changing my prompts slightly resulted it going for a dplyr solution instead, complete with %>% idioms etc ... again, syntactically correct but not giving me the fully correct results. 

------------------------------------------------------

Bottom line: The AI's ability to translate natural language instructions into code is astounding. Errors the AI makes are subtle and probably not easy to fix if you don't already know what you are doing. But the way that this can be "confidently incorrect" and plausible makes it nearly impossible to detect unless you actually run the code (you may have noticed that when you read the code).

Will our students use it? Absolutely.

Will they successfully cheat with it? That depends on the assignment. We probably need to _encourage_ them to use it rather than sanction - but require them to attribute the AI, document prompts, and identify their own, additional contributions.

Will it help them learn? When you are aware of the issues, it may be quite useful. It may be especially useful to teach them to specify their code carefully and completely, and to ask questions in the right way. Test cases are crucial.

How will it affect what we do as instructors? I don't know. Really. 

And the future? I am not pleased to extrapolate to a job market in which they compete with knowledge workers who work 24/7 without benefits, vacation pay, or even a salary. They'll need to rethink the value of their investment in an academic education. We'll need to rethink what we do to provide value above and beyond what AI's can do. (Nb. all of the arguments I hear about why humans will always be better etc. are easily debunked, but that's even more OT :-)

--------------------------------------------------------

If you have thoughts to share how your institution is thinking about academic integrity in this situation, or creative ideas how to integrate this into teaching, I'd love to hear from you. 


All the best!
Boris


--
Boris Steipe MD, PhD
University of Toronto


From tebert @end|ng |rom u||@edu  Sun Dec 18 23:47:07 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Sun, 18 Dec 2022 22:47:07 +0000
Subject: [R] Amazing AI
In-Reply-To: <E3D88833-62F2-4908-9094-7881B76BCBF9@utoronto.ca>
References: <E3D88833-62F2-4908-9094-7881B76BCBF9@utoronto.ca>
Message-ID: <BN6PR2201MB1553290D79EA2D44E6CCB74BCFE49@BN6PR2201MB1553.namprd22.prod.outlook.com>

It would help students formulate a plan for coding. Successful students will be able to give good directions that the AI can turn into good code. This skill is essential no matter who writes the program. 
In more advanced classes I might collect some data sets designed to cause the AI problems. Another option is to make tests where students have to write code on paper or multiple guess where students must choose between similar code snips.


-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Boris Steipe
Sent: Sunday, December 18, 2022 2:01 PM
To: r-help at r-project.org
Subject: [R] Amazing AI

[External Email]

Technically not a help question. But crucial to be aware of, especially for those of us in academia, or otherwise teaching R. I am not aware of a suitable alternate forum. If this does not interest you, please simply ignore - I already know that this may be somewhat OT.

Thanks.
------------------------------------------------------

You very likely have heard of ChatGPT, the conversation interface on top of the GPT-3 large language model and that it can generate code. I thought it doesn't do R - I was wrong. Here is a little experiment:

MY PROMPT:
==========
Please write me some R code that will read a tsv file, remove all rows that have duplicates in the column "names", and store the median values of the remaining rows in a variable called "Medians". Of course, that calculation should only be done with columns that are numeric. Print the last variable in order from largest to smallest.


AI RESPONSE:
============

Here is some R code that should accomplish what you've described:

(Note: the code is formatted in a little terminal window, complete with a button to "copy code" at the top.)

----
# Read the tsv file
data <- read.table("file.tsv", header = TRUE, sep = "\t")

# Remove rows with duplicates in the "names" column data <- data[!duplicated(data$names), ]

# Select only the numeric columns
num_columns <- sapply(data, is.numeric)
numeric_data <- data[, num_columns]

# Calculate the medians for each column
Medians <- apply(numeric_data, 1, median)

# Sort Medians in descending order
Medians <- sort(Medians, decreasing = TRUE)

# Print Medians
print(Medians)
----

This code assumes that the tsv file is called "file.tsv" and is stored in the current working directory. It also assumes that the first row of the file contains the column names.



MY PROMPT:
==========
Can you provide me with a bit of sample data that I can use to test this code?

AI RESPONSE:
============
Certainly! Here is some sample data that you can use to test the code I provided:

----
name    age     height  weight
Alice   23      5.6     120
Bob     32      6.2     180
Charlie 29      5.9     160
Alice   23      5.6     120
David   25      5.8     140
Eve     27      5.5     110
----

You can save this data as a tsv file and use it to test the code.


------------------------------------------------------

Notes:
1) The code, as written does not work with the test data. The reason is that the test data specifies a column "name", but the code assumes "names" (which I specified in the instructions). Once this is fixed in the test data, the code executes.

2) The instructions are not accurately translated: I had asked for row means. But changing the margin in the apply() statement from 2 to 1 does the correct thing.

3) Note that the test data contains both numeric and non-numeric columns. Also, the name "Alice" is duplicated in the test data, which is subtle, and the right thing to do.


------------------------------------------------------

A similar experiment, run on the beta-site of OpenAI's Codex code-completion tool gives the following code (complete with the comments.):

----
# Read in the data
data <- read.table("mydata.tsv", sep = "\t", header = TRUE)

# Remove all rows that have duplicates in the column "names"
unique_names <- unique(data$names)
data_unique <- data[data$names %in% unique_names,]

# Calculate medians
Medians <- sapply(data_unique[, sapply(data_unique, is.numeric)], median, na.rm = TRUE)

# Print last variable in order form largest to smallest
rev(sort(Medians[length(Medians)]))
----

Note that the strategy is quite different (e.g using %in%, not duplicated() ), the interpretation of "last variable" is technically correct but not what I had in mind (ChatGPT got that right though).


Changing my prompts slightly resulted it going for a dplyr solution instead, complete with %>% idioms etc ... again, syntactically correct but not giving me the fully correct results.

------------------------------------------------------

Bottom line: The AI's ability to translate natural language instructions into code is astounding. Errors the AI makes are subtle and probably not easy to fix if you don't already know what you are doing. But the way that this can be "confidently incorrect" and plausible makes it nearly impossible to detect unless you actually run the code (you may have noticed that when you read the code).

Will our students use it? Absolutely.

Will they successfully cheat with it? That depends on the assignment. We probably need to _encourage_ them to use it rather than sanction - but require them to attribute the AI, document prompts, and identify their own, additional contributions.

Will it help them learn? When you are aware of the issues, it may be quite useful. It may be especially useful to teach them to specify their code carefully and completely, and to ask questions in the right way. Test cases are crucial.

How will it affect what we do as instructors? I don't know. Really.

And the future? I am not pleased to extrapolate to a job market in which they compete with knowledge workers who work 24/7 without benefits, vacation pay, or even a salary. They'll need to rethink the value of their investment in an academic education. We'll need to rethink what we do to provide value above and beyond what AI's can do. (Nb. all of the arguments I hear about why humans will always be better etc. are easily debunked, but that's even more OT :-)

--------------------------------------------------------

If you have thoughts to share how your institution is thinking about academic integrity in this situation, or creative ideas how to integrate this into teaching, I'd love to hear from you.


All the best!
Boris


--
Boris Steipe MD, PhD
University of Toronto

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7Ce75e9fae0cc6458889d808dae12a42fc%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638069869013242055%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=SUHfSjl4x6R6iJd3HZ8A5RLOxz7%2BycNv6gvjTTch%2BYg%3D&reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7Ce75e9fae0cc6458889d808dae12a42fc%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638069869013242055%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=nFy1v8poyMtjvYlXgt8yRaerlPwSpeoTWMOrgzvxeH0%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.


From gott|r|ed@m@thur|n @end|ng |rom veo||@@com  Fri Dec 16 09:44:17 2022
From: gott|r|ed@m@thur|n @end|ng |rom veo||@@com (Mathurin, Gottfried)
Date: Fri, 16 Dec 2022 09:44:17 +0100
Subject: [R] Error 3221226505
Message-ID: <CALp6qQRcQQaHvwjBVffcUe3Mdez7jAYTgzbeFCYZ3ax04WyS-Q@mail.gmail.com>

Hello,
I currently face the issue of Windows 10 throwing a code 3221226505
whenever I try to use R-4.1.3.
Is this issue known and could you possibly share a fix?

Thank you in advance,

*Gottfried*

-- 


--------------------------------------------------------------------------------------------This 
e-mail transmission (message and any attached files) may contain 
information that is proprietary, privileged and/or confidential to Veolia 
Environnement and/or its affiliates and is intended exclusively for the 
person(s) to whom it is addressed. If you are not the intended recipient, 
please notify the sender by return e-mail and delete all copies of this 
e-mail, including all attachments. Unless expressly authorized, any use, 
disclosure, publication, retransmission or dissemination of this e-mail 
and/or of its attachments is strictly prohibited.?


Ce message 
electronique et ses fichiers attaches sont strictement confidentiels et 
peuvent contenir des elements dont Veolia Environnement et/ou l'une de ses
entites affiliees sont proprietaires. Ils sont donc destines a l'usage de 
leurs seuls destinataires. Si vous avez recu ce message par erreur, merci 
de le retourner a son emetteur et de le detruire ainsi que toutes les 
pieces attachees. L'utilisation, la divulgation, la publication, la 
distribution, ou la reproduction non expressement autorisees de ce message
et de ses pieces attachees sont interdites.
--------------------------------------------------------------------------------------------

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Dec 19 01:20:40 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 18 Dec 2022 16:20:40 -0800
Subject: [R] Error 3221226505
In-Reply-To: <CALp6qQRcQQaHvwjBVffcUe3Mdez7jAYTgzbeFCYZ3ax04WyS-Q@mail.gmail.com>
References: <CALp6qQRcQQaHvwjBVffcUe3Mdez7jAYTgzbeFCYZ3ax04WyS-Q@mail.gmail.com>
Message-ID: <417B96EC-BEDF-4376-B2B4-71B6777B4A67@dcn.davis.ca.us>

Doesn't happen to me.

On December 16, 2022 12:44:17 AM PST, "Mathurin, Gottfried via R-help" <r-help at r-project.org> wrote:
>Hello,
>I currently face the issue of Windows 10 throwing a code 3221226505
>whenever I try to use R-4.1.3.
>Is this issue known and could you possibly share a fix?
>
>Thank you in advance,
>
>*Gottfried*
>

-- 
Sent from my phone. Please excuse my brevity.


From dw|n@em|u@ @end|ng |rom comc@@t@net  Mon Dec 19 01:32:42 2022
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Sun, 18 Dec 2022 16:32:42 -0800
Subject: [R] Error 3221226505
In-Reply-To: <417B96EC-BEDF-4376-B2B4-71B6777B4A67@dcn.davis.ca.us>
References: <CALp6qQRcQQaHvwjBVffcUe3Mdez7jAYTgzbeFCYZ3ax04WyS-Q@mail.gmail.com>
 <417B96EC-BEDF-4376-B2B4-71B6777B4A67@dcn.davis.ca.us>
Message-ID: <e0601cb7-f548-8f0f-0048-785020db8aca@comcast.net>

I cannot tell whether it would happen to me for two reasons: I don't use 
Windows anymore and R's current version is 4.2.1.


You can determine whether it is the core packages that are throwing the 
error (rather unlikely) or perhaps something you have in your 
(invisible) .Rdata file. You should probably update your installation of 
R and throw away the .Rdata file that I suspect has gotten corrupted or 
is loading a flaky package. If you don't want to update R, then you 
should at the very least try to run R from a command line with


 >? R --vanilla

At least that's I what I remember from my Windows daze. You should also 
review the Win-R-FAQ which I think has similar advice.


-- 

David

On 12/18/22 16:20, Jeff Newmiller wrote:
> Doesn't happen to me.
>
> On December 16, 2022 12:44:17 AM PST, "Mathurin, Gottfried via R-help" <r-help at r-project.org> wrote:
>> Hello,
>> I currently face the issue of Windows 10 throwing a code 3221226505
>> whenever I try to use R-4.1.3.
>> Is this issue known and could you possibly share a fix?
>>
>> Thank you in advance,
>>
>> *Gottfried*
>>


From w||||@mwdun|@p @end|ng |rom gm@||@com  Mon Dec 19 02:06:43 2022
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Sun, 18 Dec 2022 17:06:43 -0800
Subject: [R] Error 3221226505
In-Reply-To: <CALp6qQRcQQaHvwjBVffcUe3Mdez7jAYTgzbeFCYZ3ax04WyS-Q@mail.gmail.com>
References: <CALp6qQRcQQaHvwjBVffcUe3Mdez7jAYTgzbeFCYZ3ax04WyS-Q@mail.gmail.com>
Message-ID: <CAHqSRuQbyc9FP6wnWWNeYSJ6=gDYtoVCLtzSuE3C8vEiQRaKgA@mail.gmail.com>

Note that 3221226505 in base 10 is C0000409 in hexadecimal.  You may have
better luck looking for causes of this by googling the hex representation.

-Bill

On Sun, Dec 18, 2022 at 3:56 PM Mathurin, Gottfried via R-help <
r-help at r-project.org> wrote:

> Hello,
> I currently face the issue of Windows 10 throwing a code 3221226505
> whenever I try to use R-4.1.3.
> Is this issue known and could you possibly share a fix?
>
> Thank you in advance,
>
> *Gottfried*
>
> --
>
>
> --------------------------------------------------------------------------------------------This
>
> e-mail transmission (message and any attached files) may contain
> information that is proprietary, privileged and/or confidential to Veolia
> Environnement and/or its affiliates and is intended exclusively for the
> person(s) to whom it is addressed. If you are not the intended recipient,
> please notify the sender by return e-mail and delete all copies of this
> e-mail, including all attachments. Unless expressly authorized, any use,
> disclosure, publication, retransmission or dissemination of this e-mail
> and/or of its attachments is strictly prohibited.
>
>
> Ce message
> electronique et ses fichiers attaches sont strictement confidentiels et
> peuvent contenir des elements dont Veolia Environnement et/ou l'une de ses
> entites affiliees sont proprietaires. Ils sont donc destines a l'usage de
> leurs seuls destinataires. Si vous avez recu ce message par erreur, merci
> de le retourner a son emetteur et de le detruire ainsi que toutes les
> pieces attachees. L'utilisation, la divulgation, la publication, la
> distribution, ou la reproduction non expressement autorisees de ce message
> et de ses pieces attachees sont interdites.
>
> --------------------------------------------------------------------------------------------
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From er|cjberger @end|ng |rom gm@||@com  Mon Dec 19 09:05:36 2022
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Mon, 19 Dec 2022 10:05:36 +0200
Subject: [R] Amazing AI
In-Reply-To: <BN6PR2201MB1553290D79EA2D44E6CCB74BCFE49@BN6PR2201MB1553.namprd22.prod.outlook.com>
References: <E3D88833-62F2-4908-9094-7881B76BCBF9@utoronto.ca>
 <BN6PR2201MB1553290D79EA2D44E6CCB74BCFE49@BN6PR2201MB1553.namprd22.prod.outlook.com>
Message-ID: <CAGgJW7544c71GkdZQftRDV5zkxkfPU=QNHfKTFhtJukv7u_Nkw@mail.gmail.com>

Hi Boris,
I think these are good questions.
Some initial reactions:
1. with better tools available to the students, you can cover more material
at a faster pace ?
2. For years, it has been possible for students to find "answers" online
(e.g. Google search). Most programmers would regard this as an essential
part of their work - looking to overcome some obstacle via searching on
StackOverflow, Google, R-Help ?etc*. I consider the ability to do such
searches something worth teaching. In this spirit, you could teach
effective ways to use ChatGPT.
3. Finally, as you observed, some of the ChatGPT responses have
bugs/deficiencies. For example, the Codex code does *not* remove
duplicates. It requires knowledge and skill of the material you are
teaching, for the students to be able to spot and fix the bugs. In which
case, what's your problem? ?

HTH,
Eric

* and as a shout-out to Bert, they should also read the documentation -
e.g. ?subset

On Mon, Dec 19, 2022 at 12:47 AM Ebert,Timothy Aaron <tebert at ufl.edu> wrote:

> It would help students formulate a plan for coding. Successful students
> will be able to give good directions that the AI can turn into good code.
> This skill is essential no matter who writes the program.
> In more advanced classes I might collect some data sets designed to cause
> the AI problems. Another option is to make tests where students have to
> write code on paper or multiple guess where students must choose between
> similar code snips.
>
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Boris Steipe
> Sent: Sunday, December 18, 2022 2:01 PM
> To: r-help at r-project.org
> Subject: [R] Amazing AI
>
> [External Email]
>
> Technically not a help question. But crucial to be aware of, especially
> for those of us in academia, or otherwise teaching R. I am not aware of a
> suitable alternate forum. If this does not interest you, please simply
> ignore - I already know that this may be somewhat OT.
>
> Thanks.
> ------------------------------------------------------
>
> You very likely have heard of ChatGPT, the conversation interface on top
> of the GPT-3 large language model and that it can generate code. I thought
> it doesn't do R - I was wrong. Here is a little experiment:
>
> MY PROMPT:
> ==========
> Please write me some R code that will read a tsv file, remove all rows
> that have duplicates in the column "names", and store the median values of
> the remaining rows in a variable called "Medians". Of course, that
> calculation should only be done with columns that are numeric. Print the
> last variable in order from largest to smallest.
>
>
> AI RESPONSE:
> ============
>
> Here is some R code that should accomplish what you've described:
>
> (Note: the code is formatted in a little terminal window, complete with a
> button to "copy code" at the top.)
>
> ----
> # Read the tsv file
> data <- read.table("file.tsv", header = TRUE, sep = "\t")
>
> # Remove rows with duplicates in the "names" column data <-
> data[!duplicated(data$names), ]
>
> # Select only the numeric columns
> num_columns <- sapply(data, is.numeric)
> numeric_data <- data[, num_columns]
>
> # Calculate the medians for each column
> Medians <- apply(numeric_data, 1, median)
>
> # Sort Medians in descending order
> Medians <- sort(Medians, decreasing = TRUE)
>
> # Print Medians
> print(Medians)
> ----
>
> This code assumes that the tsv file is called "file.tsv" and is stored in
> the current working directory. It also assumes that the first row of the
> file contains the column names.
>
>
>
> MY PROMPT:
> ==========
> Can you provide me with a bit of sample data that I can use to test this
> code?
>
> AI RESPONSE:
> ============
> Certainly! Here is some sample data that you can use to test the code I
> provided:
>
> ----
> name    age     height  weight
> Alice   23      5.6     120
> Bob     32      6.2     180
> Charlie 29      5.9     160
> Alice   23      5.6     120
> David   25      5.8     140
> Eve     27      5.5     110
> ----
>
> You can save this data as a tsv file and use it to test the code.
>
>
> ------------------------------------------------------
>
> Notes:
> 1) The code, as written does not work with the test data. The reason is
> that the test data specifies a column "name", but the code assumes "names"
> (which I specified in the instructions). Once this is fixed in the test
> data, the code executes.
>
> 2) The instructions are not accurately translated: I had asked for row
> means. But changing the margin in the apply() statement from 2 to 1 does
> the correct thing.
>
> 3) Note that the test data contains both numeric and non-numeric columns.
> Also, the name "Alice" is duplicated in the test data, which is subtle, and
> the right thing to do.
>
>
> ------------------------------------------------------
>
> A similar experiment, run on the beta-site of OpenAI's Codex
> code-completion tool gives the following code (complete with the comments.):
>
> ----
> # Read in the data
> data <- read.table("mydata.tsv", sep = "\t", header = TRUE)
>
> # Remove all rows that have duplicates in the column "names"
> unique_names <- unique(data$names)
> data_unique <- data[data$names %in% unique_names,]
>
> # Calculate medians
> Medians <- sapply(data_unique[, sapply(data_unique, is.numeric)], median,
> na.rm = TRUE)
>
> # Print last variable in order form largest to smallest
> rev(sort(Medians[length(Medians)]))
> ----
>
> Note that the strategy is quite different (e.g using %in%, not
> duplicated() ), the interpretation of "last variable" is technically
> correct but not what I had in mind (ChatGPT got that right though).
>
>
> Changing my prompts slightly resulted it going for a dplyr solution
> instead, complete with %>% idioms etc ... again, syntactically correct but
> not giving me the fully correct results.
>
> ------------------------------------------------------
>
> Bottom line: The AI's ability to translate natural language instructions
> into code is astounding. Errors the AI makes are subtle and probably not
> easy to fix if you don't already know what you are doing. But the way that
> this can be "confidently incorrect" and plausible makes it nearly
> impossible to detect unless you actually run the code (you may have noticed
> that when you read the code).
>
> Will our students use it? Absolutely.
>
> Will they successfully cheat with it? That depends on the assignment. We
> probably need to _encourage_ them to use it rather than sanction - but
> require them to attribute the AI, document prompts, and identify their own,
> additional contributions.
>
> Will it help them learn? When you are aware of the issues, it may be quite
> useful. It may be especially useful to teach them to specify their code
> carefully and completely, and to ask questions in the right way. Test cases
> are crucial.
>
> How will it affect what we do as instructors? I don't know. Really.
>
> And the future? I am not pleased to extrapolate to a job market in which
> they compete with knowledge workers who work 24/7 without benefits,
> vacation pay, or even a salary. They'll need to rethink the value of their
> investment in an academic education. We'll need to rethink what we do to
> provide value above and beyond what AI's can do. (Nb. all of the arguments
> I hear about why humans will always be better etc. are easily debunked, but
> that's even more OT :-)
>
> --------------------------------------------------------
>
> If you have thoughts to share how your institution is thinking about
> academic integrity in this situation, or creative ideas how to integrate
> this into teaching, I'd love to hear from you.
>
>
> All the best!
> Boris
>
>
> --
> Boris Steipe MD, PhD
> University of Toronto
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7Ce75e9fae0cc6458889d808dae12a42fc%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638069869013242055%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=SUHfSjl4x6R6iJd3HZ8A5RLOxz7%2BycNv6gvjTTch%2BYg%3D&reserved=0
> PLEASE do read the posting guide
> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7Ce75e9fae0cc6458889d808dae12a42fc%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638069869013242055%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=nFy1v8poyMtjvYlXgt8yRaerlPwSpeoTWMOrgzvxeH0%3D&reserved=0
> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From wewo|@k| @end|ng |rom gm@||@com  Mon Dec 19 10:52:30 2022
From: wewo|@k| @end|ng |rom gm@||@com (Witold E Wolski)
Date: Mon, 19 Dec 2022 10:52:30 +0100
Subject: [R] [Rd] I do not want that R CMD build removes temp directory
In-Reply-To: <b2825ce6-6601-eb65-fffd-981db52feb58@statistik.tu-dortmund.de>
References: <CAAjnpdg8uLOBBEHWEWq81R+t0sUy=TiTPN_fy2WrgTn2-AWRqA@mail.gmail.com>
 <24A51D24-B62A-42E2-94C4-6842EFC87D50@R-project.org>
 <CAAjnpdhUb6eJ78wZd501AH0CnkDYN7TQ0U=sP7RXpYjQTd0Reg@mail.gmail.com>
 <b2825ce6-6601-eb65-fffd-981db52feb58@statistik.tu-dortmund.de>
Message-ID: <CAAjnpdiR6sugnRDB93UNGGxuQ0O_F-8nNOQtcd=u7-tmZEh4Ow@mail.gmail.com>

Dear Uwe,

Unfortunately there isn't much of an output. This is all what I have:

$ R CMD INSTALL --log prolfqua
Warning: unknown option '--log'
* installing to library 'C:/Users/witoldwolski/AppData/Local/R/win-library/4.2'
* installing *source* package 'prolfqua' ...
** using staged installation
** R
** data
** inst
** byte-compile and prepare package for lazy loading
ERROR: lazy loading failed for package 'prolfqua'
* removing 'C:/Users/witoldwolski/AppData/Local/R/win-library/4.2/prolfqua'

Also with --no-test-load option the install is failing :

$ R CMD INSTALL --clean --no-test-load prolfqua

* installing to library 'C:/Users/witoldwolski/AppData/Local/R/win-library/4.2'
* installing *source* package 'prolfqua' ...
** using staged installation
** R
** data
** inst
** byte-compile and prepare package for lazy loading
ERROR: lazy loading failed for package 'prolfqua'
* removing 'C:/Users/witoldwolski/AppData/Local/R/win-library/4.2/prolfqua'

And including "--no-clean-on-error" also does not help because the
installation directory is empty.


Tested the install, on macos M1, linux ARM64, linux x86, Windows 64,
and it works everywhere except
Parallels Windows 64 on ARM M1.

R version 4.2.2 (2022-10-31 ucrt) -- "Innocent and Trusting"
Copyright (C) 2022 The R Foundation for Statistical Computing
Platform: x86_64-w64-mingw32/x64 (64-bit)

best regards
Witek



On Fri, 16 Dec 2022 at 11:24, Uwe Ligges
<ligges at statistik.tu-dortmund.de> wrote:
>
>
>
> On 15.12.2022 21:47, Witold E Wolski wrote:
> > Thank you Simon,
> >
> > It seems not to be related to the R package but rather to the OS,
> > (just got the same error when installing the shiny R package from
> > CRAN).
> > I am on an M1 mac running Windows ARM in Parallels. Installed a
> > x86_64-w64 R version.
> >
> >
> >
> > "** byte-compile and prepare package for lazy loading
> > ERROR: lazy loading failed for package 'shiny'
> > * removing 'C:/Users/witoldwolski/AppData/Local/R/win-library/4.2/shiny'
> > Warning in install.packages :"
>
> Can we please have the full output?
>
> Best,
> Uwe Ligges
>
>
>
> > On Thu, 15 Dec 2022 at 19:09, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> >>
> >> Yes:
> >>
> >> $ R CMD INSTALL --help | grep error
> >>        --no-clean-on-error       do not remove installed package on error
> >>
> >> But probably more commonly used way is to install the package from its unpacked directory as that avoids the use of temporary directories in the first place.
> >>
> >> In you case you can also use --no-test-load and the non-functional package will still be installed so you can inspect it.
> >>
> >> Cheers,
> >> Simon
> >>
> >> PS: please don't cross-post
> >>
> >>
> >>> On Dec 16, 2022, at 7:01 AM, Witold E Wolski <wewolski at gmail.com> wrote:
> >>>
> >>> I am getting a package build error, and can not figure out the problem.
> >>> The error is
> >>> "
> >>> ERROR: lazy loading failed for package 'prolfqua'
> >>> * removing 'C:/Users/
> >>> "
> >>> However since R CMD build removes the temp directory and does not give
> >>> any other errors how can I find out what the build problem is?
> >>>
> >>> Is there a way to disable the temp directory removal?
> >>>
> >>> Best Regards
> >>> Witek
> >>> --
> >>> Witold Eryk Wolski
> >>>
> >>> ______________________________________________
> >>> R-devel at r-project.org mailing list
> >>> https://stat.ethz.ch/mailman/listinfo/r-devel
> >>>
> >>
> >
> >



--
Witold Eryk Wolski


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Dec 19 11:08:15 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 19 Dec 2022 11:08:15 +0100
Subject: [R] [Rd] I do not want that R CMD build removes temp directory
In-Reply-To: <CAAjnpdiR6sugnRDB93UNGGxuQ0O_F-8nNOQtcd=u7-tmZEh4Ow@mail.gmail.com>
References: <CAAjnpdg8uLOBBEHWEWq81R+t0sUy=TiTPN_fy2WrgTn2-AWRqA@mail.gmail.com>
 <24A51D24-B62A-42E2-94C4-6842EFC87D50@R-project.org>
 <CAAjnpdhUb6eJ78wZd501AH0CnkDYN7TQ0U=sP7RXpYjQTd0Reg@mail.gmail.com>
 <b2825ce6-6601-eb65-fffd-981db52feb58@statistik.tu-dortmund.de>
 <CAAjnpdiR6sugnRDB93UNGGxuQ0O_F-8nNOQtcd=u7-tmZEh4Ow@mail.gmail.com>
Message-ID: <179a373c-d53a-849c-3c83-43fb09148fb9@statistik.tu-dortmund.de>

Ah, before that you wrote

""
ERROR: lazy loading failed for package 'prolfqua'
* removing 'C:Users
"

and C:Users  without a slash sonds suspicious. Now with the new output I 
do not see where the issue is from. Does this also happen when you try 
it on winbuilder?

Best,
Uwe Ligges

On 19.12.2022 10:52, Witold E Wolski wrote:
> Dear Uwe,
> 
> Unfortunately there isn't much of an output. This is all what I have:
> 
> $ R CMD INSTALL --log prolfqua
> Warning: unknown option '--log'
> * installing to library 'C:/Users/witoldwolski/AppData/Local/R/win-library/4.2'
> * installing *source* package 'prolfqua' ...
> ** using staged installation
> ** R
> ** data
> ** inst
> ** byte-compile and prepare package for lazy loading
> ERROR: lazy loading failed for package 'prolfqua'
> * removing 'C:/Users/witoldwolski/AppData/Local/R/win-library/4.2/prolfqua'
> 
> Also with --no-test-load option the install is failing :
> 
> $ R CMD INSTALL --clean --no-test-load prolfqua
> 
> * installing to library 'C:/Users/witoldwolski/AppData/Local/R/win-library/4.2'
> * installing *source* package 'prolfqua' ...
> ** using staged installation
> ** R
> ** data
> ** inst
> ** byte-compile and prepare package for lazy loading
> ERROR: lazy loading failed for package 'prolfqua'
> * removing 'C:/Users/witoldwolski/AppData/Local/R/win-library/4.2/prolfqua'
> 
> And including "--no-clean-on-error" also does not help because the
> installation directory is empty.
> 
> 
> Tested the install, on macos M1, linux ARM64, linux x86, Windows 64,
> and it works everywhere except
> Parallels Windows 64 on ARM M1.
> 
> R version 4.2.2 (2022-10-31 ucrt) -- "Innocent and Trusting"
> Copyright (C) 2022 The R Foundation for Statistical Computing
> Platform: x86_64-w64-mingw32/x64 (64-bit)
> 
> best regards
> Witek
> 
> 
> 
> On Fri, 16 Dec 2022 at 11:24, Uwe Ligges
> <ligges at statistik.tu-dortmund.de> wrote:
>>
>>
>>
>> On 15.12.2022 21:47, Witold E Wolski wrote:
>>> Thank you Simon,
>>>
>>> It seems not to be related to the R package but rather to the OS,
>>> (just got the same error when installing the shiny R package from
>>> CRAN).
>>> I am on an M1 mac running Windows ARM in Parallels. Installed a
>>> x86_64-w64 R version.
>>>
>>>
>>>
>>> "** byte-compile and prepare package for lazy loading
>>> ERROR: lazy loading failed for package 'shiny'
>>> * removing 'C:/Users/witoldwolski/AppData/Local/R/win-library/4.2/shiny'
>>> Warning in install.packages :"
>>
>> Can we please have the full output?
>>
>> Best,
>> Uwe Ligges
>>
>>
>>
>>> On Thu, 15 Dec 2022 at 19:09, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>>>>
>>>> Yes:
>>>>
>>>> $ R CMD INSTALL --help | grep error
>>>>         --no-clean-on-error       do not remove installed package on error
>>>>
>>>> But probably more commonly used way is to install the package from its unpacked directory as that avoids the use of temporary directories in the first place.
>>>>
>>>> In you case you can also use --no-test-load and the non-functional package will still be installed so you can inspect it.
>>>>
>>>> Cheers,
>>>> Simon
>>>>
>>>> PS: please don't cross-post
>>>>
>>>>
>>>>> On Dec 16, 2022, at 7:01 AM, Witold E Wolski <wewolski at gmail.com> wrote:
>>>>>
>>>>> I am getting a package build error, and can not figure out the problem.
>>>>> The error is
>>>>> "
>>>>> ERROR: lazy loading failed for package 'prolfqua'
>>>>> * removing 'C:/Users/
>>>>> "
>>>>> However since R CMD build removes the temp directory and does not give
>>>>> any other errors how can I find out what the build problem is?
>>>>>
>>>>> Is there a way to disable the temp directory removal?
>>>>>
>>>>> Best Regards
>>>>> Witek
>>>>> --
>>>>> Witold Eryk Wolski
>>>>>
>>>>> ______________________________________________
>>>>> R-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>
>>>>
>>>
>>>
> 
> 
> 
> --
> Witold Eryk Wolski
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From new@ @end|ng |rom m||@ng|@c|er@com  Mon Dec 19 09:58:04 2022
From: new@ @end|ng |rom m||@ng|@c|er@com (Milan Glacier)
Date: Mon, 19 Dec 2022 03:58:04 -0500
Subject: [R] Amazing AI
In-Reply-To: <E3D88833-62F2-4908-9094-7881B76BCBF9@utoronto.ca>
References: <E3D88833-62F2-4908-9094-7881B76BCBF9@utoronto.ca>
Message-ID: <20221219085804.kjj35ggsberm37p7@Azure-Swing>

On 12/18/22 19:01, Boris Steipe wrote:
>Technically not a help question. But crucial to be aware of, especially for those of us in academia, or otherwise teaching R. I am not aware of a suitable alternate forum. If this does not interest you, please simply ignore - I already know that this may be somewhat OT.
>
>Thanks.
>------------------------------------------------------
>
>You very likely have heard of ChatGPT, the conversation interface on top of the GPT-3 large language model and that it can generate code. I thought it doesn't do R - I was wrong. Here is a little experiment:
>Note that the strategy is quite different (e.g using %in%, not duplicated() ), the interpretation of "last variable" is technically correct but not what I had in mind (ChatGPT got that right though).
>
>
>Changing my prompts slightly resulted it going for a dplyr solution instead, complete with %>% idioms etc ... again, syntactically correct but not giving me the fully correct results.
>
>------------------------------------------------------
>
>Bottom line: The AI's ability to translate natural language instructions into code is astounding. Errors the AI makes are subtle and probably not easy to fix if you don't already know what you are doing. But the way that this can be "confidently incorrect" and plausible makes it nearly impossible to detect unless you actually run the code (you may have noticed that when you read the code).
>
>Will our students use it? Absolutely.
>
>Will they successfully cheat with it? That depends on the assignment. We probably need to _encourage_ them to use it rather than sanction - but require them to attribute the AI, document prompts, and identify their own, additional contributions.
>
>Will it help them learn? When you are aware of the issues, it may be quite useful. It may be especially useful to teach them to specify their code carefully and completely, and to ask questions in the right way. Test cases are crucial.
>
>How will it affect what we do as instructors? I don't know. Really.
>
>And the future? I am not pleased to extrapolate to a job market in which they compete with knowledge workers who work 24/7 without benefits, vacation pay, or even a salary. They'll need to rethink the value of their investment in an academic education. We'll need to rethink what we do to provide value above and beyond what AI's can do. (Nb. all of the arguments I hear about why humans will always be better etc. are easily debunked, but that's even more OT :-)
>
>--------------------------------------------------------
>
>If you have thoughts to share how your institution is thinking about academic integrity in this situation, or creative ideas how to integrate this into teaching, I'd love to hear from you.

*NEVER* let the AI misleading the students! ChatGPT gives you seemingly
sound but actually *wrong* code!

ChatGPT never understands the formal abstraction behind the code, it
just understands the shallow text pattern (and the syntax rules) in the
code. And it often gives you the code that seemingly correct but indeed
wrongly output. If it is used with code completion, then it is okay
(just like github copilot), since the coder need to modify the code
after getting the completion. But if you want to use ChatGPT for
students to query information / writing code, it is error proning!


From @oko| @end|ng |rom |n@@-tou|ou@e@|r  Mon Dec 19 11:17:36 2022
From: @oko| @end|ng |rom |n@@-tou|ou@e@|r (Serguei Sokol)
Date: Mon, 19 Dec 2022 11:17:36 +0100
Subject: [R] [Rd]  I do not want that R CMD build removes temp directory
In-Reply-To: <CAAjnpdiR6sugnRDB93UNGGxuQ0O_F-8nNOQtcd=u7-tmZEh4Ow@mail.gmail.com>
References: <CAAjnpdg8uLOBBEHWEWq81R+t0sUy=TiTPN_fy2WrgTn2-AWRqA@mail.gmail.com>
 <24A51D24-B62A-42E2-94C4-6842EFC87D50@R-project.org>
 <CAAjnpdhUb6eJ78wZd501AH0CnkDYN7TQ0U=sP7RXpYjQTd0Reg@mail.gmail.com>
 <b2825ce6-6601-eb65-fffd-981db52feb58@statistik.tu-dortmund.de>
 <CAAjnpdiR6sugnRDB93UNGGxuQ0O_F-8nNOQtcd=u7-tmZEh4Ow@mail.gmail.com>
Message-ID: <d5cff7f3-487f-9a2c-b2c1-7ddb6c8cb59e@insa-toulouse.fr>

Le 19/12/2022 ? 10:52, Witold E Wolski a ?crit?:
> Dear Uwe,
>
> Unfortunately there isn't much of an output. This is all what I have:
>
> $ R CMD INSTALL --log prolfqua
> Warning: unknown option '--log'
> * installing to library 'C:/Users/witoldwolski/AppData/Local/R/win-library/4.2'
> * installing *source* package 'prolfqua' ...
> ** using staged installation
> ** R
> ** data
> ** inst
> ** byte-compile and prepare package for lazy loading
> ERROR: lazy loading failed for package 'prolfqua'
> * removing 'C:/Users/witoldwolski/AppData/Local/R/win-library/4.2/prolfqua'
>
> Also with --no-test-load option the install is failing :
>
> $ R CMD INSTALL --clean --no-test-load prolfqua
>
> * installing to library 'C:/Users/witoldwolski/AppData/Local/R/win-library/4.2'
> * installing *source* package 'prolfqua' ...
> ** using staged installation
> ** R
> ** data
> ** inst
> ** byte-compile and prepare package for lazy loading
> ERROR: lazy loading failed for package 'prolfqua'
> * removing 'C:/Users/witoldwolski/AppData/Local/R/win-library/4.2/prolfqua'
>
> And including "--no-clean-on-error" also does not help because the
> installation directory is empty.
You don't show the full command you run. If you included also "--clean" 
as in previous command, may be it just does what is asked, i.e. clean 
the temp dir ?
I don't know what prevails: "--clean" or "--no-clean-on-error" if put 
simultaneously.

Best,
Serguei.

>
>
> Tested the install, on macos M1, linux ARM64, linux x86, Windows 64,
> and it works everywhere except
> Parallels Windows 64 on ARM M1.
>
> R version 4.2.2 (2022-10-31 ucrt) -- "Innocent and Trusting"
> Copyright (C) 2022 The R Foundation for Statistical Computing
> Platform: x86_64-w64-mingw32/x64 (64-bit)
>
> best regards
> Witek
>
>
>
> On Fri, 16 Dec 2022 at 11:24, Uwe Ligges
> <ligges at statistik.tu-dortmund.de> wrote:
>>
>>
>> On 15.12.2022 21:47, Witold E Wolski wrote:
>>> Thank you Simon,
>>>
>>> It seems not to be related to the R package but rather to the OS,
>>> (just got the same error when installing the shiny R package from
>>> CRAN).
>>> I am on an M1 mac running Windows ARM in Parallels. Installed a
>>> x86_64-w64 R version.
>>>
>>>
>>>
>>> "** byte-compile and prepare package for lazy loading
>>> ERROR: lazy loading failed for package 'shiny'
>>> * removing 'C:/Users/witoldwolski/AppData/Local/R/win-library/4.2/shiny'
>>> Warning in install.packages :"
>> Can we please have the full output?
>>
>> Best,
>> Uwe Ligges
>>
>>
>>
>>> On Thu, 15 Dec 2022 at 19:09, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>>>> Yes:
>>>>
>>>> $ R CMD INSTALL --help | grep error
>>>>         --no-clean-on-error       do not remove installed package on error
>>>>
>>>> But probably more commonly used way is to install the package from its unpacked directory as that avoids the use of temporary directories in the first place.
>>>>
>>>> In you case you can also use --no-test-load and the non-functional package will still be installed so you can inspect it.
>>>>
>>>> Cheers,
>>>> Simon
>>>>
>>>> PS: please don't cross-post
>>>>
>>>>
>>>>> On Dec 16, 2022, at 7:01 AM, Witold E Wolski <wewolski at gmail.com> wrote:
>>>>>
>>>>> I am getting a package build error, and can not figure out the problem.
>>>>> The error is
>>>>> "
>>>>> ERROR: lazy loading failed for package 'prolfqua'
>>>>> * removing 'C:/Users/
>>>>> "
>>>>> However since R CMD build removes the temp directory and does not give
>>>>> any other errors how can I find out what the build problem is?
>>>>>
>>>>> Is there a way to disable the temp directory removal?
>>>>>
>>>>> Best Regards
>>>>> Witek
>>>>> --
>>>>> Witold Eryk Wolski
>>>>>
>>>>> ______________________________________________
>>>>> R-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>
>>>
>
>
> --
> Witold Eryk Wolski
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


-- 
Serguei Sokol
Ingenieur de recherche INRAE

Cellule Math?matiques
TBI, INSA/INRAE UMR 792, INSA/CNRS UMR 5504
135 Avenue de Rangueil
31077 Toulouse Cedex 04

tel: +33 5 61 55 98 49
email: sokol at insa-toulouse.fr
http://www.toulouse-biotechnology-institute.fr/en/technology_platforms/mathematics-cell.html


From gb @end|ng |rom eh@r@@e  Mon Dec 19 14:22:00 2022
From: gb @end|ng |rom eh@r@@e (=?UTF-8?Q?G=c3=b6ran_Brostr=c3=b6m?=)
Date: Mon, 19 Dec 2022 14:22:00 +0100
Subject: [R] Integer division
Message-ID: <82303402-5045-d7e7-c4f5-84bb1e3d1487@ehar.se>

I have a long vector x with five-digit codes where the first digit of 
each is of special interest, so I extracted them through

 > y <- x %/% 10000

but to my surprise y contained the value -1 in some places. It turned 
out that x contains -1 as a symbol for 'missing value' so in effect I 
found that

 > -1 %/% 10000 == -1

Had to check the help page for "%/%", and the first relevant comment I 
found was:

"Users are sometimes surprised by the value returned".

No surprise there. Further down:

?%%? indicates ?x mod y? (?x modulo y?) and ?%/%? indicates
      integer division.  It is guaranteed that

      ? x == (x %% y) + y * (x %/% y) ? (up to rounding error)

I did expect  (a %/% b) to return round(a / b), like gfortran and gcc, 
but instead I get floor(a / b) in R. What is the reason for these 
different definitions? And shouldn't R's definition be documented?

Thanks, G?ran


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Mon Dec 19 15:41:51 2022
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Mon, 19 Dec 2022 15:41:51 +0100
Subject: [R] Integer division
In-Reply-To: <82303402-5045-d7e7-c4f5-84bb1e3d1487@ehar.se>
References: <82303402-5045-d7e7-c4f5-84bb1e3d1487@ehar.se>
Message-ID: <25504.30767.923178.426523@stat.math.ethz.ch>

>>>>> G?ran Brostr?m 
>>>>>     on Mon, 19 Dec 2022 14:22:00 +0100 writes:

    > I have a long vector x with five-digit codes where the
    > first digit of each is of special interest, so I extracted
    > them through

    >> y <- x %/% 10000

    > but to my surprise y contained the value -1 in some
    > places. It turned out that x contains -1 as a symbol for
    > 'missing value' so in effect I found that

    >> -1 %/% 10000 == -1

    > Had to check the help page for "%/%", and the first
    > relevant comment I found was:

    > "Users are sometimes surprised by the value returned".

    > No surprise there. Further down:

    > ?%%? indicates ?x mod y? (?x modulo y?) and ?%/%?
    > indicates integer division.  It is guaranteed that

    >       ? x == (x %% y) + y * (x %/% y) ? (up to rounding
    > error)

    > I did expect (a %/% b) to return round(a / b), like
    > gfortran and gcc, 

What???  I cannot believe you.

No time for checking now, but I bet that 
8 / 3  gives 2 and not 3  in C and Fortran
(and hence gcc, etc) 


    > but instead I get floor(a / b) in
    > R. What is the reason for these different definitions? And
    > shouldn't R's definition be documented?



    > Thanks, G?ran

    > ______________________________________________
    > R-help at r-project.org mailing list -- To UNSUBSCRIBE and
    > more, see https://stat.ethz.ch/mailman/listinfo/r-help
    > PLEASE do read the posting guide
    > http://www.R-project.org/posting-guide.html and provide
    > commented, minimal, self-contained, reproducible code.


From gb @end|ng |rom eh@r@@e  Mon Dec 19 16:15:01 2022
From: gb @end|ng |rom eh@r@@e (=?UTF-8?Q?G=c3=b6ran_Brostr=c3=b6m?=)
Date: Mon, 19 Dec 2022 16:15:01 +0100
Subject: [R] Integer division
In-Reply-To: <25504.30767.923178.426523@stat.math.ethz.ch>
References: <82303402-5045-d7e7-c4f5-84bb1e3d1487@ehar.se>
 <25504.30767.923178.426523@stat.math.ethz.ch>
Message-ID: <1baef642-5aa2-08fd-b756-8c8b9d58ac33@ehar.se>



Den 2022-12-19 kl. 15:41, skrev Martin Maechler:
>>>>>> G?ran Brostr?m
>>>>>>      on Mon, 19 Dec 2022 14:22:00 +0100 writes:
> 
>      > I have a long vector x with five-digit codes where the
>      > first digit of each is of special interest, so I extracted
>      > them through
> 
>      >> y <- x %/% 10000
> 
>      > but to my surprise y contained the value -1 in some
>      > places. It turned out that x contains -1 as a symbol for
>      > 'missing value' so in effect I found that
> 
>      >> -1 %/% 10000 == -1
> 
>      > Had to check the help page for "%/%", and the first
>      > relevant comment I found was:
> 
>      > "Users are sometimes surprised by the value returned".
> 
>      > No surprise there. Further down:
> 
>      > ?%%? indicates ?x mod y? (?x modulo y?) and ?%/%?
>      > indicates integer division.  It is guaranteed that
> 
>      >       ? x == (x %% y) + y * (x %/% y) ? (up to rounding
>      > error)
> 
>      > I did expect (a %/% b) to return round(a / b), like
>      > gfortran and gcc,
> 
> What???  I cannot believe you.

Well, you shouldn't, I generalized too far.
> 
> No time for checking now, but I bet that
> 8 / 3  gives 2 and not 3  in C and Fortran
> (and hence gcc, etc)

But compare -8 %/% 3 in R and -8 / 3 in C/Fortran.

G,

> 
> 
>      > but instead I get floor(a / b) in
>      > R. What is the reason for these different definitions? And
>      > shouldn't R's definition be documented?
> 
> 
> 
>      > Thanks, G?ran
> 
>      > ______________________________________________
>      > R-help at r-project.org mailing list -- To UNSUBSCRIBE and
>      > more, see https://stat.ethz.ch/mailman/listinfo/r-help
>      > PLEASE do read the posting guide
>      > http://www.R-project.org/posting-guide.html and provide
>      > commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Mon Dec 19 17:01:37 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 19 Dec 2022 08:01:37 -0800
Subject: [R] Integer division
In-Reply-To: <1baef642-5aa2-08fd-b756-8c8b9d58ac33@ehar.se>
References: <82303402-5045-d7e7-c4f5-84bb1e3d1487@ehar.se>
 <25504.30767.923178.426523@stat.math.ethz.ch>
 <1baef642-5aa2-08fd-b756-8c8b9d58ac33@ehar.se>
Message-ID: <CAGxFJbT4f73n9Gc1ACKy=ynLLEr4jOQ9WEWS6_1YERypMAtp9g@mail.gmail.com>

If R does exactly what it says it does, why are you surprised, whether or
not that is what other languages do?  (Please excuse my fractured English).
(Note: -8 = 1 +  3*(-3)  =  (-8 %% 3)  + 3 * (-8 %/% 3 ), exactly as the
Help excerpt you cited says)

Of course, one may always question the wisdom of whatever policy R chooses,
but that gets into the bowels of what standards to follow, corner cases,
and all that, about which I have nothing to say. My only  point is the
above.



-- Bert

On Mon, Dec 19, 2022 at 7:15 AM G?ran Brostr?m <gb at ehar.se> wrote:

>
>
> Den 2022-12-19 kl. 15:41, skrev Martin Maechler:
> >>>>>> G?ran Brostr?m
> >>>>>>      on Mon, 19 Dec 2022 14:22:00 +0100 writes:
> >
> >      > I have a long vector x with five-digit codes where the
> >      > first digit of each is of special interest, so I extracted
> >      > them through
> >
> >      >> y <- x %/% 10000
> >
> >      > but to my surprise y contained the value -1 in some
> >      > places. It turned out that x contains -1 as a symbol for
> >      > 'missing value' so in effect I found that
> >
> >      >> -1 %/% 10000 == -1
> >
> >      > Had to check the help page for "%/%", and the first
> >      > relevant comment I found was:
> >
> >      > "Users are sometimes surprised by the value returned".
> >
> >      > No surprise there. Further down:
> >
> >      > ?%%? indicates ?x mod y? (?x modulo y?) and ?%/%?
> >      > indicates integer division.  It is guaranteed that
> >
> >      >       ? x == (x %% y) + y * (x %/% y) ? (up to rounding
> >      > error)
> >
> >      > I did expect (a %/% b) to return round(a / b), like
> >      > gfortran and gcc,
> >
> > What???  I cannot believe you.
>
> Well, you shouldn't, I generalized too far.
> >
> > No time for checking now, but I bet that
> > 8 / 3  gives 2 and not 3  in C and Fortran
> > (and hence gcc, etc)
>
> But compare -8 %/% 3 in R and -8 / 3 in C/Fortran.
>
> G,
>
> >
> >
> >      > but instead I get floor(a / b) in
> >      > R. What is the reason for these different definitions? And
> >      > shouldn't R's definition be documented?
> >
> >
> >
> >      > Thanks, G?ran
> >
> >      > ______________________________________________
> >      > R-help at r-project.org mailing list -- To UNSUBSCRIBE and
> >      > more, see https://stat.ethz.ch/mailman/listinfo/r-help
> >      > PLEASE do read the posting guide
> >      > http://www.R-project.org/posting-guide.html and provide
> >      > commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Dec 19 17:37:32 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 19 Dec 2022 08:37:32 -0800
Subject: [R] Integer division
In-Reply-To: <1baef642-5aa2-08fd-b756-8c8b9d58ac33@ehar.se>
References: <82303402-5045-d7e7-c4f5-84bb1e3d1487@ehar.se>
 <25504.30767.923178.426523@stat.math.ethz.ch>
 <1baef642-5aa2-08fd-b756-8c8b9d58ac33@ehar.se>
Message-ID: <7F6B1489-C804-4346-B3D4-431490CDA525@dcn.davis.ca.us>

See https://en.m.wikipedia.org/wiki/Modulo_operation, Variants of the definition, esp the point that Knuth recommended the floor definition. The behavior of %/% follows from the definition of %% given the documented relation in ?Arithmetic.

R is not obligated to repeat the mistakes of C or Fortran.

On December 19, 2022 7:15:01 AM PST, "G?ran Brostr?m" <gb at ehar.se> wrote:
>
>
>Den 2022-12-19 kl. 15:41, skrev Martin Maechler:
>>>>>>> G?ran Brostr?m
>>>>>>>      on Mon, 19 Dec 2022 14:22:00 +0100 writes:
>> 
>>      > I have a long vector x with five-digit codes where the
>>      > first digit of each is of special interest, so I extracted
>>      > them through
>> 
>>      >> y <- x %/% 10000
>> 
>>      > but to my surprise y contained the value -1 in some
>>      > places. It turned out that x contains -1 as a symbol for
>>      > 'missing value' so in effect I found that
>> 
>>      >> -1 %/% 10000 == -1
>> 
>>      > Had to check the help page for "%/%", and the first
>>      > relevant comment I found was:
>> 
>>      > "Users are sometimes surprised by the value returned".
>> 
>>      > No surprise there. Further down:
>> 
>>      > ?%%? indicates ?x mod y? (?x modulo y?) and ?%/%?
>>      > indicates integer division.  It is guaranteed that
>> 
>>      >       ? x == (x %% y) + y * (x %/% y) ? (up to rounding
>>      > error)
>> 
>>      > I did expect (a %/% b) to return round(a / b), like
>>      > gfortran and gcc,
>> 
>> What???  I cannot believe you.
>
>Well, you shouldn't, I generalized too far.
>> 
>> No time for checking now, but I bet that
>> 8 / 3  gives 2 and not 3  in C and Fortran
>> (and hence gcc, etc)
>
>But compare -8 %/% 3 in R and -8 / 3 in C/Fortran.
>
>G,
>
>> 
>> 
>>      > but instead I get floor(a / b) in
>>      > R. What is the reason for these different definitions? And
>>      > shouldn't R's definition be documented?
>> 
>> 
>> 
>>      > Thanks, G?ran
>> 
>>      > ______________________________________________
>>      > R-help at r-project.org mailing list -- To UNSUBSCRIBE and
>>      > more, see https://stat.ethz.ch/mailman/listinfo/r-help
>>      > PLEASE do read the posting guide
>>      > http://www.R-project.org/posting-guide.html and provide
>>      > commented, minimal, self-contained, reproducible code.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Mon Dec 19 18:30:22 2022
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Mon, 19 Dec 2022 18:30:22 +0100
Subject: [R] Integer division
In-Reply-To: <7F6B1489-C804-4346-B3D4-431490CDA525@dcn.davis.ca.us>
References: <82303402-5045-d7e7-c4f5-84bb1e3d1487@ehar.se>
 <25504.30767.923178.426523@stat.math.ethz.ch>
 <1baef642-5aa2-08fd-b756-8c8b9d58ac33@ehar.se>
 <7F6B1489-C804-4346-B3D4-431490CDA525@dcn.davis.ca.us>
Message-ID: <25504.40878.121341.960662@stat.math.ethz.ch>

>>>>> Jeff Newmiller 
>>>>>     on Mon, 19 Dec 2022 08:37:32 -0800 writes:

    > See https://en.m.wikipedia.org/wiki/Modulo_operation,
    > Variants of the definition, esp the point that Knuth
    > recommended the floor definition. The behavior of %/%
    > follows from the definition of %% given the documented
    > relation in ?Arithmetic.

    > R is not obligated to repeat the mistakes of C or Fortran.

Fortune nomination!  ==> BCC:  maintainer("fortunes")

The Wikipedia page is indeed revealing amazing facts about how
differently this has been implemented in computer languages.

Then, after all,  G?ran still got a point to make here, given that
not anymore are all R users equipped with a Ph.D in math or equivalent..:

It would probably be helpful to add a short paragraph to  ?Arithmetic
about the fact that R's %% uses the "floored" version, as
recommended by Donald Knuth and as documented on the above
Wikipedia page.

Martin

    > On December 19, 2022 7:15:01 AM PST, "G?ran Brostr?m"
    > <gb at ehar.se> wrote:
    >> 
    >> 
    >> Den 2022-12-19 kl. 15:41, skrev Martin Maechler:
    >>>>>>>> G?ran Brostr?m on Mon, 19 Dec 2022 14:22:00 +0100
    >>>>>>>> writes:
    >>> 
    >>> > I have a long vector x with five-digit codes where the
    >>> > first digit of each is of special interest, so I
    >>> extracted > them through
    >>> 
    >>> >> y <- x %/% 10000
    >>> 
    >>> > but to my surprise y contained the value -1 in some >
    >>> places. It turned out that x contains -1 as a symbol for
    >>> > 'missing value' so in effect I found that
    >>> 
    >>> >> -1 %/% 10000 == -1
    >>> 
    >>> > Had to check the help page for "%/%", and the first >
    >>> relevant comment I found was:
    >>> 
    >>> > "Users are sometimes surprised by the value returned".
    >>> 
    >>> > No surprise there. Further down:
    >>> 
    >>> > ?%%? indicates ?x mod y? (?x modulo y?) and ?%/%? >
    >>> indicates integer division.  It is guaranteed that
    >>> 
    >>> > ? x == (x %% y) + y * (x %/% y) ? (up to rounding >
    >>> error)
    >>> 
    >>> > I did expect (a %/% b) to return round(a / b), like >
    >>> gfortran and gcc,
    >>> 
    >>> What???  I cannot believe you.
    >> 
    >> Well, you shouldn't, I generalized too far.
    >>> 
    >>> No time for checking now, but I bet that 8 / 3 gives 2
    >>> and not 3 in C and Fortran (and hence gcc, etc)
    >> 
    >> But compare -8 %/% 3 in R and -8 / 3 in C/Fortran.
    >> 
    >> G,
    >> 
    >>> 
    >>> 
    >>> > but instead I get floor(a / b) in > R. What is the
    >>> reason for these different definitions? And > shouldn't
    >>> R's definition be documented?
    >>> 
    >>> 
    >>> 
    >>> > Thanks, G?ran
    >>> 
    >>> > ______________________________________________ >
    >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and
    >>> > more, see https://stat.ethz.ch/mailman/listinfo/r-help
    >>> > PLEASE do read the posting guide >
    >>> http://www.R-project.org/posting-guide.html and provide
    >>> > commented, minimal, self-contained, reproducible code.
    >> 
    >> ______________________________________________
    >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and
    >> more, see https://stat.ethz.ch/mailman/listinfo/r-help
    >> PLEASE do read the posting guide
    >> http://www.R-project.org/posting-guide.html and provide
    >> commented, minimal, self-contained, reproducible code.

    > -- 
    > Sent from my phone. Please excuse my brevity.


From bgunter@4567 @end|ng |rom gm@||@com  Mon Dec 19 19:12:00 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 19 Dec 2022 10:12:00 -0800
Subject: [R] Integer division
In-Reply-To: <25504.40878.121341.960662@stat.math.ethz.ch>
References: <82303402-5045-d7e7-c4f5-84bb1e3d1487@ehar.se>
 <25504.30767.923178.426523@stat.math.ethz.ch>
 <1baef642-5aa2-08fd-b756-8c8b9d58ac33@ehar.se>
 <7F6B1489-C804-4346-B3D4-431490CDA525@dcn.davis.ca.us>
 <25504.40878.121341.960662@stat.math.ethz.ch>
Message-ID: <CAGxFJbScEO=3=HK9Ncx0F4EaAB6vdnr+Pf42pMNadVv+jBQjLA@mail.gmail.com>

"It would probably be helpful to add a short paragraph to  ?Arithmetic
about the fact that R's %% uses the "floored" version, as
recommended by Donald Knuth and as documented on the above
Wikipedia page."

Agreed (who am I to disagree?!).

But perhaps something simpler like:

"a %% b must always be between 0 (inclusive) and b(exclusive)."

ergo, for examples,
> 5 %% 3
[1] 2  ## 5 = 1*3 + 2
> 5 %% -3
[1] -1 ## 5 = 2*(-3) + (-1)
> -5 %% 3
[1] 1  ## -5 = (-2) * 3 + 1
> -5 %% -3
[1] -2  ## -5 = 1* (-3) + (-2)

My point is that I believe it is easier for most non-math folks to groc the
relationship through a simple rule and such examples than via an algorithm.

Feel free to disagree, as this is just my opinion.

Cheers,
Bert




On Mon, Dec 19, 2022 at 9:30 AM Martin Maechler <maechler at stat.math.ethz.ch>
wrote:

> >>>>> Jeff Newmiller
> >>>>>     on Mon, 19 Dec 2022 08:37:32 -0800 writes:
>
>     > See https://en.m.wikipedia.org/wiki/Modulo_operation,
>     > Variants of the definition, esp the point that Knuth
>     > recommended the floor definition. The behavior of %/%
>     > follows from the definition of %% given the documented
>     > relation in ?Arithmetic.
>
>     > R is not obligated to repeat the mistakes of C or Fortran.
>
> Fortune nomination!  ==> BCC:  maintainer("fortunes")
>
> The Wikipedia page is indeed revealing amazing facts about how
> differently this has been implemented in computer languages.
>
> Then, after all,  G?ran still got a point to make here, given that
> not anymore are all R users equipped with a Ph.D in math or equivalent..:
>
> It would probably be helpful to add a short paragraph to  ?Arithmetic
> about the fact that R's %% uses the "floored" version, as
> recommended by Donald Knuth and as documented on the above
> Wikipedia page.
>
> Martin
>
>     > On December 19, 2022 7:15:01 AM PST, "G?ran Brostr?m"
>     > <gb at ehar.se> wrote:
>     >>
>     >>
>     >> Den 2022-12-19 kl. 15:41, skrev Martin Maechler:
>     >>>>>>>> G?ran Brostr?m on Mon, 19 Dec 2022 14:22:00 +0100
>     >>>>>>>> writes:
>     >>>
>     >>> > I have a long vector x with five-digit codes where the
>     >>> > first digit of each is of special interest, so I
>     >>> extracted > them through
>     >>>
>     >>> >> y <- x %/% 10000
>     >>>
>     >>> > but to my surprise y contained the value -1 in some >
>     >>> places. It turned out that x contains -1 as a symbol for
>     >>> > 'missing value' so in effect I found that
>     >>>
>     >>> >> -1 %/% 10000 == -1
>     >>>
>     >>> > Had to check the help page for "%/%", and the first >
>     >>> relevant comment I found was:
>     >>>
>     >>> > "Users are sometimes surprised by the value returned".
>     >>>
>     >>> > No surprise there. Further down:
>     >>>
>     >>> > ?%%? indicates ?x mod y? (?x modulo y?) and ?%/%? >
>     >>> indicates integer division.  It is guaranteed that
>     >>>
>     >>> > ? x == (x %% y) + y * (x %/% y) ? (up to rounding >
>     >>> error)
>     >>>
>     >>> > I did expect (a %/% b) to return round(a / b), like >
>     >>> gfortran and gcc,
>     >>>
>     >>> What???  I cannot believe you.
>     >>
>     >> Well, you shouldn't, I generalized too far.
>     >>>
>     >>> No time for checking now, but I bet that 8 / 3 gives 2
>     >>> and not 3 in C and Fortran (and hence gcc, etc)
>     >>
>     >> But compare -8 %/% 3 in R and -8 / 3 in C/Fortran.
>     >>
>     >> G,
>     >>
>     >>>
>     >>>
>     >>> > but instead I get floor(a / b) in > R. What is the
>     >>> reason for these different definitions? And > shouldn't
>     >>> R's definition be documented?
>     >>>
>     >>>
>     >>>
>     >>> > Thanks, G?ran
>     >>>
>     >>> > ______________________________________________ >
>     >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and
>     >>> > more, see https://stat.ethz.ch/mailman/listinfo/r-help
>     >>> > PLEASE do read the posting guide >
>     >>> http://www.R-project.org/posting-guide.html and provide
>     >>> > commented, minimal, self-contained, reproducible code.
>     >>
>     >> ______________________________________________
>     >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and
>     >> more, see https://stat.ethz.ch/mailman/listinfo/r-help
>     >> PLEASE do read the posting guide
>     >> http://www.R-project.org/posting-guide.html and provide
>     >> commented, minimal, self-contained, reproducible code.
>
>     > --
>     > Sent from my phone. Please excuse my brevity.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jrkr|de@u @end|ng |rom gm@||@com  Mon Dec 19 20:10:24 2022
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Mon, 19 Dec 2022 14:10:24 -0500
Subject: [R] Amazing AI
In-Reply-To: <20221219085804.kjj35ggsberm37p7@Azure-Swing>
References: <E3D88833-62F2-4908-9094-7881B76BCBF9@utoronto.ca>
 <20221219085804.kjj35ggsberm37p7@Azure-Swing>
Message-ID: <CAKZQJMAsKQc61XyxOBC3ivZOHY4pQpDT-rAho55ypKUvBC3LCA@mail.gmail.com>

Does not Medians <- apply(numeric_data, 1, median) give us the rom medians?

On Mon, 19 Dec 2022 at 05:52, Milan Glacier <news at milanglacier.com> wrote:

> On 12/18/22 19:01, Boris Steipe wrote:
> >Technically not a help question. But crucial to be aware of, especially
> for those of us in academia, or otherwise teaching R. I am not aware of a
> suitable alternate forum. If this does not interest you, please simply
> ignore - I already know that this may be somewhat OT.
> >
> >Thanks.
> >------------------------------------------------------
> >
> >You very likely have heard of ChatGPT, the conversation interface on top
> of the GPT-3 large language model and that it can generate code. I thought
> it doesn't do R - I was wrong. Here is a little experiment:
> >Note that the strategy is quite different (e.g using %in%, not
> duplicated() ), the interpretation of "last variable" is technically
> correct but not what I had in mind (ChatGPT got that right though).
> >
> >
> >Changing my prompts slightly resulted it going for a dplyr solution
> instead, complete with %>% idioms etc ... again, syntactically correct but
> not giving me the fully correct results.
> >
> >------------------------------------------------------
> >
> >Bottom line: The AI's ability to translate natural language instructions
> into code is astounding. Errors the AI makes are subtle and probably not
> easy to fix if you don't already know what you are doing. But the way that
> this can be "confidently incorrect" and plausible makes it nearly
> impossible to detect unless you actually run the code (you may have noticed
> that when you read the code).
> >
> >Will our students use it? Absolutely.
> >
> >Will they successfully cheat with it? That depends on the assignment. We
> probably need to _encourage_ them to use it rather than sanction - but
> require them to attribute the AI, document prompts, and identify their own,
> additional contributions.
> >
> >Will it help them learn? When you are aware of the issues, it may be
> quite useful. It may be especially useful to teach them to specify their
> code carefully and completely, and to ask questions in the right way. Test
> cases are crucial.
> >
> >How will it affect what we do as instructors? I don't know. Really.
> >
> >And the future? I am not pleased to extrapolate to a job market in which
> they compete with knowledge workers who work 24/7 without benefits,
> vacation pay, or even a salary. They'll need to rethink the value of their
> investment in an academic education. We'll need to rethink what we do to
> provide value above and beyond what AI's can do. (Nb. all of the arguments
> I hear about why humans will always be better etc. are easily debunked, but
> that's even more OT :-)
> >
> >--------------------------------------------------------
> >
> >If you have thoughts to share how your institution is thinking about
> academic integrity in this situation, or creative ideas how to integrate
> this into teaching, I'd love to hear from you.
>
> *NEVER* let the AI misleading the students! ChatGPT gives you seemingly
> sound but actually *wrong* code!
>
> ChatGPT never understands the formal abstraction behind the code, it
> just understands the shallow text pattern (and the syntax rules) in the
> code. And it often gives you the code that seemingly correct but indeed
> wrongly output. If it is used with code completion, then it is okay
> (just like github copilot), since the coder need to modify the code
> after getting the completion. But if you want to use ChatGPT for
> students to query information / writing code, it is error proning!
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
John Kane
Kingston ON Canada

	[[alternative HTML version deleted]]


From bor|@@@te|pe @end|ng |rom utoronto@c@  Mon Dec 19 21:03:10 2022
From: bor|@@@te|pe @end|ng |rom utoronto@c@ (Boris Steipe)
Date: Mon, 19 Dec 2022 20:03:10 +0000
Subject: [R] Amazing AI
In-Reply-To: <CAKZQJMAsKQc61XyxOBC3ivZOHY4pQpDT-rAho55ypKUvBC3LCA@mail.gmail.com>
References: <E3D88833-62F2-4908-9094-7881B76BCBF9@utoronto.ca>
 <20221219085804.kjj35ggsberm37p7@Azure-Swing>
 <CAKZQJMAsKQc61XyxOBC3ivZOHY4pQpDT-rAho55ypKUvBC3LCA@mail.gmail.com>
Message-ID: <4AC4EDF2-B2AB-4B08-B7F7-5C0B8CAFCFCE@utoronto.ca>

Yes ... but that "1" is my correction to the AI's suggested "2".
Sorry if that was confusing.

:-)



> On 2022-12-19, at 14:10, John Kane <jrkrideau at gmail.com> wrote:
> 
> Does not Medians <- apply(numeric_data, 1, median) give us the rom medians?
> 
> On Mon, 19 Dec 2022 at 05:52, Milan Glacier <news at milanglacier.com> wrote:
> On 12/18/22 19:01, Boris Steipe wrote:
> >Technically not a help question. But crucial to be aware of, especially for those of us in academia, or otherwise teaching R. I am not aware of a suitable alternate forum. If this does not interest you, please simply ignore - I already know that this may be somewhat OT.
> >
> >Thanks.
> >------------------------------------------------------
> >
> >You very likely have heard of ChatGPT, the conversation interface on top of the GPT-3 large language model and that it can generate code. I thought it doesn't do R - I was wrong. Here is a little experiment:
> >Note that the strategy is quite different (e.g using %in%, not duplicated() ), the interpretation of "last variable" is technically correct but not what I had in mind (ChatGPT got that right though).
> >
> >
> >Changing my prompts slightly resulted it going for a dplyr solution instead, complete with %>% idioms etc ... again, syntactically correct but not giving me the fully correct results.
> >
> >------------------------------------------------------
> >
> >Bottom line: The AI's ability to translate natural language instructions into code is astounding. Errors the AI makes are subtle and probably not easy to fix if you don't already know what you are doing. But the way that this can be "confidently incorrect" and plausible makes it nearly impossible to detect unless you actually run the code (you may have noticed that when you read the code).
> >
> >Will our students use it? Absolutely.
> >
> >Will they successfully cheat with it? That depends on the assignment. We probably need to _encourage_ them to use it rather than sanction - but require them to attribute the AI, document prompts, and identify their own, additional contributions.
> >
> >Will it help them learn? When you are aware of the issues, it may be quite useful. It may be especially useful to teach them to specify their code carefully and completely, and to ask questions in the right way. Test cases are crucial.
> >
> >How will it affect what we do as instructors? I don't know. Really.
> >
> >And the future? I am not pleased to extrapolate to a job market in which they compete with knowledge workers who work 24/7 without benefits, vacation pay, or even a salary. They'll need to rethink the value of their investment in an academic education. We'll need to rethink what we do to provide value above and beyond what AI's can do. (Nb. all of the arguments I hear about why humans will always be better etc. are easily debunked, but that's even more OT :-)
> >
> >--------------------------------------------------------
> >
> >If you have thoughts to share how your institution is thinking about academic integrity in this situation, or creative ideas how to integrate this into teaching, I'd love to hear from you.
> 
> *NEVER* let the AI misleading the students! ChatGPT gives you seemingly
> sound but actually *wrong* code!
> 
> ChatGPT never understands the formal abstraction behind the code, it
> just understands the shallow text pattern (and the syntax rules) in the
> code. And it often gives you the code that seemingly correct but indeed
> wrongly output. If it is used with code completion, then it is okay
> (just like github copilot), since the coder need to modify the code
> after getting the completion. But if you want to use ChatGPT for
> students to query information / writing code, it is error proning!
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 
> 
> -- 
> John Kane
> Kingston ON Canada


From bor|@@@te|pe @end|ng |rom utoronto@c@  Mon Dec 19 21:16:19 2022
From: bor|@@@te|pe @end|ng |rom utoronto@c@ (Boris Steipe)
Date: Mon, 19 Dec 2022 20:16:19 +0000
Subject: [R] Amazing AI
In-Reply-To: <20221219085804.kjj35ggsberm37p7@Azure-Swing>
References: <E3D88833-62F2-4908-9094-7881B76BCBF9@utoronto.ca>
 <20221219085804.kjj35ggsberm37p7@Azure-Swing>
Message-ID: <5A6E97AB-F2EE-47D3-828D-AA6446ECFB06@utoronto.ca>

Exactly. But not just "error prone", rather: eloquently and confidently incorrect. And that in itself is a problem. When I evaluate students' work, I implicitly do so from a mental model of the student - aptitude, ability, experience, language skills etc. That's useful for summative assessment, since it helps efficiency - but that won't work anymore. I see a need to assess much more carefully, require fine-grained referencing, check every single fact ... and that won't scale. And then there is also the spectre of having to decide when this crosses the line to "concoction" - i.e. an actual academic offence ...

Best,
Boris



> On 2022-12-19, at 03:58, Milan Glacier <news at milanglacier.com> wrote:
> 
> [You don't often get email from news at milanglacier.com. Learn why this is important at https://aka.ms/LearnAboutSenderIdentification ]
> 
> On 12/18/22 19:01, Boris Steipe wrote:
>> Technically not a help question. But crucial to be aware of, especially for those of us in academia, or otherwise teaching R. I am not aware of a suitable alternate forum. If this does not interest you, please simply ignore - I already know that this may be somewhat OT.
>> 
>> Thanks.
>> ------------------------------------------------------
>> 
>> You very likely have heard of ChatGPT, the conversation interface on top of the GPT-3 large language model and that it can generate code. I thought it doesn't do R - I was wrong. Here is a little experiment:
>> Note that the strategy is quite different (e.g using %in%, not duplicated() ), the interpretation of "last variable" is technically correct but not what I had in mind (ChatGPT got that right though).
>> 
>> 
>> Changing my prompts slightly resulted it going for a dplyr solution instead, complete with %>% idioms etc ... again, syntactically correct but not giving me the fully correct results.
>> 
>> ------------------------------------------------------
>> 
>> Bottom line: The AI's ability to translate natural language instructions into code is astounding. Errors the AI makes are subtle and probably not easy to fix if you don't already know what you are doing. But the way that this can be "confidently incorrect" and plausible makes it nearly impossible to detect unless you actually run the code (you may have noticed that when you read the code).
>> 
>> Will our students use it? Absolutely.
>> 
>> Will they successfully cheat with it? That depends on the assignment. We probably need to _encourage_ them to use it rather than sanction - but require them to attribute the AI, document prompts, and identify their own, additional contributions.
>> 
>> Will it help them learn? When you are aware of the issues, it may be quite useful. It may be especially useful to teach them to specify their code carefully and completely, and to ask questions in the right way. Test cases are crucial.
>> 
>> How will it affect what we do as instructors? I don't know. Really.
>> 
>> And the future? I am not pleased to extrapolate to a job market in which they compete with knowledge workers who work 24/7 without benefits, vacation pay, or even a salary. They'll need to rethink the value of their investment in an academic education. We'll need to rethink what we do to provide value above and beyond what AI's can do. (Nb. all of the arguments I hear about why humans will always be better etc. are easily debunked, but that's even more OT :-)
>> 
>> --------------------------------------------------------
>> 
>> If you have thoughts to share how your institution is thinking about academic integrity in this situation, or creative ideas how to integrate this into teaching, I'd love to hear from you.
> 
> *NEVER* let the AI misleading the students! ChatGPT gives you seemingly
> sound but actually *wrong* code!
> 
> ChatGPT never understands the formal abstraction behind the code, it
> just understands the shallow text pattern (and the syntax rules) in the
> code. And it often gives you the code that seemingly correct but indeed
> wrongly output. If it is used with code completion, then it is okay
> (just like github copilot), since the coder need to modify the code
> after getting the completion. But if you want to use ChatGPT for
> students to query information / writing code, it is error proning!


From cry@n @end|ng |rom b|ngh@mton@edu  Mon Dec 19 22:04:17 2022
From: cry@n @end|ng |rom b|ngh@mton@edu (Christopher W. Ryan)
Date: Mon, 19 Dec 2022 16:04:17 -0500
Subject: [R] Amazing AI
In-Reply-To: <E3D88833-62F2-4908-9094-7881B76BCBF9@utoronto.ca>
References: <E3D88833-62F2-4908-9094-7881B76BCBF9@utoronto.ca>
Message-ID: <c2abeb7e-aaa9-242d-8607-3ea5086d3027@binghamton.edu>

In clinical medicine, the question the patient asks rarely represents
their main concern. Most of what I've done in my career, and most of
what I've taught, is about how to have the back-and-forth dynamic dialoq
with the patient, to help them formulate what's really on their mind,
and make sure I understand it before proceeding.

Seems to me that statistical consulting, or working IT in an
organization where one is serving "internal" customers, is similar.
Students need to learn the skills of clarifying, verifying, and
paraphrasing a client's needs.

Sure, ChatGPT may be able to generate decent code to do what a client
*says* they want to do, but is that *really* what they are looking for?

So don't retire yet :)

--Chris Ryan

Boris Steipe wrote:
> Technically not a help question. But crucial to be aware of, especially for those of us in academia, or otherwise teaching R. I am not aware of a suitable alternate forum. If this does not interest you, please simply ignore - I already know that this may be somewhat OT.
> 
> Thanks.
> ------------------------------------------------------
> 
> You very likely have heard of ChatGPT, the conversation interface on top of the GPT-3 large language model and that it can generate code. I thought it doesn't do R - I was wrong. Here is a little experiment:
> 
> MY PROMPT:
> ==========
> Please write me some R code that will read a tsv file, remove all rows that have duplicates in the column "names", and store the median values of the remaining rows in a variable called "Medians". Of course, that calculation should only be done with columns that are numeric. Print the last variable in order from largest to smallest.
> 
> 
> AI RESPONSE:
> ============
> 
> Here is some R code that should accomplish what you've described:
> 
> (Note: the code is formatted in a little terminal window, complete with a button to "copy code" at the top.)
> 
> ----
> # Read the tsv file
> data <- read.table("file.tsv", header = TRUE, sep = "\t")
> 
> # Remove rows with duplicates in the "names" column
> data <- data[!duplicated(data$names), ]
> 
> # Select only the numeric columns
> num_columns <- sapply(data, is.numeric)
> numeric_data <- data[, num_columns]
> 
> # Calculate the medians for each column
> Medians <- apply(numeric_data, 1, median)
> 
> # Sort Medians in descending order
> Medians <- sort(Medians, decreasing = TRUE)
> 
> # Print Medians
> print(Medians)
> ----
> 
> This code assumes that the tsv file is called "file.tsv" and is stored in the current working directory. It also assumes that the first row of the file contains the column names.
> 
> 
> 
> MY PROMPT:
> ==========
> Can you provide me with a bit of sample data that I can use to test this code?
> 
> AI RESPONSE:
> ============
> Certainly! Here is some sample data that you can use to test the code I provided:
> 
> ----
> name	age	height	weight
> Alice	23	5.6	120
> Bob	32	6.2	180
> Charlie	29	5.9	160
> Alice	23	5.6	120
> David	25	5.8	140
> Eve	27	5.5	110
> ----
> 
> You can save this data as a tsv file and use it to test the code.
> 
> 
> ------------------------------------------------------
> 
> Notes: 
> 1) The code, as written does not work with the test data. The reason is that the test data specifies a column "name", but the code assumes "names" (which I specified in the instructions). Once this is fixed in the test data, the code executes.
> 
> 2) The instructions are not accurately translated: I had asked for row means. But changing the margin in the apply() statement from 2 to 1 does the correct thing.
> 
> 3) Note that the test data contains both numeric and non-numeric columns. Also, the name "Alice" is duplicated in the test data, which is subtle, and the right thing to do.
> 
> 
> ------------------------------------------------------
> 
> A similar experiment, run on the beta-site of OpenAI's Codex code-completion tool gives the following code (complete with the comments.):
> 
> ----
> # Read in the data
> data <- read.table("mydata.tsv", sep = "\t", header = TRUE)
> 
> # Remove all rows that have duplicates in the column "names"
> unique_names <- unique(data$names)
> data_unique <- data[data$names %in% unique_names,]
> 
> # Calculate medians 
> Medians <- sapply(data_unique[, sapply(data_unique, is.numeric)], median, na.rm = TRUE)
> 
> # Print last variable in order form largest to smallest
> rev(sort(Medians[length(Medians)]))
> ----
> 
> Note that the strategy is quite different (e.g using %in%, not duplicated() ), the interpretation of "last variable" is technically correct but not what I had in mind (ChatGPT got that right though).
> 
> 
> Changing my prompts slightly resulted it going for a dplyr solution instead, complete with %>% idioms etc ... again, syntactically correct but not giving me the fully correct results. 
> 
> ------------------------------------------------------
> 
> Bottom line: The AI's ability to translate natural language instructions into code is astounding. Errors the AI makes are subtle and probably not easy to fix if you don't already know what you are doing. But the way that this can be "confidently incorrect" and plausible makes it nearly impossible to detect unless you actually run the code (you may have noticed that when you read the code).
> 
> Will our students use it? Absolutely.
> 
> Will they successfully cheat with it? That depends on the assignment. We probably need to _encourage_ them to use it rather than sanction - but require them to attribute the AI, document prompts, and identify their own, additional contributions.
> 
> Will it help them learn? When you are aware of the issues, it may be quite useful. It may be especially useful to teach them to specify their code carefully and completely, and to ask questions in the right way. Test cases are crucial.
> 
> How will it affect what we do as instructors? I don't know. Really. 
> 
> And the future? I am not pleased to extrapolate to a job market in which they compete with knowledge workers who work 24/7 without benefits, vacation pay, or even a salary. They'll need to rethink the value of their investment in an academic education. We'll need to rethink what we do to provide value above and beyond what AI's can do. (Nb. all of the arguments I hear about why humans will always be better etc. are easily debunked, but that's even more OT :-)
> 
> --------------------------------------------------------
> 
> If you have thoughts to share how your institution is thinking about academic integrity in this situation, or creative ideas how to integrate this into teaching, I'd love to hear from you. 
> 
> 
> All the best!
> Boris
> 
> 
> --
> Boris Steipe MD, PhD
> University of Toronto
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From r@oknz @end|ng |rom gm@||@com  Tue Dec 20 03:01:38 2022
From: r@oknz @end|ng |rom gm@||@com (Richard O'Keefe)
Date: Tue, 20 Dec 2022 15:01:38 +1300
Subject: [R] Integer division
In-Reply-To: <82303402-5045-d7e7-c4f5-84bb1e3d1487@ehar.se>
References: <82303402-5045-d7e7-c4f5-84bb1e3d1487@ehar.se>
Message-ID: <CABcYAdKU2_eiTarmSn6yvtt3bsPE4hM8-dOY24_PgtACLifA3A@mail.gmail.com>

The Fortran '08 standard says <<
One operand of type integer may be divided by another operand of type
integer. Although the mathematical
quotient of two integers is not necessarily an integer, Table 7.2 specifies
that an expression involving the division
operator with two operands of type integer is interpreted as an expression
of type integer. The result of such an
operation is the integer closest to the mathematical quotient and between
zero and the mathematical quotient
inclusively. >>
Another way to say this is that integer division in
Fortran TRUNCATES towards zero.  It does not round and
never has.

C carefully left the behaviour of integer division (/)
unspecified, but introduced the div(,) function with the
same effect as Fortran (/).  Later versions of the C
standard tightened this up, and the C17 standard reads <<
The result of the / operator is the quotient from the division of the first
operand by the second; the
result of the % operator is the remainder. In both operations, if the value
of the second operand is
zero, the behavior is undefined.
When integers are divided, the result of the / operator is the algebraic
quotient with any fractional
part discarded. 107) If the quotient a/b is representable, the expression
(a/b)*b + a%b shall equal a ;
otherwise, the behavior of both a/b and a%b is undefined.>>

That is, C17 TRUNCATES the result of division towards
zero.  I don't know of any C compiler that rounds,
certainly gcc does not.


The Java 15 Language Specification says
<< Integer division rounds toward 0. >>
which also specified truncating division.


The help for ?"%/%" does not say what the result is.
Or if it does, I can't find it.  Either way, this is
a defect in the documentation.  It needs to be spelled
out very clearly.
R version 4.2.2 Patched (2022-11-10 r83330) -- "Innocent and Trusting"
> c(-8,8) %/% 3
[1] -3  2
so we deduce that R *neither* rounds *not* truncates,
but returns the floor of the quotient.
It is widely argued that flooring division is more
generally useful than rounding or truncating division,
but it is admittedly surprising.

On Tue, 20 Dec 2022 at 02:51, G?ran Brostr?m <gb at ehar.se> wrote:

> I have a long vector x with five-digit codes where the first digit of
> each is of special interest, so I extracted them through
>
>  > y <- x %/% 10000
>
> but to my surprise y contained the value -1 in some places. It turned
> out that x contains -1 as a symbol for 'missing value' so in effect I
> found that
>
>  > -1 %/% 10000 == -1
>
> Had to check the help page for "%/%", and the first relevant comment I
> found was:
>
> "Users are sometimes surprised by the value returned".
>
> No surprise there. Further down:
>
> ?%%? indicates ?x mod y? (?x modulo y?) and ?%/%? indicates
>       integer division.  It is guaranteed that
>
>       ? x == (x %% y) + y * (x %/% y) ? (up to rounding error)
>
> I did expect  (a %/% b) to return round(a / b), like gfortran and gcc,
> but instead I get floor(a / b) in R. What is the reason for these
> different definitions? And shouldn't R's definition be documented?
>
> Thanks, G?ran
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @vi@e@gross m@iii@g oii gm@ii@com  Tue Dec 20 07:00:40 2022
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Tue, 20 Dec 2022 01:00:40 -0500
Subject: [R] Amazing AI
In-Reply-To: <5A6E97AB-F2EE-47D3-828D-AA6446ECFB06@utoronto.ca>
References: <E3D88833-62F2-4908-9094-7881B76BCBF9@utoronto.ca>
 <20221219085804.kjj35ggsberm37p7@Azure-Swing>
 <5A6E97AB-F2EE-47D3-828D-AA6446ECFB06@utoronto.ca>
Message-ID: <008501d91438$64145b00$2c3d1100$@gmail.com>

Boris,

What you are telling us is not particularly new or spectacular in a sense.
It has often been hard to grade assignments students do when they choose an
unexpected path. I had one instructor who always graded my exams (in the
multiple courses I took with him) because unlike most of the sheep, I did
not bother memorizing the way something was done or proven and created my
own solutions on the fly during the test, often in ways he had to work hard
at following and that almost amused him as mine tended to be correct, albeit
not what he would have thought of.

Your issue is not particularly about R as similar scenarios can be found in
many languages and environments.

In programming, it is arguably worse as it is common to be able to do things
so many ways. But plain old R has so many packages available, often with
source code, that any student who finds one that does something they want,
may be able to copy and modify some of the functions involved into their own
code already and fool an evaluator into thinking they did it on their own.
That is a tad harder, as many packages improve the code efficiency by
(re)writing many parts in C/C++.

I have seen things like a GUI that lets you click on various check boxes and
other controls and then use those instructions to read in data files, do
various operations on them, and provide output. Some allow quite a bit of
functionality and also offer you the opportunity to see the R code it
generates, and let you adjust that if it does not quite meet your needs.
Much of it involves including various packages and calling functions in
them, but if your students are allowed to use such things, how would you
know how little actual work they did?

I echo what someone else wrote. Training students for their future jobs in
an uncertain and changing future, may be more effective in teaching them how
to find ever better or different ways to get things done, or even switch to
growing areas near their field.  All kinds of automation of jobs are
happening and will continue to happen in the knowledge professions. People
who read manuals cover to cover and keep consulting them constantly are a
rarity. Many people often first do web searches or consult experts including
online versions of the documentation. Many will happily use software that
lets them do more and more with fewer lines of code written by them and
especially when that software has been used and tested long enough to be
relatively free of bugs when used as directed. Why would anyone these days
want to constantly re-invent the wheel and write routines to read in data
from files using known formats when you can use ones that exist and, if
needed in special cases, make some tweaks such as converting a column it
made into integer, back into the floating point you want for some later
reason?

But if your students are using something that is error-prone when used the
way they are using it, that is a problem as they are not only not learning
some basics or techniques you want them to know, but relying on what may be
bad tools without taking the time and effort to check the result or make
their own tweaks. Such software may not provide a way to do something like
treat multiple entries of various kinds as being NA, as an example. So you
would need your own code to check the result between some steps and do your
own further conversions so that "." and "" and "NA" and "-" all become NA,
again, just a made up example.

Yes, some students will easily fool you when grading but that already
happens when someone hires out getting some work done and claims it as their
own.

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Boris Steipe
Sent: Monday, December 19, 2022 3:16 PM
To: Milan Glacier <news at milanglacier.com>
Cc: r-help at r-project.org
Subject: Re: [R] Amazing AI

Exactly. But not just "error prone", rather: eloquently and confidently
incorrect. And that in itself is a problem. When I evaluate students' work,
I implicitly do so from a mental model of the student - aptitude, ability,
experience, language skills etc. That's useful for summative assessment,
since it helps efficiency - but that won't work anymore. I see a need to
assess much more carefully, require fine-grained referencing, check every
single fact ... and that won't scale. And then there is also the spectre of
having to decide when this crosses the line to "concoction" - i.e. an actual
academic offence ...

Best,
Boris



> On 2022-12-19, at 03:58, Milan Glacier <news at milanglacier.com> wrote:
> 
> [You don't often get email from news at milanglacier.com. Learn why this 
> is important at https://aka.ms/LearnAboutSenderIdentification ]
> 
> On 12/18/22 19:01, Boris Steipe wrote:
>> Technically not a help question. But crucial to be aware of, especially
for those of us in academia, or otherwise teaching R. I am not aware of a
suitable alternate forum. If this does not interest you, please simply
ignore - I already know that this may be somewhat OT.
>> 
>> Thanks.
>> ------------------------------------------------------
>> 
>> You very likely have heard of ChatGPT, the conversation interface on top
of the GPT-3 large language model and that it can generate code. I thought
it doesn't do R - I was wrong. Here is a little experiment:
>> Note that the strategy is quite different (e.g using %in%, not
duplicated() ), the interpretation of "last variable" is technically correct
but not what I had in mind (ChatGPT got that right though).
>> 
>> 
>> Changing my prompts slightly resulted it going for a dplyr solution
instead, complete with %>% idioms etc ... again, syntactically correct but
not giving me the fully correct results.
>> 
>> ------------------------------------------------------
>> 
>> Bottom line: The AI's ability to translate natural language instructions
into code is astounding. Errors the AI makes are subtle and probably not
easy to fix if you don't already know what you are doing. But the way that
this can be "confidently incorrect" and plausible makes it nearly impossible
to detect unless you actually run the code (you may have noticed that when
you read the code).
>> 
>> Will our students use it? Absolutely.
>> 
>> Will they successfully cheat with it? That depends on the assignment. We
probably need to _encourage_ them to use it rather than sanction - but
require them to attribute the AI, document prompts, and identify their own,
additional contributions.
>> 
>> Will it help them learn? When you are aware of the issues, it may be
quite useful. It may be especially useful to teach them to specify their
code carefully and completely, and to ask questions in the right way. Test
cases are crucial.
>> 
>> How will it affect what we do as instructors? I don't know. Really.
>> 
>> And the future? I am not pleased to extrapolate to a job market in 
>> which they compete with knowledge workers who work 24/7 without 
>> benefits, vacation pay, or even a salary. They'll need to rethink the 
>> value of their investment in an academic education. We'll need to 
>> rethink what we do to provide value above and beyond what AI's can 
>> do. (Nb. all of the arguments I hear about why humans will always be 
>> better etc. are easily debunked, but that's even more OT :-)
>> 
>> --------------------------------------------------------
>> 
>> If you have thoughts to share how your institution is thinking about
academic integrity in this situation, or creative ideas how to integrate
this into teaching, I'd love to hear from you.
> 
> *NEVER* let the AI misleading the students! ChatGPT gives you 
> seemingly sound but actually *wrong* code!
> 
> ChatGPT never understands the formal abstraction behind the code, it 
> just understands the shallow text pattern (and the syntax rules) in 
> the code. And it often gives you the code that seemingly correct but 
> indeed wrongly output. If it is used with code completion, then it is 
> okay (just like github copilot), since the coder need to modify the 
> code after getting the completion. But if you want to use ChatGPT for 
> students to query information / writing code, it is error proning!

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From gb @end|ng |rom eh@r@@e  Tue Dec 20 07:53:00 2022
From: gb @end|ng |rom eh@r@@e (=?UTF-8?Q?G=c3=b6ran_Brostr=c3=b6m?=)
Date: Tue, 20 Dec 2022 07:53:00 +0100
Subject: [R] Integer division
In-Reply-To: <CABcYAdKU2_eiTarmSn6yvtt3bsPE4hM8-dOY24_PgtACLifA3A@mail.gmail.com>
References: <82303402-5045-d7e7-c4f5-84bb1e3d1487@ehar.se>
 <CABcYAdKU2_eiTarmSn6yvtt3bsPE4hM8-dOY24_PgtACLifA3A@mail.gmail.com>
Message-ID: <bc3ab4e3-55e9-fdeb-e9a2-db79e93f7383@ehar.se>

Thanks Richard,

the "rounding claim" was my mistake (as I replied to Martin), I should 
said "truncates toward zero" as you explain.

However, my point was that these two mathematical functions should be 
defined in the documentation, as you also say. And I was surprised that 
there is no consensus regarding the definition of such elementary functions.

G?ran

On 2022-12-20 03:01, Richard O'Keefe wrote:
> The Fortran '08 standard says <<
> One operand of type integer may be divided by another operand of type 
> integer. Although the mathematical
> quotient of two integers is not necessarily an integer, Table 7.2 
> specifies that an expression involving the division
> operator with two operands of type integer is interpreted as an 
> expression of type integer. The result of such an
> operation is the integer closest to the mathematical quotient and 
> between zero and the mathematical quotient
> inclusively. >>
> Another way to say this is that integer division in
> Fortran TRUNCATES towards zero.? It does not round and
> never has.
> 
> C carefully left the behaviour of integer division (/)
> unspecified, but introduced the div(,) function with the
> same effect as Fortran (/).? Later versions of the C
> standard tightened this up, and the C17 standard reads <<
> The result of the / operator is the quotient from the division of the 
> first operand by the second; the
> result of the % operator is the remainder. In both operations, if the 
> value of the second operand is
> zero, the behavior is undefined.
> When integers are divided, the result of the / operator is the algebraic 
> quotient with any fractional
> part discarded. 107) If the quotient a/b is representable, the 
> expression (a/b)*b + a%b shall equal a ;
> otherwise, the behavior of both a/b and a%b is undefined.>>
> 
> That is, C17 TRUNCATES the result of division towards
> zero.? I don't know of any C compiler that rounds,
> certainly gcc does not.
> 
> 
> The Java 15 Language Specification says
> << Integer division rounds toward 0. >>
> which also specified truncating division.
> 
> 
> The help for ?"%/%" does not say what the result is.
> Or if it does, I can't find it.? Either way, this is
> a defect in the documentation.? It needs to be spelled
> out very clearly.
> R version 4.2.2 Patched (2022-11-10 r83330) -- "Innocent and Trusting"
>  > c(-8,8) %/% 3
> [1] -3 ?2
> so we deduce that R *neither* rounds *not* truncates,
> but returns the floor of the quotient.
> It is widely argued that flooring division is more
> generally useful than rounding or truncating division,
> but it is admittedly surprising.
> 
> On Tue, 20 Dec 2022 at 02:51, G?ran Brostr?m <gb at ehar.se 
> <mailto:gb at ehar.se>> wrote:
> 
>     I have a long vector x with five-digit codes where the first digit of
>     each is of special interest, so I extracted them through
> 
>      ?> y <- x %/% 10000
> 
>     but to my surprise y contained the value -1 in some places. It turned
>     out that x contains -1 as a symbol for 'missing value' so in effect I
>     found that
> 
>      ?> -1 %/% 10000 == -1
> 
>     Had to check the help page for "%/%", and the first relevant comment I
>     found was:
> 
>     "Users are sometimes surprised by the value returned".
> 
>     No surprise there. Further down:
> 
>     ?%%? indicates ?x mod y? (?x modulo y?) and ?%/%? indicates
>      ? ? ? integer division.? It is guaranteed that
> 
>      ? ? ? ? x == (x %% y) + y * (x %/% y) ? (up to rounding error)
> 
>     I did expect? (a %/% b) to return round(a / b), like gfortran and gcc,
>     but instead I get floor(a / b) in R. What is the reason for these
>     different definitions? And shouldn't R's definition be documented?
> 
>     Thanks, G?ran
> 
>     ______________________________________________
>     R-help at r-project.org <mailto:R-help at r-project.org> mailing list --
>     To UNSUBSCRIBE and more, see
>     https://stat.ethz.ch/mailman/listinfo/r-help
>     <https://stat.ethz.ch/mailman/listinfo/r-help>
>     PLEASE do read the posting guide
>     http://www.R-project.org/posting-guide.html
>     <http://www.R-project.org/posting-guide.html>
>     and provide commented, minimal, self-contained, reproducible code.
>


From @vi@e@gross m@iii@g oii gm@ii@com  Tue Dec 20 17:57:55 2022
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Tue, 20 Dec 2022 11:57:55 -0500
Subject: [R] Integer division
In-Reply-To: <bc3ab4e3-55e9-fdeb-e9a2-db79e93f7383@ehar.se>
References: <82303402-5045-d7e7-c4f5-84bb1e3d1487@ehar.se>
 <CABcYAdKU2_eiTarmSn6yvtt3bsPE4hM8-dOY24_PgtACLifA3A@mail.gmail.com>
 <bc3ab4e3-55e9-fdeb-e9a2-db79e93f7383@ehar.se>
Message-ID: <018201d91494$35359680$9fa0c380$@gmail.com>

Documentation specifics aside, and I am not convinced that is an issue here, there is a responsibility on programmers on how to use routines like this by testing small samples and seeing if the results match expectations.

Since negative numbers were possible, that would have been part of such tests.

And there are many ways to do things and the method chosen does not strike me as a particularly great method of finding out about the first digit unless you are guaranteed to have exactly five digits. It may be efficient but it can likely fail in many cases where the data is not as expected such as more than five digits or not containing a number.

So many programmers would first filter the data to check for various conditions. Some might simply try to convert the numbers into character strings (perhaps the absolute value of the number instead) and look at the first character instead, or handle it differently if it is a minus sign. 

Many programming languages contain families of functions for some tasks when there are many possible ways to do something that can get somewhat different results. There is absolutely NO reason to assume that any one member of a family of functions will do what you expect and you may need to either explore others that are similar or make your own.

Something as simple as this might give you what you want:

first_of_five <- function(numb) abs(numb) %/% 10000





-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of G?ran Brostr?m
Sent: Tuesday, December 20, 2022 1:53 AM
To: Richard O'Keefe <raoknz at gmail.com>
Cc: r-help at r-project.org
Subject: Re: [R] Integer division

Thanks Richard,

the "rounding claim" was my mistake (as I replied to Martin), I should said "truncates toward zero" as you explain.

However, my point was that these two mathematical functions should be defined in the documentation, as you also say. And I was surprised that there is no consensus regarding the definition of such elementary functions.

G?ran

On 2022-12-20 03:01, Richard O'Keefe wrote:
> The Fortran '08 standard says <<
> One operand of type integer may be divided by another operand of type 
> integer. Although the mathematical quotient of two integers is not 
> necessarily an integer, Table 7.2 specifies that an expression 
> involving the division operator with two operands of type integer is 
> interpreted as an expression of type integer. The result of such an 
> operation is the integer closest to the mathematical quotient and 
> between zero and the mathematical quotient inclusively. >> Another way 
> to say this is that integer division in Fortran TRUNCATES towards 
> zero.  It does not round and never has.
> 
> C carefully left the behaviour of integer division (/) unspecified, 
> but introduced the div(,) function with the same effect as Fortran 
> (/).  Later versions of the C standard tightened this up, and the C17 
> standard reads << The result of the / operator is the quotient from 
> the division of the first operand by the second; the result of the % 
> operator is the remainder. In both operations, if the value of the 
> second operand is zero, the behavior is undefined.
> When integers are divided, the result of the / operator is the 
> algebraic quotient with any fractional part discarded. 107) If the 
> quotient a/b is representable, the expression (a/b)*b + a%b shall 
> equal a ; otherwise, the behavior of both a/b and a%b is undefined.>>
> 
> That is, C17 TRUNCATES the result of division towards zero.  I don't 
> know of any C compiler that rounds, certainly gcc does not.
> 
> 
> The Java 15 Language Specification says << Integer division rounds 
> toward 0. >> which also specified truncating division.
> 
> 
> The help for ?"%/%" does not say what the result is.
> Or if it does, I can't find it.  Either way, this is a defect in the 
> documentation.  It needs to be spelled out very clearly.
> R version 4.2.2 Patched (2022-11-10 r83330) -- "Innocent and Trusting"
>  > c(-8,8) %/% 3
> [1] -3  2
> so we deduce that R *neither* rounds *not* truncates, but returns the 
> floor of the quotient.
> It is widely argued that flooring division is more generally useful 
> than rounding or truncating division, but it is admittedly surprising.
> 
> On Tue, 20 Dec 2022 at 02:51, G?ran Brostr?m <gb at ehar.se 
> <mailto:gb at ehar.se>> wrote:
> 
>     I have a long vector x with five-digit codes where the first digit of
>     each is of special interest, so I extracted them through
> 
>       > y <- x %/% 10000
> 
>     but to my surprise y contained the value -1 in some places. It turned
>     out that x contains -1 as a symbol for 'missing value' so in effect I
>     found that
> 
>       > -1 %/% 10000 == -1
> 
>     Had to check the help page for "%/%", and the first relevant comment I
>     found was:
> 
>     "Users are sometimes surprised by the value returned".
> 
>     No surprise there. Further down:
> 
>     ?%%? indicates ?x mod y? (?x modulo y?) and ?%/%? indicates
>            integer division.  It is guaranteed that
> 
>            ? x == (x %% y) + y * (x %/% y) ? (up to rounding error)
> 
>     I did expect  (a %/% b) to return round(a / b), like gfortran and gcc,
>     but instead I get floor(a / b) in R. What is the reason for these
>     different definitions? And shouldn't R's definition be documented?
> 
>     Thanks, G?ran
> 
>     ______________________________________________
>     R-help at r-project.org <mailto:R-help at r-project.org> mailing list --
>     To UNSUBSCRIBE and more, see
>     https://stat.ethz.ch/mailman/listinfo/r-help
>     <https://stat.ethz.ch/mailman/listinfo/r-help>
>     PLEASE do read the posting guide
>     http://www.R-project.org/posting-guide.html
>     <http://www.R-project.org/posting-guide.html>
>     and provide commented, minimal, self-contained, reproducible code.
>

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From r@oknz @end|ng |rom gm@||@com  Wed Dec 21 04:44:51 2022
From: r@oknz @end|ng |rom gm@||@com (Richard O'Keefe)
Date: Wed, 21 Dec 2022 16:44:51 +1300
Subject: [R] Integer division
In-Reply-To: <bc3ab4e3-55e9-fdeb-e9a2-db79e93f7383@ehar.se>
References: <82303402-5045-d7e7-c4f5-84bb1e3d1487@ehar.se>
 <CABcYAdKU2_eiTarmSn6yvtt3bsPE4hM8-dOY24_PgtACLifA3A@mail.gmail.com>
 <bc3ab4e3-55e9-fdeb-e9a2-db79e93f7383@ehar.se>
Message-ID: <CABcYAd+sC-C8sDVuEmPNE2C-f+rwf0fKejF2scWgwcEA=pOqRg@mail.gmail.com>

Lack of consensus:
  I should mention Python's // operator, which does
  flooring division.
  I should mention Common Lisp, where (floor - -),
  (ceiling - -), (round - -), and (truncate - -)
  all return a quotient and appropriate remainder.
  I should mention Smalltalk, where // and \\ are
  flooring quotient and remainder and quo: and rem:
  are truncating quotient and remainder.
  I should give dishonourable mention to certain
  programming languages where the quotient and remainder
  operators do not actually fit together.

Why the lack of consensus:
  It starts with the fact that there wasn't an agreed
  *mathematical* definition.  Number theorists, as a
  rule, don't care about negative numbers all that much.
  To the extent that they do care, x mod y has to go
  around in neat cycles, which flooring division does
  satisfy and truncating division does not.

  It then goes on to early computers which used sign-and-
  magnitude or ones-complement representation.  In those
  computers, truncating division was the *obvious* thing
  to do.  It also had the nice property that
  n / (2**k) was the same thing as an arithmetic right
  shift by k bits.  And then twos-complement became
  popular.  And not only is the twos-complement range
  asymmetric (so that x might be representable but -x not)
  but arithmetic right shifts aren't the same as truncating
  division any more.  Whoops!

  And then, although flooring division still made sense for
  twos-complement but truncating division didn't really,
  new programming languages kept on specifying truncating
  division because the programming languages of the 1960s
  for the hardware of the 1960s did so.  So new hardware
  designers supported the new programming languages without
  supporting the *reasons* why truncating division had been
  used.

> (-8:7)%%4
 [1] 0 1 2 3 0 1 2 3 0 1 2 3 0 1 2 3

Think about for example histogramming a collection of
integers by their remainders and what would happen with
truncating remainder.

On Tue, 20 Dec 2022 at 19:53, G?ran Brostr?m <gb at ehar.se> wrote:

> Thanks Richard,
>
> the "rounding claim" was my mistake (as I replied to Martin), I should
> said "truncates toward zero" as you explain.
>
> However, my point was that these two mathematical functions should be
> defined in the documentation, as you also say. And I was surprised that
> there is no consensus regarding the definition of such elementary
> functions.
>
> G?ran
>
> On 2022-12-20 03:01, Richard O'Keefe wrote:
> > The Fortran '08 standard says <<
> > One operand of type integer may be divided by another operand of type
> > integer. Although the mathematical
> > quotient of two integers is not necessarily an integer, Table 7.2
> > specifies that an expression involving the division
> > operator with two operands of type integer is interpreted as an
> > expression of type integer. The result of such an
> > operation is the integer closest to the mathematical quotient and
> > between zero and the mathematical quotient
> > inclusively. >>
> > Another way to say this is that integer division in
> > Fortran TRUNCATES towards zero.  It does not round and
> > never has.
> >
> > C carefully left the behaviour of integer division (/)
> > unspecified, but introduced the div(,) function with the
> > same effect as Fortran (/).  Later versions of the C
> > standard tightened this up, and the C17 standard reads <<
> > The result of the / operator is the quotient from the division of the
> > first operand by the second; the
> > result of the % operator is the remainder. In both operations, if the
> > value of the second operand is
> > zero, the behavior is undefined.
> > When integers are divided, the result of the / operator is the algebraic
> > quotient with any fractional
> > part discarded. 107) If the quotient a/b is representable, the
> > expression (a/b)*b + a%b shall equal a ;
> > otherwise, the behavior of both a/b and a%b is undefined.>>
> >
> > That is, C17 TRUNCATES the result of division towards
> > zero.  I don't know of any C compiler that rounds,
> > certainly gcc does not.
> >
> >
> > The Java 15 Language Specification says
> > << Integer division rounds toward 0. >>
> > which also specified truncating division.
> >
> >
> > The help for ?"%/%" does not say what the result is.
> > Or if it does, I can't find it.  Either way, this is
> > a defect in the documentation.  It needs to be spelled
> > out very clearly.
> > R version 4.2.2 Patched (2022-11-10 r83330) -- "Innocent and Trusting"
> >  > c(-8,8) %/% 3
> > [1] -3  2
> > so we deduce that R *neither* rounds *not* truncates,
> > but returns the floor of the quotient.
> > It is widely argued that flooring division is more
> > generally useful than rounding or truncating division,
> > but it is admittedly surprising.
> >
> > On Tue, 20 Dec 2022 at 02:51, G?ran Brostr?m <gb at ehar.se
> > <mailto:gb at ehar.se>> wrote:
> >
> >     I have a long vector x with five-digit codes where the first digit of
> >     each is of special interest, so I extracted them through
> >
> >       > y <- x %/% 10000
> >
> >     but to my surprise y contained the value -1 in some places. It turned
> >     out that x contains -1 as a symbol for 'missing value' so in effect I
> >     found that
> >
> >       > -1 %/% 10000 == -1
> >
> >     Had to check the help page for "%/%", and the first relevant comment
> I
> >     found was:
> >
> >     "Users are sometimes surprised by the value returned".
> >
> >     No surprise there. Further down:
> >
> >     ?%%? indicates ?x mod y? (?x modulo y?) and ?%/%? indicates
> >            integer division.  It is guaranteed that
> >
> >            ? x == (x %% y) + y * (x %/% y) ? (up to rounding error)
> >
> >     I did expect  (a %/% b) to return round(a / b), like gfortran and
> gcc,
> >     but instead I get floor(a / b) in R. What is the reason for these
> >     different definitions? And shouldn't R's definition be documented?
> >
> >     Thanks, G?ran
> >
> >     ______________________________________________
> >     R-help at r-project.org <mailto:R-help at r-project.org> mailing list --
> >     To UNSUBSCRIBE and more, see
> >     https://stat.ethz.ch/mailman/listinfo/r-help
> >     <https://stat.ethz.ch/mailman/listinfo/r-help>
> >     PLEASE do read the posting guide
> >     http://www.R-project.org/posting-guide.html
> >     <http://www.R-project.org/posting-guide.html>
> >     and provide commented, minimal, self-contained, reproducible code.
> >
>

	[[alternative HTML version deleted]]


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Wed Dec 21 09:51:54 2022
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Wed, 21 Dec 2022 09:51:54 +0100
Subject: [R] Integer division
In-Reply-To: <CABcYAd+sC-C8sDVuEmPNE2C-f+rwf0fKejF2scWgwcEA=pOqRg@mail.gmail.com>
References: <82303402-5045-d7e7-c4f5-84bb1e3d1487@ehar.se>
 <CABcYAdKU2_eiTarmSn6yvtt3bsPE4hM8-dOY24_PgtACLifA3A@mail.gmail.com>
 <bc3ab4e3-55e9-fdeb-e9a2-db79e93f7383@ehar.se>
 <CABcYAd+sC-C8sDVuEmPNE2C-f+rwf0fKejF2scWgwcEA=pOqRg@mail.gmail.com>
Message-ID: <25506.51498.515884.179110@stat.math.ethz.ch>

>>>>> Richard O'Keefe 
>>>>>     on Wed, 21 Dec 2022 16:44:51 +1300 writes:

    > Lack of consensus: I should mention Python's // operator,
    > which does flooring division.  I should mention Common
    > Lisp, where (floor - -), (ceiling - -), (round - -), and
    > (truncate - -) all return a quotient and appropriate
    > remainder.  I should mention Smalltalk, where // and \\
    > are flooring quotient and remainder and quo: and rem: are
    > truncating quotient and remainder.  I should give
    > dishonourable mention to certain programming languages
    > where the quotient and remainder operators do not actually
    > fit together.

    > Why the lack of consensus: It starts with the fact that
    > there wasn't an agreed *mathematical* definition.  Number
    > theorists, as a rule, don't care about negative numbers
    > all that much.  To the extent that they do care, x mod y
    > has to go around in neat cycles, which flooring division
    > does satisfy and truncating division does not.

    >   It then goes on to early computers which used sign-and-
    > magnitude or ones-complement representation.  In those
    > computers, truncating division was the *obvious* thing to
    > do.  It also had the nice property that n / (2**k) was the
    > same thing as an arithmetic right shift by k bits.  And
    > then twos-complement became popular.  And not only is the
    > twos-complement range asymmetric (so that x might be
    > representable but -x not) but arithmetic right shifts
    > aren't the same as truncating division any more.  Whoops!

    >   And then, although flooring division still made sense
    > for twos-complement but truncating division didn't really,
    > new programming languages kept on specifying truncating
    > division because the programming languages of the 1960s
    > for the hardware of the 1960s did so.  So new hardware
    > designers supported the new programming languages without
    > supporting the *reasons* why truncating division had been
    > used.

    >> (-8:7)%%4
    >  [1] 0 1 2 3 0 1 2 3 0 1 2 3 0 1 2 3

    > Think about for example histogramming a collection of
    > integers by their remainders and what would happen with
    > truncating remainder.

    > On Tue, 20 Dec 2022 at 19:53, G?ran Brostr?m <gb at ehar.se>
    > wrote:

    >> Thanks Richard,
    >> 
    >> the "rounding claim" was my mistake (as I replied to
    >> Martin), I should said "truncates toward zero" as you
    >> explain.
    >> 
    >> However, my point was that these two mathematical
    >> functions should be defined in the documentation, as you
    >> also say. And I was surprised that there is no consensus
    >> regarding the definition of such elementary functions.
    >> 
    >> G?ran

    [...........]

Thank you all for your contributions, notably Richard's last one
providing really interesting historical context (of "why this mess?").

Note that the Wikipedia page
  https://en.m.wikipedia.org/wiki/Modulo_operation

also does mention "Euclidean division" which does have possibly
even nicer mathematical properties than the floored division
R (and quite a few other good softwares) use.

Still, be assured that we won't change R here.  Mathematical
(Algebra) related R packages can easily introduce corresponding
versions of div() and mod() functions, I'd say,  and I'd guess
these would already exist somewhere.

Yesterday, I've updated the  ?Arithmetic help page which now
does mention (more clearly if it was really already derivable
from the previous doc) what happens, also mentioning Knuth and
the Wikipedia page.

--> https://stat.ethz.ch/R-manual/R-devel/library/base/html/Arithmetic.html

(search for  "R-devel R-manual ETH" in your browser, then
 -> 'Packages' -> 'base' ..)

Martin

--
Martin Maechler
ETH Zurich  and  R Core team


From M@|te@F|ender @end|ng |rom w@go@com  Wed Dec 21 08:59:40 2022
From: M@|te@F|ender @end|ng |rom w@go@com (Flender, Malte)
Date: Wed, 21 Dec 2022 07:59:40 +0000
Subject: [R] traceback performs differently in "interactive-mode" then in
 "script-mode"
Message-ID: <PAXPR08MB71553AFAFDFB00015C2B77B386EB9@PAXPR08MB7155.eurprd08.prod.outlook.com>

Hello,

a few days ago I encountered a strange behavior of base R.
I'm not really sure if it is a bug or not.
Thus I am somewhat hesitant to write a bug report.
Instead I write to R-Help to ask you if this behavior can be considered a bug or not.
I started with a question at stackoverflow (https://stackoverflow.com/questions/74796994/r-traceback-performs-differently-in-interactive-mode-then-in-script-mode), but got no response there.

The strange behavior of base R lies in how it acts differently in an interactive R-Session then the execution of an R-Script.
As you see in the MWE below the traceback()-function returns NULL in script mode (first call) and an actual traceback in interactive mode (second call).

Can you reproduce this behavior?

Here is MWE, which contains a small test-script and the calls to it in an interactive and script mode:

user at server:~/folder> cat test.r

options(error = NULL)

onexit <- function() {
    error.msg <- geterrmessage()
    traceback <- traceback()

    print(paste("error.msg: ", nchar(error.msg), sep = ""))
    print(paste("traceback: ", is.null(traceback), " : ", traceback, sep = ""))

    if (nchar(error.msg) != 0 && !is.null(traceback)) {
          print("Uncaught Error")
    } else if (nchar(error.msg) != 0 && is.null(traceback)) {
         print("Caught Error")
    } else if (nchar(error.msg) == 0 && is.null(traceback)) {
         print("No Error")
    } else {
        stop("ERROR in on.exit: bad traceback error.msg combination")
    }
}

fail <- function() {
          on.exit(
              onexit(),
              add = TRUE,
              after = TRUE)

  print("SOMETHING")
  stop("BAD")
}

fail()

user at server:~/folder> docker run -it --rm -v /home/user/folder/:/data/R/ r-base:4.2.2 R -e 'source("/data/R/test.r")'

R version 4.2.2 (2022-10-31) -- "Innocent and Trusting"
Copyright (C) 2022 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> source("/data/R/test.r")
[1] "SOMETHING"
Error in fail() : BAD
Calls: source -> withVisible -> eval -> eval -> fail
No traceback available
[1] "error.msg: 75"
[1] "traceback: TRUE : "
[1] "Caught Error"
Execution halted
user at server:~/folder> docker run -it --rm -v /home/user/folder/:/data/R/ r-base:4.2.2 R

R version 4.2.2 (2022-10-31) -- "Innocent and Trusting"
Copyright (C) 2022 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> source("/data/R/test.r")
[1] "SOMETHING"
Error in fail() : BAD
6: stop("BAD") at test.r#30
5: fail() at test.r#33
4: eval(ei, envir)
3: eval(ei, envir)
2: withVisible(eval(ei, envir))
1: source("/data/R/test.r")
[1] "error.msg: 22"
[1] "traceback: FALSE : stop(\"BAD\")"
[2] "traceback: FALSE : fail()"
[3] "traceback: FALSE : eval(ei, envir)"
[4] "traceback: FALSE : eval(ei, envir)"
[5] "traceback: FALSE : withVisible(eval(ei, envir))"
[6] "traceback: FALSE : source(\"/data/R/test.r\")"
[1] "Uncaught Error"
>


Mit freundlichem Gru? / Best regards
WAGO GmbH & Co. KG

Malte Flender
Komplexit?tsmanagement / Data Science
phone: +49 571 887-49779
fax: +49 571 887-849779
mailto: Malte.Flender at wago.com

WAGO GmbH & Co.KG
Hansastra?e 27
32423 Minden
Deutschland
http://www.wago.com<http://www.wago.com/>



Internal



 

 Diese E-Mail einschlie?lich ihrer Anh?nge ist vertraulich und daher allein f?r den Gebrauch durch den vorgesehenen Empf?nger bestimmt. Dritten ist das Lesen, Verteilen oder Weiterleiten dieser E-Mail sowie jedwedes Vertrauen auf deren Inhalt untersagt. Wir bitten, eine fehlgeleitete E-Mail unverz?glich vollst?ndig zu l?schen und uns eine Nachricht zukommen zu lassen.
This email may contain material that is confidential and/or privileged for the sole use of the intended recipient. Any review, reliance or distribution by others or forwarding without express permission is strictly prohibited. If you are not the intended recipient, please contact the sender and delete all copies. 
 WAGO GmbH & Co. KG - Sitz: Minden - Amtsgericht Bad Oeynhausen HRA 6218
Komplement?rin: WAGO Beteiligungs GmbH ? Sitz: Brunn am Gebirge (?sterreich) - Landesgericht Wiener Neustadt, FN 553907w - Niederlassung Minden - Amtsgericht Bad Oeynhausen, HRB 17863
Gesch?ftsf?hrung: Axel B?rner, Kathrin Fricke, Dr. Heiner Lang, Christian Sallach, J?rgen Sch?fer, Dr. Karsten Stoll, Yannick Weber
WAGO ist eine eingetragene Marke der WAGO Verwaltungsgesellschaft mbH  


	[[alternative HTML version deleted]]


From b@row||ng@on @end|ng |rom |@nc@@ter@@c@uk  Wed Dec 21 14:50:45 2022
From: b@row||ng@on @end|ng |rom |@nc@@ter@@c@uk (Barry Rowlingson)
Date: Wed, 21 Dec 2022 13:50:45 +0000
Subject: [R] [External]  Amazing AI
In-Reply-To: <693f9741fc304769b4b419a6aca29bdb@LO2P265MB3344.GBRP265.PROD.OUTLOOK.COM>
References: <693f9741fc304769b4b419a6aca29bdb@LO2P265MB3344.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <CANVKczMVS3Cbyi_XT5kfBzk4XBaZEMr3hH2ZgpX_r1iU5KWJfA@mail.gmail.com>

Next year one of my R programming assigments will read like this:

"Here is some R code written by a multi-million dollar AI system to
compute [something]. It doesn't work. Fix the bugs, then ask the AI to
write a letter to its creators apologising for how rubbish it is at
coding. Collect one million dollars."


On Sun, Dec 18, 2022 at 7:01 PM Boris Steipe <boris.steipe at utoronto.ca> wrote:
>
> This email originated outside the University. Check before clicking links or attachments.
>
> Technically not a help question. But crucial to be aware of, especially for those of us in academia, or otherwise teaching R. I am not aware of a suitable alternate forum. If this does not interest you, please simply ignore - I already know that this may be somewhat OT.
>
> Thanks.
> ------------------------------------------------------
>
> You very likely have heard of ChatGPT, the conversation interface on top of the GPT-3 large language model and that it can generate code. I thought it doesn't do R - I was wrong. Here is a little experiment:
>
> MY PROMPT:
> ==========
> Please write me some R code that will read a tsv file, remove all rows that have duplicates in the column "names", and store the median values of the remaining rows in a variable called "Medians". Of course, that calculation should only be done with columns that are numeric. Print the last variable in order from largest to smallest.
>
>
> AI RESPONSE:
> ============
>
> Here is some R code that should accomplish what you've described:
>
> (Note: the code is formatted in a little terminal window, complete with a button to "copy code" at the top.)
>
> ----
> # Read the tsv file
> data <- read.table("file.tsv", header = TRUE, sep = "\t")
>
> # Remove rows with duplicates in the "names" column
> data <- data[!duplicated(data$names), ]
>
> # Select only the numeric columns
> num_columns <- sapply(data, is.numeric)
> numeric_data <- data[, num_columns]
>
> # Calculate the medians for each column
> Medians <- apply(numeric_data, 1, median)
>
> # Sort Medians in descending order
> Medians <- sort(Medians, decreasing = TRUE)
>
> # Print Medians
> print(Medians)
> ----
>
> This code assumes that the tsv file is called "file.tsv" and is stored in the current working directory. It also assumes that the first row of the file contains the column names.
>
>
>
> MY PROMPT:
> ==========
> Can you provide me with a bit of sample data that I can use to test this code?
>
> AI RESPONSE:
> ============
> Certainly! Here is some sample data that you can use to test the code I provided:
>
> ----
> name    age     height  weight
> Alice   23      5.6     120
> Bob     32      6.2     180
> Charlie 29      5.9     160
> Alice   23      5.6     120
> David   25      5.8     140
> Eve     27      5.5     110
> ----
>
> You can save this data as a tsv file and use it to test the code.
>
>
> ------------------------------------------------------
>
> Notes:
> 1) The code, as written does not work with the test data. The reason is that the test data specifies a column "name", but the code assumes "names" (which I specified in the instructions). Once this is fixed in the test data, the code executes.
>
> 2) The instructions are not accurately translated: I had asked for row means. But changing the margin in the apply() statement from 2 to 1 does the correct thing.
>
> 3) Note that the test data contains both numeric and non-numeric columns. Also, the name "Alice" is duplicated in the test data, which is subtle, and the right thing to do.
>
>
> ------------------------------------------------------
>
> A similar experiment, run on the beta-site of OpenAI's Codex code-completion tool gives the following code (complete with the comments.):
>
> ----
> # Read in the data
> data <- read.table("mydata.tsv", sep = "\t", header = TRUE)
>
> # Remove all rows that have duplicates in the column "names"
> unique_names <- unique(data$names)
> data_unique <- data[data$names %in% unique_names,]
>
> # Calculate medians
> Medians <- sapply(data_unique[, sapply(data_unique, is.numeric)], median, na.rm = TRUE)
>
> # Print last variable in order form largest to smallest
> rev(sort(Medians[length(Medians)]))
> ----
>
> Note that the strategy is quite different (e.g using %in%, not duplicated() ), the interpretation of "last variable" is technically correct but not what I had in mind (ChatGPT got that right though).
>
>
> Changing my prompts slightly resulted it going for a dplyr solution instead, complete with %>% idioms etc ... again, syntactically correct but not giving me the fully correct results.
>
> ------------------------------------------------------
>
> Bottom line: The AI's ability to translate natural language instructions into code is astounding. Errors the AI makes are subtle and probably not easy to fix if you don't already know what you are doing. But the way that this can be "confidently incorrect" and plausible makes it nearly impossible to detect unless you actually run the code (you may have noticed that when you read the code).
>
> Will our students use it? Absolutely.
>
> Will they successfully cheat with it? That depends on the assignment. We probably need to _encourage_ them to use it rather than sanction - but require them to attribute the AI, document prompts, and identify their own, additional contributions.
>
> Will it help them learn? When you are aware of the issues, it may be quite useful. It may be especially useful to teach them to specify their code carefully and completely, and to ask questions in the right way. Test cases are crucial.
>
> How will it affect what we do as instructors? I don't know. Really.
>
> And the future? I am not pleased to extrapolate to a job market in which they compete with knowledge workers who work 24/7 without benefits, vacation pay, or even a salary. They'll need to rethink the value of their investment in an academic education. We'll need to rethink what we do to provide value above and beyond what AI's can do. (Nb. all of the arguments I hear about why humans will always be better etc. are easily debunked, but that's even more OT :-)
>
> --------------------------------------------------------
>
> If you have thoughts to share how your institution is thinking about academic integrity in this situation, or creative ideas how to integrate this into teaching, I'd love to hear from you.
>
>
> All the best!
> Boris
>
>
> --
> Boris Steipe MD, PhD
> University of Toronto
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Wed Dec 21 15:20:44 2022
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Wed, 21 Dec 2022 08:20:44 -0600
Subject: [R] [External] Amazing AI
In-Reply-To: <CANVKczMVS3Cbyi_XT5kfBzk4XBaZEMr3hH2ZgpX_r1iU5KWJfA@mail.gmail.com>
References: <693f9741fc304769b4b419a6aca29bdb@LO2P265MB3344.GBRP265.PROD.OUTLOOK.COM>
 <CANVKczMVS3Cbyi_XT5kfBzk4XBaZEMr3hH2ZgpX_r1iU5KWJfA@mail.gmail.com>
Message-ID: <9974992d-ba12-6ae8-03c5-378064a82210@effectivedefense.org>



On 12/21/22 7:50 AM, Barry Rowlingson wrote:
> Next year one of my R programming assigments will read like this:
> 
> "Here is some R code written by a multi-million dollar AI system to
> compute [something]. It doesn't work. Fix the bugs, then ask the AI to
> write a letter to its creators apologising for how rubbish it is at
> coding. Collect one million dollars."


You might want to be careful about such a promise.  Kahneman, Sibony, 
and Sunstein (2021) Noise:  A flaw in human judgment (Little, Brown and 
Company) claim that genuine expertise is acquired by learning from 
frequent, rapid, high-quality feedback on the quality of their 
decisions.  Few people have access to such feedback.  They call leaders 
in fields without such feedback "respect-experts", and note that 
respect-experts have only the illusion of competence.


	  1.  They further say that most respect-experts can be beaten by 
simple heuristics developed by intelligent lay people.


	  2.  Moreover, with a modest amount of data, ordinary least squares 
can beat most such heuristics.


	  3.  And if lots of data are available, AI can beat the simple 
heuristics.


	  They provide substantial quantities of research to support those 
claims.


	  Regarding your million dollars, it should not be hard to write an R 
interface to existing AI code cited by Kahneman et al.


	  Do you really want one of your students initiating a legal procedure 
to try to collect your million dollars?


	  A quarter century ago, my friend Soren Bisgaard told me about a 
colleague who had raved about AI.  Soren thought, "You prefer artificial 
intelligence to real intelligence?"


	  I perceive a role for AI in identifying subtle phenomena missed by 
more understandable modeling techniques.  Let's use the best 
understandable model, and apply AI to the residuals from that.  Then 
identify the variables that make the largest contributions to a useful 
AI model, and see if they can be added to the other model.


	  Spencer Graves
> 
> 
> On Sun, Dec 18, 2022 at 7:01 PM Boris Steipe <boris.steipe at utoronto.ca> wrote:
>>
>> This email originated outside the University. Check before clicking links or attachments.
>>
>> Technically not a help question. But crucial to be aware of, especially for those of us in academia, or otherwise teaching R. I am not aware of a suitable alternate forum. If this does not interest you, please simply ignore - I already know that this may be somewhat OT.
>>
>> Thanks.
>> ------------------------------------------------------
>>
>> You very likely have heard of ChatGPT, the conversation interface on top of the GPT-3 large language model and that it can generate code. I thought it doesn't do R - I was wrong. Here is a little experiment:
>>
>> MY PROMPT:
>> ==========
>> Please write me some R code that will read a tsv file, remove all rows that have duplicates in the column "names", and store the median values of the remaining rows in a variable called "Medians". Of course, that calculation should only be done with columns that are numeric. Print the last variable in order from largest to smallest.
>>
>>
>> AI RESPONSE:
>> ============
>>
>> Here is some R code that should accomplish what you've described:
>>
>> (Note: the code is formatted in a little terminal window, complete with a button to "copy code" at the top.)
>>
>> ----
>> # Read the tsv file
>> data <- read.table("file.tsv", header = TRUE, sep = "\t")
>>
>> # Remove rows with duplicates in the "names" column
>> data <- data[!duplicated(data$names), ]
>>
>> # Select only the numeric columns
>> num_columns <- sapply(data, is.numeric)
>> numeric_data <- data[, num_columns]
>>
>> # Calculate the medians for each column
>> Medians <- apply(numeric_data, 1, median)
>>
>> # Sort Medians in descending order
>> Medians <- sort(Medians, decreasing = TRUE)
>>
>> # Print Medians
>> print(Medians)
>> ----
>>
>> This code assumes that the tsv file is called "file.tsv" and is stored in the current working directory. It also assumes that the first row of the file contains the column names.
>>
>>
>>
>> MY PROMPT:
>> ==========
>> Can you provide me with a bit of sample data that I can use to test this code?
>>
>> AI RESPONSE:
>> ============
>> Certainly! Here is some sample data that you can use to test the code I provided:
>>
>> ----
>> name    age     height  weight
>> Alice   23      5.6     120
>> Bob     32      6.2     180
>> Charlie 29      5.9     160
>> Alice   23      5.6     120
>> David   25      5.8     140
>> Eve     27      5.5     110
>> ----
>>
>> You can save this data as a tsv file and use it to test the code.
>>
>>
>> ------------------------------------------------------
>>
>> Notes:
>> 1) The code, as written does not work with the test data. The reason is that the test data specifies a column "name", but the code assumes "names" (which I specified in the instructions). Once this is fixed in the test data, the code executes.
>>
>> 2) The instructions are not accurately translated: I had asked for row means. But changing the margin in the apply() statement from 2 to 1 does the correct thing.
>>
>> 3) Note that the test data contains both numeric and non-numeric columns. Also, the name "Alice" is duplicated in the test data, which is subtle, and the right thing to do.
>>
>>
>> ------------------------------------------------------
>>
>> A similar experiment, run on the beta-site of OpenAI's Codex code-completion tool gives the following code (complete with the comments.):
>>
>> ----
>> # Read in the data
>> data <- read.table("mydata.tsv", sep = "\t", header = TRUE)
>>
>> # Remove all rows that have duplicates in the column "names"
>> unique_names <- unique(data$names)
>> data_unique <- data[data$names %in% unique_names,]
>>
>> # Calculate medians
>> Medians <- sapply(data_unique[, sapply(data_unique, is.numeric)], median, na.rm = TRUE)
>>
>> # Print last variable in order form largest to smallest
>> rev(sort(Medians[length(Medians)]))
>> ----
>>
>> Note that the strategy is quite different (e.g using %in%, not duplicated() ), the interpretation of "last variable" is technically correct but not what I had in mind (ChatGPT got that right though).
>>
>>
>> Changing my prompts slightly resulted it going for a dplyr solution instead, complete with %>% idioms etc ... again, syntactically correct but not giving me the fully correct results.
>>
>> ------------------------------------------------------
>>
>> Bottom line: The AI's ability to translate natural language instructions into code is astounding. Errors the AI makes are subtle and probably not easy to fix if you don't already know what you are doing. But the way that this can be "confidently incorrect" and plausible makes it nearly impossible to detect unless you actually run the code (you may have noticed that when you read the code).
>>
>> Will our students use it? Absolutely.
>>
>> Will they successfully cheat with it? That depends on the assignment. We probably need to _encourage_ them to use it rather than sanction - but require them to attribute the AI, document prompts, and identify their own, additional contributions.
>>
>> Will it help them learn? When you are aware of the issues, it may be quite useful. It may be especially useful to teach them to specify their code carefully and completely, and to ask questions in the right way. Test cases are crucial.
>>
>> How will it affect what we do as instructors? I don't know. Really.
>>
>> And the future? I am not pleased to extrapolate to a job market in which they compete with knowledge workers who work 24/7 without benefits, vacation pay, or even a salary. They'll need to rethink the value of their investment in an academic education. We'll need to rethink what we do to provide value above and beyond what AI's can do. (Nb. all of the arguments I hear about why humans will always be better etc. are easily debunked, but that's even more OT :-)
>>
>> --------------------------------------------------------
>>
>> If you have thoughts to share how your institution is thinking about academic integrity in this situation, or creative ideas how to integrate this into teaching, I'd love to hear from you.
>>
>>
>> All the best!
>> Boris
>>
>>
>> --
>> Boris Steipe MD, PhD
>> University of Toronto
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From x|e @end|ng |rom y|hu|@n@me  Wed Dec 21 20:17:27 2022
From: x|e @end|ng |rom y|hu|@n@me (Yihui Xie)
Date: Wed, 21 Dec 2022 13:17:27 -0600
Subject: [R] 
 traceback performs differently in "interactive-mode" then in
 "script-mode"
In-Reply-To: <PAXPR08MB71553AFAFDFB00015C2B77B386EB9@PAXPR08MB7155.eurprd08.prod.outlook.com>
References: <PAXPR08MB71553AFAFDFB00015C2B77B386EB9@PAXPR08MB7155.eurprd08.prod.outlook.com>
Message-ID: <CANROs4fFJK1VZ3-PH9s54JYFbsstRsycyJipENPppBtRLB2frg@mail.gmail.com>

Hi Malte,

I think I asked the same question on Stack Overflow ten years ago:
https://stackoverflow.com/q/13116099/559676 I hope you'll find the answer
helpful there.

Regards,
Yihui
--
https://yihui.org


On Wed, Dec 21, 2022 at 6:19 AM Flender, Malte <Malte.Flender at wago.com>
wrote:

> Hello,
>
> a few days ago I encountered a strange behavior of base R.
> I'm not really sure if it is a bug or not.
> Thus I am somewhat hesitant to write a bug report.
> Instead I write to R-Help to ask you if this behavior can be considered a
> bug or not.
> I started with a question at stackoverflow (
> https://stackoverflow.com/questions/74796994/r-traceback-performs-differently-in-interactive-mode-then-in-script-mode),
> but got no response there.
>
> The strange behavior of base R lies in how it acts differently in an
> interactive R-Session then the execution of an R-Script.
> As you see in the MWE below the traceback()-function returns NULL in
> script mode (first call) and an actual traceback in interactive mode
> (second call).
>
> Can you reproduce this behavior?
>
> Here is MWE, which contains a small test-script and the calls to it in an
> interactive and script mode:
>
> user at server:~/folder> cat test.r
>
> options(error = NULL)
>
> onexit <- function() {
>     error.msg <- geterrmessage()
>     traceback <- traceback()
>
>     print(paste("error.msg: ", nchar(error.msg), sep = ""))
>     print(paste("traceback: ", is.null(traceback), " : ", traceback, sep =
> ""))
>
>     if (nchar(error.msg) != 0 && !is.null(traceback)) {
>           print("Uncaught Error")
>     } else if (nchar(error.msg) != 0 && is.null(traceback)) {
>          print("Caught Error")
>     } else if (nchar(error.msg) == 0 && is.null(traceback)) {
>          print("No Error")
>     } else {
>         stop("ERROR in on.exit: bad traceback error.msg combination")
>     }
> }
>
> fail <- function() {
>           on.exit(
>               onexit(),
>               add = TRUE,
>               after = TRUE)
>
>   print("SOMETHING")
>   stop("BAD")
> }
>
> fail()
>
> user at server:~/folder> docker run -it --rm -v /home/user/folder/:/data/R/
> r-base:4.2.2 R -e 'source("/data/R/test.r")'
>
> R version 4.2.2 (2022-10-31) -- "Innocent and Trusting"
> Copyright (C) 2022 The R Foundation for Statistical Computing
> Platform: x86_64-pc-linux-gnu (64-bit)
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type 'license()' or 'licence()' for distribution details.
>
>   Natural language support but running in an English locale
>
> R is a collaborative project with many contributors.
> Type 'contributors()' for more information and
> 'citation()' on how to cite R or R packages in publications.
>
> Type 'demo()' for some demos, 'help()' for on-line help, or
> 'help.start()' for an HTML browser interface to help.
> Type 'q()' to quit R.
>
> > source("/data/R/test.r")
> [1] "SOMETHING"
> Error in fail() : BAD
> Calls: source -> withVisible -> eval -> eval -> fail
> No traceback available
> [1] "error.msg: 75"
> [1] "traceback: TRUE : "
> [1] "Caught Error"
> Execution halted
> user at server:~/folder> docker run -it --rm -v /home/user/folder/:/data/R/
> r-base:4.2.2 R
>
> R version 4.2.2 (2022-10-31) -- "Innocent and Trusting"
> Copyright (C) 2022 The R Foundation for Statistical Computing
> Platform: x86_64-pc-linux-gnu (64-bit)
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type 'license()' or 'licence()' for distribution details.
>
>   Natural language support but running in an English locale
>
> R is a collaborative project with many contributors.
> Type 'contributors()' for more information and
> 'citation()' on how to cite R or R packages in publications.
>
> Type 'demo()' for some demos, 'help()' for on-line help, or
> 'help.start()' for an HTML browser interface to help.
> Type 'q()' to quit R.
>
> > source("/data/R/test.r")
> [1] "SOMETHING"
> Error in fail() : BAD
> 6: stop("BAD") at test.r#30
> 5: fail() at test.r#33
> 4: eval(ei, envir)
> 3: eval(ei, envir)
> 2: withVisible(eval(ei, envir))
> 1: source("/data/R/test.r")
> [1] "error.msg: 22"
> [1] "traceback: FALSE : stop(\"BAD\")"
> [2] "traceback: FALSE : fail()"
> [3] "traceback: FALSE : eval(ei, envir)"
> [4] "traceback: FALSE : eval(ei, envir)"
> [5] "traceback: FALSE : withVisible(eval(ei, envir))"
> [6] "traceback: FALSE : source(\"/data/R/test.r\")"
> [1] "Uncaught Error"
> >
>
>
> Mit freundlichem Gru? / Best regards
> WAGO GmbH & Co. KG
>
> Malte Flender
> Komplexit?tsmanagement / Data Science
> phone: +49 571 887-49779
> fax: +49 571 887-849779
> mailto: Malte.Flender at wago.com
>
> WAGO GmbH & Co.KG
> Hansastra?e 27
> 32423 Minden
> Deutschland
> http://www.wago.com<http://www.wago.com/>
>
>
>
> Internal
>
>
>
>
>
>  Diese E-Mail einschlie?lich ihrer Anh?nge ist vertraulich und daher
> allein f?r den Gebrauch durch den vorgesehenen Empf?nger bestimmt. Dritten
> ist das Lesen, Verteilen oder Weiterleiten dieser E-Mail sowie jedwedes
> Vertrauen auf deren Inhalt untersagt. Wir bitten, eine fehlgeleitete E-Mail
> unverz?glich vollst?ndig zu l?schen und uns eine Nachricht zukommen zu
> lassen.
> This email may contain material that is confidential and/or privileged for
> the sole use of the intended recipient. Any review, reliance or
> distribution by others or forwarding without express permission is strictly
> prohibited. If you are not the intended recipient, please contact the
> sender and delete all copies.
>  WAGO GmbH & Co. KG - Sitz: Minden - Amtsgericht Bad Oeynhausen HRA 6218
> Komplement?rin: WAGO Beteiligungs GmbH ? Sitz: Brunn am Gebirge
> (?sterreich) - Landesgericht Wiener Neustadt, FN 553907w - Niederlassung
> Minden - Amtsgericht Bad Oeynhausen, HRB 17863
> Gesch?ftsf?hrung: Axel B?rner, Kathrin Fricke, Dr. Heiner Lang, Christian
> Sallach, J?rgen Sch?fer, Dr. Karsten Stoll, Yannick Weber
> WAGO ist eine eingetragene Marke der WAGO Verwaltungsgesellschaft mbH
>
>

	[[alternative HTML version deleted]]


From @te|@no@@o||@ @end|ng |rom reg|one@m@rche@|t  Thu Dec 22 16:29:17 2022
From: @te|@no@@o||@ @end|ng |rom reg|one@m@rche@|t (Stefano Sofia)
Date: Thu, 22 Dec 2022 15:29:17 +0000
Subject: [R] Get data from a list of data frames
In-Reply-To: <CAGxFJbTgwQ2Nop0bjCzcT7Ri6FhDmOrXiXv+o2-2m_-sqZ6H_w@mail.gmail.com>
References: <fe9017cbd4ba49328e150061032068a7@regione.marche.it>
 <8715921b-7d33-aad0-2b05-91a0fd1c32d8@math.uni-giessen.de>,
 <CAGxFJbTgwQ2Nop0bjCzcT7Ri6FhDmOrXiXv+o2-2m_-sqZ6H_w@mail.gmail.com>
Message-ID: <a2f9acdcc8ef436c86967caced265f41@regione.marche.it>

Sorry for the delay of my reply, I have been out of office for few days.

Thank you to all of you.

Both solutions work well; fortunately the structure of the data frames is identical, rbind works perfectly and this second solution is slightly easier to implement for me.


Thank you again for your help

Stefano


         (oo)
--oOO--( )--OOo--------------------------------------
Stefano Sofia PhD
Civil Protection - Marche Region - Italy
Meteo Section
Snow Section
Via del Colle Ameno 5
60126 Torrette di Ancona, Ancona (AN)
Uff: +39 071 806 7743
E-mail: stefano.sofia at regione.marche.it
---Oo---------oO----------------------------------------


________________________________
Da: Bert Gunter <bgunter.4567 at gmail.com>
Inviato: gioved? 15 dicembre 2022 18:31
A: Gerrit Eichner; Stefano Sofia
Cc: r-help at r-project.org
Oggetto: Re: [R] Get data from a list of data frames

Well, just for giggles, Gerrit's solution can be easily vectorized (i.e. no apply()-type stuff needed) IFF the structure of all the data frames are identical so that rbind() works:

d <-do.call('rbind',Total[select.stat]) ## one data frame to combine them all ;-)
d[d$sensor == 'thermometer','code']

Whether this is better, worse, or unneeded, I cannot say.

Cheers,
Bert


On Thu, Dec 15, 2022 at 6:11 AM Gerrit Eichner <gerrit.eichner at math.uni-giessen.de<mailto:gerrit.eichner at math.uni-giessen.de>> wrote:
Hello, Stefano,

maybe the following example contains what you want to achieve:

Station1 <- data.frame(sensor = c("thermometer", "raingauge",
"snowgauge", "anemometer"),
                        code = c(2583, 1478, 3178, NA))
Station2 <- data.frame(sensor = c("thermometer", "raingauge",
"snowgauge", "anemometer"),
                        code = c(2584, 1479, 3179, 4453))
Station3 <- data.frame(sensor = c("thermometer", "raingauge",
"snowgauge", "anemometer"),
                        code = c(2584, 1479, 3179, 4453))
Station4 <- data.frame(sensor = rev(c("thermometer", "raingauge",
"snowgauge", "anemometer")),
                        code = c(2584, 1479, 3179, 4453))
Station5 <- data.frame(sensor = c("raingauge", "snowgauge",
"thermometer", "anemometer"),
                        code = c(2584, 1479, 3179, 4453))

Total <- list("Station1"=Station1, "Station2"=Station2,
               Station3 = Station3, Station4 = Station4,
               Station5 = Station5)

select.stat <- paste0("Station", c(1, 4, 5))
select.sens <- "thermometer"

sapply(Total[select.stat], function(x, sens)
   x$code[x$sensor == sens], sens = select.sens)



  Hth --  Gerrit

---------------------------------------------------------------------
Dr. Gerrit Eichner                   Mathematical Institute, Room 212
gerrit.eichner at math.uni-giessen.de<mailto:gerrit.eichner at math.uni-giessen.de>   Justus-Liebig-University Giessen
Tel: +49-(0)641-99-32104          Arndtstr. 2, 35392 Giessen, Germany
http://www.uni-giessen.de/eichner<https://urlsand.esvalabs.com/?u=http%3A%2F%2Fwww.uni-giessen.de%2Feichner&e=5a635173&h=6288e95a&f=y&p=y>
---------------------------------------------------------------------

Am 15.12.2022 um 14:52 schrieb Stefano Sofia:
> Dear R-list users,
>
> I have a list of n data frames built as follows:
>
>
> Station1 <- data.frame(sensor = c("thermometer", "raingauge", "snowgauge", "anemometer"), code = c(2583, 1478, 3178, NA))
> Station2 <- data.frame(sensor = c("thermometer", "raingauge", "snowgauge", "anemometer"), code = c(2584, 1479, 3179, 4453))
> ....
>
> Total <- list("Station1"=Station1, "Station2"=Station2, ...)
>
> I would need to have a vector with the sensor codes of the thermometers of some stations, let's say of Station1, Station2 and Station5 (i.e. c(2583, 2584, 2587)).
> I tried with lapply, but I have not been able to get what I need.
> Could you please help me?
>
> Thank you
>
> Stefano
>
>
>
>           (oo)
> --oOO--( )--OOo--------------------------------------
> Stefano Sofia PhD
> Civil Protection - Marche Region - Italy
> Meteo Section
> Snow Section
> Via del Colle Ameno 5
> 60126 Torrette di Ancona, Ancona (AN)
> Uff: +39 071 806 7743
> E-mail: stefano.sofia at regione.marche.it<mailto:stefano.sofia at regione.marche.it>
> ---Oo---------oO----------------------------------------
>
> ________________________________
>
> AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell'art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
> IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.
>
> --
>
> Questo messaggio  stato analizzato da Libraesva ESG ed  risultato non infetto.
>
> This message was scanned by Libraesva ESG and is believed to be clean.
>
>
>       [[alternative HTML version deleted]]
>
>
> ______________________________________________
> R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help<https://urlsand.esvalabs.com/?u=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&e=5a635173&h=06ff70f3&f=y&p=y>
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html<https://urlsand.esvalabs.com/?u=http%3A%2F%2Fwww.R-project.org%2Fposting-guide.html&e=5a635173&h=e12f63e8&f=y&p=y>
> and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help<https://urlsand.esvalabs.com/?u=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&e=5a635173&h=06ff70f3&f=y&p=y>
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html<https://urlsand.esvalabs.com/?u=http%3A%2F%2Fwww.R-project.org%2Fposting-guide.html&e=5a635173&h=e12f63e8&f=y&p=y>
and provide commented, minimal, self-contained, reproducible code.

--
Questo messaggio ? stato analizzato con Libraesva ESG ed ? risultato non infetto

________________________________

AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.

--
Questo messaggio  stato analizzato da Libraesva ESG ed  risultato non infetto.
This message was scanned by Libraesva ESG and is believed to be clean.


	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Sat Dec 24 15:09:37 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sat, 24 Dec 2022 14:09:37 +0000
Subject: [R] difference between script and a function....
Message-ID: <SL2P216MB1561A16819561AA73702CDC2C8EE9@SL2P216MB1561.KORP216.PROD.OUTLOOK.COM>

Dear members,
                            I will be running scripts automatically in RHEL with crontab. I want to know the differences between running  a script and a function. in particular:


  1.  An execution environment will be created for the function. what about a script? Is the execution environment the global environment?
  2.  What happens if I use return() at the end of a script?
  3.  I came to know that when you use R CMD BATCH, a file will be created and the output will be saved to the file. How do I output what I want to output in a script? Should I use return()? Will ALL the intermediate objects be stored ?
  4.  When I run a script, it will have access to the objects in the global environment right? i.e I can use all the functions in the global environment, right?
  5.  Any links to resources for further information? How do i access the relevant documentation?

ANy help will be greatly appreciated...

thanking you,
yours sincerely,
AKSHAY M KULKARNI

	[[alternative HTML version deleted]]


From @kw@|mmo @end|ng |rom gm@||@com  Sat Dec 24 15:48:12 2022
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Sat, 24 Dec 2022 09:48:12 -0500
Subject: [R] difference between script and a function....
In-Reply-To: <SL2P216MB1561A16819561AA73702CDC2C8EE9@SL2P216MB1561.KORP216.PROD.OUTLOOK.COM>
References: <SL2P216MB1561A16819561AA73702CDC2C8EE9@SL2P216MB1561.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAPcHnpQuwm5G_T4pEd1PfOa4hM+0ZoePd3viZj-RScT-4uN9Ew@mail.gmail.com>

1. The execution environment for a script is the global environment. Each R
script run from a shell will be given its own global environment. Each R
session has exactly one global environment, but you can have several active
R sessions.

2. Using return in a script instead of a function will throw an error

Error: no function to return from, jumping to top level

3. You can use print(), cat(), and writeLines() to write to the output. It
does not save your R objects before it exits the script. You could use
save() or save.image() to save your objects, or possibly saveRDS() if you
are only looking to save one object. You could also use source() if you
just want the objects from another script.

4. Will you have shared access to the objects in another R session? No,
objects are not shared, unless you've got something weird setup with
external pointers. Each session has it owns global environment.

5. Any of the doc pages for the functions I listed above would help, you
can also do

?utils::Rscript

	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Sat Dec 24 15:54:52 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sat, 24 Dec 2022 14:54:52 +0000
Subject: [R] difference between script and a function....
In-Reply-To: <CAPcHnpQuwm5G_T4pEd1PfOa4hM+0ZoePd3viZj-RScT-4uN9Ew@mail.gmail.com>
References: <SL2P216MB1561A16819561AA73702CDC2C8EE9@SL2P216MB1561.KORP216.PROD.OUTLOOK.COM>
 <CAPcHnpQuwm5G_T4pEd1PfOa4hM+0ZoePd3viZj-RScT-4uN9Ew@mail.gmail.com>
Message-ID: <SL2P216MB15610FD0452195513CB4C051C8EE9@SL2P216MB1561.KORP216.PROD.OUTLOOK.COM>

Dear Simmons,
                            Thanks a lot. One more question:


  1.  If there is  some error in the script, the error will be output to the stdout? Or to the file that it creates for saving the output of the script?

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Andrew Simmons <akwsimmo at gmail.com>
Sent: Saturday, December 24, 2022 8:18 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] difference between script and a function....

1. The execution environment for a script is the global environment. Each R script run from a shell will be given its own global environment. Each R session has exactly one global environment, but you can have several active R sessions.

2. Using return in a script instead of a function will throw an error

Error: no function to return from, jumping to top level

3. You can use print(), cat(), and writeLines() to write to the output. It does not save your R objects before it exits the script. You could use save() or save.image() to save your objects, or possibly saveRDS() if you are only looking to save one object. You could also use source() if you just want the objects from another script.

4. Will you have shared access to the objects in another R session? No, objects are not shared, unless you've got something weird setup with external pointers. Each session has it owns global environment.

5. Any of the doc pages for the functions I listed above would help, you can also do

?utils::Rscript

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Sat Dec 24 16:22:44 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Sat, 24 Dec 2022 18:22:44 +0300
Subject: [R] difference between script and a function....
In-Reply-To: <SL2P216MB15610FD0452195513CB4C051C8EE9@SL2P216MB1561.KORP216.PROD.OUTLOOK.COM>
References: <SL2P216MB1561A16819561AA73702CDC2C8EE9@SL2P216MB1561.KORP216.PROD.OUTLOOK.COM>
 <CAPcHnpQuwm5G_T4pEd1PfOa4hM+0ZoePd3viZj-RScT-4uN9Ew@mail.gmail.com>
 <SL2P216MB15610FD0452195513CB4C051C8EE9@SL2P216MB1561.KORP216.PROD.OUTLOOK.COM>
Message-ID: <20221224182245.5355d547@Tarkus>

On Sat, 24 Dec 2022 14:54:52 +0000
akshay kulkarni <akshay_e4 at hotmail.com> wrote:

> If there is  some error in the script, the error will be output to
> the stdout? Or to the file that it creates for saving the output of
> the script?

When using Rscript: to stderr, to be precise.

When using R CMD BATCH: to the Rout file.

> Will ALL the intermediate objects be stored ?

May I shamelessly plug my own package, depcache? Using its cache()
function, you can save intermediate objects into *.rds files in a
relatively transparent manner. By default, they are stored in a
subdirectory of the working directory. A downside is that I haven't
come up with a useful cache expiration strategy yet.

A more involved approach that will also let you access your
intermediates is provided by the "targets" package, not only on CRAN
but also peer-reviewed by rOpenSci.

-- 
Best regards,
Ivan


From @k@h@y_e4 @end|ng |rom hotm@||@com  Sat Dec 24 16:47:14 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sat, 24 Dec 2022 15:47:14 +0000
Subject: [R] difference between script and a function....
In-Reply-To: <20221224182245.5355d547@Tarkus>
References: <SL2P216MB1561A16819561AA73702CDC2C8EE9@SL2P216MB1561.KORP216.PROD.OUTLOOK.COM>
 <CAPcHnpQuwm5G_T4pEd1PfOa4hM+0ZoePd3viZj-RScT-4uN9Ew@mail.gmail.com>
 <SL2P216MB15610FD0452195513CB4C051C8EE9@SL2P216MB1561.KORP216.PROD.OUTLOOK.COM>
 <20221224182245.5355d547@Tarkus>
Message-ID: <SL2P216MB156163E9ACB232DEFA3A871AC8EE9@SL2P216MB1561.KORP216.PROD.OUTLOOK.COM>

dear Ivan,
                  Thanks for the reply. One last question:


  1.  How do you debug if there is an error, particularly if I run the script from the BASH prompt? The closest I have come to debugging a script is when I source the script in Rstudio. There everything is intiutive...but from the Linux prompt?

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Ivan Krylov <krylov.r00t at gmail.com>
Sent: Saturday, December 24, 2022 8:52 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] difference between script and a function....

On Sat, 24 Dec 2022 14:54:52 +0000
akshay kulkarni <akshay_e4 at hotmail.com> wrote:

> If there is  some error in the script, the error will be output to
> the stdout? Or to the file that it creates for saving the output of
> the script?

When using Rscript: to stderr, to be precise.

When using R CMD BATCH: to the Rout file.

> Will ALL the intermediate objects be stored ?

May I shamelessly plug my own package, depcache? Using its cache()
function, you can save intermediate objects into *.rds files in a
relatively transparent manner. By default, they are stored in a
subdirectory of the working directory. A downside is that I haven't
come up with a useful cache expiration strategy yet.

A more involved approach that will also let you access your
intermediates is provided by the "targets" package, not only on CRAN
but also peer-reviewed by rOpenSci.

--
Best regards,
Ivan

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Sat Dec 24 16:57:45 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Sat, 24 Dec 2022 18:57:45 +0300
Subject: [R] difference between script and a function....
In-Reply-To: <SL2P216MB156163E9ACB232DEFA3A871AC8EE9@SL2P216MB1561.KORP216.PROD.OUTLOOK.COM>
References: <SL2P216MB1561A16819561AA73702CDC2C8EE9@SL2P216MB1561.KORP216.PROD.OUTLOOK.COM>
 <CAPcHnpQuwm5G_T4pEd1PfOa4hM+0ZoePd3viZj-RScT-4uN9Ew@mail.gmail.com>
 <SL2P216MB15610FD0452195513CB4C051C8EE9@SL2P216MB1561.KORP216.PROD.OUTLOOK.COM>
 <20221224182245.5355d547@Tarkus>
 <SL2P216MB156163E9ACB232DEFA3A871AC8EE9@SL2P216MB1561.KORP216.PROD.OUTLOOK.COM>
Message-ID: <20221224185745.6579285d@Tarkus>

On Sat, 24 Dec 2022 15:47:14 +0000
akshay kulkarni <akshay_e4 at hotmail.com> wrote:

> How do you debug if there is an error, particularly if I run the
> script from the BASH prompt? 

Post-mortem debugging for non-interactive R scripts can be enabled by
setting options(error = quote(dump.frames("A_SUITABLE_FILE_NAME",
to.file = TRUE))) in your script. See ?dump.frames for more information.

When you're running command-line R interactively, the main tools at
your disposal are traceback() and browser() (see their respective help
pages). There are two main ways to use the browser: (1) by setting the
debugging flag on a function via debug(function) or debugonce(function)
-- you will land in the browser when the function is called -- and (2)
by setting options(error = recover), which will launch the browser at
the time of the crash, letting you walk the stack and inspect the
values of various variables.

For more information on pure-R debugging, see The R Inferno book:
<https://www.burns-stat.com/documents/books/the-r-inferno/>

-- 
Best regards,
Ivan


From @k@h@y_e4 @end|ng |rom hotm@||@com  Sat Dec 24 17:20:16 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sat, 24 Dec 2022 16:20:16 +0000
Subject: [R] difference between script and a function....
In-Reply-To: <20221224185745.6579285d@Tarkus>
References: <SL2P216MB1561A16819561AA73702CDC2C8EE9@SL2P216MB1561.KORP216.PROD.OUTLOOK.COM>
 <CAPcHnpQuwm5G_T4pEd1PfOa4hM+0ZoePd3viZj-RScT-4uN9Ew@mail.gmail.com>
 <SL2P216MB15610FD0452195513CB4C051C8EE9@SL2P216MB1561.KORP216.PROD.OUTLOOK.COM>
 <20221224182245.5355d547@Tarkus>
 <SL2P216MB156163E9ACB232DEFA3A871AC8EE9@SL2P216MB1561.KORP216.PROD.OUTLOOK.COM>
 <20221224185745.6579285d@Tarkus>
Message-ID: <SL2P216MB1561DE91F80902E46963D3B2C8EE9@SL2P216MB1561.KORP216.PROD.OUTLOOK.COM>

Dear Ivan,
                   Thanks a lot.....!

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Ivan Krylov <krylov.r00t at gmail.com>
Sent: Saturday, December 24, 2022 9:27 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] difference between script and a function....

On Sat, 24 Dec 2022 15:47:14 +0000
akshay kulkarni <akshay_e4 at hotmail.com> wrote:

> How do you debug if there is an error, particularly if I run the
> script from the BASH prompt?

Post-mortem debugging for non-interactive R scripts can be enabled by
setting options(error = quote(dump.frames("A_SUITABLE_FILE_NAME",
to.file = TRUE))) in your script. See ?dump.frames for more information.

When you're running command-line R interactively, the main tools at
your disposal are traceback() and browser() (see their respective help
pages). There are two main ways to use the browser: (1) by setting the
debugging flag on a function via debug(function) or debugonce(function)
-- you will land in the browser when the function is called -- and (2)
by setting options(error = recover), which will launch the browser at
the time of the crash, letting you walk the stack and inspect the
values of various variables.

For more information on pure-R debugging, see The R Inferno book:
<https://www.burns-stat.com/documents/books/the-r-inferno/>

--
Best regards,
Ivan

	[[alternative HTML version deleted]]


From up@n@nd@@p@n| @end|ng |rom gm@||@com  Sat Dec 24 19:58:23 2022
From: up@n@nd@@p@n| @end|ng |rom gm@||@com (Upananda Pani)
Date: Sun, 25 Dec 2022 00:28:23 +0530
Subject: [R] Reg: To change the x axis label in ts.plot function
Message-ID: <CAEezrQQB+F6mPYgp1cuQMmQw8u_e6HBSZntiYejw5sK05gzSBA@mail.gmail.com>

  Dear All,
 I have the data set with daily dates (5-days trading in a week) and price
data. I want to change the x axis labels to the plot. I am using ts.plot
function to plot my data. My data spans from 2020-01-27 to 2021-07-30. I
want to change it to D-M-Y first. Then I want to show all the dates with a
one week gap in my x-axis label.

 The following code I am using:
 pricet <- ts(price, start = c(2020, 27), frequency = 260)
plot.ts(pricet)

Please advise me how to achieve the desired result. I have attached my data
and the plot which I am currently getting with ts.plot.

With sincere regards,
Upananda Pani

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Rplot.png
Type: image/png
Size: 4159 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20221225/cdc56f11/attachment.png>

From po|c1410 @end|ng |rom gm@||@com  Sat Dec 24 22:42:29 2022
From: po|c1410 @end|ng |rom gm@||@com (CALUM POLWART)
Date: Sat, 24 Dec 2022 21:42:29 +0000
Subject: [R] Reg: To change the x axis label in ts.plot function
In-Reply-To: <CAEezrQQB+F6mPYgp1cuQMmQw8u_e6HBSZntiYejw5sK05gzSBA@mail.gmail.com>
References: <CAEezrQQB+F6mPYgp1cuQMmQw8u_e6HBSZntiYejw5sK05gzSBA@mail.gmail.com>
Message-ID: <CA+etgP=jgzUk2XZB241-jmh5zQgzwzxT8tkgYqrDOok325nhtw@mail.gmail.com>

https://stackoverflow.com/questions/49679699/time-series-plot-change-x-axis-format-in-r

Is as good a solution as possible using ts I think.

On Sat, 24 Dec 2022, 18:58 Upananda Pani, <upananda.pani at gmail.com> wrote:

>   Dear All,
>  I have the data set with daily dates (5-days trading in a week) and price
> data. I want to change the x axis labels to the plot. I am using ts.plot
> function to plot my data. My data spans from 2020-01-27 to 2021-07-30. I
> want to change it to D-M-Y first. Then I want to show all the dates with a
> one week gap in my x-axis label.
>
>  The following code I am using:
>  pricet <- ts(price, start = c(2020, 27), frequency = 260)
> plot.ts(pricet)
>
> Please advise me how to achieve the desired result. I have attached my data
> and the plot which I am currently getting with ts.plot.
>
> With sincere regards,
> Upananda Pani
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Sat Dec 24 23:18:34 2022
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Sun, 25 Dec 2022 09:18:34 +1100
Subject: [R] Reg: To change the x axis label in ts.plot function
In-Reply-To: <CAEezrQQB+F6mPYgp1cuQMmQw8u_e6HBSZntiYejw5sK05gzSBA@mail.gmail.com>
References: <CAEezrQQB+F6mPYgp1cuQMmQw8u_e6HBSZntiYejw5sK05gzSBA@mail.gmail.com>
Message-ID: <CA+8X3fV=gSfK5wkfPHLqrZiKtM1TOeW+YUDharUiU0jTQJ2aoQ@mail.gmail.com>

Hi Upananda,
First, the date sequence you are using doesn't match the dates you
specify in your post. The code below may give you what you want:

# make up some prices
price<-c(seq(60,25,length.out=25),seq(25,70,length.out=54))+rnorm(79)
pricet <- ts(price, start = as.Date("2020-01-27"),end=as.Date("2021-07-26"),
frequency=1/7)
plot(pricet,xaxt="n")
axis_dates<-as.Date(c("2020-06-30","2021-01-01","2021-06-30"))
axis(1,at=axis_dates,labels=format(axis_dates,"%d/%m/%Y"))

Jim

On Sun, Dec 25, 2022 at 5:58 AM Upananda Pani <upananda.pani at gmail.com> wrote:
>
>   Dear All,
>  I have the data set with daily dates (5-days trading in a week) and price
> data. I want to change the x axis labels to the plot. I am using ts.plot
> function to plot my data. My data spans from 2020-01-27 to 2021-07-30. I
> want to change it to D-M-Y first. Then I want to show all the dates with a
> one week gap in my x-axis label.
>
>  The following code I am using:
>  pricet <- ts(price, start = c(2020, 27), frequency = 260)
> plot.ts(pricet)
>
> Please advise me how to achieve the desired result. I have attached my data
> and the plot which I am currently getting with ts.plot.
>
> With sincere regards,
> Upananda Pani
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From up@n@nd@@p@n| @end|ng |rom gm@||@com  Sun Dec 25 15:17:38 2022
From: up@n@nd@@p@n| @end|ng |rom gm@||@com (Upananda Pani)
Date: Sun, 25 Dec 2022 19:47:38 +0530
Subject: [R] Reg: To change the x axis label in ts.plot function
In-Reply-To: <CA+8X3fV=gSfK5wkfPHLqrZiKtM1TOeW+YUDharUiU0jTQJ2aoQ@mail.gmail.com>
References: <CAEezrQQB+F6mPYgp1cuQMmQw8u_e6HBSZntiYejw5sK05gzSBA@mail.gmail.com>
 <CA+8X3fV=gSfK5wkfPHLqrZiKtM1TOeW+YUDharUiU0jTQJ2aoQ@mail.gmail.com>
Message-ID: <CAEezrQRSHf_gx1CYEv3qeKoxTahCMxJQWcAeu402TLAHgo+A4A@mail.gmail.com>

Hi Jim,

Thank you so much. It worked. I got the exact solution which i was looking
for.

I am grateful to you for your help

With sincere regards,
Upananda

On Sun, Dec 25, 2022 at 3:48 AM Jim Lemon <drjimlemon at gmail.com> wrote:

> Hi Upananda,
> First, the date sequence you are using doesn't match the dates you
> specify in your post. The code below may give you what you want:
>
> # make up some prices
> price<-c(seq(60,25,length.out=25),seq(25,70,length.out=54))+rnorm(79)
> pricet <- ts(price, start =
> as.Date("2020-01-27"),end=as.Date("2021-07-26"),
> frequency=1/7)
> plot(pricet,xaxt="n")
> axis_dates<-as.Date(c("2020-06-30","2021-01-01","2021-06-30"))
> axis(1,at=axis_dates,labels=format(axis_dates,"%d/%m/%Y"))
>
> Jim
>
> On Sun, Dec 25, 2022 at 5:58 AM Upananda Pani <upananda.pani at gmail.com>
> wrote:
> >
> >   Dear All,
> >  I have the data set with daily dates (5-days trading in a week) and
> price
> > data. I want to change the x axis labels to the plot. I am using ts.plot
> > function to plot my data. My data spans from 2020-01-27 to 2021-07-30. I
> > want to change it to D-M-Y first. Then I want to show all the dates with
> a
> > one week gap in my x-axis label.
> >
> >  The following code I am using:
> >  pricet <- ts(price, start = c(2020, 27), frequency = 260)
> > plot.ts(pricet)
> >
> > Please advise me how to achieve the desired result. I have attached my
> data
> > and the plot which I am currently getting with ts.plot.
> >
> > With sincere regards,
> > Upananda Pani
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From up@n@nd@@p@n| @end|ng |rom gm@||@com  Mon Dec 26 15:06:07 2022
From: up@n@nd@@p@n| @end|ng |rom gm@||@com (Upananda Pani)
Date: Mon, 26 Dec 2022 19:36:07 +0530
Subject: [R] Reg: Help in assigning colors to factor variable in ggplot2
Message-ID: <CAEezrQT3++eFf7HBUryERtToLEiKBXaPgyYomUorV7n5-tLvjg@mail.gmail.com>

Dear All,

I am trying to plot a scatter plot between  temperature and heart rate and
additionally marking the outcome of the patients by colors. I am using the
standard package Use the standard function plot as well as the functions of
package "ggplot2" (Wickham (2009)). Save the plots in pdf files.

I am geeting an error to plot when assigning colsOutcome to the
scatterplot. I am doing it wrongly. Please advise me.
```{r}
library(ggplot2)
library(RColorBrewer)
library(ggsci)
ICUData <- read.csv(file = "ICUData.csv")
```
```{r}
## Generate empty vector
colsOutcome <- character(nrow(ICUData))
## Fill with colors
colsOutcome[ICUData$outcome == "died"] <- "#E41A1C"
colsOutcome[ICUData$outcome == "home"] <- "#377EB8"
colsOutcome[ICUData$outcome == "other hospital"] <- "#4DAF4A8"
colsOutcome[ICUData$outcome == "secondary care/rehab"] <- "#984EA3"
```

```{r}
plot(x = ICUData$temperature, y = ICUData$heart.rate, pch = 19,
     xlab = "Maximum body temperature", ylab = "Maximum heart rate",
     main = "500 ICU patients", col = colsOutcome, xlim = c(33,43))
legend(x = "topleft", legend = c("died", "home", "other hospital",
"secondary care/rehab"), pch = 19,
       col = c("#E41A1C", "#377EB8", "#4DAF4A8", "#984EA3"))
```

From er|cjberger @end|ng |rom gm@||@com  Mon Dec 26 15:28:39 2022
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Mon, 26 Dec 2022 16:28:39 +0200
Subject: [R] Reg: Help in assigning colors to factor variable in ggplot2
In-Reply-To: <CAEezrQT3++eFf7HBUryERtToLEiKBXaPgyYomUorV7n5-tLvjg@mail.gmail.com>
References: <CAEezrQT3++eFf7HBUryERtToLEiKBXaPgyYomUorV7n5-tLvjg@mail.gmail.com>
Message-ID: <CAGgJW74Ms=UDydv35bkBq-ra0wc8is7VbTpogWpznvZamNykvw@mail.gmail.com>

Your problem is that the color "#4DAF4A8" is not a valid color. It should
have only 6 hex digits.
e.g. "#4DAF4A" will work.

Also you seem to be confused about ggplot. You are not using ggplot in your
code at all.
You are using base graphics. You can remove the 3 library calls.

HTH,
Eric


On Mon, Dec 26, 2022 at 4:06 PM Upananda Pani <upananda.pani at gmail.com>
wrote:

> Dear All,
>
> I am trying to plot a scatter plot between  temperature and heart rate and
> additionally marking the outcome of the patients by colors. I am using the
> standard package Use the standard function plot as well as the functions of
> package "ggplot2" (Wickham (2009)). Save the plots in pdf files.
>
> I am geeting an error to plot when assigning colsOutcome to the
> scatterplot. I am doing it wrongly. Please advise me.
> ```{r}
> library(ggplot2)
> library(RColorBrewer)
> library(ggsci)
> ICUData <- read.csv(file = "ICUData.csv")
> ```
> ```{r}
> ## Generate empty vector
> colsOutcome <- character(nrow(ICUData))
> ## Fill with colors
> colsOutcome[ICUData$outcome == "died"] <- "#E41A1C"
> colsOutcome[ICUData$outcome == "home"] <- "#377EB8"
> colsOutcome[ICUData$outcome == "other hospital"] <- "#4DAF4A8"
> colsOutcome[ICUData$outcome == "secondary care/rehab"] <- "#984EA3"
> ```
>
> ```{r}
> plot(x = ICUData$temperature, y = ICUData$heart.rate, pch = 19,
>      xlab = "Maximum body temperature", ylab = "Maximum heart rate",
>      main = "500 ICU patients", col = colsOutcome, xlim = c(33,43))
> legend(x = "topleft", legend = c("died", "home", "other hospital",
> "secondary care/rehab"), pch = 19,
>        col = c("#E41A1C", "#377EB8", "#4DAF4A8", "#984EA3"))
> ```
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jrkr|de@u @end|ng |rom gm@||@com  Mon Dec 26 15:46:47 2022
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Mon, 26 Dec 2022 09:46:47 -0500
Subject: [R] Reg: Help in assigning colors to factor variable in ggplot2
In-Reply-To: <CAEezrQT3++eFf7HBUryERtToLEiKBXaPgyYomUorV7n5-tLvjg@mail.gmail.com>
References: <CAEezrQT3++eFf7HBUryERtToLEiKBXaPgyYomUorV7n5-tLvjg@mail.gmail.com>
Message-ID: <CAKZQJMBq_b4gO=AtesniVF=wtDPY5SnXOFJBih2wk0jkE0CqGg@mail.gmail.com>

I suspect you may be mixing *plot()* commands with *ggplot()* commands and
they are likely incompatible.

Could you supply some sample data and any error messages that you are
getting?   A handy way to supply some sample data is the dput() function.
In the case of a large dataset something like dput(head(mydata, 100))
should supply the data we need.

On Mon, 26 Dec 2022 at 09:06, Upananda Pani <upananda.pani at gmail.com> wrote:

> Dear All,
>
> I am trying to plot a scatter plot between  temperature and heart rate and
> additionally marking the outcome of the patients by colors. I am using the
> standard package Use the standard function plot as well as the functions of
> package "ggplot2" (Wickham (2009)). Save the plots in pdf files.
>
> I am geeting an error to plot when assigning colsOutcome to the
> scatterplot. I am doing it wrongly. Please advise me.
> ```{r}
> library(ggplot2)
> library(RColorBrewer)
> library(ggsci)
> ICUData <- read.csv(file = "ICUData.csv")
> ```
> ```{r}
> ## Generate empty vector
> colsOutcome <- character(nrow(ICUData))
> ## Fill with colors
> colsOutcome[ICUData$outcome == "died"] <- "#E41A1C"
> colsOutcome[ICUData$outcome == "home"] <- "#377EB8"
> colsOutcome[ICUData$outcome == "other hospital"] <- "#4DAF4A8"
> colsOutcome[ICUData$outcome == "secondary care/rehab"] <- "#984EA3"
> ```
>
> ```{r}
> plot(x = ICUData$temperature, y = ICUData$heart.rate, pch = 19,
>      xlab = "Maximum body temperature", ylab = "Maximum heart rate",
>      main = "500 ICU patients", col = colsOutcome, xlim = c(33,43))
> legend(x = "topleft", legend = c("died", "home", "other hospital",
> "secondary care/rehab"), pch = 19,
>        col = c("#E41A1C", "#377EB8", "#4DAF4A8", "#984EA3"))
> ```
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
John Kane
Kingston ON Canada

	[[alternative HTML version deleted]]


From jrkr|de@u @end|ng |rom gm@||@com  Mon Dec 26 16:39:00 2022
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Mon, 26 Dec 2022 10:39:00 -0500
Subject: [R] Reg: Help in assigning colors to factor variable in ggplot2
In-Reply-To: <CAKZQJMBq_b4gO=AtesniVF=wtDPY5SnXOFJBih2wk0jkE0CqGg@mail.gmail.com>
References: <CAEezrQT3++eFf7HBUryERtToLEiKBXaPgyYomUorV7n5-tLvjg@mail.gmail.com>
 <CAKZQJMBq_b4gO=AtesniVF=wtDPY5SnXOFJBih2wk0jkE0CqGg@mail.gmail.com>
Message-ID: <CAKZQJMDd90UiZ1m-1fo=cPsPx3B5iOSvGS0ysVtUdQO6rJfogw@mail.gmail.com>

Here is a rough guess at what you may want with a bit of mock data and
using ggplot2.
##=================================================#
library(ggplot2)
library(RColorBrewer)

dat1  <- data.frame(aa = sample(1:10, 20, replace = TRUE), bb =
sample(21:30, 20, replace = TRUE),
                    outcome = sample(c("died", "home", "other
hospital","secondary care/rehab"), 20, replace = TRUE ))
ggplot(dat1, aes(aa, bb, colour = outcome)) + geom_point() +
    scale_colour_brewer(palette = "Dark2") +
labs(
x = "Maximum body temperature",
y =  "Maximum heart rate",
colour = "outcome",
title ="500 ICU patients"
)
 ##====================================================##

On Mon, 26 Dec 2022 at 09:46, John Kane <jrkrideau at gmail.com> wrote:

> I suspect you may be mixing *plot()* commands with *ggplot()* commands and
> they are likely incompatible.
>
> Could you supply some sample data and any error messages that you are
> getting?   A handy way to supply some sample data is the dput() function.
> In the case of a large dataset something like dput(head(mydata, 100))
> should supply the data we need.
>
> On Mon, 26 Dec 2022 at 09:06, Upananda Pani <upananda.pani at gmail.com>
> wrote:
>
>> Dear All,
>>
>> I am trying to plot a scatter plot between  temperature and heart rate and
>> additionally marking the outcome of the patients by colors. I am using the
>> standard package Use the standard function plot as well as the functions
>> of
>> package "ggplot2" (Wickham (2009)). Save the plots in pdf files.
>>
>> I am geeting an error to plot when assigning colsOutcome to the
>> scatterplot. I am doing it wrongly. Please advise me.
>> ```{r}
>> library(ggplot2)
>> library(RColorBrewer)
>> library(ggsci)
>> ICUData <- read.csv(file = "ICUData.csv")
>> ```
>> ```{r}
>> ## Generate empty vector
>> colsOutcome <- character(nrow(ICUData))
>> ## Fill with colors
>> colsOutcome[ICUData$outcome == "died"] <- "#E41A1C"
>> colsOutcome[ICUData$outcome == "home"] <- "#377EB8"
>> colsOutcome[ICUData$outcome == "other hospital"] <- "#4DAF4A8"
>> colsOutcome[ICUData$outcome == "secondary care/rehab"] <- "#984EA3"
>> ```
>>
>> ```{r}
>> plot(x = ICUData$temperature, y = ICUData$heart.rate, pch = 19,
>>      xlab = "Maximum body temperature", ylab = "Maximum heart rate",
>>      main = "500 ICU patients", col = colsOutcome, xlim = c(33,43))
>> legend(x = "topleft", legend = c("died", "home", "other hospital",
>> "secondary care/rehab"), pch = 19,
>>        col = c("#E41A1C", "#377EB8", "#4DAF4A8", "#984EA3"))
>> ```
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>
> --
> John Kane
> Kingston ON Canada
>


-- 
John Kane
Kingston ON Canada

	[[alternative HTML version deleted]]


From up@n@nd@@p@n| @end|ng |rom gm@||@com  Mon Dec 26 17:15:20 2022
From: up@n@nd@@p@n| @end|ng |rom gm@||@com (Upananda Pani)
Date: Mon, 26 Dec 2022 21:45:20 +0530
Subject: [R] Reg: Help in assigning colors to factor variable in ggplot2
In-Reply-To: <CAKZQJMDd90UiZ1m-1fo=cPsPx3B5iOSvGS0ysVtUdQO6rJfogw@mail.gmail.com>
References: <CAEezrQT3++eFf7HBUryERtToLEiKBXaPgyYomUorV7n5-tLvjg@mail.gmail.com>
 <CAKZQJMBq_b4gO=AtesniVF=wtDPY5SnXOFJBih2wk0jkE0CqGg@mail.gmail.com>
 <CAKZQJMDd90UiZ1m-1fo=cPsPx3B5iOSvGS0ysVtUdQO6rJfogw@mail.gmail.com>
Message-ID: <CAEezrQRWKvgO3BcuLpMLfQTi=e2cC-U3iPcX8LOsEeMD0-G-vA@mail.gmail.com>

Hi John,

Thanks for your reply. I have tried the following code.

```{r}
ggplot(ICUData[-398,], aes(x=temperature, y=heart.rate, colour=outcome)) +
  ## shape = 19: somewhat larger point
  ## alpha = 0.4: strengs of blending
  geom_point(shape=19, alpha=0.4) +
  ## colors
  scale_colour_manual(values = c("#E41A1C", "#377EB8", "#4DAF4A",
"#984EA3")) +
  ## labeling
  ggtitle("500 ICU patients") + xlab("Maximum body temperature") +
  ylab("Maximum heart frequency")
```
However, I will try with your solution. Thanks for your time.

With sincere regards,
Upananda Pani



On Mon, Dec 26, 2022 at 9:09 PM John Kane <jrkrideau at gmail.com> wrote:

> Here is a rough guess at what you may want with a bit of mock data and
> using ggplot2.
> ##=================================================#
> library(ggplot2)
> library(RColorBrewer)
>
> dat1  <- data.frame(aa = sample(1:10, 20, replace = TRUE), bb =
> sample(21:30, 20, replace = TRUE),
>                     outcome = sample(c("died", "home", "other
> hospital","secondary care/rehab"), 20, replace = TRUE ))
> ggplot(dat1, aes(aa, bb, colour = outcome)) + geom_point() +
>     scale_colour_brewer(palette = "Dark2") +
> labs(
> x = "Maximum body temperature",
> y =  "Maximum heart rate",
> colour = "outcome",
> title ="500 ICU patients"
> )
>  ##====================================================##
>
> On Mon, 26 Dec 2022 at 09:46, John Kane <jrkrideau at gmail.com> wrote:
>
>> I suspect you may be mixing *plot()* commands with *ggplot()* commands
>> and they are likely incompatible.
>>
>> Could you supply some sample data and any error messages that you are
>> getting?   A handy way to supply some sample data is the dput() function.
>> In the case of a large dataset something like dput(head(mydata, 100))
>> should supply the data we need.
>>
>> On Mon, 26 Dec 2022 at 09:06, Upananda Pani <upananda.pani at gmail.com>
>> wrote:
>>
>>> Dear All,
>>>
>>> I am trying to plot a scatter plot between  temperature and heart rate
>>> and
>>> additionally marking the outcome of the patients by colors. I am using
>>> the
>>> standard package Use the standard function plot as well as the functions
>>> of
>>> package "ggplot2" (Wickham (2009)). Save the plots in pdf files.
>>>
>>> I am geeting an error to plot when assigning colsOutcome to the
>>> scatterplot. I am doing it wrongly. Please advise me.
>>> ```{r}
>>> library(ggplot2)
>>> library(RColorBrewer)
>>> library(ggsci)
>>> ICUData <- read.csv(file = "ICUData.csv")
>>> ```
>>> ```{r}
>>> ## Generate empty vector
>>> colsOutcome <- character(nrow(ICUData))
>>> ## Fill with colors
>>> colsOutcome[ICUData$outcome == "died"] <- "#E41A1C"
>>> colsOutcome[ICUData$outcome == "home"] <- "#377EB8"
>>> colsOutcome[ICUData$outcome == "other hospital"] <- "#4DAF4A8"
>>> colsOutcome[ICUData$outcome == "secondary care/rehab"] <- "#984EA3"
>>> ```
>>>
>>> ```{r}
>>> plot(x = ICUData$temperature, y = ICUData$heart.rate, pch = 19,
>>>      xlab = "Maximum body temperature", ylab = "Maximum heart rate",
>>>      main = "500 ICU patients", col = colsOutcome, xlim = c(33,43))
>>> legend(x = "topleft", legend = c("died", "home", "other hospital",
>>> "secondary care/rehab"), pch = 19,
>>>        col = c("#E41A1C", "#377EB8", "#4DAF4A8", "#984EA3"))
>>> ```
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>>
>> --
>> John Kane
>> Kingston ON Canada
>>
>
>
> --
> John Kane
> Kingston ON Canada
>

	[[alternative HTML version deleted]]


From up@n@nd@@p@n| @end|ng |rom gm@||@com  Mon Dec 26 17:24:36 2022
From: up@n@nd@@p@n| @end|ng |rom gm@||@com (Upananda Pani)
Date: Mon, 26 Dec 2022 21:54:36 +0530
Subject: [R] Reg: Help in assigning colors to factor variable in ggplot2
In-Reply-To: <CAKZQJMDd90UiZ1m-1fo=cPsPx3B5iOSvGS0ysVtUdQO6rJfogw@mail.gmail.com>
References: <CAEezrQT3++eFf7HBUryERtToLEiKBXaPgyYomUorV7n5-tLvjg@mail.gmail.com>
 <CAKZQJMBq_b4gO=AtesniVF=wtDPY5SnXOFJBih2wk0jkE0CqGg@mail.gmail.com>
 <CAKZQJMDd90UiZ1m-1fo=cPsPx3B5iOSvGS0ysVtUdQO6rJfogw@mail.gmail.com>
Message-ID: <CAEezrQR4PBuXzdu+p1MtnpWY0og9fX-XJaHes3KhqCdHGOE86Q@mail.gmail.com>

Hi John,

Greetings! I am grateful to your suggestions. I have fixed the error as per
your suggestions.

Many thanks to you for saving my time.

With sincere regards,
Upananda Pani

On Mon, Dec 26, 2022 at 9:09 PM John Kane <jrkrideau at gmail.com> wrote:

> Here is a rough guess at what you may want with a bit of mock data and
> using ggplot2.
> ##=================================================#
> library(ggplot2)
> library(RColorBrewer)
>
> dat1  <- data.frame(aa = sample(1:10, 20, replace = TRUE), bb =
> sample(21:30, 20, replace = TRUE),
>                     outcome = sample(c("died", "home", "other
> hospital","secondary care/rehab"), 20, replace = TRUE ))
> ggplot(dat1, aes(aa, bb, colour = outcome)) + geom_point() +
>     scale_colour_brewer(palette = "Dark2") +
> labs(
> x = "Maximum body temperature",
> y =  "Maximum heart rate",
> colour = "outcome",
> title ="500 ICU patients"
> )
>  ##====================================================##
>
> On Mon, 26 Dec 2022 at 09:46, John Kane <jrkrideau at gmail.com> wrote:
>
>> I suspect you may be mixing *plot()* commands with *ggplot()* commands
>> and they are likely incompatible.
>>
>> Could you supply some sample data and any error messages that you are
>> getting?   A handy way to supply some sample data is the dput() function.
>> In the case of a large dataset something like dput(head(mydata, 100))
>> should supply the data we need.
>>
>> On Mon, 26 Dec 2022 at 09:06, Upananda Pani <upananda.pani at gmail.com>
>> wrote:
>>
>>> Dear All,
>>>
>>> I am trying to plot a scatter plot between  temperature and heart rate
>>> and
>>> additionally marking the outcome of the patients by colors. I am using
>>> the
>>> standard package Use the standard function plot as well as the functions
>>> of
>>> package "ggplot2" (Wickham (2009)). Save the plots in pdf files.
>>>
>>> I am geeting an error to plot when assigning colsOutcome to the
>>> scatterplot. I am doing it wrongly. Please advise me.
>>> ```{r}
>>> library(ggplot2)
>>> library(RColorBrewer)
>>> library(ggsci)
>>> ICUData <- read.csv(file = "ICUData.csv")
>>> ```
>>> ```{r}
>>> ## Generate empty vector
>>> colsOutcome <- character(nrow(ICUData))
>>> ## Fill with colors
>>> colsOutcome[ICUData$outcome == "died"] <- "#E41A1C"
>>> colsOutcome[ICUData$outcome == "home"] <- "#377EB8"
>>> colsOutcome[ICUData$outcome == "other hospital"] <- "#4DAF4A8"
>>> colsOutcome[ICUData$outcome == "secondary care/rehab"] <- "#984EA3"
>>> ```
>>>
>>> ```{r}
>>> plot(x = ICUData$temperature, y = ICUData$heart.rate, pch = 19,
>>>      xlab = "Maximum body temperature", ylab = "Maximum heart rate",
>>>      main = "500 ICU patients", col = colsOutcome, xlim = c(33,43))
>>> legend(x = "topleft", legend = c("died", "home", "other hospital",
>>> "secondary care/rehab"), pch = 19,
>>>        col = c("#E41A1C", "#377EB8", "#4DAF4A8", "#984EA3"))
>>> ```
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>>
>> --
>> John Kane
>> Kingston ON Canada
>>
>
>
> --
> John Kane
> Kingston ON Canada
>

	[[alternative HTML version deleted]]


From up@n@nd@@p@n| @end|ng |rom gm@||@com  Mon Dec 26 17:26:07 2022
From: up@n@nd@@p@n| @end|ng |rom gm@||@com (Upananda Pani)
Date: Mon, 26 Dec 2022 21:56:07 +0530
Subject: [R] Reg: Help in assigning colors to factor variable in ggplot2
In-Reply-To: <CAGgJW74Ms=UDydv35bkBq-ra0wc8is7VbTpogWpznvZamNykvw@mail.gmail.com>
References: <CAEezrQT3++eFf7HBUryERtToLEiKBXaPgyYomUorV7n5-tLvjg@mail.gmail.com>
 <CAGgJW74Ms=UDydv35bkBq-ra0wc8is7VbTpogWpznvZamNykvw@mail.gmail.com>
Message-ID: <CAEezrQTNZ6FjhwrdzcTBdaDC5k58ZzR8i4o==9cQ_dgJDtmvSw@mail.gmail.com>

Thanks Eric. You have found the error. It has saved my time.

Grateful to you for your help and suggestions.

Regards,
Upananda

On Mon, Dec 26, 2022 at 7:59 PM Eric Berger <ericjberger at gmail.com> wrote:

> Your problem is that the color "#4DAF4A8" is not a valid color. It should
> have only 6 hex digits.
> e.g. "#4DAF4A" will work.
>
> Also you seem to be confused about ggplot. You are not using ggplot in
> your code at all.
> You are using base graphics. You can remove the 3 library calls.
>
> HTH,
> Eric
>
>
> On Mon, Dec 26, 2022 at 4:06 PM Upananda Pani <upananda.pani at gmail.com>
> wrote:
>
>> Dear All,
>>
>> I am trying to plot a scatter plot between  temperature and heart rate and
>> additionally marking the outcome of the patients by colors. I am using the
>> standard package Use the standard function plot as well as the functions
>> of
>> package "ggplot2" (Wickham (2009)). Save the plots in pdf files.
>>
>> I am geeting an error to plot when assigning colsOutcome to the
>> scatterplot. I am doing it wrongly. Please advise me.
>> ```{r}
>> library(ggplot2)
>> library(RColorBrewer)
>> library(ggsci)
>> ICUData <- read.csv(file = "ICUData.csv")
>> ```
>> ```{r}
>> ## Generate empty vector
>> colsOutcome <- character(nrow(ICUData))
>> ## Fill with colors
>> colsOutcome[ICUData$outcome == "died"] <- "#E41A1C"
>> colsOutcome[ICUData$outcome == "home"] <- "#377EB8"
>> colsOutcome[ICUData$outcome == "other hospital"] <- "#4DAF4A8"
>> colsOutcome[ICUData$outcome == "secondary care/rehab"] <- "#984EA3"
>> ```
>>
>> ```{r}
>> plot(x = ICUData$temperature, y = ICUData$heart.rate, pch = 19,
>>      xlab = "Maximum body temperature", ylab = "Maximum heart rate",
>>      main = "500 ICU patients", col = colsOutcome, xlim = c(33,43))
>> legend(x = "topleft", legend = c("died", "home", "other hospital",
>> "secondary care/rehab"), pch = 19,
>>        col = c("#E41A1C", "#377EB8", "#4DAF4A8", "#984EA3"))
>> ```
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From therne@u @end|ng |rom m@yo@edu  Tue Dec 27 18:06:04 2022
From: therne@u @end|ng |rom m@yo@edu (Therneau, Terry M., Ph.D.)
Date: Tue, 27 Dec 2022 11:06:04 -0600
Subject: [R] extract from a list of lists
Message-ID: <d35801$j8t8qb@ironport10.mayo.edu>

I not uncommonly have the following paradym
 ?? fits <- lapply(argument, function)

resulting in a list of function results.?? Often, the outer call is to mclapply, and the 
function encodes some long calculation, e.g. multiple chains in an MCMC.
Assume for illustration that each function returns a list with elements?? beta, loglik,? iter.

Then? sapply(fits,? function(x) x$iter)
will give me a vector, with the number of iterations used by each instance.

I've often been suspicious that there is some simple shorthand for the "grab all the 
elements named iter" that skips the explicit x$iter function.?? Am I indeed overlooking 
something???? I don't expect a speed increase, just cleaner code.

Terry T.

-- 
Terry M Therneau, PhD
Department of Quantitative Health Sciences
Mayo Clinic
therneau at mayo.edu

"TERR-ree THUR-noh"

	[[alternative HTML version deleted]]


From 538280 @end|ng |rom gm@||@com  Tue Dec 27 18:24:53 2022
From: 538280 @end|ng |rom gm@||@com (Greg Snow)
Date: Tue, 27 Dec 2022 10:24:53 -0700
Subject: [R] extract from a list of lists
In-Reply-To: <d35801$j8t8qb@ironport10.mayo.edu>
References: <d35801$j8t8qb@ironport10.mayo.edu>
Message-ID: <CAFEqCdzV3OaEhpPJm6HN6+EaXUvGwaEmPKvXJAs3MSa71f5hMQ@mail.gmail.com>

Terry,

I don't know if it is much cleaner or not, but you can use:

sapply(fits, `[[`, 'iter')

This calls the `[[` function (to extract list elements) on each
element of the top list, with the extra argument of `iter` to say
which element.


On Tue, Dec 27, 2022 at 10:16 AM Therneau, Terry M., Ph.D. via R-help
<r-help at r-project.org> wrote:
>
> I not uncommonly have the following paradym
>     fits <- lapply(argument, function)
>
> resulting in a list of function results.   Often, the outer call is to mclapply, and the
> function encodes some long calculation, e.g. multiple chains in an MCMC.
> Assume for illustration that each function returns a list with elements   beta, loglik,  iter.
>
> Then  sapply(fits,  function(x) x$iter)
> will give me a vector, with the number of iterations used by each instance.
>
> I've often been suspicious that there is some simple shorthand for the "grab all the
> elements named iter" that skips the explicit x$iter function.   Am I indeed overlooking
> something?    I don't expect a speed increase, just cleaner code.
>
> Terry T.
>
> --
> Terry M Therneau, PhD
> Department of Quantitative Health Sciences
> Mayo Clinic
> therneau at mayo.edu
>
> "TERR-ree THUR-noh"
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Dec 27 18:30:06 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 27 Dec 2022 17:30:06 +0000
Subject: [R] error in exists.....
Message-ID: <PU4P216MB15680590FF577F4927C5690CC8ED9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear members,
                             I have the following code:
>  E <- new.env()
>  E$L <- list()
>  i <- 1
>   E$L[[i]]$T1A1 <- Sys.time()
> exists("T1A1", where = E$L[[i]])
Error in list2env(list(1, T1A1 = 1672161002.38743), NULL, <environment>) :
  attempt to use zero-length variable name

I want the output of the exists() function to be TRUE. In any case:

> E$L[[1]]$T1A1
[1] "2022-12-27 22:40:02 IST"

Please help me solve this conundrum....

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI


	[[alternative HTML version deleted]]


From 538280 @end|ng |rom gm@||@com  Tue Dec 27 18:45:31 2022
From: 538280 @end|ng |rom gm@||@com (Greg Snow)
Date: Tue, 27 Dec 2022 10:45:31 -0700
Subject: [R] extract from a list of lists
In-Reply-To: <d35801$j8t8qb@ironport10.mayo.edu>
References: <d35801$j8t8qb@ironport10.mayo.edu>
Message-ID: <CAFEqCdxPDSqpr9LoXi_-LG4dyOCJRv14vqD35c3wJOTDEL4=wQ@mail.gmail.com>

Another option is the map family of functions in the purrr package
(yes, this depends on another package being loaded, which may affect
things if you are including this in your own package, creating a
dependency).

In map and friends, if the "function" is a string or integer, then it
is taken as the piece to be extracted, so you should be able to do
something like:

library(purrr)
map(fits, 'iter')
# or
map_int(fits, 'iter')
# or
map_dbl(fits, 'iter')

which of the last 2 to use depends on how `iter` is stored.

On Tue, Dec 27, 2022 at 10:16 AM Therneau, Terry M., Ph.D. via R-help
<r-help at r-project.org> wrote:
>
> I not uncommonly have the following paradym
>     fits <- lapply(argument, function)
>
> resulting in a list of function results.   Often, the outer call is to mclapply, and the
> function encodes some long calculation, e.g. multiple chains in an MCMC.
> Assume for illustration that each function returns a list with elements   beta, loglik,  iter.
>
> Then  sapply(fits,  function(x) x$iter)
> will give me a vector, with the number of iterations used by each instance.
>
> I've often been suspicious that there is some simple shorthand for the "grab all the
> elements named iter" that skips the explicit x$iter function.   Am I indeed overlooking
> something?    I don't expect a speed increase, just cleaner code.
>
> Terry T.
>
> --
> Terry M Therneau, PhD
> Department of Quantitative Health Sciences
> Mayo Clinic
> therneau at mayo.edu
>
> "TERR-ree THUR-noh"
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com


From @kw@|mmo @end|ng |rom gm@||@com  Tue Dec 27 18:48:44 2022
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Tue, 27 Dec 2022 12:48:44 -0500
Subject: [R] error in exists.....
In-Reply-To: <PU4P216MB15680590FF577F4927C5690CC8ED9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB15680590FF577F4927C5690CC8ED9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAPcHnpQszCPxj-BO4_8WefLz-g7Hxbnzs8bEk4oMgiU2BXyzNw@mail.gmail.com>

exists() is for bindings in an environment, not for names in a list. try

"T1A1" %in% names(E$L[[i]])

instead


On Tue, Dec 27, 2022, 12:36 akshay kulkarni <akshay_e4 at hotmail.com> wrote:

> Dear members,
>                              I have the following code:
> >  E <- new.env()
> >  E$L <- list()
> >  i <- 1
> >   E$L[[i]]$T1A1 <- Sys.time()
> > exists("T1A1", where = E$L[[i]])
> Error in list2env(list(1, T1A1 = 1672161002.38743), NULL, <environment>) :
>   attempt to use zero-length variable name
>
> I want the output of the exists() function to be TRUE. In any case:
>
> > E$L[[1]]$T1A1
> [1] "2022-12-27 22:40:02 IST"
>
> Please help me solve this conundrum....
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @@r@h@go@|ee @end|ng |rom gm@||@com  Tue Dec 27 18:50:30 2022
From: @@r@h@go@|ee @end|ng |rom gm@||@com (Sarah Goslee)
Date: Tue, 27 Dec 2022 12:50:30 -0500
Subject: [R] error in exists.....
In-Reply-To: <PU4P216MB15680590FF577F4927C5690CC8ED9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB15680590FF577F4927C5690CC8ED9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAM_vjunG=FmBLEXcwWT=i1FZL61r2mpEa9wzU6y+C-60D5pobA@mail.gmail.com>

Hi,

I can't create the desired object using the code you provided, but if
I create it in two steps so that E$L[[i]]$T1A1 does exist, exist()
returns TRUE.

E <- new.env()
E$L <- list()
i <- 1
E$L[[i]]$T1A1 <- Sys.time()

# returns: Error in `*tmp*`[[i]] : subscript out of bounds

E$L[[i]] <- list()
E$L[[i]]$T1A1 <- Sys.time()


exists("T1A1", where = E$L[[i]])
# returns: [1] TRUE


> str(E$L)
List of 1
 $ :List of 1
  ..$ T1A1: POSIXct[1:1], format: "2022-12-27 12:47:26"

Sarah

On Tue, Dec 27, 2022 at 12:36 PM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> Dear members,
>                              I have the following code:
> >  E <- new.env()
> >  E$L <- list()
> >  i <- 1
> >   E$L[[i]]$T1A1 <- Sys.time()
> > exists("T1A1", where = E$L[[i]])
> Error in list2env(list(1, T1A1 = 1672161002.38743), NULL, <environment>) :
>   attempt to use zero-length variable name
>
> I want the output of the exists() function to be TRUE. In any case:
>
> > E$L[[1]]$T1A1
> [1] "2022-12-27 22:40:02 IST"
>
> Please help me solve this conundrum....
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Sarah Goslee (she/her)
http://www.numberwright.com


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Dec 27 18:56:51 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 27 Dec 2022 17:56:51 +0000
Subject: [R] error in exists.....
In-Reply-To: <CAM_vjunG=FmBLEXcwWT=i1FZL61r2mpEa9wzU6y+C-60D5pobA@mail.gmail.com>
References: <PU4P216MB15680590FF577F4927C5690CC8ED9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAM_vjunG=FmBLEXcwWT=i1FZL61r2mpEa9wzU6y+C-60D5pobA@mail.gmail.com>
Message-ID: <PU4P216MB1568C6B561D6436E387BA883C8ED9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Sarah,
                     I had this also before the assignment of Sys.time():

>     E$L[[i]] <- i

After assignment of Sys.time():

> E$L
[[1]]
[[1]][[1]]
[1] 1

[[1]]$T1A1
[1] "2022-12-27 22:40:02 IST"

regrets for not sharing this ......Can you reproduce it now?

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Sarah Goslee <sarah.goslee at gmail.com>
Sent: Tuesday, December 27, 2022 11:20 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] error in exists.....

Hi,

I can't create the desired object using the code you provided, but if
I create it in two steps so that E$L[[i]]$T1A1 does exist, exist()
returns TRUE.

E <- new.env()
E$L <- list()
i <- 1
E$L[[i]]$T1A1 <- Sys.time()

# returns: Error in `*tmp*`[[i]] : subscript out of bounds

E$L[[i]] <- list()
E$L[[i]]$T1A1 <- Sys.time()


exists("T1A1", where = E$L[[i]])
# returns: [1] TRUE


> str(E$L)
List of 1
 $ :List of 1
  ..$ T1A1: POSIXct[1:1], format: "2022-12-27 12:47:26"

Sarah

On Tue, Dec 27, 2022 at 12:36 PM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> Dear members,
>                              I have the following code:
> >  E <- new.env()
> >  E$L <- list()
> >  i <- 1
> >   E$L[[i]]$T1A1 <- Sys.time()
> > exists("T1A1", where = E$L[[i]])
> Error in list2env(list(1, T1A1 = 1672161002.38743), NULL, <environment>) :
>   attempt to use zero-length variable name
>
> I want the output of the exists() function to be TRUE. In any case:
>
> > E$L[[1]]$T1A1
> [1] "2022-12-27 22:40:02 IST"
>
> Please help me solve this conundrum....
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



--
Sarah Goslee (she/her)
http://www.numberwright.com

	[[alternative HTML version deleted]]


From 538280 @end|ng |rom gm@||@com  Tue Dec 27 19:07:18 2022
From: 538280 @end|ng |rom gm@||@com (Greg Snow)
Date: Tue, 27 Dec 2022 11:07:18 -0700
Subject: [R] error in exists.....
In-Reply-To: <PU4P216MB15680590FF577F4927C5690CC8ED9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB15680590FF577F4927C5690CC8ED9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAFEqCdwYqAXDrNBm4ErKv0iQACRJ1m0s9zeqzNY54COgsgqSVQ@mail.gmail.com>

You might try `hasName` instead of `exists` since `exists` is designed
for environments and `hasName` for objects (like lists).  Note that
the order of the arguments is switched between the 2 functions.
This does the same thing as Andrew Simmons' answer, but is a little bit shorter.

On Tue, Dec 27, 2022 at 10:36 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> Dear members,
>                              I have the following code:
> >  E <- new.env()
> >  E$L <- list()
> >  i <- 1
> >   E$L[[i]]$T1A1 <- Sys.time()
> > exists("T1A1", where = E$L[[i]])
> Error in list2env(list(1, T1A1 = 1672161002.38743), NULL, <environment>) :
>   attempt to use zero-length variable name
>
> I want the output of the exists() function to be TRUE. In any case:
>
> > E$L[[1]]$T1A1
> [1] "2022-12-27 22:40:02 IST"
>
> Please help me solve this conundrum....
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com


From bgunter@4567 @end|ng |rom gm@||@com  Tue Dec 27 19:09:48 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 27 Dec 2022 10:09:48 -0800
Subject: [R] error in exists.....
In-Reply-To: <PU4P216MB1568C6B561D6436E387BA883C8ED9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB15680590FF577F4927C5690CC8ED9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAM_vjunG=FmBLEXcwWT=i1FZL61r2mpEa9wzU6y+C-60D5pobA@mail.gmail.com>
 <PU4P216MB1568C6B561D6436E387BA883C8ED9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAGxFJbTtAtYjR3b96XKji6h+cy07M+uhQ4yo-ZJcFhvw78WESg@mail.gmail.com>

You are confused about the list hierarchy. Perhaps this will explain:
> i <- 1
>  E <- new.env()
>   E$L <- list()  ## L is an empty list in E
>   i <- 1
>    E$L[[i]]$T1A1 <- Sys.time()
Error in `*tmp*`[[i]] : subscript out of bounds
## L is empty, so L[[1]] does not exist; is not a list;
## cannot have a value assigned to a component
## The following works:
## Create an empty list as a sublist of L
>  E$L[[1]] <- list()
## Now create and assign to a component of the empty list
>  E$L[[i]]$T1A1 <- Sys.time()
> E$L ## a list
[[1]]  ## whose first component is a list
[[1]]$T1A1 ## T1A1 named component of L[[1]]
[1] "2022-12-27 10:00:10 PST"

ergo, no conundra... (assuming I've understood you correctly)

Cheers,
Bert

On Tue, Dec 27, 2022 at 9:57 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> Dear Sarah,
>                      I had this also before the assignment of Sys.time():
>
> >     E$L[[i]] <- i
>
> After assignment of Sys.time():
>
> > E$L
> [[1]]
> [[1]][[1]]
> [1] 1
>
> [[1]]$T1A1
> [1] "2022-12-27 22:40:02 IST"
>
> regrets for not sharing this ......Can you reproduce it now?
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
> ________________________________
> From: Sarah Goslee <sarah.goslee at gmail.com>
> Sent: Tuesday, December 27, 2022 11:20 PM
> To: akshay kulkarni <akshay_e4 at hotmail.com>
> Cc: R help Mailing list <r-help at r-project.org>
> Subject: Re: [R] error in exists.....
>
> Hi,
>
> I can't create the desired object using the code you provided, but if
> I create it in two steps so that E$L[[i]]$T1A1 does exist, exist()
> returns TRUE.
>
> E <- new.env()
> E$L <- list()
> i <- 1
> E$L[[i]]$T1A1 <- Sys.time()
>
> # returns: Error in `*tmp*`[[i]] : subscript out of bounds
>
> E$L[[i]] <- list()
> E$L[[i]]$T1A1 <- Sys.time()
>
>
> exists("T1A1", where = E$L[[i]])
> # returns: [1] TRUE
>
>
> > str(E$L)
> List of 1
>  $ :List of 1
>   ..$ T1A1: POSIXct[1:1], format: "2022-12-27 12:47:26"
>
> Sarah
>
> On Tue, Dec 27, 2022 at 12:36 PM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
> >
> > Dear members,
> >                              I have the following code:
> > >  E <- new.env()
> > >  E$L <- list()
> > >  i <- 1
> > >   E$L[[i]]$T1A1 <- Sys.time()
> > > exists("T1A1", where = E$L[[i]])
> > Error in list2env(list(1, T1A1 = 1672161002.38743), NULL, <environment>) :
> >   attempt to use zero-length variable name
> >
> > I want the output of the exists() function to be TRUE. In any case:
> >
> > > E$L[[1]]$T1A1
> > [1] "2022-12-27 22:40:02 IST"
> >
> > Please help me solve this conundrum....
> >
> > Thanking you,
> > Yours sincerely,
> > AKSHAY M KULKARNI
> >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
>
>
> --
> Sarah Goslee (she/her)
> http://www.numberwright.com
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Dec 27 19:22:09 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 27 Dec 2022 18:22:09 +0000
Subject: [R] error in exists.....
In-Reply-To: <CAGxFJbTtAtYjR3b96XKji6h+cy07M+uhQ4yo-ZJcFhvw78WESg@mail.gmail.com>
References: <PU4P216MB15680590FF577F4927C5690CC8ED9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAM_vjunG=FmBLEXcwWT=i1FZL61r2mpEa9wzU6y+C-60D5pobA@mail.gmail.com>
 <PU4P216MB1568C6B561D6436E387BA883C8ED9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAGxFJbTtAtYjR3b96XKji6h+cy07M+uhQ4yo-ZJcFhvw78WESg@mail.gmail.com>
Message-ID: <PU4P216MB1568E05BB848EBCCD28C7F51C8ED9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Bert,
                   Yeah, it's working....Sometimes (only sometimes) I feel that I am troubling this list with very simple questions the answer to which I always happen to find myself a little after...any solutions for that (you seem to be an omniscient person)!?

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Bert Gunter <bgunter.4567 at gmail.com>
Sent: Tuesday, December 27, 2022 11:39 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: Sarah Goslee <sarah.goslee at gmail.com>; R help Mailing list <r-help at r-project.org>
Subject: Re: [R] error in exists.....

You are confused about the list hierarchy. Perhaps this will explain:
> i <- 1
>  E <- new.env()
>   E$L <- list()  ## L is an empty list in E
>   i <- 1
>    E$L[[i]]$T1A1 <- Sys.time()
Error in `*tmp*`[[i]] : subscript out of bounds
## L is empty, so L[[1]] does not exist; is not a list;
## cannot have a value assigned to a component
## The following works:
## Create an empty list as a sublist of L
>  E$L[[1]] <- list()
## Now create and assign to a component of the empty list
>  E$L[[i]]$T1A1 <- Sys.time()
> E$L ## a list
[[1]]  ## whose first component is a list
[[1]]$T1A1 ## T1A1 named component of L[[1]]
[1] "2022-12-27 10:00:10 PST"

ergo, no conundra... (assuming I've understood you correctly)

Cheers,
Bert

On Tue, Dec 27, 2022 at 9:57 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> Dear Sarah,
>                      I had this also before the assignment of Sys.time():
>
> >     E$L[[i]] <- i
>
> After assignment of Sys.time():
>
> > E$L
> [[1]]
> [[1]][[1]]
> [1] 1
>
> [[1]]$T1A1
> [1] "2022-12-27 22:40:02 IST"
>
> regrets for not sharing this ......Can you reproduce it now?
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
> ________________________________
> From: Sarah Goslee <sarah.goslee at gmail.com>
> Sent: Tuesday, December 27, 2022 11:20 PM
> To: akshay kulkarni <akshay_e4 at hotmail.com>
> Cc: R help Mailing list <r-help at r-project.org>
> Subject: Re: [R] error in exists.....
>
> Hi,
>
> I can't create the desired object using the code you provided, but if
> I create it in two steps so that E$L[[i]]$T1A1 does exist, exist()
> returns TRUE.
>
> E <- new.env()
> E$L <- list()
> i <- 1
> E$L[[i]]$T1A1 <- Sys.time()
>
> # returns: Error in `*tmp*`[[i]] : subscript out of bounds
>
> E$L[[i]] <- list()
> E$L[[i]]$T1A1 <- Sys.time()
>
>
> exists("T1A1", where = E$L[[i]])
> # returns: [1] TRUE
>
>
> > str(E$L)
> List of 1
>  $ :List of 1
>   ..$ T1A1: POSIXct[1:1], format: "2022-12-27 12:47:26"
>
> Sarah
>
> On Tue, Dec 27, 2022 at 12:36 PM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
> >
> > Dear members,
> >                              I have the following code:
> > >  E <- new.env()
> > >  E$L <- list()
> > >  i <- 1
> > >   E$L[[i]]$T1A1 <- Sys.time()
> > > exists("T1A1", where = E$L[[i]])
> > Error in list2env(list(1, T1A1 = 1672161002.38743), NULL, <environment>) :
> >   attempt to use zero-length variable name
> >
> > I want the output of the exists() function to be TRUE. In any case:
> >
> > > E$L[[1]]$T1A1
> > [1] "2022-12-27 22:40:02 IST"
> >
> > Please help me solve this conundrum....
> >
> > Thanking you,
> > Yours sincerely,
> > AKSHAY M KULKARNI
> >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
>
>
> --
> Sarah Goslee (she/her)
> http://www.numberwright.com
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Dec 27 19:58:56 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 27 Dec 2022 10:58:56 -0800
Subject: [R] error in exists.....
In-Reply-To: <PU4P216MB1568E05BB848EBCCD28C7F51C8ED9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB15680590FF577F4927C5690CC8ED9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAM_vjunG=FmBLEXcwWT=i1FZL61r2mpEa9wzU6y+C-60D5pobA@mail.gmail.com>
 <PU4P216MB1568C6B561D6436E387BA883C8ED9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAGxFJbTtAtYjR3b96XKji6h+cy07M+uhQ4yo-ZJcFhvw78WESg@mail.gmail.com>
 <PU4P216MB1568E05BB848EBCCD28C7F51C8ED9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAGxFJbTG_BPB=SO-jiqe9Keru1XsOpiKTzAQ3SFhPMB0bFdCKA@mail.gmail.com>

There is no substitute for experience/knowledge; nor any universally
optimal strategy for debugging. But using the debugging tools that R
provides -- ?debug, ?traceback, ?recover (e.g. in the form of
options(error = utils::recover) ) -- should always be the first goto
(or maybe the second after carefully re-reading relevant Help docs).
However, the debugging tools would not have helped here afaics.

-- Bert

On Tue, Dec 27, 2022 at 10:22 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> Dear Bert,
>                    Yeah, it's working....Sometimes (only sometimes) I feel that I am troubling this list with very simple questions the answer to which I always happen to find myself a little after...any solutions for that (you seem to be an omniscient person)!?
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
> ________________________________
> From: Bert Gunter <bgunter.4567 at gmail.com>
> Sent: Tuesday, December 27, 2022 11:39 PM
> To: akshay kulkarni <akshay_e4 at hotmail.com>
> Cc: Sarah Goslee <sarah.goslee at gmail.com>; R help Mailing list <r-help at r-project.org>
> Subject: Re: [R] error in exists.....
>
> You are confused about the list hierarchy. Perhaps this will explain:
> > i <- 1
> >  E <- new.env()
> >   E$L <- list()  ## L is an empty list in E
> >   i <- 1
> >    E$L[[i]]$T1A1 <- Sys.time()
> Error in `*tmp*`[[i]] : subscript out of bounds
> ## L is empty, so L[[1]] does not exist; is not a list;
> ## cannot have a value assigned to a component
> ## The following works:
> ## Create an empty list as a sublist of L
> >  E$L[[1]] <- list()
> ## Now create and assign to a component of the empty list
> >  E$L[[i]]$T1A1 <- Sys.time()
> > E$L ## a list
> [[1]]  ## whose first component is a list
> [[1]]$T1A1 ## T1A1 named component of L[[1]]
> [1] "2022-12-27 10:00:10 PST"
>
> ergo, no conundra... (assuming I've understood you correctly)
>
> Cheers,
> Bert
>
> On Tue, Dec 27, 2022 at 9:57 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
> >
> > Dear Sarah,
> >                      I had this also before the assignment of Sys.time():
> >
> > >     E$L[[i]] <- i
> >
> > After assignment of Sys.time():
> >
> > > E$L
> > [[1]]
> > [[1]][[1]]
> > [1] 1
> >
> > [[1]]$T1A1
> > [1] "2022-12-27 22:40:02 IST"
> >
> > regrets for not sharing this ......Can you reproduce it now?
> >
> > Thanking you,
> > Yours sincerely,
> > AKSHAY M KULKARNI
> > ________________________________
> > From: Sarah Goslee <sarah.goslee at gmail.com>
> > Sent: Tuesday, December 27, 2022 11:20 PM
> > To: akshay kulkarni <akshay_e4 at hotmail.com>
> > Cc: R help Mailing list <r-help at r-project.org>
> > Subject: Re: [R] error in exists.....
> >
> > Hi,
> >
> > I can't create the desired object using the code you provided, but if
> > I create it in two steps so that E$L[[i]]$T1A1 does exist, exist()
> > returns TRUE.
> >
> > E <- new.env()
> > E$L <- list()
> > i <- 1
> > E$L[[i]]$T1A1 <- Sys.time()
> >
> > # returns: Error in `*tmp*`[[i]] : subscript out of bounds
> >
> > E$L[[i]] <- list()
> > E$L[[i]]$T1A1 <- Sys.time()
> >
> >
> > exists("T1A1", where = E$L[[i]])
> > # returns: [1] TRUE
> >
> >
> > > str(E$L)
> > List of 1
> >  $ :List of 1
> >   ..$ T1A1: POSIXct[1:1], format: "2022-12-27 12:47:26"
> >
> > Sarah
> >
> > On Tue, Dec 27, 2022 at 12:36 PM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
> > >
> > > Dear members,
> > >                              I have the following code:
> > > >  E <- new.env()
> > > >  E$L <- list()
> > > >  i <- 1
> > > >   E$L[[i]]$T1A1 <- Sys.time()
> > > > exists("T1A1", where = E$L[[i]])
> > > Error in list2env(list(1, T1A1 = 1672161002.38743), NULL, <environment>) :
> > >   attempt to use zero-length variable name
> > >
> > > I want the output of the exists() function to be TRUE. In any case:
> > >
> > > > E$L[[1]]$T1A1
> > > [1] "2022-12-27 22:40:02 IST"
> > >
> > > Please help me solve this conundrum....
> > >
> > > Thanking you,
> > > Yours sincerely,
> > > AKSHAY M KULKARNI
> > >
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> >
> >
> >
> > --
> > Sarah Goslee (she/her)
> > http://www.numberwright.com
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.


From therne@u @end|ng |rom m@yo@edu  Tue Dec 27 21:32:14 2022
From: therne@u @end|ng |rom m@yo@edu (Therneau, Terry M., Ph.D.)
Date: Tue, 27 Dec 2022 14:32:14 -0600
Subject: [R] MCMC tools
Message-ID: <d35801$j8uqfh@ironport10.mayo.edu>

Is there a convenient package that computes standard covergence summaries for and MCMC 
run???? This is something that I likely knew once and have now forgotton.

 ?More detail:? I'm trying to understand the MCMC done by a particular model called 
Subtype and Stage Inference (SuStaIn), suffice it to say that I am cautious of some 
details.??? The model doesn't fit into the standard packages, so I've set it up and run my 
own Metropolis chains.?? I don't want to expend energy also creating R-hat, ESS, and other 
sensible summaries; even more so to find the inevitable programming mistakes I'll make if 
I create them myself.

 ?For the truly curious.?? I have measurments of tau depostion for 86 brain regions (43 * 
left/right) of interest from 1925 scans. One hypothesis in dementia research is that tau 
deposition occurs over time, in a pattern;? there is likely more than one pattern.??? The 
algorithm is looking a permutations of the 86 regions, in search of a small collection 
that best fits all the subjects.??? There is a general background of statistical work that 
has shown that ranking is a hard problem, in the sense of having a small variance for 
individual ranks.?? SuStaIn tends to give small variances.

Terry T.

-- 
Terry M Therneau, PhD
Department of Quantitative Health Sciences
Mayo Clinic
therneau at mayo.edu

"TERR-ree THUR-noh"

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Dec 27 21:38:05 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 27 Dec 2022 12:38:05 -0800
Subject: [R] extract from a list of lists
In-Reply-To: <CAFEqCdxPDSqpr9LoXi_-LG4dyOCJRv14vqD35c3wJOTDEL4=wQ@mail.gmail.com>
References: <d35801$j8t8qb@ironport10.mayo.edu>
 <CAFEqCdxPDSqpr9LoXi_-LG4dyOCJRv14vqD35c3wJOTDEL4=wQ@mail.gmail.com>
Message-ID: <CAGxFJbTJusWuKxv8UoW3Ruk1punMY=oeUoUU=iOfA7jcBWyRiw@mail.gmail.com>

Well, I prefer Greg's approach, but if you want to avoid calls to $ or
`[[` then you could do:

unlist(fits)[ rep(names(fits[[1]]) == 'iter', length(fits))]


Cheers,
Bert

On Tue, Dec 27, 2022 at 9:46 AM Greg Snow <538280 at gmail.com> wrote:
>
> Another option is the map family of functions in the purrr package
> (yes, this depends on another package being loaded, which may affect
> things if you are including this in your own package, creating a
> dependency).
>
> In map and friends, if the "function" is a string or integer, then it
> is taken as the piece to be extracted, so you should be able to do
> something like:
>
> library(purrr)
> map(fits, 'iter')
> # or
> map_int(fits, 'iter')
> # or
> map_dbl(fits, 'iter')
>
> which of the last 2 to use depends on how `iter` is stored.
>
> On Tue, Dec 27, 2022 at 10:16 AM Therneau, Terry M., Ph.D. via R-help
> <r-help at r-project.org> wrote:
> >
> > I not uncommonly have the following paradym
> >     fits <- lapply(argument, function)
> >
> > resulting in a list of function results.   Often, the outer call is to mclapply, and the
> > function encodes some long calculation, e.g. multiple chains in an MCMC.
> > Assume for illustration that each function returns a list with elements   beta, loglik,  iter.
> >
> > Then  sapply(fits,  function(x) x$iter)
> > will give me a vector, with the number of iterations used by each instance.
> >
> > I've often been suspicious that there is some simple shorthand for the "grab all the
> > elements named iter" that skips the explicit x$iter function.   Am I indeed overlooking
> > something?    I don't expect a speed increase, just cleaner code.
> >
> > Terry T.
> >
> > --
> > Terry M Therneau, PhD
> > Department of Quantitative Health Sciences
> > Mayo Clinic
> > therneau at mayo.edu
> >
> > "TERR-ree THUR-noh"
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
>
>
> --
> Gregory (Greg) L. Snow Ph.D.
> 538280 at gmail.com
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From therne@u @end|ng |rom m@yo@edu  Tue Dec 27 22:10:07 2022
From: therne@u @end|ng |rom m@yo@edu (Therneau, Terry M., Ph.D.)
Date: Tue, 27 Dec 2022 15:10:07 -0600
Subject: [R] extract from a list of lists
In-Reply-To: <CAGxFJbTJusWuKxv8UoW3Ruk1punMY=oeUoUU=iOfA7jcBWyRiw@mail.gmail.com>
References: <d35801$j8t8qb@ironport10.mayo.edu>
 <CAFEqCdxPDSqpr9LoXi_-LG4dyOCJRv14vqD35c3wJOTDEL4=wQ@mail.gmail.com>
 <CAGxFJbTJusWuKxv8UoW3Ruk1punMY=oeUoUU=iOfA7jcBWyRiw@mail.gmail.com>
Message-ID: <d35801$j8v1f3@ironport10.mayo.edu>

Thanks everyone for prodding my gray matter, which seems to be getting stiffer as I 
approach 70 (< 90 days).

 ?--? I'll continue to use the $ or [[ forms.?? That will suffice.

--? I thought there might be a base R variant, e.g. something like? extract( list, 
element-name); probably cross talk in my brain from the rstan library

-- Gregg's note shows such a function in purr.? But I rather like having as few 
dependencies as possible in a package, one usage is normally not enough, at least for 
something this simple.

Terry T.

On 12/27/22 14:38, Bert Gunter wrote:
> Well, I prefer Greg's approach, but if you want to avoid calls to $ or
> `[[` then you could do:
>
> unlist(fits)[ rep(names(fits[[1]]) == 'iter', length(fits))]
>
>
> Cheers,
> Bert
>
> On Tue, Dec 27, 2022 at 9:46 AM Greg Snow<538280 at gmail.com>  wrote:
>> Another option is the map family of functions in the purrr package
>> (yes, this depends on another package being loaded, which may affect
>> things if you are including this in your own package, creating a
>> dependency).
>>
>> In map and friends, if the "function" is a string or integer, then it
>> is taken as the piece to be extracted, so you should be able to do
>> something like:
>>
>> library(purrr)
>> map(fits, 'iter')
>> # or
>> map_int(fits, 'iter')
>> # or
>> map_dbl(fits, 'iter')
>>
>> which of the last 2 to use depends on how `iter` is stored.
>>
>> On Tue, Dec 27, 2022 at 10:16 AM Therneau, Terry M., Ph.D. via R-help
>> <r-help at r-project.org>  wrote:
>>> I not uncommonly have the following paradym
>>>      fits <- lapply(argument, function)
>>>
>>> resulting in a list of function results.   Often, the outer call is to mclapply, and the
>>> function encodes some long calculation, e.g. multiple chains in an MCMC.
>>> Assume for illustration that each function returns a list with elements   beta, loglik,  iter.
>>>
>>> Then  sapply(fits,  function(x) x$iter)
>>> will give me a vector, with the number of iterations used by each instance.
>>>
>>> I've often been suspicious that there is some simple shorthand for the "grab all the
>>> elements named iter" that skips the explicit x$iter function.   Am I indeed overlooking
>>> something?    I don't expect a speed increase, just cleaner code.
>>>
>>> Terry T.
>>>
>>> --
>>> Terry M Therneau, PhD
>>> Department of Quantitative Health Sciences
>>> Mayo Clinic
>>> therneau at mayo.edu
>>>
>>> "TERR-ree THUR-noh"
>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org  mailing list -- To UNSUBSCRIBE and more, see
>>> https://nam12.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctherneau%40mayo.edu%7Cebbda887f4b94223376608dae84a58ae%7Ca25fff9c3f634fb29a8ad9bdd0321f9a%7C0%7C0%7C638077703266213025%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=wksTglkeQKmMSWWKHLsUijH5A25cH%2FuwxSNBOeNr9Sg%3D&reserved=0
>>> PLEASE do read the posting guidehttps://nam12.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctherneau%40mayo.edu%7Cebbda887f4b94223376608dae84a58ae%7Ca25fff9c3f634fb29a8ad9bdd0321f9a%7C0%7C0%7C638077703266213025%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=9GASHCZVgnzNqAUrWimS7UphiqjYLOf50M1qWv6jeN0%3D&reserved=0
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>>
>> --
>> Gregory (Greg) L. Snow Ph.D.
>> 538280 at gmail.com
>>
>> ______________________________________________
>> R-help at r-project.org  mailing list -- To UNSUBSCRIBE and more, see
>> https://nam12.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctherneau%40mayo.edu%7Cebbda887f4b94223376608dae84a58ae%7Ca25fff9c3f634fb29a8ad9bdd0321f9a%7C0%7C0%7C638077703266213025%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=wksTglkeQKmMSWWKHLsUijH5A25cH%2FuwxSNBOeNr9Sg%3D&reserved=0
>> PLEASE do read the posting guidehttps://nam12.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctherneau%40mayo.edu%7Cebbda887f4b94223376608dae84a58ae%7Ca25fff9c3f634fb29a8ad9bdd0321f9a%7C0%7C0%7C638077703266213025%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=9GASHCZVgnzNqAUrWimS7UphiqjYLOf50M1qWv6jeN0%3D&reserved=0
>> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From w||||@mwdun|@p @end|ng |rom gm@||@com  Tue Dec 27 23:27:03 2022
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Tue, 27 Dec 2022 14:27:03 -0800
Subject: [R] extract from a list of lists
In-Reply-To: <d35801$j8v1f3@ironport10.mayo.edu>
References: <d35801$j8t8qb@ironport10.mayo.edu>
 <CAFEqCdxPDSqpr9LoXi_-LG4dyOCJRv14vqD35c3wJOTDEL4=wQ@mail.gmail.com>
 <CAGxFJbTJusWuKxv8UoW3Ruk1punMY=oeUoUU=iOfA7jcBWyRiw@mail.gmail.com>
 <d35801$j8v1f3@ironport10.mayo.edu>
Message-ID: <CAHqSRuTWe3_km19FiWmrypgz7Wnr=R058Ou3uB5ETKeSErakDw@mail.gmail.com>

I find your original sapply(List, function(element)element$name) easy to
understand.  However replacing sapply with vapply makes for more robust
code.  vapply requires you to supply the expected mode (type) and length of
element$name and if any of the elements don't comply with that, vapply
gives an error (sapply returns a list in this case).  Also, for lists of
length zero, it returns a 0-long result of the mode you specified (instead
of sapply's list()).  In the usual happy case it returns what sapply does.
 It happens to be a bit faster than sapply and uses less memory, but I
think the checks that it does make it worth using instead of sapply.

E.g.,
> L <- list(list(A=1, B=c(TRUE,FALSE)), list(A=2, B=c(FALSE,FALSE)),
list(A=3))
> vapply(L, function(el)el$A, FUN.VALUE=numeric(1))
[1] 1 2 3
> vapply(L, function(el)el$B, FUN.VALUE=logical(2))
Error in vapply(L, function(el) el$B, FUN.VALUE = logical(2)) :
  values must be length 2,
 but FUN(X[[3]]) result is length 0
> vapply(L, function(el){ z <- el$B; if (is.null(z)) rep(NA,2) else z},
FUN.VALUE=logical(2))
      [,1]  [,2] [,3]
[1,]  TRUE FALSE   NA
[2,] FALSE FALSE   NA

-Bill

On Tue, Dec 27, 2022 at 1:10 PM Therneau, Terry M., Ph.D. via R-help <
r-help at r-project.org> wrote:

> Thanks everyone for prodding my gray matter, which seems to be getting
> stiffer as I
> approach 70 (< 90 days).
>
>   --  I'll continue to use the $ or [[ forms.   That will suffice.
>
> --  I thought there might be a base R variant, e.g. something like
> extract( list,
> element-name); probably cross talk in my brain from the rstan library
>
> -- Gregg's note shows such a function in purr.  But I rather like having
> as few
> dependencies as possible in a package, one usage is normally not enough,
> at least for
> something this simple.
>
> Terry T.
>
> On 12/27/22 14:38, Bert Gunter wrote:
> > Well, I prefer Greg's approach, but if you want to avoid calls to $ or
> > `[[` then you could do:
> >
> > unlist(fits)[ rep(names(fits[[1]]) == 'iter', length(fits))]
> >
> >
> > Cheers,
> > Bert
> >
> > On Tue, Dec 27, 2022 at 9:46 AM Greg Snow<538280 at gmail.com>  wrote:
> >> Another option is the map family of functions in the purrr package
> >> (yes, this depends on another package being loaded, which may affect
> >> things if you are including this in your own package, creating a
> >> dependency).
> >>
> >> In map and friends, if the "function" is a string or integer, then it
> >> is taken as the piece to be extracted, so you should be able to do
> >> something like:
> >>
> >> library(purrr)
> >> map(fits, 'iter')
> >> # or
> >> map_int(fits, 'iter')
> >> # or
> >> map_dbl(fits, 'iter')
> >>
> >> which of the last 2 to use depends on how `iter` is stored.
> >>
> >> On Tue, Dec 27, 2022 at 10:16 AM Therneau, Terry M., Ph.D. via R-help
> >> <r-help at r-project.org>  wrote:
> >>> I not uncommonly have the following paradym
> >>>      fits <- lapply(argument, function)
> >>>
> >>> resulting in a list of function results.   Often, the outer call is to
> mclapply, and the
> >>> function encodes some long calculation, e.g. multiple chains in an
> MCMC.
> >>> Assume for illustration that each function returns a list with
> elements   beta, loglik,  iter.
> >>>
> >>> Then  sapply(fits,  function(x) x$iter)
> >>> will give me a vector, with the number of iterations used by each
> instance.
> >>>
> >>> I've often been suspicious that there is some simple shorthand for the
> "grab all the
> >>> elements named iter" that skips the explicit x$iter function.   Am I
> indeed overlooking
> >>> something?    I don't expect a speed increase, just cleaner code.
> >>>
> >>> Terry T.
> >>>
> >>> --
> >>> Terry M Therneau, PhD
> >>> Department of Quantitative Health Sciences
> >>> Mayo Clinic
> >>> therneau at mayo.edu
> >>>
> >>> "TERR-ree THUR-noh"
> >>>
> >>>          [[alternative HTML version deleted]]
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org  mailing list -- To UNSUBSCRIBE and more, see
> >>>
> https://nam12.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctherneau%40mayo.edu%7Cebbda887f4b94223376608dae84a58ae%7Ca25fff9c3f634fb29a8ad9bdd0321f9a%7C0%7C0%7C638077703266213025%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=wksTglkeQKmMSWWKHLsUijH5A25cH%2FuwxSNBOeNr9Sg%3D&reserved=0
> >>> PLEASE do read the posting guidehttps://
> nam12.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctherneau%40mayo.edu%7Cebbda887f4b94223376608dae84a58ae%7Ca25fff9c3f634fb29a8ad9bdd0321f9a%7C0%7C0%7C638077703266213025%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=9GASHCZVgnzNqAUrWimS7UphiqjYLOf50M1qWv6jeN0%3D&reserved=0
> >>> and provide commented, minimal, self-contained, reproducible code.
> >>
> >>
> >> --
> >> Gregory (Greg) L. Snow Ph.D.
> >> 538280 at gmail.com
> >>
> >> ______________________________________________
> >> R-help at r-project.org  mailing list -- To UNSUBSCRIBE and more, see
> >>
> https://nam12.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctherneau%40mayo.edu%7Cebbda887f4b94223376608dae84a58ae%7Ca25fff9c3f634fb29a8ad9bdd0321f9a%7C0%7C0%7C638077703266213025%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=wksTglkeQKmMSWWKHLsUijH5A25cH%2FuwxSNBOeNr9Sg%3D&reserved=0
> >> PLEASE do read the posting guidehttps://
> nam12.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctherneau%40mayo.edu%7Cebbda887f4b94223376608dae84a58ae%7Ca25fff9c3f634fb29a8ad9bdd0321f9a%7C0%7C0%7C638077703266213025%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=9GASHCZVgnzNqAUrWimS7UphiqjYLOf50M1qWv6jeN0%3D&reserved=0
> >> and provide commented, minimal, self-contained, reproducible code.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


