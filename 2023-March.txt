From pd@me@ @end|ng |rom cb@@dk  Wed Mar  1 13:04:56 2023
From: pd@me@ @end|ng |rom cb@@dk (Peter Dalgaard)
Date: Wed, 1 Mar 2023 12:04:56 +0000
Subject: [R] [Rd] R 4.2.3 scheduled for March 15
Message-ID: <0698828C-0FC0-421C-92DC-045717E4F7A2@cbs.dk>

Full schedule available on developer.r-project.org in a short while.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com

_______________________________________________
R-announce at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-announce


From georgebr|d@94 @end|ng |rom gm@||@com  Wed Mar  1 15:21:24 2023
From: georgebr|d@94 @end|ng |rom gm@||@com (George Brida)
Date: Wed, 1 Mar 2023 15:21:24 +0100
Subject: [R] Shaded area
Message-ID: <CAA6O3zgwrDD81LwB-3i9986wmpbT8=Hr=Dfx2P2=jBb96-Mqfw@mail.gmail.com>

Dear R users,

I have an xlsx file (attached to this mail) that shows the values of a
"der" series observed on a daily basis from January 1, 2017 to January 25,
2017. This series is strictly positive during two periods: from January 8,
2017 to January 11, 2017 and from January 16, 2017 to January 20, 2017. I
would like to plot the series with two shaded areas corresponding to the
positivity of the series. Specifically, I would like to draw 4 vertical
lines intersecting the x-axis in the 4 dates mentioned above and shade the
two areas of positivity. Thanks for your help.

From petr@p|k@| @end|ng |rom prechez@@cz  Wed Mar  1 15:57:56 2023
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Wed, 1 Mar 2023 14:57:56 +0000
Subject: [R] Shaded area
In-Reply-To: <CAA6O3zgwrDD81LwB-3i9986wmpbT8=Hr=Dfx2P2=jBb96-Mqfw@mail.gmail.com>
References: <CAA6O3zgwrDD81LwB-3i9986wmpbT8=Hr=Dfx2P2=jBb96-Mqfw@mail.gmail.com>
Message-ID: <efa39ed71706461397e72ff44fe6d070@SRVEXCHCM1302.precheza.cz>

Hallo

Excel attachment is not allowed here, but shading area is answered many times elsewhere. Use something like . "shading area r" in google.

See eg.
https://www.geeksforgeeks.org/how-to-shade-a-graph-in-r/

Cheers Petr

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of George Brida
Sent: Wednesday, March 1, 2023 3:21 PM
To: r-help at r-project.org
Subject: [R] Shaded area

Dear R users,

I have an xlsx file (attached to this mail) that shows the values of a "der" series observed on a daily basis from January 1, 2017 to January 25, 2017. This series is strictly positive during two periods: from January 8,
2017 to January 11, 2017 and from January 16, 2017 to January 20, 2017. I would like to plot the series with two shaded areas corresponding to the positivity of the series. Specifically, I would like to draw 4 vertical lines intersecting the x-axis in the 4 dates mentioned above and shade the two areas of positivity. Thanks for your help.
______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.
Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information about processing and protection of business partner?s personal data are available on website: https://www.precheza.cz/en/personal-data-protection-principles/
D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any documents attached to it may be confidential and are subject to the legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/


From jrkr|de@u @end|ng |rom gm@||@com  Fri Mar  3 13:57:33 2023
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Fri, 3 Mar 2023 07:57:33 -0500
Subject: [R] Shaded area
In-Reply-To: <efa39ed71706461397e72ff44fe6d070@SRVEXCHCM1302.precheza.cz>
References: <CAA6O3zgwrDD81LwB-3i9986wmpbT8=Hr=Dfx2P2=jBb96-Mqfw@mail.gmail.com>
 <efa39ed71706461397e72ff44fe6d070@SRVEXCHCM1302.precheza.cz>
Message-ID: <CAKZQJMAgi_1Rq8QZCD1O77XZouj910sm-uDsWRq_=71kLB6dzQ@mail.gmail.com>

As Peter says, the list is very cautious about what types of files it
allows. A handy way to supply some sample data is the dput() function.  In
the case of a large dataset something like dput(head(mydata, 100)) should
supply the data we need. Just do dput(mydata) where *mydata* is your data.
Copy the output and paste it here.

On Wed, 1 Mar 2023 at 09:58, PIKAL Petr <petr.pikal at precheza.cz> wrote:

> Hallo
>
> Excel attachment is not allowed here, but shading area is answered many
> times elsewhere. Use something like . "shading area r" in google.
>
> See eg.
> https://www.geeksforgeeks.org/how-to-shade-a-graph-in-r/
>
> Cheers Petr
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of George Brida
> Sent: Wednesday, March 1, 2023 3:21 PM
> To: r-help at r-project.org
> Subject: [R] Shaded area
>
> Dear R users,
>
> I have an xlsx file (attached to this mail) that shows the values of a
> "der" series observed on a daily basis from January 1, 2017 to January 25,
> 2017. This series is strictly positive during two periods: from January 8,
> 2017 to January 11, 2017 and from January 16, 2017 to January 20, 2017. I
> would like to plot the series with two shaded areas corresponding to the
> positivity of the series. Specifically, I would like to draw 4 vertical
> lines intersecting the x-axis in the 4 dates mentioned above and shade the
> two areas of positivity. Thanks for your help.
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch
> partner? PRECHEZA a.s. jsou zve?ejn?ny na:
> https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information
> about processing and protection of business partner?s personal data are
> available on website:
> https://www.precheza.cz/en/personal-data-protection-principles/
> D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou
> d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en?
> odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any
> documents attached to it may be confidential and are subject to the legally
> binding disclaimer: https://www.precheza.cz/en/01-disclaimer/
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
John Kane
Kingston ON Canada

	[[alternative HTML version deleted]]


From |r@nz@h@ert| @end|ng |rom tum@de  Sat Mar  4 10:16:12 2023
From: |r@nz@h@ert| @end|ng |rom tum@de (=?UTF-8?Q?Franz_H=c3=a4rtl?=)
Date: Sat, 4 Mar 2023 10:16:12 +0100
Subject: [R] nlme varFixed
Message-ID: <d2e2803a-cf26-08b0-28eb-61a3fc00a4eb@mytum.de>

Dear R-project team,

I have a problem with the function varFixed() of the nlme-package.

I used it with the squid-data of Zuur et. al 2009 (chapter 4), to fix 
increasing residuals (heterogenetiy) (see graph in the email)

I get the message '

Variance function structure of class varFixed with no parameters, or 
uninitialized

Could you help me please?

Kind regards

Franz

From ||@t@ @end|ng |rom dewey@myzen@co@uk  Sat Mar  4 14:26:13 2023
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Sat, 4 Mar 2023 13:26:13 +0000
Subject: [R] nlme varFixed
In-Reply-To: <d2e2803a-cf26-08b0-28eb-61a3fc00a4eb@mytum.de>
References: <d2e2803a-cf26-08b0-28eb-61a3fc00a4eb@mytum.de>
Message-ID: <5c85268f-33eb-27e6-cafe-25fe81c77729@dewey.myzen.co.uk>

Dear Franz

Only attachments of specific types are allowed on the R lists and yours 
did not come through. It might be necessary to show your code as well.

Have you thought of trying the mailing list dedicated to mixed models?

https://stat.ethz.ch/mailman/listinfo/r-sig-mixed-models

Michael

On 04/03/2023 09:16, Franz H?rtl wrote:
> Dear R-project team,
> 
> I have a problem with the function varFixed() of the nlme-package.
> 
> I used it with the squid-data of Zuur et. al 2009 (chapter 4), to fix 
> increasing residuals (heterogenetiy) (see graph in the email)
> 
> I get the message '
> 
> Variance function structure of class varFixed with no parameters, or 
> uninitialized
> 
> Could you help me please?
> 
> Kind regards
> 
> Franz
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From @|gbert @end|ng |rom w|w|@hu-ber||n@de  Sat Mar  4 16:45:07 2023
From: @|gbert @end|ng |rom w|w|@hu-ber||n@de (Sigbert Klinke)
Date: Sat, 4 Mar 2023 16:45:07 +0100
Subject: [R] legend: interplay between title and y.intersp
Message-ID: <5c4d9569-f34f-5891-9781-33fd834f6cdc@wiwi.hu-berlin.de>

Hi,

my MWE is not working as expected:

plot(c(0,1), c(0,1), type="n")

legend("top", legend=c("", "", "a"), col=c("blue", "red", "green"), 
title="test", y.intersp=0.2, lwd=1)

The lines are not below the title. I want (nearby) lines as in the plot, 
but below the title. Is there a way to achieve this?

Thanks Sigbert


From bgunter@4567 @end|ng |rom gm@||@com  Sat Mar  4 17:59:26 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 4 Mar 2023 08:59:26 -0800
Subject: [R] legend: interplay between title and y.intersp
In-Reply-To: <5c4d9569-f34f-5891-9781-33fd834f6cdc@wiwi.hu-berlin.de>
References: <5c4d9569-f34f-5891-9781-33fd834f6cdc@wiwi.hu-berlin.de>
Message-ID: <CAGxFJbRekx8kSFjqDTEwo6rivNj6HS7h5G_jp7fw6-DMBpRCEQ@mail.gmail.com>

Set the legend position explicitly with x and y values and add xpd = TRUE
to the legend call to clip the plot to the figure region and not the plot
region (the default). Something like this (you may have to fool around with
y.intersp, etc. to allow enough space between the legend lines):

plot(c(0,1), c(0,1), type="n")

legend(x = .4, y = 1.25, legend=c("", "", "a"), col=c("blue", "red",
"green"), xpd = TRUE, lty = 1, y.intersp= .75, title = 'test')

Cheers,
Bert

Cheers,
Bert


On Sat, Mar 4, 2023 at 7:45?AM Sigbert Klinke <sigbert at wiwi.hu-berlin.de>
wrote:

> Hi,
>
> my MWE is not working as expected:
>
> plot(c(0,1), c(0,1), type="n")
>
> legend("top", legend=c("", "", "a"), col=c("blue", "red", "green"),
> title="test", y.intersp=0.2, lwd=1)
>
> The lines are not below the title. I want (nearby) lines as in the plot,
> but below the title. Is there a way to achieve this?
>
> Thanks Sigbert
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @|gbert @end|ng |rom w|w|@hu-ber||n@de  Sun Mar  5 08:39:41 2023
From: @|gbert @end|ng |rom w|w|@hu-ber||n@de (Sigbert Klinke)
Date: Sun, 5 Mar 2023 08:39:41 +0100
Subject: [R] legend: interplay between title and y.intersp
In-Reply-To: <CAGxFJbRekx8kSFjqDTEwo6rivNj6HS7h5G_jp7fw6-DMBpRCEQ@mail.gmail.com>
References: <5c4d9569-f34f-5891-9781-33fd834f6cdc@wiwi.hu-berlin.de>
 <CAGxFJbRekx8kSFjqDTEwo6rivNj6HS7h5G_jp7fw6-DMBpRCEQ@mail.gmail.com>
Message-ID: <dda74c9a-d8ac-61bb-c466-0d4e03b01aae@wiwi.hu-berlin.de>

Hi,

thanks, but this does not solve the problem. If I make y.intersp large 
enough then it works properly. Maybe I was not clear enough: I want to 
have the small distance between the lines and no overlap between the 
title and the lines.

Sigbert

Am 04.03.23 um 17:59 schrieb Bert Gunter:
> Set the legend position explicitly with x and y values and add xpd = TRUE
> to the legend call to clip the plot to the figure region and not the plot
> region (the default). Something like this (you may have to fool around with
> y.intersp, etc. to allow enough space between the legend lines):
> 
> plot(c(0,1), c(0,1), type="n")
> 
> legend(x = .4, y = 1.25, legend=c("", "", "a"), col=c("blue", "red",
> "green"), xpd = TRUE, lty = 1, y.intersp= .75, title = 'test')
> 
> Cheers,
> Bert
> 
> Cheers,
> Bert
> 
> 
> On Sat, Mar 4, 2023 at 7:45?AM Sigbert Klinke <sigbert at wiwi.hu-berlin.de>
> wrote:
> 
>> Hi,
>>
>> my MWE is not working as expected:
>>
>> plot(c(0,1), c(0,1), type="n")
>>
>> legend("top", legend=c("", "", "a"), col=c("blue", "red", "green"),
>> title="test", y.intersp=0.2, lwd=1)
>>
>> The lines are not below the title. I want (nearby) lines as in the plot,
>> but below the title. Is there a way to achieve this?
>>
>> Thanks Sigbert
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 

-- 
https://hu.berlin/sk
https://www.stat.de/faqs
https://hu.berlin/mmstat
https://hu.berlin/mmstat-ar


From ||@her @end|ng |rom p|e@@th@n@com  Sat Mar  4 23:36:23 2023
From: ||@her @end|ng |rom p|e@@th@n@com (Dennis Fisher)
Date: Sat, 4 Mar 2023 14:36:23 -0800
Subject: [R] VT-100 terminal escape sequences
Message-ID: <D1088969-EEA7-4EAA-B1E5-9BDC21B2F4F6@plessthan.com>

R 4.2.1
OS X

Colleagues

I am using XOJO (formerly known as RealBasic) to create a GUI -- R code generates the text that appears in the GUI.

Recently, VT-100 terminal control escape sequences appeared in the text, e.g.,:
         [?25h  TEXT
    [?25h[?25h	TEXT
It is not clear to me if the problem is generated by R or by XOJO.  And I did not track whether this began following installation of a new version of R or of XOJO (with no changes in the underlying code for either).

Of note, when I run the R code in a terminal in OS X, those errant characters do not appear.

I would like the 
	[?25h
text to disappear.  

If the problem originates in XOJO, I assume that there is nothing that can be done in R to solve the problem.  But, if there is something that can be done in my R code, it would be useful to know about it.

Dennis

Dennis Fisher MD
P < (The "P Less Than" Company)
Phone / Fax: 1-866-PLessThan (1-866-753-7784)
www.PLessThan.com





	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Sun Mar  5 16:29:37 2023
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Sun, 5 Mar 2023 18:29:37 +0300
Subject: [R] VT-100 terminal escape sequences
In-Reply-To: <D1088969-EEA7-4EAA-B1E5-9BDC21B2F4F6@plessthan.com>
References: <D1088969-EEA7-4EAA-B1E5-9BDC21B2F4F6@plessthan.com>
Message-ID: <20230305182937.67c38d72@Tarkus>

On Sat, 4 Mar 2023 14:36:23 -0800
Dennis Fisher <fisher at plessthan.com> wrote:

> R code generates the text that appears in the GUI.

How is R being run? As a child process? How does the XOJO program
interact with it?

> Recently, VT-100 terminal control escape sequences appeared in the
> text, e.g.,:
>          [?25h  TEXT
>     [?25h[?25h	TEXT
> It is not clear to me if the problem is generated by R or by XOJO.

"ESC [ ? 25 h" stands for "make the cursor visible". It may be produced
by the readline implementation that R links to, depending on how the
process is launched, but I don't think that R itself is generating it.

-- 
Best regards,
Ivan


From @|gbert @end|ng |rom w|w|@hu-ber||n@de  Mon Mar  6 11:34:36 2023
From: @|gbert @end|ng |rom w|w|@hu-ber||n@de (Sigbert Klinke)
Date: Mon, 6 Mar 2023 11:34:36 +0100
Subject: [R] legend: interplay between title and y.intersp
In-Reply-To: <CAGxFJbRVeCqNeviVNJhTbiJ8C9sa5NKSTy=pR9gtLQ+xRCxgBA@mail.gmail.com>
References: <5c4d9569-f34f-5891-9781-33fd834f6cdc@wiwi.hu-berlin.de>
 <CAGxFJbRekx8kSFjqDTEwo6rivNj6HS7h5G_jp7fw6-DMBpRCEQ@mail.gmail.com>
 <dda74c9a-d8ac-61bb-c466-0d4e03b01aae@wiwi.hu-berlin.de>
 <CAGxFJbRVeCqNeviVNJhTbiJ8C9sa5NKSTy=pR9gtLQ+xRCxgBA@mail.gmail.com>
Message-ID: <d820d24d-559a-2add-4baa-7f82d859de17@wiwi.hu-berlin.de>

Hi,

I think you are right, legend cannot do it. I have now created my own 
legend function where I changed only one line and now it works the way I 
want it to. But I'm not sure if that might not have other side effects.



I have the impression that the legend and the title start at the same 
y-position (try y.intersp=0). Only if y.intersp is big enough, then it 
leads to a non-overlap of title and legend.

Thanks a lot

Sigbert

Am 05.03.23 um 16:20 schrieb Bert Gunter:
> Don't think you can do that.
> But maybe someone else will show that I'm wrong.
> 
> -- Bert
> 
> On Sat, Mar 4, 2023 at 11:39?PM Sigbert Klinke <sigbert at wiwi.hu-berlin.de>
> wrote:
> 
>> Hi,
>>
>> thanks, but this does not solve the problem. If I make y.intersp large
>> enough then it works properly. Maybe I was not clear enough: I want to
>> have the small distance between the lines and no overlap between the
>> title and the lines.
>>
>> Sigbert
>>
>> Am 04.03.23 um 17:59 schrieb Bert Gunter:
>>> Set the legend position explicitly with x and y values and add xpd = TRUE
>>> to the legend call to clip the plot to the figure region and not the plot
>>> region (the default). Something like this (you may have to fool around
>> with
>>> y.intersp, etc. to allow enough space between the legend lines):
>>>
>>> plot(c(0,1), c(0,1), type="n")
>>>
>>> legend(x = .4, y = 1.25, legend=c("", "", "a"), col=c("blue", "red",
>>> "green"), xpd = TRUE, lty = 1, y.intersp= .75, title = 'test')
>>>
>>> Cheers,
>>> Bert
>>>
>>> Cheers,
>>> Bert
>>>
>>>
>>> On Sat, Mar 4, 2023 at 7:45?AM Sigbert Klinke <sigbert at wiwi.hu-berlin.de
>>>
>>> wrote:
>>>
>>>> Hi,
>>>>
>>>> my MWE is not working as expected:
>>>>
>>>> plot(c(0,1), c(0,1), type="n")
>>>>
>>>> legend("top", legend=c("", "", "a"), col=c("blue", "red", "green"),
>>>> title="test", y.intersp=0.2, lwd=1)
>>>>
>>>> The lines are not below the title. I want (nearby) lines as in the plot,
>>>> but below the title. Is there a way to achieve this?
>>>>
>>>> Thanks Sigbert
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>
>>
>> --
>> https://hu.berlin/sk
>> https://www.stat.de/faqs
>> https://hu.berlin/mmstat
>> https://hu.berlin/mmstat-ar
>>
>>
> 

-- 
https://hu.berlin/sk
https://www.stat.de/faqs
https://hu.berlin/mmstat
https://hu.berlin/mmstat-ar

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Rplot.png
Type: image/png
Size: 12444 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20230306/6182dff4/attachment.png>

From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Mar  6 13:08:18 2023
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 6 Mar 2023 13:08:18 +0100
Subject: [R] legend: interplay between title and y.intersp
In-Reply-To: <d820d24d-559a-2add-4baa-7f82d859de17@wiwi.hu-berlin.de>
References: <5c4d9569-f34f-5891-9781-33fd834f6cdc@wiwi.hu-berlin.de>
 <CAGxFJbRekx8kSFjqDTEwo6rivNj6HS7h5G_jp7fw6-DMBpRCEQ@mail.gmail.com>
 <dda74c9a-d8ac-61bb-c466-0d4e03b01aae@wiwi.hu-berlin.de>
 <CAGxFJbRVeCqNeviVNJhTbiJ8C9sa5NKSTy=pR9gtLQ+xRCxgBA@mail.gmail.com>
 <d820d24d-559a-2add-4baa-7f82d859de17@wiwi.hu-berlin.de>
Message-ID: <091ea70d-4429-9a90-18d4-209f789d3443@statistik.tu-dortmund.de>

What about

  plot(c(0,1), c(0,1), type="n")
  legend("top", legend=c("", "a", ""), col=c("blue", "red", "green"), 
title="test", y.intersp=c(1,-0.4), lwd=1)

(in recent versions of R)

Best,
Uwe










On 06.03.2023 11:34, Sigbert Klinke wrote:
> Hi,
> 
> I think you are right, legend cannot do it. I have now created my own 
> legend function where I changed only one line and now it works the way I 
> want it to. But I'm not sure if that might not have other side effects.
> 
> 
> 
> I have the impression that the legend and the title start at the same 
> y-position (try y.intersp=0). Only if y.intersp is big enough, then it 
> leads to a non-overlap of title and legend.
> 
> Thanks a lot
> 
> Sigbert
> 
> Am 05.03.23 um 16:20 schrieb Bert Gunter:
>> Don't think you can do that.
>> But maybe someone else will show that I'm wrong.
>>
>> -- Bert
>>
>> On Sat, Mar 4, 2023 at 11:39?PM Sigbert Klinke 
>> <sigbert at wiwi.hu-berlin.de>
>> wrote:
>>
>>> Hi,
>>>
>>> thanks, but this does not solve the problem. If I make y.intersp large
>>> enough then it works properly. Maybe I was not clear enough: I want to
>>> have the small distance between the lines and no overlap between the
>>> title and the lines.
>>>
>>> Sigbert
>>>
>>> Am 04.03.23 um 17:59 schrieb Bert Gunter:
>>>> Set the legend position explicitly with x and y values and add xpd = 
>>>> TRUE
>>>> to the legend call to clip the plot to the figure region and not the 
>>>> plot
>>>> region (the default). Something like this (you may have to fool around
>>> with
>>>> y.intersp, etc. to allow enough space between the legend lines):
>>>>
>>>> plot(c(0,1), c(0,1), type="n")
>>>>
>>>> legend(x = .4, y = 1.25, legend=c("", "", "a"), col=c("blue", "red",
>>>> "green"), xpd = TRUE, lty = 1, y.intersp= .75, title = 'test')
>>>>
>>>> Cheers,
>>>> Bert
>>>>
>>>> Cheers,
>>>> Bert
>>>>
>>>>
>>>> On Sat, Mar 4, 2023 at 7:45?AM Sigbert Klinke 
>>>> <sigbert at wiwi.hu-berlin.de
>>>>
>>>> wrote:
>>>>
>>>>> Hi,
>>>>>
>>>>> my MWE is not working as expected:
>>>>>
>>>>> plot(c(0,1), c(0,1), type="n")
>>>>>
>>>>> legend("top", legend=c("", "", "a"), col=c("blue", "red", "green"),
>>>>> title="test", y.intersp=0.2, lwd=1)
>>>>>
>>>>> The lines are not below the title. I want (nearby) lines as in the 
>>>>> plot,
>>>>> but below the title. Is there a way to achieve this?
>>>>>
>>>>> Thanks Sigbert
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide
>>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>
>>>>
>>>
>>> -- 
>>> https://hu.berlin/sk
>>> https://www.stat.de/faqs
>>> https://hu.berlin/mmstat
>>> https://hu.berlin/mmstat-ar
>>>
>>>
>>
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @|gbert @end|ng |rom w|w|@hu-ber||n@de  Mon Mar  6 14:31:46 2023
From: @|gbert @end|ng |rom w|w|@hu-ber||n@de (Sigbert Klinke)
Date: Mon, 6 Mar 2023 14:31:46 +0100
Subject: [R] legend: interplay between title and y.intersp
In-Reply-To: <091ea70d-4429-9a90-18d4-209f789d3443@statistik.tu-dortmund.de>
References: <5c4d9569-f34f-5891-9781-33fd834f6cdc@wiwi.hu-berlin.de>
 <CAGxFJbRekx8kSFjqDTEwo6rivNj6HS7h5G_jp7fw6-DMBpRCEQ@mail.gmail.com>
 <dda74c9a-d8ac-61bb-c466-0d4e03b01aae@wiwi.hu-berlin.de>
 <CAGxFJbRVeCqNeviVNJhTbiJ8C9sa5NKSTy=pR9gtLQ+xRCxgBA@mail.gmail.com>
 <d820d24d-559a-2add-4baa-7f82d859de17@wiwi.hu-berlin.de>
 <091ea70d-4429-9a90-18d4-209f789d3443@statistik.tu-dortmund.de>
Message-ID: <d9b4c44c-9aa7-f2cf-3c82-deb4f06994b4@wiwi.hu-berlin.de>

Hi,

that is perfect.

Thanks Sigbert

Am 06.03.23 um 13:08 schrieb Uwe Ligges:
> What about
> 
>  ?plot(c(0,1), c(0,1), type="n")
>  ?legend("top", legend=c("", "a", ""), col=c("blue", "red", "green"), 
> title="test", y.intersp=c(1,-0.4), lwd=1)
> 
> (in recent versions of R)
> 
> Best,
> Uwe


-- 
https://hu.berlin/sk
https://www.stat.de/faqs
https://hu.berlin/mmstat
https://hu.berlin/mmstat-ar


From ru@ytr@v|@19 @end|ng |rom gm@||@com  Tue Mar  7 01:47:20 2023
From: ru@ytr@v|@19 @end|ng |rom gm@||@com (Rusty Travis)
Date: Mon, 6 Mar 2023 16:47:20 -0800
Subject: [R] insert hyperlink into svg graphic
Message-ID: <5a14090c-046b-29e9-0051-c4e78120ed20@gmail.com>

Greetings,

I am creating plots of weather data and wish to include a link to the 
data source into a title() object in the plot. My syntax must be wrong 
though, as the hyperlink doesn't display, just the text and tags.

 > svg("/tmp/temps.svg", width=9, height=6)
 > #plot created here
 > title(sub="produced by Rusty Travis? \nusing data from <a 
xlink:href=https://www.ncei.noaa.gov/cdo-web/>test</a>? ", line=-1.5, adj=1)
 > dev.off()

The goal is to create a hyperlink of the word "test" in the above 
example. What is the correct syntax, please?

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Mar  7 16:33:21 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 7 Mar 2023 07:33:21 -0800
Subject: [R] insert hyperlink into svg graphic
In-Reply-To: <5a14090c-046b-29e9-0051-c4e78120ed20@gmail.com>
References: <5a14090c-046b-29e9-0051-c4e78120ed20@gmail.com>
Message-ID: <CAGxFJbTy-T380rvPuPSL4crtyA0wNfSgP-WTkKY0DWOb3yUKug@mail.gmail.com>

Perhaps this thread on stackoverflow (from a search on "include hyperlink
in svg graphic") may be of use:

https://stackoverflow.com/questions/41970535/a-hyperlink-in-svg-use

Cheers,
Bert

On Tue, Mar 7, 2023 at 12:34?AM Rusty Travis <rusytravis19 at gmail.com> wrote:

> Greetings,
>
> I am creating plots of weather data and wish to include a link to the
> data source into a title() object in the plot. My syntax must be wrong
> though, as the hyperlink doesn't display, just the text and tags.
>
>  > svg("/tmp/temps.svg", width=9, height=6)
>  > #plot created here
>  > title(sub="produced by Rusty Travis  \nusing data from <a
> xlink:href=https://www.ncei.noaa.gov/cdo-web/>test</a>  ", line=-1.5,
> adj=1)
>  > dev.off()
>
> The goal is to create a hyperlink of the word "test" in the above
> example. What is the correct syntax, please?
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bor|@@@te|pe @end|ng |rom utoronto@c@  Tue Mar  7 20:09:12 2023
From: bor|@@@te|pe @end|ng |rom utoronto@c@ (Boris Steipe)
Date: Tue, 7 Mar 2023 19:09:12 +0000
Subject: [R] insert hyperlink into svg graphic
In-Reply-To: <CAGxFJbTy-T380rvPuPSL4crtyA0wNfSgP-WTkKY0DWOb3yUKug@mail.gmail.com>
References: <5a14090c-046b-29e9-0051-c4e78120ed20@gmail.com>
 <CAGxFJbTy-T380rvPuPSL4crtyA0wNfSgP-WTkKY0DWOb3yUKug@mail.gmail.com>
Message-ID: <E850EF74-CCF4-4400-9D4B-D137C3F74B44@utoronto.ca>

This was actually the first thing that ChatGPT debugged for me.

The issue was that I was able to click on the link when I displayed the raw SVG in the browser (you can use that to test whether the syntax is even correct), but not when the svg displays inside a html page with the <img ...> tag.

ChatGPT correctly identified the issue and suggested a solution using <object ...> tags instead.

Here's how that would work:

<object data="temps.svg" type="image/svg+xml" alt="Image description TK">
<p>Your browser does not support the &lt;object&gt; tag.</p>
</object>

(Most browsers support the object tag: see https://caniuse.com/mdn-html_elements_object )


Cheers,
Boris



> On 2023-03-07, at 10:33, Bert Gunter <bgunter.4567 at gmail.com> wrote:
> 
> Perhaps this thread on stackoverflow (from a search on "include hyperlink
> in svg graphic") may be of use:
> 
> https://stackoverflow.com/questions/41970535/a-hyperlink-in-svg-use
> 
> Cheers,
> Bert
> 
> On Tue, Mar 7, 2023 at 12:34?AM Rusty Travis <rusytravis19 at gmail.com> wrote:
> 
>> Greetings,
>> 
>> I am creating plots of weather data and wish to include a link to the
>> data source into a title() object in the plot. My syntax must be wrong
>> though, as the hyperlink doesn't display, just the text and tags.
>> 
>>> svg("/tmp/temps.svg", width=9, height=6)
>>> #plot created here
>>> title(sub="produced by Rusty Travis  \nusing data from <a
>> xlink:href=https://www.ncei.noaa.gov/cdo-web/>test</a>  ", line=-1.5,
>> adj=1)
>>> dev.off()
>> 
>> The goal is to create a hyperlink of the word "test" in the above
>> example. What is the correct syntax, please?
>> 
>>        [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From p@u| @end|ng |rom @t@t@@uck|@nd@@c@nz  Tue Mar  7 22:12:10 2023
From: p@u| @end|ng |rom @t@t@@uck|@nd@@c@nz (Paul Murrell)
Date: Wed, 8 Mar 2023 10:12:10 +1300
Subject: [R] insert hyperlink into svg graphic
In-Reply-To: <E850EF74-CCF4-4400-9D4B-D137C3F74B44@utoronto.ca>
References: <5a14090c-046b-29e9-0051-c4e78120ed20@gmail.com>
 <CAGxFJbTy-T380rvPuPSL4crtyA0wNfSgP-WTkKY0DWOb3yUKug@mail.gmail.com>
 <E850EF74-CCF4-4400-9D4B-D137C3F74B44@utoronto.ca>
Message-ID: <2d0e82a2-153d-dcd6-beb9-8488999f198d@stat.auckland.ac.nz>

Hi

I think the main issue here is that you are *drawing* text on the 
graphics device, so I would only expect to see literal XML text output 
in the result.

If you want to affect the SVG code itself, you need a graphics device 
that understands the concept of hyperlinks.  One way to do that is with 
the 'gridSVG' package.  For example ...

library(ggplot2)
ggplot(mtcars) +
     geom_point(aes(disp, mpg)) +
     ggtitle('Fuel Efficiency')
## Make grobs accessible
library(grid)
grid.force()
## Find the name of the title grob
## grid.ls()
## Add hyperlink
library(gridSVG)
grid.hyperlink("title.3-5-3-5",
                href="https://en.wikipedia.org/wiki/Fuel_efficiency")
## Export to SVG
grid.export("link.svg")


It looks like you are using "base" graphics for your plot, in which case 
the template is slightly different, requiring the 'gridGraphics' package 
as well to convert to 'grid' output, for example ...


plot(mpg ~ disp, mtcars, main="Fuel Efficiency")
## Convert to 'grid' version
library(gridGraphics)
grid.echo()
## Find the name of the title grob
## grid.ls()
## Add hyperlink
library(gridSVG)
grid.hyperlink("graphics-plot-1-main-1",
                href="https://en.wikipedia.org/wiki/Fuel_efficiency")
## Export to SVG
grid.export("link-base.svg")


Hope that helps

Paul


On 8/03/23 08:09, Boris Steipe wrote:
> This was actually the first thing that ChatGPT debugged for me.
> 
> The issue was that I was able to click on the link when I displayed the 
> raw SVG in the browser (you can use that to test whether the syntax is 
> even correct), but not when the svg displays inside a html page with the 
> <img ...> tag.
> 
> ChatGPT correctly identified the issue and suggested a solution using 
> <object ...> tags instead.
> 
> Here's how that would work:
> 
> <object data="temps.svg" type="image/svg+xml" alt="Image description TK">
> <p>Your browser does not support the &lt;object&gt; tag.</p>
> </object>
> 
> (Most browsers support the object tag: see 
> https://caniuse.com/mdn-html_elements_object 
> <https://caniuse.com/mdn-html_elements_object> )
> 
> 
> Cheers,
> Boris
> 
> 
> 
>  > On 2023-03-07, at 10:33, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>  >
>  > Perhaps this thread on stackoverflow (from a search on "include hyperlink
>  > in svg graphic") may be of use:
>  >
>  > https://stackoverflow.com/questions/41970535/a-hyperlink-in-svg-use 
> <https://stackoverflow.com/questions/41970535/a-hyperlink-in-svg-use>
>  >
>  > Cheers,
>  > Bert
>  >
>  > On Tue, Mar 7, 2023 at 12:34?AM Rusty Travis <rusytravis19 at gmail.com> 
> wrote:
>  >
>  >> Greetings,
>  >>
>  >> I am creating plots of weather data and wish to include a link to the
>  >> data source into a title() object in the plot. My syntax must be wrong
>  >> though, as the hyperlink doesn't display, just the text and tags.
>  >>
>  >>> svg("/tmp/temps.svg", width=9, height=6)
>  >>> #plot created here
>  >>> title(sub="produced by Rusty Travis \nusing data from <a
>  >> xlink:href=https://www.ncei.noaa.gov/cdo-web/ 
> <https://www.ncei.noaa.gov/cdo-web>>test</a> ", line=-1.5,
>  >> adj=1)
>  >>> dev.off()
>  >>
>  >> The goal is to create a hyperlink of the word "test" in the above
>  >> example. What is the correct syntax, please?
>  >>
>  >> [[alternative HTML version deleted]]
>  >>
>  >> ______________________________________________
>  >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>  >> https://stat.ethz.ch/mailman/listinfo/r-help 
> <https://stat.ethz.ch/mailman/listinfo/r-help>
>  >> PLEASE do read the posting guide
>  >> http://www.R-project.org/posting-guide.html 
> <http://www.R-project.org/posting-guide.html>
>  >> and provide commented, minimal, self-contained, reproducible code.
>  >>
>  >
>  > [[alternative HTML version deleted]]
>  >
>  > ______________________________________________
>  > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>  > https://stat.ethz.ch/mailman/listinfo/r-help 
> <https://stat.ethz.ch/mailman/listinfo/r-help>
>  > PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html 
> <http://www.R-project.org/posting-guide.html>
>  > and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help 
> <https://stat.ethz.ch/mailman/listinfo/r-help>
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html 
> <http://www.R-project.org/posting-guide.html>
> and provide commented, minimal, self-contained, reproducible code.

-- 
Dr Paul Murrell
Te Kura Tatauranga | Department of Statistics
Waipapa Taumata Rau | The University of Auckland
Private Bag 92019, Auckland 1142, New Zealand
64 9 3737599 x85392
paul at stat.auckland.ac.nz
www.stat.auckland.ac.nz/~paul/


From ru@ytr@v|@19 @end|ng |rom gm@||@com  Tue Mar  7 19:16:06 2023
From: ru@ytr@v|@19 @end|ng |rom gm@||@com (Rusty Travis)
Date: Tue, 7 Mar 2023 10:16:06 -0800
Subject: [R] insert hyperlink into svg graphic
In-Reply-To: <CAGxFJbTy-T380rvPuPSL4crtyA0wNfSgP-WTkKY0DWOb3yUKug@mail.gmail.com>
References: <5a14090c-046b-29e9-0051-c4e78120ed20@gmail.com>
 <CAGxFJbTy-T380rvPuPSL4crtyA0wNfSgP-WTkKY0DWOb3yUKug@mail.gmail.com>
Message-ID: <8c441ef4-2571-2bf9-8fd7-a835f6c54d02@gmail.com>

Yes, many such examples exist on the Internet. My question is the syntax 
of embedding such svg tags into an R title() object using the example I 
provided, please.

On 3/7/23 07:33, Bert Gunter wrote:
> Perhaps this thread on stackoverflow (from a search on "include 
> hyperlink in svg graphic") may be of use:
>
> https://stackoverflow.com/questions/41970535/a-hyperlink-in-svg-use
>
> Cheers,
> Bert
>
> On Tue, Mar 7, 2023 at 12:34?AM Rusty Travis <rusytravis19 at gmail.com> 
> wrote:
>
>     Greetings,
>
>     I am creating plots of weather data and wish to include a link to the
>     data source into a title() object in the plot. My syntax must be
>     wrong
>     though, as the hyperlink doesn't display, just the text and tags.
>
>     ?> svg("/tmp/temps.svg", width=9, height=6)
>     ?> #plot created here
>     ?> title(sub="produced by Rusty Travis? \nusing data from <a
>     xlink:href=https://www.ncei.noaa.gov/cdo-web/>test</a> ",
>     line=-1.5, adj=1)
>     ?> dev.off()
>
>     The goal is to create a hyperlink of the word "test" in the above
>     example. What is the correct syntax, please?
>
>     ? ? ? ? [[alternative HTML version deleted]]
>
>     ______________________________________________
>     R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>     https://stat.ethz.ch/mailman/listinfo/r-help
>     PLEASE do read the posting guide
>     http://www.R-project.org/posting-guide.html
>     <http://www.R-project.org/posting-guide.html>
>     and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ru@ytr@v|@19 @end|ng |rom gm@||@com  Wed Mar  8 03:27:24 2023
From: ru@ytr@v|@19 @end|ng |rom gm@||@com (Rusty Travis)
Date: Tue, 7 Mar 2023 18:27:24 -0800
Subject: [R] insert hyperlink into svg graphic
In-Reply-To: <2d0e82a2-153d-dcd6-beb9-8488999f198d@stat.auckland.ac.nz>
References: <5a14090c-046b-29e9-0051-c4e78120ed20@gmail.com>
 <CAGxFJbTy-T380rvPuPSL4crtyA0wNfSgP-WTkKY0DWOb3yUKug@mail.gmail.com>
 <E850EF74-CCF4-4400-9D4B-D137C3F74B44@utoronto.ca>
 <2d0e82a2-153d-dcd6-beb9-8488999f198d@stat.auckland.ac.nz>
Message-ID: <746d2ff3-f6b5-964c-c633-a6d845d34b25@gmail.com>

On 3/7/23 13:12, Paul Murrell wrote:
> Hi
>
> I think the main issue here is that you are *drawing* text on the 
> graphics device, so I would only expect to see literal XML text output 
> in the result.
> '''
>
> Hope that helps

Thank you for your consideration of the matter, but that seems 
extraordinarily overly-complicated for the results of "help(svg)". I'll 
just print the text of the link instead of constructing a link, as the 
resultant R-produced *.svg file is about 10 times the size of a manual 
screen-print *.png of X11() same.

I'll let the user type the title() noaa.gov uri into their browser 
instead of providing a clickable link.

Thank you all.

>> ?> On 2023-03-07, at 10:33, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>> ?>
>> ?> Perhaps this thread on stackoverflow (from a search on "include 
>> hyperlink
>> ?> in svg graphic") may be of use:
>> ?>
>> ?> 
>> https://stackoverflow.com/questions/41970535/a-hyperlink-in-svg-use 
>> <https://stackoverflow.com/questions/41970535/a-hyperlink-in-svg-use>
>> ?>
>> ?> Cheers,
>> ?> Bert
>> ?>
>> ?> On Tue, Mar 7, 2023 at 12:34?AM Rusty Travis 
>> <rusytravis19 at gmail.com> wrote:
>> ?>
>> ?>> Greetings,
>> ?>>
>> ?>> I am creating plots of weather data and wish to include a link to 
>> the
>> ?>> data source into a title() object in the plot. My syntax must be 
>> wrong
>> ?>> though, as the hyperlink doesn't display, just the text and tags.
>> ?>>
>> ?>>> svg("/tmp/temps.svg", width=9, height=6)
>> ?>>> #plot created here
>> ?>>> title(sub="produced by Rusty Travis \nusing data from <a
>> ?>> xlink:href=https://www.ncei.noaa.gov/cdo-web/ 
>> <https://www.ncei.noaa.gov/cdo-web>>test</a> ", line=-1.5,
>> ?>> adj=1)
>> ?>>> dev.off()
>> ?>>
>> ?>> The goal is to create a hyperlink of the word "test" in the above
>> ?>> example. What is the correct syntax, please?
>> ?>>
>> ?>> [[alternative HTML version deleted]]
>> ?>>
>> ?>> ______________________________________________
>> ?>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> ?>> https://stat.ethz.ch/mailman/listinfo/r-help 
>> <https://stat.ethz.ch/mailman/listinfo/r-help>
>> ?>> PLEASE do read the posting guide
>> ?>> http://www.R-project.org/posting-guide.html 
>> <http://www.R-project.org/posting-guide.html>
>> ?>> and provide commented, minimal, self-contained, reproducible code.
>> ?>>
>> ?>
>> ?> [[alternative HTML version deleted]]
>> ?>
>> ?> ______________________________________________
>> ?> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> ?> https://stat.ethz.ch/mailman/listinfo/r-help 
>> <https://stat.ethz.ch/mailman/listinfo/r-help>
>> ?> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html 
>> <http://www.R-project.org/posting-guide.html>
>> ?> and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help 
>> <https://stat.ethz.ch/mailman/listinfo/r-help>
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html 
>> <http://www.R-project.org/posting-guide.html>
>> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From |eo@m@d@ @end|ng |rom @yon|c@eu  Wed Mar  8 20:09:11 2023
From: |eo@m@d@ @end|ng |rom @yon|c@eu (Leonard Mada)
Date: Wed, 8 Mar 2023 21:09:11 +0200
Subject: [R] Default Generic function for: args(name, default = TRUE)
Message-ID: <620e05f7-65d6-cc51-c780-a5f7302a2b74@syonic.eu>

Dear R-Users,

I want to change the args() function to return by default the arguments 
of the default generic function:
args = function(name, default = TRUE) {
 ?? ?# TODO: && is.function.generic();
 ?? ?if(default) {
 ?? ???? fn = match.call()[[2]];
 ?? ???? fn = paste0(as.character(fn), ".default");
 ?? ???? name = fn;
 ?? ?}
 ?? ?.Internal(args(name));
}

Is there a nice way to find out if a function is generic: something like 
is.function.generic()?

Many thanks,

Leonard
=======

Note:
- the latest version of this code will be on GitHub:
https://github.com/discoleo/R/commits/master/Stat/Tools.Code.R


From bgunter@4567 @end|ng |rom gm@||@com  Wed Mar  8 20:24:56 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 8 Mar 2023 11:24:56 -0800
Subject: [R] Default Generic function for: args(name, default = TRUE)
In-Reply-To: <620e05f7-65d6-cc51-c780-a5f7302a2b74@syonic.eu>
References: <620e05f7-65d6-cc51-c780-a5f7302a2b74@syonic.eu>
Message-ID: <CAGxFJbTCLfWReJ_7jLost+-H1snhN5ZFcq9HSRT-yJw_buACSw@mail.gmail.com>

?.S3methods

f <- function()(2)
> length(.S3methods(f))
[1] 0
> length(.S3methods(print))
[1] 206

There may be better ways, but this is what came to my mind.
-- Bert

On Wed, Mar 8, 2023 at 11:09?AM Leonard Mada via R-help <
r-help at r-project.org> wrote:

> Dear R-Users,
>
> I want to change the args() function to return by default the arguments
> of the default generic function:
> args = function(name, default = TRUE) {
>      # TODO: && is.function.generic();
>      if(default) {
>          fn = match.call()[[2]];
>          fn = paste0(as.character(fn), ".default");
>          name = fn;
>      }
>      .Internal(args(name));
> }
>
> Is there a nice way to find out if a function is generic: something like
> is.function.generic()?
>
> Many thanks,
>
> Leonard
> =======
>
> Note:
> - the latest version of this code will be on GitHub:
> https://github.com/discoleo/R/commits/master/Stat/Tools.Code.R
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From |eo@m@d@ @end|ng |rom @yon|c@eu  Wed Mar  8 20:26:07 2023
From: |eo@m@d@ @end|ng |rom @yon|c@eu (Leonard Mada)
Date: Wed, 8 Mar 2023 21:26:07 +0200
Subject: [R] Default Generic function for: args(name, default = TRUE)
In-Reply-To: <HalAJHOOC83xhqJ3FI79DCSVKL4XXTqL8XE2W-ybJ8OTkpsnEswbnEGVcGip-tsJgtp7A81n9073EK9m0QONjdgJC6x7tPXa8HjMakRRbQ8=@protonmail.com>
References: <HalAJHOOC83xhqJ3FI79DCSVKL4XXTqL8XE2W-ybJ8OTkpsnEswbnEGVcGip-tsJgtp7A81n9073EK9m0QONjdgJC6x7tPXa8HjMakRRbQ8=@protonmail.com>
Message-ID: <77f79875-a9fd-d094-6cdd-93646269c131@syonic.eu>

Dear Gregg,

Thank you for the fast response.

I believe though that isGeneric works only for S4-functions:

isGeneric("plot")
# FALSE

I still try to get it to work.

Sincerely,

Leonard


On 3/8/2023 9:13 PM, Gregg Powell wrote:
> Yes, there is a way to check if a function is generic. You can use the isGeneric function to check if a function is generic. Here's an updated version of the args function that includes a check for generic functions:
>
>> args = function(name, default = TRUE) {
>>   if(default && isGeneric(name)) {
>>    fn = paste0(as.character(name), ".default")
>>    name = fn
>> }
>> .Internal(args(name))
>> }
> r/
> Gregg
>
>
>
>
>
> ------- Original Message -------
> On Wednesday, March 8th, 2023 at 12:09 PM, Leonard Mada via R-help <r-help at r-project.org> wrote:
>
>
>> Dear R-Users,
>>
>> I want to change the args() function to return by default the arguments
>> of the default generic function:
>> args = function(name, default = TRUE) {
>> # TODO: && is.function.generic();
>> if(default) {
>> fn = match.call()[[2]];
>> fn = paste0(as.character(fn), ".default");
>> name = fn;
>> }
>> .Internal(args(name));
>> }
>>
>> Is there a nice way to find out if a function is generic: something like
>> is.function.generic()?
>>
>> Many thanks,
>>
>> Leonard
>> =======
>>
>> Note:
>> - the latest version of this code will be on GitHub: [edited]
>> https://github.com/discoleo/R/blob/master/Stat/Tools.Code.R
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://eu01.z.antigena.com/l/CoS9jxWcs77ZH1EdYpfdt4f1PgsZsEHB9bGmOMbk~shS17K1eTNQZGNHQeCHXm_3FeDw2W64pxRnUN0qYZCeC-KYHDkXzka9~lEVxf9mq1jf24zCj~A96_OSrQj~-IjJgb0J9~DKPpwYsqrK9jJHy9jPj6T3V2M8SAwxFZzj
>> PLEASE do read the posting guide https://eu01.z.antigena.com/l/CoS9jwics77ZHse0yVQ6JzRj1U7ZoE-xBthsLCBb5dXiWzcWWdMG5w6w0ko3hHpOaKJLXU-CYJO0bkWf-_eiJLh3FOnfRi22P4jyYsHId9eMpOYB7kA9rQXziAjRycjqgrVw9~DKHfurjKs2zz-nxsjOrlIOuYLYHtTk0XXQ
>> and provide commented, minimal, self-contained, reproducible code.


From |eo@m@d@ @end|ng |rom @yon|c@eu  Wed Mar  8 20:45:59 2023
From: |eo@m@d@ @end|ng |rom @yon|c@eu (Leonard Mada)
Date: Wed, 8 Mar 2023 21:45:59 +0200
Subject: [R] Default Generic function for: args(name, default = TRUE)
In-Reply-To: <CAGxFJbTCLfWReJ_7jLost+-H1snhN5ZFcq9HSRT-yJw_buACSw@mail.gmail.com>
References: <620e05f7-65d6-cc51-c780-a5f7302a2b74@syonic.eu>
 <CAGxFJbTCLfWReJ_7jLost+-H1snhN5ZFcq9HSRT-yJw_buACSw@mail.gmail.com>
Message-ID: <fa3f5afa-21e9-ee0a-941b-07c9e66bdfc4@syonic.eu>

Dear Bert,

Thank you for the idea.

It works, although a little bit ugly. The original code generated an 
ugly warning as well. I have modified it slightly:

is.function.generic = function(name) {
 ?? ?# TODO: is.function.generic();
 ?? ?# - this version is a little bit ugly;
 ?? ?# - S4: if(isGeneric(name));
 ?? ?length(do.call(.S3methods, list(name))) > 0;
}

The latest code is on GitHub:
https://github.com/discoleo/R/blob/master/Stat/Tools.Code.R

Sincerely,

Leonard

### initial variant:

is.function.generic = function(name) {
 ?? ?length(.S3methods(name)) > 0;
}
is.function.generic(plot)
# [1] TRUE
# Warning message:
# In .S3methods(name) :
#? generic function 'name' dispatches methods for generic 'plot'


On 3/8/2023 9:24 PM, Bert Gunter wrote:
> ?.S3methods
>
> f <- function()(2)
> > length(.S3methods(f))
> [1] 0
> > length(.S3methods(print))
> [1] 206
>
> There may be better ways, but this is what came to my mind.
> -- Bert
>
> On Wed, Mar 8, 2023 at 11:09?AM Leonard Mada via R-help 
> <r-help at r-project.org> wrote:
>
>     Dear R-Users,
>
>     I want to change the args() function to return by default the
>     arguments
>     of the default generic function:
>     args = function(name, default = TRUE) {
>     ??? ?# TODO: && is.function.generic();
>     ??? ?if(default) {
>     ??? ???? fn = match.call()[[2]];
>     ??? ???? fn = paste0(as.character(fn), ".default");
>     ??? ???? name = fn;
>     ??? ?}
>     ??? ?.Internal(args(name));
>     }
>
>     Is there a nice way to find out if a function is generic:
>     something like
>     is.function.generic()?
>
>     Many thanks,
>
>     Leonard
>     =======
>
>     Note:
>     - the latest version of this code will be on GitHub: [edited]
>     https://github.com/discoleo/R/blob/master/Stat/Tools.Code.R
>
>     ______________________________________________
>     R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>     https://eu01.z.antigena.com/l/WZHjscrVT77vHCg4mpOMD6G3~71hGfsI0mptEj63qDZ99ANSHBBoL682m4B1eeO4WJY2kWbEgf4nD6ORsu0Q1G3~fQBVXndWyFwTK0o1QPwCDSM4XcAT_kGxZsqFs0nU5LG9FCvwtZX7Lsta070KiGRfGTdgKbpCnJ9vNNn
>
>     PLEASE do read the posting guide
>     https://eu01.z.antigena.com/l/Efe9Tc5mAjjlHqsLNsVk2LXfGus-29wP9xeO3U-ofLI66Tb7tlGzxrP41MCDN4tLHzRIy8CNw2lGBcBL8IJrlNylyzjgGj38QiP1AqozMauoon-m6yOtCa2oLqMafoHs6kmA~KUXemho3gXsgpaNdEzAmkcv5WqXCZJU9h
>
>     and provide commented, minimal, self-contained, reproducible code.
>
	[[alternative HTML version deleted]]


From @vi@e@gross m@iii@g oii gm@ii@com  Wed Mar  8 21:23:53 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Wed, 8 Mar 2023 15:23:53 -0500
Subject: [R] nth kludge
Message-ID: <008e01d951fb$e76530f0$b62f92d0$@gmail.com>

I see many are not thrilled with the concise but unintuitive way it is
suggested you use with the new R pipe function. 
 
I am wondering if any has created one of a family of functions that might be
more intuitive if less general.
 
Some existing pipes simply allowed you to specify where in an argument list
to put the results from the earlier pipeline as in:
 
. %>% func(first, . , last)
 
In the above common case, it substituted into the second position.
 
What would perhaps be a useful variant is a function that does not evaluate
it's arguments and expects a first argument passed from the pipe and a
second argument that is a number like 2 or 3 and  a third  argument that is
the (name of) a function and remaining arguments.
 
The above might look like:
 
. %>% the_nth(2, func, first , last)
 
The above asks to take the new implicitly passed first argument which I will
illustrate with a real argument as it would also work without a pipeline:
 
the_nth(piped, 2, func, first, last)
 
So it would make a list out of the remaining arguments that looks like
list(first, last) and interpolate piped at position 2 to make list(first,
piped, last) and then use something like do.call()
 
do.call(func, list(first, piped, last))
 
I am not sure if this is much more readable, but seems like a
straightforward function to write, and perhaps a decent version could make
it into the standard library some year that is general and more useful than
the darn anonymous lambda notation.
 

	[[alternative HTML version deleted]]


From p@u| @end|ng |rom @t@t@@uck|@nd@@c@nz  Wed Mar  8 22:46:10 2023
From: p@u| @end|ng |rom @t@t@@uck|@nd@@c@nz (Paul Murrell)
Date: Thu, 9 Mar 2023 10:46:10 +1300
Subject: [R] insert hyperlink into svg graphic
In-Reply-To: <746d2ff3-f6b5-964c-c633-a6d845d34b25@gmail.com>
References: <5a14090c-046b-29e9-0051-c4e78120ed20@gmail.com>
 <CAGxFJbTy-T380rvPuPSL4crtyA0wNfSgP-WTkKY0DWOb3yUKug@mail.gmail.com>
 <E850EF74-CCF4-4400-9D4B-D137C3F74B44@utoronto.ca>
 <2d0e82a2-153d-dcd6-beb9-8488999f198d@stat.auckland.ac.nz>
 <746d2ff3-f6b5-964c-c633-a6d845d34b25@gmail.com>
Message-ID: <6b2c7067-bb6d-d930-cb19-c711dfce4908@stat.auckland.ac.nz>

Hi

On 8/03/23 15:27, Rusty Travis wrote:
> On 3/7/23 13:12, Paul Murrell wrote:
>> Hi
>>
>> I think the main issue here is that you are *drawing* text on the 
>> graphics device, so I would only expect to see literal XML text output 
>> in the result.
>> '''
>>
>> Hope that helps
> 
> Thank you for your consideration of the matter, but that seems 
> extraordinarily overly-complicated for the results of "help(svg)". I'll 
> just print the text of the link instead of constructing a link, as the 
> resultant R-produced *.svg file is about 10 times the size of a manual 
> screen-print *.png of X11() same.

Yes, it is not completely straightforward :)
Though once you have a code template it is not hard to repeat.
Yes, the generated SVG is verbose.
Though SVG can be compressed.

> I'll let the user type the title() noaa.gov uri into their browser 
> instead of providing a clickable link.

Glad you have a solution!

Paul

> Thank you all.
> 
>>> ?> On 2023-03-07, at 10:33, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>>> ?>
>>> ?> Perhaps this thread on stackoverflow (from a search on "include 
>>> hyperlink
>>> ?> in svg graphic") may be of use:
>>> ?>
>>> ?> 
>>> https://stackoverflow.com/questions/41970535/a-hyperlink-in-svg-use 
>>> <https://stackoverflow.com/questions/41970535/a-hyperlink-in-svg-use>
>>> ?>
>>> ?> Cheers,
>>> ?> Bert
>>> ?>
>>> ?> On Tue, Mar 7, 2023 at 12:34?AM Rusty Travis 
>>> <rusytravis19 at gmail.com> wrote:
>>> ?>
>>> ?>> Greetings,
>>> ?>>
>>> ?>> I am creating plots of weather data and wish to include a link to 
>>> the
>>> ?>> data source into a title() object in the plot. My syntax must be 
>>> wrong
>>> ?>> though, as the hyperlink doesn't display, just the text and tags.
>>> ?>>
>>> ?>>> svg("/tmp/temps.svg", width=9, height=6)
>>> ?>>> #plot created here
>>> ?>>> title(sub="produced by Rusty Travis \nusing data from <a
>>> ?>> xlink:href=https://www.ncei.noaa.gov/cdo-web/ 
>>> <https://www.ncei.noaa.gov/cdo-web>>test</a> ", line=-1.5,
>>> ?>> adj=1)
>>> ?>>> dev.off()
>>> ?>>
>>> ?>> The goal is to create a hyperlink of the word "test" in the above
>>> ?>> example. What is the correct syntax, please?
>>> ?>>
>>> ?>> [[alternative HTML version deleted]]
>>> ?>>
>>> ?>> ______________________________________________
>>> ?>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> ?>> https://stat.ethz.ch/mailman/listinfo/r-help 
>>> <https://stat.ethz.ch/mailman/listinfo/r-help>
>>> ?>> PLEASE do read the posting guide
>>> ?>> http://www.R-project.org/posting-guide.html 
>>> <http://www.R-project.org/posting-guide.html>
>>> ?>> and provide commented, minimal, self-contained, reproducible code.
>>> ?>>
>>> ?>
>>> ?> [[alternative HTML version deleted]]
>>> ?>
>>> ?> ______________________________________________
>>> ?> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> ?> https://stat.ethz.ch/mailman/listinfo/r-help 
>>> <https://stat.ethz.ch/mailman/listinfo/r-help>
>>> ?> PLEASE do read the posting guide 
>>> http://www.R-project.org/posting-guide.html 
>>> <http://www.R-project.org/posting-guide.html>
>>> ?> and provide commented, minimal, self-contained, reproducible code.
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help 
>>> <https://stat.ethz.ch/mailman/listinfo/r-help>
>>> PLEASE do read the posting guide 
>>> http://www.R-project.org/posting-guide.html 
>>> <http://www.R-project.org/posting-guide.html>
>>> and provide commented, minimal, self-contained, reproducible code.
>>
> 

-- 
Dr Paul Murrell
Te Kura Tatauranga | Department of Statistics
Waipapa Taumata Rau | The University of Auckland
Private Bag 92019, Auckland 1142, New Zealand
64 9 3737599 x85392
paul at stat.auckland.ac.nz
www.stat.auckland.ac.nz/~paul/


From @|gbert @end|ng |rom w|w|@hu-ber||n@de  Thu Mar  9 08:24:01 2023
From: @|gbert @end|ng |rom w|w|@hu-ber||n@de (Sigbert Klinke)
Date: Thu, 9 Mar 2023 08:24:01 +0100
Subject: [R] insert hyperlink into svg graphic
In-Reply-To: <6b2c7067-bb6d-d930-cb19-c711dfce4908@stat.auckland.ac.nz>
References: <5a14090c-046b-29e9-0051-c4e78120ed20@gmail.com>
 <CAGxFJbTy-T380rvPuPSL4crtyA0wNfSgP-WTkKY0DWOb3yUKug@mail.gmail.com>
 <E850EF74-CCF4-4400-9D4B-D137C3F74B44@utoronto.ca>
 <2d0e82a2-153d-dcd6-beb9-8488999f198d@stat.auckland.ac.nz>
 <746d2ff3-f6b5-964c-c633-a6d845d34b25@gmail.com>
 <6b2c7067-bb6d-d930-cb19-c711dfce4908@stat.auckland.ac.nz>
Message-ID: <93b26002-456c-174c-3d3b-d786be4670fd@wiwi.hu-berlin.de>

Hi,

maybe it would be a good idea to extend plotmath by a href command.

Sigbert

Am 08.03.23 um 22:46 schrieb Paul Murrell:
> Hi
> 
> On 8/03/23 15:27, Rusty Travis wrote:
>> On 3/7/23 13:12, Paul Murrell wrote:
>>> Hi
>>>
>>> I think the main issue here is that you are *drawing* text on the 
>>> graphics device, so I would only expect to see literal XML text 
>>> output in the result.
>>> '''
>>>
>>> Hope that helps
>>
>> Thank you for your consideration of the matter, but that seems 
>> extraordinarily overly-complicated for the results of "help(svg)". 
>> I'll just print the text of the link instead of constructing a link, 
>> as the resultant R-produced *.svg file is about 10 times the size of a 
>> manual screen-print *.png of X11() same.
> 
> Yes, it is not completely straightforward :)
> Though once you have a code template it is not hard to repeat.
> Yes, the generated SVG is verbose.
> Though SVG can be compressed.
> 
>> I'll let the user type the title() noaa.gov uri into their browser 
>> instead of providing a clickable link.
> 
> Glad you have a solution!
> 
> Paul
> 
>> Thank you all.
>>
>>>> ?> On 2023-03-07, at 10:33, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>>>> ?>
>>>> ?> Perhaps this thread on stackoverflow (from a search on "include 
>>>> hyperlink
>>>> ?> in svg graphic") may be of use:
>>>> ?>
>>>> ?> 
>>>> https://stackoverflow.com/questions/41970535/a-hyperlink-in-svg-use 
>>>> <https://stackoverflow.com/questions/41970535/a-hyperlink-in-svg-use>
>>>> ?>
>>>> ?> Cheers,
>>>> ?> Bert
>>>> ?>
>>>> ?> On Tue, Mar 7, 2023 at 12:34?AM Rusty Travis 
>>>> <rusytravis19 at gmail.com> wrote:
>>>> ?>
>>>> ?>> Greetings,
>>>> ?>>
>>>> ?>> I am creating plots of weather data and wish to include a link 
>>>> to the
>>>> ?>> data source into a title() object in the plot. My syntax must be 
>>>> wrong
>>>> ?>> though, as the hyperlink doesn't display, just the text and tags.
>>>> ?>>
>>>> ?>>> svg("/tmp/temps.svg", width=9, height=6)
>>>> ?>>> #plot created here
>>>> ?>>> title(sub="produced by Rusty Travis \nusing data from <a
>>>> ?>> xlink:href=https://www.ncei.noaa.gov/cdo-web/ 
>>>> <https://www.ncei.noaa.gov/cdo-web>>test</a> ", line=-1.5,
>>>> ?>> adj=1)
>>>> ?>>> dev.off()
>>>> ?>>
>>>> ?>> The goal is to create a hyperlink of the word "test" in the above
>>>> ?>> example. What is the correct syntax, please?
>>>> ?>>
>>>> ?>> [[alternative HTML version deleted]]
>>>> ?>>
>>>> ?>> ______________________________________________
>>>> ?>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> ?>> https://stat.ethz.ch/mailman/listinfo/r-help 
>>>> <https://stat.ethz.ch/mailman/listinfo/r-help>
>>>> ?>> PLEASE do read the posting guide
>>>> ?>> http://www.R-project.org/posting-guide.html 
>>>> <http://www.R-project.org/posting-guide.html>
>>>> ?>> and provide commented, minimal, self-contained, reproducible code.
>>>> ?>>
>>>> ?>
>>>> ?> [[alternative HTML version deleted]]
>>>> ?>
>>>> ?> ______________________________________________
>>>> ?> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> ?> https://stat.ethz.ch/mailman/listinfo/r-help 
>>>> <https://stat.ethz.ch/mailman/listinfo/r-help>
>>>> ?> PLEASE do read the posting guide 
>>>> http://www.R-project.org/posting-guide.html 
>>>> <http://www.R-project.org/posting-guide.html>
>>>> ?> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help 
>>>> <https://stat.ethz.ch/mailman/listinfo/r-help>
>>>> PLEASE do read the posting guide 
>>>> http://www.R-project.org/posting-guide.html 
>>>> <http://www.R-project.org/posting-guide.html>
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
> 

-- 
https://hu.berlin/sk
https://www.stat.de/faqs
https://hu.berlin/mmstat
https://hu.berlin/mmstat-ar


From rhe|p @end|ng |rom eoo@@dd@@n|  Thu Mar  9 10:19:23 2023
From: rhe|p @end|ng |rom eoo@@dd@@n| (Jan van der Laan)
Date: Thu, 9 Mar 2023 10:19:23 +0100
Subject: [R] nth kludge
In-Reply-To: <008e01d951fb$e76530f0$b62f92d0$@gmail.com>
References: <008e01d951fb$e76530f0$b62f92d0$@gmail.com>
Message-ID: <7047d3f0-2a37-b0d5-b611-d24fe3ec6acf@eoos.dds.nl>

Hi Avi, list,

Below an alternative suggestion:

func <- function(a, b, c) {
   list(a, b, c)
}

1:3 |> list(x = _) |> with(func(a, x, b))


Not sure if this is more readable than some of the other solutions, e.g. 
your solution, but you could make a variant of with more specific for 
this use case:

named <- function(expr, ...) {
   eval(substitute(expr), list(...), enclos = parent.frame())
}

then you can do:

1:3 |> named(func(1, x, mean(x)), x= _)

or perhaps you can even simplify further using the same strategy:


dot <- function(.,  expr) {
   eval(substitute(expr), list(. = .), enclos = parent.frame())
}

1:3 |> dot(func(1, ., mean(.)))

This seams simpler than the lambda notation and more general than your 
solution. Not sure if this has any drawbacks.

HTH,
Jan



On 08-03-2023 21:23, avi.e.gross at gmail.com wrote:
> I see many are not thrilled with the concise but unintuitive way it is
> suggested you use with the new R pipe function.
>   
> I am wondering if any has created one of a family of functions that might be
> more intuitive if less general.
>   
> Some existing pipes simply allowed you to specify where in an argument list
> to put the results from the earlier pipeline as in:
>   
> . %>% func(first, . , last)
>   
> In the above common case, it substituted into the second position.
>   
> What would perhaps be a useful variant is a function that does not evaluate
> it's arguments and expects a first argument passed from the pipe and a
> second argument that is a number like 2 or 3 and  a third  argument that is
> the (name of) a function and remaining arguments.
>   
> The above might look like:
>   
> . %>% the_nth(2, func, first , last)
>   
> The above asks to take the new implicitly passed first argument which I will
> illustrate with a real argument as it would also work without a pipeline:
>   
> the_nth(piped, 2, func, first, last)
>   
> So it would make a list out of the remaining arguments that looks like
> list(first, last) and interpolate piped at position 2 to make list(first,
> piped, last) and then use something like do.call()
>   
> do.call(func, list(first, piped, last))
>   
> I am not sure if this is much more readable, but seems like a
> straightforward function to write, and perhaps a decent version could make
> it into the standard library some year that is general and more useful than
> the darn anonymous lambda notation.
>   
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From gb @end|ng |rom eh@r@@e  Thu Mar  9 14:43:49 2023
From: gb @end|ng |rom eh@r@@e (=?UTF-8?Q?G=c3=b6ran_Brostr=c3=b6m?=)
Date: Thu, 9 Mar 2023 14:43:49 +0100
Subject: [R] web address for R-project
Message-ID: <24b07ee6-07e2-bd16-7918-464ffa9f823b@ehar.se>

I got the link cran.nexr.com from a person who claimed that it is the 
home of R-project, and indeed, it looks right.

But it doesn't feel right, so I wonder what is going on. Is it someone's 
mirror (authorized) of R-project?

Thanks, G?ran


From kry|ov@r00t @end|ng |rom gm@||@com  Thu Mar  9 15:01:14 2023
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Thu, 9 Mar 2023 17:01:14 +0300
Subject: [R] web address for R-project
In-Reply-To: <24b07ee6-07e2-bd16-7918-464ffa9f823b@ehar.se>
References: <24b07ee6-07e2-bd16-7918-464ffa9f823b@ehar.se>
Message-ID: <20230309170114.4b8ab0f1@arachnoid>

? Thu, 9 Mar 2023 14:43:49 +0100
G?ran Brostr?m <gb at ehar.se> ?????:

> Is it someone's mirror (authorized) of R-project?

It's not currently in the official list of mirrors [*], but anyone can
create a CRAN mirror for their own needs as long as they don't overload
the CRAN master site: https://cran.r-project.org/mirror-howto.html

NexR call themselves a "total data service company" and have published
an R interface for Apache Hive [**], so it shouldn't be too surprising
that they have a local CRAN mirror.

The home of R project is at https://r-project.org/. If you don't want
to trust a J. Random Hacker from the Internet to give you the right
address, run citation() in an R prompt.

-- 
Best regards,
Ivan

[*] https://svn.r-project.org/R/trunk/doc/CRAN_mirrors.csv

[**] https://nexr.github.io/RHive/


From gb @end|ng |rom eh@r@@e  Thu Mar  9 15:19:27 2023
From: gb @end|ng |rom eh@r@@e (=?UTF-8?Q?G=c3=b6ran_Brostr=c3=b6m?=)
Date: Thu, 9 Mar 2023 15:19:27 +0100
Subject: [R] web address for R-project
In-Reply-To: <20230309170114.4b8ab0f1@arachnoid>
References: <24b07ee6-07e2-bd16-7918-464ffa9f823b@ehar.se>
 <20230309170114.4b8ab0f1@arachnoid>
Message-ID: <5d454639-00c7-f145-f85e-72c746110661@ehar.se>

Thanks, G?ran

Den 2023-03-09 kl. 15:01, skrev Ivan Krylov:
> ? Thu, 9 Mar 2023 14:43:49 +0100
> G?ran Brostr?m <gb at ehar.se> ?????:
> 
>> Is it someone's mirror (authorized) of R-project?
> 
> It's not currently in the official list of mirrors [*], but anyone can
> create a CRAN mirror for their own needs as long as they don't overload
> the CRAN master site: https://cran.r-project.org/mirror-howto.html
> 
> NexR call themselves a "total data service company" and have published
> an R interface for Apache Hive [**], so it shouldn't be too surprising
> that they have a local CRAN mirror.
> 
> The home of R project is at https://r-project.org/. If you don't want
> to trust a J. Random Hacker from the Internet to give you the right
> address, run citation() in an R prompt.
>


From n|ckmwr@y @end|ng |rom gm@||@com  Sat Mar 11 15:21:11 2023
From: n|ckmwr@y @end|ng |rom gm@||@com (Nick Wray)
Date: Sat, 11 Mar 2023 14:21:11 +0000
Subject: [R] null in rao.test in R
Message-ID: <CABxY9BNg8frpNAbE0-QWn88VjUdp3qu4uKtpuCyZ+9JeWes2Lg@mail.gmail.com>

Hello  I am testing for the homogeneity of clusters of (yearly) seasonal
data using the rao.test from the circular package.  I can't find anywhere
(including the Cran pages) which specifically mentions the null hypothesis
for this test.  Playing around with it, for example using say the toy code
beneath it would seem that the null is that the data sets tested are not
homogenous, which is fine except that seems to be contrary to normal
practice, where the null would be that the two sets are homogenous unless
there's evidence otherwise.  Has anyone else used this test and can confirm
that the null is that sets are not homogenous?

a<-2*pi*c(1,2,3)/365
b<-a+pi
rt<- rao.test(a,b)
rt$p.value

this gives two p-values of 1 - one for the equality of polar vectors, and
the second for the  test of equality of dispersions.  Although I can guess,
to be honest at the moment i'm not sure what either of these things mean
(not really an R-help question I know) as I've only just begun serious
analysis of circular data but I am surprised that this toy data gives a
p-value of 1 in each case

can anyone cast light on all this?
Thanks Nick Wray

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Mar 11 15:44:20 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 11 Mar 2023 09:44:20 -0500
Subject: [R] null in rao.test in R
In-Reply-To: <CABxY9BNg8frpNAbE0-QWn88VjUdp3qu4uKtpuCyZ+9JeWes2Lg@mail.gmail.com>
References: <CABxY9BNg8frpNAbE0-QWn88VjUdp3qu4uKtpuCyZ+9JeWes2Lg@mail.gmail.com>
Message-ID: <8bfd98df-f4d5-f461-24f2-68bd4bf66a98@gmail.com>

On 11/03/2023 9:21 a.m., Nick Wray wrote:
> Hello  I am testing for the homogeneity of clusters of (yearly) seasonal
> data using the rao.test from the circular package.  I can't find anywhere
> (including the Cran pages) which specifically mentions the null hypothesis
> for this test.  Playing around with it, for example using say the toy code
> beneath it would seem that the null is that the data sets tested are not
> homogenous, which is fine except that seems to be contrary to normal
> practice, where the null would be that the two sets are homogenous unless
> there's evidence otherwise.  Has anyone else used this test and can confirm
> that the null is that sets are not homogenous?
> 
> a<-2*pi*c(1,2,3)/365
> b<-a+pi
> rt<- rao.test(a,b)
> rt$p.value
> 
> this gives two p-values of 1 - one for the equality of polar vectors, and
> the second for the  test of equality of dispersions.  Although I can guess,
> to be honest at the moment i'm not sure what either of these things mean
> (not really an R-help question I know) as I've only just begun serious
> analysis of circular data but I am surprised that this toy data gives a
> p-value of 1 in each case
> 
> can anyone cast light on all this?

I think the null for the polar test is that the directions are the same, 
and the null for the dispersion test is that the dispersions are the same.

Your two samples are very similar but in opposite directions.  If you 
add pi/2 (or other numbers) instead of pi to form b from a, you'll see 
very small p values.

What this indicates to me is that the test as implemented is unable to 
detect directions that differ by pi.

I don't know whether the original test had this limitation or whether it 
isn't implemented as designed.

Duncan Murdoch


From drj|m|emon @end|ng |rom gm@||@com  Sun Mar 12 10:20:51 2023
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Sun, 12 Mar 2023 20:20:51 +1100
Subject: [R] Shaded area
In-Reply-To: <CAKZQJMAgi_1Rq8QZCD1O77XZouj910sm-uDsWRq_=71kLB6dzQ@mail.gmail.com>
References: <CAA6O3zgwrDD81LwB-3i9986wmpbT8=Hr=Dfx2P2=jBb96-Mqfw@mail.gmail.com>
 <efa39ed71706461397e72ff44fe6d070@SRVEXCHCM1302.precheza.cz>
 <CAKZQJMAgi_1Rq8QZCD1O77XZouj910sm-uDsWRq_=71kLB6dzQ@mail.gmail.com>
Message-ID: <CA+8X3fWwGvb4zHzAGgkOSjkSTApXegKE54OKgTErEPoTf1tOcA@mail.gmail.com>

Hi all,
I was quite intrigued by George's question, for I thought this might
be a problem faced by many. The solution attached is only useful for a
monotonically increasing x vector, a paired vector of y values, and a
criterial value above which a polygon will be displayed. More work
would needed for curves that are above the criterial value at the
beginning or end, and a corresponding argument to fill the area
_below_ the criterial value. If it is useful, I can probably do a bit
more work on it.

Jim

On Fri, Mar 3, 2023 at 11:58?PM John Kane <jrkrideau at gmail.com> wrote:
>
> As Peter says, the list is very cautious about what types of files it
> allows. A handy way to supply some sample data is the dput() function.  In
> the case of a large dataset something like dput(head(mydata, 100)) should
> supply the data we need. Just do dput(mydata) where *mydata* is your data.
> Copy the output and paste it here.
>
> On Wed, 1 Mar 2023 at 09:58, PIKAL Petr <petr.pikal at precheza.cz> wrote:
>
> > Hallo
> >
> > Excel attachment is not allowed here, but shading area is answered many
> > times elsewhere. Use something like . "shading area r" in google.
> >
> > See eg.
> > https://www.geeksforgeeks.org/how-to-shade-a-graph-in-r/
> >
> > Cheers Petr
> >
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of George Brida
> > Sent: Wednesday, March 1, 2023 3:21 PM
> > To: r-help at r-project.org
> > Subject: [R] Shaded area
> >
> > Dear R users,
> >
> > I have an xlsx file (attached to this mail) that shows the values of a
> > "der" series observed on a daily basis from January 1, 2017 to January 25,
> > 2017. This series is strictly positive during two periods: from January 8,
> > 2017 to January 11, 2017 and from January 16, 2017 to January 20, 2017. I
> > would like to plot the series with two shaded areas corresponding to the
> > positivity of the series. Specifically, I would like to draw 4 vertical
> > lines intersecting the x-axis in the 4 dates mentioned above and shade the
> > two areas of positivity. Thanks for your help.
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> > Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch
> > partner? PRECHEZA a.s. jsou zve?ejn?ny na:
> > https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information
> > about processing and protection of business partner?s personal data are
> > available on website:
> > https://www.precheza.cz/en/personal-data-protection-principles/
> > D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou
> > d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en?
> > odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any
> > documents attached to it may be confidential and are subject to the legally
> > binding disclaimer: https://www.precheza.cz/en/01-disclaimer/
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>
> --
> John Kane
> Kingston ON Canada
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

From rodr|go@b@d|||@ @end|ng |rom gm@||@com  Mon Mar 13 01:41:49 2023
From: rodr|go@b@d|||@ @end|ng |rom gm@||@com (Rodrigo Badilla)
Date: Sun, 12 Mar 2023 21:41:49 -0300
Subject: [R] tcl tk: set the position button
Message-ID: <Mailbird-057f2649-7759-430e-aea7-1d27855353ea@gmail.com>

Hi all,
I am using tcltk2 library to show buttons and messages. Everything
work fine but I would like set the tk2button to the right of my screen, by default it display at the left of my screen.
my script example:
library(tcltk2) win1 <- tktoplevel() butOK <- tk2button(win1, text = "TEST", width = 77) tkgrid(butOK)
Thanks in advance
Saludos
Rodrigo?


--
Este correo electr?nico ha sido analizado en busca de virus por el software antivirus de Avast.
www.avast.com
	[[alternative HTML version deleted]]


From j|ox @end|ng |rom mcm@@ter@c@  Mon Mar 13 20:42:19 2023
From: j|ox @end|ng |rom mcm@@ter@c@ (John Fox)
Date: Mon, 13 Mar 2023 15:42:19 -0400
Subject: [R] tcl tk: set the position button
In-Reply-To: <Mailbird-057f2649-7759-430e-aea7-1d27855353ea@gmail.com>
References: <Mailbird-057f2649-7759-430e-aea7-1d27855353ea@gmail.com>
Message-ID: <754cf7d8-bd39-bb79-f2e9-27cf04f866b4@mcmaster.ca>

Dear Rodrigo,

Try tkwm.geometry(win1, "-0+0"), which should position win1 at the top 
right.

I hope this helps,
  John

-- 
John Fox, Professor Emeritus
McMaster University
Hamilton, Ontario, Canada
web: https://socialsciences.mcmaster.ca/jfox/

On 2023-03-12 8:41 p.m., Rodrigo Badilla wrote:
> Hi all,
> I am using tcltk2 library to show buttons and messages. Everything
> work fine but I would like set the tk2button to the right of my screen, by default it display at the left of my screen.
> my script example:
> library(tcltk2) win1 <- tktoplevel() butOK <- tk2button(win1, text = "TEST", width = 77) tkgrid(butOK)
> Thanks in advance
> Saludos
> Rodrigo
> 
> 
> --
> Este correo electr?nico ha sido analizado en busca de virus por el software antivirus de Avast.
> www.avast.com
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From kmezhoud @end|ng |rom gm@||@com  Tue Mar 14 10:40:01 2023
From: kmezhoud @end|ng |rom gm@||@com (Karim Mezhoud)
Date: Tue, 14 Mar 2023 10:40:01 +0100
Subject: [R] tcl tk: set the position button
In-Reply-To: <754cf7d8-bd39-bb79-f2e9-27cf04f866b4@mcmaster.ca>
References: <Mailbird-057f2649-7759-430e-aea7-1d27855353ea@gmail.com>
 <754cf7d8-bd39-bb79-f2e9-27cf04f866b4@mcmaster.ca>
Message-ID: <CALJKBv9MzU+9tUWUE=Qq7hAt-HMTVtbRPOA5JHazQ3EV9j8TgQ@mail.gmail.com>

Hi Rodrigo,
Try to add tkgrid.configuration and change values as you want.

library(tcltk2)
win1 <- tktoplevel()
butOK <- tk2button(win1, text = "TEST", width = 77)
tkgrid(whiteSPACE, butOK, columnspan=2, padx=20, pady=10)
tkgrid.configure(butOK,rowspan=2,columnspan= 3,sticky="nsew")

Here is the documentation of grid.configuration.

Or maybe try to use tkpack:

tt <- tktoplevel()
tkpack(l1 <- tklabel(tt, text = "Heave"), l2 <- tklabel(tt, text = "Ho"))
tkpack.configure(l1, side = "right")



On Mon, Mar 13, 2023 at 8:42?PM John Fox <jfox at mcmaster.ca> wrote:

> Dear Rodrigo,
>
> Try tkwm.geometry(win1, "-0+0"), which should position win1 at the top
> right.
>
> I hope this helps,
>   John
>
> --
> John Fox, Professor Emeritus
> McMaster University
> Hamilton, Ontario, Canada
> web: https://socialsciences.mcmaster.ca/jfox/
>
> On 2023-03-12 8:41 p.m., Rodrigo Badilla wrote:
> > Hi all,
> > I am using tcltk2 library to show buttons and messages. Everything
> > work fine but I would like set the tk2button to the right of my screen,
> by default it display at the left of my screen.
> > my script example:
> > library(tcltk2) win1 <- tktoplevel() butOK <- tk2button(win1, text =
> "TEST", width = 77) tkgrid(butOK)
> > Thanks in advance
> > Saludos
> > Rodrigo
> >
> >
> > --
> > Este correo electr?nico ha sido analizado en busca de virus por el
> software antivirus de Avast.
> > www.avast.com
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @uperk @end|ng |rom c@@huj|@@c@||  Tue Mar 14 01:03:29 2023
From: @uperk @end|ng |rom c@@huj|@@c@|| (Guy Kelman)
Date: Tue, 14 Mar 2023 02:03:29 +0200
Subject: [R] Please help - my IP was blacklisted
Message-ID: <CAL8U3B=4c_vR4DDgfann_n=Y3avTU0abnBD0AB+WtC0vHaKAPA@mail.gmail.com>

Dear r-help@,

A while ago I tried to bundle packages for offline installations. For this
I created a script that would access
ftp://cran.r-project.org/pub/R/src/contrib/ for each package in a loop.
The first trial was bugous and it generated many bad URL requests to
cran.r-project.org
>From that moment I was not able to access r-project.org.

My IP address is 87.70.177.68

Can you please help?

Thank you,

Guy

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Tue Mar 14 16:38:21 2023
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 14 Mar 2023 18:38:21 +0300
Subject: [R] Please help - my IP was blacklisted
In-Reply-To: <CAL8U3B=4c_vR4DDgfann_n=Y3avTU0abnBD0AB+WtC0vHaKAPA@mail.gmail.com>
References: <CAL8U3B=4c_vR4DDgfann_n=Y3avTU0abnBD0AB+WtC0vHaKAPA@mail.gmail.com>
Message-ID: <20230314183821.4acf1100@arachnoid>

? Tue, 14 Mar 2023 02:03:29 +0200
Guy Kelman <superk at cs.huji.ac.il> ?????:

> A while ago I tried to bundle packages for offline installations. For
> this I created a script that would access
> ftp://cran.r-project.org/pub/R/src/contrib/ for each package in a
> loop.

Next time, follow the instructions at
https://cran.r-project.org/mirror-howto.html in order to create a CRAN
mirror.

The people who have blocked you are probably accessible via
CRAN-sysadmin at R-project.org. (Normally, it should be possible to find
out this information by visiting
<https://cran.r-project.org/CRAN_team.htm>, but you're blocked, so you
can't.)

-- 
Best regards,
Ivan


From pd@|gd @end|ng |rom gm@||@com  Wed Mar 15 11:06:11 2023
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Wed, 15 Mar 2023 11:06:11 +0100
Subject: [R] [Rd] R 4.2.3 is released
Message-ID: <242BFA0D-71C0-4C6D-97AE-62F571774E4C@gmail.com>

The build system rolled up R-4.2.3.tar.gz (codename "Shortstop Beagle") this morning.

The list below details the changes in this release. 

You can get the source code from

https://cran.r-project.org/src/base/R-4/R-4.2.3.tar.gz

or wait for it to be mirrored at a CRAN site nearer to you.

Binaries for various platforms will appear in due course.


For the R Core Team,

Peter Dalgaard


These are the checksums (md5 and SHA-256) for the freshly created files, in case you wish
to check that they are uncorrupted:

MD5 (AUTHORS) = 320967884b547734d6279dedbc739dd4
MD5 (COPYING) = eb723b61539feef013de476e68b5c50a
MD5 (COPYING.LIB) = a6f89e2100d9b6cdffcea4f398e37343
MD5 (FAQ) = 3f5d6539d3c4878cbbb74dcbee74447f
MD5 (INSTALL) = 7893f754308ca31f1ccf62055090ad7b
MD5 (NEWS) = 4a300bf9bd24e704614f036452355d23
MD5 (NEWS.0) = bfcd7c147251b5474d96848c6f57e5a8
MD5 (NEWS.1) = 4108ab429e768e29b1c3b418c224246e
MD5 (NEWS.2) = b38d94569700664205a76a7de836ba83
MD5 (NEWS.3) = e55ed2c8a547b827b46e08eb7137ba23
MD5 (R-latest.tar.gz) = ebfc90b1552581f2b7c9a50f934e6bb0
MD5 (README) = f468f281c919665e276a1b691decbbe6
MD5 (RESOURCES) = a79b9b338cab09bd665f6b62ac6f455b
MD5 (THANKS) = 45b6d2e88a6ecb5b24fa33a781351cd5
MD5 (VERSION-INFO.dcf) = d08f0c8f65c2a021be36324081440dd9
MD5 (R-4/R-4.2.3.tar.gz) = ebfc90b1552581f2b7c9a50f934e6bb0

60a0d150e6fc1f424be76ad7b645d236b56e747692a4679f81ce6536c550e949  AUTHORS
e6d6a009505e345fe949e1310334fcb0747f28dae2856759de102ab66b722cb4  COPYING
6095e9ffa777dd22839f7801aa845b31c9ed07f3d6bf8a26dc5d2dec8ccc0ef3  COPYING.LIB
8c396b0db6b1b072e66ea78deab8c89f71150744420ad9f74de6505aacee9a80  FAQ
f87461be6cbaecc4dce44ac58e5bd52364b0491ccdadaf846cb9b452e9550f31  INSTALL
be3cd8a6d7220726d2cbdf1b929e6b75c09101214b1b006e29ce97dab4450553  NEWS
4e21b62f515b749f80997063fceab626d7258c7d650e81a662ba8e0640f12f62  NEWS.0
5de7657c5e58e481403c0dd1a74a5c090b3ef481ce75a91dfe05d4b03f63163f  NEWS.1
cde079b6beab7d700d3d4ecda494e2681ad3b7f8fab13b68be090f949393ec62  NEWS.2
1910a2405300b9bc7c76beeb0753a5249cf799afe175ce28f8d782fab723e012  NEWS.3
55e4a9a6d43be314e2c03d0266a6fa5444afdce50b303bfc3b82b3979516e074  R-latest.tar.gz
2fdd3e90f23f32692d4b3a0c0452f2c219a10882033d1774f8cadf25886c3ddc  README
8b7d3856100220f4555d4d57140829f2e81c27eccec5b441f5dce616e9ec9061  RESOURCES
8319c5415de58ee10d4bc058d79c370fd8e6b2ad09e25d7a1e04b74ca5f380a6  THANKS
4701c6802bf3f31e6f8ad66d47909eef0985f8af97b0a28fd391c68a7d3ffc18  VERSION-INFO.dcf
55e4a9a6d43be314e2c03d0266a6fa5444afdce50b303bfc3b82b3979516e074  R-4/R-4.2.3.tar.gz

This is the relevant part of the NEWS file

CHANGES IN R 4.2.3:

  C-LEVEL FACILITIES:

    * The definition of DL_FUNC in R_ext/Rdynload.h has been changed to
      be fully C-compliant.  This means that functions loaded _via_ for
      example R_GetCCallable need to be cast to an appropriate type if
      they have any arguments.

    * .Machine has a new element sizeof.time_t to identify old systems
      with a 32-bit type and hence a limited range of date-times (and
      limited support for dates millions of years from present).

  PACKAGE INSTALLATION:

    * (Windows) The default C++ standard had accidentally been left at
      C++11 when it was changed to C++14 on Unix.

  BUG FIXES:

    * As "POSIXlt" objects may be "partially filled" and their list
      components meant to be recycled, length() now is the length of
      the longest component.

    * as.POSIXlt.Date() could underflow for dates in the far past (more
      than half a million years BCE).

    * as.Date.POSIXlt(x) would return "1970-01-01" instead of NA in R
      4.2.2, e.g., for

              x <- as.POSIXlt(c("2019-01-30","2001-1-1"))
              x$mon <- c(0L, NA); as.Date(x)
      
    * R CMD check failed to apply enabled _R_CHECK_SUGGESTS_ONLY_ to
      examples and vignettes (regression in R 4.2.0).

    * R CMD check did not re-build vignettes in separate processes by
      default (regression in R 4.2.0).

    * Running examples from HTML documentation now restores previous
      knitr settings and options (PR#18420).

    * Quartz: fonts are now located using Core Graphics API instead of
      deprecated ATS which is no longer supported in the macOS 13 SDK
      (PR#18426).  This also addresses an issue where the currently
      used font in the Quartz device context was not correctly
      retained.

    * (Windows) Math symbols in text drawing functions are again
      rendered correctly (PR#18440).  This fixes a regression in R
      4.2.1 caused by a fix in PR#18382 which uncovered an issue in
      GraphApp due to which the symbol charset was not used with TT
      Symbol font face.

    * (Windows) Installing a package with a src/Makefile.{win,ucrt}
      file includes ~/.R/Makevars.win64 in the search for user
      makevars, as documented in "R Installation and Administration"
      and done for packages with a src/Makevars.{win,ucrt} file.

    * format(<POSIXlt_w/_unbalanced_sec>, "....%OS<n>") with n > 0 no
      longer accidentally uses the unbalanced seconds, thanks to
      Suharto Anggono's report (including patch) in PR#18448.

    * solve.default(a, b) works around issues with some versions of
      LAPACK when a contains NA or NaN values.

    * When UseMethod() cannot dispatch, it no longer segfaults
      producing the error message in case of a long class(), thanks to
      Joris Vankerschaver's report (including patch) in PR#18447.

    * When example(foo, ..) produces graphics on an interactive device
      it needs to open itself, it now leaves devAskNewPage() unchanged
      even when it was FALSE, thus fixing a 14 years old '<FIXME>'.

    * packageDescription() again catches errors from encoding
      conversions. This also fixes broken packageVersion() in C locale
      on systems where iconv does not support transliteration.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com

______________________________________________
R-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-devel

_______________________________________________
R-announce at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-announce


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Thu Mar 16 13:05:39 2023
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Thu, 16 Mar 2023 12:05:39 +0000
Subject: [R] Trying to learn how to write a function
Message-ID: <MW4PR03MB6363CCA1984102440128A38BE2BC9@MW4PR03MB6363.namprd03.prod.outlook.com>

I am trying to understand how to write an "advanced" function. To do this, I am examining the code of lm, a small part of the lm code is below. N

> lm
function (formula, data, subset, weights, na.action, method = "qr", 
    model = TRUE, x = FALSE, y = FALSE, qr = TRUE, singular.ok = TRUE, 
    contrasts = NULL, offset, ...) 
{
    ret.x <- x
    ret.y <- y
    cl <- match.call()
    mf <- match.call(expand.dots = FALSE)
    m <- match(c("formula", "data", "subset", "weights", "na.action", 
        "offset"), names(mf), 0L)


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Thu Mar 16 13:11:35 2023
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Thu, 16 Mar 2023 12:11:35 +0000
Subject: [R] Trying to learn how to write an "advanced" function
Message-ID: <MW4PR03MB63630BA0F1173094445249BEE2BC9@MW4PR03MB6363.namprd03.prod.outlook.com>

I am trying to understand how to write an "advanced" function. To do so, I am examining the lm fucnction, a portion of which is pasted below. I am unable to understand what match.call or   match does, and several other parts of lm, even when I read the help page for match.call or match. 
(1) can someone point me to an explanation of match.call or match that can be understood by the uninitiated? 
(2) can someone point me to a document that will help me learn how to write an "advanced" function?

Thank you,
John

> lm
function (formula, data, subset, weights, na.action, method = "qr", 
    model = TRUE, x = FALSE, y = FALSE, qr = TRUE, singular.ok = TRUE, 
    contrasts = NULL, offset, ...) 
{
    ret.x <- x
    ret.y <- y
    cl <- match.call()
    mf <- match.call(expand.dots = FALSE)
    m <- match(c("formula", "data", "subset", "weights", "na.action", 
        "offset"), names(mf), 0L)

From kry|ov@r00t @end|ng |rom gm@||@com  Thu Mar 16 13:37:26 2023
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Thu, 16 Mar 2023 15:37:26 +0300
Subject: [R] Trying to learn how to write an "advanced" function
In-Reply-To: <MW4PR03MB63630BA0F1173094445249BEE2BC9@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <MW4PR03MB63630BA0F1173094445249BEE2BC9@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <20230316153726.2f67a705@arachnoid>

? Thu, 16 Mar 2023 12:11:35 +0000
"Sorkin, John" <jsorkin at som.umaryland.edu> ?????:

> (1) can someone point me to an explanation of match.call or match
> that can be understood by the uninitiated? (2) can someone point me
> to a document that will help me learn how to write an "advanced"
> function?

By "advanced" functions, you seem to mean non-standard evaluation. See
this chapter in the first edition of Advanced R:
http://adv-r.had.co.nz/Computing-on-the-language.html

Additionally, a search for "R non-standard evaluation" should give you
other useful results.

Note that non-standard evaluation is hard to get right for all cases,
and such bugs surface even in R itself from time to time:
https://bugs.r-project.org/show_bug.cgi?id=18368

-- 
Best regards,
Ivan


From jr@| @end|ng |rom po@teo@no  Thu Mar 16 13:42:07 2023
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Thu, 16 Mar 2023 12:42:07 +0000
Subject: [R] Trying to learn how to write an "advanced" function
In-Reply-To: <MW4PR03MB63630BA0F1173094445249BEE2BC9@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <MW4PR03MB63630BA0F1173094445249BEE2BC9@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <ZBMOn1sTNtStYY1q@posteo.no>

On 2023-03-16 12:11 +0000, Sorkin, John wrote:
> (1) can someone point me to an 
> explanation of match.call or match 
> that can be understood by the 
> uninitiated? 

Dear John,

the man page ?match tells us that match 
matches the first vector against the 
second, and returns a vector of indecies 
the same length as the first, e.g.

	> match(c("formula", "data", "subset", "weights", "na.action", "offset"), c("Maryland", "formula", "data", "subset", "weights", "na.action", "offset", "Sorkin", "subset"), 0L)
	[1] 2 3 4 5 6 7

perhaps a bad answer ... 

> (2) can someone point me to a document 
> that will help me learn how to write 
> an "advanced" function?

Perhaps the background here is looking 
at the lm function as a basis for 
writing something more advanced, then 
the exercise becomes looking at 
dput(lm), understanding every line by 
looking up all the functions you do not 
understand in the man pages e.g. ?match.  
Remember, you can search for things 
inside R by using double questionmark, 
??match, finding versions of match 
existing inside other installed 
packages, e.g.  raster::match and 
posterior::match, perhaps this exercise 
becomes writing ones own version of lm 
inside ones own package?

Best,
Rasmus


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Thu Mar 16 15:53:33 2023
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Thu, 16 Mar 2023 14:53:33 +0000
Subject: [R] Trying to learn how to write an "advanced" function
In-Reply-To: <ZBMOn1sTNtStYY1q@posteo.no>
References: <MW4PR03MB63630BA0F1173094445249BEE2BC9@MW4PR03MB6363.namprd03.prod.outlook.com>
 <ZBMOn1sTNtStYY1q@posteo.no>
Message-ID: <MW4PR03MB6363F638129478D764FC9F73E2BC9@MW4PR03MB6363.namprd03.prod.outlook.com>

Although I owe thanks to Ramus and Ivan, I still do not know how to write and "advanced" function. 

My most recent try (after looking at the material Ramus and Ivan set) still does not work. I am trying to run the lm function on two different formulae:
1) y~x, 
2) y~x+z
Any corrections would be appreciated!

Thank you,
John


doit <- function(x){
  ds <- deparse(substitute(x))
  cat("1\n")
  print(ds)
  eval(lm(quote(ds)),parent.frame())
}

# define data that will be used in regression
y <- 1:10
x <- y+rnorm(10)
z <- c(rep(1,5),rep(2,5))
# Show what x, y  and z look like
rbind(x,y,z)

# run formula y~x
JD <- doit(y~x)
JD

# run formula y~x+z
JD2 <- doit(y~x+z)
JD2



________________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of Rasmus Liland <jral at posteo.no>
Sent: Thursday, March 16, 2023 8:42 AM
To: r-help
Subject: Re: [R] Trying to learn how to write an "advanced" function

On 2023-03-16 12:11 +0000, Sorkin, John wrote:
> (1) can someone point me to an
> explanation of match.call or match
> that can be understood by the
> uninitiated?

Dear John,

the man page ?match tells us that match
matches the first vector against the
second, and returns a vector of indecies
the same length as the first, e.g.

        > match(c("formula", "data", "subset", "weights", "na.action", "offset"), c("Maryland", "formula", "data", "subset", "weights", "na.action", "offset", "Sorkin", "subset"), 0L)
        [1] 2 3 4 5 6 7

perhaps a bad answer ...

> (2) can someone point me to a document
> that will help me learn how to write
> an "advanced" function?

Perhaps the background here is looking
at the lm function as a basis for
writing something more advanced, then
the exercise becomes looking at
dput(lm), understanding every line by
looking up all the functions you do not
understand in the man pages e.g. ?match.
Remember, you can search for things
inside R by using double questionmark,
??match, finding versions of match
existing inside other installed
packages, e.g.  raster::match and
posterior::match, perhaps this exercise
becomes writing ones own version of lm
inside ones own package?

Best,
Rasmus

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C8e0b6e6627474ceceed608db261ca383%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638145676673285449%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=coJy2i9Nj%2Fs23ElOAM7kaYpTTBSKDo5B557tNf2twSA%3D&reserved=0
PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C8e0b6e6627474ceceed608db261ca383%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638145676673285449%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=eByabBUy5c7zdefrSSq3xbgjMTcsxwbBGD33lTwv4Pg%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.


From 538280 @end|ng |rom gm@||@com  Thu Mar 16 16:12:08 2023
From: 538280 @end|ng |rom gm@||@com (Greg Snow)
Date: Thu, 16 Mar 2023 09:12:08 -0600
Subject: [R] Trying to learn how to write an "advanced" function
In-Reply-To: <MW4PR03MB63630BA0F1173094445249BEE2BC9@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <MW4PR03MB63630BA0F1173094445249BEE2BC9@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <CAFEqCdzT9Q5pxsu2vK1cTHPHiu+r=eCx62sE+NL3-WRR4aT4ug@mail.gmail.com>

The first thing to understand is that despite similarity in names,
`match` and `match.call` are doing very different things, which should
not be confused with each other.

For understanding what a function is doing, it is helpful to watch
what it does at each step.  With functions like `lm` that are built
in, we cannot easily modify the source code with print statements and
the like, then rerun, but the `trace` and `browser` functions are nice
for allowing us to debug these functions. If you run the following
line:

trace(lm, browser, at=7)

Then this will insert a call to `browser` into the `lm` function which
when you next run `lm` will pause at about line 7 (just after the code
that you show) and allow you to examine the values of `mf` and `m` and
any other variables.

Unfortunately just printing `mf` is not super helpful for this, since
it prettys the call, but printing as.list(mf) is more useful.
Basically mf will hold information on how `lm` was called, the first
element is that `lm` is the function that was called, then further
elements are the arguments that were passed in.

The line with `match` then identifies which elements of mf correspond
to the list of arguments that we want to keep for the next part
(essentially the next few lines create a call object to the
`model.frame` funcion with the same arguments that you passed to `lm`
but without any arguments not in the short list.

When in `browser` mode you can step through the evaluation of the
function with "s" or "n" and quit everything with "Q" (see ?browser
for details)

Don't forget to call `untrace(lm)` when you are through.

On Thu, Mar 16, 2023 at 6:16?AM Sorkin, John <jsorkin at som.umaryland.edu> wrote:
>
> I am trying to understand how to write an "advanced" function. To do so, I am examining the lm fucnction, a portion of which is pasted below. I am unable to understand what match.call or   match does, and several other parts of lm, even when I read the help page for match.call or match.
> (1) can someone point me to an explanation of match.call or match that can be understood by the uninitiated?
> (2) can someone point me to a document that will help me learn how to write an "advanced" function?
>
> Thank you,
> John
>
> > lm
> function (formula, data, subset, weights, na.action, method = "qr",
>     model = TRUE, x = FALSE, y = FALSE, qr = TRUE, singular.ok = TRUE,
>     contrasts = NULL, offset, ...)
> {
>     ret.x <- x
>     ret.y <- y
>     cl <- match.call()
>     mf <- match.call(expand.dots = FALSE)
>     m <- match(c("formula", "data", "subset", "weights", "na.action",
>         "offset"), names(mf), 0L)
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com


From berw|n@tur|@ch @end|ng |rom gm@||@com  Thu Mar 16 16:19:33 2023
From: berw|n@tur|@ch @end|ng |rom gm@||@com (Berwin A Turlach)
Date: Thu, 16 Mar 2023 23:19:33 +0800
Subject: [R] Trying to learn how to write an "advanced" function
In-Reply-To: <MW4PR03MB6363F638129478D764FC9F73E2BC9@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <MW4PR03MB63630BA0F1173094445249BEE2BC9@MW4PR03MB6363.namprd03.prod.outlook.com>
 <ZBMOn1sTNtStYY1q@posteo.no>
 <MW4PR03MB6363F638129478D764FC9F73E2BC9@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <20230316231933.67dd4597@absentia>

G'day John,

For these snippets to produce what I think you want them to produce it
is just necessary to define doit() as follows:

doit <- function(x){
 lm(formula=x)
}


R> # run formula y~x
R> JD <- doit(y~x)
R> JD

Call:
lm(formula = x)

Coefficients:
(Intercept)            x  
     0.8403       0.8558  

R> # run formula y~x+z
R> JD2 <- doit(y~x+z)
R> JD2

Call:
lm(formula = x)

Coefficients:
(Intercept)            x            z  
    -0.7490       0.6237       1.9023  


Cheers,

	Berwin


On Thu, 16 Mar 2023 14:53:33 +0000
"Sorkin, John" <jsorkin at som.umaryland.edu> wrote:

> Although I owe thanks to Ramus and Ivan, I still do not know how to
> write and "advanced" function. 
> 
> My most recent try (after looking at the material Ramus and Ivan set)
> still does not work. I am trying to run the lm function on two
> different formulae: 1) y~x, 2) y~x+z
> Any corrections would be appreciated!
> 
> Thank you,
> John
> 
> 
> doit <- function(x){
>   ds <- deparse(substitute(x))
>   cat("1\n")
>   print(ds)
>   eval(lm(quote(ds)),parent.frame())
> }
> 
> # define data that will be used in regression
> y <- 1:10
> x <- y+rnorm(10)
> z <- c(rep(1,5),rep(2,5))
> # Show what x, y  and z look like
> rbind(x,y,z)
> 
> # run formula y~x
> JD <- doit(y~x)
> JD
> 
> # run formula y~x+z
> JD2 <- doit(y~x+z)
> JD2


From kry|ov@r00t @end|ng |rom gm@||@com  Thu Mar 16 16:25:16 2023
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Thu, 16 Mar 2023 18:25:16 +0300
Subject: [R] Trying to learn how to write an "advanced" function
In-Reply-To: <MW4PR03MB6363F638129478D764FC9F73E2BC9@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <MW4PR03MB63630BA0F1173094445249BEE2BC9@MW4PR03MB6363.namprd03.prod.outlook.com>
 <ZBMOn1sTNtStYY1q@posteo.no>
 <MW4PR03MB6363F638129478D764FC9F73E2BC9@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <20230316182516.7f79385c@arachnoid>

? Thu, 16 Mar 2023 14:53:33 +0000
"Sorkin, John" <jsorkin at som.umaryland.edu> ?????:

> I am trying to run the lm function on two different formulae:
> 1) y~x, 
> 2) y~x+z

A formula is already an unevaluated object that doesn't need further
quoting; thus it can be passed around like a normal variable. It
consists of a call to the `~` operator and an attached environment that
can be accessed using environment(the_formula_object). This makes it
reference your variables if they are accessible at the point where
you're creating the formula.

Wouldn't it be better to explicitly package your data in a data.frame
and pass that to lm together with the formula? Then no non-standard
evaluation is needed at all:

doit <- function(formula, data) lm(formula, data)
data <- data.frame(
 y = 1:10, x = 1:10 + rnorm(10), z = c(rep(1,5), rep(2,5))
)
doit(y~x, data)
doit(y~x+z, data)

> doit <- function(x){
>   ds <- deparse(substitute(x))
>   cat("1\n")
>   print(ds)
>   eval(lm(quote(ds)),parent.frame())
> }

If you do want to make a "macro" that would construct a call and
evaluate it as if you ran it yourself in the calling environment of the
"macro", the trick is to (1) construct an expression and (2) feed it to
eval().

One problem here is that you feed the substituted expression to
deparse(). deparse() returns a source code string (maybe a string
vector of length() > 1!), which is useful for plot labels, but is on a
level too low for computing on the language itself. Keep the expression
object returned by substitute():

ds <- substitute(x)

The other problem is that eval() doesn't quote its arguments itself, so
eval(lm(...)) will first evaluate lm() and then feed the result to
eval(). What you need to do instead is create a call to lm. There is
more than one way to do it:

expr <- quote(lm())
expr[[2]] <- ds

# or

expr <- call('lm', ds)

Once you have the call set up the way you want it, you can evaluate it:

eval(expr, parent.frame())

-- 
Best regards,
Ivan


From 538280 @end|ng |rom gm@||@com  Thu Mar 16 16:28:14 2023
From: 538280 @end|ng |rom gm@||@com (Greg Snow)
Date: Thu, 16 Mar 2023 09:28:14 -0600
Subject: [R] Trying to learn how to write an "advanced" function
In-Reply-To: <MW4PR03MB6363F638129478D764FC9F73E2BC9@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <MW4PR03MB63630BA0F1173094445249BEE2BC9@MW4PR03MB6363.namprd03.prod.outlook.com>
 <ZBMOn1sTNtStYY1q@posteo.no>
 <MW4PR03MB6363F638129478D764FC9F73E2BC9@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <CAFEqCdy3UO+f3x2E+werteTwBpz=wB7Le2Y=c0gu=A7CbaBdfQ@mail.gmail.com>

I think the tricky part here is the different types of `quote`.  I
would use `bquote` here, try:

doit <- function(x){
  ds <- deparse(substitute(x))
  cat("1\n")
  print(ds)
  eval(bquote(lm(.(ds))),parent.frame())
}

Just note that getting the parent.frame() portion right in anything
more complicated can be very tricky, it is better to pass in the data.

On Thu, Mar 16, 2023 at 8:54?AM Sorkin, John <jsorkin at som.umaryland.edu> wrote:
>
> Although I owe thanks to Ramus and Ivan, I still do not know how to write and "advanced" function.
>
> My most recent try (after looking at the material Ramus and Ivan set) still does not work. I am trying to run the lm function on two different formulae:
> 1) y~x,
> 2) y~x+z
> Any corrections would be appreciated!
>
> Thank you,
> John
>
>
> doit <- function(x){
>   ds <- deparse(substitute(x))
>   cat("1\n")
>   print(ds)
>   eval(lm(quote(ds)),parent.frame())
> }
>
> # define data that will be used in regression
> y <- 1:10
> x <- y+rnorm(10)
> z <- c(rep(1,5),rep(2,5))
> # Show what x, y  and z look like
> rbind(x,y,z)
>
> # run formula y~x
> JD <- doit(y~x)
> JD
>
> # run formula y~x+z
> JD2 <- doit(y~x+z)
> JD2
>
>
>
> ________________________________________
> From: R-help <r-help-bounces at r-project.org> on behalf of Rasmus Liland <jral at posteo.no>
> Sent: Thursday, March 16, 2023 8:42 AM
> To: r-help
> Subject: Re: [R] Trying to learn how to write an "advanced" function
>
> On 2023-03-16 12:11 +0000, Sorkin, John wrote:
> > (1) can someone point me to an
> > explanation of match.call or match
> > that can be understood by the
> > uninitiated?
>
> Dear John,
>
> the man page ?match tells us that match
> matches the first vector against the
> second, and returns a vector of indecies
> the same length as the first, e.g.
>
>         > match(c("formula", "data", "subset", "weights", "na.action", "offset"), c("Maryland", "formula", "data", "subset", "weights", "na.action", "offset", "Sorkin", "subset"), 0L)
>         [1] 2 3 4 5 6 7
>
> perhaps a bad answer ...
>
> > (2) can someone point me to a document
> > that will help me learn how to write
> > an "advanced" function?
>
> Perhaps the background here is looking
> at the lm function as a basis for
> writing something more advanced, then
> the exercise becomes looking at
> dput(lm), understanding every line by
> looking up all the functions you do not
> understand in the man pages e.g. ?match.
> Remember, you can search for things
> inside R by using double questionmark,
> ??match, finding versions of match
> existing inside other installed
> packages, e.g.  raster::match and
> posterior::match, perhaps this exercise
> becomes writing ones own version of lm
> inside ones own package?
>
> Best,
> Rasmus
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C8e0b6e6627474ceceed608db261ca383%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638145676673285449%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=coJy2i9Nj%2Fs23ElOAM7kaYpTTBSKDo5B557tNf2twSA%3D&reserved=0
> PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C8e0b6e6627474ceceed608db261ca383%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638145676673285449%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=eByabBUy5c7zdefrSSq3xbgjMTcsxwbBGD33lTwv4Pg%3D&reserved=0
> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com


From bgunter@4567 @end|ng |rom gm@||@com  Thu Mar 16 17:16:35 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 16 Mar 2023 09:16:35 -0700
Subject: [R] Trying to learn how to write an "advanced" function
In-Reply-To: <MW4PR03MB63630BA0F1173094445249BEE2BC9@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <MW4PR03MB63630BA0F1173094445249BEE2BC9@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <CAGxFJbRzjNr_SUYyePVmJMoHe6yeWCMG9Qhr37r1fVBhu1po5w@mail.gmail.com>

In addition to what has already been suggested, you can use debug (and
subsequently undebug) to browse a function step by step to see what each
step of the function is doing.

For your specific query about match.call(), I suspect that your
'puzzlement' is that you don't know what a function call is exactly. The
references you were given or even an internet search would help with
that.Perhaps this also might be useful:

f <- function(x,yikes,wt=3,...) match.call()
z <- f(y = 0, x = 2, more = 'a')
z
str(z)
as.list(z)

Cheers,
Bert



On Thu, Mar 16, 2023 at 5:16?AM Sorkin, John <jsorkin at som.umaryland.edu>
wrote:

> I am trying to understand how to write an "advanced" function. To do so, I
> am examining the lm fucnction, a portion of which is pasted below. I am
> unable to understand what match.call or   match does, and several other
> parts of lm, even when I read the help page for match.call or match.
> (1) can someone point me to an explanation of match.call or match that can
> be understood by the uninitiated?
> (2) can someone point me to a document that will help me learn how to
> write an "advanced" function?
>
> Thank you,
> John
>
> > lm
> function (formula, data, subset, weights, na.action, method = "qr",
>     model = TRUE, x = FALSE, y = FALSE, qr = TRUE, singular.ok = TRUE,
>     contrasts = NULL, offset, ...)
> {
>     ret.x <- x
>     ret.y <- y
>     cl <- match.call()
>     mf <- match.call(expand.dots = FALSE)
>     m <- match(c("formula", "data", "subset", "weights", "na.action",
>         "offset"), names(mf), 0L)
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


