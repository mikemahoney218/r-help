From rmh @end|ng |rom temp|e@edu  Fri Mar  1 00:12:14 2024
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Thu, 29 Feb 2024 23:12:14 +0000
Subject: [R] [External]  converting MATLAB -> R | element-wise operation
In-Reply-To: <297DC7D4-CD0A-4EE9-A733-BDF59B86A8E4@gmail.com>
References: <8ec0980a-1988-484d-bd30-6837f5467e1a@gmail.com>
 <393E5DD9-BFA1-44E2-A0B3-F3FD1BB29729@dcn.davis.ca.us>
 <297DC7D4-CD0A-4EE9-A733-BDF59B86A8E4@gmail.com>
Message-ID: <B07BE572-BFAA-4EC3-8D69-28AE94330FB5@temple.edu>

I decided to do a direct comparison of transpose and sweep.


library(microbenchmark)

NN <- matrix(c(1, 2, 3, 4, 5, 6), nrow = 2, byrow = TRUE)  # Example matrix
lambda <- c(2, 3, 4)  # Example vector
colNN <- t(NN)

microbenchmark(
  sweep     = sweep(NN, 2, lambda, "/"),
  transpose = t(t(NN)/lambda),
  colNN     = colNN/lambda
)


Unit: nanoseconds
      expr   min    lq     mean median      uq   max neval cld
     sweep 13817 14145 15115.06  14350 14657.5 75932   100 a  
 transpose  1845  1927  2151.68   2132  2214.0  7093   100  b 
     colNN    82   123   141.86    123   164.0   492   100   c

Note that transpose is much faster than sweep because it is doing less work,
I believe essentially just changing the order of indexing.

Using the natural sequencing for column-ordered matrices is much much faster.

> On Feb 28, 2024, at 18:43, peter dalgaard <pdalgd at gmail.com> wrote:
> 
>> rbind(1:3,4:6)/t(matrix(c(2,3,4), 3,2))


From |eo@m@d@ @end|ng |rom @yon|c@eu  Fri Mar  1 01:28:18 2024
From: |eo@m@d@ @end|ng |rom @yon|c@eu (Leo Mada)
Date: Fri, 1 Mar 2024 00:28:18 +0000
Subject: [R] Clustering Functions used by Reverse-Dependencies
In-Reply-To: <20240228113619.676990bc@Tarkus>
References: <VI1P192MB0095C4BE0EB8BE16FAABD3D884542@VI1P192MB0095.EURP192.PROD.OUTLOOK.COM>
 <20240228113619.676990bc@Tarkus>
Message-ID: <VI1P192MB0095BC51A36ACA9F44314602845F2@VI1P192MB0095.EURP192.PROD.OUTLOOK.COM>

Dear Ivan,

Thank you very much for this interesting information.

Regarding:
"For well-behaved packages that declare their dependencies correctly,
parsing the NAMESPACE for importFrom() and import() calls should give
you the explicit imports."

I did learn something new (I am not very experienced in package writing). Unfortunately, Roxygen2 as of the current version still suggests to use the pkg::fname approach:
"If you are using just a few functions from another package, we recommending adding the package to the Imports: field of the DESCRIPTION file and calling the functions explicitly using ::, e.g., pkg::fun()."
https://roxygen2.r-lib.org/articles/namespace.html

Regarding analysing the actual code: it is good to know that CMD check has also some functionality. I will look into it, when I find some free time.

tools:::.check_packages_used is a few pages of code. On the other hand, the help page for codetools::checkUsage is quite cryptic. But it's good to know at least where to look.

Sincerely,

Leonard

________________________________
From: Ivan Krylov <ikrylov at disroot.org>
Sent: Wednesday, February 28, 2024 10:36 AM
To: Leo Mada via R-help <r-help at r-project.org>
Cc: Leo Mada <leo.mada at syonic.eu>
Subject: Re: [R] Clustering Functions used by Reverse-Dependencies

? Sat, 24 Feb 2024 03:08:26 +0000
Leo Mada via R-help <r-help at r-project.org> ?????:

> Are there any tools to extract the function names called by
> reverse-dependencies?

For well-behaved packages that declare their dependencies correctly,
parsing the NAMESPACE for importFrom() and import() calls should give
you the explicit imports. (What if the package imports the whole
dependency? The safe assumption is that all functions are used, but it
comes with false positives. You could also walk the package code
looking for function names that may belong to the imported package, but
that may involve both false positives and false negatives.)

For the rest of the imports and uses of weak dependencies, you'll have
to walk the package code looking for the uses of the `::` operator. See
how R CMD check walks the package code in functions
tools:::.check_packages_used and codetools::checkUsage.

A less-well-behaved package can always load a namespace during runtime
and choose the functions to call depending on the phase of the moon or
weather on Jupiter. For these, like for the halting problem, there's no
general solution: the package could be written to say, "if Leonard's
function says I'm about to call foo::bar, I won't do it, otherwise I
will".

--
Best regards,
Ivan

	[[alternative HTML version deleted]]


From rmh @end|ng |rom temp|e@edu  Fri Mar  1 04:12:02 2024
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Fri, 1 Mar 2024 03:12:02 +0000
Subject: [R] [External]  converting MATLAB -> R | element-wise operation
In-Reply-To: <B07BE572-BFAA-4EC3-8D69-28AE94330FB5@temple.edu>
References: <8ec0980a-1988-484d-bd30-6837f5467e1a@gmail.com>
 <393E5DD9-BFA1-44E2-A0B3-F3FD1BB29729@dcn.davis.ca.us>
 <297DC7D4-CD0A-4EE9-A733-BDF59B86A8E4@gmail.com>
 <B07BE572-BFAA-4EC3-8D69-28AE94330FB5@temple.edu>
Message-ID: <65420ED3-7098-46BF-9213-B349B210E6FE@temple.edu>

I added two more rows

library(microbenchmark)

NN <- matrix(c(1, 2, 3, 4, 5, 6), nrow = 2, byrow = TRUE)  # Example matrix
lambda <- c(2, 3, 4)  # Example vector
colNN <- t(NN)
matlam <- matrix(lambda, byrow=TRUE, nrow=2, ncol=3)

microbenchmark(
  sweep     = sweep(NN, 2, lambda, "/"),
  transpose = t(t(NN)/lambda),
  colNN     = colNN/lambda,
  fullsize  = NN / matrix(lambda, byrow=TRUE, nrow=2, ncol=3),
  rowlam  = NN / matlam
)

Unit: nanoseconds
      expr   min    lq     mean  median      uq   max neval cld
     sweep 12546 12792 13919.91 12997.0 13325.0 85608   100 a
 transpose  1640  1763  1986.04  1947.5  2050.0  7462   100  b
     colNN    82    82   161.13   123.0   123.0  3854   100   c
  fullsize   738   820   932.34   881.5   963.5  2829   100  bc
    rowlam    82   123   168.92   164.0   164.0   820   100   c

reshaping the denominator to the correct size in advance is very helpful if you will be doing this division more than once.



> On Feb 29, 2024, at 18:12, Richard M. Heiberger <rmh at temple.edu> wrote:
>
> I decided to do a direct comparison of transpose and sweep.
>
>
> library(microbenchmark)
>
> NN <- matrix(c(1, 2, 3, 4, 5, 6), nrow = 2, byrow = TRUE)  # Example matrix
> lambda <- c(2, 3, 4)  # Example vector
> colNN <- t(NN)
>
> microbenchmark(
>  sweep     = sweep(NN, 2, lambda, "/"),
>  transpose = t(t(NN)/lambda),
>  colNN     = colNN/lambda
> )
>
>
> Unit: nanoseconds
>      expr   min    lq     mean median      uq   max neval cld
>     sweep 13817 14145 15115.06  14350 14657.5 75932   100 a
> transpose  1845  1927  2151.68   2132  2214.0  7093   100  b
>     colNN    82   123   141.86    123   164.0   492   100   c
>
> Note that transpose is much faster than sweep because it is doing less work,
> I believe essentially just changing the order of indexing.
>
> Using the natural sequencing for column-ordered matrices is much much faster.
>
>> On Feb 28, 2024, at 18:43, peter dalgaard <pdalgd at gmail.com> wrote:
>>
>>> rbind(1:3,4:6)/t(matrix(c(2,3,4), 3,2))
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.r-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ev@n@cooch @end|ng |rom gm@||@com  Fri Mar  1 02:40:00 2024
From: ev@n@cooch @end|ng |rom gm@||@com (Evan Cooch)
Date: Thu, 29 Feb 2024 20:40:00 -0500
Subject: [R] [External]  converting MATLAB -> R | element-wise operation
In-Reply-To: <B07BE572-BFAA-4EC3-8D69-28AE94330FB5@temple.edu>
References: <8ec0980a-1988-484d-bd30-6837f5467e1a@gmail.com>
 <393E5DD9-BFA1-44E2-A0B3-F3FD1BB29729@dcn.davis.ca.us>
 <297DC7D4-CD0A-4EE9-A733-BDF59B86A8E4@gmail.com>
 <B07BE572-BFAA-4EC3-8D69-28AE94330FB5@temple.edu>
Message-ID: <cd30267e-a990-46b7-a158-8bc9a3e34232@gmail.com>

Very interesting - thanks! Most of my problems are not limited by 
compute speed, but its clear that for some sorts of compute-intensive 
problems, sweep might be a limiting approach.

On 2/29/2024 6:12 PM, Richard M. Heiberger wrote:
> I decided to do a direct comparison of transpose and sweep.
>
>
> library(microbenchmark)
>
> NN <- matrix(c(1, 2, 3, 4, 5, 6), nrow = 2, byrow = TRUE)  # Example matrix
> lambda <- c(2, 3, 4)  # Example vector
> colNN <- t(NN)
>
> microbenchmark(
>    sweep     = sweep(NN, 2, lambda, "/"),
>    transpose = t(t(NN)/lambda),
>    colNN     = colNN/lambda
> )
>
>
> Unit: nanoseconds
>        expr   min    lq     mean median      uq   max neval cld
>       sweep 13817 14145 15115.06  14350 14657.5 75932   100 a
>   transpose  1845  1927  2151.68   2132  2214.0  7093   100  b
>       colNN    82   123   141.86    123   164.0   492   100   c
>
> Note that transpose is much faster than sweep because it is doing less work,
> I believe essentially just changing the order of indexing.
>
> Using the natural sequencing for column-ordered matrices is much much faster.
>
>> On Feb 28, 2024, at 18:43, peter dalgaard<pdalgd at gmail.com>  wrote:
>>
>>> rbind(1:3,4:6)/t(matrix(c(2,3,4), 3,2))
>

	[[alternative HTML version deleted]]


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Fri Mar  1 09:49:19 2024
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Fri, 1 Mar 2024 09:49:19 +0100
Subject: [R] converting MATLAB -> R | element-wise operation
In-Reply-To: <20240228174227.38c5a060@dep59159.uniwa.uwa.edu.au>
References: <8ec0980a-1988-484d-bd30-6837f5467e1a@gmail.com>
 <393E5DD9-BFA1-44E2-A0B3-F3FD1BB29729@dcn.davis.ca.us>
 <20240228174227.38c5a060@dep59159.uniwa.uwa.edu.au>
Message-ID: <26081.38543.928756.456074@stat.math.ethz.ch>

>>>>> Berwin A Turlach 
>>>>>     on Wed, 28 Feb 2024 17:42:27 +0800 writes:

    > On Tue, 27 Feb 2024 13:51:25 -0800 Jeff Newmiller via
    > R-help <r-help at r-project.org> wrote:

    >> The fundamental data type in Matlab is a matrix... they
    >> don't have vectors, they have Nx1 matrices and 1xM
    >> matrices.

    > Also known as column vectors and row vectors.  :)
 
    >> Vectors don't have any concept of "row" vs. "column".

    > They do in (numerical) linear algebra.  And MATLAB was
    > written by numerical analysts for numerical analysts. :-)
    > So they distinguish between row and column vectors.

    > GAUSS also distinguishes between row and column vectors.

There are *vectors* and they belong to a vector space and that's it.
(and yes, arrays of a given rank and dimensions also are
 elements of a vector space, and hence matrices are, and then
 indeed, a 3x1 matrix and a 1x3 matrix are *not* members of the
 same vector space -- even though the two vector spaces are
 isomorphic to each other)

The matlab induced --> applied linear algebra / math
"column- and row-vectors"  have been convenient because then
everything is a matrix (or scalar), and that fits well with a
product called "matlab" which is short for "matrix lab(oratory)".
BUT they are  mathematically confusing and therefore in my view
very undesirable terminology.

I'm very very strongly with Jeff that "the only" consistent
language would be to call them 1-row matrix and 1-column matrix,
because that's what they are, well defined and perfect within 
the well defined math realm of linear algebra.

Yes, matrix-vector calculus , scalar products, bilinear forms, ...
can be generalized in such ways that 1-row matrices and 1-column
matrices can be treated equivalently to vectors and vice versa
.. and that is sometimes convenient. 

Still, the "column-vector"  and "row-vector"  terms have
lead to much confusion in my view,
because really  Nx1  or  1xM  are dimensions of matrices and
*not* of any vectors  ..


    > R (and S) does not distinguish between row and column
    > vectors, and is in this aspect quite unique among the
    > groups of vector-oriented programming languages (AFAICT).

I agree. And that's good -- because "vectors are vectors" aka
"a rank-1 array is a rank-1 array is a rank-1 array" (Richard O'Keefe)

    > But treating every vector as a column vector, together
    > with the recycling rule, allows for the easy coding of the
    > matrix/vector calculations that one (mostly) comes across
    > in statistical computing.  For the rare occasion when this
    > is not true the sweep() command is provided, typically
    > remembered once one was bitten by the lack of distinction
    > between row and column vectors. :)

    > Cheers,
    > 	Berwin

Martin


From |@go@g|ne @end|ng |rom @jd@e@  Fri Mar  1 12:36:46 2024
From: |@go@g|ne @end|ng |rom @jd@e@ (=?UTF-8?Q?Iago_Gin=C3=A9_V=C3=A1zquez?=)
Date: Fri, 1 Mar 2024 12:36:46 +0100
Subject: [R] gsub issue with consecutive pattern finds
Message-ID: <ce1383d4-8339-47a3-b56c-11c4759e905a@sjd.es>

Hi all,

I tested next command:

gsub("([aeiouAEIOU])([aeiouAEIOU])", "\\1_\\2", "aerioue")

with the following output:

[1] "a_eri_ou_e"

So, there are two consecutive vowels where an underscore is not added.

May it be a bug? Is it expected (bug or not)? Is there any chance to get 
what I want (an underscore between each pair of consecutive vowels)?


Thank you!

Best regards,

Iago

	[[alternative HTML version deleted]]


From |kw@|mmo @end|ng |rom gm@||@com  Fri Mar  1 12:49:02 2024
From: |kw@|mmo @end|ng |rom gm@||@com (Iris Simmons)
Date: Fri, 1 Mar 2024 06:49:02 -0500
Subject: [R] gsub issue with consecutive pattern finds
In-Reply-To: <ce1383d4-8339-47a3-b56c-11c4759e905a@sjd.es>
References: <ce1383d4-8339-47a3-b56c-11c4759e905a@sjd.es>
Message-ID: <CADNULg-j9WNxR1CK6ajSY0jGGk-f+83Bhf2rLtV0PSBH3YTXuQ@mail.gmail.com>

Hi Iago,


This is not a bug. It is expected. Patterns may not overlap. However, there
is a way to get the result you want using perl:

```R
gsub("([aeiouAEIOU])(?=[aeiouAEIOU])", "\\1_", "aerioue", perl = TRUE)
```

The specific change I made is called a positive lookahead, you can read
more about it here:

https://www.regular-expressions.info/lookaround.html

It's a way to check for a piece of text without consuming it in the match.

Also, since you don't care about character case, it might be more legible
to add ignore.case = TRUE and remove the upper case characters:

```R
gsub("([aeiou])(?=[aeiou])", "\\1_", "aerioue", perl = TRUE, ignore.case =
TRUE)

## or

gsub("(?i)([aeiou])(?=[aeiou])", "\\1_", "aerioue", perl = TRUE)
```

I hope this helps!


On Fri, Mar 1, 2024, 06:37 Iago Gin? V?zquez <iago.gine at sjd.es> wrote:

> Hi all,
>
> I tested next command:
>
> gsub("([aeiouAEIOU])([aeiouAEIOU])", "\\1_\\2", "aerioue")
>
> with the following output:
>
> [1] "a_eri_ou_e"
>
> So, there are two consecutive vowels where an underscore is not added.
>
> May it be a bug? Is it expected (bug or not)? Is there any chance to get
> what I want (an underscore between each pair of consecutive vowels)?
>
>
> Thank you!
>
> Best regards,
>
> Iago
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From |@go@g|ne @end|ng |rom @jd@e@  Fri Mar  1 12:52:23 2024
From: |@go@g|ne @end|ng |rom @jd@e@ (=?UTF-8?Q?Iago_Gin=C3=A9_V=C3=A1zquez?=)
Date: Fri, 1 Mar 2024 12:52:23 +0100
Subject: [R] gsub issue with consecutive pattern finds
In-Reply-To: <CADNULg-j9WNxR1CK6ajSY0jGGk-f+83Bhf2rLtV0PSBH3YTXuQ@mail.gmail.com>
References: <ce1383d4-8339-47a3-b56c-11c4759e905a@sjd.es>
 <CADNULg-j9WNxR1CK6ajSY0jGGk-f+83Bhf2rLtV0PSBH3YTXuQ@mail.gmail.com>
Message-ID: <ad6609e8-a49a-469c-9986-d9c043a5c339@sjd.es>

Hi Iris,

Thank you. Further, very nice solution.

Best,

Iago

On 01/03/2024 12:49, Iris Simmons wrote:
> Hi Iago,
>
>
> This is not a bug. It is expected. Patterns may not overlap. However, there
> is a way to get the result you want using perl:
>
> ```R
> gsub("([aeiouAEIOU])(?=[aeiouAEIOU])", "\\1_", "aerioue", perl = TRUE)
> ```
>
> The specific change I made is called a positive lookahead, you can read
> more about it here:
>
> https://www.regular-expressions.info/lookaround.html
>
> It's a way to check for a piece of text without consuming it in the match.
>
> Also, since you don't care about character case, it might be more legible
> to add ignore.case = TRUE and remove the upper case characters:
>
> ```R
> gsub("([aeiou])(?=[aeiou])", "\\1_", "aerioue", perl = TRUE, ignore.case =
> TRUE)
>
> ## or
>
> gsub("(?i)([aeiou])(?=[aeiou])", "\\1_", "aerioue", perl = TRUE)
> ```
>
> I hope this helps!
>
>
> On Fri, Mar 1, 2024, 06:37 Iago Gin? V?zquez<iago.gine at sjd.es>  wrote:
>
>> Hi all,
>>
>> I tested next command:
>>
>> gsub("([aeiouAEIOU])([aeiouAEIOU])", "\\1_\\2", "aerioue")
>>
>> with the following output:
>>
>> [1] "a_eri_ou_e"
>>
>> So, there are two consecutive vowels where an underscore is not added.
>>
>> May it be a bug? Is it expected (bug or not)? Is there any chance to get
>> what I want (an underscore between each pair of consecutive vowels)?
>>
>>
>> Thank you!
>>
>> Best regards,
>>
>> Iago
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org  mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
	[[alternative HTML version deleted]]


From btyner @end|ng |rom gm@||@com  Fri Mar  1 16:46:53 2024
From: btyner @end|ng |rom gm@||@com (Benjamin Tyner)
Date: Fri, 1 Mar 2024 10:46:53 -0500
Subject: [R] installation: while running make,
 unable to run pdflatex on 'NEWS.tex'
Message-ID: <505bdcfd-4dbc-4f78-8b90-58dad3c478d9@gmail.com>


A kind member of R-core suggested this is due to a misconfiguration on 
my system, and to post it to the mailing list for troubleshooting.

When trying to build R version 4.3.3, in at least two places during the 
process it gives LaTeX errors of the form:

(example 1)

    you should 'make docs' now ...
    make[1]: Entering directory '/home/btyner/R-4.3.3/doc'
    creating doc/NEWS
    creating doc/NEWS.pdf
    Error in texi2dvi(file = file, pdf = TRUE, clean = clean, quiet =
    quiet, :
    unable to run pdflatex on 'NEWS.tex'
    LaTeX errors:
    ! LaTeX Error: File `pdftexcmds.sty' not found.

    Type X to quit or <RETURN> to proceed,
    or enter new name. (Default extension: sty)

    ! Emergency stop.
    <read *>

    l.108 RequirePackage{pdftexcmds}[2018/09/10]
    ^^M
    ! ==> Fatal error occurred, no output PDF file produced!
    Calls: <Anonymous> -> texi2pdf -> texi2dvi
    Execution halted
    make[1]: /*/ [Makefile:74: NEWS.pdf] Error 1
    make[1]: Leaving directory '/home/btyner/R-4.3.3/doc'
    make: [Makefile:73: docs] Error 2 (ignored)

(example 2)

    make[1]: Entering directory '/home/btyner/R-4.3.3/src/library'
    building/updating vignettes for package 'grid' ...
    building/updating vignettes for package 'parallel' ...
    building/updating vignettes for package 'utils' ...
    building/updating vignettes for package 'stats' ...
    processing 'reshape.Rnw'
    Error: compiling TeX file 'reshape.tex' failed with message:
    unable to run pdflatex on 'reshape.tex'
    LaTeX errors:
    ! LaTeX Error: File `pdftexcmds.sty' not found.

    Type X to quit or <RETURN> to proceed,
    or enter new name. (Default extension: sty)

    ! Emergency stop.
    <read *>

    l.108 RequirePackage{pdftexcmds}[2018/09/10]
    ^^M
    ! ==> Fatal error occurred, no output PDF file produced!
    Execution halted
    make[1]: ** [Makefile:103: vignettes] Error 1
    make[1]: Leaving directory '/home/btyner/R-4.3.3/src/library'
    make: ** [Makefile:81: vignettes] Error 2

here is my |pdflatex --version| info:

    pdfTeX 3.141592653-2.6-1.40.22 (TeX Live 2022/dev/Debian)
    kpathsea version 6.3.4/dev
    Compiled with libpng 1.6.37; using libpng 1.6.37
    Compiled with zlib 1.2.11; using zlib 1.2.11
    Compiled with xpdf version 4.03

my platform info:

    Platform: x86_64-pc-linux-gnu (64-bit)
    Running under: Ubuntu 22.04.4 LTS

I installed from this file with corresponding md5sum

    R-4.3.3.tar.xz 5602f5996107c346dba12a16e866d2e2

The specific commands I ran which led to the error were:

    wget https://cran.r-project.org/src/base/R-4/R-4.3.3.tar.xz
    mkdir R433
    tar xJf R-4.3.3.tar.xz
    cd R-4.3.3
    ./configure --prefix=/home/btyner/R433
    make

Happy to provide any additional information needed.


From btyner @end|ng |rom gm@||@com  Fri Mar  1 16:54:08 2024
From: btyner @end|ng |rom gm@||@com (Benjamin Tyner)
Date: Fri, 1 Mar 2024 10:54:08 -0500
Subject: [R] dput(..., file = stderr())
Message-ID: <3b322636-1fce-45cf-bbd1-d5388664ae51@gmail.com>

Curious to know if this warning is expected behavior, and if so, what is 
the recommended way instead:

     > dput(letters, file = stderr())
    c("a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l",
    "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y",
    "z")
    Warning message:
    In dput(letters, file = stderr()) : wrote too few characters

(I ask because it doesn't happen when using file = stdout())


From bgunter@4567 @end|ng |rom gm@||@com  Fri Mar  1 16:57:33 2024
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 1 Mar 2024 07:57:33 -0800
Subject: [R] gsub issue with consecutive pattern finds
In-Reply-To: <ad6609e8-a49a-469c-9986-d9c043a5c339@sjd.es>
References: <ce1383d4-8339-47a3-b56c-11c4759e905a@sjd.es>
 <CADNULg-j9WNxR1CK6ajSY0jGGk-f+83Bhf2rLtV0PSBH3YTXuQ@mail.gmail.com>
 <ad6609e8-a49a-469c-9986-d9c043a5c339@sjd.es>
Message-ID: <CAGxFJbTXW5us+ARwMOWgJkQGSSc-SX0A8zn2zxR2bK8S8gAb5A@mail.gmail.com>

Here's another *incorrect* way to do it -- incorrect because it will
not always work, unlike Iris's correct solution. But it does not
require PERL type matching. The idea: separate the two vowels in the
regex by a character that you know cannot appear (if there is such)
and match it optionally, e.g. with '*" repetition specifier. I used
"?" for the optional character below (which must be escaped).

>    gsub("([aeiouAEIOU])\\?*([aeiouAEIOU])", "\\1_\\2", "aerioue")
[1] "a_eri_ou_e"

Cheers,
Bert


On Fri, Mar 1, 2024 at 3:59?AM Iago Gin? V?zquez <iago.gine at sjd.es> wrote:
>
> Hi Iris,
>
> Thank you. Further, very nice solution.
>
> Best,
>
> Iago
>
> On 01/03/2024 12:49, Iris Simmons wrote:
> > Hi Iago,
> >
> >
> > This is not a bug. It is expected. Patterns may not overlap. However, there
> > is a way to get the result you want using perl:
> >
> > ```R
> > gsub("([aeiouAEIOU])(?=[aeiouAEIOU])", "\\1_", "aerioue", perl = TRUE)
> > ```
> >
> > The specific change I made is called a positive lookahead, you can read
> > more about it here:
> >
> > https://www.regular-expressions.info/lookaround.html
> >
> > It's a way to check for a piece of text without consuming it in the match.
> >
> > Also, since you don't care about character case, it might be more legible
> > to add ignore.case = TRUE and remove the upper case characters:
> >
> > ```R
> > gsub("([aeiou])(?=[aeiou])", "\\1_", "aerioue", perl = TRUE, ignore.case =
> > TRUE)
> >
> > ## or
> >
> > gsub("(?i)([aeiou])(?=[aeiou])", "\\1_", "aerioue", perl = TRUE)
> > ```
> >
> > I hope this helps!
> >
> >
> > On Fri, Mar 1, 2024, 06:37 Iago Gin? V?zquez<iago.gine at sjd.es>  wrote:
> >
> >> Hi all,
> >>
> >> I tested next command:
> >>
> >> gsub("([aeiouAEIOU])([aeiouAEIOU])", "\\1_\\2", "aerioue")
> >>
> >> with the following output:
> >>
> >> [1] "a_eri_ou_e"
> >>
> >> So, there are two consecutive vowels where an underscore is not added.
> >>
> >> May it be a bug? Is it expected (bug or not)? Is there any chance to get
> >> what I want (an underscore between each pair of consecutive vowels)?
> >>
> >>
> >> Thank you!
> >>
> >> Best regards,
> >>
> >> Iago
> >>
> >>          [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org  mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Fri Mar  1 17:00:01 2024
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 1 Mar 2024 08:00:01 -0800
Subject: [R] gsub issue with consecutive pattern finds
In-Reply-To: <CAGxFJbTXW5us+ARwMOWgJkQGSSc-SX0A8zn2zxR2bK8S8gAb5A@mail.gmail.com>
References: <ce1383d4-8339-47a3-b56c-11c4759e905a@sjd.es>
 <CADNULg-j9WNxR1CK6ajSY0jGGk-f+83Bhf2rLtV0PSBH3YTXuQ@mail.gmail.com>
 <ad6609e8-a49a-469c-9986-d9c043a5c339@sjd.es>
 <CAGxFJbTXW5us+ARwMOWgJkQGSSc-SX0A8zn2zxR2bK8S8gAb5A@mail.gmail.com>
Message-ID: <CAGxFJbQN3=CNMY9TfWaNikG+=4=Da5QK088XBrJj3L6AkWcDFw@mail.gmail.com>

Oh, wait a second. I misread your original post. Please ignore my
truly incorrect suggestion.

-- Bert

On Fri, Mar 1, 2024 at 7:57?AM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>
> Here's another *incorrect* way to do it -- incorrect because it will
> not always work, unlike Iris's correct solution. But it does not
> require PERL type matching. The idea: separate the two vowels in the
> regex by a character that you know cannot appear (if there is such)
> and match it optionally, e.g. with '*" repetition specifier. I used
> "?" for the optional character below (which must be escaped).
>
> >    gsub("([aeiouAEIOU])\\?*([aeiouAEIOU])", "\\1_\\2", "aerioue")
> [1] "a_eri_ou_e"
>
> Cheers,
> Bert
>
>
> On Fri, Mar 1, 2024 at 3:59?AM Iago Gin? V?zquez <iago.gine at sjd.es> wrote:
> >
> > Hi Iris,
> >
> > Thank you. Further, very nice solution.
> >
> > Best,
> >
> > Iago
> >
> > On 01/03/2024 12:49, Iris Simmons wrote:
> > > Hi Iago,
> > >
> > >
> > > This is not a bug. It is expected. Patterns may not overlap. However, there
> > > is a way to get the result you want using perl:
> > >
> > > ```R
> > > gsub("([aeiouAEIOU])(?=[aeiouAEIOU])", "\\1_", "aerioue", perl = TRUE)
> > > ```
> > >
> > > The specific change I made is called a positive lookahead, you can read
> > > more about it here:
> > >
> > > https://www.regular-expressions.info/lookaround.html
> > >
> > > It's a way to check for a piece of text without consuming it in the match.
> > >
> > > Also, since you don't care about character case, it might be more legible
> > > to add ignore.case = TRUE and remove the upper case characters:
> > >
> > > ```R
> > > gsub("([aeiou])(?=[aeiou])", "\\1_", "aerioue", perl = TRUE, ignore.case =
> > > TRUE)
> > >
> > > ## or
> > >
> > > gsub("(?i)([aeiou])(?=[aeiou])", "\\1_", "aerioue", perl = TRUE)
> > > ```
> > >
> > > I hope this helps!
> > >
> > >
> > > On Fri, Mar 1, 2024, 06:37 Iago Gin? V?zquez<iago.gine at sjd.es>  wrote:
> > >
> > >> Hi all,
> > >>
> > >> I tested next command:
> > >>
> > >> gsub("([aeiouAEIOU])([aeiouAEIOU])", "\\1_\\2", "aerioue")
> > >>
> > >> with the following output:
> > >>
> > >> [1] "a_eri_ou_e"
> > >>
> > >> So, there are two consecutive vowels where an underscore is not added.
> > >>
> > >> May it be a bug? Is it expected (bug or not)? Is there any chance to get
> > >> what I want (an underscore between each pair of consecutive vowels)?
> > >>
> > >>
> > >> Thank you!
> > >>
> > >> Best regards,
> > >>
> > >> Iago
> > >>
> > >>          [[alternative HTML version deleted]]
> > >>
> > >> ______________________________________________
> > >> R-help at r-project.org  mailing list -- To UNSUBSCRIBE and more, see
> > >> https://stat.ethz.ch/mailman/listinfo/r-help
> > >> PLEASE do read the posting guide
> > >> http://www.R-project.org/posting-guide.html
> > >> and provide commented, minimal, self-contained, reproducible code.
> > >>
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.


From rmh @end|ng |rom temp|e@edu  Fri Mar  1 17:10:53 2024
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Fri, 1 Mar 2024 16:10:53 +0000
Subject: [R] [External]  dput(..., file = stderr())
In-Reply-To: <3b322636-1fce-45cf-bbd1-d5388664ae51@gmail.com>
References: <3b322636-1fce-45cf-bbd1-d5388664ae51@gmail.com>
Message-ID: <01A7EDC4-079C-438D-AC0F-90B4A52216BA@temple.edu>

I see the same thing in a fresh R session

> dput(letters, file = stderr())
c("a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", 
"m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", 
"z")
Warning message:
In dput(letters, file = stderr()) : wrote too few characters
> dput(letters, file = stdout())
c("a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", 
"m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", 
"z")
> version
               _                                          
platform       aarch64-apple-darwin20                     
arch           aarch64                                    
os             darwin20                                   
system         aarch64, darwin20                          
status         Patched                                    
major          4                                          
minor          3.2                                        
year           2024                                       
month          01                                         
day            23                                         
svn rev        85822                                      
language       R                                          
version.string R version 4.3.2 Patched (2024-01-23 r85822)
nickname       Eye Holes                                  
> 



> On Mar 1, 2024, at 10:54, Benjamin Tyner <btyner at gmail.com> wrote:
> 
> dput(letters, file = stderr())


From |kry|ov @end|ng |rom d|@root@org  Fri Mar  1 19:00:10 2024
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Fri, 1 Mar 2024 21:00:10 +0300
Subject: [R] dput(..., file = stderr())
In-Reply-To: <3b322636-1fce-45cf-bbd1-d5388664ae51@gmail.com>
References: <3b322636-1fce-45cf-bbd1-d5388664ae51@gmail.com>
Message-ID: <20240301210010.2a970745@Tarkus>

? Fri, 1 Mar 2024 10:54:08 -0500
Benjamin Tyner <btyner at gmail.com> ?????:

>      > dput(letters, file = stderr())  
>     c("a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l",
>     "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y",
>     "z")
>     Warning message:
>     In dput(letters, file = stderr()) : wrote too few characters

Sounds like a bug.

This is where the warning is produced:

    int res = Rconn_printf(con, "%s\n", CHAR(STRING_ELT(tval, i)));
    if(!havewarned &&
       res < strlen(CHAR(STRING_ELT(tval, i))) + 1) {
	warning(_("wrote too few characters"));
	havewarned = TRUE;
    }

At this point, `res` is 0, and CHAR(STRING_ELT(tval, i)) is what you'd
expect:

(gdb) x /s (void*)(STRING_ELT(tval, i))+48
0x5555561bf0a8: "c(\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\",
\"h\", \"i\", \"j\", \"k\", \"l\", "

`res` is 0 because that's what (con->vfprintf)(...) returns:

2813    static int stderr_vfprintf(Rconnection con, const char *format, va_list ap)
2814    {
2815        REvprintf(format, ap);
2816        return 0;
2817    }

Why doesn't it warn for stdout()? Doesn't stdout_vfprintf(...) behave
the same? That's because stdout() (connection #1) is special for dput(),
and instead of going through the connection system, it goes straight for
Rprintf():

426         else { // ifile == 1 : "Stdout"
427             for (int i = 0; i < LENGTH(tval); i++)
428                 Rprintf("%s\n", CHAR(STRING_ELT(tval, i)));
429         }

Not sure what the right fix is. There may be code depending on
(con->vfprintf)(...) returning 0.

-- 
Best regards,
Ivan


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Mar  1 23:43:36 2024
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Fri, 01 Mar 2024 14:43:36 -0800
Subject: [R] installation: while running make,
 unable to run pdflatex on 'NEWS.tex'
In-Reply-To: <505bdcfd-4dbc-4f78-8b90-58dad3c478d9@gmail.com>
References: <505bdcfd-4dbc-4f78-8b90-58dad3c478d9@gmail.com>
Message-ID: <CBB5F436-DFF9-49FE-BF57-658B15F75940@dcn.davis.ca.us>

This really is all LaTeX errors, not R errors. Both examples complain that pdftexcmds.sty is not installed. Most "sty" files are in LaTeX packages. Each LaTeX distribution has its own way to install packages ... but the difficulty is usually on the same order of difficulty as installing R packages from CRAN... that is, pretty easy. But you need to read about _your_ TeX system for details. I use Google to figure out which package has the given file in it... it is usually the same as whatever comes before ".sty", but not always.

On March 1, 2024 7:46:53 AM PST, Benjamin Tyner <btyner at gmail.com> wrote:
>
>A kind member of R-core suggested this is due to a misconfiguration on my system, and to post it to the mailing list for troubleshooting.
>
>When trying to build R version 4.3.3, in at least two places during the process it gives LaTeX errors of the form:
>
>(example 1)
>
>   you should 'make docs' now ...
>   make[1]: Entering directory '/home/btyner/R-4.3.3/doc'
>   creating doc/NEWS
>   creating doc/NEWS.pdf
>   Error in texi2dvi(file = file, pdf = TRUE, clean = clean, quiet =
>   quiet, :
>   unable to run pdflatex on 'NEWS.tex'
>   LaTeX errors:
>   ! LaTeX Error: File `pdftexcmds.sty' not found.
>
>   Type X to quit or <RETURN> to proceed,
>   or enter new name. (Default extension: sty)
>
>   ! Emergency stop.
>   <read *>
>
>   l.108 RequirePackage{pdftexcmds}[2018/09/10]
>   ^^M
>   ! ==> Fatal error occurred, no output PDF file produced!
>   Calls: <Anonymous> -> texi2pdf -> texi2dvi
>   Execution halted
>   make[1]: /*/ [Makefile:74: NEWS.pdf] Error 1
>   make[1]: Leaving directory '/home/btyner/R-4.3.3/doc'
>   make: [Makefile:73: docs] Error 2 (ignored)
>
>(example 2)
>
>   make[1]: Entering directory '/home/btyner/R-4.3.3/src/library'
>   building/updating vignettes for package 'grid' ...
>   building/updating vignettes for package 'parallel' ...
>   building/updating vignettes for package 'utils' ...
>   building/updating vignettes for package 'stats' ...
>   processing 'reshape.Rnw'
>   Error: compiling TeX file 'reshape.tex' failed with message:
>   unable to run pdflatex on 'reshape.tex'
>   LaTeX errors:
>   ! LaTeX Error: File `pdftexcmds.sty' not found.
>
>   Type X to quit or <RETURN> to proceed,
>   or enter new name. (Default extension: sty)
>
>   ! Emergency stop.
>   <read *>
>
>   l.108 RequirePackage{pdftexcmds}[2018/09/10]
>   ^^M
>   ! ==> Fatal error occurred, no output PDF file produced!
>   Execution halted
>   make[1]: ** [Makefile:103: vignettes] Error 1
>   make[1]: Leaving directory '/home/btyner/R-4.3.3/src/library'
>   make: ** [Makefile:81: vignettes] Error 2
>
>here is my |pdflatex --version| info:
>
>   pdfTeX 3.141592653-2.6-1.40.22 (TeX Live 2022/dev/Debian)
>   kpathsea version 6.3.4/dev
>   Compiled with libpng 1.6.37; using libpng 1.6.37
>   Compiled with zlib 1.2.11; using zlib 1.2.11
>   Compiled with xpdf version 4.03
>
>my platform info:
>
>   Platform: x86_64-pc-linux-gnu (64-bit)
>   Running under: Ubuntu 22.04.4 LTS
>
>I installed from this file with corresponding md5sum
>
>   R-4.3.3.tar.xz 5602f5996107c346dba12a16e866d2e2
>
>The specific commands I ran which led to the error were:
>
>   wget https://cran.r-project.org/src/base/R-4/R-4.3.3.tar.xz
>   mkdir R433
>   tar xJf R-4.3.3.tar.xz
>   cd R-4.3.3
>   ./configure --prefix=/home/btyner/R433
>   make
>
>Happy to provide any additional information needed.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From |kry|ov @end|ng |rom d|@root@org  Sat Mar  2 08:42:28 2024
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Sat, 2 Mar 2024 10:42:28 +0300
Subject: [R] installation: while running make,
 unable to run pdflatex on 'NEWS.tex'
In-Reply-To: <505bdcfd-4dbc-4f78-8b90-58dad3c478d9@gmail.com>
References: <505bdcfd-4dbc-4f78-8b90-58dad3c478d9@gmail.com>
Message-ID: <20240302104228.470cf687@Tarkus>

? Fri, 1 Mar 2024 10:46:53 -0500
Benjamin Tyner <btyner at gmail.com> ?????:

> my platform info:
> 
>     Platform: x86_64-pc-linux-gnu (64-bit)
>     Running under: Ubuntu 22.04.4 LTS

Quick things first: have you installed all the build-dependencies? apt
build-dep r-base (maybe with --install-suggests? haven't tried that in
a while) should do that. In particular, the build dependencies include
texlive-fonts-extra and texlive-latex-extra. That's a lot of packages,
but some of them are required to compile LaTeX documents produced by R.

>     you should 'make docs' now ...
>     make[1]: Entering directory '/home/btyner/R-4.3.3/doc'
>     creating doc/NEWS
>     creating doc/NEWS.pdf
>     Error in texi2dvi(file = file, pdf = TRUE, clean = clean, quiet =
>     quiet, :
>     unable to run pdflatex on 'NEWS.tex'
>     LaTeX errors:
>     ! LaTeX Error: File `pdftexcmds.sty' not found.

Can you compile a minimal LaTeX document? Something like:

\documentclass{article}
\begin{document}
\[ \mathbf{y} = \mathbf{X} \beta \]
\end{document}

Does tools::texi2pdf('THISFILE.tex') fail with a similar error message?

-- 
Best regards,
Ivan


From r@oknz @end|ng |rom gm@||@com  Sat Mar  2 10:02:13 2024
From: r@oknz @end|ng |rom gm@||@com (Richard O'Keefe)
Date: Sat, 2 Mar 2024 22:02:13 +1300
Subject: [R] Initializing vector and matrices
In-Reply-To: <CH3PR22MB4514525EE09B576456BB56B7CF5F2@CH3PR22MB4514.namprd22.prod.outlook.com>
References: <656696ba-0785-4068-b7a1-8a751b0ed7d9@ntu.edu.tw>
 <CABcYAdJoxtVyngjG6g0qTFd3F9O1P+ZKGJGCOcK16bQ9NV2dSg@mail.gmail.com>
 <CH3PR22MB4514525EE09B576456BB56B7CF5F2@CH3PR22MB4514.namprd22.prod.outlook.com>
Message-ID: <CABcYAdKKbPXy4FoPA=H2k8KY1yhB2bCJuv5xJg+yvFe4WdD73w@mail.gmail.com>

The matrix equivalent of
  x <- ...
  v <- ...
  x[length(x)+1] <- v
is
  m <- ...
  r <- ...
  m <- rbind(m, r)
or
  m <- ...
  k <- ...
  m <- cbind(m, c)

A vector or matrix so constructed never has "holes" in it.
It's better to think of CONSTRUCTING vectors and matrices rather than
INITIALISING them,
because always being fully defined is important.

It would be really really helpful to have a clearer idea of what you
are trying to do.

On Fri, 1 Mar 2024 at 03:31, Ebert,Timothy Aaron <tebert at ufl.edu> wrote:
>
> You could declare a matrix much larger than you intend to use. This works with a few megabytes of data. It is not very efficient, so scaling up may become a problem.
> m22 <- matrix(NA, 1:600000, ncol=6)
>
> It does not work to add a new column to the matrix, as in you get an error if you try m22[ , 7] but convert to data frame and add a column
>
> m23 <- data.frame(m22)
> m23$x7 <- 12
>
> The only penalty that I know of to having unused space in a matrix is the amount of memory it takes. One side effect is that your program may have a mistake that you would normally catch with a subscript out of bounds error but with the extra space it now runs without errors.
>
> Tim
>
>
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Richard O'Keefe
> Sent: Thursday, February 29, 2024 5:29 AM
> To: Steven Yen <styen at ntu.edu.tw>
> Cc: R-help Mailing List <r-help at r-project.org>
> Subject: Re: [R] Initializing vector and matrices
>
> [External Email]
>
> x <- numeric(0)
> for (...) {
>     x[length(x)+1] <- ...
> }
> works.
> You can build a matrix by building a vector one element at a time this way, and then reshaping it at the end.  That only works if you don't need it to be a matrix at all times.
> Another approach is to build a list of rows.  It's not a matrix, but a list of rows can be a *ragged* matrix with rows of varying length.
>
> On Wed, 28 Feb 2024 at 21:57, Steven Yen <styen at ntu.edu.tw> wrote:
> >
> > Is there as way to initialize a vector (matrix) with an unknown length
> > (dimension)? NULL does not seem to work. The lines below work with a
> > vector of length 4 and a matrix of 4 x 4. What if I do not know
> > initially the length/dimension of the vector/matrix?
> >
> > All I want is to add up (accumulate)  the vector and matrix as I go
> > through the loop.
> >
> > Or, are there other ways to accumulate such vectors and matrices?
> >
> >  > x<-rep(0,4)  # this works but I like to leave the length open  >
> > for (i in 1:3){
> > +  x1<-1:4
> > +  x<-x+x1
> > + }
> >  > x
> > [1]  3  6  9 12
> >
> >  > y = 0*matrix(1:16, nrow = 4, ncol = 4); # this works but I like to
> > leave the dimension open
> >       [,1] [,2] [,3] [,4]
> > [1,]    0    0    0    0
> > [2,]    0    0    0    0
> > [3,]    0    0    0    0
> > [4,]    0    0    0    0
> >  > for (i in 1:3){
> > +   y1<-matrix(17:32, nrow = 4, ncol = 4)
> > +   y<-y+y1
> > + }
> >  > y
> >       [,1] [,2] [,3] [,4]
> > [1,]   51   63   75   87
> > [2,]   54   66   78   90
> > [3,]   57   69   81   93
> > [4,]   60   72   84   96
> >  >
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat/
> > .ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C02%7Ctebert%40ufl.edu
> > %7Cdbccaccf29674b10b17308dc39114d38%7C0d4da0f84a314d76ace60a62331e1b84
> > %7C0%7C0%7C638447993707432549%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAw
> > MDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C0%7C%7C%7C&sdata=
> > PtWjcDOnwO7PArVOSdgYbpz8ksjDPK%2Bn9ySyhwQC0gE%3D&reserved=0
> > PLEASE do read the posting guide
> > http://www.r/
> > -project.org%2Fposting-guide.html&data=05%7C02%7Ctebert%40ufl.edu%7Cdb
> > ccaccf29674b10b17308dc39114d38%7C0d4da0f84a314d76ace60a62331e1b84%7C0%
> > 7C0%7C638447993707438911%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiL
> > CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C0%7C%7C%7C&sdata=Igb16
> > CBYgG21HLEDH4I4gfjjFBa3KjDFK8yEZUmBo8s%3D&reserved=0
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.r-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From r@oknz @end|ng |rom gm@||@com  Sat Mar  2 10:39:28 2024
From: r@oknz @end|ng |rom gm@||@com (Richard O'Keefe)
Date: Sat, 2 Mar 2024 22:39:28 +1300
Subject: [R] installation: while running make,
 unable to run pdflatex on 'NEWS.tex'
In-Reply-To: <505bdcfd-4dbc-4f78-8b90-58dad3c478d9@gmail.com>
References: <505bdcfd-4dbc-4f78-8b90-58dad3c478d9@gmail.com>
Message-ID: <CABcYAdL6hT3=iX1QHkdN7S6AMpGBctym1jSh52i8WpwT8PMTPg@mail.gmail.com>

On my system, pdftexcmds.sty can be found in
/usr/share/texlive/texmf-dist/tex/generic/pdftexcmds/pdftexcmds.sty
A quick poking around with 'apt' and 'dpkg-query -L' told me that this
comes from the
texlive-latex-recommended
Ubuntu package.  So on my system, if I didn't already have this,
sudo apt install texlive-latex-recommended
should fix the problem.

On Sat, 2 Mar 2024 at 04:47, Benjamin Tyner <btyner at gmail.com> wrote:
>
>
> A kind member of R-core suggested this is due to a misconfiguration on
> my system, and to post it to the mailing list for troubleshooting.
>
> When trying to build R version 4.3.3, in at least two places during the
> process it gives LaTeX errors of the form:
>
> (example 1)
>
>     you should 'make docs' now ...
>     make[1]: Entering directory '/home/btyner/R-4.3.3/doc'
>     creating doc/NEWS
>     creating doc/NEWS.pdf
>     Error in texi2dvi(file = file, pdf = TRUE, clean = clean, quiet =
>     quiet, :
>     unable to run pdflatex on 'NEWS.tex'
>     LaTeX errors:
>     ! LaTeX Error: File `pdftexcmds.sty' not found.
>
>     Type X to quit or <RETURN> to proceed,
>     or enter new name. (Default extension: sty)
>
>     ! Emergency stop.
>     <read *>
>
>     l.108 RequirePackage{pdftexcmds}[2018/09/10]
>     ^^M
>     ! ==> Fatal error occurred, no output PDF file produced!
>     Calls: <Anonymous> -> texi2pdf -> texi2dvi
>     Execution halted
>     make[1]: /*/ [Makefile:74: NEWS.pdf] Error 1
>     make[1]: Leaving directory '/home/btyner/R-4.3.3/doc'
>     make: [Makefile:73: docs] Error 2 (ignored)
>
> (example 2)
>
>     make[1]: Entering directory '/home/btyner/R-4.3.3/src/library'
>     building/updating vignettes for package 'grid' ...
>     building/updating vignettes for package 'parallel' ...
>     building/updating vignettes for package 'utils' ...
>     building/updating vignettes for package 'stats' ...
>     processing 'reshape.Rnw'
>     Error: compiling TeX file 'reshape.tex' failed with message:
>     unable to run pdflatex on 'reshape.tex'
>     LaTeX errors:
>     ! LaTeX Error: File `pdftexcmds.sty' not found.
>
>     Type X to quit or <RETURN> to proceed,
>     or enter new name. (Default extension: sty)
>
>     ! Emergency stop.
>     <read *>
>
>     l.108 RequirePackage{pdftexcmds}[2018/09/10]
>     ^^M
>     ! ==> Fatal error occurred, no output PDF file produced!
>     Execution halted
>     make[1]: ** [Makefile:103: vignettes] Error 1
>     make[1]: Leaving directory '/home/btyner/R-4.3.3/src/library'
>     make: ** [Makefile:81: vignettes] Error 2
>
> here is my |pdflatex --version| info:
>
>     pdfTeX 3.141592653-2.6-1.40.22 (TeX Live 2022/dev/Debian)
>     kpathsea version 6.3.4/dev
>     Compiled with libpng 1.6.37; using libpng 1.6.37
>     Compiled with zlib 1.2.11; using zlib 1.2.11
>     Compiled with xpdf version 4.03
>
> my platform info:
>
>     Platform: x86_64-pc-linux-gnu (64-bit)
>     Running under: Ubuntu 22.04.4 LTS
>
> I installed from this file with corresponding md5sum
>
>     R-4.3.3.tar.xz 5602f5996107c346dba12a16e866d2e2
>
> The specific commands I ran which led to the error were:
>
>     wget https://cran.r-project.org/src/base/R-4/R-4.3.3.tar.xz
>     mkdir R433
>     tar xJf R-4.3.3.tar.xz
>     cd R-4.3.3
>     ./configure --prefix=/home/btyner/R433
>     make
>
> Happy to provide any additional information needed.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From btyner @end|ng |rom gm@||@com  Sat Mar  2 15:06:21 2024
From: btyner @end|ng |rom gm@||@com (Benjamin Tyner)
Date: Sat, 2 Mar 2024 09:06:21 -0500
Subject: [R] installation: while running make,
 unable to run pdflatex on 'NEWS.tex'
In-Reply-To: <20240302104228.470cf687@Tarkus>
References: <505bdcfd-4dbc-4f78-8b90-58dad3c478d9@gmail.com>
 <20240302104228.470cf687@Tarkus>
Message-ID: <7e808784-0ecf-422e-b21d-03c5e4b8ec73@gmail.com>

Thank you Ivan and Richard...

Short version: a simple "sudo apt install texlive" fixed it.

Longer version (attempt at a post-mortem): previously (back on 
2023-11-05) on this same system I built R version 4.3.2; and 
/home/btyner/R432/lib/R/doc/NEWS.pdf does exist (and is a valid pdf with 
48 pages) from that same install. Likewise before that on 2023-07-02 I 
built R version 4.3.1 and the NEWS.pdf is fine (47 pages) there too.

Still not sure how it happened that my system lost track of the 
necessary texlive add-ons at some point between 2023-11-05 and now, but 
running "sudo apt install texlive" made it clear that 
texlive-latex-recommended was indeed one of the culprits as suggested by 
Richard.

    The following additional packages will be installed:
     ? fonts-texgyre tex-gyre texlive-fonts-recommended
    texlive-latex-recommended tipa
    Suggested packages:
     ? texlive-fonts-recommended-doc texlive-latex-recommended-doc
    texlive-luatex texlive-pstricks tipa-doc
    The following NEW packages will be installed:
     ? fonts-texgyre tex-gyre texlive texlive-fonts-recommended
    texlive-latex-recommended tipa

In an attempt to figure out what might have happened after 2023-11-05,

    zgrep texlive /var/log/dpkg.log.*.gz

revealed some texlive related activity back on 2023-11-23 but no 
indication that anything was removed...

    /var/log/dpkg.log.4.gz:2023-11-23 11:02:55 install
    texlive-binaries:amd64 <none> 2021.20210626.59705-1ubuntu0.1
    /var/log/dpkg.log.4.gz:2023-11-23 11:02:55 status half-installed
    texlive-binaries:amd64 2021.20210626.59705-1ubuntu0.1
    /var/log/dpkg.log.4.gz:2023-11-23 11:02:56 status unpacked
    texlive-binaries:amd64 2021.20210626.59705-1ubuntu0.1
    /var/log/dpkg.log.4.gz:2023-11-23 11:02:56 install texlive-base:all
    <none> 2021.20220204-1
    /var/log/dpkg.log.4.gz:2023-11-23 11:02:56 status half-installed
    texlive-base:all 2021.20220204-1
    /var/log/dpkg.log.4.gz:2023-11-23 11:03:02 status unpacked
    texlive-base:all 2021.20220204-1
    /var/log/dpkg.log.4.gz:2023-11-23 11:03:02 install
    texlive-latex-base:all <none> 2021.20220204-1
    /var/log/dpkg.log.4.gz:2023-11-23 11:03:02 status half-installed
    texlive-latex-base:all 2021.20220204-1
    /var/log/dpkg.log.4.gz:2023-11-23 11:03:04 status unpacked
    texlive-latex-base:all 2021.20220204-1
    /var/log/dpkg.log.4.gz:2023-11-23 11:03:05 configure
    texlive-binaries:amd64 2021.20210626.59705-1ubuntu0.1 <none>
    /var/log/dpkg.log.4.gz:2023-11-23 11:03:05 status unpacked
    texlive-binaries:amd64 2021.20210626.59705-1ubuntu0.1
    /var/log/dpkg.log.4.gz:2023-11-23 11:03:05 status half-configured
    texlive-binaries:amd64 2021.20210626.59705-1ubuntu0.1
    /var/log/dpkg.log.4.gz:2023-11-23 11:03:05 status installed
    texlive-binaries:amd64 2021.20210626.59705-1ubuntu0.1
    /var/log/dpkg.log.4.gz:2023-11-23 11:03:05 configure
    texlive-base:all 2021.20220204-1 <none>
    /var/log/dpkg.log.4.gz:2023-11-23 11:03:05 status unpacked
    texlive-base:all 2021.20220204-1
    /var/log/dpkg.log.4.gz:2023-11-23 11:03:05 status half-configured
    texlive-base:all 2021.20220204-1
    /var/log/dpkg.log.4.gz:2023-11-23 11:03:09 status installed
    texlive-base:all 2021.20220204-1
    /var/log/dpkg.log.4.gz:2023-11-23 11:03:09 configure
    texlive-latex-base:all 2021.20220204-1 <none>
    /var/log/dpkg.log.4.gz:2023-11-23 11:03:09 status unpacked
    texlive-latex-base:all 2021.20220204-1
    /var/log/dpkg.log.4.gz:2023-11-23 11:03:09 status half-configured
    texlive-latex-base:all 2021.20220204-1
    /var/log/dpkg.log.4.gz:2023-11-23 11:03:09 status installed
    texlive-latex-base:all 2021.20220204-1

One more thing:

    HISTTIMEFORMAT="%Y-%m-%d %T " history | grep texlive

revealed that I ran "sudo apt install texlive-latex-base" back on 
2024-02-19, so maybe that had something to do with it. Sadly the shell 
history does not exist prior to that date.


On 3/2/24 02:42, Ivan Krylov wrote:
> ? Fri, 1 Mar 2024 10:46:53 -0500
> Benjamin Tyner <btyner at gmail.com> ?????:
>
>> my platform info:
>>
>>      Platform: x86_64-pc-linux-gnu (64-bit)
>>      Running under: Ubuntu 22.04.4 LTS
> Quick things first: have you installed all the build-dependencies? apt
> build-dep r-base (maybe with --install-suggests? haven't tried that in
> a while) should do that. In particular, the build dependencies include
> texlive-fonts-extra and texlive-latex-extra. That's a lot of packages,
> but some of them are required to compile LaTeX documents produced by R.
>
>>      you should 'make docs' now ...
>>      make[1]: Entering directory '/home/btyner/R-4.3.3/doc'
>>      creating doc/NEWS
>>      creating doc/NEWS.pdf
>>      Error in texi2dvi(file = file, pdf = TRUE, clean = clean, quiet =
>>      quiet, :
>>      unable to run pdflatex on 'NEWS.tex'
>>      LaTeX errors:
>>      ! LaTeX Error: File `pdftexcmds.sty' not found.
> Can you compile a minimal LaTeX document? Something like:
>
> \documentclass{article}
> \begin{document}
> \[ \mathbf{y} = \mathbf{X} \beta \]
> \end{document}
>
> Does tools::texi2pdf('THISFILE.tex') fail with a similar error message?
>


From bgunter@4567 @end|ng |rom gm@||@com  Sat Mar  2 18:53:41 2024
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 2 Mar 2024 09:53:41 -0800
Subject: [R] Initializing vector and matrices
In-Reply-To: <CABcYAdKKbPXy4FoPA=H2k8KY1yhB2bCJuv5xJg+yvFe4WdD73w@mail.gmail.com>
References: <656696ba-0785-4068-b7a1-8a751b0ed7d9@ntu.edu.tw>
 <CABcYAdJoxtVyngjG6g0qTFd3F9O1P+ZKGJGCOcK16bQ9NV2dSg@mail.gmail.com>
 <CH3PR22MB4514525EE09B576456BB56B7CF5F2@CH3PR22MB4514.namprd22.prod.outlook.com>
 <CABcYAdKKbPXy4FoPA=H2k8KY1yhB2bCJuv5xJg+yvFe4WdD73w@mail.gmail.com>
Message-ID: <CAGxFJbQq9XhkviMEmXmTjfvXtajFyO1Q+SDWojqonWj0=gAj7g@mail.gmail.com>

"It would be really really helpful to have a clearer idea of what you
are trying to do."

Amen!

But in R, "constructing" objects by extending them piece by piece is
generally very inefficient (e.g.
https://r-craft.org/growing-objects-and-loop-memory-pre-allocation/),
although sometimes?/often? unavoidable (hence the relevance of your
comment above). R generally prefers to take a "whole object" point of
view ( see R books by Chambers, et. al.) and provides code for basic
operations like vector/matrix, etc. construction to do so. When this
is not possible, I suspect "optimal" efficient strategies for
allocating space to build objects gets you into the weeds of how R
works.

Cheers,
Bert




On Sat, Mar 2, 2024 at 1:02?AM Richard O'Keefe <raoknz at gmail.com> wrote:
>
> The matrix equivalent of
>   x <- ...
>   v <- ...
>   x[length(x)+1] <- v
> is
>   m <- ...
>   r <- ...
>   m <- rbind(m, r)
> or
>   m <- ...
>   k <- ...
>   m <- cbind(m, c)
>
> A vector or matrix so constructed never has "holes" in it.
> It's better to think of CONSTRUCTING vectors and matrices rather than
> INITIALISING them,
> because always being fully defined is important.
>
> It would be really really helpful to have a clearer idea of what you
> are trying to do.
>
> On Fri, 1 Mar 2024 at 03:31, Ebert,Timothy Aaron <tebert at ufl.edu> wrote:
> >
> > You could declare a matrix much larger than you intend to use. This works with a few megabytes of data. It is not very efficient, so scaling up may become a problem.
> > m22 <- matrix(NA, 1:600000, ncol=6)
> >
> > It does not work to add a new column to the matrix, as in you get an error if you try m22[ , 7] but convert to data frame and add a column
> >
> > m23 <- data.frame(m22)
> > m23$x7 <- 12
> >
> > The only penalty that I know of to having unused space in a matrix is the amount of memory it takes. One side effect is that your program may have a mistake that you would normally catch with a subscript out of bounds error but with the extra space it now runs without errors.
> >
> > Tim
> >
> >
> >
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of Richard O'Keefe
> > Sent: Thursday, February 29, 2024 5:29 AM
> > To: Steven Yen <styen at ntu.edu.tw>
> > Cc: R-help Mailing List <r-help at r-project.org>
> > Subject: Re: [R] Initializing vector and matrices
> >
> > [External Email]
> >
> > x <- numeric(0)
> > for (...) {
> >     x[length(x)+1] <- ...
> > }
> > works.
> > You can build a matrix by building a vector one element at a time this way, and then reshaping it at the end.  That only works if you don't need it to be a matrix at all times.
> > Another approach is to build a list of rows.  It's not a matrix, but a list of rows can be a *ragged* matrix with rows of varying length.
> >
> > On Wed, 28 Feb 2024 at 21:57, Steven Yen <styen at ntu.edu.tw> wrote:
> > >
> > > Is there as way to initialize a vector (matrix) with an unknown length
> > > (dimension)? NULL does not seem to work. The lines below work with a
> > > vector of length 4 and a matrix of 4 x 4. What if I do not know
> > > initially the length/dimension of the vector/matrix?
> > >
> > > All I want is to add up (accumulate)  the vector and matrix as I go
> > > through the loop.
> > >
> > > Or, are there other ways to accumulate such vectors and matrices?
> > >
> > >  > x<-rep(0,4)  # this works but I like to leave the length open  >
> > > for (i in 1:3){
> > > +  x1<-1:4
> > > +  x<-x+x1
> > > + }
> > >  > x
> > > [1]  3  6  9 12
> > >
> > >  > y = 0*matrix(1:16, nrow = 4, ncol = 4); # this works but I like to
> > > leave the dimension open
> > >       [,1] [,2] [,3] [,4]
> > > [1,]    0    0    0    0
> > > [2,]    0    0    0    0
> > > [3,]    0    0    0    0
> > > [4,]    0    0    0    0
> > >  > for (i in 1:3){
> > > +   y1<-matrix(17:32, nrow = 4, ncol = 4)
> > > +   y<-y+y1
> > > + }
> > >  > y
> > >       [,1] [,2] [,3] [,4]
> > > [1,]   51   63   75   87
> > > [2,]   54   66   78   90
> > > [3,]   57   69   81   93
> > > [4,]   60   72   84   96
> > >  >
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat/
> > > .ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C02%7Ctebert%40ufl.edu
> > > %7Cdbccaccf29674b10b17308dc39114d38%7C0d4da0f84a314d76ace60a62331e1b84
> > > %7C0%7C0%7C638447993707432549%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAw
> > > MDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C0%7C%7C%7C&sdata=
> > > PtWjcDOnwO7PArVOSdgYbpz8ksjDPK%2Bn9ySyhwQC0gE%3D&reserved=0
> > > PLEASE do read the posting guide
> > > http://www.r/
> > > -project.org%2Fposting-guide.html&data=05%7C02%7Ctebert%40ufl.edu%7Cdb
> > > ccaccf29674b10b17308dc39114d38%7C0d4da0f84a314d76ace60a62331e1b84%7C0%
> > > 7C0%7C638447993707438911%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiL
> > > CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C0%7C%7C%7C&sdata=Igb16
> > > CBYgG21HLEDH4I4gfjjFBa3KjDFK8yEZUmBo8s%3D&reserved=0
> > > and provide commented, minimal, self-contained, reproducible code.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.r-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Mar  2 19:52:50 2024
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 02 Mar 2024 10:52:50 -0800
Subject: [R] Initializing vector and matrices
In-Reply-To: <CAGxFJbQq9XhkviMEmXmTjfvXtajFyO1Q+SDWojqonWj0=gAj7g@mail.gmail.com>
References: <656696ba-0785-4068-b7a1-8a751b0ed7d9@ntu.edu.tw>
 <CABcYAdJoxtVyngjG6g0qTFd3F9O1P+ZKGJGCOcK16bQ9NV2dSg@mail.gmail.com>
 <CH3PR22MB4514525EE09B576456BB56B7CF5F2@CH3PR22MB4514.namprd22.prod.outlook.com>
 <CABcYAdKKbPXy4FoPA=H2k8KY1yhB2bCJuv5xJg+yvFe4WdD73w@mail.gmail.com>
 <CAGxFJbQq9XhkviMEmXmTjfvXtajFyO1Q+SDWojqonWj0=gAj7g@mail.gmail.com>
Message-ID: <2F0D9571-1B14-4759-A4AE-94B4E223B3C7@dcn.davis.ca.us>

To be fair, these replies no longer include the original question, which was IMO really quite clear (if misguided), and was actually targeted at understanding pre-allocation for better performance. Richard's suggestion to store the along-the-way constructed vectors in a list and examine the lengths of the elements of that list after it is completely constructed if it is really desired to force vectors of varying lengths into a matrix seems appropriate. The possibly-misguided part is in the thought that vectors of different lengths belong in a matrix at all... leaving them in a list seems more likely to be appropriate.

OP: Avoid mis-using NA to "fill out" the end of uniform-length vectors. Each index position in a vector should represent some information... if you are throwing NAs or zeros in willy-nilly then you are not taking care to assign meaning to those positions, and likely wasting memory and time doing so. If you were taking such care, then any appropriate NAs would already be present in the vectors before you put them into the matrix, and the original question would not have crossed OPs mind because the vectors world already be of the same length. NA means that information for a specific position is "unknown", not "space filler".

Now if OP wants better guidance on restructuring their analysis, then certainly sharing those details would help the discussion move away from the original misguided question... but that would be another thread to answer the question that should have been asked.

On March 2, 2024 9:53:41 AM PST, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>"It would be really really helpful to have a clearer idea of what you
>are trying to do."
>
>Amen!
>
>But in R, "constructing" objects by extending them piece by piece is
>generally very inefficient (e.g.
>https://r-craft.org/growing-objects-and-loop-memory-pre-allocation/),
>although sometimes?/often? unavoidable (hence the relevance of your
>comment above). R generally prefers to take a "whole object" point of
>view ( see R books by Chambers, et. al.) and provides code for basic
>operations like vector/matrix, etc. construction to do so. When this
>is not possible, I suspect "optimal" efficient strategies for
>allocating space to build objects gets you into the weeds of how R
>works.
>
>Cheers,
>Bert
>
>
>
>
>On Sat, Mar 2, 2024 at 1:02?AM Richard O'Keefe <raoknz at gmail.com> wrote:
>>
>> The matrix equivalent of
>>   x <- ...
>>   v <- ...
>>   x[length(x)+1] <- v
>> is
>>   m <- ...
>>   r <- ...
>>   m <- rbind(m, r)
>> or
>>   m <- ...
>>   k <- ...
>>   m <- cbind(m, c)
>>
>> A vector or matrix so constructed never has "holes" in it.
>> It's better to think of CONSTRUCTING vectors and matrices rather than
>> INITIALISING them,
>> because always being fully defined is important.
>>
>> It would be really really helpful to have a clearer idea of what you
>> are trying to do.
>>
>> On Fri, 1 Mar 2024 at 03:31, Ebert,Timothy Aaron <tebert at ufl.edu> wrote:
>> >
>> > You could declare a matrix much larger than you intend to use. This works with a few megabytes of data. It is not very efficient, so scaling up may become a problem.
>> > m22 <- matrix(NA, 1:600000, ncol=6)
>> >
>> > It does not work to add a new column to the matrix, as in you get an error if you try m22[ , 7] but convert to data frame and add a column
>> >
>> > m23 <- data.frame(m22)
>> > m23$x7 <- 12
>> >
>> > The only penalty that I know of to having unused space in a matrix is the amount of memory it takes. One side effect is that your program may have a mistake that you would normally catch with a subscript out of bounds error but with the extra space it now runs without errors.
>> >
>> > Tim
>> >
>> >
>> >
>> > -----Original Message-----
>> > From: R-help <r-help-bounces at r-project.org> On Behalf Of Richard O'Keefe
>> > Sent: Thursday, February 29, 2024 5:29 AM
>> > To: Steven Yen <styen at ntu.edu.tw>
>> > Cc: R-help Mailing List <r-help at r-project.org>
>> > Subject: Re: [R] Initializing vector and matrices
>> >
>> > [External Email]
>> >
>> > x <- numeric(0)
>> > for (...) {
>> >     x[length(x)+1] <- ...
>> > }
>> > works.
>> > You can build a matrix by building a vector one element at a time this way, and then reshaping it at the end.  That only works if you don't need it to be a matrix at all times.
>> > Another approach is to build a list of rows.  It's not a matrix, but a list of rows can be a *ragged* matrix with rows of varying length.
>> >
>> > On Wed, 28 Feb 2024 at 21:57, Steven Yen <styen at ntu.edu.tw> wrote:
>> > >
>> > > Is there as way to initialize a vector (matrix) with an unknown length
>> > > (dimension)? NULL does not seem to work. The lines below work with a
>> > > vector of length 4 and a matrix of 4 x 4. What if I do not know
>> > > initially the length/dimension of the vector/matrix?
>> > >
>> > > All I want is to add up (accumulate)  the vector and matrix as I go
>> > > through the loop.
>> > >
>> > > Or, are there other ways to accumulate such vectors and matrices?
>> > >
>> > >  > x<-rep(0,4)  # this works but I like to leave the length open  >
>> > > for (i in 1:3){
>> > > +  x1<-1:4
>> > > +  x<-x+x1
>> > > + }
>> > >  > x
>> > > [1]  3  6  9 12
>> > >
>> > >  > y = 0*matrix(1:16, nrow = 4, ncol = 4); # this works but I like to
>> > > leave the dimension open
>> > >       [,1] [,2] [,3] [,4]
>> > > [1,]    0    0    0    0
>> > > [2,]    0    0    0    0
>> > > [3,]    0    0    0    0
>> > > [4,]    0    0    0    0
>> > >  > for (i in 1:3){
>> > > +   y1<-matrix(17:32, nrow = 4, ncol = 4)
>> > > +   y<-y+y1
>> > > + }
>> > >  > y
>> > >       [,1] [,2] [,3] [,4]
>> > > [1,]   51   63   75   87
>> > > [2,]   54   66   78   90
>> > > [3,]   57   69   81   93
>> > > [4,]   60   72   84   96
>> > >  >
>> > >
>> > > ______________________________________________
>> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > > https://stat/
>> > > .ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C02%7Ctebert%40ufl.edu
>> > > %7Cdbccaccf29674b10b17308dc39114d38%7C0d4da0f84a314d76ace60a62331e1b84
>> > > %7C0%7C0%7C638447993707432549%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAw
>> > > MDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C0%7C%7C%7C&sdata=
>> > > PtWjcDOnwO7PArVOSdgYbpz8ksjDPK%2Bn9ySyhwQC0gE%3D&reserved=0
>> > > PLEASE do read the posting guide
>> > > http://www.r/
>> > > -project.org%2Fposting-guide.html&data=05%7C02%7Ctebert%40ufl.edu%7Cdb
>> > > ccaccf29674b10b17308dc39114d38%7C0d4da0f84a314d76ace60a62331e1b84%7C0%
>> > > 7C0%7C638447993707438911%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiL
>> > > CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C0%7C%7C%7C&sdata=Igb16
>> > > CBYgG21HLEDH4I4gfjjFBa3KjDFK8yEZUmBo8s%3D&reserved=0
>> > > and provide commented, minimal, self-contained, reproducible code.
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide http://www.r-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From d@curt|@ @end|ng |rom uc|@@c@uk  Mon Mar  4 16:25:21 2024
From: d@curt|@ @end|ng |rom uc|@@c@uk (Curtis, David)
Date: Mon, 4 Mar 2024 15:25:21 +0000
Subject: [R] Default t test in R is Welch's test, not Student's,
 and can be very problematic
Message-ID: <AM7PR01MB662659E29C5A31B6C81D415FDC232@AM7PR01MB6626.eurprd01.prod.exchangelabs.com>

Hi all.

I'm just writing to draw your attention to this paper, which is Open Access:

Curtis, D. Welch?s t test is more sensitive to real world violations of distributional assumptions than student?s t test but logistic regression is more robust than either. Stat Papers (2024). https://doi.org/10.1007/s00362-024-01531-7
https://link.springer.com/article/10.1007/s00362-024-01531-7?utm_source=rct_congratemailt&utm_medium=email&utm_campaign=oa_20240304&utm_content=10.1007/s00362-024-01531-7

I hadn't really noticed that the default implementation of the t test in R uses Welch's method rather than Student's. I know some people prefer Welch's method but the paper describes how it can be systematically biased and produce extremely low p values in real world scenarios.

If you agree with me, you might want to consider generally using Student's test instead, by using t.test(x, y, var.equal = TRUE).

Code to demonstrate the problem and play around with different scenarios, as described in the paper, is at: https://github.com/davenomiddlenamecurtis/TestTTest

Regards


  *   Dave Curtis

--
Professor David Curtis MD PhD
UCL Genetics Institute
University College London



	[[alternative HTML version deleted]]


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Tue Mar  5 13:16:41 2024
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Tue, 5 Mar 2024 13:16:41 +0100
Subject: [R] How to invert axis within defined range with ggplot2
 scale_y_reverse?
Message-ID: <CAMk+s2RKKTAcLYBLN2zDJ+rcEhEWO80TDwo7VrpT-tavd-KetQ@mail.gmail.com>

Hello,
I am drawing some data with ggplot2 and would like to reverse the
order of the y axis and set a custom range for it.
I can do the former but when I add the key `limits` to
`scale_y_reverse` I get an error as shows below and, worse, no data
shown in the plot.
How can I properly set a reverse y scale with a defined range in ggplot2?
Thank you

```
A <- rep(c(0, 3, 6, 12, 24), 3)
B <- c(rep(0,5), rep(1,5), rep(2,5))
V <- c(27.5,    27.01,    27.75,    27.98,    27.4,    25.69,
26.17,    27.78,    26.08,
       24.97,    23.18,    21.78,    22.49,    21.85,    22.2)
df <- data.frame(Conc = A, Time = B, Value = V)
df$Conc = as.factor(df$Conc)
df$Time = as.factor(df$Time)
library(ggplot2)

ggplot(df, aes(x=Time, y=Value, colour=Conc, group=Conc)) +
  geom_line() +
  scale_y_reverse(limits = c(20,30)) +
  geom_point(size=6) +
  scale_colour_manual(values = COLS)

> Warning messages:
1: Removed 15 rows containing missing values (`geom_line()`).
2: Removed 15 rows containing missing values (`geom_point()`).
```


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Mar  5 14:43:20 2024
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 5 Mar 2024 08:43:20 -0500
Subject: [R] How to invert axis within defined range with ggplot2
 scale_y_reverse?
In-Reply-To: <CAMk+s2RKKTAcLYBLN2zDJ+rcEhEWO80TDwo7VrpT-tavd-KetQ@mail.gmail.com>
References: <CAMk+s2RKKTAcLYBLN2zDJ+rcEhEWO80TDwo7VrpT-tavd-KetQ@mail.gmail.com>
Message-ID: <17e3e485-96a2-4860-ad22-7c566331a6ba@gmail.com>

On 05/03/2024 7:16 a.m., Luigi Marongiu wrote:
> A <- rep(c(0, 3, 6, 12, 24), 3)
> B <- c(rep(0,5), rep(1,5), rep(2,5))
> V <- c(27.5,    27.01,    27.75,    27.98,    27.4,    25.69,
> 26.17,    27.78,    26.08,
>         24.97,    23.18,    21.78,    22.49,    21.85,    22.2)
> df <- data.frame(Conc = A, Time = B, Value = V)
> df$Conc = as.factor(df$Conc)
> df$Time = as.factor(df$Time)
> library(ggplot2)
> 
> ggplot(df, aes(x=Time, y=Value, colour=Conc, group=Conc)) +
>    geom_line() +
>    scale_y_reverse(limits = c(20,30)) +
>    geom_point(size=6) +
>    scale_colour_manual(values = COLS)

The limits should be `c(30,20)`.

Duncan Murdoch


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Tue Mar  5 15:45:16 2024
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Tue, 5 Mar 2024 15:45:16 +0100
Subject: [R] How to invert axis within defined range with ggplot2
 scale_y_reverse?
In-Reply-To: <17e3e485-96a2-4860-ad22-7c566331a6ba@gmail.com>
References: <CAMk+s2RKKTAcLYBLN2zDJ+rcEhEWO80TDwo7VrpT-tavd-KetQ@mail.gmail.com>
 <17e3e485-96a2-4860-ad22-7c566331a6ba@gmail.com>
Message-ID: <CAMk+s2RFA7jFkWPvub2Usa8gA=07hK55jh-tykKrM+2jh7F6Ng@mail.gmail.com>

Thank you. I though the values would have been reversed automatically.
Case closed then

On Tue, Mar 5, 2024 at 2:43?PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> On 05/03/2024 7:16 a.m., Luigi Marongiu wrote:
> > A <- rep(c(0, 3, 6, 12, 24), 3)
> > B <- c(rep(0,5), rep(1,5), rep(2,5))
> > V <- c(27.5,    27.01,    27.75,    27.98,    27.4,    25.69,
> > 26.17,    27.78,    26.08,
> >         24.97,    23.18,    21.78,    22.49,    21.85,    22.2)
> > df <- data.frame(Conc = A, Time = B, Value = V)
> > df$Conc = as.factor(df$Conc)
> > df$Time = as.factor(df$Time)
> > library(ggplot2)
> >
> > ggplot(df, aes(x=Time, y=Value, colour=Conc, group=Conc)) +
> >    geom_line() +
> >    scale_y_reverse(limits = c(20,30)) +
> >    geom_point(size=6) +
> >    scale_colour_manual(values = COLS)
>
> The limits should be `c(30,20)`.
>
> Duncan Murdoch



-- 
Best regards,
Luigi


From |kry|ov @end|ng |rom d|@root@org  Fri Mar  8 13:57:59 2024
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Fri, 8 Mar 2024 15:57:59 +0300
Subject: [R] Function environments serialize to a lot of data until they
 don't
Message-ID: <20240308155759.35b22dbc@Tarkus>

Hello R-help,

I've noticed that my 'parallel' jobs take too much memory to store and
transfer to the cluster workers. I've managed to trace it to the
following:

# `payload` is being written to the cluster worker.
# The function FUN had been created as a closure inside my package:
payload$data$args$FUN
# function (l, ...) 
# withCallingHandlers(fun(l$x, ...), error = .wraperr(l$name))
# <bytecode: 0x5644a9f08a90>
# <environment: 0x5644aa841ad8>

# The function seems to bring a lot of captured data with it.
e <- environment(payload$data$args$FUN)
length(serialize(e, NULL))
# [1] 738202878      
parent.env(e)
# <environment: namespace:mypackage>

# The parent environment has a name, so it all must be right here.
# What is it?

ls(e, all.names = TRUE)
# [1] "fun"
length(serialize(e$fun, NULL))
# [1] 317

# The only object in the environment is small!
# Where is the 700 megabytes of data?

length(serialize(e, NULL))
# [1] 536
length(serialize(payload$data$args$FUN, NULL))
# [1] 1722

And once I've observed `fun`, the environment becomes very small and
now can be serialized in a very compact manner.

I managed to work around it by forcing the promise and explicitly
putting `fun` in a small environment when constructing the closure:

.wrapfun <- function(fun) {
 e <- new.env(parent = loadNamespace('mypackage'))
 e$fun <- fun
 # NOTE: a naive return(function(...)) could serialize to 700
 # megabytes due to `fun` seemingly being a promise (?). Once the
 # promise is resolved, suddenly `fun` is much more compact.
 ret <- function(l, ...) withCallingHandlers(
  fun(l$x, ...),
  error = .wraperr(l$name)
 )
 environment(ret) <- e
 ret
}

Is this analysis correct? Could a simple f <- force(fun) have sufficed?
Where can I read more about this type of problems?

If this really is due to promises, what would be the downsides of
forcing them during serialization?

-- 
Best regards,
Ivan


From iuke-tier@ey m@iii@g oii uiow@@edu  Fri Mar  8 22:46:52 2024
From: iuke-tier@ey m@iii@g oii uiow@@edu (iuke-tier@ey m@iii@g oii uiow@@edu)
Date: Fri, 8 Mar 2024 15:46:52 -0600 (CST)
Subject: [R] [External] Function environments serialize to a lot of data
 until they don't
In-Reply-To: <20240308155759.35b22dbc@Tarkus>
References: <20240308155759.35b22dbc@Tarkus>
Message-ID: <46be207d-48a9-c12-517a-226713790c9@uiowa.edu>

On Fri, 8 Mar 2024, Ivan Krylov via R-help wrote:

> Hello R-help,
>
> I've noticed that my 'parallel' jobs take too much memory to store and
> transfer to the cluster workers. I've managed to trace it to the
> following:
>
> # `payload` is being written to the cluster worker.
> # The function FUN had been created as a closure inside my package:
> payload$data$args$FUN
> # function (l, ...)
> # withCallingHandlers(fun(l$x, ...), error = .wraperr(l$name))
> # <bytecode: 0x5644a9f08a90>
> # <environment: 0x5644aa841ad8>
>
> # The function seems to bring a lot of captured data with it.
> e <- environment(payload$data$args$FUN)
> length(serialize(e, NULL))
> # [1] 738202878
> parent.env(e)
> # <environment: namespace:mypackage>
>
> # The parent environment has a name, so it all must be right here.
> # What is it?
>
> ls(e, all.names = TRUE)
> # [1] "fun"
> length(serialize(e$fun, NULL))
> # [1] 317
>
> # The only object in the environment is small!
> # Where is the 700 megabytes of data?
>
> length(serialize(e, NULL))
> # [1] 536
> length(serialize(payload$data$args$FUN, NULL))
> # [1] 1722
>
> And once I've observed `fun`, the environment becomes very small and
> now can be serialized in a very compact manner.
>
> I managed to work around it by forcing the promise and explicitly
> putting `fun` in a small environment when constructing the closure:
>
> .wrapfun <- function(fun) {
> e <- new.env(parent = loadNamespace('mypackage'))
> e$fun <- fun
> # NOTE: a naive return(function(...)) could serialize to 700
> # megabytes due to `fun` seemingly being a promise (?). Once the
> # promise is resolved, suddenly `fun` is much more compact.
> ret <- function(l, ...) withCallingHandlers(
>  fun(l$x, ...),
>  error = .wraperr(l$name)
> )
> environment(ret) <- e
> ret
> }

Creating and setting environments is brittle and easy to get wrong. I
prefer to use a combination of proper lexical scoping, regular
assignments, and force() as I do below.

> Is this analysis correct? Could a simple f <- force(fun) have sufficed?
> Where can I read more about this type of problems?

Just force(fun), without the assignment, should be enough, or even
just fun, as in

    function(fun) { fun; <do something with fun> }

Using force() make the intent clearer.

Closures or formulas capturing large amount of data is something you
have to be careful about with serialization in general and distributed
memory computing in R in particular. There is a little on it in the
parallel vignette. I know I have talked and written about it in
various places but can't remember a specific reference right now.

I usually define a top level function to create any closures I want to
transmit and make sure they only capture what they need. A common
pattern is provided by a simple function for creating a normal
log-likelihood:

     mkLL <- function(x) {
 	m <- mean(x)
 	s <- sd(x)
 	function(y) sum(dnorm(y, m, s, log = TRUE))
     }

This avoids recomputing the mean and sd on every call. It is fine for
use within a single process, and the fact that the original data is
available in the environment might even be useful for debugging:

     ll <- mkLL(rnorm(10))
     environment(ll)$x
     ##  [1] -0.09202453  0.78901912 -0.66744232  1.36061149  1.50768816
     ##  [6] -2.60754997  0.68727212  0.31557476  2.02027688 -1.42361769

But it does prevent the data from being garbage-collected until
the returned result is no longer reachable. A more GC-friendly, and
serialization-friendly definition is

     mkLL <- function(x) {
 	m <- mean(x)
 	s <- sd(x)
 	x <- NULL  ## not needed anymore; remove from the result's enclosing env
 	function(y) sum(dnorm(y, m, s, log = TRUE))
     }

     ll <- mkLL(rnorm(1e7))
     length(serialize(ll, NULL))
     ## [1] 734

If you prefer to calculate the mean and sd yourself you could use

     mkLL1 <- function(m, s) function(x) sum(dnorm(x, m, s, log = TRUE))

Until the result is called for the first time the evaluation of the
arguments will be delayed, i.e. encoded in promises that record the
expression to evaluate and the environment in which to evaluate
it:

     f <- function(n) {
         x <- rnorm(n)
         mkLL1(mean(x), sd(x))
     }
     ll <- f(1e7)
     length(serialize(ll, NULL))
     ## [1] 80002223

Once the arguments are evaluated, the expressions are still needed for
substitute() and such, but the environment is not, so it is dropped,
and if the promise environment can no longer be reached it can be
garbage-collected, It will also no longer appear in a serialization:

     ll(1)
     ## [1] -1.419588
     length(serialize(ll, NULL))
     ## [1] 3537

Having a reference to a large environment is not much of an issue
within a single process, but can be in a distributed memory parallel
computing context.  To avoid this you can force evaluation of the
promises:

     mkLL1 <- function(m, s) {
 	force(m)
 	force(s)
 	function(x) sum(dnorm(x, m, s, log = TRUE))
     }
     ll <- f(1e7)
     length(serialize(ll, NULL))
     ## [1] 2146

The possibility of inadvertently transferring too much data is an
issue in distributed memory computing in general, so there are various
tools that help. A very simple tool available in the snow package for
snow clusters is snow.time(), which can produce some summary times and
a Gantt chart (patterned after ones produced by xpvm and xmpi). For
example, going back to the first definition of mkLL1 you can try

     mkLL1 <- function(m, s) function(x) sum(dnorm(x, m, s, log = TRUE))
     ll <- f(1e7)
     library(snow)
     cl <- makeCluster(2, type = "SOCK")
     tm <- snow.time(clusterCall(cl, ll, 1))
     print(tm)
     plot(tm)
     stopCluster(cl)

snow.time() is not very sophisticated, not very well tested, and may
be a bit brittle. It has not been not ported to the parallel package,
but it looks like most of the plumbing is there so porting it might
not be too hard.

>
> If this really is due to promises, what would be the downsides of
> forcing them during serialization?

Many. Think NSE, defaults that assume something happens in the body
before the are evaluated ...

Best,

luke

-- 
Luke Tierney
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:   luke-tierney at uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu


From |kry|ov @end|ng |rom d|@root@org  Mon Mar 11 22:17:29 2024
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Tue, 12 Mar 2024 00:17:29 +0300
Subject: [R] [External] Function environments serialize to a lot of data
 until they don't
In-Reply-To: <46be207d-48a9-c12-517a-226713790c9@uiowa.edu>
References: <20240308155759.35b22dbc@Tarkus>
 <46be207d-48a9-c12-517a-226713790c9@uiowa.edu>
Message-ID: <20240312001729.4ef019a0@Tarkus>

Dear Luke,

Thank you for the detailed explanation of the power of force()! It does
solve my problem in a much more reliable manner than setting function
environments manually.

On Fri, 8 Mar 2024 15:46:52 -0600 (CST)
luke-tierney at uiowa.edu wrote:

> Having a reference to a large environment is not much of an issue
> within a single process, but can be in a distributed memory parallel
> computing context.  To avoid this you can force evaluation of the
> promises:
> 
>      mkLL1 <- function(m, s) {
>  	force(m)
>  	force(s)
>  	function(x) sum(dnorm(x, m, s, log = TRUE))
>      }
>      ll <- f(1e7)
>      length(serialize(ll, NULL))
>      ## [1] 2146

I think this also illustrates the danger of letting side effects come
near function arguments. A promise to read a file could survive on a
cluster node and result in a lot of head-scratching. A promise to write
to the connection number N, which coincides with a connection open on
the cluster node, could even do some damage. This is definitely
something to remember when creating closures.

> A very simple tool available in the snow package for snow clusters is
> snow.time(), which can produce some summary times and a Gantt chart
> (patterned after ones produced by xpvm and xmpi).

I can see the snow.time() plot being useful. Thank you for letting me
know about it!

-- 
Best regards,
Ivan


From m@r@g@rc|@1 @end|ng |rom @|umno@@uchceu@e@  Tue Mar 12 08:43:08 2024
From: m@r@g@rc|@1 @end|ng |rom @|umno@@uchceu@e@ (=?Windows-1252?Q?Maria_Del_Mar_Garc=EDa_Zamora?=)
Date: Tue, 12 Mar 2024 07:43:08 +0000
Subject: [R] Problem with R coding
Message-ID: <PR1PR07MB58845D9076232F2E9F69904AF82B2@PR1PR07MB5884.eurprd07.prod.outlook.com>

Hello,

This is the error that appears when I try to load library(Rcmdr). I am using R version 4.3.3. I have tried to upload the packages, uninstall them and intalling them again and nothing.
Loading required package: splines
Loading required package: RcmdrMisc
Loading required package: car
Loading required package: carData
Loading required package: sandwich
Loading required package: effects
lattice theme set by effectsTheme()
See ?effectsTheme for details.
Error: package or namespace load failed for ?Rcmdr?:
 .onLoad failed in loadNamespace() for 'tcltk2', details:
  call: file.exists("~/.Rtk2theme")
  error: file name conversion problem -- name too long?

Once this appears I use path.expand('~') and this is R's answer:
[1] "C:\\Users\\marga\\OneDrive - Fundaci\xf3n Universitaria San Pablo CEU\\Documentos"

The thing is that in spanish we use accents, so this word (Fundaci\xf3n) really is Fundaci?n, but I can't change it.

I have tried to start R from CDM using: C:\Users\marga>set R_USER=C:\Users\marga\R_USER

C:\Users\marga>"C:\Users\marga\Desktop\R-4.3.3\bin\R.exe" CMD Rgui

At the beginning this worked but right now a message saying that this app cannot be used and that I have to ask the software company (photo attached)

What should I do?

Thanks,

Mar


[https://www.uchceu.es/img/externos/correo/ceu_uch.gif]<https://www.uchceu.es/>

Maria Del Mar Garc?a Zamora
Alumno UCHCEU -
Universidad CEU Cardenal Herrera
-
Tel.
www.uchceu.es<https://www.uchceu.es/>

[https://www.uchceu.es/img/logos/wur.jpg]
[https://www.uchceu.es/img/externos/correo/medio_ambiente.gif] Por favor, piensa en el medio ambiente antes de imprimir este contenido



[http://www.uchceu.es/img/externos/correo/ceu_uch.gif]<http://www.uchceu.es/>

Maria Del Mar Garc?a Zamora

www.uchceu.es<http://www.uchceu.es/>

[http://www.uchceu.es/img/externos/correo/medio_ambiente.gif] Por favor, piensa en el medio ambiente antes de imprimir este contenido




Este mensaje y sus archivos adjuntos, enviados desde FUNDACI?N UNIVERSITARIA SAN PABLO-CEU, pueden contener informaci?n confidencial y est? destinado a ser le?do s?lo por la persona a la que va dirigido, por lo que queda prohibida la difusi?n, copia o utilizaci?n de dicha informaci?n por terceros. Si usted lo recibiera por error, por favor, notif?quelo al remitente y destruya el mensaje y cualquier documento adjunto que pudiera contener. Cualquier informaci?n, opini?n, conclusi?n, recomendaci?n, etc. contenida en el presente mensaje no relacionada con la actividad de FUNDACI?N UNIVERSITARIA SAN PABLO-CEU, y/o emitida por persona no autorizada para ello, deber? considerarse como no proporcionada ni aprobada por FUNDACI?N UNIVERSITARIA SAN PABLO-CEU, que pone los medios a su alcance para garantizar la seguridad y ausencia de errores en la correspondencia electr?nica, pero no puede asegurar la inexistencia de virus o la no alteraci?n de los documentos transmitidos electr?nicamente, por lo que declina cualquier responsabilidad a este respecto.

This message and its attachments, sent from FUNDACI?N UNIVERSITARIA SAN PABLO-CEU, may contain confidential information and is intended to be read only by the person it is directed. Therefore any disclosure, copying or use by third parties of this information is prohibited. If you receive this in error, please notify the sender and destroy the message and any attachments may contain. Any information, opinion, conclusion, recommendation,... contained in this message and which is unrelated to the business activity of FUNDACI?N UNIVERSITARIA SAN PABLO-CEU and/or issued by unauthorized personnel, shall be considered unapproved by FUNDACI?N UNIVERSITARIA SAN PABLO-CEU. FUNDACI?N UNIVERSITARIA SAN PABLO-CEU implements control measures to ensure, as far as possible, the security and reliability of all its electronic correspondence. However, FUNDACI?N UNIVERSITARIA SAN PABLO-CEU does not guarantee that emails are virus-free or that documents have not be altered, and does not take responsibility in this respect.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Captura de pantalla 2024-03-11 192201.png
Type: image/png
Size: 192628 bytes
Desc: Captura de pantalla 2024-03-11 192201.png
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20240312/dd91092d/attachment.png>

From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Tue Mar 12 10:38:04 2024
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Tue, 12 Mar 2024 09:38:04 +0000
Subject: [R] Problem with R coding
In-Reply-To: <PR1PR07MB58845D9076232F2E9F69904AF82B2@PR1PR07MB5884.eurprd07.prod.outlook.com>
References: <PR1PR07MB58845D9076232F2E9F69904AF82B2@PR1PR07MB5884.eurprd07.prod.outlook.com>
Message-ID: <76955f35-1f68-458c-855d-d09028ca4bf1@sapo.pt>

?s 07:43 de 12/03/2024, Maria Del Mar Garc?a Zamora escreveu:
> Hello,
> 
> This is the error that appears when I try to load library(Rcmdr). I am using R version 4.3.3. I have tried to upload the packages, uninstall them and intalling them again and nothing.
> Loading required package: splines
> Loading required package: RcmdrMisc
> Loading required package: car
> Loading required package: carData
> Loading required package: sandwich
> Loading required package: effects
> lattice theme set by effectsTheme()
> See ?effectsTheme for details.
> Error: package or namespace load failed for ?Rcmdr?:
>   .onLoad failed in loadNamespace() for 'tcltk2', details:
>    call: file.exists("~/.Rtk2theme")
>    error: file name conversion problem -- name too long?
> 
> Once this appears I use path.expand('~') and this is R's answer:
> [1] "C:\\Users\\marga\\OneDrive - Fundaci\xf3n Universitaria San Pablo CEU\\Documentos"
> 
> The thing is that in spanish we use accents, so this word (Fundaci\xf3n) really is Fundaci?n, but I can't change it.
> 
> I have tried to start R from CDM using: C:\Users\marga>set R_USER=C:\Users\marga\R_USER
> 
> C:\Users\marga>"C:\Users\marga\Desktop\R-4.3.3\bin\R.exe" CMD Rgui
> 
> At the beginning this worked but right now a message saying that this app cannot be used and that I have to ask the software company (photo attached)
> 
> What should I do?
> 
> Thanks,
> 
> Mar
> 
> 
> [https://www.uchceu.es/img/externos/correo/ceu_uch.gif]<https://www.uchceu.es/>
> 
> Maria Del Mar Garc?a Zamora
> Alumno UCHCEU -
> Universidad CEU Cardenal Herrera
> -
> Tel.
> www.uchceu.es<https://www.uchceu.es/>
> 
> [https://www.uchceu.es/img/logos/wur.jpg]
> [https://www.uchceu.es/img/externos/correo/medio_ambiente.gif] Por favor, piensa en el medio ambiente antes de imprimir este contenido
> 
> 
> 
> [http://www.uchceu.es/img/externos/correo/ceu_uch.gif]<http://www.uchceu.es/>
> 
> Maria Del Mar Garc?a Zamora
> 
> www.uchceu.es<http://www.uchceu.es/>
> 
> [http://www.uchceu.es/img/externos/correo/medio_ambiente.gif] Por favor, piensa en el medio ambiente antes de imprimir este contenido
> 
> 
> 
> 
> Este mensaje y sus archivos adjuntos, enviados desde FUNDACI?N UNIVERSITARIA SAN PABLO-CEU, pueden contener informaci?n confidencial y est? destinado a ser le?do s?lo por la persona a la que va dirigido, por lo que queda prohibida la difusi?n, copia o utilizaci?n de dicha informaci?n por terceros. Si usted lo recibiera por error, por favor, notif?quelo al remitente y destruya el mensaje y cualquier documento adjunto que pudiera contener. Cualquier informaci?n, opini?n, conclusi?n, recomendaci?n, etc. contenida en el presente mensaje no relacionada con la actividad de FUNDACI?N UNIVERSITARIA SAN PABLO-CEU, y/o emitida por persona no autorizada para ello, deber? considerarse como no proporcionada ni aprobada por FUNDACI?N UNIVERSITARIA SAN PABLO-CEU, que pone los medios a su alcance para garantizar la seguridad y ausencia de errores en la correspondencia electr?nica, pero no puede asegurar la inexistencia de virus o la no alteraci?n de los documentos transmitidos electr?nicamente, por lo que declina cualquier responsabilidad a este respecto.
> 
> This message and its attachments, sent from FUNDACI?N UNIVERSITARIA SAN PABLO-CEU, may contain confidential information and is intended to be read only by the person it is directed. Therefore any disclosure, copying or use by third parties of this information is prohibited. If you receive this in error, please notify the sender and destroy the message and any attachments may contain. Any information, opinion, conclusion, recommendation,... contained in this message and which is unrelated to the business activity of FUNDACI?N UNIVERSITARIA SAN PABLO-CEU and/or issued by unauthorized personnel, shall be considered unapproved by FUNDACI?N UNIVERSITARIA SAN PABLO-CEU. FUNDACI?N UNIVERSITARIA SAN PABLO-CEU implements control measures to ensure, as far as possible, the security and reliability of all its electronic correspondence. However, FUNDACI?N UNIVERSITARIA SAN PABLO-CEU does not guarantee that emails are virus-free or that documents have not be altered, and does not take responsibility in this respect.
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

First of all, try running Rgui only, no R.exe CMD. Just Rgui.exe or
C:\Users\marga\Desktop\R-4.3.3\bin\Rgui.exe
Then, in Rgui, try loading Rcmdr

library(Rcmdr)


Also, do you have R in your Windows PATH variable? The directory to put 
in PATH should be

C:\Users\marga\Desktop\R-4.3.3\bin

so that Windows can find R.exe and Rgui.exe without the full path name.

Hope this helps,

Rui Barradas



-- 
Este e-mail foi analisado pelo software antiv?rus AVG para verificar a presen?a de v?rus.
www.avg.com

From |kry|ov @end|ng |rom d|@root@org  Tue Mar 12 10:49:10 2024
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Tue, 12 Mar 2024 12:49:10 +0300
Subject: [R] Problem with R coding
In-Reply-To: <PR1PR07MB58845D9076232F2E9F69904AF82B2@PR1PR07MB5884.eurprd07.prod.outlook.com>
References: <PR1PR07MB58845D9076232F2E9F69904AF82B2@PR1PR07MB5884.eurprd07.prod.outlook.com>
Message-ID: <20240312124910.3d4f8968@arachnoid>

? Tue, 12 Mar 2024 07:43:08 +0000
Maria Del Mar Garc?a Zamora <mar.garcia1 at alumnos.uchceu.es> ?????:

> Error: package or namespace load failed for ?Rcmdr?:
>  .onLoad failed in loadNamespace() for 'tcltk2', details:
>   call: file.exists("~/.Rtk2theme")
>   error: file name conversion problem -- name too long?
> 
> Once this appears I use path.expand('~') and this is R's answer:
> [1] "C:\\Users\\marga\\OneDrive - Fundaci\xf3n Universitaria San
> Pablo CEU\\Documentos"

We've seen this problem before:
https://stat.ethz.ch/pipermail/r-help/2023-December/478732.html

The workaround that should help is to set the R_USER environment
variable to C:\Users\marga before launching R.

Please let me know if you're willing to debug R. (This will likely
involve compiling R from source with debugging symbols enabled and
stepping through the code.) There are no places in the Windows code
where R gets the conversion obviously wrong. I don't have OneDrive and I
wasn't able to convince R to return an invalid R_USER path without it.
I'm halfway convinced this is due to a bug in OneDrive itself.

-- 
Best regards,
Ivan


From |kry|ov @end|ng |rom d|@root@org  Tue Mar 12 11:40:38 2024
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Tue, 12 Mar 2024 13:40:38 +0300
Subject: [R] Problem with R coding
In-Reply-To: <PR1PR07MB58845D9076232F2E9F69904AF82B2@PR1PR07MB5884.eurprd07.prod.outlook.com>
References: <PR1PR07MB58845D9076232F2E9F69904AF82B2@PR1PR07MB5884.eurprd07.prod.outlook.com>
Message-ID: <20240312134038.546a8a27@arachnoid>

Dear Maria,

I'm sorry for somehow completely missing the second half of your
message where you say that you've already tried the workaround.

? Tue, 12 Mar 2024 07:43:08 +0000
Maria Del Mar Garc?a Zamora <mar.garcia1 at alumnos.uchceu.es> ?????:

> I have tried to start R from CDM using: C:\Users\marga>set
> R_USER=C:\Users\marga\R_USER
> 
> C:\Users\marga>"C:\Users\marga\Desktop\R-4.3.3\bin\R.exe" CMD Rgui  
> 
> At the beginning this worked but right now a message saying that this
> app cannot be used and that I have to ask the software company (photo
> attached)

Glad to know the workaround helped. It sounds like your Windows
10 is set up in a user-hostile way.

It may help to visit the Windows Security settings and make an
exception for C:\Users\marga\Desktop\R-4.3.3\bin\R.exe. An approximate
instruction can be found at
<https://habr.com/en/companies/hetmansoftware/articles/549410/>, but it
might be the case that your university IT must take a look at it before
allowing you to run R on your computer.

Feel free to disregard this advice if someone with more Windows
experience shows up.

-- 
Best regards,
Ivan


From po|c1410 @end|ng |rom gm@||@com  Tue Mar 12 15:57:28 2024
From: po|c1410 @end|ng |rom gm@||@com (CALUM POLWART)
Date: Tue, 12 Mar 2024 14:57:28 +0000
Subject: [R] Problem with R coding
In-Reply-To: <20240312134038.546a8a27@arachnoid>
References: <PR1PR07MB58845D9076232F2E9F69904AF82B2@PR1PR07MB5884.eurprd07.prod.outlook.com>
 <20240312134038.546a8a27@arachnoid>
Message-ID: <CA+etgPmArWrCqm5T9vrCzt2F62-rhp-KmAdtywhSnxPq1=aKjg@mail.gmail.com>

That's almost certainly going to be either the utf-8 character in the path
OR the use of one drive which isn't really a subfolder as I understand it.

When I've had these issues in the past, I've been able to mount a drive
(say U:/ ) which sites further down /up the folder tree so that R just
called "U:/RCodeFolder/Rfile.R"

Is that possible with an C drive?

On Tue, 12 Mar 2024, 10:40 Ivan Krylov via R-help, <r-help at r-project.org>
wrote:

> Dear Maria,
>
> I'm sorry for somehow completely missing the second half of your
> message where you say that you've already tried the workaround.
>
> ? Tue, 12 Mar 2024 07:43:08 +0000
> Maria Del Mar Garc?a Zamora <mar.garcia1 at alumnos.uchceu.es> ?????:
>
> > I have tried to start R from CDM using: C:\Users\marga>set
> > R_USER=C:\Users\marga\R_USER
> >
> > C:\Users\marga>"C:\Users\marga\Desktop\R-4.3.3\bin\R.exe" CMD Rgui
> >
> > At the beginning this worked but right now a message saying that this
> > app cannot be used and that I have to ask the software company (photo
> > attached)
>
> Glad to know the workaround helped. It sounds like your Windows
> 10 is set up in a user-hostile way.
>
> It may help to visit the Windows Security settings and make an
> exception for C:\Users\marga\Desktop\R-4.3.3\bin\R.exe. An approximate
> instruction can be found at
> <https://habr.com/en/companies/hetmansoftware/articles/549410/>, but it
> might be the case that your university IT must take a look at it before
> allowing you to run R on your computer.
>
> Feel free to disregard this advice if someone with more Windows
> experience shows up.
>
> --
> Best regards,
> Ivan
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From |kw@|mmo @end|ng |rom gm@||@com  Tue Mar 12 16:52:37 2024
From: |kw@|mmo @end|ng |rom gm@||@com (Iris Simmons)
Date: Tue, 12 Mar 2024 11:52:37 -0400
Subject: [R] Problem with R coding
In-Reply-To: <PR1PR07MB58845D9076232F2E9F69904AF82B2@PR1PR07MB5884.eurprd07.prod.outlook.com>
References: <PR1PR07MB58845D9076232F2E9F69904AF82B2@PR1PR07MB5884.eurprd07.prod.outlook.com>
Message-ID: <CADNULg-XZB9QEqt7kfctjWQHbfjaFHE53PVBScqZ49fy9e48SA@mail.gmail.com>

Hi Maria,


I had something similar on my Windows work laptop at some point where the
home directory was something containing non ASCII characters. The easy
solution is to copy said directly from the file explorer into
utils::shortPathName, and then set that as the home directory. In my case,

> writeLines(utils::shortPathName(r"(C:\Users\iris\OneDrive - Organization
Name Non ASCII\Documents)"))
C:\Users\iris\ONEDRI~1\DOCUME~1

and then in the control panel, then user accounts (twice), then Change My
Environment Variables, enter the variable name HOME and the directory that
was produced by R. Now the HOME directory contains all ASCII characters so
everything works as expected.


I hope this helps!



On Tue, Mar 12, 2024, 04:49 Maria Del Mar Garc?a Zamora <
mar.garcia1 at alumnos.uchceu.es> wrote:

> Hello,
>
> This is the error that appears when I try to load library(Rcmdr). I am
> using R version 4.3.3. I have tried to upload the packages, uninstall them
> and intalling them again and nothing.
> Loading required package: splines
> Loading required package: RcmdrMisc
> Loading required package: car
> Loading required package: carData
> Loading required package: sandwich
> Loading required package: effects
> lattice theme set by effectsTheme()
> See ?effectsTheme for details.
> Error: package or namespace load failed for ?Rcmdr?:
>  .onLoad failed in loadNamespace() for 'tcltk2', details:
>   call: file.exists("~/.Rtk2theme")
>   error: file name conversion problem -- name too long?
>
> Once this appears I use path.expand('~') and this is R's answer:
> [1] "C:\\Users\\marga\\OneDrive - Fundaci\xf3n Universitaria San Pablo
> CEU\\Documentos"
>
> The thing is that in spanish we use accents, so this word (Fundaci\xf3n)
> really is Fundaci?n, but I can't change it.
>
> I have tried to start R from CDM using: C:\Users\marga>set
> R_USER=C:\Users\marga\R_USER
>
> C:\Users\marga>"C:\Users\marga\Desktop\R-4.3.3\bin\R.exe" CMD Rgui
>
> At the beginning this worked but right now a message saying that this app
> cannot be used and that I have to ask the software company (photo attached)
>
> What should I do?
>
> Thanks,
>
> Mar
>
>
> [https://www.uchceu.es/img/externos/correo/ceu_uch.gif]<
> https://www.uchceu.es/>
>
> Maria Del Mar Garc?a Zamora
> Alumno UCHCEU -
> Universidad CEU Cardenal Herrera
> -
> Tel.
> www.uchceu.es<https://www.uchceu.es/>
>
> [https://www.uchceu.es/img/logos/wur.jpg]
> [https://www.uchceu.es/img/externos/correo/medio_ambiente.gif] Por favor,
> piensa en el medio ambiente antes de imprimir este contenido
>
>
>
> [http://www.uchceu.es/img/externos/correo/ceu_uch.gif]<
> http://www.uchceu.es/>
>
> Maria Del Mar Garc?a Zamora
>
> www.uchceu.es<http://www.uchceu.es/>
>
> [http://www.uchceu.es/img/externos/correo/medio_ambiente.gif] Por favor,
> piensa en el medio ambiente antes de imprimir este contenido
>
>
>
>
> Este mensaje y sus archivos adjuntos, enviados desde FUNDACI?N
> UNIVERSITARIA SAN PABLO-CEU, pueden contener informaci?n confidencial y
> est? destinado a ser le?do s?lo por la persona a la que va dirigido, por lo
> que queda prohibida la difusi?n, copia o utilizaci?n de dicha informaci?n
> por terceros. Si usted lo recibiera por error, por favor, notif?quelo al
> remitente y destruya el mensaje y cualquier documento adjunto que pudiera
> contener. Cualquier informaci?n, opini?n, conclusi?n, recomendaci?n, etc.
> contenida en el presente mensaje no relacionada con la actividad de
> FUNDACI?N UNIVERSITARIA SAN PABLO-CEU, y/o emitida por persona no
> autorizada para ello, deber? considerarse como no proporcionada ni aprobada
> por FUNDACI?N UNIVERSITARIA SAN PABLO-CEU, que pone los medios a su alcance
> para garantizar la seguridad y ausencia de errores en la correspondencia
> electr?nica, pero no puede asegurar la inexistencia de virus o la no
> alteraci?n de los documentos transmitidos electr?nicamente, por lo que
> declina cualquier responsabilidad a este respecto.
>
> This message and its attachments, sent from FUNDACI?N UNIVERSITARIA SAN
> PABLO-CEU, may contain confidential information and is intended to be read
> only by the person it is directed. Therefore any disclosure, copying or use
> by third parties of this information is prohibited. If you receive this in
> error, please notify the sender and destroy the message and any attachments
> may contain. Any information, opinion, conclusion, recommendation,...
> contained in this message and which is unrelated to the business activity
> of FUNDACI?N UNIVERSITARIA SAN PABLO-CEU and/or issued by unauthorized
> personnel, shall be considered unapproved by FUNDACI?N UNIVERSITARIA SAN
> PABLO-CEU. FUNDACI?N UNIVERSITARIA SAN PABLO-CEU implements control
> measures to ensure, as far as possible, the security and reliability of all
> its electronic correspondence. However, FUNDACI?N UNIVERSITARIA SAN
> PABLO-CEU does not guarantee that emails are virus-free or that documents
> have not be altered, and does not take responsibility in this respect.
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From |kry|ov @end|ng |rom d|@root@org  Tue Mar 12 17:08:42 2024
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Tue, 12 Mar 2024 19:08:42 +0300
Subject: [R] Problem with R coding
In-Reply-To: <CA+etgPmArWrCqm5T9vrCzt2F62-rhp-KmAdtywhSnxPq1=aKjg@mail.gmail.com>
References: <PR1PR07MB58845D9076232F2E9F69904AF82B2@PR1PR07MB5884.eurprd07.prod.outlook.com>
 <20240312134038.546a8a27@arachnoid>
 <CA+etgPmArWrCqm5T9vrCzt2F62-rhp-KmAdtywhSnxPq1=aKjg@mail.gmail.com>
Message-ID: <20240312190842.04f1b4d9@arachnoid>

? Tue, 12 Mar 2024 14:57:28 +0000
CALUM POLWART <polc1410 at gmail.com> ?????:

> That's almost certainly going to be either the utf-8 character in the
> path

The problem, as diagnosed by Maria in the first post of the thread, is
that the user home directory as known to R is stored in the ANSI
encoding instead of UTF-8, despite the session charset should be UTF-8
as Maria's Windows is sufficiently new [*]. As soon as any bit of R
tries to perform an encoding conversion using this path (for example,
file.exists() converting it from UTF-8 to UCS-2 in order to interact
with Windows filesystem APIs), the conversion fails. Since tcltk2 uses
file.exists('~/...') in its .onLoad, the package and any of its hard
dependencies are now broken.

Normally, this path is determined automatically to be something like
C:\Users\username\Documents. With OneDrive taking over, it turns out to
be something else and for some reason in the wrong encoding (ANSI but
marked as native == UTF-8).

The function that determines this path lives in src/gnuwin32/shext.c
(char *getRUser(void)). It starts by looking at the environment
variable R_USER, which is why in order to override OneDrive, the user
has to set it first (in the command line or system settings). If that
fails, R tries the environment variable HOME (which is usually set on
Windows, isn't it?), consults SHGetKnownFolderPath(FOLDERID_Documents)
(which returns the result as a wchar_t[] to be manually converted to
UTF-8 by R), consults a few more environment variables, and finally
tries to use the current directory. There is likely no easy way to use
`subst` to give a different home drive to R.

If I set %HOME% or even %R_USER% to a non-ASCII path without setting up
OneDrive, R works normally, so getenv() must be able to return
UTF-8-encoded variables. I don't see how ShellGetPersonalDirectory()
could fail in this manner. My remaining hypothesis is that OneDrive
somehow causes getenv("HOME") to return "C:\\Users\\marga\\OneDrive
- Fundaci?n Universitaria San Pablo CEU\\Documentos" in ANSI instead of
UTF-8.

If anyone here has OneDrive set up in this manner and can debug R,
a trace of what getRUser() actually does would be very useful.

-- 
Best regards,
Ivan

[*]
https://blog.r-project.org/2020/05/02/utf-8-support-on-windows/index.html
https://blog.r-project.org/2022/11/07/issues-while-switching-r-to-utf-8-and-ucrt-on-windows/index.html


From bog@@o@chr|@to|er @end|ng |rom gm@||@com  Wed Mar 13 14:31:59 2024
From: bog@@o@chr|@to|er @end|ng |rom gm@||@com (Christofer Bogaso)
Date: Wed, 13 Mar 2024 19:01:59 +0530
Subject: [R] Generating mouse click and hold using R
Message-ID: <CA+dpOJkqWXT4REkd9a_MXzW7DVEV+mhQDXz3ho=B31cVTWez6w@mail.gmail.com>

Hi,

I wonder if R can provide any functionality where I need simulate
mouse click in windows machine at certain coordinate on screen and
hold the click for certain seconds e.g. for 5 seconds

Really appreciate if I can have someone suggestion how above can be
simulated with R

Thanks and regards,


From |kry|ov @end|ng |rom d|@root@org  Wed Mar 13 14:51:48 2024
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Wed, 13 Mar 2024 16:51:48 +0300
Subject: [R] Generating mouse click and hold using R
In-Reply-To: <CA+dpOJkqWXT4REkd9a_MXzW7DVEV+mhQDXz3ho=B31cVTWez6w@mail.gmail.com>
References: <CA+dpOJkqWXT4REkd9a_MXzW7DVEV+mhQDXz3ho=B31cVTWez6w@mail.gmail.com>
Message-ID: <20240313165148.4d2d3798@arachnoid>

? Wed, 13 Mar 2024 19:01:59 +0530
Christofer Bogaso <bogaso.christofer at gmail.com> ?????:

> I need simulate mouse click in windows machine at certain coordinate
> on screen and hold the click for certain seconds e.g. for 5 seconds

There's no interface for this in base R. It's always possible to write
some Windows API code to do that and call it from R using .Call()
(SendInput() is relatively easy to use [*]), but that takes effort and
knowledge of C.

What I suggest to do instead is to write an AutoHotKey script, making
use of the Click function [**] and taking arguments from the command
line [***], and then launch that script using system2(). AutoHotKey is
free software (GPLv2), designed specifically to automate other programs
and should be much easier to use correctly than C.

-- 
Best regards,
Ivan

[*]
https://learn.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-sendinput

[**]
https://www.autohotkey.com/docs/v2/lib/Click.htm

[***]
https://www.autohotkey.com/docs/v2/Scripts.htm#cmd


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Mar 13 14:52:03 2024
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 13 Mar 2024 06:52:03 -0700
Subject: [R] Generating mouse click and hold using R
In-Reply-To: <CA+dpOJkqWXT4REkd9a_MXzW7DVEV+mhQDXz3ho=B31cVTWez6w@mail.gmail.com>
References: <CA+dpOJkqWXT4REkd9a_MXzW7DVEV+mhQDXz3ho=B31cVTWez6w@mail.gmail.com>
Message-ID: <3D3AE246-4D03-4EDA-8038-DCA51641FCC4@dcn.davis.ca.us>

No idea if the package below would work. This package is MSWindows only. Since this was readily found using a search engine, you should have mentioned that you already found this and why it didn't work for you when you posted.

https://cran.r-project.org/web/packages/KeyboardSimulator/readme/README.html
https://stat.ethz.ch/R-manual/R-devel/library/base/html/Sys.sleep.html


On March 13, 2024 6:31:59 AM PDT, Christofer Bogaso <bogaso.christofer at gmail.com> wrote:
>Hi,
>
>I wonder if R can provide any functionality where I need simulate
>mouse click in windows machine at certain coordinate on screen and
>hold the click for certain seconds e.g. for 5 seconds
>
>Really appreciate if I can have someone suggestion how above can be
>simulated with R
>
>Thanks and regards,
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From bog@@o@chr|@to|er @end|ng |rom gm@||@com  Wed Mar 13 16:29:07 2024
From: bog@@o@chr|@to|er @end|ng |rom gm@||@com (Christofer Bogaso)
Date: Wed, 13 Mar 2024 20:59:07 +0530
Subject: [R] refresh.console() function?
Message-ID: <CA+dpOJ=ep-4Qguig-vdg=2dd6YyD-OQG40Q=Va9SugrTxRrUtg@mail.gmail.com>

Hi,

I run a lengthy for loop and I want to display loop status for each
step in my loop.

I previously heard of a R function namely refresh.console() which
would print the status within the loop as it progresses.

However I see this

> help.search("refresh.console")

No vignettes or demos or help files found with alias or concept or

title matching ?refresh.console? using regular expression matching.

Could you please help me find the correct function name?


From e@ @end|ng |rom enr|co@chum@nn@net  Wed Mar 13 16:34:49 2024
From: e@ @end|ng |rom enr|co@chum@nn@net (Enrico Schumann)
Date: Wed, 13 Mar 2024 16:34:49 +0100
Subject: [R] refresh.console() function?
In-Reply-To: <CA+dpOJ=ep-4Qguig-vdg=2dd6YyD-OQG40Q=Va9SugrTxRrUtg@mail.gmail.com>
 (Christofer Bogaso's message of "Wed, 13 Mar 2024 20:59:07 +0530")
References: <CA+dpOJ=ep-4Qguig-vdg=2dd6YyD-OQG40Q=Va9SugrTxRrUtg@mail.gmail.com>
Message-ID: <877ci6cfhi.fsf@enricoschumann.net>

On Wed, 13 Mar 2024, Christofer Bogaso writes:

> Hi,
>
> I run a lengthy for loop and I want to display loop status for each
> step in my loop.
>
> I previously heard of a R function namely refresh.console() which
> would print the status within the loop as it progresses.
>
> However I see this
>
>> help.search("refresh.console")
>
> No vignettes or demos or help files found with alias or concept or
>
> title matching ?refresh.console? using regular expression matching.
>
> Could you please help me find the correct function name?
>

?flush.console

... but you'll need to print/message/cat/... explicitly in the
loop, or the output won't be shown.  [Also, options(warn=1) might
be useful.]


-- 
Enrico Schumann
Lucerne, Switzerland
http://enricoschumann.net


From deep@y@n@@@rk@r @end|ng |rom gm@||@com  Wed Mar 13 16:40:09 2024
From: deep@y@n@@@rk@r @end|ng |rom gm@||@com (Deepayan Sarkar)
Date: Wed, 13 Mar 2024 21:10:09 +0530
Subject: [R] refresh.console() function?
In-Reply-To: <CA+dpOJ=ep-4Qguig-vdg=2dd6YyD-OQG40Q=Va9SugrTxRrUtg@mail.gmail.com>
References: <CA+dpOJ=ep-4Qguig-vdg=2dd6YyD-OQG40Q=Va9SugrTxRrUtg@mail.gmail.com>
Message-ID: <CADfFDC6cN+Y2og1SNZQ8a6j8zp+CudvmWBrMv_LL+1zM5f6HMQ@mail.gmail.com>

Perhaps you mean

https://search.r-project.org/R/refmans/utils/html/flush.console.html

Best,
Deepayan


On Wed, 13 Mar, 2024, 8:59 pm Christofer Bogaso, <
bogaso.christofer at gmail.com> wrote:

> Hi,
>
> I run a lengthy for loop and I want to display loop status for each
> step in my loop.
>
> I previously heard of a R function namely refresh.console() which
> would print the status within the loop as it progresses.
>
> However I see this
>
> > help.search("refresh.console")
>
> No vignettes or demos or help files found with alias or concept or
>
> title matching ?refresh.console? using regular expression matching.
>
> Could you please help me find the correct function name?
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Thu Mar 14 17:37:30 2024
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Thu, 14 Mar 2024 17:37:30 +0100
Subject: [R] Rtools and things dependent on it
In-Reply-To: <313a3842-630a-6d10-b930-63f7f7c7fea6@comcast.net>
References: <004901da66a8$6d14a7a0$473df6e0$@gmail.com>
 <313a3842-630a-6d10-b930-63f7f7c7fea6@comcast.net>
Message-ID: <9de4963d-0ea4-4e64-952f-601b2a398b35@gmail.com>


On 2/24/24 01:01, David Winsemius wrote:
> On 2/23/24 14:34, avi.e.gross at gmail.com wrote:
>> This may be a dumb question and the answer may make me feel dumber.
>>    
>> I have had trouble for years with R packages wanting Rtools on my machine
>> and not being able to use it. Many packages are fine as binaries are
>> available. I have loaded Rtools and probably need to change my PATH or
>> something.
>
> I suppose making sure that whatever directory holds your Rtools code is
> on your path would be a good idea. I wondered if there's an environment
> variable that could be set, but reading the page on using Rtools did not
> mention one until I got down to the section on building R from source
> which is surely NOT what you want to do.. You should read the
> information on installation and building packages from source.
> https://cran.r-project.org/bin/windows/base/howto-R-devel.html which
> includes this sentence:
>
> "It is recommended to use the defaults and install into|c:/rtools43|.
> When done that way, Rtools43 may be used in the same R session which
> installed it or which was started before Rtools43 was installed."
Yes, for regular users, who just want to install R packages on Windows 
from source (packages that include C, C++ of Fortran code), all that is 
needed is to:

- install R from the official installer provided by CRAN

- install Rtools (also from CRAN) for that version of R (so Rtools42 for 
R 4.2, Rtools43 for R 4.3, Rtools44 for R-devel/to become R 4.4)

If both is done accepting the defaults, no additional configuration is 
needed. R will automatically find Rtools when it needs it. One can have 
multiple versions of R and multiple versions of Rtools installed on the 
system, R will find and use the version of Rtools it needs.

Tomas

>
>>    
>> But I recently suggested to someone that they might want to use the tabyl()
>> function in the janitor package that I find helpful. I get a warning when I
>> install it about Rtools but it works fine. When they install it, it fails. I
>> assumed they would get it from CRAN the same way I did as we are both using
>> Windows and from within RSTUDIO.
>>    
>> In the past, I have run into other packages I could not use and just moved
>> on but it seems like time to see if this global problem has a work-around.
>>    
>> And, in particular, I have the latest versions of both R and RSTUDIO which
>> can be a problem when other things are not as up-to-date.
>>    
>> Or, maybe some people with R packages could be convinced to make binaries
>> available in the first place?
> Binaries are automatically produced by CRAN but perhaps you are trying
> to install from some other source? It would help if you could be
> specific about several missing pieces of information: Operating system,
> R version, Rtools version, current location of Rtools, names of packages
> and where they were obtained.
>
>
> Regards and good luck;
>
> David (a.k.a IRTFM)
>
>> Avi
>>
>> 	[[alternative HTML version deleted]]
> Rhelp is a plain text mailing list. You should configure your email
> client to send only plain-text and NOT html.
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From d|@@@curto @end|ng |rom |@cte-|u|@pt  Thu Mar 14 13:51:37 2024
From: d|@@@curto @end|ng |rom |@cte-|u|@pt (=?iso-8859-1?Q?Jos=E9_Dias_Curto?=)
Date: Thu, 14 Mar 2024 12:51:37 +0000
Subject: [R] CADFtest difference between max.lag.y with criterion and
 without criterion
Message-ID: <PAXPR10MB4637DB4D38FCBA02F31652DBAB292@PAXPR10MB4637.EURPRD10.PROD.OUTLOOK.COM>

Dear Professor Bernhard,

Sorry for take your time, but I found something strange that I am not able to explain/understand.

Suppose that I compute the ADF test by using the criterion="BIC" to select the lags:

summary(CADFtest(y, max.lag.y = 20, type = "drift", criterion="BIC"))

Suppose that 2 lags are selected.

Next, if I set the lags to 2: summary(CADFtest(y, max.lag.y = 2, type = "drift"))
the ADF test result is different... You can confirm down, please. I think the reason is the number of included observations after adjustments... 8533 in the first case and 8551 in the second case.
What am I doing wrong?
Thank you very much for your help.
Best regards,
Jos? Dias Curto

> summary(CADFtest(y, max.lag.y = 20, type = "drift", criterion="BIC"))
Augmented DF test
                                            ADF test
t-test statistic:                          0.1070651
p-value:                                   0.9663296
Max lag of the diff. dependent variable:   2.0000000

Call:
dynlm(formula = formula(model), start = obs.1, end = obs.T)

Residuals:
     Min       1Q   Median       3Q      Max
-116.646   -3.719    0.163    4.444  110.891

Coefficients:
              Estimate Std. Error t value Pr(>|t|)
(Intercept)  2.758e-01  2.649e-01   1.041 0.297853
L(y, 1)      2.256e-05  2.107e-04   0.107 0.966330
L(d(y), 1)  -5.086e-02  1.085e-02  -4.689 2.78e-06 ***
L(d(y), 2)  -4.030e-02  1.086e-02  -3.710 0.000209 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 12.73 on 8529 degrees of freedom
Multiple R-squared:  0.003998, Adjusted R-squared:  0.003648
F-statistic: 17.12 on 2 and 8529 DF,  p-value: 3.809e-08


> summary(CADFtest(y, max.lag.y = 2, type = "drift"))

Augmented DF test

                                           ADF test

t-test statistic:                          0.111863

p-value:                                   0.966685

Max lag of the diff. dependent variable:   2.000000



Call:

dynlm(formula = formula(model), start = obs.1, end = obs.T)



Residuals:

     Min       1Q   Median       3Q      Max

-116.647   -3.706    0.155    4.438  110.890



Coefficients:

              Estimate Std. Error t value Pr(>|t|)

(Intercept)  0.2743714  0.2638699   1.040 0.298463

L(y, 1)      0.0000235  0.0002101   0.112 0.966685

L(d(y), 1)  -0.0508659  0.0108353  -4.694 2.71e-06 ***

L(d(y), 2)  -0.0403022  0.0108507  -3.714 0.000205 ***

---

Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1



Residual standard error: 12.72 on 8547 degrees of freedom

Multiple R-squared:  0.003999, Adjusted R-squared:  0.003649

F-statistic: 17.16 on 2 and 8547 DF,  p-value: 3.662e-08



	[[alternative HTML version deleted]]


From Thom@@@Sub|@ @end|ng |rom dr@ex|m@|er@com  Thu Mar 14 15:12:12 2024
From: Thom@@@Sub|@ @end|ng |rom dr@ex|m@|er@com (Subia Thomas OI-US-LIV5)
Date: Thu, 14 Mar 2024 14:12:12 +0000
Subject: [R] write.xlsx error message
Message-ID: <PAXP190MB1839BBEA29CD25440ED49CCE8F292@PAXP190MB1839.EURP190.PROD.OUTLOOK.COM>

Colleagues,

Using write.xlsx to extract data from an Excel file, I get this error message.


Error in .jcall("RJavaTools", "Ljava/lang/Object;", "invokeMethod", cl,  :
  java.lang.OutOfMemoryError: GC overhead limit exceeded

I was thinking that this might be a RAM issue but with 16 GB RAM, I wasn't expecting this error message.

Any guidance would be appreciated.

Mit freundlichen Gruessen  / Cordialement / Best regards
Thomas Subia
Lean Six Sigma Senior Practitioner

DR?XLMAIER Group
DAA Draexlmaier Automotive of America LLC


mailto:thomas.subia at draexlmaier.com
http://www.draexlmaier.com<http://www.draexlmaier.com/>

"Nous croyons en Dieu.
Tous les autres doivent apporter des donn?es.
Edward Deming



Public

	[[alternative HTML version deleted]]


From |kry|ov @end|ng |rom d|@root@org  Fri Mar 15 08:38:06 2024
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Fri, 15 Mar 2024 10:38:06 +0300
Subject: [R] write.xlsx error message
In-Reply-To: =?utf-8?q?=3CPAXP190MB1839BBEA29CD25440ED49CCE8F292=40PAXP190MB?=
 =?utf-8?q?1839=2EEURP190=2EPROD=2EOUTLOOK=2ECOM=3E?=
References: =?utf-8?q?=3CPAXP190MB1839BBEA29CD25440ED49CCE8F292=40PAXP190MB1?=
 =?utf-8?q?839=2EEURP190=2EPROD=2EOUTLOOK=2ECOM=3E?=
Message-ID: <20240315103806.1d79cc4f@Tarkus>

? Thu, 14 Mar 2024 14:12:12 +0000
Subia Thomas OI-US-LIV5 <Thomas.Subia at draexlmaier.com> ?????:

> Using write.xlsx to extract data from an Excel file, I get this error
> message.
> 
> 
> Error in .jcall("RJavaTools", "Ljava/lang/Object;", "invokeMethod",
> cl,  : java.lang.OutOfMemoryError: GC overhead limit exceeded

There seems to be a default limit of 512 megabytes for the Java heap
size:

library(rJava)
getOption('java.parameters')
# [1] "-Xmx512m"

Does if help if you set options(java.parameters = '-Xmx2048m') (or
as much as you feel comfortable with) before loading XLConnect?

-- 
Best regards,
Ivan


From ger@ophii m@iii@g oii gmx@@et  Fri Mar 15 09:07:11 2024
From: ger@ophii m@iii@g oii gmx@@et (ger@ophii m@iii@g oii gmx@@et)
Date: Fri, 15 Mar 2024 09:07:11 +0100
Subject: [R] write.xlsx error message
Message-ID: <trinity-29ef0e9d-9689-4c47-8e73-cee3cc5c4652-1710490031574@3c-app-gmx-bs10>


I think remember this error from trying to write an Excel file that already existed. If this file already exists, try to delete it and see, if this solves the issue.

Besides that you're writing that you are "Using write.xlsx to extract data from an Excel file", write.xlsx() is to write an Excel file, not to read from it. Should be read.xlsx() then iirc.

?
?

Gesendet:?Freitag, 15. M?rz 2024 um 08:38 Uhr
Von:?"Ivan Krylov via R-help" <r-help at r-project.org>
An:?"Subia Thomas OI-US-LIV5" <Thomas.Subia at draexlmaier.com>
Cc:?"r-help at r-project.org" <r-help at r-project.org>
Betreff:?Re: [R] write.xlsx error message
? Thu, 14 Mar 2024 14:12:12 +0000
Subia Thomas OI-US-LIV5 <Thomas.Subia at draexlmaier.com> ?????:

> Using write.xlsx to extract data from an Excel file, I get this error
> message.
>
>
> Error in .jcall("RJavaTools", "Ljava/lang/Object;", "invokeMethod",
> cl, : java.lang.OutOfMemoryError: GC overhead limit exceeded

There seems to be a default limit of 512 megabytes for the Java heap
size:

library(rJava)
getOption('java.parameters')
# [1] "-Xmx512m"

Does if help if you set options(java.parameters = '-Xmx2048m') (or
as much as you feel comfortable with) before loading XLConnect?

--
Best regards,
Ivan

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html[http://www.R-project.org/posting-guide.html][http://www.R-project.org/posting-guide.html[http://www.R-project.org/posting-guide.html]]
and provide commented, minimal, self-contained, reproducible code.
?
?


From r-p@ck@ge@ @end|ng |rom r-project@org  Wed Mar 13 10:10:23 2024
From: r-p@ck@ge@ @end|ng |rom r-project@org (Vincent Audigier via R-packages)
Date: Wed, 13 Mar 2024 10:10:23 +0100
Subject: [R] [R-pkgs] clusterMI: Cluster Analysis with Missing Values by
 Multiple Imputation
Message-ID: <bb40a01d-a3dc-4b58-88d5-01f7eb4d4517@cnam.fr>

Dear all,

I am pleased to announce the release of a new package named 'clusterMI' on CRAN.

clusterMI allows clustering of incomplete observations by addressing missing values using multiple imputation.

For achieving this goal, the methodology consists in three steps:

1. missing data imputation using tailored imputation models: four multiple imputation methods are proposed, two are based on joint modelling (JM-GL and JM-DP) and two are fully sequential methods (FCS-homo and FCS-hetero).
2. cluster analysis of imputed data sets: six clustering methods are available (kmeans, pam, clara, hierarchical clustering, fuzzy c-means and gaussian mixture), but custom methods can also be easily used.
3. partition pooling: the set of partitions is aggregated using NMF based method. An associated instability measure is computed by bootstrap. Among applications, this instability measure can be used to choose a number of clusters with missing values.

The package also offers several diagnostic tools for tuning the number of imputed data sets, for checking convergence in sequential imputation, for checking the fit of imputation models, etc.

This is the first version of the package, your feedback and suggestions are welcome!

Please find more details and download the package from the following link:https://cran.r-project.org/package=clusterMI

Best regards,

V. Audigier

-- 
Vincent AUDIGIER
Associate Professor, CNAM
2 rue Cont? 75003 Paris
Office 35.3.21
Tel: 01 40 27 27 19
Website:http://vincentaudigier.weebly.com/

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From Thom@@@Sub|@ @end|ng |rom dr@ex|m@|er@com  Fri Mar 15 15:27:35 2024
From: Thom@@@Sub|@ @end|ng |rom dr@ex|m@|er@com (Subia Thomas OI-US-LIV5)
Date: Fri, 15 Mar 2024 14:27:35 +0000
Subject: [R] write.xlsx error message
In-Reply-To: <trinity-29ef0e9d-9689-4c47-8e73-cee3cc5c4652-1710490031574@3c-app-gmx-bs10>
References: <trinity-29ef0e9d-9689-4c47-8e73-cee3cc5c4652-1710490031574@3c-app-gmx-bs10>
Message-ID: <PAXP190MB1839DC47ECB597E9B331C6D18F282@PAXP190MB1839.EURP190.PROD.OUTLOOK.COM>

Good point, indeed it should have been read.xlsx.



Mit freundlichen Gruessen  / Cordialement / Best regards
Thomas Subia
Lean Six Sigma Senior Practitioner

DR?XLMAIER Group
DAA Draexlmaier Automotive of America LLC
801 Challenger Street
Livermore CA 94551

Ph:     925-978-8111

mailto:thomas.subia at draexlmaier.com
http://www.draexlmaier.com

?Nous croyons en Dieu.
Tous les autres doivent apporter des donn?es.
Edward Deming


Public
-----Original Message-----
From: gernophil at gmx.net <gernophil at gmx.net>
Sent: Friday, March 15, 2024 1:07 AM
To: Subia Thomas OI-US-LIV5 <Thomas.Subia at draexlmaier.com>; r-help at r-project.org
Subject: Aw: Re: [R] write.xlsx error message

[You don't often get email from gernophil at gmx.net. Learn why this is important at https://aka.ms/LearnAboutSenderIdentification ]

Caution: This email originated from outside the organization. Do not click links or open attachments unless you recognize the sender and know the content is safe.

I think remember this error from trying to write an Excel file that already existed. If this file already exists, try to delete it and see, if this solves the issue.

Besides that you're writing that you are "Using write.xlsx to extract data from an Excel file", write.xlsx() is to write an Excel file, not to read from it. Should be read.xlsx() then iirc.




Gesendet: Freitag, 15. M?rz 2024 um 08:38 Uhr
Von: "Ivan Krylov via R-help" <r-help at r-project.org>
An: "Subia Thomas OI-US-LIV5" <Thomas.Subia at draexlmaier.com>
Cc: "r-help at r-project.org" <r-help at r-project.org>
Betreff: Re: [R] write.xlsx error message ? Thu, 14 Mar 2024 14:12:12 +0000 Subia Thomas OI-US-LIV5 <Thomas.Subia at draexlmaier.com> ?????:

> Using write.xlsx to extract data from an Excel file, I get this error
> message.
>
>
> Error in .jcall("RJavaTools", "Ljava/lang/Object;", "invokeMethod",
> cl, : java.lang.OutOfMemoryError: GC overhead limit exceeded

There seems to be a default limit of 512 megabytes for the Java heap
size:

library(rJava)
getOption('java.parameters')
# [1] "-Xmx512m"

Does if help if you set options(java.parameters = '-Xmx2048m') (or as much as you feel comfortable with) before loading XLConnect?

--
Best regards,
Ivan

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html[http://www.R-project.org/posting-guide.html][http://www.R-project.org/posting-guide.html[http://www.R-project.org/posting-guide.html]]
and provide commented, minimal, self-contained, reproducible code.


From j@b@y@t194 @end|ng |rom gm@||@com  Sat Mar 16 05:09:02 2024
From: j@b@y@t194 @end|ng |rom gm@||@com (javad bayat)
Date: Sat, 16 Mar 2024 07:39:02 +0330
Subject: [R] Problem when trying to install packages
In-Reply-To: <d757d942-cc7e-4a18-8876-da5085aa6e32@sapo.pt>
References: <CANTxAmL+E4pubS7KfVP+Rx0f6Cd_rZZAb1dpqxyr5E5FH3-R0Q@mail.gmail.com>
 <d757d942-cc7e-4a18-8876-da5085aa6e32@sapo.pt>
Message-ID: <CANTxAm+VTm2KbfFJg5FFFPj8hDMiV0WaropUT5Y9D-5mjNNZqw@mail.gmail.com>

 Dear Rui;
Many thanks for your reply. I have installed Rtools (rtools43-5958-5975) on
my PC and I have R version 4.3.3 and 4.3.2 to install. Also I have
installed Rstudio through Anaconda Navigator.
But I do not know how to use Rtools for installing the R packages. I would
be more than happy if you help me.
Sincerely yours



> Dear Rui;
> I hope this email finds you well. I have a problem installing packages in
> Rstudio and R software. When I try to install a package, the software
tries
> to download but after downloading, it gives some errors and does not work.
> I would be more than happy if you please help me to solve this issue.
> Warm regards.
>
>
>> install.packages("openair", type = "source")Installing package into
?C:/R_Libs?
> (as ?lib? is unspecified)Warning in install.packages :
>    dependencies ?lattice?, ?MASS? are not availablealso installing the
> dependencies ?deldir?, ?RcppEigen?, ?cli?, ?glue?, ?lifecycle?,
> ?pillar?, ?rlang?, ?tibble?, ?tidyselect?, ?vctrs?, ?png?, ?jpeg?,
> ?interp?, ?timechange?, ?maps?, ?nlme?, ?Matrix?, ?cluster?, ?dplyr?,
> ?hexbin?, ?latticeExtra?, ?lubridate?, ?mapproj?, ?mgcv?, ?purrr?
> trying URL '
https://cran.rstudio.com/src/contrib/deldir_2.0-4.tar.gz'Content
> type 'application/x-gzip' length 103621 bytes (101 KB)downloaded 101
> KB
> trying URL '
https://cran.rstudio.com/src/contrib/RcppEigen_0.3.4.0.0.tar.gz'Content
> type 'application/x-gzip' length 1765714 bytes (1.7 MB)downloaded 1.7
> MB
> trying URL 'https://cran.rstudio.com/src/contrib/cli_3.6.2.tar.gz'Content
> type 'application/x-gzip' length 569771 bytes (556 KB)downloaded 556
> KB
> trying URL 'https://cran.rstudio.com/src/contrib/glue_1.7.0.tar.gz'Content
> type 'application/x-gzip' length 105420 bytes (102 KB)downloaded 102
> KB
> trying URL '
https://cran.rstudio.com/src/contrib/lifecycle_1.0.4.tar.gz'Content
> type 'application/x-gzip' length 107656 bytes (105 KB)downloaded 105
> KB
> trying URL '
https://cran.rstudio.com/src/contrib/pillar_1.9.0.tar.gz'Content
> type 'application/x-gzip' length 444528 bytes (434 KB)downloaded 434
> KB
> trying URL '
https://cran.rstudio.com/src/contrib/rlang_1.1.3.tar.gz'Content
> type 'application/x-gzip' length 763765 bytes (745 KB)downloaded 745
> KB
> trying URL '
https://cran.rstudio.com/src/contrib/tibble_3.2.1.tar.gz'Content
> type 'application/x-gzip' length 565982 bytes (552 KB)downloaded 552
> KB
> trying URL '
https://cran.rstudio.com/src/contrib/tidyselect_1.2.1.tar.gz'Content
> type 'application/x-gzip' length 103591 bytes (101 KB)downloaded 101
> KB
> trying URL '
https://cran.rstudio.com/src/contrib/vctrs_0.6.5.tar.gz'Content
> type 'application/x-gzip' length 969066 bytes (946 KB)downloaded 946
> KB
> trying URL 'https://cran.rstudio.com/src/contrib/png_0.1-8.tar.gz'Content
> type 'application/x-gzip' length 24880 bytes (24 KB)downloaded 24 KB
> trying URL '
https://cran.rstudio.com/src/contrib/jpeg_0.1-10.tar.gz'Content
> type 'application/x-gzip' length 18667 bytes (18 KB)downloaded 18 KB
> trying URL '
https://cran.rstudio.com/src/contrib/interp_1.1-6.tar.gz'Content
> type 'application/x-gzip' length 1112116 bytes (1.1 MB)downloaded 1.1
> MB
> trying URL '
https://cran.rstudio.com/src/contrib/timechange_0.3.0.tar.gz'Content
> type 'application/x-gzip' length 103439 bytes (101 KB)downloaded 101
> KB
> trying URL 'https://cran.rstudio.com/src/contrib/maps_3.4.2.tar.gz'Content
> type 'application/x-gzip' length 2278051 bytes (2.2 MB)downloaded 2.2
> MB
> trying URL '
https://cran.rstudio.com/src/contrib/nlme_3.1-164.tar.gz'Content
> type 'application/x-gzip' length 836832 bytes (817 KB)downloaded 817
> KB
> trying URL '
https://cran.rstudio.com/src/contrib/Matrix_1.6-5.tar.gz'Content
> type 'application/x-gzip' length 2883851 bytes (2.8 MB)downloaded 2.8
> MB
> trying URL '
https://cran.rstudio.com/src/contrib/cluster_2.1.6.tar.gz'Content
> type 'application/x-gzip' length 369050 bytes (360 KB)downloaded 360
> KB
> trying URL '
https://cran.rstudio.com/src/contrib/dplyr_1.1.4.tar.gz'Content
> type 'application/x-gzip' length 1207521 bytes (1.2 MB)downloaded 1.2
> MB
> trying URL '
https://cran.rstudio.com/src/contrib/hexbin_1.28.3.tar.gz'Content
> type 'application/x-gzip' length 1199967 bytes (1.1 MB)downloaded 1.1
> MB
> trying URL '
https://cran.rstudio.com/src/contrib/latticeExtra_0.6-30.tar.gz'Content
> type 'application/x-gzip' length 1292936 bytes (1.2 MB)downloaded 1.2
> MB
> trying URL '
https://cran.rstudio.com/src/contrib/lubridate_1.9.3.tar.gz'Content
> type 'application/x-gzip' length 428043 bytes (418 KB)downloaded 418
> KB
> trying URL '
https://cran.rstudio.com/src/contrib/mapproj_1.2.11.tar.gz'Content
> type 'application/x-gzip' length 25544 bytes (24 KB)downloaded 24 KB
> trying URL 'https://cran.rstudio.com/src/contrib/mgcv_1.9-1.tar.gz'Content
> type 'application/x-gzip' length 1083217 bytes (1.0 MB)downloaded 1.0
> MB
> trying URL '
https://cran.rstudio.com/src/contrib/purrr_1.0.2.tar.gz'Content
> type 'application/x-gzip' length 220868 bytes (215 KB)downloaded 215
> KB
> trying URL '
https://cran.rstudio.com/src/contrib/openair_2.18-2.tar.gz'Content
> type 'application/x-gzip' length 1796725 bytes (1.7 MB)downloaded 1.7
Hello,

If you are on Windows, do you have rtools [1] installed?




On Thu, Mar 14, 2024 at 6:47?PM Rui Barradas <ruipbarradas at sapo.pt> wrote:

> ?s 04:12 de 13/03/2024, javad bayat escreveu:
> > Dear Rui;
> > I hope this email finds you well. I have a problem installing packages in
> > Rstudio and R software. When I try to install a package, the software
> tries
> > to download but after downloading, it gives some errors and does not
> work.
> > I would be more than happy if you please help me to solve this issue.
> > Warm regards.
> >
> >
> >> install.packages("openair", type = "source")Installing package into
> ?C:/R_Libs?
> > (as ?lib? is unspecified)Warning in install.packages :
> >    dependencies ?lattice?, ?MASS? are not availablealso installing the
> > dependencies ?deldir?, ?RcppEigen?, ?cli?, ?glue?, ?lifecycle?,
> > ?pillar?, ?rlang?, ?tibble?, ?tidyselect?, ?vctrs?, ?png?, ?jpeg?,
> > ?interp?, ?timechange?, ?maps?, ?nlme?, ?Matrix?, ?cluster?, ?dplyr?,
> > ?hexbin?, ?latticeExtra?, ?lubridate?, ?mapproj?, ?mgcv?, ?purrr?
> > trying URL '
> https://cran.rstudio.com/src/contrib/deldir_2.0-4.tar.gz'Content
> > type 'application/x-gzip' length 103621 bytes (101 KB)downloaded 101
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/RcppEigen_0.3.4.0.0.tar.gz'Content
> > type 'application/x-gzip' length 1765714 bytes (1.7 MB)downloaded 1.7
> > MB
> > trying URL '
> https://cran.rstudio.com/src/contrib/cli_3.6.2.tar.gz'Content
> > type 'application/x-gzip' length 569771 bytes (556 KB)downloaded 556
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/glue_1.7.0.tar.gz'Content
> > type 'application/x-gzip' length 105420 bytes (102 KB)downloaded 102
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/lifecycle_1.0.4.tar.gz'Content
> > type 'application/x-gzip' length 107656 bytes (105 KB)downloaded 105
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/pillar_1.9.0.tar.gz'Content
> > type 'application/x-gzip' length 444528 bytes (434 KB)downloaded 434
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/rlang_1.1.3.tar.gz'Content
> > type 'application/x-gzip' length 763765 bytes (745 KB)downloaded 745
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/tibble_3.2.1.tar.gz'Content
> > type 'application/x-gzip' length 565982 bytes (552 KB)downloaded 552
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/tidyselect_1.2.1.tar.gz'Content
> > type 'application/x-gzip' length 103591 bytes (101 KB)downloaded 101
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/vctrs_0.6.5.tar.gz'Content
> > type 'application/x-gzip' length 969066 bytes (946 KB)downloaded 946
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/png_0.1-8.tar.gz'Content
> > type 'application/x-gzip' length 24880 bytes (24 KB)downloaded 24 KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/jpeg_0.1-10.tar.gz'Content
> > type 'application/x-gzip' length 18667 bytes (18 KB)downloaded 18 KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/interp_1.1-6.tar.gz'Content
> > type 'application/x-gzip' length 1112116 bytes (1.1 MB)downloaded 1.1
> > MB
> > trying URL '
> https://cran.rstudio.com/src/contrib/timechange_0.3.0.tar.gz'Content
> > type 'application/x-gzip' length 103439 bytes (101 KB)downloaded 101
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/maps_3.4.2.tar.gz'Content
> > type 'application/x-gzip' length 2278051 bytes (2.2 MB)downloaded 2.2
> > MB
> > trying URL '
> https://cran.rstudio.com/src/contrib/nlme_3.1-164.tar.gz'Content
> > type 'application/x-gzip' length 836832 bytes (817 KB)downloaded 817
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/Matrix_1.6-5.tar.gz'Content
> > type 'application/x-gzip' length 2883851 bytes (2.8 MB)downloaded 2.8
> > MB
> > trying URL '
> https://cran.rstudio.com/src/contrib/cluster_2.1.6.tar.gz'Content
> > type 'application/x-gzip' length 369050 bytes (360 KB)downloaded 360
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/dplyr_1.1.4.tar.gz'Content
> > type 'application/x-gzip' length 1207521 bytes (1.2 MB)downloaded 1.2
> > MB
> > trying URL '
> https://cran.rstudio.com/src/contrib/hexbin_1.28.3.tar.gz'Content
> > type 'application/x-gzip' length 1199967 bytes (1.1 MB)downloaded 1.1
> > MB
> > trying URL '
> https://cran.rstudio.com/src/contrib/latticeExtra_0.6-30.tar.gz'Content
> > type 'application/x-gzip' length 1292936 bytes (1.2 MB)downloaded 1.2
> > MB
> > trying URL '
> https://cran.rstudio.com/src/contrib/lubridate_1.9.3.tar.gz'Content
> > type 'application/x-gzip' length 428043 bytes (418 KB)downloaded 418
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/mapproj_1.2.11.tar.gz'Content
> > type 'application/x-gzip' length 25544 bytes (24 KB)downloaded 24 KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/mgcv_1.9-1.tar.gz'Content
> > type 'application/x-gzip' length 1083217 bytes (1.0 MB)downloaded 1.0
> > MB
> > trying URL '
> https://cran.rstudio.com/src/contrib/purrr_1.0.2.tar.gz'Content
> > type 'application/x-gzip' length 220868 bytes (215 KB)downloaded 215
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/openair_2.18-2.tar.gz'Content
> > type 'application/x-gzip' length 1796725 bytes (1.7 MB)downloaded 1.7
> > MB
> > * installing *source* package 'deldir' ...
> > ** package 'deldir' successfully unpacked and MD5 sums checked
> > ** using staged installation
> > ** libs
> > Warning in system(cmd) : 'make' not found
> > ERROR: compilation failed for package 'deldir'
> > * removing 'C:/R_Libs/deldir'
> > Warning in install.packages :
> >    installation of package ?deldir? had non-zero exit status
> > * installing *source* package 'RcppEigen' ...
> > ** package 'RcppEigen' successfully unpacked and MD5 sums checked
> > ** using staged installation
> > ** libs
> > Warning in system(cmd) : 'make' not found
> > ERROR: compilation failed for package 'RcppEigen'
> > * removing 'C:/R_Libs/RcppEigen'
> > Warning in install.packages :
> >    installation of package ?RcppEigen? had non-zero exit status
> > * installing *source* package 'cli' ...
> > ** package 'cli' successfully unpacked and MD5 sums checked
> > ** using staged installation
> > ** libs
> > Warning in system(cmd) : 'make' not found
> > ERROR: compilation failed for package 'cli'
> > * removing 'C:/R_Libs/cli'
> > Warning in install.packages :
> >    installation of package ?cli? had non-zero exit status
> > * installing *source* package 'glue' ...
> > ** package 'glue' successfully unpacked and MD5 sums checked
> > ** using staged installation
> > ** libs
> > Warning in system(cmd) : 'make' not found
> > ERROR: compilation failed for package 'glue'
> > * removing 'C:/R_Libs/glue'
> > Warning in install.packages :
> >    installation of package ?glue? had non-zero exit status
> > * installing *source* package 'rlang' ...
> > ** package 'rlang' successfully unpacked and MD5 sums checked
> > ** using staged installation
> > ** libs
> > Warning in system(cmd) : 'make' not found
> > ERROR: compilation failed for package 'rlang'
> > * removing 'C:/R_Libs/rlang'
> > Warning in install.packages :
> >    installation of package ?rlang? had non-zero exit status
> > * installing *source* package 'png' ...
> > ** package 'png' successfully unpacked and MD5 sums checked
> > ** using staged installation
> > bash.exe: warning: could not find /tmp, please create!
> >    checking PNG headers and libraries
> > bash.exe: warning: could not find /tmp, please create!
> > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 179:
> > make: command not found
> > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 180:
> > make: command not found
> > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 181:
> > make: command not found
> > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 182:
> > make: command not found
> > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 183:
> > make: command not found
> > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 319:
> > make: command not found
> > ./configure.win: line 17: make: command not found
> > /lib/libpng.lib
> >    found libpng in LOCAL_SOFT: /lib
> >    seems ok, ready to go
> > ** libs
> > Warning in system(cmd) : 'make' not found
> > ERROR: compilation failed for package 'png'
> > * removing 'C:/R_Libs/png'
> > Warning in install.packages :
> >    installation of package ?png? had non-zero exit status
> > * installing *source* package 'jpeg' ...
> > ** package 'jpeg' successfully unpacked and MD5 sums checked
> > ** using staged installation
> > bash.exe: warning: could not find /tmp, please create!
> >    checking JPEG headers and libraries
> > bash.exe: warning: could not find /tmp, please create!
> > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 179:
> > make: command not found
> > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 180:
> > make: command not found
> > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 181:
> > make: command not found
> > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 182:
> > make: command not found
> > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 183:
> > make: command not found
> > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 319:
> > make: command not found
> > ./configure.win: line 17: make: command not found
> > /lib/libjpeg.lib
> >    found libjpeg in LOCAL_SOFT: /lib
> >    seems ok, ready to go
> > ** libs
> > Warning in system(cmd) : 'make' not found
> > ERROR: compilation failed for package 'jpeg'
> > * removing 'C:/R_Libs/jpeg'
> > Warning in install.packages :
> >    installation of package ?jpeg? had non-zero exit status
> > * installing *source* package 'timechange' ...
> > ** package 'timechange' successfully unpacked and MD5 sums checked
> > ** using staged installation
> > ** libs
> > Warning in system(cmd) : 'make' not found
> > ERROR: compilation failed for package 'timechange'
> > * removing 'C:/R_Libs/timechange'
> > Warning in install.packages :
> >    installation of package ?timechange? had non-zero exit status
> > * installing *source* package 'maps' ...
> > ** package 'maps' successfully unpacked and MD5 sums checked
> > ** using staged installation
> >
> >     **********************************************
> >     WARNING: this package has a configure script
> >           It probably needs manual configuration
> >     **********************************************
> >
> >
> > ** libs
> >    running 'src/Makefile.win' ...
> > Warning in system(paste("make --no-print-directory", paste("-f",
> > shQuote(makefiles),  :
> >    'make' not found
> > ERROR: compilation failed for package 'maps'
> > * removing 'C:/R_Libs/maps'
> > Warning in install.packages :
> >    installation of package ?maps? had non-zero exit status
> > ERROR: dependency 'lattice' is not available for package 'nlme'
> > * removing 'C:/R_Libs/nlme'
> > Warning in install.packages :
> >    installation of package ?nlme? had non-zero exit status
> > ERROR: dependency 'lattice' is not available for package 'Matrix'
> > * removing 'C:/R_Libs/Matrix'
> > Warning in install.packages :
> >    installation of package ?Matrix? had non-zero exit status
> > * installing *source* package 'cluster' ...
> > ** package 'cluster' successfully unpacked and MD5 sums checked
> > ** using staged installation
> > ** libs
> > Warning in system(cmd) : 'make' not found
> > ERROR: compilation failed for package 'cluster'
> > * removing 'C:/R_Libs/cluster'
> > Warning in install.packages :
> >    installation of package ?cluster? had non-zero exit status
> > ERROR: dependency 'lattice' is not available for package 'hexbin'
> > * removing 'C:/R_Libs/hexbin'
> > Warning in install.packages :
> >    installation of package ?hexbin? had non-zero exit status
> > * installing *source* package 'lifecycle' ...
> > ** package 'lifecycle' successfully unpacked and MD5 sums checked
> > ** using staged installation
> > ** R
> > ** inst
> > ** byte-compile and prepare package for lazy loading
> > Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
> vI[[i]]) :
> >    namespace 'rlang' 0.3.4 is being loaded, but >= 1.1.0 is required
> > Calls: <Anonymous> ... withCallingHandlers -> loadNamespace ->
> > namespaceImport -> loadNamespace
> > Execution halted
> > ERROR: lazy loading failed for package 'lifecycle'
> > * removing 'C:/R_Libs/lifecycle'
> > Warning in install.packages :
> >    installation of package ?lifecycle? had non-zero exit status
> > ERROR: dependencies 'deldir', 'RcppEigen' are not available for package
> 'interp'
> > * removing 'C:/R_Libs/interp'
> > Warning in install.packages :
> >    installation of package ?interp? had non-zero exit status
> > ERROR: dependency 'timechange' is not available for package 'lubridate'
> > * removing 'C:/R_Libs/lubridate'
> > Warning in install.packages :
> >    installation of package ?lubridate? had non-zero exit status
> > ERROR: dependency 'maps' is not available for package 'mapproj'
> > * removing 'C:/R_Libs/mapproj'
> > Warning in install.packages :
> >    installation of package ?mapproj? had non-zero exit status
> > ERROR: dependencies 'nlme', 'Matrix' are not available for package 'mgcv'
> > * removing 'C:/R_Libs/mgcv'
> > Warning in install.packages :
> >    installation of package ?mgcv? had non-zero exit status
> > ERROR: dependency 'lifecycle' is not available for package 'vctrs'
> > * removing 'C:/R_Libs/vctrs'
> > Warning in install.packages :
> >    installation of package ?vctrs? had non-zero exit status
> > ERROR: dependencies 'lattice', 'png', 'jpeg', 'interp', 'MASS' are not
> > available for package 'latticeExtra'
> > * removing 'C:/R_Libs/latticeExtra'
> > Warning in install.packages :
> >    installation of package ?latticeExtra? had non-zero exit status
> > ERROR: dependencies 'lifecycle', 'vctrs' are not available for package
> 'pillar'
> > * removing 'C:/R_Libs/pillar'
> > Warning in install.packages :
> >    installation of package ?pillar? had non-zero exit status
> > ERROR: dependencies 'lifecycle', 'vctrs' are not available for package
> > 'tidyselect'
> > * removing 'C:/R_Libs/tidyselect'
> > Warning in install.packages :
> >    installation of package ?tidyselect? had non-zero exit status
> > ERROR: dependencies 'lifecycle', 'vctrs' are not available for package
> 'purrr'
> > * removing 'C:/R_Libs/purrr'
> > Warning in install.packages :
> >    installation of package ?purrr? had non-zero exit status
> > ERROR: dependencies 'lifecycle', 'pillar', 'vctrs' are not available
> > for package 'tibble'
> > * removing 'C:/R_Libs/tibble'
> > Warning in install.packages :
> >    installation of package ?tibble? had non-zero exit status
> > ERROR: dependencies 'lifecycle', 'pillar', 'vctrs' are not available
> > for package 'dplyr'
> > * removing 'C:/R_Libs/dplyr'
> > Warning in install.packages :
> >    installation of package ?dplyr? had non-zero exit status
> > ERROR: dependencies 'cluster', 'hexbin', 'lattice', 'latticeExtra',
> > 'lubridate', 'mapproj', 'MASS', 'mgcv' are not available for package
> > 'openair'
> > * removing 'C:/R_Libs/openair'
> > Warning in install.packages :
> >    installation of package ?openair? had non-zero exit status
> >
> >
> >
> Hello,
>
> If you are on Windows, do you have rtools [1] installed?
> Also, please address your question to R-Help [2], [3], not to me directly.
>
>
> [1] https://cran.r-project.org/bin/windows/Rtools/
> [2] r-help at r-project.org
> [3] https://stat.ethz.ch/mailman/listinfo/r-help
>
> Hope this helps,
>
> Rui Barradas
>
>
> --
> Este e-mail foi analisado pelo software antiv?rus AVG para verificar a
> presen?a de v?rus.
> www.avg.com
>


-- 
Best Regards
Javad Bayat
M.Sc. Environment Engineering
Alternative Mail: bayat194 at yahoo.com

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Sat Mar 16 07:37:19 2024
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 16 Mar 2024 07:37:19 +0100
Subject: [R] Problem when trying to install packages
In-Reply-To: <CANTxAm+VTm2KbfFJg5FFFPj8hDMiV0WaropUT5Y9D-5mjNNZqw@mail.gmail.com>
References: <CANTxAmL+E4pubS7KfVP+Rx0f6Cd_rZZAb1dpqxyr5E5FH3-R0Q@mail.gmail.com>
 <d757d942-cc7e-4a18-8876-da5085aa6e32@sapo.pt>
 <CANTxAm+VTm2KbfFJg5FFFPj8hDMiV0WaropUT5Y9D-5mjNNZqw@mail.gmail.com>
Message-ID: <CAGxFJbS2qt0K0pZmbJ3OmiZP48hLEr08d3xabqR31uvLuhqG-Q@mail.gmail.com>

? Google it!  "How to install packages using Rtools"

Bert

On Sat, Mar 16, 2024, 05:09 javad bayat <j.bayat194 at gmail.com> wrote:

>  Dear Rui;
> Many thanks for your reply. I have installed Rtools (rtools43-5958-5975) on
> my PC and I have R version 4.3.3 and 4.3.2 to install. Also I have
> installed Rstudio through Anaconda Navigator.
> But I do not know how to use Rtools for installing the R packages. I would
> be more than happy if you help me.
> Sincerely yours
>
>
>
> > Dear Rui;
> > I hope this email finds you well. I have a problem installing packages in
> > Rstudio and R software. When I try to install a package, the software
> tries
> > to download but after downloading, it gives some errors and does not
> work.
> > I would be more than happy if you please help me to solve this issue.
> > Warm regards.
> >
> >
> >> install.packages("openair", type = "source")Installing package into
> ?C:/R_Libs?
> > (as ?lib? is unspecified)Warning in install.packages :
> >    dependencies ?lattice?, ?MASS? are not availablealso installing the
> > dependencies ?deldir?, ?RcppEigen?, ?cli?, ?glue?, ?lifecycle?,
> > ?pillar?, ?rlang?, ?tibble?, ?tidyselect?, ?vctrs?, ?png?, ?jpeg?,
> > ?interp?, ?timechange?, ?maps?, ?nlme?, ?Matrix?, ?cluster?, ?dplyr?,
> > ?hexbin?, ?latticeExtra?, ?lubridate?, ?mapproj?, ?mgcv?, ?purrr?
> > trying URL '
> https://cran.rstudio.com/src/contrib/deldir_2.0-4.tar.gz'Content
> > type 'application/x-gzip' length 103621 bytes (101 KB)downloaded 101
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/RcppEigen_0.3.4.0.0.tar.gz'Content
> > type 'application/x-gzip' length 1765714 bytes (1.7 MB)downloaded 1.7
> > MB
> > trying URL '
> https://cran.rstudio.com/src/contrib/cli_3.6.2.tar.gz'Content
> > type 'application/x-gzip' length 569771 bytes (556 KB)downloaded 556
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/glue_1.7.0.tar.gz'Content
> > type 'application/x-gzip' length 105420 bytes (102 KB)downloaded 102
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/lifecycle_1.0.4.tar.gz'Content
> > type 'application/x-gzip' length 107656 bytes (105 KB)downloaded 105
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/pillar_1.9.0.tar.gz'Content
> > type 'application/x-gzip' length 444528 bytes (434 KB)downloaded 434
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/rlang_1.1.3.tar.gz'Content
> > type 'application/x-gzip' length 763765 bytes (745 KB)downloaded 745
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/tibble_3.2.1.tar.gz'Content
> > type 'application/x-gzip' length 565982 bytes (552 KB)downloaded 552
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/tidyselect_1.2.1.tar.gz'Content
> > type 'application/x-gzip' length 103591 bytes (101 KB)downloaded 101
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/vctrs_0.6.5.tar.gz'Content
> > type 'application/x-gzip' length 969066 bytes (946 KB)downloaded 946
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/png_0.1-8.tar.gz'Content
> > type 'application/x-gzip' length 24880 bytes (24 KB)downloaded 24 KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/jpeg_0.1-10.tar.gz'Content
> > type 'application/x-gzip' length 18667 bytes (18 KB)downloaded 18 KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/interp_1.1-6.tar.gz'Content
> > type 'application/x-gzip' length 1112116 bytes (1.1 MB)downloaded 1.1
> > MB
> > trying URL '
> https://cran.rstudio.com/src/contrib/timechange_0.3.0.tar.gz'Content
> > type 'application/x-gzip' length 103439 bytes (101 KB)downloaded 101
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/maps_3.4.2.tar.gz'Content
> > type 'application/x-gzip' length 2278051 bytes (2.2 MB)downloaded 2.2
> > MB
> > trying URL '
> https://cran.rstudio.com/src/contrib/nlme_3.1-164.tar.gz'Content
> > type 'application/x-gzip' length 836832 bytes (817 KB)downloaded 817
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/Matrix_1.6-5.tar.gz'Content
> > type 'application/x-gzip' length 2883851 bytes (2.8 MB)downloaded 2.8
> > MB
> > trying URL '
> https://cran.rstudio.com/src/contrib/cluster_2.1.6.tar.gz'Content
> > type 'application/x-gzip' length 369050 bytes (360 KB)downloaded 360
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/dplyr_1.1.4.tar.gz'Content
> > type 'application/x-gzip' length 1207521 bytes (1.2 MB)downloaded 1.2
> > MB
> > trying URL '
> https://cran.rstudio.com/src/contrib/hexbin_1.28.3.tar.gz'Content
> > type 'application/x-gzip' length 1199967 bytes (1.1 MB)downloaded 1.1
> > MB
> > trying URL '
> https://cran.rstudio.com/src/contrib/latticeExtra_0.6-30.tar.gz'Content
> > type 'application/x-gzip' length 1292936 bytes (1.2 MB)downloaded 1.2
> > MB
> > trying URL '
> https://cran.rstudio.com/src/contrib/lubridate_1.9.3.tar.gz'Content
> > type 'application/x-gzip' length 428043 bytes (418 KB)downloaded 418
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/mapproj_1.2.11.tar.gz'Content
> > type 'application/x-gzip' length 25544 bytes (24 KB)downloaded 24 KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/mgcv_1.9-1.tar.gz'Content
> > type 'application/x-gzip' length 1083217 bytes (1.0 MB)downloaded 1.0
> > MB
> > trying URL '
> https://cran.rstudio.com/src/contrib/purrr_1.0.2.tar.gz'Content
> > type 'application/x-gzip' length 220868 bytes (215 KB)downloaded 215
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/openair_2.18-2.tar.gz'Content
> > type 'application/x-gzip' length 1796725 bytes (1.7 MB)downloaded 1.7
> Hello,
>
> If you are on Windows, do you have rtools [1] installed?
>
>
>
>
> On Thu, Mar 14, 2024 at 6:47?PM Rui Barradas <ruipbarradas at sapo.pt> wrote:
>
> > ?s 04:12 de 13/03/2024, javad bayat escreveu:
> > > Dear Rui;
> > > I hope this email finds you well. I have a problem installing packages
> in
> > > Rstudio and R software. When I try to install a package, the software
> > tries
> > > to download but after downloading, it gives some errors and does not
> > work.
> > > I would be more than happy if you please help me to solve this issue.
> > > Warm regards.
> > >
> > >
> > >> install.packages("openair", type = "source")Installing package into
> > ?C:/R_Libs?
> > > (as ?lib? is unspecified)Warning in install.packages :
> > >    dependencies ?lattice?, ?MASS? are not availablealso installing the
> > > dependencies ?deldir?, ?RcppEigen?, ?cli?, ?glue?, ?lifecycle?,
> > > ?pillar?, ?rlang?, ?tibble?, ?tidyselect?, ?vctrs?, ?png?, ?jpeg?,
> > > ?interp?, ?timechange?, ?maps?, ?nlme?, ?Matrix?, ?cluster?, ?dplyr?,
> > > ?hexbin?, ?latticeExtra?, ?lubridate?, ?mapproj?, ?mgcv?, ?purrr?
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/deldir_2.0-4.tar.gz'Content
> > > type 'application/x-gzip' length 103621 bytes (101 KB)downloaded 101
> > > KB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/RcppEigen_0.3.4.0.0.tar.gz'Content
> > > type 'application/x-gzip' length 1765714 bytes (1.7 MB)downloaded 1.7
> > > MB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/cli_3.6.2.tar.gz'Content
> > > type 'application/x-gzip' length 569771 bytes (556 KB)downloaded 556
> > > KB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/glue_1.7.0.tar.gz'Content
> > > type 'application/x-gzip' length 105420 bytes (102 KB)downloaded 102
> > > KB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/lifecycle_1.0.4.tar.gz'Content
> > > type 'application/x-gzip' length 107656 bytes (105 KB)downloaded 105
> > > KB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/pillar_1.9.0.tar.gz'Content
> > > type 'application/x-gzip' length 444528 bytes (434 KB)downloaded 434
> > > KB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/rlang_1.1.3.tar.gz'Content
> > > type 'application/x-gzip' length 763765 bytes (745 KB)downloaded 745
> > > KB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/tibble_3.2.1.tar.gz'Content
> > > type 'application/x-gzip' length 565982 bytes (552 KB)downloaded 552
> > > KB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/tidyselect_1.2.1.tar.gz'Content
> > > type 'application/x-gzip' length 103591 bytes (101 KB)downloaded 101
> > > KB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/vctrs_0.6.5.tar.gz'Content
> > > type 'application/x-gzip' length 969066 bytes (946 KB)downloaded 946
> > > KB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/png_0.1-8.tar.gz'Content
> > > type 'application/x-gzip' length 24880 bytes (24 KB)downloaded 24 KB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/jpeg_0.1-10.tar.gz'Content
> > > type 'application/x-gzip' length 18667 bytes (18 KB)downloaded 18 KB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/interp_1.1-6.tar.gz'Content
> > > type 'application/x-gzip' length 1112116 bytes (1.1 MB)downloaded 1.1
> > > MB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/timechange_0.3.0.tar.gz'Content
> > > type 'application/x-gzip' length 103439 bytes (101 KB)downloaded 101
> > > KB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/maps_3.4.2.tar.gz'Content
> > > type 'application/x-gzip' length 2278051 bytes (2.2 MB)downloaded 2.2
> > > MB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/nlme_3.1-164.tar.gz'Content
> > > type 'application/x-gzip' length 836832 bytes (817 KB)downloaded 817
> > > KB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/Matrix_1.6-5.tar.gz'Content
> > > type 'application/x-gzip' length 2883851 bytes (2.8 MB)downloaded 2.8
> > > MB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/cluster_2.1.6.tar.gz'Content
> > > type 'application/x-gzip' length 369050 bytes (360 KB)downloaded 360
> > > KB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/dplyr_1.1.4.tar.gz'Content
> > > type 'application/x-gzip' length 1207521 bytes (1.2 MB)downloaded 1.2
> > > MB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/hexbin_1.28.3.tar.gz'Content
> > > type 'application/x-gzip' length 1199967 bytes (1.1 MB)downloaded 1.1
> > > MB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/latticeExtra_0.6-30.tar.gz'Content
> > > type 'application/x-gzip' length 1292936 bytes (1.2 MB)downloaded 1.2
> > > MB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/lubridate_1.9.3.tar.gz'Content
> > > type 'application/x-gzip' length 428043 bytes (418 KB)downloaded 418
> > > KB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/mapproj_1.2.11.tar.gz'Content
> > > type 'application/x-gzip' length 25544 bytes (24 KB)downloaded 24 KB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/mgcv_1.9-1.tar.gz'Content
> > > type 'application/x-gzip' length 1083217 bytes (1.0 MB)downloaded 1.0
> > > MB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/purrr_1.0.2.tar.gz'Content
> > > type 'application/x-gzip' length 220868 bytes (215 KB)downloaded 215
> > > KB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/openair_2.18-2.tar.gz'Content
> > > type 'application/x-gzip' length 1796725 bytes (1.7 MB)downloaded 1.7
> > > MB
> > > * installing *source* package 'deldir' ...
> > > ** package 'deldir' successfully unpacked and MD5 sums checked
> > > ** using staged installation
> > > ** libs
> > > Warning in system(cmd) : 'make' not found
> > > ERROR: compilation failed for package 'deldir'
> > > * removing 'C:/R_Libs/deldir'
> > > Warning in install.packages :
> > >    installation of package ?deldir? had non-zero exit status
> > > * installing *source* package 'RcppEigen' ...
> > > ** package 'RcppEigen' successfully unpacked and MD5 sums checked
> > > ** using staged installation
> > > ** libs
> > > Warning in system(cmd) : 'make' not found
> > > ERROR: compilation failed for package 'RcppEigen'
> > > * removing 'C:/R_Libs/RcppEigen'
> > > Warning in install.packages :
> > >    installation of package ?RcppEigen? had non-zero exit status
> > > * installing *source* package 'cli' ...
> > > ** package 'cli' successfully unpacked and MD5 sums checked
> > > ** using staged installation
> > > ** libs
> > > Warning in system(cmd) : 'make' not found
> > > ERROR: compilation failed for package 'cli'
> > > * removing 'C:/R_Libs/cli'
> > > Warning in install.packages :
> > >    installation of package ?cli? had non-zero exit status
> > > * installing *source* package 'glue' ...
> > > ** package 'glue' successfully unpacked and MD5 sums checked
> > > ** using staged installation
> > > ** libs
> > > Warning in system(cmd) : 'make' not found
> > > ERROR: compilation failed for package 'glue'
> > > * removing 'C:/R_Libs/glue'
> > > Warning in install.packages :
> > >    installation of package ?glue? had non-zero exit status
> > > * installing *source* package 'rlang' ...
> > > ** package 'rlang' successfully unpacked and MD5 sums checked
> > > ** using staged installation
> > > ** libs
> > > Warning in system(cmd) : 'make' not found
> > > ERROR: compilation failed for package 'rlang'
> > > * removing 'C:/R_Libs/rlang'
> > > Warning in install.packages :
> > >    installation of package ?rlang? had non-zero exit status
> > > * installing *source* package 'png' ...
> > > ** package 'png' successfully unpacked and MD5 sums checked
> > > ** using staged installation
> > > bash.exe: warning: could not find /tmp, please create!
> > >    checking PNG headers and libraries
> > > bash.exe: warning: could not find /tmp, please create!
> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 179:
> > > make: command not found
> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 180:
> > > make: command not found
> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 181:
> > > make: command not found
> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 182:
> > > make: command not found
> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 183:
> > > make: command not found
> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 319:
> > > make: command not found
> > > ./configure.win: line 17: make: command not found
> > > /lib/libpng.lib
> > >    found libpng in LOCAL_SOFT: /lib
> > >    seems ok, ready to go
> > > ** libs
> > > Warning in system(cmd) : 'make' not found
> > > ERROR: compilation failed for package 'png'
> > > * removing 'C:/R_Libs/png'
> > > Warning in install.packages :
> > >    installation of package ?png? had non-zero exit status
> > > * installing *source* package 'jpeg' ...
> > > ** package 'jpeg' successfully unpacked and MD5 sums checked
> > > ** using staged installation
> > > bash.exe: warning: could not find /tmp, please create!
> > >    checking JPEG headers and libraries
> > > bash.exe: warning: could not find /tmp, please create!
> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 179:
> > > make: command not found
> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 180:
> > > make: command not found
> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 181:
> > > make: command not found
> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 182:
> > > make: command not found
> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 183:
> > > make: command not found
> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 319:
> > > make: command not found
> > > ./configure.win: line 17: make: command not found
> > > /lib/libjpeg.lib
> > >    found libjpeg in LOCAL_SOFT: /lib
> > >    seems ok, ready to go
> > > ** libs
> > > Warning in system(cmd) : 'make' not found
> > > ERROR: compilation failed for package 'jpeg'
> > > * removing 'C:/R_Libs/jpeg'
> > > Warning in install.packages :
> > >    installation of package ?jpeg? had non-zero exit status
> > > * installing *source* package 'timechange' ...
> > > ** package 'timechange' successfully unpacked and MD5 sums checked
> > > ** using staged installation
> > > ** libs
> > > Warning in system(cmd) : 'make' not found
> > > ERROR: compilation failed for package 'timechange'
> > > * removing 'C:/R_Libs/timechange'
> > > Warning in install.packages :
> > >    installation of package ?timechange? had non-zero exit status
> > > * installing *source* package 'maps' ...
> > > ** package 'maps' successfully unpacked and MD5 sums checked
> > > ** using staged installation
> > >
> > >     **********************************************
> > >     WARNING: this package has a configure script
> > >           It probably needs manual configuration
> > >     **********************************************
> > >
> > >
> > > ** libs
> > >    running 'src/Makefile.win' ...
> > > Warning in system(paste("make --no-print-directory", paste("-f",
> > > shQuote(makefiles),  :
> > >    'make' not found
> > > ERROR: compilation failed for package 'maps'
> > > * removing 'C:/R_Libs/maps'
> > > Warning in install.packages :
> > >    installation of package ?maps? had non-zero exit status
> > > ERROR: dependency 'lattice' is not available for package 'nlme'
> > > * removing 'C:/R_Libs/nlme'
> > > Warning in install.packages :
> > >    installation of package ?nlme? had non-zero exit status
> > > ERROR: dependency 'lattice' is not available for package 'Matrix'
> > > * removing 'C:/R_Libs/Matrix'
> > > Warning in install.packages :
> > >    installation of package ?Matrix? had non-zero exit status
> > > * installing *source* package 'cluster' ...
> > > ** package 'cluster' successfully unpacked and MD5 sums checked
> > > ** using staged installation
> > > ** libs
> > > Warning in system(cmd) : 'make' not found
> > > ERROR: compilation failed for package 'cluster'
> > > * removing 'C:/R_Libs/cluster'
> > > Warning in install.packages :
> > >    installation of package ?cluster? had non-zero exit status
> > > ERROR: dependency 'lattice' is not available for package 'hexbin'
> > > * removing 'C:/R_Libs/hexbin'
> > > Warning in install.packages :
> > >    installation of package ?hexbin? had non-zero exit status
> > > * installing *source* package 'lifecycle' ...
> > > ** package 'lifecycle' successfully unpacked and MD5 sums checked
> > > ** using staged installation
> > > ** R
> > > ** inst
> > > ** byte-compile and prepare package for lazy loading
> > > Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
> > vI[[i]]) :
> > >    namespace 'rlang' 0.3.4 is being loaded, but >= 1.1.0 is required
> > > Calls: <Anonymous> ... withCallingHandlers -> loadNamespace ->
> > > namespaceImport -> loadNamespace
> > > Execution halted
> > > ERROR: lazy loading failed for package 'lifecycle'
> > > * removing 'C:/R_Libs/lifecycle'
> > > Warning in install.packages :
> > >    installation of package ?lifecycle? had non-zero exit status
> > > ERROR: dependencies 'deldir', 'RcppEigen' are not available for package
> > 'interp'
> > > * removing 'C:/R_Libs/interp'
> > > Warning in install.packages :
> > >    installation of package ?interp? had non-zero exit status
> > > ERROR: dependency 'timechange' is not available for package 'lubridate'
> > > * removing 'C:/R_Libs/lubridate'
> > > Warning in install.packages :
> > >    installation of package ?lubridate? had non-zero exit status
> > > ERROR: dependency 'maps' is not available for package 'mapproj'
> > > * removing 'C:/R_Libs/mapproj'
> > > Warning in install.packages :
> > >    installation of package ?mapproj? had non-zero exit status
> > > ERROR: dependencies 'nlme', 'Matrix' are not available for package
> 'mgcv'
> > > * removing 'C:/R_Libs/mgcv'
> > > Warning in install.packages :
> > >    installation of package ?mgcv? had non-zero exit status
> > > ERROR: dependency 'lifecycle' is not available for package 'vctrs'
> > > * removing 'C:/R_Libs/vctrs'
> > > Warning in install.packages :
> > >    installation of package ?vctrs? had non-zero exit status
> > > ERROR: dependencies 'lattice', 'png', 'jpeg', 'interp', 'MASS' are not
> > > available for package 'latticeExtra'
> > > * removing 'C:/R_Libs/latticeExtra'
> > > Warning in install.packages :
> > >    installation of package ?latticeExtra? had non-zero exit status
> > > ERROR: dependencies 'lifecycle', 'vctrs' are not available for package
> > 'pillar'
> > > * removing 'C:/R_Libs/pillar'
> > > Warning in install.packages :
> > >    installation of package ?pillar? had non-zero exit status
> > > ERROR: dependencies 'lifecycle', 'vctrs' are not available for package
> > > 'tidyselect'
> > > * removing 'C:/R_Libs/tidyselect'
> > > Warning in install.packages :
> > >    installation of package ?tidyselect? had non-zero exit status
> > > ERROR: dependencies 'lifecycle', 'vctrs' are not available for package
> > 'purrr'
> > > * removing 'C:/R_Libs/purrr'
> > > Warning in install.packages :
> > >    installation of package ?purrr? had non-zero exit status
> > > ERROR: dependencies 'lifecycle', 'pillar', 'vctrs' are not available
> > > for package 'tibble'
> > > * removing 'C:/R_Libs/tibble'
> > > Warning in install.packages :
> > >    installation of package ?tibble? had non-zero exit status
> > > ERROR: dependencies 'lifecycle', 'pillar', 'vctrs' are not available
> > > for package 'dplyr'
> > > * removing 'C:/R_Libs/dplyr'
> > > Warning in install.packages :
> > >    installation of package ?dplyr? had non-zero exit status
> > > ERROR: dependencies 'cluster', 'hexbin', 'lattice', 'latticeExtra',
> > > 'lubridate', 'mapproj', 'MASS', 'mgcv' are not available for package
> > > 'openair'
> > > * removing 'C:/R_Libs/openair'
> > > Warning in install.packages :
> > >    installation of package ?openair? had non-zero exit status
> > >
> > >
> > >
> > Hello,
> >
> > If you are on Windows, do you have rtools [1] installed?
> > Also, please address your question to R-Help [2], [3], not to me
> directly.
> >
> >
> > [1] https://cran.r-project.org/bin/windows/Rtools/
> > [2] r-help at r-project.org
> > [3] https://stat.ethz.ch/mailman/listinfo/r-help
> >
> > Hope this helps,
> >
> > Rui Barradas
> >
> >
> > --
> > Este e-mail foi analisado pelo software antiv?rus AVG para verificar a
> > presen?a de v?rus.
> > www.avg.com
> >
>
>
> --
> Best Regards
> Javad Bayat
> M.Sc. Environment Engineering
> Alternative Mail: bayat194 at yahoo.com
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Sat Mar 16 07:44:57 2024
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 16 Mar 2024 07:44:57 +0100
Subject: [R] Problem when trying to install packages
In-Reply-To: <CANTxAm+VTm2KbfFJg5FFFPj8hDMiV0WaropUT5Y9D-5mjNNZqw@mail.gmail.com>
References: <CANTxAmL+E4pubS7KfVP+Rx0f6Cd_rZZAb1dpqxyr5E5FH3-R0Q@mail.gmail.com>
 <d757d942-cc7e-4a18-8876-da5085aa6e32@sapo.pt>
 <CANTxAm+VTm2KbfFJg5FFFPj8hDMiV0WaropUT5Y9D-5mjNNZqw@mail.gmail.com>
Message-ID: <CAGxFJbSH0X7MYjfHMyn57fEPttkuqWRNAFmRcn0cogYZLNf28Q@mail.gmail.com>

Though Navigator may mess up any Rtools stuff because it handles the
directory trees where packages and dependencies are located, does it not?
If so, maybe just reinstall RStudio directly from its website to proceed.
Just a guess obviously.

Bert

On Sat, Mar 16, 2024, 05:09 javad bayat <j.bayat194 at gmail.com> wrote:

>  Dear Rui;
> Many thanks for your reply. I have installed Rtools (rtools43-5958-5975) on
> my PC and I have R version 4.3.3 and 4.3.2 to install. Also I have
> installed Rstudio through Anaconda Navigator.
> But I do not know how to use Rtools for installing the R packages. I would
> be more than happy if you help me.
> Sincerely yours
>
>
>
> > Dear Rui;
> > I hope this email finds you well. I have a problem installing packages in
> > Rstudio and R software. When I try to install a package, the software
> tries
> > to download but after downloading, it gives some errors and does not
> work.
> > I would be more than happy if you please help me to solve this issue.
> > Warm regards.
> >
> >
> >> install.packages("openair", type = "source")Installing package into
> ?C:/R_Libs?
> > (as ?lib? is unspecified)Warning in install.packages :
> >    dependencies ?lattice?, ?MASS? are not availablealso installing the
> > dependencies ?deldir?, ?RcppEigen?, ?cli?, ?glue?, ?lifecycle?,
> > ?pillar?, ?rlang?, ?tibble?, ?tidyselect?, ?vctrs?, ?png?, ?jpeg?,
> > ?interp?, ?timechange?, ?maps?, ?nlme?, ?Matrix?, ?cluster?, ?dplyr?,
> > ?hexbin?, ?latticeExtra?, ?lubridate?, ?mapproj?, ?mgcv?, ?purrr?
> > trying URL '
> https://cran.rstudio.com/src/contrib/deldir_2.0-4.tar.gz'Content
> > type 'application/x-gzip' length 103621 bytes (101 KB)downloaded 101
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/RcppEigen_0.3.4.0.0.tar.gz'Content
> > type 'application/x-gzip' length 1765714 bytes (1.7 MB)downloaded 1.7
> > MB
> > trying URL '
> https://cran.rstudio.com/src/contrib/cli_3.6.2.tar.gz'Content
> > type 'application/x-gzip' length 569771 bytes (556 KB)downloaded 556
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/glue_1.7.0.tar.gz'Content
> > type 'application/x-gzip' length 105420 bytes (102 KB)downloaded 102
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/lifecycle_1.0.4.tar.gz'Content
> > type 'application/x-gzip' length 107656 bytes (105 KB)downloaded 105
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/pillar_1.9.0.tar.gz'Content
> > type 'application/x-gzip' length 444528 bytes (434 KB)downloaded 434
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/rlang_1.1.3.tar.gz'Content
> > type 'application/x-gzip' length 763765 bytes (745 KB)downloaded 745
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/tibble_3.2.1.tar.gz'Content
> > type 'application/x-gzip' length 565982 bytes (552 KB)downloaded 552
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/tidyselect_1.2.1.tar.gz'Content
> > type 'application/x-gzip' length 103591 bytes (101 KB)downloaded 101
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/vctrs_0.6.5.tar.gz'Content
> > type 'application/x-gzip' length 969066 bytes (946 KB)downloaded 946
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/png_0.1-8.tar.gz'Content
> > type 'application/x-gzip' length 24880 bytes (24 KB)downloaded 24 KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/jpeg_0.1-10.tar.gz'Content
> > type 'application/x-gzip' length 18667 bytes (18 KB)downloaded 18 KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/interp_1.1-6.tar.gz'Content
> > type 'application/x-gzip' length 1112116 bytes (1.1 MB)downloaded 1.1
> > MB
> > trying URL '
> https://cran.rstudio.com/src/contrib/timechange_0.3.0.tar.gz'Content
> > type 'application/x-gzip' length 103439 bytes (101 KB)downloaded 101
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/maps_3.4.2.tar.gz'Content
> > type 'application/x-gzip' length 2278051 bytes (2.2 MB)downloaded 2.2
> > MB
> > trying URL '
> https://cran.rstudio.com/src/contrib/nlme_3.1-164.tar.gz'Content
> > type 'application/x-gzip' length 836832 bytes (817 KB)downloaded 817
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/Matrix_1.6-5.tar.gz'Content
> > type 'application/x-gzip' length 2883851 bytes (2.8 MB)downloaded 2.8
> > MB
> > trying URL '
> https://cran.rstudio.com/src/contrib/cluster_2.1.6.tar.gz'Content
> > type 'application/x-gzip' length 369050 bytes (360 KB)downloaded 360
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/dplyr_1.1.4.tar.gz'Content
> > type 'application/x-gzip' length 1207521 bytes (1.2 MB)downloaded 1.2
> > MB
> > trying URL '
> https://cran.rstudio.com/src/contrib/hexbin_1.28.3.tar.gz'Content
> > type 'application/x-gzip' length 1199967 bytes (1.1 MB)downloaded 1.1
> > MB
> > trying URL '
> https://cran.rstudio.com/src/contrib/latticeExtra_0.6-30.tar.gz'Content
> > type 'application/x-gzip' length 1292936 bytes (1.2 MB)downloaded 1.2
> > MB
> > trying URL '
> https://cran.rstudio.com/src/contrib/lubridate_1.9.3.tar.gz'Content
> > type 'application/x-gzip' length 428043 bytes (418 KB)downloaded 418
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/mapproj_1.2.11.tar.gz'Content
> > type 'application/x-gzip' length 25544 bytes (24 KB)downloaded 24 KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/mgcv_1.9-1.tar.gz'Content
> > type 'application/x-gzip' length 1083217 bytes (1.0 MB)downloaded 1.0
> > MB
> > trying URL '
> https://cran.rstudio.com/src/contrib/purrr_1.0.2.tar.gz'Content
> > type 'application/x-gzip' length 220868 bytes (215 KB)downloaded 215
> > KB
> > trying URL '
> https://cran.rstudio.com/src/contrib/openair_2.18-2.tar.gz'Content
> > type 'application/x-gzip' length 1796725 bytes (1.7 MB)downloaded 1.7
> Hello,
>
> If you are on Windows, do you have rtools [1] installed?
>
>
>
>
> On Thu, Mar 14, 2024 at 6:47?PM Rui Barradas <ruipbarradas at sapo.pt> wrote:
>
> > ?s 04:12 de 13/03/2024, javad bayat escreveu:
> > > Dear Rui;
> > > I hope this email finds you well. I have a problem installing packages
> in
> > > Rstudio and R software. When I try to install a package, the software
> > tries
> > > to download but after downloading, it gives some errors and does not
> > work.
> > > I would be more than happy if you please help me to solve this issue.
> > > Warm regards.
> > >
> > >
> > >> install.packages("openair", type = "source")Installing package into
> > ?C:/R_Libs?
> > > (as ?lib? is unspecified)Warning in install.packages :
> > >    dependencies ?lattice?, ?MASS? are not availablealso installing the
> > > dependencies ?deldir?, ?RcppEigen?, ?cli?, ?glue?, ?lifecycle?,
> > > ?pillar?, ?rlang?, ?tibble?, ?tidyselect?, ?vctrs?, ?png?, ?jpeg?,
> > > ?interp?, ?timechange?, ?maps?, ?nlme?, ?Matrix?, ?cluster?, ?dplyr?,
> > > ?hexbin?, ?latticeExtra?, ?lubridate?, ?mapproj?, ?mgcv?, ?purrr?
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/deldir_2.0-4.tar.gz'Content
> > > type 'application/x-gzip' length 103621 bytes (101 KB)downloaded 101
> > > KB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/RcppEigen_0.3.4.0.0.tar.gz'Content
> > > type 'application/x-gzip' length 1765714 bytes (1.7 MB)downloaded 1.7
> > > MB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/cli_3.6.2.tar.gz'Content
> > > type 'application/x-gzip' length 569771 bytes (556 KB)downloaded 556
> > > KB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/glue_1.7.0.tar.gz'Content
> > > type 'application/x-gzip' length 105420 bytes (102 KB)downloaded 102
> > > KB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/lifecycle_1.0.4.tar.gz'Content
> > > type 'application/x-gzip' length 107656 bytes (105 KB)downloaded 105
> > > KB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/pillar_1.9.0.tar.gz'Content
> > > type 'application/x-gzip' length 444528 bytes (434 KB)downloaded 434
> > > KB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/rlang_1.1.3.tar.gz'Content
> > > type 'application/x-gzip' length 763765 bytes (745 KB)downloaded 745
> > > KB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/tibble_3.2.1.tar.gz'Content
> > > type 'application/x-gzip' length 565982 bytes (552 KB)downloaded 552
> > > KB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/tidyselect_1.2.1.tar.gz'Content
> > > type 'application/x-gzip' length 103591 bytes (101 KB)downloaded 101
> > > KB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/vctrs_0.6.5.tar.gz'Content
> > > type 'application/x-gzip' length 969066 bytes (946 KB)downloaded 946
> > > KB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/png_0.1-8.tar.gz'Content
> > > type 'application/x-gzip' length 24880 bytes (24 KB)downloaded 24 KB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/jpeg_0.1-10.tar.gz'Content
> > > type 'application/x-gzip' length 18667 bytes (18 KB)downloaded 18 KB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/interp_1.1-6.tar.gz'Content
> > > type 'application/x-gzip' length 1112116 bytes (1.1 MB)downloaded 1.1
> > > MB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/timechange_0.3.0.tar.gz'Content
> > > type 'application/x-gzip' length 103439 bytes (101 KB)downloaded 101
> > > KB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/maps_3.4.2.tar.gz'Content
> > > type 'application/x-gzip' length 2278051 bytes (2.2 MB)downloaded 2.2
> > > MB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/nlme_3.1-164.tar.gz'Content
> > > type 'application/x-gzip' length 836832 bytes (817 KB)downloaded 817
> > > KB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/Matrix_1.6-5.tar.gz'Content
> > > type 'application/x-gzip' length 2883851 bytes (2.8 MB)downloaded 2.8
> > > MB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/cluster_2.1.6.tar.gz'Content
> > > type 'application/x-gzip' length 369050 bytes (360 KB)downloaded 360
> > > KB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/dplyr_1.1.4.tar.gz'Content
> > > type 'application/x-gzip' length 1207521 bytes (1.2 MB)downloaded 1.2
> > > MB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/hexbin_1.28.3.tar.gz'Content
> > > type 'application/x-gzip' length 1199967 bytes (1.1 MB)downloaded 1.1
> > > MB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/latticeExtra_0.6-30.tar.gz'Content
> > > type 'application/x-gzip' length 1292936 bytes (1.2 MB)downloaded 1.2
> > > MB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/lubridate_1.9.3.tar.gz'Content
> > > type 'application/x-gzip' length 428043 bytes (418 KB)downloaded 418
> > > KB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/mapproj_1.2.11.tar.gz'Content
> > > type 'application/x-gzip' length 25544 bytes (24 KB)downloaded 24 KB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/mgcv_1.9-1.tar.gz'Content
> > > type 'application/x-gzip' length 1083217 bytes (1.0 MB)downloaded 1.0
> > > MB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/purrr_1.0.2.tar.gz'Content
> > > type 'application/x-gzip' length 220868 bytes (215 KB)downloaded 215
> > > KB
> > > trying URL '
> > https://cran.rstudio.com/src/contrib/openair_2.18-2.tar.gz'Content
> > > type 'application/x-gzip' length 1796725 bytes (1.7 MB)downloaded 1.7
> > > MB
> > > * installing *source* package 'deldir' ...
> > > ** package 'deldir' successfully unpacked and MD5 sums checked
> > > ** using staged installation
> > > ** libs
> > > Warning in system(cmd) : 'make' not found
> > > ERROR: compilation failed for package 'deldir'
> > > * removing 'C:/R_Libs/deldir'
> > > Warning in install.packages :
> > >    installation of package ?deldir? had non-zero exit status
> > > * installing *source* package 'RcppEigen' ...
> > > ** package 'RcppEigen' successfully unpacked and MD5 sums checked
> > > ** using staged installation
> > > ** libs
> > > Warning in system(cmd) : 'make' not found
> > > ERROR: compilation failed for package 'RcppEigen'
> > > * removing 'C:/R_Libs/RcppEigen'
> > > Warning in install.packages :
> > >    installation of package ?RcppEigen? had non-zero exit status
> > > * installing *source* package 'cli' ...
> > > ** package 'cli' successfully unpacked and MD5 sums checked
> > > ** using staged installation
> > > ** libs
> > > Warning in system(cmd) : 'make' not found
> > > ERROR: compilation failed for package 'cli'
> > > * removing 'C:/R_Libs/cli'
> > > Warning in install.packages :
> > >    installation of package ?cli? had non-zero exit status
> > > * installing *source* package 'glue' ...
> > > ** package 'glue' successfully unpacked and MD5 sums checked
> > > ** using staged installation
> > > ** libs
> > > Warning in system(cmd) : 'make' not found
> > > ERROR: compilation failed for package 'glue'
> > > * removing 'C:/R_Libs/glue'
> > > Warning in install.packages :
> > >    installation of package ?glue? had non-zero exit status
> > > * installing *source* package 'rlang' ...
> > > ** package 'rlang' successfully unpacked and MD5 sums checked
> > > ** using staged installation
> > > ** libs
> > > Warning in system(cmd) : 'make' not found
> > > ERROR: compilation failed for package 'rlang'
> > > * removing 'C:/R_Libs/rlang'
> > > Warning in install.packages :
> > >    installation of package ?rlang? had non-zero exit status
> > > * installing *source* package 'png' ...
> > > ** package 'png' successfully unpacked and MD5 sums checked
> > > ** using staged installation
> > > bash.exe: warning: could not find /tmp, please create!
> > >    checking PNG headers and libraries
> > > bash.exe: warning: could not find /tmp, please create!
> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 179:
> > > make: command not found
> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 180:
> > > make: command not found
> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 181:
> > > make: command not found
> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 182:
> > > make: command not found
> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 183:
> > > make: command not found
> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 319:
> > > make: command not found
> > > ./configure.win: line 17: make: command not found
> > > /lib/libpng.lib
> > >    found libpng in LOCAL_SOFT: /lib
> > >    seems ok, ready to go
> > > ** libs
> > > Warning in system(cmd) : 'make' not found
> > > ERROR: compilation failed for package 'png'
> > > * removing 'C:/R_Libs/png'
> > > Warning in install.packages :
> > >    installation of package ?png? had non-zero exit status
> > > * installing *source* package 'jpeg' ...
> > > ** package 'jpeg' successfully unpacked and MD5 sums checked
> > > ** using staged installation
> > > bash.exe: warning: could not find /tmp, please create!
> > >    checking JPEG headers and libraries
> > > bash.exe: warning: could not find /tmp, please create!
> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 179:
> > > make: command not found
> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 180:
> > > make: command not found
> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 181:
> > > make: command not found
> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 182:
> > > make: command not found
> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 183:
> > > make: command not found
> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 319:
> > > make: command not found
> > > ./configure.win: line 17: make: command not found
> > > /lib/libjpeg.lib
> > >    found libjpeg in LOCAL_SOFT: /lib
> > >    seems ok, ready to go
> > > ** libs
> > > Warning in system(cmd) : 'make' not found
> > > ERROR: compilation failed for package 'jpeg'
> > > * removing 'C:/R_Libs/jpeg'
> > > Warning in install.packages :
> > >    installation of package ?jpeg? had non-zero exit status
> > > * installing *source* package 'timechange' ...
> > > ** package 'timechange' successfully unpacked and MD5 sums checked
> > > ** using staged installation
> > > ** libs
> > > Warning in system(cmd) : 'make' not found
> > > ERROR: compilation failed for package 'timechange'
> > > * removing 'C:/R_Libs/timechange'
> > > Warning in install.packages :
> > >    installation of package ?timechange? had non-zero exit status
> > > * installing *source* package 'maps' ...
> > > ** package 'maps' successfully unpacked and MD5 sums checked
> > > ** using staged installation
> > >
> > >     **********************************************
> > >     WARNING: this package has a configure script
> > >           It probably needs manual configuration
> > >     **********************************************
> > >
> > >
> > > ** libs
> > >    running 'src/Makefile.win' ...
> > > Warning in system(paste("make --no-print-directory", paste("-f",
> > > shQuote(makefiles),  :
> > >    'make' not found
> > > ERROR: compilation failed for package 'maps'
> > > * removing 'C:/R_Libs/maps'
> > > Warning in install.packages :
> > >    installation of package ?maps? had non-zero exit status
> > > ERROR: dependency 'lattice' is not available for package 'nlme'
> > > * removing 'C:/R_Libs/nlme'
> > > Warning in install.packages :
> > >    installation of package ?nlme? had non-zero exit status
> > > ERROR: dependency 'lattice' is not available for package 'Matrix'
> > > * removing 'C:/R_Libs/Matrix'
> > > Warning in install.packages :
> > >    installation of package ?Matrix? had non-zero exit status
> > > * installing *source* package 'cluster' ...
> > > ** package 'cluster' successfully unpacked and MD5 sums checked
> > > ** using staged installation
> > > ** libs
> > > Warning in system(cmd) : 'make' not found
> > > ERROR: compilation failed for package 'cluster'
> > > * removing 'C:/R_Libs/cluster'
> > > Warning in install.packages :
> > >    installation of package ?cluster? had non-zero exit status
> > > ERROR: dependency 'lattice' is not available for package 'hexbin'
> > > * removing 'C:/R_Libs/hexbin'
> > > Warning in install.packages :
> > >    installation of package ?hexbin? had non-zero exit status
> > > * installing *source* package 'lifecycle' ...
> > > ** package 'lifecycle' successfully unpacked and MD5 sums checked
> > > ** using staged installation
> > > ** R
> > > ** inst
> > > ** byte-compile and prepare package for lazy loading
> > > Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
> > vI[[i]]) :
> > >    namespace 'rlang' 0.3.4 is being loaded, but >= 1.1.0 is required
> > > Calls: <Anonymous> ... withCallingHandlers -> loadNamespace ->
> > > namespaceImport -> loadNamespace
> > > Execution halted
> > > ERROR: lazy loading failed for package 'lifecycle'
> > > * removing 'C:/R_Libs/lifecycle'
> > > Warning in install.packages :
> > >    installation of package ?lifecycle? had non-zero exit status
> > > ERROR: dependencies 'deldir', 'RcppEigen' are not available for package
> > 'interp'
> > > * removing 'C:/R_Libs/interp'
> > > Warning in install.packages :
> > >    installation of package ?interp? had non-zero exit status
> > > ERROR: dependency 'timechange' is not available for package 'lubridate'
> > > * removing 'C:/R_Libs/lubridate'
> > > Warning in install.packages :
> > >    installation of package ?lubridate? had non-zero exit status
> > > ERROR: dependency 'maps' is not available for package 'mapproj'
> > > * removing 'C:/R_Libs/mapproj'
> > > Warning in install.packages :
> > >    installation of package ?mapproj? had non-zero exit status
> > > ERROR: dependencies 'nlme', 'Matrix' are not available for package
> 'mgcv'
> > > * removing 'C:/R_Libs/mgcv'
> > > Warning in install.packages :
> > >    installation of package ?mgcv? had non-zero exit status
> > > ERROR: dependency 'lifecycle' is not available for package 'vctrs'
> > > * removing 'C:/R_Libs/vctrs'
> > > Warning in install.packages :
> > >    installation of package ?vctrs? had non-zero exit status
> > > ERROR: dependencies 'lattice', 'png', 'jpeg', 'interp', 'MASS' are not
> > > available for package 'latticeExtra'
> > > * removing 'C:/R_Libs/latticeExtra'
> > > Warning in install.packages :
> > >    installation of package ?latticeExtra? had non-zero exit status
> > > ERROR: dependencies 'lifecycle', 'vctrs' are not available for package
> > 'pillar'
> > > * removing 'C:/R_Libs/pillar'
> > > Warning in install.packages :
> > >    installation of package ?pillar? had non-zero exit status
> > > ERROR: dependencies 'lifecycle', 'vctrs' are not available for package
> > > 'tidyselect'
> > > * removing 'C:/R_Libs/tidyselect'
> > > Warning in install.packages :
> > >    installation of package ?tidyselect? had non-zero exit status
> > > ERROR: dependencies 'lifecycle', 'vctrs' are not available for package
> > 'purrr'
> > > * removing 'C:/R_Libs/purrr'
> > > Warning in install.packages :
> > >    installation of package ?purrr? had non-zero exit status
> > > ERROR: dependencies 'lifecycle', 'pillar', 'vctrs' are not available
> > > for package 'tibble'
> > > * removing 'C:/R_Libs/tibble'
> > > Warning in install.packages :
> > >    installation of package ?tibble? had non-zero exit status
> > > ERROR: dependencies 'lifecycle', 'pillar', 'vctrs' are not available
> > > for package 'dplyr'
> > > * removing 'C:/R_Libs/dplyr'
> > > Warning in install.packages :
> > >    installation of package ?dplyr? had non-zero exit status
> > > ERROR: dependencies 'cluster', 'hexbin', 'lattice', 'latticeExtra',
> > > 'lubridate', 'mapproj', 'MASS', 'mgcv' are not available for package
> > > 'openair'
> > > * removing 'C:/R_Libs/openair'
> > > Warning in install.packages :
> > >    installation of package ?openair? had non-zero exit status
> > >
> > >
> > >
> > Hello,
> >
> > If you are on Windows, do you have rtools [1] installed?
> > Also, please address your question to R-Help [2], [3], not to me
> directly.
> >
> >
> > [1] https://cran.r-project.org/bin/windows/Rtools/
> > [2] r-help at r-project.org
> > [3] https://stat.ethz.ch/mailman/listinfo/r-help
> >
> > Hope this helps,
> >
> > Rui Barradas
> >
> >
> > --
> > Este e-mail foi analisado pelo software antiv?rus AVG para verificar a
> > presen?a de v?rus.
> > www.avg.com
> >
>
>
> --
> Best Regards
> Javad Bayat
> M.Sc. Environment Engineering
> Alternative Mail: bayat194 at yahoo.com
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From j@b@y@t194 @end|ng |rom gm@||@com  Sat Mar 16 10:48:33 2024
From: j@b@y@t194 @end|ng |rom gm@||@com (javad bayat)
Date: Sat, 16 Mar 2024 13:18:33 +0330
Subject: [R] Problem when trying to install packages
In-Reply-To: <CAGxFJbSH0X7MYjfHMyn57fEPttkuqWRNAFmRcn0cogYZLNf28Q@mail.gmail.com>
References: <CANTxAmL+E4pubS7KfVP+Rx0f6Cd_rZZAb1dpqxyr5E5FH3-R0Q@mail.gmail.com>
 <d757d942-cc7e-4a18-8876-da5085aa6e32@sapo.pt>
 <CANTxAm+VTm2KbfFJg5FFFPj8hDMiV0WaropUT5Y9D-5mjNNZqw@mail.gmail.com>
 <CAGxFJbSH0X7MYjfHMyn57fEPttkuqWRNAFmRcn0cogYZLNf28Q@mail.gmail.com>
Message-ID: <CANTxAmLgdxq30VZEiiuXsa-CC4_AVM7NB2eyQiVbTrb2ES9Y7A@mail.gmail.com>

Dear all;
I found a useful video on youtube that has explained how to install Rtools.
I followed the instructions and the problem was solved.
" Installing R version 4.0 + RTools 4.0 + RStudio For Data Science (#R
#RTools #RStudio #DataScience) - YouTube
<https://www.youtube.com/watch?v=h2IPWVXaUuU> "
Sincerely

On Sat, Mar 16, 2024 at 10:15?AM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> Though Navigator may mess up any Rtools stuff because it handles the
> directory trees where packages and dependencies are located, does it not?
> If so, maybe just reinstall RStudio directly from its website to proceed.
> Just a guess obviously.
>
> Bert
>
> On Sat, Mar 16, 2024, 05:09 javad bayat <j.bayat194 at gmail.com> wrote:
>
>>  Dear Rui;
>> Many thanks for your reply. I have installed Rtools (rtools43-5958-5975)
>> on
>> my PC and I have R version 4.3.3 and 4.3.2 to install. Also I have
>> installed Rstudio through Anaconda Navigator.
>> But I do not know how to use Rtools for installing the R packages. I would
>> be more than happy if you help me.
>> Sincerely yours
>>
>>
>>
>> > Dear Rui;
>> > I hope this email finds you well. I have a problem installing packages
>> in
>> > Rstudio and R software. When I try to install a package, the software
>> tries
>> > to download but after downloading, it gives some errors and does not
>> work.
>> > I would be more than happy if you please help me to solve this issue.
>> > Warm regards.
>> >
>> >
>> >> install.packages("openair", type = "source")Installing package into
>> ?C:/R_Libs?
>> > (as ?lib? is unspecified)Warning in install.packages :
>> >    dependencies ?lattice?, ?MASS? are not availablealso installing the
>> > dependencies ?deldir?, ?RcppEigen?, ?cli?, ?glue?, ?lifecycle?,
>> > ?pillar?, ?rlang?, ?tibble?, ?tidyselect?, ?vctrs?, ?png?, ?jpeg?,
>> > ?interp?, ?timechange?, ?maps?, ?nlme?, ?Matrix?, ?cluster?, ?dplyr?,
>> > ?hexbin?, ?latticeExtra?, ?lubridate?, ?mapproj?, ?mgcv?, ?purrr?
>> > trying URL '
>> https://cran.rstudio.com/src/contrib/deldir_2.0-4.tar.gz'Content
>> > type 'application/x-gzip' length 103621 bytes (101 KB)downloaded 101
>> > KB
>> > trying URL '
>> https://cran.rstudio.com/src/contrib/RcppEigen_0.3.4.0.0.tar.gz'Content
>> > type 'application/x-gzip' length 1765714 bytes (1.7 MB)downloaded 1.7
>> > MB
>> > trying URL '
>> https://cran.rstudio.com/src/contrib/cli_3.6.2.tar.gz'Content
>> > type 'application/x-gzip' length 569771 bytes (556 KB)downloaded 556
>> > KB
>> > trying URL '
>> https://cran.rstudio.com/src/contrib/glue_1.7.0.tar.gz'Content
>> > type 'application/x-gzip' length 105420 bytes (102 KB)downloaded 102
>> > KB
>> > trying URL '
>> https://cran.rstudio.com/src/contrib/lifecycle_1.0.4.tar.gz'Content
>> > type 'application/x-gzip' length 107656 bytes (105 KB)downloaded 105
>> > KB
>> > trying URL '
>> https://cran.rstudio.com/src/contrib/pillar_1.9.0.tar.gz'Content
>> > type 'application/x-gzip' length 444528 bytes (434 KB)downloaded 434
>> > KB
>> > trying URL '
>> https://cran.rstudio.com/src/contrib/rlang_1.1.3.tar.gz'Content
>> > type 'application/x-gzip' length 763765 bytes (745 KB)downloaded 745
>> > KB
>> > trying URL '
>> https://cran.rstudio.com/src/contrib/tibble_3.2.1.tar.gz'Content
>> > type 'application/x-gzip' length 565982 bytes (552 KB)downloaded 552
>> > KB
>> > trying URL '
>> https://cran.rstudio.com/src/contrib/tidyselect_1.2.1.tar.gz'Content
>> > type 'application/x-gzip' length 103591 bytes (101 KB)downloaded 101
>> > KB
>> > trying URL '
>> https://cran.rstudio.com/src/contrib/vctrs_0.6.5.tar.gz'Content
>> > type 'application/x-gzip' length 969066 bytes (946 KB)downloaded 946
>> > KB
>> > trying URL '
>> https://cran.rstudio.com/src/contrib/png_0.1-8.tar.gz'Content
>> > type 'application/x-gzip' length 24880 bytes (24 KB)downloaded 24 KB
>> > trying URL '
>> https://cran.rstudio.com/src/contrib/jpeg_0.1-10.tar.gz'Content
>> > type 'application/x-gzip' length 18667 bytes (18 KB)downloaded 18 KB
>> > trying URL '
>> https://cran.rstudio.com/src/contrib/interp_1.1-6.tar.gz'Content
>> > type 'application/x-gzip' length 1112116 bytes (1.1 MB)downloaded 1.1
>> > MB
>> > trying URL '
>> https://cran.rstudio.com/src/contrib/timechange_0.3.0.tar.gz'Content
>> > type 'application/x-gzip' length 103439 bytes (101 KB)downloaded 101
>> > KB
>> > trying URL '
>> https://cran.rstudio.com/src/contrib/maps_3.4.2.tar.gz'Content
>> > type 'application/x-gzip' length 2278051 bytes (2.2 MB)downloaded 2.2
>> > MB
>> > trying URL '
>> https://cran.rstudio.com/src/contrib/nlme_3.1-164.tar.gz'Content
>> > type 'application/x-gzip' length 836832 bytes (817 KB)downloaded 817
>> > KB
>> > trying URL '
>> https://cran.rstudio.com/src/contrib/Matrix_1.6-5.tar.gz'Content
>> > type 'application/x-gzip' length 2883851 bytes (2.8 MB)downloaded 2.8
>> > MB
>> > trying URL '
>> https://cran.rstudio.com/src/contrib/cluster_2.1.6.tar.gz'Content
>> > type 'application/x-gzip' length 369050 bytes (360 KB)downloaded 360
>> > KB
>> > trying URL '
>> https://cran.rstudio.com/src/contrib/dplyr_1.1.4.tar.gz'Content
>> > type 'application/x-gzip' length 1207521 bytes (1.2 MB)downloaded 1.2
>> > MB
>> > trying URL '
>> https://cran.rstudio.com/src/contrib/hexbin_1.28.3.tar.gz'Content
>> > type 'application/x-gzip' length 1199967 bytes (1.1 MB)downloaded 1.1
>> > MB
>> > trying URL '
>> https://cran.rstudio.com/src/contrib/latticeExtra_0.6-30.tar.gz'Content
>> > type 'application/x-gzip' length 1292936 bytes (1.2 MB)downloaded 1.2
>> > MB
>> > trying URL '
>> https://cran.rstudio.com/src/contrib/lubridate_1.9.3.tar.gz'Content
>> > type 'application/x-gzip' length 428043 bytes (418 KB)downloaded 418
>> > KB
>> > trying URL '
>> https://cran.rstudio.com/src/contrib/mapproj_1.2.11.tar.gz'Content
>> > type 'application/x-gzip' length 25544 bytes (24 KB)downloaded 24 KB
>> > trying URL '
>> https://cran.rstudio.com/src/contrib/mgcv_1.9-1.tar.gz'Content
>> > type 'application/x-gzip' length 1083217 bytes (1.0 MB)downloaded 1.0
>> > MB
>> > trying URL '
>> https://cran.rstudio.com/src/contrib/purrr_1.0.2.tar.gz'Content
>> > type 'application/x-gzip' length 220868 bytes (215 KB)downloaded 215
>> > KB
>> > trying URL '
>> https://cran.rstudio.com/src/contrib/openair_2.18-2.tar.gz'Content
>> > type 'application/x-gzip' length 1796725 bytes (1.7 MB)downloaded 1.7
>> Hello,
>>
>> If you are on Windows, do you have rtools [1] installed?
>>
>>
>>
>>
>> On Thu, Mar 14, 2024 at 6:47?PM Rui Barradas <ruipbarradas at sapo.pt>
>> wrote:
>>
>> > ?s 04:12 de 13/03/2024, javad bayat escreveu:
>> > > Dear Rui;
>> > > I hope this email finds you well. I have a problem installing
>> packages in
>> > > Rstudio and R software. When I try to install a package, the software
>> > tries
>> > > to download but after downloading, it gives some errors and does not
>> > work.
>> > > I would be more than happy if you please help me to solve this issue.
>> > > Warm regards.
>> > >
>> > >
>> > >> install.packages("openair", type = "source")Installing package into
>> > ?C:/R_Libs?
>> > > (as ?lib? is unspecified)Warning in install.packages :
>> > >    dependencies ?lattice?, ?MASS? are not availablealso installing the
>> > > dependencies ?deldir?, ?RcppEigen?, ?cli?, ?glue?, ?lifecycle?,
>> > > ?pillar?, ?rlang?, ?tibble?, ?tidyselect?, ?vctrs?, ?png?, ?jpeg?,
>> > > ?interp?, ?timechange?, ?maps?, ?nlme?, ?Matrix?, ?cluster?, ?dplyr?,
>> > > ?hexbin?, ?latticeExtra?, ?lubridate?, ?mapproj?, ?mgcv?, ?purrr?
>> > > trying URL '
>> > https://cran.rstudio.com/src/contrib/deldir_2.0-4.tar.gz'Content
>> > > type 'application/x-gzip' length 103621 bytes (101 KB)downloaded 101
>> > > KB
>> > > trying URL '
>> > https://cran.rstudio.com/src/contrib/RcppEigen_0.3.4.0.0.tar.gz'Content
>> > > type 'application/x-gzip' length 1765714 bytes (1.7 MB)downloaded 1.7
>> > > MB
>> > > trying URL '
>> > https://cran.rstudio.com/src/contrib/cli_3.6.2.tar.gz'Content
>> > > type 'application/x-gzip' length 569771 bytes (556 KB)downloaded 556
>> > > KB
>> > > trying URL '
>> > https://cran.rstudio.com/src/contrib/glue_1.7.0.tar.gz'Content
>> > > type 'application/x-gzip' length 105420 bytes (102 KB)downloaded 102
>> > > KB
>> > > trying URL '
>> > https://cran.rstudio.com/src/contrib/lifecycle_1.0.4.tar.gz'Content
>> > > type 'application/x-gzip' length 107656 bytes (105 KB)downloaded 105
>> > > KB
>> > > trying URL '
>> > https://cran.rstudio.com/src/contrib/pillar_1.9.0.tar.gz'Content
>> > > type 'application/x-gzip' length 444528 bytes (434 KB)downloaded 434
>> > > KB
>> > > trying URL '
>> > https://cran.rstudio.com/src/contrib/rlang_1.1.3.tar.gz'Content
>> > > type 'application/x-gzip' length 763765 bytes (745 KB)downloaded 745
>> > > KB
>> > > trying URL '
>> > https://cran.rstudio.com/src/contrib/tibble_3.2.1.tar.gz'Content
>> > > type 'application/x-gzip' length 565982 bytes (552 KB)downloaded 552
>> > > KB
>> > > trying URL '
>> > https://cran.rstudio.com/src/contrib/tidyselect_1.2.1.tar.gz'Content
>> > > type 'application/x-gzip' length 103591 bytes (101 KB)downloaded 101
>> > > KB
>> > > trying URL '
>> > https://cran.rstudio.com/src/contrib/vctrs_0.6.5.tar.gz'Content
>> > > type 'application/x-gzip' length 969066 bytes (946 KB)downloaded 946
>> > > KB
>> > > trying URL '
>> > https://cran.rstudio.com/src/contrib/png_0.1-8.tar.gz'Content
>> > > type 'application/x-gzip' length 24880 bytes (24 KB)downloaded 24 KB
>> > > trying URL '
>> > https://cran.rstudio.com/src/contrib/jpeg_0.1-10.tar.gz'Content
>> > > type 'application/x-gzip' length 18667 bytes (18 KB)downloaded 18 KB
>> > > trying URL '
>> > https://cran.rstudio.com/src/contrib/interp_1.1-6.tar.gz'Content
>> > > type 'application/x-gzip' length 1112116 bytes (1.1 MB)downloaded 1.1
>> > > MB
>> > > trying URL '
>> > https://cran.rstudio.com/src/contrib/timechange_0.3.0.tar.gz'Content
>> > > type 'application/x-gzip' length 103439 bytes (101 KB)downloaded 101
>> > > KB
>> > > trying URL '
>> > https://cran.rstudio.com/src/contrib/maps_3.4.2.tar.gz'Content
>> > > type 'application/x-gzip' length 2278051 bytes (2.2 MB)downloaded 2.2
>> > > MB
>> > > trying URL '
>> > https://cran.rstudio.com/src/contrib/nlme_3.1-164.tar.gz'Content
>> > > type 'application/x-gzip' length 836832 bytes (817 KB)downloaded 817
>> > > KB
>> > > trying URL '
>> > https://cran.rstudio.com/src/contrib/Matrix_1.6-5.tar.gz'Content
>> > > type 'application/x-gzip' length 2883851 bytes (2.8 MB)downloaded 2.8
>> > > MB
>> > > trying URL '
>> > https://cran.rstudio.com/src/contrib/cluster_2.1.6.tar.gz'Content
>> > > type 'application/x-gzip' length 369050 bytes (360 KB)downloaded 360
>> > > KB
>> > > trying URL '
>> > https://cran.rstudio.com/src/contrib/dplyr_1.1.4.tar.gz'Content
>> > > type 'application/x-gzip' length 1207521 bytes (1.2 MB)downloaded 1.2
>> > > MB
>> > > trying URL '
>> > https://cran.rstudio.com/src/contrib/hexbin_1.28.3.tar.gz'Content
>> > > type 'application/x-gzip' length 1199967 bytes (1.1 MB)downloaded 1.1
>> > > MB
>> > > trying URL '
>> > https://cran.rstudio.com/src/contrib/latticeExtra_0.6-30.tar.gz'Content
>> > > type 'application/x-gzip' length 1292936 bytes (1.2 MB)downloaded 1.2
>> > > MB
>> > > trying URL '
>> > https://cran.rstudio.com/src/contrib/lubridate_1.9.3.tar.gz'Content
>> > > type 'application/x-gzip' length 428043 bytes (418 KB)downloaded 418
>> > > KB
>> > > trying URL '
>> > https://cran.rstudio.com/src/contrib/mapproj_1.2.11.tar.gz'Content
>> > > type 'application/x-gzip' length 25544 bytes (24 KB)downloaded 24 KB
>> > > trying URL '
>> > https://cran.rstudio.com/src/contrib/mgcv_1.9-1.tar.gz'Content
>> > > type 'application/x-gzip' length 1083217 bytes (1.0 MB)downloaded 1.0
>> > > MB
>> > > trying URL '
>> > https://cran.rstudio.com/src/contrib/purrr_1.0.2.tar.gz'Content
>> > > type 'application/x-gzip' length 220868 bytes (215 KB)downloaded 215
>> > > KB
>> > > trying URL '
>> > https://cran.rstudio.com/src/contrib/openair_2.18-2.tar.gz'Content
>> > > type 'application/x-gzip' length 1796725 bytes (1.7 MB)downloaded 1.7
>> > > MB
>> > > * installing *source* package 'deldir' ...
>> > > ** package 'deldir' successfully unpacked and MD5 sums checked
>> > > ** using staged installation
>> > > ** libs
>> > > Warning in system(cmd) : 'make' not found
>> > > ERROR: compilation failed for package 'deldir'
>> > > * removing 'C:/R_Libs/deldir'
>> > > Warning in install.packages :
>> > >    installation of package ?deldir? had non-zero exit status
>> > > * installing *source* package 'RcppEigen' ...
>> > > ** package 'RcppEigen' successfully unpacked and MD5 sums checked
>> > > ** using staged installation
>> > > ** libs
>> > > Warning in system(cmd) : 'make' not found
>> > > ERROR: compilation failed for package 'RcppEigen'
>> > > * removing 'C:/R_Libs/RcppEigen'
>> > > Warning in install.packages :
>> > >    installation of package ?RcppEigen? had non-zero exit status
>> > > * installing *source* package 'cli' ...
>> > > ** package 'cli' successfully unpacked and MD5 sums checked
>> > > ** using staged installation
>> > > ** libs
>> > > Warning in system(cmd) : 'make' not found
>> > > ERROR: compilation failed for package 'cli'
>> > > * removing 'C:/R_Libs/cli'
>> > > Warning in install.packages :
>> > >    installation of package ?cli? had non-zero exit status
>> > > * installing *source* package 'glue' ...
>> > > ** package 'glue' successfully unpacked and MD5 sums checked
>> > > ** using staged installation
>> > > ** libs
>> > > Warning in system(cmd) : 'make' not found
>> > > ERROR: compilation failed for package 'glue'
>> > > * removing 'C:/R_Libs/glue'
>> > > Warning in install.packages :
>> > >    installation of package ?glue? had non-zero exit status
>> > > * installing *source* package 'rlang' ...
>> > > ** package 'rlang' successfully unpacked and MD5 sums checked
>> > > ** using staged installation
>> > > ** libs
>> > > Warning in system(cmd) : 'make' not found
>> > > ERROR: compilation failed for package 'rlang'
>> > > * removing 'C:/R_Libs/rlang'
>> > > Warning in install.packages :
>> > >    installation of package ?rlang? had non-zero exit status
>> > > * installing *source* package 'png' ...
>> > > ** package 'png' successfully unpacked and MD5 sums checked
>> > > ** using staged installation
>> > > bash.exe: warning: could not find /tmp, please create!
>> > >    checking PNG headers and libraries
>> > > bash.exe: warning: could not find /tmp, please create!
>> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 179:
>> > > make: command not found
>> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 180:
>> > > make: command not found
>> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 181:
>> > > make: command not found
>> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 182:
>> > > make: command not found
>> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 183:
>> > > make: command not found
>> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 319:
>> > > make: command not found
>> > > ./configure.win: line 17: make: command not found
>> > > /lib/libpng.lib
>> > >    found libpng in LOCAL_SOFT: /lib
>> > >    seems ok, ready to go
>> > > ** libs
>> > > Warning in system(cmd) : 'make' not found
>> > > ERROR: compilation failed for package 'png'
>> > > * removing 'C:/R_Libs/png'
>> > > Warning in install.packages :
>> > >    installation of package ?png? had non-zero exit status
>> > > * installing *source* package 'jpeg' ...
>> > > ** package 'jpeg' successfully unpacked and MD5 sums checked
>> > > ** using staged installation
>> > > bash.exe: warning: could not find /tmp, please create!
>> > >    checking JPEG headers and libraries
>> > > bash.exe: warning: could not find /tmp, please create!
>> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 179:
>> > > make: command not found
>> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 180:
>> > > make: command not found
>> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 181:
>> > > make: command not found
>> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 182:
>> > > make: command not found
>> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 183:
>> > > make: command not found
>> > > C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 319:
>> > > make: command not found
>> > > ./configure.win: line 17: make: command not found
>> > > /lib/libjpeg.lib
>> > >    found libjpeg in LOCAL_SOFT: /lib
>> > >    seems ok, ready to go
>> > > ** libs
>> > > Warning in system(cmd) : 'make' not found
>> > > ERROR: compilation failed for package 'jpeg'
>> > > * removing 'C:/R_Libs/jpeg'
>> > > Warning in install.packages :
>> > >    installation of package ?jpeg? had non-zero exit status
>> > > * installing *source* package 'timechange' ...
>> > > ** package 'timechange' successfully unpacked and MD5 sums checked
>> > > ** using staged installation
>> > > ** libs
>> > > Warning in system(cmd) : 'make' not found
>> > > ERROR: compilation failed for package 'timechange'
>> > > * removing 'C:/R_Libs/timechange'
>> > > Warning in install.packages :
>> > >    installation of package ?timechange? had non-zero exit status
>> > > * installing *source* package 'maps' ...
>> > > ** package 'maps' successfully unpacked and MD5 sums checked
>> > > ** using staged installation
>> > >
>> > >     **********************************************
>> > >     WARNING: this package has a configure script
>> > >           It probably needs manual configuration
>> > >     **********************************************
>> > >
>> > >
>> > > ** libs
>> > >    running 'src/Makefile.win' ...
>> > > Warning in system(paste("make --no-print-directory", paste("-f",
>> > > shQuote(makefiles),  :
>> > >    'make' not found
>> > > ERROR: compilation failed for package 'maps'
>> > > * removing 'C:/R_Libs/maps'
>> > > Warning in install.packages :
>> > >    installation of package ?maps? had non-zero exit status
>> > > ERROR: dependency 'lattice' is not available for package 'nlme'
>> > > * removing 'C:/R_Libs/nlme'
>> > > Warning in install.packages :
>> > >    installation of package ?nlme? had non-zero exit status
>> > > ERROR: dependency 'lattice' is not available for package 'Matrix'
>> > > * removing 'C:/R_Libs/Matrix'
>> > > Warning in install.packages :
>> > >    installation of package ?Matrix? had non-zero exit status
>> > > * installing *source* package 'cluster' ...
>> > > ** package 'cluster' successfully unpacked and MD5 sums checked
>> > > ** using staged installation
>> > > ** libs
>> > > Warning in system(cmd) : 'make' not found
>> > > ERROR: compilation failed for package 'cluster'
>> > > * removing 'C:/R_Libs/cluster'
>> > > Warning in install.packages :
>> > >    installation of package ?cluster? had non-zero exit status
>> > > ERROR: dependency 'lattice' is not available for package 'hexbin'
>> > > * removing 'C:/R_Libs/hexbin'
>> > > Warning in install.packages :
>> > >    installation of package ?hexbin? had non-zero exit status
>> > > * installing *source* package 'lifecycle' ...
>> > > ** package 'lifecycle' successfully unpacked and MD5 sums checked
>> > > ** using staged installation
>> > > ** R
>> > > ** inst
>> > > ** byte-compile and prepare package for lazy loading
>> > > Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>> > vI[[i]]) :
>> > >    namespace 'rlang' 0.3.4 is being loaded, but >= 1.1.0 is required
>> > > Calls: <Anonymous> ... withCallingHandlers -> loadNamespace ->
>> > > namespaceImport -> loadNamespace
>> > > Execution halted
>> > > ERROR: lazy loading failed for package 'lifecycle'
>> > > * removing 'C:/R_Libs/lifecycle'
>> > > Warning in install.packages :
>> > >    installation of package ?lifecycle? had non-zero exit status
>> > > ERROR: dependencies 'deldir', 'RcppEigen' are not available for
>> package
>> > 'interp'
>> > > * removing 'C:/R_Libs/interp'
>> > > Warning in install.packages :
>> > >    installation of package ?interp? had non-zero exit status
>> > > ERROR: dependency 'timechange' is not available for package
>> 'lubridate'
>> > > * removing 'C:/R_Libs/lubridate'
>> > > Warning in install.packages :
>> > >    installation of package ?lubridate? had non-zero exit status
>> > > ERROR: dependency 'maps' is not available for package 'mapproj'
>> > > * removing 'C:/R_Libs/mapproj'
>> > > Warning in install.packages :
>> > >    installation of package ?mapproj? had non-zero exit status
>> > > ERROR: dependencies 'nlme', 'Matrix' are not available for package
>> 'mgcv'
>> > > * removing 'C:/R_Libs/mgcv'
>> > > Warning in install.packages :
>> > >    installation of package ?mgcv? had non-zero exit status
>> > > ERROR: dependency 'lifecycle' is not available for package 'vctrs'
>> > > * removing 'C:/R_Libs/vctrs'
>> > > Warning in install.packages :
>> > >    installation of package ?vctrs? had non-zero exit status
>> > > ERROR: dependencies 'lattice', 'png', 'jpeg', 'interp', 'MASS' are not
>> > > available for package 'latticeExtra'
>> > > * removing 'C:/R_Libs/latticeExtra'
>> > > Warning in install.packages :
>> > >    installation of package ?latticeExtra? had non-zero exit status
>> > > ERROR: dependencies 'lifecycle', 'vctrs' are not available for package
>> > 'pillar'
>> > > * removing 'C:/R_Libs/pillar'
>> > > Warning in install.packages :
>> > >    installation of package ?pillar? had non-zero exit status
>> > > ERROR: dependencies 'lifecycle', 'vctrs' are not available for package
>> > > 'tidyselect'
>> > > * removing 'C:/R_Libs/tidyselect'
>> > > Warning in install.packages :
>> > >    installation of package ?tidyselect? had non-zero exit status
>> > > ERROR: dependencies 'lifecycle', 'vctrs' are not available for package
>> > 'purrr'
>> > > * removing 'C:/R_Libs/purrr'
>> > > Warning in install.packages :
>> > >    installation of package ?purrr? had non-zero exit status
>> > > ERROR: dependencies 'lifecycle', 'pillar', 'vctrs' are not available
>> > > for package 'tibble'
>> > > * removing 'C:/R_Libs/tibble'
>> > > Warning in install.packages :
>> > >    installation of package ?tibble? had non-zero exit status
>> > > ERROR: dependencies 'lifecycle', 'pillar', 'vctrs' are not available
>> > > for package 'dplyr'
>> > > * removing 'C:/R_Libs/dplyr'
>> > > Warning in install.packages :
>> > >    installation of package ?dplyr? had non-zero exit status
>> > > ERROR: dependencies 'cluster', 'hexbin', 'lattice', 'latticeExtra',
>> > > 'lubridate', 'mapproj', 'MASS', 'mgcv' are not available for package
>> > > 'openair'
>> > > * removing 'C:/R_Libs/openair'
>> > > Warning in install.packages :
>> > >    installation of package ?openair? had non-zero exit status
>> > >
>> > >
>> > >
>> > Hello,
>> >
>> > If you are on Windows, do you have rtools [1] installed?
>> > Also, please address your question to R-Help [2], [3], not to me
>> directly.
>> >
>> >
>> > [1] https://cran.r-project.org/bin/windows/Rtools/
>> > [2] r-help at r-project.org
>> > [3] https://stat.ethz.ch/mailman/listinfo/r-help
>> >
>> > Hope this helps,
>> >
>> > Rui Barradas
>> >
>> >
>> > --
>> > Este e-mail foi analisado pelo software antiv?rus AVG para verificar a
>> > presen?a de v?rus.
>> > www.avg.com
>> >
>>
>>
>> --
>> Best Regards
>> Javad Bayat
>> M.Sc. Environment Engineering
>> Alternative Mail: bayat194 at yahoo.com
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

-- 
Best Regards
Javad Bayat
M.Sc. Environment Engineering
Alternative Mail: bayat194 at yahoo.com

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Sun Mar 17 00:56:16 2024
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Sun, 17 Mar 2024 00:56:16 +0100
Subject: [R] Problem when trying to install packages
In-Reply-To: <CANTxAmLgdxq30VZEiiuXsa-CC4_AVM7NB2eyQiVbTrb2ES9Y7A@mail.gmail.com>
References: <CANTxAmL+E4pubS7KfVP+Rx0f6Cd_rZZAb1dpqxyr5E5FH3-R0Q@mail.gmail.com>
 <d757d942-cc7e-4a18-8876-da5085aa6e32@sapo.pt>
 <CANTxAm+VTm2KbfFJg5FFFPj8hDMiV0WaropUT5Y9D-5mjNNZqw@mail.gmail.com>
 <CAGxFJbSH0X7MYjfHMyn57fEPttkuqWRNAFmRcn0cogYZLNf28Q@mail.gmail.com>
 <CANTxAmLgdxq30VZEiiuXsa-CC4_AVM7NB2eyQiVbTrb2ES9Y7A@mail.gmail.com>
Message-ID: <482be297-01ae-4a07-a9c9-b3a06c3c224f@statistik.tu-dortmund.de>



On 16.03.2024 10:48, javad bayat wrote:
> Dear all;
> I found a useful video on youtube that has explained how to install Rtools.
> I followed the instructions and the problem was solved.
> " Installing R version 4.0 + RTools 4.0 + RStudio For Data Science (#R

??
A recent set of released software would be Rtools43 + R-4.3.3

Best,
Uwe Ligges




> #RTools #RStudio #DataScience) - YouTube
> <https://www.youtube.com/watch?v=h2IPWVXaUuU> "
> Sincerely
> 
> On Sat, Mar 16, 2024 at 10:15?AM Bert Gunter <bgunter.4567 at gmail.com> wrote:
> 
>> Though Navigator may mess up any Rtools stuff because it handles the
>> directory trees where packages and dependencies are located, does it not?
>> If so, maybe just reinstall RStudio directly from its website to proceed.
>> Just a guess obviously.
>>
>> Bert
>>
>> On Sat, Mar 16, 2024, 05:09 javad bayat <j.bayat194 at gmail.com> wrote:
>>
>>>   Dear Rui;
>>> Many thanks for your reply. I have installed Rtools (rtools43-5958-5975)
>>> on
>>> my PC and I have R version 4.3.3 and 4.3.2 to install. Also I have
>>> installed Rstudio through Anaconda Navigator.
>>> But I do not know how to use Rtools for installing the R packages. I would
>>> be more than happy if you help me.
>>> Sincerely yours
>>>
>>>
>>>
>>>> Dear Rui;
>>>> I hope this email finds you well. I have a problem installing packages
>>> in
>>>> Rstudio and R software. When I try to install a package, the software
>>> tries
>>>> to download but after downloading, it gives some errors and does not
>>> work.
>>>> I would be more than happy if you please help me to solve this issue.
>>>> Warm regards.
>>>>
>>>>
>>>>> install.packages("openair", type = "source")Installing package into
>>> ?C:/R_Libs?
>>>> (as ?lib? is unspecified)Warning in install.packages :
>>>>     dependencies ?lattice?, ?MASS? are not availablealso installing the
>>>> dependencies ?deldir?, ?RcppEigen?, ?cli?, ?glue?, ?lifecycle?,
>>>> ?pillar?, ?rlang?, ?tibble?, ?tidyselect?, ?vctrs?, ?png?, ?jpeg?,
>>>> ?interp?, ?timechange?, ?maps?, ?nlme?, ?Matrix?, ?cluster?, ?dplyr?,
>>>> ?hexbin?, ?latticeExtra?, ?lubridate?, ?mapproj?, ?mgcv?, ?purrr?
>>>> trying URL '
>>> https://cran.rstudio.com/src/contrib/deldir_2.0-4.tar.gz'Content
>>>> type 'application/x-gzip' length 103621 bytes (101 KB)downloaded 101
>>>> KB
>>>> trying URL '
>>> https://cran.rstudio.com/src/contrib/RcppEigen_0.3.4.0.0.tar.gz'Content
>>>> type 'application/x-gzip' length 1765714 bytes (1.7 MB)downloaded 1.7
>>>> MB
>>>> trying URL '
>>> https://cran.rstudio.com/src/contrib/cli_3.6.2.tar.gz'Content
>>>> type 'application/x-gzip' length 569771 bytes (556 KB)downloaded 556
>>>> KB
>>>> trying URL '
>>> https://cran.rstudio.com/src/contrib/glue_1.7.0.tar.gz'Content
>>>> type 'application/x-gzip' length 105420 bytes (102 KB)downloaded 102
>>>> KB
>>>> trying URL '
>>> https://cran.rstudio.com/src/contrib/lifecycle_1.0.4.tar.gz'Content
>>>> type 'application/x-gzip' length 107656 bytes (105 KB)downloaded 105
>>>> KB
>>>> trying URL '
>>> https://cran.rstudio.com/src/contrib/pillar_1.9.0.tar.gz'Content
>>>> type 'application/x-gzip' length 444528 bytes (434 KB)downloaded 434
>>>> KB
>>>> trying URL '
>>> https://cran.rstudio.com/src/contrib/rlang_1.1.3.tar.gz'Content
>>>> type 'application/x-gzip' length 763765 bytes (745 KB)downloaded 745
>>>> KB
>>>> trying URL '
>>> https://cran.rstudio.com/src/contrib/tibble_3.2.1.tar.gz'Content
>>>> type 'application/x-gzip' length 565982 bytes (552 KB)downloaded 552
>>>> KB
>>>> trying URL '
>>> https://cran.rstudio.com/src/contrib/tidyselect_1.2.1.tar.gz'Content
>>>> type 'application/x-gzip' length 103591 bytes (101 KB)downloaded 101
>>>> KB
>>>> trying URL '
>>> https://cran.rstudio.com/src/contrib/vctrs_0.6.5.tar.gz'Content
>>>> type 'application/x-gzip' length 969066 bytes (946 KB)downloaded 946
>>>> KB
>>>> trying URL '
>>> https://cran.rstudio.com/src/contrib/png_0.1-8.tar.gz'Content
>>>> type 'application/x-gzip' length 24880 bytes (24 KB)downloaded 24 KB
>>>> trying URL '
>>> https://cran.rstudio.com/src/contrib/jpeg_0.1-10.tar.gz'Content
>>>> type 'application/x-gzip' length 18667 bytes (18 KB)downloaded 18 KB
>>>> trying URL '
>>> https://cran.rstudio.com/src/contrib/interp_1.1-6.tar.gz'Content
>>>> type 'application/x-gzip' length 1112116 bytes (1.1 MB)downloaded 1.1
>>>> MB
>>>> trying URL '
>>> https://cran.rstudio.com/src/contrib/timechange_0.3.0.tar.gz'Content
>>>> type 'application/x-gzip' length 103439 bytes (101 KB)downloaded 101
>>>> KB
>>>> trying URL '
>>> https://cran.rstudio.com/src/contrib/maps_3.4.2.tar.gz'Content
>>>> type 'application/x-gzip' length 2278051 bytes (2.2 MB)downloaded 2.2
>>>> MB
>>>> trying URL '
>>> https://cran.rstudio.com/src/contrib/nlme_3.1-164.tar.gz'Content
>>>> type 'application/x-gzip' length 836832 bytes (817 KB)downloaded 817
>>>> KB
>>>> trying URL '
>>> https://cran.rstudio.com/src/contrib/Matrix_1.6-5.tar.gz'Content
>>>> type 'application/x-gzip' length 2883851 bytes (2.8 MB)downloaded 2.8
>>>> MB
>>>> trying URL '
>>> https://cran.rstudio.com/src/contrib/cluster_2.1.6.tar.gz'Content
>>>> type 'application/x-gzip' length 369050 bytes (360 KB)downloaded 360
>>>> KB
>>>> trying URL '
>>> https://cran.rstudio.com/src/contrib/dplyr_1.1.4.tar.gz'Content
>>>> type 'application/x-gzip' length 1207521 bytes (1.2 MB)downloaded 1.2
>>>> MB
>>>> trying URL '
>>> https://cran.rstudio.com/src/contrib/hexbin_1.28.3.tar.gz'Content
>>>> type 'application/x-gzip' length 1199967 bytes (1.1 MB)downloaded 1.1
>>>> MB
>>>> trying URL '
>>> https://cran.rstudio.com/src/contrib/latticeExtra_0.6-30.tar.gz'Content
>>>> type 'application/x-gzip' length 1292936 bytes (1.2 MB)downloaded 1.2
>>>> MB
>>>> trying URL '
>>> https://cran.rstudio.com/src/contrib/lubridate_1.9.3.tar.gz'Content
>>>> type 'application/x-gzip' length 428043 bytes (418 KB)downloaded 418
>>>> KB
>>>> trying URL '
>>> https://cran.rstudio.com/src/contrib/mapproj_1.2.11.tar.gz'Content
>>>> type 'application/x-gzip' length 25544 bytes (24 KB)downloaded 24 KB
>>>> trying URL '
>>> https://cran.rstudio.com/src/contrib/mgcv_1.9-1.tar.gz'Content
>>>> type 'application/x-gzip' length 1083217 bytes (1.0 MB)downloaded 1.0
>>>> MB
>>>> trying URL '
>>> https://cran.rstudio.com/src/contrib/purrr_1.0.2.tar.gz'Content
>>>> type 'application/x-gzip' length 220868 bytes (215 KB)downloaded 215
>>>> KB
>>>> trying URL '
>>> https://cran.rstudio.com/src/contrib/openair_2.18-2.tar.gz'Content
>>>> type 'application/x-gzip' length 1796725 bytes (1.7 MB)downloaded 1.7
>>> Hello,
>>>
>>> If you are on Windows, do you have rtools [1] installed?
>>>
>>>
>>>
>>>
>>> On Thu, Mar 14, 2024 at 6:47?PM Rui Barradas <ruipbarradas at sapo.pt>
>>> wrote:
>>>
>>>> ?s 04:12 de 13/03/2024, javad bayat escreveu:
>>>>> Dear Rui;
>>>>> I hope this email finds you well. I have a problem installing
>>> packages in
>>>>> Rstudio and R software. When I try to install a package, the software
>>>> tries
>>>>> to download but after downloading, it gives some errors and does not
>>>> work.
>>>>> I would be more than happy if you please help me to solve this issue.
>>>>> Warm regards.
>>>>>
>>>>>
>>>>>> install.packages("openair", type = "source")Installing package into
>>>> ?C:/R_Libs?
>>>>> (as ?lib? is unspecified)Warning in install.packages :
>>>>>     dependencies ?lattice?, ?MASS? are not availablealso installing the
>>>>> dependencies ?deldir?, ?RcppEigen?, ?cli?, ?glue?, ?lifecycle?,
>>>>> ?pillar?, ?rlang?, ?tibble?, ?tidyselect?, ?vctrs?, ?png?, ?jpeg?,
>>>>> ?interp?, ?timechange?, ?maps?, ?nlme?, ?Matrix?, ?cluster?, ?dplyr?,
>>>>> ?hexbin?, ?latticeExtra?, ?lubridate?, ?mapproj?, ?mgcv?, ?purrr?
>>>>> trying URL '
>>>> https://cran.rstudio.com/src/contrib/deldir_2.0-4.tar.gz'Content
>>>>> type 'application/x-gzip' length 103621 bytes (101 KB)downloaded 101
>>>>> KB
>>>>> trying URL '
>>>> https://cran.rstudio.com/src/contrib/RcppEigen_0.3.4.0.0.tar.gz'Content
>>>>> type 'application/x-gzip' length 1765714 bytes (1.7 MB)downloaded 1.7
>>>>> MB
>>>>> trying URL '
>>>> https://cran.rstudio.com/src/contrib/cli_3.6.2.tar.gz'Content
>>>>> type 'application/x-gzip' length 569771 bytes (556 KB)downloaded 556
>>>>> KB
>>>>> trying URL '
>>>> https://cran.rstudio.com/src/contrib/glue_1.7.0.tar.gz'Content
>>>>> type 'application/x-gzip' length 105420 bytes (102 KB)downloaded 102
>>>>> KB
>>>>> trying URL '
>>>> https://cran.rstudio.com/src/contrib/lifecycle_1.0.4.tar.gz'Content
>>>>> type 'application/x-gzip' length 107656 bytes (105 KB)downloaded 105
>>>>> KB
>>>>> trying URL '
>>>> https://cran.rstudio.com/src/contrib/pillar_1.9.0.tar.gz'Content
>>>>> type 'application/x-gzip' length 444528 bytes (434 KB)downloaded 434
>>>>> KB
>>>>> trying URL '
>>>> https://cran.rstudio.com/src/contrib/rlang_1.1.3.tar.gz'Content
>>>>> type 'application/x-gzip' length 763765 bytes (745 KB)downloaded 745
>>>>> KB
>>>>> trying URL '
>>>> https://cran.rstudio.com/src/contrib/tibble_3.2.1.tar.gz'Content
>>>>> type 'application/x-gzip' length 565982 bytes (552 KB)downloaded 552
>>>>> KB
>>>>> trying URL '
>>>> https://cran.rstudio.com/src/contrib/tidyselect_1.2.1.tar.gz'Content
>>>>> type 'application/x-gzip' length 103591 bytes (101 KB)downloaded 101
>>>>> KB
>>>>> trying URL '
>>>> https://cran.rstudio.com/src/contrib/vctrs_0.6.5.tar.gz'Content
>>>>> type 'application/x-gzip' length 969066 bytes (946 KB)downloaded 946
>>>>> KB
>>>>> trying URL '
>>>> https://cran.rstudio.com/src/contrib/png_0.1-8.tar.gz'Content
>>>>> type 'application/x-gzip' length 24880 bytes (24 KB)downloaded 24 KB
>>>>> trying URL '
>>>> https://cran.rstudio.com/src/contrib/jpeg_0.1-10.tar.gz'Content
>>>>> type 'application/x-gzip' length 18667 bytes (18 KB)downloaded 18 KB
>>>>> trying URL '
>>>> https://cran.rstudio.com/src/contrib/interp_1.1-6.tar.gz'Content
>>>>> type 'application/x-gzip' length 1112116 bytes (1.1 MB)downloaded 1.1
>>>>> MB
>>>>> trying URL '
>>>> https://cran.rstudio.com/src/contrib/timechange_0.3.0.tar.gz'Content
>>>>> type 'application/x-gzip' length 103439 bytes (101 KB)downloaded 101
>>>>> KB
>>>>> trying URL '
>>>> https://cran.rstudio.com/src/contrib/maps_3.4.2.tar.gz'Content
>>>>> type 'application/x-gzip' length 2278051 bytes (2.2 MB)downloaded 2.2
>>>>> MB
>>>>> trying URL '
>>>> https://cran.rstudio.com/src/contrib/nlme_3.1-164.tar.gz'Content
>>>>> type 'application/x-gzip' length 836832 bytes (817 KB)downloaded 817
>>>>> KB
>>>>> trying URL '
>>>> https://cran.rstudio.com/src/contrib/Matrix_1.6-5.tar.gz'Content
>>>>> type 'application/x-gzip' length 2883851 bytes (2.8 MB)downloaded 2.8
>>>>> MB
>>>>> trying URL '
>>>> https://cran.rstudio.com/src/contrib/cluster_2.1.6.tar.gz'Content
>>>>> type 'application/x-gzip' length 369050 bytes (360 KB)downloaded 360
>>>>> KB
>>>>> trying URL '
>>>> https://cran.rstudio.com/src/contrib/dplyr_1.1.4.tar.gz'Content
>>>>> type 'application/x-gzip' length 1207521 bytes (1.2 MB)downloaded 1.2
>>>>> MB
>>>>> trying URL '
>>>> https://cran.rstudio.com/src/contrib/hexbin_1.28.3.tar.gz'Content
>>>>> type 'application/x-gzip' length 1199967 bytes (1.1 MB)downloaded 1.1
>>>>> MB
>>>>> trying URL '
>>>> https://cran.rstudio.com/src/contrib/latticeExtra_0.6-30.tar.gz'Content
>>>>> type 'application/x-gzip' length 1292936 bytes (1.2 MB)downloaded 1.2
>>>>> MB
>>>>> trying URL '
>>>> https://cran.rstudio.com/src/contrib/lubridate_1.9.3.tar.gz'Content
>>>>> type 'application/x-gzip' length 428043 bytes (418 KB)downloaded 418
>>>>> KB
>>>>> trying URL '
>>>> https://cran.rstudio.com/src/contrib/mapproj_1.2.11.tar.gz'Content
>>>>> type 'application/x-gzip' length 25544 bytes (24 KB)downloaded 24 KB
>>>>> trying URL '
>>>> https://cran.rstudio.com/src/contrib/mgcv_1.9-1.tar.gz'Content
>>>>> type 'application/x-gzip' length 1083217 bytes (1.0 MB)downloaded 1.0
>>>>> MB
>>>>> trying URL '
>>>> https://cran.rstudio.com/src/contrib/purrr_1.0.2.tar.gz'Content
>>>>> type 'application/x-gzip' length 220868 bytes (215 KB)downloaded 215
>>>>> KB
>>>>> trying URL '
>>>> https://cran.rstudio.com/src/contrib/openair_2.18-2.tar.gz'Content
>>>>> type 'application/x-gzip' length 1796725 bytes (1.7 MB)downloaded 1.7
>>>>> MB
>>>>> * installing *source* package 'deldir' ...
>>>>> ** package 'deldir' successfully unpacked and MD5 sums checked
>>>>> ** using staged installation
>>>>> ** libs
>>>>> Warning in system(cmd) : 'make' not found
>>>>> ERROR: compilation failed for package 'deldir'
>>>>> * removing 'C:/R_Libs/deldir'
>>>>> Warning in install.packages :
>>>>>     installation of package ?deldir? had non-zero exit status
>>>>> * installing *source* package 'RcppEigen' ...
>>>>> ** package 'RcppEigen' successfully unpacked and MD5 sums checked
>>>>> ** using staged installation
>>>>> ** libs
>>>>> Warning in system(cmd) : 'make' not found
>>>>> ERROR: compilation failed for package 'RcppEigen'
>>>>> * removing 'C:/R_Libs/RcppEigen'
>>>>> Warning in install.packages :
>>>>>     installation of package ?RcppEigen? had non-zero exit status
>>>>> * installing *source* package 'cli' ...
>>>>> ** package 'cli' successfully unpacked and MD5 sums checked
>>>>> ** using staged installation
>>>>> ** libs
>>>>> Warning in system(cmd) : 'make' not found
>>>>> ERROR: compilation failed for package 'cli'
>>>>> * removing 'C:/R_Libs/cli'
>>>>> Warning in install.packages :
>>>>>     installation of package ?cli? had non-zero exit status
>>>>> * installing *source* package 'glue' ...
>>>>> ** package 'glue' successfully unpacked and MD5 sums checked
>>>>> ** using staged installation
>>>>> ** libs
>>>>> Warning in system(cmd) : 'make' not found
>>>>> ERROR: compilation failed for package 'glue'
>>>>> * removing 'C:/R_Libs/glue'
>>>>> Warning in install.packages :
>>>>>     installation of package ?glue? had non-zero exit status
>>>>> * installing *source* package 'rlang' ...
>>>>> ** package 'rlang' successfully unpacked and MD5 sums checked
>>>>> ** using staged installation
>>>>> ** libs
>>>>> Warning in system(cmd) : 'make' not found
>>>>> ERROR: compilation failed for package 'rlang'
>>>>> * removing 'C:/R_Libs/rlang'
>>>>> Warning in install.packages :
>>>>>     installation of package ?rlang? had non-zero exit status
>>>>> * installing *source* package 'png' ...
>>>>> ** package 'png' successfully unpacked and MD5 sums checked
>>>>> ** using staged installation
>>>>> bash.exe: warning: could not find /tmp, please create!
>>>>>     checking PNG headers and libraries
>>>>> bash.exe: warning: could not find /tmp, please create!
>>>>> C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 179:
>>>>> make: command not found
>>>>> C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 180:
>>>>> make: command not found
>>>>> C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 181:
>>>>> make: command not found
>>>>> C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 182:
>>>>> make: command not found
>>>>> C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 183:
>>>>> make: command not found
>>>>> C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 319:
>>>>> make: command not found
>>>>> ./configure.win: line 17: make: command not found
>>>>> /lib/libpng.lib
>>>>>     found libpng in LOCAL_SOFT: /lib
>>>>>     seems ok, ready to go
>>>>> ** libs
>>>>> Warning in system(cmd) : 'make' not found
>>>>> ERROR: compilation failed for package 'png'
>>>>> * removing 'C:/R_Libs/png'
>>>>> Warning in install.packages :
>>>>>     installation of package ?png? had non-zero exit status
>>>>> * installing *source* package 'jpeg' ...
>>>>> ** package 'jpeg' successfully unpacked and MD5 sums checked
>>>>> ** using staged installation
>>>>> bash.exe: warning: could not find /tmp, please create!
>>>>>     checking JPEG headers and libraries
>>>>> bash.exe: warning: could not find /tmp, please create!
>>>>> C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 179:
>>>>> make: command not found
>>>>> C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 180:
>>>>> make: command not found
>>>>> C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 181:
>>>>> make: command not found
>>>>> C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 182:
>>>>> make: command not found
>>>>> C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 183:
>>>>> make: command not found
>>>>> C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 319:
>>>>> make: command not found
>>>>> ./configure.win: line 17: make: command not found
>>>>> /lib/libjpeg.lib
>>>>>     found libjpeg in LOCAL_SOFT: /lib
>>>>>     seems ok, ready to go
>>>>> ** libs
>>>>> Warning in system(cmd) : 'make' not found
>>>>> ERROR: compilation failed for package 'jpeg'
>>>>> * removing 'C:/R_Libs/jpeg'
>>>>> Warning in install.packages :
>>>>>     installation of package ?jpeg? had non-zero exit status
>>>>> * installing *source* package 'timechange' ...
>>>>> ** package 'timechange' successfully unpacked and MD5 sums checked
>>>>> ** using staged installation
>>>>> ** libs
>>>>> Warning in system(cmd) : 'make' not found
>>>>> ERROR: compilation failed for package 'timechange'
>>>>> * removing 'C:/R_Libs/timechange'
>>>>> Warning in install.packages :
>>>>>     installation of package ?timechange? had non-zero exit status
>>>>> * installing *source* package 'maps' ...
>>>>> ** package 'maps' successfully unpacked and MD5 sums checked
>>>>> ** using staged installation
>>>>>
>>>>>      **********************************************
>>>>>      WARNING: this package has a configure script
>>>>>            It probably needs manual configuration
>>>>>      **********************************************
>>>>>
>>>>>
>>>>> ** libs
>>>>>     running 'src/Makefile.win' ...
>>>>> Warning in system(paste("make --no-print-directory", paste("-f",
>>>>> shQuote(makefiles),  :
>>>>>     'make' not found
>>>>> ERROR: compilation failed for package 'maps'
>>>>> * removing 'C:/R_Libs/maps'
>>>>> Warning in install.packages :
>>>>>     installation of package ?maps? had non-zero exit status
>>>>> ERROR: dependency 'lattice' is not available for package 'nlme'
>>>>> * removing 'C:/R_Libs/nlme'
>>>>> Warning in install.packages :
>>>>>     installation of package ?nlme? had non-zero exit status
>>>>> ERROR: dependency 'lattice' is not available for package 'Matrix'
>>>>> * removing 'C:/R_Libs/Matrix'
>>>>> Warning in install.packages :
>>>>>     installation of package ?Matrix? had non-zero exit status
>>>>> * installing *source* package 'cluster' ...
>>>>> ** package 'cluster' successfully unpacked and MD5 sums checked
>>>>> ** using staged installation
>>>>> ** libs
>>>>> Warning in system(cmd) : 'make' not found
>>>>> ERROR: compilation failed for package 'cluster'
>>>>> * removing 'C:/R_Libs/cluster'
>>>>> Warning in install.packages :
>>>>>     installation of package ?cluster? had non-zero exit status
>>>>> ERROR: dependency 'lattice' is not available for package 'hexbin'
>>>>> * removing 'C:/R_Libs/hexbin'
>>>>> Warning in install.packages :
>>>>>     installation of package ?hexbin? had non-zero exit status
>>>>> * installing *source* package 'lifecycle' ...
>>>>> ** package 'lifecycle' successfully unpacked and MD5 sums checked
>>>>> ** using staged installation
>>>>> ** R
>>>>> ** inst
>>>>> ** byte-compile and prepare package for lazy loading
>>>>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>>>> vI[[i]]) :
>>>>>     namespace 'rlang' 0.3.4 is being loaded, but >= 1.1.0 is required
>>>>> Calls: <Anonymous> ... withCallingHandlers -> loadNamespace ->
>>>>> namespaceImport -> loadNamespace
>>>>> Execution halted
>>>>> ERROR: lazy loading failed for package 'lifecycle'
>>>>> * removing 'C:/R_Libs/lifecycle'
>>>>> Warning in install.packages :
>>>>>     installation of package ?lifecycle? had non-zero exit status
>>>>> ERROR: dependencies 'deldir', 'RcppEigen' are not available for
>>> package
>>>> 'interp'
>>>>> * removing 'C:/R_Libs/interp'
>>>>> Warning in install.packages :
>>>>>     installation of package ?interp? had non-zero exit status
>>>>> ERROR: dependency 'timechange' is not available for package
>>> 'lubridate'
>>>>> * removing 'C:/R_Libs/lubridate'
>>>>> Warning in install.packages :
>>>>>     installation of package ?lubridate? had non-zero exit status
>>>>> ERROR: dependency 'maps' is not available for package 'mapproj'
>>>>> * removing 'C:/R_Libs/mapproj'
>>>>> Warning in install.packages :
>>>>>     installation of package ?mapproj? had non-zero exit status
>>>>> ERROR: dependencies 'nlme', 'Matrix' are not available for package
>>> 'mgcv'
>>>>> * removing 'C:/R_Libs/mgcv'
>>>>> Warning in install.packages :
>>>>>     installation of package ?mgcv? had non-zero exit status
>>>>> ERROR: dependency 'lifecycle' is not available for package 'vctrs'
>>>>> * removing 'C:/R_Libs/vctrs'
>>>>> Warning in install.packages :
>>>>>     installation of package ?vctrs? had non-zero exit status
>>>>> ERROR: dependencies 'lattice', 'png', 'jpeg', 'interp', 'MASS' are not
>>>>> available for package 'latticeExtra'
>>>>> * removing 'C:/R_Libs/latticeExtra'
>>>>> Warning in install.packages :
>>>>>     installation of package ?latticeExtra? had non-zero exit status
>>>>> ERROR: dependencies 'lifecycle', 'vctrs' are not available for package
>>>> 'pillar'
>>>>> * removing 'C:/R_Libs/pillar'
>>>>> Warning in install.packages :
>>>>>     installation of package ?pillar? had non-zero exit status
>>>>> ERROR: dependencies 'lifecycle', 'vctrs' are not available for package
>>>>> 'tidyselect'
>>>>> * removing 'C:/R_Libs/tidyselect'
>>>>> Warning in install.packages :
>>>>>     installation of package ?tidyselect? had non-zero exit status
>>>>> ERROR: dependencies 'lifecycle', 'vctrs' are not available for package
>>>> 'purrr'
>>>>> * removing 'C:/R_Libs/purrr'
>>>>> Warning in install.packages :
>>>>>     installation of package ?purrr? had non-zero exit status
>>>>> ERROR: dependencies 'lifecycle', 'pillar', 'vctrs' are not available
>>>>> for package 'tibble'
>>>>> * removing 'C:/R_Libs/tibble'
>>>>> Warning in install.packages :
>>>>>     installation of package ?tibble? had non-zero exit status
>>>>> ERROR: dependencies 'lifecycle', 'pillar', 'vctrs' are not available
>>>>> for package 'dplyr'
>>>>> * removing 'C:/R_Libs/dplyr'
>>>>> Warning in install.packages :
>>>>>     installation of package ?dplyr? had non-zero exit status
>>>>> ERROR: dependencies 'cluster', 'hexbin', 'lattice', 'latticeExtra',
>>>>> 'lubridate', 'mapproj', 'MASS', 'mgcv' are not available for package
>>>>> 'openair'
>>>>> * removing 'C:/R_Libs/openair'
>>>>> Warning in install.packages :
>>>>>     installation of package ?openair? had non-zero exit status
>>>>>
>>>>>
>>>>>
>>>> Hello,
>>>>
>>>> If you are on Windows, do you have rtools [1] installed?
>>>> Also, please address your question to R-Help [2], [3], not to me
>>> directly.
>>>>
>>>>
>>>> [1] https://cran.r-project.org/bin/windows/Rtools/
>>>> [2] r-help at r-project.org
>>>> [3] https://stat.ethz.ch/mailman/listinfo/r-help
>>>>
>>>> Hope this helps,
>>>>
>>>> Rui Barradas
>>>>
>>>>
>>>> --
>>>> Este e-mail foi analisado pelo software antiv?rus AVG para verificar a
>>>> presen?a de v?rus.
>>>> www.avg.com
>>>>
>>>
>>>
>>> --
>>> Best Regards
>>> Javad Bayat
>>> M.Sc. Environment Engineering
>>> Alternative Mail: bayat194 at yahoo.com
>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
> 

From pd@|gd @end|ng |rom gm@||@com  Mon Mar 18 15:16:46 2024
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Mon, 18 Mar 2024 15:16:46 +0100
Subject: [R] Problem when trying to install packages
In-Reply-To: <CANTxAm+VTm2KbfFJg5FFFPj8hDMiV0WaropUT5Y9D-5mjNNZqw@mail.gmail.com>
References: <CANTxAmL+E4pubS7KfVP+Rx0f6Cd_rZZAb1dpqxyr5E5FH3-R0Q@mail.gmail.com>
 <d757d942-cc7e-4a18-8876-da5085aa6e32@sapo.pt>
 <CANTxAm+VTm2KbfFJg5FFFPj8hDMiV0WaropUT5Y9D-5mjNNZqw@mail.gmail.com>
Message-ID: <C150F046-D741-42E3-A2FC-D19DCE646F5C@gmail.com>

2 things:

1) utils::install.packages(....) sometimes helps if the Rstudio version got wedged somehow.

2) You seem to be missing several Recommended packages (lattice, MASS, Matrix, nlme, cluster,....). Did you install R without those?


-pd

> On 16 Mar 2024, at 05:09 , javad bayat <j.bayat194 at gmail.com> wrote:
> 
> Dear Rui;
> Many thanks for your reply. I have installed Rtools (rtools43-5958-5975) on
> my PC and I have R version 4.3.3 and 4.3.2 to install. Also I have
> installed Rstudio through Anaconda Navigator.
> But I do not know how to use Rtools for installing the R packages. I would
> be more than happy if you help me.
> Sincerely yours
> 
> 
> 
>> Dear Rui;
>> I hope this email finds you well. I have a problem installing packages in
>> Rstudio and R software. When I try to install a package, the software
> tries
>> to download but after downloading, it gives some errors and does not work.
>> I would be more than happy if you please help me to solve this issue.
>> Warm regards.
>> 
>> 
>>> install.packages("openair", type = "source")Installing package into
> ?C:/R_Libs?
>> (as ?lib? is unspecified)Warning in install.packages :
>>   dependencies ?lattice?, ?MASS? are not availablealso installing the
>> dependencies ?deldir?, ?RcppEigen?, ?cli?, ?glue?, ?lifecycle?,
>> ?pillar?, ?rlang?, ?tibble?, ?tidyselect?, ?vctrs?, ?png?, ?jpeg?,
>> ?interp?, ?timechange?, ?maps?, ?nlme?, ?Matrix?, ?cluster?, ?dplyr?,
>> ?hexbin?, ?latticeExtra?, ?lubridate?, ?mapproj?, ?mgcv?, ?purrr?
>> trying URL '
> https://cran.rstudio.com/src/contrib/deldir_2.0-4.tar.gz'Content
>> type 'application/x-gzip' length 103621 bytes (101 KB)downloaded 101
>> KB
>> trying URL '
> https://cran.rstudio.com/src/contrib/RcppEigen_0.3.4.0.0.tar.gz'Content
>> type 'application/x-gzip' length 1765714 bytes (1.7 MB)downloaded 1.7
>> MB
>> trying URL 'https://cran.rstudio.com/src/contrib/cli_3.6.2.tar.gz'Content
>> type 'application/x-gzip' length 569771 bytes (556 KB)downloaded 556
>> KB
>> trying URL 'https://cran.rstudio.com/src/contrib/glue_1.7.0.tar.gz'Content
>> type 'application/x-gzip' length 105420 bytes (102 KB)downloaded 102
>> KB
>> trying URL '
> https://cran.rstudio.com/src/contrib/lifecycle_1.0.4.tar.gz'Content
>> type 'application/x-gzip' length 107656 bytes (105 KB)downloaded 105
>> KB
>> trying URL '
> https://cran.rstudio.com/src/contrib/pillar_1.9.0.tar.gz'Content
>> type 'application/x-gzip' length 444528 bytes (434 KB)downloaded 434
>> KB
>> trying URL '
> https://cran.rstudio.com/src/contrib/rlang_1.1.3.tar.gz'Content
>> type 'application/x-gzip' length 763765 bytes (745 KB)downloaded 745
>> KB
>> trying URL '
> https://cran.rstudio.com/src/contrib/tibble_3.2.1.tar.gz'Content
>> type 'application/x-gzip' length 565982 bytes (552 KB)downloaded 552
>> KB
>> trying URL '
> https://cran.rstudio.com/src/contrib/tidyselect_1.2.1.tar.gz'Content
>> type 'application/x-gzip' length 103591 bytes (101 KB)downloaded 101
>> KB
>> trying URL '
> https://cran.rstudio.com/src/contrib/vctrs_0.6.5.tar.gz'Content
>> type 'application/x-gzip' length 969066 bytes (946 KB)downloaded 946
>> KB
>> trying URL 'https://cran.rstudio.com/src/contrib/png_0.1-8.tar.gz'Content
>> type 'application/x-gzip' length 24880 bytes (24 KB)downloaded 24 KB
>> trying URL '
> https://cran.rstudio.com/src/contrib/jpeg_0.1-10.tar.gz'Content
>> type 'application/x-gzip' length 18667 bytes (18 KB)downloaded 18 KB
>> trying URL '
> https://cran.rstudio.com/src/contrib/interp_1.1-6.tar.gz'Content
>> type 'application/x-gzip' length 1112116 bytes (1.1 MB)downloaded 1.1
>> MB
>> trying URL '
> https://cran.rstudio.com/src/contrib/timechange_0.3.0.tar.gz'Content
>> type 'application/x-gzip' length 103439 bytes (101 KB)downloaded 101
>> KB
>> trying URL 'https://cran.rstudio.com/src/contrib/maps_3.4.2.tar.gz'Content
>> type 'application/x-gzip' length 2278051 bytes (2.2 MB)downloaded 2.2
>> MB
>> trying URL '
> https://cran.rstudio.com/src/contrib/nlme_3.1-164.tar.gz'Content
>> type 'application/x-gzip' length 836832 bytes (817 KB)downloaded 817
>> KB
>> trying URL '
> https://cran.rstudio.com/src/contrib/Matrix_1.6-5.tar.gz'Content
>> type 'application/x-gzip' length 2883851 bytes (2.8 MB)downloaded 2.8
>> MB
>> trying URL '
> https://cran.rstudio.com/src/contrib/cluster_2.1.6.tar.gz'Content
>> type 'application/x-gzip' length 369050 bytes (360 KB)downloaded 360
>> KB
>> trying URL '
> https://cran.rstudio.com/src/contrib/dplyr_1.1.4.tar.gz'Content
>> type 'application/x-gzip' length 1207521 bytes (1.2 MB)downloaded 1.2
>> MB
>> trying URL '
> https://cran.rstudio.com/src/contrib/hexbin_1.28.3.tar.gz'Content
>> type 'application/x-gzip' length 1199967 bytes (1.1 MB)downloaded 1.1
>> MB
>> trying URL '
> https://cran.rstudio.com/src/contrib/latticeExtra_0.6-30.tar.gz'Content
>> type 'application/x-gzip' length 1292936 bytes (1.2 MB)downloaded 1.2
>> MB
>> trying URL '
> https://cran.rstudio.com/src/contrib/lubridate_1.9.3.tar.gz'Content
>> type 'application/x-gzip' length 428043 bytes (418 KB)downloaded 418
>> KB
>> trying URL '
> https://cran.rstudio.com/src/contrib/mapproj_1.2.11.tar.gz'Content
>> type 'application/x-gzip' length 25544 bytes (24 KB)downloaded 24 KB
>> trying URL 'https://cran.rstudio.com/src/contrib/mgcv_1.9-1.tar.gz'Content
>> type 'application/x-gzip' length 1083217 bytes (1.0 MB)downloaded 1.0
>> MB
>> trying URL '
> https://cran.rstudio.com/src/contrib/purrr_1.0.2.tar.gz'Content
>> type 'application/x-gzip' length 220868 bytes (215 KB)downloaded 215
>> KB
>> trying URL '
> https://cran.rstudio.com/src/contrib/openair_2.18-2.tar.gz'Content
>> type 'application/x-gzip' length 1796725 bytes (1.7 MB)downloaded 1.7
> Hello,
> 
> If you are on Windows, do you have rtools [1] installed?
> 
> 
> 
> 
> On Thu, Mar 14, 2024 at 6:47?PM Rui Barradas <ruipbarradas at sapo.pt> wrote:
> 
>> ?s 04:12 de 13/03/2024, javad bayat escreveu:
>>> Dear Rui;
>>> I hope this email finds you well. I have a problem installing packages in
>>> Rstudio and R software. When I try to install a package, the software
>> tries
>>> to download but after downloading, it gives some errors and does not
>> work.
>>> I would be more than happy if you please help me to solve this issue.
>>> Warm regards.
>>> 
>>> 
>>>> install.packages("openair", type = "source")Installing package into
>> ?C:/R_Libs?
>>> (as ?lib? is unspecified)Warning in install.packages :
>>>   dependencies ?lattice?, ?MASS? are not availablealso installing the
>>> dependencies ?deldir?, ?RcppEigen?, ?cli?, ?glue?, ?lifecycle?,
>>> ?pillar?, ?rlang?, ?tibble?, ?tidyselect?, ?vctrs?, ?png?, ?jpeg?,
>>> ?interp?, ?timechange?, ?maps?, ?nlme?, ?Matrix?, ?cluster?, ?dplyr?,
>>> ?hexbin?, ?latticeExtra?, ?lubridate?, ?mapproj?, ?mgcv?, ?purrr?
>>> trying URL '
>> https://cran.rstudio.com/src/contrib/deldir_2.0-4.tar.gz'Content
>>> type 'application/x-gzip' length 103621 bytes (101 KB)downloaded 101
>>> KB
>>> trying URL '
>> https://cran.rstudio.com/src/contrib/RcppEigen_0.3.4.0.0.tar.gz'Content
>>> type 'application/x-gzip' length 1765714 bytes (1.7 MB)downloaded 1.7
>>> MB
>>> trying URL '
>> https://cran.rstudio.com/src/contrib/cli_3.6.2.tar.gz'Content
>>> type 'application/x-gzip' length 569771 bytes (556 KB)downloaded 556
>>> KB
>>> trying URL '
>> https://cran.rstudio.com/src/contrib/glue_1.7.0.tar.gz'Content
>>> type 'application/x-gzip' length 105420 bytes (102 KB)downloaded 102
>>> KB
>>> trying URL '
>> https://cran.rstudio.com/src/contrib/lifecycle_1.0.4.tar.gz'Content
>>> type 'application/x-gzip' length 107656 bytes (105 KB)downloaded 105
>>> KB
>>> trying URL '
>> https://cran.rstudio.com/src/contrib/pillar_1.9.0.tar.gz'Content
>>> type 'application/x-gzip' length 444528 bytes (434 KB)downloaded 434
>>> KB
>>> trying URL '
>> https://cran.rstudio.com/src/contrib/rlang_1.1.3.tar.gz'Content
>>> type 'application/x-gzip' length 763765 bytes (745 KB)downloaded 745
>>> KB
>>> trying URL '
>> https://cran.rstudio.com/src/contrib/tibble_3.2.1.tar.gz'Content
>>> type 'application/x-gzip' length 565982 bytes (552 KB)downloaded 552
>>> KB
>>> trying URL '
>> https://cran.rstudio.com/src/contrib/tidyselect_1.2.1.tar.gz'Content
>>> type 'application/x-gzip' length 103591 bytes (101 KB)downloaded 101
>>> KB
>>> trying URL '
>> https://cran.rstudio.com/src/contrib/vctrs_0.6.5.tar.gz'Content
>>> type 'application/x-gzip' length 969066 bytes (946 KB)downloaded 946
>>> KB
>>> trying URL '
>> https://cran.rstudio.com/src/contrib/png_0.1-8.tar.gz'Content
>>> type 'application/x-gzip' length 24880 bytes (24 KB)downloaded 24 KB
>>> trying URL '
>> https://cran.rstudio.com/src/contrib/jpeg_0.1-10.tar.gz'Content
>>> type 'application/x-gzip' length 18667 bytes (18 KB)downloaded 18 KB
>>> trying URL '
>> https://cran.rstudio.com/src/contrib/interp_1.1-6.tar.gz'Content
>>> type 'application/x-gzip' length 1112116 bytes (1.1 MB)downloaded 1.1
>>> MB
>>> trying URL '
>> https://cran.rstudio.com/src/contrib/timechange_0.3.0.tar.gz'Content
>>> type 'application/x-gzip' length 103439 bytes (101 KB)downloaded 101
>>> KB
>>> trying URL '
>> https://cran.rstudio.com/src/contrib/maps_3.4.2.tar.gz'Content
>>> type 'application/x-gzip' length 2278051 bytes (2.2 MB)downloaded 2.2
>>> MB
>>> trying URL '
>> https://cran.rstudio.com/src/contrib/nlme_3.1-164.tar.gz'Content
>>> type 'application/x-gzip' length 836832 bytes (817 KB)downloaded 817
>>> KB
>>> trying URL '
>> https://cran.rstudio.com/src/contrib/Matrix_1.6-5.tar.gz'Content
>>> type 'application/x-gzip' length 2883851 bytes (2.8 MB)downloaded 2.8
>>> MB
>>> trying URL '
>> https://cran.rstudio.com/src/contrib/cluster_2.1.6.tar.gz'Content
>>> type 'application/x-gzip' length 369050 bytes (360 KB)downloaded 360
>>> KB
>>> trying URL '
>> https://cran.rstudio.com/src/contrib/dplyr_1.1.4.tar.gz'Content
>>> type 'application/x-gzip' length 1207521 bytes (1.2 MB)downloaded 1.2
>>> MB
>>> trying URL '
>> https://cran.rstudio.com/src/contrib/hexbin_1.28.3.tar.gz'Content
>>> type 'application/x-gzip' length 1199967 bytes (1.1 MB)downloaded 1.1
>>> MB
>>> trying URL '
>> https://cran.rstudio.com/src/contrib/latticeExtra_0.6-30.tar.gz'Content
>>> type 'application/x-gzip' length 1292936 bytes (1.2 MB)downloaded 1.2
>>> MB
>>> trying URL '
>> https://cran.rstudio.com/src/contrib/lubridate_1.9.3.tar.gz'Content
>>> type 'application/x-gzip' length 428043 bytes (418 KB)downloaded 418
>>> KB
>>> trying URL '
>> https://cran.rstudio.com/src/contrib/mapproj_1.2.11.tar.gz'Content
>>> type 'application/x-gzip' length 25544 bytes (24 KB)downloaded 24 KB
>>> trying URL '
>> https://cran.rstudio.com/src/contrib/mgcv_1.9-1.tar.gz'Content
>>> type 'application/x-gzip' length 1083217 bytes (1.0 MB)downloaded 1.0
>>> MB
>>> trying URL '
>> https://cran.rstudio.com/src/contrib/purrr_1.0.2.tar.gz'Content
>>> type 'application/x-gzip' length 220868 bytes (215 KB)downloaded 215
>>> KB
>>> trying URL '
>> https://cran.rstudio.com/src/contrib/openair_2.18-2.tar.gz'Content
>>> type 'application/x-gzip' length 1796725 bytes (1.7 MB)downloaded 1.7
>>> MB
>>> * installing *source* package 'deldir' ...
>>> ** package 'deldir' successfully unpacked and MD5 sums checked
>>> ** using staged installation
>>> ** libs
>>> Warning in system(cmd) : 'make' not found
>>> ERROR: compilation failed for package 'deldir'
>>> * removing 'C:/R_Libs/deldir'
>>> Warning in install.packages :
>>>   installation of package ?deldir? had non-zero exit status
>>> * installing *source* package 'RcppEigen' ...
>>> ** package 'RcppEigen' successfully unpacked and MD5 sums checked
>>> ** using staged installation
>>> ** libs
>>> Warning in system(cmd) : 'make' not found
>>> ERROR: compilation failed for package 'RcppEigen'
>>> * removing 'C:/R_Libs/RcppEigen'
>>> Warning in install.packages :
>>>   installation of package ?RcppEigen? had non-zero exit status
>>> * installing *source* package 'cli' ...
>>> ** package 'cli' successfully unpacked and MD5 sums checked
>>> ** using staged installation
>>> ** libs
>>> Warning in system(cmd) : 'make' not found
>>> ERROR: compilation failed for package 'cli'
>>> * removing 'C:/R_Libs/cli'
>>> Warning in install.packages :
>>>   installation of package ?cli? had non-zero exit status
>>> * installing *source* package 'glue' ...
>>> ** package 'glue' successfully unpacked and MD5 sums checked
>>> ** using staged installation
>>> ** libs
>>> Warning in system(cmd) : 'make' not found
>>> ERROR: compilation failed for package 'glue'
>>> * removing 'C:/R_Libs/glue'
>>> Warning in install.packages :
>>>   installation of package ?glue? had non-zero exit status
>>> * installing *source* package 'rlang' ...
>>> ** package 'rlang' successfully unpacked and MD5 sums checked
>>> ** using staged installation
>>> ** libs
>>> Warning in system(cmd) : 'make' not found
>>> ERROR: compilation failed for package 'rlang'
>>> * removing 'C:/R_Libs/rlang'
>>> Warning in install.packages :
>>>   installation of package ?rlang? had non-zero exit status
>>> * installing *source* package 'png' ...
>>> ** package 'png' successfully unpacked and MD5 sums checked
>>> ** using staged installation
>>> bash.exe: warning: could not find /tmp, please create!
>>>   checking PNG headers and libraries
>>> bash.exe: warning: could not find /tmp, please create!
>>> C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 179:
>>> make: command not found
>>> C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 180:
>>> make: command not found
>>> C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 181:
>>> make: command not found
>>> C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 182:
>>> make: command not found
>>> C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 183:
>>> make: command not found
>>> C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 319:
>>> make: command not found
>>> ./configure.win: line 17: make: command not found
>>> /lib/libpng.lib
>>>   found libpng in LOCAL_SOFT: /lib
>>>   seems ok, ready to go
>>> ** libs
>>> Warning in system(cmd) : 'make' not found
>>> ERROR: compilation failed for package 'png'
>>> * removing 'C:/R_Libs/png'
>>> Warning in install.packages :
>>>   installation of package ?png? had non-zero exit status
>>> * installing *source* package 'jpeg' ...
>>> ** package 'jpeg' successfully unpacked and MD5 sums checked
>>> ** using staged installation
>>> bash.exe: warning: could not find /tmp, please create!
>>>   checking JPEG headers and libraries
>>> bash.exe: warning: could not find /tmp, please create!
>>> C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 179:
>>> make: command not found
>>> C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 180:
>>> make: command not found
>>> C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 181:
>>> make: command not found
>>> C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 182:
>>> make: command not found
>>> C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 183:
>>> make: command not found
>>> C:\Users\admin\ANACON~1\envs\rstudio\lib\R/bin/config.sh: line 319:
>>> make: command not found
>>> ./configure.win: line 17: make: command not found
>>> /lib/libjpeg.lib
>>>   found libjpeg in LOCAL_SOFT: /lib
>>>   seems ok, ready to go
>>> ** libs
>>> Warning in system(cmd) : 'make' not found
>>> ERROR: compilation failed for package 'jpeg'
>>> * removing 'C:/R_Libs/jpeg'
>>> Warning in install.packages :
>>>   installation of package ?jpeg? had non-zero exit status
>>> * installing *source* package 'timechange' ...
>>> ** package 'timechange' successfully unpacked and MD5 sums checked
>>> ** using staged installation
>>> ** libs
>>> Warning in system(cmd) : 'make' not found
>>> ERROR: compilation failed for package 'timechange'
>>> * removing 'C:/R_Libs/timechange'
>>> Warning in install.packages :
>>>   installation of package ?timechange? had non-zero exit status
>>> * installing *source* package 'maps' ...
>>> ** package 'maps' successfully unpacked and MD5 sums checked
>>> ** using staged installation
>>> 
>>>    **********************************************
>>>    WARNING: this package has a configure script
>>>          It probably needs manual configuration
>>>    **********************************************
>>> 
>>> 
>>> ** libs
>>>   running 'src/Makefile.win' ...
>>> Warning in system(paste("make --no-print-directory", paste("-f",
>>> shQuote(makefiles),  :
>>>   'make' not found
>>> ERROR: compilation failed for package 'maps'
>>> * removing 'C:/R_Libs/maps'
>>> Warning in install.packages :
>>>   installation of package ?maps? had non-zero exit status
>>> ERROR: dependency 'lattice' is not available for package 'nlme'
>>> * removing 'C:/R_Libs/nlme'
>>> Warning in install.packages :
>>>   installation of package ?nlme? had non-zero exit status
>>> ERROR: dependency 'lattice' is not available for package 'Matrix'
>>> * removing 'C:/R_Libs/Matrix'
>>> Warning in install.packages :
>>>   installation of package ?Matrix? had non-zero exit status
>>> * installing *source* package 'cluster' ...
>>> ** package 'cluster' successfully unpacked and MD5 sums checked
>>> ** using staged installation
>>> ** libs
>>> Warning in system(cmd) : 'make' not found
>>> ERROR: compilation failed for package 'cluster'
>>> * removing 'C:/R_Libs/cluster'
>>> Warning in install.packages :
>>>   installation of package ?cluster? had non-zero exit status
>>> ERROR: dependency 'lattice' is not available for package 'hexbin'
>>> * removing 'C:/R_Libs/hexbin'
>>> Warning in install.packages :
>>>   installation of package ?hexbin? had non-zero exit status
>>> * installing *source* package 'lifecycle' ...
>>> ** package 'lifecycle' successfully unpacked and MD5 sums checked
>>> ** using staged installation
>>> ** R
>>> ** inst
>>> ** byte-compile and prepare package for lazy loading
>>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>> vI[[i]]) :
>>>   namespace 'rlang' 0.3.4 is being loaded, but >= 1.1.0 is required
>>> Calls: <Anonymous> ... withCallingHandlers -> loadNamespace ->
>>> namespaceImport -> loadNamespace
>>> Execution halted
>>> ERROR: lazy loading failed for package 'lifecycle'
>>> * removing 'C:/R_Libs/lifecycle'
>>> Warning in install.packages :
>>>   installation of package ?lifecycle? had non-zero exit status
>>> ERROR: dependencies 'deldir', 'RcppEigen' are not available for package
>> 'interp'
>>> * removing 'C:/R_Libs/interp'
>>> Warning in install.packages :
>>>   installation of package ?interp? had non-zero exit status
>>> ERROR: dependency 'timechange' is not available for package 'lubridate'
>>> * removing 'C:/R_Libs/lubridate'
>>> Warning in install.packages :
>>>   installation of package ?lubridate? had non-zero exit status
>>> ERROR: dependency 'maps' is not available for package 'mapproj'
>>> * removing 'C:/R_Libs/mapproj'
>>> Warning in install.packages :
>>>   installation of package ?mapproj? had non-zero exit status
>>> ERROR: dependencies 'nlme', 'Matrix' are not available for package 'mgcv'
>>> * removing 'C:/R_Libs/mgcv'
>>> Warning in install.packages :
>>>   installation of package ?mgcv? had non-zero exit status
>>> ERROR: dependency 'lifecycle' is not available for package 'vctrs'
>>> * removing 'C:/R_Libs/vctrs'
>>> Warning in install.packages :
>>>   installation of package ?vctrs? had non-zero exit status
>>> ERROR: dependencies 'lattice', 'png', 'jpeg', 'interp', 'MASS' are not
>>> available for package 'latticeExtra'
>>> * removing 'C:/R_Libs/latticeExtra'
>>> Warning in install.packages :
>>>   installation of package ?latticeExtra? had non-zero exit status
>>> ERROR: dependencies 'lifecycle', 'vctrs' are not available for package
>> 'pillar'
>>> * removing 'C:/R_Libs/pillar'
>>> Warning in install.packages :
>>>   installation of package ?pillar? had non-zero exit status
>>> ERROR: dependencies 'lifecycle', 'vctrs' are not available for package
>>> 'tidyselect'
>>> * removing 'C:/R_Libs/tidyselect'
>>> Warning in install.packages :
>>>   installation of package ?tidyselect? had non-zero exit status
>>> ERROR: dependencies 'lifecycle', 'vctrs' are not available for package
>> 'purrr'
>>> * removing 'C:/R_Libs/purrr'
>>> Warning in install.packages :
>>>   installation of package ?purrr? had non-zero exit status
>>> ERROR: dependencies 'lifecycle', 'pillar', 'vctrs' are not available
>>> for package 'tibble'
>>> * removing 'C:/R_Libs/tibble'
>>> Warning in install.packages :
>>>   installation of package ?tibble? had non-zero exit status
>>> ERROR: dependencies 'lifecycle', 'pillar', 'vctrs' are not available
>>> for package 'dplyr'
>>> * removing 'C:/R_Libs/dplyr'
>>> Warning in install.packages :
>>>   installation of package ?dplyr? had non-zero exit status
>>> ERROR: dependencies 'cluster', 'hexbin', 'lattice', 'latticeExtra',
>>> 'lubridate', 'mapproj', 'MASS', 'mgcv' are not available for package
>>> 'openair'
>>> * removing 'C:/R_Libs/openair'
>>> Warning in install.packages :
>>>   installation of package ?openair? had non-zero exit status
>>> 
>>> 
>>> 
>> Hello,
>> 
>> If you are on Windows, do you have rtools [1] installed?
>> Also, please address your question to R-Help [2], [3], not to me directly.
>> 
>> 
>> [1] https://cran.r-project.org/bin/windows/Rtools/
>> [2] r-help at r-project.org
>> [3] https://stat.ethz.ch/mailman/listinfo/r-help
>> 
>> Hope this helps,
>> 
>> Rui Barradas
>> 
>> 
>> --
>> Este e-mail foi analisado pelo software antiv?rus AVG para verificar a
>> presen?a de v?rus.
>> www.avg.com
>> 
> 
> 
> -- 
> Best Regards
> Javad Bayat
> M.Sc. Environment Engineering
> Alternative Mail: bayat194 at yahoo.com
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From r-@nnounce @end|ng |rom r-project@org  Mon Mar 18 14:01:49 2024
From: r-@nnounce @end|ng |rom r-project@org (Peter Dalgaard via R-announce)
Date: Mon, 18 Mar 2024 13:01:49 +0000
Subject: [R] [Rd] R 4.4.0 scheduled for April 24
Message-ID: <8316F3E9-6465-4FA5-BE2F-019E8C2B45FA@cbs.dk>

Full schedule is available on developer.r-project.org (pending update from SVN).

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com

_______________________________________________
R-announce at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-announce


From JH@rm@e @end|ng |rom roku@com  Wed Mar 20 17:02:27 2024
From: JH@rm@e @end|ng |rom roku@com (Jorgen Harmse)
Date: Wed, 20 Mar 2024 16:02:27 +0000
Subject: [R] Building Packages.
Message-ID: <BL0PR01MB443476A7058EAA65165C9587DC332@BL0PR01MB4434.prod.exchangelabs.com>

I have a source file with oxygen-style comments (and description & licence files), and I?m trying to build a package. oxygen & devtools seem to work, and the tarball exists, but install.packages balks. Does anyone know what?s happening?

Regards,
Jorgen Harmse.


> roxygenise(package.dir,clean=TRUE)

Setting `RoxygenNote` to "7.3.1"

? roxygen2 requires "Encoding: UTF-8"

? Current encoding is NA

? Loading jhBase

Warning: ?? Conflicts ?????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????? jhBase conflicts

??

? `andNotNA` masks `jhBase::andNotNA()`.

? `array.named` masks `jhBase::array.named()`.

? `arrayInd.inv` masks `jhBase::arrayInd.inv()`.

  ? and more.

? Did you accidentally source a file rather than using `load_all()`?

  Run `rm(list = c("andNotNA", "array.named", "arrayInd.inv", "as.POSIXct_orig", "build.package", "colon", "file.info", "file.path", "files.removeDup", "fprintf", "grepi", "grepiv", "grepv", "grepvi", "ifelses", "index", "load.env", "load.list", "matrix.sq", "merges", "mm", "orNA", "pattern.NA", "plots", "printf",

  "save.env", "subs", "symmDiff", "vector.named", "width"))` to remove the conflicts.

Writing NAMESPACE

Writing printf.Rd

Writing width.Rd

Writing pattern.NA.Rd

Writing ddply.ns.Rd

Writing as.POSIXct_orig.Rd

Writing mm.Rd

Writing orNA.Rd

Writing merges.Rd

Writing index.Rd

Writing save.env.Rd

Writing build.package.Rd

Writing plots.Rd

Writing ifelses.Rd

Writing subs.Rd

Writing array.named.Rd

Writing grepv.Rd

Writing symmDiff.Rd

Writing file.info.Rd

Writing file.path.Rd

Writing files.removeDup.Rd

Writing arrayInd.inv.Rd

> tar <- devtools::build(package.dir)

?? R CMD build ????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????

?  checking for file ?/Users/jharmse/Library/CloudStorage/OneDrive-RokuInc/jhBase/DESCRIPTION? ...

?  preparing ?jhBase?:

?  checking DESCRIPTION meta-information ...

?  checking for LF line-endings in source and make files and shell scripts

?  checking for empty or unneeded directories

?  building ?jhBase_1.0.1.tar.gz?



> file.info(tar)

                                                                          size isdir mode               mtime               ctime               atime uid gid   uname grname

/Users/jharmse/Library/CloudStorage/OneDrive-RokuInc/jhBase_1.0.1.tar.gz 14030 FALSE  644 2024-03-20 10:49:10 2024-03-20 10:49:10 2024-03-20 10:49:10 503  20 jharmse  staff

> install.packages(tar,type='source',repos=NULL)

Error in library(jhBase) : there is no package called ?jhBase?

Execution halted

Warning in install.packages(tar, type = "source", repos = NULL) :

  installation of package ?/Users/jharmse/Library/CloudStorage/OneDrive-RokuInc/jhBase_1.0.1.tar.gz? had non-zero exit status


	[[alternative HTML version deleted]]


From |kry|ov @end|ng |rom d|@root@org  Wed Mar 20 17:13:53 2024
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Wed, 20 Mar 2024 19:13:53 +0300
Subject: [R] Building Packages.
In-Reply-To: <BL0PR01MB443476A7058EAA65165C9587DC332@BL0PR01MB4434.prod.exchangelabs.com>
References: <BL0PR01MB443476A7058EAA65165C9587DC332@BL0PR01MB4434.prod.exchangelabs.com>
Message-ID: <20240320191353.3d6b36ae@arachnoid>

? Wed, 20 Mar 2024 16:02:27 +0000
Jorgen Harmse via R-help <r-help at r-project.org> ?????:

> > install.packages(tar,type='source',repos=NULL)  
> 
> Error in library(jhBase) : there is no package called ?jhBase?
> 
> Execution halted
> 
> Warning in install.packages(tar, type = "source", repos = NULL) :
> 
>   installation of package
> ?/Users/jharmse/Library/CloudStorage/OneDrive-RokuInc/jhBase_1.0.1.tar.gz?
> had non-zero exit status

Using RStudio? It happens to override install.packages with a function
that doesn't quite handle file paths. Try utils::install.packages(tar,
type = "source", repos = NULL).

-- 
Best regards,
Ivan


From bbo|ker @end|ng |rom gm@||@com  Wed Mar 20 17:37:39 2024
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Wed, 20 Mar 2024 12:37:39 -0400
Subject: [R] Building Packages.
In-Reply-To: <20240320191353.3d6b36ae@arachnoid>
References: <BL0PR01MB443476A7058EAA65165C9587DC332@BL0PR01MB4434.prod.exchangelabs.com>
 <20240320191353.3d6b36ae@arachnoid>
Message-ID: <1680f328-ce34-4276-8be3-d402b372ef2b@gmail.com>

   Ivan, can you give more detail on this? I've heard this issue 
mentioned, but when I open RStudio and run find("install.packages") it 
returns "utils::install.packages", and running dump() from within 
RStudio console and from an external "R --vanilla" gives identical results.

   I thought at one point this might only refer to the GUI 
package-installation interface, but you seem to be saying it's the 
install.packages() function as well.

   Running an up-to-date RStudio on Linux, FWIW -- maybe weirdness only 
happens on other OSs?

    Ben Bolker

On 2024-03-20 12:13 p.m., Ivan Krylov via R-help wrote:
> ? Wed, 20 Mar 2024 16:02:27 +0000
> Jorgen Harmse via R-help <r-help at r-project.org> ?????:
> 
>>> install.packages(tar,type='source',repos=NULL)
>>
>> Error in library(jhBase) : there is no package called ?jhBase?
>>
>> Execution halted
>>
>> Warning in install.packages(tar, type = "source", repos = NULL) :
>>
>>    installation of package
>> ?/Users/jharmse/Library/CloudStorage/OneDrive-RokuInc/jhBase_1.0.1.tar.gz?
>> had non-zero exit status
> 
> Using RStudio? It happens to override install.packages with a function
> that doesn't quite handle file paths. Try utils::install.packages(tar,
> type = "source", repos = NULL).
>


From JH@rm@e @end|ng |rom roku@com  Wed Mar 20 18:00:34 2024
From: JH@rm@e @end|ng |rom roku@com (Jorgen Harmse)
Date: Wed, 20 Mar 2024 17:00:34 +0000
Subject: [R] Building Packages.
In-Reply-To: <20240320191353.3d6b36ae@arachnoid>
References: <BL0PR01MB443476A7058EAA65165C9587DC332@BL0PR01MB4434.prod.exchangelabs.com>
 <20240320191353.3d6b36ae@arachnoid>
Message-ID: <BL0PR01MB44343DF316C3B6875C468898DC332@BL0PR01MB4434.prod.exchangelabs.com>

Thank you, but I think I was already using utils.

Regards,
Jorgen.


> environment(install.packages)

<environment: namespace:utils>

> utils::install.packages('/Users/jharmse/Library/CloudStorage/OneDrive-RokuInc/jhBase_1.0.1.tar.gz',type='source',repos=NULL)

Error in library(jhBase) : there is no package called ?jhBase?

Execution halted

Warning in utils::install.packages("/Users/jharmse/Library/CloudStorage/OneDrive-RokuInc/jhBase_1.0.1.tar.gz",  :

  installation of package ?/Users/jharmse/Library/CloudStorage/OneDrive-RokuInc/jhBase_1.0.1.tar.gz? had non-zero exit status


From: Ivan Krylov <ikrylov at disroot.org>
Date: Wednesday, March 20, 2024 at 11:14
To: Jorgen Harmse via R-help <r-help at r-project.org>
Cc: Jorgen Harmse <JHarmse at roku.com>
Subject: [EXTERNAL] Re: [R] Building Packages.
? Wed, 20 Mar 2024 16:02:27 +0000
Jorgen Harmse via R-help <r-help at r-project.org> ?????:

> > install.packages(tar,type='source',repos=NULL)
>
> Error in library(jhBase) : there is no package called ?jhBase?
>
> Execution halted
>
> Warning in install.packages(tar, type = "source", repos = NULL) :
>
>   installation of package
> ?/Users/jharmse/Library/CloudStorage/OneDrive-RokuInc/jhBase_1.0.1.tar.gz?
> had non-zero exit status

Using RStudio? It happens to override install.packages with a function
that doesn't quite handle file paths. Try utils::install.packages(tar,
type = "source", repos = NULL).

--
Best regards,
Ivan

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Mar 20 18:07:38 2024
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 20 Mar 2024 13:07:38 -0400
Subject: [R] Building Packages.
In-Reply-To: <1680f328-ce34-4276-8be3-d402b372ef2b@gmail.com>
References: <BL0PR01MB443476A7058EAA65165C9587DC332@BL0PR01MB4434.prod.exchangelabs.com>
 <20240320191353.3d6b36ae@arachnoid>
 <1680f328-ce34-4276-8be3-d402b372ef2b@gmail.com>
Message-ID: <4e4fd9a6-b68e-48a3-96c8-4d63d2846783@gmail.com>

On 20/03/2024 12:37 p.m., Ben Bolker wrote:
>     Ivan, can you give more detail on this? I've heard this issue
> mentioned, but when I open RStudio and run find("install.packages") it
> returns "utils::install.packages", and running dump() from within
> RStudio console and from an external "R --vanilla" gives identical results.
> 
>     I thought at one point this might only refer to the GUI
> package-installation interface, but you seem to be saying it's the
> install.packages() function as well.
> 
>     Running an up-to-date RStudio on Linux, FWIW -- maybe weirdness only
> happens on other OSs?

On MacOS, I see this:

 > install.packages
function (...)
.rs.callAs(name, hook, original, ...)
<environment: 0x7fa7c72a6268>

I get the same results as you from find().  I'm not sure what RStudio is 
doing to give a different value for the function than what find() sees.

Duncan Murdoch

> 
>      Ben Bolker
> 
> On 2024-03-20 12:13 p.m., Ivan Krylov via R-help wrote:
>> ? Wed, 20 Mar 2024 16:02:27 +0000
>> Jorgen Harmse via R-help <r-help at r-project.org> ?????:
>>
>>>> install.packages(tar,type='source',repos=NULL)
>>>
>>> Error in library(jhBase) : there is no package called ?jhBase?
>>>
>>> Execution halted
>>>
>>> Warning in install.packages(tar, type = "source", repos = NULL) :
>>>
>>>     installation of package
>>> ?/Users/jharmse/Library/CloudStorage/OneDrive-RokuInc/jhBase_1.0.1.tar.gz?
>>> had non-zero exit status
>>
>> Using RStudio? It happens to override install.packages with a function
>> that doesn't quite handle file paths. Try utils::install.packages(tar,
>> type = "source", repos = NULL).
>>
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Mar 20 18:09:45 2024
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 20 Mar 2024 13:09:45 -0400
Subject: [R] Building Packages.
In-Reply-To: <BL0PR01MB44343DF316C3B6875C468898DC332@BL0PR01MB4434.prod.exchangelabs.com>
References: <BL0PR01MB443476A7058EAA65165C9587DC332@BL0PR01MB4434.prod.exchangelabs.com>
 <20240320191353.3d6b36ae@arachnoid>
 <BL0PR01MB44343DF316C3B6875C468898DC332@BL0PR01MB4434.prod.exchangelabs.com>
Message-ID: <f8a8629d-c8f8-40de-84c7-8db37b251f1f@gmail.com>

Is the source for your package online somewhere?

Duncan Murdoch

On 20/03/2024 1:00 p.m., Jorgen Harmse via R-help wrote:
> Thank you, but I think I was already using utils.
> 
> Regards,
> Jorgen.
> 
> 
>> environment(install.packages)
> 
> <environment: namespace:utils>
> 
>> utils::install.packages('/Users/jharmse/Library/CloudStorage/OneDrive-RokuInc/jhBase_1.0.1.tar.gz',type='source',repos=NULL)
> 
> Error in library(jhBase) : there is no package called ?jhBase?
> 
> Execution halted
> 
> Warning in utils::install.packages("/Users/jharmse/Library/CloudStorage/OneDrive-RokuInc/jhBase_1.0.1.tar.gz",  :
> 
>    installation of package ?/Users/jharmse/Library/CloudStorage/OneDrive-RokuInc/jhBase_1.0.1.tar.gz? had non-zero exit status
> 
> 
> From: Ivan Krylov <ikrylov at disroot.org>
> Date: Wednesday, March 20, 2024 at 11:14
> To: Jorgen Harmse via R-help <r-help at r-project.org>
> Cc: Jorgen Harmse <JHarmse at roku.com>
> Subject: [EXTERNAL] Re: [R] Building Packages.
> ? Wed, 20 Mar 2024 16:02:27 +0000
> Jorgen Harmse via R-help <r-help at r-project.org> ?????:
> 
>>> install.packages(tar,type='source',repos=NULL)
>>
>> Error in library(jhBase) : there is no package called ?jhBase?
>>
>> Execution halted
>>
>> Warning in install.packages(tar, type = "source", repos = NULL) :
>>
>>    installation of package
>> ?/Users/jharmse/Library/CloudStorage/OneDrive-RokuInc/jhBase_1.0.1.tar.gz?
>> had non-zero exit status
> 
> Using RStudio? It happens to override install.packages with a function
> that doesn't quite handle file paths. Try utils::install.packages(tar,
> type = "source", repos = NULL).
> 
> --
> Best regards,
> Ivan
> 
> 	[[alternative HTML version deleted]]
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From |kry|ov @end|ng |rom d|@root@org  Wed Mar 20 18:19:10 2024
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Wed, 20 Mar 2024 20:19:10 +0300
Subject: [R] Building Packages.
In-Reply-To: <1680f328-ce34-4276-8be3-d402b372ef2b@gmail.com>
References: <BL0PR01MB443476A7058EAA65165C9587DC332@BL0PR01MB4434.prod.exchangelabs.com>
 <20240320191353.3d6b36ae@arachnoid>
 <1680f328-ce34-4276-8be3-d402b372ef2b@gmail.com>
Message-ID: <20240320201910.2b50ac27@arachnoid>

? Wed, 20 Mar 2024 12:37:39 -0400
Ben Bolker <bbolker at gmail.com> ?????:

> Ivan, can you give more detail on this? I've heard this issue 
> mentioned, but when I open RStudio and run find("install.packages")
> it returns "utils::install.packages", and running dump() from within 
> RStudio console and from an external "R --vanilla" gives identical
> results.

Has this been fixed in a recent RStudio version? This is what I get on
a Windows virtual machine:

> install.packages
function (...) 
.rs.callAs(name, hook, original, ...)
<environment: 0x000000000c49b740>
> install.packages(file.choose())
Installing package into ?C:/Users/User/AppData/Local/R/win-library/4.3?
(as ?lib? is unspecified)
Warning in install.packages :
  package ?C:\path\to\mypackage_1.0.tar.gz? is not available
for this version of R

A version of this package for your version of R might be available
elsewhere, see the ideas at
https://cran.r-project.org/doc/manuals/r-patched/R-admin.html#Installing-packages
> utils::install.packages(file.choose())
Installing package into ?C:/Users/User/AppData/Local/R/win-library/4.3?
(as ?lib? is unspecified)
inferring 'repos = NULL' from 'pkgs'
* installing *source* package 'mypackage' ...
** using staged installation
** libs

-- 
Best regards,
Ivan


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Mar 20 18:20:12 2024
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 20 Mar 2024 13:20:12 -0400
Subject: [R] Building Packages.
In-Reply-To: <4e4fd9a6-b68e-48a3-96c8-4d63d2846783@gmail.com>
References: <BL0PR01MB443476A7058EAA65165C9587DC332@BL0PR01MB4434.prod.exchangelabs.com>
 <20240320191353.3d6b36ae@arachnoid>
 <1680f328-ce34-4276-8be3-d402b372ef2b@gmail.com>
 <4e4fd9a6-b68e-48a3-96c8-4d63d2846783@gmail.com>
Message-ID: <0aae7f84-6539-47e4-b222-bae7f39980a2@gmail.com>

On 20/03/2024 1:07 p.m., Duncan Murdoch wrote:
> On 20/03/2024 12:37 p.m., Ben Bolker wrote:
>>      Ivan, can you give more detail on this? I've heard this issue
>> mentioned, but when I open RStudio and run find("install.packages") it
>> returns "utils::install.packages", and running dump() from within
>> RStudio console and from an external "R --vanilla" gives identical results.
>>
>>      I thought at one point this might only refer to the GUI
>> package-installation interface, but you seem to be saying it's the
>> install.packages() function as well.
>>
>>      Running an up-to-date RStudio on Linux, FWIW -- maybe weirdness only
>> happens on other OSs?
> 
> On MacOS, I see this:
> 
>   > install.packages
> function (...)
> .rs.callAs(name, hook, original, ...)
> <environment: 0x7fa7c72a6268>
> 
> I get the same results as you from find().  I'm not sure what RStudio is
> doing to give a different value for the function than what find() sees.

Turns out that RStudio replaces the install.packages object in the utils 
package.

Duncan Murdoch

> 
> Duncan Murdoch
> 
>>
>>       Ben Bolker
>>
>> On 2024-03-20 12:13 p.m., Ivan Krylov via R-help wrote:
>>> ? Wed, 20 Mar 2024 16:02:27 +0000
>>> Jorgen Harmse via R-help <r-help at r-project.org> ?????:
>>>
>>>>> install.packages(tar,type='source',repos=NULL)
>>>>
>>>> Error in library(jhBase) : there is no package called ?jhBase?
>>>>
>>>> Execution halted
>>>>
>>>> Warning in install.packages(tar, type = "source", repos = NULL) :
>>>>
>>>>      installation of package
>>>> ?/Users/jharmse/Library/CloudStorage/OneDrive-RokuInc/jhBase_1.0.1.tar.gz?
>>>> had non-zero exit status
>>>
>>> Using RStudio? It happens to override install.packages with a function
>>> that doesn't quite handle file paths. Try utils::install.packages(tar,
>>> type = "source", repos = NULL).
>>>
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>


From bbo|ker @end|ng |rom gm@||@com  Wed Mar 20 18:25:33 2024
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Wed, 20 Mar 2024 13:25:33 -0400
Subject: [R] Building Packages.
In-Reply-To: <0aae7f84-6539-47e4-b222-bae7f39980a2@gmail.com>
References: <BL0PR01MB443476A7058EAA65165C9587DC332@BL0PR01MB4434.prod.exchangelabs.com>
 <20240320191353.3d6b36ae@arachnoid>
 <1680f328-ce34-4276-8be3-d402b372ef2b@gmail.com>
 <4e4fd9a6-b68e-48a3-96c8-4d63d2846783@gmail.com>
 <0aae7f84-6539-47e4-b222-bae7f39980a2@gmail.com>
Message-ID: <4e1b1275-935e-4d4a-bd5f-8a8d0f882bb4@gmail.com>

   Hmm, looks platform-specific.  Under Linux both RStudio and external 
R console return

a0b52513622c41c11e3ef57c7a485767

for digest::digest(install.packages)

On 2024-03-20 1:20 p.m., Duncan Murdoch wrote:
> On 20/03/2024 1:07 p.m., Duncan Murdoch wrote:
>> On 20/03/2024 12:37 p.m., Ben Bolker wrote:
>>> ???? Ivan, can you give more detail on this? I've heard this issue
>>> mentioned, but when I open RStudio and run find("install.packages") it
>>> returns "utils::install.packages", and running dump() from within
>>> RStudio console and from an external "R --vanilla" gives identical 
>>> results.
>>>
>>> ???? I thought at one point this might only refer to the GUI
>>> package-installation interface, but you seem to be saying it's the
>>> install.packages() function as well.
>>>
>>> ???? Running an up-to-date RStudio on Linux, FWIW -- maybe weirdness 
>>> only
>>> happens on other OSs?
>>
>> On MacOS, I see this:
>>
>> ? > install.packages
>> function (...)
>> .rs.callAs(name, hook, original, ...)
>> <environment: 0x7fa7c72a6268>
>>
>> I get the same results as you from find().? I'm not sure what RStudio is
>> doing to give a different value for the function than what find() sees.
> 
> Turns out that RStudio replaces the install.packages object in the utils 
> package.
> 
> Duncan Murdoch
> 
>>
>> Duncan Murdoch
>>
>>>
>>> ????? Ben Bolker
>>>
>>> On 2024-03-20 12:13 p.m., Ivan Krylov via R-help wrote:
>>>> ? Wed, 20 Mar 2024 16:02:27 +0000
>>>> Jorgen Harmse via R-help <r-help at r-project.org> ?????:
>>>>
>>>>>> install.packages(tar,type='source',repos=NULL)
>>>>>
>>>>> Error in library(jhBase) : there is no package called ?jhBase?
>>>>>
>>>>> Execution halted
>>>>>
>>>>> Warning in install.packages(tar, type = "source", repos = NULL) :
>>>>>
>>>>> ???? installation of package
>>>>> ?/Users/jharmse/Library/CloudStorage/OneDrive-RokuInc/jhBase_1.0.1.tar.gz?
>>>>> had non-zero exit status
>>>>
>>>> Using RStudio? It happens to override install.packages with a function
>>>> that doesn't quite handle file paths. Try utils::install.packages(tar,
>>>> type = "source", repos = NULL).
>>>>
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide 
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>


From sibyiie@stoeckii m@iii@g oii gmx@ch  Wed Mar 20 19:28:42 2024
From: sibyiie@stoeckii m@iii@g oii gmx@ch (sibyiie@stoeckii m@iii@g oii gmx@ch)
Date: Wed, 20 Mar 2024 19:28:42 +0100
Subject: [R] geom_edge & color
Message-ID: <022201da7af4$704240d0$50c6c270$@gmx.ch>

Dear community

I am using ggraph to plot a network analysis. See part 2 in the working
example.
Besides different colors for different groups of nodes:
--> geom_node_point(aes(size = V(network)$hub_score*200, color=
as.factor(V(network)$community)))
I additionally want to consider different colors for different edge groups
The grouping is defined in the edge_list$relationship: negative relationship
= red and positive relationship = darkblue. The code is working in the way
that the  groups are separated by two colors. However, the code uses not the
assigned colors. Does anyone have any idea how to adapt the code?
--> geom_edge_arc(curvature=0.3, aes(width=(E(network)$weight/10),
color=c("darkblue", "red")[as.factor(edge_list$relationship)], alpha=0.5)) +

Kind regards
Sibylle




Working example

library(circlize)
library(ggplot2)
library(igraph)
library(tidyverse)
library(RColorBrewer)
library(stringi)
library(scico)
library(plotly)
library(ggraph)

edges_table_Test.csv

Names	target	weight relationship
B.B	A.A	4           pos
C.C	A.A	5           pos
D.D	A.A	5           neg
E.E	A.A	5          neg
F.F	A.A	1          pos
C.C	B.B	5         pos
E.E	B.B	1           pos
F.F	B.B	2          pos
A.A	C.C	5        pos
B.B	C.C	1        pos
D.D	C.C	5         pos
E.E	C.C	5         pos
F.F	C.C	3         pos
A.A	D.D	5        neg
B.B	D.D	1        neg
C.C	D.D	5        neg
E.E	D.D	5        neg
F.F	D.D	4         neg
A.A	E.E	5         neg
B.B	E.E	1        neg
C.C	E.E	4        neg
D.D	E.E	5        neg
F.F	E.E	5       pos
A.A	F.F	5        pos
B.B	F.F	1       pos
C.C	F.F	2       pos
D.D	F.F	3      pos
E.E	F.F	4       pos
F.F	F.F	5       pos

edge_list<-read.csv("edges_table_Test.csv")

network <- graph_from_data_frame(aes_collapsed, directed= FALSE,
                                 vertices = details)

temp<-cluster_optimal(network)
temp<-cbind(membership=temp$membership, Names=temp$name) aes_collapsed <-
aes_collapsed %>%
  merge(temp, by="Names")


network <- network %>%
  set_edge_attr(name = "type", value = factor(aes_collapsed$Names,
                                                 ordered =
is.ordered(V(network)$name))) %>%
  set_edge_attr(name = "membership", value = aes_collapsed$membership) %>%
  set_edge_attr(name = "color",
              value = c(viridis::viridis(5))
              [match(E(.)$type, c(factor(V(.)$name)))]) %>%
  set_vertex_attr(name = "trans_v_net", value = c(transitivity(., type =
"local"))) %>%
  set_vertex_attr(name = "hub_score", value = c(hub_score(.)$vector)) %>%
  set_vertex_attr(name = "color",
              value = c(viridis::viridis((5)))
              [match(V(.)$name, c(factor(V(.)$name)))]) %>%
  set_vertex_attr(name= "community", value=cluster_optimal(.)$membership)
clrs<-scico(3, palette = "batlow")

### part 1: network plot
par(bg="black")
network %>% plot(
     vertex.color=clrs[V(.)$community],
     vertex.size=V(.)$hub_score*5,
     vertex.frame.color=V(.)$color,
     vertex.label.color="white",
     vertex.label.cex=0.5,
     vertex.label.family="Helvetica",
     vertex.label.font=1,
     edge.curved=0.5,
     edge.width= network,
     layout=layout_with_mds(.))

### part 2: ggraph
tiff("figures/AES_network_bymembership.tiff", width=1000, height=700,
res=120) network %>%
  ggraph(., layout = "auto")+
geom_edge_arc(curvature=0.3, aes(width=(E(network)$weight/10),
color=c("darkblue", "red")[as.factor(edge_list$relationship)], alpha=0.5)) +

  geom_node_point(aes(size = V(network)$hub_score*200, color=
as.factor(V(network)$community))) +
  geom_node_text(aes(label =  V(network)$name), size=5, color="white",
repel=T)+
  scale_color_scico_d(palette = "batlow")+
  scale_edge_width(range = c(0.2,4))+
  scale_size(range = c(0.5,20)) +
  #scale_edge_color_manual(values = c(scico(21, palette="batlow")))+
  theme(plot.background = element_rect(fill = "black"),
        legend.position = "right",
        panel.background = element_rect(fill = "black"))
dev.off()


From JH@rm@e @end|ng |rom roku@com  Wed Mar 20 20:02:57 2024
From: JH@rm@e @end|ng |rom roku@com (Jorgen Harmse)
Date: Wed, 20 Mar 2024 19:02:57 +0000
Subject: [R] Building Packages.
In-Reply-To: <f8a8629d-c8f8-40de-84c7-8db37b251f1f@gmail.com>
References: <BL0PR01MB443476A7058EAA65165C9587DC332@BL0PR01MB4434.prod.exchangelabs.com>
 <20240320191353.3d6b36ae@arachnoid>
 <BL0PR01MB44343DF316C3B6875C468898DC332@BL0PR01MB4434.prod.exchangelabs.com>
 <f8a8629d-c8f8-40de-84c7-8db37b251f1f@gmail.com>
Message-ID: <BL0PR01MB443405B8F7D4EDFF7F494A6BDC332@BL0PR01MB4434.prod.exchangelabs.com>

I was thinking of making it Open Source, but I haven?t yet. It?s mostly a collection of small utility functions (more oxygen comments than actual code). I built the package on my Windows machine a few months ago, but my Mac first wouldn?t install roygen2 & devtools and now (with the latest version of R) won?t install the tarball that they create. (A work-around that I might try again is to build the package under Windows and ship the tarball to my Mac.)

Regards,
Jorgen.

Example:

#' Adjust number of columns used in printing

#'

#' Use \code{\link{options}} to determine the current number of columns, increment

#' or decrement, and pass the result as \code{width} in a second call to \code{options}.

#'

#' @param dw signed amount by which to increment the number of columns

#'

#' @return a list with the old value of \code{options('width')}

#'

#' @export



width <- function(dw) options(width = options('width')[[1L]] + as.integer(dw))


From: Duncan Murdoch <murdoch.duncan at gmail.com>
Date: Wednesday, March 20, 2024 at 12:09
To: Jorgen Harmse <JHarmse at roku.com>, Ivan Krylov <ikrylov at disroot.org>, Jorgen Harmse via R-help <r-help at r-project.org>
Subject: [EXTERNAL] Re: [R] Building Packages.
Is the source for your package online somewhere?

Duncan Murdoch

On 20/03/2024 1:00 p.m., Jorgen Harmse via R-help wrote:
> Thank you, but I think I was already using utils.
>
> Regards,
> Jorgen.
>
>
>> environment(install.packages)
>
> <environment: namespace:utils>
>
>> utils::install.packages('/Users/jharmse/Library/CloudStorage/OneDrive-RokuInc/jhBase_1.0.1.tar.gz',type='source',repos=NULL)
>
> Error in library(jhBase) : there is no package called ?jhBase?
>
> Execution halted
>
> Warning in utils::install.packages("/Users/jharmse/Library/CloudStorage/OneDrive-RokuInc/jhBase_1.0.1.tar.gz",  :
>
>    installation of package ?/Users/jharmse/Library/CloudStorage/OneDrive-RokuInc/jhBase_1.0.1.tar.gz? had non-zero exit status
>
>
> From: Ivan Krylov <ikrylov at disroot.org>
> Date: Wednesday, March 20, 2024 at 11:14
> To: Jorgen Harmse via R-help <r-help at r-project.org>
> Cc: Jorgen Harmse <JHarmse at roku.com>
> Subject: [EXTERNAL] Re: [R] Building Packages.
> ? Wed, 20 Mar 2024 16:02:27 +0000
> Jorgen Harmse via R-help <r-help at r-project.org> ?????:
>
>>> install.packages(tar,type='source',repos=NULL)
>>
>> Error in library(jhBase) : there is no package called ?jhBase?
>>
>> Execution halted
>>
>> Warning in install.packages(tar, type = "source", repos = NULL) :
>>
>>    installation of package
>> ?/Users/jharmse/Library/CloudStorage/OneDrive-RokuInc/jhBase_1.0.1.tar.gz?
>> had non-zero exit status
>
> Using RStudio? It happens to override install.packages with a function
> that doesn't quite handle file paths. Try utils::install.packages(tar,
> type = "source", repos = NULL).
>
> --
> Best regards,
> Ivan
>
>        [[alternative HTML version deleted]]
>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From |kry|ov @end|ng |rom d|@root@org  Wed Mar 20 20:12:27 2024
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Wed, 20 Mar 2024 22:12:27 +0300
Subject: [R] Building Packages.
In-Reply-To: <BL0PR01MB44343DF316C3B6875C468898DC332@BL0PR01MB4434.prod.exchangelabs.com>
References: <BL0PR01MB443476A7058EAA65165C9587DC332@BL0PR01MB4434.prod.exchangelabs.com>
 <20240320191353.3d6b36ae@arachnoid>
 <BL0PR01MB44343DF316C3B6875C468898DC332@BL0PR01MB4434.prod.exchangelabs.com>
Message-ID: <20240320221227.28a32527@Tarkus>

? Wed, 20 Mar 2024 17:00:34 +0000
Jorgen Harmse <JHarmse at roku.com> ?????:

> Thank you, but I think I was already using utils.
> 
> Regards,
> Jorgen.
> 
> 
> > environment(install.packages)  
> 
> <environment: namespace:utils>
> 
> > utils::install.packages('/Users/jharmse/Library/CloudStorage/OneDrive-RokuInc/jhBase_1.0.1.tar.gz',type='source',repos=NULL)
> >  
> 
> Error in library(jhBase) : there is no package called ?jhBase?

Sorry, then it has been my mistake to blame RStudio for this.

We can try debugging this. If you start a fresh R process and run
tools:::.install_packages(path_to_tarball), the installation will (try
to) proceed in the current process instead of a child process. Once it
fails, traceback() will be available to show you where the error
condition has been raised. What does it say?

Alternatively,

1. Check the package R files for stray library() calls. Generally,
packages should not be calling library().

2. Try a "binary search" approach. Make a copy of your package code but
remove half of the files (or half of the functions if they live in a
single file). Keep removing a half (or go to the other half) depending
on whether the same error keeps happening.

Good luck!

-- 
Best regards,
Ivan


From JH@rm@e @end|ng |rom roku@com  Wed Mar 20 20:26:53 2024
From: JH@rm@e @end|ng |rom roku@com (Jorgen Harmse)
Date: Wed, 20 Mar 2024 19:26:53 +0000
Subject: [R] Building Packages.
In-Reply-To: <20240320221227.28a32527@Tarkus>
References: <BL0PR01MB443476A7058EAA65165C9587DC332@BL0PR01MB4434.prod.exchangelabs.com>
 <20240320191353.3d6b36ae@arachnoid>
 <BL0PR01MB44343DF316C3B6875C468898DC332@BL0PR01MB4434.prod.exchangelabs.com>
 <20240320221227.28a32527@Tarkus>
Message-ID: <BL0PR01MB4434A56C51CB58A338C12135DC332@BL0PR01MB4434.prod.exchangelabs.com>

Thank you. tools:::.install_packages works.

It happens that one of the functions in my package is a utility to build packages. I guess I should change the install step.

Regards,
Jorgen.



#' Build package from source

#'

#' \code{roxygen2} & \code{devtools} have several steps to build a package, and

#' \code{build.package} wraps them in one function. It can also clean up

#' and protect the description file.

#'

#' @param package.dir the directory with the package files arranged as expected by

#' \code{roxygen2} except as noted below

#' @param clean whether to remove old \code{Rd} files before starting

#' @param install whether to install the package after building it, which may make the latest

#' version available in the current R session

#'

#' @note The description file should be in \code{DESC.source} rather than \code{DESCRIPTION}.

#' \code{build.package} will then overwrite the machine-generated \code{DESCRIPTION} from the

#' previous build with the true source.

#'

#' @return \code{invisible()}

#'

#' @export



build.package <- function(package.dir,clean=TRUE,install=TRUE)

{ if (!require(roxygen2))

    stop("Please install roxygen2 and its dependencies.")

  if (!require(devtools))

    stop("Please install devtools and its dependencies.")

  if ( file.exists(file.path(package.dir,"DESC.source") -> DESC.source) )

    file.copy(DESC.source, file.path(package.dir,"DESCRIPTION"), overwrite=TRUE)

  roxygenise(package.dir,clean=clean)

  tar <- devtools::build(package.dir)

  if (install)

    install.packages(tar,type='source',repos=NULL)

  invisible()

}



From: Ivan Krylov <ikrylov at disroot.org>
Date: Wednesday, March 20, 2024 at 14:12
To: Jorgen Harmse <JHarmse at roku.com>
Cc: Jorgen Harmse via R-help <r-help at r-project.org>
Subject: [EXTERNAL] Re: [R] Building Packages.
? Wed, 20 Mar 2024 17:00:34 +0000
Jorgen Harmse <JHarmse at roku.com> ?????:

> Thank you, but I think I was already using utils.
>
> Regards,
> Jorgen.
>
>
> > environment(install.packages)
>
> <environment: namespace:utils>
>
> > utils::install.packages('/Users/jharmse/Library/CloudStorage/OneDrive-RokuInc/jhBase_1.0.1.tar.gz',type='source',repos=NULL)
> >
>
> Error in library(jhBase) : there is no package called ?jhBase?

Sorry, then it has been my mistake to blame RStudio for this.

We can try debugging this. If you start a fresh R process and run
tools:::.install_packages(path_to_tarball), the installation will (try
to) proceed in the current process instead of a child process. Once it
fails, traceback() will be available to show you where the error
condition has been raised. What does it say?

Alternatively,

1. Check the package R files for stray library() calls. Generally,
packages should not be calling library().

2. Try a "binary search" approach. Make a copy of your package code but
remove half of the files (or half of the functions if they live in a
single file). Keep removing a half (or go to the other half) depending
on whether the same error keeps happening.

Good luck!

--
Best regards,
Ivan

	[[alternative HTML version deleted]]


From |kry|ov @end|ng |rom d|@root@org  Wed Mar 20 20:52:53 2024
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Wed, 20 Mar 2024 22:52:53 +0300
Subject: [R] Building Packages.
In-Reply-To: <BL0PR01MB4434A56C51CB58A338C12135DC332@BL0PR01MB4434.prod.exchangelabs.com>
References: <BL0PR01MB443476A7058EAA65165C9587DC332@BL0PR01MB4434.prod.exchangelabs.com>
 <20240320191353.3d6b36ae@arachnoid>
 <BL0PR01MB44343DF316C3B6875C468898DC332@BL0PR01MB4434.prod.exchangelabs.com>
 <20240320221227.28a32527@Tarkus>
 <BL0PR01MB4434A56C51CB58A338C12135DC332@BL0PR01MB4434.prod.exchangelabs.com>
Message-ID: <20240320225253.71fbeb50@Tarkus>

? Wed, 20 Mar 2024 19:26:53 +0000
Jorgen Harmse <JHarmse at roku.com> ?????:

> Thank you. tools:::.install_packages works.

I'm glad it works, but it shouldn't be necessary to use (and is not
part of the API: not documented to keep working this way).

Since you're already using devtools, perhaps devtools::install will
succeed. But it's not obvious why utils::install.packages() is failing,
and it should still be called by devtools::install().

> It happens that one of the functions in my package is a utility to
> build packages. I guess I should change the install step.

Try setting a breakpoint in system2 before launching your function:

debugonce(system2)
build.package('/path/to/the/source/tree')

This should land you in R's "browser" (see help(browser) for how to use
it). At this point, what is `command` and what are the `args`? If you
remove c("CMD", "INSTALL") from the `args` vector and give the rest as
the argument to .install_packages() in a fresh process, will it break
in a similar manner?

Browse[2]> command
[1] "/usr/lib/R/bin/R"
Browse[2]> args
[1] "CMD" "INSTALL" "-l"
"'/home/ivan/R/x86_64-pc-linux-gnu-library/4.2'"
"'/home/ivan/path/to/package_1.0.tar.gz'"

# (start a new process)

tools:::.install_packages(c(
 '-l',
 # you'll have to manually unquote the file paths:
 # the strings above are for both R and the command line shell
 # to interpret, but here we're only giving them to R, not the shell
 "/home/ivan/R/x86_64-pc-linux-gnu-library/4.2",
 "/home/ivan/path/to/package_1.0.tar.gz"
))

-- 
Best regards,
Ivan


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Thu Mar 21 09:31:40 2024
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Thu, 21 Mar 2024 09:31:40 +0100
Subject: [R] Building Packages.
In-Reply-To: <0aae7f84-6539-47e4-b222-bae7f39980a2@gmail.com>
References: <BL0PR01MB443476A7058EAA65165C9587DC332@BL0PR01MB4434.prod.exchangelabs.com>
 <20240320191353.3d6b36ae@arachnoid>
 <1680f328-ce34-4276-8be3-d402b372ef2b@gmail.com>
 <4e4fd9a6-b68e-48a3-96c8-4d63d2846783@gmail.com>
 <0aae7f84-6539-47e4-b222-bae7f39980a2@gmail.com>
Message-ID: <26107.61548.432767.678884@stat.math.ethz.ch>

>>>>> "Duncan Murdoch on Wed, 20 Mar 2024 13:20:12 -0400 writes:

    > On 20/03/2024 1:07 p.m., Duncan Murdoch wrote:
    >> On 20/03/2024 12:37 p.m., Ben Bolker wrote:

    >>> Ivan, can you give more detail on this? I've heard this
    >>> issue mentioned, but when I open RStudio and run
    >>> find("install.packages") it returns
    >>> "utils::install.packages", and running dump() from
    >>> within RStudio console and from an external "R
    >>> --vanilla" gives identical results.
    >>> 
    >>> I thought at one point this might only refer to the GUI
    >>> package-installation interface, but you seem to be
    >>> saying it's the install.packages() function as well.
    >>> 
    >>> Running an up-to-date RStudio on Linux, FWIW -- maybe
    >>> weirdness only happens on other OSs?
    >> 
    >> On MacOS, I see this:
    >> 
    >> > install.packages function (...)  .rs.callAs(name, hook,
    >> original, ...)  <environment: 0x7fa7c72a6268>
    >> 
    >> I get the same results as you from find().  I'm not sure
    >> what RStudio is doing to give a different value for the
    >> function than what find() sees.

    > Turns out that RStudio replaces the install.packages
    > object in the utils package.

    > Duncan Murdoch

Yes, and this has been the case for several years now, and I
have mentioned this several times, too  (though some of it
possibly not in a public R-* mailing list).

And yes, that they modify the package environment
  as.environment("package:utils")
but leave the
  namespace  asNamespace("utils")
unchanged, makes it harder to see what's
going on (but also has less severe consequences; if they kept to
the otherwise universal *rule* that the namespace and package must have the same objects
apart from those only in the namespace,
people would not even have access to R's true install.packages()
but only see the RStudio fake^Hsubstitute..

We are still not happy with their decision. Also
help(install.packages) goes to R's documentation of R's
install.packages, so there's even more misleading of useRs.

Martin


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Thu Mar 21 09:40:38 2024
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Thu, 21 Mar 2024 09:40:38 +0100
Subject: [R] Building Packages.
In-Reply-To: <4e1b1275-935e-4d4a-bd5f-8a8d0f882bb4@gmail.com>
References: <BL0PR01MB443476A7058EAA65165C9587DC332@BL0PR01MB4434.prod.exchangelabs.com>
 <20240320191353.3d6b36ae@arachnoid>
 <1680f328-ce34-4276-8be3-d402b372ef2b@gmail.com>
 <4e4fd9a6-b68e-48a3-96c8-4d63d2846783@gmail.com>
 <0aae7f84-6539-47e4-b222-bae7f39980a2@gmail.com>
 <4e1b1275-935e-4d4a-bd5f-8a8d0f882bb4@gmail.com>
Message-ID: <26107.62086.606884.394139@stat.math.ethz.ch>

>>>>> Ben Bolker 
>>>>>     on Wed, 20 Mar 2024 13:25:33 -0400 writes:

    >    Hmm, looks platform-specific.  Under Linux both RStudio
    > and external R console return

    > a0b52513622c41c11e3ef57c7a485767

    > for digest::digest(install.packages)

Well, platform-specific maybe, notably probably the *RStudio*-version
matters (for once).

One one of our public compute-machines running Linux Fedora 38
  (I don't have RStudio installed on my desktop as I loathe it
   badly to see RStudio start up when I click at an *R script in
   the OS gui file browser ... !:!P:!)(*&))
 
I definitely see

> R.version.string
[1] "R version 4.3.3 Patched (2024-02-29 r86162)"
> RStudio.Version()$version
[1] ?2023.12.1.402?
> install.packages
function (...) 
.rs.callAs(name, hook, original, ...)
<environment: 0x55f4e5d82948>
> 

No need for any hashes to see that install.packages is not the
one from R.

---
Concluding from your, Ben's, finding I'd guess that Posit
finally decided to move away from this very unfriendly idea of
sneakily replacing a base R function ?

That would actually give raise to some applause..

Martin



    > On 2024-03-20 1:20 p.m., Duncan Murdoch wrote:
    >> On 20/03/2024 1:07 p.m., Duncan Murdoch wrote:
    >>> On 20/03/2024 12:37 p.m., Ben Bolker wrote:
    >>>> ???? Ivan, can you give more detail on this? I've heard
    >>>> this issue mentioned, but when I open RStudio and run
    >>>> find("install.packages") it returns
    >>>> "utils::install.packages", and running dump() from
    >>>> within RStudio console and from an external "R
    >>>> --vanilla" gives identical results.
    >>>> 
    >>>> ???? I thought at one point this might only refer to
    >>>> the GUI package-installation interface, but you seem to
    >>>> be saying it's the install.packages() function as well.
    >>>> 
    >>>> ???? Running an up-to-date RStudio on Linux, FWIW --
    >>>> maybe weirdness only happens on other OSs?
    >>> 
    >>> On MacOS, I see this:
    >>> 
    >>> ? > install.packages function (...)  .rs.callAs(name,
    >>> hook, original, ...)  <environment: 0x7fa7c72a6268>
    >>> 
    >>> I get the same results as you from find().? I'm not sure
    >>> what RStudio is doing to give a different value for the
    >>> function than what find() sees.
    >> 
    >> Turns out that RStudio replaces the install.packages
    >> object in the utils package.
    >> 
    >> Duncan Murdoch
    >> 
    >>> 
    >>> Duncan Murdoch
    >>> 
    >>>> 
    >>>> ????? Ben Bolker
    >>>> 
    >>>> On 2024-03-20 12:13 p.m., Ivan Krylov via R-help wrote:
    >>>>> ? Wed, 20 Mar 2024 16:02:27 +0000 Jorgen Harmse via
    >>>>> R-help <r-help at r-project.org> ?????:
    >>>>> 
    >>>>>>> install.packages(tar,type='source',repos=NULL)
    >>>>>> 
>>>>> Error in library(jhBase) : there is no package called
    >>>>>> ?jhBase?
    >>>>>> 
>>>>> Execution halted
    >>>>>> 
>>>>> Warning in install.packages(tar, type = "source", repos =
    >>>>>> NULL) :
    >>>>>> 
>>>>> ???? installation of package
>>>>>
    >>>>>> ?/Users/jharmse/Library/CloudStorage/OneDrive-RokuInc/jhBase_1.0.1.tar.gz?
>>>>> had non-zero exit status
    >>>>> 
    >>>>> Using RStudio? It happens to override install.packages
    >>>>> with a function that doesn't quite handle file
    >>>>> paths. Try utils::install.packages(tar, type =
    >>>>> "source", repos = NULL).
    >>>>> 
    >>>> 
    >>>> ______________________________________________
    >>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and
    >>>> more, see https://stat.ethz.ch/mailman/listinfo/r-help
    >>>> PLEASE do read the posting guide
    >>>> http://www.R-project.org/posting-guide.html and provide
    >>>> commented, minimal, self-contained, reproducible code.
    >>> 
    >> 

    > ______________________________________________
    > R-help at r-project.org mailing list -- To UNSUBSCRIBE and
    > more, see https://stat.ethz.ch/mailman/listinfo/r-help
    > PLEASE do read the posting guide
    > http://www.R-project.org/posting-guide.html and provide
    > commented, minimal, self-contained, reproducible code.


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Mar 21 09:58:32 2024
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 21 Mar 2024 04:58:32 -0400
Subject: [R] Building Packages.
In-Reply-To: <26107.61548.432767.678884@stat.math.ethz.ch>
References: <BL0PR01MB443476A7058EAA65165C9587DC332@BL0PR01MB4434.prod.exchangelabs.com>
 <20240320191353.3d6b36ae@arachnoid>
 <1680f328-ce34-4276-8be3-d402b372ef2b@gmail.com>
 <4e4fd9a6-b68e-48a3-96c8-4d63d2846783@gmail.com>
 <0aae7f84-6539-47e4-b222-bae7f39980a2@gmail.com>
 <26107.61548.432767.678884@stat.math.ethz.ch>
Message-ID: <04d08fbb-cbbd-45cb-8113-5ea19ef2cf72@gmail.com>

The good news for Jorgen (who may not be reading this thread any more) 
is that one can still be sure of getting the original install.packages() 
by using

     utils:::install.packages( ... )

with *three* colons, to get the internal (namespace) version of the 
function.

Duncan Murdoch


On 21/03/2024 4:31 a.m., Martin Maechler wrote:
>>>>>> "Duncan Murdoch on Wed, 20 Mar 2024 13:20:12 -0400 writes:
> 
>      > On 20/03/2024 1:07 p.m., Duncan Murdoch wrote:
>      >> On 20/03/2024 12:37 p.m., Ben Bolker wrote:
> 
>      >>> Ivan, can you give more detail on this? I've heard this
>      >>> issue mentioned, but when I open RStudio and run
>      >>> find("install.packages") it returns
>      >>> "utils::install.packages", and running dump() from
>      >>> within RStudio console and from an external "R
>      >>> --vanilla" gives identical results.
>      >>>
>      >>> I thought at one point this might only refer to the GUI
>      >>> package-installation interface, but you seem to be
>      >>> saying it's the install.packages() function as well.
>      >>>
>      >>> Running an up-to-date RStudio on Linux, FWIW -- maybe
>      >>> weirdness only happens on other OSs?
>      >>
>      >> On MacOS, I see this:
>      >>
>      >> > install.packages function (...)  .rs.callAs(name, hook,
>      >> original, ...)  <environment: 0x7fa7c72a6268>
>      >>
>      >> I get the same results as you from find().  I'm not sure
>      >> what RStudio is doing to give a different value for the
>      >> function than what find() sees.
> 
>      > Turns out that RStudio replaces the install.packages
>      > object in the utils package.
> 
>      > Duncan Murdoch
> 
> Yes, and this has been the case for several years now, and I
> have mentioned this several times, too  (though some of it
> possibly not in a public R-* mailing list).
> 
> And yes, that they modify the package environment
>    as.environment("package:utils")
> but leave the
>    namespace  asNamespace("utils")
> unchanged, makes it harder to see what's
> going on (but also has less severe consequences; if they kept to
> the otherwise universal *rule* that the namespace and package must have the same objects
> apart from those only in the namespace,
> people would not even have access to R's true install.packages()
> but only see the RStudio fake^Hsubstitute..
> 
> We are still not happy with their decision. Also
> help(install.packages) goes to R's documentation of R's
> install.packages, so there's even more misleading of useRs.
> 
> Martin
>


From pd@|gd @end|ng |rom gm@||@com  Thu Mar 21 10:48:36 2024
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Thu, 21 Mar 2024 10:48:36 +0100
Subject: [R] Building Packages.
In-Reply-To: <04d08fbb-cbbd-45cb-8113-5ea19ef2cf72@gmail.com>
References: <BL0PR01MB443476A7058EAA65165C9587DC332@BL0PR01MB4434.prod.exchangelabs.com>
 <20240320191353.3d6b36ae@arachnoid>
 <1680f328-ce34-4276-8be3-d402b372ef2b@gmail.com>
 <4e4fd9a6-b68e-48a3-96c8-4d63d2846783@gmail.com>
 <0aae7f84-6539-47e4-b222-bae7f39980a2@gmail.com>
 <26107.61548.432767.678884@stat.math.ethz.ch>
 <04d08fbb-cbbd-45cb-8113-5ea19ef2cf72@gmail.com>
Message-ID: <B2EF575C-211E-4530-8A05-919493F5B203@gmail.com>

Um, what's with the triple colon? At least on my install, double seems to suffice:

> identical(utils:::install.packages, utils::install.packages)
[1] TRUE
> install.packages
function (...) 
.rs.callAs(name, hook, original, ...)
<environment: 0x7f79e0019860>

-pd

> On 21 Mar 2024, at 09:58 , Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> The good news for Jorgen (who may not be reading this thread any more) is that one can still be sure of getting the original install.packages() by using
> 
>    utils:::install.packages( ... )
> 
> with *three* colons, to get the internal (namespace) version of the function.
> 
> Duncan Murdoch
> 
> 
> On 21/03/2024 4:31 a.m., Martin Maechler wrote:
>>>>>>> "Duncan Murdoch on Wed, 20 Mar 2024 13:20:12 -0400 writes:
>>     > On 20/03/2024 1:07 p.m., Duncan Murdoch wrote:
>>     >> On 20/03/2024 12:37 p.m., Ben Bolker wrote:
>>     >>> Ivan, can you give more detail on this? I've heard this
>>     >>> issue mentioned, but when I open RStudio and run
>>     >>> find("install.packages") it returns
>>     >>> "utils::install.packages", and running dump() from
>>     >>> within RStudio console and from an external "R
>>     >>> --vanilla" gives identical results.
>>     >>>
>>     >>> I thought at one point this might only refer to the GUI
>>     >>> package-installation interface, but you seem to be
>>     >>> saying it's the install.packages() function as well.
>>     >>>
>>     >>> Running an up-to-date RStudio on Linux, FWIW -- maybe
>>     >>> weirdness only happens on other OSs?
>>     >>
>>     >> On MacOS, I see this:
>>     >>
>>     >> > install.packages function (...)  .rs.callAs(name, hook,
>>     >> original, ...)  <environment: 0x7fa7c72a6268>
>>     >>
>>     >> I get the same results as you from find().  I'm not sure
>>     >> what RStudio is doing to give a different value for the
>>     >> function than what find() sees.
>>     > Turns out that RStudio replaces the install.packages
>>     > object in the utils package.
>>     > Duncan Murdoch
>> Yes, and this has been the case for several years now, and I
>> have mentioned this several times, too  (though some of it
>> possibly not in a public R-* mailing list).
>> And yes, that they modify the package environment
>>   as.environment("package:utils")
>> but leave the
>>   namespace  asNamespace("utils")
>> unchanged, makes it harder to see what's
>> going on (but also has less severe consequences; if they kept to
>> the otherwise universal *rule* that the namespace and package must have the same objects
>> apart from those only in the namespace,
>> people would not even have access to R's true install.packages()
>> but only see the RStudio fake^Hsubstitute..
>> We are still not happy with their decision. Also
>> help(install.packages) goes to R's documentation of R's
>> install.packages, so there's even more misleading of useRs.
>> Martin
>> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From k|mmo@e|o @end|ng |rom utu@||  Thu Mar 21 10:51:22 2024
From: k|mmo@e|o @end|ng |rom utu@|| (Kimmo Elo)
Date: Thu, 21 Mar 2024 09:51:22 +0000
Subject: [R] geom_edge & color
In-Reply-To: <022201da7af4$704240d0$50c6c270$@gmx.ch>
References: <022201da7af4$704240d0$50c6c270$@gmx.ch>
Message-ID: <5a11b20ff6be35626a3db42a9bdb1947cb68997d.camel@utu.fi>

Dear Sibylle,

your example is not working! E.g. no data for "aes_collapsed".

Best,

Kimmo

ke, 2024-03-20 kello 19:28 +0100, SIBYLLE ST?CKLI via R-help kirjoitti:
> Dear community
> 
> I am using ggraph to plot a network analysis. See part 2 in the working
> example.
> Besides different colors for different groups of nodes:
> --> geom_node_point(aes(size = V(network)$hub_score*200, color=
> as.factor(V(network)$community)))
> I additionally want to consider different colors for different edge
> groups
> The grouping is defined in the edge_list$relationship: negative
> relationship
> = red and positive relationship = darkblue. The code is working in the
> way
> that the? groups are separated by two colors. However, the code uses not
> the
> assigned colors. Does anyone have any idea how to adapt the code?
> --> geom_edge_arc(curvature=0.3, aes(width=(E(network)$weight/10),
> color=c("darkblue", "red")[as.factor(edge_list$relationship)],
> alpha=0.5)) +
> 
> Kind regards
> Sibylle
> 
> 
> 
> 
> Working example
> 
> library(circlize)
> library(ggplot2)
> library(igraph)
> library(tidyverse)
> library(RColorBrewer)
> library(stringi)
> library(scico)
> library(plotly)
> library(ggraph)
> 
> edges_table_Test.csv
> 
> Names???target??weight relationship
> B.B?????A.A?????4?????????? pos
> C.C?????A.A?????5?????????? pos
> D.D?????A.A?????5?????????? neg
> E.E?????A.A?????5????????? neg
> F.F?????A.A?????1????????? pos
> C.C?????B.B?????5???????? pos
> E.E?????B.B?????1?????????? pos
> F.F?????B.B?????2????????? pos
> A.A?????C.C?????5??????? pos
> B.B?????C.C?????1??????? pos
> D.D?????C.C?????5???????? pos
> E.E?????C.C?????5???????? pos
> F.F?????C.C?????3???????? pos
> A.A?????D.D?????5??????? neg
> B.B?????D.D?????1??????? neg
> C.C?????D.D?????5??????? neg
> E.E?????D.D?????5??????? neg
> F.F?????D.D?????4???????? neg
> A.A?????E.E?????5???????? neg
> B.B?????E.E?????1??????? neg
> C.C?????E.E?????4??????? neg
> D.D?????E.E?????5??????? neg
> F.F?????E.E?????5?????? pos
> A.A?????F.F?????5??????? pos
> B.B?????F.F?????1?????? pos
> C.C?????F.F?????2?????? pos
> D.D?????F.F?????3????? pos
> E.E?????F.F?????4?????? pos
> F.F?????F.F?????5?????? pos
> 
> edge_list<-read.csv("edges_table_Test.csv")
> 
> network <- graph_from_data_frame(aes_collapsed, directed= FALSE,
> ???????????????????????????????? vertices = details)
> 
> temp<-cluster_optimal(network)
> temp<-cbind(membership=temp$membership, Names=temp$name) aes_collapsed <-
> aes_collapsed %>%
> ? merge(temp, by="Names")
> 
> 
> network <- network %>%
> ? set_edge_attr(name = "type", value = factor(aes_collapsed$Names,
> ???????????????????????????????????????????????? ordered =
> is.ordered(V(network)$name))) %>%
> ? set_edge_attr(name = "membership", value = aes_collapsed$membership)
> %>%
> ? set_edge_attr(name = "color",
> ????????????? value = c(viridis::viridis(5))
> ????????????? [match(E(.)$type, c(factor(V(.)$name)))]) %>%
> ? set_vertex_attr(name = "trans_v_net", value = c(transitivity(., type =
> "local"))) %>%
> ? set_vertex_attr(name = "hub_score", value = c(hub_score(.)$vector)) %>%
> ? set_vertex_attr(name = "color",
> ????????????? value = c(viridis::viridis((5)))
> ????????????? [match(V(.)$name, c(factor(V(.)$name)))]) %>%
> ? set_vertex_attr(name= "community", value=cluster_optimal(.)$membership)
> clrs<-scico(3, palette = "batlow")
> 
> ### part 1: network plot
> par(bg="black")
> network %>% plot(
> ???? vertex.color=clrs[V(.)$community],
> ???? vertex.size=V(.)$hub_score*5,
> ???? vertex.frame.color=V(.)$color,
> ???? vertex.label.color="white",
> ???? vertex.label.cex=0.5,
> ???? vertex.label.family="Helvetica",
> ???? vertex.label.font=1,
> ???? edge.curved=0.5,
> ???? edge.width= network,
> ???? layout=layout_with_mds(.))
> 
> ### part 2: ggraph
> tiff("figures/AES_network_bymembership.tiff", width=1000, height=700,
> res=120) network %>%
> ? ggraph(., layout = "auto")+
> geom_edge_arc(curvature=0.3, aes(width=(E(network)$weight/10),
> color=c("darkblue", "red")[as.factor(edge_list$relationship)],
> alpha=0.5)) +
> 
> ? geom_node_point(aes(size = V(network)$hub_score*200, color=
> as.factor(V(network)$community))) +
> ? geom_node_text(aes(label =? V(network)$name), size=5, color="white",
> repel=T)+
> ? scale_color_scico_d(palette = "batlow")+
> ? scale_edge_width(range = c(0.2,4))+
> ? scale_size(range = c(0.5,20)) +
> ? #scale_edge_color_manual(values = c(scico(21, palette="batlow")))+
> ? theme(plot.background = element_rect(fill = "black"),
> ??????? legend.position = "right",
> ??????? panel.background = element_rect(fill = "black"))
> dev.off()
> 
> ______________________________________________
> R-help at r-project.org?mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Mar 21 10:52:58 2024
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 21 Mar 2024 05:52:58 -0400
Subject: [R] Building Packages.
In-Reply-To: <B2EF575C-211E-4530-8A05-919493F5B203@gmail.com>
References: <BL0PR01MB443476A7058EAA65165C9587DC332@BL0PR01MB4434.prod.exchangelabs.com>
 <20240320191353.3d6b36ae@arachnoid>
 <1680f328-ce34-4276-8be3-d402b372ef2b@gmail.com>
 <4e4fd9a6-b68e-48a3-96c8-4d63d2846783@gmail.com>
 <0aae7f84-6539-47e4-b222-bae7f39980a2@gmail.com>
 <26107.61548.432767.678884@stat.math.ethz.ch>
 <04d08fbb-cbbd-45cb-8113-5ea19ef2cf72@gmail.com>
 <B2EF575C-211E-4530-8A05-919493F5B203@gmail.com>
Message-ID: <7626100e-297e-4943-8e8e-60d0c4313d7f@gmail.com>

Yes, you're right.  The version found in the search list entry for 
"package:utils" is the RStudio one; the ones found with two or three 
colons are the original.

Duncan Murdoch

On 21/03/2024 5:48 a.m., peter dalgaard wrote:
> Um, what's with the triple colon? At least on my install, double seems to suffice:
> 
>> identical(utils:::install.packages, utils::install.packages)
> [1] TRUE
>> install.packages
> function (...)
> .rs.callAs(name, hook, original, ...)
> <environment: 0x7f79e0019860>
> 
> -pd
> 
>> On 21 Mar 2024, at 09:58 , Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>
>> The good news for Jorgen (who may not be reading this thread any more) is that one can still be sure of getting the original install.packages() by using
>>
>>     utils:::install.packages( ... )
>>
>> with *three* colons, to get the internal (namespace) version of the function.
>>
>> Duncan Murdoch
>>
>>
>> On 21/03/2024 4:31 a.m., Martin Maechler wrote:
>>>>>>>> "Duncan Murdoch on Wed, 20 Mar 2024 13:20:12 -0400 writes:
>>>      > On 20/03/2024 1:07 p.m., Duncan Murdoch wrote:
>>>      >> On 20/03/2024 12:37 p.m., Ben Bolker wrote:
>>>      >>> Ivan, can you give more detail on this? I've heard this
>>>      >>> issue mentioned, but when I open RStudio and run
>>>      >>> find("install.packages") it returns
>>>      >>> "utils::install.packages", and running dump() from
>>>      >>> within RStudio console and from an external "R
>>>      >>> --vanilla" gives identical results.
>>>      >>>
>>>      >>> I thought at one point this might only refer to the GUI
>>>      >>> package-installation interface, but you seem to be
>>>      >>> saying it's the install.packages() function as well.
>>>      >>>
>>>      >>> Running an up-to-date RStudio on Linux, FWIW -- maybe
>>>      >>> weirdness only happens on other OSs?
>>>      >>
>>>      >> On MacOS, I see this:
>>>      >>
>>>      >> > install.packages function (...)  .rs.callAs(name, hook,
>>>      >> original, ...)  <environment: 0x7fa7c72a6268>
>>>      >>
>>>      >> I get the same results as you from find().  I'm not sure
>>>      >> what RStudio is doing to give a different value for the
>>>      >> function than what find() sees.
>>>      > Turns out that RStudio replaces the install.packages
>>>      > object in the utils package.
>>>      > Duncan Murdoch
>>> Yes, and this has been the case for several years now, and I
>>> have mentioned this several times, too  (though some of it
>>> possibly not in a public R-* mailing list).
>>> And yes, that they modify the package environment
>>>    as.environment("package:utils")
>>> but leave the
>>>    namespace  asNamespace("utils")
>>> unchanged, makes it harder to see what's
>>> going on (but also has less severe consequences; if they kept to
>>> the otherwise universal *rule* that the namespace and package must have the same objects
>>> apart from those only in the namespace,
>>> people would not even have access to R's true install.packages()
>>> but only see the RStudio fake^Hsubstitute..
>>> We are still not happy with their decision. Also
>>> help(install.packages) goes to R's documentation of R's
>>> install.packages, so there's even more misleading of useRs.
>>> Martin
>>>
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>


From iuke-tier@ey m@iii@g oii uiow@@edu  Thu Mar 21 12:44:00 2024
From: iuke-tier@ey m@iii@g oii uiow@@edu (iuke-tier@ey m@iii@g oii uiow@@edu)
Date: Thu, 21 Mar 2024 06:44:00 -0500 (CDT)
Subject: [R] [External] Re:  Building Packages. (fwd)
Message-ID: <342885d9-f2d7-b0dd-db2b-1eaac8b0693a@uiowa.edu>

[forgot to copy to R-help so re-sending]

---------- Forwarded message ----------
Date: Thu, 21 Mar 2024 11:41:52 +0000
From: luke-tierney at uiowa.edu
To: Duncan Murdoch <murdoch.duncan at gmail.com>
Subject: Re: [External] Re: [R] Building Packages.

At least on my installed version (which tells me it is out of date)
they appear to just be modifying the "package:utils" parent frame of
the global search path.

There seem to be a few others:

checkUtilsFun <- function(n)
     identical(get(n, "package:utils"), get(n, getNamespace("utils")))
names(which(! sapply(ls("package:utils", all = TRUE), checkUtilsFun)))
## [1] "bug.report"       "file.edit"        "help.request" ## [4] "history" 
"install.packages" "remove.packages" ## [7] "View"

I don't know why they don't put these overrides in the tools:rstudio frame.
At least that would make them more visible.

You can fix all of these with something like

local({
       up <- match("package:utils", search())
       detach("package:utils")
       library(utils, pos = up)
})

or just install.packages with

local({
     up <- match("package:utils", search())
     unlockBinding("install.packages", pos.to.env(up))
     assign("install.packages", utils::install.packages, "package:utils")
     lockBinding("install.packages", pos.to.env(up))
})

Best,

luke

On Thu, 21 Mar 2024, Duncan Murdoch wrote:

> Yes, you're right.  The version found in the search list entry for 
> "package:utils" is the RStudio one; the ones found with two or three colons 
> are the original.
> 
> Duncan Murdoch
> 
> On 21/03/2024 5:48 a.m., peter dalgaard wrote:
>> Um, what's with the triple colon? At least on my install, double seems to 
>> suffice:
>> 
>>> identical(utils:::install.packages, utils::install.packages)
>> [1] TRUE
>>> install.packages
>> function (...)
>> .rs.callAs(name, hook, original, ...)
>> <environment: 0x7f79e0019860>
>> 
>> -pd
>> 
>>> On 21 Mar 2024, at 09:58 , Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>> 
>>> The good news for Jorgen (who may not be reading this thread any more) is 
>>> that one can still be sure of getting the original install.packages() by 
>>> using
>>>
>>>     utils:::install.packages( ... )
>>> 
>>> with *three* colons, to get the internal (namespace) version of the 
>>> function.
>>> 
>>> Duncan Murdoch
>>> 
>>> 
>>> On 21/03/2024 4:31 a.m., Martin Maechler wrote:
>>>>>>>>> "Duncan Murdoch on Wed, 20 Mar 2024 13:20:12 -0400 writes:
>>>>      > On 20/03/2024 1:07 p.m., Duncan Murdoch wrote:
>>>>      >> On 20/03/2024 12:37 p.m., Ben Bolker wrote:
>>>>      >>> Ivan, can you give more detail on this? I've heard this
>>>>      >>> issue mentioned, but when I open RStudio and run
>>>>      >>> find("install.packages") it returns
>>>>      >>> "utils::install.packages", and running dump() from
>>>>      >>> within RStudio console and from an external "R
>>>>      >>> --vanilla" gives identical results.
>>>>      >>>
>>>>      >>> I thought at one point this might only refer to the GUI
>>>>      >>> package-installation interface, but you seem to be
>>>>      >>> saying it's the install.packages() function as well.
>>>>      >>>
>>>>      >>> Running an up-to-date RStudio on Linux, FWIW -- maybe
>>>>      >>> weirdness only happens on other OSs?
>>>>      >>
>>>>      >> On MacOS, I see this:
>>>>      >>
>>>>      >> > install.packages function (...)  .rs.callAs(name, hook,
>>>>      >> original, ...)  <environment: 0x7fa7c72a6268>
>>>>      >>
>>>>      >> I get the same results as you from find().  I'm not sure
>>>>      >> what RStudio is doing to give a different value for the
>>>>      >> function than what find() sees.
>>>>      > Turns out that RStudio replaces the install.packages
>>>>      > object in the utils package.
>>>>      > Duncan Murdoch
>>>> Yes, and this has been the case for several years now, and I
>>>> have mentioned this several times, too  (though some of it
>>>> possibly not in a public R-* mailing list).
>>>> And yes, that they modify the package environment
>>>>    as.environment("package:utils")
>>>> but leave the
>>>>    namespace  asNamespace("utils")
>>>> unchanged, makes it harder to see what's
>>>> going on (but also has less severe consequences; if they kept to
>>>> the otherwise universal *rule* that the namespace and package must have 
>>>> the same objects
>>>> apart from those only in the namespace,
>>>> people would not even have access to R's true install.packages()
>>>> but only see the RStudio fake^Hsubstitute..
>>>> We are still not happy with their decision. Also
>>>> help(install.packages) goes to R's documentation of R's
>>>> install.packages, so there's even more misleading of useRs.
>>>> Martin
>>>> 
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide 
>>> http://www.r-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.r-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

-- 
Luke Tierney
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:   luke-tierney at uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu/


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Mar 21 13:28:16 2024
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 21 Mar 2024 08:28:16 -0400
Subject: [R] [External] Re: Building Packages. (fwd)
In-Reply-To: <342885d9-f2d7-b0dd-db2b-1eaac8b0693a@uiowa.edu>
References: <342885d9-f2d7-b0dd-db2b-1eaac8b0693a@uiowa.edu>
Message-ID: <01bf537a-d8e9-44bc-b4f9-566b99bba01f@gmail.com>

If you are wondering why RStudio did this, you can see their substitute 
function using

   (parent.env(environment(install.packages)))$hook

They appear to do these things:

  - Allow package installation to be disabled.

  - Check if a package to be installed is already loaded, so that 
RStudio can restart R for the install.

  - Add Rtools to the PATH if necessary.

  - Trigger an event to say that something is about to be changed about 
the installed packages, presumably so that they can mark a cached list 
of installed packages as stale.

  - Call the original function.

I think all of these things could be done  if install.packages() called 
a hook at the start, as library() does (via attachNamespace()) when a 
package is attached.  It might be that putting the wrapper code into 
tools:rstudio would cause confusion for users when there were two 
objects of the same name on the search list, though I don't see how.

Duncan Murdoch


On 21/03/2024 7:44 a.m., luke-tierney--- via R-help wrote:
> [forgot to copy to R-help so re-sending]
> 
> ---------- Forwarded message ----------
> Date: Thu, 21 Mar 2024 11:41:52 +0000
> From: luke-tierney at uiowa.edu
> To: Duncan Murdoch <murdoch.duncan at gmail.com>
> Subject: Re: [External] Re: [R] Building Packages.
> 
> At least on my installed version (which tells me it is out of date)
> they appear to just be modifying the "package:utils" parent frame of
> the global search path.
> 
> There seem to be a few others:
> 
> checkUtilsFun <- function(n)
>       identical(get(n, "package:utils"), get(n, getNamespace("utils")))
> names(which(! sapply(ls("package:utils", all = TRUE), checkUtilsFun)))
> ## [1] "bug.report"       "file.edit"        "help.request" ## [4] "history"
> "install.packages" "remove.packages" ## [7] "View"
> 
> I don't know why they don't put these overrides in the tools:rstudio frame.
> At least that would make them more visible.
> 
> You can fix all of these with something like
> 
> local({
>         up <- match("package:utils", search())
>         detach("package:utils")
>         library(utils, pos = up)
> })
> 
> or just install.packages with
> 
> local({
>       up <- match("package:utils", search())
>       unlockBinding("install.packages", pos.to.env(up))
>       assign("install.packages", utils::install.packages, "package:utils")
>       lockBinding("install.packages", pos.to.env(up))
> })
> 
> Best,
> 
> luke
> 
> On Thu, 21 Mar 2024, Duncan Murdoch wrote:
> 
>> Yes, you're right.  The version found in the search list entry for
>> "package:utils" is the RStudio one; the ones found with two or three colons
>> are the original.
>>
>> Duncan Murdoch
>>
>> On 21/03/2024 5:48 a.m., peter dalgaard wrote:
>>> Um, what's with the triple colon? At least on my install, double seems to
>>> suffice:
>>>
>>>> identical(utils:::install.packages, utils::install.packages)
>>> [1] TRUE
>>>> install.packages
>>> function (...)
>>> .rs.callAs(name, hook, original, ...)
>>> <environment: 0x7f79e0019860>
>>>
>>> -pd
>>>
>>>> On 21 Mar 2024, at 09:58 , Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>>>
>>>> The good news for Jorgen (who may not be reading this thread any more) is
>>>> that one can still be sure of getting the original install.packages() by
>>>> using
>>>>
>>>>      utils:::install.packages( ... )
>>>>
>>>> with *three* colons, to get the internal (namespace) version of the
>>>> function.
>>>>
>>>> Duncan Murdoch
>>>>
>>>>
>>>> On 21/03/2024 4:31 a.m., Martin Maechler wrote:
>>>>>>>>>> "Duncan Murdoch on Wed, 20 Mar 2024 13:20:12 -0400 writes:
>>>>>       > On 20/03/2024 1:07 p.m., Duncan Murdoch wrote:
>>>>>       >> On 20/03/2024 12:37 p.m., Ben Bolker wrote:
>>>>>       >>> Ivan, can you give more detail on this? I've heard this
>>>>>       >>> issue mentioned, but when I open RStudio and run
>>>>>       >>> find("install.packages") it returns
>>>>>       >>> "utils::install.packages", and running dump() from
>>>>>       >>> within RStudio console and from an external "R
>>>>>       >>> --vanilla" gives identical results.
>>>>>       >>>
>>>>>       >>> I thought at one point this might only refer to the GUI
>>>>>       >>> package-installation interface, but you seem to be
>>>>>       >>> saying it's the install.packages() function as well.
>>>>>       >>>
>>>>>       >>> Running an up-to-date RStudio on Linux, FWIW -- maybe
>>>>>       >>> weirdness only happens on other OSs?
>>>>>       >>
>>>>>       >> On MacOS, I see this:
>>>>>       >>
>>>>>       >> > install.packages function (...)  .rs.callAs(name, hook,
>>>>>       >> original, ...)  <environment: 0x7fa7c72a6268>
>>>>>       >>
>>>>>       >> I get the same results as you from find().  I'm not sure
>>>>>       >> what RStudio is doing to give a different value for the
>>>>>       >> function than what find() sees.
>>>>>       > Turns out that RStudio replaces the install.packages
>>>>>       > object in the utils package.
>>>>>       > Duncan Murdoch
>>>>> Yes, and this has been the case for several years now, and I
>>>>> have mentioned this several times, too  (though some of it
>>>>> possibly not in a public R-* mailing list).
>>>>> And yes, that they modify the package environment
>>>>>     as.environment("package:utils")
>>>>> but leave the
>>>>>     namespace  asNamespace("utils")
>>>>> unchanged, makes it harder to see what's
>>>>> going on (but also has less severe consequences; if they kept to
>>>>> the otherwise universal *rule* that the namespace and package must have
>>>>> the same objects
>>>>> apart from those only in the namespace,
>>>>> people would not even have access to R's true install.packages()
>>>>> but only see the RStudio fake^Hsubstitute..
>>>>> We are still not happy with their decision. Also
>>>>> help(install.packages) goes to R's documentation of R's
>>>>> install.packages, so there's even more misleading of useRs.
>>>>> Martin
>>>>>
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.r-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.r-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>


From bbo|ker @end|ng |rom gm@||@com  Thu Mar 21 14:00:30 2024
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Thu, 21 Mar 2024 09:00:30 -0400
Subject: [R] Building Packages.
In-Reply-To: <26107.62086.606884.394139@stat.math.ethz.ch>
References: <BL0PR01MB443476A7058EAA65165C9587DC332@BL0PR01MB4434.prod.exchangelabs.com>
 <20240320191353.3d6b36ae@arachnoid>
 <1680f328-ce34-4276-8be3-d402b372ef2b@gmail.com>
 <4e4fd9a6-b68e-48a3-96c8-4d63d2846783@gmail.com>
 <0aae7f84-6539-47e4-b222-bae7f39980a2@gmail.com>
 <4e1b1275-935e-4d4a-bd5f-8a8d0f882bb4@gmail.com>
 <26107.62086.606884.394139@stat.math.ethz.ch>
Message-ID: <cf543167-8b69-4592-ba73-05d880ebb49d@gmail.com>

   Is your Fedora machine using the bspm package with bspm::enable() in 
the .Rprofile (to install binary packages from the r2u repository)? 
bspm adds a hook by using trace() on install.packages, which makes it 
look like this.

   My guess is that if you start with --vanilla *or* run bspm::disable() 
that you'll get back to the original-as-installed version.

   Even if you have RStudio installed you could change the association 
in your GUI file browser to open R files in emacs by default ...

   cheers
    Ben Bolker


On 2024-03-21 4:40 a.m., Martin Maechler wrote:
>>>>>> Ben Bolker
>>>>>>      on Wed, 20 Mar 2024 13:25:33 -0400 writes:
> 
>      >    Hmm, looks platform-specific.  Under Linux both RStudio
>      > and external R console return
> 
>      > a0b52513622c41c11e3ef57c7a485767
> 
>      > for digest::digest(install.packages)
> 
> Well, platform-specific maybe, notably probably the *RStudio*-version
> matters (for once).
> 
> One one of our public compute-machines running Linux Fedora 38
>    (I don't have RStudio installed on my desktop as I loathe it
>     badly to see RStudio start up when I click at an *R script in
>     the OS gui file browser ... !:!P:!)(*&))
>   
> I definitely see
> 
>> R.version.string
> [1] "R version 4.3.3 Patched (2024-02-29 r86162)"
>> RStudio.Version()$version
> [1] ?2023.12.1.402?
>> install.packages
> function (...)
> .rs.callAs(name, hook, original, ...)
> <environment: 0x55f4e5d82948>
>>
> 
> No need for any hashes to see that install.packages is not the
> one from R.
> 
> ---
> Concluding from your, Ben's, finding I'd guess that Posit
> finally decided to move away from this very unfriendly idea of
> sneakily replacing a base R function ?
> 
> That would actually give raise to some applause..
> 
> Martin
> 
> 
> 
>      > On 2024-03-20 1:20 p.m., Duncan Murdoch wrote:
>      >> On 20/03/2024 1:07 p.m., Duncan Murdoch wrote:
>      >>> On 20/03/2024 12:37 p.m., Ben Bolker wrote:
>      >>>> ???? Ivan, can you give more detail on this? I've heard
>      >>>> this issue mentioned, but when I open RStudio and run
>      >>>> find("install.packages") it returns
>      >>>> "utils::install.packages", and running dump() from
>      >>>> within RStudio console and from an external "R
>      >>>> --vanilla" gives identical results.
>      >>>>
>      >>>> ???? I thought at one point this might only refer to
>      >>>> the GUI package-installation interface, but you seem to
>      >>>> be saying it's the install.packages() function as well.
>      >>>>
>      >>>> ???? Running an up-to-date RStudio on Linux, FWIW --
>      >>>> maybe weirdness only happens on other OSs?
>      >>>
>      >>> On MacOS, I see this:
>      >>>
>      >>> ? > install.packages function (...)  .rs.callAs(name,
>      >>> hook, original, ...)  <environment: 0x7fa7c72a6268>
>      >>>
>      >>> I get the same results as you from find().? I'm not sure
>      >>> what RStudio is doing to give a different value for the
>      >>> function than what find() sees.
>      >>
>      >> Turns out that RStudio replaces the install.packages
>      >> object in the utils package.
>      >>
>      >> Duncan Murdoch
>      >>
>      >>>
>      >>> Duncan Murdoch
>      >>>
>      >>>>
>      >>>> ????? Ben Bolker
>      >>>>
>      >>>> On 2024-03-20 12:13 p.m., Ivan Krylov via R-help wrote:
>      >>>>> ? Wed, 20 Mar 2024 16:02:27 +0000 Jorgen Harmse via
>      >>>>> R-help <r-help at r-project.org> ?????:
>      >>>>>
>      >>>>>>> install.packages(tar,type='source',repos=NULL)
>      >>>>>>
>>>>>> Error in library(jhBase) : there is no package called
>      >>>>>> ?jhBase?
>      >>>>>>
>>>>>> Execution halted
>      >>>>>>
>>>>>> Warning in install.packages(tar, type = "source", repos =
>      >>>>>> NULL) :
>      >>>>>>
>>>>>>  ???? installation of package
>>>>>>
>      >>>>>> ?/Users/jharmse/Library/CloudStorage/OneDrive-RokuInc/jhBase_1.0.1.tar.gz?
>>>>>> had non-zero exit status
>      >>>>>
>      >>>>> Using RStudio? It happens to override install.packages
>      >>>>> with a function that doesn't quite handle file
>      >>>>> paths. Try utils::install.packages(tar, type =
>      >>>>> "source", repos = NULL).
>      >>>>>
>      >>>>
>      >>>> ______________________________________________
>      >>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and
>      >>>> more, see https://stat.ethz.ch/mailman/listinfo/r-help
>      >>>> PLEASE do read the posting guide
>      >>>> http://www.R-project.org/posting-guide.html and provide
>      >>>> commented, minimal, self-contained, reproducible code.
>      >>>
>      >>
> 
>      > ______________________________________________
>      > R-help at r-project.org mailing list -- To UNSUBSCRIBE and
>      > more, see https://stat.ethz.ch/mailman/listinfo/r-help
>      > PLEASE do read the posting guide
>      > http://www.R-project.org/posting-guide.html and provide
>      > commented, minimal, self-contained, reproducible code.

-- 
Dr. Benjamin Bolker
Professor, Mathematics & Statistics and Biology, McMaster University
Director, School of Computational Science and Engineering
(Acting) Graduate chair, Mathematics & Statistics
 > E-mail is sent at my convenience; I don't expect replies outside of 
working hours.


From @vi@e@gross m@iii@g oii gm@ii@com  Thu Mar 21 16:37:27 2024
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Thu, 21 Mar 2024 11:37:27 -0400
Subject: [R] Building Packages.
In-Reply-To: <7626100e-297e-4943-8e8e-60d0c4313d7f@gmail.com>
References: <BL0PR01MB443476A7058EAA65165C9587DC332@BL0PR01MB4434.prod.exchangelabs.com>
 <20240320191353.3d6b36ae@arachnoid>
 <1680f328-ce34-4276-8be3-d402b372ef2b@gmail.com>
 <4e4fd9a6-b68e-48a3-96c8-4d63d2846783@gmail.com>
 <0aae7f84-6539-47e4-b222-bae7f39980a2@gmail.com>
 <26107.61548.432767.678884@stat.math.ethz.ch>
 <04d08fbb-cbbd-45cb-8113-5ea19ef2cf72@gmail.com>
 <B2EF575C-211E-4530-8A05-919493F5B203@gmail.com>
 <7626100e-297e-4943-8e8e-60d0c4313d7f@gmail.com>
Message-ID: <004701da7ba5$ae69a3b0$0b3ceb10$@gmail.com>

With all this discussion, I shudder to ask this. I may have missed the
answers but the discussion seems to have been about identifying and solving
the problem rapidly rather than what maybe is best going forward if all
parties agree.

What was the motivation for what RSTUDIO did for their version and the
decision to replace what came with utils unless someone very explicitly
over-rode them by asking for the original? Is their version better in other
ways? Is there a possibility the two implementations may someday merge into
something that meets several sets of needs or are they incompatible?

Is there agreement that what broke with the substitution is a valid use or
is it something that just happens to work on the utils version if not
patched?



-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Duncan Murdoch
Sent: Thursday, March 21, 2024 5:53 AM
To: peter dalgaard <pdalgd at gmail.com>
Cc: Jorgen Harmse <JHarmse at roku.com>; r-help at r-project.org; Martin Maechler
<maechler at stat.math.ethz.ch>
Subject: Re: [R] Building Packages.

Yes, you're right.  The version found in the search list entry for 
"package:utils" is the RStudio one; the ones found with two or three 
colons are the original.

Duncan Murdoch

On 21/03/2024 5:48 a.m., peter dalgaard wrote:
> Um, what's with the triple colon? At least on my install, double seems to
suffice:
> 
>> identical(utils:::install.packages, utils::install.packages)
> [1] TRUE
>> install.packages
> function (...)
> .rs.callAs(name, hook, original, ...)
> <environment: 0x7f79e0019860>
> 
> -pd
> 
>> On 21 Mar 2024, at 09:58 , Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:
>>
>> The good news for Jorgen (who may not be reading this thread any more) is
that one can still be sure of getting the original install.packages() by
using
>>
>>     utils:::install.packages( ... )
>>
>> with *three* colons, to get the internal (namespace) version of the
function.
>>
>> Duncan Murdoch
>>
>>
>> On 21/03/2024 4:31 a.m., Martin Maechler wrote:
>>>>>>>> "Duncan Murdoch on Wed, 20 Mar 2024 13:20:12 -0400 writes:
>>>      > On 20/03/2024 1:07 p.m., Duncan Murdoch wrote:
>>>      >> On 20/03/2024 12:37 p.m., Ben Bolker wrote:
>>>      >>> Ivan, can you give more detail on this? I've heard this
>>>      >>> issue mentioned, but when I open RStudio and run
>>>      >>> find("install.packages") it returns
>>>      >>> "utils::install.packages", and running dump() from
>>>      >>> within RStudio console and from an external "R
>>>      >>> --vanilla" gives identical results.
>>>      >>>
>>>      >>> I thought at one point this might only refer to the GUI
>>>      >>> package-installation interface, but you seem to be
>>>      >>> saying it's the install.packages() function as well.
>>>      >>>
>>>      >>> Running an up-to-date RStudio on Linux, FWIW -- maybe
>>>      >>> weirdness only happens on other OSs?
>>>      >>
>>>      >> On MacOS, I see this:
>>>      >>
>>>      >> > install.packages function (...)  .rs.callAs(name, hook,
>>>      >> original, ...)  <environment: 0x7fa7c72a6268>
>>>      >>
>>>      >> I get the same results as you from find().  I'm not sure
>>>      >> what RStudio is doing to give a different value for the
>>>      >> function than what find() sees.
>>>      > Turns out that RStudio replaces the install.packages
>>>      > object in the utils package.
>>>      > Duncan Murdoch
>>> Yes, and this has been the case for several years now, and I
>>> have mentioned this several times, too  (though some of it
>>> possibly not in a public R-* mailing list).
>>> And yes, that they modify the package environment
>>>    as.environment("package:utils")
>>> but leave the
>>>    namespace  asNamespace("utils")
>>> unchanged, makes it harder to see what's
>>> going on (but also has less severe consequences; if they kept to
>>> the otherwise universal *rule* that the namespace and package must have
the same objects
>>> apart from those only in the namespace,
>>> people would not even have access to R's true install.packages()
>>> but only see the RStudio fake^Hsubstitute..
>>> We are still not happy with their decision. Also
>>> help(install.packages) goes to R's documentation of R's
>>> install.packages, so there's even more misleading of useRs.
>>> Martin
>>>
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Mar 21 16:51:41 2024
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 21 Mar 2024 11:51:41 -0400
Subject: [R] Building Packages.
In-Reply-To: <004701da7ba5$ae69a3b0$0b3ceb10$@gmail.com>
References: <BL0PR01MB443476A7058EAA65165C9587DC332@BL0PR01MB4434.prod.exchangelabs.com>
 <20240320191353.3d6b36ae@arachnoid>
 <1680f328-ce34-4276-8be3-d402b372ef2b@gmail.com>
 <4e4fd9a6-b68e-48a3-96c8-4d63d2846783@gmail.com>
 <0aae7f84-6539-47e4-b222-bae7f39980a2@gmail.com>
 <26107.61548.432767.678884@stat.math.ethz.ch>
 <04d08fbb-cbbd-45cb-8113-5ea19ef2cf72@gmail.com>
 <B2EF575C-211E-4530-8A05-919493F5B203@gmail.com>
 <7626100e-297e-4943-8e8e-60d0c4313d7f@gmail.com>
 <004701da7ba5$ae69a3b0$0b3ceb10$@gmail.com>
Message-ID: <647aa330-ad8b-4dc4-b547-e3a8ce61adc5@gmail.com>

I posted a description of their changes this morning.

Duncan Murdoch

On 21/03/2024 11:37 a.m., avi.e.gross at gmail.com wrote:
> With all this discussion, I shudder to ask this. I may have missed the
> answers but the discussion seems to have been about identifying and solving
> the problem rapidly rather than what maybe is best going forward if all
> parties agree.
> 
> What was the motivation for what RSTUDIO did for their version and the
> decision to replace what came with utils unless someone very explicitly
> over-rode them by asking for the original? Is their version better in other
> ways? Is there a possibility the two implementations may someday merge into
> something that meets several sets of needs or are they incompatible?
> 
> Is there agreement that what broke with the substitution is a valid use or
> is it something that just happens to work on the utils version if not
> patched?
> 
> 
> 
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Duncan Murdoch
> Sent: Thursday, March 21, 2024 5:53 AM
> To: peter dalgaard <pdalgd at gmail.com>
> Cc: Jorgen Harmse <JHarmse at roku.com>; r-help at r-project.org; Martin Maechler
> <maechler at stat.math.ethz.ch>
> Subject: Re: [R] Building Packages.
> 
> Yes, you're right.  The version found in the search list entry for
> "package:utils" is the RStudio one; the ones found with two or three
> colons are the original.
> 
> Duncan Murdoch
> 
> On 21/03/2024 5:48 a.m., peter dalgaard wrote:
>> Um, what's with the triple colon? At least on my install, double seems to
> suffice:
>>
>>> identical(utils:::install.packages, utils::install.packages)
>> [1] TRUE
>>> install.packages
>> function (...)
>> .rs.callAs(name, hook, original, ...)
>> <environment: 0x7f79e0019860>
>>
>> -pd
>>
>>> On 21 Mar 2024, at 09:58 , Duncan Murdoch <murdoch.duncan at gmail.com>
> wrote:
>>>
>>> The good news for Jorgen (who may not be reading this thread any more) is
> that one can still be sure of getting the original install.packages() by
> using
>>>
>>>      utils:::install.packages( ... )
>>>
>>> with *three* colons, to get the internal (namespace) version of the
> function.
>>>
>>> Duncan Murdoch
>>>
>>>
>>> On 21/03/2024 4:31 a.m., Martin Maechler wrote:
>>>>>>>>> "Duncan Murdoch on Wed, 20 Mar 2024 13:20:12 -0400 writes:
>>>>       > On 20/03/2024 1:07 p.m., Duncan Murdoch wrote:
>>>>       >> On 20/03/2024 12:37 p.m., Ben Bolker wrote:
>>>>       >>> Ivan, can you give more detail on this? I've heard this
>>>>       >>> issue mentioned, but when I open RStudio and run
>>>>       >>> find("install.packages") it returns
>>>>       >>> "utils::install.packages", and running dump() from
>>>>       >>> within RStudio console and from an external "R
>>>>       >>> --vanilla" gives identical results.
>>>>       >>>
>>>>       >>> I thought at one point this might only refer to the GUI
>>>>       >>> package-installation interface, but you seem to be
>>>>       >>> saying it's the install.packages() function as well.
>>>>       >>>
>>>>       >>> Running an up-to-date RStudio on Linux, FWIW -- maybe
>>>>       >>> weirdness only happens on other OSs?
>>>>       >>
>>>>       >> On MacOS, I see this:
>>>>       >>
>>>>       >> > install.packages function (...)  .rs.callAs(name, hook,
>>>>       >> original, ...)  <environment: 0x7fa7c72a6268>
>>>>       >>
>>>>       >> I get the same results as you from find().  I'm not sure
>>>>       >> what RStudio is doing to give a different value for the
>>>>       >> function than what find() sees.
>>>>       > Turns out that RStudio replaces the install.packages
>>>>       > object in the utils package.
>>>>       > Duncan Murdoch
>>>> Yes, and this has been the case for several years now, and I
>>>> have mentioned this several times, too  (though some of it
>>>> possibly not in a public R-* mailing list).
>>>> And yes, that they modify the package environment
>>>>     as.environment("package:utils")
>>>> but leave the
>>>>     namespace  asNamespace("utils")
>>>> unchanged, makes it harder to see what's
>>>> going on (but also has less severe consequences; if they kept to
>>>> the otherwise universal *rule* that the namespace and package must have
> the same objects
>>>> apart from those only in the namespace,
>>>> people would not even have access to R's true install.packages()
>>>> but only see the RStudio fake^Hsubstitute..
>>>> We are still not happy with their decision. Also
>>>> help(install.packages) goes to R's documentation of R's
>>>> install.packages, so there's even more misleading of useRs.
>>>> Martin
>>>>
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bbo|ker @end|ng |rom gm@||@com  Thu Mar 21 17:09:14 2024
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Thu, 21 Mar 2024 12:09:14 -0400
Subject: [R] Building Packages.
In-Reply-To: <647aa330-ad8b-4dc4-b547-e3a8ce61adc5@gmail.com>
References: <BL0PR01MB443476A7058EAA65165C9587DC332@BL0PR01MB4434.prod.exchangelabs.com>
 <20240320191353.3d6b36ae@arachnoid>
 <1680f328-ce34-4276-8be3-d402b372ef2b@gmail.com>
 <4e4fd9a6-b68e-48a3-96c8-4d63d2846783@gmail.com>
 <0aae7f84-6539-47e4-b222-bae7f39980a2@gmail.com>
 <26107.61548.432767.678884@stat.math.ethz.ch>
 <04d08fbb-cbbd-45cb-8113-5ea19ef2cf72@gmail.com>
 <B2EF575C-211E-4530-8A05-919493F5B203@gmail.com>
 <7626100e-297e-4943-8e8e-60d0c4313d7f@gmail.com>
 <004701da7ba5$ae69a3b0$0b3ceb10$@gmail.com>
 <647aa330-ad8b-4dc4-b547-e3a8ce61adc5@gmail.com>
Message-ID: <72d51eb2-d0cc-48e5-a617-0bc4ebfcc7e7@gmail.com>

   I think this might be a good conversation for someone to have with 
the Posit folks

   * is there a more transparent way to do what they want?
     * either, long-term, by having utils::install_packages() add a 
'hook' feature as mentioned by someone
     * using a similar method to bspm::enable(), which calls trace() to 
add an external hook

   * is there a good place for them to put the documentation of what 
they're doing?

   * can they fix things that are broken (e.g.? handling of paths), and 
allow optional arguments to override behaviours that are different from 
utils::install.packages (e.g. add a possibility to say force=TRUE to 
override the "don't reinstall if already installed")

   ?

   cheers
    Ben

On 2024-03-21 11:51 a.m., Duncan Murdoch wrote:
> I posted a description of their changes this morning.
> 
> Duncan Murdoch
> 
> On 21/03/2024 11:37 a.m., avi.e.gross at gmail.com wrote:
>> With all this discussion, I shudder to ask this. I may have missed the
>> answers but the discussion seems to have been about identifying and 
>> solving
>> the problem rapidly rather than what maybe is best going forward if all
>> parties agree.
>>
>> What was the motivation for what RSTUDIO did for their version and the
>> decision to replace what came with utils unless someone very explicitly
>> over-rode them by asking for the original? Is their version better in 
>> other
>> ways? Is there a possibility the two implementations may someday merge 
>> into
>> something that meets several sets of needs or are they incompatible?
>>
>> Is there agreement that what broke with the substitution is a valid 
>> use or
>> is it something that just happens to work on the utils version if not
>> patched?
>>
>>
>>
>> -----Original Message-----
>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Duncan Murdoch
>> Sent: Thursday, March 21, 2024 5:53 AM
>> To: peter dalgaard <pdalgd at gmail.com>
>> Cc: Jorgen Harmse <JHarmse at roku.com>; r-help at r-project.org; Martin 
>> Maechler
>> <maechler at stat.math.ethz.ch>
>> Subject: Re: [R] Building Packages.
>>
>> Yes, you're right.? The version found in the search list entry for
>> "package:utils" is the RStudio one; the ones found with two or three
>> colons are the original.
>>
>> Duncan Murdoch
>>
>> On 21/03/2024 5:48 a.m., peter dalgaard wrote:
>>> Um, what's with the triple colon? At least on my install, double 
>>> seems to
>> suffice:
>>>
>>>> identical(utils:::install.packages, utils::install.packages)
>>> [1] TRUE
>>>> install.packages
>>> function (...)
>>> .rs.callAs(name, hook, original, ...)
>>> <environment: 0x7f79e0019860>
>>>
>>> -pd
>>>
>>>> On 21 Mar 2024, at 09:58 , Duncan Murdoch <murdoch.duncan at gmail.com>
>> wrote:
>>>>
>>>> The good news for Jorgen (who may not be reading this thread any 
>>>> more) is
>> that one can still be sure of getting the original install.packages() by
>> using
>>>>
>>>> ???? utils:::install.packages( ... )
>>>>
>>>> with *three* colons, to get the internal (namespace) version of the
>> function.
>>>>
>>>> Duncan Murdoch
>>>>
>>>>
>>>> On 21/03/2024 4:31 a.m., Martin Maechler wrote:
>>>>>>>>>> "Duncan Murdoch on Wed, 20 Mar 2024 13:20:12 -0400 writes:
>>>>> ????? > On 20/03/2024 1:07 p.m., Duncan Murdoch wrote:
>>>>> ????? >> On 20/03/2024 12:37 p.m., Ben Bolker wrote:
>>>>> ????? >>> Ivan, can you give more detail on this? I've heard this
>>>>> ????? >>> issue mentioned, but when I open RStudio and run
>>>>> ????? >>> find("install.packages") it returns
>>>>> ????? >>> "utils::install.packages", and running dump() from
>>>>> ????? >>> within RStudio console and from an external "R
>>>>> ????? >>> --vanilla" gives identical results.
>>>>> ????? >>>
>>>>> ????? >>> I thought at one point this might only refer to the GUI
>>>>> ????? >>> package-installation interface, but you seem to be
>>>>> ????? >>> saying it's the install.packages() function as well.
>>>>> ????? >>>
>>>>> ????? >>> Running an up-to-date RStudio on Linux, FWIW -- maybe
>>>>> ????? >>> weirdness only happens on other OSs?
>>>>> ????? >>
>>>>> ????? >> On MacOS, I see this:
>>>>> ????? >>
>>>>> ????? >> > install.packages function (...)? .rs.callAs(name, hook,
>>>>> ????? >> original, ...)? <environment: 0x7fa7c72a6268>
>>>>> ????? >>
>>>>> ????? >> I get the same results as you from find().? I'm not sure
>>>>> ????? >> what RStudio is doing to give a different value for the
>>>>> ????? >> function than what find() sees.
>>>>> ????? > Turns out that RStudio replaces the install.packages
>>>>> ????? > object in the utils package.
>>>>> ????? > Duncan Murdoch
>>>>> Yes, and this has been the case for several years now, and I
>>>>> have mentioned this several times, too? (though some of it
>>>>> possibly not in a public R-* mailing list).
>>>>> And yes, that they modify the package environment
>>>>> ??? as.environment("package:utils")
>>>>> but leave the
>>>>> ??? namespace? asNamespace("utils")
>>>>> unchanged, makes it harder to see what's
>>>>> going on (but also has less severe consequences; if they kept to
>>>>> the otherwise universal *rule* that the namespace and package must 
>>>>> have
>> the same objects
>>>>> apart from those only in the namespace,
>>>>> people would not even have access to R's true install.packages()
>>>>> but only see the RStudio fake^Hsubstitute..
>>>>> We are still not happy with their decision. Also
>>>>> help(install.packages) goes to R's documentation of R's
>>>>> install.packages, so there's even more misleading of useRs.
>>>>> Martin
>>>>>
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @vi@e@gross m@iii@g oii gm@ii@com  Thu Mar 21 17:30:48 2024
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Thu, 21 Mar 2024 12:30:48 -0400
Subject: [R] [External] Re: Building Packages. (fwd)
In-Reply-To: <01bf537a-d8e9-44bc-b4f9-566b99bba01f@gmail.com>
References: <342885d9-f2d7-b0dd-db2b-1eaac8b0693a@uiowa.edu>
 <01bf537a-d8e9-44bc-b4f9-566b99bba01f@gmail.com>
Message-ID: <004d01da7bad$21c1f950$6545ebf0$@gmail.com>

Thank you Duncan, you explained quite a bit.

I am unclear how this change causes the problem the OP mentioned.

It is an example of people using a clever trick to get what they think they
want that could be avoided if the original program provided a hook. Of
course the hook could be used more maliciously by others.

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Duncan Murdoch
Sent: Thursday, March 21, 2024 8:28 AM
To: luke-tierney at uiowa.edu; r-help at r-project.org
Subject: Re: [R] [External] Re: Building Packages. (fwd)

If you are wondering why RStudio did this, you can see their substitute 
function using

   (parent.env(environment(install.packages)))$hook

They appear to do these things:

  - Allow package installation to be disabled.

  - Check if a package to be installed is already loaded, so that 
RStudio can restart R for the install.

  - Add Rtools to the PATH if necessary.

  - Trigger an event to say that something is about to be changed about 
the installed packages, presumably so that they can mark a cached list 
of installed packages as stale.

  - Call the original function.

I think all of these things could be done  if install.packages() called 
a hook at the start, as library() does (via attachNamespace()) when a 
package is attached.  It might be that putting the wrapper code into 
tools:rstudio would cause confusion for users when there were two 
objects of the same name on the search list, though I don't see how.

Duncan Murdoch


On 21/03/2024 7:44 a.m., luke-tierney--- via R-help wrote:
> [forgot to copy to R-help so re-sending]
> 
> ---------- Forwarded message ----------
> Date: Thu, 21 Mar 2024 11:41:52 +0000
> From: luke-tierney at uiowa.edu
> To: Duncan Murdoch <murdoch.duncan at gmail.com>
> Subject: Re: [External] Re: [R] Building Packages.
> 
> At least on my installed version (which tells me it is out of date)
> they appear to just be modifying the "package:utils" parent frame of
> the global search path.
> 
> There seem to be a few others:
> 
> checkUtilsFun <- function(n)
>       identical(get(n, "package:utils"), get(n, getNamespace("utils")))
> names(which(! sapply(ls("package:utils", all = TRUE), checkUtilsFun)))
> ## [1] "bug.report"       "file.edit"        "help.request" ## [4]
"history"
> "install.packages" "remove.packages" ## [7] "View"
> 
> I don't know why they don't put these overrides in the tools:rstudio
frame.
> At least that would make them more visible.
> 
> You can fix all of these with something like
> 
> local({
>         up <- match("package:utils", search())
>         detach("package:utils")
>         library(utils, pos = up)
> })
> 
> or just install.packages with
> 
> local({
>       up <- match("package:utils", search())
>       unlockBinding("install.packages", pos.to.env(up))
>       assign("install.packages", utils::install.packages, "package:utils")
>       lockBinding("install.packages", pos.to.env(up))
> })
> 
> Best,
> 
> luke
> 
> On Thu, 21 Mar 2024, Duncan Murdoch wrote:
> 
>> Yes, you're right.  The version found in the search list entry for
>> "package:utils" is the RStudio one; the ones found with two or three
colons
>> are the original.
>>
>> Duncan Murdoch
>>
>> On 21/03/2024 5:48 a.m., peter dalgaard wrote:
>>> Um, what's with the triple colon? At least on my install, double seems
to
>>> suffice:
>>>
>>>> identical(utils:::install.packages, utils::install.packages)
>>> [1] TRUE
>>>> install.packages
>>> function (...)
>>> .rs.callAs(name, hook, original, ...)
>>> <environment: 0x7f79e0019860>
>>>
>>> -pd
>>>
>>>> On 21 Mar 2024, at 09:58 , Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:
>>>>
>>>> The good news for Jorgen (who may not be reading this thread any more)
is
>>>> that one can still be sure of getting the original install.packages()
by
>>>> using
>>>>
>>>>      utils:::install.packages( ... )
>>>>
>>>> with *three* colons, to get the internal (namespace) version of the
>>>> function.
>>>>
>>>> Duncan Murdoch
>>>>
>>>>
>>>> On 21/03/2024 4:31 a.m., Martin Maechler wrote:
>>>>>>>>>> "Duncan Murdoch on Wed, 20 Mar 2024 13:20:12 -0400 writes:
>>>>>       > On 20/03/2024 1:07 p.m., Duncan Murdoch wrote:
>>>>>       >> On 20/03/2024 12:37 p.m., Ben Bolker wrote:
>>>>>       >>> Ivan, can you give more detail on this? I've heard this
>>>>>       >>> issue mentioned, but when I open RStudio and run
>>>>>       >>> find("install.packages") it returns
>>>>>       >>> "utils::install.packages", and running dump() from
>>>>>       >>> within RStudio console and from an external "R
>>>>>       >>> --vanilla" gives identical results.
>>>>>       >>>
>>>>>       >>> I thought at one point this might only refer to the GUI
>>>>>       >>> package-installation interface, but you seem to be
>>>>>       >>> saying it's the install.packages() function as well.
>>>>>       >>>
>>>>>       >>> Running an up-to-date RStudio on Linux, FWIW -- maybe
>>>>>       >>> weirdness only happens on other OSs?
>>>>>       >>
>>>>>       >> On MacOS, I see this:
>>>>>       >>
>>>>>       >> > install.packages function (...)  .rs.callAs(name, hook,
>>>>>       >> original, ...)  <environment: 0x7fa7c72a6268>
>>>>>       >>
>>>>>       >> I get the same results as you from find().  I'm not sure
>>>>>       >> what RStudio is doing to give a different value for the
>>>>>       >> function than what find() sees.
>>>>>       > Turns out that RStudio replaces the install.packages
>>>>>       > object in the utils package.
>>>>>       > Duncan Murdoch
>>>>> Yes, and this has been the case for several years now, and I
>>>>> have mentioned this several times, too  (though some of it
>>>>> possibly not in a public R-* mailing list).
>>>>> And yes, that they modify the package environment
>>>>>     as.environment("package:utils")
>>>>> but leave the
>>>>>     namespace  asNamespace("utils")
>>>>> unchanged, makes it harder to see what's
>>>>> going on (but also has less severe consequences; if they kept to
>>>>> the otherwise universal *rule* that the namespace and package must
have
>>>>> the same objects
>>>>> apart from those only in the namespace,
>>>>> people would not even have access to R's true install.packages()
>>>>> but only see the RStudio fake^Hsubstitute..
>>>>> We are still not happy with their decision. Also
>>>>> help(install.packages) goes to R's documentation of R's
>>>>> install.packages, so there's even more misleading of useRs.
>>>>> Martin
>>>>>
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.r-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.r-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From JH@rm@e @end|ng |rom roku@com  Thu Mar 21 19:45:35 2024
From: JH@rm@e @end|ng |rom roku@com (Jorgen Harmse)
Date: Thu, 21 Mar 2024 18:45:35 +0000
Subject: [R] Building Packages.
In-Reply-To: <mailman.371075.1.1711018802.62976.r-help@r-project.org>
References: <mailman.371075.1.1711018802.62976.r-help@r-project.org>
Message-ID: <BL0PR01MB4434E37C44C441312B0F9DBBDC322@BL0PR01MB4434.prod.exchangelabs.com>

> Turns out that RStudio replaces the install.packages object in the utils
> package.

> Duncan Murdoch

So RStudio unlocks the bindings and alters the exported environment? That seems like another reason to stick to the terminal interface.

>> Thank you. tools:::.install_packages works.

> I'm glad it works, but it shouldn't be necessary to use (and is not
> part of the API: not documented to keep working this way).
> Best regards,
> Ivan [Krylov]

Thank you for letting me know. I hope I can avoid using private functions in future. As noted below, my function seems to work now.

> Try setting a breakpoint in system2 before launching your function:

> Best regards,
> Ivan

Now build.package works as written, so there?s nothing to debug. The problem may have been that this package is so important to me that I put it in .Rprofile. The package was not installed for the new version of R, so every R session started with an annoying error message. Presumably a separate session started with R CMD would just fail without installing the package. That?s no longer a problem because the package is now installed. However, I don?t know why the error message wasn?t clearer, and I?m puzzled that I was able to install roxygen2 & devtools. Thank you everyone, and I?m sorry if I didn?t give the right information to diagnose the problem faster.

Regards,
Jorgen.


	[[alternative HTML version deleted]]


From |kry|ov @end|ng |rom d|@root@org  Thu Mar 21 19:55:46 2024
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Thu, 21 Mar 2024 21:55:46 +0300
Subject: [R] Building Packages.
In-Reply-To: <BL0PR01MB4434E37C44C441312B0F9DBBDC322@BL0PR01MB4434.prod.exchangelabs.com>
References: <mailman.371075.1.1711018802.62976.r-help@r-project.org>
 <BL0PR01MB4434E37C44C441312B0F9DBBDC322@BL0PR01MB4434.prod.exchangelabs.com>
Message-ID: <20240321215546.06137b30@Tarkus>

? Thu, 21 Mar 2024 18:45:35 +0000
Jorgen Harmse via R-help <r-help at r-project.org> ?????:

> The problem may have been that this package is so important to me
> that I put it in .Rprofile. The package was not installed for the new
> version of R, so every R session started with an annoying error
> message. Presumably a separate session started with R CMD would just
> fail without installing the package.

This must be the solution to the mystery. I have recently added some
code that raised an error (lattice::standard.theme(...), but without a
new enough 'lattice' to understand the arguments) to my .Rprofile, and
it broke quite a few things related to package development until I fixed
my .Rprofile.

Congratulations on solving the problem!

-- 
Best regards,
Ivan


From sibyiie@stoeckii m@iii@g oii gmx@ch  Fri Mar 22 08:59:08 2024
From: sibyiie@stoeckii m@iii@g oii gmx@ch (sibyiie@stoeckii m@iii@g oii gmx@ch)
Date: Fri, 22 Mar 2024 08:59:08 +0100
Subject: [R] geom_edge & color
In-Reply-To: <5a11b20ff6be35626a3db42a9bdb1947cb68997d.camel@utu.fi>
References: <022201da7af4$704240d0$50c6c270$@gmx.ch>
 <5a11b20ff6be35626a3db42a9bdb1947cb68997d.camel@utu.fi>
Message-ID: <008201da7c2e$d215b9f0$76412dd0$@gmx.ch>

Dear community

 

Find enclosed the full working example.

 

Many thanks

Sibylle

 

Test_cat.csv


Names

Subcategory_type

sources.cyto

source

Factor


A.A

material

"A"

A

1


B.B

material

"B"

B

1


C.C

regulation

"C"

C

1


D.D

regulation

"D"

D

1


E.E

habitat

"E"

E

1


F.F

cultural

"F"

F

1

 

Test_adjac.csv

	
A.A

B.B

C.C

D.D

E.E

F.F


A.A

0

0

5

5

5

5


B.B

4

0

1

1

1

1


C.C

5

5

0

5

4

2


D.D

5

0

5

0

5

3


E.E

5

1

5

5

0

4


F.F

1

2

3

4

5

5

 

 

Edges_table-Test.csv

 


Names

target

weight

relationship


B.B

A.A

4

pos


C.C

A.A

5

pos


D.D

A.A

5

neg


E.E

A.A

5

pos


F.F

A.A

1

pos


C.C

B.B

5

pos


E.E

B.B

1

pos


F.F

B.B

2

neg


A.A

C.C

5

pos


B.B

C.C

1

pos


D.D

C.C

5

pos


E.E

C.C

5

pos


F.F

C.C

3

pos


A.A

D.D

5

neg


B.B

D.D

1

pos


C.C

D.D

5

pos


E.E

D.D

5

pos


F.F

D.D

4

pos


A.A

E.E

5

pos


B.B

E.E

1

pos


C.C

E.E

4

pos


D.D

E.E

5

pos


F.F

E.E

5

pos


A.A

F.F

5

pos


B.B

F.F

1

neg


C.C

F.F

2

pos


D.D

F.F

3

pos


E.E

F.F

4

pos


F.F

F.F

5

pos

 

 

 

#upload librairies

library(circlize)

library(ggplot2)

library(igraph)

library(tidyverse)

library(RColorBrewer)

library(stringi)

library(scico)

library(plotly)

library(ggraph)

 

#upload

aes<-read.csv("Test_adjac.csv", row.names = 1)

details<-read.csv("Test_cat.csv")

 

 

# adjacency  table 

aes_collapsed<-aes %>%

  rownames_to_column(var='Names') %>%

  tidyr::gather(target, weight, 1:ncol(aes)+1) %>%

  dplyr::filter(weight != 0) %>%

  mutate(weight = ifelse(weight == "-1", 0, weight)) # here 0 = negative values

 

write.csv(aes_collapsed, "edges_table-Test.csv", row.names = F)

edge_list<-read.csv("edges_table-Test.csv")

 

 

#create network and add some necessary attributes (vertices) for the plot

 

network <- graph_from_data_frame(aes_collapsed, directed= FALSE, 

                                 vertices = details)

 

### network and vertex with 'subcategory_type'

 

temp<-cluster_optimal(network)

temp<-cbind(membership=temp$membership, Names=temp$name)

aes_collapsed <- aes_collapsed %>%

  merge(temp, by="Names")

 

network <- network %>%

  set_edge_attr(name = "type", value = factor(aes_collapsed$Names, 

                                                 ordered = is.ordered(V(network)$name))) %>%

  set_edge_attr(name = "membership", value = aes_collapsed$membership) %>%

  set_edge_attr(name = "color", 

              value = c(viridis::viridis(21))

              [match(E(.)$type, c(factor(V(.)$name)))]) %>%

  set_vertex_attr(name = "trans_v_net", value = c(transitivity(., type = "local"))) %>%

  set_vertex_attr(name = "hub_score", value = c(hub_score(.)$vector)) %>%

  set_vertex_attr(name = "color", 

              value = c(viridis::viridis((21)))

              [match(V(.)$name, c(factor(V(.)$name)))]) %>%

  set_vertex_attr(name= "community", value=cluster_optimal(.)$Subcategory_type)

 

clrs<-scico(3, palette = "batlow")

 

windowsFonts(Helvetica = windowsFont("Helvetica")) 

 

par(bg="black")

network %>% plot(

     vertex.color=clrs[V(.)$community], 

     vertex.size=V(.)$hub_score*20, 

     vertex.frame.color=V(.)$color, 

     vertex.label.color="white", 

     vertex.label.cex=0.4, 

     vertex.label.family="Helvetica",

     vertex.label.font=0.75,

     edge.curved=0.5,

     edge.width= E(.)$weight,

     edge.color = ifelse(edge_list$relationship == "pos", "blue", "red"),

     layout=layout_with_mds(.))

 

tiff("figures/Test_network_bysubcatecory.tiff", width=1000, height=900, res=120)

network %>%

  ggraph(., layout = "auto")+

  geom_edge_arc(curvature=0.3, aes(width=(E(network)$weight/10), color=c("darkblue", "red")[as.factor(edge_list$relationship)], alpha=0.5)) + 

  geom_node_point(aes(size = V(network)$hub_score*200, color= as.factor(V(network)$community))) +

  geom_node_text(aes(label =  V(network)$name), size=3, color="white", repel=T)+

  scale_color_scico_d(palette = "batlow")+

  scale_edge_width(range = c(0.2,4))+

  scale_size(range = c(0.5,15)) +

  theme(plot.background = element_rect(fill = "black"),

        legend.position = "right",

        panel.background = element_rect(fill = "black"))

dev.off()

 

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Kimmo Elo
Sent: Thursday, March 21, 2024 10:51 AM
To: r-help at r-project.org
Subject: Re: [R] geom_edge & color

 

Dear Sibylle,

 

your example is not working! E.g. no data for "aes_collapsed".

 

Best,

 

Kimmo

 

ke, 2024-03-20 kello 19:28 +0100, SIBYLLE ST?CKLI via R-help kirjoitti:

> Dear community

> 

> I am using ggraph to plot a network analysis. See part 2 in the 

> working example.

> Besides different colors for different groups of nodes:

> --> geom_node_point(aes(size = V(network)$hub_score*200, color=

> as.factor(V(network)$community)))

> I additionally want to consider different colors for different edge 

> groups The grouping is defined in the edge_list$relationship: negative 

> relationship = red and positive relationship = darkblue. The code is 

> working in the way that the  groups are separated by two colors. 

> However, the code uses not the assigned colors. Does anyone have any 

> idea how to adapt the code?

> --> geom_edge_arc(curvature=0.3, aes(width=(E(network)$weight/10),

> color=c("darkblue", "red")[as.factor(edge_list$relationship)],

> alpha=0.5)) +

> 

> Kind regards

> Sibylle

> 

> 

> 

> 

> Working example

> 

> library(circlize)

> library(ggplot2)

> library(igraph)

> library(tidyverse)

> library(RColorBrewer)

> library(stringi)

> library(scico)

> library(plotly)

> library(ggraph)

> 

> edges_table_Test.csv

> 

> Names   target  weight relationship

> B.B     A.A     4           pos

> C.C     A.A     5           pos

> D.D     A.A     5           neg

> E.E     A.A     5          neg

> F.F     A.A     1          pos

> C.C     B.B     5         pos

> E.E     B.B     1           pos

> F.F     B.B     2          pos

> A.A     C.C     5        pos

> B.B     C.C     1        pos

> D.D     C.C     5         pos

> E.E     C.C     5         pos

> F.F     C.C     3         pos

> A.A     D.D     5        neg

> B.B     D.D     1        neg

> C.C     D.D     5        neg

> E.E     D.D     5        neg

> F.F     D.D     4         neg

> A.A     E.E     5         neg

> B.B     E.E     1        neg

> C.C     E.E     4        neg

> D.D     E.E     5        neg

> F.F     E.E     5       pos

> A.A     F.F     5        pos

> B.B     F.F     1       pos

> C.C     F.F     2       pos

> D.D     F.F     3      pos

> E.E     F.F     4       pos

> F.F     F.F     5       pos

> 

> edge_list<-read.csv("edges_table_Test.csv")

> 

> network <- graph_from_data_frame(aes_collapsed, directed= FALSE,

>                                  vertices = details)

> 

> temp<-cluster_optimal(network)

> temp<-cbind(membership=temp$membership, Names=temp$name) aes_collapsed 

> <- aes_collapsed %>%

>   merge(temp, by="Names")

> 

> 

> network <- network %>%

>   set_edge_attr(name = "type", value = factor(aes_collapsed$Names,

>                                                  ordered =

> is.ordered(V(network)$name))) %>%

>   set_edge_attr(name = "membership", value = aes_collapsed$membership) 

> %>%

>   set_edge_attr(name = "color",

>               value = c(viridis::viridis(5))

>               [match(E(.)$type, c(factor(V(.)$name)))]) %>%

>   set_vertex_attr(name = "trans_v_net", value = c(transitivity(., type 

> =

> "local"))) %>%

>   set_vertex_attr(name = "hub_score", value = c(hub_score(.)$vector)) 

> %>%

>   set_vertex_attr(name = "color",

>               value = c(viridis::viridis((5)))

>               [match(V(.)$name, c(factor(V(.)$name)))]) %>%

>   set_vertex_attr(name= "community", 

> value=cluster_optimal(.)$membership)

> clrs<-scico(3, palette = "batlow")

> 

> ### part 1: network plot

> par(bg="black")

> network %>% plot(

>      vertex.color=clrs[V(.)$community],

>      vertex.size=V(.)$hub_score*5,

>      vertex.frame.color=V(.)$color,

>      vertex.label.color="white",

>      vertex.label.cex=0.5,

>      vertex.label.family="Helvetica",

>      vertex.label.font=1,

>      edge.curved=0.5,

>      edge.width= network,

>      layout=layout_with_mds(.))

> 

> ### part 2: ggraph

> tiff("figures/AES_network_bymembership.tiff", width=1000, height=700,

> res=120) network %>%

>   ggraph(., layout = "auto")+

> geom_edge_arc(curvature=0.3, aes(width=(E(network)$weight/10), 

> color=c("darkblue", "red")[as.factor(edge_list$relationship)],

> alpha=0.5)) +

> 

>   geom_node_point(aes(size = V(network)$hub_score*200, color=

> as.factor(V(network)$community))) +

>   geom_node_text(aes(label =  V(network)$name), size=5, color="white", 

> repel=T)+

>   scale_color_scico_d(palette = "batlow")+

>   scale_edge_width(range = c(0.2,4))+

>   scale_size(range = c(0.5,20)) +

>   #scale_edge_color_manual(values = c(scico(21, palette="batlow")))+

>   theme(plot.background = element_rect(fill = "black"),

>         legend.position = "right",

>         panel.background = element_rect(fill = "black"))

> dev.off()

> 

> ______________________________________________

>  <mailto:R-help at r-project.org> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 

>  <https://stat.ethz.ch/mailman/listinfo/r-help> https://stat.ethz.ch/mailman/listinfo/r-help

> PLEASE do read the posting guide

>  <http://www.R-project.org/posting-guide.html> http://www.R-project.org/posting-guide.html

> and provide commented, minimal, self-contained, reproducible code.

 

______________________________________________

 <mailto:R-help at r-project.org> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see  <https://stat.ethz.ch/mailman/listinfo/r-help> https://stat.ethz.ch/mailman/listinfo/r-help

PLEASE do read the posting guide  <http://www.R-project.org/posting-guide.html> http://www.R-project.org/posting-guide.html

and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From k|mmo@e|o @end|ng |rom utu@||  Fri Mar 22 12:09:37 2024
From: k|mmo@e|o @end|ng |rom utu@|| (Kimmo Elo)
Date: Fri, 22 Mar 2024 11:09:37 +0000
Subject: [R] geom_edge & color
In-Reply-To: <008201da7c2e$d215b9f0$76412dd0$@gmx.ch>
References: <022201da7af4$704240d0$50c6c270$@gmx.ch>
 <5a11b20ff6be35626a3db42a9bdb1947cb68997d.camel@utu.fi>
 <008201da7c2e$d215b9f0$76412dd0$@gmx.ch>
Message-ID: <d0ea5f6da43a81989072efc8f34005caa0d53f66.camel@utu.fi>

Hi,

this seems to work (assuming that your problem was the setting of
colours...):

--- snip ---

network %>%
    ggraph(., layout = "auto") +
    # This produces an error...
    # geom_edge_arc(curvature=0.3, aes(width=(E(network)$weight/10),
color=c("darkblue", "red")[as.factor(edge_list$relationship)], alpha=0.5))
+ 
    # ... this works :-)
    geom_edge_arc(curvature=0.3, aes(width=E(network)$weight/10,
color=edge_list$relationship), alpha=.5) +
    scale_edge_color_manual(values=c("pos"="darkblue", "neg"="red")) +
    
    # This does not work either...
    # geom_node_point(aes(size = V(network)$hub_score*200, color=
as.factor(V(network)$community))) +
    # ... so try this :)
    geom_node_point(aes(size = V(network)$hub_score*200,
color=V(network)$Subcategory_type)) +
    geom_node_text(aes(label =  V(network)$name), size=3, color="white",
repel=T)+
    scale_color_scico_d(palette = "batlow")+
    scale_edge_width(range = c(0.2,4))+
    scale_size(range = c(0.5,15)) +
    theme(plot.background = element_rect(fill = "black"),
          legend.position = "right",
          panel.background = element_rect(fill = "black"))

--- snip ---

At least in my data created with your code, the object "network" does not
have an attribute "community". I use the existing "Subcategory_type"
instead, because I had no time to debug this problem :-)

I do not know whether this produces what you expect or want to visualise.

HTH,

Kimmo


pe, 2024-03-22 kello 08:59 +0100, sibylle.stoeckli at gmx.ch kirjoitti:
> Dear community
> 
> ?
> 
> Find enclosed the full working example.
> 
> ?
> 
> Many thanks
> 
> Sibylle
> 
> ?
> 
> Test_cat.csv
> 
> 
> Names
> 
> Subcategory_type
> 
> sources.cyto
> 
> source
> 
> Factor
> 
> 
> A.A
> 
> material
> 
> "A"
> 
> A
> 
> 1
> 
> 
> B.B
> 
> material
> 
> "B"
> 
> B
> 
> 1
> 
> 
> C.C
> 
> regulation
> 
> "C"
> 
> C
> 
> 1
> 
> 
> D.D
> 
> regulation
> 
> "D"
> 
> D
> 
> 1
> 
> 
> E.E
> 
> habitat
> 
> "E"
> 
> E
> 
> 1
> 
> 
> F.F
> 
> cultural
> 
> "F"
> 
> F
> 
> 1
> 
> ?
> 
> Test_adjac.csv
> 
> ????????
> A.A
> 
> B.B
> 
> C.C
> 
> D.D
> 
> E.E
> 
> F.F
> 
> 
> A.A
> 
> 0
> 
> 0
> 
> 5
> 
> 5
> 
> 5
> 
> 5
> 
> 
> B.B
> 
> 4
> 
> 0
> 
> 1
> 
> 1
> 
> 1
> 
> 1
> 
> 
> C.C
> 
> 5
> 
> 5
> 
> 0
> 
> 5
> 
> 4
> 
> 2
> 
> 
> D.D
> 
> 5
> 
> 0
> 
> 5
> 
> 0
> 
> 5
> 
> 3
> 
> 
> E.E
> 
> 5
> 
> 1
> 
> 5
> 
> 5
> 
> 0
> 
> 4
> 
> 
> F.F
> 
> 1
> 
> 2
> 
> 3
> 
> 4
> 
> 5
> 
> 5
> 
> ?
> 
> ?
> 
> Edges_table-Test.csv
> 
> ?
> 
> 
> Names
> 
> target
> 
> weight
> 
> relationship
> 
> 
> B.B
> 
> A.A
> 
> 4
> 
> pos
> 
> 
> C.C
> 
> A.A
> 
> 5
> 
> pos
> 
> 
> D.D
> 
> A.A
> 
> 5
> 
> neg
> 
> 
> E.E
> 
> A.A
> 
> 5
> 
> pos
> 
> 
> F.F
> 
> A.A
> 
> 1
> 
> pos
> 
> 
> C.C
> 
> B.B
> 
> 5
> 
> pos
> 
> 
> E.E
> 
> B.B
> 
> 1
> 
> pos
> 
> 
> F.F
> 
> B.B
> 
> 2
> 
> neg
> 
> 
> A.A
> 
> C.C
> 
> 5
> 
> pos
> 
> 
> B.B
> 
> C.C
> 
> 1
> 
> pos
> 
> 
> D.D
> 
> C.C
> 
> 5
> 
> pos
> 
> 
> E.E
> 
> C.C
> 
> 5
> 
> pos
> 
> 
> F.F
> 
> C.C
> 
> 3
> 
> pos
> 
> 
> A.A
> 
> D.D
> 
> 5
> 
> neg
> 
> 
> B.B
> 
> D.D
> 
> 1
> 
> pos
> 
> 
> C.C
> 
> D.D
> 
> 5
> 
> pos
> 
> 
> E.E
> 
> D.D
> 
> 5
> 
> pos
> 
> 
> F.F
> 
> D.D
> 
> 4
> 
> pos
> 
> 
> A.A
> 
> E.E
> 
> 5
> 
> pos
> 
> 
> B.B
> 
> E.E
> 
> 1
> 
> pos
> 
> 
> C.C
> 
> E.E
> 
> 4
> 
> pos
> 
> 
> D.D
> 
> E.E
> 
> 5
> 
> pos
> 
> 
> F.F
> 
> E.E
> 
> 5
> 
> pos
> 
> 
> A.A
> 
> F.F
> 
> 5
> 
> pos
> 
> 
> B.B
> 
> F.F
> 
> 1
> 
> neg
> 
> 
> C.C
> 
> F.F
> 
> 2
> 
> pos
> 
> 
> D.D
> 
> F.F
> 
> 3
> 
> pos
> 
> 
> E.E
> 
> F.F
> 
> 4
> 
> pos
> 
> 
> F.F
> 
> F.F
> 
> 5
> 
> pos
> 
> ?
> 
> ?
> 
> ?
> 
> #upload librairies
> 
> library(circlize)
> 
> library(ggplot2)
> 
> library(igraph)
> 
> library(tidyverse)
> 
> library(RColorBrewer)
> 
> library(stringi)
> 
> library(scico)
> 
> library(plotly)
> 
> library(ggraph)
> 
> ?
> 
> #upload
> 
> aes<-read.csv("Test_adjac.csv", row.names = 1)
> 
> details<-read.csv("Test_cat.csv")
> 
> ?
> 
> ?
> 
> # adjacency? table 
> 
> aes_collapsed<-aes %>%
> 
> ? rownames_to_column(var='Names') %>%
> 
> ? tidyr::gather(target, weight, 1:ncol(aes)+1) %>%
> 
> ? dplyr::filter(weight != 0) %>%
> 
> ? mutate(weight = ifelse(weight == "-1", 0, weight)) # here 0 = negative
> values
> 
> ?
> 
> write.csv(aes_collapsed, "edges_table-Test.csv", row.names = F)
> 
> edge_list<-read.csv("edges_table-Test.csv")
> 
> ?
> 
> ?
> 
> #create network and add some necessary attributes (vertices) for the plot
> 
> ?
> 
> network <- graph_from_data_frame(aes_collapsed, directed= FALSE, 
> 
> ???????????????????????????????? vertices = details)
> 
> ?
> 
> ### network and vertex with 'subcategory_type'
> 
> ?
> 
> temp<-cluster_optimal(network)
> 
> temp<-cbind(membership=temp$membership, Names=temp$name)
> 
> aes_collapsed <- aes_collapsed %>%
> 
> ? merge(temp, by="Names")
> 
> ?
> 
> network <- network %>%
> 
> ? set_edge_attr(name = "type", value = factor(aes_collapsed$Names, 
> 
> ???????????????????????????????????????????????? ordered =
> is.ordered(V(network)$name))) %>%
> 
> ? set_edge_attr(name = "membership", value = aes_collapsed$membership)
> %>%
> 
> ? set_edge_attr(name = "color", 
> 
> ????????????? value = c(viridis::viridis(21))
> 
> ????????????? [match(E(.)$type, c(factor(V(.)$name)))]) %>%
> 
> ? set_vertex_attr(name = "trans_v_net", value = c(transitivity(., type =
> "local"))) %>%
> 
> ? set_vertex_attr(name = "hub_score", value = c(hub_score(.)$vector)) %>%
> 
> ? set_vertex_attr(name = "color", 
> 
> ????????????? value = c(viridis::viridis((21)))
> 
> ????????????? [match(V(.)$name, c(factor(V(.)$name)))]) %>%
> 
> ? set_vertex_attr(name= "community",
> value=cluster_optimal(.)$Subcategory_type)
> 
> ?
> 
> clrs<-scico(3, palette = "batlow")
> 
> ?
> 
> windowsFonts(Helvetica = windowsFont("Helvetica")) 
> 
> ?
> 
> par(bg="black")
> 
> network %>% plot(
> 
> ???? vertex.color=clrs[V(.)$community], 
> 
> ???? vertex.size=V(.)$hub_score*20, 
> 
> ???? vertex.frame.color=V(.)$color, 
> 
> ???? vertex.label.color="white", 
> 
> ???? vertex.label.cex=0.4, 
> 
> ???? vertex.label.family="Helvetica",
> 
> ???? vertex.label.font=0.75,
> 
> ???? edge.curved=0.5,
> 
> ???? edge.width= E(.)$weight,
> 
> ???? edge.color = ifelse(edge_list$relationship == "pos", "blue", "red"),
> 
> ???? layout=layout_with_mds(.))
> 
> ?
> 
> tiff("figures/Test_network_bysubcatecory.tiff", width=1000, height=900,
> res=120)
> 
> network %>%
> 
> ? ggraph(., layout = "auto")+
> 
> ? geom_edge_arc(curvature=0.3, aes(width=(E(network)$weight/10),
> color=c("darkblue", "red")[as.factor(edge_list$relationship)],
> alpha=0.5)) + 
> 
> ? geom_node_point(aes(size = V(network)$hub_score*200, color=
> as.factor(V(network)$community))) +
> 
> ? geom_node_text(aes(label =? V(network)$name), size=3, color="white",
> repel=T)+
> 
> ? scale_color_scico_d(palette = "batlow")+
> 
> ? scale_edge_width(range = c(0.2,4))+
> 
> ? scale_size(range = c(0.5,15)) +
> 
> ? theme(plot.background = element_rect(fill = "black"),
> 
> ??????? legend.position = "right",
> 
> ??????? panel.background = element_rect(fill = "black"))
> 
> dev.off()
> 
> ?
> 
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Kimmo Elo
> Sent: Thursday, March 21, 2024 10:51 AM
> To: r-help at r-project.org
> Subject: Re: [R] geom_edge & color
> 
> ?
> 
> Dear Sibylle,
> 
> ?
> 
> your example is not working! E.g. no data for "aes_collapsed".
> 
> ?
> 
> Best,
> 
> ?
> 
> Kimmo
> 
> ?
> 
> ke, 2024-03-20 kello 19:28 +0100, SIBYLLE ST?CKLI via R-help kirjoitti:
> 
> > Dear community
> 
> > 
> 
> > I am using ggraph to plot a network analysis. See part 2 in the 
> 
> > working example.
> 
> > Besides different colors for different groups of nodes:
> 
> > --> geom_node_point(aes(size = V(network)$hub_score*200, color=
> 
> > as.factor(V(network)$community)))
> 
> > I additionally want to consider different colors for different edge 
> 
> > groups The grouping is defined in the edge_list$relationship: negative 
> 
> > relationship = red and positive relationship = darkblue. The code is 
> 
> > working in the way that the? groups are separated by two colors. 
> 
> > However, the code uses not the assigned colors. Does anyone have any 
> 
> > idea how to adapt the code?
> 
> > --> geom_edge_arc(curvature=0.3, aes(width=(E(network)$weight/10),
> 
> > color=c("darkblue", "red")[as.factor(edge_list$relationship)],
> 
> > alpha=0.5)) +
> 
> > 
> 
> > Kind regards
> 
> > Sibylle
> 
> > 
> 
> > 
> 
> > 
> 
> > 
> 
> > Working example
> 
> > 
> 
> > library(circlize)
> 
> > library(ggplot2)
> 
> > library(igraph)
> 
> > library(tidyverse)
> 
> > library(RColorBrewer)
> 
> > library(stringi)
> 
> > library(scico)
> 
> > library(plotly)
> 
> > library(ggraph)
> 
> > 
> 
> > edges_table_Test.csv
> 
> > 
> 
> > Names?? target? weight relationship
> 
> > B.B???? A.A???? 4?????????? pos
> 
> > C.C???? A.A???? 5?????????? pos
> 
> > D.D???? A.A???? 5?????????? neg
> 
> > E.E???? A.A???? 5????????? neg
> 
> > F.F???? A.A???? 1????????? pos
> 
> > C.C???? B.B???? 5???????? pos
> 
> > E.E???? B.B???? 1?????????? pos
> 
> > F.F???? B.B???? 2????????? pos
> 
> > A.A???? C.C???? 5??????? pos
> 
> > B.B???? C.C???? 1??????? pos
> 
> > D.D???? C.C???? 5???????? pos
> 
> > E.E???? C.C???? 5???????? pos
> 
> > F.F???? C.C???? 3???????? pos
> 
> > A.A???? D.D???? 5??????? neg
> 
> > B.B???? D.D???? 1??????? neg
> 
> > C.C???? D.D???? 5??????? neg
> 
> > E.E???? D.D???? 5??????? neg
> 
> > F.F???? D.D???? 4???????? neg
> 
> > A.A???? E.E???? 5???????? neg
> 
> > B.B???? E.E???? 1??????? neg
> 
> > C.C???? E.E???? 4??????? neg
> 
> > D.D???? E.E???? 5??????? neg
> 
> > F.F???? E.E???? 5?????? pos
> 
> > A.A???? F.F???? 5??????? pos
> 
> > B.B???? F.F???? 1?????? pos
> 
> > C.C???? F.F???? 2?????? pos
> 
> > D.D???? F.F???? 3????? pos
> 
> > E.E???? F.F???? 4?????? pos
> 
> > F.F???? F.F???? 5?????? pos
> 
> > 
> 
> > edge_list<-read.csv("edges_table_Test.csv")
> 
> > 
> 
> > network <- graph_from_data_frame(aes_collapsed, directed= FALSE,
> 
> > ???????????????????????????????? vertices = details)
> 
> > 
> 
> > temp<-cluster_optimal(network)
> 
> > temp<-cbind(membership=temp$membership, Names=temp$name) aes_collapsed 
> 
> > <- aes_collapsed %>%
> 
> > ? merge(temp, by="Names")
> 
> > 
> 
> > 
> 
> > network <- network %>%
> 
> > ? set_edge_attr(name = "type", value = factor(aes_collapsed$Names,
> 
> > ???????????????????????????????????????????????? ordered =
> 
> > is.ordered(V(network)$name))) %>%
> 
> > ? set_edge_attr(name = "membership", value = aes_collapsed$membership) 
> 
> > %>%
> 
> > ? set_edge_attr(name = "color",
> 
> > ????????????? value = c(viridis::viridis(5))
> 
> > ????????????? [match(E(.)$type, c(factor(V(.)$name)))]) %>%
> 
> > ? set_vertex_attr(name = "trans_v_net", value = c(transitivity(., type 
> 
> > =
> 
> > "local"))) %>%
> 
> > ? set_vertex_attr(name = "hub_score", value = c(hub_score(.)$vector)) 
> 
> > %>%
> 
> > ? set_vertex_attr(name = "color",
> 
> > ????????????? value = c(viridis::viridis((5)))
> 
> > ????????????? [match(V(.)$name, c(factor(V(.)$name)))]) %>%
> 
> > ? set_vertex_attr(name= "community", 
> 
> > value=cluster_optimal(.)$membership)
> 
> > clrs<-scico(3, palette = "batlow")
> 
> > 
> 
> > ### part 1: network plot
> 
> > par(bg="black")
> 
> > network %>% plot(
> 
> > ???? vertex.color=clrs[V(.)$community],
> 
> > ???? vertex.size=V(.)$hub_score*5,
> 
> > ???? vertex.frame.color=V(.)$color,
> 
> > ???? vertex.label.color="white",
> 
> > ???? vertex.label.cex=0.5,
> 
> > ???? vertex.label.family="Helvetica",
> 
> > ???? vertex.label.font=1,
> 
> > ???? edge.curved=0.5,
> 
> > ???? edge.width= network,
> 
> > ???? layout=layout_with_mds(.))
> 
> > 
> 
> > ### part 2: ggraph
> 
> > tiff("figures/AES_network_bymembership.tiff", width=1000, height=700,
> 
> > res=120) network %>%
> 
> > ? ggraph(., layout = "auto")+
> 
> > geom_edge_arc(curvature=0.3, aes(width=(E(network)$weight/10), 
> 
> > color=c("darkblue", "red")[as.factor(edge_list$relationship)],
> 
> > alpha=0.5)) +
> 
> > 
> 
> > ? geom_node_point(aes(size = V(network)$hub_score*200, color=
> 
> > as.factor(V(network)$community))) +
> 
> > ? geom_node_text(aes(label =? V(network)$name), size=5, color="white", 
> 
> > repel=T)+
> 
> > ? scale_color_scico_d(palette = "batlow")+
> 
> > ? scale_edge_width(range = c(0.2,4))+
> 
> > ? scale_size(range = c(0.5,20)) +
> 
> > ? #scale_edge_color_manual(values = c(scico(21, palette="batlow")))+
> 
> > ? theme(plot.background = element_rect(fill = "black"),
> 
> > ??????? legend.position = "right",
> 
> > ??????? panel.background = element_rect(fill = "black"))
> 
> > dev.off()
> 
> > 
> 
> > ______________________________________________
> 
> > ?<mailto:R-help at r-project.org> R-help at r-project.org?mailing list -- To
> > UNSUBSCRIBE and more, see 
> 
> > ?<https://stat.ethz.ch/mailman/listinfo/r-help>
> > https://stat.ethz.ch/mailman/listinfo/r-help
> 
> > PLEASE do read the posting guide
> 
> > ?<http://www.R-project.org/posting-guide.html>
> > http://www.R-project.org/posting-guide.html
> 
> > and provide commented, minimal, self-contained, reproducible code.
> 
> ?
> 
> ______________________________________________
> 
> ?<mailto:R-help at r-project.org> R-help at r-project.org?mailing list -- To
> UNSUBSCRIBE and more, see? <https://stat.ethz.ch/mailman/listinfo/r-help>
> https://stat.ethz.ch/mailman/listinfo/r-help
> 
> PLEASE do read the posting guide?
> <http://www.R-project.org/posting-guide.html>
> http://www.R-project.org/posting-guide.html
> 
> and provide commented, minimal, self-contained, reproducible code.
> 


From b|ck|@ @end|ng |rom m@th@u@@@k@c@  Fri Mar 22 18:43:08 2024
From: b|ck|@ @end|ng |rom m@th@u@@@k@c@ (Bickis, Mikelis)
Date: Fri, 22 Mar 2024 17:43:08 +0000
Subject: [R] Double buffering plots on Windows
Message-ID: <61932829-7887-4658-BD7A-164D069B9B54@usask.ca>

Hello:

I want to present a sequence of plots as an animation.   As a toy example consider the code

function(n){for (i in 1:n){
plot(1:100,sin(i*(1:100)),type="l")
title(paste("n=",i))
segments(0,0,100,0,col=2)
}}

This sort-of works on a MacOS platform, but the rendering of the plots is a bit choppy.  Inserting a sleep function allows the plots to evolve smoothly.

function(n){for (i in 1:n){
plot(1:100,sin(i*(1:100)),type="l")
title(paste("n=",i))
segments(0,0,100,0,col=2)
Sys.sleep(.2)
}}

However, on a Windows platform, only the last plot is rendered without the Sys.sleep, so the dynamic element is lost.   Inserting the Sys.sleep does allow all the plots to be rendered, but they seem to be erased before they are drawn again, so there is substantial flicker in the appearance.

Is there some kind of double-buffering available within R, so that plots are rendered only after they are fully drawn, leaving the previous plot visible until it is replaced?   I just used the default graphics driver on Windows ? is there perhaps a different driver that will the graphics smoother?

Mik Bickis
Professor Emeritus
Department of Mathematics and Statistics
University of Saskatchewan

From v@|kremk @end|ng |rom gm@||@com  Fri Mar 22 20:02:09 2024
From: v@|kremk @end|ng |rom gm@||@com (Val)
Date: Fri, 22 Mar 2024 14:02:09 -0500
Subject: [R] Error message
Message-ID: <CAJOiR6a-ZMPLde+41YHpXUwcXzhM0ibPp-A7Le7sngNZDKpQdw@mail.gmail.com>

Hi all,

I am creating an X1.RData file using the R 4.2.2 library.
   x1.R
    save(datafilename, file="X1.RData")

When I am trying to load  this file using another script

X2.R
load("X1.RData")

I am getting this error message:
 Error in load("X1.RData", :
 bad restore file magic number (file may be corrupted)  .. no data  loaded.

I am using the same R library (R 4.2.2)

What would be the cause for this error message and how to fix it?

Thank you,


From |kry|ov @end|ng |rom d|@root@org  Fri Mar 22 20:20:08 2024
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Fri, 22 Mar 2024 22:20:08 +0300
Subject: [R] Error message
In-Reply-To: <CAJOiR6a-ZMPLde+41YHpXUwcXzhM0ibPp-A7Le7sngNZDKpQdw@mail.gmail.com>
References: <CAJOiR6a-ZMPLde+41YHpXUwcXzhM0ibPp-A7Le7sngNZDKpQdw@mail.gmail.com>
Message-ID: <20240322222008.5917423d@Tarkus>

? Fri, 22 Mar 2024 14:02:09 -0500
Val <valkremk at gmail.com> ?????:

> X2.R
> load("X1.RData")
> 
> I am getting this error message:
>  Error in load("X1.RData", :
>  bad restore file magic number (file may be corrupted)  .. no data
> loaded.

This error happens very early when R tries to load the file, right
at the first few bytes. Is "X1.RData" large? Can you share it, or at
least a hexadecimal dump of the first few hundred bytes?

-- 
Best regards,
Ivan


From v@|kremk @end|ng |rom gm@||@com  Fri Mar 22 20:31:17 2024
From: v@|kremk @end|ng |rom gm@||@com (Val)
Date: Fri, 22 Mar 2024 14:31:17 -0500
Subject: [R] Error message
In-Reply-To: <20240322222008.5917423d@Tarkus>
References: <CAJOiR6a-ZMPLde+41YHpXUwcXzhM0ibPp-A7Le7sngNZDKpQdw@mail.gmail.com>
 <20240322222008.5917423d@Tarkus>
Message-ID: <CAJOiR6a2Bq64F-3dNp1nRaQ=cWn9kj5sr4jzAmB0hdEBsP-tng@mail.gmail.com>

Yes, X1.RData is large(more than 40M rows) .
How do I get the first   few bytes?

On Fri, Mar 22, 2024 at 2:20?PM Ivan Krylov <ikrylov at disroot.org> wrote:
>
> ? Fri, 22 Mar 2024 14:02:09 -0500
> Val <valkremk at gmail.com> ?????:
>
> > X2.R
> > load("X1.RData")
> >
> > I am getting this error message:
> >  Error in load("X1.RData", :
> >  bad restore file magic number (file may be corrupted)  .. no data
> > loaded.
>
> This error happens very early when R tries to load the file, right
> at the first few bytes. Is "X1.RData" large? Can you share it, or at
> least a hexadecimal dump of the first few hundred bytes?
>
> --
> Best regards,
> Ivan


From |kry|ov @end|ng |rom d|@root@org  Fri Mar 22 20:36:01 2024
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Fri, 22 Mar 2024 22:36:01 +0300
Subject: [R] Error message
In-Reply-To: <CAJOiR6a2Bq64F-3dNp1nRaQ=cWn9kj5sr4jzAmB0hdEBsP-tng@mail.gmail.com>
References: <CAJOiR6a-ZMPLde+41YHpXUwcXzhM0ibPp-A7Le7sngNZDKpQdw@mail.gmail.com>
 <20240322222008.5917423d@Tarkus>
 <CAJOiR6a2Bq64F-3dNp1nRaQ=cWn9kj5sr4jzAmB0hdEBsP-tng@mail.gmail.com>
Message-ID: <20240322223601.5c2de3ba@Tarkus>

? Fri, 22 Mar 2024 14:31:17 -0500
Val <valkremk at gmail.com> ?????:

> How do I get the first   few bytes?

What does file.info('X1.RData') say?

Do you get any output if you run print(readBin('X1.RData', raw(), 128))?

If this is happening on a Linux or macOS machine, the operating system
command xxd -l 128 X1.RData will give the same output in a more
readable manner, but the readBin(...) output from R should be fine too.

-- 
Best regards,
Ivan


From v@|kremk @end|ng |rom gm@||@com  Fri Mar 22 20:52:05 2024
From: v@|kremk @end|ng |rom gm@||@com (Val)
Date: Fri, 22 Mar 2024 14:52:05 -0500
Subject: [R] Error message
In-Reply-To: <20240322223601.5c2de3ba@Tarkus>
References: <CAJOiR6a-ZMPLde+41YHpXUwcXzhM0ibPp-A7Le7sngNZDKpQdw@mail.gmail.com>
 <20240322222008.5917423d@Tarkus>
 <CAJOiR6a2Bq64F-3dNp1nRaQ=cWn9kj5sr4jzAmB0hdEBsP-tng@mail.gmail.com>
 <20240322223601.5c2de3ba@Tarkus>
Message-ID: <CAJOiR6ZkPL_NHJenUe+kaAHhPLeWqwuwaz7kEyCcLyiEvSFLGg@mail.gmail.com>

Here is the first few bytes,
xxd -l 128 X1.RData
00000000: 8d5a 35f8 1ac5 cc14 a04e be5c 572f a3ad  .Z5......N.\W/..
00000010: 6210 7024 9b58 93c7 34d0 acb7 7a82 3f99  b.p$.X..4...z.?.
00000020: 66ce 0ebb 2057 ec36 55b4 0ece a036 695a  f... W.6U....6iZ
00000030: 258b 3493 b661 f620 f7fe ada7 158a 15f7  %.4..a. ........
00000040: e016 a548 6fcb 20c8 6fb4 493d adc9 ea4a  ...Ho. .o.I=...J
00000050: 0a2b b7cf a416 336e 5e4e abc5 9874 7be3  .+....3n^N...t{.
00000060: 5a5a 3405 fe35 8a3d ad80 0dc0 ca3e ea7a  ZZ4..5.=.....>.z
00000070: e628 b220 ee50 0b9f 3a81 e971 8a19 4f54  .(. .P..:..q..OT

On Fri, Mar 22, 2024 at 2:36?PM Ivan Krylov <ikrylov at disroot.org> wrote:
>
> ? Fri, 22 Mar 2024 14:31:17 -0500
> Val <valkremk at gmail.com> ?????:
>
> > How do I get the first   few bytes?
>
> What does file.info('X1.RData') say?
>
> Do you get any output if you run print(readBin('X1.RData', raw(), 128))?
>
> If this is happening on a Linux or macOS machine, the operating system
> command xxd -l 128 X1.RData will give the same output in a more
> readable manner, but the readBin(...) output from R should be fine too.
>
> --
> Best regards,
> Ivan


From |kry|ov @end|ng |rom d|@root@org  Fri Mar 22 21:06:43 2024
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Fri, 22 Mar 2024 23:06:43 +0300
Subject: [R] Error message
In-Reply-To: <CAJOiR6ZkPL_NHJenUe+kaAHhPLeWqwuwaz7kEyCcLyiEvSFLGg@mail.gmail.com>
References: <CAJOiR6a-ZMPLde+41YHpXUwcXzhM0ibPp-A7Le7sngNZDKpQdw@mail.gmail.com>
 <20240322222008.5917423d@Tarkus>
 <CAJOiR6a2Bq64F-3dNp1nRaQ=cWn9kj5sr4jzAmB0hdEBsP-tng@mail.gmail.com>
 <20240322223601.5c2de3ba@Tarkus>
 <CAJOiR6ZkPL_NHJenUe+kaAHhPLeWqwuwaz7kEyCcLyiEvSFLGg@mail.gmail.com>
Message-ID: <20240322230643.6b7ad288@Tarkus>

? Fri, 22 Mar 2024 14:52:05 -0500
Val <valkremk at gmail.com> ?????:

> 00000000: 8d5a 35f8 1ac5 cc14 a04e be5c 572f a3ad  .Z5......N.\W/..
> 00000010: 6210 7024 9b58 93c7 34d0 acb7 7a82 3f99  b.p$.X..4...z.?.

Thank you!

This doesn't look like any structured data to me. In particular, it
doesn't look like something written by R: those created by modern
versions of R with default settings typically start with an "RDX2\n"
(52 44 58 32 0a) or at least "X\n" (58 0a). Could be a middle of
compressed stream, as if the file was truncated while it was being
written.

Do you get similar results with saveRDS(datafilename, 'X1.rds') and
data2 <- readRDS('X1.rds')? Does this happen with other R objects that
you try to save or in your other scripts?

-- 
Best regards,
Ivan


From @|eg|r|ed@m@cho @end|ng |rom un||r@ch  Fri Mar 22 17:11:14 2024
From: @|eg|r|ed@m@cho @end|ng |rom un||r@ch (MACHO Siegfried)
Date: Fri, 22 Mar 2024 16:11:14 +0000
Subject: [R] Problem with new version of R: Mutated vocals
Message-ID: <GVAP278MB030901B49E045D0062AC79D69B312@GVAP278MB0309.CHEP278.PROD.OUTLOOK.COM>

Dear ladies and gentlemen,

I have recently installed the latest version of R (4.3.3) for windows. Now I have the following problems with mutated vowels like ?, ?, etc. Here is an example:
If I type the command:
Dir <- "C/Users/macho/Documents/_LVn/Experimentelle ?bungen"
in the R console there is no problem. However, if I put the same command into a source file (e.g. Test.r) and call this file from R (via the source command), I get the following error message:

> source("C:\\Users\\macho\\Documents\\_LVn\\Experimentelle ?bungen\\R-Scripts\\R-Dokumentation\\R_scripts zur R_Dokumentation\\Kapitel 4 Erstellen eines Balkendiagramms\\Test.R")
Fehler: invalid multibyte character in parser (C:\Users\macho\Documents\_LVn\Experimentelle ?bungen\R-Scripts\R-Dokumentation\R_scripts zur R_Dokumentation\Kapitel 4 Erstellen eines Balkendiagramms\Test.R:1:54

In addition, text files saved with an older version of R (using the function write.table) containing mutated vowels are not read-in correctly by the function read.table.
I would be glad, if someone could help me with this problem.

Kind regards,
Siegfried Macho.

------------------------------
PD Dr. Siegfried Macho
Psychological Department
University of Fribourg
Rue de Faucigny 2
CH-1700 Fribourg
Tel.: ++41-26-3007635
-----------------------------




	[[alternative HTML version deleted]]


From |kry|ov @end|ng |rom d|@root@org  Fri Mar 22 22:18:13 2024
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Sat, 23 Mar 2024 00:18:13 +0300
Subject: [R] Problem with new version of R: Mutated vocals
In-Reply-To: <GVAP278MB030901B49E045D0062AC79D69B312@GVAP278MB0309.CHEP278.PROD.OUTLOOK.COM>
References: <GVAP278MB030901B49E045D0062AC79D69B312@GVAP278MB0309.CHEP278.PROD.OUTLOOK.COM>
Message-ID: <20240323001813.5f994085@Tarkus>

? Fri, 22 Mar 2024 16:11:14 +0000
MACHO Siegfried via R-help <r-help at r-project.org> ?????:

> If I type the command:
> Dir <- "C/Users/macho/Documents/_LVn/Experimentelle _bungen"
> in the R console there is no problem. However, if I put the same
> command into a source file (e.g. Test.r) and call this file from R
> (via the source command), I get the following error message:
> 
> > source("C:\\Users\\macho\\Documents\\_LVn\\Experimentelle
> > _bungen\\R-Scripts\\R-Dokumentation\\R_scripts zur
> > R_Dokumentation\\Kapitel 4 Erstellen eines
> > Balkendiagramms\\Test.R")  
> Fehler: invalid multibyte character in parser
> (C:\Users\macho\Documents\_LVn\Experimentelle
> _bungen\R-Scripts\R-Dokumentation\R_scripts zur
> R_Dokumentation\Kapitel 4 Erstellen eines Balkendiagramms\Test.R:1:54

A few versions ago, the R developers made the change of the encoding
used by R on Windows. Instead of the ANSI encoding, R now uses UTF-8:
https://blog.r-project.org/2020/05/02/utf-8-support-on-windows/index.html

This makes it possible to represent many more characters than the
256-byte range covered by CP1252, but the byte sequences are now
different. Also, non-ASCII characters will take more than one byte to
store.

Can you save the script using the UTF-8 encoding instead of CP1252?
Alternatively, try source(..., encoding = 'CP1252').

> In addition, text files saved with an older version of R (using the
> function write.table) containing mutated vowels are not read-in
> correctly by the function read.table.

In a similar manner, try read.table(..., fileEncoding = 'CP1252').
Setting encoding = 'latin1' may also work, even if it's technically a
different encoding.

-- 
Best regards,
Ivan


From bgunter@4567 @end|ng |rom gm@||@com  Sun Mar 24 05:01:52 2024
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 24 Mar 2024 05:01:52 +0100
Subject: [R] Double buffering plots on Windows
In-Reply-To: <61932829-7887-4658-BD7A-164D069B9B54@usask.ca>
References: <61932829-7887-4658-BD7A-164D069B9B54@usask.ca>
Message-ID: <CAGxFJbQXZyP3mD4Hw1kGkStbXDf37XJJsg3vaW3XQGq=JOZbNA@mail.gmail.com>

A search on "make animated plots in R" brought up many hits and the
gganimate package (and maybe others, as I didn't scroll through).

Bert

On Fri, Mar 22, 2024, 18:45 Bickis, Mikelis <bickis at math.usask.ca> wrote:

> Hello:
>
> I want to present a sequence of plots as an animation.   As a toy example
> consider the code
>
> function(n){for (i in 1:n){
> plot(1:100,sin(i*(1:100)),type="l")
> title(paste("n=",i))
> segments(0,0,100,0,col=2)
> }}
>
> This sort-of works on a MacOS platform, but the rendering of the plots is
> a bit choppy.  Inserting a sleep function allows the plots to evolve
> smoothly.
>
> function(n){for (i in 1:n){
> plot(1:100,sin(i*(1:100)),type="l")
> title(paste("n=",i))
> segments(0,0,100,0,col=2)
> Sys.sleep(.2)
> }}
>
> However, on a Windows platform, only the last plot is rendered without the
> Sys.sleep, so the dynamic element is lost.   Inserting the Sys.sleep does
> allow all the plots to be rendered, but they seem to be erased before they
> are drawn again, so there is substantial flicker in the appearance.
>
> Is there some kind of double-buffering available within R, so that plots
> are rendered only after they are fully drawn, leaving the previous plot
> visible until it is replaced?   I just used the default graphics driver on
> Windows ? is there perhaps a different driver that will the graphics
> smoother?
>
> Mik Bickis
> Professor Emeritus
> Department of Mathematics and Statistics
> University of Saskatchewan
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From sibyiie@stoeckii m@iii@g oii gmx@ch  Sun Mar 24 12:16:58 2024
From: sibyiie@stoeckii m@iii@g oii gmx@ch (sibyiie@stoeckii m@iii@g oii gmx@ch)
Date: Sun, 24 Mar 2024 12:16:58 +0100
Subject: [R] geom_edge & color
In-Reply-To: <d0ea5f6da43a81989072efc8f34005caa0d53f66.camel@utu.fi>
References: <022201da7af4$704240d0$50c6c270$@gmx.ch>
 <5a11b20ff6be35626a3db42a9bdb1947cb68997d.camel@utu.fi>
 <008201da7c2e$d215b9f0$76412dd0$@gmx.ch>
 <d0ea5f6da43a81989072efc8f34005caa0d53f66.camel@utu.fi>
Message-ID: <018201da7ddc$c9965280$5cc2f780$@gmx.ch>

Dear Kommo

Many thanks for the valuable solution.

Sibylle

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Kimmo Elo
Sent: Friday, March 22, 2024 12:10 PM
To: r-help at r-project.org
Subject: Re: [R] geom_edge & color

Hi,

this seems to work (assuming that your problem was the setting of
colours...):

--- snip ---

network %>%
    ggraph(., layout = "auto") +
    # This produces an error...
    # geom_edge_arc(curvature=0.3, aes(width=(E(network)$weight/10), color=c("darkblue", "red")[as.factor(edge_list$relationship)], alpha=0.5))
+ 
    # ... this works :-)
    geom_edge_arc(curvature=0.3, aes(width=E(network)$weight/10, color=edge_list$relationship), alpha=.5) +
    scale_edge_color_manual(values=c("pos"="darkblue", "neg"="red")) +
    
    # This does not work either...
    # geom_node_point(aes(size = V(network)$hub_score*200, color=
as.factor(V(network)$community))) +
    # ... so try this :)
    geom_node_point(aes(size = V(network)$hub_score*200,
color=V(network)$Subcategory_type)) +
    geom_node_text(aes(label =  V(network)$name), size=3, color="white", repel=T)+
    scale_color_scico_d(palette = "batlow")+
    scale_edge_width(range = c(0.2,4))+
    scale_size(range = c(0.5,15)) +
    theme(plot.background = element_rect(fill = "black"),
          legend.position = "right",
          panel.background = element_rect(fill = "black"))

--- snip ---

At least in my data created with your code, the object "network" does not have an attribute "community". I use the existing "Subcategory_type"
instead, because I had no time to debug this problem :-)

I do not know whether this produces what you expect or want to visualise.

HTH,

Kimmo


pe, 2024-03-22 kello 08:59 +0100, sibylle.stoeckli at gmx.ch kirjoitti:
> Dear community
> 
>  
> 
> Find enclosed the full working example.
> 
>  
> 
> Many thanks
> 
> Sibylle
> 
>  
> 
> Test_cat.csv
> 
> 
> Names
> 
> Subcategory_type
> 
> sources.cyto
> 
> source
> 
> Factor
> 
> 
> A.A
> 
> material
> 
> "A"
> 
> A
> 
> 1
> 
> 
> B.B
> 
> material
> 
> "B"
> 
> B
> 
> 1
> 
> 
> C.C
> 
> regulation
> 
> "C"
> 
> C
> 
> 1
> 
> 
> D.D
> 
> regulation
> 
> "D"
> 
> D
> 
> 1
> 
> 
> E.E
> 
> habitat
> 
> "E"
> 
> E
> 
> 1
> 
> 
> F.F
> 
> cultural
> 
> "F"
> 
> F
> 
> 1
> 
>  
> 
> Test_adjac.csv
> 
>         
> A.A
> 
> B.B
> 
> C.C
> 
> D.D
> 
> E.E
> 
> F.F
> 
> 
> A.A
> 
> 0
> 
> 0
> 
> 5
> 
> 5
> 
> 5
> 
> 5
> 
> 
> B.B
> 
> 4
> 
> 0
> 
> 1
> 
> 1
> 
> 1
> 
> 1
> 
> 
> C.C
> 
> 5
> 
> 5
> 
> 0
> 
> 5
> 
> 4
> 
> 2
> 
> 
> D.D
> 
> 5
> 
> 0
> 
> 5
> 
> 0
> 
> 5
> 
> 3
> 
> 
> E.E
> 
> 5
> 
> 1
> 
> 5
> 
> 5
> 
> 0
> 
> 4
> 
> 
> F.F
> 
> 1
> 
> 2
> 
> 3
> 
> 4
> 
> 5
> 
> 5
> 
>  
> 
>  
> 
> Edges_table-Test.csv
> 
>  
> 
> 
> Names
> 
> target
> 
> weight
> 
> relationship
> 
> 
> B.B
> 
> A.A
> 
> 4
> 
> pos
> 
> 
> C.C
> 
> A.A
> 
> 5
> 
> pos
> 
> 
> D.D
> 
> A.A
> 
> 5
> 
> neg
> 
> 
> E.E
> 
> A.A
> 
> 5
> 
> pos
> 
> 
> F.F
> 
> A.A
> 
> 1
> 
> pos
> 
> 
> C.C
> 
> B.B
> 
> 5
> 
> pos
> 
> 
> E.E
> 
> B.B
> 
> 1
> 
> pos
> 
> 
> F.F
> 
> B.B
> 
> 2
> 
> neg
> 
> 
> A.A
> 
> C.C
> 
> 5
> 
> pos
> 
> 
> B.B
> 
> C.C
> 
> 1
> 
> pos
> 
> 
> D.D
> 
> C.C
> 
> 5
> 
> pos
> 
> 
> E.E
> 
> C.C
> 
> 5
> 
> pos
> 
> 
> F.F
> 
> C.C
> 
> 3
> 
> pos
> 
> 
> A.A
> 
> D.D
> 
> 5
> 
> neg
> 
> 
> B.B
> 
> D.D
> 
> 1
> 
> pos
> 
> 
> C.C
> 
> D.D
> 
> 5
> 
> pos
> 
> 
> E.E
> 
> D.D
> 
> 5
> 
> pos
> 
> 
> F.F
> 
> D.D
> 
> 4
> 
> pos
> 
> 
> A.A
> 
> E.E
> 
> 5
> 
> pos
> 
> 
> B.B
> 
> E.E
> 
> 1
> 
> pos
> 
> 
> C.C
> 
> E.E
> 
> 4
> 
> pos
> 
> 
> D.D
> 
> E.E
> 
> 5
> 
> pos
> 
> 
> F.F
> 
> E.E
> 
> 5
> 
> pos
> 
> 
> A.A
> 
> F.F
> 
> 5
> 
> pos
> 
> 
> B.B
> 
> F.F
> 
> 1
> 
> neg
> 
> 
> C.C
> 
> F.F
> 
> 2
> 
> pos
> 
> 
> D.D
> 
> F.F
> 
> 3
> 
> pos
> 
> 
> E.E
> 
> F.F
> 
> 4
> 
> pos
> 
> 
> F.F
> 
> F.F
> 
> 5
> 
> pos
> 
>  
> 
>  
> 
>  
> 
> #upload librairies
> 
> library(circlize)
> 
> library(ggplot2)
> 
> library(igraph)
> 
> library(tidyverse)
> 
> library(RColorBrewer)
> 
> library(stringi)
> 
> library(scico)
> 
> library(plotly)
> 
> library(ggraph)
> 
>  
> 
> #upload
> 
> aes<-read.csv("Test_adjac.csv", row.names = 1)
> 
> details<-read.csv("Test_cat.csv")
> 
>  
> 
>  
> 
> # adjacency  table
> 
> aes_collapsed<-aes %>%
> 
>   rownames_to_column(var='Names') %>%
> 
>   tidyr::gather(target, weight, 1:ncol(aes)+1) %>%
> 
>   dplyr::filter(weight != 0) %>%
> 
>   mutate(weight = ifelse(weight == "-1", 0, weight)) # here 0 = 
> negative values
> 
>  
> 
> write.csv(aes_collapsed, "edges_table-Test.csv", row.names = F)
> 
> edge_list<-read.csv("edges_table-Test.csv")
> 
>  
> 
>  
> 
> #create network and add some necessary attributes (vertices) for the 
> plot
> 
>  
> 
> network <- graph_from_data_frame(aes_collapsed, directed= FALSE,
> 
>                                  vertices = details)
> 
>  
> 
> ### network and vertex with 'subcategory_type'
> 
>  
> 
> temp<-cluster_optimal(network)
> 
> temp<-cbind(membership=temp$membership, Names=temp$name)
> 
> aes_collapsed <- aes_collapsed %>%
> 
>   merge(temp, by="Names")
> 
>  
> 
> network <- network %>%
> 
>   set_edge_attr(name = "type", value = factor(aes_collapsed$Names,
> 
>                                                  ordered =
> is.ordered(V(network)$name))) %>%
> 
>   set_edge_attr(name = "membership", value = aes_collapsed$membership) 
> %>%
> 
>   set_edge_attr(name = "color",
> 
>               value = c(viridis::viridis(21))
> 
>               [match(E(.)$type, c(factor(V(.)$name)))]) %>%
> 
>   set_vertex_attr(name = "trans_v_net", value = c(transitivity(., type 
> =
> "local"))) %>%
> 
>   set_vertex_attr(name = "hub_score", value = c(hub_score(.)$vector)) 
> %>%
> 
>   set_vertex_attr(name = "color",
> 
>               value = c(viridis::viridis((21)))
> 
>               [match(V(.)$name, c(factor(V(.)$name)))]) %>%
> 
>   set_vertex_attr(name= "community",
> value=cluster_optimal(.)$Subcategory_type)
> 
>  
> 
> clrs<-scico(3, palette = "batlow")
> 
>  
> 
> windowsFonts(Helvetica = windowsFont("Helvetica"))
> 
>  
> 
> par(bg="black")
> 
> network %>% plot(
> 
>      vertex.color=clrs[V(.)$community],
> 
>      vertex.size=V(.)$hub_score*20,
> 
>      vertex.frame.color=V(.)$color,
> 
>      vertex.label.color="white",
> 
>      vertex.label.cex=0.4,
> 
>      vertex.label.family="Helvetica",
> 
>      vertex.label.font=0.75,
> 
>      edge.curved=0.5,
> 
>      edge.width= E(.)$weight,
> 
>      edge.color = ifelse(edge_list$relationship == "pos", "blue", 
> "red"),
> 
>      layout=layout_with_mds(.))
> 
>  
> 
> tiff("figures/Test_network_bysubcatecory.tiff", width=1000, 
> height=900,
> res=120)
> 
> network %>%
> 
>   ggraph(., layout = "auto")+
> 
>   geom_edge_arc(curvature=0.3, aes(width=(E(network)$weight/10), 
> color=c("darkblue", "red")[as.factor(edge_list$relationship)],
> alpha=0.5)) +
> 
>   geom_node_point(aes(size = V(network)$hub_score*200, color=
> as.factor(V(network)$community))) +
> 
>   geom_node_text(aes(label =  V(network)$name), size=3, color="white", 
> repel=T)+
> 
>   scale_color_scico_d(palette = "batlow")+
> 
>   scale_edge_width(range = c(0.2,4))+
> 
>   scale_size(range = c(0.5,15)) +
> 
>   theme(plot.background = element_rect(fill = "black"),
> 
>         legend.position = "right",
> 
>         panel.background = element_rect(fill = "black"))
> 
> dev.off()
> 
>  
> 
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Kimmo Elo
> Sent: Thursday, March 21, 2024 10:51 AM
> To: r-help at r-project.org
> Subject: Re: [R] geom_edge & color
> 
>  
> 
> Dear Sibylle,
> 
>  
> 
> your example is not working! E.g. no data for "aes_collapsed".
> 
>  
> 
> Best,
> 
>  
> 
> Kimmo
> 
>  
> 
> ke, 2024-03-20 kello 19:28 +0100, SIBYLLE ST?CKLI via R-help kirjoitti:
> 
> > Dear community
> 
> > 
> 
> > I am using ggraph to plot a network analysis. See part 2 in the
> 
> > working example.
> 
> > Besides different colors for different groups of nodes:
> 
> > --> geom_node_point(aes(size = V(network)$hub_score*200, color=
> 
> > as.factor(V(network)$community)))
> 
> > I additionally want to consider different colors for different edge
> 
> > groups The grouping is defined in the edge_list$relationship: 
> > negative
> 
> > relationship = red and positive relationship = darkblue. The code is
> 
> > working in the way that the  groups are separated by two colors. 
> 
> > However, the code uses not the assigned colors. Does anyone have any
> 
> > idea how to adapt the code?
> 
> > --> geom_edge_arc(curvature=0.3, aes(width=(E(network)$weight/10),
> 
> > color=c("darkblue", "red")[as.factor(edge_list$relationship)],
> 
> > alpha=0.5)) +
> 
> > 
> 
> > Kind regards
> 
> > Sibylle
> 
> > 
> 
> > 
> 
> > 
> 
> > 
> 
> > Working example
> 
> > 
> 
> > library(circlize)
> 
> > library(ggplot2)
> 
> > library(igraph)
> 
> > library(tidyverse)
> 
> > library(RColorBrewer)
> 
> > library(stringi)
> 
> > library(scico)
> 
> > library(plotly)
> 
> > library(ggraph)
> 
> > 
> 
> > edges_table_Test.csv
> 
> > 
> 
> > Names   target  weight relationship
> 
> > B.B     A.A     4           pos
> 
> > C.C     A.A     5           pos
> 
> > D.D     A.A     5           neg
> 
> > E.E     A.A     5          neg
> 
> > F.F     A.A     1          pos
> 
> > C.C     B.B     5         pos
> 
> > E.E     B.B     1           pos
> 
> > F.F     B.B     2          pos
> 
> > A.A     C.C     5        pos
> 
> > B.B     C.C     1        pos
> 
> > D.D     C.C     5         pos
> 
> > E.E     C.C     5         pos
> 
> > F.F     C.C     3         pos
> 
> > A.A     D.D     5        neg
> 
> > B.B     D.D     1        neg
> 
> > C.C     D.D     5        neg
> 
> > E.E     D.D     5        neg
> 
> > F.F     D.D     4         neg
> 
> > A.A     E.E     5         neg
> 
> > B.B     E.E     1        neg
> 
> > C.C     E.E     4        neg
> 
> > D.D     E.E     5        neg
> 
> > F.F     E.E     5       pos
> 
> > A.A     F.F     5        pos
> 
> > B.B     F.F     1       pos
> 
> > C.C     F.F     2       pos
> 
> > D.D     F.F     3      pos
> 
> > E.E     F.F     4       pos
> 
> > F.F     F.F     5       pos
> 
> > 
> 
> > edge_list<-read.csv("edges_table_Test.csv")
> 
> > 
> 
> > network <- graph_from_data_frame(aes_collapsed, directed= FALSE,
> 
> >                                  vertices = details)
> 
> > 
> 
> > temp<-cluster_optimal(network)
> 
> > temp<-cbind(membership=temp$membership, Names=temp$name) 
> > aes_collapsed
> 
> > <- aes_collapsed %>%
> 
> >   merge(temp, by="Names")
> 
> > 
> 
> > 
> 
> > network <- network %>%
> 
> >   set_edge_attr(name = "type", value = factor(aes_collapsed$Names,
> 
> >                                                  ordered =
> 
> > is.ordered(V(network)$name))) %>%
> 
> >   set_edge_attr(name = "membership", value = 
> > aes_collapsed$membership)
> 
> > %>%
> 
> >   set_edge_attr(name = "color",
> 
> >               value = c(viridis::viridis(5))
> 
> >               [match(E(.)$type, c(factor(V(.)$name)))]) %>%
> 
> >   set_vertex_attr(name = "trans_v_net", value = c(transitivity(., 
> > type
> 
> > =
> 
> > "local"))) %>%
> 
> >   set_vertex_attr(name = "hub_score", value = 
> > c(hub_score(.)$vector))
> 
> > %>%
> 
> >   set_vertex_attr(name = "color",
> 
> >               value = c(viridis::viridis((5)))
> 
> >               [match(V(.)$name, c(factor(V(.)$name)))]) %>%
> 
> >   set_vertex_attr(name= "community",
> 
> > value=cluster_optimal(.)$membership)
> 
> > clrs<-scico(3, palette = "batlow")
> 
> > 
> 
> > ### part 1: network plot
> 
> > par(bg="black")
> 
> > network %>% plot(
> 
> >      vertex.color=clrs[V(.)$community],
> 
> >      vertex.size=V(.)$hub_score*5,
> 
> >      vertex.frame.color=V(.)$color,
> 
> >      vertex.label.color="white",
> 
> >      vertex.label.cex=0.5,
> 
> >      vertex.label.family="Helvetica",
> 
> >      vertex.label.font=1,
> 
> >      edge.curved=0.5,
> 
> >      edge.width= network,
> 
> >      layout=layout_with_mds(.))
> 
> > 
> 
> > ### part 2: ggraph
> 
> > tiff("figures/AES_network_bymembership.tiff", width=1000, 
> > height=700,
> 
> > res=120) network %>%
> 
> >   ggraph(., layout = "auto")+
> 
> > geom_edge_arc(curvature=0.3, aes(width=(E(network)$weight/10),
> 
> > color=c("darkblue", "red")[as.factor(edge_list$relationship)],
> 
> > alpha=0.5)) +
> 
> > 
> 
> >   geom_node_point(aes(size = V(network)$hub_score*200, color=
> 
> > as.factor(V(network)$community))) +
> 
> >   geom_node_text(aes(label =  V(network)$name), size=5, 
> > color="white",
> 
> > repel=T)+
> 
> >   scale_color_scico_d(palette = "batlow")+
> 
> >   scale_edge_width(range = c(0.2,4))+
> 
> >   scale_size(range = c(0.5,20)) +
> 
> >   #scale_edge_color_manual(values = c(scico(21, palette="batlow")))+
> 
> >   theme(plot.background = element_rect(fill = "black"),
> 
> >         legend.position = "right",
> 
> >         panel.background = element_rect(fill = "black"))
> 
> > dev.off()
> 
> > 
> 
> > ______________________________________________
> 
> >  <mailto:R-help at r-project.org> R-help at r-project.org mailing list -- 
> > To UNSUBSCRIBE and more, see
> 
> >  <https://stat.ethz.ch/mailman/listinfo/r-help>
> > https://stat.ethz.ch/mailman/listinfo/r-help
> 
> > PLEASE do read the posting guide
> 
> >  <http://www.R-project.org/posting-guide.html>
> > http://www.R-project.org/posting-guide.html
> 
> > and provide commented, minimal, self-contained, reproducible code.
> 
>  
> 
> ______________________________________________
> 
>  <mailto:R-help at r-project.org> R-help at r-project.org mailing list -- To 
> UNSUBSCRIBE and more, see  
> <https://stat.ethz.ch/mailman/listinfo/r-help>
> https://stat.ethz.ch/mailman/listinfo/r-help
> 
> PLEASE do read the posting guide
> <http://www.R-project.org/posting-guide.html>
> http://www.R-project.org/posting-guide.html
> 
> and provide commented, minimal, self-contained, reproducible code.
> 

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From pb @end|ng |rom |n|o||nk@com@br  Sun Mar 24 19:19:59 2024
From: pb @end|ng |rom |n|o||nk@com@br (Paulo Barata)
Date: Sun, 24 Mar 2024 15:19:59 -0300
Subject: [R] an issue about subsetting a vector
Message-ID: <73cc0a70-a8c1-41f7-afb5-967a092ff0ec@infolink.com.br>


To the R-Help list,

I would like to have a clarification about an issue that I observe when 
subsetting a vector. This is R version 4.3.3 on Windows 10.

-- Example with a vector:

 > a <- 1:5
 > a
[1] 1 2 3 4 5

So we have, with a negative index:
 > a[-3]
[1] 1 2 4 5

But when the index is integer(0), we have this:

 > a[integer(0)]
integer(0)
 > a[-integer(0)]
integer(0)

When it comes to the function integer(), the R Help file says:

"Value: integer creates a integer vector of the specified length. Each 
element of the vector is equal to 0."

But we see below that integer(0) is some kind of null vector, that is, 
no numbers are represented by integer(0):

 > class(integer(0))
[1] "integer"
 > length(integer(0))
[1] 0

So my question: in the expression a[-integer(0)], what happens exactly 
with the index -integer(0)? We see that integer(0), although of class 
integer, does not represent any numbers, as its length is zero, so it 
seems to me that it makes no sense to calculate its negative 
-integer(0). What exactly is -integer(0)?

In particular, why a[-integer(0)] is not the whole vector a, that is, 
[1] 1 2 3 4 5? In the example below, if the invalid index -99 is 
presented to a, the result is the whole vector:

 > a[-99]
[1] 1 2 3 4 5

If -integer(0) is an invalid index, why do we have this?

 > a[-integer(0)]
integer(0)

Why a[-integer(0)] is not the whole vector a?

Thank you very much.

Paulo Barata

Rio de Janeiro, Brazil


From bbo|ker @end|ng |rom gm@||@com  Sun Mar 24 19:30:25 2024
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Sun, 24 Mar 2024 14:30:25 -0400
Subject: [R] an issue about subsetting a vector
In-Reply-To: <73cc0a70-a8c1-41f7-afb5-967a092ff0ec@infolink.com.br>
References: <73cc0a70-a8c1-41f7-afb5-967a092ff0ec@infolink.com.br>
Message-ID: <cc5d7871-4db9-4438-b4c2-88f093372916@gmail.com>

    As with a lot of things in R, the behaviour is counterintuitive but 
(arguably) logical. The key (maybe) is that `a[-x]` does not mean "take 
all of the elements of a except those indicated by `x`, but rather, 
"negate x, then take all but the negative elements".  In other words,

  -integer(0)  is   integer(0)  (we multiply *each of the elements of 
integer(0)* by -1, but integer(0) has no elements)

   that reduces to a[integer(0)]

and from there you get "select none of the elements".

   A related point is explained in the R Inferno 
https://www.burns-stat.com/pages/Tutor/R_inferno.pdf section 8.1.13, 
"negative nothing is something".

   See also

https://stackoverflow.com/questions/42615728/subsetting-vector-how-to-programatically-pass-negative-index-safely

https://stackoverflow.com/questions/40026975/subsetting-with-negative-indices-best-practices/40029485#40029485

On 2024-03-24 2:19 p.m., Paulo Barata wrote:
> 
> To the R-Help list,
> 
> I would like to have a clarification about an issue that I observe when 
> subsetting a vector. This is R version 4.3.3 on Windows 10.
> 
> -- Example with a vector:
> 
>  > a <- 1:5
>  > a
> [1] 1 2 3 4 5
> 
> So we have, with a negative index:
>  > a[-3]
> [1] 1 2 4 5
> 
> But when the index is integer(0), we have this:
> 
>  > a[integer(0)]
> integer(0)
>  > a[-integer(0)]
> integer(0)
> 
> When it comes to the function integer(), the R Help file says:
> 
> "Value: integer creates a integer vector of the specified length. Each 
> element of the vector is equal to 0."
> 
> But we see below that integer(0) is some kind of null vector, that is, 
> no numbers are represented by integer(0):
> 
>  > class(integer(0))
> [1] "integer"
>  > length(integer(0))
> [1] 0
> 
> So my question: in the expression a[-integer(0)], what happens exactly 
> with the index -integer(0)? We see that integer(0), although of class 
> integer, does not represent any numbers, as its length is zero, so it 
> seems to me that it makes no sense to calculate its negative 
> -integer(0). What exactly is -integer(0)?
> 
> In particular, why a[-integer(0)] is not the whole vector a, that is, 
> [1] 1 2 3 4 5? In the example below, if the invalid index -99 is 
> presented to a, the result is the whole vector:
> 
>  > a[-99]
> [1] 1 2 3 4 5
> 
> If -integer(0) is an invalid index, why do we have this?
> 
>  > a[-integer(0)]
> integer(0)
> 
> Why a[-integer(0)] is not the whole vector a?
> 
> Thank you very much.
> 
> Paulo Barata
> 
> Rio de Janeiro, Brazil
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From p@u| @end|ng |rom @t@t@@uck|@nd@@c@nz  Sun Mar 24 22:43:29 2024
From: p@u| @end|ng |rom @t@t@@uck|@nd@@c@nz (Paul Murrell)
Date: Mon, 25 Mar 2024 10:43:29 +1300
Subject: [R] Double buffering plots on Windows
In-Reply-To: <61932829-7887-4658-BD7A-164D069B9B54@usask.ca>
References: <61932829-7887-4658-BD7A-164D069B9B54@usask.ca>
Message-ID: <b74c68da-a0b2-47dd-b54f-6b318488c24a@stat.auckland.ac.nz>

Hi

Take a look at dev.hold() and dev.flush()

Paul

On 23/03/24 06:43, Bickis, Mikelis wrote:
> Hello:
> 
> I want to present a sequence of plots as an animation. As a toy example 
> consider the code
> 
> function(n){for (i in 1:n){
> plot(1:100,sin(i*(1:100)),type="l")
> title(paste("n=",i))
> segments(0,0,100,0,col=2)
> }}
> 
> This sort-of works on a MacOS platform, but the rendering of the plots 
> is a bit choppy. Inserting a sleep function allows the plots to evolve 
> smoothly.
> 
> function(n){for (i in 1:n){
> plot(1:100,sin(i*(1:100)),type="l")
> title(paste("n=",i))
> segments(0,0,100,0,col=2)
> Sys.sleep(.2)
> }}
> 
> However, on a Windows platform, only the last plot is rendered without 
> the Sys.sleep, so the dynamic element is lost. Inserting the Sys.sleep 
> does allow all the plots to be rendered, but they seem to be erased 
> before they are drawn again, so there is substantial flicker in the 
> appearance.
> 
> Is there some kind of double-buffering available within R, so that plots 
> are rendered only after they are fully drawn, leaving the previous plot 
> visible until it is replaced? I just used the default graphics driver on 
> Windows ? is there perhaps a different driver that will the graphics 
> smoother?
> 
> Mik Bickis
> Professor Emeritus
> Department of Mathematics and Statistics
> University of Saskatchewan
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help 
> <https://stat.ethz.ch/mailman/listinfo/r-help>
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html 
> <http://www.R-project.org/posting-guide.html>
> and provide commented, minimal, self-contained, reproducible code.

-- 
Dr Paul Murrell (he/him)
Te Kura Tatauranga | Department of Statistics
Waipapa Taumata Rau | The University of Auckland
Private Bag 92019, Auckland 1142, New Zealand
64 9 3737599 x85392
paul at stat.auckland.ac.nz
www.stat.auckland.ac.nz/~paul/


From r@oknz @end|ng |rom gm@||@com  Mon Mar 25 10:11:25 2024
From: r@oknz @end|ng |rom gm@||@com (Richard O'Keefe)
Date: Mon, 25 Mar 2024 22:11:25 +1300
Subject: [R] an issue about subsetting a vector
In-Reply-To: <cc5d7871-4db9-4438-b4c2-88f093372916@gmail.com>
References: <73cc0a70-a8c1-41f7-afb5-967a092ff0ec@infolink.com.br>
 <cc5d7871-4db9-4438-b4c2-88f093372916@gmail.com>
Message-ID: <CABcYAdLASM+6k9=h97y4pJgPSk7i1K06tPbWM5Uqw1_7z58_bw@mail.gmail.com>

For questions like this, go to the manual.

Visit cran.r-project.org
The nav-bar on the left includes
"Documentation/Manuals/FAQ/Contributed".  Click on Manuals.
Look at "An Introduction to R" and click on the HTML link for the
current release
(this is the first link on the page)
Scroll down to see the table of contents.
2.7 Index vectors; selecting and modifying subsets of a data set
is the link you want.  Click on it.
The way it works is that integer(0) is "A vector of positive integral
quantities".
The relevant sentence is "The index vector can be of any length and
the result is of the same length as the index vector."
"Any length" here includes 0.

Your example would be a bit clearer if the elements of a[] were not integers.
So let's make them strings.
> a <- LETTERS[1:5]
> a
[1] "A" "B" "C" "D" "E"
> a[integer(0)]
character(0)

So selecting no elements from a vector of strings gives us a vector
with no strings
(rather than a vector with no integers).
-integer(0)
makes perfect sense and does exactly what anyone should expect:
the result and operand of unary - have the same kind of elements and the
same length and corresponding elements (of which there happen in this
case to be none) are negatives of each other.  So -integer(0) is predictably
the same as integer(0), and a[-integer(0)] is the same as a[integer(0)].

The key point is clarified in section 2.7; _[- _] is NOT special syntax.
What matters in vector[index] is what the *elements* of index are, not
what the syntax of the expression happens to be.

The tricky thing here is that integer(0) is logically BOTH a vector of positive
integer quantities AND a vector of negative integer quantities and the fact that
S (and following it, R) prefers the first interpretation in this
context is just a
fact about S (and following it, R).

It gets even trickier when you start including index value 0 into a vector of
otherwise positive (negative) integers, where in effect the zeros are
ignored.
> a[c(0,0,0,0,0,0)]
character(0)
> a[-c(0,0,0,0,0,0)]
character(0)

On Mon, 25 Mar 2024 at 07:31, Ben Bolker <bbolker at gmail.com> wrote:
>
>     As with a lot of things in R, the behaviour is counterintuitive but
> (arguably) logical. The key (maybe) is that `a[-x]` does not mean "take
> all of the elements of a except those indicated by `x`, but rather,
> "negate x, then take all but the negative elements".  In other words,
>
>   -integer(0)  is   integer(0)  (we multiply *each of the elements of
> integer(0)* by -1, but integer(0) has no elements)
>
>    that reduces to a[integer(0)]
>
> and from there you get "select none of the elements".
>
>    A related point is explained in the R Inferno
> https://www.burns-stat.com/pages/Tutor/R_inferno.pdf section 8.1.13,
> "negative nothing is something".
>
>    See also
>
> https://stackoverflow.com/questions/42615728/subsetting-vector-how-to-programatically-pass-negative-index-safely
>
> https://stackoverflow.com/questions/40026975/subsetting-with-negative-indices-best-practices/40029485#40029485
>
> On 2024-03-24 2:19 p.m., Paulo Barata wrote:
> >
> > To the R-Help list,
> >
> > I would like to have a clarification about an issue that I observe when
> > subsetting a vector. This is R version 4.3.3 on Windows 10.
> >
> > -- Example with a vector:
> >
> >  > a <- 1:5
> >  > a
> > [1] 1 2 3 4 5
> >
> > So we have, with a negative index:
> >  > a[-3]
> > [1] 1 2 4 5
> >
> > But when the index is integer(0), we have this:
> >
> >  > a[integer(0)]
> > integer(0)
> >  > a[-integer(0)]
> > integer(0)
> >
> > When it comes to the function integer(), the R Help file says:
> >
> > "Value: integer creates a integer vector of the specified length. Each
> > element of the vector is equal to 0."
> >
> > But we see below that integer(0) is some kind of null vector, that is,
> > no numbers are represented by integer(0):
> >
> >  > class(integer(0))
> > [1] "integer"
> >  > length(integer(0))
> > [1] 0
> >
> > So my question: in the expression a[-integer(0)], what happens exactly
> > with the index -integer(0)? We see that integer(0), although of class
> > integer, does not represent any numbers, as its length is zero, so it
> > seems to me that it makes no sense to calculate its negative
> > -integer(0). What exactly is -integer(0)?
> >
> > In particular, why a[-integer(0)] is not the whole vector a, that is,
> > [1] 1 2 3 4 5? In the example below, if the invalid index -99 is
> > presented to a, the result is the whole vector:
> >
> >  > a[-99]
> > [1] 1 2 3 4 5
> >
> > If -integer(0) is an invalid index, why do we have this?
> >
> >  > a[-integer(0)]
> > integer(0)
> >
> > Why a[-integer(0)] is not the whole vector a?
> >
> > Thank you very much.
> >
> > Paulo Barata
> >
> > Rio de Janeiro, Brazil
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bo@@ @end|ng |rom b@nge|@tech  Mon Mar 25 08:23:43 2024
From: bo@@ @end|ng |rom b@nge|@tech (Thomas K)
Date: Mon, 25 Mar 2024 07:23:43 +0000
Subject: [R] as.complex()
Message-ID: <7494a1e1-6ef0-4137-bd1f-60e52ce49b83@bangel.tech>

Needing a < , > comparison for imaginary numbers


From |kw@|mmo @end|ng |rom gm@||@com  Mon Mar 25 15:31:00 2024
From: |kw@|mmo @end|ng |rom gm@||@com (Iris Simmons)
Date: Mon, 25 Mar 2024 10:31:00 -0400
Subject: [R] as.complex()
In-Reply-To: <7494a1e1-6ef0-4137-bd1f-60e52ce49b83@bangel.tech>
References: <7494a1e1-6ef0-4137-bd1f-60e52ce49b83@bangel.tech>
Message-ID: <CADNULg-wy-PZrpD41Szfg0PftMtmE4roWmaPzwoNQTX=Bt0wnw@mail.gmail.com>

Hi Thomas,


If you want to compare the imaginary portions, you could do:

Im(z1) < Im(z2)

If you want to compare the magnitudes, you could do:

Mod(z1) < Mod(z2)

If you want to compare complex numbers, i.e. z1 < z2, well that just
doesn't make sense.

On Mon, Mar 25, 2024, 10:17 Thomas K <boss at bangel.tech> wrote:

> Needing a < , > comparison for imaginary numbers
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Mar 25 15:37:28 2024
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 25 Mar 2024 07:37:28 -0700
Subject: [R] as.complex()
In-Reply-To: <7494a1e1-6ef0-4137-bd1f-60e52ce49b83@bangel.tech>
References: <7494a1e1-6ef0-4137-bd1f-60e52ce49b83@bangel.tech>
Message-ID: <F20ED986-B6E6-4164-A754-BB4CACF36977@dcn.davis.ca.us>

?complex

On March 25, 2024 12:23:43 AM PDT, Thomas K <boss at bangel.tech> wrote:
>Needing a < , > comparison for imaginary numbers
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From |r|end|y @end|ng |rom yorku@c@  Mon Mar 25 16:23:53 2024
From: |r|end|y @end|ng |rom yorku@c@ (Michael L Friendly)
Date: Mon, 25 Mar 2024 15:23:53 +0000
Subject: [R] Double buffering plots on Windows
Message-ID: <YQBPR0101MB4652D695075E3AF26A47E426AB362@YQBPR0101MB4652.CANPRD01.PROD.OUTLOOK.COM>

Hi Paul

Is there a concrete working example somewhere that shows how to use these to do an animation on Windows (R Gui &/or RStudio) using base R plot() and friends?

I have several old examples somewhere that used to work (R < ~ 3), but now no longer work as before.




Date: Mon, 25 Mar 2024 10:43:29 +1300

From: Paul Murrell <paul at stat.auckland.ac.nz<mailto:paul at stat.auckland.ac.nz>>

To: "Bickis, Mikelis" <bickis at math.usask.ca<mailto:bickis at math.usask.ca>>, "r-help at r-project.org<mailto:r-help at r-project.org>"

                <r-help at r-project.org<mailto:r-help at r-project.org>>

Subject: Re: [R] Double buffering plots on Windows

Message-ID: <b74c68da-a0b2-47dd-b54f-6b318488c24a at stat.auckland.ac.nz<mailto:b74c68da-a0b2-47dd-b54f-6b318488c24a at stat.auckland.ac.nz>>

Content-Type: text/plain; charset="utf-8"; Format="flowed"



Hi



Take a look at dev.hold() and dev.flush()



Paul


---
Michael Friendly     Email: friendly AT yorku DOT ca
Professor, Psychology Dept.
York University      Voice: 416 736-2100 x66249
4700 Keele Street    Web: http://www.datavis.ca<http://www.datavis.ca/> | @datavisFriendly
Toronto, ONT  M3J 1P3 CANADA


	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Mon Mar 25 15:27:56 2024
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Mon, 25 Mar 2024 10:27:56 -0400
Subject: [R] as.complex()
In-Reply-To: <7494a1e1-6ef0-4137-bd1f-60e52ce49b83@bangel.tech>
References: <7494a1e1-6ef0-4137-bd1f-60e52ce49b83@bangel.tech>
Message-ID: <3dce08e8-72e2-426d-802f-7d0dfd398f53@gmail.com>

   That's hard to define unambiguously at a mathematical level.  What 
definition did you have in mind?  Can you provide more context?  (Maybe 
you want to compare Mod(x) to Mod(y) ?)

On 2024-03-25 3:23 a.m., Thomas K wrote:
> Needing a < , > comparison for imaginary numbers
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From p@u| @end|ng |rom @t@t@@uck|@nd@@c@nz  Mon Mar 25 22:59:56 2024
From: p@u| @end|ng |rom @t@t@@uck|@nd@@c@nz (Paul Murrell)
Date: Tue, 26 Mar 2024 10:59:56 +1300
Subject: [R] Double buffering plots on Windows
In-Reply-To: <YQBPR0101MB4652D695075E3AF26A47E426AB362@YQBPR0101MB4652.CANPRD01.PROD.OUTLOOK.COM>
References: <YQBPR0101MB4652D695075E3AF26A47E426AB362@YQBPR0101MB4652.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <0c5e79c6-b080-4ae6-800d-0448f8f2109c@stat.auckland.ac.nz>

Hi

I would not describe myself as a heavy user of this stuff (either 
Windows or animation) - are you able to share your examples ?

Paul

On 26/03/24 04:23, Michael L Friendly wrote:
> Hi Paul
> 
> Is there a concrete working example somewhere that shows how to use 
> these to do an animation on Windows (R Gui &/or RStudio) using base R 
> plot() and friends?
> 
> I have several old examples somewhere that used to work (R < ~ 3), but 
> now no longer work as before.
> 
> 
> 
> 
> Date: Mon, 25 Mar 2024 10:43:29 +1300
> 
> From: Paul Murrell 
> <paul at stat.auckland.ac.nz<mailto:paul at stat.auckland.ac.nz>>
> 
> To: "Bickis, Mikelis" 
> <bickis at math.usask.ca<mailto:bickis at math.usask.ca>>, 
> "r-help at r-project.org<mailto:r-help at r-project.org>"
> 
> <r-help at r-project.org<mailto:r-help at r-project.org>>
> 
> Subject: Re: [R] Double buffering plots on Windows
> 
> Message-ID: 
> <b74c68da-a0b2-47dd-b54f-6b318488c24a at stat.auckland.ac.nz<mailto:b74c68da-a0b2-47dd-b54f-6b318488c24a at stat.auckland.ac.nz>>
> 
> Content-Type: text/plain; charset="utf-8"; Format="flowed"
> 
> 
> 
> Hi
> 
> 
> 
> Take a look at dev.hold() and dev.flush()
> 
> 
> 
> Paul
> 
> 
> ---
> Michael Friendly Email: friendly AT yorku DOT ca
> Professor, Psychology Dept.
> York University Voice: 416 736-2100 x66249
> 4700 Keele Street Web: http://www.datavis.ca 
> <http://www.datavis.ca><http://www.datavis.ca/ <http://www.datavis.ca/>> | @datavisFriendly
> Toronto, ONT M3J 1P3 CANADA
> 
> 
> [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help 
> <https://stat.ethz.ch/mailman/listinfo/r-help>
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html 
> <http://www.R-project.org/posting-guide.html>
> and provide commented, minimal, self-contained, reproducible code.

-- 
Dr Paul Murrell (he/him)
Te Kura Tatauranga | Department of Statistics
Waipapa Taumata Rau | The University of Auckland
Private Bag 92019, Auckland 1142, New Zealand
64 9 3737599 x85392
paul at stat.auckland.ac.nz
www.stat.auckland.ac.nz/~paul/


From r@oknz @end|ng |rom gm@||@com  Mon Mar 25 23:57:04 2024
From: r@oknz @end|ng |rom gm@||@com (Richard O'Keefe)
Date: Tue, 26 Mar 2024 11:57:04 +1300
Subject: [R] as.complex()
In-Reply-To: <7494a1e1-6ef0-4137-bd1f-60e52ce49b83@bangel.tech>
References: <7494a1e1-6ef0-4137-bd1f-60e52ce49b83@bangel.tech>
Message-ID: <CABcYAdLHrXqtm4k=7e2XJWGTZ=zKCGffjsbmdmFbbPPje7-hgg@mail.gmail.com>

What is your actual problem that you are trying to solve by comparing
imaginary numbers?
The reals are an ordered field.
The complex numbers are a field but cannot support an ordering that is
consistent with
the field (or even ring) axioms.
The imaginary numbers are not a field or even a ring.
To quote Brian Marick's wonderful sticker, "An example would be good about now".


On Tue, 26 Mar 2024 at 03:17, Thomas K <boss at bangel.tech> wrote:
>
> Needing a < , > comparison for imaginary numbers
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @tyen @end|ng |rom ntu@edu@tw  Tue Mar 26 03:02:55 2024
From: @tyen @end|ng |rom ntu@edu@tw (Steven Yen)
Date: Tue, 26 Mar 2024 10:02:55 +0800
Subject: [R] Printout and saved results
Message-ID: <cc7aaa3b-3016-4b7e-8cd5-733cbb7450a0@ntu.edu.tw>

How can I have both printout and saved results at the same time.

The subroutine first return "out" and the printout gets printed, but not 
saved.

I then run the "invisible" line. Results got saved and accessible but no 
printout.

How can I have both printout and also have the results saved? Thank you!

 > dstat4 <- function(data,digits=3){
+?? Mean??? <- apply(data,2,mean,na.rm=TRUE)
+?? Std.dev <- apply(data,2,sd,? na.rm=TRUE)
+?? Min <- apply(data,2,min,na.rm=TRUE)
+?? Max <- apply(data,2,max,na.rm=TRUE)
+?? Obs <- dim(data)[1]
+?? out <-round(cbind(Mean,Std.dev,Min,Max,Obs),digits)
+?? out
+ # invisible(list(Mean=Mean,Std.dev=Std.dev,Min=Min,Max=Max))
+ }
 > x1<-rnorm(n=5,mean=5, sd=1)
 > x2<-rnorm(n=5,mean=10,sd=2)
 > w<-rnorm(n=5,mean=2,sd=0.3)
 > mydata<-data.frame(cbind(x1,x2))
 > v<-dstat4(mydata); v
 ???? Mean Std.dev?? Min??? Max Obs
x1? 5.000?? 0.922 3.900? 6.282?? 5
x2 10.769?? 1.713 9.209 13.346?? 5
 > v$Mean
Error in v$Mean : $ operator is invalid for atomic vectors
 > dstat4 <- function(data,digits=3){
+?? Mean??? <- apply(data,2,mean,na.rm=TRUE)
+?? Std.dev <- apply(data,2,sd,? na.rm=TRUE)
+?? Min <- apply(data,2,min,na.rm=TRUE)
+?? Max <- apply(data,2,max,na.rm=TRUE)
+?? Obs <- dim(data)[1]
+?? out <-round(cbind(Mean,Std.dev,Min,Max,Obs),digits)
+ # out
+?? invisible(list(Mean=Mean,Std.dev=Std.dev,Min=Min,Max=Max))
+ }

 > v<-dstat4(mydata)
 > v$Mean
 ????? x1?????? x2
4.233051 9.564454


From r@oknz @end|ng |rom gm@||@com  Tue Mar 26 04:24:19 2024
From: r@oknz @end|ng |rom gm@||@com (Richard O'Keefe)
Date: Tue, 26 Mar 2024 16:24:19 +1300
Subject: [R] Printout and saved results
In-Reply-To: <cc7aaa3b-3016-4b7e-8cd5-733cbb7450a0@ntu.edu.tw>
References: <cc7aaa3b-3016-4b7e-8cd5-733cbb7450a0@ntu.edu.tw>
Message-ID: <CABcYAdK4kCBY=owe6ceFcsdce9geVCvQQU45KgNoH94sZw_q4g@mail.gmail.com>

Not clear what you mean by "saved".
If you call a function and the result is printed, the result is
remembered for a wee while in
the variable .Last.value, so you can do
> function.with.interesting.result(.......)
> retained.interesting.result <- .Last.value
or even
> .Last.value -> retained.interesting.result

If you know before you start writing the expression that you want to
save the value,
you can wrap the assignment in parentheses, making it an expression:

> (retained.interesting.result <- function.with.interesting.result(......))


On Tue, 26 Mar 2024 at 15:03, Steven Yen <styen at ntu.edu.tw> wrote:
>
> How can I have both printout and saved results at the same time.
>
> The subroutine first return "out" and the printout gets printed, but not
> saved.
>
> I then run the "invisible" line. Results got saved and accessible but no
> printout.
>
> How can I have both printout and also have the results saved? Thank you!
>
>  > dstat4 <- function(data,digits=3){
> +   Mean    <- apply(data,2,mean,na.rm=TRUE)
> +   Std.dev <- apply(data,2,sd,  na.rm=TRUE)
> +   Min <- apply(data,2,min,na.rm=TRUE)
> +   Max <- apply(data,2,max,na.rm=TRUE)
> +   Obs <- dim(data)[1]
> +   out <-round(cbind(Mean,Std.dev,Min,Max,Obs),digits)
> +   out
> + # invisible(list(Mean=Mean,Std.dev=Std.dev,Min=Min,Max=Max))
> + }
>  > x1<-rnorm(n=5,mean=5, sd=1)
>  > x2<-rnorm(n=5,mean=10,sd=2)
>  > w<-rnorm(n=5,mean=2,sd=0.3)
>  > mydata<-data.frame(cbind(x1,x2))
>  > v<-dstat4(mydata); v
>       Mean Std.dev   Min    Max Obs
> x1  5.000   0.922 3.900  6.282   5
> x2 10.769   1.713 9.209 13.346   5
>  > v$Mean
> Error in v$Mean : $ operator is invalid for atomic vectors
>  > dstat4 <- function(data,digits=3){
> +   Mean    <- apply(data,2,mean,na.rm=TRUE)
> +   Std.dev <- apply(data,2,sd,  na.rm=TRUE)
> +   Min <- apply(data,2,min,na.rm=TRUE)
> +   Max <- apply(data,2,max,na.rm=TRUE)
> +   Obs <- dim(data)[1]
> +   out <-round(cbind(Mean,Std.dev,Min,Max,Obs),digits)
> + # out
> +   invisible(list(Mean=Mean,Std.dev=Std.dev,Min=Min,Max=Max))
> + }
>
>  > v<-dstat4(mydata)
>  > v$Mean
>        x1       x2
> 4.233051 9.564454
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From rmh @end|ng |rom temp|e@edu  Tue Mar 26 04:28:10 2024
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Tue, 26 Mar 2024 03:28:10 +0000
Subject: [R] [External]  Printout and saved results
In-Reply-To: <cc7aaa3b-3016-4b7e-8cd5-733cbb7450a0@ntu.edu.tw>
References: <cc7aaa3b-3016-4b7e-8cd5-733cbb7450a0@ntu.edu.tw>
Message-ID: <81905F06-F15E-4FFB-BF3A-E742D46F9A74@temple.edu>

dstat4 <- function(data) {
  Mean    <- apply(data, 2, mean, na.rm=TRUE)
  Std.dev <- apply(data, 2, sd,  na.rm=TRUE)
  Min <- apply(data, 2, min, na.rm=TRUE)
  Max <- apply(data, 2, max, na.rm=TRUE)
  Obs <- dim(data)[1]
  data.frame(Mean, Std.dev, Min, Max, Obs)
}

## don't round inside a function.
## rounding is for printing, not for calculating.
## use a space after a comma
## use a space on both sides of assignment <-

## I made the result a data.frame to allow $ selection to work.

x1 <- rnorm(n=5, mean=5, sd=1)
x2 <- rnorm(n=5, mean=10, sd=2)
w <- rnorm(n=5, mean=2, sd=0.3)
mydata <- data.frame(x1, x2, w)

dstat4(mydata)

round(v <- dstat4(mydata), digits=3)

v

v$Mean

round(v$Mean, 3)


> On Mar 25, 2024, at 22:02, Steven Yen <styen at ntu.edu.tw> wrote:
>
> How can I have both printout and saved results at the same time.
>
> The subroutine first return "out" and the printout gets printed, but not saved.
>
> I then run the "invisible" line. Results got saved and accessible but no printout.
>
> How can I have both printout and also have the results saved? Thank you!
>
> > dstat4 <- function(data,digits=3){
> +   Mean    <- apply(data,2,mean,na.rm=TRUE)
> +   Std.dev <- apply(data,2,sd,  na.rm=TRUE)
> +   Min <- apply(data,2,min,na.rm=TRUE)
> +   Max <- apply(data,2,max,na.rm=TRUE)
> +   Obs <- dim(data)[1]
> +   out <-round(cbind(Mean,Std.dev,Min,Max,Obs),digits)
> +   out
> + # invisible(list(Mean=Mean,Std.dev=Std.dev,Min=Min,Max=Max))
> + }
> > x1<-rnorm(n=5,mean=5, sd=1)
> > x2<-rnorm(n=5,mean=10,sd=2)
> > w<-rnorm(n=5,mean=2,sd=0.3)
> > mydata<-data.frame(cbind(x1,x2))
> > v<-dstat4(mydata); v
>      Mean Std.dev   Min    Max Obs
> x1  5.000   0.922 3.900  6.282   5
> x2 10.769   1.713 9.209 13.346   5
> > v$Mean
> Error in v$Mean : $ operator is invalid for atomic vectors
> > dstat4 <- function(data,digits=3){
> +   Mean    <- apply(data,2,mean,na.rm=TRUE)
> +   Std.dev <- apply(data,2,sd,  na.rm=TRUE)
> +   Min <- apply(data,2,min,na.rm=TRUE)
> +   Max <- apply(data,2,max,na.rm=TRUE)
> +   Obs <- dim(data)[1]
> +   out <-round(cbind(Mean,Std.dev,Min,Max,Obs),digits)
> + # out
> +   invisible(list(Mean=Mean,Std.dev=Std.dev,Min=Min,Max=Max))
> + }
>
> > v<-dstat4(mydata)
> > v$Mean
>       x1       x2
> 4.233051 9.564454
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.r-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @tyen @end|ng |rom ntu@edu@tw  Tue Mar 26 05:00:49 2024
From: @tyen @end|ng |rom ntu@edu@tw (Steven Yen)
Date: Tue, 26 Mar 2024 12:00:49 +0800
Subject: [R] Printout and saved results
In-Reply-To: <CABcYAdK4kCBY=owe6ceFcsdce9geVCvQQU45KgNoH94sZw_q4g@mail.gmail.com>
References: <cc7aaa3b-3016-4b7e-8cd5-733cbb7450a0@ntu.edu.tw>
 <CABcYAdK4kCBY=owe6ceFcsdce9geVCvQQU45KgNoH94sZw_q4g@mail.gmail.com>
Message-ID: <e23bc0aa-b6f1-4593-a19d-13e6c4002174@ntu.edu.tw>

I just like the subroutine to spit out results (Mean, Std.dev, etc.) and 
also be able to access the results for further processing, i.e.,

v$Mean

v$Std.dev

On 3/26/2024 11:24 AM, Richard O'Keefe wrote:
> Not clear what you mean by "saved".
> If you call a function and the result is printed, the result is
> remembered for a wee while in
> the variable .Last.value, so you can do
>> function.with.interesting.result(.......)
>> retained.interesting.result <- .Last.value
> or even
>> .Last.value -> retained.interesting.result
> If you know before you start writing the expression that you want to
> save the value,
> you can wrap the assignment in parentheses, making it an expression:
>
>> (retained.interesting.result <- function.with.interesting.result(......))
>
> On Tue, 26 Mar 2024 at 15:03, Steven Yen <styen at ntu.edu.tw> wrote:
>> How can I have both printout and saved results at the same time.
>>
>> The subroutine first return "out" and the printout gets printed, but not
>> saved.
>>
>> I then run the "invisible" line. Results got saved and accessible but no
>> printout.
>>
>> How can I have both printout and also have the results saved? Thank you!
>>
>>   > dstat4 <- function(data,digits=3){
>> +   Mean    <- apply(data,2,mean,na.rm=TRUE)
>> +   Std.dev <- apply(data,2,sd,  na.rm=TRUE)
>> +   Min <- apply(data,2,min,na.rm=TRUE)
>> +   Max <- apply(data,2,max,na.rm=TRUE)
>> +   Obs <- dim(data)[1]
>> +   out <-round(cbind(Mean,Std.dev,Min,Max,Obs),digits)
>> +   out
>> + # invisible(list(Mean=Mean,Std.dev=Std.dev,Min=Min,Max=Max))
>> + }
>>   > x1<-rnorm(n=5,mean=5, sd=1)
>>   > x2<-rnorm(n=5,mean=10,sd=2)
>>   > w<-rnorm(n=5,mean=2,sd=0.3)
>>   > mydata<-data.frame(cbind(x1,x2))
>>   > v<-dstat4(mydata); v
>>        Mean Std.dev   Min    Max Obs
>> x1  5.000   0.922 3.900  6.282   5
>> x2 10.769   1.713 9.209 13.346   5
>>   > v$Mean
>> Error in v$Mean : $ operator is invalid for atomic vectors
>>   > dstat4 <- function(data,digits=3){
>> +   Mean    <- apply(data,2,mean,na.rm=TRUE)
>> +   Std.dev <- apply(data,2,sd,  na.rm=TRUE)
>> +   Min <- apply(data,2,min,na.rm=TRUE)
>> +   Max <- apply(data,2,max,na.rm=TRUE)
>> +   Obs <- dim(data)[1]
>> +   out <-round(cbind(Mean,Std.dev,Min,Max,Obs),digits)
>> + # out
>> +   invisible(list(Mean=Mean,Std.dev=Std.dev,Min=Min,Max=Max))
>> + }
>>
>>   > v<-dstat4(mydata)
>>   > v$Mean
>>         x1       x2
>> 4.233051 9.564454
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Mar 26 06:03:29 2024
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 25 Mar 2024 22:03:29 -0700
Subject: [R] Printout and saved results
In-Reply-To: <e23bc0aa-b6f1-4593-a19d-13e6c4002174@ntu.edu.tw>
References: <cc7aaa3b-3016-4b7e-8cd5-733cbb7450a0@ntu.edu.tw>
 <CABcYAdK4kCBY=owe6ceFcsdce9geVCvQQU45KgNoH94sZw_q4g@mail.gmail.com>
 <e23bc0aa-b6f1-4593-a19d-13e6c4002174@ntu.edu.tw>
Message-ID: <978DFF7E-E7D9-4E5B-8CD1-433E14DFFD47@dcn.davis.ca.us>

Your desire is not unusual among novices... but it is really not a good idea for your function to be making those decisions. Look at how R does things:

The lm function prints nothing... it returns an object containing the result of a linear regression. If you happen to call it directly from the R command prompt and don't assign it to a variable, then the command interpreter notices that return value and prints it. Since the lm object has a dedicated print method associated with it, that output looks different than a plain list object would... but the fact that it has a special print method (?print.lm) is just window dressing unrelated to your request.

The important part is that the lm function doesn't even consider printing anything out... it is the code that calls the function that determines whether it will get printed. So...

lm( hp ~ disp, data = mtcars )  # printed by command interpreter
z <- lm( hp ~ disp, data = mtcars ) # assignment operator returns the value of z to the command processor, but invisibly
( z <- lm( hp ~ disp, data = mtcars ) ) # strips off the invisible marking so the value gets printed

Another example:

f <- function() {
  x <- 4
  x  # doesn't print
  invisible( 5 ) # return invisible result
}

f()  # doesn't print 4 because there is no command prompt looking at x alone on a line... it is inside f
# command prompt doesn't print 5 because that 5 has been marked as invisible
(f()) # command interpreter prints 5

Leaving it up to the calling code to decide whether to print gives you the option of calling your analysis function possibly thousands of times and figuring out some slick way to summarize all those runs without thousands of printouts that you are not going to wade through anyway and would only slow the computer down (printing really does slow the computer down!)


On March 25, 2024 9:00:49 PM PDT, Steven Yen <styen at ntu.edu.tw> wrote:
>I just like the subroutine to spit out results (Mean, Std.dev, etc.) and also be able to access the results for further processing, i.e.,
>
>v$Mean
>
>v$Std.dev
>
>On 3/26/2024 11:24 AM, Richard O'Keefe wrote:
>> Not clear what you mean by "saved".
>> If you call a function and the result is printed, the result is
>> remembered for a wee while in
>> the variable .Last.value, so you can do
>>> function.with.interesting.result(.......)
>>> retained.interesting.result <- .Last.value
>> or even
>>> .Last.value -> retained.interesting.result
>> If you know before you start writing the expression that you want to
>> save the value,
>> you can wrap the assignment in parentheses, making it an expression:
>> 
>>> (retained.interesting.result <- function.with.interesting.result(......))
>> 
>> On Tue, 26 Mar 2024 at 15:03, Steven Yen <styen at ntu.edu.tw> wrote:
>>> How can I have both printout and saved results at the same time.
>>> 
>>> The subroutine first return "out" and the printout gets printed, but not
>>> saved.
>>> 
>>> I then run the "invisible" line. Results got saved and accessible but no
>>> printout.
>>> 
>>> How can I have both printout and also have the results saved? Thank you!
>>> 
>>>   > dstat4 <- function(data,digits=3){
>>> +   Mean    <- apply(data,2,mean,na.rm=TRUE)
>>> +   Std.dev <- apply(data,2,sd,  na.rm=TRUE)
>>> +   Min <- apply(data,2,min,na.rm=TRUE)
>>> +   Max <- apply(data,2,max,na.rm=TRUE)
>>> +   Obs <- dim(data)[1]
>>> +   out <-round(cbind(Mean,Std.dev,Min,Max,Obs),digits)
>>> +   out
>>> + # invisible(list(Mean=Mean,Std.dev=Std.dev,Min=Min,Max=Max))
>>> + }
>>>   > x1<-rnorm(n=5,mean=5, sd=1)
>>>   > x2<-rnorm(n=5,mean=10,sd=2)
>>>   > w<-rnorm(n=5,mean=2,sd=0.3)
>>>   > mydata<-data.frame(cbind(x1,x2))
>>>   > v<-dstat4(mydata); v
>>>        Mean Std.dev   Min    Max Obs
>>> x1  5.000   0.922 3.900  6.282   5
>>> x2 10.769   1.713 9.209 13.346   5
>>>   > v$Mean
>>> Error in v$Mean : $ operator is invalid for atomic vectors
>>>   > dstat4 <- function(data,digits=3){
>>> +   Mean    <- apply(data,2,mean,na.rm=TRUE)
>>> +   Std.dev <- apply(data,2,sd,  na.rm=TRUE)
>>> +   Min <- apply(data,2,min,na.rm=TRUE)
>>> +   Max <- apply(data,2,max,na.rm=TRUE)
>>> +   Obs <- dim(data)[1]
>>> +   out <-round(cbind(Mean,Std.dev,Min,Max,Obs),digits)
>>> + # out
>>> +   invisible(list(Mean=Mean,Std.dev=Std.dev,Min=Min,Max=Max))
>>> + }
>>> 
>>>   > v<-dstat4(mydata)
>>>   > v$Mean
>>>         x1       x2
>>> 4.233051 9.564454
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From @vi@e@gross m@iii@g oii gm@ii@com  Tue Mar 26 13:39:03 2024
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Tue, 26 Mar 2024 08:39:03 -0400
Subject: [R] Printout and saved results
In-Reply-To: <978DFF7E-E7D9-4E5B-8CD1-433E14DFFD47@dcn.davis.ca.us>
References: <cc7aaa3b-3016-4b7e-8cd5-733cbb7450a0@ntu.edu.tw>
 <CABcYAdK4kCBY=owe6ceFcsdce9geVCvQQU45KgNoH94sZw_q4g@mail.gmail.com>
 <e23bc0aa-b6f1-4593-a19d-13e6c4002174@ntu.edu.tw>
 <978DFF7E-E7D9-4E5B-8CD1-433E14DFFD47@dcn.davis.ca.us>
Message-ID: <002101da7f7a$95f0e0e0$c1d2a2a0$@gmail.com>

Just FYI, the R interpreter typically saves the last value returned briefly
in a variable called .Last.value that can be accessed before you do anything
else.

> sin(.5)
[1] 0.4794255
> temp <- .Last.value
> print(temp)
[1] 0.4794255
> sin(.666)
[1] 0.6178457
> .Last.value
[1] 0.6178457
> temp
[1] 0.4794255
> invisible(sin(0.2))
> .Last.value
[1] 0.1986693

So perhaps if you grab it in time, you can call your function and let the
REPL display it (or not) and yet save the value.



-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Jeff Newmiller via
R-help
Sent: Tuesday, March 26, 2024 1:03 AM
To: r-help at r-project.org
Subject: Re: [R] Printout and saved results

Your desire is not unusual among novices... but it is really not a good idea
for your function to be making those decisions. Look at how R does things:

The lm function prints nothing... it returns an object containing the result
of a linear regression. If you happen to call it directly from the R command
prompt and don't assign it to a variable, then the command interpreter
notices that return value and prints it. Since the lm object has a dedicated
print method associated with it, that output looks different than a plain
list object would... but the fact that it has a special print method
(?print.lm) is just window dressing unrelated to your request.

The important part is that the lm function doesn't even consider printing
anything out... it is the code that calls the function that determines
whether it will get printed. So...

lm( hp ~ disp, data = mtcars )  # printed by command interpreter
z <- lm( hp ~ disp, data = mtcars ) # assignment operator returns the value
of z to the command processor, but invisibly
( z <- lm( hp ~ disp, data = mtcars ) ) # strips off the invisible marking
so the value gets printed

Another example:

f <- function() {
  x <- 4
  x  # doesn't print
  invisible( 5 ) # return invisible result
}

f()  # doesn't print 4 because there is no command prompt looking at x alone
on a line... it is inside f
# command prompt doesn't print 5 because that 5 has been marked as invisible
(f()) # command interpreter prints 5

Leaving it up to the calling code to decide whether to print gives you the
option of calling your analysis function possibly thousands of times and
figuring out some slick way to summarize all those runs without thousands of
printouts that you are not going to wade through anyway and would only slow
the computer down (printing really does slow the computer down!)


On March 25, 2024 9:00:49 PM PDT, Steven Yen <styen at ntu.edu.tw> wrote:
>I just like the subroutine to spit out results (Mean, Std.dev, etc.) and
also be able to access the results for further processing, i.e.,
>
>v$Mean
>
>v$Std.dev
>
>On 3/26/2024 11:24 AM, Richard O'Keefe wrote:
>> Not clear what you mean by "saved".
>> If you call a function and the result is printed, the result is
>> remembered for a wee while in
>> the variable .Last.value, so you can do
>>> function.with.interesting.result(.......)
>>> retained.interesting.result <- .Last.value
>> or even
>>> .Last.value -> retained.interesting.result
>> If you know before you start writing the expression that you want to
>> save the value,
>> you can wrap the assignment in parentheses, making it an expression:
>> 
>>> (retained.interesting.result <-
function.with.interesting.result(......))
>> 
>> On Tue, 26 Mar 2024 at 15:03, Steven Yen <styen at ntu.edu.tw> wrote:
>>> How can I have both printout and saved results at the same time.
>>> 
>>> The subroutine first return "out" and the printout gets printed, but not
>>> saved.
>>> 
>>> I then run the "invisible" line. Results got saved and accessible but no
>>> printout.
>>> 
>>> How can I have both printout and also have the results saved? Thank you!
>>> 
>>>   > dstat4 <- function(data,digits=3){
>>> +   Mean    <- apply(data,2,mean,na.rm=TRUE)
>>> +   Std.dev <- apply(data,2,sd,  na.rm=TRUE)
>>> +   Min <- apply(data,2,min,na.rm=TRUE)
>>> +   Max <- apply(data,2,max,na.rm=TRUE)
>>> +   Obs <- dim(data)[1]
>>> +   out <-round(cbind(Mean,Std.dev,Min,Max,Obs),digits)
>>> +   out
>>> + # invisible(list(Mean=Mean,Std.dev=Std.dev,Min=Min,Max=Max))
>>> + }
>>>   > x1<-rnorm(n=5,mean=5, sd=1)
>>>   > x2<-rnorm(n=5,mean=10,sd=2)
>>>   > w<-rnorm(n=5,mean=2,sd=0.3)
>>>   > mydata<-data.frame(cbind(x1,x2))
>>>   > v<-dstat4(mydata); v
>>>        Mean Std.dev   Min    Max Obs
>>> x1  5.000   0.922 3.900  6.282   5
>>> x2 10.769   1.713 9.209 13.346   5
>>>   > v$Mean
>>> Error in v$Mean : $ operator is invalid for atomic vectors
>>>   > dstat4 <- function(data,digits=3){
>>> +   Mean    <- apply(data,2,mean,na.rm=TRUE)
>>> +   Std.dev <- apply(data,2,sd,  na.rm=TRUE)
>>> +   Min <- apply(data,2,min,na.rm=TRUE)
>>> +   Max <- apply(data,2,max,na.rm=TRUE)
>>> +   Obs <- dim(data)[1]
>>> +   out <-round(cbind(Mean,Std.dev,Min,Max,Obs),digits)
>>> + # out
>>> +   invisible(list(Mean=Mean,Std.dev=Std.dev,Min=Min,Max=Max))
>>> + }
>>> 
>>>   > v<-dstat4(mydata)
>>>   > v$Mean
>>>         x1       x2
>>> 4.233051 9.564454
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From bbo|ker @end|ng |rom gm@||@com  Tue Mar 26 14:19:34 2024
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Tue, 26 Mar 2024 09:19:34 -0400
Subject: [R] Printout and saved results
In-Reply-To: <002101da7f7a$95f0e0e0$c1d2a2a0$@gmail.com>
References: <cc7aaa3b-3016-4b7e-8cd5-733cbb7450a0@ntu.edu.tw>
 <CABcYAdK4kCBY=owe6ceFcsdce9geVCvQQU45KgNoH94sZw_q4g@mail.gmail.com>
 <e23bc0aa-b6f1-4593-a19d-13e6c4002174@ntu.edu.tw>
 <978DFF7E-E7D9-4E5B-8CD1-433E14DFFD47@dcn.davis.ca.us>
 <002101da7f7a$95f0e0e0$c1d2a2a0$@gmail.com>
Message-ID: <77648baf-5c43-49a8-8180-195a2fdc6a3b@gmail.com>

   Fragile and probably a bad idea, but:

"%.%" <- function(x,y) { assign(deparse(substitute(x)), y, 
parent.frame()); print(y) }


   > a %.% "hello"
   [1] "hello"
   > a
   [1] "hello"

  Not sure how much value this has over other idioms such as wrapping 
the assignment in parentheses, which makes the result into a new 
expression, which is then printed:

(a <- "hello")
[1] "hello"

On 2024-03-26 8:39 a.m., avi.e.gross at gmail.com wrote:
> Just FYI, the R interpreter typically saves the last value returned briefly
> in a variable called .Last.value that can be accessed before you do anything
> else.
> 
>> sin(.5)
> [1] 0.4794255
>> temp <- .Last.value
>> print(temp)
> [1] 0.4794255
>> sin(.666)
> [1] 0.6178457
>> .Last.value
> [1] 0.6178457
>> temp
> [1] 0.4794255
>> invisible(sin(0.2))
>> .Last.value
> [1] 0.1986693
> 
> So perhaps if you grab it in time, you can call your function and let the
> REPL display it (or not) and yet save the value.
> 
> 
> 
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Jeff Newmiller via
> R-help
> Sent: Tuesday, March 26, 2024 1:03 AM
> To: r-help at r-project.org
> Subject: Re: [R] Printout and saved results
> 
> Your desire is not unusual among novices... but it is really not a good idea
> for your function to be making those decisions. Look at how R does things:
> 
> The lm function prints nothing... it returns an object containing the result
> of a linear regression. If you happen to call it directly from the R command
> prompt and don't assign it to a variable, then the command interpreter
> notices that return value and prints it. Since the lm object has a dedicated
> print method associated with it, that output looks different than a plain
> list object would... but the fact that it has a special print method
> (?print.lm) is just window dressing unrelated to your request.
> 
> The important part is that the lm function doesn't even consider printing
> anything out... it is the code that calls the function that determines
> whether it will get printed. So...
> 
> lm( hp ~ disp, data = mtcars )  # printed by command interpreter
> z <- lm( hp ~ disp, data = mtcars ) # assignment operator returns the value
> of z to the command processor, but invisibly
> ( z <- lm( hp ~ disp, data = mtcars ) ) # strips off the invisible marking
> so the value gets printed
> 
> Another example:
> 
> f <- function() {
>    x <- 4
>    x  # doesn't print
>    invisible( 5 ) # return invisible result
> }
> 
> f()  # doesn't print 4 because there is no command prompt looking at x alone
> on a line... it is inside f
> # command prompt doesn't print 5 because that 5 has been marked as invisible
> (f()) # command interpreter prints 5
> 
> Leaving it up to the calling code to decide whether to print gives you the
> option of calling your analysis function possibly thousands of times and
> figuring out some slick way to summarize all those runs without thousands of
> printouts that you are not going to wade through anyway and would only slow
> the computer down (printing really does slow the computer down!)
> 
> 
> On March 25, 2024 9:00:49 PM PDT, Steven Yen <styen at ntu.edu.tw> wrote:
>> I just like the subroutine to spit out results (Mean, Std.dev, etc.) and
> also be able to access the results for further processing, i.e.,
>>
>> v$Mean
>>
>> v$Std.dev
>>
>> On 3/26/2024 11:24 AM, Richard O'Keefe wrote:
>>> Not clear what you mean by "saved".
>>> If you call a function and the result is printed, the result is
>>> remembered for a wee while in
>>> the variable .Last.value, so you can do
>>>> function.with.interesting.result(.......)
>>>> retained.interesting.result <- .Last.value
>>> or even
>>>> .Last.value -> retained.interesting.result
>>> If you know before you start writing the expression that you want to
>>> save the value,
>>> you can wrap the assignment in parentheses, making it an expression:
>>>
>>>> (retained.interesting.result <-
> function.with.interesting.result(......))
>>>
>>> On Tue, 26 Mar 2024 at 15:03, Steven Yen <styen at ntu.edu.tw> wrote:
>>>> How can I have both printout and saved results at the same time.
>>>>
>>>> The subroutine first return "out" and the printout gets printed, but not
>>>> saved.
>>>>
>>>> I then run the "invisible" line. Results got saved and accessible but no
>>>> printout.
>>>>
>>>> How can I have both printout and also have the results saved? Thank you!
>>>>
>>>>    > dstat4 <- function(data,digits=3){
>>>> +   Mean    <- apply(data,2,mean,na.rm=TRUE)
>>>> +   Std.dev <- apply(data,2,sd,  na.rm=TRUE)
>>>> +   Min <- apply(data,2,min,na.rm=TRUE)
>>>> +   Max <- apply(data,2,max,na.rm=TRUE)
>>>> +   Obs <- dim(data)[1]
>>>> +   out <-round(cbind(Mean,Std.dev,Min,Max,Obs),digits)
>>>> +   out
>>>> + # invisible(list(Mean=Mean,Std.dev=Std.dev,Min=Min,Max=Max))
>>>> + }
>>>>    > x1<-rnorm(n=5,mean=5, sd=1)
>>>>    > x2<-rnorm(n=5,mean=10,sd=2)
>>>>    > w<-rnorm(n=5,mean=2,sd=0.3)
>>>>    > mydata<-data.frame(cbind(x1,x2))
>>>>    > v<-dstat4(mydata); v
>>>>         Mean Std.dev   Min    Max Obs
>>>> x1  5.000   0.922 3.900  6.282   5
>>>> x2 10.769   1.713 9.209 13.346   5
>>>>    > v$Mean
>>>> Error in v$Mean : $ operator is invalid for atomic vectors
>>>>    > dstat4 <- function(data,digits=3){
>>>> +   Mean    <- apply(data,2,mean,na.rm=TRUE)
>>>> +   Std.dev <- apply(data,2,sd,  na.rm=TRUE)
>>>> +   Min <- apply(data,2,min,na.rm=TRUE)
>>>> +   Max <- apply(data,2,max,na.rm=TRUE)
>>>> +   Obs <- dim(data)[1]
>>>> +   out <-round(cbind(Mean,Std.dev,Min,Max,Obs),digits)
>>>> + # out
>>>> +   invisible(list(Mean=Mean,Std.dev=Std.dev,Min=Min,Max=Max))
>>>> + }
>>>>
>>>>    > v<-dstat4(mydata)
>>>>    > v$Mean
>>>>          x1       x2
>>>> 4.233051 9.564454
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>


From g||ted|||e2014 @end|ng |rom gm@||@com  Wed Mar 27 05:30:37 2024
From: g||ted|||e2014 @end|ng |rom gm@||@com (Ogbos Okike)
Date: Wed, 27 Mar 2024 05:30:37 +0100
Subject: [R] Output of tapply function as data frame
Message-ID: <CAC8ss307yPyFvs57kPk-enQNH+Kxg+OZfMPOnTg2qQ8v=NKyhQ@mail.gmail.com>

Warm greetings to you all.

Using the tapply function below:
data<-read.table("FD1month",col.names = c("Dates","count"))
x=data$count
 f<-factor(data$Dates)
AB<- tapply(x,f,mean)


I made a simple calculation. The result, stored in AB, is of the form
below. But an effort to write AB to a file as a data frame fails. When I
use the write table, it only produces the count column and strip of the
first column (date).

2005-11-01 2005-12-01 2006-01-01 2006-02-01 2006-03-01 2006-04-01
2006-05-01
 -4.106887  -4.259154  -5.836090  -4.756757  -4.118011  -4.487942
 -4.430705
2006-06-01 2006-07-01 2006-08-01 2006-09-01 2006-10-01 2006-11-01
2006-12-01
 -3.856727  -6.067103  -6.418767  -4.383031  -3.985805  -4.768196
-10.072579
2007-01-01 2007-02-01 2007-03-01 2007-04-01 2007-05-01 2007-06-01
2007-07-01
 -5.342338  -4.653128  -4.325094  -4.525373  -4.574783  -3.915600
 -4.127980
2007-08-01 2007-09-01 2007-10-01 2007-11-01 2007-12-01 2008-01-01
2008-02-01
 -3.952150  -4.033518  -4.532878  -4.522941  -4.485693  -3.922155
 -4.183578
2008-03-01 2008-04-01 2008-05-01 2008-06-01 2008-07-01 2008-08-01
2008-09-01
 -4.336969  -3.813306  -4.296579  -4.575095  -4.036036  -4.727994
 -4.347428
2008-10-01 2008-11-01 2008-12-01
 -4.029918  -4.260326  -4.454224

But the normal format I wish to display only appears on the terminal,
leading me to copy it and paste into a text file. That is, when I enter AB
on the terminal, it returns a format in the form:

008-02-01  -4.183578
2008-03-01  -4.336969
2008-04-01  -3.813306
2008-05-01  -4.296579
2008-06-01  -4.575095
2008-07-01  -4.036036
2008-08-01  -4.727994
2008-09-01  -4.347428
2008-10-01  -4.029918
2008-11-01  -4.260326
2008-12-01  -4.454224

Now, my question: How do I write out two columns displayed by AB on the
terminal to a file?

I have tried using AB<-data.frame(AB) but it doesn't work either.

Many thanks for your time.
Ogbos

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Mar 27 08:44:39 2024
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 27 Mar 2024 07:44:39 +0000
Subject: [R] Output of tapply function as data frame
In-Reply-To: <CAC8ss307yPyFvs57kPk-enQNH+Kxg+OZfMPOnTg2qQ8v=NKyhQ@mail.gmail.com>
References: <CAC8ss307yPyFvs57kPk-enQNH+Kxg+OZfMPOnTg2qQ8v=NKyhQ@mail.gmail.com>
Message-ID: <2480bdca-a38e-4e56-bf32-ac5d014c9a00@sapo.pt>

?s 04:30 de 27/03/2024, Ogbos Okike escreveu:
> Warm greetings to you all.
> 
> Using the tapply function below:
> data<-read.table("FD1month",col.names = c("Dates","count"))
> x=data$count
>   f<-factor(data$Dates)
> AB<- tapply(x,f,mean)
> 
> 
> I made a simple calculation. The result, stored in AB, is of the form
> below. But an effort to write AB to a file as a data frame fails. When I
> use the write table, it only produces the count column and strip of the
> first column (date).
> 
> 2005-11-01 2005-12-01 2006-01-01 2006-02-01 2006-03-01 2006-04-01
> 2006-05-01
>   -4.106887  -4.259154  -5.836090  -4.756757  -4.118011  -4.487942
>   -4.430705
> 2006-06-01 2006-07-01 2006-08-01 2006-09-01 2006-10-01 2006-11-01
> 2006-12-01
>   -3.856727  -6.067103  -6.418767  -4.383031  -3.985805  -4.768196
> -10.072579
> 2007-01-01 2007-02-01 2007-03-01 2007-04-01 2007-05-01 2007-06-01
> 2007-07-01
>   -5.342338  -4.653128  -4.325094  -4.525373  -4.574783  -3.915600
>   -4.127980
> 2007-08-01 2007-09-01 2007-10-01 2007-11-01 2007-12-01 2008-01-01
> 2008-02-01
>   -3.952150  -4.033518  -4.532878  -4.522941  -4.485693  -3.922155
>   -4.183578
> 2008-03-01 2008-04-01 2008-05-01 2008-06-01 2008-07-01 2008-08-01
> 2008-09-01
>   -4.336969  -3.813306  -4.296579  -4.575095  -4.036036  -4.727994
>   -4.347428
> 2008-10-01 2008-11-01 2008-12-01
>   -4.029918  -4.260326  -4.454224
> 
> But the normal format I wish to display only appears on the terminal,
> leading me to copy it and paste into a text file. That is, when I enter AB
> on the terminal, it returns a format in the form:
> 
> 008-02-01  -4.183578
> 2008-03-01  -4.336969
> 2008-04-01  -3.813306
> 2008-05-01  -4.296579
> 2008-06-01  -4.575095
> 2008-07-01  -4.036036
> 2008-08-01  -4.727994
> 2008-09-01  -4.347428
> 2008-10-01  -4.029918
> 2008-11-01  -4.260326
> 2008-12-01  -4.454224
> 
> Now, my question: How do I write out two columns displayed by AB on the
> terminal to a file?
> 
> I have tried using AB<-data.frame(AB) but it doesn't work either.
> 
> Many thanks for your time.
> Ogbos
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

The main trick is to pipe to as.data.frame. But the result will have one 
column only, you must assign the dates from the df's row names.
I also include an aggregate solution.



# create a test data set
set.seed(2024)
data <- data.frame(
   Date = sample(seq(Sys.Date() - 5, Sys.Date(), by = "1 days"), 100L, 
TRUE),
   count = sample(10L, 100L, TRUE)
)

# coerce tapply's result to class "data.frame"
res <- with(data, tapply(count, Date, mean)) |> as.data.frame()
# assign a dates column from the row names
res$Date <- row.names(res)
# cosmetics
names(res)[2:1] <- names(data)
# note that the row names are still tapply's names vector
# and that the columns order is not Date/count. Both are fixed
# after the calculations.
res
#>               count       Date
#> 2024-03-22 5.416667 2024-03-22
#> 2024-03-23 5.500000 2024-03-23
#> 2024-03-24 6.000000 2024-03-24
#> 2024-03-25 4.476190 2024-03-25
#> 2024-03-26 6.538462 2024-03-26
#> 2024-03-27 5.200000 2024-03-27

# fix the columns' order
res <- res[2:1]



# better all in one instruction
aggregate(count ~ Date, data, mean)
#>         Date    count
#> 1 2024-03-22 5.416667
#> 2 2024-03-23 5.500000
#> 3 2024-03-24 6.000000
#> 4 2024-03-25 4.476190
#> 5 2024-03-26 6.538462
#> 6 2024-03-27 5.200000



Also,
I'm glad to help as always but Ogbos, you have been an R-Help 
contributor for quite a while, please post data in dput format. Given 
the problem the output of the following is more than enough.


dput(head(data, 20L))


Hope this helps,

Rui Barradas


-- 
Este e-mail foi analisado pelo software antiv?rus AVG para verificar a presen?a de v?rus.
www.avg.com


From g||ted|||e2014 @end|ng |rom gm@||@com  Wed Mar 27 09:58:08 2024
From: g||ted|||e2014 @end|ng |rom gm@||@com (Ogbos Okike)
Date: Wed, 27 Mar 2024 09:58:08 +0100
Subject: [R] Output of tapply function as data frame: Problem Fixed
In-Reply-To: <2480bdca-a38e-4e56-bf32-ac5d014c9a00@sapo.pt>
References: <CAC8ss307yPyFvs57kPk-enQNH+Kxg+OZfMPOnTg2qQ8v=NKyhQ@mail.gmail.com>
 <2480bdca-a38e-4e56-bf32-ac5d014c9a00@sapo.pt>
Message-ID: <CAC8ss334xxa8oiBKyBPnUKsQ2HyrYiyJ=WVmOzkPWy1fyyPpjg@mail.gmail.com>

Dear Rui,
Nice to hear from you!

I am sorry for the omission and I have taken note.

Many thanks for responding. The second solution looks elegant as it quickly
resolved the problem.

Please, take a second look at the first solution. It refused to run. Looks
as if the pipe is not properly positioned. Efforts to correct it and get it
run failed. If you can look further, it would be great. If time does not
permit, I am fine too.

But having the too solutions will certainly make the subject more
interesting.
Thank you so much.
With warmest regards from
Ogbos

On Wed, Mar 27, 2024 at 8:44?AM Rui Barradas <ruipbarradas at sapo.pt> wrote:

> ?s 04:30 de 27/03/2024, Ogbos Okike escreveu:
> > Warm greetings to you all.
> >
> > Using the tapply function below:
> > data<-read.table("FD1month",col.names = c("Dates","count"))
> > x=data$count
> >   f<-factor(data$Dates)
> > AB<- tapply(x,f,mean)
> >
> >
> > I made a simple calculation. The result, stored in AB, is of the form
> > below. But an effort to write AB to a file as a data frame fails. When I
> > use the write table, it only produces the count column and strip of the
> > first column (date).
> >
> > 2005-11-01 2005-12-01 2006-01-01 2006-02-01 2006-03-01 2006-04-01
> > 2006-05-01
> >   -4.106887  -4.259154  -5.836090  -4.756757  -4.118011  -4.487942
> >   -4.430705
> > 2006-06-01 2006-07-01 2006-08-01 2006-09-01 2006-10-01 2006-11-01
> > 2006-12-01
> >   -3.856727  -6.067103  -6.418767  -4.383031  -3.985805  -4.768196
> > -10.072579
> > 2007-01-01 2007-02-01 2007-03-01 2007-04-01 2007-05-01 2007-06-01
> > 2007-07-01
> >   -5.342338  -4.653128  -4.325094  -4.525373  -4.574783  -3.915600
> >   -4.127980
> > 2007-08-01 2007-09-01 2007-10-01 2007-11-01 2007-12-01 2008-01-01
> > 2008-02-01
> >   -3.952150  -4.033518  -4.532878  -4.522941  -4.485693  -3.922155
> >   -4.183578
> > 2008-03-01 2008-04-01 2008-05-01 2008-06-01 2008-07-01 2008-08-01
> > 2008-09-01
> >   -4.336969  -3.813306  -4.296579  -4.575095  -4.036036  -4.727994
> >   -4.347428
> > 2008-10-01 2008-11-01 2008-12-01
> >   -4.029918  -4.260326  -4.454224
> >
> > But the normal format I wish to display only appears on the terminal,
> > leading me to copy it and paste into a text file. That is, when I enter
> AB
> > on the terminal, it returns a format in the form:
> >
> > 008-02-01  -4.183578
> > 2008-03-01  -4.336969
> > 2008-04-01  -3.813306
> > 2008-05-01  -4.296579
> > 2008-06-01  -4.575095
> > 2008-07-01  -4.036036
> > 2008-08-01  -4.727994
> > 2008-09-01  -4.347428
> > 2008-10-01  -4.029918
> > 2008-11-01  -4.260326
> > 2008-12-01  -4.454224
> >
> > Now, my question: How do I write out two columns displayed by AB on the
> > terminal to a file?
> >
> > I have tried using AB<-data.frame(AB) but it doesn't work either.
> >
> > Many thanks for your time.
> > Ogbos
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> Hello,
>
> The main trick is to pipe to as.data.frame. But the result will have one
> column only, you must assign the dates from the df's row names.
> I also include an aggregate solution.
>
>
>
> # create a test data set
> set.seed(2024)
> data <- data.frame(
>    Date = sample(seq(Sys.Date() - 5, Sys.Date(), by = "1 days"), 100L,
> TRUE),
>    count = sample(10L, 100L, TRUE)
> )
>
> # coerce tapply's result to class "data.frame"
> res <- with(data, tapply(count, Date, mean)) |> as.data.frame()
> # assign a dates column from the row names
> res$Date <- row.names(res)
> # cosmetics
> names(res)[2:1] <- names(data)
> # note that the row names are still tapply's names vector
> # and that the columns order is not Date/count. Both are fixed
> # after the calculations.
> res
> #>               count       Date
> #> 2024-03-22 5.416667 2024-03-22
> #> 2024-03-23 5.500000 2024-03-23
> #> 2024-03-24 6.000000 2024-03-24
> #> 2024-03-25 4.476190 2024-03-25
> #> 2024-03-26 6.538462 2024-03-26
> #> 2024-03-27 5.200000 2024-03-27
>
> # fix the columns' order
> res <- res[2:1]
>
>
>
> # better all in one instruction
> aggregate(count ~ Date, data, mean)
> #>         Date    count
> #> 1 2024-03-22 5.416667
> #> 2 2024-03-23 5.500000
> #> 3 2024-03-24 6.000000
> #> 4 2024-03-25 4.476190
> #> 5 2024-03-26 6.538462
> #> 6 2024-03-27 5.200000
>
>
>
> Also,
> I'm glad to help as always but Ogbos, you have been an R-Help
> contributor for quite a while, please post data in dput format. Given
> the problem the output of the following is more than enough.
>
>
> dput(head(data, 20L))
>
>
> Hope this helps,
>
> Rui Barradas
>
>
> --
> Este e-mail foi analisado pelo software antiv?rus AVG para verificar a
> presen?a de v?rus.
> www.avg.com
>

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Mar 27 22:45:49 2024
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 27 Mar 2024 21:45:49 +0000
Subject: [R] Output of tapply function as data frame: Problem Fixed
In-Reply-To: <CAC8ss334xxa8oiBKyBPnUKsQ2HyrYiyJ=WVmOzkPWy1fyyPpjg@mail.gmail.com>
References: <CAC8ss307yPyFvs57kPk-enQNH+Kxg+OZfMPOnTg2qQ8v=NKyhQ@mail.gmail.com>
 <2480bdca-a38e-4e56-bf32-ac5d014c9a00@sapo.pt>
 <CAC8ss334xxa8oiBKyBPnUKsQ2HyrYiyJ=WVmOzkPWy1fyyPpjg@mail.gmail.com>
Message-ID: <18c36343-ac71-4915-acf4-a24282153c3d@sapo.pt>

?s 08:58 de 27/03/2024, Ogbos Okike escreveu:
> Dear Rui,
> Nice to hear from you!
> 
> I am sorry for the omission and I have taken note.
> 
> Many thanks for responding. The second solution looks elegant as it quickly
> resolved the problem.
> 
> Please, take a second look at the first solution. It refused to run. Looks
> as if the pipe is not properly positioned. Efforts to correct it and get it
> run failed. If you can look further, it would be great. If time does not
> permit, I am fine too.
> 
> But having the too solutions will certainly make the subject more
> interesting.
> Thank you so much.
> With warmest regards from
> Ogbos
> 
> On Wed, Mar 27, 2024 at 8:44?AM Rui Barradas <ruipbarradas at sapo.pt> wrote:
> 
>> ?s 04:30 de 27/03/2024, Ogbos Okike escreveu:
>>> Warm greetings to you all.
>>>
>>> Using the tapply function below:
>>> data<-read.table("FD1month",col.names = c("Dates","count"))
>>> x=data$count
>>>    f<-factor(data$Dates)
>>> AB<- tapply(x,f,mean)
>>>
>>>
>>> I made a simple calculation. The result, stored in AB, is of the form
>>> below. But an effort to write AB to a file as a data frame fails. When I
>>> use the write table, it only produces the count column and strip of the
>>> first column (date).
>>>
>>> 2005-11-01 2005-12-01 2006-01-01 2006-02-01 2006-03-01 2006-04-01
>>> 2006-05-01
>>>    -4.106887  -4.259154  -5.836090  -4.756757  -4.118011  -4.487942
>>>    -4.430705
>>> 2006-06-01 2006-07-01 2006-08-01 2006-09-01 2006-10-01 2006-11-01
>>> 2006-12-01
>>>    -3.856727  -6.067103  -6.418767  -4.383031  -3.985805  -4.768196
>>> -10.072579
>>> 2007-01-01 2007-02-01 2007-03-01 2007-04-01 2007-05-01 2007-06-01
>>> 2007-07-01
>>>    -5.342338  -4.653128  -4.325094  -4.525373  -4.574783  -3.915600
>>>    -4.127980
>>> 2007-08-01 2007-09-01 2007-10-01 2007-11-01 2007-12-01 2008-01-01
>>> 2008-02-01
>>>    -3.952150  -4.033518  -4.532878  -4.522941  -4.485693  -3.922155
>>>    -4.183578
>>> 2008-03-01 2008-04-01 2008-05-01 2008-06-01 2008-07-01 2008-08-01
>>> 2008-09-01
>>>    -4.336969  -3.813306  -4.296579  -4.575095  -4.036036  -4.727994
>>>    -4.347428
>>> 2008-10-01 2008-11-01 2008-12-01
>>>    -4.029918  -4.260326  -4.454224
>>>
>>> But the normal format I wish to display only appears on the terminal,
>>> leading me to copy it and paste into a text file. That is, when I enter
>> AB
>>> on the terminal, it returns a format in the form:
>>>
>>> 008-02-01  -4.183578
>>> 2008-03-01  -4.336969
>>> 2008-04-01  -3.813306
>>> 2008-05-01  -4.296579
>>> 2008-06-01  -4.575095
>>> 2008-07-01  -4.036036
>>> 2008-08-01  -4.727994
>>> 2008-09-01  -4.347428
>>> 2008-10-01  -4.029918
>>> 2008-11-01  -4.260326
>>> 2008-12-01  -4.454224
>>>
>>> Now, my question: How do I write out two columns displayed by AB on the
>>> terminal to a file?
>>>
>>> I have tried using AB<-data.frame(AB) but it doesn't work either.
>>>
>>> Many thanks for your time.
>>> Ogbos
>>>
>>>        [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> Hello,
>>
>> The main trick is to pipe to as.data.frame. But the result will have one
>> column only, you must assign the dates from the df's row names.
>> I also include an aggregate solution.
>>
>>
>>
>> # create a test data set
>> set.seed(2024)
>> data <- data.frame(
>>     Date = sample(seq(Sys.Date() - 5, Sys.Date(), by = "1 days"), 100L,
>> TRUE),
>>     count = sample(10L, 100L, TRUE)
>> )
>>
>> # coerce tapply's result to class "data.frame"
>> res <- with(data, tapply(count, Date, mean)) |> as.data.frame()
>> # assign a dates column from the row names
>> res$Date <- row.names(res)
>> # cosmetics
>> names(res)[2:1] <- names(data)
>> # note that the row names are still tapply's names vector
>> # and that the columns order is not Date/count. Both are fixed
>> # after the calculations.
>> res
>> #>               count       Date
>> #> 2024-03-22 5.416667 2024-03-22
>> #> 2024-03-23 5.500000 2024-03-23
>> #> 2024-03-24 6.000000 2024-03-24
>> #> 2024-03-25 4.476190 2024-03-25
>> #> 2024-03-26 6.538462 2024-03-26
>> #> 2024-03-27 5.200000 2024-03-27
>>
>> # fix the columns' order
>> res <- res[2:1]
>>
>>
>>
>> # better all in one instruction
>> aggregate(count ~ Date, data, mean)
>> #>         Date    count
>> #> 1 2024-03-22 5.416667
>> #> 2 2024-03-23 5.500000
>> #> 3 2024-03-24 6.000000
>> #> 4 2024-03-25 4.476190
>> #> 5 2024-03-26 6.538462
>> #> 6 2024-03-27 5.200000
>>
>>
>>
>> Also,
>> I'm glad to help as always but Ogbos, you have been an R-Help
>> contributor for quite a while, please post data in dput format. Given
>> the problem the output of the following is more than enough.
>>
>>
>> dput(head(data, 20L))
>>
>>
>> Hope this helps,
>>
>> Rui Barradas
>>
>>
>> --
>> Este e-mail foi analisado pelo software antiv?rus AVG para verificar a
>> presen?a de v?rus.
>> www.avg.com
>>
> 
Hello,

This pipe?


with(data, tapply(count, Date, mean)) |> as.data.frame()


I am not seeing anything wrong with it. I have tried it again just now 
and it runs with no problems, like it had before.
A solution is not to pipe, separate the instructions.


res <- with(data, tapply(count, Date, mean))
res <- as.data.frame(res)


But this should be equivalent to the pipe, I cannot think of a way to 
have this separated instructions run but not the pipe.

Hope this helps,

Rui Barradas


-- 
Este e-mail foi analisado pelo software antiv?rus AVG para verificar a presen?a de v?rus.
www.avg.com


From deep@y@n@@@rk@r @end|ng |rom gm@||@com  Thu Mar 28 03:40:37 2024
From: deep@y@n@@@rk@r @end|ng |rom gm@||@com (Deepayan Sarkar)
Date: Thu, 28 Mar 2024 08:10:37 +0530
Subject: [R] Output of tapply function as data frame
In-Reply-To: <2480bdca-a38e-4e56-bf32-ac5d014c9a00@sapo.pt>
References: <CAC8ss307yPyFvs57kPk-enQNH+Kxg+OZfMPOnTg2qQ8v=NKyhQ@mail.gmail.com>
 <2480bdca-a38e-4e56-bf32-ac5d014c9a00@sapo.pt>
Message-ID: <CADfFDC6wcTF4W8SzvPxOz6EjugGm7Jgod3YOCioUfKY9hoOmDQ@mail.gmail.com>

For more complicated examples, the (relatively new) array2DF()
function is also useful:

> with(data, tapply(count, Date, mean)) |> array2DF()
        Var1    Value
1 2024-03-23 5.416667
2 2024-03-24 5.500000
3 2024-03-25 6.000000
4 2024-03-26 4.476190
5 2024-03-27 6.538462
6 2024-03-28 5.200000

or

> tapply(data, ~ Date, with, mean(count)) |> array2DF(responseName = "count")
        Date    count
1 2024-03-23 5.416667
2 2024-03-24 5.500000
3 2024-03-25 6.000000
4 2024-03-26 4.476190
5 2024-03-27 6.538462
6 2024-03-28 5.200000

Best,
-Deepayan

On Wed, 27 Mar 2024 at 13:15, Rui Barradas <ruipbarradas at sapo.pt> wrote:
>
> ?s 04:30 de 27/03/2024, Ogbos Okike escreveu:
> > Warm greetings to you all.
> >
> > Using the tapply function below:
> > data<-read.table("FD1month",col.names = c("Dates","count"))
> > x=data$count
> >   f<-factor(data$Dates)
> > AB<- tapply(x,f,mean)
> >
> >
> > I made a simple calculation. The result, stored in AB, is of the form
> > below. But an effort to write AB to a file as a data frame fails. When I
> > use the write table, it only produces the count column and strip of the
> > first column (date).
> >
> > 2005-11-01 2005-12-01 2006-01-01 2006-02-01 2006-03-01 2006-04-01
> > 2006-05-01
> >   -4.106887  -4.259154  -5.836090  -4.756757  -4.118011  -4.487942
> >   -4.430705
> > 2006-06-01 2006-07-01 2006-08-01 2006-09-01 2006-10-01 2006-11-01
> > 2006-12-01
> >   -3.856727  -6.067103  -6.418767  -4.383031  -3.985805  -4.768196
> > -10.072579
> > 2007-01-01 2007-02-01 2007-03-01 2007-04-01 2007-05-01 2007-06-01
> > 2007-07-01
> >   -5.342338  -4.653128  -4.325094  -4.525373  -4.574783  -3.915600
> >   -4.127980
> > 2007-08-01 2007-09-01 2007-10-01 2007-11-01 2007-12-01 2008-01-01
> > 2008-02-01
> >   -3.952150  -4.033518  -4.532878  -4.522941  -4.485693  -3.922155
> >   -4.183578
> > 2008-03-01 2008-04-01 2008-05-01 2008-06-01 2008-07-01 2008-08-01
> > 2008-09-01
> >   -4.336969  -3.813306  -4.296579  -4.575095  -4.036036  -4.727994
> >   -4.347428
> > 2008-10-01 2008-11-01 2008-12-01
> >   -4.029918  -4.260326  -4.454224
> >
> > But the normal format I wish to display only appears on the terminal,
> > leading me to copy it and paste into a text file. That is, when I enter AB
> > on the terminal, it returns a format in the form:
> >
> > 008-02-01  -4.183578
> > 2008-03-01  -4.336969
> > 2008-04-01  -3.813306
> > 2008-05-01  -4.296579
> > 2008-06-01  -4.575095
> > 2008-07-01  -4.036036
> > 2008-08-01  -4.727994
> > 2008-09-01  -4.347428
> > 2008-10-01  -4.029918
> > 2008-11-01  -4.260326
> > 2008-12-01  -4.454224
> >
> > Now, my question: How do I write out two columns displayed by AB on the
> > terminal to a file?
> >
> > I have tried using AB<-data.frame(AB) but it doesn't work either.
> >
> > Many thanks for your time.
> > Ogbos
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> Hello,
>
> The main trick is to pipe to as.data.frame. But the result will have one
> column only, you must assign the dates from the df's row names.
> I also include an aggregate solution.
>
>
>
> # create a test data set
> set.seed(2024)
> data <- data.frame(
>    Date = sample(seq(Sys.Date() - 5, Sys.Date(), by = "1 days"), 100L,
> TRUE),
>    count = sample(10L, 100L, TRUE)
> )
>
> # coerce tapply's result to class "data.frame"
> res <- with(data, tapply(count, Date, mean)) |> as.data.frame()
> # assign a dates column from the row names
> res$Date <- row.names(res)
> # cosmetics
> names(res)[2:1] <- names(data)
> # note that the row names are still tapply's names vector
> # and that the columns order is not Date/count. Both are fixed
> # after the calculations.
> res
> #>               count       Date
> #> 2024-03-22 5.416667 2024-03-22
> #> 2024-03-23 5.500000 2024-03-23
> #> 2024-03-24 6.000000 2024-03-24
> #> 2024-03-25 4.476190 2024-03-25
> #> 2024-03-26 6.538462 2024-03-26
> #> 2024-03-27 5.200000 2024-03-27
>
> # fix the columns' order
> res <- res[2:1]
>
>
>
> # better all in one instruction
> aggregate(count ~ Date, data, mean)
> #>         Date    count
> #> 1 2024-03-22 5.416667
> #> 2 2024-03-23 5.500000
> #> 3 2024-03-24 6.000000
> #> 4 2024-03-25 4.476190
> #> 5 2024-03-26 6.538462
> #> 6 2024-03-27 5.200000
>
>
>
> Also,
> I'm glad to help as always but Ogbos, you have been an R-Help
> contributor for quite a while, please post data in dput format. Given
> the problem the output of the following is more than enough.
>
>
> dput(head(data, 20L))
>
>
> Hope this helps,
>
> Rui Barradas
>
>
> --
> Este e-mail foi analisado pelo software antiv?rus AVG para verificar a presen?a de v?rus.
> www.avg.com
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @te|@no@@o||@ @end|ng |rom reg|one@m@rche@|t  Thu Mar 28 11:29:09 2024
From: @te|@no@@o||@ @end|ng |rom reg|one@m@rche@|t (Stefano Sofia)
Date: Thu, 28 Mar 2024 10:29:09 +0000
Subject: [R] split a factor into single elements
Message-ID: <9bc23d07aefe431a9ab87d18c97805ef@regione.marche.it>

Dear R-list users,

forgive me for this silly question, I did my best to find a solution with no success.

Suppose I have a factor type like


myfactor <- as.factor(2024, 2, 1, 0, 0)


There are no characters (and therefore strsplit for eample does not work).

I need to store separately the 1st, 2nd and 3rd elements as integers. How can I do?


Thank you for your help

Stefano


         (oo)
--oOO--( )--OOo--------------------------------------
Stefano Sofia PhD
Civil Protection - Marche Region - Italy
Meteo Section
Snow Section
Via del Colle Ameno 5
60126 Torrette di Ancona, Ancona (AN)
Uff: +39 071 806 7743
E-mail: stefano.sofia at regione.marche.it
---Oo---------oO----------------------------------------

________________________________

AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell'art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.

	[[alternative HTML version deleted]]


From d@go@t|no|@b| @end|ng |rom gm@||@com  Thu Mar 28 12:20:00 2024
From: d@go@t|no|@b| @end|ng |rom gm@||@com (Fabio D'Agostino)
Date: Thu, 28 Mar 2024 12:20:00 +0100
Subject: [R] split a factor into single elements
In-Reply-To: <9bc23d07aefe431a9ab87d18c97805ef@regione.marche.it>
References: <9bc23d07aefe431a9ab87d18c97805ef@regione.marche.it>
Message-ID: <CADUGNTyhGD-yAAXrep2uUjtcCOU9fQrN0yuw-rb9vDxucaywEQ@mail.gmail.com>

Hi Stefano,
maybe something like this can help you?

myfactor <- as.factor(c(2024, 2, 1, 0, 0))

# Convert factor values to integers
first_element <- as.integer(as.character(myfactor)[1])
second_element <- as.integer(as.character(myfactor)[2])
third_element <- as.integer(as.character(myfactor)[3])

# Print the results
first_element
[1] 2024
second_element
[1] 2
third_element
[1] 1

# Check the type of the object
typeof(first_element)
[1] "integer"

Fabio

Il giorno gio 28 mar 2024 alle ore 11:29 Stefano Sofia <
stefano.sofia at regione.marche.it> ha scritto:

> Dear R-list users,
>
> forgive me for this silly question, I did my best to find a solution with
> no success.
>
> Suppose I have a factor type like
>
>
> myfactor <- as.factor(2024, 2, 1, 0, 0)
>
>
> There are no characters (and therefore strsplit for eample does not work).
>
> I need to store separately the 1st, 2nd and 3rd elements as integers. How
> can I do?
>
>
> Thank you for your help
>
> Stefano
>
>
>          (oo)
> --oOO--( )--OOo--------------------------------------
> Stefano Sofia PhD
> Civil Protection - Marche Region - Italy
> Meteo Section
> Snow Section
> Via del Colle Ameno 5
> 60126 Torrette di Ancona, Ancona (AN)
> Uff: +39 071 806 7743
> E-mail: stefano.sofia at regione.marche.it
> ---Oo---------oO----------------------------------------
>
> ________________________________
>
> AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere
> informazioni confidenziali, pertanto ? destinato solo a persone autorizzate
> alla ricezione. I messaggi di posta elettronica per i client di Regione
> Marche possono contenere informazioni confidenziali e con privilegi legali.
> Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o
> archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore,
> inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio
> computer. Ai sensi dell'art. 6 della DGR n. 1394/2008 si segnala che, in
> caso di necessit? ed urgenza, la risposta al presente messaggio di posta
> elettronica pu? essere visionata da persone estranee al destinatario.
> IMPORTANT NOTICE: This e-mail message is intended to be received only by
> persons entitled to receive the confidential information it may contain.
> E-mail messages to clients of Regione Marche may contain information that
> is confidential and legally privileged. Please do not read, copy, forward,
> or store this message unless you are an intended recipient of it. If you
> have received this message in error, please forward it to the sender and
> delete it completely from your computer system.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @te|@no@@o||@ @end|ng |rom reg|one@m@rche@|t  Thu Mar 28 12:26:38 2024
From: @te|@no@@o||@ @end|ng |rom reg|one@m@rche@|t (Stefano Sofia)
Date: Thu, 28 Mar 2024 11:26:38 +0000
Subject: [R] split a factor into single elements
In-Reply-To: <CADUGNTyhGD-yAAXrep2uUjtcCOU9fQrN0yuw-rb9vDxucaywEQ@mail.gmail.com>
References: <9bc23d07aefe431a9ab87d18c97805ef@regione.marche.it>,
 <CADUGNTyhGD-yAAXrep2uUjtcCOU9fQrN0yuw-rb9vDxucaywEQ@mail.gmail.com>
Message-ID: <1d6fbe058edb4a819b6cb212ad5fd512@regione.marche.it>

Thank you Fabio.

So easy and straighforward!


Stefano


         (oo)
--oOO--( )--OOo--------------------------------------
Stefano Sofia PhD
Civil Protection - Marche Region - Italy
Meteo Section
Snow Section
Via del Colle Ameno 5
60126 Torrette di Ancona, Ancona (AN)
Uff: +39 071 806 7743
E-mail: stefano.sofia at regione.marche.it
---Oo---------oO----------------------------------------


________________________________
Da: Fabio D'Agostino <dagostinofabi at gmail.com>
Inviato: gioved? 28 marzo 2024 12:20
A: Stefano Sofia; r-help at R-project.org
Oggetto: Re: [R] split a factor into single elements


Non si ricevono spesso messaggi di posta elettronica da dagostinofabi at gmail.com. Informazioni sul perch? ? importante<https://aka.ms/LearnAboutSenderIdentification>

Hi Stefano,
maybe something like this can help you?

myfactor <- as.factor(c(2024, 2, 1, 0, 0))

# Convert factor values to integers
first_element <- as.integer(as.character(myfactor)[1])
second_element <- as.integer(as.character(myfactor)[2])
third_element <- as.integer(as.character(myfactor)[3])

# Print the results
first_element
[1] 2024
second_element
[1] 2
third_element
[1] 1

# Check the type of the object
typeof(first_element)
[1] "integer"

Fabio

Il giorno gio 28 mar 2024 alle ore 11:29 Stefano Sofia <stefano.sofia at regione.marche.it<mailto:stefano.sofia at regione.marche.it>> ha scritto:
Dear R-list users,

forgive me for this silly question, I did my best to find a solution with no success.

Suppose I have a factor type like


myfactor <- as.factor(2024, 2, 1, 0, 0)


There are no characters (and therefore strsplit for eample does not work).

I need to store separately the 1st, 2nd and 3rd elements as integers. How can I do?


Thank you for your help

Stefano


         (oo)
--oOO--( )--OOo--------------------------------------
Stefano Sofia PhD
Civil Protection - Marche Region - Italy
Meteo Section
Snow Section
Via del Colle Ameno 5
60126 Torrette di Ancona, Ancona (AN)
Uff: +39 071 806 7743
E-mail: stefano.sofia at regione.marche.it<mailto:stefano.sofia at regione.marche.it>
---Oo---------oO----------------------------------------

________________________________

AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell'art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help<https://eur02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C02%7Cstefano.sofia%40regione.marche.it%7Cbdac99e047dc4e07d0d508dc4f19093d%7C295eaa1431a14b09bfe65a338b679f60%7C0%7C0%7C638472216145063263%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C0%7C%7C%7C&sdata=9KrZWiZG0YnRgIlfzNgVoeo3viH1Sqtq%2BkcrEXa1kv0%3D&reserved=0>
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html<https://eur02.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C02%7Cstefano.sofia%40regione.marche.it%7Cbdac99e047dc4e07d0d508dc4f19093d%7C295eaa1431a14b09bfe65a338b679f60%7C0%7C0%7C638472216145063263%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C0%7C%7C%7C&sdata=PKViM4DWqRNrcOiMaEtWYZb3dHfIV2r9nP%2B%2FE5KpZwM%3D&reserved=0>
and provide commented, minimal, self-contained, reproducible code.

________________________________

AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell'art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.

	[[alternative HTML version deleted]]


From @te|@no@@o||@ @end|ng |rom reg|one@m@rche@|t  Thu Mar 28 12:48:01 2024
From: @te|@no@@o||@ @end|ng |rom reg|one@m@rche@|t (Stefano Sofia)
Date: Thu, 28 Mar 2024 11:48:01 +0000
Subject: [R] split a factor into single elements
In-Reply-To: <CADUGNTyhGD-yAAXrep2uUjtcCOU9fQrN0yuw-rb9vDxucaywEQ@mail.gmail.com>
References: <9bc23d07aefe431a9ab87d18c97805ef@regione.marche.it>,
 <CADUGNTyhGD-yAAXrep2uUjtcCOU9fQrN0yuw-rb9vDxucaywEQ@mail.gmail.com>
Message-ID: <75993e80f96448d380b25f3c327a4076@regione.marche.it>

Sorry for my hurry.

The correct reproducible code is different from the initial one. The correct example is


mydf <- data.frame(id_station = 1234, string_data = as.factor(2024, 12, 1, 0, 0), rainfall_value= 55)


In this case mydf$string_data is a factor, but of length 1 (and not 5 like in the initial example).

Therefore the suggestion offered by Fabio does not work.


Any suggestion?

Sorry again for my mistake

Stefano



         (oo)
--oOO--( )--OOo--------------------------------------
Stefano Sofia PhD
Civil Protection - Marche Region - Italy
Meteo Section
Snow Section
Via del Colle Ameno 5
60126 Torrette di Ancona, Ancona (AN)
Uff: +39 071 806 7743
E-mail: stefano.sofia at regione.marche.it
---Oo---------oO----------------------------------------


________________________________
Da: Fabio D'Agostino <dagostinofabi at gmail.com>
Inviato: gioved? 28 marzo 2024 12:20
A: Stefano Sofia; r-help at R-project.org
Oggetto: Re: [R] split a factor into single elements


Non si ricevono spesso messaggi di posta elettronica da dagostinofabi at gmail.com. Informazioni sul perch? ? importante<https://aka.ms/LearnAboutSenderIdentification>

Hi Stefano,
maybe something like this can help you?

myfactor <- as.factor(c(2024, 2, 1, 0, 0))

# Convert factor values to integers
first_element <- as.integer(as.character(myfactor)[1])
second_element <- as.integer(as.character(myfactor)[2])
third_element <- as.integer(as.character(myfactor)[3])

# Print the results
first_element
[1] 2024
second_element
[1] 2
third_element
[1] 1

# Check the type of the object
typeof(first_element)
[1] "integer"

Fabio

Il giorno gio 28 mar 2024 alle ore 11:29 Stefano Sofia <stefano.sofia at regione.marche.it<mailto:stefano.sofia at regione.marche.it>> ha scritto:
Dear R-list users,

forgive me for this silly question, I did my best to find a solution with no success.

Suppose I have a factor type like


myfactor <- as.factor(2024, 2, 1, 0, 0)


There are no characters (and therefore strsplit for eample does not work).

I need to store separately the 1st, 2nd and 3rd elements as integers. How can I do?


Thank you for your help

Stefano


         (oo)
--oOO--( )--OOo--------------------------------------
Stefano Sofia PhD
Civil Protection - Marche Region - Italy
Meteo Section
Snow Section
Via del Colle Ameno 5
60126 Torrette di Ancona, Ancona (AN)
Uff: +39 071 806 7743
E-mail: stefano.sofia at regione.marche.it<mailto:stefano.sofia at regione.marche.it>
---Oo---------oO----------------------------------------

________________________________

AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell'art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help<https://eur02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C02%7Cstefano.sofia%40regione.marche.it%7Cbdac99e047dc4e07d0d508dc4f19093d%7C295eaa1431a14b09bfe65a338b679f60%7C0%7C0%7C638472216145063263%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C0%7C%7C%7C&sdata=9KrZWiZG0YnRgIlfzNgVoeo3viH1Sqtq%2BkcrEXa1kv0%3D&reserved=0>
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html<https://eur02.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C02%7Cstefano.sofia%40regione.marche.it%7Cbdac99e047dc4e07d0d508dc4f19093d%7C295eaa1431a14b09bfe65a338b679f60%7C0%7C0%7C638472216145063263%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C0%7C%7C%7C&sdata=PKViM4DWqRNrcOiMaEtWYZb3dHfIV2r9nP%2B%2FE5KpZwM%3D&reserved=0>
and provide commented, minimal, self-contained, reproducible code.

________________________________

AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell'art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Mar 28 12:53:35 2024
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 28 Mar 2024 07:53:35 -0400
Subject: [R] split a factor into single elements
In-Reply-To: <75993e80f96448d380b25f3c327a4076@regione.marche.it>
References: <9bc23d07aefe431a9ab87d18c97805ef@regione.marche.it>
 <CADUGNTyhGD-yAAXrep2uUjtcCOU9fQrN0yuw-rb9vDxucaywEQ@mail.gmail.com>
 <75993e80f96448d380b25f3c327a4076@regione.marche.it>
Message-ID: <9e99ef15-d909-41ca-92ba-96c543f19dc0@gmail.com>

On 28/03/2024 7:48 a.m., Stefano Sofia wrote:
> as.factor(2024, 12, 1, 0, 0)

That doesn't work.  You need to put the numbers in a single vector as 
Fabio did, or you'll see this:

Error in as.factor(2024, 12, 1, 0, 0) : unused arguments (12, 1, 0, 0)

Duncan Murdoch


From tebert @end|ng |rom u||@edu  Thu Mar 28 15:17:41 2024
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Thu, 28 Mar 2024 14:17:41 +0000
Subject: [R] split a factor into single elements
In-Reply-To: <75993e80f96448d380b25f3c327a4076@regione.marche.it>
References: <9bc23d07aefe431a9ab87d18c97805ef@regione.marche.it>,
 <CADUGNTyhGD-yAAXrep2uUjtcCOU9fQrN0yuw-rb9vDxucaywEQ@mail.gmail.com>
 <75993e80f96448d380b25f3c327a4076@regione.marche.it>
Message-ID: <CH3PR22MB4514C06AF9230DF23066EB02CF3B2@CH3PR22MB4514.namprd22.prod.outlook.com>

Here are some pieces of working code. I assume you want the second one or the third one that is functionally the same but all in one statement. I do not understand why it is a factor, but I will assume that there is a current and future reason for that. This means I cannot alter the string_data variable, or you can simplify by not making the variable a factor only to turn it back into character.

mydf <- data.frame(id_station = 1234, string_data = c(2024, 12, 1, 0, 0), rainfall_value= 55)
mydf$string_data <- as.factor(mydf$string_data)

mydf <- data.frame(id_station = 1234, string_data = "2024, 12, 1, 0, 0", rainfall_value= 55)
mydf$string_data <- as.factor(mydf$string_data)

mydf <- data.frame(id_station = 1234, string_data = as.factor("2024, 12, 1, 0, 0"), rainfall_value= 55)

mydf <- data.frame(id_station = 1234, string_data = as.factor("2024, 12, 1, 0, 0"), rainfall_value= 55)
mydf$string_data2 <- as.character(mydf$string_data)

#I assume there are many records in the data frame and your example is for demonstration only.
#I cannot assume that all records are the same, though you may be able to simplify if that is true.
#Split the string based on commas.
split_values <- strsplit(mydf$string_data2, ",")

# find the maximum string length
max_length <- max(lengths(split_values))

# Add new variables to the data frame
for (i in 1:max_length) {
  new_var_name <- paste0("VAR_", i)
  mydf[[new_var_name]] <- sapply(split_values, function(x) ifelse(length(x) >= i, x[i], NA))
}

# Convert to numeric
 for (i in 1:max_length) {
   new_var_name <- paste0("VAR_", i)
   mydf[[new_var_name]] <- as.numeric(mydf[[new_var_name]])
 }
# remove trash
mydf <- mydf[,-4]
# Provide more useful names
colnames(mydf) <- c("id_station", "string_data", "rainfall_mm", "Year", "Month", "Day", "hour", "minute")

Regards,
Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Stefano Sofia
Sent: Thursday, March 28, 2024 7:48 AM
To: Fabio D'Agostino <dagostinofabi at gmail.com>; r-help at R-project.org
Subject: Re: [R] split a factor into single elements

[External Email]

Sorry for my hurry.

The correct reproducible code is different from the initial one. The correct example is


mydf <- data.frame(id_station = 1234, string_data = as.factor(2024, 12, 1, 0, 0), rainfall_value= 55)


In this case mydf$string_data is a factor, but of length 1 (and not 5 like in the initial example).

Therefore the suggestion offered by Fabio does not work.


Any suggestion?

Sorry again for my mistake

Stefano



         (oo)
--oOO--( )--OOo--------------------------------------
Stefano Sofia PhD
Civil Protection - Marche Region - Italy Meteo Section Snow Section Via del Colle Ameno 5
60126 Torrette di Ancona, Ancona (AN)
Uff: +39 071 806 7743
E-mail: stefano.sofia at regione.marche.it
---Oo---------oO----------------------------------------


________________________________
Da: Fabio D'Agostino <dagostinofabi at gmail.com>
Inviato: gioved  28 marzo 2024 12:20
A: Stefano Sofia; r-help at R-project.org
Oggetto: Re: [R] split a factor into single elements


Non si ricevono spesso messaggi di posta elettronica da dagostinofabi at gmail.com. Informazioni sul perch    importante<https://aka.ms/LearnAboutSenderIdentification>

Hi Stefano,
maybe something like this can help you?

myfactor <- as.factor(c(2024, 2, 1, 0, 0))

# Convert factor values to integers
first_element <- as.integer(as.character(myfactor)[1])
second_element <- as.integer(as.character(myfactor)[2])
third_element <- as.integer(as.character(myfactor)[3])

# Print the results
first_element
[1] 2024
second_element
[1] 2
third_element
[1] 1

# Check the type of the object
typeof(first_element)
[1] "integer"

Fabio

Il giorno gio 28 mar 2024 alle ore 11:29 Stefano Sofia <stefano.sofia at regione.marche.it<mailto:stefano.sofia at regione.marche.it>> ha scritto:
Dear R-list users,

forgive me for this silly question, I did my best to find a solution with no success.

Suppose I have a factor type like


myfactor <- as.factor(2024, 2, 1, 0, 0)


There are no characters (and therefore strsplit for eample does not work).

I need to store separately the 1st, 2nd and 3rd elements as integers. How can I do?


Thank you for your help

Stefano


         (oo)
--oOO--( )--OOo--------------------------------------
Stefano Sofia PhD
Civil Protection - Marche Region - Italy Meteo Section Snow Section Via del Colle Ameno 5
60126 Torrette di Ancona, Ancona (AN)
Uff: +39 071 806 7743
E-mail: stefano.sofia at regione.marche.it<mailto:stefano.sofia at regione.marche.it>
---Oo---------oO----------------------------------------

________________________________

AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu  contenere informazioni confidenziali, pertanto   destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si   il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si   ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell'art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit  ed urgenza, la risposta al presente messaggio di posta elettronica pu  essere visionata da persone estranee al destinatario.
IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help<https://stat.ethz.ch/mailman/listinfo/r-help>
PLEASE do read the posting guide http://www.r-project.org/posting-guide.html<http://www.r-project.org/posting-guide.html>
and provide commented, minimal, self-contained, reproducible code.

________________________________

AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu  contenere informazioni confidenziali, pertanto   destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si   il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si   ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell'art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit  ed urgenza, la risposta al presente messaggio di posta elettronica pu  essere visionata da persone estranee al destinatario.
IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.

        [[alternative HTML version deleted]]


From g||ted|||e2014 @end|ng |rom gm@||@com  Fri Mar 29 02:43:05 2024
From: g||ted|||e2014 @end|ng |rom gm@||@com (Ogbos Okike)
Date: Fri, 29 Mar 2024 02:43:05 +0100
Subject: [R] Output of tapply function as data frame: Problem Fixed
In-Reply-To: <18c36343-ac71-4915-acf4-a24282153c3d@sapo.pt>
References: <CAC8ss307yPyFvs57kPk-enQNH+Kxg+OZfMPOnTg2qQ8v=NKyhQ@mail.gmail.com>
 <2480bdca-a38e-4e56-bf32-ac5d014c9a00@sapo.pt>
 <CAC8ss334xxa8oiBKyBPnUKsQ2HyrYiyJ=WVmOzkPWy1fyyPpjg@mail.gmail.com>
 <18c36343-ac71-4915-acf4-a24282153c3d@sapo.pt>
Message-ID: <CAC8ss302-yh+hJ1DOub_QZWXTV1A=26YJuGhKLGXRd3L0DbLWw@mail.gmail.com>

Dear Rui,
Thanks again for resolving this. I have already started using the version
that works for me.

But to clarify the second part, please let me paste the what I did and the
error message:

> set.seed(2024)
> data <- data.frame(
+    Date = sample(seq(Sys.Date() - 5, Sys.Date(), by = "1 days"), 100L,
+ TRUE),
+    count = sample(10L, 100L, TRUE)
+ )
>
> # coerce tapply's result to class "data.frame"
> res <- with(data, tapply(count, Date, mean)) |> as.data.frame()
Error: unexpected '>' in "res <- with(data, tapply(count, Date, mean)) |>"
> # assign a dates column from the row names
> res$Date <- row.names(res)
Error in row.names(res) : object 'res' not found
> # cosmetics
> names(res)[2:1] <- names(data)
Error in names(res)[2:1] <- names(data) : object 'res' not found
> # note that the row names are still tapply's names vector
> # and that the columns order is not Date/count. Both are fixed
> # after the calculations.
> res

You can see that the error message is on the pipe. Please, let me know
where I am missing it.
Thanks.

On Wed, Mar 27, 2024 at 10:45?PM Rui Barradas <ruipbarradas at sapo.pt> wrote:

> ?s 08:58 de 27/03/2024, Ogbos Okike escreveu:
> > Dear Rui,
> > Nice to hear from you!
> >
> > I am sorry for the omission and I have taken note.
> >
> > Many thanks for responding. The second solution looks elegant as it
> quickly
> > resolved the problem.
> >
> > Please, take a second look at the first solution. It refused to run.
> Looks
> > as if the pipe is not properly positioned. Efforts to correct it and get
> it
> > run failed. If you can look further, it would be great. If time does not
> > permit, I am fine too.
> >
> > But having the too solutions will certainly make the subject more
> > interesting.
> > Thank you so much.
> > With warmest regards from
> > Ogbos
> >
> > On Wed, Mar 27, 2024 at 8:44?AM Rui Barradas <ruipbarradas at sapo.pt>
> wrote:
> >
> >> ?s 04:30 de 27/03/2024, Ogbos Okike escreveu:
> >>> Warm greetings to you all.
> >>>
> >>> Using the tapply function below:
> >>> data<-read.table("FD1month",col.names = c("Dates","count"))
> >>> x=data$count
> >>>    f<-factor(data$Dates)
> >>> AB<- tapply(x,f,mean)
> >>>
> >>>
> >>> I made a simple calculation. The result, stored in AB, is of the form
> >>> below. But an effort to write AB to a file as a data frame fails. When
> I
> >>> use the write table, it only produces the count column and strip of the
> >>> first column (date).
> >>>
> >>> 2005-11-01 2005-12-01 2006-01-01 2006-02-01 2006-03-01 2006-04-01
> >>> 2006-05-01
> >>>    -4.106887  -4.259154  -5.836090  -4.756757  -4.118011  -4.487942
> >>>    -4.430705
> >>> 2006-06-01 2006-07-01 2006-08-01 2006-09-01 2006-10-01 2006-11-01
> >>> 2006-12-01
> >>>    -3.856727  -6.067103  -6.418767  -4.383031  -3.985805  -4.768196
> >>> -10.072579
> >>> 2007-01-01 2007-02-01 2007-03-01 2007-04-01 2007-05-01 2007-06-01
> >>> 2007-07-01
> >>>    -5.342338  -4.653128  -4.325094  -4.525373  -4.574783  -3.915600
> >>>    -4.127980
> >>> 2007-08-01 2007-09-01 2007-10-01 2007-11-01 2007-12-01 2008-01-01
> >>> 2008-02-01
> >>>    -3.952150  -4.033518  -4.532878  -4.522941  -4.485693  -3.922155
> >>>    -4.183578
> >>> 2008-03-01 2008-04-01 2008-05-01 2008-06-01 2008-07-01 2008-08-01
> >>> 2008-09-01
> >>>    -4.336969  -3.813306  -4.296579  -4.575095  -4.036036  -4.727994
> >>>    -4.347428
> >>> 2008-10-01 2008-11-01 2008-12-01
> >>>    -4.029918  -4.260326  -4.454224
> >>>
> >>> But the normal format I wish to display only appears on the terminal,
> >>> leading me to copy it and paste into a text file. That is, when I enter
> >> AB
> >>> on the terminal, it returns a format in the form:
> >>>
> >>> 008-02-01  -4.183578
> >>> 2008-03-01  -4.336969
> >>> 2008-04-01  -3.813306
> >>> 2008-05-01  -4.296579
> >>> 2008-06-01  -4.575095
> >>> 2008-07-01  -4.036036
> >>> 2008-08-01  -4.727994
> >>> 2008-09-01  -4.347428
> >>> 2008-10-01  -4.029918
> >>> 2008-11-01  -4.260326
> >>> 2008-12-01  -4.454224
> >>>
> >>> Now, my question: How do I write out two columns displayed by AB on the
> >>> terminal to a file?
> >>>
> >>> I have tried using AB<-data.frame(AB) but it doesn't work either.
> >>>
> >>> Many thanks for your time.
> >>> Ogbos
> >>>
> >>>        [[alternative HTML version deleted]]
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >> Hello,
> >>
> >> The main trick is to pipe to as.data.frame. But the result will have one
> >> column only, you must assign the dates from the df's row names.
> >> I also include an aggregate solution.
> >>
> >>
> >>
> >> # create a test data set
> >> set.seed(2024)
> >> data <- data.frame(
> >>     Date = sample(seq(Sys.Date() - 5, Sys.Date(), by = "1 days"), 100L,
> >> TRUE),
> >>     count = sample(10L, 100L, TRUE)
> >> )
> >>
> >> # coerce tapply's result to class "data.frame"
> >> res <- with(data, tapply(count, Date, mean)) |> as.data.frame()
> >> # assign a dates column from the row names
> >> res$Date <- row.names(res)
> >> # cosmetics
> >> names(res)[2:1] <- names(data)
> >> # note that the row names are still tapply's names vector
> >> # and that the columns order is not Date/count. Both are fixed
> >> # after the calculations.
> >> res
> >> #>               count       Date
> >> #> 2024-03-22 5.416667 2024-03-22
> >> #> 2024-03-23 5.500000 2024-03-23
> >> #> 2024-03-24 6.000000 2024-03-24
> >> #> 2024-03-25 4.476190 2024-03-25
> >> #> 2024-03-26 6.538462 2024-03-26
> >> #> 2024-03-27 5.200000 2024-03-27
> >>
> >> # fix the columns' order
> >> res <- res[2:1]
> >>
> >>
> >>
> >> # better all in one instruction
> >> aggregate(count ~ Date, data, mean)
> >> #>         Date    count
> >> #> 1 2024-03-22 5.416667
> >> #> 2 2024-03-23 5.500000
> >> #> 3 2024-03-24 6.000000
> >> #> 4 2024-03-25 4.476190
> >> #> 5 2024-03-26 6.538462
> >> #> 6 2024-03-27 5.200000
> >>
> >>
> >>
> >> Also,
> >> I'm glad to help as always but Ogbos, you have been an R-Help
> >> contributor for quite a while, please post data in dput format. Given
> >> the problem the output of the following is more than enough.
> >>
> >>
> >> dput(head(data, 20L))
> >>
> >>
> >> Hope this helps,
> >>
> >> Rui Barradas
> >>
> >>
> >> --
> >> Este e-mail foi analisado pelo software antiv?rus AVG para verificar a
> >> presen?a de v?rus.
> >> www.avg.com
> >>
> >
> Hello,
>
> This pipe?
>
>
> with(data, tapply(count, Date, mean)) |> as.data.frame()
>
>
> I am not seeing anything wrong with it. I have tried it again just now
> and it runs with no problems, like it had before.
> A solution is not to pipe, separate the instructions.
>
>
> res <- with(data, tapply(count, Date, mean))
> res <- as.data.frame(res)
>
>
> But this should be equivalent to the pipe, I cannot think of a way to
> have this separated instructions run but not the pipe.
>
> Hope this helps,
>
> Rui Barradas
>
>
> --
> Este e-mail foi analisado pelo software antiv?rus AVG para verificar a
> presen?a de v?rus.
> www.avg.com
>

	[[alternative HTML version deleted]]


From g||ted|||e2014 @end|ng |rom gm@||@com  Fri Mar 29 03:12:44 2024
From: g||ted|||e2014 @end|ng |rom gm@||@com (Ogbos Okike)
Date: Fri, 29 Mar 2024 03:12:44 +0100
Subject: [R] Output of tapply function as data frame
In-Reply-To: <CADfFDC6wcTF4W8SzvPxOz6EjugGm7Jgod3YOCioUfKY9hoOmDQ@mail.gmail.com>
References: <CAC8ss307yPyFvs57kPk-enQNH+Kxg+OZfMPOnTg2qQ8v=NKyhQ@mail.gmail.com>
 <2480bdca-a38e-4e56-bf32-ac5d014c9a00@sapo.pt>
 <CADfFDC6wcTF4W8SzvPxOz6EjugGm7Jgod3YOCioUfKY9hoOmDQ@mail.gmail.com>
Message-ID: <CAC8ss33oDzdGx=yiP79ZhMoVvSS-RQ5h3F=7EOB6b7TdNb6yFw@mail.gmail.com>

Dear Deepayan,
Thanks for your kind response.
Regards
Ogbos

On Thu, Mar 28, 2024 at 3:40?AM Deepayan Sarkar <deepayan.sarkar at gmail.com>
wrote:

> For more complicated examples, the (relatively new) array2DF()
> function is also useful:
>
> > with(data, tapply(count, Date, mean)) |> array2DF()
>         Var1    Value
> 1 2024-03-23 5.416667
> 2 2024-03-24 5.500000
> 3 2024-03-25 6.000000
> 4 2024-03-26 4.476190
> 5 2024-03-27 6.538462
> 6 2024-03-28 5.200000
>
> or
>
> > tapply(data, ~ Date, with, mean(count)) |> array2DF(responseName =
> "count")
>         Date    count
> 1 2024-03-23 5.416667
> 2 2024-03-24 5.500000
> 3 2024-03-25 6.000000
> 4 2024-03-26 4.476190
> 5 2024-03-27 6.538462
> 6 2024-03-28 5.200000
>
> Best,
> -Deepayan
>
> On Wed, 27 Mar 2024 at 13:15, Rui Barradas <ruipbarradas at sapo.pt> wrote:
> >
> > ?s 04:30 de 27/03/2024, Ogbos Okike escreveu:
> > > Warm greetings to you all.
> > >
> > > Using the tapply function below:
> > > data<-read.table("FD1month",col.names = c("Dates","count"))
> > > x=data$count
> > >   f<-factor(data$Dates)
> > > AB<- tapply(x,f,mean)
> > >
> > >
> > > I made a simple calculation. The result, stored in AB, is of the form
> > > below. But an effort to write AB to a file as a data frame fails. When
> I
> > > use the write table, it only produces the count column and strip of the
> > > first column (date).
> > >
> > > 2005-11-01 2005-12-01 2006-01-01 2006-02-01 2006-03-01 2006-04-01
> > > 2006-05-01
> > >   -4.106887  -4.259154  -5.836090  -4.756757  -4.118011  -4.487942
> > >   -4.430705
> > > 2006-06-01 2006-07-01 2006-08-01 2006-09-01 2006-10-01 2006-11-01
> > > 2006-12-01
> > >   -3.856727  -6.067103  -6.418767  -4.383031  -3.985805  -4.768196
> > > -10.072579
> > > 2007-01-01 2007-02-01 2007-03-01 2007-04-01 2007-05-01 2007-06-01
> > > 2007-07-01
> > >   -5.342338  -4.653128  -4.325094  -4.525373  -4.574783  -3.915600
> > >   -4.127980
> > > 2007-08-01 2007-09-01 2007-10-01 2007-11-01 2007-12-01 2008-01-01
> > > 2008-02-01
> > >   -3.952150  -4.033518  -4.532878  -4.522941  -4.485693  -3.922155
> > >   -4.183578
> > > 2008-03-01 2008-04-01 2008-05-01 2008-06-01 2008-07-01 2008-08-01
> > > 2008-09-01
> > >   -4.336969  -3.813306  -4.296579  -4.575095  -4.036036  -4.727994
> > >   -4.347428
> > > 2008-10-01 2008-11-01 2008-12-01
> > >   -4.029918  -4.260326  -4.454224
> > >
> > > But the normal format I wish to display only appears on the terminal,
> > > leading me to copy it and paste into a text file. That is, when I
> enter AB
> > > on the terminal, it returns a format in the form:
> > >
> > > 008-02-01  -4.183578
> > > 2008-03-01  -4.336969
> > > 2008-04-01  -3.813306
> > > 2008-05-01  -4.296579
> > > 2008-06-01  -4.575095
> > > 2008-07-01  -4.036036
> > > 2008-08-01  -4.727994
> > > 2008-09-01  -4.347428
> > > 2008-10-01  -4.029918
> > > 2008-11-01  -4.260326
> > > 2008-12-01  -4.454224
> > >
> > > Now, my question: How do I write out two columns displayed by AB on the
> > > terminal to a file?
> > >
> > > I have tried using AB<-data.frame(AB) but it doesn't work either.
> > >
> > > Many thanks for your time.
> > > Ogbos
> > >
> > >       [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> > Hello,
> >
> > The main trick is to pipe to as.data.frame. But the result will have one
> > column only, you must assign the dates from the df's row names.
> > I also include an aggregate solution.
> >
> >
> >
> > # create a test data set
> > set.seed(2024)
> > data <- data.frame(
> >    Date = sample(seq(Sys.Date() - 5, Sys.Date(), by = "1 days"), 100L,
> > TRUE),
> >    count = sample(10L, 100L, TRUE)
> > )
> >
> > # coerce tapply's result to class "data.frame"
> > res <- with(data, tapply(count, Date, mean)) |> as.data.frame()
> > # assign a dates column from the row names
> > res$Date <- row.names(res)
> > # cosmetics
> > names(res)[2:1] <- names(data)
> > # note that the row names are still tapply's names vector
> > # and that the columns order is not Date/count. Both are fixed
> > # after the calculations.
> > res
> > #>               count       Date
> > #> 2024-03-22 5.416667 2024-03-22
> > #> 2024-03-23 5.500000 2024-03-23
> > #> 2024-03-24 6.000000 2024-03-24
> > #> 2024-03-25 4.476190 2024-03-25
> > #> 2024-03-26 6.538462 2024-03-26
> > #> 2024-03-27 5.200000 2024-03-27
> >
> > # fix the columns' order
> > res <- res[2:1]
> >
> >
> >
> > # better all in one instruction
> > aggregate(count ~ Date, data, mean)
> > #>         Date    count
> > #> 1 2024-03-22 5.416667
> > #> 2 2024-03-23 5.500000
> > #> 3 2024-03-24 6.000000
> > #> 4 2024-03-25 4.476190
> > #> 5 2024-03-26 6.538462
> > #> 6 2024-03-27 5.200000
> >
> >
> >
> > Also,
> > I'm glad to help as always but Ogbos, you have been an R-Help
> > contributor for quite a while, please post data in dput format. Given
> > the problem the output of the following is more than enough.
> >
> >
> > dput(head(data, 20L))
> >
> >
> > Hope this helps,
> >
> > Rui Barradas
> >
> >
> > --
> > Este e-mail foi analisado pelo software antiv?rus AVG para verificar a
> presen?a de v?rus.
> > www.avg.com
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Mar 29 04:13:15 2024
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 28 Mar 2024 20:13:15 -0700
Subject: [R] Output of tapply function as data frame: Problem Fixed
In-Reply-To: <CAC8ss302-yh+hJ1DOub_QZWXTV1A=26YJuGhKLGXRd3L0DbLWw@mail.gmail.com>
References: <CAC8ss307yPyFvs57kPk-enQNH+Kxg+OZfMPOnTg2qQ8v=NKyhQ@mail.gmail.com>
 <2480bdca-a38e-4e56-bf32-ac5d014c9a00@sapo.pt>
 <CAC8ss334xxa8oiBKyBPnUKsQ2HyrYiyJ=WVmOzkPWy1fyyPpjg@mail.gmail.com>
 <18c36343-ac71-4915-acf4-a24282153c3d@sapo.pt>
 <CAC8ss302-yh+hJ1DOub_QZWXTV1A=26YJuGhKLGXRd3L0DbLWw@mail.gmail.com>
Message-ID: <A889F502-9B31-4E5F-B685-3B96541A3004@dcn.davis.ca.us>

I would guess your version of R is earlier than 4.1, when the built-in pipe was introduced to the language

On March 28, 2024 6:43:05 PM PDT, Ogbos Okike <giftedlife2014 at gmail.com> wrote:
>Dear Rui,
>Thanks again for resolving this. I have already started using the version
>that works for me.
>
>But to clarify the second part, please let me paste the what I did and the
>error message:
>
>> set.seed(2024)
>> data <- data.frame(
>+    Date = sample(seq(Sys.Date() - 5, Sys.Date(), by = "1 days"), 100L,
>+ TRUE),
>+    count = sample(10L, 100L, TRUE)
>+ )
>>
>> # coerce tapply's result to class "data.frame"
>> res <- with(data, tapply(count, Date, mean)) |> as.data.frame()
>Error: unexpected '>' in "res <- with(data, tapply(count, Date, mean)) |>"
>> # assign a dates column from the row names
>> res$Date <- row.names(res)
>Error in row.names(res) : object 'res' not found
>> # cosmetics
>> names(res)[2:1] <- names(data)
>Error in names(res)[2:1] <- names(data) : object 'res' not found
>> # note that the row names are still tapply's names vector
>> # and that the columns order is not Date/count. Both are fixed
>> # after the calculations.
>> res
>
>You can see that the error message is on the pipe. Please, let me know
>where I am missing it.
>Thanks.
>
>On Wed, Mar 27, 2024 at 10:45?PM Rui Barradas <ruipbarradas at sapo.pt> wrote:
>
>> ?s 08:58 de 27/03/2024, Ogbos Okike escreveu:
>> > Dear Rui,
>> > Nice to hear from you!
>> >
>> > I am sorry for the omission and I have taken note.
>> >
>> > Many thanks for responding. The second solution looks elegant as it
>> quickly
>> > resolved the problem.
>> >
>> > Please, take a second look at the first solution. It refused to run.
>> Looks
>> > as if the pipe is not properly positioned. Efforts to correct it and get
>> it
>> > run failed. If you can look further, it would be great. If time does not
>> > permit, I am fine too.
>> >
>> > But having the too solutions will certainly make the subject more
>> > interesting.
>> > Thank you so much.
>> > With warmest regards from
>> > Ogbos
>> >
>> > On Wed, Mar 27, 2024 at 8:44?AM Rui Barradas <ruipbarradas at sapo.pt>
>> wrote:
>> >
>> >> ?s 04:30 de 27/03/2024, Ogbos Okike escreveu:
>> >>> Warm greetings to you all.
>> >>>
>> >>> Using the tapply function below:
>> >>> data<-read.table("FD1month",col.names = c("Dates","count"))
>> >>> x=data$count
>> >>>    f<-factor(data$Dates)
>> >>> AB<- tapply(x,f,mean)
>> >>>
>> >>>
>> >>> I made a simple calculation. The result, stored in AB, is of the form
>> >>> below. But an effort to write AB to a file as a data frame fails. When
>> I
>> >>> use the write table, it only produces the count column and strip of the
>> >>> first column (date).
>> >>>
>> >>> 2005-11-01 2005-12-01 2006-01-01 2006-02-01 2006-03-01 2006-04-01
>> >>> 2006-05-01
>> >>>    -4.106887  -4.259154  -5.836090  -4.756757  -4.118011  -4.487942
>> >>>    -4.430705
>> >>> 2006-06-01 2006-07-01 2006-08-01 2006-09-01 2006-10-01 2006-11-01
>> >>> 2006-12-01
>> >>>    -3.856727  -6.067103  -6.418767  -4.383031  -3.985805  -4.768196
>> >>> -10.072579
>> >>> 2007-01-01 2007-02-01 2007-03-01 2007-04-01 2007-05-01 2007-06-01
>> >>> 2007-07-01
>> >>>    -5.342338  -4.653128  -4.325094  -4.525373  -4.574783  -3.915600
>> >>>    -4.127980
>> >>> 2007-08-01 2007-09-01 2007-10-01 2007-11-01 2007-12-01 2008-01-01
>> >>> 2008-02-01
>> >>>    -3.952150  -4.033518  -4.532878  -4.522941  -4.485693  -3.922155
>> >>>    -4.183578
>> >>> 2008-03-01 2008-04-01 2008-05-01 2008-06-01 2008-07-01 2008-08-01
>> >>> 2008-09-01
>> >>>    -4.336969  -3.813306  -4.296579  -4.575095  -4.036036  -4.727994
>> >>>    -4.347428
>> >>> 2008-10-01 2008-11-01 2008-12-01
>> >>>    -4.029918  -4.260326  -4.454224
>> >>>
>> >>> But the normal format I wish to display only appears on the terminal,
>> >>> leading me to copy it and paste into a text file. That is, when I enter
>> >> AB
>> >>> on the terminal, it returns a format in the form:
>> >>>
>> >>> 008-02-01  -4.183578
>> >>> 2008-03-01  -4.336969
>> >>> 2008-04-01  -3.813306
>> >>> 2008-05-01  -4.296579
>> >>> 2008-06-01  -4.575095
>> >>> 2008-07-01  -4.036036
>> >>> 2008-08-01  -4.727994
>> >>> 2008-09-01  -4.347428
>> >>> 2008-10-01  -4.029918
>> >>> 2008-11-01  -4.260326
>> >>> 2008-12-01  -4.454224
>> >>>
>> >>> Now, my question: How do I write out two columns displayed by AB on the
>> >>> terminal to a file?
>> >>>
>> >>> I have tried using AB<-data.frame(AB) but it doesn't work either.
>> >>>
>> >>> Many thanks for your time.
>> >>> Ogbos
>> >>>
>> >>>        [[alternative HTML version deleted]]
>> >>>
>> >>> ______________________________________________
>> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> >>> https://stat.ethz.ch/mailman/listinfo/r-help
>> >>> PLEASE do read the posting guide
>> >> http://www.R-project.org/posting-guide.html
>> >>> and provide commented, minimal, self-contained, reproducible code.
>> >> Hello,
>> >>
>> >> The main trick is to pipe to as.data.frame. But the result will have one
>> >> column only, you must assign the dates from the df's row names.
>> >> I also include an aggregate solution.
>> >>
>> >>
>> >>
>> >> # create a test data set
>> >> set.seed(2024)
>> >> data <- data.frame(
>> >>     Date = sample(seq(Sys.Date() - 5, Sys.Date(), by = "1 days"), 100L,
>> >> TRUE),
>> >>     count = sample(10L, 100L, TRUE)
>> >> )
>> >>
>> >> # coerce tapply's result to class "data.frame"
>> >> res <- with(data, tapply(count, Date, mean)) |> as.data.frame()
>> >> # assign a dates column from the row names
>> >> res$Date <- row.names(res)
>> >> # cosmetics
>> >> names(res)[2:1] <- names(data)
>> >> # note that the row names are still tapply's names vector
>> >> # and that the columns order is not Date/count. Both are fixed
>> >> # after the calculations.
>> >> res
>> >> #>               count       Date
>> >> #> 2024-03-22 5.416667 2024-03-22
>> >> #> 2024-03-23 5.500000 2024-03-23
>> >> #> 2024-03-24 6.000000 2024-03-24
>> >> #> 2024-03-25 4.476190 2024-03-25
>> >> #> 2024-03-26 6.538462 2024-03-26
>> >> #> 2024-03-27 5.200000 2024-03-27
>> >>
>> >> # fix the columns' order
>> >> res <- res[2:1]
>> >>
>> >>
>> >>
>> >> # better all in one instruction
>> >> aggregate(count ~ Date, data, mean)
>> >> #>         Date    count
>> >> #> 1 2024-03-22 5.416667
>> >> #> 2 2024-03-23 5.500000
>> >> #> 3 2024-03-24 6.000000
>> >> #> 4 2024-03-25 4.476190
>> >> #> 5 2024-03-26 6.538462
>> >> #> 6 2024-03-27 5.200000
>> >>
>> >>
>> >>
>> >> Also,
>> >> I'm glad to help as always but Ogbos, you have been an R-Help
>> >> contributor for quite a while, please post data in dput format. Given
>> >> the problem the output of the following is more than enough.
>> >>
>> >>
>> >> dput(head(data, 20L))
>> >>
>> >>
>> >> Hope this helps,
>> >>
>> >> Rui Barradas
>> >>
>> >>
>> >> --
>> >> Este e-mail foi analisado pelo software antiv?rus AVG para verificar a
>> >> presen?a de v?rus.
>> >> www.avg.com
>> >>
>> >
>> Hello,
>>
>> This pipe?
>>
>>
>> with(data, tapply(count, Date, mean)) |> as.data.frame()
>>
>>
>> I am not seeing anything wrong with it. I have tried it again just now
>> and it runs with no problems, like it had before.
>> A solution is not to pipe, separate the instructions.
>>
>>
>> res <- with(data, tapply(count, Date, mean))
>> res <- as.data.frame(res)
>>
>>
>> But this should be equivalent to the pipe, I cannot think of a way to
>> have this separated instructions run but not the pipe.
>>
>> Hope this helps,
>>
>> Rui Barradas
>>
>>
>> --
>> Este e-mail foi analisado pelo software antiv?rus AVG para verificar a
>> presen?a de v?rus.
>> www.avg.com
>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Fri Mar 29 06:39:23 2024
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Fri, 29 Mar 2024 05:39:23 +0000
Subject: [R] Output of tapply function as data frame: Problem Fixed
In-Reply-To: <CAC8ss302-yh+hJ1DOub_QZWXTV1A=26YJuGhKLGXRd3L0DbLWw@mail.gmail.com>
References: <CAC8ss307yPyFvs57kPk-enQNH+Kxg+OZfMPOnTg2qQ8v=NKyhQ@mail.gmail.com>
 <2480bdca-a38e-4e56-bf32-ac5d014c9a00@sapo.pt>
 <CAC8ss334xxa8oiBKyBPnUKsQ2HyrYiyJ=WVmOzkPWy1fyyPpjg@mail.gmail.com>
 <18c36343-ac71-4915-acf4-a24282153c3d@sapo.pt>
 <CAC8ss302-yh+hJ1DOub_QZWXTV1A=26YJuGhKLGXRd3L0DbLWw@mail.gmail.com>
Message-ID: <3f1d2114-9ce6-4dd6-878a-484af7b66da1@sapo.pt>

?s 01:43 de 29/03/2024, Ogbos Okike escreveu:
> Dear Rui,
> Thanks again for resolving this. I have already started using the version
> that works for me.
> 
> But to clarify the second part, please let me paste the what I did and the
> error message:
> 
>> set.seed(2024)
>> data <- data.frame(
> +    Date = sample(seq(Sys.Date() - 5, Sys.Date(), by = "1 days"), 100L,
> + TRUE),
> +    count = sample(10L, 100L, TRUE)
> + )
>>
>> # coerce tapply's result to class "data.frame"
>> res <- with(data, tapply(count, Date, mean)) |> as.data.frame()
> Error: unexpected '>' in "res <- with(data, tapply(count, Date, mean)) |>"
>> # assign a dates column from the row names
>> res$Date <- row.names(res)
> Error in row.names(res) : object 'res' not found
>> # cosmetics
>> names(res)[2:1] <- names(data)
> Error in names(res)[2:1] <- names(data) : object 'res' not found
>> # note that the row names are still tapply's names vector
>> # and that the columns order is not Date/count. Both are fixed
>> # after the calculations.
>> res
> 
> You can see that the error message is on the pipe. Please, let me know
> where I am missing it.
> Thanks.
> 
> On Wed, Mar 27, 2024 at 10:45?PM Rui Barradas <ruipbarradas at sapo.pt> wrote:
> 
>> ?s 08:58 de 27/03/2024, Ogbos Okike escreveu:
>>> Dear Rui,
>>> Nice to hear from you!
>>>
>>> I am sorry for the omission and I have taken note.
>>>
>>> Many thanks for responding. The second solution looks elegant as it
>> quickly
>>> resolved the problem.
>>>
>>> Please, take a second look at the first solution. It refused to run.
>> Looks
>>> as if the pipe is not properly positioned. Efforts to correct it and get
>> it
>>> run failed. If you can look further, it would be great. If time does not
>>> permit, I am fine too.
>>>
>>> But having the too solutions will certainly make the subject more
>>> interesting.
>>> Thank you so much.
>>> With warmest regards from
>>> Ogbos
>>>
>>> On Wed, Mar 27, 2024 at 8:44?AM Rui Barradas <ruipbarradas at sapo.pt>
>> wrote:
>>>
>>>> ?s 04:30 de 27/03/2024, Ogbos Okike escreveu:
>>>>> Warm greetings to you all.
>>>>>
>>>>> Using the tapply function below:
>>>>> data<-read.table("FD1month",col.names = c("Dates","count"))
>>>>> x=data$count
>>>>>     f<-factor(data$Dates)
>>>>> AB<- tapply(x,f,mean)
>>>>>
>>>>>
>>>>> I made a simple calculation. The result, stored in AB, is of the form
>>>>> below. But an effort to write AB to a file as a data frame fails. When
>> I
>>>>> use the write table, it only produces the count column and strip of the
>>>>> first column (date).
>>>>>
>>>>> 2005-11-01 2005-12-01 2006-01-01 2006-02-01 2006-03-01 2006-04-01
>>>>> 2006-05-01
>>>>>     -4.106887  -4.259154  -5.836090  -4.756757  -4.118011  -4.487942
>>>>>     -4.430705
>>>>> 2006-06-01 2006-07-01 2006-08-01 2006-09-01 2006-10-01 2006-11-01
>>>>> 2006-12-01
>>>>>     -3.856727  -6.067103  -6.418767  -4.383031  -3.985805  -4.768196
>>>>> -10.072579
>>>>> 2007-01-01 2007-02-01 2007-03-01 2007-04-01 2007-05-01 2007-06-01
>>>>> 2007-07-01
>>>>>     -5.342338  -4.653128  -4.325094  -4.525373  -4.574783  -3.915600
>>>>>     -4.127980
>>>>> 2007-08-01 2007-09-01 2007-10-01 2007-11-01 2007-12-01 2008-01-01
>>>>> 2008-02-01
>>>>>     -3.952150  -4.033518  -4.532878  -4.522941  -4.485693  -3.922155
>>>>>     -4.183578
>>>>> 2008-03-01 2008-04-01 2008-05-01 2008-06-01 2008-07-01 2008-08-01
>>>>> 2008-09-01
>>>>>     -4.336969  -3.813306  -4.296579  -4.575095  -4.036036  -4.727994
>>>>>     -4.347428
>>>>> 2008-10-01 2008-11-01 2008-12-01
>>>>>     -4.029918  -4.260326  -4.454224
>>>>>
>>>>> But the normal format I wish to display only appears on the terminal,
>>>>> leading me to copy it and paste into a text file. That is, when I enter
>>>> AB
>>>>> on the terminal, it returns a format in the form:
>>>>>
>>>>> 008-02-01  -4.183578
>>>>> 2008-03-01  -4.336969
>>>>> 2008-04-01  -3.813306
>>>>> 2008-05-01  -4.296579
>>>>> 2008-06-01  -4.575095
>>>>> 2008-07-01  -4.036036
>>>>> 2008-08-01  -4.727994
>>>>> 2008-09-01  -4.347428
>>>>> 2008-10-01  -4.029918
>>>>> 2008-11-01  -4.260326
>>>>> 2008-12-01  -4.454224
>>>>>
>>>>> Now, my question: How do I write out two columns displayed by AB on the
>>>>> terminal to a file?
>>>>>
>>>>> I have tried using AB<-data.frame(AB) but it doesn't work either.
>>>>>
>>>>> Many thanks for your time.
>>>>> Ogbos
>>>>>
>>>>>         [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>> Hello,
>>>>
>>>> The main trick is to pipe to as.data.frame. But the result will have one
>>>> column only, you must assign the dates from the df's row names.
>>>> I also include an aggregate solution.
>>>>
>>>>
>>>>
>>>> # create a test data set
>>>> set.seed(2024)
>>>> data <- data.frame(
>>>>      Date = sample(seq(Sys.Date() - 5, Sys.Date(), by = "1 days"), 100L,
>>>> TRUE),
>>>>      count = sample(10L, 100L, TRUE)
>>>> )
>>>>
>>>> # coerce tapply's result to class "data.frame"
>>>> res <- with(data, tapply(count, Date, mean)) |> as.data.frame()
>>>> # assign a dates column from the row names
>>>> res$Date <- row.names(res)
>>>> # cosmetics
>>>> names(res)[2:1] <- names(data)
>>>> # note that the row names are still tapply's names vector
>>>> # and that the columns order is not Date/count. Both are fixed
>>>> # after the calculations.
>>>> res
>>>> #>               count       Date
>>>> #> 2024-03-22 5.416667 2024-03-22
>>>> #> 2024-03-23 5.500000 2024-03-23
>>>> #> 2024-03-24 6.000000 2024-03-24
>>>> #> 2024-03-25 4.476190 2024-03-25
>>>> #> 2024-03-26 6.538462 2024-03-26
>>>> #> 2024-03-27 5.200000 2024-03-27
>>>>
>>>> # fix the columns' order
>>>> res <- res[2:1]
>>>>
>>>>
>>>>
>>>> # better all in one instruction
>>>> aggregate(count ~ Date, data, mean)
>>>> #>         Date    count
>>>> #> 1 2024-03-22 5.416667
>>>> #> 2 2024-03-23 5.500000
>>>> #> 3 2024-03-24 6.000000
>>>> #> 4 2024-03-25 4.476190
>>>> #> 5 2024-03-26 6.538462
>>>> #> 6 2024-03-27 5.200000
>>>>
>>>>
>>>>
>>>> Also,
>>>> I'm glad to help as always but Ogbos, you have been an R-Help
>>>> contributor for quite a while, please post data in dput format. Given
>>>> the problem the output of the following is more than enough.
>>>>
>>>>
>>>> dput(head(data, 20L))
>>>>
>>>>
>>>> Hope this helps,
>>>>
>>>> Rui Barradas
>>>>
>>>>
>>>> --
>>>> Este e-mail foi analisado pelo software antiv?rus AVG para verificar a
>>>> presen?a de v?rus.
>>>> www.avg.com
>>>>
>>>
>> Hello,
>>
>> This pipe?
>>
>>
>> with(data, tapply(count, Date, mean)) |> as.data.frame()
>>
>>
>> I am not seeing anything wrong with it. I have tried it again just now
>> and it runs with no problems, like it had before.
>> A solution is not to pipe, separate the instructions.
>>
>>
>> res <- with(data, tapply(count, Date, mean))
>> res <- as.data.frame(res)
>>
>>
>> But this should be equivalent to the pipe, I cannot think of a way to
>> have this separated instructions run but not the pipe.
>>
>> Hope this helps,
>>
>> Rui Barradas
>>
>>
>> --
>> Este e-mail foi analisado pelo software antiv?rus AVG para verificar a
>> presen?a de v?rus.
>> www.avg.com
>>
> 
Hello,

Yes, the problem seems to be the pipe but there is nothing wrong with 
the code.
The pipe operator was introduced in R 4.1.0, what is your version of R?

You can always not use the pipe,


res <- as.data.frame(with(data, tapply(count, Date, mean)))


Hope this helps,

Rui Barradas



-- 
Este e-mail foi analisado pelo software antiv?rus AVG para verificar a presen?a de v?rus.
www.avg.com


From g||ted|||e2014 @end|ng |rom gm@||@com  Fri Mar 29 07:04:28 2024
From: g||ted|||e2014 @end|ng |rom gm@||@com (Ogbos Okike)
Date: Fri, 29 Mar 2024 07:04:28 +0100
Subject: [R] Output of tapply function as data frame: Problem Fixed
In-Reply-To: <3f1d2114-9ce6-4dd6-878a-484af7b66da1@sapo.pt>
References: <CAC8ss307yPyFvs57kPk-enQNH+Kxg+OZfMPOnTg2qQ8v=NKyhQ@mail.gmail.com>
 <2480bdca-a38e-4e56-bf32-ac5d014c9a00@sapo.pt>
 <CAC8ss334xxa8oiBKyBPnUKsQ2HyrYiyJ=WVmOzkPWy1fyyPpjg@mail.gmail.com>
 <18c36343-ac71-4915-acf4-a24282153c3d@sapo.pt>
 <CAC8ss302-yh+hJ1DOub_QZWXTV1A=26YJuGhKLGXRd3L0DbLWw@mail.gmail.com>
 <3f1d2114-9ce6-4dd6-878a-484af7b66da1@sapo.pt>
Message-ID: <CAC8ss33bCdaxKUFyubFRRnJe9v8_QSgqtZ=cj2yW5jP_1X=eKA@mail.gmail.com>

This is great!
Many thanks to all for helping to further resolve the problem.
Best wishes
Ogbos

On Fri, Mar 29, 2024 at 6:39?AM Rui Barradas <ruipbarradas at sapo.pt> wrote:

> ?s 01:43 de 29/03/2024, Ogbos Okike escreveu:
> > Dear Rui,
> > Thanks again for resolving this. I have already started using the version
> > that works for me.
> >
> > But to clarify the second part, please let me paste the what I did and
> the
> > error message:
> >
> >> set.seed(2024)
> >> data <- data.frame(
> > +    Date = sample(seq(Sys.Date() - 5, Sys.Date(), by = "1 days"), 100L,
> > + TRUE),
> > +    count = sample(10L, 100L, TRUE)
> > + )
> >>
> >> # coerce tapply's result to class "data.frame"
> >> res <- with(data, tapply(count, Date, mean)) |> as.data.frame()
> > Error: unexpected '>' in "res <- with(data, tapply(count, Date, mean))
> |>"
> >> # assign a dates column from the row names
> >> res$Date <- row.names(res)
> > Error in row.names(res) : object 'res' not found
> >> # cosmetics
> >> names(res)[2:1] <- names(data)
> > Error in names(res)[2:1] <- names(data) : object 'res' not found
> >> # note that the row names are still tapply's names vector
> >> # and that the columns order is not Date/count. Both are fixed
> >> # after the calculations.
> >> res
> >
> > You can see that the error message is on the pipe. Please, let me know
> > where I am missing it.
> > Thanks.
> >
> > On Wed, Mar 27, 2024 at 10:45?PM Rui Barradas <ruipbarradas at sapo.pt>
> wrote:
> >
> >> ?s 08:58 de 27/03/2024, Ogbos Okike escreveu:
> >>> Dear Rui,
> >>> Nice to hear from you!
> >>>
> >>> I am sorry for the omission and I have taken note.
> >>>
> >>> Many thanks for responding. The second solution looks elegant as it
> >> quickly
> >>> resolved the problem.
> >>>
> >>> Please, take a second look at the first solution. It refused to run.
> >> Looks
> >>> as if the pipe is not properly positioned. Efforts to correct it and
> get
> >> it
> >>> run failed. If you can look further, it would be great. If time does
> not
> >>> permit, I am fine too.
> >>>
> >>> But having the too solutions will certainly make the subject more
> >>> interesting.
> >>> Thank you so much.
> >>> With warmest regards from
> >>> Ogbos
> >>>
> >>> On Wed, Mar 27, 2024 at 8:44?AM Rui Barradas <ruipbarradas at sapo.pt>
> >> wrote:
> >>>
> >>>> ?s 04:30 de 27/03/2024, Ogbos Okike escreveu:
> >>>>> Warm greetings to you all.
> >>>>>
> >>>>> Using the tapply function below:
> >>>>> data<-read.table("FD1month",col.names = c("Dates","count"))
> >>>>> x=data$count
> >>>>>     f<-factor(data$Dates)
> >>>>> AB<- tapply(x,f,mean)
> >>>>>
> >>>>>
> >>>>> I made a simple calculation. The result, stored in AB, is of the form
> >>>>> below. But an effort to write AB to a file as a data frame fails.
> When
> >> I
> >>>>> use the write table, it only produces the count column and strip of
> the
> >>>>> first column (date).
> >>>>>
> >>>>> 2005-11-01 2005-12-01 2006-01-01 2006-02-01 2006-03-01 2006-04-01
> >>>>> 2006-05-01
> >>>>>     -4.106887  -4.259154  -5.836090  -4.756757  -4.118011  -4.487942
> >>>>>     -4.430705
> >>>>> 2006-06-01 2006-07-01 2006-08-01 2006-09-01 2006-10-01 2006-11-01
> >>>>> 2006-12-01
> >>>>>     -3.856727  -6.067103  -6.418767  -4.383031  -3.985805  -4.768196
> >>>>> -10.072579
> >>>>> 2007-01-01 2007-02-01 2007-03-01 2007-04-01 2007-05-01 2007-06-01
> >>>>> 2007-07-01
> >>>>>     -5.342338  -4.653128  -4.325094  -4.525373  -4.574783  -3.915600
> >>>>>     -4.127980
> >>>>> 2007-08-01 2007-09-01 2007-10-01 2007-11-01 2007-12-01 2008-01-01
> >>>>> 2008-02-01
> >>>>>     -3.952150  -4.033518  -4.532878  -4.522941  -4.485693  -3.922155
> >>>>>     -4.183578
> >>>>> 2008-03-01 2008-04-01 2008-05-01 2008-06-01 2008-07-01 2008-08-01
> >>>>> 2008-09-01
> >>>>>     -4.336969  -3.813306  -4.296579  -4.575095  -4.036036  -4.727994
> >>>>>     -4.347428
> >>>>> 2008-10-01 2008-11-01 2008-12-01
> >>>>>     -4.029918  -4.260326  -4.454224
> >>>>>
> >>>>> But the normal format I wish to display only appears on the terminal,
> >>>>> leading me to copy it and paste into a text file. That is, when I
> enter
> >>>> AB
> >>>>> on the terminal, it returns a format in the form:
> >>>>>
> >>>>> 008-02-01  -4.183578
> >>>>> 2008-03-01  -4.336969
> >>>>> 2008-04-01  -3.813306
> >>>>> 2008-05-01  -4.296579
> >>>>> 2008-06-01  -4.575095
> >>>>> 2008-07-01  -4.036036
> >>>>> 2008-08-01  -4.727994
> >>>>> 2008-09-01  -4.347428
> >>>>> 2008-10-01  -4.029918
> >>>>> 2008-11-01  -4.260326
> >>>>> 2008-12-01  -4.454224
> >>>>>
> >>>>> Now, my question: How do I write out two columns displayed by AB on
> the
> >>>>> terminal to a file?
> >>>>>
> >>>>> I have tried using AB<-data.frame(AB) but it doesn't work either.
> >>>>>
> >>>>> Many thanks for your time.
> >>>>> Ogbos
> >>>>>
> >>>>>         [[alternative HTML version deleted]]
> >>>>>
> >>>>> ______________________________________________
> >>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>>> PLEASE do read the posting guide
> >>>> http://www.R-project.org/posting-guide.html
> >>>>> and provide commented, minimal, self-contained, reproducible code.
> >>>> Hello,
> >>>>
> >>>> The main trick is to pipe to as.data.frame. But the result will have
> one
> >>>> column only, you must assign the dates from the df's row names.
> >>>> I also include an aggregate solution.
> >>>>
> >>>>
> >>>>
> >>>> # create a test data set
> >>>> set.seed(2024)
> >>>> data <- data.frame(
> >>>>      Date = sample(seq(Sys.Date() - 5, Sys.Date(), by = "1 days"),
> 100L,
> >>>> TRUE),
> >>>>      count = sample(10L, 100L, TRUE)
> >>>> )
> >>>>
> >>>> # coerce tapply's result to class "data.frame"
> >>>> res <- with(data, tapply(count, Date, mean)) |> as.data.frame()
> >>>> # assign a dates column from the row names
> >>>> res$Date <- row.names(res)
> >>>> # cosmetics
> >>>> names(res)[2:1] <- names(data)
> >>>> # note that the row names are still tapply's names vector
> >>>> # and that the columns order is not Date/count. Both are fixed
> >>>> # after the calculations.
> >>>> res
> >>>> #>               count       Date
> >>>> #> 2024-03-22 5.416667 2024-03-22
> >>>> #> 2024-03-23 5.500000 2024-03-23
> >>>> #> 2024-03-24 6.000000 2024-03-24
> >>>> #> 2024-03-25 4.476190 2024-03-25
> >>>> #> 2024-03-26 6.538462 2024-03-26
> >>>> #> 2024-03-27 5.200000 2024-03-27
> >>>>
> >>>> # fix the columns' order
> >>>> res <- res[2:1]
> >>>>
> >>>>
> >>>>
> >>>> # better all in one instruction
> >>>> aggregate(count ~ Date, data, mean)
> >>>> #>         Date    count
> >>>> #> 1 2024-03-22 5.416667
> >>>> #> 2 2024-03-23 5.500000
> >>>> #> 3 2024-03-24 6.000000
> >>>> #> 4 2024-03-25 4.476190
> >>>> #> 5 2024-03-26 6.538462
> >>>> #> 6 2024-03-27 5.200000
> >>>>
> >>>>
> >>>>
> >>>> Also,
> >>>> I'm glad to help as always but Ogbos, you have been an R-Help
> >>>> contributor for quite a while, please post data in dput format. Given
> >>>> the problem the output of the following is more than enough.
> >>>>
> >>>>
> >>>> dput(head(data, 20L))
> >>>>
> >>>>
> >>>> Hope this helps,
> >>>>
> >>>> Rui Barradas
> >>>>
> >>>>
> >>>> --
> >>>> Este e-mail foi analisado pelo software antiv?rus AVG para verificar a
> >>>> presen?a de v?rus.
> >>>> www.avg.com
> >>>>
> >>>
> >> Hello,
> >>
> >> This pipe?
> >>
> >>
> >> with(data, tapply(count, Date, mean)) |> as.data.frame()
> >>
> >>
> >> I am not seeing anything wrong with it. I have tried it again just now
> >> and it runs with no problems, like it had before.
> >> A solution is not to pipe, separate the instructions.
> >>
> >>
> >> res <- with(data, tapply(count, Date, mean))
> >> res <- as.data.frame(res)
> >>
> >>
> >> But this should be equivalent to the pipe, I cannot think of a way to
> >> have this separated instructions run but not the pipe.
> >>
> >> Hope this helps,
> >>
> >> Rui Barradas
> >>
> >>
> >> --
> >> Este e-mail foi analisado pelo software antiv?rus AVG para verificar a
> >> presen?a de v?rus.
> >> www.avg.com
> >>
> >
> Hello,
>
> Yes, the problem seems to be the pipe but there is nothing wrong with
> the code.
> The pipe operator was introduced in R 4.1.0, what is your version of R?
>
> You can always not use the pipe,
>
>
> res <- as.data.frame(with(data, tapply(count, Date, mean)))
>
>
> Hope this helps,
>
> Rui Barradas
>
>
>
> --
> Este e-mail foi analisado pelo software antiv?rus AVG para verificar a
> presen?a de v?rus.
> www.avg.com
>

	[[alternative HTML version deleted]]


From burj@kmoh@m@d @end|ng |rom gm@||@com  Thu Mar 28 15:27:19 2024
From: burj@kmoh@m@d @end|ng |rom gm@||@com (Mohamad Burjak)
Date: Thu, 28 Mar 2024 10:27:19 -0400
Subject: [R] GEEPACK vs GEE: What are the differences in the estimators
 calculated by geeglm() (GEEPACK) and gee() (GEE)?
Message-ID: <CAAsR3ErYT3K7NMcf_FqihsAaE9T=0pRk=5KeHm-p4aRdyYT1xw@mail.gmail.com>

Hello,

I am interested in running generalized estimating equation models in R.
Currently there are two main packages for doing so in R, geepack and gee. I
understand that even though one can obtain similar to almost identical
results using either of the two, that there are differences between the
packages.

The paper that introduces the geepack package (
https://www.jstatsoft.org/article/view/v015i02) states that the three
features that distinguishes this package from others in R and other stats
software programs include:

   1. There is an interface function geeglm which is designed to be as
   similar to glm as possible
   2. A jackknife variance estimator is available as an alternative to the
   sandwich estimator
   3. Covariates can be incorporated into the scale and correlation
   parameters in a similar fashion to the mean modeling

However from other pages, it also appears that the underlying algorithm
these packages use to obtain the results are slightly different. According
to this post (https://stat.ethz.ch/pipermail/r-help/2003-October/040995.html),
The two packages are using different estimators for the correlation
parameter, and therefore different weights for the observations. From my
understanding, while you can choose between multiple estimators using the
geepack package, that both involve the use of the sandwich estimators as
the default.

I tried reading the documentation for both packages, but could not find
anything going into detail about the estimators used by these packages and
the specific differences between them.

>From my use of both these packages on the same data and regression, results
can be near identical or at least very close. Is there anything out there
that goes into specifics about the differences between these packages?


Thanks,

Mohamad

	[[alternative HTML version deleted]]


From RYAN@A@PETERSON @end|ng |rom CUANSCHUTZ@EDU  Thu Mar 28 22:24:11 2024
From: RYAN@A@PETERSON @end|ng |rom CUANSCHUTZ@EDU (Peterson, Ryan)
Date: Thu, 28 Mar 2024 21:24:11 +0000
Subject: [R] [R-pkgs] New package - fastTS
Message-ID: <SJ2PR05MB10332B2BBCA79839072290B63DB3B2@SJ2PR05MB10332.namprd05.prod.outlook.com>

Hi R enthusiasts,

I am happy to announce a new package available on CRAN: fastTS (https://cran.r-project.org/web/packages/fastTS/). fastTS is especially useful for large time series with exogenous features and/or complex seasonality (i.e. with multiple modes), allowing for possibly high-dimensional feature sets. The method can also facilitate inference on exogenous features, conditional on a series' autoregressive structure. The regularization-based method is considerably faster than competitors, while often producing more accurate predictions. See our open-access publication for more information: https://doi.org/10.1177/1471082X231225307

The package has several vignettes, one of which is an detailed walkthrough of an application to an (included) data set consisting of an hourly series of arrivals into the University of Iowa Emergency Department with concurrent local temperature.

If you encounter any issues or would like to make contributions, please do so via the package's GitHub page: https://github.com/petersonR/fastTS

Best,
Ryan

Ryan Peterson
Assistant Professor
Department of Biostatistics and Informatics
University of Colorado - Anschutz Medical Campus

	[[alternative HTML version deleted]]

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


