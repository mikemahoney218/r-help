From |uy@g@rc|@ @end|ng |rom gm@||@com  Tue Jun  1 00:10:31 2021
From: |uy@g@rc|@ @end|ng |rom gm@||@com (=?UTF-8?Q?Luis_Fernando_Garc=C3=ADa?=)
Date: Mon, 31 May 2021 19:10:31 -0300
Subject: [R] Plot GEE confindence interval band ggplot2
Message-ID: <CANxP2S7JBVVHR0RV79u6ThYEa-4ixFbjNBi2cp6tm84tW-cz6Q@mail.gmail.com>

Dear all,

I want to plot a Generalized Estimating Equation (GEE) model, with
interactions  and the confidence interval using a similar style to ggplot2
. I have tried several packages but all of them produce errors. My idea

I wanted to know if anyone knows a graphical package which works with GEE
or simular solution

Dataset in this link:
https://docs.google.com/spreadsheets/d/1nXerN91Iehe9OM1VGDMS3jnbvvF1tWcuS9bGtlrj_Ss/edit?usp=sharing

Thanks!

code below:

library(geepack)
library(ggplot2)
library(visreg)
library(sjPlot)

#Copy dataset before following the code

dat <- read.delim("clipboard", dec=","); attach(dat)
head(dat)
str(dat)
names(dat)
m5<- geeglm(tim~Pa*Pt,id=Esp, Gamma(link=log), corstr="exchangeable")
anova(m5,test="Chisq")
visreg(m5, "Pt", by="Pa",band=T, overlay=TRUE)
plot_model(m5, type = "pred", terms = c("Pa","Pt"))

	[[alternative HTML version deleted]]


From jrkr|de@u @end|ng |rom gm@||@com  Tue Jun  1 02:25:47 2021
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Mon, 31 May 2021 20:25:47 -0400
Subject: [R] DBDA2E-utilities.R file download
In-Reply-To: <CABxY9BOFo55L5unGckONr6swy7hDJUymsqCd-syjATp5Hh-tMQ@mail.gmail.com>
References: <CABxY9BOFo55L5unGckONr6swy7hDJUymsqCd-syjATp5Hh-tMQ@mail.gmail.com>
Message-ID: <CAKZQJMA3TdThL=5+vrivSgqwrASvj2MEn+uYX63=Ow1i8+8MVw@mail.gmail.com>

If it seems to have installed correctly try:
library(DBDA2E)
which should load the DBDA at E-specific programmes.



On Mon, 31 May 2021 at 16:27, Nick Wray <nickmwray at gmail.com> wrote:
>
> Hello I am trying to download the file "kyusque/DBDA2E-utilities.R" which
> is used in following through John Krushke's book on Bayesian stats.
> According to the net (kyusque/DBDA2E-utilities: Packaged One for
> DBDA2E-utilities.R in 'Kruschke, J. K. (2015). Doing Bayesian Data
> Analysis, Second Edition' version 0.1.0 from GitHub (rdrr.io)
> <https://rdrr.io/github/kyusque/DBDA2E-utilities/>) I needed to
>
> install.packages("remotes")
> remotes::install_github("kyusque/DBDA2E-utilities")
>
> which i have done, and seem to have done successfully
>
> but I can't get hold of the utilities file.  Does anyone know what I
> should now do?
>
> Thanks Nick Wray
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
John Kane
Kingston ON Canada


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Tue Jun  1 10:51:55 2021
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Tue, 1 Jun 2021 09:51:55 +0100
Subject: [R] if statement and for loop question
In-Reply-To: <807993174.1064155.1622478411915@mail.yahoo.com>
References: <1141622248.909505.1622392132322.ref@mail.yahoo.com>
 <1141622248.909505.1622392132322@mail.yahoo.com>
 <CA+8X3fXWDUCvNe2ZHPORZoVyO=Md2K2vAiiBYOXsKnrSU6ahXw@mail.gmail.com>
 <807993174.1064155.1622478411915@mail.yahoo.com>
Message-ID: <223fb941-16c7-0828-9e15-25ac9e045eca@dewey.myzen.co.uk>

Dear Kai

When you ask again it is best to tell us what your input is and what 
output you were hoping for and what you actually got. If you can make a 
small data-set which shows all that then your post will be much more 
likely to get a helpful response. If you want to transfer the data-set 
to us then using dput() will ensure that we have exactly the same as you 
have. Do not forget to tell us what libraries, if any, you have loaded too.

Michael

On 31/05/2021 17:26, Kai Yang via R-help wrote:
>    Hi Jim,
> Sorry to post "same" question, because
> 1. I was asking to use plain text format. I have to post my question again. But I don't know if it is working.
> 2. I'm a beginner for R (< 2 month). It may not easy for me to ask a "clear" R question. My current work is to transfer my SAS code into R, especially for data manipulation part.
> I'll do my best to ask a non."same" question later.
> Thanks,
> Kai
>      On Sunday, May 30, 2021, 10:44:41 PM PDT, Jim Lemon <drjimlemon at gmail.com> wrote:
>   
>   Hi Kai,
> You seem to be asking the same question again and again. This does not
> give us the warm feeling that you know what you want.
> 
> testdf<-data.frame(a=c("Negative","Positive","Neutral","Random","VUS"),
>   b=c("No","Yes","No","Maybe","Yes"),
>   c=c("Off","On","Off","Off","On"),
>   d=c("Bad","Good","Bad","Bad","Good"),
>   stringsAsFactors=FALSE)
> testdf
> match_strings<-c("Positive","VUS")
> testdf$b<-ifelse(testdf$a %in% match_strings,testdf$b,"")
> testdf$c<-ifelse(testdf$a %in% match_strings,testdf$c,"")
> testdf$d<-ifelse(testdf$a %in% match_strings,testdf$d,"")
> testdf
> 
> I have assumed that you mean "zero length strings" rather than
> "zeros". Also note that your initial code was producing logical values
> that were never assigned to anything.
> 
> Jim
> 
> On Mon, May 31, 2021 at 2:29 AM Kai Yang via R-help
> <r-help at r-project.org> wrote:
>>
>> Hello List,I have a data frame which having the character columns:
>>
>> | a1 | b1 | c1 | d1 |
>> | a2 | b2 | c2 | d2 |
>> | a3 | b3 | c3 | d3 |
>> | a4 | b4 | c4 | d4 |
>> | a5 | b5 | c5 | d5 |
>>
>>
>>
>> I need to do: if a1 not = "Positive" and not = "VUS" then values of? b1, c1 and d1 will be zero out. And do the same thing for the a2 to a5 series.
>> I write the code below to do this. But it doesn't work. Would you please correct my code?
>> Thank you,
>> Kai
>>
>>
>> for (i in 1:5)
>> {
>>  ? if (isTRUE(try$a[i] != "Positive" && try$a[i] != "VUS"))
>>  ? {
>>  ? ? try$b[i]== ''
>>  ? ? try$c[i] == ''
>>  ? ? try$d[i]== ''
>>  ? }
>> }
>>
>>
>>  ? ? ? ? [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>    
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Tue Jun  1 14:10:18 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Tue, 1 Jun 2021 13:10:18 +0100
Subject: [R] Plot GEE confindence interval band ggplot2
In-Reply-To: <CANxP2S7JBVVHR0RV79u6ThYEa-4ixFbjNBi2cp6tm84tW-cz6Q@mail.gmail.com>
References: <CANxP2S7JBVVHR0RV79u6ThYEa-4ixFbjNBi2cp6tm84tW-cz6Q@mail.gmail.com>
Message-ID: <ebb19a05-89ae-9bef-659d-bb303ef1d8b0@sapo.pt>

Hello,

I don't know if the following is what you want but it gives confidence 
bars. The error in your code is to have Esp as id.


dat$Id <- as.integer(factor(dat$Esp))

m5 <- geeglm(
   formula = tim ~ Pa*Pt,
   family = Gamma(link = log),
   data = dat,
   id = Id,
   corstr = "exchangeable"
)
plot_model(m5, type = "pred", terms = c("Pa", "Pt"))


Hope this helps,

Rui Barradas

?s 23:10 de 31/05/21, Luis Fernando Garc?a escreveu:
> Dear all,
> 
> I want to plot a Generalized Estimating Equation (GEE) model, with
> interactions  and the confidence interval using a similar style to ggplot2
> . I have tried several packages but all of them produce errors. My idea
> 
> I wanted to know if anyone knows a graphical package which works with GEE
> or simular solution
> 
> Dataset in this link:
> https://docs.google.com/spreadsheets/d/1nXerN91Iehe9OM1VGDMS3jnbvvF1tWcuS9bGtlrj_Ss/edit?usp=sharing
> 
> Thanks!
> 
> code below:
> 
> library(geepack)
> library(ggplot2)
> library(visreg)
> library(sjPlot)
> 
> #Copy dataset before following the code
> 
> dat <- read.delim("clipboard", dec=","); attach(dat)
> head(dat)
> str(dat)
> names(dat)
> m5<- geeglm(tim~Pa*Pt,id=Esp, Gamma(link=log), corstr="exchangeable")
> anova(m5,test="Chisq")
> visreg(m5, "Pt", by="Pa",band=T, overlay=TRUE)
> plot_model(m5, type = "pred", terms = c("Pa","Pt"))
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From m@@@|m|||@no@tr|po|| @end|ng |rom gm@||@com  Tue Jun  1 09:46:42 2021
From: m@@@|m|||@no@tr|po|| @end|ng |rom gm@||@com (Massimiliano Tripoli)
Date: Tue, 1 Jun 2021 09:46:42 +0200
Subject: [R] Binary data on JAGS
Message-ID: <CA+Wm5kjwK0mToPGrtBLYiatSrynRMbGv5TXiT_SZD0DUC_UBow@mail.gmail.com>

Dear R users,
I'm trying to reproduce the example 6.5.1 (Dobson (1983)) in BUGS book in
linux using JAGS.
Below the code as


https://www.mrc-bsu.cam.ac.uk/software/bugs/the-bugs-project-the-bugs-book/bugs-book-examples/the-bugs-book-examples-chapter-6-6-5-1/

# By R code:
library('rjags')

 jags <- jags.model(
    file = "651.bug",
    list (x = c(1.6907, 1.7242, 1.7552, 1.7842, 1.8113, 1.8369, 1.8610,
1.8839),
    n = c(59, 60, 62, 56, 63, 59, 62, 60),
    y = c(6, 13, 18, 28, 52, 53, 61, 60)) ,
    inits = list(beta = 0, alpha = 50),
    n.chains = 3
)

# By JAGS code: (651.bug)

model {
for (i in 1:8) {
y[i] ~ dbin(p[i], n[i])
logit(p[i]) <- alpha + beta*(x[i] - mean(x[]))
phat[i] <- y[i]/n[i]
yhat[i] <- n[i]*p[i]
}
alpha ~ dnorm(0, 0.0001)
beta ~ dnorm(0, 0.0001)
}
# I received this error in R:

# Resolving undeclared variables

#   Allocating nodes

#Graph information:

#   Observed stochastic nodes: 8

#   Unobserved stochastic nodes: 2

#   Total graph size: 78



#Initializing model

#Deleting model



#Error in jags.model(file = "651.bug", list(x = c(1.6907, 1.7242, 1.7552,
 :
#  Error in node y[1]

#Node inconsistent with parents

Thanks in advance
M. Tripoli

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Jun  1 17:22:14 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 1 Jun 2021 08:22:14 -0700
Subject: [R] Binary data on JAGS
In-Reply-To: <CA+Wm5kjwK0mToPGrtBLYiatSrynRMbGv5TXiT_SZD0DUC_UBow@mail.gmail.com>
References: <CA+Wm5kjwK0mToPGrtBLYiatSrynRMbGv5TXiT_SZD0DUC_UBow@mail.gmail.com>
Message-ID: <CAGxFJbTfO3GPHgwMzD+WrVZnFANLCZC9_P6ra3uMhv3big0aVw@mail.gmail.com>

Where is p defined before it is used? (Is this part of what jags provides
somehow?)

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Jun 1, 2021 at 7:57 AM Massimiliano Tripoli <
massimiliano.tripoli at gmail.com> wrote:

> Dear R users,
> I'm trying to reproduce the example 6.5.1 (Dobson (1983)) in BUGS book in
> linux using JAGS.
> Below the code as
>
>
>
> https://www.mrc-bsu.cam.ac.uk/software/bugs/the-bugs-project-the-bugs-book/bugs-book-examples/the-bugs-book-examples-chapter-6-6-5-1/
>
> # By R code:
> library('rjags')
>
>  jags <- jags.model(
>     file = "651.bug",
>     list (x = c(1.6907, 1.7242, 1.7552, 1.7842, 1.8113, 1.8369, 1.8610,
> 1.8839),
>     n = c(59, 60, 62, 56, 63, 59, 62, 60),
>     y = c(6, 13, 18, 28, 52, 53, 61, 60)) ,
>     inits = list(beta = 0, alpha = 50),
>     n.chains = 3
> )
>
> # By JAGS code: (651.bug)
>
> model {
> for (i in 1:8) {
> y[i] ~ dbin(p[i], n[i])
> logit(p[i]) <- alpha + beta*(x[i] - mean(x[]))
> phat[i] <- y[i]/n[i]
> yhat[i] <- n[i]*p[i]
> }
> alpha ~ dnorm(0, 0.0001)
> beta ~ dnorm(0, 0.0001)
> }
> # I received this error in R:
>
> # Resolving undeclared variables
>
> #   Allocating nodes
>
> #Graph information:
>
> #   Observed stochastic nodes: 8
>
> #   Unobserved stochastic nodes: 2
>
> #   Total graph size: 78
>
>
>
> #Initializing model
>
> #Deleting model
>
>
>
> #Error in jags.model(file = "651.bug", list(x = c(1.6907, 1.7242, 1.7552,
>  :
> #  Error in node y[1]
>
> #Node inconsistent with parents
>
> Thanks in advance
> M. Tripoli
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Jun  1 19:39:51 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 1 Jun 2021 10:39:51 -0700
Subject: [R] Binary data on JAGS
In-Reply-To: <CA+Wm5kh1QZagF_JJbPMp_G_qD1nh4EkME1ULXK0sWReL-oLDeg@mail.gmail.com>
References: <CA+Wm5kjwK0mToPGrtBLYiatSrynRMbGv5TXiT_SZD0DUC_UBow@mail.gmail.com>
 <CAGxFJbTfO3GPHgwMzD+WrVZnFANLCZC9_P6ra3uMhv3big0aVw@mail.gmail.com>
 <CA+Wm5kh1QZagF_JJbPMp_G_qD1nh4EkME1ULXK0sWReL-oLDeg@mail.gmail.com>
Message-ID: <CAGxFJbSOMW4WkZruJ3shiDqz+UJiuRnwW8jB8hkbFCqGFCb7gQ@mail.gmail.com>

Unless you have got reason not to, always reply to the list (included in
this response). I cannot help, but someone else may be able to.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Jun 1, 2021 at 10:34 AM Massimiliano Tripoli <
massimiliano.tripoli at gmail.com> wrote:

> I tried to write
> p[i]<y[i]/n[i] but I received a runtime error
> (Attempt to redefine node p[1]).
> Thanks
>
> Il mar 1 giu 2021, 17:22 Bert Gunter <bgunter.4567 at gmail.com> ha scritto:
>
>> Where is p defined before it is used? (Is this part of what jags provides
>> somehow?)
>>
>> Bert Gunter
>>
>> "The trouble with having an open mind is that people keep coming along
>> and sticking things into it."
>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>
>>
>> On Tue, Jun 1, 2021 at 7:57 AM Massimiliano Tripoli <
>> massimiliano.tripoli at gmail.com> wrote:
>>
>>> Dear R users,
>>> I'm trying to reproduce the example 6.5.1 (Dobson (1983)) in BUGS book in
>>> linux using JAGS.
>>> Below the code as
>>>
>>>
>>>
>>> https://www.mrc-bsu.cam.ac.uk/software/bugs/the-bugs-project-the-bugs-book/bugs-book-examples/the-bugs-book-examples-chapter-6-6-5-1/
>>>
>>> # By R code:
>>> library('rjags')
>>>
>>>  jags <- jags.model(
>>>     file = "651.bug",
>>>     list (x = c(1.6907, 1.7242, 1.7552, 1.7842, 1.8113, 1.8369, 1.8610,
>>> 1.8839),
>>>     n = c(59, 60, 62, 56, 63, 59, 62, 60),
>>>     y = c(6, 13, 18, 28, 52, 53, 61, 60)) ,
>>>     inits = list(beta = 0, alpha = 50),
>>>     n.chains = 3
>>> )
>>>
>>> # By JAGS code: (651.bug)
>>>
>>> model {
>>> for (i in 1:8) {
>>> y[i] ~ dbin(p[i], n[i])
>>> logit(p[i]) <- alpha + beta*(x[i] - mean(x[]))
>>> phat[i] <- y[i]/n[i]
>>> yhat[i] <- n[i]*p[i]
>>> }
>>> alpha ~ dnorm(0, 0.0001)
>>> beta ~ dnorm(0, 0.0001)
>>> }
>>> # I received this error in R:
>>>
>>> # Resolving undeclared variables
>>>
>>> #   Allocating nodes
>>>
>>> #Graph information:
>>>
>>> #   Observed stochastic nodes: 8
>>>
>>> #   Unobserved stochastic nodes: 2
>>>
>>> #   Total graph size: 78
>>>
>>>
>>>
>>> #Initializing model
>>>
>>> #Deleting model
>>>
>>>
>>>
>>> #Error in jags.model(file = "651.bug", list(x = c(1.6907, 1.7242, 1.7552,
>>>  :
>>> #  Error in node y[1]
>>>
>>> #Node inconsistent with parents
>>>
>>> Thanks in advance
>>> M. Tripoli
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>

	[[alternative HTML version deleted]]


From m@@@|m|||@no@tr|po|| @end|ng |rom gm@||@com  Tue Jun  1 19:52:13 2021
From: m@@@|m|||@no@tr|po|| @end|ng |rom gm@||@com (Massimiliano Tripoli)
Date: Tue, 1 Jun 2021 19:52:13 +0200
Subject: [R] Binary data on JAGS
In-Reply-To: <CAGxFJbTfO3GPHgwMzD+WrVZnFANLCZC9_P6ra3uMhv3big0aVw@mail.gmail.com>
References: <CA+Wm5kjwK0mToPGrtBLYiatSrynRMbGv5TXiT_SZD0DUC_UBow@mail.gmail.com>
 <CAGxFJbTfO3GPHgwMzD+WrVZnFANLCZC9_P6ra3uMhv3big0aVw@mail.gmail.com>
Message-ID: <CA+Wm5kjVJkxTixbojdHu7ZNSeWF5rvMBkTavteJ--MDi4NaLyA@mail.gmail.com>

Thanks, for suggestions (To define p before).
I thought it and I put this line of code inside the loop:
p[i] <- y[i] / n[i]
but I received a RUNTIME ERROR and:
(Attempt to redefine node p[1]).
Thanks

Massimiliano

Il giorno mar 1 giu 2021 alle ore 17:22 Bert Gunter <bgunter.4567 at gmail.com>
ha scritto:

> Where is p defined before it is used? (Is this part of what jags provides
> somehow?)
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Tue, Jun 1, 2021 at 7:57 AM Massimiliano Tripoli <
> massimiliano.tripoli at gmail.com> wrote:
>
>> Dear R users,
>> I'm trying to reproduce the example 6.5.1 (Dobson (1983)) in BUGS book in
>> linux using JAGS.
>> Below the code as
>>
>>
>>
>> https://www.mrc-bsu.cam.ac.uk/software/bugs/the-bugs-project-the-bugs-book/bugs-book-examples/the-bugs-book-examples-chapter-6-6-5-1/
>>
>> # By R code:
>> library('rjags')
>>
>>  jags <- jags.model(
>>     file = "651.bug",
>>     list (x = c(1.6907, 1.7242, 1.7552, 1.7842, 1.8113, 1.8369, 1.8610,
>> 1.8839),
>>     n = c(59, 60, 62, 56, 63, 59, 62, 60),
>>     y = c(6, 13, 18, 28, 52, 53, 61, 60)) ,
>>     inits = list(beta = 0, alpha = 50),
>>     n.chains = 3
>> )
>>
>> # By JAGS code: (651.bug)
>>
>> model {
>> for (i in 1:8) {
>> y[i] ~ dbin(p[i], n[i])
>> logit(p[i]) <- alpha + beta*(x[i] - mean(x[]))
>> phat[i] <- y[i]/n[i]
>> yhat[i] <- n[i]*p[i]
>> }
>> alpha ~ dnorm(0, 0.0001)
>> beta ~ dnorm(0, 0.0001)
>> }
>> # I received this error in R:
>>
>> # Resolving undeclared variables
>>
>> #   Allocating nodes
>>
>> #Graph information:
>>
>> #   Observed stochastic nodes: 8
>>
>> #   Unobserved stochastic nodes: 2
>>
>> #   Total graph size: 78
>>
>>
>>
>> #Initializing model
>>
>> #Deleting model
>>
>>
>>
>> #Error in jags.model(file = "651.bug", list(x = c(1.6907, 1.7242, 1.7552,
>>  :
>> #  Error in node y[1]
>>
>> #Node inconsistent with parents
>>
>> Thanks in advance
>> M. Tripoli
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From jrkr|de@u @end|ng |rom gm@||@com  Tue Jun  1 20:19:44 2021
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Tue, 1 Jun 2021 14:19:44 -0400
Subject: [R] DBDA2E-utilities.R file download
In-Reply-To: <CABxY9BPgeP0cmprdUnsJxqYDU_D-YPJNHKoXNniZ6pcx_7_iyg@mail.gmail.com>
References: <CABxY9BOFo55L5unGckONr6swy7hDJUymsqCd-syjATp5Hh-tMQ@mail.gmail.com>
 <CAKZQJMA3TdThL=5+vrivSgqwrASvj2MEn+uYX63=Ow1i8+8MVw@mail.gmail.com>
 <CABxY9BPgeP0cmprdUnsJxqYDU_D-YPJNHKoXNniZ6pcx_7_iyg@mail.gmail.com>
Message-ID: <CAKZQJMBHLww9+G5EJV00Ktz3Ns-RP5nEKXn4vMwrAe7RK3twDA@mail.gmail.com>

I have added this to the R Help mailing list as it increases your
chances of getting a helpful response.

That error message <i> can't "lazyload"</i> indicates that you have
some serious problem(s) upstream.

Probably the best thing to do is copy and paste the entire
installation output here for people to examine.

However as a quicker approach, scroll through the output and look for
an earlier message that will say something like:
There is no package called ?XXXX?.

This will indicate that for some reasan the package XXXX is not being
installed automatically.

You should try an install.packages("XXXX") and then retry
remotes::install_github("kyusque/DBDA2E-utilities")

In some cases there may be one missing package.

On Tue, 1 Jun 2021 at 03:19, Nick Wray <nickmwray at gmail.com> wrote:
>
> Hi John  Thanks but that doesn't work.  When installing the needed packages R is telling me that it can't "lazyload"  DBDA2E-utilities.  Tbh I don't understand what that means. The page I quoted in my OP implies that one should be able to easily upload the file but there are various error messages which come up which again tbh mean nothing to me.  As far as I am aware this file should simply be some straightforward data to do an exercise in the book...  Nick
>
> On Tue, 1 Jun 2021 at 01:26, John Kane <jrkrideau at gmail.com> wrote:
>>
>> If it seems to have installed correctly try:
>> library(DBDA2E)
>> which should load the DBDA at E-specific programmes.
>>
>>
>>
>> On Mon, 31 May 2021 at 16:27, Nick Wray <nickmwray at gmail.com> wrote:
>> >
>> > Hello I am trying to download the file "kyusque/DBDA2E-utilities.R" which
>> > is used in following through John Krushke's book on Bayesian stats.
>> > According to the net (kyusque/DBDA2E-utilities: Packaged One for
>> > DBDA2E-utilities.R in 'Kruschke, J. K. (2015). Doing Bayesian Data
>> > Analysis, Second Edition' version 0.1.0 from GitHub (rdrr.io)
>> > <https://rdrr.io/github/kyusque/DBDA2E-utilities/>) I needed to
>> >
>> > install.packages("remotes")
>> > remotes::install_github("kyusque/DBDA2E-utilities")
>> >
>> > which i have done, and seem to have done successfully
>> >
>> > but I can't get hold of the utilities file.  Does anyone know what I
>> > should now do?
>> >
>> > Thanks Nick Wray
>> >
>> >         [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>>
>>
>>
>> --
>> John Kane
>> Kingston ON Canada



-- 
John Kane
Kingston ON Canada


From e|ong0527 @end|ng |rom gm@||@com  Tue Jun  1 16:06:33 2021
From: e|ong0527 @end|ng |rom gm@||@com (Yilong Zhang)
Date: Tue, 1 Jun 2021 10:06:33 -0400
Subject: [R] [R-pkgs] r2rtf: Easily Create Production-Ready Rich Text Format
 (RTF) Table and Figure
Message-ID: <CANP8LTWrVq7hFWnAAf3+Ff=t4aaySOUD_TJ4sw=87pOkPjg5CA@mail.gmail.com>

Dear all,



I am happy to announce that {r2rtf} v0.3.0 is now on CRAN.



r2rtf is an R package to create production-ready tables and figures in RTF
format. The R package is designed to provide simple ?verb? functions that
correspond to each component of a table or figure.



I hope you find it helpful. Please feel free to reach out with feedback or
questions.



CRAN: https://cloud.r-project.org/web/packages/r2rtf/index.html

Documentation: https://merck.github.io/r2rtf/articles/index.html



Thanks,



Yilong

	[[alternative HTML version deleted]]

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From y@ngk@|9999 @end|ng |rom y@hoo@com  Wed Jun  2 01:58:38 2021
From: y@ngk@|9999 @end|ng |rom y@hoo@com (Kai Yang)
Date: Tue, 1 Jun 2021 23:58:38 +0000 (UTC)
Subject: [R] replace NA into -  for specific column
References: <1487868184.1349710.1622591918874.ref@mail.yahoo.com>
Message-ID: <1487868184.1349710.1622591918874@mail.yahoo.com>

Hi List,
I have a column MMR in a data frame proband_crc2. The column contents missing value and + (means positive).?
I need to replace all missing value into - (means negative)
I did try with difference ways.? Below are my testing,?but not any one works. Can someone help me?
Thanks,
Kai
proband_crc2 %>% mutate(MMR=recode(MMR, '' = "-"))
proband_crc2? ? ? ? ? ? <- data.frame (ifelse(proband_crc2$MMR !="+", "-", NA))
proband_crc2$MMR <- ifelse(MMR %in% c(""," ","-"), NA, MMR)
proband_crc2$MMR[proband_crc2$MMR==NA] <- "-"
proband_crc2? ? ? ? ? ?<- data.frame( proband_crc2 %>% mutate(across(c("MMR"), ~ifelse(.==NA, "-", as.character(.)))))


	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Jun  2 02:11:49 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 01 Jun 2021 17:11:49 -0700
Subject: [R] replace NA into -  for specific column
In-Reply-To: <1487868184.1349710.1622591918874@mail.yahoo.com>
References: <1487868184.1349710.1622591918874.ref@mail.yahoo.com>
 <1487868184.1349710.1622591918874@mail.yahoo.com>
Message-ID: <115EDED9-F63D-4719-96F8-DF0DA0A7A20B@dcn.davis.ca.us>

A unary negative sign with no number is not a number, so it has to be character. If you are done with computations you can format your numbers as character data and set the NA to "-", but such a conversion will prevent you from performing computations so it is only useful for creating report tables.

On June 1, 2021 4:58:38 PM PDT, Kai Yang via R-help <r-help at r-project.org> wrote:
>Hi List,
>I have a column MMR in a data frame proband_crc2. The column contents
>missing value and + (means positive).?
>I need to replace all missing value into - (means negative)
>I did try with difference ways.? Below are my testing,?but not any one
>works. Can someone help me?
>Thanks,
>Kai
>proband_crc2 %>% mutate(MMR=recode(MMR, '' = "-"))
>proband_crc2? ? ? ? ? ? <- data.frame (ifelse(proband_crc2$MMR !="+",
>"-", NA))
>proband_crc2$MMR <- ifelse(MMR %in% c(""," ","-"), NA, MMR)
>proband_crc2$MMR[proband_crc2$MMR==NA] <- "-"
>proband_crc2? ? ? ? ? ?<- data.frame( proband_crc2 %>%
>mutate(across(c("MMR"), ~ifelse(.==NA, "-", as.character(.)))))
>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From rm@h@rp @end|ng |rom me@com  Wed Jun  2 03:59:50 2021
From: rm@h@rp @end|ng |rom me@com (R. Mark Sharp)
Date: Tue, 1 Jun 2021 21:59:50 -0400
Subject: [R] wanting to count instances of values in each cell of a series
 of simulated symmetric matrices of the same size
Message-ID: <325141A8-6318-4174-A063-3D07F6D56CF8@me.com>

I want to capture the entire distribution of values for each cell in a sequence of symmetric matrices of the same size. The diagonal values are all 0.5 so I need only the values above or below the diagonal. 

A small example with three of the structures I am wanting to count follows:
       F      G      H      I     J
F 0.6250 0.3750 0.2500 0.1875 0.125
G 0.3750 0.6250 0.2500 0.1875 0.125
H 0.2500 0.2500 0.5000 0.1875 0.125
I 0.1875 0.1875 0.1875 0.5000 0.250
J 0.1250 0.1250 0.1250 0.2500 0.500

       F      G      H      I     J
F 0.5625 0.3125 0.1875 0.1250 0.125
G 0.3125 0.5625 0.1875 0.1250 0.125
H 0.1875 0.1875 0.5000 0.1875 0.125
I 0.1250 0.1250 0.1875 0.5000 0.250
J 0.1250 0.1250 0.1250 0.2500 0.500

        F       G      H       I      J
F 0.50000 0.25000 0.1250 0.09375 0.0625
G 0.25000 0.50000 0.1250 0.09375 0.0625
H 0.12500 0.12500 0.5000 0.18750 0.1250
I 0.09375 0.09375 0.1875 0.50000 0.2500
J 0.06250 0.06250 0.1250 0.25000 0.5000


To be more specific, I have coded up a solution for a single cell with the sequence of values (one from each matrix) in a vector. 

I used match() below and it works with a matrix but I do not know how to do what is in the if statements with matrices. Since the number of values and the values will be different among the various cells a simple array structure does not seem appropriate and I am assuming I will need to use a list but I would like to do as much as I can with matrices for speed and clarity.

#' Counts the number of occurrences of each kinship value seen for a pair of
#' individuals.
#'
#' @examples
#' \donttest{
#' set.seed(20210529)
#' kSamples <- sample(c(0, 0.0675, 0.125, 0.25, 0.5, 0.75), 10000, replace = TRUE,
#'                    prob = c(0.005, 0.3, 0.15, 0.075, 0.0375, 0.01875))
#' kVC <- list(kinshipValues = numeric(0),
#'             kinshipCounts = numeric(0))
#' for (kSample in kSamples) {
#'   kVC <- countKinshipValues(kSample, kVC$kinshipValues, kVC$kinshipCounts)
#' }
#' kVC
#' ## $kinshipValues
#' ## [1] 0.2500 0.1250 0.0675 0.7500 0.5000 0.0000
#' ##
#' ## $kinshipCounts
#' ## [1]  301 2592 5096 1322  592   97
#' }
#'
#' @param kValue numeric value being counted (kinship value in
#' \emph{nprcgenekeepr})
#' @param kinshipValues vector of unique values of \code{kValue} seen
#' thus far.
#' @param kinshipCounts vector of the counts of the unique values of
#' \code{kValue} seen thus far.
#' @export
countKinshipValues <- function(kValue, kinshipValues = numeric(0),
                              kinshipCounts = numeric(0)) {
  kinshipValue <- match(kValue, kinshipValues, nomatch = -1L)
  if (kinshipValue == -1L) {
    kinshipValues <- c(kinshipValues, kValue)
    kinshipCounts[length(kinshipCounts) + 1] <- 1
  } else {
    kinshipCounts[kinshipValue] <- kinshipCounts[kinshipValue] + 1
  }
  list(kinshipValues = kinshipValues,
       kinshipCounts = kinshipCounts)
}

Mark


R. Mark Sharp, Ph.D.
Data Scientist and Biomedical Statistical Consultant
7526 Meadow Green St.
San Antonio, TX 78251
mobile: 210-218-2868
rmsharp at me.com


From bgunter@4567 @end|ng |rom gm@||@com  Wed Jun  2 04:44:19 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 1 Jun 2021 19:44:19 -0700
Subject: [R] 
 wanting to count instances of values in each cell of a series
 of simulated symmetric matrices of the same size
In-Reply-To: <325141A8-6318-4174-A063-3D07F6D56CF8@me.com>
References: <325141A8-6318-4174-A063-3D07F6D56CF8@me.com>
Message-ID: <CAGxFJbSSxF42GUfEzKwm=5v9jwHvB-cBEG0e5hqmdu7HpFPJtg@mail.gmail.com>

Come again?! The diagonal values in your example are not all .5.

If space is not an issue, a straightforward approach is to collect all the
matrices into a 3d array and use indexing.
Here is a simple reprex (as you did not provide one in a convenient form,
e.g via dput())

x <- matrix(1:9, nr = 3); y <- x+10
diag(x) <- diag(y) <- 0
print(x) ; print(y)
## Now you need to populate a 3 x 3 x 2 array with these matrices
## How you do this depends on your naming conventions
## You might use a loop, or ls() and assign(),
##  or collect your matrices into a list and use do.call() or ...
## You will *not*want to do this if you have lots of matrices:
list_of_mats <- list(x,y)
arr <- array(do.call(c,list_of_mats), dim = c(3,3,length(list_of_mats)))
arr
arr[2,3,] ## all the values in the [2,3] cell of the matrices; do whatever
you want with them.

Cheers,
Bert



Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Jun 1, 2021 at 7:00 PM R. Mark Sharp via R-help <
r-help at r-project.org> wrote:

> I want to capture the entire distribution of values for each cell in a
> sequence of symmetric matrices of the same size. The diagonal values are
> all 0.5 so I need only the values above or below the diagonal.
>
> A small example with three of the structures I am wanting to count follows:
>        F      G      H      I     J
> F 0.6250 0.3750 0.2500 0.1875 0.125
> G 0.3750 0.6250 0.2500 0.1875 0.125
> H 0.2500 0.2500 0.5000 0.1875 0.125
> I 0.1875 0.1875 0.1875 0.5000 0.250
> J 0.1250 0.1250 0.1250 0.2500 0.500
>
>        F      G      H      I     J
> F 0.5625 0.3125 0.1875 0.1250 0.125
> G 0.3125 0.5625 0.1875 0.1250 0.125
> H 0.1875 0.1875 0.5000 0.1875 0.125
> I 0.1250 0.1250 0.1875 0.5000 0.250
> J 0.1250 0.1250 0.1250 0.2500 0.500
>
>         F       G      H       I      J
> F 0.50000 0.25000 0.1250 0.09375 0.0625
> G 0.25000 0.50000 0.1250 0.09375 0.0625
> H 0.12500 0.12500 0.5000 0.18750 0.1250
> I 0.09375 0.09375 0.1875 0.50000 0.2500
> J 0.06250 0.06250 0.1250 0.25000 0.5000
>
>
> To be more specific, I have coded up a solution for a single cell with the
> sequence of values (one from each matrix) in a vector.
>
> I used match() below and it works with a matrix but I do not know how to
> do what is in the if statements with matrices. Since the number of values
> and the values will be different among the various cells a simple array
> structure does not seem appropriate and I am assuming I will need to use a
> list but I would like to do as much as I can with matrices for speed and
> clarity.
>
> #' Counts the number of occurrences of each kinship value seen for a pair
> of
> #' individuals.
> #'
> #' @examples
> #' \donttest{
> #' set.seed(20210529)
> #' kSamples <- sample(c(0, 0.0675, 0.125, 0.25, 0.5, 0.75), 10000, replace
> = TRUE,
> #'                    prob = c(0.005, 0.3, 0.15, 0.075, 0.0375, 0.01875))
> #' kVC <- list(kinshipValues = numeric(0),
> #'             kinshipCounts = numeric(0))
> #' for (kSample in kSamples) {
> #'   kVC <- countKinshipValues(kSample, kVC$kinshipValues,
> kVC$kinshipCounts)
> #' }
> #' kVC
> #' ## $kinshipValues
> #' ## [1] 0.2500 0.1250 0.0675 0.7500 0.5000 0.0000
> #' ##
> #' ## $kinshipCounts
> #' ## [1]  301 2592 5096 1322  592   97
> #' }
> #'
> #' @param kValue numeric value being counted (kinship value in
> #' \emph{nprcgenekeepr})
> #' @param kinshipValues vector of unique values of \code{kValue} seen
> #' thus far.
> #' @param kinshipCounts vector of the counts of the unique values of
> #' \code{kValue} seen thus far.
> #' @export
> countKinshipValues <- function(kValue, kinshipValues = numeric(0),
>                               kinshipCounts = numeric(0)) {
>   kinshipValue <- match(kValue, kinshipValues, nomatch = -1L)
>   if (kinshipValue == -1L) {
>     kinshipValues <- c(kinshipValues, kValue)
>     kinshipCounts[length(kinshipCounts) + 1] <- 1
>   } else {
>     kinshipCounts[kinshipValue] <- kinshipCounts[kinshipValue] + 1
>   }
>   list(kinshipValues = kinshipValues,
>        kinshipCounts = kinshipCounts)
> }
>
> Mark
>
>
> R. Mark Sharp, Ph.D.
> Data Scientist and Biomedical Statistical Consultant
> 7526 Meadow Green St.
> San Antonio, TX 78251
> mobile: 210-218-2868
> rmsharp at me.com
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From rm@h@rp @end|ng |rom me@com  Wed Jun  2 07:05:54 2021
From: rm@h@rp @end|ng |rom me@com (R. Mark Sharp)
Date: Wed, 2 Jun 2021 01:05:54 -0400
Subject: [R] 
 wanting to count instances of values in each cell of a series
 of simulated symmetric matrices of the same size
In-Reply-To: <CAGxFJbSSxF42GUfEzKwm=5v9jwHvB-cBEG0e5hqmdu7HpFPJtg@mail.gmail.com>
References: <325141A8-6318-4174-A063-3D07F6D56CF8@me.com>
 <CAGxFJbSSxF42GUfEzKwm=5v9jwHvB-cBEG0e5hqmdu7HpFPJtg@mail.gmail.com>
Message-ID: <806BE73B-82E0-4594-A67C-E049B216AFA0@me.com>

Bert, 

You are obviously correct about the diagonals. I was not thinking carefully. Typically they are expected to be at or near 0.5 in an outbred population but can theoretically go to 1.0 in completely inbred populations. This was subset from a madeup pedigree and I reused parents, hence the inbreeding.

Space is a concern since I will need to simulate more matrices for the same precision as the matrices (breeding populations) increase in size. However, I will certainly look into your suggestion. I am doing this on the side so it may take a few days.

Thank you for your kind attention. I will provide more definitive feedback later.

Mark
R. Mark Sharp, Ph.D.
Data Scientist and Biomedical Statistical Consultant
7526 Meadow Green St.
San Antonio, TX 78251
mobile: 210-218-2868
rmsharp at me.com











> On Jun 1, 2021, at 10:44 PM, Bert Gunter <bgunter.4567 at gmail.com> wrote:
> 
> Come again?! The diagonal values in your example are not all .5.
> 
> If space is not an issue, a straightforward approach is to collect all the matrices into a 3d array and use indexing.
> Here is a simple reprex (as you did not provide one in a convenient form, e.g via dput())
> 
> x <- matrix(1:9, nr = 3); y <- x+10
> diag(x) <- diag(y) <- 0
> print(x) ; print(y)
> ## Now you need to populate a 3 x 3 x 2 array with these matrices
> ## How you do this depends on your naming conventions
> ## You might use a loop, or ls() and assign(),
> ##  or collect your matrices into a list and use do.call() or ...
> ## You will *not*want to do this if you have lots of matrices:
> list_of_mats <- list(x,y) 
> arr <- array(do.call(c,list_of_mats), dim = c(3,3,length(list_of_mats)))
> arr
> arr[2,3,] ## all the values in the [2,3] cell of the matrices; do whatever you want with them.
> 
> Cheers,
> Bert
> 
> 
> 
> Bert Gunter
> 
> "The trouble with having an open mind is that people keep coming along and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> 
> 
> On Tue, Jun 1, 2021 at 7:00 PM R. Mark Sharp via R-help <r-help at r-project.org <mailto:r-help at r-project.org>> wrote:
> I want to capture the entire distribution of values for each cell in a sequence of symmetric matrices of the same size. The diagonal values are all 0.5 so I need only the values above or below the diagonal. 
> 
> A small example with three of the structures I am wanting to count follows:
>        F      G      H      I     J
> F 0.6250 0.3750 0.2500 0.1875 0.125
> G 0.3750 0.6250 0.2500 0.1875 0.125
> H 0.2500 0.2500 0.5000 0.1875 0.125
> I 0.1875 0.1875 0.1875 0.5000 0.250
> J 0.1250 0.1250 0.1250 0.2500 0.500
> 
>        F      G      H      I     J
> F 0.5625 0.3125 0.1875 0.1250 0.125
> G 0.3125 0.5625 0.1875 0.1250 0.125
> H 0.1875 0.1875 0.5000 0.1875 0.125
> I 0.1250 0.1250 0.1875 0.5000 0.250
> J 0.1250 0.1250 0.1250 0.2500 0.500
> 
>         F       G      H       I      J
> F 0.50000 0.25000 0.1250 0.09375 0.0625
> G 0.25000 0.50000 0.1250 0.09375 0.0625
> H 0.12500 0.12500 0.5000 0.18750 0.1250
> I 0.09375 0.09375 0.1875 0.50000 0.2500
> J 0.06250 0.06250 0.1250 0.25000 0.5000
> 
> 
> To be more specific, I have coded up a solution for a single cell with the sequence of values (one from each matrix) in a vector. 
> 
> I used match() below and it works with a matrix but I do not know how to do what is in the if statements with matrices. Since the number of values and the values will be different among the various cells a simple array structure does not seem appropriate and I am assuming I will need to use a list but I would like to do as much as I can with matrices for speed and clarity.
> 
> #' Counts the number of occurrences of each kinship value seen for a pair of
> #' individuals.
> #'
> #' @examples
> #' \donttest{
> #' set.seed(20210529)
> #' kSamples <- sample(c(0, 0.0675, 0.125, 0.25, 0.5, 0.75), 10000, replace = TRUE,
> #'                    prob = c(0.005, 0.3, 0.15, 0.075, 0.0375, 0.01875))
> #' kVC <- list(kinshipValues = numeric(0),
> #'             kinshipCounts = numeric(0))
> #' for (kSample in kSamples) {
> #'   kVC <- countKinshipValues(kSample, kVC$kinshipValues, kVC$kinshipCounts)
> #' }
> #' kVC
> #' ## $kinshipValues
> #' ## [1] 0.2500 0.1250 0.0675 0.7500 0.5000 0.0000
> #' ##
> #' ## $kinshipCounts
> #' ## [1]  301 2592 5096 1322  592   97
> #' }
> #'
> #' @param kValue numeric value being counted (kinship value in
> #' \emph{nprcgenekeepr})
> #' @param kinshipValues vector of unique values of \code{kValue} seen
> #' thus far.
> #' @param kinshipCounts vector of the counts of the unique values of
> #' \code{kValue} seen thus far.
> #' @export
> countKinshipValues <- function(kValue, kinshipValues = numeric(0),
>                               kinshipCounts = numeric(0)) {
>   kinshipValue <- match(kValue, kinshipValues, nomatch = -1L)
>   if (kinshipValue == -1L) {
>     kinshipValues <- c(kinshipValues, kValue)
>     kinshipCounts[length(kinshipCounts) + 1] <- 1
>   } else {
>     kinshipCounts[kinshipValue] <- kinshipCounts[kinshipValue] + 1
>   }
>   list(kinshipValues = kinshipValues,
>        kinshipCounts = kinshipCounts)
> }
> 
> Mark
> 
> 
> R. Mark Sharp, Ph.D.
> Data Scientist and Biomedical Statistical Consultant
> 7526 Meadow Green St.
> San Antonio, TX 78251
> mobile: 210-218-2868
> rmsharp at me.com <mailto:rmsharp at me.com>
> 
> ______________________________________________
> R-help at r-project.org <mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help <https://stat.ethz.ch/mailman/listinfo/r-help>
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html <http://www.r-project.org/posting-guide.html>
> and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From r-p@ck@ge@ @end|ng |rom r-project@org  Tue Jun  1 23:41:23 2021
From: r-p@ck@ge@ @end|ng |rom r-project@org (Vincent Goulet via R-packages)
Date: Tue, 1 Jun 2021 17:41:23 -0400
Subject: [R] [R-pkgs] Announcing RweaveExtra
Message-ID: <2A51428D-5C81-467A-80A1-640AA37A440A@me.com>

Hi all,

A new package is now available on CRAN: RweaveExtra 1.0-0, which provides "Sweave Drivers with Extra Tricks Up their Sleeve".

Call me an old timer, but I always stuck to Sweave ever since it introduced me to literate programming. I just prefer the simplicity of the system. 

Now, I developed a workflow over the last few of years where one option was missing in the weave and tangle 	steps: the ability to completely ignore a code chunk. Sure, one can use 'eval = FALSE', but this is not equivalent. First, the code in the chunk is parsed. Second, the code is commented out in the tangled file. 

What if I want to write unparsable code (say for didactic purposes) or code in a foreign language altogether, and that I want this code to appear as is in the tangled script? This is where RweaveExtra comes in. Use the 'RweaveExtraLatex' driver with the chunk option 'ignore.on.weave=TRUE' and the code in the chunk will be completely ignored (not even parsed) on the weave step, but it will still be written out verbatim (uncommented) in the tangle step. (For symmetry reasons, an 'ignore.on.tangle' option also exists for the 'RtangleExtra' driver, but I never had use for it.)

See ?RweaveExtraLatex for a complete example.

I have been using the package "privately" for the past year without any issue.

I hope that the new drivers may prove useful to the community.

Vincent Goulet
?cole d'actuariat
Universit? Laval
_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From drj|m|emon @end|ng |rom gm@||@com  Wed Jun  2 10:59:03 2021
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Wed, 2 Jun 2021 18:59:03 +1000
Subject: [R] replace NA into - for specific column
In-Reply-To: <1487868184.1349710.1622591918874@mail.yahoo.com>
References: <1487868184.1349710.1622591918874.ref@mail.yahoo.com>
 <1487868184.1349710.1622591918874@mail.yahoo.com>
Message-ID: <CA+8X3fU2mWa-cN86mNGyK_pE8aHt8nphchgwOAd5A8tkqd_Brw@mail.gmail.com>

Hi Kai,
Maybe this will help:

proband_crc2<-data.frame(MMR=rep(c(NA,"+"),3))
proband_crc2
proband_crc2$MMR[is.na(proband_crc2$MMR)]<-"-"
proband_crc2

Jim

On Wed, Jun 2, 2021 at 9:59 AM Kai Yang via R-help <r-help at r-project.org> wrote:
>
> Hi List,
> I have a column MMR in a data frame proband_crc2. The column contents missing value and + (means positive).
> I need to replace all missing value into - (means negative)
> I did try with difference ways.  Below are my testing, but not any one works. Can someone help me?
> Thanks,
> Kai
> proband_crc2 %>% mutate(MMR=recode(MMR, '' = "-"))
> proband_crc2            <- data.frame (ifelse(proband_crc2$MMR !="+", "-", NA))
> proband_crc2$MMR <- ifelse(MMR %in% c(""," ","-"), NA, MMR)
> proband_crc2$MMR[proband_crc2$MMR==NA] <- "-"
> proband_crc2           <- data.frame( proband_crc2 %>% mutate(across(c("MMR"), ~ifelse(.==NA, "-", as.character(.)))))
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From y@ngk@|9999 @end|ng |rom y@hoo@com  Wed Jun  2 17:17:50 2021
From: y@ngk@|9999 @end|ng |rom y@hoo@com (Kai Yang)
Date: Wed, 2 Jun 2021 15:17:50 +0000 (UTC)
Subject: [R] replace NA into -  for specific column
In-Reply-To: <1487868184.1349710.1622591918874@mail.yahoo.com>
References: <1487868184.1349710.1622591918874.ref@mail.yahoo.com>
 <1487868184.1349710.1622591918874@mail.yahoo.com>
Message-ID: <1385773038.1496061.1622647070061@mail.yahoo.com>

 Hello Jim,Your example works well.Thank you for your help,Kai
    On Tuesday, June 1, 2021, 04:59:09 PM PDT, Kai Yang via R-help <r-help at r-project.org> wrote:  
 
 Hi List,
I have a column MMR in a data frame proband_crc2. The column contents missing value and + (means positive).?
I need to replace all missing value into - (means negative)
I did try with difference ways.? Below are my testing,?but not any one works. Can someone help me?
Thanks,
Kai
proband_crc2 %>% mutate(MMR=recode(MMR, '' = "-"))
proband_crc2? ? ? ? ? ? <- data.frame (ifelse(proband_crc2$MMR !="+", "-", NA))
proband_crc2$MMR <- ifelse(MMR %in% c(""," ","-"), NA, MMR)
proband_crc2$MMR[proband_crc2$MMR==NA] <- "-"
proband_crc2? ? ? ? ? ?<- data.frame( proband_crc2 %>% mutate(across(c("MMR"), ~ifelse(.==NA, "-", as.character(.)))))


??? [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.
  
	[[alternative HTML version deleted]]


From jrkr|de@u @end|ng |rom gm@||@com  Wed Jun  2 19:10:37 2021
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Wed, 2 Jun 2021 13:10:37 -0400
Subject: [R] DBDA2E-utilities.R file download
In-Reply-To: <CAKZQJMBHLww9+G5EJV00Ktz3Ns-RP5nEKXn4vMwrAe7RK3twDA@mail.gmail.com>
References: <CABxY9BOFo55L5unGckONr6swy7hDJUymsqCd-syjATp5Hh-tMQ@mail.gmail.com>
 <CAKZQJMA3TdThL=5+vrivSgqwrASvj2MEn+uYX63=Ow1i8+8MVw@mail.gmail.com>
 <CABxY9BPgeP0cmprdUnsJxqYDU_D-YPJNHKoXNniZ6pcx_7_iyg@mail.gmail.com>
 <CAKZQJMBHLww9+G5EJV00Ktz3Ns-RP5nEKXn4vMwrAe7RK3twDA@mail.gmail.com>
Message-ID: <CAKZQJMDfqdaDaWjjc5S5bCzR2yCA2Gb=7WHOYmMzSVqZ-S4miQ@mail.gmail.com>

"
In some cases there may be one missing package."

That should reae

In some cases there may be more than one missing package.

On Tue, 1 Jun 2021 at 14:19, John Kane <jrkrideau at gmail.com> wrote:
>
> I have added this to the R Help mailing list as it increases your
> chances of getting a helpful response.
>
> That error message <i> can't "lazyload"</i> indicates that you have
> some serious problem(s) upstream.
>
> Probably the best thing to do is copy and paste the entire
> installation output here for people to examine.
>
> However as a quicker approach, scroll through the output and look for
> an earlier message that will say something like:
> There is no package called ?XXXX?.
>
> This will indicate that for some reasan the package XXXX is not being
> installed automatically.
>
> You should try an install.packages("XXXX") and then retry
> remotes::install_github("kyusque/DBDA2E-utilities")
>
> In some cases there may be one missing package.
>
> On Tue, 1 Jun 2021 at 03:19, Nick Wray <nickmwray at gmail.com> wrote:
> >
> > Hi John  Thanks but that doesn't work.  When installing the needed packages R is telling me that it can't "lazyload"  DBDA2E-utilities.  Tbh I don't understand what that means. The page I quoted in my OP implies that one should be able to easily upload the file but there are various error messages which come up which again tbh mean nothing to me.  As far as I am aware this file should simply be some straightforward data to do an exercise in the book...  Nick
> >
> > On Tue, 1 Jun 2021 at 01:26, John Kane <jrkrideau at gmail.com> wrote:
> >>
> >> If it seems to have installed correctly try:
> >> library(DBDA2E)
> >> which should load the DBDA at E-specific programmes.
> >>
> >>
> >>
> >> On Mon, 31 May 2021 at 16:27, Nick Wray <nickmwray at gmail.com> wrote:
> >> >
> >> > Hello I am trying to download the file "kyusque/DBDA2E-utilities.R" which
> >> > is used in following through John Krushke's book on Bayesian stats.
> >> > According to the net (kyusque/DBDA2E-utilities: Packaged One for
> >> > DBDA2E-utilities.R in 'Kruschke, J. K. (2015). Doing Bayesian Data
> >> > Analysis, Second Edition' version 0.1.0 from GitHub (rdrr.io)
> >> > <https://rdrr.io/github/kyusque/DBDA2E-utilities/>) I needed to
> >> >
> >> > install.packages("remotes")
> >> > remotes::install_github("kyusque/DBDA2E-utilities")
> >> >
> >> > which i have done, and seem to have done successfully
> >> >
> >> > but I can't get hold of the utilities file.  Does anyone know what I
> >> > should now do?
> >> >
> >> > Thanks Nick Wray
> >> >
> >> >         [[alternative HTML version deleted]]
> >> >
> >> > ______________________________________________
> >> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> > https://stat.ethz.ch/mailman/listinfo/r-help
> >> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >> > and provide commented, minimal, self-contained, reproducible code.
> >>
> >>
> >>
> >> --
> >> John Kane
> >> Kingston ON Canada
>
>
>
> --
> John Kane
> Kingston ON Canada



-- 
John Kane
Kingston ON Canada


From y@ngk@|9999 @end|ng |rom y@hoo@com  Wed Jun  2 23:07:48 2021
From: y@ngk@|9999 @end|ng |rom y@hoo@com (Kai Yang)
Date: Wed, 2 Jun 2021 21:07:48 +0000 (UTC)
Subject: [R] trim NA from concatenate result
References: <1419199396.1587041.1622668068242.ref@mail.yahoo.com>
Message-ID: <1419199396.1587041.1622668068242@mail.yahoo.com>

Hi List,
I use paste function to concatenate? 3 character columns together.
when I run table to see that, I found 3 categories. How can I write script to trim NA in 2nd and 3rd group and set the first one as NA?
Thanks,
Kai
NA NA NA?
NA NA Adenocarcinoma
NA Other NA

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Jun  2 23:58:02 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 2 Jun 2021 22:58:02 +0100
Subject: [R] trim NA from concatenate result
In-Reply-To: <1419199396.1587041.1622668068242@mail.yahoo.com>
References: <1419199396.1587041.1622668068242.ref@mail.yahoo.com>
 <1419199396.1587041.1622668068242@mail.yahoo.com>
Message-ID: <1ffa8903-703d-0b8e-ee1d-acab25a93bb0@sapo.pt>

Hello,

Something like this?


df1 <- read.table(text = "
NA NA NA
NA NA Adenocarcinoma
NA Other NA")
df1

apply(df1, 1, function(x){
   if(all(is.na(x))){
     NA_character_
   }else{
     paste(x[!is.na(x)], collapse = "")
   }
})


And please configure your e-mail client not to post in HTML format.

Hope this helps,

Rui Barradas

?s 22:07 de 02/06/21, Kai Yang via R-help escreveu:
> Hi List,
> I use paste function to concatenate? 3 character columns together.
> when I run table to see that, I found 3 categories. How can I write script to trim NA in 2nd and 3rd group and set the first one as NA?
> Thanks,
> Kai
> NA NA NA
> NA NA Adenocarcinoma
> NA Other NA
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From y@ngk@|9999 @end|ng |rom y@hoo@com  Thu Jun  3 01:19:34 2021
From: y@ngk@|9999 @end|ng |rom y@hoo@com (Kai Yang)
Date: Wed, 2 Jun 2021 23:19:34 +0000 (UTC)
Subject: [R] trim NA from concatenate result
In-Reply-To: <1419199396.1587041.1622668068242@mail.yahoo.com>
References: <1419199396.1587041.1622668068242.ref@mail.yahoo.com>
 <1419199396.1587041.1622668068242@mail.yahoo.com>
Message-ID: <96527851.1620142.1622675974931@mail.yahoo.com>

Hi Rui,
I use the code to fix my problem:
try$newcol <- gsub(" NA", "", try$newcol)

But, I'll try your solution later.
Thank you for your help.
Kai   On Wednesday, June 2, 2021, 02:08:18 PM PDT, Kai Yang via R-help <r-help at r-project.org> wrote:  
 
 Hi List,
I use paste function to concatenate? 3 character columns together.
when I run table to see that, I found 3 categories. How can I write script to trim NA in 2nd and 3rd group and set the first one as NA?
Thanks,
Kai
NA NA NA?
NA NA Adenocarcinoma
NA Other NA

??? [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.
  
	[[alternative HTML version deleted]]


From |uy@g@rc|@ @end|ng |rom gm@||@com  Wed Jun  2 09:46:32 2021
From: |uy@g@rc|@ @end|ng |rom gm@||@com (=?UTF-8?Q?Luis_Fernando_Garc=C3=ADa?=)
Date: Wed, 2 Jun 2021 04:46:32 -0300
Subject: [R] Question about sjPlot lines and scale
Message-ID: <CANxP2S6GiojcmyXMUWY0OfaYKEOkAfU2eKLiXWuRrCfazSR_og@mail.gmail.com>

Dear all,

I am wanting to improve a plot made with the package sjPlot.

When plotting this model


Plot produced looks like this
https://docs.google.com/presentation/d/1Pqm6BcJXdSQ6U1zmv5FV7gBcn1afHHv7rlQHe6j59_c/edit?usp=sharing,
especially red and green lines.

I just have two concerns with this, the first one is that lines seem a bit
pixelated, and I would like to improve it, I have tried some approaches but
it has not been possible.

Dataset in this link:
https://docs.google.com/spreadsheets/d/1nXerN91Iehe9OM1VGDMS3jnbvvF1tWcuS9bGtlrj_Ss/edit?usp=sharing

library(geepack)
library(ggplot2)
library(sjPlot)
library(ggeffects)
#Copy dataset before following the code
dat <- read.delim("clipboard", dec=","); attach(dat)

dat$Id <- as.integer(factor(dat$Esp))
str(dat)
m5 <- geeglm(
  formula = tim ~ Pa*Pt,
  family = Gamma(link = log),
  data = dat,
  id = Id,
  corstr = "exchangeable"
)

anova(m5,test="chisq")

p=  plot_model(m5, type = "pred", terms = c("Pt[n=100]", "Pa"),
digits=1,line.size=0.5,show.data=T,colors=c("green","#00a0c9","red"))

p

The second one, is I would like to remove the decimal values (i.e. in the x
axis), however I?m not very sure if it is possible to do this in sjPlot or
if you know a similar alternative in ggplot2. I tried this approach but it
did not work.

p=p+ scale_x_discrete(limits=c(1,2,3))
p

When making this plot, there is a space before 1 and after 3 I would like
to erase.

Best

	[[alternative HTML version deleted]]


From kon@t@nt|no@@chr|@todou|ou1 @end|ng |rom gm@||@com  Wed Jun  2 11:25:57 2021
From: kon@t@nt|no@@chr|@todou|ou1 @end|ng |rom gm@||@com (konstantinos christodoulou)
Date: Wed, 2 Jun 2021 12:25:57 +0300
Subject: [R] replace NA into - for specific column
In-Reply-To: <CA+8X3fU2mWa-cN86mNGyK_pE8aHt8nphchgwOAd5A8tkqd_Brw@mail.gmail.com>
References: <1487868184.1349710.1622591918874.ref@mail.yahoo.com>
 <1487868184.1349710.1622591918874@mail.yahoo.com>
 <CA+8X3fU2mWa-cN86mNGyK_pE8aHt8nphchgwOAd5A8tkqd_Brw@mail.gmail.com>
Message-ID: <CANVfANpx=efbPV7=uVxsseogUu6u5idN+qCDkUUMMpcRVkSCvQ@mail.gmail.com>

Hi Kai,

You can also try this:

proband_crc2 %>%
  mutate(MMR = replace(MMR, MMR =="NA", "-"))

Thanks,
Kostas

On Wed, Jun 2, 2021 at 11:59 AM Jim Lemon <drjimlemon at gmail.com> wrote:

> Hi Kai,
> Maybe this will help:
>
> proband_crc2<-data.frame(MMR=rep(c(NA,"+"),3))
> proband_crc2
> proband_crc2$MMR[is.na(proband_crc2$MMR)]<-"-"
> proband_crc2
>
> Jim
>
> On Wed, Jun 2, 2021 at 9:59 AM Kai Yang via R-help <r-help at r-project.org>
> wrote:
> >
> > Hi List,
> > I have a column MMR in a data frame proband_crc2. The column contents
> missing value and + (means positive).
> > I need to replace all missing value into - (means negative)
> > I did try with difference ways.  Below are my testing, but not any one
> works. Can someone help me?
> > Thanks,
> > Kai
> > proband_crc2 %>% mutate(MMR=recode(MMR, '' = "-"))
> > proband_crc2            <- data.frame (ifelse(proband_crc2$MMR !="+",
> "-", NA))
> > proband_crc2$MMR <- ifelse(MMR %in% c(""," ","-"), NA, MMR)
> > proband_crc2$MMR[proband_crc2$MMR==NA] <- "-"
> > proband_crc2           <- data.frame( proband_crc2 %>%
> mutate(across(c("MMR"), ~ifelse(.==NA, "-", as.character(.)))))
> >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From dj@ndr|j@ @end|ng |rom gm@||@com  Thu Jun  3 14:16:21 2021
From: dj@ndr|j@ @end|ng |rom gm@||@com (Andrija Djurovic)
Date: Thu, 3 Jun 2021 14:16:21 +0200
Subject: [R] [R-pkgs] monobin: Monotonic Binning for Credit Rating Models
Message-ID: <CABcwgRRfT=ArGrzSerAtVptziZatVzsboT4ibpZKk-dHnfYUxA@mail.gmail.com>

Dear R users,

I am happy to announce that my package monobin is now available on CRAN.

The package contains functions that perform monotonic binning of numeric
risk factor in credit rating models (PD, LGD, EAD) development. All
functions handle both binary and continuous target variable. Functions that
use isotonic regression in the first stage of binning process have an
additional feature for correction of minimum percentage of observations and
minimum target rate per bin. Additionally, monotonic trend can be
identified based on raw data or, if known in advance, forced by functions'
argument. Missing values and other possible special values are treated
separately from so-called complete cases.
Close attention should be paid when modeling continuous target due to
possible negative values.

Hope that some of you will find the package useful.

Best regards,
Andrija Djurovic

	[[alternative HTML version deleted]]

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From m@icei m@iii@g oii i@iomed@sid@cu  Thu Jun  3 19:00:14 2021
From: m@icei m@iii@g oii i@iomed@sid@cu (m@icei m@iii@g oii i@iomed@sid@cu)
Date: Thu, 3 Jun 2021 19:00:14 +0200
Subject: [R] impute.transcan missing original variables
Message-ID: <000001d75899$ee354cb0$ca9fe610$@infomed.sld.cu>


I?m trying to select only one dataframe, after performing an imputation with aregImpute and impute.transcan. However, I cannot get back a variable that was kept out of the imputation model. Can somebody tell me how to do it? If we illustrate this problem using the following reproducible example, how could I get the dataframe with all the variables that were not imputated, such as Species and id variables?
Best !


Data
data("iris") 
library(missForest)
library(tidyverse)
library(Hmisc)

# example
iris.missing <- iris %>% 
  group_by(Species) %>% 
  prodNA(noNA = 0.1) %>% 
  ungroup() %>% 
  mutate(id=row_number())

imputation_model <- aregImpute(~Sepal.Length+Sepal.Width+Petal.Width,
                               n.impute=3,
                               data=iris.missing,
                               pr=F, 
                               type='pmm')

data_imp <- impute.transcan(imputation_model,
                                  imputation=1,
                                  data=iris.missing,
                                  list.out=TRUE,
                                  pr=FALSE,
                                  check=FALSE)


datos_imp <- bind_rows(data_imp)


--
Este mensaje le ha llegado mediante el servicio de correo electronico que ofrece Infomed para respaldar el cumplimiento de las misiones del Sistema Nacional de Salud. La persona que envia este correo asume el compromiso de usar el servicio a tales fines y cumplir con las regulaciones establecidas

Infomed: http://www.sld.cu/


From nev||@@mo@ @end|ng |rom gm@||@com  Fri Jun  4 07:59:00 2021
From: nev||@@mo@ @end|ng |rom gm@||@com (nevil amos)
Date: Fri, 4 Jun 2021 15:59:00 +1000
Subject: [R] shinyFiles update shinySaveButton filename varaible from server
Message-ID: <CAN9eD7n3eW28YmktHsi7QPn4Q1A6gF8RwjV0ryirDVbJ7W-Ctg@mail.gmail.com>

Is it possible to update the filename variable  the shinySaveButton from
the server?

I want to provide a default  filename based on a series of choices that the
user has made in the app ( here I have just made a random string to serve
the purpose.  how do I feed output$defaultname
 so that shinySaveButton( filename = outputSdefaultname )?


library(shiny)
library(shinyFiles)

data <- iris
roots <- c("UserFolder"=".")

ui <- fluidPage(
  actionButton("makeName","Make Default File Name"),
  shinySaveButton(id = "save", label = "Save file", title = "Save file as
...", filename = "defaultname",filetype=list(csv="csv"))
)


server <- shinyServer(function(input, output, session) {
  rv <- reactiveValues()
  observeEvent(input$makeName,{
    output$defaultname<-paste(letters[sample(1:10,5)],collapse="")
  })

  observe({


    shinyFileSave(input, "save", roots=roots, session=session)
    fileinfo <- parseSavePath(roots, input$save)
    xx<<-input$save
    if (nrow(fileinfo) > 0) {
      write.csv(, as.character(fileinfo$datapath))

    }
    session$allowReconnect("force")
  })
})

runApp(list(
  ui=ui,
  server=server
))

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Fri Jun  4 11:57:26 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Fri, 4 Jun 2021 11:57:26 +0200
Subject: [R] foreign package read.spss() and NA levels
In-Reply-To: <LO2P265MB31178ADC394E34613C9212E5E4239@LO2P265MB3117.GBRP265.PROD.OUTLOOK.COM>
References: <LO2P265MB31178ADC394E34613C9212E5E4239@LO2P265MB3117.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <32cc1d69-47d1-5a67-fc87-43f257839848@statistik.tu-dortmund.de>



On 27.05.2021 12:27, Allen, Justin wrote:
> Hi All,
> 
> Wanted to report what may be a bug or possibly an oversight, but I am unsure, in the "foreign" packages in the read.spss() command, https://cran.r-project.org/web/packages/foreign/index.html. When running the following code,
> 
> input <- read.spss("[.sav file location]", to.data.frame = TRUE)
> str(input)
> 
> The read.spss() seems to be applying addNA() to factors so NA is being set as a level, and there seems to be no way to get read.spss() to bring factors in without doing this. This seems to be a recent change as read.spss() was not doing this as of a few months ago. None of the arguments in read.spss() seem to also stop this behaviour. I am currently on the most recent version of both R and the package, as of 27/05/21, and am using RStudio Version 1.4.1106.

Within R (I do not use RStudio) and even with the most recent R-devel, I see

(sav <- system.file("files", "electric.sav", package = "foreign"))
dat <- read.spss(file=sav, to.data.frame=TRUE)
table(dat$DAYOFWK)

#  SUNDAY   MONDAY  TUESDAY WEDNSDAY THURSDAY   FRIDAY SATURDAY
#      19       11       19       17       15       13       16

table(dat$DAYOFWK, useNA="always")

#  SUNDAY   MONDAY  TUESDAY WEDNSDAY THURSDAY   FRIDAY SATURDAY     <NA>
#      19       11       19       17       15       13       16      130

So exactly what you expected?

If you rather use

dat <- read.spss(file=sav, to.data.frame=TRUE, use.missings=FALSE)

table(dat$DAYOFWK, useNA="always")

you see the NA values are converted to a factor level called "MISSING".

If it is different on your end, pelase try in plain R, tell us the 
version of R / foreign and show an example data file where this happens.

Best,
Uwe Ligges



> 
> Any thoughts?
> 
> Many Thanks,
> 
> Justin Allen
> 
> p.s. your continued maintenance and additions to R and its packages have been infinitely useful in my work and life and thank for that.
> 
> Justin Allen
> Housing Consultant, BRE<https://bregroup.com/>
> T: 07807122647
> 
> ________________________________
> Follow BRE on Twitter: @BRE_Group<http://twitter.com/BRE_Group>
> ________________________________
> Privileged and confidential information and/or copyright material may be contained in this e-mail. If you are not the intended addressee you may not copy or deliver it to anyone else or use it in any unauthorised manner. To do so is prohibited and may be unlawful. If you have received this e-mail by mistake, please advise the sender immediately by return e-mail and destroy all copies. Thank you.
> 
> Building Research Establishment Ltd, Registered under number 3319324 in England and Wales. VAT Registration No GB 689 9499 27 www.bregroup.com<http://www.bregroup.com>
> BRE Global Limited, Registered under number 8961297 in England and Wales. www.breglobal.com<http://www.breglobal.com>
> Building Research Establishment and BRE Global are subsidiaries of the BRE Trust.
> BRE Trust is a company limited by guarantee, Registered under number 3282856 in England and Wales, and registered as a charity in England (no. 1092193) and in Scotland (no. SC039320). www.bretrust.org.uk<http://www.bretrust.org.uk>
> Registered Offices: Bucknalls Lane, Garston, Watford, Hertfordshire WD25 9XX - Travelling to BRE: see www.bregroup.com/contact/directions/<http://www.bregroup.com/contact/directions/>
> ________________________________
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From bgunter@4567 @end|ng |rom gm@||@com  Fri Jun  4 16:20:27 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 4 Jun 2021 07:20:27 -0700
Subject: [R] 
 shinyFiles update shinySaveButton filename varaible from server
In-Reply-To: <CAN9eD7n3eW28YmktHsi7QPn4Q1A6gF8RwjV0ryirDVbJ7W-Ctg@mail.gmail.com>
References: <CAN9eD7n3eW28YmktHsi7QPn4Q1A6gF8RwjV0ryirDVbJ7W-Ctg@mail.gmail.com>
Message-ID: <CAGxFJbTdQsi-mAKZQaLdMOWbRHXAK+w-nvydOY-CZtSTpX9vWQ@mail.gmail.com>

Note, per the Posting Guide (linked below),

"For questions about functions in standard packages distributed with R (see
the FAQ Add-on packages in R
<https://cran.r-project.org/doc/FAQ/R-FAQ.html#Add-on-packages-in-R>), ask
questions on R-help.

If the question relates to a *contributed package* , e.g., one downloaded
from CRAN, try contacting the package maintainer first. You can also use
find("functionname") and packageDescription("packagename") to find this
information. *Only* send such questions to R-help or R-devel if you get no
reply or need further assistance. This applies to both requests for help
and to bug reports."

So do not be surprised if you do not get a response here.


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Thu, Jun 3, 2021 at 11:00 PM nevil amos <nevil.amos at gmail.com> wrote:

> Is it possible to update the filename variable  the shinySaveButton from
> the server?
>
> I want to provide a default  filename based on a series of choices that the
> user has made in the app ( here I have just made a random string to serve
> the purpose.  how do I feed output$defaultname
>  so that shinySaveButton( filename = outputSdefaultname )?
>
>
> library(shiny)
> library(shinyFiles)
>
> data <- iris
> roots <- c("UserFolder"=".")
>
> ui <- fluidPage(
>   actionButton("makeName","Make Default File Name"),
>   shinySaveButton(id = "save", label = "Save file", title = "Save file as
> ...", filename = "defaultname",filetype=list(csv="csv"))
> )
>
>
> server <- shinyServer(function(input, output, session) {
>   rv <- reactiveValues()
>   observeEvent(input$makeName,{
>     output$defaultname<-paste(letters[sample(1:10,5)],collapse="")
>   })
>
>   observe({
>
>
>     shinyFileSave(input, "save", roots=roots, session=session)
>     fileinfo <- parseSavePath(roots, input$save)
>     xx<<-input$save
>     if (nrow(fileinfo) > 0) {
>       write.csv(, as.character(fileinfo$datapath))
>
>     }
>     session$allowReconnect("force")
>   })
> })
>
> runApp(list(
>   ui=ui,
>   server=server
> ))
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From m@d|@on3be|| @end|ng |rom gm@||@com  Fri Jun  4 16:03:40 2021
From: m@d|@on3be|| @end|ng |rom gm@||@com (Madison Bell)
Date: Fri, 4 Jun 2021 10:03:40 -0400
Subject: [R] Can I use group_map to iteratively process a dataframe?
Message-ID: <CABjGm04X-Rjp9dO-5cmfOKDuqzPgH9TXWnhV3DHKe+YBauSVgQ@mail.gmail.com>

I want to iteratively process a master list of comparisons using
group_walk() as an alternative method to import batches of .csv files.
I have the code for iteratively importing batch csvs here:

#Import list of csv files from directory, formatted as:

|rownm | neg | pos |
|------|-----|-----|
|neg   |19   |18   |
|pos   |5    |141  |

```
library(tidyverse) # for cleaning and shaping data
library(epiR)
library(irrCAC)

all_epi_files <- list.files("congtables", pattern = "*.csv",
                               full.names = TRUE)

#Make export directory
check_create_dir <- function(the_dir) {
  if (!dir.exists(the_dir)) {
    dir.create(the_dir, recursive = TRUE) } #Creates a directory if it
doesn't already exist
}

the_dir_ex <- "data_generated/epidata" #Name the new desired directory

check_create_dir(the_dir_ex) #Make the directory if it doesn't already exist

#Make function for the series of analyses
epi_analysis <- function(a_csv, the_dir){
  #Import data as inserted variables
  dat2 <- read_csv(a_csv)%>%
    remove_rownames %>%
    column_to_rownames(var="rownm") %>%
    as.matrix()

  #Run tests
  rval <- epi.tests(dat2, conf.level = 0.95)
  rkappa<-epi.kappa(dat2)
  gwet <- gwet.ac1.table(dat2)
  kappa2 <- kappa2.table(dat2)

  #Export results
  hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
  ests <- c(round(rval$elements$sensitivity$est, digits = 3),
            round(rval$elements$specificity$est, digits = 3),
            round(rval$element$pfp$est, digits = 3),
            round(rval$element$pfn$est, digits = 3),
            round(kappa2$coeff.val, digits = 3),
            round(gwet$coeff.val, digits = 3),
            round(rkappa$pabak$est, digits = 3))
  cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
           paste(round(rval$elements$specificity$lower, digits = 3),
round(rval$elements$specificity$upper, digits = 3), sep = ","),
           paste(round(rval$element$pfp$lower, digits = 3),
round(rval$element$pfp$upper, digits = 3), sep = ","),
           paste(round(rval$element$pfn$lower, digits = 3),
round(rval$element$pfn$upper, digits = 3), sep = ","),
           kappa2$coeff.ci,
           gwet$coeff.ci,
           paste(round(rkappa$pabak$lower, digits = 3),
round(rkappa$pabak$lower, digits = 3), sep = ","))

  df <- data.frame(hd, ests, cis)

  write.csv(df,
            file = paste0(the_dir, "/", basename(a_csv)),
            na = "999.99",
            row.names = FALSE)

}


#Execute functions
lapply(all_epi_files,
       FUN = epi_analysis,
       the_dir = the_dir_ex)
```

But instead I would like to input a dataset that looks like this:

|Test Assay | Var1 | Var2 |Freq|
|-----------|------|------|----|
|Assay1     |neg   |neg   |19  |
|Assay1     |neg   |pos   |5   |
|Assay1     |pos   |neg   |8   |
|Assay1     |pos   |pos   |141 |
|Assay2     |neg   |neg   |25  |
|Assay2     |neg   |pos   |6   |
|Assay2     |pos   |neg   |17  |
|Assay2     |pos   |pos   |33  |
|Assay3     |neg   |neg   |99  |
|Assay3     |neg   |pos   |20  |
|Assay3     |pos   |neg   |5   |
|Assay3     |pos   |pos   |105 |

I want to use the same function epi_analysis and export a csv for each
Test Assay (in this example Assay1, Assay2, and Assay3). So far I
have:

```
#Make export directory
check_create_dir <- function(the_dir) {
  if (!dir.exists(the_dir)) {
    dir.create(the_dir, recursive = TRUE) } #Creates a directory if it
doesn't already exist
}

the_dir_ex <- "data_generated/epidata" #Name the new desired directory

check_create_dir(the_dir_ex) #Make the directory if it doesn't already exist

#Make function for the series of analyses
epi_analysis <- function(.x, the_dir){
  #Clean data
  dat2 <- .x  %>%
    select(c(Var1, Var2, Freq)) %>%
    pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
    remove_rownames %>%
    column_to_rownames( var = "Var1") %>%
    as.matrix()

  #Run tests
  rval <- epi.tests(dat2, conf.level = 0.95)
  rkappa<-epi.kappa(dat2)
  gwet <- gwet.ac1.table(dat2)
  kappa2 <- kappa2.table(dat2)

  #Export results
  hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
  ests <- c(round(rval$elements$sensitivity$est, digits = 3),
            round(rval$elements$specificity$est, digits = 3),
            round(rval$element$pfp$est, digits = 3),
            round(rval$element$pfn$est, digits = 3),
            round(kappa2$coeff.val, digits = 3),
            round(gwet$coeff.val, digits = 3),
            round(rkappa$pabak$est, digits = 3))
  cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
           paste(round(rval$elements$specificity$lower, digits = 3),
round(rval$elements$specificity$upper, digits = 3), sep = ","),
           paste(round(rval$element$pfp$lower, digits = 3),
round(rval$element$pfp$upper, digits = 3), sep = ","),
           paste(round(rval$element$pfn$lower, digits = 3),
round(rval$element$pfn$upper, digits = 3), sep = ","),
           kappa2$coeff.ci,
           gwet$coeff.ci,
           paste(round(rkappa$pabak$lower, digits = 3),
round(rkappa$pabak$lower, digits = 3), sep = ","))

  df <- data.frame(hd, ests, cis)

  write.csv(df,
            file = paste0(the_dir, "/", basename(.x$TestAssay)),
            na = "999.99",
            row.names = FALSE)

}

data <- read_csv("data_raw/EpiTest.csv") %>%
  group_by(TestAssay)%>%
  group_map(~ epi_analysis)
```

But the only output I see is:
```
[[1]]
function(.x, the_dir){
  #Clean data
  dat2 <- .x  %>%
    select(c(Var1, Var2, Freq)) %>%
    pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
    remove_rownames %>%
    column_to_rownames( var = "Var1") %>%
    as.matrix()

  #Run tests
  rval <- epi.tests(dat2, conf.level = 0.95)
  rkappa<-epi.kappa(dat2)
  gwet <- gwet.ac1.table(dat2)
  kappa2 <- kappa2.table(dat2)

  #Export results
  hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
  ests <- c(round(rval$elements$sensitivity$est, digits = 3),
            round(rval$elements$specificity$est, digits = 3),
            round(rval$element$pfp$est, digits = 3),
            round(rval$element$pfn$est, digits = 3),
            round(kappa2$coeff.val, digits = 3),
            round(gwet$coeff.val, digits = 3),
            round(rkappa$pabak$est, digits = 3))
  cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
           paste(round(rval$elements$specificity$lower, digits = 3),
round(rval$elements$specificity$upper, digits = 3), sep = ","),
           paste(round(rval$element$pfp$lower, digits = 3),
round(rval$element$pfp$upper, digits = 3), sep = ","),
           paste(round(rval$element$pfn$lower, digits = 3),
round(rval$element$pfn$upper, digits = 3), sep = ","),
           kappa2$coeff.ci,
           gwet$coeff.ci,
           paste(round(rkappa$pabak$lower, digits = 3),
round(rkappa$pabak$lower, digits = 3), sep = ","))

  df <- data.frame(hd, ests, cis)

  write.csv(df,
            file = paste0(the_dir, "/", basename(.x$TestAssay)),
            na = "999.99",
            row.names = FALSE)

}

[[2]]
function(.x, the_dir){
  #Clean data
  dat2 <- .x  %>%
    select(c(Var1, Var2, Freq)) %>%
    pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
    remove_rownames %>%
    column_to_rownames( var = "Var1") %>%
    as.matrix()

  #Run tests
  rval <- epi.tests(dat2, conf.level = 0.95)
  rkappa<-epi.kappa(dat2)
  gwet <- gwet.ac1.table(dat2)
  kappa2 <- kappa2.table(dat2)

  #Export results
  hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
  ests <- c(round(rval$elements$sensitivity$est, digits = 3),
            round(rval$elements$specificity$est, digits = 3),
            round(rval$element$pfp$est, digits = 3),
            round(rval$element$pfn$est, digits = 3),
            round(kappa2$coeff.val, digits = 3),
            round(gwet$coeff.val, digits = 3),
            round(rkappa$pabak$est, digits = 3))
  cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
           paste(round(rval$elements$specificity$lower, digits = 3),
round(rval$elements$specificity$upper, digits = 3), sep = ","),
           paste(round(rval$element$pfp$lower, digits = 3),
round(rval$element$pfp$upper, digits = 3), sep = ","),
           paste(round(rval$element$pfn$lower, digits = 3),
round(rval$element$pfn$upper, digits = 3), sep = ","),
           kappa2$coeff.ci,
           gwet$coeff.ci,
           paste(round(rkappa$pabak$lower, digits = 3),
round(rkappa$pabak$lower, digits = 3), sep = ","))

  df <- data.frame(hd, ests, cis)

  write.csv(df,
            file = paste0(the_dir, "/", basename(.x$TestAssay)),
            na = "999.99",
            row.names = FALSE)

}

[[3]]
function(.x, the_dir){
  #Clean data
  dat2 <- .x  %>%
    select(c(Var1, Var2, Freq)) %>%
    pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
    remove_rownames %>%
    column_to_rownames( var = "Var1") %>%
    as.matrix()

  #Run tests
  rval <- epi.tests(dat2, conf.level = 0.95)
  rkappa<-epi.kappa(dat2)
  gwet <- gwet.ac1.table(dat2)
  kappa2 <- kappa2.table(dat2)

  #Export results
  hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
  ests <- c(round(rval$elements$sensitivity$est, digits = 3),
            round(rval$elements$specificity$est, digits = 3),
            round(rval$element$pfp$est, digits = 3),
            round(rval$element$pfn$est, digits = 3),
            round(kappa2$coeff.val, digits = 3),
            round(gwet$coeff.val, digits = 3),
            round(rkappa$pabak$est, digits = 3))
  cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
           paste(round(rval$elements$specificity$lower, digits = 3),
round(rval$elements$specificity$upper, digits = 3), sep = ","),
           paste(round(rval$element$pfp$lower, digits = 3),
round(rval$element$pfp$upper, digits = 3), sep = ","),
           paste(round(rval$element$pfn$lower, digits = 3),
round(rval$element$pfn$upper, digits = 3), sep = ","),
           kappa2$coeff.ci,
           gwet$coeff.ci,
           paste(round(rkappa$pabak$lower, digits = 3),
round(rkappa$pabak$lower, digits = 3), sep = ","))

  df <- data.frame(hd, ests, cis)

  write.csv(df,
            file = paste0(the_dir, "/", basename(.x$TestAssay)),
            na = "999.99",
            row.names = FALSE)

}

[[4]]
function(.x, the_dir){
  #Clean data
  dat2 <- .x  %>%
    select(c(Var1, Var2, Freq)) %>%
    pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
    remove_rownames %>%
    column_to_rownames( var = "Var1") %>%
    as.matrix()

  #Run tests
  rval <- epi.tests(dat2, conf.level = 0.95)
  rkappa<-epi.kappa(dat2)
  gwet <- gwet.ac1.table(dat2)
  kappa2 <- kappa2.table(dat2)

  #Export results
  hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
  ests <- c(round(rval$elements$sensitivity$est, digits = 3),
            round(rval$elements$specificity$est, digits = 3),
            round(rval$element$pfp$est, digits = 3),
            round(rval$element$pfn$est, digits = 3),
            round(kappa2$coeff.val, digits = 3),
            round(gwet$coeff.val, digits = 3),
            round(rkappa$pabak$est, digits = 3))
  cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
           paste(round(rval$elements$specificity$lower, digits = 3),
round(rval$elements$specificity$upper, digits = 3), sep = ","),
           paste(round(rval$element$pfp$lower, digits = 3),
round(rval$element$pfp$upper, digits = 3), sep = ","),
           paste(round(rval$element$pfn$lower, digits = 3),
round(rval$element$pfn$upper, digits = 3), sep = ","),
           kappa2$coeff.ci,
           gwet$coeff.ci,
           paste(round(rkappa$pabak$lower, digits = 3),
round(rkappa$pabak$lower, digits = 3), sep = ","))

  df <- data.frame(hd, ests, cis)

  write.csv(df,
            file = paste0(the_dir, "/", basename(.x$TestAssay)),
            na = "999.99",
            row.names = FALSE)

}
```

and there are no csvs in my epidata folder. Any
suggestions/corrections welcomed. I haven't used group_map() before,
but I am keen to use it.


From thom@@@tb@bu|k@ @end|ng |rom gm@||@com  Fri Jun  4 20:20:07 2021
From: thom@@@tb@bu|k@ @end|ng |rom gm@||@com (Thomas Bulka)
Date: Fri, 4 Jun 2021 20:20:07 +0200
Subject: [R] Conversion of String to Datetime: How to Keep Timezone Offset
 when Printing?
Message-ID: <CAEyarj=j7udxv2f9f9B_8zTSqEz-Hcrj00eDT1VTr1SA5vnXfg@mail.gmail.com>

Hello list,

I do have a hard time handling date and time data with different
timezone offsets. Say, I have two strings which represent different
dates/times, like so:

DT1 <- "2021-06-19T13:45:00-03:00"
DT2 <- "2020-07-20T11:39:12+02:00"
my_dates <- c(DT1, DT2)

What I want to do now, is to covert those strings into some kind of
datetime object which allows for comparisons (earlier/later etc.).

Using as_datetime from the lubridate package seems to do the trick,
but it converts DT1 and DT2 with reference to UTC. I guess, this makes
sense from a computational point of view, since, most likely, this is
how R internally handles dates and times.

However, I would like to be able to at least visually distinguish the
different timezone offsets, if the data is printed. I'm able to
manually set a timezone with the tz parameter of as_datetime:

as_datetime(DT1, tz = "EDT")
[1] "2020-07-20 09:39:12 EDT"

But this only works if I enter the timezone manually.

So what I want to ask is this: Is there any possibility, to convert
all entries of a vector my_dates (see above) into datetime objects
while keeping a visual indication of each timezone offset when the
data is printed?

Please excuse any awkward phrasing; being pretty new to R, I probably
did not phrase anything correctly.

Thank you very much in advance!

Thomas


From |e@ve@o|nyc @end|ng |rom gm@||@com  Wed Jun  2 20:17:50 2021
From: |e@ve@o|nyc @end|ng |rom gm@||@com (nelpar)
Date: Wed, 2 Jun 2021 13:17:50 -0500 (CDT)
Subject: [R] Beginner problem - using mod function to print odd numbers
Message-ID: <1622657870092-0.post-5018@n4.nabble.com>


I don't understand. -- 

7%%2=1
9%%2=1
11%%2=1

What aren't these numbers printing ? 


num<-0
for (i in 1:100){
  num<-num+i
if (num%%2 != 0) 
  print(num)
}


[1] 1
[1] 3
[1] 15
[1] 21
[1] 45
[1] 55
[1] 91
[1] 105
[1] 153
[1] 171
[1] 231
[1] 253
[1] 325
[1] 351
[1] 435
[1] 465
[1] 561
[1] 595
[1] 703
[1] 741
[1] 861
[1] 903
[1] 1035
[1] 1081
[1] 1225
[1] 1275
[1] 1431
[1] 1485
[1] 1653
[1] 1711
[1] 1891
[1] 1953
[1] 2145
[1] 2211
[1] 2415
[1] 2485
[1] 2701
[1] 2775
[1] 3003
[1] 3081
[1] 3321
[1] 3403
[1] 3655
[1] 3741
[1] 4005
[1] 4095
[1] 4371
[1] 4465
[1] 4753
[1] 4851



--
Sent from: https://r.789695.n4.nabble.com/R-help-f789696.html


From h@@@n@d|w@n @end|ng |rom gm@||@com  Sat Jun  5 08:19:30 2021
From: h@@@n@d|w@n @end|ng |rom gm@||@com (Hasan Diwan)
Date: Fri, 4 Jun 2021 23:19:30 -0700
Subject: [R] Beginner problem - using mod function to print odd numbers
In-Reply-To: <1622657870092-0.post-5018@n4.nabble.com>
References: <1622657870092-0.post-5018@n4.nabble.com>
Message-ID: <CAP+bYWAxDRu3OKkhauvCHPH8dMX5PpWfc9RR5F+40fyeTFap-A@mail.gmail.com>

unlist(sapply(seq(1,100), function(n) { if(n %% 2) n })) yields:

 [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43 45
47 49
[26] 51 53 55 57 59 61 63 65 67 69 71 73 75 77 79 81 83 85 87 89 91 93 95
97 99

As for why your solution isn't working, if you'd like me to take a closer
look and figure out exactly what you're doing wrong, let me know? -- H

On Fri, 4 Jun 2021 at 23:09, nelpar <leavesofnyc at gmail.com> wrote:

>
> I don't understand. --
>
> 7%%2=1
> 9%%2=1
> 11%%2=1
>
> What aren't these numbers printing ?
>
>
> num<-0
> for (i in 1:100){
>   num<-num+i
> if (num%%2 != 0)
>   print(num)
> }
>
>
> [1] 1
> [1] 3
> [1] 15
> [1] 21
> [1] 45
> [1] 55
> [1] 91
> [1] 105
> [1] 153
> [1] 171
> [1] 231
> [1] 253
> [1] 325
> [1] 351
> [1] 435
> [1] 465
> [1] 561
> [1] 595
> [1] 703
> [1] 741
> [1] 861
> [1] 903
> [1] 1035
> [1] 1081
> [1] 1225
> [1] 1275
> [1] 1431
> [1] 1485
> [1] 1653
> [1] 1711
> [1] 1891
> [1] 1953
> [1] 2145
> [1] 2211
> [1] 2415
> [1] 2485
> [1] 2701
> [1] 2775
> [1] 3003
> [1] 3081
> [1] 3321
> [1] 3403
> [1] 3655
> [1] 3741
> [1] 4005
> [1] 4095
> [1] 4371
> [1] 4465
> [1] 4753
> [1] 4851
>
>
>
> --
> Sent from: https://r.789695.n4.nabble.com/R-help-f789696.html
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
OpenPGP: https://hasan.d8u.us/openpgp.asc
If you wish to request my time, please do so using
*bit.ly/hd1AppointmentRequest
<http://bit.ly/hd1AppointmentRequest>*.
Si vous voudrais faire connnaisance, allez a *bit.ly/hd1AppointmentRequest
<http://bit.ly/hd1AppointmentRequest>*.

<https://sks-keyservers.net/pks/lookup?op=get&search=0xFEBAD7FFD041BBA1>Sent
from my mobile device
Envoye de mon portable

	[[alternative HTML version deleted]]


From m|n@h@|| @end|ng |rom um|ch@edu  Sat Jun  5 08:37:14 2021
From: m|n@h@|| @end|ng |rom um|ch@edu (Greg Minshall)
Date: Sat, 05 Jun 2021 09:37:14 +0300
Subject: [R] Can I use group_map to iteratively process a dataframe?
In-Reply-To: Your message of "Fri, 04 Jun 2021 10:03:40 -0400."
 <CABjGm04X-Rjp9dO-5cmfOKDuqzPgH9TXWnhV3DHKe+YBauSVgQ@mail.gmail.com>
Message-ID: <292254.1622875034@apollo2.minshall.org>

Madison,

by the way, it's sort of hard to follow your example.  there's some
concept of MWE ==? Minimum Working Example.  duckduckgo, or others on
the list, can probably point the way.

and, by the way :), i'm no expert.  in particular, not on magrittr
pipes, or on group_*, though i use both in some of my code.

> data <- read_csv("data_raw/EpiTest.csv") %>%
>   group_by(TestAssay)%>%
>   group_map(~ epi_analysis)

sans-pipe, i would have had

: group_map(df, epi_analysis, the_dir)

or some such.  in magrittr pipes, maybe that would be

: ... %>% group_map, epi_analysis, the_dir)

or some such?

hth.

cheers, Greg


From er|cjberger @end|ng |rom gm@||@com  Sat Jun  5 08:40:33 2021
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Sat, 5 Jun 2021 09:40:33 +0300
Subject: [R] Beginner problem - using mod function to print odd numbers
In-Reply-To: <CAP+bYWAxDRu3OKkhauvCHPH8dMX5PpWfc9RR5F+40fyeTFap-A@mail.gmail.com>
References: <1622657870092-0.post-5018@n4.nabble.com>
 <CAP+bYWAxDRu3OKkhauvCHPH8dMX5PpWfc9RR5F+40fyeTFap-A@mail.gmail.com>
Message-ID: <CAGgJW75Hv6YDk1j+QiSR0jdwfPitfks44pRQHWevqvPM7x+7Zg@mail.gmail.com>

Typo
num <- num + i
should be
num <- num + 1


On Sat, Jun 5, 2021 at 9:38 AM Hasan Diwan <hasan.diwan at gmail.com> wrote:

> unlist(sapply(seq(1,100), function(n) { if(n %% 2) n })) yields:
>
>  [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43 45
> 47 49
> [26] 51 53 55 57 59 61 63 65 67 69 71 73 75 77 79 81 83 85 87 89 91 93 95
> 97 99
>
> As for why your solution isn't working, if you'd like me to take a closer
> look and figure out exactly what you're doing wrong, let me know? -- H
>
> On Fri, 4 Jun 2021 at 23:09, nelpar <leavesofnyc at gmail.com> wrote:
>
> >
> > I don't understand. --
> >
> > 7%%2=1
> > 9%%2=1
> > 11%%2=1
> >
> > What aren't these numbers printing ?
> >
> >
> > num<-0
> > for (i in 1:100){
> >   num<-num+i
> > if (num%%2 != 0)
> >   print(num)
> > }
> >
> >
> > [1] 1
> > [1] 3
> > [1] 15
> > [1] 21
> > [1] 45
> > [1] 55
> > [1] 91
> > [1] 105
> > [1] 153
> > [1] 171
> > [1] 231
> > [1] 253
> > [1] 325
> > [1] 351
> > [1] 435
> > [1] 465
> > [1] 561
> > [1] 595
> > [1] 703
> > [1] 741
> > [1] 861
> > [1] 903
> > [1] 1035
> > [1] 1081
> > [1] 1225
> > [1] 1275
> > [1] 1431
> > [1] 1485
> > [1] 1653
> > [1] 1711
> > [1] 1891
> > [1] 1953
> > [1] 2145
> > [1] 2211
> > [1] 2415
> > [1] 2485
> > [1] 2701
> > [1] 2775
> > [1] 3003
> > [1] 3081
> > [1] 3321
> > [1] 3403
> > [1] 3655
> > [1] 3741
> > [1] 4005
> > [1] 4095
> > [1] 4371
> > [1] 4465
> > [1] 4753
> > [1] 4851
> >
> >
> >
> > --
> > Sent from: https://r.789695.n4.nabble.com/R-help-f789696.html
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>
> --
> OpenPGP: https://hasan.d8u.us/openpgp.asc
> If you wish to request my time, please do so using
> *bit.ly/hd1AppointmentRequest
> <http://bit.ly/hd1AppointmentRequest>*.
> Si vous voudrais faire connnaisance, allez a *bit.ly/hd1AppointmentRequest
> <http://bit.ly/hd1AppointmentRequest>*.
>
> <https://sks-keyservers.net/pks/lookup?op=get&search=0xFEBAD7FFD041BBA1
> >Sent
> from my mobile device
> Envoye de mon portable
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Jun  5 09:44:47 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 05 Jun 2021 00:44:47 -0700
Subject: [R] Beginner problem - using mod function to print odd numbers
In-Reply-To: <1622657870092-0.post-5018@n4.nabble.com>
References: <1622657870092-0.post-5018@n4.nabble.com>
Message-ID: <85041208-9B33-45D7-AF83-BD4CACBFC62D@dcn.davis.ca.us>

What if you used

num <- num + 1

?

On June 2, 2021 11:17:50 AM PDT, nelpar <leavesofnyc at gmail.com> wrote:
>
>I don't understand. -- 
>
>7%%2=1
>9%%2=1
>11%%2=1
>
>What aren't these numbers printing ? 
>
>
>num<-0
>for (i in 1:100){
>  num<-num+i
>if (num%%2 != 0) 
>  print(num)
>}
>
>
>[1] 1
>[1] 3
>[1] 15
>[1] 21
>[1] 45
>[1] 55
>[1] 91
>[1] 105
>[1] 153
>[1] 171
>[1] 231
>[1] 253
>[1] 325
>[1] 351
>[1] 435
>[1] 465
>[1] 561
>[1] 595
>[1] 703
>[1] 741
>[1] 861
>[1] 903
>[1] 1035
>[1] 1081
>[1] 1225
>[1] 1275
>[1] 1431
>[1] 1485
>[1] 1653
>[1] 1711
>[1] 1891
>[1] 1953
>[1] 2145
>[1] 2211
>[1] 2415
>[1] 2485
>[1] 2701
>[1] 2775
>[1] 3003
>[1] 3081
>[1] 3321
>[1] 3403
>[1] 3655
>[1] 3741
>[1] 4005
>[1] 4095
>[1] 4371
>[1] 4465
>[1] 4753
>[1] 4851
>
>
>
>--
>Sent from: https://r.789695.n4.nabble.com/R-help-f789696.html
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From @te|@nML @end|ng |rom co||oc@t|on@@de  Sat Jun  5 09:51:20 2021
From: @te|@nML @end|ng |rom co||oc@t|on@@de (Stefan Evert)
Date: Sat, 5 Jun 2021 09:51:20 +0200
Subject: [R] Beginner problem - using mod function to print odd numbers
In-Reply-To: <1622657870092-0.post-5018@n4.nabble.com>
References: <1622657870092-0.post-5018@n4.nabble.com>
Message-ID: <A1013F52-3C4D-4BAE-B058-6E7E9FAF9D6C@collocations.de>

> 
> I don't understand. -- 
> 
> 7%%2=1
> 9%%2=1
> 11%%2=1
> 
> What aren't these numbers printing ? 
> 
> num<-0
> for (i in 1:100){
>  num<-num+i
> if (num%%2 != 0) 
>  print(num)
> }

Your code tests the numbers

	1, 3, 6, 10, 15, 21, 28, 36, 45, 55, 66, ?

and correctly prints the odd ones among them.

But I suppose that's not what you wanted to do?


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Jun  5 10:18:13 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 05 Jun 2021 01:18:13 -0700
Subject: [R] 
 Conversion of String to Datetime: How to Keep Timezone Offset
 when Printing?
In-Reply-To: <CAEyarj=j7udxv2f9f9B_8zTSqEz-Hcrj00eDT1VTr1SA5vnXfg@mail.gmail.com>
References: <CAEyarj=j7udxv2f9f9B_8zTSqEz-Hcrj00eDT1VTr1SA5vnXfg@mail.gmail.com>
Message-ID: <A8D86DE8-B9C8-466A-82D7-17BC1639C6C9@dcn.davis.ca.us>

No. Sorry. A POSIXct vector can have only one timezone. Kind of goes along with the whole vectorization thing.

You could fake it with lists, but they are dramatically less convenient. I suppose you could also fake it by developing your own variation on the POSIXct class... but that would be rather slower than the standard version.

On June 4, 2021 11:20:07 AM PDT, Thomas Bulka <thomas.tb.bulka at gmail.com> wrote:
>Hello list,
>
>I do have a hard time handling date and time data with different
>timezone offsets. Say, I have two strings which represent different
>dates/times, like so:
>
>DT1 <- "2021-06-19T13:45:00-03:00"
>DT2 <- "2020-07-20T11:39:12+02:00"
>my_dates <- c(DT1, DT2)
>
>What I want to do now, is to covert those strings into some kind of
>datetime object which allows for comparisons (earlier/later etc.).
>
>Using as_datetime from the lubridate package seems to do the trick,
>but it converts DT1 and DT2 with reference to UTC. I guess, this makes
>sense from a computational point of view, since, most likely, this is
>how R internally handles dates and times.
>
>However, I would like to be able to at least visually distinguish the
>different timezone offsets, if the data is printed. I'm able to
>manually set a timezone with the tz parameter of as_datetime:
>
>as_datetime(DT1, tz = "EDT")
>[1] "2020-07-20 09:39:12 EDT"
>
>But this only works if I enter the timezone manually.
>
>So what I want to ask is this: Is there any possibility, to convert
>all entries of a vector my_dates (see above) into datetime objects
>while keeping a visual indication of each timezone offset when the
>data is printed?
>
>Please excuse any awkward phrasing; being pretty new to R, I probably
>did not phrase anything correctly.
>
>Thank you very much in advance!
>
>Thomas
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From t@v|b@r @end|ng |rom gm@||@com  Sat Jun  5 11:47:21 2021
From: t@v|b@r @end|ng |rom gm@||@com (Micha Silver)
Date: Sat, 5 Jun 2021 12:47:21 +0300
Subject: [R] 
 Conversion of String to Datetime: How to Keep Timezone Offset
 when Printing?
In-Reply-To: <CAEyarj=j7udxv2f9f9B_8zTSqEz-Hcrj00eDT1VTr1SA5vnXfg@mail.gmail.com>
References: <CAEyarj=j7udxv2f9f9B_8zTSqEz-Hcrj00eDT1VTr1SA5vnXfg@mail.gmail.com>
Message-ID: <6caadcac-4c7f-101c-6cca-2c62aacd08a7@gmail.com>


On 6/4/21 9:20 PM, Thomas Bulka wrote:
> Hello list,
>
> I do have a hard time handling date and time data with different
> timezone offsets. Say, I have two strings which represent different
> dates/times, like so:
>
> DT1 <- "2021-06-19T13:45:00-03:00"
> DT2 <- "2020-07-20T11:39:12+02:00"
> my_dates <- c(DT1, DT2)
>
> What I want to do now, is to covert those strings into some kind of
> datetime object which allows for comparisons (earlier/later etc.).
>
> Using as_datetime from the lubridate package seems to do the trick,
> but it converts DT1 and DT2 with reference to UTC. I guess, this makes
> sense from a computational point of view, since, most likely, this is
> how R internally handles dates and times.
>
> However, I would like to be able to at least visually distinguish the
> different timezone offsets, if the data is printed. I'm able to
> manually set a timezone with the tz parameter of as_datetime:


It's not clear what you're asking. The time strings already have the 
timezone offset specified. If you get rid of the "T" character in the 
strings, then you can use regular datetime formatting specifiers to 
convert to R datetime objects, i.e.


my_dates = c("2021-06-19T13:45:00-03:00", "2020-07-20T11:39:12+02:00", 
strftime(Sys.time(),"%Y-%m-%dT%H:%M:%S%z"))
my_dates
[1] "2021-06-19T13:45:00-03:00" "2020-07-20T11:39:12+02:00"
[3] "2021-06-05T12:33:11+0300"
my_dates2 = gsub(pattern="T", replacement=" ", x=my_dates)
my_dates2
[1] "2021-06-19 13:45:00-03:00" "2020-07-20 11:39:12+02:00"
[3] "2021-06-05 12:33:11+0300"


# Now convert to datetime objects, including TZ offset:

my_datetimes = as.POSIXct(my_dates2, "%Y-%m-%d %H:%M:%S%z")


# And these datetimes you can visualize any way you want:

strftime(my_datetimes, format="%d/%b/%Y %H:%M %Z", tz="EST")
[1] "19/Jun/2021 08:45 EST" "20/Jul/2020 06:39 EST" "05/Jun/2021 07:33 EST"


Not sure if that helps at all...


>
> as_datetime(DT1, tz = "EDT")
> [1] "2020-07-20 09:39:12 EDT"
>
> But this only works if I enter the timezone manually.
>
> So what I want to ask is this: Is there any possibility, to convert
> all entries of a vector my_dates (see above) into datetime objects
> while keeping a visual indication of each timezone offset when the
> data is printed?
>
> Please excuse any awkward phrasing; being pretty new to R, I probably
> did not phrase anything correctly.
>
> Thank you very much in advance!
>
> Thomas
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Micha Silver
Ben Gurion Univ.
Sde Boker, Remote Sensing Lab
cell: +972-523-665918


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sat Jun  5 14:54:10 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sat, 5 Jun 2021 13:54:10 +0100
Subject: [R] Beginner problem - using mod function to print odd numbers
In-Reply-To: <1622657870092-0.post-5018@n4.nabble.com>
References: <1622657870092-0.post-5018@n4.nabble.com>
Message-ID: <ac80b824-e6b2-a5db-57f3-45bd989fc3fa@sapo.pt>

Hello,

Why not write a function?


odd <- function(x, numeric = TRUE){
   i <- x %% 2 == 1
   if(numeric) x[i] else i
}

odd(1:100)


Hope this helps,

Rui Barradas

?s 19:17 de 02/06/21, nelpar escreveu:
> 
> I don't understand. --
> 
> 7%%2=1
> 9%%2=1
> 11%%2=1
> 
> What aren't these numbers printing ?
> 
> 
> num<-0
> for (i in 1:100){
>    num<-num+i
> if (num%%2 != 0)
>    print(num)
> }
> 
> 
> [1] 1
> [1] 3
> [1] 15
> [1] 21
> [1] 45
> [1] 55
> [1] 91
> [1] 105
> [1] 153
> [1] 171
> [1] 231
> [1] 253
> [1] 325
> [1] 351
> [1] 435
> [1] 465
> [1] 561
> [1] 595
> [1] 703
> [1] 741
> [1] 861
> [1] 903
> [1] 1035
> [1] 1081
> [1] 1225
> [1] 1275
> [1] 1431
> [1] 1485
> [1] 1653
> [1] 1711
> [1] 1891
> [1] 1953
> [1] 2145
> [1] 2211
> [1] 2415
> [1] 2485
> [1] 2701
> [1] 2775
> [1] 3003
> [1] 3081
> [1] 3321
> [1] 3403
> [1] 3655
> [1] 3741
> [1] 4005
> [1] 4095
> [1] 4371
> [1] 4465
> [1] 4753
> [1] 4851
> 
> 
> 
> --
> Sent from: https://r.789695.n4.nabble.com/R-help-f789696.html
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sat Jun  5 15:07:40 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sat, 5 Jun 2021 14:07:40 +0100
Subject: [R] Can I use group_map to iteratively process a dataframe?
In-Reply-To: <CABjGm04X-Rjp9dO-5cmfOKDuqzPgH9TXWnhV3DHKe+YBauSVgQ@mail.gmail.com>
References: <CABjGm04X-Rjp9dO-5cmfOKDuqzPgH9TXWnhV3DHKe+YBauSVgQ@mail.gmail.com>
Message-ID: <3895af86-d8cf-a3aa-7e4a-1785e1cb65c4@sapo.pt>

Hello,

This is cross-posted from StackOverflow [1]. Cross posting is not well 
seen on R-help and the SO post is better explained (at least the data 
seem to be more complete). You should have waited for an answer there.


Hope this helps,

Rui Barradas

?s 15:03 de 04/06/21, Madison Bell escreveu:
> I want to iteratively process a master list of comparisons using
> group_walk() as an alternative method to import batches of .csv files.
> I have the code for iteratively importing batch csvs here:
> 
> #Import list of csv files from directory, formatted as:
> 
> |rownm | neg | pos |
> |------|-----|-----|
> |neg   |19   |18   |
> |pos   |5    |141  |
> 
> ```
> library(tidyverse) # for cleaning and shaping data
> library(epiR)
> library(irrCAC)
> 
> all_epi_files <- list.files("congtables", pattern = "*.csv",
>                                 full.names = TRUE)
> 
> #Make export directory
> check_create_dir <- function(the_dir) {
>    if (!dir.exists(the_dir)) {
>      dir.create(the_dir, recursive = TRUE) } #Creates a directory if it
> doesn't already exist
> }
> 
> the_dir_ex <- "data_generated/epidata" #Name the new desired directory
> 
> check_create_dir(the_dir_ex) #Make the directory if it doesn't already exist
> 
> #Make function for the series of analyses
> epi_analysis <- function(a_csv, the_dir){
>    #Import data as inserted variables
>    dat2 <- read_csv(a_csv)%>%
>      remove_rownames %>%
>      column_to_rownames(var="rownm") %>%
>      as.matrix()
> 
>    #Run tests
>    rval <- epi.tests(dat2, conf.level = 0.95)
>    rkappa<-epi.kappa(dat2)
>    gwet <- gwet.ac1.table(dat2)
>    kappa2 <- kappa2.table(dat2)
> 
>    #Export results
>    hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>    ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>              round(rval$elements$specificity$est, digits = 3),
>              round(rval$element$pfp$est, digits = 3),
>              round(rval$element$pfn$est, digits = 3),
>              round(kappa2$coeff.val, digits = 3),
>              round(gwet$coeff.val, digits = 3),
>              round(rkappa$pabak$est, digits = 3))
>    cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>             paste(round(rval$elements$specificity$lower, digits = 3),
> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>             paste(round(rval$element$pfp$lower, digits = 3),
> round(rval$element$pfp$upper, digits = 3), sep = ","),
>             paste(round(rval$element$pfn$lower, digits = 3),
> round(rval$element$pfn$upper, digits = 3), sep = ","),
>             kappa2$coeff.ci,
>             gwet$coeff.ci,
>             paste(round(rkappa$pabak$lower, digits = 3),
> round(rkappa$pabak$lower, digits = 3), sep = ","))
> 
>    df <- data.frame(hd, ests, cis)
> 
>    write.csv(df,
>              file = paste0(the_dir, "/", basename(a_csv)),
>              na = "999.99",
>              row.names = FALSE)
> 
> }
> 
> 
> #Execute functions
> lapply(all_epi_files,
>         FUN = epi_analysis,
>         the_dir = the_dir_ex)
> ```
> 
> But instead I would like to input a dataset that looks like this:
> 
> |Test Assay | Var1 | Var2 |Freq|
> |-----------|------|------|----|
> |Assay1     |neg   |neg   |19  |
> |Assay1     |neg   |pos   |5   |
> |Assay1     |pos   |neg   |8   |
> |Assay1     |pos   |pos   |141 |
> |Assay2     |neg   |neg   |25  |
> |Assay2     |neg   |pos   |6   |
> |Assay2     |pos   |neg   |17  |
> |Assay2     |pos   |pos   |33  |
> |Assay3     |neg   |neg   |99  |
> |Assay3     |neg   |pos   |20  |
> |Assay3     |pos   |neg   |5   |
> |Assay3     |pos   |pos   |105 |
> 
> I want to use the same function epi_analysis and export a csv for each
> Test Assay (in this example Assay1, Assay2, and Assay3). So far I
> have:
> 
> ```
> #Make export directory
> check_create_dir <- function(the_dir) {
>    if (!dir.exists(the_dir)) {
>      dir.create(the_dir, recursive = TRUE) } #Creates a directory if it
> doesn't already exist
> }
> 
> the_dir_ex <- "data_generated/epidata" #Name the new desired directory
> 
> check_create_dir(the_dir_ex) #Make the directory if it doesn't already exist
> 
> #Make function for the series of analyses
> epi_analysis <- function(.x, the_dir){
>    #Clean data
>    dat2 <- .x  %>%
>      select(c(Var1, Var2, Freq)) %>%
>      pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
>      remove_rownames %>%
>      column_to_rownames( var = "Var1") %>%
>      as.matrix()
> 
>    #Run tests
>    rval <- epi.tests(dat2, conf.level = 0.95)
>    rkappa<-epi.kappa(dat2)
>    gwet <- gwet.ac1.table(dat2)
>    kappa2 <- kappa2.table(dat2)
> 
>    #Export results
>    hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>    ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>              round(rval$elements$specificity$est, digits = 3),
>              round(rval$element$pfp$est, digits = 3),
>              round(rval$element$pfn$est, digits = 3),
>              round(kappa2$coeff.val, digits = 3),
>              round(gwet$coeff.val, digits = 3),
>              round(rkappa$pabak$est, digits = 3))
>    cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>             paste(round(rval$elements$specificity$lower, digits = 3),
> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>             paste(round(rval$element$pfp$lower, digits = 3),
> round(rval$element$pfp$upper, digits = 3), sep = ","),
>             paste(round(rval$element$pfn$lower, digits = 3),
> round(rval$element$pfn$upper, digits = 3), sep = ","),
>             kappa2$coeff.ci,
>             gwet$coeff.ci,
>             paste(round(rkappa$pabak$lower, digits = 3),
> round(rkappa$pabak$lower, digits = 3), sep = ","))
> 
>    df <- data.frame(hd, ests, cis)
> 
>    write.csv(df,
>              file = paste0(the_dir, "/", basename(.x$TestAssay)),
>              na = "999.99",
>              row.names = FALSE)
> 
> }
> 
> data <- read_csv("data_raw/EpiTest.csv") %>%
>    group_by(TestAssay)%>%
>    group_map(~ epi_analysis)
> ```
> 
> But the only output I see is:
> ```
> [[1]]
> function(.x, the_dir){
>    #Clean data
>    dat2 <- .x  %>%
>      select(c(Var1, Var2, Freq)) %>%
>      pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
>      remove_rownames %>%
>      column_to_rownames( var = "Var1") %>%
>      as.matrix()
> 
>    #Run tests
>    rval <- epi.tests(dat2, conf.level = 0.95)
>    rkappa<-epi.kappa(dat2)
>    gwet <- gwet.ac1.table(dat2)
>    kappa2 <- kappa2.table(dat2)
> 
>    #Export results
>    hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>    ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>              round(rval$elements$specificity$est, digits = 3),
>              round(rval$element$pfp$est, digits = 3),
>              round(rval$element$pfn$est, digits = 3),
>              round(kappa2$coeff.val, digits = 3),
>              round(gwet$coeff.val, digits = 3),
>              round(rkappa$pabak$est, digits = 3))
>    cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>             paste(round(rval$elements$specificity$lower, digits = 3),
> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>             paste(round(rval$element$pfp$lower, digits = 3),
> round(rval$element$pfp$upper, digits = 3), sep = ","),
>             paste(round(rval$element$pfn$lower, digits = 3),
> round(rval$element$pfn$upper, digits = 3), sep = ","),
>             kappa2$coeff.ci,
>             gwet$coeff.ci,
>             paste(round(rkappa$pabak$lower, digits = 3),
> round(rkappa$pabak$lower, digits = 3), sep = ","))
> 
>    df <- data.frame(hd, ests, cis)
> 
>    write.csv(df,
>              file = paste0(the_dir, "/", basename(.x$TestAssay)),
>              na = "999.99",
>              row.names = FALSE)
> 
> }
> 
> [[2]]
> function(.x, the_dir){
>    #Clean data
>    dat2 <- .x  %>%
>      select(c(Var1, Var2, Freq)) %>%
>      pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
>      remove_rownames %>%
>      column_to_rownames( var = "Var1") %>%
>      as.matrix()
> 
>    #Run tests
>    rval <- epi.tests(dat2, conf.level = 0.95)
>    rkappa<-epi.kappa(dat2)
>    gwet <- gwet.ac1.table(dat2)
>    kappa2 <- kappa2.table(dat2)
> 
>    #Export results
>    hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>    ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>              round(rval$elements$specificity$est, digits = 3),
>              round(rval$element$pfp$est, digits = 3),
>              round(rval$element$pfn$est, digits = 3),
>              round(kappa2$coeff.val, digits = 3),
>              round(gwet$coeff.val, digits = 3),
>              round(rkappa$pabak$est, digits = 3))
>    cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>             paste(round(rval$elements$specificity$lower, digits = 3),
> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>             paste(round(rval$element$pfp$lower, digits = 3),
> round(rval$element$pfp$upper, digits = 3), sep = ","),
>             paste(round(rval$element$pfn$lower, digits = 3),
> round(rval$element$pfn$upper, digits = 3), sep = ","),
>             kappa2$coeff.ci,
>             gwet$coeff.ci,
>             paste(round(rkappa$pabak$lower, digits = 3),
> round(rkappa$pabak$lower, digits = 3), sep = ","))
> 
>    df <- data.frame(hd, ests, cis)
> 
>    write.csv(df,
>              file = paste0(the_dir, "/", basename(.x$TestAssay)),
>              na = "999.99",
>              row.names = FALSE)
> 
> }
> 
> [[3]]
> function(.x, the_dir){
>    #Clean data
>    dat2 <- .x  %>%
>      select(c(Var1, Var2, Freq)) %>%
>      pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
>      remove_rownames %>%
>      column_to_rownames( var = "Var1") %>%
>      as.matrix()
> 
>    #Run tests
>    rval <- epi.tests(dat2, conf.level = 0.95)
>    rkappa<-epi.kappa(dat2)
>    gwet <- gwet.ac1.table(dat2)
>    kappa2 <- kappa2.table(dat2)
> 
>    #Export results
>    hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>    ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>              round(rval$elements$specificity$est, digits = 3),
>              round(rval$element$pfp$est, digits = 3),
>              round(rval$element$pfn$est, digits = 3),
>              round(kappa2$coeff.val, digits = 3),
>              round(gwet$coeff.val, digits = 3),
>              round(rkappa$pabak$est, digits = 3))
>    cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>             paste(round(rval$elements$specificity$lower, digits = 3),
> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>             paste(round(rval$element$pfp$lower, digits = 3),
> round(rval$element$pfp$upper, digits = 3), sep = ","),
>             paste(round(rval$element$pfn$lower, digits = 3),
> round(rval$element$pfn$upper, digits = 3), sep = ","),
>             kappa2$coeff.ci,
>             gwet$coeff.ci,
>             paste(round(rkappa$pabak$lower, digits = 3),
> round(rkappa$pabak$lower, digits = 3), sep = ","))
> 
>    df <- data.frame(hd, ests, cis)
> 
>    write.csv(df,
>              file = paste0(the_dir, "/", basename(.x$TestAssay)),
>              na = "999.99",
>              row.names = FALSE)
> 
> }
> 
> [[4]]
> function(.x, the_dir){
>    #Clean data
>    dat2 <- .x  %>%
>      select(c(Var1, Var2, Freq)) %>%
>      pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
>      remove_rownames %>%
>      column_to_rownames( var = "Var1") %>%
>      as.matrix()
> 
>    #Run tests
>    rval <- epi.tests(dat2, conf.level = 0.95)
>    rkappa<-epi.kappa(dat2)
>    gwet <- gwet.ac1.table(dat2)
>    kappa2 <- kappa2.table(dat2)
> 
>    #Export results
>    hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>    ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>              round(rval$elements$specificity$est, digits = 3),
>              round(rval$element$pfp$est, digits = 3),
>              round(rval$element$pfn$est, digits = 3),
>              round(kappa2$coeff.val, digits = 3),
>              round(gwet$coeff.val, digits = 3),
>              round(rkappa$pabak$est, digits = 3))
>    cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>             paste(round(rval$elements$specificity$lower, digits = 3),
> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>             paste(round(rval$element$pfp$lower, digits = 3),
> round(rval$element$pfp$upper, digits = 3), sep = ","),
>             paste(round(rval$element$pfn$lower, digits = 3),
> round(rval$element$pfn$upper, digits = 3), sep = ","),
>             kappa2$coeff.ci,
>             gwet$coeff.ci,
>             paste(round(rkappa$pabak$lower, digits = 3),
> round(rkappa$pabak$lower, digits = 3), sep = ","))
> 
>    df <- data.frame(hd, ests, cis)
> 
>    write.csv(df,
>              file = paste0(the_dir, "/", basename(.x$TestAssay)),
>              na = "999.99",
>              row.names = FALSE)
> 
> }
> ```
> 
> and there are no csvs in my epidata folder. Any
> suggestions/corrections welcomed. I haven't used group_map() before,
> but I am keen to use it.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From m@d|@on3be|| @end|ng |rom gm@||@com  Sat Jun  5 15:26:55 2021
From: m@d|@on3be|| @end|ng |rom gm@||@com (Madison Bell)
Date: Sat, 5 Jun 2021 09:26:55 -0400
Subject: [R] Can I use group_map to iteratively process a dataframe?
In-Reply-To: <3895af86-d8cf-a3aa-7e4a-1785e1cb65c4@sapo.pt>
References: <3895af86-d8cf-a3aa-7e4a-1785e1cb65c4@sapo.pt>
Message-ID: <E32DBF4A-CBB5-4A45-A86E-DC2D733F0349@gmail.com>

This question had been posted on SO for a week with no response. I reached out to rhelp two days ago. I deleted the original question on SO and reposted an abbreviated version this morning. 

Sorry for the cross posting, but I am urgently trying to get some ideas on how approach this problem. 

Sent from my iPhone

> On Jun 5, 2021, at 09:07, Rui Barradas <ruipbarradas at sapo.pt> wrote:
> 
> ?Hello,
> 
> This is cross-posted from StackOverflow [1]. Cross posting is not well seen on R-help and the SO post is better explained (at least the data seem to be more complete). You should have waited for an answer there.
> 
> 
> Hope this helps,
> 
> Rui Barradas
> 
> ?s 15:03 de 04/06/21, Madison Bell escreveu:
>> I want to iteratively process a master list of comparisons using
>> group_walk() as an alternative method to import batches of .csv files.
>> I have the code for iteratively importing batch csvs here:
>> #Import list of csv files from directory, formatted as:
>> |rownm | neg | pos |
>> |------|-----|-----|
>> |neg   |19   |18   |
>> |pos   |5    |141  |
>> ```
>> library(tidyverse) # for cleaning and shaping data
>> library(epiR)
>> library(irrCAC)
>> all_epi_files <- list.files("congtables", pattern = "*.csv",
>>                                full.names = TRUE)
>> #Make export directory
>> check_create_dir <- function(the_dir) {
>>   if (!dir.exists(the_dir)) {
>>     dir.create(the_dir, recursive = TRUE) } #Creates a directory if it
>> doesn't already exist
>> }
>> the_dir_ex <- "data_generated/epidata" #Name the new desired directory
>> check_create_dir(the_dir_ex) #Make the directory if it doesn't already exist
>> #Make function for the series of analyses
>> epi_analysis <- function(a_csv, the_dir){
>>   #Import data as inserted variables
>>   dat2 <- read_csv(a_csv)%>%
>>     remove_rownames %>%
>>     column_to_rownames(var="rownm") %>%
>>     as.matrix()
>>   #Run tests
>>   rval <- epi.tests(dat2, conf.level = 0.95)
>>   rkappa<-epi.kappa(dat2)
>>   gwet <- gwet.ac1.table(dat2)
>>   kappa2 <- kappa2.table(dat2)
>>   #Export results
>>   hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>>   ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>>             round(rval$elements$specificity$est, digits = 3),
>>             round(rval$element$pfp$est, digits = 3),
>>             round(rval$element$pfn$est, digits = 3),
>>             round(kappa2$coeff.val, digits = 3),
>>             round(gwet$coeff.val, digits = 3),
>>             round(rkappa$pabak$est, digits = 3))
>>   cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
>> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>>            paste(round(rval$elements$specificity$lower, digits = 3),
>> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>>            paste(round(rval$element$pfp$lower, digits = 3),
>> round(rval$element$pfp$upper, digits = 3), sep = ","),
>>            paste(round(rval$element$pfn$lower, digits = 3),
>> round(rval$element$pfn$upper, digits = 3), sep = ","),
>>            kappa2$coeff.ci,
>>            gwet$coeff.ci,
>>            paste(round(rkappa$pabak$lower, digits = 3),
>> round(rkappa$pabak$lower, digits = 3), sep = ","))
>>   df <- data.frame(hd, ests, cis)
>>   write.csv(df,
>>             file = paste0(the_dir, "/", basename(a_csv)),
>>             na = "999.99",
>>             row.names = FALSE)
>> }
>> #Execute functions
>> lapply(all_epi_files,
>>        FUN = epi_analysis,
>>        the_dir = the_dir_ex)
>> ```
>> But instead I would like to input a dataset that looks like this:
>> |Test Assay | Var1 | Var2 |Freq|
>> |-----------|------|------|----|
>> |Assay1     |neg   |neg   |19  |
>> |Assay1     |neg   |pos   |5   |
>> |Assay1     |pos   |neg   |8   |
>> |Assay1     |pos   |pos   |141 |
>> |Assay2     |neg   |neg   |25  |
>> |Assay2     |neg   |pos   |6   |
>> |Assay2     |pos   |neg   |17  |
>> |Assay2     |pos   |pos   |33  |
>> |Assay3     |neg   |neg   |99  |
>> |Assay3     |neg   |pos   |20  |
>> |Assay3     |pos   |neg   |5   |
>> |Assay3     |pos   |pos   |105 |
>> I want to use the same function epi_analysis and export a csv for each
>> Test Assay (in this example Assay1, Assay2, and Assay3). So far I
>> have:
>> ```
>> #Make export directory
>> check_create_dir <- function(the_dir) {
>>   if (!dir.exists(the_dir)) {
>>     dir.create(the_dir, recursive = TRUE) } #Creates a directory if it
>> doesn't already exist
>> }
>> the_dir_ex <- "data_generated/epidata" #Name the new desired directory
>> check_create_dir(the_dir_ex) #Make the directory if it doesn't already exist
>> #Make function for the series of analyses
>> epi_analysis <- function(.x, the_dir){
>>   #Clean data
>>   dat2 <- .x  %>%
>>     select(c(Var1, Var2, Freq)) %>%
>>     pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
>>     remove_rownames %>%
>>     column_to_rownames( var = "Var1") %>%
>>     as.matrix()
>>   #Run tests
>>   rval <- epi.tests(dat2, conf.level = 0.95)
>>   rkappa<-epi.kappa(dat2)
>>   gwet <- gwet.ac1.table(dat2)
>>   kappa2 <- kappa2.table(dat2)
>>   #Export results
>>   hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>>   ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>>             round(rval$elements$specificity$est, digits = 3),
>>             round(rval$element$pfp$est, digits = 3),
>>             round(rval$element$pfn$est, digits = 3),
>>             round(kappa2$coeff.val, digits = 3),
>>             round(gwet$coeff.val, digits = 3),
>>             round(rkappa$pabak$est, digits = 3))
>>   cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
>> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>>            paste(round(rval$elements$specificity$lower, digits = 3),
>> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>>            paste(round(rval$element$pfp$lower, digits = 3),
>> round(rval$element$pfp$upper, digits = 3), sep = ","),
>>            paste(round(rval$element$pfn$lower, digits = 3),
>> round(rval$element$pfn$upper, digits = 3), sep = ","),
>>            kappa2$coeff.ci,
>>            gwet$coeff.ci,
>>            paste(round(rkappa$pabak$lower, digits = 3),
>> round(rkappa$pabak$lower, digits = 3), sep = ","))
>>   df <- data.frame(hd, ests, cis)
>>   write.csv(df,
>>             file = paste0(the_dir, "/", basename(.x$TestAssay)),
>>             na = "999.99",
>>             row.names = FALSE)
>> }
>> data <- read_csv("data_raw/EpiTest.csv") %>%
>>   group_by(TestAssay)%>%
>>   group_map(~ epi_analysis)
>> ```
>> But the only output I see is:
>> ```
>> [[1]]
>> function(.x, the_dir){
>>   #Clean data
>>   dat2 <- .x  %>%
>>     select(c(Var1, Var2, Freq)) %>%
>>     pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
>>     remove_rownames %>%
>>     column_to_rownames( var = "Var1") %>%
>>     as.matrix()
>>   #Run tests
>>   rval <- epi.tests(dat2, conf.level = 0.95)
>>   rkappa<-epi.kappa(dat2)
>>   gwet <- gwet.ac1.table(dat2)
>>   kappa2 <- kappa2.table(dat2)
>>   #Export results
>>   hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>>   ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>>             round(rval$elements$specificity$est, digits = 3),
>>             round(rval$element$pfp$est, digits = 3),
>>             round(rval$element$pfn$est, digits = 3),
>>             round(kappa2$coeff.val, digits = 3),
>>             round(gwet$coeff.val, digits = 3),
>>             round(rkappa$pabak$est, digits = 3))
>>   cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
>> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>>            paste(round(rval$elements$specificity$lower, digits = 3),
>> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>>            paste(round(rval$element$pfp$lower, digits = 3),
>> round(rval$element$pfp$upper, digits = 3), sep = ","),
>>            paste(round(rval$element$pfn$lower, digits = 3),
>> round(rval$element$pfn$upper, digits = 3), sep = ","),
>>            kappa2$coeff.ci,
>>            gwet$coeff.ci,
>>            paste(round(rkappa$pabak$lower, digits = 3),
>> round(rkappa$pabak$lower, digits = 3), sep = ","))
>>   df <- data.frame(hd, ests, cis)
>>   write.csv(df,
>>             file = paste0(the_dir, "/", basename(.x$TestAssay)),
>>             na = "999.99",
>>             row.names = FALSE)
>> }
>> [[2]]
>> function(.x, the_dir){
>>   #Clean data
>>   dat2 <- .x  %>%
>>     select(c(Var1, Var2, Freq)) %>%
>>     pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
>>     remove_rownames %>%
>>     column_to_rownames( var = "Var1") %>%
>>     as.matrix()
>>   #Run tests
>>   rval <- epi.tests(dat2, conf.level = 0.95)
>>   rkappa<-epi.kappa(dat2)
>>   gwet <- gwet.ac1.table(dat2)
>>   kappa2 <- kappa2.table(dat2)
>>   #Export results
>>   hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>>   ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>>             round(rval$elements$specificity$est, digits = 3),
>>             round(rval$element$pfp$est, digits = 3),
>>             round(rval$element$pfn$est, digits = 3),
>>             round(kappa2$coeff.val, digits = 3),
>>             round(gwet$coeff.val, digits = 3),
>>             round(rkappa$pabak$est, digits = 3))
>>   cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
>> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>>            paste(round(rval$elements$specificity$lower, digits = 3),
>> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>>            paste(round(rval$element$pfp$lower, digits = 3),
>> round(rval$element$pfp$upper, digits = 3), sep = ","),
>>            paste(round(rval$element$pfn$lower, digits = 3),
>> round(rval$element$pfn$upper, digits = 3), sep = ","),
>>            kappa2$coeff.ci,
>>            gwet$coeff.ci,
>>            paste(round(rkappa$pabak$lower, digits = 3),
>> round(rkappa$pabak$lower, digits = 3), sep = ","))
>>   df <- data.frame(hd, ests, cis)
>>   write.csv(df,
>>             file = paste0(the_dir, "/", basename(.x$TestAssay)),
>>             na = "999.99",
>>             row.names = FALSE)
>> }
>> [[3]]
>> function(.x, the_dir){
>>   #Clean data
>>   dat2 <- .x  %>%
>>     select(c(Var1, Var2, Freq)) %>%
>>     pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
>>     remove_rownames %>%
>>     column_to_rownames( var = "Var1") %>%
>>     as.matrix()
>>   #Run tests
>>   rval <- epi.tests(dat2, conf.level = 0.95)
>>   rkappa<-epi.kappa(dat2)
>>   gwet <- gwet.ac1.table(dat2)
>>   kappa2 <- kappa2.table(dat2)
>>   #Export results
>>   hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>>   ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>>             round(rval$elements$specificity$est, digits = 3),
>>             round(rval$element$pfp$est, digits = 3),
>>             round(rval$element$pfn$est, digits = 3),
>>             round(kappa2$coeff.val, digits = 3),
>>             round(gwet$coeff.val, digits = 3),
>>             round(rkappa$pabak$est, digits = 3))
>>   cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
>> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>>            paste(round(rval$elements$specificity$lower, digits = 3),
>> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>>            paste(round(rval$element$pfp$lower, digits = 3),
>> round(rval$element$pfp$upper, digits = 3), sep = ","),
>>            paste(round(rval$element$pfn$lower, digits = 3),
>> round(rval$element$pfn$upper, digits = 3), sep = ","),
>>            kappa2$coeff.ci,
>>            gwet$coeff.ci,
>>            paste(round(rkappa$pabak$lower, digits = 3),
>> round(rkappa$pabak$lower, digits = 3), sep = ","))
>>   df <- data.frame(hd, ests, cis)
>>   write.csv(df,
>>             file = paste0(the_dir, "/", basename(.x$TestAssay)),
>>             na = "999.99",
>>             row.names = FALSE)
>> }
>> [[4]]
>> function(.x, the_dir){
>>   #Clean data
>>   dat2 <- .x  %>%
>>     select(c(Var1, Var2, Freq)) %>%
>>     pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
>>     remove_rownames %>%
>>     column_to_rownames( var = "Var1") %>%
>>     as.matrix()
>>   #Run tests
>>   rval <- epi.tests(dat2, conf.level = 0.95)
>>   rkappa<-epi.kappa(dat2)
>>   gwet <- gwet.ac1.table(dat2)
>>   kappa2 <- kappa2.table(dat2)
>>   #Export results
>>   hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>>   ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>>             round(rval$elements$specificity$est, digits = 3),
>>             round(rval$element$pfp$est, digits = 3),
>>             round(rval$element$pfn$est, digits = 3),
>>             round(kappa2$coeff.val, digits = 3),
>>             round(gwet$coeff.val, digits = 3),
>>             round(rkappa$pabak$est, digits = 3))
>>   cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
>> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>>            paste(round(rval$elements$specificity$lower, digits = 3),
>> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>>            paste(round(rval$element$pfp$lower, digits = 3),
>> round(rval$element$pfp$upper, digits = 3), sep = ","),
>>            paste(round(rval$element$pfn$lower, digits = 3),
>> round(rval$element$pfn$upper, digits = 3), sep = ","),
>>            kappa2$coeff.ci,
>>            gwet$coeff.ci,
>>            paste(round(rkappa$pabak$lower, digits = 3),
>> round(rkappa$pabak$lower, digits = 3), sep = ","))
>>   df <- data.frame(hd, ests, cis)
>>   write.csv(df,
>>             file = paste0(the_dir, "/", basename(.x$TestAssay)),
>>             na = "999.99",
>>             row.names = FALSE)
>> }
>> ```
>> and there are no csvs in my epidata folder. Any
>> suggestions/corrections welcomed. I haven't used group_map() before,
>> but I am keen to use it.
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From wjm1 @end|ng |rom c@@@co|umb|@@edu  Sat Jun  5 20:04:52 2021
From: wjm1 @end|ng |rom c@@@co|umb|@@edu (William Michels)
Date: Sat, 5 Jun 2021 11:04:52 -0700
Subject: [R] Beginner problem - using mod function to print odd numbers
In-Reply-To: <A1013F52-3C4D-4BAE-B058-6E7E9FAF9D6C@collocations.de>
References: <1622657870092-0.post-5018@n4.nabble.com>
 <A1013F52-3C4D-4BAE-B058-6E7E9FAF9D6C@collocations.de>
Message-ID: <CAA99HCxUROK8_Lm+cYqBVH6AemB_btfRtAZVUtOiMESdSZaxgw@mail.gmail.com>

> i <- 1L; span <- 1:100; result <- NA;
> for (i in span){
+ ifelse(i %% 2 != 0, result[i] <- TRUE, result[i] <- FALSE)
+ }
> span[result]
 [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43
45 47 49 51 53 55 57
[30] 59 61 63 65 67 69 71 73 75 77 79 81 83 85 87 89 91 93 95 97 99
>

HTH, Bill.

W. Michels, Ph.D.


On Sat, Jun 5, 2021 at 12:55 AM Stefan Evert <stefanML at collocations.de> wrote:
>
> >
> > I don't understand. --
> >
> > 7%%2=1
> > 9%%2=1
> > 11%%2=1
> >
> > What aren't these numbers printing ?
> >
> > num<-0
> > for (i in 1:100){
> >  num<-num+i
> > if (num%%2 != 0)
> >  print(num)
> > }
>
> Your code tests the numbers
>
>         1, 3, 6, 10, 15, 21, 28, 36, 45, 55, 66, ?
>
> and correctly prints the odd ones among them.
>
> But I suppose that's not what you wanted to do?
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Sat Jun  5 21:26:13 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 5 Jun 2021 12:26:13 -0700
Subject: [R] Beginner problem - using mod function to print odd numbers
In-Reply-To: <CAA99HCxUROK8_Lm+cYqBVH6AemB_btfRtAZVUtOiMESdSZaxgw@mail.gmail.com>
References: <1622657870092-0.post-5018@n4.nabble.com>
 <A1013F52-3C4D-4BAE-B058-6E7E9FAF9D6C@collocations.de>
 <CAA99HCxUROK8_Lm+cYqBVH6AemB_btfRtAZVUtOiMESdSZaxgw@mail.gmail.com>
Message-ID: <CAGxFJbTJVqW3L1hBALBF5L4C+7c9u=j=V-4wA-yxJSgF+5uRbA@mail.gmail.com>

I'm sorry, but  this is a good example of how one should *not* do this in
R. I also should apologize for any pedantry that follows, but I believe
this serves as a nice example of the ideas.

Two of R's central features as a "data science" language are that many of
its core capabilities are "vectorized" -- can calculate on whole objects
(at the user-visible interpreter level) rather than requiring explicit
loops; and that it can use object indexing in several different modalities,
here logical indexing, for extraction and replacement in whole objects such
as vectors and matrices. Not only does this typically yield simpler, more
readable code (admittedly, a subjective judgment), but it is also typically
much faster, though I grant you that this can often be overrated.

In this instance, the several lines of looping code you presented can be
condensed into a single line:

> span <- 1:20
> span[span %% 2 == 1]
 [1]  1  3  5  7  9 11 13 15 17 19

### Trickier, but perhaps instructive, is: ###
> span[TRUE & span %% 2]
 [1]  1  3  5  7  9 11 13 15 17 19

All languages trade off various strengths and weaknesses, but I think it's
fair to say that one should try to work within the paradigms that are the
language's strengths when possible, R's vectorization and indexing in this
example.

Cheers,
Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sat, Jun 5, 2021 at 11:05 AM William Michels via R-help <
r-help at r-project.org> wrote:

> > i <- 1L; span <- 1:100; result <- NA;
> > for (i in span){
> + ifelse(i %% 2 != 0, result[i] <- TRUE, result[i] <- FALSE)
> + }
> > span[result]
>  [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43
> 45 47 49 51 53 55 57
> [30] 59 61 63 65 67 69 71 73 75 77 79 81 83 85 87 89 91 93 95 97 99
> >
>
> HTH, Bill.
>
> W. Michels, Ph.D.
>
>
> On Sat, Jun 5, 2021 at 12:55 AM Stefan Evert <stefanML at collocations.de>
> wrote:
> >
> > >
> > > I don't understand. --
> > >
> > > 7%%2=1
> > > 9%%2=1
> > > 11%%2=1
> > >
> > > What aren't these numbers printing ?
> > >
> > > num<-0
> > > for (i in 1:100){
> > >  num<-num+i
> > > if (num%%2 != 0)
> > >  print(num)
> > > }
> >
> > Your code tests the numbers
> >
> >         1, 3, 6, 10, 15, 21, 28, 36, 45, 55, 66, ?
> >
> > and correctly prints the odd ones among them.
> >
> > But I suppose that's not what you wanted to do?
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sat Jun  5 21:34:42 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sat, 5 Jun 2021 20:34:42 +0100
Subject: [R] Can I use group_map to iteratively process a dataframe?
In-Reply-To: <E32DBF4A-CBB5-4A45-A86E-DC2D733F0349@gmail.com>
References: <3895af86-d8cf-a3aa-7e4a-1785e1cb65c4@sapo.pt>
 <E32DBF4A-CBB5-4A45-A86E-DC2D733F0349@gmail.com>
Message-ID: <d9f01a7a-a4e5-170d-f705-21453db08304@sapo.pt>

Hello,

You are absolutely right, I had misread the SO post date. Apologies for 
my mistake. Besides, I even forgot the SO link [1] :(.

Now, for the question.

1. The code is giving  errors, that it can't find functions

gwet.ac1.table
kappa2.table

and I have removed the calls to them and the corresponding kappa2 and 
gwet values from the output data.frame.

2. In order to make the code more readable to me, I have written 
auxiliary functions sensitivity, specificity, pfp and pfn. They extract 
a sub-list member, like in the original code.

3. The main problem is that you need to pass epi_analysis its arguments. 
But group_map and group_modify do not pass the grouping variable to the 
function being called so I create a temp grouping variable by extracting 
the assay number and grouping on it. The files are now created.

4.
Also, epi_analysis now returns the data.frames it creates.
I have included col_types in the call to read_csv.
And it gives a message with the output file name, remove it if you find 
it useless. (It was meant for debugging so it probably is.)



library(tidyverse) # for cleaning and shaping data
library(epiR)
library(irrCAC)

all_epi_files <- list.files("congtables", pattern = "*.csv",
                             full.names = TRUE)

#Make export directory
check_create_dir <- function(the_dir) {
   if (!dir.exists(the_dir)) {
     dir.create(the_dir, recursive = TRUE) } #Creates a directory if it 
doesn't already exist
}

# The auxiliary functions
sensitivity <- function(x) x$elements$sensitivity
specificity <- function(x) x$elements$specificity
pfp <- function(x) x$element$pfp
pfn <- function(x) x$element$pfn


#Make function for the series of analyses
epi_analysis <- function(x, the_dir){

   # only the first of a vector of elements all equal to each other
   # unique() could also be used
   assay <- first(x[["TestAssay"]])
   #Clean data
   dat2 <- x  %>%
     select(c(Var1, Var2, Freq)) %>%
     pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
     remove_rownames %>%
     column_to_rownames( var = "Var1") %>%
     as.matrix()

   #Run tests
   rval <- epi.tests(dat2, conf.level = 0.95)
   rkappa <- epi.kappa(dat2)
   #gwet <- gwet.ac1.table(dat2)
   #kappa2 <- kappa2.table(dat2)

   #Export results
   hd <- c('sensitivity', 'specificity', 'pfp', 'pfn',
           #'kappa', 'gwet',
           'pabak')
   ests <- c(round(sensitivity(rval)$est, digits = 3),
             round(specificity(rval)$est, digits = 3),
             round(pfp(rval)$est, digits = 3),
             round(pfn(rval)$est, digits = 3),
             #round(kappa2$coeff.val, digits = 3),
             #round(gwet$coeff.val, digits = 3),
             round(rkappa$pabak$est, digits = 3))
   cis <- c(paste(round(sensitivity(rval)$lower, digits = 3),
                  round(sensitivity(rval)$upper, digits = 3), sep = ","),
            paste(round(specificity(rval)$lower, digits = 3),
                  round(specificity(rval)$upper, digits = 3), sep = ","),
            paste(round(pfp(rval)$lower, digits = 3),
                  round(pfp(rval)$upper, digits = 3), sep = ","),
            paste(round(pfn(rval)$lower, digits = 3),
                  round(pfn(rval)$upper, digits = 3), sep = ","),
            #kappa2$coeff.ci,
            #gwet$coeff.ci,
            paste(round(rkappa$pabak$lower, digits = 3),
                  round(rkappa$pabak$lower, digits = 3), sep = ","))

   df <- data.frame(hd, ests, cis)

   outfile <- file.path(the_dir, paste0(assay, ".csv"))
   msg <- sprintf("Output file: %s", outfile)
   message(msg)
   write.csv(df, file = outfile, na = "999.99", row.names = FALSE)
   df
}


the_dir_ex <- "data_generated/epidata" #Name the new desired directory

check_create_dir(the_dir_ex) #Make the directory if it doesn't already exist
https://stackoverflow.com/questions/67811339/using-group-walk-to-iteratively-export-an-analysis-on-contingency-tables-after-g
data <- read_csv(
   all_epi_files,
   col_types = cols(
     TestAssay = col_character(),
     Var1 = col_character(),
     Var2 = col_character(),
     Freq = col_double()
   )) %>%
   mutate(AssayNum = str_extract(TestAssay, "\\d+")) %>%
   group_by(AssayNum) %>%
   group_map(~ epi_analysis(.x, the_dir_ex))



[1] 
https://stackoverflow.com/questions/67811339/using-group-walk-to-iteratively-export-an-analysis-on-contingency-tables-after-g

Hope this helps,

Rui Barradas


?s 14:26 de 05/06/21, Madison Bell escreveu:
> This question had been posted on SO for a week with no response. I reached out to rhelp two days ago. I deleted the original question on SO and reposted an abbreviated version this morning.
> 
> Sorry for the cross posting, but I am urgently trying to get some ideas on how approach this problem.
> 
> Sent from my iPhone
> 
>> On Jun 5, 2021, at 09:07, Rui Barradas <ruipbarradas at sapo.pt> wrote:
>>
>> ?Hello,
>>
>> This is cross-posted from StackOverflow [1]. Cross posting is not well seen on R-help and the SO post is better explained (at least the data seem to be more complete). You should have waited for an answer there.
>>
>>
>> Hope this helps,
>>
>> Rui Barradas
>>
>> ?s 15:03 de 04/06/21, Madison Bell escreveu:
>>> I want to iteratively process a master list of comparisons using
>>> group_walk() as an alternative method to import batches of .csv files.
>>> I have the code for iteratively importing batch csvs here:
>>> #Import list of csv files from directory, formatted as:
>>> |rownm | neg | pos |
>>> |------|-----|-----|
>>> |neg   |19   |18   |
>>> |pos   |5    |141  |
>>> ```
>>> library(tidyverse) # for cleaning and shaping data
>>> library(epiR)
>>> library(irrCAC)
>>> all_epi_files <- list.files("congtables", pattern = "*.csv",
>>>                                 full.names = TRUE)
>>> #Make export directory
>>> check_create_dir <- function(the_dir) {
>>>    if (!dir.exists(the_dir)) {
>>>      dir.create(the_dir, recursive = TRUE) } #Creates a directory if it
>>> doesn't already exist
>>> }
>>> the_dir_ex <- "data_generated/epidata" #Name the new desired directory
>>> check_create_dir(the_dir_ex) #Make the directory if it doesn't already exist
>>> #Make function for the series of analyses
>>> epi_analysis <- function(a_csv, the_dir){
>>>    #Import data as inserted variables
>>>    dat2 <- read_csv(a_csv)%>%
>>>      remove_rownames %>%
>>>      column_to_rownames(var="rownm") %>%
>>>      as.matrix()
>>>    #Run tests
>>>    rval <- epi.tests(dat2, conf.level = 0.95)
>>>    rkappa<-epi.kappa(dat2)
>>>    gwet <- gwet.ac1.table(dat2)
>>>    kappa2 <- kappa2.table(dat2)
>>>    #Export results
>>>    hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>>>    ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>>>              round(rval$elements$specificity$est, digits = 3),
>>>              round(rval$element$pfp$est, digits = 3),
>>>              round(rval$element$pfn$est, digits = 3),
>>>              round(kappa2$coeff.val, digits = 3),
>>>              round(gwet$coeff.val, digits = 3),
>>>              round(rkappa$pabak$est, digits = 3))
>>>    cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
>>> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>>>             paste(round(rval$elements$specificity$lower, digits = 3),
>>> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>>>             paste(round(rval$element$pfp$lower, digits = 3),
>>> round(rval$element$pfp$upper, digits = 3), sep = ","),
>>>             paste(round(rval$element$pfn$lower, digits = 3),
>>> round(rval$element$pfn$upper, digits = 3), sep = ","),
>>>             kappa2$coeff.ci,
>>>             gwet$coeff.ci,
>>>             paste(round(rkappa$pabak$lower, digits = 3),
>>> round(rkappa$pabak$lower, digits = 3), sep = ","))
>>>    df <- data.frame(hd, ests, cis)
>>>    write.csv(df,
>>>              file = paste0(the_dir, "/", basename(a_csv)),
>>>              na = "999.99",
>>>              row.names = FALSE)
>>> }
>>> #Execute functions
>>> lapply(all_epi_files,
>>>         FUN = epi_analysis,
>>>         the_dir = the_dir_ex)
>>> ```
>>> But instead I would like to input a dataset that looks like this:
>>> |Test Assay | Var1 | Var2 |Freq|
>>> |-----------|------|------|----|
>>> |Assay1     |neg   |neg   |19  |
>>> |Assay1     |neg   |pos   |5   |
>>> |Assay1     |pos   |neg   |8   |
>>> |Assay1     |pos   |pos   |141 |
>>> |Assay2     |neg   |neg   |25  |
>>> |Assay2     |neg   |pos   |6   |
>>> |Assay2     |pos   |neg   |17  |
>>> |Assay2     |pos   |pos   |33  |
>>> |Assay3     |neg   |neg   |99  |
>>> |Assay3     |neg   |pos   |20  |
>>> |Assay3     |pos   |neg   |5   |
>>> |Assay3     |pos   |pos   |105 |
>>> I want to use the same function epi_analysis and export a csv for each
>>> Test Assay (in this example Assay1, Assay2, and Assay3). So far I
>>> have:
>>> ```
>>> #Make export directory
>>> check_create_dir <- function(the_dir) {
>>>    if (!dir.exists(the_dir)) {
>>>      dir.create(the_dir, recursive = TRUE) } #Creates a directory if it
>>> doesn't already exist
>>> }
>>> the_dir_ex <- "data_generated/epidata" #Name the new desired directory
>>> check_create_dir(the_dir_ex) #Make the directory if it doesn't already exist
>>> #Make function for the series of analyses
>>> epi_analysis <- function(.x, the_dir){
>>>    #Clean data
>>>    dat2 <- .x  %>%
>>>      select(c(Var1, Var2, Freq)) %>%
>>>      pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
>>>      remove_rownames %>%
>>>      column_to_rownames( var = "Var1") %>%
>>>      as.matrix()
>>>    #Run tests
>>>    rval <- epi.tests(dat2, conf.level = 0.95)
>>>    rkappa<-epi.kappa(dat2)
>>>    gwet <- gwet.ac1.table(dat2)
>>>    kappa2 <- kappa2.table(dat2)
>>>    #Export results
>>>    hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>>>    ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>>>              round(rval$elements$specificity$est, digits = 3),
>>>              round(rval$element$pfp$est, digits = 3),
>>>              round(rval$element$pfn$est, digits = 3),
>>>              round(kappa2$coeff.val, digits = 3),
>>>              round(gwet$coeff.val, digits = 3),
>>>              round(rkappa$pabak$est, digits = 3))
>>>    cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
>>> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>>>             paste(round(rval$elements$specificity$lower, digits = 3),
>>> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>>>             paste(round(rval$element$pfp$lower, digits = 3),
>>> round(rval$element$pfp$upper, digits = 3), sep = ","),
>>>             paste(round(rval$element$pfn$lower, digits = 3),
>>> round(rval$element$pfn$upper, digits = 3), sep = ","),
>>>             kappa2$coeff.ci,
>>>             gwet$coeff.ci,
>>>             paste(round(rkappa$pabak$lower, digits = 3),
>>> round(rkappa$pabak$lower, digits = 3), sep = ","))
>>>    df <- data.frame(hd, ests, cis)
>>>    write.csv(df,
>>>              file = paste0(the_dir, "/", basename(.x$TestAssay)),
>>>              na = "999.99",
>>>              row.names = FALSE)
>>> }
>>> data <- read_csv("data_raw/EpiTest.csv") %>%
>>>    group_by(TestAssay)%>%
>>>    group_map(~ epi_analysis)
>>> ```
>>> But the only output I see is:
>>> ```
>>> [[1]]
>>> function(.x, the_dir){
>>>    #Clean data
>>>    dat2 <- .x  %>%
>>>      select(c(Var1, Var2, Freq)) %>%
>>>      pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
>>>      remove_rownames %>%
>>>      column_to_rownames( var = "Var1") %>%
>>>      as.matrix()
>>>    #Run tests
>>>    rval <- epi.tests(dat2, conf.level = 0.95)
>>>    rkappa<-epi.kappa(dat2)
>>>    gwet <- gwet.ac1.table(dat2)
>>>    kappa2 <- kappa2.table(dat2)
>>>    #Export results
>>>    hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>>>    ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>>>              round(rval$elements$specificity$est, digits = 3),
>>>              round(rval$element$pfp$est, digits = 3),
>>>              round(rval$element$pfn$est, digits = 3),
>>>              round(kappa2$coeff.val, digits = 3),
>>>              round(gwet$coeff.val, digits = 3),
>>>              round(rkappa$pabak$est, digits = 3))
>>>    cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
>>> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>>>             paste(round(rval$elements$specificity$lower, digits = 3),
>>> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>>>             paste(round(rval$element$pfp$lower, digits = 3),
>>> round(rval$element$pfp$upper, digits = 3), sep = ","),
>>>             paste(round(rval$element$pfn$lower, digits = 3),
>>> round(rval$element$pfn$upper, digits = 3), sep = ","),
>>>             kappa2$coeff.ci,
>>>             gwet$coeff.ci,
>>>             paste(round(rkappa$pabak$lower, digits = 3),
>>> round(rkappa$pabak$lower, digits = 3), sep = ","))
>>>    df <- data.frame(hd, ests, cis)
>>>    write.csv(df,
>>>              file = paste0(the_dir, "/", basename(.x$TestAssay)),
>>>              na = "999.99",
>>>              row.names = FALSE)
>>> }
>>> [[2]]
>>> function(.x, the_dir){
>>>    #Clean data
>>>    dat2 <- .x  %>%
>>>      select(c(Var1, Var2, Freq)) %>%
>>>      pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
>>>      remove_rownames %>%
>>>      column_to_rownames( var = "Var1") %>%
>>>      as.matrix()
>>>    #Run tests
>>>    rval <- epi.tests(dat2, conf.level = 0.95)
>>>    rkappa<-epi.kappa(dat2)
>>>    gwet <- gwet.ac1.table(dat2)
>>>    kappa2 <- kappa2.table(dat2)
>>>    #Export results
>>>    hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>>>    ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>>>              round(rval$elements$specificity$est, digits = 3),
>>>              round(rval$element$pfp$est, digits = 3),
>>>              round(rval$element$pfn$est, digits = 3),
>>>              round(kappa2$coeff.val, digits = 3),
>>>              round(gwet$coeff.val, digits = 3),
>>>              round(rkappa$pabak$est, digits = 3))
>>>    cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
>>> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>>>             paste(round(rval$elements$specificity$lower, digits = 3),
>>> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>>>             paste(round(rval$element$pfp$lower, digits = 3),
>>> round(rval$element$pfp$upper, digits = 3), sep = ","),
>>>             paste(round(rval$element$pfn$lower, digits = 3),
>>> round(rval$element$pfn$upper, digits = 3), sep = ","),
>>>             kappa2$coeff.ci,
>>>             gwet$coeff.ci,
>>>             paste(round(rkappa$pabak$lower, digits = 3),
>>> round(rkappa$pabak$lower, digits = 3), sep = ","))
>>>    df <- data.frame(hd, ests, cis)
>>>    write.csv(df,
>>>              file = paste0(the_dir, "/", basename(.x$TestAssay)),
>>>              na = "999.99",
>>>              row.names = FALSE)
>>> }
>>> [[3]]
>>> function(.x, the_dir){
>>>    #Clean data
>>>    dat2 <- .x  %>%
>>>      select(c(Var1, Var2, Freq)) %>%
>>>      pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
>>>      remove_rownames %>%
>>>      column_to_rownames( var = "Var1") %>%
>>>      as.matrix()
>>>    #Run tests
>>>    rval <- epi.tests(dat2, conf.level = 0.95)
>>>    rkappa<-epi.kappa(dat2)
>>>    gwet <- gwet.ac1.table(dat2)
>>>    kappa2 <- kappa2.table(dat2)
>>>    #Export results
>>>    hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>>>    ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>>>              round(rval$elements$specificity$est, digits = 3),
>>>              round(rval$element$pfp$est, digits = 3),
>>>              round(rval$element$pfn$est, digits = 3),
>>>              round(kappa2$coeff.val, digits = 3),
>>>              round(gwet$coeff.val, digits = 3),
>>>              round(rkappa$pabak$est, digits = 3))
>>>    cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
>>> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>>>             paste(round(rval$elements$specificity$lower, digits = 3),
>>> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>>>             paste(round(rval$element$pfp$lower, digits = 3),
>>> round(rval$element$pfp$upper, digits = 3), sep = ","),
>>>             paste(round(rval$element$pfn$lower, digits = 3),
>>> round(rval$element$pfn$upper, digits = 3), sep = ","),
>>>             kappa2$coeff.ci,
>>>             gwet$coeff.ci,
>>>             paste(round(rkappa$pabak$lower, digits = 3),
>>> round(rkappa$pabak$lower, digits = 3), sep = ","))
>>>    df <- data.frame(hd, ests, cis)
>>>    write.csv(df,
>>>              file = paste0(the_dir, "/", basename(.x$TestAssay)),
>>>              na = "999.99",
>>>              row.names = FALSE)
>>> }
>>> [[4]]
>>> function(.x, the_dir){
>>>    #Clean data
>>>    dat2 <- .x  %>%
>>>      select(c(Var1, Var2, Freq)) %>%
>>>      pivot_wider(Var1, names_from = Var2, values_from = Freq) %>%
>>>      remove_rownames %>%
>>>      column_to_rownames( var = "Var1") %>%
>>>      as.matrix()
>>>    #Run tests
>>>    rval <- epi.tests(dat2, conf.level = 0.95)
>>>    rkappa<-epi.kappa(dat2)
>>>    gwet <- gwet.ac1.table(dat2)
>>>    kappa2 <- kappa2.table(dat2)
>>>    #Export results
>>>    hd <- c('sensitivity', 'specificity', 'pfp', 'pfn', 'kappa', 'gwet', 'pabak')
>>>    ests <- c(round(rval$elements$sensitivity$est, digits = 3),
>>>              round(rval$elements$specificity$est, digits = 3),
>>>              round(rval$element$pfp$est, digits = 3),
>>>              round(rval$element$pfn$est, digits = 3),
>>>              round(kappa2$coeff.val, digits = 3),
>>>              round(gwet$coeff.val, digits = 3),
>>>              round(rkappa$pabak$est, digits = 3))
>>>    cis <- c(paste(round(rval$elements$sensitivity$lower, digits = 3),
>>> round(rval$elements$sensitivity$upper, digits = 3), sep = ","),
>>>             paste(round(rval$elements$specificity$lower, digits = 3),
>>> round(rval$elements$specificity$upper, digits = 3), sep = ","),
>>>             paste(round(rval$element$pfp$lower, digits = 3),
>>> round(rval$element$pfp$upper, digits = 3), sep = ","),
>>>             paste(round(rval$element$pfn$lower, digits = 3),
>>> round(rval$element$pfn$upper, digits = 3), sep = ","),
>>>             kappa2$coeff.ci,
>>>             gwet$coeff.ci,
>>>             paste(round(rkappa$pabak$lower, digits = 3),
>>> round(rkappa$pabak$lower, digits = 3), sep = ","))
>>>    df <- data.frame(hd, ests, cis)
>>>    write.csv(df,
>>>              file = paste0(the_dir, "/", basename(.x$TestAssay)),
>>>              na = "999.99",
>>>              row.names = FALSE)
>>> }
>>> ```
>>> and there are no csvs in my epidata folder. Any
>>> suggestions/corrections welcomed. I haven't used group_map() before,
>>> but I am keen to use it.
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.


From c@r|o@pen@999 @end|ng |rom gm@||@com  Thu Jun  3 19:44:42 2021
From: c@r|o@pen@999 @end|ng |rom gm@||@com (ceepee)
Date: Thu, 3 Jun 2021 12:44:42 -0500 (CDT)
Subject: [R] RStudio does not do anything when issued Knit request
Message-ID: <1622742282349-0.post-6115@n4.nabble.com>


I have R studio 1.4.11 06 installed on my Windows 10 PC along with R 4.1.0.

When I try to knit a project the RStudio does not do anything, and it does
not  give an error message either. Every time I click knit button, it takes
me to the "R Markdown" tab at the bottom and then displays the full path and
the name of the RMD file - that is about it. It was working fine before but
suddenly started behaving this way. FYI, the code runs without errors when
the code chunk is run inside RStudio.
 
I have attached an image on where it takes me. Any thoughts? TIA.

<https://r.789695.n4.nabble.com/file/t389862/RStudioMsgWhenTryingToKnit.jpg> 

CP



--
Sent from: https://r.789695.n4.nabble.com/R-help-f789696.html


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Jun  6 01:31:58 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 05 Jun 2021 16:31:58 -0700
Subject: [R] RStudio does not do anything when issued Knit request
In-Reply-To: <1622742282349-0.post-6115@n4.nabble.com>
References: <1622742282349-0.post-6115@n4.nabble.com>
Message-ID: <2F35865A-1EA1-4731-8E15-92B11F1BADC3@dcn.davis.ca.us>

If you walk into the produce section of a grocery store and start asking people how to fix your car, you may find a mechanic there because mechanics need vegetables also, but that doesn't make that the right approach. Lots of people here use the R language without touching RStudio... this mailing list is about the R language rather than tools. You should be at https://community.rstudio.com/ for this question.

I will say that your version of RStudio is a bit old for that version of R... they have not released a full update for R 4.1.0 yet. You can help them debug by trying out their preview version, or you can use R directly from the command line or using RGui and any text editor. But I don't claim that rolling back your version of R will fix your problems with RStudio... I have no idea.

On June 3, 2021 10:44:42 AM PDT, ceepee <carlospena999 at gmail.com> wrote:
>
>I have R studio 1.4.11 06 installed on my Windows 10 PC along with R
>4.1.0.
>
>When I try to knit a project the RStudio does not do anything, and it
>does
>not  give an error message either. Every time I click knit button, it
>takes
>me to the "R Markdown" tab at the bottom and then displays the full
>path and
>the name of the RMD file - that is about it. It was working fine before
>but
>suddenly started behaving this way. FYI, the code runs without errors
>when
>the code chunk is run inside RStudio.
> 
>I have attached an image on where it takes me. Any thoughts? TIA.
>
><https://r.789695.n4.nabble.com/file/t389862/RStudioMsgWhenTryingToKnit.jpg>
>
>
>CP
>
>
>
>--
>Sent from: https://r.789695.n4.nabble.com/R-help-f789696.html
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From thom@@@tb@bu|k@ @end|ng |rom gm@||@com  Sun Jun  6 13:00:07 2021
From: thom@@@tb@bu|k@ @end|ng |rom gm@||@com (Thomas Bulka)
Date: Sun, 6 Jun 2021 13:00:07 +0200
Subject: [R] 
 Conversion of String to Datetime: How to Keep Timezone Offset
 when Printing?
In-Reply-To: <6caadcac-4c7f-101c-6cca-2c62aacd08a7@gmail.com>
References: <CAEyarj=j7udxv2f9f9B_8zTSqEz-Hcrj00eDT1VTr1SA5vnXfg@mail.gmail.com>
 <6caadcac-4c7f-101c-6cca-2c62aacd08a7@gmail.com>
Message-ID: <CAEyarjnqq=wVr4m=ei0VqF3oHMWUc9BmQQBET0dyps5RsKbKzg@mail.gmail.com>

Am Sa., 5. Juni 2021 um 11:47 Uhr schrieb Micha Silver <tsvibar at gmail.com>:
> It's not clear what you're asking. The time strings already have the
> timezone offset specified. If you get rid of the "T" character in the
> strings, then you can use regular datetime formatting specifiers to
> convert to R datetime objects, i.e.
>
>
> my_dates = c("2021-06-19T13:45:00-03:00", "2020-07-20T11:39:12+02:00",
> strftime(Sys.time(),"%Y-%m-%dT%H:%M:%S%z"))
> my_dates
> [1] "2021-06-19T13:45:00-03:00" "2020-07-20T11:39:12+02:00"
> [3] "2021-06-05T12:33:11+0300"
> my_dates2 = gsub(pattern="T", replacement=" ", x=my_dates)
> my_dates2
> [1] "2021-06-19 13:45:00-03:00" "2020-07-20 11:39:12+02:00"
> [3] "2021-06-05 12:33:11+0300"
>
>
> # Now convert to datetime objects, including TZ offset:
>
> my_datetimes = as.POSIXct(my_dates2, "%Y-%m-%d %H:%M:%S%z")
>
>
> # And these datetimes you can visualize any way you want:
>
> strftime(my_datetimes, format="%d/%b/%Y %H:%M %Z", tz="EST")
> [1] "19/Jun/2021 08:45 EST" "20/Jul/2020 06:39 EST" "05/Jun/2021 07:33 EST"
>
>
> Not sure if that helps at all...

Hi Micha,

thank you very much for your detailed reply. In fact, I probably have
not been too clear about my intentions, but you somehow managed to
tell me everything I wanted to know... Your solution works perfectly
for me!

Thanks again and kind regards,

Thomas


From wjm1 @end|ng |rom c@@@co|umb|@@edu  Sun Jun  6 13:34:02 2021
From: wjm1 @end|ng |rom c@@@co|umb|@@edu (William Michels)
Date: Sun, 6 Jun 2021 04:34:02 -0700
Subject: [R] Beginner problem - using mod function to print odd numbers
In-Reply-To: <CAGxFJbTJVqW3L1hBALBF5L4C+7c9u=j=V-4wA-yxJSgF+5uRbA@mail.gmail.com>
References: <1622657870092-0.post-5018@n4.nabble.com>
 <A1013F52-3C4D-4BAE-B058-6E7E9FAF9D6C@collocations.de>
 <CAA99HCxUROK8_Lm+cYqBVH6AemB_btfRtAZVUtOiMESdSZaxgw@mail.gmail.com>
 <CAGxFJbTJVqW3L1hBALBF5L4C+7c9u=j=V-4wA-yxJSgF+5uRbA@mail.gmail.com>
Message-ID: <CAA99HCy5rgrDMeEEeELHJPGbK6Y7KjfWNGm8XmhoDKyraOPbpg@mail.gmail.com>

Dear Bert,

First off, I want to thank you for the many hundreds (if not
thousands) of excellent posts I've read from you on this mailing list
over the years. And you are absolutely correct that when using the
`%%` modulo operator, your code is the most compact and the most
idiomatic.

That being said, if someone coming from another programming language
is posting code on this mailing list using a `for()` loop,  they may
be most comfortable getting working code back from this mailing-list
that still uses a `for()` loop in R. Furthermore, people often start
by *filtering* their data, when a better approach might be to first
*recode* it, for which the `ifelse()` function provides a nice
solution. But of course, a more simple approach than I previously
posted would be below (although less idiomatic than your answer):

> object <- 1:100
> index <- ifelse(object %% 2 == 1, TRUE, FALSE)
> object[index]
 [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43
45 47 49 51 53 55 57
[30] 59 61 63 65 67 69 71 73 75 77 79 81 83 85 87 89 91 93 95 97 99
>

This brings us to the question of programming 'philosophy':  certain
languages advise "TMTOWTDI", while another advises "There should be
one--and preferably only one--obvious way to do it." Where does R fit
on this spectrum? I believe one of R's underappreciated strengths is
being more in-line with the "TMTOWTDI" principle. So people coming
from other languages can get good results right off the bat using
vectorized indexing/filtering, or for() loops, or the apply() family
of functions, or writing a custom function (all answers given in this
thread).

Finally, if a nascent R programmer ever ventures into filtering their
data using objects and indexes of different lengths, they should have
a grasp of the code examples below (recycling rule):

long_vec <- 1:16
print(long_vec)
short_vec <- rep(4,8)
print(short_vec)
print(long_vec[long_vec > short_vec])

span <- 1:length(short_vec)
print(long_vec[span][long_vec[span] > short_vec])
print(long_vec[span][long_vec > short_vec])

Best Regards, Bill.

W. Michels, Ph.D.



On Sat, Jun 5, 2021 at 12:26 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>
> I'm sorry, but  this is a good example of how one should *not* do this in R. I also should apologize for any pedantry that follows, but I believe this serves as a nice example of the ideas.
>
> Two of R's central features as a "data science" language are that many of its core capabilities are "vectorized" -- can calculate on whole objects (at the user-visible interpreter level) rather than requiring explicit loops; and that it can use object indexing in several different modalities, here logical indexing, for extraction and replacement in whole objects such as vectors and matrices. Not only does this typically yield simpler, more readable code (admittedly, a subjective judgment), but it is also typically much faster, though I grant you that this can often be overrated.
>
> In this instance, the several lines of looping code you presented can be condensed into a single line:
>
> > span <- 1:20
> > span[span %% 2 == 1]
>  [1]  1  3  5  7  9 11 13 15 17 19
>
> ### Trickier, but perhaps instructive, is: ###
> > span[TRUE & span %% 2]
>  [1]  1  3  5  7  9 11 13 15 17 19
>
> All languages trade off various strengths and weaknesses, but I think it's fair to say that one should try to work within the paradigms that are the language's strengths when possible, R's vectorization and indexing in this example.
>
> Cheers,
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Sat, Jun 5, 2021 at 11:05 AM William Michels via R-help <r-help at r-project.org> wrote:
>>
>> > i <- 1L; span <- 1:100; result <- NA;
>> > for (i in span){
>> + ifelse(i %% 2 != 0, result[i] <- TRUE, result[i] <- FALSE)
>> + }
>> > span[result]
>>  [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43
>> 45 47 49 51 53 55 57
>> [30] 59 61 63 65 67 69 71 73 75 77 79 81 83 85 87 89 91 93 95 97 99
>> >
>>
>> HTH, Bill.
>>
>> W. Michels, Ph.D.
>>
>>
>> On Sat, Jun 5, 2021 at 12:55 AM Stefan Evert <stefanML at collocations.de> wrote:
>> >
>> > >
>> > > I don't understand. --
>> > >
>> > > 7%%2=1
>> > > 9%%2=1
>> > > 11%%2=1
>> > >
>> > > What aren't these numbers printing ?
>> > >
>> > > num<-0
>> > > for (i in 1:100){
>> > >  num<-num+i
>> > > if (num%%2 != 0)
>> > >  print(num)
>> > > }
>> >
>> > Your code tests the numbers
>> >
>> >         1, 3, 6, 10, 15, 21, 28, 36, 45, 55, 66, ?
>> >
>> > and correctly prints the odd ones among them.
>> >
>> > But I suppose that's not what you wanted to do?
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From @|mon|ee|ee123456 @end|ng |rom gm@||@com  Sun Jun  6 10:29:05 2021
From: @|mon|ee|ee123456 @end|ng |rom gm@||@com (Lee Simon)
Date: Sun, 6 Jun 2021 16:29:05 +0800
Subject: [R] Help for Use of R software
Message-ID: <CAFLucyp=B7cQhZiDm2M0yUVNOx2_Hj1zEM9q+AZCXxze+g3E2A@mail.gmail.com>

Dear Sir/Madam,

May I seek for your kind help for the use of R software for conducting
two-proportional z-test which is test for non-inferiority? I have found one
saying using function (TwoSampleProportion.NIS(alpha, beta, p1, p2, k,
delta, margin) but the software said there is not such function. Thank you
very much for your kind help.

With kindest regards,
Simon

	[[alternative HTML version deleted]]


From @|mon|ee|ee123456 @end|ng |rom gm@||@com  Sun Jun  6 19:06:42 2021
From: @|mon|ee|ee123456 @end|ng |rom gm@||@com (Lee Simon)
Date: Mon, 7 Jun 2021 01:06:42 +0800
Subject: [R] Help for Use of R software
Message-ID: <CAFLucyrBa_8OdUdgkX_RgjS0FevR4c=pM9QgCU5yeW-20yurnA@mail.gmail.com>

Dear Sir/Madam,

May I seek for your kind help for the use of R software for conducting
two-proportional z-test which is test for non-inferiority? What function
will the R software provide for doing such test with 95%CI and P-value
calculated. Thank you very much!

With kindest regards,
Simon

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Sun Jun  6 19:44:18 2021
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Sun, 6 Jun 2021 10:44:18 -0700
Subject: [R] Help for Use of R software
In-Reply-To: <CAFLucyp=B7cQhZiDm2M0yUVNOx2_Hj1zEM9q+AZCXxze+g3E2A@mail.gmail.com>
References: <CAFLucyp=B7cQhZiDm2M0yUVNOx2_Hj1zEM9q+AZCXxze+g3E2A@mail.gmail.com>
Message-ID: <d6de49fc-6578-8858-d961-23438c062daa@comcast.net>

A google-search of the term brings up as its first hit a link to a page 
on the rdocumentation.org website that indicates that theTrialSize 
package(version1.4) 
<https://www.rdocumentation.org/packages/TrialSize/versions/1.4> has a 
function named "TwoSampleProportion.NIS".

If you executed these commands in an R console:

install.packages("TrialSize")
packageDescription("TrialSize")
library(TrialSize)
?TwoSampleProportion.NIS

.... you would probably see a help page that has almost the same content 
as the page at rdocumentation.org

(A "two sample z-test", at least as I understand such a label, is not 
necessarily a test for non-inferiority. That page doesn't actually 
describe the results of a calculation using the 
"TwoSampleProportion.NIS" function but if you go to the code you find 
it's not doing a test of any sort but rather doing an oversimplified 
sample size calculation.)

You appear to not understand that R is a system of packages that are 
optionally installed and loaded into the core programming environment. I 
would advise that you do some self-learning about how to use R (or) that 
you contract with a person who can provide the skills need to both 
educate you about the statistical issues in trial design and run your 
analyses for you.

You should also read the fine Posting Guide:

http://www.R-project.org/posting-guide.html

-- 

David.

On 6/6/21 1:29 AM, Lee Simon wrote:
> Dear Sir/Madam,
>
> May I seek for your kind help for the use of R software for conducting
> two-proportional z-test which is test for non-inferiority? I have found one
> saying using function (TwoSampleProportion.NIS(alpha, beta, p1, p2, k,
> delta, margin) but the software said there is not such function. Thank you
> very much for your kind help.
>
> With kindest regards,
> Simon
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From dw|n@em|u@ @end|ng |rom comc@@t@net  Sun Jun  6 19:56:35 2021
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Sun, 6 Jun 2021 10:56:35 -0700
Subject: [R] Help for Use of R software
In-Reply-To: <CAFLucyrBa_8OdUdgkX_RgjS0FevR4c=pM9QgCU5yeW-20yurnA@mail.gmail.com>
References: <CAFLucyrBa_8OdUdgkX_RgjS0FevR4c=pM9QgCU5yeW-20yurnA@mail.gmail.com>
Message-ID: <e5cdd63a-e784-1bd2-5f90-5da4777a9c73@comcast.net>

I get the sense that you need further background on statistical testing 
issues and suggest this resource:


https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3510268/


-- 

David Winsemius, MD, MPH

On 6/6/21 10:06 AM, Lee Simon wrote:
> Dear Sir/Madam,
>
> May I seek for your kind help for the use of R software for conducting
> two-proportional z-test which is test for non-inferiority? What function
> will the R software provide for doing such test with 95%CI and P-value
> calculated. Thank you very much!
>
> With kindest regards,
> Simon
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Sun Jun  6 20:03:33 2021
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Sun, 6 Jun 2021 18:03:33 +0000
Subject: [R] Help for Use of R software
In-Reply-To: <CAFLucyp=B7cQhZiDm2M0yUVNOx2_Hj1zEM9q+AZCXxze+g3E2A@mail.gmail.com>
References: <CAFLucyp=B7cQhZiDm2M0yUVNOx2_Hj1zEM9q+AZCXxze+g3E2A@mail.gmail.com>
Message-ID: <MN2PR03MB51673FD8EAA6D3051033EC7AE2399@MN2PR03MB5167.namprd03.prod.outlook.com>

Simon,

I suggest you look at the web page https://cran.r-project.org/web/packages/SampleSize4ClinicalTrials/SampleSize4ClinicalTrials.pdf
The package SampleSize4Clinical Trials appears to be exactly what you want. I believe it can produce a sample size estimate comparing two proportions for non-inferiority.

John

John David Sorkin M.D., Ph.D.
Professor of Medicine
University of Maryland School of Medicine
Associate Director for Biostatistics and Informatics Baltimore VA Medical Center
Geriatrics, Research, Education, and Clinical Center
Chief, Biostatistics and Informatics
University of Maryland School of Medicine Division of Gerontology, Geriatrics and Palliative Care
Senior Statistician
University of Maryland Center for Vascular Research
10 North Greene Street
GRECC (BT/18/GR)
Baltimore, MD 21201-1524
(Phone) 410-605-7119
(Fax) 410-605-7913 (Please call phone number above prior to faxing)



________________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of Lee Simon <simonleelee123456 at gmail.com>
Sent: Sunday, June 6, 2021 4:29 AM
To: r-help at r-project.org
Subject: [R] Help for Use of R software

Dear Sir/Madam,

May I seek for your kind help for the use of R software for conducting
two-proportional z-test which is test for non-inferiority? I have found one
saying using function (TwoSampleProportion.NIS(alpha, beta, p1, p2, k,
delta, margin) but the software said there is not such function. Thank you
very much for your kind help.

With kindest regards,
Simon

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=04%7C01%7CJSorkin%40som.umaryland.edu%7C6987e89fa41b4ace34c608d9290e2042%7C717009a620de461a88940312a395cac9%7C0%7C0%7C637585963482517146%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=y4%2BsOlxzq2aAhkVyc7XGnmK0%2F1fXKoEzRWZeiHdV3eg%3D&amp;reserved=0
PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=04%7C01%7CJSorkin%40som.umaryland.edu%7C6987e89fa41b4ace34c608d9290e2042%7C717009a620de461a88940312a395cac9%7C0%7C0%7C637585963482517146%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=JuXMHDDub3oN9RXw2Q7owTIR4DDNi6DHA%2FNqUZFQHnI%3D&amp;reserved=0
and provide commented, minimal, self-contained, reproducible code.


From dc@r|@on @end|ng |rom t@mu@edu  Sun Jun  6 21:21:34 2021
From: dc@r|@on @end|ng |rom t@mu@edu (David Carlson)
Date: Sun, 6 Jun 2021 15:21:34 -0400
Subject: [R] Beginner problem - using mod function to print odd numbers
In-Reply-To: <CAA99HCxUROK8_Lm+cYqBVH6AemB_btfRtAZVUtOiMESdSZaxgw@mail.gmail.com>
References: <1622657870092-0.post-5018@n4.nabble.com>
 <A1013F52-3C4D-4BAE-B058-6E7E9FAF9D6C@collocations.de>
 <CAA99HCxUROK8_Lm+cYqBVH6AemB_btfRtAZVUtOiMESdSZaxgw@mail.gmail.com>
Message-ID: <CAE-dL2onx4GK4YtBgPH_nYRy28wx_1EteYvUK7r9KC9A56y+XA@mail.gmail.com>

There is really no need for a loop:

num <- 1:100
num[ifelse(num %% 2 == 1, TRUE, FALSE)]

 [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43 45 47 49
[26] 51 53 55 57 59 61 63 65 67 69 71 73 75 77 79 81 83 85 87 89 91 93 95 97 99

David L Carlson


On Sat, Jun 5, 2021 at 2:05 PM William Michels via R-help
<r-help at r-project.org> wrote:
>
> > i <- 1L; span <- 1:100; result <- NA;
> > for (i in span){
> + ifelse(i %% 2 != 0, result[i] <- TRUE, result[i] <- FALSE)
> + }
> > span[result]
>  [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43
> 45 47 49 51 53 55 57
> [30] 59 61 63 65 67 69 71 73 75 77 79 81 83 85 87 89 91 93 95 97 99
> >
>
> HTH, Bill.
>
> W. Michels, Ph.D.
>
>
> On Sat, Jun 5, 2021 at 12:55 AM Stefan Evert <stefanML at collocations.de> wrote:
> >
> > >
> > > I don't understand. --
> > >
> > > 7%%2=1
> > > 9%%2=1
> > > 11%%2=1
> > >
> > > What aren't these numbers printing ?
> > >
> > > num<-0
> > > for (i in 1:100){
> > >  num<-num+i
> > > if (num%%2 != 0)
> > >  print(num)
> > > }
> >
> > Your code tests the numbers
> >
> >         1, 3, 6, 10, 15, 21, 28, 36, 45, 55, 66, ?
> >
> > and correctly prints the odd ones among them.
> >
> > But I suppose that's not what you wanted to do?
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!Qe700OYnXI-Qe4XYE55MkVqMX3g4Ic4YFx87U-moxnT0xKw7m-rbNqU-EZd5ixk$
> > PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!Qe700OYnXI-Qe4XYE55MkVqMX3g4Ic4YFx87U-moxnT0xKw7m-rbNqU-fWVQ0xI$
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!Qe700OYnXI-Qe4XYE55MkVqMX3g4Ic4YFx87U-moxnT0xKw7m-rbNqU-EZd5ixk$
> PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!Qe700OYnXI-Qe4XYE55MkVqMX3g4Ic4YFx87U-moxnT0xKw7m-rbNqU-fWVQ0xI$
> and provide commented, minimal, self-contained, reproducible code.


From dc@r|@on @end|ng |rom t@mu@edu  Sun Jun  6 22:09:25 2021
From: dc@r|@on @end|ng |rom t@mu@edu (David Carlson)
Date: Sun, 6 Jun 2021 16:09:25 -0400
Subject: [R] Beginner problem - using mod function to print odd numbers
In-Reply-To: <CAE-dL2onx4GK4YtBgPH_nYRy28wx_1EteYvUK7r9KC9A56y+XA@mail.gmail.com>
References: <1622657870092-0.post-5018@n4.nabble.com>
 <A1013F52-3C4D-4BAE-B058-6E7E9FAF9D6C@collocations.de>
 <CAA99HCxUROK8_Lm+cYqBVH6AemB_btfRtAZVUtOiMESdSZaxgw@mail.gmail.com>
 <CAE-dL2onx4GK4YtBgPH_nYRy28wx_1EteYvUK7r9KC9A56y+XA@mail.gmail.com>
Message-ID: <CAE-dL2qRGH__ZNpB1z5Dicuj_+4Y3_TZrwZT=_KHZn347PWoOQ@mail.gmail.com>

If the loop is necessary:

num <- vector()
for (i in 1:100) {
    if(i %% 2 != 0) num <- c(num, i)
}
num

Or modify your code to this to get each odd number printed on a separate row:

for (i in 1:100) {
    if(i %% 2 != 0) print(i)
}

David L Carlson

On Sun, Jun 6, 2021 at 3:21 PM David Carlson <dcarlson at tamu.edu> wrote:
>
> There is really no need for a loop:
>
> num <- 1:100
> num[ifelse(num %% 2 == 1, TRUE, FALSE)]
>
>  [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43 45 47 49
> [26] 51 53 55 57 59 61 63 65 67 69 71 73 75 77 79 81 83 85 87 89 91 93 95 97 99
>
> David L Carlson
>
>
> On Sat, Jun 5, 2021 at 2:05 PM William Michels via R-help
> <r-help at r-project.org> wrote:
> >
> > > i <- 1L; span <- 1:100; result <- NA;
> > > for (i in span){
> > + ifelse(i %% 2 != 0, result[i] <- TRUE, result[i] <- FALSE)
> > + }
> > > span[result]
> >  [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43
> > 45 47 49 51 53 55 57
> > [30] 59 61 63 65 67 69 71 73 75 77 79 81 83 85 87 89 91 93 95 97 99
> > >
> >
> > HTH, Bill.
> >
> > W. Michels, Ph.D.
> >
> >
> > On Sat, Jun 5, 2021 at 12:55 AM Stefan Evert <stefanML at collocations.de> wrote:
> > >
> > > >
> > > > I don't understand. --
> > > >
> > > > 7%%2=1
> > > > 9%%2=1
> > > > 11%%2=1
> > > >
> > > > What aren't these numbers printing ?
> > > >
> > > > num<-0
> > > > for (i in 1:100){
> > > >  num<-num+i
> > > > if (num%%2 != 0)
> > > >  print(num)
> > > > }
> > >
> > > Your code tests the numbers
> > >
> > >         1, 3, 6, 10, 15, 21, 28, 36, 45, 55, 66, ?
> > >
> > > and correctly prints the odd ones among them.
> > >
> > > But I suppose that's not what you wanted to do?
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!Qe700OYnXI-Qe4XYE55MkVqMX3g4Ic4YFx87U-moxnT0xKw7m-rbNqU-EZd5ixk$
> > > PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!Qe700OYnXI-Qe4XYE55MkVqMX3g4Ic4YFx87U-moxnT0xKw7m-rbNqU-fWVQ0xI$
> > > and provide commented, minimal, self-contained, reproducible code.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!Qe700OYnXI-Qe4XYE55MkVqMX3g4Ic4YFx87U-moxnT0xKw7m-rbNqU-EZd5ixk$
> > PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!Qe700OYnXI-Qe4XYE55MkVqMX3g4Ic4YFx87U-moxnT0xKw7m-rbNqU-fWVQ0xI$
> > and provide commented, minimal, self-contained, reproducible code.


From c||n|c@|0910 @end|ng |rom gm@||@com  Sun Jun  6 22:28:14 2021
From: c||n|c@|0910 @end|ng |rom gm@||@com (Ahmad Raza)
Date: Mon, 7 Jun 2021 00:28:14 +0400
Subject: [R] Directly copying data from RStudio to MS Excel
Message-ID: <CANSYM43BwP=1CAnKy_F6JRqSO1vyZVBnAR4NFjmZT6Q=qKLMtA@mail.gmail.com>

Dear Experts,
I am trying to copy data tables from RStudio to MS Excel. In Macbook, its
working effortlessly. I can just press CMD+A, copy and directly paste onto
excel sheet. All text, table and format are preserved. However, its not
working on Windows 10 MS Office 365 Excel.
First, simple paste option doesn't paste anything. If I try to do paste
special --> text/html, it pasts all data in a single long column. I don't
remember what I did differently on Mac that it worked there. I am looking
for your wise words on this issue please.
Thanks.

	[[alternative HTML version deleted]]


From r@turner @end|ng |rom @uck|@nd@@c@nz  Sun Jun  6 23:27:18 2021
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Mon, 7 Jun 2021 09:27:18 +1200
Subject: [R] Beginner problem - using mod function to print odd numbers
In-Reply-To: <CAA99HCy5rgrDMeEEeELHJPGbK6Y7KjfWNGm8XmhoDKyraOPbpg@mail.gmail.com>
References: <1622657870092-0.post-5018@n4.nabble.com>
 <A1013F52-3C4D-4BAE-B058-6E7E9FAF9D6C@collocations.de>
 <CAA99HCxUROK8_Lm+cYqBVH6AemB_btfRtAZVUtOiMESdSZaxgw@mail.gmail.com>
 <CAGxFJbTJVqW3L1hBALBF5L4C+7c9u=j=V-4wA-yxJSgF+5uRbA@mail.gmail.com>
 <CAA99HCy5rgrDMeEEeELHJPGbK6Y7KjfWNGm8XmhoDKyraOPbpg@mail.gmail.com>
Message-ID: <20210607092718.220c34d1@rolf-Latitude-E7470>

On Sun, 6 Jun 2021 04:34:02 -0700
William Michels via R-help <r-help at r-project.org> wrote:


<SNIP>

> ... But of course, a more simple approach than I previously
> posted would be below (although less idiomatic than your answer):
> 
> > object <- 1:100
> > index <- ifelse(object %% 2 == 1, TRUE, FALSE)
> > object[index]
>  [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43
> 45 47 49 51 53 55 57
> [30] 59 61 63 65 67 69 71 73 75 77 79 81 83 85 87 89 91 93 95 97 99

Why faff around with ifelse()?

    object[object %% 2 == 1]

works just fine.

<SNIP>

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Jun  7 00:20:43 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 06 Jun 2021 15:20:43 -0700
Subject: [R] Directly copying data from RStudio to MS Excel
In-Reply-To: <CANSYM43BwP=1CAnKy_F6JRqSO1vyZVBnAR4NFjmZT6Q=qKLMtA@mail.gmail.com>
References: <CANSYM43BwP=1CAnKy_F6JRqSO1vyZVBnAR4NFjmZT6Q=qKLMtA@mail.gmail.com>
Message-ID: <97AC89A1-F42F-497A-9EDF-AC7D07A83207@dcn.davis.ca.us>

No idea.

a) This mailing list is about the R Language, not the RStudio editor.

b) I find that the power of R lies in the ability to give it a script of commands and have to loop through many tasks. Copying and pasting is a manual intervention that prevents bulk calculations in most cases.

c) You may want to generate a csv output file that you can open in Excel. You can also generate docx or html files with the rmarkdown package.

On June 6, 2021 1:28:14 PM PDT, Ahmad Raza <clinical0910 at gmail.com> wrote:
>Dear Experts,
>I am trying to copy data tables from RStudio to MS Excel. In Macbook,
>its
>working effortlessly. I can just press CMD+A, copy and directly paste
>onto
>excel sheet. All text, table and format are preserved. However, its not
>working on Windows 10 MS Office 365 Excel.
>First, simple paste option doesn't paste anything. If I try to do paste
>special --> text/html, it pasts all data in a single long column. I
>don't
>remember what I did differently on Mac that it worked there. I am
>looking
>for your wise words on this issue please.
>Thanks.
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From p|out@|7 @end|ng |rom gm@||@com  Mon Jun  7 06:00:32 2021
From: p|out@|7 @end|ng |rom gm@||@com (Paul Louisell)
Date: Mon, 7 Jun 2021 00:00:32 -0400
Subject: [R] .Last function in R 4.1.0
Message-ID: <CAP7Zy0KSNsP9wM7mQ3H1cB+MqwYA_8HtWYxX18Eif09OieTVvg@mail.gmail.com>

Here's my relevant OS / version info for background:
R version 4.1.0 (2021-05-18)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 19043)
Here's the problem: I've inserted the following lines *only *into my
Rprofile.site file in the etc folder:
if(interactive()){
.Last=function(){
timestamp(stamp=date(), prefix = "##------ ", suffix = " ------##")
savehistory()
}
}
This is a basic .Last function to automatically insert a timestamp into the
history and save it at the end of an interactive R session. Prior to R
4.1.0, I'd never received an error from these lines. But in version 4.1.0
on startup, I get this error:
Error: cannot add binding of '.Last' to the base environment

And (as expected given the error) the .Last function is not in the
workspace:
> .Last
Error: object '.Last' not found
The same thing happens when I start up the 32-bit version. Section 10.8
(pg. 54) of *R-intro.pdf *still has the documentation for .First and .Last,
and shows examples where you place the function definitions in the
Rprofile.site file, as well as other locations. *fullrefman.pdf *also has
documentation for these functions. So my question:

   - Is this a bug? Or does R not support .First / .Last anymore, and the
   documents just need updating?

Thanks for your help with this,
Paul Louisell

	[[alternative HTML version deleted]]


From er|ch@@ub@ @end|ng |rom neuw|rth@pr|v@@t  Mon Jun  7 10:43:19 2021
From: er|ch@@ub@ @end|ng |rom neuw|rth@pr|v@@t (Erich Subscriptions)
Date: Mon, 7 Jun 2021 10:43:19 +0200
Subject: [R] Directly copying data from RStudio to MS Excel
In-Reply-To: <CANSYM43BwP=1CAnKy_F6JRqSO1vyZVBnAR4NFjmZT6Q=qKLMtA@mail.gmail.com>
References: <CANSYM43BwP=1CAnKy_F6JRqSO1vyZVBnAR4NFjmZT6Q=qKLMtA@mail.gmail.com>
Message-ID: <61459A2C-278D-4D7B-AFCB-3CF42A7D73AA@neuwirth.priv.at>

Read
https://www.johndcook.com/blog/r_excel_clipboard/


> On 06.06.2021, at 22:28, Ahmad Raza <clinical0910 at gmail.com> wrote:
> 
> Dear Experts,
> I am trying to copy data tables from RStudio to MS Excel. In Macbook, its
> working effortlessly. I can just press CMD+A, copy and directly paste onto
> excel sheet. All text, table and format are preserved. However, its not
> working on Windows 10 MS Office 365 Excel.
> First, simple paste option doesn't paste anything. If I try to do paste
> special --> text/html, it pasts all data in a single long column. I don't
> remember what I did differently on Mac that it worked there. I am looking
> for your wise words on this issue please.
> Thanks.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From n|ckmwr@y @end|ng |rom gm@||@com  Mon Jun  7 11:09:16 2021
From: n|ckmwr@y @end|ng |rom gm@||@com (Nick Wray)
Date: Mon, 7 Jun 2021 10:09:16 +0100
Subject: [R] Magick Package
Message-ID: <CABxY9BM+U7zzLTO5n6vyEPtzge_B=o2b=QDspZO8-q-tODPUBg@mail.gmail.com>

Hello  I'm trying to use the Magick package for animations - it has
downloaded OK but says that it was built under version 4.0.5 and that
fontconfig and x11 features are disabled.  Atm I am using R 1.4.1103   Am I
being naive in assuming that all later versions of R subsume the features
of earlier ones or is it that some packages stop being useable with later
updates?
In any event I have some code for an animation sequence which I have
downloaded from the site -Lesson 39 ? Discrete distributions in R: Part I ?
dataanalysisclassroom <https://www.dataanalysisclassroom.com/lesson39/>
 the code runs without an error message but it doesn't give the animation
sequence you see on the website
Any help suggestions appreciated   Nick Wray

######## Animation #########

# Create png files for Binomial distribution png(file="binomial%02d.png",
width=600, height=300)

 n = 181

x = 0:181



p = 0.1

for (i in 1:5)

{

px = dbinom(x,n,p)

 plot(x,px,type="h",xlab="Random Variable X (Number of tickets in 181
days)",ylab="Probability P(X=k)",font=2,font.lab=2)

txt = paste("p=",p,sep="")

text(150,0.04,txt,col="red",cex=2)

p = p+0.2

}

dev.off()



# Combine the png files saved in the folder into a GIF #



library(magick)



binomial_png1 <- image_read("binomial01.png","x150")

binomial_png2 <- image_read("binomial02.png","x150")

binomial_png3 <- image_read("binomial03.png","x150")

binomial_png4 <- image_read("binomial04.png","x150")

binomial_png5 <- image_read("binomial05.png","x150")



frames <- image_morph(c(binomial_png1, binomial_png2, binomial_png3,
binomial_png4, binomial_png5), frames = 15)

animation <- image_animate(frames)



image_write(animation, "binomial.gif")

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Jun  7 13:10:18 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 7 Jun 2021 07:10:18 -0400
Subject: [R] Magick Package
In-Reply-To: <CABxY9BM+U7zzLTO5n6vyEPtzge_B=o2b=QDspZO8-q-tODPUBg@mail.gmail.com>
References: <CABxY9BM+U7zzLTO5n6vyEPtzge_B=o2b=QDspZO8-q-tODPUBg@mail.gmail.com>
Message-ID: <93106ae1-b6dc-a62d-d6b2-03bb2a70e463@gmail.com>

On 07/06/2021 5:09 a.m., Nick Wray wrote:
> Hello  I'm trying to use the Magick package for animations - it has
> downloaded OK but says that it was built under version 4.0.5 and that
> fontconfig and x11 features are disabled.  Atm I am using R 1.4.1103  

That's not an R version number.  It looks like an RStudio version 
number, which is irrelevant here:  RStudio is just an editor and front end.


  Am I
> being naive in assuming that all later versions of R subsume the features
> of earlier ones or is it that some packages stop being useable with later
> updates?

That's up to the package maintainer.  However, the magick package (note 
the lowercase name) works in current R versions.

> In any event I have some code for an animation sequence which I have
> downloaded from the site -Lesson 39 ? Discrete distributions in R: Part I ?
> dataanalysisclassroom <https://www.dataanalysisclassroom.com/lesson39/>
>   the code runs without an error message but it doesn't give the animation
> sequence you see on the website
> Any help suggestions appreciated   Nick Wray
> 
> ######## Animation #########
> 
> # Create png files for Binomial distribution png(file="binomial%02d.png",
> width=600, height=300)
> 

The line above should be separated to

# Create png files for Binomial distribution

png(file="binomial%02d.png", width=600, height=300)


When I make that correction, the example works for me.

Duncan Murdoch


From bgunter@4567 @end|ng |rom gm@||@com  Mon Jun  7 16:24:08 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 7 Jun 2021 07:24:08 -0700
Subject: [R] .Last function in R 4.1.0
In-Reply-To: <CAP7Zy0KSNsP9wM7mQ3H1cB+MqwYA_8HtWYxX18Eif09OieTVvg@mail.gmail.com>
References: <CAP7Zy0KSNsP9wM7mQ3H1cB+MqwYA_8HtWYxX18Eif09OieTVvg@mail.gmail.com>
Message-ID: <CAGxFJbSfeGMrKGRm_gCtYEcPGm2SKp4mD--Xo8r8Q8Ezy61xsw@mail.gmail.com>

According to the News file for 4.1.0 -- you should always check there first
for such things --

"The base environment and its namespace are now locked (so one can no
longer add bindings to these or remove from these)."

So the docs do seem to need updating.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Jun 7, 2021 at 12:15 AM Paul Louisell <ploutal7 at gmail.com> wrote:

> Here's my relevant OS / version info for background:
> R version 4.1.0 (2021-05-18)
> Platform: x86_64-w64-mingw32/x64 (64-bit)
> Running under: Windows 10 x64 (build 19043)
> Here's the problem: I've inserted the following lines *only *into my
> Rprofile.site file in the etc folder:
> if(interactive()){
> .Last=function(){
> timestamp(stamp=date(), prefix = "##------ ", suffix = " ------##")
> savehistory()
> }
> }
> This is a basic .Last function to automatically insert a timestamp into the
> history and save it at the end of an interactive R session. Prior to R
> 4.1.0, I'd never received an error from these lines. But in version 4.1.0
> on startup, I get this error:
> Error: cannot add binding of '.Last' to the base environment
>
> And (as expected given the error) the .Last function is not in the
> workspace:
> > .Last
> Error: object '.Last' not found
> The same thing happens when I start up the 32-bit version. Section 10.8
> (pg. 54) of *R-intro.pdf *still has the documentation for .First and .Last,
> and shows examples where you place the function definitions in the
> Rprofile.site file, as well as other locations. *fullrefman.pdf *also has
> documentation for these functions. So my question:
>
>    - Is this a bug? Or does R not support .First / .Last anymore, and the
>    documents just need updating?
>
> Thanks for your help with this,
> Paul Louisell
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From wewo|@k| @end|ng |rom gm@||@com  Mon Jun  7 16:37:03 2021
From: wewo|@k| @end|ng |rom gm@||@com (Witold E Wolski)
Date: Mon, 7 Jun 2021 16:37:03 +0200
Subject: [R] Package installation for 4.1 on windows.
Message-ID: <CAAjnpdhz2RjCBtEUA75p4FUGJ2nqU7DgDPrMRe=BVLWniTZX5A@mail.gmail.com>

Hello,

I just installed R 4.1 and now trying to update install some packages.

R version 4.1.0 (2021-05-18) -- "Camp Pontanezen"
Copyright (C) 2021 The R Foundation for Statistical Computing

But when installing packages I read:

Installing packages into ?C:/Users/wolski/Documents/R/win-library/4.0?

Should not be a win-library/4.1. package directory be used by default?

Best regards
Witold

-- 
Witold Eryk Wolski


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Jun  7 17:23:00 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 7 Jun 2021 11:23:00 -0400
Subject: [R] .Last function in R 4.1.0
In-Reply-To: <CAGxFJbSfeGMrKGRm_gCtYEcPGm2SKp4mD--Xo8r8Q8Ezy61xsw@mail.gmail.com>
References: <CAP7Zy0KSNsP9wM7mQ3H1cB+MqwYA_8HtWYxX18Eif09OieTVvg@mail.gmail.com>
 <CAGxFJbSfeGMrKGRm_gCtYEcPGm2SKp4mD--Xo8r8Q8Ezy61xsw@mail.gmail.com>
Message-ID: <1b877bc6-148e-0a30-d7ba-69bed2435aae@gmail.com>

And to expand a bit:  only the site file tries to put objects into the 
base package.  The local .Rprofile file would put them into the global 
environment.  So there's still support for .First and .Last, but it has 
changed.

This abuses things a bit, but appears to work in an Rprofile.site file:

assign(".Last", function() if (interactive()) message("Goodbye!"), 
.AutoloadEnv)

The .AutoloadEnv environment is the place that autoload() writes in the 
base package, and it's generally on the search path, so the .Last 
function will be found.  I haven't checked whether it will be run if 
there's also a .Last defined in the global environment.

Duncan Murdoch

On 07/06/2021 10:24 a.m., Bert Gunter wrote:
> According to the News file for 4.1.0 -- you should always check there first
> for such things --
> 
> "The base environment and its namespace are now locked (so one can no
> longer add bindings to these or remove from these)."
> 
> So the docs do seem to need updating.
> 
> Bert Gunter
> 
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> 
> 
> On Mon, Jun 7, 2021 at 12:15 AM Paul Louisell <ploutal7 at gmail.com> wrote:
> 
>> Here's my relevant OS / version info for background:
>> R version 4.1.0 (2021-05-18)
>> Platform: x86_64-w64-mingw32/x64 (64-bit)
>> Running under: Windows 10 x64 (build 19043)
>> Here's the problem: I've inserted the following lines *only *into my
>> Rprofile.site file in the etc folder:
>> if(interactive()){
>> .Last=function(){
>> timestamp(stamp=date(), prefix = "##------ ", suffix = " ------##")
>> savehistory()
>> }
>> }
>> This is a basic .Last function to automatically insert a timestamp into the
>> history and save it at the end of an interactive R session. Prior to R
>> 4.1.0, I'd never received an error from these lines. But in version 4.1.0
>> on startup, I get this error:
>> Error: cannot add binding of '.Last' to the base environment
>>
>> And (as expected given the error) the .Last function is not in the
>> workspace:
>>> .Last
>> Error: object '.Last' not found
>> The same thing happens when I start up the 32-bit version. Section 10.8
>> (pg. 54) of *R-intro.pdf *still has the documentation for .First and .Last,
>> and shows examples where you place the function definitions in the
>> Rprofile.site file, as well as other locations. *fullrefman.pdf *also has
>> documentation for these functions. So my question:
>>
>>     - Is this a bug? Or does R not support .First / .Last anymore, and the
>>     documents just need updating?
>>
>> Thanks for your help with this,
>> Paul Louisell
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Jun  7 17:49:05 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 7 Jun 2021 11:49:05 -0400
Subject: [R] Package installation for 4.1 on windows.
In-Reply-To: <CAAjnpdhz2RjCBtEUA75p4FUGJ2nqU7DgDPrMRe=BVLWniTZX5A@mail.gmail.com>
References: <CAAjnpdhz2RjCBtEUA75p4FUGJ2nqU7DgDPrMRe=BVLWniTZX5A@mail.gmail.com>
Message-ID: <52ba966a-270a-df2e-1c83-d8b219b36c2d@gmail.com>

On 07/06/2021 10:37 a.m., Witold E Wolski wrote:
> Hello,
> 
> I just installed R 4.1 and now trying to update install some packages.
> 
> R version 4.1.0 (2021-05-18) -- "Camp Pontanezen"
> Copyright (C) 2021 The R Foundation for Statistical Computing
> 
> But when installing packages I read:
> 
> Installing packages into ?C:/Users/wolski/Documents/R/win-library/4.0?
> 
> Should not be a win-library/4.1. package directory be used by default?
>

I suspect something in your local setup specifies that directory.  The 
usual place to install is the directory where R was installed; it only 
switches to the user home directory if that fails, or the user requests it.

Duncan Murdoch


From b|p|@bn1 @end|ng |rom gm@||@com  Mon Jun  7 19:03:18 2021
From: b|p|@bn1 @end|ng |rom gm@||@com (Biplab Nayak)
Date: Mon, 7 Jun 2021 14:03:18 -0300
Subject: [R] Need help to fix the max date filter problem in the date input
Message-ID: <CANwr6KaRsZ8sd-Ezu4xOeAUW06XYr7A2zTPiqquX27Zayi-prg@mail.gmail.com>

Hi All,
I Need a bit of help to fix the code.
Code:
library(readr)
library(shiny)
ttclasses <- read_csv("ttclasses.csv")

#Filter data
library(stringr)
library(dplyr)
ttclasses <-ttclasses %>%
  filter(str_detect(assessment, "Assignment"))
ttclasses <-ttclasses %>%
  filter(str_detect(name, "Name"))

##Remove NA values.
library(tidyverse)
ttclasses <-ttclasses %>% drop_na("score")

#Convert to factor
ttclasses$assessment <- as.factor(ttclasses$assessment)
ttclasses$due_date =  as.Date(ttclasses$due_date, format = "mm/dd/yy")
##ttclasses$name <- as.factor(ttclasses$name)

# Define UI ----
ui <- fluidPage(

  # App title ----
  titlePanel("Assessment Dashboard"),

  # Sidebar layout with input and output definitions ----
  sidebarLayout(

    # Sidebar panel for inputs ----
    sidebarPanel(

      # Input: Selector for variable to plot the grades for the selected
assignment ----
      selectInput("assessment", "Assessment:",
                  c("Assignment 1" = "Assignment 1",
                    "Assignment 2" = "Assignment 2",
                    "Assignment 3" = "Assignment 3",
                    "Assignment 4" = "Assignment 4",
                    "Assignment 5" = "Assignment 5")),
      selectInput("name", "Name:",
                  ttclasses[,2]),

    dateRangeInput("due_date",
                   "Due-Date:",start = max(ttclasses$due_date) ,
                   separator = " - ")
    ),

    # Main panel for displaying outputs ----
    mainPanel(

      # Output: Plot of the requested variable against grade ----
      plotOutput("gradePlot")

    )
  )
)

# Define server logic to plot  ----
server <- function(input, output) {
    output$gradePlot <- renderPlot({
    grade_ad = input$assessment
    boxplot(ttclasses$score[ttclasses$assessment==grade_ad],
frame.plot=FALSE, horizontal=TRUE, col="magenta", main=grade_ad)
    ttclasses <-ttclasses %>%
      filter(ttclasses$due_date >= input$due_date[1] & ttclasses$due_date
<= input$due_date[2])
  })
}

# Create Shiny app ----
shinyApp(ui, server)

Thanks & Regards

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Mon Jun  7 21:21:48 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Mon, 7 Jun 2021 20:21:48 +0100
Subject: [R] 
 Need help to fix the max date filter problem in the date input
In-Reply-To: <CANwr6KaRsZ8sd-Ezu4xOeAUW06XYr7A2zTPiqquX27Zayi-prg@mail.gmail.com>
References: <CANwr6KaRsZ8sd-Ezu4xOeAUW06XYr7A2zTPiqquX27Zayi-prg@mail.gmail.com>
Message-ID: <a5513ba5-2762-7d1f-2476-61dd46d7401c@sapo.pt>

Hello,

This is not reproducible, we don't have access to ttclasses.csv.
Can you post sample data? Please post the output of

dput(ttclasses)

Or, if it is too big, the output of

dput(head(ttclasses, 20))


Hope this helps,

Rui Barradas


?s 18:03 de 07/06/21, Biplab Nayak escreveu:
> Hi All,
> I Need a bit of help to fix the code.
> Code:
> library(readr)
> library(shiny)
> ttclasses <- read_csv("ttclasses.csv")
> 
> #Filter data
> library(stringr)
> library(dplyr)
> ttclasses <-ttclasses %>%
>    filter(str_detect(assessment, "Assignment"))
> ttclasses <-ttclasses %>%
>    filter(str_detect(name, "Name"))
> 
> ##Remove NA values.
> library(tidyverse)
> ttclasses <-ttclasses %>% drop_na("score")
> 
> #Convert to factor
> ttclasses$assessment <- as.factor(ttclasses$assessment)
> ttclasses$due_date =  as.Date(ttclasses$due_date, format = "mm/dd/yy")
> ##ttclasses$name <- as.factor(ttclasses$name)
> 
> # Define UI ----
> ui <- fluidPage(
> 
>    # App title ----
>    titlePanel("Assessment Dashboard"),
> 
>    # Sidebar layout with input and output definitions ----
>    sidebarLayout(
> 
>      # Sidebar panel for inputs ----
>      sidebarPanel(
> 
>        # Input: Selector for variable to plot the grades for the selected
> assignment ----
>        selectInput("assessment", "Assessment:",
>                    c("Assignment 1" = "Assignment 1",
>                      "Assignment 2" = "Assignment 2",
>                      "Assignment 3" = "Assignment 3",
>                      "Assignment 4" = "Assignment 4",
>                      "Assignment 5" = "Assignment 5")),
>        selectInput("name", "Name:",
>                    ttclasses[,2]),
> 
>      dateRangeInput("due_date",
>                     "Due-Date:",start = max(ttclasses$due_date) ,
>                     separator = " - ")
>      ),
> 
>      # Main panel for displaying outputs ----
>      mainPanel(
> 
>        # Output: Plot of the requested variable against grade ----
>        plotOutput("gradePlot")
> 
>      )
>    )
> )
> 
> # Define server logic to plot  ----
> server <- function(input, output) {
>      output$gradePlot <- renderPlot({
>      grade_ad = input$assessment
>      boxplot(ttclasses$score[ttclasses$assessment==grade_ad],
> frame.plot=FALSE, horizontal=TRUE, col="magenta", main=grade_ad)
>      ttclasses <-ttclasses %>%
>        filter(ttclasses$due_date >= input$due_date[1] & ttclasses$due_date
> <= input$due_date[2])
>    })
> }
> 
> # Create Shiny app ----
> shinyApp(ui, server)
> 
> Thanks & Regards
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Mon Jun  7 23:51:54 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Mon, 7 Jun 2021 22:51:54 +0100
Subject: [R] 
 Need help to fix the max date filter problem in the date input
In-Reply-To: <CANwr6KaRsZ8sd-Ezu4xOeAUW06XYr7A2zTPiqquX27Zayi-prg@mail.gmail.com>
References: <CANwr6KaRsZ8sd-Ezu4xOeAUW06XYr7A2zTPiqquX27Zayi-prg@mail.gmail.com>
Message-ID: <94b1c6ef-0f86-0171-bf0d-8676d16c4ff3@sapo.pt>

Hello,

Thanks for the data.
There were some, not many, bugs that I have corrected below.



library(tidyverse)
#library(stringr)    # attached with tidyverse
#library(readr)
library(shiny)

ttclasses <- read_csv("~/tmp/ttclasses.csv")

#Filter data
ttclasses <-ttclasses %>%
   filter(str_detect(assessment, "Assignment"))

# With the attached data this filter
# removes all rows so I have
# commented it out
#ttclasses <-ttclasses %>%
#  filter(str_detect(name, "Name"))

##Remove NA values.
ttclasses <-ttclasses %>% drop_na("score")

#Convert to factor
ttclasses$assessment <- factor(ttclasses$assessment)

# please see the formats in help("strptime")
ttclasses$due_date <-  as.Date(ttclasses$due_date, format = "%m/%d/%y")
##ttclasses$name <- factor(ttclasses$name)

# Define UI ----
ui <- fluidPage(

   # App title ----
   titlePanel("Assessment Dashboard"),

   # Sidebar layout with input and output definitions ----
   sidebarLayout(

     # Sidebar panel for inputs ----
     sidebarPanel(

       # Input: Selector for variable to plot the grades for the selected
       # assignment ----
         selectInput("assessment", "Assessment:",
                     c("Assignment 1" = "Assignment 1",
                       "Assignment 2" = "Assignment 2",
                       "Assignment 3" = "Assignment 3",
                       "Assignment 4" = "Assignment 4",
                       "Assignment 5" = "Assignment 5")),
       selectInput("name", "Name:",
                   ttclasses[,2]),

       dateRangeInput("due_date",
                      "Due-Date:",start = max(ttclasses$due_date) ,
                      separator = " - ")
     ),

     # Main panel for displaying outputs ----
     mainPanel(

       # Output: Plot of the requested variable against grade ----
       plotOutput("gradePlot")

     )
   )
)

# Define server logic to plot  ----
server <- function(input, output) {
   output$gradePlot <- renderPlot({
     grade_ad = input$assessment
     boxplot(ttclasses$score[ttclasses$assessment==grade_ad],
             frame.plot=FALSE, horizontal=TRUE, col="magenta", 
main=grade_ad)
     ttclasses <-ttclasses %>%
       filter(ttclasses$due_date >= input$due_date[1] & ttclasses$due_date
              <= input$due_date[2])
   })
}

# Create Shiny app ----
shinyApp(ui, server)



Hope this helps,

Rui Barradas

?s 18:03 de 07/06/21, Biplab Nayak escreveu:
> Hi All,
> I Need a bit of help to fix the code.
> Code:
> library(readr)
> library(shiny)
> ttclasses <- read_csv("ttclasses.csv")
> 
> #Filter data
> library(stringr)
> library(dplyr)
> ttclasses <-ttclasses %>%
>    filter(str_detect(assessment, "Assignment"))
> ttclasses <-ttclasses %>%
>    filter(str_detect(name, "Name"))
> 
> ##Remove NA values.
> library(tidyverse)
> ttclasses <-ttclasses %>% drop_na("score")
> 
> #Convert to factor
> ttclasses$assessment <- as.factor(ttclasses$assessment)
> ttclasses$due_date =  as.Date(ttclasses$due_date, format = "mm/dd/yy")
> ##ttclasses$name <- as.factor(ttclasses$name)
> 
> # Define UI ----
> ui <- fluidPage(
> 
>    # App title ----
>    titlePanel("Assessment Dashboard"),
> 
>    # Sidebar layout with input and output definitions ----
>    sidebarLayout(
> 
>      # Sidebar panel for inputs ----
>      sidebarPanel(
> 
>        # Input: Selector for variable to plot the grades for the selected
> assignment ----
>        selectInput("assessment", "Assessment:",
>                    c("Assignment 1" = "Assignment 1",
>                      "Assignment 2" = "Assignment 2",
>                      "Assignment 3" = "Assignment 3",
>                      "Assignment 4" = "Assignment 4",
>                      "Assignment 5" = "Assignment 5")),
>        selectInput("name", "Name:",
>                    ttclasses[,2]),
> 
>      dateRangeInput("due_date",
>                     "Due-Date:",start = max(ttclasses$due_date) ,
>                     separator = " - ")
>      ),
> 
>      # Main panel for displaying outputs ----
>      mainPanel(
> 
>        # Output: Plot of the requested variable against grade ----
>        plotOutput("gradePlot")
> 
>      )
>    )
> )
> 
> # Define server logic to plot  ----
> server <- function(input, output) {
>      output$gradePlot <- renderPlot({
>      grade_ad = input$assessment
>      boxplot(ttclasses$score[ttclasses$assessment==grade_ad],
> frame.plot=FALSE, horizontal=TRUE, col="magenta", main=grade_ad)
>      ttclasses <-ttclasses %>%
>        filter(ttclasses$due_date >= input$due_date[1] & ttclasses$due_date
> <= input$due_date[2])
>    })
> }
> 
> # Create Shiny app ----
> shinyApp(ui, server)
> 
> Thanks & Regards
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From b|p|@bn1 @end|ng |rom gm@||@com  Mon Jun  7 21:49:31 2021
From: b|p|@bn1 @end|ng |rom gm@||@com (Biplab Nayak)
Date: Mon, 7 Jun 2021 16:49:31 -0300
Subject: [R] 
 Need help to fix the max date filter problem in the date input
In-Reply-To: <a5513ba5-2762-7d1f-2476-61dd46d7401c@sapo.pt>
References: <CANwr6KaRsZ8sd-Ezu4xOeAUW06XYr7A2zTPiqquX27Zayi-prg@mail.gmail.com>
 <a5513ba5-2762-7d1f-2476-61dd46d7401c@sapo.pt>
Message-ID: <CANwr6KaTxu01=KOxXzJJGdnfN79jqo16rj4YDxtTBwUXkAgoPg@mail.gmail.com>

Hi Rui,

Please find the data file attached here.

Thanks & Regards
Biplab Nayak

On Mon, Jun 7, 2021 at 4:21 PM Rui Barradas <ruipbarradas at sapo.pt> wrote:

> Hello,
>
> This is not reproducible, we don't have access to ttclasses.csv.
> Can you post sample data? Please post the output of
>
> dput(ttclasses)
>
> Or, if it is too big, the output of
>
> dput(head(ttclasses, 20))
>
>
> Hope this helps,
>
> Rui Barradas
>
>
> ?s 18:03 de 07/06/21, Biplab Nayak escreveu:
> > Hi All,
> > I Need a bit of help to fix the code.
> > Code:
> > library(readr)
> > library(shiny)
> > ttclasses <- read_csv("ttclasses.csv")
> >
> > #Filter data
> > library(stringr)
> > library(dplyr)
> > ttclasses <-ttclasses %>%
> >    filter(str_detect(assessment, "Assignment"))
> > ttclasses <-ttclasses %>%
> >    filter(str_detect(name, "Name"))
> >
> > ##Remove NA values.
> > library(tidyverse)
> > ttclasses <-ttclasses %>% drop_na("score")
> >
> > #Convert to factor
> > ttclasses$assessment <- as.factor(ttclasses$assessment)
> > ttclasses$due_date =  as.Date(ttclasses$due_date, format = "mm/dd/yy")
> > ##ttclasses$name <- as.factor(ttclasses$name)
> >
> > # Define UI ----
> > ui <- fluidPage(
> >
> >    # App title ----
> >    titlePanel("Assessment Dashboard"),
> >
> >    # Sidebar layout with input and output definitions ----
> >    sidebarLayout(
> >
> >      # Sidebar panel for inputs ----
> >      sidebarPanel(
> >
> >        # Input: Selector for variable to plot the grades for the selected
> > assignment ----
> >        selectInput("assessment", "Assessment:",
> >                    c("Assignment 1" = "Assignment 1",
> >                      "Assignment 2" = "Assignment 2",
> >                      "Assignment 3" = "Assignment 3",
> >                      "Assignment 4" = "Assignment 4",
> >                      "Assignment 5" = "Assignment 5")),
> >        selectInput("name", "Name:",
> >                    ttclasses[,2]),
> >
> >      dateRangeInput("due_date",
> >                     "Due-Date:",start = max(ttclasses$due_date) ,
> >                     separator = " - ")
> >      ),
> >
> >      # Main panel for displaying outputs ----
> >      mainPanel(
> >
> >        # Output: Plot of the requested variable against grade ----
> >        plotOutput("gradePlot")
> >
> >      )
> >    )
> > )
> >
> > # Define server logic to plot  ----
> > server <- function(input, output) {
> >      output$gradePlot <- renderPlot({
> >      grade_ad = input$assessment
> >      boxplot(ttclasses$score[ttclasses$assessment==grade_ad],
> > frame.plot=FALSE, horizontal=TRUE, col="magenta", main=grade_ad)
> >      ttclasses <-ttclasses %>%
> >        filter(ttclasses$due_date >= input$due_date[1] &
> ttclasses$due_date
> > <= input$due_date[2])
> >    })
> > }
> >
> > # Create Shiny app ----
> > shinyApp(ui, server)
> >
> > Thanks & Regards
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>

From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Tue Jun  8 12:08:47 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Tue, 8 Jun 2021 11:08:47 +0100
Subject: [R] 
 Need help to fix the max date filter problem in the date input
In-Reply-To: <CANwr6Kb2-zxVZMzj8_D3eqX1h+QqfLkrk_9ghxhoqMxz566DPA@mail.gmail.com>
References: <CANwr6KaRsZ8sd-Ezu4xOeAUW06XYr7A2zTPiqquX27Zayi-prg@mail.gmail.com>
 <94b1c6ef-0f86-0171-bf0d-8676d16c4ff3@sapo.pt>
 <CANwr6Kb2-zxVZMzj8_D3eqX1h+QqfLkrk_9ghxhoqMxz566DPA@mail.gmail.com>
Message-ID: <525970c1-538a-79b9-fa36-14dad7aea31d@sapo.pt>

Hello,

Please cc the list.
R-Help is not a code writing service, it's a mailing list for doubts on 
R code. I'm sorry but without answers to the below questions I am not 
going to answer.


What have you tried? What went wrong?


Hope this helps,

Rui Barradas

?s 04:01 de 08/06/21, Biplab Nayak escreveu:
> Hi Rui,
> 
> It's working fine. Now I need to achieve?the following:
> 
> * Default view of most recent distributions by most recent assignment 
> due date
> 
> * Filter by one or more students
> 
> Please help
> 
> Thanks & Regards
> Biplab Nayak
> 
> On Mon, Jun 7, 2021 at 6:51 PM Rui Barradas <ruipbarradas at sapo.pt 
> <mailto:ruipbarradas at sapo.pt>> wrote:
> 
>     Hello,
> 
>     Thanks for the data.
>     There were some, not many, bugs that I have corrected below.
> 
> 
> 
>     library(tidyverse)
>     #library(stringr)? ? # attached with tidyverse
>     #library(readr)
>     library(shiny)
> 
>     ttclasses <- read_csv("~/tmp/ttclasses.csv")
> 
>     #Filter data
>     ttclasses <-ttclasses %>%
>      ? ?filter(str_detect(assessment, "Assignment"))
> 
>     # With the attached data this filter
>     # removes all rows so I have
>     # commented it out
>     #ttclasses <-ttclasses %>%
>     #? filter(str_detect(name, "Name"))
> 
>     ##Remove NA values.
>     ttclasses <-ttclasses %>% drop_na("score")
> 
>     #Convert to factor
>     ttclasses$assessment <- factor(ttclasses$assessment)
> 
>     # please see the formats in help("strptime")
>     ttclasses$due_date <-? as.Date(ttclasses$due_date, format = "%m/%d/%y")
>     ##ttclasses$name <- factor(ttclasses$name)
> 
>     # Define UI ----
>     ui <- fluidPage(
> 
>      ? ?# App title ----
>      ? ?titlePanel("Assessment Dashboard"),
> 
>      ? ?# Sidebar layout with input and output definitions ----
>      ? ?sidebarLayout(
> 
>      ? ? ?# Sidebar panel for inputs ----
>      ? ? ?sidebarPanel(
> 
>      ? ? ? ?# Input: Selector for variable to plot the grades for the
>     selected
>      ? ? ? ?# assignment ----
>      ? ? ? ? ?selectInput("assessment", "Assessment:",
>      ? ? ? ? ? ? ? ? ? ? ?c("Assignment 1" = "Assignment 1",
>      ? ? ? ? ? ? ? ? ? ? ? ?"Assignment 2" = "Assignment 2",
>      ? ? ? ? ? ? ? ? ? ? ? ?"Assignment 3" = "Assignment 3",
>      ? ? ? ? ? ? ? ? ? ? ? ?"Assignment 4" = "Assignment 4",
>      ? ? ? ? ? ? ? ? ? ? ? ?"Assignment 5" = "Assignment 5")),
>      ? ? ? ?selectInput("name", "Name:",
>      ? ? ? ? ? ? ? ? ? ?ttclasses[,2]),
> 
>      ? ? ? ?dateRangeInput("due_date",
>      ? ? ? ? ? ? ? ? ? ? ? "Due-Date:",start = max(ttclasses$due_date) ,
>      ? ? ? ? ? ? ? ? ? ? ? separator = " - ")
>      ? ? ?),
> 
>      ? ? ?# Main panel for displaying outputs ----
>      ? ? ?mainPanel(
> 
>      ? ? ? ?# Output: Plot of the requested variable against grade ----
>      ? ? ? ?plotOutput("gradePlot")
> 
>      ? ? ?)
>      ? ?)
>     )
> 
>     # Define server logic to plot? ----
>     server <- function(input, output) {
>      ? ?output$gradePlot <- renderPlot({
>      ? ? ?grade_ad = input$assessment
>      ? ? ?boxplot(ttclasses$score[ttclasses$assessment==grade_ad],
>      ? ? ? ? ? ? ?frame.plot=FALSE, horizontal=TRUE, col="magenta",
>     main=grade_ad)
>      ? ? ?ttclasses <-ttclasses %>%
>      ? ? ? ?filter(ttclasses$due_date >= input$due_date[1] &
>     ttclasses$due_date
>      ? ? ? ? ? ? ? <= input$due_date[2])
>      ? ?})
>     }
> 
>     # Create Shiny app ----
>     shinyApp(ui, server)
> 
> 
> 
>     Hope this helps,
> 
>     Rui Barradas
> 
>     ?s 18:03 de 07/06/21, Biplab Nayak escreveu:
>      > Hi All,
>      > I Need a bit of help to fix the code.
>      > Code:
>      > library(readr)
>      > library(shiny)
>      > ttclasses <- read_csv("ttclasses.csv")
>      >
>      > #Filter data
>      > library(stringr)
>      > library(dplyr)
>      > ttclasses <-ttclasses %>%
>      >? ? filter(str_detect(assessment, "Assignment"))
>      > ttclasses <-ttclasses %>%
>      >? ? filter(str_detect(name, "Name"))
>      >
>      > ##Remove NA values.
>      > library(tidyverse)
>      > ttclasses <-ttclasses %>% drop_na("score")
>      >
>      > #Convert to factor
>      > ttclasses$assessment <- as.factor(ttclasses$assessment)
>      > ttclasses$due_date =? as.Date(ttclasses$due_date, format =
>     "mm/dd/yy")
>      > ##ttclasses$name <- as.factor(ttclasses$name)
>      >
>      > # Define UI ----
>      > ui <- fluidPage(
>      >
>      >? ? # App title ----
>      >? ? titlePanel("Assessment Dashboard"),
>      >
>      >? ? # Sidebar layout with input and output definitions ----
>      >? ? sidebarLayout(
>      >
>      >? ? ? # Sidebar panel for inputs ----
>      >? ? ? sidebarPanel(
>      >
>      >? ? ? ? # Input: Selector for variable to plot the grades for the
>     selected
>      > assignment ----
>      >? ? ? ? selectInput("assessment", "Assessment:",
>      >? ? ? ? ? ? ? ? ? ? c("Assignment 1" = "Assignment 1",
>      >? ? ? ? ? ? ? ? ? ? ? "Assignment 2" = "Assignment 2",
>      >? ? ? ? ? ? ? ? ? ? ? "Assignment 3" = "Assignment 3",
>      >? ? ? ? ? ? ? ? ? ? ? "Assignment 4" = "Assignment 4",
>      >? ? ? ? ? ? ? ? ? ? ? "Assignment 5" = "Assignment 5")),
>      >? ? ? ? selectInput("name", "Name:",
>      >? ? ? ? ? ? ? ? ? ? ttclasses[,2]),
>      >
>      >? ? ? dateRangeInput("due_date",
>      >? ? ? ? ? ? ? ? ? ? ?"Due-Date:",start = max(ttclasses$due_date) ,
>      >? ? ? ? ? ? ? ? ? ? ?separator = " - ")
>      >? ? ? ),
>      >
>      >? ? ? # Main panel for displaying outputs ----
>      >? ? ? mainPanel(
>      >
>      >? ? ? ? # Output: Plot of the requested variable against grade ----
>      >? ? ? ? plotOutput("gradePlot")
>      >
>      >? ? ? )
>      >? ? )
>      > )
>      >
>      > # Define server logic to plot? ----
>      > server <- function(input, output) {
>      >? ? ? output$gradePlot <- renderPlot({
>      >? ? ? grade_ad = input$assessment
>      >? ? ? boxplot(ttclasses$score[ttclasses$assessment==grade_ad],
>      > frame.plot=FALSE, horizontal=TRUE, col="magenta", main=grade_ad)
>      >? ? ? ttclasses <-ttclasses %>%
>      >? ? ? ? filter(ttclasses$due_date >= input$due_date[1] &
>     ttclasses$due_date
>      > <= input$due_date[2])
>      >? ? })
>      > }
>      >
>      > # Create Shiny app ----
>      > shinyApp(ui, server)
>      >
>      > Thanks & Regards
>      >
>      >? ? ? ?[[alternative HTML version deleted]]
>      >
>      > ______________________________________________
>      > R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>     -- To UNSUBSCRIBE and more, see
>      > https://stat.ethz.ch/mailman/listinfo/r-help
>     <https://stat.ethz.ch/mailman/listinfo/r-help>
>      > PLEASE do read the posting guide
>     http://www.R-project.org/posting-guide.html
>     <http://www.R-project.org/posting-guide.html>
>      > and provide commented, minimal, self-contained, reproducible code.
>      >
>


From b|p|@bn1 @end|ng |rom gm@||@com  Tue Jun  8 14:55:06 2021
From: b|p|@bn1 @end|ng |rom gm@||@com (Biplab Nayak)
Date: Tue, 8 Jun 2021 09:55:06 -0300
Subject: [R] 
 Need help to fix the max date filter problem in the date input
In-Reply-To: <525970c1-538a-79b9-fa36-14dad7aea31d@sapo.pt>
References: <CANwr6KaRsZ8sd-Ezu4xOeAUW06XYr7A2zTPiqquX27Zayi-prg@mail.gmail.com>
 <94b1c6ef-0f86-0171-bf0d-8676d16c4ff3@sapo.pt>
 <CANwr6Kb2-zxVZMzj8_D3eqX1h+QqfLkrk_9ghxhoqMxz566DPA@mail.gmail.com>
 <525970c1-538a-79b9-fa36-14dad7aea31d@sapo.pt>
Message-ID: <CANwr6KZKsbPri4Ns7y94JmvMGEYbQGggFAcqPJTHjwpiMgk3Vw@mail.gmail.com>

Hi Rui,

Please find the code(bold) below I was trying to do to achieve the
achieve:But somehow its not working.
1.Order assessment based on the latest due date so select input
automatically show the order of assessment name.
2.Filter based on the one name or multiple names in the  select input

library(tidyverse)
#library(stringr)    # attached with tidyverse
#library(readr)
library(shiny)
library(dplyr)

ttclasses <- read_csv("~/tmp/ttclasses.csv")

#Filter data
ttclasses <-ttclasses %>%
   filter(str_detect(assessment, "Assignment"))

# With the attached data this filter
# removes all rows so I have
# commented it out


*ttclasses <-ttclasses %>%  filter(str_detect(name, "Name"))*
##Remove NA values.
ttclasses <-ttclasses %>% drop_na("score")

*## Sort  assessment based on max due_date*
*  ttclasses  <- ttclasses [order( - due_date, assessment ),]*

#Convert to factor
ttclasses$assessment <- factor(ttclasses$assessment)

# please see the formats in help("strptime")
ttclasses$due_date <-  as.Date(ttclasses$due_date, format = "%m/%d/%y")
*ttclasses$name <- factor(ttclasses$name)*

# Define UI ----
ui <- fluidPage(

   # App title ----
   titlePanel("Assessment Dashboard"),

   # Sidebar layout with input and output definitions ----
   sidebarLayout(

     # Sidebar panel for inputs ----
     sidebarPanel(

       # Input: Selector for variable to plot the grades for the selected
       # assignment ----

         selectInput("assessment", "Assessment:",
                     c("Assignment 1" = "Assignment 1",
                       "Assignment 2" = "Assignment 2",
                       "Assignment 3" = "Assignment 3",
                       "Assignment 4" = "Assignment 4",
                       "Assignment 5" = "Assignment 5")),
       selectInput("name", "Name:",
                   ttclasses[,2]),

       dateRangeInput("due_date",
                      "Due-Date:",start = max(ttclasses$due_date) ,
                      separator = " - ")
     ),

     # Main panel for displaying outputs ----
     mainPanel(

       # Output: Plot of the requested variable against grade ----
       plotOutput("gradePlot")

     )
   )
)

# Define server logic to plot  ----
server <- function(input, output) {
   output$gradePlot <- renderPlot({
     grade_ad = input$assessment
     boxplot(ttclasses$score[ttclasses$assessment==grade_ad],
             frame.plot=FALSE, horizontal=TRUE, col="magenta",
main=grade_ad)
     ttclasses <-ttclasses %>%
       filter(ttclasses$due_date >= input$due_date[1] & ttclasses$due_date
              <= input$due_date[2])
   })
}

# Create Shiny app ----
shinyApp(ui, server)


Thanks & Regards
Biplab Nayak

On Tue, Jun 8, 2021 at 7:08 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:

> Hello,
>
> Please cc the list.
> R-Help is not a code writing service, it's a mailing list for doubts on
> R code. I'm sorry but without answers to the below questions I am not
> going to answer.
>
>
> What have you tried? What went wrong?
>
>
> Hope this helps,
>
> Rui Barradas
>
> ?s 04:01 de 08/06/21, Biplab Nayak escreveu:
> > Hi Rui,
> >
> > It's working fine. Now I need to achieve the following:
> >
> > * Default view of most recent distributions by most recent assignment
> > due date
> >
> > * Filter by one or more students
> >
> > Please help
> >
> > Thanks & Regards
> > Biplab Nayak
> >
> > On Mon, Jun 7, 2021 at 6:51 PM Rui Barradas <ruipbarradas at sapo.pt
> > <mailto:ruipbarradas at sapo.pt>> wrote:
> >
> >     Hello,
> >
> >     Thanks for the data.
> >     There were some, not many, bugs that I have corrected below.
> >
> >
> >
> >     library(tidyverse)
> >     #library(stringr)    # attached with tidyverse
> >     #library(readr)
> >     library(shiny)
> >
> >     ttclasses <- read_csv("~/tmp/ttclasses.csv")
> >
> >     #Filter data
> >     ttclasses <-ttclasses %>%
> >         filter(str_detect(assessment, "Assignment"))
> >
> >     # With the attached data this filter
> >     # removes all rows so I have
> >     # commented it out
> >     #ttclasses <-ttclasses %>%
> >     #  filter(str_detect(name, "Name"))
> >
> >     ##Remove NA values.
> >     ttclasses <-ttclasses %>% drop_na("score")
> >
> >     #Convert to factor
> >     ttclasses$assessment <- factor(ttclasses$assessment)
> >
> >     # please see the formats in help("strptime")
> >     ttclasses$due_date <-  as.Date(ttclasses$due_date, format =
> "%m/%d/%y")
> >     ##ttclasses$name <- factor(ttclasses$name)
> >
> >     # Define UI ----
> >     ui <- fluidPage(
> >
> >         # App title ----
> >         titlePanel("Assessment Dashboard"),
> >
> >         # Sidebar layout with input and output definitions ----
> >         sidebarLayout(
> >
> >           # Sidebar panel for inputs ----
> >           sidebarPanel(
> >
> >             # Input: Selector for variable to plot the grades for the
> >     selected
> >             # assignment ----
> >               selectInput("assessment", "Assessment:",
> >                           c("Assignment 1" = "Assignment 1",
> >                             "Assignment 2" = "Assignment 2",
> >                             "Assignment 3" = "Assignment 3",
> >                             "Assignment 4" = "Assignment 4",
> >                             "Assignment 5" = "Assignment 5")),
> >             selectInput("name", "Name:",
> >                         ttclasses[,2]),
> >
> >             dateRangeInput("due_date",
> >                            "Due-Date:",start = max(ttclasses$due_date) ,
> >                            separator = " - ")
> >           ),
> >
> >           # Main panel for displaying outputs ----
> >           mainPanel(
> >
> >             # Output: Plot of the requested variable against grade ----
> >             plotOutput("gradePlot")
> >
> >           )
> >         )
> >     )
> >
> >     # Define server logic to plot  ----
> >     server <- function(input, output) {
> >         output$gradePlot <- renderPlot({
> >           grade_ad = input$assessment
> >           boxplot(ttclasses$score[ttclasses$assessment==grade_ad],
> >                   frame.plot=FALSE, horizontal=TRUE, col="magenta",
> >     main=grade_ad)
> >           ttclasses <-ttclasses %>%
> >             filter(ttclasses$due_date >= input$due_date[1] &
> >     ttclasses$due_date
> >                    <= input$due_date[2])
> >         })
> >     }
> >
> >     # Create Shiny app ----
> >     shinyApp(ui, server)
> >
> >
> >
> >     Hope this helps,
> >
> >     Rui Barradas
> >
> >     ?s 18:03 de 07/06/21, Biplab Nayak escreveu:
> >      > Hi All,
> >      > I Need a bit of help to fix the code.
> >      > Code:
> >      > library(readr)
> >      > library(shiny)
> >      > ttclasses <- read_csv("ttclasses.csv")
> >      >
> >      > #Filter data
> >      > library(stringr)
> >      > library(dplyr)
> >      > ttclasses <-ttclasses %>%
> >      >    filter(str_detect(assessment, "Assignment"))
> >      > ttclasses <-ttclasses %>%
> >      >    filter(str_detect(name, "Name"))
> >      >
> >      > ##Remove NA values.
> >      > library(tidyverse)
> >      > ttclasses <-ttclasses %>% drop_na("score")
> >      >
> >      > #Convert to factor
> >      > ttclasses$assessment <- as.factor(ttclasses$assessment)
> >      > ttclasses$due_date =  as.Date(ttclasses$due_date, format =
> >     "mm/dd/yy")
> >      > ##ttclasses$name <- as.factor(ttclasses$name)
> >      >
> >      > # Define UI ----
> >      > ui <- fluidPage(
> >      >
> >      >    # App title ----
> >      >    titlePanel("Assessment Dashboard"),
> >      >
> >      >    # Sidebar layout with input and output definitions ----
> >      >    sidebarLayout(
> >      >
> >      >      # Sidebar panel for inputs ----
> >      >      sidebarPanel(
> >      >
> >      >        # Input: Selector for variable to plot the grades for the
> >     selected
> >      > assignment ----
> >      >        selectInput("assessment", "Assessment:",
> >      >                    c("Assignment 1" = "Assignment 1",
> >      >                      "Assignment 2" = "Assignment 2",
> >      >                      "Assignment 3" = "Assignment 3",
> >      >                      "Assignment 4" = "Assignment 4",
> >      >                      "Assignment 5" = "Assignment 5")),
> >      >        selectInput("name", "Name:",
> >      >                    ttclasses[,2]),
> >      >
> >      >      dateRangeInput("due_date",
> >      >                     "Due-Date:",start = max(ttclasses$due_date) ,
> >      >                     separator = " - ")
> >      >      ),
> >      >
> >      >      # Main panel for displaying outputs ----
> >      >      mainPanel(
> >      >
> >      >        # Output: Plot of the requested variable against grade ----
> >      >        plotOutput("gradePlot")
> >      >
> >      >      )
> >      >    )
> >      > )
> >      >
> >      > # Define server logic to plot  ----
> >      > server <- function(input, output) {
> >      >      output$gradePlot <- renderPlot({
> >      >      grade_ad = input$assessment
> >      >      boxplot(ttclasses$score[ttclasses$assessment==grade_ad],
> >      > frame.plot=FALSE, horizontal=TRUE, col="magenta", main=grade_ad)
> >      >      ttclasses <-ttclasses %>%
> >      >        filter(ttclasses$due_date >= input$due_date[1] &
> >     ttclasses$due_date
> >      > <= input$due_date[2])
> >      >    })
> >      > }
> >      >
> >      > # Create Shiny app ----
> >      > shinyApp(ui, server)
> >      >
> >      > Thanks & Regards
> >      >
> >      >       [[alternative HTML version deleted]]
> >      >
> >      > ______________________________________________
> >      > R-help at r-project.org <mailto:R-help at r-project.org> mailing list
> >     -- To UNSUBSCRIBE and more, see
> >      > https://stat.ethz.ch/mailman/listinfo/r-help
> >     <https://stat.ethz.ch/mailman/listinfo/r-help>
> >      > PLEASE do read the posting guide
> >     http://www.R-project.org/posting-guide.html
> >     <http://www.R-project.org/posting-guide.html>
> >      > and provide commented, minimal, self-contained, reproducible code.
> >      >
> >
>

	[[alternative HTML version deleted]]


From Ju@t|n@A||en @end|ng |rom bregroup@com  Tue Jun  8 12:44:14 2021
From: Ju@t|n@A||en @end|ng |rom bregroup@com (Allen, Justin)
Date: Tue, 8 Jun 2021 10:44:14 +0000
Subject: [R] foreign package read.spss() and NA levels
In-Reply-To: <32cc1d69-47d1-5a67-fc87-43f257839848@statistik.tu-dortmund.de>
References: <LO2P265MB31178ADC394E34613C9212E5E4239@LO2P265MB3117.GBRP265.PROD.OUTLOOK.COM>,
 <32cc1d69-47d1-5a67-fc87-43f257839848@statistik.tu-dortmund.de>
Message-ID: <LO2P265MB3117C0730C7FEFAF58DDB5FCE4379@LO2P265MB3117.GBRP265.PROD.OUTLOOK.COM>

Hi Uwe,

Thank you so much for your reply, I am sorry to waste your time, but after another look, the error seemed to be caused with how I had created the '.sav' file I was using. It was converting one of the factor levels which wasn't NA to the factor level "NA", but the problem was in the dataset as I said.

Many Thanks,

Justin

Justin Allen
Housing Consultant, BRE<https://bregroup.com/>
T: 07807122647

________________________________
From: Uwe Ligges <ligges at statistik.tu-dortmund.de>
Sent: 04 June 2021 10:57
To: Allen, Justin <Justin.Allen at bregroup.com>; R-help at r-project.org <R-help at r-project.org>
Cc: Whiteley, Jonathon <Jon.Whiteley at bregroup.com>; Foster, Helen <Helen.Foster at bregroup.com>
Subject: Re: [R] foreign package read.spss() and NA levels



On 27.05.2021 12:27, Allen, Justin wrote:
> Hi All,
>
> Wanted to report what may be a bug or possibly an oversight, but I am unsure, in the "foreign" packages in the read.spss() command, https://cran.r-project.org/web/packages/foreign/index.html. When running the following code,
>
> input <- read.spss("[.sav file location]", to.data.frame = TRUE)
> str(input)
>
> The read.spss() seems to be applying addNA() to factors so NA is being set as a level, and there seems to be no way to get read.spss() to bring factors in without doing this. This seems to be a recent change as read.spss() was not doing this as of a few months ago. None of the arguments in read.spss() seem to also stop this behaviour. I am currently on the most recent version of both R and the package, as of 27/05/21, and am using RStudio Version 1.4.1106.

Within R (I do not use RStudio) and even with the most recent R-devel, I see

(sav <- system.file("files", "electric.sav", package = "foreign"))
dat <- read.spss(file=sav, to.data.frame=TRUE)
table(dat$DAYOFWK)

#  SUNDAY   MONDAY  TUESDAY WEDNSDAY THURSDAY   FRIDAY SATURDAY
#      19       11       19       17       15       13       16

table(dat$DAYOFWK, useNA="always")

#  SUNDAY   MONDAY  TUESDAY WEDNSDAY THURSDAY   FRIDAY SATURDAY     <NA>
#      19       11       19       17       15       13       16      130

So exactly what you expected?

If you rather use

dat <- read.spss(file=sav, to.data.frame=TRUE, use.missings=FALSE)

table(dat$DAYOFWK, useNA="always")

you see the NA values are converted to a factor level called "MISSING".

If it is different on your end, pelase try in plain R, tell us the
version of R / foreign and show an example data file where this happens.

Best,
Uwe Ligges



>
> Any thoughts?
>
> Many Thanks,
>
> Justin Allen
>
> p.s. your continued maintenance and additions to R and its packages have been infinitely useful in my work and life and thank for that.
>
> Justin Allen
> Housing Consultant, BRE<https://bregroup.com/>
> T: 07807122647
>
> ________________________________
> Follow BRE on Twitter: @BRE_Group<http://twitter.com/BRE_Group>
> ________________________________
> Privileged and confidential information and/or copyright material may be contained in this e-mail. If you are not the intended addressee you may not copy or deliver it to anyone else or use it in any unauthorised manner. To do so is prohibited and may be unlawful. If you have received this e-mail by mistake, please advise the sender immediately by return e-mail and destroy all copies. Thank you.
>
> Building Research Establishment Ltd, Registered under number 3319324 in England and Wales. VAT Registration No GB 689 9499 27 www.bregroup.com<http://www.bregroup.com>
> BRE Global Limited, Registered under number 8961297 in England and Wales. www.breglobal.com<http://www.breglobal.com>
> Building Research Establishment and BRE Global are subsidiaries of the BRE Trust.
> BRE Trust is a company limited by guarantee, Registered under number 3282856 in England and Wales, and registered as a charity in England (no. 1092193) and in Scotland (no. SC039320). www.bretrust.org.uk<http://www.bretrust.org.uk>
> Registered Offices: Bucknalls Lane, Garston, Watford, Hertfordshire WD25 9XX - Travelling to BRE: see www.bregroup.com/contact/directions/<http://www.bregroup.com/contact/directions/<http://www.bregroup.com/contact/directions/<http://www.bregroup.com/contact/directions/>>
> ________________________________
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

________________________________
Follow BRE on Twitter: @BRE_Group<http://twitter.com/BRE_Group>
________________________________
Privileged and confidential information and/or copyright material may be contained in this e-mail. If you are not the intended addressee you may not copy or deliver it to anyone else or use it in any unauthorised manner. To do so is prohibited and may be unlawful. If you have received this e-mail by mistake, please advise the sender immediately by return e-mail and destroy all copies. Thank you.

Building Research Establishment Ltd, Registered under number 3319324 in England and Wales. VAT Registration No GB 689 9499 27 www.bregroup.com<http://www.bregroup.com>
BRE Global Limited, Registered under number 8961297 in England and Wales. www.breglobal.com<http://www.breglobal.com>
Building Research Establishment and BRE Global are subsidiaries of the BRE Trust.
BRE Trust is a company limited by guarantee, Registered under number 3282856 in England and Wales, and registered as a charity in England (no. 1092193) and in Scotland (no. SC039320). www.bretrust.org.uk<http://www.bretrust.org.uk>
Registered Offices: Bucknalls Lane, Garston, Watford, Hertfordshire WD25 9XX - Travelling to BRE: see www.bregroup.com/contact/directions/<http://www.bregroup.com/contact/directions/>
________________________________

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Jun  8 18:07:19 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 8 Jun 2021 09:07:19 -0700
Subject: [R] 
 Need help to fix the max date filter problem in the date input
In-Reply-To: <CANwr6KZKsbPri4Ns7y94JmvMGEYbQGggFAcqPJTHjwpiMgk3Vw@mail.gmail.com>
References: <CANwr6KaRsZ8sd-Ezu4xOeAUW06XYr7A2zTPiqquX27Zayi-prg@mail.gmail.com>
 <94b1c6ef-0f86-0171-bf0d-8676d16c4ff3@sapo.pt>
 <CANwr6Kb2-zxVZMzj8_D3eqX1h+QqfLkrk_9ghxhoqMxz566DPA@mail.gmail.com>
 <525970c1-538a-79b9-fa36-14dad7aea31d@sapo.pt>
 <CANwr6KZKsbPri4Ns7y94JmvMGEYbQGggFAcqPJTHjwpiMgk3Vw@mail.gmail.com>
Message-ID: <CAGxFJbRv7n4ZU2Ya9UnmKAJ8HKZbWGmK3XY_Nh0z-+EuP=c-2A@mail.gmail.com>

I do not wish to be involved in this thread other than to note that you
were, I believe, asked not to post in HTML. And because you did, you will
find that "Bold" highlighting does not exist in your text below. I have no
idea whether that matters for your query or not, but there it is.


Bert Gunter



On Tue, Jun 8, 2021 at 8:13 AM Biplab Nayak <biplabn1 at gmail.com> wrote:

> Hi Rui,
>
> Please find the code(bold) below I was trying to do to achieve the
> achieve:But somehow its not working.
> 1.Order assessment based on the latest due date so select input
> automatically show the order of assessment name.
> 2.Filter based on the one name or multiple names in the  select input
>
> library(tidyverse)
> #library(stringr)    # attached with tidyverse
> #library(readr)
> library(shiny)
> library(dplyr)
>
> ttclasses <- read_csv("~/tmp/ttclasses.csv")
>
> #Filter data
> ttclasses <-ttclasses %>%
>    filter(str_detect(assessment, "Assignment"))
>
> # With the attached data this filter
> # removes all rows so I have
> # commented it out
>
>
> *ttclasses <-ttclasses %>%  filter(str_detect(name, "Name"))*
> ##Remove NA values.
> ttclasses <-ttclasses %>% drop_na("score")
>
> *## Sort  assessment based on max due_date*
> *  ttclasses  <- ttclasses [order( - due_date, assessment ),]*
>
> #Convert to factor
> ttclasses$assessment <- factor(ttclasses$assessment)
>
> # please see the formats in help("strptime")
> ttclasses$due_date <-  as.Date(ttclasses$due_date, format = "%m/%d/%y")
> *ttclasses$name <- factor(ttclasses$name)*
>
> # Define UI ----
> ui <- fluidPage(
>
>    # App title ----
>    titlePanel("Assessment Dashboard"),
>
>    # Sidebar layout with input and output definitions ----
>    sidebarLayout(
>
>      # Sidebar panel for inputs ----
>      sidebarPanel(
>
>        # Input: Selector for variable to plot the grades for the selected
>        # assignment ----
>
>          selectInput("assessment", "Assessment:",
>                      c("Assignment 1" = "Assignment 1",
>                        "Assignment 2" = "Assignment 2",
>                        "Assignment 3" = "Assignment 3",
>                        "Assignment 4" = "Assignment 4",
>                        "Assignment 5" = "Assignment 5")),
>        selectInput("name", "Name:",
>                    ttclasses[,2]),
>
>        dateRangeInput("due_date",
>                       "Due-Date:",start = max(ttclasses$due_date) ,
>                       separator = " - ")
>      ),
>
>      # Main panel for displaying outputs ----
>      mainPanel(
>
>        # Output: Plot of the requested variable against grade ----
>        plotOutput("gradePlot")
>
>      )
>    )
> )
>
> # Define server logic to plot  ----
> server <- function(input, output) {
>    output$gradePlot <- renderPlot({
>      grade_ad = input$assessment
>      boxplot(ttclasses$score[ttclasses$assessment==grade_ad],
>              frame.plot=FALSE, horizontal=TRUE, col="magenta",
> main=grade_ad)
>      ttclasses <-ttclasses %>%
>        filter(ttclasses$due_date >= input$due_date[1] & ttclasses$due_date
>               <= input$due_date[2])
>    })
> }
>
> # Create Shiny app ----
> shinyApp(ui, server)
>
>
> Thanks & Regards
> Biplab Nayak
>
> On Tue, Jun 8, 2021 at 7:08 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:
>
> > Hello,
> >
> > Please cc the list.
> > R-Help is not a code writing service, it's a mailing list for doubts on
> > R code. I'm sorry but without answers to the below questions I am not
> > going to answer.
> >
> >
> > What have you tried? What went wrong?
> >
> >
> > Hope this helps,
> >
> > Rui Barradas
> >
> > ?s 04:01 de 08/06/21, Biplab Nayak escreveu:
> > > Hi Rui,
> > >
> > > It's working fine. Now I need to achieve the following:
> > >
> > > * Default view of most recent distributions by most recent assignment
> > > due date
> > >
> > > * Filter by one or more students
> > >
> > > Please help
> > >
> > > Thanks & Regards
> > > Biplab Nayak
> > >
> > > On Mon, Jun 7, 2021 at 6:51 PM Rui Barradas <ruipbarradas at sapo.pt
> > > <mailto:ruipbarradas at sapo.pt>> wrote:
> > >
> > >     Hello,
> > >
> > >     Thanks for the data.
> > >     There were some, not many, bugs that I have corrected below.
> > >
> > >
> > >
> > >     library(tidyverse)
> > >     #library(stringr)    # attached with tidyverse
> > >     #library(readr)
> > >     library(shiny)
> > >
> > >     ttclasses <- read_csv("~/tmp/ttclasses.csv")
> > >
> > >     #Filter data
> > >     ttclasses <-ttclasses %>%
> > >         filter(str_detect(assessment, "Assignment"))
> > >
> > >     # With the attached data this filter
> > >     # removes all rows so I have
> > >     # commented it out
> > >     #ttclasses <-ttclasses %>%
> > >     #  filter(str_detect(name, "Name"))
> > >
> > >     ##Remove NA values.
> > >     ttclasses <-ttclasses %>% drop_na("score")
> > >
> > >     #Convert to factor
> > >     ttclasses$assessment <- factor(ttclasses$assessment)
> > >
> > >     # please see the formats in help("strptime")
> > >     ttclasses$due_date <-  as.Date(ttclasses$due_date, format =
> > "%m/%d/%y")
> > >     ##ttclasses$name <- factor(ttclasses$name)
> > >
> > >     # Define UI ----
> > >     ui <- fluidPage(
> > >
> > >         # App title ----
> > >         titlePanel("Assessment Dashboard"),
> > >
> > >         # Sidebar layout with input and output definitions ----
> > >         sidebarLayout(
> > >
> > >           # Sidebar panel for inputs ----
> > >           sidebarPanel(
> > >
> > >             # Input: Selector for variable to plot the grades for the
> > >     selected
> > >             # assignment ----
> > >               selectInput("assessment", "Assessment:",
> > >                           c("Assignment 1" = "Assignment 1",
> > >                             "Assignment 2" = "Assignment 2",
> > >                             "Assignment 3" = "Assignment 3",
> > >                             "Assignment 4" = "Assignment 4",
> > >                             "Assignment 5" = "Assignment 5")),
> > >             selectInput("name", "Name:",
> > >                         ttclasses[,2]),
> > >
> > >             dateRangeInput("due_date",
> > >                            "Due-Date:",start = max(ttclasses$due_date)
> ,
> > >                            separator = " - ")
> > >           ),
> > >
> > >           # Main panel for displaying outputs ----
> > >           mainPanel(
> > >
> > >             # Output: Plot of the requested variable against grade ----
> > >             plotOutput("gradePlot")
> > >
> > >           )
> > >         )
> > >     )
> > >
> > >     # Define server logic to plot  ----
> > >     server <- function(input, output) {
> > >         output$gradePlot <- renderPlot({
> > >           grade_ad = input$assessment
> > >           boxplot(ttclasses$score[ttclasses$assessment==grade_ad],
> > >                   frame.plot=FALSE, horizontal=TRUE, col="magenta",
> > >     main=grade_ad)
> > >           ttclasses <-ttclasses %>%
> > >             filter(ttclasses$due_date >= input$due_date[1] &
> > >     ttclasses$due_date
> > >                    <= input$due_date[2])
> > >         })
> > >     }
> > >
> > >     # Create Shiny app ----
> > >     shinyApp(ui, server)
> > >
> > >
> > >
> > >     Hope this helps,
> > >
> > >     Rui Barradas
> > >
> > >     ?s 18:03 de 07/06/21, Biplab Nayak escreveu:
> > >      > Hi All,
> > >      > I Need a bit of help to fix the code.
> > >      > Code:
> > >      > library(readr)
> > >      > library(shiny)
> > >      > ttclasses <- read_csv("ttclasses.csv")
> > >      >
> > >      > #Filter data
> > >      > library(stringr)
> > >      > library(dplyr)
> > >      > ttclasses <-ttclasses %>%
> > >      >    filter(str_detect(assessment, "Assignment"))
> > >      > ttclasses <-ttclasses %>%
> > >      >    filter(str_detect(name, "Name"))
> > >      >
> > >      > ##Remove NA values.
> > >      > library(tidyverse)
> > >      > ttclasses <-ttclasses %>% drop_na("score")
> > >      >
> > >      > #Convert to factor
> > >      > ttclasses$assessment <- as.factor(ttclasses$assessment)
> > >      > ttclasses$due_date =  as.Date(ttclasses$due_date, format =
> > >     "mm/dd/yy")
> > >      > ##ttclasses$name <- as.factor(ttclasses$name)
> > >      >
> > >      > # Define UI ----
> > >      > ui <- fluidPage(
> > >      >
> > >      >    # App title ----
> > >      >    titlePanel("Assessment Dashboard"),
> > >      >
> > >      >    # Sidebar layout with input and output definitions ----
> > >      >    sidebarLayout(
> > >      >
> > >      >      # Sidebar panel for inputs ----
> > >      >      sidebarPanel(
> > >      >
> > >      >        # Input: Selector for variable to plot the grades for the
> > >     selected
> > >      > assignment ----
> > >      >        selectInput("assessment", "Assessment:",
> > >      >                    c("Assignment 1" = "Assignment 1",
> > >      >                      "Assignment 2" = "Assignment 2",
> > >      >                      "Assignment 3" = "Assignment 3",
> > >      >                      "Assignment 4" = "Assignment 4",
> > >      >                      "Assignment 5" = "Assignment 5")),
> > >      >        selectInput("name", "Name:",
> > >      >                    ttclasses[,2]),
> > >      >
> > >      >      dateRangeInput("due_date",
> > >      >                     "Due-Date:",start = max(ttclasses$due_date)
> ,
> > >      >                     separator = " - ")
> > >      >      ),
> > >      >
> > >      >      # Main panel for displaying outputs ----
> > >      >      mainPanel(
> > >      >
> > >      >        # Output: Plot of the requested variable against grade
> ----
> > >      >        plotOutput("gradePlot")
> > >      >
> > >      >      )
> > >      >    )
> > >      > )
> > >      >
> > >      > # Define server logic to plot  ----
> > >      > server <- function(input, output) {
> > >      >      output$gradePlot <- renderPlot({
> > >      >      grade_ad = input$assessment
> > >      >      boxplot(ttclasses$score[ttclasses$assessment==grade_ad],
> > >      > frame.plot=FALSE, horizontal=TRUE, col="magenta", main=grade_ad)
> > >      >      ttclasses <-ttclasses %>%
> > >      >        filter(ttclasses$due_date >= input$due_date[1] &
> > >     ttclasses$due_date
> > >      > <= input$due_date[2])
> > >      >    })
> > >      > }
> > >      >
> > >      > # Create Shiny app ----
> > >      > shinyApp(ui, server)
> > >      >
> > >      > Thanks & Regards
> > >      >
> > >      >       [[alternative HTML version deleted]]
> > >      >
> > >      > ______________________________________________
> > >      > R-help at r-project.org <mailto:R-help at r-project.org> mailing list
> > >     -- To UNSUBSCRIBE and more, see
> > >      > https://stat.ethz.ch/mailman/listinfo/r-help
> > >     <https://stat.ethz.ch/mailman/listinfo/r-help>
> > >      > PLEASE do read the posting guide
> > >     http://www.R-project.org/posting-guide.html
> > >     <http://www.R-project.org/posting-guide.html>
> > >      > and provide commented, minimal, self-contained, reproducible
> code.
> > >      >
> > >
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bh@@k@r@ko|k@t@ @end|ng |rom gm@||@com  Tue Jun  8 20:03:30 2021
From: bh@@k@r@ko|k@t@ @end|ng |rom gm@||@com (Bhaskar Mitra)
Date: Tue, 8 Jun 2021 11:03:30 -0700
Subject: [R] Help in modifying code to extract data from url
In-Reply-To: <29bb1bc4-be95-b9c6-4a41-bcb5dbee3b87@comcast.net>
References: <CAEGXkYUynpgLAZ=Y9tUf0BOB1c9eAQmdrKpgE=tM2FEfP6hpAw@mail.gmail.com>
 <CA+8X3fV+mGCYa1naoebsuRknhUKsOrT_joDuihnR=zfzxeGfCA@mail.gmail.com>
 <29bb1bc4-be95-b9c6-4a41-bcb5dbee3b87@comcast.net>
Message-ID: <CAEGXkYXJU1G0W4rCT0hHPBPsc+xiMbK-UU+J10m2ZQXbiHrc8A@mail.gmail.com>

Thanks everyone for the feedbacks. This is really helpful.

bhaskar

On Sat, May 22, 2021 at 11:56 AM David Winsemius <dwinsemius at comcast.net>
wrote:

> Several authors hav addressed this problem with names that resemble
> "rbindfill". In my machine I find four instances:
>
> ??rbindfill
>
> Help pages:
> ffbase::ffdfrbind.fill        rbind for ffdf where missing columns are
> added if not available in one of the ffdf objects
> plyr::rbind.fill        Combine data.frames by row, filling in missing
> columns.
> plyr::rbind.fill.matrix        Bind matrices by row, and fill missing
> columns with NA.
> rockchalk::rbindFill        Stack together data frames
>
>
> --
>
> David.
>
> On 5/20/21 2:19 AM, Jim Lemon wrote:
> > Hi Bhaskar,
> > If you are using read.table or similar, see the "fill=" argument.
> >
> > Jim
> >
> > On Thu, May 20, 2021 at 9:54 AM Bhaskar Mitra <bhaskar.kolkata at gmail.com>
> wrote:
> >> Hello Everyone,
> >>
> >> I am trying to extract data from a url. The codes work well when the
> >> data structure is as follows:
> >>
> >> X Y
> >> 1 2
> >> 1 5
> >> 1 6
> >> 1 7
> >> 3 4
> >>
> >> However, the code fails when the data structure has no number
> >> under the 2nd column (shown below).I get the following error:
> >>
> >> "Error in data.frame(..., check.names = FALSE) :
> >>    arguments imply differing number of rows: 242, 241"
> >>
> >>
> >> X Y
> >> 1 2
> >> 1
> >> 1
> >> 1 7
> >> 3 4
> >>
> >> Can anyone please help me in how I can modify the codes ( shown below)
> to
> >> adjust for the above mentioned condition
> >> in the data structure.
> >>
> >> library(rjson)
> >>
> >> url <- "abcd.com"
> >> json_data <- fromJSON(file= url)
> >> d3 <- lapply(json_data[[2]], function(x) c(x["data"]))
> >> d3 <- do.call(rbind, d3)
> >> X_Dataframe = as.data.frame(unlist(d3[[1]]))
> >> b <- do.call("cbind", split(X_Dataframe, rep(c(1, 2), length.out =
> >> nrow(X_Dataframe))))
> >>
> >>
> >> regards,
> >> bhaskar
> >>
> >>          [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bh@@k@r@ko|k@t@ @end|ng |rom gm@||@com  Tue Jun  8 20:10:13 2021
From: bh@@k@r@ko|k@t@ @end|ng |rom gm@||@com (Bhaskar Mitra)
Date: Tue, 8 Jun 2021 11:10:13 -0700
Subject: [R] Converting data from weekly interval to daily interval
Message-ID: <CAEGXkYVcVm5VWQ0B-veQcXZcSKt+1A2RUJMJ=wh+LPrcO7LUBw@mail.gmail.com>

Hello Everyone,

I have data at weekly intervals.
The data structure is something like this.

df1 <-
date            a
1/7/2020     3
1/14/2020   6
1/21/2021   7

I would like to convert the data from the weekly
interval to the daily interval. Something like this.

date            a
1/7/2020    0.5
1/8/2020    0.3
1/9/2020    0.7


I am using the following codes

d1 <- nrow(df1)

df2 <- data.frame(matrix(NA, nrow = (d1)*7, ncol = 1)

inc <- 0
for (i in 1:nrow(df1)) {
  for (j in 1:7) {
    inc <- inc + 1
    df2[inc,1] <- df1[i,1]/7
  }
}
rm(df1)



However, the sum of the daily values generated in df2 differ
from the original value in the df1 data frame. There is a 1-2% discrepancy.
I would appreciate it if someone could suggest how to improve the codes.

Thanks,
Bhaskar

	[[alternative HTML version deleted]]


From b|p|@bn1 @end|ng |rom gm@||@com  Tue Jun  8 19:00:04 2021
From: b|p|@bn1 @end|ng |rom gm@||@com (Biplab Nayak)
Date: Tue, 8 Jun 2021 14:00:04 -0300
Subject: [R] 
 Need help to fix the max date filter problem in the date input
In-Reply-To: <CAGxFJbRv7n4ZU2Ya9UnmKAJ8HKZbWGmK3XY_Nh0z-+EuP=c-2A@mail.gmail.com>
References: <CANwr6KaRsZ8sd-Ezu4xOeAUW06XYr7A2zTPiqquX27Zayi-prg@mail.gmail.com>
 <94b1c6ef-0f86-0171-bf0d-8676d16c4ff3@sapo.pt>
 <CANwr6Kb2-zxVZMzj8_D3eqX1h+QqfLkrk_9ghxhoqMxz566DPA@mail.gmail.com>
 <525970c1-538a-79b9-fa36-14dad7aea31d@sapo.pt>
 <CANwr6KZKsbPri4Ns7y94JmvMGEYbQGggFAcqPJTHjwpiMgk3Vw@mail.gmail.com>
 <CAGxFJbRv7n4ZU2Ya9UnmKAJ8HKZbWGmK3XY_Nh0z-+EuP=c-2A@mail.gmail.com>
Message-ID: <CANwr6KY+fc6d9EhjPvpDgc_eFXKGn3TzQpWNgWB2koj_25ot-w@mail.gmail.com>

Hi Bert,

I have attached the word file with the R code.

Thanks & Regards
Biplab Nayak

On Tue, Jun 8, 2021 at 1:07 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> I do not wish to be involved in this thread other than to note that you
> were, I believe, asked not to post in HTML. And because you did, you will
> find that "Bold" highlighting does not exist in your text below. I have no
> idea whether that matters for your query or not, but there it is.
>
>
> Bert Gunter
>
>
>
> On Tue, Jun 8, 2021 at 8:13 AM Biplab Nayak <biplabn1 at gmail.com> wrote:
>
>> Hi Rui,
>>
>> Please find the code(bold) below I was trying to do to achieve the
>> achieve:But somehow its not working.
>> 1.Order assessment based on the latest due date so select input
>> automatically show the order of assessment name.
>> 2.Filter based on the one name or multiple names in the  select input
>>
>> library(tidyverse)
>> #library(stringr)    # attached with tidyverse
>> #library(readr)
>> library(shiny)
>> library(dplyr)
>>
>> ttclasses <- read_csv("~/tmp/ttclasses.csv")
>>
>> #Filter data
>> ttclasses <-ttclasses %>%
>>    filter(str_detect(assessment, "Assignment"))
>>
>> # With the attached data this filter
>> # removes all rows so I have
>> # commented it out
>>
>>
>> *ttclasses <-ttclasses %>%  filter(str_detect(name, "Name"))*
>> ##Remove NA values.
>> ttclasses <-ttclasses %>% drop_na("score")
>>
>> *## Sort  assessment based on max due_date*
>> *  ttclasses  <- ttclasses [order( - due_date, assessment ),]*
>>
>> #Convert to factor
>> ttclasses$assessment <- factor(ttclasses$assessment)
>>
>> # please see the formats in help("strptime")
>> ttclasses$due_date <-  as.Date(ttclasses$due_date, format = "%m/%d/%y")
>> *ttclasses$name <- factor(ttclasses$name)*
>>
>> # Define UI ----
>> ui <- fluidPage(
>>
>>    # App title ----
>>    titlePanel("Assessment Dashboard"),
>>
>>    # Sidebar layout with input and output definitions ----
>>    sidebarLayout(
>>
>>      # Sidebar panel for inputs ----
>>      sidebarPanel(
>>
>>        # Input: Selector for variable to plot the grades for the selected
>>        # assignment ----
>>
>>          selectInput("assessment", "Assessment:",
>>                      c("Assignment 1" = "Assignment 1",
>>                        "Assignment 2" = "Assignment 2",
>>                        "Assignment 3" = "Assignment 3",
>>                        "Assignment 4" = "Assignment 4",
>>                        "Assignment 5" = "Assignment 5")),
>>        selectInput("name", "Name:",
>>                    ttclasses[,2]),
>>
>>        dateRangeInput("due_date",
>>                       "Due-Date:",start = max(ttclasses$due_date) ,
>>                       separator = " - ")
>>      ),
>>
>>      # Main panel for displaying outputs ----
>>      mainPanel(
>>
>>        # Output: Plot of the requested variable against grade ----
>>        plotOutput("gradePlot")
>>
>>      )
>>    )
>> )
>>
>> # Define server logic to plot  ----
>> server <- function(input, output) {
>>    output$gradePlot <- renderPlot({
>>      grade_ad = input$assessment
>>      boxplot(ttclasses$score[ttclasses$assessment==grade_ad],
>>              frame.plot=FALSE, horizontal=TRUE, col="magenta",
>> main=grade_ad)
>>      ttclasses <-ttclasses %>%
>>        filter(ttclasses$due_date >= input$due_date[1] & ttclasses$due_date
>>               <= input$due_date[2])
>>    })
>> }
>>
>> # Create Shiny app ----
>> shinyApp(ui, server)
>>
>>
>> Thanks & Regards
>> Biplab Nayak
>>
>> On Tue, Jun 8, 2021 at 7:08 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:
>>
>> > Hello,
>> >
>> > Please cc the list.
>> > R-Help is not a code writing service, it's a mailing list for doubts on
>> > R code. I'm sorry but without answers to the below questions I am not
>> > going to answer.
>> >
>> >
>> > What have you tried? What went wrong?
>> >
>> >
>> > Hope this helps,
>> >
>> > Rui Barradas
>> >
>> > ?s 04:01 de 08/06/21, Biplab Nayak escreveu:
>> > > Hi Rui,
>> > >
>> > > It's working fine. Now I need to achieve the following:
>> > >
>> > > * Default view of most recent distributions by most recent assignment
>> > > due date
>> > >
>> > > * Filter by one or more students
>> > >
>> > > Please help
>> > >
>> > > Thanks & Regards
>> > > Biplab Nayak
>> > >
>> > > On Mon, Jun 7, 2021 at 6:51 PM Rui Barradas <ruipbarradas at sapo.pt
>> > > <mailto:ruipbarradas at sapo.pt>> wrote:
>> > >
>> > >     Hello,
>> > >
>> > >     Thanks for the data.
>> > >     There were some, not many, bugs that I have corrected below.
>> > >
>> > >
>> > >
>> > >     library(tidyverse)
>> > >     #library(stringr)    # attached with tidyverse
>> > >     #library(readr)
>> > >     library(shiny)
>> > >
>> > >     ttclasses <- read_csv("~/tmp/ttclasses.csv")
>> > >
>> > >     #Filter data
>> > >     ttclasses <-ttclasses %>%
>> > >         filter(str_detect(assessment, "Assignment"))
>> > >
>> > >     # With the attached data this filter
>> > >     # removes all rows so I have
>> > >     # commented it out
>> > >     #ttclasses <-ttclasses %>%
>> > >     #  filter(str_detect(name, "Name"))
>> > >
>> > >     ##Remove NA values.
>> > >     ttclasses <-ttclasses %>% drop_na("score")
>> > >
>> > >     #Convert to factor
>> > >     ttclasses$assessment <- factor(ttclasses$assessment)
>> > >
>> > >     # please see the formats in help("strptime")
>> > >     ttclasses$due_date <-  as.Date(ttclasses$due_date, format =
>> > "%m/%d/%y")
>> > >     ##ttclasses$name <- factor(ttclasses$name)
>> > >
>> > >     # Define UI ----
>> > >     ui <- fluidPage(
>> > >
>> > >         # App title ----
>> > >         titlePanel("Assessment Dashboard"),
>> > >
>> > >         # Sidebar layout with input and output definitions ----
>> > >         sidebarLayout(
>> > >
>> > >           # Sidebar panel for inputs ----
>> > >           sidebarPanel(
>> > >
>> > >             # Input: Selector for variable to plot the grades for the
>> > >     selected
>> > >             # assignment ----
>> > >               selectInput("assessment", "Assessment:",
>> > >                           c("Assignment 1" = "Assignment 1",
>> > >                             "Assignment 2" = "Assignment 2",
>> > >                             "Assignment 3" = "Assignment 3",
>> > >                             "Assignment 4" = "Assignment 4",
>> > >                             "Assignment 5" = "Assignment 5")),
>> > >             selectInput("name", "Name:",
>> > >                         ttclasses[,2]),
>> > >
>> > >             dateRangeInput("due_date",
>> > >                            "Due-Date:",start =
>> max(ttclasses$due_date) ,
>> > >                            separator = " - ")
>> > >           ),
>> > >
>> > >           # Main panel for displaying outputs ----
>> > >           mainPanel(
>> > >
>> > >             # Output: Plot of the requested variable against grade
>> ----
>> > >             plotOutput("gradePlot")
>> > >
>> > >           )
>> > >         )
>> > >     )
>> > >
>> > >     # Define server logic to plot  ----
>> > >     server <- function(input, output) {
>> > >         output$gradePlot <- renderPlot({
>> > >           grade_ad = input$assessment
>> > >           boxplot(ttclasses$score[ttclasses$assessment==grade_ad],
>> > >                   frame.plot=FALSE, horizontal=TRUE, col="magenta",
>> > >     main=grade_ad)
>> > >           ttclasses <-ttclasses %>%
>> > >             filter(ttclasses$due_date >= input$due_date[1] &
>> > >     ttclasses$due_date
>> > >                    <= input$due_date[2])
>> > >         })
>> > >     }
>> > >
>> > >     # Create Shiny app ----
>> > >     shinyApp(ui, server)
>> > >
>> > >
>> > >
>> > >     Hope this helps,
>> > >
>> > >     Rui Barradas
>> > >
>> > >     ?s 18:03 de 07/06/21, Biplab Nayak escreveu:
>> > >      > Hi All,
>> > >      > I Need a bit of help to fix the code.
>> > >      > Code:
>> > >      > library(readr)
>> > >      > library(shiny)
>> > >      > ttclasses <- read_csv("ttclasses.csv")
>> > >      >
>> > >      > #Filter data
>> > >      > library(stringr)
>> > >      > library(dplyr)
>> > >      > ttclasses <-ttclasses %>%
>> > >      >    filter(str_detect(assessment, "Assignment"))
>> > >      > ttclasses <-ttclasses %>%
>> > >      >    filter(str_detect(name, "Name"))
>> > >      >
>> > >      > ##Remove NA values.
>> > >      > library(tidyverse)
>> > >      > ttclasses <-ttclasses %>% drop_na("score")
>> > >      >
>> > >      > #Convert to factor
>> > >      > ttclasses$assessment <- as.factor(ttclasses$assessment)
>> > >      > ttclasses$due_date =  as.Date(ttclasses$due_date, format =
>> > >     "mm/dd/yy")
>> > >      > ##ttclasses$name <- as.factor(ttclasses$name)
>> > >      >
>> > >      > # Define UI ----
>> > >      > ui <- fluidPage(
>> > >      >
>> > >      >    # App title ----
>> > >      >    titlePanel("Assessment Dashboard"),
>> > >      >
>> > >      >    # Sidebar layout with input and output definitions ----
>> > >      >    sidebarLayout(
>> > >      >
>> > >      >      # Sidebar panel for inputs ----
>> > >      >      sidebarPanel(
>> > >      >
>> > >      >        # Input: Selector for variable to plot the grades for
>> the
>> > >     selected
>> > >      > assignment ----
>> > >      >        selectInput("assessment", "Assessment:",
>> > >      >                    c("Assignment 1" = "Assignment 1",
>> > >      >                      "Assignment 2" = "Assignment 2",
>> > >      >                      "Assignment 3" = "Assignment 3",
>> > >      >                      "Assignment 4" = "Assignment 4",
>> > >      >                      "Assignment 5" = "Assignment 5")),
>> > >      >        selectInput("name", "Name:",
>> > >      >                    ttclasses[,2]),
>> > >      >
>> > >      >      dateRangeInput("due_date",
>> > >      >                     "Due-Date:",start =
>> max(ttclasses$due_date) ,
>> > >      >                     separator = " - ")
>> > >      >      ),
>> > >      >
>> > >      >      # Main panel for displaying outputs ----
>> > >      >      mainPanel(
>> > >      >
>> > >      >        # Output: Plot of the requested variable against grade
>> ----
>> > >      >        plotOutput("gradePlot")
>> > >      >
>> > >      >      )
>> > >      >    )
>> > >      > )
>> > >      >
>> > >      > # Define server logic to plot  ----
>> > >      > server <- function(input, output) {
>> > >      >      output$gradePlot <- renderPlot({
>> > >      >      grade_ad = input$assessment
>> > >      >      boxplot(ttclasses$score[ttclasses$assessment==grade_ad],
>> > >      > frame.plot=FALSE, horizontal=TRUE, col="magenta",
>> main=grade_ad)
>> > >      >      ttclasses <-ttclasses %>%
>> > >      >        filter(ttclasses$due_date >= input$due_date[1] &
>> > >     ttclasses$due_date
>> > >      > <= input$due_date[2])
>> > >      >    })
>> > >      > }
>> > >      >
>> > >      > # Create Shiny app ----
>> > >      > shinyApp(ui, server)
>> > >      >
>> > >      > Thanks & Regards
>> > >      >
>> > >      >       [[alternative HTML version deleted]]
>> > >      >
>> > >      > ______________________________________________
>> > >      > R-help at r-project.org <mailto:R-help at r-project.org> mailing
>> list
>> > >     -- To UNSUBSCRIBE and more, see
>> > >      > https://stat.ethz.ch/mailman/listinfo/r-help
>> > >     <https://stat.ethz.ch/mailman/listinfo/r-help>
>> > >      > PLEASE do read the posting guide
>> > >     http://www.R-project.org/posting-guide.html
>> > >     <http://www.R-project.org/posting-guide.html>
>> > >      > and provide commented, minimal, self-contained, reproducible
>> code.
>> > >      >
>> > >
>> >
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

From drj|m|emon @end|ng |rom gm@||@com  Wed Jun  9 00:39:44 2021
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Wed, 9 Jun 2021 08:39:44 +1000
Subject: [R] Converting data from weekly interval to daily interval
In-Reply-To: <CAEGXkYVcVm5VWQ0B-veQcXZcSKt+1A2RUJMJ=wh+LPrcO7LUBw@mail.gmail.com>
References: <CAEGXkYVcVm5VWQ0B-veQcXZcSKt+1A2RUJMJ=wh+LPrcO7LUBw@mail.gmail.com>
Message-ID: <CA+8X3fX2yNUvoNX+GBY197OJp8hX48rkB0g55KPDnCpo5VdoHA@mail.gmail.com>

Hi Bhaskar,
Perhaps you are looking for this:

approx(c(3,6,7),n=21)
$x
[1] 1.0 1.1 1.2 1.3 1.4 1.5 1.6 1.7 1.8 1.9 2.0 2.1 2.2 2.3 2.4 2.5 2.6 2.7
2.8
[20] 2.9 3.0

$y
[1] 3.0 3.3 3.6 3.9 4.2 4.5 4.8 5.1 5.4 5.7 6.0 6.1 6.2 6.3 6.4 6.5 6.6 6.7
6.8
[20] 6.9 7.0


This assumes that you are taking each value as a snapshot reading
rather than a cumulation of the values.

Jim

On Wed, Jun 9, 2021 at 4:33 AM Bhaskar Mitra <bhaskar.kolkata at gmail.com> wrote:
>
> Hello Everyone,
>
> I have data at weekly intervals.
> The data structure is something like this.
>
> df1 <-
> date            a
> 1/7/2020     3
> 1/14/2020   6
> 1/21/2021   7
>
> I would like to convert the data from the weekly
> interval to the daily interval. Something like this.
>
> date            a
> 1/7/2020    0.5
> 1/8/2020    0.3
> 1/9/2020    0.7
>
>
> I am using the following codes
>
> d1 <- nrow(df1)
>
> df2 <- data.frame(matrix(NA, nrow = (d1)*7, ncol = 1)
>
> inc <- 0
> for (i in 1:nrow(df1)) {
>   for (j in 1:7) {
>     inc <- inc + 1
>     df2[inc,1] <- df1[i,1]/7
>   }
> }
> rm(df1)
>
>
>
> However, the sum of the daily values generated in df2 differ
> from the original value in the df1 data frame. There is a 1-2% discrepancy.
> I would appreciate it if someone could suggest how to improve the codes.
>
> Thanks,
> Bhaskar
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From re|chm@nj @end|ng |rom @bcg|ob@|@net  Wed Jun  9 01:42:58 2021
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Tue, 8 Jun 2021 18:42:58 -0500
Subject: [R] Read fst files
References: <00f801d75cc0$036ed3b0$0a4c7b10$.ref@sbcglobal.net>
Message-ID: <00f801d75cc0$036ed3b0$0a4c7b10$@sbcglobal.net>

R-Help Forum

 

Anyone know why the following line of code would error out:  myObject <-
read_fst(unz("Dataset.zip", filename = "filename.fst"))

 

Error: Incomplete expression: filename <- read_fst(unz("Dataset.zip",
filename = "filename.fst") 

 

I often use similar code with *.csv files in a zipped folder. For example:
myObject <- read.csv(unz("Dataset.zip", filename = "filename.csv")), which
works just fine.

 

Jeff Reichman

 


	[[alternative HTML version deleted]]


From m|n@h@|| @end|ng |rom um|ch@edu  Wed Jun  9 04:30:43 2021
From: m|n@h@|| @end|ng |rom um|ch@edu (Greg Minshall)
Date: Wed, 09 Jun 2021 05:30:43 +0300
Subject: [R] Converting data from weekly interval to daily interval
In-Reply-To: Your message of "Tue, 08 Jun 2021 11:10:13 -0700."
 <CAEGXkYVcVm5VWQ0B-veQcXZcSKt+1A2RUJMJ=wh+LPrcO7LUBw@mail.gmail.com>
Message-ID: <663510.1623205843@apollo2.minshall.org>

Bhaskar,

not your main question, but ...

given that you have column names, you might think of

:     df2[inc,"date"] <- df1[i,"date"]/7
or
:     df2[inc,]$date <- df1[i,]$date/7

i.e., using your column names instead of numeric indices.

then, also, instead of a for loop, possibly you can use R's nicely
vectorized operations.  i.e., something like

: df2$date <- df2$date/7

nb: i haven't tried to run the above code, so no guarantees.

(again, if i've typed that correctly -- i haven't tested -- you will end
up with the same answers you *don't* want, but maybe more
idiomatically.)

cheers, Greg


From m|n@h@|| @end|ng |rom um|ch@edu  Wed Jun  9 05:14:55 2021
From: m|n@h@|| @end|ng |rom um|ch@edu (Greg Minshall)
Date: Wed, 09 Jun 2021 06:14:55 +0300
Subject: [R] 
 Need help to fix the max date filter problem in the date input
In-Reply-To: Your message of "Tue, 08 Jun 2021 14:00:04 -0300."
 <CANwr6KY+fc6d9EhjPvpDgc_eFXKGn3TzQpWNgWB2koj_25ot-w@mail.gmail.com>
Message-ID: <668653.1623208495@apollo2.minshall.org>

Biplab,

i'm not sure how to help you here, but this list pretty much runs on
plain ASCII (or, these days, utf-8) e-mail.  for the most part, without
attachments.  so, simply-formatted text, including code, with some
mechanism in the code to initialize any data structures (data frames,
matrices, etc.) needed for the example.

some of this is described in the posting guide
----
https://www.r-project.org/posting-guide.html
----

formatting your e-mail in this way will likely increase your odds of a
helpful reply.

cheers, Greg


From m|n@h@|| @end|ng |rom um|ch@edu  Wed Jun  9 05:28:34 2021
From: m|n@h@|| @end|ng |rom um|ch@edu (Greg Minshall)
Date: Wed, 09 Jun 2021 06:28:34 +0300
Subject: [R] Beginner problem - using mod function to print odd numbers
In-Reply-To: Your message of "Sat, 05 Jun 2021 12:26:13 -0700."
 <CAGxFJbTJVqW3L1hBALBF5L4C+7c9u=j=V-4wA-yxJSgF+5uRbA@mail.gmail.com>
Message-ID: <670333.1623209314@apollo2.minshall.org>

> Two of R's central features as a "data science" language are that many of
> its core capabilities are "vectorized" -- can calculate on whole objects
> (at the user-visible interpreter level) rather than requiring explicit
> loops; and that it can use object indexing in several different modalities,
> here logical indexing, for extraction and replacement in whole objects such
> as vectors and matrices. Not only does this typically yield simpler, more
> readable code (admittedly, a subjective judgment), but it is also typically
> much faster, though I grant you that this can often be overrated.

i sort of wanted to circle back to this.

i learned FORTRAN IV in 1968 (and the last FORTRAN program i wrote was
at least 50 years ago), and i *still* write FORTRAN code, even when
writing lisp, or R, or awk scripts.  it's *very* hard for me to adapt to
other styles.

so, for that reason, i think it is very useful to help people understand
and adjust to R's vector operations.

maybe a way to say it might be "here is how you will get better
performance, using R's vector operations..." and, then, "however, if you
find it simpler, and the performance acceptable, you could do a 'for'
loop like this...".  (though, as this is all volunteer effort, one
obviously takes what one gets.)  but, i do think that helping newer
users understand how to write efficient code is important.

anyway, just my two cents.

cheers, Greg


From er|cjberger @end|ng |rom gm@||@com  Wed Jun  9 10:49:42 2021
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Wed, 9 Jun 2021 11:49:42 +0300
Subject: [R] Read fst files
In-Reply-To: <00f801d75cc0$036ed3b0$0a4c7b10$@sbcglobal.net>
References: <00f801d75cc0$036ed3b0$0a4c7b10$.ref@sbcglobal.net>
 <00f801d75cc0$036ed3b0$0a4c7b10$@sbcglobal.net>
Message-ID: <CAGgJW77E5DN2wRbmVoixKmz6ZWcuCcAcjnzc6O4cOecD3xBjPg@mail.gmail.com>

You are missing the second closing parenthesis. This is what the error
message is telling you.


On Wed, Jun 9, 2021 at 2:44 AM Jeff Reichman <reichmanj at sbcglobal.net>
wrote:

> R-Help Forum
>
>
>
> Anyone know why the following line of code would error out:  myObject <-
> read_fst(unz("Dataset.zip", filename = "filename.fst"))
>
>
>
> Error: Incomplete expression: filename <- read_fst(unz("Dataset.zip",
> filename = "filename.fst")
>
>
>
> I often use similar code with *.csv files in a zipped folder. For example:
> myObject <- read.csv(unz("Dataset.zip", filename = "filename.csv")), which
> works just fine.
>
>
>
> Jeff Reichman
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Wed Jun  9 11:55:40 2021
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Wed, 9 Jun 2021 11:55:40 +0200
Subject: [R] Beginner problem - using mod function to print odd numbers
In-Reply-To: <CAE-dL2onx4GK4YtBgPH_nYRy28wx_1EteYvUK7r9KC9A56y+XA@mail.gmail.com>
References: <1622657870092-0.post-5018@n4.nabble.com>
 <A1013F52-3C4D-4BAE-B058-6E7E9FAF9D6C@collocations.de>
 <CAA99HCxUROK8_Lm+cYqBVH6AemB_btfRtAZVUtOiMESdSZaxgw@mail.gmail.com>
 <CAE-dL2onx4GK4YtBgPH_nYRy28wx_1EteYvUK7r9KC9A56y+XA@mail.gmail.com>
Message-ID: <24768.36892.831829.846776@stat.math.ethz.ch>

>>>>> David Carlson    on Sun, 6 Jun 2021 15:21:34 -0400 writes:

> There is really no need for a loop:
> num <- 1:100
> num[ifelse(num %% 2 == 1, TRUE, FALSE)]

> [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43 45 47 49
> [26] 51 53 55 57 59 61 63 65 67 69 71 73 75 77 79 81 83 85 87 89 91 93 95 97 99

Well, and the above "works" but is really another proof of my
year-long claim that people use  ifelse(.)  *MUCH MUCH* too often,
and should really learn to use alternatives, in this case,
"R 101" (*long* before fooverse):

Use

    num[num %% 2 == 1]

instead of much slower and ...@#^$

    num[ifelse(num %% 2 == 1, TRUE, FALSE)]

Martin Maechler
ETH Zurich 

> On Sat, Jun 5, 2021 at 2:05 PM William Michels via R-help
> <r-help at r-project.org> wrote:
    >> 
    >> > i <- 1L; span <- 1:100; result <- NA;
    >> > for (i in span){
    >> + ifelse(i %% 2 != 0, result[i] <- TRUE, result[i] <- FALSE)
    >> + }
    >> > span[result]
    >> [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43

 [............]


From er|cjberger @end|ng |rom gm@||@com  Wed Jun  9 12:13:49 2021
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Wed, 9 Jun 2021 13:13:49 +0300
Subject: [R] Beginner problem - using mod function to print odd numbers
In-Reply-To: <24768.36892.831829.846776@stat.math.ethz.ch>
References: <1622657870092-0.post-5018@n4.nabble.com>
 <A1013F52-3C4D-4BAE-B058-6E7E9FAF9D6C@collocations.de>
 <CAA99HCxUROK8_Lm+cYqBVH6AemB_btfRtAZVUtOiMESdSZaxgw@mail.gmail.com>
 <CAE-dL2onx4GK4YtBgPH_nYRy28wx_1EteYvUK7r9KC9A56y+XA@mail.gmail.com>
 <24768.36892.831829.846776@stat.math.ethz.ch>
Message-ID: <CAGgJW77zfDqVkA08qW7QOW+DP1q+v658zL7=Ybh8Ft+qycf5Ew@mail.gmail.com>

It's also possible to save a character and gain the added advantage of
being less understandable :-)

num[!!num%%2]



On Wed, Jun 9, 2021 at 12:56 PM Martin Maechler <maechler at stat.math.ethz.ch>
wrote:

> >>>>> David Carlson    on Sun, 6 Jun 2021 15:21:34 -0400 writes:
>
> > There is really no need for a loop:
> > num <- 1:100
> > num[ifelse(num %% 2 == 1, TRUE, FALSE)]
>
> > [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43 45
> 47 49
> > [26] 51 53 55 57 59 61 63 65 67 69 71 73 75 77 79 81 83 85 87 89 91 93
> 95 97 99
>
> Well, and the above "works" but is really another proof of my
> year-long claim that people use  ifelse(.)  *MUCH MUCH* too often,
> and should really learn to use alternatives, in this case,
> "R 101" (*long* before fooverse):
>
> Use
>
>     num[num %% 2 == 1]
>
> instead of much slower and ...@#^$
>
>     num[ifelse(num %% 2 == 1, TRUE, FALSE)]
>
> Martin Maechler
> ETH Zurich
>
> > On Sat, Jun 5, 2021 at 2:05 PM William Michels via R-help
> > <r-help at r-project.org> wrote:
>     >>
>     >> > i <- 1L; span <- 1:100; result <- NA;
>     >> > for (i in span){
>     >> + ifelse(i %% 2 != 0, result[i] <- TRUE, result[i] <- FALSE)
>     >> + }
>     >> > span[result]
>     >> [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41
> 43
>
>  [............]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From re|chm@nj @end|ng |rom @bcg|ob@|@net  Wed Jun  9 14:18:40 2021
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Wed, 9 Jun 2021 07:18:40 -0500
Subject: [R] Read fst files
In-Reply-To: <CAGgJW77E5DN2wRbmVoixKmz6ZWcuCcAcjnzc6O4cOecD3xBjPg@mail.gmail.com>
References: <00f801d75cc0$036ed3b0$0a4c7b10$.ref@sbcglobal.net>
 <00f801d75cc0$036ed3b0$0a4c7b10$@sbcglobal.net>
 <CAGgJW77E5DN2wRbmVoixKmz6ZWcuCcAcjnzc6O4cOecD3xBjPg@mail.gmail.com>
Message-ID: <003d01d75d29$95b07210$c1115630$@sbcglobal.net>

Eric

 

Typo on my point. 

 

setwd("C:/Users/reichmaj/Documents/My_Reference_Library /Regression")

myObject <- read_fst(unz("Dataset.zip", filename = "myFile.fst")) # read fst file

 

Error in path.expand(path) : invalid 'path' argument

 

So then I tried

 

myObject <- read_fst(unz("C:/Users/reichmaj/Documents/My_Reference_Library /Regression /Dataset.zip", filename = "myFile.fst"))

 

Error in path.expand(path) : invalid 'path' argument

 

Error in the path??

 

Because this works just fine

 

myObject <- read.csv(unz("C:/Users/reichmaj/Documents/My_Reference_Library /Regression /Dataset.zip", filename = "myFile.csv"))

 

My only though is I can?t use the two function s together when dealing with fst files ??

 

From: Eric Berger <ericjberger at gmail.com> 
Sent: Wednesday, June 9, 2021 3:50 AM
To: reichmanj at sbcglobal.net
Cc: R mailing list <r-help at r-project.org>
Subject: Re: [R] Read fst files

 

You are missing the second closing parenthesis. This is what the error message is telling you.

 

 

On Wed, Jun 9, 2021 at 2:44 AM Jeff Reichman <reichmanj at sbcglobal.net <mailto:reichmanj at sbcglobal.net> > wrote:

R-Help Forum



Anyone know why the following line of code would error out:  myObject <-
read_fst(unz("Dataset.zip", filename = "filename.fst"))



Error: Incomplete expression: filename <- read_fst(unz("Dataset.zip",
filename = "filename.fst") 



I often use similar code with *.csv files in a zipped folder. For example:
myObject <- read.csv(unz("Dataset.zip", filename = "filename.csv")), which
works just fine.



Jeff Reichman




        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From er|cjberger @end|ng |rom gm@||@com  Wed Jun  9 14:22:27 2021
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Wed, 9 Jun 2021 15:22:27 +0300
Subject: [R] Read fst files
In-Reply-To: <003d01d75d29$95b07210$c1115630$@sbcglobal.net>
References: <00f801d75cc0$036ed3b0$0a4c7b10$.ref@sbcglobal.net>
 <00f801d75cc0$036ed3b0$0a4c7b10$@sbcglobal.net>
 <CAGgJW77E5DN2wRbmVoixKmz6ZWcuCcAcjnzc6O4cOecD3xBjPg@mail.gmail.com>
 <003d01d75d29$95b07210$c1115630$@sbcglobal.net>
Message-ID: <CAGgJW76mHPW7k=YA4RNLcVjwFWoiFCqZ-+vCYoBmnKCkHMHZCA@mail.gmail.com>

Even if ultimately you want to use the functions together, for debugging
the problem you should split them into two, as in

a <- unz("C:/Users/reichmaj/Documents/My_Reference_Library /Regression
/Dataset.zip", filename = "myFile.fst")
See if that works, and examine 'a'.

And once that is working

read_fst(a)

to see what that does.

Let us know.


On Wed, Jun 9, 2021 at 3:18 PM Jeff Reichman <reichmanj at sbcglobal.net>
wrote:

> Eric
>
>
>
> Typo on my point.
>
>
>
> setwd("C:/Users/reichmaj/Documents/My_Reference_Library /Regression")
>
> myObject <- read_fst(unz("Dataset.zip", filename = "myFile.fst")) # read
> fst file
>
>
>
> Error in path.expand(path) : invalid 'path' argument
>
>
>
> So then I tried
>
>
>
> myObject <- read_fst(unz("C:/Users/reichmaj/Documents/My_Reference_Library
> /Regression /Dataset.zip", filename = "myFile.fst"))
>
>
>
> Error in path.expand(path) : invalid 'path' argument
>
>
>
> Error in the path??
>
>
>
> Because this works just fine
>
>
>
> myObject <- read.csv(unz("C:/Users/reichmaj/Documents/My_Reference_Library
> /Regression /Dataset.zip", filename = "myFile.csv"))
>
>
>
> My only though is I can?t use the two function s together when dealing
> with fst files ??
>
>
>
> *From:* Eric Berger <ericjberger at gmail.com>
> *Sent:* Wednesday, June 9, 2021 3:50 AM
> *To:* reichmanj at sbcglobal.net
> *Cc:* R mailing list <r-help at r-project.org>
> *Subject:* Re: [R] Read fst files
>
>
>
> You are missing the second closing parenthesis. This is what the error
> message is telling you.
>
>
>
>
>
> On Wed, Jun 9, 2021 at 2:44 AM Jeff Reichman <reichmanj at sbcglobal.net>
> wrote:
>
> R-Help Forum
>
>
>
> Anyone know why the following line of code would error out:  myObject <-
> read_fst(unz("Dataset.zip", filename = "filename.fst"))
>
>
>
> Error: Incomplete expression: filename <- read_fst(unz("Dataset.zip",
> filename = "filename.fst")
>
>
>
> I often use similar code with *.csv files in a zipped folder. For example:
> myObject <- read.csv(unz("Dataset.zip", filename = "filename.csv")), which
> works just fine.
>
>
>
> Jeff Reichman
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Jun  9 14:26:42 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 9 Jun 2021 08:26:42 -0400
Subject: [R] Read fst files
In-Reply-To: <003d01d75d29$95b07210$c1115630$@sbcglobal.net>
References: <00f801d75cc0$036ed3b0$0a4c7b10$.ref@sbcglobal.net>
 <00f801d75cc0$036ed3b0$0a4c7b10$@sbcglobal.net>
 <CAGgJW77E5DN2wRbmVoixKmz6ZWcuCcAcjnzc6O4cOecD3xBjPg@mail.gmail.com>
 <003d01d75d29$95b07210$c1115630$@sbcglobal.net>
Message-ID: <dc1f6eee-cc65-ad67-8242-6f430290b604@gmail.com>

It looks as though read_fst wants a filename, not a connection.

You should do it in two steps:

  unzip("Dataset.zip", files = "myFile.fst")
  myObject <- read_fst("myFile.fst")

This is obviously untested; you didn't even say what package read_fst() 
comes from.

Duncan Murdoch

On 09/06/2021 8:18 a.m., Jeff Reichman wrote:
> Eric
> 
>   
> 
> Typo on my point.
> 
>   
> 
> setwd("C:/Users/reichmaj/Documents/My_Reference_Library /Regression")
> 
> myObject <- read_fst(unz("Dataset.zip", filename = "myFile.fst")) # read fst file
> 
>   
> 
> Error in path.expand(path) : invalid 'path' argument
> 
>   
> 
> So then I tried
> 
>   
> 
> myObject <- read_fst(unz("C:/Users/reichmaj/Documents/My_Reference_Library /Regression /Dataset.zip", filename = "myFile.fst"))
> 
>   
> 
> Error in path.expand(path) : invalid 'path' argument
> 
>   
> 
> Error in the path??
> 
>   
> 
> Because this works just fine
> 
>   
> 
> myObject <- read.csv(unz("C:/Users/reichmaj/Documents/My_Reference_Library /Regression /Dataset.zip", filename = "myFile.csv"))
> 
>   
> 
> My only though is I can?t use the two function s together when dealing with fst files ??
> 
>   
> 
> From: Eric Berger <ericjberger at gmail.com>
> Sent: Wednesday, June 9, 2021 3:50 AM
> To: reichmanj at sbcglobal.net
> Cc: R mailing list <r-help at r-project.org>
> Subject: Re: [R] Read fst files
> 
>   
> 
> You are missing the second closing parenthesis. This is what the error message is telling you.
> 
>   
> 
>   
> 
> On Wed, Jun 9, 2021 at 2:44 AM Jeff Reichman <reichmanj at sbcglobal.net <mailto:reichmanj at sbcglobal.net> > wrote:
> 
> R-Help Forum
> 
> 
> 
> Anyone know why the following line of code would error out:  myObject <-
> read_fst(unz("Dataset.zip", filename = "filename.fst"))
> 
> 
> 
> Error: Incomplete expression: filename <- read_fst(unz("Dataset.zip",
> filename = "filename.fst")
> 
> 
> 
> I often use similar code with *.csv files in a zipped folder. For example:
> myObject <- read.csv(unz("Dataset.zip", filename = "filename.csv")), which
> works just fine.
> 
> 
> 
> Jeff Reichman
> 
> 
> 
> 
>          [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From re|chm@nj @end|ng |rom @bcg|ob@|@net  Wed Jun  9 15:12:37 2021
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Wed, 9 Jun 2021 08:12:37 -0500
Subject: [R] Read fst files
In-Reply-To: <dc1f6eee-cc65-ad67-8242-6f430290b604@gmail.com>
References: <00f801d75cc0$036ed3b0$0a4c7b10$.ref@sbcglobal.net>
 <00f801d75cc0$036ed3b0$0a4c7b10$@sbcglobal.net>
 <CAGgJW77E5DN2wRbmVoixKmz6ZWcuCcAcjnzc6O4cOecD3xBjPg@mail.gmail.com>
 <003d01d75d29$95b07210$c1115630$@sbcglobal.net>
 <dc1f6eee-cc65-ad67-8242-6f430290b604@gmail.com>
Message-ID: <005d01d75d31$1ebecb40$5c3c61c0$@sbcglobal.net>

Duncan

Yea that will work. It appears to be related to setting my working dir, for what ever reason neither seem to work
(1) knitr::opts_knit$set(root.dir ="~/My_Reference_Library/Regression") # from R Notebook or
(2) setwd("C:/Users/reichmaj/Documents/My_Reference_Library/Regression") # from R chunk

So it appears I can either (as you suggested) use two steps or combine but I need to enter the full path. Why other file types don't seem to need the full path ....?????

myObject <- read_fst(unz("C:/Users/reichmaj/Documents/My_Reference_Library/Regression/Datasest.zip", filename = "myFile.fst"))

Thank you. I guess just one of those R things

Jeff



-----Original Message-----
From: Duncan Murdoch <murdoch.duncan at gmail.com> 
Sent: Wednesday, June 9, 2021 7:27 AM
To: reichmanj at sbcglobal.net; 'Eric Berger' <ericjberger at gmail.com>
Cc: 'R mailing list' <r-help at r-project.org>
Subject: Re: [R] Read fst files

It looks as though read_fst wants a filename, not a connection.

You should do it in two steps:

  unzip("Dataset.zip", files = "myFile.fst")
  myObject <- read_fst("myFile.fst")

This is obviously untested; you didn't even say what package read_fst() comes from.

Duncan Murdoch

On 09/06/2021 8:18 a.m., Jeff Reichman wrote:
> Eric
> 
>   
> 
> Typo on my point.
> 
>   
> 
> setwd("C:/Users/reichmaj/Documents/My_Reference_Library /Regression")
> 
> myObject <- read_fst(unz("Dataset.zip", filename = "myFile.fst")) # 
> read fst file
> 
>   
> 
> Error in path.expand(path) : invalid 'path' argument
> 
>   
> 
> So then I tried
> 
>   
> 
> myObject <- 
> read_fst(unz("C:/Users/reichmaj/Documents/My_Reference_Library 
> /Regression /Dataset.zip", filename = "myFile.fst"))
> 
>   
> 
> Error in path.expand(path) : invalid 'path' argument
> 
>   
> 
> Error in the path??
> 
>   
> 
> Because this works just fine
> 
>   
> 
> myObject <- 
> read.csv(unz("C:/Users/reichmaj/Documents/My_Reference_Library 
> /Regression /Dataset.zip", filename = "myFile.csv"))
> 
>   
> 
> My only though is I can?t use the two function s together when dealing with fst files ??
> 
>   
> 
> From: Eric Berger <ericjberger at gmail.com>
> Sent: Wednesday, June 9, 2021 3:50 AM
> To: reichmanj at sbcglobal.net
> Cc: R mailing list <r-help at r-project.org>
> Subject: Re: [R] Read fst files
> 
>   
> 
> You are missing the second closing parenthesis. This is what the error message is telling you.
> 
>   
> 
>   
> 
> On Wed, Jun 9, 2021 at 2:44 AM Jeff Reichman <reichmanj at sbcglobal.net <mailto:reichmanj at sbcglobal.net> > wrote:
> 
> R-Help Forum
> 
> 
> 
> Anyone know why the following line of code would error out:  myObject 
> <- read_fst(unz("Dataset.zip", filename = "filename.fst"))
> 
> 
> 
> Error: Incomplete expression: filename <- read_fst(unz("Dataset.zip", 
> filename = "filename.fst")
> 
> 
> 
> I often use similar code with *.csv files in a zipped folder. For example:
> myObject <- read.csv(unz("Dataset.zip", filename = "filename.csv")), 
> which works just fine.
> 
> 
> 
> Jeff Reichman
> 
> 
> 
> 
>          [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To 
> UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Jun  9 15:28:47 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 9 Jun 2021 09:28:47 -0400
Subject: [R] Read fst files
In-Reply-To: <005d01d75d31$1ebecb40$5c3c61c0$@sbcglobal.net>
References: <00f801d75cc0$036ed3b0$0a4c7b10$.ref@sbcglobal.net>
 <00f801d75cc0$036ed3b0$0a4c7b10$@sbcglobal.net>
 <CAGgJW77E5DN2wRbmVoixKmz6ZWcuCcAcjnzc6O4cOecD3xBjPg@mail.gmail.com>
 <003d01d75d29$95b07210$c1115630$@sbcglobal.net>
 <dc1f6eee-cc65-ad67-8242-6f430290b604@gmail.com>
 <005d01d75d31$1ebecb40$5c3c61c0$@sbcglobal.net>
Message-ID: <e177ef63-a910-c1a7-ed5b-a1f4907f5769@gmail.com>

On 09/06/2021 9:12 a.m., Jeff Reichman wrote:
> Duncan
> 
> Yea that will work. It appears to be related to setting my working dir, for what ever reason neither seem to work
> (1) knitr::opts_knit$set(root.dir ="~/My_Reference_Library/Regression") # from R Notebook or
> (2) setwd("C:/Users/reichmaj/Documents/My_Reference_Library/Regression") # from R chunk
> 
> So it appears I can either (as you suggested) use two steps or combine but I need to enter the full path. Why other file types don't seem to need the full path ....?????

You need to read the documentation for read_fst() to find what it needs. 
  If it doesn't explain this, then you should report the issue to its 
author.

> 
> myObject <- read_fst(unz("C:/Users/reichmaj/Documents/My_Reference_Library/Regression/Datasest.zip", filename = "myFile.fst"))
> 
> Thank you. I guess just one of those R things

No, it's a read_fst() thing.

Duncan Murdoch


From w||||@mwdun|@p @end|ng |rom gm@||@com  Wed Jun  9 16:35:39 2021
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Wed, 9 Jun 2021 07:35:39 -0700
Subject: [R] Beginner problem - using mod function to print odd numbers
In-Reply-To: <24768.36892.831829.846776@stat.math.ethz.ch>
References: <1622657870092-0.post-5018@n4.nabble.com>
 <A1013F52-3C4D-4BAE-B058-6E7E9FAF9D6C@collocations.de>
 <CAA99HCxUROK8_Lm+cYqBVH6AemB_btfRtAZVUtOiMESdSZaxgw@mail.gmail.com>
 <CAE-dL2onx4GK4YtBgPH_nYRy28wx_1EteYvUK7r9KC9A56y+XA@mail.gmail.com>
 <24768.36892.831829.846776@stat.math.ethz.ch>
Message-ID: <CAHqSRuS5tOjb9M4OFe50r3e+d-7tQkmP3-RVdOz3uZ3=k62DEw@mail.gmail.com>

Martin wrote
  Use
      num[num %% 2 == 1]
  instead of much slower and ...@#^$
      num[ifelse(num %% 2 == 1, TRUE, FALSE)]

Read the '[' as 'such that' when the subscript is logical
(=="Boolean"==TRUE/FALSE-values).

[The original post had a typo/thinko, num<-num+i instead of num<-num+1,
which was simply an error, not a matter of style.  R's vectorization makes
it easy to avoid such errors.]

-Bill

On Wed, Jun 9, 2021 at 2:56 AM Martin Maechler <maechler at stat.math.ethz.ch>
wrote:

> >>>>> David Carlson    on Sun, 6 Jun 2021 15:21:34 -0400 writes:
>
> > There is really no need for a loop:
> > num <- 1:100
> > num[ifelse(num %% 2 == 1, TRUE, FALSE)]
>
> > [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43 45
> 47 49
> > [26] 51 53 55 57 59 61 63 65 67 69 71 73 75 77 79 81 83 85 87 89 91 93
> 95 97 99
>
> Well, and the above "works" but is really another proof of my
> year-long claim that people use  ifelse(.)  *MUCH MUCH* too often,
> and should really learn to use alternatives, in this case,
> "R 101" (*long* before fooverse):
>
> Use
>
>     num[num %% 2 == 1]
>
> instead of much slower and ...@#^$
>
>     num[ifelse(num %% 2 == 1, TRUE, FALSE)]
>
> Martin Maechler
> ETH Zurich
>
> > On Sat, Jun 5, 2021 at 2:05 PM William Michels via R-help
> > <r-help at r-project.org> wrote:
>     >>
>     >> > i <- 1L; span <- 1:100; result <- NA;
>     >> > for (i in span){
>     >> + ifelse(i %% 2 != 0, result[i] <- TRUE, result[i] <- FALSE)
>     >> + }
>     >> > span[result]
>     >> [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41
> 43
>
>  [............]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From rhe|p @end|ng |rom eoo@@dd@@n|  Wed Jun  9 19:55:56 2021
From: rhe|p @end|ng |rom eoo@@dd@@n| (Jan van der Laan)
Date: Wed, 9 Jun 2021 19:55:56 +0200
Subject: [R] Read fst files
In-Reply-To: <e177ef63-a910-c1a7-ed5b-a1f4907f5769@gmail.com>
References: <00f801d75cc0$036ed3b0$0a4c7b10$.ref@sbcglobal.net>
 <00f801d75cc0$036ed3b0$0a4c7b10$@sbcglobal.net>
 <CAGgJW77E5DN2wRbmVoixKmz6ZWcuCcAcjnzc6O4cOecD3xBjPg@mail.gmail.com>
 <003d01d75d29$95b07210$c1115630$@sbcglobal.net>
 <dc1f6eee-cc65-ad67-8242-6f430290b604@gmail.com>
 <005d01d75d31$1ebecb40$5c3c61c0$@sbcglobal.net>
 <e177ef63-a910-c1a7-ed5b-a1f4907f5769@gmail.com>
Message-ID: <e97f0373-6765-9ac1-10dd-4e01086a6693@eoos.dds.nl>



read_fst is from the package fst. The fileformat fst uses is a binary 
format designed to be fast readable. It is a column  oriented format and 
compressed. So, to be able to work fst needs access to the file itself 
and wont accept a file connection as functions like read.table an 
variants accept.

Also, because it is a binary compressed format using a compression 
method that is fast to read, compressing also to zip seems to defeat the 
purpose of fst.

HTH,
Jan


On 09-06-2021 15:28, Duncan Murdoch wrote:
> On 09/06/2021 9:12 a.m., Jeff Reichman wrote:
>> Duncan
>>
>> Yea that will work. It appears to be related to setting my working 
>> dir, for what ever reason neither seem to work
>> (1) knitr::opts_knit$set(root.dir 
>> ="~/My_Reference_Library/Regression") # from R Notebook or
>> (2) 
>> setwd("C:/Users/reichmaj/Documents/My_Reference_Library/Regression") # 
>> from R chunk
>>
>> So it appears I can either (as you suggested) use two steps or combine 
>> but I need to enter the full path. Why other file types don't seem to 
>> need the full path ....?????
> 
> You need to read the documentation for read_fst() to find what it needs. 
>  ?If it doesn't explain this, then you should report the issue to its 
> author.
> 
>>
>> myObject <- 
>> read_fst(unz("C:/Users/reichmaj/Documents/My_Reference_Library/Regression/Datasest.zip", 
>> filename = "myFile.fst"))
>>
>> Thank you. I guess just one of those R things
> 
> No, it's a read_fst() thing.
> 
> Duncan Murdoch
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From re|chm@nj @end|ng |rom @bcg|ob@|@net  Wed Jun  9 20:26:34 2021
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Wed, 9 Jun 2021 13:26:34 -0500
Subject: [R] Read fst files
In-Reply-To: <e97f0373-6765-9ac1-10dd-4e01086a6693@eoos.dds.nl>
References: <00f801d75cc0$036ed3b0$0a4c7b10$.ref@sbcglobal.net>
 <00f801d75cc0$036ed3b0$0a4c7b10$@sbcglobal.net>
 <CAGgJW77E5DN2wRbmVoixKmz6ZWcuCcAcjnzc6O4cOecD3xBjPg@mail.gmail.com>
 <003d01d75d29$95b07210$c1115630$@sbcglobal.net>
 <dc1f6eee-cc65-ad67-8242-6f430290b604@gmail.com>
 <005d01d75d31$1ebecb40$5c3c61c0$@sbcglobal.net>
 <e177ef63-a910-c1a7-ed5b-a1f4907f5769@gmail.com>
 <e97f0373-6765-9ac1-10dd-4e01086a6693@eoos.dds.nl>
Message-ID: <006801d75d5c$fb400450$f1c00cf0$@sbcglobal.net>

Jan

Makes sense. Its just that I often receive  large zip files that contain a variety of file types.

Jef

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Jan van der Laan
Sent: Wednesday, June 9, 2021 12:56 PM
To: r-help at r-project.org
Subject: Re: [R] Read fst files



read_fst is from the package fst. The fileformat fst uses is a binary 
format designed to be fast readable. It is a column  oriented format and 
compressed. So, to be able to work fst needs access to the file itself 
and wont accept a file connection as functions like read.table an 
variants accept.

Also, because it is a binary compressed format using a compression 
method that is fast to read, compressing also to zip seems to defeat the 
purpose of fst.

HTH,
Jan


On 09-06-2021 15:28, Duncan Murdoch wrote:
> On 09/06/2021 9:12 a.m., Jeff Reichman wrote:
>> Duncan
>>
>> Yea that will work. It appears to be related to setting my working 
>> dir, for what ever reason neither seem to work
>> (1) knitr::opts_knit$set(root.dir 
>> ="~/My_Reference_Library/Regression") # from R Notebook or
>> (2) 
>> setwd("C:/Users/reichmaj/Documents/My_Reference_Library/Regression") # 
>> from R chunk
>>
>> So it appears I can either (as you suggested) use two steps or combine 
>> but I need to enter the full path. Why other file types don't seem to 
>> need the full path ....?????
> 
> You need to read the documentation for read_fst() to find what it needs. 
>   If it doesn't explain this, then you should report the issue to its 
> author.
> 
>>
>> myObject <- 
>> read_fst(unz("C:/Users/reichmaj/Documents/My_Reference_Library/Regression/Datasest.zip", 
>> filename = "myFile.fst"))
>>
>> Thank you. I guess just one of those R things
> 
> No, it's a read_fst() thing.
> 
> Duncan Murdoch
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Jun  9 20:36:33 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 09 Jun 2021 11:36:33 -0700
Subject: [R] Read fst files
In-Reply-To: <006801d75d5c$fb400450$f1c00cf0$@sbcglobal.net>
References: <00f801d75cc0$036ed3b0$0a4c7b10$.ref@sbcglobal.net>
 <00f801d75cc0$036ed3b0$0a4c7b10$@sbcglobal.net>
 <CAGgJW77E5DN2wRbmVoixKmz6ZWcuCcAcjnzc6O4cOecD3xBjPg@mail.gmail.com>
 <003d01d75d29$95b07210$c1115630$@sbcglobal.net>
 <dc1f6eee-cc65-ad67-8242-6f430290b604@gmail.com>
 <005d01d75d31$1ebecb40$5c3c61c0$@sbcglobal.net>
 <e177ef63-a910-c1a7-ed5b-a1f4907f5769@gmail.com>
 <e97f0373-6765-9ac1-10dd-4e01086a6693@eoos.dds.nl>
 <006801d75d5c$fb400450$f1c00cf0$@sbcglobal.net>
Message-ID: <0739C7FA-F133-43B0-809F-9B8C5BE52034@dcn.davis.ca.us>

... but if you are receiving multiple-file zips then you should not be using unz() the way you are in your original post.

I have to agree with other responders suggesting that you handle unzipping fst zips manually rather than as part of an R one-liner.

On June 9, 2021 11:26:34 AM PDT, Jeff Reichman <reichmanj at sbcglobal.net> wrote:
>Jan
>
>Makes sense. Its just that I often receive  large zip files that
>contain a variety of file types.
>
>Jef
>
>-----Original Message-----
>From: R-help <r-help-bounces at r-project.org> On Behalf Of Jan van der
>Laan
>Sent: Wednesday, June 9, 2021 12:56 PM
>To: r-help at r-project.org
>Subject: Re: [R] Read fst files
>
>
>
>read_fst is from the package fst. The fileformat fst uses is a binary 
>format designed to be fast readable. It is a column  oriented format
>and 
>compressed. So, to be able to work fst needs access to the file itself 
>and wont accept a file connection as functions like read.table an 
>variants accept.
>
>Also, because it is a binary compressed format using a compression 
>method that is fast to read, compressing also to zip seems to defeat
>the 
>purpose of fst.
>
>HTH,
>Jan
>
>
>On 09-06-2021 15:28, Duncan Murdoch wrote:
>> On 09/06/2021 9:12 a.m., Jeff Reichman wrote:
>>> Duncan
>>>
>>> Yea that will work. It appears to be related to setting my working 
>>> dir, for what ever reason neither seem to work
>>> (1) knitr::opts_knit$set(root.dir 
>>> ="~/My_Reference_Library/Regression") # from R Notebook or
>>> (2) 
>>> setwd("C:/Users/reichmaj/Documents/My_Reference_Library/Regression")
># 
>>> from R chunk
>>>
>>> So it appears I can either (as you suggested) use two steps or
>combine 
>>> but I need to enter the full path. Why other file types don't seem
>to 
>>> need the full path ....?????
>> 
>> You need to read the documentation for read_fst() to find what it
>needs. 
>>   If it doesn't explain this, then you should report the issue to its
>
>> author.
>> 
>>>
>>> myObject <- 
>>>
>read_fst(unz("C:/Users/reichmaj/Documents/My_Reference_Library/Regression/Datasest.zip",
>
>>> filename = "myFile.fst"))
>>>
>>> Thank you. I guess just one of those R things
>> 
>> No, it's a read_fst() thing.
>> 
>> Duncan Murdoch
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From w||||@mwdun|@p @end|ng |rom gm@||@com  Wed Jun  9 20:43:11 2021
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Wed, 9 Jun 2021 11:43:11 -0700
Subject: [R] Read fst files
In-Reply-To: <006801d75d5c$fb400450$f1c00cf0$@sbcglobal.net>
References: <00f801d75cc0$036ed3b0$0a4c7b10$.ref@sbcglobal.net>
 <00f801d75cc0$036ed3b0$0a4c7b10$@sbcglobal.net>
 <CAGgJW77E5DN2wRbmVoixKmz6ZWcuCcAcjnzc6O4cOecD3xBjPg@mail.gmail.com>
 <003d01d75d29$95b07210$c1115630$@sbcglobal.net>
 <dc1f6eee-cc65-ad67-8242-6f430290b604@gmail.com>
 <005d01d75d31$1ebecb40$5c3c61c0$@sbcglobal.net>
 <e177ef63-a910-c1a7-ed5b-a1f4907f5769@gmail.com>
 <e97f0373-6765-9ac1-10dd-4e01086a6693@eoos.dds.nl>
 <006801d75d5c$fb400450$f1c00cf0$@sbcglobal.net>
Message-ID: <CAHqSRuSOkP23Krnc3xy49OxfgcMAQoxdR4OeeHfTwARrvewtRQ@mail.gmail.com>

Try using unzip(zipfile, files="desiredFile", exdir=tf<-tempfile()), not
unz(zipfile, "desiredFile"), to copy the desired file from the zip file to
a temporary location and use read_fst(tf) to read the desired file.

-Bill

On Wed, Jun 9, 2021 at 11:27 AM Jeff Reichman <reichmanj at sbcglobal.net>
wrote:

> Jan
>
> Makes sense. Its just that I often receive  large zip files that contain a
> variety of file types.
>
> Jef
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Jan van der Laan
> Sent: Wednesday, June 9, 2021 12:56 PM
> To: r-help at r-project.org
> Subject: Re: [R] Read fst files
>
>
>
> read_fst is from the package fst. The fileformat fst uses is a binary
> format designed to be fast readable. It is a column  oriented format and
> compressed. So, to be able to work fst needs access to the file itself
> and wont accept a file connection as functions like read.table an
> variants accept.
>
> Also, because it is a binary compressed format using a compression
> method that is fast to read, compressing also to zip seems to defeat the
> purpose of fst.
>
> HTH,
> Jan
>
>
> On 09-06-2021 15:28, Duncan Murdoch wrote:
> > On 09/06/2021 9:12 a.m., Jeff Reichman wrote:
> >> Duncan
> >>
> >> Yea that will work. It appears to be related to setting my working
> >> dir, for what ever reason neither seem to work
> >> (1) knitr::opts_knit$set(root.dir
> >> ="~/My_Reference_Library/Regression") # from R Notebook or
> >> (2)
> >> setwd("C:/Users/reichmaj/Documents/My_Reference_Library/Regression") #
> >> from R chunk
> >>
> >> So it appears I can either (as you suggested) use two steps or combine
> >> but I need to enter the full path. Why other file types don't seem to
> >> need the full path ....?????
> >
> > You need to read the documentation for read_fst() to find what it needs.
> >   If it doesn't explain this, then you should report the issue to its
> > author.
> >
> >>
> >> myObject <-
> >>
> read_fst(unz("C:/Users/reichmaj/Documents/My_Reference_Library/Regression/Datasest.zip",
>
> >> filename = "myFile.fst"))
> >>
> >> Thank you. I guess just one of those R things
> >
> > No, it's a read_fst() thing.
> >
> > Duncan Murdoch
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Jun  9 20:49:48 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 9 Jun 2021 14:49:48 -0400
Subject: [R] Read fst files
In-Reply-To: <e97f0373-6765-9ac1-10dd-4e01086a6693@eoos.dds.nl>
References: <00f801d75cc0$036ed3b0$0a4c7b10$.ref@sbcglobal.net>
 <00f801d75cc0$036ed3b0$0a4c7b10$@sbcglobal.net>
 <CAGgJW77E5DN2wRbmVoixKmz6ZWcuCcAcjnzc6O4cOecD3xBjPg@mail.gmail.com>
 <003d01d75d29$95b07210$c1115630$@sbcglobal.net>
 <dc1f6eee-cc65-ad67-8242-6f430290b604@gmail.com>
 <005d01d75d31$1ebecb40$5c3c61c0$@sbcglobal.net>
 <e177ef63-a910-c1a7-ed5b-a1f4907f5769@gmail.com>
 <e97f0373-6765-9ac1-10dd-4e01086a6693@eoos.dds.nl>
Message-ID: <b130f236-e042-956e-c871-c02752123460@gmail.com>

On 09/06/2021 1:55 p.m., Jan van der Laan wrote:
> 
> 
> read_fst is from the package fst. The fileformat fst uses is a binary
> format designed to be fast readable. It is a column  oriented format and
> compressed. So, to be able to work fst needs access to the file itself
> and wont accept a file connection as functions like read.table an
> variants accept.

Thanks for the info.  I think it is possible to handle such a file in a 
binary connection, but doing that in C/C++ would be kind of horrible, so 
I can understand your choice.

Duncan Murdoch

> 
> Also, because it is a binary compressed format using a compression
> method that is fast to read, compressing also to zip seems to defeat the
> purpose of fst.
> 
> HTH,
> Jan
> 
> 
> On 09-06-2021 15:28, Duncan Murdoch wrote:
>> On 09/06/2021 9:12 a.m., Jeff Reichman wrote:
>>> Duncan
>>>
>>> Yea that will work. It appears to be related to setting my working
>>> dir, for what ever reason neither seem to work
>>> (1) knitr::opts_knit$set(root.dir
>>> ="~/My_Reference_Library/Regression") # from R Notebook or
>>> (2)
>>> setwd("C:/Users/reichmaj/Documents/My_Reference_Library/Regression") #
>>> from R chunk
>>>
>>> So it appears I can either (as you suggested) use two steps or combine
>>> but I need to enter the full path. Why other file types don't seem to
>>> need the full path ....?????
>>
>> You need to read the documentation for read_fst() to find what it needs.
>>   ?If it doesn't explain this, then you should report the issue to its
>> author.
>>
>>>
>>> myObject <-
>>> read_fst(unz("C:/Users/reichmaj/Documents/My_Reference_Library/Regression/Datasest.zip",
>>> filename = "myFile.fst"))
>>>
>>> Thank you. I guess just one of those R things
>>
>> No, it's a read_fst() thing.
>>
>> Duncan Murdoch
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From b|p|@bn1 @end|ng |rom gm@||@com  Wed Jun  9 05:47:52 2021
From: b|p|@bn1 @end|ng |rom gm@||@com (Biplab Nayak)
Date: Wed, 9 Jun 2021 00:47:52 -0300
Subject: [R] 
 Need help to fix the max date filter problem in the date input
In-Reply-To: <668653.1623208495@apollo2.minshall.org>
References: <CANwr6KY+fc6d9EhjPvpDgc_eFXKGn3TzQpWNgWB2koj_25ot-w@mail.gmail.com>
 <668653.1623208495@apollo2.minshall.org>
Message-ID: <CANwr6KYvC5ZVEjw0sA0BHoH+Hu754qcLGi0jKokj+asHaef1ug@mail.gmail.com>

Hi Greg,

Please find the R Code in the word file attached here. Its plain text format

Thanks & Regards
Biplab Nayak

On Wed, Jun 9, 2021 at 12:15 AM Greg Minshall <minshall at umich.edu> wrote:

> Biplab,
>
> i'm not sure how to help you here, but this list pretty much runs on
> plain ASCII (or, these days, utf-8) e-mail.  for the most part, without
> attachments.  so, simply-formatted text, including code, with some
> mechanism in the code to initialize any data structures (data frames,
> matrices, etc.) needed for the example.
>
> some of this is described in the posting guide
> ----
> https://www.r-project.org/posting-guide.html
> ----
>
> formatting your e-mail in this way will likely increase your odds of a
> helpful reply.
>
> cheers, Greg
>

From n@@@j@v@nderve|den @end|ng |rom gm@||@com  Tue Jun  8 17:05:07 2021
From: n@@@j@v@nderve|den @end|ng |rom gm@||@com (Niels van der Velden)
Date: Tue, 8 Jun 2021 17:05:07 +0200
Subject: [R] [R-pkgs] New CRAN Package: NGLVieweR - Interactive 3D
 Visualization of Molecular Structures
Message-ID: <CANBF2ax2r9WAA-AnERwmexYWOYbGvJGPnv=kkMFbpn_DrcSUSA@mail.gmail.com>

 Dear all,

I am happy to announce that {NGLVieweR} v1.3.1 is now on CRAN.

{NGLVieweR} provides an 'htmlwidgets' https://www.htmlwidgets.org/
interface to 'NGL.js' http://nglviewer.org/ngl/api/.
{NGLVieweR} can be used to visualize and interact with protein databank
(PDB) and structural files in R and Shiny applications.
It includes a set of API functions to manipulate the viewer after creation
in Shiny.

CRAN: https://cran.r-project.org/web/packages/NGLVieweR/index.html
Documentation: https://nvelden.github.io/NGLVieweR/
Graphical UI for the {NGLVieweR} package:
https://niels-van-der-velden.shinyapps.io/shinyNGLVieweR/
Rationale on the development of the package:
https://community.rstudio.com/t/three-dimensional-3d-interactive-visualization-of-protein-structures-shiny-contest-submission/104697

I hope you find it helpful.

Please feel free to reach out with feedback or questions.

Thanks,

Niels van der Velden

	[[alternative HTML version deleted]]

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From b|p|@bn1 @end|ng |rom gm@||@com  Wed Jun  9 14:02:31 2021
From: b|p|@bn1 @end|ng |rom gm@||@com (Biplab Nayak)
Date: Wed, 9 Jun 2021 09:02:31 -0300
Subject: [R] 
 Need help to fix the max date filter problem in the date input
In-Reply-To: <668653.1623208495@apollo2.minshall.org>
References: <CANwr6KY+fc6d9EhjPvpDgc_eFXKGn3TzQpWNgWB2koj_25ot-w@mail.gmail.com>
 <668653.1623208495@apollo2.minshall.org>
Message-ID: <CANwr6Kba3x4P9QcKLqNWQH9zu58sxCmuKiiHNSwfEKyD0O6Dwg@mail.gmail.com>

Hi Greg,

Please find the objective of the code(bold) and code mentioned below. I was
trying to do to achieve the below objective but somehow it's not working.

1.Order assessment based on the latest due date so select input automatically
shows the order of assessment name.

2.Filter based on the one name or multiple names in the  select input



library(tidyverse)

#library(stringr)    # attached with tidyverse

#library(readr)

library(shiny)

library(dplyr)



ttclasses <- read_csv("~/tmp/ttclasses.csv")



#Filter data

ttclasses <-ttclasses %>%

   filter(str_detect(assessment, "Assignment"))

 *ttclasses <-ttclasses %>%  filter(str_detect(name, "Name"))*



##Remove NA values.

ttclasses <-ttclasses %>% drop_na("score")



*## Sort  assessment based on max due_date*

 *ttclasses  <- ttclasses [order( - due_date, assessment ),]*



#Convert to factor

ttclasses$assessment <- factor(ttclasses$assessment)



# please see the formats in help("strptime")

ttclasses$due_date <-  as.Date(ttclasses$due_date, format = "%m/%d/%y")

*ttclasses$name <- factor(ttclasses$name)*





# Define UI ----

ui <- fluidPage(



   # App title ----

   titlePanel("Assessment Dashboard"),



   # Sidebar layout with input and output definitions ----

   sidebarLayout(



     # Sidebar panel for inputs ----

     sidebarPanel(



       # Input: Selector for variable to plot the grades for the selected

       # assignment ----



         selectInput("assessment", "Assessment:",

                     c("Assignment 1" = "Assignment 1",

                       "Assignment 2" = "Assignment 2",

                       "Assignment 3" = "Assignment 3",

                       "Assignment 4" = "Assignment 4",

                       "Assignment 5" = "Assignment 5")),

       selectInput("name", "Name:",

                   ttclasses[,2]),



       dateRangeInput("due_date",

                      "Due-Date:",start = max(ttclasses$due_date) ,

                      separator = " - ")

     ),



     # Main panel for displaying outputs ----

     mainPanel(



       # Output: Plot of the requested variable against grade ----

       plotOutput("gradePlot")



     )

   )

)



# Define server logic to plot  ----

server <- function(input, output) {

   output$gradePlot <- renderPlot({

     grade_ad = input$assessment

     boxplot(ttclasses$score[ttclasses$assessment==grade_ad],

             frame.plot=FALSE, horizontal=TRUE, col="magenta",

main=grade_ad)

     ttclasses <-ttclasses %>%

       filter(ttclasses$due_date >= input$due_date[1] & ttclasses$due_date

              <= input$due_date[2])

   })

}



# Create Shiny app ----

shinyApp(ui, server)


Thanks & Regards
Biplab Nayak

On Wed, Jun 9, 2021 at 12:15 AM Greg Minshall <minshall at umich.edu> wrote:

> Biplab,
>
> i'm not sure how to help you here, but this list pretty much runs on
> plain ASCII (or, these days, utf-8) e-mail.  for the most part, without
> attachments.  so, simply-formatted text, including code, with some
> mechanism in the code to initialize any data structures (data frames,
> matrices, etc.) needed for the example.
>
> some of this is described in the posting guide
> ----
> https://www.r-project.org/posting-guide.html
> ----
>
> formatting your e-mail in this way will likely increase your odds of a
> helpful reply.
>
> cheers, Greg
>

	[[alternative HTML version deleted]]


From b|p|@bn1 @end|ng |rom gm@||@com  Wed Jun  9 14:06:55 2021
From: b|p|@bn1 @end|ng |rom gm@||@com (Biplab Nayak)
Date: Wed, 9 Jun 2021 09:06:55 -0300
Subject: [R] 
 Need help to fix the max date filter problem in the date input
In-Reply-To: <668653.1623208495@apollo2.minshall.org>
References: <CANwr6KY+fc6d9EhjPvpDgc_eFXKGn3TzQpWNgWB2koj_25ot-w@mail.gmail.com>
 <668653.1623208495@apollo2.minshall.org>
Message-ID: <CANwr6KZaEVdHHmZQAUxE1gn3qbcQ3YzXbVs=RmMQptsraoBfaw@mail.gmail.com>

Hi Greg,

Please find the objective of the code(bold) and code mentioned below. I was
trying to do to achieve the below objective but somehow it's not working.

1.Order assessment based on the latest due date so select input
automatically shows the order of assessment name.

2.Filter based on the one name or multiple names in the  select input



library(tidyverse)

#library(stringr)    # attached with tidyverse

#library(readr)

library(shiny)

library(dplyr)



ttclasses <- read_csv("~/tmp/ttclasses.csv")



#Filter data

ttclasses <-ttclasses %>%

   filter(str_detect(assessment, "Assignment"))

 ttclasses <-ttclasses %>%  filter(str_detect(name, "Name"))



##Remove NA values.

ttclasses <-ttclasses %>% drop_na("score")



*## Sort  assessment based on max due_date*

 ttclasses  <- ttclasses [order( - due_date, assessment ),]



#Convert to factor

ttclasses$assessment <- factor(ttclasses$assessment)



# please see the formats in help("strptime")

ttclasses$due_date <-  as.Date(ttclasses$due_date, format = "%m/%d/%y")

ttclasses$name <- factor(ttclasses$name)

Thanks & Regards
Biplab Nayak

On Wed, Jun 9, 2021 at 12:15 AM Greg Minshall <minshall at umich.edu> wrote:

> Biplab,
>
> i'm not sure how to help you here, but this list pretty much runs on
> plain ASCII (or, these days, utf-8) e-mail.  for the most part, without
> attachments.  so, simply-formatted text, including code, with some
> mechanism in the code to initialize any data structures (data frames,
> matrices, etc.) needed for the example.
>
> some of this is described in the posting guide
> ----
> https://www.r-project.org/posting-guide.html
> ----
>
> formatting your e-mail in this way will likely increase your odds of a
> helpful reply.
>
> cheers, Greg
>

	[[alternative HTML version deleted]]


From enr|cog@br|e|||76@per@gr @end|ng |rom gm@||@com  Wed Jun  9 19:57:30 2021
From: enr|cog@br|e|||76@per@gr @end|ng |rom gm@||@com (Enrico Gabrielli)
Date: Wed, 09 Jun 2021 19:57:30 +0200
Subject: [R] aggregation of irregular interval time-series
Message-ID: <5142d9f6b446104d4e14b58a1c9be3eb50351e94.camel@gmail.com>

Hello
I just registered on the list.
I am an agricultural technician and I am collaborating on a research
project on agroforestry and Brown Marmorated Stink Bug (Halyomorpha
halys, abbreviated BMSB).

Through kobotoolbox we are collecting data of catches in traps on
farms. Farms register inconsistently.
I am trying to use packages for irregular time series.

Here an exemple
the data:
# variable monitoring time as register an import from kobotoolbox
tempo <- as.POSIXct(c("2021-05-29 17:00:00 UTC","2021-06-05 10:52:00
UTC","2021-06-01 17:00:00 UTC","2021-05-16 08:34:00 UTC","2021-06-05
17:00:00 UTC","2021-05-29 05:30:00 UTC","2021-05-23 06:30:00
UTC","2021-05-20 13:00:00 UTC","2021-05-15 12:09:00 UTC"))
# variable capture of BMSB
catture <- c(25,92,23,2,5,30,23,3,15)
# resulting table
library(data.table)
arvaia_catture <- data.table(tempo,catture)
# order by time
arvaia_catture_order <- arvaia_catture[order(arvaia_catture$tempo)]

the catches refer to an interval, which goes from the previous
monitoring up to the one recorded on the date
our aim is to calculate the weekly catch
also when a farmer, for example, enters the data on Thursday and
Tuesday
of the following week, on Tuesday in the trap he will find individuals
who were also captured on Friday and Saturday, which formally are to be
considered in the previous week.

With the data of the example
the results (with a spreadsheet) is
two possibile solution
week            simple SUM week         right SUM week
19      17      19,44027778
20      26      52,91388889
21      55      46,4375
22      120     99,20833333
The right SUM week is right!

I have made several attempts
with lubridate, padr, xts
but the last one seems interesting to me
with DTSg
doing
x_periodic <- alter(x,na.status = 'explicit',from="2021-05-15
12:00:00",by="min")
colapply(x_periodic, fun = interpolateLinear)
I managed to create a vector with all interpolated hours
but with DTSg I still can't aggregate by week

Has anyone on the list ever faced such a problem?

Thank you

-- 
Perito agrario Enrico Gabrielli
Tessera n. 633 Collegio Periti agrari prov. Di Modena
Biblioteca agricoltura: https://www.zotero.org/groups/aplomb/
https://it.linkedin.com/pub/enrico-gabrielli/9a/186/159
https://enricogabrielli76.wordpress.com/
https://www.inaturalist.org/observations/bonushenricus
skype: enricogabrielli (enricogabrielli76.peragr at gmail.com)


From re|chm@nj @end|ng |rom @bcg|ob@|@net  Wed Jun  9 22:26:52 2021
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Wed, 9 Jun 2021 15:26:52 -0500
Subject: [R] Read fst files
In-Reply-To: <CAHqSRuSOkP23Krnc3xy49OxfgcMAQoxdR4OeeHfTwARrvewtRQ@mail.gmail.com>
References: <00f801d75cc0$036ed3b0$0a4c7b10$.ref@sbcglobal.net>
 <00f801d75cc0$036ed3b0$0a4c7b10$@sbcglobal.net>
 <CAGgJW77E5DN2wRbmVoixKmz6ZWcuCcAcjnzc6O4cOecD3xBjPg@mail.gmail.com>
 <003d01d75d29$95b07210$c1115630$@sbcglobal.net>
 <dc1f6eee-cc65-ad67-8242-6f430290b604@gmail.com>
 <005d01d75d31$1ebecb40$5c3c61c0$@sbcglobal.net>
 <e177ef63-a910-c1a7-ed5b-a1f4907f5769@gmail.com>
 <e97f0373-6765-9ac1-10dd-4e01086a6693@eoos.dds.nl>
 <006801d75d5c$fb400450$f1c00cf0$@sbcglobal.net>
 <CAHqSRuSOkP23Krnc3xy49OxfgcMAQoxdR4OeeHfTwARrvewtRQ@mail.gmail.com>
Message-ID: <00ae01d75d6d$c8ab0ab0$5a012010$@sbcglobal.net>

Bill

 

So I understand that?s just unzipping the file to a temporary dir which then would allow read_fst to access the file directly .

 

Jeff

 

From: Bill Dunlap <williamwdunlap at gmail.com> 
Sent: Wednesday, June 9, 2021 1:43 PM
To: reichmanj at sbcglobal.net
Cc: Jan van der Laan <rhelp at eoos.dds.nl>; r-help at r-project.org
Subject: Re: [R] Read fst files

 

Try using unzip(zipfile, files="desiredFile", exdir=tf<-tempfile()), not unz(zipfile, "desiredFile"), to copy the desired file from the zip file to a temporary location and use read_fst(tf) to read the desired file.

 

-Bill

 

On Wed, Jun 9, 2021 at 11:27 AM Jeff Reichman <reichmanj at sbcglobal.net <mailto:reichmanj at sbcglobal.net> > wrote:

Jan

Makes sense. Its just that I often receive  large zip files that contain a variety of file types.

Jef

-----Original Message-----
From: R-help <r-help-bounces at r-project.org <mailto:r-help-bounces at r-project.org> > On Behalf Of Jan van der Laan
Sent: Wednesday, June 9, 2021 12:56 PM
To: r-help at r-project.org <mailto:r-help at r-project.org> 
Subject: Re: [R] Read fst files



read_fst is from the package fst. The fileformat fst uses is a binary 
format designed to be fast readable. It is a column  oriented format and 
compressed. So, to be able to work fst needs access to the file itself 
and wont accept a file connection as functions like read.table an 
variants accept.

Also, because it is a binary compressed format using a compression 
method that is fast to read, compressing also to zip seems to defeat the 
purpose of fst.

HTH,
Jan


On 09-06-2021 15:28, Duncan Murdoch wrote:
> On 09/06/2021 9:12 a.m., Jeff Reichman wrote:
>> Duncan
>>
>> Yea that will work. It appears to be related to setting my working 
>> dir, for what ever reason neither seem to work
>> (1) knitr::opts_knit$set(root.dir 
>> ="~/My_Reference_Library/Regression") # from R Notebook or
>> (2) 
>> setwd("C:/Users/reichmaj/Documents/My_Reference_Library/Regression") # 
>> from R chunk
>>
>> So it appears I can either (as you suggested) use two steps or combine 
>> but I need to enter the full path. Why other file types don't seem to 
>> need the full path ....?????
> 
> You need to read the documentation for read_fst() to find what it needs. 
>   If it doesn't explain this, then you should report the issue to its 
> author.
> 
>>
>> myObject <- 
>> read_fst(unz("C:/Users/reichmaj/Documents/My_Reference_Library/Regression/Datasest.zip", 
>> filename = "myFile.fst"))
>>
>> Thank you. I guess just one of those R things
> 
> No, it's a read_fst() thing.
> 
> Duncan Murdoch
> 
> ______________________________________________
> R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Jun  9 23:40:36 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 9 Jun 2021 22:40:36 +0100
Subject: [R] aggregation of irregular interval time-series
In-Reply-To: <5142d9f6b446104d4e14b58a1c9be3eb50351e94.camel@gmail.com>
References: <5142d9f6b446104d4e14b58a1c9be3eb50351e94.camel@gmail.com>
Message-ID: <297ec350-92ff-91e4-f5d0-088a12098f06@sapo.pt>

Hello,

I'm not getting your simple sum:


arvaia_catture_order[, week := as.integer(format(tempo, "%U"))]
aggregate(catture ~ week, arvaia_catture_order, sum)
#  week catture
#1   19      15
#2   20       5
#3   21      78
#4   22     120


Can you explain your result better?

Hope this helps,

Rui Barradas

?s 18:57 de 09/06/21, Enrico Gabrielli escreveu:
> Hello
> I just registered on the list.
> I am an agricultural technician and I am collaborating on a research
> project on agroforestry and Brown Marmorated Stink Bug (Halyomorpha
> halys, abbreviated BMSB).
> 
> Through kobotoolbox we are collecting data of catches in traps on
> farms. Farms register inconsistently.
> I am trying to use packages for irregular time series.
> 
> Here an exemple
> the data:
> # variable monitoring time as register an import from kobotoolbox
> tempo <- as.POSIXct(c("2021-05-29 17:00:00 UTC","2021-06-05 10:52:00
> UTC","2021-06-01 17:00:00 UTC","2021-05-16 08:34:00 UTC","2021-06-05
> 17:00:00 UTC","2021-05-29 05:30:00 UTC","2021-05-23 06:30:00
> UTC","2021-05-20 13:00:00 UTC","2021-05-15 12:09:00 UTC"))
> # variable capture of BMSB
> catture <- c(25,92,23,2,5,30,23,3,15)
> # resulting table
> library(data.table)
> arvaia_catture <- data.table(tempo,catture)
> # order by time
> arvaia_catture_order <- arvaia_catture[order(arvaia_catture$tempo)]
> 
> the catches refer to an interval, which goes from the previous
> monitoring up to the one recorded on the date
> our aim is to calculate the weekly catch
> also when a farmer, for example, enters the data on Thursday and
> Tuesday
> of the following week, on Tuesday in the trap he will find individuals
> who were also captured on Friday and Saturday, which formally are to be
> considered in the previous week.
> 
> With the data of the example
> the results (with a spreadsheet) is
> two possibile solution
> week            simple SUM week         right SUM week
> 19      17      19,44027778
> 20      26      52,91388889
> 21      55      46,4375integrand_2 <- function(x) {0.62 * (1/x)}

integrate(integrand, lower = , upper = 5)

> 22      120     99,20833333
> The right SUM week is right!
> 
> I have made several attempts
> with lubridate, padr, xts
> but the last one seems interesting to me
> with DTSg
> doing
> x_periodic <- alter(x,na.status = 'explicit',from="2021-05-15
> 12:00:00",by="min")
> colapply(x_periodic, fun = interpolateLinear)
> I managed to create a vector with all interpolated hours
> but with DTSg I still can't aggregate by week
> 
> Has anyone on the list ever faced such a problem?
> 
> Thank you
>


From bgunter@4567 @end|ng |rom gm@||@com  Wed Jun  9 23:47:55 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 9 Jun 2021 14:47:55 -0700
Subject: [R] aggregation of irregular interval time-series
In-Reply-To: <297ec350-92ff-91e4-f5d0-088a12098f06@sapo.pt>
References: <5142d9f6b446104d4e14b58a1c9be3eb50351e94.camel@gmail.com>
 <297ec350-92ff-91e4-f5d0-088a12098f06@sapo.pt>
Message-ID: <CAGxFJbT2BDLChjY6cBcydJzQR7gr5fecncxxjjsddVnpWnTrCg@mail.gmail.com>

I have *not* followed this in any detail, but this line seems wrong:

arvaia_catture_order <- arvaia_catture[order(arvaia_catture$tempo)]

Perhaps it should be:
arvaia_catture_order <- arvaia_catture[order(arvaia_catture$tempo), ] ##
note the comma!

If I am mistaken, just ignore and move on.

Cheers,
Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Jun 9, 2021 at 2:41 PM Rui Barradas <ruipbarradas at sapo.pt> wrote:

> Hello,
>
> I'm not getting your simple sum:
>
>
> arvaia_catture_order[, week := as.integer(format(tempo, "%U"))]
> aggregate(catture ~ week, arvaia_catture_order, sum)
> #  week catture
> #1   19      15
> #2   20       5
> #3   21      78
> #4   22     120
>
>
> Can you explain your result better?
>
> Hope this helps,
>
> Rui Barradas
>
> ?s 18:57 de 09/06/21, Enrico Gabrielli escreveu:
> > Hello
> > I just registered on the list.
> > I am an agricultural technician and I am collaborating on a research
> > project on agroforestry and Brown Marmorated Stink Bug (Halyomorpha
> > halys, abbreviated BMSB).
> >
> > Through kobotoolbox we are collecting data of catches in traps on
> > farms. Farms register inconsistently.
> > I am trying to use packages for irregular time series.
> >
> > Here an exemple
> > the data:
> > # variable monitoring time as register an import from kobotoolbox
> > tempo <- as.POSIXct(c("2021-05-29 17:00:00 UTC","2021-06-05 10:52:00
> > UTC","2021-06-01 17:00:00 UTC","2021-05-16 08:34:00 UTC","2021-06-05
> > 17:00:00 UTC","2021-05-29 05:30:00 UTC","2021-05-23 06:30:00
> > UTC","2021-05-20 13:00:00 UTC","2021-05-15 12:09:00 UTC"))
> > # variable capture of BMSB
> > catture <- c(25,92,23,2,5,30,23,3,15)
> > # resulting table
> > library(data.table)
> > arvaia_catture <- data.table(tempo,catture)
> > # order by time
> > arvaia_catture_order <- arvaia_catture[order(arvaia_catture$tempo)]
> >
> > the catches refer to an interval, which goes from the previous
> > monitoring up to the one recorded on the date
> > our aim is to calculate the weekly catch
> > also when a farmer, for example, enters the data on Thursday and
> > Tuesday
> > of the following week, on Tuesday in the trap he will find individuals
> > who were also captured on Friday and Saturday, which formally are to be
> > considered in the previous week.
> >
> > With the data of the example
> > the results (with a spreadsheet) is
> > two possibile solution
> > week            simple SUM week         right SUM week
> > 19      17      19,44027778
> > 20      26      52,91388889
> > 21      55      46,4375integrand_2 <- function(x) {0.62 * (1/x)}
>
> integrate(integrand, lower = , upper = 5)
>
> > 22      120     99,20833333
> > The right SUM week is right!
> >
> > I have made several attempts
> > with lubridate, padr, xts
> > but the last one seems interesting to me
> > with DTSg
> > doing
> > x_periodic <- alter(x,na.status = 'explicit',from="2021-05-15
> > 12:00:00",by="min")
> > colapply(x_periodic, fun = interpolateLinear)
> > I managed to create a vector with all interpolated hours
> > but with DTSg I still can't aggregate by week
> >
> > Has anyone on the list ever faced such a problem?
> >
> > Thank you
> >
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From er|ck@one@th| @end|ng |rom gm@||@com  Wed Jun  9 22:28:13 2021
From: er|ck@one@th| @end|ng |rom gm@||@com (Esthi Erickson)
Date: Wed, 9 Jun 2021 15:28:13 -0500
Subject: [R] Merging multiple .csv files into one dataframe
Message-ID: <CAGDiKFwpLVST_au-d2LWYSbtV6nq70dMQGC4EyL=9j+e2nFPiw@mail.gmail.com>

Hi,

I am trying to merge columns from four different .csv files into one
dataframe. I am trying to do something like this
https://statisticsglobe.com/merge-csv-files-in-r . I am taking long format
.csv files, 1 being the base file (testing-long.csv) which I change to wide
format first and the three others being supplemental files that should add
columns plight, plightLitter, Root Biomass, NO3Soil, NH4Soil and then add
data to cells where the it matches any one of the values for columns,
"Exp", "Year", "Field", "Plot", "NTrt", "NAdd", "NitrAdd", "NAtm.NAdd". So
the values for the supplemental files need not match every single one of
the columns listed above and if the value does not match all the columns
exactly the cell for that column/row should not be filled. When I try the
method from that website, I do not see the supplemental columns being
added. I am wondering if there is a better way to merge multiple .csv
files. I hope this makes sense, but it is quite confusing even to me, so I
am more than happy to clarify. I am attaching the files in question.

From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Jun 10 00:46:37 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 09 Jun 2021 15:46:37 -0700
Subject: [R] 
 Need help to fix the max date filter problem in the date input
In-Reply-To: <CANwr6KYvC5ZVEjw0sA0BHoH+Hu754qcLGi0jKokj+asHaef1ug@mail.gmail.com>
References: <CANwr6KY+fc6d9EhjPvpDgc_eFXKGn3TzQpWNgWB2koj_25ot-w@mail.gmail.com>
 <668653.1623208495@apollo2.minshall.org>
 <CANwr6KYvC5ZVEjw0sA0BHoH+Hu754qcLGi0jKokj+asHaef1ug@mail.gmail.com>
Message-ID: <5BB488A4-9EF1-4ECC-BA77-427950DDB788@dcn.davis.ca.us>

You seem to need to educate yourself as to what "plain text" means, and to read the Posting Guide for this mailing list. Word documents are very definitely NOT plain text. Stop attempting to communicate via formatted text on this mailing list.

For security reasons this mailing list removes most attachments and formatting. Your emails sent to the list have such features (e.g Word documents and HTML formatting) stripped (removed). If you happen to send such emails directly to specific people they might have software that can allow them to view that information if they choose to risk opening attachments from a stranger (I will not), but for those of us seeing your emails on the list "what you send is not what we receive". Such emails are repeatedly violating the Posting Guidelines which will make responses much less likely and may increase the chance of a negative moderator reaction.

On June 8, 2021 8:47:52 PM PDT, Biplab Nayak <biplabn1 at gmail.com> wrote:
>Hi Greg,
>
>Please find the R Code in the word file attached here. Its plain text
>format
>
>Thanks & Regards
>Biplab Nayak
>
>On Wed, Jun 9, 2021 at 12:15 AM Greg Minshall <minshall at umich.edu>
>wrote:
>
>> Biplab,
>>
>> i'm not sure how to help you here, but this list pretty much runs on
>> plain ASCII (or, these days, utf-8) e-mail.  for the most part,
>without
>> attachments.  so, simply-formatted text, including code, with some
>> mechanism in the code to initialize any data structures (data frames,
>> matrices, etc.) needed for the example.
>>
>> some of this is described in the posting guide
>> ----
>> https://www.r-project.org/posting-guide.html
>> ----
>>
>> formatting your e-mail in this way will likely increase your odds of
>a
>> helpful reply.
>>
>> cheers, Greg
>>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From dw|n@em|u@ @end|ng |rom comc@@t@net  Thu Jun 10 01:18:28 2021
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Wed, 9 Jun 2021 16:18:28 -0700
Subject: [R] 
 Need help to fix the max date filter problem in the date input
In-Reply-To: <CANwr6KZaEVdHHmZQAUxE1gn3qbcQ3YzXbVs=RmMQptsraoBfaw@mail.gmail.com>
References: <CANwr6KY+fc6d9EhjPvpDgc_eFXKGn3TzQpWNgWB2koj_25ot-w@mail.gmail.com>
 <668653.1623208495@apollo2.minshall.org>
 <CANwr6KZaEVdHHmZQAUxE1gn3qbcQ3YzXbVs=RmMQptsraoBfaw@mail.gmail.com>
Message-ID: <18c59faa-b4b3-dc5f-3000-04b3f752a9cb@comcast.net>


On 6/9/21 5:06 AM, Biplab Nayak wrote:
> Hi Greg,
>
> Please find the objective of the code(bold) and code mentioned below. I was
> trying to do to achieve the below objective but somehow it's not working.


The phrase "somehow not working" is not a useful description of an outcome.

>
> 1.Order assessment based on the latest due date so select input
> automatically shows the order of assessment name.
>
> 2.Filter based on the one name or multiple names in the  select input
>
>
>
> library(tidyverse)
>
> #library(stringr)    # attached with tidyverse
>
> #library(readr)
>
> library(shiny)
>
> library(dplyr)


I'm pretty sure the tidyverse super-package includes most of the others 
with the exception of pkg:shiny (which does not appear to be needed anyway.)

Here's what my version of tidyverse loads:

Imports: broom (>= 0.5.2), cli (>= 1.1.0), crayon (>= 1.3.4), dbplyr (>= 
1.4.2), dplyr (>= 0.8.3), forcats (>= 0.4.0),
 ???????????? ggplot2 (>= 3.2.1), haven (>= 2.2.0), hms (>= 0.5.2), httr 
(>= 1.4.1), jsonlite (>= 1.6), lubridate (>=
 ???????????? 1.7.4), magrittr (>= 1.5), modelr (>= 0.1.5), pillar (>= 
1.4.2), purrr (>= 0.3.3), readr (>= 1.3.1), readxl
 ???????????? (>= 1.3.1), reprex (>= 0.3.0), rlang (>= 0.4.1), 
rstudioapi (>= 0.10), rvest (>= 0.3.5), stringr (>=
 ???????????? 1.4.0), tibble (>= 2.1.3), tidyr (>= 1.0.0), xml2 (>= 1.2.2)

> ttclasses <- read_csv("~/tmp/ttclasses.csv")
We do not have your data.
>
> #Filter data
>
> ttclasses <-ttclasses %>%
>
>     filter(str_detect(assessment, "Assignment"))
>
>   ttclasses <-ttclasses %>%  filter(str_detect(name, "Name"))
Without a result that summarizes the changes in the data composition at 
each step, we cannot make any guesses as to your problem
> ##Remove NA values.
>
> ttclasses <-ttclasses %>% drop_na("score")
>
>
>
> *## Sort  assessment based on max due_date*
>
>   ttclasses  <- ttclasses [order( - due_date, assessment ),]
>
>
>
> #Convert to factor
>
> ttclasses$assessment <- factor(ttclasses$assessment)
>
>
>
> # please see the formats in help("strptime")
>
> ttclasses$due_date <-  as.Date(ttclasses$due_date, format = "%m/%d/%y")
Yes, do see ?strptime. That format assumes dates are in MM/DD/YY format, 
i.e slashes as separators and 2 digit years. Getting the date format 
wrong is a common way to create NA values. It is better not to overlay 
such efforts on top of the original column name. That way you can still 
make changes without redoing the entire data steps.
>
> ttclasses$name <- factor(ttclasses$name)
>
> Thanks & Regards
> Biplab Nayak



>
> On Wed, Jun 9, 2021 at 12:15 AM Greg Minshall <minshall at umich.edu> wrote:
>
>> Biplab,
>>
>> i'm not sure how to help you here, but this list pretty much runs on
>> plain ASCII (or, these days, utf-8) e-mail.  for the most part, without
>> attachments.  so, simply-formatted text, including code, with some
>> mechanism in the code to initialize any data structures (data frames,
>> matrices, etc.) needed for the example.
>>
>> some of this is described in the posting guide
>> ----
>> https://www.r-project.org/posting-guide.html
>> ----
>>
>> formatting your e-mail in this way will likely increase your odds of a
>> helpful reply.
>>
>> cheers, Greg
>>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Thu Jun 10 01:40:29 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 9 Jun 2021 16:40:29 -0700
Subject: [R] Merging multiple .csv files into one dataframe
In-Reply-To: <CAGDiKFwpLVST_au-d2LWYSbtV6nq70dMQGC4EyL=9j+e2nFPiw@mail.gmail.com>
References: <CAGDiKFwpLVST_au-d2LWYSbtV6nq70dMQGC4EyL=9j+e2nFPiw@mail.gmail.com>
Message-ID: <CAGxFJbS9fqUDfSOwHjb1pUU7oGBKfZUbB6cZ_o6qE86+i6=Bfg@mail.gmail.com>

I really think you need to create a simple reprex to show us what you want
to do. In doing so, you may figure out how to get what you want. I suspect
you may also need to spend some more time learning R -- following rote
examples can be a fool's errand if you don't know the basics.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Jun 9, 2021 at 3:41 PM Esthi Erickson <ericksonesthi at gmail.com>
wrote:

> Hi,
>
> I am trying to merge columns from four different .csv files into one
> dataframe. I am trying to do something like this
> https://statisticsglobe.com/merge-csv-files-in-r . I am taking long format
> .csv files, 1 being the base file (testing-long.csv) which I change to wide
> format first and the three others being supplemental files that should add
> columns plight, plightLitter, Root Biomass, NO3Soil, NH4Soil and then add
> data to cells where the it matches any one of the values for columns,
> "Exp", "Year", "Field", "Plot", "NTrt", "NAdd", "NitrAdd", "NAtm.NAdd". So
> the values for the supplemental files need not match every single one of
> the columns listed above and if the value does not match all the columns
> exactly the cell for that column/row should not be filled. When I try the
> method from that website, I do not see the supplemental columns being
> added. I am wondering if there is a better way to merge multiple .csv
> files. I hope this makes sense, but it is quite confusing even to me, so I
> am more than happy to clarify. I am attaching the files in question.
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Jun 10 02:03:36 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 09 Jun 2021 17:03:36 -0700
Subject: [R] Merging multiple .csv files into one dataframe
In-Reply-To: <CAGDiKFwpLVST_au-d2LWYSbtV6nq70dMQGC4EyL=9j+e2nFPiw@mail.gmail.com>
References: <CAGDiKFwpLVST_au-d2LWYSbtV6nq70dMQGC4EyL=9j+e2nFPiw@mail.gmail.com>
Message-ID: <8FEBBF99-ECF8-49C1-9D4C-BC2A1B0ABE0E@dcn.davis.ca.us>

Attachments have been stripped by the mailing list. Read the Posting Guide.

Also, English can help, but R code can be ever so much more clear in indicating what you have to work with and even what you want out of the broken/missing part of your code.

https://cran.r-project.org/web/packages/reprex/index.html (read the vignette) 

On June 9, 2021 1:28:13 PM PDT, Esthi Erickson <ericksonesthi at gmail.com> wrote:
>Hi,
>
>I am trying to merge columns from four different .csv files into one
>dataframe. I am trying to do something like this
>https://statisticsglobe.com/merge-csv-files-in-r . I am taking long
>format
>.csv files, 1 being the base file (testing-long.csv) which I change to
>wide
>format first and the three others being supplemental files that should
>add
>columns plight, plightLitter, Root Biomass, NO3Soil, NH4Soil and then
>add
>data to cells where the it matches any one of the values for columns,
>"Exp", "Year", "Field", "Plot", "NTrt", "NAdd", "NitrAdd", "NAtm.NAdd".
>So
>the values for the supplemental files need not match every single one
>of
>the columns listed above and if the value does not match all the
>columns
>exactly the cell for that column/row should not be filled. When I try
>the
>method from that website, I do not see the supplemental columns being
>added. I am wondering if there is a better way to merge multiple .csv
>files. I hope this makes sense, but it is quite confusing even to me,
>so I
>am more than happy to clarify. I am attaching the files in question.
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From @t@t|@t|c@84 @end|ng |rom hotm@||@com  Thu Jun 10 05:48:29 2021
From: @t@t|@t|c@84 @end|ng |rom hotm@||@com (peri He)
Date: Thu, 10 Jun 2021 03:48:29 +0000
Subject: [R] RINLA
Message-ID: <AM7PR10MB323783AF84D0445FD8D28F3FC6359@AM7PR10MB3237.EURPRD10.PROD.OUTLOOK.COM>

Dear Friends,

I am running a simple code for rinla.  The INLA package is installed successfully on Rstudio.
But when I run inla (y~x,......) function, I get the following error: could not find function "inla"
Did anybody have the same problem before?

I would appreciate it if any information is shared.

Regards,

install.packages("INLA", repos = "https://inla.r-inla-download.org/R/stable", dep = TRUE)

library(INLA)
N = 100      #500, 5000, 25000, 100000
x = rnorm(N, mean=6, sd=2)
y = rnorm(N, mean=x,sd=1)
data = list(x=x, y=y, N=N)
# The likelihood family is ?gaussian?
model<- inla(y ~ x, family = c("gaussian"), data = data, control.predictor=list(link=1))
Summary <- (model)

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Thu Jun 10 06:21:45 2021
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Wed, 9 Jun 2021 21:21:45 -0700
Subject: [R] RINLA
In-Reply-To: <AM7PR10MB323783AF84D0445FD8D28F3FC6359@AM7PR10MB3237.EURPRD10.PROD.OUTLOOK.COM>
References: <AM7PR10MB323783AF84D0445FD8D28F3FC6359@AM7PR10MB3237.EURPRD10.PROD.OUTLOOK.COM>
Message-ID: <40d1145b-eb62-8881-7865-b72a0c76e9a7@comcast.net>


On 6/9/21 8:48 PM, peri He wrote:
> Dear Friends,
>
> I am running a simple code for rinla.  The INLA package is installed successfully on Rstudio.


Techinically, the package is installed in an R library. You are using 
Rstudio as your IDE, but it does not run packages.

> But when I run inla (y~x,......) function, I get the following error: could not find function "inla"
> Did anybody have the same problem before?
>
> I would appreciate it if any information is shared.
>
> Regards,
>
> install.packages("INLA", repos = "https://inla.r-inla-download.org/R/stable", dep = TRUE)


Despite setting dep=TRUE is still got a warning:

"Warning in install.packages :
 ? dependencies ?Ecdat?, ?mpoly?, ?symmoments? are not available"

> library(INLA)
> N = 100      #500, 5000, 25000, 100000
> x = rnorm(N, mean=6, sd=2)
> y = rnorm(N, mean=x,sd=1)
> data = list(x=x, y=y, N=N)
> # The likelihood family is ?gaussian?
> model<- inla(y ~ x, family = c("gaussian"), data = data, control.predictor=list(link=1))
> Summary <- (model)

Despite the warning, INLA installed and loaded without complaint and the 
code ran without error.

I later ran:

install.packages(c('Ecdat', 'mpoly', 'symmoments'))??????? # no problems 
here either.

So I'm unable to recreate your error.

sessionInfo()

#-------------------

R version 4.0.4 (2021-02-15)?????? #I'm admittedly not up-to-date, If 
you are,? then provide details

I did check to see if there are any later versions of pkg:INLA and could 
not find any

Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 18.04.5 LTS

Matrix products: default
BLAS:?? /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3
LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.2.20.so

locale:
 ?[1] LC_CTYPE=en_US.UTF-8?????? LC_NUMERIC=C LC_TIME=en_US.UTF-8??????? 
LC_COLLATE=en_US.UTF-8
 ?[5] LC_MONETARY=en_US.UTF-8??? LC_MESSAGES=en_US.UTF-8 
LC_PAPER=en_US.UTF-8?????? LC_NAME=C
 ?[9] LC_ADDRESS=C?????????????? LC_TELEPHONE=C 
LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] parallel? stats???? graphics? grDevices utils???? datasets methods?? 
base

other attached packages:
[1] INLA_21.02.23?????? sp_1.4-5??????????? foreach_1.5.1 
Matrix_1.3-2??????? RBGL_1.66.0???????? graph_1.68.0
[7] BiocGenerics_0.36.0

loaded via a namespace (and not attached):
 ?[1] lattice_0.20-41???? codetools_0.2-18??? grid_4.0.4 
MatrixModels_0.5-0? stats4_4.0.4??????? splines_4.0.4
 ?[7] iterators_1.0.13??? tools_4.0.4???????? yaml_2.2.1 
compiler_4.0.4????? BiocManager_1.30.12



> 	[[alternative HTML version deleted]]


Rhelp is a plain-text mailing list. HTML is not welcome.

-- 

David.


From enr|cog@br|e|||76@per@gr @end|ng |rom gm@||@com  Thu Jun 10 07:33:43 2021
From: enr|cog@br|e|||76@per@gr @end|ng |rom gm@||@com (Enrico Gabrielli)
Date: Thu, 10 Jun 2021 07:33:43 +0200
Subject: [R] aggregation of irregular interval time-series
In-Reply-To: <CAGxFJbT2BDLChjY6cBcydJzQR7gr5fecncxxjjsddVnpWnTrCg@mail.gmail.com>
References: <5142d9f6b446104d4e14b58a1c9be3eb50351e94.camel@gmail.com>
 <297ec350-92ff-91e4-f5d0-088a12098f06@sapo.pt>
 <CAGxFJbT2BDLChjY6cBcydJzQR7gr5fecncxxjjsddVnpWnTrCg@mail.gmail.com>
Message-ID: <941da4cdd608ef2c7ee11fef07047fe6009d1b6a.camel@gmail.com>

sorry, i'm a bit of a bummer at copying and saving various pieces of
code
and I'm not very experienced with R
- I am trying to build a partnership with a local IT cooperative, but
this is a job that was not foreseen and it is not covered by budget, so
I am trying to solve it myself -
I do not want to ask in ml the ready turnkey solution, but some ideas
of what could be the set of packages and functions that could be right
for me, and if anyone has been faced with such a problem.
Thank you

Enrico Gabrielli
Il giorno mer, 09/06/2021 alle 14.47 -0700, Bert Gunter ha scritto:
> I have *not* followed this in any detail, but this line seems wrong:
> 
>  arvaia_catture_order <- arvaia_catture[order(arvaia_catture$tempo)]
> Perhaps it should be: arvaia_catture_order <-
> arvaia_catture[order(arvaia_catture$tempo), ] ## note the comma!
> If I am mistaken, just ignore and move on. 
> 
> Cheers,Bert
> Bert Gunter
> 
> "The trouble with having an open mind is that people keep coming
> along and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> 
> 
> On Wed, Jun 9, 2021 at 2:41 PM Rui Barradas <ruipbarradas at sapo.pt>
> wrote:
> > Hello,
> > 
> > 
> > 
> > I'm not getting your simple sum:
> > 
> > 
> > 
> > 
> > 
> > arvaia_catture_order[, week := as.integer(format(tempo, "%U"))]
> > 
> > aggregate(catture ~ week, arvaia_catture_order, sum)
> > 
> > #  week catture
> > 
> > #1   19      15
> > 
> > #2   20       5
> > 
> > #3   21      78
> > 
> > #4   22     120
> > 
> > 
> > 
> > 
> > 
> > Can you explain your result better?
> > 
> > 
> > 
> > Hope this helps,
> > 
> > 
> > 
> > Rui Barradas
> > 
> > 
> > 
> > ?s 18:57 de 09/06/21, Enrico Gabrielli escreveu:
> > 
> > > Hello
> > 
> > > I just registered on the list.
> > 
> > > I am an agricultural technician and I am collaborating on a
> > research
> > 
> > > project on agroforestry and Brown Marmorated Stink Bug
> > (Halyomorpha
> > 
> > > halys, abbreviated BMSB).
> > 
> > > 
> > 
> > > Through kobotoolbox we are collecting data of catches in traps on
> > 
> > > farms. Farms register inconsistently.
> > 
> > > I am trying to use packages for irregular time series.
> > 
> > > 
> > 
> > > Here an exemple
> > 
> > > the data:
> > 
> > > # variable monitoring time as register an import from kobotoolbox
> > 
> > > tempo <- as.POSIXct(c("2021-05-29 17:00:00 UTC","2021-06-05
> > 10:52:00
> > 
> > > UTC","2021-06-01 17:00:00 UTC","2021-05-16 08:34:00 UTC","2021-
> > 06-05
> > 
> > > 17:00:00 UTC","2021-05-29 05:30:00 UTC","2021-05-23 06:30:00
> > 
> > > UTC","2021-05-20 13:00:00 UTC","2021-05-15 12:09:00 UTC"))
> > 
> > > # variable capture of BMSB
> > 
> > > catture <- c(25,92,23,2,5,30,23,3,15)
> > 
> > > # resulting table
> > 
> > > library(data.table)
> > 
> > > arvaia_catture <- data.table(tempo,catture)
> > 
> > > # order by time
> > 
> > > arvaia_catture_order <-
> > arvaia_catture[order(arvaia_catture$tempo)]
> > 
> > > 
> > 
> > > the catches refer to an interval, which goes from the previous
> > 
> > > monitoring up to the one recorded on the date
> > 
> > > our aim is to calculate the weekly catch
> > 
> > > also when a farmer, for example, enters the data on Thursday and
> > 
> > > Tuesday
> > 
> > > of the following week, on Tuesday in the trap he will find
> > individuals
> > 
> > > who were also captured on Friday and Saturday, which formally are
> > to be
> > 
> > > considered in the previous week.
> > 
> > > 
> > 
> > > With the data of the example
> > 
> > > the results (with a spreadsheet) is
> > 
> > > two possibile solution
> > 
> > > week            simple SUM week         right SUM week
> > 
> > > 19      17      19,44027778
> > 
> > > 20      26      52,91388889
> > 
> > > 21      55      46,4375integrand_2 <- function(x) {0.62 * (1/x)}
> > 
> > 
> > 
> > integrate(integrand, lower = , upper = 5)
> > 
> > 
> > 
> > > 22      120     99,20833333
> > 
> > > The right SUM week is right!
> > 
> > > 
> > 
> > > I have made several attempts
> > 
> > > with lubridate, padr, xts
> > 
> > > but the last one seems interesting to me
> > 
> > > with DTSg
> > 
> > > doing
> > 
> > > x_periodic <- alter(x,na.status = 'explicit',from="2021-05-15
> > 
> > > 12:00:00",by="min")
> > 
> > > colapply(x_periodic, fun = interpolateLinear)
> > 
> > > I managed to create a vector with all interpolated hours
> > 
> > > but with DTSg I still can't aggregate by week
> > 
> > > 
> > 
> > > Has anyone on the list ever faced such a problem?
> > 
> > > 
> > 
> > > Thank you
> > 
> > >
> > 
> > 
> > 
> > ______________________________________________
> > 
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > 
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > 
> > PLEASE do read the posting guide 
> > http://www.R-project.org/posting-guide.html
> > 
> > and provide commented, minimal, self-contained, reproducible code.
> > 
> 
> 

	[[alternative HTML version deleted]]


From dgw@term@n @end|ng |rom gm@||@com  Thu Jun 10 10:42:54 2021
From: dgw@term@n @end|ng |rom gm@||@com (David Waterman)
Date: Thu, 10 Jun 2021 09:42:54 +0100
Subject: [R] snapshot3d hangs during rmarkdown::render
Message-ID: <CAELX-2TfV3PV9CRNXKcniTEw+LWU8vdYXXV5zbsPsu7DMe5Zgg@mail.gmail.com>

Hi all,

I tried subscribing to the list yesterday, but this does not appear to
have been successful. Therefore I am hoping this message meets
volunteer moderator approval.

I have problems using snapshot3d from rgl while trying to render an R
Markdown page. I want to do this to capture static snapshots of an
interactive widget on the page. I had this working with an earlier
version of R (sorry, forgot which), but this now hangs indefinitely at
the snapshot3d call.

Should I expect this to work? I can successfully create a snapshot
from an interactive R session with either webshot=TRUE or FALSE, just
not from within my R Markdown build.

I have created a simple reproducer, which I attempt to build using:

library(rmarkdown)
rmarkdown::render("reproducer.Rmd")

where the contents of reproducer.Rmd are:

$ cat reproducer.Rmd
---
title: "rgl test"
output:
  html_document:
    toc: true
    toc_float:
      toc_collapsed: true
---

```{r, setup, echo=FALSE}
library(rgl)
library(knitr)
knitr::knit_hooks$set(webgl = hook_webgl)
```

### Insert rgl figure

Test

```{r, webgl=TRUE, echo=FALSE}
with(iris, plot3d(Sepal.Length, Sepal.Width, Petal.Length,
                  type="s", col=as.numeric(Species)))
snapshot3d("foo.png")
rglwidget()
rgl.close()
```
### END

Information about my R session:

> sessionInfo()
R version 4.1.0 (2021-05-18)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 18.04.5 LTS

Matrix products: default
BLAS:   /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.7.1
LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.7.1

locale:
 [1] LC_CTYPE=en_GB.UTF-8       LC_NUMERIC=C
 [3] LC_TIME=en_GB.UTF-8        LC_COLLATE=en_GB.UTF-8
 [5] LC_MONETARY=en_GB.UTF-8    LC_MESSAGES=en_GB.UTF-8
 [7] LC_PAPER=en_GB.UTF-8       LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_GB.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] webshot2_0.0.0.9000 chromote_0.0.0.9003 rmarkdown_2.8
[4] rgl_0.106.8         knitr_1.33

loaded via a namespace (and not attached):
 [1] Rcpp_1.0.6              digest_0.6.27           later_1.2.0
 [4] mime_0.10               R6_2.5.0                lifecycle_1.0.0
 [7] xtable_1.8-4            jsonlite_1.7.2          magrittr_2.0.1
[10] evaluate_0.14           rlang_0.4.11            miniUI_0.1.1.1
[13] promises_1.2.0.1        ellipsis_0.3.2          tools_4.1.0
[16] manipulateWidget_0.11.0 htmlwidgets_1.5.3       crosstalk_1.1.1
[19] shiny_1.6.0             fastmap_1.1.0           httpuv_1.6.1
[22] xfun_0.23               compiler_4.1.0          htmltools_0.5.1.1

I got R from an Ubuntu package:

$ dpkg -s r-base-core|head
Package: r-base-core
Status: install ok installed
Priority: optional
Section: gnu-r
Installed-Size: 40697
Maintainer: Dirk Eddelbuettel <edd at debian.org>
Architecture: amd64
Source: r-base
Version: 4.1.0-1.1804.0
Replaces: r-base (<= 1.4.1-1), r-base-latex (<= 2.9.2-4),
r-cran-rcompgen (<= 0.1-17-1), r-gnome (<= 2.3.1), r-recommended (<<
1.9.0)

which came from here:

$ grep "r-project" /etc/apt/sources.list
deb https://cloud.r-project.org/bin/linux/ubuntu bionic-cran40/
# deb-src https://cloud.r-project.org/bin/linux/ubuntu bionic-cran40/

Many thanks,

David Waterman
STFC Computational Scientist


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Jun 10 13:23:01 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 10 Jun 2021 07:23:01 -0400
Subject: [R] snapshot3d hangs during rmarkdown::render
In-Reply-To: <CAELX-2TfV3PV9CRNXKcniTEw+LWU8vdYXXV5zbsPsu7DMe5Zgg@mail.gmail.com>
References: <CAELX-2TfV3PV9CRNXKcniTEw+LWU8vdYXXV5zbsPsu7DMe5Zgg@mail.gmail.com>
Message-ID: <3608fdc1-e007-4eef-3550-037ed12582fb@gmail.com>

I've seen this recently as well.  I've done a bunch of updating recently 
(R to 4.1.0, chromote to the latest devel version, Chrome to a new 
release) and it's probably related to one of those, but I'm not sure 
which.  What I've found is that the lockup occurs in chromote, and 
that's suspicious but not necessarily proof of the source of the problem.

Do you have the same problems if you install the older file

https://github.com/dmurdoch/drat/blob/gh-pages/src/contrib/chromote_0.0.0.9002.tar.gz

?

Duncan Murdoch

On 10/06/2021 4:42 a.m., David Waterman wrote:
> Hi all,
> 
> I tried subscribing to the list yesterday, but this does not appear to
> have been successful. Therefore I am hoping this message meets
> volunteer moderator approval.
> 
> I have problems using snapshot3d from rgl while trying to render an R
> Markdown page. I want to do this to capture static snapshots of an
> interactive widget on the page. I had this working with an earlier
> version of R (sorry, forgot which), but this now hangs indefinitely at
> the snapshot3d call.
> 
> Should I expect this to work? I can successfully create a snapshot
> from an interactive R session with either webshot=TRUE or FALSE, just
> not from within my R Markdown build.
> 
> I have created a simple reproducer, which I attempt to build using:
> 
> library(rmarkdown)
> rmarkdown::render("reproducer.Rmd")
> 
> where the contents of reproducer.Rmd are:
> 
> $ cat reproducer.Rmd
> ---
> title: "rgl test"
> output:
>    html_document:
>      toc: true
>      toc_float:
>        toc_collapsed: true
> ---
> 
> ```{r, setup, echo=FALSE}
> library(rgl)
> library(knitr)
> knitr::knit_hooks$set(webgl = hook_webgl)
> ```
> 
> ### Insert rgl figure
> 
> Test
> 
> ```{r, webgl=TRUE, echo=FALSE}
> with(iris, plot3d(Sepal.Length, Sepal.Width, Petal.Length,
>                    type="s", col=as.numeric(Species)))
> snapshot3d("foo.png")
> rglwidget()
> rgl.close()
> ```
> ### END
> 
> Information about my R session:
> 
>> sessionInfo()
> R version 4.1.0 (2021-05-18)
> Platform: x86_64-pc-linux-gnu (64-bit)
> Running under: Ubuntu 18.04.5 LTS
> 
> Matrix products: default
> BLAS:   /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.7.1
> LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.7.1
> 
> locale:
>   [1] LC_CTYPE=en_GB.UTF-8       LC_NUMERIC=C
>   [3] LC_TIME=en_GB.UTF-8        LC_COLLATE=en_GB.UTF-8
>   [5] LC_MONETARY=en_GB.UTF-8    LC_MESSAGES=en_GB.UTF-8
>   [7] LC_PAPER=en_GB.UTF-8       LC_NAME=C
>   [9] LC_ADDRESS=C               LC_TELEPHONE=C
> [11] LC_MEASUREMENT=en_GB.UTF-8 LC_IDENTIFICATION=C
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
> 
> other attached packages:
> [1] webshot2_0.0.0.9000 chromote_0.0.0.9003 rmarkdown_2.8
> [4] rgl_0.106.8         knitr_1.33
> 
> loaded via a namespace (and not attached):
>   [1] Rcpp_1.0.6              digest_0.6.27           later_1.2.0
>   [4] mime_0.10               R6_2.5.0                lifecycle_1.0.0
>   [7] xtable_1.8-4            jsonlite_1.7.2          magrittr_2.0.1
> [10] evaluate_0.14           rlang_0.4.11            miniUI_0.1.1.1
> [13] promises_1.2.0.1        ellipsis_0.3.2          tools_4.1.0
> [16] manipulateWidget_0.11.0 htmlwidgets_1.5.3       crosstalk_1.1.1
> [19] shiny_1.6.0             fastmap_1.1.0           httpuv_1.6.1
> [22] xfun_0.23               compiler_4.1.0          htmltools_0.5.1.1
> 
> I got R from an Ubuntu package:
> 
> $ dpkg -s r-base-core|head
> Package: r-base-core
> Status: install ok installed
> Priority: optional
> Section: gnu-r
> Installed-Size: 40697
> Maintainer: Dirk Eddelbuettel <edd at debian.org>
> Architecture: amd64
> Source: r-base
> Version: 4.1.0-1.1804.0
> Replaces: r-base (<= 1.4.1-1), r-base-latex (<= 2.9.2-4),
> r-cran-rcompgen (<= 0.1-17-1), r-gnome (<= 2.3.1), r-recommended (<<
> 1.9.0)
> 
> which came from here:
> 
> $ grep "r-project" /etc/apt/sources.list
> deb https://cloud.r-project.org/bin/linux/ubuntu bionic-cran40/
> # deb-src https://cloud.r-project.org/bin/linux/ubuntu bionic-cran40/
> 
> Many thanks,
> 
> David Waterman
> STFC Computational Scientist
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From wewo|@k| @end|ng |rom gm@||@com  Thu Jun 10 13:50:04 2021
From: wewo|@k| @end|ng |rom gm@||@com (Witold E Wolski)
Date: Thu, 10 Jun 2021 13:50:04 +0200
Subject: [R] Package installation for 4.1 on windows.
In-Reply-To: <52ba966a-270a-df2e-1c83-d8b219b36c2d@gmail.com>
References: <CAAjnpdhz2RjCBtEUA75p4FUGJ2nqU7DgDPrMRe=BVLWniTZX5A@mail.gmail.com>
 <52ba966a-270a-df2e-1c83-d8b219b36c2d@gmail.com>
Message-ID: <CAAjnpdixSBJp2GABFyMBMU836MF4YXx9b1fh+x-34zmLHryLSw@mail.gmail.com>

Dear Duncan,

Thank you. Indeed I did had the R_LIBS_USER env. variable defined.

Best regards
Witold

On Mon, 7 Jun 2021 at 17:48, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> On 07/06/2021 10:37 a.m., Witold E Wolski wrote:
> > Hello,
> >
> > I just installed R 4.1 and now trying to update install some packages.
> >
> > R version 4.1.0 (2021-05-18) -- "Camp Pontanezen"
> > Copyright (C) 2021 The R Foundation for Statistical Computing
> >
> > But when installing packages I read:
> >
> > Installing packages into ?C:/Users/wolski/Documents/R/win-library/4.0?
> >
> > Should not be a win-library/4.1. package directory be used by default?
> >
>
> I suspect something in your local setup specifies that directory.  The
> usual place to install is the directory where R was installed; it only
> switches to the user home directory if that fails, or the user requests it.
>
> Duncan Murdoch



-- 
Witold Eryk Wolski


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Jun 10 15:24:53 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 10 Jun 2021 09:24:53 -0400
Subject: [R] snapshot3d hangs during rmarkdown::render
In-Reply-To: <CAELX-2TfV3PV9CRNXKcniTEw+LWU8vdYXXV5zbsPsu7DMe5Zgg@mail.gmail.com>
References: <CAELX-2TfV3PV9CRNXKcniTEw+LWU8vdYXXV5zbsPsu7DMe5Zgg@mail.gmail.com>
Message-ID: <62da9ad9-93d7-aee6-efc7-66e5d24af0a2@gmail.com>

On 10/06/2021 4:42 a.m., David Waterman wrote:
> Hi all,
> 
> I tried subscribing to the list yesterday, but this does not appear to
> have been successful. Therefore I am hoping this message meets
> volunteer moderator approval.
> 
> I have problems using snapshot3d from rgl while trying to render an R
> Markdown page. I want to do this to capture static snapshots of an
> interactive widget on the page. I had this working with an earlier
> version of R (sorry, forgot which), but this now hangs indefinitely at
> the snapshot3d call.
> 
> Should I expect this to work? I can successfully create a snapshot
> from an interactive R session with either webshot=TRUE or FALSE, just
> not from within my R Markdown build.
> 
> I have created a simple reproducer, which I attempt to build using:
> 
> library(rmarkdown)
> rmarkdown::render("reproducer.Rmd")
> 
> where the contents of reproducer.Rmd are:
> 
> $ cat reproducer.Rmd
> ---
> title: "rgl test"
> output:
>    html_document:
>      toc: true
>      toc_float:
>        toc_collapsed: true
> ---
> 
> ```{r, setup, echo=FALSE}
> library(rgl)
> library(knitr)
> knitr::knit_hooks$set(webgl = hook_webgl)
> ```
> 
> ### Insert rgl figure
> 
> Test
> 
> ```{r, webgl=TRUE, echo=FALSE}
> with(iris, plot3d(Sepal.Length, Sepal.Width, Petal.Length,
>                    type="s", col=as.numeric(Species)))
> snapshot3d("foo.png")
> rglwidget()
> rgl.close()
> ```

One suggestion I forgot:  try snapshot3d("foo.png", webshot = FALSE). 
This should fall back to the internal snapshot code in rgl.  You 
generally don't get as good quality of a result, but if you are not 
running on a headless system it will generally work.

Duncan Murdoch


From d@v|d@@teven@ @end|ng |rom u@u@edu  Thu Jun 10 16:52:09 2021
From: d@v|d@@teven@ @end|ng |rom u@u@edu (David K Stevens)
Date: Thu, 10 Jun 2021 08:52:09 -0600
Subject: [R] 
 [EXT] Re: Beginner problem - using mod function to print odd numbers
In-Reply-To: <CAHqSRuS5tOjb9M4OFe50r3e+d-7tQkmP3-RVdOz3uZ3=k62DEw@mail.gmail.com>
References: <1622657870092-0.post-5018@n4.nabble.com>
 <A1013F52-3C4D-4BAE-B058-6E7E9FAF9D6C@collocations.de>
 <CAA99HCxUROK8_Lm+cYqBVH6AemB_btfRtAZVUtOiMESdSZaxgw@mail.gmail.com>
 <CAE-dL2onx4GK4YtBgPH_nYRy28wx_1EteYvUK7r9KC9A56y+XA@mail.gmail.com>
 <24768.36892.831829.846776@stat.math.ethz.ch>
 <CAHqSRuS5tOjb9M4OFe50r3e+d-7tQkmP3-RVdOz3uZ3=k62DEw@mail.gmail.com>
Message-ID: <2dd596de-af74-2e32-15d0-91212bdd32ea@usu.edu>

This thread, in addition to being a nice Thursday morning chuckle, 
should be de rigueur for 'R 101' users. It illustrates much of the 
thinking behind R in a very simple way, without taking itself too 
seriously. Well done all!

David Stevens
**/**/

On 6/9/2021 8:35 AM, Bill Dunlap wrote:
> Martin wrote
>    Use
>        num[num %% 2 == 1]
>    instead of much slower and ...@#^$
>        num[ifelse(num %% 2 == 1, TRUE, FALSE)]
>
> Read the '[' as 'such that' when the subscript is logical
> (=="Boolean"==TRUE/FALSE-values).
>
> [The original post had a typo/thinko, num<-num+i instead of num<-num+1,
> which was simply an error, not a matter of style.  R's vectorization makes
> it easy to avoid such errors.]
>
> -Bill
>
> On Wed, Jun 9, 2021 at 2:56 AM Martin Maechler <maechler at stat.math.ethz.ch>
> wrote:
>
>>>>>>> David Carlson    on Sun, 6 Jun 2021 15:21:34 -0400 writes:
>>> There is really no need for a loop:
>>> num <- 1:100
>>> num[ifelse(num %% 2 == 1, TRUE, FALSE)]
>>> [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43 45
>> 47 49
>>> [26] 51 53 55 57 59 61 63 65 67 69 71 73 75 77 79 81 83 85 87 89 91 93
>> 95 97 99
>>
>> Well, and the above "works" but is really another proof of my
>> year-long claim that people use  ifelse(.)  *MUCH MUCH* too often,
>> and should really learn to use alternatives, in this case,
>> "R 101" (*long* before fooverse):
>>
>> Use
>>
>>      num[num %% 2 == 1]
>>
>> instead of much slower and ...@#^$
>>
>>      num[ifelse(num %% 2 == 1, TRUE, FALSE)]
>>
>> Martin Maechler
>> ETH Zurich
>>
>>> On Sat, Jun 5, 2021 at 2:05 PM William Michels via R-help
>>> <r-help at r-project.org> wrote:
>>      >>
>>      >> > i <- 1L; span <- 1:100; result <- NA;
>>      >> > for (i in span){
>>      >> + ifelse(i %% 2 != 0, result[i] <- TRUE, result[i] <- FALSE)
>>      >> + }
>>      >> > span[result]
>>      >> [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41
>> 43
>>
>>   [............]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>          [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> CAUTION: This email originated from outside of USU. If this appears to be a USU employee, beware of impersonators. Do not click links, reply, download images, or open attachments unless you verify the sender?s identity and know the content is safe.
>
-- 
David K Stevens, PhD,PE
Professor
Civil and Environmental Engineering
Utah State University
Logan, UT 84322-8200
david.stevens at usu.edu
014357973229


	[[alternative HTML version deleted]]


From dgw@term@n @end|ng |rom gm@||@com  Thu Jun 10 17:33:16 2021
From: dgw@term@n @end|ng |rom gm@||@com (David Waterman)
Date: Thu, 10 Jun 2021 16:33:16 +0100
Subject: [R] snapshot3d hangs during rmarkdown::render
In-Reply-To: <62da9ad9-93d7-aee6-efc7-66e5d24af0a2@gmail.com>
References: <CAELX-2TfV3PV9CRNXKcniTEw+LWU8vdYXXV5zbsPsu7DMe5Zgg@mail.gmail.com>
 <62da9ad9-93d7-aee6-efc7-66e5d24af0a2@gmail.com>
Message-ID: <CAELX-2Ratf8af+1C9gX7cHWivtUG9yCAVb-OCkOSixAABgugUQ@mail.gmail.com>

Hi Duncan,

Ah, thanks! I should have thought of that as I already tried
webshot=TRUE/FALSE in an interactive R session, but did not think to
put that in my R Markdown. I can confirm that this workaround is
successful. I can then also confirm that installing chromote
0.0.0.9002 means that I can then use webshot=TRUE.

Thanks for your help.

-- David

On Thu, 10 Jun 2021 at 14:24, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> On 10/06/2021 4:42 a.m., David Waterman wrote:
> > Hi all,
> >
> > I tried subscribing to the list yesterday, but this does not appear to
> > have been successful. Therefore I am hoping this message meets
> > volunteer moderator approval.
> >
> > I have problems using snapshot3d from rgl while trying to render an R
> > Markdown page. I want to do this to capture static snapshots of an
> > interactive widget on the page. I had this working with an earlier
> > version of R (sorry, forgot which), but this now hangs indefinitely at
> > the snapshot3d call.
> >
> > Should I expect this to work? I can successfully create a snapshot
> > from an interactive R session with either webshot=TRUE or FALSE, just
> > not from within my R Markdown build.
> >
> > I have created a simple reproducer, which I attempt to build using:
> >
> > library(rmarkdown)
> > rmarkdown::render("reproducer.Rmd")
> >
> > where the contents of reproducer.Rmd are:
> >
> > $ cat reproducer.Rmd
> > ---
> > title: "rgl test"
> > output:
> >    html_document:
> >      toc: true
> >      toc_float:
> >        toc_collapsed: true
> > ---
> >
> > ```{r, setup, echo=FALSE}
> > library(rgl)
> > library(knitr)
> > knitr::knit_hooks$set(webgl = hook_webgl)
> > ```
> >
> > ### Insert rgl figure
> >
> > Test
> >
> > ```{r, webgl=TRUE, echo=FALSE}
> > with(iris, plot3d(Sepal.Length, Sepal.Width, Petal.Length,
> >                    type="s", col=as.numeric(Species)))
> > snapshot3d("foo.png")
> > rglwidget()
> > rgl.close()
> > ```
>
> One suggestion I forgot:  try snapshot3d("foo.png", webshot = FALSE).
> This should fall back to the internal snapshot code in rgl.  You
> generally don't get as good quality of a result, but if you are not
> running on a headless system it will generally work.
>
> Duncan Murdoch


From @bdu||@hkh@@@wneh @end|ng |rom hotm@||@com  Fri Jun 11 07:40:35 2021
From: @bdu||@hkh@@@wneh @end|ng |rom hotm@||@com (Abdullah Khasawneh)
Date: Fri, 11 Jun 2021 05:40:35 +0000
Subject: [R] Comments on "Introduction to R"
Message-ID: <VI1PR02MB377334419116F317E7345570B0349@VI1PR02MB3773.eurprd02.prod.outlook.com>

Dear all,

I have recently finished reading "Introduction to R" and enjoyed it and benefited from it immensely. Thank you very much for your efforts.

I feel the word "corrections" is a bit presumptuous, so below are a few suggestions I have regarding the text. Please let me know if I am mistaken in any.

Thank you again.

Best regards,
Abdullah Khasawneh

----------------------------------------------------------------

Page 2:
(Indeed most of the system supplied functions are themselves written in the S language.)\
I suggest a hyphen between the two highlighted words.

Page 2:
We prefer to think of it of an environment within which many classical and modern statistical techniques have been implemented.
Perhaps "as an environment"?

Page 4:
The ?Search Engine and Keywords? link in the page loaded by help.start() is particularly useful as it is contains a high-level concept list which searches though available functions.
I think these should be "as it contains" and "through".

Page 5:
Commands are separated either by a semi-colon (?;?), or by a newline.
I think the two words have been connected inadvertently.

Page 6:
When R is started at later time from the same directory it reloads the workspace from this file.
I think it's "at a later time".

Page 6:
... but it can be quite hard to decide what they might be when the several analyses have been conducted in the same directory.
Perhaps it should be "when several analyses", without "the".

Page 7:
Notice that the assignment operator (?<-?), which consists of the two characters ?<? (?less than?) and ?-? (?minus?) occurring strictly side-by-side and it ?points? to the object receiving the value of the expression.
I suggest a comma here, and deleting "and it".

Page 14:
Similarly character() is a empty character vector, and so on.
It should be "an empty". Also, a comma after "similarly" would be nice.

Page 14:
... makes it an object of length 5 consisting of just the former components with even index.
Should it be "with even indices"?

Page 17:
Since there is an builtin function var() to calculate...
I suggest "a built-in".

Page 17:
Note that R?s a builtin function sd() is something different.
There is no need for the indefinite article, and perhaps "built-in" should be hyphenated.

Page 20:
For example, if the vector h contains 24 or fewer, numbers then the command...
The comma should be after the word "numbers".

Page 20:
... would use h to set up 3 by 4 by 2 array in Z.
I believe it's "a 3-by-4-by-2". I am not sure about the hyphenation, but there should be an indefinite article.

Page 21:
The result of the function is an array of the same size as a but with old dimension given by perm[j] becoming the new j-th dimension.
It's "with the old dimension".

Page 24:
In this case any vector argument, possibly cyclically extended, are of course taken as row vectors.
Either "argument" should be pluralized, or other parts of the sentence singularized.

Page 27:
... and by default1 character vectors are coerced to be factors, whose levels are the unique values appearing in the vector.
Unfortunately, in the current edition of R, they are coerced to be character variables, if I'm not mistaken.

Page 30:
By default numeric items (except row labels) are read as numeric variables and non-numeric variables, such as Cent.heat in the example, as factors.
I suggest a comma after "By default". Also, please refer to the note above about coercion into factors.

Page 47:
... it replaces the value, in that environment, with the value of right hand side.
Maybe it should be "of the right-hand side".

Page 54:
... (Akaike?s An Information Criterion)...
I think it's "Akaike information criterion".

Page 63:
Although this is done automatically, it may useful to know that...
This is missing the verb "be".

Page 66:
Also lm.obj may be list with a coefficients component of length 2...
I recommend adding the indefinite article "a" before the word "list".

Page 68:
The identify() functions performs no plotting itself, but...
The word "functions" is pluralized.

Page 76:
R does not have builtin capabilities for dynamic or interactive graphics, e.g. rotating point clouds or to ?brushing? (interactively highlighting) points.
I suggest a hyphen in "built-in", and perhaps "for" instead of "to".

Page 79:
... platforms, considerable effort has gone into make the scripting facilities as platform-independent as is feasible.
The gerund "making" should be used here.

End of list.
Thank you for your patience.
----------------------------------------------------------------

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Fri Jun 11 11:05:50 2021
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Fri, 11 Jun 2021 19:05:50 +1000
Subject: [R] Comments on "Introduction to R"
In-Reply-To: <VI1PR02MB377334419116F317E7345570B0349@VI1PR02MB3773.eurprd02.prod.outlook.com>
References: <VI1PR02MB377334419116F317E7345570B0349@VI1PR02MB3773.eurprd02.prod.outlook.com>
Message-ID: <CA+8X3fVDLrwa+v8xRDoiR0W=LzEhGTAmxvyryFdYLmePD-_qoA@mail.gmail.com>

Hi Abdullah,
A good job of proof reading, something too often neglected in documentation.

Jim

On Fri, Jun 11, 2021 at 4:51 PM Abdullah Khasawneh
<abdullahkhasawneh at hotmail.com> wrote:
>
> Dear all,
>
> I have recently finished reading "Introduction to R" and enjoyed it and benefited from it immensely. Thank you very much for your efforts.
>
> I feel the word "corrections" is a bit presumptuous, so below are a few suggestions I have regarding the text. Please let me know if I am mistaken in any.
>
> Thank you again.
>
> Best regards,
> Abdullah Khasawneh
>
> ----------------------------------------------------------------
>
> Page 2:
> (Indeed most of the system supplied functions are themselves written in the S language.)\
> I suggest a hyphen between the two highlighted words.
>
> Page 2:
> We prefer to think of it of an environment within which many classical and modern statistical techniques have been implemented.
> Perhaps "as an environment"?
>
> Page 4:
> The ?Search Engine and Keywords? link in the page loaded by help.start() is particularly useful as it is contains a high-level concept list which searches though available functions.
> I think these should be "as it contains" and "through".
>
> Page 5:
> Commands are separated either by a semi-colon (?;?), or by a newline.
> I think the two words have been connected inadvertently.
>
> Page 6:
> When R is started at later time from the same directory it reloads the workspace from this file.
> I think it's "at a later time".
>
> Page 6:
> ... but it can be quite hard to decide what they might be when the several analyses have been conducted in the same directory.
> Perhaps it should be "when several analyses", without "the".
>
> Page 7:
> Notice that the assignment operator (?<-?), which consists of the two characters ?<? (?less than?) and ?-? (?minus?) occurring strictly side-by-side and it ?points? to the object receiving the value of the expression.
> I suggest a comma here, and deleting "and it".
>
> Page 14:
> Similarly character() is a empty character vector, and so on.
> It should be "an empty". Also, a comma after "similarly" would be nice.
>
> Page 14:
> ... makes it an object of length 5 consisting of just the former components with even index.
> Should it be "with even indices"?
>
> Page 17:
> Since there is an builtin function var() to calculate...
> I suggest "a built-in".
>
> Page 17:
> Note that R?s a builtin function sd() is something different.
> There is no need for the indefinite article, and perhaps "built-in" should be hyphenated.
>
> Page 20:
> For example, if the vector h contains 24 or fewer, numbers then the command...
> The comma should be after the word "numbers".
>
> Page 20:
> ... would use h to set up 3 by 4 by 2 array in Z.
> I believe it's "a 3-by-4-by-2". I am not sure about the hyphenation, but there should be an indefinite article.
>
> Page 21:
> The result of the function is an array of the same size as a but with old dimension given by perm[j] becoming the new j-th dimension.
> It's "with the old dimension".
>
> Page 24:
> In this case any vector argument, possibly cyclically extended, are of course taken as row vectors.
> Either "argument" should be pluralized, or other parts of the sentence singularized.
>
> Page 27:
> ... and by default1 character vectors are coerced to be factors, whose levels are the unique values appearing in the vector.
> Unfortunately, in the current edition of R, they are coerced to be character variables, if I'm not mistaken.
>
> Page 30:
> By default numeric items (except row labels) are read as numeric variables and non-numeric variables, such as Cent.heat in the example, as factors.
> I suggest a comma after "By default". Also, please refer to the note above about coercion into factors.
>
> Page 47:
> ... it replaces the value, in that environment, with the value of right hand side.
> Maybe it should be "of the right-hand side".
>
> Page 54:
> ... (Akaike?s An Information Criterion)...
> I think it's "Akaike information criterion".
>
> Page 63:
> Although this is done automatically, it may useful to know that...
> This is missing the verb "be".
>
> Page 66:
> Also lm.obj may be list with a coefficients component of length 2...
> I recommend adding the indefinite article "a" before the word "list".
>
> Page 68:
> The identify() functions performs no plotting itself, but...
> The word "functions" is pluralized.
>
> Page 76:
> R does not have builtin capabilities for dynamic or interactive graphics, e.g. rotating point clouds or to ?brushing? (interactively highlighting) points.
> I suggest a hyphen in "built-in", and perhaps "for" instead of "to".
>
> Page 79:
> ... platforms, considerable effort has gone into make the scripting facilities as platform-independent as is feasible.
> The gerund "making" should be used here.
>
> End of list.
> Thank you for your patience.
> ----------------------------------------------------------------
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From enr|cog@br|e|||76@per@gr @end|ng |rom gm@||@com  Fri Jun 11 16:15:06 2021
From: enr|cog@br|e|||76@per@gr @end|ng |rom gm@||@com (Enrico Gabrielli)
Date: Fri, 11 Jun 2021 16:15:06 +0200
Subject: [R] with replace na with 0?
Message-ID: <4469e1315b44f08fdd37d2c89db20de4967a3a43.camel@gmail.com>

Hello
I almost got through the problem in post "aggregation of irregular
interval time-series"
I just don't understand how to fix that when I try
''
with(datatable,ifelse(is.na(x),y,x))
''
if y is na
replaces me with 0
and not with na

Thank you
-- 
Perito agrario Enrico Gabrielli
Tessera n. 633 Collegio Periti agrari prov. Di Modena
Biblioteca agricoltura: https://www.zotero.org/groups/aplomb/
https://it.linkedin.com/pub/enrico-gabrielli/9a/186/159
https://enricogabrielli76.wordpress.com/
https://www.inaturalist.org/observations/bonushenricus
skype: enricogabrielli (enricogabrielli76.peragr at gmail.com)


From bgunter@4567 @end|ng |rom gm@||@com  Fri Jun 11 16:24:40 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 11 Jun 2021 07:24:40 -0700
Subject: [R] with replace na with 0?
In-Reply-To: <4469e1315b44f08fdd37d2c89db20de4967a3a43.camel@gmail.com>
References: <4469e1315b44f08fdd37d2c89db20de4967a3a43.camel@gmail.com>
Message-ID: <CAGxFJbTJvHMXiw9LCNyo8ohQ+5vphHJVNgnZLXap2LoobL80nw@mail.gmail.com>

reprex?

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Jun 11, 2021 at 7:23 AM Enrico Gabrielli <
enricogabrielli76.peragr at gmail.com> wrote:

> Hello
> I almost got through the problem in post "aggregation of irregular
> interval time-series"
> I just don't understand how to fix that when I try
> ''
> with(datatable,ifelse(is.na(x),y,x))
> ''
> if y is na
> replaces me with 0
> and not with na
>
> Thank you
> --
> Perito agrario Enrico Gabrielli
> Tessera n. 633 Collegio Periti agrari prov. Di Modena
> Biblioteca agricoltura: https://www.zotero.org/groups/aplomb/
> https://it.linkedin.com/pub/enrico-gabrielli/9a/186/159
> https://enricogabrielli76.wordpress.com/
> https://www.inaturalist.org/observations/bonushenricus
> skype: enricogabrielli (enricogabrielli76.peragr at gmail.com)
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @zwj|08 @end|ng |rom gm@||@com  Fri Jun 11 16:37:02 2021
From: @zwj|08 @end|ng |rom gm@||@com (Jiefei Wang)
Date: Fri, 11 Jun 2021 22:37:02 +0800
Subject: [R] with replace na with 0?
In-Reply-To: <4469e1315b44f08fdd37d2c89db20de4967a3a43.camel@gmail.com>
References: <4469e1315b44f08fdd37d2c89db20de4967a3a43.camel@gmail.com>
Message-ID: <CAGiFhPPgwZOb2YV+-pfH-nXPsmy9tBSO8_UdWOV9tsGE+P6uiQ@mail.gmail.com>

Hi,

I did not follow your previous post but your code looks confusing to me

with(datatable,ifelse(is.na(x),y,x))

Why do you have 'x' in the first place if all you want is to do the
operation on y? It's like you want to count how many apples you have
but your eyes are looking at peaches. Please rethink your code and
what you want to achieve.

Best,
Jiefei

On Fri, Jun 11, 2021 at 10:23 PM Enrico Gabrielli
<enricogabrielli76.peragr at gmail.com> wrote:
>
> Hello
> I almost got through the problem in post "aggregation of irregular
> interval time-series"
> I just don't understand how to fix that when I try
> ''
> with(datatable,ifelse(is.na(x),y,x))
> ''
> if y is na
> replaces me with 0
> and not with na
>
> Thank you
> --
> Perito agrario Enrico Gabrielli
> Tessera n. 633 Collegio Periti agrari prov. Di Modena
> Biblioteca agricoltura: https://www.zotero.org/groups/aplomb/
> https://it.linkedin.com/pub/enrico-gabrielli/9a/186/159
> https://enricogabrielli76.wordpress.com/
> https://www.inaturalist.org/observations/bonushenricus
> skype: enricogabrielli (enricogabrielli76.peragr at gmail.com)
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From MF@|@on @end|ng |rom v@u@edu  Fri Jun 11 17:03:49 2021
From: MF@|@on @end|ng |rom v@u@edu (Milton O Faison)
Date: Fri, 11 Jun 2021 15:03:49 +0000
Subject: [R] question re: tidycensus
Message-ID: <BN0PR10MB4950C5AFB1981915257BF9A7A1349@BN0PR10MB4950.namprd10.prod.outlook.com>

Hi, all,

I'm having a new (for me) problem with tidycensus. When I attempt to pull data at the zcta level using get_acs, I get "GEOMETRYCOLLECTION EMPTY" in the geometry column. It does not happen when I pull data at the census tract level. This is also a fairly new problem, because I was using old code that I wrote and successfully generated maps from in the past. Any thoughts? Here are some code snippets that you can run to see what I am talking about:

zcta_test<-get_acs(geography="zcta",
                       variables=(c(all_pop = "B03002_001",
                                    white_pop = "B03002_003",
                                    black_pop = "B03002_004",
                                    latin_pop = "B03002_012")),
                       geometry=T, cache=T )

ct_test<-get_acs(geography="tract", state="51",
                 variables=(c(all_pop = "B03002_001",
                              white_pop = "B03002_003",
                              black_pop = "B03002_004",
                              latin_pop = "B03002_012")),
                 geometry=T, cache=T )

Thanks in advance for any help you can provide.

o
M. Omar Faison, Ph.D.
Associate Professor, Biology
Associate Vice President, Research, Economic Development, and Graduate Studies
Virginia State University
Petersburg, VA 23806
(804) 524-6793
http://twitter.com/omarfaison<https://urldefense.proofpoint.com/v2/url?u=http-3A__twitter.com_omarfaison&d=DwMFaQ&c=x0kF_uL9Aj8Nho9NV_Y5N0VRgus3JhNu4ET-UrQfa2c&r=IxtcqU8MuUxaq7uVsaxQkg&m=c2Jz-ZN8dT7jr1ymvzj06YmlEcGQKIlxGcJ241xeVvc&s=9hWiMv7VHiP6W763kVu0J8RpEijbsKpHXY9CDrs7buc&e=>
At VSU, we are proudly committed to providing a transformative experience for our students, strategically investing in our academic programs, embracing our position as a top Land Grant University, embracing our role as Virginia's Opportunity University, and partnering together as a University to tell our story.

"The information in this email and any attachments may be confidential and privileged. Access to this email by anyone other than the intended addressee is unauthorized. If you are not the intended recipient (or the employee or agent responsible for delivering this information to the intended recipient) please notify the sender by reply email and immediately delete this email and any copies from your computer and/or storage system. The sender does not authorize the use, distribution, disclosure or reproduction of this email (or any part of its contents) by anyone other than the intended recipient(s). No representation is made that this email and any attachments are free of viruses. Virus scanning is recommended and is the responsibility of the recipient."

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Fri Jun 11 17:20:06 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 11 Jun 2021 08:20:06 -0700
Subject: [R] question re: tidycensus
In-Reply-To: <BN0PR10MB4950C5AFB1981915257BF9A7A1349@BN0PR10MB4950.namprd10.prod.outlook.com>
References: <BN0PR10MB4950C5AFB1981915257BF9A7A1349@BN0PR10MB4950.namprd10.prod.outlook.com>
Message-ID: <CAGxFJbRuojxp=WiwGu=Pe+ZMw=XFh_VM3Gqbt3zSofoJHB9rKg@mail.gmail.com>

Have you read the posting guide, linked below, which says:

"For questions about functions in standard packages distributed with R (see
the FAQ Add-on packages in R
<https://cran.r-project.org/doc/FAQ/R-FAQ.html#Add-on-packages-in-R>), ask
questions on R-help.
If the question relates to a *contributed package* , e.g., one downloaded
from CRAN, try contacting the package maintainer first. You can also use
find("functionname") and packageDescription("packagename") to find this
information. *Only* send such questions to R-help or R-devel if you get no
reply or need further assistance. This applies to both requests for help
and to bug reports."

The "tidyverse" consists of contributed packages, so do not be surprised if
you do not receive a response here. Of course, if you have contacted the
maintainers, say so, but of course that doesn't guarantee a response.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Jun 11, 2021 at 8:04 AM Milton O Faison <MFaison at vsu.edu> wrote:

> Hi, all,
>
> I'm having a new (for me) problem with tidycensus. When I attempt to pull
> data at the zcta level using get_acs, I get "GEOMETRYCOLLECTION EMPTY" in
> the geometry column. It does not happen when I pull data at the census
> tract level. This is also a fairly new problem, because I was using old
> code that I wrote and successfully generated maps from in the past. Any
> thoughts? Here are some code snippets that you can run to see what I am
> talking about:
>
> zcta_test<-get_acs(geography="zcta",
>                        variables=(c(all_pop = "B03002_001",
>                                     white_pop = "B03002_003",
>                                     black_pop = "B03002_004",
>                                     latin_pop = "B03002_012")),
>                        geometry=T, cache=T )
>
> ct_test<-get_acs(geography="tract", state="51",
>                  variables=(c(all_pop = "B03002_001",
>                               white_pop = "B03002_003",
>                               black_pop = "B03002_004",
>                               latin_pop = "B03002_012")),
>                  geometry=T, cache=T )
>
> Thanks in advance for any help you can provide.
>
> o
> M. Omar Faison, Ph.D.
> Associate Professor, Biology
> Associate Vice President, Research, Economic Development, and Graduate
> Studies
> Virginia State University
> Petersburg, VA 23806
> (804) 524-6793
> http://twitter.com/omarfaison<
> https://urldefense.proofpoint.com/v2/url?u=http-3A__twitter.com_omarfaison&d=DwMFaQ&c=x0kF_uL9Aj8Nho9NV_Y5N0VRgus3JhNu4ET-UrQfa2c&r=IxtcqU8MuUxaq7uVsaxQkg&m=c2Jz-ZN8dT7jr1ymvzj06YmlEcGQKIlxGcJ241xeVvc&s=9hWiMv7VHiP6W763kVu0J8RpEijbsKpHXY9CDrs7buc&e=
> >
> At VSU, we are proudly committed to providing a transformative experience
> for our students, strategically investing in our academic programs,
> embracing our position as a top Land Grant University, embracing our role
> as Virginia's Opportunity University, and partnering together as a
> University to tell our story.
>
> "The information in this email and any attachments may be confidential and
> privileged. Access to this email by anyone other than the intended
> addressee is unauthorized. If you are not the intended recipient (or the
> employee or agent responsible for delivering this information to the
> intended recipient) please notify the sender by reply email and immediately
> delete this email and any copies from your computer and/or storage system.
> The sender does not authorize the use, distribution, disclosure or
> reproduction of this email (or any part of its contents) by anyone other
> than the intended recipient(s). No representation is made that this email
> and any attachments are free of viruses. Virus scanning is recommended and
> is the responsibility of the recipient."
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From MF@|@on @end|ng |rom v@u@edu  Fri Jun 11 17:32:52 2021
From: MF@|@on @end|ng |rom v@u@edu (Milton O Faison)
Date: Fri, 11 Jun 2021 15:32:52 +0000
Subject: [R] question re: tidycensus
In-Reply-To: <BN0PR10MB4950C5AFB1981915257BF9A7A1349@BN0PR10MB4950.namprd10.prod.outlook.com>
References: <BN0PR10MB4950C5AFB1981915257BF9A7A1349@BN0PR10MB4950.namprd10.prod.outlook.com>
Message-ID: <BN0PR10MB495061DF0163C278FFBE3E43A1349@BN0PR10MB4950.namprd10.prod.outlook.com>

The problem is resolved.

o

M. Omar Faison, Ph.D.
Associate Professor, Biology
Associate Vice President, Research, Economic Development, and Graduate Studies
Virginia State University
Petersburg, VA 23806
(804) 524-6793
http://twitter.com/omarfaison
At VSU, we are proudly committed to providing a transformative experience for our students, strategically investing in our academic programs, embracing our position as a top Land Grant University, embracing our role as Virginia?s Opportunity University, and partnering together as a University to tell our story.

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Milton O Faison
Sent: Friday, June 11, 2021 11:04 AM
To: r-help at R-project.org
Subject: [R] question re: tidycensus

[EMAIL FROM EXTERNAL SENDER] [Do not click links or open attachments unless you can confirm the sender and know the content is safe.]

Hi, all,

I'm having a new (for me) problem with tidycensus. When I attempt to pull data at the zcta level using get_acs, I get "GEOMETRYCOLLECTION EMPTY" in the geometry column. It does not happen when I pull data at the census tract level. This is also a fairly new problem, because I was using old code that I wrote and successfully generated maps from in the past. Any thoughts? Here are some code snippets that you can run to see what I am talking about:

zcta_test<-get_acs(geography="zcta",
                       variables=(c(all_pop = "B03002_001",
                                    white_pop = "B03002_003",
                                    black_pop = "B03002_004",
                                    latin_pop = "B03002_012")),
                       geometry=T, cache=T )

ct_test<-get_acs(geography="tract", state="51",
                 variables=(c(all_pop = "B03002_001",
                              white_pop = "B03002_003",
                              black_pop = "B03002_004",
                              latin_pop = "B03002_012")),
                 geometry=T, cache=T )

Thanks in advance for any help you can provide.

o
M. Omar Faison, Ph.D.
Associate Professor, Biology
Associate Vice President, Research, Economic Development, and Graduate Studies Virginia State University Petersburg, VA 23806
(804) 524-6793
https://urldefense.proofpoint.com/v2/url?u=http-3A__twitter.com_omarfaison&d=DwICAg&c=x0kF_uL9Aj8Nho9NV_Y5N0VRgus3JhNu4ET-UrQfa2c&r=IxtcqU8MuUxaq7uVsaxQkg&m=XhPOfl_j7ZHB6bCZibPPH67hk0TqkCT-EryOLREjd30&s=-Dr4LICOMPZZPalYZfcnmLhGdBAqE9yJZXjX-nGQpow&e= <https://urldefense.proofpoint.com/v2/url?u=http-3A__twitter.com_omarfaison&d=DwMFaQ&c=x0kF_uL9Aj8Nho9NV_Y5N0VRgus3JhNu4ET-UrQfa2c&r=IxtcqU8MuUxaq7uVsaxQkg&m=c2Jz-ZN8dT7jr1ymvzj06YmlEcGQKIlxGcJ241xeVvc&s=9hWiMv7VHiP6W763kVu0J8RpEijbsKpHXY9CDrs7buc&e=>
At VSU, we are proudly committed to providing a transformative experience for our students, strategically investing in our academic programs, embracing our position as a top Land Grant University, embracing our role as Virginia's Opportunity University, and partnering together as a University to tell our story.

"The information in this email and any attachments may be confidential and privileged. Access to this email by anyone other than the intended addressee is unauthorized. If you are not the intended recipient (or the employee or agent responsible for delivering this information to the intended recipient) please notify the sender by reply email and immediately delete this email and any copies from your computer and/or storage system. The sender does not authorize the use, distribution, disclosure or reproduction of this email (or any part of its contents) by anyone other than the intended recipient(s). No representation is made that this email and any attachments are free of viruses. Virus scanning is recommended and is the responsibility of the recipient."

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwICAg&c=x0kF_uL9Aj8Nho9NV_Y5N0VRgus3JhNu4ET-UrQfa2c&r=IxtcqU8MuUxaq7uVsaxQkg&m=XhPOfl_j7ZHB6bCZibPPH67hk0TqkCT-EryOLREjd30&s=QRP2OKyBRcfl93mIq6F159UuDSgEC62WqRDYl8ZPUf0&e=
PLEASE do read the posting guide https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwICAg&c=x0kF_uL9Aj8Nho9NV_Y5N0VRgus3JhNu4ET-UrQfa2c&r=IxtcqU8MuUxaq7uVsaxQkg&m=XhPOfl_j7ZHB6bCZibPPH67hk0TqkCT-EryOLREjd30&s=VG60V4vdazTZv1wM5Q0nvEh46A33pFBwkB0Bxa9jzEw&e=
and provide commented, minimal, self-contained, reproducible code.
?The information in this email and any attachments may be confidential and privileged. Access to this email by anyone other than the intended addressee is unauthorized. If you are not the intended recipient (or the employee or agent responsible for delivering this information to the intended recipient) please notify the sender by reply email and immediately delete this email and any copies from your computer and/or storage system. The sender does not authorize the use, distribution, disclosure or reproduction of this email (or any part of its contents) by anyone other than the intended recipient(s). No representation is made that this email and any attachments are free of viruses. Virus scanning is recommended and is the responsibility of the recipient.?
?The information in this email and any attachments may be confidential and privileged. Access to this email by anyone other than the intended addressee is unauthorized. If you are not the intended recipient (or the employee or agent responsible for delivering this information to the intended recipient) please notify the sender by reply email and immediately delete this email and any copies from your computer and/or storage system. The sender does not authorize the use, distribution, disclosure or reproduction of this email (or any part of its contents) by anyone other than the intended recipient(s). No representation is made that this email and any attachments are free of viruses. Virus scanning is recommended and is the responsibility of the recipient.?

From debb|e @end|ng |rom uc|@edu  Fri Jun 11 19:02:16 2021
From: debb|e @end|ng |rom uc|@edu (Debbie Hahs-Vaughn)
Date: Fri, 11 Jun 2021 17:02:16 +0000
Subject: [R] Identifying words from a list and code as 0 or 1 and words NOT
 on the list code as 1
Message-ID: <BN6PR11MB16035EF3319E9C5A895D6085DD349@BN6PR11MB1603.namprd11.prod.outlook.com>

I am working with utterances, statements spoken by children.  From each utterance, if one or more words in the statement match a predefined list of multiple 'core' words (probably 300 words), then I want to input '1' into 'Core' (and if none, then input '0' into 'Core').

If there are one or more words in the statement that are NOT core words, then I want to input '1' into 'Fringe' (and if there are only core words and nothing extra, then input '0' into 'Fringe').  I will not have a list of Fringe words.

Basically, right now I have a child ID and only the utterances.  Here is a snippet of my data.

ID      Utterance
1       a baby
2       small
3       yes
4       where's his bed
5       there's his bed
6       where's his pillow
7       what is that on his head
8       hey he has his arm stuck here
9       there there's it
10      now you're gonna go night-night
11      and that's the thing you can turn on
12      yeah where's the music box
13      what is this
14      small
15      there you go baby


The following code runs but isn't doing exactly what I need--which is:  1) the ability to detect words from the list and define as core; 2) the ability to search the utterance and if there are any words in the utterance that are NOT core, to identify those as ?1? as I will not have a list of fringe words.

```

library(dplyr)
library(stringr)
library(tidyr)

coreWords <-c("I", "no", "yes", "my", "the", "want", "is", "it", "that", "a", "go", "mine", "you", "what", "on", "in", "here", "more", "out", "off", "some", "help", "all done", "finished")

str_detect(df,)

dfplus <- df %>%
  mutate(id = row_number()) %>%
  separate_rows(Utterance, sep = ' ') %>%
  mutate(Core = + str_detect(Utterance, str_c(coreWords, collapse = '|')),
         Fringe = + !Core) %>%
  group_by(id) %>%
  mutate(Core = + (sum(Core) > 0),
         Fringe = + (sum(Fringe) > 0)) %>%
  slice(1) %>%
  select(-Utterance) %>%
  left_join(df) %>%
  ungroup() %>%
  select(Utterance, Core, Fringe, ID)

```

The dput() code is:

structure(list(Utterance = c("a baby", "small", "yes", "where's his bed",
"there's his bed", "where's his pillow", "what is that on his head",
"hey he has his arm stuck here", "there there's it", "now you're gonna go night-night",
"and that's the thing you can turn on", "yeah where's the music box",
"what is this", "small", "there you go baby ", "what is this for ",
"a ", "and the go goodnight here ", "and what is this ", " what's that sound ",
"what does she say ", "what she say", "should I turn the on so Laura doesn't cry ",
"what is this ", "what is that ", "where's clothes ", " where's the baby's bedroom ",
"that might be in dad's bed+room ", "yes ", "there you go baby ",
"you're welcome "), Core = c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
1L, 1L, 1L, 1L, 1L, 1L, 1L), Fringe = c(0L, 0L, 0L, 1L, 1L, 1L,
0L, 1L, 0L, 1L, 1L, 1L, 0L, 0L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), ID = 1:31), row.names = c(NA,
-31L), class = c("tbl_df", "tbl", "data.frame"))

```

The first 10 rows of output looks like this:

Utterance       Core    Fringe  ID
1       a baby  1       0       1
2       small   1       0       2
3       yes     1       0       3
4       where's his bed 1       1       4
5       there's his bed 1       1       5
6       where's his pillow      1       1       6
7       what is that on his head        1       0       7
8       hey he has his arm stuck here   1       1       8
9       there there's it        1       0       9
10      now you're gonna go night-night 1       1       10

For example, in line 1 of the output, ?a? is a core word so ?1? for core is correct.  However, ?baby? should be picked up as fringe so there should be ?1?, not ?0?, for fringe. Lines 7 and 9 also have words that should be identified as fringe but are not.

Additionally, it seems like if the utterance has parts of a core word in it, it?s being counted. For example, ?small? is identified as a core word even though it's not (but 'all done' is a core word). 'Where's his bed' is identified as core and fringe, although none of the words are core.

Any suggestions on what is happening and how to correct it are greatly appreciated.

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Fri Jun 11 20:03:49 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Fri, 11 Jun 2021 19:03:49 +0100
Subject: [R] 
 Identifying words from a list and code as 0 or 1 and words NOT
 on the list code as 1
In-Reply-To: <BN6PR11MB16035EF3319E9C5A895D6085DD349@BN6PR11MB1603.namprd11.prod.outlook.com>
References: <BN6PR11MB16035EF3319E9C5A895D6085DD349@BN6PR11MB1603.namprd11.prod.outlook.com>
Message-ID: <bc457c70-9b13-d751-fae8-00896402e1af@sapo.pt>

Hello,

For what I understood of the problem, this might be what you want.


library(dplyr)
library(stringr)

coreWordsPat <- paste0("\\b", coreWords, "\\b")
coreWordsPat <- paste(coreWordsPat, collapse = "|")

left_join(
   df %>%
     mutate(Core = +str_detect(Utterance, coreWordsPat)) %>%
     select(ID, Utterance, Core),
   df %>%
     mutate(Fringe = str_remove_all(Utterance, coreWordsPat),
            Fringe = +(nchar(trimws(Fringe)) > 0)) %>%
     select(ID, Fringe),
   by = "ID"
)


Hope this helps,

Rui Barradas

?s 18:02 de 11/06/21, Debbie Hahs-Vaughn escreveu:
> I am working with utterances, statements spoken by children.  From each utterance, if one or more words in the statement match a predefined list of multiple 'core' words (probably 300 words), then I want to input '1' into 'Core' (and if none, then input '0' into 'Core').
> 
> If there are one or more words in the statement that are NOT core words, then I want to input '1' into 'Fringe' (and if there are only core words and nothing extra, then input '0' into 'Fringe').  I will not have a list of Fringe words.
> 
> Basically, right now I have a child ID and only the utterances.  Here is a snippet of my data.
> 
> ID      Utterance
> 1       a baby
> 2       small
> 3       yes
> 4       where's his bed
> 5       there's his bed
> 6       where's his pillow
> 7       what is that on his head
> 8       hey he has his arm stuck here
> 9       there there's it
> 10      now you're gonna go night-night
> 11      and that's the thing you can turn on
> 12      yeah where's the music box
> 13      what is this
> 14      small
> 15      there you go baby
> 
> 
> The following code runs but isn't doing exactly what I need--which is:  1) the ability to detect words from the list and define as core; 2) the ability to search the utterance and if there are any words in the utterance that are NOT core, to identify those as ?1? as I will not have a list of fringe words.
> 
> ```
> 
> library(dplyr)
> library(stringr)
> library(tidyr)
> 
> coreWords <-c("I", "no", "yes", "my", "the", "want", "is", "it", "that", "a", "go", "mine", "you", "what", "on", "in", "here", "more", "out", "off", "some", "help", "all done", "finished")
> 
> str_detect(df,)
> 
> dfplus <- df %>%
>    mutate(id = row_number()) %>%
>    separate_rows(Utterance, sep = ' ') %>%
>    mutate(Core = + str_detect(Utterance, str_c(coreWords, collapse = '|')),
>           Fringe = + !Core) %>%
>    group_by(id) %>%
>    mutate(Core = + (sum(Core) > 0),
>           Fringe = + (sum(Fringe) > 0)) %>%
>    slice(1) %>%
>    select(-Utterance) %>%
>    left_join(df) %>%
>    ungroup() %>%
>    select(Utterance, Core, Fringe, ID)
> 
> ```
> 
> The dput() code is:
> 
> structure(list(Utterance = c("a baby", "small", "yes", "where's his bed",
> "there's his bed", "where's his pillow", "what is that on his head",
> "hey he has his arm stuck here", "there there's it", "now you're gonna go night-night",
> "and that's the thing you can turn on", "yeah where's the music box",
> "what is this", "small", "there you go baby ", "what is this for ",
> "a ", "and the go goodnight here ", "and what is this ", " what's that sound ",
> "what does she say ", "what she say", "should I turn the on so Laura doesn't cry ",
> "what is this ", "what is that ", "where's clothes ", " where's the baby's bedroom ",
> "that might be in dad's bed+room ", "yes ", "there you go baby ",
> "you're welcome "), Core = c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 1L, 1L, 1L, 1L, 1L, 1L, 1L), Fringe = c(0L, 0L, 0L, 1L, 1L, 1L,
> 0L, 1L, 0L, 1L, 1L, 1L, 0L, 0L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), ID = 1:31), row.names = c(NA,
> -31L), class = c("tbl_df", "tbl", "data.frame"))
> 
> ```
> 
> The first 10 rows of output looks like this:
> 
> Utterance       Core    Fringe  ID
> 1       a baby  1       0       1
> 2       small   1       0       2
> 3       yes     1       0       3
> 4       where's his bed 1       1       4
> 5       there's his bed 1       1       5
> 6       where's his pillow      1       1       6
> 7       what is that on his head        1       0       7
> 8       hey he has his arm stuck here   1       1       8
> 9       there there's it        1       0       9
> 10      now you're gonna go night-night 1       1       10
> 
> For example, in line 1 of the output, ?a? is a core word so ?1? for core is correct.  However, ?baby? should be picked up as fringe so there should be ?1?, not ?0?, for fringe. Lines 7 and 9 also have words that should be identified as fringe but are not.
> 
> Additionally, it seems like if the utterance has parts of a core word in it, it?s being counted. For example, ?small? is identified as a core word even though it's not (but 'all done' is a core word). 'Where's his bed' is identified as core and fringe, although none of the words are core.
> 
> Any suggestions on what is happening and how to correct it are greatly appreciated.
> 
> 	[[alternative HTML version deleted]]
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From bgunter@4567 @end|ng |rom gm@||@com  Fri Jun 11 20:42:43 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 11 Jun 2021 11:42:43 -0700
Subject: [R] 
 Identifying words from a list and code as 0 or 1 and words NOT
 on the list code as 1
In-Reply-To: <BN6PR11MB16035EF3319E9C5A895D6085DD349@BN6PR11MB1603.namprd11.prod.outlook.com>
References: <BN6PR11MB16035EF3319E9C5A895D6085DD349@BN6PR11MB1603.namprd11.prod.outlook.com>
Message-ID: <CAGxFJbR=zqOdZbqWuZ5STYXgJK6g_MHvwFHevzJLqyVxPcipPA@mail.gmail.com>

Note that your specification is ambiguous. "all done" is not a single word
-- it's a phrase. So what do you want to do if:

1) "all"  and/or "done"  are also among your core words?
2) "I'm all done" is another of your core phrases.

The existence of phrases in your core list allows such conflicts to arise.
Do you claim that phrases would be chosen so that this can never happen? --
or what is your specification if they can (what constitutes a match and in
what priority)?

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Jun 11, 2021 at 10:06 AM Debbie Hahs-Vaughn <debbie at ucf.edu> wrote:

> I am working with utterances, statements spoken by children.  From each
> utterance, if one or more words in the statement match a predefined list of
> multiple 'core' words (probably 300 words), then I want to input '1' into
> 'Core' (and if none, then input '0' into 'Core').
>
> If there are one or more words in the statement that are NOT core words,
> then I want to input '1' into 'Fringe' (and if there are only core words
> and nothing extra, then input '0' into 'Fringe').  I will not have a list
> of Fringe words.
>
> Basically, right now I have a child ID and only the utterances.  Here is a
> snippet of my data.
>
> ID      Utterance
> 1       a baby
> 2       small
> 3       yes
> 4       where's his bed
> 5       there's his bed
> 6       where's his pillow
> 7       what is that on his head
> 8       hey he has his arm stuck here
> 9       there there's it
> 10      now you're gonna go night-night
> 11      and that's the thing you can turn on
> 12      yeah where's the music box
> 13      what is this
> 14      small
> 15      there you go baby
>
>
> The following code runs but isn't doing exactly what I need--which is:  1)
> the ability to detect words from the list and define as core; 2) the
> ability to search the utterance and if there are any words in the utterance
> that are NOT core, to identify those as ?1? as I will not have a list of
> fringe words.
>
> ```
>
> library(dplyr)
> library(stringr)
> library(tidyr)
>
> coreWords <-c("I", "no", "yes", "my", "the", "want", "is", "it", "that",
> "a", "go", "mine", "you", "what", "on", "in", "here", "more", "out", "off",
> "some", "help", "all done", "finished")
>
> str_detect(df,)
>
> dfplus <- df %>%
>   mutate(id = row_number()) %>%
>   separate_rows(Utterance, sep = ' ') %>%
>   mutate(Core = + str_detect(Utterance, str_c(coreWords, collapse = '|')),
>          Fringe = + !Core) %>%
>   group_by(id) %>%
>   mutate(Core = + (sum(Core) > 0),
>          Fringe = + (sum(Fringe) > 0)) %>%
>   slice(1) %>%
>   select(-Utterance) %>%
>   left_join(df) %>%
>   ungroup() %>%
>   select(Utterance, Core, Fringe, ID)
>
> ```
>
> The dput() code is:
>
> structure(list(Utterance = c("a baby", "small", "yes", "where's his bed",
> "there's his bed", "where's his pillow", "what is that on his head",
> "hey he has his arm stuck here", "there there's it", "now you're gonna go
> night-night",
> "and that's the thing you can turn on", "yeah where's the music box",
> "what is this", "small", "there you go baby ", "what is this for ",
> "a ", "and the go goodnight here ", "and what is this ", " what's that
> sound ",
> "what does she say ", "what she say", "should I turn the on so Laura
> doesn't cry ",
> "what is this ", "what is that ", "where's clothes ", " where's the baby's
> bedroom ",
> "that might be in dad's bed+room ", "yes ", "there you go baby ",
> "you're welcome "), Core = c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 1L, 1L, 1L, 1L, 1L, 1L, 1L), Fringe = c(0L, 0L, 0L, 1L, 1L, 1L,
> 0L, 1L, 0L, 1L, 1L, 1L, 0L, 0L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), ID = 1:31), row.names = c(NA,
> -31L), class = c("tbl_df", "tbl", "data.frame"))
>
> ```
>
> The first 10 rows of output looks like this:
>
> Utterance       Core    Fringe  ID
> 1       a baby  1       0       1
> 2       small   1       0       2
> 3       yes     1       0       3
> 4       where's his bed 1       1       4
> 5       there's his bed 1       1       5
> 6       where's his pillow      1       1       6
> 7       what is that on his head        1       0       7
> 8       hey he has his arm stuck here   1       1       8
> 9       there there's it        1       0       9
> 10      now you're gonna go night-night 1       1       10
>
> For example, in line 1 of the output, ?a? is a core word so ?1? for core
> is correct.  However, ?baby? should be picked up as fringe so there should
> be ?1?, not ?0?, for fringe. Lines 7 and 9 also have words that should be
> identified as fringe but are not.
>
> Additionally, it seems like if the utterance has parts of a core word in
> it, it?s being counted. For example, ?small? is identified as a core word
> even though it's not (but 'all done' is a core word). 'Where's his bed' is
> identified as core and fringe, although none of the words are core.
>
> Any suggestions on what is happening and how to correct it are greatly
> appreciated.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From debb|e @end|ng |rom uc|@edu  Fri Jun 11 20:54:56 2021
From: debb|e @end|ng |rom uc|@edu (Debbie Hahs-Vaughn)
Date: Fri, 11 Jun 2021 18:54:56 +0000
Subject: [R] 
 Identifying words from a list and code as 0 or 1 and words NOT
 on the list code as 1
In-Reply-To: <CAGxFJbR=zqOdZbqWuZ5STYXgJK6g_MHvwFHevzJLqyVxPcipPA@mail.gmail.com>
References: <BN6PR11MB16035EF3319E9C5A895D6085DD349@BN6PR11MB1603.namprd11.prod.outlook.com>,
 <CAGxFJbR=zqOdZbqWuZ5STYXgJK6g_MHvwFHevzJLqyVxPcipPA@mail.gmail.com>
Message-ID: <BN6PR11MB160367BB04C2A94E5F0CF54CDD349@BN6PR11MB1603.namprd11.prod.outlook.com>

Thank you for noting this. The utterance has to match the exact phrase (e.g., "all done") for it to constitute a match in the utterance.


________________________________
From: Bert Gunter <bgunter.4567 at gmail.com>
Sent: Friday, June 11, 2021 2:42 PM
To: Debbie Hahs-Vaughn <debbie at ucf.edu>
Cc: r-help at R-project.org <r-help at r-project.org>
Subject: Re: [R] Identifying words from a list and code as 0 or 1 and words NOT on the list code as 1

Note that your specification is ambiguous. "all done" is not a single word -- it's a phrase. So what do you want to do if:

1) "all"  and/or "done"  are also among your core words?
2) "I'm all done" is another of your core phrases.

The existence of phrases in your core list allows such conflicts to arise. Do you claim that phrases would be chosen so that this can never happen? -- or what is your specification if they can (what constitutes a match and in what priority)?

Bert Gunter

"The trouble with having an open mind is that people keep coming along and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Jun 11, 2021 at 10:06 AM Debbie Hahs-Vaughn <debbie at ucf.edu<mailto:debbie at ucf.edu>> wrote:
I am working with utterances, statements spoken by children.  From each utterance, if one or more words in the statement match a predefined list of multiple 'core' words (probably 300 words), then I want to input '1' into 'Core' (and if none, then input '0' into 'Core').

If there are one or more words in the statement that are NOT core words, then I want to input '1' into 'Fringe' (and if there are only core words and nothing extra, then input '0' into 'Fringe').  I will not have a list of Fringe words.

Basically, right now I have a child ID and only the utterances.  Here is a snippet of my data.

ID      Utterance
1       a baby
2       small
3       yes
4       where's his bed
5       there's his bed
6       where's his pillow
7       what is that on his head
8       hey he has his arm stuck here
9       there there's it
10      now you're gonna go night-night
11      and that's the thing you can turn on
12      yeah where's the music box
13      what is this
14      small
15      there you go baby


The following code runs but isn't doing exactly what I need--which is:  1) the ability to detect words from the list and define as core; 2) the ability to search the utterance and if there are any words in the utterance that are NOT core, to identify those as ?1? as I will not have a list of fringe words.

```

library(dplyr)
library(stringr)
library(tidyr)

coreWords <-c("I", "no", "yes", "my", "the", "want", "is", "it", "that", "a", "go", "mine", "you", "what", "on", "in", "here", "more", "out", "off", "some", "help", "all done", "finished")

str_detect(df,)

dfplus <- df %>%
  mutate(id = row_number()) %>%
  separate_rows(Utterance, sep = ' ') %>%
  mutate(Core = + str_detect(Utterance, str_c(coreWords, collapse = '|')),
         Fringe = + !Core) %>%
  group_by(id) %>%
  mutate(Core = + (sum(Core) > 0),
         Fringe = + (sum(Fringe) > 0)) %>%
  slice(1) %>%
  select(-Utterance) %>%
  left_join(df) %>%
  ungroup() %>%
  select(Utterance, Core, Fringe, ID)

```

The dput() code is:

structure(list(Utterance = c("a baby", "small", "yes", "where's his bed",
"there's his bed", "where's his pillow", "what is that on his head",
"hey he has his arm stuck here", "there there's it", "now you're gonna go night-night",
"and that's the thing you can turn on", "yeah where's the music box",
"what is this", "small", "there you go baby ", "what is this for ",
"a ", "and the go goodnight here ", "and what is this ", " what's that sound ",
"what does she say ", "what she say", "should I turn the on so Laura doesn't cry ",
"what is this ", "what is that ", "where's clothes ", " where's the baby's bedroom ",
"that might be in dad's bed+room ", "yes ", "there you go baby ",
"you're welcome "), Core = c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
1L, 1L, 1L, 1L, 1L, 1L, 1L), Fringe = c(0L, 0L, 0L, 1L, 1L, 1L,
0L, 1L, 0L, 1L, 1L, 1L, 0L, 0L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), ID = 1:31), row.names = c(NA,
-31L), class = c("tbl_df", "tbl", "data.frame"))

```

The first 10 rows of output looks like this:

Utterance       Core    Fringe  ID
1       a baby  1       0       1
2       small   1       0       2
3       yes     1       0       3
4       where's his bed 1       1       4
5       there's his bed 1       1       5
6       where's his pillow      1       1       6
7       what is that on his head        1       0       7
8       hey he has his arm stuck here   1       1       8
9       there there's it        1       0       9
10      now you're gonna go night-night 1       1       10

For example, in line 1 of the output, ?a? is a core word so ?1? for core is correct.  However, ?baby? should be picked up as fringe so there should be ?1?, not ?0?, for fringe. Lines 7 and 9 also have words that should be identified as fringe but are not.

Additionally, it seems like if the utterance has parts of a core word in it, it?s being counted. For example, ?small? is identified as a core word even though it's not (but 'all done' is a core word). 'Where's his bed' is identified as core and fringe, although none of the words are core.

Any suggestions on what is happening and how to correct it are greatly appreciated.

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help<https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=04%7C01%7Cdebbie%40ucf.edu%7Cc70431490a5242f4adff08d92d08ba70%7Cbb932f15ef3842ba91fcf3c59d5dd1f1%7C0%7C1%7C637590337793491343%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=ncGdcj1KDtcw4tTB%2BGavbH%2BoM4SRy8PguEsopccJbxM%3D&reserved=0>
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html<https://nam02.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=04%7C01%7Cdebbie%40ucf.edu%7Cc70431490a5242f4adff08d92d08ba70%7Cbb932f15ef3842ba91fcf3c59d5dd1f1%7C0%7C1%7C637590337793501335%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=pF35NCtRstPszG96LOC65969fvxiwNSHrQt0YBeCOlM%3D&reserved=0>
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From debb|e @end|ng |rom uc|@edu  Fri Jun 11 21:07:52 2021
From: debb|e @end|ng |rom uc|@edu (Debbie Hahs-Vaughn)
Date: Fri, 11 Jun 2021 19:07:52 +0000
Subject: [R] 
 Identifying words from a list and code as 0 or 1 and words NOT
 on the list code as 1
In-Reply-To: <bc457c70-9b13-d751-fae8-00896402e1af@sapo.pt>
References: <BN6PR11MB16035EF3319E9C5A895D6085DD349@BN6PR11MB1603.namprd11.prod.outlook.com>,
 <bc457c70-9b13-d751-fae8-00896402e1af@sapo.pt>
Message-ID: <BN6PR11MB1603AC48206C16DAF8D51FC8DD349@BN6PR11MB1603.namprd11.prod.outlook.com>

Yes, wonderful! This seems to work beautifully.  Thank you so much!


________________________________
From: Rui Barradas <ruipbarradas at sapo.pt>
Sent: Friday, June 11, 2021 2:03 PM
To: Debbie Hahs-Vaughn <debbie at ucf.edu>; r-help at R-project.org <r-help at R-project.org>
Subject: Re: [R] Identifying words from a list and code as 0 or 1 and words NOT on the list code as 1

Hello,

For what I understood of the problem, this might be what you want.


library(dplyr)
library(stringr)

coreWordsPat <- paste0("\\b", coreWords, "\\b")
coreWordsPat <- paste(coreWordsPat, collapse = "|")

left_join(
   df %>%
     mutate(Core = +str_detect(Utterance, coreWordsPat)) %>%
     select(ID, Utterance, Core),
   df %>%
     mutate(Fringe = str_remove_all(Utterance, coreWordsPat),
            Fringe = +(nchar(trimws(Fringe)) > 0)) %>%
     select(ID, Fringe),
   by = "ID"
)


Hope this helps,

Rui Barradas

?s 18:02 de 11/06/21, Debbie Hahs-Vaughn escreveu:
> I am working with utterances, statements spoken by children.  From each utterance, if one or more words in the statement match a predefined list of multiple 'core' words (probably 300 words), then I want to input '1' into 'Core' (and if none, then input '0' into 'Core').
>
> If there are one or more words in the statement that are NOT core words, then I want to input '1' into 'Fringe' (and if there are only core words and nothing extra, then input '0' into 'Fringe').  I will not have a list of Fringe words.
>
> Basically, right now I have a child ID and only the utterances.  Here is a snippet of my data.
>
> ID      Utterance
> 1       a baby
> 2       small
> 3       yes
> 4       where's his bed
> 5       there's his bed
> 6       where's his pillow
> 7       what is that on his head
> 8       hey he has his arm stuck here
> 9       there there's it
> 10      now you're gonna go night-night
> 11      and that's the thing you can turn on
> 12      yeah where's the music box
> 13      what is this
> 14      small
> 15      there you go baby
>
>
> The following code runs but isn't doing exactly what I need--which is:  1) the ability to detect words from the list and define as core; 2) the ability to search the utterance and if there are any words in the utterance that are NOT core, to identify those as ?1? as I will not have a list of fringe words.
>
> ```
>
> library(dplyr)
> library(stringr)
> library(tidyr)
>
> coreWords <-c("I", "no", "yes", "my", "the", "want", "is", "it", "that", "a", "go", "mine", "you", "what", "on", "in", "here", "more", "out", "off", "some", "help", "all done", "finished")
>
> str_detect(df,)
>
> dfplus <- df %>%
>    mutate(id = row_number()) %>%
>    separate_rows(Utterance, sep = ' ') %>%
>    mutate(Core = + str_detect(Utterance, str_c(coreWords, collapse = '|')),
>           Fringe = + !Core) %>%
>    group_by(id) %>%
>    mutate(Core = + (sum(Core) > 0),
>           Fringe = + (sum(Fringe) > 0)) %>%
>    slice(1) %>%
>    select(-Utterance) %>%
>    left_join(df) %>%
>    ungroup() %>%
>    select(Utterance, Core, Fringe, ID)
>
> ```
>
> The dput() code is:
>
> structure(list(Utterance = c("a baby", "small", "yes", "where's his bed",
> "there's his bed", "where's his pillow", "what is that on his head",
> "hey he has his arm stuck here", "there there's it", "now you're gonna go night-night",
> "and that's the thing you can turn on", "yeah where's the music box",
> "what is this", "small", "there you go baby ", "what is this for ",
> "a ", "and the go goodnight here ", "and what is this ", " what's that sound ",
> "what does she say ", "what she say", "should I turn the on so Laura doesn't cry ",
> "what is this ", "what is that ", "where's clothes ", " where's the baby's bedroom ",
> "that might be in dad's bed+room ", "yes ", "there you go baby ",
> "you're welcome "), Core = c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 1L, 1L, 1L, 1L, 1L, 1L, 1L), Fringe = c(0L, 0L, 0L, 1L, 1L, 1L,
> 0L, 1L, 0L, 1L, 1L, 1L, 0L, 0L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), ID = 1:31), row.names = c(NA,
> -31L), class = c("tbl_df", "tbl", "data.frame"))
>
> ```
>
> The first 10 rows of output looks like this:
>
> Utterance       Core    Fringe  ID
> 1       a baby  1       0       1
> 2       small   1       0       2
> 3       yes     1       0       3
> 4       where's his bed 1       1       4
> 5       there's his bed 1       1       5
> 6       where's his pillow      1       1       6
> 7       what is that on his head        1       0       7
> 8       hey he has his arm stuck here   1       1       8
> 9       there there's it        1       0       9
> 10      now you're gonna go night-night 1       1       10
>
> For example, in line 1 of the output, ?a? is a core word so ?1? for core is correct.  However, ?baby? should be picked up as fringe so there should be ?1?, not ?0?, for fringe. Lines 7 and 9 also have words that should be identified as fringe but are not.
>
> Additionally, it seems like if the utterance has parts of a core word in it, it?s being counted. For example, ?small? is identified as a core word even though it's not (but 'all done' is a core word). 'Where's his bed' is identified as core and fringe, although none of the words are core.
>
> Any suggestions on what is happening and how to correct it are greatly appreciated.
>
>        [[alternative HTML version deleted]]
>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=04%7C01%7Cdebbie%40ucf.edu%7Cfffbba02d03c4ec3314908d92d034863%7Cbb932f15ef3842ba91fcf3c59d5dd1f1%7C0%7C1%7C637590314387984018%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=HqicUtmxaVxSROWUgRSZMjxcyCBqBCq3OzKe1Iha4Jo%3D&amp;reserved=0
> PLEASE do read the posting guide https://nam02.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=04%7C01%7Cdebbie%40ucf.edu%7Cfffbba02d03c4ec3314908d92d034863%7Cbb932f15ef3842ba91fcf3c59d5dd1f1%7C0%7C1%7C637590314387984018%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=4MthQRICH68CnIgYsX08AAcrhyLKHloibl23VmIaCjY%3D&amp;reserved=0
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Sat Jun 12 01:10:07 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 11 Jun 2021 16:10:07 -0700
Subject: [R] 
 Identifying words from a list and code as 0 or 1 and words NOT
 on the list code as 1
In-Reply-To: <BN6PR11MB160367BB04C2A94E5F0CF54CDD349@BN6PR11MB1603.namprd11.prod.outlook.com>
References: <BN6PR11MB16035EF3319E9C5A895D6085DD349@BN6PR11MB1603.namprd11.prod.outlook.com>
 <CAGxFJbR=zqOdZbqWuZ5STYXgJK6g_MHvwFHevzJLqyVxPcipPA@mail.gmail.com>
 <BN6PR11MB160367BB04C2A94E5F0CF54CDD349@BN6PR11MB1603.namprd11.prod.outlook.com>
Message-ID: <CAGxFJbREB1FwiCQyzxhh=H0wLW53Et6WR_csOWDtK+=s0goCNw@mail.gmail.com>

First, if Rui's solution works for you, I recommend that you stop reading
and discard this email. Why  bother wasting time with stuff you don't need?!

If it doesn't work or if you would like another approach -- perhaps as a
check -- then read on.

Warning: I am a dinosaur and just use base R functionality , including
regular expressions, for these sorts of relatively simple tasks. I also
eschew pipes. So my code for your example is simply:

matchpat <- paste("\\b",coreWords, "\\b", sep = "",collapse = "|")
out <- gsub(matchpat,"",Utterance)
Core <- nchar(out) != nchar(Utterance)
Fringe <-  nchar(gsub(" +","",out)) > 0

Note that I have given the results as logical TRUE or FALSE. If you insist
on 1's and 0's, just instead do:
Core <- (nchar(out) != nchar(Utterance)) + 0
Fringe <- sign(nchar(gsub(" +","",out)))


Now for an explanation. My approach was simply to create a regular
expression (regex) match pattern that would match any of your words or
phrases. The matchpat assignment does this just by logically "or"ing (with
the"|" symbol) together all your words and phrases, each of which is
surrounded by the edge of word symbol, "\\b" (so only whole words or
phrases are matched). This is standard regex stuff, and I could do it
rather handily with r's paste() function. One word of caution, though: R's
?regex says:
"Long regular expression patterns may or may not be accepted: the POSIX
standard only requires up to 256 bytes." So what works for your reprex
might not work for your full list of coreWords. It is possible to work
around this by repeatedly applying subsets of your coreWords **provided**
you make sure that you order these subsets by the number of words in each
coreWord phrase. That is, bigger phrases must be applied first before
applying smaller phrases/words to the results. This is not hard to do, but
adds complexity, and may not be necessary. See below for an explanation.

What the second line of code does is to use the gsub() function to remove
all matches to matchpat -- which, via the "|" construction -- is anything
in your coreWord list. So this means that if you have any matches in an
utterance, what remains after gsubbing will be shorter -- fewer characters
-- than the original utterance. The Core assignment checks for this using
the nchar() function and returns TRUE or FALSE as appropriate. If all the
words in the utterance matched code words, you would be left with nothing
or a bunch of spaces. The Fringe assignment just first removes all spaces
via the gsub() and then returns TRUE if there's nothing (0 characters) left
or FALSE if there still are some left.

Finally, why do you have to start with longer phrases first if you have to
do this sequentially? Suppose you have the phrases "good night" in your
phrase list, and also the word "night". If you have to do things
sequentially instead of as one swell foop, if you applied the gsub() with a
bunch including only "night" first, then "night" will be removed and "good"
will be left. Then when the bunch containing "good night" is gsubbed after,
it won't see the whole phrase any more and "good" will be left in, which is
*not* what you said you wanted.

Finally,it is of course possible to do these things by sequentially
applying one word/phrase at a time in a loop (again, longest phrases first
for the same reason as above), but I believe this might take quite a while
with a big list of coreWords (and Utterances). The above approach using "|"
vectorizes things and takes advantage of the power of the regex engine, so
I think it will be more efficient **if it's accepted.**  But if you run
into the problem of pattern length limitations, then sequentially, one at a
time, might be simpler. My judgments of computational efficiency are often
wrong anyway.

Note: I think my approach works, but I would appreciate an on-list response
if I have erred. Also, even if correct, alternative cleverer approaches are
always welcome.

Cheers,
Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Jun 11, 2021 at 11:54 AM Debbie Hahs-Vaughn <debbie at ucf.edu> wrote:

> Thank you for noting this. The utterance has to match the exact phrase
> (e.g., "all done") for it to constitute a match in the utterance.
>
>
> ------------------------------
> *From:* Bert Gunter <bgunter.4567 at gmail.com>
> *Sent:* Friday, June 11, 2021 2:42 PM
> *To:* Debbie Hahs-Vaughn <debbie at ucf.edu>
> *Cc:* r-help at R-project.org <r-help at r-project.org>
> *Subject:* Re: [R] Identifying words from a list and code as 0 or 1 and
> words NOT on the list code as 1
>
> Note that your specification is ambiguous. "all done" is not a single word
> -- it's a phrase. So what do you want to do if:
>
> 1) "all"  and/or "done"  are also among your core words?
> 2) "I'm all done" is another of your core phrases.
>
> The existence of phrases in your core list allows such conflicts to arise.
> Do you claim that phrases would be chosen so that this can never happen? --
> or what is your specification if they can (what constitutes a match and in
> what priority)?
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Fri, Jun 11, 2021 at 10:06 AM Debbie Hahs-Vaughn <debbie at ucf.edu>
> wrote:
>
> I am working with utterances, statements spoken by children.  From each
> utterance, if one or more words in the statement match a predefined list of
> multiple 'core' words (probably 300 words), then I want to input '1' into
> 'Core' (and if none, then input '0' into 'Core').
>
> If there are one or more words in the statement that are NOT core words,
> then I want to input '1' into 'Fringe' (and if there are only core words
> and nothing extra, then input '0' into 'Fringe').  I will not have a list
> of Fringe words.
>
> Basically, right now I have a child ID and only the utterances.  Here is a
> snippet of my data.
>
> ID      Utterance
> 1       a baby
> 2       small
> 3       yes
> 4       where's his bed
> 5       there's his bed
> 6       where's his pillow
> 7       what is that on his head
> 8       hey he has his arm stuck here
> 9       there there's it
> 10      now you're gonna go night-night
> 11      and that's the thing you can turn on
> 12      yeah where's the music box
> 13      what is this
> 14      small
> 15      there you go baby
>
>
> The following code runs but isn't doing exactly what I need--which is:  1)
> the ability to detect words from the list and define as core; 2) the
> ability to search the utterance and if there are any words in the utterance
> that are NOT core, to identify those as ?1? as I will not have a list of
> fringe words.
>
> ```
>
> library(dplyr)
> library(stringr)
> library(tidyr)
>
> coreWords <-c("I", "no", "yes", "my", "the", "want", "is", "it", "that",
> "a", "go", "mine", "you", "what", "on", "in", "here", "more", "out", "off",
> "some", "help", "all done", "finished")
>
> str_detect(df,)
>
> dfplus <- df %>%
>   mutate(id = row_number()) %>%
>   separate_rows(Utterance, sep = ' ') %>%
>   mutate(Core = + str_detect(Utterance, str_c(coreWords, collapse = '|')),
>          Fringe = + !Core) %>%
>   group_by(id) %>%
>   mutate(Core = + (sum(Core) > 0),
>          Fringe = + (sum(Fringe) > 0)) %>%
>   slice(1) %>%
>   select(-Utterance) %>%
>   left_join(df) %>%
>   ungroup() %>%
>   select(Utterance, Core, Fringe, ID)
>
> ```
>
> The dput() code is:
>
> structure(list(Utterance = c("a baby", "small", "yes", "where's his bed",
> "there's his bed", "where's his pillow", "what is that on his head",
> "hey he has his arm stuck here", "there there's it", "now you're gonna go
> night-night",
> "and that's the thing you can turn on", "yeah where's the music box",
> "what is this", "small", "there you go baby ", "what is this for ",
> "a ", "and the go goodnight here ", "and what is this ", " what's that
> sound ",
> "what does she say ", "what she say", "should I turn the on so Laura
> doesn't cry ",
> "what is this ", "what is that ", "where's clothes ", " where's the baby's
> bedroom ",
> "that might be in dad's bed+room ", "yes ", "there you go baby ",
> "you're welcome "), Core = c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 1L, 1L, 1L, 1L, 1L, 1L, 1L), Fringe = c(0L, 0L, 0L, 1L, 1L, 1L,
> 0L, 1L, 0L, 1L, 1L, 1L, 0L, 0L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), ID = 1:31), row.names = c(NA,
> -31L), class = c("tbl_df", "tbl", "data.frame"))
>
> ```
>
> The first 10 rows of output looks like this:
>
> Utterance       Core    Fringe  ID
> 1       a baby  1       0       1
> 2       small   1       0       2
> 3       yes     1       0       3
> 4       where's his bed 1       1       4
> 5       there's his bed 1       1       5
> 6       where's his pillow      1       1       6
> 7       what is that on his head        1       0       7
> 8       hey he has his arm stuck here   1       1       8
> 9       there there's it        1       0       9
> 10      now you're gonna go night-night 1       1       10
>
> For example, in line 1 of the output, ?a? is a core word so ?1? for core
> is correct.  However, ?baby? should be picked up as fringe so there should
> be ?1?, not ?0?, for fringe. Lines 7 and 9 also have words that should be
> identified as fringe but are not.
>
> Additionally, it seems like if the utterance has parts of a core word in
> it, it?s being counted. For example, ?small? is identified as a core word
> even though it's not (but 'all done' is a core word). 'Where's his bed' is
> identified as core and fringe, although none of the words are core.
>
> Any suggestions on what is happening and how to correct it are greatly
> appreciated.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> <https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=04%7C01%7Cdebbie%40ucf.edu%7Cc70431490a5242f4adff08d92d08ba70%7Cbb932f15ef3842ba91fcf3c59d5dd1f1%7C0%7C1%7C637590337793491343%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=ncGdcj1KDtcw4tTB%2BGavbH%2BoM4SRy8PguEsopccJbxM%3D&reserved=0>
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> <https://nam02.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=04%7C01%7Cdebbie%40ucf.edu%7Cc70431490a5242f4adff08d92d08ba70%7Cbb932f15ef3842ba91fcf3c59d5dd1f1%7C0%7C1%7C637590337793501335%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=pF35NCtRstPszG96LOC65969fvxiwNSHrQt0YBeCOlM%3D&reserved=0>
> and provide commented, minimal, self-contained, reproducible code.
>
>

	[[alternative HTML version deleted]]


From r@turner @end|ng |rom @uck|@nd@@c@nz  Sat Jun 12 01:16:29 2021
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Sat, 12 Jun 2021 11:16:29 +1200
Subject: [R] with replace na with 0?
In-Reply-To: <4469e1315b44f08fdd37d2c89db20de4967a3a43.camel@gmail.com>
References: <4469e1315b44f08fdd37d2c89db20de4967a3a43.camel@gmail.com>
Message-ID: <20210612111629.0be2f386@rolf-Latitude-E7470>


On Fri, 11 Jun 2021 16:15:06 +0200
Enrico Gabrielli <enricogabrielli76.peragr at gmail.com> wrote:

> Hello
> I almost got through the problem in post "aggregation of irregular
> interval time-series"
> I just don't understand how to fix that when I try
> ''
> with(datatable,ifelse(is.na(x),y,x))
> ''
> if y is na
> replaces me with 0
> and not with na
> 
> Thank you

Works fine for me.  There's something going on that you're not
telling us or have messed up.

Example:

x <- 1:10
x[c(1,3,5)] <- NA
y <- (1:10)/10
y[c(3,5,7)] <- NA
mung <- data.frame(x=x,y=y)
gorp <- with(mung,ifelse(is.na(x),y,x))
cbind(mung,result=gorp)

No spurious zeroes.

Note however that this is yet another example of the unnecessary use of
ifelse().  Much better is:

gorp2 <- x
i <- is.na(x)
gorp2[i] <- y[i]

Check:

all.equal(gorp,gorp2) # TRUE

As has been pointed out, you should include a minimal reproducible
example in questions such as this.  Creating such an example almost
always reveals the source of the problem so that you can solve it
yourself.

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From jerem|eju@te @end|ng |rom gm@||@com  Sat Jun 12 18:24:51 2021
From: jerem|eju@te @end|ng |rom gm@||@com (Jeremie Juste)
Date: Sat, 12 Jun 2021 18:24:51 +0200
Subject: [R] most stable way to output text layout
Message-ID: <87a6nv6ofg.fsf@gmail.com>

Hello,

I'm trying to print a razor thin front-end using just text matrices and
the command prompt.

I admit that it is a bit crazy, it seems to do the job and is very quick
to implement...  Except that I don't know of to fix the layout.

I'm just seeking to map column names to a standard domain in an
interactive way.

For instance, at one iteration, the following matrix is produced:

mat <- structure(c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, "a", "b", "c", "d", "e", "f", "g", 
"h", "i", "j", NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, "n_missing:", "n_unique:", "freq:", 
NA, NA, NA, NA, NA, NA, NA, "0", "10", NA, "a", "1", NA, NA, 
NA, NA, NA, NA, NA, NA, "b", "1", NA, NA, "best match: [1]:", 
NA, NA, NA, NA, NA, "c", "1", NA, NA, "foo", NA, NA, NA, NA, 
NA, "d", "1", NA, NA, NA, NA, NA), .Dim = c(10L, 10L))


which I represent in the console using the following command


    apply(
      mat,1,
      function(x) {
        x[is.na(x)] <-""
        cat(x,"\n")
      })

Do you have any suggestion for how can I have better control on the
print layout of the  matrix so that I can fix the width of each cell?

Best regards,
-- 
Jeremie Juste


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Jun 12 18:53:44 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 12 Jun 2021 09:53:44 -0700
Subject: [R] most stable way to output text layout
In-Reply-To: <87a6nv6ofg.fsf@gmail.com>
References: <87a6nv6ofg.fsf@gmail.com>
Message-ID: <B2A822BC-BEF3-4966-AE53-0D4A7B04A39A@dcn.davis.ca.us>

Can't say this appeals to me, but sprintf would make a difference:

    apply(
      mat,1,
      function(x) {
        x[is.na(x)] <-""
        cat(paste(sprintf("%16s",x)),"\n")
      })

On June 12, 2021 9:24:51 AM PDT, Jeremie Juste <jeremiejuste at gmail.com> wrote:
>Hello,
>
>I'm trying to print a razor thin front-end using just text matrices and
>the command prompt.
>
>I admit that it is a bit crazy, it seems to do the job and is very
>quick
>to implement...  Except that I don't know of to fix the layout.
>
>I'm just seeking to map column names to a standard domain in an
>interactive way.
>
>For instance, at one iteration, the following matrix is produced:
>
>mat <- structure(c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
>NA, NA, NA, NA, NA, NA, NA, "a", "b", "c", "d", "e", "f", "g", 
>"h", "i", "j", NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
>NA, NA, NA, NA, NA, NA, NA, NA, "n_missing:", "n_unique:", "freq:", 
>NA, NA, NA, NA, NA, NA, NA, "0", "10", NA, "a", "1", NA, NA, 
>NA, NA, NA, NA, NA, NA, "b", "1", NA, NA, "best match: [1]:", 
>NA, NA, NA, NA, NA, "c", "1", NA, NA, "foo", NA, NA, NA, NA, 
>NA, "d", "1", NA, NA, NA, NA, NA), .Dim = c(10L, 10L))
>
>
>which I represent in the console using the following command
>
>
>    apply(
>      mat,1,
>      function(x) {
>        x[is.na(x)] <-""
>        cat(x,"\n")
>      })
>
>Do you have any suggestion for how can I have better control on the
>print layout of the  matrix so that I can fix the width of each cell?
>
>Best regards,

-- 
Sent from my phone. Please excuse my brevity.


From m|n@h@|| @end|ng |rom um|ch@edu  Sat Jun 12 19:04:02 2021
From: m|n@h@|| @end|ng |rom um|ch@edu (Greg Minshall)
Date: Sat, 12 Jun 2021 20:04:02 +0300
Subject: [R] most stable way to output text layout
In-Reply-To: Your message of "Sat, 12 Jun 2021 18:24:51 +0200."
 <87a6nv6ofg.fsf@gmail.com>
Message-ID: <1044676.1623517442@apollo2.minshall.org>

Jeremie,

i'm not totally sure i understand your desire.  but, does this help?

----
  mx <- max(nchar(mat), na.rm=TRUE)
  apply(
    mat,1,
    function(x) {
      x[is.na(x)] <-""
      cat(sprintf("%*s", mx, x), "\n")
    })
----

cheers, Greg


From @v|gro@@ @end|ng |rom ver|zon@net  Sat Jun 12 20:00:04 2021
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Sat, 12 Jun 2021 14:00:04 -0400
Subject: [R] most stable way to output text layout
In-Reply-To: <87a6nv6ofg.fsf@gmail.com>
References: <87a6nv6ofg.fsf@gmail.com>
Message-ID: <022301d75fb4$c6094fd0$521bef70$@verizon.net>

Just FYI, Jeremie, you can do what you want fairly easily if you look at the
options available to print() and sprint().

 

You can ask NA conversion to be done here directly at print time:

 

print(mat, na.print="")

      [,1] [,2] [,3] [,4] [,5] [,6]         [,7] [,8]               [,9]
[,10]

[1,]           "a"            "n_missing:" "0"


 [2,]           "b"            "n_unique:"  "10"


 [3,]           "c"            "freq:"


 [4,]           "d"                         "a"  "b"                "c"
"d"  

 [5,]           "e"                         "1"  "1"                "1"
"1"  

 [6,]           "f"


 [7,]           "g"


 [8,]           "h"                              "best match: [1]:" "foo"


 [9,]           "i"


[10,]           "j"


 

 

But you see to want the columns of constant width, try this:

 

mat <- structure(c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,
NA, NA, NA, NA, NA, NA, "a", "b", "c", "d", "e", "f", "g", "h", "i", "j",
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,
NA, "n_missing:", "n_unique:", "freq:", NA, NA, NA, NA, NA, NA, NA, "0",
"10", NA, "a", "1", NA, NA, NA, NA, NA, NA, NA, NA, "b", "1", NA, NA, "best
match: [1]:", NA, NA, NA, NA, NA, "c", "1", NA, NA, "foo", NA, NA, NA, NA,
NA, "d", "1", NA, NA, NA, NA, NA), .Dim = c(10L, 10L))

mat[is.na(mat)] <-""

col_width <- max(unlist(lapply(mat, nchar))) + 1

mat <- sprintf("%-*s", col_width, mat)

print(mat, quote=FALSE)

 

I noted your maximum column need was 16 but set it up to calculate that
dynamically and add one. Then sprint is asked to make all columns that width
and finally print put that matrix out without quotes lie this:

 

  [1]


  [7]


 [13]


 [19]                                     a                 b
c                 d                

 [25] e                 f                 g                 h
i                 j                

 [31]


 [37]


 [43]


 [49]                                     n_missing:        n_unique:
freq:                              

 [55]


 [61] 0                 10                                  a
1                                  

 [67]


 [73]                   b                 1
best match: [1]: 

 [79]
c                

 [85] 1                                                     foo


 [91]                                                       d
1                                  

 [97]


 

I made it  left justified and removing the "-" changes that.

 

You can also, of course, convert the matric to a data.frame or tibble and
play various games along these lines and the n use the ways to print a
data.frame that get you what you need.

 

 

 

 

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Jeremie Juste
Sent: Saturday, June 12, 2021 12:25 PM
To: r-help at r-project.org
Subject: [R] most stable way to output text layout

 

Hello,

 

I'm trying to print a razor thin front-end using just text matrices and the
command prompt.

 

I admit that it is a bit crazy, it seems to do the job and is very quick to
implement...  Except that I don't know of to fix the layout.

 

I'm just seeking to map column names to a standard domain in an interactive
way.

 

For instance, at one iteration, the following matrix is produced:

 

mat <- structure(c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,
NA, NA, NA, NA, NA, NA, "a", "b", "c", "d", "e", "f", "g", "h", "i", "j",
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,
NA, "n_missing:", "n_unique:", "freq:", NA, NA, NA, NA, NA, NA, NA, "0",
"10", NA, "a", "1", NA, NA, NA, NA, NA, NA, NA, NA, "b", "1", NA, NA, "best
match: [1]:", NA, NA, NA, NA, NA, "c", "1", NA, NA, "foo", NA, NA, NA, NA,
NA, "d", "1", NA, NA, NA, NA, NA), .Dim = c(10L, 10L))

 

 

which I represent in the console using the following command

 

 

    apply(

      mat,1,

      function(x) {

        x[is.na(x)] <-""

        cat(x,"\n")

      })

 

Do you have any suggestion for how can I have better control on the print
layout of the  matrix so that I can fix the width of each cell?

 

Best regards,

--

Jeremie Juste

 

______________________________________________

 <mailto:R-help at r-project.org> R-help at r-project.org mailing list -- To
UNSUBSCRIBE and more, see  <https://stat.ethz.ch/mailman/listinfo/r-help>
https://stat.ethz.ch/mailman/listinfo/r-help

PLEASE do read the posting guide
<http://www.R-project.org/posting-guide.html>
http://www.R-project.org/posting-guide.html

and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From jerem|eju@te @end|ng |rom gm@||@com  Sat Jun 12 23:49:56 2021
From: jerem|eju@te @end|ng |rom gm@||@com (Jeremie Juste)
Date: Sat, 12 Jun 2021 23:49:56 +0200
Subject: [R] most stable way to output text layout
In-Reply-To: <B2A822BC-BEF3-4966-AE53-0D4A7B04A39A@dcn.davis.ca.us> (Jeff
 Newmiller's message of "Sat, 12 Jun 2021 09:53:44 -0700")
References: <87a6nv6ofg.fsf@gmail.com>
 <B2A822BC-BEF3-4966-AE53-0D4A7B04A39A@dcn.davis.ca.us>
Message-ID: <87tum269dn.fsf@gmail.com>

Hello,

Many thanks to you all for the prompt reply. Thanks for sharing.

On Saturday, 12 Jun 2021 at 09:53, Jeff Newmiller wrote:
> Can't say this appeals to me, but sprintf would make a difference:
>
>     apply(
>       mat,1,
>       function(x) {
>         x[is.na(x)] <-""
>         cat(paste(sprintf("%16s",x)),"\n")
>       })

@Jeff your solution seems to suit my need the most
Just reducing the field width to 8 and added a minus sign for left justification.

     apply(
      mat,1,
      function(x) {
        x[is.na(x)] <-""
        cat(paste(sprintf("-%8s",x)),"\n")
      })

On Saturday, 12 Jun 2021 at 20:04, Greg Minshall wrote:
> Jeremie,
>
> i'm not totally sure i understand your desire.  but, does this help?
>   mx <- max(nchar(mat), na.rm=TRUE)
>   apply(
>     mat,1,
>     function(x) {
>       x[is.na(x)] <-""
>       cat(sprintf("%*s", mx, x), "\n")
>     })
@Greg many thanks for your input, the mx variable will certainly come in handy.


On Saturday, 12 Jun 2021 at 14:00, Avi Gross via R-help wrote:
> mat <- sprintf("%-*s", col_width, mat)

@Avi many thanks for the left justification. It did encourage me to read
the sprintf help more carefully.


With the solution above, I get a razor thin front-end. To map columns
name interactively with barely 200 lines of code, and I can trigger the
debugger at anytime to inspect the full table. Very powerful.

Best regards,
Jeremie


From drj|m|emon @end|ng |rom gm@||@com  Sun Jun 13 00:40:38 2021
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Sun, 13 Jun 2021 08:40:38 +1000
Subject: [R] most stable way to output text layout
In-Reply-To: <87a6nv6ofg.fsf@gmail.com>
References: <87a6nv6ofg.fsf@gmail.com>
Message-ID: <CA+8X3fX_qAACYkGwrBhBxtddQHObh-rmqr-bz2J-EM8AExMQ-g@mail.gmail.com>

Hi Jeremie,
Or assuming that the matrix will always contain strings:

tabify<-function(x,col_names=NULL) {
 # convert NAs to "NA"
 x[is.na(x)]<-"NA"
 # if this matrix doesn't have any column names
 if(is.null(col_names)) col_names<-LETTERS[1:ncol(x)]
 # get the format argument for sprintf
 tab_width<-max(nchar(c(col_names,x)))+1
 # display the column names
 cat(format(col_names,width=tab_width),"\n")
 # display the matrix
 apply(x,1,function(x) cat(format(x,width=tab_width),"\n"))
}
tabify(mat)
mat_names<-c("first","second","third","fourth","fifth","sixth","seventh",
 "eighth","ninth","tenth")
tabify(mat,mat_names)

Jim

On Sun, Jun 13, 2021 at 2:25 AM Jeremie Juste <jeremiejuste at gmail.com> wrote:
>
> Hello,
>
> I'm trying to print a razor thin front-end using just text matrices and
> the command prompt.
>
> I admit that it is a bit crazy, it seems to do the job and is very quick
> to implement...  Except that I don't know of to fix the layout.
>
> I'm just seeking to map column names to a standard domain in an
> interactive way.
>
> For instance, at one iteration, the following matrix is produced:
>
> mat <- structure(c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,
> NA, NA, NA, NA, NA, NA, NA, "a", "b", "c", "d", "e", "f", "g",
> "h", "i", "j", NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,
> NA, NA, NA, NA, NA, NA, NA, NA, "n_missing:", "n_unique:", "freq:",
> NA, NA, NA, NA, NA, NA, NA, "0", "10", NA, "a", "1", NA, NA,
> NA, NA, NA, NA, NA, NA, "b", "1", NA, NA, "best match: [1]:",
> NA, NA, NA, NA, NA, "c", "1", NA, NA, "foo", NA, NA, NA, NA,
> NA, "d", "1", NA, NA, NA, NA, NA), .Dim = c(10L, 10L))
>
>
> which I represent in the console using the following command
>
>
>     apply(
>       mat,1,
>       function(x) {
>         x[is.na(x)] <-""
>         cat(x,"\n")
>       })
>
> Do you have any suggestion for how can I have better control on the
> print layout of the  matrix so that I can fix the width of each cell?
>
> Best regards,
> --
> Jeremie Juste
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From |jjjx@y @end|ng |rom gm@||@com  Sat Jun 12 17:24:31 2021
From: |jjjx@y @end|ng |rom gm@||@com (Jxay Ljj)
Date: Sat, 12 Jun 2021 11:24:31 -0400
Subject: [R] covert categoral data into number
Message-ID: <CA+iybvVU9UbjVNyXvVJgX+CmqSacGm5M47wEyCs2QZ1j_CMpPg@mail.gmail.com>

Hi

I would like to convert numbers into different categorical levels . For
example,

In one of column of a dataframe, there are numbers: 1,2,3, 4. How can I
cover them into "bottom", "middle", "high" , "top" in R codes?

Thanks,
JL

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Jun 13 09:06:54 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 13 Jun 2021 00:06:54 -0700
Subject: [R] covert categoral data into number
In-Reply-To: <CA+iybvVU9UbjVNyXvVJgX+CmqSacGm5M47wEyCs2QZ1j_CMpPg@mail.gmail.com>
References: <CA+iybvVU9UbjVNyXvVJgX+CmqSacGm5M47wEyCs2QZ1j_CMpPg@mail.gmail.com>
Message-ID: <42B70CA5-04C3-4BE4-A811-13D75371077F@dcn.davis.ca.us>

factor( DF$numbers
      , levels=1:4
      , labels=c( "bottom", "middle", "high" , "top" )
      )

On June 12, 2021 8:24:31 AM PDT, Jxay Ljj <ljjjxay at gmail.com> wrote:
>Hi
>
>I would like to convert numbers into different categorical levels . For
>example,
>
>In one of column of a dataframe, there are numbers: 1,2,3, 4. How can I
>cover them into "bottom", "middle", "high" , "top" in R codes?
>
>Thanks,
>JL
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From jerem|eju@te @end|ng |rom gm@||@com  Sun Jun 13 12:16:58 2021
From: jerem|eju@te @end|ng |rom gm@||@com (Jeremie Juste)
Date: Sun, 13 Jun 2021 12:16:58 +0200
Subject: [R] most stable way to output text layout
In-Reply-To: <CA+8X3fX_qAACYkGwrBhBxtddQHObh-rmqr-bz2J-EM8AExMQ-g@mail.gmail.com>
 (Jim Lemon's message of "Sun, 13 Jun 2021 08:40:38 +1000")
References: <87a6nv6ofg.fsf@gmail.com>
 <CA+8X3fX_qAACYkGwrBhBxtddQHObh-rmqr-bz2J-EM8AExMQ-g@mail.gmail.com>
Message-ID: <87fsxm5asl.fsf@gmail.com>

Hello Jim,


On Sunday, 13 Jun 2021 at 08:40, Jim Lemon wrote:
> Hi Jeremie,
> Or assuming that the matrix will always contain strings:
>
> tabify<-function(x,col_names=NULL) {
>  # convert NAs to "NA"
>  x[is.na(x)]<-"NA"
>  # if this matrix doesn't have any column names
>  if(is.null(col_names)) col_names<-LETTERS[1:ncol(x)]
>  # get the format argument for sprintf
>  tab_width<-max(nchar(c(col_names,x)))+1
>  # display the column names
>  cat(format(col_names,width=tab_width),"\n")
>  # display the matrix
>  apply(x,1,function(x) cat(format(x,width=tab_width),"\n"))
> }
> tabify(mat)
> mat_names<-c("first","second","third","fourth","fifth","sixth","seventh",
>  "eighth","ninth","tenth")
> tabify(mat,mat_names)


Many thanks for your suggestion, I haven't considered the horizontal
spacing before. The columns names do help as well.

Best regards,
Jeremie

>
> Jim
>
> On Sun, Jun 13, 2021 at 2:25 AM Jeremie Juste <jeremiejuste at gmail.com> wrote:
>>
>> Hello,
>>
>> I'm trying to print a razor thin front-end using just text matrices and
>> the command prompt.
>>
>> I admit that it is a bit crazy, it seems to do the job and is very quick
>> to implement...  Except that I don't know of to fix the layout.
>>
>> I'm just seeking to map column names to a standard domain in an
>> interactive way.
>>
>> For instance, at one iteration, the following matrix is produced:
>>
>> mat <- structure(c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,
>> NA, NA, NA, NA, NA, NA, NA, "a", "b", "c", "d", "e", "f", "g",
>> "h", "i", "j", NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,
>> NA, NA, NA, NA, NA, NA, NA, NA, "n_missing:", "n_unique:", "freq:",
>> NA, NA, NA, NA, NA, NA, NA, "0", "10", NA, "a", "1", NA, NA,
>> NA, NA, NA, NA, NA, NA, "b", "1", NA, NA, "best match: [1]:",
>> NA, NA, NA, NA, NA, "c", "1", NA, NA, "foo", NA, NA, NA, NA,
>> NA, "d", "1", NA, NA, NA, NA, NA), .Dim = c(10L, 10L))
>>
>>
>> which I represent in the console using the following command
>>
>>
>>     apply(
>>       mat,1,
>>       function(x) {
>>         x[is.na(x)] <-""
>>         cat(x,"\n")
>>       })
>>
>> Do you have any suggestion for how can I have better control on the
>> print layout of the  matrix so that I can fix the width of each cell?
>>
>> Best regards,
>> --
>> Jeremie Juste
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>

-- 
Jeremie Juste


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Jun 13 14:30:26 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 13 Jun 2021 08:30:26 -0400
Subject: [R] snapshot3d hangs during rmarkdown::render
In-Reply-To: <CAELX-2TfV3PV9CRNXKcniTEw+LWU8vdYXXV5zbsPsu7DMe5Zgg@mail.gmail.com>
References: <CAELX-2TfV3PV9CRNXKcniTEw+LWU8vdYXXV5zbsPsu7DMe5Zgg@mail.gmail.com>
Message-ID: <ebfd53c8-1d44-9321-3d5c-8f4b796e3733@gmail.com>

I believe I have found and fixed a bug in webshot2 that was causing 
these problems.  My current recommendation for installing it is to use

   remotes::install_github("dmurdoch/webshot2 at fixlockup")

For more details (and a bug fix for pkgdown, if you're trying to put 
dynamic graphics on a pkgdown site) see

   https://github.com/dmurdoch/rgl#note-about-devel-versions

Duncan Murdoch


From @v|gro@@ @end|ng |rom ver|zon@net  Sun Jun 13 18:19:00 2021
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Sun, 13 Jun 2021 12:19:00 -0400
Subject: [R] covert categoral data into number
In-Reply-To: <CA+iybvVU9UbjVNyXvVJgX+CmqSacGm5M47wEyCs2QZ1j_CMpPg@mail.gmail.com>
References: <CA+iybvVU9UbjVNyXvVJgX+CmqSacGm5M47wEyCs2QZ1j_CMpPg@mail.gmail.com>
Message-ID: <00a301d7606f$d201d210$76057630$@verizon.net>

JL,

There are many ways to do what you want. If you need to do it by yourself
using standard R, there are ways but if you are allowed to use packages,
like the forcats package in the tidyverse, it can be fairly simple. Here for
example is a way to convert a factor with the four levels you mention but
requires them to be character strings, so I converted it:

> library(forcats)
> orig <- factor(as.character(c(1:4, 4:1)))
> orig
[1] 1 2 3 4 4 3 2 1
Levels: 1 2 3 4
> changed <-  fct_recode(orig, bottom = "1", middle = "2", high = "3", top =
"4")
> changed
[1] bottom middle high   top    top    high   middle bottom
Levels: bottom middle high top

The fct_recode line can also be used with explicit strings, needed if you
have things like embedded spaces:

changed <-  fct_recode(orig, 
                       "bottom" = "1", 
                       "middle" = "2", 
                       "high" = "3", 
                       "top" = "4")

To make the changes yourself may require studying other things like how to
make substitutions  using regular expressions.

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Jxay Ljj
Sent: Saturday, June 12, 2021 11:25 AM
To: r-help at r-project.org
Subject: [R] covert categoral data into number

Hi

I would like to convert numbers into different categorical levels . For
example,

In one of column of a dataframe, there are numbers: 1,2,3, 4. How can I
cover them into "bottom", "middle", "high" , "top" in R codes?

Thanks,
JL

	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From enr|cog@br|e|||76@per@gr @end|ng |rom gm@||@com  Sun Jun 13 18:14:13 2021
From: enr|cog@br|e|||76@per@gr @end|ng |rom gm@||@com (Enrico Gabrielli)
Date: Sun, 13 Jun 2021 18:14:13 +0200
Subject: [R] aggregation of irregular interval time-series
In-Reply-To: <941da4cdd608ef2c7ee11fef07047fe6009d1b6a.camel@gmail.com>
References: <5142d9f6b446104d4e14b58a1c9be3eb50351e94.camel@gmail.com>
 <297ec350-92ff-91e4-f5d0-088a12098f06@sapo.pt>
 <CAGxFJbT2BDLChjY6cBcydJzQR7gr5fecncxxjjsddVnpWnTrCg@mail.gmail.com>
 <941da4cdd608ef2c7ee11fef07047fe6009d1b6a.camel@gmail.com>
Message-ID: <1aa363c3c58938c2fa7772bead1bbeab8d27cc72.camel@gmail.com>

Hello
thanks to my friend Diego, a computer agronomist,
I was able to figure out how to do it.
I still have only one problem: how do I calculate the data for the
first week? The traps were set up on the fields on May 5th. On that
date, a 0 could be entered for all time-series. But how to do it with a
simple command?
> # the data (as copied from kobotoolbox, with the datetime of each
> capture observation, and the farm (azienda) and type of trap
> (trappola)
> library(data.table)
> library(parsedate)
> vindicta_catture_cimici<-data.table::data.table(
>     datetime = parse_iso_8601(c("2021-05-29 17:00:00",
>                  "2021-06-03 09:20:00","2021-06-05 10:52:00","2021-
> 06-03 09:30:00",
>                  "2021-06-01 17:00:00","2021-05-16 08:33:00","2021-
> 05-16 08:34:00",
>                  "2021-06-05 17:00:00","2021-06-05 11:00:00","2021-
> 05-23 18:00:00",
>                  "2021-06-03 08:45:00","2021-06-01 07:30:00",
>                  "2021-05-29 05:30:00","2021-05-30 15:00:00","2021-
> 05-29 06:00:00",
>                  "2021-05-23 06:30:00","2021-05-20 13:00:00","2021-
> 05-20 13:15:00",
>                  "2021-05-20 12:45:00","2021-05-16 16:15:00","2021-
> 05-16 16:30:00",
>                  "2021-05-20 13:00:00","2021-05-15 12:09:00",
>                  "2021-06-11 15:27:00","2021-06-11 15:30:00","2021-
> 06-11 15:43:00",
>                  "2021-06-11 15:50:00","2021-06-12 19:01:00")),
>      catture = c(25,0,92,0,23,0,2,5,0,0,6,0,30,
>                  43,0,23,3,0,0,0,13,4,15,100,0,15,2,20),
>      azienda = as.factor(c("arvaia","toderici",
>                            "arvaia","toderici","arvaia","arvaia","arv
> aia",
>                            "arvaia","arvaia","arvaia","toderici","mag
> li",
>                            "arvaia","magli","arvaia","arvaia","arvaia
> ","arvaia",
>                            "magli","magli","magli","magli","arvaia",
>                            "arvaia","arvaia","magli","magli","arvaia"
> )),
>     trappola =
> as.factor(c("fmach__feromoni___vibrazione","pessl_elettronica",
>                            "fmach__feromoni___vibrazione","cymatrap__
> feromoni",
>                            "fmach__feromoni___vibrazione","cymatrap__
> feromoni",
>                            "fmach__feromoni___vibrazione","fmach__fer
> omoni___vibrazione",
>                            "cymatrap__feromoni","cymatrap__feromoni",
>                            "fmach__feromoni___vibrazione","fmach__fer
> omoni___vibrazione",
>                            "fmach__feromoni___vibrazione",
>                            "fmach__feromoni___vibrazione","cymatrap__
> feromoni",
>                            "fmach__feromoni___vibrazione","fmach__fer
> omoni___vibrazione",
>                            "cymatrap__feromoni","cymatrap__feromoni",
> "cymatrap__feromoni",
>                            "fmach__feromoni___vibrazione",
>                            "fmach__feromoni___vibrazione","fmach__fer
> omoni___vibrazione",
>                            "fmach__feromoni___vibrazione","cymatrap__
> feromoni",
>                            "fmach__feromoni___vibrazione","cymatrap__
> feromoni",
>                            "fmach__feromoni___vibrazione"))
> )
> 
> # calculates the cumulative capture by type of trap + farm
> library(dplyr)
> vindicta_catture_cimici = vindicta_catture_cimici %>%
> group_by(trappola,azienda) %>% arrange(datetime) %>% mutate(cs =
> cumsum(catture))
> vindicta_catture_cimici <-
> group_by(vindicta_catture_cimici,trappola,azienda)
> 
> # generates a matrix of the different irregular time-series of the
> cumulative values of capture per trap
> library(reshape2)
> library(xts)
> vindicta_catture_cimici_xts <-
> as.xts.data.table(data.table(dcast(vindicta_catture_cimici, datetime
> ~ trappola + azienda,  value.var = "cs")))
> 
> # calculates by interpolation the capture data at the end of each
> week, starting from May 10 (i.e. the week we started capturing)
> tseq <- seq(ISOdate(2021,5,10,0,0,0),
> end(vindicta_catture_cimici_xts), by = "week")
> vindicta_catture_cimici_xts_week <-
> na.approx(vindicta_catture_cimici_xts,xout=tseq)
> vindicta_catture_settimanali <-
> diff.xts(vindicta_catture_cimici_xts_week)
> 
> library(TSstudio)
> ts_plot(vindicta_catture_settimanali)

Thank you

Enrico Gabrielli


From g@@@powe|| @end|ng |rom protonm@||@com  Sun Jun 13 23:28:06 2021
From: g@@@powe|| @end|ng |rom protonm@||@com (Gregg Powell)
Date: Sun, 13 Jun 2021 21:28:06 +0000
Subject: [R] Need to compare two columns in two data.frames and return all
 rows from df where rows values are missing
Message-ID: <W60thHhfpbpbFOepJns1hemIEbHj81ntVZZI0_C3ZheSCy0RrGuh3kgOky-9tvCN02tgFAXs3l6SD6zkVUGmWLEki65S2kzkn5Fc0ZV8nJM=@protonmail.com>

This is even complicated to write into a question....

Have two data.frames (A and B)

data.frame A and B each have a name column. Want to compare A and B data.frame to each other based on the values in the 'names' columns - for every name that appears in dataframe A? but not B, I want to copy the corresponding rows to a third dataframe C, and for every name that appears in B but not A, I want to copy the corresponding rows to a fourth dataframe D. I can then row bind the dataframes C and D together and get a complete list of all the rows that were missing in either A or B.

try as I might - I can't get this to work. Can someone help P-L-E-A-S-E!!!!

Thanks,
Gregg Powell
AZ, USA
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 509 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20210613/3f8c5da8/attachment.sig>

From g@@@powe|| @end|ng |rom protonm@||@com  Sun Jun 13 23:30:27 2021
From: g@@@powe|| @end|ng |rom protonm@||@com (Gregg Powell)
Date: Sun, 13 Jun 2021 21:30:27 +0000
Subject: [R] Need to compare two columns in two data.frames and return all
 rows from df where rows values are missing
In-Reply-To: <W60thHhfpbpbFOepJns1hemIEbHj81ntVZZI0_C3ZheSCy0RrGuh3kgOky-9tvCN02tgFAXs3l6SD6zkVUGmWLEki65S2kzkn5Fc0ZV8nJM=@protonmail.com>
References: <W60thHhfpbpbFOepJns1hemIEbHj81ntVZZI0_C3ZheSCy0RrGuh3kgOky-9tvCN02tgFAXs3l6SD6zkVUGmWLEki65S2kzkn5Fc0ZV8nJM=@protonmail.com>
Message-ID: <mdpu0vYQMOn8Q8TwuywIlMpUfUhNdQbeaD2cmejx22GwngEbkYzgBCU0hmBwLNXfSdvMFe6g8u-Xo8Q0Tlas1j7ErFmrgd1njlighgjR5E0=@protonmail.com>

This is even complicated to write into a question....

Have two data.frames (A and B)

data.frame A and B each have a name column. Want to compare A and B data.frame to each other based on the values in the 'names' columns - for every name that appears in dataframe A? but not B, I want to copy the corresponding rows to a third dataframe C, and for every name that appears in B but not A, I want to copy the corresponding rows to a fourth dataframe D. I can then row bind the dataframes C and D together and get a complete list of all the rows that were missing in either A or B.

try as I might - I can't get this to work. Can someone help P-L-E-A-S-E!!!!
 

 Thanks,
 Gregg Powell
 AZ, USA
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 509 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20210613/96ea49b3/attachment.sig>

From bgunter@4567 @end|ng |rom gm@||@com  Mon Jun 14 00:53:24 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 13 Jun 2021 15:53:24 -0700
Subject: [R] 
 Need to compare two columns in two data.frames and return all
 rows from df where rows values are missing
In-Reply-To: <W60thHhfpbpbFOepJns1hemIEbHj81ntVZZI0_C3ZheSCy0RrGuh3kgOky-9tvCN02tgFAXs3l6SD6zkVUGmWLEki65S2kzkn5Fc0ZV8nJM=@protonmail.com>
References: <W60thHhfpbpbFOepJns1hemIEbHj81ntVZZI0_C3ZheSCy0RrGuh3kgOky-9tvCN02tgFAXs3l6SD6zkVUGmWLEki65S2kzkn5Fc0ZV8nJM=@protonmail.com>
Message-ID: <CAGxFJbQ79wTu6Pyb9ryM=MjZ7woDQjzDcAVxM6PhM07gD1tQ0A@mail.gmail.com>

As always, a reprex would considerably improve the chances of a useful
reply... See the posting guide linked below.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sun, Jun 13, 2021 at 2:28 PM Gregg Powell via R-help <
r-help at r-project.org> wrote:

> This is even complicated to write into a question....
>
> Have two data.frames (A and B)
>
> data.frame A and B each have a name column. Want to compare A and B
> data.frame to each other based on the values in the 'names' columns - for
> every name that appears in dataframe A  but not B, I want to copy the
> corresponding rows to a third dataframe C, and for every name that appears
> in B but not A, I want to copy the corresponding rows to a fourth dataframe
> D. I can then row bind the dataframes C and D together and get a complete
> list of all the rows that were missing in either A or B.
>
> try as I might - I can't get this to work. Can someone help P-L-E-A-S-E!!!!
>
> Thanks,
> Gregg Powell
> AZ, USA______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Mon Jun 14 01:06:07 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 13 Jun 2021 16:06:07 -0700
Subject: [R] 
 Need to compare two columns in two data.frames and return all
 rows from df where rows values are missing
In-Reply-To: <mdpu0vYQMOn8Q8TwuywIlMpUfUhNdQbeaD2cmejx22GwngEbkYzgBCU0hmBwLNXfSdvMFe6g8u-Xo8Q0Tlas1j7ErFmrgd1njlighgjR5E0=@protonmail.com>
References: <W60thHhfpbpbFOepJns1hemIEbHj81ntVZZI0_C3ZheSCy0RrGuh3kgOky-9tvCN02tgFAXs3l6SD6zkVUGmWLEki65S2kzkn5Fc0ZV8nJM=@protonmail.com>
 <mdpu0vYQMOn8Q8TwuywIlMpUfUhNdQbeaD2cmejx22GwngEbkYzgBCU0hmBwLNXfSdvMFe6g8u-Xo8Q0Tlas1j7ErFmrgd1njlighgjR5E0=@protonmail.com>
Message-ID: <CAGxFJbSp_FagL6fGqHCDfcZiOWWoLxKht==f3L83oewn-oMN4w@mail.gmail.com>

... but I *think*

merge(A, B, by = "name", all = TRUE)

is what you want. Rows of NA's correspond to rows that were in one but not
the other.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sun, Jun 13, 2021 at 2:38 PM Gregg Powell via R-help <
r-help at r-project.org> wrote:

> This is even complicated to write into a question....
>
> Have two data.frames (A and B)
>
> data.frame A and B each have a name column. Want to compare A and B
> data.frame to each other based on the values in the 'names' columns - for
> every name that appears in dataframe A  but not B, I want to copy the
> corresponding rows to a third dataframe C, and for every name that appears
> in B but not A, I want to copy the corresponding rows to a fourth dataframe
> D. I can then row bind the dataframes C and D together and get a complete
> list of all the rows that were missing in either A or B.
>
> try as I might - I can't get this to work. Can someone help P-L-E-A-S-E!!!!
>
>
>  Thanks,
>  Gregg Powell
>  AZ, USA______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From wjm1 @end|ng |rom c@@@co|umb|@@edu  Mon Jun 14 01:17:11 2021
From: wjm1 @end|ng |rom c@@@co|umb|@@edu (William Michels)
Date: Sun, 13 Jun 2021 16:17:11 -0700
Subject: [R] 
 Need to compare two columns in two data.frames and return all
 rows from df where rows values are missing
In-Reply-To: <mdpu0vYQMOn8Q8TwuywIlMpUfUhNdQbeaD2cmejx22GwngEbkYzgBCU0hmBwLNXfSdvMFe6g8u-Xo8Q0Tlas1j7ErFmrgd1njlighgjR5E0=@protonmail.com>
References: <W60thHhfpbpbFOepJns1hemIEbHj81ntVZZI0_C3ZheSCy0RrGuh3kgOky-9tvCN02tgFAXs3l6SD6zkVUGmWLEki65S2kzkn5Fc0ZV8nJM=@protonmail.com>
 <mdpu0vYQMOn8Q8TwuywIlMpUfUhNdQbeaD2cmejx22GwngEbkYzgBCU0hmBwLNXfSdvMFe6g8u-Xo8Q0Tlas1j7ErFmrgd1njlighgjR5E0=@protonmail.com>
Message-ID: <CAA99HCwNSWKo7xxu12YdYjO_JRbse+n-uj2ni+4XH7L0-D=V2A@mail.gmail.com>

Maybe something like this?

> df_A <- data.frame(names=LETTERS[1:10], values_A=1:10)
> df_B <- data.frame(names=LETTERS[6:15], values_B=11:20)
> df_AB <- merge(df_A, df_B, by="names")
> df_AAB <- merge(df_A, df_AB, all.x=TRUE)
> df_BAB <- merge(df_B, df_AB, all.x=TRUE)
> df_C <- df_AAB[is.na(df_AAB$values_B), ]
> df_D <- df_BAB[is.na(df_BAB$values_A), ]
> df_AB
  names values_A values_B
1     F        6       11
2     G        7       12
3     H        8       13
4     I        9       14
5     J       10       15
> df_C
  names values_A values_B
1     A        1       NA
2     B        2       NA
3     C        3       NA
4     D        4       NA
5     E        5       NA
> df_D
   names values_B values_A
6      K       16       NA
7      L       17       NA
8      M       18       NA
9      N       19       NA
10     O       20       NA
>

HTH, Bill.

W. Michels, Ph.D.











On Sun, Jun 13, 2021 at 2:38 PM Gregg Powell via R-help
<r-help at r-project.org> wrote:
>
> This is even complicated to write into a question....
>
> Have two data.frames (A and B)
>
> data.frame A and B each have a name column. Want to compare A and B data.frame to each other based on the values in the 'names' columns - for every name that appears in dataframe A  but not B, I want to copy the corresponding rows to a third dataframe C, and for every name that appears in B but not A, I want to copy the corresponding rows to a fourth dataframe D. I can then row bind the dataframes C and D together and get a complete list of all the rows that were missing in either A or B.
>
> try as I might - I can't get this to work. Can someone help P-L-E-A-S-E!!!!
>
>
>  Thanks,
>  Gregg Powell
>  AZ, USA______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From g@@@powe|| @end|ng |rom protonm@||@com  Mon Jun 14 01:47:52 2021
From: g@@@powe|| @end|ng |rom protonm@||@com (Gregg Powell)
Date: Sun, 13 Jun 2021 23:47:52 +0000
Subject: [R] Need to compare two columns in two data.frames and return all
 rows from df where rows values are missing
In-Reply-To: <CAA99HCwNSWKo7xxu12YdYjO_JRbse+n-uj2ni+4XH7L0-D=V2A@mail.gmail.com>
References: <W60thHhfpbpbFOepJns1hemIEbHj81ntVZZI0_C3ZheSCy0RrGuh3kgOky-9tvCN02tgFAXs3l6SD6zkVUGmWLEki65S2kzkn5Fc0ZV8nJM=@protonmail.com>
 <mdpu0vYQMOn8Q8TwuywIlMpUfUhNdQbeaD2cmejx22GwngEbkYzgBCU0hmBwLNXfSdvMFe6g8u-Xo8Q0Tlas1j7ErFmrgd1njlighgjR5E0=@protonmail.com>
 <CAA99HCwNSWKo7xxu12YdYjO_JRbse+n-uj2ni+4XH7L0-D=V2A@mail.gmail.com>
Message-ID: <fsKfH_snKQxcRBHo26bZhbtK7dORwYPiOSqM-WomXNsPFxi60PxerBzsmvfk6w-B4X4PaANKMq5aJuz_VKowaI8TzT5wQGYHV6cWVQvM8PY=@protonmail.com>

Thanks Dr. Michaels.


??????? Original Message ???????

On Sunday, June 13th, 2021 at 4:17 PM, William Michels <wjm1 at caa.columbia.edu> wrote:

> Maybe something like this?
> 

> > df_A <- data.frame(names=LETTERS[1:10], values_A=1:10)
> > 

> > df_B <- data.frame(names=LETTERS[6:15], values_B=11:20)
> > 

> > df_AB <- merge(df_A, df_B, by="names")
> > 

> > df_AAB <- merge(df_A, df_AB, all.x=TRUE)
> > 

> > df_BAB <- merge(df_B, df_AB, all.x=TRUE)
> > 

> > df_C <- df_AAB[is.na(df_AAB$values_B), ]
> > 

> > df_D <- df_BAB[is.na(df_BAB$values_A), ]
> > 

> > df_AB
> 

> names values_A values_B
> 

> 1 F 6 11
> 

> 2 G 7 12
> 

> 3 H 8 13
> 

> 4 I 9 14
> 

> 5 J 10 15
> 

> > df_C
> 

> names values_A values_B
> 

> 1 A 1 NA
> 

> 2 B 2 NA
> 

> 3 C 3 NA
> 

> 4 D 4 NA
> 

> 5 E 5 NA
> 

> > df_D
> 

> names values_B values_A
> 

> 6 K 16 NA
> 

> 7 L 17 NA
> 

> 8 M 18 NA
> 

> 9 N 19 NA
> 

> 10 O 20 NA
> 

> HTH, Bill.
> 

> W. Michels, Ph.D.
> 

> On Sun, Jun 13, 2021 at 2:38 PM Gregg Powell via R-help
> 

> r-help at r-project.org wrote:
> 

> > This is even complicated to write into a question....
> > 

> > Have two data.frames (A and B)
> > 

> > data.frame A and B each have a name column. Want to compare A and B data.frame to each other based on the values in the 'names' columns - for every name that appears in dataframe A but not B, I want to copy the corresponding rows to a third dataframe C, and for every name that appears in B but not A, I want to copy the corresponding rows to a fourth dataframe D. I can then row bind the dataframes C and D together and get a complete list of all the rows that were missing in either A or B.
> > 

> > try as I might - I can't get this to work. Can someone help P-L-E-A-S-E!!!!
> > 

> > Thanks,
> > 

> > Gregg Powell
> > 

> > AZ, USA______________________________________________
> > 

> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > 

> > https://stat.ethz.ch/mailman/listinfo/r-help
> > 

> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > 

> > and provide commented, minimal, self-contained, reproducible code.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 509 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20210613/a3a9daa8/attachment.sig>

From bgunter@4567 @end|ng |rom gm@||@com  Tue Jun 15 02:57:11 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 14 Jun 2021 17:57:11 -0700
Subject: [R] 
 Identifying words from a list and code as 0 or 1 and words NOT
 on the list code as 1
In-Reply-To: <BN6PR11MB1603A01D48C7B4610D89E539DD309@BN6PR11MB1603.namprd11.prod.outlook.com>
References: <BN6PR11MB16035EF3319E9C5A895D6085DD349@BN6PR11MB1603.namprd11.prod.outlook.com>
 <CAGxFJbR=zqOdZbqWuZ5STYXgJK6g_MHvwFHevzJLqyVxPcipPA@mail.gmail.com>
 <BN6PR11MB160367BB04C2A94E5F0CF54CDD349@BN6PR11MB1603.namprd11.prod.outlook.com>
 <CAGxFJbREB1FwiCQyzxhh=H0wLW53Et6WR_csOWDtK+=s0goCNw@mail.gmail.com>
 <BN6PR11MB1603A01D48C7B4610D89E539DD309@BN6PR11MB1603.namprd11.prod.outlook.com>
Message-ID: <CAGxFJbTfLONCFqqSAok+C9=2sMak+7NU4dZ_rFZ0oJ0V-qKASQ@mail.gmail.com>

I was not going to continue this thread, as you had Rui's presumed solution
in hand. But now that you have responded, I need to warn you that actually
my solution -- and perhaps Rui's -- may be incorrect, though you'll have to
check carefully to see if you also have the error. The problem stems from
this note in the regex man page:

"The symbol \b matches the empty string at either edge of a word, and \B
matches the empty string provided it is not at an edge of a word. (The
interpretation of ?word? depends on the locale and implementation: these
are all extensions.)."

This vague "interpretation" but is, of course, quite annoying, though
probably unavoidable given the vagaries of language."

The problem can be seen in this little example:

> gsub("\\bit\\b", "", c("it's a", "this is it"))
[1] "'s a"     "this is "

What's going on here, is that in *my particular implementation* (maybe not
yours or Rui's) of the regex engine, the apostrophe in "it's" is seen as a
word delineator, so the "it" in "it's" is removed, which is *not* what
needs to happen. Defining a word to be text that is preceded by either a
space or line beginning and followed by a space or line end, seems to fix
the problem:

> gsub("( |^)it( |$)", "", c("it's a", "this is it"))
[1] "it's a"  "this is"

But you'll need to **check this carefully** with good examples.

Here's how a slightly modified version with this correction of what I gave
you previously works on your example on my R setup (with an extra "Now
we're all done" added to test the "all done" core phrase):

> ut <- c(Utterance, "now we are all done") ## for testing
>
> out <- gsub(paste("( |^)",coreWords,"( |$)", sep = "", collapse = "|"),
+          "", ut)
> Core <- nchar(out) < nchar(ut)
> Fringe <-  grepl("[[:alpha:]]", out)
> Core
 [1]  TRUE FALSE  TRUE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE
 TRUE  TRUE
[14] FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 TRUE FALSE
[27]  TRUE  TRUE  TRUE  TRUE FALSE  TRUE
> Fringe
 [1]  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 TRUE  TRUE
[14]  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 TRUE  TRUE
[27]  TRUE  TRUE FALSE  TRUE  TRUE  TRUE

Sorry for the confusion, but this sort of thing can be tricky. If Rui's
solution does not suffer these problems, it should be preferred.

Cheers,
Bert






Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Jun 14, 2021 at 5:13 PM Debbie Hahs-Vaughn <debbie at ucf.edu> wrote:

> This also seems to work beautifully!  I'm all for having multiple
> approaches so appreciate the time you took to do this and am particularly
> appreciative of the annotation on the script.  That definitely helps
> clarify what's happening and am sure that will be helpful to others working
> on similar tasks as well.  Thanks again, very much!
>
>
>
>
> ------------------------------
> *From:* Bert Gunter <bgunter.4567 at gmail.com>
> *Sent:* Friday, June 11, 2021 7:10 PM
> *To:* Debbie Hahs-Vaughn <debbie at ucf.edu>; Rui Barradas <
> ruipbarradas at sapo.pt>
> *Cc:* r-help at R-project.org <r-help at r-project.org>
> *Subject:* Re: [R] Identifying words from a list and code as 0 or 1 and
> words NOT on the list code as 1
>
> First, if Rui's solution works for you, I recommend that you stop reading
> and discard this email. Why  bother wasting time with stuff you don't need?!
>
> If it doesn't work or if you would like another approach -- perhaps as a
> check -- then read on.
>
> Warning: I am a dinosaur and just use base R functionality , including
> regular expressions, for these sorts of relatively simple tasks. I also
> eschew pipes. So my code for your example is simply:
>
> matchpat <- paste("\\b",coreWords, "\\b", sep = "",collapse = "|")
> out <- gsub(matchpat,"",Utterance)
> Core <- nchar(out) != nchar(Utterance)
> Fringe <-  nchar(gsub(" +","",out)) > 0
>
> Note that I have given the results as logical TRUE or FALSE. If you insist
> on 1's and 0's, just instead do:
> Core <- (nchar(out) != nchar(Utterance)) + 0
> Fringe <- sign(nchar(gsub(" +","",out)))
>
>
> Now for an explanation. My approach was simply to create a regular
> expression (regex) match pattern that would match any of your words or
> phrases. The matchpat assignment does this just by logically "or"ing (with
> the"|" symbol) together all your words and phrases, each of which is
> surrounded by the edge of word symbol, "\\b" (so only whole words or
> phrases are matched). This is standard regex stuff, and I could do it
> rather handily with r's paste() function. One word of caution, though: R's
> ?regex says:
> "Long regular expression patterns may or may not be accepted: the POSIX
> standard only requires up to 256 bytes." So what works for your reprex
> might not work for your full list of coreWords. It is possible to work
> around this by repeatedly applying subsets of your coreWords **provided**
> you make sure that you order these subsets by the number of words in each
> coreWord phrase. That is, bigger phrases must be applied first before
> applying smaller phrases/words to the results. This is not hard to do, but
> adds complexity, and may not be necessary. See below for an explanation.
>
> What the second line of code does is to use the gsub() function to remove
> all matches to matchpat -- which, via the "|" construction -- is anything
> in your coreWord list. So this means that if you have any matches in an
> utterance, what remains after gsubbing will be shorter -- fewer characters
> -- than the original utterance. The Core assignment checks for this using
> the nchar() function and returns TRUE or FALSE as appropriate. If all the
> words in the utterance matched code words, you would be left with nothing
> or a bunch of spaces. The Fringe assignment just first removes all spaces
> via the gsub() and then returns TRUE if there's nothing (0 characters) left
> or FALSE if there still are some left.
>
> Finally, why do you have to start with longer phrases first if you have to
> do this sequentially? Suppose you have the phrases "good night" in your
> phrase list, and also the word "night". If you have to do things
> sequentially instead of as one swell foop, if you applied the gsub() with a
> bunch including only "night" first, then "night" will be removed and "good"
> will be left. Then when the bunch containing "good night" is gsubbed after,
> it won't see the whole phrase any more and "good" will be left in, which is
> *not* what you said you wanted.
>
> Finally,it is of course possible to do these things by sequentially
> applying one word/phrase at a time in a loop (again, longest phrases first
> for the same reason as above), but I believe this might take quite a while
> with a big list of coreWords (and Utterances). The above approach using "|"
> vectorizes things and takes advantage of the power of the regex engine, so
> I think it will be more efficient **if it's accepted.**  But if you run
> into the problem of pattern length limitations, then sequentially, one at a
> time, might be simpler. My judgments of computational efficiency are often
> wrong anyway.
>
> Note: I think my approach works, but I would appreciate an on-list
> response if I have erred. Also, even if correct, alternative cleverer
> approaches are always welcome.
>
> Cheers,
> Bert
>
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Fri, Jun 11, 2021 at 11:54 AM Debbie Hahs-Vaughn <debbie at ucf.edu>
> wrote:
>
> Thank you for noting this. The utterance has to match the exact phrase
> (e.g., "all done") for it to constitute a match in the utterance.
>
>
> ------------------------------
> *From:* Bert Gunter <bgunter.4567 at gmail.com>
> *Sent:* Friday, June 11, 2021 2:42 PM
> *To:* Debbie Hahs-Vaughn <debbie at ucf.edu>
> *Cc:* r-help at R-project.org <r-help at r-project.org>
> *Subject:* Re: [R] Identifying words from a list and code as 0 or 1 and
> words NOT on the list code as 1
>
> Note that your specification is ambiguous. "all done" is not a single word
> -- it's a phrase. So what do you want to do if:
>
> 1) "all"  and/or "done"  are also among your core words?
> 2) "I'm all done" is another of your core phrases.
>
> The existence of phrases in your core list allows such conflicts to arise.
> Do you claim that phrases would be chosen so that this can never happen? --
> or what is your specification if they can (what constitutes a match and in
> what priority)?
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Fri, Jun 11, 2021 at 10:06 AM Debbie Hahs-Vaughn <debbie at ucf.edu>
> wrote:
>
> I am working with utterances, statements spoken by children.  From each
> utterance, if one or more words in the statement match a predefined list of
> multiple 'core' words (probably 300 words), then I want to input '1' into
> 'Core' (and if none, then input '0' into 'Core').
>
> If there are one or more words in the statement that are NOT core words,
> then I want to input '1' into 'Fringe' (and if there are only core words
> and nothing extra, then input '0' into 'Fringe').  I will not have a list
> of Fringe words.
>
> Basically, right now I have a child ID and only the utterances.  Here is a
> snippet of my data.
>
> ID      Utterance
> 1       a baby
> 2       small
> 3       yes
> 4       where's his bed
> 5       there's his bed
> 6       where's his pillow
> 7       what is that on his head
> 8       hey he has his arm stuck here
> 9       there there's it
> 10      now you're gonna go night-night
> 11      and that's the thing you can turn on
> 12      yeah where's the music box
> 13      what is this
> 14      small
> 15      there you go baby
>
>
> The following code runs but isn't doing exactly what I need--which is:  1)
> the ability to detect words from the list and define as core; 2) the
> ability to search the utterance and if there are any words in the utterance
> that are NOT core, to identify those as ?1? as I will not have a list of
> fringe words.
>
> ```
>
> library(dplyr)
> library(stringr)
> library(tidyr)
>
> coreWords <-c("I", "no", "yes", "my", "the", "want", "is", "it", "that",
> "a", "go", "mine", "you", "what", "on", "in", "here", "more", "out", "off",
> "some", "help", "all done", "finished")
>
> str_detect(df,)
>
> dfplus <- df %>%
>   mutate(id = row_number()) %>%
>   separate_rows(Utterance, sep = ' ') %>%
>   mutate(Core = + str_detect(Utterance, str_c(coreWords, collapse = '|')),
>          Fringe = + !Core) %>%
>   group_by(id) %>%
>   mutate(Core = + (sum(Core) > 0),
>          Fringe = + (sum(Fringe) > 0)) %>%
>   slice(1) %>%
>   select(-Utterance) %>%
>   left_join(df) %>%
>   ungroup() %>%
>   select(Utterance, Core, Fringe, ID)
>
> ```
>
> The dput() code is:
>
> structure(list(Utterance = c("a baby", "small", "yes", "where's his bed",
> "there's his bed", "where's his pillow", "what is that on his head",
> "hey he has his arm stuck here", "there there's it", "now you're gonna go
> night-night",
> "and that's the thing you can turn on", "yeah where's the music box",
> "what is this", "small", "there you go baby ", "what is this for ",
> "a ", "and the go goodnight here ", "and what is this ", " what's that
> sound ",
> "what does she say ", "what she say", "should I turn the on so Laura
> doesn't cry ",
> "what is this ", "what is that ", "where's clothes ", " where's the baby's
> bedroom ",
> "that might be in dad's bed+room ", "yes ", "there you go baby ",
> "you're welcome "), Core = c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 1L, 1L, 1L, 1L, 1L, 1L, 1L), Fringe = c(0L, 0L, 0L, 1L, 1L, 1L,
> 0L, 1L, 0L, 1L, 1L, 1L, 0L, 0L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), ID = 1:31), row.names = c(NA,
> -31L), class = c("tbl_df", "tbl", "data.frame"))
>
> ```
>
> The first 10 rows of output looks like this:
>
> Utterance       Core    Fringe  ID
> 1       a baby  1       0       1
> 2       small   1       0       2
> 3       yes     1       0       3
> 4       where's his bed 1       1       4
> 5       there's his bed 1       1       5
> 6       where's his pillow      1       1       6
> 7       what is that on his head        1       0       7
> 8       hey he has his arm stuck here   1       1       8
> 9       there there's it        1       0       9
> 10      now you're gonna go night-night 1       1       10
>
> For example, in line 1 of the output, ?a? is a core word so ?1? for core
> is correct.  However, ?baby? should be picked up as fringe so there should
> be ?1?, not ?0?, for fringe. Lines 7 and 9 also have words that should be
> identified as fringe but are not.
>
> Additionally, it seems like if the utterance has parts of a core word in
> it, it?s being counted. For example, ?small? is identified as a core word
> even though it's not (but 'all done' is a core word). 'Where's his bed' is
> identified as core and fringe, although none of the words are core.
>
> Any suggestions on what is happening and how to correct it are greatly
> appreciated.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> <https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=04%7C01%7Cdebbie%40ucf.edu%7C4281e4e2bef34fd68d3c08d92d2e157e%7Cbb932f15ef3842ba91fcf3c59d5dd1f1%7C0%7C1%7C637590498253390595%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=2hXSrCtfbIEk4gqHumpNCgkzr1pVWuukB48laLhDHQI%3D&reserved=0>
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> <https://nam02.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=04%7C01%7Cdebbie%40ucf.edu%7C4281e4e2bef34fd68d3c08d92d2e157e%7Cbb932f15ef3842ba91fcf3c59d5dd1f1%7C0%7C1%7C637590498253400588%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=sTXDvMD%2B7UZynCzuoEovyBfOwwgmUlpBV7szxQYwJVg%3D&reserved=0>
> and provide commented, minimal, self-contained, reproducible code.
>
>

	[[alternative HTML version deleted]]


From |orenz@br@chtendor| @end|ng |rom gmx@de  Fri Jun 11 19:34:04 2021
From: |orenz@br@chtendor| @end|ng |rom gmx@de (Lorenz Brachtendorf)
Date: Fri, 11 Jun 2021 19:34:04 +0200
Subject: [R] [R-pkgs] cryptowatchR new version 0.2.0 on CRAN
Message-ID: <000001d75ee7$fa205c00$ee611400$@brachtendorf@gmx.de>

Dear all,



this is to announce that a new version of cryptowatchR is now available on
CRAN. It may be useful for everyone who is interested in working with data
on cryptocurrencies and crypto exchanges.



This package is a wrapper of the cryptowatch API (for a detailed
documentation see https://docs.cryptowat.ch/rest-api) and allows an easy and
free access to prices and other market data (volume, trades, order books,
bid and ask prices, live quotes, and more) of cryptocurrencies and crypto
exchanges. For example, you can easily retrieve historical prices for a
large number of cryptocurrencies without setting up an account.



The new version includes the option to use your own personal API key. This
may be relevant for heavy users of the API. Moreover, several new functions
allow access to all available data that can be retrieved from Cryptowatch.



CRAN: https://cran.r-project.org/web/packages/cryptowatchR/index.html

GitHub: https://github.com/lorenzbr/cryptowatchR



I hope you find this package useful. Please let me know if you have any
suggestions or if you have come across any issues.



Best regards,



Lorenz Brachtendorf


	[[alternative HTML version deleted]]

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From debb|e @end|ng |rom uc|@edu  Tue Jun 15 02:13:44 2021
From: debb|e @end|ng |rom uc|@edu (Debbie Hahs-Vaughn)
Date: Tue, 15 Jun 2021 00:13:44 +0000
Subject: [R] 
 Identifying words from a list and code as 0 or 1 and words NOT
 on the list code as 1
In-Reply-To: <CAGxFJbREB1FwiCQyzxhh=H0wLW53Et6WR_csOWDtK+=s0goCNw@mail.gmail.com>
References: <BN6PR11MB16035EF3319E9C5A895D6085DD349@BN6PR11MB1603.namprd11.prod.outlook.com>
 <CAGxFJbR=zqOdZbqWuZ5STYXgJK6g_MHvwFHevzJLqyVxPcipPA@mail.gmail.com>
 <BN6PR11MB160367BB04C2A94E5F0CF54CDD349@BN6PR11MB1603.namprd11.prod.outlook.com>,
 <CAGxFJbREB1FwiCQyzxhh=H0wLW53Et6WR_csOWDtK+=s0goCNw@mail.gmail.com>
Message-ID: <BN6PR11MB1603A01D48C7B4610D89E539DD309@BN6PR11MB1603.namprd11.prod.outlook.com>

This also seems to work beautifully!  I'm all for having multiple approaches so appreciate the time you took to do this and am particularly appreciative of the annotation on the script.  That definitely helps clarify what's happening and am sure that will be helpful to others working on similar tasks as well.  Thanks again, very much!




________________________________
From: Bert Gunter <bgunter.4567 at gmail.com>
Sent: Friday, June 11, 2021 7:10 PM
To: Debbie Hahs-Vaughn <debbie at ucf.edu>; Rui Barradas <ruipbarradas at sapo.pt>
Cc: r-help at R-project.org <r-help at r-project.org>
Subject: Re: [R] Identifying words from a list and code as 0 or 1 and words NOT on the list code as 1

First, if Rui's solution works for you, I recommend that you stop reading and discard this email. Why  bother wasting time with stuff you don't need?!

If it doesn't work or if you would like another approach -- perhaps as a check -- then read on.

Warning: I am a dinosaur and just use base R functionality , including regular expressions, for these sorts of relatively simple tasks. I also eschew pipes. So my code for your example is simply:

matchpat <- paste("\\b",coreWords, "\\b", sep = "",collapse = "|")
out <- gsub(matchpat,"",Utterance)
Core <- nchar(out) != nchar(Utterance)
Fringe <-  nchar(gsub(" +","",out)) > 0

Note that I have given the results as logical TRUE or FALSE. If you insist on 1's and 0's, just instead do:
Core <- (nchar(out) != nchar(Utterance)) + 0
Fringe <- sign(nchar(gsub(" +","",out)))


Now for an explanation. My approach was simply to create a regular expression (regex) match pattern that would match any of your words or phrases. The matchpat assignment does this just by logically "or"ing (with the"|" symbol) together all your words and phrases, each of which is surrounded by the edge of word symbol, "\\b" (so only whole words or phrases are matched). This is standard regex stuff, and I could do it rather handily with r's paste() function. One word of caution, though: R's ?regex says:
"Long regular expression patterns may or may not be accepted: the POSIX standard only requires up to 256 bytes." So what works for your reprex might not work for your full list of coreWords. It is possible to work around this by repeatedly applying subsets of your coreWords **provided** you make sure that you order these subsets by the number of words in each coreWord phrase. That is, bigger phrases must be applied first before applying smaller phrases/words to the results. This is not hard to do, but adds complexity, and may not be necessary. See below for an explanation.

What the second line of code does is to use the gsub() function to remove all matches to matchpat -- which, via the "|" construction -- is anything in your coreWord list. So this means that if you have any matches in an utterance, what remains after gsubbing will be shorter -- fewer characters -- than the original utterance. The Core assignment checks for this using the nchar() function and returns TRUE or FALSE as appropriate. If all the words in the utterance matched code words, you would be left with nothing or a bunch of spaces. The Fringe assignment just first removes all spaces via the gsub() and then returns TRUE if there's nothing (0 characters) left or FALSE if there still are some left.

Finally, why do you have to start with longer phrases first if you have to do this sequentially? Suppose you have the phrases "good night" in your phrase list, and also the word "night". If you have to do things sequentially instead of as one swell foop, if you applied the gsub() with a bunch including only "night" first, then "night" will be removed and "good" will be left. Then when the bunch containing "good night" is gsubbed after, it won't see the whole phrase any more and "good" will be left in, which is *not* what you said you wanted.

Finally,it is of course possible to do these things by sequentially applying one word/phrase at a time in a loop (again, longest phrases first for the same reason as above), but I believe this might take quite a while with a big list of coreWords (and Utterances). The above approach using "|" vectorizes things and takes advantage of the power of the regex engine, so I think it will be more efficient **if it's accepted.**  But if you run into the problem of pattern length limitations, then sequentially, one at a time, might be simpler. My judgments of computational efficiency are often wrong anyway.

Note: I think my approach works, but I would appreciate an on-list response if I have erred. Also, even if correct, alternative cleverer approaches are always welcome.

Cheers,
Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Jun 11, 2021 at 11:54 AM Debbie Hahs-Vaughn <debbie at ucf.edu<mailto:debbie at ucf.edu>> wrote:
Thank you for noting this. The utterance has to match the exact phrase (e.g., "all done") for it to constitute a match in the utterance.



________________________________
From: Bert Gunter <bgunter.4567 at gmail.com<mailto:bgunter.4567 at gmail.com>>
Sent: Friday, June 11, 2021 2:42 PM
To: Debbie Hahs-Vaughn <debbie at ucf.edu<mailto:debbie at ucf.edu>>
Cc: r-help at R-project.org <r-help at r-project.org<mailto:r-help at r-project.org>>
Subject: Re: [R] Identifying words from a list and code as 0 or 1 and words NOT on the list code as 1

Note that your specification is ambiguous. "all done" is not a single word -- it's a phrase. So what do you want to do if:

1) "all"  and/or "done"  are also among your core words?
2) "I'm all done" is another of your core phrases.

The existence of phrases in your core list allows such conflicts to arise. Do you claim that phrases would be chosen so that this can never happen? -- or what is your specification if they can (what constitutes a match and in what priority)?

Bert Gunter

"The trouble with having an open mind is that people keep coming along and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Jun 11, 2021 at 10:06 AM Debbie Hahs-Vaughn <debbie at ucf.edu<mailto:debbie at ucf.edu>> wrote:
I am working with utterances, statements spoken by children.  From each utterance, if one or more words in the statement match a predefined list of multiple 'core' words (probably 300 words), then I want to input '1' into 'Core' (and if none, then input '0' into 'Core').

If there are one or more words in the statement that are NOT core words, then I want to input '1' into 'Fringe' (and if there are only core words and nothing extra, then input '0' into 'Fringe').  I will not have a list of Fringe words.

Basically, right now I have a child ID and only the utterances.  Here is a snippet of my data.

ID      Utterance
1       a baby
2       small
3       yes
4       where's his bed
5       there's his bed
6       where's his pillow
7       what is that on his head
8       hey he has his arm stuck here
9       there there's it
10      now you're gonna go night-night
11      and that's the thing you can turn on
12      yeah where's the music box
13      what is this
14      small
15      there you go baby


The following code runs but isn't doing exactly what I need--which is:  1) the ability to detect words from the list and define as core; 2) the ability to search the utterance and if there are any words in the utterance that are NOT core, to identify those as ?1? as I will not have a list of fringe words.

```

library(dplyr)
library(stringr)
library(tidyr)

coreWords <-c("I", "no", "yes", "my", "the", "want", "is", "it", "that", "a", "go", "mine", "you", "what", "on", "in", "here", "more", "out", "off", "some", "help", "all done", "finished")

str_detect(df,)

dfplus <- df %>%
  mutate(id = row_number()) %>%
  separate_rows(Utterance, sep = ' ') %>%
  mutate(Core = + str_detect(Utterance, str_c(coreWords, collapse = '|')),
         Fringe = + !Core) %>%
  group_by(id) %>%
  mutate(Core = + (sum(Core) > 0),
         Fringe = + (sum(Fringe) > 0)) %>%
  slice(1) %>%
  select(-Utterance) %>%
  left_join(df) %>%
  ungroup() %>%
  select(Utterance, Core, Fringe, ID)

```

The dput() code is:

structure(list(Utterance = c("a baby", "small", "yes", "where's his bed",
"there's his bed", "where's his pillow", "what is that on his head",
"hey he has his arm stuck here", "there there's it", "now you're gonna go night-night",
"and that's the thing you can turn on", "yeah where's the music box",
"what is this", "small", "there you go baby ", "what is this for ",
"a ", "and the go goodnight here ", "and what is this ", " what's that sound ",
"what does she say ", "what she say", "should I turn the on so Laura doesn't cry ",
"what is this ", "what is that ", "where's clothes ", " where's the baby's bedroom ",
"that might be in dad's bed+room ", "yes ", "there you go baby ",
"you're welcome "), Core = c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
1L, 1L, 1L, 1L, 1L, 1L, 1L), Fringe = c(0L, 0L, 0L, 1L, 1L, 1L,
0L, 1L, 0L, 1L, 1L, 1L, 0L, 0L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), ID = 1:31), row.names = c(NA,
-31L), class = c("tbl_df", "tbl", "data.frame"))

```

The first 10 rows of output looks like this:

Utterance       Core    Fringe  ID
1       a baby  1       0       1
2       small   1       0       2
3       yes     1       0       3
4       where's his bed 1       1       4
5       there's his bed 1       1       5
6       where's his pillow      1       1       6
7       what is that on his head        1       0       7
8       hey he has his arm stuck here   1       1       8
9       there there's it        1       0       9
10      now you're gonna go night-night 1       1       10

For example, in line 1 of the output, ?a? is a core word so ?1? for core is correct.  However, ?baby? should be picked up as fringe so there should be ?1?, not ?0?, for fringe. Lines 7 and 9 also have words that should be identified as fringe but are not.

Additionally, it seems like if the utterance has parts of a core word in it, it?s being counted. For example, ?small? is identified as a core word even though it's not (but 'all done' is a core word). 'Where's his bed' is identified as core and fringe, although none of the words are core.

Any suggestions on what is happening and how to correct it are greatly appreciated.

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help<https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=04%7C01%7Cdebbie%40ucf.edu%7C4281e4e2bef34fd68d3c08d92d2e157e%7Cbb932f15ef3842ba91fcf3c59d5dd1f1%7C0%7C1%7C637590498253390595%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=2hXSrCtfbIEk4gqHumpNCgkzr1pVWuukB48laLhDHQI%3D&reserved=0>
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html<https://nam02.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=04%7C01%7Cdebbie%40ucf.edu%7C4281e4e2bef34fd68d3c08d92d2e157e%7Cbb932f15ef3842ba91fcf3c59d5dd1f1%7C0%7C1%7C637590498253400588%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=sTXDvMD%2B7UZynCzuoEovyBfOwwgmUlpBV7szxQYwJVg%3D&reserved=0>
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From j@ke@e|m@tedt @end|ng |rom gm@||@com  Mon Jun 14 12:42:00 2021
From: j@ke@e|m@tedt @end|ng |rom gm@||@com (Jake Elmstedt)
Date: Mon, 14 Jun 2021 03:42:00 -0700
Subject: [R] 
 Need to compare two columns in two data.frames and return all
 rows from df where rows values are missing
Message-ID: <CAPTrVR6BWcogWCRg_mUh6A_b+T7dwvDTNHYbdfdDT1+qOK7pXg@mail.gmail.com>

set.seed(123)

df1 <- data.frame(name = sample(letters[1:4], 12, TRUE), score = runif(12))
head(df1)
#>   name      score
#> 1    c 0.67757064
#> 2    c 0.57263340
#> 3    c 0.10292468
#> 4    b 0.89982497
#> 5    c 0.24608773
#> 6    b 0.04205953
table(df1[["name"]])
#>
#> a b c d
#> 1 5 5 1

df2 <- data.frame(name = sample(letters[3:6], 12, TRUE), score = runif(12))
head(df2)
#>   name     score
#> 1    c 0.7584595
#> 2    e 0.2164079
#> 3    f 0.3181810
#> 4    d 0.2316258
#> 5    e 0.1428000
#> 6    d 0.4145463
table(df2[["name"]])
#>
#> c d e f
#> 3 4 3 2

df3 <- rbind(df1[!df1[["name"]] %in% df2[["name"]], ],
             df2[!df2[["name"]] %in% df1[["name"]], ])
head(df3)
#>    name      score
#> 4     b 0.89982497
#> 6     b 0.04205953
#> 7     b 0.32792072
#> 8     b 0.95450365
#> 10    a 0.69280341
#> 12    b 0.99426978
table(df3[["name"]])
#>
#> a b e f
#> 1 5 3 2


From bgunter@4567 @end|ng |rom gm@||@com  Tue Jun 15 04:50:03 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 14 Jun 2021 19:50:03 -0700
Subject: [R] 
 Need to compare two columns in two data.frames and return all
 rows from df where rows values are missing
In-Reply-To: <CAPTrVR6BWcogWCRg_mUh6A_b+T7dwvDTNHYbdfdDT1+qOK7pXg@mail.gmail.com>
References: <CAPTrVR6BWcogWCRg_mUh6A_b+T7dwvDTNHYbdfdDT1+qOK7pXg@mail.gmail.com>
Message-ID: <CAGxFJbSBUb7sDXTcKgUzu8nVZv8eiu1iVzJa_9610pDqAdeFGQ@mail.gmail.com>

merge(..., all = TRUE) essentially does this for you. rows with NA's are
the non-matches:

merge(df1,df2,by = "name",all = TRUE)
   name    score.x   score.y
1     a 0.69280341        NA
2     b 0.04205953        NA
3     b 0.32792072        NA
4     b 0.89982497        NA
5     b 0.95450365        NA
6     b 0.99426978        NA
7     c 0.67757064 0.4659625
8     c 0.67757064 0.4137243
9     c 0.67757064 0.7584595
10    c 0.24608773 0.4659625
11    c 0.24608773 0.4137243
12    c 0.24608773 0.7584595
13    c 0.10292468 0.4659625
14    c 0.10292468 0.4137243
15    c 0.10292468 0.7584595
16    c 0.88953932 0.4659625
17    c 0.88953932 0.4137243
18    c 0.88953932 0.7584595
19    c 0.57263340 0.4659625
20    c 0.57263340 0.4137243
21    c 0.57263340 0.7584595
22    d 0.64050681 0.2316258
23    d 0.64050681 0.4145463
24    d 0.64050681 0.2330341
25    d 0.64050681 0.3688455
26    e         NA 0.1428000
27    e         NA 0.2164079
28    e         NA 0.1524447
29    f         NA 0.3181810
30    f         NA 0.1388061

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Jun 14, 2021 at 7:09 PM Jake Elmstedt <jake.elmstedt at gmail.com>
wrote:

> set.seed(123)
>
> df1 <- data.frame(name = sample(letters[1:4], 12, TRUE), score = runif(12))
> head(df1)
> #>   name      score
> #> 1    c 0.67757064
> #> 2    c 0.57263340
> #> 3    c 0.10292468
> #> 4    b 0.89982497
> #> 5    c 0.24608773
> #> 6    b 0.04205953
> table(df1[["name"]])
> #>
> #> a b c d
> #> 1 5 5 1
>
> df2 <- data.frame(name = sample(letters[3:6], 12, TRUE), score = runif(12))
> head(df2)
> #>   name     score
> #> 1    c 0.7584595
> #> 2    e 0.2164079
> #> 3    f 0.3181810
> #> 4    d 0.2316258
> #> 5    e 0.1428000
> #> 6    d 0.4145463
> table(df2[["name"]])
> #>
> #> c d e f
> #> 3 4 3 2
>
> df3 <- rbind(df1[!df1[["name"]] %in% df2[["name"]], ],
>              df2[!df2[["name"]] %in% df1[["name"]], ])
> head(df3)
> #>    name      score
> #> 4     b 0.89982497
> #> 6     b 0.04205953
> #> 7     b 0.32792072
> #> 8     b 0.95450365
> #> 10    a 0.69280341
> #> 12    b 0.99426978
> table(df3[["name"]])
> #>
> #> a b e f
> #> 1 5 3 2
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From edrenth @end|ng |rom |ry@ke-@k@demy@n|  Tue Jun 15 11:10:15 2021
From: edrenth @end|ng |rom |ry@ke-@k@demy@n| (Eduard Drenth)
Date: Tue, 15 Jun 2021 09:10:15 +0000
Subject: [R] R - Java integration maintained
Message-ID: <1de1bfe14daa2349c674a6d09348f37d0d6aace5.camel@fryske-akademy.nl>

Dear all,

For integration of R and Java I am very dependent on 
https://search.maven.org/search?q=g:org.rosuda.REngine.

This offers good integration Java-R possibilities, leveraging the
strengths of both platforms.

But.... is this https://github.com/s-u/REngine actively maintained?
Latest maven central release is from 2015.

Hope to hear from you, Eduard


-- 
Eduard Drenth, Software Architekt

edrenth at fryske-akademy.nl

Doelestrjitte 8
8911 DX  Ljouwert
+31 58 234 30 47
+31 62 094 34 28 (priv?)

skype: eduarddrenth
https://github.com/eduarddrenth
frisian.eu
gpg: https://pgp.surfnet.nl/pks/lookup?search=eduarddrenth


Op freed bin ik th?s/wurkje ik minder





-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 488 bytes
Desc: This is a digitally signed message part
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20210615/782acda6/attachment.sig>

From j@ke@e|m@tedt @end|ng |rom gm@||@com  Tue Jun 15 21:07:29 2021
From: j@ke@e|m@tedt @end|ng |rom gm@||@com (Jake Elmstedt)
Date: Tue, 15 Jun 2021 12:07:29 -0700
Subject: [R] 
 Need to compare two columns in two data.frames and return all
 rows from df where rows values are missing
In-Reply-To: <CAGxFJbSBUb7sDXTcKgUzu8nVZv8eiu1iVzJa_9610pDqAdeFGQ@mail.gmail.com>
References: <CAPTrVR6BWcogWCRg_mUh6A_b+T7dwvDTNHYbdfdDT1+qOK7pXg@mail.gmail.com>
 <CAGxFJbSBUb7sDXTcKgUzu8nVZv8eiu1iVzJa_9610pDqAdeFGQ@mail.gmail.com>
Message-ID: <CAPTrVR5EtR9OKoNT_at41=OmnDUnT2W+8w1t7ZceQcaMC88xrg@mail.gmail.com>

Bert,

There are significant disadvantages to your approach. This,
emphatically, is NOT the proper use case of the merge() function.

    set.seed(123)
    df1 <- data.frame(name = sample(letters[1:4], 12, TRUE), score = runif(12))
    df2 <- data.frame(name = sample(letters[3:6], 12, TRUE), score = runif(12))
    out <- merge(df1, df2, by = "name", all = TRUE)

    (out <- merge(df1, df2, by = "name", all = TRUE))
    #>    name    score.x   score.y
    #> 1     a 0.69280341        NA
    #> 2     b 0.04205953        NA
    #> 3     b 0.32792072        NA
    #> 4     b 0.89982497        NA
    #> 5     b 0.95450365        NA
    #> 6     b 0.99426978        NA
    #> 7     c 0.67757064 0.4659625
    #> 8     c 0.67757064 0.4137243
    #> 9     c 0.67757064 0.7584595
    #> 10    c 0.24608773 0.4659625
    #> 11    c 0.24608773 0.4137243
    #> 12    c 0.24608773 0.7584595
    #> 13    c 0.10292468 0.4659625
    #> 14    c 0.10292468 0.4137243
    #> 15    c 0.10292468 0.7584595
    #> 16    c 0.88953932 0.4659625
    #> 17    c 0.88953932 0.4137243
    #> 18    c 0.88953932 0.7584595
    #> 19    c 0.57263340 0.4659625
    #> 20    c 0.57263340 0.4137243
    #> 21    c 0.57263340 0.7584595
    #> 22    d 0.64050681 0.2316258
    #> 23    d 0.64050681 0.4145463
    #> 24    d 0.64050681 0.2330341
    #> 25    d 0.64050681 0.3688455
    #> 26    e         NA 0.1428000
    #> 27    e         NA 0.2164079
    #> 28    e         NA 0.1524447
    #> 29    f         NA 0.3181810
    #> 30    f         NA 0.1388061

After doing this merge (assuming there are no edge cases which I'll
discuss at the end) you'd still need to,

    Drop the incomplete cases, make a new column of the non-NA values,
and drop the two merged columns,

    out2 <- out[!complete.cases(out), ]
    (out2[["score"]] <- with(out2, ifelse(is.na(score.x), score.y, score.x)))
    #>  [1] 0.69280341 0.04205953 0.32792072 0.89982497 0.95450365 0.99426978
    #>  [7] 0.14280002 0.21640794 0.15244475 0.31818101 0.13880606
    (result <- out2[, c(1L, 4L)])
    #>    name      score
    #> 1     a 0.69280341
    #> 2     b 0.04205953
    #> 3     b 0.32792072
    #> 4     b 0.89982497
    #> 5     b 0.95450365
    #> 6     b 0.99426978
    #> 26    e 0.14280002
    #> 27    e 0.21640794
    #> 28    e 0.15244475
    #> 29    f 0.31818101
    #> 30    f 0.13880606

Now, let's talk about one possible edge case. If either original
data.frame object contains an NA value, that row could be kept
inappropriately, as you're assuming anything with an NA should be
kept.

In short, merge() is inappropriate to use here. You can force it to
(somewhat) work, assuming no complications, but it really is a poor
choice for this task.

Created on 2021-06-15 by the [reprex
package](https://reprex.tidyverse.org) (v2.0.0.9000)

On Mon, Jun 14, 2021 at 7:50 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>
> merge(..., all = TRUE) essentially does this for you. rows with NA's are the non-matches:
>
> merge(df1,df2,by = "name",all = TRUE)
>    name    score.x   score.y
> 1     a 0.69280341        NA
> 2     b 0.04205953        NA
> 3     b 0.32792072        NA
> 4     b 0.89982497        NA
> 5     b 0.95450365        NA
> 6     b 0.99426978        NA
> 7     c 0.67757064 0.4659625
> 8     c 0.67757064 0.4137243
> 9     c 0.67757064 0.7584595
> 10    c 0.24608773 0.4659625
> 11    c 0.24608773 0.4137243
> 12    c 0.24608773 0.7584595
> 13    c 0.10292468 0.4659625
> 14    c 0.10292468 0.4137243
> 15    c 0.10292468 0.7584595
> 16    c 0.88953932 0.4659625
> 17    c 0.88953932 0.4137243
> 18    c 0.88953932 0.7584595
> 19    c 0.57263340 0.4659625
> 20    c 0.57263340 0.4137243
> 21    c 0.57263340 0.7584595
> 22    d 0.64050681 0.2316258
> 23    d 0.64050681 0.4145463
> 24    d 0.64050681 0.2330341
> 25    d 0.64050681 0.3688455
> 26    e         NA 0.1428000
> 27    e         NA 0.2164079
> 28    e         NA 0.1524447
> 29    f         NA 0.3181810
> 30    f         NA 0.1388061
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Mon, Jun 14, 2021 at 7:09 PM Jake Elmstedt <jake.elmstedt at gmail.com> wrote:
>>
>> set.seed(123)
>>
>> df1 <- data.frame(name = sample(letters[1:4], 12, TRUE), score = runif(12))
>> head(df1)
>> #>   name      score
>> #> 1    c 0.67757064
>> #> 2    c 0.57263340
>> #> 3    c 0.10292468
>> #> 4    b 0.89982497
>> #> 5    c 0.24608773
>> #> 6    b 0.04205953
>> table(df1[["name"]])
>> #>
>> #> a b c d
>> #> 1 5 5 1
>>
>> df2 <- data.frame(name = sample(letters[3:6], 12, TRUE), score = runif(12))
>> head(df2)
>> #>   name     score
>> #> 1    c 0.7584595
>> #> 2    e 0.2164079
>> #> 3    f 0.3181810
>> #> 4    d 0.2316258
>> #> 5    e 0.1428000
>> #> 6    d 0.4145463
>> table(df2[["name"]])
>> #>
>> #> c d e f
>> #> 3 4 3 2
>>
>> df3 <- rbind(df1[!df1[["name"]] %in% df2[["name"]], ],
>>              df2[!df2[["name"]] %in% df1[["name"]], ])
>> head(df3)
>> #>    name      score
>> #> 4     b 0.89982497
>> #> 6     b 0.04205953
>> #> 7     b 0.32792072
>> #> 8     b 0.95450365
>> #> 10    a 0.69280341
>> #> 12    b 0.99426978
>> table(df3[["name"]])
>> #>
>> #> a b e f
>> #> 1 5 3 2
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From edrenth @end|ng |rom |ry@ke-@k@demy@n|  Wed Jun 16 06:17:16 2021
From: edrenth @end|ng |rom |ry@ke-@k@demy@n| (Eduard Drenth)
Date: Wed, 16 Jun 2021 04:17:16 +0000
Subject: [R] R - Java integration maintained
In-Reply-To: <E8702225-DCBD-4BB8-A080-EAF95041E913@R-project.org>
References: <1de1bfe14daa2349c674a6d09348f37d0d6aace5.camel@fryske-akademy.nl>
 <E8702225-DCBD-4BB8-A080-EAF95041E913@R-project.org>
Message-ID: <a27f2b5b7c454de7ea82b6f6d30876d1bc1468a3.camel@fryske-akademy.nl>

Hi,

Thanks, I regularly release software to maven central manually using
maven release plugin. I'll dive into a gh workflow for releasing to maven and see if I can contribute something.

Bye, Eduard

-----Original Message-----
From: Simon Urbanek <simon.urbanek at R-project.org>
To: Eduard Drenth <edrenth at fryske-akademy.nl>
Cc: r-help at r-project.org <r-help at r-project.org>
Subject: Re: [R] R - Java integration maintained
Date: Wed, 16 Jun 2021 09:11:53 +1200

Eduard,
you got lucky that a friendly listener has forwarded me this e-mail,
but it would make a lot more sense to ask the maintainer (me) directly.
Yes, it is maintained. However, I am not providing Maven releases,
Maven is not the official source, the canonical source is GitHub and
rJava releases. If someone wants to provide a GH workflow to create
Maven releases it would be considered.
Cheers,Simon


> On 15/06/2021, at 9:10 PM, Eduard Drenth <edrenth at fryske-akademy.nl>
> wrote:
> Dear all,
> For integration of R and Java I am very dependent on 
> https://search.maven.org/search?q=g:org.rosuda.REngine.
> This offers good integration Java-R possibilities, leveraging
> thestrengths of both platforms.
> But.... is this https://github.com/s-u/REngine actively
> maintained?Latest maven central release is from 2015.
> Hope to hear from you, Eduard
> 
> -- Eduard Drenth, Software Architekt
> edrenth at fryske-akademy.nl
> 
> Doelestrjitte 88911 DX  Ljouwert+31 58 234 30 47+31 62 094 34 28
> (priv?)
> skype: eduarddrenthhttps://github.com/eduarddrenth
> frisian.eugpg: https://pgp.surfnet.nl/pks/lookup?search=eduarddrenth
> 
> 
> Op freed bin ik th?s/wurkje ik minder
> 
> 
> 
> ______________________________________________R-help at r-project.org
> mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


-- 
Eduard Drenth, Software Architekt

edrenth at fryske-akademy.nl

Doelestrjitte 8
8911 DX  Ljouwert
+31 58 234 30 47
+31 62 094 34 28 (priv?)

skype: eduarddrenth
https://github.com/eduarddrenth
frisian.eu
gpg: https://pgp.surfnet.nl/pks/lookup?search=eduarddrenth


Op freed bin ik th?s/wurkje ik minder





-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 488 bytes
Desc: This is a digitally signed message part
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20210616/aaaef79f/attachment.sig>

From @|mon@urb@nek @end|ng |rom R-project@org  Tue Jun 15 23:11:53 2021
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Wed, 16 Jun 2021 09:11:53 +1200
Subject: [R] R - Java integration maintained
In-Reply-To: <1de1bfe14daa2349c674a6d09348f37d0d6aace5.camel@fryske-akademy.nl>
References: <1de1bfe14daa2349c674a6d09348f37d0d6aace5.camel@fryske-akademy.nl>
Message-ID: <E8702225-DCBD-4BB8-A080-EAF95041E913@R-project.org>


Eduard,

you got lucky that a friendly listener has forwarded me this e-mail, but it would make a lot more sense to ask the maintainer (me) directly.

Yes, it is maintained. However, I am not providing Maven releases, Maven is not the official source, the canonical source is GitHub and rJava releases. If someone wants to provide a GH workflow to create Maven releases it would be considered.

Cheers,
Simon



> On 15/06/2021, at 9:10 PM, Eduard Drenth <edrenth at fryske-akademy.nl> wrote:
> 
> Dear all,
> 
> For integration of R and Java I am very dependent on 
> https://search.maven.org/search?q=g:org.rosuda.REngine.
> 
> This offers good integration Java-R possibilities, leveraging the
> strengths of both platforms.
> 
> But.... is this https://github.com/s-u/REngine actively maintained?
> Latest maven central release is from 2015.
> 
> Hope to hear from you, Eduard
> 
> 
> -- 
> Eduard Drenth, Software Architekt
> 
> edrenth at fryske-akademy.nl
> 
> Doelestrjitte 8
> 8911 DX  Ljouwert
> +31 58 234 30 47
> +31 62 094 34 28 (priv?)
> 
> skype: eduarddrenth
> https://github.com/eduarddrenth
> frisian.eu
> gpg: https://pgp.surfnet.nl/pks/lookup?search=eduarddrenth
> 
> 
> Op freed bin ik th?s/wurkje ik minder
> 
> 
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bruno@@@|onen @end|ng |rom hotm@||@com  Tue Jun 15 15:02:50 2021
From: bruno@@@|onen @end|ng |rom hotm@||@com (Bruno.Salonen)
Date: Tue, 15 Jun 2021 08:02:50 -0500 (CDT)
Subject: [R] Can't add error bars to existing line graph
Message-ID: <1623762170571-0.post-1517@n4.nabble.com>


Hi all,

I'm trying to add error bars to an existing line graph in base R.

The basic line graph comes up just fine, but it does not show my error
bars...

Data frame = readscaphfileNEW
Plot name = SCAPHLINEGRAPHNEW
x axis = TEMP
y axis = SCAPH.BPM
Tracer = Year (SAME AS 'EXPERIMENT)
Scaphmeans = means of SCAPH.BPM
Scaphse = standard error of SCAPH.BPM

Here is the code..

SCAPHLINEGRAPHNEW <- interaction.plot(readscaphfileNEW$TEMP,
readscaphfileNEW$EXPERIMENT, readscaphfileNEW$SCAPH.BPM,
xlab = "Temperature (?C)", ylab = "Scaphognathite Rate (BPM)",
main = "Scaphognathite",
ylim = c(0,300), trace.label = "Year",
type = "b", pch = c(19,17), fixed = TRUE)
arrows(SCAPHLINEGRAPHNEW,Scaphmeans+Scaphse,SCAPHLINEGRAPHNEW,Scaphmeans-Scaphse,code=3,
angle=90, length=0.1)

Why are my error bars not showing? Is the 'arrows' line wrong?

Thanks a million for your help, everybody.

Here is my data set: 

> readscaphfileNEW
   EXPERIMENT TEMP SCAPH.BPM
1        2021   12        82
2        2021   12        58
3        2021   12        78
4        2021   12        59
5        2021   12        80
6        2021   12       100
7        2021   12        61
8        2021   12       103
9        2021   12        61
10       2021   17       100
11       2021   17        70
12       2021   17        83
13       2021   17        73
14       2021   17       143
15       2021   17       103
16       2021   17        73
17       2021   17       158
18       2021   17        95
19       2021   17        80
20       1939   12       158
21       1939   12       148
22       1939   12       152
23       1939   12       148
24       1939   12       160
25       1939   12       168
26       1939   12       152
27       1939   12       150
28       1939   12       187
29       1939   17       300
30       1939   17       302
31       1939   17       291
32       1939   17       240
33       1939   17       253
34       1939   17       207
35       1939   17       184
36       1939   17       224
37       1939   17       242
38       1939   17       236

Bruno



--
Sent from: https://r.789695.n4.nabble.com/R-help-f789696.html


From j|ox @end|ng |rom mcm@@ter@c@  Wed Jun 16 21:01:35 2021
From: j|ox @end|ng |rom mcm@@ter@c@ (John Fox)
Date: Wed, 16 Jun 2021 15:01:35 -0400
Subject: [R] Can't add error bars to existing line graph
In-Reply-To: <10092_1623865104_15GHcNGc026415_1623762170571-0.post-1517@n4.nabble.com>
References: <10092_1623865104_15GHcNGc026415_1623762170571-0.post-1517@n4.nabble.com>
Message-ID: <7481f55c-b443-38d4-19fd-649850aa653a@mcmaster.ca>

Dear Bruno,

There are (at least) two errors here:

(1) I think that you misunderstand how interaction.plot(), and more 
generally R base graphics, work. interaction.plot() doesn't return a 
graphics object, but rather draws on a graphics device as a side effect. 
Of course, interaction.plot() is a function and so it must return 
something -- it invisibly returns NULL.

(2) I assume that you independently computed Scaphmeans and Scaphse, 
although you didn't include the corresponding code in your message. In 
any event, the arrows() function generally takes 4 arguments (x0, y0, 
x1, y1), specifying the x and y coordinates of the endpoints of the 
arrows. It's true that because your "arrows" are intended to be 
vertical, you need not specify x1, which defaults to x0, but the other 3 
arguments are necessary. See ?arrows for details.

I hope this helps,
  John

John Fox, Professor Emeritus
McMaster University
Hamilton, Ontario, Canada
web: https://socialsciences.mcmaster.ca/jfox/

On 2021-06-15 9:02 a.m., Bruno.Salonen wrote:
> 
> Hi all,
> 
> I'm trying to add error bars to an existing line graph in base R.
> 
> The basic line graph comes up just fine, but it does not show my error
> bars...
> 
> Data frame = readscaphfileNEW
> Plot name = SCAPHLINEGRAPHNEW
> x axis = TEMP
> y axis = SCAPH.BPM
> Tracer = Year (SAME AS 'EXPERIMENT)
> Scaphmeans = means of SCAPH.BPM
> Scaphse = standard error of SCAPH.BPM
> 
> Here is the code..
> 
> SCAPHLINEGRAPHNEW <- interaction.plot(readscaphfileNEW$TEMP,
> readscaphfileNEW$EXPERIMENT, readscaphfileNEW$SCAPH.BPM,
> xlab = "Temperature (?C)", ylab = "Scaphognathite Rate (BPM)",
> main = "Scaphognathite",
> ylim = c(0,300), trace.label = "Year",
> type = "b", pch = c(19,17), fixed = TRUE)
> arrows(SCAPHLINEGRAPHNEW,Scaphmeans+Scaphse,SCAPHLINEGRAPHNEW,Scaphmeans-Scaphse,code=3,
> angle=90, length=0.1)
> 
> Why are my error bars not showing? Is the 'arrows' line wrong?
> 
> Thanks a million for your help, everybody.
> 
> Here is my data set:
> 
>> readscaphfileNEW
>     EXPERIMENT TEMP SCAPH.BPM
> 1        2021   12        82
> 2        2021   12        58
> 3        2021   12        78
> 4        2021   12        59
> 5        2021   12        80
> 6        2021   12       100
> 7        2021   12        61
> 8        2021   12       103
> 9        2021   12        61
> 10       2021   17       100
> 11       2021   17        70
> 12       2021   17        83
> 13       2021   17        73
> 14       2021   17       143
> 15       2021   17       103
> 16       2021   17        73
> 17       2021   17       158
> 18       2021   17        95
> 19       2021   17        80
> 20       1939   12       158
> 21       1939   12       148
> 22       1939   12       152
> 23       1939   12       148
> 24       1939   12       160
> 25       1939   12       168
> 26       1939   12       152
> 27       1939   12       150
> 28       1939   12       187
> 29       1939   17       300
> 30       1939   17       302
> 31       1939   17       291
> 32       1939   17       240
> 33       1939   17       253
> 34       1939   17       207
> 35       1939   17       184
> 36       1939   17       224
> 37       1939   17       242
> 38       1939   17       236
> 
> Bruno
> 
> 
> 
> --
> Sent from: https://r.789695.n4.nabble.com/R-help-f789696.html
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From m@tth|@@-gond@n @end|ng |rom gmx@de  Wed Jun 16 21:51:24 2021
From: m@tth|@@-gond@n @end|ng |rom gmx@de (Matthias Gondan)
Date: Wed, 16 Jun 2021 21:51:24 +0200
Subject: [R] Embedded R: Test if initialized
Message-ID: <1M4s4r-1luQNn3m9n-0021iz@mail.gmx.net>

Dear R friends,

I am currently trying to write a piece of C code that uses ?embedded R?, and for specific reasons*, I cannot keep track if R already has been initialized. So the code snippet looks like this:

LibExtern char *R_TempDir;

if(R_TempDir == NULL)
    ?throw exception R not initialized?

I have seen that the source code of Rf_initialize_R itself checks if it is ivoked twice (num_initialized), but this latter flag does not seem to accessible, or is it? 

int Rf_initialize_R(int ac, char **av)
{
    int i, ioff = 1, j;
    Rboolean useX11 = TRUE, useTk = FALSE;
    char *p, msg[1024], cmdlines[10000], **avv;
    structRstart rstart;
    Rstart Rp = &rstart;
    Rboolean force_interactive = FALSE;

    if (num_initialized++) {
	fprintf(stderr, "%s", "R is already initialized\n");
	exit(1);
    }


Is the test of the TempDir a good substitute, or should I choose another solution? Having said this, it may be a good idea to expose a function Rf_R_initialized that performs such a test.

Thank you for your consideration.

Best regards,

Matthias

*The use case is an R library that connects to swi-prolog and allows the ?embedded? swi-prolog to establish the reverse connection to R. In that case, i.e., R -> Prolog -> R, I do not want to initialize R a second time.



	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Wed Jun 16 23:20:11 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 16 Jun 2021 14:20:11 -0700
Subject: [R] Embedded R: Test if initialized
In-Reply-To: <1M4s4r-1luQNn3m9n-0021iz@mail.gmx.net>
References: <1M4s4r-1luQNn3m9n-0021iz@mail.gmx.net>
Message-ID: <CAGxFJbRuiArFiiG6S-bp+Y1OquSZiRqoNKSdpigJ+__YQOrg2w@mail.gmail.com>

I believe this is the wrong list for this post. See the posting guide,
linked below, for one that is more appropriate.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Jun 16, 2021 at 12:51 PM Matthias Gondan <matthias-gondan at gmx.de>
wrote:

> Dear R friends,
>
> I am currently trying to write a piece of C code that uses ?embedded R?,
> and for specific reasons*, I cannot keep track if R already has been
> initialized. So the code snippet looks like this:
>
> LibExtern char *R_TempDir;
>
> if(R_TempDir == NULL)
>     ?throw exception R not initialized?
>
> I have seen that the source code of Rf_initialize_R itself checks if it is
> ivoked twice (num_initialized), but this latter flag does not seem to
> accessible, or is it?
>
> int Rf_initialize_R(int ac, char **av)
> {
>     int i, ioff = 1, j;
>     Rboolean useX11 = TRUE, useTk = FALSE;
>     char *p, msg[1024], cmdlines[10000], **avv;
>     structRstart rstart;
>     Rstart Rp = &rstart;
>     Rboolean force_interactive = FALSE;
>
>     if (num_initialized++) {
>         fprintf(stderr, "%s", "R is already initialized\n");
>         exit(1);
>     }
>
>
> Is the test of the TempDir a good substitute, or should I choose another
> solution? Having said this, it may be a good idea to expose a function
> Rf_R_initialized that performs such a test.
>
> Thank you for your consideration.
>
> Best regards,
>
> Matthias
>
> *The use case is an R library that connects to swi-prolog and allows the
> ?embedded? swi-prolog to establish the reverse connection to R. In that
> case, i.e., R -> Prolog -> R, I do not want to initialize R a second time.
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Thu Jun 17 11:14:16 2021
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Thu, 17 Jun 2021 19:14:16 +1000
Subject: [R] Can't add error bars to existing line graph
In-Reply-To: <1623762170571-0.post-1517@n4.nabble.com>
References: <1623762170571-0.post-1517@n4.nabble.com>
Message-ID: <CA+8X3fXwYDjYBhgF0fUry4jEzYao+i5xNKS9HVP1vcQ+Ota8Sg@mail.gmail.com>

Hi Bruno,
The interaction.plot function plots the _levels_ of the x.factor
argument, not the values of the variable that is coerced to a factor.
This means that the temperature locations on the x axis are c(1,2),
not c(12,17). The code below works for me:

readscaphfileNEW<-read.table(text="EXPERIMENT TEMP SCAPH.BPM
1        2021   12        82
2        2021   12        58
3        2021   12        78
4        2021   12        59
5        2021   12        80
6        2021   12       100
7        2021   12        61
8        2021   12       103
9        2021   12        61
10       2021   17       100
11       2021   17        70
12       2021   17        83
13       2021   17        73
14       2021   17       143
15       2021   17       103
16       2021   17        73
17       2021   17       158
18       2021   17        95
19       2021   17        80
20       1939   12       158
21       1939   12       148
22       1939   12       152
23       1939   12       148
24       1939   12       160
25       1939   12       168
26       1939   12       152
27       1939   12       150
28       1939   12       187
29       1939   17       300
30       1939   17       302
31       1939   17       291
32       1939   17       240
33       1939   17       253
34       1939   17       207
35       1939   17       184
36       1939   17       224
37       1939   17       242
38       1939   17       236",
header=TRUE,stringsAsFactors=FALSE)
interaction.plot(readscaphfileNEW$TEMP,
readscaphfileNEW$EXPERIMENT, readscaphfileNEW$SCAPH.BPM,
xlab = "Temperature (?C)", ylab = "Scaphognathite Rate (BPM)",
main = "Scaphognathite",
ylim = c(0,300), trace.label = "Year",
type = "b", pch = c(19,17), fixed = TRUE)
library(plotrix)
Scaphmeans <-as.vector(by(readscaphfileNEW$SCAPH.BPM,
 readscaphfileNEW[,c("EXPERIMENT","TEMP")],mean))
Scaphse = as.vector(by(readscaphfileNEW$SCAPH.BPM,
 readscaphfileNEW[,c("EXPERIMENT","TEMP")],std.error))
dispersion(c(1,1,2,2),Scaphmeans,Scaphse)

Note that you can get much the same plot using brkdn.plot (plotrix):

brkdn.plot(SCAPH.BPM~EXPERIMENT+TEMP,data=readscaphfileNEW,
 xlab="Temperature C",pch=c(1,2))
legend(15,160,c(1939,2021),pch=c(1,2))

Jim

On Thu, Jun 17, 2021 at 3:38 AM Bruno.Salonen <bruno.salonen at hotmail.com> wrote:
>
>
> Hi all,
>
> I'm trying to add error bars to an existing line graph in base R.
>
> The basic line graph comes up just fine, but it does not show my error
> bars...
>
> Data frame = readscaphfileNEW
> Plot name = SCAPHLINEGRAPHNEW
> x axis = TEMP
> y axis = SCAPH.BPM
> Tracer = Year (SAME AS 'EXPERIMENT)
> Scaphmeans = means of SCAPH.BPM
> Scaphse = standard error of SCAPH.BPM
>
> Here is the code..
>
> SCAPHLINEGRAPHNEW <- interaction.plot(readscaphfileNEW$TEMP,
> readscaphfileNEW$EXPERIMENT, readscaphfileNEW$SCAPH.BPM,
> xlab = "Temperature (?C)", ylab = "Scaphognathite Rate (BPM)",
> main = "Scaphognathite",
> ylim = c(0,300), trace.label = "Year",
> type = "b", pch = c(19,17), fixed = TRUE)
> arrows(SCAPHLINEGRAPHNEW,Scaphmeans+Scaphse,SCAPHLINEGRAPHNEW,Scaphmeans-Scaphse,code=3,
> angle=90, length=0.1)
>
> Why are my error bars not showing? Is the 'arrows' line wrong?
>
> Thanks a million for your help, everybody.
>
> Here is my data set:
>
> > readscaphfileNEW
>    EXPERIMENT TEMP SCAPH.BPM
> 1        2021   12        82
> 2        2021   12        58
> 3        2021   12        78
> 4        2021   12        59
> 5        2021   12        80
> 6        2021   12       100
> 7        2021   12        61
> 8        2021   12       103
> 9        2021   12        61
> 10       2021   17       100
> 11       2021   17        70
> 12       2021   17        83
> 13       2021   17        73
> 14       2021   17       143
> 15       2021   17       103
> 16       2021   17        73
> 17       2021   17       158
> 18       2021   17        95
> 19       2021   17        80
> 20       1939   12       158
> 21       1939   12       148
> 22       1939   12       152
> 23       1939   12       148
> 24       1939   12       160
> 25       1939   12       168
> 26       1939   12       152
> 27       1939   12       150
> 28       1939   12       187
> 29       1939   17       300
> 30       1939   17       302
> 31       1939   17       291
> 32       1939   17       240
> 33       1939   17       253
> 34       1939   17       207
> 35       1939   17       184
> 36       1939   17       224
> 37       1939   17       242
> 38       1939   17       236
>
> Bruno
>
>
>
> --
> Sent from: https://r.789695.n4.nabble.com/R-help-f789696.html
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From t|myu @end|ng |rom protonm@||@com  Thu Jun 17 13:42:48 2021
From: t|myu @end|ng |rom protonm@||@com (Tim)
Date: Thu, 17 Jun 2021 11:42:48 +0000
Subject: [R] Potential Bug: file.show does not support double-byte
 characters in the file path
Message-ID: <t1lfyPlevK4I2BgLILiEmtAG2ZirQouDDc9V49X13o2n4ftzeeVAdtpdFA_gWjbHsa-g_WaCkdw7G0-szZPTTUQVcPFFxqsXxC7w32s00lc=@protonmail.com>

Hi,

I may have come across a bug regarding the file.show function in the base package.

### Bug Description

file.show does not support double-byte characters in the file path.

### Platform Info

> sessionInfo()
R version 4.1.0 (2021-05-18)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 19043)

Matrix products: default

locale:
[1] LC_COLLATE=Chinese (Simplified)_China.936 LC_CTYPE=Chinese (Simplified)_China.936
[3] LC_MONETARY=Chinese (Simplified)_China.936 LC_NUMERIC=C
[5] LC_TIME=Chinese (Simplified)_China.936

attached base packages:
[1] stats graphics grDevices utils datasets methods base

loaded via a namespace (and not attached):
[1] compiler_4.1.0 tools_4.1.0

### Steps to Reproduce

1. Install R-4.1.0 for Windows on Windows 10 x64 21H1 (Chinese-Simplified, zh-CN)
2. Open RGui
3. Create a file named "test.txt" under "C:\Test", so that the full file path does not include double-byte characters
4. Create a file named "test.txt" under "C:\??", so that the full file path includes double-byte characters
5. Run the following commands in the console
> t1 = "C:\\Test\\test.txt"
> t1
[1] "C:\\Test\\test.txt"
> file.show(t1)
>
> t2 = "C:\\??\\test.txt"
> t2
[1] "C:\\??\\test.txt"
> file.show(t2)
Warning message:
In file.show(t2) : file.show(): file 'C:\??????\test.txt' does not exist

Actual Result:

file.show() can correctly open the "C:\Test\test.txt" as the file path does not contain double-byte characters, but it fails to do so for "C:\??\test.txt".

### Additional information

For users with usernames that include double-byte characters, this bug even prevents demo() from functioning properly.

> demo()
Warning message:
In file.show(outFile, delete.file = TRUE, title = paste("R", tolower(x$title))) :
file.show():???'C:\Users\?????1\AppData\Local\Temp\RtmpGuWTun\RpackageIQR197068c75431'????

file.show() can correctly read from files containing double-byte characters if the file paths do not. For example, the content for "C:\Test\test.txt" can be "Testing 123 ??". file.show("C:\\Test\\test.txt") would open this file and display its content correctly without specifying the encoding parameter.

Thanks,
Tim
	[[alternative HTML version deleted]]


From @t@t|@t|c@84 @end|ng |rom hotm@||@com  Thu Jun 17 19:51:31 2021
From: @t@t|@t|c@84 @end|ng |rom hotm@||@com (peri He)
Date: Thu, 17 Jun 2021 17:51:31 +0000
Subject: [R] Legend position in ggplot
Message-ID: <AM7PR10MB32372F9B8E645925F2FEF2C3C60E9@AM7PR10MB3237.EURPRD10.PROD.OUTLOOK.COM>

Dear Friends,

I would like to see my legend outside of a ggplot (at the top).

This code is showing the legend inside of a plot:
theme(legend.position=c(0.15,0.97))

But when I changed it to : theme(legend.position=c(-0.15,1.5)) , the legend disappears.

I would appreciate it if you share your ideas.

Regards,

Peri



	[[alternative HTML version deleted]]


From m@z@t|@nmex|co @end|ng |rom y@hoo@com  Thu Jun 17 21:05:49 2021
From: m@z@t|@nmex|co @end|ng |rom y@hoo@com (Felipe Carrillo)
Date: Thu, 17 Jun 2021 19:05:49 +0000 (UTC)
Subject: [R] Legend position in ggplot
In-Reply-To: <AM7PR10MB32372F9B8E645925F2FEF2C3C60E9@AM7PR10MB3237.EURPRD10.PROD.OUTLOOK.COM>
References: <AM7PR10MB32372F9B8E645925F2FEF2C3C60E9@AM7PR10MB3237.EURPRD10.PROD.OUTLOOK.COM>
Message-ID: <1731255639.2079082.1623956749233@mail.yahoo.com>

Like this??theme(legend.position= 'top'


    On Thursday, June 17, 2021, 10:52:04 AM PDT, peri He <statistics84 at hotmail.com> wrote:  
 
 Dear Friends,

I would like to see my legend outside of a ggplot (at the top).

This code is showing the legend inside of a plot:
theme(legend.position=c(0.15,0.97))

But when I changed it to : theme(legend.position=c(-0.15,1.5)) , the legend disappears.

I would appreciate it if you share your ideas.

Regards,

Peri



??? [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.
  
	[[alternative HTML version deleted]]


From ycd|ng @end|ng |rom coh@org  Fri Jun 18 02:03:51 2021
From: ycd|ng @end|ng |rom coh@org (Yuan Chun Ding)
Date: Fri, 18 Jun 2021 00:03:51 +0000
Subject: [R] apply a color range (kind of like a heat map) to the values in
 each cell of a data frame
Message-ID: <SJ0PR02MB7645C0618793659CA52072F8D40D9@SJ0PR02MB7645.namprd02.prod.outlook.com>

Dear R users,

I have a numeric table with 140 rows and 30 columns, here I only made partial table,  test1,  as an example.  I want to apply a blue color range to the value in each cell of  the data frame test1.
I found some R code using DT library. However, I only can see the colored table at my R studio viewer window, also only show the first 10 rows.  I hope to save the colored table into a PNG file and want to modify the size of each cell, so I can apply the code to a much bigger table with 140 rows and 30 column. 

Can you help me?

Thank you very much!!

Ding

s1 <-c(0.085,0.086,0.139,0.129,0.235,0.177,0.000,0.126,0.271,0.000,0.083,0.163)
s2 <-c(0.000,0.093,0.000,0.080,0.072,0.388,0.138,0.107,0.000,0.000,0.474,0.000)
s13 <-c(0.000,0.077,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.166,0.308,0.000)
s3 <-c(0.000,0.478,0.000,0.332,0.163,0.000,0.000,0.000,0.145,0.469,0.000,0.000)
test1 <-data.frame(s1,s2,s13,s3)
row.names(test1)<c("COH_001","COH_002","COH_003","COH_004","COH_005","COH_006","COH_007","COH_008","COH_009","COH_010","COH_011","COH_012")

library(DT)

dtable1 <- datatable(test1, rownames=TRUE, options = list(lengthChange = FALSE, dom='t'))

colRamp <- colorRamp(c("white","blue"))
for(column in names(test1)){
  x <- na.omit(test1[[column]])
  brks <- quantile(x, probs = seq(.05, .95, .01))
  RGB <- colRamp(c(0, (brks-min(x))/(max(x)-min(x))))
  clrs <- apply(RGB, 1, function(rgb){
    sprintf("rgb(%s)", toString(round(rgb,0)))
  })
  dtable1 <- dtable1 %>% 
    formatStyle(column, backgroundColor = styleInterval(brks, clrs))
}

dtable1

----------------------------------------------------------------------
------------------------------------------------------------
-SECURITY/CONFIDENTIALITY WARNING-  

This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to receive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)


From drj|m|emon @end|ng |rom gm@||@com  Fri Jun 18 05:29:15 2021
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Fri, 18 Jun 2021 13:29:15 +1000
Subject: [R] 
 apply a color range (kind of like a heat map) to the values in
 each cell of a data frame
In-Reply-To: <SJ0PR02MB7645C0618793659CA52072F8D40D9@SJ0PR02MB7645.namprd02.prod.outlook.com>
References: <SJ0PR02MB7645C0618793659CA52072F8D40D9@SJ0PR02MB7645.namprd02.prod.outlook.com>
Message-ID: <CA+8X3fUUPRprQfOPvp1xcFSrED55eYZsnjoSJgCfaiX2k75R_g@mail.gmail.com>

Hi Ding,
There are a number of "value to color" functions in various packages.
One is "color.scale" in the plotrix package:

library(plotrix)
s1 <-c(0.085,0.086,0.139,0.129,0.235,0.177,0.000,0.126,0.271,0.000,0.083,0.163)
s2 <-c(0.000,0.093,0.000,0.080,0.072,0.388,0.138,0.107,0.000,0.000,0.474,0.000)
s13 <-c(0.000,0.077,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.166,0.308,0.000)
s3 <-c(0.000,0.478,0.000,0.332,0.163,0.000,0.000,0.000,0.145,0.469,0.000,0.000)
test1 <-data.frame(s1,s2,s13,s3)
# generate a matrix of colors
test1.col<-color.scale(as.matrix(test1),extremes=c("white","blue"))

color.scale calculates colors using linear interpolation of the values
in three color spaces (RGB, HSV or HCL). You may be interested in some
of the plotting functions in plotrix that employ color.scale,
particularly "size_n_color".

Jim

On Fri, Jun 18, 2021 at 10:04 AM Yuan Chun Ding <ycding at coh.org> wrote:
>
> Dear R users,
>
> I have a numeric table with 140 rows and 30 columns, here I only made partial table,  test1,  as an example.  I want to apply a blue color range to the value in each cell of  the data frame test1.
> I found some R code using DT library. However, I only can see the colored table at my R studio viewer window, also only show the first 10 rows.  I hope to save the colored table into a PNG file and want to modify the size of each cell, so I can apply the code to a much bigger table with 140 rows and 30 column.
>
> Can you help me?
>
> Thank you very much!!
>
> Ding
>
> s1 <-c(0.085,0.086,0.139,0.129,0.235,0.177,0.000,0.126,0.271,0.000,0.083,0.163)
> s2 <-c(0.000,0.093,0.000,0.080,0.072,0.388,0.138,0.107,0.000,0.000,0.474,0.000)
> s13 <-c(0.000,0.077,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.166,0.308,0.000)
> s3 <-c(0.000,0.478,0.000,0.332,0.163,0.000,0.000,0.000,0.145,0.469,0.000,0.000)
> test1 <-data.frame(s1,s2,s13,s3)
> row.names(test1)<c("COH_001","COH_002","COH_003","COH_004","COH_005","COH_006","COH_007","COH_008","COH_009","COH_010","COH_011","COH_012")
>
> library(DT)
>
> dtable1 <- datatable(test1, rownames=TRUE, options = list(lengthChange = FALSE, dom='t'))
>
> colRamp <- colorRamp(c("white","blue"))
> for(column in names(test1)){
>   x <- na.omit(test1[[column]])
>   brks <- quantile(x, probs = seq(.05, .95, .01))
>   RGB <- colRamp(c(0, (brks-min(x))/(max(x)-min(x))))
>   clrs <- apply(RGB, 1, function(rgb){
>     sprintf("rgb(%s)", toString(round(rgb,0)))
>   })
>   dtable1 <- dtable1 %>%
>     formatStyle(column, backgroundColor = styleInterval(brks, clrs))
> }
>
> dtable1
>
> ----------------------------------------------------------------------
> ------------------------------------------------------------
> -SECURITY/CONFIDENTIALITY WARNING-
>
> This message and any attachments are intended solely for the individual or entity to which they are addressed. This communication may contain information that is privileged, confidential, or exempt from disclosure under applicable law (e.g., personal health information, research data, financial information). Because this e-mail has been sent without encryption, individuals other than the intended recipient may be able to view the information, forward it to others or tamper with the information without the knowledge or consent of the sender. If you are not the intended recipient, or the employee or person responsible for delivering the message to the intended recipient, any dissemination, distribution or copying of the communication is strictly prohibited. If you received the communication in error, please notify the sender immediately by replying to this message and deleting the message and any accompanying files from your system. If, due to the security risks, you do not wish to receive further communications via e-mail, please reply to this message and inform the sender that you do not wish to receive further e-mail from the sender. (LCP301)
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From du@@@@dr|@n @end|ng |rom un|buc@ro  Thu Jun 17 13:53:41 2021
From: du@@@@dr|@n @end|ng |rom un|buc@ro (=?UTF-8?B?QWRyaWFuIER1yJlh?=)
Date: Thu, 17 Jun 2021 14:53:41 +0300
Subject: [R] [R-pkgs] CRAN has a new package: declared
Message-ID: <CAJ=0CtAWkSCKJuW7poMhh1Hbn_ikb0z-810JCuSyb4RUMqKy7Q@mail.gmail.com>

Dear All,

A new package called 'declared' has made it to CRAN (platform specific
binaries in due course). This might be useful for social scientists, where
multiple (types of) missing values are declared for any given variable.

The package has a similar functionality to packages 'haven' and 'labelled',
with one but important difference: instead of treating existing values as
NAs, package declared interprets NAs as existing values (details in the
embedded vignette). Users do not have to do anything else in the subsequent
analyses, since the declared values are stored as regular NAs.

My most sincere thanks to all contributors from the r-devel list who
expressed their points regarding the treatment of missing values in R, and
especially to Duncan Murdoch who provided the starting solution.

Special thanks to Avi Gross for the subsequent email exchanges, revision of
the package and its vignette.

Hope this will prove useful, I would be grateful for feedback and bug
reports.

--
Adrian Dusa
University of Bucharest
Romanian Social Data Archive
Soseaua Panduri nr. 90-92
050663 Bucharest sector 5
Romania
https://adriandusa.eu

	[[alternative HTML version deleted]]

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From ycd|ng @end|ng |rom coh@org  Fri Jun 18 20:46:46 2021
From: ycd|ng @end|ng |rom coh@org (Yuan Chun Ding)
Date: Fri, 18 Jun 2021 18:46:46 +0000
Subject: [R] 
 apply a color range (kind of like a heat map) to the values in
 each cell of a data frame
In-Reply-To: <CA+8X3fUUPRprQfOPvp1xcFSrED55eYZsnjoSJgCfaiX2k75R_g@mail.gmail.com>
References: <SJ0PR02MB7645C0618793659CA52072F8D40D9@SJ0PR02MB7645.namprd02.prod.outlook.com>
 <CA+8X3fUUPRprQfOPvp1xcFSrED55eYZsnjoSJgCfaiX2k75R_g@mail.gmail.com>
Message-ID: <SJ0PR02MB7645BB7BCAC83110F7BA9426D40D9@SJ0PR02MB7645.namprd02.prod.outlook.com>

Hi Jim,

Thank you so much for your help!

I looked into the plotrix package, the addtable2plot function can do somewhat I want by creating an empty plot first.  

Ding

-----Original Message-----
From: Jim Lemon [mailto:drjimlemon at gmail.com] 
Sent: Thursday, June 17, 2021 8:29 PM
To: Yuan Chun Ding <ycding at coh.org>
Cc: r-help at r-project.org
Subject: Re: [R] apply a color range (kind of like a heat map) to the values in each cell of a data frame

Hi Ding,
There are a number of "value to color" functions in various packages.
One is "color.scale" in the plotrix package:

library(plotrix)
s1 <-c(0.085,0.086,0.139,0.129,0.235,0.177,0.000,0.126,0.271,0.000,0.083,0.163)
s2 <-c(0.000,0.093,0.000,0.080,0.072,0.388,0.138,0.107,0.000,0.000,0.474,0.000)
s13 <-c(0.000,0.077,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.166,0.308,0.000)
s3 <-c(0.000,0.478,0.000,0.332,0.163,0.000,0.000,0.000,0.145,0.469,0.000,0.000)
test1 <-data.frame(s1,s2,s13,s3)
# generate a matrix of colors
test1.col<-color.scale(as.matrix(test1),extremes=c("white","blue"))

color.scale calculates colors using linear interpolation of the values in three color spaces (RGB, HSV or HCL). You may be interested in some of the plotting functions in plotrix that employ color.scale, particularly "size_n_color".

Jim

On Fri, Jun 18, 2021 at 10:04 AM Yuan Chun Ding <ycding at coh.org> wrote:
>
> Dear R users,
>
> I have a numeric table with 140 rows and 30 columns, here I only made partial table,  test1,  as an example.  I want to apply a blue color range to the value in each cell of  the data frame test1.
> I found some R code using DT library. However, I only can see the colored table at my R studio viewer window, also only show the first 10 rows.  I hope to save the colored table into a PNG file and want to modify the size of each cell, so I can apply the code to a much bigger table with 140 rows and 30 column.
>
> Can you help me?
>
> Thank you very much!!
>
> Ding
>
> s1 
> <-c(0.085,0.086,0.139,0.129,0.235,0.177,0.000,0.126,0.271,0.000,0.083,
> 0.163)
> s2 
> <-c(0.000,0.093,0.000,0.080,0.072,0.388,0.138,0.107,0.000,0.000,0.474,
> 0.000)
> s13 
> <-c(0.000,0.077,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.166,0.308,
> 0.000)
> s3 
> <-c(0.000,0.478,0.000,0.332,0.163,0.000,0.000,0.000,0.145,0.469,0.000,
> 0.000)
> test1 <-data.frame(s1,s2,s13,s3)
> row.names(test1)<c("COH_001","COH_002","COH_003","COH_004","COH_005","
> COH_006","COH_007","COH_008","COH_009","COH_010","COH_011","COH_012")
>
> library(DT)
>
> dtable1 <- datatable(test1, rownames=TRUE, options = list(lengthChange 
> = FALSE, dom='t'))
>
> colRamp <- colorRamp(c("white","blue")) for(column in names(test1)){
>   x <- na.omit(test1[[column]])
>   brks <- quantile(x, probs = seq(.05, .95, .01))
>   RGB <- colRamp(c(0, (brks-min(x))/(max(x)-min(x))))
>   clrs <- apply(RGB, 1, function(rgb){
>     sprintf("rgb(%s)", toString(round(rgb,0)))
>   })
>   dtable1 <- dtable1 %>%
>     formatStyle(column, backgroundColor = styleInterval(brks, clrs)) }
>
> dtable1
>
> ----------------------------------------------------------------------
> ------------------------------------------------------------
> -SECURITY/CONFIDENTIALITY WARNING-
>
> This message and any attachments are intended solely for the 
> individual or entity to which they are addressed. This communication 
> may contain information that is privileged, confidential, or exempt 
> from disclosure under applicable law (e.g., personal health 
> information, research data, financial information). Because this 
> e-mail has been sent without encryption, individuals other than the 
> intended recipient may be able to view the information, forward it to 
> others or tamper with the information without the knowledge or consent 
> of the sender. If you are not the intended recipient, or the employee 
> or person responsible for delivering the message to the intended 
> recipient, any dissemination, distribution or copying of the 
> communication is strictly prohibited. If you received the 
> communication in error, please notify the sender immediately by 
> replying to this message and deleting the message and any accompanying 
> files from your system. If, due to the security risks, you do not wish 
> to receive further communications via e-mail, please reply to this 
> message and inform the sender that you do not wish to receive further 
> e-mail from the sender. (LCP301)
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-he
> lp__;!!Fou38LsQmgU!6XXGw94GkvcPBq4q8rUeHhiRqu21HG3c0QzMjapxzZvonoYhD6r
> 41_2EAHzW$ PLEASE do read the posting guide 
> https://urldefense.com/v3/__http://www.R-project.org/posting-guide.htm
> l__;!!Fou38LsQmgU!6XXGw94GkvcPBq4q8rUeHhiRqu21HG3c0QzMjapxzZvonoYhD6r4
> 17wsEXst$ and provide commented, minimal, self-contained, reproducible 
> code.

From bgunter@4567 @end|ng |rom gm@||@com  Fri Jun 18 21:20:15 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 18 Jun 2021 12:20:15 -0700
Subject: [R] 
 apply a color range (kind of like a heat map) to the values in
 each cell of a data frame
In-Reply-To: <SJ0PR02MB7645BB7BCAC83110F7BA9426D40D9@SJ0PR02MB7645.namprd02.prod.outlook.com>
References: <SJ0PR02MB7645C0618793659CA52072F8D40D9@SJ0PR02MB7645.namprd02.prod.outlook.com>
 <CA+8X3fUUPRprQfOPvp1xcFSrED55eYZsnjoSJgCfaiX2k75R_g@mail.gmail.com>
 <SJ0PR02MB7645BB7BCAC83110F7BA9426D40D9@SJ0PR02MB7645.namprd02.prod.outlook.com>
Message-ID: <CAGxFJbRN_XvZbC4ao5b_d2mv=Mk0HMV8xcC0DEUj8VsWbdNY=w@mail.gmail.com>

I haven't followed this closely, but you might wish to check the
stats::image() function to see if it might give you what you want (perhaps
with a little finagling). Feel free to ignore if you are happy with what
you have. As Jim said, there are lots of functions in various packages that
do this sort of thing.

Cheers,
Bert

On Fri, Jun 18, 2021 at 11:47 AM Yuan Chun Ding <ycding at coh.org> wrote:

> Hi Jim,
>
> Thank you so much for your help!
>
> I looked into the plotrix package, the addtable2plot function can do
> somewhat I want by creating an empty plot first.
>
> Ding
>
> -----Original Message-----
> From: Jim Lemon [mailto:drjimlemon at gmail.com]
> Sent: Thursday, June 17, 2021 8:29 PM
> To: Yuan Chun Ding <ycding at coh.org>
> Cc: r-help at r-project.org
> Subject: Re: [R] apply a color range (kind of like a heat map) to the
> values in each cell of a data frame
>
> Hi Ding,
> There are a number of "value to color" functions in various packages.
> One is "color.scale" in the plotrix package:
>
> library(plotrix)
> s1
> <-c(0.085,0.086,0.139,0.129,0.235,0.177,0.000,0.126,0.271,0.000,0.083,0.163)
> s2
> <-c(0.000,0.093,0.000,0.080,0.072,0.388,0.138,0.107,0.000,0.000,0.474,0.000)
> s13
> <-c(0.000,0.077,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.166,0.308,0.000)
> s3
> <-c(0.000,0.478,0.000,0.332,0.163,0.000,0.000,0.000,0.145,0.469,0.000,0.000)
> test1 <-data.frame(s1,s2,s13,s3)
> # generate a matrix of colors
> test1.col<-color.scale(as.matrix(test1),extremes=c("white","blue"))
>
> color.scale calculates colors using linear interpolation of the values in
> three color spaces (RGB, HSV or HCL). You may be interested in some of the
> plotting functions in plotrix that employ color.scale, particularly
> "size_n_color".
>
> Jim
>
> On Fri, Jun 18, 2021 at 10:04 AM Yuan Chun Ding <ycding at coh.org> wrote:
> >
> > Dear R users,
> >
> > I have a numeric table with 140 rows and 30 columns, here I only made
> partial table,  test1,  as an example.  I want to apply a blue color range
> to the value in each cell of  the data frame test1.
> > I found some R code using DT library. However, I only can see the
> colored table at my R studio viewer window, also only show the first 10
> rows.  I hope to save the colored table into a PNG file and want to modify
> the size of each cell, so I can apply the code to a much bigger table with
> 140 rows and 30 column.
> >
> > Can you help me?
> >
> > Thank you very much!!
> >
> > Ding
> >
> > s1
> > <-c(0.085,0.086,0.139,0.129,0.235,0.177,0.000,0.126,0.271,0.000,0.083,
> > 0.163)
> > s2
> > <-c(0.000,0.093,0.000,0.080,0.072,0.388,0.138,0.107,0.000,0.000,0.474,
> > 0.000)
> > s13
> > <-c(0.000,0.077,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.166,0.308,
> > 0.000)
> > s3
> > <-c(0.000,0.478,0.000,0.332,0.163,0.000,0.000,0.000,0.145,0.469,0.000,
> > 0.000)
> > test1 <-data.frame(s1,s2,s13,s3)
> > row.names(test1)<c("COH_001","COH_002","COH_003","COH_004","COH_005","
> > COH_006","COH_007","COH_008","COH_009","COH_010","COH_011","COH_012")
> >
> > library(DT)
> >
> > dtable1 <- datatable(test1, rownames=TRUE, options = list(lengthChange
> > = FALSE, dom='t'))
> >
> > colRamp <- colorRamp(c("white","blue")) for(column in names(test1)){
> >   x <- na.omit(test1[[column]])
> >   brks <- quantile(x, probs = seq(.05, .95, .01))
> >   RGB <- colRamp(c(0, (brks-min(x))/(max(x)-min(x))))
> >   clrs <- apply(RGB, 1, function(rgb){
> >     sprintf("rgb(%s)", toString(round(rgb,0)))
> >   })
> >   dtable1 <- dtable1 %>%
> >     formatStyle(column, backgroundColor = styleInterval(brks, clrs)) }
> >
> > dtable1
> >
> > ----------------------------------------------------------------------
> > ------------------------------------------------------------
> > -SECURITY/CONFIDENTIALITY WARNING-
> >
> > This message and any attachments are intended solely for the
> > individual or entity to which they are addressed. This communication
> > may contain information that is privileged, confidential, or exempt
> > from disclosure under applicable law (e.g., personal health
> > information, research data, financial information). Because this
> > e-mail has been sent without encryption, individuals other than the
> > intended recipient may be able to view the information, forward it to
> > others or tamper with the information without the knowledge or consent
> > of the sender. If you are not the intended recipient, or the employee
> > or person responsible for delivering the message to the intended
> > recipient, any dissemination, distribution or copying of the
> > communication is strictly prohibited. If you received the
> > communication in error, please notify the sender immediately by
> > replying to this message and deleting the message and any accompanying
> > files from your system. If, due to the security risks, you do not wish
> > to receive further communications via e-mail, please reply to this
> > message and inform the sender that you do not wish to receive further
> > e-mail from the sender. (LCP301)
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-he
> > lp__;!!Fou38LsQmgU!6XXGw94GkvcPBq4q8rUeHhiRqu21HG3c0QzMjapxzZvonoYhD6r
> > 41_2EAHzW$ PLEASE do read the posting guide
> > https://urldefense.com/v3/__http://www.R-project.org/posting-guide.htm
> > l__;!!Fou38LsQmgU!6XXGw94GkvcPBq4q8rUeHhiRqu21HG3c0QzMjapxzZvonoYhD6r4
> > 17wsEXst$ and provide commented, minimal, self-contained, reproducible
> > code.
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From v|tth@|b @end|ng |rom u@@|bm@com  Fri Jun 18 16:08:02 2021
From: v|tth@|b @end|ng |rom u@@|bm@com (Vitthal Bagal)
Date: Fri, 18 Jun 2021 19:38:02 +0530
Subject: [R] CI job Migration
Message-ID: <OF360500A6.D8E8873E-ON002586F8.004B4B26-652586F8.004DA403@ibm.com>



Hi,

I can see travis builds are still on .org (
https://travis-ci.org/github/wch/r-source). As we know travis-ci.org won't
run new builds after 15th June 2021, Are there any future plan for
migrating job from .org to .com. ?
Travis.com is totally free for opesource project as per
https://blog.travis-ci.com/oss-announcement.jo

Regards,
Vitthal Bagal

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Jun 19 03:25:34 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Fri, 18 Jun 2021 18:25:34 -0700
Subject: [R] CI job Migration
In-Reply-To: <OF360500A6.D8E8873E-ON002586F8.004B4B26-652586F8.004DA403@ibm.com>
References: <OF360500A6.D8E8873E-ON002586F8.004B4B26-652586F8.004DA403@ibm.com>
Message-ID: <9CDCB2EF-097E-4A88-8AAE-AB866F76EA07@dcn.davis.ca.us>

What are you talking about? A contributed package? (You should send an email to the package maintainer.) R Core? (I have never heard of R Core using Travis, but if they are then you would need to post on R-devel mailing list, but you had best read the Posting Guide and figure out how to post using plain text if you want a response.)

On June 18, 2021 7:08:02 AM PDT, Vitthal Bagal <vitthalb at us.ibm.com> wrote:
>
>
>Hi,
>
>I can see travis builds are still on .org (
>https://travis-ci.org/github/wch/r-source). As we know travis-ci.org
>won't
>run new builds after 15th June 2021, Are there any future plan for
>migrating job from .org to .com. ?
>Travis.com is totally free for opesource project as per
>https://blog.travis-ci.com/oss-announcement.jo
>
>Regards,
>Vitthal Bagal
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From b|ck|@ @end|ng |rom m@th@u@@@k@c@  Sat Jun 19 00:17:16 2021
From: b|ck|@ @end|ng |rom m@th@u@@@k@c@ (Bickis, Mikelis)
Date: Fri, 18 Jun 2021 22:17:16 +0000
Subject: [R] Unexplained behaviour of .Last.value
Message-ID: <1E3ADA2B-E3A7-4D42-B6BC-2E2B9A7C0BDD@usask.ca>

Hello:

Here is a bit of R-code:

> mvr
[1] 2.2658
> (sin(.Last.value)+sin(2*.Last.value))
[1] -0.2156507
> acos((-sqrt(17)-1)/8)
[1] 2.2658
> (sin(.Last.value)+sin(2*.Last.value))
[1] 1.76745
> (sin(mvr)+sin(2*mvr))
[1] -0.2156507
>

Note that my variable mvr is the value of acos((-sqrt(17)-1)/8).   However, if I use .Last.value after invoking the acos function in a further calculation, I get a nonsensical result.   What is going on?

I am running R version 4.0.0 (2020-04-24) on an iMac, operating system MacOS 11.4 ?Big Sur?.

Mik Bickis

From j@ke@e|m@tedt @end|ng |rom gm@||@com  Sat Jun 19 09:56:48 2021
From: j@ke@e|m@tedt @end|ng |rom gm@||@com (Jake Elmstedt)
Date: Sat, 19 Jun 2021 00:56:48 -0700
Subject: [R] Unexplained behaviour of .Last.value
In-Reply-To: <1E3ADA2B-E3A7-4D42-B6BC-2E2B9A7C0BDD@usask.ca>
References: <1E3ADA2B-E3A7-4D42-B6BC-2E2B9A7C0BDD@usask.ca>
Message-ID: <CAPTrVR7br39vxDd3-n7Cc0rt850tVWwEzFWqjO0bfTE1yJP8bw@mail.gmail.com>

Behaviour is confirmed on 4.1.0 on Ubuntu 20.04 and Windows 10.

What's happening is

(sin(.Last.value) + sin(2 * .Last.value))

is evaluating the first sin(.Last.value) which resolves to 0.7680514
then using that in the second expression, sin(2*.Last.value) := sin(2
* 0.7680514) which resolves to 0.9993982. Add them together to get the
1.76745 value you're showing.

Interestingly, if you're using R Studio, if you go to Tools > Global
Options > General > Advanced > Other and check "Show .Last.Value in
environment listing," then

acos((-sqrt(17) - 1) / 8)
# [1] 2.2658
(sin(.Last.value)+sin(2*.Last.value))
# [1] -0.2156507

Sadly, .Last.value isn't very well documented. The only thing I see in
the manuals is in R-ints,
https://cran.r-project.org/doc/manuals/r-release/R-ints.html#Base-environment

> Similarly, the evaluator creates a symbol .Last.value which appears as a variable in the base environment.

Playing around though, it seems if the last value is the result of a
symbol lookup or assignment, .Last.value seems to do something like
"re-evaluate" the symbol, resetting the .Last.value value to the
stored value each time, whereas if the last expression evaluated
returns a pure value, calling .Last.value in an expression can update
the .Last.value value.

    1
    #> [1] 1
    # This is evaluated as 1 + (1) + (2) + (4) + (8) as .Last.Value
changes each time.
    .Last.value + .Last.value + .Last.value + .Last.value + .Last.value
    #> [1] 16

    x <- 1
    # This is evaluated as 1 + 1 + 1 + 1 + 1
    .Last.value + .Last.value + .Last.value + .Last.value + .Last.value
    #> [1] 5

    x <- 1
    x
    # This is still evaluated as 1 + 1 + 1 + 1 + 1
    .Last.value + .Last.value + .Last.value + .Last.value + .Last.value
    #> [1] 5

    1
    # This is also evaluated as 1 + 1 + 1 + 1 + 1
    (x <- .Last.value) + .Last.value + .Last.value + .Last.value + .Last.value

Created on 2021-06-19 by the [reprex
package](https://reprex.tidyverse.org) (v2.0.0.9000)

The lesson here is .Last.value should (almost) never be used
programmatically, and in an interactive context the only approved use
of it is to store a result before losing it.

On Fri, Jun 18, 2021 at 11:03 PM Bickis, Mikelis <bickis at math.usask.ca> wrote:
>
> Hello:
>
> Here is a bit of R-code:
>
> > mvr
> [1] 2.2658
> > (sin(.Last.value)+sin(2*.Last.value))
> [1] -0.2156507
> > acos((-sqrt(17)-1)/8)
> [1] 2.2658
> > (sin(.Last.value)+sin(2*.Last.value))
> [1] 1.76745
> > (sin(mvr)+sin(2*mvr))
> [1] -0.2156507
> >
>
> Note that my variable mvr is the value of acos((-sqrt(17)-1)/8).   However, if I use .Last.value after invoking the acos function in a further calculation, I get a nonsensical result.   What is going on?
>
> I am running R version 4.0.0 (2020-04-24) on an iMac, operating system MacOS 11.4 ?Big Sur?.
>
> Mik Bickis
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From iuke-tier@ey m@iii@g oii uiow@@edu  Sat Jun 19 16:26:00 2021
From: iuke-tier@ey m@iii@g oii uiow@@edu (iuke-tier@ey m@iii@g oii uiow@@edu)
Date: Sat, 19 Jun 2021 09:26:00 -0500 (CDT)
Subject: [R] [External]  Unexplained behaviour of .Last.value
In-Reply-To: <1E3ADA2B-E3A7-4D42-B6BC-2E2B9A7C0BDD@usask.ca>
References: <1E3ADA2B-E3A7-4D42-B6BC-2E2B9A7C0BDD@usask.ca>
Message-ID: <alpine.DEB.2.21.2106190925020.3318@luke-Latitude-7480>

Thanks for the report. Fixed in R-devel in r80530; will port to
R-patched soon.

Best,

luke

On Fri, 18 Jun 2021, Bickis, Mikelis wrote:

> Hello:
>
> Here is a bit of R-code:
>
>> mvr
> [1] 2.2658
>> (sin(.Last.value)+sin(2*.Last.value))
> [1] -0.2156507
>> acos((-sqrt(17)-1)/8)
> [1] 2.2658
>> (sin(.Last.value)+sin(2*.Last.value))
> [1] 1.76745
>> (sin(mvr)+sin(2*mvr))
> [1] -0.2156507
>>
>
> Note that my variable mvr is the value of acos((-sqrt(17)-1)/8).   However, if I use .Last.value after invoking the acos function in a further calculation, I get a nonsensical result.   What is going on?
>
> I am running R version 4.0.0 (2020-04-24) on an iMac, operating system MacOS 11.4 ?Big Sur?.
>
> Mik Bickis
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Luke Tierney
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:   luke-tierney at uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu

From @ve|@r|u@ @end|ng |rom gm@||@com  Sat Jun 19 15:58:57 2021
From: @ve|@r|u@ @end|ng |rom gm@||@com (=?utf-8?Q?Remo_R=C3=B6thlin?=)
Date: Sat, 19 Jun 2021 15:58:57 +0200
Subject: [R] Unexpected behaviour when using format(x,
 scientific = TRUE) on integer vector
Message-ID: <2A39FFF0-9833-4CD7-AF63-DF7FB11AAA01@gmail.com>

Dear useRs

I?m encountering an unexpected behaviour when trying to apply format(x, scientific = TRUE) on integer vectors (but not double vectors). 
The resulting string is not formatted in scientific notation, however, using formatC() instead, the result is as expected.

Is this the expected behaviour of format(x, scientific = TRUE)? I haven?t found any information or discussion on a difference in scientific notation between format and formatC.

Both functions are implemented as .Internal() functions in C, and while do_formatC() uses C?s directly built-in capabilities to format, do_format() does additional work.
Unfortunately my knowledge of R internals is not good enough to see why format() treats integers differently in this case.

Warm regards,

Remo

SessionInfo and code to reproduce the issue with output (was also reproduced on Windows 10 x64 R 4.1.0 and RStudio Cloud R 3.6.3 & R 4.0.3):

> sessionInfo()
R version 4.1.0 (2021-05-18)
Platform: x86_64-apple-darwin17.0 (64-bit)
Running under: macOS Big Sur 10.16

Matrix products: default
BLAS:   /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRblas.dylib
LAPACK: /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRlapack.dylib

locale:
[1] de_CH.UTF-8/de_CH.UTF-8/de_CH.UTF-8/C/de_CH.UTF-8/de_CH.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

loaded via a namespace (and not attached):
[1] compiler_4.1.0
> Sys.getlocale()
[1] "de_CH.UTF-8/de_CH.UTF-8/de_CH.UTF-8/C/de_CH.UTF-8/de_CH.UTF-8"
> 
> numvec <- c(-1.23e4, 1.23e4)
> typeof(numvec) # double
[1] "double"
> 
> intvec <- c(-1.23e4L, 1.23e4L)
> typeof(intvec) # integer
[1] "integer"
> 
> numvec2 <- as.double(intvec)
> identical(numvec, numvec2)
[1] TRUE
> 
> formatC(numvec, format = "e") # Formatted as scientific notation
[1] "-1.2300e+04" "1.2300e+04" 
> format(numvec, scientific = TRUE) # Formatted as scientific notation
[1] "-1.23e+04" " 1.23e+04"
> 
> formatC(intvec, format = "e") # Formatted as scientific notation
[1] "-1.2300e+04" "1.2300e+04" 
> format(intvec, scientific = TRUE) # *Not* formatted as scientific notation
[1] "-12300" " 12300"
> 
> formatC(numvec2, format = "e") # Formatted as scientific notation
[1] "-1.2300e+04" "1.2300e+04" 
> format(numvec2, scientific = TRUE) # Formatted as scientific notation
[1] "-1.23e+04" " 1.23e+04"


From bgunter@4567 @end|ng |rom gm@||@com  Sat Jun 19 21:07:55 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 19 Jun 2021 12:07:55 -0700
Subject: [R] Unexpected behaviour when using format(x,
 scientific = TRUE) on integer vector
In-Reply-To: <2A39FFF0-9833-4CD7-AF63-DF7FB11AAA01@gmail.com>
References: <2A39FFF0-9833-4CD7-AF63-DF7FB11AAA01@gmail.com>
Message-ID: <CAGxFJbSpFe81p3Zn46tKHeNYQMZEjSdTWHqDuTvrczP9K0Ff_g@mail.gmail.com>

The behavior is **as documented on the man page**, always the first thing
you should consult. It can be terse, but almost always accurate once
deciphered.
In this case, ?format says for the "scientific" parameter(Highlighting
added):

scientific
Either a logical specifying whether elements of a **real or complex
vector** should be encoded in scientific format, or an integer penalty (see
options("scipen")). Missing values correspond to the current default
penalty.

Your vector is integer, right? The options("scipen") man page also
indicates that fixed format will be used.


Cheers,
Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sat, Jun 19, 2021 at 9:50 AM Remo R?thlin <avelarius at gmail.com> wrote:

> Dear useRs
>
> I?m encountering an unexpected behaviour when trying to apply format(x,
> scientific = TRUE) on integer vectors (but not double vectors).
> The resulting string is not formatted in scientific notation, however,
> using formatC() instead, the result is as expected.
>
> Is this the expected behaviour of format(x, scientific = TRUE)? I haven?t
> found any information or discussion on a difference in scientific notation
> between format and formatC.
>
> Both functions are implemented as .Internal() functions in C, and while
> do_formatC() uses C?s directly built-in capabilities to format, do_format()
> does additional work.
> Unfortunately my knowledge of R internals is not good enough to see why
> format() treats integers differently in this case.
>
> Warm regards,
>
> Remo
>
> SessionInfo and code to reproduce the issue with output (was also
> reproduced on Windows 10 x64 R 4.1.0 and RStudio Cloud R 3.6.3 & R 4.0.3):
>
> > sessionInfo()
> R version 4.1.0 (2021-05-18)
> Platform: x86_64-apple-darwin17.0 (64-bit)
> Running under: macOS Big Sur 10.16
>
> Matrix products: default
> BLAS:
>  /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRblas.dylib
> LAPACK:
> /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRlapack.dylib
>
> locale:
> [1] de_CH.UTF-8/de_CH.UTF-8/de_CH.UTF-8/C/de_CH.UTF-8/de_CH.UTF-8
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> loaded via a namespace (and not attached):
> [1] compiler_4.1.0
> > Sys.getlocale()
> [1] "de_CH.UTF-8/de_CH.UTF-8/de_CH.UTF-8/C/de_CH.UTF-8/de_CH.UTF-8"
> >
> > numvec <- c(-1.23e4, 1.23e4)
> > typeof(numvec) # double
> [1] "double"
> >
> > intvec <- c(-1.23e4L, 1.23e4L)
> > typeof(intvec) # integer
> [1] "integer"
> >
> > numvec2 <- as.double(intvec)
> > identical(numvec, numvec2)
> [1] TRUE
> >
> > formatC(numvec, format = "e") # Formatted as scientific notation
> [1] "-1.2300e+04" "1.2300e+04"
> > format(numvec, scientific = TRUE) # Formatted as scientific notation
> [1] "-1.23e+04" " 1.23e+04"
> >
> > formatC(intvec, format = "e") # Formatted as scientific notation
> [1] "-1.2300e+04" "1.2300e+04"
> > format(intvec, scientific = TRUE) # *Not* formatted as scientific
> notation
> [1] "-12300" " 12300"
> >
> > formatC(numvec2, format = "e") # Formatted as scientific notation
> [1] "-1.2300e+04" "1.2300e+04"
> > format(numvec2, scientific = TRUE) # Formatted as scientific notation
> [1] "-1.23e+04" " 1.23e+04"
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Jun 20 01:28:51 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 19 Jun 2021 19:28:51 -0400
Subject: [R] Unexpected behaviour when using format(x,
 scientific = TRUE) on integer vector
In-Reply-To: <2A39FFF0-9833-4CD7-AF63-DF7FB11AAA01@gmail.com>
References: <2A39FFF0-9833-4CD7-AF63-DF7FB11AAA01@gmail.com>
Message-ID: <598eb6ab-ca0a-cb89-f4ad-5f93ac598c3c@gmail.com>

On 19/06/2021 9:58 a.m., Remo R?thlin wrote:
> Dear useRs
> 
> I?m encountering an unexpected behaviour when trying to apply format(x, scientific = TRUE) on integer vectors (but not double vectors).
> The resulting string is not formatted in scientific notation, however, using formatC() instead, the result is as expected.
> 
> Is this the expected behaviour of format(x, scientific = TRUE)? I haven?t found any information or discussion on a difference in scientific notation between format and formatC.

If you look at the internals of  the format.default() function, you'll 
see that it ignores the "scientific" argument when the type of the 
argument is integer:

https://github.com/wch/r-source/blob/23dc578c6f40acdf53f92bab88cf91ecd25cd2e8/src/main/paste.c#L543-L552

The help page describes that argument as:

`Either a logical specifying whether elements of a real or complex 
vector should be encoded in scientific format, or an integer penalty 
(see options("scipen")). Missing values correspond to the current 
default penalty.`

so there's no reason to expect it applies to integer vectors as well.

I suspect the reason for this goes back to S, which was influenced more 
by Fortran than by C:  and I think Fortran (at least as it was in the 
70s and 80s) never used scientific notation on integers.

Duncan Murdoch

> Both functions are implemented as .Internal() functions in C, and while do_formatC() uses C?s directly built-in capabilities to format, do_format() does additional work.
> Unfortunately my knowledge of R internals is not good enough to see why format() treats integers differently in this case.
> 
> Warm regards,
> 
> Remo
> 
> SessionInfo and code to reproduce the issue with output (was also reproduced on Windows 10 x64 R 4.1.0 and RStudio Cloud R 3.6.3 & R 4.0.3):
> 
>> sessionInfo()
> R version 4.1.0 (2021-05-18)
> Platform: x86_64-apple-darwin17.0 (64-bit)
> Running under: macOS Big Sur 10.16
> 
> Matrix products: default
> BLAS:   /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRblas.dylib
> LAPACK: /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRlapack.dylib
> 
> locale:
> [1] de_CH.UTF-8/de_CH.UTF-8/de_CH.UTF-8/C/de_CH.UTF-8/de_CH.UTF-8
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
> 
> loaded via a namespace (and not attached):
> [1] compiler_4.1.0
>> Sys.getlocale()
> [1] "de_CH.UTF-8/de_CH.UTF-8/de_CH.UTF-8/C/de_CH.UTF-8/de_CH.UTF-8"
>>
>> numvec <- c(-1.23e4, 1.23e4)
>> typeof(numvec) # double
> [1] "double"
>>
>> intvec <- c(-1.23e4L, 1.23e4L)
>> typeof(intvec) # integer
> [1] "integer"
>>
>> numvec2 <- as.double(intvec)
>> identical(numvec, numvec2)
> [1] TRUE
>>
>> formatC(numvec, format = "e") # Formatted as scientific notation
> [1] "-1.2300e+04" "1.2300e+04"
>> format(numvec, scientific = TRUE) # Formatted as scientific notation
> [1] "-1.23e+04" " 1.23e+04"
>>
>> formatC(intvec, format = "e") # Formatted as scientific notation
> [1] "-1.2300e+04" "1.2300e+04"
>> format(intvec, scientific = TRUE) # *Not* formatted as scientific notation
> [1] "-12300" " 12300"
>>
>> formatC(numvec2, format = "e") # Formatted as scientific notation
> [1] "-1.2300e+04" "1.2300e+04"
>> format(numvec2, scientific = TRUE) # Formatted as scientific notation
> [1] "-1.23e+04" " 1.23e+04"
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From @t@t|@t|c@84 @end|ng |rom hotm@||@com  Sun Jun 20 03:15:04 2021
From: @t@t|@t|c@84 @end|ng |rom hotm@||@com (peri He)
Date: Sun, 20 Jun 2021 01:15:04 +0000
Subject: [R] RSTAN
Message-ID: <AM7PR10MB32371C5575436EB417E09B76C60B9@AM7PR10MB3237.EURPRD10.PROD.OUTLOOK.COM>

Dear Friends,

I have started to write some codes for RSTAN, I have a general question regarding likelihood function.
Below you can see a simple structure of RSTAN model. For most of the codes, in the "model" block, I saw priors (hyperpriors) and likelihood functions.
In a few programs, I don't see a likelihood function (such as the model shown below). Has any default function been defined in RSTAN or I am mistaking?
I would appreciate your help.

Regards,
 Peri



model.stan <- "data { int<lower=0> i;
                                 .
                                 .
                                 .

                                }

                          parameters {
                                      real Mi;
                                      real<lower=0> De;
                                      real R[i];
                                      }

                          model {
                                for(i in 1:I) {
                                              b[i] ~ normal(R[i], C[i]);
                                              R[i] ~ normal(Mi,  De);
                                              }

                                Mi ~ normal(0, 10);
                                De ~ uniform(0,sigma);
                                }"

stan(model_code = model.stan,
     data = data,
     init = rep(.),
     chains = .,
     iter =iter1,
     .
     .
     refresh = 50000
)

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Jun 20 03:54:11 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 19 Jun 2021 18:54:11 -0700
Subject: [R] RSTAN
In-Reply-To: <AM7PR10MB32371C5575436EB417E09B76C60B9@AM7PR10MB3237.EURPRD10.PROD.OUTLOOK.COM>
References: <AM7PR10MB32371C5575436EB417E09B76C60B9@AM7PR10MB3237.EURPRD10.PROD.OUTLOOK.COM>
Message-ID: <73961A46-6562-4280-A4EB-1E5465C10E33@dcn.davis.ca.us>

Off topic. Read the Posting Guide before posting here.

You may find a more suitable forum via the Url entry in the rstan description file [1].

[1] https://cran.r-project.org/web/packages/rstan/index.html

On June 19, 2021 6:15:04 PM PDT, peri He <statistics84 at hotmail.com> wrote:
>Dear Friends,
>
>I have started to write some codes for RSTAN, I have a general question
>regarding likelihood function.
>Below you can see a simple structure of RSTAN model. For most of the
>codes, in the "model" block, I saw priors (hyperpriors) and likelihood
>functions.
>In a few programs, I don't see a likelihood function (such as the model
>shown below). Has any default function been defined in RSTAN or I am
>mistaking?
>I would appreciate your help.
>
>Regards,
> Peri
>
>
>
>model.stan <- "data { int<lower=0> i;
>                                 .
>                                 .
>                                 .
>
>                                }
>
>                          parameters {
>                                      real Mi;
>                                      real<lower=0> De;
>                                      real R[i];
>                                      }
>
>                          model {
>                                for(i in 1:I) {
>                                             b[i] ~ normal(R[i], C[i]);
>                                              R[i] ~ normal(Mi,  De);
>                                              }
>
>                                Mi ~ normal(0, 10);
>                                De ~ uniform(0,sigma);
>                                }"
>
>stan(model_code = model.stan,
>     data = data,
>     init = rep(.),
>     chains = .,
>     iter =iter1,
>     .
>     .
>     refresh = 50000
>)
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From @ndr|u|@ @end|ng |rom u@|bert@@c@  Mon Jun 21 09:22:44 2021
From: @ndr|u|@ @end|ng |rom u@|bert@@c@ (=?UTF-8?Q?Andr=C3=A9_Luis_Neves?=)
Date: Mon, 21 Jun 2021 09:22:44 +0200
Subject: [R] Help with selection of continuous data
Message-ID: <CAHxKz8bB9mFvORt25o+UR=qYcjkPr6i=mg3sTkSt6EMhMDwgOA@mail.gmail.com>

Dear R users,

I want to select only the data containing a continuous number of *ID* from
1-8 in each *DATE*. Note, I do not want to select data that do not contain
a continuous number in *ID *from 1-8 (eg. Data on *DATE* 1/2/2020, and
01/03/2020). The dataset is a huge matrix with 24 columns and 1.5 million
rows, but I have prepared a reproducible code for your reference below.

Here it is the reproducible code:

A =
data.frame(c("01/01/2020","01/01/2020","01/01/2020","01/01/2020","01/01/2020","01/01/2020","01/01/2020",

 "01/01/2020","01/01/2020","01/01/2020","01/01/2020","01/01/2020","01/02/2020","01/02/2020",

 "01/02/2020","01/02/2020","01/03/2020","01/03/2020","01/03/2020","01/03/2020","01/03/2020",

 "01/03/2020","01/03/2020","01/04/2020","01/04/2020","01/04/2020","01/04/2020","01/04/2020",
               "01/04/2020","01/04/2020","01/04/2020","01/04/2020"),
c(23,22,12,24,26,19,34,15,17,19,23,33,

 23,34,25,23,25,24,34,33,31,32,24,22,21,23,22,22,21,23,23,21),
c(13,11,12,9,8,9,7,10,11,9,6,11,
               9,8,9,10,11,12,9,8,10,4,6,9,8,9,10,11,14,12,13,11),
c(1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,1,2,
               3,4,5,6,7,1,2,3,4,5,6,7,8,9))
colnames(A) <- c("Date", "CO2", "CH4", "ID")
A

Thank you,
-- 
Andre

	[[alternative HTML version deleted]]


From er|cjberger @end|ng |rom gm@||@com  Mon Jun 21 10:17:07 2021
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Mon, 21 Jun 2021 11:17:07 +0300
Subject: [R] Help with selection of continuous data
In-Reply-To: <CAHxKz8bB9mFvORt25o+UR=qYcjkPr6i=mg3sTkSt6EMhMDwgOA@mail.gmail.com>
References: <CAHxKz8bB9mFvORt25o+UR=qYcjkPr6i=mg3sTkSt6EMhMDwgOA@mail.gmail.com>
Message-ID: <CAGgJW76Qccg1=nt-3YbfGbQX=94fJwi-P4W3F37CF5iJozRmJw@mail.gmail.com>

Hi Andr?,
It's not 100% clear to me what you are asking. I am interpreting the
question as selecting the data from those dates for which all of
1,2,3,4,5,6,7,8 appear in the ID column.
My approach determines the dates satisfying this property, which I put into
a vector dtV. Then I take the rows of A for which the date is in the vector
dtV.

library(dplyr)
dtV <- A %>% mutate(x=2^(ID-1)) %>% group_by(Date) %>%
summarise(y=(sum(unique(x))%%256==255)) %>% filter(y==TRUE) %>% select(Date)
B <- A[ A$Date %in% dtV$Date, ]

B is the subset of A that you want.

HTH,
Eric



On Mon, Jun 21, 2021 at 10:23 AM Andr? Luis Neves <andrluis at ualberta.ca>
wrote:

> Dear R users,
>
> I want to select only the data containing a continuous number of *ID* from
> 1-8 in each *DATE*. Note, I do not want to select data that do not contain
> a continuous number in *ID *from 1-8 (eg. Data on *DATE* 1/2/2020, and
> 01/03/2020). The dataset is a huge matrix with 24 columns and 1.5 million
> rows, but I have prepared a reproducible code for your reference below.
>
> Here it is the reproducible code:
>
> A =
>
> data.frame(c("01/01/2020","01/01/2020","01/01/2020","01/01/2020","01/01/2020","01/01/2020","01/01/2020",
>
>
>  "01/01/2020","01/01/2020","01/01/2020","01/01/2020","01/01/2020","01/02/2020","01/02/2020",
>
>
>  "01/02/2020","01/02/2020","01/03/2020","01/03/2020","01/03/2020","01/03/2020","01/03/2020",
>
>
>  "01/03/2020","01/03/2020","01/04/2020","01/04/2020","01/04/2020","01/04/2020","01/04/2020",
>                "01/04/2020","01/04/2020","01/04/2020","01/04/2020"),
> c(23,22,12,24,26,19,34,15,17,19,23,33,
>
>  23,34,25,23,25,24,34,33,31,32,24,22,21,23,22,22,21,23,23,21),
> c(13,11,12,9,8,9,7,10,11,9,6,11,
>                9,8,9,10,11,12,9,8,10,4,6,9,8,9,10,11,14,12,13,11),
> c(1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,1,2,
>                3,4,5,6,7,1,2,3,4,5,6,7,8,9))
> colnames(A) <- c("Date", "CO2", "CH4", "ID")
> A
>
> Thank you,
> --
> Andre
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From j@@per@g@w@t@on @end|ng |rom gm@||@com  Sun Jun 20 16:59:14 2021
From: j@@per@g@w@t@on @end|ng |rom gm@||@com (Jasper Watson)
Date: Sun, 20 Jun 2021 16:59:14 +0200
Subject: [R] [R-pkgs] precisePlacement: new package for precisely placing
 elements onto a base R plot
Message-ID: <CAN+Ty_DGjS+q1jdHL++L4sjWmM1=-dcQsToUXLcC8o_680fwPA@mail.gmail.com>

Hello,

I have just released to CRAN the precisePlacement package which provides a
selection of tools that make it easier to place elements onto a (base R)
plot exactly where you want them. It allows users to identify points and
distances on a plot in terms of inches, pixels, margin lines, data units,
and proportions of the plotting space, all in a manner more simple than
manipulating par().

CRAN: https://CRAN.R-project.org/package=precisePlacement
GitHub: https://github.com/rntq472/precisePlacement

Cheers,

Jasper Watson

	[[alternative HTML version deleted]]

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From drj|m|emon @end|ng |rom gm@||@com  Mon Jun 21 12:10:41 2021
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Mon, 21 Jun 2021 20:10:41 +1000
Subject: [R] Help with selection of continuous data
In-Reply-To: <CAGgJW76Qccg1=nt-3YbfGbQX=94fJwi-P4W3F37CF5iJozRmJw@mail.gmail.com>
References: <CAHxKz8bB9mFvORt25o+UR=qYcjkPr6i=mg3sTkSt6EMhMDwgOA@mail.gmail.com>
 <CAGgJW76Qccg1=nt-3YbfGbQX=94fJwi-P4W3F37CF5iJozRmJw@mail.gmail.com>
Message-ID: <CA+8X3fVeOWW_+QJsiGtjmWPYUeRtvNXK3dMREetL_+UBoO73pw@mail.gmail.com>

Hi Andre,
I've taken a different approach to that employed by Eric:

A<-data.frame(c("01/01/2020","01/01/2020","01/01/2020","01/01/2020","01/01/2020",
 "01/01/2020","01/01/2020","01/01/2020","01/01/2020","01/01/2020","01/01/2020",
 "01/01/2020","01/02/2020","01/02/2020","01/02/2020","01/02/2020","01/03/2020",
 "01/03/2020","01/03/2020","01/03/2020","01/03/2020","01/03/2020","01/03/2020",
 "01/04/2020","01/04/2020","01/04/2020","01/04/2020","01/04/2020",
      "01/04/2020","01/04/2020","01/04/2020","01/04/2020"),
c(23,22,12,24,26,19,34,15,17,19,23,33,23,34,25,23,25,24,34,33,31,32,24,22,21,
 23,22,22,21,23,23,21),
c(13,11,12,9,8,9,7,10,11,9,6,11,9,8,9,10,11,12,9,8,10,4,6,9,8,9,10,11,14,12,
 13,11),
c(1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,1,2,
 3,4,5,6,7,1,2,3,4,5,6,7,8,9))
colnames(A) <- c("Date", "CO2", "CH4", "ID")
# add a variable to compile selected rows
A$select<-FALSE
# get all unique dates
alldates<-unique(A$Date)
for(date in alldates) {
 # get indices for this date
 date_indices<-which(A$Date == date)
 # only mark the first 8 as TRUE
 A$select[date_indices[1:8]]<-all(1:8 %in% A$ID[date_indices])
}
A
A[A$select,]

If you don't want to add a column you can set up "select" as a vector.

Jim

On Mon, Jun 21, 2021 at 6:18 PM Eric Berger <ericjberger at gmail.com> wrote:
>
> Hi Andr?,
> It's not 100% clear to me what you are asking. I am interpreting the
> question as selecting the data from those dates for which all of
> 1,2,3,4,5,6,7,8 appear in the ID column.
> My approach determines the dates satisfying this property, which I put into
> a vector dtV. Then I take the rows of A for which the date is in the vector
> dtV.
>
> library(dplyr)
> dtV <- A %>% mutate(x=2^(ID-1)) %>% group_by(Date) %>%
> summarise(y=(sum(unique(x))%%256==255)) %>% filter(y==TRUE) %>% select(Date)
> B <- A[ A$Date %in% dtV$Date, ]
>
> B is the subset of A that you want.
>
> HTH,
> Eric
>
>
>
> On Mon, Jun 21, 2021 at 10:23 AM Andr? Luis Neves <andrluis at ualberta.ca>
> wrote:
>
> > Dear R users,
> >
> > I want to select only the data containing a continuous number of *ID* from
> > 1-8 in each *DATE*. Note, I do not want to select data that do not contain
> > a continuous number in *ID *from 1-8 (eg. Data on *DATE* 1/2/2020, and
> > 01/03/2020). The dataset is a huge matrix with 24 columns and 1.5 million
> > rows, but I have prepared a reproducible code for your reference below.
> >
> > Here it is the reproducible code:
> >
> > A =
> >
> > data.frame(c("01/01/2020","01/01/2020","01/01/2020","01/01/2020","01/01/2020","01/01/2020","01/01/2020",
> >
> >
> >  "01/01/2020","01/01/2020","01/01/2020","01/01/2020","01/01/2020","01/02/2020","01/02/2020",
> >
> >
> >  "01/02/2020","01/02/2020","01/03/2020","01/03/2020","01/03/2020","01/03/2020","01/03/2020",
> >
> >
> >  "01/03/2020","01/03/2020","01/04/2020","01/04/2020","01/04/2020","01/04/2020","01/04/2020",
> >                "01/04/2020","01/04/2020","01/04/2020","01/04/2020"),
> > c(23,22,12,24,26,19,34,15,17,19,23,33,
> >
> >  23,34,25,23,25,24,34,33,31,32,24,22,21,23,22,22,21,23,23,21),
> > c(13,11,12,9,8,9,7,10,11,9,6,11,
> >                9,8,9,10,11,12,9,8,10,4,6,9,8,9,10,11,14,12,13,11),
> > c(1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,1,2,
> >                3,4,5,6,7,1,2,3,4,5,6,7,8,9))
> > colnames(A) <- c("Date", "CO2", "CH4", "ID")
> > A
> >
> > Thank you,
> > --
> > Andre
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From petr@p|k@| @end|ng |rom prechez@@cz  Mon Jun 21 12:32:26 2021
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Mon, 21 Jun 2021 10:32:26 +0000
Subject: [R] Help with selection of continuous data
In-Reply-To: <CA+8X3fVeOWW_+QJsiGtjmWPYUeRtvNXK3dMREetL_+UBoO73pw@mail.gmail.com>
References: <CAHxKz8bB9mFvORt25o+UR=qYcjkPr6i=mg3sTkSt6EMhMDwgOA@mail.gmail.com>
 <CAGgJW76Qccg1=nt-3YbfGbQX=94fJwi-P4W3F37CF5iJozRmJw@mail.gmail.com>
 <CA+8X3fVeOWW_+QJsiGtjmWPYUeRtvNXK3dMREetL_+UBoO73pw@mail.gmail.com>
Message-ID: <533cd0adc88e476aaca6ec9f3f28c52b@SRVEXCHCM1302.precheza.cz>

Hi Andr?

another approach using split/lapply

lll <- lapply(split(A$ID, A$Date), function(x) x<9)
A$select <- unlist(lapply(lll, function(x) x*sum(x)>=8))
A
A[A$select,]

However if your real data frame does not have same properties as the one you showed, results could be wrong.

e.g. if A$ID has not 8 consecutive values  (1:8) but e.g. 1,1,2,2, 3, 3, 4, 4, 5, 5, ... or 1,1,1,1,1,1,1,1, ...

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Jim Lemon
> Sent: Monday, June 21, 2021 12:11 PM
> To: Eric Berger <ericjberger at gmail.com>
> Cc: R mailing list <r-help at r-project.org>; Andr? Luis Neves
> <andrluis at ualberta.ca>
> Subject: Re: [R] Help with selection of continuous data
> 
> Hi Andre,
> I've taken a different approach to that employed by Eric:
> 
> A<-
> data.frame(c("01/01/2020","01/01/2020","01/01/2020","01/01/2020","01/01/
> 2020",
> 
> "01/01/2020","01/01/2020","01/01/2020","01/01/2020","01/01/2020","01/01/
> 2020",
> 
> "01/01/2020","01/02/2020","01/02/2020","01/02/2020","01/02/2020","01/03/
> 2020",
> 
> "01/03/2020","01/03/2020","01/03/2020","01/03/2020","01/03/2020","01/03/
> 2020",
>  "01/04/2020","01/04/2020","01/04/2020","01/04/2020","01/04/2020",
>       "01/04/2020","01/04/2020","01/04/2020","01/04/2020"),
> c(23,22,12,24,26,19,34,15,17,19,23,33,23,34,25,23,25,24,34,33,31,32,24,22,21,
>  23,22,22,21,23,23,21),
> c(13,11,12,9,8,9,7,10,11,9,6,11,9,8,9,10,11,12,9,8,10,4,6,9,8,9,10,11,14,12,
>  13,11),
> c(1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,1,2,
>  3,4,5,6,7,1,2,3,4,5,6,7,8,9))
> colnames(A) <- c("Date", "CO2", "CH4", "ID") # add a variable to compile
> selected rows A$select<-FALSE # get all unique dates
> alldates<-unique(A$Date)
> for(date in alldates) {
>  # get indices for this date
>  date_indices<-which(A$Date == date)
>  # only mark the first 8 as TRUE
>  A$select[date_indices[1:8]]<-all(1:8 %in% A$ID[date_indices]) } A
> A[A$select,]
> 
> If you don't want to add a column you can set up "select" as a vector.
> 
> Jim
> 
> On Mon, Jun 21, 2021 at 6:18 PM Eric Berger <ericjberger at gmail.com> wrote:
> >
> > Hi Andr?,
> > It's not 100% clear to me what you are asking. I am interpreting the
> > question as selecting the data from those dates for which all of
> > 1,2,3,4,5,6,7,8 appear in the ID column.
> > My approach determines the dates satisfying this property, which I put
> > into a vector dtV. Then I take the rows of A for which the date is in
> > the vector dtV.
> >
> > library(dplyr)
> > dtV <- A %>% mutate(x=2^(ID-1)) %>% group_by(Date) %>%
> > summarise(y=(sum(unique(x))%%256==255)) %>% filter(y==TRUE) %>%
> > select(Date) B <- A[ A$Date %in% dtV$Date, ]
> >
> > B is the subset of A that you want.
> >
> > HTH,
> > Eric
> >
> >
> >
> > On Mon, Jun 21, 2021 at 10:23 AM Andr? Luis Neves
> > <andrluis at ualberta.ca>
> > wrote:
> >
> > > Dear R users,
> > >
> > > I want to select only the data containing a continuous number of
> > > *ID* from
> > > 1-8 in each *DATE*. Note, I do not want to select data that do not
> > > contain a continuous number in *ID *from 1-8 (eg. Data on *DATE*
> > > 1/2/2020, and 01/03/2020). The dataset is a huge matrix with 24
> > > columns and 1.5 million rows, but I have prepared a reproducible code for
> your reference below.
> > >
> > > Here it is the reproducible code:
> > >
> > > A =
> > >
> > > data.frame(c("01/01/2020","01/01/2020","01/01/2020","01/01/2020","01
> > > /01/2020","01/01/2020","01/01/2020",
> > >
> > >
> > >
> > > "01/01/2020","01/01/2020","01/01/2020","01/01/2020","01/01/2020","01
> > > /02/2020","01/02/2020",
> > >
> > >
> > >
> > > "01/02/2020","01/02/2020","01/03/2020","01/03/2020","01/03/2020","01
> > > /03/2020","01/03/2020",
> > >
> > >
> > >
> "01/03/2020","01/03/2020","01/04/2020","01/04/2020","01/04/2020","01/04/
> 2020","01/04/2020",
> > >                "01/04/2020","01/04/2020","01/04/2020","01/04/2020"),
> > > c(23,22,12,24,26,19,34,15,17,19,23,33,
> > >
> > >  23,34,25,23,25,24,34,33,31,32,24,22,21,23,22,22,21,23,23,21),
> > > c(13,11,12,9,8,9,7,10,11,9,6,11,
> > >                9,8,9,10,11,12,9,8,10,4,6,9,8,9,10,11,14,12,13,11),
> > > c(1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,1,2,
> > >                3,4,5,6,7,1,2,3,4,5,6,7,8,9))
> > > colnames(A) <- c("Date", "CO2", "CH4", "ID") A
> > >
> > > Thank you,
> > > --
> > > Andre
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> > >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.

From toro @end|ng |rom |ett|@c|@com  Mon Jun 21 22:15:56 2021
From: toro @end|ng |rom |ett|@c|@com (Gabriel Toro)
Date: Mon, 21 Jun 2021 20:15:56 +0000
Subject: [R] Question about .Rhistory in Windows
Message-ID: <BY5PR16MB3521A942F4E1CB8632C86569AA0A9@BY5PR16MB3521.namprd16.prod.outlook.com>

I am using version 3.6.3 on Windows. For some reason, the .Rhistory file gets over-written once in a while. I would like to avoid this so I have a complete history over multiple R sessions. Under what conditions can the .Rhistory file be over-written?  Is there a way to keep this file from being over-written? Any change in the startup settings?

Thanks in advance,

Gabriel


	[[alternative HTML version deleted]]


From toro @end|ng |rom |ett|@c|@com  Mon Jun 21 22:19:10 2021
From: toro @end|ng |rom |ett|@c|@com (Gabriel Toro)
Date: Mon, 21 Jun 2021 20:19:10 +0000
Subject: [R] Crashes while pasting  a graphic to clipboard on Windows
Message-ID: <BY5PR16MB35216F7AA259BDD70F3233EEAA0A9@BY5PR16MB3521.namprd16.prod.outlook.com>

I am using version 3.6.3 on Windows. I recently noticed that R crashes when pasting graphics to the clipboard (both as metafiles and as images). I saw some old (~ 2 years old) references to the problem on Google, but no recent ones. Is there a way around this problem?

Thanks,

Gabriel


	[[alternative HTML version deleted]]


From m@rc_@chw@rtz @end|ng |rom me@com  Mon Jun 21 22:40:09 2021
From: m@rc_@chw@rtz @end|ng |rom me@com (Marc Schwartz)
Date: Mon, 21 Jun 2021 16:40:09 -0400
Subject: [R] Crashes while pasting a graphic to clipboard on Windows
In-Reply-To: <BY5PR16MB35216F7AA259BDD70F3233EEAA0A9@BY5PR16MB3521.namprd16.prod.outlook.com>
References: <BY5PR16MB35216F7AA259BDD70F3233EEAA0A9@BY5PR16MB3521.namprd16.prod.outlook.com>
Message-ID: <f9999180-0545-973f-5a5a-7111e6ea5510@me.com>

Hi,

R version 3.6.3 was released back in February of 2020, so well over a 
year old, and version 4.1.0 is the current version.

I don't use Windows, and it is not clear if there was a Windows specific 
bug present at that time that may have been resolved since then. There 
have been a fair number of changes to the graphics engine and perhaps 
other related functionality.

Unless you are constrained by local IT policies, I would urge you to 
upgrade your R installation to the current release version, preferably 
with a fully clean install, given the major version upgrade such as this 
would be.

Regards,

Marc Schwartz

Gabriel Toro wrote on 6/21/21 4:19 PM:
> I am using version 3.6.3 on Windows. I recently noticed that R crashes when pasting graphics to the clipboard (both as metafiles and as images). I saw some old (~ 2 years old) references to the problem on Google, but no recent ones. Is there a way around this problem?
> 
> Thanks,
> 
> Gabriel


From @r|@chocho @end|ng |rom gm@||@com  Sun Jun 20 17:03:42 2021
From: @r|@chocho @end|ng |rom gm@||@com (Sri Priya)
Date: Sun, 20 Jun 2021 20:33:42 +0530
Subject: [R] Data is not properly written in csv file
Message-ID: <CANt2G=Qrn19fUogMYdLpMc_2d8wTCVa9DdoU1P_+tbtOAefZkQ@mail.gmail.com>

Dear R Users,

I am working on extracting tables from PDF and I am writing that in a csv
file. When I executed the code, the tables were not properly written in the
csv file.

Here is my code:

library(tabulizer)
# Location of pdf file.
location <- '
http://keic.mica-apps.net/wwwisis/ET_Annual_Reports/Religare_Enterprises_Ltd/RELIGARE-2017-2018.pdf
'

# Extract the table
out <- extract_tables(location)
for(i in 1:length(out))
{
    write.table(out[i], file='Output.csv',append=TRUE, sep=",",quote =
FALSE)
}
 I enclosed the screenshot of the output file. In that you can see
the tables are incomplete.

Any help would be appreciated.

Thanks
Sripriya.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Screenshot.png
Type: image/png
Size: 213656 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20210620/923ac6e0/attachment.png>

From bgunter@4567 @end|ng |rom gm@||@com  Mon Jun 21 23:58:09 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 21 Jun 2021 14:58:09 -0700
Subject: [R] Data is not properly written in csv file
In-Reply-To: <CANt2G=Qrn19fUogMYdLpMc_2d8wTCVa9DdoU1P_+tbtOAefZkQ@mail.gmail.com>
References: <CANt2G=Qrn19fUogMYdLpMc_2d8wTCVa9DdoU1P_+tbtOAefZkQ@mail.gmail.com>
Message-ID: <CAGxFJbSb6cc1Up4fABEySz6873BYXGExb0B2Z7j3HU6D98wQtA@mail.gmail.com>

Please read the posting guide, linked below, which says:

"For questions about functions in standard packages distributed with R (see
the FAQ Add-on packages in R
<https://cran.r-project.org/doc/FAQ/R-FAQ.html#Add-on-packages-in-R>), ask
questions on R-help.
If the question relates to a *contributed package* , e.g., one downloaded
from CRAN, try contacting the package maintainer first. You can also use
find("functionname") and packageDescription("packagename") to find this
information. *Only* send such questions to R-help or R-devel if you get no
reply or need further assistance. This applies to both requests for help
and to bug reports."

You may get lucky here and someone familiar with the tabulizer package will
respond; but unless you have already done so and received no response -- in
which case say so -- you should contact the maintainer about your problem.


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Jun 21, 2021 at 2:14 PM Sri Priya <sri.chocho at gmail.com> wrote:

> Dear R Users,
>
> I am working on extracting tables from PDF and I am writing that in a csv
> file. When I executed the code, the tables were not properly written in the
> csv file.
>
> Here is my code:
>
> library(tabulizer)
> # Location of pdf file.
> location <- '
>
> http://keic.mica-apps.net/wwwisis/ET_Annual_Reports/Religare_Enterprises_Ltd/RELIGARE-2017-2018.pdf
> '
>
> # Extract the table
> out <- extract_tables(location)
> for(i in 1:length(out))
> {
>     write.table(out[i], file='Output.csv',append=TRUE, sep=",",quote =
> FALSE)
> }
>  I enclosed the screenshot of the output file. In that you can see
> the tables are incomplete.
>
> Any help would be appreciated.
>
> Thanks
> Sripriya.
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From rmh @end|ng |rom temp|e@edu  Tue Jun 22 00:17:22 2021
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Mon, 21 Jun 2021 22:17:22 +0000
Subject: [R] [External]  Data is not properly written in csv file
In-Reply-To: <CANt2G=Qrn19fUogMYdLpMc_2d8wTCVa9DdoU1P_+tbtOAefZkQ@mail.gmail.com>
References: <CANt2G=Qrn19fUogMYdLpMc_2d8wTCVa9DdoU1P_+tbtOAefZkQ@mail.gmail.com>
Message-ID: <DA4E4AA7-FF22-4677-BFC3-56B639A3520F@temple.edu>

copy and paste from pdf usually scrambles tables.  this package is probably suffering from that pdf characteristic.


> On Jun 20, 2021, at 11:03, Sri Priya <sri.chocho at gmail.com> wrote:
> 
> Dear R Users,
> 
> I am working on extracting tables from PDF and I am writing that in a csv
> file. When I executed the code, the tables were not properly written in the
> csv file.
> 
> Here is my code:
> 
> library(tabulizer)
> # Location of pdf file.
> location <- '
> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fkeic.mica-apps.net%2Fwwwisis%2FET_Annual_Reports%2FReligare_Enterprises_Ltd%2FRELIGARE-2017-2018.pdf&amp;data=04%7C01%7Crmh%40temple.edu%7C1025b6434d6f4b4f7b5008d934f99be3%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637599069571109750%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C2000&amp;sdata=xLxqLIYvnriqWOoENpbWJvFi7wf03aHslYIz0jPZymY%3D&amp;reserved=0
> '
> 
> # Extract the table
> out <- extract_tables(location)
> for(i in 1:length(out))
> {
>    write.table(out[i], file='Output.csv',append=TRUE, sep=",",quote =
> FALSE)
> }
> I enclosed the screenshot of the output file. In that you can see
> the tables are incomplete.
> 
> Any help would be appreciated.
> 
> Thanks
> Sripriya.
> <Screenshot.png>______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From m@rc_@chw@rtz @end|ng |rom me@com  Tue Jun 22 00:33:39 2021
From: m@rc_@chw@rtz @end|ng |rom me@com (Marc Schwartz)
Date: Mon, 21 Jun 2021 18:33:39 -0400
Subject: [R] Data is not properly written in csv file
In-Reply-To: <CANt2G=Qrn19fUogMYdLpMc_2d8wTCVa9DdoU1P_+tbtOAefZkQ@mail.gmail.com>
References: <CANt2G=Qrn19fUogMYdLpMc_2d8wTCVa9DdoU1P_+tbtOAefZkQ@mail.gmail.com>
Message-ID: <4bfb5e02-19bb-4f75-e5ba-8b60911e0212@me.com>

Hi,

If each of the extracted tables do not have consistent content and 
structure, that may be causing problems as you append each to the same file.

You might want to modify your loop so that each table gets written to a 
different CSV file and see what that looks like.

Also, review ?write.table and take note of the default arguments that 
are used for write.csv(), as noted in the CSV Files section, and in the 
Examples.

Regards,

Marc Schwartz

Sri Priya wrote on 6/20/21 11:03 AM:
> Dear R Users,
> 
> I am working on extracting tables from PDF and I am writing that in a csv
> file. When I executed the code, the tables were not properly written in the
> csv file.
> 
> Here is my code:
> 
> library(tabulizer)
> # Location of pdf file.
> location <- '
> http://keic.mica-apps.net/wwwisis/ET_Annual_Reports/Religare_Enterprises_Ltd/RELIGARE-2017-2018.pdf
> '
> 
> # Extract the table
> out <- extract_tables(location)
> for(i in 1:length(out))
> {
>      write.table(out[i], file='Output.csv',append=TRUE, sep=",",quote =
> FALSE)
> }
>   I enclosed the screenshot of the output file. In that you can see
> the tables are incomplete.
> 
> Any help would be appreciated.
> 
> Thanks
> Sripriya.
>


From dw|n@em|u@ @end|ng |rom comc@@t@net  Tue Jun 22 03:08:07 2021
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Mon, 21 Jun 2021 18:08:07 -0700
Subject: [R] Data is not properly written in csv file
In-Reply-To: <CANt2G=Qrn19fUogMYdLpMc_2d8wTCVa9DdoU1P_+tbtOAefZkQ@mail.gmail.com>
References: <CANt2G=Qrn19fUogMYdLpMc_2d8wTCVa9DdoU1P_+tbtOAefZkQ@mail.gmail.com>
Message-ID: <dbe01efa-8c85-dd68-bbdb-1c65450075ec@comcast.net>

This was an exact duplicate of a posting to StackOverflow where it has a 
response. You are asked in the Posting Guide not to crosspost.


-- 

David.

On 6/20/21 8:03 AM, Sri Priya wrote:
> location <- '
> http://keic.mica-apps.net/wwwisis/ET_Annual_Reports/Religare_Enterprises_Ltd/RELIGARE-2017-2018.pdf
> '
>
> # Extract the table
> out <- extract_tables(location)


From @ndr|u|@ @end|ng |rom u@|bert@@c@  Tue Jun 22 08:28:13 2021
From: @ndr|u|@ @end|ng |rom u@|bert@@c@ (=?UTF-8?Q?Andr=C3=A9_Luis_Neves?=)
Date: Tue, 22 Jun 2021 08:28:13 +0200
Subject: [R] Help with selection of continuous data
In-Reply-To: <CA+8X3fVeOWW_+QJsiGtjmWPYUeRtvNXK3dMREetL_+UBoO73pw@mail.gmail.com>
References: <CAHxKz8bB9mFvORt25o+UR=qYcjkPr6i=mg3sTkSt6EMhMDwgOA@mail.gmail.com>
 <CAGgJW76Qccg1=nt-3YbfGbQX=94fJwi-P4W3F37CF5iJozRmJw@mail.gmail.com>
 <CA+8X3fVeOWW_+QJsiGtjmWPYUeRtvNXK3dMREetL_+UBoO73pw@mail.gmail.com>
Message-ID: <CAHxKz8akaY4=ORa6oWdyrvXKntujee0prTPE=2CMGOD2Px+MeQ@mail.gmail.com>

THANK you very much, guys!

You are very good people and highly competent in programming!

The problem was solved.

Have a great day.

Andre


On Mon, Jun 21, 2021 at 12:10 PM Jim Lemon <drjimlemon at gmail.com> wrote:

> Hi Andre,
> I've taken a different approach to that employed by Eric:
>
>
> A<-data.frame(c("01/01/2020","01/01/2020","01/01/2020","01/01/2020","01/01/2020",
>
>  "01/01/2020","01/01/2020","01/01/2020","01/01/2020","01/01/2020","01/01/2020",
>
>  "01/01/2020","01/02/2020","01/02/2020","01/02/2020","01/02/2020","01/03/2020",
>
>  "01/03/2020","01/03/2020","01/03/2020","01/03/2020","01/03/2020","01/03/2020",
>  "01/04/2020","01/04/2020","01/04/2020","01/04/2020","01/04/2020",
>       "01/04/2020","01/04/2020","01/04/2020","01/04/2020"),
>
> c(23,22,12,24,26,19,34,15,17,19,23,33,23,34,25,23,25,24,34,33,31,32,24,22,21,
>  23,22,22,21,23,23,21),
>
> c(13,11,12,9,8,9,7,10,11,9,6,11,9,8,9,10,11,12,9,8,10,4,6,9,8,9,10,11,14,12,
>  13,11),
> c(1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,1,2,
>  3,4,5,6,7,1,2,3,4,5,6,7,8,9))
> colnames(A) <- c("Date", "CO2", "CH4", "ID")
> # add a variable to compile selected rows
> A$select<-FALSE
> # get all unique dates
> alldates<-unique(A$Date)
> for(date in alldates) {
>  # get indices for this date
>  date_indices<-which(A$Date == date)
>  # only mark the first 8 as TRUE
>  A$select[date_indices[1:8]]<-all(1:8 %in% A$ID[date_indices])
> }
> A
> A[A$select,]
>
> If you don't want to add a column you can set up "select" as a vector.
>
> Jim
>
> On Mon, Jun 21, 2021 at 6:18 PM Eric Berger <ericjberger at gmail.com> wrote:
> >
> > Hi Andr?,
> > It's not 100% clear to me what you are asking. I am interpreting the
> > question as selecting the data from those dates for which all of
> > 1,2,3,4,5,6,7,8 appear in the ID column.
> > My approach determines the dates satisfying this property, which I put
> into
> > a vector dtV. Then I take the rows of A for which the date is in the
> vector
> > dtV.
> >
> > library(dplyr)
> > dtV <- A %>% mutate(x=2^(ID-1)) %>% group_by(Date) %>%
> > summarise(y=(sum(unique(x))%%256==255)) %>% filter(y==TRUE) %>%
> select(Date)
> > B <- A[ A$Date %in% dtV$Date, ]
> >
> > B is the subset of A that you want.
> >
> > HTH,
> > Eric
> >
> >
> >
> > On Mon, Jun 21, 2021 at 10:23 AM Andr? Luis Neves <andrluis at ualberta.ca>
> > wrote:
> >
> > > Dear R users,
> > >
> > > I want to select only the data containing a continuous number of *ID*
> from
> > > 1-8 in each *DATE*. Note, I do not want to select data that do not
> contain
> > > a continuous number in *ID *from 1-8 (eg. Data on *DATE* 1/2/2020, and
> > > 01/03/2020). The dataset is a huge matrix with 24 columns and 1.5
> million
> > > rows, but I have prepared a reproducible code for your reference below.
> > >
> > > Here it is the reproducible code:
> > >
> > > A =
> > >
> > >
> data.frame(c("01/01/2020","01/01/2020","01/01/2020","01/01/2020","01/01/2020","01/01/2020","01/01/2020",
> > >
> > >
> > >
> "01/01/2020","01/01/2020","01/01/2020","01/01/2020","01/01/2020","01/02/2020","01/02/2020",
> > >
> > >
> > >
> "01/02/2020","01/02/2020","01/03/2020","01/03/2020","01/03/2020","01/03/2020","01/03/2020",
> > >
> > >
> > >
> "01/03/2020","01/03/2020","01/04/2020","01/04/2020","01/04/2020","01/04/2020","01/04/2020",
> > >                "01/04/2020","01/04/2020","01/04/2020","01/04/2020"),
> > > c(23,22,12,24,26,19,34,15,17,19,23,33,
> > >
> > >  23,34,25,23,25,24,34,33,31,32,24,22,21,23,22,22,21,23,23,21),
> > > c(13,11,12,9,8,9,7,10,11,9,6,11,
> > >                9,8,9,10,11,12,9,8,10,4,6,9,8,9,10,11,14,12,13,11),
> > > c(1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,1,2,
> > >                3,4,5,6,7,1,2,3,4,5,6,7,8,9))
> > > colnames(A) <- c("Date", "CO2", "CH4", "ID")
> > > A
> > >
> > > Thank you,
> > > --
> > > Andre
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> > >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>


-- 
Andre

	[[alternative HTML version deleted]]


From petr@p|k@| @end|ng |rom prechez@@cz  Tue Jun 22 10:36:18 2021
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Tue, 22 Jun 2021 08:36:18 +0000
Subject: [R] Question about .Rhistory in Windows
In-Reply-To: <BY5PR16MB3521A942F4E1CB8632C86569AA0A9@BY5PR16MB3521.namprd16.prod.outlook.com>
References: <BY5PR16MB3521A942F4E1CB8632C86569AA0A9@BY5PR16MB3521.namprd16.prod.outlook.com>
Message-ID: <dfd9d68216e84594ab6e4f3ae941a088@SRVEXCHCM1302.precheza.cz>

Hallo

I increased number of lines which .Rhistory stores before the lines start to
be overwritten.
You can do this by changing number in
Sys.setenv(R_HISTSIZE = 2000)
in Rprofile.site located in etc folder of your installation.

And from time to time I rename Rhistory to something like "210621.r"

Rhistory is plain text file so it can be viewed in any suitable text editor.

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Gabriel Toro
> Sent: Monday, June 21, 2021 10:16 PM
> To: r-help at r-project.org
> Subject: [R] Question about .Rhistory in Windows
> 
> I am using version 3.6.3 on Windows. For some reason, the .Rhistory file
gets
> over-written once in a while. I would like to avoid this so I have a
complete
> history over multiple R sessions. Under what conditions can the .Rhistory
file
> be over-written?  Is there a way to keep this file from being
over-written?
> Any change in the startup settings?
> 
> Thanks in advance,
> 
> Gabriel
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.

From thebudget72 @end|ng |rom gm@||@com  Tue Jun 22 15:25:40 2021
From: thebudget72 @end|ng |rom gm@||@com (Phillips Rogfield)
Date: Tue, 22 Jun 2021 15:25:40 +0200
Subject: [R] Wayland backend for R
Message-ID: <f9adeed8-5cce-72ae-1b55-96b8fde04e12@gmail.com>

I have compiled R from source and I had to install the X11 libraries.

I use Wayland, and I am having problems plotting on X11 (I guess it uses 
XWayland) with this version.

Is there a Wayland backend for R?

Some configuration option I need to turn on in order to use it?


From thebudget72 @end|ng |rom gm@||@com  Tue Jun 22 11:45:45 2021
From: thebudget72 @end|ng |rom gm@||@com (Philips Roger)
Date: Tue, 22 Jun 2021 11:45:45 +0200
Subject: [R] Mediation analysis takes up all RAM, then all swap,
 and then RStudio/terminal suddenly closes
Message-ID: <84753ba7-76f5-c36f-8f7f-485279b1eb23@gmail.com>

I am using the mediation <https://cran.r-project.org/package=mediation> 
package to run a mediation analysis.

But when I call the `mediate` function, R eats up all RAM, then it eats 
up all swap, and then RStudio suddenly closes.

The same happens if I call `Rscript` from the terminal, and the terminal 
suddenly closes.

Here is measures for RAM and swap. Notice the peaks:

RAM diagnostics

I have Fedora Worstation 24.

This happens BOTH with the R 4.0.5 that uses Open BLAS provided in the 
Fedora repository, and a custom R 4.1.0 I compiled from source linked 
against Intel MKL.

It doesn't seem to happen every time, some times (rarely), the RAM stays 
constant (around 40/50%) and it works (it takes a long time through).

What is the cause of this? How can I debug?


From bgunter@4567 @end|ng |rom gm@||@com  Tue Jun 22 17:50:21 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 22 Jun 2021 08:50:21 -0700
Subject: [R] Mediation analysis takes up all RAM, then all swap,
 and then RStudio/terminal suddenly closes
In-Reply-To: <84753ba7-76f5-c36f-8f7f-485279b1eb23@gmail.com>
References: <84753ba7-76f5-c36f-8f7f-485279b1eb23@gmail.com>
Message-ID: <CAGxFJbRhuxbn9Bi2riqHZqoO9Aope2XhC+T-3+p5NwZ7pqre1Q@mail.gmail.com>

Please read and follow the posting guide, linked below, which says:

"For questions about functions in standard packages distributed with R (see
the FAQ Add-on packages in R
<https://cran.r-project.org/doc/FAQ/R-FAQ.html#Add-on-packages-in-R>), ask
questions on R-help.
If the question relates to a *contributed package* , e.g., one downloaded
from CRAN, try contacting the package maintainer first. You can also use
find("functionname") and packageDescription("packagename") to find this
information. *Only* send such questions to R-help or R-devel if you get no
reply or need further assistance. This applies to both requests for help
and to bug reports."

So, while you *may* get a useful response here, you should contact the
maintainer. If you have already done so, please say so.

Another possibility that may be helpful is the Fedora SIG,
https://stat.ethz.ch/mailman/listinfo/r-sig-fedora , though of course I
have no idea whether your problem is OS specific.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Jun 22, 2021 at 8:38 AM Philips Roger <thebudget72 at gmail.com> wrote:

> I am using the mediation <https://cran.r-project.org/package=mediation>
> package to run a mediation analysis.
>
> But when I call the `mediate` function, R eats up all RAM, then it eats
> up all swap, and then RStudio suddenly closes.
>
> The same happens if I call `Rscript` from the terminal, and the terminal
> suddenly closes.
>
> Here is measures for RAM and swap. Notice the peaks:
>
> RAM diagnostics
>
> I have Fedora Worstation 24.
>
> This happens BOTH with the R 4.0.5 that uses Open BLAS provided in the
> Fedora repository, and a custom R 4.1.0 I compiled from source linked
> against Intel MKL.
>
> It doesn't seem to happen every time, some times (rarely), the RAM stays
> constant (around 40/50%) and it works (it takes a long time through).
>
> What is the cause of this? How can I debug?
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From p@u| @end|ng |rom @t@t@@uck|@nd@@c@nz  Wed Jun 23 02:22:12 2021
From: p@u| @end|ng |rom @t@t@@uck|@nd@@c@nz (Paul Murrell)
Date: Wed, 23 Jun 2021 12:22:12 +1200
Subject: [R] Wayland backend for R
In-Reply-To: <f9adeed8-5cce-72ae-1b55-96b8fde04e12@gmail.com>
References: <f9adeed8-5cce-72ae-1b55-96b8fde04e12@gmail.com>
Message-ID: <c08f31fe-fbe2-99bc-1eaf-31ff6a73ada0@stat.auckland.ac.nz>

Hi

I do not know of any Wayland backend for R.

You might be able to try the R Studio IDE configured for Wayland and see 
how its graphics device performs ?
https://github.com/rstudio/rstudio/issues/4686

Paul

On 23/06/21 1:25 am, Phillips Rogfield wrote:
> I have compiled R from source and I had to install the X11 libraries.
> 
> I use Wayland, and I am having problems plotting on X11 (I guess it uses
> XWayland) with this version.
> 
> Is there a Wayland backend for R?
> 
> Some configuration option I need to turn on in order to use it?
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help 
> <https://stat.ethz.ch/mailman/listinfo/r-help>
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html 
> <http://www.R-project.org/posting-guide.html>
> and provide commented, minimal, self-contained, reproducible code.

-- 
Dr Paul Murrell
Department of Statistics
The University of Auckland
Private Bag 92019
Auckland
New Zealand
64 9 3737599 x85392
paul at stat.auckland.ac.nz
http://www.stat.auckland.ac.nz/~paul/


From m|n@h@|| @end|ng |rom um|ch@edu  Wed Jun 23 14:37:59 2021
From: m|n@h@|| @end|ng |rom um|ch@edu (Greg Minshall)
Date: Wed, 23 Jun 2021 15:37:59 +0300
Subject: [R] interactively getting alist of functions for a given package?
Message-ID: <2766374.1624451879@apollo2.minshall.org>

hi.

at the R prompt, i often hit, e.g., "data.table::<TAB>", to try to find
a routine in a give package.

however, some packages have a *lot* of functions (i'm looking at *you*,
ggplot2...), so if i know the routine name starts with, e.g., "set", i
can filter the returned list of routines by typing
"data.table::set<TAB>" to get a list of completions.

but, what if i know the name *contains*, but doesn't start with, "set"?

is there an obvious way to find this?  something like the unix-y
: ls /bin | grep -i "set"
?

cheers, Greg


From bgunter@4567 @end|ng |rom gm@||@com  Wed Jun 23 15:46:57 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 23 Jun 2021 06:46:57 -0700
Subject: [R] 
 interactively getting alist of functions for a given package?
In-Reply-To: <2766374.1624451879@apollo2.minshall.org>
References: <2766374.1624451879@apollo2.minshall.org>
Message-ID: <CAGxFJbSEfTRhYLS4Qw4Jqv_Lv=hG6dhpreEeDS=y4Xuo2G3DkA@mail.gmail.com>

?ls  and note the "pattern" argument.

e.g.

ls("package:base", pat =".*set.*")

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Jun 23, 2021 at 5:38 AM Greg Minshall <minshall at umich.edu> wrote:

> hi.
>
> at the R prompt, i often hit, e.g., "data.table::<TAB>", to try to find
> a routine in a give package.
>
> however, some packages have a *lot* of functions (i'm looking at *you*,
> ggplot2...), so if i know the routine name starts with, e.g., "set", i
> can filter the returned list of routines by typing
> "data.table::set<TAB>" to get a list of completions.
>
> but, what if i know the name *contains*, but doesn't start with, "set"?
>
> is there an obvious way to find this?  something like the unix-y
> : ls /bin | grep -i "set"
> ?
>
> cheers, Greg
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From thebudget72 @end|ng |rom gm@||@com  Wed Jun 23 17:00:37 2021
From: thebudget72 @end|ng |rom gm@||@com (Phillips Rogfield)
Date: Wed, 23 Jun 2021 17:00:37 +0200
Subject: [R] Wayland backend for R
In-Reply-To: <c08f31fe-fbe2-99bc-1eaf-31ff6a73ada0@stat.auckland.ac.nz>
References: <f9adeed8-5cce-72ae-1b55-96b8fde04e12@gmail.com>
 <c08f31fe-fbe2-99bc-1eaf-31ff6a73ada0@stat.auckland.ac.nz>
Message-ID: <b5696dc5-b4db-2260-94ca-08dfab069d37@gmail.com>

Hello Paul,

thank you for your kind advice.

RStudio doesn't start at all this way. It gives me the following error:

$ QT_QPA_PLATFORM=wayland rstudio
Warning: Ignoring XDG_SESSION_TYPE=wayland on Gnome. Use 
QT_QPA_PLATFORM=wayland to run on Wayland anyway.
QSocketNotifier: Can only be used with threads started with QThread
Failed to load client buffer integration: wayland-egl

WebEngineContext used before QtWebEngine::initialize() or OpenGL context 
creation failed.
qt.qpa.wayland: No shell integration named "xdg-shell" found
qt.qpa.wayland: No shell integration named "xdg-shell-v6" found
qt.qpa.wayland: No shell integration named "wl-shell" found
qt.qpa.wayland: No shell integration named "ivi-shell" found
qt.qpa.wayland: Loading shell integration failed.
qt.qpa.wayland: Attempted to load the following shells ("xdg-shell", 
"xdg-shell-v6", "wl-shell", "ivi-shell")
qt.qpa.wayland: Wayland does not support QWindow::requestActivate()

Best regards.

On 23/06/2021 02:22, Paul Murrell wrote:
> Hi
>
> I do not know of any Wayland backend for R.
>
> You might be able to try the R Studio IDE configured for Wayland and 
> see how its graphics device performs ?
> https://github.com/rstudio/rstudio/issues/4686
>
> Paul
>
> On 23/06/21 1:25 am, Phillips Rogfield wrote:
>> I have compiled R from source and I had to install the X11 libraries.
>>
>> I use Wayland, and I am having problems plotting on X11 (I guess it uses
>> XWayland) with this version.
>>
>> Is there a Wayland backend for R?
>>
>> Some configuration option I need to turn on in order to use it?
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help 
>> <https://stat.ethz.ch/mailman/listinfo/r-help>
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html 
>> <http://www.R-project.org/posting-guide.html>
>> and provide commented, minimal, self-contained, reproducible code.
>


From thebudget72 @end|ng |rom gm@||@com  Wed Jun 23 17:01:45 2021
From: thebudget72 @end|ng |rom gm@||@com (Phillips Rogfield)
Date: Wed, 23 Jun 2021 17:01:45 +0200
Subject: [R] Mediation analysis takes up all RAM, then all swap,
 and then RStudio/terminal suddenly closes
In-Reply-To: <CAGxFJbRhuxbn9Bi2riqHZqoO9Aope2XhC+T-3+p5NwZ7pqre1Q@mail.gmail.com>
References: <84753ba7-76f5-c36f-8f7f-485279b1eb23@gmail.com>
 <CAGxFJbRhuxbn9Bi2riqHZqoO9Aope2XhC+T-3+p5NwZ7pqre1Q@mail.gmail.com>
Message-ID: <84ec7b24-216c-cf9f-2c27-889164c647fc@gmail.com>

Hello Bert,

thank you for your kinds answer.

No I didn't contact the maintainer of the package first, that's my fault :)

I have come to the conclusion that the problem is that I don't have 
enough resources on my PC (RAM) for the task at hand.

I have tried to run it on a remote VM with more RAM and seems to work.

Best regards

On 22/06/2021 17:50, Bert Gunter wrote:
> Please read and follow the posting guide, linked below, which says:
>
> "For questions about functions in standard packages distributed with R 
> (see the FAQ Add-on packages in R 
> <https://cran.r-project.org/doc/FAQ/R-FAQ.html#Add-on-packages-in-R>), 
> ask questions on R-help.
> If the question relates to a /contributed package/ , e.g., one 
> downloaded from CRAN, try contacting the package maintainer first. You 
> can also use |find("functionname")| and 
> |packageDescription("packagename")| to find this information. *Only* 
> send such questions to R-help or R-devel if you get no reply or need 
> further assistance. This applies to both requests for help and to bug 
> reports."
>
> So, while you *may* get a useful response here, you should contact the 
> maintainer. If you have already done so, please say so.
>
> Another possibility that may be helpful is the Fedora SIG, 
> https://stat.ethz.ch/mailman/listinfo/r-sig-fedora 
> <https://stat.ethz.ch/mailman/listinfo/r-sig-fedora> , though of 
> course I have no idea whether your problem is OS specific.
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along 
> and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Tue, Jun 22, 2021 at 8:38 AM Philips Roger <thebudget72 at gmail.com 
> <mailto:thebudget72 at gmail.com>> wrote:
>
>     I am using the mediation
>     <https://cran.r-project.org/package=mediation
>     <https://cran.r-project.org/package=mediation>>
>     package to run a mediation analysis.
>
>     But when I call the `mediate` function, R eats up all RAM, then it
>     eats
>     up all swap, and then RStudio suddenly closes.
>
>     The same happens if I call `Rscript` from the terminal, and the
>     terminal
>     suddenly closes.
>
>     Here is measures for RAM and swap. Notice the peaks:
>
>     RAM diagnostics
>
>     I have Fedora Worstation 24.
>
>     This happens BOTH with the R 4.0.5 that uses Open BLAS provided in
>     the
>     Fedora repository, and a custom R 4.1.0 I compiled from source linked
>     against Intel MKL.
>
>     It doesn't seem to happen every time, some times (rarely), the RAM
>     stays
>     constant (around 40/50%) and it works (it takes a long time through).
>
>     What is the cause of this? How can I debug?
>
>     ______________________________________________
>     R-help at r-project.org <mailto:R-help at r-project.org> mailing list --
>     To UNSUBSCRIBE and more, see
>     https://stat.ethz.ch/mailman/listinfo/r-help
>     <https://stat.ethz.ch/mailman/listinfo/r-help>
>     PLEASE do read the posting guide
>     http://www.R-project.org/posting-guide.html
>     <http://www.R-project.org/posting-guide.html>
>     and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From thebudget72 @end|ng |rom gm@||@com  Wed Jun 23 17:06:05 2021
From: thebudget72 @end|ng |rom gm@||@com (Phillips Rogfield)
Date: Wed, 23 Jun 2021 17:06:05 +0200
Subject: [R] How to spot/stop making the same mistake
Message-ID: <c8708247-6875-dbff-ede0-db7ed5297c3d@gmail.com>

I make the same mistake all over again.

In particular, suppose we have:

a = c(1,2,3,4,5)

and a variable that equals 1 for the elements I want to select:

t = c(1,1,1,0,0)

To select the first 3 elements.

The problem is that

a[t]

would repeat the first element 3 times .....

I have to either convert `t` to boolean:

a[t==1]

Or use `which`

a[which(t==1)]

How can I "spot" this error?

It often happens in long scripts.

Do I have to check the type each time?

Do you have any suggestions?


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Jun 23 17:18:15 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 23 Jun 2021 08:18:15 -0700
Subject: [R] How to spot/stop making the same mistake
In-Reply-To: <c8708247-6875-dbff-ede0-db7ed5297c3d@gmail.com>
References: <c8708247-6875-dbff-ede0-db7ed5297c3d@gmail.com>
Message-ID: <111D9868-923F-4BA6-9200-7F76A6A87F4A@dcn.davis.ca.us>

I practically never construct vectors like your `t` so it isn't a problem. And since I make a habit of verifying the types of all vectors I am using in expressions, if it did come up I would notice.

On June 23, 2021 8:06:05 AM PDT, Phillips Rogfield <thebudget72 at gmail.com> wrote:
>I make the same mistake all over again.
>
>In particular, suppose we have:
>
>a = c(1,2,3,4,5)
>
>and a variable that equals 1 for the elements I want to select:
>
>t = c(1,1,1,0,0)
>
>To select the first 3 elements.
>
>The problem is that
>
>a[t]
>
>would repeat the first element 3 times .....
>
>I have to either convert `t` to boolean:
>
>a[t==1]
>
>Or use `which`
>
>a[which(t==1)]
>
>How can I "spot" this error?
>
>It often happens in long scripts.
>
>Do I have to check the type each time?
>
>Do you have any suggestions?
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From er|cjberger @end|ng |rom gm@||@com  Wed Jun 23 17:26:50 2021
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Wed, 23 Jun 2021 18:26:50 +0300
Subject: [R] How to spot/stop making the same mistake
In-Reply-To: <c8708247-6875-dbff-ede0-db7ed5297c3d@gmail.com>
References: <c8708247-6875-dbff-ede0-db7ed5297c3d@gmail.com>
Message-ID: <CAGgJW74x=7Q_ZN4YxLjxEZQebUo=xeB=wRTR_ZxBCc=T49d2YA@mail.gmail.com>

In my code, instead of 't', I name a vector of indices with a meaningful
name, such as idxV, to make it obvious.

Alternatively, a minor change in your style would be to replace your
definition of t by

t <- as.logical(c(1,1,1,0,0))

HTH,
Eric


On Wed, Jun 23, 2021 at 6:11 PM Phillips Rogfield <thebudget72 at gmail.com>
wrote:

> I make the same mistake all over again.
>
> In particular, suppose we have:
>
> a = c(1,2,3,4,5)
>
> and a variable that equals 1 for the elements I want to select:
>
> t = c(1,1,1,0,0)
>
> To select the first 3 elements.
>
> The problem is that
>
> a[t]
>
> would repeat the first element 3 times .....
>
> I have to either convert `t` to boolean:
>
> a[t==1]
>
> Or use `which`
>
> a[which(t==1)]
>
> How can I "spot" this error?
>
> It often happens in long scripts.
>
> Do I have to check the type each time?
>
> Do you have any suggestions?
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From m|n@h@|| @end|ng |rom um|ch@edu  Wed Jun 23 17:31:15 2021
From: m|n@h@|| @end|ng |rom um|ch@edu (Greg Minshall)
Date: Wed, 23 Jun 2021 18:31:15 +0300
Subject: [R] 
 interactively getting alist of functions for a given package?
In-Reply-To: Your message of "Wed, 23 Jun 2021 06:46:57 -0700."
 <CAGxFJbSEfTRhYLS4Qw4Jqv_Lv=hG6dhpreEeDS=y4Xuo2G3DkA@mail.gmail.com>
Message-ID: <2792252.1624462275@apollo2.minshall.org>

Bert,

> ?ls  and note the "pattern" argument.
...
> ls("package:base", pat =".*set.*")

awesome -- thanks!

cheers, Greg


From w||||@mwdun|@p @end|ng |rom gm@||@com  Wed Jun 23 17:39:57 2021
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Wed, 23 Jun 2021 08:39:57 -0700
Subject: [R] How to spot/stop making the same mistake
In-Reply-To: <c8708247-6875-dbff-ede0-db7ed5297c3d@gmail.com>
References: <c8708247-6875-dbff-ede0-db7ed5297c3d@gmail.com>
Message-ID: <CAHqSRuQEpjc_udPDvKkB524SUV7xXMPChTx_5iYKxwDhYUPyHA@mail.gmail.com>

> a variable that equals 1 for the elements I want to select:
>
> t = c(1,1,1,0,0)

How do you typically make such a variable?   If you use something like
   t <- ifelse(x == "Yes", 1, 0)
you should instead use
   t <- x == "Yes"

Naming the variable something like 'isYes' instead of 't' might help as
well.

-Bill

On Wed, Jun 23, 2021 at 8:11 AM Phillips Rogfield <thebudget72 at gmail.com>
wrote:

> I make the same mistake all over again.
>
> In particular, suppose we have:
>
> a = c(1,2,3,4,5)
>
> and a variable that equals 1 for the elements I want to select:
>
> t = c(1,1,1,0,0)
>
> To select the first 3 elements.
>
> The problem is that
>
> a[t]
>
> would repeat the first element 3 times .....
>
> I have to either convert `t` to boolean:
>
> a[t==1]
>
> Or use `which`
>
> a[which(t==1)]
>
> How can I "spot" this error?
>
> It often happens in long scripts.
>
> Do I have to check the type each time?
>
> Do you have any suggestions?
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @v|gro@@ @end|ng |rom ver|zon@net  Wed Jun 23 17:45:25 2021
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Wed, 23 Jun 2021 11:45:25 -0400
Subject: [R] How to spot/stop making the same mistake
In-Reply-To: <111D9868-923F-4BA6-9200-7F76A6A87F4A@dcn.davis.ca.us>
References: <c8708247-6875-dbff-ede0-db7ed5297c3d@gmail.com>
 <111D9868-923F-4BA6-9200-7F76A6A87F4A@dcn.davis.ca.us>
Message-ID: <010801d76846$c93df800$5bb9e800$@verizon.net>

This is unfortunately a bad habit many of us got from earlier languages like
the C group of languages where 0 is FALSE and 1 (and anything non-zero) is
TRUE. A language like Python is arguably even worse in that all kinds of
things can be TRUE or FALSE in odd ways, like a non-empty string or even a
random object which has declared how to decide if it qualifies as true.

R here has an issue with having so many ways to index a vector so that use
of integers has another meaning and only indexing by Booleans has the
meaning you want. So, you just need to adjust your mindset or perhaps write
a little silly function like ensure_boolean() that checks if the vector it
has is ALL just full of zero or 1 with probably no NA and otherwise returns
the vector unchanged. If it is all 0/1, it converts it and returns the
Boolean equivalent. Then instead of supplying the vector directly, most of
the time, you can substitute ensure_boolean(vec) ....


-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Jeff Newmiller
Sent: Wednesday, June 23, 2021 11:18 AM
To: r-help at r-project.org; Phillips Rogfield <thebudget72 at gmail.com>;
r-help at r-project.org
Subject: Re: [R] How to spot/stop making the same mistake

I practically never construct vectors like your `t` so it isn't a problem.
And since I make a habit of verifying the types of all vectors I am using in
expressions, if it did come up I would notice.

On June 23, 2021 8:06:05 AM PDT, Phillips Rogfield <thebudget72 at gmail.com>
wrote:
>I make the same mistake all over again.
>
>In particular, suppose we have:
>
>a = c(1,2,3,4,5)
>
>and a variable that equals 1 for the elements I want to select:
>
>t = c(1,1,1,0,0)
>
>To select the first 3 elements.
>
>The problem is that
>
>a[t]
>
>would repeat the first element 3 times .....
>
>I have to either convert `t` to boolean:
>
>a[t==1]
>
>Or use `which`
>
>a[which(t==1)]
>
>How can I "spot" this error?
>
>It often happens in long scripts.
>
>Do I have to check the type each time?
>
>Do you have any suggestions?
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

--
Sent from my phone. Please excuse my brevity.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Wed Jun 23 17:55:42 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 23 Jun 2021 08:55:42 -0700
Subject: [R] How to spot/stop making the same mistake
In-Reply-To: <CAGgJW74x=7Q_ZN4YxLjxEZQebUo=xeB=wRTR_ZxBCc=T49d2YA@mail.gmail.com>
References: <c8708247-6875-dbff-ede0-db7ed5297c3d@gmail.com>
 <CAGgJW74x=7Q_ZN4YxLjxEZQebUo=xeB=wRTR_ZxBCc=T49d2YA@mail.gmail.com>
Message-ID: <CAGxFJbScLrkn42Q0bZfrxiXkT7RZ_+wHWbsK+dT4nzVCbrvBtg@mail.gmail.com>

Just as a way to save a bit of typing, instead of

> as.logical(0:4)
[1] FALSE  TRUE  TRUE  TRUE  TRUE

> !!(0:4)
[1] FALSE  TRUE  TRUE  TRUE  TRUE

DO NOTE that the parentheses in the second expression should never be
omitted, a possible reason to prefer the as.logical() construction.
Also note that !!  "acts [only] on raw, logical and number-like vectors,"
whereas as.logical() is more general. e.g. (from ?logical):

> charvec <- c("FALSE", "F", "False", "false",    "fAlse", "0",
+              "TRUE",  "T", "True",  "true",     "tRue",  "1")
> as.logical(charvec)
 [1] FALSE FALSE FALSE FALSE    NA    NA  TRUE  TRUE  TRUE  TRUE    NA    NA
> !!charvec
Error in !charvec : invalid argument type


Cheers,
Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Jun 23, 2021 at 8:31 AM Eric Berger <ericjberger at gmail.com> wrote:

> In my code, instead of 't', I name a vector of indices with a meaningful
> name, such as idxV, to make it obvious.
>
> Alternatively, a minor change in your style would be to replace your
> definition of t by
>
> t <- as.logical(c(1,1,1,0,0))
>
> HTH,
> Eric
>
>
> On Wed, Jun 23, 2021 at 6:11 PM Phillips Rogfield <thebudget72 at gmail.com>
> wrote:
>
> > I make the same mistake all over again.
> >
> > In particular, suppose we have:
> >
> > a = c(1,2,3,4,5)
> >
> > and a variable that equals 1 for the elements I want to select:
> >
> > t = c(1,1,1,0,0)
> >
> > To select the first 3 elements.
> >
> > The problem is that
> >
> > a[t]
> >
> > would repeat the first element 3 times .....
> >
> > I have to either convert `t` to boolean:
> >
> > a[t==1]
> >
> > Or use `which`
> >
> > a[which(t==1)]
> >
> > How can I "spot" this error?
> >
> > It often happens in long scripts.
> >
> > Do I have to check the type each time?
> >
> > Do you have any suggestions?
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Jun 23 19:10:07 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 23 Jun 2021 13:10:07 -0400
Subject: [R] 
 interactively getting alist of functions for a given package?
In-Reply-To: <2766374.1624451879@apollo2.minshall.org>
References: <2766374.1624451879@apollo2.minshall.org>
Message-ID: <59fe3cb4-6439-3763-1532-2a24a91777cf@gmail.com>

On 23/06/2021 8:37 a.m., Greg Minshall wrote:
> hi.
> 
> at the R prompt, i often hit, e.g., "data.table::<TAB>", to try to find
> a routine in a give package.
> 
> however, some packages have a *lot* of functions (i'm looking at *you*,
> ggplot2...), so if i know the routine name starts with, e.g., "set", i
> can filter the returned list of routines by typing
> "data.table::set<TAB>" to get a list of completions.
> 
> but, what if i know the name *contains*, but doesn't start with, "set"?
> 
> is there an obvious way to find this?  something like the unix-y
> : ls /bin | grep -i "set"

Bert gave you an answer that depends on ls().  Whether there's something 
like "set<TAB>" that can return "asset" probably depends on your front 
end, and may be customizable using the facilities described in ?rcompgen.

Duncan Murdoch


From thebudget72 @end|ng |rom gm@||@com  Wed Jun 23 19:35:50 2021
From: thebudget72 @end|ng |rom gm@||@com (Phillips Rogfield)
Date: Wed, 23 Jun 2021 19:35:50 +0200
Subject: [R] Plot NUTS regions with color
Message-ID: <9e5e413c-e5c3-b489-2ce6-f90341cdfffc@gmail.com>

Dear R-help ML,

I have downloaded the NUTS shapefiles from here: 
https://ec.europa.eu/eurostat/web/gisco/geodata/reference-data/administrative-units-statistical-units/nuts

I can load them with the following code:

    library(rgdal)
    shp_bdir <- [PATH TO SHAPE FILE]
    layername <- "NUTS_RG_01M_2021_4326"
    shp_folder <- file.path(shp_bdir, paste0(layername,".shp"))
    EU_NUTS <- readOGR(dsn = shp_folder, layer = layername)

Then I can plot the regions with:

    plot(EU_NUTS)

Now I have a list of NUTS - 3 Level, for example:

    l <- c("AT223", "AT212", "AT212", "AT121")

I would like a plot where the NUTS regions are colored, and the more a 
particular NUTS is present is the list, the darker its color.

For example "AT212" should be darker than "AT223", because the former is 
present two times in the list.

How can I achieve that?

Thank you and best regards.


	[[alternative HTML version deleted]]


From thebudget72 @end|ng |rom gm@||@com  Wed Jun 23 19:39:07 2021
From: thebudget72 @end|ng |rom gm@||@com (Phillips Rogfield)
Date: Wed, 23 Jun 2021 19:39:07 +0200
Subject: [R] How to spot/stop making the same mistake
In-Reply-To: <CAGxFJbScLrkn42Q0bZfrxiXkT7RZ_+wHWbsK+dT4nzVCbrvBtg@mail.gmail.com>
References: <c8708247-6875-dbff-ede0-db7ed5297c3d@gmail.com>
 <CAGgJW74x=7Q_ZN4YxLjxEZQebUo=xeB=wRTR_ZxBCc=T49d2YA@mail.gmail.com>
 <CAGxFJbScLrkn42Q0bZfrxiXkT7RZ_+wHWbsK+dT4nzVCbrvBtg@mail.gmail.com>
Message-ID: <9e468a2e-1aba-d4f0-dc75-67e52f3f1a4a@gmail.com>

Dear all,

thank for for your suggestion.

Yes I come from languages where 1 means TRUE and 0 means FALSE. In 
particular from C/C++ and Python.

Evidently this is not the case for R.

In my mind I kind took for granted that that was the case (1=TRUE, 0=FALSE).

Knowing this is not the case for R makes things simpler.

Mine was just an example, sometimes I load datasets taken from outside 
and variables are coded with 1/0 (for example, a treatment variable may 
be coded that way).

I also did not know the !!() syntax!

Thank you for your help and best regards.

On 23/06/2021 17:55, Bert Gunter wrote:
> Just as a way to save a bit of typing, instead of
>
> > as.logical(0:4)
> [1] FALSE ?TRUE ?TRUE ?TRUE ?TRUE
>
> > !!(0:4)
> [1] FALSE ?TRUE ?TRUE ?TRUE ?TRUE
>
> DO NOTE that the parentheses in the second expression should never be 
> omitted, a possible reason to prefer the as.logical() construction.
> Also note that !!? "acts [only] on raw, logical and number-like 
> vectors," whereas as.logical() is more general. e.g. (from ?logical):
>
> > charvec <- c("FALSE", "F", "False", "false", ? ?"fAlse", "0",
> + ? ? ? ? ? ? ?"TRUE", ?"T", "True", ?"true", ? ? "tRue", ?"1")
> > as.logical(charvec)
> ?[1] FALSE FALSE FALSE FALSE ? ?NA ? ?NA ?TRUE ?TRUE ?TRUE ?TRUE ? ?NA 
> ? ?NA
> > !!charvec
> Error in !charvec : invalid argument type
>
>
> Cheers,
> Bert
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along 
> and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Wed, Jun 23, 2021 at 8:31 AM Eric Berger <ericjberger at gmail.com 
> <mailto:ericjberger at gmail.com>> wrote:
>
>     In my code, instead of 't', I name a vector of indices with a
>     meaningful
>     name, such as idxV, to make it obvious.
>
>     Alternatively, a minor change in your style would be to replace your
>     definition of t by
>
>     t <- as.logical(c(1,1,1,0,0))
>
>     HTH,
>     Eric
>
>
>     On Wed, Jun 23, 2021 at 6:11 PM Phillips Rogfield
>     <thebudget72 at gmail.com <mailto:thebudget72 at gmail.com>>
>     wrote:
>
>     > I make the same mistake all over again.
>     >
>     > In particular, suppose we have:
>     >
>     > a = c(1,2,3,4,5)
>     >
>     > and a variable that equals 1 for the elements I want to select:
>     >
>     > t = c(1,1,1,0,0)
>     >
>     > To select the first 3 elements.
>     >
>     > The problem is that
>     >
>     > a[t]
>     >
>     > would repeat the first element 3 times .....
>     >
>     > I have to either convert `t` to boolean:
>     >
>     > a[t==1]
>     >
>     > Or use `which`
>     >
>     > a[which(t==1)]
>     >
>     > How can I "spot" this error?
>     >
>     > It often happens in long scripts.
>     >
>     > Do I have to check the type each time?
>     >
>     > Do you have any suggestions?
>     >
>     > ______________________________________________
>     > R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>     -- To UNSUBSCRIBE and more, see
>     > https://stat.ethz.ch/mailman/listinfo/r-help
>     <https://stat.ethz.ch/mailman/listinfo/r-help>
>     > PLEASE do read the posting guide
>     > http://www.R-project.org/posting-guide.html
>     <http://www.R-project.org/posting-guide.html>
>     > and provide commented, minimal, self-contained, reproducible code.
>     >
>
>     ? ? ? ? [[alternative HTML version deleted]]
>
>     ______________________________________________
>     R-help at r-project.org <mailto:R-help at r-project.org> mailing list --
>     To UNSUBSCRIBE and more, see
>     https://stat.ethz.ch/mailman/listinfo/r-help
>     <https://stat.ethz.ch/mailman/listinfo/r-help>
>     PLEASE do read the posting guide
>     http://www.R-project.org/posting-guide.html
>     <http://www.R-project.org/posting-guide.html>
>     and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From |@heemj@n93 @end|ng |rom y@hoo@com  Wed Jun 23 20:03:17 2021
From: |@heemj@n93 @end|ng |rom y@hoo@com (Faheem Jan)
Date: Wed, 23 Jun 2021 18:03:17 +0000 (UTC)
Subject: [R] Mean absolute error from data matrix
References: <1417157111.4007803.1624471397971.ref@mail.yahoo.com>
Message-ID: <1417157111.4007803.1624471397971@mail.yahoo.com>

I have data matrix of order 24*2192 where 2192 are the days and 24 are hour's of a single day,so simple words I have 2192 days and each day having 24 observations.the data matrix is divided into two matrix,the ist matrix is of order 24*1827 and second is of order 24*365. Suppose the ist column of the second matrix is Sunday then we choose each column of the first matrix having Sunday. The takeing the first column of data matrix is converted into vector and all the Sunday columns are converted into vectors. Then we calculate mean absolute errors for different pairs of the first vector of the second matrix with each vector of first matrix. Similarly process is repeated for the rest of the week days. It clear that such process is quite time consuming and hard if perform manually. Can any one provides the easiest way to do such problem.Regard?

Sent from Yahoo Mail on Android
	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Jun 23 20:09:44 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 23 Jun 2021 11:09:44 -0700
Subject: [R] How to spot/stop making the same mistake
In-Reply-To: <9e468a2e-1aba-d4f0-dc75-67e52f3f1a4a@gmail.com>
References: <c8708247-6875-dbff-ede0-db7ed5297c3d@gmail.com>
 <CAGgJW74x=7Q_ZN4YxLjxEZQebUo=xeB=wRTR_ZxBCc=T49d2YA@mail.gmail.com>
 <CAGxFJbScLrkn42Q0bZfrxiXkT7RZ_+wHWbsK+dT4nzVCbrvBtg@mail.gmail.com>
 <9e468a2e-1aba-d4f0-dc75-67e52f3f1a4a@gmail.com>
Message-ID: <7CEAE6B1-7490-4EBB-AD81-D498C0B91E5F@dcn.davis.ca.us>

For the record, `!!` is not an operator so it does not "operate" on anything. The right ! does per the help page (?`!`) interpret non-zero values as TRUE and invert that logic, yielding a logical result even if the input is not logical. The left ! inverts that again, yielding a logical vector without the inversion.

On June 23, 2021 10:39:07 AM PDT, Phillips Rogfield <thebudget72 at gmail.com> wrote:
>Dear all,
>
>thank for for your suggestion.
>
>Yes I come from languages where 1 means TRUE and 0 means FALSE. In 
>particular from C/C++ and Python.
>
>Evidently this is not the case for R.
>
>In my mind I kind took for granted that that was the case (1=TRUE,
>0=FALSE).
>
>Knowing this is not the case for R makes things simpler.
>
>Mine was just an example, sometimes I load datasets taken from outside 
>and variables are coded with 1/0 (for example, a treatment variable may
>
>be coded that way).
>
>I also did not know the !!() syntax!
>
>Thank you for your help and best regards.
>
>On 23/06/2021 17:55, Bert Gunter wrote:
>> Just as a way to save a bit of typing, instead of
>>
>> > as.logical(0:4)
>> [1] FALSE ?TRUE ?TRUE ?TRUE ?TRUE
>>
>> > !!(0:4)
>> [1] FALSE ?TRUE ?TRUE ?TRUE ?TRUE
>>
>> DO NOTE that the parentheses in the second expression should never be
>
>> omitted, a possible reason to prefer the as.logical() construction.
>> Also note that !!? "acts [only] on raw, logical and number-like 
>> vectors," whereas as.logical() is more general. e.g. (from ?logical):
>>
>> > charvec <- c("FALSE", "F", "False", "false", ? ?"fAlse", "0",
>> + ? ? ? ? ? ? ?"TRUE", ?"T", "True", ?"true", ? ? "tRue", ?"1")
>> > as.logical(charvec)
>> ?[1] FALSE FALSE FALSE FALSE ? ?NA ? ?NA ?TRUE ?TRUE ?TRUE ?TRUE ?
>?NA 
>> ? ?NA
>> > !!charvec
>> Error in !charvec : invalid argument type
>>
>>
>> Cheers,
>> Bert
>>
>> Bert Gunter
>>
>> "The trouble with having an open mind is that people keep coming
>along 
>> and sticking things into it."
>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>
>>
>> On Wed, Jun 23, 2021 at 8:31 AM Eric Berger <ericjberger at gmail.com 
>> <mailto:ericjberger at gmail.com>> wrote:
>>
>>     In my code, instead of 't', I name a vector of indices with a
>>     meaningful
>>     name, such as idxV, to make it obvious.
>>
>>     Alternatively, a minor change in your style would be to replace
>your
>>     definition of t by
>>
>>     t <- as.logical(c(1,1,1,0,0))
>>
>>     HTH,
>>     Eric
>>
>>
>>     On Wed, Jun 23, 2021 at 6:11 PM Phillips Rogfield
>>     <thebudget72 at gmail.com <mailto:thebudget72 at gmail.com>>
>>     wrote:
>>
>>     > I make the same mistake all over again.
>>     >
>>     > In particular, suppose we have:
>>     >
>>     > a = c(1,2,3,4,5)
>>     >
>>     > and a variable that equals 1 for the elements I want to select:
>>     >
>>     > t = c(1,1,1,0,0)
>>     >
>>     > To select the first 3 elements.
>>     >
>>     > The problem is that
>>     >
>>     > a[t]
>>     >
>>     > would repeat the first element 3 times .....
>>     >
>>     > I have to either convert `t` to boolean:
>>     >
>>     > a[t==1]
>>     >
>>     > Or use `which`
>>     >
>>     > a[which(t==1)]
>>     >
>>     > How can I "spot" this error?
>>     >
>>     > It often happens in long scripts.
>>     >
>>     > Do I have to check the type each time?
>>     >
>>     > Do you have any suggestions?
>>     >
>>     > ______________________________________________
>>     > R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>>     -- To UNSUBSCRIBE and more, see
>>     > https://stat.ethz.ch/mailman/listinfo/r-help
>>     <https://stat.ethz.ch/mailman/listinfo/r-help>
>>     > PLEASE do read the posting guide
>>     > http://www.R-project.org/posting-guide.html
>>     <http://www.R-project.org/posting-guide.html>
>>     > and provide commented, minimal, self-contained, reproducible
>code.
>>     >
>>
>>     ? ? ? ? [[alternative HTML version deleted]]
>>
>>     ______________________________________________
>>     R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>--
>>     To UNSUBSCRIBE and more, see
>>     https://stat.ethz.ch/mailman/listinfo/r-help
>>     <https://stat.ethz.ch/mailman/listinfo/r-help>
>>     PLEASE do read the posting guide
>>     http://www.R-project.org/posting-guide.html
>>     <http://www.R-project.org/posting-guide.html>
>>     and provide commented, minimal, self-contained, reproducible
>code.
>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From bobby@kn|ght @end|ng |rom gm@||@com  Wed Jun 23 20:26:37 2021
From: bobby@kn|ght @end|ng |rom gm@||@com (Robert Knight)
Date: Wed, 23 Jun 2021 13:26:37 -0500
Subject: [R] Wayland backend for R
In-Reply-To: <b5696dc5-b4db-2260-94ca-08dfab069d37@gmail.com>
References: <f9adeed8-5cce-72ae-1b55-96b8fde04e12@gmail.com>
 <c08f31fe-fbe2-99bc-1eaf-31ff6a73ada0@stat.auckland.ac.nz>
 <b5696dc5-b4db-2260-94ca-08dfab069d37@gmail.com>
Message-ID: <CAKBFG3YJRmUQ8AZ3PqO3Xu-pCuRt73U+aGnhPrKOW3v-W6Tj3Q@mail.gmail.com>

Perhaps software rendering would work.

Export RSTUDIO_CHROMIUM_ARGUMENTS="--disable-gpu"

/usr/lib/rstudio/bin/rstudio


On Wed, Jun 23, 2021, 10:01 AM Phillips Rogfield <thebudget72 at gmail.com>
wrote:

> Hello Paul,
>
> thank you for your kind advice.
>
> RStudio doesn't start at all this way. It gives me the following error:
>
> $ QT_QPA_PLATFORM=wayland rstudio
> Warning: Ignoring XDG_SESSION_TYPE=wayland on Gnome. Use
> QT_QPA_PLATFORM=wayland to run on Wayland anyway.
> QSocketNotifier: Can only be used with threads started with QThread
> Failed to load client buffer integration: wayland-egl
>
> WebEngineContext used before QtWebEngine::initialize() or OpenGL context
> creation failed.
> qt.qpa.wayland: No shell integration named "xdg-shell" found
> qt.qpa.wayland: No shell integration named "xdg-shell-v6" found
> qt.qpa.wayland: No shell integration named "wl-shell" found
> qt.qpa.wayland: No shell integration named "ivi-shell" found
> qt.qpa.wayland: Loading shell integration failed.
> qt.qpa.wayland: Attempted to load the following shells ("xdg-shell",
> "xdg-shell-v6", "wl-shell", "ivi-shell")
> qt.qpa.wayland: Wayland does not support QWindow::requestActivate()
>
> Best regards.
>
> On 23/06/2021 02:22, Paul Murrell wrote:
> > Hi
> >
> > I do not know of any Wayland backend for R.
> >
> > You might be able to try the R Studio IDE configured for Wayland and
> > see how its graphics device performs ?
> > https://github.com/rstudio/rstudio/issues/4686
> >
> > Paul
> >
> > On 23/06/21 1:25 am, Phillips Rogfield wrote:
> >> I have compiled R from source and I had to install the X11 libraries.
> >>
> >> I use Wayland, and I am having problems plotting on X11 (I guess it uses
> >> XWayland) with this version.
> >>
> >> Is there a Wayland backend for R?
> >>
> >> Some configuration option I need to turn on in order to use it?
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> <https://stat.ethz.ch/mailman/listinfo/r-help>
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> <http://www.R-project.org/posting-guide.html>
> >> and provide commented, minimal, self-contained, reproducible code.
> >
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From w||||@mwdun|@p @end|ng |rom gm@||@com  Wed Jun 23 20:27:38 2021
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Wed, 23 Jun 2021 11:27:38 -0700
Subject: [R] How to spot/stop making the same mistake
In-Reply-To: <7CEAE6B1-7490-4EBB-AD81-D498C0B91E5F@dcn.davis.ca.us>
References: <c8708247-6875-dbff-ede0-db7ed5297c3d@gmail.com>
 <CAGgJW74x=7Q_ZN4YxLjxEZQebUo=xeB=wRTR_ZxBCc=T49d2YA@mail.gmail.com>
 <CAGxFJbScLrkn42Q0bZfrxiXkT7RZ_+wHWbsK+dT4nzVCbrvBtg@mail.gmail.com>
 <9e468a2e-1aba-d4f0-dc75-67e52f3f1a4a@gmail.com>
 <7CEAE6B1-7490-4EBB-AD81-D498C0B91E5F@dcn.davis.ca.us>
Message-ID: <CAHqSRuQJ+_Aw_QcnQrGEXcvsgx8rqFpiv+pQJ_hDCkX82EGvWA@mail.gmail.com>

Note that !! and !!! are special operators involving "quasiquotation" in
the dplyr package.

I would use as.logical(x) instead of !!x since its meaning is clear to any
user.

-Bill

On Wed, Jun 23, 2021 at 11:13 AM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> For the record, `!!` is not an operator so it does not "operate" on
> anything. The right ! does per the help page (?`!`) interpret non-zero
> values as TRUE and invert that logic, yielding a logical result even if the
> input is not logical. The left ! inverts that again, yielding a logical
> vector without the inversion.
>
> On June 23, 2021 10:39:07 AM PDT, Phillips Rogfield <thebudget72 at gmail.com>
> wrote:
> >Dear all,
> >
> >thank for for your suggestion.
> >
> >Yes I come from languages where 1 means TRUE and 0 means FALSE. In
> >particular from C/C++ and Python.
> >
> >Evidently this is not the case for R.
> >
> >In my mind I kind took for granted that that was the case (1=TRUE,
> >0=FALSE).
> >
> >Knowing this is not the case for R makes things simpler.
> >
> >Mine was just an example, sometimes I load datasets taken from outside
> >and variables are coded with 1/0 (for example, a treatment variable may
> >
> >be coded that way).
> >
> >I also did not know the !!() syntax!
> >
> >Thank you for your help and best regards.
> >
> >On 23/06/2021 17:55, Bert Gunter wrote:
> >> Just as a way to save a bit of typing, instead of
> >>
> >> > as.logical(0:4)
> >> [1] FALSE  TRUE  TRUE  TRUE  TRUE
> >>
> >> > !!(0:4)
> >> [1] FALSE  TRUE  TRUE  TRUE  TRUE
> >>
> >> DO NOTE that the parentheses in the second expression should never be
> >
> >> omitted, a possible reason to prefer the as.logical() construction.
> >> Also note that !!  "acts [only] on raw, logical and number-like
> >> vectors," whereas as.logical() is more general. e.g. (from ?logical):
> >>
> >> > charvec <- c("FALSE", "F", "False", "false",    "fAlse", "0",
> >> +              "TRUE",  "T", "True",  "true",     "tRue",  "1")
> >> > as.logical(charvec)
> >>  [1] FALSE FALSE FALSE FALSE    NA    NA  TRUE  TRUE  TRUE  TRUE
> > NA
> >>    NA
> >> > !!charvec
> >> Error in !charvec : invalid argument type
> >>
> >>
> >> Cheers,
> >> Bert
> >>
> >> Bert Gunter
> >>
> >> "The trouble with having an open mind is that people keep coming
> >along
> >> and sticking things into it."
> >> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> >>
> >>
> >> On Wed, Jun 23, 2021 at 8:31 AM Eric Berger <ericjberger at gmail.com
> >> <mailto:ericjberger at gmail.com>> wrote:
> >>
> >>     In my code, instead of 't', I name a vector of indices with a
> >>     meaningful
> >>     name, such as idxV, to make it obvious.
> >>
> >>     Alternatively, a minor change in your style would be to replace
> >your
> >>     definition of t by
> >>
> >>     t <- as.logical(c(1,1,1,0,0))
> >>
> >>     HTH,
> >>     Eric
> >>
> >>
> >>     On Wed, Jun 23, 2021 at 6:11 PM Phillips Rogfield
> >>     <thebudget72 at gmail.com <mailto:thebudget72 at gmail.com>>
> >>     wrote:
> >>
> >>     > I make the same mistake all over again.
> >>     >
> >>     > In particular, suppose we have:
> >>     >
> >>     > a = c(1,2,3,4,5)
> >>     >
> >>     > and a variable that equals 1 for the elements I want to select:
> >>     >
> >>     > t = c(1,1,1,0,0)
> >>     >
> >>     > To select the first 3 elements.
> >>     >
> >>     > The problem is that
> >>     >
> >>     > a[t]
> >>     >
> >>     > would repeat the first element 3 times .....
> >>     >
> >>     > I have to either convert `t` to boolean:
> >>     >
> >>     > a[t==1]
> >>     >
> >>     > Or use `which`
> >>     >
> >>     > a[which(t==1)]
> >>     >
> >>     > How can I "spot" this error?
> >>     >
> >>     > It often happens in long scripts.
> >>     >
> >>     > Do I have to check the type each time?
> >>     >
> >>     > Do you have any suggestions?
> >>     >
> >>     > ______________________________________________
> >>     > R-help at r-project.org <mailto:R-help at r-project.org> mailing list
> >>     -- To UNSUBSCRIBE and more, see
> >>     > https://stat.ethz.ch/mailman/listinfo/r-help
> >>     <https://stat.ethz.ch/mailman/listinfo/r-help>
> >>     > PLEASE do read the posting guide
> >>     > http://www.R-project.org/posting-guide.html
> >>     <http://www.R-project.org/posting-guide.html>
> >>     > and provide commented, minimal, self-contained, reproducible
> >code.
> >>     >
> >>
> >>             [[alternative HTML version deleted]]
> >>
> >>     ______________________________________________
> >>     R-help at r-project.org <mailto:R-help at r-project.org> mailing list
> >--
> >>     To UNSUBSCRIBE and more, see
> >>     https://stat.ethz.ch/mailman/listinfo/r-help
> >>     <https://stat.ethz.ch/mailman/listinfo/r-help>
> >>     PLEASE do read the posting guide
> >>     http://www.R-project.org/posting-guide.html
> >>     <http://www.R-project.org/posting-guide.html>
> >>     and provide commented, minimal, self-contained, reproducible
> >code.
> >>
> >
> >       [[alternative HTML version deleted]]
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my phone. Please excuse my brevity.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From m@hmood@nt @end|ng |rom gm@||@com  Wed Jun 23 17:38:48 2021
From: m@hmood@nt @end|ng |rom gm@||@com (Mahmood Naderan)
Date: Wed, 23 Jun 2021 17:38:48 +0200
Subject: [R] Special characters in cell names
Message-ID: <CADa2P2WCRDtTGOLB58vHwGnxS5fFJt1gO2tx2daedLyKWGG5UQ@mail.gmail.com>

Hi
I have a column in my data file which is "X/Y". With '/' I want to
emphasize that values are the ratio of X over Y.
Problem is that in the following command for a violin plot, I am not able
to specify that '/' even with double quotes.

p <- ggplot(mydata, aes(x=W, y="X/Y")) + geom_violin(trim=FALSE)

However, if I change that column to "Y" and use

p <- ggplot(mydata, aes(x=W, y=Y)) + geom_violin(trim=FALSE)

Then the plot will be correctly shown.
Any ideas for that?

Regards,
Mahmood

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Wed Jun 23 20:50:17 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 23 Jun 2021 11:50:17 -0700
Subject: [R] Plot NUTS regions with color
In-Reply-To: <9e5e413c-e5c3-b489-2ce6-f90341cdfffc@gmail.com>
References: <9e5e413c-e5c3-b489-2ce6-f90341cdfffc@gmail.com>
Message-ID: <CAGxFJbTwJ=KwBtc6gac3aKZPTjm6kcirYk-m6ryoMvP9sx0S6Q@mail.gmail.com>

I suggest you post this in the r-sig-geo list rather than here. The
expertise you seek is more likely to be there.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Jun 23, 2021 at 10:36 AM Phillips Rogfield <thebudget72 at gmail.com>
wrote:

> Dear R-help ML,
>
> I have downloaded the NUTS shapefiles from here:
>
> https://ec.europa.eu/eurostat/web/gisco/geodata/reference-data/administrative-units-statistical-units/nuts
>
> I can load them with the following code:
>
>     library(rgdal)
>     shp_bdir <- [PATH TO SHAPE FILE]
>     layername <- "NUTS_RG_01M_2021_4326"
>     shp_folder <- file.path(shp_bdir, paste0(layername,".shp"))
>     EU_NUTS <- readOGR(dsn = shp_folder, layer = layername)
>
> Then I can plot the regions with:
>
>     plot(EU_NUTS)
>
> Now I have a list of NUTS - 3 Level, for example:
>
>     l <- c("AT223", "AT212", "AT212", "AT121")
>
> I would like a plot where the NUTS regions are colored, and the more a
> particular NUTS is present is the list, the darker its color.
>
> For example "AT212" should be darker than "AT223", because the former is
> present two times in the list.
>
> How can I achieve that?
>
> Thank you and best regards.
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Jun 23 20:51:24 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 23 Jun 2021 11:51:24 -0700
Subject: [R] 
 interactively getting alist of functions for a given package?
In-Reply-To: <59fe3cb4-6439-3763-1532-2a24a91777cf@gmail.com>
References: <2766374.1624451879@apollo2.minshall.org>
 <59fe3cb4-6439-3763-1532-2a24a91777cf@gmail.com>
Message-ID: <3AB4C196-168F-4604-A6C6-2D57E250EAF4@dcn.davis.ca.us>

RStudio seems to have done this. If you have it, try typing

ggplot2::line

and the popup will suggest (among other options) geom_line.

On June 23, 2021 10:10:07 AM PDT, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>On 23/06/2021 8:37 a.m., Greg Minshall wrote:
>> hi.
>> 
>> at the R prompt, i often hit, e.g., "data.table::<TAB>", to try to
>find
>> a routine in a give package.
>> 
>> however, some packages have a *lot* of functions (i'm looking at
>*you*,
>> ggplot2...), so if i know the routine name starts with, e.g., "set",
>i
>> can filter the returned list of routines by typing
>> "data.table::set<TAB>" to get a list of completions.
>> 
>> but, what if i know the name *contains*, but doesn't start with,
>"set"?
>> 
>> is there an obvious way to find this?  something like the unix-y
>> : ls /bin | grep -i "set"
>
>Bert gave you an answer that depends on ls().  Whether there's
>something 
>like "set<TAB>" that can return "asset" probably depends on your front 
>end, and may be customizable using the facilities described in
>?rcompgen.
>
>Duncan Murdoch
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From w||||@mwdun|@p @end|ng |rom gm@||@com  Wed Jun 23 21:04:26 2021
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Wed, 23 Jun 2021 12:04:26 -0700
Subject: [R] Special characters in cell names
In-Reply-To: <CADa2P2WCRDtTGOLB58vHwGnxS5fFJt1gO2tx2daedLyKWGG5UQ@mail.gmail.com>
References: <CADa2P2WCRDtTGOLB58vHwGnxS5fFJt1gO2tx2daedLyKWGG5UQ@mail.gmail.com>
Message-ID: <CAHqSRuRF=MCnLtsE=iX88+trh6iUhcZG_q1m+5ej5coRs5amsA@mail.gmail.com>

Use backquotes, `X/Y`, to specify a name, not double quotes.

-Bill

On Wed, Jun 23, 2021 at 11:58 AM Mahmood Naderan <mahmood.nt at gmail.com>
wrote:

> Hi
> I have a column in my data file which is "X/Y". With '/' I want to
> emphasize that values are the ratio of X over Y.
> Problem is that in the following command for a violin plot, I am not able
> to specify that '/' even with double quotes.
>
> p <- ggplot(mydata, aes(x=W, y="X/Y")) + geom_violin(trim=FALSE)
>
> However, if I change that column to "Y" and use
>
> p <- ggplot(mydata, aes(x=W, y=Y)) + geom_violin(trim=FALSE)
>
> Then the plot will be correctly shown.
> Any ideas for that?
>
> Regards,
> Mahmood
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Jun 23 21:08:27 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 23 Jun 2021 15:08:27 -0400
Subject: [R] Special characters in cell names
In-Reply-To: <CADa2P2WCRDtTGOLB58vHwGnxS5fFJt1gO2tx2daedLyKWGG5UQ@mail.gmail.com>
References: <CADa2P2WCRDtTGOLB58vHwGnxS5fFJt1gO2tx2daedLyKWGG5UQ@mail.gmail.com>
Message-ID: <dce42de2-a2be-3ffc-8232-d2cb21e18434@gmail.com>

On 23/06/2021 11:38 a.m., Mahmood Naderan wrote:
> Hi
> I have a column in my data file which is "X/Y". With '/' I want to
> emphasize that values are the ratio of X over Y.
> Problem is that in the following command for a violin plot, I am not able
> to specify that '/' even with double quotes.
> 
> p <- ggplot(mydata, aes(x=W, y="X/Y")) + geom_violin(trim=FALSE)
> 
> However, if I change that column to "Y" and use
> 
> p <- ggplot(mydata, aes(x=W, y=Y)) + geom_violin(trim=FALSE)
> 
> Then the plot will be correctly shown.
> Any ideas for that?

I haven't tried, but I'd expect back quotes would work:


ggplot(mydata, aes(x=W, y=`X/Y`))


That's the normal way to quote a name in R.

Duncan Murdoch


From thebudget72 @end|ng |rom gm@||@com  Wed Jun 23 21:13:28 2021
From: thebudget72 @end|ng |rom gm@||@com (Phillips Rogfield)
Date: Wed, 23 Jun 2021 21:13:28 +0200
Subject: [R] Wayland backend for R
In-Reply-To: <CAKBFG3YJRmUQ8AZ3PqO3Xu-pCuRt73U+aGnhPrKOW3v-W6Tj3Q@mail.gmail.com>
References: <f9adeed8-5cce-72ae-1b55-96b8fde04e12@gmail.com>
 <c08f31fe-fbe2-99bc-1eaf-31ff6a73ada0@stat.auckland.ac.nz>
 <b5696dc5-b4db-2260-94ca-08dfab069d37@gmail.com>
 <CAKBFG3YJRmUQ8AZ3PqO3Xu-pCuRt73U+aGnhPrKOW3v-W6Tj3Q@mail.gmail.com>
Message-ID: <932fd86f-ad73-0469-d9ea-bc9c2e3eaa9c@gmail.com>

Dear Robert,

Thank you very much for your suggestion.

I solved by compiling R with --with-cairo, and installing cairo-devel 
and pango-devel.

Notably, you also need pango-devel.

The configure script does not complain if it is missing, but then 
plotting won't work.

Best regards.

On 23/06/2021 20:26, Robert Knight wrote:
> Perhaps software rendering would work.
>
> |Export RSTUDIO_CHROMIUM_ARGUMENTS="--disable-gpu"|
> |/usr/lib/rstudio/bin/rstudio|
>
> On Wed, Jun 23, 2021, 10:01 AM Phillips Rogfield 
> <thebudget72 at gmail.com <mailto:thebudget72 at gmail.com>> wrote:
>
>     Hello Paul,
>
>     thank you for your kind advice.
>
>     RStudio doesn't start at all this way. It gives me the following
>     error:
>
>     $ QT_QPA_PLATFORM=wayland rstudio
>     Warning: Ignoring XDG_SESSION_TYPE=wayland on Gnome. Use
>     QT_QPA_PLATFORM=wayland to run on Wayland anyway.
>     QSocketNotifier: Can only be used with threads started with QThread
>     Failed to load client buffer integration: wayland-egl
>
>     WebEngineContext used before QtWebEngine::initialize() or OpenGL
>     context
>     creation failed.
>     qt.qpa.wayland: No shell integration named "xdg-shell" found
>     qt.qpa.wayland: No shell integration named "xdg-shell-v6" found
>     qt.qpa.wayland: No shell integration named "wl-shell" found
>     qt.qpa.wayland: No shell integration named "ivi-shell" found
>     qt.qpa.wayland: Loading shell integration failed.
>     qt.qpa.wayland: Attempted to load the following shells ("xdg-shell",
>     "xdg-shell-v6", "wl-shell", "ivi-shell")
>     qt.qpa.wayland: Wayland does not support QWindow::requestActivate()
>
>     Best regards.
>
>     On 23/06/2021 02:22, Paul Murrell wrote:
>     > Hi
>     >
>     > I do not know of any Wayland backend for R.
>     >
>     > You might be able to try the R Studio IDE configured for Wayland
>     and
>     > see how its graphics device performs ?
>     > https://github.com/rstudio/rstudio/issues/4686
>     <https://github.com/rstudio/rstudio/issues/4686>
>     >
>     > Paul
>     >
>     > On 23/06/21 1:25 am, Phillips Rogfield wrote:
>     >> I have compiled R from source and I had to install the X11
>     libraries.
>     >>
>     >> I use Wayland, and I am having problems plotting on X11 (I
>     guess it uses
>     >> XWayland) with this version.
>     >>
>     >> Is there a Wayland backend for R?
>     >>
>     >> Some configuration option I need to turn on in order to use it?
>     >>
>     >> ______________________________________________
>     >> R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>     -- To UNSUBSCRIBE and more, see
>     >> https://stat.ethz.ch/mailman/listinfo/r-help
>     <https://stat.ethz.ch/mailman/listinfo/r-help>
>     >> <https://stat.ethz.ch/mailman/listinfo/r-help
>     <https://stat.ethz.ch/mailman/listinfo/r-help>>
>     >> PLEASE do read the posting guide
>     >> http://www.R-project.org/posting-guide.html
>     <http://www.R-project.org/posting-guide.html>
>     >> <http://www.R-project.org/posting-guide.html
>     <http://www.R-project.org/posting-guide.html>>
>     >> and provide commented, minimal, self-contained, reproducible code.
>     >
>
>     ______________________________________________
>     R-help at r-project.org <mailto:R-help at r-project.org> mailing list --
>     To UNSUBSCRIBE and more, see
>     https://stat.ethz.ch/mailman/listinfo/r-help
>     <https://stat.ethz.ch/mailman/listinfo/r-help>
>     PLEASE do read the posting guide
>     http://www.R-project.org/posting-guide.html
>     <http://www.R-project.org/posting-guide.html>
>     and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Jun 23 21:19:26 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 23 Jun 2021 15:19:26 -0400
Subject: [R] 
 interactively getting alist of functions for a given package?
In-Reply-To: <3AB4C196-168F-4604-A6C6-2D57E250EAF4@dcn.davis.ca.us>
References: <2766374.1624451879@apollo2.minshall.org>
 <59fe3cb4-6439-3763-1532-2a24a91777cf@gmail.com>
 <3AB4C196-168F-4604-A6C6-2D57E250EAF4@dcn.davis.ca.us>
Message-ID: <94b75c99-a490-f5de-7101-22ddd6e30e3d@gmail.com>

On 23/06/2021 2:51 p.m., Jeff Newmiller wrote:
> RStudio seems to have done this. If you have it, try typing
> 
> ggplot2::line
> 
> and the popup will suggest (among other options) geom_line.

Yes, though it may not be quite right.  Back in May when I typed

  library(rgl<Enter>

their autocompletion gave me

  library(Rglpk)

(See https://github.com/rstudio/rstudio/issues/9293).  Today that's not 
happening, so maybe it's been fixed, or is only intermittent.

Duncan Murdoch



> 
> On June 23, 2021 10:10:07 AM PDT, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>> On 23/06/2021 8:37 a.m., Greg Minshall wrote:
>>> hi.
>>>
>>> at the R prompt, i often hit, e.g., "data.table::<TAB>", to try to
>> find
>>> a routine in a give package.
>>>
>>> however, some packages have a *lot* of functions (i'm looking at
>> *you*,
>>> ggplot2...), so if i know the routine name starts with, e.g., "set",
>> i
>>> can filter the returned list of routines by typing
>>> "data.table::set<TAB>" to get a list of completions.
>>>
>>> but, what if i know the name *contains*, but doesn't start with,
>> "set"?
>>>
>>> is there an obvious way to find this?  something like the unix-y
>>> : ls /bin | grep -i "set"
>>
>> Bert gave you an answer that depends on ls().  Whether there's
>> something
>> like "set<TAB>" that can return "asset" probably depends on your front
>> end, and may be customizable using the facilities described in
>> ?rcompgen.
>>
>> Duncan Murdoch
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>


From er|cjberger @end|ng |rom gm@||@com  Wed Jun 23 21:22:13 2021
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Wed, 23 Jun 2021 22:22:13 +0300
Subject: [R] Special characters in cell names
In-Reply-To: <CADa2P2WCRDtTGOLB58vHwGnxS5fFJt1gO2tx2daedLyKWGG5UQ@mail.gmail.com>
References: <CADa2P2WCRDtTGOLB58vHwGnxS5fFJt1gO2tx2daedLyKWGG5UQ@mail.gmail.com>
Message-ID: <CAGgJW75V9dfvwKcbmCF02_W9MpVuQXCgh7+UT34NM1CX+CKQxg@mail.gmail.com>

If no one comes up with a better suggestion:
a. Change the column name to "Y" so that you get the plot you want
b. Use axis labels and legend text to show the text that you want. (The
user never has to know that you changed the column name ?)

HTH,
Eric

On Wed, Jun 23, 2021 at 9:58 PM Mahmood Naderan <mahmood.nt at gmail.com>
wrote:

> Hi
> I have a column in my data file which is "X/Y". With '/' I want to
> emphasize that values are the ratio of X over Y.
> Problem is that in the following command for a violin plot, I am not able
> to specify that '/' even with double quotes.
>
> p <- ggplot(mydata, aes(x=W, y="X/Y")) + geom_violin(trim=FALSE)
>
> However, if I change that column to "Y" and use
>
> p <- ggplot(mydata, aes(x=W, y=Y)) + geom_violin(trim=FALSE)
>
> Then the plot will be correctly shown.
> Any ideas for that?
>
> Regards,
> Mahmood
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Jun 23 21:51:57 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 23 Jun 2021 12:51:57 -0700
Subject: [R] How to spot/stop making the same mistake
In-Reply-To: <CAHqSRuQJ+_Aw_QcnQrGEXcvsgx8rqFpiv+pQJ_hDCkX82EGvWA@mail.gmail.com>
References: <c8708247-6875-dbff-ede0-db7ed5297c3d@gmail.com>
 <CAGgJW74x=7Q_ZN4YxLjxEZQebUo=xeB=wRTR_ZxBCc=T49d2YA@mail.gmail.com>
 <CAGxFJbScLrkn42Q0bZfrxiXkT7RZ_+wHWbsK+dT4nzVCbrvBtg@mail.gmail.com>
 <9e468a2e-1aba-d4f0-dc75-67e52f3f1a4a@gmail.com>
 <7CEAE6B1-7490-4EBB-AD81-D498C0B91E5F@dcn.davis.ca.us>
 <CAHqSRuQJ+_Aw_QcnQrGEXcvsgx8rqFpiv+pQJ_hDCkX82EGvWA@mail.gmail.com>
Message-ID: <4646D125-C488-44A3-8B80-EFB118B612A7@dcn.davis.ca.us>

IMO that puts the cart before the horse. rlang implements these "operators" in very focused situations using custom expression parsing, and if they cannot tell the difference between numeric/logical and character data then rlang is broken.

That said, I do think as.logical() is more direct than !! for this purpose.

On June 23, 2021 11:27:38 AM PDT, Bill Dunlap <williamwdunlap at gmail.com> wrote:
>Note that !! and !!! are special operators involving "quasiquotation"
>in
>the dplyr package.
>
>I would use as.logical(x) instead of !!x since its meaning is clear to
>any
>user.
>
>-Bill
>
>On Wed, Jun 23, 2021 at 11:13 AM Jeff Newmiller
><jdnewmil at dcn.davis.ca.us>
>wrote:
>
>> For the record, `!!` is not an operator so it does not "operate" on
>> anything. The right ! does per the help page (?`!`) interpret
>non-zero
>> values as TRUE and invert that logic, yielding a logical result even
>if the
>> input is not logical. The left ! inverts that again, yielding a
>logical
>> vector without the inversion.
>>
>> On June 23, 2021 10:39:07 AM PDT, Phillips Rogfield
><thebudget72 at gmail.com>
>> wrote:
>> >Dear all,
>> >
>> >thank for for your suggestion.
>> >
>> >Yes I come from languages where 1 means TRUE and 0 means FALSE. In
>> >particular from C/C++ and Python.
>> >
>> >Evidently this is not the case for R.
>> >
>> >In my mind I kind took for granted that that was the case (1=TRUE,
>> >0=FALSE).
>> >
>> >Knowing this is not the case for R makes things simpler.
>> >
>> >Mine was just an example, sometimes I load datasets taken from
>outside
>> >and variables are coded with 1/0 (for example, a treatment variable
>may
>> >
>> >be coded that way).
>> >
>> >I also did not know the !!() syntax!
>> >
>> >Thank you for your help and best regards.
>> >
>> >On 23/06/2021 17:55, Bert Gunter wrote:
>> >> Just as a way to save a bit of typing, instead of
>> >>
>> >> > as.logical(0:4)
>> >> [1] FALSE  TRUE  TRUE  TRUE  TRUE
>> >>
>> >> > !!(0:4)
>> >> [1] FALSE  TRUE  TRUE  TRUE  TRUE
>> >>
>> >> DO NOTE that the parentheses in the second expression should never
>be
>> >
>> >> omitted, a possible reason to prefer the as.logical()
>construction.
>> >> Also note that !!  "acts [only] on raw, logical and number-like
>> >> vectors," whereas as.logical() is more general. e.g. (from
>?logical):
>> >>
>> >> > charvec <- c("FALSE", "F", "False", "false",    "fAlse", "0",
>> >> +              "TRUE",  "T", "True",  "true",     "tRue",  "1")
>> >> > as.logical(charvec)
>> >>  [1] FALSE FALSE FALSE FALSE    NA    NA  TRUE  TRUE  TRUE  TRUE
>> > NA
>> >>    NA
>> >> > !!charvec
>> >> Error in !charvec : invalid argument type
>> >>
>> >>
>> >> Cheers,
>> >> Bert
>> >>
>> >> Bert Gunter
>> >>
>> >> "The trouble with having an open mind is that people keep coming
>> >along
>> >> and sticking things into it."
>> >> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>> >>
>> >>
>> >> On Wed, Jun 23, 2021 at 8:31 AM Eric Berger <ericjberger at gmail.com
>> >> <mailto:ericjberger at gmail.com>> wrote:
>> >>
>> >>     In my code, instead of 't', I name a vector of indices with a
>> >>     meaningful
>> >>     name, such as idxV, to make it obvious.
>> >>
>> >>     Alternatively, a minor change in your style would be to
>replace
>> >your
>> >>     definition of t by
>> >>
>> >>     t <- as.logical(c(1,1,1,0,0))
>> >>
>> >>     HTH,
>> >>     Eric
>> >>
>> >>
>> >>     On Wed, Jun 23, 2021 at 6:11 PM Phillips Rogfield
>> >>     <thebudget72 at gmail.com <mailto:thebudget72 at gmail.com>>
>> >>     wrote:
>> >>
>> >>     > I make the same mistake all over again.
>> >>     >
>> >>     > In particular, suppose we have:
>> >>     >
>> >>     > a = c(1,2,3,4,5)
>> >>     >
>> >>     > and a variable that equals 1 for the elements I want to
>select:
>> >>     >
>> >>     > t = c(1,1,1,0,0)
>> >>     >
>> >>     > To select the first 3 elements.
>> >>     >
>> >>     > The problem is that
>> >>     >
>> >>     > a[t]
>> >>     >
>> >>     > would repeat the first element 3 times .....
>> >>     >
>> >>     > I have to either convert `t` to boolean:
>> >>     >
>> >>     > a[t==1]
>> >>     >
>> >>     > Or use `which`
>> >>     >
>> >>     > a[which(t==1)]
>> >>     >
>> >>     > How can I "spot" this error?
>> >>     >
>> >>     > It often happens in long scripts.
>> >>     >
>> >>     > Do I have to check the type each time?
>> >>     >
>> >>     > Do you have any suggestions?
>> >>     >
>> >>     > ______________________________________________
>> >>     > R-help at r-project.org <mailto:R-help at r-project.org> mailing
>list
>> >>     -- To UNSUBSCRIBE and more, see
>> >>     > https://stat.ethz.ch/mailman/listinfo/r-help
>> >>     <https://stat.ethz.ch/mailman/listinfo/r-help>
>> >>     > PLEASE do read the posting guide
>> >>     > http://www.R-project.org/posting-guide.html
>> >>     <http://www.R-project.org/posting-guide.html>
>> >>     > and provide commented, minimal, self-contained, reproducible
>> >code.
>> >>     >
>> >>
>> >>             [[alternative HTML version deleted]]
>> >>
>> >>     ______________________________________________
>> >>     R-help at r-project.org <mailto:R-help at r-project.org> mailing
>list
>> >--
>> >>     To UNSUBSCRIBE and more, see
>> >>     https://stat.ethz.ch/mailman/listinfo/r-help
>> >>     <https://stat.ethz.ch/mailman/listinfo/r-help>
>> >>     PLEASE do read the posting guide
>> >>     http://www.R-project.org/posting-guide.html
>> >>     <http://www.R-project.org/posting-guide.html>
>> >>     and provide commented, minimal, self-contained, reproducible
>> >code.
>> >>
>> >
>> >       [[alternative HTML version deleted]]
>> >
>> >______________________________________________
>> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> >https://stat.ethz.ch/mailman/listinfo/r-help
>> >PLEASE do read the posting guide
>> >http://www.R-project.org/posting-guide.html
>> >and provide commented, minimal, self-contained, reproducible code.
>>
>> --
>> Sent from my phone. Please excuse my brevity.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>

-- 
Sent from my phone. Please excuse my brevity.


From m@hmood@nt @end|ng |rom gm@||@com  Wed Jun 23 22:36:22 2021
From: m@hmood@nt @end|ng |rom gm@||@com (Mahmood Naderan)
Date: Wed, 23 Jun 2021 22:36:22 +0200
Subject: [R] Special characters in cell names
In-Reply-To: <CAGgJW75V9dfvwKcbmCF02_W9MpVuQXCgh7+UT34NM1CX+CKQxg@mail.gmail.com>
References: <CADa2P2WCRDtTGOLB58vHwGnxS5fFJt1gO2tx2daedLyKWGG5UQ@mail.gmail.com>
 <CAGgJW75V9dfvwKcbmCF02_W9MpVuQXCgh7+UT34NM1CX+CKQxg@mail.gmail.com>
Message-ID: <CADa2P2XfRPSKyFpY-WharsESfXofcv2HY=wG=3PArj3fhUmiHw@mail.gmail.com>

Unfortunately, using 'X/Y' doesn't work either.
Instead I used labels like below

P + scale_y_continuous(name="X/Y")

Thanks for the suggestions.

Regards,
Mahmood




On Wed, Jun 23, 2021 at 9:22 PM Eric Berger <ericjberger at gmail.com> wrote:

> If no one comes up with a better suggestion:
> a. Change the column name to "Y" so that you get the plot you want
> b. Use axis labels and legend text to show the text that you want. (The
> user never has to know that you changed the column name ?)
>
> HTH,
> Eric
>
> On Wed, Jun 23, 2021 at 9:58 PM Mahmood Naderan <mahmood.nt at gmail.com>
> wrote:
>
>> Hi
>> I have a column in my data file which is "X/Y". With '/' I want to
>> emphasize that values are the ratio of X over Y.
>> Problem is that in the following command for a violin plot, I am not able
>> to specify that '/' even with double quotes.
>>
>> p <- ggplot(mydata, aes(x=W, y="X/Y")) + geom_violin(trim=FALSE)
>>
>> However, if I change that column to "Y" and use
>>
>> p <- ggplot(mydata, aes(x=W, y=Y)) + geom_violin(trim=FALSE)
>>
>> Then the plot will be correctly shown.
>> Any ideas for that?
>>
>> Regards,
>> Mahmood
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Wed Jun 23 23:16:01 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 23 Jun 2021 14:16:01 -0700
Subject: [R] Special characters in cell names
In-Reply-To: <CADa2P2XfRPSKyFpY-WharsESfXofcv2HY=wG=3PArj3fhUmiHw@mail.gmail.com>
References: <CADa2P2WCRDtTGOLB58vHwGnxS5fFJt1gO2tx2daedLyKWGG5UQ@mail.gmail.com>
 <CAGgJW75V9dfvwKcbmCF02_W9MpVuQXCgh7+UT34NM1CX+CKQxg@mail.gmail.com>
 <CADa2P2XfRPSKyFpY-WharsESfXofcv2HY=wG=3PArj3fhUmiHw@mail.gmail.com>
Message-ID: <CAGxFJbRTg3xnv_NTTiyFBQwzMO5DDBryNauhFG_hv5nc8WbCWQ@mail.gmail.com>

I found your specification quite vague. What did you mean by a "data file"
-- a data frame in R? -- a file in the file system?

I may be completely wrong here, but another possibility is that you read
your data into an R data.frame via, e.g. read.table() or read.csv(), but
failed to specify the check.names = FALSE, argument. This would cause a
column named "x/y" in your original table to be given the name "x.y" in R,
as "x/y" is not a syntactically valid name. See ?make.names for details.

As others have already said, enclosing non-syntactically valid names in
back ticks usually works (maybe always works??). So for example:

z<-data.frame (`a/b` = 1:5, y = 1:5, check.names = FALSE)
plot(y ~ `a/b`, data = z) ## produces desired plot with correct label
z  ## yields:
  a/b y
1   1 1
2   2 2
3   3 3
4   4 4
5   5 5

Of course, ignore if this is all irrelevant.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Jun 23, 2021 at 1:37 PM Mahmood Naderan <mahmood.nt at gmail.com>
wrote:

> Unfortunately, using 'X/Y' doesn't work either.
> Instead I used labels like below
>
> P + scale_y_continuous(name="X/Y")
>
> Thanks for the suggestions.
>
> Regards,
> Mahmood
>
>
>
>
> On Wed, Jun 23, 2021 at 9:22 PM Eric Berger <ericjberger at gmail.com> wrote:
>
> > If no one comes up with a better suggestion:
> > a. Change the column name to "Y" so that you get the plot you want
> > b. Use axis labels and legend text to show the text that you want. (The
> > user never has to know that you changed the column name ?)
> >
> > HTH,
> > Eric
> >
> > On Wed, Jun 23, 2021 at 9:58 PM Mahmood Naderan <mahmood.nt at gmail.com>
> > wrote:
> >
> >> Hi
> >> I have a column in my data file which is "X/Y". With '/' I want to
> >> emphasize that values are the ratio of X over Y.
> >> Problem is that in the following command for a violin plot, I am not
> able
> >> to specify that '/' even with double quotes.
> >>
> >> p <- ggplot(mydata, aes(x=W, y="X/Y")) + geom_violin(trim=FALSE)
> >>
> >> However, if I change that column to "Y" and use
> >>
> >> p <- ggplot(mydata, aes(x=W, y=Y)) + geom_violin(trim=FALSE)
> >>
> >> Then the plot will be correctly shown.
> >> Any ideas for that?
> >>
> >> Regards,
> >> Mahmood
> >>
> >>         [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >>
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From wjm1 @end|ng |rom c@@@co|umb|@@edu  Wed Jun 23 23:23:46 2021
From: wjm1 @end|ng |rom c@@@co|umb|@@edu (William Michels)
Date: Wed, 23 Jun 2021 14:23:46 -0700
Subject: [R] How to spot/stop making the same mistake
In-Reply-To: <9e468a2e-1aba-d4f0-dc75-67e52f3f1a4a@gmail.com>
References: <c8708247-6875-dbff-ede0-db7ed5297c3d@gmail.com>
 <CAGgJW74x=7Q_ZN4YxLjxEZQebUo=xeB=wRTR_ZxBCc=T49d2YA@mail.gmail.com>
 <CAGxFJbScLrkn42Q0bZfrxiXkT7RZ_+wHWbsK+dT4nzVCbrvBtg@mail.gmail.com>
 <9e468a2e-1aba-d4f0-dc75-67e52f3f1a4a@gmail.com>
Message-ID: <CAA99HCz=nsbwEGJHj4x0sx8HLtmREAqc11EP9VHvFnhSfG53Aw@mail.gmail.com>

Hi Phillips,

Maybe these examples will be useful:

> vec <- c("a","b","c","d","e")
> vec[c(1,1,1,0,0)]
[1] "a" "a" "a"
> vec[c(1,1,1,2,2)]
[1] "a" "a" "a" "b" "b"
> vec[c(5,5,5,5,5)]
[1] "e" "e" "e" "e" "e"
> vec[c(NA,NA,NA,0,0,0,0)]
[1] NA NA NA
> vec[c(NA,NA,NA,1,1,1,1)]
[1] NA  NA  NA  "a" "a" "a" "a"
> vec[c(7:9)]
[1] NA NA NA
>
> R.version.string
[1] "R version 3.6.3 (2020-02-29)"

HTH, Bill.

W. Michels, Ph.D.








On Wed, Jun 23, 2021 at 10:39 AM Phillips Rogfield
<thebudget72 at gmail.com> wrote:
>
> Dear all,
>
> thank for for your suggestion.
>
> Yes I come from languages where 1 means TRUE and 0 means FALSE. In
> particular from C/C++ and Python.
>
> Evidently this is not the case for R.
>
> In my mind I kind took for granted that that was the case (1=TRUE, 0=FALSE).
>
> Knowing this is not the case for R makes things simpler.
>
> Mine was just an example, sometimes I load datasets taken from outside
> and variables are coded with 1/0 (for example, a treatment variable may
> be coded that way).
>
> I also did not know the !!() syntax!
>
> Thank you for your help and best regards.
>
> On 23/06/2021 17:55, Bert Gunter wrote:
> > Just as a way to save a bit of typing, instead of
> >
> > > as.logical(0:4)
> > [1] FALSE  TRUE  TRUE  TRUE  TRUE
> >
> > > !!(0:4)
> > [1] FALSE  TRUE  TRUE  TRUE  TRUE
> >
> > DO NOTE that the parentheses in the second expression should never be
> > omitted, a possible reason to prefer the as.logical() construction.
> > Also note that !!  "acts [only] on raw, logical and number-like
> > vectors," whereas as.logical() is more general. e.g. (from ?logical):
> >
> > > charvec <- c("FALSE", "F", "False", "false",    "fAlse", "0",
> > +              "TRUE",  "T", "True",  "true",     "tRue",  "1")
> > > as.logical(charvec)
> >  [1] FALSE FALSE FALSE FALSE    NA    NA  TRUE  TRUE  TRUE  TRUE    NA
> >    NA
> > > !!charvec
> > Error in !charvec : invalid argument type
> >
> >
> > Cheers,
> > Bert
> >
> > Bert Gunter
> >
> > "The trouble with having an open mind is that people keep coming along
> > and sticking things into it."
> > -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> >
> >
> > On Wed, Jun 23, 2021 at 8:31 AM Eric Berger <ericjberger at gmail.com
> > <mailto:ericjberger at gmail.com>> wrote:
> >
> >     In my code, instead of 't', I name a vector of indices with a
> >     meaningful
> >     name, such as idxV, to make it obvious.
> >
> >     Alternatively, a minor change in your style would be to replace your
> >     definition of t by
> >
> >     t <- as.logical(c(1,1,1,0,0))
> >
> >     HTH,
> >     Eric
> >
> >
> >     On Wed, Jun 23, 2021 at 6:11 PM Phillips Rogfield
> >     <thebudget72 at gmail.com <mailto:thebudget72 at gmail.com>>
> >     wrote:
> >
> >     > I make the same mistake all over again.
> >     >
> >     > In particular, suppose we have:
> >     >
> >     > a = c(1,2,3,4,5)
> >     >
> >     > and a variable that equals 1 for the elements I want to select:
> >     >
> >     > t = c(1,1,1,0,0)
> >     >
> >     > To select the first 3 elements.
> >     >
> >     > The problem is that
> >     >
> >     > a[t]
> >     >
> >     > would repeat the first element 3 times .....
> >     >
> >     > I have to either convert `t` to boolean:
> >     >
> >     > a[t==1]
> >     >
> >     > Or use `which`
> >     >
> >     > a[which(t==1)]
> >     >
> >     > How can I "spot" this error?
> >     >
> >     > It often happens in long scripts.
> >     >
> >     > Do I have to check the type each time?
> >     >
> >     > Do you have any suggestions?
> >     >
> >     > ______________________________________________
> >     > R-help at r-project.org <mailto:R-help at r-project.org> mailing list
> >     -- To UNSUBSCRIBE and more, see
> >     > https://stat.ethz.ch/mailman/listinfo/r-help
> >     <https://stat.ethz.ch/mailman/listinfo/r-help>
> >     > PLEASE do read the posting guide
> >     > http://www.R-project.org/posting-guide.html
> >     <http://www.R-project.org/posting-guide.html>
> >     > and provide commented, minimal, self-contained, reproducible code.
> >     >
> >
> >             [[alternative HTML version deleted]]
> >
> >     ______________________________________________
> >     R-help at r-project.org <mailto:R-help at r-project.org> mailing list --
> >     To UNSUBSCRIBE and more, see
> >     https://stat.ethz.ch/mailman/listinfo/r-help
> >     <https://stat.ethz.ch/mailman/listinfo/r-help>
> >     PLEASE do read the posting guide
> >     http://www.R-project.org/posting-guide.html
> >     <http://www.R-project.org/posting-guide.html>
> >     and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From m@hmood@nt @end|ng |rom gm@||@com  Wed Jun 23 23:39:34 2021
From: m@hmood@nt @end|ng |rom gm@||@com (Mahmood Naderan)
Date: Wed, 23 Jun 2021 23:39:34 +0200
Subject: [R] Special characters in cell names
In-Reply-To: <CAGxFJbRTg3xnv_NTTiyFBQwzMO5DDBryNauhFG_hv5nc8WbCWQ@mail.gmail.com>
References: <CADa2P2WCRDtTGOLB58vHwGnxS5fFJt1gO2tx2daedLyKWGG5UQ@mail.gmail.com>
 <CAGgJW75V9dfvwKcbmCF02_W9MpVuQXCgh7+UT34NM1CX+CKQxg@mail.gmail.com>
 <CADa2P2XfRPSKyFpY-WharsESfXofcv2HY=wG=3PArj3fhUmiHw@mail.gmail.com>
 <CAGxFJbRTg3xnv_NTTiyFBQwzMO5DDBryNauhFG_hv5nc8WbCWQ@mail.gmail.com>
Message-ID: <CADa2P2UiupssBfiV46LWvUgSynYUZetcuCMvvJdCgx7u5ytW_w@mail.gmail.com>

Hi Bert,
I don't know what does "check.names" do here, but my commands look like


> mydata <- read.csv('r.3080..csv', header=T,row.names=1)

> head(mydata)
                  W      A        X/Y
P1       M      1.469734 0.004144405
P2    M     20.584841 0.008010306
P3         M     53.519800 0.166034888
P4          M     42.308700 0.051545443
P5   M     99.236384 0.893037857
P6            M     94.279504 0.856837525

So when I use

p <- ggplot(mydata, aes(x=W, y='X/Y')) + geom_violin(trim=FALSE)


The output is not correct. I don't see values (scale) on the y-axis.
Anyway, I fixed that with a label.

Regards,
Mahmood




On Wed, Jun 23, 2021 at 11:16 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> I found your specification quite vague. What did you mean by a "data file"
> -- a data frame in R? -- a file in the file system?
>
> I may be completely wrong here, but another possibility is that you read
> your data into an R data.frame via, e.g. read.table() or read.csv(), but
> failed to specify the check.names = FALSE, argument. This would cause a
> column named "x/y" in your original table to be given the name "x.y" in R,
> as "x/y" is not a syntactically valid name. See ?make.names for details.
>
> As others have already said, enclosing non-syntactically valid names in
> back ticks usually works (maybe always works??). So for example:
>
> z<-data.frame (`a/b` = 1:5, y = 1:5, check.names = FALSE)
> plot(y ~ `a/b`, data = z) ## produces desired plot with correct label
> z  ## yields:
>   a/b y
> 1   1 1
> 2   2 2
> 3   3 3
> 4   4 4
> 5   5 5
>
> Of course, ignore if this is all irrelevant.
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Wed, Jun 23, 2021 at 1:37 PM Mahmood Naderan <mahmood.nt at gmail.com>
> wrote:
>
>> Unfortunately, using 'X/Y' doesn't work either.
>> Instead I used labels like below
>>
>> P + scale_y_continuous(name="X/Y")
>>
>> Thanks for the suggestions.
>>
>> Regards,
>> Mahmood
>>
>>
>>
>>
>> On Wed, Jun 23, 2021 at 9:22 PM Eric Berger <ericjberger at gmail.com>
>> wrote:
>>
>> > If no one comes up with a better suggestion:
>> > a. Change the column name to "Y" so that you get the plot you want
>> > b. Use axis labels and legend text to show the text that you want. (The
>> > user never has to know that you changed the column name ?)
>> >
>> > HTH,
>> > Eric
>> >
>> > On Wed, Jun 23, 2021 at 9:58 PM Mahmood Naderan <mahmood.nt at gmail.com>
>> > wrote:
>> >
>> >> Hi
>> >> I have a column in my data file which is "X/Y". With '/' I want to
>> >> emphasize that values are the ratio of X over Y.
>> >> Problem is that in the following command for a violin plot, I am not
>> able
>> >> to specify that '/' even with double quotes.
>> >>
>> >> p <- ggplot(mydata, aes(x=W, y="X/Y")) + geom_violin(trim=FALSE)
>> >>
>> >> However, if I change that column to "Y" and use
>> >>
>> >> p <- ggplot(mydata, aes(x=W, y=Y)) + geom_violin(trim=FALSE)
>> >>
>> >> Then the plot will be correctly shown.
>> >> Any ideas for that?
>> >>
>> >> Regards,
>> >> Mahmood
>> >>
>> >>         [[alternative HTML version deleted]]
>> >>
>> >> ______________________________________________
>> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> >> https://stat.ethz.ch/mailman/listinfo/r-help
>> >> PLEASE do read the posting guide
>> >> http://www.R-project.org/posting-guide.html
>> >> and provide commented, minimal, self-contained, reproducible code.
>> >>
>> >
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Wed Jun 23 23:45:48 2021
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Wed, 23 Jun 2021 14:45:48 -0700
Subject: [R] Special characters in cell names
In-Reply-To: <CADa2P2UiupssBfiV46LWvUgSynYUZetcuCMvvJdCgx7u5ytW_w@mail.gmail.com>
References: <CADa2P2UiupssBfiV46LWvUgSynYUZetcuCMvvJdCgx7u5ytW_w@mail.gmail.com>
Message-ID: <A4729877-2A91-45C0-80DB-6BB63E340607@comcast.net>

Backticks. NOT apostrophes. 

? David

Sent from my iPhone

> On Jun 23, 2021, at 2:40 PM, Mahmood Naderan <mahmood.nt at gmail.com> wrote:
> 
> ?Hi Bert,
> I don't know what does "check.names" do here, but my commands look like
> 
> 
>> mydata <- read.csv('r.3080..csv', header=T,row.names=1)
> 
>> head(mydata)
>                  W      A        X/Y
> P1       M      1.469734 0.004144405
> P2    M     20.584841 0.008010306
> P3         M     53.519800 0.166034888
> P4          M     42.308700 0.051545443
> P5   M     99.236384 0.893037857
> P6            M     94.279504 0.856837525
> 
> So when I use
> 
> p <- ggplot(mydata, aes(x=W, y='X/Y')) + geom_violin(trim=FALSE)
> 
> 
> The output is not correct. I don't see values (scale) on the y-axis.
> Anyway, I fixed that with a label.
> 
> Regards,
> Mahmood
> 
> 
> 
> 
>> On Wed, Jun 23, 2021 at 11:16 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>> 
>> I found your specification quite vague. What did you mean by a "data file"
>> -- a data frame in R? -- a file in the file system?
>> 
>> I may be completely wrong here, but another possibility is that you read
>> your data into an R data.frame via, e.g. read.table() or read.csv(), but
>> failed to specify the check.names = FALSE, argument. This would cause a
>> column named "x/y" in your original table to be given the name "x.y" in R,
>> as "x/y" is not a syntactically valid name. See ?make.names for details.
>> 
>> As others have already said, enclosing non-syntactically valid names in
>> back ticks usually works (maybe always works??). So for example:
>> 
>> z<-data.frame (`a/b` = 1:5, y = 1:5, check.names = FALSE)
>> plot(y ~ `a/b`, data = z) ## produces desired plot with correct label
>> z  ## yields:
>>  a/b y
>> 1   1 1
>> 2   2 2
>> 3   3 3
>> 4   4 4
>> 5   5 5
>> 
>> Of course, ignore if this is all irrelevant.
>> 
>> Bert Gunter
>> 
>> "The trouble with having an open mind is that people keep coming along and
>> sticking things into it."
>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>> 
>> 
>> On Wed, Jun 23, 2021 at 1:37 PM Mahmood Naderan <mahmood.nt at gmail.com>
>> wrote:
>> 
>>> Unfortunately, using 'X/Y' doesn't work either.
>>> Instead I used labels like below
>>> 
>>> P + scale_y_continuous(name="X/Y")
>>> 
>>> Thanks for the suggestions.
>>> 
>>> Regards,
>>> Mahmood
>>> 
>>> 
>>> 
>>> 
>>> On Wed, Jun 23, 2021 at 9:22 PM Eric Berger <ericjberger at gmail.com>
>>> wrote:
>>> 
>>>> If no one comes up with a better suggestion:
>>>> a. Change the column name to "Y" so that you get the plot you want
>>>> b. Use axis labels and legend text to show the text that you want. (The
>>>> user never has to know that you changed the column name ?)
>>>> 
>>>> HTH,
>>>> Eric
>>>> 
>>>> On Wed, Jun 23, 2021 at 9:58 PM Mahmood Naderan <mahmood.nt at gmail.com>
>>>> wrote:
>>>> 
>>>>> Hi
>>>>> I have a column in my data file which is "X/Y". With '/' I want to
>>>>> emphasize that values are the ratio of X over Y.
>>>>> Problem is that in the following command for a violin plot, I am not
>>> able
>>>>> to specify that '/' even with double quotes.
>>>>> 
>>>>> p <- ggplot(mydata, aes(x=W, y="X/Y")) + geom_violin(trim=FALSE)
>>>>> 
>>>>> However, if I change that column to "Y" and use
>>>>> 
>>>>> p <- ggplot(mydata, aes(x=W, y=Y)) + geom_violin(trim=FALSE)
>>>>> 
>>>>> Then the plot will be correctly shown.
>>>>> Any ideas for that?
>>>>> 
>>>>> Regards,
>>>>> Mahmood
>>>>> 
>>>>>        [[alternative HTML version deleted]]
>>>>> 
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide
>>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>> 
>>>> 
>>> 
>>>        [[alternative HTML version deleted]]
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>> 
>> 
> 
>    [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Wed Jun 23 23:46:31 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 23 Jun 2021 14:46:31 -0700
Subject: [R] Special characters in cell names
In-Reply-To: <CADa2P2UiupssBfiV46LWvUgSynYUZetcuCMvvJdCgx7u5ytW_w@mail.gmail.com>
References: <CADa2P2WCRDtTGOLB58vHwGnxS5fFJt1gO2tx2daedLyKWGG5UQ@mail.gmail.com>
 <CAGgJW75V9dfvwKcbmCF02_W9MpVuQXCgh7+UT34NM1CX+CKQxg@mail.gmail.com>
 <CADa2P2XfRPSKyFpY-WharsESfXofcv2HY=wG=3PArj3fhUmiHw@mail.gmail.com>
 <CAGxFJbRTg3xnv_NTTiyFBQwzMO5DDBryNauhFG_hv5nc8WbCWQ@mail.gmail.com>
 <CADa2P2UiupssBfiV46LWvUgSynYUZetcuCMvvJdCgx7u5ytW_w@mail.gmail.com>
Message-ID: <CAGxFJbRkS-qm3OXsRKDnEs8=4TOJj5Tx-3JjtvZe0mKbyFBUqw@mail.gmail.com>

Try:
ggplot(mydata, aes(x=W, y=`X/Y`)) + geom_violin(trim=FALSE)

Note the use of *backticks*, ``, not single quotes, ' '  . ** They are
different.**

So, yes, your data got read in correctly, presumably because "/" is
considered a character in your locale. It is not in mine. So my suggestion
was indeed irrelevant.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Jun 23, 2021 at 2:39 PM Mahmood Naderan <mahmood.nt at gmail.com>
wrote:

> Hi Bert,
> I don't know what does "check.names" do here, but my commands look like
>
>
> > mydata <- read.csv('r.3080..csv', header=T,row.names=1)
>
> > head(mydata)
>                   W      A        X/Y
> P1       M      1.469734 0.004144405
> P2    M     20.584841 0.008010306
> P3         M     53.519800 0.166034888
> P4          M     42.308700 0.051545443
> P5   M     99.236384 0.893037857
> P6            M     94.279504 0.856837525
>
> So when I use
>
> p <- ggplot(mydata, aes(x=W, y='X/Y')) + geom_violin(trim=FALSE)
>
>
> The output is not correct. I don't see values (scale) on the y-axis.
> Anyway, I fixed that with a label.
>
> Regards,
> Mahmood
>
>
>
>
> On Wed, Jun 23, 2021 at 11:16 PM Bert Gunter <bgunter.4567 at gmail.com>
> wrote:
>
>> I found your specification quite vague. What did you mean by a "data
>> file" -- a data frame in R? -- a file in the file system?
>>
>> I may be completely wrong here, but another possibility is that you read
>> your data into an R data.frame via, e.g. read.table() or read.csv(), but
>> failed to specify the check.names = FALSE, argument. This would cause a
>> column named "x/y" in your original table to be given the name "x.y" in R,
>> as "x/y" is not a syntactically valid name. See ?make.names for details.
>>
>> As others have already said, enclosing non-syntactically valid names in
>> back ticks usually works (maybe always works??). So for example:
>>
>> z<-data.frame (`a/b` = 1:5, y = 1:5, check.names = FALSE)
>> plot(y ~ `a/b`, data = z) ## produces desired plot with correct label
>> z  ## yields:
>>   a/b y
>> 1   1 1
>> 2   2 2
>> 3   3 3
>> 4   4 4
>> 5   5 5
>>
>> Of course, ignore if this is all irrelevant.
>>
>> Bert Gunter
>>
>> "The trouble with having an open mind is that people keep coming along
>> and sticking things into it."
>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>
>>
>> On Wed, Jun 23, 2021 at 1:37 PM Mahmood Naderan <mahmood.nt at gmail.com>
>> wrote:
>>
>>> Unfortunately, using 'X/Y' doesn't work either.
>>> Instead I used labels like below
>>>
>>> P + scale_y_continuous(name="X/Y")
>>>
>>> Thanks for the suggestions.
>>>
>>> Regards,
>>> Mahmood
>>>
>>>
>>>
>>>
>>> On Wed, Jun 23, 2021 at 9:22 PM Eric Berger <ericjberger at gmail.com>
>>> wrote:
>>>
>>> > If no one comes up with a better suggestion:
>>> > a. Change the column name to "Y" so that you get the plot you want
>>> > b. Use axis labels and legend text to show the text that you want. (The
>>> > user never has to know that you changed the column name ?)
>>> >
>>> > HTH,
>>> > Eric
>>> >
>>> > On Wed, Jun 23, 2021 at 9:58 PM Mahmood Naderan <mahmood.nt at gmail.com>
>>> > wrote:
>>> >
>>> >> Hi
>>> >> I have a column in my data file which is "X/Y". With '/' I want to
>>> >> emphasize that values are the ratio of X over Y.
>>> >> Problem is that in the following command for a violin plot, I am not
>>> able
>>> >> to specify that '/' even with double quotes.
>>> >>
>>> >> p <- ggplot(mydata, aes(x=W, y="X/Y")) + geom_violin(trim=FALSE)
>>> >>
>>> >> However, if I change that column to "Y" and use
>>> >>
>>> >> p <- ggplot(mydata, aes(x=W, y=Y)) + geom_violin(trim=FALSE)
>>> >>
>>> >> Then the plot will be correctly shown.
>>> >> Any ideas for that?
>>> >>
>>> >> Regards,
>>> >> Mahmood
>>> >>
>>> >>         [[alternative HTML version deleted]]
>>> >>
>>> >> ______________________________________________
>>> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> >> https://stat.ethz.ch/mailman/listinfo/r-help
>>> >> PLEASE do read the posting guide
>>> >> http://www.R-project.org/posting-guide.html
>>> >> and provide commented, minimal, self-contained, reproducible code.
>>> >>
>>> >
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>

	[[alternative HTML version deleted]]


From m@hmood@nt @end|ng |rom gm@||@com  Wed Jun 23 23:55:46 2021
From: m@hmood@nt @end|ng |rom gm@||@com (Mahmood Naderan)
Date: Wed, 23 Jun 2021 23:55:46 +0200
Subject: [R] Special characters in cell names
In-Reply-To: <CAGxFJbRkS-qm3OXsRKDnEs8=4TOJj5Tx-3JjtvZe0mKbyFBUqw@mail.gmail.com>
References: <CADa2P2WCRDtTGOLB58vHwGnxS5fFJt1gO2tx2daedLyKWGG5UQ@mail.gmail.com>
 <CAGgJW75V9dfvwKcbmCF02_W9MpVuQXCgh7+UT34NM1CX+CKQxg@mail.gmail.com>
 <CADa2P2XfRPSKyFpY-WharsESfXofcv2HY=wG=3PArj3fhUmiHw@mail.gmail.com>
 <CAGxFJbRTg3xnv_NTTiyFBQwzMO5DDBryNauhFG_hv5nc8WbCWQ@mail.gmail.com>
 <CADa2P2UiupssBfiV46LWvUgSynYUZetcuCMvvJdCgx7u5ytW_w@mail.gmail.com>
 <CAGxFJbRkS-qm3OXsRKDnEs8=4TOJj5Tx-3JjtvZe0mKbyFBUqw@mail.gmail.com>
Message-ID: <CADa2P2UZ0TuNS6PW=QkxR=RMcroo1Hbtt=cuZupfWFJwErv0kg@mail.gmail.com>

OK I understand. Thanks a lot.


Regards,
Mahmood




On Wed, Jun 23, 2021 at 11:46 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> Try:
> ggplot(mydata, aes(x=W, y=`X/Y`)) + geom_violin(trim=FALSE)
>
> Note the use of *backticks*, ``, not single quotes, ' '  . ** They are
> different.**
>
> So, yes, your data got read in correctly, presumably because "/" is
> considered a character in your locale. It is not in mine. So my suggestion
> was indeed irrelevant.
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Wed, Jun 23, 2021 at 2:39 PM Mahmood Naderan <mahmood.nt at gmail.com>
> wrote:
>
>> Hi Bert,
>> I don't know what does "check.names" do here, but my commands look like
>>
>>
>> > mydata <- read.csv('r.3080..csv', header=T,row.names=1)
>>
>> > head(mydata)
>>                   W      A        X/Y
>> P1       M      1.469734 0.004144405
>> P2    M     20.584841 0.008010306
>> P3         M     53.519800 0.166034888
>> P4          M     42.308700 0.051545443
>> P5   M     99.236384 0.893037857
>> P6            M     94.279504 0.856837525
>>
>> So when I use
>>
>> p <- ggplot(mydata, aes(x=W, y='X/Y')) + geom_violin(trim=FALSE)
>>
>>
>> The output is not correct. I don't see values (scale) on the y-axis.
>> Anyway, I fixed that with a label.
>>
>> Regards,
>> Mahmood
>>
>>
>>
>>
>> On Wed, Jun 23, 2021 at 11:16 PM Bert Gunter <bgunter.4567 at gmail.com>
>> wrote:
>>
>>> I found your specification quite vague. What did you mean by a "data
>>> file" -- a data frame in R? -- a file in the file system?
>>>
>>> I may be completely wrong here, but another possibility is that you read
>>> your data into an R data.frame via, e.g. read.table() or read.csv(), but
>>> failed to specify the check.names = FALSE, argument. This would cause a
>>> column named "x/y" in your original table to be given the name "x.y" in R,
>>> as "x/y" is not a syntactically valid name. See ?make.names for details.
>>>
>>> As others have already said, enclosing non-syntactically valid names in
>>> back ticks usually works (maybe always works??). So for example:
>>>
>>> z<-data.frame (`a/b` = 1:5, y = 1:5, check.names = FALSE)
>>> plot(y ~ `a/b`, data = z) ## produces desired plot with correct label
>>> z  ## yields:
>>>   a/b y
>>> 1   1 1
>>> 2   2 2
>>> 3   3 3
>>> 4   4 4
>>> 5   5 5
>>>
>>> Of course, ignore if this is all irrelevant.
>>>
>>> Bert Gunter
>>>
>>> "The trouble with having an open mind is that people keep coming along
>>> and sticking things into it."
>>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>>
>>>
>>> On Wed, Jun 23, 2021 at 1:37 PM Mahmood Naderan <mahmood.nt at gmail.com>
>>> wrote:
>>>
>>>> Unfortunately, using 'X/Y' doesn't work either.
>>>> Instead I used labels like below
>>>>
>>>> P + scale_y_continuous(name="X/Y")
>>>>
>>>> Thanks for the suggestions.
>>>>
>>>> Regards,
>>>> Mahmood
>>>>
>>>>
>>>>
>>>>
>>>> On Wed, Jun 23, 2021 at 9:22 PM Eric Berger <ericjberger at gmail.com>
>>>> wrote:
>>>>
>>>> > If no one comes up with a better suggestion:
>>>> > a. Change the column name to "Y" so that you get the plot you want
>>>> > b. Use axis labels and legend text to show the text that you want.
>>>> (The
>>>> > user never has to know that you changed the column name ?)
>>>> >
>>>> > HTH,
>>>> > Eric
>>>> >
>>>> > On Wed, Jun 23, 2021 at 9:58 PM Mahmood Naderan <mahmood.nt at gmail.com
>>>> >
>>>> > wrote:
>>>> >
>>>> >> Hi
>>>> >> I have a column in my data file which is "X/Y". With '/' I want to
>>>> >> emphasize that values are the ratio of X over Y.
>>>> >> Problem is that in the following command for a violin plot, I am not
>>>> able
>>>> >> to specify that '/' even with double quotes.
>>>> >>
>>>> >> p <- ggplot(mydata, aes(x=W, y="X/Y")) + geom_violin(trim=FALSE)
>>>> >>
>>>> >> However, if I change that column to "Y" and use
>>>> >>
>>>> >> p <- ggplot(mydata, aes(x=W, y=Y)) + geom_violin(trim=FALSE)
>>>> >>
>>>> >> Then the plot will be correctly shown.
>>>> >> Any ideas for that?
>>>> >>
>>>> >> Regards,
>>>> >> Mahmood
>>>> >>
>>>> >>         [[alternative HTML version deleted]]
>>>> >>
>>>> >> ______________________________________________
>>>> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> >> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> >> PLEASE do read the posting guide
>>>> >> http://www.R-project.org/posting-guide.html
>>>> >> and provide commented, minimal, self-contained, reproducible code.
>>>> >>
>>>> >
>>>>
>>>>         [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Wed Jun 23 23:50:45 2021
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Wed, 23 Jun 2021 14:50:45 -0700
Subject: [R] Special characters in cell names
In-Reply-To: <A4729877-2A91-45C0-80DB-6BB63E340607@comcast.net>
References: <A4729877-2A91-45C0-80DB-6BB63E340607@comcast.net>
Message-ID: <58244E78-6298-4F52-B7E6-BD66A3E42901@comcast.net>

On my keyboard the key is share with the tilde symbol and is up on the left hand corner. 

Sent from my iPhone

> On Jun 23, 2021, at 2:45 PM, David Winsemius <dwinsemius at comcast.net> wrote:
> 
> ?Backticks. NOT apostrophes. 
> 
> ? David
> 
> Sent from my iPhone
> 
>> On Jun 23, 2021, at 2:40 PM, Mahmood Naderan <mahmood.nt at gmail.com> wrote:
>> 
>> ?Hi Bert,
>> I don't know what does "check.names" do here, but my commands look like
>> 
>> 
>>> mydata <- read.csv('r.3080..csv', header=T,row.names=1)
>> 
>>> head(mydata)
>>                 W      A        X/Y
>> P1       M      1.469734 0.004144405
>> P2    M     20.584841 0.008010306
>> P3         M     53.519800 0.166034888
>> P4          M     42.308700 0.051545443
>> P5   M     99.236384 0.893037857
>> P6            M     94.279504 0.856837525
>> 
>> So when I use
>> 
>> p <- ggplot(mydata, aes(x=W, y='X/Y')) + geom_violin(trim=FALSE)
>> 
>> 
>> The output is not correct. I don't see values (scale) on the y-axis.
>> Anyway, I fixed that with a label.
>> 
>> Regards,
>> Mahmood
>> 
>> 
>> 
>> 
>>>> On Wed, Jun 23, 2021 at 11:16 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>>> 
>>> I found your specification quite vague. What did you mean by a "data file"
>>> -- a data frame in R? -- a file in the file system?
>>> 
>>> I may be completely wrong here, but another possibility is that you read
>>> your data into an R data.frame via, e.g. read.table() or read.csv(), but
>>> failed to specify the check.names = FALSE, argument. This would cause a
>>> column named "x/y" in your original table to be given the name "x.y" in R,
>>> as "x/y" is not a syntactically valid name. See ?make.names for details.
>>> 
>>> As others have already said, enclosing non-syntactically valid names in
>>> back ticks usually works (maybe always works??). So for example:
>>> 
>>> z<-data.frame (`a/b` = 1:5, y = 1:5, check.names = FALSE)
>>> plot(y ~ `a/b`, data = z) ## produces desired plot with correct label
>>> z  ## yields:
>>> a/b y
>>> 1   1 1
>>> 2   2 2
>>> 3   3 3
>>> 4   4 4
>>> 5   5 5
>>> 
>>> Of course, ignore if this is all irrelevant.
>>> 
>>> Bert Gunter
>>> 
>>> "The trouble with having an open mind is that people keep coming along and
>>> sticking things into it."
>>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>> 
>>> 
>>> On Wed, Jun 23, 2021 at 1:37 PM Mahmood Naderan <mahmood.nt at gmail.com>
>>> wrote:
>>> 
>>>> Unfortunately, using 'X/Y' doesn't work either.
>>>> Instead I used labels like below
>>>> 
>>>> P + scale_y_continuous(name="X/Y")
>>>> 
>>>> Thanks for the suggestions.
>>>> 
>>>> Regards,
>>>> Mahmood
>>>> 
>>>> 
>>>> 
>>>> 
>>>> On Wed, Jun 23, 2021 at 9:22 PM Eric Berger <ericjberger at gmail.com>
>>>> wrote:
>>>> 
>>>>> If no one comes up with a better suggestion:
>>>>> a. Change the column name to "Y" so that you get the plot you want
>>>>> b. Use axis labels and legend text to show the text that you want. (The
>>>>> user never has to know that you changed the column name ?)
>>>>> 
>>>>> HTH,
>>>>> Eric
>>>>> 
>>>>> On Wed, Jun 23, 2021 at 9:58 PM Mahmood Naderan <mahmood.nt at gmail.com>
>>>>> wrote:
>>>>> 
>>>>>> Hi
>>>>>> I have a column in my data file which is "X/Y". With '/' I want to
>>>>>> emphasize that values are the ratio of X over Y.
>>>>>> Problem is that in the following command for a violin plot, I am not
>>>> able
>>>>>> to specify that '/' even with double quotes.
>>>>>> 
>>>>>> p <- ggplot(mydata, aes(x=W, y="X/Y")) + geom_violin(trim=FALSE)
>>>>>> 
>>>>>> However, if I change that column to "Y" and use
>>>>>> 
>>>>>> p <- ggplot(mydata, aes(x=W, y=Y)) + geom_violin(trim=FALSE)
>>>>>> 
>>>>>> Then the plot will be correctly shown.
>>>>>> Any ideas for that?
>>>>>> 
>>>>>> Regards,
>>>>>> Mahmood
>>>>>> 
>>>>>>       [[alternative HTML version deleted]]
>>>>>> 
>>>>>> ______________________________________________
>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>> PLEASE do read the posting guide
>>>>>> http://www.R-project.org/posting-guide.html
>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>> 
>>>>> 
>>>> 
>>>>       [[alternative HTML version deleted]]
>>>> 
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>> 
>>> 
>> 
>>   [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From @v|gro@@ @end|ng |rom ver|zon@net  Thu Jun 24 02:23:15 2021
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Wed, 23 Jun 2021 20:23:15 -0400
Subject: [R] How to spot/stop making the same mistake
In-Reply-To: <7CEAE6B1-7490-4EBB-AD81-D498C0B91E5F@dcn.davis.ca.us>
References: <c8708247-6875-dbff-ede0-db7ed5297c3d@gmail.com>
 <CAGgJW74x=7Q_ZN4YxLjxEZQebUo=xeB=wRTR_ZxBCc=T49d2YA@mail.gmail.com>
 <CAGxFJbScLrkn42Q0bZfrxiXkT7RZ_+wHWbsK+dT4nzVCbrvBtg@mail.gmail.com>
 <9e468a2e-1aba-d4f0-dc75-67e52f3f1a4a@gmail.com>
 <7CEAE6B1-7490-4EBB-AD81-D498C0B91E5F@dcn.davis.ca.us>
Message-ID: <013a01d7688f$2049abb0$60dd0310$@verizon.net>

Just a caution. There IS an operator of `!!` in the tidyverse called "bang bang" that does a kind of substitution and you can look up the help page for it as:

?`!!`

I just tried it on an example and it definitely will in some cases do this other evaluation.

I doubt this will clash, but of course parentheses can force the normal evaluation as in !(!(a))

And there is a !!! symbol there too to make a big bang, theoretically.

But not for novices ?

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Jeff Newmiller
Sent: Wednesday, June 23, 2021 2:10 PM
To: r-help at r-project.org; Phillips Rogfield <thebudget72 at gmail.com>; Bert Gunter <bgunter.4567 at gmail.com>; Eric Berger <ericjberger at gmail.com>
Cc: r-help at r-project.org
Subject: Re: [R] How to spot/stop making the same mistake

For the record, `!!` is not an operator so it does not "operate" on anything. The right ! does per the help page (?`!`) interpret non-zero values as TRUE and invert that logic, yielding a logical result even if the input is not logical. The left ! inverts that again, yielding a logical vector without the inversion.

On June 23, 2021 10:39:07 AM PDT, Phillips Rogfield <thebudget72 at gmail.com> wrote:
>Dear all,
>
>thank for for your suggestion.
>
>Yes I come from languages where 1 means TRUE and 0 means FALSE. In 
>particular from C/C++ and Python.
>
>Evidently this is not the case for R.
>
>In my mind I kind took for granted that that was the case (1=TRUE, 
>0=FALSE).
>
>Knowing this is not the case for R makes things simpler.
>
>Mine was just an example, sometimes I load datasets taken from outside 
>and variables are coded with 1/0 (for example, a treatment variable may
>
>be coded that way).
>
>I also did not know the !!() syntax!
>
>Thank you for your help and best regards.
>
>On 23/06/2021 17:55, Bert Gunter wrote:
>> Just as a way to save a bit of typing, instead of
>>
>> > as.logical(0:4)
>> [1] FALSE  TRUE  TRUE  TRUE  TRUE
>>
>> > !!(0:4)
>> [1] FALSE  TRUE  TRUE  TRUE  TRUE
>>
>> DO NOTE that the parentheses in the second expression should never be
>
>> omitted, a possible reason to prefer the as.logical() construction.
>> Also note that !!  "acts [only] on raw, logical and number-like 
>> vectors," whereas as.logical() is more general. e.g. (from ?logical):
>>
>> > charvec <- c("FALSE", "F", "False", "false",    "fAlse", "0",
>> +              "TRUE",  "T", "True",  "true",     "tRue",  "1")
>> > as.logical(charvec)
>>  [1] FALSE FALSE FALSE FALSE    NA    NA  TRUE  TRUE  TRUE  TRUE
> NA
>>    NA
>> > !!charvec
>> Error in !charvec : invalid argument type
>>
>>
>> Cheers,
>> Bert
>>
>> Bert Gunter
>>
>> "The trouble with having an open mind is that people keep coming
>along
>> and sticking things into it."
>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>
>>
>> On Wed, Jun 23, 2021 at 8:31 AM Eric Berger <ericjberger at gmail.com 
>> <mailto:ericjberger at gmail.com>> wrote:
>>
>>     In my code, instead of 't', I name a vector of indices with a
>>     meaningful
>>     name, such as idxV, to make it obvious.
>>
>>     Alternatively, a minor change in your style would be to replace
>your
>>     definition of t by
>>
>>     t <- as.logical(c(1,1,1,0,0))
>>
>>     HTH,
>>     Eric
>>
>>
>>     On Wed, Jun 23, 2021 at 6:11 PM Phillips Rogfield
>>     <thebudget72 at gmail.com <mailto:thebudget72 at gmail.com>>
>>     wrote:
>>
>>     > I make the same mistake all over again.
>>     >
>>     > In particular, suppose we have:
>>     >
>>     > a = c(1,2,3,4,5)
>>     >
>>     > and a variable that equals 1 for the elements I want to select:
>>     >
>>     > t = c(1,1,1,0,0)
>>     >
>>     > To select the first 3 elements.
>>     >
>>     > The problem is that
>>     >
>>     > a[t]
>>     >
>>     > would repeat the first element 3 times .....
>>     >
>>     > I have to either convert `t` to boolean:
>>     >
>>     > a[t==1]
>>     >
>>     > Or use `which`
>>     >
>>     > a[which(t==1)]
>>     >
>>     > How can I "spot" this error?
>>     >
>>     > It often happens in long scripts.
>>     >
>>     > Do I have to check the type each time?
>>     >
>>     > Do you have any suggestions?
>>     >
>>     > ______________________________________________
>>     > R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>>     -- To UNSUBSCRIBE and more, see
>>     > https://stat.ethz.ch/mailman/listinfo/r-help
>>     <https://stat.ethz.ch/mailman/listinfo/r-help>
>>     > PLEASE do read the posting guide
>>     > http://www.R-project.org/posting-guide.html
>>     <http://www.R-project.org/posting-guide.html>
>>     > and provide commented, minimal, self-contained, reproducible
>code.
>>     >
>>
>>             [[alternative HTML version deleted]]
>>
>>     ______________________________________________
>>     R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>--
>>     To UNSUBSCRIBE and more, see
>>     https://stat.ethz.ch/mailman/listinfo/r-help
>>     <https://stat.ethz.ch/mailman/listinfo/r-help>
>>     PLEASE do read the posting guide
>>     http://www.R-project.org/posting-guide.html
>>     <http://www.R-project.org/posting-guide.html>
>>     and provide commented, minimal, self-contained, reproducible
>code.
>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

--
Sent from my phone. Please excuse my brevity.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From petr@p|k@| @end|ng |rom prechez@@cz  Thu Jun 24 08:34:47 2021
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Thu, 24 Jun 2021 06:34:47 +0000
Subject: [R] Mean absolute error from data matrix
In-Reply-To: <1417157111.4007803.1624471397971@mail.yahoo.com>
References: <1417157111.4007803.1624471397971.ref@mail.yahoo.com>
 <1417157111.4007803.1624471397971@mail.yahoo.com>
Message-ID: <48f77bc93915477b9b331d36a4820142@SRVEXCHCM1302.precheza.cz>

Hi.

First, please do not post in HTML. It usually scrambles any posted code.

Second, as you did not post any code or data your message was not scrambled 
but I wonder what are columns and what are rows and what do you actually 
calculates.

From

Suppose the ist column of the
> second matrix is Sunday then we choose each column of the first matrix
> having Sunday

I deduct that you have 24 rows and 1827 or 365 columns.

It sems to me that you will have easier situation if you transpose matrix, set 
column with dates. From that you can choose all dates fulfilling criteria 
(being Sunday)
See help page for Date
weekdays(.leap.seconds)

and you can do any calculation for each row
See tapply, aggregate, ...

Cheers
Petr


> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Faheem Jan via
> R-help
> Sent: Wednesday, June 23, 2021 8:03 PM
> To: R-help Mailing List <r-help at r-project.org>
> Subject: [R] Mean absolute error from data matrix
>
> I have data matrix of order 24*2192 where 2192 are the days and 24 are
> hour's of a single day,so simple words I have 2192 days and each day having
> 24 observations.the data matrix is divided into two matrix,the ist matrix is 
> of
> order 24*1827 and second is of order 24*365. Suppose the ist column of the
> second matrix is Sunday then we choose each column of the first matrix
> having Sunday. The takeing the first column of data matrix is converted into
> vector and all the Sunday columns are converted into vectors. Then we
> calculate mean absolute errors for different pairs of the first vector of 
> the
> second matrix with each vector of first matrix. Similarly process is 
> repeated
> for the rest of the week days. It clear that such process is quite time
> consuming and hard if perform manually. Can any one provides the easiest
> way to do such problem.Regard
>
> Sent from Yahoo Mail on Android
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.

From m|n@h@|| @end|ng |rom um|ch@edu  Thu Jun 24 10:39:29 2021
From: m|n@h@|| @end|ng |rom um|ch@edu (Greg Minshall)
Date: Thu, 24 Jun 2021 11:39:29 +0300
Subject: [R] 
 interactively getting alist of functions for a given package?
In-Reply-To: Your message of "Wed, 23 Jun 2021 13:10:07 -0400."
 <59fe3cb4-6439-3763-1532-2a24a91777cf@gmail.com>
Message-ID: <2910934.1624523969@apollo2.minshall.org>

Duncan,

> Bert gave you an answer that depends on ls().  Whether there's
> something like "set<TAB>" that can return "asset" probably depends on
> your front end, and may be customizable using the facilities described
> in ?rcompgen.

thanks.  i am just using command line R on linux.  i tried setting
`rc.setting(fuzzy=TRUE, func=TRUE, ipck=TRUE)`, but
`data.table::set<TAB>` still only shows names that start with "set".
Bert's `ls` answer works, but did you have an idea of how else this
might be made to work with rcompgen?

cheers, Greg


From @te|@no@@o||@ @end|ng |rom reg|one@m@rche@|t  Thu Jun 24 15:34:31 2021
From: @te|@no@@o||@ @end|ng |rom reg|one@m@rche@|t (Stefano Sofia)
Date: Thu, 24 Jun 2021 13:34:31 +0000
Subject: [R] empty data frame and POSIXct data types
Message-ID: <8B435C9568170B469AE31E8891E8CC4FC65A79B6@ESINO.regionemarche.intra>

Dear R users,
I know that this question is silly (I am not a R newby) but I already wasted quite a lot of energies trying to fill in an empty data frame (with "POSIXct" "POSIXt" data type).

Suppose I create
mydf <- data.frame(data_POSIX=as.POSIXct(NA), value=as.numeric(NA))
day1 <- as.POSIXct("2018-02-01-00-00", format="%Y-%m-%d-%H-%M", tz="Etc/GMT-1")
day2 <- as.POSIXct("2018-02-02-00-00", format="%Y-%m-%d-%H-%M", tz="Etc/GMT-1")

then
mydf$data_POSIX <- c(day1, day2)

does not work, it gives me:
"Error in `$<-.data.frame`(`*tmp*`, data_POSIX, value = c(1517439600, 1517612400 :
  replacement has 2 rows, data has 1"

There are few basic concepts that I am missing.
Why c(day1, day2) is not a vector?
Why I am not able to populate my data frame?

Could somebody please give me the right hints?
Thank you for your precious help
Stefano


         (oo)
--oOO--( )--OOo--------------------------------------
Stefano Sofia PhD
Civil Protection - Marche Region - Italy
Meteo Section
Snow Section
Via del Colle Ameno 5
60126 Torrette di Ancona, Ancona (AN)
Uff: +39 071 806 7743
E-mail: stefano.sofia at regione.marche.it
---Oo---------oO----------------------------------------

________________________________

AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.

--
Questo messaggio  stato analizzato da Libraesva ESG ed  risultato non infetto.
This message was scanned by Libraesva ESG and is believed to be clean.


	[[alternative HTML version deleted]]


From o||v|er@crouzet @end|ng |rom un|v-n@nte@@|r  Thu Jun 24 15:44:47 2021
From: o||v|er@crouzet @end|ng |rom un|v-n@nte@@|r (Olivier Crouzet)
Date: Thu, 24 Jun 2021 15:44:47 +0200
Subject: [R] empty data frame and POSIXct data types
In-Reply-To: <8B435C9568170B469AE31E8891E8CC4FC65A79B6@ESINO.regionemarche.intra>
References: <8B435C9568170B469AE31E8891E8CC4FC65A79B6@ESINO.regionemarche.intra>
Message-ID: <20210624154447.a4e9607d626ceb9795a5587d@univ-nantes.fr>

Hi Stefano,

my guess is that you're expecting data recycling to apply but your
data frame is only one row long... therefore you can't insert a 2-row
vector into a 1-row vector. Recycling won't help.

You should specify the number of rows that will be required in your
data frame using (e.g) rep().

(here I use 10 rows as an example)

mydf <- data.frame(data_POSIX=rep(as.POSIXct(NA), 10),
value=as.numeric(NA)) 

Olivier.

On Thu, 24 Jun 2021 13:34:31
+0000 Stefano Sofia <stefano.sofia at regione.marche.it> wrote:

> Dear R users,
> I know that this question is silly (I am not a R newby) but I already
> wasted quite a lot of energies trying to fill in an empty data frame
> (with "POSIXct" "POSIXt" data type).
> 
> Suppose I create
> mydf <- data.frame(data_POSIX=as.POSIXct(NA), value=as.numeric(NA))
> day1 <- as.POSIXct("2018-02-01-00-00", format="%Y-%m-%d-%H-%M",
> tz="Etc/GMT-1") day2 <- as.POSIXct("2018-02-02-00-00",
> format="%Y-%m-%d-%H-%M", tz="Etc/GMT-1")
> 
> then
> mydf$data_POSIX <- c(day1, day2)
> 
> does not work, it gives me:
> "Error in `$<-.data.frame`(`*tmp*`, data_POSIX, value = c(1517439600,
> 1517612400 : replacement has 2 rows, data has 1"
> 
> There are few basic concepts that I am missing.
> Why c(day1, day2) is not a vector?
> Why I am not able to populate my data frame?
> 
> Could somebody please give me the right hints?
> Thank you for your precious help
> Stefano
> 
> 
>          (oo)
> --oOO--( )--OOo--------------------------------------
> Stefano Sofia PhD
> Civil Protection - Marche Region - Italy
> Meteo Section
> Snow Section
> Via del Colle Ameno 5
> 60126 Torrette di Ancona, Ancona (AN)
> Uff: +39 071 806 7743
> E-mail: stefano.sofia at regione.marche.it
> ---Oo---------oO----------------------------------------
> 
> ________________________________
> 
> AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu?
> contenere informazioni confidenziali, pertanto ? destinato solo a
> persone autorizzate alla ricezione. I messaggi di posta elettronica
> per i client di Regione Marche possono contenere informazioni
> confidenziali e con privilegi legali. Se non si ? il destinatario
> specificato, non leggere, copiare, inoltrare o archiviare questo
> messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo
> al mittente ed eliminarlo completamente dal sistema del proprio
> computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che,
> in caso di necessit? ed urgenza, la risposta al presente messaggio di
> posta elettronica pu? essere visionata da persone estranee al
> destinatario. IMPORTANT NOTICE: This e-mail message is intended to be
> received only by persons entitled to receive the confidential
> information it may contain. E-mail messages to clients of Regione
> Marche may contain information that is confidential and legally
> privileged. Please do not read, copy, forward, or store this message
> unless you are an intended recipient of it. If you have received this
> message in error, please forward it to the sender and delete it
> completely from your computer system.
> 
> --
> Questo messaggio  stato analizzato da Libraesva ESG ed  risultato non
> infetto. This message was scanned by Libraesva ESG and is believed to
> be clean.
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html and provide commented,
> minimal, self-contained, reproducible code.


-- 
  Olivier Crouzet, PhD
  http://olivier.ghostinthemachine.space
  /Ma?tre de Conf?rences/
  @LLING - Laboratoire de Linguistique de Nantes
    UMR6310 CNRS / Universit? de Nantes


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Jun 24 15:46:01 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 24 Jun 2021 06:46:01 -0700
Subject: [R] empty data frame and POSIXct data types
In-Reply-To: <8B435C9568170B469AE31E8891E8CC4FC65A79B6@ESINO.regionemarche.intra>
References: <8B435C9568170B469AE31E8891E8CC4FC65A79B6@ESINO.regionemarche.intra>
Message-ID: <239A2CA3-E909-494D-9552-819103118393@dcn.davis.ca.us>

1) It _is_ a vector. Why do you think it is not a vector?

2) Your data frame has one row, with an NA in the date_POSIX column. You cannot fit a vector of length 2 as a column into a data frame with only 1 row.

What are you trying to do? Do you really want to end up with a 2-row data frame or a 3 row data frame?

On June 24, 2021 6:34:31 AM PDT, Stefano Sofia <stefano.sofia at regione.marche.it> wrote:
>Dear R users,
>I know that this question is silly (I am not a R newby) but I already
>wasted quite a lot of energies trying to fill in an empty data frame
>(with "POSIXct" "POSIXt" data type).
>
>Suppose I create
>mydf <- data.frame(data_POSIX=as.POSIXct(NA), value=as.numeric(NA))
>day1 <- as.POSIXct("2018-02-01-00-00", format="%Y-%m-%d-%H-%M",
>tz="Etc/GMT-1")
>day2 <- as.POSIXct("2018-02-02-00-00", format="%Y-%m-%d-%H-%M",
>tz="Etc/GMT-1")
>
>then
>mydf$data_POSIX <- c(day1, day2)
>
>does not work, it gives me:
>"Error in `$<-.data.frame`(`*tmp*`, data_POSIX, value = c(1517439600,
>1517612400 :
>  replacement has 2 rows, data has 1"
>
>There are few basic concepts that I am missing.
>Why c(day1, day2) is not a vector?
>Why I am not able to populate my data frame?
>
>Could somebody please give me the right hints?
>Thank you for your precious help
>Stefano
>
>
>         (oo)
>--oOO--( )--OOo--------------------------------------
>Stefano Sofia PhD
>Civil Protection - Marche Region - Italy
>Meteo Section
>Snow Section
>Via del Colle Ameno 5
>60126 Torrette di Ancona, Ancona (AN)
>Uff: +39 071 806 7743
>E-mail: stefano.sofia at regione.marche.it
>---Oo---------oO----------------------------------------
>
>________________________________
>
>AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere
>informazioni confidenziali, pertanto ? destinato solo a persone
>autorizzate alla ricezione. I messaggi di posta elettronica per i
>client di Regione Marche possono contenere informazioni confidenziali e
>con privilegi legali. Se non si ? il destinatario specificato, non
>leggere, copiare, inoltrare o archiviare questo messaggio. Se si ?
>ricevuto questo messaggio per errore, inoltrarlo al mittente ed
>eliminarlo completamente dal sistema del proprio computer. Ai sensi
>dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit?
>ed urgenza, la risposta al presente messaggio di posta elettronica pu?
>essere visionata da persone estranee al destinatario.
>IMPORTANT NOTICE: This e-mail message is intended to be received only
>by persons entitled to receive the confidential information it may
>contain. E-mail messages to clients of Regione Marche may contain
>information that is confidential and legally privileged. Please do not
>read, copy, forward, or store this message unless you are an intended
>recipient of it. If you have received this message in error, please
>forward it to the sender and delete it completely from your computer
>system.
>
>--
>Questo messaggio  stato analizzato da Libraesva ESG ed  risultato non
>infetto.
>This message was scanned by Libraesva ESG and is believed to be clean.
>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From j@ke@e|m@tedt @end|ng |rom gm@||@com  Thu Jun 24 16:01:39 2021
From: j@ke@e|m@tedt @end|ng |rom gm@||@com (Jake Elmstedt)
Date: Thu, 24 Jun 2021 07:01:39 -0700
Subject: [R] 
 interactively getting alist of functions for a given package?
In-Reply-To: <2766374.1624451879@apollo2.minshall.org>
References: <2766374.1624451879@apollo2.minshall.org>
Message-ID: <aefbd9f8-f410-0ea8-b3c0-2f301109b9a2@gmail.com>

Here's something which is perhaps a bit more sophisticated than what's 
been offered already.

Here's a function which classifies and returns all of the objects in the 
namespace of a package.

There are three advantages to this approach over something like 
ls("package:ggplot2").

1) You don't need to have the library loaded to be able to see the 
objects in the namespace (though it must be installed of course).
2) ls("package:ggplot2") does not distinguish between the types of 
objects, so you'll get things like "diamonds" coming out of it with no 
indication that it's a data object.
3) With the namespace approach you will also get the internal functions 
and S3 methods in the namespace.

     package_objects <- function(pkg, pattern = "", only_functions = 
FALSE) {
       classify <- function(x, ns, all) {
         obj <- get(x, envir = ns)
         if (is.null(obj) || is.atomic(obj) && !is.object(obj)) {
           "values"
         } else {
           mode(obj)
         }
       }
       pkg <- as.character(substitute(pkg))
       ns <- asNamespace(pkg)
       ns_names <- ls(ns, all.names = TRUE, pattern = pattern)
       type <- sapply(ns_names, classify, ns = ns)
       if (only_functions) type[type != "function"] <- NA
       split(ns_names, type)
     }

     str(package_objects(ggplot2)) # All objects
     #> List of 4
     #>  $ environment: chr [1:121] ".__NAMESPACE__." 
".__S3MethodsTable__." "AxisSecondary" "Coord" ...
     #>  $ function   : chr [1:859] "$.ggproto" "$.ggproto_parent" 
"$<-.uneval" "%||%" ...
     #>  $ list       : chr [1:3] ".element_tree" ".store" ".zeroGrob"
     #>  $ values     : chr [1:13] ".__global__" ".all_aesthetics" 
".base_to_ggplot" ".packageName" ...

     str(package_objects(ggplot2, "", TRUE)) # All functions
     #> List of 1
     #>  $ function: chr [1:859] "$.ggproto" "$.ggproto_parent" 
"$<-.uneval" "%||%" ...

     package_objects(ggplot2, "^geom", TRUE) # Function starts with "geom"
     #> $`function`
     #>  [1] "geom_abline"            "geom_area" 
"geom_bar"
     #>  [4] "geom_bin2d"             "geom_blank" 
"geom_boxplot"
     #>  [7] "geom_col"               "geom_column" 
"geom_contour"
     #> [10] "geom_contour_filled"    "geom_count" 
"geom_crossbar"
     #> [13] "geom_curve"             "geom_density" 
"geom_density_2d"
     #> [16] "geom_density_2d_filled" "geom_density2d" 
"geom_density2d_filled"
     #> [19] "geom_dotplot"           "geom_errorbar" 
"geom_errorbarh"
     #> [22] "geom_freqpoly"          "geom_function" 
"geom_hex"
     #> [25] "geom_histogram"         "geom_hline" 
"geom_jitter"
     #> [28] "geom_label"             "geom_line" 
"geom_linerange"
     #> [31] "geom_map"               "geom_path" 
"geom_point"
     #> [34] "geom_pointrange"        "geom_polygon"           "geom_qq" 

     #> [37] "geom_qq_line"           "geom_quantile" 
"geom_raster"
     #> [40] "geom_rect"              "geom_ribbon" 
"geom_rug"
     #> [43] "geom_segment"           "geom_sf" 
"geom_sf_label"
     #> [46] "geom_sf_text"           "geom_smooth" 
"geom_spoke"
     #> [49] "geom_step"              "geom_text" 
"geom_tile"
     #> [52] "geom_violin"            "geom_vline"

     package_objects(ggplot2, "geom", TRUE) # Function contains "geom"
     #> $`function`
     #>  [1] "geom_abline"            "geom_area" 
"geom_bar"
     #>  [4] "geom_bin2d"             "geom_blank" 
"geom_boxplot"
     #>  [7] "geom_col"               "geom_column" 
"geom_contour"
     #> [10] "geom_contour_filled"    "geom_count" 
"geom_crossbar"
     #> [13] "geom_curve"             "geom_density" 
"geom_density_2d"
     #> [16] "geom_density_2d_filled" "geom_density2d" 
"geom_density2d_filled"
     #> [19] "geom_dotplot"           "geom_errorbar" 
"geom_errorbarh"
     #> [22] "geom_freqpoly"          "geom_function" 
"geom_hex"
     #> [25] "geom_histogram"         "geom_hline" 
"geom_jitter"
     #> [28] "geom_label"             "geom_line" 
"geom_linerange"
     #> [31] "geom_map"               "geom_path" 
"geom_point"
     #> [34] "geom_pointrange"        "geom_polygon"           "geom_qq" 

     #> [37] "geom_qq_line"           "geom_quantile" 
"geom_raster"
     #> [40] "geom_rect"              "geom_ribbon" 
"geom_rug"
     #> [43] "geom_segment"           "geom_sf" 
"geom_sf_label"
     #> [46] "geom_sf_text"           "geom_smooth" 
"geom_spoke"
     #> [49] "geom_step"              "geom_text" 
"geom_tile"
     #> [52] "geom_violin"            "geom_vline" 
"guide_geom"
     #> [55] "guide_geom.axis"        "guide_geom.bins" 
"guide_geom.colorbar"
     #> [58] "guide_geom.guide_none"  "guide_geom.legend" 
"guides_geom"
     #> [61] "update_geom_defaults"

     # Has "geom" or "Geom" anywhere in the object name
     package_objects(ggplot2, "[gG]eom")
     #> $environment
     #>  [1] "Geom"                "GeomAbline" 
"GeomAnnotationMap"
     #>  [4] "GeomArea"            "GeomBar"             "GeomBlank" 

     #>  [7] "GeomBoxplot"         "GeomCol"             "GeomContour" 

     #> [10] "GeomContourFilled"   "GeomCrossbar"        "GeomCurve" 

     #> [13] "GeomCustomAnn"       "GeomDensity"         "GeomDensity2d" 

     #> [16] "GeomDensity2dFilled" "GeomDotplot"         "GeomErrorbar" 

     #> [19] "GeomErrorbarh"       "GeomFunction"        "GeomHex" 

     #> [22] "GeomHline"           "GeomLabel"           "GeomLine" 

     #> [25] "GeomLinerange"       "GeomLogticks"        "GeomMap" 

     #> [28] "GeomPath"            "GeomPoint" 
"GeomPointrange"
     #> [31] "GeomPolygon"         "GeomQuantile"        "GeomRaster" 

     #> [34] "GeomRasterAnn"       "GeomRect"            "GeomRibbon" 

     #> [37] "GeomRug"             "GeomSegment"         "GeomSf" 

     #> [40] "GeomSmooth"          "GeomSpoke"           "GeomStep" 

     #> [43] "GeomText"            "GeomTile"            "GeomViolin" 

     #> [46] "GeomVline"
     #>
     #> $`function`
     #>  [1] "geom_abline"            "geom_area" 
"geom_bar"
     #>  [4] "geom_bin2d"             "geom_blank" 
"geom_boxplot"
     #>  [7] "geom_col"               "geom_column" 
"geom_contour"
     #> [10] "geom_contour_filled"    "geom_count" 
"geom_crossbar"
     #> [13] "geom_curve"             "geom_density" 
"geom_density_2d"
     #> [16] "geom_density_2d_filled" "geom_density2d" 
"geom_density2d_filled"
     #> [19] "geom_dotplot"           "geom_errorbar" 
"geom_errorbarh"
     #> [22] "geom_freqpoly"          "geom_function" 
"geom_hex"
     #> [25] "geom_histogram"         "geom_hline" 
"geom_jitter"
     #> [28] "geom_label"             "geom_line" 
"geom_linerange"
     #> [31] "geom_map"               "geom_path" 
"geom_point"
     #> [34] "geom_pointrange"        "geom_polygon"           "geom_qq" 

     #> [37] "geom_qq_line"           "geom_quantile" 
"geom_raster"
     #> [40] "geom_rect"              "geom_ribbon" 
"geom_rug"
     #> [43] "geom_segment"           "geom_sf" 
"geom_sf_label"
     #> [46] "geom_sf_text"           "geom_smooth" 
"geom_spoke"
     #> [49] "geom_step"              "geom_text" 
"geom_tile"
     #> [52] "geom_violin"            "geom_vline" 
"guide_geom"
     #> [55] "guide_geom.axis"        "guide_geom.bins" 
"guide_geom.colorbar"
     #> [58] "guide_geom.guide_none"  "guide_geom.legend" 
"guides_geom"
     #> [61] "update_geom_defaults"

Created on 2021-06-24 by the [reprex 
package](https://reprex.tidyverse.org) (v2.0.0.9000)


From @te|@no@@o||@ @end|ng |rom reg|one@m@rche@|t  Thu Jun 24 16:27:37 2021
From: @te|@no@@o||@ @end|ng |rom reg|one@m@rche@|t (Stefano Sofia)
Date: Thu, 24 Jun 2021 14:27:37 +0000
Subject: [R] empty data frame and POSIXct data types
In-Reply-To: <239A2CA3-E909-494D-9552-819103118393@dcn.davis.ca.us>
References: <8B435C9568170B469AE31E8891E8CC4FC65A79B6@ESINO.regionemarche.intra>,
 <239A2CA3-E909-494D-9552-819103118393@dcn.davis.ca.us>
Message-ID: <8B435C9568170B469AE31E8891E8CC4FC65A79FF@ESINO.regionemarche.intra>

Thank you Jeff and thank you Andrew

1) Yes, I understand that it is a vector, even though is.vector(c(day1, day2)) is FALSE. Andrew explained to me why: it has attributes 'class' and 'tzone'.
2) I understand now that I created a data frame with only one row, and I am trying to fit a vector of length 2. I thought that, once created an empty data frame, I could fit any vector without specifying the length since the beginning.

Now I will think about it.
Thank you
Stefano

         (oo)
--oOO--( )--OOo--------------------------------------
Stefano Sofia PhD
Civil Protection - Marche Region - Italy
Meteo Section
Snow Section
Via del Colle Ameno 5
60126 Torrette di Ancona, Ancona (AN)
Uff: +39 071 806 7743
E-mail: stefano.sofia at regione.marche.it
---Oo---------oO----------------------------------------

________________________________________
Da: Jeff Newmiller [jdnewmil at dcn.davis.ca.us]
Inviato: gioved? 24 giugno 2021 15.46
A: r-help at r-project.org; Stefano Sofia; r-help mailing list
Oggetto: Re: [R] empty data frame and POSIXct data types

1) It _is_ a vector. Why do you think it is not a vector?

2) Your data frame has one row, with an NA in the date_POSIX column. You cannot fit a vector of length 2 as a column into a data frame with only 1 row.

What are you trying to do? Do you really want to end up with a 2-row data frame or a 3 row data frame?

On June 24, 2021 6:34:31 AM PDT, Stefano Sofia <stefano.sofia at regione.marche.it> wrote:
>Dear R users,
>I know that this question is silly (I am not a R newby) but I already
>wasted quite a lot of energies trying to fill in an empty data frame
>(with "POSIXct" "POSIXt" data type).
>
>Suppose I create
>mydf <- data.frame(data_POSIX=as.POSIXct(NA), value=as.numeric(NA))
>day1 <- as.POSIXct("2018-02-01-00-00", format="%Y-%m-%d-%H-%M",
>tz="Etc/GMT-1")
>day2 <- as.POSIXct("2018-02-02-00-00", format="%Y-%m-%d-%H-%M",
>tz="Etc/GMT-1")
>
>then
>mydf$data_POSIX <- c(day1, day2)
>
>does not work, it gives me:
>"Error in `$<-.data.frame`(`*tmp*`, data_POSIX, value = c(1517439600,
>1517612400 :
>  replacement has 2 rows, data has 1"
>
>There are few basic concepts that I am missing.
>Why c(day1, day2) is not a vector?
>Why I am not able to populate my data frame?
>
>Could somebody please give me the right hints?
>Thank you for your precious help
>Stefano
>
>
>         (oo)
>--oOO--( )--OOo--------------------------------------
>Stefano Sofia PhD
>Civil Protection - Marche Region - Italy
>Meteo Section
>Snow Section
>Via del Colle Ameno 5
>60126 Torrette di Ancona, Ancona (AN)
>Uff: +39 071 806 7743
>E-mail: stefano.sofia at regione.marche.it
>---Oo---------oO----------------------------------------
>
>________________________________
>
>AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere
>informazioni confidenziali, pertanto ? destinato solo a persone
>autorizzate alla ricezione. I messaggi di posta elettronica per i
>client di Regione Marche possono contenere informazioni confidenziali e
>con privilegi legali. Se non si ? il destinatario specificato, non
>leggere, copiare, inoltrare o archiviare questo messaggio. Se si ?
>ricevuto questo messaggio per errore, inoltrarlo al mittente ed
>eliminarlo completamente dal sistema del proprio computer. Ai sensi
>dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit?
>ed urgenza, la risposta al presente messaggio di posta elettronica pu?
>essere visionata da persone estranee al destinatario.
>IMPORTANT NOTICE: This e-mail message is intended to be received only
>by persons entitled to receive the confidential information it may
>contain. E-mail messages to clients of Regione Marche may contain
>information that is confidential and legally privileged. Please do not
>read, copy, forward, or store this message unless you are an intended
>recipient of it. If you have received this message in error, please
>forward it to the sender and delete it completely from your computer
>system.
>
>--
>Questo messaggio  stato analizzato da Libraesva ESG ed  risultato non
>infetto.
>This message was scanned by Libraesva ESG and is believed to be clean.
>
>
>       [[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://urlsand.esvalabs.com/?u=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&e=5a635173&h=06ff70f3&f=y&p=y
>PLEASE do read the posting guide
> https://urlsand.esvalabs.com/?u=http%3A%2F%2Fwww.R-project.org%2Fposting-guide.html&e=5a635173&h=e12f63e8&f=y&p=y
>and provide commented, minimal, self-contained, reproducible code.

--
Sent from my phone. Please excuse my brevity.

--

Questo messaggio  stato analizzato con Libraesva ESG ed  risultato non infetto.


________________________________

AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.

--
Questo messaggio  stato analizzato da Libraesva ESG ed  risultato non infetto.
This message was scanned by Libraesva ESG and is believed to be clean.


From deep@y@n@@@rk@r @end|ng |rom gm@||@com  Thu Jun 24 17:00:50 2021
From: deep@y@n@@@rk@r @end|ng |rom gm@||@com (Deepayan Sarkar)
Date: Thu, 24 Jun 2021 20:30:50 +0530
Subject: [R] 
 interactively getting alist of functions for a given package?
In-Reply-To: <2910934.1624523969@apollo2.minshall.org>
References: <59fe3cb4-6439-3763-1532-2a24a91777cf@gmail.com>
 <2910934.1624523969@apollo2.minshall.org>
Message-ID: <CADfFDC6wVyGBMmavZqR2t=W_5H47yHWxr=t9HvgF8Sw7fJBBrQ@mail.gmail.com>

On Thu, Jun 24, 2021 at 2:10 PM Greg Minshall <minshall at umich.edu> wrote:
>
> Duncan,
>
> > Bert gave you an answer that depends on ls().  Whether there's
> > something like "set<TAB>" that can return "asset" probably depends on
> > your front end, and may be customizable using the facilities described
> > in ?rcompgen.
>
> thanks.  i am just using command line R on linux.  i tried setting
> `rc.setting(fuzzy=TRUE, func=TRUE, ipck=TRUE)`, but
> `data.table::set<TAB>` still only shows names that start with "set".
> Bert's `ls` answer works, but did you have an idea of how else this
> might be made to work with rcompgen?

That's not currently supported. It would not be difficult to get the
completion mechanism to return these matches; e.g.,

utils:::findMatches("set", ls(getNamespace("data.table")))

You can even experiment a bit with something like (only for normal completions)

complete.partial <- function(.CompletionEnv)
{
    text <- .CompletionEnv[["token"]]
    comps <- apropos(text)
    .CompletionEnv[["comps"]] <- comps
}

rc.options(custom.completer = complete.partial)

The problem is that readline's interface doesn't really allow you to
choose one of these completions easily, and you will need to
explicitly type out at least the prefix.

Another problem with namespace completion in particular is that
readline will first complete to a non-trivial common prefix, if any.
This means that if

data.table::set<TAB>

gives multiple completions, all starting with "data.table::", readline
will delete the "set" part, and subsequent attempts will just try to
complete "data.table::".

So adding an option to allow apropos-type matches is not difficult,
but given that RStudio has its own completion, and the limited
functionality of readline, not sure it's worth the effort.

Best,
-Deepayan


> cheers, Greg
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Thu Jun 24 17:27:10 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Thu, 24 Jun 2021 16:27:10 +0100
Subject: [R] empty data frame and POSIXct data types
In-Reply-To: <8B435C9568170B469AE31E8891E8CC4FC65A79FF@ESINO.regionemarche.intra>
References: <8B435C9568170B469AE31E8891E8CC4FC65A79B6@ESINO.regionemarche.intra>
 <239A2CA3-E909-494D-9552-819103118393@dcn.davis.ca.us>
 <8B435C9568170B469AE31E8891E8CC4FC65A79FF@ESINO.regionemarche.intra>
Message-ID: <60a79db5-9078-d6dd-326c-62b2834575b7@sapo.pt>

Hello,

Inline.

?s 15:27 de 24/06/21, Stefano Sofia escreveu:
> Thank you Jeff and thank you Andrew
> 
> 1) Yes, I understand that it is a vector, even though is.vector(c(day1, day2)) is FALSE. Andrew explained to me why: it has attributes 'class' and 'tzone'.
> 2) I understand now that I created a data frame with only one row, and I am trying to fit a vector of length 2. I thought that, once created an empty data frame, 

But the data.frame is not empty, it has one row with perfectly valid NA's.


mydf
#  data_POSIX value
#1       <NA>    NA



You can rbind an empty df with another with the new values.


mydf2 <- data.frame()
mydf2
#data frame with 0 columns and 0 rows

rbind(mydf2, data.frame(data_POSIX = c(day1, day2), value = NA))
#  data_POSIX value
#1 2018-02-01    NA
#2 2018-02-02    NA


But once again assignment will fail, and for the same reason.


Hope this helps,

Rui Barradas




I could fit any vector without specifying the length since the beginning.
> 
> Now I will think about it.
> Thank you
> Stefano
> 
>           (oo)
> --oOO--( )--OOo--------------------------------------
> Stefano Sofia PhD
> Civil Protection - Marche Region - Italy
> Meteo Section
> Snow Section
> Via del Colle Ameno 5
> 60126 Torrette di Ancona, Ancona (AN)
> Uff: +39 071 806 7743
> E-mail: stefano.sofia at regione.marche.it
> ---Oo---------oO----------------------------------------
> 
> ________________________________________
> Da: Jeff Newmiller [jdnewmil at dcn.davis.ca.us]
> Inviato: gioved? 24 giugno 2021 15.46
> A: r-help at r-project.org; Stefano Sofia; r-help mailing list
> Oggetto: Re: [R] empty data frame and POSIXct data types
> 
> 1) It _is_ a vector. Why do you think it is not a vector?
> 
> 2) Your data frame has one row, with an NA in the date_POSIX column. You cannot fit a vector of length 2 as a column into a data frame with only 1 row.
> 
> What are you trying to do? Do you really want to end up with a 2-row data frame or a 3 row data frame?
> 
> On June 24, 2021 6:34:31 AM PDT, Stefano Sofia <stefano.sofia at regione.marche.it> wrote:
>> Dear R users,
>> I know that this question is silly (I am not a R newby) but I already
>> wasted quite a lot of energies trying to fill in an empty data frame
>> (with "POSIXct" "POSIXt" data type).
>>
>> Suppose I create
>> mydf <- data.frame(data_POSIX=as.POSIXct(NA), value=as.numeric(NA))
>> day1 <- as.POSIXct("2018-02-01-00-00", format="%Y-%m-%d-%H-%M",
>> tz="Etc/GMT-1")
>> day2 <- as.POSIXct("2018-02-02-00-00", format="%Y-%m-%d-%H-%M",
>> tz="Etc/GMT-1")
>>
>> then
>> mydf$data_POSIX <- c(day1, day2)
>>
>> does not work, it gives me:
>> "Error in `$<-.data.frame`(`*tmp*`, data_POSIX, value = c(1517439600,
>> 1517612400 :
>>   replacement has 2 rows, data has 1"
>>
>> There are few basic concepts that I am missing.
>> Why c(day1, day2) is not a vector?
>> Why I am not able to populate my data frame?
>>
>> Could somebody please give me the right hints?
>> Thank you for your precious help
>> Stefano
>>
>>
>>          (oo)
>> --oOO--( )--OOo--------------------------------------
>> Stefano Sofia PhD
>> Civil Protection - Marche Region - Italy
>> Meteo Section
>> Snow Section
>> Via del Colle Ameno 5
>> 60126 Torrette di Ancona, Ancona (AN)
>> Uff: +39 071 806 7743
>> E-mail: stefano.sofia at regione.marche.it
>> ---Oo---------oO----------------------------------------
>>
>> ________________________________
>>
>> AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere
>> informazioni confidenziali, pertanto ? destinato solo a persone
>> autorizzate alla ricezione. I messaggi di posta elettronica per i
>> client di Regione Marche possono contenere informazioni confidenziali e
>> con privilegi legali. Se non si ? il destinatario specificato, non
>> leggere, copiare, inoltrare o archiviare questo messaggio. Se si ?
>> ricevuto questo messaggio per errore, inoltrarlo al mittente ed
>> eliminarlo completamente dal sistema del proprio computer. Ai sensi
>> dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit?
>> ed urgenza, la risposta al presente messaggio di posta elettronica pu?
>> essere visionata da persone estranee al destinatario.
>> IMPORTANT NOTICE: This e-mail message is intended to be received only
>> by persons entitled to receive the confidential information it may
>> contain. E-mail messages to clients of Regione Marche may contain
>> information that is confidential and legally privileged. Please do not
>> read, copy, forward, or store this message unless you are an intended
>> recipient of it. If you have received this message in error, please
>> forward it to the sender and delete it completely from your computer
>> system.
>>
>> --
>> Questo messaggio  stato analizzato da Libraesva ESG ed  risultato non
>> infetto.
>> This message was scanned by Libraesva ESG and is believed to be clean.
>>
>>
>>        [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://urlsand.esvalabs.com/?u=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&e=5a635173&h=06ff70f3&f=y&p=y
>> PLEASE do read the posting guide
>> https://urlsand.esvalabs.com/?u=http%3A%2F%2Fwww.R-project.org%2Fposting-guide.html&e=5a635173&h=e12f63e8&f=y&p=y
>> and provide commented, minimal, self-contained, reproducible code.
> 
> --
> Sent from my phone. Please excuse my brevity.
> 
> --
> 
> Questo messaggio  stato analizzato con Libraesva ESG ed  risultato non infetto.
> 
> 
> ________________________________
> 
> AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
> IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.
> 
> --
> Questo messaggio  stato analizzato da Libraesva ESG ed  risultato non infetto.
> This message was scanned by Libraesva ESG and is believed to be clean.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From k@p4||n @end|ng |rom gm@||@com  Thu Jun 24 17:47:31 2021
From: k@p4||n @end|ng |rom gm@||@com (kap4lin)
Date: Thu, 24 Jun 2021 11:47:31 -0400
Subject: [R] checksums for R src file
Message-ID: <CAAu6L-EqdL8wKvCV69PCSUQqamg4hPCJaHXcDS_Z=589+bL-LA@mail.gmail.com>

When I download the file,
https://cran.r-project.org/src/base/R-4/R-4.1.0.tar.gz (or anything
similar) is there a checksum for the file I can compare it to?

Thanks
PK

	[[alternative HTML version deleted]]


From pd@|gd @end|ng |rom gm@||@com  Thu Jun 24 19:43:09 2021
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Thu, 24 Jun 2021 19:43:09 +0200
Subject: [R] checksums for R src file
In-Reply-To: <CAAu6L-EqdL8wKvCV69PCSUQqamg4hPCJaHXcDS_Z=589+bL-LA@mail.gmail.com>
References: <CAAu6L-EqdL8wKvCV69PCSUQqamg4hPCJaHXcDS_Z=589+bL-LA@mail.gmail.com>
Message-ID: <6F2A8605-892E-4A8A-8566-89C4D20FCB90@gmail.com>

Yes, these are in the release announcements. They are deliberately not kept with the actual files due to security considerations. The easiest source is

https://stat.ethz.ch/pipermail/r-announce/2021/date.html

(because that mailing list doesn't contain much other than release announcements).

- Peter D.

> On 24 Jun 2021, at 17:47 , kap4lin <kap4lin at gmail.com> wrote:
> 
> When I download the file,
> https://cran.r-project.org/src/base/R-4/R-4.1.0.tar.gz (or anything
> similar) is there a checksum for the file I can compare it to?
> 
> Thanks
> PK
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From k@p4||n @end|ng |rom gm@||@com  Thu Jun 24 19:59:21 2021
From: k@p4||n @end|ng |rom gm@||@com (kap4lin)
Date: Thu, 24 Jun 2021 13:59:21 -0400
Subject: [R] checksums for R src file
In-Reply-To: <6F2A8605-892E-4A8A-8566-89C4D20FCB90@gmail.com>
References: <CAAu6L-EqdL8wKvCV69PCSUQqamg4hPCJaHXcDS_Z=589+bL-LA@mail.gmail.com>
 <6F2A8605-892E-4A8A-8566-89C4D20FCB90@gmail.com>
Message-ID: <CAAu6L-GPzCNWXYr8At3Cc-TGVEoLxrT+M+FbbF-XBwEwYpfLOw@mail.gmail.com>

Perfect, Thank you!

On Thu, Jun 24, 2021, 1:43 PM peter dalgaard <pdalgd at gmail.com> wrote:

> Yes, these are in the release announcements. They are deliberately not
> kept with the actual files due to security considerations. The easiest
> source is
>
> https://stat.ethz.ch/pipermail/r-announce/2021/date.html
>
> (because that mailing list doesn't contain much other than release
> announcements).
>
> - Peter D.
>
> > On 24 Jun 2021, at 17:47 , kap4lin <kap4lin at gmail.com> wrote:
> >
> > When I download the file,
> > https://cran.r-project.org/src/base/R-4/R-4.1.0.tar.gz (or anything
> > similar) is there a checksum for the file I can compare it to?
> >
> > Thanks
> > PK
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> --
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>
>

	[[alternative HTML version deleted]]


From m|n@h@|| @end|ng |rom um|ch@edu  Fri Jun 25 05:27:06 2021
From: m|n@h@|| @end|ng |rom um|ch@edu (Greg Minshall)
Date: Fri, 25 Jun 2021 06:27:06 +0300
Subject: [R] 
 interactively getting alist of functions for a given package?
In-Reply-To: Your message of "Thu, 24 Jun 2021 07:01:39 -0700."
 <aefbd9f8-f410-0ea8-b3c0-2f301109b9a2@gmail.com>
Message-ID: <3024614.1624591626@apollo2.minshall.org>

Jake and Deepayan,

both very nice and useful solutions.  thank you.

Greg


From no@p@m @end|ng |rom ||@@e@NA  Fri Jun 25 07:05:45 2021
From: no@p@m @end|ng |rom ||@@e@NA (Dr Eberhard Lisse)
Date: Fri, 25 Jun 2021 07:05:45 +0200
Subject: [R] checksums for R src file
In-Reply-To: <6F2A8605-892E-4A8A-8566-89C4D20FCB90@gmail.com>
References: <CAAu6L-EqdL8wKvCV69PCSUQqamg4hPCJaHXcDS_Z=589+bL-LA@mail.gmail.com>
 <6F2A8605-892E-4A8A-8566-89C4D20FCB90@gmail.com>
Message-ID: <sb3o7a$5vl$1@ciao.gmane.io>

Peter,

have you ever though about GPG signing them, with the armor (ASCII)
files accompanying them on the server?

el



On 2021-06-24 19:43 , peter dalgaard wrote:
> Yes, these are in the release announcements.  They are deliberately
> not kept with the actual files due to security considerations.  The
> easiest source is
> 
> https://stat.ethz.ch/pipermail/r-announce/2021/date.html
> 
> (because that mailing list doesn't contain much other than release
> announcements).
> 
> - Peter D.
> 
>> On 24 Jun 2021, at 17:47 , kap4lin <kap4lin at gmail.com> wrote:
>>
>> When I download the file,
>> https://cran.r-project.org/src/base/R-4/R-4.1.0.tar.gz (or anything
>> similar) is there a checksum for the file I can compare it to?
>>
>> Thanks
>> PK
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>


From t@r|qkh@@|r| @end|ng |rom gm@||@com  Fri Jun 25 20:54:44 2021
From: t@r|qkh@@|r| @end|ng |rom gm@||@com (Tariq Khasiri)
Date: Fri, 25 Jun 2021 13:54:44 -0500
Subject: [R] Error in var(if (is.vector(x) || is.factor(x)) x else
 as.double(x), na.rm = na.rm)
Message-ID: <CAFy_oHD2Rv8FOaQyuhD47hLTHsRZs_itOPhbp0ksH2c4891mZA@mail.gmail.com>

Just trying to replicate the Callaway and Sant'Anna  average treatment
group effect for my research where I would like to see how a particular law
implementation is affecting all the treated states' wages compared to the
never treated states' ( control group ) wage :

## Cleaning treated and never treated

dat$treat = ifelse(is.na(dat$law_effective_year),0,1)

dat$nevertreated = ifelse(dat$treat==0,1,0)

## Command for CSDID

out1 <- att_gt(yname="ln_incwage",
               tname="year",
               gname="law_effective_year",
               xformla=~male + age + age2 + age3 + age4 + black + asian +
hispanic + lths + hsdegree + somecollege ,
               data=dat,
               est_method = "dr", # "dr" is doubly robust. "ipw" is inverse
probability weighting. "reg" is regression
               control_group = "nevertreated", # set the comparison group
which is either "nevertreated" or "notyettreated"
               print_details = FALSE, # if TRUE, print detailed results
               clustervars = "statefip", # cluster level
               panel = FALSE) # wh)

summary(out1)

But the error I'm getting is -

Error in var(if (is.vector(x) || is.factor(x)) x else as.double(x), na.rm =
na.rm) :
  Calling var(x) on a factor x is defunct.
  Use something like 'all(duplicated(x)[-1L])' to test for a constant
vector.

Can anyone tell me what's the issue ?

	[[alternative HTML version deleted]]


From m|@ojpm @end|ng |rom gm@||@com  Sat Jun 26 10:34:12 2021
From: m|@ojpm @end|ng |rom gm@||@com (John)
Date: Sat, 26 Jun 2021 16:34:12 +0800
Subject: [R] dynamic panel data with weight
Message-ID: <CABcx46CpaCn_uABvpHSta-JRseLnD231e0kpMHb6N328EWZx_g@mail.gmail.com>

Hi,

   I would like to conduct estimation for dynamic panel data with weight in
order to account for the importance of each observation. Is there any
package that can do it?

   To my knowledge, there are two packages that are closest to my goal, but
they do not do it. (Correct me if I am wrong)

1. plm -- panel data estimation; the latest version can account for weight,
but no "dynamic"

2. pdynmc -- dynamic panel data, but no weight

   Thanks,

J

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Jun 26 10:45:45 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 26 Jun 2021 04:45:45 -0400
Subject: [R] Error in var(if (is.vector(x) || is.factor(x)) x else
 as.double(x), na.rm = na.rm)
In-Reply-To: <CAFy_oHD2Rv8FOaQyuhD47hLTHsRZs_itOPhbp0ksH2c4891mZA@mail.gmail.com>
References: <CAFy_oHD2Rv8FOaQyuhD47hLTHsRZs_itOPhbp0ksH2c4891mZA@mail.gmail.com>
Message-ID: <6bb3e7c1-3dcd-ba3e-d5f1-ff04cf47b377@gmail.com>

This is a duplicate of your SO post:

https://stackoverflow.com/questions/68135737/error-in-varif-is-vectorx-is-factorx-x-else-as-doublex

There you were asked for some data to make it reproducible.  You 
shouldn't assume that people here are any more clairvoyant than the SO 
readers.

Duncan Murdoch

On 25/06/2021 2:54 p.m., Tariq Khasiri wrote:
> Just trying to replicate the Callaway and Sant'Anna  average treatment
> group effect for my research where I would like to see how a particular law
> implementation is affecting all the treated states' wages compared to the
> never treated states' ( control group ) wage :
> 
> ## Cleaning treated and never treated
> 
> dat$treat = ifelse(is.na(dat$law_effective_year),0,1)
> 
> dat$nevertreated = ifelse(dat$treat==0,1,0)
> 
> ## Command for CSDID
> 
> out1 <- att_gt(yname="ln_incwage",
>                 tname="year",
>                 gname="law_effective_year",
>                 xformla=~male + age + age2 + age3 + age4 + black + asian +
> hispanic + lths + hsdegree + somecollege ,
>                 data=dat,
>                 est_method = "dr", # "dr" is doubly robust. "ipw" is inverse
> probability weighting. "reg" is regression
>                 control_group = "nevertreated", # set the comparison group
> which is either "nevertreated" or "notyettreated"
>                 print_details = FALSE, # if TRUE, print detailed results
>                 clustervars = "statefip", # cluster level
>                 panel = FALSE) # wh)
> 
> summary(out1)
> 
> But the error I'm getting is -
> 
> Error in var(if (is.vector(x) || is.factor(x)) x else as.double(x), na.rm =
> na.rm) :
>    Calling var(x) on a factor x is defunct.
>    Use something like 'all(duplicated(x)[-1L])' to test for a constant
> vector.
> 
> Can anyone tell me what's the issue ?
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From r@turner @end|ng |rom @uck|@nd@@c@nz  Sat Jun 26 13:37:07 2021
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Sat, 26 Jun 2021 23:37:07 +1200
Subject: [R] Error in var(if (is.vector(x) || is.factor(x)) x else
 as.double(x), na.rm = na.rm)
In-Reply-To: <CAFy_oHD2Rv8FOaQyuhD47hLTHsRZs_itOPhbp0ksH2c4891mZA@mail.gmail.com>
References: <CAFy_oHD2Rv8FOaQyuhD47hLTHsRZs_itOPhbp0ksH2c4891mZA@mail.gmail.com>
Message-ID: <20210626233707.305351d9@rolf-Latitude-E7470>


On Fri, 25 Jun 2021 13:54:44 -0500
Tariq Khasiri <tariqkhasiri at gmail.com> wrote:

> Just trying to replicate the Callaway and Sant'Anna  average treatment
> group effect for my research where I would like to see how a
> particular law implementation is affecting all the treated states'
> wages compared to the never treated states' ( control group ) wage :
> 
> ## Cleaning treated and never treated
> 
> dat$treat = ifelse(is.na(dat$law_effective_year),0,1)
> 
> dat$nevertreated = ifelse(dat$treat==0,1,0)
> 
> ## Command for CSDID
> 
> out1 <- att_gt(yname="ln_incwage",
>                tname="year",
>                gname="law_effective_year",
>                xformla=~male + age + age2 + age3 + age4 + black +
> asian + hispanic + lths + hsdegree + somecollege ,
>                data=dat,
>                est_method = "dr", # "dr" is doubly robust. "ipw" is
> inverse probability weighting. "reg" is regression
>                control_group = "nevertreated", # set the comparison
> group which is either "nevertreated" or "notyettreated"
>                print_details = FALSE, # if TRUE, print detailed
> results clustervars = "statefip", # cluster level
>                panel = FALSE) # wh)
> 
> summary(out1)
> 
> But the error I'm getting is -
> 
> Error in var(if (is.vector(x) || is.factor(x)) x else as.double(x),
> na.rm = na.rm) :
>   Calling var(x) on a factor x is defunct.
>   Use something like 'all(duplicated(x)[-1L])' to test for a constant
> vector.
> 
> Can anyone tell me what's the issue ?
> 
> 	[[alternative HTML version deleted]]

(1) Please don't post in html.  (Read the posting guide.)

(2) Where does the function att_gt() come from?  It's not in base R so
it is presumably from a contributed package.  Don't expect your
readers/helpers to be telepathic.

(3) Given that it's from a contributed package, you should in the first
instance contact the maintainer of the package rather than this list.
Only if you get no response from the maintainer should you appeal to
the list.  You can find the email address of the maintainer by typing
maintainer(<package name>).

(4) From the error message I would guess that there is a bug in the
package; it apparently uses defunct syntax in that it tries to apply
var() to factors.  It seems that this used to be allowed, but is no
longer. But that's just a guess; I know nothing about what att_gt() is
designed to do.

Good luck.

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From bgunter@4567 @end|ng |rom gm@||@com  Sat Jun 26 16:11:50 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 26 Jun 2021 07:11:50 -0700
Subject: [R] dynamic panel data with weight
In-Reply-To: <CABcx46CpaCn_uABvpHSta-JRseLnD231e0kpMHb6N328EWZx_g@mail.gmail.com>
References: <CABcx46CpaCn_uABvpHSta-JRseLnD231e0kpMHb6N328EWZx_g@mail.gmail.com>
Message-ID: <CAGxFJbSbkvjfbugnD1KR4wYXM7WDx8AurKPDqG20z6j-pCwS+g@mail.gmail.com>

Have you looked here?
https://cran.r-project.org/web/views/Econometrics.html

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sat, Jun 26, 2021 at 1:34 AM John <miaojpm at gmail.com> wrote:

> Hi,
>
>    I would like to conduct estimation for dynamic panel data with weight in
> order to account for the importance of each observation. Is there any
> package that can do it?
>
>    To my knowledge, there are two packages that are closest to my goal, but
> they do not do it. (Correct me if I am wrong)
>
> 1. plm -- panel data estimation; the latest version can account for weight,
> but no "dynamic"
>
> 2. pdynmc -- dynamic panel data, but no weight
>
>    Thanks,
>
> J
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From re|chm@nj @end|ng |rom @bcg|ob@|@net  Sun Jun 27 18:10:26 2021
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Sun, 27 Jun 2021 11:10:26 -0500
Subject: [R] Constructing stacked bar plot
References: <001201d76b6e$f19c83e0$d4d58ba0$.ref@sbcglobal.net>
Message-ID: <001201d76b6e$f19c83e0$d4d58ba0$@sbcglobal.net>

R-help Forum

I am attempting to create a stacked bar chart but I have to many categories.
The following code works and I end up plotting all 134 countries but really
only need (say) the top 50 or so.

I am trying to figure out how to further filter out the countries with the
largest total medal counts to plot. The bolded red code is the point where I
am thinking is the point where I would do this . I've tried several
different methods but to no avail. Any suggestions?


# Load data file matching NOCs with mao regions (countries)
noc <- read_csv("~/NGA_Files/JuneMakeoverMonday/noc_regions.csv",
                col_types = cols(
                  NOC = col_character(),
                  region = col_character()
                ))

# Add regions to data and remove missing points
data_regions <- data %>% 
  left_join(noc,by="NOC") %>%
  filter(!is.na(region))

# Subset to variables of interest
medals <- data_regions %>% 
  select(region, Medal)

# count number of medals awarded to each Team
medal_counts_ctry <- medals %>% filter(!is.na(Medal))%>%
  group_by(region, Medal) %>%
  summarize(Count=length(Medal)) 

#head(medal_counts_ctry)

# order Team by total medal count
levs_medal <- medal_counts_ctry %>%
  group_by(region) %>%
  summarize(Total=sum(Count)) %>%
  arrange(desc(Total))

medal_counts_ctry$region <- factor(medal_counts_ctry$region,
levels=levs_medal$region)

medal_data <- medal_counts_ctry %>% filter(medal_counts_ctry$.rows > 100)

# plot
ggplot(medal_data, aes(x=region, y=Count, fill=Medal)) +
  geom_col() +
  coord_flip() +
  scale_fill_manual(values=c("darkorange3","darkgoldenrod1","cornsilk3")) +
  ggtitle("Historical medal counts from Country Teams") +
  theme(plot.title = element_text(hjust = 0.5))


> str(medal_counts_ctry)
grouped_df [323 x 3] (S3: grouped_df/tbl_df/tbl/data.frame)
 $ region: Factor w/ 134 levels "USA","Russia",..: 101 70 70 70 29 29 29 73
73 73 ...
 $ Medal : Factor w/ 3 levels "Bronze","Gold",..: 1 1 2 3 1 2 3 1 2 3 ...
 $ Count : int [1:323] 2 8 5 4 91 91 92 9 2 5 ...
 - attr(*, "groups")= tibble [134 x 2] (S3: tbl_df/tbl/data.frame)
  ..$ region: Factor w/ 134 levels "USA","Russia",..: 1 2 3 4 5 6 7 8 9 10
...
  ..$ .rows : list<int> [1:134] 
  .. ..$ : int [1:3] 307 308 309
  .. ..$ : int [1:3] 235 236 237
  .. ..$ : int [1:3] 102 103 104
  .. ..$ : int [1:3] 296 297 298
  .. ..$ : int [1:3] 95 96 97
  .. ..$ : int [1:3] 138 139 140
  .. ..$ : int [1:3] 263 264 265
  .. ..$ : int [1:3] 46 47 48
  .. ..$ : int [1:3] 11 12 13
  .. ..$ : int [1:3] 117 118 119
  .. ..$ : int [1:3] 194 195 196
  .. ..$ : int [1:3] 208 209 210
  .. ..$ : int [1:3] 52 53 54
  .. ..$ : int [1:3] 147 148 149
  .. ..$ : int [1:3] 92 93 94
  .. ..$ : int [1:3] 266 267 268
  .. ..$ : int [1:3] 232 233 234
  .. ..$ : int [1:3] 69 70 71
  .. ..$ : int [1:3] 253 254 255 ..........

Jeff Reichman

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Sun Jun 27 18:32:14 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 27 Jun 2021 09:32:14 -0700
Subject: [R] Constructing stacked bar plot
In-Reply-To: <001201d76b6e$f19c83e0$d4d58ba0$@sbcglobal.net>
References: <001201d76b6e$f19c83e0$d4d58ba0$.ref@sbcglobal.net>
 <001201d76b6e$f19c83e0$d4d58ba0$@sbcglobal.net>
Message-ID: <CAGxFJbT9cjWVG-y1MQ3DLPumgSgFgK22Owv+MEPMRu8iQPBLmg@mail.gmail.com>

As has already been pointed out to you (several times, I believe) -- **HTML
code is stripped on this *plain text* list**.
Hence, "bolded, red code" is meaningless!

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sun, Jun 27, 2021 at 9:10 AM Jeff Reichman <reichmanj at sbcglobal.net>
wrote:

> R-help Forum
>
> I am attempting to create a stacked bar chart but I have to many
> categories.
> The following code works and I end up plotting all 134 countries but really
> only need (say) the top 50 or so.
>
> I am trying to figure out how to further filter out the countries with the
> largest total medal counts to plot. The bolded red code is the point where
> I
> am thinking is the point where I would do this . I've tried several
> different methods but to no avail. Any suggestions?
>
>
> # Load data file matching NOCs with mao regions (countries)
> noc <- read_csv("~/NGA_Files/JuneMakeoverMonday/noc_regions.csv",
>                 col_types = cols(
>                   NOC = col_character(),
>                   region = col_character()
>                 ))
>
> # Add regions to data and remove missing points
> data_regions <- data %>%
>   left_join(noc,by="NOC") %>%
>   filter(!is.na(region))
>
> # Subset to variables of interest
> medals <- data_regions %>%
>   select(region, Medal)
>
> # count number of medals awarded to each Team
> medal_counts_ctry <- medals %>% filter(!is.na(Medal))%>%
>   group_by(region, Medal) %>%
>   summarize(Count=length(Medal))
>
> #head(medal_counts_ctry)
>
> # order Team by total medal count
> levs_medal <- medal_counts_ctry %>%
>   group_by(region) %>%
>   summarize(Total=sum(Count)) %>%
>   arrange(desc(Total))
>
> medal_counts_ctry$region <- factor(medal_counts_ctry$region,
> levels=levs_medal$region)
>
> medal_data <- medal_counts_ctry %>% filter(medal_counts_ctry$.rows > 100)
>
> # plot
> ggplot(medal_data, aes(x=region, y=Count, fill=Medal)) +
>   geom_col() +
>   coord_flip() +
>   scale_fill_manual(values=c("darkorange3","darkgoldenrod1","cornsilk3")) +
>   ggtitle("Historical medal counts from Country Teams") +
>   theme(plot.title = element_text(hjust = 0.5))
>
>
> > str(medal_counts_ctry)
> grouped_df [323 x 3] (S3: grouped_df/tbl_df/tbl/data.frame)
>  $ region: Factor w/ 134 levels "USA","Russia",..: 101 70 70 70 29 29 29 73
> 73 73 ...
>  $ Medal : Factor w/ 3 levels "Bronze","Gold",..: 1 1 2 3 1 2 3 1 2 3 ...
>  $ Count : int [1:323] 2 8 5 4 91 91 92 9 2 5 ...
>  - attr(*, "groups")= tibble [134 x 2] (S3: tbl_df/tbl/data.frame)
>   ..$ region: Factor w/ 134 levels "USA","Russia",..: 1 2 3 4 5 6 7 8 9 10
> ...
>   ..$ .rows : list<int> [1:134]
>   .. ..$ : int [1:3] 307 308 309
>   .. ..$ : int [1:3] 235 236 237
>   .. ..$ : int [1:3] 102 103 104
>   .. ..$ : int [1:3] 296 297 298
>   .. ..$ : int [1:3] 95 96 97
>   .. ..$ : int [1:3] 138 139 140
>   .. ..$ : int [1:3] 263 264 265
>   .. ..$ : int [1:3] 46 47 48
>   .. ..$ : int [1:3] 11 12 13
>   .. ..$ : int [1:3] 117 118 119
>   .. ..$ : int [1:3] 194 195 196
>   .. ..$ : int [1:3] 208 209 210
>   .. ..$ : int [1:3] 52 53 54
>   .. ..$ : int [1:3] 147 148 149
>   .. ..$ : int [1:3] 92 93 94
>   .. ..$ : int [1:3] 266 267 268
>   .. ..$ : int [1:3] 232 233 234
>   .. ..$ : int [1:3] 69 70 71
>   .. ..$ : int [1:3] 253 254 255 ..........
>
> Jeff Reichman
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From re|chm@nj @end|ng |rom @bcg|ob@|@net  Sun Jun 27 18:36:23 2021
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Sun, 27 Jun 2021 11:36:23 -0500
Subject: [R] Constructing stacked bar plot
In-Reply-To: <CAGxFJbT9cjWVG-y1MQ3DLPumgSgFgK22Owv+MEPMRu8iQPBLmg@mail.gmail.com>
References: <001201d76b6e$f19c83e0$d4d58ba0$.ref@sbcglobal.net>
 <001201d76b6e$f19c83e0$d4d58ba0$@sbcglobal.net>
 <CAGxFJbT9cjWVG-y1MQ3DLPumgSgFgK22Owv+MEPMRu8iQPBLmg@mail.gmail.com>
Message-ID: <002501d76b72$91c06d70$b5414850$@sbcglobal.net>

This line

 

medal_data <- medal_counts_ctry %>% filter(medal_counts_ctry$.rows > 100)

 

From: Bert Gunter <bgunter.4567 at gmail.com> 
Sent: Sunday, June 27, 2021 11:32 AM
To: reichmanj at sbcglobal.net
Cc: R-help <R-help at r-project.org>
Subject: Re: [R] Constructing stacked bar plot

 

As has already been pointed out to you (several times, I believe) -- **HTML code is stripped on this *plain text* list**.

Hence, "bolded, red code" is meaningless!




Bert Gunter

"The trouble with having an open mind is that people keep coming along and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

 

 

On Sun, Jun 27, 2021 at 9:10 AM Jeff Reichman <reichmanj at sbcglobal.net <mailto:reichmanj at sbcglobal.net> > wrote:

R-help Forum

I am attempting to create a stacked bar chart but I have to many categories
The following code works and I end up plotting all 134 countries but really
only need (say) the top 50 or so.

I am trying to figure out how to further filter out the countries with the
largest total medal counts to plot. The bolded red code is the point where I
am thinking is the point where I would do this . I've tried several
different methods but to no avail. Any suggestions?


# Load data file matching NOCs with mao regions (countries)
noc <- read_csv("~/NGA_Files/JuneMakeoverMonday/noc_regions.csv",
                col_types = cols(
                  NOC = col_character(),
                  region = col_character()
                ))

# Add regions to data and remove missing points
data_regions <- data %>% 
  left_join(noc,by="NOC") %>%
  filter(!is.na <http://is.na> (region))

# Subset to variables of interest
medals <- data_regions %>% 
  select(region, Medal)

# count number of medals awarded to each Team
medal_counts_ctry <- medals %>% filter(!is.na <http://is.na> (Medal))%>%
  group_by(region, Medal) %>%
  summarize(Count=length(Medal)) 

#head(medal_counts_ctry)

# order Team by total medal count
levs_medal <- medal_counts_ctry %>%
  group_by(region) %>%
  summarize(Total=sum(Count)) %>%
  arrange(desc(Total))

medal_counts_ctry$region <- factor(medal_counts_ctry$region,
levels=levs_medal$region)

medal_data <- medal_counts_ctry %>% filter(medal_counts_ctry$.rows > 100)

# plot
ggplot(medal_data, aes(x=region, y=Count, fill=Medal)) +
  geom_col() +
  coord_flip() +
  scale_fill_manual(values=c("darkorange3","darkgoldenrod1","cornsilk3")) +
  ggtitle("Historical medal counts from Country Teams") +
  theme(plot.title = element_text(hjust = 0.5))


> str(medal_counts_ctry)
grouped_df [323 x 3] (S3: grouped_df/tbl_df/tbl/data.frame)
 $ region: Factor w/ 134 levels "USA","Russia",..: 101 70 70 70 29 29 29 73
73 73 ...
 $ Medal : Factor w/ 3 levels "Bronze","Gold",..: 1 1 2 3 1 2 3 1 2 3 ...
 $ Count : int [1:323] 2 8 5 4 91 91 92 9 2 5 ...
 - attr(*, "groups")= tibble [134 x 2] (S3: tbl_df/tbl/data.frame)
  ..$ region: Factor w/ 134 levels "USA","Russia",.: 1 2 3 4 5 6 7 8 9 10
..
  ..$ .rows : list<int> [1:134] 
  .. ..$ : int [1:3] 307 308 309
  .. ..$ : int [1:3] 235 236 237
  .. ..$ : int [1:3] 102 103 104
  .. ..$ : int [1:3] 296 297 298
  .. ..$ : int [1:3] 95 96 97
  .. ..$ : int [1:3] 138 139 140
  .. ..$ : int [1:3] 263 264 265
  .. ..$ : int [1:3] 46 47 48
  .. ..$ : int [1:3] 11 12 13
  .. ..$ : int [1:3] 117 118 119
  .. ..$ : int [1:3] 194 195 196
  .. ..$ : int [1:3] 208 209 210
  .. ..$ : int [1:3] 52 53 54
  .. ..$ : int [1:3] 147 148 149
  .. ..$ : int [1:3] 92 93 94
  .. ..$ : int [1:3] 266 267 268
  .. ..$ : int [1:3] 232 233 234
  .. ..$ : int [1:3] 69 70 71
  .. ..$ : int [1:3] 253 254 255 ..........

Jeff Reichman

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From @v|gro@@ @end|ng |rom ver|zon@net  Sun Jun 27 19:07:11 2021
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Sun, 27 Jun 2021 13:07:11 -0400
Subject: [R] Constructing stacked bar plot
In-Reply-To: <002501d76b72$91c06d70$b5414850$@sbcglobal.net>
References: <001201d76b6e$f19c83e0$d4d58ba0$.ref@sbcglobal.net>
 <001201d76b6e$f19c83e0$d4d58ba0$@sbcglobal.net>
 <CAGxFJbT9cjWVG-y1MQ3DLPumgSgFgK22Owv+MEPMRu8iQPBLmg@mail.gmail.com>
 <002501d76b72$91c06d70$b5414850$@sbcglobal.net>
Message-ID: <01c801d76b76$deedfa50$9cc9eef0$@verizon.net>

Why should that work in a dplyr function?

medal_data <- medal_counts_ctry %>% filter(medal_counts_ctry$.rows > 100)

Generally in dplyr you do not use the dollar sign notation. And is there a
column starting with a period called ".rows" ??

Without seeing what your data looks like, and assuming you have a column at
that point called rows, I might try:

medal_data <- 
  medal_counts_ctry %>% 
  filter(rows > 100)


-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Jeff Reichman
Sent: Sunday, June 27, 2021 12:36 PM
To: 'Bert Gunter' <bgunter.4567 at gmail.com>
Cc: 'R-help' <R-help at r-project.org>
Subject: Re: [R] Constructing stacked bar plot

This line

 

medal_data <- medal_counts_ctry %>% filter(medal_counts_ctry$.rows > 100)

 

From: Bert Gunter <bgunter.4567 at gmail.com>
Sent: Sunday, June 27, 2021 11:32 AM
To: reichmanj at sbcglobal.net
Cc: R-help <R-help at r-project.org>
Subject: Re: [R] Constructing stacked bar plot

 

As has already been pointed out to you (several times, I believe) -- **HTML
code is stripped on this *plain text* list**.

Hence, "bolded, red code" is meaningless!




Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

 

 

On Sun, Jun 27, 2021 at 9:10 AM Jeff Reichman <reichmanj at sbcglobal.net
<mailto:reichmanj at sbcglobal.net> > wrote:

R-help Forum

I am attempting to create a stacked bar chart but I have to many categories
The following code works and I end up plotting all 134 countries but really
only need (say) the top 50 or so.

I am trying to figure out how to further filter out the countries with the
largest total medal counts to plot. The bolded red code is the point where I
am thinking is the point where I would do this . I've tried several
different methods but to no avail. Any suggestions?


# Load data file matching NOCs with mao regions (countries) noc <-
read_csv("~/NGA_Files/JuneMakeoverMonday/noc_regions.csv",
                col_types = cols(
                  NOC = col_character(),
                  region = col_character()
                ))

# Add regions to data and remove missing points data_regions <- data %>%
  left_join(noc,by="NOC") %>%
  filter(!is.na <http://is.na> (region))

# Subset to variables of interest
medals <- data_regions %>%
  select(region, Medal)

# count number of medals awarded to each Team medal_counts_ctry <- medals
%>% filter(!is.na <http://is.na> (Medal))%>%
  group_by(region, Medal) %>%
  summarize(Count=length(Medal)) 

#head(medal_counts_ctry)

# order Team by total medal count
levs_medal <- medal_counts_ctry %>%
  group_by(region) %>%
  summarize(Total=sum(Count)) %>%
  arrange(desc(Total))

medal_counts_ctry$region <- factor(medal_counts_ctry$region,
levels=levs_medal$region)

medal_data <- medal_counts_ctry %>% filter(medal_counts_ctry$.rows > 100)

# plot
ggplot(medal_data, aes(x=region, y=Count, fill=Medal)) +
  geom_col() +
  coord_flip() +
  scale_fill_manual(values=c("darkorange3","darkgoldenrod1","cornsilk3")) +
  ggtitle("Historical medal counts from Country Teams") +
  theme(plot.title = element_text(hjust = 0.5))


> str(medal_counts_ctry)
grouped_df [323 x 3] (S3: grouped_df/tbl_df/tbl/data.frame)  $ region:
Factor w/ 134 levels "USA","Russia",..: 101 70 70 70 29 29 29 73
73 73 ...
 $ Medal : Factor w/ 3 levels "Bronze","Gold",..: 1 1 2 3 1 2 3 1 2 3 ...
 $ Count : int [1:323] 2 8 5 4 91 91 92 9 2 5 ...
 - attr(*, "groups")= tibble [134 x 2] (S3: tbl_df/tbl/data.frame)
  ..$ region: Factor w/ 134 levels "USA","Russia",.: 1 2 3 4 5 6 7 8 9 10 ..
  ..$ .rows : list<int> [1:134]
  .. ..$ : int [1:3] 307 308 309
  .. ..$ : int [1:3] 235 236 237
  .. ..$ : int [1:3] 102 103 104
  .. ..$ : int [1:3] 296 297 298
  .. ..$ : int [1:3] 95 96 97
  .. ..$ : int [1:3] 138 139 140
  .. ..$ : int [1:3] 263 264 265
  .. ..$ : int [1:3] 46 47 48
  .. ..$ : int [1:3] 11 12 13
  .. ..$ : int [1:3] 117 118 119
  .. ..$ : int [1:3] 194 195 196
  .. ..$ : int [1:3] 208 209 210
  .. ..$ : int [1:3] 52 53 54
  .. ..$ : int [1:3] 147 148 149
  .. ..$ : int [1:3] 92 93 94
  .. ..$ : int [1:3] 266 267 268
  .. ..$ : int [1:3] 232 233 234
  .. ..$ : int [1:3] 69 70 71
  .. ..$ : int [1:3] 253 254 255 ..........

Jeff Reichman

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To
UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Mon Jun 28 07:47:10 2021
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Mon, 28 Jun 2021 06:47:10 +0100
Subject: [R] Constructing stacked bar plot
In-Reply-To: <001201d76b6e$f19c83e0$d4d58ba0$@sbcglobal.net>
References: <001201d76b6e$f19c83e0$d4d58ba0$.ref@sbcglobal.net>
 <001201d76b6e$f19c83e0$d4d58ba0$@sbcglobal.net>
Message-ID: <87693881-4412-3905-3703-b59f9ec5ed86@sapo.pt>

Hello,

Something like this?


# count number of medals awarded to each Team
medal_counts_ctry <- medals %>%
   na.omit() %>%
   count(region, Medal, name = "Count")

#head(medal_counts_ctry)

# order Team by total medal count
levs_medal <- medal_counts_ctry %>%
   group_by(region) %>%
   summarize(Total = sum(Count)) %>%
   arrange(desc(Total)) %>%
   pull(region)

medal_counts_ctry$region <- factor(medal_counts_ctry$region,
                                    levels = levs_medal)
# keep top 50 medal counts
top_count <- 50
medal_data <- medal_counts_ctry %>%
   slice_max(order_by = Count, n = top_count)



Hope this helps,

Rui Barradas

?s 17:10 de 27/06/21, Jeff Reichman escreveu:
> R-help Forum
> 
> I am attempting to create a stacked bar chart but I have to many categories.
> The following code works and I end up plotting all 134 countries but really
> only need (say) the top 50 or so.
> 
> I am trying to figure out how to further filter out the countries with the
> largest total medal counts to plot. The bolded red code is the point where I
> am thinking is the point where I would do this . I've tried several
> different methods but to no avail. Any suggestions?
> 
> 
> # Load data file matching NOCs with mao regions (countries)
> noc <- read_csv("~/NGA_Files/JuneMakeoverMonday/noc_regions.csv",
>                  col_types = cols(
>                    NOC = col_character(),
>                    region = col_character()
>                  ))
> 
> # Add regions to data and remove missing points
> data_regions <- data %>%
>    left_join(noc,by="NOC") %>%
>    filter(!is.na(region))
> 
> # Subset to variables of interest
> medals <- data_regions %>%
>    select(region, Medal)
> 
> # count number of medals awarded to each Team
> medal_counts_ctry <- medals %>% filter(!is.na(Medal))%>%
>    group_by(region, Medal) %>%
>    summarize(Count=length(Medal))
> 
> #head(medal_counts_ctry)
> 
> # order Team by total medal count
> levs_medal <- medal_counts_ctry %>%
>    group_by(region) %>%
>    summarize(Total=sum(Count)) %>%
>    arrange(desc(Total))
> 
> medal_counts_ctry$region <- factor(medal_counts_ctry$region,
> levels=levs_medal$region)
> 
> medal_data <- medal_counts_ctry %>% filter(medal_counts_ctry$.rows > 100)
> 
> # plot
> ggplot(medal_data, aes(x=region, y=Count, fill=Medal)) +
>    geom_col() +
>    coord_flip() +
>    scale_fill_manual(values=c("darkorange3","darkgoldenrod1","cornsilk3")) +
>    ggtitle("Historical medal counts from Country Teams") +
>    theme(plot.title = element_text(hjust = 0.5))
> 
> 
>> str(medal_counts_ctry)
> grouped_df [323 x 3] (S3: grouped_df/tbl_df/tbl/data.frame)
>   $ region: Factor w/ 134 levels "USA","Russia",..: 101 70 70 70 29 29 29 73
> 73 73 ...
>   $ Medal : Factor w/ 3 levels "Bronze","Gold",..: 1 1 2 3 1 2 3 1 2 3 ...
>   $ Count : int [1:323] 2 8 5 4 91 91 92 9 2 5 ...
>   - attr(*, "groups")= tibble [134 x 2] (S3: tbl_df/tbl/data.frame)
>    ..$ region: Factor w/ 134 levels "USA","Russia",..: 1 2 3 4 5 6 7 8 9 10
> ...
>    ..$ .rows : list<int> [1:134]
>    .. ..$ : int [1:3] 307 308 309
>    .. ..$ : int [1:3] 235 236 237
>    .. ..$ : int [1:3] 102 103 104
>    .. ..$ : int [1:3] 296 297 298
>    .. ..$ : int [1:3] 95 96 97
>    .. ..$ : int [1:3] 138 139 140
>    .. ..$ : int [1:3] 263 264 265
>    .. ..$ : int [1:3] 46 47 48
>    .. ..$ : int [1:3] 11 12 13
>    .. ..$ : int [1:3] 117 118 119
>    .. ..$ : int [1:3] 194 195 196# count number of medals awarded to each Team
medal_counts_ctry <- medals %>%
   na.omit() %>%
   count(region, Medal, name = "Count")

#head(medal_counts_ctry)

# order Team by total medal count
levs_medal <- medal_counts_ctry %>%
   group_by(region) %>%
   summarize(Total = sum(Count)) %>%
   arrange(desc(Total)) %>%
   pull(region)

medal_counts_ctry$region <- factor(medal_counts_ctry$region,
                                    levels = levs_medal)
# keep top 50 medal counts
top_count <- 50
medal_data <- medal_counts_ctry %>%
   slice_max(order_by = Count, n = top_count)

>    .. ..$ : int [1:3] 208 209 210
>    .. ..$ : int [1:3] 52 53 54# count number of medals awarded to each Team
medal_counts_ctry <- medals %>%
   na.omit() %>%
   count(region, Medal, name = "Count")

#head(medal_counts_ctry)

# order Team by total medal count
levs_medal <- medal_counts_ctry %>%
   group_by(region) %>%
   summarize(Total = sum(Count)) %>%
   arrange(desc(Total)) %>%
   pull(region)

medal_counts_ctry$region <- factor(medal_counts_ctry$region,
                                    levels = levs_medal)
# keep top 50 medal counts
top_count <- 50
medal_data <- medal_counts_ctry %>%
   slice_max(order_by = Count, n = top_count)

>    .. ..$ : int [1:3] 147 148 149
>    .. ..$ : int [1:3] 92 93 94
>    .. ..$ : int [1:3] 266 267 268
>    .. ..$ : int [1:3] 232 233 234
>    .. ..$ : int [1:3] 69 70 71
>    .. ..$ : int [1:3] 253 254 255 ..........
> 
> Jeff Reichman
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From mon|c@p@|@|ovejoy @end|ng |rom gm@||@com  Mon Jun 28 14:57:52 2021
From: mon|c@p@|@|ovejoy @end|ng |rom gm@||@com (Monica Palaseanu-Lovejoy)
Date: Mon, 28 Jun 2021 08:57:52 -0400
Subject: [R] colourlovers error
Message-ID: <CABnpDg2mh5K9aXe+XYySzbeh0xCcei0snSGHVHiHjTmFoVvtrw@mail.gmail.com>

Hi,

In an older version of R i was using the package colourlovers to get nice
color palettes. I just updated my R to the latest version and now i am
getting the following error:

id='292482'
pl1 <- clpalette(id)

Opening and ending tag mismatch: input line 114 and form
Opening and ending tag mismatch: input line 113 and div
Opening and ending tag mismatch: input line 112 and div
Opening and ending tag mismatch: form line 98 and div
Entity 'bull' not defined
Entity 'bull' not defined
Opening and ending tag mismatch: div line 92 and body
Opening and ending tag mismatch: div line 84 and html
Premature end of data in tag div line 82
Premature end of data in tag body line 81
Premature end of data in tag html line 5
Error: 1: Opening and ending tag mismatch: input line 114 and form
2: Opening and ending tag mismatch: input line 113 and div
3: Opening and ending tag mismatch: input line 112 and div
4: Opening and ending tag mismatch: form line 98 and div
5: Entity 'bull' not defined
6: Entity 'bull' not defined
7: Opening and ending tag mismatch: div line 92 and body
8: Opening and ending tag mismatch: div line 84 and html
9: Premature end of data in tag div line 82
10: Premature end of data in tag body line 81
11: Premature end of data in tag html line 5

My session is as follows on  Windows 10 64 bit machine:

sessionInfo(package = NULL)
R version 4.1.0 (2021-05-18)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 18363)

Matrix products: default

locale:
[1] LC_COLLATE=English_United States.1252
[2] LC_CTYPE=English_United States.1252
[3] LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C
[5] LC_TIME=English_United States.1252

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
 [1] colourlovers_0.3.6 reshape2_1.4.4     forcats_0.5.1      stringr_1.4.0

 [5] dplyr_1.0.7        purrr_0.3.4        readr_1.4.0        tidyr_1.1.3

 [9] tibble_3.1.2       ggplot2_3.3.5      tidyverse_1.3.1    Rcpp_1.0.6


Maybe i need a separate package to install that i didn't?

Thanks for any help,
Monica

	[[alternative HTML version deleted]]


From Ach|m@Ze||e|@ @end|ng |rom u|bk@@c@@t  Mon Jun 28 15:23:06 2021
From: Ach|m@Ze||e|@ @end|ng |rom u|bk@@c@@t (Achim Zeileis)
Date: Mon, 28 Jun 2021 15:23:06 +0200 (CEST)
Subject: [R] colourlovers error
In-Reply-To: <CABnpDg2mh5K9aXe+XYySzbeh0xCcei0snSGHVHiHjTmFoVvtrw@mail.gmail.com>
References: <CABnpDg2mh5K9aXe+XYySzbeh0xCcei0snSGHVHiHjTmFoVvtrw@mail.gmail.com>
Message-ID: <79b7b734-7da-9476-81b9-35cfcf129e5@uibk.ac.at>

On Mon, 28 Jun 2021, Monica Palaseanu-Lovejoy wrote:

> Hi,
>
> In an older version of R i was using the package colourlovers to get nice
> color palettes. I just updated my R to the latest version and now i am
> getting the following error:

Presumably, there was a change in the API of the colourlovers web site. 
Issues like this are best raised in the issues of the corresponding GitHub 
project (as also linked under "BugReports" on CRAN). In fact, virtually 
the same problem has alsoready been reported there last month but it has 
not yet been fixed: https://github.com/andrewheiss/colourlovers/issues/14

> id='292482'
> pl1 <- clpalette(id)
>
> Opening and ending tag mismatch: input line 114 and form
> Opening and ending tag mismatch: input line 113 and div
> Opening and ending tag mismatch: input line 112 and div
> Opening and ending tag mismatch: form line 98 and div
> Entity 'bull' not defined
> Entity 'bull' not defined
> Opening and ending tag mismatch: div line 92 and body
> Opening and ending tag mismatch: div line 84 and html
> Premature end of data in tag div line 82
> Premature end of data in tag body line 81
> Premature end of data in tag html line 5
> Error: 1: Opening and ending tag mismatch: input line 114 and form
> 2: Opening and ending tag mismatch: input line 113 and div
> 3: Opening and ending tag mismatch: input line 112 and div
> 4: Opening and ending tag mismatch: form line 98 and div
> 5: Entity 'bull' not defined
> 6: Entity 'bull' not defined
> 7: Opening and ending tag mismatch: div line 92 and body
> 8: Opening and ending tag mismatch: div line 84 and html
> 9: Premature end of data in tag div line 82
> 10: Premature end of data in tag body line 81
> 11: Premature end of data in tag html line 5
>
> My session is as follows on  Windows 10 64 bit machine:
>
> sessionInfo(package = NULL)
> R version 4.1.0 (2021-05-18)
> Platform: x86_64-w64-mingw32/x64 (64-bit)
> Running under: Windows 10 x64 (build 18363)
>
> Matrix products: default
>
> locale:
> [1] LC_COLLATE=English_United States.1252
> [2] LC_CTYPE=English_United States.1252
> [3] LC_MONETARY=English_United States.1252
> [4] LC_NUMERIC=C
> [5] LC_TIME=English_United States.1252
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] colourlovers_0.3.6 reshape2_1.4.4     forcats_0.5.1      stringr_1.4.0
>
> [5] dplyr_1.0.7        purrr_0.3.4        readr_1.4.0        tidyr_1.1.3
>
> [9] tibble_3.1.2       ggplot2_3.3.5      tidyverse_1.3.1    Rcpp_1.0.6
>
>
> Maybe i need a separate package to install that i didn't?
>
> Thanks for any help,
> Monica
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From petr@p|k@| @end|ng |rom prechez@@cz  Mon Jun 28 16:11:25 2021
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Mon, 28 Jun 2021 14:11:25 +0000
Subject: [R] colourlovers error
In-Reply-To: <CABnpDg2mh5K9aXe+XYySzbeh0xCcei0snSGHVHiHjTmFoVvtrw@mail.gmail.com>
References: <CABnpDg2mh5K9aXe+XYySzbeh0xCcei0snSGHVHiHjTmFoVvtrw@mail.gmail.com>
Message-ID: <515600b4311a49fab69db0d928effc06@SRVEXCHCM1302.precheza.cz>

Hi Monica

In the meantime you could try RColorBrewers

https://www.r-graph-gallery.com/38-rcolorbrewers-palettes.html

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Monica
> Palaseanu-Lovejoy
> Sent: Monday, June 28, 2021 2:58 PM
> To: r-help <r-help at r-project.org>
> Subject: [R] colourlovers error
> 
> Hi,
> 
> In an older version of R i was using the package colourlovers to get nice
color
> palettes. I just updated my R to the latest version and now i am getting
the
> following error:
> 
> id='292482'
> pl1 <- clpalette(id)
> 
> Opening and ending tag mismatch: input line 114 and form Opening and
> ending tag mismatch: input line 113 and div Opening and ending tag
> mismatch: input line 112 and div Opening and ending tag mismatch: form
line
> 98 and div Entity 'bull' not defined Entity 'bull' not defined Opening and
> ending tag mismatch: div line 92 and body Opening and ending tag mismatch:
> div line 84 and html Premature end of data in tag div line 82 Premature
end of
> data in tag body line 81 Premature end of data in tag html line 5
> Error: 1: Opening and ending tag mismatch: input line 114 and form
> 2: Opening and ending tag mismatch: input line 113 and div
> 3: Opening and ending tag mismatch: input line 112 and div
> 4: Opening and ending tag mismatch: form line 98 and div
> 5: Entity 'bull' not defined
> 6: Entity 'bull' not defined
> 7: Opening and ending tag mismatch: div line 92 and body
> 8: Opening and ending tag mismatch: div line 84 and html
> 9: Premature end of data in tag div line 82
> 10: Premature end of data in tag body line 81
> 11: Premature end of data in tag html line 5
> 
> My session is as follows on  Windows 10 64 bit machine:
> 
> sessionInfo(package = NULL)
> R version 4.1.0 (2021-05-18)
> Platform: x86_64-w64-mingw32/x64 (64-bit) Running under: Windows 10 x64
> (build 18363)
> 
> Matrix products: default
> 
> locale:
> [1] LC_COLLATE=English_United States.1252 [2] LC_CTYPE=English_United
> States.1252 [3] LC_MONETARY=English_United States.1252 [4]
> LC_NUMERIC=C [5] LC_TIME=English_United States.1252
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
> 
> other attached packages:
>  [1] colourlovers_0.3.6 reshape2_1.4.4     forcats_0.5.1
stringr_1.4.0
> 
>  [5] dplyr_1.0.7        purrr_0.3.4        readr_1.4.0        tidyr_1.1.3
> 
>  [9] tibble_3.1.2       ggplot2_3.3.5      tidyverse_1.3.1    Rcpp_1.0.6
> 
> 
> Maybe i need a separate package to install that i didn't?
> 
> Thanks for any help,
> Monica
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.

From mon|c@p@|@|ovejoy @end|ng |rom gm@||@com  Mon Jun 28 18:21:40 2021
From: mon|c@p@|@|ovejoy @end|ng |rom gm@||@com (Monica Palaseanu-Lovejoy)
Date: Mon, 28 Jun 2021 12:21:40 -0400
Subject: [R] colourlovers error
In-Reply-To: <515600b4311a49fab69db0d928effc06@SRVEXCHCM1302.precheza.cz>
References: <CABnpDg2mh5K9aXe+XYySzbeh0xCcei0snSGHVHiHjTmFoVvtrw@mail.gmail.com>
 <515600b4311a49fab69db0d928effc06@SRVEXCHCM1302.precheza.cz>
Message-ID: <CABnpDg31yJQRBTADD0gCy=M+wsbZjSWTkYpgYb04xqFqE6S=BQ@mail.gmail.com>

Hi,

Thanks for letting me know. I will go back to RColorBrewers and monitor
from time to time that issue in GitHub as well to see if it gets solved.

Thanks,
Monica

On Mon, Jun 28, 2021 at 10:11 AM PIKAL Petr <petr.pikal at precheza.cz> wrote:

> Hi Monica
>
> In the meantime you could try RColorBrewers
>
> https://www.r-graph-gallery.com/38-rcolorbrewers-palettes.html
>
> Cheers
> Petr
>
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of Monica
> > Palaseanu-Lovejoy
> > Sent: Monday, June 28, 2021 2:58 PM
> > To: r-help <r-help at r-project.org>
> > Subject: [R] colourlovers error
> >
> > Hi,
> >
> > In an older version of R i was using the package colourlovers to get nice
> color
> > palettes. I just updated my R to the latest version and now i am getting
> the
> > following error:
> >
> > id='292482'
> > pl1 <- clpalette(id)
> >
> > Opening and ending tag mismatch: input line 114 and form Opening and
> > ending tag mismatch: input line 113 and div Opening and ending tag
> > mismatch: input line 112 and div Opening and ending tag mismatch: form
> line
> > 98 and div Entity 'bull' not defined Entity 'bull' not defined Opening
> and
> > ending tag mismatch: div line 92 and body Opening and ending tag
> mismatch:
> > div line 84 and html Premature end of data in tag div line 82 Premature
> end of
> > data in tag body line 81 Premature end of data in tag html line 5
> > Error: 1: Opening and ending tag mismatch: input line 114 and form
> > 2: Opening and ending tag mismatch: input line 113 and div
> > 3: Opening and ending tag mismatch: input line 112 and div
> > 4: Opening and ending tag mismatch: form line 98 and div
> > 5: Entity 'bull' not defined
> > 6: Entity 'bull' not defined
> > 7: Opening and ending tag mismatch: div line 92 and body
> > 8: Opening and ending tag mismatch: div line 84 and html
> > 9: Premature end of data in tag div line 82
> > 10: Premature end of data in tag body line 81
> > 11: Premature end of data in tag html line 5
> >
> > My session is as follows on  Windows 10 64 bit machine:
> >
> > sessionInfo(package = NULL)
> > R version 4.1.0 (2021-05-18)
> > Platform: x86_64-w64-mingw32/x64 (64-bit) Running under: Windows 10 x64
> > (build 18363)
> >
> > Matrix products: default
> >
> > locale:
> > [1] LC_COLLATE=English_United States.1252 [2] LC_CTYPE=English_United
> > States.1252 [3] LC_MONETARY=English_United States.1252 [4]
> > LC_NUMERIC=C [5] LC_TIME=English_United States.1252
> >
> > attached base packages:
> > [1] stats     graphics  grDevices utils     datasets  methods   base
> >
> > other attached packages:
> >  [1] colourlovers_0.3.6 reshape2_1.4.4     forcats_0.5.1
> stringr_1.4.0
> >
> >  [5] dplyr_1.0.7        purrr_0.3.4        readr_1.4.0        tidyr_1.1.3
> >
> >  [9] tibble_3.1.2       ggplot2_3.3.5      tidyverse_1.3.1    Rcpp_1.0.6
> >
> >
> > Maybe i need a separate package to install that i didn't?
> >
> > Thanks for any help,
> > Monica
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-
> > guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From Ach|m@Ze||e|@ @end|ng |rom u|bk@@c@@t  Mon Jun 28 18:25:11 2021
From: Ach|m@Ze||e|@ @end|ng |rom u|bk@@c@@t (Achim Zeileis)
Date: Mon, 28 Jun 2021 18:25:11 +0200 (CEST)
Subject: [R] colourlovers error
In-Reply-To: <CABnpDg31yJQRBTADD0gCy=M+wsbZjSWTkYpgYb04xqFqE6S=BQ@mail.gmail.com>
References: <CABnpDg2mh5K9aXe+XYySzbeh0xCcei0snSGHVHiHjTmFoVvtrw@mail.gmail.com>
 <515600b4311a49fab69db0d928effc06@SRVEXCHCM1302.precheza.cz>
 <CABnpDg31yJQRBTADD0gCy=M+wsbZjSWTkYpgYb04xqFqE6S=BQ@mail.gmail.com>
Message-ID: <b96b1613-724c-70f5-9a9c-943796c1475d@uibk.ac.at>

On Mon, 28 Jun 2021, Monica Palaseanu-Lovejoy wrote:

> Hi,
> 
> Thanks for letting me know. I will go back to RColorBrewers and monitor from
> time to time that issue in GitHub as well to see if it gets solved.

See also

example(palette.colors)
example(hcl.colors)

in base R which provide a wide range of use palettes introduced in:

https://developer.R-project.org/Blog/public/2019/11/21/a-new-palette-for-r/
https://developer.R-project.org/Blog/public/2019/04/01/hcl-based-color-palettes-in-grdevices/

> Thanks,
> Monica
> 
> On Mon, Jun 28, 2021 at 10:11 AM PIKAL Petr <petr.pikal at precheza.cz> wrote:
>       Hi Monica
>
>       In the meantime you could try RColorBrewers
>
>       https://www.r-graph-gallery.com/38-rcolorbrewers-palettes.html
>
>       Cheers
>       Petr
>
>       > -----Original Message-----
>       > From: R-help <r-help-bounces at r-project.org> On Behalf Of
>       Monica
>       > Palaseanu-Lovejoy
>       > Sent: Monday, June 28, 2021 2:58 PM
>       > To: r-help <r-help at r-project.org>
>       > Subject: [R] colourlovers error
>       >
>       > Hi,
>       >
>       > In an older version of R i was using the package colourlovers
>       to get nice
>       color
>       > palettes. I just updated my R to the latest version and now i
>       am getting
>       the
>       > following error:
>       >
>       > id='292482'
>       > pl1 <- clpalette(id)
>       >
>       > Opening and ending tag mismatch: input line 114 and form
>       Opening and
>       > ending tag mismatch: input line 113 and div Opening and ending
>       tag
>       > mismatch: input line 112 and div Opening and ending tag
>       mismatch: form
>       line
>       > 98 and div Entity 'bull' not defined Entity 'bull' not defined
>       Opening and
>       > ending tag mismatch: div line 92 and body Opening and ending
>       tag mismatch:
>       > div line 84 and html Premature end of data in tag div line 82
>       Premature
>       end of
>       > data in tag body line 81 Premature end of data in tag html
>       line 5
>       > Error: 1: Opening and ending tag mismatch: input line 114 and
>       form
>       > 2: Opening and ending tag mismatch: input line 113 and div
>       > 3: Opening and ending tag mismatch: input line 112 and div
>       > 4: Opening and ending tag mismatch: form line 98 and div
>       > 5: Entity 'bull' not defined
>       > 6: Entity 'bull' not defined
>       > 7: Opening and ending tag mismatch: div line 92 and body
>       > 8: Opening and ending tag mismatch: div line 84 and html
>       > 9: Premature end of data in tag div line 82
>       > 10: Premature end of data in tag body line 81
>       > 11: Premature end of data in tag html line 5
>       >
>       > My session is as follows on? Windows 10 64 bit machine:
>       >
>       > sessionInfo(package = NULL)
>       > R version 4.1.0 (2021-05-18)
>       > Platform: x86_64-w64-mingw32/x64 (64-bit) Running under:
>       Windows 10 x64
>       > (build 18363)
>       >
>       > Matrix products: default
>       >
>       > locale:
>       > [1] LC_COLLATE=English_United States.1252 [2]
>       LC_CTYPE=English_United
>       > States.1252 [3] LC_MONETARY=English_United States.1252 [4]
>       > LC_NUMERIC=C [5] LC_TIME=English_United States.1252
>       >
>       > attached base packages:
>       > [1] stats? ? ?graphics? grDevices utils? ? ?datasets? methods?
>       ?base
>       >
>       > other attached packages:
>       >? [1] colourlovers_0.3.6 reshape2_1.4.4? ? ?forcats_0.5.1
>       stringr_1.4.0
>       >
>       >? [5] dplyr_1.0.7? ? ? ? purrr_0.3.4? ? ? ? readr_1.4.0? ? ? ?
>       tidyr_1.1.3
>       >
>       >? [9] tibble_3.1.2? ? ? ?ggplot2_3.3.5? ? ? tidyverse_1.3.1? ?
>       Rcpp_1.0.6
>       >
>       >
>       > Maybe i need a separate package to install that i didn't?
>       >
>       > Thanks for any help,
>       > Monica
>       >
>       >? ? ? ?[[alternative HTML version deleted]]
>       >
>       > ______________________________________________
>       > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
>       see
>       > https://stat.ethz.ch/mailman/listinfo/r-help
>       > PLEASE do read the posting guide
>       http://www.R-project.org/posting-
>       > guide.html
>       > and provide commented, minimal, self-contained, reproducible
>       code.
> 
> 
>

From re|chm@nj @end|ng |rom @bcg|ob@|@net  Tue Jun 29 00:30:43 2021
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Mon, 28 Jun 2021 17:30:43 -0500
Subject: [R] Constructing stacked bar plot
In-Reply-To: <87693881-4412-3905-3703-b59f9ec5ed86@sapo.pt>
References: <001201d76b6e$f19c83e0$d4d58ba0$.ref@sbcglobal.net>
 <001201d76b6e$f19c83e0$d4d58ba0$@sbcglobal.net>
 <87693881-4412-3905-3703-b59f9ec5ed86@sapo.pt>
Message-ID: <000501d76c6d$3c828220$b5878660$@sbcglobal.net>

Thanks - that helps

-----Original Message-----
From: Rui Barradas <ruipbarradas at sapo.pt> 
Sent: Monday, June 28, 2021 12:47 AM
To: reichmanj at sbcglobal.net; R-help at r-project.org
Subject: Re: [R] Constructing stacked bar plot

Hello,

Something like this?


# count number of medals awarded to each Team
medal_counts_ctry <- medals %>%
   na.omit() %>%
   count(region, Medal, name = "Count")

#head(medal_counts_ctry)

# order Team by total medal count
levs_medal <- medal_counts_ctry %>%
   group_by(region) %>%
   summarize(Total = sum(Count)) %>%
   arrange(desc(Total)) %>%
   pull(region)

medal_counts_ctry$region <- factor(medal_counts_ctry$region,
                                    levels = levs_medal)
# keep top 50 medal counts
top_count <- 50
medal_data <- medal_counts_ctry %>%
   slice_max(order_by = Count, n = top_count)



Hope this helps,

Rui Barradas

?s 17:10 de 27/06/21, Jeff Reichman escreveu:
> R-help Forum
> 
> I am attempting to create a stacked bar chart but I have to many categories.
> The following code works and I end up plotting all 134 countries but really
> only need (say) the top 50 or so.
> 
> I am trying to figure out how to further filter out the countries with the
> largest total medal counts to plot. The bolded red code is the point where I
> am thinking is the point where I would do this . I've tried several
> different methods but to no avail. Any suggestions?
> 
> 
> # Load data file matching NOCs with mao regions (countries)
> noc <- read_csv("~/NGA_Files/JuneMakeoverMonday/noc_regions.csv",
>                  col_types = cols(
>                    NOC = col_character(),
>                    region = col_character()
>                  ))
> 
> # Add regions to data and remove missing points
> data_regions <- data %>%
>    left_join(noc,by="NOC") %>%
>    filter(!is.na(region))
> 
> # Subset to variables of interest
> medals <- data_regions %>%
>    select(region, Medal)
> 
> # count number of medals awarded to each Team
> medal_counts_ctry <- medals %>% filter(!is.na(Medal))%>%
>    group_by(region, Medal) %>%
>    summarize(Count=length(Medal))
> 
> #head(medal_counts_ctry)
> 
> # order Team by total medal count
> levs_medal <- medal_counts_ctry %>%
>    group_by(region) %>%
>    summarize(Total=sum(Count)) %>%
>    arrange(desc(Total))
> 
> medal_counts_ctry$region <- factor(medal_counts_ctry$region,
> levels=levs_medal$region)
> 
> medal_data <- medal_counts_ctry %>% filter(medal_counts_ctry$.rows > 100)
> 
> # plot
> ggplot(medal_data, aes(x=region, y=Count, fill=Medal)) +
>    geom_col() +
>    coord_flip() +
>    scale_fill_manual(values=c("darkorange3","darkgoldenrod1","cornsilk3")) +
>    ggtitle("Historical medal counts from Country Teams") +
>    theme(plot.title = element_text(hjust = 0.5))
> 
> 
>> str(medal_counts_ctry)
> grouped_df [323 x 3] (S3: grouped_df/tbl_df/tbl/data.frame)
>   $ region: Factor w/ 134 levels "USA","Russia",..: 101 70 70 70 29 29 29 73
> 73 73 ...
>   $ Medal : Factor w/ 3 levels "Bronze","Gold",..: 1 1 2 3 1 2 3 1 2 3 ...
>   $ Count : int [1:323] 2 8 5 4 91 91 92 9 2 5 ...
>   - attr(*, "groups")= tibble [134 x 2] (S3: tbl_df/tbl/data.frame)
>    ..$ region: Factor w/ 134 levels "USA","Russia",..: 1 2 3 4 5 6 7 8 9 10
> ...
>    ..$ .rows : list<int> [1:134]
>    .. ..$ : int [1:3] 307 308 309
>    .. ..$ : int [1:3] 235 236 237
>    .. ..$ : int [1:3] 102 103 104
>    .. ..$ : int [1:3] 296 297 298
>    .. ..$ : int [1:3] 95 96 97
>    .. ..$ : int [1:3] 138 139 140
>    .. ..$ : int [1:3] 263 264 265
>    .. ..$ : int [1:3] 46 47 48
>    .. ..$ : int [1:3] 11 12 13
>    .. ..$ : int [1:3] 117 118 119
>    .. ..$ : int [1:3] 194 195 196# count number of medals awarded to each Team
medal_counts_ctry <- medals %>%
   na.omit() %>%
   count(region, Medal, name = "Count")

#head(medal_counts_ctry)

# order Team by total medal count
levs_medal <- medal_counts_ctry %>%
   group_by(region) %>%
   summarize(Total = sum(Count)) %>%
   arrange(desc(Total)) %>%
   pull(region)

medal_counts_ctry$region <- factor(medal_counts_ctry$region,
                                    levels = levs_medal)
# keep top 50 medal counts
top_count <- 50
medal_data <- medal_counts_ctry %>%
   slice_max(order_by = Count, n = top_count)

>    .. ..$ : int [1:3] 208 209 210
>    .. ..$ : int [1:3] 52 53 54# count number of medals awarded to each Team
medal_counts_ctry <- medals %>%
   na.omit() %>%
   count(region, Medal, name = "Count")

#head(medal_counts_ctry)

# order Team by total medal count
levs_medal <- medal_counts_ctry %>%
   group_by(region) %>%
   summarize(Total = sum(Count)) %>%
   arrange(desc(Total)) %>%
   pull(region)

medal_counts_ctry$region <- factor(medal_counts_ctry$region,
                                    levels = levs_medal)
# keep top 50 medal counts
top_count <- 50
medal_data <- medal_counts_ctry %>%
   slice_max(order_by = Count, n = top_count)

>    .. ..$ : int [1:3] 147 148 149
>    .. ..$ : int [1:3] 92 93 94
>    .. ..$ : int [1:3] 266 267 268
>    .. ..$ : int [1:3] 232 233 234
>    .. ..$ : int [1:3] 69 70 71
>    .. ..$ : int [1:3] 253 254 255 ..........
> 
> Jeff Reichman
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 


From er|ck@one@th| @end|ng |rom gm@||@com  Tue Jun 29 17:12:28 2021
From: er|ck@one@th| @end|ng |rom gm@||@com (Esthi Erickson)
Date: Tue, 29 Jun 2021 10:12:28 -0500
Subject: [R] Joining data frames
Message-ID: <CAGDiKFzQxy4azYJYL64ZnXfFADnvXG0ca=9BhRNSRROYEBf65A@mail.gmail.com>

Hi and thank you in advance,

If I have a dataframe, df:

Sample

Plot

Biomass

1

1

1024

1

2

32

2

3

223

2

4

456

3

1


3

2

331

3

3

22151

3

4

1441

And another one, df1:

Sample

Plot

% cover of plant1

% cover of plant2

3

1

32

63

3

2

3


3

3


3

3

4

5

23

I want to join these tables where the columns Sample and Plot are the same.

Currently trying:

df<- right_join(df, df1, by = c(?Sample?, "Plot"))

I am working with a much larger dataset, but it will cut off the data
starting at Sample 3 instead of joining the tables while retaining the
information from df. Any ideas how I could join them this way?


Esthi

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Jun 29 17:34:08 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 29 Jun 2021 08:34:08 -0700
Subject: [R] Joining data frames
In-Reply-To: <CAGDiKFzQxy4azYJYL64ZnXfFADnvXG0ca=9BhRNSRROYEBf65A@mail.gmail.com>
References: <CAGDiKFzQxy4azYJYL64ZnXfFADnvXG0ca=9BhRNSRROYEBf65A@mail.gmail.com>
Message-ID: <5372948C-B76F-43A7-8A28-070203C252D6@dcn.davis.ca.us>

1) Compare the text below that the mailing list sent us to what you saw when you sent your post... this occurred because you did not follow the instructions in the Posting Guide that tell you to send plain text email... the mailing list strips formatting. Note that there are far too many email clients for the Posting Guide to provide instructions on how to configure your particular email client to send plain text, but it is always an option.

2) `right_join` is not a base R function, so you should be specifying which contributed package it comes from.

3) If it comes from dplyr, then you should take note that right_join is not actually used very often in practice. Have you tried left_join?

On June 29, 2021 8:12:28 AM PDT, Esthi Erickson <ericksonesthi at gmail.com> wrote:
>Hi and thank you in advance,
>
>If I have a dataframe, df:
>
>Sample
>
>Plot
>
>Biomass
>
>1
>
>1
>
>1024
>
>1
>
>2
>
>32
>
>2
>
>3
>
>223
>
>2
>
>4
>
>456
>
>3
>
>1
>
>
>3
>
>2
>
>331
>
>3
>
>3
>
>22151
>
>3
>
>4
>
>1441
>
>And another one, df1:
>
>Sample
>
>Plot
>
>% cover of plant1
>
>% cover of plant2
>
>3
>
>1
>
>32
>
>63
>
>3
>
>2
>
>3
>
>
>3
>
>3
>
>
>3
>
>3
>
>4
>
>5
>
>23
>
>I want to join these tables where the columns Sample and Plot are the
>same.
>
>Currently trying:
>
>df<- right_join(df, df1, by = c(?Sample?, "Plot"))
>
>I am working with a much larger dataset, but it will cut off the data
>starting at Sample 3 instead of joining the tables while retaining the
>information from df. Any ideas how I could join them this way?
>
>
>Esthi
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From bgunter@4567 @end|ng |rom gm@||@com  Tue Jun 29 17:43:17 2021
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 29 Jun 2021 08:43:17 -0700
Subject: [R] Joining data frames
In-Reply-To: <CAGDiKFzQxy4azYJYL64ZnXfFADnvXG0ca=9BhRNSRROYEBf65A@mail.gmail.com>
References: <CAGDiKFzQxy4azYJYL64ZnXfFADnvXG0ca=9BhRNSRROYEBf65A@mail.gmail.com>
Message-ID: <CAGxFJbTFfYPkW51fDbeSsajqfyTs+KQXbtkRKE=jQKCyFU-mjg@mail.gmail.com>

This is a plain text list: do not post in HTML --  it can get mangled, as
here (see quoted text below).
Also, you have not posted a reprex; doing so would make it more likely that
you get a helpful reply.

Anyway, I *think* you may want a full outer join, which, In base R,  is
simply given by:

newdf <- merge(df1, df2, all = TRUE)

?merge gives you more info to get what you may want if I'm wrong.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Jun 29, 2021 at 8:13 AM Esthi Erickson <ericksonesthi at gmail.com>
wrote:

> Hi and thank you in advance,
>
> If I have a dataframe, df:
>
> Sample
>
> Plot
>
> Biomass
>
> 1
>
> 1
>
> 1024
>
> 1
>
> 2
>
> 32
>
> 2
>
> 3
>
> 223
>
> 2
>
> 4
>
> 456
>
> 3
>
> 1
>
>
> 3
>
> 2
>
> 331
>
> 3
>
> 3
>
> 22151
>
> 3
>
> 4
>
> 1441
>
> And another one, df1:
>
> Sample
>
> Plot
>
> % cover of plant1
>
> % cover of plant2
>
> 3
>
> 1
>
> 32
>
> 63
>
> 3
>
> 2
>
> 3
>
>
> 3
>
> 3
>
>
> 3
>
> 3
>
> 4
>
> 5
>
> 23
>
> I want to join these tables where the columns Sample and Plot are the same.
>
> Currently trying:
>
> df<- right_join(df, df1, by = c(?Sample?, "Plot"))
>
> I am working with a much larger dataset, but it will cut off the data
> starting at Sample 3 instead of joining the tables while retaining the
> information from df. Any ideas how I could join them this way?
>
>
> Esthi
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From m|n@h@|| @end|ng |rom um|ch@edu  Tue Jun 29 17:51:25 2021
From: m|n@h@|| @end|ng |rom um|ch@edu (Greg Minshall)
Date: Tue, 29 Jun 2021 18:51:25 +0300
Subject: [R] Joining data frames
In-Reply-To: Your message of "Tue, 29 Jun 2021 10:12:28 -0500."
 <CAGDiKFzQxy4azYJYL64ZnXfFADnvXG0ca=9BhRNSRROYEBf65A@mail.gmail.com>
Message-ID: <3725611.1624981885@apollo2.minshall.org>

hi.  i would suggest re-formatting your message as plain text (not
HTML), and re-sending it.  this list strips out HTML content, and the
plain text version you sent is close to illegible.  cheers, Greg


From drj|m|emon @end|ng |rom gm@||@com  Wed Jun 30 01:15:28 2021
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Wed, 30 Jun 2021 09:15:28 +1000
Subject: [R] Joining data frames
In-Reply-To: <CAGDiKFzQxy4azYJYL64ZnXfFADnvXG0ca=9BhRNSRROYEBf65A@mail.gmail.com>
References: <CAGDiKFzQxy4azYJYL64ZnXfFADnvXG0ca=9BhRNSRROYEBf65A@mail.gmail.com>
Message-ID: <CA+8X3fWKd4go9nekKRryis+atsTK8ztsf6yac6Q0Zt7SvFs8Fg@mail.gmail.com>

Hi Esthi,
Have you tried something like:

df2<-merge(df,df1,by.x="Sample",by.y="Plot",all.y=TRUE)

This will get you a right join in "df2", not overwriting "df".

Jim

On Wed, Jun 30, 2021 at 1:13 AM Esthi Erickson <ericksonesthi at gmail.com> wrote:
>
> Hi and thank you in advance,
>
> If I have a dataframe, df:
>
> Sample
>
> Plot
>
> Biomass
>
> 1
>
> 1
>
> 1024
>
> 1
>
> 2
>
> 32
>
> 2
>
> 3
>
> 223
>
> 2
>
> 4
>
> 456
>
> 3
>
> 1
>
>
> 3
>
> 2
>
> 331
>
> 3
>
> 3
>
> 22151
>
> 3
>
> 4
>
> 1441
>
> And another one, df1:
>
> Sample
>
> Plot
>
> % cover of plant1
>
> % cover of plant2
>
> 3
>
> 1
>
> 32
>
> 63
>
> 3
>
> 2
>
> 3
>
>
> 3
>
> 3
>
>
> 3
>
> 3
>
> 4
>
> 5
>
> 23
>
> I want to join these tables where the columns Sample and Plot are the same.
>
> Currently trying:
>
> df<- right_join(df, df1, by = c(?Sample?, "Plot"))
>
> I am working with a much larger dataset, but it will cut off the data
> starting at Sample 3 instead of joining the tables while retaining the
> information from df. Any ideas how I could join them this way?
>
>
> Esthi
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From mccorm@ck @end|ng |rom mo|b|o@mgh@h@rv@rd@edu  Wed Jun 30 02:03:13 2021
From: mccorm@ck @end|ng |rom mo|b|o@mgh@h@rv@rd@edu (Matthew McCormack)
Date: Tue, 29 Jun 2021 20:03:13 -0400
Subject: [R] Joining data frames
In-Reply-To: <CA+8X3fWKd4go9nekKRryis+atsTK8ztsf6yac6Q0Zt7SvFs8Fg@mail.gmail.com>
References: <CAGDiKFzQxy4azYJYL64ZnXfFADnvXG0ca=9BhRNSRROYEBf65A@mail.gmail.com>
 <CA+8X3fWKd4go9nekKRryis+atsTK8ztsf6yac6Q0Zt7SvFs8Fg@mail.gmail.com>
Message-ID: <aff7ada6-2af2-acbe-f180-dbf6f183151f@molbio.mgh.harvard.edu>

 ??? I think, but I'm not sure, that when you use merge it basically 
attaches one data frame to the other. I do not think it matches up 
entries from a particular column in each data frame (and I know 
biologists frequently want to match entries from a particular column in 
each data frame). For that, I think you need a join from the dplyr package.

 ?? If you do a right join, then it will use only the entries from the 
second df (the data frame to the right, df1). Entries in df, that are 
not in df1 will not be in the final (in your example the final is df). 
So, from you code, you took df and then joined it to where it had 
entries in df1 and changed df to contain only entries in df that were in 
df1. Had you done a left_join, then your final data frame, df, would 
contain only those entries found originally in df and df1 (entries in 
df1, but not in df would be excluded in the final df).

 ?? You could do a full_join and then all entries (entries in both data 
frames, entries in df but not in df1, and entries in df1 but not in df) 
will be in the final. Maybe something like : (In this case I have 
created a new data frame, df_final, but you could still go with just 
changing df.)

df_final<- full_join(df, df1, by = c(?Sample?, "Plot"))

Matthew


On 6/29/21 7:15 PM, Jim Lemon wrote:
>          External Email - Use Caution
>
> Hi Esthi,
> Have you tried something like:
>
> df2<-merge(df,df1,by.x="Sample",by.y="Plot",all.y=TRUE)
>
> This will get you a right join in "df2", not overwriting "df".
>
> Jim
>
> On Wed, Jun 30, 2021 at 1:13 AM Esthi Erickson <ericksonesthi at gmail.com> wrote:
>> Hi and thank you in advance,
>>
>> If I have a dataframe, df:
>>
>> Sample
>>
>> Plot
>>
>> Biomass
>>
>> 1
>>
>> 1
>>
>> 1024
>>
>> 1
>>
>> 2
>>
>> 32
>>
>> 2
>>
>> 3
>>
>> 223
>>
>> 2
>>
>> 4
>>
>> 456
>>
>> 3
>>
>> 1
>>
>>
>> 3
>>
>> 2
>>
>> 331
>>
>> 3
>>
>> 3
>>
>> 22151
>>
>> 3
>>
>> 4
>>
>> 1441
>>
>> And another one, df1:
>>
>> Sample
>>
>> Plot
>>
>> % cover of plant1
>>
>> % cover of plant2
>>
>> 3
>>
>> 1
>>
>> 32
>>
>> 63
>>
>> 3
>>
>> 2
>>
>> 3
>>
>>
>> 3
>>
>> 3
>>
>>
>> 3
>>
>> 3
>>
>> 4
>>
>> 5
>>
>> 23
>>
>> I want to join these tables where the columns Sample and Plot are the same.
>>
>> Currently trying:
>>
>> df<- right_join(df, df1, by = c(?Sample?, "Plot"))
>>
>> I am working with a much larger dataset, but it will cut off the data
>> starting at Sample 3 instead of joining the tables while retaining the
>> information from df. Any ideas how I could join them this way?
>>
>>
>> Esthi
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://secure-web.cisco.com/1NdijE3bwtTnJ0kSEgtJU1NlrtOK9zEfac9zyeZv87EuBW5RBFz3d1rdtVoxuWjjEZm2ILfmP1KOs1kEsAOECi2THQ-_HKB9EOJWeI57gQdy8H3UbdNo5_jjkMLPJ7OWuokUT-FJwD84kR0uptsG7XUn_xN9NkAZ4ESV6jXCMs_vWVuqkvXkPRfDV0BBMBQWLKxiQKz-9GYTrcqzWGsCc_A1LB3p6YBnMcOeElnau9pAicwrSrzqbNayjDWgW75J91dn1Bpb7rhV4xLELl_KS0g/https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help
>> PLEASE do read the posting guide http://secure-web.cisco.com/1yHZkzpQUOKRg8cDG22MQDxPOC13uXEOgchugGyn3LgrkzeHEY3bJmUM7BdgniFNPIUlVK9c26rAxELBoKzCk3QtR375fxo8PTFptWSOByZg9wWZw8ounbb3NvkgZApJHaDn6KCFRf4ym05BIQUG039oUDbsdBh6fa5LNBsdgTIGVetQokelOMdncVxIv_g233z1CF1xfAozJ9-8eetgqhSIh1lRMlheHhpVRDzkSbxAij8APSko49XhpHmsqwOevGN0c3vHgLT2dLLAzvO_ZLA/http%3A%2F%2Fwww.R-project.org%2Fposting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://secure-web.cisco.com/1NdijE3bwtTnJ0kSEgtJU1NlrtOK9zEfac9zyeZv87EuBW5RBFz3d1rdtVoxuWjjEZm2ILfmP1KOs1kEsAOECi2THQ-_HKB9EOJWeI57gQdy8H3UbdNo5_jjkMLPJ7OWuokUT-FJwD84kR0uptsG7XUn_xN9NkAZ4ESV6jXCMs_vWVuqkvXkPRfDV0BBMBQWLKxiQKz-9GYTrcqzWGsCc_A1LB3p6YBnMcOeElnau9pAicwrSrzqbNayjDWgW75J91dn1Bpb7rhV4xLELl_KS0g/https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help
> PLEASE do read the posting guide http://secure-web.cisco.com/1yHZkzpQUOKRg8cDG22MQDxPOC13uXEOgchugGyn3LgrkzeHEY3bJmUM7BdgniFNPIUlVK9c26rAxELBoKzCk3QtR375fxo8PTFptWSOByZg9wWZw8ounbb3NvkgZApJHaDn6KCFRf4ym05BIQUG039oUDbsdBh6fa5LNBsdgTIGVetQokelOMdncVxIv_g233z1CF1xfAozJ9-8eetgqhSIh1lRMlheHhpVRDzkSbxAij8APSko49XhpHmsqwOevGN0c3vHgLT2dLLAzvO_ZLA/http%3A%2F%2Fwww.R-project.org%2Fposting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Jun 30 02:07:46 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 29 Jun 2021 20:07:46 -0400
Subject: [R] Joining data frames
In-Reply-To: <aff7ada6-2af2-acbe-f180-dbf6f183151f@molbio.mgh.harvard.edu>
References: <CAGDiKFzQxy4azYJYL64ZnXfFADnvXG0ca=9BhRNSRROYEBf65A@mail.gmail.com>
 <CA+8X3fWKd4go9nekKRryis+atsTK8ztsf6yac6Q0Zt7SvFs8Fg@mail.gmail.com>
 <aff7ada6-2af2-acbe-f180-dbf6f183151f@molbio.mgh.harvard.edu>
Message-ID: <a7637bf3-df65-2bd2-1554-ba1b0d48a53c@gmail.com>

On 29/06/2021 8:03 p.m., Matthew McCormack wrote:
>   ??? I think, but I'm not sure, that when you use merge it basically
> attaches one data frame to the other. I do not think it matches up
> entries from a particular column in each data frame (and I know
> biologists frequently want to match entries from a particular column in
> each data frame). For that, I think you need a join from the dplyr package.

You think wrong.  The Description in the help page is short and clear:

"Merge two data frames by common columns or row names, or do other 
versions of database join operations."

Duncan Murdoch


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Jun 30 04:07:16 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 29 Jun 2021 19:07:16 -0700
Subject: [R] Joining data frames
In-Reply-To: <a7637bf3-df65-2bd2-1554-ba1b0d48a53c@gmail.com>
References: <CAGDiKFzQxy4azYJYL64ZnXfFADnvXG0ca=9BhRNSRROYEBf65A@mail.gmail.com>
 <CA+8X3fWKd4go9nekKRryis+atsTK8ztsf6yac6Q0Zt7SvFs8Fg@mail.gmail.com>
 <aff7ada6-2af2-acbe-f180-dbf6f183151f@molbio.mgh.harvard.edu>
 <a7637bf3-df65-2bd2-1554-ba1b0d48a53c@gmail.com>
Message-ID: <9B3F0408-CF7B-446C-B414-5DEEE4345764@dcn.davis.ca.us>

To expand on this for people submerged in tidyverse, merge is the base R swiss army knife that performs the in-memory functions of

  dplyr::inner_join
  dplyr::left_join
  dplyr::right_join
  dplyr::full_join

but it does not support databases and the like.

On June 29, 2021 5:07:46 PM PDT, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>On 29/06/2021 8:03 p.m., Matthew McCormack wrote:
>>   ??? I think, but I'm not sure, that when you use merge it basically
>> attaches one data frame to the other. I do not think it matches up
>> entries from a particular column in each data frame (and I know
>> biologists frequently want to match entries from a particular column
>in
>> each data frame). For that, I think you need a join from the dplyr
>package.
>
>You think wrong.  The Description in the help page is short and clear:
>
>"Merge two data frames by common columns or row names, or do other 
>versions of database join operations."
>
>Duncan Murdoch
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From |eder|co@c@|bo|| @end|ng |rom ku|euven@be  Wed Jun 30 12:02:45 2021
From: |eder|co@c@|bo|| @end|ng |rom ku|euven@be (Federico Calboli)
Date: Wed, 30 Jun 2021 10:02:45 +0000
Subject: [R] Finding the package providing funtion "%du%"
Message-ID: <B7E3DB3A-3D69-42B3-A909-6BB3EDB161CB@kuleuven.be>

Hello All,

I am playing with igraph (which seems to work for what I have used it).  Nevetheless:

demo('community', package="igraph")



	demo(community)
	---- ~~~~~~~~~

Type  <Return>	 to start : 

> pause <- function() {}

> ### A modular graph has dense subgraphs
> mod <- make_full_graph(10) %du% make_full_graph(10) %du% make_full_graph(10)
Error in make_full_graph(10) %du% make_full_graph(10) %du% make_full_graph(10) : 
 could not find function "%du%?


For the life of mine I cannot find where %du5 is meant to come from.  Any clues?  also, any suggestion 9other than Google) to *efficiently* find whatever dependencies I might be missing?  I did install igraph with dependencies = T? but one never knows.

My: 
> sessionInfo()
R version 4.1.0 (2021-05-18)
Platform: x86_64-apple-darwin17.0 (64-bit)
Running under: macOS Mojave 10.14.6

Matrix products: default
BLAS:   /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRblas.dylib
LAPACK: /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRlapack.dylib

locale:
[1] en_GB.UTF-8/en_GB.UTF-8/en_GB.UTF-8/C/en_GB.UTF-8/en_GB.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] dplyr_1.0.7    magrittr_2.0.1

loaded via a namespace (and not attached):
[1] fansi_0.5.0      utf8_1.2.1       crayon_1.4.1     R6_2.5.0         lifecycle_1.0.0 pillar_1.6.1     rlang_0.4.11     vctrs_0.3.8      generics_0.1.0  
[10] ellipsis_0.3.2   tools_4.1.0      glue_1.4.2       purrr_0.3.4      compiler_4.1.0   pkgconfig_2.0.3  tidyselect_1.1.1 tibble_3.1.2  







--
Federico Calboli
LBEG - Laboratory of Biodiversity and Evolutionary Genomics
Charles Deberiotstraat 32 box 2439
3000 Leuven
+32 16 32 87 67






From er|cjberger @end|ng |rom gm@||@com  Wed Jun 30 12:59:17 2021
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Wed, 30 Jun 2021 13:59:17 +0300
Subject: [R] Finding the package providing funtion "%du%"
In-Reply-To: <B7E3DB3A-3D69-42B3-A909-6BB3EDB161CB@kuleuven.be>
References: <B7E3DB3A-3D69-42B3-A909-6BB3EDB161CB@kuleuven.be>
Message-ID: <CAGgJW771+H2byuaqj0ozKGSQz1ikvqFobLAW6=yWSKWcOD6v=w@mail.gmail.com>

> ??'%du%'

shows it is in the igraph package (disjoint union)



On Wed, Jun 30, 2021 at 1:03 PM Federico Calboli <
federico.calboli at kuleuven.be> wrote:

> Hello All,
>
> I am playing with igraph (which seems to work for what I have used it).
> Nevetheless:
>
> demo('community', package="igraph")
>
>
>
>         demo(community)
>         ---- ~~~~~~~~~
>
> Type  <Return>   to start :
>
> > pause <- function() {}
>
> > ### A modular graph has dense subgraphs
> > mod <- make_full_graph(10) %du% make_full_graph(10) %du%
> make_full_graph(10)
> Error in make_full_graph(10) %du% make_full_graph(10) %du%
> make_full_graph(10) :
>  could not find function "%du%?
>
>
> For the life of mine I cannot find where %du5 is meant to come from.  Any
> clues?  also, any suggestion 9other than Google) to *efficiently* find
> whatever dependencies I might be missing?  I did install igraph with
> dependencies = T? but one never knows.
>
> My:
> > sessionInfo()
> R version 4.1.0 (2021-05-18)
> Platform: x86_64-apple-darwin17.0 (64-bit)
> Running under: macOS Mojave 10.14.6
>
> Matrix products: default
> BLAS:
>  /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRblas.dylib
> LAPACK:
> /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRlapack.dylib
>
> locale:
> [1] en_GB.UTF-8/en_GB.UTF-8/en_GB.UTF-8/C/en_GB.UTF-8/en_GB.UTF-8
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] dplyr_1.0.7    magrittr_2.0.1
>
> loaded via a namespace (and not attached):
> [1] fansi_0.5.0      utf8_1.2.1       crayon_1.4.1     R6_2.5.0
>  lifecycle_1.0.0 pillar_1.6.1     rlang_0.4.11     vctrs_0.3.8
> generics_0.1.0
> [10] ellipsis_0.3.2   tools_4.1.0      glue_1.4.2       purrr_0.3.4
> compiler_4.1.0   pkgconfig_2.0.3  tidyselect_1.1.1 tibble_3.1.2
>
>
>
>
>
>
>
> --
> Federico Calboli
> LBEG - Laboratory of Biodiversity and Evolutionary Genomics
> Charles Deberiotstraat 32 box 2439
> 3000 Leuven
> +32 16 32 87 67
>
>
>
>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From e@ @end|ng |rom enr|co@chum@nn@net  Wed Jun 30 13:06:23 2021
From: e@ @end|ng |rom enr|co@chum@nn@net (Enrico Schumann)
Date: Wed, 30 Jun 2021 13:06:23 +0200
Subject: [R] Finding the package providing funtion "%du%"
In-Reply-To: <B7E3DB3A-3D69-42B3-A909-6BB3EDB161CB@kuleuven.be> (Federico
 Calboli's message of "Wed, 30 Jun 2021 10:02:45 +0000")
References: <B7E3DB3A-3D69-42B3-A909-6BB3EDB161CB@kuleuven.be>
Message-ID: <87czs3a9xs.fsf@enricoschumann.net>

On Wed, 30 Jun 2021, Federico Calboli writes:

> Hello All,
>
> I am playing with igraph (which seems to work for what I have used it).  Nevetheless:
>
> demo('community', package="igraph")
>
>
>
> 	demo(community)
> 	---- ~~~~~~~~~
>
> Type  <Return>	 to start : 
>
>> pause <- function() {}
>
>> ### A modular graph has dense subgraphs
>> mod <- make_full_graph(10) %du% make_full_graph(10) %du% make_full_graph(10)
> Error in make_full_graph(10) %du% make_full_graph(10) %du% make_full_graph(10) : 
>  could not find function "%du%?
>
>
> For the life of mine I cannot find where %du5 is meant
> to come from.  Any clues?  also, any suggestion 9other
> than Google) to *efficiently* find whatever
> dependencies I might be missing?  I did install igraph
> with dependencies = T? but one never knows.
>
> My: 
>> sessionInfo()
> R version 4.1.0 (2021-05-18)
> Platform: x86_64-apple-darwin17.0 (64-bit)
> Running under: macOS Mojave 10.14.6
>
> Matrix products: default
> BLAS:   /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRblas.dylib
> LAPACK: /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRlapack.dylib
>
> locale:
> [1] en_GB.UTF-8/en_GB.UTF-8/en_GB.UTF-8/C/en_GB.UTF-8/en_GB.UTF-8
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base     
>
> other attached packages:
> [1] dplyr_1.0.7    magrittr_2.0.1
>
> loaded via a namespace (and not attached):
> [1] fansi_0.5.0      utf8_1.2.1       crayon_1.4.1     R6_2.5.0         lifecycle_1.0.0 pillar_1.6.1     rlang_0.4.11     vctrs_0.3.8      generics_0.1.0  
> [10] ellipsis_0.3.2   tools_4.1.0      glue_1.4.2       purrr_0.3.4      compiler_4.1.0   pkgconfig_2.0.3  tidyselect_1.1.1 tibble_3.1.2  
>
>
>
>
>
>
>
> --
> Federico Calboli
> LBEG - Laboratory of Biodiversity and Evolutionary Genomics
> Charles Deberiotstraat 32 box 2439
> 3000 Leuven
> +32 16 32 87 67
>

You need to quote the name:

   ?`%du%`
   igraph::`%du%`


You may need to say

   library("igraph")

before you run the demo.



-- 
Enrico Schumann
Lucerne, Switzerland
http://enricoschumann.net


From |eder|co@c@|bo|| @end|ng |rom ku|euven@be  Wed Jun 30 13:06:39 2021
From: |eder|co@c@|bo|| @end|ng |rom ku|euven@be (Federico Calboli)
Date: Wed, 30 Jun 2021 11:06:39 +0000
Subject: [R] Finding the package providing funtion "%du%"
In-Reply-To: <CAGgJW771+H2byuaqj0ozKGSQz1ikvqFobLAW6=yWSKWcOD6v=w@mail.gmail.com>
References: <B7E3DB3A-3D69-42B3-A909-6BB3EDB161CB@kuleuven.be>
 <CAGgJW771+H2byuaqj0ozKGSQz1ikvqFobLAW6=yWSKWcOD6v=w@mail.gmail.com>
Message-ID: <4AEDB7C9-CDD6-4634-A1C9-3E934654C15D@kuleuven.be>



> On 30 Jun 2021, at 13:59, Eric Berger <ericjberger at gmail.com> wrote:
> 
> > ??'%du%'
> 
> shows it is in the igraph package (disjoint union)

damn, you are correct, I failed to load igraph itself before running the demo, hence why the demo did not find the function?

At least I can feel stupid in public on the r-help list! 

F 


> 
> 
> 
> On Wed, Jun 30, 2021 at 1:03 PM Federico Calboli <federico.calboli at kuleuven.be> wrote:
> Hello All,
> 
> I am playing with igraph (which seems to work for what I have used it).  Nevetheless:
> 
> demo('community', package="igraph")
> 
> 
> 
>         demo(community)
>         ---- ~~~~~~~~~
> 
> Type  <Return>   to start : 
> 
> > pause <- function() {}
> 
> > ### A modular graph has dense subgraphs
> > mod <- make_full_graph(10) %du% make_full_graph(10) %du% make_full_graph(10)
> Error in make_full_graph(10) %du% make_full_graph(10) %du% make_full_graph(10) : 
>  could not find function "%du%?
> 
> 
> For the life of mine I cannot find where %du5 is meant to come from.  Any clues?  also, any suggestion 9other than Google) to *efficiently* find whatever dependencies I might be missing?  I did install igraph with dependencies = T? but one never knows.
> 
> My: 
> > sessionInfo()
> R version 4.1.0 (2021-05-18)
> Platform: x86_64-apple-darwin17.0 (64-bit)
> Running under: macOS Mojave 10.14.6
> 
> Matrix products: default
> BLAS:   /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRblas.dylib
> LAPACK: /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRlapack.dylib
> 
> locale:
> [1] en_GB.UTF-8/en_GB.UTF-8/en_GB.UTF-8/C/en_GB.UTF-8/en_GB.UTF-8
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base     
> 
> other attached packages:
> [1] dplyr_1.0.7    magrittr_2.0.1
> 
> loaded via a namespace (and not attached):
> [1] fansi_0.5.0      utf8_1.2.1       crayon_1.4.1     R6_2.5.0         lifecycle_1.0.0 pillar_1.6.1     rlang_0.4.11     vctrs_0.3.8      generics_0.1.0  
> [10] ellipsis_0.3.2   tools_4.1.0      glue_1.4.2       purrr_0.3.4      compiler_4.1.0   pkgconfig_2.0.3  tidyselect_1.1.1 tibble_3.1.2  
> 
> 
> 
> 
> 
> 
> 
> --
> Federico Calboli
> LBEG - Laboratory of Biodiversity and Evolutionary Genomics
> Charles Deberiotstraat 32 box 2439
> 3000 Leuven
> +32 16 32 87 67
> 
> 
> 
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

--
Federico Calboli
LBEG - Laboratory of Biodiversity and Evolutionary Genomics
Charles Deberiotstraat 32 box 2439
3000 Leuven
+32 16 32 87 67






From @kw@|mmo @end|ng |rom gm@||@com  Wed Jun 30 15:31:06 2021
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Wed, 30 Jun 2021 09:31:06 -0400
Subject: [R] Document Paths in R.app
Message-ID: <CAPcHnpRy2cKXXS7LXdJdttYz7EW4ia3x=SoRd5pCOsvAFvTjVw@mail.gmail.com>

Hello,


I've been writing a package that allows a script to know its path, and I've
been struggling to get it working for 'R.app' on macOS.

For 'Rgui' on Windows, I used 'utils::getWindowsHandles' to get the
script's path
[image: image.png]
but it's only on Windows, and even if it wasn't, it seems like 'R.app' only
stores the basename in the window handle, so this won't work.

For 'RStudio', they provide a function from the environment 'tools:rstudio'
that retrieves the script's path, and it seems like there's an equivalent
environment 'tools:RGUI' (you can find the source code at this URL:
https://github.com/R-macos/Mac-GUI/blob/5f6557eb9e921319586ac974db22cc1f74ba76ff/GUI-tools.R)
for 'R.app', but it claims to be for internal use only, and doesn't seem to
have a function for retrieving a document's path.

So my question, does anyone know of a way to retrieve the path of the
currently open document in 'R.app'? Thank you!

	[[alternative HTML version deleted]]


From Adr|@nn@@Perrym@n @end|ng |rom uhnre@e@rch@c@  Wed Jun 30 18:33:30 2021
From: Adr|@nn@@Perrym@n @end|ng |rom uhnre@e@rch@c@ (Perryman, Adrianna)
Date: Wed, 30 Jun 2021 16:33:30 +0000
Subject: [R] Bibliometix Package Question
Message-ID: <QB1PR01MB28840252F4B7F57DDF5ED0C682019@QB1PR01MB2884.CANPRD01.PROD.OUTLOOK.COM>

Hello,

My name is Adrianna, I am a student researcher at the University Health Network in Toronto. I am working on a bibliometric analysis and would like to use R. My search involves five databases: MEDLINE (Ovid), AJOL, EMBASE, African Medicus Index and Web of Science. We expect to gather thousands of results based on our search and we have to undergo a cleaning processes to remove duplicates and exclude any articles that do not fit our inclusion criteria.  Given the codes for running the bibliometric analysis I am inquiring whether it is possible to upload a csv or excel file after cleaning the data to then run the analysis?

If you have any other tips, please let me know the help is greatly appreciated.

I look forward to hearing back from you.

Thank you again!

Best,

Adrianna Perryman

This e-mail may contain confidential and/or privileged information for the sole use of the intended recipient.
Any review or distribution by anyone other than the person for whom it was originally intended is strictly prohibited.
If you have received this e-mail in error, please contact the sender and delete all copies.
Opinions, conclusions or other information contained in this e-mail may not be that of the organization.

If you feel you have received an email from UHN of a commercial nature and would like to be removed from the sender's mailing list please do one of the following:
(1) Follow any unsubscribe process the sender has included in their email
(2) Where no unsubscribe process has been included, reply to the sender and type "unsubscribe" in the subject line. If you require additional information please go to our UHN Newsletters and Mailing Lists page.
Please note that we are unable to automatically unsubscribe individuals from all UHN mailing lists.


Patient Consent for Email:

UHN patients may provide their consent to communicate with UHN about their care using email. All electronic communication carries some risk. Please visit our website here<https://www.uhn.ca/PatientsFamilies/Patient_Safety_Advocacy/Privacy/Documents/Email_consent_and_safety.pdf> to learn about the risks of electronic communication and how to protect your privacy. You may withdraw your consent to receive emails from UHN at any time. Please contact your care provider, if you do not wish to receive emails from UHN.

	[[alternative HTML version deleted]]


